# StackOverflow 问答 11438000-11438999

# jquery - 将输入字段值设置为外来字符

> ID：11438004
> 
> 赞同：2
> 
> 时间：2012-07-11T17:20:49.790
> 
> 标签：jquery, character-encoding

如果我指定这样的输入字段值：

```
 <input type="text" id="requiredField" value="Lait &#233;cr&#233;m&#233;"/> 
```

文本将在输入中显示为：Lait écrémé，但是如果我使用 jQuery.val()...

```
$("#requiredField").val("Lait &#233;cr&#233;m&#233;"); 
```

它不会正确显示...

对这个问题有什么建议吗？或者这可能是一个 jQuery 错误？有转换这个的命令吗？

注：页面为utf8

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T17:25:17.203

这些 html 实体的目的是您可以避免使用 unicode 编码。如果您正确使用 utf-8 等 uncode 编码，则它们毫无意义。

无论如何，`val`不​​会自动解码它们，它只需要文字值。您可以使用此技巧对它们进行解码：

```
$("#requiredField").val($("<div>").html("Lait &#233;cr&#233;m&#233;").text()) 
```

# reporting-services - 从 Quartz.Net 等服务运行时，LocalReport 渲染挂起

> ID：11438011
> 
> 赞同：1
> 
> 时间：2012-07-11T17:21:16.987
> 
> 标签：reporting-services, quartz.net, localreport

我有一个`LocalReport`我正在尝试使用`Render`从 Quartz.net 运行时返回字节数组的方法进行渲染。每当它到达`Render`方法时，代码就会挂起。它在控制台应用程序中正确运行，仅在“无人值守”执行期间挂起。

# phing - 如何通过 ssh 将 mysql 数据库部署到服务器

> ID：11438014
> 
> 赞同：2
> 
> 时间：2012-07-11T17:21:20.157
> 
> 标签：phing

我尝试使用 Phing 将站点部署到服务器。

应该创建数据库或进行更改的命令：

```
 <pdosqlexec url="mysql:host=${db.host}; dbname=${db.name}"
         userid="${db.user}"
         password="${db.pass}"
         src="${project.basedir}/deploy/mysqlbuiltscripts/create_database.sql"/> 
```

它在本地机器上运行良好。但我也需要在服务器上进行更改。主要问题 - 我只能通过 SSH 访问服务器数据库。问题 - 如何通过 SSH 隧道执行此命令？

PS 我尝试使用`<ssh username="${username}" password="${password}" host="${host}" command="${myMysqlCommand}">`，但它不适合我，因为它不会将更改写入 Phing“changelog”表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:04:25.920

你在使用 dbdeployTask 吗？如果您正在为远程服务器生成增量，那么您的文件应该包含更改日志。

如果您无权访问远程服务器，您可能需要直接在远程服务器上执行 dbdeploy 工作，或者通过 ssh 传输您的请求。

我的 dbdeploy 步骤是：

1.  运行 phing -> dbdeploy 任务
2.  获取增量 sql
3.  使用 mysql，在远程服务器上运行 delta sql 脚本
4.  享受

# php - SQL Union 只计算一个查询

> ID：11438015
> 
> 赞同：1
> 
> 时间：2012-07-11T17:21:24.690
> 
> 标签：php, sql, database, union

我试图计算表中的行数。目前我正在使用这个：

```
$sql = "SELECT COUNT(*) 
        FROM `friends` 
        WHERE `user1`='".$user1."' 
            AND `user2`='".$user2."' 
            AND `valid`=0 
        UNION 
        SELECT COUNT(*) 
        FROM `friends` 
        WHERE `user1`='".$user2."' 
            AND `user2`='".$user1."' 
            AND `valid`=0"; 
```

如您所见，`user1`可以同时是`$user1`AND `$user2`。但它不计算 之后的行`UNION`，它只执行之前的第一个查询，`UNION`所以当我实际上应该计算 1 行时，我以 0 结束。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T17:24:38.467

另一种选择，将您的查询替换为：

```
$sql = "SELECT COUNT(*) 
    FROM `friends` 
    WHERE (
            (`user1`='".$user1."' AND `user2`='".$user2."') OR
            (`user1`='".$user2."' AND `user2`='".$user1."')
          )
     AND `valid`=0"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T17:25:25.440

您的查询实际上返回 2 条记录 -`0`第一个计数和`1`第二个计数。您可以对结果使用子查询`SUM()`...

```
$sql = "SELECT SUM(A) AS COUNT FROM
(SELECT COUNT(*) AS A
        FROM `friends` 
        WHERE `user1`='".$user1."' 
            AND `user2`='".$user2."' 
            AND `valid`=0 
        UNION 
        SELECT COUNT(*) 
        FROM `friends` 
        WHERE `user1`='".$user2."' 
            AND `user2`='".$user1."' 
            AND `valid`=0
)"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T17:22:24.560

改为使用`UNION ALL`。`UNION`将排除重复的行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T17:31:40.627

您可以使用更简单的解决方案：

```
SELECT COUNT(*)
FROM friends
WHERE 
    $user1 IN (user1,user2) AND 
    $user2 IN (user1,user2) AND
    valid = 0 
```

# jquery - jQuery、gmap、谷歌地图街景问题

> ID：11438023
> 
> 赞同：2
> 
> 时间：2012-07-11T17:21:39.597
> 
> 标签：jquery, google-maps

好的，我正在使用 gmap jQuery 插件来创建 Google 地图。它有很多功能，而且似乎工作得很好。

这是插件页面的链接： [http ://code.google.com/p/jquery-ui-map/](http://code.google.com/p/jquery-ui-map/)

我正在使用 PHP/MySQL/jQuery/JSON 绘制我的标记 --- 我的点是按照他们应该的方式绘制的。

我的问题是我试图显示一个 jQuery 模态对话框，其中包含标记的街景。与此类似：http: [//jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-streetview.html](http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-streetview.html)

当我点击标记时，我的代码最终会出现以下错误：

```
gmap h[b] is undefined Source 
```

这是javascript：

```
$('#map').gmap().bind('init', function (evt, map) {
$.getJSON('controllers/markers.json', function (data) {
    $.each(data.markers, function (i, marker) {
        $('#map').gmap('addMarker', {
            'position': new google.maps.LatLng(marker.latitude, marker.longitude),
            'icon': "https://chart.googleapis.com/chart?chst=d_bubble_text_small&chld=bb|" + marker.projectNumber + "|0074b0|FFFFFF|",
            'bounds': true
        }).click(function () {
            var projNum = marker.projectNumber;
            var lat = marker.latitude;
            var lng = marker.longitude;
            var location = $(this).get(0).getPosition();
            map.panTo(location);
            $('#street').dialog({
                'modal': true,
                'width': 530,
                'height': 530,
                'title': projNum,
                'resizable': false,
                'draggable': false
            });
            $('#street').gmap('displayStreetView', 'panel', {
                'position': location
            });
        });
    });
}); 
```

});

这是#street div 的 HTML：

```
<div style="display:none;">
        <div id="street" style="height:200px;"></div>
</div> 
```

当我提醒：projNum、lat、lng 变量时，我得到了正确的信息。

任何帮助将非常感激。

谢谢！

# java - 向使用自签名证书的服务器发送 POST 请求

> ID：11438024
> 
> 赞同：0
> 
> 时间：2012-07-11T17:21:40.703
> 
> 标签：java, security, post, certificate

我需要向使用某种安全级别的服务器发送 POST 请求。不幸的是，我对自签名证书知之甚少，我从未使用或研究过它。

在该服务的开发人员指南中，服务器使用“公共 1024 位自签名证书”。

这是什么意思？我必须创建一个证书还是我必须要求它？如果我必须创建一个证书，那么我应该如何使用它？我正在用 Java 实现客户端

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T21:06:36.007

您需要下载证书，例如使用您的互联网浏览器。单击安全信息并导出证书。

然后你需要将它导入到你本地的 java keystore 中，以便 JVM 可以找到它。对于导入，请使用您在 jre/bin 目录中找到的 keytool。keytool 的文档：http: [//docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/keytool.html](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/keytool.html)

默认密钥库是`jre/lib/security/cacerts`.

然后就可以导入下载的证书了： `jre/bin/keytool -import -keystore jre/lib/security/cacerts -alias mycertificate -file downloads/mycertificate.cer`

希望这可以帮助。

PS如果它是自签名或验证的，此时它并不重要。只有您（您的客户）必须信任它。

# python - Python - apache cgi-bin 脚本适用/不适用于不同的 python 安装？

> ID：11438026
> 
> 赞同：0
> 
> 时间：2012-07-11T17:21:44.303
> 
> 标签：python, apache, cgi

我的文件夹`test.py`中有一个`cgi-bin`用于 apache 的文件。该文件如下所示：

```
#!/usr/bin/python
print("Content-type: text/html\n\n")
print("Hello world!") 
```

然后，如果我去`www.<mywebsite>.com/cgi-bin/test.py`，页面成功显示`Hello world!`

**但是，如果我将我的 python 脚本中的标题行更改为**

`#!/home/kalaracey/python2.7/bin/python`

当我导航到 时`www.<mywebsite>.com/cgi-bin/test.py`，我收到错误 500 内部服务器错误。有任何想法吗？

我已经完成`sudo chmod 755 test.py`并且可以`./test.py`使用两个版本的标题行来调用它。

**编辑：**根据@Anony-Mousse 的评论，这里是适用的 Apache error_log：

```
[Wed Jul 11 17:33:40 2012] [error] [client <ipaddress>] (13)Permission denied: exec of '/var/www/cgi-bin/test.py' failed
[Wed Jul 11 17:33:40 2012] [error] [client <ipaddress>] Premature end of script headers: test.py 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:49:32.887

Web 服务器用户是否有权访问您的自定义 python 安装？

如果它不能执行`/home/kalaracey/python2.7/bin/python`它就不能执行你的脚本。

让你拥有`chmod -R go+rX /home/kalaracey/python2.7`和`chmod go+x /home/kalaracey/python2.7/bin/python`。

# google-chrome - 在 Google Chrome 上创建底部栏/面板

> ID：11438027
> 
> 赞同：0
> 
> 时间：2012-07-11T17:21:46.553
> 
> 标签：google-chrome, google-chrome-extension

我正在尝试创建一个谷歌浏览器扩展，其底部出现一个栏，如 Chrome“开发者工具”。如果可能的话，我不想使用内容脚本。chrome 扩展是否提供了任何方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:34:06.133

[您可以使用devtools API](http://code.google.com/chrome/extensions/dev/devtools.html)在开发人员工具中创建一个面板，但听起来您想要与它分开的东西。

不幸的是，不幸的是，没有内容脚本就无法做到这一点——Chrome 对它允许你做的事情非常严格。为什么，我想问一下，您不想使用内容脚本吗？

# jquery - 更改类中每个 html 选择元素的选定选项

> ID：11438028
> 
> 赞同：1
> 
> 时间：2012-07-11T17:21:52.620
> 
> 标签：jquery, html, css

我正在尝试更改一组 html 选择元素的选定选项。我给了它们所有相同的类，以便我可以使用 jQuery 一次选择它们，但由于某种原因，它只更改了类中的第一个元素。这是一个演示：http: [//jsfiddle.net/bwhitney/xP4FP/1/](http://jsfiddle.net/bwhitney/xP4FP/1/)

这里只是代码：

```
<select id="config1" class="config">
<option>foo</option>
<option selected>bar</option>
</select>

<select id="config2" class="config">
<option>foo</option>
<option selected>bar</option>
</select>

<select id="config3" class="config">
<option>foo</option>
<option selected>bar</option>
</select> 
```

使用 jQuery：

```
$('.config option:eq(0)').attr('selected', 'selected');​ 
```

这段代码的结果是只有第一个选择元素会`foo`选择选项。第二个和第三个仍然会`bar`被选中。我认为使用 jQuery 选择一个类会选择具有该类的所有项目。有没有办法用一个选择器选择所有这三个？

作为对可能答案的先发制人的回应（我相信*有人*会考虑提出这个建议）：我知道我可以只编写一个 for 循环来选择每个`$('#config' + i)`. 如果无法一次全部选择它们，这就是我最终要做的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:31:04.010

尝试使用`nth-child`：

```
$('select option:nth-child(1)').prop('selected', 'selected'); 
```

示例：http: [//jsfiddle.net/K4mnx/](http://jsfiddle.net/K4mnx/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T17:58:54.333

代替

```
$('.config option:eq(0)').attr('selected', 'selected');​ 
```

你必须使用

```
$('.config option:nth-child(1)').attr('selected', 'selected');​​​​​​​​​​​​​​​​​​ 
```

`:eq()`和之间的根本区别`:nth-child()`在于

## :eq()

```
Select the element at index n within the matched set. 
```

首先根据前面的表达式匹配元素，`:eq()`即`.config option`在您的情况下。

如果你这样做，`console.log($('.config option'));`你会得到以下

```
[ <option>​foo​&lt;/option>​, <option selected>​bar​&lt;/option>​, <option>​foo​&lt;/option>​, <option selected>​bar​&lt;/option>​, <option>​foo​&lt;/option>​, <option selected>​bar​&lt;/option> ​] 
```

并`:eq(0)`过滤这个匹配的集合，因此只返回第一个元素，即`<option>foo</option>`.

## :nth-child()

```
Selects all elements that are the nth-child of their parent. 
```

过滤时会考虑`:nth-child()`父元素。

下面的命令最好地证明了这种差异

```
console.log($('.config option:eq(0)')); 
```

和

```
console.log($('.config option:nth-child(1)')); 
```

正如预期的那样，第一个命令返回`[<option>​foo​&lt;/option>​]`，因为它是匹配的元素集的第一个元素。

第二个命令，返回

```
[ <option>​foo​&lt;/option>​, <option>​foo​&lt;/option>​, <option>​foo​&lt;/option>​ ] 
```

`.config`因为它选择了 type的所有第一个孩子`option`。

所有其他答案当然是绝对正确的。

我只是想我会添加一些解释。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T17:28:30.040

尝试使用`.each()`这个：

```
$('.config').each(function(index){
    $(this).children('option:eq(0)').attr('selected', 'selected')
}); 
```

​​​​​<a href="http://jsfiddle.net/xP4FP/3/" rel="nofollow">JSFiddle

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T17:30:17.910

将 eq(0) 更改为：

```
$('.config option:first-child').attr('selected', 'selected');​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T17:28:05.160

也许是这样：

```
$('.config').each(function(){ this.options[0].selected = 'selected'; }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T17:29:21.750

AFAIK，你只能用循环来做，否则它只会更新第一个。[http://jsfiddle.net/xP4FP/2/](http://jsfiddle.net/xP4FP/2/)

```
$('.config option:eq(0)').each(function(i,el){$(el).attr('selected', 'selected')}; 
```

# php - 从 db Mysql PHP 获取数据

> ID：11438044
> 
> 赞同：0
> 
> 时间：2012-07-11T17:22:34.303
> 
> 标签：php, mysql, sql

好的，我现在介绍问题，我有 3 个表`Company`, `CompanyName`, `Project`. 在`Company`我有许多公司 ID 和项目 ID，在 `CompanyName`所有公司的`Project`名称中，在所有项目的名称中。

如果你不明白我会举个例子，

*   `Company`: 1, 3; 5、7；. . .
*   `CompanyName`: 1, 名字; 2 姓氏；3 第三名；. . .
*   `Project`：1、第一项目；2、二期项目；. . .

结果必须是：公司名称 - 项目名称

*   名字 - 第三个项目
*   FifthName - 第七个项目

但我不知道像示例中那样从 db 获取数据很热`Company name - Project name`

我从不使用 3 个表进行 SQL 查询。

我的错，你不明白这个问题；（

**看：**

*   表`Company`有 2 行（3 行，但我们只需要 2 行）：`CompanyID` 和 `ProjectId`
*   表`CompanyName`有 2 行：`Id`和`Name`
*   表`Project`有 2 行`Id`和`Name`

表中只有数字 ，`Company`例如`CompanyID=3``ProjectId=100`

而且我不知道，当我有`CompanyID=3` 并`ProjectId=100`从中获取数据时`CompanyName`， `Project`并且答案必须是`THEcompany3 = TheProject100`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:27:57.413

我认为这样的事情可能会奏效：

```
SELECT 
    companyName, projectName, companyID
FROM
    company c 
INNER JOIN 
    companyName cn ON c.companyID=cn.companyID
INNER JOIN
    project p ON c.companyID=p.companyID 
```

用新查询编辑

```
SELECT 
    cn.name, p.name
FROM
    company c
INNER JOIN 
    companyName cn ON c.companyID=companyName.ID
INNER JOIN
    project p ON c.companyID=project.ID 
```

这就是你所追求的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:27:31.227

```
Select cn.companyname, p.projectname 
FROM company c, projects p, companyname cn 
WHERE c.id = p.id AND c.id = cn.id 
```

# iphone - 设置 iphone 壁纸与按钮阵列目标 c

> ID：11438046
> 
> 赞同：1
> 
> 时间：2012-07-11T17:22:38.843
> 
> 标签：iphone, objective-c, tags, uibutton, wallpaper

你好。我正在开发一个应用程序，我想在应用程序本身中设置背景。现在我使用 for 循环和设置标签创建了一组按钮，但由于某种原因，当我单击按钮时没有任何反应。

这是创建按钮的地方：

```
-(void)showSettings {
  [[objc_getClass("DreamBoard") sharedInstance] hideAllExcept:mainView];
  [UIView beginAnimations:nil context:nil];
  [UIView setAnimationDuration:.5];

  if(toggled){
    photos = [[NSArray arrayWithObjects:   
                [UIImage imageWithContentsOfFile:@"/var/mobile/Library/iZoon/Images/Wallpapers/Wallpaper1.png"],
                [UIImage imageWithContentsOfFile:@"/var/mobile/Library/iZoon/Images/Wallpapers/Wallpaper2.png"],
                [UIImage imageWithContentsOfFile:@"/var/mobile/Library/iZoon/Images/Wallpapers/Wallpaper3.png"],
                [UIImage imageWithContentsOfFile:@"/var/mobile/Library/iZoon/Images/Wallpapers/Wallpaper4.png"],
                 nil] retain];

    w=0;
    for ( UIImage *image in photos )
    {                          
        for (l = 0; l<(int)photos.count; l++) 
        {
            wallpaperButton = [[UIButton alloc] initWithFrame:CGRectMake(5,130+150*w,150,150)];

            wallpaperButton.tag = l;

            [wallpaperButton setImage:image forState:UIControlStateNormal];

            [wallpaperButton addTarget:self action:@selector(setWallpaper) forControlEvents:UIControlEventTouchDown];

            [settingsMenu addSubview: wallpaperButton];
            [wallpaperButton release];

        }

        w++;
    } 
```

这是设置壁纸的功能：

```
-(void)setWallpaper {

UIImageView *bgView = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,320,480)];

if ([wallpaperButton tag] == 1) {
  bgView.image = [UIImage imageWithContentsOfFile:@"/var/mobile/Library/iZoon/Images/Wallpapers/Wallpaper1.png"];
}
else if ([wallpaperButton tag] == 0) {
  bgView.image = [UIImage imageWithContentsOfFile:@"/var/mobile/Library/iZoon/Wallpapers/Wallpaper2.png"];   
}
else if ([wallpaperButton tag] == 2) {
  bgView.image = [UIImage imageWithContentsOfFile:@"/var/mobile/Library/iZoon/    Wallpapers/Wallpaper3.png"];  
}
else if ([wallpaperButton tag] == 3) {
  bgView.image = [UIImage imageWithContentsOfFile:@"/var/mobile/Library/iZoon/Wallpapers/Wallpaper4.png"]; 
}

[mainView insertSubview:bgView atIndex:0];
[bgView release]; 
```

}

现在按钮显示正确，但它们没有做任何事情。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:47:42.410

添加 NSLog 语句以查看是否正在调用 setWallpaper 方法。如果是，那么我认为这可能是一个修复：

如果您只是将图像添加到您的 XCode 项目中，您可以通过它们的名称来获取它们。将图像拖到项目中时，请确保选中“如果需要，将文件复制到项目文件夹”框。然后要获取图像，您可以这样做：

```
if ([wallpaperButton tag] == 1) {
    bgView.image = [UIImage imageNamed:@"Wallpaper1.png"];
}
.
.
.
[self.view addSubview:bgView]; 
```

另外，您应该知道，除非您的应用程序隐藏状态栏（带有电池和时钟的状态栏），否则您的图像实际上应该有 460 的高度，因为 20px 被用完。

# jwplayer - jwplayer - 如何在播放前获取视频时长？

> ID：11438047
> 
> 赞同：4
> 
> 时间：2012-07-11T17:22:41.630
> 
> 标签：jwplayer

我试图在 jwplayer 开始播放之前获取视频的持续时间。我尝试在 onReady 事件回调中调用 getDuration()，但它返回 -1。当我在 onPlay 事件回调中调用 getDuration() 时，我得到了正确的值。有任何想法吗？

这是我的代码：

```
<video src="movie.mp4" id="video" width="800" height="600"></video>
<script type="text/javascript">
jwplayer ('video').setup ({
    flashplayer: '/js/mediaplayer-5.10/player.swf',
    width: 600,
    height: 400,
    events: {
        onReady: function () {
            var duration = this.getDuration();
            alert ('ready, duration: ' + duration);
        },
        onPlay: function (state) {
            alert ('play, duration: ' + this.getDuration());
        }
    }
});
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T23:00:48.810

这大约是我处理这个问题的方式：

```
var duration = 0;
jwplayer().onReady(function() {
  if (duration == 0) {
    // we don't have a duration yet, so start playing
    jwplayer().play();
  }
});

jwPlayer().onTime(function() {
  if (duration == 0) {
    // we don't have a duration, so it's playing so we can discover it...
    duration = jwplayer().getDuration();
    jwplayer().stop();
    // do something with duration here
  } else {
    ...
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T11:42:13.410

这是真的。我没有得到任何解决方案，所以我使用了两个事件。OnBuffer 和 OnPlay 如下所示。它在第一个事件中提供-1，在第二个事件中提供实际长度。这可能会有所帮助。好吧，如果退出，我正在寻找任何其他解决方案。

```
 var duration;  
           jwplayer().onBuffer(function () {
            duration = this.getDuration();              
            alert(duration);
            }       
    );

    jwplayer().onPlay(function () {
            if(duration==-1)
            duration=this.getDuration();
            alert(duration);
            }       
    ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T16:16:23.303

JW Player 只会在视频播放时显示时长

```
$.each(all_video_ids, function(video_idx, video_id){
        console.log(video_id);
        var temp_video = jwplayer(video_id);

        var metaData = temp_video.getMeta();
        console.log(metaData);
        console.log(temp_video);
        console.log(temp_video.getDuration());

        if(temp_video.getState() == "PLAYING"){
            temp_video.pause();
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-07T22:55:51.207

因为`getDuration`除非视频正在积极播放（即使在暂停时），否则似乎不起作用。我这样做：

```
onPlay: function(){
    var obj = this; //save a reference to 'this' jw object for reference in the setInterval callback.
    if (!obj.playBegan){ //we only want this to trigger once when play begins (not on seek or ffd)
        obj.playBegan = true;
        obj.durationProcessor = setInterval(function(){
             if (obj.getDuration() !== -1){ //sometimes the movie duration isn't immediately available.
                 clearTimeout(obj.durationProcessor);
                 console.log(obj.getDuration());
             }
        }, 250); //look for a duration every .25 seconds

    }
}, 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-27T12:37:35.273

只是在这个问题上抬头，最近我也分析了其他视频播放器，除了你的管子之外的所有视频播放器都显示视频持续时间最初为 00:00:00 很可能 youtube 正在将持续时间保存在 DB 中并显示它

否则@Scott Evernden 的想法更有意义

[http://mediaelementjs.com/](http://mediaelementjs.com/)、[http://www.videojs.com/](http://www.videojs.com/)和除 youtube 之外的大多数其他网站的持续时间为 00:00:00 jwplayer 也像其他播放器一样在播放事件后提供视频持续时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-27T11:07:40.327

您可以获得玩家准备好的持续时间并获取正确控制器的值，例如：

```
 var duration = $('.jw-group.jw-controlbar-right-group.jw-reset')[0];
  var spanText = $(duration).children('.jw-text.jw-reset.jw-text-duration')
  youTubeVideoDuration = ($(spanText)[0]); 
```

如果您希望将其转换为相对时间（即以秒为单位），它将从播放器获取持续时间，然后您可以使用该功能

```
function toseconds(hms) {
var a = hms.split(':'); // split it at the colons
if (a.length == 3)
    return ((+a[0]) * 60 * 60 + (+a[1]) * 60 + (+a[2])); // if video is in hrs
else
    return ((+a[0]) * 60 + (+a[1])); // video is in minutes
} 
```

# java - 你的类应该实现 ActionListener 还是使用匿名 ActionListener 类的对象

> ID：11438048
> 
> 赞同：17
> 
> 时间：2012-07-11T17:22:45.103
> 
> 标签：java, swing, actionlistener

实现`java.awt.event.ActionListener`接口的最佳方式是什么？

让您的班级实现 ActionListener 并将其添加为 ActionListener：

```
class Foo implements ActionListener{

    public Foo() {
        JButton button = new JButton();
        button.addActionListener(this);
    }

    public void actionPerformed(ActionEvent e) {

    }
} 
```

或者添加一个匿名 ActionListener 类的对象：

```
class Foo{

    public Foo() {
        JButton button = new JButton();
        button.addActionListener(new ActionListener() {     
            public void actionPerformed(ActionEvent e) {

            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-11T17:24:56.667

有些人（jeanette/kleopatra）说几乎*从不*使用 ActionListener，而是使用 Actions，例如 AbstractAction。让您的 GUI 类实现您的侦听器几乎总是一个糟糕的理想，因为这违反了[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)并使您的代码更难以维护和扩展，因此我强烈建议您不要这样做。

因此，例如，一个内部类：

```
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import javax.swing.AbstractAction;
import javax.swing.JButton;

class Foo {

   public Foo() {
       JButton button = new JButton(new ButtonAction("Action", KeyEvent.VK_A));
   }

   private class ButtonAction extends AbstractAction {
      public ButtonAction(String name, Integer mnemonic) {
         super(name);
         putValue(MNEMONIC_KEY, mnemonic);
      }

      @Override
      public void actionPerformed(ActionEvent e) {
         System.out.println("button pressed");
      }
   }

} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-11T17:28:31.103

第二种选择（匿名类）当然更好，另一种选择是在`Foo`.

我不会选择第一个选项，原因有两个：

*   的用户`Foo`不必知道它实现了`ActionListener`.
*   您不能在同一个类中实现两个不同的侦听器。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-11T17:27:12.827

这取决于。如果您想`ActionListener`跨多个组件重用，选项一更好。如果`ActionListener`将只与一个按钮相关联，则选项二很好。

通常，如果您预计项目会有所增长，您将创建一个单独的类（或内部类）。没有必要`Foo`实施`ActionListener`.

# javascript - jQuery按钮每2秒点击一次

> ID：11438056
> 
> 赞同：5
> 
> 时间：2012-07-11T17:23:22.200
> 
> 标签：javascript, jquery, html

当我快速单击一个按钮时，我遇到了一些 jQuery 代码的问题。所以为了解决这个问题，我只需要允许用户每 2 秒左右点击一个按钮。如何使按钮每 2 秒（或我选择的任何时间）只能点击一次？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-11T17:26:35.573

假设您正在使用`<button>`or `<input>`，

```
$('#yourButton').click(function(){
    var btn = $(this);
    btn.prop('disabled',true);
    window.setTimeout(function(){ 
        btn.prop('disabled',false);
    },2000);
}); 
```

[**jsFiddle 演示**](http://jsfiddle.net/9sZeL/1/)

`2000`是重新启用按钮之前的时间长度，以毫秒为单位

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:25:35.293

让“click”处理程序向按钮添加一个类（可能是“clicked”），并启动一个计时器以在 2 秒后删除该类。如果处理程序看到“单击”已应用于按钮，则它什么也不做。

您也可以禁用该按钮；这可能会更好，因为它会给用户视觉指示按钮不会做任何事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T17:25:42.143

单击时禁用按钮，并运行一个具有 2 秒超时的计时器，当按钮到期时重新启用该按钮。

# python - 使用 Python 对 CSV 数据进行排序

> ID：11438063
> 
> 赞同：-2
> 
> 时间：2012-07-11T17:23:43.693
> 
> 标签：python, sorting, csv

我真的很想整理一些数据。我有一些数据想使用 Python 在 CSV 中排序。如果有人可以提供帮助，将不胜感激。它无法在 Excel 中排序，因为行数太多（>1500 万）。

格式如下：

```
X,Y,Level,ID,XYID
15.5,16.5,1.6,HB01,15.516.5
15.5,17.5,1.4,HB01,15.517.5
15.5,18.5,1.7,HB01,15.518.5
15.5,19.5,1.6,HB01,15.519.5
15.5,20.5,1.2,HB01,15.520.5
15.5,20.5,1.9,HB02,15.520.5
15.5,20.5,2.5,HB03,15.520.5
15.5,20.5,2.1,HB04,15.520.5 
```

XYID 只是 X 和 Y 的连接文本。我希望对数据进行排序，以便在第二个块中，唯一出来的行如下，因为它具有最高级别（第三列）并且具有相同的 XYID

```
15.5,20.5,2.5,HB03,15.520.5 
```

我希望最终输出是显示前四行的 csv 文件，因为它们具有不同的 XYID，而新的第 5 行显示最大级别：

```
X,Y,Level,ID,XYID
15.5,16.5,1.6,HB01,15.516.5
15.5,17.5,1.4,HB01,15.517.5
15.5,18.5,1.7,HB01,15.518.5
15.5,19.5,1.6,HB01,15.519.5
15.5,20.5,2.5,HB03,15.520.5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:41:10.200

像下面这样的东西应该可以工作：

```
import csv
import itertools

reader = csv.DictReader(open('input.csv', 'rb'))
groups = itertools.groupby(reader, lambda d: d['XYID'])
result = [max(g, key=lambda d: float(d['Level'])) for k, g in groups]

writer = csv.DictWriter(open('output.csv', 'wb'), reader.fieldnames)
writer.writeheader()
writer.writerows(result) 
```

这里的想法是首先根据行的`XYID`值对行进行分组，然后使用该`Level`值获取每个组的最大行。

如果您的输入 CSV 文件还没有按`XYID`值分组的行，您首先需要对行进行排序，以便它们：

```
reader = csv.DictReader(open('input.csv', 'rb'))
rows = sorted(reader, key=lambda d: d['XYID'])
groups = itertools.groupby(rows, lambda d: d['XYID'])
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:27:39.130

您可以使用该`csv`模块读取所有行。

```
import csv
import decimal
from operator import itemgetter

f = open('your_file')
csv_reader = csv.reader(f)

rows_list = [] 
```

将每行 XYID 值转换为小数

```
for row in csv_reader:
  row[4] = decimal.Decimal(row[4]) 
```

将所有行放入列表中

```
rows_list.append(row) 
```

按 XYID 键排序并写入输出文件。

```
rows_list.sort(key=itemgetter(4)) 
```

我不知道 1500 万行会占用多少内存，或者你有多少可用的内存，所以也许你甚至可以将值写入 python 支持的 sqlite 数据库？将数据写入数据库并选择XYID上的所有数据排序将非常简单

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T17:30:06.583

你可能想看看[pandas](http://pandas.pydata.org/)，它可以读取 CSV 文件并创建一个可以排序的表格数据结构等。它非常擅长处理大型数据集，尽管 1500 万行非常大，所以它总是要依赖关于你有多少内存等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T17:45:46.883

假设您的数据仍需要排序：

```
from itertools import groupby

sorter = lambda r : r[4]

sorteddata = sorted(data, key=sorter)

newdata = (max(g, key=lambda r : float(r[2])) for g in groupby(sorteddata, sorter)) 
```

# crystal-reports - 水晶报表总计不显示在报表页脚中

> ID：11438064
> 
> 赞同：0
> 
> 时间：2012-07-11T17:23:44.990
> 
> 标签：crystal-reports, footer

我正在写一份报告。这些部分如下所示：

*   报告标题
*   页眉
    *   PH1
    *   PH2
*   组头 1
*   组头2
*   细节
*   组页脚2
*   组页脚1
*   页脚
*   报告页脚

我在这里有几个问题：

1.  在第一页上，有两个完整的group1（group-a，group-b），以及来自下一组（group c）的部分数据。垂直线停在 group-b 的末尾。Group-a 和 group-b 有网格，但 group-c 根本没有网格。但在接下来的页面中，所有垂直线看起来都很好。 ![没有额外工单的网格](../Images/f6b56db95707c612ba975872c32bd552.png)
2.  我在报告页脚下创建了一些摘要对象，但没有显示任何内容，甚至没有显示我放置在那里进行测试的文本对象。我玩过部分导出，但到目前为止，没有运气。

请帮我解答问题，非常感谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:40:53.860

哪个版本的水晶？报表页脚前是否有分页符？

我知道您已经尝试过文本对象，但请尝试向报表页脚添加背景颜色以确认它存在于输出中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:55:38.683

至于线问题，一种解决方案是为每个部分创建单独的线段。它们需要仔细定位以垂直排列并调整大小以跨越确切的高度。使用编辑器对话框，因为鼠标定位无法正常工作。

在旧版本的 Crystal 中肯定有很多错误，因为我可能会在正确处理之前使应用程序崩溃数十次。最终我想出了如何很好地避免崩溃，但我现在不记得细节了。一路走来都是个大麻烦。

从设计人员的角度来看，诊断另一个问题可能更容易。

# java - 两个html下拉列表事件

> ID：11438069
> 
> 赞同：0
> 
> 时间：2012-07-11T17:24:29.990
> 
> 标签：java, jsp

我有两个 html 下拉列表，它们的值是使用 jsp 从数据库中检索的。

```
<%
  String query =" SELECT question_text,question_id FROM questions WHERE id = ?";
   PreparedStatement stmt = conn.prepareStatement(query);
   stmt.setString(1,request.getParameter("QID"));
   ResultSet rs = stmt.executeQuery();
    if(!rs.next()) {} else {%>
   <form action="#" method="post">
   <p> First Question </p>
   <select name="currentQuestion">
<%do{%> 
<option value="<%=rs.getString("question_id")%>"><%=rs.getString("question_text")%>  </option>
<%}while(rs.next());}%>
</select>

<%                  
  String query =" SELECT question_text,question_id FROM questions WHERE id = ? AND question id != ? ";
  PreparedStatement stmt = conn.prepareStatement(query);
  stmt.setString(1,request.getParameter("QID"));
  stmt.setString(2,CHOOSEN QUESTION);
  ResultSet rs = stmt.executeQuery();
  if(!rs.next()) {} else {%>
  <p> Next Question </p>
 <select name="currentQuestion">
 <%do{%>    
  <option value="<%=rs.getString("question_id")%>"><%=rs.getString("question_text")%></option>
 <%}while(rs.next());}%>
  </select>
  </form> 
```

现在，当用户从第一个下拉列表中选择特定问题时，第二个下拉列表的值不包括该问题怎么办？有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:35:29.407

1.  您没有`CHOOSEN QUESTION`在代码中的任何地方设置。
2.  您忘记了他`id`和元素`name`中的标签`option`。
3.  `CHOOSEN QUESTION`是变量的非法名称，因为它包含空格。
4.  您不能按照您尝试的方式执行此操作，因为此代码在用户选择选项之前在服务器端运行。您可能想要做的是加载所有选项（如果没有太多选项）并创建一个 JS/jQuery，它将在第一个保管箱发生时刷新第二个`onChange`保管箱（在用户选择一个选项之前 - 你'可能希望禁用第二个保管箱）
5.  您可能想要做的另一件事是创建一个`form`最终将用户的选择提交给 JSP（服务器端）。
6.  您也可以使用 AJAX 实现相同的行为，您可以在此处找到如何执行[此操作的示例。](http://www.daniweb.com/web-development/php/threads/260185/dropdown-list-onchange-phpmysql)

**更新（使用 JS 更改选项的示例代码）：**

```
<html>
<head>
<script type="text/javascript" >
<!-- hide

function update(x){
    if (x != "null") {
        if (x == "1") {
            var jumpmenu2 = document.getElementById("jumpmenu2");
            var newOption1 = document.createElement('option');
            newOption1.text = "a"; //HERE You'll use newOption1.text = "<?php echo $db_option_text;?>"; 
            newOption1.value = "1"; //HERE You'll use newOption1.text = "<?php echo $db_option_value;?>"; 
            var newOption2 = document.createElement('option');
            newOption2.text = "b"; // same like above
            newOption2.value = "2"; // same like above
            var newOption3 = document.createElement('option');
            newOption3.text = "c"; // same like above
            newOption3.value = "3"; // same like above
            jumpmenu2.remove(jumpmenu2.length-1);
            jumpmenu2.remove(jumpmenu2.length-1);
            jumpmenu2.remove(jumpmenu2.length-1);
            try {
                // For standard browsers
                jumpmenu2.add(newOption1,null);
                jumpmenu2.add(newOption2,null);
                jumpmenu2.add(newOption3,null);
            }
            catch (ex) {
                // For Microsoft Internet Explorer and other non-standard browsers.
                jumpmenu2.add(newOption1);
                jumpmenu2.add(newOption2);
                jumpmenu2.add(newOption3);
            }
        }
        else if (x == "2"){
            var jumpmenu2 = document.getElementById("jumpmenu2");
            var newOption1 = document.createElement('option');
            newOption1.text = "d";
            newOption1.value = "1";
            var newOption2 = document.createElement('option');
            newOption2.text = "e";
            newOption2.value = "2";
            var newOption3 = document.createElement('option');
            newOption3.text = "f";
            newOption3.value = "3";
            jumpmenu2.remove(jumpmenu2.length-1);
            jumpmenu2.remove(jumpmenu2.length-1);
            jumpmenu2.remove(jumpmenu2.length-1);
            try {
                // For standard browsers
                jumpmenu2.add(newOption1,null);
                jumpmenu2.add(newOption2,null);
                jumpmenu2.add(newOption3,null);
            }
            catch (ex) {
                // For Microsoft Internet Explorer and other non-standard browsers.
                jumpmenu2.add(newOption1);
                jumpmenu2.add(newOption2);
                jumpmenu2.add(newOption3);
            }
        }
    }
}

// end hide -->
</script>
</head>
<body>
<form name="form1" id="form1">
<select name="jumpmenu" name="jumpmenu" onChange="update(document.form1.jumpmenu.options[document.form1.jumpmenu.options.selectedIndex].value)">
<option value=1>1</option>
<option value=2>2</option>
</select>
</form>
<select name="jumpmenu2" id="jumpmenu2">
<option value=a id=1>a</option>
<option value=b id=2>b</option>
<option value=c id=3>c</option>
</select>
</body>
</html> 
```

# java - 如何在Java中将字节编码为字符串

> ID：11438075
> 
> 赞同：1
> 
> 时间：2012-07-11T17:24:44.683
> 
> 标签：java, string, byte, encode

我正在尝试将输入流中的字节编码为纯文本字符。所以，我用空格分隔的整数组成了字符串，如下所示：

```
InputStream in;
//etc
int b;
String finalString="";
while((b=in.read())!=-1)finalString+=""+b+" ";
in.close() 
```

但问题是，这使得字符串比原始字节大 3-4 倍。有没有其他方法可以将字节编码为纯文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:29:09.930

如果我理解正确，您想将二进制数据转换为纯文本。您应该为此使用 Base64。损耗因子仅为 4/3。

Apache commons-codec 有一个 Base64 编码器（和解码器）的免费实现。

另一种可能性是十六进制编码（commons-codec 也支持），但对于每个二进制数据字节，它需要 2 个字节的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:26:36.250

如果你可以把它全部放在一个单一的`byte[]`，那么这应该只是

```
new String(byteArray, StandardCharsets.UTF_16LE); 
```

或您希望输入使用的任何字符编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T17:28:37.527

您可以获取所有字节并将它们输出到字节数组中，然后使用字节数组创建字符串。

IE

```
String newString = new String(byteArray); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T17:29:11.390

您当前的解决方案生成的字符串比文件中的内容长 3..4 倍，因为它将十进制字符代码连接成一个字符串。

Java 提供了一种无需编写循环即可从流中读取字符串的方法，如下所示：

```
InputStream in;
BufferedReader r = new BufferedReader(new InputStreamReader(in, "UTF8"));
String s = r.readLine(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T17:29:19.563

按照[这里的文档](http://docs.oracle.com/javase/tutorial/i18n/text/string.html)

例如，如果您的字符串是 UTF8：

```
byte[] bytes = // you got that from somewhere...
String x = new String(bytes, "UTF8"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-11T17:29:24.667

Commons-codec 具有将字节编码为 Base64 编码的[方法。](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Base64.html#encodeBase64String%28byte%5B%5D%29)

```
encodedText = new String(
                 org.apache.commons.codec.binary.Base64.encodeBase64(byteArray)); 
```

# python - 防止类实例被评估，直到它的参数被设置

> ID：11438082
> 
> 赞同：0
> 
> 时间：2012-07-11T17:25:26.400
> 
> 标签：python, lazy-evaluation

我不是 100% 确定这是否称为惰性评估，但我希望在 Python 中做到这一点。

我有一个“设置向导”，用户将通过它然后创建一些全局变量，这些变量将用作类中的参数。

`var = myClass(param1, param2)`在全局变量 param1 和 param2 存在之前，不应评估。但是，我需要 var 存在，因为我正在关联`var0 = var.func`myClass 中的一个函数。稍后在应用程序中，调用 var0 并执行 func()。

# 更新

这是我的一些代码：

```
class myClass:

    def __init__(self, param1, param2):
        self.param1 = param1
        self.param2 = param2
    #------------------------------------------------------------------------
    def myFunction(self):
        """
        Some work here using self.param1 and self.param2
        """
    def myFunction2(self):
        """
        Some work here using self.param1 and self.param2
        """
    def myFunction3(self):
        """
        Some work here using self.param1 and self.param2
        """

myInstance = myClass(PARAM1, PARAM2)

myDict = {}
myDict["key1"] = myInstance.myFunction
myDict["key2"] = myInstance.myFunction2
myDict["key3"] = myInstance.myFunction3
# and so on... 
```

`PARAM1`并由`PARAM2`用户通过 wxPython 向导内的操作填充为全局变量。问题是`myInstance`无法在初始化时进行评估，因为`PARAM1`它`PARAM2`还不存在。但是，字典键在初始化时与各种函数相关联，因为它们不会随着时间而改变。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:38:32.097

不，你不想这样做。

如果你真的需要这样做，你应该做的是使用承诺或期货来延迟对这些表达式的评估。这是因为即使变量`var`存在，表达式只有在持有一个带有 member 的对象时`var.func`才会毫无例外地计算。python 有许多承诺或未来的库——我建议你自己用谷歌搜索它们，以便选择最适合你的库。`var``func`

但是，更好的方法是在类存在或设置全局变量之前不执行任何这些操作。

不幸的是，由于您几乎没有提供您正在做什么的细节，因此不可能提供任何更具体的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:36:47.037

**这是一个坏主意**

但是，这里有一些代码可以做你想做的我认为......

```
class myClass(object):
    @property
    def var0(self):
        return param1

a=myClass()
try:
    print (a.var0) #NameError because param1 isn't defined yet.
except NameError:
    pass

param1="foo"   
print a.var0 
```

我们可以使这更加“聪明”（见下文）——现在您只需传递一个字符串，其中包含将在某个时候创建​​的变量的名称。

```
class myClass(object):
    def __init__(self,varname):
        self.varname=varname
    @property
    def var0(self):
        return globals()[self.varname]

a=myClass('param1')
try:
    print (a.var0) #KeyError now
except KeyError:
    pass

param1="foo"
print a.var0 
```

这会延迟访问**全局**变量`param1`，直到它在类上实际使用。但是，通常，**您不想这样做**。将实例创建推迟到您要传递的变量被定义之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T18:56:16.833

代替

```
var = MyClass(p1, p2)

p1 = get_p1()
p2 = get_p2()

# magic happens 
```

为什么不

```
var = MyClass()

p1 = get_p1()
var.p1 = p1

p2 = get_p2()
var.p2 = p2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T23:37:00.483

我使用`@staticmethod`装饰器在我的代码中解决了这个问题，但我不会接受它作为答案，因为我不知道这是否是目前最好的答案！

```
class myClass:
    #------------------------------------------------------------------------
    @staticmethod
    def myFunction(param1, param2):
        """
        Some work here using param1 and param2
        """
    @staticmethod
    def myFunction2(param1, param2):
        """
        Some work here using param1 and param2
        """
    @staticmethod
    def myFunction3(param1, param2):
        """
        Some work here using param1 and param2
        """

myDict = {}
myDict["key1"] = myClass.myFunction
myDict["key2"] = myClass.myFunction2
myDict["key3"] = myClass.myFunction3
# and so on... 
```

在用户通过设置向导并填充`PARAM1`and`PARAM2`之后，我可以遍历字典并使用其关联函数通过传递`PARAM1`和计算相应的值对，`PARAM2`如下所示：

```
for k in myDict.keys():
    myDict[k](PARAM1, PARAM2) 
```

# android - Android 活动生命周期

> ID：11438085
> 
> 赞同：0
> 
> 时间：2012-07-11T17:25:39.743
> 
> 标签：android, xamarin.android

活动 1 通过单击按钮启动活动 2。一旦 Activity 2 的静态内容设置并显示给用户，我想启动一个 AsyncTask。在执行 AsyncTask 时，应该向用户显示 ProgressBar。我的问题是，不是在 Activity 2 聚焦后出现 ProgressBar，而是在 AsyncTask 执行时 Activity 1 保持可见，然后在执行完成后切换到 Activity 2。我试过把我的 AsyncTask 放在：

*   创建时
*   OnPostCreate
*   启动
*   恢复

...的活动 2，但活动 2 仍然只有在任务执行完成后才可见。为了实现我想要的，我需要在 Activity 2 的生命周期中放置 AsyncTask 的哪个点？代码以备不时之需：

Activity 1 启动 AsyncTask 以在继续前验证用户的输入。在该任务的 OnPostExecute 中，如果信息有效：

```
Intent intent = new Intent(_context, typeof(Activity2));
intent.PutExtra("Call", _call);
intent.PutExtra("Site", _site);
intent.PutExtra("ServiceType", _serviceType);
intent.PutExtra("Priority", _priority);
_context.StartActivity(intent); 
```

Activity2.cs

```
public class Activity2 : Activity
{
    private string Call { get; set; }
    private string Site { get; set; }
    private string Priority { get; set; }
    private string ServiceType { get; set; }
    private ViewAnimator Animator { get; set; }
    private Spinner PrioritySpin { get; set; }
    private Spinner ProblemSpin { get; set; }
    private Spinner CauseSpin { get; set; }
    private Spinner RepairSpin { get; set; }
    private Spinner LaborHrsSpin { get; set; }
    private Spinner LaborDecSpin { get; set; }
    private Spinner TravelHrsSpin { get; set; }
    private Spinner TravelDecSpin { get; set; }
    private Spinner SerlModelSpin { get; set; }

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        Intent intent = Intent;
        Call = intent.GetStringExtra("Call");
        Site = intent.GetStringExtra("Site");
        Priority = intent.GetStringExtra("Priority");
        ServiceType = intent.GetStringExtra("ServiceType");

        Title = "Service Report for Call #" + Call + " at Site " + Site;

        SetContentView(Resource.Layout.Activity2);

        Animator = (ViewAnimator) FindViewById(Resource.Id.contentContainer);

        Button basic = (Button) FindViewById(Resource.Id.basicBtn);
            basic.Click += WizardClick;
        Button equipment = (Button) FindViewById(Resource.Id.equipmentBtn);
            equipment.Click += WizardClick;
        Button parts = (Button) FindViewById(Resource.Id.partsBtn);
            parts.Click += WizardClick;
        Button comments = (Button) FindViewById(Resource.Id.commentsBtn);
            comments.Click += WizardClick;
        Button review = (Button) FindViewById(Resource.Id.reviewSubmit);
            review.Click += WizardClick;

        PrioritySpin = (Spinner) FindViewById(Resource.Id.prioritySpinner);
        ProblemSpin = (Spinner) FindViewById(Resource.Id.problemSpinner);
        CauseSpin = (Spinner) FindViewById(Resource.Id.causeSpinner);
        RepairSpin = (Spinner) FindViewById(Resource.Id.repairSpinner);
        LaborHrsSpin = (Spinner) FindViewById(Resource.Id.laborHrsSpinner);
        LaborDecSpin = (Spinner) FindViewById(Resource.Id.laborDecSpinner);
        TravelHrsSpin = (Spinner) FindViewById(Resource.Id.travelHrsSpinner);
        TravelDecSpin = (Spinner) FindViewById(Resource.Id.travelDecSpinner);

        ArrayAdapter<string> priorityAdapter = new ArrayAdapter<string>(this, Android.Resource.Layout.SimpleSpinnerDropDownItem, Priorities());
        ArrayAdapter<string> problemAdapter = new ArrayAdapter<string>(this, Android.Resource.Layout.SimpleSpinnerDropDownItem, Problems());
        ArrayAdapter<string> causeAdapter = new ArrayAdapter<string>(this, Android.Resource.Layout.SimpleSpinnerDropDownItem, Cause());
        ArrayAdapter<string> repairAdapter = new ArrayAdapter<string>(this, Android.Resource.Layout.SimpleSpinnerDropDownItem, Repair());
        ArrayAdapter<string> hoursAdapter = new ArrayAdapter<string>(this, Android.Resource.Layout.SimpleSpinnerDropDownItem, Hours());
        ArrayAdapter<string> decAdapter = new ArrayAdapter<string>(this, Android.Resource.Layout.SimpleSpinnerDropDownItem, QuarterHours());

        PrioritySpin.Adapter = priorityAdapter;
        ProblemSpin.Adapter = problemAdapter;
        CauseSpin.Adapter = causeAdapter;
        RepairSpin.Adapter = repairAdapter;
        LaborHrsSpin.Adapter = hoursAdapter;
        LaborDecSpin.Adapter = decAdapter;
        TravelHrsSpin.Adapter = hoursAdapter;
        TravelDecSpin.Adapter = decAdapter;

        PrioritySpin.SetSelection(Convert.ToInt32(Priority));

        if (ServiceType == "PM")
        {
            ProblemSpin.SetSelection(Array.IndexOf(Problems(), "Scheduled"));
            CauseSpin.SetSelection(Array.IndexOf(Cause(), "Scheduled"));
        }

        Window.SetSoftInputMode(SoftInput.StateAlwaysHidden);
    }

    protected override void OnResume()
    {
        base.OnResume();

        SerlModelSpin = (Spinner)FindViewById(Resource.Id.equipSpinner);

        IEquipment equipInterface = new EquipmentHelper(this, Animator, 5, 0);
        string[] equipList = equipInterface.GetEquipmentList(Site);
        ArrayAdapter<string> equipAdapter = new ArrayAdapter<string>(this, Android.Resource.Layout.SimpleSpinnerDropDownItem, equipList);

        SerlModelSpin.Adapter = equipAdapter;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:55:46.317

为什么在此 AsyncTask 在后台运行时，活动 2 在后台很重要？无论如何，用户都将看到一个对话框......为什么不在 AsyncTask 中放置一个标志，并等待设置标志并显示对话框，直到`onResume()`方法完成执行。或者您可以尝试在活动时从活动一中调用静态启动方法。也许通过调用 finish() 然后覆盖 onDestroy() 方法。很难把握好时机。。

# c# - 如何委托给默认格式提供者？

> ID：11438089
> 
> 赞同：5
> 
> 时间：2012-07-11T17:25:57.500
> 
> 标签：c#, string-formatting

我想`EscapingFormatProvider`在返回它们之前创建一个自动 HTML 转义格式化字符串，除非格式参数以 ! 开头：

```
string.Format(new EscapingFormatProvider(), "<div>{0}</div>", "<script src='foo'></script>");
// => <div>&lt;script src='foo'&gt;&lt;/script&gt;</div>

string.Format(new EscapingFormatProvider(), "<div>{0:!}</div>", "<script src='foo'></script>");
// => <div><script src='foo'></script></div> 
```

我希望它传递格式参数，而不是 ! 如果有，则使用默认格式化程序。唯一的麻烦是，我不知道如何使用默认格式化程序。我发现的所有示例都没有解决委托给默认格式化程序的问题。

编辑：这就是我想出的：

```
private class EscapingFormatProvider : IFormatProvider, ICustomFormatter
{
    public object GetFormat(Type formatType) { return this; }

    private string DefaultFormat(string format, object arg)
    {
        return string.Format("{0:" + format + "}", arg);
    }

    public string Format(string format, object arg, IFormatProvider formatProvider)
    {
        return (format.First() == '!')
            ? HttpUtility.HtmlEncode(DefaultFormat(format.Substring(1), arg))
            : DefaultFormat(format, arg);
    }
} 
```

这有点间接，但我认为它有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-16T18:35:57.960

正确的解决方案是重新实现默认格式化程序所做的事情，如下所示：

```
var formattable = arg as IFormattable;
return formattable == null
    ? arg.ToString()
    : formattable.ToString(format, formatProvider); 
```

`ICustomFormatter`最重要的是，您的格式提供者应该只在请求的类型时才返回自己。

因此，在您的情况下，您的格式提供程序应如下所示：

```
class EscapingFormatProvider : IFormatProvider, ICustomFormatter
{
    public object GetFormat(Type formatType)
    {
        if (formatType == typeof(ICustomFormatter))
            return this;
        return null;
    }

    public string Format(string format, object arg, IFormatProvider formatProvider)
    {
        var escape = false;
        if (format.StartsWith("!"))
        {
            escape = true;
            format = format.Substring(1);
        }
        var formattable = arg as IFormattable;
        var formatted = formattable == null
            ? arg.ToString()
            : formattable.ToString(format, formatProvider);
        return escape ? HttpUtility.HtmlEncode(formatted) : formatted;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:36:24.087

如果我对您的理解正确，那么使用默认格式提供程序所需要做的就是调用不采用 IFormatProvider 的 string.Format 的重载！或者您是指“默认格式化程序”的其他意思，还是您担心本地化？

# axis2 - Axis2 只为一个端口生成骨架，但我有 2 个端口

> ID：11438091
> 
> 赞同：1
> 
> 时间：2012-07-11T17:26:06.097
> 
> 标签：axis2, wsdl2java

我的 WSDL 中有 2 个端口：

```
<wsdl:portType name="Interface1">
<wsdl:portType name="Interface2"> 
```

我打电话

```
wsdl2java  -g -o result -p  "com.foo" -ss -ssi -ap -g -uri  MyService.wsdl 
```

之后，我只能在“com/foo”文件夹中找到“Interface1SkeletonInterface.java”。

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:32:36.500

wsdl2java 有一个[命令行选项](http://axis.apache.org/axis2/java/core/tools/CodegenToolReference.html#cmdref) `-pn`或`--port-name`指定为哪个端口生成代码。如果未指定，则默认为第一个列出的端口生成代码。

[ant 任务](http://axis.apache.org/axis2/java/core/tools/CodegenToolReference.html#antref)有一个等效选项`portName`。

# c++ - 为什么 boost::assign::ptr_map_insert 将构造函数参数调用更改为 const 引用？

> ID：11438092
> 
> 赞同：1
> 
> 时间：2012-07-11T17:26:07.180
> 
> 标签：c++, boost

我对以下行为感到困惑：

我的“应用程序”类使用 ptr_map_insert 将“SplashScreen”类型的构造函数元素（派生自作为容器类型的我的类“Screen”）添加到 Screen 类型的指针容器中。例子：

```
boost::assign::ptr_map_insert<SplashScreen>(screenContainer_)(GameScreens::Splash, curWindow_, curFileSystem_, curInputManager_); 
```

根据 ptr_map_insert 的文档，最后一对括号以键开头，以下参数传递给 SplashScreen 类的构造函数。

curWindow_ 等是我的类“应用程序”的非常量私有成员

不知道为什么，GCC报错，因为传递给构造函数的参数是const引用，而SplashScreen的构造函数需要正则引用。

```
SplashScreen(sf::RenderWindow& curWindow, System::FileSystem& curFileSystem, System::InputManager& curInputManager); 
```

完整的错误消息在下面，部分由我翻译，因为它是/曾经是德语。

```
/usr/include/boost/preprocessor/iteration/detail/local.hpp: In Elementfunktion »boost::assign::ptr_map_inserter<PtrMap, Obj>& boost::assign::ptr_map_inserter<PtrMap, Obj>::operator()(const T&, const T0&, const T1&, const T2&) [with T = Oxid::GameScreens::gameScreenEnum, T0 = sf::RenderWindow, T1 = Oxid::System::FileSystem, T2 = Oxid::System::InputManager, PtrMap = boost::ptr_map<Oxid::GameScreens::gameScreenEnum, Oxid::Screen>, Obj = Oxid::Game::SplashScreen, boost::assign::ptr_map_inserter<PtrMap, Obj> = boost::assign::ptr_map_inserter<boost::ptr_map<Oxid::GameScreens::gameScreenEnum, Oxid::Screen>, Oxid::Game::SplashScreen>]«:
/blabla/main/application.cpp:42:132:   instanced(?) from here
/usr/include/boost/preprocessor/iteration/detail/local.hpp:43:1: Error: no matching function for calling »Oxid::Game::SplashScreen::SplashScreen(const sf::RenderWindow&, const Oxid::System::FileSystem&, const Oxid::System::InputManager&)«
/usr/include/boost/preprocessor/iteration/detail/local.hpp:43:1: Anmerkung: candidates are :
../include/splashscreen.h:16:17: Anmerkung: Oxid::Game::SplashScreen::SplashScreen(sf::RenderWindow&, Oxid::System::FileSystem&, Oxid::System::InputManager&)
../include/splashscreen.h:16:17: Anmerkung:   no known conversion for argument 1 from »const sf::RenderWindow« to »sf::RenderWindow&«
../include/splashscreen.h:13:15: Anmerkung: Oxid::Game::SplashScreen::SplashScreen(const Oxid::Game::SplashScreen&)
../include/splashscreen.h:13:15: Anmerkung:   candidate requires 1 Argument, 3 denoted 
```

boost 源代码并不表示参数更改为 const 或类似的东西。我忽略了发生这种转换的什么？

编辑：刚刚查看了实际的提升更改日志（我使用的是 1.48.0），但它们不包含有关此问题的内容。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:54:11.597

当我查看源代码时，它似乎确实通过 const 引用获取参数，大概是这样在大多数情况下您不会有丢失 const 的问题。我相信在您的情况下，您将不得不`insert`直接在`ptr_map`而不是帮助模板上使用。

# c# - SSIS Null 处理，脚本任务

> ID：11438093
> 
> 赞同：2
> 
> 时间：2012-07-11T17:26:07.397
> 
> 标签：c#, ssis

我在使用 MS SSIS 时遇到问题。我想下载东西并将其上传到数据库。我正在寻找最佳实践，或者我为什么会出错。

我使用控制流（调用其他任务）。我下载的数据中的一列中有空值。为此，我不能使用字符串或整数，否则它会因错误而退出（执行 sql 任务）。所以我使用对象。示例：变量 sBorderName 是对象，列中的数据放在这里。

我想将此上传到另一个数据库表。例如，该列中也可以有 null。我无法上传对象变量，因为我得到数据库类型不匹配。

当我尝试使用脚本任务 (C#) 消除 null-s 时，我使用以下内容： sBorderName 是对象 sBorderNameSafe 是字符串

```
if (Dts.Variables["User::sBorderName"].Value == null)
{
    Dts.Variables["User::sBorderNameSafe"].Value = "NULL ERROR";
}
else
{
    Dts.Variables["User::sBorderNameSafe"].Value = 
        (String)Dts.Variables["User::sBorderName"].Value;
} 
```

我得到运行时错误，没有提示什么是错误的。错误源于 else 情况。我已经仔细检查了变量、范围、写/读权限等。

你能帮我么？这有什么问题？如果您有更好的想法，解决问题的方法是什么？

西罗

更新：

```
Dts.Events.FireWarning(14, "Display Script", "sBorderName is:" + Dts.Variables["User::sBorderName"].Value, "", 0); 
```

确实有效，它显示“sBorderName is:”

但是，值的每次转换都会因运行时错误而退出

```
(String)Dts.Variables["User::sBorderName"].Value 
```

如何正确处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:45:27.100

```
Convert.ToString(Dts.Variables("sBorderName ").Value) 
```

如果变量有时可以为空，那就行了。

# javascript - 如何创建一个结构为 AMD 模块的可重用库？

> ID：11438095
> 
> 赞同：5
> 
> 时间：2012-07-11T17:26:09.020
> 
> 标签：javascript, requirejs, js-amd

我们正在创建一个打算在多个项目中使用的框架。所有项目都将使用 require.js 来管理模块和依赖项。

理想情况下，我想使用 r.js 优化器*将框架编译成一个文件*，该文件可以提供给使用它的应用程序。该文件将包含框架的所有模块，以便在我的应用程序中我可以编写如下代码：

```
define(["framework/util/a", "framework/views/b"], function(A, B) {
  var a = new A();
  // etc...
}); 
```

但这种方法似乎存在两个问题。

1.  取决于`framework/util/a`不告诉 require.js 它需要加载`framework.js`它会找到的位置`util/a`
2.  优化工具为包含在其中的所有模块生成名称，`framework.js`即使`define("util/a", function() { ... } );` 加载了 require.js `framework.js`，也没有任何东西告诉它定义的模块`util/a`是相对模块，`framework`因此被标识为`framework/util/a`

我是否遗漏了什么或者是将我的框架构建为**CommonJS 包**并使用 require.js 的`packages`配置选项的更好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T15:02:35.583

Re: 1\. 似乎 r.js 优化确实不是为了优化部分依赖树而设计的，因为延迟加载取决于文件路径。例如，要求`path/to/module`实际加载`path/to`似乎是一种 hack。一种解决方案是放弃延迟加载并包含`framework-built.js`在您的应用程序代码之上。

回复：2。所以你现在需要你`framework-built.js`的完整路径。一种方法是构建一个需要所有内容的虚拟父级`framework`，例如`dummy-framework.js`。这样，您`dummy-framework-built.js`将拥有完整的路径定义`framework`，如果不是延迟加载，它应该可以正常工作。

免责声明：尽管这是我的最大努力，但我并没有过多地使用 require.js :)

# html - 表格列中的 IE7 浮动布局问题

> ID：11438096
> 
> 赞同：0
> 
> 时间：2012-07-11T17:26:11.953
> 
> 标签：html, internet-explorer-7, css-float

我可以使用 IE7 专家的一些帮助来解决渲染问题；我的布局在除 IE7 之外的所有浏览器上都运行良好，我无法完全弄清楚让它工作的神奇风格。

问题的 JSFiddle 示例在这里：http: [//jsfiddle.net/rB29C/2/](http://jsfiddle.net/rB29C/2/)

如果您在 IE7 中查看它，链接（酒杯图像）会被下推到复选框下方的第二行。我的目标是让他们在同一行。如果您在 IE8+ 或任何其他浏览器中查看小提琴，它会按预期工作。

我认为它与浮动元素的宽度有关，但我无法弄清楚魔术样式组合来解决这个问题。我的应用程序中确实有条件样式表，因此我可以使用 IE7 特定样式，但我更愿意尽可能避免基于标记的更改。

我也很想了解发生了什么——所以我希望将来能学会避免这种情况:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:26:47.083

我能够为我的问题找到解决方案；我已经用新样式更新了 JSFiddle：

[http://jsfiddle.net/rB29C/13/](http://jsfiddle.net/rB29C/13/)

总而言之，我从原始小提琴中设置了以下附加样式，现在 IE 似乎可以正确布局和调整大小（包括包含 td）：

```
input.checkbox {
    display: inline;
    float: left;
}

a.link {
    display: inline;
    float: left;
    clear: right;
    margin: 0;
} 
```

希望这对那些正在为 IE7 的古怪问题苦苦挣扎的人有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T20:56:40.267

当单元格的宽度太小时，IE7 似乎会将单元格中的项目推到底部。我将 td.type 的宽度增加到 14%，它似乎在小提琴中工作，但如果你的桌子需要缩小和扩大，这可能不是最好的解决方案（如果桌子被压扁，酒杯会再次下降到底部）。否则，您可以考虑使用设置的像素宽度而不是 %

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T20:18:58.050

我已经弄清楚了，解决方案不在 CSS 中，而是在 HTML 中。只需在不同的单元格之间移动酒杯图片，如下所示：

```
<table>
<tbody>
    <tr>
        <td class="type">
            <input class="checkbox" type='checkbox' />
        </td> 
            <a class="link" href="#"></a>
        <td class="name">Name
        </td>
        <td class="dates">Dates
        </td>
        <td class="score">Score
        </td>
    </tr>
</tbody>
</table> 
```

问题在于它只适用于 IE7 环境而不适用于其他环境。也许您可以根据页面所在的浏览器使用 php 对其进行调节。

```
<?php
$isIE7 = (get_broswer('broswer') == 'IE' && get_browser('version') < 8 )
?>
<table>
<tbody>
    <tr>
        <td class="type">
            <input class="checkbox" type='checkbox' />
        <?php if ($isIE7) echo('</td> 
            <a class="link" href="#"></a>');
           else echo('
            <a class="link" href="#"></a>
        </td> ');?>
        <td class="name">Name
        </td>
        <td class="dates">Dates
        </td>
        <td class="score">Score
        </td>
    </tr>
</tbody>
</table> 
```

我不确定您是否要避免使用 php，但如果您这样做，我也可以为您制作一个 JavaScript 版本。

# dynamics-crm - MSCRM 2011 SiteMinder ADFS

> ID：11438098
> 
> 赞同：0
> 
> 时间：2012-07-11T17:26:13.420
> 
> 标签：dynamics-crm, dynamics-crm-2011, adfs2.0, siteminder

我是 MSCRM 的新手，试图采用其安全模型并与我们现有的应用程序集成。需要对 MSCRM 系统与我们现有应用程序之间的集成有一个清晰的了解。

我们当前的应用程序是使用 SiteMinder 进行身份验证，业务需要是从该应用程序集成 MSCRM，而无需再次登录挑战。在通过基于声明的身份验证、ADFS 2.0、带有 SiteMinder 文档的 ADFS、一些基本问题之后，

--> 如果与 ADFS SiteMinder 联合，MSCRM 可以工作吗？

--> 如果是这样，用户设置将如何在 MSCRM 中工作？

任何机构都可以完成这些 MSCRM-ADFS-SiteMinder 集成吗？我可以找到不相交的文档 ADFS - Siteminder、MSCRM - ADFS，但不确定依赖应用程序 (MSCRM) 是否可以与 SiteMinder 令牌一起使用。

任何建议都表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:13:57.563

最大的问题是您的 Siteminder 是否提供了 SAML 默认值。

设置类似于 ADFS 2.0 在 CRM 服务器上安装来自 siteminder 的证书，以使他能够证明令牌并告诉 CRM 它可以从 siteminder 下载联邦元数据文件的位置。

# cloud-foundry - 将默认 Play 2.0 java 应用程序部署到 cloudfoundry 时出现 502 错误

> ID：11438104
> 
> 赞同：1
> 
> 时间：2012-07-11T17:26:30.407
> 
> 标签：cloud-foundry

我无法让我的游戏应用程序在 cloudfoundry.com 上运行。我尝试使用 Play 2.0.2 生成的最简单的 java 应用程序。当我访问 mysampleplay.cloudfoundry.com 时，我收到 nginx 错误：502 Bad Gateway。

我没有报告崩溃，并且 vcm 日志显示我的服务正在运行。有什么建议么？

这些是我输入的说明：

```
C:\javadev\prj\play>play new sample
       _            _
 _ __ | | __ _ _  _| |
| '_ \| |/ _' | || |_|
|  __/|_|\____|\__ (_)
|_|            |__/

play! 2.0.2, http://www.playframework.org

The new application will be created in C:\javadev\prj\play\sample

    What is the application name?
> sample

Which template do you want to use for this new application?

  1 - Create a simple Scala application
  2 - Create a simple Java application
  3 - Create an empty project

> 2

OK, application sample is created.

Have fun!

C:\javadev\prj\play>cd sample

C:\javadev\prj\play\sample>ls
README   app      conf     project  public

C:\javadev\prj\play\sample>play clean dist
[info] Loading project definition from C:\javadev\prj\play\sample\project
[info] Set current project to sample (in build file:/C:/javadev/prj/play/sample/
)
[success] Total time: 0 s, completed 11-jul-2012 19:05:55
[info] Updating {file:/C:/javadev/prj/play/sample/}sample...
[info] Resolving org.hibernate.javax.persistence#hibernate-jpa-2.0-api;1.0.1.Fin

[info] Done updating.
[info] Compiling 4 Scala sources and 2 Java sources to C:\javadev\prj\play\sample\target\scala-2.9.1\classes...
[info] Packaging C:\javadev\prj\play\sample\target\scala-2.9.1\sample_2.9.1-1.0-
SNAPSHOT.jar ...
[info] Done packaging.

Your application is ready in C:\javadev\prj\play\sample\dist\sample-1.0-SNAPSHOT
.zip

[success] Total time: 5 s, completed 11-jul-2012 19:06:00

C:\javadev\prj\play\sample>vmc push --path=dist\sample-1.0-SNAPSHOT.zip
Application Name: mysampleplay
    Detected a Play Framework Application, is this correct? [Yn]: y
Application Deployed URL [mysampleplay.cloudfoundry.com]:
Memory reservation (128M, 256M, 512M, 1G, 2G) [256M]:
How many instances? [1]: 1
Bind existing services to 'mysampleplay'? [yN]: n
Create services to bind to 'mysampleplay'? [yN]: n
Would you like to save this configuration? [yN]: y
Manifest written to manifest.yml.
Creating Application: OK
Uploading Application:
  Checking for available resources: OK
  Processing resources: OK
  Packing application: OK
  Uploading (66K): OK
Push Status: OK

Staging Application 'mysampleplay': OK

Starting Application 'mysampleplay': OK

C:\javadev\prj\play\sample>vmc logs mysampleplay
====> /logs/stdout.log <====

No database found in Play configuration.  Skipping auto-reconfiguration.
Play server process ID is 31827
[←[33mwarn←[0m] play - Plugin [org.cloudfoundry.reconfiguration.play.JPAPlugin]
is disabled
[←[37minfo←[0m] play - Application started (Prod)
[←[37minfo←[0m] play - Listening for HTTP on port 24712... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:11:36.793

我们与 Cloudfoundry 支持一起找到了原因。我的类是用 Java 7u5 编译的，所以你必须明确指定运行时

vmc push --path=dist/application.zip --runtime java7

# winapi - 键盘的 SendInput() - 仅小写

> ID：11438110
> 
> 赞同：7
> 
> 时间：2012-07-11T17:26:44.847
> 
> 标签：winapi, keyboard, sendinput

我有以下代码：

```
INPUT Input = { 0 };
Input.type       = INPUT_KEYBOARD;
Input.mi.dwFlags = KEYEVENTF_EXTENDEDKEY;
Input.ki.wVk   = 'A'; // tried 0x41, ( UCHAR )VkKeyScan( 'A' )
SendInput( 1, &Input, sizeof( INPUT ) ); 
```

但它只为我生成'a'。如何强制它也生成大写字母？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T17:29:45.840

编辑：根据评论中的rodrigo回答进行一些修改。

```
INPUT Input = { 0 };
// shift key down
Input.type       = INPUT_KEYBOARD;
Input.ki.wVk   = VK_LSHIFT; 
SendInput( 1, &Input, sizeof( INPUT ) );

// 'a' key down
Input.type       = INPUT_KEYBOARD;
Input.ki.wVk   = 'A';
SendInput( 1, &Input, sizeof( INPUT ) );

// 'a' key release
Input.type       = INPUT_KEYBOARD;
Input.ki.dwFlags = KEYEVENTF_KEYUP;
Input.ki.wVk   = 'A';
SendInput( 1, &Input, sizeof( INPUT ) );

// shift key release
Input.type       = INPUT_KEYBOARD;
Input.ki.dwFlags = KEYEVENTF_KEYUP;
Input.ki.wVk   = VK_LSHIFT; 
SendInput( 1, &Input, sizeof( INPUT ) ); 
```

编辑：这是另一个代码，其中包含发送信件后关闭大写/移位的示例：

```
INPUT Event = { 0 };

const SHORT key = VkKeyScan('a');
const UINT mappedKey = MapVirtualKey( LOBYTE( key ), 0 );

// Press shift key
Event.type = INPUT_KEYBOARD;
Event.ki.dwFlags = KEYEVENTF_SCANCODE;
Event.ki.wScan = MapVirtualKey( VK_LSHIFT, 0 );
SendInput( 1, &Event, sizeof( Event ) );

// upper case 'A'
Event.type = INPUT_KEYBOARD;
Event.ki.dwFlags = KEYEVENTF_SCANCODE;
Event.ki.wScan = mappedKey;
SendInput( 1, &Event, sizeof( Event ) );

// release upper case 'A'
Event.type = INPUT_KEYBOARD;
Event.ki.dwFlags = KEYEVENTF_SCANCODE | KEYEVENTF_KEYUP;
Event.ki.wScan = mappedKey;
SendInput( 1, &Event, sizeof( Event ) );

// Release shift key
Event.type = INPUT_KEYBOARD;
Event.ki.dwFlags = KEYEVENTF_SCANCODE | KEYEVENTF_KEYUP;
Event.ki.wScan = MapVirtualKey( VK_LSHIFT, 0 );
SendInput( 1, &Event, sizeof( Event ) );

const SHORT key1 = VkKeyScan('A');
const UINT mappedKey1 = MapVirtualKey( LOBYTE( key1 ), 0 );

// lower case 'a'
Event.type = INPUT_KEYBOARD;
Event.ki.dwFlags = KEYEVENTF_SCANCODE;
Event.ki.wScan = mappedKey1;
SendInput( 1, &Event, sizeof( Event ) );

// release lower case 'a'
Event.type = INPUT_KEYBOARD;
Event.ki.dwFlags = KEYEVENTF_SCANCODE | KEYEVENTF_KEYUP;
Event.ki.wScan = mappedKey1;
SendInput( 1, &Event, sizeof( Event ) ); 
```

这里的解释（我希望解释是正确的）：[SendInput() for keyboard - 只有大写](https://stackoverflow.com/questions/11438677/sendinput-for-keyboard-only-uppercase/11439873#11439873)

# ios - 将 NSString 转换为货币格式

> ID：11438111
> 
> 赞同：4
> 
> 时间：2012-07-11T17:26:47.100
> 
> 标签：ios

在 Java 中，我们执行此语句以具有 $ 货币格式。

```
 double num1 = 3.99 ;       
    double num2 = 1.00 ;       
    double total = num1 + num2;

    System.out.printf ("Total: $ %.2f", total); 
```

结果是：

总计：4.99 美元

//--------------------------------

现在在 iOS 中，如果我有以下语句，我如何获得相同的格式：

```
total.text = [NSString stringWithFormat:@"$ %d",([self.coursePriceLabel.text intValue])+([self.courseEPPLabel.text intValue])+10]; 
```

注意：
如果我使用 doubleValue 输出总是 0 。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T17:50:18.393

你可以用 NSString 做同样的事情：

```
NSString *someString = [NSString stringWithFormat:@"$%.2lf", total]; 
```

请注意，格式说明符是“%lf”，而不仅仅是“%f”。

但这仅适用于美元。如果你想让你的代码更本地化，正确的做法是使用[数字格式化程序](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html)：

```
NSNumber *someNumber = [NSNumber numberWithDouble:total];

NSNumberFormatter *nf = [[NSNumberFormatter alloc] init];
[nf setNumberStyle:NSNumberFormatterCurrencyStyle];
NSString *someString = [nf stringFromNumber:someNumber]; 
```

当然，用欧元符号或类似符号显示以美元计算的值是行不通的，因此您要么希望以用户的货币进行所有计算，要么在显示之前转换为用户的货币. 您可能会发现[NSValueTransformer 对此](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSValueTransformer_Class/Reference/Reference.html)很有帮助。

# android - 查询arrayadapter

> ID：11438113
> 
> 赞同：0
> 
> 时间：2012-07-11T17:27:01.287
> 
> 标签：android

```
ArrayAdapter<String> arrayadapter=new 

ArrayAdapter<string>(Sipnner_apActivity.this,android.R.layout.simple_spinner_item,arrarylist); 
```

这里是什么意思，`android.R.layout.simple_spinner_item`为什么`Arrayadapter`类属于`widget`类&为什么不属于“util”类。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:44:38.903

R代表“资源”。Android 在 android.R.* 命名空间中内置了资源，而您的应用程序在 your_app_namespace.R.* 命名空间中有资源。

您应该使用资源的原因有很多，但其中一个是支持多种语言和屏幕尺寸。

例如，对于一个活动，您可能有一个名为“helloworld.xml”的布局。Eclipse 将为 your_app_namespace.R.layout.helloworld 生成一个常量值。

这个 helloworld.xml 布局文件将在您的 res/layout 文件夹中。但是，如果您希望 helloworld.xml 在应用程序安装在平板电脑上时看起来有所不同，您可以将 helloworld.xml 的另一个副本放在名为 layout-large 的文件夹中。它将自动选择要使用的 helloworld.xml。

要回答您的问题，**android.R.layout.simple_spinner_item**是 android 默认具有的布局。如果您只需要一些简单的东西，您就不必为微调器项目创建自己的布局。

ArrayAdapter 不是 util 命名空间的一部分，因为它主要用于小部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:45:16.687

这就是 android.R.layout.simple_spinner_item 的样子：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
/* //device/apps/common/assets/res/any/layout/simple_spinner_item.xml
**
** Copyright 2006, The Android Open Source Project
**
** Licensed under the Apache License, Version 2.0 (the "License"); 
** you may not use this file except in compliance with the License. 
** You may obtain a copy of the License at 
**
**     http://www.apache.org/licenses/LICENSE-2.0 
**
** Unless required by applicable law or agreed to in writing, software 
** distributed under the License is distributed on an "AS IS" BASIS, 
** WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. 
** See the License for the specific language governing permissions and 
** limitations under the License.
*/
-->
<TextView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@android:id/text1"
    style="?android:attr/spinnerItemStyle"
    android:singleLine="true"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ellipsize="marquee" /> 
```

它基本上是一个模板，正是一个 TextView 小部件，您的数组列表元素将绑定到它。

通常，适配器是 android ui 工具包中数据源和 UI 组件之间的接口，适配器用于将数据提供给 ui 工具包。

# wpf - WPF MaskedTextBox 值绑定（无掩码绑定）

> ID：11438116
> 
> 赞同：6
> 
> 时间：2012-07-11T17:27:09.613
> 
> 标签：wpf, binding, wpftoolkit, maskedtextbox

这是我的[WPF 扩展工具包中的蒙版文本框](http://wpftoolkit.codeplex.com/wikipage?title=MaskedTextBox&referringTitle=Home)

```
<xctk:MaskedTextBox Mask="(000) 000-0000" Value="{Binding Number, UpdateSourceTrigger=PropertyChanged}" /> 
```

返回属性的绑定包括掩码。比如我输入9991114444时，`Number`属性设置为(999) 111-4444。但是，我需要的只是没有掩码的值（9991114444）。我可以使用 MaskedTextBox 来实现吗？

number 属性是基本的字符串属性：

```
public string Number { get; set; } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T17:31:29.553

我相信你可以添加

```
IncludeLiterals="False" 
```

# backbone.js - 模型添加时向 itemView 添加类

> ID：11438122
> 
> 赞同：0
> 
> 时间：2012-07-11T17:27:26.403
> 
> 标签：backbone.js, marionette

我将 Backbone & Marionette 用于我的 web 应用程序，

我有一组曲目，当添加曲目并且播放器未读取任何曲目时，我想将“已播放”样式放入 itemView，或“暂停”到添加到提示中的曲目。

所以我想为每个新的 Backbone 模型添加一个类。

当我添加一个模型时，该类被添加到前一个元素中，但不是最新的。这是我的 CompositeView ：

```
var trackListYTView = Marionette.CompositeView.extend({
template: "#playlist",
id: "trackList",
itemView: trackView,
itemViewContainer: "tbody",
initialize: function(){
     this.bindTo(this.collection, "add", this.modelAdded);
},
modelAdded: function(model){
     if(status) this.$('#status').addClass('icon-pause');
     else this.$('#status').addClass('icon-play');
} 
```

我认为“this”不是新 itemView 的好选择器。

感谢您的帮助，卢卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T00:49:48.510

我认为你的问题是选择器 - #status。**元素 id 应该是唯一的**。您不应该有多个具有相同 ID 的元素。使用类选择器，例如“.statusClass”，而不是“#status”。

# java - 如何模拟 shirosession？

> ID：11438123
> 
> 赞同：1
> 
> 时间：2012-07-11T17:27:26.923
> 
> 标签：java, unit-testing, junit, easymock, shiro

在我的项目中，shiro 会话用于对用户进行身份验证。我将为服务调用编写一个模拟测试。即
**object.setCreatedBy(SecurityUtils.getSubject().getPrincipal().toString()**
) 在 CreatedBy 字段 中设置登录用户（例如*sandy*）。现在我想从 testCase 填充这个值（使用 Junit 4.0 和 easy 3.0）。我正在使用以下代码

```
public class ExampleShiroUnitTest extends AbstractShiroTest {

@Test
public void testSimple() {
    //1\.  Create a mock authenticated Subject instance for the test to run:
    Subject subjectUnderTest = createNiceMock(Subject.class);
    expect(subjectUnderTest.isAuthenticated()).andReturn(true);

    //2\. Bind the subject to the current thread:
    setSubject(subjectUnderTest);
}

@After
public void tearDownSubject() {
    //3\. Unbind the subject from the current thread:
    clearSubject();
} 
```

}

在 [http://shiro.apache.org/testing.html](http://shiro.apache.org/testing.html)给出。在上述方法中，主题设置正确并在获取时给出了正确的值，但不知道如何从中获取 **本金**。当我从主题访问它时，它返回 null 并且没有 setPrincipal() 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:21:31.393

我可能误解了你的问题，但这样的事情不能解决问题吗？

```
expect(subjectUnderTest.getPrincipal()).andReturn("sandy"); 
```

# ruby - ShopifyAPI Gem：Order.to_json 的 discount_codes 属性的奇怪格式

> ID：11438125
> 
> 赞同：0
> 
> 时间：2012-07-11T17:27:32.103
> 
> 标签：ruby, shopify

我正在使用如下代码检索给定商店的所有订单：

```
orders = ShopifyAPI::Order.find(:all, :params => {:financial_status => 'paid'})
orders.each do |order|
  order_json = order.to_json
  post_json_to_server(order_json)
end 
```

但是由于某种原因，当我检查由 创建的 JSON 时`order.to_json`，`discount_codes`and`client_details`属性看起来像这样：

```
"client_details":{"":{"accept_language":"en-US,en;q=0.8","browser_ip":"199.185.98.174","session_hash":"6b37d22ebcdf097f5ab4e1c9e596a504c4cdc4c41c4f2b29a3a7aae4ead559c3","user_agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11"}}

"discount_codes":[{"":{"amount":"20.00","code":"CZV57KSE8VMV"}}] 
```

为什么`{"":`这两个列表中都有前导？我的测试商店中是否配置错误？

这是我发送的 JSON的完整转储（使用[RequestBin捕获）：](http://requestb.in/)

```
{ "billing_address" : { "address1" : "asdf",
      "address2" : "",
      "city" : "asdf",
      "company" : "",
      "country" : "United States",
      "country_code" : "US",
      "first_name" : "asdf",
      "last_name" : "asdf",
      "latitude" : "45.176384",
      "longitude" : "-123.045601",
      "name" : "asdf asdf",
      "phone" : "",
      "province" : "Alaska",
      "province_code" : "AK",
      "zip" : "asdf"
    },
  "browser_ip" : "199.185.98.174",
  "buyer_accepts_marketing" : true,
  "cancel_reason" : null,
  "cancelled_at" : null,
  "cart_token" : "bbf42c99f456f9ccda30554022fec659",
  "client_details" : { "" : { "accept_language" : "en-US,en;q=0.8",
          "browser_ip" : "199.185.98.174",
          "session_hash" : "6b37d22ebcdf097f5ab4e1c9e596a504c4cdc4c41c4f2b29a3a7aae4ead559c3",
          "user_agent" : "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11"
        } },
  "closed_at" : null,
  "created_at" : "2012-07-10T17:23:53-04:00",
  "currency" : "CAD",
  "customer" : { "accepts_marketing" : true,
      "created_at" : "2012-07-10T17:23:53-04:00",
      "email" : "asdf@example.com",
      "first_name" : "asdf",
      "id" : 94366870,
      "last_name" : "asdf",
      "last_order_id" : null,
      "last_order_name" : null,
      "note" : null,
      "orders_count" : 0,
      "state" : "disabled",
      "tags" : "",
      "total_spent" : "0.00",
      "updated_at" : "2012-07-10T17:35:23-04:00"
    },
  "discount_codes" : [ { "" : { "amount" : "20.00",
            "code" : "CZV57KSE8VMV"
          } } ],
  "email" : "asdf@example.com",
  "financial_status" : "authorized",
  "fulfillment_status" : null,
  "fulfillments" : [  ],
  "gateway" : "bogus",
  "id" : 134753494,
  "landing_site" : "/",
  "landing_site_ref" : null,
  "line_items" : [ { "fulfillment_service" : "manual",
        "fulfillment_status" : null,
        "grams" : 0,
        "id" : 219421970,
        "name" : "Grass-roots methodical instruction set",
        "price" : "19.00",
        "product_id" : 95843140,
        "quantity" : 2,
        "requires_shipping" : true,
        "sku" : "",
        "title" : "Grass-roots methodical instruction set",
        "variant_id" : 224399478,
        "variant_inventory_management" : null,
        "variant_title" : null,
        "vendor" : "Shopify"
      } ],
  "name" : "#1004",
  "note" : "",
  "note_attributes" : [  ],
  "number" : 4,
  "order_number" : 1004,
  "payment_details" : { "avs_result_code" : null,
      "credit_card_bin" : "1",
      "credit_card_company" : "Bogus",
      "credit_card_number" : "XXXX-XXXX-XXXX-1",
      "cvv_result_code" : null
    },
  "processing_method" : "direct",
  "referring_site" : "",
  "shipping_address" : { "address1" : "asdf",
      "address2" : "",
      "city" : "asdf",
      "company" : "",
      "country" : "United States",
      "country_code" : "US",
      "first_name" : "asdf",
      "last_name" : "asdf",
      "latitude" : "45.176384",
      "longitude" : "-123.045601",
      "name" : "asdf asdf",
      "phone" : "",
      "province" : "Alaska",
      "province_code" : "AK",
      "zip" : "asdf"
    },
  "shipping_lines" : [ { "code" : "International Shipping",
        "price" : "20.00",
        "source" : "shopify",
        "title" : "International Shipping"
      } ],
  "subtotal_price" : "18.00",
  "tax_lines" : [  ],
  "taxes_included" : false,
  "token" : "51116b93d2d774b6c537a3bcc8861506",
  "total_discounts" : "20.00",
  "total_line_items_price" : "38.00",
  "total_price" : "38.00",
  "total_price_usd" : "37.28",
  "total_tax" : "0.00",
  "total_weight" : 0,
  "updated_at" : "2012-07-10T17:35:20-04:00"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:52:43.170

为了让 Order 的格式与 webhook 发送的 JSON 格式相同，我最终自己做了 - 这是代码：

```
ActiveResource::Base.include_root_in_json = true

orders = ShopifyAPI::Order.find(:all, :params => {:financial_status => 'paid'})

orders.each do |order|
  order_json = order.as_json
  %w(billing_address customer line_items payment_details shipping_address shipping_lines).each do |attribute|
    order_json[attribute] = order.send(attribute).as_json
  end

  if order_json['discount_codes'].length > 0
    order_json['discount_codes'] = [order_json['discount_codes'].as_json[0][nil]]
  end

  order_json['client_details'] = order_json['client_details'].as_json[nil]

  post_json_to_server(order_json)
end 
```

通过这种方式，我能够将 JSON 转换为完全映射到 Shopify 的订单付费 webhook 发送的内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-11T18:35:39.310

当您使用**to_json**而不告诉 ActiveRecord 如何处理**根**时，它可以做到这一点。

您可以告诉 ActiveRecord 在呈现 JSON 时包含根。

```
ActiveRecord::Base.include_root_in_json = true 
```

然后你会看到

```
{"order":{...}} and not {"":{...}} 
```

通常你可以只使用语法

```
order_json = order.to_json(:root => true) 
```

为了得到你想要的密钥（这是根）。使用 JSON 仍然有点像在孩子们的狂欢节中行走......

# javascript-events - 通过javascript动态创建输入元素

> ID：11438129
> 
> 赞同：2
> 
> 时间：2012-07-11T17:27:47.007
> 
> 标签：javascript-events

我已经编写了代码来动态创建文本文件。它应该根据我填写表格文本的数字创建元素。但它只创建一个文件。如果将 5 放入 form.what 是什么问题，它应该创建 5 个文本文件。这是代码：

```
<SCRIPT LANGUAGE="JavaScript">
<!--Hide from old browsers
function createtext(){
var i=0;
var len1=document.getElementById('s');
var len2=len1.value;
for(i;i<len2;i++)
{
var el= new Array();;
el[i]=document.createElement('input');
el[i].type='text';
el[i].name='text'+i;
el[i].size = 10;
document.f1.appendChild(el[i]);
var mybr=document.createElement('<br>');
document.appendChild(mybr);
}
}
</SCRIPT>
</HEAD>
<BODY >
<form action="" method="get" name="f1">
<input type="text" id="s" name="s" value="" onChange="createtext()" >
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:46:23.090

```
var mybr=document.createElement('<br>');    
document.appendChild(mybr); 
```

应该

```
var mybr=document.createElement('br');    
document.f1.appendChild(mybr); 
```

# perl - 我试图从 Perl 哈希中获取数据的方式有什么问题？

> ID：11438130
> 
> 赞同：1
> 
> 时间：2012-07-11T17:27:51.673
> 
> 标签：perl

这可能是一个简单的问题，但我无法弄清楚。我有一个从例程返回的结构，当我使用 Data::Dumper 打印时，它看起来像

```
$VAR1 = {
  'date' => 'May 15, 2012',
  'value' => '0.20'
}; 
```

但我无法从中获取数据。如果我尝试`$data{value}`，我什么也得不到。我对 Perl 不是很熟悉。谁能帮我？我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T17:37:35.347

你`$VAR1`是一个哈希引用，而不仅仅是一个哈希。因此，您需要取消引用变量以获取数据：

```
$VAR1->{date}
$VAR1->{value} 
```

这是 Perl，所以 TMTOWTDI（有不止一种方法可以做到）：

```
$$VAR1{date}
$$VAR1{value} 
```

但是，显式`->`箭头运算符通常更容易理解；左边的操作数是一个引用，右边的位访问它（`$hash->[0]`对于数组引用；`$hash->{item}`对于哈希引用）。

您可以改用：

```
my %VAR2 = ('date' => 'May 15, 2012', 'value' => '0.20'); 
```

现在你可以写：

```
$VAR2{date}
$VAR2{value} 
```

（我可以同时使用`%VAR1`和`$VAR1`；它们是不同的变量——但这更加令人困惑。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:31:08.923

这取决于您的子程序是如何编写的。我猜它正在返回对哈希的*引用*，在这种情况下，您的代码应该如下所示：

```
my $data = my_subroutine();
print $data->{value}, "\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:33:41.203

问题是您不尊重变量的类型。Perl 支持用`%`sigil 表示的散列，以及使用`$`. 第二个是标量，必须取消引用才能获取数据。使用 perl 的调试器：

```
DB<1> $VAR1 = { 'date' => 'May 15, 2012', 'value' => '0.20' };

DB<2> x $VAR1->{'date'}
0  'May 15, 2012'
DB<3> x $VAR1->{'value'}
0  0.20 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T17:41:52.683

```
#!/bin/perl
$VAR1 = { 'date' => 'May 15, 2012', 'value' => '0.20' };
$date = $$VAR1{date};
$value = $$VAR1{value};
print "$date\n";
print "$value\n" 
```

打印出来：

```
May 15, 2012
0.20 
```

原因是 $VAR1 是对匿名哈希的引用。

# javascript - 如何正确“喜欢”我的 OpenGraph 对象？

> ID：11438137
> 
> 赞同：0
> 
> 时间：2012-07-11T17:28:14.973
> 
> 标签：javascript, facebook-graph-api, facebook-like, facebook-opengraph

还有更多 OpenGraph 新手主义：

我在我的网站上定义了一个页面，其中包含适合“视频”的全套元标记。这是一个标准的OG视频；没有定制的东西。一切都很好; 页面成功通过了对象 linter，并被识别为 video:movie。该页面还包含一个以“通常”方式创建的 Like 按钮——一个带有一组参数的类“fb-like”的 div，以及一些激活的 javascript。

用户 Joe 进入该页面并单击 Like 按钮；发生以下情况：

*   出现“喜欢”叠加框，显示有关页面/对象的信息、评论的文本字段和发布按钮。
*   按钮上的 Like 计数器增加。
*   但是随后，该框立即消失，没有被点击，也没有任何输入。（从来没有真正的机会这样做。）
*   Like 增量丢失；它可以恢复到以前的状态。
*   Joe 的 Facebook 个人资料页面包含一个条目“Joe 喜欢一个链接”，正确描述了页面/对象，包括在个人资料页面上播放视频的能力。
*   尽管喜欢在 Joe 的活动日志中标记为“公开”，但 Joe 的朋友没有收到任何有关此喜欢的通知。

现在，我在我的网站上定义了另一个几乎相同的页面，但它只有基本类型的元标记，足以将其识别为 OG“网站”。再一次，linter 很高兴。Joe 现在转到此页面并单击 Like 按钮。这一次，行为是正确的，或者至少是我所期望的：

*   Like 计数器递增。
*   覆盖框出现并一直等待乔输入内容。他这样做了，然后单击“发布”按钮。
*   Like 计数器保留其新增加的按钮。
*   Joe 的 FB 个人资料页面包含一个条目，其中包含他的姓名、他在“喜欢”框中输入的评论以及页面/对象的描述。这不能作为视频播放，因为 OG 不知道它是视频。请注意，顺便说一句，该条目仅由乔的名字组成，而不是像其他情况那样由“乔喜欢链接”组成。
*   Joe 的朋友在他们的提要中获得了一个条目——与 Joe 的个人资料页面上显示的内容相同。

我对这种行为感到非常困惑——出于各种原因，我希望将页面表示为 OG 视频，但“喜欢”行为不起作用。有没有人见过类似的东西？有什么建议吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:19:31.330

这听起来像是一个错误，也许您应该在[https://developers.facebook.com/bugs/create的错误跟踪工具中输入它](https://developers.facebook.com/bugs/create)

# sql-server - 按字段值隐藏矩阵中的数据行

> ID：11438146
> 
> 赞同：1
> 
> 时间：2012-07-11T17:29:00.880
> 
> 标签：sql-server

我需要知道如何编码。我正在处理程序编号，并且有一个我不想显示。我在尝试：

```
=Fields!NoProg.Value="08007" 
```

但后来我不知道该怎么说：

```
(pseudocode)
if NoProg = 08007, then do not display. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:40:58.690

在我看来，您有两个选择：

1.  在数据库端的结果数据集中过滤掉不需要的行。如果您设置了索引，这具有使用索引的优势。这涉及将一个`WHERE`子句放入您的查询中。如果您无法更改查询或需要该行位于结果数据集中而只是隐藏，请选择此选项。

    ```
    SELECT ...
    FROM ...
    WHERE NoProg <> '08007' 
    ```

2.  正如您已经在做的那样，隐藏报告中的行。这具有将数据保留在结果数据集中但将其隐藏在报告的该部分中的优点。如果您正在执行聚合并需要在其他位置包含该行但只是从视图中隐藏详细信息，请选择此选项。请记住，这不会使用任何数据库索引，因此需要对结果数据集中的每一行进行一次比较。

    ```
    <Hidden>=Fields!NoProg.Value="08007"</Hidden> 
    ```

# iphone - 如何访问在数据输入屏幕上看不到的 UITableViewCell 以验证内容？

> ID：11438147
> 
> 赞同：0
> 
> 时间：2012-07-11T17:29:06.367
> 
> 标签：iphone, objective-c, uitableview

我有一个 UITableView，其中包含总高度约为 2 个屏幕高的数据输入字段。在字段中输入数据后，用户点击 UINavigationBar 中的保存按钮，然后验证所有字段的内容。

如果字段 #1（最顶部）由于用户滚动到表格底部而不在视野范围内，则无法访问包含 UITextField 和值的 UITableViewCell。尝试使用 cellForRowAtIndexPath 访问单元格/字段返回 nil。

访问所有字段以验证字段内容的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:31:49.630

最好的方法是存储在字段中输入的所有数据，然后在需要时查询模型以获取数据，而不是依赖于视图中存储的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:31:48.910

你有几个选择

1.  我做什么 - 将字段中的文本存储在其他地方，然后使用它
2.  始终将所有单元格存储在内存中，以免它们被重复使用
3.  进行验证时，暂时使您的表格足够大以容纳所有单元格

请注意，您可以在不可见更改的情况下执行第 3 项。

# html - 将 @font-face 与嵌入在当前 HTML 页面中的 SVG 字体一起使用

> ID：11438150
> 
> 赞同：7
> 
> 时间：2012-07-11T17:29:15.697
> 
> 标签：html, css, svg, webfonts

我有一个要分发的独立 HTML 文档，没有任何外部依赖项。我在本文档中使用了一种非标准字体，只有我的一些用户会安装它。

对于那些没有安装字体的用户，我在`<body>`. （我在这个例子中使用了单字形字体，真正的文档使用的是完整的字体。）

```
<svg style="display: none;"><defs>
  <font id="MyFontElement">
    <font-face font-family="MyFont" />
    <glyph unicode="A" horiz-adv-x="950" d="M0,0L0,100L100,100L100,200L0,200L0,300L100,300L100,400L200,400L200,500L300,500L300,600L400,600L600,600L600,500L700,500L700,400L800,400L800,300L900,300L900,200L800,200L800,100L900,100L900,0L600,0L600,100L700,100L700,200L800,200L800,300L100,300L100,200L200,200L200,100L300,100L300,0L0,0M300,400L600,400L600,500L300,500L300,400Z" />    
  </font>
</defs></svg> 
```

SVG字体看起来不如普通字体好，所以我只希望在本地没有安装字体的情况下使用SVG字体。如果字体是在外部 SVG 文档中定义的，我可以使用它的优先级低于本地安装的字体，如下所示：（[小提琴](http://jsfiddle.net/jeremy/HANsP/)）

```
<style>
  @font-face {
    font-family: "My Font";
    src: local("My Font"), url("fonts.svg#MyFontElement") format("svg");
  }
</style>
<p style="font: 3em 'My Font';">
    Alphabet
</p> 
```

> ![截屏](../Images/9def8914406f63cc93552dfc9e7aab79.png)

不幸的是，当前文档中的字体似乎都没有明显的变化：（[小提琴](http://jsfiddle.net/jeremy/xX6Bv/)）

```
 src: local("My Font"),
       url("./#MyFontElement") format("svg"),
       url("./#MyFontElement"),
       url("#MyFontElement") format("svg"),
       url("#MyFontElement"); 
```

即使没有`@font-face`声明，字体已经在文档中可用`MyFont`，`font-family`在`<font-face />`. 但是，这将比名为 的本机字体具有*更高*`MyFont`的优先级，因此它不是解决方案。

我希望我可以把它称为`local("MyFont")`......（[小提琴](http://jsfiddle.net/jeremy/X78SN/)）

```
 src: local("My Font"), /* local */
       local("MyFont"); /* embedded */ 
```

...但这也不起作用。

我可以给嵌入字体一个不同的名称并以较低的优先级使用它`style="font-family: LocalFont, EmbeddedFont"`，但是我允许用户将本地文件中的片段导入到文档中，并且这些本地文件将仅通过标准名称引用字体。导入这些引用时可以重写它们，但我不喜欢这种解决方案。

如何从`@font-face`声明中引用嵌入在当前文档中的 SVG 字体？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T17:37:17.333

将字体转换为数据 URI 并将其嵌入到 CSS 声明中：（[小提琴](http://jsfiddle.net/jeremy/eCtKa/)）

```
<style>
@font-face {
  font-family: "My Font";
  src: url("data:application/octet-stream;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCIgPgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+CiAgPGZvbnQgaWQ9Ik15Rm9udEVsZW1lbnQiPgogICAgPGZvbnQtZmFjZSBmb250LWZhbWlseT0iTXlGb250IiAvPgogICAgPGdseXBoIHVuaWNvZGU9IkEiIGhvcml6LWFkdi14PSI5NTAiIGQ9Ik0wLDBMMCwxMDBMMTAwLDEwMEwxMDAsMjAwTDAsMjAwTDAsMzAwTDEwMCwzMDBMMTAwLDQwMEwyMDAsNDAwTDIwMCw1MDBMMzAwLDUwMEwzMDAsNjAwTDQwMCw2MDBMNjAwLDYwMEw2MDAsNTAwTDcwMCw1MDBMNzAwLDQwMEw4MDAsNDAwTDgwMCwzMDBMOTAwLDMwMEw5MDAsMjAwTDgwMCwyMDBMODAwLDEwMEw5MDAsMTAwTDkwMCwwTDYwMCwwTDYwMCwxMDBMNzAwLDEwMEw3MDAsMjAwTDgwMCwyMDBMODAwLDMwMEwxMDAsMzAwTDEwMCwyMDBMMjAwLDIwMEwyMDAsMTAwTDMwMCwxMDBMMzAwLDBMMCwwTTMwMCw0MDBMNjAwLDQwMEw2MDAsNTAwTDMwMCw1MDBMMzAwLDQwMFoiIC8+ICAgIAogIDwvZm9udD4KPC9kZWZzPjwvc3ZnPgo=") format("svg");
}
</style>
<p style="font: 3em 'My Font';">
    Alphabet
</p> 
```

有一个警告：您不能将 ID 说明符 ( `#MyFont`) 与这样的数据 URI 一起使用。因此，您在编码文件中只能有一个字体，而不是多个并单独引用它们。（不是你想要的；在每种字体的声明中复制多个嵌入字体的数据会浪费大量空间。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:38:37.993

首先在 css 中指定本地字体名称，然后是嵌入的字体名称：

```
p {
    font-family: MyFontLocalName, MyFontEmbeddedName;
} 
```

[http://jsfiddle.net/gilly3/xX6Bv/5/](http://jsfiddle.net/gilly3/xX6Bv/5/)

如果`MyFontLocalName`安装在用户的计算机上，将使用该字体，否则`MyFontEmbeddedName`将使用该字体。

# asp.net - 将网格视图中的选定值保存到视图状态

> ID：11438158
> 
> 赞同：0
> 
> 时间：2012-07-11T17:29:54.150
> 
> 标签：asp.net

我正在尝试捕获网格视图中的选定值并将其保存到视图状态中的变量中，我想将其作为查询字符串参数传递给不同的页面

我将在哪里保存 ViewState 变量以及如何保存？

我很新，不知道我是否提供了足够的信息

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:01:22.507

存储在 ViewState 中的值的工作方式与 session 不同。与 Session 不同，存储在一个页面的 ViewState 中的值不能从另一个页面检索。实际上 ViewState 只不过是生成的标记中系统管理的隐藏加密字段。如何在 ViewState 中保存值？像这样：

```
ViewState["MyValue"]=GrideView1.SelectedValue.ToString(); 
```

稍后您可以像这样检索该值

```
if(ViewState["MyValue"]!=null)
{
     Response.Redirect("SecondPage.aspx?param="+ViewState["MyValue"]);
} 
```

# android - Android OutputStreamWriter 不创建文件

> ID：11438160
> 
> 赞同：0
> 
> 时间：2012-07-11T17:30:07.310
> 
> 标签：android, file

我正在尝试将 EditText 字段中的数据写入文本文件。我已验证数据正在被捕获以在单击“添加”按钮后填充的 EditText 字段中输出。程序在模拟器中成功运行，但没有创建输出文件。我已将 uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" 添加到 Android Manifest xml 文件中。LogCat 和控制台不显示任何错误。在这里研究示例后，我尝试了几种不同的方法，但没有运气。谁能指出我的问题？在此先感谢您的帮助。

```
package john.BRprogram;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.WindowManager;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.Spinner;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.EditText;
//import android.graphics.Color;
import java.io.OutputStreamWriter;
import java.util.Scanner;
import java.util.List;
import java.util.ArrayList;

public class BRprogramActivity extends Activity implements OnItemSelectedListener {
  private static final String TAG = null;
//
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
 //
    Button addButton;
    Button editButton;
    Button sendButton;
//  
    Spinner array_spinner;
//      
//      activate soft Keyboard
    this.getWindow().setSoftInputMode
      (WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE); 
//
    EditText myCustomer = (EditText)findViewById(R.id.editText1);
    myCustomer.setText("");   
//
    EditText myQuantity = (EditText)findViewById(R.id.editText2);
    myQuantity.setText("");
//      
    EditText myPrice = (EditText)findViewById(R.id.editText3);
    myPrice.setText("");
//    
//      .csv comma separated values file
//        
    try {
        Scanner scanner = new Scanner(getResources().openRawResource(R.raw.brdata));  
//         
        List<String> list = new ArrayList<String>(); 
        while (scanner.hasNext()) {
        String data = (scanner.next());                  //read data record
        String [] values = data.split(",");           //parse data to fields
//      String [] values = data.split(",(?=([^\"]\"[^\"]\")[^\"]$)");
        if(values.length != 3)     
            Log.v("Example", "Malformed row: " + data); 
            else  
            list.add(values[0] + " " + values[1] + " $" + values[2]);
}
//          
        array_spinner = (Spinner)findViewById(R.id.spinner1);         
        ArrayAdapter<String> adapter = new ArrayAdapter<String>
        (this,android.R.layout.simple_spinner_item, list);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
        array_spinner.setAdapter(adapter); 
        array_spinner.setOnItemSelectedListener((OnItemSelectedListener) this);
//           
        scanner.close();
//    
}   catch (Exception e) {
        Log.e(TAG, "Exception: "+Log.getStackTraceString(e));
}
//
    addButton = (Button) findViewById(R.id.addbutton);
    addButton.setOnClickListener(new OnClickListener(){
        public void onClick(View v){
//    
// get customer number,itemnumber,quantity,price
//
    String writeCustomer = ((EditText) findViewById(R.id.editText1)).getText().toString().trim();
//  itemNumber from list selection
    String writeQuantity = ((EditText) findViewById(R.id.editText2)).getText().toString().trim();
    String writePrice = ((EditText) findViewById(R.id.editText3)).getText().toString().trim();
//
    String newRecord = writeCustomer + "," + writeQuantity + "," + writePrice; 

    EditText myString = (EditText)findViewById(R.id.editText4);
    myString.setText(newRecord);        
//          
// write seq to output file             
//              
    try {
        OutputStreamWriter out = new OutputStreamWriter(openFileOutput("broutput.txt",0));
        out.write(newRecord);   
        out.close(); 
    }catch (Exception e){
      Log.v("test", "record written");
}                       

//
            EditText myQuantity = (EditText)findViewById(R.id.editText2);
            myQuantity.setText("");
//      
            EditText myPrice = (EditText)findViewById(R.id.editText3);
            myPrice.setText("");
            Log.v("test", "ADD button clicked");
}
});
//
    editButton = (Button) findViewById(R.id.editbutton);
    editButton.setOnClickListener(new OnClickListener(){
        public void onClick(View v){
            Log.v("test", "EDIT button clicked");
}
});    
//
    sendButton = (Button) findViewById(R.id.sendbutton);
    sendButton.setOnClickListener(new OnClickListener(){
        public void onClick(View v){
//
            EditText myCustomer = (EditText)findViewById(R.id.editText1);
            myCustomer.setText("");
//
            EditText myQuantity = (EditText)findViewById(R.id.editText2);
            myQuantity.setText("");
//      
            EditText myPrice = (EditText)findViewById(R.id.editText3);
            myPrice.setText("");
            Log.v("test", "SEND button clicked");
}
});

}
//  ***  http://www.youtube.com/watch?v=Pfasw0bbe_4  ***
//
    public void onItemSelected(AdapterView<?> parent, View view, int position,
            long id) {
//  
    String selection = parent.getItemAtPosition(position).toString();
    String [] priceField = selection.split("\\$");       //parse price field
    String [] item = selection.split("_");         //parse item number 
    String itemNumber = item[0];   
//
    EditText myQuantity = (EditText)findViewById(R.id.editText2);
    myQuantity.setText("");
//      
    EditText myPrice = (EditText)findViewById(R.id.editText3);
    myPrice.setText(priceField[1]);
}
//
   public void onNothingSelected(AdapterView<?> arg0) {
//nothing here      
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:43:42.987

我实际上遇到过这样的问题；一切似乎都很好，但我的代码不起作用。我的问题是我正在编写的文件名中的字符。例如，我尝试编写文件名`my_file - date 07/11/2012`. 这会导致问题，因为它将每个都`/`视为开始新目录的提示！出于这个原因，我发现我的文件名中不能有任何`/`（或者`:`，由于某种原因）。这会是你的问题吗？

如果这是您的问题，那么您可以做我所做的：执行 a将文件名中的`newRecord.replace('/', '-');`所有内容替换为 a （如果您可以使用's 代替）。`/``-``-`

附带说明一下，为什么要在 try/catch 语句的 catch 中记录“记录写入”？如果它发现了一个问题，那不就意味着它没有被写出来吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:51:43.850

看起来您需要创建和/或指定要保存文件的目录。我在您的代码中的任何地方都没有看到。它可能看起来像这样：

```
if (Environment.getExternalStorageState() == null) {
            directory = new File(Environment.getDataDirectory()
                    + "/RobotiumTestLog/");
            photoDirectory = new File(Environment.getDataDirectory()
                    + "/Robotium-Screenshots/");
            /*
             * this checks to see if there are any previous test photo files
             * if there are any photos, they are deleted for the sake of
             * memory
             */
            if (photoDirectory.exists()) {
                File[] dirFiles = photoDirectory.listFiles();
                if (dirFiles.length != 0) {
                    for (int ii = 0; ii <= dirFiles.length; ii++) {
                        dirFiles[ii].delete();
                    }
                }
            }
            // if no directory exists, create new directory
            if (!directory.exists()) {
                directory.mkdir();
            }

            // if phone DOES have sd card
        } else if (Environment.getExternalStorageState() != null) {
            // search for directory on SD card
            directory = new File(Environment.getExternalStorageDirectory()
                    + "/RobotiumTestLog/");
            photoDirectory = new File(
                    Environment.getExternalStorageDirectory()
                            + "/Robotium-Screenshots/");
            if (photoDirectory.exists()) {
                File[] dirFiles = photoDirectory.listFiles();
                if (dirFiles.length > 0) {
                    for (int ii = 0; ii < dirFiles.length; ii++) {
                        dirFiles[ii].delete();
                    }
                    dirFiles = null;
                }
            }
            // if no directory exists, create new directory to store test
            // results
            if (!directory.exists()) {
                directory.mkdir();
            }
        } 
```

当您从您的应用程序中保存数据时，您必须记住它是在 Android 上运行的，而不是您的计算机上，因此所有数据都将写入您的 Android，而不是您的计算机。您必须在写入数据后拉取数据才能查看它。确保您在设备上创建了一个本地目录，并确保您检查了 SD 卡。我列出的代码将向您展示如何做您需要的一切。

希望这可以帮助！

# ipad - “UIButton”可以在同一个“UIView”中的“UIWebView”中打开网页吗？

> ID：11438163
> 
> 赞同：0
> 
> 时间：2012-07-11T17:30:15.553
> 
> 标签：ipad, uiview, uiwebview, uibutton, push

我一直在为 iPhone/iPad 设备开发这个项目，在完成项目的 iPhone 部分后，我受到了改变 iPad 项目风格的灵感。

我的场景：

我有一个视图，其中包含链接到网站的 UIButtons。最初我计划这些按钮使用 Push 序列打开单独的 View，其中已经有一个 UIWebView 来打开网页。但后来我想也许我可以使用 UIButtons 在父视图中打开所需的网页。

我的问题：

是否可以使用 UIButton 加载网页，但在与用于加载网页的 UIButton 位于同一视图中的 UIWebView 中？

在此先感谢大家，我认为这应该是可能的，但目前还没有想到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:32:25.907

当然是可能的（真的......为什么不呢？）。你只有一个`UIView`有一个`UIWebView`和几个`UIButton`子视图。然后你可以做这样的事情：

```
// Suppose that self.mainView is the main container (and an IBOutlet)
// and self.webView is the UIWebView (also an IBOutlet)
// and of course your UIButtons (connected to IBActions)

-(IBAction)visitSiteA:(id)sender
{
    NSString *urlAddress = @”http://www.siteA.com”;

    //Create a URL object.
    NSURL *url = [NSURL URLWithString:urlAddress];

    //URL Request Object
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

    //Load the request in the UIWebView.
    [self.webView loadRequest:requestObj];
}

-(IBAction)visitSiteB:(id)sender
{
    NSString *urlAddress = @”http://www.siteB.com”;

    //Create a URL object.
    NSURL *url = [NSURL URLWithString:urlAddress];

    //URL Request Object
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

    //Load the request in the UIWebView.
    [self.webView loadRequest:requestObj];
} 
```

现在，如果您不使用 InterfaceBuilder，您可以在代码中构建您的 webView 和按钮，然后将它们添加到您的 mainView。

最后，如果您计划有很多按钮，您可以通过将加载部分分解为一个单独的方法来优化代码，并只需从您的 IBActions 传递 url。像这样的东西：

```
-(void)loadUrlAddress:(NSString *)urlAddress
{
    //Create a URL object.
    NSURL *url = [NSURL URLWithString:urlAddress]; 

    //URL Request Object
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

    //Load the request in the UIWebView.
    [self.webView loadRequest:requestObj];
}

-(IBAction)visitSiteA:(id)sender
{
    [self loadUrlAddress:@"http://www.siteA.com"];
} 
```

# cocoa-touch - 在 Cocoa 和 Cocoa Touch 中将 CGPoint 存储在 NSArray 中的通用解决方案？

> ID：11438166
> 
> 赞同：2
> 
> 时间：2012-07-11T17:30:32.967
> 
> 标签：cocoa-touch, cocoa, nsarray, cgpoint

我有一个类，我想在 Cocoa 和 Cocoa Touch 应用程序之间共享。该类计算各种`CGPoint`s 并将它们存储在一个数组中。在 Cocoa 中有`[NSValue valueWithPoint]`. 在 Cocoa Touch 中有`[NSValue valueWithCGPoint]`.

是否有任何解决方案可以让我绕过这些特定于框架的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:03:35.667

您可以创建一个类别`NSValue`，以便将`valueWithCGPoint:`和`CGPointValue`方法添加到 Cocoa。

```
＃如果 ！TARGET_OS_IPHONE
@interface NSValue (MyCGPointAddition)
+ (NSValue *)valueWithCGPoint:(CGPoint)point;
- (CGPoint)CGPointValue;
@结尾
＃万一
```

```
＃如果 ！TARGET_OS_IPHONE
@implementation NSValue (MyCGPointAddition)
+ (NSValue *)valueWithCGPoint:(CGPoint)point {
    返回 [self valueWithPoint:NSPointFromCGPoint(point)];
}
- (CGPoint)CGPointValue {
    返回 NSPointToCGPoint([self pointValue]);
}
@结尾
＃万一
```

或者您可以使用`valueWithBytes:objCType:`and `getValue:`。

```
CGPoint 点 = {10, 10};
NSValue *value = [NSValue valueWithBytes:&point objCType:@encode(CGPoint)];
// ...
[值 getValue:&point];
```

# asp.net - 登录主页后如何获取菜单？

> ID：11438168
> 
> 赞同：1
> 
> 时间：2012-07-11T17:30:38.153
> 
> 标签：asp.net, asp.net-mvc-3, master-pages

H 创建了一个带有菜单 div 的母版页。我将索引页面作为登录页面，因此我使用了在母版页下注册的 index.aspx 中的登录控件。

现在我的问题是如何在用户登录之前隐藏母版页中的菜单 div，在用户成功登录后，菜单 div 应该出现在用户面前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:42:00.620

在您的母版页中，您可以执行以下操作：

```
if (Request.IsAuthenticated)
{
    <p>Welcome back, @User.Identity.Name!</p>
}
else 
{
    <!-- Put login form here. -->
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T04:42:00.993

我把这段代码放在我的 MasterPage

```
 <% if (HttpContext.Current.User.Identity.IsAuthenticated ) { %>

                  <div>navigation html when is authenticated</div>

               <% } else { %>

              <div>navigation html when is NOT authenticated</div>

                <% } %> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-11T17:40:27.057

在内容页面中添加@MasterType 指令。在指令中，将 VirtualPath 属性设置为母版页的位置

然后使用 Master.FindControl

```
void Page_Load()
{
// Gets a reference to a TextBox control inside 
// a ContentPlaceHolder
ContentPlaceHolder mpContentPlaceHolder;
TextBox mpTextBox;
mpContentPlaceHolder = 
  (ContentPlaceHolder)Master.FindControl("ContentPlaceHolder1");
if(mpContentPlaceHolder != null)
{
    mpTextBox = 
        (TextBox) mpContentPlaceHolder.FindControl("TextBox1");
    if(mpTextBox != null)
    {
        mpTextBox.Text = "TextBox found!";
    }
}

// Gets a reference to a Label control that not in 
// a ContentPlaceHolder
Label mpLabel = (Label) Master.FindControl("masterPageLabel");
if(mpLabel != null)
{
    Label1.Text = "Master page label = " + mpLabel.Text;
} 
```

}

[http://msdn.microsoft.com/en-us/library/xxwa0ff0.aspx](http://msdn.microsoft.com/en-us/library/xxwa0ff0.aspx)

# codeigniter - NetBeans 7.1.1 和 CodeIgniter 2.1.2 自动完成功能不起作用：/

> ID：11438169
> 
> 赞同：0
> 
> 时间：2012-07-11T17:30:41.093
> 
> 标签：codeigniter, autocomplete, codeigniter-2, netbeans-7.1

好吧，由于某种原因，我无法让 CI 自动完成功能在我的一生中在 NetBeans 上工作。例如，当我在netbeans ide 中输入时，当它指向正确的文件时，`ci_control`我得到了代码提示，它无法正确自动完成并在我单击 Enter 后留下。我已成功安装 codeIgniter，因为我可以正确运行应用程序，只是无法让自动完成功能正常工作。`CI_Controller **ci_auto_complete**.php``CI_Controller::get_instance()`

[我什至尝试按照本教程http://www.youtube.com/watch?v=MzvSA0hq3Ts](http://www.youtube.com/watch?v=MzvSA0hq3Ts)中的说明在系统 -> 核心 -> 模型和控制器文件中插入一些代码， 但无济于事。

如果有人可以帮助我，我将不胜感激！

提前致谢，

NetBeans 7.1.1 代码点火器 2.1.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T07:59:26.160

我已经为 Codeigniter 配置了 Netbeans (7.1.1)，如以下链接中所建议的那样。它为我自动完成。

[http://codeigniter.com/forums/viewthread/187949/](http://codeigniter.com/forums/viewthread/187949/)

# java - 在一个线程中实现多个线程的最有效方法是什么？

> ID：11438170
> 
> 赞同：2
> 
> 时间：2012-07-11T17:30:45.057
> 
> 标签：java, multithreading, concurrency

我在涉及线程的 Uni 作业中需要帮助。在作业中，我必须实现一个包含 4 个线程的程序，其中一个线程包含另一个线程。我在下面制作了一个图表以帮助更好地解释它：

![在此处输入图像描述](../Images/3ded407ea764dc4395dfa2e0e049e1de.png)

最好/有效的方法是什么？我的教授对线程的解释非常有限，从我目前在网上收集的信息来看，我必须实现 Runnable 接口，并从主程序的 run() 方法中创建 4 个类，这可能会结束搞得一团糟，因为我还没有完全掌握 Java 中线程的概念。如果有人可以建议我可以了解更多信息的资源，请在此处发布。

到目前为止，这是我理解的一个例子：

```
public class MainThread implements Runnable
{
/**
 * The run method from the Runnable interface that
 * executes the entire program.
 */
public void run()
{
    class Controller implements Runnable
    {
        public void run() 
        {
            class MiniWalker implements Runnable
            {
                public void run ()
                {
                }
            }
        }

    }

    class ObjectWalker implements Runnable
    {
        public void run ()
        {   
        }
    }

    class GroupWalker implements Runnable
    {
        public void run ()
        {               
        }
    }

    class YearWalker implements Runnable
    {
        public void run ()
        {           
        }
    }
}

/**
 * The heart and core of this assignment.
 */ 
public static void main(String[] args) 
{
    (new Thread(new MainThread ())).start();
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:34:40.347

线程不包含其他线程。线程可以*控制*其他线程，但这完全不同。您的控制图不必直接与您的类层次结构相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:33:36.240

我建议您阅读 Brian Goetz 的“Java Concurrency In Practice”并深入研究 java.util 下的并发类（例如 Executor）。他们会让你的生活比原始线程更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:36:07.490

开始的好地方是[http://docs.oracle.com/javase/tutorial/essential/concurrency/procthread.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/procthread.html)。它将使您对Java中的并发有基本的了解。如果不描述该线程的作用（为什么需要创建它们），就很难写出哪个选择是最佳的。

值得一提的是，您可以在不显式编码新类的情况下生成线程。

```
public static void main(String[] args) {
    new Thread(new Runnable() {
        @Override
        public void run() {

        }
    }).start();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T17:15:18.933

[Doug Lee 的Concurrent Programming](http://books.google.com/books?id=-x1S4neCSOYC&printsec=frontcover&source=gbs_ge_summary_r&cad=0#v=onepage&q&f=false)是另一个很好的资源（几乎所有这些资源在谷歌书籍上都是免费的）。[ExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)或[ForkJoinPool](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ForkJoinPool.html)也值得一看。另外，[通读javadocs](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)，它们也很不错。

可能值得尝试将您的应用程序分解为本质上是任务的内容，然后将它们放入线程池中。

# objective-c - “应用程序作为代理”中的警报窗口未获得焦点

> ID：11438171
> 
> 赞同：3
> 
> 时间：2012-07-11T17:30:47.290
> 
> 标签：objective-c, xcode, macos, cocoa, alert

**更新：**我的应用程序作为代理运行，我发现当我关闭它时，警报窗口通常会获得焦点。任何想法如何解决这个问题？

第一次在 AppController 的 awakeFromNib 中运行应用程序时，我会显示一个警报窗口。当我在 Xcode 中运行它时，它作为一个关键窗口运行，但是当我构建应用程序时，它没有获得焦点。为什么？我怎样才能给它重点？

**应用控制器.m**

```
NSInteger kbSetup = NSRunAlertPanel(kbLetsStart, kbLetsStartDscr, @"OK", @"Maybe Later", nil);
kbSetup == 1 ? [self showPreferencesPanel:nil] : [NSApp performSelector:@selector(terminate:) withObject:nil afterDelay:0.0]; 
```

即使我创建了一个 NSAlert 实例，然后做`[[alert window] makeKeyAndOrderFront:self]`，它仍然不是关键......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T19:12:58.467

`[NSApp activateIgnoringOtherApps:YES];`好的，解决方案是在打开警报之前调用。多哈。

# iphone - IOS5 - 自定义 UITableViewCell 不显示内容

> ID：11438172
> 
> 赞同：0
> 
> 时间：2012-07-11T17:30:49.567
> 
> 标签：iphone, ios, xcode, uitableview

我的应用程序遇到问题，尤其是 a`UITableView`和它的`UITableViewCells`. 这就是问题所在：我在 a`UITableView`内创建了一个`UIView`自定义的`UITableViewCell`. 我有两个控制器：

*   列表控制器.m
*   ListCellController.m

在 IB 中，我将单元格的项目链接到我在单元格控制器的头文件中手动创建的 IBOutlets。

这是 ListCellController.h/m 的代码：

```
// .h
@class Item;

@interface ListCellController : UITableViewCell
@property (nonatomic, strong) Item *item;   
@property (nonatomic, strong) IBOutlet UILabel *itemName;
@property (nonatomic, strong) IBOutlet UILabel *dates;
@property (nonatomic, strong) IBOutlet UILabel *itemId;     
@end

// .m

// @synthetize stuff

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (!self) {
        return nil;
    }

    self.textLabel.adjustsFontSizeToFitWidth = YES;
    self.selectionStyle = UITableViewCellSelectionStyleGray;

    return self;
}

- (void)setItem:(Item *)item
{
    _item = item;

    self.itemName.text = _list.itemName;
    self.itemId.text = _list.itemId;
    self.dates.text = [NSString stringWithFormat:@"Du %@ au %@", _list.date, _list.date];
} 
```

这是 ListController.h/m 的代码：

```
// .h
@interface ListController : UIViewController <UITableViewDelegate, UITableViewDataSource> {
    UITableView *cellList;
}
@property (strong, nonatomic) IBOutlet UITableView *cellList;
@end

// .m
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [_list count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"List cell";
    ListCellController *cell = [cellList dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) {
        cell = [[ListCellController alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.item = [_items objectAtIndex:indexPath.row];
    cell.itemId.text = cell.item.itemId;
    cell.itemName.text = cell.item.itemName;
    cell.dates.text = [NSString stringWithFormat:@"From %@ to %@", cell.item.date, cell.item.date];
    return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [cellList deselectRowAtIndexPath:indexPath animated:YES];
} 
```

我遇到的问题是，当我启动应用程序时，我的手机上什么也看不到。没有内容，没有错误，没有任何内容，空白单元格。

顺便提一下，我也在这里使用故事板。

有没有人遇到过这个问题？请问我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T18:33:03.857

如果您在 UITableView 上有自定义单元格，则必须执行以下操作

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"List cell";
    ListCellController *cell = (ListCellController *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 

   if (cell == nil) {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"ListCellController" owner:self options:nil];
        for (id currentObject in topLevelObjects){
            if ([currentObject isKindOfClass:[UITableViewCell class]]){
                cell =  (ListCellController *) currentObject;
                break;
            }
        }
    }

    cell.item = [_items objectAtIndex:indexPath.row];
    cell.itemId.text = cell.item.segmentCode;
    cell.itemName.text = cell.item.hotelName;
    cell.dates.text = [NSString stringWithFormat:@"Du %@ au %@", cell.item.checkin, cell.item.checkout];
    return cell;
} 
```

# javascript - Javascript setInterval 函数未定义

> ID：11438173
> 
> 赞同：6
> 
> 时间：2012-07-11T17:30:50.673
> 
> 标签：javascript

这段代码有什么问题我似乎收到了一个错误，即未定义计时器

```
var counter = setInterval("timer()",1000);

            function timer(){
                count = count-1;
                if(count <=0){
                    clearInterval(counter);
                    return;
                }
                document.getElementById("timer").innerHTML = count + " sec";
            } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T17:32:47.753

## 不要将字符串传递给`setInterval`.

`setTimeout`您的函数是一个局部变量，当eval 是全局范围内的字符串时，该变量不存在。

相反，将函数本身传递给`setInterval`：

```
var counter = setInterval(timer, 1000); 
```

# javascript - JQuery--停止改变 .html() 值

> ID：11438174
> 
> 赞同：1
> 
> 时间：2012-07-11T17:30:59.533
> 
> 标签：javascript, jquery, variables, html

我有一个`div`如下：

```
<div><p></p></div> 
```

因此，当我这样做时，

```
var div_contents = $("div").html() 
```

然后

```
div_contents = "<p></p>" 
```

但是，我有另一个函数可以动态更改 的内容，`div`比如说，`<div><h2></h2></div>`

因此，我的`div_contents`价值正在`"<p></p>"`从`"<h2></h2>"`

如何保持 div_contents 的值不发生变化，以便可以将其用作最终变量或静态变量或其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:35:11.317

尝试[`DOMNodeInserted`](http://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMNodeInserted)Mutation 事件，当将新节点插入到文档中时，此事件会触发，您可以更新变量的值：

```
$(document).bind("DOMNodeInserted", function(e){
    alert('New Element: ' + e.target)
    div_contents = $("div").html()
}) 
```

[演示](http://jsfiddle.net/kTrJE/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:35:31.667

`div_contents`只会在你分配时改变。如果 is 的值`div_contents`，`<h2></h2>`是因为那是你调用时 div 的状态`$("div").html()`。如果此后 div 发生更改，则该变量将保留其值，直到您进行另一次分配。

我需要查看更多您的代码才能了解实际情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:44:25.433

已解决的问题 - 一定在某处犯了错误，但现在可以正常工作。

```
$(document).ready(function () {
    var has_ran = false;
    var div_contents;
    $(".scenario").bind("contextmenu", function (e) {
        e.preventDefault();
        var flipped_div = $(this);
        if (!has_ran) {
            div_contents = $(flipped_div).html();
            has_ran = true;
        } else {
            //do nothing
        }
        flip(flipped_div, div_contents);
        return false;
    });
});

function flip(flipped_div, div_contents) {
    if ($(flipped_div).hasClass("flipped")) {
        $(flipped_div).append(div_contents);
    } else {
        $(flipped_div).empty();
        $(flipped_div).append("<div class=\"scenario-desc\">hi</div>");
    }
    $(flipped_div).animate({
        rotateY: "+=" + (Math.PI) / 2
    }, 500, function () {
        $(flipped_div).toggleClass("flipped");
    }).animate({
        rotateY: "+=" + (Math.PI) / 2
    }, 500);
} 
```

# typo3 - 如何将当前菜单元素的页面 ID 传递给用户函数？

> ID：11438177
> 
> 赞同：1
> 
> 时间：2012-07-11T17:31:07.977
> 
> 标签：typo3, typoscript

我正在处理以下菜单：

```
lib.content = HMENU
lib.content {
  special = directory
  special.value.data = page:id

  wrap   = <div id="productNavigator">|</div>
  expAll = 1

  1 = TMENU
  1 {
    noBlur = 1
    expAll = 1

    NO {
      stdWrap.cObject = COA
      stdWrap.cObject {

        10 = IMAGE
        10 {
          file {
            import.cObject = USER
            import.cObject {
              userFunc = tx_dam_pages->get_media_file
              uid      = ???
              listNum  = 0
              slide    = 1
            }
          }
        }

        30 = TEXT
        30.field = title
        30.wrap = <span class="text"><span>|</span></span>
      }
    } 
```

这个想法是将分配给页面的 DAM 图像拉到菜单中。但我不知道如何将菜单元素的 id 传递给用户函数。

如果我添加一个常量值，效果很好，每个菜单项都会获得相同的图像。但我希望每个菜单项都有它链接到的页面的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:33:19.250

您可以通过 获取页面的 uid `uid.field = uid`。在渲染过程中，您总是加载页面，然后渲染。

但我不希望它`slide = 1`有效。可以？

```
 10 = IMAGE
    10 {
      file {
        import.cObject = USER
        import.cObject {
          userFunc = tx_dam_pages->get_media_file
          uid.field = uid
          listNum  = 0
          slide    = 1
        }
      }
    } 
```

如果这不起作用，请检查 uid 的静态值是否有效。

顺便提一句。以前不知道`tx_dam_pages->get_media_file`。是否与 DAM 一起发货？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:41:31.410

François Suter 也在[TYPO3-english](http://lists.typo3.org/pipermail/typo3-english/2012-July/081512.html)邮件列表中提供了这个解决方案：

```
NO.before.cObject = IMAGE
NO.before.cObject.file.import.cObject = USER
NO.before.cObject.file.import.cObject {
    userFunc = tx_dam_tsfe->fetchFileList
    refTable = pages
    refField = tx_dampages_files
} 
```

这在我的情况下非常有效。

# css - @font-face 在 Chrome 和 FF 中加载重复项

> ID：11438180
> 
> 赞同：2
> 
> 时间：2012-07-11T17:31:15.627
> 
> 标签：css, web, font-face

防弹的@font-face 语法（font-spring 和 Paul Irish 风格∞）在 Chrome 和 Firefox 中加载字体格式的重复文件。我同时使用 .woff 和 .ttf 格式，我看到对 TTF 和 WOFF 文件都发出了 HTTP 请求¶

我对级联进行了修补，并想出了一个似乎可行的技巧。在 TTF 之后关闭 src: 属性允许浏览器中断循环。

有人可以帮助“检查我的数学”并让我知道这个可怕的黑客是否是一个合理的解决方案？或者让我知道是否有其他解决方案可以防止重复的 HTTP 请求。

```
@font-face {
    font-family:"My Font";
    font-weight:normal;
    src:url('myfont.eot');
    src:url('myfont.eot?#iefix') format('embedded-opentype'),
        local('My Font'),
        url('myfont.ttf') format('truetype');
    src:url('myfont.woff') format('woff');
} 
```

浏览器将在向后级联之前简单地应用最后一个相关规则。我最后指定了我的首选字体，并在此之前向后添加了后备格式。WOFF 被加载到支持的浏览器中，而 TTF 被用作后备。

财政年度：

∞ 防弹语法。 [http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/) [http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)

¶浏览器测试：OS X 上的 Chrome 17 和 FF 13，iOS 5.1.1 上的移动 Safari

# specifications - 阅读 TGA 规范

> ID：11438182
> 
> 赞同：0
> 
> 时间：2012-07-11T17:31:23.780
> 
> 标签：specifications

我正在阅读在[http://en.wikipedia.org/wiki/Truevision_TGA](http://en.wikipedia.org/wiki/Truevision_TGA)找到的 TGA 规范，我发现了这个奇怪的东西，我会说它不仅是 TGA 规范，我还看到了微软和我认为的这个奇怪的东西几乎所有其他人都在做同样的事情（当然不是专门针对我的报价，而是总体思路）。

```
Color map type (field 2)
has the value:
0 if image file contains no color map
1 if present
**2-127 reserved by Truevision**
128-255 available for developer use 
```

我标记了我想知道的线，为什么 Truvision 保留 2-127，这个保留的结果可能是什么。

我希望有人可以指导我一个方向或解释为什么公司会保留空间的一般想法（<-这可能是答案，但我认为还有更多）

谢谢阅读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:56:11.697

大多数协议或文件规范都为“未来扩展”预留了空间。在此示例中，Truevision 可以扩展 TGA 规范以包含表示颜色图的不同方式，同时保持相同的文件结构。

# apache-flex - 通过 https 的 Flex 未显示

> ID：11438185
> 
> 赞同：0
> 
> 时间：2012-07-11T17:31:27.490
> 
> 标签：apache-flex, internet-explorer, https

我在这里遇到的情况在我看来几乎是安全配置问题。

我的 flex 应用程序在任何浏览器中都通过 https 运行。但它在这种情况下无法正常工作：

*   视窗 2008 服务器
*   IE浏览器
*   通过 TS 连接

如果其中任何一个发生了变化，它就会起作用。在服务器端，我看到一切正常，提供了 flex，甚至发生了通信，但***浏览器什么也没显示***。

任何人都有这种行为，我真的认为这是一种配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:48:34.623

我已经通过 https 部署了许多 Flash/Flex 应用程序，它们都可以完美运行。

根据我的经验，您可以研究以下几个方面：

1.  Flash 是否向服务器请求数据？如果是这样，它使用http还是https？如果它使用相对路径请求数据，那么它应该继承当前的安全上下文。
2.  在 https 下部署任何东西时，确保每个资产都使用 https 加载非常重要，否则某些浏览器安全设置会阻止这些资产正确加载。这些资产可能包括 javascript、页面的 css 或 SWF 可能依赖的 RSL。

排查问题并不难，可以使用 Fiddler for Windows 或 Charles Proxy for Mac，开启 https 代理绕过，观察流量。然后，您将看到可能导致解决方案的任何 404 或 500 错误。

# javascript - 是否有 JavaScript 库可以针对 RELAX NG 模式验证 xml

> ID：11438187
> 
> 赞同：2
> 
> 时间：2012-07-11T17:31:33.760
> 
> 标签：javascript, xml, validation, relaxng

是否有 JavaScript 库可以针对 RELAX NG 模式验证 xml？我尝试[了 jsrelaxngvalidator](http://code.google.com/p/jsrelaxngvalidator/)但它很慢并且不适用于大型模式。还有其他 JavaScript RELAX NG 模式验证器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:32:48.273

您可能想查看[https://github.com/simonster/csl-validator.js](https://github.com/simonster/csl-validator.js)（位于[http://simonster.github.com/csl-validator.js/](http://simonster.github.com/csl-validator.js/)）。它是引用样式语言 (CSL) RELAX NG Compact 模式（参见 citationstyles.org）的 JavaScript 验证器，通过 emscripten 构建在 RNV 验证器（用 C 语言编写）之上。

# c# - 使用多列值检查从 SQL 表中删除

> ID：11438191
> 
> 赞同：0
> 
> 时间：2012-07-11T17:31:49.347
> 
> 标签：c#, row, sql-delete

我想通过多列值检查从 SQL 表中删除一行。我知道如何处理单列值：

```
SqlConnection connection = new SqlConnection("YourDatabaseConnectionString");

string sqlStatement = "DELETE FROM Customers WHERE ColumnID = @ColumnID";

try{
    connection.Open();
    SqlCommand cmd = new SqlCommand(sqlStatement, connection);
    cmd.Parameters.AddWithValue("@ColumnID", "SomeValueHere");
    cmd.CommandType = CommandType.Text;
    cmd.ExecuteNonQuery();

}
finally {
    connection.Close();
} 
```

但是，多列值检查的语法是什么？另外，如果它们是 Date (SQL) 和 Time7 (SQL) 格式，我应该如何格式化这些值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:36:12.120

在 where 条件中再添加一个子句。如果要删除同时满足两个条件的记录，请使用**`AND`**，如果要删除满足任一条件的记录，请使用**`OR`**

查询以检查两个条件

```
string sqlStatement = "DELETE FROM Customers WHERE
          ColumnID = @ColumnID AND ColumnName2=@SecondValue"; 
```

查询以检查任一条件

```
string sqlStatement = "DELETE FROM Customers WHERE 
            ColumnID = @ColumnID OR ColumnName2=@SecondValue"; 
```

所以你的代码将是这样的

```
using(SqlConnection connection = new SqlConnection("YourDatabaseConnectionString"))
{

    string sqlStatement = "DELETE FROM Customers WHERE ColumnID = @ColumnID AND ColumnName2=@SecondValue";
    SqlCommand cmd = new SqlCommand(sqlStatement, connection);
    cmd.CommandType = CommandType.Text;
    cmd.Parameters.AddWithValue("@ColumnID", "SomeValueHere");
    cmd.Parameters.AddWithValue("@SecondValue", "OtherValue");

     try
     {
        connection.Open();
        cmd.ExecuteNonQuery();
     }
     catch(Exception ex)
     {
        //log error
     }    
} 
```

# android - 是否可以使用 Google“Android Accessory Development Kit”为 GoogleTV 应用程序构建一些 Arduino 项目？

> ID：11438193
> 
> 赞同：2
> 
> 时间：2012-07-11T17:31:53.177
> 
> 标签：android, arduino, google-tv, adk

我想开始一个可以在 GoogleTV 上运行的项目，例如具有某些功能的 Arduino/Picpus 板，我想知道是否可以使用 Google“Android 附件开发工具包”来构建它，并将这些板与“ Android/GoogleTV”的世界。有没有人在这种工作中“实验过”，或者可能知道任何类似的项目？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:59:43.693

我试图让 ADK 与各种 Google TV 设备一起工作，但它不起作用。当前的 Google TV 设备对 USB 设备的支持有限。

# java - java如何在自己的声明中调用对象？

> ID：11438197
> 
> 赞同：-1
> 
> 时间：2012-07-11T17:32:04.737
> 
> 标签：java, android, class, andengine

我有以下问题：我有课

```
public class HockeyActivity extends SimpleBaseGameActivity implements IOnSceneTouchListener, IOnAreaTouchListener { 
```

在这个类声明中：

```
final Player player= new Player( PhysicsFactory.createCircleBody(   this.mPhysicsWorld, player.face, BodyType.DynamicBody,CIRCLE_FIXTURE_DEF)); 
```

这里java叫喊找不到`player.face`

现在在 HockeyActivity 类中声明 Player 类：

```
 class Player {
    final Body facebody;

final Sprite face = new Sprite(HockeyActivity.CAMERA_WIDTH / 2 + 200f,
    240, HockeyActivity.mFaceTextureRegion,
    getVertexBufferObjectManager()) {
    @Override
    public boolean onAreaTouched(final TouchEvent pSceneTouchEvent,
        final float pTouchAreaLocalX, final float pTouchAreaLocalY) {

    switch (pSceneTouchEvent.getAction()) {
    case TouchEvent.ACTION_MOVE:
        // Here 'body' refers to the Body object associated with
        // this sprite
        facebody.setTransform(pSceneTouchEvent.getX(),
            pSceneTouchEvent.getY(), facebody.getAngle());
        break;
    default:
        break;
    }
    return true;
    }
};

Player(Body f) {
    facebody = f;
}

} 
```

在不改变最终事物的情况下如何处理？我也不能做静态的，因为`getVertexBufferObjectManager()`在 HockeyActivity 类中声明：

```
 final VertexBufferObjectManager vertexBufferObjectManager = this.getVertexBufferObjectManager(); 
```

我处理问题的另一种方法：

```
final Sprite  face = new Sprite(CAMERA_WIDTH/2+200f, 240, this.mFaceTextureRegion, this.getVertexBufferObjectManager()) {
                        @Override
                        public boolean onAreaTouched(final TouchEvent pSceneTouchEvent, final float pTouchAreaLocalX, final float pTouchAreaLocalY) {

                                switch(pSceneTouchEvent.getAction()){
                                    case TouchEvent.ACTION_MOVE:
                                        //Here 'body' refers to the Body object associated with this sprite
                                       facebody.setTransform(pSceneTouchEvent.getX(),     pSceneTouchEvent.getY(),                facebody.getAngle());
                                        break;
                                    default:
                                        break;
                                }
                                return true;    

} 
```

// 几行之后：

```
final Body facebody = PhysicsFactory.createCircleBody(  this.mPhysicsWorld, face, BodyType.KinematicBody,CIRCLE_FIXTURE_DEF);
        this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(face,facebody, true, true));
        facebody.setUserData("player1"); 
```

但问题出在内部`final Sprite face`，当覆盖方法时，因为它没有看到`facebody`声明。如何让这个 Overriding 方法看到 facebody？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:52:27.277

您的代码有问题。
您想要实例化一个属性“播放器”，但使用/传递属性本身作为参数之一。
这是无法做到的（至少在java中）。

**如果**“face”是一个常数，你可以做的是：

*   将 FACE 声明为公共静态属性
*   在实例化时，使用对 Player.FACE 的静态引用

像这样：

```
final Player player = new Player( PhysicsFactory.createCircleBody(   this.mPhysicsWorld, Player.FACE, BodyType.DynamicBody,CIRCLE_FIXTURE_DEF)); 
```

否则，不要在实例化时传递带有参数的 player.face，而是在初始化 player 对象后尝试使用 setter。

# ruby-on-rails - 如何解决我在 Heroku 上遇到的这个错误？

> ID：11438201
> 
> 赞同：0
> 
> 时间：2012-07-11T17:32:11.797
> 
> 标签：ruby-on-rails, heroku

当我打开一个在 heroku 上构建的应用程序时，我在进入注册页面时收到一个应用程序错误。我进入了我的heroku日志，发现了这个错误消息：

在 6 毫秒内完成 500 内部服务器错误在布局/应用程序中呈现用户/new.html.erb (5.5 毫秒) ActionView::Template::Error (未定义的方法 `time_zone' 用于#):

这是我创建新用户的看法：

```
<div class="row">
<div class="span6 offset4">
    <%= form_for(@user) do |f| %>

        <%= render 'shared/error_messages' %>

        <%= f.label :name %>
        <%= f.text_field :name %>

        <%= f.label :email %>
        <%= f.text_field :email %>

        <%= f.label :phone_number, "Your cell phone number" %>
        <%= f.text_field :phone_number %>

        <%= f.label :password %>
        <%= f.password_field :password %>

        <%= f.label :password_confirmation, "Password confirmation" %>
        <%= f.password_field :password_confirmation %>

        <%= f.label :time_zone, "Choose your time zone" %>
        <%= f.select :time_zone, [['Eastern'], ['Central'], ['Mountain'], ['Pacific']] %><br>

    <%= f.submit "Create my account", class: "btn btn-large btn-primary" %>
    <% end %> 
```

什么可能导致此错误，我该如何解决？非常感谢！

```
 def create
@user = User.new(params[:user])
if @user.save
 sign_in @user
  flash[:success] = "Welcome to app!"
 redirect_to info_path
else
  render 'new'
end 
```

结尾

def new @user = User.new 结束

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:57:27.453

确保在推送到 heroku 后迁移数据库

```
heroku run rake db:migrate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:12:39.767

heroku 有日志，就像你在开发中的 rails 服务器一样，你可以运行 heroku 日志并跟踪它。这应该可以让您很好地了解导致错误的行和操作

# c# - 如何检查 EWS Contact.Birthday 属性是否存在

> ID：11438203
> 
> 赞同：3
> 
> 时间：2012-07-11T17:32:22.793
> 
> 标签：c#, exchangewebservices

在我的 C# EWS 应用程序中，我正在拉取一个特定的联系人并获取他们的属性。我挂断了contact.birthday。我可能会对其他日期时间字段有同样的问题，所以这将有助于用一块石头杀死两只或更多只鸟：P

[http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.contact.birthday(v=exchg.80](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.contact.birthday(v=exchg.80) )

我知道该属性未在我的测试联系人中设置，但每次检索这些道具时，我都会收到以下消息“已请求此属性，但服务器未返回它。”

我知道该值未设置，所以我如何检查 null 或 prop not set 或类似的东西。我尝试了几种不同的方法，但没有任何运气。我开始在这个上松开我的头发。

任何帮助或建议都会很棒。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T19:04:14.617

您可以使用以下方法检查属性是否存在`TryGetProperty()`：

```
DateTime birthday;
contact.TryGetProperty(ContactSchema.Birthday, out birthday); 
```

# php - 运行时 tar.gz 浏览

> ID：11438204
> 
> 赞同：0
> 
> 时间：2012-07-11T17:32:25.337
> 
> 标签：php

我有使用随机资产的 PHP 代码，我想从 tar.gz 文件中获取它们，而无需在运行时解包。

有什么办法吗？（当然：我可以解压，但是为什么？我只想要一个图像和base64它（有不同的图像；这只是示例））。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:59:42.900

没有明智、有效的方法可以做到这一点。TAR 和 Gzip 都不支持随机访问，因此您必须解压缩并扫描整个内容才能访问存档中的任何元素。这将非常缓慢。

如果您需要随机访问压缩数据，请使用 ZIP 之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:37:01.003

您可以使用[popen](http://php.net/manual/en/function.popen.php)来调用`tar`以提取内存中存档的单个文件：

例如：

```
z.tgz -> contains two files 1.txt and 2.txt 
```

然后这会将您的内容`1.txt`放入一个变量中。

```
<?php
    $file='z.tgz';
    $extract='1.txt';

    $fp=popen('tar Oxzf '.$file.' '.$extract,'r');
    if (!$fp) die('Failed to execute tar');
    $data=stream_get_contents($fp);
    fclose($fp);
    echo 'Contents of '.$extract.': '.$data;
?> 
```

# objective-c - 在视图控制器之间传递数据

> ID：11438210
> 
> 赞同：0
> 
> 时间：2012-07-11T17:32:46.740
> 
> 标签：objective-c, xcode, uiviewcontroller, parameter-passing

我有一个包含两个视图控制器的游戏，当用户在 viewcontrollerA 中结束游戏时，他的分数将传递给 viewcontrollerB，检查用户正确分数是否大于高分，以及高分是否更改为用户正确分数。现在，我成功地将我的 var 值向前传递，但现在我想在 viewControllerA 的标签中显示高分。我尝试使用@property（就像我将正确的分数传递给viewcontrollerB）但我没有成功。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:43:15.093

我会说你真正要找的是[`NSUserDefaults`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html).

您可以使用它跨 ViewControllers 甚至跨 App-Restarts 持久存储数据。例如，您所做的是：

```
 [[NSUserDefaults standardUserDefaults] setInteger:highScore forKey:@"CurrentHighscore"]; 
```

存储一个值。一旦你想阅读它（也许在应用程序重新启动后，在`viewDidLoad`一些视图控制器的方法中，你会这样做：

```
 UILabel* someUILabel;
someUILabel.text = [NSString stringWithFormat:@"Highscore: %i", [[NSUserDefaults standardUserDefaults] integerForKey:@"CurrentHighscore"]]; 
```

# android - 如何使用安卓模拟器访问 https 站点

> ID：11438214
> 
> 赞同：1
> 
> 时间：2012-07-11T17:32:56.227
> 
> 标签：android

我是移动应用程序安全测试的新手。我正在尝试在 android 模拟器上访问 https 站点。我的配置如下 Android 平台 2.1 我可以毫无问题地在模拟器上访问像 Google 这样的 http 站点。但是当我尝试访问像 facebook 或任何其他这样的 https 站点时。我无法访问。请让我知道如何在 android 模拟器上访问安全网站。

# javascript - 使用表单字段值作为对 JavaScript 变量的引用

> ID：11438220
> 
> 赞同：1
> 
> 时间：2012-07-11T17:33:28.923
> 
> 标签：javascript, jquery

我正在尝试使用 HTML 表单字段的值来定义我在 JavaScript 函数中使用的变量。我有一个解决方案，但我认为有一种更优雅的方法可以做到这一点。

我有两个名称数组，男性和女性，我的 HTML 表单有一组男性和女性的两个单选按钮。在提交时，我这样做：

```
gender = $("#gender input:checked").val(); //get value of checked button
if (gender == "male" ) {
    name = male[Math.floor(Math.random()*male.length)];
} else {
    name = female[Math.floor(Math.random()*female.length)];
}
$("#result").html(name); 
```

我的解决方案是 if-else 但我想知道是否可以将性别值转换为对同名变量的引用。然后我可以用这样的东西替换 if-else：

```
name = gender[Math.floor(Math.random()*gender.length)]; 
```

我很想听听你的想法。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:37:20.120

您可以将性别放入一个对象中：

```
var genderData = {
   male: [ ... ]
   female: [ ... ]
} 
```

然后使用以下语法：

```
genderData[gender][Math.floor(Math.random() * genderData[gender].length)] 
```

您还可以稍微简化一下以使内容更具可读性：

```
var gd = genderData[gender];
name = gd[Math.floor(Math.random() * gd.length)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:36:47.167

如果`male`/`female`是全局变量，那么它们可以在`window`对象中找到。在这种情况下，您应该能够使用类似的东西

```
name = window[gender][Math.floor(Math.random() * window[gender].length)]; 
```

where`gender`必须是有效的变量名。但是，我不鼓励您使用全局变量。而是使用具有属性`male`和的本地对象`female`。

# jpql - JPQL 找不到外键

> ID：11438224
> 
> 赞同：0
> 
> 时间：2012-07-11T17:33:40.513
> 
> 标签：jpql

只是一个快速的问题。想连接两个表A和B，其中a_fk是A的表外键，b_pr是B的主键。A 和 B 之间的关系是一对一的双向关系。A 和 B 对应于 A 和 B 表 Entity 类。
我有 jpql 查询`"select b from A a, B b where a.a_fk=b.b_pr";`Eclipse 无法编译，说 a_fk 列不存在。我创建了一个本地 sql 查询并检查了相同的 sql 语句，但当然我已经将它翻译成正确的 sql。这有效。

问题：JPQL 不支持外键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:37:30.640

JPQL 使用实体和实体之间的关联。它不使用表、列和外键。

如果要选择所有具有 B 的 As，则查询是

```
select a from A a inner join a.b 
```

如果你想用他们的 B 选择所有的 As

```
select a from A a left join fetch a.b 
```

读一本关于 JPA 的书，因为你还没有掌握关于 JPA 的基本概念。

# c - 由 const GLchar 引用的 C 字符串数组 **

> ID：11438231
> 
> 赞同：0
> 
> 时间：2012-07-11T17:33:56.103
> 
> 标签：c, swig

我有一个需要使用`const GLchar **`参数调用的 C 函数。

我不是 C 程序员（Perl 是我的游戏），但我试图从 Perl 调用 C 库。我已经包装了所有其他必需的功能（SWIG）。这是最后一个麻烦。请不要因为我（缺乏）C 技能而对我失望。我正在尝试，只有当您确切知道要输入什么内容时，Google 才会提供帮助！

我理解这`const GLchar **`意味着它需要一个指向字符串数组（`GLchar`数组）的指针。由于无法直接创建，我必须先创建一个`GLchar`数组：

```
 GLbyte *GLbyte_array(int size) {
      return (GLbyte *) malloc(sizeof(GLbyte)*size);
    } 
```

所以我通过以下方式在 Perl 中使用它：

```
 my $var=GLbyte_array(20); 
```

然后`char`通过调用从 Perl 一次填充一个：

```
 void GLbyte_put(GLbyte *a, int i, char val) {
     a[i] = val;
   } 
```

同样，Perl：

```
 my $str="hello";
    for(my $i; $i<length($str); $i++)
    { GLbyte_put($var, $i); } 
```

都好。（好吧，也许不好 - 但它有效）。我有一个包含单词“hello”的 C char 数组。

然后我的解决方案是尝试构建这些人的数组并将我在上面创建的数组放入其中。然后返回我需要的指针：

```
 const GLchar **get_GLbyte_array_ptr(GLbyte *a) {
     char *arr[1];
     arr[0]= a;
     return (const GLchar**)arr[0];
   } 
```

珀尔：

```
 my $ptr=get_GLbyte_array_ptr($var); 
```

这显然是一个负担。它编译然后段错误。

你能推荐替代代码/修复这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:40:27.787

而不是

```
return (const GLchar**)arr[0]; 
```

你可以试试这个：

```
return (const GLchar**)&arr; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:49:18.667

最终版本如下所示：

```
 const GLchar **get_GLbyte_array_ptr(GLbyte *a) {
    static char *arr[1];
    arr[0]= a;
    return (const GLchar**)&arr;
    } 
```

# c# - 对话必须是用户发起的问题并且是异步的。要求

> ID：11438233
> 
> 赞同：1
> 
> 时间：2012-07-11T17:34:05.897
> 
> 标签：c#, silverlight, silverlight-5.0

我得到 en ""Dialogs must be user-initiated" 错误。

任何线索如何解决？

谢谢！

```
private void ExportDataToCSV()
        {
            string separator = GetSeparator();

            LoadClientContentItemStatistics(); // async. request of MVVM Light Toolkit

            foreach (var item in this._view)
            {
                sb.AppendLine("\"" + item.Player.PlayerGroup.Name + "\"" + separator + "\"" + item.Player.Name + "\"" + separator + "\"" + item.ClientContentItem.Name + "\"" + separator + "\"" + item.TotalTime.ToString() + "\"" + separator + "\"" + item.TotalQuantity.ToString() + "\"" + separator + Environment.NewLine);
            }
            SaveFileDialog sfd = new SaveFileDialog()
            {
                DefaultExt = "csv",
                Filter = "CSV Files (*.csv)|*.csv|All files (*.*)|*.*",
                FilterIndex = 1
            };
            if (sfd.ShowDialog() == true) // "Dialogs must be user-initiated" ERROR
            {
                using (Stream stream = sfd.OpenFile())
                {
                    using (StreamWriter writer = new StreamWriter(stream))
                    {
                        writer.Write(sb.ToString());   
                        writer.Close();
                    }
                    stream.Close();
                }
            }

            IsExport = true;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:39:30.997

这个错误的意思正是它所说的：用户必须启动这个对话框。因此，您只能从用户点击事件或其他用户发起的事件中调用此方法。

# c# - 基于谓词拆分 LINQ 查询

> ID：11438235
> 
> 赞同：10
> 
> 时间：2012-07-11T17:34:10.857
> 
> 标签：c#, linq

我想要一种可以拆分`IEnumerable`谓词的方法，通过它们相对于谓词的索引将项目组合在一起。例如，它可以`List<string>`在满足`x => MyRegex.Match(x).Success`的项目中拆分 a，将“介于”这些匹配项之间的项目组合在一起。

它的签名看起来有点像

```
public static IEnumerable<IEnumerable<TSource>> Split<TSource>(
    this IEnumerable<TSource> source,
    Func<TSource, bool> predicate,
    int bool count
) 
```

，可能带有包含所有分隔符的输出的额外元素。

有没有比`foreach`循环更有效和/或更紧凑的方法来实现这一点？我觉得应该可以使用 LINQ 方法来实现，但我不能指望它。

**例子：**

```
string[] arr = {"One", "Two", "Three", "Nine", "Four", "Seven", "Five"};
arr.Split(x => x.EndsWith("e")); 
```

以下任何一项都可以：

```
IEnumerable<string> {{}, {"Two"}, {}, {"Four", "Seven"}, {}}
IEnumerable<string> {{"Two"}, {"Four", "Seven"}} 
```

用于存储匹配的可选元素是`{"One", "Three", "Nine", "Five"}`.

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-08-12T22:54:35.630

如果您想避免使用扩展方法，您可以随时使用：

```
var arr = new[] {"One", "Two", "Three", "Nine", "Four", "Seven", "Five"};

var result = arr.ToLookup(x => x.EndsWith("e"));

// result[true]  == One Three Nine Five
// result[false] == Two Four Seven 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T17:44:34.097

您应该通过扩展方法执行此操作（此方法假定您忽略分区项）：

```
/// <summary>Splits an enumeration based on a predicate.</summary>
/// <remarks>
/// This method drops partitioning elements.
/// </remarks>
public static IEnumerable<IEnumerable<TSource>> Split<TSource>(
    this IEnumerable<TSource> source,
    Func<TSource, bool> partitionBy,
    bool removeEmptyEntries = false,
    int count = -1)
{
    int yielded = 0;
    var items = new List<TSource>();
    foreach (var item in source)
    {
        if (!partitionBy(item))
            items.Add(item);
        else if (!removeEmptyEntries || items.Count > 0)
        {
            yield return items.ToArray();
            items.Clear();

            if (count > 0 && ++yielded == count) yield break;
        }
    }

    if (items.Count > 0) yield return items.ToArray();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T17:47:12.117

```
public static IEnumerable<IEnumerable<TSource>> Split<TSource>(
    this IEnumerable<TSource> source,
    Func<TSource, bool> predicate)
{
    List<TSource> group = new List<TSource>();
    foreach (TSource item in source)
    {
        if (predicate(item))
        {
            yield return group.AsEnumerable();
            group = new List<TSource>();
        }
        else
        {
            group.Add(item);
        }
    }
    yield return group.AsEnumerable();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-26T10:54:02.857

```
public static IEnumerable<IEnumerable<TSource>> Partition<TSource>(this IEnumerable<TSource> source, Func<TSource, bool> predicate)
{
    yield return source.Where(predicate);
    yield return source.Where(x => !predicate(x));
} 
```

例子：

```
var list = new List<int> { 1, 2, 3, 4, 5 };
var parts = list.Partition(x => x % 2 == 0);
var even = parts.ElementAt(0); // contains 2, 4
var odd = parts.ElementAt(1); // contains 1, 3, 5 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-20T18:50:27.437

我将使用提供的键选择器对源集合进行分区。这样，您还可以根据简单属性对复杂对象进行切片。

```
public static class LinqExtension
{
    public static IEnumerable<IEnumerable<TSource>> Slice<TSource, TKey>(
        this IEnumerable<TSource> source,
        Func<TSource, TKey> selector,
        Func<TKey, TKey, bool> partition)
    {
        if (source == null) throw new ArgumentNullException(nameof(source));
        if (selector == null) throw new ArgumentNullException(nameof(selector));
        if (partition == null) throw new ArgumentNullException(nameof(partition));

        var seed = new List<List<TSource>> { new List<TSource>() };

        return source.Aggregate(seed, (slices, current) => 
        {
            var slice = slices.Last();
            if (slice.Any())
            {
                var previous = slice.Last();
                if (partition(selector(previous), selector(current)))
                {
                    slice = new List<TSource>();
                    slices.Add(slice);
                }
            }
            slice.Add(current);
            return slices;

        }).Select(x => x.AsReadOnly());
    }
} 
```

一个简单的例子：

```
// slice when the difference between two adjacent elements is bigger than 5
var input = new[] { 1, 2, 3, 10, 11, 20 };
var output = input.Slice(i => i, (x, y) => y - x > 5); 
```

# javascript - 使用 Pdf.js 突出显示 pdf 中的部分

> ID：11438240
> 
> 赞同：8
> 
> 时间：2012-07-11T17:34:28.893
> 
> 标签：javascript, pdf, pdf.js

我目前正在为我的项目使用 pdf.js 来呈现 PDF。

现在有一项棘手的任务是在给定坐标的情况下突出显示 PDF 页面的一部分。

### 例子

给定一个像`[(31,35),(40,35),(40,40),(31,40)]`我这样的边界部分，应该用任何选择的原色突出显示给定的部分。

如何使用 Javascript 和 pdf.js API 完成这项任务？

有可能还是我听起来过于雄心勃勃？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T17:39:57.453

PDF.js 的其中一位作者`cjones`表示：

`No, and that’s (highlighting) not like something we would add to pdf.js. That ought to be easy to layer on top of pdf.js.`

**来源**：[http ://blog.mozilla.org/cjones/2011/07/03/pdf-js-first-milestone/](http://blog.mozilla.org/cjones/2011/07/03/pdf-js-first-milestone/)

如果您有兴趣使用此功能，您将需要自己实现它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T17:07:25.647

我找到了一种更好的方法来实现这一点在html页面中找到点的坐标

然后从中减去坐标（位置）`div.textLayer`以找到坐标

在线显示的 pdf 中的文本。

为了找到实际pdf中文本的坐标，找到纵横比，你会

获取实际坐标

**例子**

如果在线显示的pdf是`800x900`和文字坐标

`[(31,35),(40,35),(40,40),(31,40)]`

实际的pdf大小是`612x792`

像这样在实际pdf中找到该区域的适当值

`(612/(800 / 31)),(792/(900/35))`

并为在网上找到的所有坐标这样做

IE

`(40,35),(40,40),(31,40)`

## 笔记： -

可能想要检查名为[convertToPdfPoint的 PDF.js API](http://mozilla.github.io/pdf.js/api/draft/PDFJS.PageViewport.html#convertToPdfPoint)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-25T21:20:02.963

如果选择文本足以满足您的需求，您可能会在[SO 中找到有关在 PDF.js 中突出显示文本](https://stackoverflow.com/a/43620823/7763696)的解决方案条目。

通过 选择文本`document.getSelection()`。

你说的颜色调整可以通过使用来完成

```
<span style="yourColorDefinition"> 
```

代替

```
<span class="hightlight"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-27T17:49:06.530

我写了这个例子来展示如何实现，使用 textLayer 的 PDF 显示，仅使用更新的 pdf.js 库。如果你想要普通 pdf web 的界面，你必须使用 viewer.js 并实现监听器。

```
window.onload = function () {
  // atob() is used to convert base64 encoded PDF to binary-like data.
  var pdfBase64 = atob("JVBERi0xLjMNJeLjz9MNCjcgMCBvYmoNPDwvTGluZWFyaXplZCAxL0wgNzk0NS9PIDkvRSAzNTI0L04gMS9UIDc2NTYvSCBbIDQ1MSAxMzddPj4NZW5kb2JqDSAgICAgICAgICAgICAgICAgICAgICAgDQoxMyAwIG9iag08PC9EZWNvZGVQYXJtczw8L0NvbHVtbnMgNC9QcmVkaWN0b3IgMTI+Pi9GaWx0ZXIvRmxhdGVEZWNvZGUvSURbPDREQzkxQTE4NzVBNkQ3MDdBRUMyMDNCQjAyMUM5M0EwPjxGNkM5MkIzNjhBOEExMzQwODQ1N0ExRDM5NUEzN0VCOT5dL0luZGV4WzcgMjFdL0luZm8gNiAwIFIvTGVuZ3RoIDUyL1ByZXYgNzY1Ny9Sb290IDggMCBSL1NpemUgMjgvVHlwZS9YUmVmL1dbMSAyIDFdPj5zdHJlYW0NCmjeYmJkEGBgYmCyARIMIIKxAUgwpwIJNkcg8eUYAxMjwzSQLAMjucR/xp1fAAIMAEykBvANCmVuZHN0cmVhbQ1lbmRvYmoNc3RhcnR4cmVmDQowDQolJUVPRg0KICAgICAgICANCjI3IDAgb2JqDTw8L0ZpbHRlci9GbGF0ZURlY29kZS9JIDY5L0xlbmd0aCA1OC9TIDM4Pj5zdHJlYW0NCmjeYmBgYGFgYPzPAATcNgyogJEBJMvRgCzGAsUMDA0M3Azc0x50JoA4zAwMWgIQLYwsAAEGAL/iBRkNCmVuZHN0cmVhbQ1lbmRvYmoNOCAwIG9iag08PC9NZXRhZGF0YSAxIDAgUi9QYWdlcyA1IDAgUi9UeXBlL0NhdGFsb2c+Pg1lbmRvYmoNOSAwIG9iag08PC9Db250ZW50cyAxMSAwIFIvQ3JvcEJveFswIDAgNTk1IDg0Ml0vTWVkaWFCb3hbMCAwIDU5NSA4NDJdL1BhcmVudCA1IDAgUi9SZXNvdXJjZXMgMTQgMCBSL1JvdGF0ZSAwL1R5cGUvUGFnZT4+DWVuZG9iag0xMCAwIG9iag08PC9GaWx0ZXIvRmxhdGVEZWNvZGUvRmlyc3QgOTQvTGVuZ3RoIDc3My9OIDEzL1R5cGUvT2JqU3RtPj5zdHJlYW0NCmjevFRtb9owEP4r/gPgl9hxIlVI0I6u0lqhJls/RPmQgguRQoISV6P/fncJLoG1K6XSiMz55e58vue545IwwhXhnibcJyKAlSaeCAgPiOeDCImUighGVMiI4CQUoCYIZ1oS4YGt5kRIsGIhEeAokLAGFcYkubigl1VR1dEmmxtcNAovY+R+NKLftvY6spnFg+uI4/XdwbQqLexNBcYAWzSOBQbQTSXe3k19vLibBnhnZz6rq3lkbEJnV1Mam61NR6OEXmbF/fUEr8rW6ywRQwE/iPRQpvQ2s3W+TdhQcnQ+FBwdDxkPPRCe0rjSXEFe2JDzUKAImEIdjZENQ8VUSh9WuTWzKi9t0m0ReOGQBSFEk0IY0Zg8ZUVjaHSLpoLG9/RmYUqb2xcav2zMPj+jEehf5U9Ppjbl3DQJp4/PRWFsulMs59UiL5et3iRrDCaQRi/rx6p4PURYMVXR86NFI7TkNK5+ljkoGMJ3ScUztG+djZs5RERCpiB/m+8mX64sYfTKdPsDwTmdFtmyAca0VpNJtU0GPtBn4GkkgQfMYDJI29O7bG3ouM6zYjCpisVtTG9sVuTzcbksDPiNrFn/Aip6+zDwqjrf2Ko+fN2BF/dG+pCX47LJX9fTvG7s5SqrXXx7d0hsfPCPbKfBub9PTv1sYpel1hBcL+yqSYRGSn7ta2nyKn3O39Dxff2hH6X81rovuxMXpZPuDi8IWy3P89I+wEHI3wPYdwDLHsDKR4CZBoCxUzCmewDH+do0d+b3fbXOyln0DsrsY4z/dnQW0IIfAa3lKUCrw2RDjWPa2tGmVu3/T4UcQe1me6iOAXXQO8hCKd/QlLCr2KHEyHCOo08ADcPt49i9A6ggeie7uBgj/+vTPku/1GV8BSQUypHQ08dd5nzqOfPzCOcdEg40Tmosny3JMOiXpNRdSXLBfMyGeL8k277ZZeYoRQOuPtOF/+n3vNypo2IV/Ixi3X+nFuipPfeDjsxccbr/rqgP+zHu9IoRCtEVo4tiV9JAiD8CDAA+0IrxDQplbmRzdHJlYW0NZW5kb2JqDTExIDAgb2JqDTw8L0ZpbHRlci9GbGF0ZURlY29kZS9MZW5ndGggMTUzMD4+c3RyZWFtDQpIibRXS2/jNhBGr/4Vc1uqiBW9H8d0tynQ02IroIduD7LEJCpk0RDppPlT/Y2dB2l7nS0KLFoEUPgacuabmW/GP3Sb267LIIXuYZMWcVJAgn8yytI8rqukgrqscZ7k0O03t+9tCYPlYwnYYXP70y8pPNrNNomTJKugGzY0qhroXja/qbsoTeJMjdG2jlNldhqibUpD3GjiWg3RNlNrtK3iCnd7Bx8/3MP9RAuNmrWNfu9+Jh0Lr2MmCmbQtHGbkXJZG+eZKMc6JK3XIaMR6zDiu3/BR7O6fjdr+GBQhyRu1XDc68XBfVTGucJFWlv3uJmjgqjLZ4Xa8ObnCCZLqieqh+MyPevV9rMsPEwzWZXhyKx7FONV9xRGh5WMb5W2en32L+sow2+4cZ7ZzAS2aZyW0H1gCJPGG9K2mRhiHqIcYYGI79dRgaDxRNbN4uzN5TxK8LvymKyKC9WzjHPTEm1b9MsjuadRN3ySRQc+IaKzOYq05S0RXkZ4lFWZH54mkbFRosDIvV5RL8GXvcpTYrLFm0XKWzEamR5JUdJUX4i6G5AXdbQtcc9r3dMs9waOorGIWQuIFWHafe+jogiRSSMCEwGE/nCYp6F3k1mgR8MOc+/IiXC0rEam9AjOwLBqCdEe3yqU0zC5OPgsi3PvspTC8BRxjJkEUCvYTh7HRWYjX1rypaWaxXMSQg8Somgc6NkfG/iYW80yDYQXQ5XhEsXwOFm3TrujmGJRPzAYpIPZawsUK1cBJqDUJ1BqUfywGsyQvQUU3Jtl5hda8h1mmQK9sFqYtua4OM2BXRNGL5N7Ik0HVs9LDcCpYZ96MgBTC4M+V9PyGNFlgt/tvWcfAbJhJFkrUkh9F3V/UPpX/lBcVJj+eAYBlZ3GE4NwV0id0htWtSXfc7e8mkXfoJNfX540elOEPaugEV6YYUm9cJ0KKDCgx8xBI7BIT9G2wUAjr2aKDYzhbiYqyBPGSZmjxPiiCR4OIZ4HAqHAE+JA/DCm/YxihoJOhfmw+oUeccMkYLy2rCu5sQjGpj6006SpROFPmrXr+TtGkk40XjE7ChVzpH3SA69NxHuNOkxyZOHjTiIVk4gEZExRdL7E8wwNEQOPBk8N3yCn9nK5aOJkYsFiVMrK5AcYcBcqL4Rxpd5FmIJVEEMPyPKlnvClBhZ2+vKiIx+yXj0yYIu1jbjoq+nwhiNGs7zDYEXw4akX7iYoiQPgzB+eGij1LDLHP1EGCZzTtqK0tVdJgPqU35gHxdfyQEJjG4ZkEhFSTYx7jVyotD6hsAUoLy4qzxeVclE/v/SvXByR+JEF4LBOSESDL6ZoiVpXzTNZc/PrVTXHRGov8i7JTvj7ggfMy1RbUUUmoca/MwkTUQXjxVE/iyPEP/U1vZDfi+K/xDb0GWndppfQpgRtjnQ3cTGqEdqe/xOZIgwvyIYp4fEaZdQKEHoogwSO1efLrWufUOvwluXkcS6NtfqzH97inF3hHDRvQ4dEFYNJh6OWbOi5QXF6pNIr7YtsEN5hex1n3yz5fobKLtYu7kOseXBkKwmtTL2jMBgKNPmZwr5MvSqkHvLt2gc3F/ysb3awNGdpiAes9Q7rlVAakfJlG0QlXQTZBmx/qFkJzQxnJ9WkSkmtXoyD2VgspkdNKRy6gbMtLIG2SNvmDbpq29LsnCo+jJ8xDZgQM/Y2Zh3G9bRgWnCiZGp/QL5CNtxN8+SIiNX/yQzbs5oUvkHLDvnpQfyPSQR3g4xWbss/6X4MLdFKvbA/1zN+5BJ2CJVGgm40L8ts+pG7KoksrKG7U+ELr2D8ZESPQfTUxiCJ7i5Z+hwqeXMR9UQOFE90QYW6YdtEs7CqsSX9dyC/mV1zgbBoGt8+vTfsSYz4gb9OflOcOsEaSfFUOHNPvumpvabxKnksG2D3sjr7kyvLYSmRZSqCPKXKGIQm/0NGjlKnzaPBX3n9tL9p9D6Tm2QR3fdVF4SI4ah9pHAFjl9EXUYghV0eY680/EukCF0CF2hl3QXtEelReBHnc6uh4Ff67sSBP3abvwcArRiH3QoNCmVuZHN0cmVhbQ1lbmRvYmoNMTIgMCBvYmoNPDwvRmlsdGVyL0ZsYXRlRGVjb2RlL0xlbmd0aCAyMDg+PnN0cmVhbQ0KSIlUkL0OwjAMhPc+hUcQQ9rOVRdYOvAjCuxp4laRiBO56dC3JykFxBBL9uXTnS32zaEhE0Bc2KkWA/SGNOPoJlYIHQ6GoChBGxXWbqnKSg8iwu08BrQN9Q6qKhPXKI6BZ9i0s+3cc5dvQZxZIxsaYHMr7o84aCfvn2iRAuRQ16Cxz8T+KP1JWozyii7zYjV0GkcvFbKkAaHKi/pdkPS/9iG6/t3+vlZlXpZ1FomPluC0yddbTcwx1rLukihlMITfi3jnk2V62UuAAQBDyGk/Cg0KZW5kc3RyZWFtDWVuZG9iag0xIDAgb2JqDTw8L0xlbmd0aCAzNjU2L1N1YnR5cGUvWE1ML1R5cGUvTWV0YWRhdGE+PnN0cmVhbQ0KPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNC4yLjEtYzA0MyA1Mi4zNzI3MjgsIDIwMDkvMDEvMTgtMTU6MDg6MDQgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+CiAgICAgICAgIDxkYzpmb3JtYXQ+YXBwbGljYXRpb24vcGRmPC9kYzpmb3JtYXQ+CiAgICAgICAgIDxkYzpjcmVhdG9yPgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaT5jZGFpbHk8L3JkZjpsaT4KICAgICAgICAgICAgPC9yZGY6U2VxPgogICAgICAgICA8L2RjOmNyZWF0b3I+CiAgICAgICAgIDxkYzp0aXRsZT4KICAgICAgICAgICAgPHJkZjpBbHQ+CiAgICAgICAgICAgICAgIDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+VGhpcyBpcyBhIHRlc3QgUERGIGZpbGU8L3JkZjpsaT4KICAgICAgICAgICAgPC9yZGY6QWx0PgogICAgICAgICA8L2RjOnRpdGxlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdGVEYXRlPjIwMDAtMDYtMjlUMTA6MjE6MDgrMTE6MDA8L3htcDpDcmVhdGVEYXRlPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPk1pY3Jvc29mdCBXb3JkIDguMDwveG1wOkNyZWF0b3JUb29sPgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxMy0xMC0yOFQxNToyNDoxMy0wNDowMDwveG1wOk1vZGlmeURhdGU+CiAgICAgICAgIDx4bXA6TWV0YWRhdGFEYXRlPjIwMTMtMTAtMjhUMTU6MjQ6MTMtMDQ6MDA8L3htcDpNZXRhZGF0YURhdGU+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczpwZGY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGRmLzEuMy8iPgogICAgICAgICA8cGRmOlByb2R1Y2VyPkFjcm9iYXQgRGlzdGlsbGVyIDQuMCBmb3IgV2luZG93czwvcGRmOlByb2R1Y2VyPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD51dWlkOjA4MDVlMjIxLTgwYTgtNDU5ZS1hNTIyLTYzNWVkNWMxZTJlNjwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkluc3RhbmNlSUQ+dXVpZDo2MmQ2YWU2ZC00M2M0LTQ3MmQtOWIyOC03YzRhZGQ4ZjllNDY8L3htcE1NOkluc3RhbmNlSUQ+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4NCmVuZHN0cmVhbQ1lbmRvYmoNMiAwIG9iag08PC9GaWx0ZXIvRmxhdGVEZWNvZGUvRmlyc3QgNC9MZW5ndGggNDgvTiAxL1R5cGUvT2JqU3RtPj5zdHJlYW0NCmjeMlUwULCx0XfOL80rUTDU985MKY62BIoFxeqHVBak6gckpqcW29kBBBgA1ncLgA0KZW5kc3RyZWFtDWVuZG9iag0zIDAgb2JqDTw8L0ZpbHRlci9GbGF0ZURlY29kZS9GaXJzdCA0L0xlbmd0aCAxNjcvTiAxL1R5cGUvT2JqU3RtPj5zdHJlYW0NCmjePMvBCsIwEEXRX5mdDaKdxCpVSqFY3AkuBNexSelA6EAyRfx7A4qPu3znAAhNU3aLTByLwVkKb1Weo7dCPPdWfNGfDOYdzFGj0VivtV4hrn6vrK40RE48Cjw4Oqi3qMoruz/WuwxrvTeV3m2w+uJbZLcMPhZdxk8r0FMSCsFHqLYII0d40Oz4lVR5Jwm+uE+UIGdBfBK49RcYKXjVth8BBgBnZztkDQplbmRzdHJlYW0NZW5kb2JqDTQgMCBvYmoNPDwvRGVjb2RlUGFybXM8PC9Db2x1bW5zIDMvUHJlZGljdG9yIDEyPj4vRmlsdGVyL0ZsYXRlRGVjb2RlL0lEWzw0REM5MUExODc1QTZENzA3QUVDMjAzQkIwMjFDOTNBMD48RjZDOTJCMzY4QThBMTM0MDg0NTdBMUQzOTVBMzdFQjk+XS9JbmZvIDYgMCBSL0xlbmd0aCAzNy9Sb290IDggMCBSL1NpemUgNy9UeXBlL1hSZWYvV1sxIDIgMF0+PnN0cmVhbQ0KaN5iYmBgYGLkPcLEwD+ViYGhh4mBkYWJ8bEkkM0IEGAAKlkDFA0KZW5kc3RyZWFtDWVuZG9iag1zdGFydHhyZWYNCjExNg0KJSVFT0YNCg==");

    function getOutputScale() {
    var pixelRatio = 'devicePixelRatio' in window ? window.devicePixelRatio : 1;
    return {
      sx: pixelRatio,
      sy: pixelRatio,
      scaled: pixelRatio != 1
    };
  }

  window.myState = {
    pdfDoc: null,
    pageNum: 1,
    pageRendering: false,
    pageNumPending: null,
    scale: 1.2,
    canvas: null,
    ctx: null,
    textLayer: null,
  };
  myState.canvas = document.createElement("canvas");
  var $pdfContainer = document.querySelector("#pdfContainer");
  $pdfContainer.appendChild(myState.canvas);
  myState.ctx = myState.canvas.getContext('2d');

  // Create TextLayer Div
  var canvasOffset = myState.canvas.getBoundingClientRect();
  var $textLayerDiv = document.createElement("div");
  $textLayerDiv.classList.add("textLayer");
  $pdfContainer.append($textLayerDiv);
  myState.textLayer = $textLayerDiv;

  /**
   * Get page info from document, resize canvas accordingly, and render page.
   * @param num Page number.
   */
  function renderPage(num) {
    myState.pageRendering = true;
    // Using promise to fetch the page
    myState.pdfDoc.getPage(num).then(function(page) {
      var viewport = page.getViewport({scale: myState.scale});

      // The following few lines of code set up scaling on the ctx if we are on a HiDPI display
      var outputScale = getOutputScale();

      myState.canvas.width = Math.floor(viewport.width);
      myState.canvas.height = Math.floor(viewport.height);
      myState.canvas.style.width = Math.floor(viewport.width) + "px";
      myState.canvas.style.height = Math.floor(viewport.height) + "px";

      $textLayerDiv.style.width = Math.floor(viewport.width) + "px";
      $textLayerDiv.style.height = Math.floor(viewport.height) + "px";

      let canvasOffset = myState.canvas.getBoundingClientRect();
      $textLayerDiv.style.top = `${canvasOffset.top}px`;
      $textLayerDiv.style.left = `${canvasOffset.left}px`;

      const transform = outputScale !== 1 ? [outputScale, 0, 0, outputScale, 0, 0] : null;

      // Render PDF page into canvas context
      var renderContext = {
          canvasContext: myState.ctx,
          viewport: viewport,
          transform: transform,
      };

      var renderTask = page.render(renderContext);

      renderTask.promise.then(() => {
        myState.pageRendering = false;
        if (myState.pageNumPending !== null) {
          // New page rendering is pending
          renderPage(myState.pageNumPending);
          myState.pageNumPending = null;
        }

        return page.getTextContent().then((textContent) => {      
          var textLayer =  pdfjsLib.renderTextLayer({
            textContent: textContent,
            container: $textLayerDiv,
            viewport: viewport
          });
          textLayer._render();

        });
      });
    });

    // Update page counters
    // document.getElementById('page_num').textContent = num;
  }

  /**
   * If another page rendering in progress, waits until the rendering is
   * finised. Otherwise, executes rendering immediately.
   */
  function queueRenderPage(num) {
    if (myState.pageRendering) {
      myState.pageNumPending = num;
    } else {
      renderPage(num);
    }
  }

  /**
   * Displays previous page.
   */
  function onPrevPage() {
    if (myState.pageNum <= 1) {
      return;
    }
    myState.pageNum--;
    queueRenderPage(myState.pageNum);
  }
  /**
   * Displays next page.
   */
  function onNextPage() {
    if (myState.pageNum >= myState.pdfDoc.numPages) {
      return;
    }
    myState.pageNum++;
    queueRenderPage(myState.pageNum);
  }
  // document.getElementById('next').addEventListener('click', onNextPage);
  // document.getElementById('prev').addEventListener('click', onPrevPage);

  let urlPDF = "https://www.soundczech.cz/temp/lorem-ipsum.pdf"
  /**
   * Asynchronously downloads PDF.
   */
  pdfjsLib.getDocument({data: pdfBase64}).promise.then(function(pdfDoc_) {
    myState.pdfDoc = pdfDoc_;
    // document.getElementById('page_count').textContent = pdfDoc.numPages;

    // Initial/first page rendering
    renderPage(myState.pageNum);
  });

  // Text Higlihter
  function getSelectionCoords() {
    let pageIndex = myState.pageNum;
    let selectedPromise = myState.pdfDoc.getPage(pageIndex).then((_page) => {
      let pageRect = myState.canvas.getClientRects()[0];
      let selectionRects = window.getSelection().getRangeAt(0).getClientRects();
      let viewport = _page.getViewport({scale: myState.scale});
      let selectionRectsList = Object.values(selectionRects);

      let selected = selectionRectsList.map(function (r) {
        return viewport.convertToPdfPoint(r.left - pageRect.x, r.top - pageRect.y).concat(
           viewport.convertToPdfPoint(r.right - pageRect.x, r.bottom - pageRect.y)); 
      });
      return selected;
    });

    return {pageIndex: pageIndex, coordsPromise: selectedPromise};
  }

  function showHighlight() {
      var {pageIndex, coordsPromise} = getSelectionCoords();
      myState.pdfDoc.getPage(pageIndex).then((page) => {
        var viewport = page.getViewport({scale: myState.scale});;
        coordsPromise.then((coords) => {
          let highlightColor = generateColor();

          coords.forEach(function (rect) {
            let bounds = viewport.convertToViewportRectangle(rect);

            var x1 = Math.min(bounds[0], bounds[2]);
            var y1 = Math.min(bounds[1], bounds[3]);
            var width =  Math.abs(bounds[0] - bounds[2]);
            var hight = Math.abs(bounds[1] - bounds[3]);

            var el = createRectDiv([x1, y1, width, hight], highlightColor);
            myState.textLayer.appendChild(el);
          });
        });
      });
  }

  const generateColor = () => {
    return Math.floor(Math.random()*16777215).toString(16);
  }
  function createRectDiv(boundBox, highlightColor){
      // console.log(randomColor);
      var el = document.createElement('div');
      el.setAttribute('class', 'hiDiv')
      el.setAttribute('style', 'position: absolute; background-color: #'+highlightColor+'; opacity: 0.5;' + 
      'left:' + boundBox[0] + 'px; top:' + boundBox[1] + 'px;' +
      'width:' + boundBox[2] + 'px; height:' + boundBox[3] + 'px;');
      return el;
  }

  window.addEventListener('mouseup', function() {
    var length = window.getSelection().toString().length;
    if(length > 0){
        showHighlight();
    }else {
        // Clear All ?!
    }
    console.log();
  });
};
```

```
#pdfContainer {
  display: flex;
  justify-content: center;
}
```

```
<link href="https://mozilla.github.io/pdf.js/web/viewer.css" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>

<div id="pdfContainer" class="pdf-content"></div>
```

# jquery - JQuery SimpleDialog2关闭事件？

> ID：11438244
> 
> 赞同：0
> 
> 时间：2012-07-11T17:34:57.310
> 
> 标签：jquery, jquery-plugins

如何捕获 SimpleDialog2 插件的关闭事件？换句话说，如果用户点击对话框上的 X，我怎样才能触发一个函数？（如下所示，我将 headerClose 属性设置为 true。）

```
$(document).simpledialog2({
    mode: 'blank',
    headerText: 'Change Status',
    headerClose: true,
    ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:41:24.157

用于`callbackClose: function () {....`此

# xcode - UIImageView 和 CoreAnimation 的性能

> ID：11438255
> 
> 赞同：1
> 
> 时间：2012-07-11T17:35:29.267
> 
> 标签：xcode, ipad, animation, uiimageview, caanimation

我正在开发非常简单的游戏。一切正常。我只对性能和内存有疑问。我正在从左到右移动鸟。这只鸟在 3 个位置挥动翅膀。

关于速度，性能，内存有什么更好的解决方案：

1.  动画 uiview 改变 3 张完整的图片，鸟和翅膀在不同的位置
2.  使用 CALayer 动画创建鸟背景和动画单翼图像

感谢您的回复:) 亚历克斯

更新：更复杂的动画呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:11:26.733

Since you have only 3 images (as described in your question), you can go with simpler `UIView` animation approach.

But, using `CoreAnimation` will give you better performance.

When using 3 different images, instead of changing pictures and animating views, you can use animation property of `UIImageView` itself.

Say `image01.png`, `image02.png` and `image03.png` are your images.

```
 UIImageView *animationImgView = [[UIImageView alloc] init];
    NSArray *animationImages = [NSArray arrayWithObjects:
                                        [UIImage imageNamed:@"image01.png"],
                                        [UIImage imageNamed:@"image02.png"],
                                        [UIImage imageNamed:@"image03.png"],
                                        nil];
    [animationImgView setAnimationImages:animationImages];   // Add images to imageView for animation.
    [animationImgView setAnimationRepeatCount:0];           // Repeat forever.
    [animationImgView startAnimating];                     // ImageView starts animating. 
```

Then animate position of `UIImageView`

# java - Java 泛型类型推断

> ID：11438264
> 
> 赞同：4
> 
> 时间：2012-07-11T17:36:07.967
> 
> 标签：java, generics, wildcard, type-inference

我试图通过

`Map<String, Map<String, List<TranslationImport>>> variable`

到期望的超类构造函数：

```
Map<String, Map<String, List>> 
```

我尝试更改父类的构造函数以期望

```
Map<String, Map<String, List<?>>> 
```

和

```
Map<String, Map<String, ? extends List>> 
```

无济于事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T18:38:02.227

如果我理解正确，您可以更改超类构造函数签名；您只需要接受`List`元素类型的任意值的东西吗？

应该是这样`Map<String, ? extends Map<String, ? extends List<?>>>`的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:44:08.323

也许这会“帮助”一点

```
static void test(Map<String, Map<String, List>> m) {
    System.out.println(m);
}
public static void main(String[] args) {
    Map<String, Map<String, List<TranslationImport>>> variable = new HashMap<String, Map<String, List<TranslationImport>>>();
    Map<String, Map<String, List>> m2=(Map)variable;
    test(m2);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T18:37:50.367

问题是捕获转换没有递归应用：

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.10](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.10)

所以 '？' 在嵌套 < > 内被忽略以进行捕获转换

使您的代码正常工作的一种方法（尽管从从泛型获得任何价值的角度来看并不完全令人满意）是执行以下操作：

```
import java.util.List;
import java.util.ArrayList;
import java.util.Map;
import java.util.HashMap;

public class Foo extends FooParent {
    Foo(Map<String, Map<String, List<TranslationImport>>> variable) {
        super(variable);
        System.out.println("ok");
    }
    public static void main(String[] args) {
        Map<String, Map<String, List<TranslationImport>>> var =
            new HashMap<String, Map<String, List<TranslationImport>>>();
        Foo foo = new Foo(var);
    }
}

class FooParent {
    FooParent(Map<String, ?> variable) {
        System.out.println("FooParent constructor");
    }
}

class TranslationImport {
} 
```

# ruby - 我的 Ruby on Rails 代码看起来很乱，我想自动清理它

> ID：11438267
> 
> 赞同：0
> 
> 时间：2012-07-11T17:36:14.247
> 
> 标签：ruby, ruby-on-rails-3

我们中的一些人从事 Ruby on Rails 项目。我们有大约 10K 行代码。我们现在遇到的主要问题之一是，在某些地方，代码看起来非常混乱。有时，我们中的一些人使用 Emacs 时没有将制表符设置为 2 个空格。在其他时候，我们有来自实习生等的代码，只是没有正确缩进。

基本上，我有一些非常难看的代码——在 .rb 文件和 .html.erb 文件中。我想尽可能容易地自动缩进这些。

我知道有一些工具可以为 C++ 提供便利，但我似乎找不到可以为 RoR 完成这项工作的工具。

如果我不是很清楚，我只想清理我的代码的格式/缩进：

```
<% if @test %>
<div class = "test">hello</div>
<% else %>
<div class = "boo">foo</div>
<% end %> 
```

变成

```
<% if @test %>
  <div class = "test">hello</div>
<% else %>
  <div class = "boo">foo</div>
<% end %> 
```

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:44:19.083

如果你只关心缩进，那么 emacs 做得很好

```
C-x h C-M-\ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:54:25.317

我找到了一些可能相关的工具 - 如果有人使用过这些工具，请告诉我！

用于 ERB 清理：[http ://coderack.org/users/webficient/middlewares/38-racktidy](http://coderack.org/users/webficient/middlewares/38-racktidy)

红宝石清理：[http ://www.arachnoid.com/ruby/rubyBeautifier.html](http://www.arachnoid.com/ruby/rubyBeautifier.html)

# scala - Scala 案例类的更新操作

> ID：11438277
> 
> 赞同：12
> 
> 时间：2012-07-11T17:37:08.933
> 
> 标签：scala, scalaz

我有两个相同类型的实例化案例类。

```
case class Foo(x : Option[String], y : Option[String], z : Option[String]) 
```

让我们调用实例化的类 A 和 B。

```
val a = Foo(x=Some("foo"), y=Some("bar"), z=Some("baz"))
val b = Foo(x=None, y=Some("etch"), z=None) 
```

我想知道是否有可能以通用方式在单个操作中用 B 更新案例类 A。

```
val c = b *oper* a // produces Foo(x=Some("foo"), y=Some("etch"), z=Some("baz")) 
```

忽略设置为 None 的参数。理想情况下，操作也应该是通用的，因此它可以作用于任何类型的案例类。

我有一些直觉，可以通过首先将类转换为元组/列表并在操作完成后转换回类来使用 Scalaz 执行此操作 - 也许使用 ApplicativeBuilder？我是否以正确的方式考虑这个问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-11T18:28:49.303

## 相当简单的 Scalaz 解决方案（不是很通用）

您可以使用 semigroup 实例来包装很多细节：

```
import scalaz._, Scalaz._

case class Foo(a: Option[String], b: Option[String], c: Option[String])

implicit object fooSemigroup extends Semigroup[Foo] {
  def fromFoo(f: Foo) = (f.a.fst, f.b.fst, f.c.fst)
  def toFoo(t: (FirstOption[String], FirstOption[String], FirstOption[String])) =
    Foo(t._1.value, t._2.value, t._3.value)
  def append(x: Foo, y: => Foo) = toFoo(fromFoo(x) |+| fromFoo(y))
} 
```

这给了我们：

```
scala> val a = Foo(Some("foo"), Some("bar"), Some("baz"))
a: Foo = Foo(Some(foo),Some(bar),Some(baz))

scala> val b = Foo(None, Some("etch"), None)
b: Foo = Foo(None,Some(etch),None)

scala> b |+| a
res11: Foo = Foo(Some(foo),Some(etch),Some(baz)) 
```

我认为这是您想要的，尽管它不是很笼统。

* * *

## Scalaz + Shapeless 解决方案

如果您想要适用于所有案例类的东西（给定成员的适当类型类实例），您可以使用[Shapeless](https://github.com/milessabin/shapeless/)和 Scalaz 的以下组合。请注意，我正在利用[missingfactor 的答案](https://stackoverflow.com/a/11446109/334519)和Miles Sabin 的[这个例子](https://github.com/milessabin/shapeless/blob/master/examples/src/main/scala/shapeless/examples/monoids.scala)。首先对于一些幺半群实例：

```
import scalaz._, Scalaz._
import shapeless._, HList._

implicit object hnilMonoid extends Monoid[HNil] {
  val zero = HNil
  def append(a: HNil, b: => HNil) = HNil
}

implicit def hlistMonoid[H, T <: HList](
  implicit mh: Monoid[H],
  mt: Monoid[T]
): Monoid[H :: T] = new Monoid[H :: T] {
  val zero = mh.zero :: mt.zero
  def append(a: H :: T, b: => H :: T) =
    (a.head |+| b.head) :: (a.tail |+| b.tail)
}

implicit def caseClassMonoid[C, L <: HList](
  implicit iso: Iso[C, L],
  ml: Monoid[L]
) = new Monoid[C] {
  val zero = iso.from(ml.zero)
  def append(a: C, b: => C) = iso.from(iso.to(a) |+| iso.to(b))
} 
```

接下来为了简单起见，我只是将“第一个”幺半群实例`Option`放在范围内，而不是`FirstOption`像上面那样使用包装器。

```
implicit def optionFirstMonoid[A] = new Monoid[Option[A]] {
  val zero = None
  def append(a: Option[A], b: => Option[A]) = a orElse b
} 
```

现在对于我们的案例类：

```
case class Foo(a: Option[String], b: Option[String], c: Option[String]) 
```

`Iso`以及将其转换为和返回的实例`HList`：

```
implicit def fooIso = Iso.hlist(Foo.apply _, Foo.unapply _) 
```

我们完成了：

```
scala> val a = Foo(Some("foo"), Some("bar"), Some("baz"))
a: Foo = Foo(Some(foo),Some(bar),Some(baz))

scala> val b = Foo(None, Some("etch"), None)
b: Foo = Foo(None,Some(etch),None)

scala> b |+| a
res0: Foo = Foo(Some(foo),Some(etch),Some(baz)) 
```

您也可以在这里使用半群而不是幺半群并节省几行，但我试图尽可能多地从`shapeless/examples`代码中复制和粘贴，所以我将把它留作练习。

* * *

## 表现

为了解决您对性能的评论，这是后一种解决方案与使用`orElse`（Scala 2.9.2，IcedTea7 2.2.1）的标准库解决方案的完全不科学的基准：

```
def add(x: Foo, y: Foo) = Foo(x.a orElse y.a, x.b orElse y.b, x.c orElse y.c)

def ros = if (util.Random.nextBoolean)
  Some(util.Random.nextString(util.Random.nextInt(10))) else None

val foos = Seq.fill(500000)(Foo(ros, ros, ros))

def time(block: => Unit) = {
  val start = System.currentTimeMillis
  (block, System.currentTimeMillis - start)
} 
```

然后在每个运行几十次之后：

```
scala> Iterator.fill(10)(time(foos.reduce(add(_, _)))._2).sum / 10
res4: Long = 49

scala> Iterator.fill(10)(time(foos.reduce(_ |+| _))._2).sum / 10
res5: Long = 265 
```

有点令人惊讶的是，Shapeless-less Scalaz 解决方案有点慢：

```
scala> Iterator.fill(10)(time(foos.reduce(_.|+|(_)(fooSemigroup)))._2).sum / 10
res6: Long = 311 
```

但正如我所说，这是一种非常即兴的基准测试方法，您应该自己运行（[Caliper](http://code.google.com/p/caliper/)是一个很好的库）。

无论如何，是的，您为抽象付出了代价，但不是那么多，而且通常可能是值得的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-12T06:26:13.307

正如在[这个线程](https://stackoverflow.com/questions/11442440/unable-to-map-on-hlist)中所讨论的，这就是你如何以完全类型安全的方式解决[shapeless的问题。](https://github.com/milessabin/shapeless/)

```
scala> import shapeless._
import shapeless._

scala> import HList._
import HList._

scala> case class Foo(a: Option[Int], b: Option[Int])
defined class Foo

scala> val a = Foo(Some(3), None)
a: Foo = Foo(Some(3),None)

scala> val b = Foo(Some(22), Some(1))
b: Foo = Foo(Some(22),Some(1))

scala> implicit val fooIso = HListIso(Foo.apply _, Foo.unapply _)
fooIso: shapeless.HListIso[Foo,shapeless.::[Option[Int],shapeless.::[Option[Int],shapeless.HNil]]] = shapeless.HListIso@11c5b77

scala> type O2[+A] = (Option[A], Option[A])
defined type alias O2

scala> object mapper extends (O2 ~> Option) {
     |   def apply[A](x: O2[A]): Option[A] = x._1.orElse(x._2)
     | }
defined module mapper

scala> fooIso.fromHList(fooIso.toHList(a).zip(fooIso.toHList(b)).map(mapper))
res13: Foo = Foo(Some(3),Some(1)) 
```

# solr - 从 solr 导出一系列文档，包括索引数据和存储数据

> ID：11438285
> 
> 赞同：0
> 
> 时间：2012-07-11T17:37:23.587
> 
> 标签：solr

我有几个 solr 实例，一个有 400 万个文档，一个有 800 万个文档，我想拆分并迁移到新的 solr 环境。我想导出一系列文档，以便最终我可以拥有一组实例，每个实例包含大约 100 万个文档。我读过关于简单地复制索引文件并查看了像[卢克](https://code.google.com/p/luke/downloads/list)这样的工具，但第一个选项迫使我复制所有内容，而第二个选项提供了一个范围选项，它只输出我存储的字段而不是我索引的字段。

是否有任何工具可以让我导出一系列完整的文档，然后我可以将它们导入另一个 solr 实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:47:58.267

这是将 Solr 索引[拆分为两半](https://stackoverflow.com/questions/2865960/splitting-lucene-index-into-two-halves)的常用方法。如果有一个均匀分布的逻辑键（如日期范围等），我已经做了几次并且非常容易。

有一个 Lucene 索引[拆分工具](http://lucene.472066.n3.nabble.com/Index-Splitter-td480905.html)。我自己没有用过这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:48:34.400

为了只是“导出”，您可以使用[CSVResponseWriter](http://wiki.apache.org/solr/CSVResponseWriter/)到 csv 中，稍后您可以在另一个实例中建立索引，但它显然不会包含未存储的字段。

但是，如果您希望将索引划分为较小的索引，请查看[IndexSplitter ，请参阅](https://issues.apache.org/jira/browse/LUCENE-1959)[此问题中的](https://stackoverflow.com/questions/11268187/partitioning-a-current-solr-index-into-shards/11268325#11268325)更多信息

# c++ - c++ / openFrameworks - 如何包含一个类

> ID：11438289
> 
> 赞同：0
> 
> 时间：2012-07-11T17:37:33.720
> 
> 标签：c++, class, openframeworks

我对 openFrameworks 和 c++ 很陌生。我正在用 xcode 编译一个不起作用的开源项目，我想使用以下类来尝试调试似乎是路径问题的问题：

[http://www.openframeworks.cc/documentation/utils/ofDirectory.html](http://www.openframeworks.cc/documentation/utils/ofDirectory.html)

但是，我不确定如何包含这个类，或者在哪里插入我的代码。基本上我只想找出 openFrameworks 认为我的当前目录在哪里，对于初学者来说。喜欢：

```
string path = "."; 
ofDirectory dir(path); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:04:56.300

如果您有一个包含目录类的头文件的副本，即“ofDirectory.h”，您可以将它包含在您的.cpp 文件的顶部，这样`#include "ofDirectory.h"`您就可以使用与它相关的功能。ofDirectory.h 必须与您的 .cpp 文件位于同一文件夹中，否则您还必须提供它的路径

# vim - CtrlP 加载时出现的递增数字是什么？

> ID：11438291
> 
> 赞同：2
> 
> 时间：2012-07-11T17:37:36.163
> 
> 标签：vim, plugins, macvim

我注意到 CtrlP 在文件加载后或拉出新缓冲区时一直很慢。每次我得到它都会发生

```
<incrementing numbers> (press ctrl-c to abort) 
```

信息。这是 CtrlP 慢时的[屏幕截图。](http://cl.ly/461u2t350p0D1A0u0D22)一旦加载`prt path <mru>={ ... etc`零件，它就可以闪电般快速地工作。

我正在使用带有 Janus 的相当未经修改的 MacVim 版本。我只是好奇那里发生了什么。我会假设这些数字是 CtrlP 正在索引的文件目录。它是否在每个窗口/缓冲区重新索引？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T18:51:02.600

这是索引的文件数。每次`:CtrlP`在“未缓存”目录中运行时都会重建索引。

你不应该`:CtrlP`在你的主目录中这样做，因为它肯定会非常大：索引它会花费很多时间并且在大多数情况下是无用的。

阅读有关如何设置缓存选项的文档：`:help ctrlp-options`.

```
let g:ctrlp_clear_cache_on_exit=0 
```

是一个好的开始。

# deployment - 部署的 .war 文件未在 Weblogic Server 中打开

> ID：11438298
> 
> 赞同：1
> 
> 时间：2012-07-11T17:37:57.563
> 
> 标签：deployment, web, weblogic, war

我在 Weblogic Server 上部署了一个简单的 Web 应用程序（.war 文件）。该应用程序由一个简单的 servlet 组成。我使用命令“jar cf ../mywebapp.war *”创建了 .war 文件。.war 文件部署得很好，但是当我尝试访问 servlet“localhost:7001/mywebapp”时，它给出了“错误 403--Forbidden”。

有什么答案吗？如果问题太模糊，我深表歉意。我是 Web 应用程序开发的新手。

谢谢，

# java - Eclipse Autocomplete（百分号，在 Juno 中）

> ID：11438307
> 
> 赞同：140
> 
> 时间：2012-07-11T17:38:33.557
> 
> 标签：java, eclipse, eclipse-juno

在使用旧版本多年后，我几天前开始使用 Eclipse Juno。

有一件事真的让我很困扰：自动完成框中方法旁边的百分比是什么意思？

![自动完成框中百分比的屏幕截图](../Images/a486efe6b7cccda033b21ec0d24e15e8.png)

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-07-11T17:57:16.080

该百分比表示[**Eclipse Code Recommenders**](http://www.eclipse.org/recommenders/)（自 2019 年 7 月以来的存档项目）认为您正在寻找基于上下文的特定完成，可能还有先前的使用和其他变量（有“5 个智能代码完成引擎”）。它不仅是裸露的使用情况统计信息。因此，某些行之间的值可能会从 13% 变为 95%，具体取决于您在两者之间所做的事情。

有关详细信息，请参阅[文档](http://www.eclipse.org/recommenders/documentation/usr.html#d0e32)（自 2019 年 7 月以来的存档项目）：

> 它通过仅向他推荐与他手头的任务实际相关的方法来帮助开发人员。例如，假设开发人员刚刚创建了一个文本小部件，代码推荐器就可以清楚地知道开发人员接下来要使用哪些方法——即使开发人员自己不知道。

现在存档项目的下载可以在这里找到：http: [//archive.eclipse.org/archived_projects/recommenders.tgz](http://archive.eclipse.org/archived_projects/recommenders.tgz)

# jsp - 显示标签中的“未找到可显示的内容”错误

> ID：11438311
> 
> 赞同：0
> 
> 时间：2012-07-11T17:38:41.803
> 
> 标签：jsp, servlets, struts, displaytag

`display-tag`以下是我使用in显示行的代码，`struts 1.3`但它始终显示：`Nothing found to display`. 我已经检查`ResultSet`并`ArrayList`反对，它们都包含数据。

```
<display:table export="true" id="data"
            name="sessionScope.MultipleStudentsDAO.studentList"
            requestURI="/mssrv.do" pagesize="5">

            <display:column property="rollNo" title="ROLL NO" sortable="true" />
            <display:column property="name" title="NAME" sortable="true" />
            <display:column property="branch" title="BRANCH" sortable="false" />

</display:table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:56:39.080

`sessionScope.MultipleStudentsDAO.studentList`在`name`属性中使用，`display:table`将在 中查找被调用`session`的对象`MultipleStudentsDAO`，然后调用其`studentList`属性。为此，您应该在 Java 代码中执行以下操作：

```
MultipleStudentsDAO yourVariableOfTypeMultipleStudentsDAO = ...
session.setAttribute("MultipleStudentsDAO", yourVariableOfTypeMultipleStudentsDAO); 
```

请注意，这`MultipleStudentsDAO`是我赋予`session`属性的名称，而不一定是类的名称（尽管在这种情况下它们恰好是相同的，以使您的 JSP 代码工作）。

顺便说一句，我建议不要将属性存储在 中，`session`除非有特殊原因需要 - 将其放在请求中，例如：

```
MultipleStudentsDAO multipleStudentDAO = ... 
request.setAttribute("studentDAO", multipleStudentDAO); 
```

然后，您无需在标签中指定范围，只需执行以下操作：

```
<display:table export="true" id="data"
        name="studentDAO.studentList"
        requestURI="/mssrv.do" pagesize="5"> 
```

# ruby-on-rails - 使用 Javascript 更新 rails 部分

> ID：11438312
> 
> 赞同：0
> 
> 时间：2012-07-11T17:38:42.953
> 
> 标签：ruby-on-rails, partial-views

我目前有两个 div，一个包含搜索栏，一个包含部分，例如：

```
<div class="search_div">
    <%= form_tag(barpage_outings_path, :method => :get, :id => 'bars_search_form', :remote => true ) do %>
        <div id="user_search" class="in-field">
            <%= text_field_tag('search', '', :id => 'search_field') %>
            <%= label_tag 'search_field', 'Search For Locations' %>
            <%= submit_tag "", :id => "search_button" %> 
        </div>
    <% end %>
</div>

<div id="bar_partial">
    <%= render(:partial => "bar_results") %>
</div> 
```

它在页面加载时呈现部分内容，但我希望它在每次搜索提交后刷新部分内容。

我将表单绑定到 AJAX 调用，如下所示：

```
$('#bars_search_form').bind('ajax:success', function(){

   $('#bar_partial').html("<%= escape_javascript(render(:partial => 'bar_results')).html_safe %>");

}); 
```

问题是，它不是刷新部分，而是将我的转义 javascript 命令输出为纯文本。谁能看到我做错了什么（或者即使我以完全错误的方式去做这件事？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:08:49.040

请尝试这种方式：

[https://gist.github.com/2230354](https://gist.github.com/2230354)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:43:52.527

怎样做一个新的动作来呈现你的结果？我认为这是解决您问题的更好方法。

# pdf-generation - 我们可以将 PDF4Net 与包含数据子表的 PDF 表单一起使用吗？

> ID：11438314
> 
> 赞同：-1
> 
> 时间：2012-07-11T17:38:48.937
> 
> 标签：pdf-generation

我们目前在我们的服务器上使用 PDF4NET 来生成动态 pdf。

我们需要动态 PDF，其中包含许多一次性使用字段，以及嵌套在较大表单中的部件表，其中包含相同数量的字段（部件号、CSID、修订等）动态次数（1-1000行）。

我们是否可以使用在 Designer 中创建并使用 PDF4NET 填充的 PDF 表单来执行此操作，或者我们是否需要查看其他操作过程？

编辑添加：我不是要实现此功能的开发人员，而且我没有直接实现此功能的方法。我自己不使用该组件，因此我不熟悉它的功能，也没有机会尝试一下，看看会发生什么。至于联系他们的支持台 - 我通常发现 SO 是一个更快的信息来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:28:13.033

PDF4NET 无法填写动态 Adob​​e Designer 表单。
免责声明：我为开发 PDF4NET 的公司工作。

# c# - 使用 LINQ 查询 n:m 关系

> ID：11438316
> 
> 赞同：2
> 
> 时间：2012-07-11T17:38:53.963
> 
> 标签：c#, sql-server, linq, entity-framework-4.3

我得到了与这三个表的：m-Relationship：

![数据库模型](../Images/4f4789f947eb35ef5d53381029edb68f.png)

现在我想查询所有附加`Activities`了选定列表的。`Characteristics`

我的查询：

```
e.QueryableSource = _dataContext.Activities.Where(ac => 
                ac.UserId == _userId && 
                ac.ResubmissionDate <= EntityFunctions.TruncateTime(_to) && 
                ac.Priority <= (int)_prio && 
                ac.CompletedDate == null && 
                ac.Characteristics.Contains(CharacFilter)); 
```

可悲的是，这不起作用，正如`ac.Characteristics.Contains()`预期的那样 type`ActivityCharacteristics`的项目，而不是`Characteristic`

我怎样才能做到这一点？

侧节点：我不想要排他过滤，比如当我在 中指定三个特征时`CharacFilter`，我想查询可能附加了这三个特征之一（不一定全部）的每个活动。

编辑： `CharacFilter`它`private IEnumerable<int> CharacFilter { get; set; }` 是从我选择这些特征并将它们保存在 View-Variable 的视图中填充的`public List<Characteristic> SelectedCharacteristics { get; set; }`

我的任务：

```
 var view = new AssignCharacteristicsView();
        view.ShowDialog();

        if (view.SelectedCharacteristics != null)
        {
            CharacFilter = view.SelectedCharacteristics.Select(cf => cf.Id);
        } 
```

`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T18:54:55.287

如果`CharacFilter`是`IEnumerable<Characteristics>`，您可以尝试：

```
IEnumerable<int> charaFilters = CharacFilter.Select(cf => cf.Id);

e.QueryableSource = _dataContext.Activities.Where(ac => 
    ac.UserId == _userId && 
    ac.ResubmissionDate <= EntityFunctions.TruncateTime(_to) && 
    ac.Priority <= (int)_prio && 
    ac.CompletedDate == null &&
    ac.Characteristics.Any(acc => characFilters.Contains(acc.CharacteristicId))); 
```

（`acc`是类型`ActivityCharacteristics`。）

并且`Activity.Characteristics`应该真正具有您在实体`Activity.ActivityCharacteristics`中命名的名称。`Characteristics`否则很混乱。

**编辑**

关于你的例外

> 无法创建类型为“System.Collections.Generic.IEnumerable´1”的常量值

如果`CharacFilter`是`null`，您确实会收到此异常，因为`null`它是 EF 无法创建的常量值。它不会抛出 a`NullReferenceException`因为您`CharacFilter`在表达式中使用。根据您在问题中编辑的代码`CharacFilter`可能是`null`if `view.SelectedCharacteristics`is `null`。

要解决问题，您必须`null`根据应用程序中是否`view.SelectedCharacteristics == null`表示*所有*特征或*没有*特征来捕捉案例。如果这意味着*没有*，我建议实例化一个空列表：

```
if (view.SelectedCharacteristics != null)
{
    CharacFilter = view.SelectedCharacteristics.Select(cf => cf.Id);
}
else
{
    CharacFilter = new List<int>();
} 
```

如果这意味着您可以尝试*所有特征：*

```
// ...
ac.Characteristics.Any(acc => (characFilters != null
    ? characFilters.Contains(acc.CharacteristicId)
    : true))); 
```

**编辑 2**

最后一个选项抛出相同的异常（这并不奇怪，因为必须再次创建`CharacFilter`与常量值进行比较）。`null`替代方案（只需省略最后一个`Where`子句 if `CharacFilter`is `null`）：

```
ObjectQuery<Activity> query = _dataContext.Activities.Where(ac => 
    ac.UserId == _userId && 
    ac.ResubmissionDate <= EntityFunctions.TruncateTime(_to) && 
    ac.Priority <= (int)_prio && 
    ac.CompletedDate == null);

if (characFilters != null)
{
    query = query.Where(ac => ac.Characteristics
                     .Any(acc => characFilters.Contains(acc.CharacteristicId)));
}

e.QueryableSource = query; 
```

# c# - webconfig maxRequestLength 中的属性是如何测量的

> ID：11438317
> 
> 赞同：26
> 
> 时间：2012-07-11T17:38:55.150
> 
> 标签：c#, asp.net, web-config

我想增加这个值

```
 <httpRuntime maxRequestLength="2024000" executionTimeout="300"/> 
```

但我不确定它是如何衡量的，MB，KB？没有把握。我希望能够接受最大 50 MB 的请求。

问候

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-11T17:40:17.480

属性*maxRequestLength*表示 ASP.NET 支持的最大文件上传大小。此限制可用于防止因用户向服务器发布大文件而导致的拒绝服务攻击。指定的大小以千字节为单位。默认值为 4096 KB (4 MB)。[MSDN](http://msdn.microsoft.com/en-us/library/e1f13641(v=vs.71).aspx)

对于 50 MB，您需要将其设置为 51200。

```
<httpRuntime maxRequestLength="51200" executionTimeout="300"/> 
```

**根据评论**编辑****

 **OP 没有询问 executionTimeout 但@barnes 在下面的评论中询问。`executionTimeout`我觉得还要添加一些关于其他`httpRuntime`属性的细节。

[执行超时](https://msdn.microsoft.com/en-IN/library/e1f13641(v=vs.85).aspx)：

> 可选的时间跨度属性。指定请求在被 ASP.NET 自动关闭之前允许执行的最大秒数。此超时仅在编译元素中的调试属性为 False 时适用。为帮助防止在调试时关闭应用程序，请不要将此超时设置为较大的值。默认值为“00:01:50”（110 秒），[MSDN](https://msdn.microsoft.com/en-IN/library/e1f13641(v=vs.85).aspx)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T17:49:11.317

它接受知识库。对于 50 MB，将其设置为

```
maxRequestLength="51200" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-04-05T06:11:16.093

`maxRequestLength`以千字节为单位

`maxAllowedContentLength`以字节为单位**

# sql-server - 用主键创建视图？

> ID：11438319
> 
> 赞同：32
> 
> 时间：2012-07-11T17:39:09.213
> 
> 标签：sql-server, tsql, primary-key, sql-view

我用以下代码创建了一个视图

```
SELECT
    CONVERT(NVARCHAR, YEAR(okuma_tarihi)) + 'T1' AS sno,
    YEAR(okuma_tarihi) AS Yillar,
    SUM(toplam_kullanim_T1) AS TotalUsageValue, 'T1' AS UsageType
FROM
    TblSayacOkumalari
GROUP BY
    CONVERT(NVARCHAR, YEAR(okuma_tarihi)) + 'T1', YEAR(okuma_tarihi)

UNION ALL

SELECT
    CONVERT(NVARCHAR, YEAR(okuma_tarihi)) + 'T2' AS sno,
    YEAR(okuma_tarihi) AS Yillar,
    SUM(toplam_kullanim_T2) AS TotalUsageValue, 'T2' AS UsageType
FROM
    TblSayacOkumalari
GROUP BY
    CONVERT(NVARCHAR, YEAR(okuma_tarihi)) + 'T1', YEAR(okuma_tarihi)

UNION ALL

SELECT
    CONVERT(NVARCHAR, YEAR(okuma_tarihi)) + 'T3' AS sno,
    YEAR(okuma_tarihi) AS Yillar,
    SUM(toplam_kullanim_T3) AS TotalUsageValue, 'T3' AS UsageType
FROM
    TblSayacOkumalari
GROUP BY
    CONVERT(NVARCHAR, YEAR(okuma_tarihi)) + 'T1', YEAR(okuma_tarihi) 
```

我想定义`CONVERT(nvarchar, YEAR(okuma_tarihi)) + 'T1' AS sno`为主键可以吗？如果这可能我该怎么办？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-11T17:55:30.303

您不能在视图上创建主键。在 SQL Server 中，您可以[在视图上](http://msdn.microsoft.com/en-us/library/ms191432.aspx)[创建*索引*](http://msdn.microsoft.com/en-us/library/ms191432.aspx)，但这与创建主键不同。

如果您向我们提供更多信息，说明您为什么想要在您的视图中使用密钥，也许我们可以提供帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-31T03:50:29.163

您可能无法创建主键（例如），但如果您的视图基于具有主键的表并且该键包含在视图中，那么主键也将反映在视图中。需要主键的应用程序可以像使用 Lightswitch 一样接受视图。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-02-11T14:55:53.213

这个聚会有点晚了——但这也很好用：

```
CREATE VIEW [ABC].[View_SomeDataUniqueKey]
AS
SELECT 
CAST(CONCAT(CAST([ID] AS VARCHAR(4)), 
        CAST(ROW_NUMBER() OVER(ORDER BY [ID] ASC) as VARCHAR(4)) 
        )  AS int) AS [UniqueId]
,[ID]
FROM SOME_TABLE JOIN SOME_OTHER_TABLE
GO 
```

在我的情况下，连接导致 [ID] - 主键最多重复 5 次（关联不同的唯一数据） 这个很好的技巧是可以从每个 UniqueID 有效地确定原始 ID [ID]+RowNumber() = 11, 12, 13, 14, 21, 22, 23, 24 等。如果将 RowNumber() 和 [ID] 添加回视图中 - 您可以轻松地从数据中确定原始键。但是 - 这不是应该提交给表的东西，因为我相当确定视图的 RowNumber() 永远不会与基础数据更改可靠地相同，即使使用 OVER(ORDER BY [ID] ASC)尝试帮助它。

示例输出（*从 [REF].[View_Systems] 中选择 UniqueId、ID、ROWNR、名称*）：

`UniqueId ID ROWNR Name 11 1 1 Amazon A 12 1 2 Amazon B 13 1 3 Amazon C 14 1 4 Amazon D 15 1 5 Amazon E`

表格1：

`[ID] [Name] 1 Amazon`

表2：

`[ID] [Version] 1 A 1 B 1 C 1 D 1 E`

```
CREATE VIEW [REF].[View_Systems]
AS    
SELECT 
CAST(CONCAT(CAST(TABA.[ID] AS VARCHAR(4)), 
        CAST(ROW_NUMBER() OVER(ORDER BY TABA.[ID] ASC) as VARCHAR(4)) 
        )  AS int) AS [UniqueId]
,TABA.[ID]
,ROW_NUMBER()  OVER(ORDER BY TABA.[ID] ASC) AS ROWNR
,TABA.[Name]  
FROM  [Ref].[Table1] TABA LEFT JOIN [Ref].[Table2] TABB ON TABA.[ID] = TABB.[ID]
GO 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-08T18:33:55.640

在 SQL Server 查询设计器中创建视图后，出现错误“表/视图 'dbo.vMyView' 没有定义主键”。我通过在列上使用 ISNULL 来强制实体框架将其用作主键来解决问题。您可能必须重新启动 Visual Studio 才能使警告消失。

```
CREATE VIEW [dbo].[vMyView]
AS
SELECT ISNULL(Id, -1) AS IdPrimaryKey, Name
FROM  dbo.MyTable 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-03T13:45:16.040

这对我有用..

选择 ROW_NUMBER() over (order by column_name_of your choice) 作为 pri_key，视图的其他列

# mysql - 在 phpmyadmin 中设置用户名和密码

> ID：11438323
> 
> 赞同：3
> 
> 时间：2012-07-11T17:39:29.070
> 
> 标签：mysql, phpmyadmin

我需要在 phpmyadmin 中为 mysql 设置用户名和密码。

我认为默认用户名是 root@localhost。

我不知道如何设置。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T17:45:25.327

“root”用户将在初始安装期间设置。如果你打开`config.default.php`文件你会看到

```
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = '********'; 
```

如果您不使用“cookie”验证，则可以更改此信息。像这样

```
$cfg['Servers'][$i]['auth_type'] = 'cookie'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:42:52.850

打开面板

转到 MySQL 数据库

查找**MySQL 用户**

“添加新用户”

请记住，用户名的格式为 domainname_username。

# shopify - 计费和 API

> ID：11438327
> 
> 赞同：1
> 
> 时间：2012-07-11T17:39:42.323
> 
> 标签：shopify, recurring-billing

我有数百家商店都通过 2 个渠道订阅了一个应用程序。经常性和一次性付款。似乎如果商店接受定期付款安装，则为商店分配定期收费条目。如果商家随后卸载应用程序并选择使用一次性费用重新安装，则商店和应用程序将同时存在费用，即使它们是从经常性费用中卸载的。

当商家卸载应用程序时，您能否向我保证，您确实删除了所有以前收费的痕迹。似乎不是，因为最近不止一个客户找到我告诉我，即使他们接受支付一次性费用，他们仍然会根据之前的安装提示支付经常性费用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:42:39.303

卸载应用程序后，所有相关的应用程序费用都将取消。

# logging - 如何限制 Apache 的 access_log 的大小，并限制它保留的归档日志的数量？

> ID：11438330
> 
> 赞同：26
> 
> 时间：2012-07-11T17:40:00.337
> 
> 标签：logging, apache

Apache 的 access_log 文件每隔几天就会转出大约 1GB 的存档副本。控制这个的设置在哪里？我希望能够控制它保留的最大大小和存档日志的数量。这是 apache 配置的一部分，还是我需要编写 cron 作业（等）来处理这个？我正在运行预分叉的 httpd。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-11T18:43:27.490

在大多数 Linux 发行版上，系统设置为每天运行**logrotate 。**您不会在 root 或任何特定用户的 crontab 中看到它。

很容易改变它处理日志文件的方式。在我的 Ubuntu 服务器上，该`/etc/logrotate.conf`文件具有如下设置：

```
# rotate log files weekly
weekly

# keep 4 weeks worth of backlogs
rotate 4

# create new (empty) log files after rotating old ones
create

# uncomment this if you want your log files compressed
#compress 
```

[ETC。]

而且，您可以查看目录`/etc/logrotate.d/`以查看特定目录和应用程序的设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-16T12:46:42.557

我会使用rotatelogs，一个位于apache bin 目录中的工具。

有关更多信息和示例，请参阅[http://httpd.apache.org/docs/current/programs/rotatelogs.html](http://httpd.apache.org/docs/current/programs/rotatelogs.html)。它具有存在于我的 HP-UX 系统上的优势。

或者如前所述，您可以使用大多数发行版附带的 logrotate 工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-06T22:23:55.717

other_vhosts_access.log 日志增长太快，我注释掉了 /etc/apache2/conf-available/other-vhosts-access-log.conf 中的 CustomLog 行，它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T17:48:12.920

惯用的方法是[`logrotate`](https://fedorahosted.org/logrotate/)从 cronjob 运行，它可以切片、切块、压缩、重命名、保留最后一个 n 以及大多数其他人可能想要的东西。（我认为现在大多数发行版都默认安装它。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-21T10:02:09.717

我需要控制每个虚拟主机的日志文件大小并最终得到它：

```
ErrorLog "|/usr/bin/rotatelogs /var/www/my-virtual-host.com/logs/error_log_%Y.%m.%d.log 10M" 
```

用于`which rotatelogs`查找可执行文件的路径。我的情况`/usr/bin/rotatelogs`不是| `bin/rotatelogs`如文档中所述。

[http://httpd.apache.org/docs/2.0/programs/rotatelogs.html](http://httpd.apache.org/docs/2.0/programs/rotatelogs.html)

显然rotatelogs 也可以应用于access_log（即CustomLog）。

# google-app-engine - 如何链接位于另一个文件夹的模块？

> ID：11438338
> 
> 赞同：0
> 
> 时间：2012-07-11T17:40:31.880
> 
> 标签：google-app-engine, yaml

我有以下文件夹结构：

```
bulkloader (dir)
  - bulkloader.yaml
  - upload_data.cmd
app.yaml
models.py 
```

我应该如何在 bulkloader.yaml 中引用 models.py？

```
- import: models 
```

不起作用。

# bash - 在 UNIX 中使用 awk 或 sed 进行文本解析。提取端口号

> ID：11438339
> 
> 赞同：2
> 
> 时间：2012-07-11T17:40:32.747
> 
> 标签：bash, unix, awk

我必须从进程状态（ps）命令中提取某个端口号，但我不太确定如何获取它。

例如，如果我有这一行（ps -ef | grep "blahblahblah"）：

```
xxremote -xcom.xx.management.xremote.port=9999 -xcom.xx.management.xxxremote.ssl=false 
```

如何提取数字“9999”？注意：这是很长的一行的一部分，我不能使用例如 awk 来计算“=”符号后面的字段数。= 符号的数量会改变。

我尝试使用 cut 命令，但我只知道如何将它与单字符分隔符一起使用，这不是我需要的。我在想也许 awk 或 sed 可以解决问题？我对他们不熟悉。非常感谢你的帮助

ps -ef | grep "blahblahblah" " | awk .... (或 sed)

**更新：**澄清需要从一行长文本中提取端口号，并且不需要使用 awk 命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:43:29.087

```
ps -ef | sed -n '/blahblahblah/s/^.*port=\([[:digit:]]\+) .*/\1/p' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:43:11.310

这将做到：

（**更新**为仅过滤包含数据的行，`xremote.port=`以防数据尚未过滤）

```
ps -elf | awk -F= '/xremote.port=/{print $2}' | awk '{print $1}' 
```

第一个`awk`命令将行拆分，`=`导致第二个字段为：

```
9999 -xcom.xx.management.xxxremote.ssl 
```

第二个`awk`命令获取第一个字段，即您的号码。

```
9999 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T19:39:45.740

必须使用 awk 吗？`sed`会是更好的选择...

那好吧...

```
ps -ef | awk '/blahblahblah/ {
    sub(".*port=", "")
    sub(" .*", "")
    print $0
}' 
```

awk 中的命令用字符串`sub(a, b)`替换正则表达式（在我的情况下恰好是空白。它需要 $0 代表返回的行。`a``b`

正如我所说，`sed`会更简单：

```
ps -ef | sed -n '/blahblahblah/s/^.*port=\([^ ]*\).*/\1/p' 
```

请注意，我`sed`用来选择行*blahblahblah*并进行替换。

# c++ - 非静态数据成员初始化器/调用 std::vector 的构造函数

> ID：11438341
> 
> 赞同：4
> 
> 时间：2012-07-11T17:40:47.603
> 
> 标签：c++, c++11

代码：

```
class A {
  std::vector<int> x = {2,3};                 // x[0] = 2 and x[1] = 3
  std::vector<int> y = std::vector<int>(2,3); // x[0] = 3 and x[1] = 3 Too verbose!!  
}; 
```

有没有一种方法可以调用`std::vector<int>`仅使用大括号初始化程序的构造函数，或者至少使用较短的版本来产生相同的效果？

我不想重复`std::vector<int>`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T17:54:02.947

## 有什么我可以使用的黑客吗？

如果您的唯一目标是不必*“明确”*指定类型两次，您可以使用它`decltype`来为您的任务提供一些帮助：

```
class Obj {
  std::vector<int> v1 = decltype(v1) (2,3);
}; 
```

还要记住`typedef`/`using`是不必输入¹的好方法：

```
struct Obj {
   using VInt = std::vector<int>;
// typedef std::vector<int> VInt;

   VInt v = VInt (3,2);
}; 
```

^(1.) [双关语不是故意的]

* * *

## 标准对此有何评论？

可悲的是，该标准对在您的班级主体中初始化成员进行了以下说明：

> ### 9.2/5 类成员 [class.mem]
> 
> 可以使用*大括号或相等初始化器*来初始化成员。（对于静态数据成员，见 9.4.2；对于非静态数据成员，见 12.6.2）。

我们已经发现了一些关于在初始化成员时可以做什么和不可以做什么的提示，但是为了 100% 确定我们应该继续阅读*大括号或等式初始化器的*真正含义。

```
8.5/1 初始化程序 [dcl.init]...

*大括号或相等初始化器*：
      =*初始化子句*
      *花括号初始化列表*

*初始化子句*：
      *赋值表达式*
      *大括号初始化列表*

*初始化器列表*：
      *初始化器子句* ...opt
      *初始化器列表*，*初始化器子句* *[...opt]*

*支撑初始化列表*：
      {*初始化列表* *[，选择]*}
      { }

```

通过上面的*括号或相等初始化器*规范，我们发现在初始化类体内的成员时面临两个选择，要么使用 a`=`和*初始化器子句*，要么单独使用 a `braced-init-list`。

以上归结为以下两者之一：

```
struct Obj {
  Type foo = Type (1,2,3); /* example of an initializer-clause */
  Type bar        {1,2,3}; /* example of a  braced-init-list   */
}; 
```

* * *

## *支撑初始化列表*看起来很棒，让我们使用它！

由于`std::vector<...>`接受`std::initializer_list`它的构造函数的一个重载，我们**不能**使用花*括号初始化列表*来调用带有两个参数的构造函数`(size_type count, const T& value)`，因为这将被用作我们的*向量*的内容。

因此，我们坚持使用*初始化子句*。

^(请参阅前面的*hack*以获得确认但可能不是那么明显的解决方案。)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-11T17:51:49.500

## 梦幻般的解决方案..

如果你只是不想重复`std::vector`，怎么样

```
class A
{
    auto y = std::vector<int>(2,3);
}; 
```

* * *

这**是不允许**的，标准说（7.1.6.4）`[dcl.spec.auto]`：

> **类型说明`auto`符还可用于**在选择语句或迭代语句的条件中、在新表达式的*新类型标识*或*类型标识中的**类型说明符序列*中、在*for-range-declaration*，以及使用**出现在****类定义的*****成员规范中的******大括号或等号初始化器*****声明静态数据成员**。

 ****当将大括号或相等初始化器*语法添加到非静态成员时，他们可能忘记更新这一行。***

# javascript - javascript变量未定义

> ID：11438342
> 
> 赞同：0
> 
> 时间：2012-07-11T17:40:48.020
> 
> 标签：javascript, jquery, function, scope

我正在编写一个小型 Flickr 图像采集器应用程序，我们在自己的服务器上有一个 JSON 代理。下面的函数从给定的照片集中抓取图像`id`。

```
function getPhotosFromPhotoset(p_id) {
    var data;
    $.getJSON('/flickr_get_photos', {
        photoset_id: p_id
    }, function(res) {
        data = res;
        console.log("res: " + JSON.stringify(data));
        if (res.status == 'ok') {
            if (res.data.length > 0) {
                //nada                                                                                                                            
            } else {
                data.status = "error: Photoset has no photos.";
            }
        } else {
            data.status = "An unknown error occurred; please try again.";
        }
    });
    return data; //undefined?!
} 
```

为什么`data`突然变得未定义？当我`console.log`在里面时`getJSON`，它是完全有效的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T17:42:45.807

该函数在 ajax 请求发出之前很久就返回了。在回调函数中使用`data`（您实际上是在回调函数中记录它，它保证可用）。`$.getJSON`不带回调函数只是为了好玩，而正是出于这个原因。

你可以这样做：

```
function getPhotosFromPhotoset(p_id) {
    return $.getJSON('/flickr_get_photos', {
        photoset_id: p_id
    });
}

getPhotosFromPhotoset(1).then(function(data) {
    //Use data here
}); 
```

而不是尝试这样做：

```
var data = getPhotosFromPhotoset(1); //will not work 
```

除非您将请求设置为同步，否则这将不起作用，这会带来更严重的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T17:43:24.167

它不会突然变得不确定。`getJson`是一个异步调用，设置`data`值的函数是服务器返回响应时调用的函数，`getPhotosFromPhotoset`在完成执行之前不等待服务器响应，因此尚未设置任何数据值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T17:45:18.630

AJAX 异步执行，所以当你说：

```
return data; //undefined?! 
```

该代码在 中的代码之前执行，*这*`function (res)`就是`data`未定义的原因。如果你想对 做一些事情`data`，你需要传递一个回调函数，`getPhotosFromPhotoset`该回调函数将由 的`success`回调执行`getJSON`。

那有意义吗？

# asp.net - 有没有办法创建只有合作伙伴网站才能显示的“授权”图像？

> ID：11438344
> 
> 赞同：1
> 
> 时间：2012-07-11T17:40:59.283
> 
> 标签：asp.net, .net, image, browser, security

我想创建一张图片，说明网站已通过我的检查和授权，并允许合作伙伴网站显示此图片，但阻止其他网站显示该图片。我在想我可以托管图像并要求合作伙伴在 src 属性中传递一个令牌。然后我可以查找合作伙伴并检查推荐人域名是否与我的注册表匹配。但是，不能有人仍然从合作伙伴站点下载图像并从那里自己的服务器提供它并打败它吗？还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:46:01.203

您无法阻止某人下载图像。

您可以在图像中输入文字说“单击此处进行验证”，然后在您的网站上弹出一个页面来验证引用者的 IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:45:48.200

并不真地。

这是一个很好的解决方案，但你是对的，令牌还不够。但是，由于对图像的每个 http 请求都带有一个 http_referrer，因此您可以组合引用的 + 令牌。如果图像完全相同，您甚至不需要令牌。最大的问题是，当我访问网站时，我可以下载图像并将其托管在我想要的任何地方。除非图像是动态的，并且包含有关其所在网站的信息，否则它确实无法受到保护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:46:44.180

是的，如果您的合作伙伴网站的最终用户可以看到您的图片，那么他们可以下载并自行提供图片。你可以让它对他们来说更麻烦，但你需要花费大量的精力才能让一个称职的高级用户多花几分钟时间来尝试下载它。

此类事情的常见解决方案是通过合法渠道：您向未经您同意的任何托管您的图像的人发送律师讨厌图，并希望他们服从。

如果您想获得更多的硬核，您可以为每个包含合作伙伴名称的合作伙伴制作单独*的图像*，并为每个真实图像分发 PGP 签名。如果有人愿意，您的图像可以包含一个短 URL，指向您网站上的某个地方，可以通过密码对其进行验证。

# java - Java IDE 的轻松导入？

> ID：11438350
> 
> 赞同：1
> 
> 时间：2012-07-11T17:41:38.727
> 
> 标签：java, ide, libraries, import

在 Eclipse 中，您可以按`Ctrl`++`Shift`键`O`，它将拉入所有必需的导入并组织它们。它通常运作良好。

其他常见的 Java IDE 有类似的东西吗？JCreator、NetBeans 等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:43:44.847

`Ctrl`++用于自动导入的 netbeans `Shift`。`I`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:22:35.510

`CTRL`++ for `ALT`IntelliJ `O`Optimize Imports，我相信。

# python - 使用 Flask-SQLAlchemy 进行多对多多数据库连接

> ID：11438352
> 
> 赞同：7
> 
> 时间：2012-07-11T17:41:56.407
> 
> 标签：python, sqlalchemy, flask, flask-sqlalchemy

我正在尝试使这种多对多连接与 Flask-SQLAlchemy 和两个 MySQL 数据库一起工作，它非常接近，只是它为连接表使用了错误的数据库。这里是基础...

我有`main_db`和`vendor_db`。表设置为`main_db.users`, `main_db.user_products`（关系表），然后`vendor_db.products`。应该很清楚这些是如何连接的。

在我的 app.py 中，我正在设置这样的数据库：

```
app.config['SQLALCHEMY_DATABASE_URI'] = 'mysql://user:pass@localhost/main_db'
app.config['SQLALCHEMY_BINDS'] = {
        'vendor_db': 'mysql://user:pass@localhost/vendor_db'
} 
```

模型定义是这样设置的：

```
from app import db

# Setup relationship
user_products_tbl = db.Table('user_products', db.metadata,
        db.Column('user_id', db.Integer, db.ForeignKey('users.user_id')),
        db.Column('product_id', db.Integer, db.ForeignKey('products.product_id'))
)

class User(db.Model):
    __tablename__ = 'users'
    id = db.Column('user_id', db.Integer, primary_key=True)
    products = db.relationship("Product", secondary=user_products_tbl,
            backref="users", lazy="dynamic")

class Product(db.Model):
    __bind_key__ = 'vendor_db'
    __tablename__ = 'products'
    id = db.Column('product_id', db.Integer, primary_key=True)
    name = db.Column(db.String(120)) 
```

问题是，当我尝试获取用户的产品时，它试图`vendor_db`用于连接表而不是`main_db`. 有什么想法可以`main_db`改用它吗？我尝试设置另一个绑定`main_db`并设置`info={'bind_key': 'main_db'}`关系表定义，但没有运气。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T18:52:58.807

原来我需要在这里做的是在我的`user_products_tbl`表定义中指定模式。所以，

```
user_products_tbl = db.Table('user_products', db.metadata,
        db.Column('user_id', db.Integer, db.ForeignKey('users.user_id')),
        db.Column('product_id', db.Integer, db.ForeignKey('products.product_id')),
        schema='main_db'
) 
```

希望这对其他人有帮助！

# php - PHP 脚本“每分钟”运行一次，但不是在指定时间运行

> ID：11438354
> 
> 赞同：2
> 
> 时间：2012-07-11T17:42:01.427
> 
> 标签：php, cron

我有一个 root 的 cron 作业，如下所示：

`0 12 * * * /bin/bash /var/www/tools/ebs-volume-snapshots.sh`

该作业不会运行，/var/log/cron 也不会给出任何指示它已尝试运行该作业。如果我按如下方式输入，它将每分钟运行一次：

`* * * * * /bin/bash /var/www/tools/ebs-volume-snapshots.sh`

它还将每两分钟运行一次 (*/2)。

我很茫然！此快照脚本冻结了两个 XFS 文件系统并在 Amazon 云上创建了一个 EBS 快照（然后解冻文件系统），并且该命令每次都可以在 shell 提示符下完美运行。

操作系统是 EC2 服务器上的 CentOS 5.6。root 的 crontab 中唯一的其他 cron 作业每 10 分钟成功运行一次。

提前感谢您的任何想法或建议！-鲍比

# eclipse - 如何在 Eclipse 中将一行复制到剪贴板？

> ID：11438356
> 
> 赞同：13
> 
> 时间：2012-07-11T17:42:14.613
> 
> 标签：eclipse, ide, keyboard-shortcuts

我正在尝试从我的其他 IDE 切换到 Eclipse，到目前为止一切正常，除了标题中描述的问题。

在我以前的 IDE（想法）中，我会将光标放在一行上，按`Ctrl`+`C`整行将转到剪贴板（如果未选择任何内容）。

有没有办法在 Eclipse 中使用单个快捷方式将整个当前代码行复制到剪贴板？即不按`Home`两次，然后`Shift`+ `Down`，然后`Ctrl`+ `C`？

PS JIC：我不想向上或向下复制当前行-我知道该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T17:53:53.930

试试 Windows/Preference->Keys 对话框，如果你找不到你想要的，你总是可以定义你自己的...

您也可以尝试看看这个，它完全符合您对 ctrl+c 的期望，无需选择 [http://code.google.com/p/copycutcurrentline/](http://code.google.com/p/copycutcurrentline/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T19:55:58.490

三击鼠标选择行，然后`CTRL`+`C`进行复制操作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-30T07:17:41.007

您可以使用[Vrapper](http://vrapper.sourceforge.net/home/)将[Vim](http://www.vim.org/)的强大功能集成到 Eclipse 中：

```
"+yy 
```

将当前行复制到 Vim 中的剪贴板 :)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-11T17:46:02.623

按`ALT`+ `SHIFT`+`UP`增加选择。几次后，整行将被选中，然后您可以复制它。

# objective-c - 用于 ObjectiveC 的类似 COM 的单元线程模型

> ID：11438359
> 
> 赞同：0
> 
> 时间：2012-07-11T17:42:35.720
> 
> 标签：objective-c, multithreading

带有一些 WinAPI 背景的 ObjectiveC 大师的问题：

ObjectiveC 中是否支持类似 COM 的单元线程模型？

*   A 类是**单线程的**：A 类的所有对象都在一个特定线程中创建，并且所有消息处理程序都在该线程中调用
*   B 类是**多线程**的：B 类的对象可以在任何调用者线程中创建，并且所有消息处理程序仅在用于创建对象的原始线程中调用
*   C 类是**自由线程**的：C 类的对象可以在任何调用者线程中创建，消息处理程序可以在任何线程中调用

我的想法是：既然ObjectiveC是关于消息的，那么像COM+这样的多线程可以很容易地实现。或不？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:56:04.130

您的问题定义的单线程或多线程对象没有内置支持。

在 Mac OS X 或 iOS 应用程序中，您可能希望自己使用 GCD 队列来执行这些策略。我推荐名为“Blocks and Grand Central Dispatch in Practice”和“Mastering Grand Central Dispatch”的[WWDC 2011 视频，以获取有关应用 GCD 的一些很好的建议。](https://developer.apple.com/videos/wwdc/2011/)

# ruby-on-rails - 未初始化的常量 Cucumber::Rails::Database (NameError) cucumber + mongoid

> ID：11438364
> 
> 赞同：1
> 
> 时间：2012-07-11T17:43:03.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, cucumber

大家好，我是黄瓜的新手，我有一个带有 mongoid 的应用程序。

我的**Gemfile中有 database_cleaner**

```
gem "database_cleaner", ">= 0.7.2", :group => :test 
```

在我的`app/features/support/env.rb`文件中，我有：

```
require 'cucumber/rails'
Capybara.default_selector = :css
ActionController::Base.allow_rescue = false
begin
  DatabaseCleaner.orm = 'mongoid'
  DatabaseCleaner.strategy = :truncation
rescue NameError
  raise "You need to add database_cleaner to your Gemfile (in the :test group) if you wish to use it."
end
Cucumber::Rails::Database.javascript_strategy = :truncation 
```

当我跑`rake cucumber`

我得到下一个错误：

```
uninitialized constant Cucumber::Rails::Database (NameError)
/home/ubuntu/.rvm/gems/ruby-1.9.3-p125@rails32/gems/aws-s3-0.6.2/lib/aws/s3/extensions.rb:206:in `const_missing_from_s3_library'
/home/ubuntu/Desktop/mf9/features/support/env.rb:59:in `<top (required)>'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p125@rails32/gems/cucumber-1.1.9/lib/cucumber/rb_support/rb_language.rb:129:in `load'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p125@rails32/gems/cucumber-1.1.9/lib/cucumber/rb_support/rb_language.rb:129:in `load_code_file'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p125@rails32/gems/cucumber-1.1.9/lib/cucumber/runtime/support_code.rb:171:in `load_file'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p125@rails32/gems/cucumber-1.1.9/lib/cucumber/runtime/support_code.rb:83:in `block in load_files!'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p125@rails32/gems/cucumber-1.1.9/lib/cucumber/runtime/support_code.rb:82:in `each'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p125@rails32/gems/cucumber-1.1.9/lib/cucumber/runtime/support_code.rb:82:in `load_files!'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p125@rails32/gems/cucumber-1.1.9/lib/cucumber/runtime.rb:175:in `load_step_definitions'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p125@rails32/gems/cucumber-1.1.9/lib/cucumber/runtime.rb:40:in `run!'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p125@rails32/gems/cucumber-1.1.9/lib/cucumber/cli/main.rb:43:in `execute!'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p125@rails32/gems/cucumber-1.1.9/lib/cucumber/cli/main.rb:20:in `execute'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p125@rails32/gems/cucumber-1.1.9/bin/cucumber:14:in `<top (required)>'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p125@rails32/bin/cucumber:23:in `load'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p125@rails32/bin/cucumber:23:in `<main>'
rake aborted!
Command failed with status (1): [/home/ubuntu/.rvm/rubies/ruby-1.9.3-p125/b...] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:00:23.350

我有一个类似的问题，我相信它的 RVM 是导致问题的原因。

基本上它的依赖关系 Ruby 是针对它编译的；使用 rvm 笔记

```
sudo apt-get install build-essential bison openssl libreadline6 libreadline6-dev curl git-core zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-0 libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev 
```

# c# - 参数数组与 IEnumerable e 对于 API

> ID：11438366
> 
> 赞同：2
> 
> 时间：2012-07-11T17:43:11.673
> 
> 标签：c#

我有一个 C# API，可以采用 0/1/许多相同类型的参数。有什么更好的方法来定义 API = `params`vs `IEnumerable<T>`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T17:44:56.493

我几乎总是会使用`params`这样的 API，因为它允许调用者传递参数，而无需手动为它们构造容器。

这：

```
SomeMethod(param1, param2, param3); 
```

比要求这个更干净：

```
SomeMethod(new[] { param1, param2, param3 }); 
```

但是，如果您专门对*单个项目序列*进行操作，则`IEnumerable<T>`更为明智。同样，如果您期望 > 5 个左右的参数，那么枚举更有意义，因为此时调用方法开始看起来很糟糕。

它实际上归结为 API 的逻辑操作，以及您实际期望的参数数量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T17:45:51.320

`params`当参数数量很少但未定义时，请使用数组。

`IEnumerable`当参数数量很大或者是一组相同的对象时使用 an ，例如在客户或订单中。

# c - ptmalloc实现代码说明

> ID：11438372
> 
> 赞同：16
> 
> 时间：2012-07-11T17:43:29.637
> 
> 标签：c, malloc, heap-memory, dynamic-memory-allocation

我期待了解动态内存管理在 GNU/Linux 系统中的低级工作方式（也就是 ptmalloc 的工作方式）。

当然，我已经阅读了代码，但我有很多疑问。我或多或少地了解数据结构，但我有很多信息泄漏！

我的问题是，是否有人知道任何详细解释实施的资源。例如，我读过诸如“通过破坏堆来理解堆”或“Malloc Malleficarum”系列和后期系列之类的论文。他们做得很好，但是，当然，他们更专注于开发而不是解释许多实现细节。

如果您不了解任何资源，这里有一些我的问题。

*   什么是真正的竞技场？**在heap_info**结构中的变量**ar_ptr**的代码中，有一条注释说“这个堆的竞技场”，所以竞技场不能是一个堆（就像到处都说的那样）。

***   为什么在**heap_info**结构中没有 next 指针而有**prev**指针？是因为**main_arena**吗？什么是**main_arena**？

    *   每个**heap_info**结构都可以有多个 arena（指向不同的**malloc_state**结构）？

    *   什么时候创建新闻领域以及处理它的代码是什么？我读过当请求存储数据的竞技场被锁定时会创建新的竞技场（因为进程或进程线程正在使用它），并且我还读到每个进程线程都有不同的竞技场。这里重要的是您是否知道**处理这些情况的代码**。

    *   我也不明白人们什么时候说所有的内存操作都是从顶部块或最狂野的块产生的。你知道我在哪里可以找到这个代码吗？** 

 **顺便说一句，我不想​​深入了解互斥锁的细节。

我正在审查 glibc 2.12.1 中的 ptmalloc 实现。我想做一些关于所有东西的整体结构的图表，所以我需要了解这些东西！

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-06T23:25:33.840

好的，我已经进行了一些研究，并且我对其中的许多问题都有了答案。

*   arena 是存储进程的所有动态数据的内存区域。简而言之，arena就是过去称为堆的内存结构。鉴于现在（使用多线程的东西）您希望每个进程拥有多个堆，您可以通过创建称为 arena 的东西来处理它，但这个 arena 只不过是一个堆。heap_info结构只管理一个**进程**的多个现有领域。

*   我不知道为什么只有一个**prev**指针。我所知道的是，通常，所有动态数据都存储在**main_arena**中，它是为该进程创建的竞技场。不知道在什么情况下不使用**main_arena**，我知道的是如果一个内存块中的**size字段设置了****NON_MAIN_ARENA**位，那么**main_arena**就没有被使用，算法从clearing中获取新的arena地址通过**heap_for_ptr()**宏取出该内存块指针的 20 个较低有效位。综上所述，在正常情况下，**main_arena**会一直被使用。

*   是的，正如我所说，每个**heap_info**结构可以有多个领域。这是因为锁争用。如果您有足够的空闲时间，您可以在 [1] 中阅读相关内容。

*   我不记得这个了。但事实是，如果竞技场正在使用中，被锁定，就会创建一个新的竞技场。搜索对类似于 new_arena() 或 new_heap() 的函数的任何调用。我记得函数名和那个很像。

*   我认为这只是意味着一开始堆的所有内存空间都是顶部块（或荒野块），所以当进程需要新的内存请求时，这个顶部块被分割和碎片化。所以这一切都从最上面的块开始。

不想浮夸，我想，三个月后，我的答案是更适合我的问题的答案，所以我把它作为正确的答案。另一方面，感谢所有其他答案。他们真的很有帮助。

顺便说一句，我把所有这些研究都写在了一篇论文中，但鉴于它是西班牙语的，我认为它在这里不会有用，我不知道它是否会被视为垃圾邮件。[2]

[1] [http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.16.4439](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.16.4439)

[2] 这里有论文： http: [//overflowedminds.net/papers/newlog/linux_heap_exploiting_revisited.pdf](http://overflowedminds.net/papers/newlog/linux_heap_exploiting_revisited.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T19:07:58.397

堆基本上分为许多小区域，它们独立地满足一个或多个分配的对象。一个这样的区域可能被称为竞技场或区域。主要是堆是满足对象的竞技场集合，要求可以在单个操作中释放一个竞技​​场。为了使这成为可能，一个完整的竞技场被分配为一个连续的内存地址范围。

竞技场或区域之间的区别是灰色的。我不确定 Linux，但一个例子是 Cavium 网络的真实世界多核网络处理器系列，称为 Octeon。它将分配的内存视为竞技场或区域，不同之处在于区域可以分配固定相等大小的对象，而竞技场可以有不同大小的对象。在竞技场的情况下，这自然会导致碎片化。但我无法确认 Linux 是否也是这种情况。

[基于区域的内存管理](http://en.wikipedia.org/wiki/Region-based_memory_management)**

# java - Java“无法访问的代码”错误

> ID：11438376
> 
> 赞同：1
> 
> 时间：2012-07-11T17:43:42.663
> 
> 标签：java

我目前正在使用 Eclipse 编写一个新插件。我一直在网上学习教程，但是遇到了错误。我的朋友一直在帮助编写代码，但是他不确定这个修复。我遇到了“无法访问的代码”错误。我已经标记了错误的位置。谢谢你的帮助！

[http://pastebin.com/tpeFWsas](http://pastebin.com/tpeFWsas)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T17:48:44.353

不要在 if 语句的末尾加上分号。正如评论者所说，您在第 33、50 和 66 行犯了这个错误

此外，为了便于阅读，请确保您的代码块对齐。在您的错误上方几行，您将`}`在同一列中看到 2。这样的东西使代码难以阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:48:59.947

```
if(com.equalsIgnoreCase("ext")); 
```

> 分号

在那里关闭您的方法，之后的代码无效。

应该

```
 if(com.equalsIgnoreCase("ext")) { 
```

# css - 中心文本大于容器？（不使用单独的子元素）

> ID：11438380
> 
> 赞同：10
> 
> 时间：2012-07-11T17:43:50.520
> 
> 标签：css, text, centering

使用 CSS，很容易将容器中的文本水平居中`text-align:center;`，但如果该文本的任何单个单词*大于容器的宽度，*浏览器会自动“剪切”到容器的左边界（如- 大小的单词与太小的容器的左侧对齐，并且在没有 CSS`word-break:hyphenate;`属性设置（或类似设置）的情况下，过大的单词会伸出容器的右边缘。

![在此处输入图像描述](../Images/b5f9472be3f09277ab9fd2da90b35a54.png)有什么方法可以将这张图片漂浮在我的文字左侧以节省垂直空间？那好吧。反正...

**在不**使用子容器元素来保存文本的情况下，有没有办法将过大的单词**居中**，使其均匀地挂在容器的左侧和右侧？

同样，我不想在容器中使用文本容器。我可以在 5 秒内通过使用`<div>text to be centered</div>`带有 fixed`width`和negative的子元素`margin-left`，或者`absolute`将容器元素定位在 a 中来做到这一点`relative` `div`，但我正在寻找一个**CSS 属性**，即使单词太长而无法适应宽度，它也会使文本居中. 默认情况下，`text-align:center`不这样做。

想法？谢谢！-Slink

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-14T03:23:34.413

[这个小提琴](http://jsfiddle.net/h4Edz/8/)显示了三个`div`元素，说明了“问题”和以下两个“解决方案”。

## 一种可能的“解决方案”

我不确定您的需求，但到目前为止，我发现的唯一真正的解决方案是设置`display: table`您的文本容器。但这将允许容器拉伸到所需的宽度以包含最长的单词，这对您来说可能并不理想。如果没问题，那是最好的解决方案。

## 另一种可能的“伪造”解决方案

如果您必须至少保持元素的*外观大小，那么您可以通过一些创造性的伪元素使用来伪造外观：*

```
.fakeIt {
    text-align: center; /* what you wanted all along */
    display: table; /* key to get centered */
    position: relative; /* allow reference for absolute element */
    z-index: 2; /* set up for a background to be pushed below */
    width: 40px; /* what you want, but table resizes larger if needed*/
    border: none; /* transferring border to the "fake" */
    background-color: transparent; /* transferring background to the "fake" */
}

.fakeIt:after {
    content: ''; /* before or after need it, even if empty */
    width: 40px; /* the original width you wanted for the container */
    position: absolute; /* need this to position it */
    z-index: -1; /* push it behind the foreground */
    left: 50%; /* push it to center */
    top:0; /* give it height */
    bottom: 0;  /* give it height */
    margin-left: -20px; /* half the width to finish centering */
    border: 1px solid red; /* the border you wanted on the container */
    background-color: yellow; /* the background you wanted on the container */
} 
```

但是，根据您的特定应用程序，“伪造”解决方案可能不起作用。此外，原始元素仍将占据文档中更宽的“空间”，只是看起来不像。这可能会导致问题。容器上的负数`margin`可以解决这个问题，但您不知道需要设置什么值，因为它会因文本宽度而异。

您在评论中提到您不熟悉 css 中的伪元素，因此您可能[想要快速介绍一下](https://stackoverflow.com/tags/pseudo-element/info)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T18:04:44.817

那个该死的水平滚动条！

[http://jsfiddle.net/sqKU6/](http://jsfiddle.net/sqKU6/)

```
<div class="inner">
    aaaaa aaaaa aaaaa aaaaa aaaaa aaaaa aaaaa aaaaa aaaaa aaaaa aaaaa aaaaa aaaaa aaaaa aaaaa aaaaa aaaaa 
</div>
​ 
```

CSS：

```
.inner {
    text-align: center;
    position: relative;
    left: +450%;
}
.inner:before {
    content: '';
    display: inline-block;
    margin-right: -900%;
}
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-07T12:22:17.230

我使用这个解决方案：

```
.limited-string {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    width: 90%;
} 
```

# c - Multiplying two 32-bit numbers...what is wrong with this code

> ID：11438384
> 
> 赞同：0
> 
> 时间：2012-07-11T17:43:53.410
> 
> 标签：c, integer, multiplication

I am trying to multiply two 32-bit numbers a and b which should give a 64-bit result. With a and b being unsigned 32-bit integers, i came up with this:

```
r = a * b

r = ((ah << 16) + al) * ((bh << 16) + bl)
  = ((ah * 2^16) + al) * ((bh * 2^16) + bl)
  = (ah * 2^16) * (bh * 2^16) + (ah * 2^16) * bl + al * (bh * 2^16) + al * bl
  = (ah * bh * 2^32) + (ah * bl * 2^16) + (al * bh * 2^16) + (al * bl)
  = ((ah * bh) << 32) + ((ah * bl) << 16) + ((al * bh) << 16) + (al * bl)
  = ((ah * bh) << 32) + ((ah * bl + al * bh) << 16) + (al * bl) 
```

which i then translated to c as follows

```
static void _mul64(unsigned int a, unsigned int b, unsigned int *hi, unsigned int *lo) {
    unsigned int    ah = (a >> 16), al = a & 0xffff,
                    bh = (b >> 16), bl = b & 0xffff,
                    rh = (ah * bh), rl = (al * bl),

                    rm1  = ah * bl,         rm2  = al * bh,
                    rm1h = rm1 >> 16,       rm2h = rm2 >> 16,
                    rm1l = rm1 & 0xffff,    rm2l = rm2 & 0xffff,
                    rmh  = rm1h + rm2h,     rml  = rm1l + rm2l;

    rl = rl + (rml << 16);
    rh = rh + rmh;
    if(rml & 0xffff0000)
        rh = rh + 1;
    *lo = rl;
    *hi = rh;
} 
```

However when I run this little test which multiplies a = 0xFFFFFFFF with b = 0xFFFFFFFF and should yield 0xFFFFFFFE00000001, I get 0xFFFFFFFD00000001 instead. am I doing wrong?

```
int main(int argc, char **argv) {
    unsigned int a, b, rl, rh;
    unsigned long long r;
    unsigned long long r1, r2, r3;

    a = 0xffffffff;
    b = 0xffffffff;
    mul64(a, b, &rh, &rl);
    r1 = ((unsigned long long) rh << 32) + rl;
    r2 = (unsigned long long) a * b;

    _mul64(a, b, &rh, &rl);
    r3 = ((unsigned long long) rh << 32) + rl;
    printf("a = 0x%08x, b = 0x%08x\n", (unsigned) a, (unsigned) b);
    printf("_mul64: 0x%16llx\n", (unsigned long long) r3);
    printf("a * b = 0x%16llx\n", (unsigned long long) r2);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:19:37.943

You're adding 16-bit quantities here

```
rm1l = rm1 & 0xffff,    rm2l = rm2 & 0xffff,
rmh  = rm1h + rm2h,     rml  = rm1l + rm2l; 
```

and add `rml` shifted left by 16 bits to `rl`,

```
rl = rl + (rml << 16); 
```

which, when the sum of the two 16-bit quantities becomes a 17-bit quantity discards the carry.

Also, the latter sum may exceed 32 bit range, in which case you lose another carry bit.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:52:36.707

With all of the arithmetic done in the initializers, debugging is going to be difficult. Move all of those calculations out of the initializers, then compile your code with optimization disabled. Step through it in your debugger and make sure that each step is generating the values that you are expecting it to generate. When you walk through the code while following the algorithm that you solved by hand, it should be easy to spot any place where your code and algorithm deviate.

# r - 使 guide_colourbar 与绘图区域高度相同

> ID：11438388
> 
> 赞同：2
> 
> 时间：2012-07-11T17:44:06.323
> 
> 标签：r, ggplot2

目前是否有一种简单的方法可以使颜色条图例与绘图区域的高度相同。例如这样的：

```
p <-ggplot2(some_plot_needing_a_colourbar_legend)+
guide=guide_colourbar()
p <- p + theme(legend.key.height=plot.height(p)) 
```

目前我只看到一种使用单位数组（使用`unit()`函数）设置高度的方法，包括视口的高度，但不包括绘图区域的高度。此外，此函数似乎以绝对值而不是相对值指定高度。我错过了什么还是（目前）不可能？

# entity-framework - 由于对象的当前状态，操作无效

> ID：11438391
> 
> 赞同：6
> 
> 时间：2012-07-11T17:44:13.910
> 
> 标签：entity-framework, entity-framework-4, odp.net

我正在使用带有 ODP.NET 11.2.0.3.0 的实体框架。我得到了一些表的持久性，但是这个完全拒绝添加一个简单的新对象，我不太明白。非常感谢您的帮助。谢谢

这是代码。我通过模型浏览器从对象中删除了图像字段，但调用 SaveChanges() 时代码仍然失败。

```
var corpDirectoryEntities = new CorpDirectoryEntities();
var cc = new EmployeePhoto();
cc.UserId = 12345;   // NUMBER field
cc.ImageName = "imagename";   // VARCHAR2(100)
cc.Image = photoStream;   // LONG RAW
corpDirectoryEntities.EmployeePhotos.AddObject(cc);
corpDirectoryEntities.SaveChanges(); 
```

发生以下异常。

```
System.Data.UpdateException 未被用户代码处理
  Message=更新条目时发生错误。有关详细信息，请参阅内部异常。
  源=系统.数据.实体
  堆栈跟踪：
       在 System.Data.Mapping.Update.Internal.UpdateTranslator.Update（IEntityStateManager stateManager，IEntityAdapter 适配器）
       在 System.Data.EntityClient.EntityAdapter.Update(IEntityStateManager entityCache)
       在 System.Data.Objects.ObjectContext.SaveChanges（SaveOptions 选项）
       在 System.Data.Objects.ObjectContext.SaveChanges()
       在 Repositories.Services.CorpDirectory.CorpDirectoryRepository.SaveDirectoryAccountPhoto(Int32 accountId, Byte[] photoStream) 在 C:\Dev\Projects\Repositories\Services\CorpDirectory\CorpDirectoryRepository.cs:line 356
       在 C:\Dev\Projects\Repositories.Tests\CorpDirectory\CorpDirectoryUserTestFixture.cs:line 192 中的 Tests.CorpDirectory.CorpDirectoryUserTestFixture.TestGetUserPhoto()
  内部异常：System.Data.EntityCommandCompilationException
       消息=准备命令定义时发生错误。有关详细信息，请参阅内部异常。
       源=系统.数据.实体
       堆栈跟踪：
            在 System.Data.Mapping.Update.Internal.UpdateTranslator.CreateCommand（DbModificationCommandTree 命令树）
            在 System.Data.Mapping.Update.Internal.DynamicUpdateCommand.CreateCommand（UpdateTranslator 翻译器，Dictionary`2 identifierValues）
            在 System.Data.Mapping.Update.Internal.DynamicUpdateCommand.Execute（UpdateTranslator 转换器，EntityConnection 连接，Dictionary`2 identifierValues，List`1 generatedValues）
            在 System.Data.Mapping.Update.Internal.UpdateTranslator.Update（IEntityStateManager stateManager，IEntityAdapter 适配器）
       内部异常：System.InvalidOperationException
            由于对象的当前状态，消息=操作无效。
            源=Oracle.DataAccess
            堆栈跟踪：
                 在 Oracle.DataAccess.Client.SqlGen.DmlSqlGenerator.ExpressionTranslator.Visit（DbScanExpression 表达式）
                 在 System.Data.Common.CommandTrees.DbScanExpression.Accept（DbExpressionVisitor 访问者）
                 在 Oracle.DataAccess.Client.SqlGen.DmlSqlGenerator.GenerateInsertSql（DbInsertCommandTree 树，EFOracleProviderManifest providerManifest，EFOracleVersion sqlVersion，List`1& 参数）
                 在 Oracle.DataAccess.Client.SqlGen.SqlGenerator.GenerateSql（DbCommandTree 树，EFOracleProviderManifest providerManifest，EFOracleVersion sqlVersion，List`1& 参数，CommandType& commandType）
                 在 Oracle.DataAccess.Client.EFOracleProviderServices.CreateCommand（EFOracleProviderManifest providerManifest，DbCommandTree commandTree）
                 在 Oracle.DataAccess.Client.EFOracleProviderServices.CreateDbCommandDefinition（DbProviderManifest providerManifest，DbCommandTree commandTree）
                 在 System.Data.Common.DbProviderServices.CreateCommandDefinition（DbCommandTree 命令树）
                 在 System.Data.Common.DbProviderServices.CreateCommand（DbCommandTree commandTree）
                 在 System.Data.Mapping.Update.Internal.UpdateTranslator.CreateCommand（DbModificationCommandTree 命令树）
            内部异常：

```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-12T14:16:53.903

所以，看了几个小时后，我终于明白了。我检查了 .ssdl 文件。我的对象之间的一个区别在于`<EntitySet ... >`定义的方式。我改变了它，当然，它现在可以工作了。EF 设计器简直是神来之笔。

```
<EntitySet Name="EmployeePhoto" ... store:Name="TABLE_NAME">
    <DefiningQuery>
        SELECT ..... 
    </DefiningQuery>
</EntitySet> 
```

我删除了`<DefiningQuery...>`并将其替换为以下内容以匹配其他实体：

```
<EntitySet Name="EmployeePhoto" ... /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-17T14:50:49.447

如果 oracle 表上没有主键，实体框架将使其在导入到您的 EF 模式时使用定义查询。然后，由于它是查询，而不是表，因此当您尝试向其添加内容时，它会因无效操作异常而崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-04T16:57:18.923

我在尝试升级旧项目时遇到了这个错误。

确保您的项目与包文件中列出的 .net 框架版本匹配。例如，如果您列出了 net452，请确保您的项目设置为使用 net 4.5.2。如果您的解决方案中有多个项目，请确保它们都设置为正确的 .net 框架版本。

另外，我注意到在向项目添加新数据模型时，会混淆要添加哪个模型文件。我相信这是由于我的开发盒上安装了 TFS（我有快递，然后安装最新的）。为了解决这个问题，我暂时断开了项目与 TFS 的连接）。

# iphone - iphone聊天应用程序-用户登录到应用程序？

> ID：11438392
> 
> 赞同：-1
> 
> 时间：2012-07-11T17:44:14.860
> 
> 标签：iphone, login, xmpp, chat

我有一个 iPhone 聊天应用程序，当用户想与其他人聊天时，它会检查 ruby​​ on rails 服务器上的用户名、UDID 和电子邮件。

问题： -- 我的聊天应用程序是否需要用户使用密码登录应用程序，以便其他人无法窃取手机并伪装成真正的所有者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:47:06.517

好吧，如果你想知道谁在说话。让他们登录到您的服务器是一个好主意，因为 1> 用户可以拥有电子邮件地址等公共信息，但他们不会与他人共享密码。2> 他们可以随时轻松更改密码。

顺便说一句，使用 UUID 来区分用户和服务器是一个坏主意，因为在同一设备上重新安装应用程序会给他们不同的 UUID。

这是我所做的：我有一个应用程序需要用户登录，每次当应用程序与服务器通信时，它都会发送一个包含 UUID 在内的自身信息的 Web 服务调用。在服务器端，我有一个数据库表来跟踪他们的 UUID，这样如果用户丢失了他的设备，他可以给我们打电话，我在数据库中标记他的 UUID，然后设备将从服务器被禁用侧而无能为力。

希望这可以帮助。

# javascript - 选择时如何缩放字体？

> ID：11438395
> 
> 赞同：0
> 
> 时间：2012-07-11T17:44:27.183
> 
> 标签：javascript, jquery, html, css

如何缩放（增加）所选文本的大小。我知道通过添加
来更改默认**选择的颜色**

```
::-moz-selection {
       background-color: #0092BF;
       color: #FFF;
}
::selection {
       background-color: #0092BF;
       color: #FFF;
} 
```

如何增加或减少**所选文本的大小 Only** .??? ![选择](../Images/2de04f97d15a9a6b9e57d31e64259723.png)

> **我得到了以上**，    *我想实现以下*   **使用图像编辑器编辑*

![增加](../Images/0daefe8199b3372ee1e1a25ac189c6e1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T21:42:27.580

As others have stated, this cannot be done purely through CSS. However, here's a JavaScript solution. This assumes you're using jquery 1.4.1+ (probably works with many versions, but this is the one I tested with).

This is a bit clunky, but it will allow you to apply a style to text selected by mouse input only while it is selected. A quick explanation of the functions:

1.  reset() removes the styling from any existing selections and gets rid of the extra spans
2.  highlight() wraps the selection in a new span node and applies the style
3.  getSelected() just returns the selection object. Note that reset() does nothing if you right-click; this is to allow the right-click menu to appear. If you right-click outside of your selection, you won't get the results you're looking for, but that can probably be fixed.

Let me know if you want more detail. Sorry for the huge code block.

```
<script type="text/javascript">
    $(document).ready(function () {
        $(document).mousedown(reset);
        $(document).mouseup(highlight);
    });

    reset = function (e) {
        var st = getSelected();
        if (st != '') {
            if (e.which != 3) {
                $("span").contents().unwrap();
            }
        }
    };

    highlight = function () {
        var st = getSelected();
        if (st != '') {
            var newNode = document.createElement("span");
            newNode.setAttribute("class", "selectionClass");
            var range = st.getRangeAt(0);
            range.surroundContents(newNode);
            st.selectAllChildren(newNode);
        }
    };

    getSelected = function () {
        var selection = '';
        if (window.getSelection) {
            selection = window.getSelection();
        } else if (document.getSelection) {
            selection = document.getSelection();
        } else if (document.selection) {
            selection = document.selection.createRange().text;
        }
        return selection;
    };
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:00:27.810

您不能严格使用 CSS 执行此操作，因为它未包含在规范中。该规范只允许您更改一些基本属性，例如颜色、背景颜色、轮廓和光标。参考： [http ://www.w3schools.com/cssref/sel_selection.asp](http://www.w3schools.com/cssref/sel_selection.asp)

但是，您可以使用 jQuery/javascript 变通方法为所选文本添加样式。这是另一个使用基于 jQuery 的方法来解决问题的问题。 [jQuery 如何将 CSS 应用于选定的文本](https://stackoverflow.com/questions/5809310/jquery-how-do-i-apply-css-to-selected-text)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T18:00:37.657

您不能使用超过`color`，`background`并且`background-color`在`::selection`css 选择器中，[请参阅`::selection`](https://developer.mozilla.org/En/CSS/%3A%3Aselection)此处的文档。

您可以[通过 jQuery 获取所选文本](https://stackoverflow.com/questions/5809310/jquery-how-do-i-apply-css-to-selected-text)`regexp`并使用包装器重新插入它`span`，但对于一些不寻常的视觉效果来说，这可能太麻烦了。

# mysql - 将列 ID 更改为另一个表中的关联值

> ID：11438396
> 
> 赞同：0
> 
> 时间：2012-07-11T17:44:33.580
> 
> 标签：mysql

我目前有 2 张桌子

存储可以存储在另一个中的所有不同值（名称）的表。

```
item_slots: 
id | Name

items_list:
id | user_id | i_slot | Name 
```

item_slots 有 11 个条目，而 items_list 可以有无限个。在我查询 items_list 的过程中，它可以根据 user_id 返回任意数量的项目。

我需要根据 i_slot 中的关联 ID 将 items_list.i_slot 替换为 item_slots.name

我正在尝试以下操作：

```
SELECT il.* is.name
FROM items_list AS il
JOIN item_slots AS is 
ON is.id = il.i_slot
WHERE il.user_id = 3 
```

这将返回以下错误：`#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '.name FROM items_list AS il JOIN item_slots AS is ON is.id = il.i_slot WHERE il' at line 1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:48:08.127

`is`是 MySQL 中的保留关键字。您必须在其周围放置反引号：

```
SELECT il.*, `is`.name
FROM items_list AS il
JOIN item_slots AS `is` 
ON `is`.id = il.i_slot
WHERE il.user_id = 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:47:24.237

`is`是 MySQL 中的关键字（如`IS NULL`等），试试这个（转义别名）

```
SELECT il.*, `is`.name
FROM items_list AS il
JOIN item_slots AS `is` 
ON `is`.id = il.i_slot
WHERE il.user_id = 3 
```

# objective-c - 在 Xcode 中使用点击功能制作图像的最佳方法是什么？

> ID：11438400
> 
> 赞同：2
> 
> 时间：2012-07-11T17:44:48.877
> 
> 标签：objective-c, xcode, uiimage, uibutton

我正在尝试制作一个游戏，如果您点击某个东西，则会在您点击它的位置显示一个小的 50x53 图像，我首先将 50x53 图像作为按钮，当您触摸按钮时，按钮的背景会变为红色（到模拟刚刚添加的图像）所以在这里我的 viewController 上有大约 48 个按钮（6X8），每当我按下其中一个按钮时，背景就会变为红色，这很简单，但现在我想要做的是UI 完全空白（您看不到任何按钮），然后当您按下给定区域时，图像会在您按下的那个小空间中弹出。我想而不是做

```
-(IBAction)imagePressed
{
sender.background=[UIColor redColor];
}

-(IBAction)imagePressedAgain
{
sender.background=[UIColor whiteColor];
} 
```

我打算做类似的事情

```
-(IBAction)imagePressed
{
sender.image=@"whateverImage.png";
//I know this isn't the right syntax to change a buttons image (and i don't even know if i can change a buttons image) but anyways i was going to try to here
}
-(IBAction)imagePressedAgain
{
sender.image=@"imageThatIsJustAWhiteBackground";
} 
```

所以我尝试这样做，然后对自己想，嗯，也许我不应该这样做，我应该使用一堆微小的 UIImageViews 并将它们全部放在 interfaceBuilder 上吗？就像我将拥有 48 个 UIImageViews 而不是在屏幕上拥有 48 个按钮？然后我想我会为每个添加一个点击手势识别器？还是我应该坚持我的旧计划并更改按钮图像？

（哦，顺便说一句，我不能让图像与用户在屏幕上触摸手指的位置完全成比例，我必须把它放在有组织的网格中，所以我必须有 48 个这样的图像。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T18:34:12.597

如果您想保持您所描述的类似网格的布置（6x8），您可以执行以下操作：

```
 NSMutableArray *buttons = [[NSMutableArray alloc] init];

// Loop through and create 48 buttons at 50 x 53
for(int i = 0; i < 48; i++)
{
    UIButton *pressMe = [UIButton buttonWithType:UIButtonTypeCustom];

    [buttons addObject:pressMe];
    pressMe.frame = CGRectMake(0, 0, 50, 53);
    // Set background image for when button is selected
    [pressMe setBackgroundImage:[UIImage imageNamed:@"selectedImage.png"] forState:UIControlStateSelected];
    // Add target to toggle selected state of button
    [pressMe addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
}

int col = 0;
int row = 0;
int maxPerRow = 6;
float spacingHorizontal = 50;
float spacingVertical = 53;

for(UIButton *view in buttons)
{
    // position buttons in 6 x 8 grid
    view.frame = CGRectMake(col * spacingHorizontal, row * spacingVertical, view.frame.size.width, view.frame.size.height);
    [self.view addSubview:view];

    if(col % maxPerRow == maxPerRow-1)
    {
        col = 0;
        row++;
    }
    else
    {
        col++;
    }
} 
```

您可以看到重要的部分是为按钮设置选定的图像。这将允许您在点击按钮时显示您的自定义图像。这是我的测试的屏幕截图。如果你愿意，我可以给你项目文件。

![在此处输入图像描述](../Images/b464d48f6cc1617ca1f7a9d4fd27a813.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:40:05.327

**编辑：**我显然没有看到原始问题包括：

> （哦，顺便说一句，我不能让图像与用户在屏幕上触摸手指的位置完全成比例，我必须把它放在有组织的网格中，所以我必须有 48 个这样的图像。）

因此，我的答案并不是提问者真正想要的。ezekielDFM 回答得很好。不过，我还是会发布它，以防有人希望在用户任意触摸的位置显示图像。

## 原始答案

正如 rdelmar 所说，设置它的最佳方法是使用`UITapGestureRecognizer`. 手势识别器可以拦截其视图上的触摸事件，并为您提供有关它们的有用信息。

在您的视图控制器实现中，您首先需要将适当的附加`UITapGestureRecognizer`到您的视图：

```
- (id)init 
{
    UITapGestureRecognizer *tapRecognizer = 
    [[UITapGestureRecognizer alloc] initWithTarget:self 
                                            action:@selector(handleSingleTap:)];

    // The gesture recognizer requires only one finger to fire
    [tapRecognizer setNumberOfTouchesRequired:1];

    // Make recognizer cancel any touches that it recognizes, so they don't
    // "fall through" to the actual view
    [tapRecognizer setCancelsTouchesInView:YES];
    [[self view] addGestureRecognizer:tapRecognizer];
} 
```

然后，`handleSingleTap:`在同一实现中的某处实现该选择器。它可能看起来像这样：

```
- (void)handleSingleTap:(UITapGestureRecognizer *)recognizer
{
    // Get the location of the touch
    CGPoint touchPoint = [recognizer locationOfTouch:0 inView:[self view]];

    // Init a new image, or get an image in some other way
    UIImage *myImage = [UIImage imageNamed:@"test_image.png"];

    // Create a new imageView for that image... 
    UIImageView *imageView = [[UIImageView alloc] initWithImage:myImage];
    // ... and center it at the touch location
    [imageView setCenter:touchPoint];

    // Add the new UIImageView to your view's subviews
    [[self view] addSubview:imageView];
} 
```

那应该让你开始。如果您需要更具体的帮助，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T18:11:52.853

我现在不在我的电脑前，所以我无法测试这个，但我认为最简单的方法是在你的视图中添加一个手势识别器——你不应该需要图像视图或按钮预定义的。当用户点击视图时，从事件中获取位置并使用该信息将图像视图放置在距离网格上的触摸点最近的位置。

# javascript - 骨干：从集合视图将模型添加到集合？

> ID：11438403
> 
> 赞同：17
> 
> 时间：2012-07-11T17:44:57.787
> 
> 标签：javascript, backbone.js

我有一些代码，我希望 NoteCollectionView 向 NoteCollection 添加新的注释。这是由 NoteCollectionView 中的函数 newNote 触发的：

```
newNote: function(data) {
    var note = new Note(data);
    this.collection.add(note);
}, 
```

我对骨干网还是很陌生，我想确保它与服务器同步。我的担忧是：

1) 简单地将这个注释添加到集合中会触发服务器的 save()，并使用服务器提供的 ID 更新模型吗？或者，

2）如果服务器没有更新我的模型并给我一个实际的ID，我如何使用note.save（）保存模型并从服务器取回一个ID？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-11T18:16:41.413

为了解决您的第一个问题，不，`.add`不会触发对服务器的任何类型的调用；它只会将模型添加到集合中。

但是，您确实有几个选择。一种是创建新的笔记模型，将其保存到数据库中，然后将其添加到集合中：

```
newNote: function(data) {
    var note = new Note(data);
    note.save();
    this.collection.add(note);
} 
```

第二种选择是简单地使用[Backbone 的 collection.create 方法](http://backbonejs.org/#Collection-create)。给它一个属性哈希，它会

1.  创建模型
2.  将其保存到数据库
3.  将其添加到集合中

一气之下，像这样：

```
newNote: function(data) {
    return this.collection.create(data);
} 
```

`collection.create`还返回新创建的模型，如我上面的 return 语句所示。

# python - 在字符串中查找重复的字符并确定它在 python 中连续重复多少次

> ID：11438404
> 
> 赞同：4
> 
> 时间：2012-07-11T17:45:03.540
> 
> 标签：python, python-2.7

我有一个包含一行的文本文件。文本行是一大堆随机数。我需要确定 5 重复的最多次数并打印它重复了多少次。例如：numList: 1234555325146555。连续重复 5 的次数最多为 3 次，并且发生了 2 次。这是我到目前为止的代码，它向我展示了 5 的位置。我认为这是第一步，但无法弄清楚如何继续前进。

```
numbers = open("numbers.txt",'rU')
count = -1
numString = numbers.readline()
for num in numString:
    count += 1
    if num == '5':
        print count
        counter += 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T17:55:05.610

你有正确的想法来找出 5 在哪个位置。

那么如何找出一排 5 的长度呢？想一想：

1.  你需要知道你是否找到了一个 5，如果它是一个系列的一部分。跟踪以前的号码。如果这也是一个 5，那么你正在继续一个系列。
2.  如果您要继续一个系列，那么请使用另一个计数器来跟踪它的持续时间。
3.  如果达到的数字不是 5，则需要重置计数器。但在重置之前，您需要存储该值。
4.  对于问题的下一部分（找出有多少个 5 的系列），尝试使用额外的“元”变量来跟踪您迄今为止拥有的最长系列以及您已经看过多少次。

祝你好运！并继续提问

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T17:55:01.700

我经常发现像这样的任务我问自己，如果问题足够大，我怎么会在没有电脑的情况下完成这项工作，我无法记住所有内容。所以在这里，我会一直走到找到 5。然后我会查看下一个数字，如果是 5，继续前进，直到连续没有更多的 5。因此，在您的示例中，我会连续找到 3 个 5。我会记下我发现的最长的是 3 个 5。然后我会继续下一个5。

然后我会再次计算连续有多少个 5。在这种情况下，我会看到只有 1。所以我不会费心做任何事情，因为我会看到它小于 3。然后我会继续下一个 5。

我会看到连续有 3 个，我会回到我的论文中，看看我找到的最长的有多长，我会看到它是 3。然后我会记下我看到的2组3个一排。

如果我找到 4 个或更多，我会忘记我拥有的关于 3 组的所有信息，并从 4 组或其他任何内容重新开始。

所以尝试在你的循环中实现这种想法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T17:49:56.810

这是一个相当简单的方法来解决这个问题：

```
>>> import re
>>> numString = '1234555325146555'
>>> fives = re.findall(r'5+', numString)
>>> len(max(fives))          # most repetitions
3
>>> fives.count(max(fives))  # number of times most repetitions occurs
2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T17:49:00.950

我会不断检查给定字符串中是否有特定的 5 字符串，直到它不再存在（每次添加一个 '5'）。然后我备份 1 并使用`count`字符串的方法——像这样（伪代码如下——注意这不是语法上有效的python。这取决于你，因为这是家庭作业。）

```
str5='5'
while str5 in your_string
    concatenate '5' with str5

#your string is too long by 1 element
max_string=str5 minus the last '5'
yourstring.count(max_string) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T18:01:29.707

```
#  First step: Find at most how many times 5 comes in a row.
# For this I have a counter which increases by 1 as long 
# as I am dealing with '5'. Once I find a character other 
# than '5' I stop counting, see if my counter value is greater
# than what I have found so far and start counting from zero again.

numbers = open("numbers.txt",'rU')
count = -1
numString = numbers.readline()
maximum = -1;

for num in numString:
    count +=1
    if num== '5':
        counter += 1
    else:
        maximum=max(maximum, counter)
        counter = 0;

#  Second step: Find how many times this repeats.
# Once I know how much times it comes in a row, I find consequent fives
# with the same method and see if the length of them is equal to my maximum

count=-1
amount = 0
for num in numString:
    count +=1
    if num== '5':
        counter += 1
    else:
        if maximum == counter:
            amount += 1
        counter = 0; 
```

希望能帮助到你 ：）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T17:53:27.877

```
from collections import defaultdict, Counter
from itertools import groupby

num_str = '112233445556784756222346587'

res = defaultdict(Counter)
for dig,seq in groupby(num_str):
    res[dig][len(list(seq))] += 1

print res['5'].most_common() 
```

返回

```
[(1, 2), (3, 1)] 
```

（意味着“5”被看到了两次，“555”被看到了一次）

# java - 浏览器不生成文件下载对话框

> ID：11438406
> 
> 赞同：4
> 
> 时间：2012-07-11T17:45:08.777
> 
> 标签：java, javascript, jquery, spring-mvc

我目前的情况是 JavaScript 客户端有一堆数据，我 POST 到服务器以处理/翻译成不同的格式（例如 CSV），现在我想将转换后的数据从服务器发送到客户端。

我设置了响应的内容类型，但是浏览器没有生成文件对话框。

这是我的控制器的样子：

```
@RequestMapping(value="/exportBoxes/{type}/{filename:.+}", method=RequestMethod.POST)
public String exportBoxes(@RequestBody String body,      @PathVariable String type,
                          @PathVariable String filename, HttpServletResponse response) throws IOException
{
    JsonObject jsonObject = new JsonParser().parse(body).getAsJsonObject();

    //grab the data from the JSONobject
    String data = jsonObject.get("JSONdata").getAsString();

    //create output stream writer
    PrintWriter p = new PrintWriter(response.getOutputStream());

    //set response type and print header
    if(type.equals("csv"))
    {
        response.setContentType("text/csv");
        response.setHeader("Content-Disposition", "attachment; filename=\"" + filename + "\"");
    }

    //print the points to the file
    for(int i = 0; i < splitPoints.length; i++)
    {
        //print remainder of CSV file - abstracted
    }

    p.flush(); //flush the stream
    response.flushBuffer();
    p.close(); //close the stream

    return "success";
} 
```

这是发布数据的客户端函数：

```
DAService.prototype.exportBoxes = function(type, filename, data) {
    var path       = 'api/rest/da/exportBoxes/' + type + '/' + filename
    var url        = (this.connection) ? this.connection + path : path;
    var JSONdata   = '';
    var returnType = ''

    //create JSON string to pass to Java controller
    if(type == 'csv')
    {
        JSONdata   = '{ "JSONdata" : "' + data.replace(/ /g, '') + '" }';
        returnType = 'text/csv';
    }
    else
    {
        throw "Invalid export format " + type;
    }

    $j.ajax({
        url:         url,
        contentType: 'application/json',
        type:        'POST',
        dataType:    returnType,
        data:        JSONdata,
        success: function(returnedData){
            console.log("exportBox successful");
        },
        error: function(x,y,z) {
            console.log("exportBox failed with error '" + y + "'");
        },
        complete: function(empty, textStatus){
            console.log("exportBox complete textStatus='" + textStatus + "'");
        }
    });
}; 
```

此代码不会生成任何错误，并且服务器的响应中包含 CSV 文件，我只是无法让客户端生成下载对话框。

我错过了一件我看不到的东西，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:13:43.180

您可能想尝试发布表单而不是使用`$.ajax`：

```
var form = $('<form/>', {
  action: url,
  method: 'POST',
  css: { display: 'none' },
  html: $('<input/>', {name: 'JSONdata', value: data.replace(/ /g, '') })
});
$('body').append(form);
form.submit(); 
```

（我还没有测试过。）关键是当你真正发布一个表单时，浏览器知道解释响应正文，它应该注意到你的附件。

# perl - 如何控制 TestSuites 的执行顺序？

> ID：11438423
> 
> 赞同：1
> 
> 时间：2012-07-11T17:45:52.810
> 
> 标签：perl, unit-testing, testcase

我有许多使用[Test::Unit::TestCase](http://search.cpan.org/~mcast/Test-Unit-0.25/lib/Test/Unit/TestCase.pm)包的测试套件，由于它是一个并行环境，我需要修改它们以确保一个[TestSuite](http://search.cpan.org/~mcast/Test-Unit-0.25/lib/Test/Unit/TestSuite.pm)在另一个完成之前不会启动。根据文档，似乎有一种方法可以控制套件执行的顺序：

> 如果需要指定测试顺序，可以执行以下操作之一：
> 
> *   提供一个返回 Test::Unit::TestSuite 的 suite() 方法。

但是，似乎没有任何示例说明如何执行此操作。这实际上可能吗？如果可以，应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:21:37.053

测试很有洞察力。

```
$ cpanm --look Test::Unit::TestCase
$ ack -l 'sub suite' t 
```

> [`t/tlib/SuiteTest.pm`](https://metacpan.org/source/MCAST/Test-Unit-0.25/t/tlib/SuiteTest.pm)
> 
> `t/tlib/AssertTest.pm`
> 
> `t/tlib/AllTests.pm`

# css - css列出奇偶类

> ID：11438426
> 
> 赞同：-1
> 
> 时间：2012-07-11T17:45:59.057
> 
> 标签：css, css-float, css-selectors

谁能帮我解决我的问题。我正在尝试使用 css 为奇数和偶数列表元素创建单独的样式。偶数代码可以完美运行，但奇数代码如果我做错了什么，请不要告诉我。

```
#entries-content.list ul.col-1 li:nth-child(odd) .time { 
    position:absolute;
    width:19px;
    height:21px;
    background-image:url(images/arrow.png);
    background-position:-20px -21px;
    float:right 
}

#entries-content.list ul.col-1 li:nth-child(even) .time { 
    position:absolute;
    margin:20px 0 0 -15px;
    width:19px;
    height:21px;
    background-image:url(images/arrow.png);
    background-position: 0px -21px; 
    float:left;
} 
```

奇数列表项不会浮动到右侧，宽度和高度也不起作用。偶数代码运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:52:14.337

`position:absolute`将从其父元素流中删除您的元素。在这些元素上使用`float: value`将导致[不应用浮点数](http://www.w3.org/TR/CSS2/visuren.html#float-position)：

> [...] 这个属性指定了一个盒子是应该向左浮动、向右浮动还是根本不浮动。可以为任何元素设置它，但仅适用于生成**非绝对定位**框的元素。[...]

由于您不使用任何定位值（`top`, `left`, `right`, `bottom`），我假设您可以删除`position:absolute`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:50:16.957

我不知道这是否是问题所在，但缺少分号：

```
background-image:url(images/arrow.png);background-position:-20px -21px;float:right; } 
```

编辑：您可以使用左右而不是浮动，因为您使用`position: absolute`.

注意：你必须在父div上使用`position: absolute`or `relative`，否则可能是left和right没有你想要的效果。

```
#entries-content.list ul.col-1 li:nth-child(odd) .time { 
    position:absolute;
    width:19px;
    height:21px;
    background-image:url(images/arrow.png);
    background-position:-20px -21px;
    right: 0px;
}

#entries-content.list ul.col-1 li:nth-child(even) .time { 
    position:absolute;
    margin:20px 0 0 -15px;
    width:19px;
    height:21px;
    background-image:url(images/arrow.png);
    background-position: 0px -21px; 
    left: 0px;
} 
```

# mysql - 错误 #1046 - XAMPP 上未选择数据库 SQL 导入

> ID：11438427
> 
> 赞同：18
> 
> 时间：2012-07-11T17:46:00.737
> 
> 标签：mysql, sql, drupal, phpmyadmin, xampp

我正在尝试将 SQL 数据库从我的 Drupal 生产站点导入本地计算机上的沙盒测试站点。我目前在工作时在我的机器上使用 XAMPP。

我已经下载了我的数据库`aipiadxxm_if9DHdr.sql`，然后我转到 phpMyAdmin`http://localhost/phpmyadmin/index.php`以 -> 导入。

导入数据库后，出现此错误：

```
SQL query:
--
-- Database: `aipiadxxm_if9DHdr.sql`
--
-- --------------------------------------------------------
--
-- Table structure for table `if9d_access`
--
CREATE TABLE IF NOT EXISTS `if9d_access` (
`aid` int( 11 ) NOT NULL AUTO_INCREMENT ,
`mask` varchar( 255 ) NOT NULL default '',
`type` varchar( 255 ) NOT NULL default '',
`status` tinyint( 4 ) NOT NULL default '0',
PRIMARY KEY ( `aid` )
) ENGINE = MYISAM DEFAULT CHARSET = utf8 AUTO_INCREMENT =1;

MySQL said: Documentation
#1046 - No database selected 
```

是什么导致此错误消息：`#1046 - No database selected`？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-11T18:33:01.247

在为表结构和数据导入 SQL 之前，您需要在沙盒机器上创建和/或选择数据库。

在 phpMyAdmin 中，这意味着从侧边栏中选择一个数据库，*然后*使用它的导入选项卡。如果您要填写的数据库不存在，您必须先使用`Create new database`表单创建它。

导入后，您应该确认导出-导入过程没有影响[匿名用户记录](http://drupal.org/node/1029506)（uid 0）。

# django - 关于扩展任何 Django 应用程序的问题

> ID：11438437
> 
> 赞同：0
> 
> 时间：2012-07-11T17:46:49.143
> 
> 标签：django, django-forms, pinax

我的老员工通过 PIP 安装了 Pinax，它安装在站点包中。所有的应用程序都在那里。我们自己的应用程序在我们的 Django 项目结构中。

`create_user`我想通过将'`is_active`标志切换为 False 来修改 Pinax 的帐户应用程序。目前，该应用程序使其`True`. 我还想添加其他功能`create_user`或我想做的任何功能。

```
from pinax.account import forms
class MyCustomizeForm(forms.SignupForm):
   def create_user(....):
      super(....)
      // additional... 
```

也许这个？但这不需要我至少做两个与 DB 对话的提交事务吗？

那更可取吗？此外，这样做是否需要我更改 Django 项目中的其他任何内容（用户如何注册、它使用什么视图……它使用什么形式）？

目前，我的 Django 项目中有一个应用程序应该处理`account`应用程序的扩展/定制。我无法将站点包提交给 VCS.... 我的意思是.. 我不应该在那里进行任何更改。

谢谢。

* * *

Pinax 帐户/models.py

```
class Account(models.Model):
    ...
    def its_own_method(...)
# this is in the same indentation level as class Account

def create_account(sender, instance=None, **kwargs):
    if instance is None:
        return
    account, created = Account.objects.get_or_create(user=instance)

post_save.connect(create_account, sender=User) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:00:37.313

对于这种情况，您可以使用[django 信号](https://docs.djangoproject.com/en/1.3/ref/signals/#signals)。信号适用于需要普遍分发并且并不总是知道如何将它们集成到项目中的应用程序。

您感兴趣的信号是[pre_save](https://docs.djangoproject.com/en/1.3/ref/signals/#pre-save)。您可以将 pre_save 连接到 pinax.account 模型，并在即将发生保存时收到通知。这将使您有机会对该模型实例进行更改。信号是同步的，这意味着您正在连续进行更改，就在 pinax.accounts 完成提交保存之前

# serialization - 使用 JSON.Net 将对象转换为动态对象

> ID：11438444
> 
> 赞同：2
> 
> 时间：2012-07-11T17:47:18.997
> 
> 标签：serialization, json.net

我想要做的是采用对象构造（例如，实体框架对象），然后将其转换为动态对象（认为 JSON.Net JObject 可能是最合适的），并使用附加属性扩展所述对象用于发送到客户端，或视图模板。

```
dynamic model = JS.ToJObject(myConcreteInstance);
model.AdditionalValue = "I need this stuff on the client... ";
```

这就是我所拥有的，它有效，但宁愿没有 try/catch。

```
//JS.ToJObject
public static JObject ToJObject(object input)
{
    try {
        //anonymous types throw an exception here
        //    Could not determine JSON object type for type f__AnonymousType ...
        return new JObject(input);
    } catch(Exception) {
        //fallback to serialize/deserialize, which seems wasteful
        var txt = JsonConvert.SerializeObject(
            input
            ,new IsoDateTimeConverter()
            ,new DataTableConverter()
            ,new DataSetConverter()
        );
        return JObject.Parse(txt);
    }
}
```

# sql - 什么是儒略日期格式

> ID：11438446
> 
> 赞同：2
> 
> 时间：2012-07-11T17:47:21.943
> 
> 标签：sql, oracle, to-date, julian-date

我已经通过 SQL 中的查询来将我们输入的数字转换为 word 格式查询是

```
select to_char(to_date(&num,'J'),'JSP') from dual;

 TO_CHAR(TO_DATE(678,'J'),'JSP')
 -------------------------------
 SIX HUNDRED SEVENTY-EIGHT 
```

通常，儒略日期格式会给出添加到儒略日期的天数，即`31-DEC-4712` 我无法理解它如何将每个数字转换为单词。

帮助我了解它的实际作用......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T18:48:41.033

将日期转换为 julian 的 to_date 函数不对以简单的英文单词出现的结果负责。那就是以“JSP”为参数的 to_char 函数。

我会解释，但实际上我认为下面链接中的解释可以比我解释得更好。

这是一个很好的 Ask Tom 帖子，解释了 Julian Date。

[http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:1406145293951](http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:1406145293951)

这里是另一个很好的 Ask Tom 帖子，它解释了 to_char 和 'JSP' 如何给你英文单词的数字。

[http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:18305103094123](http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:18305103094123)

# java - 使用 Spring-Data-Rest 以 XML 而不是 JSON 的形式返回响应

> ID：11438450
> 
> 赞同：4
> 
> 时间：2012-07-11T17:47:47.947
> 
> 标签：java, xml, json, rest, spring-data-rest

[Spring-data-rest](http://www.springsource.org/spring-data/rest)目前是 RC1（7 月 16 日 GA），但文档仍然有点粗略。到目前为止，我发现的所有示例代码都显示默认为 JSON 的响应，但我需要 XML，理想情况下是基于 ACCEPT 标头的 XML 或 JSON。我[在 DZone 链接中的一些评论中](http://www.dzone.com/links/spring_data_rest_100m2_released.html)发现了一个来源，表明将支持 XML。但那是在 M2 发布期间发布的，在 RC1 之前。我也没有在项目下的问题中看到任何内容。

那么有没有人知道如何让 RC1（或 SNAPSHOT）生成 XML 来代替 JSON 或除了 JSON 之外。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T20:52:28.813

我希望在 Spring Data REST 中生成 XML 有一个简单的答案，但我还没有找到。我们默认使用 JSON，因为我们认为这是一个用于传输对象的超级简单和轻量级的“协议”，并且在大多数情况下都足够好用。

XML 有几个问题我们还没有找到合理的答案：

*   如何在 XML 中表示对象？我是使用属性名称作为元素名称，还是使用标准元素名称并将属性名称放在属性中？
*   我在哪里确定属性的类型（无论是复杂的还是简单的、Long、BigInteger 或你有什么）？
*   我是否放弃了所有自定义映射信息而只使用 JAXB 或 Spring OXM？
*   我该如何处理链接？我是否使用 Atom 命名空间链接元素？
*   如果我已经在使用 Atom，那么为什么不对所有内容都使用 Atom 表示呢？

由于回答这些问题必然会涉及到比我们还没有的更多的社区意见，因为这个项目是如此新，所以我想我们会等到 1.0 后的版本来添加 XML 支持。如果在这个方向上有足够的动力，优先事项显然会改变，但我只是认为下周不会发生这种情况。

您可以覆盖一些机器（毕竟这只是一个 Spring MVC 应用程序）以产生您想要的任何类型的响应。如果您使用最新的快照并覆盖[方法`RepositoryRestMvcConfiguration.contentNegotiatingViewResolver()`，](http://goo.gl/xqTAF)您可以提供来自导出器的 DTO 的完全不同的表示。[这在 wiki 中](http://goo.gl/HKKRQ)有所提及。您必须检查[的源代码`JsonView`](http://goo.gl/vvZRK)以获取有关 DTO 内部外观的必要详细信息，但`JsonView`用`MyOwnXmlView`.

*注意：*这仅适用于当前版本的 REST 导出器。GA 版本将有不同的机器来渲染输出。不过，我将提供用于执行任何类型的输出渲染的钩子，因此您应该能够通过在配置上设置属性来覆盖输出渲染。如果您为此版本创建`View`子类，则可能只需将其更改`HttpMessageConverter`为 GA 版本的子类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-30T14:01:05.007

好吧，使用最新的 Spring IO 平台，我们可以实现这一点，而使用 IO 平台，我们也不必担心版本。

已经在另一个堆栈溢出链接中发布了如何实现如下：

[支持 XML 的 Spring Boot REST](https://stackoverflow.com/questions/32654291/spring-boot-rest-with-xml-support/41397440#41397440)

# python - Django 的 login_required 装饰器不会重定向到上一页

> ID：11438451
> 
> 赞同：2
> 
> 时间：2012-07-11T17:47:49.227
> 
> 标签：python, django, redirect, django-templates, django-views

我在简短版本中的问题：

我已将`login_required`装饰器添加到我的一个视图中。如果我在执行此视图的浏览器中输入 URL，如果用户未通过身份验证，浏览器将正确重定向到包含我的登录表单的 URL。但是，浏览器永远不会重定向回上一页，我不知道为什么这不起作用。我已经尝试了数百种方法。

我在长版本中的问题：

我有一个带有单个应用程序的 Django 项目，我们称之为`my_app`. 我项目的所有模板都位于`templates/my_app/`. 我有一个名为的模板`main.html`，其中包含多个表单，其中包括我的登录表单。使用一个名为 的附加`POST`参数`form-type`，我检查哪些表单已提交。代码如下所示：

```
def process_main_page_forms(request):

    if request.method == 'POST':
        if request.POST['form-type'] == u'login-form':
            template_context = _log_user_in(request)

        elif request.POST['form-type'] == u'registration-form':
            template_context = _register_user(request)

        elif request.POST['form-type'] == u'password-recovery-form':
            template_context = _recover_password(request)

    else:
        template_context = {
            'auth_form': AuthenticationForm(),
            'registration_form': RegistrationForm(),
            'password_recovery_form': EmailBaseForm()
        }

    return render(request, 'my_app/main.html', template_context) 
```

该函数`_log_user_in()`如下所示：

```
def _log_user_in(request):

    message = ''
    username = request.POST['username']
    password = request.POST['password']
    user = authenticate(username=username, password=password)

    if user is not None:
        if user.is_active:
            login(request, user)
        else:
            message = 'Your account has been disabled. ' \
                      'Please contact the administrator.'
    else:
        message = 'Your username and password didn\'t match. Please try again.'

    template_context = {
        'auth_form': AuthenticationForm(),
        'registration_form': RegistrationForm(),
        'password_recovery_form': EmailBaseForm(),
        'message': message,
}

    return template_context 
```

我还在模板中包含了必要的`<input>`元素，例如，对于登录表单，这是：

```
<input type="hidden" name="form-type" value="login-form" />
<input type="hidden" name="next" value="{{ next }}" /> 
```

此视图的 URL 模式是：

```
url(r'^$', process_main_page_forms, name='main-page') 
```

我的第二个视图呈现了两种表单，用于更改经过身份验证的用户的电子邮件地址和密码。它看起来像这样：

```
@login_required(login_url='/')
def change_user_credentials(request):

    if request.method == 'POST':

        if request.POST['form-type'] == u'change-email-form':
            template_context = _change_email_address(request)

        elif request.POST['form-type'] == u'change-password-form':
            template_context = _change_password(request)

    else:
        template_context = {'change_email_form': ChangeEmailForm()}

    return render(request, 'my_app/user.html', template_context) 
```

第二个视图的 URL 模式是：

```
url(r'^account/$', change_user_credentials, name='user-page') 
```

每当我`/account/`在未经身份验证的情况下访问时，我都会成功地重定向到包含登录表单的主页。生成的 URL`http://127.0.0.1:8000/?next=/account/`包含必要的`next`参数。但是，当我登录我的帐户时，我仍然在主页上。`next`尽管我在登录表单中提供了必要的参数，但我从未被重定向到用户页面。好像这个参数一直是空的，不知道为什么。我的代码中也没有任何其他重定向调用。

你能帮我解决这个问题吗？非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:57:48.913

可能是一个陈词滥调的答案，但没有发生重定向的原因是因为您似乎没有对`next`查询参数做任何事情。

事实上，如果用户成功登录，您会显示相同的页面（尽管使用不同的上下文字典），就好像他们试图做其他事情一样：

```
def process_main_page_forms(request):
    if request.method == 'POST':
        if request.POST['form-type'] == u'login-form':
            template_context = _log_user_in(request)

        ...
    ...

    return render(request, 'my_app/main.html', template_context) 
```

正如[Django 文档所解释](https://docs.djangoproject.com/en/1.4/topics/auth/#django.contrib.auth.views.login)的那样，它`contrib.auth.views.login()`是处理`next`参数的函数，并且您没有使用该视图（尽管您使用的是名称相同的混淆*函数*）。[`contrib.auth.login`](https://docs.djangoproject.com/en/1.4/topics/auth/#django.contrib.auth.login)

 *您应该只使用包含的视图（除了 processing `next`，还检查），或者将重定向功能添加到您的视图中，在这种情况下，除非您确定需要，否则`is_active`可能值得将身份验证代码带入别处：`process_main_page_forms()``_log_user_in()`

```
from django.http import HttpResponseRedirect
from django.conf import settings

def process_main_page_forms(request):
    if request.method == 'POST':
        if request.POST['form-type'] == u'login-form':
            username = request.POST['username']
            password = request.POST['password']

            user = authenticate(username=username, password=password)

            if user is not None:
                if user.is_active:
                    login(request, user)
                    if request.GET.get('next', False):
                        return HttpResponseRedirect(request.GET.get('next'))
                    else:
                        return HttpResponseRedirect(settings.LOGIN_REDIRECT_URL)
                else:
                    message = 'Your account has been disabled.'
            else:
                message = 'Your username and password didn\'t match. Please try again.'

            # If we've reached this point then the login failed
            template_context = {
                'auth_form': AuthenticationForm(),
                'registration_form': RegistrationForm(),
                'password_recovery_form': EmailBaseForm(),
                'message': message,
            }
        elif ...:
            # Do things with other form types
    else:

    return render(request, 'my_app/main.html', template_context) 
```

的[示例用法`contrib.auth.login`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.login)如下：

```
def my_view(request):
    username = request.POST['username']
    password = request.POST['password']
    user = authenticate(username=username, password=password)
    if user is not None:
        if user.is_active:
            login(request, user)
            # Redirect to a success page.
        else:
            # Return a 'disabled account' error message
    else:
        # Return an 'invalid login' error message. 
```

您的代码几乎就在那里，但是您缺少“重定向到成功页面”部分，这`next`将发挥作用。*

# ruby - 太阳黑子/Solr：非字母字符

> ID：11438453
> 
> 赞同：4
> 
> 时间：2012-07-11T17:47:53.323
> 
> 标签：ruby, solr, lucene, sunspot, dismax

我将 Solr 与 Sunspot/dismax 一起使用。是否可以查询非字母字符？IE：

`~ ! @ # $ % ^ & * ( ) _ + - = [ ] { } | \`

我知道`+/-`必须转义，因为它们是 dismax 包含/排除运算符。但是当我搜索以下任何字符时，我没有得到任何匹配项：

```
Foo.search { fulltext '=' }.results.length   # => 0
Foo.search { fulltext '\=' }.results.length  # => 0 
```

然而：

```
Foo.search { fulltext 'a'}.results.length    # => 30 
```

这是我正在使用的标记器配置：

```
 <fieldType name="text" class="solr.TextField" omitNorms="false">
        <analyzer>
            <tokenizer class="solr.StandardTokenizerFactory"/>
            <filter class="solr.StandardFilterFactory"/>
            <filter class="solr.LowerCaseFilterFactory"/>
        </analyzer>
    </fieldType> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T08:29:18.287

Solr`StandardTokenizer`删除了所有“特殊字符”，因为它已针对纯文本进行了优化。因此，例如 '=' 将不会被发现，因为它在索引期间被从文本中删除。

保留所有字符的标记器之一是[`WhitespaceTokenizer`](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters/#solr.WhitespaceTokenizerFactory)，它仅在空格上拆分输入。您需要评估它是否能很好地解决您的问题，因为它会产生如下标记：

> 20 岁的狐狸跳过懒狗。-> '20 岁'、'狐狸'、'jumps'、'over'、'the'、'lazy'、'dog.'

您可能需要提供自己的分词器（通过实现一个分词器不是必需的，您可以为拆分字符定义适当的正则表达式并使用[`PatternTokenizer`](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters/#solr.PatternTokenizerFactory)）或使用过滤器，如[`WordDelimiterFilter`](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters/#solr.WordDelimiterFilterFactory)or [`PatternReplaceFilter`](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters/#solr.PatternReplaceFilterFactory)。

# css - 有没有比在 SublimeText2 中编辑 HTML/CSS 然后在浏览器中按 F5/刷新来查看更改更好的工作流程？

> ID：11438462
> 
> 赞同：1
> 
> 时间：2012-07-11T17:48:13.673
> 
> 标签：css, html, browser, sublimetext2

目前，我必须在更改代码后使用 alt-tab 到浏览器，然后按 F5 来查看浏览器中的更改。有没有办法在进行更改时自动刷新浏览器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:26:44.037

Firebug 允许您实时编辑 CSS，尽管它有点错误。尽管如此，它对于较小的编辑还是很有用的。它甚至可能具有比我还没有发现的更多的功能。

# android - Android GCM 基本实现

> ID：11438464
> 
> 赞同：28
> 
> 时间：2012-07-11T17:48:17.010
> 
> 标签：android, google-cloud-messaging

**更新：**我修复了下面代码中的问题，因此这是一个很好的基本工作示例，说明如何使用`GCM`

* * *

所以，我正在尝试在`GCM`我的应用程序中实现 Android。以下是我添加到清单中的相关部分：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="20" />

<permission
    android:name=".permission.C2D_MESSAGE"
    android:protectionLevel="signature" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<uses-permission android:name=".permission.C2D_MESSAGE" />
<uses-permission android:name="android.permission.WAKE_LOCK"/>
<uses-permission android:name="android.permission.GET_ACCOUNTS"/> 
```

...

```
<receiver
    android:name="com.google.android.gcm.GCMBroadcastReceiver"
    android:permission="com.google.android.c2dm.permission.SEND" >
    <intent-filter>
        <action android:name="com.google.android.c2dm.intent.RECEIVE" />
        <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
        <category android:name="com.badbob.app.gmctestapp" />
    </intent-filter>
</receiver>

<service android:name=".GCMIntentService" /> 
```

我已将以下代码添加到我的主要活动的 onCreate 中：

```
 GCMRegistrar.checkDevice( this );
    GCMRegistrar.checkManifest( this );
    final String regId = GCMRegistrar.getRegistrationId( this );
    if( regId.equals( "" ) ) {
        GCMRegistrar.register( this, GCM_SENDER_ID );
    }
    else {
        Log.v( LOG_TAG, "Already registered" );
    } 
```

我还创建了`GCMIntenetService`这样的类：

```
public class GCMIntentService extends GCMBaseIntentService {

    private static final String LOG_TAG = "GetAClue::GCMIntentService";

    public GCMIntentService() {
        super( GCM_SENDER_ID );
        // TODO Auto-generated constructor stub
        Log.i( LOG_TAG, "GCMIntentService constructor called" );
    }

    @Override
    protected void onError( Context arg0, String errorId ) {
        // TODO Auto-generated method stub
        Log.i( LOG_TAG, "GCMIntentService onError called: " + errorId );
    }

    @Override
    protected void onMessage( Context arg0, Intent intent ) {
        // TODO Auto-generated method stub
        Log.i( LOG_TAG, "GCMIntentService onMessage called" );
        Log.i( LOG_TAG, "Message is: " + intent.getStringExtra( "message" ) );
    }

    @Override
    protected void onRegistered( Context arg0, String registrationId ) {
        // TODO Auto-generated method stub
        Log.i( LOG_TAG, "GCMIntentService onRegistered called" );
        Log.i( LOG_TAG, "Registration id is: " + registrationId );
    }

    @Override
    protected void onUnregistered( Context arg0, String registrationId ) {
        // TODO Auto-generated method stub
        Log.i( LOG_TAG, "GCMIntentService onUnregistered called" );
        Log.i( LOG_TAG, "Registration id is: " + registrationId );
    }
} 
```

当我运行它时，我在**LogCat**中得到了这个：

```
07-11 11:28:46.340: V/GCMRegistrar(27435): Registering receiver
07-11 11:28:46.370: D/GCMRegistrar(27435): resetting backoff for com.badbob.app.getacluebeta
07-11 11:28:46.380: V/GCMRegistrar(27435): Registering app com.badbob.app.getacluebeta of senders 128205395388 
```

从我从其他帖子中收集到的信息中，我应该获得一个注册 ID，`LogCat`但我没有。也`onRegistered()`永远`GCMIntentService`不会被调用。那我做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-11T18:47:03.933

这是不正确的

```
protected GCMIntentService( String senderId ) {         
super(senderId);} 
```

正如文档中所述。您必须为 GCMIntentService 声明一个 PUBLIC、NO ARGUMENT 构造函数。否则后台意图服务无法正确实例化 GCMIntentService。

```
public GCMIntentService(){
super(senderID);} 
```

senderID 可以是硬编码的常量字符串，因为它不会再随新的 GCM 更改。使用正确的 senderID 也很重要。24 小时足以让您处于活动状态，因此如果我的上述解决方案不起作用，您使用的发件人 ID 不正确。其他一切看起来都很棒。

当您浏览 Google API 访问页面时，senderID 位于您的网络浏览器的 URL 中。单击 GCM，浏览器 URL 中将显示一个 12 位数字。这是正确使用的密钥。不是您的 API 密钥。这是在应用服务器端使用的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-27T10:14:00.647

我也有这个烦人的错误，直到现在。问题是，我在另一个包中声明了intentservice......即使我在android清单中声明了名称并且没有放置classnotfound异常......根本找不到错误......所以我确保intentservice 在根包中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T19:51:41.597

我认为您在代码中存在一些问题。

您应该在清单文件中注册自己的广播接收器，该接收器将触发`<service android:name=".GCMIntentService" />`.

因此，您必须像我在下面写的那样做。

*   接收器必须声明为：

    ```
    <receiver
        android:name="your.package.name.YourBroadCastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
        </intent-filter> 
    ```

*   将启动服务的广播接收器。

    ```
    public class YourBroadCastReceiver extends BroadcastReceiver {

    @Override
     public final void onReceive(Context context, Intent intent) {
         GCMIntentService .runIntentInService(context, intent);
         setResult(Activity.RESULT_OK, null, null);
     }  
    } 
    ```

我建议您查看 GCM 官方[文档](http://developer.android.com/guide/google/gcm/gcm.html)，您可以在其中找到一个很好的示例。

而且...不要忘记在主 Google API 控制台页面中启用**Google Cloud Messaging服务。**

让我知道它是否有帮助！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-05T10:23:28.997

**请参阅下面的GCM**教程：-

[http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-29T06:43:26.213

*在这里，我已经为如何从头开始获取 RegID 和通知编写了几个步骤*

1.  在 Google Cloud 上创建/注册应用
2.  使用开发设置 Cloud SDK
3.  为 GCM 配置项目
4.  获取设备注册 ID
5.  发送推送通知
6.  接收推送通知

您可以在下面的 URL 链接中找到完整的教程

> [**Android 推送通知入门：最新的 Google Cloud Messaging (GCM) - 分步完整教程**](http://rdcworld-android.blogspot.in/2013/11/android-push-notification-google-cloud.html)

![在此处输入图像描述](../Images/ed9e15395f925cf425c343f1c2c6c820.png)

获取注册 ID（推送通知的设备令牌）的代码片段。

**为 GCM 配置项目**

* * *

# 更新 AndroidManifest 文件

为了在我们的项目中启用 GCM，我们需要在清单文件中添加一些权限转到 AndroidManifest.xml 并添加以下代码添加权限

```
<uses-permission android:name="android.permission.INTERNET”/>
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.WAKE_LOCK" />

<uses-permission android:name="android.permission.VIBRATE" />

<uses-permission android:name=“.permission.RECEIVE" />
<uses-permission android:name=“&lt;your_package_name_here>.permission.C2D_MESSAGE" />
<permission android:name=“&lt;your_package_name_here>.permission.C2D_MESSAGE"
        android:protectionLevel="signature" /> 
```

添加 GCM 广播接收器声明

在您的应用程序标签中添加 GCM 广播接收器声明

```
<application
        <receiver
            android:name=".GcmBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" ]]>
            <intent-filter]]>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <category android:name="" />
            </intent-filter]]>

        </receiver]]>

<application/> 
```

添加 GCM 服务声明

```
<application
     <service android:name=".GcmIntentService" />
<application/> 
```

* * *

# 获取注册 ID（推送通知的设备令牌）

**现在转到您的启动/启动活动**

添加常量和类变量

```
private final static int PLAY_SERVICES_RESOLUTION_REQUEST = 9000;
public static final String EXTRA_MESSAGE = "message";
public static final String PROPERTY_REG_ID = "registration_id";
private static final String PROPERTY_APP_VERSION = "appVersion";
private final static String TAG = "LaunchActivity";
protected String SENDER_ID = "Your_sender_id";
private GoogleCloudMessaging gcm =null;
private String regid = null;
private Context context= null; 
```

更新 OnCreate 和 OnResume 方法

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_launch);
     context = getApplicationContext();
         if (checkPlayServices()) 
     {
            gcm = GoogleCloudMessaging.getInstance(this);
            regid = getRegistrationId(context);

            if (regid.isEmpty())
            {
                registerInBackground();
            }
            else
            {
            Log.d(TAG, "No valid Google Play Services APK found.");
            }
      }
 }

@Override protected void onResume()
{
       super.onResume();       checkPlayServices();
}

# Implement GCM Required methods (Add below methods in LaunchActivity)

private boolean checkPlayServices() {
        int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);
        if (resultCode != ConnectionResult.SUCCESS) {
            if (GooglePlayServicesUtil.isUserRecoverableError(resultCode)) {
                GooglePlayServicesUtil.getErrorDialog(resultCode, this,
                        PLAY_SERVICES_RESOLUTION_REQUEST).show();
            } else {
                Log.d(TAG, "This device is not supported - Google Play Services.");
                finish();
            }
            return false;
        }
        return true;
 }

private String getRegistrationId(Context context) 
{
   final SharedPreferences prefs = getGCMPreferences(context);
   String registrationId = prefs.getString(PROPERTY_REG_ID, "");
   if (registrationId.isEmpty()) {
       Log.d(TAG, "Registration ID not found.");
       return "";
   }
   int registeredVersion = prefs.getInt(PROPERTY_APP_VERSION, Integer.MIN_VALUE);
   int currentVersion = getAppVersion(context);
   if (registeredVersion != currentVersion) {
        Log.d(TAG, "App version changed.");
        return "";
    }
    return registrationId;
}

private SharedPreferences getGCMPreferences(Context context) 
{
    return getSharedPreferences(LaunchActivity.class.getSimpleName(),
                Context.MODE_PRIVATE);
}

private static int getAppVersion(Context context) 
{
     try 
     {
         PackageInfo packageInfo = context.getPackageManager()
                    .getPackageInfo(context.getPackageName(), 0);
            return packageInfo.versionCode;
      } 
      catch (NameNotFoundException e) 
      {
            throw new RuntimeException("Could not get package name: " + e);
      }
}

private void registerInBackground() 
{     new AsyncTask() {
     Override
     protected Object doInBackground(Object... params) 
     {
          String msg = "";
          try 
          {
               if (gcm == null) 
               {
                        gcm = GoogleCloudMessaging.getInstance(context);
               }
               regid = gcm.register(SENDER_ID);               Log.d(TAG, "########################################");
               Log.d(TAG, "Current Device's Registration ID is: "+msg);     
          } 
          catch (IOException ex) 
          {
              msg = "Error :" + ex.getMessage();
          }
          return null;
     }     protected void onPostExecute(Object result) 
     { //to do here };
  }.execute(null, null, null);
} 
```

* * *

**注意**：请存储 REGISTRATION_KEY，将 PN 消息发送到 GCM 很重要，也请保留在我的，这对于所有设备都是唯一的，通过使用这个只有 GCM 会发送推送通知。

# 接收推送通知

添加 GCM 广播接收器类

由于我们已经在 Manifest 文件中声明了“GcmBroadcastReceiver.java”，所以让我们以这种方式创建此类更新接收器类代码

```
public class GcmBroadcastReceiver extends WakefulBroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) 
    {        ComponentName comp = new ComponentName(context.getPackageName(),
                GcmIntentService.class.getName());        startWakefulService(context, (intent.setComponent(comp)));
        setResultCode(Activity.RESULT_OK);
        Toast.makeText(context, “wow!! received new push notification", Toast.LENGTH_LONG).show();
    }
} 
```

添加 GCM 服务类

由于我们已经在 Manifest 文件中声明了“GcmBroadcastReceiver.java”，所以让我们以这种方式创建此类更新接收器类代码

```
public class GcmIntentService extends IntentService
{     public static final int NOTIFICATION_ID = 1;     private NotificationManager mNotificationManager;     private final static String TAG = "GcmIntentService";     public GcmIntentService() {
     super("GcmIntentService");     
     }     @Override
     protected void onHandleIntent(Intent intent) {
          Bundle extras = intent.getExtras();
          Log.d(TAG, "Notification Data Json :" + extras.getString("message"));

          GoogleCloudMessaging gcm = GoogleCloudMessaging.getInstance(this);
          String messageType = gcm.getMessageType(intent);          if (!extras.isEmpty()) {          if (GoogleCloudMessaging.MESSAGE_TYPE_SEND_ERROR
               .equals(messageType)) {
               sendNotification("Send error: " + extras.toString());
          } else if (GoogleCloudMessaging.MESSAGE_TYPE_DELETED
          .equals(messageType)) {
          sendNotification("Deleted messages on server: "
          + extras.toString());          // If it's a regular GCM message, do some work.
          } else if (GoogleCloudMessaging.MESSAGE_TYPE_MESSAGE
          .equals(messageType)) {
          // This loop represents the service doing some work.
          for (int i = 0; i < 5; i++) {
               Log.d(TAG," Working... " + (i + 1) + "/5 @ "
               + SystemClock.elapsedRealtime());               try {
                    Thread.sleep(5000);
               } catch (InterruptedException e) {
               }
             }
             Log.i(TAG, "Completed work @ " + SystemClock.elapsedRealtime());
             sendNotification(extras.getString("message"));
           }
        }        // Release the wake lock provided by the WakefulBroadcastReceiver.
        GcmBroadcastReceiver.completeWakefulIntent(intent);
     }     // Put the message into a notification and post it.
     // This is just one simple example of what you might choose to do with
     // a GCM message.
     private void sendNotification(String msg) {          mNotificationManager = (NotificationManager) this
          .getSystemService(Context.NOTIFICATION_SERVICE);
          PendingIntent contentIntent = PendingIntent.getActivity(this, 0,          new Intent(this, LaunchActivity.class), 0);

          NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(          this)
          .setSmallIcon(R.drawable.icon)
          .setContentTitle("Ocutag Snap")
          .setStyle(new NotificationCompat.BigTextStyle().bigText(msg))
          .setContentText(msg)
          .setDefaults(Notification.DEFAULT_SOUND | Notification.DEFAULT_VIBRATE);

          mBuilder.setContentIntent(contentIntent);          mNotificationManager.notify(NOTIFICATION_ID, mBuilder.build());
     }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-28T22:46:11.907

如果您没有从注册中获得响应，主要原因之一是您的清单文件配置不正确 - 特别是正确地给出“package_name”（您的应用程序包名称，如 com.xxx.yyy `<permission>`）`<intent filter>`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-06T17:32:57.393

[您还需要在GCMBaseIntentService.onRegistered()](http://developer.android.com/reference/com/google/android/gcm/GCMBaseIntentService.html#onRegistered%28android.content.Context,%20java.lang.String%29)回调中注册您的应用程序服务器。否则您将无法发送您的应用消息。

您真的应该查看[Google 的 GCM 演示客户端](http://code.google.com/p/gcm/source/browse/#git/samples/gcm-demo-client)，因为它提供了一个包含所有正确代码的工作示例。我们在 github 上还有一个工作示例：[airbop-client](https://github.com/indigorose/airbop-client)。它提供了一个稍微完整的示例，因为它与应用程序服务器进行了有效的交互，这对于启用 GCM 的应用程序是必需的。它适用于[AirBop](http://www.airbop.com)服务器（我帮助创建），最多可免费使用 1000 台设备。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-11T21:45:17.240

不确定这是否与您的特定问题有关，但是，我遇到了同样的问题。据我所知，一切都设置正确，但`onRegistered()`从未调用过处理程序。

我将标准`onCreate()`和`onStart()`服务`onDestroy()`方法作为 GCMIntentService 类的一部分。一旦我删除它们，处理程序就会被调用，正如预期的那样。

我的假设是，通过覆盖这些方法，我绕过了所需的代码初始化。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-18T23:29:16.293

阅读 ClouDeveloper 的帖子后，我删除了`onCreate()`,`onDestroy()`和其他*onXXX()*回调方法。另外， my`GCMIntentService.onRegistered(Context, regId)`被称为`regId`.

感谢 ClouDeveloper！

# c# - 通过保持连接打开来监视和 SQL Server 连接

> ID：11438467
> 
> 赞同：0
> 
> 时间：2012-07-11T17:48:22.420
> 
> 标签：c#, sql-server

我正在尝试监视 SQL Server 数据库连接，但我遇到了问题，或者它的行为符合设计。
我想这样做：

```
Open Connection
   Write "Open"
Leave it open for 1 minute (using System.Threading.Thread.Sleep)
   If the connection drops during this time write "Down" to the console
Close the connection
   Write "Closed" to the console
Repeat forever 
```

因此，随着我的 SQL Express 服务启动，我开始了我的代码

> 打开
> 关闭
> 打开
> 关闭

（之间有适当的时间）然后在我再次看到“打开”之后，我停止了我的 SQL Express 服务，我得到的下几行仍然是

> 打开
> 关闭
> 打开
> 关闭

现在，如果我在 SQL Express 服务停止时重新启动程序，那么我会得到正确的异常。
这是我的代码。

```
 static void Main(string[] args)
    {
        //
        string strConnectionString;
        string strEnabled;
        string strPath;
        strConnectionString = Registry.GetValue("HKEY_LOCAL_MACHINE\\SOFTWARE\\GlobalNet Direct\\DatabaseMonitor", "ConnectionString", false).ToString();
        strEnabled = Registry.GetValue("HKEY_LOCAL_MACHINE\\SOFTWARE\\GlobalNet Direct\\DatabaseMonitor", "Enabled", false).ToString();
        strPath = Registry.GetValue("HKEY_LOCAL_MACHINE\\SOFTWARE\\GlobalNet Direct\\DatabaseMonitor", "LogPath", false).ToString(); 
        do
        {
            strEnabled = Registry.GetValue("HKEY_LOCAL_MACHINE\\SOFTWARE\\GlobalNet Direct\\DatabaseMonitor", "Enabled", false).ToString(); 

            //System.Threading.Thread.Sleep(15000);

            SqlConnection myConnection = new SqlConnection(strConnectionString);

            try
            {
                myConnection.Open();

                Console.WriteLine(myConnection.State.ToString());
                System.Threading.Thread.Sleep(1000);
            }
            catch (Exception)
            {
                Console.WriteLine("Down");

            }
            try
            {
                if (myConnection.State.ToString() == "Open")
                {
                    myConnection.Close();
                    System.Threading.Thread.Sleep(1000);
                    Console.WriteLine(myConnection.State.ToString());
                }
            }
            catch (Exception e)
            {
                Console.WriteLine(e.ToString());

            }
        }while (strEnabled == "True");

    } 
```

# c# - 在 C++/CLI 中使用 getter 和 setter 覆盖基本属性

> ID：11438471
> 
> 赞同：1
> 
> 时间：2012-07-11T17:48:37.573
> 
> 标签：c#, inheritance, properties, abstract

我有一个基础对象，它实现了一个只有 getter 的属性。在我的子类中，我想同时实现：

```
public ref class NTObject
{
  property ::System::String ^ Name {
    virtual ::System::String ^ get ();
  }
};

public ref class NTNamed
  : ROOTNET::NTObject,
    ROOTNET::Interface::NTNamed
{
  property ::System::String ^ Name {
    virtual ::System::String ^ get () override;
    virtual void set (::System::String ^ value);
  }
}; 
```

然后，当我编写以下简单代码时：

```
 static void Main(string[] args)
    {
        var n = new ROOTNET.NTNamed("hi", "there");
        Console.WriteLine(n.Name);
        n.Name = "hi there";
        Console.WriteLine(n.Name);
        var obj = n as ROOTNET.NTObject;
        Console.WriteLine(obj.Name);
    } 
```

我在“n.Name =”行上收到构建错误 - “无法将属性或索引器 ROOTNET.NTObject.Name 分配给 - 它是只读的” - 简而言之，它缺少我分类为的事实NTNamed 对象。因此，我将上面的“override”关键字替换为“new”关键字。现在它将构建，并且上面的代码可以正常工作。但是，我认为代码片段的最后两行不起作用——它将调用 NTObject 的 Name getter，而不是 NTNamed 的 getter。

我在 stackoverflow 中看到了其他关于 C# 中这个问题的问题，但我认为，因为我对如何定义 getter/setter 有非常精细的控制，所以我可以解决这些问题（例如，参见[C# Setter for an抽象吸气剂](https://stackoverflow.com/questions/3075158/setter-for-a-clr-property-that-is-defined-in-an-abstract-base-class-with-only-a)。

有没有一种方法可以像我编写上面的代码一样使用 override 关键字，而不是 new 关键字？非常感谢！

# multiprocessing - AutoIt 中的多进程

> ID：11438478
> 
> 赞同：0
> 
> 时间：2012-07-11T17:49:01.133
> 
> 标签：multiprocessing, autoit

我有一个程序可以从列表和编辑框中下载链接。我想创建一个按钮“下载”/“暂停”来运行和中断下载功能。但我不知道。

如何使用 AutoIt 创建多进程程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:17:36.750

使用 Run 启动子进程，并确保存储 pid。然后你需要一些进程间通信的方法。有很多方法可以做到这一点。以下是很常见的：消息窗口（带有 _SendMessage 和 WM_COPYDATA）、TCP、命名管道和数据库。

在您的情况下，消息窗口可能是最合适的。使用完全标准的 AutoIt 功能非常容易设置。使用它的一个很好的例子是[here](http://www.autoitscript.com/forum/topic/119502-solved-wm-copydata-x64-issue/)。

# database - 数据库 blob 与磁盘存储文件

> ID：11438486
> 
> 赞同：7
> 
> 时间：2012-07-11T17:49:41.857
> 
> 标签：database, file-upload, blob

所以我有这个要求，说应用程序必须让用户每月上传和下载大约 6000 个文件（主要是 pdf、doc、xls）。

我在考虑这个的最佳解决方案。问题是我是否会在我的数据库中使用 BLOb 或使用简单的文件层次结构来写入/读取这些文件。

应用架构基于 Java 1.6、Spring 3.1 和 DOJO、Informix 10.X。

所以我来这里只是为了根据你的经验得到建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T08:02:08.580

当询问什么是“最佳”解决方案时，最好包括您的评估标准——速度、成本、简单性、维护等。

Mikko Maunu 给出的答案几乎是钱。我已经 20 年没有使用过 Informix 了，但是大多数数据库在处理 BLOB 时有点慢——尤其是让 BLOB 进出数据库的步骤可能很慢。

随着越来越多的用户同时访问系统，这个问题往往会变得更糟，特别是如果他们使用 Web 应用程序 - 应用程序服务器必须非常努力地将文件进出数据库，可能为这些请求消耗更多的内存比正常，完成与文件相关的请求可能比“正常”页面花费更长的时间。

这可能会导致网络服务器在中等负载下变慢。如果您选择将文档存储在数据库中，我强烈建议您运行一些性能测试以查看您是否有问题 - 这种解决方案往往会暴露您的设置中的缺陷，否则这些缺陷不会暴露出来（网络速度慢与数据库服务器的连接、Web 服务器中的 RAM 不足等）

为避免这种情况，我已将文档的“主”副本存储在数据库中，以便将它们全部备份在一起，并且我可以向数据库询问诸如“我有用户 x 的所有文档吗？”之类的问题。但是，我在网络服务器上使用了缓存来避免从数据库中读取超出我需要的文档。如果您有像内容管理系统这样的“一次写入，多次读取”的时间解决方案，则此方法非常有效，缓存可以在其中获得保留。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-12T07:25:14.243

如果您在数据库中有与这些文件相关的其他数据，则将文件存储到文件系统会使其更加复杂：

1.  备份应单独进行。
2.  事务必须单独实现（尽可能用于文件系统操作）。
3.  数据库和文件系统结构之间的完整性检查并不是开箱即用的。
4.  无级联：删除用户后删除用户图片。
5.  首先，您必须从数据库中查询文件的路径，然后从文件系统中选择一个。

基于文件系统的解决方案的好处在于，有时能够直接访问文件很方便，例如将部分图像复制到其他地方。当然，存储二进制数据也可以极大地改变数据库的大小。但无论如何，这两种解决方案都需要更多的磁盘存储空间。

当然，所有这些都可能需要比当前可用的更多的数据库资源。通常会严重影响性能，尤其是在本地文件系统和远程数据库之间进行决策时。在您的情况下（每月 6000 个文件）原始性能不会有问题，但延迟可能会。

# entity-framework - 如何使用 Fluent API 正确映射实体？

> ID：11438488
> 
> 赞同：0
> 
> 时间：2012-07-11T17:49:43.830
> 
> 标签：entity-framework, foreign-keys, code-first, fluent

我有两个实体，一个用户和一个用户配置文件。User的PK是UserId，UserProfile的PK是UserProfileId。每次在我的应用程序中创建一个新用户时，我都会创建一个新的 UserProfile，其 PK 与 User 中的 PK 相同。然后，当我尝试更新 UserProfile 上的属性时，我最终会遇到多重性错误或架构无效错误。这是我的两个实体：

```
public class User
{
    public Guid UserId { get; set; }
    public string UserName { get; set; }
    public string Email { get; set; }
    public string Password { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int? PhoneExtension { get; set; }
    public string Comment { get; set; }
    public Boolean IsApproved { get; set; }
    public int PasswordFailuresSinceLastSuccess { get; set; }
    public DateTime? LastPasswordFailureDate { get; set; }
    public DateTime? LastActivityDate { get; set; }
    public DateTime? LastLockoutDate { get; set; }
    public DateTime? LastLoginDate { get; set; }
    public string ConfirmationToken { get; set; }
    public DateTime? CreateDate { get; set; }
    public Boolean IsLockedOut { get; set; }
    public DateTime? LastPasswordChangedDate { get; set; }
    public string PasswordVerificationToken { get; set; }
    public DateTime? PasswordVerificationTokenExpirationDate { get; set; }

    public virtual ICollection<Role> Roles { get; set; }
    public virtual UserProfile UserProfile { get; set; }
}

public class UserProfile
{
    public Guid UserProfileId { get; set; } 
    public virtual User ProfileOwner { get; set; }
    public Int64? HomePhone { get; set; }
    public Int64? MobilePhone { get; set; }

    public virtual User Manager { get; set; }
} 
```

..这是我使用 Fluent API 定义的唯一关系。

```
modelBuilder.Entity<UserProfile>()
        .HasKey(e => e.UserProfileId);
modelBuilder.Entity<UserProfile>()
        .Property(e => e.UserProfileId)
        .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);
modelBuilder.Entity<UserProfile>()
        .HasRequired(e => e.ProfileOwner)
        .WithRequiredDependent(r => r.UserProfile); 
```

最后，我的 UserService 创建了一个新用户，同时创建了一个新的 UserProfile，其 Guid UserProfileId 与用户的 Guid UserId 相同。在创建用户和配置文件后，我尝试使用我的 UserProfileService 更新 UserProfile 中的管理器：

```
public void UpdateUserProfile(UserProfile updatedUserProfile)
{
    UserProfile oldUserProfile = GetUserProfileByID(updatedUserProfile.UserProfileId);

    oldUserProfile.Manager = updatedUserProfile.Manager;
    oldUserProfile.HomePhone = updatedUserProfile.HomePhone;
    oldUserProfile.MobilePhone = updatedUserProfile.MobilePhone;

    this.SetEntityState(oldUserProfile, EntityState.Modified);
    this.UnitOfWork.SaveChanges();
} 
```

this.SetEntityState 行抛出此错误：

违反了多重性约束。关系“WhelenPortal.Data.Context.UserProfile_ProfileOwner”的角色“UserProfile_ProfileOwner_Source”具有多重性 1 或 0..1。

我一直在努力让这个工作两天，请帮忙！！！提前致谢。

根据要求，这里有一些附加信息。我在这里使用存储库模式和工作单元。我的 GetUserProfileById 代码如下。该服务使用存储库，因此我将两者都显示。

```
public UserProfile GetUserProfileByID(Guid id)
{
    if (id == null)
        throw new BusinessServicesException(Resources.UnableToRetrieveUserProfileExceptionMessage, new ArgumentNullException("id"));

    try
    {
        Model.UserProfile userProfile = _userProfileRepository.GetUserProfileByID(id);

        if (userProfile != null)
            return ToServicesUserProfile(userProfile);

        return null;
    }
    catch (InvalidOperationException ex)
    {
        throw new BusinessServicesException(Resources.UnableToRetrieveUserProfileExceptionMessage, ex);
    }
} 
```

..和存储库：

```
public UserProfile GetUserProfileByID(Guid id)
{
    return this.GetDbSet<UserProfile>().Find(id);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:53:02.937

所以在玩了很多之后，这最终对我有用，希望它可以以某种方式帮助其他人。我的 User 类保持不变，但我的 UserProfile 类更改为：

```
public class UserProfile
{
    public Guid UserProfileId { get; set; }
    public virtual User ProfileOwner { get; set; }

    public Guid? ManagerId { get; set; }
    public virtual User Manager { get; set; }

    public Int64? HomePhone { get; set; }
    public Int64? MobilePhone { get; set; }
} 
```

这是流畅的映射：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    base.OnModelCreating(modelBuilder);

    modelBuilder.Entity<User>()
        .HasOptional(u => u.UserProfile)
        .WithRequired(u => u.ProfileOwner);

    modelBuilder.Entity<UserProfile>()
        .HasOptional(u => u.Manager)
        .WithMany()
        .HasForeignKey(u => u.ManagerId);
} 
```

# c# - 如何存储 TreeViewItem ToggleButton，类似于 TreeViewItem Header 对象？

> ID：11438491
> 
> 赞同：0
> 
> 时间：2012-07-11T17:49:48.130
> 
> 标签：c#, wpf, togglebutton, treeviewitem

我希望能够访问 TreeViewItem 中的 ToggleButton，这样我就可以向它添加一个侦听器，这样 TreeViewItem 中的所有项目都不会继承侦听器。我知道您可以将 Header 分配给 TextBlock （或您想要的任何用户控件），然后为 TextBlock 分配一个侦听器，以便 TreeViewItem 中的项目不会继承侦听器。

伪代码：

```
 TreeViewItem.ToggleButton.MouseLeftButtonUp += new MouseButtonEventHandler(blah); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:49:47.670

如果我对您的理解正确，您只想在控制附加到哪个事件的控件调用事件时才对事件做出反应，然后尝试：

```
private void Click(object sender, RoutedEventArgs e)
{
    if (e.Source == sender)
    {

    }
} 
```

请注意，wpf 控件事件模型中没有侦听器继承之类的东西。您可能想了解更多有关[它](http://msdn.microsoft.com/en-us/library/ms753115.aspx)的信息。

# java - 如何使用 javap

> ID：11438492
> 
> 赞同：16
> 
> 时间：2012-07-11T17:49:52.607
> 
> 标签：java, command-line, java-native-interface

我一定是在做一些愚蠢的事情，因为这看起来很简单。出于某种原因，我无法让这个命令为我工作。我已经安装了JDK，我进入

```
/bin 
```

文件夹。我输入：

```
./javap -classpath /home/Matt/workspace/VariablesTestProject/src/ -s VariablesTest.Variable 
```

我的类的实际文件路径是

```
/home/Matt/workspace/VariablesTestProject/src/VariablesTest/Variable.java 
```

我回来的错误是：

```
ERROR:Could not find VariablesTest.Variable 
```

然而，像这样的命令有效：

```
./javap -s java.lang.String 
```

这些不是我尝试过的唯一命令。我确实尝试了我能想到的所有变化，但没有一个起作用。我的 javac 和 java 命令都可以正常工作。

有什么建议么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-11T17:53:16.683

Javap 对`.class`字节码起作用。所以将类路径指向`VariablesTestProject/out`或其他。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T10:00:52.027

如果要使用 javap 命令执行操作，请先在 cmd 提示符下进入 jar 位置。

例如：

`cd /usr/lib/jvm/java-6-openjdk-i386/jre/lib`(Linux)

`cd D:\javasoftware\Java\jdk1.6.0_43\jre\lib`（视窗）

以上位置是 rt.jar 位置。java.lang.String 是这个 jar 中的类之一。

使用 javap 您可以从此类中获取信息。

例如：

```
cd /usr/lib/jvm/java-6-openjdk-i386/jre/lib
javap java.lang.String 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-01T15:10:56.393

我发现最近使用 javap 是检查哪个版本的 JDK 在 Windows 上编译了特定的类文件：

```
javap -v path to .class file | findstr major 
```

这将为您提供主要版本号：

> 50-JDK6、51-JDK7、52-JDK8、53-JDK9。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-12T18:12:26.687

`javap`是用于查看内置类/用户定义类/接口/抽象类的 java 配置文件/方法声明的命令。

-> 如果您想查看预定义类的方法，那么如果您安装了 jdk，则在此路径`C:\Program Files\Java\jre1.8.0_171\lib`中`rt.jar`。

-> 在某个文件夹 D:\rt 中提取该 rt.jar 文件，然后转到此文件夹并键入 `javap java.util.collection`or`javap java.lang.*`或任何其他预定义的包以查看方法。

-> 如果您想查看用户定义的类方法，请转到工作空间\javaproject\specificpackage\bin，然后键入`javap classname` ，您可以看到所有方法声明。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-13T19:12:27.767

我将用简单的话来理解Java中**Javap命令的使用。**

*   **javap**命令是一个工具，或者你可以说它是可以读取类文件的 dissembler。

我有如下示例 java 程序。

```
class Bank {
   private int code = 210;

   class SBI {
       void display() {
           System.out.println("Code is "+code);
       }
   }

   public static void main(String args[]){
       Bank b = new Bank();
       Bank.SBI sbi = b.new SBI();
       sbi.display();
   }
} 
```

编译后我得到了 Bank.class 文件。接下来我的朋友 Subbu 和 Narasimha 向我询问源文件的编译版本。稍后他们想看看 vikram 实际使用的是什么然后他们将使用以下命令查看基本细节，如使用的方法在这个 Bank.class 文件中。

```
C:\ >javap Bank.class
Compiled from "Bank.java"
class Bank {
  Bank();
  public static void main(java.lang.String[]);
  static int access$000(Bank);
} 
```

java 有非常酷的工具来检查许多特性，其中很少有像 javaws 那样的特性。**jconsole**、**javaws**、**jmap**、**jhat**和**jinfo**

# interpreter - 拉皮条我的虚拟机（关于性能和抖动）

> ID：11438494
> 
> 赞同：2
> 
> 时间：2012-07-11T17:49:58.620
> 
> 标签：interpreter, jit, vm-implementation

对于我的一个程序，我需要一种脚本语言来动态改变世界（单元 ai、世界生成等），所以我为一种相当基本的语言（没有继承的简单对象、一维数组、32 位整数/浮点数、字符串）编写了一个编译器) 它还使用引用计数进行垃圾收集。编译器输出基于堆栈的字节码。

我现在的问题是我的 VM 效率不够高（它实际上比未优化的 C 慢 15-30 倍）。它是一个非常简单的 VM，它使用一个巨大的 SWITCH-CASE 块来实现解码。

vm 代码如下所示：

```
switch(*ip++)
    case ADD:
        ...
        break;
    case SUB:
        ...
        break; 
```

所以我的问题是是否可以将我的脚本重新编译为 x86 汇编程序并在运行时执行它们。（我认为这就是 JIT 编译器所做的）。我搜索了很多，但没有找到任何代码示例，例如将 x86 代码发送到处理器。如果有人有指向解释如何构建更好的 VM 的教程的链接，我将非常高兴。

# c# - 将录制的文件导航到媒体元素或媒体播放器启动器

> ID：11438496
> 
> 赞同：0
> 
> 时间：2012-07-11T17:50:06.990
> 
> 标签：c#, windows-phone-7

我为 wp7 创建了一个录音机。在那我实际上使用了一个列表框（命名为 filesListBox）来显示录制的音频文件，如果用户点击任何文件，那么它只是播放音频（**不是 MediaPlayerLauncher**）。它工作得很好。

```
private void filesListBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        string filename = (string)e.AddedItems[0];
        PlayFromIS(filename);
    } 
```

在此之后，我使用**MediaPlayerLauncher**从列表框中播放录制的音频文件。它实际上打开了文件，但是在播放音频时，它的速度非常低并且声音变成了某种东西。

```
private void filesListBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        try
        {
            string filename = (string)e.AddedItems[0];

            MediaPlayerLauncher mediaPlayerLauncher = new MediaPlayerLauncher();
            mediaPlayerLauncher.Media = new Uri(filename, UriKind.Relative);
            mediaPlayerLauncher.Controls = MediaPlaybackControls.All;
            mediaPlayerLauncher.Location = MediaLocationType.Data;
            mediaPlayerLauncher.Orientation = MediaPlayerOrientation.Landscape;
            mediaPlayerLauncher.Show();
        }
        catch (IndexOutOfRangeException x)
        {

        }
    } 
```

因此，我创建了一个 MediaElement.xaml 页面并在其中添加了一个**MediaElement**。但我不知道如何像媒体播放器启动器那样访问 MediaElement.xaml 页面中的**文件名（来自 MainPage.xaml）**。

```
myMediaElement.Source = new Uri("??Don't know what to write here to access the filename??", UriKind.Relative); 
```

我认为**MediaPlayerLauncher**比**MediaElement**好得多，但任何一个都被接受。有人可以帮我吗？提前感谢您的辛勤工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:58:41.380

鉴于您可以从独立存储访问文件，这样的事情应该可以完成工作：

```
using (IsolatedStorageFile file = IsolatedStorageFile.GetUserStoreForApplication())
{
    using (IsolatedStorageFileStream stream = file.OpenFile("file/path/here", FileMode.Open, FileAccess.Read))
    {
              this.mediaElement.SetSource(stream);
    }
} 
```

# vb6 - Vb6 应用程序 CRUD Windows 注册表 32 位或 64 位

> ID：11438504
> 
> 赞同：1
> 
> 时间：2012-07-11T17:51:05.937
> 
> 标签：vb6, registry, 32bit-64bit

我在 vb6 中有一个应用程序，它在 Windows 注册表中读取、写入。它适用于 32 位 64 位但没有找到路径的设备。任何人都知道一些允许我读写寄存器 32 和 64 的代码。我正在使用此页面的代码。

[http://www.elguille.info/vb/utilidades/queryreg/QueryReg3.htm](http://www.elguille.info/vb/utilidades/queryreg/QueryReg3.htm)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:05:58.670

您可能需要阅读 MSDN 上的[访问备用注册表视图](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384129%28v=vs.85%29.aspx)以及相关主题。

周围有大量的 VB6 示例，但如果您知道如何“询问”（搜索它们），它会有所帮助。词汇很重要！

他们“关键”（没有双关语）你想看看使用的是`KEY_WOW64_64KEY`

您应该能够将它与您已经拥有的大多数基于 API 调用的代码示例结合起来。

# .net - 使用领英账户登录

> ID：11438511
> 
> 赞同：6
> 
> 时间：2012-07-11T17:51:34.587
> 
> 标签：.net, asp.net-mvc, oauth, linkedin

如何实现 Linkedin 的登录方法，以便人们只需单击一个按钮并使用他们的 Linkedin 帐户登录，就像在 Facebook 或 Twitter 上一样？两者都使用 OAuth，但我发现为它们指定的库非常易于使用。对于 Linkedin，我只在 DotNetOpenAuth 中找到了一些示例代码，但我对此毫无*意义*。

我可以使用任何库来促进 Linkedin 的登录功能吗？或者有关如何在 ASP.NET MVC 中使用 DotNetOpenAuth 4 执行此操作的任何教程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T18:03:58.017

这是看起来非常可靠的样本

[http://mrsarker.wordpress.com/2011/08/20/linkedin-rest-api-in-asp-net-mvc/](http://mrsarker.wordpress.com/2011/08/20/linkedin-rest-api-in-asp-net-mvc/)

```
[HandleError]
public class LinkedInController : Controller
{
    public ActionResult index()
    {
        return AuthenticateToLinkedIn();
    }

    static string token_secret = "";
    public ActionResult AuthenticateToLinkedIn()
    {
        var credentials = new OAuthCredentials
        {
            CallbackUrl = "http://localhost/home/callback",
            ConsumerKey = ConfigurationManager.AppSettings["ConsumerKey"],
            ConsumerSecret = ConfigurationManager.AppSettings["ConsumerSecret"],
            Verifier = "123456",
            Type = OAuthType.RequestToken
        };

        var client = new RestClient { Authority = "https://api.linkedin.com/uas/oauth", Credentials = credentials };
        var request = new RestRequest { Path = "requestToken" };
        RestResponse response = client.Request(request);

        token = response.Content.Split('&amp;').Where(s =&gt; s.StartsWith("oauth_token=")).Single().Split('=')[1];
        token_secret = response.Content.Split('&amp;').Where(s =&gt; s.StartsWith("oauth_token_secret=")).Single().Split('=')[1];
        Response.Redirect("https://api.linkedin.com/uas/oauth/authorize?oauth_token=" + token);
        return null;
    }

    string token = "";
    string verifier = "";
    public ActionResult Callback()
    {
        token = Request["oauth_token"];
        verifier = Request["oauth_verifier"];
        var credentials = new OAuthCredentials
        {
            ConsumerKey = ConfigurationManager.AppSettings["ConsumerKey"],
            ConsumerSecret = ConfigurationManager.AppSettings["ConsumerSecret"],
            Token = token,
            TokenSecret = token_secret,
            Verifier = verifier,
            Type = OAuthType.AccessToken,
            ParameterHandling = OAuthParameterHandling.HttpAuthorizationHeader,
            SignatureMethod = OAuthSignatureMethod.HmacSha1,
            Version = "1.0"
        };

        var client = new RestClient { Authority = "https://api.linkedin.com/uas/oauth", Credentials = credentials, Method = WebMethod.Post };
        var request = new RestRequest { Path = "accessToken" };
        RestResponse response = client.Request(request);
        string content = response.Content;

        string accessToken = response.Content.Split('&amp;').Where(s =&gt; s.StartsWith("oauth_token=")).Single().Split('=')[1];
        string accessTokenSecret = response.Content.Split('&amp;').Where(s =&gt; s.StartsWith("oauth_token_secret=")).Single().Split('=')[1];

        var company = new LinkedInService(accessToken, accessTokenSecret).GetCompany(162479);            

        // Some commented call to API
        //company = new LinkedInService(accessToken, accessTokenSecret).GetCompanyByUniversalName("linkedin");
       //  var companies = new LinkedInService(accessToken, accessTokenSecret).GetCompaniesByEmailDomain("apple.com");            
       // var companies1 = new LinkedInService(accessToken, accessTokenSecret).GetCompaniesByEmailDomain("linkedin.com");           
       // var companies2= new LinkedInService(accessToken, accessTokenSecret).GetCompaniesByIdAnduniversalName("162479", "linkedin");
        //var people = new LinkedInService(accessToken, accessTokenSecret).GetPersonById("f7cp5sKscd");
        //var people = new LinkedInService(accessToken, accessTokenSecret).GetCurrentUser();

        //string url = Url.Encode("http://bd.linkedin.com/pub/rakibul-islam/37/522/653");
        //var people = new LinkedInService(accessToken, accessTokenSecret).GetPeoPleByPublicProfileUrl(url);
        //var peopleSearchresult = new LinkedInService(accessToken, accessTokenSecret).SearchPeopleByKeyWord("Princes");

        var peopleSearchresult = new LinkedInService(accessToken, accessTokenSecret).GetPeopleByFirstName("Mizan");
        String companyName = company.Name;
        return Content(companyName);            
    }
}

public class LinkedInService
{
    private const string URL_BASE = "http://api.linkedin.com/v1";
    public static string ConsumerKey { get { return ConfigurationManager.AppSettings["ConsumerKey"]; } }
    public static string ConsumerKeySecret { get { return ConfigurationManager.AppSettings["ConsumerSecret"]; } }
    public string AccessToken { get; set; }
    public string AccessTokenSecret { get; set; }

    public LinkedInService(string accessToken, string accessTokenSecret)
    {
        this.AccessToken = accessToken;
        this.AccessTokenSecret = accessTokenSecret;
    }

    private OAuthCredentials AccessCredentials
    {
        get
        {
            return new OAuthCredentials
            {
                Type = OAuthType.AccessToken,
                SignatureMethod = OAuthSignatureMethod.HmacSha1,
                ParameterHandling = OAuthParameterHandling.HttpAuthorizationHeader,
                ConsumerKey = ConsumerKey,
                ConsumerSecret = ConsumerKeySecret,
                Token = AccessToken,
                TokenSecret = AccessTokenSecret
            };
        }
    }

    #region Helper

    private RestResponse GetResponse(string path)
    {
        var client = new RestClient()
        {
            Authority = URL_BASE,
            Credentials = AccessCredentials,
            Method = WebMethod.Get
        };

        var request = new RestRequest { Path = path };

        return client.Request(request);
    }

    private T Deserialize(string xmlContent)
    {
        MemoryStream memoryStream = new MemoryStream(Encoding.ASCII.GetBytes(xmlContent));
        XmlSerializer deserializer = new XmlSerializer(typeof(T));
        return (T)deserializer.Deserialize(new StringReader(xmlContent));
    }

    #endregion

    // methods removed for brevity. check the original link for full source

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:27:57.883

如果您不想自己编写代码，您可以随时查看第三方解决方案，例如 Janrain 的 RPX 解决方案：http: [//developers.janrain.com/](http://developers.janrain.com/)。它会给你LinkedIn登录以及更多。

# java - 从 JPanel 中完全删除 JLabel...not setVisible(False)

> ID：11438512
> 
> 赞同：5
> 
> 时间：2012-07-11T17:51:37.753
> 
> 标签：java, jpanel

我有一个相当简单的问题。我在 JFrame 上有一个 JPanel。我在 JPanel 上有一个 JLabel。我想知道如何在运行时从 JPanel 中完全删除 JLabel？

```
ImageIcon image7= new ImageIcon("archmageanim.gif");
JLabel label7 = new JLabel("", image7, JLabel.CENTER);
p.add( label7, "0 , 6" ); //This coordinate has to do with a layout manager I'm using - it 
                          //I'm using - it works fine. 
```

我一直在寻找这个解决方案......但每个人都说“最简单的方法”是设置 setVisible(false)......但这并没有真正删除对象-_-。我怎样才能删除它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T17:59:51.010

你不能用这个找到JLabel的父Container，然后使用remove方法吗？

```
Container parent = label7.getParent();
parent.remove(label7);
parent.validate();
parent.repaint(); 
```

那应该完全删除标签，然后刷新父容器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T17:54:16.333

就是这个。

```
jpanel.remove(label7);
jpanel.revalidate();
jpanel.repaint(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:54:40.997

`jpanel.remove(component);`

这就是删除组件所需的全部调用。

# google-bigquery - 如何停止长时间运行的 BigQuery 作业？

> ID：11438513
> 
> 赞同：1
> 
> 时间：2012-07-11T17:51:43.797
> 
> 标签：google-bigquery

我已经启动了一个耗时太长的查询 b/c 我在非聚合查询上使用了排序。

有没有办法停止长期运行的工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T20:36:01.780

看起来有一个 BigQuery 后端分片在此作业运行时死亡——这应该是非常罕见的。没有办法停止当前正在运行的查询，但我正在调查为什么我们花了一个小时才发现问题所在。

# spring - 如何从 Java EE / Spring MVC 项目执行 VBScript

> ID：11438515
> 
> 赞同：0
> 
> 时间：2012-07-11T17:51:51.697
> 
> 标签：spring, jakarta-ee, web-applications, vbscript

我正在使用 Java EE 开发一个 Spring MVC 项目，其中一个要求是用户能够选择一个单选按钮并远程运行特定脚本。

现在我制作了一个简单的 VBscript 并将它放在我们的远程开发服务器上。如何执行此脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:28:21.077

我不知道。Java 没有任何 VBScript 实现......所以，你最终将不得不重新实现它......在 Java 中:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T19:18:06.167

```
Runtime.getRuntime().exec("wscript C:\\testfolder\\test1.vbs "); 
```

# mysql - 查询以删除重复组

> ID：11438516
> 
> 赞同：3
> 
> 时间：2012-07-11T17:51:55.317
> 
> 标签：mysql

我们有一个包含数百万条记录的数据库。它来自读取 0/1 的门传感器的时间戳数据。不是很复杂。

问题在于传感器也有“心跳”这一事实。它们输出它们所处状态的重复。这可以重复 1 到 n 次。

```
eg: 0101111101010000 
```

我需要删除心跳并保持打开/关闭对。所以这个数据会变成：

```
010101010 
```

我可以在 Matlab 中执行此操作（对于这种情况不实用），我可以在 Perl 中执行此操作。有没有办法通过查询（或查询）来做到这一点，这会比 Perl（或等效）更快吗？

编辑：更多细节：这是行数据。给定的行是“序列”、“传感器 ID”、“时间戳”、“代码”。正是这个“代码”值逐行重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:55:15.147

您可以做的是在 MySQL 中创建一个[*用户定义的函数*](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)，该函数循环，将字符串中的每个重复数字一次替换一个值（例如`0000 -> 000 -> 00 -> 0`），直到该数字唯一：

```
DELIMITER $$
CREATE FUNCTION removeDuplicates (str VARCHAR(255)) RETURNS VARCHAR(255)
BEGIN
    DECLARE prevVal VARCHAR(255);
    DECLARE curVal VARCHAR(255);
    SET curVal = str;

    REPEAT
        SET prevVal = curVal;
        SET curVal = REPLACE(REPLACE(prevVal, '11', '1'), '00', '0');
    UNTIL prevVal = curVal
    END REPEAT;

    RETURN curVal;
END$$
DELIMITER ; 
```

然后，您可以在查询中的任何位置使用此功能。例如：

```
SELECT removeDuplicates(your_column) FROM your_table 
```

示例输出：

```
SELECT removeDuplicates('0101111101010000');
---> 010101010

SELECT removeDuplicates('011100000111100101010');
---> 01010101010

SELECT removeDuplicates('111010001011101110100010101');
---> 10101010101010101

SELECT removeDuplicates('111111111111111111111');
---> 1

SELECT removeDuplicates('000000000000000000000');
---> 0

SELECT removeDuplicates('11');
---> 1

SELECT removeDuplicates('00');
---> 0

SELECT removeDuplicates('1');
---> 1

SELECT removeDuplicates('0');
---> 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:24:03.523

我敢肯定有一种更优雅的方式，但这是我的尝试

```
SELECT REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE('0101111101010000', '111', '1'), '11', '1'),'11','1'),'000','0'),'00','0'),'00','0'); 
```

# oauth-2.0 - 使用 DotNetOpenAuth 创建 OAuth 2.0 服务提供者

> ID：11438517
> 
> 赞同：7
> 
> 时间：2012-07-11T17:51:55.647
> 
> 标签：oauth-2.0, asp.net-web-api, oauth-provider

我正在构建一个 Web 应用程序，它将使用 DotNetOpenAuth 提供一个 api 和一个授权服务。我找到[了这个示例](http://scatteredcode.wordpress.com/2011/12/01/dotnetopenauth-oauth-and-mvc-for-dummies/)，说明如何使用已经存在的服务提供者进行授权，但我想要一个关于如何实现可以创建令牌、持久化令牌并进行评估的服务提供者的示例。我可以下载任何很棒的文章或示例提供程序吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-25T07:40:00.903

*更新*

自从最初发布以来，[DotNetOpenAuth已经继续前进。](http://dotnetopenauth.net/)我强烈建议您遵循 Ashish 的建议并查看示例。它包含为所有主要流程编写授权服务器、资源服务器和客户端的代码。

**如果您想要一个带有开源代码的预构建解决方案**

Thinktecture Identity Server 是一个开源 .NET 安全令牌服务。它支持许多用于身份验证的端点，包括 OAuth 2.0 Bearer 令牌。

*更新*此 Thinktecture Identity Server 现在是[版本 2](https://github.com/thinktecture/Thinktecture.IdentityServer.v2/wiki)，并支持这些 OAuth 2.0 流程

1.  资源所有者密码凭证流
2.  隐式流和 JavaScript
3.  授权码流程

再看一下代码，看看它是如何完成的，这里有一些示例[来](https://github.com/thinktecture/Thinktecture.IdentityServer.v2/tree/master/samples)展示如何插入它。

我希望这会有所帮助——这些库和示例在过去几个月中对我们有很大帮助。

*更新*

还有另一个示例警告，[这里](http://code.google.com/p/codesmith/downloads/detail?name=OAuth2.zip&can=2&q=#makechanges)的 MVC 的简单 OAuth 提供程序**看起来过时了**[这里](http://community.codesmithtools.com/CodeSmith_Community/b/tdupont/archive/2011/03/18/oauth-2-0-for-mvc-two-legged-implementation.aspx)的示例代码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-09T09:33:31.977

There are complete working example for DotNetOpenAuth can be found here - [https://github.com/DotNetOpenAuth/DotNetOpenAuth/tree/master/samples](https://github.com/DotNetOpenAuth/DotNetOpenAuth/tree/master/samples)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-17T20:50:49.553

我用 DNOA 尝试了很多次......不得不放弃，但记录了我的发现（最后使用了 Thinktecture）...... [http://tb-it.blogspot.co.nz/2015/06/oauth -20-frameworks-and-platforms.html](http://tb-it.blogspot.co.nz/2015/06/oauth-20-frameworks-and-platforms.html)

# php - 表名存储在变量中时如何加载数据？

> ID：11438522
> 
> 赞同：0
> 
> 时间：2012-07-11T17:52:18.007
> 
> 标签：php, mysql, mysqli

我想从数据库中的几个 CSV 文档中加载数据。

问题是文件有一个表，因此表名必须存储在一个由循环逐步更新的变量中。表已创建，但之后脚本失败；什么都没有发生，我的表格和他们的字段总是有 0 行。

我认为我的想法是可行的，因为一些主题以这种方式描述了一些技巧，但在我的情况下没有任何作用。

这是我失败的代码：

```
$query = "INSERT INTO". $name_of_the_file." (id, content) values (". $arrayGenre[0].",'".trim($arrayGenre[1])."')"; 
```

where`$name_of_the_file`指的是在循环中创建的表，最终指的是循环所针对的文件。

* * *

根据您的建议，我添加了一个空格并通过以下方式打印查询：

```
echo ("<br>". $query); 
```

这是第一行的示例。xxx 替换没有冒犯：这些是主格数据。

```
INSERT INTO names.csv (id, url, content) values (1,'xxx_some_adressxxx,'agency: xxx') 
```

我不知道足够多的 PHP 说这是预期的结果，但这似乎是一个很好的 SQL 请求并且值很好。

这是我的脚本的下一行：

```
$mysqli->query($query); 
```

在我的脚本的开头，定义`$mysqli`：

```
$mysqli = new mysqli($dbhost, $dbuser, $dbpass, $dbname); 
```

* * *

新编辑：

嗯，实际上是写得很糟糕的 SQL 代码......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:53:21.633

尝试添加空格：

```
$query = "INSERT INTO ". $name_of_the_file ... 
```

始终值得通过输出您的 SQL`echo`以确保它看起来像您期望的样子。

编辑：

```
INSERT INTO names.csv (id, url, content) values (1,'xxx_some_adressxxx,'agency: xxx') 
```

您需要在第二个字段的末尾添加一个撇号：

```
INSERT INTO names.csv (id, url, content) values (1,'xxx_some_adressxxx','agency: xxx') 
```

我还建议您研究 PDO 之类的东西，以使您的代码更健壮、更安全。

您也可以尝试将您的 SQL 直接粘贴到数据库中，看看它是否会给您一个错误。

# mysql - Mysql Cluster DataMemory 大小和存储磁盘选项

> ID：11438523
> 
> 赞同：1
> 
> 时间：2012-07-11T17:52:25.593
> 
> 标签：mysql, cluster-computing, key-value

我的键值表中有大约 100M 行，目前是 innodb。但是我想迁移到 MySQL Cluster 并想了解它如何将数据存储在内存和磁盘上。

我没有足够的 RAM 来容纳我的键值表，所以我在创建 ndb 表时使用存储磁盘选项将值数据存储在磁盘上。我的 DataMemory 设置为 5 GB，IndexMemory 设置为 2 GB。但是当我开始导入我的数据时，它无法告诉表已满。我有足够的磁盘空间。那我该怎么办？我是否正确理解我的 RAM 大小不必大于我的数据大小，并且我只需要具有可以分布在数据节点中的主键索引的 RAM 还是不正确？

# php - 在字符串之间插入单词

> ID：11438524
> 
> 赞同：1
> 
> 时间：2012-07-11T17:52:27.230
> 
> 标签：php

我正在处理一个涉及多选复选框的 PHP 表单。我想将用户选择的选项加载到字符串中并回显它。我想用逗号和单词“and”分隔选项。

例如：
如果用户只选择选项 1，我想回显“opt1”。
如果用户选择选项 1 和选项 2，我想回显“opt1 和 opt2”
如果用户选择选项 1、选项 2 和选项 3，我想回显“opt1、opt2 和 opt3”。

**这是我的 HTML：**

```
<p><b>Product:</b><br>
<INPUT NAME="product[]" TYPE="CHECKBOX" VALUE="opt1">
  Option 1<BR>
<INPUT NAME="product[]" TYPE="CHECKBOX" VALUE="opt2">
  Option 2<BR>
<INPUT NAME="product[]" TYPE="CHECKBOX" VALUE="opt3">
  Option 3<BR>
<INPUT NAME="product[]" TYPE="CHECKBOX" VALUE="opt4">
  Option 4<BR></p> 
```

感谢您帮助 PHP 菜鸟！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:54:49.583

如果您希望这些`opt`值在运行时动态加载，则需要使用 Javascript。PHP 在页面最初加载时在服务器端加载，因此当用户选中一个框时，PHP 无法自行对`echo`屏幕上的值执行任何操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:57:59.060

一个简单的解决方案是做三个案例；如果只有一个选项，则为一个，两个选项为一个，多于 2 个选项为一个。

这个（未经测试的）解决方案应该让您朝着正确的方向前进：

```
<?php

$products = (isset($_POST['product']) && is_array($_POST['product'])) ? $_POST['product'] : array();
$count = count($products);

$options = '';
if ($count == 1) {
    $options = $products[0];
} else if ($count == 2) {
    $options = $products[0] . ' and ' . $products[1];
} else if ($count > 0) {
    // remove (and store) the last product selected
    $last = array_pop($products);
    // join all remaining products by comma-separation, then add the last product
    // to the end with an "and"
    $options = implode(', ', $products) . ' and ' . $last;
}
echo $options;
?> 
```

请注意，上述解决方案还假设您通过 POST 数组接收用户选择。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-11T17:55:30.457

首先，正确的语法表明您不要在 final 之前放置逗号`and`。

所以，你真正需要做的是将最后两个单词用 分开`and`，其他单词用 . 分开`,`。

好吧，假设您已经将单词放在数组中，那么您所要做的就是`array_pop`最后一个元素。然后`join`将剩余的元素与`,`, 并将其与最后一个与`and`中间的元素放在一起。如果只有一个词，就返回它。

我们不是来为您编写代码的，但这应该可以帮助您。

# google-apps-script - Apps Script listitem - 制作项目符号而不是编号？

> ID：11438526
> 
> 赞同：4
> 
> 时间：2012-07-11T17:52:28.647
> 
> 标签：google-apps-script, listitem

我可以在应用程序脚本中使用 appendListItem 将一堆项目作为编号列表添加到谷歌文档中。有什么方法可以将其从编号更改为项目符号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T20:49:46.737

您应该能够使用[ListItem.setGlyphType](https://developers.google.com/apps-script/class_documentapp_listitem#setGlyphType)来选择项目符号列表。

# eclipse - 将旧插件复制到新安装的 eclipse 中的简单方法

> ID：11438529
> 
> 赞同：32
> 
> 时间：2012-07-11T17:52:38.137
> 
> 标签：eclipse, eclipse-plugin

有没有一种简单的方法可以将旧版本的 Eclipse 中的插件列表转换为最新版本。我有我想要的所有插件的当前版本。现在我想升级到漂亮的新版本，但我需要确保我当前的所有插件列表都能正常工作。我宁愿不得不寻找和啄以安装最新版本的插件。我认为旧安装中会有一个文件，我可以将其复制到新安装中，并告诉 eclipse 安装所有这些插件（如果兼容）。

谢谢

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-07-11T19:40:36.563

如果您的旧版本至少为 3.7，那么您可以这样做：

*   使用*File -> Export -> Install -> Installed software items to file*在您的旧安装中创建一个包含当前安装功能的文件。
*   在新安装中使用*文件 -> 导入 -> 安装 -> 文件中的软件项目。*将其指向上面的文件并确保选中“安装最新版本”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-10T04:31:49.483

*   File -> Export -> Install -> Installed software items to file in your old installation以创建一个包含当前安装功能的文件。
*   文件 -> 导入 -> 安装 -> 新安装文件中的软件项目。将其指向上面的文件并确保选中“安装最新版本”。

从您的新日食中，您也可以使用。

*   文件 -> 导出 -> 安装 -> 从现有安装中安装的软件，并为其提供旧 eclipse 安装文件夹的路径，它将为您提供选择选项。

[![在此处输入图像描述](../Images/c3106c6c01fbd12deb1f51af64217eee.png)](https://i.stack.imgur.com/2qaQP.jpg)

[![在此处输入图像描述](../Images/cd8718b118ca2c38408c3698d4001225.png)](https://i.stack.imgur.com/errjP.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T18:04:40.017

将旧插件复制到新版本的 Eclipse 有两个主要问题。

1.  要复制哪些插件？较新版本的 Eclipse 将具有与旧版本相同的插件的较新版本。
2.  该插件是否支持较新版本的 Eclipse？

通常，获取正确插件的最简单方法是使用 Eclipse 工具从其更新站点获取插件。这可确保您拥有适用于您现在使用的 Eclipse 版本的正确/最新版本。

您可以通过选择 Windows/Preferences/“安装/更新”/Available Software Sites 来获取旧 Eclipse 使用的更新站点列表。选择要保留的更新站点，然后单击 Export... 然后您可以将它们导入到新的 Eclipse 中。请注意特定于 Eclipse 版本的更新站点！

# javascript - 用于游戏引擎的 C++ 或 v8

> ID：11438531
> 
> 赞同：2
> 
> 时间：2012-07-11T17:52:44.130
> 
> 标签：javascript, c++, directx, game-engine, v8

我使用 js/html5 中的各种引擎构建了一些游戏，甚至使用 irrlicht 在 c++ 中构建了一些游戏（尝试过 ogre，但我更喜欢 irrlicht 的简单性）。

我想要采取的下一步是构建一个游戏引擎，因为我有使用 c++ 的经验并且使用过 v8，我一直在考虑制作一个仅限 Windows 的游戏引擎，它使用 v8 来包装图形的 directx 和物理的子弹（避风港'没有决定其余的），然后调用一个 js 文件/字符串，该文件/字符串包含我的大部分游戏引擎，它调用这些 c++ api，然后用户可以完全使用 js 构建他们的游戏。

**但问题**是，如果我要在 PC 上制作与其他 AAA 游戏竞争的商业游戏，我应该真的使用 v8/js 驱动的游戏引擎，还是应该只用 c++ 做所有事情？

**我为什么要问这个？**
1) 我将使用的所有 C++ api 都将被 v8 包装以在 js 中使用。
2) v8/js 战胜 C++ 指针和手动内存管理（垃圾收集）

如果不是第 2 点，我会使用 c++，但现在我更喜欢使用 js，但这导致了我的问题，因为我有一天想要制作一款真正的游戏（也许不是 AAA 标题，但那是我想要的性能和质量），并且宁愿只制作一个游戏引擎，而不是为每个新项目/游戏制作一个新引擎（或选择一个新引擎），但如果我考虑第 1 点，那就是 C++我将要包装的 api，所以我想知道我是否会遇到性能问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:02:54.527

由于 C++ 的高性能，它已被用于开发多种游戏引擎。因此，如果您想制作更高效、更快速的游戏（这也取决于您的编码方式，高效的代码肯定会有所作为）。是的，C++ 缺乏垃圾收集，但它提供的性能绝对值得手动处理内存管理。如果您的偏好是制作高效的游戏引擎，并且如果您有时间，那么您应该使用 C++。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:09:27.027

我对mmo游戏很有经验，我可以肯定地说

C++ 更适合服务器多人在线游戏，因为数据包加密方法、SQL 查询速度、应用程序本身的速度、多线程可能性、一次处理数百万个函数。（例如：500 名玩家在线，500 名玩家发送数据包移动到另一个位置，名为 CPacketHandle::OnPlayerMove( CPacket* pPacket, D3DXVECTOR3 *pPos.... ) 的函数将被数据包调用 500 次）。

您可以在 c++ 中手动管理所有内容，如果某些内容是自动的，您可能会遇到无法按照您想要的方式处理某些内容的情况，有时会误导之前的编码时间。在我看来，我会在任何其他语言上使用 C++

# visual-studio-2010 - 无法将 Slb.Ocean.Petrel.dll 加载到 Visual Studio 2010 工具箱中

> ID：11438532
> 
> 赞同：0
> 
> 时间：2012-07-11T17:52:59.517
> 
> 标签：visual-studio-2010, ocean, petrel

我正在尝试在我的安装路径中浏览到我的 Slb.Ocean.Petrel.dll，以便我可以在其中获取控件，主要是 DropTarget，但我只是收到一个错误...

无法加载文件或程序集“InventorNet，Version=8.1.2.2，Culture=neutral，....”或其依赖项之一。该系统找不到指定的文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:02:29.720

AFAIK，VS2010（32 位）和 Inventor 的 dll（64 位）之间存在一些冲突。因此，为了能够使用 VS2010 中的功能，请尝试将 4 个（32 位）dll 复制到“公共”文件夹：

1.  InventorBase.dll
2.  InventorNet.dll
3.  SbLinear.dll
4.  SbLinear.net模块

如果您使用 64 位 Petrel，则需要从任何 32 位位置复制这些 dll。

希望这可以帮助。

# java - Java 枚举和 Objective-C 枚举

> ID：11438536
> 
> 赞同：4
> 
> 时间：2012-07-11T17:53:21.310
> 
> 标签：java, objective-c, enums

我在 Objective-C 中有以下枚举：

```
typedef enum {
    APIErrorOne = 1,
    APIErrorTwo,
    APIErrorThree,
    APIErrorFour
} APIErrorCode; 
```

我使用索引来引用 xml 中的枚举，例如，`xml`可能有`error = 2`，它映射到`APIErrorTwo`

我的流程是从 xml 中获取一个整数，然后运行如下 switch 语句：

```
int errorCode = 3

switch(errorCode){
    case APIErrorOne:
        //
        break;
    [...]
} 
```

似乎Java不喜欢switch语句中的这种枚举：

![在此处输入图像描述](../Images/f76aecdb74affffa57582bb878d9ab17.png)

在 Java 中，您似乎无法为`enum`成员分配索引。我怎样才能获得与上述等效的 Java？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T17:57:11.480

Java 枚举有一个内置的[ordinal](http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html#ordinal%28%29)，第一个枚举成员为 0，第二个枚举成员为 1，以此类推。

但是枚举是 Java 中的类，因此您也可以为它们分配一个字段：

```
enum APIErrorCode {
    APIErrorOne(1),
    APIErrorTwo(27),
    APIErrorThree(42),
    APIErrorFour(54);

    private int code;

    private APIErrorCode(int code) {
        this.code = code;
    }

    public int getCode() {
        return this.code;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T18:31:53.693

每个帖子一个问题是这里的一般规则。

但是不断发展 JB Nizer 的答案。

```
public enum APIErrorCode {

    APIErrorOne(1),
    APIErrorTwo(27),
    APIErrorThree(42),
    APIErrorFour(54);

    private final int code;

    private APIErrorCode(int code) {
        this.code = code;
    }

    public int getCode() {
        return this.code;
    }

    public static APIErrorCode getAPIErrorCodeByCode(int error) {
       if(Util.errorMap.containsKey(error)) {
         return  Util.errorMap.get(error);
       }
       //Or create some default code
       throw new IllegalStateException("Error code not found, code:" + error);
    }

    //We need a inner class because enum are  initialized even before static block
    private static class Util {

        private static final Map<Integer,APIErrorCode> errorMap = new HashMap<Integer,APIErrorCode>();

        static {

            for(APIErrorCode code : APIErrorCode.values()){
                errorMap.put(code.getCode(), code);
            }
        }

    }
} 
```

然后在你的代码中你可以写

```
int errorCode = 3

switch(APIErrorCode.getAPIErrorCodeByCode(errorCode){
    case APIErrorOne:
        //
        break;
    [...]
} 
```

# android - 基于 Arduino 和 Android 的 PC

> ID：11438538
> 
> 赞同：1
> 
> 时间：2012-07-11T17:53:26.200
> 
> 标签：android, automation, arduino

我计划将 arduino 板（不是 broght）与基于 Android 4.0 的 PC（1GB RAM、1,5Ghz Proc、HDMI、wi-fi）集成。是否可以使用这台 android 电脑来控制 arduino 板并充当控制器？所以我可以利用安卓的力量来自动化我的家。

这是我拥有的 android：AK802 Mini Android 4.0 网络媒体播放器，带 Wi-Fi / HDMI / TF / USB - 黑色（4GB / 1GB DDR III）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:14:48.080

Arduino 和 Android 之间有两种对话方式：Android Debug Bridge (ADB) MicroBridge 模式和[Android Open Accessory](http://developer.android.com/tools/adk/index.html) Protocol（仅适用于 Android 版本 > 2.3.4 的设备）。

对于 MicroBridge 模式，请参阅此工作示例：[Android 和 Arduino 之间的 USB 数据传输](http://english.cxem.net/arduino/arduino3.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:05:16.450

对的，这是可能的。从 Android 2.3.4 开始，您可以将 ADK 与可充当 USB 主机的 Android 设备一起使用

有关更多信息，您可以查看[官方指南](http://developer.android.com/tools/adk/index.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T03:13:40.437

AK802/MK802 Android 4.0 媒体播放器具有 USB 主机，因此不需要 ADK/Microbridge/IOIO。尝试将其插入并检查 /dev/ttyACM0 或 /dev/ttyUSB0。您仍然需要一种从您的 Android 应用程序读取/写入此设备的方法，您可能需要一些本机代码。

或者，如果您不关心 Android UI，您可以简单地安装通用 Linux，例如 Ubuntu。从那里开始，一切都应该与普通 PC 上的几乎相同。

最后，您可以考虑通过蓝牙建立无线链接。Android 支持开箱即用的蓝牙，现在 USB 加密狗只有几美元，一个 Arduino 盾牌应该在 18 美元左右。

# c# - 在数据库中存储图像路径。如何与实体一起管理删除图像操作

> ID：11438541
> 
> 赞同：0
> 
> 时间：2012-07-11T17:53:29.553
> 
> 标签：c#, javascript, model-view-controller, image-uploading

我正在考虑最终从数据库中的图像切换到文件系统方法。一个问题困扰着我，我迟早会删除实体，在这种情况下我不再需要链接图像。因此，为了简化，实体模型将只有一个字段 varchar 来跟踪文件系统上的图像路径。

有什么想法吗？

还有一件事，因为我要转移到文件系统图像存储，所以我很好奇遵循顺序是可以的还是有更好的方法

```
1\. administrator will upload image to the server using mvc form, browse -> upload btn
2\. Creating new entity with entering some data into web form and using javascript select images from the server and store it's filename into entityimagepath property
3\. On the client side browser will render <img src=imagepathfromdb ... /> 
```

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:58:41.473

> 有什么想法吗？

您可以在数据库事务中登记文件 IO 操作，以便删除数据库中包含磁盘上文件路径的行以及文件本身的删除可以事务性完成。

[http://www.codeproject.com/Articles/31270/A-Transactional-Repository-Implementation-in-NET](http://www.codeproject.com/Articles/31270/A-Transactional-Repository-Implementation-in-NET)

# c++ - 用于多语言 API 的 Doxygen

> ID：11438542
> 
> 赞同：9
> 
> 时间：2012-07-11T17:53:33.617
> 
> 标签：c++, matlab, vb6, doxygen, python-sphinx

我的公司为工程程序开发了一个 API。它是用 C++ 开发的，但我们为以下语言创建了包装器：

*   类似于 VB 的专有语言
*   MATLAB
*   和 Python。

目前，文档是由一堆脚本生成的，并且要保持 100% 的效率开始变得很耗时。我想知道是否有办法让 doxygen/sphinx 或其他程序一次性生成 C/C++、VB 和 MATLAB 的文档。Python 部分由 SWIG 完成。目前的输出是这样的：

*   功能名称
*   VB：
*   函数 NameOfFunction(ByVal a As Long , ByRef b() As Long, ByVal c As Long) As Long
*   MATLAB：
*   值 = NameOfFunction(a,b(),c)
*   C/C++：
*   值 *NameOfFunction(objtype1 *a, objecttype2 *b[], int c)
*   +描述
*   +示例

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T13:10:03.340

doxygen 支持多种语言，

要在多个项目或文件夹和语言上使用它，您只需将 doxygen 指向您要在配置中检查的每个文件夹。

我最喜欢的编程语言是 X。我还能使用 doxygen 吗？

不，不是这样；doxygen 需要了解它所读取内容的结构。如果您不介意花一些时间在上面，有几种选择：

是否支持语言 X？

> 如果 X 的语法接近于 C 或 C++，那么调整 src/scanner.la 以使其支持该语言可能并不难。这适用于 doxygen 直接支持的所有其他语言（即 Java、IDL、C#、PHP）。如果 X 的语法有些不同，您可以编写一个输入过滤器，将 X 转换为与 C/C++ 足够相似的内容，以便 doxygen 理解（此方法适用于 VB、Object Pascal 和 Javascript，请参阅 [http://www .doxygen.nl/download.html#helpers](http://www.doxygen.nl/download.html#helpers)）。如果语法完全不同，则可以为 X 编写一个解析器并编写一个后端，该后端生成类似于 src/scanner.l 所做的语法树（以及在读取标记文件时也由 src/tagreader.cpp 完成）。

但是，由于您使用的是专有的 VB，如果您只是将文件扩展名更改为 .vb ，它可能会选择这种语言

这是如何在[matlab中使用它](http://www.mathworks.com/matlabcentral/fileexchange/25925-using-doxygen-with-matlab)

已经支持 python 和 c++

看看[FAQ](http://www.doxygen.nl/manual/faq.html#12)页面

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T04:46:47.870

Doxygen 网站有一个页面，其中包含指向各种语言的 3rd-party helpers 的链接，您可以调整：

[http://www.doxygen.nl/helpers.html](http://www.doxygen.nl/helpers.html)

那里提到了 VB 和 MatLab 过滤器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T08:10:29.430

> 我想知道是否有办法让 doxygen/sphinx 或其他程序一次性生成 c/c++、VB 和 matlab 的文档。

Zeus 编辑器具有[doxygen 功能](http://www.zeusedit.com/zoxygen.html)，允许您为 Zeus 工作区中的所有项目创建 doxygen 文档。

# ios - 是否可以将 iCloud 中的 Core Data 用作服务器，将 iPad 用作客户端？

> ID：11438543
> 
> 赞同：0
> 
> 时间：2012-07-11T17:53:33.900
> 
> 标签：ios, core-data, client-server, icloud

我们正在使用服务器-客户端架构。所有的 iPad 都通过 Web 服务将数据同步回 MSSQL 数据库。

您认为将存储在 iCloud 中而不是 MSSQL 中的 Core Data 中保存有什么意义？！

是否可以将 Core Data 用作服务器，将 iPad-s 用作客户端？

如何仅使用 Apple 技术开发客户端-服务器平台？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:18:37.147

理论上可以将 iCloud 用作 CoreData 应用程序的“服务器端”**数据存储**，但 CoreData+iCloud 似乎存在很多问题，因此看起来它还没有完全准备好用于生产使用。我希望iOS6能让它更实用。

您可以在这里阅读更多内容 -[有关 iCloud + 核心数据的问题](https://stackoverflow.com/questions/9959357/questions-concerning-icloud-core-data)

我还建议您阅读 Apple Dev 论坛上的此主题 - [https://devforums.apple.com/thread/126670?tstart=0](https://devforums.apple.com/thread/126670?tstart=0)（必须是注册开发者才能查看此主题）

# php - 用于 youtube 视频 ID 的 PHP 正则表达式

> ID：11438544
> 
> 赞同：0
> 
> 时间：2012-07-11T17:53:34.197
> 
> 标签：php, regex

> **可能重复：**
> [php regex - 查找字符串中的所有 youtube 视频](https://stackoverflow.com/questions/5830387/php-regex-find-all-youtube-video-ids-in-string)
> [ID 从带有 PHP 的 URL 获取 YouTube 视频 ID](https://stackoverflow.com/questions/7221485/get-youtube-video-id-from-url-w-php)

我已经意识到 youtube 可能有几种显示 URL 的格式。我创建了一些 php 代码，仅当链接仅采用此 url 格式时才提取视频 ID `http://www.youtube.com/watch?v=videoid`：.

我找到了这个用于提取 youtube 视频 ID 的正则[表达式](https://stackoverflow.com/questions/5830387/php-regex-find-all-youtube-video-ids-in-string)，但我不确定如何将它应用到我的代码中。我已将它放在我的代码中，但没有任何反应。我如何将其应用于我的代码或整体上不同的方法？

[这](http://webprolearner2346.zxq.net/youtube_video/)是我的网站。

但它无法从此 url 格式获取视频 ID：

```
latest short format: http://youtu.be/NLqAF9hrVbY
iframe: http://www.youtube.com/embed/NLqAF9hrVbY
iframe (secure): https://www.youtube.com/embed/NLqAF9hrVbY
object param: http://www.youtube.com/v/NLqAF9hrVbY?fs=1&hl=en_US
object embed: http://www.youtube.com/v/NLqAF9hrVbY?fs=1&hl=en_US
watch: http://www.youtube.com/watch?v=NLqAF9hrVbY
users: http://www.youtube.com/user/Scobleizer#p/u/1/1p3vcRhsYGo
ytscreeningroom: http://www.youtube.com/ytscreeningroom?v=NRHVzbJVx8I
any/thing/goes!: http://www.youtube.com/sandalsResorts#p/c/54B8C800269D7C1B/2/PPS-8DMrAn4
any/subdomain/too: http://gdata.youtube.com/feeds/api/videos/NLqAF9hrVbY
more params: http://www.youtube.com/watch?v=spDj54kf-vY&feature=g-vrec 
```

**PHP**

```
 <?php

    $vari ='';

    if($_POST)
    {

        $url     = $_POST['yurl'];
        $parsed_url = parse_url($url);

        parse_str($parsed_url['query'], $parsed_query_string);
        $v = $parsed_query_string['v'];

        $hth        = 300; //$_POST['yheight'];
        $wdth       = 500; //$_POST['ywidth'];
        $is_auto    =   0;

    ?>

<p>Iframe Result:</p>   
<?
//Iframe code with optional autoplay

echo  ('<iframe src="http://www.youtube.com/embed/'.$v.'" frameborder="0" width="'.$wdth.'" height="'.$hth.'"></iframe>');

?>

<p>Old way to embedd result: </p>
<?
//Old way to embed code- optional autoplay
echo  ('<embed width="'.$wdth.'" height="'.$hth.'" type="application/x-shockwave-flash" src="http://www.youtube.com/v/'.$v.'" wmode="transparent" embed="" /></embed>');
}
?> 
```

**HTML**

```
<form method="post" action="">
URL:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<input type="text" value="<?php $url ?>" name="yurl"> <!--$vari-->
<br>
<input type="submit" value="Generate Embed Code" name="ysubmit">
<br>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:19:41.493

从上一个问题中尝试这个答案：

```
function parse_yturl($url) 
    {
        $pattern = '#^(?:https?://)?(?:www\.)?(?:youtu\.be/|youtube\.com(?:/embed/|/v/|/watch\?v=|/watch\?.+&v=))([\w-]{11})(?:.+)?$#x';
        preg_match($pattern, $url, $matches);
        return (isset($matches[1])) ? $matches[1] : false;
    } 
```

# javascript - 如何在 Google Chrome 开发者工具中搜索范围变量？

> ID：11438549
> 
> 赞同：24
> 
> 时间：2012-07-11T17:54:01.883
> 
> 标签：javascript, google-chrome-devtools

我使用 Google Chrome 开发者工具在 javascript 函数中设置了一个断点。

我正在函数的范围变量中寻找一个值为“Fred”的变量。如何在函数范围内的变量中搜索此值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-04-10T16:14:12.503

您需要将脚本添加到控制台，以便您可以实际执行搜索，因为开发人员工具默认不允许这样做。这是适合您的功能（**请参阅下面的我的 Gist 评论以获取更新**）：

```
function scanScope(whatToScan, scanValue) {
	for (var key in whatToScan) {
		if (whatToScan[key] == scanValue) {
			console.log(key + ' = ' + whatToScan[key]); 		
		} else {
			if( (typeof whatToScan[key] === "object") && (key !== null) ) { 
				scanScope(whatToScan[key], scanValue);
			}
		}
	}
}
```

将其复制并粘贴到控制台中，然后使用要搜索的范围和要搜索的值调用它。 **当然，请注意不要搜索太大的对象。** 例如，如果你在 Angular 中编程，并且遵循“总是有一个点”的规则，你可以通过如下调用来扫描它：

```
scanScope($scope.model, 'Fred');
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:57:22.157

由于您已在 Chrome DevTools 中的特定行上设置了断点，因此该断点位于所述变量的范围/上下文中。当浏览器执行到达断点时，您将可以访问其以及全局范围内的所有变量/函数。

导航到控制台选项卡并开始输入，控制台将自动完成范围内的变量。

有关 Chrome DevTools 的更多信息，请访问：

[https://developers.google.com/chrome-developer-tools/](https://developers.google.com/chrome-developer-tools/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-04-19T14:07:20.700

以这种方式在控制台中手动：

```
console.log(this); 
```

或者

```
console.log({set x(){}}); 
```

这相当于：

```
console.log(Object.defineProperty({},'x',{get: function(){}})); 
```

在控制台查找：

`get x: function (){}`--> `<function scope>`-->`Global: Window`

# facebook - 应用程序、网站和新社区页面之间的 Facebook Like 按钮差异

> ID：11438551
> 
> 赞同：1
> 
> 时间：2012-07-11T17:54:06.673
> 
> 标签：facebook, facebook-like

我目前有一个实时网站（www）。

大约 4 个月前，我们推出了一个介绍我们产品的 Facebook 应用程序 (FB APP)。当时我们创建了一个连接到 (www) 的“喜欢”按钮。当我查看应用页面时，目前有 80 个赞。

在过去的一个月里，Facebook 创建了一个我认为被称为“社区页面”（FBCP）的东西。我相信这只是一个界面，可以让我与“喜欢”我（www）的人交流。没有其他人可以看到此页面（不是粉丝页面）。这个页面说我目前有 30 个“喜欢”。

我在 (www) 上有一个结帐页面，其中有一个我们基于 (www) 生成的“点赞”计数器。大约 3 周前，这个柜台有大约 110 个“赞”。最近这个数字已经下降到 80 人。大约是 110 人，现在是 80 人。

我的问题是...

1.  Facebook 对社区页面和网站 (www) 的看法是否发生了变化，并区分了两者之间的点赞数？
2.  有没有办法将两个组合并在一起？
3.  有没有办法让我认领社区页面或转换为粉丝页面？FB 说是的，但是关于这样做的文档似乎已经过时了，我无法找到他们文档实际存在的链接。
4.  FBCP“喜欢”与 www“喜欢”的区别是什么。有些人在这两个？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:16:07.357

点赞按钮的计数是许多操作的组合，包括“喜欢”页面网页和“分享”网页（例如，通过复制并粘贴到 Facebook.com 或使用分享对话框。（参考：结束第二段[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)）

管理页面（或您所称的 FBCP）上的计数只是点击了“赞”按钮的人的计数。

如果您通过应用 ID 链接所有内容（例如应用 ID 声明的域等），那么您可能希望通过高级菜单底部的“创建 Facebook 页面”按钮在 Facebook.com 上创建一个公开可见的“应用页面”在开发者应用程序中：[https ://developers.facebook.com/apps/](https://developers.facebook.com/apps/)

如果您需要更多帮助，最好同时提供 WWW 和 FBCP 的 URL。

# jquery - 在包装 ul 的 div 上使用 addClass 后，fadeOut (on an li) 停止工作

> ID：11438556
> 
> 赞同：0
> 
> 时间：2012-07-11T17:54:17.857
> 
> 标签：jquery, jquery-plugins, jquery-selectors

我正在研究“滑块”。我有一个用于主要内容（例如图像）的主 ul，以及用于缩略图轮播的第二个 ul。单击拇指（或上一个/下一个），我使用此行从当前 li（读取索引）转换为单击的 li：

```
cacheMainImagesList.siblings('li').eq(currentIndex).fadeOut(opts.imageOutDuration, function(){cacheMainImagesList.eq(displayThisIndex).fadeIn(opts.imageInDuration)}); 
```

我不会对图像本身采取行动，因为我正在拍摄内容滑块而不仅仅是图像滑块。也就是说，我想要一个全屏模式。单击一个按钮，图像将填满屏幕。

为了全屏显示，我在最外层的包装器中添加了一个类。该类被定义为位置：固定，左：0，上：0。（注意：我不认为这个细节很重要，但到底是什么。）全屏工作的飞跃。它基本上是相同的 uls 只是包装和 CSS'ed 略有不同。

但是，上面的代码行停止工作。我没有收到错误。具体来说，fadeOut 只是停止工作。fadeIn 有效，但由于某种原因，fadeOut 无效。简而言之，幻灯片停止“滑动”，然后堆积起来。我可以在索引中前进，2、3、4 等。但是当我尝试返回时，currentIndex 永远不会淡出。

最后，我尝试使用 hide() 强制它，但随后出现了某种“闪光”。我也不想要隐藏的即时效果。即使它是一个超级快速的淡入淡出，那仍然更令人愉悦。

有人有任何线索吗？显然，我没有。谢谢。

也许这会有所帮助：jsfiddle.net/chiefalchemist/UvpGN/5 请参阅下面有关此工作的评论。也就是说，它不会重现损坏的淡出。

让我把它分解到最基本的层次......淡出和淡入在同一行代码中的同一个选择器/对象上运行。这是两个不同的索引被更改的问题。为什么淡出不起作用但淡入起作用？这就是我难过的原因。

# mysql - 删除所有日志文件后，Mysql 服务无法启动

> ID：11438566
> 
> 赞同：1
> 
> 时间：2012-07-11T17:55:25.210
> 
> 标签：mysql, ubuntu

我删除了 /var/log 中的所有文件，但是，当我重新启动 mysql 服务时，它现在无法启动。帮助！

不要通过 /etc/init.d 调用初始化脚本，而是使用 service(8) 实用程序，例如 service mysql restart

由于您尝试调用的脚本已转换为 Upstart 作业，您还可以使用 stop(8) 然后 start(8) 实用程序，例如 stop mysql ；启动mysql。restart(8) 实用程序也可用。开始：作业无法启动

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T18:07:47.253

尝试手动创建目录并将权限分配给 Mysql。

```
Ex. mkdir /var/log/mysql 
Chown -R mysql:mysql /var/log/mysql 
```

& 再次重新启动 mysql 服务，它可能会解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T16:46:41.507

也许您的 my.cnf 是“全球可写”？检查权限。它应该像 755...而不是 777。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T12:37:15.557

尝试使用运行 mysqld

```
/usr/sbin/mysqld 
```

我曾经遇到过这个问题。即我的mysql说`Job can't start`。我不知道为什么，但它开始之后

```
 sudo dpkg-reconfigure mysql-server-5.5
   /usr/sbin/mysqld 
```

可能是`service`例行程序上有一些错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-08T16:47:45.703

您可以自己重新创建“日志池”

```
mkdir /var/log/mysql 
```

并授予它完全访问权限

```
chmod -R 777 /var/log/mysql 
```

现在重新启动您的数据库服务器

```
service mysql start 
or
/usr/sbin/mysqld 
```

# php - 通过 id 更新 mysql

> ID：11438567
> 
> 赞同：2
> 
> 时间：2012-07-11T17:55:27.410
> 
> 标签：php, mysql

我是 PHP 新手，在网上看了最后一个小时后，我找不到我的代码有什么问题，所以我来找你。我试图有一个地方来更新我从一个收集的数据。我得到这个错误。未定义的索引：第 12 行 /Users/mm1/Desktop/php/backend form/edit_ac.php 中的 id。这是我目前所拥有的。有人可以帮忙吗..

```
<?php require("database.php"); ?>
<?php require("functions.php"); ?>

<?php
ini_set('display_errors', 'On');
error_reporting(E_ALL | E_STRICT);

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$id= mysql_prep($_GET['id']);
$last= mysql_prep($_POST['last']);
$first= mysql_prep($_POST['first']);

// update data in mysql database
$sql="UPDATE $tbl_name SET first='{$first}', last='{$last}' WHERE id='{$id}'";
$result=mysql_query($sql);

// if successfully updated.
if($result){
echo "Successful";
echo "<BR>";
echo "<a href='edit_info.php'>View result</a>";
}
else {
echo "ERROR";
}
?> 
```

这是表格（我知道这一切都不完整，我只是想让它先工作。）

```
<?php require("database.php"); ?>

<?php // Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

// get value of id that sent from address bar
$id=$_GET['id'];

// Retrieve data from database
$sql="SELECT * FROM $tbl_name WHERE id='$id'";
$result=mysql_query($sql);
$rows=mysql_fetch_array($result);
?>

<form name="form1" method="post" action="edit_ac.php">
<table width="700" border="0" cellpadding="5">
<tr>
<td colspan="2" class="center"><h3>PARTICIPANT IDENTIFICATION</h3></td>
</tr>
  <tr>
  <td width="218">First</td>
    <td width="456"><input name="first" type="text" maxlength="50" id="first" value="<? echo $rows['first']; ?>" /></td>
  </tr>
   <tr>
  <td width="218">Last</td>
    <td width="456"><input name="last" type="text" maxlength="50" id="last" value="<? echo $rows['last']; ?>" /></td>
  </tr>
   <tr>
  <td width="218">Middles</td>
    <td width="456"><input name="middle" type="text" maxlength="50" id="middle" value="<? echo $rows['middle']; ?>"/></td>
  </tr>
  <tr>
  <td>Address</td>
    <td><input name="address" type="text" maxlength="50" id="address" value="<? echo $rows['address']; ?>"/></td>
  </tr>
  <tr>
  <td>City</td>
    <td><input name="city" type="text" maxlength="50" id="city" value="<? echo $rows['city']; ?>"/></td>
  </tr>
  <tr>
  <td>State</td>
    <td><input name="state" type="text" maxlength="15" id="state"  value="<? echo $rows['state']; ?>"/></td>
  </tr>
  <tr>
  <td>Zip</td>
    <td><input name="zip" type="text" maxlength="15" id="zip" value="<? echo $rows['zip']; ?>" /></td>
  </tr>
  <tr>
  <td>Home Phone</td>
    <td><input name="home_phone" type="text" id="home_phone" value="<? echo $rows['home_phone']; ?>" /></td>
  </tr>
  <tr>
  <td>Daytime Phone</td>
    <td><input name="daytime_phone" type="text" id="daytime_phone" value="<? echo $rows['daytime_phone']; ?>" /></td>
  </tr>
  <tr>
  <td>Email Address</td>
    <td><input name="email_address" type="text" id="email_address" value="<? echo $rows['email_address']; ?>" /></td>
  </tr>
  <tr>
  <td>Birthday</td>
    <td><input name="month" type="text" id="month" size="3" maxlength="2" value=""/> / <input name="day" type="text" id="day" size="3" maxlength="2" value=""/> / <input name="year" type="text" id="year" size="5" maxlength="4"  value=""/></td>
  </tr>
  <tr>
  <td>Social Security Number</td>
    <td><input name="ss_1" type="text" id="ss_1" size="5" maxlength="3" value=""/> - <input name="ss_2" type="text" id="ss_2" size="5" maxlength="2"  value=""/> - <input name="ss_3" type="text" id="ss_3" size="5" maxlength="4" value="" /></td>
  </tr>
  <tr>
    <td colspan="2" class="center"><h3>PHOTO IDENTIFICATION </h3></td>
    </tr>
  <tr> 
    <td>Type of ID</td>
    <td>
      <input type="text" name="type_of_id" id="type_of_id" value=""/></td>
  </tr>
    <tr>
    <td>ID Number</td>
    <td>
      <input type="text" name="id_number" id="id_number" value="" /></td>
  </tr>
    <tr>
    <td>Issuing Jurisdiction</td>
    <td><input type="text" name="issuing_state" id="issuing_state"  value=""/></td>
  </tr>
    <tr>
    <td>Expiration Date</td>
    <td><input type="text" name="expiration_date" id="expiration_date" value=""/></td>
  </tr>
     <tr>
    <td>Issue Date</td>
    <td><input type="text" name="issue_date" id="issue_date" value="" /></td>
  </tr>
   <tr>
    <td colspan="2" class="center"><h3>ESTABLISHING YOUR ACCOUNT</h3></td>
    </tr>
     <tr>
  <td colspan="2" class="center">Designate Account Type</td>
  </tr>
  <tr>
  <td>
  Acount Type
  </td>
  <td>
      <label>
        <input type="radio" name="traditional" value="1" id="traditional" />
        Traditional</label>
      <br />
      <label>
        <input type="radio" name="roth" value="1" id="roth" />
       Roth</label>
      <br />
      <label>
        <input type="radio" name="sep" value="1" id="sep" />
        SEP</label>
      <br />
        <label>
        <input type="radio" name="simple" value="1" id="simple" />
        SIMPLE</label>
      <br /></td>
  </tr>
  <tr>
  <td colspan="2" class="center">Fund Your Account</td>
  </tr>
   <tr>
  <td colspan="2"><input name="rollover" type="radio" value="1" id="rollover" />I will rollover cash from an existing IRA or qualified retirement plan
    </td>
  </tr>
   <tr>
  <td>Prior Custodian Plan Name</td>
  <td><input name="prior_plan_name" type="text" maxlength="50" id="prior_plan_name" value=""/></td>
  </tr>
   <tr>
  <td>Expected Rollover Amount</td>
  <td><input name="rollover_amount" type="text" maxlength="50" id="rollover_amount" value=""/></td>
  </tr>
   <tr>
  <td colspan="2"><input name="transfer" type="radio" value="1"  id="transfer" />    I will transfer assets from another IRA and have attached a TRANSFER AUTHORIZATION form </td>
  </tr>
   <tr>
  <td colspan="2"><input name="contribution" type="radio" value="1"  id="contribution"/>    I have attached a contribution check as follows</td>
  </tr>
   <tr>
  <td>IRA Cash Contribution for the Year</td>
  <td><input name="cash_contributions_1" type="text" id="cash_contributions_1" value=""/></td>
  </tr>
   <tr>
  <td>in the amount of</td>
  <td><input name="amount_1" type="text" id="amount_1" value=""/></td>
  </tr>
   <tr>
  <td>IRA Cash Contribution for the Year</td>
  <td><input name="cash_contributions_2" type="text" id="cash_contributions_2" value="" /></td>
  </tr>
   <tr>
  <td>in the amount of</td>
  <td><input name="amount_2" type="text" id="amount_2" value="" /></td>
  </tr>
   <tr>
  <td>Employer OR Employee (circle one) SEP/SIMPLE Contribution for the Year</td>
  <td><input name="employer_contributions" type="text" id="employer_contributions" value="" /></td>
  </tr>
    <tr>
  <td>in the amount of</td>
  <td><input name="amount_3" type="text" id="amount_3" value="" /></td>
  </tr>
   <tr>
   <td></td>
    <td style="text-align:right"><input type="submit" name="Submit" value="Submit"></td>
  </tr>
</table>
</form>

</table>
<?php
// close connection
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:13:07.000

将 id 作为隐藏字段添加到表单中。

```
<input type="hidden" name="id" value="<?php print $rows['id'] ?>"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:59:51.337

未定义的索引仅仅意味着某个数组的索引不存在。所以在这种情况下`$_GET`没有索引`id`。

也许你应该检查变量是否在任何东西之前设置。

```
if(!empty($_GET['id']) && !empty($_POST['last']) && !empty($_POST['first'])){
    // other code
} 
```

你也可能使用了错误的超全局，就像 GeoPhoenix 说的那样，你确定这不是`$_POST['id']`你要找的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T18:07:33.017

如果您没有在对页面的调用中包含参数，则会收到错误，因为您在前几行中将错误报告一直向上：

```
ini_set('display_errors', 'On');
error_reporting(E_ALL | E_STRICT); 
```

通常 PHP（以及因此的 PHP 教程）假设一个较低的设置 PHP 将抛出警告或忽略数组上的索引错误。因此，当你击中：

```
$id= mysql_prep($_GET['id']);
$last= mysql_prep($_POST['last']);
$first= mysql_prep($_POST['first']); 
```

它会引发错误，但您的引用可能会认为它会悄悄地失败。

您的表单似乎提供了 ID 号，`id_number`而不仅仅是`id`. 所以切换到`$id=mysql_prep($_GET['id_number']);`可能会得到更有效的结果。

由于您是 PHP 新手，我还强烈建议您将 PHP 库从旧的 mysql 库更改为[mysqli](http://www.php.net/manual/en/book.mysqli.php)或[PDO](http://www.php.net/manual/en/ref.pdo-mysql.php)。人们建议的更改可能会为您提供预期的结果，但不会修复此脚本具有的多个[SQL 注入漏洞。](http://php.net/manual/en/security.database.sql-injection.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T18:19:16.980

我在您的表单中没有看到任何名称为“id”的内容。

如果您使用 $_get['id'] 您必须有一个链接或提交按钮，该按钮会转移到一个看起来像这样的 url。

```
<a href="phpfile.php?id=PUT_VALUE_HERE> 
```

请注意，url 在问号后面有变量名 id，并且您告诉 = 后面的变量是什么。

否则，如果您不打算将变量放在 url 中。您使用 $_POST['id']。为了使 $_POST['id'] 工作，您需要在表单中输入一个将 name 属性设置为 id 的输入。例如

```
<input name="id" type="text"> 
```

我在您的表单中没有看到任何名称属性设置为“id”的内容。

# java - 服务器套接字错误

> ID：11438575
> 
> 赞同：0
> 
> 时间：2012-07-11T17:55:45.610
> 
> 标签：java, ip, serversocket, ports, inetaddress

我在这一行有一个错误：

```
new ServerSocket(2106, 50, InetAddress.getByName("83.4.200.1")); 
```

错误日志：

```
Exception in thread "main" java.net.BindException: Cannot assign requested address: JVM_Bind 
```

`83.4.200.1`是我的 ip，当我放在那里`127.0.0.1`或`192.168.1.2`使用相同的端口时，一切正常。我已经通过写作检查了所有端口`netstat -a -n`，但没有 2106。

非常感谢您阅读本文，我希望您能帮助我解决我的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:17:10.113

你的路由器地址是`83.4.200.1`。需要注意的是，这不是您的计算机响应的地址，而是内部网络地址`192.168.1.2`。如果你想从路由器外部连接到你的程序，你需要在路由器上设置端口转发`2106`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T00:21:11.877

> 83.4.200.1 是我的 ip

它是您路由器的IP地址。

它不是您运行代码的主机的 IP 地址，因此您无法绑定到它。您需要绑定到该主机的本地地址，并安排从路由器到您的主机的端口转发。大多数情况下，最好完全省略绑定地址，只需指定一个端口，在这种情况下，套接字将侦听所有本地 IP 地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T18:54:02.587

**1.**如果你想`IP: "83.4.200.1"` **通过互联网访问这个服务器，那么它必须是你的静态IP，而不是动态IP。**

**2.**尝试使用分配给局域网中您的PC的私有IP地址或公共IP地址运行此代码`(ie. Without internet..JUST WITH WIRELESS CONNECTION).`

**3.**私有 ip 或公共 ip 没有意义，除非你在互联网上。直到你可以同时使用它们，因为它的局域网。

**4.**私有IP范围

**A 类：** 10.0.0.0 - 10.0.0.255 **B 类：** 172.16.0.0 - 172.31.255.255 **C 类：** 192.168.0.0 - 192.168.255.255

**5.**公共是由您的服务提供商提供的，它将是私有 IP 范围之外的任何人。如果您的 ip 不是静态的，那么您几乎没有机会通过 Internet 访问服务器，有些网站会从您的动态 ips 中提供静态 ip。

# facebook - Facebook API - 致命错误：未捕获的 OAuthException

> ID：11438576
> 
> 赞同：1
> 
> 时间：2012-07-11T17:55:50.057
> 
> 标签：facebook, facebook-graph-api

我创建了一个 Facebook 应用程序，但出现此错误：

> 致命错误：未捕获的 OAuthException：无效的 OAuth 访问令牌签名。在第 1106 行扔进 /var/www/customers/vh-394/web/home/dev.a-soft.hu/ssl/api/facebook/xzona/sdk/src/base_facebook.php

我是开发 Facebook 应用程序的新手，并且丢失了“应用程序域”、“站点 URL”、“画布 URL”、“安全画布 URL”设置。

可能存在一些 URL 设置错误，但我不知道安全 URL 的工作原理以及 Facebook 身份验证的工作原理。

谁能帮助我了解如何在上面设置这些 URL 以及如何纠正这个错误？

谢谢

编辑：

有一个游戏我想集成到 Facebook，所以 FB 用户可以玩它，分享积分等。你可以在这里找到这个游戏：

[https://ssl.a-soft.hu/api/facebook/xzona/_index.php](https://ssl.a-soft.hu/api/facebook/xzona/_index.php)

如果您查看此页面，您可以看到我和我的一些 FB 朋友，但这不是真实的，我刚刚了解了 FB 如何将数据存储在数组中，因此我生成了它们。在这个文件中没有连接到 FB 或任何 FB 脚本。

真正的文件是`index.php`，一切发生的地方。几个月前，我开始使用 Heroku 创建这个应用程序，但后来我购买了真正的 ssl 域。

无论如何，我的应用程序尝试与 FB 连接并对其进行身份验证的方式是 Heroku 使用的方式。所以它包括“AppInfo.php”、“utils.php”、“FB sdk”（作为 Heroku），但我不知道我是否未能正确使用某些东西。

在 FB 开发页面上，我没有填写“应用程序域”字段，在“选择您的应用程序如何与 Facebook 集成”下，我只检查了“Facebook 上的应用程序”。在那里，我完全像这样填写了这些字段：

画布 URL：[https](https://ssl.a-soft.hu/api/facebook/xzona/) ://ssl.a-soft.hu/api/facebook/xzona/ 安全画布 URL：（相同） 画布页面：apps.facebook.com/xzonahu

现在我仍然有同样的错误：

> 致命错误：未捕获的 OAuthException：无效的 OAuth 访问令牌签名。在第 1106 行扔进 /var/www/customers/vh-394/web/home/dev.a-soft.hu/ssl/api/facebook/xzona/sdk/src/base_facebook.php

希望你能帮忙！:)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-11T19:17:52.063

您需要哪些 URL 取决于您正在制作的应用程序类型。假设您正在制作一个要嵌入到 facebook 框架中的应用程序，您应该确保在“选择您的应用程序如何与 Facebook 集成”下仅选中“Facebook 上的应用程序”框

您需要以下 URL： 托管 URL：这是存储所有资源的 URL。画布 URL：这是应该在 Facebook 框架内显示的页面的 URL。Secure Canvas URL：Canvas URL 的安全版本（使两个 Canvas url 使用相同的 https url 对我有用） Canvas 页面：这是人们访问以查看您的应用程序的 facebook 页面，即。[http://apps.facebook.com/myapp](http://apps.facebook.com/myapp)

综上所述，OAuth 可能会出现各种各样的问题，所以如果这不能解决错误消息，我们会看看还有什么问题。

# entity-framework - 将 TVP 与实体框架一起使用时出错

> ID：11438578
> 
> 赞同：0
> 
> 时间：2012-07-11T17:56:05.550
> 
> 标签：entity-framework, stored-procedures, sql-server-2008-r2

我创建了一个 Sql 类型...

```
CREATE TYPE dbo.ScoreType AS TABLE ( ScoreID int, etc.... ) 
```

使用上述定义的类型将数据表从 C# 代码传递到存储过程

```
ALTER proc [dbo].[InsertIntoScore] 
( @DateReg datetime, @stdLastName nvarchar(50), @stdFirstName nvarchar(50), 
@Description nvarchar(500),  @tvpScore ScoreType) 
AS 
.....
INSERT INTO dbo.Score (ScoreID, ....)     
SELECT dt.ScoreID, dt..... FROM @tvpScore AS dt; 
```

但我不能在@tvpScore ScoreType 中使用 ScoreType。请帮我...

错误：

> 必须使用 READONLY 选项声明表值参数“@tvpScore”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:01:31.760

你需要说：

```
@tvpScore dbo.ScoreType READONLY 
```

# ruby - 从变量中删除值

> ID：11438581
> 
> 赞同：0
> 
> 时间：2012-07-11T17:56:11.503
> 
> 标签：ruby

这可能是一个非常微不足道的问题，但是..

假设我们有一个值为 10 的变量“a”

然后我们有一个值为 5 的变量“b”

我可以从“a”中删除“b”的值（保留 5）并每次更改 a 的值吗？

在我的脑海中，我认为它是：

```
a - b = 5

a - b = 0

a - b = -5 
```

等等等等。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T18:05:17.900

考虑一下：

```
a = 10
b = 5
a = a - b 
```

现在 的`a`值为`5`。这是因为 Ruby 首先计算赋值运算符右侧的`=`值，然后将该值赋给左侧的值。

```
#Another way to put it
a = (a - b) 
```

还有一个捷径，因为这种类型的数学很常见

```
a = a - b
a -= b
# These are both the same 
```

如果您想这样做一定次数，请尝试循环。

```
a = 10
b = 5
3.times do {a -= b}
# a is now -5 
```

对于进一步的基本 Ruby 学习，我建议[尝试 Ruby](http://tryruby.org/levels/1/challenges/0)让您开始了解我上面提到的概念。（在此处输入“下一步”开始）

# c# - Mono 命令行程序因“跟踪陷阱”消息而死，仅此而已

> ID：11438585
> 
> 赞同：3
> 
> 时间：2012-07-11T17:56:28.657
> 
> 标签：c#, .net, mono, monomac

我有一个在 Mac (OSX Lion) 上运行的命令行 Mono 应用程序，它神秘地死掉并显示以下消息：

```
[1]    53342 trace trap  "/Library/Frameworks/Mono.framework/Versions/2.10.9/bin/mono" --debug  

read: -p: no coprocess 
```

这是从 MonoDevelop 运行应用程序。

任何人都知道发生了什么以及我该如何解决这个问题？（或者我怎样才能弄清楚它是什么）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T21:33:02.523

既不是如何修复它，也不是如何弄清楚它是什么，而是隔离问题：

*   在 MonoDevelop 之外运行它。如果可行，请向 MonoDevelop 报告错误。
*   使用最新版本的 Mono (2.11.3) 在 MonoDevelop 之外运行它。如果仍然失败，请向 Mono 提交错误。
*   （如果您可以访问 Linux 机器，也可以尝试那里，因为它可能是 Mono 中的一个错误，仅影响 Mac 平台。）

错误在[http://bugzilla.xamarin.com/中提交](http://bugzilla.xamarin.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:42:08.470

最后的问题是应用程序中有这样的代码：

```
#if DEBUG
    Debugger.Break();
#endif 
```

该应用程序正在**调试**中编译，我正在像这样运行该应用程序：

```
mono Cli.exe 
```

而当解释器发现这段代码时，发送**陷阱信号**时没有可用的调试器。在**Windows**上会打开一个对话框，询问您是否要调试应用程序，而在**MacOS**上，应用程序只会自杀。如果在 Mac 上运行（或在 GDB 中运行应用程序），修复是不执行此代码。

# c# - 直接将锯齿状数组转换为二维数组而不迭代每个项目？

> ID：11438587
> 
> 赞同：5
> 
> 时间：2012-07-11T17:56:41.730
> 
> 标签：c#, multidimensional-array, type-conversion, export-to-excel, jagged-arrays

我正在尝试将 DataTable 保存到 Excel 工作表中。我的代码是这样的。

```
Excel.Range range = xlWorkSheet.get_Range("A2");
range = range.get_Resize(dtExcel.Rows.Count, dtExcel.Columns.Count);
object[,] rng1 = new object[dtExcel.Rows.Count, dtExcel.Columns.Count]; 
```

Excel范围需要范围值作为数组[，]，但我将DataTable作为锯齿状数组[] []。

```
object[][] rng2 = dtExcel.AsEnumerable().Select(x => x.ItemArray).ToArray(); 
```

是否有任何内置函数可以将锯齿状数组 [][] 直接转换为二维数组 [][] ？使用批量数据迭代 Excel、DataTable 和分配似乎更慢。

另外我不想为excel设置DSN查询..我选择excel存储以避免配置任何数据库..：PI在这里找到了将数据写入excel的方法的详细说明.. [http://support。 microsoft.com/kb/306023](http://support.microsoft.com/kb/306023)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:37:25.910

最后我为此使用了[NPOI 库](https://github.com/qihangnet/npoi)。它非常简单且免费。

将DataTable转换为excel的代码如下。

```
HSSFWorkbook hssfworkbook = new HSSFWorkbook();
        foreach (DataTable dt in DataSource.Tables)
        {
            ISheet sheet1 = hssfworkbook.CreateSheet(dt.TableName);

            //Set column titles
            IRow headRow = sheet1.CreateRow(0); 
            for (int colNum = 0; colNum < dt.Columns.Count; colNum++)
            {
                ICell cell = headRow.CreateCell(colNum);
                cell.SetCellValue(dt.Columns[colNum].ColumnName);
            }

            //Set values in cells
            for (int rowNum = 1; rowNum <= dt.Rows.Count; rowNum++)
            {
                IRow row = sheet1.CreateRow(rowNum);
                for (int colNum = 0; colNum < dt.Columns.Count; colNum++)
                {
                    ICell cell = row.CreateCell(colNum);
                    cell.SetCellValue(dt.Rows[rowNum - 1][colNum].ToString());
                }
            }

            // Resize column width to show all data
            for (int colNum = 0; colNum < dt.Columns.Count; colNum++)
            {
                sheet1.AutoSizeColumn(colNum);
            }
        } 
```

# socket.io - socket.io 和 differents 文件夹 --- 找到解决方案

> ID：11438589
> 
> 赞同：4
> 
> 时间：2012-07-11T17:56:58.420
> 
> 标签：socket.io

我是 socket.io 的新手，我已经遇到了问题，我认为是次要的。我已经用 npm 正确安装了 node.js 和 socket.io。然后只是为了测试，我从 socket.io 剪切并粘贴了一个代码示例，一切正常。现在，我想构建我的代码和文件夹，并且我创建了一个文件夹“client”来放置一个全新的 js 文件 client.js 和示例中的客户端代码。这是我的架构

```
/client
    client.js
index.html 
server.js 
```

客户端.js：

```
var socket = io.connect('http://localhost:80');
  socket.on('news', function (data) {
    alert('sqd');
    console.log(data);
    socket.emit('my other event', { my: 'data' });
}); 
```

服务器.js

```
var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , fs = require('fs')

app.listen(80);

function handler (req, res) {
  fs.readFile(__dirname + '/index.html', 'utf-8',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html ' + __dirname);
    }

    res.writeHead(200, {'Content-Type' : 'text/html'});
    res.end(data);
  });
}

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

索引.html

```
<!doctype html>
<html>
  <head>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <title></title>

    <script type="text/javascript" src="/client/client.js"></script>
    <script type="text/javascript" src="/socket.io/socket.io.js"></script>

  </head>
  <body>
  </body>
</html> 
```

当我在 localhost:80 刷新浏览器时，我的 client.js 出现错误：

```
Uncaught SyntaxError: Unexpected token <
Resource interpreted as Script but transferred with MIME type text/html 
```

将我的js文件解释为js文件似乎有问题。我已经阅读了有关该问题的一些主题，但没有任何效果。

你能帮我吗 ？

谢谢:)

* * *

好的，我找到了解决方案...您必须在静态网络服务器中为每个文件请求指定内容类型。也许它可以帮助某人。这是处理函数：

```
function handler (req, res) {

  var filePath = req.url;

  if (filePath == '/') {
      filePath = './client/index.html';
  } else {
      filePath = './client/lib' + req.url;
  }

  var extname = path.extname(filePath);
  var contentType = 'text/html';

  switch (extname) {
    case '.js':
        contentType = 'text/javascript';
        break;
    case '.css':
        contentType = 'text/css';
        break;
  }

  path.exists(filePath, function(exists) {

    if (exists) {
        fs.readFile(filePath, function(error, content) {
            if (error) {
                res.writeHead(500);
                res.end();
            }
            else {
                res.writeHead(200, { 'Content-Type': contentType });
                res.end(content, 'utf-8');
            }
        });
    }
    else {
        res.writeHead(404);
        res.end();
    }
  });
} 
```

希望这可以帮助某人。我喜欢发布问题并在没有帮助的情况下自行回复。不知何故，我绝望得太快了。我也喜欢在帖子中讲述我的生活：）好吧，我要吃点东西，多喝点咖啡！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:04:46.670

太感谢了！这解决了我的问题！！我将开关更改为以下代码：

```
var extname = path.extname(filePath);
var contentTypesByExtention = {
  'html': 'text/html',
  'js':   'text/javascript',
  'css':  'text/css'
};
var contentType = contentTypesByExtention[extname] || 'text/plain'; 
```

它可能更容易维护:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-25T18:44:52.540

只有这样才能解决：

```
function handler (request, response) {
    var file = __dirname + (request.url == '/' ? '/index.html' : request.url);
    fs.readFile(file, function(error, data) {
        if (error) {
            response.writeHead(500);
            return response.end('Error loading index.html');
        }
        response.writeHead(200);
        response.end(data, 'utf-8');
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-06T19:08:41.303

您也可以使用`mime`模块：

```
var mime = require('mime')
  , content_type = mime.lookup(filePath);

// handle the request here ...

response.setHeader('Content-Type', content_type);
response.writeHead(200);
response.end(data); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-13T07:27:26.623

并且必须用`fs.readFile`闭包进行包裹，否则某些文件（尤其是最后一个文件）会被多次读取，而另一些则根本不会被读取。并且`contentType`不会按照您的意愿设置。这是因为`fs.readFile`. 当 html 文件只加载一个外部文件时，问题不会出现，但是当外部文件（css，js，png）加载多个时，它会像我上面指出的那样出现。（这个是我自己想出来的）

所以你的代码应该做一些改变，如下所示：

```
;(function (filename, contentType) {

    fs.readFile(filename, function(err, file) {
        // do the left stuff here
    });

}(filename, contentType)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-07T22:31:55.490

这就是我需要的！谢谢你！我们将在顶部添加一个代码行

> 服务器.js

```
var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , fs = require('fs')
  **, path = require('path')** 
```

# c# - 将我在一个班级中的控件与另一个班级一起使用

> ID：11438590
> 
> 赞同：0
> 
> 时间：2012-07-11T17:57:05.630
> 
> 标签：c#, wpf, class, object, mvvm

我是 WPF 和 C# 的新手。访问另一个类中的控件或对象（例如文本框、按钮等）的最佳方式是什么。下面说明我的情况。如果这有所作为，我也在使用 MEF。任何帮助，将不胜感激。谢谢你。

EsriMapView.xaml 是包含所有对象的位置。用于此的类是 EsriMapView.xaml.cs。

EsriMapViewModel.cs 是我尝试从中访问 EsriMapView.xaml 的另一个类。我在所有对象上收到的错误是“当前上下文中不存在名称*空白”。*

这是来自 xaml 类的代码：

```
[Export]
    [PartCreationPolicy(CreationPolicy.NonShared)]
    public partial class EsriMapView : DialogWindowBase
    {
        //private int? initialZoom = null;
        //private double? latitude = null;
        //private double? longitude = null;

        //private string json = string.Empty;
        //private ObservableCollection<LocationPoint> marks = null;
        //private bool isZoomToBounds = false;

        //private string startPoint = string.Empty;
        //private string endPoint = string.Empty;

        //private string searchPoint = string.Empty;

        public EsriMapView()
        {
            InitializeComponent();            
        }

        [Import]
        public EsriMapViewModel ViewModel
        {
            get
            {
                return this.DataContext as EsriMapViewModel;
            }
            set
            {
                this.DataContext = value;
            }
        }

    }
} 
```

我也在使用 MVVM。如果您需要更多信息，请告诉我。再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:13:49.810

您不应该尝试从您的视图模型访问您的视图。这打破了 MVVM 的原则之一，这使得测试你的虚拟机变得困难。相反，您的 VM 应该公开视图绑定的属性。然后，VM 可以访问完成其工作所需的数据。

作为一个简单的例子，假设您的视图模型需要知道当前的缩放级别才能执行一些计算。在您的视图模型中，您将拥有：

```
public double Zoom
{
    get { return this.zoom; }
    set
    {
        if (this.zoom != value)
        {
            this.zoom = value;
            this.RaisePropertyChanged(() => this.Zoom);
        }
    }
}

private void DoSomeCalculation()
{
    // can use this.zoom here
} 
```

那么，在你看来：

```
<Slider Value="{Binding Zoom}"/> 
```

# salesforce - 用户对象的 Salesforce 字段级安全性

> ID：11438593
> 
> 赞同：0
> 
> 时间：2012-07-11T17:57:14.950
> 
> 标签：salesforce, apex-code

我在 Salesforce 用户对象中有一个自定义字段。我正在尝试制定权限。我只希望用户的经理和系统管理员能够看到这个字段。

查看现场级别的安全选项，我看到：Contract Manager。我担心如果我检查这个，所有合同经理都可以看到这个字段。是这样吗？

是否有一种简单的方法来完成此安全策略并在不允许我拥有很多用户的沙箱中对其进行测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:37:12.613

您是对的，如果您允许 Contract Manager 配置文件通过字段级安全性查看该字段，那么分配给该配置文件的所有用户都将能够查看该字段，无论用户是否实际汇总到他们。

您应该能够通过将一个小的 VF 页面嵌入到用户页面布局中来基于一些更高级的逻辑来显示/隐藏此字段。但是，这仍然需要您通过字段级安全性使该字段可见，并且如果他们有权访问 API，您将不允许您对其他经理隐藏它（它只会在页面上对他们隐藏）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:56:24.350

使该字段对合同经理可见将使其对所有合同经理可见。但是，有一个相当简单的公式可以让您安全地执行此操作。

1) 使合同经理看不到秘密字段。

2）在用户上创建与合同经理的层次关系。

3) 创建一个公式来检查正在运行的用户是否是您正在查看的用户的合同经理。

```
IF($user.id == user.contract_manager__c,secret_field__c,'only this users contract manager can see this.') 
```

# c++ - 生成 OpenCV 64 位 DLL

> ID：11438599
> 
> 赞同：2
> 
> 时间：2012-07-11T17:57:38.163
> 
> 标签：c++, opencv, c++-cli

我在 Viusal Studio 2010 中使用 c++/cli/OpenCV 成功编译了一个 32 位 DLL。我正在尝试创建一个 64 位 DLL。当我将构建配置更改为 x64 并编译它时，它给了我

```
c:\opencv2.2\include\opencv2\core\mat.hpp(379): fatal error C1001: An internal error has   
occurred in the compiler. (compiler file     \
'f:\dd\vctools\compiler\utc\src\p2\wvm\mdmiscw.c', line 2704) 
```

有小费吗？

更新：原来 c++-cli 在 opencv 64 位上有一些错误。我添加了这个

```
 #pragma managed(push, off)
   #include <opencv/cv.h> 
   #pragma managed(pop) 
```

并修复了它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T17:48:53.973

事实证明，c++-cli 在 opencv 64 位上有一些错误。我添加了这个

```
 #pragma managed(push, off)
   #include <opencv/cv.h> 
   #pragma managed(pop) 
```

# java - 使用 compareTo 方法比较两种不同的数据类型

> ID：11438600
> 
> 赞同：1
> 
> 时间：2012-07-11T17:57:44.677
> 
> 标签：java, compareto

我有一个实现 Set 的类 WordCount，但是我在使用 WordCount 类中的 comareTo 方法时遇到了问题，该类从 Word 类中获取了该方法。我正在尝试将 Word 对象与 String 对象进行比较，但最后 Word 也是一个字符串，那为什么它会给我错误？

词类

```
public class Word implements Comparable<String>{

    String word;
    int count;

    public Word(String s)
    {
        word = s;
        count = 1;
    }

    @Override
    public int compareTo(String o) {
        return word.compareTo(o);
    }

    @Override
    public String toString()
    {
        return word + "(" + count + ")";
    }   

} 
```

使用 compareTo 方法时，我在此类中遇到错误

```
public class WordCount implements Set<Word>{

    private Word[] items;
    private int size;

    public WordCount()
    {
       items = new Word[5]; 
       size = 1;
    }

    @Override
    public void add(Word s)
    {
        int i = 0;

        //grow array as needed      
        if (size >= items.length) {
            items = grow(items);
        }

        while (i < size) { 

            if (items[i].compareTo(s) > 0) {
                break;
            }
            if (items[i].equals(s)) {
                return;
            }
            i++;
        }

        items[i] = s;
        size++;

    }

    @Override
    public void show()
    {
        for(Word s : items)
        {
            System.out.println(s);
        }
    }

    public Word[] grow(Word[] a) {
        Word[] newA = new Word[a.length + 5];
        System.arraycopy(a, 0, newA, 0, a.length);
        return newA;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:46:10.900

将您的 Word 类声明为`Comparable<Word>.` （正如@Louis Wasserman 评论的那样，几乎总是一个类与其自身或超类可比）

然后

```
 @Override
    public int compareTo(Word o) {
        return word.compareTo(o.word);
    } 
```

另外，考虑完全摆脱 Word，而使用 a `Map<String, Integer>`，其中键是您要计数的单词，值是计数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T18:03:26.877

`compareTo`Word 类中的方法需要一个字符串参数，但是`Word`当您在 WordCount 类中调用它时，您正在向它传递一个实例。你的`Word`类没有扩展`String`类，所以你有一个不匹配的类型错误。

# java - 使用工厂设计模式有点复杂

> ID：11438601
> 
> 赞同：3
> 
> 时间：2012-07-11T17:57:57.953
> 
> 标签：java, design-patterns

正如所说“如果我们有一个超类和 n 个子类，并且根据提供的数据，我们必须返回其中一个子类的对象，我们使用工厂模式”

**情况：** 我有20个客户，随着时间的推移可以添加更多。每个都将提供一个文件，从中提取数据并将其插入到数据库中。每个客户都有自己的文件维护方式，即数据字段位于不同的位置。

**解决方案：** 为此我认为我将不得不使用工厂设计模式，我创建了 20 个类，每个类对每个字段都有自己的实现，比如它必须如何以及从文件中的哪个位置提取它。随着新客户端的添加，我只需创建一个新类就完成了，不需要进行其他更改。

**到这里为止我是正确的吗？**

**复杂性：** 现在的问题是客户提供的文件可以是 4 种格式（PDF、XLS(X)、HTML、TXT）中的任何一种。从这些格式中提取文本的引擎必须是静态的，比如我使用 pdftoXML 将 PDF 提取为 XML 等。如果我不创建一个单独的引擎类来将 PDF 转换为 XML，那么我将不得不重新编写在每个提供 PDF 文件的客户类中提取 PDF 文本。excel提取引擎也是如此。

**问题：** 我应该如何将这些引擎纳入工厂模式？引擎类是否应该是静态的，并且必须处理 pdf 的子类例如调用 pdf 类的提取方法来获取所需的数据或什么？

希望我说清楚了，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:34:37.387

首先，几个问题。这些可能会改变建议的解决方案：

1.  20 个客户端中的每一个是否都有一个文件格式？
2.  子类之间有什么共同点（行为/方法）？
3.  是否有可能子类可能会更改以使用不同的文件格式？

在子类不需要切换文件类型的最简单的解决方案中，似乎现在您可以拥有一个抽象的 ContentProvider，它由一组抽象类 PdfProvider、XlsProvider、HtmlProvider 和 TxtProvider 子类化。这个中间层的类实现了文件格式特定的功能。然后，您的 20 个“客户端”类继承自相应的特定于 FileFormat 的基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:07:12.730

我认为这是对工厂方法的一个很好的使用，但也不要尝试使用客户端类层次结构来对提取算法进行建模。在模式方面，您可以使用策略来动态配置具有正确提取算法的客户端对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T18:31:38.100

你有（至少）两件事在这里发生。

1.  从一系列文件格式中提取文本
2.  根据客户端特定规则解析此文本。

我会将这些功能完全分开。甚至可能有两个工厂，一个用于文本提取，一个用于解析。进行解析的客户端特定代码不需要知道文本来自 PDF、CSV 或通过 http 或其他方式输入。它只需要知道解析文本。

希望这可以帮助。

# php - 如何在本地服务器中使用 php 在 vlc 中播放视频

> ID：11438604
> 
> 赞同：2
> 
> 时间：2012-07-11T17:58:06.907
> 
> 标签：php, video, vlc

我对 php 完全陌生。我需要在本地服务器 apache 中使用 php 在 vlc 中播放视频。我在 /var/www 中有以下文件：a.mp4、sample.php 和我从文件系统复制的 vlc 文件。

示例.php

```
<?php
if(isset($_POST['request']))
{
echo system('vlc a.mp4');
}
?>

<html>
<body>

<form  method="POST" action="sample.php" >

<br>
<input<?php ?> type="submit" name="request" value="play" />

</body>
</html> 
```

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:06:57.027

你不能做你正在尝试的事情。我猜您确实是在尝试将电影发送给客户并让他们的视频播放器（无论是 VLC 还是其他）播放它。为此，请考虑以下内容：[在 HTML 中播放视频](http://www.w3schools.com/html/html_videos.asp)。

如果您考虑服务器实际上正在尝试执行您的建议，请进行一些数学运算并计算出所需的带宽（我在 640x480 分辨率、16 位颜色和 30 帧/秒下得到大约 20MB/秒）。

# build - Conditional subdir-objects

> ID：11438613
> 
> 赞同：6
> 
> 时间：2012-07-11T17:58:41.587
> 
> 标签：build, gnu, autotools, automake

I have option `subdir-objects` set in `configure.ac`:

```
AM_INIT_AUTOMAKE([subdir-objects]) 
```

Is there any possibility to conditionally disable it in particular Makefiles (`Makefile.am`)?

Thanks.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T21:49:36.477

According to the [list of automake options](http://www.gnu.org/software/automake/manual/automake.html#List-of-Automake-options), no. What you can do instead is remove `subdir-objects` from the call to `AM_INIT_AUTOMAKE` and add it to the `Makefile.am` files where you actually want it. You do that by putting the line `AUTOMAKE_OPTIONS = subdir-objects` at the top of any relevant `Makefile.am`. (There's no `no-subdir-objects` option, apparently.)

# php - 如何在现有的 symfony 项目中生成管理 CRUD 模块

> ID：11438615
> 
> 赞同：1
> 
> 时间：2012-07-11T17:58:52.210
> 
> 标签：php, symfony1, doctrine

我对这个遗留项目感到疯狂。它是使用 Symfony PHP 框架开发的，我以前从未使用过它。在我看来，做事的唯一方法是使用 CLI 工具。但这些工具通常适用于所有应用程序。

Symfony 项目的组织结构如下：

*   根目录
*   应用程序目录
*   以及 Symphony 项目中的所有其他公共目录

apps 目录包含另外两个目录：“cms”和“site”。

我只想在“cms”应用程序中构建一个管理模块，一个 CRUD。

“cms”目录是应用程序的管理部分。你们能帮我做这件事吗？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:46:46.130

运行生成模块的任务..

```
php symfony generate:module cms CRUD 
```

其中 cms 是应用程序名称，CRUD 是模块名称

# asp.net - 自动文本框宽度

> ID：11438617
> 
> 赞同：4
> 
> 时间：2012-07-11T17:59:14.430
> 
> 标签：asp.net, .net, html

关于这个有一个[类似的线程](https://stackoverflow.com/questions/7477/autosizing-textarea-using-prototype)。但我想要一个具有自动宽度的多行文本框（**使宽度适合较大的行**）。

使用此代码，我可以拥有一个多行文本框（自动高度）

```
 <div style="float:left; white-space:nowrap ">
        <asp:TextBox style="display:inline; overflow:hidden"  
                     ID="txt1" 
                     runat="server" 
                     Wrap="false" 
                     ReadOnly="true" 
                     TextMode="MultiLine" 
                     BorderStyle="none" 
                     BorderWidth="0">
        </asp:TextBox>
    </div>
    <div style="float:left">
        <asp:TextBox ID="txt2" runat="server" Text="Example textbox"></asp:TextBox>
    </div> 
```

后面的代码：

```
txt1.Rows= text.Split("|").Length ' Sets number of rows but with low performance
txt1.Text = text.Replace("|", Environment.NewLine) 
```

再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:19:09.730

您可以尝试一种 linq 方法：

```
string[] rows = text.Split('|');
int maxLength = rows.Max(x => x.Length);

txt1.Rows = rows.Length;
txt1.Columns = maxLength; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:28:13.757

如果你愿意使用像 jquery 这样的插件，你应该看看 autoresize 插件。

这些也将根据用户类型调整大小。

查看一个[自动调整大小](http://www.jacklmoore.com/autosize)

```
$(document).ready(function(){
    $('textarea').autosize();  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T05:10:11.813

Joel Etherton 给了我一个很好的工作代码示例，说明如何使用 Linq 解决这个问题，但我无法使用 Linq。

**使用 Linq 的多行文本框自动宽度**（Joel Etherton 的解决方案）：C#

```
string[] rows = text.Split('|');
int maxLength = rows.Max(x => x.Length);

txt1.Rows = rows.Length;
txt1.Columns = maxLength; 
```

VB

```
 Dim rows() As String = text.Split("|")
    Dim maxLength As Integer = rows.Max(Function(x) x.Length)
    txt1.Rows = rows.Length
    txt1.Columns = maxLength
    text = text.Replace("|", Environment.NewLine)
    txt1.Text = text 
```

**多行文本框自动宽度解决方案 2** 为了“手动”实现这一点，我采用这种方法来了解较大行的长度。不是最有效的，但它对我有用：

```
 Dim textRows() As String = text.Split("|")

    For Each row As String In textRows
        row = row.Trim
        textToDisplay = String.Format("{0}{1}{2}", textToDisplay, row, Environment.NewLine)
        If row.Length > maxRowLenght Then
            maxRowLenght = row.Length
        End If
    Next
    txt1.Rows = textRows.Length
    txt1.Columns = maxRowLenght
    txt1.Text = textToDisplay 
```

# java - java util扫描仪超时？

> ID：11438624
> 
> 赞同：3
> 
> 时间：2012-07-11T17:59:41.230
> 
> 标签：java, java.util.scanner, bufferedreader

我有以下问题，我的应用程序中有一个简单的 TCP 类，它向设备发送消息以进行查询，然后设备以消息响应但是没有任何描述的行尾字符，因为它来自一个串行转换器，在最初尝试使用 readline 功能并发现它需要 eol 字符后才输出在扫描仪功能上设置超时，以便它断开连接并继续前进，或者有更好的方法来做到这一点？我的代码如下：

```
public String Send_TCP ( InetAddress IPAddress, int POrt, String InData) throws IOException
         {      

        Socket socket = null;
        PrintWriter out = null;
        BufferedReader in = null;

        try {
            socket = new Socket(IPAddress, POrt);
            out = new PrintWriter(socket.getOutputStream(), true);
            in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host");
            System.exit(1);
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for the connection");
            System.exit(1);
        }

        BufferedReader read = new BufferedReader(new InputStreamReader(System.in));
        ;

        System.out.print("Connected, Sending:"+ InData);

        out.println(InData);
        System.out.println("Equals");
        String str1 = new Scanner(in).useDelimiter(">").next() + ">";
        System.out.println(str1);
        System.out.println("Equals");
        out.close();
        in.close();
        read.close();
        socket.close();
        return str1;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:49:40.007

我不确定我是否正确理解了您的问题，但您可以在套接字上设置超时：`socket.setSoTimeout(int timeout)`。参见：[javadoc](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html#setSoTimeout%28int%29 "http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html#setSoTimeout%28int%29")

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-14T23:11:37.210

我相信以下实现了我需要它，基本上检查缓冲区是否存在，如果它不存在，那么它会等待并再次检查避免扫描仪功能的陷阱，如果消息永远不会到达，如果它读取它。

```
 try {
    BufferedReader rd = new BufferedReader(new InputStreamReader(sock.getInputStream()));
    int count = 1;

        do { 
            if (rd.ready()){
                System.out.println ("Response Ready");
                str = new Scanner(rd).useDelimiter(">").next()+">";
                count = 501;
            }
            Thread.sleep(10);
            System.out.println ("Response Not Ready" + count);
            count ++;
        } while (count < 25); 
```

# php - 用自定义版本替换 PHP 邮件功能

> ID：11438628
> 
> 赞同：2
> 
> 时间：2012-07-11T17:59:59.263
> 
> 标签：php, sendmail

我目前正在开发一个电子邮件服务器程序，该程序将跟踪通过我的网站/网络应用程序发送的电子邮件，并重试任何可能由于 SMTP 错误而失败的邮件。

我正在寻找能够做的是替换 PHP 用来发送电子邮件的默认方法。

我已经尝试创建一个与邮件函数具有相同参数的 php 脚本，并将此脚本添加到 php.ini 文件中的 sendmail 路径，但是当我尝试这个时，浏览器只是坐在他们没有做任何事情。

这个想法是，用户只需要重新配置 php 以使用我自己的版本，而不必编写不同的代码，即他们可以使用与当前通过 php 发送电子邮件完全相同的代码，而不是 php 进行发送，它只是将所需的详细信息传递给我自己的版本以将其传递给电子邮件服务器。

这是可能的吗，感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:27:39.750

本质上，您需要创建自己的与 PHP 兼容的 sendmail 样式包装器。当 PHP 调用`sendmail`发送邮件时，它会打开一个进程，并将消息数据写入 sendmail，它对消息执行任何操作。

您将需要重新解析消息以发送它，或者在您为消息登录/帐户后将其按原样转发到您的 MTA。

这是一个不支持任何选项的示例脚本，但如果您想走这条路，应该可以帮助您入门：

```
#!/usr/bin/php -q
<?php

// you will likely need to handle additional arguments such as "-f"
$args = $_SERVER['argv'];

// open a read handle to php's standard input (where the message will be written to)
$fp = fopen('php://stdin', 'rb');

// open a temp file to write the contents of the message to for example purposes
$mail = fopen('/tmp/mailin.txt', 'w+b');

// while there is message data from PHP, write to our mail file
while (!feof($fp)) {
    fwrite($mail, fgets($fp, 4096));
}

// close handles
fclose($fp);
fclose($mail);

// return 0 to indicate acceptance of the message (not necessarily delivery)
return 0; 
```

此脚本需要可执行，因此将其权限设置为`755`.

现在，编辑`php.ini`指向这个脚本（例如`sendmail_path = "/opt/php/php-sendmail.php -t -s"`）

现在在另一个脚本中，尝试 sendmail 一条消息。

```
<?php

$ret = mail('drew@example.com', 'A test message', "<b>Hello User!</b><br /><br />This is a test email.<br /><br />Regards, The team.", "Content-Type: text/html; charset=UTF-8\r\nX-Mailer: MailerX", '-fme@example.com');

var_dump($ret);  // (bool)true 
```

调用之后， 的内容`/tmp/mailin.txt`应该包含类似于以下内容：

```
To: drew@example.com
Subject: A test message
X-PHP-Originating-Script: 1000:test3.php
Content-Type: text/html; charset=UTF-8
X-Mailer: MailerX

<b>Hello User!</b><br /><br />This is a test email.<br /><br />Regards, The team. 
```

上述 txt 文件的内容基本上是您需要[解析](http://php.net/mailparse)的内容，以便您可以重新发送它，或者您可以将其直接传递给您使用的任何 MTA。注意我没有对这个例子中的参数做任何事情，所以不要忘记那些。

查看`man sendmail`有关该过程的更多文档。 [这](http://lxr.php.net/xref/PHP_5_3/ext/standard/mail.c#202)是 PHP 中将邮件写入`sendmail_path`指令的函数的链接`php.ini`，它可以帮助您了解调用时会发生什么`mail()`。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:05:44.383

如果您安装了`runkit`扩展，您可能有兴趣使用`runkit_function_redefine`它来覆盖该`email`功能。不幸的是，使用 PHP，不支持函数的本机覆盖。

**参考**：[http ://ca.php.net/runkit](http://ca.php.net/runkit)

**参考**：[http ://ca.php.net/manual/en/function.runkit-function-redefine.php](http://ca.php.net/manual/en/function.runkit-function-redefine.php)

否则，您也可以尝试试一试`override_function`。

**参考**： http: [//php.net/manual/en/function.override-function.php](http://php.net/manual/en/function.override-function.php)

享受和好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T18:17:10.370

我已经使用了一段时间，我喜欢它。

[http://sourceforge.net/projects/phpmailer/](http://sourceforge.net/projects/phpmailer/)

# ember.js - 如何在车把模板中使用本地化字符串？

> ID：11438630
> 
> 赞同：4
> 
> 时间：2012-07-11T18:00:11.150
> 
> 标签：ember.js, handlebars.js

假设我有这样的观点：

```
<script type="text/x-handlebars" data-template-name="say-hello">
  Hello, <b>{{name}}</b>
</script> 
```

如何使用内置的 Ember.String.loc() 本地化单词“Hello”？我在文档/代码中没有看到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T17:56:36.993

我现在正在使用内置本地化。

为此，可以创建一个“简单”视图助手：[http](http://gist.github.com/3093861) ://gist.github.com/3093861 ：

```
Handlebars.registerHelper('loc', function(property, fn) {
  var str;
  // we are bound to a value, it is now the context
  if (fn.contexts && typeof fn.contexts[0] === 'string') {
    str = fn.contexts[0];

  // Convention, start all localization keys with _
  } else if (property[0] === '_') {
    str = property;

  // Convention, start all globals with capital
  } else if (/[A-Z]/.test(property[0])) {
    str = Em.getPath(window, property)

  // all other's are local properties
  } else {
    str = this.getPath(property)
  }

  return new Handlebars.SafeString((str || '').loc(''));
});

// use:
// {{loc _some_string}}
// {{#bind App.someString}}{{loc App.someString}}{{/bind}}
// {{#bind view.localString}}{{loc view.localString}}{{/bind}} 
```

但这并不像应有的那样干净，请注意绑定值需要如何包装`{{#bind}}`

仍然对更好的选择持开放态度。（我想我可以更新视图助手以支持绑定，但尚未进一步调查）

# c# - Silverlight 只运行一次 DispatchTimer

> ID：11438631
> 
> 赞同：0
> 
> 时间：2012-07-11T18:00:12.657
> 
> 标签：c#, silverlight, silverlight-4.0

我试图在 Silverlight / C# 中找到一种方法来使 DispatchTimer 只运行一次。

我有一个用户表单，提交后我想显示一条消息 10 秒，然后消失并终止 DispatchTimer 线程。

我知道如何制作一个重复的 DispatchTimer：

```
clock.Interval = TimeSpan.FromSeconds(10);
clock.Tick += clockTick;

clock.Start(); 
```

但我希望该线程在完成后立即结束。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T18:05:54.417

这应该适合你：

```
DispatcherTimer clock = new DispatcherTimer();
clock.Interval = TimeSpan.FromSeconds(10);
clock.Tick += (object sender, EventArgs e) =>
{
    clock.Stop();
    // Some code here
};
clock.Start(); 
```

如果您不想扩大 DispatcherTimer 对象的范围，匿名事件处理程序也会将事物保持在“同一个地方”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:05:43.800

触发后，停止clockTick 处理程序中的计时器。

# .net - 创建规则引擎来处理“与/或”逻辑的最佳方法是什么

> ID：11438633
> 
> 赞同：0
> 
> 时间：2012-07-11T18:00:14.660
> 
> 标签：.net, sql, bit-manipulation

例如...

```
if( (stuCourses.contains("crs101") && stuCourses.contains("crs102") && 
    stuCourses.contains("crs103"))  || (stuCourses.contains("crs201") && 
    stuCourses.contains("crs202")) || stuCourses.contains("crs300") )
{
    //then student can register for crs301;
} 
```

另外，对于这样的事情，最好的表模式是什么，即课程/课程先决条件......您将如何构建表字段来处理“和/或”逻辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:42:57.700

我会有以下表格。这有点复杂，所以如果这是一个小实现，只需更新上面的代码可能会更容易！

```
Courses(ID, Name, ...)
-- Information about each course

CoursePrerequisiteRules(ID, CourseID, PrerequisiteRuleID, ValidFrom, ValidTo)
-- Assigns a single rule to a particular course, for a particular range of academic years

PrerequisiteRules(ID, RuleType)
-- The header record defining a rule or sub-rule for a specific course

PrerequisiteRuleCourseMembers(ID, PrerequisiteCourseID, PrequisiteRuleID)
-- Each record assigns one course to a prerequisite rule.

PrerequisiteRuleRuleMembers(ID, ParentPrerequisiteRuleID, ChildPrerequisiteRuleID)
-- Each record assigns one prerequisite rule as a child of another rule 
```

PrerequisiteRules.RuleType 将是“AND”或“OR”。先决条件规则可以使用 PrerequisiteRuleCourseMembers 分配给它的课程，或者使用 PrerequisiteRuleRuleMembers 分配给它的其他规则。每门课程一次都会有一个活动规则，但如果需要，可以在每个学年的基础上定义这些规则（使用 CoursePrequisiteRules 的 ValidFrom 和 ValidTo）。可以将复杂的规则树创建为这一规则的子规则。

例如说明 CS320 需要 (CS101 OR CS102) AND MT101 的要求：

```
Courses
ID  Name
1   CS101
2   CS102
3   MT101
4   CS320

CoursePrerequisites
ID  CourseID PrerequisiteRuleID  ValidFrom  ValidTo
5   4        7                   2010       2012
-- The rule for CS320 between 2010 and 2012 is rule number 7

PrerequisiteRules
ID  RuleType
6   "OR"
7   "AND"
-- Rule number 7 performs an AND on all its children
-- Rule number 6 uses an OR instead

PrerequisiteRuleCourseMembers
ID  PrerequisiteCourseID   PrequisiteRuleID
8   1                      6
9   2                      6
10  3                      7
-- This assigns CS101 and CS102 to rule 6, meaning that rule 6 should be evaluated as
-- CS101 OR CS102\. It also assigns MT101 to rule 7.

PrerequisiteRuleRuleMembers
ID  ParentPrerequisiteRuleID ChildPrerequisiteRuleID
11  7                        6
-- This assigns Rule 6 to Rule 7, so with the row in the previous table, rule 7 becomes
-- MT101 AND [Rule 6]
-- ...which means MT101 AND (CS101 OR CS102) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:15:04.283

我会想出一种简单的语言来描述课程要求，并用该语言指定每门课程的要求。然后编写一个非常简单的引擎，它接受课程要求描述并检查学生的课程集是否符合要求。

您可以使用简单的课程组合列表`&`来分隔组合中的课程和`|`分隔组合，如下所示：

```
crs101&crs102&crs103|crs201&crs202|crs300 
```

然后，您将其作为 crs301 的“先决条件”存储在数据库中。

然后引擎将遍历在`|`标记处分隔它的字符串。然后它会在标记处依次分隔每个条目，`&`如果课程不匹配，则跳到下一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T00:50:49.773

我想建议实现此目的的最佳方法是将您的“先决条件规则”存储在 XML 中，根据您的应用程序体系结构和需求，存储在数据库或硬文件中。XML 非常适合您的需求，因为您可以存储先决条件集，例如...

```
<Courses>
    <Course>
        <CourseCode>crs301</CourseCode>
        <PrereqSets>
            <PrereqSet>
                <CourseCode>crs101<CourseCode>
                <CourseCode>crs102<CourseCode>
                <CourseCode>crs103<CourseCode>
            </PrereqSet>
            <PrereqSet>
                <CourseCode>crs201<CourseCode>
                <CourseCode>crs202<CourseCode>
            </PrereqSet>
            <PrereqSet>
                <CourseCode>crs300<CourseCode>
            </PrereqSet>
        </PrereqSets>
    </Course>
    <Course> 
    <!--Some other course data goes here-->
    </Course>
</Courses> 
```

然后，您可以很容易地使用 XPath 从 XML 数据中查询出来。

当然还有其他方法可以通过将数据存储在数据库中来实现这一点。一种这样的方法可能是将其存储在具有复合键的关联表中，如下所示...

```
Course table
    CourseID, Name
    1, crs101
    2, crs102
    3, crs103
    4, crs201
    5, crs202
    6, crs300
    7, crs301

CoursePrereqMap table
    CourseID, PrereqSetID, PrereqCourseID
    7, 1, 1
    7, 1, 2
    7, 1, 3
    7, 2, 4
    7, 2, 5
    7, 3, 6 
```

无论如何，您都可以将先决条件集加载到自定义对象（即 VO 或 DTO，如果它们不是过时的术语），或者加载到某种列表或数组中，然后编写一个处理整个先决条件集的方法，甚至可能是先决条件集的列表或数组，并确保所有课程至少完成一组。

我希望这能回答您关于如何存储此类数据的第二个问题。这不是一个具体的答案，而是关于您可以实施它的几种方法的建议；当然，您可以采取很多方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T18:11:47.490

老实说，我不认为条件本身需要改变......只是它所代表的抽象级别。这看起来确实很混乱：

```
if((stuCourses.contains("crs101") && stuCourses.contains("crs102") && stuCourses.contains("crs103")) || (stuCourses.contains("crs201") && stuCourses.contains("crs202")) || stuCourses.contains("crs300") )
{
    //then student can register for crs301;
} 
```

但不是因为你认为的原因。和/或逻辑可以被格式化以看起来更好，但更重要的是它应该被抽象成另一个函数。像这样的东西：

```
public void RegisterStudentForCRS301()
{
    // other stuff
    if (StudentHasTakenNecessaryCourses())
    {
        // etc.
    }
}

private bool StudentHasTakenNecessaryCourses()
{
    return
        StudentHasTakenNecessary100LevelCourses() ||
        StudentHasTakenNecessary200LevelCourses() ||
        StudentHasTakenNecessary300LevelCourses()
    ;
}

private bool StudentHasTakenNecessary100LevelCourses()
{
    return
        stuCourses.contains("crs101") &&
        stuCourses.contains("crs102") &&
        stuCourses.contains("crs103")
    ;
}

private bool StudentHasTakenNecessary200LevelCourses()
{
    return
        stuCourses.contains("crs201") &&
        stuCourses.contains("crs202")
    ;
}

private bool StudentHasTakenNecessary300LevelCourses()
{
    return
        stuCourses.contains("crs300")
    ;
} 
```

每个函数都有自己的抽象级别，并且只负责一件事且只负责一件事。这些函数聚合成更高级别的函数，这些函数检查多个抽象级别的逻辑。并且这一切都聚合到公共功能中，它并不关心它只需要了解业务概念的细节（学生是否有资格？）。

每个抽象级别都易于阅读和理解。哎呀，你甚至不需要成为一名程序员来阅读逻辑，一旦一个人对什么`&&`和`||`意思有了基本的解释。当然，这是更多的代码。但它是富有表现力的代码，*非常清楚地*描述了它在做什么。如果对逻辑细节不感兴趣，只需要了解高级业务功能，甚至不需要看比较逻辑。只需调用适当命名的函数。让较低的抽象层处理较低的细节。

# windows - 打开 CHM 文件会产生：“导航到网页已取消”

> ID：11438634
> 
> 赞同：84
> 
> 时间：2012-07-11T18:00:17.400
> 
> 标签：windows, chm

我正在尝试打开一个 .chm 文件。

我下载了源代码，解压缩它，然后双击`Waffle.chm`并单击“打开”，但无论我单击 chm 文件中的哪个元素，我都会收到以下消息：

```
Navigation to the webpage was canceled.  
What you can try: 
Retype the address. 
```

![在此处输入图像描述](../Images/d06c38fb5151ad942645517d9f8a79c5.png)

这里发生了什么？

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2012-07-11T18:07:07.690

**概括**

[当从网络驱动器（或UNC 路径](https://www.trustwave.com/support/kb/KnowledgebaseArticle10870.aspx)）打开时，Microsoft 安全更新 896358 和 840315 会阻止显示 CHM 文件内容。这是 Windows 试图阻止病毒/恶意软件的攻击媒介感染您的计算机，并阻止了通过该 chm 文件使用的“InfoTech”协议绘制数据的 .chm 文件。

微软对问题的总结：http: [//support.microsoft.com/kb/896054](http://support.microsoft.com/kb/896054)

**解决方案**

1.  如果您使用的是 Windows Server 2008、Windows 7，windows 已经创建了快速修复。 **右键单击 chm 文件，您将看到“yourfile.chm 属性”对话框，在底部，会出现一个名为“Unblock”的按钮。单击取消阻止并按确定，**然后尝试再次打开 chm 文件，它可以正常工作。此选项不适用于 WindowsXP (SP3) 之前的早期版本的 Windows。

    ![](../Images/b3cddf76d1aa728acd84ad6aa75befc7.png)

2.  通过将 chm 文件移出网络驱动器来解决问题。您可能不知道您正在使用网络驱动器，现在仔细检查：右键单击您的 .chm 文件，单击属性并查看“位置”字段。如果它以这样的两个反斜杠开头：`\\epicserver\blah\`，那么您正在使用网络驱动器。 **因此，要修复它，请复制 chm 文件，并将其粘贴到本地驱动器中，例如 C:\ 或 E:。** 然后尝试重新打开 chm 文件，windows 并没有崩溃。

3.  最后一招，如果您无法将文件复制/移出网络驱动器。如果你必须在它所在的位置打开它，并且你使用的是 XP、Vista、ME 或其他版本的 Windows，你将不得不**手动告诉 Windows 不要被这个 .chm 文件吓坏。 [HHReg（HTML 帮助注册实用程序）](http://www.winhelponline.com/blog/fix-cannot-view-chm-files-network-xp-2003-vista/)实用程序自动执行此任务。** 基本上，您下载 HHReg 实用程序，加载您的 .chm 文件，按 OK，它将创建必要的注册表项来告诉 Windows 不要阻止它。欲了解更多信息： http: [//www.winhelponline.com/blog/fix-cannot-view-chm-files-network-xp-2003-vista/](http://www.winhelponline.com/blog/fix-cannot-view-chm-files-network-xp-2003-vista/)

Windows 8 还是 10？--> 升级到 Windows XP。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-04-30T08:34:11.950

“解锁”文件可以解决问题。截屏：

![在此处输入图像描述](../Images/b6b4b1a55dca877f6f4fb604876b1c03.png)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-15T10:19:55.743

除了 Eric Leschinski 的回答，因为这是 stackoverflow，一个编程解决方案：

Windows 使用隐藏文件分支将内容标记为“已下载”。截断这些会解除对文件的阻塞。用于 CHM 的流的名称是“Zone.Identifier”。打开文件时可以通过附加 :streamname 来访问流。（第一次保留备份，以防您的 RTL 搞砸了！）

在 Delphi 中，它看起来像这样：

```
var f : file;
begin
 writeln('unblocking ',s);
 assignfile(f,'some.chm:Zone.Identifier');
 rewrite(f,1);
 truncate(f);
 closefile(f);
end; 
```

有人告诉我，在非分叉文件系统（如 FAT32）上存在隐藏文件，但我还没有深入了解。

Ps Delphi 的 DeleteFile() 也应该能识别分叉。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-02-02T13:35:34.863

赢得 8 x64：

只需将其移动到另一个文件夹或重命名您的文件夹（在我的情况下：我的文件夹是“c#”）。避免在文件夹名称上使用符号。用字母命名。

完毕。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-04-20T02:11:05.637

最终的解决方案是允许 InfoTech 协议在 Intranet 区域中工作。

将以下值添加到注册表中，应该可以解决问题：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\HTMLHelp\1.x\ItssRestrictions]
"MaxAllowedZone"=dword:00000001 
```

更多信息在这里：http: [//support.microsoft.com/kb/896054](http://support.microsoft.com/kb/896054)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-19T14:18:15.060

去开始

类型`regsvr32 hhctrl.ocx`

您应该会收到一条成功消息，例如：

> “ hhctrl.ocx 中的 DllRegisterServer 成功”

现在尝试再次打开您的 CHM 文件。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-01-02T11:56:44.420

另一种方法是使用不同的第三方软件。 [此链接](http://www.sumatrapdfreader.org/free-pdf-reader.html)显示更多第三方软件来查看 chm 文件...

我尝试使用 SumatraPDF，它工作正常。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-10-06T14:11:33.010

我使用 C++ Builder 在我的软件中以编程方式修复了这个问题。

在分配 CHM 帮助文件之前`Application->HelpFile = HelpFileName`，我检查它是否包含“Zone.Identifier”流，如果包含，我只需将其删除。

```
String ZIStream(HelpFileName + ":Zone.Identifier") ;

if (FileExists(ZIStream))
    { DeleteFile(ZIStream) ; } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-05-26T16:31:23.447

显然存在不同级别的身份验证。我阅读的大多数文章都告诉您将 MaxAllowedZone 设置为“1”，这意味着允许本地机器区域和 Intranet 区域，但“4”允许访问“所有”区域。

有关更多信息，请阅读这篇文章： https: [//support.microsoft.com/en-us/kb/892675](https://support.microsoft.com/en-us/kb/892675)

这是我的注册表的外观（我不确定它是否适用于通配符，但它似乎对我有用）：

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\HTMLHelp]

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\HTMLHelp\1.x]

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\HTMLHelp\1.x\ItssRestrictions]
"MaxAllowedZone"=dword:00000004

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\HTMLHelp\1.x\ItssRestrictions]
"UrlAllowList"="\\\\<network_path_root>;\\\\<network_path_root>\*;\\ies-inc.local;http://www.*;http://*;https://www.*;https://*;" 
```

作为附加说明，奇怪的是需要“UrlAllowList”键才能在另一台 PC 上工作，但不是我的测试。它可能根本不需要，但是当我添加它时，它解决了问题。用户可能没有关闭原始文件或类似的东西。所以只是一个考虑。我建议至少尝试并测试它，然后根据需要添加。确认后，您可以根据需要进行部署。祝你好运！

**编辑：** PS 另一种有效的方法是使用 mklink /d （Windows 7 或更高版本中的符号链接）在本地映射到网络的路径，但映射网络驱动器号（Z：用于测试）不起作用。只是深思熟虑，我不必“解锁”任何文件。此外，接受的“解决方案”并没有为我解决问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-27T20:56:58.403

移动到本地文件夹是最快的解决方案，尤其是因为我不是系统上的管理员（无法编辑注册表等），这对我来说没有任何用处，这是工作环境中的典型案例。

```
Create a folder in C:\help drive, lets call it help and copy the files there and open. 
```

不要复制到 mydocuments 或其他任何地方，这些位置通常位于办公室设置中的网络驱动器上，并且无法正常工作。

# scala - 如何在“in”（ala takeWhile）一段距离内启动 Scala 流？

> ID：11438640
> 
> 赞同：2
> 
> 时间：2012-07-11T18:00:39.370
> 
> 标签：scala, stream, lazy-evaluation

[为什么我的 takeWhile 无法与我的 Stream 一起工作](https://stackoverflow.com/questions/7923999/why-does-my-takewhile-fail-to-work-with-my-stream)的问题清楚地表明这`takeWhile()`是懒惰的：

```
Stream.from(1).takeWhile(_ < 5) //Stream(1, ?) 
```

但是对于这个问题，解决方案似乎是人们可以`toList`根据需要使用它来强制评估。但是，如果您想要的不是列表或特定值，而是 continue`Stream`怎么办？

似乎我可以通过强制评估来做到这一点，直到找到所需的值，然后`Stream`再次实例化并使用`index`，但肯定有更好的方法吗？

**更新**：显然我的措辞令人困惑；我想要提供的解决方案`dropWhile`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T19:02:23.307

您可以使用`span`：

```
scala> val (before, after) = Stream.from(1).span(_ < 5)
before: scala.collection.immutable.Stream[Int] = Stream(1, ?)
after: scala.collection.immutable.Stream[Int] = Stream(5, ?) 
```

或者，如果您只关心“持续流”，则`dropWhile`：

```
scala> val after = Stream.from(1).dropWhile(_ < 5)
after: scala.collection.immutable.Stream[Int] = Stream(5, ?) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:59:43.660

看来您正在寻找`force`：

```
scala> val s = Stream.from(1).takeWhile(_<10)
s: scala.collection.immutable.Stream[Int] = Stream(1, ?)

scala> s.force
res84: scala.collection.immutable.Stream[Int] = Stream(1, 2, 3, 4, 5, 6, 7, 8, 9) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T21:45:50.387

很难理解您的要求 - 正如每个人回答不同的事情所看到的那样。这是另一种可能解释的答案：您希望流从一个值开始。好吧，在这种情况下，您可以这样做：

```
scala> Stream.from(1).dropWhile(_ < 5) //Stream(1, ?) 
res3: scala.collection.immutable.Stream[Int] = Stream(5, ?) 
```

# java - 打印百分比的程序中的 UnknownFormatConversionException

> ID：11438641
> 
> 赞同：2
> 
> 时间：2012-07-11T18:00:44.003
> 
> 标签：java, printf

我必须编写一个程序，在其中输入棒球统计数据，它会输出 % batting avg 并重新说出球员的姓名，然后将其放在哨兵循环中。我当前的代码如下。在我把它变成一个循环之前，我试图让它只与一个一起工作。当我跑去测试时，我得到`UnknownFormatConversionException`. 这是什么意思？如何修复我的代码？

```
import java.util.Scanner;
public class bata
{
    public static void main(String[] args) throws Exception
    {
    double ba,sp,tb;
    int tri,dou,sin,hr,ab,hits;
    String name;
    Scanner sc = new Scanner(System.in);
    System.out.print("Enter Singles");
    sin = sc.nextInt();
    System.out.print("Enter Doubles");
    dou = sc.nextInt();
    System.out.print("Enter Triples");
    tri = sc.nextInt();
    System.out.print("Enter Homeruns");
    hr = sc.nextInt();
    System.out.print("Enter At bats");
    ab = sc.nextInt();
    System.out.print("Enter Player name");
    name = sc.nextLine();
    System.in.read();
    tb= (sin + (dou*2) + (tri *3) +(hr *4));
    hits = sin+dou+tri+hr;
    sp= tb/ab;
    ba= hits/ab;
    System.out.println(""+name);
    System.out.printf("Slugging % is %.3f\n", sp);
    System.out.printf("Batting avg os %.3f\n", ba);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T18:03:21.203

转义`%`符号，使用 double `%%`：

```
System.out.printf("Slugging %% is %.3f\n", sp);
//                           ^------------- escaping 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:04:10.320

当您期望一个整数并从扫描仪读取字符串时，会发生 UnknownFormatConversionException。如果您可以发布您的输入文件，那将会很有帮助。

此外，使用另一个 % 转义 % 符号。

```
 System.out.printf("Slugging %% is %.3f\n", sp); 
```

# javascript - Nodejitsu：无法将属性添加到包描述

> ID：11438643
> 
> 赞同：1
> 
> 时间：2012-07-11T18:00:56.703
> 
> 标签：javascript, node.js, nodejitsu

我刚刚获得了 nodejitsu beta 激活，我正在尝试从 nodejitsy 手册中编写 hello world 示例，但是当我运行 jitsu deploy 时，它会抛出这个：

```
prompt: App name: (myapp)
subdomain: (omarloren1.myapp)
prompt: scripts.start: (server.js)
error:   Unable to add properties to package description

error:   [TypeError: Object function (script) {
        //
        // Support `scripts.start` starting with executable (`node` or `coffee`).
        //
        var split = script.split(' ');
        if (~['node', 'coffee'].indexOf(split[0])) {
          script = split.slice(1).join(' ');
        }

        try {
          fs.statSync(path.join(dir, script));
          return true;
        }
        catch (ex) {
          return false;
        }
      } has no method 'test']
error:   TypeError: Object function (script) {
        //
        // Support `scripts.start` starting with executable (`node` or `coffee`).
        //
        var split = script.split(' ');
        if (~['node', 'coffee'].indexOf(split[0])) {
          script = split.slice(1).join(' ');
        }

        try {
          fs.statSync(path.join(dir, script));
          return true;
        }
        catch (ex) {
          return false;
        }
      } has no method 'test'
error:   Error running command deploy 
```

我正在运行节点 v0.8.1 和 jitsu v0.9.1

我不知道发生了什么：{

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:14:18.773

这是 jitsu v0.9.1 中的一个错误。尝试更新到 v0.9.3！这应该可以解决您在这里遇到的问题。

如果您有更多问题，请发送电子邮件至 support@nodejitsu.com，我们很乐意跟进。

**编辑：**您可以通过`npm install jitsu -g`再次运行来做到这一点。

# vba - PrintOut 方法打印随机页面

> ID：11438649
> 
> 赞同：0
> 
> 时间：2012-07-11T18:01:15.183
> 
> 标签：vba, printing, excel, excel-2007

我在 Excel 中有一个打印输出按钮，该按钮分配给以下代码：

```
Private Sub CommandButton1_Click()
    Application.ScreenUpdating = False
    Sheets(Array("Cover", "1", "1-1", "2", "3", "4")).PrintOut , , 1
    Sheet1.PrintOut , , 1 'use this method to print all together at the end instead printing individually.
    Application.ScreenUpdating = True
End Sub 
```

但是，它开始打印 100 个随机页面，每页有 3-10 个值，而不是打印工作表（这实际上没有意义）。在所有工作表上设置和检查打印范围，我真的不明白错误来自哪里。

有任何想法吗？

预先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-30T11:51:07.967

您仍然可以通过这种方式使用 PrintOut：

```
Private Sub CommandButton1_Click()
    Application.ScreenUpdating = False

    'If you want only to print the active sheet
    Sheet1.PrintOut

    'Printing a range, from the first page until page 23, one copy:
    Sheet1.PrintOut 1,23,1

    'Printing only a single page (23), two copies:
    Sheet1.PrintOut 23,23,2

    Application.ScreenUpdating = True
End Sub 
```

看一个： [https ://msdn.microsoft.com/en-us/library/office/ff838253.aspx](https://msdn.microsoft.com/en-us/library/office/ff838253.aspx)

# javascript - Fancybox 图片库不起作用

> ID：11438652
> 
> 赞同：0
> 
> 时间：2012-07-11T18:01:25.130
> 
> 标签：javascript, jquery, fancybox

我正在尝试做一个 Fancybox 图片库。我有一个函数，它获取图像 URL 列表并将它们附加到 DOM，如下所示

```
function handleImageURLs(imageURLs) {
  var appendString = "";

  //Create an <a> tag for each image URL
  for(var i = imageURLs.length - 1; i >= 0; i --) {
    appendString += "<a href='"+ imageURLs[i] +"' rel='img_preview'><img src='"+ imageURLs[i] +" />'</a>";
  }

  //Add the <a> tags containing images to the <body> element
  $("body").append(appendString);

  //Select the image <a> tags and call Fancybox
  $("a[rel='img_preview']").fancybox({
    onCleanup: function() {
      //do cleanup stuff, remove images, etc.
    }
  });
} 
```

一切正常。标签被`<a>`添加到 DOM。但是 Fancybox 根本没有打开。并且不会抛出任何错误。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T00:20:45.153

[结合](https://stackoverflow.com/questions/9081571/how-to-bind-fancybox-to-dynamic-added-element/9084293#9084293)使用并`click`在我想要显示的图像上触发了一个事件。

# javascript - 使用节点变量来获取鼠标悬停的内容

> ID：11438655
> 
> 赞同：0
> 
> 时间：2012-07-11T18:01:33.313
> 
> 标签：javascript, jquery

对于我正在处理的项目，我被指示使用节点变量来找出鼠标悬停的元素和元素的哪一部分。

什么是节点变量，我如何使用它来实现上述目标？

如果有帮助，我正在尝试做的一个实例或示例是找出鼠标在哪个元素或元素的哪个部分（如果可能）。意思是，如果鼠标悬停`<p>`在 html 文档中的 a 上，我想知道这一点，如果可能的话`<p>`，鼠标中所说的确切内容是什么。好吧，我不需要知道单词，我只想将单词存储在一个变量中，这样我就可以对它们应用 CSS 样式。

我真的很感激这方面的任何帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:04:34.440

您可以尝试[`event.target`](http://api.jquery.com/event.target/)返回事件的目标：

> 启动事件的 DOM 元素。

```
$('body').on("mouseover", function(e){
   $(e.target).addClass('hovered');
   alert($(e.target).text())
}) 
```

[演示](http://jsfiddle.net/ffkQF/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:07:05.457

`document.querySelector`您可以使用或`document.querySelectorAll`在较新的浏览器中选择节点。使用 CSS 样式的选择器，这些方法将返回与您的选择器匹配的节点，然后您可以使用类似的方式将其存储在变量中

`var node = document.querySelectorAll(".someClassName"); //finds all nodes having class "someClassName"`

为了检测节点上的鼠标事件，您需要使用`addEventListener`[（MDN 文档）](https://developer.mozilla.org/en/DOM/element.addEventListener)或`attachEvent`方法，并监听`mouseover`事件。如果您的项目允许，请使用 jQuery 让您的生活更轻松。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T18:05:40.023

节点变量是存储 DOM 节点的变量，要使用它，您可以创建鼠标跟踪事件处理程序并处理这些事件发生时浏览器发送给您的参数。这些参数之一是触发事件的元素（节点）。

此链接可以帮助您入门：[https ://developer.mozilla.org/en/DOM/MouseEvent](https://developer.mozilla.org/en/DOM/MouseEvent)

# java - Method Override and Inheritance and Exceptions

> ID：11438656
> 
> 赞同：4
> 
> 时间：2012-07-11T18:01:36.727
> 
> 标签：java, exception, inheritance, runtimeexception, overriding

子类中的方法是否可以覆盖父类中的方法并在父类中的方法没有抛出异常时抛出运行时异常？像这样的东西：

```
class X { public void foo() { System.out.print("X "); } }

public class SubB extends X {
    public void foo() throws RuntimeException {
        super.foo();
        if (true) 
            throw new RuntimeException();
        System.out.print("B ");
    }

    public static void main(String[] args) {
        new SubB().foo();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:02:40.213

是的，因为运行时异常不是方法签名的一部分。（您可以添加它们，但编译器不在乎，它们只是文档。）

我认为基本原理是 RuntimeExceptions 通常是程序员错误，例如 NPE 或超出数组范围，因此尝试以限制检查异常的方式限制它们是没有意义的。您不能制定规则说，此方法（以及任何覆盖它的方法）永远不会抛出 NullPointerException，因为 JVM 不会做出这些保证。

在[编译时异常检查](http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html#jls-11.2)下的 Java 语言规范中它说：

> 未经检查的异常类（§11.1.1）免于编译时检查。
> 
> 在未经检查的异常类中，错误类被排除在外，因为它们可以在程序中的许多点发生，并且很难或不可能从它们中恢复。声明此类异常的程序将毫无意义地混乱。复杂的程序可能仍希望捕获并尝试从其中一些条件中恢复。
> 
> 在未经检查的异常类中，运行时异常类被免除，因为根据 Java 编程语言的设计者的判断，必须声明此类异常不会显着帮助确定程序的正确性。Java 编程语言的许多操作和构造都可能导致运行时异常。Java 编译器可用的信息以及编译器执行的分析级别通常不足以确定不会发生此类运行时异常，即使这对程序员来说可能是显而易见的。要求声明这样的异常类只会让程序员感到恼火。
> 
> 例如，某些代码可能实现了一个循环数据结构，通过构造，它永远不会涉及空引用；然后，程序员可以确定 NullPointerException 不会发生，但 Java 编译器很难证明这一点。建立数据结构的这种全局属性所需的定理证明技术超出了本规范的范围。

# php - 在 php 和 javascript 中生成的按钮调用带有参数的 javascript 函数只是刷新页面

> ID：11438658
> 
> 赞同：-1
> 
> 时间：2012-07-11T18:02:00.167
> 
> 标签：php, javascript, html

我正在尝试使用 php 和 javascript 生成一些按钮来隐藏表单上的文本字段，但是每次按下按钮时它都会刷新页面。我不知道是按钮还是功能有问题，但我假设程序正在刷新，因为它出错了。

php生成的按钮

```
echo("<button id=\"button".$count."\" onclick=deleteAnswer(answer".$count."); return            false;>delete answer</button>"); 
```

javascript生成函数

```
write.innerHTML = write.innerHTML + "<button id=\"button"+answers+"\" onclick=\"deleteAnswer(\"answer"+answers+"\")\"; return false;>delete answer</button>"; 
```

实际的javascript函数

```
<script type="text/javascript">
function deleteAnswer(button)
{
    document.getElementById(button).style.visibility="hidden";
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:12:07.267

你有几个问题`answer".$count."`，`"answer"+answers+"\"`必须用 qoutes 和

```
echo("<button id=\"button".$count."\" onclick=deleteAnswer('answer".$count."'); return            false;>delete answer</button>");

write.innerHTML = write.innerHTML + "<button id=\"button"+answers+"\" onclick=\"deleteAnswer(\"answer"+answers+"\"); return false;">delete answer</button>" 
```

和

```
 document.getElementById(button).style.visibility="hidden"; 
```

必须

```
 document.getElementById(button).style.display="hidden"; 
```

或者

```
 document.getElementById(button).style.visibility="visible"; 
```

# sql - 关于连接和子查询

> ID：11438659
> 
> 赞同：1
> 
> 时间：2012-07-11T18:02:00.623
> 
> 标签：sql, db2

我有以下查询，我正在使用..

```
select  * from app_subsys_param where assp_name like '%param_name%' 
```

其中 param_name 是参数的名称。从这个查询中，我们将获得与参数对应的 assp_id。有了这个 id，我们在 app_subsys_parmval 表中查找参数的值。

```
 update app_subsys_parmval  set aspv_value = 'true' where assp_id = id_val 
```

现在不是单独启动两个sql语句，我想将它们结合起来，因为有没有任何子查询或连接机制可以将它们结合在一个语句中，请指教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:07:04.283

您需要使用`UPDATE .. FROM`语法：

```
UPDATE app_subsys_paramval
SET aspv_value = 'true'
FROM app_subsys_param
WHERE app_subsys_param.id = app_subsys_paramval.id
    AND app_subsys_param.value LIKE '%param_name%'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T01:24:31.787

看`MERGE`声明。这是 ANSI SQL:2003 标准`UPDATE … FROM`。

文档：

*   [MERGE](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0010873.html) for DB2 for Linux/UNIX/Windows
*   [DB2](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/topic/com.ibm.db2z9.doc.sqlref/src/tpc/db2z_sql_merge.htm) z/OS 9.1 的合并

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T18:03:19.490

在更新语句中使用子选择：

```
UPDATE app_subsys_parmval  
SET aspv_value = 'true' 
WHERE id_val = (SELECT assp_id 
                FROM app_subsys_param 
                WHERE assp_name LIKE '%param_name%') 
```

请注意，我假设`*`您的`select *`.

# iphone - 从 URL 加载图像（nsurlconnection）

> ID：11438661
> 
> 赞同：-1
> 
> 时间：2012-07-11T18:02:18.107
> 
> 标签：iphone, ios, uiimage, nsurlconnection

我必须实现一个应该显示所有托管照片的 UITableView。在不同的选项卡中同步和异步加载照片。如何从url调用图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:22:43.393

您可以使用 Apple TableView 延迟加载。他们有示例代码可以异步下载图像以避免 UI 冻结。请参阅下面的链接

[Apple LazyTableImages](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:13:21.327

从 url 加载图像：

```
NSData *imageData = [NSData dataWithContentsOfURL:yourURL];
UIImage *image = [UIImage imageWithData:imageData]; 
```

您可以使用 GCD 异步执行操作。有一个很好的教程，几乎正是你想要在[这里实现的目标](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)

# java - Java 中的哪些库/框架依赖于客户端定义的类来拥有静态成员？

> ID：11438663
> 
> 赞同：1
> 
> 时间：2012-07-11T18:02:22.507
> 
> 标签：java, static-members

Java 中有一些依赖于类中的静态成员的库和框架。通常，他们通过反射检查类的某些静态字段。

例如，我知道`AtomicReferenceFieldUpdater`s 通常需要保存在它正在修改的类的静态字段中，如果放在另一个类中，他们将缺乏执行此操作的安全权限。

我的问题是：

1.  您能否列出依赖于类中存在的某些静态字段的主要 Java 框架/库？以什么方式？

2.  是否有任何重要的 Java 框架/库依赖于类中静态**方法**的存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T19:19:39.617

我想到的是：每当客户端类必须实现 Serializable 时，它​​都依赖于`serialVersionUID`静态字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T19:11:29.720

Spring 3.1 的 JUnit 支持将检查测试类的静态嵌套类，以找到带注释的配置类。但我不会说它依赖它。这纯粹是约定优于配置的一个例子。

JUnit 也依赖静态方法来获取它的`@BeforeClass`和类似的注解。

在这两种情况下，静态成员都需要注释。

# php - 为什么我不能将 sha1 输出传递给 gmp_init()？

> ID：11438665
> 
> 赞同：1
> 
> 时间：2012-07-11T18:02:26.577
> 
> 标签：php, math, base, gmp

我今天检查了[sha1](http://php.net/sha1)的二进制参数，但无法将生成的二进制字符串转换为 base 62 表示。

```
$str = 'mystring';
echo gmp_strval(gmp_init(sha1($str), 16), 62), PHP_EOL;      // Works
echo gmp_strval(gmp_init(sha1($str, true), 2), 62), PHP_EOL; // Fails
// Same with base_convert()...
echo base_convert(sha1($str), 16, 32), PHP_EOL;              // Works
echo base_convert(sha1($str, true), 2, 32), PHP_EOL;         // Fails 
```

结果：

```
MNun4i9wmY2M2sBvnq5Z8jDi7nk
0
jjhukjbflgg000000000000000000000
0 
```

我想知道是不是因为[gmp_init()](http://www.php.net/manual/en/function.gmp-init.php)和[base_convert()](http://php.net/base_convert)函数需要一个整数或字符串，而这可能只是二进制数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T07:32:24.380

@mario 注释是正确的，要将二进制字符串表示形式转换为基数 2，您必须执行以下操作：

```
$base2 = array_map('decbin', array_map('ord', str_split(sha1($str, true)))); 
```

或从十六进制摘要：

```
$base2 = array_map('decbin', array_map('hexdec', str_split(sha1($str), 2))); 
```

然后您需要做的就是将每个`$base2`值零填充到 8 位并将其内容内爆。

* * *

还值得注意的是，您的`base_convert`呼叫会溢出，所以不要依赖它。

另一件事（相当重要）是`gmp`用于 base > 10 的字符集实际上是：

```
0123456789A..Za..z 
```

与 the`base_convert`和 hash 函数使用的相反：

```
0123456789a..f[g..zA..Z] 
```

我建议你使用`strtoupper`编码散列和`strtr`解码它，[像这样](https://github.com/alixaxel/phunction/blob/64362af4f05b76c2439f91a240b388a958c3d0de/phunction/Math.php#L31)。

# javascript - 同时按下的按键

> ID：11438668
> 
> 赞同：4
> 
> 时间：2012-07-11T18:02:36.157
> 
> 标签：javascript, keydown

我可以知道在 Javascript 中同时按下的键数吗？

如果是这样，我怎样才能拥有他们的数组`keyCode`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T18:04:10.063

您可以监听 keydown 和 keyup 事件。

```
var keys = { length: 0 };

document.onkeydown = function(e){
    if(!keys[e.keyCode])   {
        keys[e.keyCode] = true;
        keys.length++;
    }
}

document.onkeyup = function(e){
    if(keys[e.keyCode])   {
        keys[e.keyCode] = false;
        keys.length--;
    }
} 
```

然后`true`是当前按下的所有键。

感谢@Esailija 的小提琴演示：http: [//jsfiddle.net/maniator/Gc54D/](http://jsfiddle.net/maniator/Gc54D/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T06:07:08.020

这应该可以解决问题。它类似于 Neal 的，但应该修复一些问题，包括离开窗口错误和负数的键错误。我还稍微简化了消息编写代码。我用按需系统替换了用于编写键数消息的计时器循环，添加了用于减少长度索引的安全机制，并添加了 clearKeys 以在用户离开窗口时将所有键切换为向上。该代码仍然有两个错误：它无法识别在新窗口打开和关闭后仍然按住的键（必须释放并重新推送），并且我无法识别超过六个键（我怀疑这与此代码无关，而是与计算机/浏览器...）。

```
var keys = {
    length: 0
};

window.onkeydown = function(e) {
    if (!keys[e.keyCode]) {
        keys[e.keyCode] = true;
        keys.length++;
        document.body.innerHTML = "You are pressing " + keys.length + " keys at the same time.";
    }
}

window.onkeyup = function(e) {
    if (keys[e.keyCode]) {
        keys[e.keyCode] = false;
        if (keys.length) {
            keys.length--;
        }
        document.body.innerHTML = "You are pressing " + keys.length + " keys at the same time.";
    }
}

function clearKeys() {
    for (n in keys) {
        n = false
    };
    keys.length = 0;
    document.body.innerHTML = "You are pressing " + 0 + " keys at the same time.";
}

document.body.innerHTML = "You are pressing 0 keys at the same time.";
window.onblur = clearKeys; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T07:16:35.573

由于您想要同时按下的键数及其键码数组，我建议您使用以下函数：

```
var getKeys = function () {
    var keys = [];

    window.addEventListener("blur", blur, false);
    window.addEventListener("keyup", keyup, false);
    window.addEventListener("keydown", keydown, false);

    return function () {
        return keys.slice(0);
    };

    function blur() {
        keys.length = 0;
    }

    function keyup(event) {
        var index = keys.indexOf(event.keyCode);
        if (index >= 0) keys.splice(index, 1);
    }

    function keydown(event) {
        var keyCode = event.keyCode;
        if (keys.indexOf(keyCode) < 0)
        keys.push(keyCode);
    }
}(); 
```

当您调用`getKeys`它时，它将返回同时按下的所有键的数组。您可以使用该`length`数组的属性来查找同时按下的键数。由于它使用`addEventListener`它与页面上的其他代码协同工作。

我测试了上述功能，即使您在按住一个键的同时切换到另一个窗口（它会从数组中删除该键），它也总是返回正确的按键。如果您按住一个键并切换回来，那么它会识别出一个键被按下并推入阵列。因此，我可以证明上述代码中没有错误。至少不是在我测试过的浏览器上（Opera 12.00）。

我能够同时按 8 个键（、`A`、`S`、`D`、`F`、`J`和`K`）。这个数字似乎是特定于操作系统的，因为我只能同时按 4 个左手键和 4 个右手键。例如，在我按、和，然后按另一只左手（比如说）之后，它就无法识别最后一个键。这可能是因为操作系统知道人类的打字方式，因此它只允许左右手键中的每个键有四个中断。我使用的操作系统是 Ubuntu 12.04。`L``;``A``S``D``F``G`

[您可以在这个fiddle](http://jsfiddle.net/yqesR/1/)上看到正在运行的代码。我使用[Delta Timer](https://gist.github.com/2056987 "JavaScript 的 Delta Timing — 要点")而不是`setInterval`每 50 毫秒显示一次结果。您可能还希望阅读以下[答案](https://stackoverflow.com/a/11356045/783743 "是否可以在 JavaScript 中覆盖 keydown 重复延迟？")。

# tomcat - Tomcat URL 重写过滤器不转发

> ID：11438669
> 
> 赞同：3
> 
> 时间：2012-07-11T18:02:39.760
> 
> 标签：tomcat, url-rewriting

我想转发与该模式匹配的所有 URL：

`http://localhost:8080/docs/view.php?fDocumentId=([0-9]+)`

至：

`http://localhost:8080/alfresco/service/org/docs/redirect/document/properties/$1`

这是在 tomcat 上，有两个主要的 webapps 正在加载：“docs”和“alfresco”。
为简单起见，我们的旧旧应用程序（基于 LAMP）的所有 URL 都以 /docs 作为路径的第一部分，与新应用程序相同。我转发到 /alfresco 的原因是因为我开发了一个 webscript 来将旧 URL 解析为新 URL 并执行另一个重定向回 /docs，但这与这个问题无关。

新系统已经加载了[URLRewriteFilter](http://code.google.com/p/urlrewritefilter/)，但是缺少需要放入 webapps/docs/WEB-INF/web.xml 的 google 代码站点（我添加）中提到的以下特定代码：

```
<filter>
    <filter-name>UrlRewriteFilter</filter-name>
    <filter-class>org.tuckey.web.filters.urlrewrite.UrlRewriteFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>UrlRewriteFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
</filter-mapping> 
```

然后，我将以下规则添加到与 web.xml 位于同一目录中的 urlrewrite.xml：

```
<rule>
   <from>^/docs/view.php?fDocumentId=([0-9]+)</from>
   <to>/alfresco/service/org/docs/redirect/document/properties/$1</to>
</rule> 
```

当我试图去类似的东西时，我得到了 404`http://localhost:8080/docs/view.php?fDocumentId=12345`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:19:27.717

你的`<from>`和你的`<to>`都是不正确的。

首先，您`<from>`需要相对于已经是的当前上下文（即 webapp）`/docs`，所以您想要这样：

```
<from>^/view.php?fDocumentId=([0-9]+)</from> 
```

其次，您`<to>`也必须与当前上下文相关，除非您指定`context`属性*并且*您的上下文被定义为跨上下文。所以，你需要这个：

```
<to context="/alfresco">/service/gov/inteldocs/redirect/document/properties/$1</to> 
```

*你的文件中还需要*这个*`META-INF/context.xml`：*

 *```
<Context ... crossContext="true" ... /> 
```

请注意，这两个警告都在[http://urlrewritefilter.googlecode.com/svn/trunk/src/doc/manual/4.0/index.html#from](http://urlrewritefilter.googlecode.com/svn/trunk/src/doc/manual/4.0/index.html#from)和[http://urlrewritefilter 的 url-rewrite 文档中明确说明。 googlecode.com/svn/trunk/src/doc/manual/4.0/index.html#to](http://urlrewritefilter.googlecode.com/svn/trunk/src/doc/manual/4.0/index.html#to)（包括后者的示例）。*

# java - 在静态模式下使用 AudioTrack 的正确方法是什么？

> ID：11438671
> 
> 赞同：5
> 
> 时间：2012-07-11T18:02:43.833
> 
> 标签：java, android, multithreading, audio

我有一个需要播放短声音的 Android 游戏。[SoundPool](http://developer.android.com/reference/android/media/SoundPool.html)在[双核手机](http://code.google.com/p/android/issues/detail?id=17623)上崩溃，[Mediaplayer](http://developer.android.com/reference/android/media/MediaPlayer.html)延迟高达 200ms+，OpenSL 需要 SDK 9+（我支持 1.5）。这样就[剩下 AudioTrack 了](http://developer.android.com/reference/android/media/AudioTrack.html)。

这是我尝试过的。我像这样创建 AudioTrack 对象。

```
protected AudioTrack createAudioTrack() {
    final int trackSize = 17408;
    return new AudioTrack(AudioManager.STREAM_MUSIC, 44100, AudioFormat.CHANNEL_CONFIGURATION_STEREO, AudioFormat.ENCODING_PCM_16BIT, trackSize, AudioTrack.MODE_STATIC);
} 
```

然后我为每个游戏声音（大约 8 个）创建一个可运行文件。

```
private static class SoundRunnable implements Runnable {

    private final AudioTrack sound;
    private final byte[] rawAudio;

    public SoundRunnable(final AudioTrack sound, final byte[] rawAudio){
        this.sound = sound;
        this.rawAudio = rawAudio;
        sound.write(rawAudio, 0, rawAudio.length);
    }

    @Override
    public void run() {
        playSound();
    }

    private synchronized void playSound() {
        switch (sound.getPlayState()) {
        case AudioTrack.PLAYSTATE_PAUSED:
            sound.stop();
            sound.reloadStaticData();
            sound.play();
        break;
        case AudioTrack.PLAYSTATE_PLAYING:
            sound.stop();
            sound.reloadStaticData();
            sound.play();
        break;
        case AudioTrack.PLAYSTATE_STOPPED:
            sound.reloadStaticData();
            sound.play();
        break;
        default:
            break;
        }
    }   

    public synchronized void release() {
        sound.release();
    }

} 
```

然后，当我需要播放声音时，我将其发送到 ThreadPool。

```
private void playSound(final int soundToPlay) {
    final SoundRunnable soundRunnable = mediaPlayers.get(soundToPlay);
    if(soundRunnable != null){
        threadPool.execute(soundRunnable);
    }
} 
```

我遇到的主要问题是我第一次执行可运行文件时声音会播放两次。之后每隔一段时间我仍然可能会听到双重声音，但效果很好。

我还尝试过在流模式下创建单个 AudioTrack 并从可运行文件中写入原始音频。这有点成功，但很难知道何时停止播放。如果你停得太早，声音就会被缩短，太晚了，你会收到一个 gainBuffer 错误并且应用程序锁定。同时播放两个声音也很困难（可能使用 AudioTracks 池）。

我很想看到不涉及流式音频的 AudioTrack 示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T21:22:32.020

我在 Google 办公时间问了这个问题。他们说 AudioTrack 和 SoundPool 有同样的错误。这个问题的唯一解决方案是编写一个原生媒体播放器。虽然，这个问题似乎只影响运行 Gingerbread 的双核手机。

# objective-c - 奇怪的语义问题

> ID：11438672
> 
> 赞同：0
> 
> 时间：2012-07-11T18:02:51.913
> 
> 标签：objective-c, cocoa

从我从 xcode 3 更改为 4 时，我一直遇到这个语义问题

我的代码没有任何问题，但是当我使用 xcode 4 时，这种情况不断出现......

：**从不兼容的类型'NSString *'分配给'Main *'；**

我如何解决它？我尝试删除：“ self.delegate=[[[NSString alloc] init] autorelease];”

但删除它......并不是一个真正的修复

```
-(id)init {
    if (self=[super init])
    {

        self.delegate=[[[NSString alloc] init] autorelease];

    }

    return self;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T18:10:12.310

字面上的答案是您应该使用`delegate`定义为的任何类的对象并分配它而不是字符串。（根据程序逻辑，将现有对象传递给它或创建一个新对象。）

然而，**真正的**答案来自于问自己：为什么这个代表在这里，它的目的是什么？

# winapi - 键盘的 SendInput() - 仅大写

> ID：11438677
> 
> 赞同：1
> 
> 时间：2012-07-11T18:03:16.593
> 
> 标签：winapi, keyboard, sendinput

很可笑。几分钟前我刚刚在这里询问[SendInput() 键盘 - 只有小写](https://stackoverflow.com/questions/11438110/sendinput-for-keyboard-only-lowercase/11438156#11438156)，如何发送大写字母。解决方案是在信件之前发送班次。但是开机后就关不掉了...

我正在努力使用这样的 KEYEVENTF_KEYUP 标志：

```
INPUT Input = { 0 };
Input.type       = INPUT_KEYBOARD;
Input.mi.dwFlags = KEYEVENTF_EXTENDEDKEY;
Input.ki.wVk   = VK_LSHIFT;
SendInput( 1, &Input, sizeof( INPUT ) );

Input.type       = INPUT_KEYBOARD;
Input.mi.dwFlags = KEYEVENTF_EXTENDEDKEY;
Input.ki.wVk   = 'A';
SendInput( 1, &Input, sizeof( INPUT ) );

Input.type       = INPUT_KEYBOARD;
Input.mi.dwFlags = KEYEVENTF_KEYUP | KEYEVENTF_EXTENDEDKEY;
Input.ki.wVk   = VK_LSHIFT;
SendInput( 1, &Input, sizeof( INPUT ) );

Input.type       = INPUT_KEYBOARD;
Input.mi.dwFlags = KEYEVENTF_EXTENDEDKEY;
Input.ki.wVk   = 'A';
SendInput( 1, &Input, sizeof( INPUT ) ); 
```

但它似乎根本不起作用。它总是发送AA。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:20:13.640

问题在于

```
Input.mi.dwFlags 
```

它应该是

```
Input.ki.dwFlags 
```

感谢罗德里戈。

另一种方法是使用 KEYEVENTF_SCANCODE 标志。然后我们必须使用 VkKeyScan() 扫描我们的字符 - [http://msdn.microsoft.com/en-us/library/windows/desktop/ms646329(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646329(v=vs.85).aspx)，它为我们提供了虚拟键代码低字节和高字节中的状态（shift、ctrl 等）。

由于使用扫描码，我们必须使用 MapVirtualKey() 和 MAPVK_VK_TO_VSC 值将我们的虚拟代码映射到扫描码，MS​​DN 说：

> uCode 是一个虚拟键码，被翻译成扫描码。如果是不区分左右键的虚拟键码，则返回左手扫码。如果没有翻译，该函数返回 0。

然后将其传递给 Input.ki 结构的 wScan 字段，因为根据 MSDN，如果我们使用扫描代码，它会忽略 wVk 并使用 wScan，MSDN 说：

> 如果指定，wScan 会识别密钥并忽略 wVk。

因此代码看起来像这样：

```
INPUT Event = { 0 };

const SHORT key = VkKeyScan('a');
const UINT mappedKey = MapVirtualKey( LOBYTE( key ), 0 );

// Press shift key
Event.type = INPUT_KEYBOARD;
Event.ki.dwFlags = KEYEVENTF_SCANCODE;
Event.ki.wScan = MapVirtualKey( VK_LSHIFT, 0 );
SendInput( 1, &Event, sizeof( Event ) );

// upper case 'A' (press down)
Event.type = INPUT_KEYBOARD;
Event.ki.dwFlags = KEYEVENTF_SCANCODE;
Event.ki.wScan = mappedKey;
SendInput( 1, &Event, sizeof( Event ) );

//  release 'A'
Event.type = INPUT_KEYBOARD;
Event.ki.dwFlags = KEYEVENTF_SCANCODE | KEYEVENTF_KEYUP;
Event.ki.wScan = mappedKey;
SendInput( 1, &Event, sizeof( Event ) );

// Release shift key
Event.type = INPUT_KEYBOARD;
Event.ki.dwFlags = KEYEVENTF_SCANCODE | KEYEVENTF_KEYUP;
Event.ki.wScan = MapVirtualKey( VK_LSHIFT, 0 );
SendInput( 1, &Event, sizeof( Event ) );

const SHORT key1 = VkKeyScan('a');
const UINT mappedKey1 = MapVirtualKey( LOBYTE( key1 ), 0 );

// lower case 'a' (press down)
Event.type = INPUT_KEYBOARD;
Event.ki.dwFlags = KEYEVENTF_SCANCODE;
Event.ki.wScan = mappedKey1;
SendInput( 1, &Event, sizeof( Event ) );

// release 'a'
Event.type = INPUT_KEYBOARD;
Event.ki.dwFlags = KEYEVENTF_SCANCODE;
Event.ki.wScan = mappedKey1;
SendInput( 1, &Event, sizeof( Event ) ); 
```

如果我说错了，请纠正我。

# javascript - 使用 Javascript 更改单选按钮名称

> ID：11438678
> 
> 赞同：0
> 
> 时间：2012-07-11T18:03:18.973
> 
> 标签：javascript, forms, radio-button

我正在使用一个简单的 JS 复制函数来复制一个 div。里面是带有单选按钮的表单信息，包括一组称为“getOrRequest”的组。每个 div 代表一本书，需要有自己的“getOrRequest”值。

需要更改名称以使每个重复的单选按钮组都可以选择，而不会影响其他所有单选按钮。更改这些值的最佳方法是什么？

这是我复制 div 的方式，以防万一。

```
var bookInfo = document.getElementById('bookInformation');
var copyDiv = document.getElementById('addListing').cloneNode(true);
bookInfo.appendChild(copyDiv); 
```

然后，我尝试了几种更改名称值的方法。像这样：

```
bookInfo.copyDiv.getOrRequest_0.setAttribute("name", "'getOrRequest' + idNumber + '[]'");
bookInfo.copyDiv.getOrRequest_1.setAttribute("name", "'getOrRequest' + idNumber + '[]'"); 
```

还有这个：

```
bookInfo.copyDiv.getOrRequest_0.name = 'getOrRequest' + idNumber + '[]';
bookInfo.copyDiv.getOrRequest_1.name = 'getOrRequest' + idNumber + '[]'; 
```

getOrRequest_0 和 getOrRequest_1 是输入值的 ID，但我现在已经尝试了几种方法，但似乎没有任何效果。提前致谢！

编辑：更多信息

这是我正在使用的特定代码：

```
function addAnotherPost(){

var bookInfo = document.getElementById('bookInformation');
var copyDiv = document.getElementById('addListing').cloneNode(true);
var size = copyDiv.childNodes.length;

copyDiv.id = 'addListing' + idNumber;

for(var j = 0; j < size; j++){
   if(copyDiv.childNodes[j].name === "getOrRequest[]"){
      copyDiv.childNodes[j].name = "getOrRequest" + idNumber + "[]";
   }
}

bookInfo.appendChild(copyDiv);

idNumber++;
} 
```

而且它似乎不起作用.. div 重复，但名称值没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:39:28.443

你可以试试这个 - [http://jsfiddle.net/ZKHF3/](http://jsfiddle.net/ZKHF3/)

```
 <div id="bookInformation">
        <div id="addListing">
            <input type="radio" name="addListing0[]" />
            <input type="radio" name="addListing0[]" />
        </div>
    </div>
    <button id="button">Add Listing</button>

    <script>
    document.getElementById("button").addEventListener("click", AddListing, false);

    var i = 1;
    var bookInfo = document.getElementById('bookInformation');

    function AddListing() {
        var copyDiv = document.getElementById('addListing').cloneNode(true);
        var size    = copyDiv.childNodes.length;

        copyDiv.id = "listing" + i;
        for ( var j = 0; j < size; j++ ) {
            if ( copyDiv.childNodes[j].nodeName.toLowerCase() == 'input' ) {
                copyDiv.childNodes[j].name = "addListing" + i + "[]";
            }
        }

        bookInfo.appendChild(copyDiv);
        i++;
    }
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:11:16.507

问题是您正在寻找 div 的子节点，但复选框不是子节点，它们是后代节点。您要查找的节点嵌套在标签中。使用以下命令更新您的代码以查找所有后代输入`copyDiv.getElementsByTagName("input")`：

```
var idNumber = 0;
function addAnotherPost() {
    var bookInfo = document.getElementById('bookInformation');
    var copyDiv = document.getElementById('addListing').cloneNode(true);
    copyDiv.id = 'addListing' + idNumber;

    var inputs = copyDiv.getElementsByTagName("input");
    for(var j = 0; j < inputs.length; j++){
       if(inputs[j].name === "getOrRequest[]"){
          inputs[j].name = "getOrRequest" + idNumber + "[]";
       }
    }

    bookInfo.appendChild(copyDiv);
    idNumber++;
} 
```

[http://jsfiddle.net/gilly3/U5nsa/](http://jsfiddle.net/gilly3/U5nsa/)

# javascript - 操纵 Google Analytics（分析）数据 - 教育目的：G. Analytics 报告的可信度如何

> ID：11438687
> 
> 赞同：0
> 
> 时间：2012-07-11T18:03:37.320
> 
> 标签：javascript, jquery, google-analytics, data-manipulation

我需要一个修改过的 Javascript，它会夸大浏览量、唯一身份访问者和访问者数量！

出于教育目的，因为我想看看在人为更改 G. Analytics 报告时是否存在某些模式

我对此进行了编码，但它不起作用：

```
 <script type="text/javascript">

var i=0;
 for (i=0;i<=10;i++) {

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-19629541-9']);
 _gaq.push(['_trackPageview']);

   _gaq.push([_setDomainName, '.domain.com']); 
   _gaq.push([_setDomainName, 'domain.com']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async =   true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') +         '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

}

</script>​​​​ 
```

并且此代码仅更改网页浏览量：

```
<script>
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js'     type='text/javascript'%3E%3C/script%3E"));
</script>   
<script>
// Google Analytics
var pageTracker;
try {
    pageTracker = _gat._getTracker("UA-15064357-1"); // pour dystroy.org
    pageTracker._setDomainName("none");
    pageTracker._setAllowLinker(true);
    for (var i=10; i-->0;) pageTracker._trackPageview();
} catch(err) {console.log(err);}
</script>​ 
```

我之所以问，是因为我最近查看了一份分析报告，该报告与所有基础数​​据并不完全吻合

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:17:18.550

无法保证以特定方式破坏 GA 代码会产生与另一个 GA 破坏代码相同的结果。

如果您想了解可能由损坏的 GA 代码引起的特定趋势，那么您应该将迄今为止的趋势和您的发现发布给[Pro Webmasters](https://webmasters.stackexchange.com/)，看看他们是否可以查明具体问题。

对可能正在看它的人来说只是一个剧透。

**注意不要在您的网站上这样做。这是一个 GA 损坏的代码。**

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-19629541-5']);
_gaq.push(['_setAllowHash', false]);
_gaq.push(['b._setAccount', 'UA-19629541-5']);
_gaq.push(['b._setAllowHash', true]);

for (var i=0;i<=10;i++) {
  _gaq.push(['_trackPageview']);
  _gaq.push(['b._trackPageview']);
}
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async =   true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') +         '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })(); 
```

**更新**

对我在这里做什么的一些解释。

我正在创建 2 个跟踪器，但我没有触及该`_setDomainName`属性。这意味着两个跟踪器都使用相同的 cookie。但是其中一个跟踪器使用`_setAllowHash`true 而另一个使用 false。`_setAllowHash`这些天已被弃用，所以你真的不需要它。但它的作用是，当它为 false 时，它​​会禁用域哈希，这是您在第一个点之前在 cookie _utma 中看到的数字。当域哈希被禁用时，这个数字只有 1。

当第一个跟踪器运行时，它会禁用域哈希并创建 cookie，然后它会触发一次网页浏览。当第二个运行时，它发现哈希与预期的不匹配，因此它创建了一个新的 cookie，覆盖了旧的 cookie。

他们一个接一个地运行，删除并重新创建 __utma cookie。事实证明，这个 cookie 还保存了 visitorId，因此 Google Analytics 将页面浏览量视为具有全新访问的新访问者。

不幸的是，这在周围很常见，幸运`_setAllowHash`的是已被弃用，因此根本没有充分的理由使用它。所以它不应该像以前那样经常发生，但是仍然有一些设置可能会导致这样的问题。

经验法则是，如果您使用多个跟踪器，则始终对所有跟踪器使用相同的设置。

# c# - 如何将 const 字符串数组从 c dll 传递回 c#

> ID：11438688
> 
> 赞同：0
> 
> 时间：2012-07-11T18:03:45.753
> 
> 标签：c#, arrays, string, dll, pinvoke

我有调用 C dll 的 C# 代码。dll 具有以下全局 const 字符串数组：

```
const char *PtxEditorColumnHeaders[] = {
    "Ptx#",
    "Primitive",
    "PtxType",
    "_END_COLUMNS"
}; 
```

我想要做的就是获取这个文本并将其填充到 ListView 控件的列文本中。我发现有几种方法可以做到这一点，使用 Pinvoke、strcpy 等。但是，由于我仍在学习 c# 并且到目前为止我的方式没有受到破坏，那么最佳实践方法是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-11T19:53:32.347

编写一个 C 函数，返回指向数组第一个元素的指针和元素个数：

```
const char **GetPtxEditorColumnHeaders(int *count)
{
    *count = 4;//or however you want to get hold of this information
    return PtxEditorColumnHeaders;
} 
```

然后声明 p/invoke：

```
[DllImport(@"mydll.dll", CallingConvention=CallingConvention.Cdecl)]
static extern IntPtr GetPtxEditorColumnHeaders(out int count); 
```

像这样调用函数：

```
int count;
IntPtr PtxEditorColumnHeaders = GetPtxEditorColumnHeaders(out count);
List<string> headers = new List<string>();
for (int i=0; i<count; i++)
{
    IntPtr strPtr = Marshal.ReadIntPtr(PtxEditorColumnHeaders);
    headers.Add(Marshal.PtrToStringAnsi(strPtr));
    PtxEditorColumnHeaders += Marshal.SizeOf(typeof(IntPtr));
} 
```

这些东西很快就会变得乏味，此时 C++/CLI 包装器开始看起来像是一个更有吸引力的选择。

# node.js - child_process exec 返回一个神秘的错误

> ID：11438689
> 
> 赞同：0
> 
> 时间：2012-07-11T18:03:51.557
> 
> 标签：node.js

我有以下代码（除了命令本身之外，从[节点文档复制）：](http://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback)

```
var util = require('util'),
    exec = require('child_process').exec,
    child,
    command = 'libreoffice --headless -convert-to pdf mysourcefile.doc -outdir /tmp';
child = exec(command,
           function (error, stdout, stderr) {
              if (error !== null) {
                 console.log(error);
                 return;
              }
           ); 
```

该命令似乎执行良好（输出文件在那里），但错误始终是“错误：命令失败：”并且未定义错误（文档说 err.code 将提供更多信息）。

我做错了什么/忽略了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T12:50:04.187

就像我说的。年后。我得到了同样的错误。只需找出可能的错误 - 结帐（[https://stackoverflow.com/a/21137820/1211174](https://stackoverflow.com/a/21137820/1211174)）。如果您在 Windows 上，则有可能在 cmd 上运行 someauto。然后这个自动运行失败了。你得到两个输出。sterr 和标准输出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T11:26:59.127

应该是`error.code`。

文档混合使用`error`and `err`; 它指的是`Error`提供给回调的对象。

# emacs - Emacs 空白模式忽略空白行列和填充列

> ID：11438691
> 
> 赞同：0
> 
> 时间：2012-07-11T18:03:53.167
> 
> 标签：emacs, whitespace, emacs24

我在 Mac OS X 上使用 Emacs 24.1.1 时遇到问题。我正在编辑 Jade 和 CoffeeScript 文件，因此我为这些文件类型打开了空白模式。

我看到的是长度超过 70 个字符的行用空白行字体突出显示，无论空白行列的设置如何。

![问题截图](../Images/31a4ac3c4554afd13286a3a6a8040501.png)

在这张照片中，很明显我已经自定义了 whitespace-line-column 来跟踪 fill-column，并且我已经将 fill-column 设置为 120，但是更短的行被突出显示。

我浏览了 Jade 模式的代码，并没有看到任何可以解释该行为的内容，但我对 Emacs Lisp 的了解仅略知一二。

提前感谢您的任何指点！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T02:54:45.887

您必须在激活`whitespace-line-column` *之前*`whitespace-mode`进行设置。也就是说，如果你想改变它的值，它不会生效，除非你`whitespace-mode`关闭并重新打开。`M-x customize`具有讽刺意味的是，在您激活模式一次之前，该变量不可用:-(

但是，您可以通过在 .emacs 文件中添加以下行来自定义此变量的全局值：

```
(setq whitespace-line-column 120) 
```

由于您的 .emacs 是在您启动 Emacs 时进行评估的，因此该设置将在您第一次调用 whitespace-mode 之前生效，因此应该执行您想要的操作。如果您不想全局设置该值，而仅针对 Jade 文件，请将以下内容放入您的 .emacs 文件中：

```
(set (make-local-variable 'whitespace-line-column) 80)
(add-hook 'after-change-major-mode-hook
          '(lambda () (when (eq major-mode 'jade-mode)
                        (setq whitespace-line-column 120)))) 
```

如果您根本不想特别突出显示长行，您可能需要考虑第三种选择。您可以自定义变量 whitespace-style （通过键入`M-x customize-variable` `ENTER` `whitespace-style` `ENTER`）并在值列表中删除条目：

*   线条
*   线尾

（如果有的话）。这应该在全局上关闭长行的突出显示，而与 的值无关`whitespace-line-column`（同样，仅在您取消并重新激活空白模式之后）。

# jquery - 同位素 - 流体和砌体布局分为 2 列

> ID：11438693
> 
> 赞同：2
> 
> 时间：2012-07-11T18:04:00.907
> 
> 标签：jquery, responsive-design, fluid-layout, jquery-isotope

不知道是什么导致了这个问题，但我有一个流畅的布局，我的盒子宽度为 25%，每行有 4 个盒子。在调整大小时，我注意到发生间歇性错误，其中 4 列变成了损坏的两列。在此处查看我的视频：http: [//cl.ly/0s172D303X1M3H1v161z](http://cl.ly/0s172D303X1M3H1v161z)（单击在浏览器链接中查看）。

我发现问题在浏览器之间不一致，它在某些浏览器中有效，但在其他浏览器中无效。有谁知道如何解决？

jsFiddle 在这里：http: [//jsfiddle.net/TVXve/](http://jsfiddle.net/TVXve/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T05:50:46.087

我想我会在 isotope 的 github 页面上提请注意您的问题，因为当我遇到同样的问题时，它对我很有帮助：

[https://github.com/desandro/isotope/issues/222](https://github.com/desandro/isotope/issues/222)

看来这是一个错误，您需要将项目的宽度设置为 24.5%。然后，这会出现差距问题（如果您要使用无缝网格），但至少应该帮助人们朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T23:53:21.033

我发现这两个插件在使用绝对 px 值时效果最好。您是否尝试将 columnWidth 设置为百分比值？

# backbone.js - Backbone.js 幕后

> ID：11438694
> 
> 赞同：1
> 
> 时间：2012-07-11T18:04:07.360
> 
> 标签：backbone.js

我阅读了几篇关于带有示例应用程序的 Backbone.js 的文章，但我找不到关于 Backbone 如何知道何时单击视图中的小部件以及它绑定到哪个模型的解释或示例。

它是通过ID的内部分配处理的吗？

例如，如果您想删除 id="123" 的 div，可以使用 jQuery 或 javascript 函数将其从 DOM 中删除。在主干中，这个 div 可能没有 id，但可以在不知情的情况下被删除，对吧？

如果有人知道一篇好文章或可以提高我对此的理解，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T00:41:16.337

视图“知道”它所绑定的模型的方式是通过如下所示的 _configure 方法完成的：

```
_configure: function(options) {
  if (this.options) options = _.extend({}, this.options, options);
  for (var i = 0, l = viewOptions.length; i < l; i++) {
    var attr = viewOptions[i];
    if (options[attr]) this[attr] = options[attr];
  }
  this.options = options;
} 
```

要注意的导入块是：

```
for (var i = 0, l = viewOptions.length; i < l; i++) {
    var attr = viewOptions[i];
    if (options[attr]) this[attr] = options[attr];
} 
```

viewOptions 是一个对视图具有“特殊”含义的键数组。这是数组：

```
var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName']; 
```

这个循环是视图和模型或视图和集合之间的“粘合剂”。如果它们出现在选项中，则会自动分配它们。

所有这些都在带[注释的源代码](http://documentcloud.github.com/backbone/docs/backbone.html)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T22:02:27.227

阅读源代码可能是提高理解力的最佳选择。您要查看的 Backbone 函数称为 delegateEvents。但简短的版本是它使用[jQuery delegate()](http://api.jquery.com/delegate/)函数。根元素是视图的元素（`el`属性），它由您提供的任何选择器过滤。

jQuery 实际上并没有将处理程序绑定到您正在收听的每个元素。相反，它让事件冒泡到根元素并在那里检查它们。由于每个单独的元素都没有附加任何内容，因此您可以自由删除它们而不会造成任何问题。然而，一些删除视图元素的方法（例如，通过在父元素上设置innerHTML）可能会导致内存泄漏。我不是 100% 确定这一点，但最好还是不要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T18:18:07.833

检查[http://www.joezimjs.com/javascript/introduction-to-backbone-js-part-1-models-video-tutorial/](http://www.joezimjs.com/javascript/introduction-to-backbone-js-part-1-models-video-tutorial/)。

即使它看起来很复杂，也没什么可学的，相信我。

如果您问得更具体，我可以尝试提供帮助。

# asp.net-mvc - XmlMediaTypeFormatter 无法写入 ObjectQuery 类型的对象

> ID：11438700
> 
> 赞同：4
> 
> 时间：2012-07-11T18:04:35.987
> 
> 标签：asp.net-mvc, asp.net-web-api

在使用 EntityFramework 并从 MVC 4 Web API Get 操作返回 IQueryable 时，当 XML 序列化程序设置为使用旧的 XmlSerializer（而不是 DataContractSerializer）时，会发生以下错误。

> > XmlMediaTypeFormatter 无法写入 ObjectQuery 类型的对象

这是一个已知的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-12T09:47:48.327

这个问题太迟了，但对于那些面临同样例外的人来说：

您的`ObjectQuery`类可能缺少**默认构造函数**。

在此处查看我的完整答案：[Xml 序列化无法编写“x”类型的对象](https://stackoverflow.com/questions/19332800/xml-serialization-cannot-write-an-object-of-type-x/19332801#19332801)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:42:20.610

不。

您需要为`[Queryable]`您的操作定义属性。此要求已在 RC 中添加，可能会在 RTM 中删除

* * *

# 笔记

OData 支持目前[还不清楚](http://aspnetwebstack.codeplex.com/discussions/359229)。我创建了[PocoHttp](https://github.com/PocoHttp/PocoHttp)来使用 ASP.NET Web API 的 OData，但由于目前缺乏明确性而暂停了开发。

# http - 扭曲的帖子长度限制

> ID：11438713
> 
> 赞同：2
> 
> 时间：2012-07-11T18:05:36.000
> 
> 标签：http, post, twisted

你如何设置扭曲的 POST 请求的长度限制？我在文档中环顾四周，找不到任何东西。如果我知道默认限制，它甚至会有所帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T23:39:31.543

我不相信传入 POST 数据的大小有默认限制，但是您可以通过覆盖该`Request.handleContentChunk()`方法很容易地施加一个限制，例如：

```
from twisted.web import server

class SizeLimitingRequest(server.Request):
    def handleContentChunk(self, data):
        if self.content.tell() + len(data) > self.size_limit_on_post_data:
            raise SomeKindOfError("too much data nooooooo")
        return server.Request.handleContentChunk(self, data) 
```

您要重写的实际方法是 in `twisted.web.http.Request`，它是`server.Request`. 要使用闪亮的新类，只需设置`Site`实例的`requestFactory`属性：

```
mysite.requestFactory = SizeLimitingRequest 
```

# iphone - 从 pid 获得优先级和正常运行时间？（iOS）

> ID：11438717
> 
> 赞同：2
> 
> 时间：2012-07-11T18:05:46.000
> 
> 标签：iphone, objective-c, ios, process

这是适用于应用商店的应用。

使用[此处](https://stackoverflow.com/questions/4312613/can-we-retrieve-the-applications-currently-running-in-iphone-and-ipad)的代码，我可以获得正在运行的进程及其 pid 的列表。但是，我在 appstore 中找到了几个应用程序（[比如这个](http://itunes.apple.com/us/app/battery-memory-system-status/id497937231?mt=8)也检索了每个进程的**优先级**和**开始时间的应用程序。**

（注意：我不在乎它是正常运行时间，进程激活了多长时间，还是进程开始的挂钟日期/时间）。

有没有记录的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-21T10:20:01.407

这是获取您想要的所有流程相关信息的代码，例如名称、优先级、开始日期、父 ID、状态。[这](https://github.com/Shmoopi/iOS-System-Services)是通过演示获取完整资源的链接。

```
// List of process information including PID's, Names, PPID's, and Status'
+ (NSMutableArray *)processesInformation {
    // Get the list of processes and all information about them
    @try {
        // Make a new integer array holding all the kernel processes
        int mib[4] = {CTL_KERN, KERN_PROC, KERN_PROC_ALL, 0};

        // Make a new size of 4
        size_t miblen = 4;

        size_t size = 0;
        int st = sysctl(mib, miblen, NULL, &size, NULL, 0);

        // Set up the processes and new process struct
        struct kinfo_proc *process = NULL;
        struct kinfo_proc *newprocess = NULL;

        // do, while loop rnning through all the processes
        do {
            size += size / 10;
            newprocess = realloc(process, size);

            if (!newprocess) {
                if (process) free(process);
                // Error
                return nil;
            }

            process = newprocess;
            st = sysctl(mib, miblen, process, &size, NULL, 0);

        } while (st == -1 && errno == ENOMEM);

        if (st == 0) {
            if (size % sizeof(struct kinfo_proc) == 0) {
                int nprocess = size / sizeof(struct kinfo_proc);

                if (nprocess) {
                    NSMutableArray *array = [[NSMutableArray alloc] init];

                    for (int i = nprocess - 1; i >= 0; i--) {

                        NSString *processID = [[NSString alloc] initWithFormat:@"%d", process[i].kp_proc.p_pid];
                        NSString *processName = [[NSString alloc] initWithFormat:@"%s", process[i].kp_proc.p_comm];
                        NSString *processPriority = [[NSString alloc] initWithFormat:@"%d", process[i].kp_proc.p_priority];
                        NSDate   *processStartDate = [NSDate dateWithTimeIntervalSince1970:process[i].kp_proc.p_un.__p_starttime.tv_sec];
                        NSString       *processParentID = [[NSString alloc] initWithFormat:@"%d", [self parentPIDForProcess:(int)process[i].kp_proc.p_pid]];
                        NSString       *processStatus = [[NSString alloc] initWithFormat:@"%d", (int)process[i].kp_proc.p_stat];
                        NSString       *processFlags = [[NSString alloc] initWithFormat:@"%d", (int)process[i].kp_proc.p_flag];

                        // Check to make sure all values are valid (if not, make them)
                        if (processID == nil || processID.length <= 0) {
                            // Invalid value
                            processID = @"Unkown";
                        }
                        if (processName == nil || processName.length <= 0) {
                            // Invalid value
                            processName = @"Unkown";
                        }
                        if (processPriority == nil || processPriority.length <= 0) {
                            // Invalid value
                            processPriority = @"Unkown";
                        }
                        if (processStartDate == nil) {
                            // Invalid value
                            processStartDate = [NSDate date];
                        }
                        if (processParentID == nil || processParentID.length <= 0) {
                            // Invalid value
                            processParentID = @"Unkown";
                        }
                        if (processStatus == nil || processStatus.length <= 0) {
                            // Invalid value
                            processStatus = @"Unkown";
                        }
                        if (processFlags == nil || processFlags.length <= 0) {
                            // Invalid value
                            processFlags = @"Unkown";
                        }

                        // Create an array of the objects
                        NSArray *ItemArray = [NSArray arrayWithObjects:processID, processName, processPriority, processStartDate, processParentID, processStatus, processFlags, nil];

                        // Create an array of keys
                        NSArray *KeyArray = [NSArray arrayWithObjects:@"PID", @"Name", @"Priority", @"StartDate", @"ParentID", @"Status", @"Flags", nil];

                        // Create the dictionary
                        NSDictionary *dict = [[NSDictionary alloc] initWithObjects:ItemArray forKeys:KeyArray];

                        // Add the objects to the array
                        [array addObject:dict];
                    }

                    // Make sure the array is usable
                    if (array.count <= 0) {
                        // Error, nothing in array
                        return nil;
                    }

                    // Free the process
                    free(process);

                    // Successful
                    return array;
                }
            }
        }

        // Something failed
        return nil;
    }
    @catch (NSException * ex) {
        // Error
        return nil;
    }
}

// Parent ID for a certain PID
+ (int)parentPIDForProcess:(int)pid {
    // Get the parent ID for a certain process
    @try {
        // Set up the variables
        struct kinfo_proc info;
        size_t length = sizeof(struct kinfo_proc);
        int mib[4] = { CTL_KERN, KERN_PROC, KERN_PROC_PID, pid };

        if (sysctl(mib, 4, &info, &length, NULL, 0) < 0)
            // Unknown value
            return -1;

        if (length == 0)
            // Unknown value
            return -1;

        // Make an int for the PPID
        int PPID = info.kp_eproc.e_ppid;

        // Check to make sure it's valid
        if (PPID <= 0) {
            // No PPID found
            return -1;
        }

        // Successful
        return PPID;
    }
    @catch (NSException *exception) {
        // Error
        return -1;
    }
} 
```

# android - 移动浏览器上的直接语音/语音输入

> ID：11438718
> 
> 赞同：5
> 
> 时间：2012-07-11T18:05:48.760
> 
> 标签：android, html, browser, mobile-safari, speech-recognition

我想制作一个需要处理许多短用户输入的 Web 应用程序，但不是输入所有文本，用户应该能够使用麦克风。

我知道 iPhone 和 Android 智能手机的键盘上确实有一个“麦克风按钮”，但两个平台都需要先聚焦输入才能开始录制。**如果我只有**一个按钮会更好，因为否则你不会真的觉得你打算用你的声音来执行输入。

我尝试`x-webkit-speech`在我的 Android 手机上使用该属性，但无论是 Dolphin HD 还是 Google Chrome 都确实显示了一个真实的语音输入字段。

有没有办法直接打开语音输入对话框而不首先使键盘可见，或者我只是期望很多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T23:56:40.653

（假设实际上在浏览器中启用了语音输入，）您只能显示“麦克风按钮”并将输入重定向到您想要的任何位置，如本例中的文本框：

```
<script type="text/javascript">
function transcribe(words){
    document.getElementById("mic").value="";
    document.getElementById("speech").value=words;
    document.getElementById("speech").focus();
}
</script>
Speech input for textarea - click the microphone icon and talk: <br> 
<br>
<textarea id="speech" cols="50"></textarea>
<input id="mic" style="width:15px; height:20px; border:0px; background-color:transparent" x-webkit-speech onwebkitspeechchange="transcribe(this.value)"> 
```

希望这会有所帮助！

# javascript - 如何允许我的 webparts 在 sharepoint 2007 中共享 js 变量

> ID：11438720
> 
> 赞同：0
> 
> 时间：2012-07-11T18:05:53.367
> 
> 标签：javascript, sharepoint, variables

我在 MOSS 2007 工作，并且有一个包含两个页面实用程序的页面（与 iframe 非常相似，但采用 corasworks webpart 形式）

第一个是指向一个 aspx 页面，其中包含一个自定义显示适配器，它允许我使用 xslt 和 html，以及一个内容编辑器指向一个 txt 文件，其中大部分是我的 javascripts。

至于第二个，它指向一个不同的 aspx，它还包含一个不同的自定义显示适配器和一个内容编辑器，它指向脚本的相同 txt 文件。

在脚本的文件中，我有一个全局变量，我正在通过在两个 webpart 上使用警报来测试它的值，并且两个警报首先显示初始值，但是当我使用第一个 webpart 更改该变量的值并尝试两者都再次发出警报，我仅在第一个上获得更改的值，但在第二个显示时仍然是原始值。

我最终希望拥有第二个并像第一个一样显示更改后的值，但显然我没有正确访问或存储它我相信这可能是父/子问题，但似乎无法在变量之间来回传递二 任何人都可以就如何执行此操作提出建议吗？

这将不胜感激

谢谢，

# google-app-engine - 来自 gwt-platform 的操作被执行多次

> ID：11438722
> 
> 赞同：1
> 
> 时间：2012-07-11T18:06:11.950
> 
> 标签：google-app-engine, session, objectify, gwt-platform

我正在使用 gwt-platform、objectify 和 appengine (java)。

我正在尝试在最佳实践之后创建用户和会话管理系统。我希望这是应用程序中的可重用模块。

在我的应用程序中，我有一个基于 gwt-platform 中的 Dispatch 模块、一个登录操作和一个注销操作。

当我进入应用程序时，会出现登录屏幕，一切正常。如果我在演示者之间导航，然后按下注销按钮，我会看到注销操作被执行了多次，或者与此相关的任何其他操作。一个动作的执行次数（应该只运行一次）似乎与我在演示者之间导航的次数成正比。

该项目的源代码托管在：[http ://code.google.com/p/gwt-platform-appengine-session-login-example/](http://code.google.com/p/gwt-platform-appengine-session-login-example/)

如果有人能给我一些错误的提示，那就太好了。此外，如果有人也想为该项目做出贡献，我们将不胜感激。请发电子邮件给我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:23:27.783

问题是您在`onReset()`方法中为 Logout 按钮添加了 EventHandler。
但是，如果您查看 GWTP 文档，`onReset()`则每当您导航到演示者时都会调用该方法。因此，如果您多次导航到演示者，`EventHandler`则会多次添加并因此执行多次（与您打开演示者的次数成正比）。

将方法`EventHandler`外`onReset()`移到`onBind()`方法中，因为`onBind()`在演示者的生命周期中只调用一次，并且它是您应该添加的地方`EventHandlers`。除此之外，将其包装到`registerHandler()`方法中，以便在`onUnbind()`调用时自动将其删除。

**FirstApplicationPresenter.java**：

```
@Override
protected void onBind() {
    super.onBind();
    getView().getLogoutBtn().setText("Logout "+username);
    registerHandler(getView().getLogoutBtn().addClickHandler(new ClickHandler() {
        @Override
            public void onClick(ClickEvent event) {
                Logout action = new Logout();
                dispatchAsync.execute(action, logoutCallback);
            }
    }));
}

@Override
protected void onReset() {
    super.onReset();
} 
```

# c# - C#：将文件上传到文件主机

> ID：11438723
> 
> 赞同：0
> 
> 时间：2012-07-11T18:06:18.603
> 
> 标签：c#, html, file-upload, upload, web

我一直在尝试从我的应用程序将文件上传到 Fileshawk.com。我是这样做的：

1-创建一个网络浏览器控件

2-加载页面

3-在网页中它有一个文件的输入标签。

4-我尝试使用失败的方法将文件添加到 HTML。

```
 private void Set_Text_TAG_INPUT(string attribute, string attname, string value)
    {
        // Get a collection of all the tags with name "input";
        HtmlElementCollection htmle = webBrowser1.Document.GetElementsByTagName("input");

        foreach (HtmlElement current in htmle)
        {
            if (current.GetAttribute(attribute).Equals(attname))
            {
                current.SetAttribute("value", value);
            }
        }
    }
    private void button1_Click(object sender, EventArgs e)
    {
        Set_Text_TAG_INPUT("id","upfile_1342028154587", "FILE.txt");
    } 
```

所以它没有改变 Input 标签的值。

有什么方法可以将我的文件添加到 HTML 或页面代码中，关于按下上传，我已经有一个方法可以调用 Web 浏览器按钮并单击它。

例如，当您单击从输入文件标记中选择文件时，会弹出一个窗口并选择文件，现在当您单击确定时，该文件存储在 HTML 中的什么位置？

最后，如果我是 HTML 和网络知识的新手，请原谅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:14:59.113

这是浏览器中的一项安全功能。您不能以编程方式设置“文件”类型的输入标签的值，因为它会引入安全漏洞（例如，恶意开发人员可以在处理提交事件之前设置值并获取他们想要的任何文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:26:56.870

使用 C# .NET 库 WebScraper 轻松上传文件/下载文件，但您需要分析 Fileshawk.com HTML 以提出您自己的 WebScraper 语法，共有 22 种文件主机语法可供示例并且已经可用。

[http://sorainnosia.com/Home/Article/WEBSCRAPER](http://sorainnosia.com/Home/Article/WEBSCRAPER)

# python - 如何使用子进程运行 virtualenv 包安装

> ID：11438727
> 
> 赞同：3
> 
> 时间：2012-07-11T18:06:44.197
> 
> 标签：python, virtualenv, pip

我正在为我的一个程序编写引导代码，并尝试使用 subprocess.call 安装到我的 virtualenv 目录

最初我使用：

```
subprocess.call(['pip', 'install', '-E', dir_name, 'processing']) 
```

在 ubuntu 上重新运行时，我注意到 -E 已过时（[http://pypi.python.org/pypi/pip/](http://pypi.python.org/pypi/pip/)）并且需要使用：

```
virtualenv dir_name && dir_name/bin/pip install processing 
```

这在 cmd 行中工作正常，但在子进程中不起作用：

```
subprocess.call(['virtualenv', dir_name, '&&', '{0}/bin/pip'.format(dir_name), 'install', 'processing']) 
```

返回此错误消息：

```
There must be only one argument: DEST_DIR (you gave dir_name && dir_name/bin/pip install   processing)
Usage: virtualenv [OPTIONS] DEST_DIR 
```

我也尝试过 virtualenv.create_bootstrap_script(extra_text) （但无法弄清楚并且我正在运行一些来自 git 的额外脚本）

想知道我在子流程中做错了什么或者我可以改变什么。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T19:44:48.250

只需检查第一个命令的状态，然后有条件地运行第二个：

```
retval = subprocess.call(
    ['virtualenv', dir_name]
)
if retval == 0:
    # a 0 return code indicates success
    retval = subprocess.call(
        ['{0}/bin/pip'.format(dir_name), 'install', 'processing']
    )
    if retval == 0:
        print "ERROR: Failed to install package 'processing'"
else:
    print "ERROR: Failed to created virtualenv properly." 
```

**警告：下面有危险！**

为了使`&&`令牌起作用，您必须使用参数 shell=True in `subprocess.call`。但是，如果您接受来自用户的输入，则**不得**使用 shell=True，因为它将允许执行任意代码。

此外，您需要将 args 连接在一起。

如果您使用的是硬编码的 dir_name：

```
cmdline = ' '.join(['virtualenv', dir_name, '&&', '{0}/bin/pip'.format(dir_name), 'install', 'processing'])
subprocess.call(
    cmdline,
    shell=True
) 
```

# wpf - 如何更改用户控件资源？

> ID：11438735
> 
> 赞同：2
> 
> 时间：2012-07-11T18:07:14.033
> 
> 标签：wpf

我定义了一个用户控件资源：

```
<UserControl.Resources>
    <ResourceDictionary>
        <System:Double x:Key="marginAndThickenss">3</System:Double>
    </ResourceDictionary>
</UserControl.Resources> 
```

这在整个用户计数中都非常有效，因为我需要不同元素的边距和厚度。

我的问题是，如何在运行时更改此变量？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:28:52.707

```
Resources["marginAndThickenss"] = newValue; 
```

采用

```
FindResource("marginAndThickenss"); 
```

获取资源价值

# vb.net - 搜索字符串的列表框，DataSource 属性集

> ID：11438737
> 
> 赞同：0
> 
> 时间：2012-07-11T18:07:29.000
> 
> 标签：vb.net, listbox, datasource

我正在尝试制作`TextBox1`一个搜索栏，以在`ListBox1`.

我希望它删除没有我搜索的字符串的其他项目。该列表显示特定目录中的所有文件，因此如果我搜索**“icon_”**，它**只会**显示名称中带有**icon_**的文件。这可能吗？

我刚才问过这个问题，但我不能使用任何答案，因为列表框是由来自特定目录的文件名填充的，这给了我这个错误：

> 设置 DataSource 属性时无法修改项目集合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:47:33.677

有很多不同的方法可以做到这一点。

此方法将您的文件列表放入 DataTable 并使用 BindingSource，您可以使用它的 Filter 属性来过滤列表。

这是一个带有 ListBox 和 TextBox 的表单：

```
Public Class Form1
  Dim bs As New BindingSource

  Public Sub New()
    InitializeComponent()
  End Sub

  Protected Overrides Sub OnLoad(ByVal e As System.EventArgs)
    MyBase.OnLoad(e)

    Dim testPath As String = "c:\MyPath"
    Dim dt As New DataTable
    dt.Columns.Add("File", GetType(String))

    For Each f As String In Directory.GetFiles(testPath)
      Dim row As DataRow = dt.NewRow
      row("File") = Path.GetFileName(f)
      dt.Rows.Add(row)
    Next
    bs.DataSource = dt

    ListBox1.DisplayMember = "File"
    ListBox1.ValueMember = "File"
    ListBox1.DataSource = bs
  End Sub

  Private Sub TextBox1_TextChanged(ByVal sender As Object, ByVal e As EventArgs) Handles TextBox1.TextChanged
    bs.Filter = String.Format("File LIKE '*{0}*'", TextBox1.Text)
  End Sub

End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:49:18.310

设置`DataSource`属性后，您无法修改列表。`ListBox`虽然使用该属性填充控件很方便`DataSource`，但它肯定不是必需的。`Items.Add`相反，您可以使用其方法将项目添加到控件。例如，借用我对您上一个问题的回答：

```
Public Class FileSearchTool
    Public Sub New(ByVal listBox As ListBox, ByVal textBox As TextBox)
        _listBox = listBox
        _textBox = textBox
    End Sub

    Private _listBox As ListBox
    Private WithEvents _textBox As TextBox
    Private _fileNames As New List(Of String)()
    Private _folderPath As String

    Public Property FolderPath() As String
        Get
            Return _folderPath
        End Get
        Set(ByVal value As String)
            _folderPath = value
            loadFilePaths()
        End Set
    End Property

    Private Sub loadFilePaths()
        _fileNames = New List(Of String)(Directory.GetFiles(_folderPath))
        refreshList()
    End Sub

    Private Sub _textBox_TextChanged(ByVal sender As Object, ByVal e As EventArgs) Handles _textBox.TextChanged
        refreshList()
    End Sub

    Private Sub refreshList()
        _listBox.SuspendLayout()
        _listBox.Items.Clear()
        For Each item As String In _fileNames
            If item.StartsWith(_textBox.Text, StringComparison.CurrentCultureIgnoreCase) Then
                _listBox.Items.Add(item)
            End If
        Next
        _listBox.ResumeLayout()
    End Sub
End Class 
```

然后以任何形式，您可以像这样使用它：

```
Public Class Form1
    Private _tool As FileSearchTool
    Private Sub Form1_Load(ByVal sender As Object, ByVal e As EventArgs) Handles MyBase.Load
        _tool = New FileSearchTool(ListBox1, TextBox1)
        _tool.FolderPath = "C:\"
    End Sub
End Class 
```

但是，此时，您还不如通过创建 FileSearch 用户控件来进一步封装它。

或者，正如我在对您之前的问题的回答中所说，如果您想要的只是一个自动完成框，您可以只使用一个没有列表框的文本框，如下所示：

```
Dim source As New AutoCompleteStringCollection()
source.AddRange(Directory.GetFiles("C:\"))
TextBox1.AutoCompleteCustomSource = source
TextBox1.AutoCompleteMode = AutoCompleteMode.Suggest
TextBox1.AutoCompleteSource = AutoCompleteSource.CustomSource 
```

事实上，另一个有趣的选项是您可以设置`AutoCompleteSource`为`FileSystem`，您可能想使用它。

# c# - 使用正则表达式隔离多个匹配项之间的内容

> ID：11438740
> 
> 赞同：1
> 
> 时间：2012-07-11T18:07:46.653
> 
> 标签：c#, regex

我的字符串如下所示：“1y 250 2y 32% 3y otherjibberish”。

我的最终目标是将其拆分为以下内容：“1y 250”“2y 32%”“3y otherjibberish”

这些拆分之间的主要“分隔符”是“\d+y”模式。使用 Regex (C# 4.0)，我可以使用 Matches 函数来匹配一个后跟一个“y”的数字，但我不知道如何获取该匹配之后但在下一个匹配之前的所有内容。

有没有办法做到这一点？

希望这是有道理的......非常感谢 - kcross

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:45:54.577

您可以使用“MatchCollection”根据出现的情况拆分字符串。下面的示例几乎可以满足您的要求。每个字符串右侧的空白字符不会被删除。

代码：

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Text.RegularExpressions;

namespace Q11438740ConApp
{
    class Program
    {
        static void Main(string[] args)
        {
            string sourceStr = "1y 250 2y 32% 3y otherjibberish";
            Regex rx = new Regex(@"\d+y");
            string[] splitedArray = SplitByRegex(sourceStr, rx);

            for (int i = 0; i < splitedArray.Length; i++)
            {
                Console.WriteLine(String.Format("'{0}'", splitedArray[i]));
            }

            Console.ReadLine();
        }

        public static string[] SplitByRegex(string input, Regex rx)
        {
            MatchCollection matches = rx.Matches(input);
            String[] outArray = new string[matches.Count];
            for (int i = 0; i < matches.Count; i++)
            {
                int length = 0;
                if (i == matches.Count - 1)
                {
                    length = input.Length - (matches[i].Index + matches[i].Length);
                }
                else
                {
                    length = matches[i + 1].Index - (matches[i].Index + matches[i].Length);
                }

                outArray[i] = matches[i].Value + input.Substring(matches[i].Index + matches[i].Length, length);
            }

            return outArray;
        }
    }
} 
```

输出：

```
'1y 250 '
'2y 32% '
'3y otherjibberish' 
```

“解决方案”7z 文件：[Q11438740ConApp.7z](https://dl.dropbox.com/u/49510149/stackoverflow/dotnet/Q11438740ConApp.7z)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:43:37.837

这实际上很容易......只需使用 Regex.Split() 方法。

# ruby-on-rails - 找出给定站点需要哪些 Heroku 资源

> ID：11438742
> 
> 赞同：3
> 
> 时间：2012-07-11T18:07:52.260
> 
> 标签：ruby-on-rails, heroku

如果应用程序在 Heroku 上运行（有多少 dynos 和你应该运行什么数据库计划），那么了解应用程序需要什么样的资源的最佳方法是什么？

我的非技术朋友在 Rails 中构建了他的网站，目前它由构建应用程序的商店托管在 Linode 上。他们没有提供他所希望的支持，并且有兴趣让我将其转移到 Heroku，但我们正试图了解这将花费他多少。我尝试直接联系开发商店以了解当前实例正在运行什么，但他们没有回复我。

我可以访问他们的分析和当前的 repo，所以我可以从中收集我们可能需要什么样的初始设置，如果需要，我应该寻找什么？我意识到这取决于情况，不是一个容易回答的问题，但任何见解都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:16:05.650

[dyno-blitzer](https://github.com/kowsik/dyno-blitzer)将帮助您找出支持 1,000 个用户需要多少 dyno，但是您需要回答很多问题才能尝试了解 Heroku 所需的内容：

*   现在的数据库有多大？它的增长速度有多快？
*   您需要支持多少用户？如果您只需要 5 个，那么 dyno-blitzer 给您的数字可能不会接近您的需要。
*   正在完成多少延迟处理工作？
*   应用程序需要通过 Heroku 的附加组件提供哪些类型的东西？

一旦你知道了这些，你应该能够得到一个粗略的大概，但它不会是激光精确的——这在很大程度上取决于应用程序以及它在做什么。

# freepascal - 拉撒路壁虎浏览器

> ID：11438743
> 
> 赞同：0
> 
> 时间：2012-07-11T18:07:52.260
> 
> 标签：freepascal, gecko, lazarus

我正在尝试使用本指南在 freepascascal 中安装壁虎包：[http ://wiki.lazarus.freepascal.org/GeckoPort_version2#Win32_widgetset](http://wiki.lazarus.freepascal.org/GeckoPort_version2#Win32_widgetset)

不幸的是，当我跑步时，`C:\lazarus\fpc\2.6.0\bin\i386-win32\fppkg.exe install gecko`我得到：

> 安装依赖
> 项 在 $004377D5 发生未处理的异常：
> EProcess：无法执行 fpc.exe -iVTPTO：2
> $004377D5
> $0040F953
> $00412B36
> $004138D5
> $00414553
> $00413AE5
> $0041568B
> $0041E3E3
> 
> FPC Package工具遇到如下错误：
> [lazmkunit] Execution of FPMake build failed

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T10:05:04.367

将 c:\lazarus\fpc\2.6.0\bin\i386-win32 放入 PATH 中。

fppkg 查询其他 FPC 二进制文件以检索版本和目标信息，并编译结果（因为 fppkg 下载源代码，然后在主机上编译它）。

# ruby-on-rails - Javascript文件被多次包含

> ID：11438744
> 
> 赞同：0
> 
> 时间：2012-07-11T18:08:03.307
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, asset-pipeline

出于某种原因，我的 javascript 文件被包含在我的源代码中 12 次。我团队的其他成员，使用相同的来源，没有这个问题。

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:00:59.147

您是否确定要预编译所有资产？

尝试使用：

```
bundle exec rake assets:precompile 
```

# objective-c - Objective-C - 只读 NSMutableArray 和 NSCoding？

> ID：11438745
> 
> 赞同：4
> 
> 时间：2012-07-11T18:08:30.733
> 
> 标签：objective-c, readonly, nscoding

我有一个 NSMutableArray，它只能由所有者对象（MyObject）修改。所以第一次尝试是让它成为一个只读属性。问题是这个类实现了 NSCoding，而 NSCoding 要求归档对象是一个读写属性。

然后我想到了拥有一个私有属性（在 m 文件中声明），并有一个返回我的私有数组的公共方法。但是这将是对数组的引用，其他类将能够修改它。

我的方法也不应该返回这个数组的副本，因为我希望其他类能够修改这个数组中的每个 item=，而不是数组本身。

**问题：**我怎样才能拥有一个只读的公共财产，同时能够对其进行归档和取消归档？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T18:13:52.633

有几种方法可以做到这一点，但一种合理的方法是维护一个私有的、可变的数组，然后为公众提供一个只读访问器。然后，您只需让公共访问器返回内部数组的不可变副本。看起来像这样：

在 .h 文件中：

```
@interface MyClass : NSObject

@property (readonly) NSArray *publicArray;

@end 
```

在 .m 文件中：

```
@interface MyClass ()

@property NSMutableArray *privateArray;

@end

@implementation MyClass

+ (NSSet *)keyPathsForValuesAffectingValueForKey:(NSString *)key
{
    NSSet *keyPaths = [super keyPathsForValuesAffectingValueForKey:key];

    if ([key isEqualToString:@"publicArray"]) {
        keyPaths = [keyPaths setByAddingObject:@"privateArray"];
    }

    return keyPaths;
}

@synthesize privateArray = _privateArray;

- (NSArray *)publicArray { return [self.privateArray copy]; }

@end 
```

如果您愿意依靠编译器来警告尝试调用突变方法的代码`-publicArray`而不是抛出运行时异常的结果，那么您可以不使用副本。另一个警告是，如果没有副本，对私有数组的任何更改都将被“看到”，即使在先前获得的对所谓不可变数组的引用中也是如此。

# css - 在子菜单中创建纯 CSS 下拉子菜单的问题

> ID：11438746
> 
> 赞同：0
> 
> 时间：2012-07-11T18:08:38.407
> 
> 标签：css, drop-down-menu, menu, navigation

您好，我想知道这是否可能。我有一个使用带有子菜单的 CSS 创建的水平菜单，它工作得很好。但是，我想让子菜单出现在已经出现的子菜单的右侧。

菜单如下：http: [//jsfiddle.net/dvpKx/39/](http://jsfiddle.net/dvpKx/39/)

代码是：

```
/*First reset ul styles*/
    .nav,
    .nav ul,
    .nav li,
    .nav a {
        margin: 0;
        padding: 0;
        border: none;
        outline: none;
    }

/*Now add fixed width & height to the menu along with rounded corners and gradients*/
    .nav {
    height: 50px;
    width: inherit;
    margin: 10px;

    background: -webkit-linear-gradient(top, rgb(198,56,32) 0%, rgb(127,48,35) 100%);
    background: -moz-linear-gradient(top, rgba(198,56,32,1) 0%, rgb(127,48,35) 100%);
    background: -o-linear-gradient(top, rgb(198,56,32) 0%, rgb(127,48,35) 100%);
    background: -ms-linear-gradient(top, rgb(198,56,32) 0%, rgb(127,48,35) 100%);
    background: linear-gradient(top, rgb(198,56,32) 0%, rgb(127,48,35) 100%);

    -webkit-border-radius: 15px;
    -moz-border-radius: 5px;
    border-radius: 5px;

    }

/*Float links left to align links horizontally & position relative to align submenus properly*/

    .nav li {
    position: relative;
    list-style: none;
    float: left;
    display: block;
    height: 50px;
    }

/* 
Styling menu links -
font, color, padding, etc. Then a dark text shadow and a color transition to create a smooth effect when the color changes on hover state. To create the links separator add a border to the left and right and then we will remove the left border from the first link and the right border from the last link. For the hover state we will only change the text color.
 */

    .nav li a {

border-bottom: none;                    

        background: none;
        display: block;
        padding: 0 14px;
        margin: 6px 0;
        line-height: 32px;
        text-decoration: none;

        border-left: 1px solid #393942;
        border-right: 1px solid #4f5058;

        font-family: Verdana, sans-serif;
        font-weight: bold;
        font-size: 14px;

        color: #f3f3f3;
        text-shadow: 2px 3px 0px rgba(0,0,0,0.6);

        -webkit-transition: color .2s ease-in-out;
        -moz-transition: color .2s ease-in-out;
        -o-transition: color .2s ease-in-out;
        -ms-transition: color .2s ease-in-out;
        transition: color .2s ease-in-out;
    }

    .nav li:first-child a { border-left: none; }
    .nav li:last-child a{ border-right: none; }

    .nav li:hover > a { 
        color: rgb(114,163,45); 
        background: none;
        font-size: 18px;
    }

/* 
SUB MENU 1
We will start to position the sub menu 50px from the top and 0px from the left of the menu item and add bottom rounded corners. We will set the opacity to 0 and on hover state to 1 to create the fade in/out effect. For the slide down/up effect we need to set the list height to 0px when is hidden and to 36px on hover state.
 */

.nav ul {

    position:absolute;

    top: 50px;
    padding-left: 0px;

    opacity: 1;
    background: rgb(43,35,34);

    -webkit-border-radius: 0 0 5px 5px;
    -moz-border-radius: 0 0 5px 5px;
    border-radius: 0 0 5px 5px;

    -webkit-transition: opacity .25s ease .1s;
    -moz-transition: opacity .25s ease .1s;
    -o-transition: opacity .25s ease .1s;
    -ms-transition: opacity .25s ease .1s;
    transition: opacity .25s ease .1s;
}

.nav li:hover > ul { opacity: 1; }

/* Hiding submenu 1 */
.nav ul li {
    height: 0;
    overflow: hidden;
    padding: 0;

    -webkit-transition: height .25s ease .1s;
    -moz-transition: height .25s ease .1s;
    -o-transition: height .25s ease .1s;
    -ms-transition: height .25s ease .1s;
    transition: height .25s ease .1s;
}
/* When hovered over, show submenu 1 */ 
.nav li:hover > ul li {
    height: 46px;
    overflow: hidden;
    padding: 0;

    z-index: 8999;
}
/* Hiding submenu TWO */
.nav ul ul li {
    height: 0;
    overflow: hidden;
    padding: 0;

    -webkit-transition: height .25s ease .1s;
    -moz-transition: height .25s ease .1s;
    -o-transition: height .25s ease .1s;
    -ms-transition: height .25s ease .1s;
    transition: height .25s ease .1s;
}
/* When hovered over, show submenu 1 */ 
.nav li:hover > ul ul li {
    height: 80px;
    padding: 0;

    z-index: 9000;
}

/* Setting width of submenu to 100px & add a bottom border instead of left and right ones 
(also removing it from last link)   */

.nav ul li a {
    width: 250px;
    padding: 4px 0 4px 40px;
    margin: 0;

    border: none;
    border-bottom: 1px solid #343438;
}

.nav ul li:last-child a { border: none; } 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:39:06.483

我会推荐 Suckerfish 下拉菜单（一个 CSS 解决方案）。

代码：[http](http://www.htmldog.com/articles/suckerfish/dropdowns/) ://www.htmldog.com/articles/suckerfish/dropdowns/ （特别是多级下拉部分大约向下1/2）。此外，示例链接显示在页面底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T01:09:59.263

你可以试试这个

```
.menus {
    width:100px;
    height:50px;
    border: 5px solid #000000;
    border-radius: 25px;
    text-align: center;
    line-height: 50px;
    color: black;
    background-color: #dcdcdd;
}
.submenus {
    margin-top:10px;
    display:none;
    width:100px;
    height:50px;
    border: 5px solid #000000;
    border-radius: 25px;
    text-align: center;
    line-height: 50px;
    color: black;
}
#menu1outer:hover #submenus1 {
    display: block;
} 
```

希望对您有所帮助，您可以在此处查看示例： [reformas integrales madrid](http://www.plusreformas.com)

# python - Python：通过字典重组有序文本文件

> ID：11438748
> 
> 赞同：0
> 
> 时间：2012-07-11T18:08:42.840
> 
> 标签：python, text, dictionary, key

我有一个要重组的文本文件。该文件包含功能、功能描述（制表符分隔符，描述符的数量会有所不同），以及显示该功能的人员列表。它看起来像这样：

```
Feature1    detail1    detail2
Person1
Person2
Feature2    detail1    detail2    detail3
Person3 
```

...我只想对其进行重组，以便每行有一个特征，将人员添加到描述符之后的行上，因此它看起来像这样：

```
 Feature1    detail1    detail2    Person1    Person2
 Feature2    detail1    detail2    detail3    Person3 
```

我想使用 Python 字典。我的代码将读取每个 Feature 作为键并将详细信息作为值附加，但**我无法将 Persons 添加为 values**。任何人都可以帮忙吗？

```
import re
import sys
import csv

def reformat(filename):
    mydict = dict()
    for line in filename:
        m = re.search("\AFeature",line[0])  
        if m:
            if str(line) in mydict:
                mydict[line].append(line[0])
            else:
                mydict[line[0]] = (line[1:-1])
    print(mydict)

thefilename = "path"
path_reader=csv.reader(open(thefilename), delimiter = "\t")
rv = reformat(path_reader) 
```

编辑：固定代码缩进

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:24:17.583

我只改变了`if ... else`部分：

```
def reformat(filename):
    mydict = dict()
    feature = ''
    for line in filename:
        m = re.search("\AFeature",line[0])  
        if m:
            feature = line[0]
            mydict[feature] = (line[1:-1])
        else:
            mydict[feature].append(line[0])
print(mydict) 
```

# android - Android ListView 部分变黑

> ID：11438749
> 
> 赞同：0
> 
> 时间：2012-07-11T18:08:44.220
> 
> 标签：android, listview

我有一个带有部分和条目的 listView。例如..

```
 Supplies  (Section Item)
     Pens     (Entry Item)
     Pencils
  Groceries
     Eggs
     Lettuce
  Etc.... 
```

在我的列表适配器中，我通过这样做将部分项目的背景设置为各种颜色。

```
 view.setBackgroundColor(Color.YELLOW); 
```

这一切正常，直到我开始滚动，然后部分项目变成黑色（条目项目不这样做）。有谁知道如何防止这种情况？

getView() 方法的代码

```
public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;

    final ItemEchelon i = items.get(position);
    if (i != null) {
        if(i.isSection()){
            SectionItemEchelon si = (SectionItem)i;
            v = vi.inflate(R.layout.item_section, null);

            v.setOnClickListener(null);
            v.setOnLongClickListener(null);
            v.setLongClickable(false);

            final TextView sectionView = (TextView) v.findViewById(R.id.tv_Name);
            sectionView.setText(si.getTitle());
            if(count == 0)
            {
                v.setBackgroundColor(Color.YELLOW);
            }
            if(count == 1)
            {
                v.setBackgroundColor(Color.GREEN);
            }
            if(count == 2)
            {
                v.setBackgroundColor(Color.RED);
            }
            if(count == 3)
            {
                v.setBackgroundColor(Color.GRAY);
            }
            count ++;
        }else{
            EntryItemEchelon ei = (EntryItemEchelon)i;
            v = vi.inflate(R.layout.item_entry, null);
            final TextView title = (TextView)v.findViewById(R.id.tv_entryTitle);
            final TextView score = (TextView)v.findViewById(R.id.tv_entryScore);

            if (title != null) 
                title.setText(ei.Name);
            if(score != null)
                score.setText(ei.Score);
        }
    }
    return v;
} 
```

通过删除用于更改背景颜色的 if 语句来修复问题。这样做是为了在构造 SectionItem 时必须初始化颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:14:21.563

`android:cacheColorHint="@android:color/transparent"`在你的使用这个`List View`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:44:56.037

变量“计数”是您的问题吗？看起来你正在增加它，并且在滚动时，你忽略了 convertView 所以总是创建一个新视图。如果计数 >= 4，则没有背景...

您*应该*使用 convertView 来提高效率，并帮助解决这个问题。

```
if (convertView != null)
 v = convertView;
else
{
 v = vi.inflate();
 ...
} 
```

如果我正确阅读您的代码，另一个大危险是您依赖于 getView 以特定顺序调用，第 1 节在第 2 节之前。我不会那样做...使用 int 位置参数来确定这部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T18:17:14.140

将此属性添加到您的列表视图

```
android:cacheColorHint="#00000000" 
```

比一切都完美:)。

谢谢

# domain-driven-design - 这些值也是值对象吗？

> ID：11438755
> 
> 赞同：1
> 
> 时间：2012-07-11T18:08:54.053
> 
> 标签：domain-driven-design, value-objects

我想我理解*值对象*（它们没有概念标识，它的属性集是它的定义等）以及它们与*Entities*的不同之处，但我仍然对原始类型的值（*int*，*string* ...）是否感到困惑直接分配给*Entity*的属性也被视为**VO**。

例如，在下面的代码中，`Name`分配给的对象（类型）`Person.Name`是**VO**，但值是否分配给`Person.FirstName`，`Person.LastName`也`Person.Age`被认为是**VO**？

```
public class Person
{
    public string FirstName = ...
    public string LastName = ...
    public int Age = ...

    public Name Name = ...
               ...
} 

public class Name
{
    public string FirstName = ...
    public string LastName = ...
    public int Age = ...
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T05:28:02.287

一个值是原始类型（例如`string`or `int`）还是由原始类型组成的复杂类型（例如`Name`）都没有关系。重要的是您将其视为没有任何身份的单纯“价值”——那么它就是一个价值对象。

将其保留为原语或将其包装在类中的决定是实现细节。与原始类型相比，特定类型在未来更容易扩展/添加功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T21:55:03.627

检查这个[相关问题](https://stackoverflow.com/questions/11439244/shouldnt-in-the-following-model-an-address-be-a-value-object/11442022#11442022)......值对象更像是一个“概念”对象的实现......如果你考虑一下，单例和享元模式是将具有标识的对象转换为值对象以进行优化.. . 它也与选择实现可变或不可变的东西有关。你总是可以说 Person 是不可变的，但一段时间后，你是一个具有不同属性的“新”人。这是一个实施决策，而不是领域或概念决策。（不可变的事物往往是价值对象，而可变的事物往往是身份对象）。

# regex - 我如何编写一个正则表达式来匹配除字符之外的所有内容？

> ID：11438756
> 
> 赞同：0
> 
> 时间：2012-07-11T18:09:06.457
> 
> 标签：regex, apache, .htaccess, redirect

我已经从这样的网址切换到我的 wordpress 博客：

```
/blog/2012/01/01/how-to-build-a-website 
```

像这样更短的网址

```
/blog/?p=123 
```

Wordpress 有一个像这样工作的搜索引擎

```
/blog/search/?s=how to build a website 
```

并搜索`s`参数。

我正在尝试使用 .htaccess Redirectmatch 将所有旧网址重定向到以帖子标题作为`s`参数的搜索网址。

因此，如果用户奴役

```
/blog/2012/01/01/how-to-build-a-website 
```

应该重定向到

```
/blog/search/?s=how to build a website 
```

我已经编码了这个

```
Redirectmatch blog/\d+/\d+/\d+/(.+) http://www.mysite.com/blog/?s=$1 
```

`/`但是这个正则表达式在它里面的`-`符号中的最后一个之后抓住了整个字符串。

这样，如果用户

```
/blog/2012/01/01/how-to-build-a-website 
```

将被重定向到

```
/blog/search/?s=how-to-build-a-website 
```

虽然我希望用户重定向到

```
/blog/search/?s=how to build a website 
```

我该如何编写正则表达式来做到这一点？

编辑：是的，伙计们，我知道这种网址很难看 :) 但我只知道该怎么做，因为在这背后有一些我正在尝试解决的技术问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:22:05.030

请不要这样做。我知道使用短 URL 似乎很诱人。毕竟，你会得到 TinyURL 之类的东西。`/blog/?p=123`拥有不是更好`/blog/2012/01/01/how-to-build-a-website`吗？

不，这不对。

原因是当有人发布指向您博客文章的链接时，较长的 URL*意味着什么*。它告诉人们文章的年龄。它给出了标题。它可以帮助人们找到您的文章；毕竟，在为您的网站编制索引时，Google 会给予 URL 很大的权重。

URL 过去是为计算机构建的。类似的东西`/blog/?p=123`非常适合计算机；它易于解析，不需要任何额外的数据库查找。您可以写两篇名为“如何建立网站”的文章，并且博客引擎不必确保它`-2`在第二篇文章中添加了一个。它可以轻松映射到服务器上文件的实际结构，而无需在 URL 中构建结构。

但我们已经意识到，URL 也可以为人类构建。URL`/blog/2012/01/01/how-to-build-a-website`具有人类易于理解的形式。当然，键入的时间要长一些，但是您键入的所有位都更容易，并且大多数 URL 无论如何都是复制粘贴或单击。当然，这对计算机来说需要更多的工作，但这是值得的。**它使 Internet 更友好。**

所以我很抱歉，但我不会帮你。:)

# google-apps-script - 谷歌脚本中的面向对象前端是否有解决方法

> ID：11438758
> 
> 赞同：2
> 
> 时间：2012-07-11T18:09:07.500
> 
> 标签：google-apps-script, google-apps

我在下面的对象中遇到了一些事件处理程序问题。我不记得错误信息，但它基本上说它找不到该功能。下面的代码是我正在尝试做的一个例子。

```
var anObject = function () {
  var n = 0;  

  var HandleClick(e) {
    n ++;
  };

  return {
    Init: function () {
      var app = UiApp.getActiveApplication();
      var handler = app.createServerHandler("HandleClick");
      var com = UiApp.LoadComponent("MyGui", {prefix: "a"});

      com.getElementById("button").addClickHandler(handler);
    }
  }
} 
```

如果可能的话，真的很感激一种解决方法，如果那不可能，那么请告诉我你的建议，因为我不确定如何最好地解决这个问题。

多谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T21:05:41.213

所有处理程序函数都必须是脚本上的顶级函数。不可能将它放在这样的对象中。

# javascript - 在 Backbone.js 的模型和视图上设置属性的模式是什么？

> ID：11438759
> 
> 赞同：3
> 
> 时间：2012-07-11T18:09:14.007
> 
> 标签：javascript, oop, design-patterns, backbone.js

我是 Javascript 框架世界的新手，我真的很喜欢 Backbonejs 的工作方式。但是我有一个关于模型和视图的构造函数的问题。我多年来一直使用类似 Java 的语言进行开发，并且习惯于定义这样的构造函数：

```
public Car(Manufacturer manufacturer, String model, Color color) {
    this.manufacturer = manufacturer;
    this.model = model;
    this.color = color;
} 
```

但是我在文档和其他教程中看到，人们在定义模型或视图时通常不会声明特定的构造函数，他们只是像这样构造对象：

```
var car = new Car({manufacturer: ford, model: "Mustang", color: "red"}); 
```

定义如下构造函数是错误的还是“丑陋的”：

```
window.Car = Backbone.Model.extend({
    initialize: function(manufacturer, model, color) {
        this.manufacturer = manufacturer;
        this.model = model;
        this.color = color;
    }
}); 
```

如果是这样，你能解释为什么吗？我真的希望这不是一个愚蠢的问题，我没有找到任何相关的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T18:47:21.850

您传递多个参数而不是对象的想法很好，但是您希望初始化函数看起来像这样：

```
window.Car = Backbone.Model.extend({
    initialize: function(manufacturer, model, color) {
        this.set({
            manufacturer: manufacturer,
            model: model,
            color: color
        });
    }
}); 
```

您需要使用`set`来访问属性对象。通过使用`this`，您将属性直接附加到模型。

主干使用属性对象的原因是它可以在您更改属性时自动触发事件。这也是一种将字段封装在方法中的方法，就像您创建的一样

`private Manufacturer manufacturer;`

和

`public Manufacturer getManufacturer()`

在爪哇。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:22:35.577

它类似于将上下文对象传递给 Java 中的方法（在需要将某些状态传递给无状态环境中的方法时完成）。碰巧该方法是一个构造函数。我认为这没有特定的官方模式。这是 javascript 中的常见范例。

# php - 如果无法连接到 Web 服务 (JSON)，如何使用 PHP 自定义错误消息

> ID：11438762
> 
> 赞同：1
> 
> 时间：2012-07-11T18:09:25.473
> 
> 标签：php, json

我正在使用 PHP 和 JSON 连接到网络服务。连接很好，但我想在 (1) 与 web 服务的连接丢失和 (2) 如果 web 服务返回 http 500 错误时添加 2 条错误消息。

关于如何做到这一点的任何想法？我是 json 新手，所以不知道该怎么做......

这就是我连接网络服务并从网络服务获取数据的方式

```
$url = "http://webservice.com/{$account}?loc={$loc}"; 
$content = file_get_contents($url);
$json = json_decode($content, true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:12:57.937

对于错误 1：

`file_get_contents``FALSE`如果尝试加载的内容失败，将返回。

对于错误 2：

根据您的 HTTP 错误 500 在页面上输出的内容，您可以简单地使用`file_get_contents`并查找指示错误使用的特定字符串`strpos`并采取相应措施。

**参考**： http: [//php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

# apache - htpasswd 可以应用于除一个之外的所有 URL 吗？

> ID：11438764
> 
> 赞同：3
> 
> 时间：2012-07-11T18:09:26.480
> 
> 标签：apache, .htaccess, .htpasswd

我为我的域设置了 htaccess，但我希望一个特定的 URL 没有 htpasswd 保护。该 URL 是一个重写的 URL，并且没有与之关联的实际目录。

有没有办法使用root htaccess 来htpasswd 保护整个站点，除了那个特定的URL？

**编辑（我的代码，包括 Jon Lin 的建议，这对我不起作用）：**

```
RewriteCond %{SERVER_NAME} =subdomain.example.com
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L]
SetEnvIf Request_URI "^/messenger/parse" NOPASSWD=true
AuthUserFile /xxx/xxx/xxx/xxxxxx/subdomain.example.com/.htpasswd
AuthName "Staging Server"
AuthType Basic
Order Deny,Allow
Satisfy any
Deny from all
Require valid-user
Allow from env=NOPASSWD 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:46:34.143

您可以设置诸如`SetEnvIf`为给定的请求 URI 设置环境变量之类的设置。然后在 auth 定义中，您可以使用`Satisfy Any`and`Allow from env`指令告诉 apache 可以通过身份验证或环境变量是否存在（仅针对特定 URI 设置）授予访问权限。例子：

```
# set the NOPASSWD variable if the request is for a specific URI
SetEnvIf Request_URI "^/specific/uri/nopasswd/$" NOPASSWD=true

# Auth directives
AuthUserFile /var/www/htpasswd
AuthName "Password Protected"
AuthType Basic
Order Deny,Allow
# Any requirment satisfies
Satisfy any
# Deny all requests
Deny from all
# except if user is authenticated
Require valid-user
# or if NOPASSWD is set
Allow from env=NOPASSWD 
```

# sql - 为大型 Postgresql 表优化嵌套连接窗口函数

> ID：11438766
> 
> 赞同：2
> 
> 时间：2012-07-11T18:09:27.143
> 
> 标签：sql, inner-join, bigdata

我一直在针对大小为 56GB（789700760 行）的表运行以下查询，并且遇到了执行时间的瓶颈。从之前的一些示例中，我认为可能有一种方法可以“取消嵌套”INNER JOIN，以便查询对大型数据集执行得更好。特别是下面的查询在 MPP PostgreSQL 部署上完成执行需要 7.651 小时。

```
create table large_table as
select column1, column2, column3, column4, column5, column6
from
(
  select 
    a.column1, a.column2, a.start_time,
    rank() OVER( 
      PARTITION BY a.column2, a.column1 order by a.start_time DESC 
    ) as rank,
    last_value( a.column3) OVER (
      PARTITION BY a.column2, a.column1 order by a.start_time ASC
      RANGE BETWEEN unbounded preceding and unbounded following 
    ) as column3,
    a.column4, a.column5, a.column6
  from 
    (table2 s 
      INNER JOIN table3 t 
      ON s.column2=t.column2 and s.event_time > t.start_time 
    ) a
 ) b
 where rank =1; 
```

> 问题一：有没有办法修改上面的sql代码来加快查询的整体执行时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:51:30.153

您可以将 last_value 移动到外部子查询，这可能会为您带来一些性能改进。last_value 为每个开始时间最小的分区获取 column3 的值——恰好在 rank = 1 的位置：

```
select column1, column2,
       ast_value( a.column3) OVER (PARTITION BY column2, column1 order by start_time ASC
                                   RANGE BETWEEN unbounded preceding and unbounded following
                                  ) as column3,
       column4, column5, column6
from (select a.column1, a.column2, a.start_time,
             rank() OVER (PARTITION BY a.column2, a.column1 order by a.start_time DESC
                         ) as rank,
            a.column3, a.column4, a.column5, a.column6
      from (table2 s INNER JOIN
            table3 t
            ON s.column2 = t.column2 and s.event_time > t.start_time
           ) a
     ) b
where rank = 1 
```

否则，您需要提供有关执行计划以及 table2 和 table3 的更多信息以获得更多帮助。

# android - 如何在android中获取当前的整体cpu使用情况

> ID：11438767
> 
> 赞同：0
> 
> 时间：2012-07-11T18:09:37.550
> 
> 标签：android, android-layout, android-intent, android-service

我想要一种方法来获取 android 中当前的整体 cpu 使用情况！我使用了我在这个网站上找到的一种方法，如下所述。

```
private float readUsage() {
    try {
        RandomAccessFile reader = new RandomAccessFile("/proc/stat", "r");
        String load = reader.readLine();

        String[] toks = load.split(" ");

        long idle1 = Long.parseLong(toks[5]);
        long cpu1 = Long.parseLong(toks[2]) + Long.parseLong(toks[3]) + Long.parseLong(toks[4])
              + Long.parseLong(toks[6]) + Long.parseLong(toks[7]) + Long.parseLong(toks[8]);

        try {
            Thread.sleep(360);
        } catch (Exception e) {}

        reader.seek(0);
        load = reader.readLine();
        reader.close();

        toks = load.split(" ");

        long idle2 = Long.parseLong(toks[5]);
        long cpu2 = Long.parseLong(toks[2]) + Long.parseLong(toks[3]) + Long.parseLong(toks[4])
            + Long.parseLong(toks[6]) + Long.parseLong(toks[7]) + Long.parseLong(toks[8]);

        return (float)(cpu2 - cpu1) / ((cpu2 + idle2) - (cpu1 + idle1));

    } catch (IOException ex) {
        ex.printStackTrace();
    }

    return 0;
} 
```

但是这个方法只返回一个浮点值。我需要的是当前的使用统计，比如系统使用的百分比，以及用户使用的百分比！谁能帮我这个。一个教程会很好，但是如果有人足够慷慨地给我一个好的代码，那将是我的荣幸！

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:41:45.013

从 linux proc 手册页：

> /proc/stat 内核/系统统计信息。因建筑而异。常见条目包括：
> 
> ```
>  cpu  3357 0 4313 1362393
>                  The   amount  of  time,  measured  in  units  of  USER_HZ
>                  (1/100ths  of  a  second  on  most   architectures,   use
>                  sysconf(_SC_CLK_TCK) to obtain the right value), that the
>                  system spent in user mode, user mode  with  low  priority
>                  (nice),  system  mode,  and  the idle task, respectively.
>                  The last value should be USER_HZ times the  second  entry
>                  in the uptime pseudo-file. 
> ```

您可能还想查看 AOSP 平台/系统/核心/工具箱中“顶部”的来源

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T10:20:49.030

当您查看“proc/stat”中的统计信息时

*   它将为您提供整体 CPU 使用情况（内核模式 + 用户模式）
*   您只能根据每个进程的系统和用户模式获取 CPU 使用率 proc/[pid]/stat - 第 14 个参数：- jiffies 中的用户模式 ​​- 第 15 个参数：- jiffies 中的内核模式
*   计算所有进程/pid 的内核模式使用率，并可以将其视为系统 CPU 使用率......

# android - 停止 myLocationOverLay.runOnFirstFix

> ID：11438769
> 
> 赞同：1
> 
> 时间：2012-07-11T18:10:02.463
> 
> 标签：android, runnable, mylocationoverlay

经过 30 秒后，如何停止 locationoverlay.runonfirstfix？

我认为有一个处理程序，但如何实现呢？

```
miPunto.runOnFirstFix(new Runnable()
               {
                  @Override
                  public void run()
                     {
                        if (miPunto.getMyLocation() != null)
                           {

                              latitud = miPunto.getMyLocation().getLatitudeE6();
                              longitud = miPunto.getMyLocation().getLongitudeE6();
                              gmiPunto = new GeoPoint((int) (latitud), (int) (longitud));
                              controladorMapa.animateTo(gmiPunto);
                              controladorMapa.setZoom(17);
                              controladorMapa.setCenter(gmiPunto);

                              dialogo.dismiss();
                           }
                     }

               }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T22:27:12.287

没有办法专门阻止这种情况。您可以使用 LocationOverlay 的 onLocationChanged 而不是 runOnFirstFix()。

```
public void onResume() {
    super.onResume();
    if (locationOverlay == null) {
        locationOverlay = new JulietLocationOverlay(mapView);
    }
    mapView.getOverlays().add(locationOverlay);
    locationOverlay.enableMyLocation();
}

public void onPause() {
    super.onPause();
    if (locationOverlay != null) {
        if (mapView != null) {
            mapView.getOverlays().remove(locationOverlay);
        }
        locationOverlay.disableMyLocation();
    }
}

 protected class JulietLocationOverlay extends MyLocationOverlay {

    public boolean locationFound = false;

    public synchronized void onLocationChanged(Location location) {
        super.onLocationChanged(location);
        if (!locationFound) {
            // As good as first fix.
            // Do every thing you need
        }
    }

    public JulietLocationOverlay(MapView mapView) {
        super(Activity.this, mapView);
    }

} 
```

# android - 我应该如何重用 AnymoteClient 服务，以便在启动新活动时不必与 google tv 重新配对？

> ID：11438772
> 
> 赞同：0
> 
> 时间：2012-07-11T18:10:30.030
> 
> 标签：android, google-tv

我正在对 GoogleTV 和 Android 平板电脑进行一些调查。我已经设法制作了一个 android 应用程序，它可以从主 Activity 向谷歌电视发送控制消息，我想做的是从主 Activity 启动一个新活动，并继续使用 AnymoteClientService 服务和新活动。在我的主要活动中，我得到了一个 anymoteSender 句柄，用于将 KeyEvent 消息发送到谷歌电视，如何将其传输到新活动（SlidepuzzleActivity）？我可以再次实例化它，但这意味着必须再次经历整个配对过程。

从下面的代码中，您将看到我的 SlidepuzzleActivity 类中有一个 anymoteSender，这将引发错误，但说明了我需要在哪里重用该变量。

代码：MainActivity.java：

```
package uk.co.myapp.gtvremote;
//imports removed for paste

public class MainActivity extends Activity implements ClientListener{

    private AnymoteSender anymoteSender;
    private TextView statusText;
    protected AnymoteClientService mAnymoteClientService;
    private static String statusPrefix = "Status: ";
    private Context mContext;
    private ProgressBar progressBar;

    private Handler handler;
    private TouchHandler touchPadHandler;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        progressBar = (ProgressBar) findViewById(R.id.a_progressbar);
        progressBar.setVisibility(View.VISIBLE);

        mContext = this;

        ImageButton upArrowButton = (ImageButton) findViewById(R.id.upArrow);
        ImageButton leftArrowButton = (ImageButton) findViewById(R.id.leftArrow);
        ImageButton centreButton = (ImageButton) findViewById(R.id.centreButton);
        ImageButton rightArrowButton = (ImageButton) findViewById(R.id.rightArrow);
        ImageButton downArrowButton = (ImageButton) findViewById(R.id.downArrow);
        ImageButton backButton = (ImageButton) findViewById(R.id.backButton);
        ImageButton homeButton = (ImageButton) findViewById(R.id.homeButton);
        Button testButton = (Button) findViewById(R.id.testButton);

        upArrowButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                sendKeyEvent(KeyEvent.KEYCODE_DPAD_UP);
            }
        });

        leftArrowButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                sendKeyEvent(KeyEvent.KEYCODE_DPAD_LEFT);
            }
        });

        centreButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                sendKeyEvent(KeyEvent.KEYCODE_DPAD_CENTER);
            }
        });

        rightArrowButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                sendKeyEvent(KeyEvent.KEYCODE_DPAD_RIGHT);
            }
        });

        downArrowButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                sendKeyEvent(KeyEvent.KEYCODE_DPAD_DOWN);
            }
        });

        backButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                sendKeyEvent(KeyEvent.KEYCODE_BACK);

            }
        });

        homeButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                sendKeyEvent(KeyEvent.KEYCODE_HOME);

            }
        });

        testButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent myIntent = new Intent(MainActivity.this, SlidepuzzleActivity.class);
                MainActivity.this.startActivity(myIntent);
            }
        });

        handler = new Handler();

        // Bind to the AnymoteClientService
        Intent intent = new Intent(mContext, AnymoteClientService.class);
        bindService(intent, mConnection, Context.BIND_AUTO_CREATE);
        statusText = (TextView) findViewById(R.id.statusText);

    }

    /** Defines callbacks for service binding, passed to bindService() */
    private ServiceConnection mConnection = new ServiceConnection() {
        /*
         * ServiceConnection listener methods.
         */
        @Override
        public void onServiceConnected(ComponentName name, IBinder service) {

            mAnymoteClientService = ((AnymoteClientService.AnymoteClientServiceBinder) service)
                    .getService();
            mAnymoteClientService.attachClientListener(MainActivity.this);
        }

        @Override
        public void onServiceDisconnected(ComponentName name) {
            mAnymoteClientService.detachClientListener(MainActivity.this);
            mAnymoteClientService = null;   
        }

    };

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public void onConnected(AnymoteSender anymoteSender) {
        if (anymoteSender != null) {
            // Send events to Google TV using anymoteSender.
            // save handle to the anymoteSender instance.
            this.anymoteSender = anymoteSender;
            attachTouchListnertoTouchPad();

        } else {
            statusText.setText(statusPrefix + "Connection attempt failed, cant find send handler");
            //attempt to connect again?
            //attemptToConnect();
        }

        // Hide the progressBar once connection to Google TV is established. Make the text display appropriately
        handler.post(new Runnable() {
            public void run() {
                progressBar.setVisibility(View.INVISIBLE);
                statusText.setText(statusPrefix + "Connected to GoogleTV");

            }
        });
    }

    @Override
    public void onDisconnected() {
        // show message to tell the user about disconnection.
        statusText.setText(statusPrefix + "Disconnected");
        // Try to connect again if needed. This may be need to be done via button
        attemptToConnect();
        this.anymoteSender = null;

    }

    @Override
    public void onConnectionError() {
        // show message to tell the user about disconnection.
        statusText.setText(statusPrefix + "Connection error encountered");
        // Try to connect again if needed.
        attemptToConnect();
        this.anymoteSender = null;

    }

    @Override
    protected void onDestroy() {
        if (mAnymoteClientService != null) {
            mAnymoteClientService.detachClientListener(this);
        }
        unbindService(mConnection);
        super.onDestroy();
    }

    private void attachTouchListnertoTouchPad()
    {
        // Attach touch handler to the touchpad view
        touchPadHandler = new TouchHandler(
                findViewById(R.id.touchPad), Mode.POINTER_MULTITOUCH, anymoteSender);
    }

    public void attemptToConnect()
    {
        //stub to invoke connection attempt
    }

    private void sendKeyEvent(final int keyEvent) {
        // create new Thread to avoid network operations on UI Thread
        if (anymoteSender == null) {
            Toast.makeText(MainActivity.this, "Waiting for connection",
                    Toast.LENGTH_LONG).show();
            return;
        }
        anymoteSender.sendKeyPress(keyEvent);
    }
} 
```

SlidepuzzleActivity.java：

```
package uk.co.myapp.gtvremote;
//imports removed for paste

public class SlidepuzzleActivity extends Activity implements ClientListener{

    private AnymoteClientService mAnymoteClientService;
    private Context mContext;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.slidepuzzle);
        mContext = this;
        ImageButton piece1x1 = (ImageButton) findViewById(R.id.piece1x1);
        ImageButton piece1x2 = (ImageButton) findViewById(R.id.piece1x2);
        ImageButton piece1x3 = (ImageButton) findViewById(R.id.piece1x3);
        ImageButton piece2x1 = (ImageButton) findViewById(R.id.piece2x1);
        ImageButton piece2x2 = (ImageButton) findViewById(R.id.piece2x2);
        ImageButton piece2x3 = (ImageButton) findViewById(R.id.piece2x3);
        ImageButton piece3x1 = (ImageButton) findViewById(R.id.piece3x1);
        ImageButton piece3x2 = (ImageButton) findViewById(R.id.piece3x2);
        ImageButton piece3x3 = (ImageButton) findViewById(R.id.piece3x3);

        Intent intent = new Intent(mContext, AnymoteClientService.class);
        bindService(intent, mConnection, Context.BIND_AUTO_CREATE);

        piece1x1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

            }
        });
    }

    private ServiceConnection mConnection = new ServiceConnection() {

        /*
         * ServiceConnection listener methods.
         */
        @Override
        public void onServiceConnected(ComponentName name, IBinder service) {

            mAnymoteClientService = ((AnymoteClientService.AnymoteClientServiceBinder) service)
                    .getService();
            mAnymoteClientService.attachClientListener(SlidepuzzleActivity.this);
        }

        @Override
        public void onServiceDisconnected(ComponentName name) {
            mAnymoteClientService.detachClientListener(SlidepuzzleActivity.this);
            mAnymoteClientService = null;   
        }

    };

    private void sendKeyEvent(final int keyEvent) {
        // create new Thread to avoid network operations on UI Thread
        if (anymoteSender == null) {
            Toast.makeText(SlidepuzzleActivity.this, "Waiting for connection",
                    Toast.LENGTH_LONG).show();
            return;
        }
        anymoteSender.sendKeyPress(keyEvent);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.slidepuzzle, menu);
        return true;
    }

    @Override
    public void onConnected(AnymoteSender anymoteSender) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onDisconnected() {
        // TODO Auto-generated method stub

    }

    @Override
    public void onConnectionError() {
        // TODO Auto-generated method stub

    }

    @Override
    protected void onDestroy() {
        if (mAnymoteClientService != null) {
            mAnymoteClientService.detachClientListener(this);
        }
        unbindService(mConnection);
        super.onDestroy();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:43:18.300

刚刚为此发布了 AnymoteLibrary 的更新。

在您的 MainActivity 中，为 AnymoteClientService 调用 bindService()（已经）和 startService()。调用 startService() 背后的原因是保留服务及其 anymoteSender 实例，以便同一应用程序中的其他 Activity 可以使用它。

在第二个 Activity 中，实现 ClientListener（如果要获取 onDisconnected() 回调）并绑定到服务和 attachClientListener()。要获取 AnymoteSender 实例，请调用 AnymoteClientService.getAnymoteSender()。请注意，如果与 Google TV 的连接丢失，它可能会返回 null。

当所有 Activity 使用 AnymoteSender 完成后，记得为 AnymoteClientService 调用 stopService()。

# php - MYSQL 计数方法

> ID：11438774
> 
> 赞同：-2
> 
> 时间：2012-07-11T18:10:50.207
> 
> 标签：php, mysql, select, count

```
 function sum($nomId){
    $sql = "SELECT SUM(nomDetCantidad) FROM table2 where Id = $nomId";
$Resultado=$this->ProcesaSQLQueryList($sql);
if($Resultado>0){
foreach($Resultado as $key => $valor){
$cantidadTotal = $valor[0];
}
}
if($Resultado=='null'){$cantidadTotal=0;}
$sql = "UPDATE table1 SET nomCantidadTotal=$cantidadTotal,nomActualizado = NOW() WHERE nomId= $nomId";
return $this->ProcesaSQLQueryUpdate($sql); 
```

这是我调用的函数

```
 function ProcesaSQLQueryList($SQLQuery){

        $row= array();
        if(!$this->link_mysql) $this->link_mysql = conectarManager();
        if($res = mysql_query($SQLQuery,$this->link_mysql)){

            while($r = mysql_fetch_array($res)){
                $row[] = $r;
            }
            mysql_free_result($res);
            return $row;
        }else{
            $this->last_error = $SQLQuery . " - " . mysql_error();  
            return -1;
        }
    } 
```

因此，我用表 1 的外键总结我在字段表 2 中的所有内容，然后我的结果将更新为表 1 字段，但如果我删除表 2 中的字段，结果将不会更新为 0 任何建议我都很漂亮确定这是一个简单的，但似乎无法找到它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:27:37.880

如果在 table2 中没有“匹配”行时需要返回零，则将返回表达式包装在 IFNULL 函数中。

```
SELECT IFNULL(SUM(nomDetCantidad),0) FROM table2 ... 
```

* * *

您可以通过在单个 UPDATE 语句中完成所有这些工作来显着减少您拥有的代码量、减少到数据库的往返次数并提高性能。您可以使用相关子查询或 OUTER JOIN：

-- 使用相关子查询

```
 UPDATE table t1
    SET t1.nomActualizado = NOW()
      , t1.nomCantidadTotal = 
        ( SELECT IFNULL(SUM(t2.nomDetCantidad),0) AS nomCantidadTotal
            FROM table2 t2
           WHERE t2.Id = t1.nomID
        )
  WHERE t1.nomId = $nomId 
```

-- 使用外连接

```
 UPDATE table1 t1
   LEFT
   JOIN (SELECT t2.Id, SUM(t2.nomDetCantidad) AS nomCantidadTotal
           FROM table2 t2
          WHERE t2.Id = $nomId
          GROUP BY t2.Id
        ) s
     ON s.Id = t1.nomID
    SET t1.nomCantidadTotal = IFNULL(s.nomCantidadTotal,0)
      , t1.nomActualizado = NOW()
  WHERE t1.nomID = $nomId 
```

* * *

完全不清楚为什么需要将此总计存储在 table1 上，当您可以在需要时从 table2 派生它时，根本不需要将该值存储在 table1 上......

```
SELECT t1.nomId
     , IFNULL((SELECT SUM(t2.nomDetCantidad) AS nomCantidadTotal
                FROM table2 t2
               WHERE t2.Id = t1.nomID
       ),0) AS nomCantidadTotal
  FROM table1 t1
 WHERE t1.nomId = $nomId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:06:52.087

```
$sql = "SELECT SUM(nomDetCantidad) FROM table2 where nominaId = $nomId";
$Resultado = $this->ProcesaSQLQueryList($sql);

if ($Resultado > 0) {
    foreach ($Resultado as $key => $valor) {
        $cantidadTotal = $valor[0];
    }
}

if ($cantidadTotal == '') {
    $cantidadTotal=0.00;
}

$sql = "UPDATE table1 SET nomCantidadTotal=$cantidadTotal,nomActualizado = NOW() WHERE nomId = $nomId";

return $this->ProcesaSQLQueryUpdate($sql); 
```

那里！它向我发送了一个空白变量 xD，但已修复，并且有更合适的方法可以做到这一点，我同意 Spencer 但如果客户想要红色秋千，他必须得到红色秋千，你知道吗？:) 感谢您的帮助！

# c++ - 使用 gnuplot 动态绘制易失性数据文件

> ID：11438779
> 
> 赞同：1
> 
> 时间：2012-07-11T18:11:09.547
> 
> 标签：c++, dynamic, plot, gnuplot

我已经看到了一些类似的问题，我制作了一个适合我的系统，但我需要优化它，因为这个程序本身就占用了大量的 CPU 负载。

这正是问题所在。

我有一个需要实时绘制的传入信号/数据流。我只希望一次显示有限数量的点（比如 1024 个点），所以我将沿 y 轴的数据点与 x 轴上 0-1024 的索引进行对比。传入数据的值范围为 0-1023。

我目前所做的（这一切都在 C++ 中）是我将数据放入一个循环循环中，并且每次更新数据时（或每第二个/第三个数据点），我写出一个文件并使用管道，我用 gnuplot 绘制该文件中的数据。

虽然这几乎可以完美运行，但它会导致相当多的负载（根据输入数据速率，我看到我的 Core 2 Duo 的两个内核的使用率甚至达到了 70%）。我需要在这个简短的程序中运行一些处理器密集型代码，所以我觉得几乎有必要对其进行优化。

我希望可以做的是：我可以只绘制当前图和新数据之间的差异（或者绘制每个点而不重新绘制整个图，以便删除该 x 索引处的旧项目） .

我在图表上有固定数量的点，所以重新绘制不起作用。我希望删除该 x 位置的旧点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T02:04:51.293

不幸的是，你想要完成的事情无法完成。您可以将数据文件标记为`volatile`或使用`refresh`关键字，但这些只会更新绘图而不重新读取数据。您想重新读取数据，然后只更新差异。

不过，有几件事可能会有所帮助。1）您的眼睛每秒只能记录约 26 帧。所以，如果你有办法确保每秒只向 gnuplot 发送 26 次数据，那可能会有所帮助。2）你是如何编写数据文件的？你是转储为ASCII还是二进制？进行二进制转储可能会更快（对于写入和 gnuplot 读取）。你必须进行实验。

有一种技巧可能不会使您的脚本运行得更快，但是您可以尝试一下（如果您知道要设置的合理yrange，并且正在使用点来绘制数据）...

```
#set up code:
set style line 1 lc rgb "blue"
set xrange [0:1023]
set yrange [0:1]
plot NaN notitle #Only need to do this once.
for [i=0:1023] set label i+1 at i,0 point ls 1  #Labels must have tags > 0 :-(

#this part gets repeated by your C code.
#you could move a few points at a time to make it more responsive.
set label 401 at 400,0.8              #move point number 400 to a different y value
refresh                               #show it at it's new location. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-08T16:07:38.870

您可以使用 gnuplot 进行数据动态绘图，如他们的[FAQ](http://www.cs.unc.edu/~jeffay/dirt/FAQ/gnuplot.html)中所述，使用该`reread`功能。它似乎以相当低的负载运行，并在到达末尾时自动滚动图形。为了在低负载下运行，我发现我必须`; sleep 1`在 awk 命令之后添加一个（在他们的示例文件 dyn-ping-loop.gp 中），否则它会在 awk 处理上循环花费太多 CPU。

# javascript - Android WebView：有没有办法在 javascript 中加载另一个 javascript 文件并保留堆栈跟踪的文件名/行号信息？

> ID：11438782
> 
> 赞同：0
> 
> 时间：2012-07-11T18:11:19.000
> 
> 标签：javascript, android, webview, stack-trace

我有一个 WebView。它有一些javascript。我需要动态和同步加载更多存储在 assets 文件夹中的 javascript。

当我手动从资产中提取代码并将其作为字符串传递时，eval() 工作得很好。

问题是堆栈跟踪对于使用字符串 eval 拉入的代码没有用。您只需在 (file:///android_asset/... 处获得评估)

是否有另一种方法可以从 javascript 中动态提取 javascript 代码，这会使堆栈跟踪变得有用？

（仅供参考，我只是将 WebView 用作 javascript 引擎，因此我可以使用我们现有的许多跨平台 javascript。它没有显示任何有用的 HTML。）

编辑：

你可以添加这个：

```
/@ sourceURL=snarkloading.js 
```

对于被评估的字符串，您将获得*snarkloading.js*作为文件名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:19:52.943

您可以像这样加载脚本...

```
var script = document.createElement('script');
script.setAttribute("src", "https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js");
script.onload = function () {
    // Do your thing when script is loaded
    alert('script loaded'); 
}; 
document.documentElement.appendChild(script); 
```

在 onload 事件处理程序中编写代码。这是代码实际下载并可用的时间。

**更新** 有一种同步下载脚本的方法。我记得使用 jQuery Ajax 函数和以下选项。

> **异步**（布尔值）
> 
> 默认值：真
> 
> 默认情况下，所有请求都是异步发送的（即默认设置为true）。如果您需要同步请求，请将此选项设置为 false。跨域请求和 dataType: "jsonp" 请求不支持同步操作。请注意，同步请求可能会暂时锁定浏览器，从而在请求处于活动状态时禁用任何操作。从 jQuery 1.8 开始，不推荐使用 async: false 。

[您可以在Ajax 的 jQuery API 文档](http://api.jquery.com/jQuery.ajax)中阅读更多相关信息。文档声明它在 jQuery 1.8 中已被弃用。但是，如果您可以使用旧版本，则可以使用该版本或弄清楚他们是如何做到的。

# xpath - 找到一个只有另一种子元素的元素

> ID：11438787
> 
> 赞同：5
> 
> 时间：2012-07-11T18:11:43.043
> 
> 标签：xpath

我想使用 XPath 来查找`<blockquote>`具有至少一个子`<pre>`元素、没有其他类型的子元素以及可选的文本节点作为子元素的每个元素：

```
<body><div><!-- arbitrary nesting -->
  <blockquote><pre>YES</pre></blockquote>
  <blockquote><p>NO</p></blockquote>
  <blockquote><pre>NO</pre><p>NO</p></blockquote>
  <blockquote><p>NO</p><pre>NO</pre></blockquote>
  <blockquote><pre>YES</pre> <pre>YES</pre></blockquote>
  <blockquote>NO</blockquote>
</div></body> 
```

这个 XPath 似乎可以工作，但我怀疑它过于复杂：

```
//blockquote[pre][not(*[not(name()="pre")])] 
```

有没有更好的（更少的代码，更高效，更干燥）的方式来选择我想要的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T19:28:16.713

```
//blockquote[pre][count(pre)=count(*)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T12:50:26.200

**使用**：

```
//blockquote[* and not(*[not(self::pre)])] 
```

这将选择`blockquote`XML 文档中至少具有一个子元素且不具有任何非元素的子元素的所有`pre`元素。

这只是**[双重否定定律](http://en.wikipedia.org/wiki/Negation#Double_negation)**的应用:)。

请注意，此表达式比计算所有元素子元素的表达式更有效（因为选择在`pre`找到非子元素时立即停止）。

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select="//blockquote[* and not(*[not(self::pre)])]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<body><div><!-- arbitrary nesting -->
      <blockquote><pre>YES</pre></blockquote>
      <blockquote><p>NO</p></blockquote>
      <blockquote><pre>NO</pre><p>NO</p></blockquote>
      <blockquote><p>NO</p><pre>NO</pre></blockquote>
      <blockquote><pre>YES</pre> <pre>YES</pre></blockquote>
      <blockquote>NO</blockquote>
</div></body> 
```

**计算 XPath 表达式并将选定节点复制到输出：**

```
<blockquote>
   <pre>YES</pre>
</blockquote>
<blockquote>
   <pre>YES</pre>
   <pre>YES</pre>
</blockquote> 
```

# c - C“int”的大小是2字节还是4字节？

> ID：11438794
> 
> 赞同：201
> 
> 时间：2012-07-11T18:11:57.190
> 
> 标签：c, int, byte

C中的整数变量是占用2字节还是4字节？它取决于哪些因素？

大多数教科书都说整数变量占用 2 个字节。但是当我运行一个打印整数数组的连续地址的程序时，它显示的差异为 4。

* * *

## 回答 #1

> 赞同：213
> 
> 时间：2012-07-11T18:14:57.500

我知道它等于`sizeof(int)`。an 的大小`int`实际上取决于编译器。过去，当处理器是 16 位时，an`int`是 2 个字节。如今，在 32 位和 64 位系统上它通常是 4 个字节。

尽管如此，使用`sizeof(int)`是获取执行程序的特定系统的整数大小的最佳方法。

**编辑：**`int`修复了大多数 64 位系统上 8 个字节的错误语句。例如，在 64 位 GCC 上是 4 个字节。

* * *

## 回答 #2

> 赞同：114
> 
> 时间：2012-07-11T18:24:52.113

这是 C 语言中一开始可能令人困惑的一点，但 C 语言标准仅指定了保证支持的整数类型的*最小范围。*`int`保证能够保持-32767到32767，这需要16位。在这种情况下，`int`, 是 2 个字节。但是，实现可以自由地超出该最小值，因为您会看到许多现代编译器都生成`int`32 位（这也意味着 4 字节非常普遍）。

你的书说 2 个字节的原因很可能是因为它太旧了。一度，这是常态。一般来说，`sizeof`如果您需要了解它在您正在使用的平台上的字节数，您应该始终使用该运算符。

为了解决这个问题，C99 添加了新类型，您可以在其中显式请求特定大小的整数，例如`int16_t`or `int32_t`。在此之前，没有通用的方法来获取特定宽度的整数（尽管大多数平台在每个平台的基础上都提供了类似的类型）。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-07-11T18:15:00.047

没有具体的答案。这取决于平台。它是实现定义的。它可以是 2、4 或其他。

背后的想法`int`是它应该与给定平台上的自然“字”大小相匹配：16 位平台上的 16 位，32 位平台上的 32 位，64 位平台上的 64 位，你明白了。但是，出于向后兼容的目的，一些编译器更喜欢坚持使用 32 位`int`，即使在 64 位平台上也是如此。

2 字节的时代`int`已经一去不复返了（16 位平台？），除非您使用的是具有 16 位字长的嵌入式平台。你的教科书可能很旧了。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2014-03-14T12:14:13.520

这个问题的答案取决于您使用的平台。
但无论平台如何，您都可以可靠地假设以下类型：

```
 [8-bit] signed char: -127 to 127
 [8-bit] unsigned char: 0 to 255
 [16-bit]signed short: -32767 to 32767
 [16-bit]unsigned short: 0 to 65535
 [32-bit]signed long: -2147483647 to 2147483647
 [32-bit]unsigned long: 0 to 4294967295
 [64-bit]signed long long: -9223372036854775807 to 9223372036854775807
 [64-bit]unsigned long long: 0 to 18446744073709551615 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2016-05-09T19:44:02.727

**C99 N1256标准草案**

[http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf](http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf)

的大小`int`和所有其他整数类型都是实现定义的，C99 仅指定：

*   最小尺寸保证
*   类型之间的相对大小

5.2.4.2.1 “整数类型`<limits.h>`的大小”给出了最小大小：

> 1 [...] 它们的实现定义值的大小（绝对值）应等于或大于所示的 [...]
> 
> *   UCHAR_MAX 255 // 2 8 - 1
> *   USHRT_MAX 65535 // 2 16 - 1
> *   UINT_MAX 65535 // 2 16 - 1
> *   ULONG_MAX 4294967295 // 2 32 - 1
> *   ULLONG_MAX 18446744073709551615 // 2 64 - 1

6.2.5“类型”然后说：

> 8 对于任何两个具有相同符号和不同整数转换等级的整数类型（见 6.3.1.1），具有较小整数转换等级的类型的值范围是另一个类型的值的子范围。

和 6.3.1.1 “布尔、字符和整数”确定相对转换等级：

> 1 每个整数类型都有一个整数转换等级，定义如下：
> 
> *   long long int 的rank 大于long int 的rank，long int 的rank 大于int 的rank，short int 的rank 大于signed char 的rank。
> *   任何无符号整数类型的等级应等于相应的有符号整数类型的等级，如果有的话。
> *   对于所有整数类型 T1、T2 和 T3，如果 T1 的秩大于 T2 且 T2 的秩大于 T3，则 T1 的秩大于 T3

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2012-07-11T18:15:06.760

> C中的整数变量是占用2字节还是4字节？

这取决于您使用的平台以及编译器的配置方式。唯一权威的答案是使用[`sizeof`](https://port70.net/~nsz/c/c11/n1570.html#6.5.3.4)运算符来查看在您的特定情况下整数有多大。

* * *

> 它取决于哪些因素？

*最好考虑Range*，而不是*size*。两者在实践中都会有所不同，尽管我们将看到，按范围选择变量类型比按大小选择变量类型要简单得多。同样重要的是要注意，标准鼓励我们考虑根据*范围*而不是*大小*来选择整数类型，但现在让我们*忽略标准做法*，让我们的好奇心探索`sizeof`字节`CHAR_BIT`和整数表示......让我们深入研究兔子洞，亲眼看看……

* * *

**`sizeof`，字节和`CHAR_BIT`**

以下语句取自 C 标准（链接到上面），用我认为无法改进的语言描述了这一点。

> 运算符产生其`sizeof`操作数的大小（以字节为单位），它可以是表达式或带括号的类型名称。大小由操作数的类型决定。

假设一个清晰的理解将引导我们讨论*字节*。通常假设一个*字节*是八位，而实际上[`CHAR_BIT`告诉您一个字节中有多少位](https://port70.net/~nsz/c/c11/n1570.html#note49)。这只是在谈论*常见的两个（或四个）字节整数*时没有考虑的另一个细微差别。

到目前为止，让我们总结一下：

*   `sizeof`=> 以字节为单位的大小，以及
*   `CHAR_BIT`=> 字节中的位数

因此，根据您的系统，`sizeof (unsigned int)`可以是*任何*大于零的值（不仅仅是 2 或 4），就像`CHAR_BIT`是 16，那么*单个（16 位）字节*中有足够的位来表示由标准（引用如下）。这不一定是有用的信息，是吗？让我们更深入地研究...

* * *

**整数表示**

[C 标准在此处](https://port70.net/~nsz/c/c11/n1570.html#5.2.4.2.1)指定所有标准整数类型（以及`CHAR_BIT`fwiw）的最小精度/范围。由此，我们可以得出存储*该值*需要多少位的*最小值*，但我们也可以根据*范围*选择变量。尽管如此，这个答案所需的大部分细节都在这里。例如，标准需要（至少）十六位存储的以下内容：***`unsigned int`***

 ***> ```
> UINT_MAX                                65535 // 2¹⁶ - 1 
> ```

**因此，我们可以看到`unsigned int`需要（*至少*）16 位**，这是您获得*两个字节*（假设`CHAR_BIT`是 8）的地方......后来当该限制增加到 时`2³² - 1`，人们改为使用 4 个字节。这解释了您观察到的现象：

> 大多数教科书都说整数变量占用 2 个字节。但是当我运行一个打印整数数组的连续地址的程序时，它显示的差异为 4。

你正在使用一本古老的教科书和编译器，它教你不可移植的 C；写你教科书的作者可能甚至都不知道`CHAR_BIT`。您*应该*升级您的教科书（和编译器），并努力记住 IT 是一个不断发展的领域，您需要在竞争中保持*领先*……不过，这已经够了；让我们看看那些*底层整数字节*存储的其他不可移植的秘密......

**价值位**似乎是常见的误解。上面的例子使用了一个`unsigned`整数类型，它通常只包含值位，所以很容易在细节上错过魔鬼。

**符号位**...在上面的示例中，我引用`UINT_MAX`了作为上限，`unsigned int`因为`16`从注释中提取值是一个简单的示例。对于有符号类型，为了区分正负值（即符号），我们还需要包含符号位。

> ```
> INT_MIN                                -32768 // -(2¹⁵)
> INT_MAX                                +32767 // 2¹⁵ - 1 
> ```

**填充位**......虽然在整数中遇到具有填充位的计算机并不常见，但 C 标准允许这种情况发生；一些机器（即[这](https://public.support.unisys.com/2200/docs/cp13.2/pdf/78310430-015.pdf)台机器）通过将两个较小的（有符号）整数值组合在一起来实现更大的整数类型......当您组合有符号整数时，您会得到一个浪费的符号位。浪费的位在 C 中被认为是*填充*。填充位的其他示例可能包括[奇偶校验位和陷阱位](https://port70.net/~nsz/c/c11/n1570.html#note53)。

* * *

如您所见，该标准似乎鼓励在选择整数类型时考虑诸如`INT_MIN`..之类的范围`INT_MAX`以及标准中[的其他最小值/最大值，并且](https://port70.net/~nsz/c/c11/n1570.html#5.2.4.2.1)*不鼓励*依赖大小，因为还有其他可能被遗忘的微妙因素，例如`CHAR_BIT`填充位可能会影响 的值`sizeof (int)`（即对*两字节和四字节整数*的常见误解忽略了这些细节）。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2012-07-11T18:35:42.553

唯一的保证是`char`必须*至少*8 位宽，`short`并且`int`必须*至少*16 位宽，并且`long`必须*至少*32 位宽，并且`sizeof (char)`<= `sizeof (short)`<= `sizeof (int)`<= `sizeof (long)`（对于这些类型的无符号版本也是如此）。

`int`根据平台的不同，宽度可能在 16 到 64 位之间。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2018-11-09T07:49:54.173

> C“int”的大小是 2 字节还是 4 字节？

答案是“是”/“否”/“也许”/“也许不是”。

C 编程语言指定以下内容：最小的可寻址单元，`char`也称为*“字节”*，正好是`CHAR_BIT`位宽，其中`CHAR_BIT`至少为 8。

因此，C 中的一个*字节*不一定是*八位字节*，即 8 位。在过去，第一个运行 C 代码（和 Unix）的平台有 4 字节`int`- 但总共`int`有 36 位，因为`CHAR_BIT`是 9！

`int`应该是平台的自然整数大小，其范围*至少为`-32767 ... 32767`*. 您可以使用;获取`int`平台字节的大小 `sizeof(int)`当您将此值乘以时，`CHAR_BIT`您将知道它的位宽。

* * *

虽然 36 位机器大多已死机，但仍有一些平台使用非 8 位字节。就在昨天，有[一个关于 16 位字节的德州仪器 MCU 的问题](https://stackoverflow.com/q/53204008/918959)，它具有符合 C99、C11 的编译器。

在[TMS320C28x](http://www.ti.com/lit/ug/spru514q/spru514q.pdf)`char`上，`short`和似乎`int`都是16 位宽，因此是一个字节*。*`long int`是 2 个字节，`long long int`是 4 个字节。C 语言的美妙之处在于，仍然可以为这样的平台编写高效的程序，甚至可以以可移植的方式完成！

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2014-01-30T14:24:29.093

大多数情况下，它取决于您使用的平台。它取决于编译器到编译器。现在在大多数编译器中，*int*是*4 个字节*。如果你想检查你的编译器正在使用什么，你可以使用`sizeof(int)`.

```
main()
{
    printf("%d",sizeof(int));
    printf("%d",sizeof(short));
    printf("%d",sizeof(long));
} 
```

c编译器唯一承诺的是short的大小必须等于或小于int，long的大小必须等于或大于int。所以如果int的大小是4，那么short的大小可能是2或4但不能更大比那个。long 和 int 也是如此。它还说短和长的大小不能相同。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-07-11T18:15:02.150

这取决于实现，但通常在 x86 和其他流行的架构（如 ARM ）上`int`占用 4 个字节。您始终可以在编译时使用`sizeof(int)`或您想要检查的任何其他类型进行检查。

如果要确保使用特定大小的类型，请使用`<stdint.h>`

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-07-11T18:15:18.127

```
#include <stdio.h>

int main(void) {
    printf("size of int: %d", (int)sizeof(int));
    return 0;
} 
```

这将返回 4，但它可能取决于机器。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-01-14T21:33:26.373

> C“int”的大小是 2 字节还是 4 字节？
> 
> C中的整数变量是占用2字节还是4字节？

C 允许“字节”不是每个“字节”8 位。

> > `CHAR_BIT`不是位域（字节）的最小对象的位数 C11dr §5.2.4.2.1 1

大于 8 的值越来越少见。为了获得最大的可移植性，请使用`CHAR_BIT`而不是 8。C 中`int`in*位*的大小 为`sizeof(int) * CHAR_BIT`.

```
#include <limits.h>
printf("(int) Bit size %zu\n", sizeof(int) * CHAR_BIT); 
```

* * *

> 它取决于哪些因素？

`int`位大小通常为 32 或 16 位。C 规定的最小*范围*：

> > `int` `INT_MIN`-32767类型对象的最小值+32767
> > 类型对象的最大值 C11dr §5.2.4.2.1 1`int` `INT_MAX`

强制位大小*至少为*16的*最小范围*- 即使处理器是“8 位”。在专用处理器中可以看到像 64 位这样的大小。其他值，如 18、24、36 等，已经出现在历史平台上，或者至少在理论上是可能的。现代编码很少担心非 2 次方位大小。`int`*`int`*

 *计算机的处理器和架构驱动`int`位大小的选择。

然而，即使使用 64 位处理器，`int`出于兼容性原因，编译器的大小也可能是 32 位，因为大型代码库取决于`int`32 位（或 32/16）。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2017-09-11T16:27:13.630

[这是回答这个问题的一个很好的来源。](http://www.rapidtables.com/prog/cref/data_types.htm)

但这个问题是一种永远真实的回答“是的。两者兼而有之。”

这取决于您的架构。如果您要在 16 位或更少的机器上工作，它不能是 4 字节（=32 位）。如果您在 32 位或更好的机器上工作，它的长度是 32 位。

为了弄清楚，让你的程序准备好输出可读的东西并使用“sizeof”函数。这将返回您声明的数据类型的字节大小。但是在数组中使用它时要小心。

如果您声明`int t[12];`它将返回 12*4 字节。要获取此数组的长度，只需使用`sizeof(t)/sizeof(t[0])`. 如果您要构建一个函数，它应该计算发送数组的大小，请记住，如果

```
typedef int array[12];
int function(array t){
    int size_of_t = sizeof(t)/sizeof(t[0]);
    return size_of_t;
}
void main(){
    array t = {1,1,1};  //remember: t= [1,1,1,0,...,0]
    int a = function(t);    //remember: sending t is just a pointer and equal to int* t
   print(a);   // output will be 1, since t will be interpreted as an int itselve. 
} 
```

所以这甚至不会返回不同的东西。如果您定义了一个数组并尝试在之后获取长度，请使用 sizeof。如果将数组发送给函数，请记住发送值只是第一个元素上的指针。但在第一种情况下，你总是知道你的数组有多大。情况二可以通过定义两个函数来解决，但会错过一些性能。定义函数（数组 t）并定义函数 2（数组 t，int size_of_t）。调用“function(t)”通过一些复制工作来测量长度并将结果发送到 function2，在那里你可以对可变数组大小做任何你想做的事情。****

# c# - 使用 Web 客户端进行多线程文件下载

> ID：11438795
> 
> 赞同：1
> 
> 时间：2012-07-11T18:11:58.860
> 
> 标签：c#, multithreading, webclient

我有一种情况，我需要从 C# windows 服务应用程序的 webdav 服务器下载巨大的（~1 GB）媒体文件。我正在考虑哪种方法更好：

*   使用 WebClient 异步方法下载存储在数组中的文件，并在主线程上回调以通知下载完成。可以使用手动重置事件进行同步
*   使用后台工作者和 Web 客户端同步下载方法
*   使用 ThreadPool 和 Web Client 同步下载方式
*   使用手动线程和Web Client同步下载方式

我尝试使用 Web 客户端异步下载 API，但它们似乎不是非阻塞的，因为在初始化媒体下载后在主线程上调用 Web 服务时我的主线程似乎被阻塞并最终引发操作超时并且媒体文件不是并行下载的，而是在下载文件夹中一一下载。

什么是你的建议。

# php - 如何通过用户打开无数标签来避免服务器泛滥？

> ID：11438796
> 
> 赞同：5
> 
> 时间：2012-07-11T18:12:06.753
> 
> 标签：php, ajax

我有某种聊天/论坛应用程序，它使用 jquery ajax 使用定期轮询（每 15 秒）检查新消息。我想知道我是否可以通过加载几个相同的浏览器实例来解决用户试图变得“有趣”的问题，这些实例有很多选项卡，都指向同一个应用程序。每个选项卡都在发送一个 ajax 请求，如果多个用户开始做同样的事情，这可能会导致服务器溢出。

我确实将会话以及上次访问时间和 IP 地址存储在一个表中，只要用户不使用相同的浏览器，它就可以正常工作。我可以存储使用 ajax POST 或 GET 请求发送的唯一标识符，但是如果常规（非滥用）用户刷新他的页面，这会产生问题，然后会创建一个新的标识符。

这还不是一个真正的问题，但最好在有人想到像这样滥用系统之前抓住它:) 知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:29:50.983

一种选择可能是像这样获取数据：

*   您的脚本正在准备轮询数据。在执行请求之前，写入（使用[LocalStorage](https://developer.mozilla.org/en/DOM/Storage)）一个表示您将要获取数据的值。`localStorage.setItem("last-request-timestamp", new Date().getTime());`
*   轮询数据。你得到一个结果。将该结果写入 localStorage：`localStorage.setItem("latest-messages", ajax_result);`
*   通过检查是否`localStorage.getItem("last-request-timestamp")`超过 15 秒前来检查页面是否准备轮询数据。如果是，请转到步骤 1。如果不是，请等待 15 秒并再次检查。
*   无论当前页面是否轮询数据，检查`latest-messages`变量并更新页面。

其他页面当然会共享 localStorage 数据。如果此时正在获取另一个页面，他们将不会获取数据。如果页面 #1 关闭，其他页面之一将继续获取数据。

我以前没有使用过 LocalStorage，但浏览器支持似乎足够好。您还应该能够将其用作键值数组：`localStorage["last-request-timestamp"]`.

您只能将字符串存储在 localStorage 中，但您当然可以将其序列化为 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T00:48:09.863

不确定它在javascript中是否可行。您可以检查选项卡是否处于活动状态。并且只在活动选项卡上执行 ajax？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:12:09.167

为什么不在问题上抛出 Memcached/Redis 之类的东西呢？以 10-15 秒的生命周期缓存响应，并尽可能避免处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T23:30:34.247

我有类似的问题。现在我强制所有用户登录（这意味着我有他们的电子邮件）。我还设置了每个帐户的连接限制和每个连接的请求限制，5 次溢出后我要求用户输入验证码，然后我阻止帐户 30 分钟并发送带有密码恢复链接的电子邮件。这不是一个明确的解决方案，但现在它对我有用。

**升级版：**

最简单的方法是使用 cookie 或会话存储。我使用饼干。算法很简单：

1.  用户在 Web 上登录。
2.  检查该用户是否有任何打开的会话，打开，然后删除另一个会话或触发异常或切换到该会话，您已经决定了自己想要的行为。
3.  为用户创建会话 ID 并将其存储在数据库中。
4.  为特定用户增加会话计数器字段以检测打开的会话，因此现在使用一个浏览器或多个浏览器都没有关系。
5.  更新最后一个访问标记（我使用`microtime(true) + $delay`和 mysql `decimal(14,4)`）。发送给用户
6.  发送 id 给客户

在每个请求上：

1.  通过 $_COOKIE 中传递的 id 搜索会话。
2.  检查最后一个访问标记。如果它小于则`microtime(true)`意味着客户端发送请求频繁，所以决定自己做什么，增加标记，例如`microtime(true) + $delay + $penalty`或丢弃整个会话或触发错误。行为取决于您的应用程序。

# python - Google App Engine、固定链接和 CSS

> ID：11438798
> 
> 赞同：1
> 
> 时间：2012-07-11T18:12:09.220
> 
> 标签：python, google-app-engine

我一直在学习 Udacity Web Enginnering 课程，但在其中一项作业上遇到了困难。

我创建了一个基本博客，允许我创建帖子并将它们显示在主页上。此外，每次创建帖子时都会生成一个永久链接并显示页面。然而，虽然我的 HTML 渲染得很好，但所有的 CSS 都丢失了。从服务器返回的源中肯定会引用样式表，但不会显示。

相同的 CSS 文件 (stlye.css) 在其他地方成功使用。

目录结构如下所示：

```
blog:
    - app.yaml
    - main.py
templates:
    - index.html
    - newpost.html
    - styles.css
stylesheets
    - styles.css 
```

这是我的应用程序代码：

```
import os
import webapp2
import jinja2

from google.appengine.ext import db

jinja_environment = jinja2.Environment(autoescape=True,
    loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__), 'templates')))

# Defines the database model
class Post(db.Model):
    subject = db.StringProperty(required = True)
    content = db.TextProperty(required = True)
    created = db.DateTimeProperty(auto_now_add = True)

# Base handler class with utility functions
class Handler(webapp2.RequestHandler):
    def write(self, *a, **kw):
        self.response.out.write(*a, **kw)
    def render_str(self, template, **params):
        t = jinja_environment.get_template(template)
        return t.render(params)
    def render(self, template, **kw):
        self.write(self.render_str(template, **kw))

class Blog(Handler):
    def get(self):
        posts = db.GqlQuery("SELECT * FROM Post ORDER BY created DESC")
        self.render('index.html', posts = posts)

# Render a single post
class Permalink(Handler):
    def get(self, post_id):
        post = Post.get_by_id(int(post_id))
        self.render("index.html", posts = [post])

# Submission form
class NewPost(Handler):
    def get(self):
        self.render("newpost.html")

    def post(self):
        subject = self.request.get("subject")
        content = self.request.get("content")

        if subject and content:
            post = Post(subject = subject, content = content)
            key = post.put()
            self.redirect("/blog/%d" % key.id())    
        else:
            error = "Something went wrong. We need both a subject and content"
            self.render("newpost.html",subject=subject, content=content, error=error)

app = webapp2.WSGIApplication([('/blog', Blog), ('/newpost', NewPost), ('/blog/(\d+)', Permalink)], debug=True) 
```

还有我的 app.yaml：

```
application: 20-khz-udacity
version: 1
runtime: python27
api_version: 1
threadsafe: true

libraries:
- name: jinja2
  version: latest

handlers:
- url: /blog/(\d+)
  script: main.app

- url: /stylesheets
  static_dir: stylesheets

- url: /.*
  script: main.app 
```

最后，用于索引的模板：

```
<!DOCTYPE html>
<html>
<head>
  <link type="text/css" rel="stylesheet" href="stylesheets/styles.css" />
  <title>CS 253 Blog</title>
</head>
<body>
  <a href="/blog" class="main-title">Ray's Blog</a>
  <div class="age">Queried 104973 seconds ago</div>
  <div id="content">
    {% for post in posts %}
    <div class="post">
        <div class="post-title">{{post.subject}}</div>
        <div class="post-date">{{post.created}}</div>
        <pre class="post-content">{{post.content}}</pre>
    </div>  
    {% endfor %}
  </div>
</body>
</html> 
```

最后，可以在这里找到实际的应用程序：http: [//20-khz-udacity.appspot.com/blog/](http://20-khz-udacity.appspot.com/blog/)

有人知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T19:31:00.023

我认为答案可能很简单，就像将指向 CSS 的链接设为绝对而不是相对一样。

当你这样说时：

`<link type="text/css" rel="stylesheet" href="stylesheets/styles.css" />`

您告诉浏览器样式表地址是相对于当前页面的，所以它可能正在尝试加载`http://?????.???/blog/stylesheets/styles.css/`

如果你让它绝对，通过在href添加一个前导斜杠，

`<link type="text/css" rel="stylesheet" href="/stylesheets/styles.css" />`

它会尝试加载`http://?????.???/stylesheets/styles.css/`，这就是您的 app.yaml 配置的服务。

# ios - 这是委派的正确“布局”吗？

> ID：11438800
> 
> 赞同：0
> 
> 时间：2012-07-11T18:12:12.043
> 
> 标签：ios, model-view-controller, design-patterns, delegation

我正在构建一个基于单个视图控制器的简单日历应用程序。视图控制器的层次结构如下：

1.  CDViewController

    *   日历视图
    *   事件视图
    *   议程视图

        *   TPKeyboardAvoidingTableView
        *   事件信息单元

我的问题特别与我的 AgendaView 中的 EventInfoCell 相关。Cell 有多种布局 textFields 和 textViews 的方式，具体取决于需要显示的信息。这些文本字段和文本视图根据表格视图的编辑状态和编辑/删除核心数据对象启用/可编辑。当这些字符串中的字符串发生变化时，单元格需要提醒 managedObjectContext 保存或删除一个对象，更新议程视图中填充它的 tableView 的模型，并更新与日历的所有事件相关的模型。我当前的配置使 viewController 成为 EventInfoCell 的代表，但这会使议程视图模型的更新变得复杂。将 EventInfoCell 委托设置为 AgendaView 似乎几乎适得其反，在信息更改时告诉它，然后让 AgendaView 将这个词传递给它的委托（viewController），但如果它比完全绕过议程视图更符合 MVC，我会很乐意实现它。我试图弄清楚什么是更好的设计模式，非常感谢任何输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:22:44.713

“将 EventInfoCell 委托设置为 AgendaView，在信息更改时告诉它，然后让 AgendaView 将这个词传递给它的委托似乎几乎适得其反”

为什么这似乎适得其反？这是我处理它的方式。如果你不这样做，那么你将不得不打开某种属性或通知或其他东西，`AgendaView`以便`ViewController`将信息传递回它。对我来说，这听起来比将信息传递到链条上更适得其反。`EventInfoCell`另外，您最终可能会在需要其采取行动的情况下进行某种更改`delegate`，但不一定会更改 Core Data 模型。所以，我认为你应该将代表团传递到链条上。

# c++ - 覆盖递归函数中的函数参数？

> ID：11438804
> 
> 赞同：0
> 
> 时间：2012-07-11T18:12:23.227
> 
> 标签：c++, function, recursion, parameters, assign

所以我有一个类具有以下类型的受保护指针成员

```
int *assigntoThis; // In the constructor I have initialized this to NULL. 
```

我还有一个具有以下声明的同一类的公共递归成员函数

```
bool find(int* parent, std::string nameofnode, int* storeParentinThis); 
```

递归函数检查子节点，如果子节点的名称与作为参数传入的字符串匹配，它会将父节点的地址分配给 storeParentinThis。

这就是我从同一类的另一个函数中调用该函数的方式。

```
bool find(root, "Thread", assigntoThis); 
```

但是，在运行时，当我输出存储在 assigntoThis 中的值时，我得到 00000000 = NULL。如何在递归函数中更改 assigntoThis 的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:13:49.230

改成 ：

```
bool find(int* parent, std::string nameofnode, int*& storeParentinThis); 
```

解释：

这是原始代码的简化版本：

```
foo (int* p) { /// p bahaves as a local variable inside foo
  p = 1;  
}    
int* p = 0;
foo(p);
// here p is still equal 0 
```

这实际上类似于以下代码：

```
foo (int i) {
  i = 1;  
}    
int i = 0;
foo(i);
// here i is still equal 0 
```

我认为这更容易理解。

因此，如果我们想从函数中返回一些东西，我们必须创建一个指向它的指针或一个对它的引用，用例子回顾一下：

```
foo (int* i) { // pointer example
  *i = 1;  
}    
int i = 0;
foo(&i);
// here i is equal to 1

foo (int& i) { // using reference example
  i = 1;  
}    
int i = 0;
foo(i);
// here i is equal to 1 
```

现在很容易将其应用于您的案例：

```
// pointer example
bool find(int* parent, std::string nameofnode, int** storeParentinThis) {
    *storeParentinThis = parent;
}

// reference example
bool find(int* parent, std::string nameofnode, int*& storeParentinThis) {
     storeParentinThis = parent;
} 
```

# sql - SQL Group By - 每月/每年计算记录，插入错误 - 不是一个有效的月份

> ID：11438806
> 
> 赞同：11
> 
> 时间：2012-07-11T18:12:43.173
> 
> 标签：sql, oracle, group-by, pivot

我有这个示例数据：

```
Country | Members   | Joined
USA     | 250       | 1/1/2012
USA     | 100       | 1/8/2012
Russia  | 75        | 1/20/2012
USA     | 150       | 2/10/2012 
```

当我查询这些数据时，我想汇总给定月份的所有记录。查询的结果如下所示：

```
Country | Members   | Joined
USA     | 350       | 1/2012
Russia  | 75        | 1/2012
USA     | 150       | 2/2012 
```

作为一个足够简单的选择：

```
select country, count(*) as members , to_char(trunc(joined), 'MM-YYYY')
from table
group by country, to_char(trunc(joined), 'MM-YYYY') 
```

该查询将以我想要的格式为我提供数据，但是我的问题是，当我将其插入新的数据透视表时出现错误，因为 select 语句中的 to_char() 被放入 DATETIME 列（错误: ORA-01843 - 不是一个有效的月份）

当我将选择中的 to_char() 更改为 to_date() 时，它仍然不起作用（同样的错误，ORA-01843 - 不是有效月份）：

```
select country, count(*) as members, to_date(trunc(joined), 'MM-YYYY')
from table
group by country, to_date(trunc(joined), 'MM-YYYY') 
```

有关如何修改此查询的任何建议，以便我可以将结果插入到“JOINED”列的类型为 DATETIME 的新表中？

提前感谢任何提示/建议/评论！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-11T18:25:35.050

您可以执行类似 的操作`to_date('01/'||trunc(joined), 'DD/MM/YYYY')`，这将首先将其转换为有效日期。您只需要决定是使用该月的第一天还是最后一天（最后一天更复杂）

另一种选择是使用 EXTRACT 函数：

```
 select country, count(*) as members, EXTRACT(MONTH FROM joined) as mn, EXTRACT(YEAR FROM JOINED) as yr,MIN(JOINED) as dt
from table
group by country, EXTRACT(MONTH FROM joined), EXTRACT(YEAR FROM JOINED) 
```

然后从中，您可以只选择 dt 列并将其插入

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-11T18:40:11.733

您应该使用该`trunc`函数将日期截断为每月的第一天。这消除了将日期转换为字符串以及将字符串转换回日期的需要。

```
select country, 
       count(*) as members , 
       trunc(joined, 'MM')
  from table
 group by country,
          trunc(joined, 'MM') 
```

# kinect - 使用 Kinect 将保存的动作与其他动作进行比较

> ID：11438813
> 
> 赞同：10
> 
> 时间：2012-07-11T18:13:25.333
> 
> 标签：kinect, physics, gesture

我需要开发一个应用程序，用户（物理治疗师）将在 Kinect 前执行运动，我将在数据库中写入数据运动，然后患者将尝试模仿这个运动。系统将计算记录和执行的动作之间的相似度。

我的第一个想法是，在记录期间（例如每 5 秒），存储点的位置（x，y，z），然后在执行时间（按患者）比较它们。

我知道这种方法太简单了，因为我想象在不同体型的人中，对骨骼的识别是不同的，所以比较是不可靠的。

我的问题是关于将保存的动作与执行的动作（在运行中）进行比较的最佳方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T22:16:25.420

我已经这样做了，将医生框架投影到患者框架上，但是对于整个骨骼，由于骨骼高度不同，因此效果不佳：/。代码可以在[这里](https://gist.github.com/3094052)找到。*它是 beta 2 代码，可以在 [这里](https://gist.github.com/3094082)找到更新的版本，尽管它目前运行不完美*

至于比较，做这样的事情

```
for (int i = 0; i < patientList.Count; i++)
{
    int diff = (int)Math.Abs(patientList[i] - doctorList[i]);

    if (diff < 100) //or whatever number you want
    {
         Debug.WriteLine("Good Job");
    }
} 
```

由于 Fixus 提到的骨骼高度，我已经放弃了整体图的想法，所以我当前的程序看起来像这样： ![图片](../Images/302e2dd3060ca1567d185bf65793f1eb.png)

**编辑**

*这是用 kinect 对两个动作进行露营的概念，并计算我深入解释的两个动作之间的相似性。*

假设我有以下 2 个点，点 A (0, 0, 0) 和点 B (1, 1, 1)。现在我想找到从 A 点到 B 点的差异，所以我会减去所有的 X、Y 和 Z 数字，所以差异是 1 X 1 Y 1 Z。这很简单。现在来实现它。我上面写的代码，**我**会这样实现。

```
//get patient hand coordinates
double patienthandX = Canvas.GetLeft(patienthand);
double patienthandY = Canvas.GetTop(patienthand);

//get doctor hand coordinates
double doctorhandX = Canvas.GetLeft(doctorhand);
double doctorhandY = Canvas.GetTop(doctorhand);

//compare difference for each x and y
//take Absolute value so that it is positive
double diffhandX = Math.Abs(patienthandX - doctorhandX);
double diffhandY = Math.Abs(patienthandY - doctorhandY); 
```

现在又来了一个问题。医生坐标总是相同的，但如果患者没有站在记录医生坐标的位置怎么办？现在我们实现更简单的数学。举这个简单的例子。假设我希望点 A(8, 2) 移动到点 B(4, 12)。你将 A 的 x 和 y 相乘得到 B。所以我将 X 乘以 0.5，Y 乘以 6。所以对于 Kinect，我会将一个元素放在患者臀部，然后将其与医生臀部进行比较. 然后将**所有**医生关节乘以该数字，以获得患者顶部的医生关节（或多或少）。例如

```
double whatToMultiplyX = (double) doctorhipX / patienthipX;
double whatToMultiplyY = (double) doctorhipY / patienthipY; 
```

这一切都很简单，但将它们组合在一起是更难的部分。到目前为止，我们，1）在患者框架之上缩放医生框架，2）计算差异。3) 比较整个代表的差异。和 4) 为下一个代表重置。这看起来很简单，但事实并非如此。要计算代表的全部差异，请执行以下操作：

```
//get patient hand coordinates
double patienthandX = Canvas.GetLeft(patienthand);
double patienthandY = Canvas.GetTop(patienthand);

//get doctor hand coordinates
double doctorhandX = Canvas.GetLeft(doctorhand);
double doctorhandY = Canvas.GetTop(doctorhand);

//compare difference for each x and y
//take Absolute value so that it is positive
double diffhandX = Math.Abs(patienthandX - doctorhandX);
double diffhandY = Math.Abs(patienthandY - doctrorhandY);

//+= so that it keeps adding to it.
totaldiffhandX += diffhandX;
totaldiffhandY += diffhandY; 
```

现在我们可以比较，然后说：

```
if (totaldiffhandX < 1000 && totaldiffhandY < 1000) //keep numbers pretty high since it is an entire rep
{
     //reset difference
     totaldiffhandX = 0;
     totaldiffhandY = 0;

     //tell the patient good job
     Debug.WriteLine("Good Job");
} 
```

这很容易，但请记住，您**必须对每个关节的 x 和 y 执行此操作**。否则它将无法正常工作。希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T05:44:47.433

首先要记住，人是不同的。每个人都有不同的身高、宽度、体重、不同的骨骼长度等

你的代码可能永远不会因为这个而工作。

其次，你需要更多地考虑几何。不要只考虑点，要考虑向量，它们的方向。每个运动都是一些向量在某些方向上的运动。然后是比例。您需要为每个用户配置应用程序。

你有一些模式。模式是你的物理治疗师。你不仅要记住他的动作，还要记住他的身体。臂长、腿长、距离等。将使用您的应用程序的每个用户也需要我测量。拥有所有这些数据，您可以通过缩放大小和比较运动方向来比较运动

当然请记住，有一些非常简单的动作，例如。通过检查手的实际位置和检查运动的方向，可以通过简单的数学来识别它们。您需要这 3 个控制点并且您在家 :)

手势识别不是一件简单的事

# r - 连接绘图标签列表

> ID：11438821
> 
> 赞同：2
> 
> 时间：2012-07-11T18:13:53.243
> 
> 标签：r

我想创建连续变量的间隔（离散化/bin）以使用 ggplot 绘制等值线图。在阅读了各种线程之后，我决定使用`cut`并`quantile`消除以下问题：a) 手动创建 bin，b) 处理主导状态（否则，我必须手动创建 bin，查看地图并重新调整 bin）。

但是，我现在面临另一个问题。出来的间隔`cut`几乎不漂亮。所以，我试图按照这个[例子](http://www.sigmafield.org/comment/13)和这个[例子](http://www.talkstats.com/showthread.php/23506-Controlling-Automated-Labels-in-Cut)来提出我漂亮的标签。

这是我的清单：

```
x <- seq(1,50) 
```

四舍五入的分位数：

```
qs_x <- round(quantile(x, probs=c(seq(0,0.8,by=0.2),0.9))) 
```

结果：

```
 0% 20% 40% 60% 80% 90% 
 1  11  21  30  40  45 
```

使用这些削减，我想提出这些标签：

```
1-11, 12-21, 22-30, 31-40, 41-45, 45+ 
```

我确信有一个简单的解决方案可以使用某些`apply`函数转换列表，但我并不精通这些函数。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:27:39.483

3-liner 产生你想要的输出，而不使用`apply`.

```
labels <- paste(qs_x+1, qs_x[-1], sep="-")
labels[1] <- paste(qs_x[1], qs_x[2], sep="-")
labels[length(labels)] <- paste(tail(qs_x, 1), "+", sep = "") 
```

第一行构造形式`(x1 + 1) - x2`的标签，第二行固定第一个标签，第三行固定最后一个标签。这是输出

```
> labels
[1] "1-11"  "12-21" "22-30" "31-40" "41-45" "45+" 
```

# php - Android 可以下载任何类型的日历事件吗？如果是这样，文件结构是什么？

> ID：11438823
> 
> 赞同：2
> 
> 时间：2012-07-11T18:13:58.503
> 
> 标签：php, android, calendar, download

我一直在寻找试图确定 Android 设备可以下载并合并到系统日历中的日历邀请/事件格式 - 但是我无法找到任何东西！

默认情况下，设备不支持 iCal 或 vCal - 这两种格式都定义明确且易于创建。例如，这个 PHP 脚本非常适合 iPad 或 iPhone - 因此当您访问该页面时，设备会邀请您将其添加到您的日历中：

```
<?
$ical = "BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//hacksw/handcal//NONSGML v1.0//EN
BEGIN:VEVENT
UID:" . md5(uniqid(mt_rand(), true)) . "@yourhost.test
DTSTAMP:" . gmdate('Ymd').'T'. gmdate('His') . "Z
DTSTART:19970714T170000Z
DTEND:19970715T035959Z
SUMMARY:Bastille Day Party
END:VEVENT
END:VCALENDAR";

header("Content-type: application/force-download");
header('Content-Disposition: attachment; filename=calendar.ics');
echo $ical;
exit;
?> 
```

我正在尝试为 Android 创建类似的东西，但我找不到任何关于它会愉快地在本地下载什么文件的指导，**没有一些第三方应用程序**！

任何想法或帮助表示赞赏！

谢谢，凯什

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T18:17:37.567

向 Santiago Rebella 致敬：[从 web 将日历事件添加到 Android .vcs 下载](https://stackoverflow.com/questions/11825221/add-calendar-event-to-android-from-web-vcs-download)

```
<?php
header("Content-Type: text/x-vCalendar");
header("Content-Disposition: attachment; filename=london2012.vcs");
?> 
```

# c# - 时序管理器和工作线程

> ID：11438826
> 
> 赞同：0
> 
> 时间：2012-07-11T18:14:07.010
> 
> 标签：c#, .net, multithreading, synchronize

我无法让我的经理和员工正确同步。问题是 SyncManager 在 SyncWorker 完成之前停止......而且我不知道为什么它会继续执行而不等待 SyncWorker 完成。

## 同步管理器

```
public void ExecuteTask()
{
    /*Code to set up Variables*/
    while (fileMetadata.Count > 0 && Status != WorkerStatus.ShouldStop)
    {
        if (DateTime.Now.Subtract(lastUpdate).Minutes > 1)
            _serviceLog.WriteEntry(ProgressString());

        if (Status == WorkerStatus.ShouldStop)
            break;

        SyncFile(fileMetadata[0]);

        //Possible solution
        //Wait for Sync File to Finish before stepping (although logically it should do that)

        if (DateTime.Now.Subtract(lastUpdate).Minutes > 1)
            _serviceLog.WriteEntry(ProgressString());

        //Code That I think is causing the error
        fileMetadata.RemoveAt(0);
    }
    /*Code to preform clean up actions and notify user of all transfers*/
}

public void SyncFile(FileMetadata fmd)
    {
        lock (executionLock)
        {
            attempts++;
            long waitTime = 0;
            switch (Type)
            {
                case (SyncManagerType.UploadLarge):
                    waitTime = 8192;
                    break;
                case (SyncManagerType.UploadMedium):
                    waitTime = 4096;
                    break;
                case (SyncManagerType.DownloadLarge):
                    waitTime = 8192;
                    break;
                case (SyncManagerType.DownloadMedium):
                    waitTime = 4096;
                    break;
                default:
                    waitTime = 30;
                    break;
            }

            syncWorker = new FileSyncWorker(GenerateSyncWorkerID(), _serviceLog, fmd, ref sb);
            syncThread = new Thread(new ThreadStart(syncWorker.ExecuteTask));
            syncThread.Start();
            DateTime start = DateTime.Now;
            DateTime finish;

            while (DateTime.Now.Subtract(start).TotalSeconds < waitTime && (syncWorker.Status == WorkerStatus.Working))
            {
                if (DateTime.Now.Subtract(lastUpdate).Minutes > 1)
                    _serviceLog.WriteEntry(ProgressString());

                if (Status == WorkerStatus.ShouldStop)
                    waitTime = 15;

                Thread.Sleep(1000);
            }

            finish = DateTime.Now;

            Thread.Sleep(1000);
            if (finish.Subtract(start).TotalSeconds < waitTime)
            {
                if (syncWorker.Status == WorkerStatus.CompletedSuccess)
                {
                    successes++;
                }
            }
            else
            {
                syncThread.Abort();
                sb.AppendLine("Sync Manager (" + ID + ") - FSW (" + syncWorker.ID + ") - Transfer timed out after " + waitTime + " seconds.");
            }

            //Possible Solution
            //FileMetadata toRemove = fileMetadata.Find(delegate(FileMetadata f) { return f.Equals(syncWorker.FileData); });
            //fileMetadata.Remove(toRemove);

            activeIDs.RemoveAll(delegate(int i) { return i == syncWorker.ID; });
            syncWorker = null;

            Thread.Sleep(1000);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:10:35.233

如果您希望父线程等待工作人员，请确保`Thread.Join`在退出之前放置：

```
if (finish.Subtract(start).TotalSeconds < waitTime)
{
     if (syncWorker.Status == WorkerStatus.CompletedSuccess)
     {
          successes++;
     }
}
else
{
     syncThread.Abort();
     syncThread.Join();
     sb.AppendLine("Sync Manager (" + ID + ") - FSW (" + syncWorker.ID + ") - Transfer timed out after " + waitTime + " seconds.");
} 
```

# c# - c# SpeechSynthesizer SpeakCompleted 返回变量

> ID：11438830
> 
> 赞同：1
> 
> 时间：2012-07-11T18:14:23.583
> 
> 标签：c#, speechsynthesizer

希望有人能帮忙！:)

我想要实现的是让 reader_Speak() 方法在说完后返回 true。类似于旧 SpeechLib 的 WaitUntilDone。

这是我的代码：-

```
 public void reader_Speak(string strSpeech)
    {
        reader = new SpeechSynthesizer();
        reader.SpeakAsync(strSpeech);
        reader.SpeakCompleted += new EventHandler<SpeakCompletedEventArgs>(reader_SpeakCompleted);
    }

    private void reader_SpeakCompleted(object sender, SpeakCompletedEventArgs e)
    {
        reader.Dispose();
    } 
```

这就是我想要的：-

```
 public bool reader_Speak(string strSpeech)
    {
        reader = new SpeechSynthesizer();
        reader.SpeakAsync(strSpeech);
        reader.waituntildone();
        return true;
    } 
```

有人有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:18:33.943

而不是使用 SpeakAsync 和完成的回调，只需使用`Speak`阻塞的方法。

# .net - 执行任务 对于远程呼叫而不是在事件中响应？

> ID：11438832
> 
> 赞同：2
> 
> 时间：2012-07-11T18:14:43.490
> 
> 标签：.net, task-parallel-library

我有一个 API，其界面如下所示：

```
void SendRequest(Guid id, IRequest request);
event EventHandler<ResponseEventArgs> ResponseReceived; 
```

实现此方法的最佳方法是什么？

```
Task<T> GetResponse(IRequest request) where T: IRequest 
```

请注意，多个请求可能会相互重叠，因此当响应返回时，我需要查找父请求。我有一种感觉 TaskCompletionSource 可能有用，但不能完全拼凑起来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T18:30:29.240

**编辑**：

如果您想在不阻塞线程的情况下执行此操作，可以使用以下方法执行以下操作`TaskCompletionSource<T>`：

```
var completionSource = new TaskCompletionSource<T>();

var requestIdentifier = Guid.NewGuid();

EventHandler<ResponseEventArgs> handler = null;

handler = (sender, args) =>
{
    if(args.RequestIdentifier == requestIdentifier)
    {
        api.ResponseReceived -= handler; 

        // TrySetResult avoids re-entrancy problems in case of an
        // API that sends duplicates, but there other ways of 
        // dealing with this too.
        completionSource.TrySetResult((T)args.Response);
    }      
};

api.ResponseReceived += handler; 

// Make this async if you want.
api.SendRequest(requestIdentifier, request); 

return completionSource.Task; 
```

* * *

**原答案：**

我认为您想要类似以下的内容，它使用 a[`ManualResetEvent`](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)来阻止线程，直到 API 引发事件：

```
return Task.Factory.StartNew<T>(() =>
{
    var waitHandle = new ManualResetEvent(false);

    T result = default(T);

    var requestIdentifier = Guid.NewGuid();

    EventHandler<ResponseEventArgs> handler = (sender, args) =>
    {
         if(args.RequestIdentifier == requestIdentifier)
         {
             result = (T)args.Response; // Not sure how this looks in your API
             waitHandle.Set(); // Unblock the thread running the task     
         }      
    };

    // Attach handler to respond to the response being received.
    api.ResponseReceived += handler; 

    // Send request off.
    api.SendRequest(requestIdentifier, request); 

    // Wait until response is received.
    waitHandle.WaitOne(); 

    // Detach handler to prevent leak.
    api.ResponseReceived -= handler; 

    return result;
}); 
```

* * *

要获得更简洁的方法，请查看[Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:36:57.713

您可以返回等待事件返回的任务：

```
Task<T> GetResponse<T>() 
{
    T result = default(T);
    ManualResetEvent ev = new ManualResetEvent(false);
    ResponseReceived += (s,e) =>  {     
        result = default(T); /* result = e.Xxx */
        ev.Set();
    };
    return new Task<T>(() => {
        SendRequest(Guid.NewGuid());        
        ev.WaitOne();
        return result;
    });
} 
```

# android - V8 内存使用情况

> ID：11438833
> 
> 赞同：4
> 
> 时间：2012-07-11T18:14:46.190
> 
> 标签：android, node.js, memory, v8

运行 v8 java-script 引擎所需的最小 RAM 是多少。

是否适用于内存有限的设备。我想在 android 应用程序中使用 node.js 作为嵌入式服务器。这是个好主意吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T18:40:44.357

**V8 以称为pages**的 1 MB 块为 JavaScript 堆请求内存。这些被分组在包含不同类型对象的**空间中。**有 7 个空格（从、到、指针、数据、代码、单元格、映射），如果计算大对象空间，则有 8 个。绝对最低限度，每个空间至少需要一页，所以那里有 7 MB。V8 本身大约 3 MB（至少在 ARM、YMMV 上）。另外，您还需要 2 MB 左右的暂存空间。所以至少总共有 12 MB。您可能希望总共有 20-30 MB 可用空间用于正常操作。

所有这些都应该可以轻松安装在任何 Android 设备上。我所知道的所有设备都至少有 256 MB 的 RAM，你可以期望操作系统和其他应用程序至少使用其中的一半。请注意，Android 网络浏览器已经嵌入了 V8 并且没有问题。浏览器的 V8 实例可能比 Node.js 服务器的 V8 部分占用更大的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:43:27.433

第一：我想知道你是如何将 node.js 嵌入到一个 android 应用程序中的。

对于你的问题：内存使用很大程度上取决于node.js/V8的各种编译标志，系统架构，所以你的问题不能100%回答。

调整垃圾收集器的行为也可能很有趣。（非常粗略：更多 cpu（更频繁地进行垃圾收集）<--> 更多内存（“浪费”更多内存并稍后清理）

# python - 类型错误需要字符串或缓冲区，在 python 中找到的文件

> ID：11438844
> 
> 赞同：0
> 
> 时间：2012-07-11T18:15:13.863
> 
> 标签：python

因此，当我单独编写这段代码时，它可以正常工作，但是当我将它们组合在一起时，它会给我 typeError。为什么会这样？当我单独编写它们时我不明白它工作正常。提前致谢 ：）

```
def printOutput(start, end, makeList):

  if start == end == None:

      return

  else:

      print start, end

      with open('OUT'+ID+'.txt','w') as outputFile:#file for result output
          for inRange in makeList[(start-1):(end-1)]:
              outputFile.write(inRange)
          with open(outputFile) as file:
              text = outputFile.read()
      with open('F'+ID+'.txt', 'w') as file:
        file.write(textwrap.fill(text, width=6)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T18:19:35.240

您的问题出在这一行：

```
 with open(outputFile) as file: 
```

`outputFile`是一个文件对象（已经打开）。该`open`函数需要一个字符串（或类似的东西），它是要打开的文件的名称。

如果你想取回文本，你可以一次`outputFile.seek(0)`又一次`outputFile.read()`。（当然，您必须以`r+`模式打开才能使其正常工作。）

也许更好的方法是：

```
with open('OUT'+ID+'.txt','w') as outputFile:#file for result output
    text=''.join(makeList[(start-1):(end-1)])
    outputFile.write(text)
with open('F'+ID+'.txt', 'w') as ff:
    ff.write(textwrap.fill(text, width=6)) #Version of above file with text wrapped to 6 chars. 
```

**编辑**

这应该有效：

```
def printOutput(start, end, makeList):
    if start == end == None:
        return
    else:
        print start, end

        with open('OUT'+ID+'.txt','w') as outputFile:#file for result output
            text=''.join(makeList[(start-1):(end-1)])
            outputFile.write(text)
        with open('F'+ID+'.txt', 'w') as ff:
            ff.write(textwrap.fill(text, width=6)) #Version of above file with text wrapped to 6 chars. 
```

# c# - 在 .cs c# .net 中包含 HTML 页面

> ID：11438848
> 
> 赞同：0
> 
> 时间：2012-07-11T18:15:42.733
> 
> 标签：c#, html, email

所以我正在尝试清理后端并美化我的电子邮件。有没有办法包含一个 html 文件而不是直接将 html 放在这里？或者也许是更好的方法？

```
public void SendWelcomeEmail(int uid)
{
SqlCommand command = EmailCommandList.GetRegisteredEmail;
BciDatabase db = new BciDatabase("db");
command.Parameters["@User_Id"].Value = uid;
using (SqlDataReader dr = db.ExecuteReader(command))
{
Member member = new Member();
if (dr != null && !dr.IsClosed && dr.Read())
{
while (dr.Read())
 {
string emailAddress = (string)dr["Email"];
MailMessage mail = new MailMessage();
mail.Subject = "Welcome to the site";
 mail.Body = "<html><head></head><body><p>Hello, welcome to the site!</body></html>";
 mail.IsBodyHtml = true;
mail.From = new MailAddress("noreply@email.com");
mail.To.Add(new MailAddress(emailAddress));
var client = new SmtpClient("smtp.gmail.com", 587)
{
Credentials = new NetworkCredential("myemail", "mypass"),
EnableSsl = true
};
client.Send(mail);
}
}
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:20:07.710

如果您使用的是 ASP.Net MVC，则有一些非常好的解决方案可以将您的电子邮件写为视图，这样可以轻松注入模型的元素（例如人名）：

*   [邮政](http://aboutcode.net/postal/)
*   [Mvc 邮件程序](https://github.com/smsohan/MvcMailer)

如果您不使用 MVC，您当然可以从文件系统中读取 HTML 文件，或从数据库中读取 HTML（如果您有多个电子邮件，则更容易维护）。

# android - 为什么我的 WebView 的 WebViewClient 没有被调用？

> ID：11438850
> 
> 赞同：1
> 
> 时间：2012-07-11T18:15:53.187
> 
> 标签：android, webview, webviewclient

我有一个 WebView，在使用 WebView.setWebViewClient 设置自定义 WebViewClient 后，似乎没有调用 WebViewClient 方法。特别是我覆盖了 onLoadResource 和 onReceivedError。但是，在调用 WebView.loadUrl(); 之后，这些都没有被调用；

这是有问题的代码：[https ://gist.github.com/9673b619e019038848a0](https://gist.github.com/9673b619e019038848a0)

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:55:48.043

您确定您正在寻找正确的日志消息并且您的设备正在正确输出日志吗？我基本上将您的代码复制到了一个干净的项目中，它似乎工作得很好。浏览一下文档，您似乎正在正确地遵循所有内容。

我使用 webview 作为内容视图，这是我看到的唯一显着差异。

以下是我的测试活动供参考：

```
package com.testing.androidtest;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.webkit.ConsoleMessage;
import android.webkit.WebChromeClient;
import android.webkit.WebView;
import android.webkit.WebViewClient;

@SuppressLint("SetJavaScriptEnabled")
public class MainActivity extends Activity {

    private static final String APP_TAG = "MYAPP";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        final WebView webView = new WebView(getApplicationContext());
        webView.getSettings().setJavaScriptEnabled(true);
        webView.setWebChromeClient(new WebChromeClient() {

            @Override
            public boolean onConsoleMessage(ConsoleMessage consoleMessage) {
                Log.d(APP_TAG, consoleMessage.message());
                return true;
            }
        });
        webView.setWebViewClient(new WebViewClient() {
            @Override
            public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                Log.e(APP_TAG, "Error in WebView: " + failingUrl + "; " + description);
            }

            @Override
            public void onLoadResource(WebView view, String url) {
                super.onLoadResource(view, url);
                Log.d(APP_TAG, "loading resource: " + url);
            }
        });
        webView.loadUrl("http://google.com/");

        setContentView(webView);
    }

} 
```

# c++ - 如何在 gtk+ 中创建图形

> ID：11438852
> 
> 赞同：3
> 
> 时间：2012-07-11T18:15:57.003
> 
> 标签：c++, user-interface, gtk

我已经实现了一个最大流量算法，现在我想在 gtk+ 中使用 gui 来展示它。我想显示残差图。如何在 gtk+ 中执行此操作？我正在用 C++ 编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:41:04.103

您需要一个可以显示图表的小部件。普通的 GTK 中没有一个，所以你必须找到一个外部的。有几个，我相信。如果你碰巧使用 Python 和 PyGTK，你可以在 GTK 中使用 Matplotlib 图。

# gwt - 用GWT绘制六边形图的最佳方法

> ID：11438853
> 
> 赞同：2
> 
> 时间：2012-07-11T18:15:59.013
> 
> 标签：gwt, canvas

我正在寻找最佳解决方案 - 我正在为 GWT 中基于浏览器的游戏绘制六边形地图（类似文明:)）。目前我正在画布上画它基本上可以工作。

但是 - 我也可以向左、向右、向下和向上滑动地图以查看地图的另一个片段。在这种情况下，我不得不重新绘制整个地图 - 这看起来不太好，并且当地图变得更复杂时可能会导致性能问题。

有没有更好的方法呢？某个图书馆？或者也许我应该让每个十六进制都像小部件一样成为按钮。所以我可以移动它而不是从头开始创建......但是不同的分辨率呢......我害怕地图有时会撕裂......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:48:28.527

您可以尝试使用简单的 DIV（FlowPanel、HTMLPanel 等）并使用 CSS 设置六边形样式。请参阅本教程：http: [//jtauber.github.com/articles/css-hexagon.html](http://jtauber.github.com/articles/css-hexagon.html)

这里也有一些简洁的建议：[html/css hexagon with image inside](https://stackoverflow.com/questions/7433454/html-css-hexagon-with-image-inside) and [hexagonal shape cells in html](https://stackoverflow.com/questions/3637613/hexagonal-shaped-cells-in-html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T09:43:45.763

您可以在隐藏的画布中绘制整个地图（通常只是相对静态的背景，而不是动画！），然后将您需要的部分复制到可见的画布上：

```
final Canvas hiddenCanvas = buildCanvas(1000, 1000);
drawHexPattern(hiddenCanvas);
// don't add the hiddenCanvas to your DOM

final Canvas visibleCanvas = buildCanvas(320, 200);
RootPanel.get().add(visibleCanvas); // add the visibleCanvas to the DOM

showArea(hiddenCanvas, visibleCanvas, 0, 0);
...
showArea(hiddenCanvas, visibleCanvas, 20, 10);
... 
```

使用`showArea()`类似的方法

```
private void showArea(final Canvas hiddenCanvas, final Canvas visibleCanvas,
      final double x, final double y) {

  final Context2d hiddenCtx = hiddenCanvas.getContext2d();
  final Context2d visibleCtx = visibleCanvas.getContext2d();

  final ImageData imageData = hiddenCtx.getImageData(x, y, 
         visibleCanvas.getCoordinateSpaceWidth(),
         visibleCanvas.getCoordinateSpaceHeight());

  visibleCtx.putImageData(imageData, 0, 0);
} 
```

[我用一个工作示例创建了一个 pastebin：http: [//pastebin.com/tPN2093a](http://pastebin.com/tPN2093a)]

# list - sharepoint 2007 列表的输入过滤

> ID：11438854
> 
> 赞同：1
> 
> 时间：2012-07-11T18:16:01.487
> 
> 标签：list, sharepoint

有没有办法通过输入开始和结束日期来过滤日历视图？我们想要一份在支付期间请假的人员列表，并且需要输入支付期间的开始和结束日期。谢谢！

# python - 模式匹配的替代语言

> ID：11438858
> 
> 赞同：-1
> 
> 时间：2012-07-11T18:16:17.123
> 
> 标签：python, programming-languages, wolfram-mathematica, pattern-matching

我正在*Mathematica*中编写一个程序，该程序依赖于模式匹配来执行工资单和付款验证。问题的症结在于比较不同的数据文件（CSV 和 XLS）以确保它们包含完全相同的信息，因为付款由两个不同的第三方处理。

我对*Mathematica*的使用使程序的开发变得非常流畅和有趣，但在分发级别上却令人望而却步。CDF 格式不是一个选项，因为程序要求用户导入数据文件，这是 WRI 在 CDF 中不允许的。

用于此任务的理想编程语言将使我能够将其打包为独立的，适用于 OS X、Linux 或 Windows，并且能够进行模式匹配。还需要对 GUI（原始或扩展）的支持。

我想用 Python 来翻译我的程序，但我不确定这是否是一个不错的选择。

你有什么建议？

* * *

我对模式匹配的唯一理解是[Mathematica](http://reference.wolfram.com/mathematica/guide/RulesAndPatterns.html)文档*教* [给](http://reference.wolfram.com/mathematica/guide/PatternMatchingFunctions.html)我的。

*Mathematica*完美处理的任务示例如下：

导入 XLS 文件，按日期和名称对数据进行排序，提取某些日期和名称。导入 CSV 文件，按日期和名称对数据进行排序，提取某些日期和名称。

比较两者，生成包含所需（缺失）信息的格式良好的输出。

*在Mathematica*中浏览数据也非常简单和直观。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T21:44:25.973

考虑一下[Haskell](http://www.haskell.org/haskellwiki/Haskell)，它似乎具有您想要的所有功能并且是跨平台的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:04:44.703

Prolog 是一种逻辑编程语言，因为它实际上会根据您提供的事实进行证明。因此，如果您向它提供有关保修或工资信息的适当事实，它将能够通过尝试达到等式两边都取消的基本情况来证明它是其中任何一个。还有更多，但我现在正在打电话。

对于您的情况，您将能够以更易于编程的语言读取数据并在 Prolog 中验证您的参数，只要您的 Prolog 事实正确，它将能够快速验证您的数据是否有效。它可以被认为是具有更多功能的类固醇上的正则表达式。

[http://www.amzi.com/articles/lsapi_design.htm](http://www.amzi.com/articles/lsapi_design.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T21:49:26.767

如果您想使用更标准的语言来处理电子表格，除非我误解了这个问题，否则我建议您只使用简单的 Java 和 Apache POI 库，专门为可怕的电子表格格式而设计。而且它比 Haskell 学习起来要快得多，尽管我想如果你已经知道 Mathematica，那么转向另一种数学倾向的语言也不会那么糟糕。

# windows - 过滤器驱动程序是否旨在扩展系统驱动程序？

> ID：11438859
> 
> 赞同：3
> 
> 时间：2012-07-11T18:16:37.097
> 
> 标签：windows, driver, filter-driver

过滤器驱动程序是否旨在扩展系统驱动程序？

这是他们的主要目的吗？

它们基本上只是位于驱动程序和用户之间的额外层吗？

这似乎是一个过于简单的解释，我想知道我是否遗漏了什么。

有什么好方法可以学习更多吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T12:18:18.750

驱动程序主题是一个非常高级的主题。

要获得概览，您可以仔细查看[Windows 驱动程序工具包 (WDK) 方面](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487428.aspx)。

如果你决定涉足这些东西，那么你需要大量的时间、挫折抵抗力和狂热。

您应该做的第一件事（在您接触 WDK 之前！）是，开始阅读一本好书。

如果您想为 windows 文件系统进行开发，请阅读 Rajeev Nagar 的书“Windows NT 文件系统内部：开发人员指南”。它于 1997 年出版，但它有点像 NTFS 的“圣经”。

对于常见的驱动程序开发，您可以找到 Penny Orwick 撰写的“使用 Windows 驱动程序基础开发驱动程序”之类的书籍。

这些书描述了用 C 语言编写的内核模式软件编程。因此，在开始之前，您应该具备良好的 C 基础知识。

其中包括 OSR 方面 (www.osr.com) 和 technet 上的 SysInternals ( [http://technet.microsoft.com/de-DE/sysinternals](http://technet.microsoft.com/de-DE/sysinternals) )，它们确实值得仔细研究。

您花在阅读调试输出和故障转储上的时间超过了一半，因此了解这些内容的含义以及如何获取这些信息是明智的，但也有一些关于 Windows 调试的好书。

我希望，我能够对这个问题进行简短的概述，以了解更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T06:16:06.257

在某种程度上是的。

例如，如果文件系统过滤器驱动程序用于文件加密/压缩/安全，它正在增强文件系统功能。

过滤器驱动程序不处理与实际设备的对话。他们依靠较低级别的驱动程序与设备进行通信。过滤器驱动程序是驱动程序的附加组件，以实现某些功能。修改数据/请求的有源驱动程序是为了增强普通驱动程序，而无源过滤器驱动程序只是传递，没有任何直接增强。

所以我认为你的假设是正确的。不过还是想听听不同的看法。

# c# - 在 Visual Studio 中跟踪错误

> ID：11438860
> 
> 赞同：2
> 
> 时间：2012-07-11T18:16:37.240
> 
> 标签：c#, asp.net, stack, trace

第一次发布问题，所以我希望我做对了。主要问题是我无法跟踪打开表单时创建的错误，并希望获得有关如何找到触发问题的代码的建议。我将错误粘贴在所有这些下面。不幸的是，这不是指向特定代码行的错误，所以我觉得卡住了。

我可能还需要提供更多关于这方面的背景。我最近收到了一台新电脑，并且一直在重新安装我的所有应用程序。当我打开我的网站后面的项目（运行良好）并运行它时，我收到一个错误，告诉我变量名不能包含空格。好的，我用括号修复了它，但后来想知道为什么这是我第一次看到这个错误。我调出正在运行的代码版本，发现变量名没有括起来。很奇怪，所以我想一个侧面的问题是为什么会这样。以下是我拥有的版本，如果它是相关的：

*Microsoft Visual Studio 2010 版本 10.0.30319.1 RTMRel Microsoft .NET Framework 版本 4.0.30319 RTMRel 安装版本：专业版*

以下是我收到的错误。由于这不是我可以逐步完成的（据我所知），我只想学习如何找到它。如果我能理解为什么这不是问题之前会很棒，因为我还没有改变任何东西！

> *异常详细信息：System.FormatException：输入字符串的格式不正确。源错误：在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。堆栈跟踪：[FormatException：输入字符串格式不正确。]
> System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal) +9591147 System.Number.ParseInt32(String s, NumberStyles style , NumberFormatInfo info) +119
> System.String.System.IConvertible.ToInt32(IFormatProvider provider) +46 System.Convert.ChangeType(Object value, TypeCode typeCode, IFormatProvider provider) +297
> System.Web.UI.WebControls.Parameter.GetValue(Object value, String defaultValue, TypeCode type, Boolean convertEmptyStringToNull, Boolean ignoreNullableTypeChanges) +126
> System.Web.UI.WebControls.Parameter.GetValue(Object value, Boolean ignoreNullableTypeChanges) +63
> System .Web.UI.WebControls.Parameter.get_ParameterValue() +40
> System.Web.UI.WebControls.ParameterCollection.GetValues(HttpContext context, Control control) +261
> System.Web.UI.WebControls.SqlDataSourceView.InitializeParameters(DbCommand 命令, ParameterCollection参数，IDictionary excludeList) +266 System.Web.UI.WebControls.SqlDataSourceView.ExecuteSelect(DataSourceSelectArguments arguments) +653
> System.Web.UI.DataSourceView.Select(DataSourceSelectArguments 参数，DataSourceViewSelectCallback 回调) +21
> System.Web.UI.WebControls.DataBoundControl.PerformSelect() +143
> Telerik.Web.UI.GridTableView.PerformSelect() +38
> System.Web. UI.WebControls.BaseDataBoundControl.DataBind() +74
> Telerik.Web.UI.GridTableView.DataBind() +375
> Telerik.Web.UI.RadGrid.DataBind() +173
> System.Web.UI.WebControls.BaseDataBoundControl.EnsureDataBound() +66
> System.Web.UI.WebControls.CompositeDataBoundControl.CreateChildControls() +75 System.Web.UI.Control.EnsureChildControls() +102 System.Web.UI.Control.PreRenderRecursiveInternal() +42
> System.Web.UI.Control .PreRenderRecursiveInternal() +175
> System.Web.UI.Control.PreRenderRecursiveInternal() +175
> System.Web.UI.Control.PreRenderRecursiveInternal() +175
> System.Web.UI.Control.PreRenderRecursiveInternal() +175
> System.Web.UI.Page.ProcessRequestMain(布尔includeStagesBeforeAsyncPoint，布尔型 includeStagesAfterAsyncPoint) +2496*

感谢您提供的任何指导

达纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T17:42:46.287

You couldn't hit this line because it's not your code. It didn't break in the markup because it was *syntactically* correct. It broke further down the line because the code was *semantically* incorrect.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T17:39:18.477

I believe I found the problem causing the error. Turns out I did change something on one of the dropdowns and hadn't realized. Took my quite a while of commenting out code until I could isolate the problem.

Thanks to the helpful replies.

I'm still wondering why it was unable to point to the line causing the problem in the markup, like it does for the code-behind. No way to do that?

# javascript - 从另一个站点获取 HTML 内容

> ID：11438864
> 
> 赞同：3
> 
> 时间：2012-07-11T18:16:48.513
> 
> 标签：javascript, jquery, html, ajax

我想从另一个网站动态检索html内容，我有公司的许可。

请不要将我指向 JSONP，因为我无法编辑站点 A，只能编辑站点 B

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T19:09:32.807

由于跨域安全问题，您将无法在客户端执行此操作，除非您对`iframe`.

使用 PHP，您可以使用多种“抓取”内容的方法。您使用的方法取决于您是否需要在请求中使用 cookie（即数据在登录后）。

无论哪种方式，要从客户端开始，您将向您**自己的服务器**发出标准 AJAX 请求：

```
$.ajax({
  type: "POST",
  url: "localProxy.php",
  data: {url: "maybe_send_your_url_here.php?product_id=1"}
}).done(function( html ) {
   // do something with your HTML!
}); 
```

如果您需要设置 cookie（如果远程站点需要登录，则需要它们），您将使用 cURL。使用发布数据登录和接受 cookie 的完整机制有点超出此答案的范围，但您的请求看起来像这样：

```
$ch = curl_init(); 
curl_setopt ($ch, CURLOPT_URL, 'http://thirdpartydomain.internet/login_url.php'); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 0); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt ($ch, CURLOPT_COOKIEJAR, 'cookie.jar'); 
curl_setopt ($ch, CURLOPT_POSTFIELDS, 'email='.$username.'&password='.$password); 
curl_setopt ($ch, CURLOPT_POST, 1); 
$result = curl_exec ($ch); 
curl_close($ch); 
```

此时，您可以检查`$result`变量并确保登录有效。如果是这样，您将使用 cURL 发出*另一个*请求以获取页面内容。第二个请求不会包含所有帖子垃圾，您将使用您尝试获取的 URL。您最终会得到一个充满 HTML 的大字符串。

如果您只需要该页面的一部分内容，您可以使用下面的方法将字符串加载到 DomDocument 中，使用该`loadHTML`方法代替`loadHTMLFile`（见下文）

说到DomDocument，如果你**不需要**cookies，那么你可以直接使用DomDocument来获取页面，跳过cURL：

```
$doc = new DOMDocument('1.0', 'UTF-8');
// load the string into the DOM (this is your page's HTML), see below for more info
$doc->loadHTMLFile ('http://third_party_url_here.php?query=string');

// since we are working with HTML fragments here, remove <!DOCTYPE 
$doc->removeChild($doc->firstChild);            

// remove <html></html> and any junk
$body = $doc->getElementsByTagName('body'); 
$doc->replaceChild($body->item(0), $doc->firstChild);

// now, you can get any portion of the html (target a div, for example) using familiar DOM methods

// echo the HTML (or desired portion thereof)
die($doc->saveHTML()); 
```

**文档**

*   `iframe`MDN 上的HTML - [https://developer.mozilla.org/en/HTML/Element/iframe](https://developer.mozilla.org/en/HTML/Element/iframe)
*   `jQuery.ajax()`- [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)
*   PHP `cURL`- [http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)
*   `Curl::set_opt`（有关使用 cookie 的信息）- [http://www.php.net/manual/en/function.curl-setopt.php](http://www.php.net/manual/en/function.curl-setopt.php)
*   PHP `DomDocument`- [http://php.net/manual/en/class.domdocument.php](http://php.net/manual/en/class.domdocument.php)
*   `DomDocument::loadHTMLFile`- [http://www.php.net/manual/en/domdocument.loadhtmlfile.php](http://www.php.net/manual/en/domdocument.loadhtmlfile.php)
*   `DomDocument::loadHTML`- [http://www.php.net/manual/en/domdocument.loadhtml.php](http://www.php.net/manual/en/domdocument.loadhtml.php)

# shell - 在 shell 脚本中使用时存储在 awk 中

> ID：11438865
> 
> 赞同：-1
> 
> 时间：2012-07-11T18:16:49.150
> 
> 标签：shell, awk, grep

我正在编写一个 shell 脚本程序，我在其中内部调用一个 awk 脚本。下面是我的脚本。

```
for FILE in `eval echo{0..$fileIterator}`
{

if(FILE == $fileIterator)
{
    printindicator =1;
}
    grep RECORD FILEARRAY[FILE]| awk 'for(i=1;i<=NF;i++) {if($i ~ XXXX) {XARRAY[$i]++}} END {if(printIndicator==1){for(element in XARRAY){print element >> FILE B}}' 
```

我希望我对我的代码很清楚。如果您需要任何其他详细信息，请告诉我。

**问题**

我在这个程序中的动机是遍历所有文件并获取所有文件中具有“XXXX”的行并将这些行存储在一个数组中。这就是我在这里所做的。最后我需要将数组变量的内容存储到一个文件中。我可以在每一步存储内容，如下所示

```
{if($i ~ XXXX) {XARRAY[$i]++; print XARRAY[$i] >> FILE B}} 
```

但是不采用这种方法的原因是每次我需要执行 I/O 操作，为此花费的时间很多，这就是为什么我每次都将其转换为内存然后最后转储内存数组（ XARRAY) 到文件中。

**我在这里面临的问题是。shell 脚本每次都调用 awk，数据被存储在数组（XARRAY）中，但对于下一次迭代，XARRAY 的先前内容将被删除，它会放入新内容，因为这假定这是一个新数组**。因此，最后当我打印内容时，它只打印最近更新的 XARRAY，而不是预期的所有数据。

**预期的建议**

1）如何让 awk 脚本意识到 XARRAY 是旧的而不是新的，当它在每次迭代中每次都被调用时。

2) 一种替代方法是每次都进行 I/O。但我对此不感兴趣。除了这个还有其他选择吗。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:35:49.590

哎呀，不知道它是真实的还是伪代码！

你不能让 awk 保持状态。您要么必须将其保存到临时文件中，要么将其存储在 shell 变量中，将其内容传递给以后的调用。但这对于我理解你想要实现的目标来说太麻烦了。

我建议您省略循环，这将允许您只调用一次 awk 并进行一些重新排序。我假设 FILE A 是循环中的 FILE 而 FILE B 是外部的。重新排序最终会大致如下：

```
grep RECORD ${FILEARRAY[@]:0:$fileIterator} | awk 'for(i=1;i<=NF;i++) {if($i ~ XXXX) {XARRAY[$i]++}} END {for(element in XARRAY){print element >> FILEB}' 
```

我将文件名扩展移动到`grep`调用并删除了整个 printIndicator 检查。

这一切都可以更有效地完成（显而易见的是删除`grep`），但是您提供的细节太少，无法进行早期优化。

编辑：使用更新中的信息修复循环迭代。这是一个循环的解决方案，它不受新的空白问题和太长的命令行的影响：

```
for FILE in $(seq 0 $fileIterator); do
  grep RECORD "${FILEARRAY[$FILE]}"
done | 
awk 'for(i=1;i<=NF;i++) {if($i ~ XXXX) {XARRAY[$i]++}} END {for(element in XARRAY){print element >> FILEB}' 
```

它仍然`awk`只运行一次，不断地从循环中提供数据。

如果要将结果加载到数组 UGUGU 中，请执行以下操作（需要 bash 4）：

```
mapfile UGUGU < FILEB 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T20:10:49.933

```
results=$(for loop | awk{for(element in XARRAY)print element}).. 
```

我将结果声明为一个数组，因此对于正在打印的每个“元素”，它都应该存储在结果 [1]、结果 [2] 中。

但不是这个，而是执行以下操作......让我们假设 element =“我很好”（for 循环的第一次迭代），element =“你好吗”（for 循环的第二次迭代）。

我的预期结果是 results[1]= "I am fine" 和 results[2] = "How are you" ，但我得到的输出是 results[1]= "I" results[2] =“我”。我不知道为什么它是用空格分隔的..关于这个的任何建议

# sqlite - 如何从 sqlite 获取 blob 的全部价值

> ID：11438874
> 
> 赞同：0
> 
> 时间：2012-07-11T18:17:17.793
> 
> 标签：sqlite

我正在使用 SQLite Administrator 查询表中的 blob。我正在使用如下所示的查询：

```
SELECT quote(data) FROM versions WHERE id = '....' 
```

blob 的长度超过 256 个字符。当我查看结果时，我只得到了前 256 个字符。

该 blob 包含 XML。如何查询数据库以便获取完整的 XML？

托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:37:54.400

我最终编写了一个快速的 WinForms 应用程序来从数据库中检索数据并将其放入`TextBox`控件中。不管怎么说，还是要谢谢你。

# php - 什么是更好和最快的 PHP 框架来学习？

> ID：11438877
> 
> 赞同：0
> 
> 时间：2012-07-11T18:17:36.197
> 
> 标签：php, frameworks

我一直在使用 Cake PHP，但我有点“迷路”，我的意思是，我已经制作了教程并且已经做了一些工作。但是我发现这个框架并没有那么“容易”工作。我正在考虑去另一个框架。你们推荐我什么？

Yii、CodeIgniter、Zend 或 Symfony（甚至是另一个）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:22:27.163

我个人喜欢 CodeIgniter。它非常易于使用和扩展。它还拥有庞大的用户群，因此找到帮助相当容易。祝你好运！

[这](http://www.phpframeworks.com/)是PHP框架的比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:22:29.273

如果你想要一些易于使用的东西，我真的推荐 CodeIgniter。我只花了几分钟就掌握了它的基础知识，而且我之前真的没有使用过任何框架。

我也用过 Yii，但它相当丰富，对我正在做的项目来说感觉没有必要。但是，它并不太具有挑战性，如果你想要更接近 Ruby on Rails 的东西（如果你有这方面的经验），我会推荐它。只要确保你对 Yii 的命令行感到满意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:04:16.057

在过去的几个月里，我在 3 个不同的项目中使用了 CakePHP、Zend 和 Yii。我个人最喜欢的仍然是 Yii，因为它似乎是最有意义的。启动和运行也很快。Gii 工具还有助于快速创建模型/控制器和视图。所以在回答你“简单”的问题时，我认为 Yii 是要走的路。Zend 非常适合大型企业应用程序，或者如果您需要出色的 PHP 库（您也可以在其他框架中使用）。CakePHP 很容易使用，但我个人没有太多的使用经验。我从未使用过 CodeIgniter。

# android - 处理屏幕方向 - Android

> ID：11438878
> 
> 赞同：1
> 
> 时间：2012-07-11T18:17:43.633
> 
> 标签：android

我的应用程序中的屏幕方向有问题。我在 res/layout-lan 文件夹中为横向模式创建了一个备用布局。方向改变时出现问题，

1.在不破坏旧活动的情况下重新创建活动。

2.因为我在我的应用程序中使用媒体播放器，所以在屏幕旋转时，.mp3 同时在两个方向上播放..

我无法找到适当的示例代码来处理屏幕方向并保存和恢复活动的状态............

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:46:49.647

> 1.在不破坏旧活动的情况下重新创建活动。

当配置更改发生时，重新创建`Activity`是 Android 的自然默认行为。您的旧 Activity 在内存中徘徊的可能原因是它正在引用当前正在播放的`MediaPlayer`.

因为横向和纵向使用不同的布局资源，所以让 Android 重新创建 Activity 并每次拉取适当的资源对您有利。如果您自己处理旋转，您也将负责重新加载正确的布局。

> 2.因为我在我的应用程序中使用媒体播放器，所以在屏幕旋转时，.mp3 同时在两个方向上播放..

这个问题有两种解决方案...

理想的解决方案是将您的媒体播放移动到`Service`. `Activity`可以调用`Service`启动/停止/等。在用户指示时播放，但将其放入像 a 这样的背景组件`Service`中，即使您`Activity`由于更改而处于不断变化的状态，它也可以连续运行。这是 Android 团队鼓励的设计模式，您`Activity`实际上只处理用户界面。

另一种可行的解决方案`MediaPlayer`是`Activity`使用`onRetainNonConfigurationInstance()`. 这允许单个实例`MediaPlayer`之间存在`Activity`，保持播放一致。例如：

```
public class MyActivity extends Activity {
    private MediaPlayer mPlayer;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //Check if we have a player passed in from the last instance
        mPlayer = (MediaPlayer)getLastNonConfigurationInstance();
        //If not, make a new one
        if (mPlayer == null) {
            mPlayer = new MediaPlayer();
           //...Set up new player instance...
        }
    }

    @Override
    public Object onRetainNonConfigurationInstance() {
        //Clear our member variable to guarantee this Activity
        // is allowed to GC after onDestroy()
        MediaPlayer instance = mPlayer;
        mPlayer = null;
        //Hand our current player up to the next Activity to be created
        return instance;
    }

} 
```

确保最佳内存清理的另一个选项是定义`mPlayer`为 a`WeakReference<MediaPlayer>`以允许 GC 声明 old `Activity`，即使`MediaPlayer`在配置更改时正在播放音频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:35:52.820

```
 v 
```

创建文件夹**res/layout-land**

而不是 res/layout- **lan** <---- 将**d**放在文件夹名称中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T18:22:12.613

当屏幕方向通过以下步骤更改时，您可以停止重新创建活动。

如下设置 configChanges 标签

```
 <activity android:name=".Activity_name"
          android:configChanges="orientation|keyboardHidden"> 
```

使用下面的方法。

```
@Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
   // to do on orientation changed          
    }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-26T07:41:46.110

```
//by changing the orientation if your layout not disturb in design just data 
```

//销毁 //然后在你想要做的活动清单中使用下面的属性

```
 android:configChanges="orientation|screenSize|layoutDirection"

//but your whole screen design disturb then turn off orientation by using this

 android:screenOrientation="portrait" 
```

# c++ - 在运行时从应用程序获取 PE 标头时出现运行时错误

> ID：11438879
> 
> 赞同：0
> 
> 时间：2012-07-11T18:17:53.357
> 
> 标签：c++, process, executable, portable-executable, inject

我一直在尝试为 WINDOWS 进程制作一个可执行注入器，程序编译时没有任何错误，但是当我运行程序时（通过 Microsoft Visual Studio 的调试模式），我得到一个运行时错误。Visual Studio 突出显示一行（我已将其标记为注释）

```
#include <windows.h>
#include "resource.h"

int main()
{
 PIMAGE_DOS_HEADER IDH;
 PIMAGE_NT_HEADERS INTH;
 PIMAGE_SECTION_HEADER ISH;

 //Lets load the resource
 HRSRC hResource=FindResourceA(NULL,(LPCSTR)MAKEINTRESOURCE(IDR_EXE1),"EXE");
 DWORD ResourceSize=SizeofResource(NULL,hResource);
 HGLOBAL hGlob=LoadResource(NULL,hResource);
 LPSTR lpFileMaped=(LPSTR)LockResource(hGlob);

 //obtain the DOS and PE headers
 IDH=(PIMAGE_DOS_HEADER)&lpFileMaped[0];
 INTH=(PIMAGE_NT_HEADERS)&lpFileMaped[IDH->e_lfanew]; //this is the highlighted line
                                       // which supposedly causes an error at runtime

 .... 
```

为什么会这样，谁能详细说明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T19:15:28.317

看看[Matt Pietrek 的标准作品](http://msdn.microsoft.com/en-us/magazine/cc301805.aspx)。

> e_lfanew 字段包含PE头的文件偏移量

# javascript - 用于连接 JS 和 CSS 文件的工具

> ID：11438880
> 
> 赞同：3
> 
> 时间：2012-07-11T18:17:59.530
> 
> 标签：javascript, css, concatenation, minify

我最近开始使用一个大型代码库，每页有很多 (15-20) 个 js 请求。我的任务是优化和提高这些站点的性能。

我一直在使用 Google 的 PageSpeed 和 Yahoo 的 YSlow 等工具，并结合 WebPageTest.org 的测试来确定网站的基线速度和改进区域。我很好奇是否有一些标准或最佳实践解决方案用于连接和缩小 JS 和 CSS 文件。

我看了：[http](http://www.youtube.com/watch?v=30_AIEhar-I) ://www.youtube.com/watch?v=30_AIEhar-I ，前 20 分钟非常擅长将 mod_pagespeed 作为一个很好的目标。

我目前正在考虑使用 YUI 压缩器的 mod_pagespeed，也许还有一个精灵生成器。

我可能错过了哪些好工具，或者我应该在当前构建中关注哪些事情？

编辑：应该注意的是，这是许多页面中的一页（可能是数百页），并且该站点每两周收到一个新版本，因此必须能够自动化这种连接和缩小，我不能只做一次然后打电话很好。

编辑 2012 年 7 月 30 日 - 我花了一些时间研究不同的工具，很难说哪些是最好的，但目前，使用 mod_page 速度的人并不多。

闭包肯定被更广泛地使用，但即使这样也缺乏。似乎最好的方法是使用带有 YUI 的插件。

还有其他地方建议使用[Packer](http://dean.edwards.name/packer/)，但似乎许多人认为较小的文件大小可以通过在客户端计算机上解压缩它们来消除。[这个 stackoverflow 响应](https://stackoverflow.com/questions/1686428/should-i-use-the-yui-compressor-or-the-new-google-closure-compiler-to-compress-m)是关于这些类型工具的好读物。

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T20:03:01.513

Google 的 Closure Compiler 非常适合连接和缩小 JavaScript。它还有一个额外的好处，就是在你编译时为你检查代码，它会删除死代码，如果你在 docblocks 中包含类型提示，它还可以执行编译时类型检查。

在某些情况下，死代码删除功能使 Closure 比其他压缩器具有巨大优势……例如，考虑包含库但仅使用大约 10% 功能的情况。如果您将库与项目的其余部分一起压缩，则可以删除其他 90%。

至于 CSS，如果你想要一些花哨的东西，YUI 压缩器可能是你最好的选择。否则，您可以使用空格将文件连接在一起`cat`并从空格中获取一些额外字节。

# ruby-on-rails-3 - Rails 3范围，将条件与聚合（总和）结合会导致错误

> ID：11438884
> 
> 赞同：0
> 
> 时间：2012-07-11T18:18:06.850
> 
> 标签：ruby-on-rails-3, aggregate, arel

我有一个我认为是链接两个范围的简单问题（Rails 3.2.5）。

我有一个名为`Point`fields`amount`和的模型`transaction_date`，其中包括。用户在各种活动中获得一定数量的积分，并且它们在使用之前是“可用的”，这是作为交易的一部分发生的，此时`transaction_date`会更新，并且不再为空。

所以我有一个这样的范围：

```
scope :available, where("transaction_date IS NULL OR transaction_date = ''") 
```

它工作得很好，返回了正确的 Point 对象集合。所以我可以

```
> Point.available
=> [#<Point id: 123, amount: 22, transaction_date: nil >][#<Point id: 456, amount: 33, transaction_date: nil >] 
```

如果我想知道可用积分的总和，我可以

```
> Point.available.sum("amount")
=> 55 
```

但是，如果我尝试制作另一个范围，例如

```
scope :available, where("transaction_date IS NULL OR transaction_date = ''")
scope :total_available, available.sum("amount") 
```

我得到错误

```
NoMethodError: undefined method `default_scoped?' for 22:Fixnum 
```

或者如果我更改范围，那么`sum("amount").available`我会收到错误

```
NoMethodError: undefined method `available' for 55:Fixnum 
```

我也可以`:total_available`通过添加定义的条件来使范围工作`:available`，但这不是很干燥。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T18:35:09.457

该表达式 `available.sum`立即得到评估，因此您的尝试等同于

```
scope :total_available, 55 
```

或者

```
scope :total_available, 55.available 
```

这显然是错误的。我个人会为此使用类方法

```
def self.total_available
  available.sum(:amount)
end 
```

我认为作用域是一个作用域集合：作用域是数字对我来说没有意义——一方面，它们是你不能将其他作用域链接到的作用域

# matlab - 在 Matlab 图中以交互方式更改数据点的颜色

> ID：11438889
> 
> 赞同：1
> 
> 时间：2012-07-11T18:18:22.263
> 
> 标签：matlab, colors, plot, mouse

我正在研究 Matlab 绘图。我有两个问题。

1）绘图后，当用户选择数据点时，该数据点的颜色应该改变

2) 我需要获取该数据点的 x 和 y 值

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:09:40.907

对于第一种获取用户输入的情况，您可以尝试[ginput](http://www.mathworks.com/help/techdoc/ref/ginput.html)对于第二种情况，如果您正在显示图像，请使用[imtool](http://www.mathworks.com/help/toolbox/images/ref/imtool.html)。它将向您显示像素位置和像素值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:49:49.983

使用`Data Cursor`工具栏中的 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-19T08:40:15.523

这个问题已有 4 年历史，但完整的答案可能对某人有帮助，所以这里......

绘制数据：

```
plot(rand(5,1),'.b','MarkerSize',40) % Large blue dots just to make it clear
hold on 
```

创建一个数据游标对象：

```
dcm_obj = datacursormode(gcf); 
```

为数据游标设置自定义更新函数：

```
set(dcm_obj,'UpdateFcn',@dcfun) 
```

然后定义函数：

```
function txt = dcfun(~,event_obj)
pos = event_obj.Position;
delete(findall(gcf,'Tag','DEL'))
plot(gca,pos(1),pos(2),'.r','Markersize',40,'Tag','DEL')
txt = cell(2,1);
txt{1} = ['x: ',num2str(pos(1))];
txt{2} = ['y: ',num2str(pos(2))]; 
```

现在只需单击工具栏中的数据光标工具，然后单击一个数据点。

[![在此处输入图像描述](../Images/40e62ae7fa856905f7348fc623ce1f82.png)](https://i.stack.imgur.com/815kJ.gif)

# c# - 已添加具有相同密钥的项目。以下方式正确吗？

> ID：11438893
> 
> 赞同：1
> 
> 时间：2012-07-11T18:18:41.873
> 
> 标签：c#, multithreading, nhibernate, fluent-nhibernate, sessionfactory

我知道这是一个重复的帖子，但我的上下文不同。我从[这里](https://stackoverflow.com/a/5353282/1518640)解决了这个问题。我的一些变化如下：

```
 private static Mutex _sessionMutex = new Mutex();
    public void OpenMySessionFactory(string conStr)
        {
            try
            {
                _sessionMutex.WaitOne();
                config = Fluently.Configure()
                .Database(MySQLConfiguration.Standard.ConnectionString(conStr))
                .Mappings(m => m.FluentMappings.AddFromAssembly(System.Reflection.Assembly.GetExecutingAssembly()))
                .BuildConfiguration();
                sessionFactory = config.BuildSessionFactory();
                _sessionMutex.ReleaseMutex();
            }
            catch (Exception)
            {
                throw;
            }
        } 
```

如果我按照上述方式实施，会有什么影响吗？

错误背后的原因：

> 已添加具有相同密钥的项目

当我双击任何必须使用 Fluent NHibernate 进行数据访问的按钮时，就会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:19:48.143

请注意，如果确实发生了异常，您将永远不会解锁互斥锁（控件将跳转到`catch`块并跳过解锁）。使用`finally`块来执行此操作：

```
public void OpenMySessionFactory(string conStr)
{
    _sessionMutex.WaitOne();
    try
    {
        config = Fluently.Configure()
        .Database(MySQLConfiguration.Standard.ConnectionString(conStr))
        .Mappings(m => m.FluentMappings.AddFromAssembly(System.Reflection.Assembly.GetExecutingAssembly()))
        .BuildConfiguration();
        sessionFactory = config.BuildSessionFactory();
    }
    catch (Exception)
    {
        throw;
    }
    finally
    {
        _sessionMutex.ReleaseMutex();
    }
} 
```

# mysql - MySQL - 左连接正式优先于右连接？

> ID：11438896
> 
> 赞同：17
> 
> 时间：2012-07-11T18:18:52.840
> 
> 标签：mysql

在[joins 的 MySQL 文档中](http://dev.mysql.com/doc/refman/5.0/en/join.html)，一位同事今天向我指出了这个 gem：

> `RIGHT JOIN`类似于`LEFT JOIN`. 为了保持代码跨数据库的可移植性，建议您使用`LEFT JOIN`而不是`RIGHT JOIN`.

有人能对此有所了解吗？这让我觉得这可能是过去时代的残余——也许文档中的意思是说“为了保持代码与早期版本的 MySQL 反向兼容......”

是否有不支持的现代 RDBMS `RIGHT JOIN`？我知道这`RIGHT JOIN`是语法糖`LEFT JOIN`，任何`RIGHT JOIN`都可以表示为 a `LEFT JOIN`，但是如果您朝那个方向编写查询，有时可读性会受到影响。

这个建议仍然现代有效吗？是否有令人信服的理由来避免`RIGHT JOIN`？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-11T19:08:27.873

至少有一个 SQL 引擎不支持`RIGHT JOIN`：[SQLite](http://www.sqlite.org/omitted.html)。也许这就是兼容性被列为关注点的原因。可能还有其他 SQL 引擎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:50:28.147

因此，RIGHT 和 LEFT JOIN 在典型的 SQL 引擎中执行相同的操作。LEFT JOIN 表`a`到表`b`返回`a`存在`b`或不存在的所有内容。RIGHT JOIN 表`a`到表`b`返回`b`存在`a`或不存在的所有内容。在优化查询之前，LEFT 和 RIGHT 关键字仅指要对哪个表执行的操作。MySQL 优化器将始终规范化查询并使 JOIN 有效地成为 LEFT JOIN。因此，编写查询以使用 LEFT JOIN 而不是 RIGHT 将在优化器中花费更少。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-11T19:03:35.523

这是一个明智的约定，因此应该首选它，除非您想向以后可能阅读它的任何人（重要的是，包括您自己）表达一些独特或与众不同的东西。

您的问题是有效的，但要完成它需要：

1) RIGHT JOIN 不运行或运行有显着差异的反例

-或者-

2）证明不存在这种情况：1

我认为这些将很难得到。您认为该建议可能已被弃用，因为它的写作是可能的。这也可能是由于 MySQL 支持多个数据库后端的一些问题。也许其中之一是 RIGHT JOIN 不宽容？

# ios - UIPageView - 卷曲很慢

> ID：11438897
> 
> 赞同：0
> 
> 时间：2012-07-11T18:18:53.227
> 
> 标签：ios, ios5, uiview, uiimage, page-curl

我有一个包含大图像的杂志应用程序。当我想翻页时，在翻页之前会有很大的延迟。所以我尝试缓存上一页、当前页和下一页但没有效果。我想我正在添加 viewControllers 但那些只是获取图像文件而不绘图。有什么方法可以在翻页之前在背景中绘制图像？有一些代码：

杂志视图控制器：

```
- (void)loadViews {
NSInteger pagesCount = [_pages count];

if (currentPage == 0) currentPage = 1;
if ([[NSThread currentThread] isCancelled]) return;

if (_curPage == nil) {
    _curPage = [[PageViewController alloc] init];
    PageView *pageView = [[PageView alloc] initWithFrame:self.view.bounds];

    [pageView setPages:_pages];
    [pageView setPage:currentPage];
    [pageView setMagazineID:_magazineID];
    [pageView buildFrames];
    //[pageView setHidden:YES];

    [_curPage setView:pageView];
    //[_flipper addSubview:magazineView];

    [pageView release];
    [[NSNotificationCenter defaultCenter] postNotificationName:kPageLoadedNotification object:nil];
}

if (_prevPage == nil) {
    if (currentPage > 1) {
        _prevPage = [[PageViewController alloc] init];
        PageView *pageView = [[PageView alloc] initWithFrame:self.view.bounds];

        [pageView setPages:_pages];
        [pageView setPage:currentPage - 1];
        [pageView setMagazineID:_magazineID];
        [pageView buildFrames];

        [_prevPage setView:pageView];
        //[_pageViewController.view addSubview:_prevPage.view];

        [pageView release];
        [[NSNotificationCenter defaultCenter] postNotificationName:kPageLoadedNotification object:nil];
    }
}

if (_nextPage == nil) {
    if (currentPage + 1 <= pagesCount) {
        _nextPage = [[PageViewController alloc] init];
        PageView *pageView = [[PageView alloc] initWithFrame:self.view.bounds];

        [pageView setPages:_pages];
        [pageView setPage:currentPage + 1];
        [pageView setMagazineID:_magazineID];
        [pageView buildFrames];

        [_nextPage setView:pageView];
        //[_pageViewController.view addSubview:_nextPage.view];

        [pageView release];
        [[NSNotificationCenter defaultCenter] postNotificationName:kPageLoadedNotification object:nil];
    }
} 
```

方法“buildFrame”只是制作图像的位置和矩形并执行“[self addSubView:image]”。（自我 = 页面视图）

图片绘制：

```
- (void)drawRect:(CGRect)rect {
   [super drawRect:rect];

   if (_image != nil) [_image drawInRect:rect];
} 
```

我知道一种方法该怎么做，但我认为这是不好的方法。只是隐藏上一个和下一个视图，当我开始将设置视图变为可见时。那么有没有其他方法可以加载图像并加快转弯速度呢？谢谢回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:44:08.990

我有解决方案...加载上一个和下一个视图，将它们添加到父视图并使用方法 sendSubviewToBack 将它们发送回来。惊人的！

# css - 使中心对齐文本的边框底部跨度宽度

> ID：11438898
> 
> 赞同：3
> 
> 时间：2012-07-11T18:19:08.647
> 
> 标签：css, html, center

我希望我的`p`文本下方有一条跨越文本宽度的虚线，我也希望`p`水平居中。

文本永远不会超过一行，但该行的长度会有所不同（如果它完全固定，我可以很容易地解决这个问题）。

我无法完全弄清楚解决方案。我有以下结构：

```
<div class="container">

    <div class="content">

        <p>This is the title</p>

    </div>

</div> 
```

在我的 CSS 中，我有这样的东西：

```
 .container      {
                    width: 650px;
                    height: 100px;
                    }

    .content    {
                    text-align: center;
                    text-transform: uppercase;
                    font-size: 26px;
                    color: #4D4D4D;
                    }

        p           {
                    border-bottom: #808080;
                    border-bottom-width: thin;
                    border-bottom-style: dotted;            
                    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T18:28:27.877

这里：http: [//jsfiddle.net/DqFp7/](http://jsfiddle.net/DqFp7/)

**HTML**

```
<div class="container">

    <div class="content">

        <p>This is the title</p>

    </div>

</div> 
```

**CSS**

```
.container {
    width: 650px;
    height: 100px;
}

.content {
    text-align: center;
    text-transform: uppercase;
    font-size: 26px;
    color: #4D4D4D;
}

p {
    border-bottom: #808080;
    border-bottom-width: thin;
    border-bottom-style: dotted;  
    display:inline;    
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-22T18:39:37.563

您可以将`text-decoration`Couples 与 结合使用`text-decoration-style`，尽管对此功能的支持仍然有些差（2018 年 8 月：Safari 和 Edge 中不支持）。

它在[规范](https://drafts.csswg.org/css-text-decor-3/#text-decoration-style)中，因此最终会得到支持。

.

**例子：**

```
.container,
.content {
  width: 100%;
}

.content p {
  font-size: 30px;
  text-decoration: underline;
  text-decoration-style: dotted;
  text-decoration-color: red;
  text-align: center;
}
```

```
<div class="container">
  <div class="content">
    <p>This is the title</p>
  </div>
</div>
```

# php - 如何修复下拉菜单？所有选择显示“>”

> ID：11438899
> 
> 赞同：0
> 
> 时间：2012-07-11T18:19:09.423
> 
> 标签：php, drop-down-menu

这是我的下拉菜单的代码。在一台服务器上，会显示相应的数字。但另一方面，我在下拉菜单中看到每个选项的“>”。我猜这与 php.ini 文件有关，但我不确定......

```
<?php
// connect to the database
require 'connect.php';

// -------------------------------------------------------------------------------------------------------
// Drop Down Menu to choose Start and End dates
$startyear = ""; 
$startmonth = "";
$startday = "";
$endyear = "";
$endmonth = "";
$endday = "";

// Array of values for form
$year  = range(1998,2012);
$month = range(01,12);
$day   = range(01,31);

if($_SERVER['REQUEST_METHOD']=='POST')
{
    foreach($_POST as $key=>$value)
    {
        if(is_numeric($value))
        {
            $$key = $value;
        }
    }
}

?>

<form name='update' action='' method='POST'>
Start: <select name='startyear'>
    <?php foreach(array_reverse($year) as $y):?>
    <option value="<?=$y?>"<?=((isset($startyear) && $startyear == $y)?' selected':null)?>><?=$y?></option>
    <?php endforeach;?>
</select>
<select name='startmonth'>
    <?php foreach($month as $m): $m = str_pad($m, 2, "0", STR_PAD_LEFT);?>
    <option value="<?=$m;?>"<?=((isset($startmonth) && $startmonth == $m)?' selected':null)?>><?=$m;?></option>
    <?php endforeach;?>
</select>
    <select name='startday'>
    <?php foreach($day as $d): $d = str_pad($d, 2, "0", STR_PAD_LEFT);?>
    <option value="<?=$d;?>"<?=((isset($startday) && $startday == $d)?' selected':null)?>><?=$d;?></option>
    <?php endforeach;?>
</select>
<br>
End: <select name='endyear'>
    <?php foreach(array_reverse($year) as $y):?>
    <option value="<?=$y?>"<?=((isset($endyear) && $endyear == $y)?' selected':null)?>><?=$y?></option>
    <?php endforeach;?>
</select>
<select name='endmonth'>
    <?php foreach($month as $m): $m = str_pad($m, 2, "0", STR_PAD_LEFT);?>
    <option value="<?=$m;?>"<?=((isset($endmonth) && $endmonth == $m)?' selected':null)?>><?=$m;?></option>
    <?php endforeach;?>
</select>
    <select name='endday'>
    <?php foreach($day as $d): $d = str_pad($d, 2, "0", STR_PAD_LEFT);?>
    <option value="<?=$d;?>"<?=((isset($endday) && $endday == $d)?' selected':null)?>><?=$d;?></option>
    <?php endforeach;?>
</select>
<input type='submit' value='View'/>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:21:14.497

尝试将短 PHP 标签换成长标签。

`<?=`成为`<?php echo` 并 `<?`成为`<?php`

一些配置允许您使用简写形式；所有 PHP 配置都允许您使用较长的配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:22:07.590

改变：

```
selected':null)?>><?=$y?></option> 
```

到

```
selected':null)?><?=$y?></option> 
```

有太多`>`

# php - 使用 Wordpress 3.4.1 的自定义页面

> ID：11438901
> 
> 赞同：2
> 
> 时间：2012-07-11T18:19:16.893
> 
> 标签：php, wordpress

我在尝试在我的网站上显示自定义页面时遇到了一些问题。我想要的是创建一个页面，客户可以在其中编辑 Wordpress 中的内容。当我使用 Wordpress“添加新页面”添加页面时，它不会显示，但如果我在 .php 中创建具有相同内容的页面，它可以正常工作。这就是我所做的：

首先，我使用以下代码创建了一个名为 lefthome.php 的空白 .php 模板：

```
 <?php
/*
Template Name: Left Template
*/
?>

        <?php get_template_part( 'loop', 'page' ); ?> 
```

然后我进入 Wordpress，点击页面 > 添加新的。我给我的页面一个标题，并添加了我想在页面上显示的内容。然后从页面属性中的模板选项中选择我之前创建的模板（左侧模板）并单击更新。

我希望这个模板出现在主页上，所以我尝试将它添加到我使用以下代码创建的主页模板中：

```
 <?php
/*
Template Name: Home
*/

get_header(); ?>

<?php include (TEMPLATEPATH . '/slider.php'); ?>

<div id="content">
    <?php include (TEMPLATEPATH . '/lefthome.php'); ?>
</div>

        <?php get_template_part( 'loop', 'page' ); ?>

<?php get_footer(); ?> 
```

页眉、slider.php 和页脚都显示正常。lefthome.php 的内容没有出现。我不知道如何让它显示。我让它显示的唯一方法是将内容粘贴到 lefthome.php 模板中。不过我不想这样做，因为客户端将无法自己编辑内容。

我希望有一个人可以帮助我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:26:29.437

您将无法仅通过直接调用其模板文件来显示页面的内容。您需要查询页面本身。就此而言，您已经分配给它的模板不再重要。

```
<?php
/*
Template Name: Home
*/

get_header(); ?>

<?php include (TEMPLATEPATH . '/slider.php'); ?>

<div id="content">
<?php
global $post;
$page_id =5; // 5 is the id of the page we want to present with Left Template.
$post = get_post( $page_id );

setup_postdata( $post );
include locate_template( 'lefthome.php' );
wp_reset_postdata(); // we are done with that. reset the query so the rest don't mess up
?>
</div>

        <?php get_template_part( 'loop', 'page' ); ?>

<?php get_footer(); ?> 
```

# cordova - “看起来我们遇到了一些服务器问题” Dreamweaver phonegap build

> ID：11438905
> 
> 赞同：1
> 
> 时间：2012-07-11T18:19:28.560
> 
> 标签：cordova, dreamweaver

我正在使用 phonegap 构建面板使用 dreamweaver CS 6 开发一个项目。

构建服务说没有项目设置文件，我可以选择“创建为新项目”。当我这样做并按继续时，构建服务会在后台运行一段时间，然后发出警报“看起来我们遇到了一些服务器问题”。

自从我安装 DW CS 6 以来，我一直遇到这个问题，但有一次设法让它工作。我看不出当时和现在有什么不同。

我的项目没有超过 10 mb 的大小限制（它是 7mb）。

init_status.txt 日志文件包含以下内容：

```
{"message": "Failed to upload application. Unable to create zip file. Reason: null","error": 404} 
```

但我不知道该怎么做，或者它是否与我的问题有关。

似乎其他人也遇到了同样的问题，这可能与未解决的问题有关。但正如我所说，我过去能够让它发挥作用。

任何指向正确方向的指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:25:55.527

我也有这个问题。如果您在 build.phonegap.com 登录您的帐户并且在应用程序部分中只有 1 个项目，请转到该应用程序设置并取消选中“只有经过批准的合作者（如下所列）可以下载此应用程序”的复选标记。然后从dreamweaver 重建您的应用程序，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T22:50:03.277

同样在这里。我必须访问实际的 PhoneGap 构建网站 (https://build.phonegap.com) 并手动设置我的第一个应用程序。

在输入我的第一组 (BlackBerry) 密钥和压缩的项目文件后，我能够跨平台生成应用程序 - 我还能够从 Dreamweaver 中选择项目。现在我可以访问 DW PhoneGap Build Service 菜单，就像[视频](http://tv.adobe.com/watch/digital-design-cs6/using-the-phonegap-build-panel-in-dreamweaver-cs6-to-build-native-applications-for-android-and-ios-devices/)显示的那样。

但无法重建项目 - 不同的错误消息：

```
Error finding app information. The connection may have been lost 
```

似乎 Adob​​e 需要进行一些故障排除；）

# java - Java 安全访问控制异常

> ID：11438907
> 
> 赞同：1
> 
> 时间：2012-07-11T18:19:33.927
> 
> 标签：java, applet, appletviewer

我正在尝试执行这个程序， http: [//java.sun.com/developer/technicalArticles/ThirdParty/WebCrawler/WebCrawler.java](http://java.sun.com/developer/technicalArticles/ThirdParty/WebCrawler/WebCrawler.java) 在我参考这个页面后，程序编译没有任何错误， [http://www.velocityreviews.com /forums/t146972-web-crawler.html](http://www.velocityreviews.com/forums/t146972-web-crawler.html)

但是在使用命令“appletviewer WebCrawler.html”执行时，我得到了这个异常..

```
Exception in thread "Thread-4" 
java.security.AccessControlException:access denied(java.net.SocketPermission java.sun.com:80 connect,resolve)

at java.security.AccessControlContext.checkPermission(AccessControlContext.java:323)

at java.security.AccessController.checkPermission(AccessController.java:546)

at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)

at java.lang.SecurityManager.checkConnect(SecurityManager.java:1034)

at sun.net.www.http.HttpClient.openServer(HttpClient.java:527)

at sun.net.www.http.HttpClient.<init>(HttpClient.java:233)

at sun.net.www.http.HttpClient.New(HttpClient.java:306)

at sun.net.www.http.HttpClient.New(HttpClient.java:323)

at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:860)

at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:801)

at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:726)

at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1049)

at java.net.URL.openStream(URL.java:1010)

at WebCrawler.robotSafe(WebCrawler.java:139)

at WebCrawler.run(WebCrawler.java:235)

at java.lang.Thread.run(Thread.java:619) 
```

我如何使它工作。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:31:25.643

默认情况下，小程序只能连接到它所在的同一服务器+端口。您可以执行以下操作之一：

1.  将应用程序转换为应用程序，消除安全限制
2.  使用受信任/签名的小程序

您还可以查看为小程序配置跨域，请参阅：

[http://weblogs.java.net/blog/2008/05/28/java-doodle-crossdomainxml-support](http://weblogs.java.net/blog/2008/05/28/java-doodle-crossdomainxml-support)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T20:02:22.843

自签名小程序非常简单（您可以免费这样做）。如果您不签署小程序，您将只能获得最低限度的安全访问权限，并且不会授予对套接字的访问权限。

简单的 3 步指南在这里：

[http://www.narendranaidu.com/2007/11/3-easy-steps-to-self-sign-applet-jar.html](http://www.narendranaidu.com/2007/11/3-easy-steps-to-self-sign-applet-jar.html)

或更深入的解释：http: [//java.sun.com/developer/onlineTraining/Programming/JDCBook/signed.html](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/signed.html)

# php - 为什么这个数组不能 array_sum()？

> ID：11438909
> 
> 赞同：0
> 
> 时间：2012-07-11T18:19:37.247
> 
> 标签：php, arrays, sum

```
>Array
>(
>>    [valor_pago_total] => Array
>>>        (
>>>>            [0] => 14.750.861,55
>>>>            [1] => 20.828.923,13
>>>>            [2] => 18.431.681,20
>>>>            [3] => 43.403.452,99
>>>>            [4] => 19.177.285,19
>>>>            [5] => 30.213.514,73
>>>>            [6] => 5.296.079,04
>>>>            [7] => 875.873,76
>>>>            [8] => 254.810,00
>>>)
>>) 
```

为什么我执行 array_sum($valor_pago_total)，我得到了错误的结果。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:34:35.680

通过用空替换它们来摆脱句号，并将逗号变成句号以进行[`array_sum()`](http://php.net/array_sum)工作。然后使用[`number_format()`](http://php.net/number_format)将其转换回您的格式化结果。

请注意，结果将需要 64 位机器。

```
array_walk( $array['valor_pago_total'], function( &$el) { $el = str_replace( ',', '.', str_replace( '.', '', $el)); });
$sum = array_sum( $array['valor_pago_total']);
var_dump( $sum, number_format( $sum, 2, ',', '.')); 
```

这[输出](http://viper-7.com/z0DxzK)：

```
float(153232481.59)
string(14) "153.232.481,59" 
```

# html - 如何在不使用表格的情况下并排显示项目？

> ID：11438910
> 
> 赞同：19
> 
> 时间：2012-07-11T18:19:40.910
> 
> 标签：html, css

例如，您想在文本旁边显示图像，通常我会这样做：

```
<table>
    <tr>
        <td><img ...></td>
        <td>text</td>
    </tr>
</table> 
```

有更好的选择吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-11T18:29:35.270

您应该将它们*漂浮在已**清除*的容器内。

例子：

[https://jsfiddle.net/W74Z8/504/](https://jsfiddle.net/W74Z8/504/)

[![在此处输入图像描述](../Images/53080072a7454ee1231330f03d4cf67b.png)](https://i.stack.imgur.com/tkqBR.jpg)

一个干净的实现是“clearfix hack”。这是[Nicolas Gallagher](http://nicolasgallagher.com/micro-clearfix-hack/)的版本：

```
/**
 * For modern browsers
 * 1\. The space content is one way to avoid an Opera bug when the
 *    contenteditable attribute is included anywhere else in the document.
 *    Otherwise it causes space to appear at the top and bottom of elements
 *    that are clearfixed.
 * 2\. The use of `table` rather than `block` is only necessary if using
 *    `:before` to contain the top-margins of child elements.
 */
.clearfix:before,
.clearfix:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.clearfix:after {
    clear: both;
}

/**
 * For IE 6/7 only
 * Include this rule to trigger hasLayout and contain floats.
 */
.clearfix {
    *zoom: 1;
}
​ 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-11T18:34:16.507

是的，div 和 CSS 通常是放置 HTML 的更好、更简单的方法。有许多不同的方法可以做到这一点，这一切都取决于上下文。

例如，如果您想在文本的右侧放置一个图像，您可以这样做：

```
<p style="width: 500px;">
<img src="image.png" style="float: right;" />
This is some text
</p> 
```

而如果你想并排显示多个项目，float 通常也是首选。例如：

```
<div>
  <img src="image1.png" style="float: left;" />
  <img src="image2.png" style="float: left;" />
  <img src="image3.png" style="float: left;" />
</div> 
```

只要您有水平空间，将这些图像浮动到同一侧就会彼此相邻放置。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-11-08T21:18:30.343

所有这些答案都可以追溯到 2016 年或更早...有一个新的网络标准使用`flex-boxes`. 一般来说`floats`，对于这些类型的问题现在是不赞成的。

**HTML**

```
<div class="image-txt-container">
  <img src="https://images4.alphacoders.com/206/thumb-350-20658.jpg">
  <h2>
    Text here
  </h2>
</div> 
```

**CSS**

```
.image-txt-container {
  display: flex;
  align-items: center;
  flex-direction: row;
} 
```

小提琴示例：[https ://jsfiddle.net/r8zgokeb/1/](https://jsfiddle.net/r8zgokeb/1/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-11T18:22:19.957

这些天 div 是新的规范

```
<div style="float:left"><img.. ></div>
<div style="float:right">text</div>
<div style="clear:both"/> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T18:23:18.600

怎么样`display:inline`？

```
<html>
      <img src='#' style='display:inline;'/>
      <p style='display:inline;'> Some text </p>
</html> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-18T07:19:47.633

通常我这样做：

```
<div>
   <p> 
       <img src='1.jpg' align='left' />
       Text Here
   <p>
</div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-11T18:31:57.510

这取决于您要做什么以及您要显示的数据/信息类型。通常，表格是为显示表格数据而保留的。

您的情况的替代方法是使用 css。一个简单的选择是浮动您的图像并给它一个边距：

```
<p>
    <img style="float: left; margin: 5px;" ... />
    Text goes here...
</p> 
```

这将导致文本环绕图像。如果您不希望文本环绕图像，请将文本放在单独的容器中：

```
<div>
    <img style="float: left; margin: ...;" ... />
    <p style="float: right;">Text goes here...</p>
</div> 
```

请注意，可能需要为段落标签分配宽度以显示您想要的方式。另请注意，对于出现在浮动元素下方的元素，您可能需要添加样式“clear:left;” （或明确：正确，或明确：两者）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-10T07:33:07.840

`negative margin`会有很大帮助的！

html DOM 如下所示：

```
<div class="main">
  <div class="main_body">Main content</div>
</div>
<div class="left">Left Images or something else</div> 
```

和CSS：

```
.main {
  float:left;
  width:100%;
}

.main_body{
  margin-left:210px;
  height:200px;
}
.left{
  float:left;
  width:200px;
  height:200px;
  margin-left:-100%;
} 
```

它的`main_body`意志响应，它可以帮助你！

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-09-13T13:37:03.587

尝试在标签中调用图像`<DIV>`，这将允许更流畅和更快的加载时间。请注意，因为这是背景图片，您也可以在`<DIV></DIV>`标签之间的图片上放置文本。这也适用于自定义商店/商店列表...发布一个很酷的“售罄！”覆盖，或任何你可能想要的。

这是图片/文本并排的版本，可用于博客文章和文章列表：

```
<div class="whatever_container">
<h2>Title/Header Here</h2>
 <div id="image-container-name"style="background-image:url('images/whatever-this-is-named.jpg');background color:#FFFFFF;height:75px;width:20%;float:left;margin:0px 25px 0px 5px;"></div>
<p>All of your text goes here next to the image.</p></div> 
```

# javascript - jQuery UI 布局插件 OVERFLOW 设置

> ID：11438912
> 
> 赞同：1
> 
> 时间：2012-07-11T18:19:49.837
> 
> 标签：javascript, jquery, css, jquery-plugins, jquery-ui-layout

[**提供了jsFiddle**](http://jsfiddle.net/jxTUw/14/)以便更好地说明。在这种情况下，我使用了两个插件： [jQuery UI 布局插件](http://layout.jquery-dev.net/index.cfm)和[Trent 日期时间选择器插件](http://trentrichardson.com/examples/timepicker/)。

弹出的日期时间选择器将被西窗格调整大小栏阻止。如果我设置 option `west__showOverflowOnHover: true`，滚动条将不起作用。我在[**这里**](http://layout.jquery-dev.net/documentation.cfm#Drop-Downs)按照溢出设置说明进行操作，但仍然没有通过。

或者这两个插件之间可能存在冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:29:52.470

您的问题是`z-index`，在此文件中`jquery-ui.css`搜索该类`.ui-datepicker`并添加如下属性：

```
.ui-datepicker {
   width: 17em;
   padding: .2em .2em 0;
   z-index: 100 !important;
} 
```

在我覆盖课程的那一刻，[你可以在这里查看](http://jsfiddle.net/luissanchezm86/jxTUw/15/)

希望能帮助到你！

# eclipse - Eclipse --launcher.openFile 不打开文件

> ID：11438914
> 
> 赞同：4
> 
> 时间：2012-07-11T18:19:56.507
> 
> 标签：eclipse, command-line, command-line-arguments

我一直在尝试从正在运行的 Eclipse 会话中的命令行打开一个文件。根据[文档](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fmisc%2Fruntime-options.html)，我应该能够做到

```
eclipse --launcher.openFile myfilename 
```

但是，当我这样做时，会出现很长的停顿，然后 Eclipse 会尝试启动一个新会话。它给了我一条错误消息，指出工作区不可用，然后让我选择一个新的工作区。

如何从命令行在*当前运行的*Eclipse 会话中打开文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:50:19.607

从 Eclipse Helios (3.6) 开始，您不需要特殊的命令行参数即可从 OS 文件资源管理器或命令行打开文件（请参阅[https://bugs.eclipse.org/bugs/show_bug.cgi?id=4922](https://bugs.eclipse.org/bugs/show_bug.cgi?id=4922)） . 我认为您应该能够做到`eclipse myfile.java`（只要您将 .java 文件与 Eclipse 关联）。

# clojure - 通过 Clojure 透视数据

> ID：11438918
> 
> 赞同：1
> 
> 时间：2012-07-11T18:20:21.253
> 
> 标签：clojure

我有一组从具有以下数据布局的数据库返回的地图

```
[{:date "2012-6-6" :region "US" :status 1}
 {:date "2012-6-10" :region "UK" :status 2}
 {:date "2012-6-10" :region "US" :status 1}
 {:date "2012-6-11" :region "UK" :status 3}] 
```

我想旋转/转置数据，以便我得到

```
[{:date "2012-6-6" :US 1 :UK 0}
 {:date "2012-6-10" :US 1 :UK 2}
 {:date "2012-6-11" :US 0 :UK 3}] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T16:31:49.357

以下是您可以*在描述问题时专门*解决此问题的一种方法 - 如中所示，没有任何普遍性：

```
(def data
  [{:date "2012-6-6" :region "US" :status 1}
   {:date "2012-6-10" :region "UK" :status 2}
   {:date "2012-6-10" :region "US" :status 1}
   {:date "2012-6-11" :region "UK" :status 3}]

=> (map (fn [[date data-points]]
          (apply assoc {:date date}
                 (mapcat (juxt (comp keyword :region)
                               :status)
                         data-points)))
        (group-by :date
                  data)))
=> ({:US 1, :date "2012-6-6"}
    {:US 1, :UK 2, :date "2012-6-10"}
    {:UK 3, :date "2012-6-11"}) 
```

它的工作原理是按日期对数据进行分组，然后映射一个函数（我将在几秒钟内讨论该函数）。`group-by`通过在元素上调用某个函数并将对该函数具有相同返回值的元素进行分组，从而对序列中的元素进行分组。它制作了一个哈希映射，其中每个唯一的返回值都是一个键，映射中的每个值都是原始序列中返回该值的元素的序列。例如，以下是您的数据按日期分组的样子：

```
{"2012-6-6" [{:status 1
              :date "2012-6-6"
              :region "US"}]
 "2012-6-10" [{:status 2
               :date "2012-6-10"
               :region "UK"}
              {:status 1
               :date "2012-6-10"
               :region "US"}]
 "2012-6-11" [{:status 3
               :date "2012-6-11"
               :region "UK"}]} 
```

这就是 group-by 的工作原理。现在映射到这个分组数据的函数将绑定`date`到每个序列的第一个元素，以及每个序列`data-points`的第二个元素。我们将对`(apply assoc {:date date} ...)`数据点进行“重组”，其中 at 的值`:region`现在是 at 的值的关键字`:status`。“重组”是通过在每个数据点上调用[`mapcat`](http://clojuredocs.org/clojure_core/clojure.core/mapcat)一个`data-points`函数来实现的。[`juxt`](http://clojuredocs.org/clojure_core/clojure.core/juxt)`(comp keyword :region)``:status`

为了希望阐明这个`juxt`-ed 函数在做什么，我给出了如果它被写出来的等价物会是什么样子：

```
(defn above-juxted-fn
  [data-point]
  [(keyword (:region data-point))
   (:status data-point)]) 
```

现在，实际上这不是一个完整的解决方案，因为您似乎希望将所有可能的区域作为关键字包含在内，并且如果该区域和日期没有数据，则该值为零。但是，根据上述解决方案的返回结果，无论何时`(get region-key-here)`对任何数据点执行操作，都可以改为执行`(get region-key-here 0)`，因此如果查找未能找到给定的区域键，则默认值为 0。

另一件事：如果您正在处理大量数据，我不相信这会是一种特别快速的做事方式（也许其他人会在这里有更准确和详细的建议）。我写它的目的是为了简单和极简。

另外，正如我上面所说，它没有普遍性。至于一般性，我们可以通过将其成型为一个接受三个参数的函数来改变它：1）一个映射序列 2）一个分组键和 3）一个“new-key-at”“new-val-at”序列" 对，我称之为重组规范（例如，在上面，这将是`[:region :status]`）。开始：

```
(defn group-and-restructure
  [data grouping-key & restructuring-specs]
  (let [grouped-data (group-by grouping-key
                               data)
        restructuring-fn (apply juxt
                                (mapcat (fn [[k1 k2]]
                                          [(comp keyword k1)
                                           k2])
                                        restructuring-specs))]
    (map (fn [[grouping-k-value
               data-points]]
           (apply assoc {grouping-key grouping-k-value}
                  (mapcat restructuring-fn
                          data-points)))
         grouped-data)))

=> (group-and-restructure
     [{:date "2012-6-6" :region "US" :status 1}
      {:date "2012-6-10" :region "UK" :status 2}
      {:date "2012-6-10" :region "US" :status 1}
      {:date "2012-6-11" :region "UK" :status 3}]
     :date
     [:region :status])
=> ({:US 1, :date "2012-6-6"}
    {:US 1, :UK 2, :date "2012-6-10"}
    {:UK 3, :date "2012-6-11"}) 
```

这与上面的特定解决方案非常相似。主要区别在于重组规范被转换为一个函数，当`mapcat`-ted down 时`data-points`，将返回一个新的 key/val 对序列，以`assoc`-ed 到新的返回数据中。最好的部分是此功能允许您灵活地重组数据。例如，您可以按 分组`:region`和重组`[:date :status]`，如下所示：

```
=> (group-and-restructure
     [{:date "2012-6-6" :region "US" :status 1}
      {:date "2012-6-10" :region "UK" :status 2}
      {:date "2012-6-10" :region "US" :status 1}
      {:date "2012-6-11" :region "UK" :status 3}]
     :region
     [:date :status])
=> ({:2012-6-10 1, :2012-6-6 1, :region "US"}
    {:2012-6-11 3, :2012-6-10 2, :region "UK"}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T07:38:50.617

这不处理缺少区域需要零的情况。

```
(->> (group-by :date DB-DATA)
     (map (fn [[_ coll]]
            (apply merge (map (fn [{:keys [status date region]}]
                                {:date date (keyword region) status})
                              coll))))
     vec)
=> [{:date "2012-6-6", :US 1} {:US 1, :date "2012-6-10", :UK 2} {:date "2012-6-11", :UK 3}] 
```

# php - 选择所有列都有数据且不为空的记录

> ID：11438919
> 
> 赞同：9
> 
> 时间：2012-07-11T18:20:30.277
> 
> 标签：php, mysql, null, records

我有一个表，其中的记录在某些列中有空白/空数据，我想查找**所有**列的值不是空/空的记录，而无需创建非常长的 SQL 语句。

例如：

```
SELECT * FROM table
WHERE col1 IS NOT NULL AND col2 IS NOT NULL AND col3 IS NOT NULL AND... 
```

有什么办法可以缩短这个吗？或者有什么不同的方法（可能使用 SQL 过程？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T18:27:01.407

为了缩短它，我唯一要做的就是执行以下操作：

`SELECT * FROM table1 WHERE (val1 AND val2 AND val3 AND val4) IS NOT NULL`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T18:30:51.360

如果您有时只想查看所有列中包含数据的行，我建议您根据上面发布的查询[创建一个视图。](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)这样你就可以以更优雅、更短的方式与之交互。

视图是一种基于查询的“虚拟表”。如果您经常想要进行某种复杂的连接或过滤，那么使用视图可以大大简化您需要在其他地方编写的查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T18:35:34.183

总结所有列的[**ISNULL**](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_isnull)函数。

```
SELECT * FROM table1 WHERE
ISNULL(val1)+ISNULL(val2)+ISNULL(val3)+ISNULL(val4)=0; 
```

如果总计为 0，则所有列都有数据

如果您要测试的表只是有太多列需要检查并且输入起来很麻烦，请使用 INFORMATION_SCHEMA.COLUMN 为您雕刻查询。

我创建了一个名为 test.mytable 的表，如下所示：

```
mysql> show create table test.mytable\G
*************************** 1\. row ***************************
       Table: mytable
Create Table: CREATE TABLE `mytable` (
  `nid` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `vid` int(10) unsigned NOT NULL DEFAULT '0',
  `type` varchar(32) NOT NULL DEFAULT '',
  `language` varchar(12) NOT NULL DEFAULT '',
  `title` varchar(255) NOT NULL DEFAULT '',
  `uid` int(11) NOT NULL DEFAULT '0',
  `status` int(11) NOT NULL DEFAULT '1',
  `created` int(11) NOT NULL DEFAULT '0',
  `changed` int(11) NOT NULL DEFAULT '0',
  `comment` int(11) NOT NULL DEFAULT '0',
  `promote` int(11) NOT NULL DEFAULT '0',
  `moderate` int(11) NOT NULL DEFAULT '0',
  `sticky` int(11) NOT NULL DEFAULT '0',
  `tnid` int(10) unsigned NOT NULL DEFAULT '0',
  `translate` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`nid`),
  UNIQUE KEY `vid` (`vid`),
  KEY `node_changed` (`changed`),
  KEY `node_created` (`created`),
  KEY `node_moderate` (`moderate`),
  KEY `node_promote_status` (`promote`,`status`),
  KEY `node_status_type` (`status`,`type`,`nid`),
  KEY `node_title_type` (`title`,`type`(4)),
  KEY `node_type` (`type`(4)),
  KEY `uid` (`uid`),
  KEY `tnid` (`tnid`),
  KEY `translate` (`translate`)
) ENGINE=InnoDB AUTO_INCREMENT=73798 DEFAULT CHARSET=utf8
1 row in set (0.00 sec) 
```

您可以使用以下语句为该表生成我的查询

```
SET @MyDB = 'test';
SET @MyTB = 'mytable';
SELECT CONCAT(GROUP_CONCAT(CONCAT('ISNULL(',column_name,')') SEPARATOR '+'),'=0')
INTO @WhereClause FROM information_schema.columns
WHERE table_schema=@MyDB AND table_name=@MyTB;
SET @SQLStmt = CONCAT('SELECT * FROM ',@MyDB,'.',@MyTB,' WHERE ',@WhereClause);
SELECT @SQLStmt\G 
```

让我们运行这些语句，看看生成了什么 SQL

```
mysql> SET @MyDB = 'test';
Query OK, 0 rows affected (0.00 sec)

mysql> SET @MyTB = 'mytable';
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT CONCAT(GROUP_CONCAT(CONCAT('ISNULL(',column_name,')') SEPARATOR '+'),'=0')
    -> INTO @WhereClause FROM information_schema.columns
    -> WHERE table_schema=@MyDB AND table_name=@MyTB;
Query OK, 1 row affected (0.00 sec)

mysql> SET @SQLStmt = CONCAT('SELECT * FROM ',@MyDB,'.',@MyTB,' WHERE ',@WhereClause);
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT @SQLStmt\G
*************************** 1\. row ***************************
@SQLStmt: SELECT * FROM test.mytable WHERE ISNULL(nid)+ISNULL(vid)+ISNULL(type)+ISNULL(language)+ISNULL(title)+ISNULL(uid)+ISNULL(status)+ISNULL(created)+ISNULL(changed)+ISNULL(comment)+ISNULL(promote)+ISNULL(moderate)+ISNULL(sticky)+ISNULL(tnid)+ISNULL(translate)=0
1 row in set (0.00 sec)

mysql> 
```

从那里，只需使用执行 SQL`PREPARE`或将 SQL 传递给 PHP`mysql_query`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T09:43:53.843

```
SELECT *
FROM table1
WHERE CONCAT(val1, val2, val3, ...) is not Null 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T09:34:30.807

好吧，没有办法缩短它，但是下面的查询可以使它对任何表都通用。

```
DECLARE @tb NVARCHAR(255) = N'table1';

DECLARE @sql NVARCHAR(MAX) = N'SELECT * FROM ' + @tb
    + ' WHERE 1 = 1';

SELECT @sql += N' AND ' + QUOTENAME(name) + ' IS NOT NULL'
    FROM sys.columns 
    WHERE [object_id] = OBJECT_ID(@tb);

EXEC sp_executesql @sql; 
```

将“table1”替换为您要查询的表的名称，您将获得结果。

基本上，这个动态 sql 查询 sys.columns 表以获取属于该表的所有列并将`IS NOT NULL`条件附加到它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-18T16:07:15.023

```
SELECT * FROM YOUR_TABLE where ((select REPLACE(WM_CONCAT(distinct COLUMN_NAME),',',' IS NOT NULL AND ') from all_tab_columns where OWNER = 'OWNER_DEV' and TABLE_NAME = 'YOUR_TABLE' ||'is not null' )) is not null; 
```

一定要改变：

```
 >> 1- YOUR_TABLE   by   the name of your table                                             
  >> 2- OWNER_DEV    by   the name of your owner 
```

.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-11T18:46:32.510

仅添加如下列的另一种方法

```
SELECT * 
FROM table1 
WHERE (val1 + val2 + val3) IS NOT NULL 
```

如果任何列不是字符数据类型，则必须使用强制转换函数将该列转换为 char

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-11T18:30:49.917

另一种方法是

```
SELECT * FROM table1 WHERE val1 AND val2 AND val3 AND val4 is <> ''; 
```

这可能会稍微短一些。只要确保引号之间没有空格即可。

# virtualization - Xen 如何暂停虚拟机？

> ID：11438922
> 
> 赞同：1
> 
> 时间：2012-07-11T18:20:44.100
> 
> 标签：virtualization, kvm, xen

暂停：将 VM 状态存储在内存中

挂起：将 VM 状态存储在磁盘上

Xen 如何暂停实例？它只是暂停使用 Kill -STOP PID 命令管理 VM 的管理程序处理器，还是以其他方式完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:06:57.430

从以下输出可以看出，一旦 vm 暂停，管理 VM 的处理器就会进入“未知”状态。

```
[root@server my_vm]# xm vcpu-list my_vm
Name                                ID  VCPU   CPU State   Time(s) CPU Affinity
my_vm                               10     0    16   -b-       6.7 any cpu
my_vm                               10     1    14   -b-       6.8 any cpu
my_vm                               10     2    13   -b-       6.3 any cpu
my_vm                               10     3    22   -b-       5.9 any cpu
[root@server my_vm]# 
[root@server my_vm]# xm pause my_vm
[root@server my_vm]# xm vcpu-list my_vm
Name                                ID  VCPU   CPU State   Time(s) CPU Affinity
my_vm                               10     0     4   ---       6.8 any cpu
my_vm                               10     1    20   ---       6.8 any cpu
my_vm                               10     2    13   ---       6.4 any cpu
my_vm                               10     3     9   ---       5.9 any cpu 
```

此外，xen 管理程序进程不会被杀死。对于暂停的虚拟机，仍然可以看到它正在运行。无论 vm 是否暂停/取消暂停，进程“/usr/lib/xen/bin/qemu-dm”都会运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-19T01:11:19.447

暂停开始

```
xl create -p domUConfig 
```

暂停运行

```
xl pause instantID or instantName 
```

取消暂停domU

```
xl unpause instantID or instantName 
```

domU 关机

```
xl shutdown instantID or instantName 
```

domU 销毁

```
xl destroy instantID or instatName 
```

即时检查 `xl info`

# jquery - 如何将文本添加到 Fancybox（拇指标题除外）？

> ID：11438924
> 
> 赞同：0
> 
> 时间：2012-07-11T18:20:50.803
> 
> 标签：jquery, fancybox-2

我正在使用 Fancybox Jquery 插件，我想要文本和一个链接出现在弹出框中的图像下方。我知道我可以在缩略图的 title="" 中添加文本，但是还有其他添加文本的方法吗？我不喜欢当用户将鼠标悬停在拇指上时图像标题的可见性。

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:57:51.357

看看这个： http: [//jsfiddle.net/FWTZA/](http://jsfiddle.net/FWTZA/) 这个页面有一个指向它的链接[http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)

# c# - 需要 Windows chmod777 等效项

> ID：11438927
> 
> 赞同：3
> 
> 时间：2012-07-11T18:21:10.720
> 
> 标签：c#, java, windows, permissions

我需要对文件设置权限，以便系统上的所有用户都可以对其进行读写。这与安装程序有关，所以我不知道提前的用户名。安装程序以管理员身份运行，因此日志文件之后需要管理员访问权限。所以我需要在安装过程中明确设置权限，这样引用程序就不需要以管理员身份运行。

本质上，我正在寻找一种可以在 Windows 中为我提供相当于 chmod777 的解决方案。

我更喜欢适用于 Win7 和 WinXP 的解决方案。我想要一个通过命令行的解决方案，然后我可以编写脚本。或者使用 C# 或 java 的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T18:30:14.677

所有现代 Windows 操作系统都有一个名为“Everyone”的内置组，相当于 UNIX 的“其他”权限。即使是未登录的用户也是Everyone 组的一部分。从那里您可以授予“每个人”读取、写入和修改（“更改”）权限。如果你完全疯了，你可以给每个人“完全控制”，但这实际上允许他们获得所有权并更改权限，所以*请*不要这样做:)

要实际应用这些权限，您可以使用多种技术

*   从命令行，您可以运行`cacls <file name> /g Everyone:RWC`
*   在 .NET 中，您可以为 NT 帐户创建 ACL，`WellKnownSidType.WorldSid`然后将其应用于文件，如本文所示：[http ://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/c513ca26-9bf8 -4e39-a993-4ebf90aaece6/](http://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/c513ca26-9bf8-4e39-a993-4ebf90aaece6/)
*   您可以使用 WMI，按照[如何使用 WMI 更改文件权限？](https://stackoverflow.com/questions/4085757/how-to-change-file-permissions-with-wmi)（应该在任何支持 WMI 的语言中工作）
*   您可以使用本机 Win32 文件权限 API（通过 P/Invoke 或 JNI）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:25:18.190

在 C# 中，您可以获取 NTAccount 对象，并获取文件的 FileSecurity 对象，并使用 FileSecurity 对象的 AddAccessRule 方法设置权限。

有关更详细的说明，请参阅下面的 MSDN 论坛帖子。

[http://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/c513ca26-9bf8-4e39-a993-4ebf90aaece6/](http://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/c513ca26-9bf8-4e39-a993-4ebf90aaece6/)

# jquery - 将占位符恢复为原始值

> ID：11438933
> 
> 赞同：3
> 
> 时间：2012-07-11T18:21:22.897
> 
> 标签：jquery, html

我有一个评论框，并且在用户输入占位符并按 Enter 后无法恢复该占位符。

这是我的文本区域：

```
<textarea title="Write a comment..." itemID="@item.ID" class="comment" placeholder="Write a comment..." autocomplete="off" role="textbox" id="comment" style="margin-top:8px"></textarea> 
```

这是我尝试过的，但它不起作用：

```
 $(msgBox).val($(msgBox).attr('defaultValue')); 
```

和

```
 $(msgBox).val(''); 
```

不仅占位符没有被重置，而且回车仍然在这里。textarea 变为空白，光标位于第二行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:25:06.550

您应该使用`#`符号来选择元素`id`，还应该添加属性名称，请注意，在您的示例中没有`defaultValue`属性，并且选择器不返回任何内容，我添加了一个`blur`在 textarea 失去焦点后触发的事件，并且如果 teaxarea 的值为空，则将`placeholder`属性值设置为其值：

```
$('#comment').blur(function(){
   if ($.trim(this.value) == "") {
      $(this).val($(this).attr('placeholder'));
   }
}) 
```

# c# - C# - 为什么在向下转换之前需要向上转换为对象？

> ID：11438934
> 
> 赞同：3
> 
> 时间：2012-07-11T18:21:31.703
> 
> 标签：c#, inheritance, casting

在 C# 中，我处于环境提供的以下类型的场景中：

```
public interface IFoo {
}

public abstract class Base {
}

public class Derived : Base, IFoo {
}

public class Arbitrary {
    public Base GetBase() { }
} 
```

这是我写的除此之外的内容。请注意，我可以保证在我的代码*中*`Arbitrary.GetBase()`始终返回.*`Derived`*

 *```
public class Arbitrary2 : Arbitrary {
    public IFoo GetDerived() {
        return (IFoo)base.GetBase();
    }
} 
```

但是，此代码失败并显示消息“无法将类型 'Base' 转换为 'IFoo'”。

但是，如果我这样做，那么它会起作用：

```
public class Arbitrary2 : Arbitrary {
    public IFoo GetDerived() {
        Object baseAsObject = base.GetBase();
        return (IFoo)baseAsObject ;
    }
} 
```

为什么在我将它向下转换为 IFoo 之前必须向上转换为 Object？这两段代码在功能上是相同的，如果强制转换无效，后者会在运行时可靠地崩溃。我不明白为什么编译器会抱怨。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T18:25:24.437

你不需要这样做。您的代码应该可以正常工作。有关详细信息，请参阅此程序：

```
using System;

public interface IFoo { }

public abstract class Base { }

public class Derived : Base, IFoo { }

public class Arbitrary {
    public Base GetBase() { return new Derived(); }
}

public class Arbitrary2 : Arbitrary {
    public IFoo GetDerived() {
        return (IFoo)base.GetBase();
    }
}

class Program
{
    static void Main(string[] args)
    {
        Arbitrary2 test = new Arbitrary2();
        IFoo check = test.GetDerived();

        Console.WriteLine(check.GetType().Name);

        Console.WriteLine("Press key to exit:");
        Console.ReadKey();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:25:26.927

您的 GetBase() 方法返回 Base，它没有实现 IFoo。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T18:27:54.107

`Base`无法转换为，`IFoo`因为与以下`Base`内容没有任何关系`IFoo`：

```
public abstract class Base { } 
```

根据此声明，很可能`Base`存在不属于 type 的实例`IFoo`。事实上，基于这个声明，编译器绝对没有理由假设任何给定的实例`Base`都会实现`IFoo`.

*`Derived`*实现`IFoo`：

```
public class Derived : Base, IFoo { } 
```

但你不是返回 a `Derived`，而是返回 a `Base`。通过对它进行多态化，`Object`您实际上是在“欺骗”编译器。你告诉它你知道的比它多，它应该听你的。这可以很好，只要您*实际上*比编译器知道的更多。你知道编译器不知道的是每个实例都`Base`可以多态为`IFoo`.

在那种情况下，为什么不直接实施`IFoo`on `Base`？这样你就可以与编译器分享你的知识，每个人都会很高兴。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T18:28:09.233

编译器不允许显式转换的原因是`Base`它没有实现`IFoo`.

如果您可以*保证*将`GetBase()`始终返回 a `Derived`，那么您只需在演员`Derived`表之前插入`IFoo`演员表：

```
public class Arbitrary2 : Arbitrary {
    public IFoo GetDerived() {
        return (IFoo)(Derived)base.GetBase();
    }
} 
```

当然，如果您弄错了，这将在运行时抛出。或者，您可以使用`as`强制转换将在`null`失败时返回：

```
public class Arbitrary2 : Arbitrary {
    public IFoo GetDerived() {
        return base.GetBase() as IFoo;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T18:29:01.120

`Arbitrary.GetBase()`返回 的实例`Base`。 `Base`的层次结构不包含`IFoo.`

在运行时，是的，您的对象是一个`Derived`实例，但是基于编译器所知道的——类关系——没有连接，因此没有一种方法可以`Base`在`IFoo`您尝试使用第一种方法时进行转换。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-11T21:08:22.180

你就不能写吗

```
public class Arbitrary2 : Arbitrary {
    public IFoo GetDerived() {
        return (Derived)this.GetBase();
    }
} 
```

`Derived`编译器将看到and之间的连接`Base`，因此显式转换 to`Derived`应该是可以的。那么 any`Derived`肯定是`IFoo`，所以不需要额外的时间（转换是隐式的）。

不要使用`base.`关键字。要么说`this.`（如上）要么省略。

编辑：另外，您的原始代码**确实**编译了，但我的版本可能更容易阅读。*

# flash - 将名称添加到 Actionscript 饼图

> ID：11438936
> 
> 赞同：0
> 
> 时间：2012-07-11T18:21:44.230
> 
> 标签：flash, apache-flex, charts, pie-chart

在 actionscript 3.0 中，我想将显示名称附加到整个饼图组件。例如，如下图中每个图表下方添加的年份：

![图表](../Images/4f46e3e56307dea804c315adeab5462d.png)

到目前为止，我所能找到的只是（正如在生成此图像时所做的那样）添加一个包含图表名称的单独文本字段组件。我已经浏览了 Adob​​e 的文档，但找不到任何方法来添加与整个图表一起使用的名称/标签，但我想检查是否有人知道我错过的方法。

（添加一个单独的文本字段会起作用，似乎应该有一种方法可以将名称附加到图表上）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:41:39.927

据我所知，饼图没有这样的标题，我认为Flex框架中的其他图表也没有。标题应添加到图表组件的外部。这种方法将提供更大的灵活性来配置标题的外观、位置、交互性等。

# php - 对象方法创建其类的实例

> ID：11438940
> 
> 赞同：4
> 
> 时间：2012-07-11T18:21:58.043
> 
> 标签：php, oop

我想问一下让一个类创建 self 实例是否是一种好习惯，例如我有一个类：

```
class MyClass {
    private $data = "";
    private $children = array();

    public function add() {
        $x = new MyClass();
        // do something
        // $x->some_method('');
        $this->children[] = $x;
    }

    public function children() {
        return $this->children;
    }
} 
```

这样我可以使用一些 Tree 功能，但是可以吗，还是我必须做一些不同的事情？

例如创建一个父类**A**，具有**B类的孩子，并在****A**类中使用多维数组来存储孩子？

也许有人可以建议另一种方法来做到这一点？

如果有人有这方面的经验，请他提供他注意到的利弊。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T18:26:20.847

> 让类创建 self 实例是一种好习惯吗？

这取决于你*为什么*这样做。

如果您因为将其用作单例而使该类创建其自身的实例，那么您通常会与一些人对单例设计模式陷入困境。

另一方面，我发现以工厂设计模式为目的的自我实例化很精致。我确实建议针对这种特殊情况这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:29:24.560

一般来说，我不会。我唯一能看到这是合适的情况是你在 Singleton 中使用它，但情况似乎并非如此。

[这里](http://ralphschindler.com/2012/03/09/php-constructor-best-practices-and-the-prototype-pattern)有一篇关于构造函数最佳实践的文章。它非常激烈，但充满了很好的信息！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T18:29:53.043

无论哪种方式，我都不认为这是一个硬性规定。这取决于您要解决的问题空间。

也就是说，如果您正在创建像树这样的结构，并且该结构包含树类型的节点，那么根据主题应用程序中树的要求，树创建自身的实例可能是完全合理的。

您还会看到与 Singleton 设计模式中的示例大致相似的内容，您希望在其中创建对象的一个​​通用实例。

所以，我认为答案在于解决问题的适用性。希望这是有道理的。

# r - 在 r 的轴上使用表达式（绘图数学）

> ID：11438943
> 
> 赞同：3
> 
> 时间：2012-07-11T18:22:18.070
> 
> 标签：r, plotmath

这工作正常

```
data = c(1,3,2)
max_y <- max(data)
plot_colors <- c("blue")
plot(data, type="l", col=plot_colors[1], ylim=c(0,max_y), axes=FALSE, xlab=expression(e[3]))
axis(1, at=c(1,2,3),  lab=expression(e[1],e[2],e[3])  ) 
```

但我想从文件中读取 x 轴上的标签。我尝试了以下方法：

```
data = c(1,3,2)
names = vector("expression",3)
names[1] = "e[1]"
names[2] = "e[2]"
names[3] = "e[3]"
max_y <- max(data)
plot_colors <- c("blue")
plot(data, type="l", col=plot_colors[1], ylim=c(0,max_y), axes=FALSE, xlab=expression(e[3]))
axis(1, at=c(1,2,3),  lab=names  ) 
```

我试过替代品：

```
axis(1, at=c(1,2,3),  lab=substitute(expression(a), list(a="e[1],e[2],e[3]"))  ) 
```

但这也没有用。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:05:54.893

你想要的是`?parse`：

```
names = c('e[1]', 'e[2]', 'e[3]')
namesExp = do.call(c, lapply(names, function(x) parse(text = x)))
plot(c(1,3,2), type='l', col='blue', axes=FALSE, xlab = expression(e[3]))
axis(3, at=c(1,2,3), lab = names)
axis(1, at=c(1,2,3), lab = namesExp) 
```

上面，`lapply`返回一个表达式列表：

```
> print(lapply(names, function(x) parse(text = x)))
[[1]]
expression(e[1])
[[2]]
expression(e[2])
[[3]]
expression(e[3]) 
```

The `do.call` just non-recusrively unlists it (also can use `unlist(lapply(names, function(x) parse(text = x)), recursive = F)`):

```
> print(do.call(c, lapply(names, function(x) parse(text = x))))
expression(e[1], e[2], e[3]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:44:38.980

这就像罪恶一样丑陋，但它会为所欲为。可能有更好的方法。

```
data = c(1,3,2)
max_y <- max(data)
plot_colors <- c("blue")
plot(data, type="l", col=plot_colors[1], ylim=c(0,max_y),
     axes=FALSE, xlab=expression(e[3]))

labels <- "e[1],e[2],e[3]"
axis(1, at=c(1,2,3), lab=eval(parse(text=paste("expression(", labels, ")")))) 
```

让我们解压一下：

```
> paste("expression(", labels, ")")
[1] "expression( e[1],e[2],e[3] )"

> parse(text=paste("expression(", labels, ")"))
expression(expression( e[1],e[2],e[3] ))

> eval(parse(text=paste("expression(", labels, ")")))
expression(e[1], e[2], e[3]) 
```

不，你不能只是 parse `labels`，因为：

```
> parse(text=labels)
Error in parse(text = labels) : <text>:1:5: unexpected ','
1: e[1],
       ^ 
```

而且似乎是*正确*`eval`剥离外层的唯一方法。这种替代方法*似乎*有效：`expression`

 **```
> parse(text=paste("expression(", labels, ")"))[[1]]
expression(e[1], e[2], e[3]) 
```

但是将其传递给`axis`您会收到一条关于长度不匹配的莫名其妙的错误消息。我什么都没有。**

# jquery - 如何将多个拖动处理程序添加到 jQuery 对话框

> ID：11438946
> 
> 赞同：3
> 
> 时间：2012-07-11T18:22:28.317
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

好的，问题是，如何将多个处理程序添加到可拖动对话框。

```
_makeDraggable : function() {
    var self = this, options = this.options, heightBeforeDrag;
    this.uiDialog.draggable( {
        cancel : '.ui-dialog-content',
        handle : '.ui-dialog-titlebar',
        containment : 'document',
        start : function() {
        heightBeforeDrag = options.height;
        $(this).height($(this).height()).addClass("ui-dialog-dragging");
        (options.dragStart && options.dragStart.apply(self.element[0], arguments));
         },
         drag : function() {
        (options.drag && options.drag.apply(self.element[0], arguments));
         },
         stop : function() {
        $(this).removeClass("ui-dialog-dragging").height(heightBeforeDrag);
        (options.dragStop && options.dragStop.apply(self.element[0], arguments));
         }
    });
} 
```

所以我有这个功能，你可以看到它取消了 .ui-dialog-content 和 ads .ui-dialog-titlebar 作为处理程序：

```
this.uiDialog.draggable( {
    cancel : '.ui-dialog-content',
    handle : '.ui-dialog-titlebar',
    containment : 'document', 
```

不过，我想添加 .menu_inner 作为处理程序，想知道是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:17:18.073

`handle`接受一个 jquery 选择器作为它的参数。所以尝试使用多重选择器：[http ://api.jquery.com/multiple-selector/](http://api.jquery.com/multiple-selector/)

IE：`handle: '.ui-dialog-titlebar, .menu_inner'`

编辑：一个骇人听闻的解决方案是说类似的话`$('.ui-dialog-titlebar, .menu_inner').addClass('draggable-element')`，然后将句柄设置为该类

# .net - 当我使用没有 OleDBConnection 对象的 OleDbDataAdapter 对象时，为什么我的 .NET 2.0 应用程序在 .NET 4.0 下崩溃？

> ID：11438952
> 
> 赞同：5
> 
> 时间：2012-07-11T18:22:47.997
> 
> 标签：.net, excel, .net-4.0, ado.net

这是一个使用 VS 2005 编写的 .NET 2.0 应用程序。它在运行 .NET 2.0 的系统上运行良好，但在运行 .NET 4.0 的系统上会严重崩溃。这是代码的关键部分：

```
 string selectCommand1 = ....
      string connectionString1 = ....
      using (OleDbDataAdapter adapter = new OleDbDataAdapter(selectCommand1, connectionString1))
        {
            try
            {
                adapter.Fill(table1);
            }
            catch
            {
               MessageBox.Show("error");
            }
        }

      string selectCommand2 = ....
      string connectionString2 = ....
      using (OleDbDataAdapter adapter = new OleDbDataAdapter(selectCommand2, connectionString2))
        {
            try
            {
                adapter.Fill(table2);
            }
            catch
            {
               MessageBox.Show("error");
            }
        } 
```

同样，它在 .NET 2.0 下工作，在 .NET 4.0 下崩溃

ConnectionStrings 1 和 2 引用不同的 .xls 文件。

我发现解决这个问题的方法是声明和初始化一个 OleDbConnection 类型的字段变量，在 OleDbDataAdapter 的 using 语句之前设置 ConnectionString 属性和 Open() 它。如此：

```
 OleDbConnection connection = new OleDbConnection();

  .......

        connection.ConnectionString = connectionString1;
        connection.Open();
        using (OleDbDataAdapter adapter = new OleDbDataAdapter(selectCommand1, connection))
        {
            try
            {
                adapter.Fill(table1);
            }
            catch
            {
                MessageBox.Show("error");
            }
        }

        connection.Close();
        connection.ConnectionString = connectionString2;
        connection.Open();
        using (OleDbDataAdapter adapter = new OleDbDataAdapter(selectCommand2, connection))
        {
            try
            {
                adapter.Fill(table2);
            }
            catch
            {
                MessageBox.Show("error");
            }
        } 
```

很难相信这就是我的应用程序在 .NET 4.0 下硬崩溃（没有错误消息）的原因，但是在一次删除一行代码并一遍又一遍地重新编译后，我发现这是问题的原因.

我很高兴我解决了这个问题，但我对第一个代码不适用于 .NET 4.0 的事实并不满意。

有人可以解释一下为什么 .NET 4.0 不喜欢使用上述代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:32:06.213

问题是“应用程序验证程序”。卸载它解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T19:05:14.143

在您的原始代码（没有connection.open）中，您是否在调用之前初始化了表`adapter.Fill(table1)`？

```
 using (OleDbDataAdapter adapter = new OleDbDataAdapter(selectCommand1, connectionString1))
    {
        using (System.Data.DataTable table1 = new System.Data.DataTable()) {

            try
            {
                adapter.Fill(table1);
            }
            catch
            {
               MessageBox.Show("error");
            }
        }
    } 
```

# android - 一旦我离开活动并返回，按钮就会停止工作

> ID：11438953
> 
> 赞同：1
> 
> 时间：2012-07-11T18:22:56.180
> 
> 标签：android, android-button

我有一个活动列表，每个链接到自己的活动，并带有播放和暂停按钮。播放和暂停按钮起作用，我离开活动然后返回，一旦我返回，两个按钮都不起作用。

我不确定我必须做什么才能完成这项工作。

我是 Java/Eclipse 的新手。

```
com.zaknorris.brainhacker.v1;

public class attentionbuilder extends Activity{

MediaPlayer mpAttention;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.attentionbuilder);

    final MediaPlayer mpAttention = MediaPlayer.create(this,R.raw.attn);

    Button btnplay = (Button) findViewById(R.id.btnplay);

    btnplay.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            mpAttention.start();
            mpAttention.setLooping(true);

        }{;
    };{

    Button btnstop = (Button) findViewById(R.id.btnstop);

    btnstop.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            mpAttention.pause();                
        }}
        );
    };
    }); 

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:29:58.233

您失去了对括号和括号的控制：

```
 }{;
    };{
    ...
    }}
    );
};
}); 
```

我不确定按钮如何`btnstop`接收它的 OnClickListener，因为括号尝试在您的`btnplay`OnClickListener 中编译它...

试试这个：

```
 final MediaPlayer mpAttention = MediaPlayer.create(this,R.raw.attn);
    Button btnplay = (Button) findViewById(R.id.btnplay);
    btnplay.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            mpAttention.start();
            mpAttention.setLooping(true);
        }
    });

    Button btnstop = (Button) findViewById(R.id.btnstop);
    btnstop.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            mpAttention.pause();                
        }
    }); 
```

如果按钮仍然失去功能，请在您的 onPause()、onResume() 和 onDestroy() 方法中发布任何代码。

**添加**

您还定义`mpAttention`了两次，更改此行：

```
final MediaPlayer mpAttention = MediaPlayer.create(this,R.raw.attn); 
```

到：

```
mpAttention = MediaPlayer.create(this, R.raw.attn); 
```

**添加**

在Activity被销毁之前你需要释放MediaPlayer，否则你在重新创建Activity时会遇到麻烦。

```
@Override
protected void onDestroy() {
    mpAttention.release();
    super.onDestroy();
} 
```

如果您想在用户切换到另一个任务时自动暂停播放：电话、短信等：

```
@Override
protected void onPause() {
    if(mpAttention.isPlaying())
        mpAttention.pause();
    super.onPause();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:39:41.223

```
}{;
    };{ 
```

以上两个符号似乎是Java的新增功能……呵呵……开玩笑……我认为这只是一个粗心的错误……

这是正确的方式：

```
btnplay.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            mpAttention.start();
            mpAttention.setLooping(true);

        }
    }); 
```

# php - NFS 共享上 session.save_path 的超时非常大

> ID：11438957
> 
> 赞同：0
> 
> 时间：2012-07-11T18:23:03.010
> 
> 标签：php, nfs

我尝试将`session.save_path`PHP 中的指令设置为 NFS 挂载点。这行得通，会话文件被写入，但`session_start()`现在的调用需要整整 2 分钟（！）。

```
ini_set('session.save_path', '/mnt/nfs/tmp');
// or
session_save_path('/mnt/nfs/tmp'); 
```

这不是一个简单的 I/O 或网络问题（写入其他缓存文件只需要几毫秒），当我将指令设置为本地目录 ( `/tmp`) 时，页面加载时间恢复正常。

我必须将指令设置到另一个目录，因为服务器（Ubuntu）运行一个 cronjob 来进行垃圾收集，这不会受到`session.gc_maxlifetime`.

看起来这个错误[已经提交](https://bugs.php.net/bug.php?id=37944)，但没有后续行动。

**编辑**：所以问题是：如何在`session.save_path`没有异常大超时的情况下使用 NFS 挂载点？

# sql-server - 具有复杂逻辑的 SQL Server 更新

> ID：11438959
> 
> 赞同：-1
> 
> 时间：2012-07-11T18:23:21.657
> 
> 标签：sql-server, sql-server-2008

我有一个表需要更新为 Y 的值，但此更新是基于其他表的一些结果，我不知道如何执行此操作。

基本上，我需要完成以下检查

1.  我需要从需要更新的表中检查另一个表是否有 19 个匹配的行
2.  在那些字段之一不为空的匹配行中
3.  我还有另外两个表，我需要检查后一个表中是否存在记录，并确保后者中的匹配记录不包含其中一个字段中的“Y”值。

我的方法是使用 UNION，但我希望有人建议我这种方法是否正确，或者是否有更好的方法：

```
SELECT '1'
FROM t_A_Outbound
Where NOT HEADER IN (Select HEADER FROM t_B_Outbound)

UNION

SELECT '1'
FROM t_A_Outbound
Where HEADER IN (Select HEADER FROM t_B_Outbound
                 WHERE NOT INCOMPLETE ='Y')

UNION

Select '1'
From t_C_Outbound
Where ValueString = ''

UNION

Select '1'
From t_C_Outbound
WHERE Exists(Select Count(key), HEADER
             From t_C_Outbound IN (SELECT HEADER FROM table_that_needs_updating)
             Group By HEADER
             Having NOT Count(Cast(key as Int)) = 19) 
```

我想用 1 作为标志来说明这个值是否回来更新我需要更改的表中的字段。

谁能给我建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T21:28:12.280

我不太清楚工会为你做了什么。

您想要一个更新语句，例如：

```
update table
    set y = . . .
    where header in (Select header
                     From t_C_Outbound
                     Group By HEADER 
                     Having Count(*)= 19 and
                            count(KEY) = count(*)
                    ) and
          header in (select header
                     from other table
                     group by header
                     having sum(case when col = 'Y' then 1 else 0 end) = 0
                    ) 
```

等等。您没有足够清楚地描述问题，无法提供更详细的代码。

# ruby-on-rails-3 - Rails 查询不返回更新的记录

> ID：11438961
> 
> 赞同：0
> 
> 时间：2012-07-11T18:23:30.970
> 
> 标签：ruby-on-rails-3, activerecord

Rails 不会返回记录的更新版本。

我在模型中有两种方法，`submit_job(sig, label, jobtype)`用于将作业提交到将在后端处理的数据库，然后`poll_result(id)`每秒轮询提交的作业以查看它何时完成，然后将完成作业的结果返回到用户。

我的问题是该`poll_result(id)`方法永远不会获得更新的记录。

```
def self.poll_result(id)

    change = false
    Workbench.where("id = ?", id).each do |sig|         
        if sig.resultsready.to_i == 1
            change = true
        end
    end
    return change
end 
```

所有这一切都是从我的原始插入中一遍又一遍地返回结果，正如我看到的那样，当我让它打印出它正在访问的记录的结果时。我直接查看数据库，可以看到它正在调用正确的 ID，并且记录已更新。resultsready 在数据库中设置为 1，循环应该结束并且应该返回，但它只是陷入了无限循环。

我的假设是，它以某种方式获得了以某种方式缓存的旧/陈旧记录，但我终生无法弄清楚如何强制它获取新记录。

谢谢你，

-丹尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:31:05.297

使用已`Workbench.connection.clear_query_cache`修复的问题！具体来说，我在控制器级别添加了它，就在调用之前`Workbench.poll_result(id)`

# oracle - Oracle 选择与插入/选择 (11GR2)

> ID：11438963
> 
> 赞同：2
> 
> 时间：2012-07-11T18:23:37.853
> 
> 标签：oracle, optimization, oracle11g, query-optimization

因此，我正在编写一个使用大约 10 种不同选择填充表格的过程。作为该过程的一部分，我收集了一些东西，但是在执行 INSERT/SELECT 时，我有时会遇到一些不一致的行为。当我单独运行选择查询时，我会在 10 秒内得到结果（在我刷新缓冲区缓存和 shared_pool 之后），但是一旦我在插入部分上标记，需要 10 多分钟......

这是我清除表格后我正在做的事情......在插入上添加了“附加”提示，这似乎在本周早些时候有很大帮助，但现在它恢复到比平时更长的时间，但仅在执行插入时！！

```
--// Disable GL_JLOG_DETAILS INDEXES
Execute immediate 'alter index IDX_GLDTL1 unusable';
Execute immediate 'alter index IDX_GLDTL2 unusable';

--// SECTION 1
INSERT /*+ APPEND PARALLEL(6) */ INTO GL_JLOG_DETAILS ( MAT_SECTION    
                                                  ,JLOG_KEY        
                                                  ,SRC_CD          
                                                  ,SRC_KEY         
                                                  ,CASE_KEY        
                                                  ,CASE_MBR_KEY    
                                                  ,UNALLOC_ACCT_CD 
                                                  ,FDRT_KEY        
                                                  ,FDRT_TR_CD      
                                                  ,TR_CD           
                                                  ,TR_REF_NO       
                                                  ,STAT_CD         
                                                  ,FD_DESC_ID      
                                                  ,FD_NO           
                                                  ,FD_TYP_CD       
                                                  ,BKT_NO          
                                                  ,RVSL_CD         
                                                  ,CO_CD           
                                                  ,BEN_RPT_TYP_CD  
                                                  ,DB_CR_CD        
                                                  ,ACCT_NO         
                                                  ,SUB_ACCT_NO     
                                                  ,JRNL_AMT        
                                                  ,TDTL_AMT        
                                                  ,RVSL_ERROR      
                                                  ,RVSL_SAME_DAY   
                                                  ,TDTL_REF_KEY)    
          ---// SECTION 1 //--------
          Select  /*+ USE_NL(TMAP,TMOV,ACCT,SBNT,BNTP,FDRT) */ '1' MAT_SECTION,
           JLOG.JLOG_KEY,
           JLOG.SRC_CD,
           TDTL.TDTL_KEY AS SRC_KEY,
           TDTL.CASE_KEY,
           TDTL.CASE_MBR_KEY,
           TDTL.UNALLOC_ACCT_CD,
           TDTL.FDRT_KEY,
           FDRT.TR_CD FDRT_TR_CD,
           TDTL.TR_CD,
           TDTL.TR_REF_NO,
           TDTL.STAT_CD,
           TDTL.FD_DESC_ID,
           TDTL.FD_NO,
           FDDC.FD_TYP_CD,
           TDTL.BKT_NO,
           JLOG.RVSL_CD,
           BNTP.CO_CD,
           SBNT.BEN_RPT_TYP_CD,
           JLOG.DB_CR_CD,
           ACCT.ACCT_NO,
           ACCT.SUB_ACCT_NO,
           JLOG.JRNL_AMT,
           ABS (TDTL.AMT) AS TDTL_AMT,
           CASE
              WHEN TDTL.PROC_DT < TDTL.RVSL_CYC_DT AND TDTL.ORIG_INBS_KEY IS NULL
              THEN
                 1
              ELSE
                 0
             END  RVSL_ERROR,
           CASE
              WHEN  TDTL.PROC_DT = TDTL.RVSL_CYC_DT  AND NOT TDTL.TR_CD IN ('3002','3004','1501','1502','1503','1504','1505')
              THEN 1
              ELSE 0
           END  RVSL_SAME_DAY,
           TDTL.REF_KEY TDTL_REF_KEY
          from GL_JOURNAL_LOGS JLOG, 
               Transact_Details TDTL, 
               FUND_DESC FDDC, 
               FD_RATES FDRT, 
               BEN_TYPES BNTP, 
               SYS_BEN_TYPES SBNT, 
               LEDGER_ACCOUNTS ACCT, 
               TRANS_MAP_OVRD TMOV, 
               TRANSACTION_MAP TMAP 
           WHERE JLOG.JRNL_CD = '0' 
           AND JLOG.SRC_CD = '2' 
           AND JLOG.MKEY_FD_NUM <> 0 
           AND NVL(JLOG.TMOV_KEY, -1) > 0 
           AND NVL(JLOG.ORIG_SCAT_KEY, 1) = 1 
           AND JLOG.Scat_key = TDTL.SCAT_KEY 
           AND JLOG.TR_CD = TDTL.TR_CD 
           AND JLOG.CASE_KEY = TDTL.CASE_KEY 
           AND JLOG.TR_REF_NO = TDTL.TR_REF_NO 
           AND JLOG.ACCT_KEY = ACCT.ACCT_KEY 
           AND JLOG.TMOV_KEY = TMOV.TMOV_KEY 
           AND NVL(TDTL.ORIG_SCAT_KEY, 1) = 1 
           AND TDTL.STAT_CD <> '4' 
           AND TDTL.FD_DESC_ID = FDDC.FD_DESC_ID 
           AND TDTL.FDRT_KEY = FDRT.FDRT_KEY 
           AND BNTP.BNTP_KEY = FDRT.BNTP_KEY 
           AND BNTP.SBNT_KEY  (+) = SBNT.SBNT_KEY 
           AND TMOV.TMAP_KEY = TMAP.TMAP_KEY 
           AND TMOV.CO_CD = BNTP.CO_CD 
           AND DECODE(FDDC.MKEY_FD_NUM, NULL, TMAP.MKEY_FD_NUM, FDDC.MKEY_FD_NUM) = TMAP.MKEY_FD_NUM; 
```

任何提示/建议将不胜感激！

解释计划

```
Plan hash value: 4157721082

-----------------------------------------------------------------------------------------------------------
| Id  | Operation                              | Name             | Rows  | Bytes | Cost (%CPU)| Time     |
-----------------------------------------------------------------------------------------------------------
|   0 | INSERT STATEMENT                       |                  |     1 |   212 |  1596   (1)| 00:00:20 |
|   1 |  LOAD AS SELECT                        | GL_JLOG_DETAILS  |       |       |            |          |
|   2 |   NESTED LOOPS                         |                  |       |       |            |          |
|   3 |    NESTED LOOPS                        |                  |     1 |   212 |  1596   (1)| 00:00:20 |
|   4 |     NESTED LOOPS                       |                  |     1 |   195 |  1595   (1)| 00:00:20 |
|   5 |      NESTED LOOPS                      |                  |     1 |   190 |  1594   (1)| 00:00:20 |
|   6 |       NESTED LOOPS                     |                  |    12 |  2172 |  1582   (1)| 00:00:19 |
|*  7 |        HASH JOIN                       |                  |    12 |  2004 |  1570   (1)| 00:00:19 |
|   8 |         TABLE ACCESS FULL              | FUND_DESC        |   168 |  1176 |     4   (0)| 00:00:01 |
|   9 |         NESTED LOOPS                   |                  |       |       |            |          |
|  10 |          NESTED LOOPS                  |                  |   257 | 41120 |  1566   (1)| 00:00:19 |
|  11 |           NESTED LOOPS                 |                  |   257 | 22359 |   537   (0)| 00:00:07 |
|  12 |            NESTED LOOPS                |                  |   257 | 20817 |   280   (0)| 00:00:04 |
|* 13 |             TABLE ACCESS BY INDEX ROWID| GL_JOURNAL_LOGS  |   257 | 18504 |    23   (0)| 00:00:01 |
|* 14 |              INDEX RANGE SCAN          | IDX_ORIGSCATKEY  |   690 |       |     4   (0)| 00:00:01 |
|  15 |             TABLE ACCESS BY INDEX ROWID| TRANS_MAP_OVRD   |     1 |     9 |     1   (0)| 00:00:01 |
|* 16 |              INDEX UNIQUE SCAN         | TMOV_PK          |     1 |       |     0   (0)| 00:00:01 |
|  17 |            TABLE ACCESS BY INDEX ROWID | TRANSACTION_MAP  |     1 |     6 |     1   (0)| 00:00:01 |
|* 18 |             INDEX UNIQUE SCAN          | TMAP_PK          |     1 |       |     0   (0)| 00:00:01 |
|* 19 |           INDEX RANGE SCAN             | IX_AML8890       |     3 |       |     3   (0)| 00:00:01 |
|* 20 |          TABLE ACCESS BY INDEX ROWID   | TRANSACT_DETAILS |     1 |    73 |     4   (0)| 00:00:01 |
|  21 |        TABLE ACCESS BY INDEX ROWID     | FD_RATES         |     1 |    14 |     1   (0)| 00:00:01 |
|* 22 |         INDEX UNIQUE SCAN              | FDRT_PK          |     1 |       |     0   (0)| 00:00:01 |
|* 23 |       TABLE ACCESS BY INDEX ROWID      | BEN_TYPES        |     1 |     9 |     1   (0)| 00:00:01 |
|* 24 |        INDEX UNIQUE SCAN               | BNTP_PK          |     1 |       |     0   (0)| 00:00:01 |
|  25 |      TABLE ACCESS BY INDEX ROWID       | SYS_BEN_TYPES    |     1 |     5 |     1   (0)| 00:00:01 |
|* 26 |       INDEX UNIQUE SCAN                | SBNT_PK          |     1 |       |     0   (0)| 00:00:01 |
|* 27 |     INDEX UNIQUE SCAN                  | ACCT_PK          |     1 |       |     0   (0)| 00:00:01 |
|  28 |    TABLE ACCESS BY INDEX ROWID         | LEDGER_ACCOUNTS  |     1 |    17 |     1   (0)| 00:00:01 |
-----------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   7 - access("TDTL"."FD_DESC_ID"="FDDC"."FD_DESC_ID")
       filter("TMAP"."MKEY_FD_NUM"=DECODE(TO_CHAR("FDDC"."MKEY_FD_NUM"),NULL,"TMAP"."MKEY_FD_NUM","
              FDDC"."MKEY_FD_NUM"))
  13 - filter("JLOG"."TMOV_KEY" IS NOT NULL AND "JLOG"."SRC_CD"='2' AND "JLOG"."MKEY_FD_NUM"<>0 
              AND NVL("TMOV_KEY",(-1))>0 AND "JLOG"."JRNL_CD"='0')
  14 - access(NVL("ORIG_SCAT_KEY",1)=1)
  16 - access("JLOG"."TMOV_KEY"="TMOV"."TMOV_KEY")
  18 - access("TMOV"."TMAP_KEY"="TMAP"."TMAP_KEY")
  19 - access("JLOG"."SCAT_KEY"="TDTL"."SCAT_KEY" AND "JLOG"."CASE_KEY"="TDTL"."CASE_KEY")
       filter("TDTL"."FD_DESC_ID" IS NOT NULL AND "TDTL"."STAT_CD"<>'4' AND 
              "JLOG"."CASE_KEY"="TDTL"."CASE_KEY")
  20 - filter("TDTL"."FDRT_KEY" IS NOT NULL AND NVL("TDTL"."ORIG_SCAT_KEY",1)=1 AND 
              "JLOG"."TR_CD"="TDTL"."TR_CD" AND "JLOG"."TR_REF_NO"="TDTL"."TR_REF_NO")
  22 - access("TDTL"."FDRT_KEY"="FDRT"."FDRT_KEY")
  23 - filter("TMOV"."CO_CD"="BNTP"."CO_CD")
  24 - access("BNTP"."BNTP_KEY"="FDRT"."BNTP_KEY")
  26 - access("BNTP"."SBNT_KEY"="SBNT"."SBNT_KEY")
  27 - access("JLOG"."ACCT_KEY"="ACCT"."ACCT_KEY") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T02:16:50.763

“直接路径”加载又名 /*+ APPEND */ 的几个问题。

首先，它通常不一定更快。它直接路径加载到磁盘 - 绕过缓冲区缓存。在许多情况下（尤其是对于较小的数据集），直接路径加载到磁盘会比传统路径加载到缓存中要慢。

其次，DPL 工作在表的高水位线之上，这意味着它不会重复使用空间。因此，除非您`TRUNCATE`每次都使用整张桌子，否则它可能不一定会更快。

第三，一次只有一个用户/用户可以 DPL 到一张表上。这可能会导致并发问题，这里所有的修改都将被串行化（就像串行电路，而不是并行电路）。在直接路径的事务提交之前，不允许插入/更新/删除或合并到该表中。

最后，有问题的表的索引很重要。如果不查看数据，很难说哪种索引是合适的以及在哪些列上是合适的。尝试结合使用本地和全局位图索引，但在选择列时要小心。使索引“不可用”通常不是一个好主意，创建它并对其进行更改几乎与其直接利益相冲突是有目的的。

首先，删除所有提示，尝试索引。如果它是一个可重新加载的表，则在每次加载之前将其截断。

# java - 将 Apache HttpClient 用于 OPTIONS 请求

> ID：11438964
> 
> 赞同：3
> 
> 时间：2012-07-11T18:23:53.353
> 
> 标签：java, http, apache-httpclient-4.x, http-options-method

我正在尝试使用 httpclient 来验证是否可以访问特定**端点**。似乎只能检查服务器是否已启动，但无法验证实际资源是否可用。

这是我的代码：

```
HttpClient client = new Default HttpClient();

client.execute(new HttpOptions(url)).getStatusLine().getStatusCode(); 
```

根据协议（http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html），它应该一直在检查特定资源的状态，但只要实际主机是，我总是会收到 200 响应可达。我在这里做错了什么？

谢谢你。

# jquery - 流入全日历事件？不可能的布局？包括图片

> ID：11438965
> 
> 赞同：8
> 
> 时间：2012-07-11T18:23:55.727
> 
> 标签：jquery, css, fullcalendar

这是我正在寻找的模型。请原谅巧克力污迹：

![小样](../Images/b7a212f42cec744b3fe99bd72dc56847.png)

我认为这对于 fullcalendar 是不可能的，在查看了它生成的 html 之后：（它不会单独安排每一天。相反，这些事件适合水平元素，可以拉伸整个日历的宽度。）但我想我'无论如何要问：我该怎么做？

问题2：如果不可能，谁能推荐一个**可以**做到这一点的日历小部件？如果从头开始设计以支持这种布局，这应该不难。

仅供参考：我想要这个的原因是为了充分展示在特定日期可用的所有**类型的事件。**基本上，能够在月视图中每天显示超过 3 个左右的事件。然后，当用户悬停或单击时，我将显示特定日期的时间和详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-07T08:19:50.817

这是不可能的，因为如果您将事件分配两天意味着它会显示两天的事件消息，因此它将占据两列全宽。因为它将向用户事件显示消息两天。

如果您将事件分配为一天，它将占据整个宽度。和文本事件将只在第二行。

# c# - 如何创建命令行参数

> ID：11438966
> 
> 赞同：0
> 
> 时间：2012-07-11T18:23:55.837
> 
> 标签：c#, visual-studio, command-line, c#-2.0, command-line-arguments

我目前有一个在我的 C# 代码中运行的 .exe，.exe 收集来自特定位置的文件列表，一旦它运行它会提示用户按 esc 退出或输入重新收集。因为我试图从我的代码中将其作为自动化过程运行，所以我想添加一个命令行参数，如 -s 或其他东西来绕过用户输入的提示。如果不绕过这个，.exe 将永远不会关闭，软件最终会崩溃。这是我的 .exe 代码

```
class StackGrabber
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main(string[] args)
    {
        try
        {
            StackReader.MessageHandler.OnMessage += new StackReader.MessageHandler.NotificationHandler(OnNotification);

            StackGrabber grabber = new StackGrabber();
            grabber.Grab();
        }
        catch (Exception ex)
        {
            DisplayMessage(ex.ToString());
        }
    }

    private volatile bool IsComplete = false;
    private StackReader.StackReader reader;

    void Grab()
    {
        try
        {
            DisplayMessage("Grabbing stacks... \n");

            reader = new StackReader.StackReader();
            reader.OnReadComplete += new System.Windows.Forms.MethodInvoker(OnComplete);

            if (reader.ReadStacks() > 0)
            {
                while (!reader.IsComplete)
                    Thread.Sleep(500);
            }
            else
            {
                Thread.Sleep(500);
            }
            DisplayMessage(Environment.NewLine + "Press esc to exit" + Environment.NewLine);
               //...
               //...
            Console.Read();
        }
        catch (Exception ex)
        {
            DisplayMessage(ex.ToString());
        }
    }

    public static void OnNotification(string msg)
    {
        DisplayMessage(msg);
    }

    public void OnComplete()
    {
        IsComplete = true;
    }

    private static object ConsoleLock = new object();
    private static void DisplayMessage(string msg)
    {
        lock (ConsoleLock)
        {
            Console.WriteLine(msg);
        }
    }
} 
```

我这样调用可执行文件：

```
StackGrab.StartInfo.FileName = @"..\\bin\\StackGrabber.exe";
            StackGrab.StartInfo.CreateNoWindow = true;
            StackGrab.StartInfo.UseShellExecute = false;
            StackGrab.Start();
            StackGrab.WaitForExit(); 
```

我希望能够在命令提示符下调用 StackGrabber.exe，这样我就可以放置`C:\>StackGrabber -s`并且它不会等待“esc”输入退出

### 注意：这是关于我的软件使用 C#2.0、Visual Studio 2005 和 WinXP 32bit 的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:29:01.360

您可以在 StackGrabber 类中添加一个布尔标志，以指示是否不应提示用户。您需要在初始化时将其设置为 true。然后在 args 上设置 use [Array.Exists](http://msdn.microsoft.com/en-us/library/yw84x8be.aspx)以查找您的参数。

```
if(Array.Exists(args, delegate(string s) { return s.Equals("-s"); }))
    grab.PromptUser = false; 
```

然后稍后在抓取功能中检查它：

```
if(this.PromptUser)
    Console.Read(); 
```

编辑： Main 函数的 args 参数是提供给程序的命令行参数。[这](http://msdn.microsoft.com/en-us/library/acy3edy3.aspx)是一篇关于如何使用命令行参数的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:30:17.203

StartInfo 有一个字符串类型的 Arguments 或 CommandArguments 成员，可用于传入参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T18:30:50.587

in `Static void Main(string[] args)`, `args`是您的命令行参数列表。

要从调试器添加命令行参数，您可以右键单击您的项目并转到“属性”
单击
“开始选项”标题下的调试选项卡，将出现一个名为“命令行参数”的框。

你可以在那里输入你的论点

# string - Powershell：格式化可执行文件

> ID：11438968
> 
> 赞同：0
> 
> 时间：2012-07-11T18:23:59.507
> 
> 标签：string, powershell, formatting

我正在尝试创建一个脚本，该脚本将格式化 w32tm.exe /monitor 的输出并在表格中显示服务器名称、NTP 偏移量和 RefID。

我有点不知道如何从可执行文件中获取输出以对其进行格式化，并且想知道这里是否有人可以帮助我。现在我正在尝试这个：

```
$executable = w32tm.exe /monitor
$executable | Format-Table -View "Server Name", "NTP offset", "RefID" 
```

我怎样才能设法让可执行文件在表格中格式化以显示 exe 的那些特定部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T08:34:01.550

嗨，我还需要这样做，然后才能找到有人这样做的功能。看看我相信您可以更改它以满足您的需求，或者按原样使用它。

[ps函数](http://jdhitsolutions.com/blog/2012/01/convert-text-to-object-updated/)

[关于它如何工作的文章](http://jdhitsolutions.com/blog/2011/10/turning-cli-tools-into-powershell-tools-deep-dive-demos/)

# c++ - 包含自身映射的 C++ 结构

> ID：11438969
> 
> 赞同：8
> 
> 时间：2012-07-11T18:24:00.377
> 
> 标签：c++, syntax, compiler-errors

简单的问题：我如何让它工作？

```
struct A {
    double whatever; 
    std::unordered_map<std::string, A> mapToMoreA; 
} 
```

g++ 错误：std::pair<_T1, _T2>::second 类型不完整

据我了解，在实例化映射时，编译器需要知道 A 的大小，但它不知道这一点，因为映射是在 A 的声明中声明的，所以解决这个问题的唯一方法是使用指向A（不想那样做）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T18:45:21.797

大多数情况下，它将取决于容器实现细节（更准确地说，取决于在容器声明时实例化的内容和不实例化的内容）。显然，`std::unordered_map`实现需要类型是完整的。同时 GCC 的`std::map`编译实现与不完整的类型完美结合。

为了说明这种差异的来源，请考虑以下示例。假设我们决定自己实现`std::vector`-like 功能的幼稚实现，并声明我们的向量类如下

```
template <typename T> class my_vector {
  T *begin;
  T *end;
  ...
}; 
```

只要我们的类定义只包含指向 的指针，就不需要类定义本身`T`的类型是完整的。`T`我们可以将`my_vector`自己实例化为不完整`T`而没有任何问题

```
class X;
my_vector<X> v; // OK 
```

稍后*，*当我们开始使用（并因此实例化）`my_vector`.

但是，如果出于某种原因我们决定将 的直接实例包含`T`到我们的向量类中，事情就会发生变化

```
template <typename T>
class my_vector {
  T *begin;
  T *end;
  T dummy_element;
  ...
}; 
```

现在，在其自身`T`的实例化点上，很早就需要完整性`my_vector`

```
class X;
my_vector<X> v; // ERROR, incomplete type 
```

在你的情况下一定会发生类似的事情。您正在处理的定义`unordered_map`以某种方式包含`A`. 这就是无法实例化的原因（显然，在这种情况下，您最终会得到无限递归类型）。

通过实施更好的想法`unordered_map`将确保不将`A`其作为直接成员包含在内。这样的实施不需要`A`是完整的。正如您自己指出的那样，Boost 的实现`unordered_map`在这方面设计得更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T18:36:59.757

除了适用于不完整类型的智能指针之外，我不知道任何 STL 容器。但是，如果您不想使用指针，则可以使用包装器结构：

```
struct A {
    struct B { double whatever; }; 
    std::unordered_map<std::string, B> mapToB; 
}; 
```

**编辑：**如果上述内容不符合您的用例，这是一个指针替代方案。

```
struct A {
    double whatever;
    std::unordered_map<std::string, std::unique_ptr<A>> mapToMoreA; 
}; 
```

您也可以只使用`boost::unordered_map`它，它不仅支持不完整的类型，而且在 Visual Studio 中也具有更好的调试性能，`std::unordered_map`因为由于过多的迭代器调试检查，Microsoft 的实现效率非常低。我不知道任何一个容器的 gcc 有任何性能问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T19:07:45.877

[Boost.Variant](http://www.boost.org/libs/variant/)有一个专门用于此目的的方便实用程序 - [`boost::recusive_wrapper<>`](http://www.boost.org/doc/html/boost/recursive_wrapper.html). 以下应该有效：

```
struct A {
    double whatever; 
    std::unordered_map<std::string, boost::recursive_wrapper<A>> mapToMoreA; 
}; 
```

~~唯一值得注意的缺点是 Boost.Variant 尚未更新以支持 C++11 移动语义。~~更新：在 Boost 1.56 中添加。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T18:32:36.873

或者使用指向地图的指针。在这种情况下，指针必须是 void* 类型（可以隐藏在一组函数后面）。也许有 std::unordered_map 的替代品可以处理不完整的值类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T18:37:49.553

在 C++ 中，您通常使用具有预定义常量大小的指针来表示不完整的类型：

这当然会改变您使用地图的方式：您必须取消引用`*`or`->`运算符才能访问成员，并且必须`delete`在某些时候访问指针。

```
struct A
{
    double bla;
    std::map<std::string, A*> mapToMoreA;
}; 
```

A 的成员函数应该在`struct`块内拆分为原型并稍后实现，否则 A 及其成员尚未完全定义：

```
struct A
{
    double bla;
    std::map<std::string, A*> mapToMoreA;
    void doStuff(const std::string& str);
};

void A::doStuff(const std::string& str)
{
    mapToMoreA[str] = new A();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T18:42:20.977

如果让地图保持指针是不可接受的，也许这对你有用：

```
struct A {
  struct hidden;
  std::unique_ptr<hidden> pimpl;
};

struct A::hidden {
  double whatever;
  std::unordered_map<std::string, A> mapToMoreA;
}; 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-07-11T18:29:30.697

我认为您可以`struct A;`在定义之前转发声明，编译器应该很高兴。

编辑：所以在多次被否决后，我写了以下内容来看看我错过了什么：

```
#include <boost/unordered_map.hpp>                                                                                      
#include <string>
#include <iostream>

struct A;

struct A {
    double whatever;
    boost::unordered_map<std::string, A> mapToMoreA;
};

int main(void)
{
    A b;
    b.whatever = 2.5;
    b.mapToMoreA["abc"] = b;
    std::cerr << b.mapToMoreA["abc"].whatever << std::endl;
    return 0;
} 
```

这在我的 Mac 上使用 g++ 4.2.1 编译得很好，并在运行时打印出“2.5”（如预期的那样）。

对不起，我没有`unordered_map`没有提升。是这个问题吗？（即，是否`std::unordered_map`以某种方式对编译器施加了比 boost 更多的限制？）否则，我不确定我在这里遗漏了什么。那些对此表示反对的人，请在评论中启发我。谢谢！

# javascript - 使用点击功能加载后刷新div的内容

> ID：11438970
> 
> 赞同：1
> 
> 时间：2012-07-11T18:24:02.253
> 
> 标签：javascript, jquery, ajax, html

我有一个页面，页面上有 2 个 Div。第一个 Div 工作正常并加载玩家列表。现在，当您单击该 Div 中的链接时，它会加载第二个 Div，其中包含有关该玩家的信息。这也很好，但我想做的是让第二个 Div 在点击事件加载后定期刷新玩家数据。这是我目前的尝试，但它不起作用：

```
var loc = "";
$("a").live('click', function() {
    loc = "player.php?user=" + $(this).html();
    $("#result").load(loc);
});
setInterval(function() {
    $("#results").load(loc);
}, 1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:29:38.443

尝试移动事件处理程序`setInterval`内部`click`，使其在第一次单击之前不会触发，并确保`loc`在第一个间隔完成之前定义。

此外，您的 中可能有错字`setInterval`，因为它指的是`$('#results')`，而不是`$('#result')`。一个或另一个可能是不正确的。

最后，最好将 a 分配`setInterval`给变量，以便您以后可以在需要时使用`clearInterval`. 它还允许您只设置一次间隔，而不是每次用户点击

```
var loc = "";
var interval = null;

$("a").live('click', function(){
    loc = "player.php?user=" + $(this).html();

    $("#result").load(loc);

    // only create the interval once
    if(!interval) {
        interval = setInterval(function(){
            $("#result").load(loc);
        }, 1000);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:30:15.707

您在`a`将加载内容的锚的单击事件中将 url 分配给 loc，但在加载 loc 时执行的 setInterval 的另一种情况将没有 url。因此，将 url 分配给 loc 您声明它的时间或确保它在 setInterval 之前分配。

另请注意`live`，不推荐使用您应该`on`改用的。

```
var loc = "player.php?user=" + $("a").html();
$("a").live('click', function(){
        loc = "player.php?user=" + $(this).html();
        $("#result").load(loc);
    });
setInterval(function(){
    $("#results").load(loc);
}, 1000); 
```

# java - 属性 @JSONIgnore 可以在每次调用的基础上设置吗？

> ID：11438972
> 
> 赞同：9
> 
> 时间：2012-07-11T18:24:15.197
> 
> 标签：java, json, jackson

我正在一个网站上工作，该网站使用促销代码可能为用户提供该网站的免费会员资格。会员注册的级别是促销代码对象的属性，并以整数形式存储在数据库中，1 或 2。但是，会员级别属性与网站 UI 相关的唯一时间是与特定促销代码相关联的着陆页。因此，对于这种情况，我不希望 JSON 忽略成员级别。在用户返回网站并拥有与其帐户关联的促销代码对象后，我们不再关心他们的会员级别，因此我希望 JSON 忽略会员级别属性。

所以我的问题是，是否可以`@JSONIgnore`在每次访问的基础上设置对象的属性，或者只能忽略或不忽略属性？换句话说，有没有类似的方法`object.getAttribute().setAttributeJSONIgnore(true | false)`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T16:22:04.660

不会。基于注解的方法是静态的，因为尽管您可以使用 custom `AnnotationIntrospector`，但生成`JsonSerializer`的实例会被重用，因为它们的构造成本很高。

但是有一些方法可以过滤掉属性，例如，查看“[过滤属性](http://www.cowtowncoder.com/blog/archives/2011/02/entry_443.html)”文章。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-17T17:02:43.940

我用 JSONViews ( [http://wiki.fasterxml.com/JacksonJsonViews](http://wiki.fasterxml.com/JacksonJsonViews) ) 做了类似的事情。

您将创建一个基本视图，然后使用 PromoPage 视图对其进行扩展。在您正在序列化的对象中，您需要将注释添加到每个属性。所以你每次都想出现的是

```
@JsonView(Views.Base.class) 
String name; 
```

您只想在某些促销页面上显示的属性类似于

```
@JsonView(Views.PromoPage.class) 
Integer memberLevel; 
```

然后，如果您有不同的 JAX-RS 方法来获取促销页面而不是其他登录页面，您可以使用适当的视图注释这些方法，如下所示

```
 @JsonView(Views.Base.class)
  @GET
  @Produces(MediaType.APPLICATION_JSON )
  public Object getNormalLandingPageInfo() {
    ...
  }

  @JsonView(Views.PromoPage.class)
  @GET
  @Produces(MediaType.APPLICATION_JSON )
  public Object getPromoLandingPageInfo() {
    ...
  } 
```

如果你不这样做，在你的逻辑中，你可以做任何你想做的事情来确定何时显示 PromoPage 视图，然后做这样的事情

```
if (showPromoPage)
    objectMapper.writeValueUsingView(out, object, Views.PromoPage.class);
else
    objectMapper.writeValueUsingView(out, object, Views.Base.class); 
```

# clearcase - 签入 ClearCase 失败

> ID：11438975
> 
> 赞同：1
> 
> 时间：2012-07-11T18:24:20.553
> 
> 标签：clearcase, clearcase-ucm

我正在尝试将文件添加到 ClearCase 中，但出现以下错误：

> 将“C:\PATH\file.dbc”添加到源代码管理时出错。
> 
> 更改了对“C:\PATH\file.dbc”的保护。
> 
> 创建了分支“C:\PATH\file.dbc”版本“\main\0”。
> 
> 类型管理器“text_file_delta”创建版本操作失败。

检查以下内容： 有超过 8000 个字符的行必须保持这种状态，因此它不能使用“text_file_delta”作为类型管理器。我将一个文件的类型更改为“compressed_file”，并且能够签入。

我试图添加`dbc compressed_file -name "*.[dD][bB][cC]" ;`到 default.magic 文件。然后，我尝试检查它，`ct file test.dbc`它说它是一个压缩文件，但是当我尝试将一个实际的 .dbc 文件添加到源代码控制时，它仍然给我关于“text_file_delta”失败的错误。

我有什么遗漏的吗？也许我把该行放在 default.magic 文件的错误部分？

注意：我能找到的唯一 default.magic 文件位于服务器端，这是正确的吗？（我宁愿在这里检查，而不是每个人都必须在他们的客户上做一个。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:56:54.850

确保将 default.magic 文件考虑在内，并且该文件位于正确的目录中，如“[关于 ClearCase Magic 文件](http://www-01.ibm.com/support/docview.wss?uid=swg21122471)”中所述。

确保您确实在该魔术文件中的正确位置添加了新规则：请参阅“[创建新元素时如何确定文件类型](http://www-01.ibm.com/support/docview.wss?uid=swg21118099#Table3)”

> 注意：**这是文件中的*第一*部分`default.magic`**。
> 
> 例子：

```
# Match by name without examining data
core file : -name "core" ;
compressed_file : -name "*.[nN][eE][wW]"; 
```

> 注意：您添加的新文件类型规则必须位于魔术文件中的以下行之前：

```
text_file : -printable ;
compressed_file : !-printable ; 
```

使用个人魔术文件而不是修改默认文件：

> 注意：强烈建议您不要`default.magic`直接修改该文件，因为下次执行升级`default.magic`时会创建一个新文件，您所做的更改将会丢失。
> 创建一个名称在`default.magic`文件名中的“d”之前按字母顺序排列的个人魔法文件（例如`cc.magic`）将允许 ClearCase 在默认值之前解析该文件。
> 最好创建一个个人魔术文件并可能设置`MAGIC_PATH`变量。

# maven - 使用源代码签入依赖 jar 时使用 Maven 是否仍然有意义？

> ID：11438980
> 
> 赞同：1
> 
> 时间：2012-07-11T18:24:29.643
> 
> 标签：maven, maven-2, maven-3

我们将所有源代码的依赖第三方 JAR 与我们的源代码一起检查到源代码控制中。需要时，我们会手动下载第三方 JAR 的更新，并将源代码控制中的那些 JAR 替换为较新的版本。我们还没有觉得有必要使用 Maven，因为这个过程对我们来说似乎很简单。但是我们是否因为不使用 Maven 而错过了一些有价值的东西？或者我们的场景不保证使用 Maven？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T20:00:25.290

“JAR 没有太大变化”，我一直听到这个......

在项目开始时，将 jars 存储在 SCM 中很简单。随着时间的推移，jar 的数量越来越大.... 等待 2 或 3 年，没有人记得 jar 来自哪里，它们的许可条款是什么，最常见的是正在使用什么版本（在分析安全漏洞时了解这一点很重要） ......

我最近读过的关于存储库管理器的最佳文章是：

*   [http://www.sonatype.com/people/2012/07/wait-you-dont-have-a-repository-manager/](http://www.sonatype.com/people/2012/07/wait-you-dont-have-a-repository-manager/)

有点不敬，但确实对人们一直遇到的那种技术惯性提出了一个有效的观点。

将项目团队从 ANT 切换到 Maven 可能会很可怕...... Maven 的工作方式完全不同，所以我发现它最好与未开发或冒险的项目团队一起部署。对于老派 ANT 用户，我建议使用[Apache ivy](http://ant.apache.org/ivy/)插件。Ivy 允许此类团队将其依赖项的管理外包，但保留他们熟悉的构建技术。

归根结底，使用 Maven 的最大好处不是依赖管理。这是标准化的构建过程。我已经看到几次创建“标准”ANT 构建过程的失败尝试。问题每个构建工程师对标准应该是什么都有自己的看法...... Maven 强制用户编写构建插件的方法一开始可能看起来很限制，但就像 iPhone 一样，最终开发人员发现“有一个 Maven 插件”： -)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T20:28:32.957

在依赖管理方面，Maven 确实非常有价值。正如 Mark O'Connor 所建议的那样，运行本地存储库管理器可能比将工件检查到源代码控制中更好。

有许多工具（如 eclipse 中的 m2e）可以帮助进行依赖管理，并就哪些模块或依赖项需要哪些其他依赖项提供有价值的反馈。即使不同的模块依赖于给定库的不同版本，Maven 也会确保获得适当版本的依赖项。这将有助于防止相同 jar 的重复版本出现在您部署的项目中，只要它们具有相同的组和工件 ID。

即使对于一个非常简单的项目，我也不认为我会求助于将依赖项检查到源代码控制系统中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T07:10:27.530

这不仅仅是关于第 3 方图书馆。大多数情况下，如果您有多个存储库。在我们的例子中，我们有四个存储库，其中包含许多相互依赖和内部依赖。实际上，我开始了这个答案，然后我不得不花 15 分钟与一些同事讨论在有人忘记更新另一个项目的 lib 目录中的一个项目的 .jar 后发生的问题。

而且看起来更专业:)

# java - 如何测试 FileInputStream 是否已关闭？

> ID：11438981
> 
> 赞同：4
> 
> 时间：2012-07-11T18:24:30.770
> 
> 标签：java, junit, fileinputstream

如何编写 JUnit 测试来检查 FileInputStream 是否已关闭？

考虑以下代码，

```
import java.io.FileInputStream;

class FileInputStreamDemo {

  public static void main(String args[]) throws Exception {
    FileInputStream fis = new FileInputStream(args[0]);

    // Read and display data
    int i;
    while ((i = fis.read()) != -1) {
      System.out.println(i);
    }

    fis.close();

  }
} 
```

我想写一个这样的测试：

```
@Test
public void test() {
  FileInputStreamDemo.main("file.txt");
  // test here, if input stream to file is closed correctly
} 
```

虽然这个代码示例没有多大意义，但我现在想知道如何编写一个 JUnit 测试来检查 FIS 是否已关闭。（如果可能：甚至没有对原始 FIS 对象的引用）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:34:47.070

您应该创建一个名为 MyFileReader 的单独类来完成读取文件的工作。然后，您创建一个 MyFileReaderTest 类，该类实例化您的新类并调用其中的方法来测试它的行为是否正确。如果您使 fis 成为 MyFileReader 类的受保护成员，则测试可以访问 fis 并验证它是否已关闭。

而不是使用 FileInputStream 你应该使用像 InputStream 这样的接口，这样你就可以创建一个 MockInputStream ，它不会真正创建文件，但会跟踪是否调用了 close() 。然后你可以在你的测试代码中测试它。

# java - Java - IntBuffer 包装

> ID：11438982
> 
> 赞同：7
> 
> 时间：2012-07-11T18:24:31.753
> 
> 标签：java

我正在使用以下方法读取整数文件：

```
int len = (int)(new File(file).length());
FileInputStream fis = new FileInputStream(file);
byte buf[] = new byte[len];
fis.read(buf);
IntBuffer up = ByteBuffer.wrap(buf).order(ByteOrder.LITTLE_ENDIAN).asIntBuffer(); 
```

但是，它会在内存中创建两个文件副本，1) 字节数组副本 2) IntBuffer 副本。

是否可以以这种方式使用代码，因此它只会在内存中创建一个副本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T18:37:42.773

我看过的 javadocs 和 Oracle 的实现表明你所说的不是真的。javadocs说：

> 公共静态 ByteBuffer 包装（字节 [] 数组）
> 
> > 将字节数组包装到缓冲区中。
> > 
> > 新缓冲区将由给定的字节数组支持；也就是说，对缓冲区的修改将导致数组被修改，反之亦然。

代码显示，`array`传入`ByteBuffer.wrap`的内容被简单地分配为`ByteBuffer`. 该`ByteBuffer.asIntBuffer`方法仅显示了`IntBuffer`使用`ByteBuffer`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T18:53:30.947

我建议您将其与

```
FileChannel fc = new FileInputStream(file).getChannel();
IntBuffer ib = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size())
        .order(ByteOrder.LITTLE_ENDIAN).asIntBuffer(); 
```

无论文件大小如何，这都会使用不到 1 KB 的堆。

顺便说一句：这比使用堆缓冲区要快得多，因为它不需要`int`从字节中组装每个值。

# sql - SQL 子查询 - 如何找到最小值

> ID：11438983
> 
> 赞同：1
> 
> 时间：2012-07-11T18:24:41.207
> 
> 标签：sql, oracle, min

我创建了一个子查询如下

```
select hospital.hospitalcode, name, wardno, annualbudget
from hospital, ward
where hospital.hospitalcode = ward.hospitalcode 
```

我要回答的问题是：考虑到所有医院病房，哪个医院的病房年度预算最低？您应该显示医院代码及其名称、病房编号及其年度预算。

我如何找到这个问题的单个条目？我意识到我需要使用 MIN 但在使用多个列名时不知道在哪里使用它

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T18:31:08.467

更有效的方法通常是使用分析函数

```
SELECT hospitalcode,
       name,
       ward,
       annualbudget
  FROM (SELECT h.hospitalcode,
               h.name,
               w.wardno,
               w.annualbudget,
               rank() over (order by w.annualbudget asc) rnk
          FROM hospital h
               JOIN ward w
                 ON (h.hospitalcode = w.hospitalcode))
 WHERE rnk = 1 
```

不过，您也可以使用子查询

```
SELECT h.hospitalcode,
       h.name,
       w.wardno,
       w.annualbudget
  FROM hospital h
       JOIN ward w
         ON (h.hospitalcode = w.hospitalcode)
 WHERE w.annualbudget = (SELECT MIN(annualbudget)
                           FROM ward) 
```

如果有多个病房与最低预算相关联，这两种方法都将返回多行。使用解析函数方法，如果您希望每次都准确返回 1 行，则可以使用该`row_number`函数而不是任意打破平局。`rank`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T18:31:33.843

首先，您应该更改查询以使用正确的显式连接，即使只是为了清楚起见。对于您的具体问题，这是一种方法：

```
SELECT H.hospitalcode, H.name, W.wardno, W.annualbudget
FROM Hospital H
INNER JOIN Ward W
ON H.hospitalcode = W.hospitalcode 
WHERE W.annualbudget = (SELECT MIN(annualbudget) FROM Ward) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T18:30:23.497

首先，您想使用正确的连接语法编写查询：

```
select hospital.hospitalcode, name, wardno, annualbudget
from hospital join
     ward
     on hospital.hospitalcode = ward.hospitalcode 
```

其次，您实际上不需要 min 函数。您可以使用 row_number()：

```
select hospitalcode, name, wardno, annualbudget
from (select hospital.hospitalcode, name, wardno, annualbudget,
             row_number() over (order by annualbudget) as seqnum
      from hospital join
           ward
           on hospital.hospitalcode = ward.hospitalcode
     ) t
where seqnum = 1 
```

这将按年度预算的顺序分配一个序列号。所以最小的值为 1。

您也可以通过按年度预算订购并仅占据第一行来做到这一点。但是，我喜欢这种方法，因为它很好地介绍了 Windows 功能。

# language-agnostic - 返回对象实例但行为类似于构造函数的静态方法

> ID：11438984
> 
> 赞同：2
> 
> 时间：2012-07-11T18:24:42.773
> 
> 标签：language-agnostic, constructor

所以我有一个可以通过几种方式构建的对象。构造函数具有签名，例如从文件加载对象的签名：

```
Object::Object( string filenameToLoadFrom ) ; 
```

它的行为方式非常简单。

```
Object( "filename.dat" ) ; // loads object from filename 
```

构造函数签名几乎说明了它的作用，尽管静态方法`Load`可能会更好：

```
static Object* Object::Load( string filenameToLoadFrom ) ; 
```

[（上面的语法有点不正确，但你明白了。）]

然后我们会遇到构造函数所做的事情并不能从参数中 *立即看出的情况。**需要一个名称才能*从 API 中清楚地看出构造函数的作用。

问题是，编写返回对象实例的静态方法是否是个好主意，只是为了能够命名构造函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:38:19.860

这实际上被认为是[工厂方法模式的一个常见的次要好处](http://en.wikipedia.org/wiki/Factory_method_pattern#Other_benefits_and_variants)。它在特定场景中可能很有用，特别是对于具有相同参数类型提供非常不同含义的事物。

例如，有一个表示“角度”的类并不少见，它可以由可以表示度数或弧度的单个浮点数构造。构造函数没有提供足够的上下文（或干净的方式）来实现这一点，其中“工厂方法”使这一点非常清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:38:09.853

我相信这是一个好主意，特别是如果您需要一个以上都采用相同类型参数的构造函数。例如：static Object* loadFromFile(String fileName) 和 statc Object* loadFromResorce(String resourceName)。您甚至可以将实际构造函数设为私有以强制使用静态构造函数。

# javascript - 在两列中浮动不同数量的元素，左右，即使高度不同

> ID：11438999
> 
> 赞同：1
> 
> 时间：2012-07-11T18:25:44.413
> 
> 标签：javascript, html, css

请看这个 jsFiddle：http: [//jsfiddle.net/jRGyS/](http://jsfiddle.net/jRGyS/)

我想从块中创建两列，偶数（石灰）块向右浮动，奇数（蓝色）块向左浮动。但是，当块的高度不同时，布局可能会有点混乱，因为您可以看到最后一个蓝色块漂浮在另一个蓝色块上，但是这个蓝色块应该保持在左侧，或者改为向右浮动。

问题是这些块将被动态加载，并且总是在高度上变化。所以你永远无法预测会有多少，每个高度是多少，以及它们出现的顺序（可能在 DOM 加载后使用 Javascript 除外）。

一个想法案例是没有 Javascript，但如果不可能，可以使用 JS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:34:41.517

[在这个JSFiddle](http://jsfiddle.net/jRGyS/14/)中使用 clear:left 和 clear:right

```
div.block {
   background: blue;
   width: 100px;
   height: 100px;
   margin-bottom: 10px; 
}
div.block:nth-child(odd) {
   float: left;            
   clear: left;
}
div.block:nth-child(even) {
   background: lime;   
   float: right;            
   clear: right;
} 
```