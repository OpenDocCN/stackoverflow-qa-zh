# StackOverflow 问答 12334000-12334999

# ruby-on-rails - 为什么 Rails 不能在第二个终端窗口中工作？

> ID：12334000
> 
> 赞同：4
> 
> 时间：2012-09-08T19:58:25.727
> 
> 标签：ruby-on-rails, terminal

我想在一个终端窗口中运行`rails server`并在另一个终端窗口中工作，但第二个窗口不起作用，即使我希望这两个窗口功能相同。

当我在第二个窗口中键入`rails`（少得多`rails s`等）时，我收到此错误：

```
Could not find jquery-rails-2.0.2 in any of the sources
Run 'bundle install' to install missing gems. 
```

我的理解是这`bundle install`不应该是必要的（因为它已经在第一个窗口中进行了处理并且一切正常），并且我已经确保一切都与`which ruby`and`rvm use <my gemset>`等一样。第二个终端窗口向我保证我正在使用适当的 Ruby 版本和 gemset，但不起作用。

同时，原来的终端窗口继续正常工作——我只是不得不退出 Rails 服务器才能继续工作，这很烦人。

关于在第二个终端窗口中工作，我不明白这里有什么令人痛苦的显而易见的事情吗？我不会期望需要太多设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T02:01:47.070

尽管我努力确保它们做到了，但两个终端窗口之间的宝石并不匹配。这是使用`gem list`和比较两个输出发现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T12:57:04.573

如果有人仍在努力使用：

```
rvm use 2.1.0 
```

2.1.0 是你的红宝石版本。

# javascript - JavaScript 显示变量 onclick

> ID：12334001
> 
> 赞同：0
> 
> 时间：2012-09-08T19:58:29.793
> 
> 标签：javascript, html, onclick

我正在尝试使用存储在变量中的信息填充几个 div，这些变量会更改图像的 onclick。这是我的标签中的一些代码：

```
function getName(name){
    document.getElementById('show_name').innerHTML = name
}

function getDetailsForBill(){
     getName('Bill Gates'); 
     getMotto('Bills motto'); 
     getImage ('<img src="http://www.somepage.com/images/team/bill.jpg" />');
} 
```

这就是我使用 onclick 的方式：

```
<img src="bill.jpg" onclick="getDetailsForBill();" /> 
```

这就是我尝试显示与每个人相关的信息的方式：

```
<div id="show_name"></div> 
```

但是，信息没有显示出来。我能做些什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:08:02.530

您显示的代码没有任何问题，因此问题出在您未显示的某处。

这是一个工作示例，如果将其与代码进行比较，您可能会发现不同之处：

[http://jsfiddle.net/Guffa/bkyFb/](http://jsfiddle.net/Guffa/bkyFb/)

* * *

### 编辑：

您发布的小提琴中的代码存在语法错误。你用而不是结束`getDetailsForBill`函数。`}}``}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T20:10:15.427

首先，页面上只有一个 id='show_name' 的 div 吗？

其次，尝试将 getDetailsForBill() 更改为：

```
function getDetailsForBill(){
     getName('Bill Gates'); 
     //getMotto('Bills motto'); 
     //getImage ('<img src="http://www.somepage.com/images/team/bill.jpg" />');
} 
```

这可以正常工作并显示名称吗？

# html - 用于登录页面的谷歌关闭 UI 模板

> ID：12334004
> 
> 赞同：2
> 
> 时间：2012-09-08T19:58:51.247
> 
> 标签：html, css, google-closure, google-closure-library

我是谷歌关闭的新手......谷歌是否有一个简单的模板来设计一个简单的用户注册/登录页面？我所看到的主要是用于 UI 操作的工具，例如创建 DOM 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:36:57.197

您无法使用闭包库呈现整个登录页面，但是您可以使用特定的 ui 组件来生成输入、标签、表单、按钮等，并为每一个指定操作。e

最好的方法是简单地使用它们，但是为预定义的 goog.ui 组件定义自己的自定义 css 有点不方便。这就是为什么我通常坚持使用常用的 goog.dom.createDom 函数。

不利的一面是，您必须编写更多代码才能获得相同的视觉效果，但我使用的是类似 js 的 gss 实现，它在运行时以 css 样式计算所有变量，并自动服务器浏览器/版本特定的 CSS 样式，无需为每个浏览器提供不同的样式表。就处理时间而言，更快、更清洁，而且成本更高。

闭包库中有很多很酷的东西，尤其是在用户界面方面，只要弄清楚你需要什么以及你计划使用什么样的用户范围。如果你想与几乎所有使用中的浏览器完全兼容，从 IE 5+ 开始（我说 IE 因为这个是最糟糕和最难兼容的）、Firefox、Chrome、Safari、Dolphin、移动手机浏览器等，闭包库的模块化设计使您能够在运行时计算特定于浏览器的 CSS，而不必是一个昂贵的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T23:38:03.253

它具有设计登录页面所需的非常组件。查看用于 AJAX 的 UI 控件和 goog.net。

[http://closure-library.googlecode.com/svn/trunk/closure/goog/demos/index.html](http://closure-library.googlecode.com/svn/trunk/closure/goog/demos/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T11:58:35.820

```
function setUp() {
    var li1 = new goog.ui.LabelInput('USER NAME');
            li1.render(goog.dom.getElement('d1'));
    var li2 = new goog.ui.LabelInput('PASSWORD');
            li2.render(goog.dom.getElement('d2'));  
    var fb1 = new goog.ui.Button('Login',
            goog.ui.FlatButtonRenderer.getInstance());
            fb1.render(goog.dom.getElement('fb1'));
         goog.events.listen(fb1, goog.ui.Component.EventType.ACTION,
            function(e) {
             alert('welcome');
            }); 
} 
```

在 ID 为“d1”、“d2”和“fb1”的 div 标签中访问上述脚本。

# apache - Apache URL 重写，具有未定义参数数量的 URL

> ID：12334006
> 
> 赞同：2
> 
> 时间：2012-09-08T19:59:04.457
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我有表单的网址

```
http://www.site.com/someCompany/someEmployee/name/someName/age/someAge/.../keyN/someValueN/ 
```

我正在尝试将它们转换为常规的 key=value 形式，但无法弄清楚。

你能帮我把它转换成

```
http://www.site.com/someCompany/someEmployee?name=someName&age=someAge&...&keyN=someValueN/ 
```

基本上，可以有任意数量的键和值，并在 URL 中指定为 /key/value/

我阅读了许多示例和教程，但没有一个解释处理具有可变数量参数的 URL。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:42:36.360

确保你打开了 mod_rewrite。

在文档根目录的 htaccess 文件中，添加这些（最好在您可能拥有的其他规则之上）：

```
# Start converting query parameters to path
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^/]+)/(.+?)\?[^\ ]+
RewriteCond %{QUERY_STRING} ^([^=]+)=([^&]+)&?(.*)$
RewriteRule ^([^/]+)/(.+)$ /$1/$2/%1/%2?%3 [L]

# done converting, redirect browser
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^/]+)/(.+?)\?[^\ ]+
RewriteCond %{QUERY_STRING} ^$
RewriteRule ^([^/]+)/(.+)$ /$1/$2 [R=301,L]

# internally rewrite paths to query strings
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/([^/]+)(.*) /$1/$2$5?$3=$4 [L,QSA]

# only someCompany/someEmployee left, pass it through
RewriteRule ^([^/]+)/([^/]+)/?$ /$1/$2 [L,R] 
```

这看起来有点复杂。但是前 2 条规则检查给定请求是否针对 2 个文件夹（例如`/something/somethingelse`），并带有查询字符串（之后的所有内容`?`），然后匹配名称/值对并将它们构造到 URI 路径中。当查询字符串为空时，将浏览器重定向到新 URL（不带查询字符串）。这使得当有人在他们的浏览器中输入 URL 时：

```
http://www.site.com/someCompany/someEmployee?name=someName&age=someAge&keyN=someValueN 
```

浏览器被重定向，因此地址栏中的 URL 如下所示：

```
http://www.site.com/someCompany/someEmployee/name/someName/age/someAge/keyN/someValueN/ 
```

然后第二组规则采用路径层次结构，保留前 2 个文件夹的任何内容（例如`/fooCompany/barEmployee`），并将每个 2 个文件夹更改为查询字符串中的名称/值对。基本上颠倒了前两条规则的作用，但它不会重定向浏览器。它只会在内部重写 URI。

# django - Windows 中的 PostgreSQL 连接池有哪些选项？

> ID：12334008
> 
> 赞同：0
> 
> 时间：2012-09-08T19:59:32.137
> 
> 标签：django, windows, postgresql, connection-pooling

我想开始使用 PgSQL 数据库的连接池。遗憾的是，限制是我必须在服务器中使用 Windows。[我最喜欢的pgpool](http://www.pgpool.net/mediawiki/index.php/Main_Page)不支持 Windows。

我读过[pgbouncer](http://pgfoundry.org/projects/pgbouncer)，但我从未尝试过。另一种选择是在应用层使用池。这是一个基于 Django 的应用程序，所以我可以使用[django-db-pool](https://github.com/gmcguire/django-db-pool)。

还有其他选择吗？

你觉得哪一个更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T12:01:24.350

当应用内连接池可用且已知运行良好时，它通常更可取。我唯一例外的是当许多不同的应用程序或应用程序服务器使用同一个数据库时；那么我想要一个外部池。

有关池选项，请参阅：

*   [pg wiki：连接池](http://wiki.postgresql.org/wiki/Replication,_Clustering,_and_Connection_Pooling#Connection_Pooling_and_Acceleration)
*   [pg wiki：数据库连接数](http://wiki.postgresql.org/wiki/Number_Of_Database_Connections)

# sql - 避免 Windows Azure 中的主键重复

> ID：12334012
> 
> 赞同：3
> 
> 时间：2012-09-08T20:00:22.763
> 
> 标签：sql, azure, unique

在 Windows Azure 表存储中，没有允许 ID 自动递增的“类型”。我以为我可以使用“IsIdentity”，但复选框是灰色的（这应该让我自动递增，对吧？）。

有人可以告诉我如何获得自动递增字段或解决方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T21:11:09.897

除非出于某种原因，您实际上需要单调递增的数字键，否则使用`DateTime.UtcNow.Ticks.ToString()`是通常的方法。（因为Table Storage上的PartitionKey值是字符串，所以需要转换一下。）

这种方法的优点是表存储行自动按 PartitionKey（然后按 RowKey）排序，因此您将按照插入的顺序重新获取行，就像 SQL Server 中的 IDENTITY 列一样。

如果您希望最近返回的记录最先返回，请`(long.MaxValue - DateTime.UtcNow.Ticks).ToString()`改用。

请注意，第一种方法将给出未来 1158 年的 18 位数字。如果您想避免 Y3160 错误，请考虑使用前导零 ( `DateTime.UtcNow.Ticks.ToString("0000000000000000000")`) 填充该值。

第二种方法确实会在很长一段时间内给出一个 19 位数字，远远超过 DateTime.MaxValue，所以你可能在那里没问题。

还要记住，通过负载平衡等，如果两台服务器同时创建一条记录，您获得重复记录的可能性非常小，因此您应该具有将键值增加一的重试语义。

# perl - 如何在 perl 中实现 addate 实用程序？

> ID：12334014
> 
> 赞同：1
> 
> 时间：2012-09-08T20:00:52.443
> 
> 标签：perl, date, strftime

我没有使用 perl 的经验，我需要创建一个实用程序，它会在添加偏移量后打印日期，格式字符串是 strftime 格式字符串。

> 格式：./adddate number_of_days [format_string]
> 
> 示例：./adddate -1 "%a, %b %d" # 打印昨天的日期

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T21:27:16.253

经过一番研究，我能够编写代码：

```
#!/usr/bin/perl 
use DateTime;
$offset = $ARGV[0];
$format = $ARGV[1];
$dt = DateTime->now();
$dt->add( days => $offset );
print $dt->strftime($format)."\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:51:22.740

要添加天数，只需`tm_mday`以细分形式增加时间字段（由 返回`localtime`）。A `mktime`-`localtime`往返将重新规范化它，考虑月或年的翻转。

```
use strict;
use feature qw( say );
use POSIX qw( mktime strftime );

my $offset = $ARGV[0];
my $format = $ARGV[1];

my @t = localtime;
$t[3] += $offset;  # tm_mday field

say strftime( $format, localtime mktime @t ); 
```

所有核心模块。

# ios - Facebook 好友请求对话框在 UIWebView 上停止工作

> ID：12334018
> 
> 赞同：0
> 
> 时间：2012-09-08T20:01:09.467
> 
> 标签：ios, facebook

我使用 stackoverflow 上的帖子在 iPhone 上实现了“添加朋友”对话框：
[Facebook 朋友对话框返回“未知方法”错误](https://stackoverflow.com/questions/5372456/facebook-friends-dialog-returns-unknown-method-error)，它是为 Android 实现的，但很容易转换为 iPhone。

它工作正常，直到几天前它停止工作，现在它给我一个错误：

HitMe 发生错误。请稍后再试。
API 错误代码：3
API 错误描述：未知方法
错误消息：此显示类型不支持此方法

我尝试在 facebook 路线图中搜索：[https](https://developers.facebook.com/roadmap/) ://developers.facebook.com/roadmap/但找不到任何提及更改的内容，是否有人遇到过此问题或知道在 iPhone 上实现“好友请求”对话框的另一种方法?

这是我为实现“好友请求”对话框而对 Facebook 2.0 sdk 所做的更改：

在 Facebook.m 中的 dialog:andParams:andDelegate: 方法中，我将原始代码替换为以下代码：

```
-(void)dialog:(NSString *)action
 andParams:(NSMutableDictionary *)params
 andDelegate:(id <FBDialogDelegate>)delegate {

[_fbDialog release];

NSString *dialogURL;

if ([action isEqualToString:kFriends]) 
{
    dialogURL = [kDialogBaseURLForFriends stringByAppendingString:action];
}
else 
{
    dialogURL = [kDialogBaseURL stringByAppendingString:action];
}

if ([action isEqualToString:kFriends])
{
    [params setObject:@"popup" forKey:@"display"];
}
else 
{
    [params setObject:@"touch" forKey:@"display"];
}

[params setObject:kSDKVersion forKey:@"sdk"];
[params setObject:kRedirectURL forKey:@"redirect_uri"];

if ([action isEqualToString:kLogin]) {
    [params setObject:@"user_agent" forKey:@"type"];
    _fbDialog = [[FBLoginDialog alloc] initWithURL:dialogURL loginParams:params delegate:self];
} else {
    [params setObject:_appId forKey:@"app_id"];
    if ([self isSessionValid]) {
        [params setValue:[self.accessToken stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]
                  forKey:@"access_token"];
        [self extendAccessTokenIfNeeded];
    }

    // by default we show dialogs, frictionless cases may have a hidden view
    BOOL invisible = NO;

    // frictionless handling for application requests
    if ([action isEqualToString:kApprequests]) {        
        // if frictionless requests are enabled
        if (self.isFrictionlessRequestsEnabled) {
            //  1\. show the "Don't show this again for these friends" checkbox
            //  2\. if the developer is sending a targeted request, then skip the loading screen
            [params setValue:@"1" forKey:@"frictionless"];  
            //  3\. request the frictionless recipient list encoded in the success url
            [params setValue:@"1" forKey:@"get_frictionless_recipients"];
        }

        // set invisible if all recipients are enabled for frictionless requests
        id fbid = [params objectForKey:@"to"];
        if (fbid != nil) {
            // if value parses as a json array expression get the list that way
            SBJsonParser *parser = [[[SBJsonParser alloc] init] autorelease];
            id fbids = [parser objectWithString:fbid];
            if (![fbids isKindOfClass:[NSArray class]]) {
                // otherwise seperate by commas (handles the singleton case too)
                fbids = [fbid componentsSeparatedByString:@","];
            }                
            invisible = [self isFrictionlessEnabledForRecipients:fbids];             
        }
    }

    _fbDialog = [[FBDialog alloc] initWithURL:dialogURL
                                       params:params
                              isViewInvisible:invisible
                         frictionlessSettings:_frictionlessRequestSettings 
                                     delegate:delegate];
}

[_fbDialog show]; 
```

}

其中 kFriends 是 @"friends" 而 kDialogBaseURLForFriends 是 @" [https://facebook.com/dialog/](https://facebook.com/dialog/) "

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:07:10.507

它适用于IOS6。

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    if ([(NSMutableURLRequest *)request respondsToSelector:@selector(setValue:forHTTPHeaderField:)]) {
        [(NSMutableURLRequest *)request setValue:@" Safari/537.1" forHTTPHeaderField:@"User_Agent"];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T14:23:26.383

使用 Facebook 发送对话框 (https://www.facebook.com/dialog/send?....) API 调用时，我在这里看到了同样的问题。

在 iOS 和 Android 应用程序中运行良好数月的调用现在失败并显示 API 错误代码：3，如上所述。

我已经尝试完全省略 display=iframe，或者更改为其他显示类型，如弹出窗口等。它仍然不起作用。[http://developers.facebook.com/docs/reference/dialogs/](http://developers.facebook.com/docs/reference/dialogs/)上的文档仍然提到 iOS 和 Android 作为此类对话框的有效用例。在桌面浏览器中尝试相同的 URL 效果很好。

**更新**：找到至少适用于 Android 的解决方法。只需更改 webview 容器的用户代理：

```
webView.getSettings().setUserAgentString("Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/22.0.1207.1 Safari/537.1"); 
```

这至少让发送对话框在 Android 上再次为我工作。它很丑陋，但它有效（目前）。

# php - PHP检测和转换特殊字符？

> ID：12334022
> 
> 赞同：3
> 
> 时间：2012-09-08T20:02:29.963
> 
> 标签：php, unicode, hex, ascii, special-characters

在 PHP 中，当我读取数据时，假设数据（字符串块）包含 HTML 特殊字符十进制十六进制代码，例如：
`This is a sample string with &#x153; and &#x161;`

我们可以说上面的十六进制代码是其对应符号的源代码，这些将在浏览器中呈现为正确的符号。

但我想要做的是，对于这些字符（例如），我希望这些 HEX(es) 作为转换后的原始字符符号，如：
`This is a sample string with œ and š`

那么如何**检测字符串中的任何十进制十六进制代码并将它们中的每一个转换为最终符号**，而不是保留十六进制代码？

注意：
为了更清楚，是否有任何功能可以**检测并将**十六进制转换为符号？
喜欢：
`&#x153;`=> `œ`
`&#x161;`=>`š`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:10:59.780

```
$s = "This is a sample string with &#x153; and &#x161;";
echo html_entity_decode($s, ENT_COMPAT, 'UTF-8'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T20:07:10.743

这些是 HTML 实体 - 您可以使用[`html_entity_decode()`](http://php.net/manual/en/function.html-entity-decode.php).

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-08T20:05:31.567

确保您使用的任何东西（数据库表、用于数据交换的 json 或 xml、html 文件等）都是 UTF-8 格式

# mysql - MySQL 存储过程语法 IF else

> ID：12334026
> 
> 赞同：4
> 
> 时间：2012-09-08T20:02:52.093
> 
> 标签：mysql, stored-procedures

伙计们，我找不到这个问题的解决方案，它总是给出我尝试过的语法错误...你能帮我看看吗，谢谢

```
create procedure SP_Insert(in MatchIDP int,in TipID int, in User int)
begin

if exists(
select BetSlipID from betslips where MatchID = MatchIDP and UserID = User)
(
   update Betslips set TipID = 2
)
else
(
   insert into Betslips (MatchID,TipID , UserID) value (MatchIDP,TipID,User)
)
end if
end 
```

我只想在插入之前检查表中是否存在数据，并且我不能使用“重复键更新”，因为我的主键没有任何意义，它的表中我放入了 2-3 个外键......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:08:09.477

你的`IF`语法不正确。它应该是：

```
delimiter ;;

create procedure SP_Insert(in MatchIDP int,in TipID int, in User int)
begin

if exists(
  select * from betslips where MatchID = MatchIDP and UserID = User
) then
  update Betslips set TipID = 2; -- where ?
else
  insert into Betslips (MatchID,TipID , UserID) values (MatchIDP, TipID, User);
end if;

end;; 
```

但是，如果您永远不允许`(MatchID, UserID)`在您的 中重复条目`Betslips`，为什么不在`UNIQUE`这些列中定义一个约束，然后使用[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/en/insert-on-duplicate.html)：

```
ALTER TABLE Betslips ADD UNIQUE INDEX (MatchID, UserID);

INSERT INTO Betslips (MatchID, TipID, UserID) VALUES (?, ?, ?)
ON DUPLICATE KEY UPDATE TipID = 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T20:10:49.120

```
CREATE PROCEDURE SP_Insert (IN MatchIDP INT, IN TipID INT, IN USER INT)
BEGIN
        DECLARE existing INT DEFAULT NULL;

        SELECT BetSlipID
        INTO   existing
        FROM   betslips
        WHERE  MatchID = MatchIDP
        AND    UserID = USER;

        IF existing is not null THEN
            UPDATE Betslips SET TipID = 2;
        ELSE
            INSERT INTO Betslips (MatchID, TipID, UserID)
            VALUES (MatchIDP, TipID, USER);
        END IF;

END 
```

# html - 带有填充的 div 内的 img

> ID：12334028
> 
> 赞同：3
> 
> 时间：2012-09-08T20:03:01.567
> 
> 标签：html, css, image, padding

我正在尝试将 div 包裹在图像周围。图像大于 div 大小。通过使用，`Overflow: hidden`我将图像的一部分隐藏在 div 之外。现在我想为我的 div 设置填充，所以图像不会填满所有的 div 区域。但似乎`img`忽略了右下角的填充值。

更清楚地说，这就是我现在所拥有的（[http://jsfiddle.net/sAYEq/4/](http://jsfiddle.net/sAYEq/4/)）：
![在此处输入图像描述](../Images/c115c64e94f71de6a2c50d71b1b87bd8.png)

这就是我想要实现的目标：
![在此处输入图像描述](../Images/29738a7fe049f9d739d272ee911200ff.png)

请注意，我不想设置图像的宽度/高度，因为我希望图像具有实际大小，并且不应显示 div 之外的部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T20:14:51.330

只需给您的包装器`100%`宽度和高度：

```
#wrapper{
    width: 100%;
    height: 100%;
    overflow: hidden;
    display: inline-block;
    border: 1px solid green;
} 
```

它会[按您的](http://jsfiddle.net/sAYEq/7/)意愿工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T20:16:49.030

像这样的东西

```
.parent {
  width: 400px; 
  height: 200px;
  outline: 1px solid red;
  overflow: hidden;
  border: 10px solid white;
} 
```

# android - 使位图适合屏幕作为墙纸

> ID：12334029
> 
> 赞同：2
> 
> 时间：2012-09-08T20:03:14.293
> 
> 标签：android, bitmap, wallpaper

我想设置一个位图作为机器人壁纸，我已经弄清楚了那部分。然而，图像总是太大、偏离中心并被裁剪。我试图将位图的大小调整为显示大小，但我仍然得到相同的结果，这是我的一些代码。

```
Display display = getWindowManager().getDefaultDisplay();

final int maxWidth = display.getWidth();
final int maxHeight = display.getHeight();

Bitmap bitmap = BitmapFactory.decodeStream((InputStream)new URL(img_url).getContent());     

    int imageHeight = bitmap.getHeight();
if ( imageHeight > maxHeight )
imageHeight = maxHeight;
int imageWidth = (imageHeight*bitmap.getWidth()) / bitmap.getHeight();
if ( imageWidth > maxWidth ) {
imageWidth = maxWidth;
imageHeight = (imageWidth*bitmap.getHeight()) / bitmap.getWidth();
}

Bitmap resizedBitmap = Bitmap.createScaledBitmap( bitmap, imageWidth, imageHeight, true);

    myWallpaperManager.setBitmap(resizedBitmap); 
```

任何人都可以帮我将壁纸图像的大小和居中正确设置为壁纸吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:12:52.893

尝试这样的事情。壁纸尺寸通过[`WallpaperManager.getDesiredMinimumHeight`](http://developer.android.com/reference/android/app/WallpaperManager.html#getDesiredMinimumHeight%28%29)和获取[`WallpaperManager.getDesiredMinimumWidth`](http://developer.android.com/reference/android/app/WallpaperManager.html#getDesiredMinimumHeight%28%29)。如果其中任何一个是`<= 0`，它会请求默认显示的尺寸。

```
/* determine wallpaper dimensions */
final int w = myWallpaperManager.getDesiredMinimumWidth();
final int h = myWallpaperManager.getDesiredMinimumHeight();
final boolean need_w = w <= 0;
if (need_w || h <= 0) {
  final Rect rect = new Rect();
  getWindowManager().getDefaultDisplay().getRectSize(rect);
  if (need_w) {
    w = rect.width();
  } else {
    h = rect.height();
  }
}

/* create resized bitmap */
final Bitmap resized = Bitmap.createScaledBitmap(bitmap, w, h, false); 
```

这不会保留纵横比，但告诉我它是如何进行的。

# perl - Perl：如何以递归方式停止 File::Find 进入目录？

> ID：12334037
> 
> 赞同：4
> 
> 时间：2012-09-08T20:04:34.270
> 
> 标签：perl

我正在查看 Perl 的`File::Find`模块并按以下方式进行了尝试：

```
#!/usr/bin/perl

use warnings;
use strict;

use File::Find;

find({wanted => \&listfiles,
        no_chdir => 1}, ".");

sub listfiles{
    print $File::Find::name,"\n";
} 
```

现在当我运行它时，我得到以下输出：

```
Noob@Noob:~/tmp$ perl test.pl 
.
./test.txt
./test.pl
./test1.txt
./hello
./hello/temp.txt 
```

现在，我在想通过设置`no_chdir=>1`我会让我的代码在遇到任何目录时不进入任何目录。但输出清楚地表明我的代码正在进入`hello`目录并列出其文件。

那么，如何更改我的代码以使其表现得像`ls`而不进入任何目录。另外`./`，我的文件/目录名称前面可以删除吗？

我正在使用 Perl 5.14。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-08T20:22:54.157

`$File::Find::prune`可用于避免递归到目录中。

```
use File::Find qw( find );

my $root = '.';
find({
   wanted   => sub { listfiles($root); },
   no_chdir => 1,
}, $root);

sub listfiles {
   my ($root) = @_;
   print "$File::Find::name\n";
   $File::Find::prune = 1  # Don't recurse.
      if $File::Find::name ne $root;
} 
```

`prune`如果您愿意，可以有条件地设置。

```
use File::Basename qw( basename );
use File::Find     qw( find );

my %skip = map { $_ => 1 } qw( .git .svn ... );

find({
   wanted   => \&listfiles,
   no_chdir => 1,
}, '.');

sub listfiles {
   if ($skip{basename($File::Find::name)}) {
      $File::Find::prune = 1;
      return;
   }

   print "$File::Find::name\n";
} 
```

`no_chdir`没有必要——它与你想要做的事情无关——但我喜欢它的作用（防止对 cwd 进行更改），所以我把它留在了里面。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-08T20:44:18.307

虽然我认为 TLP 的建议使用`glob`或者`opendir`是最好的，但另一个选择是使用[File::Find::Rule](http://search.cpan.org/~rclamp/File-Find-Rule-0.33/lib/File/Find/Rule.pm) --an interface for [Find::File](http://search.cpan.org/~rjbs/perl-5.16.1/lib/File/Find.pm) --with`maxdepth(1)`来停止目录递归：

```
use Modern::Perl;
use File::Find::Rule;

my $directory = '.';
my @files = File::Find::Rule->maxdepth( 1 )
                            ->file
                            ->name( '*.txt' )
                            ->in( $directory );
say for @files; 
```

在这种情况下，只会`*.txt`将文件名传递给`@files`.

样本输出：

```
A.txt
B.txt
columns.txt
data.txt 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-08T20:34:33.537

最简单的方法是使用`preprocess`参数从正在处理的每个目录中删除所有目录。这意味着它永远不会低于指定要搜索的目录

传递给`preprocess`子程序的参数列表是当前目录中的节点 - 的输出`readdir`。返回的值是相同的列表，但会根据您希望它们的处理方式进行排序和过滤。此代码仅删除所有目录

删除首字母的最佳方法`./`是使用`rel2abs`from [`File::Spec`](https://metacpan.org/module/File%3a%3aSpec)。请注意，启用`no_chdir`将破坏代码，因为默认情况下`rel2abs`将当前工作目录作为基本目录。使用`no_chdir`意味着显式传递基本目录参数

```
use strict;
use warnings;

use File::Find 'find';
use File::Spec;

find({ wanted => \&listfiles, preprocess => \&nodirs }, '.');

sub nodirs {
  grep ! -d, @_;
}

sub listfiles {
  my $filename = File::Spec->abs2rel($File::Find::name);
  print $filename, "\n";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-01T09:03:47.933

*对“想要”*使用*预处理*和 nop

 *```
use File::Find qw( find );

my @f;

find(
{ 
    wanted => sub {},
    preprocess => sub {
        push(@f, grep !/^\.?\./,@_); # @_ is equivalent to readdir(DIR)
                                     # '.' and '..' come for free
        # find uses what you return here for processing. 
        # since nothing (an empty list) is returned, it has nothing to recurse on
     }
},
@dirs); 
```

如果您想要完整路径，请像这样映射 grep

```
push(@f, map { Spec->catfile($File::Find::dir,$_); } grep !/^\.?\./,@_); 
```

要不就

```
 push(@f, map { $File::Find::dir . '/' . $_); } grep !/^\.?\./,@_); 
```

对于后者，您可能会在 Windows 上混合使用 \ 和 /，具体取决于您如何指定 @dirs 的元素*

# facebook - 我网站上的 Facebook 登录框 API 错误代码：191

> ID：12334041
> 
> 赞同：0
> 
> 时间：2012-09-08T20:05:06.310
> 
> 标签：facebook, api, facebook-javascript-sdk, facebook-login

我想在我的网站上添加 facebook 登录选项，但总是得到，

Abhishekmiet 发生错误。请稍后再试。

API错误代码：191 API错误描述：指定的URL不属于应用程序错误消息：无效的redirect_uri：应用程序配置不允许给定的URL。

我会在我的应用程序设置中设置以下内容： Site-url: http[://]ip_address Canvas url: http[://]ip_address/ （http 后删除的方括号） ip_address 是我在 xxxx 模式下的 IP 地址，出于安全目的，我没有发布我的实际 ip。我正在使用以下 php 代码段来生成基本 url，

```
if($_SERVER['HTTP_HOST']=='localhost'){
$base_url='http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
}else{
$base_url='http://'.$_SERVER['HTTP_HOST'];  
} 
```

我已经在本地服务器和实时服务器上对其进行了测试，但总是出现相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T12:49:07.220

您的基本网址不完整。试试这个...

```
$protocol = "http";

if(isset($_SERVER['HTTPS']))
{
    if($_SERVER['HTTPS'])
    {
        $protocol = "https";
    }
}
//Check if the protocol is HTTP or HTTPS

$domainName = $_SERVER['HTTP_HOST'];

$appNamespace = "fercheckin";
//Your namespace specified in your app settings

$appFolder = "it3196/tbfer/fercheckin/";
//Your Canvas/Page Tab URL (Example:http://localhost/it3196/tbfer/fercheckin/)

$fbconfig['appBaseUrl'] =   $protocol."://apps.facebook.com/".$appNamespace;
//For App on Facebook application

$fbconfig['baseUrl']    =   $protocol."://" . $domainName . "/" . $appFolder;
//For Page Tab application 
```

这适用于本地服务器和实时服务器上的 Facebook 上的应用程序和页面选项卡应用程序。

# android - SDK 安装的 MOTODEV Studio 问题

> ID：12334042
> 
> 赞同：2
> 
> 时间：2012-09-08T20:05:08.930
> 
> 标签：android, sdk, installation, motodev-studio

我以前有 Java 编程经验，也有大学 Java 培训，所以我希望用 Android 做一些 Java 应用程序开发。为此，我从摩托罗拉下载并安装了 MOTODEV studio，它部分基于 Eclipse。

但是它似乎默认只有一个适用于Android 4的SDK，我需要适用于Android 2.3的Android SDK，但是没有安装，我读过安装SDK包的方法是打开SDK管理器，应该有一个下载和安装 Android SDK 的选项，但我看不到可以在哪里完成。

有人可以就如何使用 MOTODEV Studio 安装 SDK 包提供一些指导吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:41:56.310

Window -> Android SDK Manager

Wait for the list to load -> Select what you need -> Press "Install x packages"

# c - 使用 FindFirstFileEx 函数递归遍历目录

> ID：12334043
> 
> 赞同：1
> 
> 时间：2012-09-08T20:05:13.297
> 
> 标签：c, winapi, windows-7

我已经调试过了，但我仍然不知道可能是什么罪魁祸首。

```
#ifndef UNICODE 
#define UNICODE
#endif

#include <stdio.h>
#include <Windows.h>

void EndWithBackslash(TCHAR* string)
{
    if(string[wcslen(string)-1] != TEXT('\\')) wcscat(string,TEXT("\\"));
}

void Browse(const TCHAR* curdir)
{
    HANDLE hFoundFile;
    WIN32_FIND_DATA foundFileData;
    TCHAR buffer[MAX_PATH];

    wcscpy(buffer,curdir);

    EndWithBackslash(buffer);

    SetCurrentDirectory(buffer);

    hFoundFile = FindFirstFileEx(TEXT("*"),FINDEX_INFO_LEVELS::FindExInfoBasic,&foundFileData ,FINDEX_SEARCH_OPS::FindExSearchLimitToDirectories ,NULL , NULL);

    if(hFoundFile != INVALID_HANDLE_VALUE)
    {
        do
        {
            if ((foundFileData.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY) && wcscmp(foundFileData.cFileName,TEXT(".")) && wcscmp(foundFileData.cFileName,TEXT("..")) )
            {   
                EndWithBackslash(buffer);
                wcscat(buffer,foundFileData.cFileName);
                wprintf(TEXT("%s\n"),buffer);

                Browse(buffer);
            }
        }
        while(FindNextFile(hFoundFile,&foundFileData));
        FindClose(hFoundFile);

    }
}

int main(void) 
{   
    Browse(TEXT("F:\\"));

    system("Pause");
    return 0;
} 
```

输出：

> F:\$RECYCLE.BIN
> F:\$RECYCLE.BIN\S-1-5-21-1271883188-2384997935-49719322-1000
> F:\$RECYCLE.BIN\希捷
> F:\$RECYCLE.BIN\希捷\希捷Dashboard 2.0
> F:\$RECYCLE.BIN\Seagate\Seagate Dashboard 2.0\System Volume Information
> F:\$RECYCLE.BIN\Seagate\Seagate Dashboard 2.0\System Volume Information\Video

“第一层”到底长什么样：

![在此处输入图像描述](../Images/15fa7e958c2ee98630daa00966c341de.png)

你能指出我的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:20:49.960

内部应该是：

```
 TCHAR pszItemPath[MAX_PATH];
            wcscpy(pszItemPath, buffer);
            // NOTE: Now when we took a copy of buffer, we don't touch it so that next iteration would have it good and untouched
            EndWithBackslash(pszItemPath);
            wcscat(pszItemPath, foundFileData.cFileName);
            wprintf(TEXT("%s\n"), pszItemPath); 
```

# c# - 实体框架 4.3.1 -> 5.0 异常：“EntityType 没有定义键。定义此 EntityType 的键。”

> ID：12334044
> 
> 赞同：7
> 
> 时间：2012-09-08T20:05:21.830
> 
> 标签：c#, key, entity-framework-5, entity-framework-4.3.1

在 Entity Framework 4.3.1 中，我有以下模型，它们运行良好：

```
public class BaseUser
{
    [Key]
    [MaxLength(100)]
    public string Username { get; set; }
}

[Table("AppUser")] // Ensures EF Code First uses Table-per-Type
public class AppUser : BaseUser
{
    [MaxLength(200)]
    public string About { get; set; }
} 
```

升级到 EF 5.0 后，当我尝试运行此应用程序并访问关联的 DbContext 时出现以下异常：

```
EntityType 'AppUser' has no key defined. Define the key for this EntityType. 
```

我该如何解决这个问题？这似乎是一种回归。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T21:05:38.343

此异常是由混合 EF 版本引起的。

BaseUser 是在使用 EF 4.3.1 的共享项目中定义的。AppUser 在使用 EF 5.0 的项目中。这个令人困惑的异常是由于尝试从尚未升级到 EF 5.0 的项目中的模型继承而导致的。拆分共享项目并升级此处引用的项目解决了该问题。

如果其他人遇到这种情况，值得指出的是升级有点尴尬。由于 NuGet 似乎没有注意到升级的必要性，它允许您在其上安装 EF 5.0，在安装后将新版本列为 4.4，并要求您在模型类中包含以下两个 using 语句，因为一些 EF 数据注释被移动（重定向），而一些则没有：

```
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema; 
```

# r - 处理比内存大的数据文件的透明方式？

> ID：12334050
> 
> 赞同：5
> 
> 时间：2012-09-08T20:05:49.507
> 
> 标签：r, bigdata

> **可能重复：**
> [修剪一个巨大的 (3.5 GB) csv 文件以读入 R](https://stackoverflow.com/questions/3094866/trimming-a-huge-3-5-gb-csv-file-to-read-into-r)

R 是否有一种好方法可以透明地处理不适合内存的数据？有一些用于处理大数据的包，但我不想在不了解实际接口是什么的情况下决定部署一个。

例如，我可能有一组记录一起无法放入内存。但是，如果我要加载一个子集，它由一个非常简单的数据框表示，我可以对该数据进行各种有用的选择和聚合。是否有某种包可以让我将整个集合视为单个数据框并透明地对其执行相同的操作？

# algorithm - 理解 List.fold_left 并使用它实现插入排序

> ID：12334058
> 
> 赞同：2
> 
> 时间：2012-09-08T20:07:47.507
> 
> 标签：algorithm, scala, functional-programming, ocaml

我正在尝试学习 OCaml，但我仍在努力使用折叠功能。我做了一些研究，发现以下代码片段（用 Scala 编写）使用 foldleft 实现插入排序。我想我明白了，但我对 Scala 一无所知，所以我仍然需要澄清一下。所以，我想我的问题是 2 倍的（哈，明白了吗？），这个函数将如何用 Ocaml 编写，它实际上是如何工作的？

```
def insertionSort[A <% Ordered[A]](list: List[A]): List[A] =
  list.foldLeft(List[A]()) { (r,c) =>
    val (front, back) = r.span(_ < c)
    front ::: c :: back
  } 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:24:27.973

正如我上面评论的那样，这不是一种特别好的排序方式（假设我理解 Scala 代码，我可能不理解）。这是它似乎在做什么的 OCaml 翻译：

```
let insertion_sort l =
    let add1 sortedl x =
        let le, gt = List.partition ((>=) x) sortedl
        in
            le @ [x] @ gt
    in      
        List.fold_left add1 [] l 
```

在您编写 FP 代码一段时间后，折叠变得很自然。其目的是以已知顺序（例如，最左边的优先）处理来自数据结构（例如，列表）的一系列元素，同时保持一些在您进行处理时传递的状态。在最简单的情况下（如这里），状态也是您的最终答案。在其他情况下，您需要携带一些额外的状态以及最终答案。在这些情况下，您会在最后提取最终答案。

也许我不应该这么说，但是 fold 就像`for(;;)`C 家族中的语句一样，只是它封装了您计划在循环中修改的所有状态。通过这种方式，它是一种很好控制的迭代形式。

对应看起来像这样：

```
for(state = S, x = first(D); more(D); x = next(D)) { state = E(state, x) }

fold_left (fun state x -> E state x) S D 
```

在你习惯了封装修改后的状态之后，它通常会变得非常有用。很多时候，你折叠的函数（如上面的 add1 ）在许多其他情况下也很有用，因为折叠的结构需要在那个地方有一个普遍有用的函数。

请注意，特别是 fold 函数包含有关如何遍历数据结构的所有知识。folded 函数只需要知道如何处理每个元素。因此，您可以在不更改任何其他代码的情况下自由更改数据结构（和折叠）。您还可以使用`add1`具有不同数据结构的相同折叠函数（如上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-09T07:03:29.053

```
let insertion_sort (l: int list) : int list = 
  let rec insert (e: int) (a: int list) =
    match a with
    | [] -> e::a 
    | h::t -> if (e > h) then e::a else h::(insert e t)
  in 
  List.rev (List.fold_left (fun a e -> insert e a) [] l) 
```

List.fold_left 接受一个函数、一个累加器和一个列表。累加器应该被初始化为一个空列表 []，这样当 List.fold_left 接收到一个空列表作为 'l' 参数时，它将返回一个空列表，因为没有任何东西可以排序。

(fun ae -> insert ea) 更新累加器。当 List.fold_left 折叠列表时，它获取每个元素并将其插入到排序列表的正确位置。帮助函数 let rec insert 执行这项工作。

```
let rec insert (e: int) (a: int list) =
  match a with
  | [] -> e::a 
  | h::t -> if (e > h) then e::a else h::(insert e t) 
```

它首先查看排序列表是否为空。如果是，则将元素插入到空列表中。否则（排序列表不为空），然后将要插入的元素与排序列表的头部进行比较，并递归检查以找到该元素在排序列表中的排序位置。

最后，调用 List.rev 是因为 insert 函数使用 cons 运算符 (::) 将元素附加到列表的前面。因此，最终名单必须颠倒过来。

# hibernate - 挂毯apache错误http 500日志

> ID：12334059
> 
> 赞同：0
> 
> 时间：2012-09-08T20:07:50.753
> 
> 标签：hibernate, tomcat, logging, tapestry

我的项目犯了这个错误，我没有弄错，这是来自浏览器的错误日志。 [日志.txt](http://www.youtube.com/watch?v=qIdM4KQOtH8&list=PL4AFF701184976B25&index=21&feature=plpp_video)

* * *

我不知道什么是兼容的，这些库是导入的

```
 .:
activation-1.1.jar
antlr-2.7.6.jar
antlr-runtime-3.1.1.jar
c3p0-0.9.1.jar
chenillekit-core-1.3.2.jar
chenillekit-google-1.3.2.jar
chenillekit-hibernate-1.3.2.jar
chenillekit-image-1.3.2.jar
chenillekit-tapestry-1.3.2.jar
commons-beanutils-1.7.0.jar
commons-beanutils-core-1.8.0.jar
commons-codec-1.3.jar
commons-collections-3.2.1.jar
commons-configuration-1.6.jar
commons-digester-1.8.jar
commons-fileupload-1.2.jar
commons-io-1.3.jar
commons-lang-2.4.jar
CopyLibs
dom4j-1.6.1.jar
eclipselink
eclipselinkmodelgen
ejb3-persistence
geronimo-spec-jta-1.0-M1.jar
hibernate-c3p0-3.6.0.Final.jar
hibernate-commons-annotations-3.2.0.Final.jar
hibernate-core-3.6.0.Final.jar
hibernate-jpa-2.0-api-1.0.0.Final.jar
hibernate-support
javaee-endorsed-api-6.0
javaee-endorsed-api-6.0-2
javassist-3.12.1.GA.jar
jsontools-core-1.5.jar
junit
junit-3.8.2.jar
junit_4
junit-4.5.jar
junit-4.5-src.jar
kaptcha-2.3.2.jar
libs
log4j-1.2.14.jar
mail-1.4.jar
mysql-connector-java-5.1.13-bin.jar
mysql-connector-java-5.1.6.jar
nblibraries-private.properties
nblibraries.properties
ognl-2.7.3.jar
org-netbeans-modules-java-j2seproject-copylibstask.jar
slf4j-api-1.6.1.jar
slf4j-log4j12-1.6.1.jar
Tap5
tapestry5-annotations-5.2.4.jar
tapestry-core-5.2.6.jar
tapestry-func-5.2.4.jar
tapestry-hibernate-5.2.6.jar
tapestry-hibernate-core-5.2.6.jar
tapestry-ioc-5.2.4.jar
tapestry-json-5.2.6.jar
tapestry-upload-5.2.4.jar
tapx-core-1.1-20110620.210912-27.jar
tapx-core-1.2-20110705.222421-4.jar
tapx-datefield-1.1-20110617.214353-17.jar
tapx-datefield-1.2-20110705.222544-4.jar

./CopyLibs:
org-netbeans-modules-java-j2seproject-copylibstask.jar

./eclipselink:
eclipselink-2.2.0.jar
eclipselink-javax.persistence-2.0.jar

./eclipselinkmodelgen:
eclipselink-jpa-modelgen-2.2.0.jar

./ejb3-persistence:
ejb3-persistence.jar

./hibernate-support:
antlr-2.7.6.jar
asm-attrs.jar
asm.jar
cglib-2.1.3.jar
commons-collections-2.1.1.jar
commons-logging-1.1.jar
dom4j-1.6.1.jar
ehcache-1.2.3.jar
hibernate3.jar
hibernate-annotations.jar
hibernate-commons-annotations.jar
hibernate-entitymanager.jar
hibernate-tools.jar
javassist.jar
jdbc2_0-stdext.jar
jta.jar

./javaee-endorsed-api-6.0:
javaee6-doc-api.zip
javax.annotation.jar
jaxb-api-osgi.jar
webservices-api-osgi.jar

./javaee-endorsed-api-6.0-2:
javaee6-doc-api.zip
javax.annotation.jar
jaxb-api-osgi.jar
webservices-api-osgi.jar

./junit:
junit-3.8.2-api.zip
junit-3.8.2.jar

./junit_4:
junit-4.5-api.zip
junit-4.5.jar
junit-4.5-src.jar

./Tap5:
antlr-2.7.6.jar
antlr-runtime-3.1.1.jar
asm-1.5.3.jar
asm-attrs-1.5.3.jar
cglib-2.1_3.jar
commons-codec-1.3.jar
commons-collections-2.1.1.jar
commons-logging-1.0.4.jar
dom4j-1.6.1.jar
ehcache-1.2.3.jar
javassist-3.12.1.GA.jar
javassist-3.4.GA.jar
jta-1.0.1B.jar
log4j-1.2.14.jar
slf4j-api-1.6.1.jar
slf4j-log4j12-1.6.1.jar
tapestry5-annotations-5.2.6.jar
tapestry-core-5.2.6.jar
tapestry-func-5.2.6.jar
tapestry-ioc-5.2.6.jar
tapestry-json-5.2.6.jar
tapx-core-1.1-20110620.210912-27.jar
tapx-core-1.2-20110705.222421-4.jar
tapx-datefield-1.1-20110617.214353-17.jar
tapx-datefield-1.2-20110705.222544-4.jar 
```

一切看起来都很正常，除了我正在尝试将休眠继承与挂毯一起使用的一件事。

父类代码

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package pz850.entities;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.Collection;
import javax.persistence.Basic;
import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Inheritance;
import javax.persistence.InheritanceType;
import javax.persistence.ManyToOne;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.OneToMany;
import javax.persistence.Table;
import javax.xml.bind.annotation.XmlRootElement;
import org.hibernate.annotations.NotFound;
import org.hibernate.annotations.NotFoundAction;

/**
 *
 * @author nikola
 */
@Entity
@Table(name = "GRUPA")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Grupa.findAll", query = "SELECT g FROM Grupa g"),
    @NamedQuery(name = "Grupa.findByGrupaId", query = "SELECT g FROM Grupa g WHERE g.grupaId = :grupaId"),
    @NamedQuery(name = "Grupa.findByGrupaNaziv", query = "SELECT g FROM Grupa g WHERE g.grupaNaziv = :grupaNaziv"),
    @NamedQuery(name = "Grupa.findByGrupaBroj", query = "SELECT g FROM Grupa g WHERE g.grupaBroj = :grupaBroj")})
@Inheritance(strategy= InheritanceType.TABLE_PER_CLASS)
public class Grupa implements Serializable {

    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.TABLE)
    @Basic(optional = false)
    @Column(name = "GRUPA ID")
    private Integer grupaId;
    @Column(name = "GRUPA NAZIV")
    private String grupaNaziv;
    @Column(name = "GRUPA BROJ")
    private Integer grupaBroj;
    @ManyToOne(cascade = CascadeType.PERSIST)
    @NotFound(action = NotFoundAction.IGNORE)
    private Predmet predmet;
    @OneToMany(cascade = CascadeType.PERSIST)
    @NotFound(action = NotFoundAction.IGNORE)
    private Collection<Student> student = new ArrayList<Student>();

    public Grupa() {
    }

    public Grupa(Integer grupaId) {
        this.grupaId = grupaId;
    }

    public Integer getGrupaId() {
        return grupaId;
    }

    public void setGrupaId(Integer grupaId) {
        this.grupaId = grupaId;
    }

    public String getGrupaNaziv() {
        return grupaNaziv;
    }

    public void setGrupaNaziv(String grupaNaziv) {
        this.grupaNaziv = grupaNaziv;
    }

    public Integer getGrupaBroj() {
        return grupaBroj;
    }

    public void setGrupaBroj(Integer grupaBroj) {
        this.grupaBroj = grupaBroj;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (grupaId != null ? grupaId.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Grupa)) {
            return false;
        }
        Grupa other = (Grupa) object;
        if ((this.grupaId == null && other.grupaId != null) || (this.grupaId != null && !this.grupaId.equals(other.grupaId))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "pz850.entities.Grupa[ grupaId=" + grupaId + " ]";
    }
} 
```

子类代码

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package pz850.entities;

import java.io.Serializable;
import javax.persistence.Basic;
import javax.persistence.Column;
import javax.persistence.Entity;
import org.apache.tapestry5.annotations.Property;

/**
 *
 * @author nikola
 */
@Entity
public class InternetGrupa extends Grupa implements Serializable{
 @Basic(optional = false)
 @Column(name="VRSTA_STUDIRANJA")
    @Property
 private String vrstaStudija = "Internet";

    public InternetGrupa() {
    } public String getVrstaStudija() {
        return vrstaStudija;
    }

    public void setVrstaStudija(String vrstaStudija) {
        this.vrstaStudija = vrstaStudija;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final InternetGrupa other = (InternetGrupa) obj;
        if ((this.vrstaStudija == null) ? (other.vrstaStudija != null) : !this.vrstaStudija.equals(other.vrstaStudija)) {
            return false;
        }
        return true;
    }

    @Override
    public int hashCode() {
        int hash = 7;
        hash = 53 * hash + (this.vrstaStudija != null ? this.vrstaStudija.hashCode() : 0);
        return hash;
    }

    @Override
    public String toString() {
        return "Internet{" + "vrstaStudija=" + vrstaStudija + '}';
    }
} 
```

如果它是一个库，应该删除哪个库？你认为这是父子继承导致休眠的问题吗？[正如教程](http://www.youtube.com/watch?v=qIdM4KQOtH8&list=PL4AFF701184976B25&index=21&feature=plpp_video)所说，我认为我已经正确完成了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T22:09:05.400

Hibernate 两次在类路径上，分别是 3.5 和通过 hibernate-support 的不起眼的 3.x (hibernate3.jar)（那是什么？）。修复你的类路径会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T23:48:35.240

正如@Henning 暗示的那样，您的库之间存在冲突。在这种特殊情况下，它是一个tapestry-hibernate 库，它在hibernate 库中没有真正的支持（当前tapestry-hibernate 库不支持的版本），所以你应该去[DOCJAR](http://www.docjar.com)看看什么是真正的hibernate 库（或者甚至是库，不确定其中有多少依赖于 tap-hibernate library ）对于您的特定 Tapestry-hibernate 库是需要的。

# vb.net - 将图像从 asp.net (VB.net) 发布到 facebook graph api（错误 400 错误请求）

> ID：12334060
> 
> 赞同：3
> 
> 时间：2012-09-08T20:07:58.790
> 
> 标签：vb.net, facebook-graph-api, httpwebrequest

我正在尝试使用 asp.net 将图像发布到 facebook grap api，我知道这里有一篇很棒的帖子 [使用 Graph API 从 .NET 将图像发布到 Facebook 墙上，](https://stackoverflow.com/questions/4898950/posting-image-from-net-to-facebook-wall-using-the-graph-api)因为我需要 vb.net 中的代码我只是转换了那里描述的代码，但是在尝试将他的图片发布到 facebook 时，我收到以下错误：

> 远程服务器返回错误：(400) 错误请求。

对我来说，调试这个错误有点困难，因为这是来自面部的唯一请求，因此我不知道错误是因为我的表单邮政编码没有正确生成还是错误在我正在尝试的图像中发送。

我正在阅读很多关于 http 表单帖子的内容，但我仍然无法弄清楚我的错误在哪里...... [根据 facebook 提供的示例，](https://developers.facebook.com/blog/post/498/)我相信我确实拥有所有必需的参数。

facebook示例中的代码：

```
 // Show photo upload form to user and post to the Graph URL
     $graph_url= "https://graph.facebook.com/me/photos?"
     . "access_token=" .$access_token;
     echo '<html><body>';
     echo '<form enctype="multipart/form-data" action="'
     .$graph_url .' "method="POST">';
     echo 'Please choose a photo: ';
     echo '<input name="source" type="file"><br/><br/>';
     echo 'Say something about this photo: ';
     echo '<input name="message" 
         type="text" value=""><br/><br/>';
     echo '<input type="submit" value="Upload"/><br/>';
     echo '</form>';
     echo '</body></html>'; 
```

我的表单发布生成的代码（在发送图像之前）

-----------------------------8cf5b7942cad9d0 内容处置：表单数据；名称="access_token"

DummyAccessTokkenFNC98HZQdkEK7%2foEWpdyFu%2byHu%2bUKAfbTE54aBB5vdHFJaecGHPpGrLCrd5bEZWxlXvVKej0ApDbjEzjki8xzvl28etjRxH1LzcJP314RO5HJDbNbZJ -----------------------------8disposition:-data; 名称=“消息”

Lombardi 喜欢 stackoverflow -----------------8cf5b7942cad9d0 Content-Disposition: form-data; 名称=“来源”；文件名="~\img\taco.jpeg" 内容类型：应用程序/八位字节流

任何帮助将不胜感激。

这是我的完整功能代码

```
 Private Function FB_UploadPhoto(ByVal album_id As String, ByVal message As String, ByVal filename As String, ByVal bytes As Byte(), ByVal Token As String) As String

    Dim boundary As String = "---------------------------" + DateTime.Now.Ticks.ToString("x")
    Dim path As String = "https://graph.facebook.com/" '& FacebookID() & "/"

    If Not String.IsNullOrEmpty(album_id) Then
        path += album_id + "/"
    End If
    path += "photos"

    Dim uploadRequest As System.Net.HttpWebRequest
    uploadRequest = CType(System.Net.HttpWebRequest.Create(path), System.Net.HttpWebRequest)
    uploadRequest.ServicePoint.Expect100Continue = False
    uploadRequest.Method = "POST"
    uploadRequest.UserAgent = "Mozilla/4.0 (compatible; Windows NT)"
    uploadRequest.ContentType = "multipart/form-data; boundary=" + boundary
    uploadRequest.KeepAlive = False

    'New string builder

    Dim sb As New System.Text.StringBuilder

    'Add Form Data
    Dim formdataTemplate As String = "--{0}" & vbCrLf & "Content-Disposition: form-data; name=""{1}""" & vbCrLf & vbCrLf & "{2}" & vbCrLf
    'Access Token
    sb.AppendFormat(formdataTemplate, boundary, "access_token", HttpContext.Current.Server.UrlEncode(Token))
    ' Message
    sb.AppendFormat(formdataTemplate, boundary, "message", message)
    'header
    Dim headerTemplate As String = "--{0}" & vbCrLf & "Content-Disposition: form-data; name=""{1}""; filename=""{2}""" & vbCrLf & "Content-Type: {3}" & vbCrLf & vbCrLf
    sb.AppendFormat(headerTemplate, boundary, "source", filename, "application/octet-stream")
    'sb.AppendFormat(headerTemplate, boundary, "source", filename, "image/jpeg")

    Dim formString As String = sb.ToString()
    Dim formBytes As Byte() = Encoding.UTF8.GetBytes(formString)
    Dim trailingBytes As Byte() = Encoding.UTF8.GetBytes("" & vbCrLf & "--" & boundary + "--" & vbCrLf)
    Dim image As Byte()

    If bytes Is Nothing Then
        image = System.IO.File.ReadAllBytes(HttpContext.Current.Server.MapPath(filename))
    Else
        image = bytes
    End If

    'memory stream
    Dim imageMemoryStream As New System.IO.MemoryStream()
    imageMemoryStream.Write(image, 0, image.Length)

    ' Set Content Length
    Dim imageLength As Long = imageMemoryStream.Length
    Dim contentLength As Long = formBytes.Length + imageLength + trailingBytes.Length
    uploadRequest.ContentLength = contentLength

    'Get Request Stream
    uploadRequest.AllowWriteStreamBuffering = False
    Dim strm_out As System.IO.Stream = uploadRequest.GetRequestStream()

    'Write to Stream

    strm_out.Write(formBytes, 0, formBytes.Length)

    Dim buffer As Byte() = New Byte(CType(Math.Min(4096, CType(imageLength, Integer)), UInteger)) {} 'New Byte(CUInt(imageLength)) {} ' New Byte(CUInt(Math.Min(4096, CInt(imageLength)))) {} ' 'New Byte(CUInt(Math.Min(4096, CInt(imageLength)))) {} 'New Byte(CType(Math.Min(4096, CType(imageLength, Integer)), UInteger)) {}
    Dim bytesRead As Integer = 0
    Dim bytesTotal As Integer = 0
    imageMemoryStream.Seek(0, IO.SeekOrigin.Begin)

    'While bytesRead = imageMemoryStream.Read(buffer, 0, buffer.Length) <> 0
    '    strm_out.Write(buffer, 0, bytesRead)
    '    bytesTotal += bytesRead
    'End While
    bytesRead = imageMemoryStream.Read(buffer, 0, buffer.Length)
    While bytesRead <> 0
        strm_out.Write(buffer, 0, bytesRead)
        bytesTotal += bytesRead
        bytesRead = imageMemoryStream.Read(buffer, 0, buffer.Length)
    End While

    strm_out.Write(trailingBytes, 0, trailingBytes.Length)

    'Close Stream
    strm_out.Close()

    'Get Web Response
    Dim response As System.Net.HttpWebResponse = uploadRequest.GetResponse()

    ' Create Stream Reader
    Dim reader As System.IO.StreamReader = New System.IO.StreamReader(response.GetResponseStream())

    Return reader.ReadToEnd()
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:39:31.443

真是个搅拌机人……问题出在facebook令牌本身……实际上我正在加密令牌似乎我的加密功能在解密时遇到了某种问题。无论如何，我会将代码留在这里，希望其他人会发现有用。

# jquery - 将带有选择器的jquery truncate插件转换为可以外部调用的方法

> ID：12334063
> 
> 赞同：1
> 
> 时间：2012-09-08T20:08:05.340
> 
> 标签：jquery

我正在尝试修改这个 jquery truncate 插件，以便我可以： - 在不使用选择器的情况下手动调用它 - 并传递给我想要截断的文本。

这是否可以创建一个可以在外部调用的公共方法？

```
/*
* Truncate a piece of text to a predefined amount of lines. 
* It assumes pixel values of both the container and its line-height. 
* Useful when you have multiple boxes with text in your design that require equal heights
*/

$.fn.truncateLines = function(options) {
    var defaults = {
        delay: 100,
        text: false,
        minusHeight: 0
    };
    options = $.extend(defaults, options);

    function truncate(index, container){
        container = $(container);
        var containerLineHeight = Math.ceil(parseFloat(container.css('line-height'))),
            maxHeight = options.lines * containerLineHeight,
            truncated = false,
            truncatedText = $.trim(container.text()),
            overflowRatio = container.height() / maxHeight;

        if (overflowRatio > 2) {
            // slice string based on how much text is overflowing
            truncatedText = truncatedText.substr(0, parseInt(truncatedText.length / (overflowRatio - 1), 10) + 1); 
            container.text(truncatedText);
            truncated = true;
        }
        var oldTruncatedText; // verify that the text has been truncated, otherwise you'll get an endless loop
        while (container.height() > maxHeight && oldTruncatedText != truncatedText) {
            oldTruncatedText = truncatedText;
            // remove last word
            truncatedText = truncatedText.replace(/\s.[^\s]*\s?$/, ''); 
            container.text(truncatedText);
            truncated = true;
        }
        if (truncated) {
            truncatedText = options.ellipsis ? truncatedText + options.ellipsis : truncatedText;
            container.text(truncatedText);
            if (container.height() > maxHeight) {
                // remove last word and ellipsis
                truncatedText = truncatedText.replace(/\s.[^\s]*\s?...$/, ''); 
                truncatedText = options.ellipsis ? truncatedText + options.ellipsis : truncatedText;
                container.text(truncatedText);
            }
        }
    }

    // Loop selectors
    return this.each(truncate(index, container));
}; 
```

# java - 在不使用 Java 的情况下创建 .class 文件

> ID：12334065
> 
> 赞同：2
> 
> 时间：2012-09-08T20:08:21.453
> 
> 标签：java, jvm

我正在尝试创建一种名为 Mango 的玩具编程语言。我首先希望它编译成 Java 并作为 Java 编译和执行。但我发现这是一种非常缓慢的方法。所以我决定把它编译成Java Byte Code并执行。我已经给出了芒果代码和等效的 java 代码。你能帮我用字节码将我的芒果代码编译成等效的 .class 文件吗？

在 test.mango

```
println("Hello World!") 
```

等于

```
public class test 
{
   public static void main(String[] args){
       System.out.println("Hello World!")
   }
} 
```

我确实在 test.java 上使用了**javap**来生成以下字节码

```
Compiled from "test.java" 
public class test extends java.lang.Object{
public test();   
Code:
0: aload_0
1: invokespecial    #1; //Method java/lang/Object."<init>":()V
4:  return

public static void main(java.lang.String[]);   
Code:    
0:  getstatic   #2; //Field java/lang/System.out:Ljava/io/PrintStream;   
3:  ldc #3; //String Hello World!    
5:  invokevirtual   #4; //Method java/io/PrintStream.println:(Ljava/lang/String;)V    
8:  return
} 
```

但是当我将它保存为 test.class 并执行它时，我在命令提示符下收到以下错误

```
java.lang.ClassFormatError: Incompatible magic value number 1131375984 
```

我只学习了两个学期的 Java 编程。我的教授告诉我，您可以使用 Java 字节码在 JVM 之上编写编程语言。所以只有我想尝试一下。我没有编程语言设计的经验。所以任何帮助都会非常有用。我确实通过 Java 规范寻找任何线索，但我什么也得不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T20:16:57.013

*Java 类文件以二进制格式*而不是*ASCII 文本*表示字节码。这意味着这些指令在编译后的形式中并不是真正的人类可读的——类文件只是一堆原始数据。尝试打开您创建的类文件`javac`并检查输出的样子。[有关类文件二进制格式的更多详细信息，您可以查看有关Java 类文件](http://en.wikipedia.org/wiki/Java_class_file)的相关 Wikipedia 文章。

与其直接输出二进制字节码，不如使用[Soot](http://www.sable.mcgill.ca/soot/)作为编译器链中的中间工具来创建类文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T20:21:34.127

我会考虑使用一个字节码库，如：

*   [javassist](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/)
*   [贝塞尔](http://commons.apache.org/bcel/)
*   [亚尼诺](http://docs.codehaus.org/display/JANINO/Home)
*   [茉莉](http://jasmin.sourceforge.net/) *（可能；好久没看）*

您几乎肯定不想在二进制级别工作。

您需要非常熟悉[JVM 规范](http://docs.oracle.com/javase/specs/jvms/se7/html/index.html)。

我强烈建议在深入杂草之前查看其他简单的 JVM 语言；事情变得相当复杂，相当快。开发 JVM 语言本身并不需要 Java 经验，但这并非易事，而且您确实需要相当多的知识才能走得更远。

# linux-kernel - 处理 ARM 信任区

> ID：12334069
> 
> 赞同：33
> 
> 时间：2012-09-08T20:08:55.810
> 
> 标签：linux-kernel, arm, trust-zone

ARM 有一个叫做 TrustZone 的东西。根据 ARM 文档，它使进程可以在安全/非安全世界中运行。

1.  安全/非安全世界是什么意思。它与处理器执行模式有关还是与设置内存区域的权限或其他有关。
2.  ARM 的 7 种操作模式与 Secure / Non-Secure Worlds 之间有什么关系吗？
3.  如何在 ARM 中启用 TrustZone。
4.  这是从哪个版本的 ARM 引入的。
5.  是否必须使用此 TrustZone。linux 内核是否使用此 TrustZone 扩展。

请帮助我理解这一点。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-09T09:18:39.357

[http://infocenter.arm.com/help/topic/com.arm.doc.prd29-genc-009492c/index.html](http://infocenter.arm.com/help/topic/com.arm.doc.prd29-genc-009492c/index.html)是一个很好的介绍性文档，它概述了一些过于复杂而无法令人满意地解释的东西通过在文本框中键入。但我将尝试在下面回答您的直接问题。

1.  它指的是与执行模式正交的附加特权选项。安全世界能够使内存访问标记为安全，但也可以进行非安全访问。普通世界只能进行非安全访问。此外，某些处理器配置选项只能由 Secure world 访问。其目的是将安全软件隔离在一个简单的环境中，使其不会（直接）受到设备主操作系统或应用软件中的软件漏洞的攻击。
2.  没有，除了它添加了一个额外的“监视器”模式。此监控模式用于 Normal 和 Secure 世界之间的“上下文切换”。
3.  TrustZone 未启用，已实施（或未实施）。
4.  TrustZone 是在 ARM 架构版本 6 的安全扩展中引入的。第一个支持它的处理器是 ARM1176。所有 Cortex-A 处理器都支持它。
5.  “否”，尽管由于启用 TrustZone 的处理器在开机时开始以安全状态执行，如果引导加载程序不做任何更改安全状态的操作，所有软件都将作为安全运行（消除任何安全优势）。不，TrustZone 环境明确旨在与您的操作系统一起运行，而不是直接集成到其中。对于某些平台，Linux 内核执行 Secure Monitor Calls 以请求 Secure world 更改某些系统配置选项。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-05-29T18:41:58.783

为了补充**UnixSmurfs 的**答案，

> 安全/非安全世界是什么意思。它与处理器执行模式有关还是与设置内存区域的权限或其他有关。

主要与*内存区域*有关。所有与*TrustZone兼容的设备都将使用***NS**位标记*AXI 总线*访问。该位指定访问是来自*安全*世界还是*正常*世界。这样，即使是*正常*世界控制下的**DMA**外设也可以被隔离。

 *******> ARM 的 7 种操作模式与 Secure / Non-Secure Worlds 之间有什么关系吗？

并不真地。但是，有一个名为*Monitor Mode的**中间世界*，显然它是其中最强大的。 *监控模式*是*安全*世界和*正常*世界之间的中介。它可以访问*普通世界*的 CP15 寄存器，同时仍然具有*安全世界*的系统内存视图（将位推送为 0）。******`NS`******

 ***> 如何在 ARM 中启用 TrustZone。

**启用**是一个有点重载的词。[**正如unixsmurf**](https://stackoverflow.com/users/563188/unixsmurf)指出的那样，它内置在 CPU 中。默认情况下，启用*TrustZone*的 CPU 将在*安全*世界中启动。如果您什么都不做，您可能会忽略 CPU 支持*TrustZone*的事实。只有建立一个*正常*的世界并把控制权交给它，才会使用*TrustZone*；可能这就是您所说的**enable**。

> 这是从哪个版本的 ARM 引入的。

有两种口味：

1.  *与TrustZone*兼容。
2.  *启用*信任区。**

 **TrustZone 安全白皮书*的第 4.2 节回答了这个问题。ARM1176JZ ( *F)-S*、*Cortex-A8*、*Cortex-A9*、*Cortex-A9-MPCore*和*Cortex-A5*支持*TrustZone*。ARM1156T2 ( *F)-S*和*Cortex-R4*兼容；它们可以是系统中的^(第二)个核心。随着更新内核的开发，它们可能会被添加到列表中；这个问题是一个移动的目标。

> 是否必须使用此 TrustZone。linux 内核是否使用此 TrustZone 扩展。

这不是*强制性*的。*Linux*内核可以扮演两个角色；*安全*和*正常*的世界。*有关在Linux中使用**TrustZone*的一些信息，请参阅[svc-handler-to-smc-call](https://stackoverflow.com/questions/15052926/svc-handler-to-smc-call)。

 ****UnixSmurf**暗示的一些事情没有得到回答；您必须确保所有*BUS 主*设备和*从*设备都适当地了解**NS**位。此信息在 CPU 信息*之外*，涉及*BUS 仲裁*器；另一个*类似书的*话题。

请参阅：[**PRD29-GENC-009492C**](http://infocenter.arm.com/help/topic/com.arm.doc.prd29-genc-009492c/PRD29-GENC-009492C_trustzone_security_whitepaper.pdf)
         [ARM TrustZone 作为嵌入式系统中的虚拟化技术](http://os.inf.tu-dresden.de/papers_ps/rtlws2010_armtrustzone.pdf)
         [使用 ARM TrustZone 的可信计算构建块](http://cs.ucsb.edu/~sherwood/cs290/papers/trustzone.pdf)
         [ARM 可信固件](https://github.com/ARM-software/arm-trusted-firmware)*************

# java - 如何在java中获取浏览器的java脚本控制台输出？

> ID：12334073
> 
> 赞同：3
> 
> 时间：2012-09-08T20:09:45.483
> 
> 标签：java, javascript, browser

我想用 JavaScript 运行一个 HTML 页面，并想用 Java 访问它的输出。有没有办法在 Java 代码中访问浏览器的 JavaScript 控制台输出？

首先，我尝试使用 Java (htmlunit) 执行 JavaScript，但由于 JS 中的 jQuery，它给出了错误。

我需要执行的 JS 函数使用关联的 HTML 元素，这就是为什么我更喜欢保存页面、将我的 JS 添加到该页面并在本地运行它的原因。然后我可以在 JavaScript 控制台上看到输出，现在我想在 Java 代码中获取该输出以进行进一步处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:54:35.423

感谢大家的快速响应，我们使用 Greasemonkey 和 firefox 解决了这个问题。我们使用一个 servlet 将输出写入文件，而不是控制台。Greasemokey 中安装的 js 执行 js 方法和输出通过一个 Servlet（本地运行）获取请求并将输入写入文件，我们可以在 java 中使用该文件，内部文件写入代码只是添加同步块以防多个链接由 Greasemonkey 打开 :D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T21:06:09.393

尝试[Selenium](http://seleniumhq.org/)访问该**页面**。它会打开一个真实的浏览器实例并单击（解决 jquery 问题），并且还应该能够获取`console.log`.

也许这个 JS 单元测试工具列表也可能对您有所帮助：[适用于 TDD 的 JavaScript 单元测试工具](https://stackoverflow.com/questions/300855/looking-for-a-better-javascript-unit-test-tool)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T21:13:13.517

当然。慢慢阅读：

我得到的一个绝妙想法是，既然你正在运行 java，为什么不让它成为一个监听特定端口的服务器呢？你可以很容易地做到这一点。

一旦你有一个简单的线程在一个端口上监听，在你正在执行的任何 javascript 代码中，最后当你想将一些变量记录到控制台时，使用你想要发送的所有数据向这个本地服务器发送一个 ajax 调用到爪哇。

在服务器中收到请求后，将数据传递给其他线程并产生。

即使它*看起来很*复杂，对我来说似乎也是一个非常可行的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-19T21:52:19.733

我喜欢 Prasanth 的建议，它对我很有效。这是我的代码。

RCP：

```
logger = ...
private void startJSConsole() {
        jsConsoleJob = new Job("JS Console Server") {

            @Override
            protected IStatus run(IProgressMonitor monitor) {
                Socket connectionSocket = null;
                try {
                    jsSocket = new ServerSocket(6789);
                    while (!monitor.isCanceled()) {
                        connectionSocket = jsSocket.accept();
                        readSocketData(connectionSocket);
                    }
                } catch (IOException e) {
                    if (!"Socket closed".equals(e.getMessage())) {
                        logger.logError("Unable to open or read from Javascript console server socket", e);
                    }
                    return Status.CANCEL_STATUS;
                } finally {
                    try {
                        if (jsSocket != null) {
                            jsSocket.close();
                        }
                        if (connectionSocket != null) {
                            connectionSocket.close();
                        }
                    } catch (IOException e) {
                        //pass
                    }
                }
                return Status.OK_STATUS;
            }
        };
        jsConsoleJob.setUser(false);
        jsConsoleJob.setSystem(true);
        jsConsoleJob.schedule();
    }

    //I copied this code from here: http://stackoverflow.com/a/21729100/2036650
    private void readSocketData(Socket connectionSocket) {
        try {
            BufferedReader in = new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
            // read request
            String line;
            line = in.readLine();
            StringBuilder raw = new StringBuilder();
            raw.append("" + line);
            boolean isPost = line.startsWith("POST");
            int contentLength = 0;
            while (!(line = in.readLine()).equals("")) {
                raw.append('\n' + line);
                if (isPost) {
                    final String contentHeader = "Content-Length: ";
                    if (line.startsWith(contentHeader)) {
                        contentLength = Integer.parseInt(line.substring(contentHeader.length()));
                    }
                }
            }
            StringBuilder body = new StringBuilder();
            if (isPost) {
                int c = 0;
                for (int i = 0; i < contentLength; i++) {
                    c = in.read();
                    body.append((char) c);
                }
            }
            raw.append(body.toString());
            System.err.println("JS: " + body.toString());
            connectionSocket.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

Javascript：

```
<html>
      <head>
    ...
    <script>
        var global = global || {};
        global.consoleLog = function(msg) {
            var xhttp = new XMLHttpRequest();
            xhttp.open("POST", "http://localhost:6789", true);
            xhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
            xhttp.send(msg);
        }
    </script>
    <script src="js/sigplot-minimized.js"></script>
</head>
<body>
...
</body>
</html> 
```

然后从 Javascript 代码中的任何地方：

```
global.consoleLog(logMessage); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-12T06:32:22.707

为了完成@MinuitJava 的回答，您还可以在错误事件上添加一个侦听器。

```
window.addEventListener('error', function (e) {
  console.log(e.type +  " : " + e.message + "\n");
  console.log(e);

  // var xhttp = new XMLHttpRequest();
  // code . . .
}); 
```

MDN 文档：[窗口：错误事件](https://developer.mozilla.org/en-US/docs/Web/API/Window/error_event)

# python - Python - 测试对象属性是否等于给定值

> ID：12334075
> 
> 赞同：0
> 
> 时间：2012-09-08T20:09:52.893
> 
> 标签：python, list

假设你有一份人员名单。

```
class Person:
    def __init___(self, name, id):
        self.name = name
        self.id = id

people = []
for x in xrange(0,100)
    #find people and append to people list 
```

现在，我有一个人员对象列表。例如，我怎样才能最有效地从人员列表中找到一个名为“Bob”的人？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T20:12:01.520

只有一个列表而没有其他索引，您必须使用列表推导：

```
matching = [p for p in people if p.name == 'Bob'] 
```

但如果你必须做很多，你可能想要创建一个索引：

```
from collections import defaultdict

nameindex = defaultdict(list)
for person in people:
    nameindex[person.name.lower()] = person

nameindex['bob']  # a list of people named Bob. 
```

这样，您只需遍历所有人员一次（成本 O(N)），之后任何名称查找都具有恒定成本（O(1)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T20:13:00.480

对于这个确切的场景，您需要使用字典：

```
from collections import defaultdict
people = [...]
name_to_people = defaultdict(list)
for p in people:
    name_to_people[p.name].append(p) 
```

然后，每当您想查找所有名为“Bob”的人时：

```
bobs = name_to_people["Bob"] 
```

如果没有匹配，它将返回一个空列表，如果只有一个具有该名称的人，则返回一个包含一个元素的列表，如果有多个 Bob，则返回一个包含多个元素的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T20:29:18.617

一种方法是构建一个类来保存人员对象的集合。执行此操作的最佳方法之一可能类似于以下代码：

```
class People:
    def __init__(self):
        self.members = {}

    def add_person(self, person):
        self.members[person.name] = person

    def __getitem__(self, name):
        return self.members[name]

class Person:
    def __init__(self, name, id):
        self.name = name
        self.id = id 
```

现在您应该能够像这样填充 People 对象：

```
# Add people to a People object
people = People()
people.add_person(Person('Bob', 1))
people.add_person(Person('Surly', 2))

# Get a person by their name
people['Bob']    # Returns instance that is People('Bob', 1) 
```

也只是为了让您知道，我认为您的`Person`班级`__init__`方法中有太多下划线。希望这可以帮助。

# sql - 在 SQL Server 中删除具有联接的表

> ID：12334076
> 
> 赞同：2
> 
> 时间：2012-09-08T20:09:54.970
> 
> 标签：sql, sql-server, duplicate-removal, multiple-tables, deduplication

我是这个 DBA 的新手，我的任务是从几个表中删除重复项。我在 SQL Server 中工作。他们都有一个名为 LAST_UPD 的字段来跟踪他们的最后一次更新。所有表都连接到 TABLE1，每个用户都由 TABLE1.ALIAS_KEY 标识。连接如下。我想知道如何清除所有重复的行并保留 Table2 中的最新条目。谢谢您的帮助！

```
FROM dbo.Table1 T1
LEFT JOIN dbo.Table2 T2
    ON (T1.PARROW = T2.PARROW) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:22:23.517

假设（我可能不正确）上次更新是唯一的，您可以这样做：

```
DELETE FROM dbo.Table2 T2 WHERE T2.LAST_UPD NOT IN
    (SELECT max(LAST_UPD) FROM dbo.Table2 T2 
        LEFT JOIN dbo.Table1 T1 ON (T1.PARROW = T2.PARROW)
        GROUP BY T1.ALIAS_KEY) 
```

# android - 谷歌云消息服务器端

> ID：12334081
> 
> 赞同：3
> 
> 时间：2012-09-08T20:10:16.293
> 
> 标签：android, cloud, messaging

我正在尝试实现谷歌云消息传递。我的互联网提供商使用动态 IP 地址，当我尝试按照 Google 教程所述在网络浏览器中键入“http://my_ip_address:8080/gcm-demo/home”时，该页面将无法打开。有没有办法设置服务器端而不必拥有静态 IP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:20:15.027

如果您没有自己的服务器硬件/托管解决方案，您可以在 Google App Engine 上托管您的服务器端代码（GCM 服务器）。

转到：
[https ://developers.google.com/appengine/](https://developers.google.com/appengine/)

# c++ - 如何禁用另一个程序中的键？

> ID：12334082
> 
> 赞同：4
> 
> 时间：2012-09-08T20:10:28.337
> 
> 标签：c++, visual-c++

我正在用可视化 C++ 编写一个程序，它应该改变游戏中的一些键盘键。

我曾经 `kHook = SetWindowsHookEx(WH_KEYBOARD_LL,setkey,NULL,0);` 知道在计算机中按下了键，并 `FindWindow()` 找到了我应该处理我的代码以在该游戏中按下键的游戏。

但是我需要禁用一些键，例如当点击空格时我需要阻止游戏知道点击了空格。实际上禁用该游戏中的空间我该怎么办。我搜索了很多，但一无所获。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T20:37:50.903

请仔细阅读[LowLevelKeyboardProc 回调函数 MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644985%28v=vs.85%29.aspx)。有答案。

基本上你需要在你的`LowLevelKeyboardProc`实现（`setkey`？）：

1.  检查和消息`wParam`_`WM_KEYDOWN``WM_KEYUP`
2.  从for`vkCode`指向的结构检查`lParam``VK_SPACE`
3.  如果 1 和 2 都为真，则返回非零来吃已处理的消息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T07:07:09.610

这个系统范围的键盘钩子可能会遇到一半。它检测空格键。

代码：

```
#define _WIN32_WINNT 0x0400
#pragma comment( lib, "user32.lib" )

#include <windows.h>
#include <stdio.h>

HHOOK hKeyboardHook;

__declspec(dllexport) LRESULT CALLBACK KeyboardEvent (int nCode, WPARAM wParam, LPARAM lParam)
{
    DWORD SHIFT_key=0;
    DWORD CTRL_key=0;
    DWORD ALT_key=0;

    if  ((nCode == HC_ACTION) &&   ((wParam == WM_SYSKEYDOWN) ||  (wParam == WM_KEYDOWN)))      
    {
        KBDLLHOOKSTRUCT hooked_key =    *((KBDLLHOOKSTRUCT*)lParam);
        DWORD dwMsg = 1;
        dwMsg += hooked_key.scanCode << 16;
        dwMsg += hooked_key.flags << 24;
        char lpszKeyName[1024] = {0};
        lpszKeyName[0] = '[';

        int i = GetKeyNameText(dwMsg,   (lpszKeyName+1),0xFF) + 1;
        lpszKeyName[i] = ']';

        int key = hooked_key.vkCode;

        SHIFT_key = GetAsyncKeyState(VK_SHIFT);
        CTRL_key = GetAsyncKeyState(VK_CONTROL);
        ALT_key = GetAsyncKeyState(VK_MENU);

        if (key ==VK_SPACE)   //Space key detected, do stuff
        {
            MessageBox(NULL, "Space key detected", "Keyboard hook", MB_OK); 
             return 1;

        }

    }
    return CallNextHookEx(hKeyboardHook,    nCode,wParam,lParam);
}

void MessageLoop()
{
    MSG message;
    while (GetMessage(&message,NULL,0,0)) 
    {
        TranslateMessage( &message );
        DispatchMessage( &message );
    }
}

DWORD WINAPI my_HotKey(LPVOID lpParm)
{
    HINSTANCE hInstance = GetModuleHandle(NULL);
    if (!hInstance) hInstance = LoadLibrary((LPCSTR) lpParm); 
    if (!hInstance) return 1;

    hKeyboardHook = SetWindowsHookEx (  WH_KEYBOARD_LL, (HOOKPROC) KeyboardEvent,   hInstance,  NULL    );
    MessageLoop();
    UnhookWindowsHookEx(hKeyboardHook);
    return 0;
}

int main(int argc, char** argv)
{
    HANDLE hThread;
    DWORD dwThread;

    hThread = CreateThread(NULL,NULL,(LPTHREAD_START_ROUTINE)   my_HotKey, (LPVOID) argv[0], NULL, &dwThread);

    if (hThread) return WaitForSingleObject(hThread,INFINITE);
    else return 1;

} 
```

# php - 关于 PHP 的一点建议

> ID：12334083
> 
> 赞同：3
> 
> 时间：2012-09-08T20:10:40.547
> 
> 标签：php

我被教导将 PHP 嵌入 HTML 中或将 HTML 嵌入 PHP 中。我想开始用 PHP 编写一些应用程序，并想从你们那里知道使用哪个选项。

目前我不知道使用哪个选项，所以我决定寻求一些建议。总体而言，可能一个比另一个好。

我即将开发现实世界的应用程序，所以我想知道使用哪一个。可能会影响我未来的同事等......

也可能是开源社区和 PHP 程序员一般都有使用一个选项的传统。

哪一种最常用于实际应用中？

只是需要一些建议。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T20:16:47.433

1）正如您隐含的要求，“HTML 和 PHP 的分离”是一件好事。

2）基本答案是“模板”。

3）这里有一些很好的链接：

*   [如何将样式（css + html）与php隔离](https://stackoverflow.com/questions/11478290/how-to-isolate-the-style-csshtml-from-php)

*   [http://www.phpro.org/tutorials/Introduction-to-PHP-templating.html](http://www.phpro.org/tutorials/Introduction-to-PHP-templating.html)

*   [http://en.wikipedia.org/wiki/Template_engine_%28web%29](http://en.wikipedia.org/wiki/Template_engine_%28web%29)

我应该强调“PHP 中的 HTML”与“HTML 中的 PHP”*不是*非此即彼的情况。一些页面主要是 PHP（可能会发出一点 HTML）；其他页面可能主要是 HTML（可能包含一些 PHP）。这是正常的，很好 - 这*不一定*是问题。恕我直言...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T20:18:02.843

我的建议是坚持使用原生 PHP [变量、运算符、循环、条件、核心函数]，然后选择一个框架 [Symfony、Zend Framework、YII、Codeigniter] 并遵循其约定和原则。

关于 PHP 与 HTML，我们的想法是保持业务逻辑和表示逻辑分离，即您应该收集所有需要在一段代码中显示的内容，*然后*在另一部分中尽可能少地使用 PHP 编写 HTML [仅用于回显值或为表填充执行循环等]。

然后你会进入诸如模板、模型-视图-控制器架构之类的主题……但现在不要再深入了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T20:15:17.587

如果您将其编写为 HTML 代码并将 PHP 嵌入其中，那么阅读 HTML 代码会容易得多。理想情况下，尽可能将其分开。

[看到这个问题。](https://codereview.stackexchange.com/q/6359/16125)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-08T20:20:33.160

您将需要一个模板引擎，有很多模板引擎，但最干净的是[Jade](https://github.com/everzet/jade.php)，不仅翡翠是干净的，而且还可以编译为普通的 php。

希望有帮助:)

# c++ - 将两个未知维度的文本文件中的两个矩阵相乘

> ID：12334085
> 
> 赞同：2
> 
> 时间：2012-09-08T20:10:55.910
> 
> 标签：c++, matrix, dimensions, sparse-matrix

这是我在此的头一篇博文。我一直在研究这个 c++ 问题一段时间，但一无所获。也许你们可以给我一些提示让我开始。

我的程序必须读取两个 .txt 文件，每个文件都包含一个矩阵。然后它必须将它们相乘并将其输出到另一个 .txt 文件。不过，我在这里的困惑是如何设置 .txt 文件以及如何获取尺寸。这是矩阵 1.txt 的示例。

```
#ivalue      #jvalue      value
   1            1           1.0
   2            2           1 
```

矩阵的维度是 2x2。

```
1.0     0
0       1 
```

在开始将这些矩阵相乘之前，我需要从文本文件中获取 i 和 j 值。我发现这样做的唯一方法是

```
int main()
{
  ifstream file("a.txt");
  int numcol;
  float col;
  for(int x=0; x<3;x++)
  {
    file>>col;
    cout<<col;
    if(x==1)     //grabs the number of columns
    numcol=col;
  }
  cout<<numcol;
} 
```

问题是我不知道如何到达第二行来读取行数。最重要的是，我认为这不会给我其他矩阵文件的准确结果。

让我知道是否有任何不清楚的地方。

**更新** 谢谢！我让 getline 正常工作。但现在我遇到了另一个问题。在矩阵 B 中，它的设置如下：

```
#ivalue      #jvalue         Value
    1         1              0.1
    1         2              0.2
    2         1              0.3
    2         2              0.4 
```

我需要让程序知道它需要下降 4 行，甚至更多（矩阵尺寸未知。我的矩阵 B 示例是 2x2，但它可能是 20x20）。我有一个 while(!file.eof()) 循环我的程序，让它循环直到文件结束。我知道我需要一个动态数组来进行乘法运算，但我这里也需要一个吗？

```
#include <iostream>
#include <fstream>
using namespace std;

int main()
{
    ifstream file("a.txt");      //reads matrix A
    while(!file.eof())
    {
        int temp;
        int numcol;
        string numrow;
        float row;

        float col;
        for(int x=0; x<3;x++)
        {
            file>>col;
            if(x==1)
            {
                numcol=col;      //number of columns
            }
        }

        string test;
        getline(file, test);     //next line to get rows
        for(int x=0; x<3; x++)
        {
            file>>test;
            if(x==1)
            {
                numrow=test;     //sets number of rows
            }
        }
        cout<<numrow;
        cout<<numcol<<endl;
    }

    ifstream file1("b.txt");     //reads matrix 2
    while(!file1.eof())
    {
        int temp1;
        int numcol1;
        string numrow1;
        float row1;

        float col1;
        for(int x=0; x<2;x++)
        {
            file1>>col1;
            if(x==1)
                numcol1=col1;    //sets number of columns
        }

        string test1;
        getline(file1, test1);   //In matrix B there are four rows.
        getline(file1, test1);   //These getlines go down a row.
        getline(file1, test1);   //Need help here.
        for(int x=0; x<2; x++)
        {
            file1>>test1;
            if(x==1)
                numrow1=test1;
        }
        cout<<numrow1;
        cout<<numcol1<<endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:25:35.743

*“问题是我不知道如何到第二行读取行数。”*

用于[`std::getline`](http://www.cplusplus.com/reference/string/getline/)进入下一行。

```
std::string first_line;
std::getline( file, first_line ); 
```

# javascript - 使用 javascript，获取给定 x 和 y 位置的 div id

> ID：12334087
> 
> 赞同：1
> 
> 时间：2012-09-08T20:11:11.733
> 
> 标签：javascript, jquery

> **可能重复：**
> [jquery在特定位置查找元素](https://stackoverflow.com/questions/3942776/jquery-find-element-at-a-particular-position)

在浏览器中，如果我得到 1.css 位置（顶部、左侧）或 2.绝对位置（例如 offset.x、offset.y），有没有办法获取 div 在该位置旁边的暴力搜索屏幕上的所有div？甚至是通过我关心的 div 子集的蛮力？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:15:00.710

你可以这样做：

```
var element = document.elementFromPoint(x, y);
var $element = $(element); 
```

例如，如果您想要 ID，请执行以下操作：

```
$element.attr('id'); 
```

# javascript - 从头开始创建 XLS 文件

> ID：12334089
> 
> 赞同：0
> 
> 时间：2012-09-08T20:11:39.283
> 
> 标签：javascript, xml, excel-2007

我正在设计一个客户端 hta 应用程序（仅使用 javascript）。我希望能够使用 Scripting.FileSystemObject") 从头开始​​创建 xls 文件。所以基本上，输出将被写入文件并保存为 .xls 格式。

你是怎么做到的，我也希望远离 ActiveX.Object("Excel.Application)。因为我不希望 hta 应用程序依赖于用户的计算机。

感谢您提前提供的所有帮助，

干杯，

周杰伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:39:25.697

也许不是您正在寻找的答案，但是在处理 Excel 文件时，值得注意的是通常只有一个真正的快捷方式：如果您只是指一个值表，那么您实际上是指一个 .CSV 文件。

Excel 将很乐意打开 CSV 文件或 CSV 格式的资源，该资源具有适合 Excel 的 mime 类型。通常，如果计算机上安装了 Office/Excel，则文件关联将就位。当然，您不能嵌入任何格式，只能嵌入值，尽管也许有人知道在打开文件时如何关联某种 excel 样式信息（我不知道）。

现在，生成 CSV 输出很简单，您只需要注意逗号的编码（由于缺乏更好的术语，它被广泛称为“csv 编码”，谷歌也称为“csv 编码”）。

当然，有大量的 Excel/Office（可编写脚本）库，其中很多是商业性质的。您可能正在寻找更多的工作和更多的耦合（即更依赖于您的库的解决方案）。

# sql - 两个表连接

> ID：12334092
> 
> 赞同：2
> 
> 时间：2012-09-08T20:12:28.043
> 
> 标签：sql, ms-access

我已经坚持了两天的数据库作业......

我在 MS Access 中工作，我有两个表 R 和 S，行数相同。他们没有任何关系。假设表 R 只有两列（名为`A, B)`，因此表 S（名为`B, C).`

在表 R 中只有三个记录：`(a1,b1), (a1,b2), (a2,b1)`

在表 S 中只有三个记录：`(b1,c1), (b1,c3), (b2,c2)`

我需要将这两个表连接成一个表，因此新表将有四列（RA、RB、SB、SC）并且将具有以下记录：

```
(a1,b1,b1,c1),  
(a1,b2,b1,c3),  
(a2,b1,b2,c2) 
```

就是这样......问题是：我如何用 SQL 完成这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T21:04:49.287

非常做作，但在 MS Access 中运行。

```
SELECT x.f0, x.F1, y.F0, y.F1
FROM (
     SELECT DISTINCT r.F0, r.F1, 
         (select count(*) 
         from r a 
         where a.f0+a.f1<=r.f0+r.f1) AS Expr1
      FROM r)  AS x 
INNER JOIN (
     SELECT DISTINCT s.F0, s.F1, 
        (select count(*) 
         from s a 
         where a.f0+a.f1<=s.f0+s.f1) AS Expr1
     FROM s)  AS y 
ON x.Expr1 = y.Expr1; 
```

**表 S**

```
F0  F1 <-- Field names
b1  c1
b1  c3
b2  c2 
```

**表 R**

```
F0  F1 <-- Field names
a1  b2
a2  b1
a1  b1 
```

**查询结果**

```
x.F0    x.F1    y.F0    y.F1
a1      b1      b1      c1
a1      b2      b1      c3
a2      b1      b2      c2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T20:32:51.497

I'm with Chase on this one, it seems like you want to do an SQL join like:

```
SELECT *
FROM TableR R, TableS S
WHERE R.id=S.id; 
```

**What this is saying is in plain english**: **Select** all the columns/rows **from** both `Table R` and `Table S` **where** the primary key `ID` in `Table R` equals the same primary key `ID` value in `Table S`

Not sure which database you are using, but here's a bit [more information](http://dev.mysql.com/doc/refman/5.0/en/join.html).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T22:54:35.370

好的，我的答案与其他人非常不同。

您说这两个表之间没有关系。其他人都试图在 RB 和 SB 之间建立关系，但你说没有关系。

所以，如果没有关系，那么你就不要放一个。所以你会得到： SELECT R. *, S.* FROM R,S

结果将是两个表中的每一列，返回的行将等于 R 中的行乘以 S 中的行。在上面的示例中，您将返回 9 条记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T20:25:31.753

看起来您想要做的是按行号加入两个表。看看[这个线程](https://stackoverflow.com/questions/1198124/combine-two-tables-that-have-no-common-fields)

有关如何执行此操作的示例。

# java - 需要帮助将我的输出变成行和列

> ID：12334097
> 
> 赞同：3
> 
> 时间：2012-09-08T20:13:24.047
> 
> 标签：java

我似乎有我需要的代码，我可以正确地输出。所以我要放 38 个随机数，但需要将它们放入 7 行中请帮忙。

```
import java.util.Scanner;

public class OneCounter2{

        public static void main(String args[]){ 
            Scanner input = new Scanner( System.in );
            System.out.println(" Product 2: Tires");
            System.out.println("  Random numbers between 1 and 3800 are,");
            for ( int row = 0 ; row < 5 ; row++ )
            {
                // PRINT a row
                for ( int col = 0 ; col < 7 ; col++ )
            }
            for(int i=0; i < 38 ; i++)
            {
                System.out.print( "*" ) ;
             }
              // PRINT newline
               System.out.println( "" ) ;
               System.out.println("  Random Numbers ["+ (i+1) + "] : " + (int)(Math.random()*3800));
          }
       }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:19:58.747

这样做有什么问题？

```
for (int i = 1 ; i < 39 ; i++) {
    System.out.print((int)(Math.random() * 3800) + " ");
    if (i % 7 == 0) System.out.println();
} 
```

这将简单地打印 38 个随机数，在它打印的每 7 个数字上切换到一个新行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T20:28:18.113

我更喜欢一次性使用 stringbuilder 并显示输出...

```
StringBuilder sb = new StringBuilder();
   for(int i =0;i<=38;i++)
   {
       sb.append(Math.random() + " ");
       if ( i%7 == 0) sb.append("\n");
   }
   System.out.println(sb.toString()); 
```

# iphone - 进行选择时向地图添加注释xcode

> ID：12334098
> 
> 赞同：1
> 
> 时间：2012-09-08T20:13:27.297
> 
> 标签：iphone, ios, database, xcode, map

我对 xcode 相当陌生，我目前正在开发一个小型 iPhone 应用程序。

我已经在加载时显示地图（使用 MKMapView），并且还有一个按钮可以加载能够显示数据库的视图。它将显示建筑物列表。

我的目标是让用户在第二个视图中触摸建筑物名称时，应用程序会将图钉（和/或注释）放到已触摸建筑物顶部的地图视图上。

我将如何完成这个？

另外，我应该如何将纬度和经度存储在数据库中，以便与正确的建筑物名称相关？

我在这里环顾四周并用谷歌搜索了一下，没有发现任何有用的东西，但是我可能只是错过了它。

任何帮助/建议将不胜感激！

如果有帮助，我可以发布我的 MKMapview 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T00:01:47.620

您可能正在寻找课堂上的`addAnnotation:`方法`MKMapView`。您需要创建一个新`MKAnnotation`实例，用相关信息填充它，然后通过按钮触摸将其添加到您的地图中。

如果您在您的 上覆盖该`viewForAnnotation:`方法`MKMapView`，您只需将`animatesDrop`属性设置为 就可以为图钉放置设置动画`YES`。

查看[MKMapView 类参考](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html)以获取更多信息。

至于您问题的第二部分，我不确定您的数据库的布局是什么，或者可能存在什么确切问题。

# excel - 使用 Visual Studio 2010 进行 UNC 转换

> ID：12334099
> 
> 赞同：1
> 
> 时间：2012-09-08T20:13:48.353
> 
> 标签：excel, vba, visual-studio-2010, drive, unc

我正在编写一个文档索引系统，它将通过具有许多计算机驱动器的计算机网络引用 100 个文件。当添加新驱动器或从网络中删除驱动器时，将重新分配驱动器号。因此，如果重新分配驱动器号，则使用驱动器号的任何特定文件路径都可能变得毫无意义。为了避免这个问题，我想改用 UNC（通用命名约定）路径名。

下面显示的代码将在 Excel 2007 中运行时将驱动器号转换为其 UNC 等效项。但是我的应用程序是在 Visual Studio 2010 中编写的，不幸的是，下面的代码似乎在 Visual Studio 中不起作用。运行时不报告错误，但不返回 UNC。这可能是需要设置的“参考”的问题。

```
Imports System
Imports System.Management
Module Module1

' 32-bit Function version.
' Enter this declaration on a single line.
Declare Function WNetGetConnection Lib "MPR.DLL" Alias _
   "WNetGetConnectionA" (ByVal lpszLocalName As String, ByVal _
   lpszRemoteName As String, ByVal lSize As Long) As Long

Dim lpszRemoteName As String
Dim lSize As Long

' Use for the return value of WNetGetConnection() API.
Const NO_ERROR As Long = 0

' The size used for the string buffer. Adjust this if you
' need a larger buffer.
Const lBUFFER_SIZE As Long = 255

Sub GetNetPath()
    Dim DriveLetter, lpszLocalName As String
    Dim cbRemoteName As Long
    Dim lStatus&

    ' Prompt the user to type the mapped drive letter.
    DriveLetter = UCase(InputBox("Enter Drive Letter of Your Network" & _
       "Connection." & Chr(10) & "i.e. F (do not enter a colon)"))

    ' Add a colon to the drive letter entered.
    lpszLocalName = DriveLetter & ":"

    ' Specifies the size in characters of the buffer.

    ' Prepare a string variable by padding spaces.
    lpszRemoteName = lpszRemoteName & Space(lBUFFER_SIZE)
    cbRemoteName = Len(lpszRemoteName)
    ' Return the UNC path (\\Server\Share).
    lStatus& = WNetGetConnection(lpszLocalName, lpszRemoteName, _
       cbRemoteName)

    ' Verify that the WNetGetConnection() succeeded. WNetGetConnection()
    ' returns 0 (NO_ERROR) if it successfully retrieves the UNC path.
    If lStatus& = NO_ERROR Then

        ' Display the UNC path.
        MsgBox(Left$(lpszRemoteName, cbRemoteName))

    Else
        ' Unable to obtain the UNC path.
        MsgBox("Unable to obtain the UNC path.")
    End If

End Sub

End Module 
```

任何建议都非常感激。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:25:40.693

一种方法是 string strUncpath="file:\"; 然后将其添加到您的路径中

strUncpath+ 你的路径是什么，或者你可以创建一个扩展方法，将 file:\ 添加到 yoi

# android - 在 sql lite 数据库中推送信息

> ID：12334100
> 
> 赞同：-1
> 
> 时间：2012-09-08T20:14:06.310
> 
> 标签：android, sql, database

我想在我的 android 模拟器中存储一个数据库。我有一个数据表。在 asp 中，我们可以通过单击显示表数据来查看数据库数据。我们还可以编辑这些数据。但我想在我的 android 模拟器中做到这一点。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:22:37.777

模拟器中没有可用于操作 SQLite 数据库的本机 GUI。但是，最简单和最好的方法是通过**ADB**在模拟器中访问您的数据库。例如：

打开命令提示符并输入以下内容（确保您已在路径中定义了 Android SDK 的*平台工具）*

```
adb shell 
```

你应该看到`#`符号，然后：

```
sqlite3 data/data/your_package_name/databases/your_database_name 
```

有关更多详细信息，请阅读**[此](http://bradchow.wordpress.com/2009/02/26/sqlite-command-in-adb/)**。

# sencha-touch-2 - Sencha Touch 2 - 无法显示列表//或加载商店？[更新 X2]

> ID：12334109
> 
> 赞同：3
> 
> 时间：2012-09-08T20:15:23.780
> 
> 标签：sencha-touch-2

很长一段时间以来，我一直在尝试获取要显示的列表。我尝试了各种人的各种技巧，但没有成功。现在我遇到了一个新问题。我已经从一个示例中获取了确切的代码，但我似乎也无法让它工作。首先，这里是代码。

Station.js

```
Ext.define('Syl.model.Station', {
extend: 'Ext.data.Model',

config: {
    fields: [
        { name: 'id', type: 'string' },
        { name: 'stop', type: 'string' }
    ]
}
}); 
```

Stations.js

```
Ext.define('Syl.store.Stations', {
extend  : 'Ext.data.Store',
requires: ['Syl.model.Station'],
id: 'stations',
xtype: 'stations',
config  : {
    model : 'Syl.model.Station',
    autoLoad : true,
    data: [
        { "id": "129", "stop": "NY Station" },
        { "id": "13", "stop": "Newark Station" }
    ]
}
}); 
```

我的服务.js

```
Ext.define('Syl.view.MyService', {
extend: 'Ext.Panel',
xtype: 'stationsformPage',
requires: [
'Syl.store.Stations',    
'Ext.form.FieldSet',
'Ext.field.Password',
'Ext.SegmentedButton',
'Ext.List'
],

config: {
    fullscreen: true,
    layout: 'vbox',
    items: [
    {
        docked: 'top',
        xtype: 'toolbar',
        title: 'My Service'
    },

    {
                    [OLDER CODE BEGIN]
        xtype: 'list',
        title: 'Stations',
        //store: 'Stations',
        store: stationStore, //UPDATED
        styleHtmlContent: true,
        itemTpl: '<div><strong>{stop}</strong> {id}</div>'
                    [OLDER CODE END]

                    [UPDATE X2 CODE BEGIN]
        xtype: 'container',
        layout: 'fit',
        flex: 10,
        items: [{
            xtype: 'list',
            title: 'Stations',
            width: '100%',
            height: '100%',
            store: stationStore,
            styleHtmlContent: true,
            itemTpl: '<div><strong>{stop}</strong> {id}</div>'
        }]
                    [UPDATE X2 CODE END]
    },

    ]
}
}); 
```

app.js（编辑到基础）

```
var stationStore; //UPDATED

Ext.application({
    name: 'Syl',
    views: ['MyService'],
    store: ['Stations'],
    model: ['Station'],

    launch: function() {
    stationStore = Ext.create('Syl.store.Stations');//UPDATED
    var mainPanel = Ext.Viewport.add(Ext.create('Syl.view.MyService'));
    },
}); 
```

好的，现在当我在浏览器中运行它时，我得到这个错误：“[WARN][Ext.dataview.List#applyStore] 找不到指定的商店”。应用程序运行但没有列表。我无法理解这段代码如何为给出示例的人而不是我工作。Sencha Touch版本会有所不同吗？我正在使用 2.0.1.1。

除此之外，我一直遇到列表不显示的问题。我最初在没有商店的情况下尝试了一份精简清单。我试图在列表的配置中设置数据属性。我没有收到此错误，但也没有显示列表。这就是为什么我想我会尝试别人的代码。我想如果我至少可以建立并运行一个工作列表，我可以操纵它来做我想做的事。

任何帮助将不胜感激。谢谢。

[更新]好的，所以我做了更多的搜索，有人告诉我我需要有一个我的商店实例才能加载到列表中，而不是商店定义。因此，如您所见，我更新了代码，错误消失了。问题是我仍然没有得到清单。我完全没有错误，但我看不到列表。我没有正确加载数据吗？还是我没有正确地将列表放入视图中？

[更新的 X2] 好的，所以我知道列表应该在一个容器中，并且我应该给它一个宽度和一个高度。我不完全确定这是否正确，但我现在确实有一个可以上下拖动的列表。问题是里面还是什么都没有。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T04:56:18.097

好的，我现在显示我的列表。我认为最好的办法是让其他人知道我做错了什么，以防他们遇到同样的问题。首先，我遇到的一些问题可以在我的问题的更新中找到。其次，在阅读了此错误报告后，我终于弄清楚了为什么我的列表没有显示：[http://www.sencha.com/forum/showthread.php?186957-List-%E2%80%9C-WARN-Ext。 dataview.List-applyStore-The-specified-Store-cannot-be-found](http://www.sencha.com/forum/showthread.php?186957-List-%E2%80%9C-WARN-Ext.dataview.List-applyStore-The-specified-Store-cannot-be-found)。

我所做的和这里描述的有一些关键的区别。主要问题似乎是我没有向 StoreManager 注册商店。似乎向 Store 添加 id 实现了这一事实。实际上，这已经完成了，所以我将列表中的引用更改为那个 id 而不是我有商店实例的变量。在这样做时，我假设列表正在从商店经理那里获取商店. 然后它神奇地起作用了。

以下是我的代码与我的问题中的代码的区别：

我的服务.js

```
store: stationStore, [OLD]
store: 'stations',   [NEW] 
```

应用程序.js

```
stationStore = Ext.create('Syl.store.Stations'); [OLD]
Ext.create('Syl.store.Stations');                [NEW] 
```

似乎由于 storeManager 负责存储，我不需要将实例保存在变量中，这对我来说似乎比拥有全局变量更好。

所以我学到的关于列表的东西（这很痛苦）是。他们喜欢在容器里。似乎只在面板上有一个似乎不起作用。我听说它们可以直接添加到选项卡面板中，尽管我还没有测试过。这可能是我的第一个问题，然后我将其与商店问题相结合。其次，列表喜欢从 StoreManager 获取他们的商店。因此，使用 id 定义您的商店并创建它的实例。然后让列表使用其 id 引用商店。

我希望这可以帮助其他菜鸟不要浪费我必须让列表正常工作的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T21:36:42.183

'因为您在 Store *id: 'stations'*中定义，您必须在列表配置中定义

```
store: 'stations' 
```

小写第一个字符...

从商店定义中删除 xtype: 'stations'...

干杯，奥列格

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T21:36:43.673

在 MyService.js 中使用新代码并注释掉旧代码，只需将 store: stationStore, 更改为: store: 'stations',

那真的应该这样做。

完整版块供参考

```
Ext.define('Syl.view.MyService', {
    extend: 'Ext.Panel',
    xtype: 'stationsformPage',
    requires: [
        'Syl.store.Stations',    
        'Ext.form.FieldSet',
        'Ext.field.Password',
        'Ext.SegmentedButton',
        'Ext.List'
    ],

    config: {
        fullscreen: true,
        layout: 'vbox',
        items: [
        {
            docked: 'top',
            xtype: 'toolbar',
            title: 'My Service'
        },

        {
            xtype: 'container',
            layout: 'fit',
            flex: 10,
            items: [{
                xtype: 'list',
                title: 'Stations',
                width: '100%',
                height: '100%',
                store: 'stations',
                styleHtmlContent: true,
                itemTpl: '<div><strong>{stop}</strong> {id}</div>'
            }]
        },

        ]
    }
}); 
```

# java - AUDIOFOCUS_LOSS 在 android 通话后调用

> ID：12334110
> 
> 赞同：10
> 
> 时间：2012-09-08T20:15:49.273
> 
> 标签：java, android, android-mediaplayer

当电话响起时，我正在尝试暂停媒体播放器。我使用来自 android 网站的示例代码。就像这样;

```
public void onAudioFocusChange(int focusChange) {
        switch (focusChange) {
        case AudioManager.AUDIOFOCUS_GAIN:
            // resume playback
            if (mMediaPlayer != null && !mMediaPlayer.isPlaying()) {
                mMediaPlayer.start();
                mMediaPlayer.setVolume(1.0f, 1.0f);
            }

            break;

        case AudioManager.AUDIOFOCUS_LOSS:
            // Lost focus for an unbounded amount of time: stop playback and
            // release media player
            stopMediaPlayer();
            break;

        case AudioManager.AUDIOFOCUS_LOSS_TRANSIENT:
            // Lost focus for a short time, but we have to stop
            // playback. We don't release the media player because playback
            // is likely to resume
            if (mMediaPlayer.isPlaying())
                mMediaPlayer.pause();
            break;

        case AudioManager.AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK:
            // Lost focus for a short time, but it's ok to keep playing
            // at an attenuated level
            if (mMediaPlayer.isPlaying())
                mMediaPlayer.setVolume(0.1f, 0.1f);
            break;
        }
    } 
```

手机响铃时发送 AUDIOFOCUS_LOSS_TRANSIENT；没关系。当通话结束时，发送 AUDIOFOCUS_GAIN 并且播放器继续播放；这也可以。但是在发送 AUDIOFOCUS_GAIN 之后，立即发送 AUDIOFOCUS_LOSS。有什么想法为什么它会失去音频焦点？提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-17T12:04:43.073

可能它会帮助某人。我在项目中没有直接使用 MediaPlayer 而是通过 VideoView 时遇到了这个问题。打开文件时有以下代码

```
AudioManager am = (AudioManager) mContext.getSystemService(Context.AUDIO_SERVICE);
am.requestAudioFocus(null, AudioManager.STREAM_MUSIC, AudioManager.AUDIOFOCUS_GAIN); 
```

因此，当您打开文件时，它会获得音频焦点，并且在使用 focusChange 触发之前设置的侦听器`AudioManager.AUDIOFOCUS_LOSS`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T06:15:28.917

Two things to check: 1) Do you have a play button for instance, that when clicked, requests focus and starts playback? I had a problem once that they played a "tick" sound to provide feedback of a click. They would take audio focus away from my app when that happened. In your XML set this value to false for all your buttons in that activity:

```
android:soundEffectsEnabled = 'false' 
```

2) Check for the installation of other media player apps that also request focus. Are they requesting focus right after losing it? If so there's not much you can do about this other than warn your users not to install this app.

# c# - 会话变量消失

> ID：12334114
> 
> 赞同：0
> 
> 时间：2012-09-08T20:16:24.403
> 
> 标签：c#, oauth, asp.net-mvc-4, session-variables

我有一个用 C# 编写的 MVC 4 Web 应用程序，我在其中设置会话变量，重定向到另一个网站，该网站回调我的 Web 应用程序（我正在进行 OAuth 握手并将临时令牌放在我的会话中）和当重定向命中我的网络应用程序时，我尝试从会话中获取我的对象，但它是空的。

有没有做这样的事情的策略？

我可以发布我的代码，但它很复杂，所以让我们看看我首先得到什么样的响应。

请发布示例策略代码，asp.net/c# 对我来说是新的。

是的，我知道 mvc 4 包含 OAuth 示例，但我不能使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:39:09.710

It's not clear to me how your process works exactly. When you say "redirecting to another website which calls back to my web app" do you mean the remote website calls your app? Or that the user is redirected back to your site (which I assume has some token on the querystring?)

There are lots of good examples of how to use OAuth, but if you refuse to follow the typical methods, it will be a lot more difficult.

You need to provide more information on how your handshake works.

Without knowing more, all I can do is guess, in that a new session is being created because something is different about your callback request. You need to figure out what that is.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T20:43:01.580

small work around would be, which i did in the past is send the session variable value in the query string, and when they redirect you can read the value again, This would be ideal if you are controlling both the sides.

# php - x_sendfile 不加载

> ID：12334124
> 
> 赞同：0
> 
> 时间：2012-09-08T20:18:03.770
> 
> 标签：php, apache, module, x-sendfile

我正在尝试在 Mac OS X 服务器上的 apache Web 服务器中安装 x_sendfile。安装一切似乎都很好，并且 httpd.conf 配置了 **"LoadModule xsendfile_module libexec/apache2/mod_xsendfile.so"** 和 **"XSendFile ON"**。

如果我从终端运行**“httpd -M” ，我可以在列表中****找到“xsendfile_module（共享）”**。

但是在 phpinfo() 或 apache_get_modules() 中没有列出 x-sendfile。如果我尝试在我的 php 代码中使用 x-sendfile 来下载任何文件，浏览器只会下载一个 0 kb 的文件。不过，我可以在标头数据中看到 x-sendfile 标头标签。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:30:33.063

确保您的 httpd.conf 文件中有这一行。在您的页面的设置下添加它：

XSendFile 在 XSendFilePath /dir-where-the-file-gets-downloaded-from/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T18:32:37.160

我在 CentOS 上遇到了类似的问题。我补充说：

```
XSendFile On 
XSendFilePath /dir-where-the-file-gets-downloaded-from/ 
```

到 httpd.conf，但是我也确保在 php 页面本身上使用绝对路径

```
header('Content-Type: '.$formatMIME);
header("Content-Transfer-Encoding: Binary"); 
header("Content-disposition: attachment; filename=User_sees_this.pdf"); 
header("X-Sendfile: 'absolute_path_goes_here'"); 
```

据我所知，如果 httpd -M 显示模块已安装，上面的代码应该可以工作。您不会在 phpinfo 中看到 xsendfile，因为它不是 php 的扩展。我无法与 apache_get_modules() 交谈。

同样，这是基于我个人经验的评论，并不打算成为明确的答案。

# clojure - clojure 读取行在 leiningen 测试中失败

> ID：12334125
> 
> 赞同：5
> 
> 时间：2012-09-08T20:18:06.477
> 
> 标签：clojure, leiningen

我正在测试一些音频行为，我需要用户判断事情是通过还是失败。我想要求用户在 leiningen 测试中做出回应。但是，read-line 发生了一些事情，阻止了这种情况。

这是使用“lein new foo”创建新的 clojure 项目并编辑 foo/test/foo/core_test.clj 文件后的一些示例测试代码：

```
(ns foo.core-test
  (:use clojure.test
        foo.core))

(deftest a-test
  (testing "FIXME, what a fail."
    (let [_ (println "enter something")
          yn (read-line)]
      (println yn)
      (is (= yn "y"))))) 
```

这就是“lein 测试”中发生的情况

```
lein test foo.core-test
enter something
hi
there
what
is 
going on?
^C 
```

只有 control-C 停止（读取行）调用。

我在 Java 1.6.0_35 Java HotSpot(TM) 64 位服务器 VM 上使用 Clojure 1.4.0 和 Leiningen 2.0.0-preview7

关于如何让 read-line 在测试中工作的任何想法？

我还应该注意，（阅读行）在我的“lein repl”中确实可以正常工作......

```
> lein repl
nREPL server started on port 54398
REPL-y 0.1.0-beta8
Clojure 1.4.0
    Exit: Control+D or (exit) or (quit)
Commands: (user/help)
    Docs: (doc function-name-here)
          (find-doc "part-of-name-here")
  Source: (source function-name-here)
          (user/sourcery function-name-here)
 Javadoc: (javadoc java-object-or-class-here)
Examples from clojuredocs.org: [clojuredocs or cdoc]
          (user/clojuredocs name-here)
          (user/clojuredocs "ns-here" "name-here")

user=> (println (read-line))
       hi
hi
nil
user=> (read-line)
       ho
"ho" 
```

更新：

我要让@DaoWen 在这方面获胜。阅读链接和谷歌搜索，stdin 只是 leiningen 上的 b0rken。有了足够的跳跃，也许我可以解决这个问题，但对话框的建议似乎是最好的前进道路。在这里删除一些测试代码只是为了完整性，以防万一这有助于其他人。

```
(ns foo.core-test
  (:use clojure.test
        foo.core))

(import 'javax.swing.JOptionPane)

(defn ask-yn
  "return 0 on pass, 1 on fail"
  [prompt]
  (JOptionPane/showConfirmDialog nil prompt "User Input" JOptionPane/YES_NO_OPTION))

(deftest a-test
  (testing "a-test"
    (let [yn (ask-yn "did a-test pass?")]
      (is (= yn 0)))))

(deftest b-test
  (testing "b-test"
    (let [yn (ask-yn "did b-test pass?")]
      (is (= yn 0))))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:35:10.403

我知道这不能解决你的`read-line`问题，但也许你可以通过使用 a[`JOptionPane`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html)来解决它。如果我是聆听多个声音文件的用户，我宁愿单击*是*或*否*，而不必键入两者中的一个。

```
(import 'javax.swing.JOptionPane)
(JOptionPane/showConfirmDialog nil "Did the test pass?" "User Input" JOptionPane/YES_NO_OPTION) 
```

***更新：***

我以为我以前见过这样的东西：

[为什么使用 lein run 敲击 ENTER（看起来像挂起）后读取行不返回，但与 lein repl 一起使用？](https://stackoverflow.com/questions/10883188/why-does-read-line-not-return-after-hitting-enter-seems-like-a-hang-using-lein)

看起来您应该尝试运行`lein trampoline test`而不是仅仅`lein test`为了解决`stdin`问题。

# python - python代码的语法错误

> ID：12334128
> 
> 赞同：0
> 
> 时间：2012-09-08T20:18:45.417
> 
> 标签：python, syntax

我在课堂上有这个功能：

```
 def removeUserFromSessionDatabase(self, user):
      if user in self.users:
         for k in self.users.keys():
            if k == user:
               del self.users[k]
               print("Removed")

            else:
               print("user does not exist")
      else:
         print "soemthing" 
```

现在我总是在最后得到错误`else` 消息：`SyntaxError: invalid syntax` 它应该在哪里工作。users 在这里是字典，没有其他方法。为什么我会收到此语法错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T20:21:22.893

您的缩进可能不正确，很可能是由制表符引起的。跑去`python -tt scriptname.py`检查。

否则，您的代码中没有会导致此*特定*异常的语法错误，而不是您提供给我们的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T20:22:54.547

您可以通过以下方式简化很多

```
def removeUserFromSessionDatabase(self, user):
      return self.users.pop(user,False) 
```

或者

```
def removeUserFromSessionDatabase(self, user):
      if self.users.pop(user,False):
         print "%s was deleted from group"
      else:
         print "%s is not in group" 
```

或者

```
def removeUserFromSessionDatabase(self, user):
      userData = self.users.pop(user,False):
      if userData: 
          #do Something
      else:
          #do something else 
```

或者最后

```
def removeUserFromSessionDatabase(self, user):
      try:userData = self.users.pop(user):
      except KeyError:
          #user does not exist in dict
          pass
      print "Deleted {0}:{1} From List".format((user,userData)) 
```

显然（根据 denlan，我相信它） `del`可以使用

```
def removeUserFromSessionDatabase(self, user):
      try:
         del self.users[user]
         print "Removed user"
      except KeyError:  
         print "User does not exist" 

def alt_removeUserFromSessionDatabase(self, user):
      if user in self.users
         del self.users[user]
         print "Removed user"
      else:  
         print "User does not exist" 
```

# c# - 将 CookiesContainer 对象从 WCF 服务返回给客户端

> ID：12334130
> 
> 赞同：3
> 
> 时间：2012-09-08T20:18:47.153
> 
> 标签：c#, wcf, windows-phone-7.1

我想从 WCF 服务返回 CookiesContainer 对象，但我无法返回。我可以从服务返回字符串。

这是我的**Web.config**

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>

 <system.web>
  <compilation debug="true" targetFramework="4.0" />
    <authentication mode="Windows">
        <forms cookieless="UseCookies" requireSSL="false" />
    </authentication>
 </system.web>

<system.serviceModel>

<services>
  <service name="WcfService1.Service1" behaviorConfiguration="ServiceBehaviour">
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration="" contract="WcfService1.IService1" />

    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service>
</services>

<behaviors>
  <serviceBehaviors>
    <behavior name="ServiceBehaviour">
     <!--behavior>-->
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors>

<client>
  <endpoint address="http://localhost/WcfService1/Service1.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IService1"
    contract="ServiceReference1.IService1" name="BasicHttpBinding_IService1" />
</client>

<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_IService1" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="true" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>

    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel>

<system.webServer>
   <modules runAllManagedModulesForAllRequests="true" />
</system.webServer>

</configuration> 
```

这是我的 **IService1.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
using System.Net;
using System.IO;
using System.Web;

namespace WcfService1
{
// NOTE: You can use the "Rename" command on the "Refactor" menu to change the interface name "IService1" in both code and config file together.
[ServiceContract]
public interface IService1
{
    [OperationContract]
    CookieCollection GetCookies();

    [OperationContract]
    CookieContainer GetConnect(string uname, string password);
    //string GetConnect(string uname, string password);
}
} 
```

这是我的**Service1.svc.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
using System.Net;
using System.IO;
using System.Web;

namespace WcfService1
{
// NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "Service1" in code, svc and config file together.
public class Service1 : IService1
{
    public CookieCollection GetCookies()
    {
        HttpWebRequest req;
        CookieCollection cc = new CookieCollection();
        req = null;

        req = (HttpWebRequest)WebRequest.Create("http://site5.way2sms.com/");
        req.CookieContainer = new CookieContainer();
        // req.CookieContainer.Add(cc);

        req.CookieContainer.Add(cc);
        req.KeepAlive = true;

        req.UserAgent = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11";
        req.ContentType = "application/x-www-form-urlencoded";
        req.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";

        req.Referer = "http://site5.way2sms.com/content/index.html";

        req.AllowAutoRedirect = true;
        req.ServicePoint.Expect100Continue = true;

        return ((HttpWebResponse)req.GetResponse()).Cookies;
    }

    public CookieContainer GetConnect(string uid, string password)
    //public string GetConnect(string uid, string password)
    {
        HttpWebRequest req;
        HttpWebResponse res;
        Stream str;

        //try
        //{
            req = (HttpWebRequest)WebRequest.Create("http://site5.way2sms.com/Login1.action");
            req.Method = "POST";
            CookieContainer con = new CookieContainer();
            req.CookieContainer = con;
            req.CookieContainer.Add(GetCookies());
            req.KeepAlive = true;

            req.UserAgent = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11";
            req.ContentType = "application/x-www-form-urlencoded";
            req.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";

            req.Referer = "http://site5.way2sms.com/content/index.html";

            byte[] data = System.Text.Encoding.Default.GetBytes("username=" + uid + "&password=" + password);
            req.Credentials = new NetworkCredential(uid, password);
            req.ContentLength = data.Length;
            req.AllowAutoRedirect = true;
            req.ServicePoint.Expect100Continue = true;

            str = req.GetRequestStream();
            str.Write(data, 0, data.Length);
            str.Close();

            res = (HttpWebResponse)req.GetResponse();

            string iduri = System.Web.HttpUtility.ParseQueryString(res.ResponseUri.Query).Get("id");

            if (iduri != "")
            {
                return con;
                //return "Success";
            }
            else
            {
                res.Close();
                str.Close();

                return null;
                //return "Fail";
            }
        //}
        //catch (Exception ex)
        //{

        //}
    }
  }
 } 
```

这是我的**Login.xaml.cs**

```
 private void btnSignin_Click(object sender, RoutedEventArgs e)
    {
        string uid = txtUsername.Text.Trim();
        string password = txtPassword.Password.Trim();

        networkIsAvailable = Checknetwork();
        if (networkIsAvailable)
        {
            MessageBox.Show("Network Avaliable", "Avaliable", MessageBoxButton.OK);
            //svc.GetcookiesCompleted += new EventHandler<GetcookiesCompletedEventArgs>(svc_Get_Cookies);
            //svc.GetcookiesAsync(); 

            txtblockcheck.Visibility = Visibility.Visible;
            svc.GetConnectCompleted += new EventHandler<GetConnectCompletedEventArgs>(svc_Get_Connected);
            svc.GetConnectAsync(uid, password);
        }
        else
        {
            MessageBox.Show("Please check your network", "Warning", MessageBoxButton.OK);
        }
    }

    void svc_Get_Connected(object send, GetConnectCompletedEventArgs e)
    {
        CookieContainer con = e.Result;
    } 
```

当我从服务返回 CookiesContainer 时，我收到以下错误

在**http://localhost:3922/Service1.svc**上没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。

我不明白如何将 CookiesContainer 对象从服务返回到客户端，有朋友可以告诉我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T21:18:56.653

如果不出意外，为了帮助调试它，我会手动运行序列化。CookieContainer 不是 XmlSerializable（但是是 Soap Serializable，所以这不应该是真正的问题），但我从不喜欢发送除我在 web 服务上编写的 POCO 对象以外的任何东西。

这是我的通用序列化方法，可能只是将字节数组提供给它，或者`Convert.ToBase64String()`返回它。如果不出意外，这将绝对确认您的 Web 服务按预期工作。

使用我下面的方法：

```
public byte[] GetConnect(string uid, string password)
{
    ...

    if (iduri != "")
    {
        return SerializeObject(con);
    }
} 
```

-

```
void svc_Get_Connected(object send, GetConnectCompletedEventArgs e)
{
    CookieContainer con = DeserializeObject<CookieContainer >(e.Result);
} 
```

-

```
public static byte[] SerializeObject<T>(T obj)
{
    try
    {
        using (MemoryStream memoryStream = new MemoryStream())
        {
            BinaryFormatter xs = new BinaryFormatter();
            xs.Serialize(memoryStream, obj);

            return memoryStream.ToArray();
        }
    }
    catch
    {
        return null;
    }
}
public static T DeserializeObject<T>(byte[] xml)
{
    BinaryFormatter xs = new BinaryFormatter();
    MemoryStream memoryStream = new MemoryStream(xml);
    return (T)xs.Deserialize(memoryStream);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T22:05:11.347

试试这个：

1.  在您的客户端项目中，转到您的**Service Reference**，右键单击，然后点击*Update Service Reference*。每次您对服务标志（任何方法或参数）进行更改时，都必须更新此参考。也许您做了一些更改而忘记执行此步骤。

2.  以防万一，在您的接口和服务定义中设置参数名称等于。通知`CookieContainer GetConnect(string uname, string password);`中定义的*接口*指定`string uname`，但*Service1*实现声明`CookieContainer GetConnect(string uid, string password);`，使用`string uid`. 应该不是问题，只是为了整洁。

# javascript - 爆米花变源

> ID：12334133
> 
> 赞同：3
> 
> 时间：2012-09-08T20:19:04.217
> 
> 标签：javascript, html, video, popcornjs

我正在尝试制作一个爆米花播放器实例，我可以将其传递到页面的不同部分。我的目标是更改视频的来源，但保持绑定到视频元素的相同触发器。

我创建了一个演示这种情况的[小提琴](http://jsfiddle.net/T89mj/16/)，在“结束”时我更改了源标签中的 src。然后，我触发视频再次播放，但它不是播放更新源中的新视频，而是播放 previos 视频。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T23:02:09.900

在再次播放之前使用加载方法。

> ```
> $($('video').children()[0]).attr('src','http://www.808.dk/pics/video/gizmo.mp4');
> $pop.load();
> $pop.play(); 
> ```

你可以看到它在[这里工作](http://jsfiddle.net/jbalsas/T89mj/20/)

# mysql - 如何从一个表中区分选择并将另一个表中的信息添加到结果中？

> ID：12334143
> 
> 赞同：0
> 
> 时间：2012-09-08T20:20:48.107
> 
> 标签：mysql, sql, join

这是我的两张桌子：

```
mysql> desc riddims;
+---------------+--------------+------+-----+-------------------+-------+
| Field         | Type         | Null | Key | Default           | Extra |
+---------------+--------------+------+-----+-------------------+-------+
| riddim        | varchar(255) | NO   | MUL | NULL              |       |
| genre         | varchar(9)   | NO   |     | NULL              |       |
| youtube       | varchar(11)  | NO   |     | NULL              |       |
| image         | varchar(11)  | NO   |     | NULL              |       |
| last_modified | timestamp    | NO   |     | CURRENT_TIMESTAMP |       |
+---------------+--------------+------+-----+-------------------+-------+
5 rows in set (0.00 sec)

mysql> desc tunes;
+---------------+--------------+------+-----+-------------------+-------+
| Field         | Type         | Null | Key | Default           | Extra |
+---------------+--------------+------+-----+-------------------+-------+
| riddim        | varchar(255) | NO   | MUL | NULL              |       |
| artist        | varchar(255) | NO   | MUL | NULL              |       |
| tune          | varchar(255) | NO   |     | NULL              |       |
| label         | varchar(255) | NO   |     | NULL              |       |
| producer      | varchar(255) | NO   |     | NULL              |       |
| year          | varchar(4)   | NO   |     | NULL              |       |
| lyrics        | text         | NO   |     | NULL              |       |
| flag          | varchar(12)  | NO   |     | NULL              |       |
| last_modified | timestamp    | YES  |     | CURRENT_TIMESTAMP |       |
+---------------+--------------+------+-----+-------------------+-------+ 
```

到目前为止我得到的是

```
SELECT DISTINCT riddim FROM tunes WHERE year = '2012' ORDER BY last_modified DESC LIMIT 20 
```

它打印“riddim”列的最后 20 个添加/修改的条目。如何将有关“riddims”表中每个riddim 的正确信息添加到从“tunes”表中抓取的每一行？

我假设我必须以某种方式使用“riddim”列加入它们，因为这是两个表共有的“关键”，我只是不知道它是如何工作的。

我的目标是打印今年最后 20 个riddims 条目的“riddim、year、image、label”（使用 php），其中只有“tunes”表包含有关年份和标签的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:25:35.763

```
SELECT DISTINCT
  tunes.riddim AS riddim,
  tunes.year AS year.
  riddims.image AS image,
  runes.label AS label
FROM riddims
INNER JOIN tunes ON riddims.riddim=tunes.riddim
WHERE tunes.year="2012"
ORDER BY riddims.last_modified
LIMIT 20
; 
```

# mysql - 数据库设计——一对多

> ID：12334150
> 
> 赞同：0
> 
> 时间：2012-09-08T20:21:38.847
> 
> 标签：mysql, database-design

我必须设计一个数据库（MySQL），其中一条记录与多条记录相关联。

例如：

> 记录 <-> 标签（ Persons(A,B,C...) , Jobs(X,Y,Z...) , Areas(1,2,3 ...) ）

您认为哪种方法是最好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:27:48.260

为了避免异常（更新和删除操作），您应该规范您的关系。所以我认为你应该这样做：

*   Areas(areaId, personId,...) 与工作和其他类似关系相同。关于规范化，请参见此处：[http ://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)

# moai - MOAI动画线程中断主游戏循环线程

> ID：12334158
> 
> 赞同：1
> 
> 时间：2012-09-08T20:23:01.420
> 
> 标签：moai

我是 MOAI 的新手，主要是因为我的研究生课程也强迫我使用它。显然，他们喜欢在较短的期限内陡峭的学习曲线。:)

无论如何，我有一个问题，我的主游戏循环在它自己的线程上调用了一个触发 2 秒动画的函数，我也把它放在了一个单独的线程上。为了让动画在我移除道具之前完成，我尝试了自旋锁定并尝试使用easedrivers。两者都使动画工作正常，但在那两秒钟内，我的主线程似乎根本没有执行。

该游戏使用 Box2D，因此在这两秒钟内它不会崩溃，但所有游戏循环逻辑在此动画期间都不起作用。我认为将它放在自己的线程上的全部意义在于它可以与游戏循环一起运行。有没有人有什么建议？

```
--inside of a another function where cheeseProp is created.

function cheeseProp:destroy ()

            animateLogoThread = MOAIThread:new ()

            --animateLogoThread = MOAICoroutine.new()

            layer:removeProp ( self )

            score = score + 10

            animateLogoThread:run ( animateLogo(self.type) )

            --animateLogo(self.type)

            timerFrames = 0

            cheeseCounter = cheeseCounter - 1

            cheeseArray[self] = nil

            self = nil

end

function animateLogo(logoNum)

local logoGfx = MOAIGfxQuad2D.new ()

logoGfx:setRect ( -100, -100, 100, 100 )

logoGfx:setTexture ( "assets/logo1.png" )

local x1, y1 = beeBody:getPosition()

local logoProp = MOAIProp2D.new()

logoProp:setDeck(logoGfx)

logoProp:setLoc ( x1, y1 )

layer:insertProp(logoProp)

logoProp:moveScl( -1, -1, 2.0)

action = logoProp:seekLoc ( x1 + 400, y1 + 400, 2.0 )

while action:isBusy () do coroutine:yield () end

-- local ease = MOAIEaseDriver.new ()

-- ease:reserveLinks ( 4 )

-- ease:setLink ( 1, logoProp, MOAIProp2D.ATTR_X_LOC, 400 )

-- ease:setLink ( 2, logoProp, MOAIProp2D.ATTR_Y_LOC, 400 )

-- ease:setLink ( 3, logoProp, MOAIProp2D.ATTR_X_SCL, -1 )

-- ease:setLink ( 4, logoProp, MOAIProp2D.ATTR_Y_SCL, -1 )

-- ease:setSpan ( 2.0 )

-- ease:start ()

-- MOAIThread.blockOnAction(ease)

layer:removeProp(logoProp)

end 
```

正如您从注释掉的代码中看到的那样，我已经尝试了带有 blockOnAction 的easedrivers，并且我目前有一个线程正在生成并运行animateLogo。两者的行为完全相同。我取出了一些不应该相关的纹理选择代码，使代码更难阅读。就像我上面说的，cheeseProp:destroy 是从主游戏循环中调用的，看起来我的线程阻塞也阻塞了父线程。

提前感谢您的帮助！

# java - jls7 通用内部类文档错误

> ID：12334159
> 
> 赞同：1
> 
> 时间：2012-09-08T20:23:03.207
> 
> 标签：java, generics, documentation, inner-classes

```
class Jls7error<T extends OutputStream> {
    class Jls7errorInner<S extends T> {
        public S out;
    }
} 
```

根据 jls7 Oracle 文档，此代码不应编译：

> 在... 中的任何位置引用泛型类 C 的类型参数是编译时错误 。
> • 嵌套在 C 中的任何类。

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.2)
（第 185 页，docs.oracle.com/javase/specs/jls/se7/jls7 .pdf）
其实这段代码确实在我的jdk 1.7上编译运行，是不是文档错误？

编辑：这是 PDF 版本中的文档错误。Oracle 更正了 html 和 pdf 文档中的文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T20:43:35.853

I'm not sure where you're seeing `any class nested within C`. That section actually says

> It is a compile-time error to refer to a type parameter of a generic class C anywhere in:
> 
> *   the declaration of a static member of C (§8.3.1.1, §8.4.3.2, §8.5.1), or
> *   the declaration of a static member of any type declaration nested within C, or
> *   a static initializer of C (§8.7), or
> *   a static initializer of any class declaration nested within C.

Here's an example to demonstrate what each bullet is disallowing:

```
public class Foo<T> {
    private static T t; // first bullet makes this a compiler error

    static {
        T t; // third bullet makes this a compiler error
    }

    private static class Bar {
        private static T t; // second bullet makes this a compiler error

        static {
            T t; // fourth bullet makes this a compiler error
        }
    }

    private class Baz {
        private static T t; // second bullet again

        // you can't have a static initializer
        // in a non-static nested class
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T20:43:48.040

（移动到回答空间/格式。）

唯一引用此声明的地方：

> 在以下任何地方引用泛型类 C 的类型参数是编译时错误：
> 
> *   C 的静态成员的声明（§8.3.1.1、§8.4.3.2、§8.5.1），或
> *   嵌套在 C 中的任何类型声明的静态成员的声明，或
> *   C 的静态初始化程序（第 8.7 节），或
> *   嵌套在 C 中的任何类声明的静态初始化程序。

# javascript - 检测 html5 移动设备中的抖动

> ID：12334160
> 
> 赞同：8
> 
> 时间：2012-09-08T20:23:19.527
> 
> 标签：javascript, html, web-applications, accelerometer, shake

我目前正在用html5构建一个网络应用程序，它需要能够检测用户何时摇动手机以及他们摇动手机的速度。我一直在浏览，但似乎找不到任何关于如何实现这一点的例子。我知道 html5 有一个加速度计可以检测手机的方向，但是它是如何检测用户摇动它的速度的呢？

我也在我的 iPhone 上测试这个，虽然理想情况下我希望它也能在 Android 设备上工作。想法？例子也很棒。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-11-29T00:59:27.263

[Shake.js](https://github.com/alexgibson/shake.js/)看起来是一个很好的库——它提供了一个自定义的 'shake' 事件并且在现代浏览器上受支持。这是[他们文档](https://github.com/alexgibson/shake.js/#setup)中有关如何实现它的示例设置：

```
<script src="shake.js"></script>
<script>
var myShakeEvent = new Shake({
    threshold: 15, // optional shake strength threshold
    timeout: 1000 // optional, determines the frequency of event generation
});

// Start listening to device motion
myShakeEvent.start(); 

// Register a shake event listener on window with your callback
window.addEventListener('shake', shakeEventDidOccur, false); 

//function to call when shake occurs
function shakeEventDidOccur () {

    //put your own code here etc.
    alert('shake!');
}
</script> 
```

`http://`请注意，在不安全的浏览上下文（例如）中，这在某些浏览器中不起作用

# unix - 比较 unix 系统上的两个文本文件

> ID：12334162
> 
> 赞同：5
> 
> 时间：2012-09-08T20:23:51.503
> 
> 标签：unix, emacs

我在 GNU/Linux 系统上使用 Emacs。我正在尝试比较两个包含内容几乎相似的数字列的数据文件。是否有 Emacs/Unix 实用程序来突出这些文本文件之间的差异？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T20:25:02.730

在 emacs 中，如果将两个文件拉入不同的缓冲区，则可以使用 `M-x ediff-buffers`命令显示差异。Emacs 将很好地突出差异并允许您同时滚动浏览缓冲区。请参阅此“[十个 Emacs 基本技巧](http://web.psung.name/emacstips/essential.html)”页面上的技巧**#5 ，或**[Ediff 上的 GNU 文档](http://www.gnu.org/software/emacs/manual/html_node/ediff/index.html)。

在 Unix 下有[`diff`](http://unixhelp.ed.ac.uk/CGI/man-cgi?diff)命令。这是一个使用 diff 的简短[示例](http://unixhelp.ed.ac.uk/utilities2/diff1.html)，还有[一个示例](http://lowfatlinux.com/linux-compare-files-diff.html)

我通常更喜欢与 Emacs 进行比较，更直观，当然这两个文件都需要放入缓冲区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T20:24:32.213

`diff`命令是你的[朋友。](http://en.wikipedia.org/wiki/Diff)

# c# - WebResponse 和 WebRequest

> ID：12334163
> 
> 赞同：0
> 
> 时间：2012-09-08T20:23:52.933
> 
> 标签：c#

我有这个代码

// 网络请求部分

```
private static WebRequest Web_request(string ip)
{
    WebRequest request = WebRequest.Create("http://website/");
    request.Method = "POST";
    string postData = "a=1&b=2";
    byte[] byteArray = Encoding.UTF8.GetBytes(postData);
    request.ContentType = "application/x-www-form-urlencoded";
    request.ContentLength = byteArray.Length;
    Stream dataStream = request.GetRequestStream();
    dataStream.Write(byteArray, 0, byteArray.Length);
    dataStream.Close();
    return request;        
} 
```

// 网页响应部分

```
private static string Web_response(WebRequest request)
{
    WebResponse response = request.GetResponse();
    Stream dataStream = response.GetResponseStream();
    StreamReader reader = new StreamReader(dataStream);
    string responseFromServer = reader.ReadToEnd();
    reader.Close();
    dataStream.Close();
    response.Close();

    return responseFromServer;
} 
```

和主程序

```
void Main()
{
    for (int ii = 0; ii < counter; ii++)
    {
        req[ii] = Web_request(ip_ext[ii]);
    }
    for (int ii = 0; ii < counter; ii++)
    {
        string domen = Web_response(req[ii]);
    }
} 
```

但是在 Web_request 循环程序的第三步显示 Form1 并冻结。可能我应该在 web_request 部分关闭一些东西..有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:37:50.847

您需要将方法分开为请求和响应

```
HttpWebRequest req = WebRequest.Create(url) as HttpWebRequest;
req.Method = Constants.HTTPVerbGet;
req.KeepAlive = false;
req.Accept = Constants.HTTPRequestType;
using (var webResponse = (HttpWebResponse)req.GetResponse())
{
    using (var reader = new StreamReader(webResponse.GetResponseStream()))
    {
        string objJson = reader.ReadToEnd().ToString();
    }
} 
```

尝试这个..

# entity-framework - Entity Framework 5.0 - 如何引用具有相同实体模型的不同表

> ID：12334164
> 
> 赞同：0
> 
> 时间：2012-09-08T20:24:00.983
> 
> 标签：entity-framework, dynamic, ef-code-first

假设，理论上，我有一个包含未知数量表的数据库，命名如下：

```
MyTable1
MyTable2
MyTable3
.. 
```

等等。这些表中的每一个都具有完全相同的架构。我不知道数据库中有多少这样的表。

使用 EF5.0 和代码优先，我希望能够通过传入一个参数来通过一个 DbContext 引用这些表中的任何一个：

```
using (var db = new MyContext())
{
    db.GetMyTable(2).ForEach(e => Console.WriteLine("Table 2 entry: " + e.MyField));
    db.GetMyTable(5).ForEach(e => Console.WriteLine("Table 5 entry: " + e.MyField));
} 
```

这可能吗？

我想到的另一种方法是创建完全不同的上下文并`.ToTable()`在映射中提供正确的：

```
public class MyContext : DbContext
{
    private int _tableNumber;

    static MyContext()
    {
        Database.SetInitializer<MyContext>(null);
    }

    public MyContext(int tableNumber) : base("Name=TheContextName")
    {
        _tableNumber = tableNumber;
    }

    public DbSet<MyTable> MyTableEntries { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        System.Data.Entity.ModelConfiguration.Conventions.
        modelBuilder.Configurations.Add(new MyTableMap(_tableNumber));
    }
}

 public class MyTableMap : EntityTypeConfiguration<MyTable>
 {
    public MyTableMap(int tableNumber)
    {
        // Primary Key
        this.HasKey(t => t.id);

        // Table & Column Mappings
        this.ToTable("MyTable" + tableNumber);
        this.Property(t => t.id).HasColumnName("id");
        this.Property(t => t.n).HasColumnName("MyField");

    }
 } 
```

然后我可以根据我想要处理的表使用单独的上下文进行操作：

```
Console.WriteLine("Contents of MyTable1:");
using (var db = new MyContext(1))
{
    db.MyTableEntries.ToList().ForEach(n => Console.WriteLine(n.MyField));
}

Console.WriteLine("Contents of MyTable2:");
using (var db = new MyContext(2))
{
    db.MyTableEntries.ToList().ForEach(n => Console.WriteLine(n.MyField));
} 
```

但是，发生的情况是，`OnModelCreating()`在上下文中仅在第一次实例化时被调用一次，因此该表始终映射到 MyTable1。是否有某种可以关闭的缓存，以便`OnModelCreating()`每次都调用它，如果是这样，这是个好主意吗？有没有更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T21:46:31.700

> 我不知道数据库中有多少这样的表。

因此，单一上下文是不可能的，尤其是代码优先。EDMX 支持这种情况（但 EDMX 设计器不支持），但前提是您能够在设计时定义所有表。它被称为[MEST](http://msdn.microsoft.com/en-us/library/bb738537.aspx)。

> 但是，发生的情况是上下文中的 OnModelCreating() 仅在第一次实例化时被调用一次，因此该表始终映射到 MyTable1。

是的，这正是发生的事情。模型创建只执行一次，因为它是非常昂贵的操作，并且模型在整个应用程序生命周期中被重用。

> 有没有更优雅的方式来做到这一点？

有一种方法，但它离优雅还很远：

*   手动创建 DbModelBuilder` 的实例并用您需要的所有映射填充它
*   在该实例上调用 Build 以获取`DbModel`实例
*   在实例上调用编译`DbModel`以获取`DbCompiledModel`（缓存此）
*   现在将`DbCompiledModel`实例传递给`DbContext`构造函数

优雅的方法不是使用该方法，而是使用该方法`context.Database.SqlQuery`执行动态查询并返回类型的实例 - 如果查询返回与类型中的属性同名的列，即使没有映射，EF 也会处理它，但它将是只读解决方案。

# compilation - 使用 Visual C++ 2010 Express 编译 cryptopp

> ID：12334165
> 
> 赞同：0
> 
> 时间：2012-09-08T20:24:08.403
> 
> 标签：compilation, crypto++

我需要使用 Visual C++ 2010 express 编译 cryptopp（32 位）。我下载了5.6.1版本，打开了crypttest.sln，VS需要做一些转换——失败了。*.vcproj 文件在其中指定了 x64 平台，但以某种方式失败了。我试图调整 .vcproj 文件并删除 x64，但它仍然因一些奇怪的错误而失败：

```
This application has been updated to include settings related to the User Account Control 
(UAC) feature of Windows Vista. By default, when run on Windows Vista with UAC enabled, this 
application is marked to run with the same privileges as the process that launched it.     This
 marking also disables the application from running with virtualization. You can change
UAC related settings from the Property Pages of the project 
```

我需要以某种不同的模式编译静态库（需要将其链接到不同的 dll），但我不知如何将其加载到 Visual Studio 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T02:29:59.373

这个问题已经存在了一段时间。例如，请参阅MSDN 博客中的[如何在 Visual Studio 2005 和 2008 之间使用解决方案和项目。](http://blogs.msdn.com/b/djpark/archive/2007/11/07/how-to-use-solutions-and-projects-between-visual-studio-2005-and-2008.aspx)

您可以从项目的属性页更改它。请参阅MSDN 上的[/MANIFESTUAC](http://msdn.microsoft.com/en-us/library/bb384691.aspx)。

![UAC 属性页](../Images/745e0207e1abffb4279a16a09d3e49e9.png)

您也可以打开`*.proj`文件（或`*.projx`文件）并手动将其删除。只需查找有问题的行号；或在 XML 中的节点下搜索`EnableUAC`（和朋友） 。`Link`可能有四个不同的条目 - 一个用于`Debug`and `Release`，一个用于`x86`and `x64`。

![UAC PROJX 文件链接节点](../Images/6ae8600f8d58bb3868e0a5e394f8614e.png)

# objective-c - 仅当行被刷过时才从 UITableView 中删除删除按钮

> ID：12334166
> 
> 赞同：2
> 
> 时间：2012-09-08T20:24:10.000
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

当我的行`UITableView`被滑动时，会显示删除按钮。如果我随后将一个项目添加到该表中，则插入该行但删除按钮希望保持在同一索引处 - 因此它移动到它现在位于同一插槽中的行。

当我显示用于添加新项目的模式时，我希望该行删除删除按钮。换句话说，我想将编辑设置为`NO`. 然而，它并不是那么简单——当用户通过编辑按钮进入编辑模式时，我不想退出编辑模式*。*我想让用户回到他离开桌子的状态。

那么 - 我如何告诉 a`UITableView`删除删除按钮，但不完全退出编辑模式？即使用户点击了“编辑”，然后使用“-”图标显示删除按钮，我也想告诉表格删除按钮，但如有必要仍保持编辑模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:06:00.530

请记住，每个`UITableViewCell`实例都有自己的[`editing`属性](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006938-CH3-SW17)（您可以通过其他一些属性进一步影响这些属性，例如`editingAccessoryType`）。添加新行时，可以`editing`单独保留表格视图的属性，但手动更新`editing`用户正在编辑的旧行和刚刚插入的新行的属性。

# android - Facebook 使用 Graph API 在群墙中发帖

> ID：12334169
> 
> 赞同：2
> 
> 时间：2012-09-08T20:24:28.317
> 
> 标签：android, facebook, facebook-graph-api

我正在开发一个需要在用户创建的组中发布的 android 应用程序。

```
Bundle params = new Bundle();
params.putString("link","www.google.com");
params.putString("message","Group Message");

try {
  String res =    fb.request(GROUP_ID+"/feed",params);

 Log.w("Response",""+res);
} catch (MalformedURLException e) {

 e.printStackTrace();
 } catch (IOException e) {
 e.printStackTrace();
}

 } 
```

我也使用以下权限，

```
public static final String[] permissions = {"user_photos","friends_groups","read_stream","user_groups","publish_stream"}; 
```

但是，当我执行此操作时，不会引发任何异常，并且不会在组的墙上发布帖子。

当我尝试使用创建@Mentions 时，`@[user_id:name]`我什至没有得到超链接。

谁能帮我解决上述两个问题。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T22:44:31.690

默认情况下，该`fb.request`方法使用 GET 请求。当您打算创建一个新帖子时，您需要使用 POST 方法。这样做很简单——只需将第三个参数 ( `httpMethod`) 作为“POST”传递。

例如： `String res = fb.request(GROUP_ID+"/feed",params,"POST");`

欲了解更多信息：[https ://developers.facebook.com/docs/reference/androidsdk/ayncrequest/](https://developers.facebook.com/docs/reference/androidsdk/ayncrequest/)

此外，第一个参数必须是完整的 URL，而不仅仅是 ID -`https://graph.facebook.com/GROUP_ID/feed`

当然，我是根据您的变量名称做出假设。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:07:33.380

```
String response = mFacebook.request(GROUP_ID+"/feed",bundle,"POST"); 
```

通过使用上述方法，我们可以在群墙发帖。第一个参数 GROUP_ID 应该是一个 15 位数字的字符串。它不应该是一个 url。

第二个参数 bundle 是您要传递的包。

# javascript - 使用流沙后 Backbone.View 中的“单击”事件消失

> ID：12334173
> 
> 赞同：0
> 
> 时间：2012-09-08T20:24:50.257
> 
> 标签：javascript, jquery, events, backbone.js, quicksand

模型中有一个带有事件的“视图” `click`。使用 jQuery 的流沙效果插件后，对象失去了它们的事件处理程序。我试图在backbone.js中使用标准方法为事件添加监听器：

```
events: {
    "click .objContact"    : "openChat"
} 
```

和相同的工具 jQuery `delegate`：

```
var self=this; 
this.$el.delegate('.objContact','click', function(){
    self.openChat();
}); 
```

和`live`：

```
var self=this; 
this.$el.find('.objContact').live('click', function(){
    self.openChat();
}); 
```

但`click`事件消失了。可能是什么问题呢？我该如何解决？

**UPD：**调用'Quicksand'是在Backbone.Router中（可能变化是通过jQuery直接获取的，不是Backbone），所以Backbone.View中不处理变化

**UPD 2：**问题通过以下方式解决 - 通过将`click`事件的处理从 View-model 移动到 View-collection。并接受**现场**治疗（未工作`on`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T02:06:14.083

简单答案：而不是将函数链接到使用经典 ajax 方法的链接，即

```
$('a.oldJqueryClass').click(function(){.... 
```

您需要使该功能独立，声明一个新功能

功能 myfunction(params) {alert(params);}

比在你用旧学校方式调用的链接中：

```
<a href="#" class="oldJqueryClass" onclick="javascript:myfunction('My alert message')">Click here</a> 
```

通过这种方式，克隆的元素将包含对函数的调用，您可以忘记恢复因流沙克隆而破坏的 dom 完整性。

我在我的项目中做到了，效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T20:37:42.540

`delegateEvents()`在相关的 DOM 条目发生更改或被覆盖后执行调用。在传统的 Backbone 应用程序中，这通常是在`render`方法中完成的，但您可能需要弄清楚流沙在何时何地发挥作用（我对此一无所知），并调用`delegateEvents`它将重新激活当前元素中的事件DOM。

# objective-c - 在xcode中使用数组反转字符串

> ID：12334174
> 
> 赞同：0
> 
> 时间：2012-09-08T20:24:52.547
> 
> 标签：objective-c, arrays, string, stack

这是我在stackoverflow中的第一个问题！我试图在 xcode 中使用两个数组来反转字符串，我设置了界面，我得到了一个按钮、一个文本字段和一个标签。触摸按钮时，进入文本字段的任何内容都会反转！我得到了代码，在纸上对我来说似乎是正确的，问题是当我用例如“HELLO”测试应用程序时，myArray 的内容是“H E”，reverseArray 是“OL L”。如果有人反刍帮助我非常厌倦跟踪此代码，我将不胜感激:(((这是代码：

```
@interface ViewController ()
@end

@implementation ViewController
@synthesize textField,string1,string2,reverseArray,myArray;
@synthesize Label1;
- (IBAction)Reverse:(UIButton *)sender {
reverseArray=[[NSMutableArray alloc]init];
string1=[[NSString alloc]init];
string2=[[NSString alloc]init];
string1=textField.text;
myArray=[[NSMutableArray alloc]init];
    for (int i=0; i<=string1.length-1; i++) {
    [myArray insertObject:[[NSString alloc] initWithFormat:@"%c",[string1 characterAtIndex:i]] atIndex:i];

}
    for (int j=0; j<=myArray.count-1; j++) {
    [reverseArray insertObject:[myArray objectAtIndex:myArray.count-1] atIndex:j];
    [myArray removeLastObject];

}
NSLog(@"%@",myArray);
NSLog(@"%@",reverseArray); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:51:41.790

对于第二个循环，您使用 myArray.count 作为“for”循环的结束条件，但 myArray.count 每次循环迭代都会减少 1，因为每次迭代都会从 myArray 中删除最后一个对象。想一想：

```
First iteration:  j=0; myArray.count - 1 = 4
Second iteration: j=1; myArray.count - 1 = 3
Third iteration:  j=2; myArray.count - 1 = 2 
```

它在第四次迭代时停止，因为 j=3 > myArray.count -1 = 1

在第二个循环中尝试这样的事情（注意：我现在不在 xCode 前面，所以下面的代码块中可能会有错误。请谨慎对待）：

```
for( int j = string1.length -1; j >= 0; j-- ) {
    [reverseArray addObject:[myArray objectAtIndex:j]];
} 
```

# ruby-on-rails - Rails I18n：插入链接的更好方法？

> ID：12334183
> 
> 赞同：6
> 
> 时间：2012-09-08T20:26:50.417
> 
> 标签：ruby-on-rails, internationalization, dry

有没有一种更简洁的 content_tag-ish 方式来做到这一点？（我不想在我的 YML 中使用 HTML）

en.yml:

```
expert_security_advice: "Go <a href='{{url}}'>here</a> for expert security advice." 
```

布局.html.erb：

```
<%= t(:expert_security_advice, :url => "http://www.getsafeonline.org") %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T20:51:24.040

不，没有更清洁的方法来处理这个问题。如果您想`url`从字符串中拉出，那么您将无法将句子分成四部分：

1.  `"Go`.
2.  `<a href="{{url}}">...</a>`
3.  `'here'`
4.  `'for expert security advice.'`

这四个部分很容易用英语重新组合在一起，但是在其他语言中顺序可能会改变，这可能会改变*这里*的大小写并导致其他问题。为了让它正确，你必须像这样构造一些东西：

```
here        = "<a href=\"#{url}\">#{t(:expert_security_advice_here)}</a>"
whole_thing = t(:expert_security_advice, :here => here) 
```

以及 YAML 中的两个单独的字符串：

```
expert_security_advice_here: "here"
expert_security_advice: "Go {{here}} for expert security advice." 
```

您还必须告诉翻译人员这两段文本是放在一起的。

如果那种东西对你来说看起来更干净，那就去吧，但我不会担心需要翻译的文本中的少量 HTML，任何值得交谈的翻译者都可以处理它。永远不要试图在 I18N/L10N 问题上走捷径，它们总是会让你误入歧途并导致问题：非 DRY 代码（WET 代码？）总是比损坏的代码好。

* * *

顺便说一句，我建议您放弃标准的 Rails I18N 字符串处理工具，转而使用[gettext](https://github.com/grosser/gettext_i18n_rails)，让所有内容与 gettext 保持同步更容易，并且代码最终更容易阅读。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T23:16:46.620

我能想到的最好的：

en.yml:

```
expert_security_advice: "Go *[here] for expert security advice." 
```

布局.html.erb：

```
<%= translate_with_link(:expert_security_advice, "http://www.getsafeonline.org") %> 
```

application_helper.rb：

```
include ActionView::Helpers::TagHelper

def translate_with_link(key, *urls)
  urls.inject(I18n.t(key)) { |s, url|
    s.sub(/\*\[(.+?)\]/, content_tag(:a, $1, :href => url))
  }
end 
```

# java - 加载图像错误

> ID：12334184
> 
> 赞同：1
> 
> 时间：2012-09-08T20:26:53.063
> 
> 标签：java, image, javax.imageio

我需要将生成的图像加载到我的 Java 桌面应用程序中。

我正在使用与此类似的代码：

```
BufferedImage img = null;
try {
    img = ImageIO.read(new File("strawberry.jpg"));
} catch (IOException e) {
//it isn't the code here
} 
```

它加载的图像，但在更大的图像上我的应用程序刚刚退出。

如何检测我可以加载多大的图像，或者不只是退出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:49:04.130

> 如何检测我可以加载多大的图像，或者不只是退出？

可能有一些库允许您通过读取标题来确定图像的 WxH 和颜色深度，但 J2SE 中的任何内容都不会开箱即用。

另一种“从另一个方向”的方法是采取防御性的方法来装载它们。[该技术在此答案](https://stackoverflow.com/a/4786461/418556)的代码中进行了概述，但可以概括为：

*   保留内存缓冲区
*   提前准备内存警告面板
*   执行“内存密集型”任务
*   on `OutOfMemoryError`：通过清除缓冲区为 VM 提供一些内存“喘息空间”
*   告诉用户出了什么问题，以及如何解决它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T23:08:39.357

如果您不在事件调度程序线程中（例如按下 UI 中的按钮），那么您的应用程序将不会崩溃。它会使线程崩溃，线程将被释放，您将无法获得图像，但您的应用程序将处于活动状态。

有可能创建一个线程：或者您将扩展一个线程并覆盖 run() 方法或创建一个 Runnable 接口并将其提供给线程构造函数。

```
BufferedImage img = null;
try {
    img = ImageIO.read(new File("strawberry.jpg"));
} catch (IOException e) {
//it isn't the code here
}catch(OutOfMemoryError err){
// your code will be here :)
} 
```

在进入加载图像功能之前尝试调试/记录您的代码，以查看您的最大可分配内存有多少：

```
// Get current size of heap in bytes
long heapSize = Runtime.getRuntime().totalMemory();

// Get maximum size of heap in bytes. The heap cannot grow beyond this size.
// Any attempt will result in an OutOfMemoryException.
long heapMaxSize = Runtime.getRuntime().maxMemory();

// Get amount of free memory within the heap in bytes. This size will increase
// after garbage collection and decrease as new objects are created.
long heapFreeSize = Runtime.getRuntime().freeMemory(); 
```

如果您有 50 MB 可用空间且文件为 50 MB，则没有理由尝试加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T20:34:51.810

Java 程序具有它们可以使用的最大内存量。我相信最大大小约为 128MB。

希望这对你有帮助！

# wpf - 在 WPF ContentView 上设置背景颜色

> ID：12334187
> 
> 赞同：0
> 
> 时间：2012-09-08T20:27:07.780
> 
> 标签：wpf, xaml, wpf-controls

似乎在自定义 ContentControl 上设置背景颜色无效。如果我将 ContentControl 更改为 UserControl 背景颜色属性可以正常工作，

是否有解决方法来更改内容控件的背景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:30:11.437

对于自定义控件`Background`需要在 中[绑定](http://msdn.microsoft.com/en-us/library/ms742882.aspx)，[`Template`](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.template.aspx)否则不使用。

# excel - Excel：求和系列函数调用

> ID：12334188
> 
> 赞同：1
> 
> 时间：2012-09-08T20:27:13.840
> 
> 标签：excel, excel-formula

我有以下简单的函数，我需要调用*n*次并对结果求和。

```
10000*((1.01)^n) 
```

我希望调用它 30 次，其中*n*为 1-30，然后对结果求和。如何在 Excel 中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T21:21:07.507

您可以使用以下数组公式。

```
=SUM(1000*((1.01)^ROW(A1:A30))) 
```

将公式粘贴到公式栏中，然后按`Ctrl`+ `Shift`+ `Enter`。输入公式的位置或内容无关紧要`A1:A30`；这`A1:A30`只是让 Excel 遍历公式 30 次的技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-30T00:05:45.320

我知道已经有几年了，但我今天偶然发现了这个，5-29-17。这是正确的公式：sum=10000((1-1.01^31)/(1-1.01)-1)=351327。我在 Excel 中用蛮力验证了这个结果。詹姆斯凯恩

PS：我试图评论以上两个答案，但它不会让我因为我是新来的。第一个答案的问题是拼写错误（应该是 10,000 而不是 1,000）。第二个答案还有一个错字（应该是 10,000 而不是 100,000）和错误的公式。

# iphone - 在 iOS Game Kit 中，receivedata:fromPeer:inSession:context 是委托协议的一部分吗？

> ID：12334194
> 
> 赞同：1
> 
> 时间：2012-09-08T20:27:55.153
> 
> 标签：iphone, objective-c, ios, delegates, gamekit

通常，Xcode 中的自动完成功能会自动完成该类的方法名称，如果该类位于其他对象的委托中，则方法名称如下：

```
@interface ViewController : UIViewController <UIAlertViewDelegate, 
                                              GKPeerPickerControllerDelegate> 
```

但是对于 Game Kit 的方法，要在里面`ViewController.m`：

```
- (void) receiveData:(NSData *)data fromPeer:(NSString *)peer 
           inSession: (GKSession *)session context:(void *)context {
     // ...
} 
```

它似乎不是任何委托方法的一部分，无论是通过 Xcode 的自动完成还是在任何文档中？如果它不是委托的一部分，为什么它与所有其他委托方法的工作方式不同？

* * *

**更新：如果我搜索所有头文件：**

```
grep -r receiveData /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk 
```

包含该行的唯一文件是：

> `/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/GameKit.framework/Headers/GKSession.h:- (void)setDataReceiveHandler:(id)handler withContext:(void *)context; // SEL = -receiveData:fromPeer:inSession:context:`

所以它只出现在评论中......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:37:11.430

`setDataReceiveHandler:withContext:`类中方法的文档`GKSession`说：

> 处理程序必须实现具有以下签名的方法：
> 
> `- (void) receiveData:(NSData *)data fromPeer:(NSString *)peer inSession: (GKSession *)session context:(void *)context;`

这并不能回答您为什么没有像普通委托方法那样实现此方法的问题。我认为这种实现提供了更大的灵活性，因为您可以让一个对象响应`GKSession`管理连接的委托方法，同时指定一个不同的对象在建立连接后处理传入的数据。

无论如何，希望这能回答这个方法在哪里定义的实际问题，这让我摸不着头脑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T16:15:11.610

我怀疑它是不同的，因为 API 可以追溯到 Objective C 的早期版本（最初，协议不是强类型的，并且大多数回调方法都是以这种临时的、非编译器检查的方式定义的）。

大多数（几乎所有）核心 API 都已更新，因此所有协议都是显式的，所有回调都是键入的——我猜他们错过了这个。

# iphone - 在 Objective-C 中使用数组试图简化大量重复代码

> ID：12334199
> 
> 赞同：2
> 
> 时间：2012-09-08T20:28:22.330
> 
> 标签：iphone, objective-c, ios, arrays, fmod

你好 StackOverflow 大师。这是我在这里的第一个问题，所以我很高兴能直接加入。

我试图更好地理解 iOS 数组，但我遇到了障碍。我正在制作一个使用 FMOD 的声音应用程序。我的一切工作正常，但我有 9 个按钮，它们的功能几乎完全相同，只是每个按钮在按下时播放不同的 .wav 文件，然后在释放时停止声音。我想将它放入一个数组中并简化和缩短我的代码，这就是我迷路的地方。我剥离了代码以显示我目前正在做的事情。有任何想法吗？

。H

```
@interface {

FMOD::Sound    *sound1;
FMOD::Sound    *sound2;
FMOD::Sound    *sound3;
FMOD::Sound    *sound4;
FMOD::Sound    *sound5;
FMOD::Sound    *sound6;
FMOD::Sound    *sound7;
FMOD::Sound    *sound8;
FMOD::Sound    *sound9;

}

- (IBAction)playSound1:(id)sender;
- (IBAction)stopSound1:(id)sender;
- (IBAction)playSound2:(id)sender;
- (IBAction)stopSound2:(id)sender;
- (IBAction)playSound3:(id)sender;
- (IBAction)stopSound3:(id)sender;
- (IBAction)playSound4:(id)sender;
- (IBAction)stopSound4:(id)sender;
- (IBAction)playSound5:(id)sender;
- (IBAction)stopSound5:(id)sender;
- (IBAction)playSound6:(id)sender;
- (IBAction)stopSound6:(id)sender;
- (IBAction)playSound7:(id)sender;
- (IBAction)stopSound7:(id)sender;
- (IBAction)playSound8:(id)sender;
- (IBAction)stopSound8:(id)sender;
- (IBAction)playSound9:(id)sender;
- (IBAction)stopSound9:(id)sender; 
```

米。

```
- (void)viewWillAppear:(BOOL)animated {

[[NSString stringWithFormat:@"%@/sound1.wav", [[NSBundle mainBundle] resourcePath]] getCString:buffer maxLength:200 encoding:NSASCIIStringEncoding];
    result = system->createSound(buffer, FMOD_SOFTWARE | FMOD_LOOP_NORMAL, NULL, &sound1);
    ERRCHECK(result);

    [[NSString stringWithFormat:@"%@/sound2.wav", [[NSBundle mainBundle] resourcePath]] getCString:buffer maxLength:200 encoding:NSASCIIStringEncoding];
    result = system->createSound(buffer, FMOD_SOFTWARE | FMOD_LOOP_NORMAL, NULL, &sound2);
    ERRCHECK(result);

    [[NSString stringWithFormat:@"%@/sound3.wav", [[NSBundle mainBundle] resourcePath]] getCString:buffer maxLength:200 encoding:NSASCIIStringEncoding];
    result = system->createSound(buffer, FMOD_SOFTWARE | FMOD_LOOP_NORMAL, NULL, &sound3);
    ERRCHECK(result);

    [[NSString stringWithFormat:@"%@/sound4.wav", [[NSBundle mainBundle] resourcePath]] getCString:buffer maxLength:200 encoding:NSASCIIStringEncoding];
    result = system->createSound(buffer, FMOD_SOFTWARE, NULL, &sound4);
    ERRCHECK(result);
    result = sound4->setMode(FMOD_LOOP_NORMAL);
    ERRCHECK(result);

    [[NSString stringWithFormat:@"%@/sound5.wav", [[NSBundle mainBundle] resourcePath]] getCString:buffer maxLength:200 encoding:NSASCIIStringEncoding];
    result = system->createSound(buffer, FMOD_SOFTWARE | FMOD_LOOP_NORMAL, NULL, &sound5);
    ERRCHECK(result);

    [[NSString stringWithFormat:@"%@/sound6.wav", [[NSBundle mainBundle] resourcePath]] getCString:buffer maxLength:200 encoding:NSASCIIStringEncoding];
    result = system->createSound(buffer, FMOD_SOFTWARE | FMOD_LOOP_NORMAL, NULL, &sound6);
    ERRCHECK(result);

    [[NSString stringWithFormat:@"%@/sound7.wav", [[NSBundle mainBundle] resourcePath]] getCString:buffer maxLength:200 encoding:NSASCIIStringEncoding];
    result = system->createSound(buffer, FMOD_SOFTWARE | FMOD_LOOP_NORMAL, NULL, &sound7);
    ERRCHECK(result);

    [[NSString stringWithFormat:@"%@/sound8.wav", [[NSBundle mainBundle] resourcePath]] getCString:buffer maxLength:200 encoding:NSASCIIStringEncoding];
    result = system->createSound(buffer, FMOD_SOFTWARE | FMOD_LOOP_NORMAL, NULL, &sound8);
    ERRCHECK(result);

    [[NSString stringWithFormat:@"%@/sound9.wav", [[NSBundle mainBundle] resourcePath]] getCString:buffer maxLength:200 encoding:NSASCIIStringEncoding];
    result = system->createSound(buffer, FMOD_SOFTWARE | FMOD_LOOP_NORMAL, NULL, &sound9);
    ERRCHECK(result);

}

- (IBAction)playSound1:(id)sender
{
    FMOD_RESULT result = FMOD_OK;
    result = system->playSound(FMOD_CHANNEL_FREE, sound1, false, &wob01);
    ERRCHECK(result);    
}

- (IBAction)stopSound1:(id)sender
{
    FMOD_RESULT result = FMOD_OK;

    result = wob01->stop();
    ERRCHECK(result);   
}

- (IBAction)playSound2:(id)sender
{
    FMOD_RESULT result = FMOD_OK;

    result = system->playSound(FMOD_CHANNEL_FREE, sound2, false, &wob02);
    ERRCHECK(result);    
}

- (IBAction)stopSound2:(id)sender
{
    FMOD_RESULT result = FMOD_OK;

    result = wob02->stop();
    ERRCHECK(result);   
}

- (IBAction)playSound3:(id)sender
{
    FMOD_RESULT result = FMOD_OK;

    result = system->playSound(FMOD_CHANNEL_FREE, sound3, false, &wob03);
    ERRCHECK(result);    
}

- (IBAction)stopSound3:(id)sender
{
    FMOD_RESULT result = FMOD_OK;

    result = wob03->stop();
    ERRCHECK(result);   
}

- (IBAction)playSound4:(id)sender
{
    FMOD_RESULT result = FMOD_OK;

    result = system->playSound(FMOD_CHANNEL_FREE, sound4, false, &wob04);
    ERRCHECK(result);    
}

- (IBAction)stopSound4:(id)sender
{
    FMOD_RESULT result = FMOD_OK;

    result = wob04->stop();
    ERRCHECK(result);   
}

- (IBAction)playSound5:(id)sender
{
    FMOD_RESULT result = FMOD_OK;

    result = system->playSound(FMOD_CHANNEL_FREE, sound5, false, &wob05);
    ERRCHECK(result);    
}

- (IBAction)stopSound5:(id)sender
{
    FMOD_RESULT result = FMOD_OK;

    result = wob05->stop();
    ERRCHECK(result);   
}

- (IBAction)playSound6:(id)sender
{
    FMOD_RESULT result = FMOD_OK;

    result = system->playSound(FMOD_CHANNEL_FREE, sound6, false, &wob06);
    ERRCHECK(result);    
}

- (IBAction)stopSound6:(id)sender
{
    FMOD_RESULT result = FMOD_OK;

    result = wob06->stop();
    ERRCHECK(result);   
}

- (IBAction)playSound7:(id)sender
{
    FMOD_RESULT result = FMOD_OK;
    result = system->playSound(FMOD_CHANNEL_FREE, sound7, false, &wob07);
    ERRCHECK(result);    
}

- (IBAction)stopSound7:(id)sender
{
    FMOD_RESULT result = FMOD_OK;
    result = wob07->stop();
    ERRCHECK(result);   
}

- (IBAction)playSound8:(id)sender
{
    FMOD_RESULT result = FMOD_OK;
    result = system->playSound(FMOD_CHANNEL_FREE, sound8, false, &wob08);
    ERRCHECK(result);    
}

- (IBAction)stopSound8:(id)sender
{
    FMOD_RESULT result = FMOD_OK;
    result = wob08->stop();
    ERRCHECK(result);   
}

- (IBAction)playSound9:(id)sender
{
    FMOD_RESULT result = FMOD_OK;
    result = system->playSound(FMOD_CHANNEL_FREE, sound9, false, &wob09);
    ERRCHECK(result);    
}

- (IBAction)stopSound9:(id)sender
{
    FMOD_RESULT result = FMOD_OK;
    result = wob09->stop();
    ERRCHECK(result);   
} 
```

如您所见，所有代码都是重复的。这是我能够让它工作的唯一方法，但我知道这些可以放入一个数组中，我就是想不通。可能是一个 NSMutableArray 并列出“sound1”、“sound2”等。然后在界面生成器中为每个按钮分配一个标签？理想情况下，我想要一个用于 stopSound 的函数，一个用于 playSound 等，它使用标签来播放或停止正确的声音文件。使用 FMOD 的 system->createSound() 时，最后一个参数是一个变量，用于存储新创建的声音。有没有办法将其存储在数组或字典中？如果是这样，我无法弄清楚。

任何建议都将不胜感激。我很想不要再为这个简单的问题头疼了。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T21:41:33.107

我会将声音包装成一个子类`NSObject`并使其成为一个独立的单元。一个声音会有像`play`, `stop`, `pause`, 和像`isPlaying`, 这样的访问器这样的操作。

然后为了使其更加通用，我将搜索与该模式匹配的所有文件`"*.wav"`，然后为每个匹配的文件名，`Sound`使用该文件名初始化一个对象，并将其添加到数组中。

这是我想象的 Sound 对象的样子：

```
@interface Sound : NSObject

@property FMOD::Sound *sound;

- (id)initWithSoundFilePath:(NSString *)path;
- (void)play;
- (void)stop;

@end

@implementation Sound

- (void)dealloc {
    // free the memory occupied by the sound pointer here
}

- (id)initWithSoundFilePath:(NSString *)path {
    self = [super init];
    if (self) {
        result = system->createSound(path, FMOD_SOFTWARE | FMOD_LOOP_NORMAL, NULL, &sound);
        ERRCHECK(result);
    }
    return self;
}

- (void)play {
    FMOD_RESULT result = FMOD_OK;
    result = system->playSound(FMOD_CHANNEL_FREE, sound, false, /* What is this wob? */);
    ERRCHECK(result);
}

- (void)stop {
    FMOD_RESULT result = FMOD_OK;
    result = /* What is this wob */->stop();
    ERRCHECK(result);   
}

@end 
```

所以你有它。声音现在被很好地封装了。我发现这个[答案](https://stackoverflow.com/questions/499673/getting-a-list-of-files-in-a-directory-with-a-glob)有助于查找某个目录中符合某些条件的所有文件的列表。您可以在视图控制器中使用它来自动生成所有相关的 Sound 对象并将其添加到数组中。

```
- (NSArray *)getPathsOfSoundFiles {
    NSString *rootPath = [[NSBundle mainBundle] resourcePath];
    NSFileManager *fm = [NSFileManager defaultManager];
    NSArray *files = [fm contentsOfDirectoryAtPath:rootPath error:nil];
    NSPredicate *soundFileFilter = [NSPredicate predicateWithFormat:@"self ENDSWITH '.wav'"];
    NSArray *soundFilePaths = [files filteredArrayUsingPredicate:soundFileFilter];
    return soundFilePaths;
} 
```

好的，现在您可以检索所有 .wav 文件的路径，下一步是在您的`viewWillAppear`或任何最有意义的方法中初始化它们。

```
- (void)viewWillAppear:(BOOL)animated {
    NSArray *paths = [self getPathsOfSoundFiles];
    NSMutableArray *sounds = [NSMutableArray array];
    for (NSString *path in paths) {
        Sound *sound = [[Sound alloc] initWithSoundFilePath:path];
        [sounds addObject:sound];
    }
    self.sounds = sounds;
} 
```

并且通过声音阵列设置，播放和停止给定的声音变得相当容易。使用可以创建一个将索引放入数组的方法，或者可能是一个`Sound`对象本身并完成这项工作。

```
- (void)playSoundAtIndex:(NSUInteger)soundIndex {
    Sound *sound = [self.sounds objectAtIndex:soundIndex];
    [sound play];
}

- (void)stopSoundAtIndex:(NSUInteger)soundIndex {
    Sound *sound = [self.sounds objectAtIndex:soundIndex];
    [sound stop];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T21:43:45.693

您可以大量概括您的代码：

*   使用数组来存储你的声音和“wobs”
*   使用类似的循环`[NSString stringWithFormat:@"%@/sound%i.wav", [[NSBundle mainBundle] resourcePath], index]`
*   只有`-playSound:`一个`-stopStound:`操作使用`sender`'[标签](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/tag)（您可以在 Interface Builder 中设置或在视图控制器的代码中创建按钮时自动化）来确定要播放的声音或停止的 wob。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-08T20:34:27.593

我强烈建议您继承 UIButton 并覆盖触摸方法以在发生这些操作时播放音频文件。当您子类化 UIButton 时，您需要在头文件中设置一个属性，以便您可以传入音频文件或音频文件所在位置的字符串，这样就可以轻松地将其动态化。

然后在主文件中，就像我说的那样，只需覆盖那些触摸方法（touchesBegan、touchesEnded 等）来播放您可以传入我们在头文件中定义的自定义属性。

这就是我至少要解决您的问题的方式，然后您只有一个 UIButton 子类可以根据您传入的音频文件执行完全相同的操作。

# php - PHP 检测和拆分字符串中的 html 特殊字符代码？

> ID：12334200
> 
> 赞同：0
> 
> 时间：2012-09-08T20:28:36.613
> 
> 标签：php, unicode, utf-8, hex, special-characters

在 PHP 中，当我读取数据时，假设数据（字符串块）包含 HTML 特殊字符十进制十六进制代码，例如：
`This is a sample string with &lt; &#x153; &lt; and &#x161;`

我想要的是，**如何检测和拆分**一段字符串中的十进制十六进制代码（任何特殊字符）？

例如，上面的字符串包含：

*   两个计数`&lt;`
*   一个计数`&#x153;`
*   一个计数`&#x161;`

我如何以编程方式检测它（任何 Html 特殊字符的出现）？
*（收集的结果作为数组会更好）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T20:41:53.080

I think this is what you are after:

```
$s = 'This is a sample string with &#x153; and &#x161;';

$pattern = '/\&#x\d+\;/';

preg_match_all($pattern, $s, $matches);   

var_dump( $matches ); 
```

This will output:

```
array(1) {
  [0]=>
  array(2) {
    [0]=>
    string(7) "&#x153;"
    [1]=>
    string(7) "&#x161;"
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T20:39:04.330

您应该使用 preg_match() - [http://www.php.net/manual/en/function.preg-match.php](http://www.php.net/manual/en/function.preg-match.php)与这样的模式 '/&[0-9a-zA-Z]{1,5}; /G'。

[更新]：注意你需要什么实体。这只是`&#x[number][number][number];`或所有可能的 html 实体（如`&nbsp;`等`&lt;`）？

上面我描述了最常见的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T20:42:24.000

You could use substr and strpos to find `&#` and skip to the next `;`:

```
$string = "This is a sample string with &#x153; and &#x161;"
$hexCodes = array();
while (strlen($string) > 0) {
  if (strpos("&#") > 0) {
    $string = substr($string, strpos("&#"));
    $hex = substr($string, 0, strpos(";") + 1);
    $string = substr($string, strpos(";") + 1);
    array_push($hexCodes, $hex);
  } 
  else { break; }
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-08T20:33:05.747

If you mean to decode the entities, use html_entity_decode. Here is an example:

```
<?php
$a = "I'll &quot;walk&quot; the &lt;b&gt;dog&lt;/b&gt;";

$b = html_entity_decode($a);

echo $b; // I'll "walk" the <b>dog</b> now
?> 
```

# build - 在 Windows 中构建 live555 流媒体会生成 .obj 文件，而不是 .a

> ID：12334201
> 
> 赞同：0
> 
> 时间：2012-09-08T20:28:46.673
> 
> 标签：build, makefile, live555

我正在尝试在 windows minGW shell 中使用 mplayer 通过 tcp 流式传输 rtsp 视频，它依赖于 live555 流媒体库。我做的步骤是：

*   下载live555流媒体src
*   在 src/live/ 中构建每个 .mak 文件（我`nmake /f *.mak`通过命令行使用，因为我的 VS2010 无法识别 .mak 文件。）

构建过程是成功的，结果是`.obj`文件。问题是 mplayer 需要`.a`制作文件，而构建没有创建它。

我的问题是：

*   我真的需要 .a 文件吗？如果是这样，我该如何得到它？
*   有没有其他构建方法可以用来解决这个问题？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T19:54:24.987

解决了。

我需要 .a 文件吗？

*   是的，我需要它们。

如何得到它？

*   `./genMakeFiles mingw`从`src/live/`MinGW运行
*   跑`make`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-27T07:27:50.813

运行 ./genMakefiles

运行制作

你可以参考下面的链接

[http://www.live555.com/liveMedia/](http://www.live555.com/liveMedia/)

# apache - 阿帕奇权限

> ID：12334203
> 
> 赞同：2
> 
> 时间：2012-09-08T20:28:53.947
> 
> 标签：apache, file-permissions

我在设置 Apache 服务器（Ubuntu Server 12.04 LTS）上的权限时遇到了一些问题。我将目录移动到我的主目录。我能够授予该目录的 apache 权限。但是，它不适用于子目录。

有没有办法将权限应用于所有子文件夹？

我对 Ubuntu Server 还很陌生，希望能得到帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:38:07.283

chown -R www-data:www-data /home/

[http://en.wikipedia.org/wiki/Chown](http://en.wikipedia.org/wiki/Chown)

你也可以试试@mjgpy3 的建议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T20:33:53.980

我想你想要的是：

```
chmod -R <mode> <root> 
```

这将递归地将权限从 a 更改`<root>`为每个子目录和文件。设置时要非常小心`<mode>`。`<mode>`是一个介于 000 和 777 之间的数字，指定模式，并且`<root>`是您要更改其权限的所有文件/文件夹的父级。

**更新**

如我上面所说，要指定`<mode>`您需要提供一个 3 位数字，每个数字都是 0-7 包括在内。这些数字中的每一个都指定了一个不同的组（如果您愿意的话）。第一个表示当前用户，第二个表示用户组，第三个表示世界其他地方。现在，实际数字本身指定了他们各自的组将被授予哪些特权；这是用二进制完成的。RWE（读、写和执行）是文件的可用权限。

因此，考虑数字 5。

二进制中的 5 是 101，这表示 5 指定 RE，即读，不执行和写。如您所见，1 表示已启用权限，而 0 表示已禁用。

所以，这里有一些常见的用途和它们的含义：

```
chmod 777 file.txt 
```

`file.txt`现在所有可能遇到该文件的人都可以读取、写入和执行。

一个更常用的例子是：

```
chmod 755 file.txt 
```

这表示（因为 7 在二进制中是 111）文件的所有者（可能就是你）可以用它做任何他们想做的事情，IE RWE，IE 读取、写入和执行。那些不是用户的人只能阅读和执行它。

如果我的解释对您没有意义，这里是一个[外部来源。](http://www.pageresource.com/cgirec/chmod.htm)

# macos - 是否可以在文件系统上创建“弱引用”硬链接？

> ID：12334204
> 
> 赞同：2
> 
> 时间：2012-09-08T20:29:00.427
> 
> 标签：macos, reference, filesystems, symlink, hardlink

一些编程语言能够区分强引用对象和弱引用对象，以便在所有强引用消失后，弱引用对象成为垃圾回收的候选对象。

文件系统上的硬链接是否有类似的概念？这是一个理论API：

```
 $ touch A
 $ ln --weak A A_hardlink   # create a 'weakly referenced' hard link
 $ rm A
 $ stat A_hardlink          # no such file or directory 
```

符号链接有点给你这个，除了 A 的符号链接仍然会出现在磁盘上（即使它的基础文件已经消失），而且我想利用直接指向同一个 inode 的优势（用于跟踪移动，重命名主文件等）。是否有任何文件系统实际上支持这个或类似的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T15:06:28.390

否（除非您创建自己的具有此功能的文件系统）。我所知道的所有文件系统中从目录条目到 inode 的所有链接都是强链接。在大多数文件系统中实现弱链接将是一个挑战，因为 inode 不会“记住”指向它的目录条目的位置，但是一旦所有强链接都必须找到它们才能删除它们到inode 都不见了。

# java - 无法使用 System.load(path) 加载 .dll；

> ID：12334214
> 
> 赞同：1
> 
> 时间：2012-09-08T20:30:23.687
> 
> 标签：java, dll

我使用 AspriseOCR 制作了一个 Java OCR 程序。它需要一个名为 AspriseOCR.dll 的 .dll，我将 dll 复制到 C:/Windows/System32/ 但是当我使用

```
System.load("C:/Windows/System32/AspriseOCR.dll"); 
```

我仍然收到 UnsatisfiedLinkError。

在过去的两天里，我一直在寻找解决问题的方法，但找不到任何可行的方法。

* * *

好的大家，现在可以了。原来我还必须制作一个 32 位版本！如果有人需要 Asprise 的 OCR 引擎方面的帮助，请私信我，我会尽力帮助您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T23:18:23.100

要加载库，例如 DLL，您应该使用

```
 System.loadLibrary("libname"); 
```

图书馆`"libname"`的*名字*在哪里。您不包括存储它的文件的扩展名或文件的完整路径。对于您的情况，您可能会致电

```
 System.loadLibrary("AspriseOCR"); 
```

加载您正在使用的库。

因为`loadLibrary`将库名称作为参数而不是文件，所以您必须小心放置 .dll 的位置。通常，您可以将其包含在应用程序的工作目录中，或者包含在诸如 System32 之类的本机文件夹中。如果你必须把它放在别的地方，一定要适当地设置`java.libary.path`. 例如，如果 .dll 在文件夹“libraries”中，您应该使用参数启动 java

```
 -Djava.library.path=libraries 
```

# c - 二进制 int 到二进制 char

> ID：12334215
> 
> 赞同：0
> 
> 时间：2012-09-08T20:30:27.920
> 
> 标签：c

我有两个变量：

```
int binary[8];
char array; 
```

其中二进制变量只有'0s'和'1s'......所以，我想这样做

```
for (i=0;i<8;i++)
    if(binary[i])
        "Here I want put 1 in the position bit of the variable array"
    else
        "Here I want put 0 in the position bit of the variable array" 
```

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:35:27.477

如果我理解正确，这样的事情应该可以工作......

```
int binary[8];
char array = 0;

int n = 8;
while (n) {
  array |= binary[--n];
  array <<= 1;
} 
```

这应该`CHAR_BIT`在至少`8`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T00:39:42.367

```
for (int i = 0; i < 8; i++)
    array |= binary[i] << i; 
```

# algorithm - Othello Evaluation Function

> ID：12334216
> 
> 赞同：6
> 
> 时间：2012-09-08T20:30:33.770
> 
> 标签：algorithm, alpha-beta-pruning, minmax, reversi, othello

I am currently developing a simple AI for Othello using minimax and alpha-beta pruning.

My question is related to the evaluation function for the state of the board.

I am currently looking to evaluate it by looking at:

1.  Disc count (parity)

2.  Number of legal moves

3.  Importance of particular positions

So lets say the root node is the initial game state. The first action is the the AI's action while the second action is the opponent's action.

```
 0    
                  / \           AI's Action
                 1   1
                / \   \         Opponent's action
               2   2   2 
```

At node level 1, do I evaluate the disc count of my AI's chips and the number of legal moves it can make at the point of time after it has completed an action?

At node level 2, do I evaluate the disc count of the opponent's chips and the number of legal moves it can make at the point of time after the opponent has completed an action?

Meaning AI move -> Opponent move ==> At this point of time I evaluate the opponent's disc count and the number of legal the opponent can make.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-09T04:19:49.767

生成游戏树时，不应评估节点**，除非它是叶节点**。也就是说，**您生成一棵树，直到第 N 级**（对应于在棋盘当前状态之前进行 N 次移动的棋盘），除非您已到达对应于游戏结束情况的节点。**只有在这些节点中，您才应该使用评估函数评估棋盘游戏的状态**。**这就是极小极大算法的意义所在**。我知道在每个玩家移动后评估节点的唯一情况是 [迭代加深](http://en.wikipedia.org/wiki/Iterative_deepening_depth-first_search)算法，这似乎你没有使用。

评估功能负责提供对特定位置的“分数”的快速评估——换句话说，哪一方获胜以及获胜多少。它也被称为静态评估函数，因为它只查看特定的板配置。所以是的，当你达到 N 级时，你可以计算计算机和用户可能的移动并减去它们。例如，如果结果为正，则表示计算机具有优势，如果结果为 0，则表示平局，如果结果为负，则表示用户在移动性方面处于劣势。对代表游戏板配置结束的节点进行评分是微不足道的，如果你赢了就分配一个最大值，如果你输了就分配一个最小值。

**移动性**是大多数棋盘游戏（有价值的棋盘游戏）评估功能中要考虑的最重要特征之一。为了评估它，你计算给定静态棋盘配置的每个玩家可能的移动，无论接下来轮到谁。即使一个玩家最近做了一个动作，当同一个玩家做出最后一个动作（因此，在相同的条件下对它们进行评分）时，您也会在树的同一级别 N 中给棋盘打分，并选择那些具有最佳得分。

您在评估中考虑的功能非常好。通常，您想在它们非常有价值的游戏中考虑材料和移动性（您是）（尽管，我不知道材料是否总是在奥赛罗中的优势，您应该更了解它，因为它是您的游戏正在努力）争取获胜的局面，所以我想您走在正确的道路上。

**编辑：**小心！在叶节点中，您唯一要做的就是为板配置分配特定分数。它在**其父节点**中返回该分数并与其他分数（对应于其他子节点）进行比较。为了选择对特定玩家可用的最佳移动，请执行以下操作：如果父节点对应于**对手的移动**，则选择具有最小**（最小）值**的移动。如果**轮到计算机**移动，则选择具有最高**（最大值）值**的分数，以便它代表该玩家可能的最佳移动。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T21:51:03.490

## 结束游戏评价功能

如果您的搜索达到一个完整的棋盘，那么评估应该简单地基于光盘数来确定谁赢了。

## 中局评价功能

合法移动的数量在开局和中期很有用，因为对你来说大量的移动（而对对手来说很少）通常表明你有很多稳定的棋子你的对手无法攻击的好位置，而对手的位置不好，他们可能会用尽所有动作并被迫下一个糟糕的动作（例如让你在角落里玩）。

为此，在计算移动时轮到谁并不重要，所以我认为你走在正确的道路上。

（请注意，在游戏的早期阶段，拥有*较少*棋子的人通常是一个优势，因为这通常意味着您的对手几乎没有安全动作。）

## 随机评价函数

曾几何时，我听说只对奥赛罗评估函数使用随机数（令我惊讶的是）也是一个完全合理的选择。

逻辑是，拥有最多选择的玩家将能够引导游戏获得最高的随机数，因此这种方法再次意味着 AI 将偏爱给它提供很多选择的动作，而他的对手则很少。

# python - Python + Qt -> 2D overlay over other full screen app?

> ID：12334217
> 
> 赞同：2
> 
> 时间：2012-09-08T20:30:57.223
> 
> 标签：python, qt, overlay, fullscreen

**Backgroud:** I play Grand Strategy Games a lot. Part of addcition comes out of AARs (After Action Reports). Stories players write about games. Ofc. that require save games cause "quick" game is longer than 10 hours.

**Problem:** Game do not support automatic save games other than 3 autosaves that get overridden every time. So I want to write app that will use Qt for tracking file changes. Every time game auto saves, this app will rename and move to choosen location savegame. **But since its full screen game, players may forgot to turn on my app I need way to indicate state of my app.**

**Question:** How can I make 2D overlay over portion of full screen 3D app, given that I use Python and Qt?

**Alternative** I do not think that sound warnings would solve my problem, since it would work if someone forgotten to choose save game to track, but it would not work if someone completely forgot to turn on my app. While lack of icon would be enough to inform about such mistake.

But if you can find any other way to indicate that my app is not turned on or configured, post your ideas in answers.

# php - I am really confused and frustrated about my php website and mysql connection

> ID：12334218
> 
> 赞同：-3
> 
> 时间：2012-09-08T20:31:05.287
> 
> 标签：php, mysql, database

So basically I've created a MYSQL database that holds information about a gaming server player information, it's loaded into this PHP website that I created just 2 days ago (I'm completely new to PHP, I only started experimenting on it 2 days ago). So I had it all fixed up but on a localhost, it could fetch the data from the mysql database but only in the localhost, today I wanted to host a free mysql hostname is: fdb3.runhosting.com username: 1141497_damagedz and ofcourse I know the password. But when I'm trying to type this in via my PHP code in the db_connect line it gives me error saying it fails to connect at line 13 which is the line of $db_connect line, before it did work under the localhost but just now it doesnt work because I've deleted 3 files from xampp but surely that shouldnt matter now since its hosted on a whole different place like fdb3.runhosting.com ??

Also I'm using Adobe Dreamweaver to make the PHP website, before I just had to type in

```
http://localhost/tester.php 
```

to open up my tester.php website that I've been working on, but now after I deleted the xampp it wont open this so I can't really tell what I'm doing or does it work or not, this is after I deleted my xampp, which is after I deleted my 3 files from xampp. So you can see i'm really confused and I do not know how to fix this at all, I don't know why db_connect at php gives me errors when clearly my fdb3.runhosting.com mysql database works just fine... I've created tables there too. Also how may I run my tester.php file without the localhost? Please tell me I'm really confused and really need help, thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:37:11.257

> “我已经从 xampp 中删除了 3 个文件，但肯定没关系”

哪 3 个文件，你是如何得出这个结论的？你所说的一切都倾向于表明相反的情况！

重新安装 XAMPP 是合乎逻辑的第一选择。备份您的 htdocs 文件夹，然后重新安装。不知道你是否需要备份（我怀疑不是）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T00:41:08.957

我同意[大卫](https://stackoverflow.com/users/328193/david)。

`fdb3.runhosting.com`在本地计算机上使用 PHP 脚本时，您不太可能使用远程数据库。XAMPP 包含一个 MySQL 数据库服务器，如果您没有删除 phpMyAdmin，您将能够使用它来浏览其上的数据库。

在本地 XAMPP 安装和本地 XAMPP 数据库上开发网站，然后将数据库导出到远程主机，并在准备好在线查看时复制文件。

保留 XAMPP 安装文件夹和其他文件夹也是值得的，因为它包含有关 XAMP 的信息，我相信可以让您检查您正在运行的版本是否是最新版本。

# qt - Qt 设计器中的鼠标悬停

> ID：12334224
> 
> 赞同：0
> 
> 时间：2012-09-08T20:31:54.567
> 
> 标签：qt, qt4, pyqt, qt-designer

我在 Qt Designer 中制作了 gui，然后使用 pyuic4 将其转换为 python。现在我想捕获按钮上的鼠标悬停事件。

```
class window_b(QtGui.QDialog):
    def __init__(self,parent=None):
        super(window_b, self).__init__(parent)
        window_a.setEnabled(False)
        self.ui = Ui_Form_window_b()
        self.ui.setupUi(self)
        self.setFocusPolicy(QtCore.Qt.StrongFocus)
    def mouseMoveEvent (self,event):
        source= self.sender()
        #print source.name()
        # The action I want to do when the mouse is over the button:
        source.setStyleSheet("background-color:#66c0ff;border-radiu‌​s: 5px;") 
```

我将`mouseMoveEvent`方法放在小部件上，我想检测 Dialog 上的哪个按钮发送了 mouseOver 事件。我试过`source.name()`了，但它给了我这个错误

```
print source.name()
AttributeError: 'NoneType' object has no attribute 'name' 
```

任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T23:58:46.827

`sender()`仅对信号有用，但鼠标悬停是事件而不是信号（实际上是 2 个事件：`QEvent.Enter`和`QEvent.Leave`）。

为了能够处理接收它们的按钮之外的事件，您需要将您的`window_b`实例安装为每个按钮的事件过滤器。

```
class window_b(QtGui.QDialog):
    def __init__(self,parent=None):
        super(window_b, self).__init__(parent)
        window_a.setEnabled(False)
        self.ui = Ui_Form_window_b()
        self.ui.setupUi(self)
        self.setFocusPolicy(QtCore.Qt.StrongFocus)

        # Get all the buttons (you probably don't want all of them)
        buttons = self.findChildren(QtGui.QAbstractButton)
        for button in buttons:
            button.installEventFilter(self)

    def eventFilter(self, obj, event):
        if event.type() == QtCore.QEvent.Enter:
            print("mouse entered %s" % obj.objectName())
        elif event.type() == QtCore.QEvent.Leave:
            print("mouse leaved %s" % obj.objectName())    
        return super(window_b, self).eventFilter(obj, event) 
```

如果您只需要更改样式，您可以简单地在样式表中使用伪状态 ":hover"（来自设计器，或在构造函数中使用`self.setStyleSheet`）：

```
QPushButton {
     border: 1px solid black;   
     padding: 5px;
}
QPushButton:hover {   
    border: 1px solid black;
    border-radius: 5px;   
    background-color:#66c0ff;
} 
```

# c# - 在 WinRT 的默认 Web 浏览器中打开 URL

> ID：12334226
> 
> 赞同：15
> 
> 时间：2012-09-08T20:32:13.927
> 
> 标签：c#, .net, vb.net, windows-runtime

这个问题说明了一切。基本上，我只想知道 WinRT 中的替代方案：

```
Process.Start("http://www.google.com/"); 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-08T22:10:00.320

在 WinRT 中，您可以使用`Windows.System.Launcher.LaunchUriAsync`启动与指定 URI 关联的默认应用程序。对于 Web 链接，将使用默认浏览器。

[MSDN：Launcher.LaunchUriAsync(Uri) | launchUriAsync(Uri) 方法](http://msdn.microsoft.com/en-US/library/windows/apps/hh701480)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-04T16:11:18.513

您可以使用`Windows.System.Launcher`启动文件和 URL 的...

*   `Windows.System.Launcher.LaunchUriAsync(Uri)`将使用默认应用程序启动给定的 Uri。如果它是一个链接，它将使用默认的网络浏览器打开。您可以使用`file:///`scheme 打开网络资源，但不能打开本地文件系统上的资源。

*   `Windows.System.Launcher.LaunchFileAsync(IStorageFile)`将为给定文件启动默认应用程序。

这两种方法都有一个可选的第二个类型参数，`Windows.System.LauncherOptions`用于自定义启动。

# java - List lettering and bulleting problems in iText in Java

> ID：12334227
> 
> 赞同：1
> 
> 时间：2012-09-08T20:32:26.777
> 
> 标签：java, list, itext

How come this works:

```
lA = new List(List.ORDERED, List.ALPHABETICAL); 
lA.setLowercase(List.LOWERCASE);
lA.setPostSymbol(") "); 
```

but this doesn't:

```
lQL = new List(List.UNORDERED); 
lQL.setListSymbol("=");
lQL.setPostSymbol("  "); 
```

?

In the first example in front of every item is "a) " or "b) " or "c) " etc... In the second example in front of every item is only "=".

Before any ideas, two things. Firstly, I can't do it this way: `lQL.setListSymbol("= ");`. I could explain it, but just go with it, it's simpler. Secondly, I tried setting second string to "k " (so it's not only spaces), but the output was still "="...

What's happening?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:05:37.553

因为您已明确表明您想要一个*带有*`List.UNORDERED`. 因此，您不会收到任何商品订单，因此不会使用帖子符号。

从以下文档`setPostSymbol`：

> 设置必须在列表符号中**的数字或字母之后添加的字符串。**

并从源代码[`List`](http://www.docjar.com/html/api/com/itextpdf/text/List.java.html)：

```
 137       /**
  138        * In case you are using numbered/lettered lists, this String is added after the number/letter.
  139        * @since   iText 2.1.1
  140        */
  141       protected String postSymbol = ". "; 
```

这个数字或字母只会添加到有序列表中，即`List.ORDERED`. 如果您检查 的构造函数的第一个参数`List`，您会看到它接收一个布尔值来指示列表是否已编号。由于您正在传递它`List.UNORDERED`，其值为`false`，因此您不会获得编号列表，因此`postSymbol`不会被附加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T03:18:16.223

要设置或取消设置数字、字母或项目符号，请使用以下单个代码列表，使用 iText pdf 输出或简单地使用列表。

例如，对于打印账单时通常不需要项目符号、字符串或数字的列表。

```
List list = new List(false, false, 50);
list.setListSymbol(" "); 
```

谢谢你的询问。。

# mysql - 用数据库练习sql查询

> ID：12334232
> 
> 赞同：-1
> 
> 时间：2012-09-08T20:33:07.220
> 
> 标签：mysql, sql-server, oracle11g, teradata

有没有什么网站可以让我通过练习查询来获得好的数据库来解决。我在互联网上看到了很多，但大多看起来像初学者水平。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T20:35:31.963

查看 SQL Zoo：[http ://sqlzoo.net/](http://sqlzoo.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T20:41:35.833

请参阅[http://www.w3schools.com/sql/default.asp](http://www.w3schools.com/sql/default.asp) ...我首先从它开始，然后我用 5 或 6 个表组成了一个数据库，并尝试了自己的子查询等等...

# java - Java验证密码

> ID：12334237
> 
> 赞同：0
> 
> 时间：2012-09-08T20:33:30.537
> 
> 标签：java, security, passwords

> **可能重复：**
> [Java 身份验证安全性](https://stackoverflow.com/questions/12332467/java-authentication-security)

我有一个创建帐户`admin`的应用程序的中心实例。`judge`为了使用此法官帐户，`judge`来自另一台计算机的应用程序实例需要通过中央`admin`. 该应用程序的一个`user`实例会将一些内容发送给`admin`，后者会将其推送给其中一位评委。

评委需要能够登录并通过管理员进行身份验证。主要问题是，由于每个人**都**在同一个网络上并且没有 SSL（我无法控制），因此有人可以嗅探法官发送给管理员的任何内容，然后自己发送该数据并获得法官身份验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T21:38:47.940

显然，使用 SSL 将是正确的方法。

如果这不是一个选项，您可以自己加密请求的内容并确保它只能使用一次。

您需要：

*   生成包含用户名、密码和时间戳/随机值的加密令牌。在 stackoverflow 上有一些关于 crypt/decrypt String 操作的好例子。
*   您的服务器必须确保每个令牌只能使用一次（例如保留地图）
*   令牌在有限的小间隔后过期......

这不会是不可破解的，但会阻止常规嗅探器重用凭据。

# php - 没有条件的 MySQL Join 查询仍然包含不需要的结果

> ID：12334241
> 
> 赞同：0
> 
> 时间：2012-09-08T20:34:12.747
> 
> 标签：php, mysql

所以我有两张桌子。一种是股票信息，一种是用户选择信息。我正在尝试查询我的数据库并从该查询中获得一组结果，其中从股票信息的结果中省略了有关用户选择表的信息。

然而，在尝试推出这个查询并对其进行改进时，我已经将它从一个结果缩减到多个结果，远远超过了现在的正确结果，但它仍然给我相当于只做一个常规的简单选择而没有条件。包括我不想出现的结果。从这个查询中，我应该得到这个测试的所有结果，但只有 2 个结果，但剩下的 2 个仍然显示。我认为我在这个查询上走在了正确的轨道上，但是在某处我遗漏了一些东西。

有人可以向我解释我是怎么做错的吗？

```
select distinct 
stock.teamType, 
stock.teamName, 
stock.leagueType
from teamNames stock
left join teams user on stock.teamName not in (user.teamName)
where user.membID = 20 and stock.leagueType = 'nfl' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:39:33.523

尝试

```
select distinct  stock.teamType,  stock.teamName,  stock.leagueType 
from teamNames stock
left join teams on stock.teamname = teams.teamname
and teams.membid = 20
where teams.teamname is null
and leaguetype = 'nfl' 
```

# c# - linq 上一个 下一个项目？

> ID：12334255
> 
> 赞同：0
> 
> 时间：2012-09-08T20:36:16.143
> 
> 标签：c#, asp.net, linq

我得到最大 id

```
db.info_dbs.Max(u => u.id); 
```

我如何获得上一个 id 和（下一个 id（在上一个之后））

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:56:25.300

这会按 Id 降序对集合进行排序，跳过第一个，然后抓取集合中的下一个。那是你要找的吗？

```
var collection = new[]
                        {
                            new { Id = 1 },
                            new { Id = 3 },
                            new { Id = 2 },
                            new { Id = 5 }
                        };

var secondHighestIdValue = collection.OrderByDescending(x => x.Id).Skip(1).First();

Console.WriteLine(secondHighestIdValue); // { Id = 3 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T20:52:16.930

这个 Id 字段是身份列吗？上一个是 Max(Id) - 1，下一个 Id 是 Max(id) + 1。

但是，使用这样的标识列将是一个坏主意，因为您可以同时在数据库中运行许多事务，并且不能保证您计算的下一个/上一个值在您使用时是正确的他们以后。

如果您还需要什么，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T10:20:43.703

给定一个 ID（在我的情况下是一张图片），这里如何获取下一张图片 id 和上一张图片 id。我使用这两种辅助方法：

```
public int GetPreviousPictureId(int id)
{
    var picture = db.Pictures.Where(x => x.Id < id).OrderByDescending(x => x.Id).FirstOrDefault();

    if (picture != null)
        return picture.Id;

    return 0;
}

public int GetNextPictureId(int id)
{
    var picture = db.Pictures.Where(x => x.Id > id).OrderBy(x => x.Id).FirstOrDefault();

    if (picture != null)
        return picture.Id;

    return 0;
} 
```

为了获得上**一个**，我通过仅获取具有**较低 id的图片来过滤图片，****按 id 降序排列**，以便列表的第一个元素（FirstOrDefault）是我需要的。

为了获得**下一个**，我做相反的事情。我通过仅获取具有**更高 id**的图片来过滤图片，**按 id 升序排列**，以便列表的第一个元素是我需要的。

如您所见，我**检查是否为 null**，如果不为 null，则返回 id。**如果没有找到图片，则返回 0**。如果没有找到，一些开发人员更喜欢返回 -1。由你决定。

DB的第一张图片没有以前的。DB的最后一张图片没有下一张。

希望这会有所帮助（实际上应该回答这个问题）。

# php - PHP：对多数组结果进行排序

> ID：12334256
> 
> 赞同：0
> 
> 时间：2012-09-08T20:36:23.210
> 
> 标签：php, sorting, multidimensional-array

> **可能重复：**
> [如何在 php 中对多维数组进行排序](https://stackoverflow.com/questions/96759/how-do-i-sort-a-multidimensional-array-in-php)

```
Array ( [0] => Array ( 
                    [card_name] => CardA 
                    [str] => 10 
                    [def] => 10 
                    [desc] => - Recover 150 points of vitality 
                              - Attack twice" 
                    [qty] => 5 
                ) 
    [1] => Array ( 
                    [card_name] => CardD 
                    [str] => 40 
                    [def] => 40 
                    [desc] => - Investigate enemy's weakpoint 
                    [qty] => 3 
                ) 
    [2] => Array ( [card_name] => CardG 
                   [str] => 35 
                   [def] => 20 
                   [desc] => 
                   [qty] => 1 
                ) 
    [3] => Array ( 
                   [card_name] => CardH 
                   [str] => 25 
                   [def] => 30 
                   [desc] => 
                   [qty] => 1 
                ) 
    [4] => Array ( 
                   [card_name] => CardI 
                   [str] => 15 
                   [def] => 40 
                   [desc] => - Enhance strength 
                   [qty] => 1 
                ) 
    [5] => Array ( 
                   [card_name] => CardJ 
                   [str] => 5 
                   [def] => 50 
                   [desc] => - Make silence 
                   [qty] => 3 
                   ) 
    ) 
```

我有一个关于排序数组的简单问题。我只想在 asc 或 desc 中按 str 或 def 对数组进行排序。php.net 中的示例有点令人困惑，我想知道是否有人可以解决这个小难题。

我知道我应该为此使用 array_multi_sort。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:49:06.307

尝试 php usort - [http://www.php.net/manual/en/function.usort.php](http://www.php.net/manual/en/function.usort.php)

我没有尝试运行代码，但它会在下面：

```
function cmp($a, $b)
{
   return strcmp($a['def'],$b['def']) 
}

$a = yourArray[];

usort($a, "cmp"); 
```

这将遍历每个元素并将数组元素作为参数传递，并将使用您的自定义函数进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T20:53:26.560

使用排序功能。在您的情况下将是这样的：

```
function compare($valueA, $valueB) {
    if ($valueA['str'] > $valueb['str']) {
        return 1;
    } else if ($valueA['str'] < $valueb['str']) {
        return -1;
    }
    return 0;
}

usort($yourArray, "compare"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T20:53:36.257

[usort()](http://www.php.net/manual/en/function.usort.php)和[strnatcmp()](http://www.php.net/strnatcmp)是您的解决方案：

```
<?php
    function build_sorter($key) {
        return function ($a, $b) use ($key) {
            return strnatcmp($a[$key], $b[$key]);
        };
    }

    usort($array, build_sorter('def'));
    print_r($array);
?> 
```

它将按您定义的键对所有数组进行排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T20:57:36.680

数组多重排序要求您构建一个数组，其中包含要排序的键的值以执行您想要的操作，但与原始数组的第一维键相同。

因此，如果您创建一个包含 0 => 10、1 => 5... 等的数组，其中这些是键 0 和 1 的 str 或 def 的值，那么您可以这样做

```
foreach($originalArray as $key => $record) {
    $keyValuesArray[$key] = $record['str'];
}

array_multisort($keyvaluesArray, SORT_ASC, $originalArray); 
```

并且原始数组将被修改以进行排序。

至于你应该做什么，我不认为数组多排序是这样做的“方式”，但也不是一种糟糕的方式。其他解决方案可能会更有效。

# gwt - GWT：将 CellTable 导出为图像或 pdf 文件

> ID：12334257
> 
> 赞同：1
> 
> 时间：2012-09-08T20:36:29.980
> 
> 标签：gwt, celltable, gwt-celltable

我有一个 CellTable 显示在 GFlot SimplePlot 中绘制的数据。

使用 GFlots 集成功能可以导出绘图：

```
 exportImage = plot.getImage(); 
```

现在我也想导出 CellTable，以在绘图中显示相应的数据。这在客户端的 GWT 是否可能以某种方式实现？它不必是 CellTable 本身，只要它显示的数据就足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T12:04:46.770

我认为您可以使用 flash4j 库：

```
package com.emitrom.flash4j.demo.client;

import com.emitrom.flash4j.clientio.client.ClientIO;
import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.event.dom.client.ClickEvent;
import com.google.gwt.event.dom.client.ClickHandler;
import com.google.gwt.user.client.ui.Button;
import com.google.gwt.user.client.ui.RootPanel;

public class ClientIOExample implements EntryPoint {
@Override
public void onModuleLoad() {
    // initialize the ClientIO module
    ClientIO.init();

    Button b = new Button("Click Me");
    b.addClickHandler(new ClickHandler() {
        @Override
        public void onClick(ClickEvent event) {
            // create a PDF File
            PDF pdf = new PDF();
            pdf.addPage();
            pdf.setTextStyle(new RGBColor(0x000000));
            pdf.setFont(new CoreFont(), 10);
            pdf.addText("");
            ClientIO.saveFile(pdf.save(), "file.pdf");
        }
    });
    RootPanel.get().add(b);
}
} 
```

[您可以通过链接](http://emitrom.com/announcements/flash4j-3.1-ga/)查看更多详细信息

# javascript - 用ajax发送html + JS

> ID：12334259
> 
> 赞同：1
> 
> 时间：2012-09-08T20:37:02.197
> 
> 标签：javascript, jquery

我使用 jQuery load() 方法将另一个 html 发送到我的网页。正在加载的 html 包含 Javascript 生成的 HTML。

我使用这个函数来加载 html：

```
$(document).ready(function(){
    $("img#links").click(function(){
      $("div#content").load("links.html");
    });
  }); 
```

links.html 包含：

```
<h1 id="content">Links</h1>
<br>
<script>add_link("http://google.com");</script> 
```

add_link 函数为我生成了一个表：

```
var add_link = function(link) {
  document.write("<table border=\"0\" width=\"100%\" height=\"50\" id=\"link\">");
  document.write("<tr>");
  document.write("<td width=\"50\"><img src=\"img/star.png\" /></td>");
  document.write("<td><a href=\"" + link + "\"><div class=\"link\">" + link + "</div></a></td></tr></table>");
} 
```

但是，当调用而不是将 js 生成的代码写入网页时，它会被写入一个空白页面，其中仅包含 JS 生成的表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:39:15.767

当您`document.write()`在页面加载完成后调用时——绝对是这里的情况——浏览器将清除原始页面。换句话说，浏览器将页面完成后的调用解释为使用空白页面“重新开始”的隐式请求。

`document.write()`那么，您可以使用 DOM API 将新内容附加到页面，而不是使用。

# java - 无限字符串创建

> ID：12334265
> 
> 赞同：-4
> 
> 时间：2012-09-08T20:37:33.130
> 
> 标签：java, string, infinite

我想为应用程序制作一个“无限”的字符串列表。我试图用这个....

```
public static void runinfinite(int length) {
    String lastString= " ";
    while (true) {
        if (lastString.length() > length)
            break;
        lastString = lastString.trim();
        for (char c0 = 'a'; c0 <= 'z'; c0++) {
            lastString += c0;
            action(lastString);
        }
    }
} 
```

它只给了我这个：`abcdefghijklmnopqrstuvwxyz`。有没有人有一段代码可以使字符串“无限”？

**编辑：**我需要它来制作一个像[这个例子](http://pastebin.com/KVZCcHup)一样的字符串列表：[不需要按照相同的顺序，只是一堆字符串]

**编辑 2：**我想让[这个例子](https://github.com/gravypod/RainbowTabel/blob/master/src/com/gravypod/RainbowTabel/BruteForce.java)更好地工作，并永远运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:44:27.587

如果要制作无限长的字符串，最终会收到 stackoverflow 异常。

同样地：

```
string badString = "";
Random random = new Random();
while(true)
{
  int asciiNum = random.nextInt(25) + 97;
  badString = badString + Character.toChars(asciiNum);
} 
```

将导致 badString 由无限数量的 a 组成，但程序将由于内存不足错误而崩溃。

请参阅此以获取更多信息：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html#toChars%28int%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html#toChars%28int%29) [http://docs.oracle.com/javase/6/docs/api /java/util/Random.html](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html) - 随机类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T20:47:48.143

如果你想无限运行，那你为什么要打破循环呢？

```
if (lastString.length() > length)
    break; // <--- it stops your "infinite" loop 
```

这条线是什么意思？

```
lastString = lastString.trim(); 
```

它唯一的作用 - 从第一个分配中删除初始空间，因为您从不使用空白字符填充它。您可以轻松地从一开始就使用空字符串。

它在“z”之后停止只是因为您在调用函数时可能传递了一个小于 26 的值作为长度参数。否则它会在下一个'z'之后停止，这会使字符串比你传入的任何数字都长。

upd：您解释说它是最大长度。那么它是如何“无限”的呢？或者你想要一个由字符'a'到'z'组成的“无限”字符串列表？或以下模式的“无限”列表：

```
for length = 10:
list = [
"a",
"ab",
"abc",
...
"abcdefghij", // reached max length
"a",
"ab",
...
] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T20:53:09.037

见[我的评论](https://stackoverflow.com/questions/12334265/infinite-string-creation#comment16556568_12334265)。看来你想要一个[*流*](http://en.wikipedia.org/wiki/Stream_(type_theory))。

这是一个例子......

```
static final Iterable<Character> alphabet() {
  return new Iterable<Character>() {

    private final char[] ALPHA = new char[] {
        'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm',
        'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'
    };

    public final Iterator<Character> iterator() {
      return new Iterator<Character>() {

        private int cursor;

        public boolean hasNext() {
          return true;
        }

        public Character next() {
          char ch = ALPHA[cursor];
          cursor = (cursor + 1) % 26;
          return ch;
        }

        public void remove() {
          throw new UnsupportedOperationException("cannot remove from stream");
        }
      };
    }
  };
} 
```

...加上：

```
for (final char ch : alphabet()) {
  System.out.print(ch);
} 
```

# javascript - jQuery：使用 substr() 执行此操作的替代方法

> ID：12334269
> 
> 赞同：1
> 
> 时间：2012-09-08T20:37:49.257
> 
> 标签：javascript, jquery

我正在进行一个 codecademy 练习，我们正在使用 jQuery/JavaScript 构建一个刽子手游戏。播放器以一串下划线字符 '**' 如果他们猜出单词中的某个字母，则应将相应的下划线替换为该字母。例如，如果单词是“tree”并且玩家猜测“e”，则该函数应返回“* _ee”*

 *我使用 gsub 编写了函数。N 是字符串应该被更改的位置，c 是要在原始字符串的该位置插入的字符。这通过了 codecademy 的测试。

```
function alterAt ( n, c, originalString ) { 
   var k = originalString.gsub(n, c ); 
   return k; 

} 
```

但是，codecademy 告诉我使用函数 substr() 和连接返回一个替换了字母的新字符串。我不知道该怎么做，我什至不确定这是否是更好的方法。使用 gsub 有什么问题？你能帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T20:43:33.470

这是使用的版本`substr()`：

```
function alterAt ( n, c, originalString ) { 
    return(originalString.substr(0, n) + c + originalString.substr(n + 1));
} 
```

工作演示：http: [//jsfiddle.net/jfriend00/YX94Q/](http://jsfiddle.net/jfriend00/YX94Q/)

如果在你的刽子手游戏的上下文中，你有两个字符串，一个是原始字符串，一个是下划线加上猜测的字母，并且你想对下划线应用猜测，你可以这样做：

```
function alterAt ( n, c, originalString ) { 
    return(originalString.substr(0, n) + c + originalString.substr(n + 1));
}

function replaceMatchingUnderscores(guessChar, displayStr, original) {
    var index = 0;
    while ((index = original.indexOf(guessChar, index)) !== -1) {
        displayStr = alterAt(index, guessChar, displayStr);
        index++;
    }
    return(displayStr);
} 
```

工作演示：http: [//jsfiddle.net/jfriend00/EwfxW/](http://jsfiddle.net/jfriend00/EwfxW/)。*

# linux - 是否可以在 sed 地址中进行简单的算术运算？

> ID：12334274
> 
> 赞同：4
> 
> 时间：2012-09-08T20:38:18.197
> 
> 标签：linux, shell, sed

是否可以在 sed 地址中进行简单的算术运算？从[“地址”手册部分](http://www.gnu.org/software/sed/manual/sed.html#Addresses)来看，答案似乎不是。但也许有解决方法？

例如，如何打印文件的倒数第二行？这会很酷，例如：

```
sed -n '$-1 p' file 
```

但它显然不起作用......所以我通常必须进行多次 sed 调用，首先用于识别行，然后使用 shell 进行算术`$((expr))`，最后再次调用 sed。像这样：

```
sed -n "$(($(sed -n '$ =' file)-1)) p" file 
```

是否有一种“更好”、更紧凑、更易读的方法来使用 sed 地址进行算术运算？

在一个严重的拖延时刻，我决定编写一个[小脚本来快速更改 xterm 颜色方案](https://bitbucket.org/mrucci/xterm-colorscheme.sh/src/tip/xterm-colorscheme.sh)。这个想法是你有`.Xresources`一个带有开始标记和结束标记的文件：

```
...
START_MARKER
...
END_MARKER
... 
```

并且您想删除标记之间的所有内容，而不是标记本身。同样，做类似的事情会很棒：

```
sed '/START_MARKER/+1,/END_MARKER/-1 d' file 
```

......但你不能！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T21:41:38.347

你是对的，一个人不能直接在 sed ¹中做数学，甚至是地址。但是你可以使用一些技巧来做你想做的事：

倒数第二行：

```
$ seq 5 | sed -n -e '${ # On the last line
> g # Replace the buffer with the hold space
> p # and print it
> }
> h' # All lines, store the current line in the hold space.
4 
```

之间`START`和`END`：

```
$ cat test.in
1
START
2
3
END
4
$ cat test.in | sed '/^START$/,/^END$/{
> /^START$/d
> /^END$/d
> p
> }
> d'
2
3
$ cat test.in | sed -n -e '/^START$/,/^END$/!d' -e '/^START/d' -e '/^END$/d' -e p
2
3 
```

我正在使用 BSD (mac) `sed`；在 GNU 系统上，您可以在行`;`之间使用而不是换行符。或将其粘贴在脚本中。

1：Sed 是图灵完备的，所以你可以做数学，但它充其量是笨拙的：[http ://rosettacode.org/wiki/A%2BB#sed](http://rosettacode.org/wiki/A%2BB#sed)

[是的，我知道，UUOC；仅用于说明]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T21:13:51.380

删除倒数第二行：

```
sed ':r;$!{N;br};s/\n[^\n]*\(\n[^\n]*\)$/\1/' file 
```

删除标记内的所有内容：

```
sed ':r;$!{N;br};s/START_MARKER.*END_MARKER/START_MARKER\nEND_MARKER/' file 
```

远非优雅，但有点工作。

正如评论中提到的那样，`sed`在线运行。但是，您可以使用命令将另一行读入模式空间`N`。这两行现在都在模式空间中，并用 . 分隔`\n`。`sed`也有执行流控制的手段，即标签和条件/无条件分支。一切都记录在 中`man sed`，[这里](http://www.grymoire.com/Unix/Sed.html)也是完整的示例参考。在上面的代码`r`中是一个标签；`$!{..}`意思是“除了最后一行之外的所有地方，做`..`；`N;br`读取另一行并无条件地`r`再次分支。因此，`:r;$!{N;br}`您将所有输入读入模式空间，然后您将其作为单行操作，`\n`并将输入的行分开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T22:22:19.077

这可能对你有用（GNU sed）；

```
sed '$!N;$s/.*\n//;P;D' file 
```

这很有效，应该很容易理解：

```
sed '/start/,/end/!d;//d' file 
```

这些是您问题的解决方案，但至于算术最好使用 awk 或 perl。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T22:26:44.503

您有一些很好`sed`的建议，这里有一个基于 GNU 的建议`awk`：

```
awk -v RS='START_MARKER|END_MARKER' 'RT == "END_MARKER"' infile 
```

*   `RS='START_MARKER|END_MARKER'`使用标记作为分隔符分割输入。
*   `RT`设置为匹配的分隔符，当它匹配“END”时`{print $0}`执行默认块。

因此，例如，如果您想打印除最后三行之外的所有行，请将 FS 设置为`\n`并应用适当的循环：

```
awk -v RS='START_MARKER|END_MARKER' -v FS='\n' 'RT == "END" { for(i=1; i<NF-3; i++) print $i }' infile 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-08T21:18:55.027

您可以使用简单的方法显示文件的倒数第二行。

```
TOTAL_LENGTH=$(cat file_name | wc -l)
SECOND_LAST_LINE=`expr $TOTAL_LENGTH - 1`
head -$SECOND_LAST_LINE | tail -1 
```

如果要从文件中删除倒数第二行：

```
sed -i "$SECOND_LAST_LINE"d file_name 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-10-23T19:22:45.223

`sed`解决方案＃2中给出了更全面的算术处理方法。此处介绍了使用`sed``sed' 自己的脚本。

由于过度“挥手”的不切实际的评论要求在解决方案＃2中引起的大脑疼痛压力实际上是过多的代码“挥手”，并列，这是解决方案＃3：

```
echo -e 'a\nb\nc\nd\ne' | sed -n '1!G;h;$p' | sed -n 3p 
```

它仍然使用管道（“但也许有一种解决方法？”），其中数字 3 必须从文件 ala 的末尾“手动”替换为所需的行`$-3`。

假设`sed`脚本是 `'$-4 p; $-6p; $-8 p;'`

```
echo -e 'a\nb\nc\nd\ne\nf\ng\nh\ni'  | 
sed  -n '1!G;h;$p'                   | 
sed  -n '4 p; 6p; 8 p;'              | 
sed  -n '1!G;h;$p' 
```

通过做这项工作

```
echo  '$-4 p;  $-6p;  $-8 p;'  |   sed s/$-// 
```

警告：
命令`sed`必须像`p`rint 一样简单。
“简单算术”只能是 '$-n' 的形式。
算术不是“正常”计算的。

一个“单个”“sed”命令字符串（如果之前的管道被视为这样，则为“行”）将嵌入并组合这两个命令，如下一个答案 #2 中所述。

* * *

致命一击。

鉴于这里第一个答案的敷衍解雇是＃2：

由于这只是第二次或第三次编写大量`sed`脚本，严重的语法微妙（s）规避破坏解决方案似乎就足够了：ala

```
# file prep 
echo -e '  a\n  b\n  c\n  d\n  e\n  f' >test 
```

下面的删除线不是不正确的，但是在播放和“搞砸”`sed` [这里的 SO 问题之后，](https://stackoverflow.com/questions/34560734/count-total-number-of-pattern-between-two-pattern-using-sed-if-possible-in-lin/69774849#69774849)如果从模式缓冲区运行以通过以下方式获取文件长度行数，则`sed` `e`xecute 可以更简单，无需 IO 重定向`$`：

```
sed  -e  '1{h; s/.*/sed -n  "$="  test  /e' -e 'p;x}; ${p;x;}' test 
```

枚举从一`$=`开始就保存在保持缓冲区中，并在最后再次打印。

 ~~```
# get "sed -n  $= test" command output into sed script
sed -n '1esed -n  "$=" test >sedr' test

# see where this is headed? so far "sed -n ... test" is irrelevant
# a pedantic "sed" only solution would keep it this way with
# all the required "sed"'ng as part of an 'e' command or '$e'
# where the 'sedr' file is itself "sed"'d ultimately to a final
# command 'sed -n /<the calculated line number>/p' 

# one could quibble whether '>sedr' io redirection is "pure sed" 

# modify 'sedr'with [the sed RPN][1] to get <the calculated line number> 
```~~ 

```
# with judicious use of "sed"'s 'r' command and buffering will
# realize the effective script to compute the desired result

# this is left as an exercise needing perverse persistence with
# a certain amount of masochistic agony 
```

作为如何进行的提示；使用解决方案#3 的技术，`sed`脚本`$-`地址现在被替换为`$=`值 and `-`。所以`sed`又被用来编辑自己的脚本。

解析`sed`脚本必须准确地*只*修改`$-`in 地址。

此外，要使用 RPN 计算器，中缀算术必须具有后置固定运算符。在自动机和形式语言理论中，将波兰表示法或其反转转换为中缀是一种传统范式，反之亦然。

希望这可以确定可以做到的肯定答案（mais，pas par moi）和否定的答案，即它*不是*微不足道的练习（c'est par moi）。

*任意*解决方案的令人痛苦的理由在最后。

用于经验测试的环境：

```
linuxuser@ubuntu:~$ sed --version
sed (GNU sed) 4.4
Copyright (C) 2017 Free Software Foundation, Inc.

linuxuser@ubuntu:~$  uname -a
Linux ubuntu 4.15.0-74-generic #84-Ubuntu SMP Thu Dec 19 08:06:00 UTC 2019 i686 i686 i686 GNU/Linux

linuxuser@ubuntu:~$ lsbname -a
lsbname: command not found
linuxuser@ubuntu:~$ apropos lsb
lsb_release (1)      - print distribution-specific information
lsblk (8)            - list block devices
linuxuser@ubuntu:~$ lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 18.04.2 LTS
Release:    18.04
Codename:   bionic 
```

* * *

解决方案#1

一种在盒子外面思考的技术：

```
seq 60  |  sed -n '$!p'  |  sed -n '$!p'  |  sed -n '$!p' |  sed -n '$p' 
```

打印：

```
57 
```

具体来说，对于倒数第二行：

```
sed -n '$!p' file  |  sed -n '$p' 
```

更一般地说，脚本可以迭代`sed -n '$!p'`以从文件末尾“倒数”。

* * *

好吧，答案是：

> 是否可以在 sed 地址中进行简单的算术运算？

从修辞上讲，它取决于一个人的能力、愿望和愿望以及对实用性的现实评估。同样，这意味着单个`sed`调用应该专门用于此任务。但是，是的，这是可能的。

在自动机、形式语言和递归函数理论的研究中打下坚实的基础并没有什么坏处。

如前面的答案所述：不仅可以`sed`做简单的算术，还可以做任何包括复杂算术的可计算函数。然而，要做到这一点需要实现`sed`递归函数理论（RFT）的原始递归函数（PRF）（当然可以）。当然，机器架构的有限大小确实限制了没有无限磁带资源的计算，正如图灵机所证明的那样。在任何不希望证明这一点的情况下，可以在`sed`手册中找到先例。

具体来说，做算术（有限）RPN计算器：
[https ://www.gnu.org/software/sed/manual/html_node/Increment-a-number.html#FOOT9](https://www.gnu.org/software/sed/manual/html_node/Increment-a-number.html#FOOT9)

现在，使用这样的工具可以创建一个`sed`脚本，预先计算算术，然后嵌入到`sed`脚本中以打印所需的输出。OP 给出了一个简单的演示，指出现在可以使用 RPN`sed`脚本完成 shell 算术计算。

这简化为一种形式，例如（非常粗略）

```
sed '/$(sed RPN($= - 3*4) file)/;p;' file 
```

但仍然需要提供`sed`一个`sed`'d 脚本。此外，可以说是对使用的`bash $()`争论不休，但可以说它`bash`已经被用来执行第一个“sed”，所以没有伤害就没有犯规。

认识到`sed`实现 PRF 或等效地是图灵完备意味着是的，单次调用`sed`就足够了。

因此，范式可以做到这一点。

可以加快此任务的一些命令是：

```
e, e command, r, R, w, W 
```

除了通常的保持和模式缓冲区命令。

这些`r, R, w, W`命令作为临时缓冲空间特别有利。

```
e [command]  [3.7 Commands Specific to GNU sed][2]

This command allows one to pipe input from a shell command into
pattern space. Without parameters, the e command executes the 
command that is found in pattern space ... 
```

更抽象地说，尽管*非常*不切实际，但完全有可能编写一个`sed`脚本来执行`sed`范式本身，即使在地址中也包括算术计算。

* * *

一个`sed`特点。表达式`/\n/`不会匹配任何地址，并且仅当`sed`像 'N'ext 或 s/.*/\n/ 这样的命令引入一个时，才会匹配模式空间中的地址。通过以下方式确认：

```
echo -e '\n\n'  | sed -n '   /\n/    {s//hello/;p}' 
```

*但*

```
echo -e '\n\n'  | sed -n '0,/\n\n\n/ {s//hello/;p}' 
```

输出***3 个***空行和

```
echo -e '\n\n'  | sed -n '0,/\n/     {s/.*/hello/;p}'
echo -e '\n\n'  | sed -n '0,/\n\n\n/ {s/.*/hello/;p}' 
```

每个输出***3*** hello's

```
hello
hello
hello 
```

虽然**这是**乖巧的：

```
echo -e '\n\n'  | sed -n '0,/^$/     {s//hello/;p}' 
```

* * *

# android - Application.onConfigurationChanged 的 使用

> ID：12334275
> 
> 赞同：8
> 
> 时间：2012-09-08T20:38:19.217
> 
> 标签：android

编辑：我知道如何处理配置更改；此查询正在为此任务使用“应用程序”类。

我可以看到许多将 Application 类用作“全局”来维护状态变量的示例。但我很好奇知道我一直认为与单个活动生命周期相关的方法的使用......比如 onConfigurationChanged() 和 registerComponentCallbacks()。

我找不到任何有关如何使用这些方法的示例。我要求一些用例/模式覆盖这些方法会有所帮助。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-18T04:51:30.007

官方文档说：

> 与活动不同，当配置更改时，其他组件永远不会重新启动：它们必须始终处理更改的结果，例如重新检索资源。
> 
> 在调用此函数时，您的 Resources 对象将更新为返回与新配置匹配的资源值。

就像您说的那样，如果您维护“全局”状态变量，您可能需要知道某些配置是否已更改，这可能会影响您的所有应用程序，可能不是方向或键盘隐藏更改，而是一些更“全局”的配置，例如语言环境更改。您可以在此处查看完整列表（[https://developer.android.com/guide/topics/manifest/activity-element.html#config](https://developer.android.com/guide/topics/manifest/activity-element.html#config)）

[https://developer.android.com/reference/android/app/Application.html#onConfigurationChanged(android.content.res.Configuration)](https://developer.android.com/reference/android/app/Application.html#onConfigurationChanged(android.content.res.Configuration))

# android - 在 onRestoreInstanceState 中反序列化时出现奇怪的 ClassCastException

> ID：12334277
> 
> 赞同：5
> 
> 时间：2012-09-08T20:38:40.183
> 
> 标签：android

在`onSaveInstanceState()`：

```
// departures is instance of Departures which extends ArrayList
bundle.putSerializable("departures", departures); 
```

在`onRestoreInstanceState`：

```
departures = (Departures) state.getSerializable("departures"); 
```

当我旋转屏幕时，Activity 会重新启动并恢复其状态。它工作正常。如果我离开 Activity，一段时间后，Android 会将其从内存中删除并保存其状态。当我返回它时，它会崩溃`onRestoreInstanceState`：

```
java.lang.ClassCastException: java.util.ArrayList cannot be cast to cz.fhejl.pubtran.Departures 
```

现在`getSerializable`回来了`ArrayList`，没有`Departures`。

编辑：这是 Departures.java 的外观： http: [//pastebin.com/qc3QfrK7](http://pastebin.com/qc3QfrK7)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T22:46:01.193

您看到的问题是由 Android 扁平化对象的方式引起的。在内部，它将调用[`Parcel#writeValue(Object)`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/os/Parcel.java#Parcel.writeValue%28java.lang.Object%29)具有长链 if/else 和`if (o instanceof List)`before `instanceof Serializable`。因为`Departures`is a`List`它会将其作为一个列表而不是在解包数据时它不知道它是一种特殊类型的列表。

您需要使用不扩展 a 的东西`List`来解决该问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T15:48:09.493

我知道我在这个方面有点晚了，但我遇到了一个与一系列可序列化数组类似的问题。

我通过将数组包装在我自己的私有类中来使其工作。

```
private class ArrayHolder implements Serializable{
  public Serializable[] _myArray;
  public ArrayHolder(Serializable myArray){
    _myArray = myArray;
  }
} 
```

然后为了拯救我所做的一切就是

```
bundle.putSerializable("name",new ArrayHolder(arrayToBeSaved)); 
```

反序列化时：

```
ArrayHolder arrayHolder = (ArrayHolder) bundle.getSerializable("name");
arrayRecovered = arrayHolder._myArray; 
```

我不知道为什么它有效，但它确实有效。

# java - RESTEasy、JAX-RS 只是开发 RESTful Web 服务的工具吗？

> ID：12334284
> 
> 赞同：2
> 
> 时间：2012-09-08T20:39:25.580
> 
> 标签：java, web-services, rest, web-applications

我正在学习 RESTful Web 服务，我的脑子里乱七八糟的术语。有人可以简要提供以下技术之间的区别。

1.  高枕无忧
2.  JAX-RS 和 JAX-WS
3.  球衣
4.  雷斯特莱特
5.  JAXB

如果我想开发一个 RESTful Web 服务并让该 Web 服务被 Android 应用程序使用，我应该使用上述哪些技术？我不想使用 SOAP...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T10:24:01.757

> 有人可以简要区分以下技术吗？

**JAX-WS ( [JSR-224](http://jcp.org/en/jsr/detail?id=224) )**

这是不同于 RESTful Web 服务的 SOAP Web 服务的 Java 标准。该标准有多种实现方式。

**JAX-RS ( [JSR-311](http://jcp.org/en/jsr/detail?id=311) )**

这是 RESTful Web 服务的 Java 标准。该标准有多种实现方式，包括：

*   泽西岛 ( [http://jersey.java.net](http://jersey.java.net) )
*   带有 JAX-RS 扩展的 Restlet (http://wiki.restlet.org/docs_1.1/13-restlet/28-restlet/57-restlet.html)
*   RESTEasy ( [https://www.jboss.org/resteasy/](https://www.jboss.org/resteasy/) )

**JAXB ( [JSR-222](http://jcp.org/en/jsr/detail?id=222) )**

这是用于将对象与 XML 相互转换的 Java 标准。当 JAX-RS 服务返回需要与 XML 相互转换的 Java 对象时，所有 JAX-RS 实现都会利用 JAXB 实现。有些人甚至在与 JSON 相互转换时利用它。该标准有多种实现方式。

*   项目 JAXB ( [http://jaxb.java.net](http://jaxb.java.net) )
*   EclipseLink JAXB (MOXy) ( [http://www.eclipse.org/eclipselink/moxy.php](http://www.eclipse.org/eclipselink/moxy.php) )

* * *

> 如果我想开发一个 RESTful Web 服务并让该 Web 服务被 Android 应用程序使用，我应该使用上述哪些技术？

任何符合 Java EE 6 的应用程序服务器都将包含创建 RESTful Web 服务所需的所有组件，Android 应用程序可以轻松使用该服务。以下是我写的一系列文章，应该会有所帮助：

*   [第 1 部分 - 数据库](http://bdoughan.blogspot.com/2010/08/creating-restful-web-service-part-15.html)
*   [第 2 部分 - JPA 实体](http://bdoughan.blogspot.com/2010/08/creating-restful-web-service-part-25.html)
*   [第 3 部分 - JAXB 绑定](http://bdoughan.blogspot.com/2010/08/creating-restful-web-service-part-35.html)
*   [第 4 部分 - RESTFul 服务](http://bdoughan.blogspot.com/2010/08/creating-restful-web-service-part-45.html)
*   [第 5 部分 - 客户](http://bdoughan.blogspot.com/2010/08/creating-restful-web-service-part-55.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-22T19:25:56.030

JAX-RS 主要用于 Web 服务，但您可以根据需要将其用作 servlet。

我使用 Jersey 和 Freemarker 来开发前端网站，它运行良好。

我见过一些使用 Jersey 作为后端 Web 服务和使用主干.js 来开发前端网站的项目。

# javascript - How can I include a javascript file from inside my Bundle into a twig file?

> ID：12334287
> 
> 赞同：2
> 
> 时间：2012-09-08T20:39:53.960
> 
> 标签：javascript, symfony, twig

How can I include a javascript file from my Bundle CompetitiongameBundle, in a twig file ? What does the asset function mean ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T20:50:11.750

你不信任[symfony 文档](http://symfony.com/doc/current/book/templating.html#linking-to-assets)吗？

> 您还可以包含位于捆绑包的 Resources/public 文件夹中的资产。您需要运行 php app/console assets:install target [--symlink] 命令，它将文件移动（或符号链接）到正确的位置。（目标默认为“web”）。

```
<link href="{{ asset('bundles/acmedemo/css/contact.css') }}" type="text/css" rel="stylesheet" /> 
```

我不建议您链接捆绑中的单个资源 - 为此使用[Assetic](http://symfony.com/doc/2.0/cookbook/assetic/asset_management.html)，可能会缩小它们。

# javascript - 尝试使用 Javascript 正则表达式来获取“&”分隔文本的一部分，无论它是否是最后一个值

> ID：12334288
> 
> 赞同：1
> 
> 时间：2012-09-08T20:40:06.540
> 
> 标签：javascript, regex

我的文字看起来与此类似：

```
action=addItem&siteId=4&lang_locale=en_US&country=US&catalogId=1&productId=417689&displaySize=7&skuSize=2194171&qty=1&pil=7&psh=had+AIRJRnjbp7+rGivIKg00 
```

我想替换'psh'的值。它有时可能不是最后一个值（它可能后跟`&something=else`）。

我试过做这些代码行：

1.  `var text = text.replace(/&psh=.*(?=&|$)/, "&psh=" + data.psh);`
2.  `var text = text.replace(/&psh=.*(?=[&|$]+)/, "&psh=" + data.psh);`
3.  `var text = text.replace(/(?:&psh=)(.*)(?=[&|$]+)/, data.psh);`

它们都不适用于这两种情况。使用[此站点](http://regexpal.com/)检查正则表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T20:42:39.833

这应该有效：

```
var text = text.replace(/&psh=[^&]*/, "&psh=" + data.psh); 
```

`[^&]*`匹配由除 之外的任何字符组成的任意长度的字符串`&`，因此匹配将持续到字符串末尾或直到（但不包括）下一个`&`，以先到者为准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T22:27:37.563

蒂姆的答案可能有效，但我担心这不是最好的答案。您作为示例提供的字符串看起来很像 url。如果是，这意味着有时也可能有一个井号 (#)。为了弥补这一点，您实际上需要将代码修改为如下所示：

```
var text = text.replace(/&psh=[^&#]*/, "&psh=" + data.psh); 
```

注意添加的 # 是为了不被 url 中的锚标签绊倒。

# memory - 使用顺序分配时两个堆栈如何共享一段内存

> ID：12334293
> 
> 赞同：1
> 
> 时间：2012-09-08T20:40:59.623
> 
> 标签：memory, memory-management, data-structures

这个话题在我的CS数据结构课中提到过，但我没有退出。所以想知道是否有人可以花一点时间向我解释这将如何与内存中的顺序分配一起工作。

图表或一些可以帮助我理解它的插图将非常有帮助。
另外我想知道这是否会发生在两个队列中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:45:31.440

硬件调用堆栈总是以相同的方向增长，但您可以有两个软件堆栈从分配的两端增长。这看起来微不足道和可爱，所以它可能不是你在说的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T18:33:07.833

我假设这里使用的*顺序分配*意味着一块内存，没有间隙。

一种可能性是这可能类似于双端队列（双端队列），除了这将是一个双端堆栈。因此，例如，您分配了一块具有足够内存用于 N 个元素的顺序内存块，您将有一个指向第一个堆栈的“顶部”的指针，该指针将从第一个元素开始并向右增长。您还将有一个指向第二个堆栈的“顶部”的指针，该指针将从最后一个元素开始并向左增长。如果两个“顶”相互交叉，是时候“增长”记忆了；重新分配并将一个或两个堆栈复制到新位置。因此，每个堆栈都可以增长，直到它们的大小加起来超过 N。

插图（来自[这里](http://www.altdevblogaday.com/2011/02/12/alternatives-to-malloc-and-new/)，一个讨论使用分配器等数据结构的页面）：

![在此处输入图像描述](../Images/472add987f87652c5aa0cb120d84554f.png)

关于队列，是的，您在此块之外创建了两个队列，但它可能会有一个额外的孔/间隙，因为队列的底部可以向上移动（远离末端）。一个可能的解决方案是，与其从前面弹出，不如清空前面的元素，并与后面交换，同时保持指向实际前面和后面的指针。

# ruby-on-rails - Capybara & Rspec：如何删除帐户？

> ID：12334294
> 
> 赞同：3
> 
> 时间：2012-09-08T20:41:00.740
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, capybara, rspec-rails

我正在使用 Devise 并为用户删除自己的帐户的场景编写测试，但我不知道如何调用确认框并单击“确定”。

这是链接和我的测试：

```
<p><%= link_to "Delete my account", registration_path(resource_name), :data => { :confirm => "Are you sure?" }, :method => :delete %></p> 
```

规范/请求/users_spec.rb

```
scenario 'user deletes account' do
   make_user_and_login
   click_link('Account Settings')
   page.should have_selector('title', :text => 'Account Settings')
   click_link('Delete my account')
   # Are You Sure?
   # click OK in confirm box
   # page.should etc.....
end 
```

这将如何完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T21:13:58.777

确保 capybara 使用支持 javascript 的驱动程序。然后试试这个：

```
page.driver.browser.switch_to.alert.accept 
```

或者，取消：

```
page.driver.browser.switch_to.alert.dismiss 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T01:30:39.853

尝试

```
page.evaluate_script('window.confirm = function() { return true; }') 
```

这应该可以工作，然后检查类似的东西

```
page.should have_content "Account deleted" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T14:37:48.273

正如@suweller 所说，我们都在使用`Capybara::RackTest`默认驱动程序。但是，在没有更改任何设置并添加`:js => true`我的 rspec 测试的情况下，我让它们通过了，而在我遇到与您相同的错误之前。

这让我`page.driver.browser.switch_to.alert.accept`至少可以使用。

# image - 将图像放置在标签的中心

> ID：12334306
> 
> 赞同：0
> 
> 时间：2012-09-08T20:42:42.223
> 
> 标签：image, css, hyperlink, centering

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:47:21.467

也许添加`display: block;`到两者`a`，`img`然后添加`margin: 0px auto;`到您的`img`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T20:49:13.123

首先，您需要使用 将 转换`<a>`为块元素`display:block`。

Second, I would set your thumbnail as a background image instead and use `background-position: center center` which would cente rit vertically and horizontally

```
<a href="#" class="thumb" 
  style="background-image: url('@Url.Content( Path.Combine( "~/Uploads/Products/", @item.ImagePath ) )')">&nbsp;</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T21:11:56.430

There are differences between HTML 4.01 and HTML5 in the tag. The layout attributes: align, border, hspace, and vspace were **deprecated** in HTML 4.01, and are not supported in HTML5! You have to wrap your tag in an other one and make your CSS do the align like this exemple:

```
<!DOCTYPE html>
<html>
<body>
  <article style="text-align:center">
    <img src="img/test.png" alt="test" />
  </article>
</body>
</html> 
```

# android - Is there any way I can add an image next to each item on a list without using a custom adapter?

> ID：12334307
> 
> 赞同：0
> 
> 时间：2012-09-08T20:42:41.300
> 
> 标签：android, listview

I need to put small icons on the right of each list item. I know it can be done with a custom list but it will mean rewiring a lot of code. if there a way to do it without using a custom adapter?

```
mList = (ListView) findViewById(R.id.sidebar_list);
        mList.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_multiple_choice, mStrings));
        mList.setChoiceMode(AbsListView.CHOICE_MODE_MULTIPLE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:49:37.820

不，在自定义适配器内覆盖`getView`是为列表行动态设置不同图像的唯一方法。但是，如果您想为所有行项目设置静态（相同）图像，那么您可以为行定义自定义资源 xml（其中包含一个`TextView`和`ImageView`或 comppund drawable-TextView）并在初始化时将其传递给您的默认适配器.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T20:53:03.057

是的，您可以使用[SimpleAdapter](http://developer.android.com/reference/android/widget/SimpleAdapter.html)和带有 ImageView 的自定义布局。

* * *

简单的例子：

```
List<Map<String, String>> list = new ArrayList<Map<String, String>>();
Map<String, String> map = new HashMap<String, String>();
map.put("text", "one");
map.put("image", String.valueOf(getResources().getIdentifier("ic_launcher", "drawable", getPackageName())));
list.add(map);

ListView listView = (ListView) findViewById(R.id.list);
listView.setAdapter(new SimpleAdapter(this, list, R.layout.list_item, new String[] {"text", "image"}, new int[] {R.id.text, R.id.image})); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T20:53:28.600

您将需要为视图创建 XML 布局（如果您没有）并添加一个 imageview。你应该给它和ID（'缩略图'）。接下来你只需通过适配器的位置向适配器询问某个视图

```
View singleView = listView.getChildAt(wantedChild);
ImageView thumbnail = (ImageView) singleView.findViewById(R.id.thumbnail);
thumbnail.setImageBitmap(bitmap); 
```

# javascript - jquery Slidebar在IE中不起作用

> ID：12334309
> 
> 赞同：0
> 
> 时间：2012-09-08T20:42:51.283
> 
> 标签：javascript, jquery, html, css, internet-explorer

谁能向我解释一下，为什么这在 IE 中不起作用？它完美地淡入其他浏览器中的每个图像，但是在 IE 中执行时，它只显示最后一个图像（图像 5）并保持这种状态。也许想出一个可能的解决方案？我对 jquery JS 很陌生：

```
var rotationTime = 3000;
var fadeTimer = 500;
var zStart = 25;

var totalBanners;
var currentImage = 1;

$(document).ready(function(){
    totalBanners = $('#fade-slider > div').length;
    for(i=1;i<=totalBanners;i++){
        $('#img-' + i).css('z-index', '' + (zStart-i) + '');
    }
    $(document).everyTime(rotationTime,  'imagefader', function(){          
        if(currentImage < totalBanners){
            $('#img-' + currentImage).animate({opacity: 0}, fadeTimer);
            currentImage += 1;
        }
        else{
            currentImage = 1;
            $('#img-' + currentImage).animate({opacity: 1}, fadeTimer, 'linear', function(){
                for(i=1;i<=totalBanners;i++){
                    $('#img-' + i).animate({opacity: 1}, 0);
                }
            });         
        }       
    }, 0);
}); 
```

CSS：

```
@charset "UTF-8";
    #fade-slider {
      width:570px;
      height:207px;
      overflow:hidden;
      margin:0px;
      padding:0px;
      position:relative;
    }

    .position-zero {
        position:absolute;
        top:0px;
        left:0px;
    } 
```

HTML：

```
<div id="fade-slider">
                        <div id="img-1" class="position-zero"><a href="#"><img src="images/slider/image-1.jpg" alt="Image1" /></a></div>
                        <div id="img-2" class="position-zero"><a href="#"><img src="images/slider/image-2.jpg" alt="Image2" /></a></div>  
                        <div id="img-3" class="position-zero"><a href="#"><img src="images/slider/image-3.jpg" alt="Image3" /></a></div>    
                        <div id="img-4" class="position-zero"><a href="#"><img src="images/slider/image-4.jpg" alt="Image4" /></a></div>     
                        <div id="img-5" class="position-zero"><a href="#"><img src="images/slider/image-5.jpg" alt="Image5" /></a></div>       
                    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:53:40.567

我相信你在谈论 IE8 - 当提到 IE 时......

```
opacity 
```

在 IE8 中不能正常工作，试试这样的

```
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)"; 
```

最后一部分 'Opacity=50' 将等于`opacity: .5`相应调整

对于 IE5- IE7 试试这个

```
filter: alpha(opacity=50); 
```

# wordpress - issues with Mod Rewrite with folders inside wordpress page

> ID：12334311
> 
> 赞同：1
> 
> 时间：2012-09-08T20:43:04.220
> 
> 标签：wordpress, .htaccess, mod-rewrite, url-rewriting, slim

I'm working on a client app and im using the Slim framework. the root of the site is a wordpress page

and my app stuff is under [http://example.com/yumninja_app_1_0/api/](http://example.com/yumninja_app_1_0/api/)

when you go to the url, it returns a 404, but the 404 is from the wordpress page.

the htaccess file on the root is:

```
<IfModule mod_rewrite.c>
RewriteEngine On
 RewriteBase /
 RewriteRule ^index\.php$ - [L]
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule . /index.php [L]
 </IfModule> 
```

and the htaccess inside my folder (yumninja_app_1_0/api/) is

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php [QSA,L] 
```

My question is how to exclude a folder from mod_rewrite?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T21:41:40.347

在 RewriteRule 之前添加这一行

```
RewriteCond %{REQUEST_URI} !^/(yumninja_app_1_0|yumninja_app_1_0/.*)$ 
```

# java - Read data in from text file, convert each word to PigLatin

> ID：12334312
> 
> 赞同：2
> 
> 时间：2012-09-08T20:43:10.333
> 
> 标签：java

I'm having trouble printing out the final result without each word being on its own line. The output should be formatted just as the input was. Here is the code I used to read the data and print it:

```
 Scanner sc2 = null;
        try {
            sc2 = new Scanner(new File(dataFile));
        } catch (FileNotFoundException e) {
            e.printStackTrace();  
        }
        while (sc2.hasNextLine()) {
                Scanner s2 = new Scanner(sc2.nextLine());
            boolean b;
            while (b = s2.hasNext()) {
                String s = s2.next();
                System.out.println(pig(s));
            }
        } 
```

The actual instructions were as follows: "Translate the Declaration of Independence ("declaration.txt") into PigLatin. Try to preserve the paragraphs. There are several ways to do this, but they all use nested loops. You may want to look at nextLine, next, split, or StringTokenizer."

We haven't been taught how to use any of the methods listed there, though.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:52:22.093

该[`println`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#println%28java.lang.String%29)方法是“打印线”的简称。它将给定的输出打印到目标输出设备*，后跟换行符。*查看该类中的其他方法以获取解决方案。

**更新**

这里的问题是，据我所知[`java.util.Scanner`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)，单词之间的空格（分隔符）会被丢弃。查看[`java.util.StringTokenizer`](http://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html)可以配置为一次返回一个空白字符的类似类。

# windows-8 - Is there String.Normalize() alternative in WinRT?

> ID：12334314
> 
> 赞同：3
> 
> 时间：2012-09-08T20:43:34.327
> 
> 标签：windows-8, windows-runtime

Is there any alternative to string.Normalize() in WinRT? I want to simply remove accents from input strings using [this approach](https://stackoverflow.com/questions/4046937/removing-diacritics-in-silverlight-string-normalize-issue), but I cannot find anywhere this method in WinRT.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T11:05:21.203

我在[这里](https://stackoverflow.com/questions/249087/how-do-i-remove-diacritics-accents-from-a-string-in-net)发现了快速而简短的解决方案，它在 WinRT 中运行良好：

```
public static string RemoveAccents(this string accentedStr)
{
    byte[] tempBytes = Encoding.GetEncoding("ISO-8859-8").GetBytes(accentedStr);
    return Encoding.UTF8.GetString(tempBytes, 0, tempBytes.Length);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T01:13:42.123

在 WinRT 中找不到 String.Normalize 的任何替代方法，因为它作为 Metro 风格应用程序可用的 .NET Core Profile 的一部分提供。 [文档](http://msdn.microsoft.com/en-us/library/windows/apps/8eaxk1x2.aspx)。如果您使用的是 C++，[请参阅此问题](https://stackoverflow.com/questions/4884854/unicode-string-normalization-in-c-c)。

# python - 给 Python 终端一个持久的历史

> ID：12334316
> 
> 赞同：37
> 
> 时间：2012-09-08T20:43:36.357
> 
> 标签：python, linux, python-2.7

有没有办法告诉交互式 Python shell 保留会话之间执行命令的历史记录？

在会话运行时，在执行命令后，我可以向上箭头并访问所述命令，我只是想知道是否有某种方法可以保存一定数量的这些命令，直到我下次使用 Python shell .

这将非常有用，因为我发现自己在会话中重用了我在上次会话结束时使用的命令。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-08T20:47:13.417

当然可以，只需一个小的启动脚本。来自python 教程中的[交互式输入编辑和历史替换：](http://docs.python.org/tutorial/interactive.html)

```
# Add auto-completion and a stored history file of commands to your Python
# interactive interpreter. Requires Python 2.0+, readline. Autocomplete is
# bound to the Esc key by default (you can change it - see readline docs).
#
# Store the file in ~/.pystartup, and set an environment variable to point
# to it:  "export PYTHONSTARTUP=~/.pystartup" in bash.

import atexit
import os
import readline
import rlcompleter

historyPath = os.path.expanduser("~/.pyhistory")

def save_history(historyPath=historyPath):
    import readline
    readline.write_history_file(historyPath)

if os.path.exists(historyPath):
    readline.read_history_file(historyPath)

atexit.register(save_history)
del os, atexit, readline, rlcompleter, save_history, historyPath 
```

从 Python 3.4 开始，[交互式解释器支持自动完成和开箱即用的历史记录](https://docs.python.org/3/whatsnew/3.4.html#other-improvements)：

> 现在，在支持`readline`. 默认情况下也启用历史记录，并写入（和读取）文件`~/.python-history`。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-08T20:45:16.723

使用[IPython](http://ipython.org/)。

无论如何，您应该这样做，因为它太棒了：持久命令历史只是它比普通 Python shell 更好的众多方式之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-17T08:22:42.173

[在使用虚拟环境](https://github.com/pypa/virtualenv/issues/355)时，这对于 Python 3 也是必需的。

我使用了一个稍微不同的版本，它为每个虚拟环境保留一个历史文件：

```
import sys

if sys.version_info >= (3, 0) and hasattr(sys, 'real_prefix'):  # in a VirtualEnv
    import atexit, os, readline, sys

    PYTHON_HISTORY_FILE = os.path.join(os.environ['VIRTUAL_ENV'], '.python_history')
    if os.path.exists(PYTHON_HISTORY_FILE):
        readline.read_history_file(PYTHON_HISTORY_FILE)
    atexit.register(readline.write_history_file, PYTHON_HISTORY_FILE) 
```

# foursquare - 如何从基于令牌的身份验证中获取foursquare uid？

> ID：12334319
> 
> 赞同：0
> 
> 时间：2012-09-08T20:43:54.233
> 
> 标签：foursquare

我正在使用此处描述的令牌流[https://developer.foursquare.com/overview/auth](https://developer.foursquare.com/overview/auth)

用户对foursquare 进行身份验证并被发送到我服务器上的回调页面，我从该页面解析该用户的访问令牌。

获得此访问令牌后，如何查找用户以便获取她的 uid？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T19:07:46.120

使用用户 ID 为“self”的[/users/USER_ID](https://developer.foursquare.com/docs/users/users)端点来获取有关代理用户的信息。

# javascript - 动态创建的输入文本字段的替代方案

> ID：12334321
> 
> 赞同：-1
> 
> 时间：2012-09-08T20:44:17.520
> 
> 标签：javascript, forms, input, textfield

我以前在表单上使用动态创建的输入文本字段来允许用户输入朋友的姓名。但是，在我重新设计时，此表单将位于 div 内的图像之上，如果它延伸出来，它看起来有点垃圾。

是否有任何替代方法允许用户输入多个在背景图像范围内看起来不错的名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:47:07.213

您可以有一个添加朋友的按钮，并在单击时显示一个显示单个文本字段和按钮的小灯箱。在添加每个朋友时，在灯箱本身中显示选定的朋友。就像 facebook 在您添加好友以发送消息时所做的那样；）

# java - 从java中的datafile.txt读取某些句子

> ID：12334323
> 
> 赞同：-1
> 
> 时间：2012-09-08T20:44:20.483
> 
> 标签：java, file-io, arraylist

在我的程序中，它读取了一个名为 datafile.txt 的文件...里面的 datafile.txt 是随机的 3 行单词。我的程序所做的是读取用户输入的文件，然后他们可以输入 Line # 和 Word #，它会告诉他们该位置的单词.. 例如..

要读取的文件是什么？

数据文件.txt

请输入行号和字号（第一行是1）。

2 2

这个词是：

我的问题是我的程序将 txt 文档中的 3 行读取为 0, 1 ,2 并且单词从 0 开始。所以要读取第一行中的第一个单词，他们必须输入 0,0 而不是 1,1 . 我想做的是让它工作，这样他们就可以输入 1,1 而不是 0,0。不知道我现在的问题是什么，这是我的代码....

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.Scanner;

public class readingFile {

    /**
    * @param args
    * @throws IOException 
    * @throws validException 
    */
    public static void main(String[] args) throws IOException, checkException 
    {
        System.out.println("Enter file name: " );
        Scanner keyboard = new Scanner(System.in);
        BufferedReader inputStream = null;
        ArrayList<String> file = new ArrayList<String>();
        String fileName = keyboard.next();
        System.out.println ("The file " + fileName +
                " has the following lines below: ");
        System.out.println();

        try
        {
            inputStream = new BufferedReader(new FileReader(fileName));         
            ArrayList<String> lines = new ArrayList<String>();
            while(true)
            {
                String line = inputStream.readLine();
                if(line ==null)
                {
                    break;
                }

                Scanner itemnize = new Scanner(line);
                while(itemnize.hasNext())
                {
                    lines.add(itemnize.next());
                }
                lines.addAll(lines);

                System.out.println(lines+"\n");                 
            }       

            System.out.println("Please enter the line number and word number");

            int index1 = keyboard.nextInt();
            int index = keyboard.nextInt();

            System.out.println("The word is: "+ lines.get(index));
        }
        catch(FileNotFoundException e)
        {
            System.out.println("Error opening the file " + fileName);
        }
        inputStream.close();
    }

    private static void checkValid(ArrayList<String> items, int index) throws checkException
    {
        throw new checkException("Not Found");
    }       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:19:55.017

使基于 1 的用户输入适应基于 0 的内部表示的明显解决方案是在某个点减去一个。看到你甚至不使用`index1`，写作

```
lines.get(index - 1) 
```

不会完全解决你的问题。但我想你可以从那里得到它，并为单词 index 做类似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T22:51:19.413

因为我假设您只是学习编程，所以我将指出 3 个改进领域

*   就像数学有 BIDMAS 一样，它决定了表达式的评估顺序 Java 和其他程序语言以特定的方式评估语句。这意味着在函数的括号内可以包含语句而不是变量或常量。这将使用传递给被调用函数的结果（或返回）进行评估。这就是为什么 MvG 说你可以做到`lines.get(index - 1)`

*   并非您应该考虑和计划的所有异常都会让编译器通知您。例如，在您的代码中输入了无效的行号或字号输入，您将获得运行时异常（数组索引超出范围）

*   变量的命名应该很有用，你有`index`和`index1`。有什么不同？我假设通过阅读您的代码，第一个应该是用户选择的行号索引，第二个应该是所述行上单词的索引。我可以建议`requestedLineIndex`和`requestedWordIndex`。

最后一点，这不是一个常见的 StackOverflow 问题，因此为什么你的问题被“否决”了。如果您作为课程的一部分进行学习，是否有课程论坛或虚拟学习环境 (VLE) 可以发布问题？在相同学习水平的同龄人的支持往往有助于探索语言的基础知识。

# c# - 从 aspx 页面访问静态变量

> ID：12334324
> 
> 赞同：1
> 
> 时间：2012-09-08T20:44:25.637
> 
> 标签：c#, asp.net

```
 public partial class Page1 :System.Web.UI.Page
 {
      public static LGDP.LDGPSession var1 = null;

      private void Login(this, EventArgs e)
      {
           var1 = new LGDPSession(this, data, data);
      }

      public bool IsLoggedIn()
      {
           bool login = false;

           if (var1 != null)
           {
                login = true;
           }

           return var1;
      }
 } 
```

如何从 Page2.apsx 访问 Page1 静态 var1 或函数 IsLoggedIn() ？

```
 public partial class Page2 :System.Web.UI.Page
 {
      Page1.(nothing shows up here)
 } 
```

回答 ----- 在页面加载/回发中创建了单独的类并访问了公共变量

```
private static bool _login = false;

public static void SetLoggedIn(object lgdps)
{
    if (lgdps == null)
    {
        _login = false;
    }

    if (lgdps != null)
    {
        _login = true;
    }
}

public static bool IsLogin
{
    get { return _login; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T20:50:07.953

您的函数`IsLoggedIn`无法`Page1`编译。它必须返回一些东西：

```
public bool IsLoggedIn()
{
  bool login = false;

  if (var1 != null)
  {
    login = true;
  }

  return login;
} 
```

或者简单地说：

```
public bool IsLoggedIn()
{
  return var1 != null;
} 
```

页面编译后，其成员应显示在智能感知中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T20:53:36.977

最好创建一个包含您的函数的基类：

```
public class BasePage : Page
{    
      public bool IsLoggedIn()
      {
           bool login = false;

           if (var1 != null)
           {
                login = true;
           }
      }

} 
```

然后你可以`IsLoggedIn`从你继承的页面访问`BasePage`

```
public partial class Page1 : BasePage
{
}

public partial class Page2 : BasePage
{
  protected void Page_Load(object sender, EventArgs e)
  {
        if(IsLoggedIn())
        {
        }
  }   
} 
```

# c - 非常简单的源上的段错误

> ID：12334326
> 
> 赞同：1
> 
> 时间：2012-09-08T20:44:31.613
> 
> 标签：c, segmentation-fault, freetype

我正在尝试使用 FreeType 库编写一个简单的脚本。尽管我使用正确，但在执行 FT_Set_Pixel_Sizes 方法期间会发生段错误。任何帮助都会很棒。这是完整的代码：

```
#include <ft2build.h>
#include FT_FREETYPE_H

main() {

    FT_Library library;
    FT_Face face;
    FT_GlyphSlot slot;
    FT_UInt glyph_index = 30;
    char* font_file = "/usr/share/fonts/truetype/freefont/FreeMono.ttf";

    // Render font
    FT_New_Face(library, font_file, 0, &face);

    FT_Set_Pixel_Sizes(face, 0, 16); /* THIS LINE IS CAUSING THE SEGFAULT */

    slot = face->glyph;
    FT_Load_Glyph(face, glyph_index, FT_LOAD_DEFAULT);
    FT_Render_Glyph(face->glyph, FT_RENDER_MODE_NORMAL);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T20:52:19.293

您没有初始化`Library`变量：请参阅[`FT_LIBRARY`文档](http://www.freetype.org/freetype2/docs/reference/ft2-base_interface.html#FT_Library)。你应该使用[`FT_Init_FreeType`](http://www.freetype.org/freetype2/docs/reference/ft2-base_interface.html#FT_Init_FreeType)：

> FT_Init_FreeType
> 
> 在 FT_FREETYPE_H (freetype/freetype.h) 中定义。
> 
> FT_EXPORT( FT_Error ) FT_Init_FreeType( FT_Library *library );
> 
> 初始化一个新的 FreeType 库对象。此函数注册的模块集在构建时确定。
> 
> 输出库 新库对象的句柄。
> 
> 返回 FreeType 错误代码。0 表示成功。

[您可以按照本教程](http://www.freetype.org/freetype2/docs/tutorial/step1.html)首先习惯这个库。也要注意检查返回值...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T20:55:07.950

您尚未初始化库。

```
FT_Library library;
error = FT_Init_FreeType(&library);
if (error) { /* report error and exit */ } 
```

您还必须检查函数的返回值，如上所示。例如，`FT_New_Face`返回一个错误（就像您的情况一样），您不能访问`face`，因为它处于未定义状态。

# php - 纪元日期转换

> ID：12334328
> 
> 赞同：3
> 
> 时间：2012-09-08T20:44:55.437
> 
> 标签：php, timestamp

我正在尝试使用以下语句转换带有 php 5.3 的纪元时间戳

```
date('d-m-Y',strtotime('1349042399999')); 
```

转换为人类可读的格式并得到错误的结果：`01-01-1970`应该返回什么`30-09-2012`。我一直在搜索并创建以下主题[PHP strtotime 在日期列为空](https://stackoverflow.com/questions/7737363/php-strtotime-returns-a-1970-date-when-date-column-is-null)但对我的情况没有帮助时返回 1970 年的日期。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T20:52:46.883

原因是该时间戳中嵌入了毫秒，这导致它超过了整数溢出限制。

砍掉最后 3 个字符，你就可以开始了：

```
$original_timestamp = "1349042399999";
$timestamp = (int) substr($original_timestamp,0,-3);

echo date('d-m-Y',$timestamp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T17:42:56.323

我相信第二个 Rikudo 解决方案之所以有效，是因为强制转换为 int，而不是因为修剪毫秒。

在我看来，这应该对你有用（它对我有用）

$original_timestamp = "1349042399999"; date('dmY', (int) $original_timestamp);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T20:51:58.957

通过使用`strtotime`，您正在尝试将时间戳转换为另一个时间戳。您的时间戳也以微秒为单位。该`date`函数只需要没有微秒的时间戳，如下所示：

```
date('d-m-Y',substr('1349042399999', 0, -3)); 
```

# ruby-on-rails-3.1 - 由于新的遗物错误，Rails 服务器无法启动

> ID：12334340
> 
> 赞同：12
> 
> 时间：2012-09-08T20:46:43.860
> 
> 标签：ruby-on-rails-3.1, ruby-1.9.2, newrelic

当我尝试启动 Rails 服务器时，出现以下错误：

我正在使用红宝石 1.9.2

```
 => Booting WEBrick 
 => Rails 3.1.8 application starting in development on http://0.0.0.0:3000
 => Call with -d to detach
 => Ctrl-C to shutdown server
/Users/toptier/.rvm/gems/ruby-1.9.2-p320/gems/newrelic_rpm-3.4.2/lib/new_relic/agent/agent.rb:318:in `log_app_names': undefined method `join' for nil:NilClass (NoMethodError)
from /Users/toptier/.rvm/gems/ruby-1.9.2-p320/gems/newrelic_rpm-3.4.2/lib/new_relic/agent/agent.rb:439:in `start'
from /Users/toptier/.rvm/gems/ruby-1.9.2-p320/gems/newrelic_rpm-3.4.2/lib/new_relic/control/instance_methods.rb:95:in `start_agent'
from /Users/toptier/.rvm/gems/ruby-1.9.2-p320/gems/newrelic_rpm-3.4.2/lib/new_relic/control/instance_methods.rb:83:in `init_plugin'
from /Users/toptier/.rvm/gems/ruby-1.9.2-p320/gems/newrelic_rpm-3.4.2/lib/newrelic_rpm.rb:36:in `block in <class:Railtie>'
from /Users/toptier/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.1.8/lib/rails/initializable.rb:30:in `instance_exec'
from /Users/toptier/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.1.8/lib/rails/initializable.rb:30:in `run'
from /Users/toptier/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.1.8/lib/rails/initializable.rb:55:in `block in run_initializers'
from /Users/toptier/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.1.8/lib/rails/initializable.rb:54:in `each'
from /Users/toptier/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.1.8/lib/rails/initializable.rb:54:in `run_initializers'
from /Users/toptier/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.1.8/lib/rails/application.rb:96:in `initialize!'
from /Users/toptier/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.1.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
from /Users/toptier/Desktop/Proyectos/CursoIngles/config/environment.rb:5:in `<top (required)>'
from /Users/toptier/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:240:in `require'
from /Users/toptier/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:240:in `block in require' 
```

它使用以下 gem：newrelic_rpm (3.4.2)。如果我在 gemfile 中注释 newrelic 行，效果很好，

任何的想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T22:37:39.190

我在 New Relic 工作，我们已经找到了问题所在。

当`nil`显式设置为应用程序名称时会发生这种情况，这通常发生在本地开发从`ENV["NEW_RELIC_APP_NAME"]`. 由于此环境变量通常不会在您的本地开发盒上设置，因此它会作为 nil 进入代理的配置并导致本地服务器崩溃。它不会影响设置此变量的应用程序的部署版本。

显然代理应该优雅地处理这个案子，我们将在接下来的一两天内发布补丁。我们刚刚完成了对代理配置的重大重构，但在我们的内部测试中错过了这种极端情况。

etoleb 在评论中给出了一个很好的解决方法。让您头疼，我们深感抱歉。

如果您有任何问题或疑虑，请随时通过 sam@newrelic.com 直接给我发送电子邮件。

谢谢！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T19:15:45.043

该问题似乎与`app_name`您的 newrelic 配置中的设置为空白有关。我个人经历了 Heroku 安装（所以你的配置可能看起来不同），但这就是我所做的：

在（从[https://gist.github.com/2253296](https://gist.github.com/2253296)`config/newrelic.yml`复制）我删除了该行

```
 app_name: <%= ENV["NEW_RELIC_APP_NAME"] %> 
```

从`common`配置（我的第 35 行）到`production`配置（我的第 247 行之后），最终看起来像

```
production:
  <<: *default_settings
  monitor_mode: true
  app_name: <%= ENV["NEW_RELIC_APP_NAME"] %> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T05:39:35.013

很高兴看到可以承担责任的人的回复！干得好，新遗物。谢谢，@samg。

由于问题只是一个 nil env 值，而不是降级 gem 或使用配置文件，我只是添加了环境变量。

很容易看出 heroku 上的设置是什么：

```
$ heroku config
  ...
NEW_RELIC_APP_NAME:    my_app_name
NEW_RELIC_ID:          123456
NEW_RELIC_LICENSE_KEY: 982987ae987987af98798something7e897987987c7b9d7
NEW_RELIC_LOG:         stdout
 ... 
```

然后我选择通过我的项目的 .rvmrc 文件设置一个本地环境变量，在那里我做了一些其他类似的事情：

```
rvm use ruby-1.9.2-p290@ConTracker --create
export PATH=bin:$PATH
export NEW_RELIC_APP_NAME=my_app_name 
```

然后它只需要一次`cd ..`又一次`cd`地回到我的项目中，并且它正在与版本 3.4.2 上的 gem 一起使用。

派对！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T21:13:07.763

感谢您的评论。答案是降级到 3.4.1。

# html - 没有空格的网格 div

> ID：12334341
> 
> 赞同：1
> 
> 时间：2012-09-08T20:46:47.867
> 
> 标签：html, css, grid

我正在制作一个带有 div 的网格 Wordpress 主题。但是在三个div之后，第四个出现之前有一个空白。这是由于高度不同。我怎样才能使 div 没有空白区域？您可以[在此处](http://inmyownview.com)预览它的外观。

CSS是：

```
#wrapper #frontpage .box {
    float: left;
    position: relative;
    top: 0;
    width: 380px;
    margin-right: 30px;
    margin-bottom: 30px;
    font: 100 12.5px 'Helvetica';
    line-height: 18px;
    color: #3a3a3a;
    background: #f1f1f1;
}#wrapper #frontpage .box:nth-child(3n+3) {
    margin-right: 0;
} 
```

html 是对九个帖子的查询。

```
<div class="box">
    Content here
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:54:19.603

您可以使用`css3 - columns`Then 您可以在 3 列中显示您的 div，并且它之间没有空格。

[css3 - w3schools 上的专栏](http://www.w3schools.com/css3/css3_multiple_columns.asp)

# c - malloc 结构指针数组与结构数组

> ID：12334343
> 
> 赞同：11
> 
> 时间：2012-09-08T20:47:11.030
> 
> 标签：c, arrays, pointers, struct, malloc

有什么区别

```
struct mystruct *ptr = (struct test *)malloc(n*sizeof(struct test)); 
```

和

```
struct mystruct **ptr = (struct test *)malloc(n*sizeof(struct test *)); 
```

他们都工作得很好，我只是对两者之间的实际区别感到好奇。第一个是否分配结构数组，而第二个分配结构指针数组？另一种方式？另外，哪个内存占用更小？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-08T20:50:23.310

第一个分配一个 的数组`struct`，另一个分配一个指向 的指针数组`struct`。在第一种情况下，您可以通过立即分配来写入字段`ptr[0].field1 = value;`，而在第二种情况下，您必须`struct`在进行实际写入之前分配自身。

可以在 C 中删除`malloc`结果的强制转换，因此您可以编写

```
struct mystruct **ptr = malloc(n*sizeof(struct test *));
for (int i = 0; i != n ; i++) {
    ptr[i] = malloc(sizeof(struct test));
}
ptr[0]->field1 = value;
...
// Do not forget to free the memory when you are done:
for (int i = 0; i != n ; i++) {
    free(ptr[i]);
}
free(ptr); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T20:50:37.337

> 我只是好奇两者之间的实际区别

该函数`malloc`不处理结构或指针。**它只理解 bytes**。所以第一个为 n 个对象分配了足够的字节，`struct test`第二个为 n 个对象分配了足够的空间`struct test *`。

> 他们都工作正常

从外观上看，2 将用于截然不同的事物。例如，在第二种情况下，您必须为每个`ptr[i]`元素分配内存。

> 另外，哪个内存占用更小

`sizeof(struct test)`如果您打印和，您可以自己回答`sizeof(struct test *)`。但同样，它们是不同的东西，**具有不同的目的**。哪个占地面积更小，拖拉机还是甲虫？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T20:50:56.397

第一个分配结构数组。第二个分配一个指向结构的指针数组（结构本身没有内存）。所以第二个更小，除非你的结构当然也像指针一样非常小。

# javascript - JavaScript 的依赖管理和构建工具

> ID：12334346
> 
> 赞同：7
> 
> 时间：2012-09-08T20:47:14.417
> 
> 标签：javascript, dependency-management, package-managers

我有许多跨多个项目共享的JS~~片段和文件。~~我必须将它们复制粘贴到每个项目的单个文件中，或者将它们作为 cdn 上的单个文件提供。两者都是坏主意。

是否有任何依赖管理和构建工具，例如 Maven for JavaScript？理想情况下，它需要一组 js 依赖项并构建一个可以在 cdn 上提供的单个 js 文件。

我可以写一个脚本来做到这一点。但我正在寻找是否存在与 Maven 可比的 JS。

* * *

2014 年更新：根据此处的答案和我的研究，以下是最受欢迎的工具：

Bower、NPM、RequireJS、Browserify、Webpack、Grunt、Gulp

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T20:51:42.797

有[RequireJS](http://requirejs.org/)，但这与 Maven 有点不同，而且您要求它做的事情也与 Maven 不同。有任意数量的 JS 组合器/压缩器，例如 jekyll [-combiner](https://github.com/matb33/jekyll-combiner)和无数其他的。

如果您*使用*的是Maven，那么[JavaScript Maven 工具](http://mojo.codehaus.org/javascript-maven-tools/)可能会很有趣。如果您不是，我不知道为任意构建系统指定、下载、组合等的统一方式。一些 node.js 的东西可能很有用，但我从来没有在 node.js 上下文之外使用过它，所以我不确定。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-25T18:14:20.843

[http://webjars.org/](http://webjars.org/)将 JS 库打包为 JAR 文件，并使其在 Maven 下可用。

[RequireJS](http://requirejs.org/)不是 WebJars 的替代品；它补充了它。[RequireJS](http://requirejs.org/)将在运行时使用公共 JS 文件（在 CDN 上），而 Webjar 将在构建时下载必要的文件并让您自己托管它们。

因为大多数 JS 文件不托管在 CDN 上，所以我使用 Webjars 在构建时下载必要的 JS 文件，并使用[RequireJS](http://requirejs.org/)引用它们。这样我就可以两全其美了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T13:55:14.243

看看[咕噜](http://gruntjs.com/)。它是用于 javascript 项目的非常灵活的构建工具。由 jquery 团队和其他大型项目使用。它结合、缩小、测试、lint js 文件，在 javascript 中编写，有几十个插件可满足您的任何需求

# google-maps - 运行时错误的未知原因

> ID：12334347
> 
> 赞同：1
> 
> 时间：2012-09-08T20:47:18.927
> 
> 标签：google-maps, runtime-error

我从谷歌地图 Api 开始。按照互联网上的一些示例。我想出了这些代码。我可以通过创建 HttpURLCONnection 很容易地获取 Json 代码，但不知何故我遇到了运行时错误。不知何故我无法创建 Json 对象。我搜索了很多，但没有找到 JSONObject 和 Runtimeerror 之间的任何关系

```
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.ArrayList;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import android.os.Bundle;

public class Parser {

    public static void main(String args[])
    {
        String response="";
        int lat1=20270000,lon1=85520000,lat2=20264500,lon2=85835500;
        String urlString="https://maps.googleapis.com/maps/api/directions/json?origin="+Double.toString((double)lat1/1E6)+","+Double.toString((double) lon1/1E6)+"&destination="+Double.toString((double)lat2/1E6)+","+Double.toString((double) lon2/1E6)+"&sensor=true";
        HttpURLConnection urlConnection= null;
            URL url = null;
            try{
            url = new URL(urlString.toString());
            urlConnection=(HttpURLConnection)url.openConnection();
            urlConnection.setRequestMethod("GET");
            urlConnection.setDoOutput(true);
            urlConnection.setDoInput(true);
            urlConnection.connect();
            InputStream inStream = urlConnection.getInputStream();
            BufferedReader bReader = new BufferedReader(new InputStreamReader(inStream));
            String temp;
            while((temp = bReader.readLine()) != null){
                response += temp;
            }
            System.out.println(response);
            bReader.close();
            inStream.close();
            urlConnection.disconnect();
            }
            catch(Exception e){}

            ArrayList<Bundle> list = new ArrayList<Bundle>();
            try {
                System.out.println(response.toString()); // uptil here every thing is fine..... I am getting correct Json text.
                JSONObject jsonObject = new JSONObject(response);  //I am getting a runtime error in this line. Can't figure out the reason
                System.out.println(jsonObject);
                JSONArray routesArray= jsonObject.getJSONArray("routes");

                JSONObject route = routesArray.getJSONObject(0);
                JSONArray legs = route.getJSONArray("legs");
                JSONObject leg = legs.getJSONObject(0);

                JSONObject durationObject = leg.getJSONObject("duration");
                String duration = durationObject.getString("text");
                System.out.println("egferg"+duration);

            }
            catch(Exception e1){e1.printStackTrace();}

    }

} 
```

# jquery - 根据 BXslider 的窗口大小更改 jQuery 不工作

> ID：12334354
> 
> 赞同：0
> 
> 时间：2012-09-08T20:48:03.313
> 
> 标签：jquery, slider, responsive-design, bxslider

我已经在我正在处理的当前站点上安装了 BX 滑块，这是一个响应式站点，如果浏览器处于特定宽度，我想更改一些选项。我在下面编写的代码破坏了我的滑块布局，有什么建议吗？

```
<script type="text/javascript">

    $(document).ready(function() {

        if (width < 701) {

            $('#slidebx').bxSlider({
                mode: 'horizontal',
                infiniteLoop: true,
                speed: 500,
                pause: 5000,
                auto: true,
                pager: false,
                controls: true,
                displaySlideQty: 1,
                moveSlideQty: 1
            });

        } else {

            $('#slidebx').bxSlider({
                mode: 'horizontal',
                infiniteLoop: true,
                speed: 500,
                pause: 5000,
                auto: true,
                pager: false,
                controls: true,
                displaySlideQty: 4,
                moveSlideQty: 4
            });
        }
    });​

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T21:22:09.963

您在 if 语句中检查的宽度变量是否设置在某个位置？

试试这个：

```
if ($(document).width() < 701) {
   ...
} 
```

# php - 格式化日期时间

> ID：12334357
> 
> 赞同：0
> 
> 时间：2012-09-08T20:48:38.287
> 
> 标签：php, mysql

我在数据库的表中使用日期时间格式。

它的格式如下：yyyy/mm/dd 00:00:00

1）如何从值中提取日期和时间？2）当我输出日期时，如何将日期重新格式化为 mm/dd/yyyy？3) 输出时如何将时间重新格式化为 hh:mm am/pm？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:52:00.837

尝试这个：

```
date('Y-m-d', strtotime( $thetime ) );
date('H:i:s', strtotime( $thetime ) );
date('g:i a', strtotime( $thetime ) ); 
```

继续阅读有关[日期](http://nl.php.net/manual/en/function.date.php)功能的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T20:57:34.107

您可以使用 MySQL 的[DATE_FORMAT](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)函数在服务器端完成此操作：

1）如何从值中提取日期和时间？

`SELECT DATE(dateColumn)`

2）当我输出日期时，如何将日期重新格式化为 mm/dd/yyyy？

`SELECT DATE_FORMAT(dateColumn, '%m/%d/%Y')`

3) 输出时如何将时间重新格式化为 hh:mm am/pm？

`SELECT DATE_FORMAT(dateColumn, '%h:%i %p')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T21:00:40.473

你可以使用日期时间对象...

```
$dateTime = new DateTime($dateTimeFromDB);

$date = $dateTime->format('Y/m/d');;
$time = $dateTime->format('H:i:s');

$formattedDate = $dateTime->format('m/d/Y');
$formattedTime = $dateTime->format('g:i a'); 
```

呼应他们每个人，它应该提供你所追求的......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T20:54:38.380

您从查询中提取格式：

```
SELECT DATE(`datetime_column`) as `date` FROM `table` 
```

只会检索日期部分。

有关 PHP 中的日期/时间格式，请参阅**[DateTime 对象](http://php.net/datetime)**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T20:55:03.597

1) MySQL 通常将日期时间格式化为 yyyy-mm-dd hh:mm:ss，在这种情况下，使用以下代码进行格式化，`$sql`您的数据库日期时间字符串在哪里，并使用您需要的任何信息：

```
$year = $sql[0] . $sql[1] . $sql[2] . $sql[3];
$month = $sql[5] . $sql[6];
$day = $sql[8] . $sql[9];
$hour = $sql[11] . $sql[12];
$min = $sql[14] . $sql[15];
$sec = $sql[17] . $sql[18]; 
```

2) [http://php.net/manual/de/function.date.php](http://php.net/manual/de/function.date.php)格式化

3) [http://php.net/manual/de/function.date.php](http://php.net/manual/de/function.date.php)格式化 ;-)

# ruby - 如何从源代码加载 gem？

> ID：12334363
> 
> 赞同：9
> 
> 时间：2012-09-08T20:48:55.540
> 
> 标签：ruby, rubygems, gem

我已经 git 从 Github 克隆了一个 repo，现在我想尝试一下，因为我想查看代码并弄乱它。我创建了一个应该加载这个 gem 的文件 test.rb，但是我想加载我本地签出的版本，这样做的正确方法是什么？

现在我只是在使用一堆`"require_relative 'the_gem_name/lib/file'"`，感觉不对。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T21:37:57.110

当您`require 'foo'`Ruby 检查加载路径中的所有目录以查找文件`foo.rb`并加载它找到的第一个文件时。如果没有找到名为`foo.rb`的文件，并且您*没有*使用 Rubygems，`LoadError`则会引发 a。

如果您*正在*使用 Rubygems（很可能因为它包含在 Ruby 1.9+ 中），那么不会立即引发 a`LoadError`所有已安装的 Gems 被搜索以查看其中是否包含文件`foo.rb`. 如果找到这样的 Gem，则将其添加到加载路径并加载文件。

如果您想确保使用特定版本的库，您可以自己操作加载路径。通常这不是推荐的事情，但这是你想要做的那种情况。

将目录添加到加载路径有两种方法。首先，您可以使用`$LOAD_PATH`（或`$:`）全局变量在实际代码中执行此操作：

```
$LOAD_PATH.unshift '/path/to/the/gems/lib/'
require 'the_gem' 
```

请注意，您通常希望添加 gem 的`lib`目录，而不是 gem 的顶级目录（实际上这可能会因实际 Gem 的不同而有所不同，并且可能需要添加多个目录，但这`lib`是常态）。

另一种方法是使用`-I`命令行切换到`ruby`可执行文件：

```
$ ruby -I/path/to/the/gems/lib/ test.rb 
```

这种方式可能会更干净一些，因为通常您不想从代码内部弄乱加载路径，但如果您只是测试库，它可能并不重要。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T21:13:16.160

按照评论中 apneadiving 的建议，我创建了一个 Gemfile 并添加了这一行

```
source "http://rubygems.org"

gem 'gem_name', path: '~/path/to/gem/source/folder' 
```

然后`bundle install`，`bundle exec ruby test.rb`并且它起作用了。

# ruby-on-rails - 使用 CanCan 授权命名空间和嵌套控制器

> ID：12334367
> 
> 赞同：5
> 
> 时间：2012-09-08T20:49:16.227
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, cancan

我在让 cancan 授权下面的新路线设置时遇到了很多麻烦：

```
namespace :api do
namespace :v1 do
  resources :users do
    resources :user_songs
    resources :friendships
    resources :plays
    resources :likes
    resources :songs 
```

我已按照此处发布的内容[https://github.com/ryanb/cancan/wiki/Nested-Resources](https://github.com/ryanb/cancan/wiki/Nested-Resources)并通过将其放在上面来使用 likes 控制器对其进行测试：

```
class Api::V1::LikesController < Api::V1::BaseController

load_and_authorize_resource :user
load_and_authorize_resource :like, :through => :user 
```

在ability.rb 中使用 can :access, :all 有效，但我试图限制的其他任何东西都没有，例如：

```
can :access, :likes
can :access, Like
can :access, :users
can :access, User
can :access, [:"users/likes", :users_likes] 
```

我不太确定责任是否是因为命名空间路由。任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T17:29:03.420

找到了答案：毕竟是命名空间，它只需要一个

`can :access, "api/v1/likes"`

# html - 均匀空间图像？

> ID：12334368
> 
> 赞同：-2
> 
> 时间：2012-09-08T20:49:31.347
> 
> 标签：html, css

我想连续有 4 张图像，根据屏幕的宽度均匀分布在行中。我想这样做，这样我就可以在图像之间留出合适的间距，而不会出现任何水平溢出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T21:00:36.603

假设图像宽度相同，以下布局将根据需要排列图像。

```
<div>
<div style="width: 25%; text-align: center;"><img src="img1.jpg"></div>
<div style="width: 25%; text-align: center;"><img src="img2.jpg"></div>
<div style="width: 25%; text-align: center;"><img src="img3.jpg"></div>
<div style="width: 25%; text-align: center;"><img src="img4.jpg"></div>
</div> 
```

有一个问题；与中间的差距相比，第一张图片和最后一张图片之后的差距将是一半：

```
 |  +----+    +----+    +----+    +----+  |
 |--|    |----|    |----|    |----|    |--|
 |  +----+    +----+    +----+    +----+  | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T23:15:50.843

为此使用表格：

```
<table width="100%">
 <tr>
  <td width="25%">IMAGE</td>
  <td width="25%">IMAGE</td>
  <td width="25%">IMAGE</td>
  <td width="25%">IMAGE</td>
 </tr>
<table> 
```

然后根据需要添加`cellpadding`和`cellspacing`

# windows-phone-7 - Windows Phone 7 - 如何下载有进度的文件？

> ID：12334373
> 
> 赞同：3
> 
> 时间：2012-09-08T20:49:47.343
> 
> 标签：windows-phone-7

如何在 Windows Phone 7 中下载带有进度条的大文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T22:18:44.317

虽然克劳斯的回答会奏效，但可能更简单的解决方案是使用网络客户端。它看起来像这样：

```
 ...
    WebClient wb = new WebClient();
    wb.DownloadProgressChanged += wbchange;
    ...

    private void wbchange(object sender, DownloadProgressChangedEventArgs e)
    {
        progressBar2.Value = e.BytesReceived;
        progressBar2.Maximum = e.TotalBytesToReceive;

        int val = (int)(e.BytesReceived / 1048576);
        int max = (int)(e.TotalBytesToReceive / 1048576);

        textBlock4.Text = val + "MB out of " + max.ToString() + "MB";
    } 
```

此代码将显示一个带有进度的进度条和一个带有 MB 进度的文本块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T21:05:46.587

请参阅 Microsoft[如何：为 Windows Phone 实现后台文件传输](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202959%28v=vs.92%29.aspx)

# abap - 使用不同系统的搜索帮助？

> ID：12334375
> 
> 赞同：2
> 
> 时间：2012-09-08T20:50:03.727
> 
> 标签：abap, sap-data-dictionary

我需要我的 bukrs 字段的搜索帮助。问题是数据应该来自不同的系统。有 2 个系统，如 X 和 Y。我在 X 系统中并正在运行一个程序。

在选择屏幕 bukrs 字段存在。当我点击搜索帮助数据应该来自系统 Y。

我听说可以提取数据来搜索帮助，但在站点中找不到足够的信息。

此致。

5 个月的 SAP/ABAP 经验 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T22:59:32.693

要使用自定义数据选择创建搜索帮助，您可以在搜索帮助中定义搜索帮助出口。要以自定义方式而不是从数据库表中选择数据，请转到搜索帮助的“定义”选项卡，删除输入“选择方法”的内容，并在输入“搜索帮助退出”中输入功能模块。此功能模块必须与示例模块具有相同的签名`F4IF_SHLP_EXIT_EXAMPLE`。此示例模块的源代码中的注释将向您解释如何实现它。然后，您对该功能模块的实现可以通过远程函数调用从另一个系统执行数据采集。

要从另一个系统获取数据，您必须通过 RFC（远程函数调用）调用远程系统中的函数模块。为此，您需要：

1.  远程系统中支持 RFC 的功能模块，用于导出您需要的数据。您可以在功能模块的属性选项卡上设置一个勾号，使其支持 RFC。
2.  从本地系统到远程系统的 RFC 连接。可以使用事务 SM59 创建和配置 RFC 目标。

要通过 RFC 调用函数模块，您只需将 DESTINATION [rfc-destination] 添加到函数调用中。

```
CALL FUNCTION 'Z_YOUR_RFC_CAPABLE_FUNCTION_MODULE'
     DESTINATION 'my_rfc_destination'
     IMPORTING [...] 
```

用户必须登录远程系统才能调用其中的 RFC 功能模块，除非您在 RFC 连接中定义了带有密码的用户名。当你这样做时，你应该在远程系统中创建一个具有最小权限的专用系统用户，尤其是对于这个 RFC 连接。当用户的权限太宽时，RFC 连接可能会被滥用于其他目的。

# file - 可以使用非加密哈希对数据块进行指纹识别吗？

> ID：12334379
> 
> 赞同：5
> 
> 时间：2012-09-08T20:50:26.100
> 
> 标签：file, hash

我的问题是这个。我有一个数据块。有时会更新此数据块并出现新的更改版本。我需要检测我正在查看的数据是否与我期望收到的版本匹配。

我决定使用指纹，这样我就可以避免完整存储“预期”版本的数据。似乎这种事情的“默认”选择是 MD5 哈希。

然而，MD5 被设计为加密安全。有更快的散列函数。我正在研究现代非加密函数，例如 CityHash 和 SpookyHash。

由于我控制系统中的所有数据，因此我只关心更改的数据块散列到相同值的意外冲突。因此，我认为我不必担心加密哈希的“防攻击”性质，并且可以使用更简单的哈希函数。

为此目的使用诸如 CityHash 或 SpookyHash 之类的哈希函数是否有任何问题，或者我应该坚持使用 MD5 吗？还是我应该使用专门为指纹识别设计的东西，例如拉宾指纹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:57:27.053

是的，没关系（也可以看看更快的CRC系列函数）。然而，我倾向于避免使用散列来区分数据，使用序列号结合日期/时间值提供了一种确定哪个版本更新和检测不同步更改的方法。指纹更多地用于检测损坏的文件而不是版本控制。

如果您想将一组数据与另一组数据进行比较，则不要使用哈希/指纹，直接比较数据即可。比较两个流比获取两个流的哈希然后比较哈希更快。

也就是说，比较大量文件的一种快速的好方法是获取每个文件的哈希值，然后比较哈希值，当哈希值匹配时，您再比较原始字节。哈希冲突的可能性确实很小，但这并非不可能 - 我想绝对确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-23T20:50:58.360

您可能希望使用 Rabin 哈希，它比 MD5、SHA1 等加密哈希更快且更具抗冲突性。可以在[此处](http://sourceforge.net/projects/rabinhash/)找到 Java 实现。网络规模公司的大多数大规模重复数据删除工作都使用 Rabin Hash（例如，请参阅[由 Henzinger 领导的 Google 的工作）](http://www.seobythesea.com/2008/02/new-google-process-for-detecting-near-duplicate-content/)

# serialization - .NET WebAPI 序列化 k_BackingField Nastiness

> ID：12334382
> 
> 赞同：88
> 
> 时间：2012-09-08T20:50:38.803
> 
> 标签：serialization, asp.net-web-api

当我序列化以下内容时：

```
[Serializable]
public class Error
{

    public string Status { get; set; }
    public string Message { get; set; }
    public string ErrorReferenceCode { get; set; }
    public List<FriendlyError> Errors { get; set; }
} 
```

我得到了这个令人作呕的混乱：

```
<ErrorRootOfstring xmlns:i="http://www.w3.org/2001/XMLSchema-instance"   xmlns="http://schemas.datacontract.org/2004/07/Printmee.Api">
<_x003C_Errors_x003E_k__BackingField>
An exception has occurred. Please contact printmee support
</_x003C_Errors_x003E_k__BackingField>
<_x003C_LookupCode_x003E_k__BackingField>988232ec-6bc9-48f3-8116-7ff7c71302dd</_x003C_LookupCode_x003E_k__BackingField>
</ErrorRootOfstring> 
```

是什么赋予了？我怎样才能使这个漂亮？JSON 响应还包含 k_BackingField

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-09-10T20:46:49.337

默认情况下，您既不需要使用也不需要使用`[Serializable]`Web `[DataContract]`API。

只需保持模型不变，Web API 就会为您序列化所有公共属性。

只有当您想对包含的内容有更多控制时，您才可以使用`[DataContract]`和要包含的属性来装饰您的类`[DataMember]`（因为 DCS 和 JSON.NET 都尊重这些属性）。

如果出于某种原因，您需要`[Serializable]`在您的类上（即您出于某种原因将其序列化到内存流中，进行深度复制等），那么您必须结合使用这两个属性来防止支持字段名称：

```
[Serializable]
[DataContract]
public class Error
{
    [DataMember]
    public string Status { get; set; }
    [DataMember]
    public string Message { get; set; }
    [DataMember]
    public string ErrorReferenceCode { get; set; }
    [DataMember]
    public List<FriendlyError> Errors { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2014-03-18T16:58:38.213

有一个更通用的解决方案：您可以将 Json Serializer 配置为忽略该`[Serializable]`属性，这样您就不必更改类中的属性。

您应该在应用程序启动时进行此配置更改，即在 Global.asax`Application_Start`事件中：

```
var serializerSettings =
  GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings;
var contractResolver =
  (DefaultContractResolver)serializerSettings.ContractResolver;
contractResolver.IgnoreSerializableAttribute = true; 
```

您还可以对 Json 序列化进行其他更改，例如指定用于序列化日期的格式以及许多其他内容。

这仅适用于 Web API JSON 序列化。应用程序中的其他序列化（Web API XML 序列化、MVC JsonResult...）不会受此设置影响。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T02:22:32.567

尝试使用 DataContract 而不是 Serializable 来标记您的课程。有关原因的更多详细信息，请查看这篇[关于序列化自动属性的优秀博客文章。](http://conceptdev.blogspot.com/2008/02/wcf-web-services-serialization-of.html?m=1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-24T07:17:17.710

[DataContract] 属性对我不起作用，所以它不是一个选项。

[XmlSerializer 忽略 WebApi 中的 [XmlAttribute]](https://stackoverflow.com/questions/35846873/xmlserializer-ignores-xmlattribute-in-webapi)

上述决议为我解决了这个问题。

```
GlobalConfiguration.Configuration.Formatters.XmlFormatter.UseXmlSerializer = true; 
```

# c# - 在 ascx html 中访问 ascx.cs public bool

> ID：12334383
> 
> 赞同：1
> 
> 时间：2012-09-08T20:50:55.417
> 
> 标签：c#, asp.net, ascx

我正在尝试访问自定义用户控件的 html 片段中的公共布尔值。这是我的代码隐藏的一部分：

```
public partial class ToDoList : System.Web.UI.UserControl
{
    public bool ShowAddNewButton { get; set; }
    public bool CreateMode { get;set;}

    protected void Page_Load(object sender, EventArgs e)
    {
    }

} 
```

这是我的html：

```
<%@ Control Language="C#" AutoEventWireup="True" CodeBehind="ToDoList.ascx.cs" Inherits="ToDoList" %>

<div id="leftNav">
    <asp:HiddenField ID="hfNAVItems" runat="server" />
    <asp:HiddenField ID="hfRequestID" runat="server" />
    <asp:HiddenField runat="server" ID="hdnAllowDragDrop" />
    <div class='nav-header'>
        <div>
            My To-Do List</div>
    </div>
    <ul id="mainNav" class="nav-item-list">
        <li class="nav-item" id="firstNavContainer">
            <div>
                <span class="nav-item-todos">
                    <asp:Label Text="" runat="server" ID="lblfirstSectionHeader" /></span>
                <% if(ShowAddNewButton)
                   { %>
                <asp:Button ID="Button1" runat="server" Text="Add New" CssClass="navaddnewrequest todo-button"
                    OnClick="btnNewToDo_Click" />
                <%} %>
            </div>
            <ul id="todosNav">
                <% if (CreateMode)
                   { %>
                <li class="SelectedNavHeader">New Todo</li>
                <% } %>
                <asp:Repeater runat="server" ID="rptToDoNavItems">
                    <ItemTemplate>
                    <li class="ToDoSelectedNavGroup" runat="server" id="liToDoNavGroupCont">
                        <asp:Literal runat="server" ID="lblToDoNavGroupDisplay" /></li>
                    </ItemTemplate>
                </asp:Repeater>
            </ul>
        </li>
    </ul>
    <ul id="lineItemNav">
        <li class="darkgradient header">My Lists</li>
    </ul>

</div> 
```

我收到以下错误：

当前上下文中不存在名称“ShowAddNewButton”当前上下文中不存在
名称“CreateMode”

在这个问题上挠头……似乎很简​​单。很高兴得知我遗漏了一些完全明显的东西。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T01:00:41.917

如果没有记错的话，您就不能真正混合使用代码隐藏属性和服务器端脚本。你必须选择一个。但是我已经很久没有尝试过了，所以也许你可以。

在我看来，假设您可以做到，问题在于服务器端脚本将您的属性名称解释为变量名称。您可以尝试在它们前面加上`this`or`base`并查看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T22:30:33.067

管理此问题的另一种方法是使用`Visible`属性。您需要将您的设置`li`为`runat="server"`

```
<asp:Button ID="Button1" runat="server" Text="Add New" CssClass="navaddnewrequest todo-button"
    OnClick="btnNewToDo_Click" Visible='<%= ShowAddNewButton %>'/>

 ....

<li ID="liNewTodo" runat="server" class="SelectedNavHeader" 
    Visible='<%= CreateMode %>'>New Todo</li> 
```

# objective-c - 引用 NSManagedObject 子类的协议中出现不一致的“未知类型名称”错误

> ID：12334388
> 
> 赞同：0
> 
> 时间：2012-09-08T20:51:24.357
> 
> 标签：objective-c, ios5, xcode4, protocols, nsmanagedobject

我的项目中声明了两个协议。我写的第一个名字是`SSSelectingCategory.h`

```
#import <Foundation/Foundation.h>

@protocol SSSelectingCategory <NSObject>

@required
@property (nonatomic, strong) SSCategory *selectedCategory;

@end 
```

第二个是`SSSelectingIcon.h`

```
#import <Foundation/Foundation.h>

@protocol SSSelectingIcon <NSObject>

@required
@property (nonatomic, strong) SSIcon *selectedIcon;

@end 
```

奇怪的是，第一个协议编译时没有任何错误或警告，而第二个协议正在抛出`Unknown type name 'SSIcon'`.

我知道这个问题的答案是在我的第二个协议中使用前向类声明，如下所示：

```
#import <Foundation/Foundation.h>
@class SSIcon;

@protocol SSSelectingIcon <NSObject>

@required
@property (nonatomic, strong) SSIcon *selectedIcon;

@end 
```

但是现在这让我认为`SSSelectingCategory.h`协议根本不应该首先编译，因为我没有放置任何显式`#import`或任何类型的前向类声明。

我可以让编译器安静下来并继续编码，但我想了解 Xcode 是否发生了一些奇怪的事情，或者我是否遗漏了一些细节，因为这两种协议都非常简单。`SSCategory`和/或类是否存在问题`SSIcon`，因为它们都是`NSManagedObject`s 并且两者之间存在联系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T21:07:08.783

编译器编译 .m 文件，这些文件又包含 .h 文件。

所以我假设在包含“SSSelectingCategory.h”的.m文件中，`SSCategory`是之前定义的，这样编译器编译协议就没有问题了。

另一方面，如果包含“SSSelectingIcon.h”而`SSIcon`之前没有定义，编译器将在那里中止并出现错误。

In any case, it makes sense to include the required interfaces in the .h file (or forward declare the required classes), because that enables code-completion in Xcode.

# c++ - 如何使用 std::accumulate 巧妙地将单独定义的索引指向的向量中的值相加（替换循环）

> ID：12334389
> 
> 赞同：3
> 
> 时间：2012-09-08T20:51:31.277
> 
> 标签：c++, visual-c++, c++11, parallel-processing, directxmath

我想知道是否有一种更简洁（或更好，更有效）的方法来求和向量/（不对称）矩阵的值（具有对称结构的矩阵，当然可以在循环中利用，但与我的无关问题）由一组索引指向。基本上，此代码可用于计算通过 2D 矩阵的路线的成本。我正在寻找一种利用 CPU 而不是 GPU 的方法。

这是一些相关的代码，我更感兴趣的是第一个案例。我在想可以使用`std::accumulate`lambda 来捕获索引向量，但后来我想知道，是否已经有一种更简洁的方法，也许还有其他一些运算符。循环不是“真正的问题”，因为我的口味也很清楚，但是在寻找超级整洁或更高效的在线...

```
template<typename out_type>
out_type sum(std::vector<float> const& matrix, std::vector<int> const& indices)
{
    out_type cost = 0;
    for(decltype(indices.size()) i = 0; i < indices.size() - 1; ++i) 
    {
        const int index = indices.size() * indices[i] + indices[i + 1];
        cost += matrix[index];
    }

    const int index = indices.size() * indices[indices.size() - 1] + indices[0];
    cost += matrix[index];

    return cost;
}

template<typename out_type>
out_type sum(std::vector<std::vector<float>> const& matrix, std::vector<int> const& indices)
{
    out_type cost = 0;
    for(decltype(indices.size()) i = 0; i < indices.size() - 1; i++) 
    {
        cost += matrix[indices[i]][indices[i + 1]];
    }
    cost += matrix[indices[indices.size() - 1]][indices[0]];

    return cost;
} 
```

哦，[PPL](http://msdn.microsoft.com/en-us/library/dd492418.aspx) / [TBB](http://threadingbuildingblocks.org/)也是公平的游戏。

### 编辑

作为事后的想法和对 John 的评论，由于输入和输出类型可能不同，是否有地方在计算中使用[std::common_type ？](http://en.cppreference.com/w/cpp/types/common_type)这有点像挥手，更像是学习技术和图书馆。[代码 kata](http://en.wikipedia.org/wiki/Kata_%28programming%29)的一种形式，如果你愿意的话。

### 编辑 2

现在，有一个选项可以使循环更快，博主 theowl84 在博客中解释了如何*使用*[SSE 代码处理 STL 向量](http://fastcpp.blogspot.fi/2011/04/how-to-unroll-loop-in-c.html)。代码使用，但我想知道[DirectXMath](http://blogs.msdn.com/b/chuckw/archive/2012/03/27/introducing-directxmath.aspx)库中是否也有一些东西。*`__m128 directly`*

 *### 编辑 3

现在，在编写了一些具体代码之后，我发现`std::accumulate`不会让我走得太远。或者至少我找不到以简洁的方式完成该`[indices[i + 1]`部分的方法，因为它本身只能访问当前值和总和。从这个角度来看，**novocrat 的**方法似乎是最富有成效的方法。`matrix[indices[i]][indices[i + 1]];``std::accumulate`

 **[DeadMG](https://stackoverflow.com/users/298661/deadmg)建议使用带有关联性警告的[parallel_reduce ，](http://msdn.microsoft.com/en-us/library/hh749974.aspx) [novocrat](https://stackoverflow.com/users/90002/novelocrat)进一步评论。我没有去看看是否可以使用[parallel_reduce](http://msdn.microsoft.com/en-us/library/hh749974.aspx)，因为界面看起来有点麻烦，无法快速尝试。除此之外，即使我的代码是串行执行的，它也会遇到与并行缩减版本相同的浮动问题。虽然并行版本会/可能比串行版本更不可预测，我认为。

这有点切题，但这里的一些绊脚石可能会感兴趣，对于那些已经读过这篇文章的人来说，可能对[NAG 博客](http://www.nag.co.uk/)中的[Wandering Precision](http://blog.nag.com/2011/02/wandering-precision.html)文章（非常）感兴趣，其中详细介绍了一些甚至由硬件指令引入的复杂问题重新订购！[然后在#AltDevBlogADay Synchronous RTS Engines and a Tale of Desyncs](http://www.altdevblogaday.com/2011/07/09/synchronous-rts-engines-and-a-tale-of-desyncs/)中对分布式设置中的这个问题进行了一些反思。此外，[ACCU](http://accu.org/)（顺便说一下，通用邮件列表非常好，并且可以免费加入）包含几篇关于浮点精度的文章（例如[this ）。](http://accu.org/index.php/journals/1717)切线切线，我发现了**Fernando Cacciola**[在几何计算中的鲁棒性问题](http://dl.dropbox.com/u/938865/GeometricComputingRobustness_in_a_tiny_nutshell.pdf) **成为一篇好文章，最初来自 ACCU 邮件列表。**

 **然后是`std::common_type`. 我找不到那个用途。如果我有两种不同的类型作为参数，那么返回值可以/应该由`std::common_type`. 也许更相关的是`std::is_convertible`确保`static_assert`所需的结果类型可从参数类型转换（带有干净的错误消息）。除此之外，我只能检查返回值/中间计算值的准确性是否足以表示求和的结果而不会出现溢出等问题，但我还没有遇到过这样的标准工具。

我想，女士们，先生们，关于这一点。我玩得很开心，我希望阅读这篇文章的人也能从中有所收获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T21:16:46.857

您可以生成一个迭代器，它采用`matrix`并`indices`产生适当的值。

```
class route_iterator
{
  vector<vector<float>> const& matrix;
  vector<int> const& indices;
  int i;

public:
  route_iterator(vector<vector<float>> const& matrix_, vector<int> const& indices_,
                 int begin = 0)
  : matrix(matrix_), indices(indices_), i(begin)
  { }
  float operator*() {
    return matrix[indices[i]][indices[(i + 1) % indices.size()]];
  }
  route_iterator& operator++() {
    ++i;
    return *this;
  }
}; 
```

然后你的累积运行从`route_iterator(matrix, indices)`到`route_iterator(matrix, indices, indices.size())`。

但是，不可否认，这会在没有智能编译器将其转换为并行的情况下进行序列化。您真正想要的是并行映射和折叠（累积）操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T21:40:27.253

```
out_type cost = 0;
for(decltype(indices.size()) i = 0; i < indices.size() - 1; i++) 
{
    cost += matrix[indices[i]][indices[i + 1]];
} 
```

这基本上是`std::accumulate`。PPL 提供（如果我记得的话，TBB 也是如此）[parallel_reduce](http://msdn.microsoft.com/en-us/library/hh749974.aspx)。这需要关联性但不需要交换性，并且`+`在实数/浮点数/整数上是关联的。*****

# cuda - 在程序中多次调用 jcuda.driver.JCudaDriver/cuInit 是否安全？

> ID：12334393
> 
> 赞同：2
> 
> 时间：2012-09-08T20:51:47.940
> 
> 标签：cuda, jcuda

我正在使用动态语言 (Clojure) 以使用 JCuda 的交互式开发方式创建 CUDA 上下文。通常我会调用一个初始化器，其中包含对`jcuda.driver.JCudaDriver/cuInit`. 多次调用 cuInit 是否安全？另外，有没有类似cuInit的destroy方法？`CUDA_ERROR_DEINITIALIZED`我问，因为它可能返回错误代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T10:11:29.380

要回答这个问题，是的，`cuInit`多次调用可能是安全的。我没有注意到这样做的任何副作用。

但是请注意，这`cuInit`只会触发 API 内的一次性初始化过程。它对设备或上下文没有任何作用，而且它绝对不能返回 CUDA_ERROR_DEINITIALIZED。在调用应用程序*后*执行您将执行的步骤`cuInit`（即创建上下文）将产生真正的影响 - 每次调用它时都会创建一个新的上下文，如果上下文没有被主动销毁，则会发生资源耗尽。API 没有等效的取消初始化调用。我想这样做的目的是，一旦初始化，运行时 API 预计将保持该状态，直到应用程序终止。

# android - Android - 查看wifi密码是否正确

> ID：12334396
> 
> 赞同：4
> 
> 时间：2012-09-08T20:52:01.407
> 
> 标签：android, wifi

我计划制作一个应用程序来检查某个 wifi 网络是否使用通用密码。我有一个最常见的密码列表，但有以下功能：

```
public boolean connectTo(String psKey){
    WifiConfiguration wc = new WifiConfiguration();
    wc.SSID = "\"" + dbw.getSsid() + "\"";
    wc.preSharedKey  = "\"" + psKey + "\"";

    wc.status = WifiConfiguration.Status.ENABLED;   
    wc = configureCapabs(wc, dbw.getCapability());

    int res = wifi.addNetwork(wc);
    Toast.makeText(this, "add Network returned " + res , Toast.LENGTH_SHORT).show();
    boolean b = wifi.enableNetwork(res, true);        
    Toast.makeText(this, "enableNetwork returned " + b , Toast.LENGTH_SHORT).show();
    if(!b) return false;
    boolean fin = /*b ? wifi.reassociate() : */wifi.reconnect();
    return fin;
} 
```

即使密码不正确，它也会返回 true。有没有办法检查我尝试登录的密码是被接受还是被拒绝？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T21:10:22.983

您正在使用`reconnect()`/`reassociate()`方法`WiFiManager`来检查天气或连接是否成功，但它们返回的布尔值意味着别的东西。返回的值仅告诉您 STARTING 给定操作的结果。这是因为关联和连接到 WiFi 网络需要时间。然而，这些方法将立即返回并且不会阻塞。连接或关联网络的实际任务在后台异步完成。

您可以通过收听特定系统范围的广播来监控 WiFi 连接发生的情况：

```
<action android:name="android.net.conn.CONNECTIVITY_CHANGE"/>
<action android:name="android.net.wifi.STATE_CHANGE"/> 
```

[您可以在此处](https://stackoverflow.com/questions/5276032/connectivity-action-intent-recieved-twice-when-wifi-connected)找到有关此的更多信息- 检查 Torsten 的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T21:04:34.787

至于通过返回值检查密码是被接受还是被拒绝，我实际上并不知道，但是我能想到两种可能获得相同结果的“可能”替代策略吗？

不是 100% 确定，因为我以前没有这样做过，但是我想知道 Ping 请求者是否会起作用？

[http://developer.android.com/reference/android/net/wifi/WifiManager.html#pingSupplicant](http://developer.android.com/reference/android/net/wifi/WifiManager.html#pingSupplicant) ()

或者检查你现在是否有IP地址？

[http://developer.android.com/reference/android/net/wifi/WifiInfo.html](http://developer.android.com/reference/android/net/wifi/WifiInfo.html)

# java - Java Algoirthm 变量组合数（类似于位串算法）

> ID：12334397
> 
> 赞同：1
> 
> 时间：2012-09-08T20:52:08.893
> 
> 标签：java, combinations, bitstring

我有一个问题要尝试在 Java 中解决，但我无法弄清楚我需要遵循的算法。这个问题类似于位串问题（有多少个长度为 x 的位串），但增加了一些难度。无论如何，我什至不确定解决正常位串问题的算法。

所以这是我的实际问题：我有 5 个变量。比如说 QWXY Z。每个变量可以取 3 个值之一（所以就像位串可以取 1 或 0，但这可以取 0、1 或 2）。我需要生成这个“位串”的所有可能组合。

所以一个组合可能是 00000，另一个可能是 10002，另一个可能是 22222，等等。我需要打印出这个“位串”的所有组合

我真的很困惑如何解决这个问题，甚至想出一个像样的算法。

谢谢您的帮助！非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T21:07:45.787

尝试这个：

```
import java.util.Iterator;
import java.util.NoSuchElementException;

public class Generator implements Iterable<String> {

    private int len;
    public Generator(int len) {
        this.len = len;
    }

    public Iterator<String> iterator() {
        return new Itr(len);
    }

    private class Itr implements Iterator<String> {
        private int[] a;
        private boolean done;

        public Itr(int len) {
            a = new int[len];
            done = false;
        }

        @Override
        public String next() {
            if (done) throw new NoSuchElementException();
            String s = getString();
            step(a.length - 1);
            return s;
        }

        @Override
        public boolean hasNext() { return !done; }

        @Override
        public void remove() {
            throw new UnsupportedOperationException();
        }

        private void step(int index) {
            if (a[index] == 2) {
                if (index == 0) {
                    done = true;
                    return;
                }
                a[index] = 0;
                step(index - 1);
            } else
                a[index]++;
        }

        private String getString() {
            StringBuilder s = new StringBuilder();
            for (int i : a)
                s.append(i);
            return s.toString();
        }
    }

} 
```

然后你可以做这样的事情：

```
Generator g = new Generator(2 /* length of resulting strings */);
for (String s : g)
    System.out.println(s); 
```

输出：

> 00
> 10
> 20
> 01
> 11
> 21
> 02
> 12
> 22

基本上，我们在这里所做的只是以 3 为基数向上计数，直到达到`222...222`（在`2`实例化 a 时指定 s的数量`Generator`）。希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T21:41:34.307

你需要考虑它背后的*数学。**当您了解如何枚举*这些字符串时，事情会变得容易得多。这不仅会产生一种明显的方式来*生成*字符串，而且还允许您“随机访问”它们，即您还可以编写一个`get(int num)`将产生第`num`th 个元素的方法。

数学很简单，它只涉及模运算 ( ) 和除法，当你*自己*`%`弄清楚这一点时，它真的很值得。

 *作为一个简单的第一个准备工作，假设您有`n`十进制数字。

*   给定一个数字`x`，你如何得到第`n`th 位？
*   给定`n`数字，你如何得到数字`x`？

在你弄清楚这一点之后，试着从`10`数字中抽象出来。说，练习用二进制数数。然后在三进制中，这将是您的 3 位数解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T21:05:27.093

为此，您可以使用基数 3 计数到最大值（在您的示例中为 22222）。 BigInteger 类支持使用任意基数的输出和实例化。然而，BigInteger 类不支持 zerofill，这就是我自己添加它的原因。这是得到的解决方案：

```
public static void main( String[] args ) {
    System.out.println( new BitStrings().generateBitStrings( new BigInteger( "2222", 3 ) ) );
}

public List<String> generateBitStrings( BigInteger maxValue ) {
    final String format = "%0" + maxValue.toString( 3 ).length() + "d";
    BigInteger current = BigInteger.ZERO;
    final List<String> result = new ArrayList<String>( maxValue.intValue() );
    do {
        result.add( String.format( format, Long.valueOf( current.toString( 3 ) ) ) );
        current = current.add( BigInteger.ONE );
    } while(current.compareTo( maxValue ) <= 0);
    return result;
} 
```

输出：

```
[0000, 0001, 0002, 0010, 0011, 0012, 0020, 0021, 0022, 0100, 0101, 0102, 0110, 0111, 0112, 0120, 0121, 0122, 0200, 0201, 0202, 0210, 0211, 0212, 0220, 0221, 0222, 1000, 1001, 1002, 1010, 1011, 1012, 1020, 1021, 1022, 1100, 1101, 1102, 1110, 1111, 1112, 1120, 1121, 1122, 1200, 1201, 1202, 1210, 1211, 1212, 1220, 1221, 1222, 2000, 2001, 2002, 2010, 2011, 2012, 2020, 2021, 2022, 2100, 2101, 2102, 2110, 2111, 2112, 2120, 2121, 2122, 2200, 2201, 2202, 2210, 2211, 2212, 2220, 2221, 2222] 
```

希望这能回答你的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T21:54:03.807

这应该是一个相对容易解决的问题。

本质上，您只是在计算[*字符串*](http://en.wikipedia.org/wiki/String_%28computer_science%29#Formal_theory) *集合Σ^5*其中*Σ = { 0, 1, 2 }*。

```
static Iterable<String> strings(final int radix, final int digits) {
  return new Iterable<String>() {

    public Iterator<String> iterator() {
      return new Iterator<String>() {

        private final int hi = (int) Math.pow(radix, digits);
        private int cursor;

        public boolean hasNext() {
          return cursor < hi;
        }

        public String next() {
          int v = cursor++;
          int n = digits;
          final char[] buf = new char[n];
          while (n > 0) {
            buf[--n] = (char) (v % radix + '0');
            v /= radix;
          }
          return new String(buf);
        }

        public void remove() {
          throw new UnsupportedOperationException();
        }
      };
    }
  };
} 
```

...可以按如下方式使用：

```
for (final String val : strings(3, 5)) {
  System.out.println(val);
} 
```

基本上，我们生成区间*[0, 3^5)*中的数字，其中*3*是我们的基数，*5*是我们想要的字符串长度，然后将这些数字转换为[三进制](http://en.wikipedia.org/wiki/Ternary_numeral_system)形式。*0*变成*00000*，*3^5*变成*100000*。*

# php - 网站上的画廊

> ID：12334411
> 
> 赞同：-1
> 
> 时间：2012-09-08T20:53:35.940
> 
> 标签：php, jquery, image, gallery

我做了这个：[http ://tatertotz.org/gallery](http://tatertotz.org/gallery)

我希望底部的画廊加载目录中的所有图像，但画廊本身不会加载。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T21:02:23.793

只是猜测：您的图片超链接显示“ **gallerydata** /Season 1/100_1578.jpg”并且这有效（指向图像），但是图像尝试显示“ **data/gallery** /Season 1/100_1578.jpg”，它没有'不起作用，因为它不一样。

尝试修复路径，看看它是否有任何不同。希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T21:08:11.527

您应该使用 // 进行评论 - 它正在破坏您的脚本

```
$('#gallery').galleria({
   width: 700,
   height: 467 --I made heights match // <--
   // Uncaught SyntaxError: Unexpected identifier
}); 
```

# java - 为什么这个类会涉及到序列化

> ID：12334414
> 
> 赞同：1
> 
> 时间：2012-09-08T20:53:51.233
> 
> 标签：java, android

我收到以下序列化错误，我正在尝试读取我保存到文件中的对象

```
java.io.InvalidClassException: com.testGame.scoreCard; Incompatible class (SUID): com.testGame.scoreCard: static final long serialVersionUID =-5895378336422852901L; but expected com.testGame.scoreCard: static final long serialVersionUID =0L;
 at java.io.ObjectInputStream.verifyAndInit(ObjectInputStream.java:2376)
 at java.io.ObjectInputStream.readNewClassDesc(ObjectInputStream.java:1658)
 at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:683)
 at java.io.ObjectInputStream.readNewObject(ObjectInputStream.java:1799)
 at java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:787)
 at java.io.ObjectInputStream.readObject(ObjectInputStream.java:1999)
 at java.io.ObjectInputStream.readObject(ObjectInputStream.java:1956) 
```

但我不明白为什么 scoreCard 首先是序列化的？我正在编写和阅读的类（对象）是序列化的，不调用或使用 scoreCard 类。为什么它会抱怨那堂课？有没有办法查看为什么涉及此记分卡？（我正在使用 Eclipse 顺便说一句）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T02:30:53.670

您是否正在序列化一个内部类`ScoreCard`？它们具有对包含对象的秘密引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T21:04:32.013

会不会是您尝试恢复的课程间接依赖于记分卡，例如通过另一个课程？

要查看 Eclipse 中的依赖关系，您可以单击类名或方法名，然后按 Ctrl+Shift+G，它将显示使用类或方法的所有位置。

发现依赖关系的另一种方法是单击方法名称并按 Ctrl+Alt+H，它将显示调用图，您可以进一步发现。

# c# - 如何通过 C# 语言删除 Windows 7 dll 文件（在 System32 文件夹中）

> ID：12334420
> 
> 赞同：0
> 
> 时间：2012-09-08T20:55:01.013
> 
> 标签：c#, file, .net-4.0, delete-file, permission-denied

有时我需要删除或替换 Windows 7 的 system32 文件夹中的 dll 文件。
下面的代码总是有`Permission Denied Error`：

```
 if (File.Exists(@"C:\Windows\system32\mydll.dll"))
            {
                fileInfo.IsReadOnly = false;
                File.Delete(@"C:\Windows\system32\mydll.dll");
            } 
```

如何绕过此错误并替换 system32 文件夹中的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:58:32.543

```
if (File.Exists(@"C:\Windows\System32\mydll.dll"))
{
    new Process() { StartInfo = new ProcessStartInfo("cmd.exe", @"/k takeown /f C:\Windows\System32\mydll.dll && icacls C:\Windows\System32\mydll.dll /grant %username%:F") }.Start();
    File.Delete(@"C:\Windows\System32\mydll.dll");
} 
```

`shell32.dll`请注意，即使在获得所有权之后，您也无法删除系统 DLL ，但您可以重命名或移动它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T10:09:00.943

用户没有足够的权限从 Windows Vista 及更高版本的 c:\windows\system32 中删除文件。即使使用管理员帐户登录。UAC 制止了它。您*必须*要求提升以让用户知道您将要修补私人部分。这需要在你的程序中嵌入一个清单来触发 UAC 提示。 [这个答案](https://stackoverflow.com/questions/2818179/how-to-force-c-sharp-app-to-run-as-administrator-on-windows-7/2818776#2818776)告诉你如何。

# php - 从控制器传递数组以在 codeigniter 中查看

> ID：12334425
> 
> 赞同：2
> 
> 时间：2012-09-08T20:56:19.910
> 
> 标签：php, mysql, arrays, codeigniter

模型：

从 mySQL 中获取具有值的数据：`array['10','5','2']`并将其放入会话数据中

控制器：

将该会话数据放入数组中以传递给视图：

```
$fubar = array(
'ex1' => $this->session->userdata('ex1')
    );
$this->load->view('view', $fubar); 
```

看法：

```
echo $ex1; 
```

视图将吐出数组：`array['10','5','2']` 如何解析该数组以获取单个值（10、5 或 2）？例如，`echo $ex1['1'];`会吐出前 1 个字符：`ar`但我希望它返回值`5`

我想也许我可能没有在 mySQL 中正确存储数组，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:03:24.363

```
$fubar['ex1'] = $this->session->userdata('ex1');
$this->load->view('view', $fubar); 
```

现在试试

```
 $ex1[0];
    $ex1[1]; 
```

# c# - 实时搜索和替换

> ID：12334427
> 
> 赞同：0
> 
> 时间：2012-09-08T20:56:28.660
> 
> 标签：c#, string, replace

我有一个包含很多数字的文件，我想减少这些数字以构建一个新文件。首先，我使用 提取所有文本`File.ReadAllText`，然后从包含以逗号或空格分隔的数字的每一行中拆分并提取数字。扫描后，我用新的减少数字替换每个找到的数字的所有出现，但问题是这种方法容易出错，因为某些数字被替换多次

这是我正在使用的代码：

```
List<float> oPaths = new List<float>();
List<float> nPaths = new List<float>();
var far = File.ReadAllText("paths.js");
foreach(var s in far.Split('\n'))
{
    //if it starts with this that means there are some numbers
    if (s.StartsWith("\t\tpath:"))
    {
        var paths = s.Substring(10).Split(new[]{',', ' '});
        foreach(var n in paths)
        {
            float di;
            if(float.TryParse(n, out di))
            {
                if(oPaths.Contains(di)) break;
                oPaths.Add(di);
                nPaths.Add(di * 3/4);
            }
        }
    }
}

//second iteration to replace old numbers with new ones
var ns = far;
    for (int i = 0; i < oPaths.Count; i++)
    {
        var od = oPaths[i].ToString();
        var nd = nPaths[i].ToString();
        ns = ns.Replace(od, nd);
    }
    File.WriteAllText("npaths.js", ns); 
```

如您所见，上述方法是多余的，因为它不会实时替换字符串。也许我的脑袋已经满了，但我只是不知道该怎么做。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T22:04:30.810

我认为正则表达式可以在这里提供帮助

```
string text = File.ReadAllText(file);
string newtext = Regex.Replace(text, @"\b(([0-9]+)?\.)?[0-9]+\b", m =>
    {
        float f;
        if (float.TryParse(m.Value, NumberStyles.Float, CultureInfo.InvariantCulture, out f)) f *= 3.0f / 4;
        return f.ToString();
    });
File.WriteAllText(file, newtext); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T20:56:28.660

就在输入问题后，我意识到答案是逐个字符地迭代并相应地替换。这是我用来让它工作的代码：

```
string nfar = "";
var far = File.ReadAllText("paths.js");
bool neg = false;
string ccc = "";
for(int i = 0; i < far.Length; i++)
{
    char c = far[i];
    if (Char.IsDigit(c) || c == '.')
    {
        ccc += c;
        if (far[i + 1] == ' ' || far[i + 1] == ',')
        {
            ccc = neg ? "-" + ccc : ccc;
            float di;
            if (float.TryParse(ccc, out di))
            {
                nfar += (di*0.75f).ToString();
                ccc = "";
                neg = false;
            }
        }
    }
    else if (c == '-')
    {
        neg = true;
    }
    else
    {
        nfar += c;
    }
}
File.WriteAllText("nfile.js", nfar); 
```

欢迎评论和/或优化建议。

# bash - 如何将 bash 函数的参数扩展为一系列管道命令？

> ID：12334429
> 
> 赞同：1
> 
> 时间：2012-09-08T20:57:00.113
> 
> 标签：bash, unix, grep

我经常发现自己经常做这样的事情：

```
something | grep cat | grep bat | grep rat 
```

当我记得这三个词一定是在某个地方以某种顺序出现在`something`...的输出中时，我可以做这样的事情：

```
something | grep '.*cat.*bat.*rat.*' 
```

但这意味着排序（蝙蝠出现在猫之后）。因此，我正在考虑在我的环境中添加一个 bash 函数，称为`mgrep`：

```
mgrep cat bat rat 
```

进入

```
grep cat | grep bat | grep rat 
```

但我不太确定该怎么做（或者是否有替代方案？）。一种想法是对参数进行循环，如下所示：

```
while (($#)); do
    grep $1 some_thing > some_thing
    shift
done
cat some_thing 
```

其中 some_thing 可能是一些 fifo，就像`>(cmd)`在 bash 中那样，但我不确定。一个人将如何进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T21:18:52.800

我相信您*可以*通过在每一步重定向标准输入来一次生成一个命令。但是将管道生成为字符串并使用 eval 执行它更简单、更清晰，如下所示：

```
CMD="grep '$1' "  # consume the first argument
shift

for arg in "$@"   # Add the rest in a pipeline
do
  CMD="$CMD | grep '$arg'"
done
eval $CMD 
```

这将生成一个始终从标准输入读取的 grep 管道，就像在您的模型中一样。请注意，它保护引用参数中的空格，以便在您编写时它可以正常工作：

```
mgrep 'the cat' 'the bat' 'the rat' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T21:27:27.283

感谢亚历克西斯，这就是我所做的：

```
function mgrep() #grep multiple keywords
{
    CMD=''
    while (($#)); do
        CMD="$CMD grep \"$1\" | "
        shift
    done
    eval ${CMD%| }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T21:43:23.743

你可以写一个递归函数；我对基本情况不满意，但我想不出更好的情况。只需要调用来将标准输入传递给标准输出似乎是一种浪费`cat`，而 while 循环有点不雅：

```
mgrep () {
    local e=$1;
    # shift && grep "$e" | mgrep "$@" || while read -r; do echo "$REPLY"; done
    shift && grep "$e" | mgrep "$@" || cat

    # Maybe?
    # shift && grep "$e" | mgrep "$@" || echo "$(</dev/stdin)"
} 
```

# objective-c - 自定义 UIGestureRecognizer：选择器不接收 UIGestureRecognizerStateBegan

> ID：12334433
> 
> 赞同：4
> 
> 时间：2012-09-08T20:57:33.117
> 
> 标签：objective-c, ios, xcode, uigesturerecognizer

我正在实现自定义 UIGestureRecognizer。为简单起见，假设它识别由 >1 次触摸组成的手势。

这是手势.m：

```
#import "Gesture.h"
#import <UIKit/UIGestureRecognizerSubclass.h>

#define SHOW printf("%s %d %d %d\n", __FUNCTION__, self.state, touches.count, self.numberOfTouches)

@implementation Gesture

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
  SHOW;
  if (self.numberOfTouches==1) return;
  self.state = UIGestureRecognizerStateBegan;
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
  SHOW;
  if (self.numberOfTouches==1) return;
  self.state = UIGestureRecognizerStateChanged;
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
  SHOW;
  if (self.numberOfTouches==1) return;
  self.state = UIGestureRecognizerStateEnded;
}
@end 
```

这是一个选择器：

```
- (IBAction)handleGesture:(Gesture *)recognizer {
  printf("%s %d\n", __FUNCTION__, recognizer.state);
} 
```

这是一个输出：

```
-[Gesture touchesBegan:withEvent:] 0 1 1  // 1st touch began
-[Gesture touchesMoved:withEvent:] 0 1 1
-[Gesture touchesMoved:withEvent:] 0 1 1
-[Gesture touchesMoved:withEvent:] 0 1 1
-[Gesture touchesBegan:withEvent:] 0 1 2  // 2nd touch began
-[Gesture touchesMoved:withEvent:] 1 1 2  // Gesture.state==UIGestureRecognizerStateBegan but selector was not called
-[ViewController handleGesture:] 2        // UIGestureRecognizerStateChanged received.
-[Gesture touchesMoved:withEvent:] 2 2 2
-[ViewController handleGesture:] 2
-[Gesture touchesMoved:withEvent:] 2 2 2
-[ViewController handleGesture:] 2
-[Gesture touchesMoved:withEvent:] 2 2 2
-[ViewController handleGesture:] 3        // UIGestureRecognizerStateEnded received. 
```

为什么选择器不接收 UIGestureRecognizerStateBegan？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:21:24.543

这对我来说并不是特别明显，但规则似乎是：

*   通过发送给您的所有触摸`touchesBegan:...`随后都被视为属于您，除非并且直到您将状态设置为`UIGestureRecognizerStateFailed`，`UIGestureRecognizerStateEnded`或`UIGestureRecognizerStateCancelled`；
*   相反，如果您转换到，`UIGestureRecognizerStateBegan`则手势识别器会将其发布，然后在现在分配给您的触摸移动时**自动**生成。`UIGestureRecognizerStateChanged`

因此，您不应该`UIGestureRecognizerStateChanged`为自己设置 - 只需跟踪触摸并正确发布开始、结束、失败和取消。

在您的情况下，我认为您只需要删除`touchesMoved:...`.

（除此之外：iOS 5 和 6 的情况如此；在 4 下，行为稍微微妙一些。要在所有三个版本下工作，请使用结构，例如`if(self.state == UIGestureRecognizerStateBegan) self.state = UIGestureRecognizerStateChanged;`当您知道您的属性已更改时）

# scala - 试图避免scala中的可变因素..这是正确的方法吗？

> ID：12334436
> 
> 赞同：1
> 
> 时间：2012-09-08T20:57:43.187
> 
> 标签：scala, variables, immutability

我试图尽可能避免可变变量，但有时感觉太难了，我不想以极其复杂的代码结束

尽管如此，我还是找到了这种方法，但这确实感觉像是在作弊

我正在解析一个查询，我发现找到一个字段！值，我想将它翻译成字段：<>值，然后继续处理，所以我提出了这段代码以避免可变，或者至少有他们被禁锢...

```
val (operator, negated) = {
  var operator = ConditionOperator.toConditionOperator(parsedOperator)
  var negated = parsedNegated == "!"
  // field!value => field notEqual value
  if (negated && operator == ConditionOperator.Unknown) {
    negated = false
    operator = ConditionOperator.NotEqual
  }
  (operator, negated)
} 
```

这是正确的方法吗？？？还是有更惯用（和清晰！）的方式来实现这种事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T21:05:51.323

这确实是作弊，因为`var`它是可变的！

纠正这个问题的方法是直接返回 if 语句的结果：

```
val (operator, negated) = {
  val operator = ConditionOperator.toConditionOperator(parsedOperator)
  val negated = parsedNegated == "!"
  // field!value => field notEqual value
  if (negated && operator == ConditionOperator.Unknown)
    (ConditionOperator.NotEqual, false)
  else
    (operator, negated)
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T21:06:07.083

典型的做法是没有临时变量，因为你并不真的需要它们。

```
val operator = ConditionOperator.toConditionOperator(parsedOperator)
val negated = parsedNegated == "!"
if (!negated || operator != ConditionOperator.Unknown) (operator, negated)
else (ConditionOperator.NotEqual, false) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T21:29:35.593

那么你可以通过取`negated`出来简化逻辑。然后，模式匹配比你以前的更干净。

```
val negated = parsedNegated == "!"
val operator = ConditionOperator.toConditionOperator(parsedOperator) match {
  case op if negated && op == ConditionOperator.Unknown => ConditionOperator.NotEqual
  case op => op
} 
```

# django - 使用 Django oauth2app 进行国际化？

> ID：12334439
> 
> 赞同：0
> 
> 时间：2012-09-08T20:58:31.360
> 
> 标签：django, internationalization, oauth-2.0

我有一个 Django 网站，我在其中使用 oauth2app 示例网站中的一些表单。例如，用户注册表单继承自 Django UserCreationForm。

我想自定义出现在模板化网页中的一些字符串。首先，我研究了 Django 中的国际化机制。

但我无法让字符串从默认值更改。阅读 Django 文档后，这是我所做的：

*   在 Django conf/global_settings.py 中，我已将 LANGUAGE_CODE 中的语言更改为“fr-fr”（法语，只是为了笑）
*   我已将 LOCALE_PATHS 更改为包含 full-path-to/contrib/auth/locale
*   在 oauth2app 示例站点模板中，我添加了 {% load i18n %}
*   Django 使用 Apaches FastCGI 运行，所以我重新启动了相关的 Python 进程

我省略了哪一步？有没有办法调试问题？

我对模板进行了许多其他更改，包括使用 CSS 自定义它们的外观；我看到了这些变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T02:50:54.493

在我的应用程序的 settings.py 中而不是在 global-settings.py 中更改语言可以解决问题。

# c# - 用户名的 ASP.NET MVC 正则表达式无法正常工作。或转换正则表达式-> JS

> ID：12334440
> 
> 赞同：0
> 
> 时间：2012-09-08T20:58:32.080
> 
> 标签：c#, regex, asp.net-mvc-3, c#-4.0, data-annotations

我已经从一个站点添加了一个正则表达式来验证用户名，它应该可以工作，但它在编译时给出了一些错误。请看图片，然后我用谷歌搜索并了解到很少有像 '\w' 这样的字符不起作用，因为 js 不支持它。现在我不知道如何转换它，任何人都可以帮助将它转换为可使用 ASP.NET MVC 数据注释。

```
[RegularExpression("^([a-zA-Z])[a-zA-Z_-]*[\w_-]*[\S]$|^([a-zA-Z])[0-9_-]*[\S]$|^[a-zA-Z]*[\S]$")] 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T21:00:23.827

通过在开头引号前添加 @ 符号使您的字符串成为文字。否则，您需要转义字符串包含的所有反斜杠。这将使像这样的正则表达式的可读性更差。

```
[RegularExpression(@"^([a-zA-Z])[a-zA-Z_-]*[\w_-]*[\S]$|^([a-zA-Z])[0-9_-]*[\S]$|^[a-zA-Z]*[\S]$")] 
```

> 文字字符串使您可以使用 **反斜杠**或双引号等特殊字符，而无需使用特殊代码或转义字符。这使得文字字符串非常适合自然包含许多反斜杠的文件路径。要创建文字字符串，请在字符串的开头引号之前添加 at 符号 @

# python - Python 的标准库中是否有 linspace 函数？

> ID：12334442
> 
> 赞同：8
> 
> 时间：2012-09-08T20:59:56.170
> 
> 标签：python, matlab

`linspace`Python在其标准库中是否有类似 matlab 的函数？

如果没有，是否有一种简单的方法可以在不安装外部软件包的情况下实现它？

这是用 matlab 术语快速简单地[定义 linspace](http://www.mathworks.com/help/matlab/ref/linspace.html)。

**笔记**

我不需要链接定义的“矢量结果”，列表就可以了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-08T21:02:26.770

不，它没有。您可以自己编写（这并不难），但如果您使用 Python 来实现 matlab 的某些功能，那么您肯定要`numpy`安装`numpy.linspace`.

您可能会发现[为 Matlab 用户提供的 NumPy](http://www.scipy.org/NumPy_for_Matlab_Users)信息。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-08T21:02:38.797

实现这一点的最简单方法是生成器函数：

```
from __future__ import division

def linspace(start, stop, n):
    if n == 1:
        yield stop
        return
    h = (stop - start) / (n - 1)
    for i in range(n):
        yield start + h * i 
```

示例用法：

```
>>> list(linspace(1, 3, 5))
[1.0, 1.5, 2.0, 2.5, 3.0] 
```

也就是说，您绝对应该考虑使用 NumPy，它提供了`numpy.linspace()`方便地处理数值数组的函数和许多其他特性。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-08T21:08:24.420

您可以定义一个函数来执行此操作：

```
def linspace(a, b, n=100):
    if n < 2:
        return b
    diff = (float(b) - a)/(n - 1)
    return [diff * i + a  for i in range(n)] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-19T17:53:36.097

只要间距 > 1，这就是 Python 等效于以下 MATLAB 函数调用：`linspace(start,stop,spacing)`

```
start = 5
stop = 6
spacing = int(11)
linspace = [start + float(x)/(spacing-1)*(stop-start) for x in range(spacing)] 
```

# php - 无法连接到远程主机上的 mysql 数据库

> ID：12334443
> 
> 赞同：0
> 
> 时间：2012-09-08T21:00:06.537
> 
> 标签：php, mysql

我不确定我使用的术语是否正确，因此如果需要，请要求澄清:)。

无论如何，我通过 HostEasySolutions（服务器 A）托管。它带有一个 MySql 数据库，使用 PHPMyAdmin 作为前端。在服务器 A 上，我添加了一些 PHP 文件来访问数据库，它工作正常。

如果我通过 DreamHost（服务器 B）将 php 文件复制到我的另一台服务器，我无法连接到数据库。我得到错误：`Can't connect to MySQL server on 'combinedsystems.ca' (110)`

在服务器 A 上的 cPanel 中，我将服务器 B 的 IP 添加到远程数据库访问主机中，我还添加了通配符“%”，只是为了看看我是否可以让它工作......但仍然找不到服务器。

我不确定发生了什么，据我所知，没有防火墙。

对我来说唯一突出的是，如果我去服务器 A 的 PHPmyAdmin，它会说`Server: Localhost via UNIX socket`，而对于服务器 B 的 PHPMyAdmin，它会说：`Server: mysql.pdem.info via TCP/IP`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T21:03:09.373

大多数（全部？）托管公司都在防火墙上关闭了端口 3306。

你需要做什么：

*   在数据库中添加远程数据库访问
*   编辑 my.cnf 以监听所有接口。默认mysql只监听localhost

大多数时候你都不走运！即使没有防火墙（会非常不安全），您也无法访问 my.cnf

# c# - 通过 FTP 上传大文件的异常

> ID：12334444
> 
> 赞同：1
> 
> 时间：2012-09-08T21:00:07.740
> 
> 标签：c#, ftpwebrequest

我正在制作一个 FTP 客户端并尝试将文件上传到服务器（~300 MB），但是当传输了近 100 MB 的文件时出现以下错误：

```
The underlying connection was closed: An unexpected error occurred on a receive. 
```

这是我的代码：

```
private void UploadFile(string filepath, string filename)
    {
        try
        {
            FtpWebRequest ftp = (FtpWebRequest)FtpWebRequest.Create("ftp://" + server + "/" + filename);

            //ftp.KeepAlive = false;
            //ftp.Timeout = 1000000;
            //ftp.UsePassive = true;
            //ftp.ReadWriteTimeout = 100000;

            Path.GetFileName(filepath);
            ftp.Credentials = new NetworkCredential(username, password);
            ftp.Method = WebRequestMethods.Ftp.UploadFile;

            FileStream stream = File.OpenRead(filepath);
            byte[] buffer = new byte[stream.Length];
            stream.Read(buffer, 0, buffer.Length);
            stream.Close();

            Stream requestStream = ftp.GetRequestStream();
            //requestStream.ReadTimeout = 1000000;
            //requestStream.WriteTimeout = 1000000;
            requestStream.Write(buffer, 0, buffer.Length);
            requestStream.Close();         

            FtpWebResponse response = (FtpWebResponse)ftp.GetResponse();
            response.Close();
        }
        catch (Exception ex) { CreateRunLogFile(ex.Message); }

        CreateRunLogFile("Uploading of file " + filepath + " ended.");
    } 
```

我尝试使用，

```
ftp.KeepAlive = false;
ftp.Timeout = 1000000;
ftp.UsePassive = true; 
```

但这没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-15T21:46:11.120

检查目标防火墙设置。如果是运行 vsFTPd 的 LINUX 服务器，则服务器 ftp 服务在配置文件中有 FILESIZE 和 TIMEOUT 设置。

请务必在调整 FILESIZE 和 TIMEOUT 设置后重新启动 vsFTPd 服务。

# php - 在 PHP 数组中查找匹配项，然后组合数组而不进行任何覆盖

> ID：12334445
> 
> 赞同：0
> 
> 时间：2012-09-08T21:00:22.873
> 
> 标签：php, arrays, multidimensional-array

我有一个数组，我似乎无法弄清楚如何查看每个数组项并检查 a 是否`[Product Name]`与另一个数组项匹配`[Product Name]`？

*以下是样本数据。* **例如**，对于or之类的东西`array[0]`，`array[1]`两者都有相同`[Product Name]`的 of但不同的值。我希望能够找到这样的匹配项并以某种方式将它们组合到一个数组中，但**不会**覆盖任何内容。`test``[Variant Name]``[Variant Full Stock]`

 **```
Array (
    [0] => Array (
            [Product Name] => test
            [Variant Name] => Default
            [Variant SKU] => 
            [Variant In Stock] => 1
            [Variant Full Stock] => 1
            [id] => 0
        )
    [1] => Array (
            [Product Name] => test
            [Variant Name] => testingVar
            [Variant SKU] => 
            [Variant In Stock] => 1
            [Variant Full Stock] => 2
            [id] => 1
        )
    [2] => Array (
            [Product Name] => another test
            [Variant Name] => Default
            [Variant SKU] => 
            [Variant In Stock] => 1
            [Variant Full Stock] => 1
            [id] => 2
        )
) 
```

理想情况下，我想将上述数组转换为一个新数组，该数组将输出如下内容：

```
Array (
    [0] => Array (
        [0] => Array (
            [Product Name] => test
            [Variant Name] => Default
            [Variant SKU] => 
            [Variant In Stock] => 1
            [Variant Full Stock] => 1
            [id] => 0
        )
        [1] => Array (
            [Product Name] => test
            [Variant Name] => testingVar
            [Variant SKU] => 
            [Variant In Stock] => 1
            [Variant Full Stock] => 2
            [id] => 1
        )
    )
    [1] => Array (
        [Product Name] => another test
        [Variant Name] => Default
        [Variant SKU] => 
        [Variant In Stock] => 1
        [Variant Full Stock] => 1
        [id] => 2
    )
) 
```

**有什么解决办法吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T21:14:06.170

您需要做的就是迭代数组并分组`Product Name`

```
$data =
    array(
        array(
            "Product Name" => "test",
            "Variant Name" => "Default",
            "Variant SKU" => "",
            "Variant In Stock" => 1,
            "Variant Full Stock" => 1,
            "id" => 0
        ),
        array(
            "Product Name" => "test",
            "Variant Name" => "testingVar",
            "Variant SKU" => "",
            "Variant In Stock" => 1,
            "Variant Full Stock" => 2,
            "id" => 1
        ),
        array(
            "Product Name" => "another test",
            "Variant Name" => "testingVar",
            "Variant SKU" => "",
            "Variant In Stock" => 1,
            "Variant Full Stock" => 2,
            "id" => 2
        ),
    );

$result = array();

foreach($data as $item) {
    $key = $item["Product Name"];
    $result[$key][] = $item;
} 
```

`$result`看起来像这样：

```
array(2) {
  ["test"]=>
  array(2) {
    [0]=>
    array(6) {
      ["Product Name"]=>
      string(4) "test"
      ["Variant Name"]=>
      string(7) "Default"
      ["Variant SKU"]=>
      string(0) ""
      ["Variant In Stock"]=>
      int(1)
      ["Variant Full Stock"]=>
      int(1)
      ["id"]=>
      int(0)
    }
    [1]=>
    array(6) {
      ["Product Name"]=>
      string(4) "test"
      ["Variant Name"]=>
      string(10) "testingVar"
      ["Variant SKU"]=>
      string(0) ""
      ["Variant In Stock"]=>
      int(1)
      ["Variant Full Stock"]=>
      int(2)
      ["id"]=>
      int(1)
    }
  }
  ["another test"]=>
  array(1) {
    [0]=>
    array(6) {
      ["Product Name"]=>
      string(12) "another test"
      ["Variant Name"]=>
      string(10) "testingVar"
      ["Variant SKU"]=>
      string(0) ""
      ["Variant In Stock"]=>
      int(1)
      ["Variant Full Stock"]=>
      int(2)
      ["id"]=>
      int(2)
    }
  }
} 
```

不完全是您的想法，但也许更有用一点？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T21:42:53.853

尽管您已经有了答案，但我开始编写一些代码，所以我想完成它。

```
$newar=array();
$k=0;
while($ar[0])
{
    $keys=array();
    foreach($ar as $k2=>$v2)if($ar[0]['Product Name']==$ar[$k2]['Product Name']&&$k2!=0)$keys[]=$k2;
    $newar[$k]=array($ar[0]);
    unset($ar[0]);
    foreach($keys as $x)
    {
        $newar[$k][]=$ar[$x];
        unset($ar[$x]);
    }
    ++$k;
    $ar=array_values($ar);
}
$ar=$newar; 
```

例如，这个：

```
Array
(
    [0] => Array
        (
            [Product Name] => test
        )

    [1] => Array
        (
            [Product Name] => test
        )

    [2] => Array
        (
            [Product Name] => another test
        )

) 
```

会变成：

```
Array
(
    [0] => Array
        (
            [0] => Array
                (
                    [Product Name] => test
                )

            [1] => Array
                (
                    [Product Name] => test
                )

        )

    [1] => Array
        (
            [0] => Array
                (
                    [Product Name] => another test
                )

        )

) 
```**

# java - 资源包 - 任何愿意解释的人？

> ID：12334451
> 
> 赞同：1
> 
> 时间：2012-09-08T21:01:03.340
> 
> 标签：java, localization, resourcebundle

再一次，我为我的项目提出了一些要求，而且我几乎觉得我是 Java 的新手……无论如何，最近有人告诉我 ResourceBundle。我真正的问题是我一般无法理解该类的 Oracle 文档，并且我遇到了一些奇怪的编译时错误。
首先，我制作了三个 Bundles mwb `extends java.util.ResourceBundle`，第二个`mwb_el extends mwb`和第三个`mwb_en extends mwb`。我做了一个`contents`类型的变量并写了`Object[][]`一个方法！然后我进入每个班级并更改每行中第二个字段的值（不是键，值）。不，我被困在我无法真正了解如何处理获取价值的地步。我检查了一些教程和示例，但我更加困惑。我需要有人向我解释：`getContents()``return cotents;`

1.  如何使我在类中创建和初始化的 mwb 对象获得我想要的语言环境。

2.  我如何获得一定的价值。我尝试了 getObject()、getString() 甚至 getContents() 甚至覆盖了 handleGetObject() 都无济于事。

    提前致谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T21:21:42.733

属性文件应该在键/值对中包含消息。

例如

```
键1=消息1
键2=消息2

```

如果您有一个名为“MessagesBundle_en_US.properties”的资源文件，您可以按如下方式加载它。

```
Locale locale = new Locale("en", "US");
ResourceBundle messages = ResourceBundle.getBundle("MessagesBundle", locale); 
```

然后`messages.getString("key1")`应该返回“message1”。

# php - var 充满了 object 突然 null，发生了什么？

> ID：12334452
> 
> 赞同：1
> 
> 时间：2012-09-08T21:01:07.727
> 
> 标签：php, forms, symfony, fatal-error

我在 symfony 2.0 中构建这个表单，由于某种原因，当我从数据库中检索一个对象并将它放入一个对象时，当我想保存它时它就消失了，所以我收到以下错误：

```
Catchable Fatal Error: Argument 1 passed to MelvinLoos\CMS\CoreBundle\Entity\Page::setParent()
must be an instance of MelvinLoos\CMS\CoreBundle\Entity\Page, null given, 
called in vendor\symfony\src\Symfony\Component\Form\Util\PropertyPath.php on line 347
and defined in src\MelvinLoos\CMS\CoreBundle\Entity\Page.php line 233 
```

我的代码：

```
public function popupChildAction($parentid)
{
    $entity  = new Page();
    $entity->setWebsite($this->getWebsite());

    $parent = $this->getDoctrine()
    ->getRepository('MelvinLoosCMSCoreBundle:Page')
    ->findOneById($parentid);

    if (!$parent)
    {
        throw $this->createNotFoundException('No parent found with given id: "' . $parentid . '"');
    }
    $entity->setParent($parent);

    $entity->setCreatedBy($this->getUser());
    //$entity->setPageType();
    $form   = $this->createForm(new PageChildType(), $entity);
    $request = $this->getRequest();
    $form->bindRequest($request);

    if ($form->isValid()) {

        $em = $this->getDoctrine()->getEntityManager();
        $em->persist($entity);
        $em->flush();

        return $this->redirect($this->generateUrl('page_show', array('id' => $entity->getId())));

    }

    return $this->render('MelvinLoosCMSCoreBundle:Page:new_popup.html.twig', array(
            'entity' => $entity,
            'form'   => $form->createView(),
            'parent' => $parent
    ));
} 
```

正如你所看到的，我输入了一个 if 语句来检查 $parent 是否已填充，并且我还尝试了一个 var_dump 来仔细检查，它显然是用一个对象填充的。但是由于某种原因，当我调用实体对象的 setParent() 函数时，它会用 null 填充它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:47:36.813

完全忘记了我仍然有这个问题......无论如何我解决了我的问题，仍然不知道为什么我得到了这个错误，但我用一个非常简单的解决方案解决了它。

我没有为孩子设置父母，而是相反，为父母设置了孩子。我的代码如下（其中还有一些无关紧要的新代码，因为我前段时间修复了它）。

```
public function popupChildAction($parentid)
{
    $parent = $this->getDoctrine()
    ->getRepository('MelvinLoosCMSCoreBundle:Page')
    ->findOneById($parentid);

    if (!$parent)
    {
        throw $this->createNotFoundException('No parent found with given id: "' . $parentid . '"');
    }
    $entity  = new Page();
    $entity->setWebsite($this->getWebsite());
    $entity->setCreatedBy($this->getUser());
    $form   = $this->createForm(new PageChildType(), $entity);
    $request = $this->getRequest();
    $form->bindRequest($request);

    if ($form->isValid()) {
        $em = $this->getDoctrine()->getEntityManager();
        $parent->setChildren($entity);
        $em->persist($entity);
        $em->flush();

        return $this->redirect($this->generateUrl('page_show', array('id' => $entity->getId())));

    }

    return $this->render('MelvinLoosCMSCoreBundle:Page:new_popup.html.twig', array(
            'entity' => $entity,
            'form'   => $form->createView(),
            'parent' => $parent
    ));
} 
```

就像我说的那样，有更新的代码是无关紧要的，但它的全部内容是它的一部分， `$parent->setChildren($entity);`现在它可以工作了......希望这对某人有所帮助！感谢所有提供意见的人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T13:03:38.043

Melvin，您可以检查表单是否已提交并从表单中获取您的实体。
你可以这样试试吗？

```
 $form   = $this->createForm(new PageChildType(), $entity);
    $request = $this->getRequest();

    if ($request->getMethod() == 'POST') {
        $form->bindRequest($request);

        if ($form->isValid()) {
            $entity = $form->getData();
            $em = $this->getDoctrine()->getEntityManager();
            $em->persist($entity);
            $em->flush();

            return $this->redirect($this->generateUrl('page_show', array('id' => $entity->getId())));
        }
    } 
```

# java - Javadoc 不为继承的方法生成注释

> ID：12334460
> 
> 赞同：2
> 
> 时间：2012-09-08T21:02:49.857
> 
> 标签：java, ant, javadoc

我正在使用 Ant 创建我的文档。我用于`{@inheritDoc}`诸如`equals`、`hashCode`和之类的方法`toString`。但是，没有描述这些方法。看截图：

![在此处输入图像描述](../Images/f4656b2742eb0bed90c2731fd28866fd.png)

这是我的蚂蚁脚本：

```
<project name="javadoc" default="javadoc.tool">
  <description>
    Provides JavaDoc. 
  </description>

  <import file="build.xml" />
  <property name="javadoc.dir" location="${build.dir}/javadoc" />
  <property name="javadoc.failonerror" value="false" />

  <target name="javadoc.tool" depends="compile" description="Generate JavaDoc.">
    <mkdir dir="${javadoc.dir}" />
    <javadoc classpathref="compile.classpath"
             sourcepath="${src.dir}"
             destdir="${javadoc.dir}"
             author="true"
             version="true"
             use="true"
             package="true"
             overview="${src.dir}/overview.html"
             windowtitle="${system.name} API"
             doctitle="${system.name} API"
             failonerror="${javadoc.failonerror}"
             excludepackagenames="junit"
             linksource="true" />
  </target>
</project> 
```

我怎样才能获得在文档中显示的继承方法的描述？您的建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T21:29:27.160

我认为，如果您尝试从标准 Java 类继承文档，那么您需要在源路径中包含 JDK `src.zip`。*（您可能还需要解压缩它；我不记得了。）*

也就是说，如果您的方法“出乎意料”，那么无论如何您都应该编写自己的文档。如果他们不这样做，IMO 你真的*不需要*他们的描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T20:37:52.660

我知道这是一个旧线程，但是使用 javadoc Ant 任务链接到外部 API 的正确方法是使用嵌套`<link>`元素。例如，要链接到 Java 7 API：

```
<javadoc ... >
  ...
  <link href="http://docs.oracle.com/javase/7/docs/api/" />
</javadoc> 
```

请阅读[相关的 Ant 文档](http://ant.apache.org/manual/Tasks/javadoc.html)以获取所有详细信息。

# c# - LINQ to Twitter 设置用户帐户图像 c#

> ID：12334461
> 
> 赞同：1
> 
> 时间：2012-09-08T21:02:52.827
> 
> 标签：c#, xaml, data-binding, windows-8, linq-to-twitter

我正在尝试获取用户 profileImageURl 并将其绑定到图像。我有以下 C# 代码：

```
namespace IIVVYTwitter
{
    public sealed partial class MainPage : Page
    {
        public MainPage()
        {
            this.InitializeComponent();
            DataContext = new ViewModel(this);
        }
    }

    class ViewModel : INotifyPropertyChanged
    {

        public User AccountImageUrl { get; set; }

        readonly Page page;

        public ViewModel(Page page)
        {
            this.page = page;
            LoadAccount = new TwitterCommand<object>(LoadAccountHolder);
        }

        public TwitterCommand<object> LoadAccount { get; set; }

        void LoadAccountHolder(object obj)
        {
            PinAuthorizer auth =
            new PinAuthorizer
            {
                Credentials = new LocalDataCredentials()
            };

            if (auth == null || !auth.IsAuthorized)
            {
                page.Frame.Navigate(typeof(oAuth));
                return;
            }

            var twitterCtx = new TwitterContext(auth);

            var accounts =
                from acct in twitterCtx.Account
                where acct.Type == AccountType.VerifyCredentials
                select acct;

            Account account = accounts.SingleOrDefault();
            LinqToTwitter.User user = account.User;

            new User
                 {
                     AccountImageUrl = user.ProfileImageUrl
                 };

            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("AccountImageUrl"));
            }
        }

    }
} 
```

与此 XAML 链接：

```
<Page
    x:Class="IIVVYTwitter.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:IIVVYTwitter"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

<Grid>
    <Button Command="{Binding LoadAccount}">
         <Border>
              <Image x:Name="accountPicture" Source="{Binding AccountImageUrl}" />
         </Border>
    </Button>
</Grid>
</Page> 
```

当我通过单击按钮运行命令时，代码运行但图像的源没有更新。

我很确定我绑定源数据的方式是有缺陷的。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T23:52:14.220

我没有看到您在`DataContext`任何地方设置页面。如果没有正确定义`DataContext`，您正在使用的 Bindings 无法解析为任何数据对象。一个简单的示例是在`OnNavigatedTo`方法或页面的构造函数中，您需要执行以下操作：

```
this.DataContext = new ViewModel() 
```

或类似的东西。根据您希望如何处理视图模型创建、生命周期等，有不同的方法可以连接数据上下文，但希望这能让您走上正确的道路。在您的代码中，您还可以调用`page.DataContext = this;`构造函数。

更新：您还需要在触发 PropertyChanged 事件时修复代码。你有

```
if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("ImageUrl"));
            } 
```

应该

```
if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("AccountImageUrl"));
            } 
```

请注意为属性名称传递的字符串的更改。您正在为不存在的属性触发更改事件。

更新 #2：您正在从 AccountImageUrl 返回一种用户。您应该返回实际的 http url 字符串，而不是自定义类型。如果 User 有一个指向 http Url 的属性，您可以将 Xaml 绑定更新为 AccountImageUrl.PropertyThatContainsRealUrl

更新#3：在你的代码中，你有

```
new User
                 {
                     AccountImageUrl = user.ProfileImageUrl
                 }; 
```

这是在新的用户对象上设置 AccountImageUrl。但是，您绑定到 ViewModel 的 AccountImageUrl。在某些时候，您必须将 AccountImageURl 设置为图像 url 字符串并在 AccountImageURL 上引发 PropertyChanged。因此，无论是在创建新用户之前还是之后，您都应该说`this.AccountImageUrl = user.ProfileImageUrl.` 希望我仍在关注您的代码以及您在评论中所做的更改。

# ruby - 在 ruby 中转换哈希对象

> ID：12334465
> 
> 赞同：0
> 
> 时间：2012-09-08T21:03:35.653
> 
> 标签：ruby, arrays, hash

很想知道在 ruby​​ 中执行此操作的最佳方法。我已经做到了，但认为我没有做得最好

我有一个哈希对象如下

```
{2=>{:name=>"Somename"}, 3=>{:last_name=>"Something"}} 
```

我想去

```
{:name=>"Somename",:last_name=>"Something"} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T21:17:08.180

```
input_hash.values.reduce { |h,v| h.merge(v) } 
```

更新：我认为我的答案是最短的，但我错了，来自**tokland**的答案：

```
input_hash.values.reduce(:merge) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T21:22:26.917

## 使用 Splat 运算符

在这种特殊情况下，您可以使用 splat 运算符将哈希值提取到哈希数组中。例如：

```
my_hash = {2=>{:name=>"Somename"}, 3=>{:last_name=>"Something"}}
[*my_hash.values]
# => [{:name=>"Somename"}, {:last_name=>"Something"}] 
```

# java - Java - 在没有 BC 的情况下以编程方式签署证书

> ID：12334468
> 
> 赞同：6
> 
> 时间：2012-09-08T21:04:11.463
> 
> 标签：java, csr

我正在努力使用允许我在不使用 keytool 的情况下从 java 代码生成和签署证书的代码。此外，由于依赖问题和不兼容性，我无法使用 bouncycastle 库。

到目前为止，我找到了使用给定参数生成 CSR 的工作代码，并且它似乎可以工作（至少`openssl`工具验证它确实是一个有效的 CSR）我找到的代码在这里：

[http://www.journaldev.com/223/generating-a-certificate-signing-request-using-java-api](http://www.journaldev.com/223/generating-a-certificate-signing-request-using-java-api)

由于`X500Signer`jdk7 中缺少该类，因此可以进行简单的修改。

如何使用我自己的 CA 签署此 CSR（我在 openssl 生成的文本文件中有 CA 密钥和证书）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-10T19:52:00.847

我也在寻找一种方法来做到这一点，但我没有找到任何示例，所以我最终改为查看 keytool 源代码。（可以在这里找到：http: [//www.docjar.com/html/api/sun/security/tools/KeyTool.java.html](http://www.docjar.com/html/api/sun/security/tools/KeyTool.java.html)）

以下是如何进行签名的示例：

```
private static final String SIGNATURE_ALGORITHM = "SHA1WITHRSA";
private static final long VALIDITY_DAYS = 14L;

public static byte[] sign(PKCS10 csr, X509CertImpl signerCert, PrivateKey signerPrivKey) throws CertificateException, IOException, InvalidKeyException, SignatureException {

    /*
     * The code below is partly taken from the KeyTool class in OpenJDK7.
     */

    X509CertInfo signerCertInfo = (X509CertInfo) signerCert.get(X509CertImpl.NAME + "." + X509CertImpl.INFO);
    X500Name issuer = (X500Name) signerCertInfo.get(X509CertInfo.SUBJECT + "." + CertificateSubjectName.DN_NAME);

    /*
     * Set the certificate's validity:
     * From now and for VALIDITY_DAYS days 
     */
    Date firstDate = new Date();
    Date lastDate = new Date();
    lastDate.setTime(firstDate.getTime() + VALIDITY_DAYS * 1000L * 24L * 60L * 60L);
    CertificateValidity interval = new CertificateValidity(firstDate, lastDate);

    /*
     * Initialize the signature object
     */
    Signature signature;
    try {
        signature = Signature.getInstance(SIGNATURE_ALGORITHM);
    } catch (NoSuchAlgorithmException e) {
        throw new RuntimeException(e);
    }
    signature.initSign(signerPrivKey);

    /*
     * Add the certificate information to a container object
     */
    X509CertInfo certInfo = new X509CertInfo();
    certInfo.set(X509CertInfo.VALIDITY, interval);
    certInfo.set(X509CertInfo.SERIAL_NUMBER, new CertificateSerialNumber(new Random().nextInt() & 0x7fffffff));
    certInfo.set(X509CertInfo.VERSION, new CertificateVersion(CertificateVersion.V3));
    try {
        certInfo.set(X509CertInfo.ALGORITHM_ID, new CertificateAlgorithmId(AlgorithmId.get(SIGNATURE_ALGORITHM)));
    } catch (NoSuchAlgorithmException e) {
        throw new RuntimeException(e);
    }
    certInfo.set(X509CertInfo.ISSUER, new CertificateIssuerName(issuer));
    certInfo.set(X509CertInfo.KEY, new CertificateX509Key(csr.getSubjectPublicKeyInfo()));
    certInfo.set(X509CertInfo.SUBJECT, new CertificateSubjectName(csr.getSubjectName()));

    /*
     * Add x509v3 extensions to the container
     */
    CertificateExtensions extensions = new CertificateExtensions();

    // Example extension.
    // See KeyTool source for more.
    boolean[] keyUsagePolicies = new boolean[9];
    keyUsagePolicies[0] = true; // Digital Signature
    keyUsagePolicies[2] = true; // Key encipherment
    KeyUsageExtension kue = new KeyUsageExtension(keyUsagePolicies);
    byte[] keyUsageValue = new DerValue(DerValue.tag_OctetString, kue.getExtensionValue()).toByteArray();
    extensions.set(KeyUsageExtension.NAME, new Extension(
            kue.getExtensionId(),
            true, // Critical
            keyUsageValue));

    /*
     * Create the certificate and sign it
     */
    X509CertImpl cert = new X509CertImpl(certInfo);
    try {
        cert.sign(signerPrivKey, SIGNATURE_ALGORITHM);
    } catch (NoSuchAlgorithmException e) {
        throw new RuntimeException(e);
    } catch (NoSuchProviderException e) {
        throw new RuntimeException(e);
    }

    /*
     * Return the signed certificate as PEM-encoded bytes
     */
    ByteOutputStream bos = new ByteOutputStream();
    PrintStream out = new PrintStream(bos);
    BASE64Encoder encoder = new BASE64Encoder();
    out.println(X509Factory.BEGIN_CERT);
    encoder.encodeBuffer(cert.getEncoded(), out);
    out.println(X509Factory.END_CERT);
    out.flush();
    return bos.getBytes();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T15:56:33.720

在 java 8 中，缺少 PKCS10 类。因此，不是通过 PKCS10 csr，而是通过 PublicKey 密钥和 X500Name 名称
将第 47/48 行的 csr.getSubjectPublicKeyInfo 和 csr.getSubjectName 替换为密钥和名称

# scala - 是否有理由避免返回语句

> ID：12334471
> 
> 赞同：22
> 
> 时间：2012-09-08T21:04:39.413
> 
> 标签：scala, conditional, return

有时我会看到大量的 Scala 代码，其中包含多个嵌套级别的条件和匹配，使用显式返回退出函数会更清晰。

避免那些显式的返回语句有什么好处吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-09T01:01:10.963

A`return` *可以*通过抛出异常来实现，因此它*可能*比声明方法结果的标准方式有一定的开销。（感谢 Kim Stebel 指出并非总是如此，甚至可能不是经常如此。）

此外，闭包上的 a 将从*定义闭包*`return`的方法返回，而不仅仅是从闭包本身返回。这使得它既有用，又无用从闭包返回结果。

 *上面的一个例子：

```
def find[T](seq: Seq[T], predicate: T => Boolean): Option[T] = {
  seq foreach { elem =>
    if (predicate(elem)) return Some(elem) // returns from find
  }
  None
} 
```

如果你还是不明白，那是实现并作为参数传递给的匿名对象的`elem => if (predicate(elem)) return Some(elem)`方法。删除它，它不会工作。`apply``Function1``foreach``return`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T21:18:57.493

一个缺点是无法推断返回类型。其他一切都是风格问题。对您来说似乎不清楚或令人困惑的事情对其他人来说可能是完全“自然的”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T22:29:47.360

显式返回会破坏控制流。例如，如果您有如下声明

```
if(isAuth(user)) {
 return getProfile(user)
}
else {
 return None
} 
```

控制结构（如果）没有完成，这就是我认为它更令人困惑的原因。对我来说，这类似于一个 break 语句。此外，Scalas 的“一切都是价值”原则减少了使用显式返回的需要，从而减少了使用仅对 def 语句有用的关键字的人：

```
// start 
def someString:String = return "somestring"

// def without return 
def someString = "somestring"

// after refactoring
val someString = "somestring" 
```

您会看到必须添加类型注释，并且在将 def 更改为 val 时需要删除返回。*

# scala - 用于 Scala 的简单简洁的 HTTP 客户端库

> ID：12334476
> 
> 赞同：76
> 
> 时间：2012-09-08T21:05:02.513
> 
> 标签：scala, http

我需要一个成熟的 HTTP 客户端库，它对 scala 来说是惯用的，使用简洁，语义简单。我查看了 Apache HTTP 和 Scala Dispatch 以及许多承诺惯用 Scala 包装的新库。Apache HTTP 客户端确实需要冗长，而 Dispatch 很容易混淆。

什么是适合 Scala 使用的 HTTP 客户端？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-08T21:44:52.953

我最近开始使用[Dispatch](https://dispatchhttp.org/Dispatch.html)，有点神秘（很棒的一般介绍，严重缺乏基于场景/用例的详细文档）。Dispatch 0.9.1 是 Ning 的[Async Http Client](http://asynchttpclient.github.com/async-http-client/apidocs/overview-summary.html)的 Scala 包装器；要完全了解正在发生的事情，需要将自己介绍给那个图书馆。在实践中，我真正需要查看的唯一东西是[RequestBuilder——](http://asynchttpclient.github.com/async-http-client/apidocs/com/ning/http/client/RequestBuilder.html)其他一切都很好地融入了我对 HTTP 的理解。

我给 0.9 版本一个坚实的大拇指（到目前为止！）非常简单地完成工作......一旦你超越了最初的学习曲线。

Dispatch 的 Http“构建器”是不可变的，并且似乎在线程环境中运行良好。虽然我在文档中找不到任何说明它是线程安全的；对来源的一般阅读表明它是。

请注意[RequestBuilder](http://asynchttpclient.github.com/async-http-client/apidocs/com/ning/http/client/RequestBuilder.html)是可变的，因此不是线程安全的。

以下是我发现有用的一些附加链接：

*   我找不到 0.9.* 版本的 ScalaDoc 链接，所以我浏览了[0.9.* 版本的源代码](https://github.com/dispatch/reboot)；

*   [ScalaDoc 0.8 版本](http://databinder.net/dispatch-doc/#dispatch.$colon$div$)；与0.9*大不相同*的野兽（今天）。

*   [运营商的“定期”表](http://www.flotsam.nl/dispatch-periodic-table.html)，也与 0.8 相关。

*   较早的[0.8 版“dispatch-classic”文档](http://dispatch-classic.databinder.net/Dispatch.html)帮助我了解了他们如何使用 url 构建器，并提供了一些关于如何将事物联系在一起的提示，这些提示确实可以延续到 0.9。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-11-22T10:52:16.303

我对[可用的大多数主要 HTTP 客户端库进行了比较](https://www.implicitdef.com/2015/11/19/comparing-scala-http-client-libraries.html)

Dispatch 和其他一些库**不再维护**。目前唯一严重的是**spray-client**和**Play！WS**。

**spray-client**的语法有点晦涩难懂。**play-ws**很容易使用：

(build.sbt)

```
libraryDependencies += "com.typesafe.play" %% "play-ws" % "2.4.3" 
```

（基本用法）

```
val wsClient = NingWSClient()
wsClient
  .url("http://wwww.something.com")
  .get()
  .map { wsResponse =>
    // read the response
} 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-05-30T20:39:07.187

这里的聚会有点晚了，但我对[spray-client](https://github.com/spray/spray/wiki/spray-client)印象深刻。

它有一个很好的 DSL 用于构建请求，支持同步和异步执行，以及各种（非）编组类型（JSON、XML、表单）。[它也与Akka](http://akka.io/)配合得很好。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-02-28T18:15:14.583

~~二~~在最初回复这篇文章六年后，我会有不同的答案。

我一直在使用[akka-http](https://doc.akka.io/docs/akka-http/current/client-side/index.html?language=scala)，这是 spray 和 akka 团队之间的合作。它由 Lightbend 提供支持，与 akka 异步环境紧密结合……它是完成这项工作的正确工具。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-09-08T16:36:11.097

[sttp](https://github.com/softwaremill/sttp)是我们一直在等待的 Scala HTTP 库！

它有一个流畅的 DSL 用于形成和执行请求（来自其 README 的代码示例）：

```
val request = sttp
  .cookie("session", "*!@#!@!$")
  .body(file) // of type java.io.File
  .put(uri"http://httpbin.org/put")
  .auth.basic("me", "1234")
  .header("Custom-Header", "Custom-Value")
  .response(asByteArray) 
```

它通过可插入后端支持同步、异步和流式调用，包括 Akka-HTTP（以前的 Spray）和古老的 AsyncHttpClient（Netty）：

```
implicit val sttpHandler = AsyncHttpClientFutureHandler()
val futureFirstResponse: Future[Response[String]] = request.send() 
```

它支持`scala.concurrent.Future`、`scalaz.concurrent.Task`、`monix.eval.Task`和`cats.effect.IO`- 所有主要的 Scala IO monad 库。

此外，它还有一些额外的技巧：

*   它具有请求和响应的案例类表示（尽管它没有例如强类型标头）： [https ://github.com/softwaremill/sttp/blob/master/core/src/main/scala /com/softwaremill/sttp/RequestT.scala](https://github.com/softwaremill/sttp/blob/master/core/src/main/scala/com/softwaremill/sttp/RequestT.scala) [https://github.com/softwaremill/sttp/blob/master/core/src/main/scala/com/softwaremill/sttp/Response.scala](https://github.com/softwaremill/sttp/blob/master/core/src/main/scala/com/softwaremill/sttp/Response.scala)

*   它提供了一个[URI 字符串插值器](https://softwaremill.com/sttp-streaming-uri-interpolator/)：

`val test = "chrabąszcz majowy" val testUri: Uri = uri"http://httpbin.org/get?bug=$test"`

*   它支持请求主体/响应的编码器/解码器，例如通过 Circe 的 JSON：

`import com.softwaremill.sttp.circe._ val response: Either[io.circe.Error, Response] = sttp .post(uri"...") .body(requestPayload) .response(asJson[Response]) .send()`

最后，它由 softwaremill 的可靠人员维护，并且有很好的[文档](https://softwaremill.com/introducing-sttp-the-scala-http-client)。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2012-09-09T07:31:30.683

在与 Apache 客户端有过一些不愉快的经历后，我开始编写自己的客户端。内置的 HttpURLConnection 被广泛认为是错误的。但这不是我的经验。事实上，情况正好相反，Apache 客户端的线程模型有些问题。自 Java6（或 5？）以来，HttpURLConnection 提供了高效的 HTTP1.1 连接，其中内置了 keep-alive 等基本功能，并且它可以轻松处理并发使用。

因此，为了弥补 HttpURLConnection 提供的 API 带来的不便，我开始着手在 Scala 中编写一个新的 API，作为一个开源项目。它只是 HttpURLConnection 的包装器，但与 HttpURLConnection 不同，它旨在易于使用。与 Apache 客户端不同，它应该很容易融入现有项目。与 Dispatch 不同，它应该易于学习。

它被称为蜜蜂客户端

*   网站： http: [//www.bigbeeconsultants.co.uk/bee-client](http://www.bigbeeconsultants.co.uk/bee-client)
*   API 文档： http: [//www.bigbeeconsultants.co.uk/docs/bee-client/latest.html](http://www.bigbeeconsultants.co.uk/docs/bee-client/latest.html)

我为无耻的插头道歉。:)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-09-08T22:00:16.927

除了 Dispatch 外，没有太多内容。[scalaz](https://github.com/scalaz/scalaz/tree/master/http)曾尝试构建功能性 http 客户端。但是它已经过时了一段时间，在 scalaz7 分支中没有它的版本。此外，playframework 中还有一个有用的 ning async-http-client[包装器。](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/libs/ws/WS.scala)在那里你可以做这样的电话：

```
WS.url("http://example.com/feed").get()
WS.url("http://example.com/item").post("content") 
```

如果你不使用 play，你可以使用这个 API 作为灵感！在您的项目中并且不喜欢 Dispatch API。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-07-17T04:42:29.273

**喷**

你真的应该考虑使用[Spray](http://spray.io/documentation/1.2.1/spray-client/)。在我看来，它有一些复杂的语法，但如果你的目标是构建一个高性能的 http 客户端，它仍然非常有用。使用 Spray 的主要优点是它基于[akka](http://akka.io/) actor 库，具有极强的可扩展性和强大的功能。`conf`您可以通过仅更改文件将您的 http 客户端扩展到多台机器。

*此外，几个月前 Spray 加入了 Typesafe，据我了解，它将成为基本 akka 发行版的一部分。[证明](http://www.typesafe.com/blog/typesafe-gets-sprayed)*

**播放2**

另一种选择是 Play2 WS 库使用 ( [doc](http://www.playframework.com/documentation/2.3.x/ScalaWS) )。据我所知，它还没有从 Play 发行版中分离出来，但由于它非常简单，值得花一些时间附加整个 Play 框架来获得那部分。为其提供配置存在一些问题，因此这对于丢弃和用例来说并不是很好。然而，我们在一些非基于 Play 的项目中使用了它，一切都很好。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-03-16T17:40:58.203

ScalaJ-Http 是一个非常简单的同步 http 客户端

[https://github.com/scalaj/scalaj-http](https://github.com/scalaj/scalaj-http)

如果您需要一个没有仪式的准系统 Scala 客户端，我会推荐它。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-01-15T16:06:55.177

很惊讶这里没有人提到 finagle。使用起来超级简单：

```
import com.twitter.finagle.{Http, Service}
import com.twitter.finagle.http
import com.twitter.util.{Await, Future}

object Client extends App {
  val client: Service[http.Request, http.Response] = Http.newService("www.scala-lang.org:80")
  val request = http.Request(http.Method.Get, "/")
  request.host = "www.scala-lang.org"
  val response: Future[http.Response] = client(request)
  Await.result(response.onSuccess { rep: http.Response =>
    println("GET success: " + rep)
  })
} 
```

有关更多详细信息，请参阅快速入门指南：[https ://twitter.github.io/finagle/guide/Quickstart.html](https://twitter.github.io/finagle/guide/Quickstart.html)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-06-01T19:31:40.410

我使用过 Dispatch、Spray Client 和 Play WS Client Library……它们都不是简单的使用或配置。所以我创建了一个更简单的 HTTP 客户端库，它可以让您在简单的单行中执行所有经典的 HTTP 请求。

看一个例子：

```
import cirrus.clients.BasicHTTP.GET

import scala.concurrent.Await
import scala.concurrent.duration._

object MinimalExample extends App {

  val html = Await.result(Cirrus(GET("https://www.google.co.uk")), 3 seconds)

  println(html)
} 
```

...产生...

```
<!doctype html><html itemscope="" itemtype="http://schema.org/WebPage" lang="en-GB">...</html> 
```

该库称为 Cirrus，可通过 Maven Central 获得

```
libraryDependencies += "com.github.godis" % "cirrus_2.11" % "1.4.1" 
```

文档在 GitHub 上可用

```
https://github.com/Godis/Cirrus 
```

# php - 使用 PHP 列表或分解函数拆分全名

> ID：12334481
> 
> 赞同：1
> 
> 时间：2012-09-08T21:05:31.143
> 
> 标签：php, string, explode

我正在尝试使用简单的 HTML DOM 拆分我从网页中提取的名称，而 list 和 explode 函数并没有起到作用。我想要做的就是取一个名字 {firstname middle(optional) lastname} 并将它们拆分。中间名只出现在一些名字上，如果我能处理好，那将是一个奖励。

这是代码：

```
 <?php

    $data = new simple_html_dom();  
    $data->load_file("http://www.ratemyprofessors.com/ShowRatings.jsp?tid=861228");
    $profName= $data->find("//*[@id=profName]", 0);
    $profName = strip_tags($profName);
    echo "Full Name: " . $profName = trim($profName);
    list($first, $last) = explode(' ', "$profName ");
    echo "first name: " .  $first;
    echo "last name: " . $last;
?> 
```

我的输出内容如下：

```
Full Name: Jennifer Aaker
firstname: Jennifer Aaker
lastname: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T21:14:17.077

尝试：

```
list($first, $last) = explode("&nbsp;", $profName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T17:01:35.917

这是一个可以解决问题的简单函数。

```
function first_last($s) {
    /* assume first name is followed by a whitespace character. take everything after for last. middle initial will be returned as part of last. */
    $pos = strpos($s,' ');
    if ($pos == FALSE) { // if space is not found... call if first name
        return array($s,''); 
    }
    $first = substr($s, 0 , $pos);
    $last = substr($s,$pos + 1);    
    return array($first,$last);
}

// test
$s2 = 'john stewart';
list($first,$last) = first_last($s2); 
```

# vba - 将数据从 Excel 电子表格传输到 Visual Basic

> ID：12334482
> 
> 赞同：0
> 
> 时间：2012-09-08T21:05:35.417
> 
> 标签：vba, excel, transfer

嗨，我在尝试以数组的形式将数据从 Excel 电子表格传输到 Visual Basic 时遇到问题，任何人都知道这样做的任何合理方法。我在网上进行了广泛搜索，但仍然找不到关于如何编码的好教程.

简单的分步说明和解释将不胜感激，因为我熟悉面向对象编程的某些部分，但我从未以这种方式传输数据。

最终，我想将这些数据传输到一个面向对象的表中，并添加一些按钮和函数

为任何帮助的家伙干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:57:42.653

最简单的方法是自定义以下代码：

```
examplerange = workbooks("Workbook 1").worksheets("Sheet 1").range("A1:B17") 
```

其中`Workbook 1`是您正在使用的工作簿的名称（减去扩展名，例如“.xlsx”），`Sheet 1`是该范围所在的工作表的名称，并且`A1:B17`是您希望导入的范围。

这会创建一个`Variant`效率低下的数组，但这是将数据导入 VBA 的一种简单方法，如果您不处理大量数据，则可以接受。

一旦您更加熟悉，您将能够分离上面代码中的元素并遍历动态范围以及能够导入字符串/整数/布尔数组以减少内存使用。

希望这就是你要找的。

# python - Kivy：SoundLoader 和加载多个文件，但不是“双重加载”

> ID：12334486
> 
> 赞同：0
> 
> 时间：2012-09-08T21:05:51.313
> 
> 标签：python, audio, loading, kivy

我想通过 SoundLoader 模块在 kivy 中加载多个声音文件 (*.ogg)。这些文件从 300kB 到 700kB 大。

发生的情况是：前几个文件被加载，然后它跳过剩余的文件。

有没有更好（也许更快）的方式来加载文件？是否可以将已加载的文件“链接”到另一个 Button 实例，而不复制它（或损害它的文本）？

这是有问题的代码：

```
 #Getting filenames:

    for line in rawsongs:
        if ',' in line:
            items = line.split(', ')

            #Creating instances of Buttons, which control (play and stop)
            #the soundfiles:

            btn = AudioButton(
            text=(items[1]+' - '+items[2]), font_size=50, 
            sound = SoundLoader.load(items[2]+'.ogg'), 
            size_hint_y = None, height = 240, group = 'audio')

            #adding the Button to the Layout:
            grid.add_widget(btn)
        else:
            pass 
```

提前致谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:30:20.720

在与来自#kivy 的人进行了一些 IRC 之后，我被建议使用 kivy - 实习生“缓存管理器” [缓存管理器文档@kivy.org](http://kivy.org/docs/api-kivy.cache.html) ，所以更新后的代码是这样的：

```
 #NEW: Registering the Cache

    Cache.register('songcache', timeout = 100)

    #Getting filenames:

    for line in rawsongs:
        if ',' in line:
            items = line.split(', ')

            #NEW: Check if the file is already cached:

            if Cache.get('songcache', items[2]) == None:

                #Setting up the button:

                btn = AudioButton(
                    text=(items[1]+' - '+items[2]), font_size=50, 
                    sound = SoundLoader.load(items[2]+'.ogg'), 
                    size_hint_y = None, height = 240, group = 'metro')

                #NEW: Adding the instance of the soundfile to the cache:

                Cache.append('songcache', items[2], btn.sound)

                grid.add_widget(btn)
            else:
                btn = AudioButton(
                    text=(items[1]+' - '+items[2]), font_size=50, 

                    #NEW: Linking the previously Cached instance with the new Button

                    sound = Cache.get('songcache', items[2]), 
                    size_hint_y = None, height = 240, group = 'metro')
                grid.add_widget(btn)           
        else:
            pass 
```

因此，感谢#kivy 的帮助！

# html - 向右拖动鼠标时页面向左移动

> ID：12334488
> 
> 赞同：0
> 
> 时间：2012-09-08T21:06:05.510
> 
> 标签：html, css

我有一个布局，我遇到的问题是如果我选择任何东西，即使只是单击并按住背景并向右拖动鼠标，整个页面都会向左移动，除了背景。

我已经尝试了所有我能想到的东西，并且想知道是否有人知道它可能是什么？我认为这可能是一个宽度问题，但我已经全部检查过了，找不到任何东西。

# c# - 如何避免 Epson EPOS 上的缓冲区溢出（通过串口）？

> ID：12334494
> 
> 赞同：3
> 
> 时间：2012-09-08T21:07:06.273
> 
> 标签：c#, escaping, serial-port, epson

当我在 Epson TM H6000 或 TM-88II 上打印大量数据时，打印机缓冲区已满，并非所有数据都将被打印。我使用 c# 和 SerialPort 将数据（通过 ESC）发送到打印机（文档： http: [//support.epostraders.co.uk/support-files/documents/3/ajj-TM-H6000_DeveloperGuide.pdf](http://support.epostraders.co.uk/support-files/documents/3/ajj-TM-H6000_DeveloperGuide.pdf)）。

有什么办法可以避免缓冲区溢出？或者我应该减少数据重量并发送更多的小包？

提前致谢。

问候亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T00:38:26.047

这是来自您链接的文档：

> 当接收缓冲区的剩余空间下降到 16 字节时，打印机状态变为“缓冲区已满”，并保持“缓冲区已满”，直到接收缓冲区中的空间增加到 26 字节......接收缓冲区中的剩余空间为 0 字节

...

> 传输每行数据后，使用 GS I 或 GS​​ r 检查打印机状态，并使用 4KB 接收缓冲区。发送一行数据，以免接收缓冲区变满。

这听起来像是对您的问题的完美建议。

# bash - bash——在运行之间存储变量的更好方法？

> ID：12334495
> 
> 赞同：23
> 
> 时间：2012-09-08T21:07:08.493
> 
> 标签：bash, variables, text, storage

我制作了一个使用 crontab 每小时运行的 bash 脚本，我需要存储一个变量，以便下次运行时可以访问它。该脚本每次运行时都会更改变量，因此我无法对其进行硬编码。现在我正在将其写入 txt 文件，然后将其读回。还有比这更好的方法吗？我阅读txt文件的方式是我在这里找到的，我不明白，而且有点笨拙。没有内置命令吗？无论如何，这是适用的代码，更改了一些变量以使其更易于阅读。

```
while read x; do
  var=$x
done < var.txt

# Do some stuff, change var to a new value

echo $var > var.txt 
```

变量只是一个整数，所以文本文件感觉有点过头了。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-08T21:18:44.497

没有必要使用`var`; `x`将在当前 shell 的范围内。交替，

```
read var < var.txt
# do stuff with var
echo $var > var.txt 
```

* * *

我建议使用简单的文本文件来存储变量。但是，自修改脚本有一个（非常值得怀疑的）选项。**仅供娱乐！**

```
#!/bin/bash

read val < <( tail -n 1 "$0" )

(( val++ ))
echo "$val"

tmp=$(mktemp /tmp/XXXXXXX)
sed '$s/.*/'$val'/' "$0" > "$tmp"
mv "$tmp" "$0"

exit
0 
```

关键是让倒数第二行是退出命令，所以它之后什么都不会执行。最后一行是您要保留的变量值。当脚本运行时，它`read`从它自己的最后一行开始。在退出之前，它使用`sed`将自身的副本写入临时文件，最后一行修改为持久值的当前值。然后我们用临时文件覆盖当前脚本（假设我们有权限这样做）。

不过实话说？不要这样做。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-18T12:42:19.643

我知道这是一个老问题。但是，我仍然决定在这里发布我的解决方案，希望它可能对来这里寻找在会话之间序列化环境变量的方法的其他人有所帮助。

简单的方法就是将“var_name=var_value”写入一个文件，比如“./environ”。然后在后续会话中使用“source ./envrion”。例如：

```
echo "var1=$var1" > ./environ 
```

保留变量所有属性的更全面（和优雅？）的方法是使用“declare -p”：

```
declare -p var1 var2 > ./environ
# NOTE: no '$' before var1, var2 
```

稍后，在“source ./envrion”之后，您可以获得 var1 var2，除了其值之外，所有属性都已恢复。这意味着它可以处理数组、整数等。

但是，对“declare -p xx”的一个警告：如果将“source ./environ”包装到一个函数中，那么所有源变量在函数中都是可见的，因为“declare”默认情况下将变量声明为本地变量。为了避免这种情况，您可以“源”出任何函数（或在“主”函数中）或修改 ./environ 以在声明后添加“-g”（这使相应的变量成为全局变量）。例如：

```
sed -i 's/^declare\( -g\)*/declare -g/' ./environ
# "\( -g\)?" ensure no duplication of "-g" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-08T21:20:39.790

1-您可以简化脚本，因为您只有一个变量

```
var=`cat var.txt`
# Do some stuff, change var to a new value   
echo $var > var.txt 
```

2-您可以将变量存储在环境中：

```
export var

# Do some stuff, change var to a new value 
```

但是您需要提示它`. script.ksh`（开头的点）。但它不应该有“退出”，我不确定这是否可以在 cron 中工作......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-23T11:38:25.017

根据您的用例，这可能有点矫枉过正，但如果您需要存储和跟踪多个变量（或来自多个脚本），那么请考虑使用具有命令行界面 ( ) 的[sqlite](https://www.sqlite.org/)[**`sqlite3`**](https://www.servermania.com/kb/articles/install-sqlite/)，它通常预装在 linux/ macOS系统。

```
DB='storage.db'

KEY1='eurusd'
VAL1=1.19011

KEY2='gbpeur'
VAL2=1.16829

# create table if not present (ONLY NEEDS TO BE RUN ONCE)
QUERY_CREATE="CREATE TABLE IF NOT EXISTS records (id INTEGER PRIMARY KEY, name TEXT NOT NULL, value NUMERIC NOT NULL);"
sqlite3 "$DB" "$QUERY_CREATE"

# write a key-value pair to database (creates a new row each time)
QUERY_INSERT="INSERT INTO records(name, value) VALUES ('${KEY1}', '${VAL1}');"
sqlite3 "$DB" "$QUERY_INSERT"

# write a key-value pair to database (REPLACE previous value!)
# using 42 as a hard-coded row ID
QUERY_REPLACE="REPLACE INTO records(id, name, value) VALUES (42, '${KEY2}', '${VAL2}');"
sqlite3 "$DB" "$QUERY_REPLACE"

# read value from database
QUERY_SELECT1="SELECT value FROM records WHERE name='${KEY1}';"
QUERY_SELECT2="SELECT value FROM records WHERE name='${KEY2}';"

echo "***** $KEY1 *****"
# store db value in a variable
db_value1=$(sqlite3 "$DB" "$QUERY_SELECT1")
echo $db_value1
## OUTPUT: 1.19011

echo "***** $KEY2 *****"
db_value2=$(sqlite3 "$DB" "$QUERY_SELECT2")
echo $db_value2
## OUTPUT: 1.16829 
```

> 注意：如果您没有明确传递行 ID，则每次脚本调用都会添加一个新行。`REPLACE INTO`要始终使用显式 ID更新到同一行（例如`42`，可以在`REPLACE INTO...`语句中看到）。多次运行脚本以查看`KEY1`和的输出有何不同`KEY2`。

* * *

> 注意 2：在此示例中，值是数字，如果您需要存储字符串，请使用 in`CREATE TABLE`而不是`NUMERIC`use `TEXT`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-22T17:54:00.327

要在运行之间存储多个变量，我考虑的一个解决方案是将它们以格式保存`my_var=my_value`在一个单独的文件中。

然后，我包括两个函数来设置和检索变量

1.  在存储变量及其值的文件中：

我们称这个文件**为 context.dat**

```
# Here I store the variables and their values
my_var_x=1
my_var_y=boo
my_var_z=0 
```

2.  在实际脚本中：

让我们调用文件**multiple_run.sh**

```
context=./context.dat

function update_variables(){
    # update the variable context
    source $context
}

function set_variable(){
    # store variable
    variable=$1 #variable to be set
    value=$2    # value to give to the value
    # modify the file storing the value
    sed -i 's/'${variable}'.*/'${variable}'='${value}'/' $context
}

##################
# Test code
echo var_x
update_variables
echo var_x
# do something
set_variable var_x 2
echo $var_x 
```

这是其中一种方法。使用这种方法，您需要先创建存储文件，并为每个变量创建每一行。此外，context.dat 是任何其他脚本都可以先验访问的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-19T05:34:48.747

刚刚发现了这个很棒的简单项目（一个重写的 fork）。一个简单而强大的 bash 键/值对存储。看起来很完美。在幕后，每个数据库是一个目录，每个键是一个文件，值在文件中。

[https://github.com/imyller/kv-sh](https://github.com/imyller/kv-sh)

*   小型键值数据库
*   可配置的数据库目录（默认`~/.kv-sh`：）
*   通过导入函数使用`$ . ./kv-sh`
*   完整的数据库转储/恢复
*   支持二级只读默认数据库

```
 . ./kv-sh                  # import kv-sh functions (use default database directory; see
                                 configuration environment variables for available options)
    kvset <key> <value>        # assign value to key
    kvget <key>                # get value of key
    kvdel <key>                # delete key
    kvexists <key>             # check if key exists
    kvkeys {-l|-d|-a}          # list all keys (-l local only, -d default only, -a all (default))
    kvlist {-a}                # list all key/value pairs (-a all keys, including default)
    kvdump {-a}                # database dump (-a all keys, including default)
    kvimport                   # database import (overwrite)
    kvrestore                  # database restore (clear and restore)
    kvclear                    # clear database 
```

**默认数据库**

`kv-sh`支持辅助只读默认数据库。如果启用，如果未指定本地值，则返回默认值数据库中的键值对。

通过设置启用默认数据库`DB_DEFAULTS_DIR`：

```
DB_DIR="/tmp/.kv" DB_DEFAULTS_DIR="/tmp/.kv-default" . ./kv-sh 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-11-01T09:51:29.413

我最终做了以下事情。更喜欢一个文件中的变量，但这会使代码略微膨胀。这个阅读的东西是如何工作的？您可以将多个变量存储在一个单独的文件中，例如 variables.txt，然后将您的主程序存储在 main.sh 中。不过，编写单独的脚本来加载和保存变量可能会更好。

对于变量.txt：

```
A=0
B=0
C=0 
```

对于 main.sh：

```
#!/bin/bash

#reload variables
A=`cat ./variables.txt|grep "A="|cut -d"=" -f2`
B=`cat ./variables.txt|grep "B="|cut -d"=" -f2`
C=`cat ./variables.txt|grep "C="|cut -d"=" -f2`

#print variables
printf "$A\n"
printf "$B\n"
printf "$C\n"

#update variables
A=$((($A+1)))
B=$((($B+2)))
C=$((($C+3)))

#save variables to file
#for A
 #remove entry for A
 cat ./variables.txt|grep -v "A=">>./tmp.txt
 #save entry for A
 printf "A=$A\n">>./tmp.txt
 #move tmp.txt to variables.txt
mv ./tmp.txt ./variables.txt

#for B
 #remove entry for B
 cat ./variables.txt|grep -v "B=">>./tmp.txt
 #save entry for B
 printf "B=$B\n">>./tmp.txt
 #move tmp.txt to variables.txt
 mv ./tmp.txt ./variables.txt

#for C
 #remove entry for C
 cat ./variables.txt|grep -v "C=">>./tmp.txt
 #save entry for C
 printf "C=$C\n">>./tmp.txt
 #move tmp.txt to variables.txt
 mv ./tmp.txt ./variables.txt 
```

# c - C中带有指针数组的结构

> ID：12334497
> 
> 赞同：-1
> 
> 时间：2012-09-08T21:07:14.163
> 
> 标签：c, sdl

这有什么问题？我可以在 C 的结构中拥有指向 SDL_Surfaces 的指针数组吗？

```
typedef struct {
    int next_wheel;
    int pos_X;
    int pos_Y;
    int front_wheel_pos_X;
    int front_wheel_pos_Y;
    int velocity;
    int rear_wheel_pos_X;
    int rear_wheel_pos_Y;
    SDL_Surface* body;
    SDL_Surface* rear_wheel[9];
    SDL_Surface* front_wheel[9];
} mars_rover;

...

mars_rover* init_rover() {
    mars_rover* rover = (mars_rover*)malloc(sizeof(mars_rover) + sizeof(SDL_Surface) * 19);
    rover->body = load_image("Graphics//rover.png", ds_info);
    rover->front_wheel[0] = load_image("Graphics//wheel//wheel0.png", ds_info);
    ...

    return rover;
}

int main() {
    mars_rover* rover = init_rover();
...
} 
```

**编辑：**添加了我的加载图像功能。

```
SDL_Surface *load_image( const char* filename , SDL_VideoInfo* ds_info) {

    SDL_Surface* image = 0;
    SDL_Surface* converted_surface = 0;
    image = IMG_Load(filename);

    if(image) {
        converted_surface = SDL_DisplayFormatAlpha(image);
        SDL_FreeSurface(image);
    }

    return converted_surface;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T21:36:14.413

可以，但需要分别为每个指针分配分配的内存。所以而不是：

```
mars_rover* rover = (mars_rover*)malloc(sizeof(mars_rover) + sizeof(SDL_Surface) * 19); 
```

你应该有：

```
mars_rover* rover = malloc(sizeof(mars_rover));
rover->body = malloc(sizeof(SDL_Surface));
for (i = 0; i < 9; ++i) {
    rover->rear_wheel[i] = malloc(sizeof(SDL_Surface));
    rover->front_wheel[i] = malloc(sizeof(SDL_Surface));
} 
```

有两个注意事项：

1.  您需要检查每个分配的返回值
2.  清理时需要释放每个分配

# php - 如何存储唯一但与数据库相关的数据点

> ID：12334499
> 
> 赞同：2
> 
> 时间：2012-09-08T21:07:31.283
> 
> 标签：php, mysql, database

我正在开发一个小型 PHP/Javascript 地图应用程序，它基本上只是从 MySQL 数据库表中提取一堆位置名称和坐标点并将它们添加到 HTML 画布中。它应该代表一个角色在正在进行的协作故事中访问的位置，所以我希望地图能够在任何给定时间检索角色在地图上的位置，并用不同的图标显示它。

最明显的解决方案——因为角色，就像地图位置一样，有一个名字和坐标——似乎只是将角色作为他们自己的行包含在位置表中，并且让地图代码识别他们的唯一信息和以不同的方式显示它们。但是由于角色本身并不是一个位置，因此将它们存储在“位置”表中似乎很奇怪。不过，仅为这一行创建一个全新的表“字符”似乎有点过头了。

所以我想我更一般的问题是 PHP/MySQL 处理这样的独特数据的好方法是什么，它与现有表相关但不够紧密。我是否将这些数据保存在文本文件中并使用 PHP 更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:43:08.280

拥有一个只有一行的表并没有什么特别“奇怪”的地方。事实上，使用数据库存储您的一些数据并使用文本文件存储其他数据可能会有点奇怪。

如果您出于任何原因需要该信息，拥有一张表格还可以让您随时间跟踪角色位置。（最好跟踪它而不使用它，而不是需要它而不一直跟踪它。）

如果字符的位置是在现场计算的并且不需要持久化，那么您可以简单地以编程方式将其添加到数据库的结果中，并且它对数据库和视图都是完全透明的。但如果它确实需要被持久化，一张表可能是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T22:41:12.860

您应该有一个单独的表来存放字符位置。. . 随着时间的推移。它将具有以下列：

*   字符编号
*   地点
*   日期/时间戳

最终，您可能希望拥有多个可以随时间显示其位置的角色。你可能有非字符；在这种情况下，您需要更改表的名称。

位置和角色位置之间存在很大差异。位置是静态的，至少在定义后是这样。字符位置是时间相关的。他们是一个独立的实体，最好有自己的桌子。

# iphone - iphone iOS的日历源代码

> ID：12334500
> 
> 赞同：-3
> 
> 时间：2012-09-08T21:07:42.490
> 
> 标签：iphone, ios, image, background, calendar

我正在寻找一些示例代码来创建一个像这样的非常简单的日历

![在此处输入图像描述](../Images/cd5af5adf6802e7a029c6f44b7784691.png)

但我什么也找不到……只喜欢带有约会的默认 iphone 议程……你能帮我提供一些链接吗？

非常感谢！M。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T06:40:05.430

您应该尝试从搜索中实现本机 kal 日历源代码。这真的很容易

日历的实现，而且它的界面类似于 iPhone 默认的日历视图。

# .net - XPath 用于在之后选择兄弟姐妹

> ID：12334502
> 
> 赞同：0
> 
> 时间：2012-09-08T21:07:47.843
> 
> 标签：.net, xml, xpath

我有以下xml：

```
<root>
    <a>value1</a>
    <b>value2</b>
    <c>value3</c>
    <a>value5</a>
    <d>value4</d>
    <b>value2</b>
    <b>value3</b>
    <a>value7</a>
</root> 
```

`a`如果节点后面没有其他 b 节点，我想选择第一个兄弟`//b[text()='value2']`节点（在这种情况下，它将是`<a>value5</a>`，`<a>value7</a>`不应该选择）。

这样做的xpath是什么？

我正在使用 .net 4 和 xpath 1.0

**更新**

这就是我的出发点：我正在解析的文档有一个非常愚蠢的结构，可以这样描述

```
<root>
    <key>key-value</key>
    <some-other-nodes>some other values</some-other-nodes>
    <key>an other key value</key>
    <value>the value</value>
</root> 
```

我描述的文档包含以下键值对：key-value->{null} an other key value->{the value}

如果键节点重复，则重置该`key`值。我需要一个 xpath 来选择特定键的值。因为在上面的示例中，第二个匹配的`//b[text()='value2']`后面是`<b>value3</b>`，所以键被重置为`value3`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T21:12:17.527

**使用**：

```
 //b[text()='value2']
          /following-sibling::b[last()]
                 /following-sibling::a[1]
  |
   //b[text()='value2']
        [not(following-sibling::b)]
             /following-sibling::a[1] 
```

这可以选择：

1.  初始元素`a`的最后一个后续兄弟的第一个后续兄弟，或：`b``b`

2.  初始元素的第一个后续兄弟`b`，如果它没有任何其他后续兄弟`b`

**这可以进一步简化为**：

```
 //b[text()='value2']/../b[last()]/following-sibling::a[1] 
```

**更新**：

当从提供的 XML 文档中`//b[text()='value2']`选择*两个*元素时，OP 还必须在 XPath 表达式的第一个位置步骤中指定他希望选择这两个元素中的哪一个。

**这是一个更精确的 XPath 表达式**，`$k`在这种情况下，所选元素的数字（1 或 2）是`b[. = 'value2']`：

```
 (//b[text()='value2'])[$k]/../b[last()]/following-sibling::a[1] 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:param name="k" select="1"/>

 <xsl:template match="/">
  <xsl:copy-of select=
  "(//b[text()='value2'])[$k]
      /../b[last()]
         /following-sibling::a[1]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<root>
    <a>value1</a>
    <b>value2</b>
    <c>value3</c>
    <a>value5</a>
    <d>value4</d>
    <b>value2</b>
    <b>value3</b>
    <a>value7</a>
</root> 
```

**对 XPath 表达式求值，并将由此求值选择的元素复制到输出**：

```
<a>value7</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T23:19:51.257

这是应该工作的一个：

```
//b[.='value2']/following-sibling::a[preceding-sibling::b[1][.='value2']] 
```

简而言之，它选择任何具有 value 的元素`a`之后的元素，其中最近的元素具有 value 。`b``'value2'``b``'value2'`

编辑：现在我想一想，我什至不确定你是否需要第一部分。尝试这个：

```
//a[preceding-sibling::b[1][.='value2']] 
```

# heroku - 回形针在 Heroku 中生成错误的 URL

> ID：12334503
> 
> 赞同：1
> 
> 时间：2012-09-08T21:08:03.317
> 
> 标签：heroku, ruby-on-rails-3.1, paperclip, ruby-1.9.2

Paperclip 在 Heroku 中生成错误的 URL。

我有一个音频模型，它有一个 mp3 字段，如下所示：

```
class Audio < ActiveRecord::Base
    has_attached_file :mp3,
    :storage => :s3,
    :s3_credentials => S3_CREDENTIALS,
    :bucket => S3_CREDENTIALS[:bucket],
    :path => ":rails_root/public/system/:attachment/:id/:style/:filename",
    :url => "/system/:attachment/:id/:style/:filename" 
```

我从控制器调用 audio.mp3.url，它返回

[http://s3.amazonaws.com/MyApp/audios/mp3s//original/96a9ae89302fdf8462ee05eb829f2e17578b144e20120908-2-11f61zr.mp3?1347135050](http://s3.amazonaws.com/MyApp/audios/mp3s//original/96a9ae89302fdf8462ee05eb829f2e17578b144e20120908-2-11f61zr.mp3?1347135050)

代替

[http://s3.amazonaws.com/MyApp/audios/mp3s/000/000/004/original/96a9ae89302fdf8462ee05eb829f2e17578b144e20120908-2-11f61zr.mp3?1347135050](http://s3.amazonaws.com/MyApp/audios/mp3s/000/000/004/original/96a9ae89302fdf8462ee05eb829f2e17578b144e20120908-2-11f61zr.mp3?1347135050) （有效）

为什么它缺少路线的“000/000/004”部分？

在视图中使用时，相同的模型会生成正确的 URL。

有什么帮助吗？

我正在使用回形针 3.2.0 和 Rails 3.1.8。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:45:07.863

看起来路线的“000/000/004”部分是回形针的 3.0 新特性`:id_partition`。尝试更改`:id`为`:id_partition`. 也许您已经上传了一些东西后更改了代码中的 url？

# css - 如何选择具有兄弟姐妹的标签 在CSS中标记它？

> ID：12334509
> 
> 赞同：1
> 
> 时间：2012-09-08T21:08:36.050
> 
> 标签：css, css-selectors

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T21:26:02.783

不幸的是，我认为你不能。

*   CSS 2 包括[相邻兄弟选择器 ( `+`)](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)，它允许您选择紧跟在另一个元素之后的元素。

    例如`a + ul`，将选择`<ul>`包含文本“子菜单 2”</p>

*   CSS 3 包括[通用的同级选择器 ( `~`)](http://www.w3.org/TR/css3-selectors/#general-sibling-combinators)，它允许您选择跟在另一个元素之后的元素，即使它们之间有元素。

    例如`a + ul`，`<ul>`即使`<span>`在 the`<a>`和`<ul>`

但是两者都没有一个选择器可以让你选择一个元素，它后面有特定的*元素*。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-09T00:02:22.817

可能通过 nth-child

```
ul li:nth-child(2) a { color:#009; } 
```

选择第二个列表项，然后选择后续的锚标记。

[在这里演示](http://jsfiddle.net/NotInUse/yF3Mz/1/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-08T21:12:02.997

这是一个 jsFiddle 文件，您可以参考[LINK](http://jsfiddle.net/keghK/)

**CSS**

```
ul > li > a {color:red}

ul > li > ul  {color:blue}​ 
```

**HTML**

```
<ul>
    <li>
        <a>Menu 1</a>
    </li>
    <li>
        <a>Menu 2</a>
        <ul>
            <li>Sub menu 2</li>
        </ul>
    </li>
    <li>
        <a>Menu 1</a>
    </li>
</ul>​ 
```

# html - 移动设备上的 CSS 文本换行问题

> ID：12334514
> 
> 赞同：0
> 
> 时间：2012-09-08T21:09:28.697
> 
> 标签：html, css, mobile, cross-browser

什么会导致以下情况发生：如果有人过去处理过这个问题，我相信你知道是什么原因造成的。请记住，我的宽度为 960 像素，最小宽度为 960 像素。所有文本都以 % 为单位。

![在此处输入图像描述](../Images/d0ff87636eb31167ebf5cf5f1bb3294a.png)

# ruby-on-rails-3.2 - 将导入的 scss 文件命名为 .scss 或 .css.scss

> ID：12334515
> 
> 赞同：5
> 
> 时间：2012-09-08T21:09:52.930
> 
> 标签：ruby-on-rails-3.2, sass, asset-pipeline

我试图让 livereload 与 rails 3.2 一起工作，我遇到了这个问题，其中提到了不使用 .css.scss 命名导入的 sass 部分：

[Rails：将 livereload 与 Asset Pipeline 一起使用](https://stackoverflow.com/questions/8031880/rails-use-livereload-with-asset-pipeline)

导入的 SCSS 文件应该命名为 file.scss 而不是 file.css.scss 是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-06T20:56:30.933

老实说，我认为这并不重要。作为惯例，我通常将最终作为实际 CSS 文件输出的文件命名为 .css.scss，将导入的文件命名为 .scss。

我对 .html.haml 和 .haml 做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-22T07:23:49.197

如果要在项目中包含来自不同目录/文件夹的 .scss 文件，则需要在文件名前添加下划线。例如：

```
//files to include
yourproject/sass/partials/_navbar.scss
yourproject/sass/partials/_footer.scss

//Main style.css
yourproject/sass/style.scss

  @include "partials/navbar"
  @include "partials/footer" 
```

如果你注意到，当 .scss 文件被导入到主 style.scss 中时，下划线被删除了。下划线的目的是排除所有不编译的 .scss/.sass 文件，除非它被导入到单个 .scss 文件中。

# cakephp - CakePHP：按顺序获取相关记录？

> ID：12334516
> 
> 赞同：0
> 
> 时间：2012-09-08T21:10:13.323
> 
> 标签：cakephp, cakephp-2.0, cakephp-model

我有两个模型：`Event`和`Match`. 一个事件可以有许多匹配项。我的`Match`模型有`$order = array('match_order' => 'asc')`. `match_order`我的数据库表中的列`matches`只是一个`INT`用于排序匹配的简单列。

我有一个更新匹配顺序的控制器方法。但是，因为我通过事件获取匹配项，所以它们似乎不是按升序排列`match_order`，而是按`id`列升序排列。这是一个示例调用：

```
<?php
class EventsController extends AppController {
    public function view($id) {
        $event = $this->Event->find('first', array(
            'conditions' => array(
                'Event.id' => $id
            ),
            'contain' => array('Match')
        ));
    }
} 
```

所有相关匹配都按预期返回，但顺序不正确。我已经清除了我的模型缓存，我还需要做些什么来根据`Match`模型中的值获取匹配顺序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:28:17.937

解决了。忘了我可以`order`在我的模型关联中指定，所以我在我的模型中添加了以下内容`Event`：

```
<?php
class Event extends AppModel {
    public $hasMany = array(
        'Match' => array(
            'order' => array(
                'match_order' => 'asc'
            )
        )
    );
} 
```

# android - 如何在 ImgaeView 中显示位图的实际宽度和高度

> ID：12334519
> 
> 赞同：-1
> 
> 时间：2012-09-08T21:10:24.627
> 
> 标签：android, layout, bitmap, imageview, httpurlconnection

我使用以下两个功能从互联网下载和图像。当在图像视图中显示下载图像时，它的大小（宽度和高度（与实际大小不同。为什么？因为我已将图像保存到可绘制文件夹并在图像视图中显示它看起来像它的大小一样好。

爪哇代码：

```
public InputStream OpenHttpConnection(String urlString) throws IOException{
    InputStream in = null;
    int respobse = -1;

    URL url = new URL(urlString);
    URLConnection conn = url.openConnection();
    if(!(conn instanceof HttpURLConnection))
        throw new IOException("It's not HTTP connection");
    try{
        HttpURLConnection httpConn = (HttpURLConnection) conn;
        httpConn.setAllowUserInteraction(false);
        httpConn.setInstanceFollowRedirects(true);
        httpConn.setRequestMethod("GET");
        httpConn.connect();

        respobse = httpConn.getResponseCode();

        enableHttpResponseCache();

        if(respobse == HttpURLConnection.HTTP_OK){
            in= httpConn.getInputStream();
            Log.d("HTTP connection","OK");
        }
    }catch (IOException e) {
        Log.e("HTTP ERROR",e.toString());
        throw new IOException();
    }
    return in;
}

public Bitmap DownloadImage(String URL){

    Bitmap bitmap = null;
    InputStream in = null;

    try{
        in = OpenHttpConnection(URL);
        bitmap = BitmapFactory.decodeStream(in);
        in.close();
    }catch(IOException ex){

    }
    return bitmap;
} 
```

包含图像视图的布局是：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/include21"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_margin="10dp"
    android:background="@drawable/round" >

    <ImageView
        android:id="@+id/imgRecibeImage"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/round"
        android:scaleType="fitStart"
        android:src="@drawable/img1" />

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|right" >

        <TextView
            android:id="@+id/txtRecibeName"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#80000000"
            android:gravity="right"
            android:padding="8dp"
            android:text="Crispy Chicken and Sandwich"
            android:textColor="#ffffff"
            android:textSize="17sp" />

        <TextView
            android:id="@+id/tvLoader"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/txtRecibeName"
            android:layout_alignBottom="@+id/txtRecibeName"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="40dp"
            android:text="Small Text"
            android:textAppearance="?android:attr/textAppearanceSmall" />

    </RelativeLayout>

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T21:55:09.237

您是否检查过位图是否适合密度？我的意思是，如果你使用 100x100px 的图像，它在高密度设备上会更小，而在低密度设备上会更大......

另外，您是否注意到您已将 imageView 的大小设置为其尺寸之一的填充父级，并使用了 fit-start ？

根据您设置的规则，这会使图像拉伸到它可以拉伸的程度。如果您为两个维度设置 wrap-content ，它会更可预测。

# python - 是否可以注册 Python VM 输入并重播它们？

> ID：12334520
> 
> 赞同：1
> 
> 时间：2012-09-08T21:10:51.647
> 
> 标签：python

*注：不知道Python虚拟机是怎么工作的*

如果 Python 有一个 vm，就不可能将每个通用输入（如标准输入、套接字读取、文件读取）注册到日志文件中以便重放它以获得非常相似的结果？

我正在考虑这种可能性，因为我想象一个在我的程序中发现错误的用户可以将这个日志文件发送给我，其中包含他所做的一切。

它可能有用还是我的想法有问题？如果没有，如何实现？是否存在类似的东西？

# c++ - 如何在 ANTLR3 标题部分中转义左/右大括号？

> ID：12334521
> 
> 赞同：0
> 
> 时间：2012-09-08T21:11:00.710
> 
> 标签：c++, c, header-files, antlr3, tree-grammar

我有一个以 C 为目标语言的 ANTLR3 树语法。此树语法实际上生成 C++ 对象，因此需要包含这些类的标头。我为此使用该`@header`部分。但是，在输出中，还有一个包含标题部分输出的`extern C {`and块。`}`这会导致错误，因为标头具有模板，不能将其声明为具有“C”链接。我想在标题部分输出的开头关闭该块并在最后重新打开它。不幸的是，在`@header`节内写大括号会破坏 ANTLR3 语法 - 大括号标记`@header`节的开始和结束。

我怎样才能摆脱这些大括号？

TLDR：我需要将左括号和右括号写入`@header`我的 ANTLR3 树语法部分。这样做会破坏`@header`节的语法。如何转义左/右大括号，以便生成的输出的标题部分可以包含左/右括号？

在每次输出后手动编辑它们......很麻烦。

# windows-phone-7 - WebClient.DownloadProgressChanged 不起作用？

> ID：12334524
> 
> 赞同：0
> 
> 时间：2012-09-08T21:11:11.110
> 
> 标签：windows-phone-7, download, webclient, progress

我正在使用 Windows Phone 通过 WebClient 下载文件。DownloadProgressChanged 事件不起作用。它只触发一次，为 DownloadProgressChangedEventArgs.BytesRecieved 返回值“4923206”。我的代码是：

```
 private void listBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        WebClient wb = new WebClient();
        wb.DownloadProgressChanged += wbchange;
        wb.OpenReadAsync(new Uri("http://sohowww.nascom.nasa.gov/data/LATEST/current_eit_304small.gif"));
    }

    private void wbchange(object sender, DownloadProgressChangedEventArgs e)
    {
        MessageBox.Show(e.BytesReceived.ToString()); (obviously in the end I will not be showing a message at every change)
    } 
```

这有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T21:14:59.067

它工作得很好，它恰好在第一次`DownloadProgressChanged`调用时下载了所有字节。

如果您[阅读文档](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadprogresschanged.aspx)，您会发现这是预期的行为。

# bash - 在 bash 命令行上，如何删除光标前的所有字母？

> ID：12334526
> 
> 赞同：57
> 
> 时间：2012-09-08T21:11:44.790
> 
> 标签：bash, command-line

在 bash 命令行上，如何删除光标前的所有字母？我知道 Ctrl-k 删除光标之后的所有内容。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-09-08T21:15:09.217

`Ctrl-u`-`Cut everything before the cursor`

* * *

其他 Bash 快捷方式，

*   Ctrl-a `Move cursor to beginning of line`
*   Ctrl-e `Move cursor to end of line`
*   Ctrl-b `Move cursor back one word`
*   Ctrl-f `Move cursor forward one word`
*   Ctrl-w `Cut the last word`
*   Ctrl-k `Cut everything after the cursor`
*   Ctrl-y `Paste the last thing to be cut`
*   Ctrl-_ `Undo`

并通过 bash shell 的手册页发现更多信息：`man bash`

附加 bash 命令行快捷方式备忘单： http: [//www.bigsmoke.us/readline/shortcuts](http://www.bigsmoke.us/readline/shortcuts)

请参阅此处的文档：[http ://www.gnu.org/software/bash/manual/bashref.html#Commands-For-Killing](http://www.gnu.org/software/bash/manual/bashref.html#Commands-For-Killing)

必修课：通过 Julia 的漫画了解更多关于 Bash、Linux 和技术的信息：[https ://twitter.com/b0rk/media](https://twitter.com/b0rk/media)

[![朱莉娅在 Bash 上](../Images/335e7ff350e85eb1f8be9d7f84965534.png)](https://i.stack.imgur.com/RjLje.jpg)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-04-30T12:39:37.707

在[**zsh**](https://en.wikipedia.org/wiki/Z_shell)中，`Alt`+`w`清除光标之前的所有字符。

与 bash 相比，这**不会削减**它们；它只是**删除**它们。

这适用于 zsh 的 Emacs 模式（这是默认模式），不适用于 Vi 模式。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-08T21:14:58.013

热键`Ctrl+U`应该为您执行此操作。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-03-05T17:37:12.340

Ctrl+x 退格 清除光标当前位置之前的所有条目

# mysql - 是否可以简化此 SQL UNION 查询？

> ID：12334531
> 
> 赞同：0
> 
> 时间：2012-09-08T21:12:14.930
> 
> 标签：mysql, sql, union, rdbms

是否可以简化此 UNION 以避免合并查询的近乎冗余？如此处所示，这两个查询是相似的。他们只是加入 table2 中的不同列。我在同一个查询中使用 Union 而不是 Inner Joining 2x 的原因是，由于这个查询被用作子查询，结果必须在 1 列中。

```
SELECT t1.id as id
FROM table1 g
INNER JOIN table2 t1 on g.t_id = t1.id
WHERE g.id=1
UNION
SELECT t2.id as id2
FROM table1 g
INNER JOIN table2 t2 on g.t2_id = t2.id
WHERE g.id=1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T04:12:47.657

我不明白为什么这不能被视为一个简单的内部连接，可以通过两个谓词中的任何一个中的匹配来满足。为了清楚起见，我删除了 t1、t2 和 g 的原始表别名。因为我不知道查询是否会产生重复的行，所以我使用 DISTINCT 来折叠重复的行，其方式与 UNION 在原始查询中所做的方式相同。

```
SELECT DISTINCT table2.id
FROM table1
INNER JOIN table2
ON ( table1.t_id = table2.id OR table1.t2_id = table2.id )
WHERE table1.id = 1
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T21:53:48.413

可以使用两个连接和 IFNULL() 函数：

```
SELECT IFNULL (t1.id, t2.id) as id
FROM table1 g
INNER JOIN table2 t1 on g.t_id = t1.id
INNER JOIN table2 t2 on g.t2_id = t2.id
WHERE g.id=1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T22:23:20.027

您可能会发现这更简单：

```
select distinct t.id
from table2 t
where t.id in (select g.t_id from table1 g) or
      t.id in (select g.t2_id from table1 g) 
```

但是，在 MySQL 上的性能会很糟糕。你也可以这样做：

```
select distinct t.id
from table2 t
where exists (select 1 from table1 g where g.t_id = t.id or g.t2_id = t.id) 
```

第二个版本应该在 MySQL 中工作得更好。

# ruby-on-rails-3 - 通过布尔值查找 Rails 顺序

> ID：12334533
> 
> 赞同：0
> 
> 时间：2012-09-08T21:12:17.350
> 
> 标签：ruby-on-rails-3

我在 rails 3 中有一个简单的发现，可以收集用户帐户。

```
 Account.where(:user_id => @user) 
```

Account 模型有一个“默认”布尔字段。当用户添加许多帐户时，我希望默认帐户始终位于循环的首位。订单似乎不适用于布尔字段。

```
 Account.where(:user_id => @user, :order => "default DESC") 
```

有没有办法订购查询来处理这个问题，或者我应该只拆分查询并在单独的查找中找到默认帐户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T21:33:48.337

尝试`Account.where(:user_id => @user).order("default DESC")`- 放入`:order`您的`where()`子句不会对结果集进行排序。

不过，更清洁的解决方案可能是添加范围。

```
scope :default_first, order(arel_table[:default].desc) 
```

然后你可以打电话（假设你的关系设置正确）：

```
@user.accounts.default_first.all 
```

# .net - 如何在不访问数据库的情况下获取独立关联的外键值？

> ID：12334534
> 
> 赞同：3
> 
> 时间：2012-09-08T21:12:26.567
> 
> 标签：.net, entity-framework, entity-framework-5

我正在使用独立关联（延迟加载）来访问我的代码优先模型中的相关实体，例如

```
public class Aaa {
  public int AaaId {get;set;}
  public string SomeValue {get;set;}
}

public class Bbb {
  public int BbbId {get;set;}
  public string SomeValue {get;set;}
  public virtual Aaa MyIndependentAssociation {get;set;}
} 
```

`MyIndependentAssociation`但我想知道如何在不实际加载记录的情况下访问外键值。

我假设`Aaa_AaaId`当我从数据库中检索实体时实际加载了该值`Bbb`（无论如何根据实体表上的调试可视化器）。

我如何访问该值（除了将外键关联添加到我的模型中）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T12:00:18.487

这是可能的。使用您的示例模型，您可以通过以下方式找到外键值：

```
Bbb bbb = myDbContext.Bbbs.First();

var objectContext = ((IObjectContextAdapter)myDbContext).ObjectContext;

var relMgr = objectContext.ObjectStateManager.GetRelationshipManager(bbb);
var relEnds = relMgr.GetAllRelatedEnds();
var relEnd = relEnds.Single(); // because yor model has exactly one relationship
var entityRef = relEnd as EntityReference<Aaa>;    
var entityKey = entityRef.EntityKey;

int foreignKeyValue = (int)entityKey.EntityKeyValues[0].Value;

// to confirm that no database query happened
Console.WriteLine(entityRef.IsLoaded); // outputs false 
```

在更一般的情况下，您在`Bbb`类中有多个关系，甚至可能不止一个导航属性引用`Aaa`您需要在`relEnds`枚举中找到正确的元素。你也可以有复合外键。它看起来像这样：

```
Bbb bbb = myDbContext.Bbbs.First();

var objectContext = ((IObjectContextAdapter)myDbContext).ObjectContext;

var relMgr = objectContext.ObjectStateManager.GetRelationshipManager(bbb);
var entityRef = relMgr.GetRelatedReference<Aaa>(
    "MyEntityNamespace.Bbb_MyIndependentAssociation",
    "Bbb_MyIndependentAssociation_Target");
var entityKey = entityRef.EntityKey;

object[] compositeForeignKeyValues =
    entityKey.EntityKeyValues.Select(e => e.Value).ToArray();

// to confirm that no database query happened
Console.WriteLine(entityRef.IsLoaded); // outputs false 
```

请注意，如果您在调试器中检查`IsLoaded`可能导致加载相关对象的对象（即使禁用延迟加载），也可能是这样。`true``entityRef`

# ruby - 哪种redis数据类型适合存储用户？

> ID：12334536
> 
> 赞同：2
> 
> 时间：2012-09-08T21:13:06.547
> 
> 标签：ruby, security, authentication, encryption, redis

我正在用 ruby​​ 构建一个身份验证系统，并使用 redis 来存储用户的访问数据。我想知道哪种[redis数据类型](http://redis.io/topics/data-types)更适合使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T10:20:23.997

他们都没有。Redis 应该是用在可信的环境中，它自己的认证机制是基本的，并且没有与数据关联的访问权限或 ACL。存储安全敏感数据非常薄弱。

现在，如果您真的需要这样做，您可以序列化用户的属性并将每个用户存储在一个字符串中，或​​者为每个用户使用一个哈希对象来分别存储属性。

例如：

```
SET user:1 {"lastname":"Smith","firstname":"John","passwd":"38E56712AB15"}
or
HMSET user:1 lastname Smith firstname John passwd 38E56712AB15 
```

如果您以全局方式系统地访问用户（一次性检索/更新所有属性），则第一个解决方案更为理想。

使用第二种解决方案，只加密一部分数据并支持部分更新/检索会更容易一些。当然，加密必须在客户端完成。

# javascript - 照片滑块的条件语句

> ID：12334545
> 
> 赞同：1
> 
> 时间：2012-09-08T21:13:45.640
> 
> 标签：javascript, jquery, css, slider, margin

我正在制作照片滑块。如果单击上一个或下一个按钮，margin-left 会不断增加或减少一个变量，该变量设置为 5px。但是，我想限制滑块向左或向右移动的距离，这样它就不会滑得太远以至于有空白。

为了限制边界，如果 margin-left 介于 10px 和 -100px 之间，则有一个条件语句为变量分配 5px 的值。否则，变量设置为 0px。

这确实有效。如果您向左或向右走得太远，滑块就会停止。但是一旦达到边界，上一个和下一个按钮就不起作用了。有小费吗？

你可以在这里查看我的代码： [jsfiddle.net/xpfbh/2/](http://jsfiddle.net/xpfbh/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:02:13.843

我已经更新[了你的小提琴](http://jsfiddle.net/xpfbh/7/)。我不得不更改您的 if 条件以包括边距范围和方向。还删除了测试变量并移动了在 if 块中设置边距的语句。我认为不需要 else 块，所以我也将其删除。

# android - 扩展应用程序类和良好实践

> ID：12334550
> 
> 赞同：5
> 
> 时间：2012-09-08T21:14:30.743
> 
> 标签：android, singleton

最近有人告诉我，扩展应用程序类以将其用作单例是一种不好的做法，但没有任何解释。
那么使用这个类背后的潜在问题是什么？我已经看到它在许多项目中使用。

此外，如果使用应用程序类是一个坏主意，那么存储应用程序级变量的替代方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T21:33:57.030

使用单例方法并不是一个坏主意，但在多线程环境中使用时可能会很麻烦，其中一个线程将值设置为变量，而另一个线程可能会在没有任何通知的情况下覆盖该值.

但是，为了保留应用程序级别的实例/变量，建议**扩展** `Application`类并在您的**AndroidManifest.xml**中将其定义为默认值。由于应用程序的上下文仅在您启动该应用程序时创建*一次*（直到应用程序运行并停留在内存中），因此您可以在该类中定义一些变量，以使用公共方法使它们在应用程序代码中的任何位置可用。

此外，您也可以将您的应用程序类用作*Singleton*，因为它保证在启动时只创建一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T21:33:20.530

使用 Singleton 类以及扩展`Application`类的问题在于，如果应用程序进程被终止 - 当应用程序在后台停留时间过长时很可能会发生这种情况 - 对象将丢失所有数据。

但是，`Application`如果您的应用程序处于前台或后台不多（尽管不是 100% 无风险），使用类可能是一个不错的选择。

作为替代方案，您可以将数据保存到`SharedPreferences`中，或者如果您的对象更复杂，请将其保存在`database`.

另一种选择是结合使用`Application`, plus`SharedPreferences`例如。首先尝试从`Application`实例中检索变量，如果变量为空，则从`SharedPreferences`.

# matlab - 具有指定截止频率的低通高斯滤波器

> ID：12334551
> 
> 赞同：1
> 
> 时间：2012-09-08T21:14:34.343
> 
> 标签：matlab, image-processing, gaussian

我正在玩[混合图像](http://cvcl.mit.edu/hybrid_gallery/gallery.html)，并想使用高斯滤波器对图像进行低通滤波。但是，为了制作混合图像，应该在 2 个图像上使用 2 个滤波器，并以不同的截止频率组合。

当我们使用它来制作高斯滤波器时，是否`fspecial()`允许我们指定截止频率？（我知道我们可以指定滤波器大小和 sigma，并且 sigma 和截止频率之间存在某种关系）。如果我们只能使用 sigma 指定截止频率，那么我需要设置什么 sigma 才能获得 0.2 Hz 的截止频率。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T21:33:11.743

我将首先回答有关 1D 的问题，其余的将随之而来。它可能看起来微不足道，但请耐心等待一段时间。让我们假设以下代码：

```
t=linspace(0,20,2^10); %time vector in seconds
w=0.2; %in Hz
signal=cos(2*pi*w*t)+rand(1,length(t))-0.5; % signal in seconds
dt=t(2)-t(1) ;
N=length(signal);
df=1/(N*dt);    % the frequency resolution (df=1/max_T)
if mod(N,2)==0
    f_vec= df*((1:N)-1-N/2);  % for EVEN length vectors
else
    f_vec= df*((1:N)-0.5-N/2); 
end 
```

因此，我们创建了特定频率的噪声信号。f_vec 是从 f =[-f_max,-f_max+df,...,0,...,f_max] 延伸的频率向量，其中 f_max=1/(2*dt)。如果我们现在设计一个一维高斯滤波器（在傅立叶空间中）如下：

```
f_vec0=0;
sigma=1;
filter=exp( -(f_vec-f_vec0).^2./(2*sigma^2)); 
```

然后在傅立叶域中过滤：

```
f_signal=fftshift(fft(signal));
filt_signal=fftshift(ifft(f_signal.*filter)); 
```

因此，从我们应用的滤波器来看，sigma=1 意味着截止频率（我决定是滤波器最大值（即 1）的 1%）大约为 3 Hz：

```
 cutoff_freq=f_vec(find(filter>=0.01,1,'last')) 
```

将其转换为 2D 是微不足道的，只是要小心单位。对于图像，以像素为位置单位，以1/像素为空间频率。fspecial 函数生成一个预定义滤波器的二维矩阵。fspecial 的用法通常是这样的：

```
PSF = fspecial('gaussian',hsize,sigma);
Blurred = imfilter(Image,PSF,'symmetric','conv'); 
```

使用卷积就像在傅里叶域中乘法一样。傅里叶域中的 sigma 与位置域的 1/sigma 成正比，等等......

# matlab - matlab：subsref错误

> ID：12334554
> 
> 赞同：0
> 
> 时间：2012-09-08T21:14:39.383
> 
> 标签：matlab

我收到一个错误：

```
b = cellfun(@(x) nansum(mag.*subsref(cross(u{1},x), struct('type', '()', 'subs', {':',':',3})) ),r,'UniformOutput',false);

??? Error using ==> subsref
The "subs" field for the subscript argument to SUBSREF and SUBSASGN must be a cell or character array.

Error in ==> cellcross>@(x)nansum(mag.*subsref(cross(u{1},x),struct('type','()','subs',{':',':',3}))) at 2
    b = cellfun(@(x) nansum(mag.*subsref(cross(u{1},x), struct('type', '()', 'subs', {':',':',3})) ),r,'UniformOutput',false);

Error in ==> cellcross at 2
    b = cellfun(@(x) nansum(mag.*subsref(cross(u{1},x), struct('type', '()', 'subs', {':',':',3})) ),r,'UniformOutput',false); 
```

谁能告诉我为什么？

我正在使用 Matlab 2011。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T22:14:13.537

如果您使用单元格数组作为字段之一调用 struct，您将获得一个结构数组，其中该单元格数组的内容分布在元素上。这发生在`struct('type', '()', 'subs', {':',':',3})`.

我曾经写过一些代码来绕过这个“特性”：

```
function newStruct = structWithCell(varargin)
  % Constructs a structure with cell variables as MATLAB would make a struct
  % array by using the equivalent struct() call
  % Setting values to cell() straight away doesn't work unfortunately
  % as MATLAB(R) interprets structs with cell values as a cell array of structs.
  assert(mod(nargin,2)==0,'An even number of arguments is expected');
  newStruct = struct();
  keys      = varargin(1:2:end-1);
  values    = varargin(2:2:end);
  for iKV = 1:numel(keys)
      newStruct.(keys{iKV}) = values{iKV};
  end
end 
```

如果您将调用替换`struct`为对上述函数的调用，它应该可以正常工作。

或者，您也可以将该部分更改为`struct('type', '()', 'subs', {{':',':',3}})`. 这样，您将传递一个包含单个元胞数组的元胞数组。这也会得到你想要的。

# playframework - 带有自引用对象的playframework删除对象失败

> ID：12334555
> 
> 赞同：0
> 
> 时间：2012-09-08T21:14:42.910
> 
> 标签：playframework, model, playframework-1.x

我在删除对象时遇到了奇怪的问题。我正在使用 Play Framework 1.2.5 和 PostgreSQL 版本 9.1。

我有以下两个模型：

1)

```
@Entity
public class CarCollection extends Model {
    @Required
    public String name;

    @OneToMany(mappedBy = "carCollection")
    public List<Car> cars;
} 
```

2)

```
@Entity
public class Car extends Model {
    @Required
    public String name;

    @OneToMany(mappedBy = "parent", cascade = CascadeType.ALL)
    public List<Car> copies = new ArrayList<Car>();

    @ManyToOne
    public Car parent;
} 
```

所以，在我的情况下，我可以拥有汽车，但可以复制它们然后我保存，例如，2 号汽车是从 1 号汽车复制的，所以 2 号汽车的父级 = 1 号汽车。但它们位于**不同**的汽车收藏中，这就是现在重要的事情！

现在我想删除一个包含实体（车号 1）的 CarCollection。但正如我所写，1 号车仍然被 2 号车对象作为父对象引用。现在会发生什么？我希望这个 CarCollection 将与 1 号车一起被删除，而在 2 号车的实体中，父值将为空（已删除参考）。
开箱即用是行不通的！怎么了？两辆车都将被删除。但这不是我期望或想要的。

所以我决定通过覆盖两个 delete() 方法来解决这个问题，如下所示：

```
@Entity
public class CarCollection extends Model {
    @Override
    public CarCollection delete() {
    //delete cars manually
    for(Car car: this.cars){
        car.delete();
    }
} 
```

和

```
@Entity
public class Car extends Model {
    @Override
    public Car delete() {
    //delete parents from copied cars
    for (Car car : this.copies) {
        car.parent = null;
        car.save();
    }
} 
```

但它不起作用。我尝试什么都没关系。即使我在删除内容后“刷新（）”我的 CarCollection，也无济于事。

那么，我该如何解决这个问题呢？也许我有一个错误的模型定义或依赖定义？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:48:42.720

There is two things involved when you delete some entities :

*   cascade definition define in your database when you create your foreign keys
*   cascade definition in your jpa annotations

In your example, the 'copies' relation have a cascade all annotation. So if car2 is in the 'copies' list of 'car1' it will be deleted transitively.

If you want to break the relation by hand by overriding the delete method, you have to do it in both ways. In your case, you do not remove the child from the copies list when you set parent to null.

# json - JSON 中有比 1e309 更简洁的 Infinity 表示吗？

> ID：12334559
> 
> 赞同：1
> 
> 时间：2012-09-08T21:15:11.867
> 
> 标签：json, floating-point, nan, infinity

这是我能找到的最小的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-08T21:32:29.947

JSON RFC ( [https://www.rfc-editor.org/rfc/rfc4627](https://www.rfc-editor.org/rfc/rfc4627) ) 声明 NaN、正无穷大和负无穷大不能用 JSON 表示：

> 不允许使用不能表示为数字序列的数值（例如 Infinity 和 NaN）。

我不知道你从哪里得到 1*10^309，因为 Javascript 的最大精确整数值是 2^53。

当您说“简洁”时，您实际上是指“简洁”吗？

# qt - Qt QWebView 网络超时值和信号

> ID：12334560
> 
> 赞同：0
> 
> 时间：2012-09-08T21:15:18.137
> 
> 标签：qt, networking, webkit, timeout, qtwebkit

如何`QWebView`配置 a 以降低网络超时值 - 以便在网络故障的情况下`loadFinished(bool ok)`可以更快地到达信号，显然，设置了一个`false`值和一个适当的错误条件？

以不同方式处理不同超时的奖励积分

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T19:57:54.033

标准错误和成功的页面加载将像以前一样触发 loadFinished，但自定义计时器将停止网页加载并使用 ok=False 触发 loadFinished

```
class Browser(object):

    def __init__(self):
        self.web_view = QWebView()
        self.web_view.loadFinished.connect(self._load_finished)

        self._error = None

    def perform(self, url, timeout_value=30):
        request = QNetworkRequest()
        request.setUrl(QUrl(url))

        self.timeout_timer = QTimer()
        self.timeout_timer.timeout.connect(self._request_timed_out)

        self.timeout_timer.start(timeout_value * 1000)
        self.web_view.load(request)

    def _request_timed_out(self):
        self._error = 'Custom request timeout value exceeded.'
        self.timeout_timer.stop()
        self.web_view.stop()
        self.loadFinished.emit(False)

    def _load_finished(self, ok):
        pass
        # ok is now False, and self._error contains a custom error message 
```

# webmatrix - Web Pages 2.0 中的异步支持

> ID：12334564
> 
> 赞同：0
> 
> 时间：2012-09-08T21:16:39.227
> 
> 标签：webmatrix, asp.net-webpages

Web Pages 2.0 是否支持异步（async/await 或 TPL）操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T05:23:43.170

只要您的目标是 .NET 4.5，async/await 语法就应该适用于 Visual Studio 中的 Web Pages 2.0。但是，WebMatrix 当前不支持 C# 5.0 或 .NET 4.5。

# extjs - 在 tabPanel 中适合 mapPanel

> ID：12334569
> 
> 赞同：0
> 
> 时间：2012-09-08T21:17:15.117
> 
> 标签：extjs, map, extjs4.1

我在我的网络应用程序中使用 extjs4.1 和 geoext2。
我想通过 ajax 将 mapPanel 加载到 tabPanel 并填充 tabPanel 的高度和宽度。
如果我设置 mapPanel 的高度和宽度，我可以在 tabPanel 中看到它，但它不能填充 tabPanel，因为我设置了它的高度和宽度。以下代码：

```
mapPanel = Ext.create("GeoExt.panel.Map", {
            renderTo: "mappanel",
            height: 575,
            width: 1124,
            map:map,
            zoom: 11,
            tbar : toolbar
        });
var tabs = Ext.create('Ext.tab.Panel', {
            region: 'center', // a center region is ALWAYS required for border layout
            deferredRender: false,
            activeTab: 0,     // first tab initially active
            items: [{
                title: 'History',
                autoScroll: true
            }, {
                title: 'Center Panel',
                autoScroll: true
            }]
        }); 
```

当用户通过以下代码单击具有图标的网格列时，我将 MapPanel 插入到 tabPanel。

```
var grid = Ext.create('Ext.grid.Panel', {
        store: store,
        columnLines: true,
        columns: [
            {
                menuDisabled: true,
                sortable: false,
                xtype: 'actioncolumn',
                width: 20,
                items: [{
                    icon   : '<?php echo Yii::app()->baseUrl.'/images/icons/show.png';?>',
                    tooltip: 'Show Map',
                    handler: function(grid, rowIndex, colIndex) {
                        var rec = store.getAt(rowIndex);
                        var jsonData = Ext.encode(store.proxy.reader.jsonData);
                        tabs.remove(tabs.getComponent(2));
                        tabs.insert(2,{
                            title:'Map',
                            layout: 'fit',
                            loader: {
                                scripts: true,
                                autoLoad :true,
                                params:{
                                    history:jsonData,
                                    index:rowIndex
                                },

                                failure : function(){
                                    alert('failed');
                                },
                                url: '<?php echo Yii::app()->createUrl('MapWidget/HistoryMap');?>'

                            }
                        });
                        tabs.setActiveTab(2);
                        tabs.doLayout();
                       }
                }]
            },
... 
```

但是当我在 mapPanel 选项中清理高度和宽度时，我在 tabPanel 中看不到它！
如何将 mapPanel 加载到 tabPanel 以填充其内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T23:08:20.120

从文档

> 如果 Component 要成为 Container 的子项，请不要使用此选项。Container 的布局管理器负责渲染和管理其子项。

以下是一些以正确方式远程加载组件的示例代码：http: [//dev.sencha.com/deploy/ext-4.1.0-gpl/examples/component-loader/component-loader.html](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/component-loader/component-loader.html)

# php - 网址缺少撇号

> ID：12334570
> 
> 赞同：0
> 
> 时间：2012-09-08T21:17:38.463
> 
> 标签：php, javascript

我有 2 个 URL 链接。一种有效，另一种（通过 PHP 调用）无效。PHP 链接缺少撇号`'`。我怎样才能解决这个问题？

```
<?php print "[ <a href='javascript:change_url($urls)'>test2</a>";  ?>

<a href="javascript:change_url('test2.html')">test2</a>

<script>
$(document).ready(function(){
    $("#content").load("test.html");
});

function change_url(file){
    $("#content").load(file);
}
</script>

<div id="content"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T21:23:37.123

尝试

```
<?php print "[ <a href='javascript:change_url(" . str_replace( "'", "\'", $urls ) .")'>test2</a>";  ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T21:26:43.403

在调用之前，像这样`print`运行：`htmlspecialchars``$urls``$urls = htmlspecicalchars($urls);`

# c++ - C++ 赋值重载自赋值问题

> ID：12334573
> 
> 赞同：0
> 
> 时间：2012-09-08T21:17:47.433
> 
> 标签：c++, pointers, operator-overloading

我目前正在开发一个名为 Text 的 ADT，并且正在重载赋值运算符。当我像这样测试运算符时：`assignText = alpha`一切正常。但是，当我这样做时，会`assignText = assignText`输出两个实心条。

assignText 被声明为一个 Text 对象。

我的重载赋值运算符如下：

```
void Text::operator= (const Text& other) { 
bufferSize = other.getLength();
buffer = new char[bufferSize];
buffer = other.buffer; 
} 
```

地点`int bufferSize`和地点`char *buffer`

任何提示或建议将不胜感激。如果还需要什么，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T21:25:08.923

这是内存泄漏。您将两个不同的指针分配给`buffer`.

```
 buffer = new char[bufferSize];
 buffer = other.buffer; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T21:26:08.627

关于手头*的问题*，C++ 常见问题解答中涵盖了这一点：[**“我为什么要担心“自赋值”？”**](http://www.parashift.com/c++-faq/self-assignment-why.html) . 首先阅读常见问题解答通常是一个好主意。或者至少略读一下。

当您绝对必须实现复制赋值运算符时，通常复制和交换习语就足够了。它也是异常安全的。像这样：

```
void swapWith( MyType& other ) throw()
{
    // swap them members
}

void operator=( MyType other )
{
    swapWith( other );
} 
```

在这里，复制构造函数创建了形式参数副本，并且任何异常都发生在那里，因此复制构造函数也集中了在复制失败的情况下的清理。之后交换两个对象的内容，复制对象的析构函数负责清理该对象的内部内容。结果`void`类型还不是传统的，但正如我所见，浪费代码和时间来支持具有副作用的表达式是不明智的，这是邪恶的。

现在，你**可以避免这一切**，只需使用`std::vector`你的缓冲区。

所以这就是我推荐的，真正简单的解决方案：使用`std::vector`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T22:47:08.867

其他答案已经指出了您的运营商实施的各种问题。在这里，我将尝试了解您正在发生的事情，即*为什么*代码的行为与您观察到的一样。如果`this == &other`，即在自分配期间，您将当前长度作为新缓冲区的大小。该新缓冲区未初始化，因此此时它可能包含随机字节。在自我分配的情况下，最后一个分配是无操作的。总结一下：

```
void Text::operator= (const Text& other) { 
  bufferSize = other.getLength(); // Take length from current object
  buffer = new char[bufferSize];  // Create new buffer, old buffer turns into a memory leak
  buffer = other.buffer;          // No-op as both are the same variable
} 
```

所以这告诉你的是你最终得到了一个当前对象大小但内容未定义的缓冲区。在您的情况下，未定义的内容恰好代表您提到的垂直条。

要解决此问题，请确保根据其他答案和评论的建议修复赋值运算符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T21:26:21.193

这是因为您的赋值运算符根本上是不安全的。您需要打破旧状态作为*最后*一步。考虑

```
Text& Text::operator= (const Text& other) {
    auto new_buffer = new char[other.bufferSize];
    std::copy(other.buffer, other.buffer + other.bufferSize, new_buffer);
    // Now consider whether or not you need to deallocate the old buffer.
    // Then set the new buffer.
    buffer = new_buffer;
    bufferSize = other.bufferSize;
    return *this;
} 
```

这确保了如果遇到任何问题，可以保证`Text`对象始终有效——并且作为奖励，它是自分配安全的。所有编写良好的赋值运算符都是自赋值安全的。

这通常与复制和交换联系在一起，复制然后交换——保证安全。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T11:28:51.767

这段代码将完美运行

```
Text& Text::operator=(const Text& other) 
{ 
    if(this == &other) /* checks for self assignment */
         return *this;

    if(NULL == other.buffer)
         return *this;

    if(NULL != buffer) /* assuming buffer=NULL in constructor */
    {
         delete [] buffer;
         buffer = NULL;
    }

    bufferSize = other.getLength();
    buffer = new char[bufferSize+1];
    memset(buffer, 0, bufferSize+1);
    memcpy(buffer, other.buffer, bufferSize);

    return *this;
} 
```

试试这个..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T16:15:11.973

经过一番思考和回顾，我想我明白了。鉴于我需要编写一个由头文件指示的 void 函数，我必须从中构造我的实现。我考虑了 Drew Dormann、MvG 以及其他人的评论，得出了这个结论：

```
void Text::operator= (const Text &other) 
{ 
    if (this != &other) // takes care of self-assignment
    { 
         delete [] buffer; // delete the old buffer
         bufferSize = other.bufferSize; // assign size variable
         buffer = new char[bufferSize + 1]; // create new buffer
         strcpy(buffer, other.buffer); // copy array
    }
} 
```

这行得通，我相信它没有内存泄漏。

# join - pthread_join 导致段错误

> ID：12334582
> 
> 赞同：2
> 
> 时间：2012-09-08T21:19:00.257
> 
> 标签：join, pthreads

作为 pthreads 教程练习的一部分，我编写了一个程序来创建 10 个线程，而不是加入 10 个线程。该程序运行并打印输出，但似乎在第一次调用 pthread_join 时会导致分段错误。我不确定为什么会发生这种情况。我尝试在网上搜索，但大多数问题都与传递给函数的无效指针有关。我不确定这是否与我的代码相同，因为我不容易看到它。

如果有人可以帮助我，我当然会很感激:)

代码如下：

```
#include <stdio.h>
#include <pthread.h>
#define NTHREADS    10

void *thread_function(void *arg)
{
    int i;
    int *coming = (int*) arg;
    for(i=0; i<5; i++)
        printf("Hello, World (thread %d)\n", *coming);
    return NULL;
}

int main(void)
{
    int i;
    void *exit_status;
    int retVal;
    pthread_t pthread_array[NTHREADS];
    int randVals[10] = {23,5,17,55,9,47,69,12,71,37};

    printf("threads are created\n");
    for(i=0; i<10; i++)
    {
        retVal=pthread_create(&pthread_array[i], NULL, thread_function, &randVals[i]);
        printf("pthread_create %d retVal=%d\n", i, retVal);
    }

    printf("threads are joined\n");
    for(i=0; i<10; i++)
    {
        retVal= pthread_join(pthread_array[i], &exit_status);
        printf("pthread_join %d retVal=%d and exit_status=%d\n", i, retVal,
        *((int *)exit_status));
    }

    printf("all threads have ended\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T21:32:02.160

这就是问题

```
printf("pthread_join %d retVal=%d and exit_status=%d\n", i, retVal,
    *((int *)exit_status)); 
```

您的线程函数返回 NULL，因此这是存储在`exit_status`. 所以现在在`printf`你做这个

```
*((int *)exit_status 
```

您正在将此 NULL 指针强制转换为 int*，然后取消引用它。取消引用 NULL 指针不是一个好主意。有关如何使用`exit_status` [pthread_join 中的“状态”到底代表什么以及如何查询它的更完整示例，请参阅此问题](https://stackoverflow.com/questions/5385364/what-does-exactly-the-status-in-pthread-join-represent-and-how-to-query-it)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T21:32:08.523

```
 *((int *)exit_status)); 
```

如果线程函数返回 NULL（它确实如此），这将尝试取消引用它。在这样做之前，您应该测试`exit_status`：

```
pthread_join(...);
if (exit_status != NULL)
    /* Safe to use. */ 
```

# c# - 我应该只使用一项新的 service() 还是更多？

> ID：12334583
> 
> 赞同：5
> 
> 时间：2012-09-08T21:19:16.480
> 
> 标签：c#, .net, service

我创建了一个 Windows 服务项目。如果你创建一个新项目，你会得到这样的结果：

```
ServiceBase[] ServicesToRun;
ServicesToRun = new ServiceBase[] 
{ 
  new Service1() 
};
ServiceBase.Run(ServicesToRun); 
```

现在我必须在我的班级中添加一些功能和计时器`Service1()`，然后一切都很好。

现在让我说，我的服务应该做一些事情，比如：读取一些文件，删除一些文件夹，检查连接......

并且它们都应该异步运行。现在有什么好？复制 Service1() 中的所有功能，不更改任何其他内容，或者为每个“东西”创建一个新类（Service1()、Service2()、...），然后像这样添加它们

```
ServicesToRun = new ServiceBase[] 
{ 
  new Service1(),
  new Service2() //not sure this will compile
}; 
```

只是问问。也许我没有 100% 理解服务是如何工作的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T05:04:04.733

这对于这个问题可能有点过于笼统，但 Windows 服务应该执行一个或一组相关功能。一般来说，服务越少越好，但是，一旦服务开始做多项事情，如果出现以下情况，请考虑将它们分开：

1.  它们需要不同级别的安全性。例如，如果某些功能需要管理员访问权限而有些不需要，请考虑将它们拆分为不同的服务。
2.  用户可能或希望运行一个功能（即服务）而不是另一个。例如，某些功能可能取决于可选组件或可能未安装的组件。

# php - 设置页面的绝对路径

> ID：12334586
> 
> 赞同：0
> 
> 时间：2012-09-08T21:19:45.670
> 
> 标签：php, html, apache, path

我一直在研究我的网站结构，试图让它不那么混乱，但我遇到了文件路径的问题。

**之前的网站结构**

```
[folder] :   css
[folder] :   js
[folder] :   images
[folder] :   include
   |---> :   header.php
[file]   :   index.php
[file]   :   view_inventory.php
.... 
```

**之后的网站结构**

```
[folder] :   css
[folder] :   js
[folder] :   images
[folder] :   include
   |---> :   header.php
[folder] :   view
   |---> :   inventory.php
[file]   :   index.php
.... 
```

如您所见，我决定将视图文件分组，将它们放入自己的文件夹中

问题在于**index.php**和**view_inventory.php**都使用了**include/header.php**文件

**include/header.php**文件有一个位于**images/logo.php**的标题标志，如果**index.php**和**view_inventory.php**都在同一个文件夹中，图像的路径不会有问题，但因为它们不是**view/inventory.php**中的文件将具有不正确的图像路径。

我曾考虑为图像等文件定义完整路径（例如 localhost/sites/bk/images/logo.png），但这不是一个好主意，因为我可能决定将文件上传到服务器上，而服务器地址可以不断改变..等

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T21:23:15.773

使用绝对路径！

在你的 index.php 中做：

```
define( 'ROOT', dirname(__FILE__) ); 
```

当你想包含头文件时，

```
include ROOT . '/include/header.php' 
```

而且，当在 html 中并想要使用图像时，请使用来自 webroot 的绝对路径：

```
<img src="/images/your_image.png"> 
```

# jquery - 从另一个页面加载 select2 控件给我带来了麻烦

> ID：12334589
> 
> 赞同：0
> 
> 时间：2012-09-08T21:20:07.133
> 
> 标签：jquery, html, jquery-select2

我正在使用以下代码尝试从另一个页面加载一个页面，以便我可以在对话框中显示第二页 html：

```
 var $link = $('#addTagButton');
        var $dialog = $('#addTag')
                .load($link.attr('href'))
                .dialog({
                    autoOpen: false,
                    title: $link.attr('title'),
                    width: 600
                });
        $link.click(function() {
            $dialog.dialog('open');
            return false;
        }); 
```

但是，当在第二页加载 select2 控件时，它无法识别 select2 选项，并且基本上不会加载其功能。我在两个页面中都有对 select2.js 的引用，其他一切都运行良好，但在那里。

1.  有谁知道如何解决这个问题？
2.  有没有更好的方法从另一个页面加载一个页面并让它工作？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T00:40:44.030

“从另一个页面加载一个页面”有点令人担忧。

一般原则如下：

*   `.load(...)`应该加载一个有效的 HTML 片段，而不是整个页面
*   通常，与加载的片段关联的 javascript 将出现在主机页面（第 1 页）上。如果您知道自己在做什么，*则可以*使用 HTML 片段加载脚本块，并且可以执行一定程度的控制来确定脚本是否被执行 - 请参阅[此处](http://api.jquery.com/load/)的“脚本执行”部分。
*   不冒泡的事件（例如，选择元素的“onchange”事件）的处理程序必须在片段加载后附加到元素
*   冒泡事件（例如，“鼠标悬停”、“点击”）的处理程序通常可以委托给主机页面上的静态容器，以便它们对现有和未来包含的元素进行操作。

有关附加事件处理程序的具体细节，请参见[.on](http://api.jquery.com/on/)。

# ruby-on-rails - 是否可以将 Redcarpet 扩展为从链接自动嵌入 youtube 视频？

> ID：12334590
> 
> 赞同：3
> 
> 时间：2012-09-08T21:20:07.587
> 
> 标签：ruby-on-rails, ruby, markdown, redcarpet

是否可以使用[Redcarpet](https://github.com/vmg/redcarpet) Markdown 库自动嵌入来自 youtube 共享链接的 youtube 视频？如果是这样，有人对如何去做有任何想法吗？（我正在使用 Ruby/Rails 3.2）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T01:40:33.917

当然可以，您可以覆盖 .to_html 方法，但您可能甚至不需要扩展它，而是可以执行类似的操作；

```
# my regex is a little rusty
@html = Redcarpet.new(@article.content).to_html
@html = @html.gsub(/\[youtube\s+(.*?)\]/, "....actual html you want in here with youtube id \\1 ") 
```

这将`[youtube YOUTUBE_ID]`用您的自定义 html 替换任何实例。

# eclipse - 如何在 Eclipse 中比较两个文件？

> ID：12334593
> 
> 赞同：7
> 
> 时间：2012-09-08T21:20:42.733
> 
> 标签：eclipse, diff

我想比较两个文件。一个在当前项目中，另一个在备份目录中。我知道如何比较它们是否在同一个项目中。如何在 Eclipse 中进行比较？Eclipse 中的 Flex 导航器是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T21:36:05.143

使用主菜单打开导航器：*Window->Show View->Navigator*。

*您可以使用Ctrl-click*在导航器中选择两个或多个文件，或者在 OSX 中使用*Command-click 。*现在*右键单击*任何一个选定的文件，然后选择菜单项：*Compare With->Each Other*。

问题是您的备用文件可能不在导航器中，例如您的备份目录未在导航器中列出。如果没有，*右键单击*导航器并选择菜单项：*New->Folder*。在出现的对话框中，单击*文件夹名称*字段下方的*高级>>*按钮，选择*链接到备用位置（链接文件夹）*，然后浏览以添加您的备份目录。

 **现在使用导航器，您将能够选择这两个文件，并使用*Compare With*。

您可以类似地使用包资源管理器比较文件。**

# octave - 传递函数中的倍频指数

> ID：12334600
> 
> 赞同：2
> 
> 时间：2012-09-08T21:21:34.480
> 
> 标签：octave

我试图弄清楚如何在变换函数中使用指数。通常，变换函数的形式为 tf(num, den)，其中 num 和 den 是线性多项式。我想转换 (1-exp(-Ts)/s。我似乎无法弄清楚如何处理 exp(-Ts)。有什么想法吗？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:12:47.977

我无法在 Octave 中找到处理此问题的特定函数。但是，我发现了一个效果很好的近似值。我打算使用泰勒级数近似。泰勒级数使用无限系列的有理数来收敛于 exp(-sT)。但是，Pade 近似效果更好，从我读到的几篇论文中，这是大多数人都在使用的。感谢您所有的帮助。

# mongodb - 使用 MongoDb C++ 驱动程序查询大型集合不同于 shell

> ID：12334604
> 
> 赞同：3
> 
> 时间：2012-09-08T21:22:01.877
> 
> 标签：mongodb, mongodb-query, mongodb-c

Windows 7 64 SP1 -- MongoDB 2.2.0-rc2 -- Boost 1.42 -- MS VS 2010 Ultimate -- C++ 驱动程序

在“Mongo in Action”之后，在 shell 中：

```
for(i=0; i<200000; i++){
  db.numbers.save({num: i});
} 
```

db.numbers.find() 显示：

```
{ "_id": ObjectId("4bfbf132dba1aa7c30ac830a"),"num" : 0 }
{ "_id": ObjectId("4bfbf132dba1aa7c30ac830b"),"num" : 1 }
{ "_id": ObjectId("4bfbf132dba1aa7c30ac830c"),"num" : 2 }
{ "_id": ObjectId("4bfbf132dba1aa7c30ac830d"),"num" : 3 }
... 
```

因此，在 C++ 中复制：

```
// Insert 200,000 documents
for ( int i = 0; i < 200000 ; i++)
  c.insert(dc,BSON(GENOID << "num" << i));

//Display the first 20 documents
Query qu = BSONObj();
auto_ptr<DBClientCursor> cursor = c.query(dc,qu); 
for ( int i = 0 ; i < 20 ; i++){
  cout << cursor->next().toString() << endl;
} 
```

输出：

```
{ "_id" : ObjectId("504bab737ed339cef0e26829"), "num" : 199924 }
{ "_id" : ObjectId("504bab737ed339cef0e2682a"), "num" : 199925 }
{ "_id" : ObjectId("504bab737ed339cef0e2682b"), "num" : 199926 }
{ "_id" : ObjectId("504bab737ed339cef0e2682c"), "num" : 199927 }
.... 
```

在 shell 中调用 db.numbers.find() 具有相同的输出。为什么它不以 {"num" : 0} 开头？它存在：

```
> db.numbers.find({"num" : 0})
{ "_id" : ObjectId("504bab417ed339cef0df5b35"), "num" : 0 } 
```

{"num" : 0} 的 _id 在 {"num" : 199924} 的 _id 之前

并且存在“_id”索引：

```
> db.numbers.getIndexes()
[
    {
            "v" : 1,
            "key" : {
                    "_id" : 1
            },
            "ns" : "learning.numbers",
            "name" : "_id_"
    }
] 
```

如果我通过将查询代码更改为读取来添加按_id排序：

```
auto_ptr<DBClientCursor> cursor = c.query(dc,qu.sort("_id")); 
```

然后它按顺序打印：

```
{ "_id": ObjectId("4bfbf132dba1aa7c30ac830a"),"num" : 0 }
{ "_id": ObjectId("4bfbf132dba1aa7c30ac830b"),"num" : 1 }
... 
```

较小的文档集合（例如 200 个）不会发生这种情况。

问题：为什么 C++ 查询似乎没有使用 _id 上的集合索引？或者还有什么可以解释这种明显的异常（或我缺乏理解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T23:04:37.207

索引和排序是不同的概念。您可以在索引中查找数据而无需对结果进行排序；您也可以在不使用索引的情况下对结果进行排序（尽管不推荐这样做）。

由于您没有为您`find()`的 指定排序顺序，结果将按[自然顺序](http://www.mongodb.org/display/DOCS/Sorting+and+Natural+Order)返回。对于仅插入文档（并且从未删除或更新）的集合，自然顺序应该近似于插入顺序（除非您碰巧使用了按插入顺序维护的[封顶集合）。](http://www.mongodb.org/display/DOCS/Capped+Collections)

一旦您开始删除或更新文档（这可能会导致它们被移动），MongoDB 的[预分配数据文件](http://www.mongodb.org/display/DOCS/Excessive+Disk+Space#ExcessiveDiskSpace-DatafilePreallocation)中就会产生可用空间“间隙” 。MongoDB 将重新使用可用空间进行新文档的插入/移动 .. 所以随着时间的推移，自然顺序将不再与插入顺序匹配。

如果您希望得到特定排序顺序的结果，则必须将其包含在查询中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:31:25.987

@stenni 谢谢——那些“差距”是问题所在，并引导我找到了解决方案。查询时，shell 中的自然顺序似乎比 C++ 驱动程序更“自然”，后者以非常大的“num”开头。但是，错误在于我的方法：

1.  在 shell 中插入 200000 个文档。
2.  `db.numbers.find()`; 列出的第一个文件是`{"num" : 0}`
3.  `db.numbers.remove()`
4.  使用 C++ 驱动插入 200000 个文档
5.  `db.numbers.find()`; 列出的第一个文件是`{"num" : SomeVeryLargeNumber}`

相反，我应该使用`db.numbers.drop()`，实际上删除了集合。这样做意味着第 5 步列出的第一个文档是`{"num" : 0}`. `db.numbers.remove`显然保持了差距。

# javascript - Javascript JQuery 类库

> ID：12334607
> 
> 赞同：1
> 
> 时间：2012-09-08T21:22:45.557
> 
> 标签：javascript, jquery

我正在尝试模仿一个 JQuery 库（出于学习目的），但我坚持以下几点：

```
function _(id){
var about={
version:"1.0",
author:"Samson"
}
if (this===window)
    return new _(id);
if (!id) 
    return about;
if (typeof id=="string")
    this.element=document.getElementById(id);
else
    this.element=id;

return this;
}

_.prototype={
    append:function(str){
        this.element.innerHTML+=str;
        return this;
    },
    post:function(url){
        alert('posting to: '+url);
    }
} 
```

我可以这样使用：

```
_("a1").append(' deescription'); 
```

但我希望能够在不调用构造函数的情况下使用 post 函数：

```
_.post('url') //post is in the prototype but is undefined because the constructor is not called right? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T21:27:04.183

您将需要对其自身进行定义`post`，`_`而不是对其原型进行定义。

```
_.post = function(url) { ... } 
```

# css - 是否过度使用 0px 的 .thumbnails{marging-left:20px} 与在 Firebug 中取消选中它相同吗？

> ID：12334609
> 
> 赞同：0
> 
> 时间：2012-09-08T21:23:15.163
> 
> 标签：css, twitter-bootstrap, grid

这是链接：[http ://unlockinglg.com/beta/index.html](http://unlockinglg.com/beta/index.html)

基本上我希望我的缩略图与上面的其余内容保持一致。

现在它向左倾斜。

[通过取消选中 .thumbnails{marging-left:20px} http://screencast.com/t/4xCmVzWxfr](http://screencast.com/t/4xCmVzWxfr)查看我的意思的视频 。

我尝试通过 .thumbnails{marging-left:0px} 覆盖它，但这没有用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T21:41:24.910

正如您在 firebug 中看到的，还有另一个设置`margin-left`属性的规则。通过取消检查规则，您不会将其设置为 0，而是忽略它（因此它会查找其他适用的规则）。

它可能适用`margin-left: inherit;`并且应该适用 `margin-left: 25px;`

但这不是真正的问题：`.thumbnails`表现得像 a`.row`所以它不应该直接包含在其中。

为简单起见，**请尝试删除`.row`wrapper**。

```
<div class="marketing">
    <div class="row">
        <!-- ... -->
    </div>
    <hr>
    <!-- no .row -->
        <ul class="thumbnails steps">
            <li class="span4">
                <!-- ... -->
            </li>
        </ul>
    <!-- no /.row -->
</div> 
```

# android - 模拟视频采集到 Android 手机

> ID：12334612
> 
> 赞同：2
> 
> 时间：2012-09-08T21:23:59.310
> 
> 标签：android, video-capture, analog-digital-converter

我正在寻找一种在安卓手机上显示模拟视频流的方法。在 pc/mac/etc 上，您可以使用便宜的 usb 模数转换器（例如抓斗）来实现此目的：[http](http://www.terratec.net/en/products/Grabby_82248.html) ://www.terratec.net/en/products/Grabby_82248.html ，然后在 VLC 上查看，例如.

如果有合适的驱动程序可用，这样的事情（理论上）会在 android 上起作用吗？（即，是否有任何硬件问题使这成为不可能？）

有谁知道这种带有android驱动程序的设备是否可用？

最终，我想制作一个与抓斗（或类似设备）交互的应用程序，并允许用户在 android 上查看视频并捕获和发送短片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T21:41:22.383

首先Android设备需要支持USB Host。这极大地限制了您的用户群。

然后是电源的问题。一些 USB 主机设备将不兼容，这仅仅是因为 Android 手机无法将足够的电力输送到端口以使其正常运行。

我不确定驱动程序，但我 99% 确定它不会“开箱即用”。

你当然应该看看[这个](http://forum.xda-developers.com/showthread.php?t=1841759)项目。这与您尝试执行的操作非常相似。也许你应该考虑与那个人取得联系。

编辑：基于在我上面提到的项目中运行 DVB-T 加密狗所花费的时间，创建一个每个人都可以简单地下载和使用的应用程序的机会非常渺茫。需要使用修改后的内核和特殊脚本才能运行该加密狗。当然我可能是错的。您可以自己继续研究或等待比我更有经验的人回复。

# php - php mysql 获取计数 WHERE BETWEEN AND

> ID：12334613
> 
> 赞同：0
> 
> 时间：2012-09-08T21:23:59.740
> 
> 标签：php, mysql, mysqli, between

嘿，当我试图从表中获取行数时，我遇到了一个小问题，在`date`哪里`BETWEEN 2012-09-01 AND 2012-09-32`......

你能告诉我问题出在哪里吗？

```
$month = date(m);
$year = date(Y);
$day_start = '01';
$day_end = '32';

$from = $year.'-'.$month.'-'.$day_start;
$till = $year.'-'.$month.'-'.$day_end;

$result1 = $mysqli->query("SELECT COUNT(id) FROM `dreams` WHERE dream_state='dream' AND date BETWEEN $from AND $till");
$row1 = $result1->fetch_row();
$this_dream = $row1[0]; 
```

我试图将字符串转换为时间和从时间到日期，如下所示：

```
$from = strtotime($from);
$from = date("Y-m-d",$from);

$till = strtotime($till);
$till = date("Y-m-d",$till); 
```

但仍然不起作用，所以有什么想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T22:07:22.897

首先，您的`date`列需要是某种日期数据类型，例如`DATE`or `TIMESTAMP`。

其次，您需要使用有效日期进行比较。9月32日不好。当 MySQL 试图解释该日期时，它会变为 NULL。真实值和 NULL 之间的所有比较都是错误的。所以，你得到一个空的结果集。

第三，`BETWEEN`日期比较很糟糕；它经常弄乱范围的最后一天 - 最后一天。

我建议你使用这样的查询。请注意，第二个`date`比较对象是您想要的范围结束*后的第二天。*

```
$month = date(m);
$year = date(Y);
$day_start = '01';
$from = $year.'-'.$month.'-'.$day_start;

$result1 = $mysqli->query("SELECT COUNT(id) 
                             FROM `dreams`
                            WHERE dream_state='dream' 
                              AND date >= '$from'
                              AND date < '$from' + INTERVAL 1 MONTH");
$row1 = $result1->fetch_row();
$this_dream = $row1[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T22:02:25.867

您在日期中包含破折号，但不要在 SQL 中将它们作为字符串引用。SQL 中没有日期文字，因此您必须在输入时将日期表示为字符串。只需将它们括在单引号中即可表示 SQL 值字符串。

```
$result1 = $mysqli->query("SELECT COUNT(id) FROM `dreams` WHERE dream_state='dream'
                           AND date BETWEEN '$from' AND '$till'"); 
```

您还有一个无效的日期，因为没有一个月有 32 天。在这里计算每个月的最后一天似乎有点矫枉过正，因此您最好描述下个月的第一天，并将`<`其排除在范围之外。

*此答案的先前版本建议使用数字而不是字符串来描述日期。正如@ypercube 在下面的评论中指出的那样，虽然这可行，但它可能对性能非常不利。*

# php - 删除由冒号分隔的字符串的最后一部分

> ID：12334614
> 
> 赞同：11
> 
> 时间：2012-09-08T21:24:44.723
> 
> 标签：php, string

我有一个看起来有点像这样的字符串，`world:region:bash`

它划分文件夹名称，因此我可以为 FTP 功能创建路径。

但是，我需要在某些时候能够删除字符串的最后一部分，例如

我有这个`world:region:bash`

我需要得到这个`world:region`

该脚本将无法知道文件夹名称是什么，因此它需要如何删除最后一个冒号后的字符串。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-08T21:29:05.553

```
$res=substr($input,0,strrpos($input,':')); 
```

我可能应该强调 strrpos 而不是 strpos 在给定字符串中找到最后一次出现的子字符串

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-08T21:31:43.650

```
$tokens = explode(':', $string);      // split string on :
array_pop($tokens);                   // get rid of last element
$newString = implode(':', $tokens);   // wrap back 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-08T21:33:24.053

您可能想尝试这样的事情：

```
<?php
  $variable = "world:region:bash";
  $colpos = strrpos($variable, ":");
  $result = substr($variable, 0, $colpos);
  echo $result;
?> 
```

或者...如果您使用此信息创建一个函数，您会得到：

```
<?php
  function StrRemoveLastPart($string, $delimiter)
  {
    $lastdelpos = strrpos($string, $delimiter);
    $result = substr($string, 0, $lastdelpos);
    return $result;
  }

  $variable = "world:region:bash";
  $result = StrRemoveLastPart($variable, ":");
?> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-08T21:29:32.567

分解字符串，并删除最后一个元素。如果您再次需要该字符串，请使用 implode。

```
$items = array_pop(explode(':', $the_path));
$shotpath = implode(':', $items); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-08T21:34:22.103

使用正则表达式`/:[^:]+$/`，[preg_replace](http://php.net/manual/en/function.preg-replace.php)

```
$s = "world:region:bash";
$p = "/:[^:]+$/";
$r = '';

echo preg_replace($p, $r, $s); 
```

[演示](http://ideone.com/ybz3r)

请注意如何`$`使用这意味着字符串终止。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-04-20T13:38:50.570

```
<?php
$string = 'world:region:bash';
$string = implode(':', explode(':', $string, -1)); 
```

# php - xmlhttp.responseText 中显示的标签

> ID：12334615
> 
> 赞同：0
> 
> 时间：2012-09-08T21:24:46.250
> 
> 标签：php, javascript, html, ajax

当我用显示的 xmlhttp.responseText 标记中的内容填充我的文本框时，怎么会？表明

```
<!DOCTYPE html><html><body></body></html> 
```

以及我希望它显示的内容。有没有办法让它不显示标签？Javascript和AJAX代码如下：

```
function loadDoc()
{
   var xmlhttp;

   // code for IE7+, Firefox, Chrome, Opera, Safari
   if (window.XMLHttpRequest)
   {
      xmlhttp=new XMLHttpRequest();
   }
   // code for IE6, IE5
   else
   {
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }

   xmlhttp.onreadystatechange=function()
   {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
      {
         document.getElementById("textbox").value=xmlhttp.responseText;
      }
   }

   xmlhttp.open("GET","loadTextBox.php?id=4",true);
   xmlhttp.send();
} 
```

loadTextBox.php 的添加代码如下：

```
<?php
---placeholder for correct db login info---

$result = $mysql->query(---placeholder for correct SQL query---);

while ($row = $result->fetch_object())
{
   $queryResult = $row->column_1;
}
$textboxValue = $queryResult;
echo $textboxValue; 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T21:50:31.690

好吧，我无法重现您的问题，因此我不得不稍微即兴发挥才能获得与您相同的 responseText。无论如何，这是我想出的，如果它不起作用，请告诉我：

```
var doc = window.document.createElement("doc");
doc.innerHTML = xmlhttp.responseText;
document.getElementById("textbox").value=doc.innerHTML; 
```

替换您当前的实例：

```
document.getElementById("textbox").value=xmlhttp.responseText; 
```

接着就，随即。

# javascript - Twitter Bootstrap - 带有 div 内容而不是列表的下拉菜单

> ID：12334619
> 
> 赞同：8
> 
> 时间：2012-09-08T21:25:19.063
> 
> 标签：javascript, html, css, twitter-bootstrap

推荐的方法是什么？

这是我所做的示例[http://jsfiddle.net/T9QHw/56/](http://jsfiddle.net/T9QHw/56/) 左侧的 Normal 下拉菜单和右侧的 div 版本。

但是 div 的行为有点滑稽。如果我单击它，它会自行关闭，并将`a`标签样式设置为块。

我应该以不同的方式这样做吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-08T21:51:02.817

也许您想使用[Popover](http://getbootstrap.com/javascript/#popovers)组件而不是 Dropdown 组件？

# c# - 使用除 dataValueField/dataTextField 之外的第三个值将 ViewModel 绑定到 DropDownListFor

> ID：12334623
> 
> 赞同：0
> 
> 时间：2012-09-08T21:26:05.370
> 
> 标签：c#, asp.net-mvc

当我在我的视图中显示 testplanViewModels 列表并且用户选择一个时，SelectedTestplanId 将返回到控制器发布操作。还应该返回属于 SelectedTestplanId 的 TemplateId。

当 AutoMapper 定义运行时，**Testplan.TestplanId**被隐式复制到**TestplanViewModel.TestplanId**。同样可以通过在 TestplanViewModel 上提供**TemplateId来完成。**当用户现在在视图中选择“TestplanViewModel”时，如何将 TemplateId 附加到控制器操作以在那里访问它？DropDownList 不允许 2 个 dataValueFields！

```
CreateMap<Testplan, TestplanViewModel>().ForMember(dest => dest.Name, opt => opt.MapFrom(src => string.Format("{0}-{1}-{2}-{3}", src.Release.Name, src.Template.Name, src.CreatedAt, src.CreatedBy)));

public ActionResult OpenTestplanViewModels()
{
    IEnumerable<Testplan> testplans = _testplanDataProvider.GetTestplans();          
    var viewModel = new OpenTestplanViewModel
    {
        DisplayList = Mapper.Map<IEnumerable<Testplan>, IEnumerable<TestplanViewModel>>(testplans)
    };
    return PartialView(viewModel);
}

public class TestplanViewModel
{      
    public int TestplanId { get; set; }     
    public string Name { get; set; }           
}

public class OpenTestplanViewModel
{
    [Required(ErrorMessage = "No item selected.")]
    public int SelectedTestplanId { get; set; } 
    public IEnumerable<TestplanViewModel> DisplayList { get; set; }       
} 
```

**开放测试计划视图模型**

```
@using (Html.BeginForm("Open", "Testplan"))
{ 
    @Html.ValidationSummary(false)      
    @Html.DropDownListFor(x => x.SelectedTestplanId, new SelectList(Model.DisplayList, "TestplanId", "Name"), new { @class = "listviewmodel" })  
} 
```

**解决方案**：

```
 public class OpenTestplanViewModel
    {
        [Required(ErrorMessage = "No item selected.")]
        public string TestplanIdAndTemplateId { get; set; } 
        public IEnumerable<TestplanViewModel> DisplayList { get; set; }

        public int SelectedTestplanId
        {
            get
            {
                return Convert.ToInt32(TestplanIdAndTemplateId.Split(new[] { '_' }).First());
            }
        }
        public int SelectedTemplateId
        {
            get
            {
                return Convert.ToInt32(TestplanIdAndTemplateId.Split(new[] { '_' }).Last());
            }
        }   
    }

 CreateMap<Testplan, TestplanViewModel>()
                .ForMember(d => d.Name, o => o.MapFrom(src =>  string.Format("{0}-{1}-{2}-{3}", src.Release.Name, src.Template.Name, src.CreatedAt, src.CreatedBy)))
                .ForMember(d => d.TestplanIdAndTemplateId, o => o.MapFrom(src => src.TestplanId + "_" + src.TemplateId)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T21:48:28.660

HTML 并不是这样工作的。如果您希望从帖子中为下拉列表返回多个值（助手生成一个`select`元素），则必须在视图模型上创建一个属性，然后在控制器中解析该属性。

例如，如果您有两个整数`ID`字段，则组合属性可以创建一个类似于`23_42`. 然后，您可以使用该`Split`方法获取正确的值 ( `23`& `42`)。

# python - Django 构造函数和 Mixin

> ID：12334625
> 
> 赞同：0
> 
> 时间：2012-09-08T21:26:13.663
> 
> 标签：python, django

我有一个看起来像这样的模型：

```
class Base(models.Model):
  pass

class Mixin1(Base):
  active = models.BooleanField(default=False)

class Mixin2(Base):
  name = models.CharField(max_length=200,blank=False,null=False)

class Organization(Mixin1, Mixin2, Base):
  pass 
```

这工作正常：

```
organization = Organization(name='name')
organization.active = True
organization.save() 
```

但这不会：

```
organization = Organization(name='name', active=True)
organization.save() 
```

Django 在构造函数上出错：

```
TypeError: 'active' is an invalid keyword argument for this function 
```

a 关于mixins，我有什么遗漏吗？

**我所看到的更新：** 使用新的 PostgreSQL 数据库和新的外壳。

```
Python 2.7.3 (default, Sep  5 2012, 20:48:07) 
[GCC 4.2.1 Compatible Apple Clang 4.0 ((tags/Apple/clang-421.0.60))] on darwin
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> from core.models.organizations import Organization
>>> org1 = Organization(name='name')
>>> org1
<Organization: name>
>>> org1.active = True
>>> org1
<Organization: name>
>>> org1.active
True
>>> org2 = Organization(name='org2',active=True)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "<myprojectpath>/venv/lib/python2.7/site-packages/django/db/models/base.py", line 367, in __init__
    raise TypeError("'%s' is an invalid keyword argument for this function" % kwargs.keys()[0])
TypeError: 'active' is an invalid keyword argument for this function
>>> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T22:09:14.470

有效，我刚试过。

```
In [2]: model = Model(name='name')
In [3]: model.active = True
In [4]: model.save()

In [5]: model = Model(name='name2', active=True)
In [6]: model.save()

In [9]: Model.objects.all()
Out[9]: [<Model: Model object>, <Model: Model object>] 
```

问题应该出在其他地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T05:02:41.373

我有一个陈旧的 .pyc 文件，把事情搞砸了。我将文件从 organization.py 更改为 organizations.py。出于某种原因，organization.pyc 卡住并被另一个模型文件导入。令人沮丧。

# linux - Azure CLI 工具无法在 CentOS 6.3 上运行（找不到 /usr/bin/node）——解决方法？

> ID：12334629
> 
> 赞同：0
> 
> 时间：2012-09-08T21:26:38.050
> 
> 标签：linux, azure, command-line-interface

刚刚安装了 node.JS，所以我可以在 CentOS 6.3 机器上安装 Azure cmd line 工具。据此，“azure”调用“node”（每个strace）存在问题。由于 MSFT 根本不支持 Azure，显然，我想知道谁会收到这样的错误报告，还有其他人有解决方案吗？

```
[murphstein@localhost ~]$ which node
/usr/bin/node
[murphstein@localhost ~]$ which azure
/usr/bin/azure
[murphstein@localhost ~]$ ls -l /usr/bin/{azure,node}
lrwxrwxrwx. 1 root root 35 Sep  8 13:57 /usr/bin/azure -> ../lib/node_modules/azure/bin/azure
lrwxrwxrwx. 1 root root  8 Sep  8 13:56 /usr/bin/node -> ./nodejs
[murphstein@localhost ~]$ strace /usr/bin/azure
execve("/usr/bin/azure", ["/usr/bin/azure"], [/* 38 vars */]) = 0
brk(0)                                  = 0x1160000
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f5928bd9000
access("/etc/ld.so.preload", R_OK)      = -1 ENOENT (No such file or directory)
open("/etc/ld.so.cache", O_RDONLY)      = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=49164, ...}) = 0
mmap(NULL, 49164, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f5928bcc000
close(3)                                = 0
open("/lib64/libc.so.6", O_RDONLY)      = 3
read(3, "\177ELF\2\1\1\3\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\360\355\1\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=1912432, ...}) = 0
mmap(NULL, 3741864, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f5928629000
mprotect(0x7f59287b2000, 2093056, PROT_NONE) = 0
mmap(0x7f59289b1000, 20480, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x188000) = 0x7f59289b1000
mmap(0x7f59289b6000, 18600, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f59289b6000
close(3)                                = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f5928bcb000
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f5928bca000
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f5928bc9000
arch_prctl(ARCH_SET_FS, 0x7f5928bca700) = 0
mprotect(0x7f59289b1000, 16384, PROT_READ) = 0
mprotect(0x7f5928bda000, 4096, PROT_READ) = 0
munmap(0x7f5928bcc000, 49164)           = 0
brk(0)                                  = 0x1160000
brk(0x1181000)                          = 0x1181000
open("/usr/lib/locale/locale-archive", O_RDONLY) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=99158576, ...}) = 0
mmap(NULL, 99158576, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f5922798000
close(3)                                = 0
execve("/usr/local/bin/node\r", ["node\r", "/usr/bin/azure"], [/* 38 vars */]) = -1 ENOENT (No such file or directory)
execve("/usr/bin/node\r", ["node\r", "/usr/bin/azure"], [/* 38 vars */]) = -1 ENOENT (No such file or directory)
execve("/bin/node\r", ["node\r", "/usr/bin/azure"], [/* 38 vars */]) = -1 ENOENT (No such file or directory)
execve("/usr/local/sbin/node\r", ["node\r", "/usr/bin/azure"], [/* 38 vars */]) = -1 ENOENT (No such file or directory)
execve("/usr/sbin/node\r", ["node\r", "/usr/bin/azure"], [/* 38 vars */]) = -1 ENOENT (No such file or directory)
execve("/sbin/node\r", ["node\r", "/usr/bin/azure"], [/* 38 vars */]) = -1 ENOENT (No such file or directory)
execve("/home/murphstein/bin/node\r", ["node\r", "/usr/bin/azure"], [/* 38 vars */]) = -1 ENOENT (No such file or directory)
write(2, "/usr/bin/env: ", 14/usr/bin/env: )          = 14
)                   = 5e
open("/usr/share/locale/locale.alias", O_RDONLY) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=2512, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f5928bd8000
read(3, "# Locale name alias data base.\n#"..., 4096) = 2512
read(3, "", 4096)                       = 0
close(3)                                = 0
munmap(0x7f5928bd8000, 4096)            = 0
open("/usr/share/locale/en_US.UTF-8/LC_MESSAGES/libc.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/share/locale/en_US.utf8/LC_MESSAGES/libc.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/share/locale/en_US/LC_MESSAGES/libc.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/share/locale/en.UTF-8/LC_MESSAGES/libc.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/share/locale/en.utf8/LC_MESSAGES/libc.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/share/locale/en/LC_MESSAGES/libc.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
write(2, ": No such file or directory", 27: No such file or directory) = 27
write(2, "\n", 1
)                       = 1
close(1)                                = 0
close(2)                                = 0
exit_group(127)                         = ?
[murphstein@localhost ~]$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:09:06.763

我实际上在 Gentoo 上使用 Node v0.9.0。

每当我尝试运行“azure”时，都会遇到同样的错误。但是，我可以 cd 进入 azure-sdk...\bin 文件夹，然后运行“node azure”，它工作正常。

后来我看到你的帖子，它也很好用。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T22:35:20.910

好的，问题原来是使用字符串“/usr/bin/node\r”调用 execve() 的“天蓝色”。

一种解决方法是这样做：

```
% cd /usr/bin
% sudo ln -s ./nodejs ./node^V^M 
```

是的，在文件名的末尾加上一个 DOS 回车（即 Ctrl-V Ctrl-M）可以解决这个问题，但谁知道接下来会发生什么。我至少能够导入我的订阅信息，并且到目前为止，“azure”子命令似乎正在工作。

# c# - 将任务作为操作调用的 C# 动态方法

> ID：12334639
> 
> 赞同：2
> 
> 时间：2012-09-08T21:28:49.530
> 
> 标签：c#, multithreading, task

我不喜欢 switch 语句。但是，我无法对以下情况提出任何替代想法。请给我一个想法。

```
// Parses MyTask object and routes for execution at a new task
private void PerformTask(MyTask task)
{
    Action<object> taskAction = null;

    // routing
    switch (task.Command)
    {
        case "MethodX":
            taskAction = MethodX;
            break;

        case "MethodY":
            taskAction = MethodY;
            break;

        default:
            break;
    }

   if (taskAction == null)
        return;

    Task t1 = Task.Factory.StartNew(taskAction, task);
}

private void MethodX(MyTask task)
{
    // do it something
}

private void MethodY(MyTask task)
{
    // do it something different
}

// task holder struct
public struct MyTask
{
    public string Command;
    public int[] Args;
    public int Id;

    public MyTask(string command, int[] args, int id)
    {
        this.Command = command;
        this.Args = args;
        this.Id = id;
    }

}

// Gets next task as a MyTask object and performs it.
// Thread method that is polls task queue
private void DoSomeWorks()
{
   ...
   MyTask task = GetNextTask();
   PerformTask(task);
   ...
} 
```

我有一些不同的任务应该异步运行。这些被保存为 MyTask 结构。

在**DoSomeWorks**方法中，下一个任务从我的任务队列中取出，然后传递给 PerformTask 方法执行。**PerformTask**方法 (nitty-gritty) 确定将为任务处理哪个方法。我刚刚用 switch case 语句实现了这个路由操作。但是，我想动态地做到这一点。如何使用命令字符串动态调用方法？

我尝试过这样的事情；

```
MethodInfo methodInfo = typeof(MyClass).GetMethod(task.Command); 
```

但我无法从 MethodInfo 转换为 Action。嗯，我需要帮助。

**编辑：**
感谢您的回答。我已经尝试了这两个建议。这就是我需要的：

```
private void PerformTask(MyTask task)
{
  MethodInfo methodInfo = typeof(MyClass).GetMethod(task.Command);

  if (methodInfo != null)
    Task.Factory.StartNew(() => methodInfo.Invoke(this, new object[] { task }));
} 
```

我不再需要 Action 对象了。所以，我可以将通用参数对象传递给方法。非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T21:40:39.610

关于什么：

```
MethodInfo methodInfo = typeof(MyClass).GetMethod(task.Command);
if (methodInfo != null)
  Task.Factory.StartNew(() => methodInfo.Invoke(this, new []{ task })); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T21:39:45.490

有一个`MethodInfo`，你可以试试

```
Delegate d = Delegate.CreateDelegate(typeof(Action), this, methodInfo);
Action act = () => d.DynamicInvoke; 
```

要不就

```
Action act = d.Invoke; 
```

有关更多详细信息，请参阅[MSDN 文章`Delegate.CreateDelegate`](http://msdn.microsoft.com/en-us/library/74x8f551)的示例部分。

# javascript - 半沙箱 Javascript 评估

> ID：12334646
> 
> 赞同：8
> 
> 时间：2012-09-08T21:29:54.223
> 
> 标签：javascript, eval, greasemonkey, sandbox

**背景**：我正在开发一个框架/库，用于与greasemonkey/userscripts 协调的特定站点。这个框架/库将允许插件支持。它的工作方式是在库中注册一个插件，列出所需的页面、资源等，并且该库将等到满足所有条件才能调用插件的`load()`函数。

**问题**：在这个“必需的东西”列表中，我希望插件开发人员能够指定要评估为“必需资源”的 javascript（作为字符串）。例如`'document.getElementById("banana")'`. 我想要做的是半沙箱评估“所需资源”，因此评估可以访问窗口和 DOM 对象，但不能直接更改它们。我还想让 eval 和 evalJS 无法从沙箱中访问。

**例子**：

*   `document.getElementById("banana")`-> 有效
*   `document.getElementById("apple).id = "orange"`-> 无效
*   `window.grape`-> 有效
*   `window.grape = 'potato'`-> 无效
*   `(someObj.applesCount > 0 ? 'some' : 'none')`-> 有效

**到目前为止我所拥有的**：

```
function safeEval(input) {

    // Remove eval and evalJS from the window:
    var e = [window.eval, window.evalJS], a;
    window.eval = function(){};
    window.evalJS = function(){};

    try {

        /* More sanition needed before being passed to eval */

        // Eval the input, stuffed into an annonomous function
        // so the code to be evalued can not access the stored
        // eval functions:
        a = (e[0])("(function(){return "+input+"}())");
    } catch(ex){}

    // Return eval and evalJS to the window:
    window.eval = e[0];
    window.evalJS = e[1];

    // Return the eval'd result
    return a;
} 
```

**注意**：
这是一个 Greasemonkey/用户脚本。我没有直接访问权限来更改站点，或者它是 javascript。
for 的输入`safeEval()`可以是任何有效的 javascript，可以是 DOM 查询，也可以是简单的求值，只要它不改变窗口对象或 DOM。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T17:54:05.583

没有绝对的方法可以阻止最终用户或插件开发人员在 JavaScript 中执行特定代码。这就是为什么说像 JavaScript 这样的开源语言中的安全措施是万无一失的（因为它只对傻瓜有效）。

话虽如此，但让我们构建一个沙盒安全层，以防止没有经验的开发人员破坏您的网站。我个人更喜欢使用`Function`构造函数`eval`来执行用户代码，原因如下：

1.  代码被包装在一个匿名函数中。因此，它可以存储在一个变量中，并根据需要多次调用。
2.  该函数始终存在于全局范围内。因此，它无法访问创建函数的块中的局部变量。
3.  该函数可以传递任意命名参数。因此，您可以利用此功能来传递或导入用户代码（例如`jQuery`）所需的模块。
4.  最重要的是，您可以设置一个自定义指针并创建名为and的`this`局部变量，以防止访问全局范围和 DOM。这允许您创建自己的 DOM 版本并将其传递给用户代码。`window``document`

但是请注意，即使这种模式也有缺点。最重要的是，它可能只会阻止直接访问全局范围。`var`用户代码仍然可以通过简单地声明不带`this`.

所以让我们看一些代码：http: [//jsfiddle.net/C3Kw7/](http://jsfiddle.net/C3Kw7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:51:53.230

如果您想要的只是一个简单的 getter，请编写一个而不是尝试评估任何东西。

```
function get(input) {
    // if input is a string, it will be used as a DOM selector
    // if it is an array (of strings), they will access properties of the global object
    if (typeof input == "string")
        return document.querySelector(input);
    else if (Array.isArray(input)) {
        var res = window;
        for (var i=0; i<input.length && typeof input[i] == "string" && res; i++)
            res = res[input[i]];
        return res;
    }
    return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T17:16:33.413

你可以这样做：http: [//jsfiddle.net/g68NP/](http://jsfiddle.net/g68NP/)

问题是您必须添加大量代码来保护每个属性、每个本机方法等。代码的实质归结为 using `__defineGetter__`，它的支持是有限的。由于您可能没有在 IE 上运行它，所以应该没问题。

编辑： http: [//jsfiddle.net/g68NP/1/](http://jsfiddle.net/g68NP/1/) 此代码将使所有属性只读。的使用`hasOwnProperty()`可能是可取的，也可能不是可取的。

如果 JSFiddle 出现故障：

```
function safeEval(input) {
    // Remove eval and evalJS from the window:
    var e = [window.eval, window.evalJS, document.getElementById], a;
    window.eval = function(){};
    window.evalJS = function(){};
    document.getElementById = function (id) {
        var elem = (e[2]).call(document, id);
        for (var prop in elem) {
            if (elem.hasOwnProperty(prop)) {
                elem.__defineGetter__(prop, function () {
                    return (function (val) {
                        return val;
                    }(elem[prop]));
                });
            }                
        }
        return elem;
    };

    try {
        /* More sanition needed before being passed to eval */

        // Eval the input, stuffed into an annonomous function
        // so the code to be evalued can not access the stored
        // eval functions:
        a = (e[0])("(function(){return " + input + "}())");
    } catch(ex){}

    // Return eval and evalJS to the window:
    window.eval = e[0];
    window.evalJS = e[1];
    document.getElementById = e[2];

    // Return the eval'd result
    return a;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-15T16:09:47.707

我知道这是一篇旧帖子，但我只想分享**Aadit M Shah**解决方案的升级版本，这似乎真的是沙盒，没有任何方式访问窗口（或窗口子项）：http: [//jsfiddle.net/C3Kw7 /20/](http://jsfiddle.net/C3Kw7/20/)

```
// create our own local versions of window and document with limited functionality

var locals = {
    window: {
    },
    document: {
    }
};

var that = Object.create(null); // create our own this object for the user code
var code = document.querySelector("textarea").value; // get the user code
var sandbox = createSandbox(code, that, locals); // create a sandbox

sandbox(); // call the user code in the sandbox

function createSandbox(code, that, locals) {
    code = '"use strict";' + code;
    var params = []; // the names of local variables
    var args = []; // the local variables

    var keys = Object.getOwnPropertyNames( window ),
    value;

    for( var i = 0; i < keys.length; ++i ) {
        //console.log(keys[i]);
        locals[keys[i]] = null;  
    }

    delete locals['eval'];
    delete locals['arguments'];

    locals['alert'] = window.alert; // enable alert to be used

    for (var param in locals) {
        if (locals.hasOwnProperty(param)) {
            args.push(locals[param]);
            params.push(param);
        }
    }

    var context = Array.prototype.concat.call(that, params, code); // create the parameter list for the sandbox
    //console.log(context);
    var sandbox = new (Function.prototype.bind.apply(Function, context)); // create the sandbox function
    context = Array.prototype.concat.call(that, args); // create the argument list for the sandbox

    return Function.prototype.bind.apply(sandbox, context); // bind the local variables to the sandbox
} 
```

# c++ - 重载类本身

> ID：12334647
> 
> 赞同：1
> 
> 时间：2012-09-08T21:30:00.077
> 
> 标签：c++, class, operator-overloading

假设我有一堂课：

```
class foo
{
    ....
    //some constructors here set val=34
    ....
    private:
    int val;
    int & foo::operator,()
    {
      return val;
    }
}; 
```

我希望能够将其用作：

```
foo bar;
printf("  %d ", bar);   //i need to get value of bar.val
                        //with just using bar itself with
                        //using an overloading
                        //but , overloading does not work
                        //i need to get 34 without using bar.val
                        //i need this without any getter 
                        //i need val to be private 
```

问题：这种超载可能吗？如果是，如何？

我试过：

```
int foo::operator int()
{
    return val;
} 
```

但它说“可能未在转换函数上指定返回类型”:(

我试过：

```
operator int() const { return val; } 
```

转换仅在 printf 和 cout 之外有效。

```
 int e=foo;
 printf(" %d ",e); //works 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T21:38:14.383

您不能重载一个类，但您可以使用转换运算符，以便它根据该上下文中的预期参数自动转换为不同的类型。在您的情况下，就像 一样`val`，`int`您会将转换重载为`int`：

```
operator int() const { return val; } 
```

现在`int`，只要需要 a 并且您提供 a `foo`，就会应用此转换。

有一些限制。例如，如果您传递`foo`给相应参数的类型为泛型的函数模板，则该位置将不会进行转换。转换也不会影响不强制类型的其他表达式。例如，如果`f`是 type `foo`，那么`&f`将始终是 type `foo*`，而不是`int*`。对于大多数实际应用，这一切正是您所需要的。但我相信 C 风格的可变参数`printf`正是没有明确定义的预期类型的​​情况。最好使用 C++ 风格的调用或显式强制转换`static_cast<int>(f)`。

如果两者都不适合您，那么您就有麻烦了：C++ 逻辑无法推断出您在`int`此处需要 a 的事实，仅仅因为您`%d`在某些字符串常量中包含了 a 。类型转换是编译时的事情，而格式字符串的解释是在运行时完成的（除了像 gcc 那样生成警告时）。编译器不知道该参数需要是什么类型，因此它不知道要执行什么转换，因此您必须以某种方式帮助他。

只要这`int val`是 的唯一成员`foo`，并且该类中也没有虚函数，并且没有具有任何数据成员的基类或虚函数，则类对象的内存布局`foo`通常是相同的作为一个普通整数。这意味着无类型的 C 风格`printf`将无法区分，即使根本没有任何转换。但是依靠这个真的很糟糕，所以我建议不要使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T21:33:58.470

不要超载逗号或其他可怕的东西。`printf`具有省略号参数，因此它接受您提供给它的任何内容，您必须确保您提供的内容是正确的。把事情简单化：

```
class foo
{
    ....
    //some constructors here set val=34
    ....
private:
    int val;
public:
    int value()
    {
      return val;
    }
};

int main()
{
    foo bar;
    printf("  %d ", bar.value());   //you get value of bar.val
} 
```

`printf`不会调用你的任何运算符吧（包括转换运算符），所以这些对你没有帮助。即使你有`operator int()`你仍然应该这样写：

```
 printf("  %d ", (int)bar);   //you get value of bar.val 
```

那不是更好看。甚至：

```
 printf("  %d ", +bar);   //you get value of bar.val 
```

最令人困惑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T21:42:30.180

不，这是不可能的。

首先，逗号运算符在这里不适用，因为逗号用于分隔 printf 参数，它优先于用作运算符的逗号。

添加转换运算符没有帮助，因为 printf 的声明是

```
printf(const char *,...); 
```

这意味着编译器不知道参数应该是什么类型（除了第一个），因此它不会进行任何转换。

# python - 在 python 中使用实时 UDP 数据更新 GUI

> ID：12334648
> 
> 赞同：1
> 
> 时间：2012-09-08T21:30:06.507
> 
> 标签：python, multithreading, real-time, pygtk, glade

我正在使用 Glade、python 和 pygtk 开发一个非常基本的 GUI，它将根据通过 UDP 套接字接收的实时数据进行自我更新。接收到的数据包每 256 毫秒发送一次。据我了解，我需要使用线程接收这些数据，以在接收数据时保持我的 GUI 响应。我已经尝试这样做。结果 GUI 会打开，但我没有从我的 UDP（dpmserver 线程）获得任何 OP . 我已经单独尝试了 dpmserver 模块，它工作正常。我是线程新手。实际上，这是我在 python 中使用线程的第一个程序。如何让我的 GUI 保持响应并同时接收数据？代码如下：

```
TMSTART=41
PACKETSIZE=133
FIELD=9
TMEND=(PACKETSIZE-1)-FIELD
import socket
import sys
import string
import os.path
import urllib2
import string
import linecache
from pprint import pprint,pformat
import threading
try:
  import pygtk
  pygtk.require("2.0")
except:
  print "You need to install pyGTK or GTKv2 or set your PYTHONPATH correctly"
  sys.exit(1)

import gtk
import gtk.glade

def procpack(data):

        TMlist=[]
        for i in range(TMSTART,TMEND,FIELD):
                field=data[i+1:i+FIELD+1]
                try:
                        if field=='\x00\x00\x00\x00\x00\x00\x00\x00\x00':
                                return TMlist
                except:
                        pass
                TMlist.append([field[0:8],field[8]])

def dpmserver():
        server_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
        server_socket.bind(("", 5123))

        print"UDPServer Waiting for client on port 5123"
        bytestack=[];
        while 1:
                data, address = server_socket.recvfrom(512)
                print "( " ,address[0], " " , address[1] , " ) said : ", data," length:",len(data)

                print procpack(data)

class AppParafin:
  def __init__(self):

        self.gladefile = 'dpm.glade'
        windowname = 'Deployment Monitor'# This must match the window name in glade
        self.wTree = gtk.glade.XML(self.gladefile, windowname)# object for acessing widgets
        t=threading.Thread(target=dpmserver)
        t.start()
        self.op=self.wTree.get_widget('Deployment Monitor')
        self.op.show()

app = AppParafin()
gtk.main() 
```

# c# - 如何访问动态创建的标签数组

> ID：12334649
> 
> 赞同：2
> 
> 时间：2012-09-08T21:30:08.687
> 
> 标签：c#, arrays, dynamic

我在运行时创建了一组标签。现在我无法从其他功能访问这些标签。

动态创作：

```
private void Form1_Shown(object sender, EventArgs e)
{
    Label[] Calendar_Weekday_Day = new Label[7];
    for (int i = 0; i < 7; i++)
    {
        Calendar_Weekday_Day[i] = new Label();
        Calendar_Weekday_Day[i].Location = 
                                    new System.Drawing.Point(27 + (i * 137), 60);
        Calendar_Weekday_Day[i].Size = new System.Drawing.Size(132, 14);
        Calendar_Weekday_Day[i].Text = "Montag, 01.01.1970";
        this.TabControl1.Controls.Add(Calendar_Weekday_Day[i]);
    }
} 
```

以及我要访问动态创建的标签数组的函数：

```
private void display_weather_from_db(DateTime Weather_Startdate)
{
    Calendar_Weekday_Day[0].Text = "Test1";
    Calendar_Weekday_Day[1].Text = "Test2";
} 
```

显示错误：

> 当前上下文中不存在名称“Calendar_Weekday_Day”Form1.cs 1523 25 测试

我试过这个，但没有帮助:(

```
public partial class Form1 : Form
{
    private Label[] Calendar_Weekday_Day;
} 
```

有人出主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T21:32:38.010

我想你只需要

```
Calendar_Weekday_Day = new Label[7]; 
```

代替

```
Label[] Calendar_Weekday_Day = new Label[7]; 
```

在你的`Form_Shown`. 正如现在所写的那样，您将列表存储到局部变量而不是实例字段中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T22:57:52.943

如果您的 tabcontrol 只包含标签，那么

```
 private void display_weather_from_db(DateTime Weather_Startdate)
 {
 Label[] Calendar_Weekday_Day = this.TabControl1.Controls.OfType<Label>().ToArray();

 Calendar_Weekday_Day[0].Text = "Test1";
 Calendar_Weekday_Day[1].Text = "Test2";

 } 
```

如果还有更多其他标签需要过滤，那么首先

```
 for .....
   ... _Day[i].Size = new System.Drawing.Size(132, 14);
    Calendar_Weekday_Day[i].Text = "Montag, 01.01.1970";
    Calendar_Weekday_Day[i].Tag= "Weather";// specify your label tag
    this.TabControl1.Controls.Add(Calendar_Weekday_Day[i]);
  .... 
```

然后

```
 private void display_weather_from_db(DateTime Weather_Startdate)
 {
 Label[] Calendar_Weekday_Day = this.TabControl1.Controls.OfType<Label>().Where(X=>X.Tag!=null && X.Tag=="Weather").ToArray();

 Calendar_Weekday_Day[0].Text = "Test1";
 Calendar_Weekday_Day[1].Text = "Test2";

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T21:34:52.760

问题很可能是范围或缺乏初始化。`Calendar_Weekday_Day`只存在于`Form1_Shown`上下文中。如果您尝试从另一种方法访问它，您将无法看到它（当它是私有的时，它仍未初始化以添加新元素将会有问题）。你有两个选择：

*   更改范围（`Calendar_Weekday_Day`在表单的类中创建一个私有属性，不要忘记初始化它）
*   通过访问搜索控件`this.TabControl1.Controls`

您可能还可以更好地使用`private IEnumerable<Label> Calendar_WeekendDay`，甚至`IList<Label>`可以在以后访问控件时给您更多的灵活性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T21:38:49.380

删除重新声明

```
private void Form1_Shown(object sender, EventArgs e)
{
    Calendar_Weekday_Day = new Label[7]; // removed Label[] 
```

...其余的都是一样的

这将是所需的最小更改，但您应该注意编译器警告。它很可能警告您您重新声明了字段。

# javascript - 等待 300 毫秒，然后使用 jQuery 向下滑动菜单

> ID：12334650
> 
> 赞同：2
> 
> 时间：2012-09-08T21:30:09.687
> 
> 标签：javascript, jquery

我试过这个js代码：

```
<script type="text/javascript">

       $(document).ready( function() {
            var timer;
            $('.top-menu-first-ul li').hover(function(){
                        if(timer) {
                                clearTimeout(timer);
                                timer = null
                        }
                        timer = setTimeout(function() {
                                   $(this).find('ul').slideToggle(100);
                        }, 500)
            },
            // mouse out
            });
        });

</script> 
```

使用这个 html：

```
<ul class="top-menu-first-ul">
    <li>
        <a href="http://google.com">Google</a>
        <ul class="top-menu-second-ul">
            <li><a href="http://translate.google.com">Google Translate</a></li>
            <li><a href="http://images.google.com">Google Images</a></li>
            <li><a href="http://gmail.google.com">Gmail</a></li>
            <li><a href="http://plus.google.com">Google Plus</a></li>
        </ul>
    </li>
    <li>
        <a href="http://facebook.com">Facebook</a>
    </li>
    <li>
        <a href="http://twitter.com">Twitter</a>
    </li>
</ul> 
```

但它不工作。

我想在将鼠标悬停在例如 Google 链接上时显示子菜单，其他将在 300 毫秒后出现。

因此，当用户快速将鼠标悬停在子菜单上并且不停留在悬停链接上至少 300 毫秒时，我需要防止加载子菜单。

然后，当他离开链接时，我需要停止执行代码（或向上滑动）。因为如果他反复来回反复几次，他就会停止悬停，并且代码仍在执行自己多少次他将鼠标悬停在链接上。我需要以某种方式防止这种情况发生。

编辑：我需要在没有像 hoverIntent 等插件的情况下解决这个问题。如果可能的话，只需简单的 javascript 和 jQuery

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T22:04:08.410

用于`stop()`防止动画怪异并`delay()`等待 300 毫秒。也不`hover()`推荐使用，我建议`on()`改用：

```
$('.top-menu-first-ul li').on({
  mouseover: function() {
    $(this).find('ul').stop(1,1).delay(300).slideDown(100);
  },
  mouseleave: function() {
    $(this).find('ul').stop(1,1).slideUp(100);
  }
}); 
```

**演示：http:** [//jsfiddle.net/elclanrs/6dtWz/](http://jsfiddle.net/elclanrs/6dtWz/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T22:04:56.440

我认为这个问题是您`$(this)`在超时调用的函数内部使用。`$(this)`此闭包内部与外部不同（在 jQuery 为您设置的 jQuery 事件处理程序内部）。[这里（jsfiddle）](http://jsfiddle.net/77LTW/6/)是解决方案：

```
$(document).ready( function() {
            $('.top-menu-first-ul li').mouseenter(mouseIn);
            $('.top-menu-first-ul li').mouseout(mouseOut);
});
function mouseIn(e){
    var target = $(this);
    var timer = setTimeout(function() {
                   target.find('ul').slideDown(100);
        }, 500);
    target.attr("data-timer", timer);
}

function mouseOut(e){
    var target = $(this);
    var timer = target.attr("data-timer");
    if(timer){
        clearTimeout(timer);
    }
    target.find('ul').slideUp(100)
}
​ 
```

**更新**此解决方案基于您的解决方案，但我建议使用@elclanrs 的解决方案，因为它更好（更具可读性，使用用于此目的的 jQuery API）。

# facebook - 使用 Facebook API 发送短信

> ID：12334651
> 
> 赞同：1
> 
> 时间：2012-09-08T21:30:14.460
> 
> 标签：facebook, sms

我一直在寻找有关通过 facebook API 发送短信的任何示例或文档，但找不到官方的。

我还在某处读过一些短信已从 facebook API 中弃用。那为什么它仍然可以在扩展权限中使用？

以下是 facebook 上有关它的一些文档： [Facebook 开发人员](https://developers.facebook.com/docs/reference/rest/sms.send/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:33:58.283

它*已*被弃用，因为它是 Legacy REST API 的一部分，虽然它仍然有效，但正在逐步淘汰，以支持 Graph API（在某种程度上，FQL）。

我怀疑权限仍然存在，以便开发人员有时间更新仍然使用 REST API 的应用程序。

# r-markdown - 使用 Markdown 更改项目符号样式

> ID：12334652
> 
> 赞同：6
> 
> 时间：2012-09-08T21:30:30.970
> 
> 标签：r-markdown

我是使用 Markdown 的新手。

尽管我已经设法在 CSS 中设置了很多样式选项，但我不知道如何更改任何项目符号的样式。

常规的：

*   普通子弹

或者

> *   块报价项目符号

和嵌套的

> *   块报价项目符号 1
>     *   块引用项目符号 2

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-10T05:18:58.080

正如您可能知道的那样，Markdown 的主要功能严格来说是“标记”语言，因此一组简单的字符可以消除对大量手动编码的需要，例如`<li></li>`在列表的前面和后面换行。

Markdown 的*真正*意义不是为最终输出设置 HTML 样式。Markdown 的一些不同子集包括修饰符和实现这一点的东西，但如果您必须在某个时候更改您的 Markdown 处理器，这可能会中断。

话虽这么说，你想用 CSS 样式来控制它，这是用这个修饰符完成的：

```
list-style-type: square, disc, circle, etc... 
```

这是一个列表：[http ://www.w3schools.com/cssref/pr_list-style-type.asp](http://www.w3schools.com/cssref/pr_list-style-type.asp)

如果您将其放在其他代码的页面上，请考虑可能已经应用了一些默认样式，因此您可能需要将您的 CSS 调用与诸如`ul li { list-style-type: your-choice}`击败覆盖之类的东西链接起来——除此之外，上面是您想要的语法.

# axis2 - 请求中缺少 Rampart SAML 令牌

> ID：12334655
> 
> 赞同：0
> 
> 时间：2012-09-08T21:30:59.980
> 
> 标签：axis2, saml, rampart

有谁知道为什么 Rampart 找不到自己的 STS 服务生成的 SAML Token 吗？

我在带有 Rampart 1.6.2 的 Tomcat 7.0.28 中有一个 Axis2 1.6.2 部署。我使用 Rampart STS 服务来获取他们的默认 SAML 令牌。客户端获得的令牌是有效的。（我已经使用 OpenSAML 验证了签名、SAML 配置文件和 XML。）

但是，当我在生成令牌的同一 Axis2/Rampart 部署中运行的 Web 服务请求中包含此令牌时，Rampart 会给出“请求中缺少 SAML 令牌”（由 RampartEngine.process() 发出）。在 NetKernel 和 OpenSAML 中使用单独的实现，我在同一个请求中访问和验证 SAML 令牌没有问题。自 Axis2/Rampart 1.5.1 以来，当我第一次尝试执行此任务时，此问题就一直存在。

有谁知道为什么 Rampart 拒绝自己的 SAML 令牌？您是否找到了让 Rampart 接受其自己的 SAML 令牌的方法？

（我已经断断续续地解决这个问题一年多了；我可能会放弃并使用 Netkernel 和 OpenSaml 并自己做整个事情；我失去了很多 SOAP 帮助，但至少我可以处理 SAML 令牌...在 OpenSAML 的大力帮助下。我更喜欢 Axis2/Rampart 工作！）

我可能对这个问题有部分答案。围绕源代码，我能够将“SAML 令牌丢失”跟踪到验证器中的一行，该行仅检查未签名的 SAML 令牌。必须对 SAML 令牌进行签名。我相信这是错误的原因，但我无法构建壁垒模块来测试它！

**回答** 我最终能够构建项目并测试上述假设，确实解决了问题。我更改了代码以解决签名和未签名的令牌。向 Rampart 提交了一个 JIRA 问题和解决方案，希望他们能够解决。与此同时，我制作了一个本地版本的 armart-core-*.jar 来解决我的服务问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T17:14:32.707

我上面提出的答案是正确的，并且已被 Rampart 纳入。应该在下一个版本中（我相信 1.6.3）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-19T12:01:01.930

我无法想象 Rampart 有这么多错误，特别是关于 SAML。并非他们发布的所有样本都有效。对于 sample5，我不仅必须更改您指定的代码，而且还必须更改 armart-trust 模块 (SAMLUtils.class) 以解决命名空间中有关指纹的错误。但现在终于可以了。非常感谢你的帖子。:)

# svg - 不透明度 < 1 的 SVG z 顺序

> ID：12334656
> 
> 赞同：0
> 
> 时间：2012-09-08T21:31:14.857
> 
> 标签：svg, opacity, z-order

我正在构建一个 SVG 图像（树形图，带有节点的椭圆），我想将椭圆与线条连接起来，但我希望线条从椭圆的*边缘*开始。由于计算边缘落在哪里以及确切地开始或结束线条非常困难，我正在从椭圆的中心绘制线条并寻找一种方法将椭圆叠加在线条上，以便它掩盖重叠部分，使线条看起来只从椭圆的边缘开始。因为 SVG 通过元素顺序实现 z 顺序，所以如果我先创建连接线然后创建椭圆，则可以，除了...

...我希望椭圆为蓝色或红色，填充不透明度 =“0.15”，但是当我这样做时，线条会显示出来。当然，低不透明度的东西不能完全掩盖它所覆盖的东西是有道理的，但我很难弄清楚如何才能获得我想要的效果。我找到了一个可行的解决方案：对于我想要的每个椭圆，我首先创建一个大小和位置相同的椭圆，白色填充和不透明度为 1，并在它们重叠的地方完全掩盖连接线。然后我将我真正想要渲染的椭圆叠加在白色椭圆上，填充蓝色或红色，不透明度为 0.15。这看起来是我想要的样子，但感觉很笨拙。有没有我忽略的优雅解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T21:45:29.717

您可以使用剪辑或蒙版。

一直画线，但把它们剪到除了椭圆之外的所有地方。

[http://www.w3.org/TR/SVG/masking.html](http://www.w3.org/TR/SVG/masking.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T21:47:05.340

您需要在将颜色渲染`fill-opacity`为白色背景后获取颜色。

截取 SVG 的屏幕截图，在 Photoshop 等图形编辑程序中打开它，使用吸管工具检查渲染颜色并复制十六进制值。然后将其用作填充颜色`fill-opacity="1"`

# keypress - vb.net 从 e.keydata 获取密钥名称

> ID：12334666
> 
> 赞同：1
> 
> 时间：2012-09-08T21:32:20.023
> 
> 标签：keypress, vb.net-2010, hotkeys

我正在制作一个使用热键的应用程序。在设置表单中，用户可以通过单击按钮（外观设置为按钮的复选框）设置热键，然后将按钮文本设置为该键。

问题是我找不到向用户显示密钥名称的方法。当用户点击返回键（例如）时，它会显示“13”。如何在没有巨大的 if / switch 语句的情况下向用户显示键名？

我当前的代码：

```
Private Sub SelectkeyBtn_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles SelectkeyBtn.KeyDown
    If SelectkeyBtn.Checked = True Then
        SelectkeyBtn.Text = e.KeyData
        SelectkeyBtn.Checked = False
    End If
End Sub 
```

**编辑**

我发现这个[vb.net get name of key from e.keydata](https://stackoverflow.com/questions/12334666/vb-net-get-name-of-key-from-e-keydata)它帮助了我。

我的代码现在看起来像这样：

```
<DllImport("User32.dll")> _
Public Shared Function ToAscii(ByVal uVirtKey As Integer, ByVal uScanCode As Integer, ByVal lpbKeyState As Byte(), ByVal lpChar As Byte(), ByVal uFlags As Integer) As Integer
End Function

<DllImport("User32.dll")> _
Public Shared Function GetKeyboardState(ByVal pbKeyState As Byte()) As Integer
End Function

Public Shared Function GetAsciiCharacter(ByVal uVirtKey As Integer) As Char
    Dim lpKeyState As Byte() = New Byte(255) {}
    GetKeyboardState(lpKeyState)
    Dim lpChar As Byte() = New Byte(1) {}
    If ToAscii(uVirtKey, 0, lpKeyState, lpChar, 0) = 1 Then
        Return Convert.ToChar((lpChar(0)))
    Else
        Return New Char()
    End If
End Function

Private Sub SelectkeyBtn_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles SelectkeyBtn.KeyDown
    If SelectkeyBtn.Checked = True Then
        SelectkeyBtn.Text = GetAsciiCharacter(e.KeyData)
        SelectkeyBtn.Checked = False
    End If
End Sub 
```

当我按下键盘上的某个键（如 a、z、f、e、1、+、/..

当我按 DELETE、F2、NUMLOCK 等时，按钮文本为空..（见截图） ![在此处输入图像描述](../Images/b016a9038795f9af9960992f4c249b33.png)

大卫，

# alias - 将 Sublime Text 的别名添加到 zshrc

> ID：12334681
> 
> 赞同：11
> 
> 时间：2012-09-08T21:34:10.073
> 
> 标签：alias, zsh, sublimetext2, zshrc

只是有一个关于如何将 SublimeText 的别名添加到我的 ZSH 的快速问题。我去过他们的网站，他们告诉你如何在 bash 中执行此操作，但我不明白如何在 ZSH 中执行此操作。它一直在杀死我，我只想从命令提示符打开文本文件。有没有人在创建别名的地方有使用 ZSH 的经验？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-08T23:17:02.290

别名`zsh`的创建方式与 中相同`bash`。

```
alias somealias='something longer' 
```

现在 somealias 将扩展为“更长的东西”（不带引号）。把它放进`~/.zshrc`去让它持久。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T20:04:51.267

这是一个如何`subl`为 ZSH 添加命令的示例

[http://opensourcehacker.com/2012/05/11/sublime-text-2-tips-for-python-and-web-developers/#Open_files_from_comma](http://opensourcehacker.com/2012/05/11/sublime-text-2-tips-for-python-and-web-developers/#Open_files_from_comma)

这是另一个示例，如何使 UNIX EDITOR env var 使用 Sublime 并表现良好，例如在编辑 subversion 和 git commit 消息时

[https://github.com/miohtama/ztanesh/blob/master/zsh-scripts/rc/39-osx-vars#L11](https://github.com/miohtama/ztanesh/blob/master/zsh-scripts/rc/39-osx-vars#L11)

[https://github.com/miohtama/ztanesh/blob/master/zsh-scripts/bin/subl-wrapper](https://github.com/miohtama/ztanesh/blob/master/zsh-scripts/bin/subl-wrapper)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-31T15:41:51.067

只需在`~/zshrc`

添加这个：

`alias subl="'/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl'"`

然后，当您在正确的文件夹中时，您可以随时键入`subl .`以使用 Sublime 打开该文件夹

# php - 通过 Facebook 应用程序发送短信

> ID：12334684
> 
> 赞同：0
> 
> 时间：2012-09-08T21:34:38.237
> 
> 标签：php, facebook-graph-api, sms

我一直在寻找有关通过 facebook API 发送短信的任何示例或文档，但找不到官方的。

我还在某处读过一些短信已从 facebook API 中弃用。那为什么它仍然可以在扩展权限中使用？

以下是 facebook 上有关它的一些文档： [https ://developers.facebook.com/docs/reference/rest/sms.send/](https://developers.facebook.com/docs/reference/rest/sms.send/)

正在寻找答案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T21:43:23.060

[facebook](https://developers.facebook.com/docs/reference/rest/)网站上有警告，

> 我们正在弃用 REST API。如果您正在构建新的 Facebook 应用，请使用[Graph API](https://developers.facebook.com/docs/reference/api/)。虽然我们还没有移植一些功能，但 Graph API 是 Facebook 平台向前发展的中心，所有新功能都将在这里找到。

根据[这个](https://stackoverflow.com/questions/5053723/how-do-i-send-sms-messages-through-graph-api)和[那个](https://stackoverflow.com/questions/5524694/sms-through-facebook-graph-api)Stackoverflow 的问题，目前没有可用的实现。

# c++ - 在类或结构中使用未设置的成员变量

> ID：12334685
> 
> 赞同：0
> 
> 时间：2012-09-08T21:34:42.223
> 
> 标签：c++, visual-studio, debugging, visual-studio-2008

在使用未设置的局部变量或在初始化之前直接访问类或结构的成员时，捕获一些非常明显的错误非常好。在 Visual Studio 2008 中，您会在编译时收到“使用未初始化的局部变量”警告，并在调试时在访问点收到运行时检查失败。

但是，如果您通过其函数之一访问未初始化结构的成员变量，您不会收到任何警告或断言。显然，最简单的解决方案是*不要那样做*，但没有人是完美的。

例如：

```
struct Test
{
    float GetMember() const { return member; }
    float member;
};
Test test;
float f1 = test.member;      // Raises warning, asserts in VS debugger at runtime
float f2 = test.GetMember(); // No problem, just keeps on going 
```

这让我感到惊讶，但它有一定的意义——编译器不能假设在未使用的结构上调用函数是一个错误，或者你将如何初始化或构造它？而且任何更高级的东西都会很快带来许多其他复杂性，以至于它不会费心分类哪些函数可以调用以及何时调用，尤其是作为调试帮助。我知道我可以在类本身中设置自己的断言或错误检查，但这会使一些更简单的结构复杂化。

尽管如此，它似乎在函数调用的上下文中，它不知道尚未初始化的内部`GetMember()`吗`member`？我假设它不仅依赖于静态编译时推导，因为`Run-Time Check Failure #3`它在执行期间引发，所以根据我目前对它的理解，应用相同的检查似乎是合理的。这只是这个特定编译器/调试器（Visual Studio 2008）的限制，还是更多地与 C++ 的工作方式相关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T21:42:47.090

您可能会注意到警告是关于`test`未初始化的。这就是为什么警告和运行时故障仅适用于该行

```
float f1 = test.member; 
```

这会导致未定义的行为，并且至少在调试模式下，MSVS 会进行一些检查并且能够崩溃（在发布时，该错误可能会被隐藏，并且您最终会得到一个虚假的值`f1`）。

然而，下一行不会直接导致 UB。`f1`没有被读取，也没有它的任何数据成员（直接）。调用了一个方法，编译器不知道该成员函数会在未初始化的对象上产生 UB。该函数可以只在屏幕上打印一些内容而不读取任何成员，这没关系。好吧，编译器理论上**可以**知道，因为它看到了代码，但它并没有深入挖掘。静态代码分析器*可能会*提醒您该问题。

# php - ScraperWiki：如何保存 html，使其只加载一次

> ID：12334688
> 
> 赞同：0
> 
> 时间：2012-09-08T21:35:34.167
> 
> 标签：php, scraper, scraperwiki

当我执行刮板时，它使用此方法加载 url：

```
$html = scraperWiki::scrape("foo.html"); 
```

所以每次我向爬虫添加新代码并想尝试它时，它都会再次加载 html，这需要相当长的时间。

无论如何要保存 $html 所以它只在第一次加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T22:25:54.603

**正如刮板**维基网站的文档和帮助部分的常见问题解答所述：

> 是的，但所有文件都是临时的。

我建议您在使用 PHP 时使用函数`fopen`/保存文件（HTML 或其他文件） 。`fwrite`

来源：[https ://scraperwiki.com/docs/python/faq/#files](https://scraperwiki.com/docs/python/faq/#files)

# jquery - CSS3：列表项的顶部对齐

> ID：12334691
> 
> 赞同：0
> 
> 时间：2012-09-08T21:35:39.407
> 
> 标签：jquery, css, jquery-mobile

**CSS3：列表项的顶部对齐。**

见下图。如何对齐蓝色箭头以对齐每个列表的句子顶部。我正在使用 jQuery 1.7，它适用于 iOS (iPhone)。

[对齐顶部 http://www.kerrydeaf.com/align.png](http://www.kerrydeaf.com/align.png "工具提示")

```
ul.lists{ padding:0 0 15px 0;}
ul.lists li{ line-height:18px; border-bottom:1px #bfeaf0 solid; padding:6px 12px;       
background:url(../images/arrow_cyan.svg) no-repeat left; } /* no-repeat left top; */ 
```

我试图包含一个 js 作为偏移量 $("li:last").offset({ top: -15 }); 但它不能正常工作，因为我不知道如何移动所有蓝色箭头来对齐每个列表，即使句子可能不止一行。

更新：我试过这个......

[顶部对齐 http://www.kerrydeaf.com/align2.png](http://www.kerrydeaf.com/align2.png)

```
background:url(../images/arrow_cyan.svg) no-repeat left top; 
```

最后更新：现在已经解决了。背景：url（../images/arrow_cyan.svg）不重复左10px；

[顶部对齐 http://www.kerrydeaf.com/align3.png](http://www.kerrydeaf.com/align3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T21:38:31.797

我认为你可以做到这一点

```
background-position:left top; 
```

大卫，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T21:39:30.100

使用 CSS，卢克

```
ul.lists li {
  background:url(../images/arrow_cyan.svg) no-repeat left top; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T21:38:43.157

使用可能为负垂直值的背景位置应该可以工作。您必须通过反复试验确定的确切值。

# go - 可变参数函数参数传递

> ID：12334697
> 
> 赞同：41
> 
> 时间：2012-09-08T21:36:23.040
> 
> 标签：go, variadic-functions

**情况：**

我正在尝试编写一个简单的`fmt.Fprintf`包装器，它接受可变数量的参数。这是代码：

```
func Die(format string, args ...interface{}) {
    str := fmt.Sprintf(format, args)
    fmt.Fprintf(os.Stderr, "%v\n", str)
    os.Exit(1)
} 
```

**问题：**

当我用 调用它时`Die("foo")`，我得到以下输出（而不是“ *foo* ”）：

> foo%!(额外 [] 接口 {}=[])

*   *为什么在“ foo* ”之后有“ *%!(EXTRA []interface {}=[])* ”？
**   创建包装器的正确方法是什么`fmt.Fprintf`？*

 ** * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-08T22:12:54.967

可变参数函数接收参数作为类型的一部分。在这种情况下，您的函数会收到一个`[]interface{}`命名的`args`. 当您将该参数传递给 时`fmt.Sprintf`，您将它作为类型的单个参数传递`[]interface{}`。您真正想要的是将每个值`args`作为单独的参数传递（与您接收它们的方式相同）。为此，您必须使用`...`语法。

```
str := fmt.Sprintf(format, args...) 
```

这在 Go 规范中也有[解释](http://golang.org/ref/spec#Passing_arguments_to_..._parameters)。*

# ios - Phonegap Web 视图认为设备屏幕比实际高 - 导致屏幕外标签栏

> ID：12334699
> 
> 赞同：0
> 
> 时间：2012-09-08T21:36:32.340
> 
> 标签：ios, cordova, jqtouch, phonegap-plugins

我有一个通过服务器加载的 jQTouch 应用程序，所以我需要做的就是在 PhoneGap 中全屏显示网页以获取一个人造原生应用程序。不幸的是，我在 PhoneGap 中尝试过的每个解决方案都有一个问题：它认为屏幕尺寸比实际尺寸大。这导致固定在底部的选项卡栏永久离开屏幕，因此无法使用。您应该能够使用我下面的代码重新创建它并访问 iTabbar 在线演示。关于如何纠正这个问题的任何想法？

对于后台，在 iOS Safari 中转到应用程序页面可以正常工作，并将页面保存到主屏幕。在这两种情况下，webview 都停在屏幕底部，因此标签栏是可见的。另外，我正在使用 build.phonegap.com 进行编译（我不是在本地编译）

我试过两种方法：

1.  加载 childBrowser 插件并调用页面（通过选项隐藏导航栏）

2.  设置以下 config.xml 参数以防止 phonegap 切换到 Safari，然后只需加载链接（最好是因为它在我看来更干净。我在下面粘贴了我的 index.html 和 config.xml）

config.xml 参数的详细信息：

> 在 WebView 中打开所有链接
> 
> 停留在 webview 中，值为 true 或 false
> 
> *   例子：`<preference name="stay-in-webview" value="true" />`
>     
>     
> *   如果设置为 true，所有链接（即使目标设置为空白）都将在应用程序的 webview 中打开
>     
>     
> *   仅当您希望服务器中的页面接管整个应用程序时才使用此首选项
>     
>     
> *   默认为假

（来源：[https](https://build.phonegap.com/docs/config-xml) ://build.phonegap.com/docs/config-xml ）

我的`index.html`：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>

<meta http-equiv="Content-type" content="text/html;charset=utf-8">

<title>MyApp</title>

<script src="phonegap.js"></script>

</head>
<body>
<p><a href="http://www.itabbar.com/itabbar/demo.html#home">Launch iTabbar</a></p>
</body>
</html> 
```

我的`config.xml`：

```
<?xml version="1.0" encoding="UTF-8" ?>
<widget xmlns = "http://www.w3.org/ns/widgets"
    xmlns:gap = "http://phonegap.com/ns/1.0"
    id        = "com.phonegap.myapp"
    versionCode="10" 
    version   = "1.0.0">

<!-- versionCode is optional and Android only -->

<name>MyApp</name>

<description>
    My app is...
</description>

<author href="https://myurl.com" email="me@myurl.com">
    me
</author>

<preference name="stay-in-webview" value="true" />

</widget> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:45:26.540

感谢 PhoneGap 支持为我指明了正确的方向。问题出在`fullscreen.js`：

`window.navigator.standalone`是一个二进制只读参数，fullscreen.js 使用它来确定 webapp 是从主屏幕启动还是在浏览器中启动。如果它是假的（即在网络浏览器中），它会添加 60px 以允许地址栏。如果为真（即从主屏幕启动），则不会将像素添加到高度。

所以，当我从 phonegap 中启动时，window.navigator.standalone 是假的，尽管它应该是真的。这导致 60px 被错误地添加。现在我刚刚将它硬编码为`true`.

# php - Mysql查询麻烦：上传

> ID：12334703
> 
> 赞同：0
> 
> 时间：2012-09-08T21:37:04.820
> 
> 标签：php, mysql, forms, insert

我正在尝试最后一个小时解决这个问题。我有一个很长的表格，我正在尝试将信息上传到 mysql 数据库中。放到我做的桌子上。这是我正在使用的 mysql 查询：

```
mysql_query("INSERT INTO `users_temp`(`first_name`, `surname`, `birthday`, `nationality`, `email`, `mobile`, `landline`, `address`, `town`, `post_code`, `country`, `password`, `code_conf`) VALUES ([$f_name],[$s_name],[$bday],[$nationality],[$email],[$mobile],[$landline],[$address],[$town],[$post_code],[$country],[$pass],[$conf_code])"); 
```

如果有人看到任何问题为什么它不起作用，请告诉我。谢谢...

```
$f_name         = $_POST["f_name"];
$s_name         = $_POST["s_name"];
$pass           = $_POST["pass"];
$birthday       = $_POST["bday"];
$nationality    = $_POST["nationality"];
$email          = $_POST["email"];
$mobile         = $_POST["mobile"];
$landline       = $_POST["landline"];
$address        = $_POST["address"];
$town           = $_POST["town"];
$post_code      = $_POST["post_code"];
$country        = $_POST["country"];

$conf_code      = substr(md5(uniqid(rand(), true)), 1, 70);

include("connect_into_mysql.php");
mysql_select_db("jzperson_edu", $conn);

$res_01 = mysql_query("SELECT * FROM users WHERE email='$email'");
$count_01 = mysql_num_rows($res_01);

if($count_01==0)
{
mysql_query("INSERT INTO users_temp ('first_name','surname','birthday','nationality','email','mobile','landline','address','town','post_code','country','password','code_conf') VALUES ('$f_name','$s_name','$bday','$nationality','$email','$mobile','$landline','$address','$town','$post_code','$country','$pass','$conf_code')");
header("Location: home.php");
}else{echo "This email is already registered. If you lost your password you can reset it here.";} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:10:08.717

1/ 你必须知道 SQL 注入：请[阅读这篇文章](http://www.tizag.com/mysqlTutorial/mysql-php-sql-injection.php)。用 mysql_real_escape_string 封装所有 $_POST 数据，例如：

```
$f_name         = mysql_real_escape_string($_POST["f_name"]); 
```

[2/ MySQL 将很快被弃用，请参见此处](http://uk.php.net/manual/en/function.mysql-connect.php)的红框。

3/ 在你的所有标题之后，放置一个 die() （否则，你的代码会一直执行到最后，如果客户端的浏览器重定向被禁用，他可能会看到一些未经授权的内容）。

4/ 不要在一行写很长的请求，这样可以避免麻烦，使工作更容易。要调试它，`or die(mysql_error())`请在末尾添加一个“”，它将显示一条消息，帮助您获得解决方案。

```
mysql_query("
INSERT INTO users_temp (
    'first_name','surname','birthday',
    'nationality','email','mobile',
    'landline','address','town',
    'post_code','country','password',
    'code_conf'
) VALUES (
    '$f_name','$s_name','$bday',
    '$nationality','$email','$mobile',
    '$landline','$address','$town',
    '$post_code','$country','$pass',
    '$conf_code'
)
") or die(mysql_error()); 
```

顺便说一句，您正在检查用户表并插入到 user_tmp 表中。您可能会以这种方式遇到冲突问题，不是吗？

# php - 在 isset() 之后向数组添加值

> ID：12334704
> 
> 赞同：2
> 
> 时间：2012-09-08T21:37:20.110
> 
> 标签：php, arrays

在随后的试验之后，我试图将元素添加到数组中，但到目前为止，只有一个值被添加到数组中。我已经用谷歌搜索并搜索了 stackoverflow，除非我执行错误，否则我似乎只得到了一半的图片。

大约有40个文件，需要一个接一个地提交，然后将每个试验的值存储在数据库中。

到目前为止，这就是我所做的。

```
$_SESSION['task2'] = array();

//Submit Trial 1
if (isset($_POST['submit_task_01'])) {

$trial1_ac_sec = cleanInput($_POST['clockInputTask_01ac']);
$trial1_est_sec = cleanInput($_POST['clockInputTask_01']);
$trial1_ac = round(($trial1_ac_sec * 42.67), 2);
$trial1_est = round(($trial1_est_sec * 42.67), 2);
$trial1_judgErr = $trial1_ac - $trial1_est;

$trial_1error = round($trial1_judgErr, 2);
array_push($_SESSION['task2'],$trial_1error);
header("location: Trial_2.php");
 }

 //Submit Trial 2
 if (isset($_POST['submit_task_02'])) {

$trial2_ac_sec = cleanInput($_POST['clockInputTask_02ac']);
$trial2_est_sec = cleanInput($_POST['clockInputTask_02']);
$trial2_ac = round(($trial2_ac_sec * 42.67), 2);
$trial2_est = round(($trial2_est_sec * 42.67), 2);
$trial2_judgErr = $trial2_ac - $trial2_est;

$trial_2error = round($trial2_judgErr, 2);
array_push($_SESSION['task2'],$trial_2error);

header("location: newEmptyPHPWebPage.php");
}

... and so on.. up until 40 
```

我只是想知道我做错了什么，我知道每次 isset() 都会重新加载页面，并且以前的数据将不可用，所以从这个意义上说，我想我会为会话创建一个数组，然后在会话中推送数据，但这似乎不起作用。

如果有人对我能做什么有任何想法，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T21:51:07.733

您在代码顶部键入：

```
$_SESSION['task2'] = array(); 
```

您应该改用：

```
if (!isset($_SESSION['task2'])) {
    $_SESSION['task2'] = array();
} 
```

否则，每次加载页面时都要清理它！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T22:07:22.933

据我所知，这里有巨大的自动化潜力。您可以简单地执行一个 for 循环并从那里开始，而不是编写 40 个块。知道将 40 个值中的哪一个添加到数组中也会很有趣（我必须在这里问它，因为由于某种原因 StackOverflow 不允许我发表评论。无论如何，这是我假设的解决方案：

```
 // If no Session found, start it.
    if (!isset($_SESSION)) {
        session_start();
    }

if(!isset($_SESSION['task2']) {
    $_SESSION['task2'] = array();
}

    // For 40 times
    for ($i = 0; $i < 40; $i++) {

        // If i is smaller then ten, prepend 0
        if ($i < 10) {
            $task = '0' . $i;
        } else {
            $task = $i;
        }

        // if current task is set
        if (isset($_POST['submit_task_' . $task])) {
            $trial_ac_sec = cleanInput($_POST['clockInputTask_' . $task . 'ac']);
            $trial_est_sec = cleanInput($_POST['clockInputTask_' . $task]);
            $trial_ac = round(($trial_ac_sec * 42.67), 2);
            $trial_est = round(($trial_est_sec * 42.67), 2);
            $trial_judgErr = $trial_ac - $trial_est;

            $trial_error = round($trial_judgErr, 2);
            array_push($_SESSION['task2'], $trial_error);

            getCorrectPage($i);
        }
    }

    function getCorrectPage($task) {
        // Look what's in task, go to the case that matches
        switch ($task) {
            case 1 :
                header("location: Trial_2.php");
                break;
            case 2 :
                header("location: newEmptyPHPWebPage.php");
                break;
            case 3 :
                header("location: Trial_3.php");
                break;
            // AND SO FORTH...
            default :
                echo 'No Correct Page for task ' . $task;
                break;
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T22:10:25.663

蒂姆？我想指出一件事，虽然您的问题已得到解答，但它可能会为您节省大量复制/粘贴。

代码重复是程序员非常热衷于避免的事情，看起来你会复制粘贴 40 次，尽管从我在你的代码示例中看到的两次来看，它们几乎相同？

我无法理解其余的内容，但只想指出这可以以一种干净的方式完成。

干杯和gl

# neo4j - Neo4j GraphRepository 派生的查找器方法

> ID：12334708
> 
> 赞同：0
> 
> 时间：2012-09-08T21:38:12.573
> 
> 标签：neo4j, spring-data-neo4j

我对 GraphRepository 的派生查找器方法有疑问。

**简洁版本：**

```
User foundUser1 = userRepository.findByEmail("test@gmail.com");
User foundUser2 = userRepository.findByPropertyValue("id", 1); 
```

有效，但不是：

```
User foundUser3 = userRepository.findById(1); 
```

**长版：**

*测试上下文.xml*

```
<context:annotation-config/>    
<neo4j:config storeDirectory="data/graph.db" />
<neo4j:repositories base-package="com.blbl.repository"/>
<tx:annotation-driven mode="proxy"/> 
```

*UserGraphRepository.java：*

```
public interface UserGraphRepository extends GraphRepository<User> {
    public User findById(int id);
    public User findByEmail(String email);    
} 
```

*用户.java：*

```
@NodeEntity
public class User {
    @GraphId private Long nodeId;
    @Indexed(unique = true) private int id;
    @Indexed private String email;

    public User(int id) {
        this.id = id;
    }
    // getter & setters
} 
```

*测试：*

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({"/test-context.xml"})
@Transactional
public class UserServiceTest {

    @Autowired
    private UserGraphRepository userRepository;

    @Autowired
    private Neo4jTemplate template;

    @BeforeTransaction
    @Rollback(value = false)
    public void cleanDb() {
        Neo4jHelper.cleanDb(template);
    }

    @Test
    public void testSaveUser() {
        User user = userRepository.save(new User(1));
        user.setEmail("test@gmail.com");
        userRepository.save(user);

        User foundUser1 = userRepository.findByEmail("test@gmail.com");
        User foundUser2 = userRepository.findByPropertyValue("id", 1);
        User foundUser3 = userRepository.findById(1);
        assertThat(foundUser1, is(notNullValue())); // SUCCESS
        assertThat(foundUser2, is(notNullValue())); // SUCCESS
        assertThat(foundUser3, is(notNullValue())); // FAILS
    }
} 
```

第三个断言失败，因为 foundUser3 为空。我不明白为什么会发生这种情况，而它可以找到`findByPropertyValue("id" ..)`. 我想知道**id**是否是某种关键字？（注意我`@GraphId`的被称为`nodeId`）

PS：

```
<neo4j-version>1.8.M07</neo4j-version>
<org.springframework.version>3.1.2.RELEASE</org.springframework.version>
<org.springframework-data-neo4j.version>2.1.0.RC3</org.springframework-data-neo4j.version> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T23:24:52.710

这可能是数字字段的特殊索引的问题。我在这里提出了一个问题：[https ://jira.springsource.org/browse/DATAGRAPH-294](https://jira.springsource.org/browse/DATAGRAPH-294)

# c++ - 解析位图文件时，如何替换 WORD 和 DWORD 数据类型？

> ID：12334714
> 
> 赞同：0
> 
> 时间：2012-09-08T21:39:11.713
> 
> 标签：c++, windows, linux, header, bitmap

在 Windows 中，您可以在尝试解析 bmp 文件时包含 windows.h 头文件，并且为您预定义了数据类型 WORD 和 DWORD（根据我所阅读的内容）。在 linux 中，我需要使用这些 dataTypes，但我不知道如何定义它们并且不能包含 windows.h 标头。我该如何在 C++ 中执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T21:42:19.627

包括`<stdint.h>`，然后您可以`WORD`用`uint16_t`和`DWORD`替换`uint32_t`。当然`BYTE`，`uint8_t`还有：

如果需要，可以添加以下代码：

```
#include <stdint.h>
typedef uint32_t DWORD;
typedef uint16_t WORD;
typedef uint8_t BYTE; 
```

但要小心！如果您想要可移植，您必须牢记多字节值的字节顺序。Microsoft 代码几乎总是假定小端，但 Linux 可以在小端和大端机器上运行。

**更新**：

您在评论中谈到的新问题`BITMAPFILEHEADER`与字段的类型无关，而是与结构的*打包*有关：编译器可能会在结构中的字段之间添加填充字节以满足对齐（或其他要求）。

Microsoft 编译器将整数类型与其大小的地址倍数对齐。也就是说，`WORD`and`SHORT`值与 2 的地址倍数对齐，`DWORD`and`LONG`值与 4 的倍数对齐。

如果您看到结构的定义：

```
typedef struct {
    WORD    bfType;      //offset 0
    DWORD   bfSize;      //offset 4
    WORD    bfReserved1; //offset 8
    WORD    bfReserved2; //offset 10
    DWORD   bfOffBits;   //offset 12
} BITMAPFILEHEADER; 
```

请注意，该`bfSize`字段的大小为 4 个字节，因此它将对齐为 4 的倍数。而不是在结构的偏移量 2 中，它将在偏移量 4 中，添加 2 个填充字节。

现在，所有 Windows 头文件都使用`#pragma pack`告诉编译器忽略结构字段中的对齐限制的选项进行编译。所以前一个结构实际上是：

```
#pragma pack(push)
typedef struct {
    WORD    bfType;      //offset 0
    DWORD   bfSize;      //offset 2
    WORD    bfReserved1; //offset 6
    WORD    bfReserved2; //offset 8
    DWORD   bfOffBits;   //offset 10
} BITMAPFILEHEADER;
#pragma pack(pop) 
```

GCC 编译器`#pragma pack`仅支持与 MS 编译器的兼容性，并且仅与 x86 编译器兼容。

如果你想完全可移植，你应该直接读取结构，但是将字节作为流读取并一个一个地构建值（将 2 个字节`bfType`读入 ，将 4 个字节读入`bfSize`，等等）

如果你想移植到其他 Linux，你可以使用 GCC pragma（但要注意字节序）：

```
typedef struct __attribute__((packed)) {
    WORD    bfType;      //offset 0
    DWORD   bfSize;      //offset 2
    WORD    bfReserved1; //offset 6
    WORD    bfReserved2; //offset 8
    DWORD   bfOffBits;   //offset 10
} BITMAPFILEHEADER; 
```

# jquery - 为菜单/导航栏制作滚动按钮

> ID：12334716
> 
> 赞同：0
> 
> 时间：2012-09-08T21:39:26.163
> 
> 标签：jquery, html, css, menu, scroll

我有一个包含很多选项的菜单，想法是使用滚动按钮向左或向右导航（就像在 youtube 上查看播放列表一样），由 JQuery 控制。我需要关于如何制作一个支持任何新条目而不会失去其功能的功能的想法或建议。到目前为止，我尝试的一切都有效，但无法处理新选项或新添加的链接。这是代码和CSS，任何建议都非常受欢迎。

HTML：

```
 <body>
        <div id="menu-new">
            <ul class="menu">
                <li class="sep">
                    <a href="/askthewizard/">Ask The Wizard</a>
                </li>
                <li>
                    <a href="/newreleases/">New Releases</a>
                </li>
                <li>
                    <a href="/casestudies/">Case Studies</a>
                </li>
                <li class="sep">
                    <a href="/maintenance/">Maintenance</a>
                </li>
                <li>
                    <a href="/schedule/">Schedule</a>
                </li>
                <li>
                    <a href="/timeclock/">Time Clock</a>
                </li>
                <li>
                    <a href="/payroll/">Payroll</a>
                </li>
                <li class="sep">
                    <a href="/humanresources/">Human Resources</a>
                </li>
                <li>
                    <a href="/application/">Application</a>
                </li>
                <li>
                    <a href="/other/">Other</a>
                </li>
            </ul>
        </div>

    </body> 
```

CSS：

```
html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5,
h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code,
del, dfn, em, font, img, ins, kbd, q, s, samp, small, strike, strong,
sub, sup, tt, var, dl, dt, dd, ol, ul, li, fieldset, form, label,
legend, table, caption, tbody, tfoot, thead, tr, th, td {
    border: 0 none;
    font-family: inherit;
    font-size: 100%;
    font-style: inherit;
    font-weight: inherit;
    margin: 0;
    outline: 0 none;
    padding: 0;
    vertical-align: baseline;
}
#menu-new {
    overflow: hidden;
    padding: 5px;
    background-color: #9A1C1C;
    border: 1px solid #000000;
    text-align: center;
}
#menu-new ul.menu {
    list-style: none outside none;
    width: 960px;
    display: block;
    margin: 0 auto;
}
#menu-new ul.menu li:first-child {
    margin: 0;
}
#menu-new ul.menu li.sep {
    border-right: 1px solid #000000;
    padding: 0 12px 0 0;
}
#menu-new ul.menu li {
    float: left;
    margin: 0 0 0 12px;
}
#menu-new ul.menu li a {
    color: #D9D8B5;
    display: block;
    font: bold 11px/30px 'Arial',sans-serif;
    padding: 0 8px;
    text-decoration: none;
    text-shadow: 0 1px 0 #460100;
    text-transform: uppercase;
}
a:link, a:visited {
    color: #9A1C1C;
    text-decoration: none;
}
a {
    outline: 0 none;
}
#menu-new ul.menu li a:hover, #menu-new ul.menu li a.active {
    background-color: #DDDCBE;
    border-radius: 1px 1px 1px 1px;
    box-shadow: 0 0 2px #222222;
    color: #742C2B;
    text-shadow: 0 1px 0 #FFFFFF;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:53:07.853

正如我在评论中提到的。即使没有人回应，如果我可以这么说的话，我还是找到了一种以一种非常好的方式自己做的方法。如果其他人遇到同样的问题，我会在这里发布。当我思考一些常见问题以寻找答案时，我有一个愚蠢的想法，使用锚系统悬停并滚动菜单。处理它的等式是从...中提取和修改的。好吧，我真的很惭愧，我不知道该归功于谁，我忘记了它的名称或站点（但它很简单）。

现在，

的HTML：

```
<div id="menu-new">
        <div class="contSize">           
            <ul class="menu">
                <li class="sep"><a href="#">
                    <a href="/askthewizard/">Ask The Wizard</a>
                </li>
                <li><a href="#">
                    <a href="/newreleases/">New Releases</a>
                </li>
                <li><a href="#">
                    <a href="/casestudies/">Case Studies</a>
                </li><a href="#">
                <li class="sep">
                    <a href="/maintenance/">Maintenance</a>
                </li>
                <li><a href="#">
                    <a href="/schedule/">Schedule</a>
                </li>
                <li><a href="#">
                    <a href="/timeclock/">Time Clock</a>
                </li>
                <li><a href="#">
                    <a href="/payroll/">Payroll</a>
                </li><a href="#">
                <li class="sep">
                    <a href="/humanresources/">Human Resources</a>
                </li>
                <li><a href="#">
                    <a href="/application/">Application</a>
                </li>
                <li><a href="#">
                    <a href="/other/">Other</a>
                </li>
                <li><a href="#">
                    <a href="/other/">Other</a>
                </li>
                <li><a href="#">
                    <a href="/other/">Other</a>
                </li>
                <li><a href="#">
                    <a href="/other/">Other</a>
                </li>
                <li><a href="#">
                    <a href="/other/">Other</a>
                </li>
                <li><a href="#">
                    <a href="/other/">Other</a>
                </li>
                <li><a href="#">
                    <a href="/other/">Other</a>
                </li>
                <li><a href="#">
                    <a href="/other/">Other</a>
                </li>
                <li><a href="#">
                    <a href="/other/">Other</a>
                </li>
                <li><a href="#">
                    <a href="/other/">Other</a>
                </li>
                <li><a href="#">
                    <a href="/other/">Other</a>
                </li>
            </ul>
            </div>
        </div> 
```

CSS：

```
html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5,
h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code,
del, dfn, em, font, img, ins, kbd, q, s, samp, small, strike, strong,
sub, sup, tt, var, dl, dt, dd, ol, ul, li, fieldset, form, label,
legend, table, caption, tbody, tfoot, thead, tr, th, td {
    border: 0 none;
    font-family: inherit;
    font-size: 100%;
    font-style: inherit;
    font-weight: inherit;
    margin: 0;
    outline: 0 none;
    padding: 0;
    vertical-align: baseline;
}
#menu-new  {
    overflow: hidden;
    padding: 5px;
    background-color: #9A1C1C;
    border: 1px solid #000000;
    text-align: center;
}

#menu-new div.contSize{
    width: 960px;
    overflow: hidden;
    margin: 0 auto;
}
#menu-new div.contSize ul.menu {
    list-style: none outside none;
    width: 9000px;
    display: block;
    padding-left: 10px;
}
#menu-new div.contSize ul.menu li:first-child {
    margin: 0;
}
#menu-new div.contSize ul.menu li.sep {
    border-right: 1px solid #000000;
    padding: 0 12px 0 0;
}
#menu-new div.contSize ul.menu li {
    float: left;
    margin: 0 0 0 12px;
}
#menu-new div.contSize ul.menu li a {
    color: #D9D8B5;
    display: block;
    font: bold 11px/30px 'Arial',sans-serif;
    padding: 0 8px;
    text-decoration: none;
    text-shadow: 0 1px 0 #460100;
    text-transform: uppercase;
}
a:link, a:visited {
    color: #9A1C1C;
    text-decoration: none;
}
a {
    outline: 0 none;
}
#menu-new div.contSize ul.menu li a:hover, #menu-new div.contSize ul.menu li a.active {
    background-color: #DDDCBE;
    border-radius: 1px 1px 1px 1px;
    box-shadow: 0 0 2px #222222;
    color: #742C2B;
    text-shadow: 0 1px 0 #FFFFFF;
} 
```

JS（带 JQ）：

```
$(document).ready(function(){    
    var div = $('#menu-new div.contSize'),
                 ul = $('ul.menu'),
                 ulPadding = 15;

    var divWidth = div.width();
    var lastLi = ul.find('li:last-child');

    div.mousemove(function(e){

      var ulWidth = lastLi[0].offsetLeft + lastLi.outerWidth() + ulPadding;
      var left = (e.pageX - div.offset().left) * (ulWidth-divWidth) / divWidth;
      div.scrollLeft(left);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T01:04:04.407

您可以使用[现有的解决方案](http://sorgalla.com/projects/jcarousel/)。

Živ 生物布兰科！

# gcc - 链接共享对象的未定义引用错误

> ID：12334719
> 
> 赞同：1
> 
> 时间：2012-09-08T21:40:18.113
> 
> 标签：gcc, g++, centos, shared

我有一个**共享库**，它依赖于一些**静态库**，其中包括*zlib*等。当我用 g++（cent os 6.3）的依赖静态库构建我的共享库时，它编译得很好。现在，当我尝试在测试项目中使用我的共享库时，我遇到了很多未解决的错误。我做错了什么？

> g++ -L/usr/local/lib -L/home/de.../workspace/libtest/Debug -o "mytest" ./src/mytest.o -ltest
> 
> /home/de.../workspace/libtest/Debug/libtest.so：未定义对“BZ2_bzCompressEnd”的引用
> 
> collect2: ld 返回 1 个退出状态

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T21:52:17.713

该错误使您看起来还需要链接 bzip2：

```
g++ -L/usr/local/lib -L/home/de.../workspace/libtest/Debug -o "mytest" ./src/mytest.o -ltest -lbz2 
```

您确实需要小心将静态库链接到共享库，但您会看到此错误，因为您需要链接其余库。

# c++ - seekp 和 seekg 与 fstream

> ID：12334730
> 
> 赞同：4
> 
> 时间：2012-09-08T21:41:48.013
> 
> 标签：c++, fstream

我注意到了这个奇怪的事情

```
fstream obj(filename , ios::in);
obj.seekp(7); 
```

是相同的

```
fstream obj(filename , ios::in);
obj.seekg(7); 
```

`seekg`并`seekp`执行相同的操作并导致相同的结果，尽管我仅指定了 ios::in 标志

为什么他们都使用 fstream？`seekp`fstream和fstream有什么区别`seekg`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T22:05:59.483

`basic_fstream`派生自`basic_iostream`派生自`basic_istream`和`basic_ostream`。因此，`basic_fstream`具有函数`seekp`from`basic_ostream`和函数`seekg`from `basic_ifstream`。

**简而言之，在您的情况下，对 seekp 和 seekg 的调用执行相同的操作，因为执行的操作仅`basic_filebuf::seekpos`取决于`basic_filebuf`.**

```
basic_ostream<charT,traits>& seekp(pos_type pos); 
```

> 效果：如果 fail() != true，则执行 rdbuf()->pubseekpos(pos, ios_base::out)。在失败的情况下，该函数调用 setstate(failbit) （可能会抛出 ios_base::failure）。

在哪里`pubseekpos`调用`seekpos`（即`virtual`调用`basic_filebuf::seekpos`）

```
pos_type seekpos(pos_type sp,
ios_base::openmode which = ios_base::in | ios_base::out); 
```

> 如果可能，更改文件位置以对应存储在 sp 中的位置（如下所述）。更改文件位置执行如下：
> 
> 1.  if (om & ios_base::out) != 0，然后更新输出序列并写入任何 unshift 序列；
>     
>     
> 2.  将文件位置设置为 sp；
>     
>     
> 
> **3\. if (om & ios_base::in) != 0，则更新输入序列；**
> 
> 其中**om 是传递给最后一次调用 open() 的打开模式**。如果 is_open() 返回 false，则操作失败。

由于您使用`ios_base::in`函数打开文件会执行 2 和 3 点。

```
basic_istream<charT,traits>& seekg(pos_type pos); 
```

> 效果：表现为一个未格式化的输入函数（如 27.7.2.3，第 1 段所述），除了该函数首先清除 eofbit，它不计算提取的字符数，也不影响后续调用返回的值计数（）。构建哨兵对象后，如果fail() != true，则执行rdbuf()->pubseekpos(pos, ios_base::in)。在失败的情况下，该函数调用 setstate(failbit) （可能会抛出 ios_base::failure）。

# c++ - 虚拟方法和构造函数？

> ID：12334732
> 
> 赞同：1
> 
> 时间：2012-09-08T21:42:11.793
> 
> 标签：c++, constructor, virtual

我有鸡肉<->鸡蛋问题。
我想为容器类创建接口，以便我可以强制实现特定的 attr-accessors 和其他方法，同时我希望能够从 Containers 构造函数中调用这些方法。
但正如我们所知，从构造函数调用虚方法将调用基类方法，因为层次结构中的构造函数被调用的顺序。
所以问题是我需要虚拟方法来强制实现，但这是我不能在构造函数中调用的东西。
编辑：我希望当我必须实现容器类（C1，C2 ...）时强制实现特定方法，其次我希望能够在容器构造函数中使用这些方法。简单来说，我想实现 INTERFACE 要求，仅声明混合。谢谢
你如何解决这个问题？
下面是代码示例。

```
#include <iostream>
using namespace std;

class Base {
public: 
    virtual void myvirt() { cout << "Base::virt()" << endl; };
};

class C1 : public Base {
 public:
    C1() {cout << "C1()" << endl; C1::myvirt(); };
    C1(int i) { cout << "C1(int)" << endl; }
    void myvirt() { cout << "C1::virt" << endl;}
};

class C2 : public Base {
 public:
    C2() {cout << "C2()" << endl; C2::myvirt();};
    C2(int i) { cout << "C2(int)" << endl; }
    void myvirt() { cout << "C2::virt" << endl;}
};

template<class C = C1>
class Sc: public C {
 public:
    Sc() : C() { cout << "Sc()" << endl; };
    Sc(int n): C(n)  { cout << "Sc(int)" << endl; };

};

int main() {
    Sc<C2>  $sx(12);
    return 0;
} 
```

正如我所问的那样，是否有某种方法可以强制在特定 Constructors() 的后代类中实现。像“虚拟构造函数”之类的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T21:56:49.943

只要让构造函数变得微不足道，然后在构造函数返回后，调用某种初始化函数来完成对象的构造。你也可以使用[克隆](http://www.parashift.com/c++-faq/virtual-ctors.html)习语，这取决于你想如何决定要构造什么样的对象。

你也可以有一个包装类，它的构造函数首先构造内部类，然后调用它的虚拟初始化函数。

更新：你可以这样包装：

```
 Class Wrapper : public Inner
 {
        public:
        Wrapper(...) : Inner(...)
        {
            init();
        }
        virtual ~Wrapper();
 } 
```

现在你可以做

```
 Wrapper foo(whatever); 
```

您可以`foo`像使用`Inner`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T22:43:44.247

首先，您不应该在构造或破坏期间调用虚函数。这根本不是一个好习惯。

摘自 Effective C++，第 3 版的第 9 项：

> 这种看似违反直觉的行为是有充分理由的。因为基类构造函数在派生类构造函数之前执行，所以在基类构造函数运行时派生类数据成员尚未初始化。如果在基类构造过程中调用的虚函数下降到派生类，派生类函数几乎肯定会引用本地数据成员，但这些数据成员还没有被初始化。这将是未定义行为和深夜调试会话的不间断票。调用对象中尚未初始化的部分本质上是危险的，因此 C++ 没有办法做到这一点。

[http://www.artima.com/cppsource/nevercall.html](http://www.artima.com/cppsource/nevercall.html)

# c++ - c++ boost thread_group with asycron 返回

> ID：12334735
> 
> 赞同：0
> 
> 时间：2012-09-08T21:42:36.037
> 
> 标签：c++, multithreading, boost, boost-thread

我正在尝试编写一个函数来处理线程组中线程的输入参数和返回值。

我的示例类：

```
 // includes...
class MyClass(int id)
  {
  thread_id = id;
  i = id* 5; 
  b = false;
 }

void resetCounter(int j){
  i = j * 5;
 }
int getId(){
 return id;
}
bool getBool(){
  return b;
 }

void DoWork(){
  while( i > 0 ){
     boost::this_thread::sleep(boost::posix_time::seconds(i));
      i--;
  }
  b = true;  // DoWork will in the real code be able to return false!
  }
  private:
  bool b;
  int i;
  int thread_id
 };

  boost::threadgroup threads; 
```

示例代码：

```
 bool exist = false;
  for(int i=0;i<4;i++){
  // first check if thread id exist (possible)? 
  // If so don´t create a new thread but reset the counter!
  if(exist){
   // in current thread call reset "i" (w.resetCounter(i))
   }else{
    MyClass m(i);
    boost::function<void()> thread_func = boost::bind(&MyClass::DoWork, &m);
    threads.create_thread(thread_func);
   }
 } 
```

我想遍历线程并能够检查 DoWork 是否返回 true。

我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T09:58:22.120

首先，`thread_group`您不能遍历线程对象。因此，如果这是您想要的，请考虑将线程对象存储在其他容器中。

此外，您不能便携地等到一个线程完成，但如果您不介意使用 Windows 特定的 API，您可以使用`WaitForMultipleObjects`.

但是，我建议您重新设计您的应用程序，以避免这些技巧。

# php - Zend View 渲染在大数据集上很慢

> ID：12334740
> 
> 赞同：2
> 
> 时间：2012-09-08T21:43:30.260
> 
> 标签：php, zend-framework

Zend 视图通常会立即渲染，但数据集很大；将 1500 个对象放入 xml 视图中，需要 2-3 秒，这对我的应用程序来说是不可接受的。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T23:09:04.190

**600 KB 可以或不可以强制应用程序执行缓慢。**执行时间取决于实际脚本、其持久层、从 Web 到数据库服务器的连接等等。因此：

首先，以这样一种方式检测您的应用程序，即**计算服务器端脚本所花费的时间**。

例如，像这样重命名`index.php`并`realIndex.php`创建一个新的`index.php`：

```
$startTime = microtime(TRUE);

require_once( dirname( __FILE__ ) . '/realIndex.php' );

$endTime = microtime(TRUE);

echo '<hr />Time taken: ' . ( $endTime - $startTime ) . ' micros'; 
```

当然，这种方法是微不足道的，并不适用于任何情况。然而，这是一个起点。

**尝试返回少量数据**

通常，大量数据项（无论是否为 XML）都表达了糟糕的用户体验和技术设计

因此，我建议在服务器端处理尽可能多的数据并将**压缩数据集返回给客户端**。不要忘记：在检索和处理数据方面，您的数据库系统或多或少总是比您的脚本快。

由于用户无法真正理解来自 1500 项网页的所有数据，因此我建议对**结果视图的数据进行分页**。检索 1/10 的大数据集并提供导航控制以转到上一页或下一页。

请注意，这不仅可以帮助用户，还**可以减少数据量，您的数据库**需要扫描和检索 - 如果数据库定义良好。例如索引要搜索的属性并尝试将记录保存在固定大小的表中，等等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T16:24:40.933

三件事：

1.  忘记分析。您已经确定它很慢，这并不奇怪 - 1500 组数据是很多数据！
2.  添加分页！确定每页的最大项目数量（限制），然后添加分页控件。
3.  研究诸如 memcache 之类的缓存解决方案——尤其是在数据不经常更新的情况下。

看起来其中一些项目已经在另一个答案中得到解决。一定意味着我们正在做某事:-)

# jqmobi - 哪些网站使用jqMobi？

> ID：12334742
> 
> 赞同：1
> 
> 时间：2012-09-08T21:43:44.867
> 
> 标签：jqmobi

我正在考虑使用[jqMobi](http://www.jqmobi.com/)为客户编写网站的移动版本。我真的很想看到更多使用它的例子，因为只有[Kitchen Sink 演示](http://jqmobi.com/testdrive/)是不够的。我想查看运行它的*实际站点。*存在哪些使用 jqMobi 的网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:11:22.583

Badoo 使用[jqMobi](http://www.jqmobi.com/)。使用 iPhone 或 Android 设备访问。

# javascript - jQuery 显示/隐藏功能从 ul 中断

> ID：12334744
> 
> 赞同：0
> 
> 时间：2012-09-08T21:43:52.100
> 
> 标签：javascript, jquery, html

我正在尝试隐藏我的 div，这些 div 完成后将在其中包含内容。我有一个jsFiddle文件，有些编码不完整，只是写的很快，给大家一个思路。

[http://jsfiddle.net/vCZC7/](http://jsfiddle.net/vCZC7/)

我相信 ul 使它无法正确创建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T21:54:32.563

您小提琴中的 html 无效：您不应将相同的`id`属性分配给多个元素。如果你尝试做类似的事情，`$("#slidingDiv").hide();`它只会选择第*一个*（在大多数浏览器中）具有该 id 的元素来隐藏。

此外，您正在使用`".show_hide"`类选择器，但您的元素都没有该类。

在您所说的单击处理程序中，`$(this).next("#slidingDiv").slideToggle();`但该`.next()`方法不会寻找具有提供的 id 的下一个元素，如果该元素具有提供的 id，它只会选择紧随其后的元素。

此外，您还错误地使用了 jsfiddle：在 JavaScript 窗口中，您应该放置 JavaScript 代码，而不是`<script>`标签。您应该删除`<script>`标签，而是从左侧面板中选择所需的库，如下所示：http: [//jsfiddle.net/vCZC7/1/](http://jsfiddle.net/vCZC7/1/)（您的小提琴在左侧选择了默认的 Mootools 库。）

我发现您对所需行为的解释有些欠缺，但这是一个工作小提琴，单击 li 元素会切换下面的 div：http: [//jsfiddle.net/vCZC7/3/](http://jsfiddle.net/vCZC7/3/)（注意：我将其更新为使用最新的 jQuery因为最简单的事情似乎是使用`.index()`版本 1.4 中引入的方法语法，而您只包含了 1.3.2）。

# javascript - 未能触发 onChange 事件

> ID：12334746
> 
> 赞同：0
> 
> 时间：2012-09-08T21:44:17.537
> 
> 标签：javascript, jquery, events, search, onchange

我有这段代码，用“小部件”类搜索 HTML 元素的内容，并使用 jQuery 函数`fadeIn()`，`fadeOut()`只显示与搜索词匹配的元素。我不知道如何将搜索功能分配给，因为我没有将它分配给搜索框的更改事件。`onchange=`jQuery中的等价物是什么？我当前的代码：

```
function search(text, elements) {
    var term = text.value.toLowerCase();
    var elms = $(elements);
    var elm;
    for (var i = elms.length; i > 0; i-=1){
        elm = elms.get(i);
        if (elm.text().toLowerCase().indexOf(term)>=0 ) {
            elm.fadeOut(500);
        } else {
            elm.fadeIn(500);
        }

    }
} 
```

以及触发 onchange 的失败内联脚本：

```
<script type="text/javascript">
    $(document).ready(function() {
    $("#search").change(function() {
            search($("#search").text(),".widget");
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T21:49:07.583

我会使用 keyup() 而不是更改，更改只会在模糊时触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T22:00:57.303

> $("#search").change(function() { search($("#search").text(),".widget"); });

.change() 是对 JQuery 中 .on() 函数的引用，因此如果您愿意，可以这样重写它：

> $("#search").on('change' , function(){ search($(this).val(),".widget"); });

# scraperwiki - ScraperWiki：simple_html_dom 库

> ID：12334748
> 
> 赞同：0
> 
> 时间：2012-09-08T21:44:54.420
> 
> 标签：scraperwiki

我想知道 ScraperWiki 的 simple_html_dom 库是否：

```
require 'scraperwiki/simple_html_dom.php'; 
```

与此相同或使用相同的方法：

[PHP 简单的 HTML DOM 解析器](http://simplehtmldom.sourceforge.net/)

我想知道这一点，因为这将是一种在本地尝试 ScraperWiki 刮板的简单方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:12:44.067

是的，它们是一样的。

如果您使用以下代码在 scraperwiki 中运行新的刮板：

```
echo `/usr/bin/md5sum "../scraperwiki/php/scraperwiki/simple_html_dom.php"`; 
```

您可以获得他们正在使用的文件的 md5 总和。IE`fa249f6c0a0bc274631b8d606817f49d`

如果您从 sourceforge 下载文件并使用带有以下代码的本地 php 文件：

```
echo hash_file('md5', 'simple_html_dom.php'); 
```

您可以在 sourceforge 上获取文件的 md5 和。IE`fa249f6c0a0bc274631b8d606817f49d`

如您所见，两者都是相同的：D

ps 是的，scraperwiki 似乎在```:O中运行代码

# vb.net - 在 VB 中将图像文件名发送到 .TXT 会出错

> ID：12334749
> 
> 赞同：0
> 
> 时间：2012-09-08T21:45:12.197
> 
> 标签：vb.net

使用下面的代码，我正在尝试制作一个将图像名称发送到 .TXT 文件的编译器，然后可以稍后由另一个程序读取该文件以制作世界地图（就像在旧的 NES Zelda 游戏中一样）。问题出在第 16 行（如果不计算空格，则为 15）当程序到达发送图像名称的那个位时会出现问题，它会返回此错误：

“未为字符串“Me.BackgroundImage = WindowsAppl”定义运算符 '&' 并键入 'Bitmap'。”

我该如何解决这个问题？似乎编译器在将代码写入文件之前正在读取代码。

谢谢！利亚姆·哈克特

```
 'Saves the map into a .TXT file
    Dim mydocpath As String = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments)
    Dim sb As New StringBuilder()
    'Used to manage compiler
    Dim MLN As Byte
    Dim FC As Boolean = True

    'Two "FOR" loops one for the Horizontal axis for the map and one for the Verticle axis
    For x = 1 To 10
        For y = 1 To 10

            'On first loop
            If FC = True Then
                sb.AppendLine("If WorldHorizontal = " & x & "And WorldVerticle = " & y & " Then")
                sb.AppendLine("")
                MLN = MLN + 1
                sb.AppendLine("Me.BackgroundImage = WindowsApplication1.My.Resources.Resources." & MapLayout(MLN).Image)
                sb.AppendLine("")
                FC = False

                'Everyother loop
            Else
                sb.AppendLine("ElseIf WorldHorizontal = " & x & "And WorldVerticle = " & y & " Then")
                sb.AppendLine("")
                MLN = MLN + 1
                sb.AppendLine("Me.BackgroundImage = WindowsApplication1.My.Resources.Resources." & MapLayout(MLN).Image)
                sb.AppendLine("")
            End If

        Next
    Next

    ' Saves file in MyDocuments
    Using outfile As New StreamWriter(mydocpath & "\" & txtbFileName.Text & ".txt")
        outfile.Write(sb.ToString())
    End Using
    MsgBox("Compile Finished") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T23:08:43.827

显然 `MapLayout(MLN).Image`是`Bitmap`，位图没有覆盖 -`&`运算符（`+`在 C# 中）。所以你不能用这种方式连接字符串：

```
Dim doesNotCompile = "Path of this Bitmap: " & bitmap 
```

我假设您想连接图像路径。但是位图不会在某处存储它的路径。因此，您必须自己将其保存在您的类或方法中。

# bash - 在 Bash 命令行中，如何在光标后立即剪切单词？

> ID：12334750
> 
> 赞同：1
> 
> 时间：2012-09-08T21:45:26.183
> 
> 标签：bash, command-line

在 Bash 命令行中，如何在光标后立即剪切单词？

`Ctrl`+`W`删除它前面的单词。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T21:46:17.427

我通常使用`Alt`+来执行此操作`D`。您可以查找“readline Emacs 快捷方式”。

# gwt - 改进 gwt 中的 CellEditor 布局

> ID：12334757
> 
> 赞同：0
> 
> 时间：2012-09-08T21:46:25.587
> 
> 标签：gwt

我在我们的项目中使用了一个 gwt 孵化器表。而且我需要在单击该字段时将其中一个列文本显示为弹出窗口。原因是数据可能有点大，并且调整表列的大小以读取该列中的值看起来不太好。

因此，我们想如果单击属性，是否可以显示带有文本的弹出窗口。我尝试使用 CellEditor 来实现它，如下所示：

```
TextCellEditor cellEditor = new TextCellEditor() {
                @Override
                public boolean onAccept() { 
                    return true;
                }
            };

            cellEditor.setHeight("100px");
            columnDef.setCellEditor(cellEditor); 
```

但问题是单元格编辑器弹出窗口中的实际文本框仍然没有增加高度。通过单元格编辑器或其他方式在鼠标悬停在该列上或单击时显示弹出窗口的任何其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T05:40:37.547

没关系，而不是使用 celleditor 我所做的是在表格列值字段中添加了一个小图标，并在点击侦听器上添加了一个弹出窗口

# jquery - 在 Google App Engine 中实现无限滚动

> ID：12334763
> 
> 赞同：2
> 
> 时间：2012-09-08T21:47:36.653
> 
> 标签：jquery, python, google-app-engine

首先我想说我之前问过一个类似的问题，但是我想给这个问题更多的方向。作为 python、应用程序引擎，尤其是 jquery 的新手，这是一项相当艰巨的任务。我想知道是否有人可以请我指出正确的方向（也许是在应用程序引擎本身中执行此操作的一种方法），甚至可以很好地概述我应该在这里做什么。

以下是在我的个人资料页面中获取帖子的代码：

我现在拥有的是一个 Query 对象：

```
 posts = db.GqlQuery("select * from Profile_Comments WHERE name_of_profile =:1 order by date_created desc", profile_id) 
```

我的 jinja 模板中还有一个 for 循环，用于获取帖子：

```
{% for post_tmp in posts %}

        {{post_tmp.post.replace('\r\n', '<br>') | safe }}

{%  endfor %} 
```

非常非常感谢你！并对伪重新发布感到抱歉！

编辑 - 整个配置文件处理程序（模板在上面发布......它是一个简单的 for 循环）：

```
 class Profile(MainHandler):
    def get(self, profile_id):
        u = User.by_name(profile_id.lower())
        if not u:
            self.redirect('/')
        if self.user and profile_id:
            current_user = self.user.name
            name1 = ''
            friend_name = ''
            team_imagee = ''
            key = ''
            monthss = ''
            yearss = ''
            dayss = ''
            countryss = ''
            team_imagee2 = ''
            imgs2 = ''
            imgs = ''
            key2 = ''
            name22 = ''
            name2 = ''
            handless = ''
            msgg = ''
            imgs  = db.GqlQuery("select * from Profile_Images WHERE name =:1", profile_id)
            imgs2  = db.GqlQuery("select * from Profile_Images WHERE name =:1", current_user)
            team_name  = db.GqlQuery("select * from Teams WHERE name =:1", profile_id)
            team_images  = db.GqlQuery("select * from Teamimg WHERE user =:1", profile_id)
            team_images2  = db.GqlQuery("select * from Teamimg WHERE user =:1", current_user)
            friends  = db.GqlQuery("select * from Friends WHERE name =:1 order by added_date desc limit 10", profile_id)
            posts = db.GqlQuery("select * from Profile_Comments WHERE name_of_profile =:1 order by date_created desc", profile_id)
            name2 = db.GqlQuery("select * from User WHERE name =:1", profile_id)
            month = db.GqlQuery("select * from User WHERE name =:1", profile_id)
            day = db.GqlQuery("select * from User WHERE name =:1", profile_id)
            year = db.GqlQuery("select * from User WHERE name =:1", profile_id)
            country = db.GqlQuery("select * from User WHERE name =:1", profile_id)
            handle  = db.GqlQuery("select * from Handle WHERE name =:1", profile_id)
            rating = db.GqlQuery("select * from Rating WHERE name_of_profile =:1", profile_id)
            profile_msg = db.GqlQuery("select * from Profile_Msg WHERE name =:1", profile_id)
            for handles in handle:
                handless = handles.handle_name
            for months in month:
                monthss = months.month
            for countrys in country:
                countryss = countrys.country
            for days in day:
                dayss = days.day
            for years in year:
                yearss = years.year
            for clan in team_name:
                    name1 = clan.team_name_anycase
            for clan in team_name:
                    name2 = clan.team_name
            for image in team_images:
                team_imagee = image.key()
            for image2 in team_images2:
                team_imagee2 = image2.key()
            for img in imgs:
                key = img.key()
            for img2 in imgs2:
                key2 = img2.key()
            for msg in profile_msg:
                    msgg = msg.msg       
            self.render('profile.html', msg = msgg, team_name2 = name2, handle_var = handless,  imgs = imgs, team_img2 = team_imagee2, profile_image_posted = key2, posts = posts, profile_id = profile_id, country_var = countryss, day_var = dayss, year_var = yearss, month_var = monthss, current_user = current_user, friends = friends, team_img = team_imagee, team_name = name1, profile_image = key, username = self.user.name, email = self.user.email, firstname = self.user.first_name, last_name = self.user.last_name, country = self.user.country)
        else:
            self.redirect('/register')

    def post(self, profile_id):
        if self.user and profile_id:
            current_user = self.user.name
            name1 = ''
            friend_name = ''
            team_imagee = ''
            key = ''
            monthss = ''
            yearss = ''
            dayss = ''
            countryss = ''
            team_imagee2 = ''
            imgs2 = ''
            imgs = ''
            key2 = ''
            name22 = ''
            name2 = ''
            handless = ''
            msgg = ''
            imgs  = db.GqlQuery("select * from Profile_Images WHERE name =:1", profile_id)
            imgs2  = db.GqlQuery("select * from Profile_Images WHERE name =:1", current_user)
            team_name  = db.GqlQuery("select * from Teams WHERE name =:1", profile_id)
            team_images  = db.GqlQuery("select * from Teamimg WHERE user =:1", profile_id)
            team_images2  = db.GqlQuery("select * from Teamimg WHERE user =:1", current_user)
            friends  = db.GqlQuery("select * from Friends WHERE name =:1 order by added_date desc limit 10", profile_id)
            posts = db.GqlQuery("select * from Profile_Comments WHERE name_of_profile =:1 order by date_created desc", profile_id)
            name2 = db.GqlQuery("select * from User WHERE name =:1", profile_id)
            month = db.GqlQuery("select * from User WHERE name =:1", profile_id)
            day = db.GqlQuery("select * from User WHERE name =:1", profile_id)
            year = db.GqlQuery("select * from User WHERE name =:1", profile_id)
            country = db.GqlQuery("select * from User WHERE name =:1", profile_id)
            handle  = db.GqlQuery("select * from Handle WHERE name =:1", profile_id)
            for handles in handle:
                handless = handles.handle_name
            for months in month:
                monthss = months.month
            for countrys in country:
                countryss = countrys.country
            for days in day:
                dayss = days.day
            for years in year:
                yearss = years.year
            for clan in team_name:
                    name1 = clan.team_name_anycase
            for clan in team_name:
                    name2 = clan.team_name
            for image in team_images:
                team_imagee = image.key()
            for image2 in team_images2:
                team_imagee2 = image2.key()
            for img in imgs:
                key = img.key()
            for img2 in imgs2:
                key2 = img2.key()
            profile_submit_comment=''
            post_check = self.request.get('profile_submit_comment')
            if self.request.get('delete'):
                the_post = self.request.get('delete')
                q = Profile_Comments.get_by_id(int(the_post), parent=None)
                db.delete(q)
                error = "Comment successfully deleted."
                self.render('profile.html', handle_var = handless, team_name2 = name2, error = error, imgs = imgs, team_img2 = team_imagee2, profile_image_posted = key2, posts = posts, profile_id = profile_id, country_var = countryss, day_var = dayss, year_var = yearss, month_var = monthss, current_user = current_user, friends = friends, team_img = team_imagee, team_name = name1, profile_image = key, username = self.user.name, email = self.user.email, firstname = self.user.first_name, last_name = self.user.last_name, country = self.user.country)
#            if self.request.get('edit'):
#                the_post = self.request.get('edit')
#                q = Profile_Comments.get_by_id(int(the_post), parent=None)
#                db.delete(q)
#                self.redirect('/profile/%s' %profile_id)
            elif not post_check:
                error = "You cannot submit empty posts."
                self.render('profile.html', team_name2 = name2, error = error, imgs = imgs, team_img2 = team_imagee2, profile_image_posted = key2, posts = posts, profile_id = profile_id, country_var = countryss, day_var = dayss, year_var = yearss, month_var = monthss, current_user = current_user, friends = friends, team_img = team_imagee, team_name = name1, profile_image = key, username = self.user.name, email = self.user.email, firstname = self.user.first_name, last_name = self.user.last_name, country = self.user.country)
            elif self.request.get("profile_submit_comment") != '':
                profile_comments = Profile_Comments (name_of_submitted = self.user.name, name_of_profile = profile_id)
                commentupl = self.request.get("profile_submit_comment")
                profile_comments.post = (commentupl)
                profile_comments.put()
                self.redirect('/profile/%s' %profile_id) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T23:37:38.670

使用“无限滚动”的主要原因之一是减少加载页面时最初需要发送的数据量。我可能错了，但看起来你有一个 Gqlquery 可以加载所有用户的帖子。这对于无限滚动的概念并没有多大意义。如果在加载页面时查询所有帖子，那么最初不显示所有帖子的好处很小（如果有的话）。

无论如何，我会考虑为此使用 jQuery 插件，例如[Infinite Scroll](http://www.infinite-scroll.com/infinite-scroll-jquery-plugin/)。这是基本概念。

首先加载页面并打印从 GqlQuery 返回的任何内容。

```
<html>
  <div id="posts">
    <div>post 1</div>
    <div>post 2</div>
    <div>post 3</div>
  </div>
</html> 
```

接下来使用javascript选择`<div id="posts">`元素。

然后，将另一组帖子（第 2 页）加载到 off-DOM`<div>`中。

最后，当有人到达页面底部时，将`<div id="posts">`您选择的元素附加到下一组帖子（将它们插入到`<div id="posts">`元素中的最后一个帖子下方）。

# javascript - zynga.com 的书签不起作用

> ID：12334765
> 
> 赞同：0
> 
> 时间：2012-09-08T21:47:53.170
> 
> 标签：javascript, firefox, google-chrome, bookmarklet

当我单击此自动声明 zynga.com 奖励的小书签时，它什么也没做，但它的创建者可以正常工作。我知道的不够多，无法弄清楚为什么它对我不起作用。创作者使用了Firefox，我在Firefox和Chrome中都试过了，它什么也没做。我尝试更新浏览器和所有插件，但没有任何效果。如果可以，请查看代码，看看是否有任何问题会导致问题，谢谢。

```
var classesPublic='zui_list_itemsContainer zui_zdc_gameboard_rts_rtsList_itemsContainer zui_zdc_gameboard_rts_rtsPublicList_itemsContainer';var classesNeighbors='zui_list_itemsContainer zui_zdc_gameboard_rts_rtsList_itemsContainer zui_zdc_gameboard_rts_rtsNeighborList_itemsContainer';var classesButtons='zui zui_button zui_enabled zui_button_enabled zui_zdc zui_button_zdc zui_zdc_enabled zui_button_zdc_enabled zui_button_tiny zui_button_white';var unclaimedRewardsNeighbors,unclaimedRewardsPublic;var unclaimedNeighborsInit=unclaimedPublicInit=true;function collectRewardsNeighbors(){for(unclaimedIndex=0;unclaimedIndex=1){if(unclaimedNeighborsInit){unclaimedNeighborsInit=false;collectRewardsNeighbors();}else{setTimeout('collectRewardsNeighbors()',1000);}}},false);var parentUnclaimedPublic=document.getElementsByClassName(classesPublic)[0];parentUnclaimedPublic.addEventListener('DOMSubtreeModified',function(){unclaimedRewardsPublic=parentUnclaimedPublic.getElementsByClassName(classesButtons);if(unclaimedRewardsPublic.length>=1){if(unclaimedPublicInit){unclaimedPublicInit=false;collectRewardsPublic();}else{setTimeout('collectRewardsPublic()',1000);}}},false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T01:32:21.623

`for(unclaimedIndex=0;unclaimedIndex=1)`是不正确的语法或逻辑。那可能是你的错误。

提示：

使用[JS Beautifier](http://jsbeautifier.org/)之类的工具将单行 JS 转换为格式正确、易于阅读的代码。

我使用[JS Bin](http://jsbin.com/ifomij/1/edit)来检查警告和语法错误。

# testing - playframework 2.x with scala - 如何显示来自 specs2 运行测试的记录器信息？

> ID：12334769
> 
> 赞同：1
> 
> 时间：2012-09-08T21:49:03.233
> 
> 标签：testing, logging, playframework-2.0, specs2

我使用 specs2 做了几个简单的测试，并在其中插入了几个 play.Logger.info("messsage") ，但它们只是没有出现在任何地方......

有什么方法可以让它们显示在某个地方吗？

能够使用 eclipse 或 intelliJ 调试测试代码也将非常方便

# windows - MATLAB：更改图形高度会导致子 uicontrols 向相应方向移动

> ID：12334774
> 
> 赞同：1
> 
> 时间：2012-09-08T21:49:52.560
> 
> 标签：windows, matlab, user-interface

我正在运行 MATLAB 2012a，遇到一个问题，如果不采取丑陋的解决方法，我就无法完全解决。我目前正在开发一个 GUI，它将在从弹出菜单中选择一个值时调整主要图形和子 uicontrols 的高度。下面表示用于更新主图高度的代码：

```
% Update the figure height: [x y height width]
Position = get(handles.mainfigure, 'Position');
Position(4) = Position(4) + heightDelta;
set(handles.output, 'Position', Position) 
```

但是，当图形的高度发生变化时，所有的 uicontrols 都会向相应的方向移动。也就是说，如果高度增加，所有孩子都向下移动，而如果高度降低，所有孩子都向上移动。这适用于单位不是“标准化”（其本身更加不稳定）的情况。

虽然我可以通过将孩子向相反方向移动相同的增量来轻松解决这个问题，但有没有办法在不影响 uicontrols 位置的情况下更改图形高度？在 GUIDE 中更改高度时不会发生此行为；相反，它只在回调事件期间出现。

使用“标准化”单位，它也会导致表格改变高度，同时向上移动一些控件和向下移动一些控件。我无法弄清楚为什么会这样。如果有人能阐明任何观点，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T23:48:44.827

图的孩子的位置是相对于图的左下角的。因此，如果增加图形高度，uicontrols 与图形底部的距离保持不变，因此看起来正在向下移动。

当 uicontrol 的单位被归一化时，所有的东西，包括 uicontrols 之间的空间，都会按比例拉伸，这使得上半部分的 uicontrols 看起来向上移动，而下半部分的 uicontrols 向下移动。

从定义图形对象位置的方式来看，除了更改所有 uicontrol 的位置之外，您确实无能为力。

# c - notify_notification_new 未显示图标

> ID：12334781
> 
> 赞同：2
> 
> 时间：2012-09-08T21:51:43.430
> 
> 标签：c, libnotify

我完全被难住了。我有这个小东西可以简化在 linux 下安装**MTP**单元，但由于某种原因，我无法在使用变量时让**libnotify显示我的图标。**如果我对完整路径进行硬编码，它可以正常工作，但是当将变量用作`getcwd`and时`getenv`，它不会显示。

这是一段代码：

```
char cwd[1024];
char *slash = "/";  
{
NotifyNotification *mount;
notify_init ("Galaxy Nexus mounter");
    if (getcwd(cwd, sizeof(cwd)) != NULL)
    {
        mount = notify_notification_new ("Samsung Galaxy Nexus", "Mounted at ~/Nexus", ("%s%sandroid_on.png", cwd, slash));
        fprintf(stdout, "Icon used %s%sandroid_on.png\n", cwd, slash);
        system("jmtpfs ~/Nexus");
        notify_notification_set_timeout (mount, 2000);
        notify_notification_show (mount, NULL);
    }
    } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:56:05.937

```
("%s%sandroid_on.png", cwd, slash) 
```

您是否知道 C 中的此表达式等效于？

```
(slash) 
```

逗号运算符没有其他作用！

您可能想要执行以下操作：

```
char png[1100];
sprintf(png, "%s%sandroid_on.png", cwd, slash);
mount = notify_notification_new ("Samsung Galaxy Nexus", "Mounted at ~/Nexus", png); 
```

或者更简单，特别是如果你知道你不会溢出 char 数组：

```
strcat(cwd, slash);
strcat(cwd, "android_on.png");
mount = notify_notification_new ("Samsung Galaxy Nexus", "Mounted at ~/Nexus", cwd); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T18:00:22.787

这看起来不对：

```
mount = notify_notification_new ("Samsung Galaxy Nexus", "Mounted at ~/Nexus", ("%s%sandroid_on.png", cwd, slash)); 
```

第三个参数应该是字符串吗？如果是这样，您需要使用 snprintf 单独构建它：

```
char path[1000];
snprintf (path, sizeof(path), "%s%sandroid_on.png", cwd, slash);
mount = notify_notification_new ("Samsung Galaxy Nexus", "Mounted at ~/Nexus", path);
fprintf(stdout, "Icon used %s\n", path); 
```

# bash - 有没有一种 shell / bash 方式来别名... find . -type f -exec grep -l {} \;;

> ID：12334782
> 
> 赞同：2
> 
> 时间：2012-09-08T21:51:57.133
> 
> 标签：bash, shell

基本上，这个命令对所有子目录中的所有文件进行递归 grep，我经常使用它

但它很长，需要一段时间才能输入

所以我想知道如果不是...

```
$ find . -type f -exec grep -l <some word here> {} \;; 
```

有一种方法可以在我的 .bashrc 中给它或其他东西起别名，这样我就可以做类似...

```
$ findrecursive <some word here> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T21:54:00.440

我只是假设您使用 Linux 和 GNU 工具，我不知道它是否是 GNU 扩展，但否则下面的代码片段应该可以快速轻松地完成您想要的操作：

```
grep -r <search-regexp> 
```

以上不遵循符号链接，如果您希望搜索执行您需要的操作：

```
grep -R <search-regexp> 
```

在某些发行版中，有一个`rgrep`命令，我只是认为它是`grep -r`. 如果您没有它，只需`alias rgrep="grep -r"`将其放入您的 .bashrc 或等效文件中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T21:53:07.373

当然。在 bash 中：

```
function findrecursive() { find . -type f -exec grep -l "$1" {} \;; } 
```

然后这样称呼它：

```
findrecursive "hello" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T21:55:11.053

你总是可以把它变成一个 shell 脚本，然后把它放进你的一个 bin 中。例如：

```
#!/bin/bash
# findrecursive.sh

find . -type f -exec grep -l "$1" {} \;; 
```

然后，在你使它可执行后（例如`chmod`，并放在某个路径目录中（例如`/bin`），你可以通过说：

```
findrecursive.sh <some word here> 
```

当然你不需要`.sh`扩展，它只是一个排序的约定。您可能要注意，`<some word here>`当您调用脚本时，$1 将变为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-20T20:21:21.327

无论出于何种原因，这些解决方案在 LUbuntu 中使用 LXTerminal 中的 bash 对我不起作用。我将以下内容添加到我的`~/.bash_aliases`：

```
function find_helper() { /usr/bin/find . -iname "$@" -readable -prune -print; }
alias find='find_helper' 
```

我现在有了我预期的行为。例如：

```
find *.xml 
```

`pwd`从过滤掉`Permission Denied`消息中递归搜索。

# javascript - 无法使此功能正常工作

> ID：12334785
> 
> 赞同：0
> 
> 时间：2012-09-08T21:52:52.293
> 
> 标签：javascript

我正在尝试使用 codecademy 的说明构建一个刽子手游戏，但我很难独自跟随。在下面的guessLetter 函数中，我按照他们给我的说明添加了两行代码

这

```
shown = alterAt(checkLetter,letter,shown);           ///this is mine 
```

还有这个

```
checkLetter = indexOf(letter, checkLetter +1); 
```

但是，我无法通过测试。如果您能提供帮助，我将不胜感激。

```
// Skip to guessLetter(). You shouldn't need to touch this function.
function alterAt ( n, c, originalString ) {
    return originalString.substr(0,n) + c + originalString.substr(n+1,originalString.length);
}

function guessLetter( letter, shown, answer ) {
    var checkLetter = -1;  // This variable will hold the indexOf()

    checkLetter = answer.indexOf(letter); // Single Argument Version starting at 0
    while ( checkLetter >= 0 ) {

        // Replace the letter in shown with alterAt() and then store in shown.
       shown = alterAt(checkLetter,letter,shown);           ///this is mine
        // Use indexOf() again and store in checkLetter

        checkLetter = indexOf(letter, checkLetter +1);       ///this is mine
    }

    // Return our string, modified or not
    return shown;
} 
```

**更新**

如果猜测是正确的，它应该返回被猜测修改的显示。例如，如果单词是 tree 而玩家猜到 'e'，它应该返回 '__ee'。这是我无法使用“随便”这个词来工作的小提琴：http: [//jsfiddle.net/mjmitche/YAPWm/2/](http://jsfiddle.net/mjmitche/YAPWm/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:42:19.443

您在这一行有一个错误：

```
checkLetter = indexOf(letter, checkLetter +1); 
```

该`.indexOf()`方法需要在字符串上调用，就像在`while()`. 将其更改为：

```
checkLetter = answer.indexOf(letter, checkLetter +1); 
```

工作版本：http: [//jsfiddle.net/YAPWm/1/](http://jsfiddle.net/YAPWm/1/)

# php - Wordpress：使用 functions.php 和 foreach 循环

> ID：12334787
> 
> 赞同：1
> 
> 时间：2012-09-08T21:52:54.467
> 
> 标签：php, wordpress

为什么如果我从 functions.php 中调用自定义函数它不起作用？

我的自定义功能：

```
function get_cat_slug($ID) {
    $post_id = (int) $ID;
    $category = &get_category($post_id);
    echo $category->slug;
} 
```

循环遍历所有帖子，如下所示：

```
$args = array(
 'numberposts' => -1
);  
$posts = get_posts($args);
foreach ($posts as $post){
   // and withing this lopp I would like to get a category slug
   // so I am calling my custom function, also included in functions.php
   get_cat_slug($post->ID);

} 
```

但是，`get_cat_slug($post->ID)`总是返回`null`。为什么？我错过了什么？任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T22:27:36.690

get_category 之前绝对不能有 & 符号，它实际上需要[Category ID 而不是 post ID](http://codex.wordpress.org/Function_Reference/get_category)。）

[get_the_category](http://codex.wordpress.org/Function_Reference/get_the_category)返回一个类别数组（因为帖子可以有多个），您也不需要指定 (int)。如果您只想呼应第一只猫的蛞蝓（假设为单一分类），请尝试：

```
function get_cat_slug($post_id) {
  $cat_id = get_the_category($post_id);
  $category = get_category($cat_id[0]);
  echo $category->slug;
} 
```

但是，遵循 wordpress 函数样式，如果你用 命名你的函数`get_...`，它应该`return $category->slug`而不是`echo`它，这意味着你必须`echo get_cat_slug($post->ID);`在你的模板循环中。

您的循环依赖于 WP_Query，它属于模板文件而不是 functions.php。哪个模板文件取决于您的循环服务的目的以及您希望在哪里显示它。index.php 是主帖子循环的逻辑选择，尽管 archive.php、single.php 或任何预先存在的特定于主题的模板可能有意义，就像您创建的任何自定义、非标准模板一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T22:21:28.037

可能是你的演员应该是

```
$post_id = intval($ID); 
```

[参考](http://php.net/manual/en/function.intval.php)

您是否尝试过记录每一步？所以你可以准确地看到哪里出错了

# ruby - 运行多个 Chromedriver 会话？

> ID：12334798
> 
> 赞同：0
> 
> 时间：2012-09-08T21:53:57.247
> 
> 标签：ruby, google-chrome, webdriver, port, watir

我正在尝试使用 chromedriver（使用 Chrome）运行 Ruby 的 watir-webdriver 的十个单独实例，但是它们似乎都在争夺对端口 9050 的访问权（端口 chromedriver 显然在运行），这导致此消息出现在命令行输出：“**端口已在使用中。退出。** ” - 任何人都可以帮助我运行 chromedriver 的多个实例吗？是否可以在自己的端口上运行它们？如何指定此选项？任何帮助，将不胜感激！这种争夺同一个端口的行为阻碍了我运行多个实例的努力，并导致控制台关闭而使浏览器保持打开状态，而无需执行任何进一步的脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:49:35.033

我无法重现该问题。请确保您拥有最新的[selenium-webdriver](https://rubygems.org/gems/selenium-webdriver)和[watir-webdriver](https://rubygems.org/gems/watir-webdriver) gems 和[chromedriver](http://code.google.com/p/chromedriver/downloads/list)。

```
$ irb

> require "watir-webdriver"
=> true 

> chrome1 = Watir::Browser.new :chrome
=> #<Watir::Browser:0x..fe566050dd4713fcc url="about:blank" title="about:blank"> 

> chrome1.goto "google.com"
=> "http://www.google.hr/" 

> chrome2 = Watir::Browser.new :chrome
=> #<Watir::Browser:0x..fccc2afebe5385be4 url="about:blank" title="about:blank"> 

> chrome2.goto "yahoo.com"
=> "http://www.yahoo.com/" 
```

# javascript - 试图获取行数据警报。为什么我会在点击时收到多个警报？

> ID：12334802
> 
> 赞同：0
> 
> 时间：2012-09-08T21:54:39.317
> 
> 标签：javascript, jquery

我正处于学习 js 和 jquery 的早期阶段。我陷入了一个我不明白的问题。我有一个 HTML 表单，我在其中收集用户输入。单击提交按钮时，用户输入将作为新行保存到表中（我们称之为“myTable”）。我完成了那部分。但是现在我想在单击 myTable 中的一行时获取行数据。我也有点。单击该行时，我确实得到了数据，除非我单击该行，否则我会在警报中多次获得相同的数据。第一次单击该行时，我会收到一个警报，第二次是两个……以此类推。请指出我的错误。这是我的html：

```
<div>label>First Name: </label>
<input id="firstname" type="text" name="first name"/>

<br>
<label>Last Name: </label>
<input id="lastname" type="text" name="last name"/>

<input type ="button" value = "Submit" onclick ="addRow()" >
</div>

<table id="myTable" border=1 onclick="load_row()">
        <tr >
            <td>
            First Name
            </td>
            <td>
            Last Name
            </td>
        </tr>
</table> 
```

这是我的 javascript：此函数将用户输入作为新行添加到表中：

```
var addRow = function(){
var firstname = document.getElementById("firstname").value;
var lastname = document.getElementById("lastname").value;

$("#myTable tr:last").after("<tr><td>" + firstname + "</td><td>" + lastname + "</td></tr>" );   
}; 
```

此功能会提醒我单击的行的详细信息。这就是我想我做错了什么的地方：

```
var load_row = function(){
var rows = $("#myTable tr");

rows.click(function() {
    var data = new Array();
    var cells = $(this).find("td");
    cells.each(function(i, cell) {
        data.push($(cell).text());
    });
    alert(data);
});

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:00:21.293

这称为冒泡，只要单击 TR，您还会触发您绑定的 TABLE 的事件单击。因此，您不仅调用了 addRow，还调用了 load_row，它再次绑定了每个 TR 上的 .click 事件。

删除 table 元素上的 onclick 并在“head”标签中的某处添加“script”标签，例如

```
$(document).ready(function() { load_row() }); 
```

或在两者之间添加/更改

```
row.click => rows.**unbind('click')**.click
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T22:03:08.113

每次调用时都会发生这种情况，因为`load_raw`您将 +1 点击事件绑定到每一行。所以最好使用 jquery`on`绑定并`click`从 load_row 函数中删除绑定。

```
$('#myTable').on('click', 'tr', load_row()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T22:03:51.043

每次用户点击时，您似乎都在为每一行添加一个新的点击事件。因此，只需在添加新事件之前取消绑定 click 事件。

```
rows.unbind("click").click(function() {
  var data = new Array();
  var cells = $(this).find("td");
  cells.each(function(i, cell) {
    data.push($(cell).text());
  });
  alert(data);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T22:11:42.530

我清理了您的代码以删除内联 JavaScript 调用，使用了更多 jQuery ( `$("#firstname").val();`vs `document.getElementById("firstname").value`) 并使用该`.on()`函数正确绑定添加到表中的新行。

**[jsFiddle 示例](http://jsfiddle.net/j08691/zdy5E/)**。

**jQuery**

```
$('input[value="Submit"]').click(function() {
    var firstname = $("#firstname").val();
    var lastname = $("#lastname").val();
    $("#myTable tr:last").after("<tr><td>" + firstname + "</td><td>" + lastname + "</td></tr>");
});
$("#myTable").on('click', 'tr', function() {
    var data = new Array();
    var cells = $(this).find("td");
    cells.each(function(i, cell) {
        data.push($(cell).text());
    });
    alert(data);
});​ 
```

**HTML**

```
<div><label>First Name: </label>
<input id="firstname" type="text" name="first name"/>

<br>
<label>Last Name: </label>
<input id="lastname" type="text" name="last name"/>

<input type ="button" value="Submit" >
</div>

<table id="myTable" border=1>
        <tr >
            <td>
            First Name
            </td>
            <td>
            Last Name
            </td>
        </tr>
</table>​ 
```

# sqlite - sqlite 和希伯来语变体

> ID：12334803
> 
> 赞同：2
> 
> 时间：2012-09-08T21:54:42.433
> 
> 标签：sqlite

SELECT * FROM table WHERE word = "רֵאשִׁית" 将返回包含给定单词的结果，但使用不同的希伯来语变体编写的相同单词（ בְּרֵאשִׁית ,בראשית ,רֵאשִׁית）将被忽略。

有没有办法忽略变体之间的差异，以便将它们全部包含在返回的结果中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T09:35:16.603

用于比较字符串的算法称为[排序规则](http://en.wikipedia.org/wiki/Collation)。

要允许使用自定义排序规则，您必须使用 SQLite 的 C API 来注册自己的排序函数：[http ://www.sqlite.org/c3ref/create_collat​​ion.html](http://www.sqlite.org/c3ref/create_collation.html)

如果您使用的是 Android：操作系统注册了一个名为的排序规则`UNICODE`，它实现了[Unicode 排序算法](http://www.unicode.org/reports/tr10/)，它可能会或可能不会做您想要的。

其他 SQLite 安装可能已使用[ICU 扩展](http://www.sqlite.org/cgi/src/artifact/bf8461d8cdc6b8f514c080e4e10dc3b2bbdfefa9)进行编译。

# objective-c - 处理异步加载数据后释放的表视图数据源数组

> ID：12334804
> 
> 赞同：-2
> 
> 时间：2012-09-08T21:54:52.363
> 
> 标签：objective-c, ios, uitableview, asynchronous, wsdl2objc

我对 Objective-C 很陌生，并且`UITableView`在异步调用后更新我的问题。我有一个从`NSMutableArray`;填充的表格视图 我从 .net Web 服务的 JSON 响应中填充数组。我正在使用`wsdl2objc`从 Web 服务获取 JSON。

这是我的代码：

```
@interface NewsViewController : UITableViewController <ServiceSoapBindingResponseDelegate>

@property (nonatomic, strong) News *news;
@property (nonatomic, retain) NSMutableArray *newsList;

-(void) updateNewView:(NSMutableArray*) result;
-(void) loadNewsFromRemoteServer;

@end

-(void) viewDidLoad
{
    _newsList = [[NSMutableArray alloc] init];
    [self loadNewsFromRemoteServer];
    [super viewDidLoad];
}

-(void) loadNewsFromRemoteServer
{  
    NSString *customerID = @"xxx";
    NSString *uniqueID = @"xxx";    
    ServiceSoapBinding *bNews = [[ServiceSvc ServiceSoapBinding] retain];
    bNews.logXMLInOut = YES;
    ServiceSvc_GetNews *cRequest = [[ServiceSvc_GetNews new] autorelease];
    cRequest.id_ = customerID;
    cRequest.uniqueId = uniqueID;
    [bNews GetNewsAsyncUsingParameters:cRequest delegate:self];
}

-(void) operation:(ServiceSoapBindingOperation *)operation completedWithResponse:(ServiceSoapBindingResponse *)response
{
    NSArray *responseHeaders = response.headers;
    NSArray *responseBodyParts = response.bodyParts;
    NSMutableArray *newsListFromWebserver = [[NSMutableArray alloc] init];
    for(id header in responseHeaders) {
        // here do what you want with the headers, if there's anything of value in them
    }
    for(id bodyPart in responseBodyParts) {         
        if ([bodyPart isKindOfClass:[SOAPFault class]]) {
            // You can get the error like this:
            //NSLog(@"new list :: RESPONSE FROM SERVER :: %@",((SOAPFault *)bodyPart).simpleFaultString);
            continue;
        }
        //Get News List
        if([bodyPart isKindOfClass:[ServiceSvc_GetNewsResponse class]]) {
            ServiceSvc_GetNewsResponse *body = (ServiceSvc_GetNewsResponse*)bodyPart;
            NSString *nList = body.GetNewsResult;  //JSON FORMAT
            NSLog(@"new list :: RESPONSE FROM SERVER :: nList %@", nList);
            NSDictionary *resultsDictionary = [nList objectFromJSONString] ;
            for (NSDictionary * dataDict in resultsDictionary) {
                News *newNews = [[News alloc] init];
                _news = newNews;
                _news.newsTitle = [NSString stringWithFormat:[dataDict objectForKey:@"Title"]];
                _news.newsBody = [NSString stringWithFormat:[dataDict objectForKey:@"Body"]];
                _news.newsDate = [NSString stringWithFormat:[dataDict objectForKey:@"NewDate"]];
                [newsListFromWebserver addObject:_news];
               [_news release];
            }    
        }
    }   
    [self performSelectorOnMainThread:@selector(updateNewView:) withObject:newsListFromWebserver waitUntilDone:NO];
    [newsListFromWebserver release];
}

-(void) updateNewView:(NSMutableArray*) result
{
    _newsList = result;
    NSLog( @"new list - number of news :: %u", [_newsList count]);
    [self.tableView reloadData];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    static NSString *CellIdentifier = @"Cell";   
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
    }    
     cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    //Get the object from the array.
    News *cNews = [_newsList objectAtIndex:indexPath.row];
    cell.textLabel.text = cNews.newsDate;
    cell.detailTextLabel.text = cNews.newsTitle;
    cell.imageView.image = [UIImage imageNamed:@"bullet.png"];        
    return cell;
} 
```

我的应用程序将此记录到控制台：

```
2012-09-08 22:36:45.463 xxx[45630:13a03] new list - number of news :: 1
2012-09-08 22:36:45.465 xxx[45630:13a03] *** -[__NSArrayM objectAtIndex:]: message sent to deallocated instance 0x79a3680 
```

调用`[_newsList objectAtIndex:indexPath.row]`失败`tableView:cellForRowAtIndexPath:`。有什么帮助吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T23:19:50.980

当`updateNewView:`方法被调用时，在方法中创建的主线程`newsListFromWebserver`对象在该`operation:completedWithResponse:`方法的最后一行被释放，因此被释放。解决此问题的最简单方法是在主线程中调用内部和之后为`_newsList`ivar赋值。请注意，在这种情况下，您可以从中删除参数。`operation:completedWithResponse:``updateNewView``result`

`updateNewView`第一行方法也有泄漏。

这是一个小提示，它应该是什么样子：

```
-(void) operation:(ServiceSoapBindingOperation *)operation completedWithResponse:           (ServiceSoapBindingResponse *)response
{
    // your old parsing code here

    self.newsList = newsListFromWebserver;
    [newsListFromWebserver release];
    [self performSelectorOnMainThread:@selector(updateNewView) withObject:nil waitUntilDone:NO];
}

-(void) updateNewView
{
    NSLog( @"new list - number of news :: %u", [_newsList count]);
    [self.tableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T23:18:26.523

你说你没有使用ARC。你崩溃的原因是你为你的实例变量分配了一个自动释放的值而不是保留它：

```
-(void) updateNewView:(NSMutableArray*) result
{
    _newsList = result; // Should release the old and retain the new!
    NSLog( @"new list - number of news :: %u", [_newsList count]);
    [self.tableView reloadData];
} 
```

就个人而言，我会更改您的整个程序以尽可能使用该属性，但至少您需要释放旧值并保留新值

```
-(void) updateNewView:(NSMutableArray*) result
{
    self.newsList = result;
    NSLog( @"new list - number of news :: %u", [_newsList count]);
    [self.tableView reloadData];
} 
```

希望这可以帮助！

# android - Getting Android arrow group indicator

> ID：12334805
> 
> 赞同：0
> 
> 时间：2012-09-08T21:54:57.373
> 
> 标签：android, listview, expandablelistview, android-spinner

I just noticed that some android apps have a list view with a text and a arrow like the one from the expandable list view arrow indicator. I tried to search the api demos and the web to learn how can I fetch this icon.

The idea is then use this arrow to a list view and make the list view row act like a spinner.

The following image from ADW Launcher settings can give an idea of what I want

![enter image description here](../Images/bf05cb458e21a9b982518910cda58c47.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-09T23:46:32.587

Just found out that you achieve that functionality using Android Preferences for more info follow this [tutorial](http://android-journey.blogspot.pt/2010/01/for-almost-any-application-we-need-to.html)

# vb.net - 在 Visual Basic 中循环遍历 DataTable 时出错

> ID：12334810
> 
> 赞同：0
> 
> 时间：2012-09-08T21:55:17.757
> 
> 标签：vb.net, datatable

我在下面编写的代码将正确地进行循环迭代。它根据条件测试正确的行，添加到“辅助”数据表并按预期从“主”中删除。但是，在循环的第二次迭代中，我收到以下错误：

```
Collection was modified; enumeration operation might not execute. 
```

这是我正在使用的代码

```
 For Each row As DataRow In tblAgencyEdInfo.Rows
                Dim rDate As DateTime = row.Item("ExpirationDate")

                If rDate < DateTime.Now Then
                    tblExpEdInfo.ImportRow(row)
                    tblAgencyEdInfo.Rows.Remove(row)
                End If
            Next row 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T22:26:58.463

您不能在枚举期间修改集合。这意味着您不能添加或删除项目。在这种情况下，您希望在`For Each`循环中从 DataTable 中删除 DataRow。

解决方案是要么

1.  使用 a`For-Loop`并向后迭代项目，通过索引删除行或
2.  使用另一个集合 (fe a `List(Of DataRow)`) 并在`For Each`. 之后你只需要迭代这个列表并调用`tblAgencyEdInfo.Rows.Remove(rowToRemove)`

例如：

```
Dim rowsToRemove = New List(Of DataRow)
For Each row As DataRow In tblAgencyEdInfo.Rows
    Dim rDate As DateTime = row.Item("ExpirationDate")
    If rDate < DateTime.Now Then
        rowsToRemove.Add(row)
    End If
Next row

For Each rowToRemove As DataRow In rowsToRemove 
    tblExpEdInfo.ImportRow(row)
    tblAgencyEdInfo.Rows.Remove(row)
Next rowToRemove 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-27T21:55:34.610

以上属实，使用时不可更改。

```
 ' distinct
        Dim distinctTable As DataTable = tblProductsForDisplay.DefaultView.ToTable(True)
        ' get all bundles that contain products in bundles - GetBundleDataByOLLID
        For Each row As DataRow In distinctTable.Rows
            Dim myOLLCourseID As Integer = row.Item("OLLCourseID")
            tblProductsForDisplay.Merge(tblBundles(myOLLCourseID))
        Next 
```

所以我在这里所做的是将数据表移动到另一个副本，使用 Distinct "ToTable(True)" 将其过滤得更窄/更干净。

然后使用原始数据表合并项目，添加到原始数据表中，同时循环浏览我的副本。我原来的现在有所有的项目加上新的。您的 logiv 可能会以不同的方式更改原始内容，但我只是想通过示例来展示。

类风湿关节炎

# facebook-graph-api - 在时间线上显示与在时间线上允许

> ID：12334816
> 
> 赞同：0
> 
> 时间：2012-09-08T21:57:14.777
> 
> 标签：facebook-graph-api, development-environment

我正在按照此处发布的说明进行操作：[https ://developers.facebook.com/docs/opengraph/tutorial/#define](https://developers.facebook.com/docs/opengraph/tutorial/#define)

它将项目添加到我的时间轴，但我只能通过转到活动日志来查看它，一旦我将鼠标悬停在最右侧的按钮上，它的默认选择是在时间轴上允许，一旦我单击在时间轴上显示，它就会出现。

有没有办法默认在某人的时间轴上发布的应用程序默认出现（显示在时间轴上）？

我正在使用阅读文章的 facebook 应用程序的网站是[这个](http://www.fresherpoint.com)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-27T15:54:45.213

我今天刚刚在 Facebook 的开发者小组上问了同样的问题。我收到了一位 Facebook 开发人员的回复，他说您不能将时间线帖子强制设置为“在时间线上显示”。发布将默认为“在时间轴上允许”。显然，为了增加您的故事出现在时间轴上的机会，您需要发布用户希望在他们的时间轴上看到的内容！

有关实际响应，请参阅[此屏幕截图](http://i60.tinypic.com/1e8m5c.png "脸书回应")。

更新：我发现将“fb:explicitly_shared”属性设置为 true 会强制它出现在时间轴上，尽管帖子仍设置为“时间轴上允许”而不是“时间轴上显示”。我正在使用 Facebook c# NuGet 包，以下代码对我有用......

FacebookClient fb = new FacebookClient();

var postInfo = new Dictionary();

postInfo.Add("vip_bar",@" [http://samples.ogp.me/252865028170797](http://samples.ogp.me/252865028170797) ");

postInfo.Add("title", "VIP 酒吧");

postInfo.Add("og:title", "贵宾酒吧");

postInfo.Add("og:description", "看看我在酒吧里没腿！");

postInfo.Add("fb:explicitly_shared", "true");

fb.PostTaskAsync(, (object)postInfo);

# maven-3 - Tomcat + CDI + Arquillian

> ID：12334820
> 
> 赞同：6
> 
> 时间：2012-09-08T21:58:53.437
> 
> 标签：maven-3, tomcat7, cdi, jboss-arquillian

我将 Tomcat 7 与 CDI 一起使用，为此我使用来自[Knappsack Maven Archetypes](http://www.andygibson.net/blog/projects/knappsack/)的 jee6-servlet-minimal-archetype作为起点。

现在我想用 Arquillian 来测试 CDI bean，但是即使搜索了很长时间，我也只发现了一些与该主题相关的问题。

有人可以指出我`pom.xml`在 Tomcat 7 上使用 Arquillian 进行 CDI 测试的工作设置（尤其是使用权）吗？

* * *

**2012 年 9 月 11 日编辑：** 正如下面评论中指出的，我认为要解决我的问题，我需要有人帮助我理解整个设置，而不是试图在某个时候解决特定的异常。

那么，pom.xml 和测试类必须是什么样子才能在 tomcat 7 中拥有一个 CDI bean 并能够使用嵌入式和托管容器中的所有注入机制对其进行测试？（顺便说一句，为什么不再像 6 一样没有用于 tomcat 7 的远程容器适配器？）

我已经尝试调整[tomcat 6 示例](https://community.jboss.org/wiki/Tomcat6EmbeddedAndRemote)，但无法使其在 tomcat 7 上运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T08:46:41.897

不幸的是，我还没有找到或被告知我的问题的工作示例，但能够提出对我有用的东西，我想在这里展示 - 也许它可以帮助某人，因为我认为问题不是异国情调的，也许有人可以查看它并给我一个提示，以防万一有所不同。

**`/pom.xml`**（可在带有 tomcat 7 [7.0.30] 的 eclipse [3.7] 中使用，确保项目属性/部署程序集不包含测试类/资源）：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.mycompany</groupId>
    <artifactId>cditomcat</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>
    <name>cditomcat</name>
    <description>This pom is the base for a project using JSF2+CDI on a tomcat 7 and Arquillian for tests.</description>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <!-- Java EE Dependencies -->
        <dependency>
            <groupId>com.sun.xml.ws</groupId>
            <artifactId>jaxws-rt</artifactId>
            <version>2.2.7</version>
        </dependency>

        <dependency>
            <groupId>javax.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.0</version>
            <scope>compile</scope>
        </dependency>

        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.0.2-b10</version>
            <scope>compile</scope>
        </dependency>

        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
            <scope>compile</scope>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.0.0.GA</version>
            <scope>compile</scope>
        </dependency>

        <dependency>
            <groupId>org.jboss.weld.servlet</groupId>
            <artifactId>weld-servlet</artifactId>
            <version>1.1.4.Final</version>
        </dependency>

        <!-- Test dependencies -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.jboss.arquillian.junit</groupId>
            <artifactId>arquillian-junit-container</artifactId>
            <version>1.0.0.CR5</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.jboss.shrinkwrap.container</groupId>
            <artifactId>shrinkwrap-container-tomcat-60</artifactId>
            <version>1.0.0-beta-1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.jboss.shrinkwrap</groupId>
            <artifactId>shrinkwrap-api</artifactId>
            <version>1.0.0-cr-1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.jboss.shrinkwrap</groupId>
            <artifactId>shrinkwrap-spi</artifactId>
            <version>1.0.0-cr-1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.jboss.shrinkwrap.descriptors</groupId>
            <artifactId>shrinkwrap-descriptors-api</artifactId>
            <version>1.1.0-beta-1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.jboss.shrinkwrap.descriptors</groupId>
            <artifactId>shrinkwrap-descriptors-impl</artifactId>
            <version>1.1.0-beta-1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.7.0</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <finalName>cditomcat</finalName>
        <testSourceDirectory>src/test/java</testSourceDirectory>

        <plugins>
            <!-- Facilitates downloading source and javadoc in Eclipse -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.8</version>
                <configuration>
                    <wtpversion>2.0</wtpversion>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                </configuration>
            </plugin>

            <!-- Ensures we are compiling at 1.6 level -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>

            <!-- Tomcat plugin for embedded tomcat -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>tomcat-maven-plugin</artifactId>
                <version>1.1</version>
                <configuration>
                    <path>/${project.build.finalName}</path>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <profiles>
        <profile>
            <id>tc7-embedded</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>

            <build>
                <testResources>
                    <testResource>
                        <directory>src/test/resources</directory>
                    </testResource>
                    <testResource>
                        <directory>src/test/resources/embedded</directory>
                    </testResource>
                </testResources>
            </build>

            <dependencies>
                <dependency>
                    <groupId>org.jboss.arquillian.container</groupId>
                    <artifactId>arquillian-tomcat-embedded-7</artifactId>
                    <version>1.0.0.CR3</version>
                    <scope>test</scope>
                </dependency>

                <dependency>
                    <groupId>org.apache.tomcat.embed</groupId>
                    <artifactId>tomcat-embed-core</artifactId>
                    <version>7.0.19</version>
                    <scope>provided</scope>
                </dependency>

                <dependency>
                    <groupId>org.apache.tomcat.embed</groupId>
                    <artifactId>tomcat-embed-jasper</artifactId>
                    <version>7.0.19</version>
                    <scope>provided</scope>
                </dependency>

                <dependency>
                    <groupId>org.eclipse.jdt.core.compiler</groupId>
                    <artifactId>ecj</artifactId>
                    <version>3.7</version>
                    <scope>test</scope>
                </dependency>

                <!-- Provided scoped dependencies for embedded container -->
                <dependency>
                    <groupId>org.apache.tomcat</groupId>
                    <artifactId>tomcat-catalina</artifactId>
                    <version>7.0.29</version>
                    <scope>provided</scope>
                </dependency>

                <dependency>
                    <groupId>org.apache.tomcat</groupId>
                    <artifactId>tomcat-coyote</artifactId>
                    <version>7.0.29</version>
                    <scope>provided</scope>
                </dependency>

                <dependency>
                    <groupId>org.apache.tomcat</groupId>
                    <artifactId>tomcat-jasper</artifactId>
                    <version>7.0.29</version>
                    <scope>provided</scope>
                </dependency>

                <dependency>
                    <groupId>javax.servlet</groupId>
                    <artifactId>servlet-api</artifactId>
                    <version>2.5</version>
                    <scope>provided</scope>
                </dependency>

                <dependency>
                    <groupId>org.jboss.arquillian.container</groupId>
                    <artifactId>arquillian-container-test-spi</artifactId>
                    <version>1.0.2.Final</version>
                    <scope>test</scope>
                </dependency>

                <dependency>
                    <groupId>org.jboss.arquillian.container</groupId>
                    <artifactId>arquillian-container-spi</artifactId>
                    <version>1.0.0.CR5</version>
                    <scope>test</scope>
                </dependency>
            </dependencies>
        </profile>

        <profile>
            <id>tc7-managed</id>
            <build>
                <testResources>
                    <testResource>
                        <directory>src/test/resources</directory>
                    </testResource>
                    <testResource>
                        <directory>src/test/resources/managed</directory>
                    </testResource>
                </testResources>
            </build>

            <dependencies>
                <dependency>
                    <groupId>org.jboss.arquillian.container</groupId>
                    <artifactId>arquillian-tomcat-managed-7</artifactId>
                    <version>1.0.0.CR3</version>
                    <scope>test</scope>
                </dependency>

                <!-- Provided scoped dependencies for embedded container -->
                <dependency>
                    <groupId>org.apache.tomcat</groupId>
                    <artifactId>tomcat-catalina</artifactId>
                    <version>7.0.29</version>
                    <scope>provided</scope>
                </dependency>

                <dependency>
                    <groupId>org.apache.tomcat</groupId>
                    <artifactId>tomcat-coyote</artifactId>
                    <version>7.0.29</version>
                    <scope>provided</scope>
                </dependency>

                <dependency>
                    <groupId>org.apache.tomcat</groupId>
                    <artifactId>tomcat-jasper</artifactId>
                    <version>7.0.29</version>
                    <scope>provided</scope>
                </dependency>

                <dependency>
                    <groupId>javax.servlet</groupId>
                    <artifactId>servlet-api</artifactId>
                    <version>2.5</version>
                    <scope>provided</scope>
                </dependency>

                <dependency>
                    <groupId>org.jboss.arquillian.container</groupId>
                    <artifactId>arquillian-container-test-spi</artifactId>
                    <version>1.0.2.Final</version>
                    <scope>test</scope>
                </dependency>

                <dependency>
                    <groupId>org.jboss.arquillian.container</groupId>
                    <artifactId>arquillian-container-spi</artifactId>
                    <version>1.0.0.CR5</version>
                    <scope>test</scope>
                </dependency>
            </dependencies>
        </profile>
    </profiles>
</project> 
```

**`/src/main/webapp/WEB-INF/web.xml`**（我仍然使用 2.5 版）：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    version="2.5">
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>
    <context-param>
        <param-name>facelets.DEVELOPMENT</param-name>
        <param-value>true</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <listener>
        <listener-class>org.jboss.weld.environment.servlet.Listener</listener-class>
    </listener>
    <resource-env-ref>
        <description>Object factory for the CDI Bean Manager</description>
        <resource-env-ref-name>BeanManager</resource-env-ref-name>
        <resource-env-ref-type>javax.enterprise.inject.spi.BeanManager</resource-env-ref-type>
    </resource-env-ref>

</web-app> 
```

**`/src/main/webapp/META-INF/context.xml`**（未使用 Servlet、Listeners、Filters 中的注入）：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context>
    <!-- disable storage of sessions across restarts -->
    <Manager pathname=""/>
    <Resource name="BeanManager" auth="Container" type="javax.enterprise.inject.spi.BeanManager" factory="org.jboss.weld.resources.ManagerObjectFactory"/>
</Context> 
```

**`/src/main/resources/META-INF/beans.xml`** **`/src/test/resources/in-container-beans.xml`** （空标记文件同样适用于应用和测试）：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
      http://java.sun.com/xml/ns/javaee 
      http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">
</beans> 
```

**`/src/test/resources/in-container-web.xml`**（嵌入式和托管相同）：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    version="2.5">

    <env-entry>
        <env-entry-name>name</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
        <env-entry-value>Tomcat</env-entry-value>
    </env-entry>

    <listener>
        <listener-class>org.jboss.weld.environment.servlet.Listener</listener-class>
    </listener>

    <resource-env-ref>
        <resource-env-ref-name>BeanManager</resource-env-ref-name>
        <resource-env-ref-type>javax.enterprise.inject.spi.BeanManager</resource-env-ref-type>
    </resource-env-ref>
</web-app> 
```

**`/src/test/resources/in-container-context.xml`**（嵌入式和托管相同）：

```
<Context>
    <Resource name="BeanManager" auth="Container"
        type="javax.enterprise.inject.spi.BeanManager" factory="org.jboss.weld.resources.ManagerObjectFactory" />
</Context> 
```

**`/src/test/resources/embedded/arquillian.xml`**（此文件仅用于嵌入）：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<arquillian xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://jboss.org/schema/arquillian"
    xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">

    <engine>
        <property name="deploymentExportPath">target</property>
    </engine>
    <container qualifier="tomcat" default="true">
        <configuration>
            <property name="tomcatHome">target/tomcat-embedded-7</property>
            <property name="workDir">work</property>
            <property name="appBase">webapps</property>
            <property name="bindHttpPort">8889</property>
            <property name="unpackArchive">true</property>
        </configuration>
    </container>
</arquillian> 
```

**`/src/test/resources/managed/arquillian.xml`**（此文件仅用于托管）：

```
<?xml version="1.0"?>
<arquillian
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://jboss.org/schema/arquillian"
        xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">

    <container qualifier="tomcat" default="true">
        <configuration>
            <property name="jmxPort">8099</property>
            <property name="host">localhost</property>
            <property name="port">8080</property>
            <property name="user">tomcat</property>
            <property name="pass">manager</property>
        </configuration>
    </container>
</arquillian> 
```

为了使托管容器部署工作，**`tomcat-users.xml`**必须扩展 tomcat 的文件以启用管理器，例如：

```
...
<role rolename="manager-gui" />
    <role rolename="manager-jmx" />
    <role rolename="manager-script" />
    <user username="tomcat" password="manager"
        roles="manager-gui,manager-jmx, manager-script" />
... 
```

最后，每个**`arquillian test class`**必须有如下部署方法（我使用的是Servlet 2.5）：

```
...
    @Deployment
    @OverProtocol("Servlet 2.5")
    public static WebArchive createDeployment() {
        return ShrinkWrap
                .create(WebArchive.class, "test.war")
                .addClass(MyTest.class)
                .addAsLibrary(
                        MavenArtifactResolver
                                .resolve("org.jboss.weld.servlet:weld-servlet:1.1.4.Final"))
                .addAsWebInfResource("in-container-beans.xml", "beans.xml")
                .addAsManifestResource("in-container-context.xml",
                        "context.xml").setWebXML("in-container-web.xml");
    }
... 
```

Weld 必须被打包，在我的例子中，它是从本地 maven 存储库中获取的，正如在问题的引用示例（编辑部分）中通过以下代码完成的那样：

```
public class MavenArtifactResolver {
    private static final String LOCAL_MAVEN_REPO =
            System.getProperty("user.home") + File.separatorChar +
                    ".m2" + File.separatorChar + "repository";

    public static File resolve(String groupId, String artifactId, String version) {
        return new File(LOCAL_MAVEN_REPO + File.separatorChar +
                groupId.replace(".", File.separator) + File.separatorChar +
                artifactId + File.separatorChar +
                version + File.separatorChar +
                artifactId + "-" + version + ".jar");
    }

    public static File resolve(String qualifiedArtifactId) {
        String[] segments = qualifiedArtifactId.split(":");
        return resolve(segments[0], segments[1], segments[2]);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T23:09:33.940

这是适用于 Tomcat 7 (TomEE) 的 Java EE 认证版本的设置。它包括 CDI 和一些可用的 Arquillian 适配器：

*   [http://tomee.apache.org/arquillian.html](http://tomee.apache.org/arquillian.html)

请注意，该页面提到使用属性来获取用于向 Tomcat 发送请求的正确端口。忽略那个。正确的方法是在您的测试用例中这样的字段：

```
@ArquillianResource
private URL url; 
```

这将是您的 web 应用程序、端口和所有内容的基本 URL。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T21:51:09.793

您可以查看Arquillian 的 Tomcat-7 托管容器的[POM](https://github.com/arquillian/arquillian-container-tomcat/blob/master/pom.xml#L70)，它添加了 Weld-Servlet 作为测试依赖项。

Weld JAR通过 ShrinkWrap Maven Dependency Resolver加载到[`@Deployment`测试类中定义的 Arquillian。](https://github.com/arquillian/arquillian-container-tomcat/blob/master/tomcat-managed-7/src/test/java/org/jboss/arquillian/container/tomcat/managed_7/TomcatManagedInContainerTestCase.java#L63)您还需要`beans.xml`在部署中包含一个空文件。注意 - 虽然没有将 CDI bean 注入到测试类中，但 Weld 用于注入`@Resource`.

# linq - LINQ Lambda 编写查询的顺序

> ID：12334822
> 
> 赞同：2
> 
> 时间：2012-09-08T21:59:22.110
> 
> 标签：linq

我有以下查询：

```
 var query = db.Prog
       .Where (a => a.Prog != "00000" && a.fn != "Koll")
       .Select(a => new  {a.Prog, a.MEfn})
       .OrderByDescending(a => a.MEfn) 
```

该查询工作正常，但想知道您编写 Lambda linq 查询的顺序是否有一般规则。含义，.Where 出现在 .Select 之前，等等。

有人可以告诉我需要编写 LINQ 的顺序或最佳实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:08:15.453

你的订单可能很好。

让我们区分 db 指向具有非常好的 LINQ 提供程序的 SQL DB 的情况，以及 db 是内存中对象的情况。估计是第一个

如果您使用 LINQ to SQL 提供程序，则仅当您将查询具体化为对象时才会评估语句，因此 SQL 优化器（在 DB 内部）将负责语句的排序。

当您的语句针对内存中的集合或来自 LINQ to SQL 的具体化集合运行时，反之亦然。在这种情况下，它们是按顺序执行的，因此您希望首先执行那些减少集合中结果数量的语句。`Where`是最佳人选！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T22:09:53.957

编写 LINQ 查询的顺序没有最佳实践，这取决于您是要先进行过滤还是要进行投影。例如，在您的情况下，您将投影到不包含过滤器使用的“fn”属性的匿名类型，因此如果您的选择是第一个，它将无法在 where 子句中使用。

更好的做法是为您的属性提供不那么神秘的名称。此外，'fn' 不遵循属性名称的 PascalCase，如果它是一个字段，那么它可能不应该是公共的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T22:07:16.593

它们应该处于的顺序完全取决于您正在执行的操作的上下文。因此，如果您的 OrderBy 只是将数据格式化为便于查看，请在修剪集合后将其放在末尾，如果您正在寻找已排序集合的 First 值，那么您可能需要在集合迭代之前使用它获得第一。

# ruby - 根据参数 ruby 对哈希进行分组

> ID：12334828
> 
> 赞同：-1
> 
> 时间：2012-09-08T22:00:24.790
> 
> 标签：ruby, arrays, hash

所以我有以下

```
[{:item=>"x"}, {:item2=>"x"}, {:item3=>"x"}, {:item=>"x"},{:item3=>"x"}] 
```

我想把这个分成几组，

所以每个组从 item 开始并在 item3 结束，item2 可能会丢失

理想情况下我想要

```
{:item=>"x",:item2=>"x",:item3=>"x"} & {:item=>"x",:item3=>"x"} 
```

所以在一个真实的例子中：

需要发布 3 个项目，但我从 Excel 电子表格中获取了一个数组

```
name: blah
id: blah
color: blah

name: blah
date: blah
size: blah

name: blah
id: blah
date: blah
color: blah
size: blah 
```

我需要发布每条记录，因为我有一个像上面这样的数组，有没有办法在给定的哈希元素键字段上对数组进行分组/拆分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:42:03.370

如果您的数据确实由双换行符分隔，您应该先按段落，然后按行，然后按冒号来利用。那么你就不用担心数据丢失了，可以盲目的填写key/value对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T22:30:34.213

一种功能方法，获取 s 所在的索引并在那里`:item`拆分：

```
hs = [{:item=>"x"}, {:item2=>"x"}, {:item3=>"x"}, {:item=>"x"},{:item3=>"x"}]
indexes = hs.map.with_index { |h, i| i if h.first[0] == :item }.compact
(indexes + [hs.size]).each_cons(2).map { |from, to| hs[from...to].reduce(:merge) }
#=> [{:item=>"x", :item2=>"x", :item3=>"x"}, {:item=>"x", :item3=>"x"}] 
```

如果您更喜欢声明性的方法（我愿意），请向您的扩展库添加一些抽象，以便您可以编写：

```
indexes = hashes.find_indexes { |h| h.first[0] == :item }
hashes.split_at(*indexes.drop(1)).map { |hs| hs.reduce(:merge) } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T22:39:21.873

试试这个

```
input = [{:item=>"x"}, {:item2=>"x"}, {:item3=>"x"}, {:item=>"x"},{:item3=>"x"}]

res = []
input.each do |element|
  if element.keys.first == :item
    res << element
  else
    res.last.merge! element
  end
end

puts puts res.inspect # => [{:item=>"x", :item2=>"x", :item3=>"x"}, {:item=>"x", :item3=>"x"}] 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-08T22:39:47.003

Ruby 的纯真性：

```
arr = [{:item=>"x"}, {:item2=>"x"}, {:item3=>"x"}, {:item=>"x"}, {:item3=>"x"}]
arr.each_slice(3).map { |a| a.inject(&:merge) }
=> [{:item=>"x", :item2=>"x", :item3=>"x"}, {:item=>"x", :item3=>"x"}] 
```

# visual-studio-debugging - 调试时预构建事件命令行不起作用

> ID：12334829
> 
> 赞同：0
> 
> 时间：2012-09-08T22:00:40.567
> 
> 标签：visual-studio-debugging, visual-web-developer-2010

在构建我的解决方案时，我已经指定了一些要运行的 xcopy 操作。当我构建我的解决方案时，这很好用。但是当我通过按 F5 来调试我的解决方案时，不会执行预构建的东西。

我正在使用 Visual Web Developer 2010 Express。

任何想法为什么？

谢谢

托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:10:17.247

如果我先清理解决方案，然后立即进行调试，它似乎可以工作

# azure - 检测和删除 Azure 服务总线上的孤立队列、主题或订阅

> ID：12334838
> 
> 赞同：5
> 
> 时间：2012-09-08T22:03:09.860
> 
> 标签：azure, appfabric, servicebus, azure-appfabric

如果由于崩溃或其他异常终止（实例重启等）而不再有任何发布者或订阅者读取或写入队列、主题或订阅，那么该队列/主题/订阅是否有效地孤立了？

我通过创建几个队列来测试这一点，然后终止应用程序。很长一段时间后，这些队列仍在服务总线上。似乎他们将永远呆在那里。如果我们想要这种行为，那就太好了，但在这种情况下，我们不需要。

我们如何检测和删除这些队列、主题和订阅？它们将计入 Azure 限制等，并且每次实例重新启动/修补/崩溃时，我们都不能拥有这些孤立进程。

***如果它有助于使问题更清晰，这是一种独特的情况，其中队列/主题/订阅具有特殊的名称或特殊的过滤器，以及在有限时间内非常有限的一组发布者 (1) 和订阅者 (1)。这不是我们想要生存能力的情况。这些是特定于实例的响应渠道。我们是使用队列还是订阅并不重要。如果实例消失了，那么对该队列（或订阅）的需求也会消失。***

这是解决方案的一部分，其中每个 Web 角色都有一个它监控的专用响应通道。在任何时候，这个 Web 角色都可能有几十个通过其他消息传递通道（队列/主题）待处理的请求，并且它正在多个线程上等待答案。我们需要将响应返回到放置消息的线程，以便 Web 角色可以响应调用者。在这种情况下，简单地拥有基于机器的订阅是没有好处的，因为它将接收其他线程的消息。我们需要每个发布线程建立一个专用的响应通道，这样通道上唯一的东西就是该线程的响应。

即使我们使用 Subscriptions（带有某种与实例相关的过滤器）对 Subscription 进行长轮询接收操作，如果 Web 角色实例死亡，该 Subscription 也会成为孤儿，对吗？

这个问题可以归结为：如果队列/主题/订阅不再有发布者或订阅者，那么该服务实际上是孤立的。如何检测和清理这些孤儿？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:55:07.997

在这种情况下，您正在寻找队列/订阅本质上是“动态的”。它们将根据使用情况创建和删除，而不是这些实体的当前显式供应模型。服务总线为您提供了执行创建/删除操作的 API，因此您可以将这些适当地插入角色 OnStart/OnStop 事件。如果这些操作由于某种原因失败，那么孤立实体将存在。同样，您可以根据实体名称的某些唯一标识符对它们运行清理操作。这方面的一个例子可以在这里看到：http: [//windowsazurecat.com/2011/08/how-to-simplify-scale-inter-role-communication-using-windows-azure-service-bus/](http://windowsazurecat.com/2011/08/how-to-simplify-scale-inter-role-communication-using-windows-azure-service-bus/)

在不久的将来，我们将向 Queues/Topics/Subscriptions 添加更多元数据和查询功能，以便您可以查看上次访问它们的时间并做出清理决策。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T01:00:34.560

服务总线队列是使用“代理消息传递”基础架构构建的，该基础架构旨在集成可能跨越多个通信协议、数据合同、信任域和/或网络环境的应用程序或应用程序组件。这允许一种机制与持久消息传递进行可靠通信。

如果客户端（发布者）将消息发送到服务总线队列然后崩溃，则消息将存储在队列中，直到消费者从队列中读取消息。此外，如果您的消费者死亡并重新启动，它只会轮询队列并获取任何等待它的工作（您可以横向扩展并让多个消费者从队列中读取以增加吞吐量），服务总线队列允许您通过以下方式解耦您的应用程序类似于本地 MSMQ（或其他排队技术）的持久云网关。

我真正想说的是，您不会得到孤立的队列，您可能会收到需要处理的中毒消息，这篇博文提供了一些非常详细的信息：服务总线队列及其容量和配额可能会让您更好地理解[http://msdn.microsoft.com/en-us/library/windowsazure/hh767287.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh767287.aspx)

回复：队列管理，您可以通过 Visual Studio（1.7 SDK 和工具）执行此操作，或者有一个名为 Service Bus Explorer 的出色工具，可以让您更轻松地进行队列管理：http: [//code.msdn.microsoft.com/ windowsazure/Service-Bus-Explorer-f2abca5a](http://code.msdn.microsoft.com/windowsazure/Service-Bus-Explorer-f2abca5a)

*请注意，默认的最大队列数为 10,000（每个服务命名空间，可以通过支持电话增加）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T22:26:41.800

正如 Abhishek Lai 提到的，不支持孤儿检测功能。

孤儿检测可以通过多种方式在外部实现。例如，每当您发送/接收消息时，更新 SQL 数据库中的时间戳以指示队列/热带/订阅仍处于活动状态。然后可以使用此时间戳来确定孤儿。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T01:13:18.513

如果您的进程很可能会崩溃，那么队列中的消息传递将会出现问题，但是队列仍可用于处理您的请求。[此处](https://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-queues/#handle-crashes)描述了使用 Windows Azure 服务总线队列处理应用程序崩溃和不可读消息：

服务总线提供的功能可帮助您从应用程序中的错误或处理消息的困难中正常恢复。如果接收方应用程序由于某种原因无法处理消息，那么它可以对收到的消息调用 Abandon 方法（而不是 Complete 方法）。这将导致服务总线解锁队列中的消息，并使其可以再次被同一个消费应用程序或另一个消费应用程序接收。

如果应用程序在处理完消息后但在发出 Complete 请求之前崩溃，则消息将在应用程序重新启动时重新传递给应用程序。这通常称为至少一次处理，即每条消息将至少处理一次，但在某些情况下可能会重新传递相同的消息。如果场景不能容忍重复处理，那么应用程序开发人员应该向他们的应用程序添加额外的逻辑来处理重复的消息传递。这通常使用消息的 MessageId 属性来实现，该属性将在传递尝试中保持不变。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-09T20:14:13.870

> 如果由于崩溃或其他异常终止（实例重启等）不再有任何进程读取或写入队列，那么该队列是否有效地孤立了？

没有队列允许通过代理消息进行通信，如果您的所有应用程序由于某种原因死亡，那么队列仍然存在并且当它们再次活跃时将在那里，它是松散解耦应用程序的通信通道。关于计费 “消息根据在计费月份发送到服务总线或由服务总线传递的消息数量收费”，如果存在队列但没有人使用它，则不会向您收费。

> 我通过创建几个队列然后终止应用程序对此进行了测试。很长一段时间后，这些队列仍在机器上。

队列的全部意义在于保证松散解耦的应用程序的消息传递。将队列想象成一个实体或应用程序，它本身具有高可用性 (SLA)，因为它托管在 Azure 中，您的生产者/消费者可能会死亡/重新启动，并且队列将在 Azure 中处于活动状态。*注意我对你的措辞有点困惑：“很久以后仍然在机器上”，队列实际上并不存在于你的机器上，它位于 Azure 中指定的服务总线命名空间中。您可以通过我在上一个答案中指出的工具查看和管理队列。

> 我们如何检测和删除这些队列，因为它们将计入 Azure 限制等。

如上所述，默认的最大队列数为 10,000（每个服务命名空间，这可以通过支持呼叫增加），队列管理可以通过另一个答案中所述的工具来完成。只有当您不再有生产者/消费者希望写入队列时（即再也不会），您才应该考虑删除队列。您当然可以通过 namespaceManager.QueueExists 在您的生产者/消费者应用程序中创建和删除队列，更多信息在这里[如何使用服务总线队列](https://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-queues/#create-queue)

> 如果它有助于使问题更清楚，这是一种独特的情况，其中队列具有特殊名称，并且在有限的时间内，发布者 (1) 和订阅者 (1) 的集合非常有限。

听起来您需要使用主题和订阅[如何使用服务总线主题/订阅](https://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-topics/)，此链接还有一个关于“如何删除主题和订阅”的部分如果您的生命周期非常有限，那么您可以在你的应用程序，否则你可以有一个单独的队列/主题/订阅设置/删除脚本来处理这个逻辑......

# sql - 使用证书和对称密钥加密 SQL Server 数据

> ID：12334841
> 
> 赞同：4
> 
> 时间：2012-09-08T22:03:28.720
> 
> 标签：sql, encryption

我正在尝试使用证书和对称密钥加密数据库列。

我使用以下方法成功创建了证书和对称密钥：

```
CREATE CERTIFICATE MyCertificate
    ENCRYPTION BY PASSWORD = 'password'
    WITH SUBJECT = 'Public Access Data'
GO

CREATE SYMMETRIC KEY MySSNKey
    WITH ALGORITHM = AES_256
    ENCRYPTION BY CERTIFICATE MyCertificate 
```

我尝试使用以下方法加密和解密一些数据：

```
DECLARE @Text VARCHAR(100)
SET @Text = 'Some Text'

DECLARE @EncryptedText VARBINARY(128)

-- Open the symmetric key with which to encrypt the data.
OPEN SYMMETRIC KEY MySSNKey
   DECRYPTION BY CERTIFICATE MyCertificate;

SELECT @EncryptedText = EncryptByKey(Key_GUID('MySSNKey'), @Text)

SELECT CONVERT(VARCHAR(100), DecryptByKey(@EncryptedText)) AS DecryptedText 
```

当我这样做时，我收到以下错误消息：

> 证书有一个受用户定义密码保护的私钥。需要提供该密码才能使用私钥。

最终，我要做的是编写一个存储过程，它将一些未加密的数据作为输入，对其进行加密，然后将其存储为加密的 varbinary。然后我想编写第二个存储过程，它会做相反的事情 - 即解密加密的 varbinary 并将其转换回人类可读的数据类型。我宁愿不必直接在存储过程中指定密码。有没有办法做到这一点？我在上面的代码中做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T03:41:11.720

你只需要使用：

```
OPEN SYMMETRIC KEY MySSNKey
   DECRYPTION BY CERTIFICATE MyCertificate WITH PASSWORD = 'password'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-13T09:17:29.160

你需要使用 MASTER KEY

例子：

```
CREATE MASTER KEY ENCRYPTION BY PASSWORD = 'MasterPassword';
CREATE CERTIFICATE MyCertificate WITH SUBJECT = 'Public Access Data';
CREATE SYMMETRIC KEY MySSNKey   WITH ALGORITHM = AES_256   ENCRYPTION BY CERTIFICATE MyCertificate;

OPEN SYMMETRIC KEY MySSNKey DECRYPTION BY CERTIFICATE MyCertificate;
SELECT Customer_id, Credit_card_number_encrypt AS 'Encrypted Credit Card Number',
CONVERT(varchar, DecryptByKey(Credit_card_number_encrypt)) AS 'Decrypted Credit Card Number'
FROM dbo.Customer_data;
CLOSE SYMMETRIC KEY MySSNKey ; 
```

# rake - 使用 rake 构建 ember.js

> ID：12334848
> 
> 赞同：0
> 
> 时间：2012-09-08T22:04:27.333
> 
> 标签：rake, ember.js

我正在尝试学习 ember，所以我创建了一个从 github 克隆的本地 git 存储库，这样我就可以及时了解它。我以前从未使用过 rake，所以我也从[http://rake.rubyforge.org/](http://rake.rubyforge.org/)下载并安装了它。Rake 似乎安装正确，当我运行 rake --help 时，我得到了帮助选项，所以我认为一切正常。所以然后在我的命令提示符下，我对包含 ember 的 github 文件的目录做了一张 CD。根据我的阅读，由于 ember 目录中有一个 Rakefile，听起来我可以直接 CD 到该目录并运行 rake。但是当我这样做时，我会收到以下错误。我很抱歉，但我没有使用 rake 的经验，所以我不确定我做错了什么......或者它是否在构建文件中？

```
c:\inetpub\wwwroot\dev\js\ember.js>rake
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rake/rake_module.rb:25: warning: redundant nested repeat operator
c:/inetpub/wwwroot/dev/js/ember.js/Rakefile:485: warning: ambiguous first argument; put parentheses or even spaces
c:/inetpub/wwwroot/dev/js/ember.js/Rakefile:487: warning: ambiguous first argument; put parentheses or even spaces
rake aborted!
cannot load such file -- bundler/setup
c:/inetpub/wwwroot/dev/js/ember.js/Rakefile:3:in `<top (required)>' (See full trace by running task with --trace)

c:\inetpub\wwwroot\dev\js\ember.js> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:59:57.280

您需要安装 bundler（这样您就可以获得 ember 的 rake 任务所依赖的所有 gem）。

```
gem install bundler 
```

然后，在您的 ember 目录中：

```
bundle install
rake -T 
```

# html - 非常简单的 html/css 居中问题

> ID：12334850
> 
> 赞同：0
> 
> 时间：2012-09-08T22:04:40.297
> 
> 标签：html, center

我只花了大约一个小时做一件非常非常简单的事情。我很久以前就使用 HTML 和 CSS，但从那以后就忘记了如何使用它。我需要做的是将包含媒体播放器的 div 居中。

感谢所有反馈。提前致谢。

这是我的代码：

```
<!DOCTYPE html PUBLIC>
<html>
    <head>
        <style type="text/css">
            h1 {
                text-align:center;
            }
            #vid {

            }
        </style>
        <body>
            <h1>Pysch Season 6 Episode 1</h1>
            <h1>Shawn Rescues Darth Vader</h1>
            <div id="vid">
                <OBJECT id="vid" CLASSID="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" 
                    CODEBASE="http://www.apple.com/qtactivex/qtplugin.cab" WIDTH="700" HEIGHT="500" >
                    <PARAM NAME="src" VALUE="lol.mp4" >
                    <PARAM NAME="autoplay" VALUE="true" >
                    <EMBED SRC="lol.mp4" TYPE="image/x-macpaint" 
                    PLUGINSPAGE="http://www.apple.com/quicktime/download" WIDTH="700" HEIGHT="500" AUTOPLAY="true"></EMBED>
                </OBJECT>
            </div>
        </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T22:06:24.190

```
#vid {
    width: 700px;
    margin: 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T22:10:36.717

您可以将显示设置为阻止，然后将左右边距设置为自动。

```
#vid
{
    Display: block;
    Margin-right: auto;
    Margin-left: auto;
} 
```

# batch-file - 批处理文件中 robocopy 的标准输出和错误输出

> ID：12334853
> 
> 赞同：4
> 
> 时间：2012-09-08T22:05:08.283
> 
> 标签：batch-file, robocopy

我在批处理文件中使用**robocopy**来复制文件夹。我希望标准输出转到一个日志文件，而错误消息转到另一个日志文件。

我尝试了以下方法：

```
robocopy Z\BR  "C\WIN"  /E /LOG+:STANDART.LOG  2 /LOG+:ERROR.LOG 
```

但是“如果没有错误” *（不确定OP的意思）*并且标准输出将进入ERROR.LOG。谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T22:49:03.100

同时拥有标准日志和错误日志的问题的解决方案是创建一个临时日志，**然后**决定如何处理它。

我还发现 ROBOCOPY 和错误报告存在一些问题。

1) 如果您使用内置的`/log:file`or创建日志文件`/log+:file`，则并非所有错误都会出现在日志中。
2) 此外，并非所有错误都报告给`ERRORLEVEL`.
3) 最后，成功复制可能会报告为`ERRORLEVEL 1`.

为了解决这个问题，我使用 3 种方法来捕获所有错误。首先，我将 STDOUT 重定向到一个临时日志文件，然后检查该日志文件中的两个位置是否包含“ERROR”一词，第三个还检查 ERRORLEVEL。

部分问题是 ROBOCOPY 将两个**EOF**字符放在其日志文件的末尾。通常这不是问题，除非像我在这里一样尝试连接文件。当您通常连接文件时，最后一个字符（EOF 字符）将被覆盖。但是如果有两个 EOF 字符，则附加到文件的所有内容都会在此之后进行，因此当您以正常方式访问文件时，您看不到任何附加数据。

```
setlocal

set Source=<somedir>
set Dest=<someotherdir>
set Files=*.* or afile anotherfile yetathridfile
set Options=

set STDLog=STANDART.LOG
set ErrLog=ERROR.LOG
set TMPLog=TMP.LOG
set err=

:: If nessicary make 0 byte log files
if not exist %ErrLog% copy nul %ErrLog%
if not exist %STDLog% copy nul %STDLog%

:: Create a header in the temporary log file to make each entry more visable
echo.>%TMPLog%
echo ===============================================================================>> %TMPLog%
echo ===============================================================================>> %TMPLog%
echo.>> %TMPLog%
echo Started : %date:~-4%/%date:~4,5% %time%>> %TMPLog%

:: Record how ROBOCOPY was called
echo ROBOCOPY %source% %dest% %files% %options%>>%TMPLog%

:: Call ROBOCOPY and redirect STDOUT to %TMPLog%
ROBOCOPY %source% %dest% %files% %options%>>%TMPLog%

:: Depending on the error, it may be in the first or third token.
:: So we need to check both.
for /f "tokens=1,3" %%x in (%TMPLog%) do (
  if "%%x"=="ERROR" SET err=TRUE
  if "%%y"=="ERROR" SET err=TRUE
)

:: The error also MAY be reported via ERRORLEVEL
:: 0 = No error, all files skipped (because they are the same in both dirs)
:: 1 = No error, some or all files copied.
:: 2 = Destination DIR contains extra files the source does not.
set error=%errorlevel%
if %errorlevel% gtr 2 set err=TRUE

if "%err%"=="TRUE" (
  REM However we got the error, copy the temp log to the error log.
  REM Copy both files as ASCII. Otherwise you'll have trouble. (This caused me BIG headaches.)
  REM The command states that the two source files are ASCII and the destination is ASCII
  copy /a %ErrLog% + /a %TMPLog%=/a %ErrLog%
) else (
  REM If no errors, copy the temp log to the standard log.
  REM Copy both files as ASCII. Otherwise you'll have trouble. (This caused me BIG headaches.)
  copy /a %STDLog% + /a %TMPLog%=/a %STDLog%
)

:: Delete the temporary log file
del %TMPLog%

:: set the errorlevel to ROBOCOPY's errorlevel and reset all variables
endlocal & exit /b %error% 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T22:46:11.417

根据一些测试，ROBOCOPY 似乎不使用标准错误。似乎错误消息与所有其他输出一起发送到标准输出。所以我不认为你可以做你想做的事。

我通过故意发出错误的 ROBOCOPY 并将 stderr 重定向到 nul 进行了测试。错误仍然出现在屏幕上。

```
ROBOCOPY Let's generate an error :) 2>nul 
```

# facebook - 如何使用 FB Graph API 在公司页面上发布注释

> ID：12334854
> 
> 赞同：0
> 
> 时间：2012-09-08T22:05:12.137
> 
> 标签：facebook, graph

我的个人FB帐户在我们公司的FB页面上的“经理”的管理员角色。

我有一个具有正确权限的访问令牌，我可以使用该令牌使用 REST API 成功地将注释发布到公司页面。

但是，当我使用相同的访问令牌将注释发布到[https://graph.facebook.com/PROFILE_ID/notes](https://graph.facebook.com/PROFILE_ID/notes)（其中 PROFILE_ID 替换为我们公司页面的 ID 时，它会将注释发布到我的个人 FB 页面。

如何使用 Graph API 将注释发布到公司页面。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:24:14.210

POST 请求通常似乎发布到经过身份验证的用户的配置文件，不一定是提供了配置文件 ID 的用户 - 这很奇怪。

因此，您需要以页面身份进行身份验证，而不是以您自己身份进行身份验证。有关此的详细信息在这里： [https ://developers.facebook.com/docs/authentication/pages/](https://developers.facebook.com/docs/authentication/pages/)

本质上，您以自己的身份进行身份验证，检索您使用相关访问令牌管理的页面列表，然后您可以使用该列表发布注释。

为了其他用户的利益，该过程是：

首先，获取`create_post`权限，如 API 参考中所述，必须向其发出 POST 请求`https://graph.facebook.com/PAGE_ID/notes?message="MESSAGE_BODY_TEXT"&subject="NOTE_SUBJECT"`

# android - 如何将 id 添加到 public.xml？

> ID：12334857
> 
> 赞同：3
> 
> 时间：2012-09-08T22:05:27.907
> 
> 标签：android, android-layout, view, android-xml

在我的项目中，我需要为视图设置始终不变的 ID。我的意思是在不同的应用程序构建之间保持不变的 ID。经过一番调查，我发现它可以通过使用来实现，`values/public.xml`并且在该文件中声明的任何 id 在未来的构建中都不会改变。现在的问题是我无法在某些布局文件中定义视图的 ID。这是我的 layout.xml，其中包含一个带有 Id 的 ImageView，应将其添加到 public.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/menu_item_selector" >

<ImageView
    android:id="@+id/index_row_icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_marginLeft="@dimen/padding_small" />

<ImageView
    android:id="@+id/index_row_search"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:src="@drawable/index_row_search" />

<TextView
    android:id="@+id/index_row_caption"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_toLeftOf="@id/index_row_icon"
    android:layout_toRightOf="@id/index_row_search"
    android:gravity="right"
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

这是 public.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
        <public type="string" name="no_internet" id="0xAA0a0001" />
        <public type="id" name="index_row_search" id="0xAA0b0015" />
</resources> 
```

eclipse 在我添加了“index_row_search”的 id 的行上显示了一个错误，并说：

`error: Public symbol id/index_row_search declared here is not defined!`

但正如您在上面的布局文件中看到的，我有一个具有该 ID 的 ImageView。很奇怪上面一行的字符串id定义没有错误！

那么，我应该如何在 public.xml 中定义 View 的 Id 呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-09T08:13:31.333

在值中创建一个新的 xml ids.xml，其中所有 id 值都是不变的。

```
<resources>
  <item type="id" name="index_row_search" />
</resources> 
```

我认为最好将资源ID从R.java复制到public.xml，第一次避免**条目索引大于可用符号**等错误，并保持[资源类型](https://stackoverflow.com/a/6646113/1109425)一致。

# iphone - Jquery-mobile 弄乱了 iphone 浏览器和 UIWebView 上的 css 背景图片

> ID：12334858
> 
> 赞同：0
> 
> 时间：2012-09-08T22:05:48.237
> 
> 标签：iphone, ios, jquery-mobile, uiwebview

当我将 jquery-mobile javascript 添加到我的网站时，一些背景 css 图像无法加载，直到我转到另一个页面并返回主页。

```
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script> 
```

第二次我删除导入行，图像加载正常。可能是什么问题？

此问题仅出现在 ios safari 浏览器和 UIWebView 上。在 PC 浏览器中运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:14:31.433

似乎这是一个 jquery-mobile 错误。切换到最新的 beta 版本对我有用：

```
<script src="http://code.jquery.com/mobile/1.2.0-beta.1/jquery.mobile-1.2.0-beta.1.min.js"></script> 
```

# perl - 存储时间序列数据，无需数据库

> ID：12334859
> 
> 赞同：2
> 
> 时间：2012-09-08T22:05:50.140
> 
> 标签：perl, datetime, time-series

我想存储时间序列数据，例如超过 6 个月的 CPU 使用率（将每 2 分钟轮询一次 CPU 使用率，因此稍后我可以获得多个分辨率，例如 - 1 周，1 个月，甚至更高的分辨率，5 分钟，ETC）。

我正在使用 Perl，我不想使用 RRDtool 或关系数据库，我正在考虑使用某种具有以下属性的循环缓冲区（环形缓冲区）来实现我自己的：

1.  6 个月 = 186 天 = 4,464 小时 = 267,840 分钟。
2.  将其分为 2 分钟部分：267,840 / 2 = 133,920。
3.  133,920 是环形缓冲区大小。
4.  环形缓冲区中的每个元素都将是一个 hashref，其键为纪元（使用 轻松转换为日期时间`localtime`），值是该给定时间的 CPU 使用率。
5.  我将序列化这个环形缓冲区（`Storable`我猜使用）

还有其他建议吗？谢谢，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T22:18:55.893

我怀疑你多虑了。为什么不使用每个时间间隔一行的平面（例如）制表符分隔文件，每行包含时间戳和 CPU 使用率？这样，您可以在收集新条目时将它们附加到文件中。

如果您想自动丢弃超过 6 个月的数据，您可以通过为每天（或每周或每月或其他任何时间）使用单独的文件并删除旧文件来做到这一点。这比每次都读取和重写整个文件效率更高。

* * *

在 Perl 中编写和解析此类文件是微不足道的。这是一些示例代码，我想不到：

### 写作：

```
use strict;
use warnings;
use POSIX qw'strftime';

my $dir = '/path/to/log/directory';

my $now = time;
my $date = strftime '%Y-%m-%d', gmtime $now;  # ISO 8601 datetime format
my $time = strftime '%H:%M:%S', gmtime $now;

my $data = get_cpu_usage_somehow();

my $filename = "$dir/cpu_usage_$date.log";

open FH, '>>', $filename
    or die "Failed to open $filename for append: $!\n";

print FH "${date}T${time}\t$data\n";

close FH or die "Error writing to $filename: $!\n"; 
```

### 阅读：

```
use strict;
use warnings;
use POSIX qw'strftime';

my $dir = '/path/to/log/directory';

foreach my $filename (sort glob "$dir/cpu_usage_*.log") {
    open FH, '<', $filename
        or die "Failed to open $filename for reading: $!\n";
    while (my $line = <FH>) {
        chomp $line;
        my ($timestamp, $data) = split /\t/, $line, 2;
        # do something with timestamp and data (or save for later processing)
    }
} 
```

（注意：我现在无法测试这些示例程序中的任何一个，因此它们可能包含错误或拼写错误。使用风险自负！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T01:32:31.410

正如@Borodin 建议的那样，使用 SQLite 或[这里](https://stackoverflow.com/questions/8680241/perl-dbm-vs-storable)`DBM::Deep`推荐的。

如果您想坚持使用 Perl 本身，请使用[DBM::Deep](https://metacpan.org/module/DBM::Deep)：

> 一个独特的平面文件数据库模块，用纯 perl 编写。... 可以处理数百万个键和无限级别，而不会显着减速。用纯 perl 从头开始​​编写——这不是围绕基于 C 的 DBM 的包装器。与 Unix、Mac OS X 和 Windows 的开箱即用兼容性。

您提到了对存储的需求，这可以通过@llmari 提倡的简单文本文件来满足。（当然，使用 CSV 格式可以在电子表格中轻松操作文件。）

但是，如果您计划收集*大量数据*，并且希望最终能够以*良好的性能查询它*，那么请使用为此目的设计的工具。

# html - 标题在 iPad 纵向模式下溢出内容

> ID：12334864
> 
> 赞同：-1
> 
> 时间：2012-09-08T22:06:52.113
> 
> 标签：html, css, ios, ipad

网址在这里[http://teothemes.com/wp/viewpoint/](http://teothemes.com/wp/viewpoint/)。如果您将滚动一点点到内容区域，文本将与标题区域一起溢出，但是一旦您停止滚动，它就会消失。我尝试编辑 z-index，设置背景颜色（认为这是因为图像的加载速度），但它仍然根本不起作用。此问题仅与 iPad 纵向模式有关，并且在任何其他浏览器上都可以正常工作。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T23:06:46.043

当 Position 属性设置不正确时，移动 Safari 会产生这种效果。尝试将重叠 div 设置为：

```
Position: relative; 
```

同样很难说没有示例代码没有正确设置哪些元素属性，但如果你玩弄你就会到达那里。

# cocos2d-iphone - cocos2d-x 内存泄漏需要注意什么？

> ID：12334865
> 
> 赞同：1
> 
> 时间：2012-09-08T22:07:02.253
> 
> 标签：cocos2d-iphone, cocos2d-x

您好，我想知道 cocos2d-x 中的内存泄漏应该注意什么。我正在处理我创建的所有对象，即使用核心 C++，但是如何处理或管理 cocos2d-x 中的代码以避免内存泄漏？

动作、精灵和所有东西呢？也请给我一个理由，这样我会更好理解

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:07:54.973

1.  尝试使用 cocos2d-x 静态函数而不是 new CLASS_NAME()，因为所有静态创建函数都是 autorelease()，你不需要照顾它。

2.  如果您不确定自己在做什么，请确保每个实例都是 CCObject 的子类，并且当您调用 new Class() 时，请记住调用 release()。

# python - 为什么旧的 .pyc 文件会破坏 Django？

> ID：12334869
> 
> 赞同：12
> 
> 时间：2012-09-08T22:07:48.417
> 
> 标签：python, django

我今天使用git提取了最新的代码，我得到了以下错误：

```
ImportError at /
cannot import name Like 
```

这可能与循环导入有关。我检查了回溯：

```
Traceback:
File "/Library/Python/2.7/site-packages/Django-1.4.1-py2.7.egg/django/core/handlers/base.py" in get_response
  101\.                             request.path_info)
File "/Library/Python/2.7/site-packages/Django-1.4.1-py2.7.egg/django/core/urlresolvers.py" in resolve
  298\.             for pattern in self.url_patterns:
File "/Library/Python/2.7/site-packages/Django-1.4.1-py2.7.egg/django/core/urlresolvers.py" in url_patterns
  328\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "/Library/Python/2.7/site-packages/Django-1.4.1-py2.7.egg/django/core/urlresolvers.py" in urlconf_module
  323\.             self._urlconf_module = import_module(self.urlconf_name)
File "/Library/Python/2.7/site-packages/Django-1.4.1-py2.7.egg/django/utils/importlib.py" in import_module
  35\.     __import__(name)
File "/Users/Desktop/python/mystuff/Project/Project/urls.py" in <module>
  7\. admin.autodiscover()
File "/Library/Python/2.7/site-packages/Django-1.4.1-py2.7.egg/django/contrib/admin/__init__.py" in autodiscover
  29\.             import_module('%s.admin' % app)
File "/Library/Python/2.7/site-packages/Django-1.4.1-py2.7.egg/django/utils/importlib.py" in import_module
  35\.     __import__(name) 
```

那里唯一可能导致问题的代码是`urls.py`. 那有以下代码：

```
from django.contrib import admin
admin.autodiscover() 
```

所以大约在这个时候，我注意到我们之前编写的 admin.py 文件在最近的合并中被删除了，但 admin.pyc 仍然存在。删除 .pyc 文件继续修复循环导入错误，现在似乎一切正常。

我的问题是：这里到底发生了什么？Git 被配置为忽略所有 pyc 文件，因此在合并后 .pyc 仍然存在，即使 .py 已被删除。但是如果 .py 本身被删除，python 不应该足够聪明，不要尝试调用 .pyc 中的任何编译代码吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-08T22:19:32.100

不，事实上，Python 将`.pyc`优先使用该文件，并且仅在该`.py`文件 a) 存在且 b) 比该文件更新时才访问该`.pyc`文件。

这允许您在没有源代码的情况下以编译形式分发 Python 应用程序（尽管它不是一种代码“混淆”技术）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-08T22:28:18.873

不，Python（有意地，见下文）对此很愚蠢！你可以跑

```
find . -name '*.pyc' -delete 
```

从您的项目目录中删除旧`.pyc`文件。

如果您使用 git，您可以[设置一个挂钩](https://stackoverflow.com/a/1810193/999608)以在结帐时自动执行此操作。这是Mercurial的[类似解决方案。](https://stackoverflow.com/questions/2528283/automatically-deleting-pyc-files-when-corresponding-py-is-moved-mercurial)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T22:26:58.377

你可以做的事情来防止这种情况是启动 django

```
python -B manage.py runserver 
```

或自动删除 pyc，可能使用 django-extensions 中的 clean_pyc

```
./manage.py clean_pyc 
```

# web-services - 无法同时使用 @WebserviceProvider 和 @Stateless 在 GlassFish 中部署 Web 服务

> ID：12334870
> 
> 赞同：1
> 
> 时间：2012-09-08T22:08:04.630
> 
> 标签：web-services, glassfish, jax-ws

我尝试在 GlassFish JAX-WS Web 服务中部署，这是定义 Web 服务的类片段。请注意，我在 EJB 端点上实现了 Provider 接口。

```
@Stateless(name = "HelloWorldEJBWS")
@WebServiceProvider(
    portName = "HelloWorldWSPort", 
    serviceName = "HelloWorldWSService", 
    targetNamespace = "http://ivan.com/",
    wsdlLocation ="HelloWorldEJBProvider.wsdl")

@ServiceMode(value = Service.Mode.PAYLOAD)

public class HelloWorldEJBWS implements Provider<Source> {

public Source invoke(final Source inRequestMessage) {

    ...
}   
} 
```

问题在于在 GlassFish (3.1.2.2) 中部署服务。F。

[#|2012-09-08T16:39:15.682-0400|信息|glassfish3.1.2|javax.enterprise.system。**container.ejb.com.sun.ejb.containers** |_ThreadID=20;_ThreadName=Thread-2;|EJB5181：EJB HelloWorldEJBWS 的可移植 JNDI 名称：[java:global/JAX-WS_GreetingEJBMutualAuthProvider/HelloWorldEJBWS, java:global/JAX-WS_GreetingEJBMutualAuthProvider /HelloWorldEJBWS!javax.xml.ws.Provider]|#]

[#|2012-09-08T16:39:15.792-0400|INFO|glassfish3.1.2|javax.enterprise.webservices.org.glassfish.webservices|_ThreadID=20;_ThreadName=Thread-2;|WS00019：EJB 端点部署了 JAX -WS_GreetingEJBMutualAuthProvider 在地址处监听**http://ABRAMOV1:8088/HelloWorldWSService/com.ivan.wsejb.provider.HelloWorldEJBWS** |#]

即使它显示端点已部署 - 不是。我无法到达此端点，并且它未显示在 GlassFish 控制台中。

为了比较，我在使用 @WebService 而不是 @WebServiceProvider 部署服务时提供了日志

[#|2012-09-08T16:41:50.514-0400|INFO|glassfish3.1.2|javax.enterprise.webservices.org.glassfish.webservices|_ThreadID=22;_ThreadName=Thread-2;|WS00019：EJB 端点部署了 JAX -WS_GreetingEJBMutualAuth 在地址处监听**http://ABRAMOV1:8088/HelloWorldEJBWSService/HelloWorldEJBWS|#]**

在这种情况下，端点部署正确，一切正常。

这是我应用@WebService 时的代码片段

```
@Stateless(name = "HelloWorldEJBWS")
@WebService()
public class HelloWorldEJBWS {

public String hello(final String inMessage) {
    ...
} 
```

}

我做错什么了吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T00:23:54.987

我做的一切都是正确的，但被 GlassFish 误导了。这可能是一个错误......当我在控制台中部署 Web 服务并将端点实现为 servlet（第二种情况）时，我可以看到端点，但如果端点实现为 EJB，则端点不会出现在控制台中。但我可以通过链接访问 WSDL，`http://localhost:8088/HelloWorldWSService/com.ivan.wsejb.provider.HelloWorldEJBWS?wsdl` 并最终使用客户端测试 Web 服务

# ruby-on-rails-3 - 如何发送 Json 以便在 Rails 中进行更新？

> ID：12334873
> 
> 赞同：0
> 
> 时间：2012-09-08T22:08:33.380
> 
> 标签：ruby-on-rails-3, actionscript-3, flex4

我正在尝试通过以下方式在 flex 和 rails 之间进行更新：

```
// TODO Auto-generated method stub
var strXml:XML = <test>
<test_id>{txtMarketId.text}</test_id>
<market_name>{txtMarketName.text}</market_name>
</test>;

req = new URLRequest("http://localhost:3000/tests/"+market_id);
jrwloader  = new URLLoader();
params = new URLVariables();
req.data = strXml.toString();                               
req.method = URLRequestMethod.POST;                                                         
req.requestHeaders.push(new URLRequestHeader("X-HTTP-Method-Override", URLRequestMethod.PUT));                                                          
jrwloader.load(req); 
```

在我的 Rails 应用程序中，我得到了这个：

```
Started PUT "/markets/2" for 10.10.10.10 at 2012-09-08 18:37:24 +0000
Processing by TestController#update as */*
  Parameters: {"test_id:2, market_name:test"=>nil, "id"=>"2"}
WARNING: Can't verify CSRF token authenticity
  Market Load (0.2ms)  SELECT `tests`.* FROM `test` WHERE `test`.`test_id` = 2 LIMIT 1
   (0.1ms)  BEGIN
   (0.1ms)  COMMIT
Redirected to http://localhost:3000/tests/2
Completed 302 Found in 3ms (ActiveRecord: 0.4ms) 
```

我想我已经接近答案了，但我无法将新数据设置到数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:12:03.770

您应该将 CSRF 令牌添加到您的请求中。

这是有关该主题的更多信息：http: [//guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf](http://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T00:16:10.363

我解决它！主要问题只是在我的请求中添加一行。所以最后我得到了这样的东西：

```
req = new URLRequest("http://localhost:3000/tests/"+market_id);
jrwloader  = new URLLoader();
params = new URLVariables();
req.data = strXml.toString();                               
req.method = URLRequestMethod.POST;                                                         
req.requestHeaders.push(new URLRequestHeader("X-HTTP-Method-Override", URLRequestMethod.PUT));                                                          
**req.requestHeaders.push(new URLRequestHeader("Content-type", 'application/xml'));**         jrwloader.load(req); 
```

谢谢大家！

# git - 如何使用 git-http-backend 解决导致错误 500 的 suexec 策略违规？

> ID：12334874
> 
> 赞同：5
> 
> 时间：2012-09-08T22:08:56.403
> 
> 标签：git, suexec

我试图让 git-http-backend 在我的远程 vps 上工作，但没有运气。我已经以类似于 on [this question](https://stackoverflow.com/questions/11193479/git-smart-http-problems-cannot-push-pull)的方式调整了 httpd.conf ，但是一旦我添加了 ScriptAlias 指令，就会发生错误。

阿帕奇错误日志：

```
 suexec policy violation: see suexec log for more details
 Premature end of script headers: git-http-backend 
```

执行日志

```
 error: target uid/gid (503/500) mismatch with directory (0/0) or program (0/0) or trusted user (0/10) 
```

任何人都可以评论通常如何解决 suexec 问题吗？

**编辑**

主要问题似乎是不允许 Web 服务器运行 cgi 脚本。

目前关于配置 suexec 的文档超出了我的范围。我现在选择禁用它，它允许 Web 服务器运行这些脚本。我现在可以成功推送到 repo。我发现[这篇文章](http://www.slingcode.com/suexec.php)很有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-18T16:26:12.370

我在设置 moinmoin 时遇到了这个错误。我怀疑这是您需要注意的两行（在我的情况下是）：

```
[2014-09-18 17:17:18]: uid: (1009/testsite) gid: (1006/testsite) cmd: moin.cgi
[2014-09-18 17:17:18]: target uid/gid (1009/1006) mismatch with directory (0/0) or program (0/0) 
```

第一行说明一个进程——在这种情况下由 testsite:testsite 拥有——正在尝试执行命令（moin.cgi）。

然后它检查调用进程的用户ID/组ID，看它是否匹配要执行的命令，当它失败时触发第二个输出（0/0表示root/root）。

简单地调用 chown 应该可以解决它：

```
chown -R testsite:testsite </path/to/directory-or-binary> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-16T01:25:16.263

好吧，很明显，你找到了自己的路……

我今天连续花了 7 个小时试图解决这个问题，联系了我的主人（godaddy）3 次。万事胜意...

我决定将 SUEXEC “关闭”，然后在我的服务器上重新安装 Apache（全新安装）。最后，当我的一天即将结束时，我终于开始工作了......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-11-14T19:43:50.677

我在 suexec 指令中将 /var/www/ 目录分配给我的用户，它可以工作..！

# r - 如何在集群树状图中为分支着色？

> ID：12334876
> 
> 赞同：2
> 
> 时间：2012-09-08T21:55:29.413
> 
> 标签：r, data-visualization, cluster-analysis

如果你们中的任何人告诉我如何给风扇簇上的主要分支上色，我将非常感激。

请使用以下示例：

```
library(ape)
library(cluster) 
data(mtcars)
plot(as.phylo(hclust(dist(mtcars))),type="fan") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T01:31:36.697

如果您想对主分支着色以指示样本属于哪个类，那么您可能会发现 R 包 sparcl 中的函数*ColorDendrogram*很有用（可以从[这里](http://cran.r-project.org/web/packages/sparcl/index.html)下载）。这是一些示例代码：

```
library(sparcl)

# Create a fake two sample dataset
set.seed(1)
x <- matrix(rnorm(100*20),ncol=20)
y <- c(rep(1,50),rep(2,50))
x[y==1,] <- x[y==1,]+2

# Perform hierarchical clustering
hc <- hclust(dist(x),method="complete")

# Plot
ColorDendrogram(hc,y=y,main="My Simulated Data",branchlength=3) 
```

这将生成一个树状图，其中叶子根据它们来自的两个样本中的哪一个进行着色。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-08T23:25:37.037

您需要更具体地说明“为主要分支着色”的含义，但这可能会给您一些想法：

```
 phyl <-as.phylo(hclust(dist(mtcars))) 
 plot(phyl,type="fan", edge.col=c("black", "green")[1+(phyl$edge.length >40) ]) 
```

奇数边缘是扇形图中的径向臂，所以这个稍微丑陋（或者可能非常聪明？）的黑客只对长度大于 40 的臂着色：

```
phyl <-as.phylo(hclust(dist(mtcars)))
plot(phyl,type="fan", edge.col=c("black", "black", "green")[
                                        c(TRUE, FALSE) + 1 + (phyl$edge.length >40) ]) 
```

# cognos - “Cognos TM1”和“Cognos 10 BI”之间的区别

> ID：12334877
> 
> 赞同：5
> 
> 时间：2012-09-08T22:09:24.130
> 
> 标签：cognos, cognos-8, cognos-tm1

“Cognos TM1”和“Cognos 10 BI”之间有什么区别？哪一个被 IBM 视为 BI 工具？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T14:46:20.323

“Cognos TM1”和“Cognos 10 BI”之间存在巨大差异！

**Cognos TM1**是一个 (OLAP) 多维数据库，可以通过“TM1 Web”、“TM1 Executive Viewer”和“Cognos 10 BI”从 Excel 和 Web 进行查询。在这个数据库中，您将能够创建几乎任何类型的 OLAP / 决策应用程序。

**Cognos 10 BI**是一个基于 Web 的报告应用程序。根据他们的权利（许可），用户将能够针对关系和/或多维数据库运行报告、计划报告和/或创建临时分析。为此，必须使用“框架管理器”构建逻辑层。该逻辑层用于隐藏数据库复杂性并向最终用户提供相关信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-20T15:43:15.567

用最简单的话来说：

*   TM1 是一个数据库引擎和一组用于访问和管理其数据库的应用程序。
*   Cognos BI 是一组 Web 应用程序，它们提供了用于查看和处理数据的漂亮界面。

通常情况下，Cognos BI 使用 TM1 数据库作为其数据源，但并非必须如此。如果 Cognos BI 正在使用 TM1，那么在 TM1 应用程序中可能使用的大多数相同用户功能也可以通过 Cognos BI 使用，只是它们以更加用户友好的方式可用。Cognos BI 还添加了 TM1 应用程序中没有的功能，以允许额外的数据管理。IBM 的营销令人困惑，但通常 Cognos BI 和 Cognos TM1 统称为它们提供*的BI 工具包。*

现在要稍微了解一下 TM1 的技术，它不仅仅是一个普通的旧数据库。正如这里的其他人所提到的，它是一个多维 OLAP 数据库。它能够处理数字和字符串数据，但它没有 NULL 值的概念。数字数据可以使用合并的元素进行汇总。它具有存储元数据的属性。它具有内置的规则引擎来处理业务逻辑和自定义计算。它具有 ETL 和数据库维护任务的流程。它有用于在不同时间间隔调度进程的杂务。它链接到 Excel 工作簿。最后，除了这些开箱即用的功能和更多功能之外，TM1 还公开了一个 API，用于针对使用 3GL（如 C++、C#、Java 甚至 VBA）进行编程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T03:18:42.390

关键区别在于 Cognos TM1 旨在轻松使用 excel，而 Cognos 10 BI 主要基于浏览器。看看这里的血腥细节。 [http://www.tm1forum.com/viewtopic.php?f=5&t=1442](http://www.tm1forum.com/viewtopic.php?f=5&t=1442)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T00:44:59.900

IBM 也将 Cognos TM1 称为财务绩效管理 FPM。这是一个具有实时规则计算的内存 MOLAP 立方体应用程序。由于它提供最终用户回写，它经常被财务办公室用于预算和建模 - 因此经常使用 MS Excel 界面。然而，它还配备了零占用网络“前端”以及 Cognos Insight，它允许对 TM1 多维数据集（位于服务器端）进行分布式或断开连接的访问​​。

TM1 可以集成到 Cognos BI 中，以便 Cognos BI 从 TM1 多维数据集进行报告；或者可以从 Cognos BI 仪表板中的 portlet 访问 TM1。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-02T09:14:02.600

cognos10 和 cognos tm1 之间的区别：-BI 是报告工具，而 cognos tm1 是分析和报告工具，在 tm1 中构建 CUBES 和 BI 生成报告

# scala - SBT 包何时下载/构建？

> ID：12334878
> 
> 赞同：2
> 
> 时间：2012-09-08T22:09:34.593
> 
> 标签：scala, playframework

我想使用[http://dispatch.databinder.net/Dispatch.html](http://dispatch.databinder.net/Dispatch.html)。

该站点表明我必须将其添加到`project/plugins.sbt`：

```
libraryDependencies +=  "net.databinder.dispatch" %% "core" % "0.9.1" 
```

我做了。然后我重新启动了游戏控制台并`compile`d.

导入不起作用：

```
import dispatch._ 
```

* * *

猜我一直很傻，但是我在使用 Java 时从未使用过构建系统。

我必须如何触发下载/构建包的过程？罐子（或等价物）存放在哪里；我可以重复使用它们吗？Play 应用程序何时可以使用该包？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T00:50:25.580

它*并没有*说您应该将其添加到`project/plugins.sbt`. 那是错误的地方。它说要添加到`build.sbt`项目的根目录上的文件中。作为一个 Play 项目，`project/Build.scala`可能更合适——我不知道它是否会从中获取设置`build.sbt`。

要[在 Build.scala 中添加依赖项](http://www.playframework.org/documentation/2.0.3/SBTDependencies)：

```
val appDependencies = Seq(
  "net.databinder.dispatch" %% "core" % "0.9.1"
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T22:18:12.057

您可能需要运行 sbt update。

从 sbt[命令行参考](https://github.com/harrah/xsbt/wiki/Command-Line-Reference)：

```
update Resolves and retrieves external dependencies as described in library dependencies. 
```

# c# - 如何以编程方式获取 log4net 日志文件的名称模式？

> ID：12334888
> 
> 赞同：8
> 
> 时间：2012-09-08T22:10:38.087
> 
> 标签：c#, log4net

我正在尝试编写一个 C# 代码，它在运行时通过 log4net API 检索*log4net*日志文件的名称模式。

也就是说，如果在*log4net.config*中定义了以下附加程序：

```
<appender name="MyAppender" type="log4net.Appender.RollingFileAppender">
  <file type="log4net.Util.PatternString" value="%date{yyyy}\%date{MM}\%date{dd}\%property{Id}.log" />
  <appendToFile value="true" />
  <rollingStyle value="Size" />
  <maxSizeRollBackups value="16" />
  <maximumFileSize value="1MB" />
  <staticLogFileName value="true" />
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%message%newline" />
  </layout>
</appender> 
```

我想在代码中的字符串变量中获取*%date{yyyy}\%date{MM}\%date{dd}\%property{Id}.log （不将**log4net.config*解析为纯 XML）。

有没有人有想法来拉这个把戏？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T22:40:31.000

此模式的值将位于作为日志存储库一部分的实例的`File`属性中。`FileAppender`

可以通过几种不同的方式访问 appender。

1.  如果您已经有一个`ILogger`实例（例如，您从中获得了什么`LogManager.GetLogger()`），那么它上面就有一个`Appenders`属性。这将为您提供与该特定级别的日志记录层次结构关联的任何附加程序。
2.  您还可以调用`LogManager.GetRepository()`以获取`Heirarchy`包含整个 logger 和 appender 层次结构的对象。该方法需要一个程序集，因此通过[`GetCallingAssembly()`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getcallingassembly.aspx)获取默认程序集。这个类有一个`GetAppenders()`方法可以返回所有配置的 appender，尽管它不会告诉你哪些与哪些 loggers 相关联。

从那里，只需查找正确类型的附加程序（例如`FileAppender`or `RollingFileAppender`），然后读取它的`File`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-19T16:17:08.847

Michael Edenfield 的解释很好。这里是实现。

```
private static readonly ILog log = LogManager.GetLogger(MethodBase.GetCurrentMethod().DeclaringType);

string fileName = ((RollingFileAppender)log.Logger.Repository.GetCurrentLoggers()
    .Where(e => e.Name == "Your namespace.class").ToList()[0]
    .Repository.GetAppenders()
    .Where(e => e.Name == "MyAppender").ToList()[0]).File.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T18:53:54.167

我认为你想继承 RollingFileAppender，并在配置文件中使用你的子类，而不是基类。确保在类名前加上完整的命名空间，以便 log4net 可以找到它。

我的代码中只有一个 UDPAppender 子类。我添加了这样的覆盖：

```
 public override void ActivateOptions()
    {
        base.ActivateOptions();
    } 
```

当我在基类调用之前中断时，我在本地窗口中检查了“this”并看到了 UDPAppender“成员”的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-06T09:00:34.620

`<file value>`我可以使用以下代码 获取 的值：

```
((log4net.Appender.FileAppender) ((log4net.Appender.IAppender[])
            ( (log4net.Repository.Hierarchy.Logger)
                log.Logger).Appenders.SyncRoot)[0]).File 
```

# random - 方案：创建一个随机范围

> ID：12334891
> 
> 赞同：0
> 
> 时间：2012-09-08T22:11:00.427
> 
> 标签：random, integer, scheme, range

在方案中，我必须使用 random 来定义一个不接受任何参数并返回 1 到 10 范围内的整数的过程，包括 1 到 10，我不能使用 if。我迷路了=（

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T23:06:11.413

如果你的 Scheme 提供了一个`random`函数，你想要

```
(define (1-10-rand)
    (+ 1 (random 10))) 
```

或者

```
(define (1-10-rand)
    (floor (* 10 (random)))) 
```

取决于你有`(random n) --> integer in [0, n-1])`或`(random) -> float in [0,1]`

请注意，这不符合标准。为了*绝对*的可移植性，请编写自己的 RNG。

# javascript - 在 settimeout 期间仅更新最后一个值

> ID：12334893
> 
> 赞同：1
> 
> 时间：2012-09-08T22:11:34.577
> 
> 标签：javascript, settimeout, setinterval

> **可能重复：**
> [在循环中将函数传递给 setTimeout：总是最后一个值？](https://stackoverflow.com/questions/6425062/passing-functions-to-settimeout-in-a-loop-always-the-last-value)

我有以下代码：

```
var points = [{
        id1             : 1,
        id2             : 9,
        lat             : 44,
        lng             : 24
    },{
        id1             : 2,
        id2             : 7,
        lat             : 13,
        lng             : 29
    }]; 
```

当我尝试为数组点中的每个对象创建超时时，它只更新最后一个元素

```
for (var i in points){
    setInterval(function(){
        drivePoint(points[i], i)
    }, 1000);
} 
```

其中驱动点是发出 ajax 请求的函数：

```
function drivePoint(point, i){
        $.ajax({
            type: "POST",
            url: 'url',
            data: points[i]
        }).done(function(o){
            var data = $.parseJSON(o);
            points[i].lat           = data['lat'];
            points[i].lng           = data['lng'];
        });
    } 
```

drivePoint 的想法是更新给定点的坐标，但问题是它只更新最后一个，尽管如此有多少对象在 points 变量中，而不是 for (var i in points) 循环单独编写

```
setInterval(function(){
    drivePoint(points[0], 0)
}, 1000);

setInterval(function(){
    drivePoint(points[1], 1)
}, 1000); 
```

一切正常

无法理解问题出在哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:21:46.267

这里的问题是，当你的函数被执行`i`时，将被设置为循环中的最后一个值，因此在执行`drivePoint()`. 但是你真的需要为每个点单独的间隔吗？你可以让你的间隔循环遍历所有值吗？

```
setInterval(function() {
    for (var i in points) {
        drivePoint(points[i], i);
    }
}, 1000); 
```

# html - 将鼠标悬停在链接旁边的链接显示图像上时

> ID：12334903
> 
> 赞同：1
> 
> 时间：2012-09-08T22:12:58.627
> 
> 标签：html, css

通常，我希望不显示红色箭头。但是当用户将鼠标悬停在“我的购物车 (0)”上时，我希望显示红色箭头。你怎么能用 html/css 做到这一点？

![在此处输入图像描述](../Images/7b6f287238f883e1e5953c77a7c0944a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T22:17:04.037

你可以试试这个：http: [//jsfiddle.net/ePf3A/](http://jsfiddle.net/ePf3A/)

这样做是改变图像的宽度以显示/隐藏箭头。

```
.cart {
  background:url(http://i.stack.imgur.com/D2o7H.png);
  width: 100px;
  height: 45px;
  display: block;
}
.cart:hover {
  width: 150px;
}
​ 
```

另一种选择是使用不同的图像并在此之间进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:50:44.133

您可以使用一点 CSS 技巧从 div 使用它的边框制作一个箭头，然后在用户使用`:hover`您的购物车时显示它。将鼠标悬停在本[例](http://jsfiddle.net/fWZ84/)中的黑色矩形上。

# json - 我可以让 MOXy 在生成 json 时不输出元素吗？

> ID：12334904
> 
> 赞同：1
> 
> 时间：2012-09-08T22:13:23.077
> 
> 标签：json, eclipselink, moxy

我的 JAXB 对象模型的一个实例包含一个元素，当我为该实例生成 Xml 而不是当我生成 json 时我想要输出该元素

即我想要

```
<release-group>
<type>Album</type>
<title>Fred</title>
</release-group> 
```

和

```
"release-group" : {
         "title" : "fred",
       }, 
```

但有

```
"release-group" : {
         "type" : "Album",
         "title" : "fred"
      }, 
```

我可以使用 oxml.xml 映射文件执行此操作吗

这个答案显示了如何使用瞬态关键字为属性执行此操作，[我可以让 MOXy 在生成 json 时不输出属性吗？](https://stackoverflow.com/questions/11519572/can-i-get-moxy-to-not-output-an-attribute-when-generating-json)但我不能让它为一个元素工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T09:51:17.807

抱歉问题解决了，我有点困惑。

我上面给出的示例实际上并没有准确匹配真实情况，type 实际上是作为 Xml 的属性输出的，但是由于它已在 JAXB 中重命名，因此使用瞬态不起作用

```
@XmlAttribute(name = "target-type", required = true)
@XmlSchemaType(name = "anyURI")
protected String targetType; 
```

所以添加

```
 <java-type name="ReleaseGroup">
            <java-attributes>
                <xml-transient java-attribute="targetType"/>
            </java-attributes>
        </java-type> 
```

工作，以前我做错了

```
 <java-type name="ReleaseGroup">
            <java-attributes>
                <xml-transient java-attribute="target-type"/>
            </java-attributes>
        </java-type> 
```

# mysql - 在mysql数据库中创建表

> ID：12334906
> 
> 赞同：1
> 
> 时间：2012-09-08T22:13:39.290
> 
> 标签：mysql, create-table

我正在尝试导入数据库，但我有一个错误，说我在最后一个 1 附近有一个错误，我的错误在哪里？，我没有找到它。请你帮助我好吗？。

```
CREATE TABLE cluw.envios_service_desk (
id_envio_sd int(10) NOT NULL,
id_cuenta int(10),
id_usuario int(10),
enviado enum(1),
f_envio datetime,
tipo_envio enum(1),
PRIMARY KEY (id_envio_sd)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T22:17:47.047

enum 只处理字符串

要修复它，只需像这样在它们周围添加小引号

```
CREATE TABLE cluw.envios_service_desk (
id_envio_sd int(10) NOT NULL,
id_cuenta int(10),
id_usuario int(10),
enviado enum('1'),
f_envio datetime,
tipo_envio enum('1'),
PRIMARY KEY (id_envio_sd)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

# php - 使用 sql 获取子项目？

> ID：12334908
> 
> 赞同：2
> 
> 时间：2012-09-08T22:13:55.563
> 
> 标签：php, mysql, arrays, multidimensional-array

我有三张桌子，

`Entries`, `Tags`,`Entry_Tag_Link`

我有我的查询，它通过并将所有内容从`Entries`表中拉出

```
SELECT *
FROM (`blog_entries`)
ORDER BY `date` desc 
```

我最终得到了一系列条目。

之后我循环通过

```
foreach($entries as &$entry)
    $entry['tags'] => getTags($entry['id]); 
```

该`getTags`函数运行此查询

```
SELECT t.* 
FROM blog_tags t
JOIN blog_entries_tags_link l
    ON t.id = l.tag_id
WHERE l.entry_id = {whatever id was passed}
ORDER BY t.name asc; 
```

所以我最终得到了一个看起来像这样的数组：

```
Array
(
    [0] => Array
        (
            [id] => 1
            [title] => First Title
            [tags] => Array
                (
                    [0] => Array
                        (
                            [id] => 1
                            [name] => t1
                        )

                    [1] => Array
                        (
                            [id] => 2
                            [name] => t2
                        )

                )

        )

    [1] => Array
        (
            [id] => 2
            [title] => Second Title
            [tags] => Array
                (
                    [0] => Array
                        (
                            [id] => 1
                            [name] => t1
                        )

                    [1] => Array
                        (
                            [id] => 3
                            [name] => t3
                        )

                )

        )

) 
```

所以，这意味着如果有 200 个条目，我最终会得到 201 个查询，我想知道是否有办法在一个查询中获取我需要的所有数据（然后假设用 php 将其按摩成正确的格式） ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:28:30.537

答案是肯定的，至少从 SQL 的角度来看是这样。

```
SELECT t.* 
FROM blog_tags t join
     blog_entries_tags_link l
     ON t.id = l.tag_id join
     (SELECT *
      FROM `blog_entries` e
     ) e
     on l.entry_id = e.entry_id
WHERE l.entry_id = {whatever id was passed}
ORDER BY e.`date` desc, t.name asc 
```

这是假设每个 blog_entry 的 id 都是唯一的（并且您的代码表明是这种情况）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T22:37:36.727

我假设您的博客条目 ID 是 blog_entry_id ...

要求 ：

```
SELECT b.title, t.entry_id, t.name, l.tag_id 
FROM blog_entries b
JOIN blog_tags t on t.entry_id = b.blog_entry_id
JOIN blog_entries_tags_link l on t.id = l.tag_id
ORDER BY b.date DESC, t.name ASC 
```

PHP：

```
$result = array();
foreach ($entries as $entry) {

    // Creates a new blog entry on the $result array
    if (!isset($result[ $entry['entry_id'] ])) {
        $blog_entry = array();
        $blog_entry['id'] = $entry['entry_id'];
        $blog_entry['title'] = $entry['title'];
        $blog_entry['tags'] = array();
        $result[ $entry['entry_id'] ] = $entry;
    }

    // Add a new tag
    $tag = array();
    $tag['id'] = $entry['tag_id'];
    $tag['name'] = $entry['name'];
    $result[ $entry['entry_id'] ]['tags'][] = $tag;

} 
```

您可能会注意到您从不使用 blog_entry_tags_link （我使用它只是因为我不知道您的列名）。

# android - android如何在视图中加载意图

> ID：12334910
> 
> 赞同：-1
> 
> 时间：2012-09-08T22:14:10.200
> 
> 标签：android, activitygroup

我知道这`ActivityGroup`能够改变视图的内容，但它即将被斩首..

而且我真的不喜欢`Fragment`..有没有一种方法可以让我自己建造某种东西`TabHost`？一个会改变特定视图内容的按钮？

我不想使用 TabHost，因为我有 4 个按钮，其中只有 2 个应该运行新意图，而另外 2 个使用`Dialogs`..

我可以操纵`TabHost`只有 2 个选项卡会运行一个意图，另一个会午餐，`Dialog`但我认为这不是正确的方式..

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:49:40.137

将活动放入活动中的概念已被弃用。`ActivityGroup`它的子类实现了该模式，尽管它始终是可选的（例如，`TabHost`从不要求您将活动放在选项卡中）。欢迎您：

*   只使用视图
*   使用片段
*   在活动中使用活动，并希望将来“弃用”不会变成“完全不会运行”

我强烈建议您选择前两项中的一项。

# ruby-on-rails - Rails - 在创建时使用 has_many_through 关系插入许多随机项目

> ID：12334917
> 
> 赞同：2
> 
> 时间：2012-09-08T22:15:43.073
> 
> 标签：ruby-on-rails, has-many-through

我想创建一个包含 15 张卡片的随机包，应该在创建时在 cardpacks_controller 中调用它。我有以下型号：

卡片：

```
class Card < ActiveRecord::Base
  # relations
  has_many :cardpacks, through: :cardpackcards
  belongs_to :cardset
end 
```

卡包：

```
class Cardpack < ActiveRecord::Base
  #relations
  has_many :cards, through: :cardpackcards
  belongs_to :cardset

  # accept attributes
  accepts_nested_attributes_for :cards
end 
```

卡包卡：

```
class Cardpackcard < ActiveRecord::Base
  #relations
  belongs_to :card
  belongs_to :cardpack
end 
```

卡组：

```
class Cardset < ActiveRecord::Base
  #relations
  has_many :cards
  has_many :cardsets
end 
```

如何创建具有随机 card_id 值和相同 cardpack_id 的 15 个 Cardpackcards 记录（因此它们属于同一个包）

我看过[复杂的表单系列](http://railscasts.com/episodes/73-complex-forms-part-1)教程，但它让我无法理解如何解决这个问题。

我希望任何人都可以帮助我解决这个问题，并让我对 Rails 语言有更多的了解。

谢谢，埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:19:18.597

根据数据库系统，您可能可以使用 order random 子句来查找 15 条随机记录。例如，在 Postgres 中：

```
Model.order("RANDOM()").limit(15) 
```

给定随机模型，您可以添加一个`before_create`设置关联的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T22:31:05.317

如果模型除了提供and`Cardpackcard`之间的匹配之外什么都不做，您可以使用关联来代替，这会简化一些事情。`cards``cardpacks``has_and_belongs_to_many`

没有它，控制器代码可能看起来像这样：

```
cardset  = Cardset.find(params[:cardset_id])
cardpack = Cardpack.create(:cardset => cardset)

15.times do
  cardpack.cardpackcards.create(:card => Card.create(:cardset => cardset))
end 
```

# opencl - 在一个工作组/项目中拥有多个工作维度是否提供了加速？

> ID：12334921
> 
> 赞同：3
> 
> 时间：2012-09-08T22:16:46.913
> 
> 标签：opencl, gpgpu

在 OpenCL 中，在一个工作组/项目中拥有多个工作维度是否会提供加速？如果是这样，请指向一些代码或链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:53:50.970

不，实际上它解决了执行问题，因为运行时必须执行本地和全局 id 映射。

# java - Spring和Spring安全配置帮助，找不到bean

> ID：12334922
> 
> 赞同：6
> 
> 时间：2012-09-08T22:16:57.173
> 
> 标签：java, spring, spring-security, spring-annotations

我一直收到带有消息的异常：“org.springframework.beans.factory.NoSuchBeanDefinitionException：没有定义名为'userDetailsS​​ervice'的bean”，即使该bean被定义为UserDetailsS​​erviceImpl类中的服务。如：

```
@Service(value="userDetailsService")
public class UserDetailsServiceImpl implements UserDetailsService{ 
```

我正在使用最新的 Spring 和 Spring Security。

我不确定我做错了什么。我正在粘贴我的 spring xml 文件的配置。spring-security.xml 表明它可以在使用组件扫描时从 servlet-context.xml 中找到 bean。

谢谢

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name org.springframework.security.filterChains': Cannot resolve reference to bean org.springframework.security.web.DefaultSecurityFilterChain#0' while setting bean property sourceList' with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name org.springframework.security.web.DefaultSecurityFilterChain#0': Cannot resolve reference to bean org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0' while setting constructor argument with key [2]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0': Cannot resolve reference to bean org.springframework.security.authentication.ProviderManager#0' while setting bean property authenticationManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name org.springframework.security.authentication.ProviderManager#0': Cannot resolve reference to bean 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name org.springframework.security.authenticationManager': Cannot resolve reference to bean org.springframework.security.authentication.dao.DaoAuthenticationProvider#0' while setting constructor argument with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name org.springframework.security.authentication.dao.DaoAuthenticationProvider#0': Cannot resolve reference to bean 'userDetailsService' while setting bean property 'userDetailsService'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'userDetailsService' is defined 
```

弹簧安全.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/security
       http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<beans:import resource="classpath*:servlet-context.xml"/> 

<global-method-security secured-annotations="enabled"></global-method-security>    

<http auto-config="true" >
    <!-- Filtering url patterns -->

    <!-- Anonymous users -->
    <intercept-url pattern="/" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <intercept-url pattern="/login*" access="IS_AUTHENTICATED_ANONYMOUSLY" />

    <!-- Login and logout controls -->
    <form-login login-page="/login" default-target-url="/profile"
        authentication-failure-url="/loginfailed" />
    <logout invalidate-session="true" logout-success-url="/"
        delete-cookies="JSESSIONID" />

</http>

<beans:bean id="authenticationProvider"
    class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
    <beans:property name="userDetailsService" ref="userDetailsService"/>
</beans:bean>

<beans:bean id="authenticationManager"
    class="org.springframework.security.authentication.ProviderManager">
    <beans:property name="providers">
        <beans:list>
            <beans:ref local="authenticationProvider" />
        </beans:list>
    </beans:property>
</beans:bean>

<authentication-manager>
    <authentication-provider user-service-ref="userDetailsService">
    </authentication-provider>
</authentication-manager> 
```

servlet-context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<annotation-driven />

<resources mapping="/resources/**" location="/resources/" />

<!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>

                                              <!-- Data source configuration -->

<!-- JDBC configuration for ORM -->
<beans:bean id="dbDataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
   <beans:property name="driverClassName" value="com.mysql.jdbc.Driver"/>
   <beans:property name="url" value="jdbc:mysql://localhost:3306/dbName"/>
   <beans:property name="username" value="root"/>
   <beans:property name="password" value=""/>
</beans:bean>   

<!-- Hibernate session Factory -->
<beans:bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
   <beans:property name="dataSource" ref="dbDataSource" />

   <!-- All the model packages with hibernate annotations that need to be scanned. -->
   <beans:property name="packagesToScan">
       <beans:value>
           com.package.registration.models
       </beans:value>
   </beans:property>

   <!-- Hibernate specific properties -->
   <beans:property name="hibernateProperties">
       <beans:props>
           <beans:prop key="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</beans:prop>
           <beans:prop key="hibernate.show_sql">true</beans:prop>
           <beans:prop key="hibernate.format_sql">true</beans:prop>
           <beans:prop key="hibernate.hbm2ddl.auto">update</beans:prop>
           <beans:prop key="org.hibernate.transaction">true</beans:prop>
       </beans:props>
   </beans:property>
</beans:bean>

<!-- A transaction manager for working with Hibernate SessionFactories -->
<beans:bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <beans:property name="sessionFactory" ref="sessionFactory"/>
</beans:bean>

<tx:annotation-driven transaction-manager="transactionManager" />

<context:component-scan base-package="com.package.app" /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T22:50:04.583

您需要将组件扫描放在其他 Spring 配置文件中，而不仅仅是 servlet 配置。

它们是不同的上下文，一种由上下文加载器侦听器加载，一种由调度程序 servlet 加载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T22:51:08.430

确保添加

```
<context:annotation-config />
<context:component-scan base-package="<your package name" /> 
```

对于您的应用程序上下文，否则 Spring 将不知道在哪里查找使用注释声明的 bean。注意，Spring 会扫描你指定的包和所有的子包。

# ember.js - 如何将 bootstrap-tour 与 emberjs 集成

> ID：12334924
> 
> 赞同：2
> 
> 时间：2012-09-08T22:17:03.573
> 
> 标签：ember.js, handlebars.js

我不确定如何将 bootstrap-tour ** [https://github.com/pushly/bootstrap-tour](https://github.com/pushly/bootstrap-tour)与 emberjs 一起使用。Bootstrap-tour 的文档 ** [http://pushly.github.com/bootstrap-tour/](http://pushly.github.com/bootstrap-tour/)

挑战在于，与其他 jquery 插件不同，我们可以通过以下方式进行集成：

```
didInsertElement: function() {
  this.$().jQueryPlugin();
} 
```

Bootstrap-tour 需要使用不同的模式，到目前为止，我为将其与 emberjs 集成所做的一切尝试都失败了：

```
App.SiteTour = Ember.View.extend({
  templateName: 'whatever',

  didInsertElement: function(){
    this._super(),

    //var tour = new Tour();

      this.tour = new Tour();

    tour.addStep:({
      element: "#one",
      title: "Step 1",
      content: ' '
    });

    tour.addStep:({
      element: "#two",
      title: "Step 2",
      content: ' '
    });

    tour.start();

  }
}); 
```

那不起作用，这也不起作用：

```
 this.$().load({

    tour.addStep({
     element: "#one",
     title: "Step 1",
     content: "Content for step 1"
   });

  tour.addStep({
     element: "#two",
     title: "Step 2",
     content: "Content for step 2"
   });

 },

   tour.start();

}); 
```

最后，这个 emberjs 和 bootstrap-tour 的 jsfiddle 也无法正常工作：

[http://jsfiddle.net/GqG3U/5/](http://jsfiddle.net/GqG3U/5/)

但是这个没有 emberjs 的作品：

[http://jsfiddle.net/GqG3U/4/](http://jsfiddle.net/GqG3U/4/)

**更新**

这个 jsfiddle ** [http://jsfiddle.net/GqG3U/6/](http://jsfiddle.net/GqG3U/6/) 不会抛出任何错误，但是当我使用脚本标签时，把手不会显示。但是，如果没有脚本标签，它会显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T13:01:02.117

我添加了一个[工作版本](http://jsfiddle.net/GqG3U/11/)。

您在那里的代码非常接近，您只是没有正确分配 tour 变量并且需要实例化应用程序。

`ApplicationView`如果您使用and`ApplicationController`和 call设置应用程序，最新版本的 Ember 确实效果最佳`initialize`。我知道这对于 jsFiddles 来说有点尴尬，但否则会导致奇怪的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T13:19:26.933

我试图重构你的代码，现在它更干净（也有效）：

[http://jsfiddle.net/GqG3U/14/](http://jsfiddle.net/GqG3U/14/)

将 HTML 放入车把脚本块是“Ember Way”:)

PS：在 Chrome 下你应该调用 tour "this.tour.start(true);"。

# python - 如何结合gstreamer和opencv？

> ID：12334925
> 
> 赞同：3
> 
> 时间：2012-09-08T22:17:08.153
> 
> 标签：python, opencv, gstreamer

我想使用 OpenCV 分析从以 1280 x 960 的原始分辨率拍摄的网络摄像头拍摄的（部分）帧。我可以使用 Gstreamer 和 appsink 捕获这些帧。然而，我开始意识到，仅仅导入 OpenCV 就会弄乱 Gstreamer，因此我的捕获不再起作用。我需要 gstreamer，因为 OpenCV 只允许捕获 640x480，而且我开始喜欢它带来的所有额外功能。

我能想到的最简单的例子来说明我的问题是：

```
 import gst
    from time import sleep

    #import cv2

    pipeline = gst.Pipeline()
    bin = gst.parse_bin_from_description('''
    autovideosrc !
    video/x-raw-rgb, width=1280, height=960 !
    ffmpegcolorspace !
    xvimagesink
    ''', False)
    pipeline.add(bin)

    pipeline.set_state(gst.STATE_PLAYING)

    while True:
        sleep(1) 
```

在上面的版本中，它运行良好，如果我取消注释 import cv2 语句，它会给我无休止的错误消息：

libv4l2：错误得到 4 个连续的帧解码错误，最后一个错误：v4l-convert：错误无法枚举帧索引：6 用于：RGB3 1280x960 使用 src：MJPG 1280x960，错误：无效参数

我在 Kubuntu Linux 12.04 上，使用 OpenCV 版本 2.4.1，Gstreamer 版本 0.10.36

openCV 做了什么来搞乱我的 Gstreamer ？我怎样才能同时使用两者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T04:01:53.507

问题可能是 gstreamer bad plugins 中已经有 opencv。因此，您的 opencv 安装可能与 gstreamer 期望的版本发生冲突。

如果您希望 gstreamer 在其构建中启用 opencv，请确保先安装 opencv，然后再安装 gstreamer。如果您不想这样做，请执行相反的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T00:33:08.880

找到了解决方法：

如果我在设置 Gstreamer 管道后延迟导入 OpenCV，则 OpenCV 和 Gstreamer 可以很好地协同工作。

（在上面的示例中，这对应于在 'pipeline.add(bin)' 之后移动 'import cv2' 语句）

但这不是我喜欢的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T05:11:28.633

另外，我建议您将您的 openCV 处理重新安装到 gstreamer 插件中，这样您就可以正确安排它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-15T16:22:16.420

或者，OpenCV（2.4.x 或更高版本）可以打开 GStreamer 管道。有关示例，请参阅[在 OpenCV 中使用自定义相机（通过 GStreamer）](https://stackoverflow.com/questions/23570572/using-custom-camera-in-opencv-via-gstreamer)。

OpenCV 3.0（开发分支）与 GStreamer 1.0 集成。

# ruby-on-rails - Ruby - 订购一个数组

> ID：12334928
> 
> 赞同：0
> 
> 时间：2012-09-08T22:17:41.603
> 
> 标签：ruby-on-rails, ruby, arrays

我有一个有 2 列的表。“车”“年”。我想收集所有汽车的数组，然后按年份对它们进行排序。我怎么做？

```
<% @cars_pre = Car.find(:all) %>
<% @cars = @cars_pre.collect {|x| x.car} %> 
```

我需要按年份订购@cars 数组的步骤，请记住我没有将年份值保留在@cars 数组中，而只是汽车。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T22:22:44.553

从代码示例中，我猜您正在使用 Ruby on Rails。如果是，我建议您允许您的数据库对结果进行排序。例如：

```
@cars = Card.order("year").all 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T22:23:32.167

使用`sort`：

```
@cars.sort_by!(:year) # in-place sort 
```

为什么要删除您希望排序的信息，然后按该信息排序？只需将信息保留在数组中即可 - 无需删除它。另外，您需要它进行排序。

也就是说，为什么不使用在数据库端对其进行排序`order("year")`？

# c++ - 尝试在 header/cpp 文件中使用函数

> ID：12334930
> 
> 赞同：1
> 
> 时间：2012-09-08T22:17:52.757
> 
> 标签：c++

我有两个文件：

hello.h 和 hello.cpp

你好.h

```
#ifndef __HELLO_H__
#define __HELLO_H__

using namespace std;

void PrintMessage();

#endif 
```

你好.cpp

```
#include <iostream>
#include "hello.h"

using namespace std;

void PrintMessage()
{
     cout << "I want to be displayed!";
} 
```

现在，我想`PrintMessage()`在新的 .cpp 文件中使用，但我不断收到错误消息。这就是我正在做的事情：

打印信息.cpp

```
#include <iostream>
#include "hello.h"

using namespace std;

int main()
{
     PrintMessage();
     return 0;
} 
```

我只是在做一些公然错误的事情吗？我确实将它们全部放在同一个文件夹中；我认为它与 Dev-C++（我用来编写/编译/运行的东西）有关，但我无法弄清楚。有人有想法么？

* * *

我在桌面上创建了一个文件夹，将所有三个文件都放入其中，然后我尝试`printingmessage.cpp`完全按原样编译我的文件。这是我得到的错误：

```
[Linker error] Undefined reference to 'PrintMessage()' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T00:54:03.857

> 我认为它与 Dev-C++（我用来编写/编译/运行的东西）有关，但我无法弄清楚。

我想也是。在幕后，必须发生以下事情：

1.  两个文件都被*编译*。`*.obj`这将为每个文件创建一个`*.cpp`文件，并使用标题。
2.  目标文件相互*链接*，并且可能与所需的库链接。

您的问题在于第二步的“彼此”部分：代码*编译*正常，但链接失败。头文件在这一点上是无关紧要的。更准确地说，链接器调用`printingmessage.obj`包含对未在该目标文件或任何默认库中定义的函数的引用。问题很可能是由于`*.cpp`文件不是同一项目的一部分。您需要创建一个多源文件项目，您可以在其中链接多个目标文件。你如何使用 Dev-C++ 做到这一点可能在他们的手册中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T22:29:59.360

我不知道开发 C++，但我强烈建议您是否进行任何认真的编码来学习/移动到终端并使用 make 文件，或更新的 IDE，例如 Visual Studio。

这是一个简短的脚本，您可以运行将其另存为 bash.sh 之类的东西

```
g++ hello.cpp -O2 -g -c 
g++ hello.o printmessage.cpp -Wall -O2 -o print 
```

然后用 ./print 运行它

# python - 排序不相同的列表Python

> ID：12334933
> 
> 赞同：0
> 
> 时间：2012-09-08T22:18:39.983
> 
> 标签：python, list, sorting

我有两个清单。

一个列表仅包含代码，例如：

```
b3b
3cd
6f6
4d8
96b
00a
774
eb3
607
7e5 
```

另一个列表包含带有名称的代码，例如

```
b3b:John
607:Eric
7e5:Jarrold 
```

但这份名单还没有完成。

我想要什么作为输出，因为另一个不能被删除并且必须按照正确的顺序，例如

```
b3b:John
3cd
6f6
4d8
96b
00a
774
eb3
607:Eric
7e5:Jarrold 
```

已经有了这段代码，但它只返回 True 或 False，但这不是我想要的。

```
list1 = [line.strip() for line in open('list1')]
list2 = [line.strip() for line in open('list2')]

comp = [i[:3] for i in list2]

for i in list1:
    print(i, i in list2) 
```

也许有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T22:23:24.903

您应该使用字典将键映射到名称而不是列表作为第二个数据结构：

```
with open("list1") as f:
    keys = [line.strip() for line in f]
with open("list2") as f:
    names = dict(line.strip().split(":", 1) for line in f) 
```

现在您可以有效地实现您的循环：

```
for k in keys:
    print(k, names.get(k, "")) 
```

`list2`对 的每个条目执行线性搜索`list1`将是相当低效的。除了更好的性能外，字典还是数据含义的更好模型。

# scala - 为什么Scala除了零参数方法还需要无参数方法？

> ID：12334936
> 
> 赞同：36
> 
> 时间：2012-09-08T22:18:59.027
> 
> 标签：scala

我了解零参数方法和无参数方法之间的区别，但我并不真正了解的是使无参数方法成为必要的语言设计选择。

我能想到的缺点：

*   这很令人困惑。每周或每两周，这里或 Scala 邮件列表上都会有关于它的问题。
*   情况很复杂; 我们还必须区分`() => X`和`=> X`。
*   它是模棱两可的：是`x.toFoo(y)`指它所说的，还是`x.toFoo.apply(y)`？（答案：这取决于`x`'`toFoo`方法的重载和 ' 方法上的重载`Foo`，`apply`但如果发生冲突，在您尝试调用它之前您不会看到错误。）
*   它弄乱了运算符风格的方法调用语法：在链接方法时或在末尾避免分号干扰时，没有符号可以代替参数。使用零参数方法，您可以使用空参数列表`()`。

目前，您不能在一个类中同时定义两者：您会收到一条错误消息，指出该方法已定义。它们也都转换为`Function0`.

为什么不直接制作方法`def foo`和`def foo()`完全相同的东西，并允许在有或没有括号的情况下调用它们？它的优点是什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-26T20:35:41.593

# 咖喱，这就是为什么

Daniel 在解释为什么需要无参数方法方面做得很好。我将解释为什么将它们与零参数方法区别开来。

许多人将无参数函数和零参数函数之间的区别视为某种模糊形式的语法糖。事实上，它纯粹是 Scala 如何支持柯里化的产物（为了完整起见，请参阅下文，以更全面地解释柯里化是什么，以及为什么我们都这么喜欢它）。

形式上，一个函数可以有零个或多个参数列表，每个参数列表有零个或多个参数。
这意味着以下内容是有效的：`def a`, `def b()`，还有人为的`def c()()`等等`def d(x: Int)()()(y: Int)`......

一个函数`def foo = ???`有零个参数列表。一个函数`def bar() = ???`只有一个参数列表，参数为零。**引入将这两种形式混为一谈的附加规则会破坏柯里化作为一种​​一致的语言特征**：`def a`在形式上等同于`def b()`和`def c()()`两者；`def d(x: Int)()()(y: Int)`将等同于`def e()(x: Int)(y: Int)()()`。

一种与柯里化无关的情况是在处理 Java 互操作时。Java 不支持柯里化，因此为像`"test".length()`（直接调用`java.lang.String#length()`）这样的零参数方法引入语法糖也可以调用为`"test".length`.

# 柯里化的快速解释

Scala 支持一种名为“currying”的语言特性，以数学家 Haskell Curry 命名。
Currying 允许您使用多个参数列表定义函数，例如：

```
def add(a: Int)(b: Int): Int = a + b
add(2)(3) // 5 
```

这很有用，因为您现在可以`inc`根据 的部分应用来定义`add`：

```
def inc: Int => Int = add(1)
inc(2) // 3 
```

柯里化通常被视为通过库引入控制结构的一种方式，例如：

```
def repeat(n: Int)(thunk: => Any): Unit = (1 to n) foreach { _ => thunk }

repeat(2) {
  println("Hello, world")
}

// Hello, world
// Hello, world 
```

回顾一下，看看如何`repeat`打开另一个使用柯里化的机会：

```
def twice: (=> Any) => Unit = repeat(2)

twice {
  println("Hello, world")
}

// ... you get the picture :-) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-09T15:16:45.433

关于 ML 定期出现的问题的一件好事是有定期的答案。

谁能抗拒一个叫做“我们怎么了？”的话题。

[https://groups.google.com/forum/#!topic/scala-debate/h2Rej7LlB2A](https://groups.google.com/forum/#!topic/scala-debate/h2Rej7LlB2A)

> 来自：martin odersky 日期：2012 年 3 月 2 日，星期五，下午 12:13 主题：回复：[scala-debate] 我们怎么了...
> 
> 有些人认为“我们错了”的是，我们正在努力让 Java 习惯用法在 Scala 中顺利运行。主要的事情是说 def length() 和 def length 是不同的，而且，抱歉，String 是一个 Java 类，所以你必须编写 s.length()，而不是 s.length。我们非常努力地通过承认从 s.length 到 s.length() 的自动转换来掩盖它。这是有问题的。概括这一点，以便在类型系统中识别这两者将是注定要失败的肯定方式。那么你如何消除歧义：
> 
> type Action = () => () def foo: Action
> 
> 那么 foo 是 Action 还是 () 类型？那么 foo() 呢？
> 
> 马丁

我最喜欢那个帖子里的保罗小说：

```
On Fri, Mar 2, 2012 at 10:15 AM, Rex Kerr <ich...@gmail.com> wrote:

>This would leave you unable to distinguish between the two with 
>structural types, but how often is the case when you desperately 
>want to distinguish the two compared to the case where distinguishing 
>between the two is a hassle?

/** Note to maintenance programmer: It is important that this method be
 *  callable by classes which have a 'def foo(): Int' but not by classes which
 *  merely have a 'def foo: Int'.  The correctness of this application depends
 *  on maintaining this distinction.
 *  
 *  Additional note to maintenance programmer: I have moved to zambia.
 *  There is no forwarding address.  You will never find me.
 */
def actOnFoo(...) 
```

因此，该功能的潜在动机是生成这种 ML 线程。

还有一点谷歌学：

> 2010 年 4 月 1 日星期四晚上 8:04，Rex Kerr <[hidden email]> 写道： 2010 年 4 月 1 日星期四下午 1:00，richard emberson <[hidden email]> 写道：
> 
> > > 我假设“def getName：String”与“def getName（）：String”相同
> > 
> > 不，实际上，他们不是。尽管它们都调用了没有参数的方法，但一种是“具有零参数列表的方法”，而另一种是“具有一个空参数列表的方法”。如果您想更加困惑，请尝试 def getName()(): String （并使用该签名创建一个类）！
> > 
> > Scala 将参数表示为列表的列表，而不仅仅是列表，并且
> > 
> > 列表（）！=列表（列表（））
> > 
> > 这是一种奇怪的烦恼，特别是因为两者之间几乎没有区别，而且两者都可以自动转换为函数签名 () => String。
> 
> 真的。事实上，无参数方法和具有空参数列表的方法之间的任何混淆完全是由于 Java 互操作。它们应该是不同的，但是处理 Java 方法将太痛苦了。你能想象每次取一个字符串的长度时都必须写 str.length() 吗？
> 
> 干杯

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-09T00:46:26.177

首先，`() => X`与`=> X`无参数方法完全无关。

现在，写这样的东西看起来很傻：

```
var x() = 5
val y() = 2
x() = x() + y() 
```

现在，如果您不遵循上述与无参数方法的关系，那么您应该查找统一访问原则。以上都是方法声明，都可以用`def`. 也就是说，假设您删除了它们的括号。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-09-09T09:29:51.633

除了提到的约定事实（副作用与非副作用）之外，它还有助于解决以下几种情况：

**有空括号的用处**

```
// short apply syntax

object A {
  def apply() = 33
}

object B {
  def apply   = 33
}

A()   // works
B()   // does not work

// using in place of a curried function

object C {
  def m()() = ()
}

val f: () => () => Unit = C.m 
```

**没有父母的用处**

```
// val <=> def, var <=> two related defs

trait T { def a:   Int; def a_=(v: Int): Unit }
trait U { def a(): Int; def a_=(v: Int): Unit }

def tt(t: T): Unit = t.a += 1  // works
def tu(u: U): Unit = u.a += 1  // does not work

// avoiding clutter with apply the other way round

object D {
  def a   = Vector(1, 2, 3)
  def b() = Vector(1, 2, 3)
}

D.a(0)  // works
D.b(0)  // does not work

// object can stand for no-paren method

trait E
trait F { def f:   E }
trait G { def f(): E }

object H extends F {
  object f extends E  // works
}

object I extends G {
  object f extends E  // does not work
} 
```

因此，就语言的规律性而言，区分是有意义的（特别是对于最后显示的情况）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-08T22:45:36.297

我想说两者都是可能的，因为您可以使用无参数方法访问可变状态：

```
class X(private var x: Int) {
  def inc() { x += 1 }
  def value = x
} 
```

该方法`value`没有副作用（它只访问可变状态）。[Scala 编程中](http://www.artima.com/pins1ed/composition-and-inheritance.html#i1343251059-1)明确提到了这种行为：

> 这种无参数方法在 Scala 中很常见。相比之下，用空括号定义的方法，例如 def height(): Int，称为空括号方法。推荐的约定是在没有参数时使用无参数方法，并且该方法仅通过读取包含对象的字段来访问可变状态（特别是，它不会更改可变状态）。
> 
> 该约定支持统一访问原则 [...]
> 
> 总而言之，Scala 鼓励将不带参数且没有副作用的方法定义为无参数方法，即省略空括号。另一方面，你永远不应该定义一个没有括号的有副作用的方法，因为那样的话，对该方法的调用看起来就像一个字段选择。

# c++ - WebRtc 应用程序中的独立 AGC（自动增益控制）

> ID：12334937
> 
> 赞同：1
> 
> 时间：2012-09-08T22:19:00.727
> 
> 标签：c++, audio, controls, webrtc

我正在尝试使用 WebRtc 库创建一个独立的 AGC。（输入 - wav 文件，输出 - 调整增益的 wav 文件）。但此时我对这个问题有一些问题。

我正在尝试使用在`gain_control.h`文件中声明的函数。当我使用 WebRtcAgc_Process(....) 时，我获得了适用于整个信号的恒定增益，但不适用于取决于输入信号幅度的非线性增益。

可能我应该使用其他功能来达到我的目的吗？如何通过 WebRTC 库实现 AGC？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:54:11.033

AGC 的主要目的是提供推荐的系统麦克风音量，用户可以通过操作系统设置该音量。如果您想应用纯数字增益，您可以将其配置为两种模式之一（从`modules/audio_processing/include/audio_processing.h`，但`gain_control.h`具有类似模式）：

```
// Adaptive mode intended for situations in which an analog volume control
// is unavailable. It operates in a similar fashion to the adaptive analog
// mode, but with scaling instead applied in the digital domain. As with
// the analog mode, it additionally uses a digital compression stage.
kAdaptiveDigital,

// Fixed mode which enables only the digital compression stage also used by
// the two adaptive modes.
//
// It is distinguished from the adaptive modes by considering only a
// short time-window of the input signal. It applies a fixed gain through
// most of the input level range, and compresses (gradually reduces gain
// with increasing level) the input signal at higher levels. This mode is
// preferred on embedded devices where the capture signal level is
// predictable, so that a known gain can be applied.
kFixedDigital 
```

您可以通过 设置这些`WebRtcAgc_Init()`，但除非您需要避免开销，否则我建议只使用 AudioProcessing 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T15:54:56.173

参考[http://osxr.org/android/source/external/webrtc/src/modules/audio_processing/agc/interface/gain_control.h#0133](http://osxr.org/android/source/external/webrtc/src/modules/audio_processing/agc/interface/gain_control.h#0133)

> 增益调整仅在 0135 * 语音活动期间进行。输入语音长度可以是 10ms 或 0136 * 20ms，输出长度相同。

webrtcage_process 快速概览

```
int WebRtcAgc_Process(void* agcInst,
                    const WebRtc_Word16* inNear,
                    const WebRtc_Word16* inNear_H,
                     WebRtc_Word16 samples,
                     WebRtc_Word16* out,
                     WebRtc_Word16* out_H,
                     WebRtc_Word32 inMicLevel,
                     WebRtc_Word32* outMicLevel,
                     WebRtc_Word16 echo,
                     WebRtc_UWord8* saturationWarning); 
```

# mysql - 将一个远程数据库移动/复制到另一个远程数据库

> ID：12334938
> 
> 赞同：1
> 
> 时间：2012-09-08T22:19:04.317
> 
> 标签：mysql, database, heroku, migrate

我正在使用 heroku 来部署我的应用程序。到目前为止，我一直在使用我的应用程序的开发版本，并将一些数据植入其中。我还在 heroku 上设置了一个生产版本。
这两个应用程序都使用 ClearDB 托管的 mysql 数据库来存储数据。
我只是想将数据从开发版本移动到生产版本。
使用 MySql Workbench，我将开发数据导出到一个文件并尝试将其导入到产品数据库，但是我收到了拒绝访问错误，因为它尝试使用生产凭据登录到开发数据库。
数据库具有相同的表/行/列结构。如何从一个中获取数据并将其插入另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:53:37.237

将 Taps gem 添加到您的 Gemfile：

```
gem 'taps' 
```

您应该能够通过以下方式将开发数据提取到本地开发环境：

```
heroku db:pull --app your_development_app_name 
```

然后将其推送到生产环境：

```
heroku db:push --app your_production_app_name 
```

这将完全覆盖数据库架构和数据，因此请务必小心。希望能帮助到你！

_瑞安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T08:22:37.663

您可以使用 'mysql' 和 'mysqldump' 命令行客户端的组合将一个数据库的内容“复制”到另一个数据库。以下是如何执行此操作的示例：

```
mysqldump --single-transaction -u (old_database_username) -p -h (old_database_host) (database_name) | mysql -h (new_host) -u (new_user) -p -D (new_database) 
```

带换行符：

```
mysqldump --single-transaction -u (old_database_username) 
-p -h (old_database_host) (database_name) | mysql -h (new_host)
-u (new_user) -p -D (new_database) 
```

# c# - 如何在没有任何闪烁的情况下在已绘制的面板上移动图片框？

> ID：12334941
> 
> 赞同：3
> 
> 时间：2012-09-08T22:19:25.317
> 
> 标签：c#, winforms, flicker

我一直在使用**双缓冲**面板将图像绘制到自身上，但是当我在其上移动图片框时，它会闪烁和滞后。

我用来移动图片框的代码是：

```
private void pictureBox1_MouseDown(object sender, MouseEventArgs e)
{
    x = e.X;
    y = e.Y;
    panel1.Invalidate();
}

private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left)
    {
        pictureBox1.Left += (e.X - x);
        pictureBox1.Top += (e.Y - y);
    }
}

private void panel1_Paint(object sender, PaintEventArgs e)
{
    e.Graphics.DrawImage(pictureBox2.BackgroundImage, new Rectangle(pictureBox2.Location, pictureBox2.Size));       
} 
```

如您所见，不可见的图片框2被绘制到双缓冲面板上。但是，当我移动 pictureBox1 时，它会在面板上闪烁。是的，我一直在使用**Invalidate() 面板**

我使用的双**缓冲面板类**代码是：

```
public class DoubleBufferPanel : Panel
{

    public DoubleBufferPanel()
    {

        // Set the value of the double-buffering style bits to true.
        this.DoubleBuffered = true;

        this.SetStyle(ControlStyles.DoubleBuffer | ControlStyles.UserPaint |
         ControlStyles.AllPaintingInWmPaint, true);

        this.UpdateStyles();

    }

} 
```

这是我试图在没有任何闪烁的情况下实现的图片。（未被鼠标移动的图片框正在绘制到面板上）。我无法做到这一点而不会看到闪烁 ![在此处输入图像描述](../Images/d28ada76ab86b016285836bc094790ad.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:22:00.633

它滞后是因为您调用`Invalidate`而不是`Refresh`. 尝试在 Form 上设置双缓冲。如果没有帮助，请阅读一些关于自定义控件的教程。 [关联](http://www.google.be/search?q=flickering%20custom%20controls%20c#)

# azure - Azure 虚拟机中托管的数据库与托管在普通远程主机上的数据库相同吗？

> ID：12334950
> 
> 赞同：2
> 
> 时间：2012-09-08T22:22:08.437
> 
> 标签：azure, azure-virtual-machine

我想在 Azure 虚拟机中托管一个 firebird 数据库。通常，我会在程序中指出这样的连接：

```
hostname:databasename 
```

....连接到远程主机。在 azure 中，您不能这样做。

我需要连接类似的东西：

```
 ?.cloudapp.net:someport:databasename 
```

客户端会`?.cloudapp.net`认为这`someport`是与数据库服务器通信的端口。

所以看来我需要一个代理来登录连接到 Windows azure 云资源，然后客户端将使用代理与数据库服务器通信。这看起来很麻烦——还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T00:43:58.397

我不完全确定您在 Azure 中的云架构，但假设您有一个安装了数据库的 VM，您应该能够打开一个公共端点（通过门户网站 manage.windowsazure.com 为您的云服务）并连接到通过它的公共 IP 地址和端口）。

Windows Azure 确实具有更高级的功能，允许您通过端口转发连接到云服务中的特定 VM。

Michael Washam 有一篇关于“Windows Azure 虚拟机”的精彩博文：http: [//michaelwasham.com/2012/06/08/understanding-windows-azure-virtual-machines/](http://michaelwasham.com/2012/06/08/understanding-windows-azure-virtual-machines/)

> 云服务的架构使端点配置变得有趣。由于每个云服务都有一个公共 IP 地址，但其中可以驻留多个虚拟机，您如何以非负载平衡的方式直接寻址各个服务器？
> 
> 端口转发允许您在特定 VM 上配置端点，侦听任何临时端口，然后将其转发到正确的内部端口。

# qt - 没有信号/插槽的 QtcpSocket

> ID：12334958
> 
> 赞同：1
> 
> 时间：2012-09-08T22:23:09.127
> 
> 标签：qt, qt4, qtcpsocket

是否可以在不使用**readyRead**插槽的情况下使用**QTcpSocket ？**

 **我尝试使用此代码从 tcp 服务器读取数据：

```
QByteArray ba;

forever
{
sck.waitForReadyRead();
ba.append( sck.readAll() );

if (sck.bytesAvailable() == 0)
  break;
} 
```

但有时我没有收到来自服务器的所有数据！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T23:43:42.813

是的，有可能。TCP是面向流的，你不能像那样退出迭代。[您在QAbstractSocket](http://doc.qt.nokia.com/4.7-snapshot/qabstractsocket.html)文档中有一个示例。

如您所见，您必须继续阅读，直到连接关闭（[waitForReadyRead](http://doc.qt.nokia.com/4.7-snapshot/qabstractsocket.html#waitForReadyRead) () 方法返回 false）或直到您发送一些终止序列，这取决于您。**

# jquery - attr 后回调

> ID：12334964
> 
> 赞同：1
> 
> 时间：2012-09-08T22:23:47.003
> 
> 标签：jquery, forms, callback

我正在尝试清除表单中的所有复选框，然后在一个函数中提交表单，但表单似乎在未选中复选框之前已提交。有没有办法通过回调来做到这一点，还是有另一种方法完全可以解决这个问题？

该函数如下所示：

```
function clear_checkboxes() {
    $(".addtomailer").attr('checked', false);
    $('#addresses').submit();
    return false;
} 
```

该函数使用表单按钮调用，.addtomailer 是所有复选框的类，#addresses 是表单 ID。

（我确实发现了很多问题，询问如何执行此操作，但所有提问者实际上都在尝试测试项目何时加载，所以这个问题从未真正得到回答）

更新：使用最新版本的 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:26:30.243

尝试使用`.prop`而不是`.attr`

```
$(".addtomailer").prop('checked', false); 
```

通常，当“属性”是布尔值时使用“prop”。（选中、禁用、选中等）。“attr”没有正确刷新元素的状态。

[http://api.jquery.com/prop/](http://api.jquery.com/prop/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T22:30:00.273

您需要`checked`从每个复选框中删除属性并将其值设置为 false。

```
 $(".addtomailer").removeAttr('checked').val(false); 
```

# python - python3中的解析器不通过argparse从命令行获取分隔符值

> ID：12334965
> 
> 赞同：3
> 
> 时间：2012-09-08T22:23:49.183
> 
> 标签：python, command-line-arguments, delimiter, argparse

我已经编写了一个简单的脚本作为我`awk`/`sed`要求的高级工具。在脚本中，我根据查询文件的一列中的值比较两个文件，然后从主文件中提取整个条目。该脚本允许您为每个文件输入列值和分隔符。

问题是从命令行给出时脚本无法识别“分隔符”选项。

这是我的代码（部分）：

```
##- - - - - - - -- - - - - - Arguments - - - - - - - - - - - - - -##
parser = argparse.ArgumentParser()

## Command line options
parser.add_argument("-m",  "--master",     dest="master", help="master file")
parser.add_argument("-q",  "--query",      dest="query",  help="queries to be extracted")
parser.add_argument("-d",  "--delimiter",  dest="delimiter",  default='\t', help="delimiter in master")
parser.add_argument("-p",  "--position",   dest="position",   default='1',  help="position/column of value in master")
parser.add_argument("-d2", "--delimiter2", dest="delimiter2", default='\t', help="delimiter in query")
parser.add_argument("-p2", "--position2",  dest="position2",  default='1',  help="position/column of value in query")

args = parser.parse_args()

def Extractor(master, query):

    out_file = ('%s_matched_%s' % (query,master))
    fh_out = open(out_file, 'w')

    query_set = () ## To unique query set
    for i in query:
        key = i.split('args.delimiter2')[int(args.position2)] ## Key is the value on which matching will be done
        query_set.add(key) 
```

如您所见，我从命令行获取“查询文件”分隔符的选项，并通过在脚本中使用它们`argparse`，但这不起作用。仅当我在脚本中明确提及分隔符时才有效，例如：

```
key = i.split('\t')[args.position2] ## Key is the value on which matching will be done 
```

我给出的命令行选项是：

```
$ py3 ExtractHeaders_v01.py -m ABC.csv -q XYZ.list -d2 \t -d , -p 1 -p2 0 
```

在哪里

*   `ABC.csv`是从中提取条目的主文件。
    *   第二列将用于匹配 ( `-p 1`)
    *   它的分隔符是逗号 ( `-d ,`)
*   `XYZ.list`是查询文件。
    *   第一列将用于匹配 ( `-p2 0`)
    *   它的分隔符是制表符 ( `-d2 \t`)

请帮助我理解为什么从命令行给出分隔符时脚本不使用分隔符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T22:34:34.623

您的 shell 正在解释`\t`命令行中的 ，而传递给 Python 的内容很可能是单个`t`. 尝试`\\t`或`'\t'`将文字的两个字符转义序列放入`argv`. 然后你需要在 Python 中取消转义这个字符串：

```
delimiter = delimiter.decode("string-escape") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T22:38:48.597

您也可以`Tab`在 *nix shell（例如 bash）中传递字符，方法是按下`Ctrl+V`后跟`Tab`引号（单引号或双引号），即键入`"` `Ctrl+V` `Tab` `"`.

# c# - 新对象，但错误：objectstatemanager 中已存在具有相同键的对象。objectstatemanager 无法跟踪多个 (...)

> ID：12334968
> 
> 赞同：0
> 
> 时间：2012-09-08T22:24:44.037
> 
> 标签：c#, entity-framework, linq-to-entities, many-to-many, objectcontext

`Student`和`Teacher`我的关系`many-to-many`。

当我已经`Student`存在于数据库中并想添加新的`Teacher`时，我尝试下面的代码。

但在线： `addedTeachers.ForEach(a => dbStudent.Teacher.Add(a));`我得到错误

“ `an object with the same key already exists in the objectstatemanager. the objectstatemanager cannot track multiple objects with the same key`”。

怎么了？

```
void Update(Student s)
{
    using(var context = new MyEntities(connectionString))
    {
        context.ContextOptions.LazyLoadingEnabled = false;
        var dbStudent = context.Student.Include("Teacher").Where(a => a.Id == s.Id).SingleOrDefault();

        var dbTeachers = dbStudent.Teacher.ToList();
        var newTeachers = s.Teacher.ToList();

        var addedTeachers = newTeachers.Except(dbTeachers).ToList();
        var deletedTeachers = dbTeachers.Except(newTeachers).ToList();

        addedTeachers.ForEach(a => dbStudent.Teacher.Add(a));
        deletedTeachers.ForEach(a => dbStudent.Teacher.Remove(a));

        context.SaveChanges();
    }
} 
```

**编辑**

还有什么奇怪的：

就在这一行之前的异常`dbStudent.Teacher.Count`是0。但是在异常之后是1。当然`addedTeachers.Count`也是1，但是调试器没有到达下一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T01:55:12.707

问题是`s`并且`dbStudent`具有相同的主键。您`Teacher`在`s.Teacher`集合中的实例可能会引用该`s`实例。然后，当您调用时`addedTeachers.ForEach(a => dbStudent.Teacher.Add(a));`，EF 将识别链接到教师实例的所有对象并尝试添加它们。

尝试

```
addedTeachers.ForEach(a => { a.Students.Remove(s);
                             a.Students.Add(dbStudent);
                             dbStudent.Teacher.Add(a);}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T23:06:16.247

我认为你的问题是你的[`Except`](http://msdn.microsoft.com/en-us/library/bb336390)陈述。它使用`Default`比较器比较您的集合项目，当您实际打算比较您的教师对象的值时，比较器会查看项目是否引用内存中的同一对象。

解决方案是提供您自己的`IEqualityComparer`并准确指定`Teacher`对象应如何相互比较。[MSDN](http://msdn.microsoft.com/en-us/library/bb336390)提供了一个很好的例子来说明如何做到这一点。

# php - 显示多个类别codeigniter

> ID：12334969
> 
> 赞同：0
> 
> 时间：2012-09-08T22:24:48.323
> 
> 标签：php, mysql, codeigniter

我有一个这种格式的关系数据库

```
Table: posts
Columns: post_id,post_title,post_content

Table: categories
Columns: category_id,category_name

Table: posts_categories
Columns: post_id,category_id 
```

帖子可以有多个类别，所以我使用帖子和类别ID将它们存储在posts_categories中，当我使用以下查询从数据库中获取结果时，它只显示最后一个类别，是否可以显示所有类别，否则我必须运行单独的查询，这是我的代码。

```
 $this->db->select("p.*,pc.*,c.*");
    $this->db->where('post_id', $id); 
    $this->db->from('posts AS p');
    $this->db->join('posts_categories AS pc', 'pc.post_id = p.post_id', 'inner');
    $this->db->join('categories AS c', 'pc.category_id = c.category_id', 'inner');
    $q = $this->db->get(); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:52:11.367

您没有提及您实际选择的字段。但是，您可以`SELECT p.title, c.category_name`并且在进行查询（在问题中提到）之后，您的结果中应该有多行，其中包含帖子标题和该帖子的类别名称。

现在，如果您愿意，您可以按 php 中的帖子对这些类别进行分组，从 db 结果构建一个新数组。

# c++ - 复数方程在c ++中给出错误结果

> ID：12334970
> 
> 赞同：0
> 
> 时间：2012-09-08T22:24:59.547
> 
> 标签：c++, complex-numbers

嗨，我得到了错误的预期结果，我认为这是对 std::complex 的影响，这是我应该根据[matlab](http://pastebin.com/2JwZZbBv)得到的结果，如果你运行下面的代码，这是[结果](http://pastebin.com/iZuL5FPr)，这是我得到的结果，基本上一切都是只是南，我哪里做错了？

```
#include<cmath>
#include<complex>
#include<new>
#include<iostream>

    int sign(double x){
        if(x > 0)    {
            return 1;
        }
        else if(x < 0)    {
            return -1;
        }
        else    {
            return 0;
        }
    }

    int main(){

      double alpha = 1.8;
      double beta = .35;
      double sigma = 1;
      double mu = 0.5;
      double PI = 3.1416; 
      int N = 8192;
      double h = 0.01;
      std::complex<double>phi[N]; 
      double* in_t2= new double[N]; 

     double* abs_t = new double [N]; 
     double* sign_t = new double [N];

     std::complex<double> I(0,1);
     double s = 0.01;

     s = 1/(h*N);
     std::cout<<s;
     for (int i=1; i<=N; i++) {
       in_t2[i-1] = 2*PI * (i - 1 - N/2)*s; // x1

     }

     for (int i = 0; i < N; i++){
       abs_t[i] = std::abs(in_t2[i]);
     }

     for (int i = 0; i < N; i++){
       sign_t[i] = sign(in_t2[i]);
     }

      for (int i = 0; i < N; i++){ 
        //where i suspect the error is..

        phi[i] = pow(abs_t[i],sign_t[i]);
       }

      for ( int i = 0; i< N; i++){
        if (in_t2[i] == 0){
          phi[i] = 0;
        }
        phi[i] = std::exp(phi[i]);
      }

      return 0;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T22:38:55.940

`pow`这里调用的函数

```
pow((-1.0*abs_t[i]), alpha) 
```

是用于`double`参数和结果的那个，它返回一个 NaN 表示负基数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T22:40:23.573

`std::pow`将返回传递给它的相同类型。

如果需要`std::complex`从 中返回a，则`std::pow()`必须将 a 传递`std::complex`给函数。

您可以通过转换任何表达式轻松解决此问题

```
pow( expression ) 
```

至：

```
pow( std::complex( expression ) ) 
```

# apache - 摆脱 Apache 虚拟主机的结束正斜杠

> ID：12334971
> 
> 赞同：3
> 
> 时间：2012-09-08T22:25:00.503
> 
> 标签：apache, virtualhost

我已经在 Windows 7 上设置了 Apache，以便有一些虚拟主机用于本地开发目的。
该`httpd-vhosts.conf`文件对于所有虚拟主机都具有以下格式：

```
<VirtualHost *:80>
   ServerName example.dev
   DocumentRoot "C:/Program Files (x86)/Apache2.2/htdocs/example.dev/"  # <--removing the forwardslash here doesn't fix this
</VirtualHost> 
```

Windows`hosts`文件中的每个都有：

```
127.0.0.1       example.dev 
```

现在，困扰我的是，每次我`example.dev`在地址栏中输入时，它都会添加一个额外的尾部正斜杠，变成`example.com/`. 我为我所有的虚拟主机都得到了这个。**简单地**访问`localhost`不会添加尾部正斜杠。这不会**发生**：. 没什么大不了的，但它困扰着我，我找不到解决方案。 ****`localhost/`**** 

 ****有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T23:10:53.893

额外的斜线不是由您的 Apache 配置引起或避免的，它是浏览器的“功能”，它构成浏览器的 HTTP 参数，向 Web 服务器创建 HTTP POST 或 GET 请求。

为了请求 www.example.com 的主页，HTTP 浏览器生成的代码类似于：

```
GET / HTTP/1.1
Host: www.example.com
User-Agent: Mozilla/4.0 
```

并且浏览器只是在 GET/POST 之后显示主机名加上字符串的连接

可能是某些浏览器不会显示它，但它不会改变 HTTP 请求正在请求 /

localhost 的情况在浏览器上是不同的策略，它只是一个别名（HTTP 的 Host: 字段不是 localhost）****

# java - 时间vs日期vs日历java

> ID：12334972
> 
> 赞同：5
> 
> 时间：2012-09-08T22:25:30.670
> 
> 标签：java, android, date, time, calendar

好吧，在我的应用程序中，我想获取当前日期和月份以及本地时间（currentTimeZone 小时），并根据其值显示一些内容。

我已经阅读了几个解决方案，并且我使用了以下内容：

```
Calendar c = Calendar.getInstance(); 
            int day=c.get(Calendar.DATE);
            int month=c.get(Calendar.MONTH); 
```

或这个

```
Time today = new Time(Time.getCurrentTimezone());
            today.setToNow();
            int day2=today.monthDay;
            int month2=today.month; 
```

我的问题是：

1）考虑到他们的结果，哪一个更“稳定”？我的意思是它不会有任何问题。

2）此外，他们是否都考虑了时区？我认为第二个可以，但是日历呢？

3）我尝试了我发现的这段代码：

```
SimpleDateFormat s = new SimpleDateFormat("ddMMyyyyhhmmss");
            String format = s.format(new Date()); 
```

我得到 Date() 必须有参数的错误。很奇怪，因为在每个答案中他们都这样使用它。

怎么了？

4）你建议我用什么？我唯一想要的是当前月份、日期、小时与一些存储在内存中的简单比较。（例如，如果是 1 月 29 日，则显示该事件。如果是上午 19 点，则发送通知等。）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-08T22:40:04.040

> 1）*考虑到他们的结果，哪一个更“稳定”？我的意思是它不会有任何问题*。

它们既稳定又经过很好的测试，尤其`Calendar`是从 JDK1.1 开始就在 Java API 中。同样来自以下[文档](http://developer.android.com/reference/android/text/format/Time.html)：`Time`

> Calendar 和 GregorianCalendar 类的替代方案。Time 类的一个实例表示时间中的一个时刻，以秒精度指定。它是仿照 struct tm 建模的，实际上是使用 struct tm 来实现大部分功能。

`Time`，恕我直言，工作起来要容易得多`Calendar`。

> 2）*此外，他们是否都考虑了时区？我认为第二个可以，但是日历呢？*

是的，他们有。您可以指定一个`TimeZone`using [`Calendar.getInstance(java.util.TimeZone)`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#getInstance%28java.util.TimeZone%29)。否则，将使用默认值。

> 3）*我尝试了我发现的这段代码：*

代码工作得很好。例如，确保您使用的是`new java.util.Date()`代替`java.sql.Date`。

> 4）*你建议我用什么？我唯一想要的是当前月份、日期、小时与一些存储在内存中的简单比较。（例如，如果是 1 月 29 日，则显示该事件。如果是上午 19 点，则发送通知等。）*

这真的是个人选择的问题。`Calendar`例如，使用来比较今天是否是 1 月 29 日，您可以简单地使用以下命令：

```
Calendar today = Calendar.getInstance();
int dayOfMonth = today.get(Calendar.DAY_OF_MONTH);
int month = today.get(Calendar.MONTH);
if (month == Calendar.JANUARY && dayOfMonth == 29) {
  // January 29
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T18:18:01.347

在我的 Android 应用程序中，我将日期保存在 SQLite 中。但是，SQLite 不接受 Date 数据类型。所以我像这样将它转换为 String 以便使用格式**YYYY-MM-DD**：

```
 Time today = new Time(Time.getCurrentTimezone());
            today.setToNow();
            int year = today.year;
            int month = today.month;
            int day = today.monthDay;

            Calendar gregorianCalendar = new GregorianCalendar(year, month, day);
            String entryDate =  gregorianCalendar.get(Calendar.YEAR) + "-" + gregorianCalendar.get(Calendar.MONTH) + "-" + gregorianCalendar.get(Calendar.DAY_OF_MONTH); 
```

而且效果很好。我不关心性能差异，因为它们很可能是疏忽大意的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-06T02:51:54.620

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-21T15:17:35.480

android.text.format.Time 在 API 级别 22 中已弃用。请改用 GregorianCalendar。

访问[http://developer.android.com/reference/android/text/format/Time.html](http://developer.android.com/reference/android/text/format/Time.html)

据我所知，Time 类中存在一些问题，例如当参数小于 1970.1.1 的 julianDay 时，Time.setJulianDay(int julianDay) 会返回错误值

并且在 1987-1991 年 4 月之间也发生了一些错误（可能是 Time.set(long millis)，我不记得了）。

# properties - 财产问题

> ID：12334973
> 
> 赞同：0
> 
> 时间：2012-09-08T22:26:01.590
> 
> 标签：properties, synthesize

我是 Objective C 的新手，我在 C++ 上编程，现在我不知道如何使用@property ...以及何时使用它我对此很感兴趣，我不明白

现在我正在尝试用 C++ 制作一个项目并尝试以客观 C 方式输入

我正在尝试制作（CHECKERS GAME）并且有 2 个类 1- Board 2- Cell ...这是 Cell Class.h

```
#import <Foundation/Foundation.h>

@interface Cell : NSObject

{
    int number;
    char checker;
}
@end 
```

在船上 Class.h

```
#import <Foundation/Foundation.h>
#import "Cell.h"
//I dont know use it or not :S the @class
//@class Cell;

@interface Board : Cell
{
  //is the definition right ?
  Cell *DrawCell[64];

} 
```

当我输入 board.m

```
 [ DrawCell [i] checker] = 'X' ; 
```

它给出了这个错误：
不允许分配给 Objective-C 消息的“只读”返回结果

虽然我打字

```
@property (nonatomic) int number ;
@property (nonatomic) char checker; 
```

我试图合成它们，但它也显示了这个错误

请解释做什么、为什么做以及什么时候做

谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:32:08.777

你必须使用：

```
[DrawCell [i] setChecker:'X'] 
```

或者

```
DrawCell[i].checker = 'X' 
```

像你一样调用和做一样

```
DrawCell[i].GetChecker() = 'X' 
```

在 C++ 中，具有此定义

```
class Cell {
  public:
    char GetChecker() { return _checker; }
    void SetChecker(char newVal) { _checker = newVal; }
  private:
    char _checker;
} 
```

# postgresql - 在 Heroku postgres 上设置语言环境

> ID：12334986
> 
> 赞同：9
> 
> 时间：2012-09-08T22:28:19.793
> 
> 标签：postgresql, heroku

我在 Heroku 使用 Basic 数据库计划。这在支持语言环境的 Postgres 9.1 上运行。我在我的应用程序中排序时遇到问题，因为字符 ÅÄÖ 未得到正确处理（在瑞典应该如此）。

要设置的设置是`LC_COLLATE`，它处理字符串排序。问题是我找不到任何方法在 Heroku 上设置它。创建的数据库获取`lc_collate=en_US.UTF-8`，但我需要将其设置为`sv_SE.UTF-8`.

`LC_COLLATE`创建数据库时无法更改此设置，因此我无法通过 psql 控制台更改它。

那么，我该如何设置呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T03:23:55.043

您是正确的，不能更改数据库的默认排序规则；`LC_COLLATE`是在 Heroku 数据库服务器上设置的环境变量，它不在您的控制范围内，并且在创建数据库之前已经设置。但是，您可以为各个列设置默认排序规则：

```
CREATE TABLE new_table (
    foo varchar COLLATE "sv_SE.UTF-8",
    bar varchar COLLATE "sv_SE.UTF-8"
);

ALTER TABLE existing_table ALTER COLUMN baz TYPE varchar COLLATE "sv_SE.UTF-8"; 
```

更多信息，请参见[22.2。PostgreSQL 手册中的排序规则支持](http://www.postgresql.org/docs/9.1/static/collation.html)。

您可能需要也可能不需要`CREATE COLLATION`首先。此外，所有这一切都取决于安装了正确语言环境数据的 Heroku 数据库服务器——尽管如果他们没有安装，您可能会很好地要求部署它，因为它不会伤害任何人。

如果做不到这一点，您当然可以在 EC2 中运行您自己的 PostgreSQL 实例，并使用您想要的任何自定义设置。这需要投入管理时间，但老实说运行 9.1 非常简单，甚至包括流复制。甚至可能更便宜。缺点是保持数据库运行成为您的问题，而不是 Heroku 操作团队的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-04T10:31:49.907

我通过创建一个改变相关列的排序规则的迁移解决了这个问题（就像 willglyn 建议的那样）：

```
class SetSwedishCollationForStores < ActiveRecord::Migration
  def up
    execute 'ALTER TABLE stores ALTER COLUMN city  TYPE varchar COLLATE "sv_SE";' 
    execute 'ALTER TABLE stores ALTER COLUMN title TYPE varchar COLLATE "sv_SE";' 
  end
end 
```

# html - angularjs 是否能够根据关键字进行过滤？

> ID：12334990
> 
> 赞同：1
> 
> 时间：2012-09-08T22:29:51.553
> 
> 标签：html, angularjs

我在mysql中有30个类别。我有 450 个子类别，它们与另一个表中的 30 个类别相关。

类别表
**ID _ 标题 _ 关键字**
1 _ 动物 _ 动物、动物、宠物、鹦鹉
2 _ 书籍 _ 书籍、书籍、教育
n _ xxx _ xxx

子类别表
**id _ ref _ title _ 关键字**
1 _ 1 _ 猫 _ 猫、波斯猫、孟加拉猫
2 _ 1 _ 狗 _ 狗、拉布拉多犬、金毛猎犬
3 _ 2 _ 经典 _ 达芬奇密码、书籍、书籍、经典书籍

我需要将过滤器实现到文本字段。如果用户在文本字段中输入 labrador，则显示关键字中包含“labrador”的类别或/和子类别。在这种情况下，将出现“狗”子类别！

我知道这是使用 jquery 完成的。但是无论如何用angularJs来实现这个？如果你有一个 jsfiddle 那就太棒了！：） 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T02:33:06.123

[这个小提琴](http://jsfiddle.net/NxZVt/1/)可以帮助你开始。尝试在文本框中输入“拉布拉多”，注意第二个下拉菜单只显示狗。如果您输入“波斯”，则第二个下拉菜单仅显示猫。

大部分工作发生在子类别[选择](http://docs.angularjs.org/api/ng.directive%3aselect)过滤器中`ng-options`：

```
<select ng-model="selectedSubCategory" ng-options="c.title for c in subcategories | filter:{ref: selectedCategory.id, keywords:keyword}"></select> 
```

[filter](http://docs.angularjs.org/api/ng.filter%3afilter)过滤器允许您通过多个字段限制绑定数组。在此示例中，它通过两件事进行过滤：

1.  基于`ref`第一个选择下拉菜单中的`subcategories`。`selectedCategory`这本身仅显示与当前选择的类别匹配的子类别。
2.  基于`keywords`在输入文本框中键入`subcategories`的内容。`keyword`这意味着当您在文本框中输入内容时，模型中的值将被更新，`$scope.keyword`并自动过滤`subcategories`任何`keywords`包含输入文本的内容。

**更新：**在看到 bfricka 的拍摄后，我可能误解了你的问题。我[调整了小提琴](http://jsfiddle.net/NxZVt/3/)并添加`allCategories`到模型组合`categories`和`subcategories`过滤器中，仅针对在显示结果中键入的关键字`ng-repeat`：

```
<div ng-repeat="c in allCategories | filter:{keywords:keyword}">{{c}}</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T03:34:27.280

我选择了一条不同的道路。这只是使用一些下划线过滤器修改模型。这有点粗糙，但它可能是一个很好的起点。

[http://jsfiddle.net/bfricka/J3kDS/](http://jsfiddle.net/bfricka/J3kDS/)

# android - 在我的活动中保留切换按钮状态

> ID：12334991
> 
> 赞同：1
> 
> 时间：2012-09-08T22:29:54.893
> 
> 标签：android, togglebutton

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.some_layout);
    toggleButton=(ToggleButton) findViewById(R.id.toggleButton1);
}
@Override
public void onSaveInstanceState(Bundle save) {
    super.onSaveInstanceState(save);
    save.putBoolean("ToggleButtonState", toggleButton.isChecked());
}
@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    toggleButton.setChecked(savedInstanceState.getBoolean("ToggleButtonState",false);
} 
```

看起来它应该可以工作，但是如果我执行以下操作：

1.  通过应用程序菜单上的图标运行我的应用程序
2.  检查切换按钮
3.  按返回按钮返回主屏幕
4.  再次从其图标激活我的应用程序

我看到我的切换按钮未选中，为什么会这样？我该如何克服呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T23:11:16.887

我错过了保存和恢复方法的用途，但为了实现我正在寻找的功能，我做了以下事情：

```
public class MainActivity extends Activity {

    private ToggleButton toggleButton;
    private static Bundle bundle = new Bundle();
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        toggleButton = (ToggleButton)findViewById(R.id.toggleButton1);
    }

    @Override
    public void onPause() {
        super.onPause();
        bundle.putBoolean("ToggleButtonState", toggleButton.isChecked());
    }

    @Override
    public void onResume() {
        super.onResume();
        toggleButton.setChecked(bundle.getBoolean("ToggleButtonState",false));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T22:54:10.990

这是我的代码

```
package com.example.stackoverflow;

import android.app.Activity;
import android.os.Bundle;

import android.widget.ToggleButton;

public class MainActivity extends Activity {
    ToggleButton toggleButton;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        toggleButton = (ToggleButton)findViewById(R.id.toggleButton1);
    }

    @Override
    public void onSaveInstanceState(Bundle save) {
        super.onSaveInstanceState(save);
        save.putBoolean("ToggleButtonState", toggleButton.isChecked());
    }

    @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);
        toggleButton.setChecked(savedInstanceState.getBoolean("ToggleButtonState",false));
    }
} 
```

# configuration - Bind9 域可访问性

> ID：12334999
> 
> 赞同：0
> 
> 时间：2012-09-08T22:31:39.867
> 
> 标签：configuration, dns, bind

我在配置 bind9 时遇到问题。我的问题是 dig 没有显示任何错误，并且我的域可以从某些地方访问，但不能从其他地方访问。首先，我认为这是由于刷新 dnses 需要时间，但似乎我做错了什么（我做了一些更改大约一个多星期）；（这是我的区域文件：

```
$TTL 86400
$ORIGIN ukbannersbroker.org.
@          IN     SOA    ks363911.kimsufi.com. root.ukbannersbroker.org. (
            2012092701 ;; serial
            1200       ;; refresh
            1200       ;; retry
            2419200 ;; expire
            86400     ;; TTL
            )
@                          IN     NS      ks363911.kimsufi.com.
@                          IN     NS      ns.kimsufi.com.

@                          IN     A        91.121.182.180
ns1                      IN       A        91.121.182.180
ns2                      IN       A        213.186.33.199
mail                    IN        A        91.121.182.180
www                      IN       A        91.121.182.180 
```

我认为这是我的一些愚蠢的错误。提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T06:18:06.870

您的服务器仍然显示序列号为 2012090903 的域版本。您是`rndc reload`在编辑区域文件后进行的吗？