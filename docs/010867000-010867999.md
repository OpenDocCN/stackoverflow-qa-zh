# StackOverflow 问答 10867000-10867999

# php - 从 PHP 使用 DOTNET 时遇到问题。

> ID：10867001
> 
> 赞同：4
> 
> 时间：2012-06-03T00:28:51.237
> 
> 标签：php, .net, iis-7, windows-server-2008

我一直在尝试通过 com 从 PHP 调用 .net 程序集（使用 DOTNET()）。似乎 php 正在找到 DLL 并正确初始化，但由于某种原因我看不到/使用这些方法。任何人都知道我可以如何解决这个问题？

这是我用来调用 .net 类的 php 代码。当我调用它时，输出是“hello1 hello2”。当我尝试通过 $csclass->ModelBuilder("","") 直接调用该函数时，我收到一个 500 服务器错误，指出它找不到该函数。

```
<?php
echo "hello1";
try{
$csclass = new DOTNET("ModelBuilder, Version=1.0.0.0, Culture=neutral, PublicKeyToken=1208136d23b48dc5",
                      "ModelBuilder.ModelBuilder2");

$class_methods = get_class_methods($csclass);

foreach ($class_methods as $method_name) {
    echo "$method_name\n";
}

} catch (Exception $e) {
    echo 'Caught exception: ',  $e->getMessage(), "\n";
}
echo "hello2";
?> 
```

这是我试图调用的程序集中的类（使用 .net 3.5 构建，使用强名称签名，并使用 gacutil 注册）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using OfficeOpenXml;
using System.Runtime.InteropServices;

namespace ModelBuilder
{    
    [ClassInterface(ClassInterfaceType.AutoDual)]
    [ComVisible(true)]
    public class ModelBuilder2
    {
        [ComVisible(true)]
        public Boolean BuildModel(String outputFileLoc,String excelTemplateFile)
        {
            try
            {
                //do stuff
            return true;
        }
        catch (Exception e)
        {                
            return false;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T03:32:31.870

`get_class_methods()`不适用于 Dotnet 类对象。那东西是一个代理，它的行为不像普通的 php 对象那样。

如果您真的专注于列出对象的方法，那么您需要考虑在您的 .NET 对象上实现 IDispatch。但是，如果您的主要目标是简单地*使用*.NET 对象，而您列出这些方法的尝试只是为了诊断为什么不起作用，那么我有一些建议给您*。*

1.  而不是使用`gacutil`，考虑是否可以将所需的DLL插入到php目录中，即php.exe所在的位置。如果`php.exe`位于`c:\php5\php.exe`，则将您的程序集复制到`c:\php5`.

2.  如果您遵循上述建议，则无需对 .NET 程序集进行强命名。如果您打算对其进行 GAC，则需要对其进行强命名。正如我所说，你不需要 GAC 它，以便用 php.ini 加载它。如果将程序集复制到 PHP 目录中，则可以使用未签名的程序集。

3.  `php.exe`对于早期的开发和探索，请从命令行使用该程序，而不是使用 IIS 通过 Web 请求启动 php。这使您可以直接查看错误消息，而不必担心来自 IIS 的 500 个错误。

* * *

## 例子

假设这是 C# 代码：

```
using System;
namespace Ionic
{
    public class MathEx
    {
        System.Random rnd;
        public MathEx ()
        {
            rnd = new System.Random();
        }

        public int RandomEven()
        {
            return rnd.Next()*2;
        }
    }
} 
```

从命令行编译它，如下所示：

```
c:\net3.5\csc.exe /t:library /out:Ionic.MathEx.dll MathEx.cs 
```

将程序集复制到包含 php.exe 的目录：

```
copy Ionic.MathEx.dll \php
        1 file(s) copied. 
```

然后，假设我有一个名为 mathex.php 的 php 脚本，其中包含以下内容：

```
<?php
$my_assembly = 'Ionic.MathEx'; // name of the dll without the .dll suffix
$clz = new DOTNET($my_assembly, 'Ionic.MathEx');
for ($i=0; $i<5; $i++) {
    echo $i . " " . $clz->RandomEven() . "\n";
}
?> 
```

...如果我以这种方式从命令行运行它：

```
\php\php.exe  mathex.php 
```

...然后我得到这些结果：

```
0 -1083602762
1 1535669896
2 -86761710
3 -1204365564
4 459406052 
```

* * *

**诺塔贝内**

我尝试对使用 .NET 4.0 编译的程序集执行此操作，但它不起作用，给了我一条关于 .NET 运行时不匹配的错误消息。像这样：

```
Fatal error: Uncaught exception 'com_exception' with message 'Failed to instantiate .Net object
[CreateInstance] [0x8013101b] ' in C:\dev\php\mathEx.php:6
Stack trace:
#0 C:\dev\php\mathEx.php(6): dotnet->dotnet('Ionic.MathEx', 'Ionic.MathEx')
#1 {main}
  thrown in C:\dev\php\mathEx.php on line 6 
```

`0x8013101b`表示运行时不匹配 - 程序集的运行时版本与尝试加载程序集的应用程序的运行时版本不匹配。

由此我得出结论，编译 php5 以支持 .NET 2.0（包括 3.0 和 3.5）。.NET 4.0 的运行时版本已更改，因此使用 .NET 4.0 编译器（包括 VS2010）编译的程序集将无法与 php5.exe 一起使用。解决方法是仅使用 .NET 2.0 或 3.5 编译器（VS2005、vs2008）进行编译。

# c++ - mipsel-linux-objdump 无法识别 mipsel-linux-g++ 对象

> ID：10867007
> 
> 赞同：0
> 
> 时间：2012-06-03T00:30:41.923
> 
> 标签：c++, linux, gcc, embedded, openwrt

我正在使用 OpenWrt[工具链](http://downloads.openwrt.org/kamikaze/8.09.2/brcm47xx/)来构建一个 C++ 应用程序，该应用程序使用了一个 C 库，但我怀疑这是否相关。

我有两个文件`file.h`（其中包含一个 C++ 类以及实现）并`main.cpp`使用该类。

首先，我尝试从`file.h`

```
 mipsel-linux-g++ -Wall -c -Ipath_to/staging_dir_mipsel/include -Ipath_to/staging_dir_mipsel/usr/incude file.h -o file.o 
```

这没有错误并创建目标文件。我做同样的事情，`main.cpp`但在将它们链接在一起时遇到了问题。

当我跑

```
mipsel-linux-readelf -h main.o 
```

它返回精灵对象的标头

当我跑

```
mipsel-linux-readelf -h file.o 
```

它返回

```
readelf: Error: Unable to read in 0x2d78 bytes of section headers
readelf: Error: Not an ELF file - it has the wrong magic bytes at the start 
```

任何指针？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T04:20:45.993

> gcc ... -c 文件.h -o 文件.o

将 C 代码放入头文件中，并尝试以上述方式将其编译为目标代码是*非常不寻常的。*

事实上，它是如此不寻常，以至于 GCC 给出了上面的命令，并没有这样做。相反，它编译`file.h`成一个*预编译的头文件*（通常称为，但你不幸的选项`.gch`被迫调用）。`.o``-o`

`file.o`因此，不是文件也就不足为奇了`ELF`。只需运行`file file.o`并查看它是否打印`GCC precompiled header (version 013) for C`或类似。

如果您真的打算`file.h`编译为 ELF 对象`file.o`，请改为命名它`file.c`。

# java - HTTPS 的代理 Servlet

> ID：10867012
> 
> 赞同：2
> 
> 时间：2012-06-03T00:32:40.713
> 
> 标签：java

我有一个安全站点，需要在某些页面上显示来自外部非 https URL 的图像。我想创建一个仅用作将图像数据传递给页面的代理的 servlet。一种方法是使用 Apache 的 HttpClient 下载图像数据，然后使用 IOUtils.copy 将数据复制到 servlet 的响应中。

有没有更简单的方法？

更新：这样做的原因是为了避免浏览器警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T03:07:14.567

这就是我最终使用的：

```
 protected void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        try {
            String url = request.getParameter("url");
            HttpClient httpClient = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);
            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            InputStream inputStream = httpEntity.getContent();
            response.setContentType("image/jpeg");
            IOUtils.copy(inputStream, response.getOutputStream());
        } catch (Exception e) {
            AppLogger.log(e);
        }
    } 
```

如果有人有更好的方法来实现这一点，请发布。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-03T00:36:51.733

如果我理解得很好，您不需要这样的东西，只需返回对图像或音频的引用，或者您的 HTML 响应中的任何其他内容，浏览器就会处理向包含每个资源的服务器发出请求，如果它们可以访问，它们将显示在客户端上。

# mysql - MySQL Query 来计算用户拥有多少个数据库？

> ID：10867018
> 
> 赞同：9
> 
> 时间：2012-06-03T00:35:15.930
> 
> 标签：mysql

有没有类似的查询

伪代码：

`SELECT databases FROM mysql.databases WHERE owner = 'myUser'`

或任何可以完成这项工作的查询？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-03T00:46:28.617

```
SELECT COUNT(*) FROM information_schema.SCHEMATA; 
```

（以问题中的用户身份运行）

```
SELECT count(*) FROM (
  SELECT DISTINCT TABLE_SCHEMA FROM information_schema.SCHEMA_PRIVILEGES WHERE GRANTEE LIKE("'USERNAME'%") GROUP BY TABLE_SCHEMA
) AS baseview; 
```

（以root身份运行）

警告：在 MySQL 中没有数据库的“所有者”之类的东西，上述查询将显示有关用户具有某种访问权限的数据库的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T00:42:51.530

> 据我所知，在 MySQL 中没有数据库或其对象的“所有者”的概念，就像在 MS Access 和 MS SQL Server 中一样。我从 mysql 系统表中任何地方都缺少“所有者”字段来推测这一点。(http://www.wideman-one.com/gw/tech/mysql/perms/index.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T00:51:20.470

可以统计mysql数据库和db表中一个用户关联了多少个数据库。这是我能想到的最接近用户对数据库的“所有权”。

```
SELECT count(DISTINCT Db) FROM db WHERE User = 'someuser'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T00:44:37.380

**通过使用：**

```
SHOW DATABASES 
```

您只能查看您拥有某种权限的数据库，除非您拥有全局[SHOW DATABASES](http://dev.mysql.com/doc/refman/5.0/en/show-databases.html)权限。

阅读[SHOW DATABASES 语法](http://dev.mysql.com/doc/refman/5.0/en/show-databases.html)以更好地了解您可以实现的目标。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-04T08:19:44.843

您运行 sql，然后您会看到表的所有者用户。

sql是`select * from information_schema. SCHEMA_PRIVILEGES where TABLE_SCHEMA='myUser'`

[有关 information_schema.SCHEMATA 的详细信息](http://dev.mysql.com/doc/refman/5.0/en/table-privileges-table.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-20T04:12:20.913

仅显示所有数据库使用

```
SELECT * FROM information_schema.SCHEMATA; 
```

# spring - Spring 的验证例程是否支持 Hibernate 的 JSR 303 实现选项以用于快速失败模式？

> ID：10867020
> 
> 赞同：4
> 
> 时间：2012-06-03T00:36:03.693
> 
> 标签：spring, hibernate, bean-validation, hibernate-validator

[8.2\. 快速失败模式](http://docs.jboss.org/hibernate/validator/4.2/reference/en-US/html/validator-specifics.html#d0e3142)

我正在寻找可以在 Spring 中配置此选项的位置，但我不确定这是 JSR 303 的一部分，因为它是他们自己的验证器实现的 Hibernate 配置。这很重要，因为如果我有多个约束违规，我只想“抛出”第一个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T18:14:51.510

假设您使用 Spring`LocalValidatorFactoryBean`来设置验证器，您可以在属性中指定特定于提供程序的配置`validationPropertyMap`属性。

Hibernate Validator 的 fail-fast 属性的属性名称是“hibernate.validator.fail_fast”，所以你可以像这样设置你的验证器：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:util="http://www.springframework.org/schema/util"
  xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd">

  <bean name="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean">
    <property name="validationPropertyMap">
      <util:map>
        <entry key="hibernate.validator.fail_fast" value="true"/>
      </util:map>
    </property>
  </bean>
</beans> 
```

# python - 获取 pandas.read_csv 以将空值读取为空字符串而不是 nan

> ID：10867028
> 
> 赞同：143
> 
> 时间：2012-06-03T00:38:37.717
> 
> 标签：python, csv, pandas

我正在使用 pandas 库来读取一些 CSV 数据。在我的数据中，某些列包含字符串。字符串`"nan"`是可能的值，空字符串也是如此。我设法让熊猫将“nan”读取为字符串，但我不知道如何让它不将空值读取为 NaN。这是示例数据和输出

```
One,Two,Three
a,1,one
b,2,two
,3,three
d,4,nan
e,5,five
nan,6,
g,7,seven

>>> pandas.read_csv('test.csv', na_values={'One': [], "Three": []})
    One  Two  Three
0    a    1    one
1    b    2    two
2  NaN    3  three
3    d    4    nan
4    e    5   five
5  nan    6    NaN
6    g    7  seven 
```

它正确地将“nan”读取为字符串“nan”，但仍将空单元格读取为 NaN。我尝试将`str`参数`converters`传入 read_csv（使用`converters={'One': str})`），但它仍将空单元格读取为 NaN。

我意识到我可以在读取后使用 fillna 填充值，但是真的没有办法告诉 pandas 特定 CSV 列中的空单元格应该被读取为空字符串而不是 NaN？

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2017-05-07T14:55:36.283

阅读其他答案和评论后，我仍然感到困惑。但现在答案似乎更简单了，所以你开始吧。

自 Pandas 0.9 版（自 2012 年起）以来，您可以通过简单地设置来读取将空单元格解释为空字符串的 csv `keep_default_na=False`：

```
pd.read_csv('test.csv', keep_default_na=False) 
```

这个问题在中解释得更清楚

*   [read_csv 中更一致的 na_values 处理 · 问题 #1657 · pandas-dev/pandas](https://github.com/pandas-dev/pandas/issues/1657)

这已于 2012 年 8 月 19 日针对 Pandas 版本 0.9 修复

*   [BUG：更一致的 na_values #1657 · pandas-dev/pandas@d9abf68](https://github.com/pandas-dev/pandas/commit/d9abf688d3345779f5ce6d803e593b5b9e36e203)

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2012-06-12T21:33:20.550

我添加了一张票以在此处添加某种选项：

[https://github.com/pydata/pandas/issues/1450](https://github.com/pydata/pandas/issues/1450)

同时，`result.fillna('')`应该做你想做的事

编辑：在开发版本（最终版本为 0.8.0）中，如果您指定一个空列表`na_values`，空字符串将在结果中保持空字符串

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-07-05T12:59:04.643

为此，我们在 Pandas[`read_csv()`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html)中有一个简单的论点：

采用：

```
df = pd.read_csv('test.csv', na_filter= False) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2021-07-14T11:49:28.823

可以在此处找到默认`pandas`定义为缺失值的内容。`read_csv()`

```
import pandas
default_missing = pandas._libs.parsers.STR_NA_VALUES
print(default_missing) 
```

输出

```
{'', '<NA>', 'nan', '1.#QNAN', 'NA', 'null', 'n/a', '-nan', '1.#IND', '#N/A N/A', 'N/A', 'NULL', 'NaN', '-1.#IND', '-1.#QNAN', '#NA', '#N/A', '-NaN'} 
```

有了它，您可以选择退出。

```
import pandas
default_missing = pandas._libs.parsers.STR_NA_VALUES
default_missing = default_missing.remove('')
default_missing = default_missing.remove('na')

with open('test.csv', 'r') as csv_file:
    pandas.read_csv(csv_file, na_values=default_missing) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-11-30T16:17:39.177

如果您只想保留一列的空字符串，请定义`str`为列转换器（`dtypes`将不起作用）：

```
pd.read_csv('test.csv', converters={'column_name': str}) 
```

# html - 如何在选择时更改/删除表单边框颜色？（Chrome）

> ID：10867029
> 
> 赞同：1
> 
> 时间：2012-06-03T00:38:38.300
> 
> 标签：html, css, google-chrome, webkit

所以我正在使用

```
-webkit-border-radius: 10px; 
```

对于现在的文本输入字段，但问题是一旦该字段是`selected`，就有一个`border`没有`border radius`修改的。

所以我的问题是有人知道如何修改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:30:58.900

目前没有相当于 -moz-outline-radius 的 webkit

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T20:41:12.367

虽然没有（据我所知）的跨浏览器实现`outline-radius`，甚至除了`-moz-`变体之外没有供应商前缀的实现，但您也许可以使用 inset来*模拟*`box-shadow`它：

```
.elementClass {
    padding: 0.2em;
    outline: none;
    border: 1px solid #000; /* in Chromium 18/Ubuntu 11.04 setting
                               the border is required for the outline
                               to be applied, this may not be true elsewhere */
    border-radius: 0.4em;
}

.elementClass:focus,
.elementClass:active {
    box-shadow: inset 0 0 1px 2px #f90;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/DW7q3/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T01:15:10.933

除了大纲，您还可以使用

```
-webkit-appearance: none; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T00:45:45.677

我不知道您是否可以将轮廓设置为具有像边框一样的半径，但您可以将其删除

```
outline:none; 
```

# ajax - 如何在 Ajax 更新后更新表单重置“基线状态”

> ID：10867030
> 
> 赞同：1
> 
> 时间：2012-06-03T00:38:41.290
> 
> 标签：ajax, jquery-ui, jquery

我有一个取消/重置的表格。更新是使用 Ajax 完成的。如果我提交（成功）更新，然后对复选框进行额外更改，然后选择取消（阅读：重置），重置会一直返回到原始值。请注意，数据库未更新（由于未提交），但显示的内容不准确且具有误导性。

如何更新表单的“基线状态”（？），以便取消/重置返回到新版本的表单值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T01:38:27.880

我将执行一个额外的 AJAX 调用以从数据库中检索当前值以重置这些值。您可以将应用程序设计为在页面加载和单击重置时使用相同的查找。

另一个选项是将上次保存的值存储在每个表单字段的[HTML5 数据属性中。](http://html5doctor.com/html5-custom-data-attributes/)单击重置时，您可以根据数据属性重新填充值。例如。

```
<!-- HTML -->
<input type="text" name="firstName" id="firstName" value="jim" data-last-value="joe" />

/* JS - Do this on reset. */ 
$('[data-last-value]').each(function() {
    var lastValue = $(this).attr('data-last-value');  
    $(this).val(lastValue);
}); 
```

# android - 如何在Android中访问菜单按钮onLongClick？

> ID：10867033
> 
> 赞同：3
> 
> 时间：2012-06-03T00:39:53.417
> 
> 标签：android, menu, onclicklistener, onlongclicklistener

如何设置侦听器以在硬件菜单按钮上执行长按？以编程方式访问菜单按钮的方式是什么？

此外，如何区分长按和单击？（据我所知，当执行长按时，单击事件也会传播 - 我不希望发生这种情况，因为我需要针对这两种情况采取 2 种不同的操作。长按和单击单独的侦听器设备菜单按钮）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T03:02:48.590

这应该是相当直截了当的。查看Android 开发者网站上的[KeyEvent.Callback 。](http://developer.android.com/reference/android/view/KeyEvent.Callback.html)

在那里你会发现`onKeyLongPress()`以及`onKeyDown()`和`onKeyUp()`。这应该让你走上正确的轨道。如果您需要任何进一步的帮助，请评论或发布您的代码。

编辑：我刚刚重新阅读了这个问题。如果您无法区分单击和长按，则需要使用`onKeyDown`和`onKeyUp`检查单击的持续时间。基本上，您将在 中启动一个计时器`onKeyDown`并检查`onKeyUp`. 你将不得不注意`FLAG_CANCELED`。

进一步编辑：我有时间做几个测试。此代码应该执行您想要的操作（`onKeyUp()`仅获取短按事件并且`onLongPress()`仅获取长按事件）。

这里的关键是在处理程序中的`event.startTracking()`调用`onKeyDown()`。

放置`Activity`（这也应该在自定义视图中工作，但未经测试）：

```
@Override
public boolean onKeyLongPress(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_MENU) {
        // Handle Long Press here
        Log.i("KeyCheck", "LongPress");
        return true;    
    }
    return super.onKeyLongPress(keyCode, event);
}
@Override   
public boolean onKeyDown(int keyCode, KeyEvent event) {
    Log.i("KeyCheck", "KeyDown" + keyCode);
    if (keyCode == KeyEvent.KEYCODE_MENU) {
        event.startTracking(); //call startTracking() to get LongPress event
        return true;
    }
    return super.onKeyDown(keyCode, event);
}
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_MENU && event.isTracking()
            && !event.isCanceled()) {
        // handle regular key press here
        Log.i("KeyCheck", "KeyUp");
        return true;
    }
    return super.onKeyUp(keyCode, event);
} 
```

# java - Java Mac OS X 应用程序名称更正

> ID：10867035
> 
> 赞同：1
> 
> 时间：2012-06-03T00:39:56.230
> 
> 标签：java, macos, title

我已经在 Mac OS X 中启动了我的应用程序。屏幕左上角的 Apple 图标旁边出现了我的应用程序的名称。此名称显示为我的主类的包路径（即`pack.age.Uno`，而不是`Uno`）。

有谁知道如何解决这个烦人的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T18:43:21.373

只需在启动程序时添加此参数：-Xdock:name=MyApp

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:52:33.117

我也被这个惹恼了。我*没有*办法可靠地覆盖代码。我会让它工作，`if (System.getProperty("os.name").contains("Mac")) System.setProperty("com.apple.mrj.application.apple.menu.about.name","My Java App");`但稍后会回来，它会回到“com.me.myapp”。在发布时，您可以使用 Jar Bundler 制作应用程序包，然后问题就消失了。

# android - 在选择项目之前设置微调器的文本

> ID：10867039
> 
> 赞同：8
> 
> 时间：2012-06-03T00:40:27.323
> 
> 标签：android, spinner, oncreate, settext

我有一个包含三个项目的微调器，我使用 XML 字符串数组资源来提供它。当您打开活动时，微调器通常会显示数组列表中的第一项。在选择项目之前，我想更改它并在微调器中显示文本“选择一个”。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T02:23:01.777

您可以通过以下两种方式之一来做到这一点。

1）添加“选择一个”作为您的 xml 中的第一项并编码您的侦听器以忽略它作为选择。

2）创建一个自定义适配器将其作为第一行插入，

**编辑**

在您的资源中

```
<string-array name="listarray">
    <item>Select One</item>
    <item>Item One</item>
    <item>Item Two</item>
    <item>Item Three</item>
</string-array> 
```

在您的 onItemSelected 侦听器中：

```
spinnername.setOnItemSelectedListener(new OnItemSelectedListener() {
@Override
    public void onNothingSelected(AdapterView<?> parent) {
    }
    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
        if (pos == 0) {
        }else {
            // Your code to process the selection
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T00:58:51.053

要为微调器设置默认文本，您必须为微调器使用`android:prompt=@string/SelectOne`SelectOne 在您的 string.xml 中定义的位置。

例子 ：

```
<Spinner android:id="@+id/spinnerTest"  
 android:layout_marginLeft="50px"
 android:layout_width="fill_parent"                  
 android:drawSelectorOnTop="true"
 android:layout_marginTop="5dip"
 android:prompt="@string/SelectOne"
 android:layout_marginRight="30px"
 android:layout_height="35px" 
/> 
```

# php - 如何使用 javascript 编写动态文本

> ID：10867043
> 
> 赞同：1
> 
> 时间：2012-06-03T00:40:57.923
> 
> 标签：php, javascript, html

我正在尝试完成这样的事情：

```
<?php $url = 'http://www.mydomain.com/img/picture.jpg'; ?>
<img src='<?php echo $url ?>' /> 
```

唯一的问题是我想使用javascript来完成这个。像这样的东西

```
<script>url = 'http://www.mydomain.com/img/picture.jpg'</script>
<img src='<script>document.write(url)</script>' /> 
```

当然它不会起作用，但你明白了。任何想法 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T00:45:24.407

试试 - [http://jsfiddle.net/m2Prh/](http://jsfiddle.net/m2Prh/)

```
<img id="image" />​

<script>    
    var url = 'http://lorempixel.com/300/200';
    document.getElementById("image").src = url;​
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T03:14:56.337

我建议阅读 jquery，您可以访问每个 html 元素

# openid - 结合来自 www 和非 www 的 OpenID Google 令牌哈希

> ID：10867044
> 
> 赞同：1
> 
> 时间：2012-06-03T00:41:11.110
> 
> 标签：openid, no-www

我犯了一个错误，从[http://mysite.com](http://mysite.com)和[http://www.mysite.com](http://www.mysite.com)为同一个站点提供服务，并允许两者都使用 OpenID 登录。www 和非 www 的领域是不同的。

当最初从 www.mysite.com 登录的用户尝试从 mysite.com 登录并且未找到令牌被提示创建新帐户时，我遇到了问题。

我计划修复服务器端以始终重定向到 www。网站的版本，但是如何合并来自非 www 网站的令牌？

我可以使用返回的电子邮件进行检测，但在某些情况下，用户更改了他们的电子邮件，所以我不知道他们的 Gmail 帐户要匹配什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T06:48:01.717

这就是我所做的：

我向之前注册过 Google 的所有用户发送了一封电子邮件，并向他们发送了一个修复所有问题的链接。

该链接包含一个安全哈希，并会自动登录并重定向到帐户关联页面。这样，将创建一个新的正确的 Google 关联。使用后链接失效。

如果用户没有看到电子邮件，我还为所有将电子邮件作为标识符的 Google OpenID 用户创建了一个额外的关联条目，因此现在他们有 2 个 Google 关联，一个散列关联和一个电子邮件关联。

这样做的唯一会被排除在外的用户是那些使用 Google OpenID 注册并将他们的电子邮件地址更改为与他们的 Google 帐户提供的不同的东西的用户。所以电子邮件是给他们的。

# c - 迭代给出段错误的字符列表

> ID：10867047
> 
> 赞同：2
> 
> 时间：2012-06-03T00:42:02.877
> 
> 标签：c

我似乎无法弄清楚我做错了什么。我只是在处理一个字符列表并尝试打印它们。

```
char *name[] =  {"RGS", "O", "NRGY", "SIG", "BML-O", "BHI", "KSU", "ORN"};
void function() {
    int i;
    //for (i =0; i<sizeof(name) / sizeof(char); i++) {
    for (i =0; name[i] != NULL; i++) {
        printf ("%s \n", name[i]);
    }
} 
```

当我使用第一个 for 循环（注释掉的那个）时，它会打印出列表，但最后有两个项目表示`(NULL)`并给出了段错误。当我使用第二个 for 循环（未注释的循环）时，它会打印所有内容，但也会出现段错误。

输出：

```
RGS 
O 
NRGY 
SIG 
BML-O 
BHI 
KSU 
ORN 
Segmentation fault: 11 
```

编译代码（`gcc ./learningC.c`）时我没有收到任何错误，如果我注释掉这个函数，我也没有收到任何错误（这让我认为这是代码的问题所在）。我想知道我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T00:44:00.327

对于第一种循环样式，您需要使用`sizeof(char*)`，而不是`sizeof(char)`。数组的元素是`char*`，不是`char`。

对于第二种循环样式，如果你把它放在那里，你的数组最后只会有一个 NULL ：

```
char *name[] =  {"RGS", "O", "NRGY", "SIG", "BML-O", "BHI", "KSU", "ORN", NULL}; 
```

# php - 检索用户尚未邀请的用户

> ID：10867048
> 
> 赞同：1
> 
> 时间：2012-06-03T00:42:29.377
> 
> 标签：php, facebook, events

正如您从通常的“邀请朋友”到公共事件[示例屏幕截图](http://awesomescreenshot.com/0cc73fj6b)中知道的那样，似乎可以检索尚未被邀请的所有朋友一个示例事件。

由于发送邀请有限制（一次 100 个开放邀请），因此获取此信息以防止错误和服务器浪费非常重要。

那么，我如何获得这个未邀请的朋友列表呢？如果这不可能，我如何邀请更大的好友列表参加活动（我可以检查剩下多少开放邀请，或者类似的东西吗？）？

请分享你的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T00:50:47.943

要获得未受邀参加活动的人员名单，您应该做的是：

使用 FBgraph 请求您的好友列表（/me/friends）和活动邀请列表（EventID/invited）。比较两者，看看哪些不在两个列表中。

结果数组将是尚未被邀请的数组。

# node.js - 无法提供具有快速路由且没有斜杠的静态文件

> ID：10867052
> 
> 赞同：13
> 
> 时间：2012-06-03T00:44:17.320
> 
> 标签：node.js, express, routes

我想要一个名为“main”的路由，它将提供静态文件：

```
app.use('/main',express.static(__dirname+'/public')); 
```

但是，当我这样做时：

```
http://my.site.dev/main 
```

CSS 和 JS 文件不会下载，因为它试图从中获取它们

```
http://my.site.dev/css/styles.css 
```

它应该从以下位置获取文件：

```
http://my.site.dev/main/css/styles.css 
```

但是，如果我使用尾部斜杠访问我的网站：

```
http://my.site.dev/main/ 
```

所有文件都很好

任何想法为什么没有尾部斜杠会扰乱 CSS 和 JS 等资源的进入？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-27T19:14:06.990

这是一个 http 问题，而不仅仅是与 Express 相关的挑战。该问题在以下位置讨论：

*   [相对 URL 和尾部斜杠](https://stackoverflow.com/questions/5457885/relative-urls-and-trailing-slashes)
*   [http://www.bizcoder.com/the-mystery-of-the-trailing-slash-and-the-relative-url](http://www.bizcoder.com/the-mystery-of-the-trailing-slash-and-the-relative-url)

如果您的 URL 是 /main 并且您的相对 URL 是 css/style.css，它将解析为 /css/style.css；但如果您的 URL 是 /main/，则相对 URL 会解析为 /main/css/style.css。

我处理这个问题的策略是重定向以添加尾部斜杠。在 Express 中是这样的：

```
app.all(/^\/main$/, function(req, res) { res.redirect('/main/'); });
app.use('/main/',express.static(__dirname+'/public')); 
```

或者：

```
app.enable('strict routing');
app.all('/main', function(req, res) { res.redirect('/main/'); });
app.use('/main/',express.static(__dirname+'/public')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T01:26:33.170

HTML 中如何请求 JS/CSS 文件？如果您使用类似 的字符串`css/styles.css`，那么它将尝试从当前目录中获取它们。`/main`is的目录`/`（就像`/main.html`会一样），而 for的目录`/main/`是`/main/`. 一个快速的解决方法是`/main/css/styles.css`在您的 HTML 中使用。

# jquery - 播放列表轮换中的项目

> ID：10867054
> 
> 赞同：0
> 
> 时间：2012-06-03T00:44:32.810
> 
> 标签：jquery, jquery-ui

我想知道“播放列表中的项目循环旋转/出现/滚动”的效果名称。我的意思是在“x”秒后，图像消失，然后图像出现在播放列表中，直到播放列表结束时播放列表中的第一个项目出现。

为谷歌获取一些搜索词会很有帮助，如果有人已经在堆栈上问过这个问题，请指出我。任何指向代码片段的指针都会很有用

PS：我只是在学习 HTML/CSS/jQuery/JS 等。我不确定这属于哪个桶。我之前的问题得到了很少的反对票，即使它得到了回答并且是有效的。请原谅我的无知。

如果需要，请将其分配给不同的存储桶。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T00:50:28.787

```
var count = 0;
var amount = $(".playlist-items").length;

setInterval(function(){
    count >= amount-1 ? count = 0 : count++;

    // do your fade/show here, using 'count'.

}, 5000); 
```

以上将简单地每 5 秒执行一次无限循环，为您提供一个变量`count`来指示您在循环中的位置。

一个工作示例：http: [//jsfiddle.net/Wp8dh/](http://jsfiddle.net/Wp8dh/)

# java - Java分隔符跳过一个单词

> ID：10867057
> 
> 赞同：2
> 
> 时间：2012-06-03T00:45:00.890
> 
> 标签：java, unique, java.util.scanner

我正在读取一个文本文件并将该文本文件中的一组唯一单词存储到一个 ArrayList 中（请建议是否有更好的结构来执行此操作）。我正在使用扫描仪扫描文本文件并将分隔符指定为“”（空格），如下所示；

```
 ArrayList <String> allWords = new ArrayList <String> ();
    ArrayList <String> Vocabulary = new ArrayList <String> ();
    int count = 0;

    Scanner fileScanner = null;
    try {
        fileScanner = new Scanner (new File (textFile));

    } catch (FileNotFoundException e) {
        System.out.println (e.getMessage());
        System.exit(1);
    }

    fileScanner.useDelimiter(" ");

    while (fileScanner.hasNext()) {

        allWords.add(fileScanner.next().toLowerCase());

        count++;

        String distinctWord = (fileScanner.next().toLowerCase());
        System.out.println (distinctWord.toString());

        if (!allWords.contains(distinctWord)) {

            Vocabulary.add(distinctWord);

        }
    } 
```

因此，在打印 Vocabulary 的内容后，每个单词后面都会有一个单词被跳过。因此，例如，如果我有以下文本文件；

“敏捷的棕色狐狸跳过了懒狗”

打印的内容是“quick fox over lazy”，然后它给了我一个错误；

```
Exception in thread "main" java.util.NoSuchElementException
    at java.util.Scanner.throwFor(Unknown Source)
    at java.util.Scanner.next(Unknown Source)
    at *java filename*.getWords(NaiveBayesTxtClass.java:82)
    at *java filename*.main(NaiveBayesTxtClass.java:22) 
```

谁能给我一些关于如何解决这个问题的建议？我感觉它与 fileScanner.useDelimiter 和 fileScanner.hasNext() 语句有关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T00:47:51.940

您在检查 hasNext() 一次后调用了 Scanner#next() 两次，而忽略了 next() 的返回值之一。

您在 (1) 处调用它并将其添加到 allWords
并在 (2) 处再次调用它并打印它。

```
while (fileScanner.hasNext()) {

    allWords.add(fileScanner.next().toLowerCase()); // **** (1)

    count++;

    String distinctWord = (fileScanner.next().toLowerCase());  // **** (2)
    System.out.println (distinctWord.toString());

    if (!allWords.contains(distinctWord)) {

        Vocabulary.add(distinctWord);

    }
} 
```

解决方法：调用 Scanner#next()***一次***，将返回的字符串保存到一个变量中，然后将该变量添加到 HashSet 中，并打印该变量。例如，

```
while (fileScanner.hasNext()) {
    String word = fileScanner.next().toLowerCase();
    allWords.add(word); // **** (1)
    count++;
    // String distinctWord = (fileScanner.next().toLowerCase());  // **** (2)
    System.out.println (word);
    vocabularySet.add(word); // a HashSet
} 
```

安全的一般规则是，您应该为每次调用`Scanner#hasNextXXX()`和`Scanner#nextXXX()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T01:08:33.170

正如您还要求提供数据结构，您可以执行以下操作：

```
 List<String> allWords = new ArrayList<String>();
    SortedSet<String> Vocabulary = new TreeSet<String>();
    int count = 0;

    Scanner fileScanner = null;
    try {
        fileScanner = new Scanner(new File(textFile));

    } catch (FileNotFoundException e) {
        System.out.println(e.getMessage());
        System.exit(1);
    }

    fileScanner.useDelimiter(" ");

    while (fileScanner.hasNext()) {
        String word = fileScanner.next().toLowerCase();
        allWords.add(word);
        if (Vocabulary.add(word)) {
            System.out.print("+ ");
        }
        System.out.println(word);
    } 
```

如您所见，变量由接口（List，SortedSet）声明并使用具体类实现。这不仅允许重新实现，而且对函数参数特别有用。

# django - Django 根据日期选择对象

> ID：10867061
> 
> 赞同：0
> 
> 时间：2012-06-03T00:45:19.193
> 
> 标签：django, django-models, django-views

这真让我抓狂。我已经使用了所有的lookup_types，但似乎都没有。

我需要选择从今天开始两周前创建的对象。

这是我所拥有的：

```
twoweeksago = datetime.datetime.now() - datetime.timedelta(days=14)
pastblast = Model.objects.filter(user=user, created=twoweeksago, done=False) 
```

该模型有一个创建的字段来执行此操作：`created = models.DateTimeField(auto_now_add=True, editable=False)`

但我的查询并没有返回所有内容。在你问之前，是的，数据库中有正确日期的记录。

有人可以就我做错了什么提出建议吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T02:38:48.470

DateTimeField 与 DateField 非常不同，如果你这样做的话

```
twoweeksago = datetime.datetime.now() - datetime.timedelta(days=14) 
```

这将返回今天的日期、小时、分钟、秒减去 14 天，结果还将包括小时分钟秒等。所以查询：

```
pastblast = Model.objects.filter(user=user, created=twoweeksago, done=False) 
```

正在寻找一个实例是在那个确切的时间创建的，如果你只想关心一天，而不是小时、分钟和秒，你可以做类似的事情

```
pastblast = Model.objects.filter(user=user, created__year=twoweeksago.year, created__month=twoweeksago.month, created__day=twoweeksago.day, done=False) 
```

检查 django 文档： [https ://docs.djangoproject.com/en/1.4/ref/models/querysets/#year](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#year)

# java - onListItemClick 不会启动

> ID：10867072
> 
> 赞同：0
> 
> 时间：2012-06-03T00:47:01.437
> 
> 标签：java, android

我正在尝试放置 onListItemClick，但是当我启动我的应用程序时，onListItemClick 没有任何反应。谁能帮我这个？

这是我的代码：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    db = (new DatabaseHelper(this)).getWritableDatabase();
    searchText = (EditText) findViewById(R.id.searchText);
    employeeList = (ListView) findViewById(R.id.list);

    Button searchButton = (Button) findViewById(R.id.searchButton);
    searchButton.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            search(employeeList);
        }
    });

}

public void search(View view) {
    // || is the concatenation operation in SQLite
    cursor = db
            .rawQuery(
                    "SELECT _id, firstName, lastName, title  FROM employee WHERE firstName || ' ' || lastName LIKE ?",
                    new String[] { "%" + searchText.getText().toString()
                            + "%" });
    adapter = new SimpleCursorAdapter(this, R.layout.employee_list_item,
            cursor, new String[] { "firstName", "lastName", "title" },
            new int[] { R.id.firstName, R.id.lastName, R.id.title });
    employeeList.setAdapter(adapter);

}

    public void onListItemClick(ListView parent, View view, int position, long id) {
        Intent intent = new Intent(this, EmployeeDetails.class);
        Cursor cursor = (Cursor) adapter.getItem(position);
        intent.putExtra("EMPLOYEE_ID", cursor.getInt(cursor.getColumnIndex("_id")));
        startActivity(intent);
    } 
```

}

没有错误消息，搜索正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T02:17:58.987

```
employeeList = (ListView) findViewById(R.id.list); 
```

在上面的行下面添加这些行

```
employeeList = (ListView) findViewById(R.id.list);
employeeList .setOnItemClickListener(this); 
```

**更新::**示例代码

```
public class SampleActivity extends Activity implements OnItemClickListener{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(mWebView);
    }
    @Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) {
       // TODO Auto-generated method stub
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T00:54:04.963

像这样为您的列表视图注册一个**OnItemClickListener()**与**setOnItemClickListener**

```
listView.setOnItemClickListener(new OnItemClickListener() {
    @Override public void onItemClick(AdapterView<?> adapter, View view, int pos, long id) {
        Intent intent = new Intent(this, EmployeeDetails.class);
        Cursor cursor = (Cursor) adapter.getItem(pos);
        intent.putExtra("EMPLOYEE_ID", cursor.getInt(cursor.getColumnIndex("_id")));
        startActivity(intent);                
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T00:56:13.790

您必须像`listview.setOnItemClickListener(this)`在代码中一样注册您的侦听器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T16:45:29.280

试试这个

```
listview.setOnItemClickListener(new OnItemClickListener() {

     // Your Code Goes Here
}); 
```

# android - 安卓操作栏

> ID：10867076
> 
> 赞同：0
> 
> 时间：2012-06-03T00:48:16.480
> 
> 标签：android

我有一个关于 Android ActionBar 的非常简单的问题......这是打算出现在应用程序中，用作一种标题，还是只打算在用户点击设备上的设置按钮时显示？

我正在尝试实现一个始终存在于应用程序中的菜单，例如品牌徽标和其他一些操作，例如搜索图标，也许还有地图图标来查看地图功能。有什么建议么？[也可以在这里](https://stackoverflow.com/questions/10825274/custom-header-menu-in-android-app-how-to)看到这篇文章

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:00:48.357

您是否将**android:targetSdkVersion 设置**为 11 或更多？[ActionBar](http://developer.android.com/reference/android/app/ActionBar.html)仅适用于 Honeycomb 和 ICS :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T01:39:38.403

始终显示 ActionBar。查看[Android 开发者网站](http://developer.android.com/design/patterns/actionbar.html)，了解有关 ActionBar UI 模式和使用的更多信息。

您可以使用出色的[ActionBarSherlock](http://actionbarsherlock.com/)库在 2.x 设备上提供 ActionBar。

ActionBar 听起来非常适合您想要的品牌/图标。您将使用您的徽标作为图标，然后具有用于搜索和地图功能的操作项。

# jquery - jQuery 对话框弹出

> ID：10867077
> 
> 赞同：26
> 
> 时间：2012-06-03T00:50:02.563
> 
> 标签：jquery, jquery-ui, modal-dialog, jquery-ui-dialog

我试图在单击此链接时显示此对话框弹出表单，但它对我不起作用。过去三个小时我一直在做这个，这对我来说太令人沮丧了。

这是我的 HTML：

```
<a href="#" id="contactUs">Contact Us</a>
<div id="dialog" title="Contact form">
  <p>appear now</p>
</div> 
```

这是我的 JavaScript，它在一个外部文件中：

```
$("#contactUs").click(function() {
  $("#dialog").dialog("open");
  return false;
}); 
```

我已经使用了这些链接，但对我无济于事：

*   [http://jqueryui.com/demos/dialog/#modal](http://jqueryui.com/demos/dialog/#modal)
*   [http://jqueryui.com/demos/dialog/#default](http://jqueryui.com/demos/dialog/#default)

如果有想法请告诉我，不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-03T00:55:00.110

这个 HTML 很好：

```
<a href="#" id="contactUs">Contact Us</a>                   
<div id="dialog" title="Contact form">
  <p>appear now</p>
</div> 
```

您需要初始化对话框（不确定您是否正在这样做）：

```
$(function() {
  // this initializes the dialog (and uses some common options that I do)
  $("#dialog").dialog({
    autoOpen : false, modal : true, show : "blind", hide : "blind"
  });

  // next add the onclick handler
  $("#contactUs").click(function() {
    $("#dialog").dialog("open");
    return false;
  });
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-03T00:57:26.467

您的问题在于对话的调用

如果您不初始化对话框，则不必通过“打开”来显示：

```
$("#dialog").dialog(); 
```

此外，此代码需要位于`$(document).ready();`函数上或位于元素下方才能正常工作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-01-11T19:18:05.133

使用下面的代码，它对我有用。

```
<script type="text/javascript">
     $(document).ready(function () {
            $('#dialog').dialog({
                autoOpen: false,
                title: 'Basic Dialog'
            });
            $('#contactUs').click(function () {
                $('#dialog').dialog('open');
            });
        });
</script> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-12-08T10:05:49.643

这很简单，首先必须添加 HTML：

```
<div id="dialog"></div> 
```

然后，它必须被初始化：

```
<script type="text/javascript">
  jQuery( document ).ready( function() {
    jQuery( '#dialog' ).dialog( { 'autoOpen': false } );
  });
</script> 
```

在此之后，您可以通过代码显示它：

```
jQuery( '#dialog' ).dialog( 'open' ); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-30T04:41:53.623

您可以使用以下脚本。它对我有用

> 模态本身由主模态容器、页眉、正文和页脚组成。页脚包含操作，在本例中是确定按钮，页眉包含标题和关闭按钮，正文包含模式内容。

```
 $(function () {
        modalPosition();
        $(window).resize(function () {
            modalPosition();
        });
        $('.openModal').click(function (e) {
            $('.modal, .modal-backdrop').fadeIn('fast');
            e.preventDefault();
        });
        $('.close-modal').click(function (e) {
            $('.modal, .modal-backdrop').fadeOut('fast');
        });
    });
    function modalPosition() {
        var width = $('.modal').width();
        var pageWidth = $(window).width();
        var x = (pageWidth / 2) - (width / 2);
        $('.modal').css({ left: x + "px" });
    } 
```

参考：-[在 asp.net 中使用 jquery 的模态弹出窗口](https://web.archive.org/web/20151218013241/http://jqueryasp.net/modal-popup-using-jquery-asp-net/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-03T11:44:15.530

您可以查看此链接：http: [//jqueryui.com/dialog/](http://jqueryui.com/dialog/)

这段代码应该可以正常工作

```
$("#dialog").dialog(); 
```

# ruby-on-rails - 如何防止基于另一个字段向 Active Record 关联添加/删除记录？

> ID：10867078
> 
> 赞同：0
> 
> 时间：2012-06-03T00:50:15.387
> 
> 标签：ruby-on-rails, ruby, activerecord

是否有覆盖所有可写 ActiveRecord 关联方法的行为？例如，我有一个名为“Request”的模型，如下所示：

```
class Request < ActiveRecord::Base
   has_many :line_items
end 
```

Request 模型有一个名为“status”的字段。如果状态不是“草稿”，我希望 line_items 关系的所有可写 ActiveRecord 关联方法都抛出异常。我知道我可以单独覆盖它们，如下所示：

```
class Request < ActiveRecord::Base
   has_many :line_items

   def line_items=(args)
      if status != 'DRAFT'
         raise Exception.new "cannot edit a non-draft request"
      else
         write_attribute :line_items, args
      end
   end
end 
```

但是，ActiveRecord 为这些关联创建了很多方法（请参阅[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)上的“自动生成的方法” ）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T05:39:45.463

如果您的 Rails 代码不接受某些对象，首先您将查看该对象类本身而不是任何其他关联类，除非您真的跟踪到，这些 line_items 规则实际上是在请求模型中编码的。更好的 LineItem 知道为什么它的对象被拒绝，而不是请求知道它。

然后，您可能不希望所有请求关联都遵循相同的规则。

所以，我提出这个，

```
class LineItem < ActiveRecord::Base
  belongs_to :request
  before_save :raise_if_draft_request
  def raise_if_draft_request
    raise Exception.new "cannot edit a non-draft request" if self.request.status=='DRAFT'
  end
end 
```

# ruby-on-rails - Rails 范围检查无关联

> ID：10867079
> 
> 赞同：2
> 
> 时间：2012-06-03T00:50:22.203
> 
> 标签：ruby-on-rails

我有一个`Category`模型，其中 a`category`可能有一些子类别（`category.categories`）。我想要一个范围，它可以给我所有`Category`没有 sub 的 s `categories`。

换句话说，我可以写

```
without_subcategories = Category.select{|category| category.categories.none?} 
```

但我想把它写成`scope`. 我该怎么做呢？

如果不清楚，这是我的模型：

```
class Category < ActiveRecord::Base
  belongs_to :parent, class_name: 'Category'
  has_many :categories, foreign_key: :parent_id, class_name: 'Category'
  scope :without_subcategories, lambda { WHAT GOES IN HERE? }
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T01:48:02.663

最佳实践是通过实现计数器缓存来最小化数据库查询。在 rails 中，通过向`:counter_cache => true`belongs_to 关联添加一个选项非常简单。这假设您在类别数据库表中创建一个`'categories_count'`整数列。鉴于此，您的范围是微不足道的。

```
class Category < ActiveRecord::Base
  belongs_to :parent, class_name: 'Category', :counter_cache => true
  has_many :categories, foreign_key: :parent_id, class_name: 'Category'
  scope :without_subcategories, where(categories_count: 0)
end 
```

希望这有帮助。

# objective-c - 如果满足条件，如何重新加载 tableView 即调用 viewDidLoad 方法

> ID：10867080
> 
> 赞同：2
> 
> 时间：2012-06-03T00:50:22.843
> 
> 标签：objective-c, ios, uitableview

问题是，如果满足条件，我需要一种方法来基本上擦除用户放入我的数组中的所有条目数据。我是 Objective-C 和 iOS 编程的新手，但我相信解决方案可能是调用 viewDidLoad 方法，因此它实际上会使用重置为默认值的数组值刷新应用程序。如果有任何其他合乎逻辑的方法，我将不胜感激。

简而言之，我需要在应用程序首次启动并且用户没有选择任何内容时刷新数组。

这是我需要刷新的部分。

```
 if ([gradeRecieved objectAtIndex:i]==nil) {

            break; // if this condition is met the program must  begin anew. 
```

编辑* 我需要调用 - (void)viewDidLoad 方法

这是更多的代码。

```
-(IBAction)button:(id)sender{
    double sum = 0;
    int i = 0;
    double gradeEarned=0;
    double creditHours = 3;

    while (i<8){

       // [credits removeObjectIdenticalTo:[NSNull null]];
        if ([credits count ] ==0) {
            break; 
        }

            if ([credits objectAtIndex:i] == radioButtonA) {

           // [gradeRecieved replaceObjectAtIndex:i withObject:GradeA];
                [defArray addObject:GradeA];
                gradeEarned+=GradeA.intValue;
                i++;
                continue;
            }

            if ([credits objectAtIndex:i] == radioButtonB) {
           // [gradeRecieved replaceObjectAtIndex:i withObject:GradeB];
                [defArray addObject:GradeB];
              gradeEarned+=GradeB.intValue;
                i++;
                continue;
            }

            if ([credits objectAtIndex:i]== radioButtonC){
         // [gradeRecieved replaceObjectAtIndex:i withObject:GradeC];
                [defArray addObject:GradeC];
                gradeEarned+=GradeC.intValue;
                i++;
                continue;

            }
        if ([credits objectAtIndex: i] == defaulter) {

            UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Custom button pressed" message:[NSString stringWithFormat:@"You pressed the custom button C"] delegate:self cancelButtonTitle:@"great"otherButtonTitles:nil];
            [alert show];
            [alert release];
        [self viewDidLoad];
            break;
        }
    }

    if ([defArray count]>0) {

                sum= ([defArray count])/(creditHours*gradeEarned);
        NSLog(@"%f",sum);} 
```

但是，如果用户单击按钮然后尝试重做一些选择，则此新代码会导致应用程序冻结

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T01:02:25.537

如果您想再次调用该代码，请将该代码包装到一个方法中，`viewDidLoad`然后在任何您想要的地方调用该方法。这是一些示例代码：

```
- (void)viewDidLoad {

  if ([gradeRecieved objectAtIndex:i]==nil) {

          [self refreshArray];
}

}

- (void)refreshArray {

   // refresh here

} 
```

然后`[self refreshArray]`在需要的地方打电话！

我看你是新人！如果这个答案是正确的，你可以投票或打勾！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T04:37:58.870

viewDidLoad 方法只加载一次 - 在第一次加载视图时。要重新加载数据，最简单的方法是创建另一个方法并在每次需要加载数据时调用该方法。

例子，

```
-(void)loadingData{

//code to load the data

}

-(void)viewDidLoad{
//this will call the loadingData method to load the data
[self loadingData];

} 
```

# inno-setup - Inno Setup 组件的详细说明

> ID：10867087
> 
> 赞同：6
> 
> 时间：2012-06-03T00:52:20.790
> 
> 标签：inno-setup

我正在使用 Inno Setup 构建安装，并且正在使用组件部分来允许最终用户选择要安装的可选项目。

其中一些项目需要更长的描述，以便用户有足够的信息来智能地选择它们。

有没有办法在某处添加更深入的描述？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-06-13T18:13:42.290

此解决方案仅使用正确的 Inno Setup（不是可疑来源的 Inno Setup 的过时的第 3 方构建）。

该解决方案部分基于我对[Inno Setup: OnHover event](https://stackoverflow.com/q/37347427/850848)的回答。

`HoverComponentChanged`根据您的需要调整程序。

```
[Code]

var
  LastMouse: TPoint;
  CompLabel: TLabel;

function GetCursorPos(var lpPoint: TPoint): BOOL;
  external 'GetCursorPos@user32.dll stdcall';
function SetTimer(
  hWnd: longword; nIDEvent, uElapse: LongWord; lpTimerFunc: LongWord): LongWord;
  external 'SetTimer@user32.dll stdcall';
function ScreenToClient(hWnd: HWND; var lpPoint: TPoint): BOOL;
  external 'ScreenToClient@user32.dll stdcall';
function ClientToScreen(hWnd: HWND; var lpPoint: TPoint): BOOL;
  external 'ClientToScreen@user32.dll stdcall';
function ListBox_GetItemRect(
  const hWnd: HWND; const Msg: Integer; Index: LongInt; var Rect: TRect): LongInt;
  external 'SendMessageW@user32.dll stdcall';  

const
  LB_GETITEMRECT = $0198;
  LB_GETTOPINDEX = $018E;

function FindControl(Parent: TWinControl; P: TPoint): TControl;
var
  Control: TControl;
  WinControl: TWinControl;
  I: Integer;
  P2: TPoint;
begin
  for I := 0 to Parent.ControlCount - 1 do
  begin
    Control := Parent.Controls[I];
    if Control.Visible and
       (Control.Left <= P.X) and (P.X < Control.Left + Control.Width) and
       (Control.Top <= P.Y) and (P.Y < Control.Top + Control.Height) then
    begin
      if Control is TWinControl then
      begin
        P2 := P;
        ClientToScreen(Parent.Handle, P2);
        WinControl := TWinControl(Control);
        ScreenToClient(WinControl.Handle, P2);
        Result := FindControl(WinControl, P2);
        if Result <> nil then Exit;
      end;

      Result := Control;
      Exit;
    end;
  end;

  Result := nil;
end;

function PointInRect(const Rect: TRect; const Point: TPoint): Boolean;
begin
  Result :=
    (Point.X >= Rect.Left) and (Point.X <= Rect.Right) and
    (Point.Y >= Rect.Top) and (Point.Y <= Rect.Bottom);
end;

function ListBoxItemAtPos(ListBox: TCustomListBox; Pos: TPoint): Integer;
var
  Count: Integer;
  ItemRect: TRect;
begin
  Result := SendMessage(ListBox.Handle, LB_GETTOPINDEX, 0, 0);
  Count := ListBox.Items.Count;
  while Result < Count do
  begin
    ListBox_GetItemRect(ListBox.Handle, LB_GETITEMRECT, Result, ItemRect);
    if PointInRect(ItemRect, Pos) then Exit;
    Inc(Result);
  end;
  Result := -1;
end;

procedure HoverComponentChanged(Index: Integer);
var 
  Description: string;
begin
  case Index of
    0: Description := 'This is the description of Main Files';
    1: Description := 'This is the description of Additional Files';
    2: Description := 'This is the description of Help Files';
  else
    Description := 'Move your mouse over a component to see its description.';
  end;
  CompLabel.Caption := Description;
end;

procedure HoverTimerProc(
  H: LongWord; Msg: LongWord; IdEvent: LongWord; Time: LongWord);
var
  P: TPoint;
  Control: TControl; 
  Index: Integer;
begin
  GetCursorPos(P);
  if P <> LastMouse then { just optimization }
  begin
    LastMouse := P;
    ScreenToClient(WizardForm.Handle, P);

    if (P.X < 0) or (P.Y < 0) or
       (P.X > WizardForm.ClientWidth) or (P.Y > WizardForm.ClientHeight) then
    begin
      Control := nil;
    end
      else
    begin
      Control := FindControl(WizardForm, P);
    end;

    Index := -1;
    if (Control = WizardForm.ComponentsList) and
       (not WizardForm.TypesCombo.DroppedDown) then
    begin
      P := LastMouse;
      ScreenToClient(WizardForm.ComponentsList.Handle, P);
      Index := ListBoxItemAtPos(WizardForm.ComponentsList, P);
    end;

    HoverComponentChanged(Index);
  end;
end;

procedure InitializeWizard();
begin
  SetTimer(0, 0, 50, CreateCallback(@HoverTimerProc));

  CompLabel := TLabel.Create(WizardForm);
  CompLabel.Parent := WizardForm.SelectComponentsPage;
  CompLabel.Left := WizardForm.ComponentsList.Left;
  CompLabel.Width := WizardForm.ComponentsList.Width;
  CompLabel.Height := ScaleY(32);
  CompLabel.Top :=
    WizardForm.ComponentsList.Top + WizardForm.ComponentsList.Height -
    CompLabel.Height;
  CompLabel.AutoSize := False;
  CompLabel.WordWrap := True;

  WizardForm.ComponentsList.Height :=
    WizardForm.ComponentsList.Height - CompLabel.Height - ScaleY(8);
end; 
```

[![在此处输入图像描述](../Images/87eabf9d0e7f277cc11addf16ecbf048.png)](https://i.stack.imgur.com/0VGE8.png)

*对于[`CreateCallback`函数](https://jrsoftware.org/ishelp/index.php?topic=isxfunc_createcallback)，您需要 Inno Setup 6。如果您被 Inno Setup 5 卡住，您可以使用[InnoTools InnoCallback](http://www.sherlocksoftware.org/page.php?id=54)库中`WrapCallback`的函数。使用 Inno Setup 5 的 Unicode 版本。*

*为了在调整大小/调整大小/现代向导中正确工作，您需要进行一些调整。请参阅[Inno 设置 - 如何在调整大小的向导中居中动画 gif](https://stackoverflow.com/q/63502238/850848)和[放大的 Inno 设置向导中的长组件描述](https://stackoverflow.com/q/70840898/850848)*。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-10T18:19:22.343

使用[这个高级编译器](http://restools.hanzify.org/article.asp?id=89)（下载链接在下面）。

它支持比标准编译器更多的类和事件。您可以访问属性“OnItemMouseMove”。使用它，您可以存储标签显示的每个项目的描述。这是一个例子：

```
var
CompLabel: TLabel;

procedure OnItemMouseMove(Sender: TObject; X, Y: Integer; Index: Integer; Area: TItemArea);
begin
  case Index of
    0: CompLabel.Caption := 'This is the description of Component 1';
    1: CompLabel.Caption := 'This is the description of Component 2';
    2: CompLabel.Caption := 'This is the description of Component 3';
    3: CompLabel.Caption := 'This is the description of Component 4'
  else
    CompLabel.Caption := 'Move your mouse over a component to see its description.';
  end;
end;

procedure OnMouseLeave(Sender: TObject);
begin
  CompLabel.Caption := 'Move your mouse over a component to see its description.';
end;

procedure InitializeWizard();
begin
  CompLabel := TLabel.Create(WizardForm);
  CompLabel.Parent := WizardForm.SelectComponentsPage;
  CompLabel.SetBounds(WizardForm.ComponentsList.Left,180,WizardForm.ComponentsList.Width,200);
  CompLabel.Caption := 'Move your mouse over a component to see its description.';
  WizardForm.ComponentsList.OnItemMouseMove := @OnItemMouseMove;
  WizardForm.ComponentsList.OnMouseLeave := @OnMouseLeave;
  WizardForm.ComponentsList.Height := WizardForm.ComponentsList.Height - 40;
end; 
```

# c# - 为结构分配空值时，CLR 如何绕过抛出错误？

> ID：10867088
> 
> 赞同：5
> 
> 时间：2012-06-03T00:52:23.737
> 
> 标签：c#, struct, nullable

我试图理解这段代码中的一件事：

```
Nullable<Int32> x = 5;
Nullable<Int32> y = null;
Console.WriteLine("x: HasValue={0}, Value={1}",  x.HasValue, x.Value);
Console.WriteLine("y: HasValue={0}, Value={1}",  y.HasValue, y.GetValueOrDefault()); 
```

输出是：

```
x: HasValue=True, Value=5
y: HasValue=False, Value=0 
```

`null`当你传递给时我不明白的事情`y`，我相信它会调用`public static implicit operator Nullable<T>(T value)`，但是这个方法的定义初始化了一个新的结构传递`value`，它被分配`null`但是构造函数方法不检查它是否为空，所以它可以分配`default(T)`给`value`.

**为什么我们甚至可以在这里将 null 分配给 struct 并且它工作正常？**

你们能不能让我在这里错过什么？我不明白它是如何绕过`null`并返回默认值的。

**可空代码内部定义：**

[http://codepaste.net/gtce6d](http://codepaste.net/gtce6d)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T01:15:20.340

> 相信它调用公共静态隐式运算符 Nullable(T value)

不，它没有，因为`T`在`Int32`这种情况下，`null`它不是`Int32`. 它只是`y`保留变量默认值，这意味着对于所有字节都是`0`. 这会产生一个结构体，该结构体具有一个`HasValue`返回的`false`。

您不能真正传递`null`给结构，但 C# 编译器正在为您将其转换为默认初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T01:05:24.847

`new Nullable<T>(value);`默认值在由（第 40 行）调用的构造函数中分配

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T01:20:19.733

我的猜测是分配`null`给可为空的调用默认构造函数。`hasValue`这是留下来的唯一可能方式`false`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T03:12:08.863

A`Nullable<T>`只是一个结构，它有一个布尔字段指示它是否具有值，以及一个字段（如果第一个字段为真）指示该值是什么。实际上不可能将任何结构设置为`null`， a`Nullable<T>`也不例外。相反，编译器将设置 a的请求`Nullable<T>`转换`null`为将“具有值”字段（反映在 property 中`HasValue`）设置为 false 并将“实际值”字段（反映在 property 中`Value`）设置为其类型的默认值的请求。

就个人而言，我认为假装`Nullable<T>`where`HasValue`是假的`null`比有用更令人困惑，但我不是微软。我认为每种`Nullable<T>`类型都有一个静态属性会更有帮助`Nullable<T>.Null`（这将相当于`default(Nullable<T>)`，但 的行为`Nullable<T>`已经充分确立，我怀疑它会改变。

# android - 我在哪里可以看到已执行的查询

> ID：10867091
> 
> 赞同：0
> 
> 时间：2012-06-03T00:53:37.910
> 
> 标签：android, eclipse, sqlite, logging

如何查看已在我的应用程序中执行的所有查询的日志？我正在使用经典的日食。在 logcat 中，我看不到我的应用程序运行时发生的任何查询。

我在哪里看到这个？我查看了日志，我没有看到任何查询或任何内容......

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T01:00:00.210

查询不会自动记录。您将需要通过调用`Log.d()`等手动记录它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T00:59:26.583

我不确定是否有办法自动查看应用程序执行的查询，但是在执行查询时使用 Log 类并编写调试日志条目可能是个好主意，以便它们在那里注册，使用您定义的标签，您可以使用它在 log cat 控制台中轻松过滤这些消息。

# php - CakePHP 和 PHP 5.4 Bult-In Web 服务器：错误的 URL 请求（404 错误）

> ID：10867096
> 
> 赞同：-1
> 
> 时间：2012-06-03T00:55:10.177
> 
> 标签：php, cakephp, http-status-code-404

我正在使用内置的 PHP 5.4 Web 服务器测试 CakePHP 2.1.2 并发现一个问题：我没有更改任何 .htaccess，但是 URL 请求错误，导致 404 错误。

我在 /app/webroot 启动 PHP 5.4 服务器：

```
$ php -S localhost:8080 
```

对索引 (http://localhost:8080) 的请求正常，一切正常。但是当我访问一些控制器/操作（http://localhost:8080//sections/about/，在我的例子中）时，texto 显示正常，但是对资源（css、js 和图像）的请求失败。

以下是服务器的一些日志：

请求索引时：...

请求控制器/动作时：...

对“css/style.css”的请求前缀必须是“/”，但它正在发送“/index.php/sections/”

/app/webroot 的 .htaccess 是（CakePHP 默认的 .htaccess）：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?/$1 [QSA,L] 
```

有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T00:59:47.883

内置服务器**不支持**.htaccess 文件。

您应该关闭 Cakephp 中的 Url Rewriting，至少在开发中。

也许，在黑客方面，您可以从[jaytaph HtRouter 项目](https://github.com/jaytaph/htrouter)中找到乐趣，该项目声称是“一个 PHP 5.4 内部 Web 服务器 .htaccess 解析器和解释器”。

希望这可以帮助 ！

# html - 无法居中 Twitter 关注按钮和一些文本剪切

> ID：10867098
> 
> 赞同：2
> 
> 时间：2012-06-03T00:55:17.200
> 
> 标签：html, css, twitter, twitter-button

我的推特关注按钮出现了一些奇怪的行为。它似乎没有居中并且一些文本被剪掉（文本应该是“关注@HackerUofT”，但它只显示“关注”）。链接[http://hacker-universityoftoronto.appspot.com/](http://hacker-universityoftoronto.appspot.com/)

```
<center class="social_media">
    <a href="https://twitter.com/HackerUofT" class="twitter-follow-button" data-show-count="false">Follow @HackerUofT</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</center> 
```

当我在 Chrome 上检查元素并将中心更改为 div 时，它似乎可以解决所有问题，但是当我实际将代码编辑为 div 时，它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T00:58:42.890

不要使用 ceneter 标签，因为它将在 html5 标准中被删除。使用文本对齐。 [http://jsfiddle.net/6f5aL/](http://jsfiddle.net/6f5aL/)

```
<div style="text-align:center">
    <a href="https://twitter.com/HackerUofT" class="twitter-follow-button" data-show-count="false">Follow @HackerUofT</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T05:49:08.547

在社交媒体类中添加文本对齐

```
.social_media
{
    text-align:center
} 
```

[http://jsfiddle.net/CsETG/](http://jsfiddle.net/CsETG/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T08:30:37.793

抓到了罪魁祸首。当我检查您的代码时，该`show-screen-name`属性设置为`false`.

只需添加`data-show-screen-name="true"`到您的`<a href>`行，如下所示。

```
<a href="https://twitter.com/HackerUofT" class="twitter-follow-button" data-show-count="false" data-show-screen-name="true">Follow @HackerUofT</a> 
```

没有什么可以改变的。

干杯！！！

# javascript - 如何打印从函数返回的变量？

> ID：10867107
> 
> 赞同：0
> 
> 时间：2012-06-03T00:57:05.117
> 
> 标签：javascript, jquery, function

我有这个功能：

```
function findAddressViaGoogle(address){
     var geocoder = new google.maps.Geocoder();
     geocoder.geocode( { 'address': address }, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            return results[0].formatted_address;
        } else {
            console.log("Unable to find address: " + status);
        }
     });
} 
```

如何打印此函数的返回值？

如果我做：

```
$('#location-suggest').text('Do you mean <a>'+findAddressViaGoogle($(this).val())+'</a> ?'); 
```

它打印未定义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T00:59:48.897

您在寻找[document.write](https://developer.mozilla.org/en/document.write)吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T01:06:34.477

像这样：

```
$(".putYourSelectorHere").html(findAddressViaGoogle()) 
```

替换`.putYourSelectorHere`为您的选择器（`#output`例如）。如果要在正文中打印结果，请使用`body`选择器：

```
$("body").html(findAddressViaGoogle()) 
```

[http://api.jquery.com/html/](http://api.jquery.com/html/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T01:14:37.870

回调在内部某处被调用，`Geocoder()`并且在您的函数内部未收到其返回值`findAddressViaGoogle()`。

**您可以初始化一个变量并将值传递给它：**

```
function findAddressViaGoogle(address){
  var address = "";
  var geocoder = new google.maps.Geocoder();

  geocoder.geocode( { 'address': address }, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      address = results[0].formatted_address;
    } else {
      console.log("Unable to find address: " + status);
    }
  });

  return address;
}

var myAddress = findAddressViaGoogle('foobar');
alert(myAddress); 
```

另外，请记住，您必须先调用函数才能返回任何内容。

**所以要传递收集到的值：**

```
$('#myElementID').html(findAddressViaGoogle('foobar')); 
```

# android - 带有一些非标准列的 Android Listview

> ID：10867109
> 
> 赞同：0
> 
> 时间：2012-06-03T00:57:37.433
> 
> 标签：android

下图是我正在寻找的 Listview 行。它的库存清单。

![在此处输入图像描述](../Images/a9ee44afc00320b9509c0afd6e7c3c45.png)

问题：

如何绘制/创建这种列表视图行，其中

1）第一列没有水平。或垂直。分割线。

2）第二列是一种带有两个水平的盒子。和垂直分割线。

第二列和第三列之间有一个空格。

3) 第三列是标准列表视图行，其中包含文本和小图标。

如何结合所有 3 使这成为一个爵士乐行？:)

我确实知道如何仅使用第 3 列来制作列表视图；与文本和图像。但是列间距和垂直线是我不知道的。

谢谢你的任何建议

雅各布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T02:02:20.537

创建一个布局，如`ListView`. 我只是在你的路上帮助你。请注意，您可能想要进行一些改进，例如，不要对“正方形”的大小进行硬编码，而是从`dimens.xml`不同的屏幕密度/大小存储桶中提供它们。

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="?android:attr/listPreferredItemHeight"
    android:gravity="center_vertical">

    <View android:layout_width="30dp" android:layout_height="30dp"
        android:layout_margin="5dp" android:background="@drawable/border_color_red" />

    <TextView android:layout_width="?android:attr/listPreferredItemHeight"
        android:layout_height="?android:attr/listPreferredItemHeight"
        android:background="@drawable/border" android:gravity="center"
        android:text="QTY" android:textAppearance="?android:attr/textAppearanceMedium" />

    <RelativeLayout android:layout_width="0dp"
        android:layout_height="?android:attr/listPreferredItemHeight"
        android:layout_marginLeft="5dp" android:layout_marginRight="5dp"
        android:layout_weight="1" android:background="@drawable/border"
        android:gravity="center_vertical" android:padding="5dp">

        <TextView android:id="@android:id/text1"
            android:layout_width="fill_parent" android:layout_height="wrap_content"
            android:layout_centerVertical="true" android:layout_toLeftOf="@+id/star"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <CheckBox android:id="@+id/star" style="?android:attr/starStyle"
            android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:layout_centerVertical="true" android:layout_toLeftOf="@+id/box_right"
            android:text=" " />

        <View android:id="@+id/box_right" android:layout_width="30dp"
            android:layout_height="30dp" android:layout_alignParentRight="true"
            android:layout_centerVertical="true" android:layout_margin="5dp"
            android:background="@drawable/border_color_red" />
    </RelativeLayout>

</LinearLayout> 
```

将`ListView`需要隐藏其分隔线：

```
<ListView android:id="@android:id/list" android:layout_width="fill_parent"
        android:layout_height="fill_parent" android:divider="@null">
        <!-- Preview: listitem=@layout/list_item_layout -->
    </ListView> 
```

使用简单的添加边框`ShapeDrawable`：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <stroke android:height="1dp" android:width="1dp" android:color="#000" />
    <solid android:color="@android:color/transparent" />
</shape> 
```

更改`solid`颜色以创建不同的填充颜色（例如正方形）。

结果看起来有点像这样：

![列表项布局](../Images/35e5765c2e53434a53970ca54b33f855.png)

最大的缺点是没有真正简单的方法来摆脱不同行之间的“双”分隔符。如果它真的困扰你，肯定有几种方法可以解决它们（例如，为适配器中的第一个和最后一个项目膨胀不同的布局，或者将第一个和最后一个项目添加为页眉和页脚，或者将行分解为然后可以切换的单独视图等...）。

我没有添加，`ImageView`因为那将是不言自明的。将其放置在与“项目”相同的位置，`TextView`并根据您是要显示文本还是图像来在两者之间切换。

我假设您将能够`Adapter`为布局提出匹配的（和“ViewHolder”/“RowWrapper”）。

如果仍有任何不清楚的地方，请留下一行。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T01:06:01.227

我使用 TableLayout 和 TableRow 做了类似的事情。它允许您在 XML 中制作“行模板”，然后按照您想要的任何顺序实现它们。

假设您的活动使用布局 main.xml：

```
setContentView(R.layout.main); 
```

然后，您将根据需要对每个行模板进行膨胀：

```
 LayoutInflater myInflate = (LayoutInflater)getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
     row1 = (TableRow) myInflate.inflate(R.layout.matchesoverviewlistitem, null);

     // Here you can do anything you want with the table row elements
     tv = (TextView)row1.findViewById(R.id.matchesOverLabel);
     tv.setText("MyText");

     row1.setTag(n);
     row1.setOnClickListener(seriesListener);

     // Finally add the table row to the tableLayout
     myTable.addView(row1,new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT)); 
```

当对多行使用不同的布局时，这对我来说效果很好。

# jquery - 更改表格行高并在行中添加更多数据

> ID：10867111
> 
> 赞同：0
> 
> 时间：2012-06-03T00:58:11.607
> 
> 标签：jquery, html-table

我需要一个 html 表，在其中单击任何行中的一个值，然后整个行应该展开（用幻灯片动画向上或向下会很好），我需要在行内插入一个图表。

我应该如何使用 jQuery 执行此操作，而且我可能需要将图表放在单独的文件中，并将文件包含在行中的潜水或图表的一些更好的容器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T01:35:59.910

有很多方法可以做到这一点。我的示例使用了一个按钮，但您可以将 click 事件放在任何东西上。

[http://jsfiddle.net/lucuma/Y4nC8/2/](http://jsfiddle.net/lucuma/Y4nC8/2/)

这是一个例子

```
<table>
 <tr><td>Col</td><td>Col</td><td><button>Add stuff</button></td></tr>
 <tr><td>Col</td><td>Col</td><td><button>Add stuff</button></td></tr>
 <tr><td>Col</td><td>Col</td><td><button>Add stuff</button></td></tr>
 <tr><td>Col</td><td>Col</td><td><button>Add stuff</button></td></tr>
 <tr><td>Col</td><td>Col</td><td><button>Add stuff</button></td></tr>
</table>​ 
```

js：

```
$(document).ready(function() {
  $('button').click(function() {
    var $newstuff = $('<div>my data<br />more data <br /> ok good</div>');
    $newstuff.appendTo($(this).closest('tr').find('td:eq(0)')).slideDown();

  });    
}); 
```

​</p>

# ruby-on-rails - 无法运行 Rails 服务器

> ID：10867112
> 
> 赞同：1
> 
> 时间：2012-06-03T00:58:14.517
> 
> 标签：ruby-on-rails, ruby, terminal

我正在努力获取我的第一个 rails 应用程序，但无论出于何种原因，当我运行命令时`$rails server`，我的终端会抛出此错误：

```
/Users/Toni/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/resolver.rb:287:in `resolve': Could not find gem 'jquery-rails (= 2.0.0) ruby' in the gems available on this machine. (Bundler::GemNotFound)
    from /Users/Toni/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/resolver.rb:161:in `start'
    from /Users/Toni/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/resolver.rb:128:in `block in resolve'
    from /Users/Toni/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/resolver.rb:127:in `catch'
    from /Users/Toni/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/resolver.rb:127:in `resolve'
    from /Users/Toni/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/definition.rb:192:in `resolve'
    from /Users/Toni/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/definition.rb:127:in `specs'
    from /Users/Toni/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/environment.rb:27:in `specs'
    from /Users/Toni/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rubygems-bundler-1.0.2/lib/rubygems-bundler/noexec.rb:41:in `candidate?'
    from /Users/Toni/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rubygems-bundler-1.0.2/lib/rubygems-bundler/noexec.rb:60:in `setup'
    from /Users/Toni/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rubygems-bundler-1.0.2/lib/rubygems-bundler/noexec.rb:75:in `<top (required)>'
    from /Users/Toni/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
    from /Users/Toni/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
    from /Users/Toni/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
    from /Users/Toni/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/bin/ruby_noexec_wrapper:9:in `<main>' 
```

我在 Stack Overflow 上找不到任何东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T01:02:50.430

您需要安装 Rails 启动时使用的必需 gem。在你运行之前`rails s`一定要运行`bundle install`或`bundle update`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T01:06:57.933

确保您的 Gemfile 有一行如下所示：`gem 'jquery-rails'`

然后从您的项目目录中：`bundle install`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T09:31:34.220

因为在 Rubygems 服务器上，该版本显示：

```
2.0.0 December 20, 2011 yanked 
```

# solr - Solr 距离过滤

> ID：10867113
> 
> 赞同：2
> 
> 时间：2012-06-03T00:58:32.060
> 
> 标签：solr, filter, geospatial

我正在尝试使用 Solr 进行距离范围搜索。

我知道在 5 公里范围内搜索过滤非常容易 `&q=*:*&fq={!geofilt pt=45.15,-93.85 sfield=store d=5}`

如果我在**5 到 10 公里**的范围内寻找，我所追求的是如何做同样的事情？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T07:13:10.223

这里有几种方法可以解决这个问题。很明显，查询进入过滤查询（“fq”参数），因为目的不是修改分数。并假设这些参数是在请求 URL 中设置的（尽管它们不必放置在那里）：

```
pt=45.15,-93.85&sfield=store 
```

这是一种方法：

```
_query_:"{!geofilt d=10}" -_query_:"{!geofilt d=5}" 
```

我使用 _query_ Solr 语法 hack 输入了一个子查询，它提供了将查询解析器从 Lucene 切换到 geo 的机会。

这是另一种可能最快的方法：

```
{!frange l=5 u=10}geodist() 
```

这是一个函数查询，返回然后限制在所需范围内的距离。它可能更快，因为它将对每个文档进行一次评估，而不是像以前那样评估两次。

您可能希望将其标记为[不可缓存](http://www.lucidimagination.com/blog/2012/02/10/advanced-filter-caching-in-solr/)并添加一个 bbox 过滤器，以便检查每个文档的次数要少得多。 **这是最终结果**（不是 url 转义）：

```
pt=45.15,-93.85&sfield=store&fq={!frange l=5 u=10 cache=false cost=100}geodist()&fq={!bbox d=10} 
```

# c# - windows phone 7中的循环声音

> ID：10867117
> 
> 赞同：0
> 
> 时间：2012-06-03T00:59:24.123
> 
> 标签：c#, windows-phone-7, soundeffect

我试图在按下按钮时让声音循环播放，然后在再次按下相同的按钮时停止声音。我有多个同时播放的声音（所有声音都在循环播放），所有声音都应该能够以任何顺序开始和停止。

我的问题？

如果您按下一个按钮，则声音循环正常，并且当再次按下按钮时它将停止，但是如果您按下一个按钮（所以一个声音正在循环）然后再按另一个（尝试同时播放两种声音）然后第一个声音停止了，我一生都无法弄清楚为什么？

我的代码：

```
 private void button3_Click(object sender, RoutedEventArgs e)
    {

        SoundEffect sound3;
        int x = 0;

        StreamResourceInfo SoundFileInfo = App.GetResourceStream(new Uri("tracks/drum (human).wav", UriKind.Relative));

        sound3 = SoundEffect.FromStream(SoundFileInfo.Stream);

        SoundEffectInstance sound3instance = sound3.CreateInstance();

        if (button3.Content.Equals("Sound 3"))
        {
            sound3instance.IsLooped = true;
            sound3instance.Play();
            button3.Content = "Playing";
        }
        else
        {
            sound3instance.Pause();
            button3.Content = "Sound 3";
        }

    }

    private void button4_Click(object sender, RoutedEventArgs e)
    {
        SoundEffect sound4;

        StreamResourceInfo SoundFileInfo2 = App.GetResourceStream(new Uri("Cow Moo 1.wav", UriKind.Relative));

        sound4 = SoundEffect.FromStream(SoundFileInfo2.Stream);

        SoundEffectInstance sound4instance = sound4.CreateInstance();

        if (button4.Content.Equals("Sound 4"))
        {
            sound4instance.IsLooped = true;
            sound4instance.Play();
            button4.Content = "PLaying";
        }
        else
        {
            sound4instance.Pause();
            button4.Content = "Sound 4";
        }
    } 
```

非常感谢，

杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T01:08:02.070

sound3instance 和 sound4instance 是否存储在方法之外？

# python - 文本文件空格不能在 Python 中删除

> ID：10867122
> 
> 赞同：1
> 
> 时间：2012-06-03T00:59:51.693
> 
> 标签：python, io, numpy, text-files

我有一个以这种方式排序的文本文件：

```
1,1,1,
1,1,1,
1,1,1, 
```

我的 Python 脚本会将文本文件中的每一行读取为字符串，基于逗号分隔，然后将其转换为十进制数以进行绘图和分析。我想创建一个由合并行组成的单个数组，如下所示：

```
[1,1,1
 1,1,1
 1,1,1] 
```

我已经尝试使用 numpy 中的 vstack 方法，但似乎文本文件中有一个我无法摆脱的空白。

```
>>> 
[735019.6277, 0.0, 1.0178, 3.0, -2.104]
[735019.6278, 0.0, 15.361, 3.0, -2.078]
[735019.628, 0.0, 29.579, 3.0, -2.0682]
[] 
```

由于这个空间，我无法将每一行加入一个数组。

这是代码：

```
from numpy import *
from scipy import *

file = open("results_test.txt", 'r')
line = file.readline()
data = line.split(',')
data[-1] = 0
table = data
x = 0
while (x < len(table)):
    table[x] = float(table[x])
    x = x+1
del(table[-1])
print table

while line:
    line = file.readline()
    data = line.split(',')
    data[-1] = 0
    x = 0
    while (x < len(data)):
        data[x] = float(data[x])
        x = x+1
    del(data[-1])
    print data
    table = vstack((table,data))

file.close() 
```

这是错误：

```
Traceback (most recent call last):
  File "C:\Python27\read_txt.py", line 26, in <module>
    table = vstack((table,data))
  File "C:\Python27\lib\site-packages\numpy\core\shape_base.py", line 226, in vstack
    return _nx.concatenate(map(atleast_2d,tup),0)
ValueError: array dimensions must agree except for d_0 
```

关于这个空间是什么以及如何摆脱它以便我可以使用 vstack 方法的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T01:07:00.993

这是 while 循环容易出错的一个例子。尽量避免它们。

首先检查行是否为空 ( `while line`)，**然后**读取新行 ( `line = file.readline()`)。这使得支票相当无用。

相反，使用`for line in file`并删除该`line = file.readline()`行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T01:03:08.870

要删除您读取的数据中的额外空格，只需对每一行执行以下操作：

```
data = [x.strip() for x in line.split(',')] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T01:07:09.753

试试这个：

```
data = []
for line in file:
    data.extend(int(x) for x in line.split(',') if not x.isspace()) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T01:07:09.893

正如我在上面的评论中提到的，使用[strip(](http://docs.python.org/library/stdtypes.html?highlight=strip#str.rstrip) ) 来清理你的数据。改变你的

```
data = line.split(',') 
```

到

```
data = line.split(',')
data = [i.strip() for i in data] # insert this line 
```

您可能还想考虑使用此构造打开文件，其优点是它会在您完成后为您关闭文件，以及在发生异常的情况下。

```
with open("results_test.txt") as file:
    line = file.readline()
      ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T07:37:20.423

```
import itertools

parse_numbers = lambda s: map(float, filter(None, map(str.strip, s.split(','))))

with open('input.txt') as f:
    result = list(itertools.chain(*map(parse_numbers, f.readlines())))

print result 
```

# algorithm - 在有向无环图中寻找最长路径

> ID：10867128
> 
> 赞同：1
> 
> 时间：2012-06-03T01:01:27.207
> 
> 标签：algorithm, graph, directed-acyclic-graphs

我需要为一组有向无环图找到从节点 0 开始的最长路径。我正在使用维基百科的[最长路径问题算法](http://en.wikipedia.org/wiki/Longest_path_problem)。我的算法适用于大多数图形，但对于其他图形，它没有给出正确的结果。算法是：

```
private static int DAGLongestPath(Graph G) {
int n = G.order();
int[] topOrder = new int[n];
topOrder = topSort2(G);

for (int i = 0; i < topOrder.length; i++) {
    topOrder[i] -= 1;
}   

int[] lengthTo = new int[n];
for (int i = 0; i < n; i++) lengthTo[i] = 0;

for (int i = 0; i < topOrder.length; i++) { //for each vertex v in topOrder(G) do
    ArrayList<Integer> neighbors = new ArrayList<Integer>();
    neighbors = G.neighbors(topOrder[i]);
    int v = topOrder[i];
    for (int j = 0; j < neighbors.size(); j++) {
        int w = neighbors.get(j);
        if(lengthTo[w] <= lengthTo[v] + 1) {
            lengthTo[w] = lengthTo[v] + 1;
        }
    }   
}   

int max = 0;
for (int i = 0; i < n; i++ ) {
    max = Math.max(max, lengthTo[i]);
}
return max;
} 
```

图实现使用邻接列表来存储图。如果我通过如下图表：

```
9 // Number of nodes
0: 1 2 
1: 2 3 4
2: 4 8
3: 5 6
4: 6 7 8
5:
6:
7:
8: 7 
```

我得到答案 5，这是正确的。但是，如果我通过图表：

```
8 // Number of nodes
0: 2 3
1:
2:
3: 5
4: 5
5: 2
6: 7
7: 4 
```

然后我得到 2，而正确答案应该是 3。

我使用的 TopSort2 算法是：

```
public static int[] topSort2(Graph G){
    int n = G.order();
    int[] sort = new int[n];

    int[] inDeg = new int[n];
    for (int i=0; i<n; i++) inDeg[i] = G.inDegree(i);

    int cnt = 0;
    boolean progress = true;
    //
    while (progress){
        progress = false;

        for (int v=0; v<n; v++){
            if (inDeg[v] == 0){
                sort[v] = ++cnt;
                progress = true;
                inDeg[v] = -1;

                ArrayList<Integer> nbrs = G.neighbors(v);
                for (int u : nbrs){
                    inDeg[u] = inDeg[u] - 1;
                }
            }
        } // for v

    } // while nodes exist with inDegree == 0.

    return sort;
} 
```

DFS算法是：

```
private static int doDFS(Graph G, int v, int[] PreOrder, int[] PostOrder, countPair cnt){
    PreOrder[v] = cnt.inc1();
    int dfsTotal = 0;

    ArrayList<Integer> nbrs = G.neighbors(v);
    for (int i : nbrs) {
        if (PreOrder[i] == 0) {
            int dfsTemp = doDFS(G, i, PreOrder, PostOrder, cnt);
            dfsTotal = Math.max(dfsTotal, dfsTemp);
        }
    }
    PostOrder[v] = cnt.inc2();
    if(nbrs.size() > 0 ) {
        dfsTotal++;
    }
    return dfsTotal;
}

public static int DFS(Graph G, int v, int[] PreOrder, int[] PostOrder){
    int n = G.order();
    int total = 0;
    for (int i=0; i<n; i++) PreOrder[i] = PostOrder[i] = 0;

    countPair cnt = new countPair();
    total = doDFS(G, v, PreOrder, PostOrder, cnt);

    return total;
}

private static class countPair {       // private counters for DFS search
    int cnt1, cnt2;
    int inc1() { return ++cnt1; }
    int inc2() { return ++cnt2; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T03:42:41.943

我认为问题是你的`topSort2()`功能

在`int[] sort`函数返回中，索引表示顶点，内容表示顺序。即如果你有`sort[1] = 2`，你的意思是顶点1是第二个顶点

但是，当您使用它时，您将内容作为顶点。即您将`topOrder[i]`其视为顶点，而实际上`i`应该是顶点

# twitter-bootstrap - “英雄单位”是什么意思？

> ID：10867137
> 
> 赞同：23
> 
> 时间：2012-06-03T01:03:03.813
> 
> 标签：twitter-bootstrap, language-history

“英雄”一词是什么意思，为什么用它来命名网站/页面的“主要信息”？

具体来说，我想知道术语“英雄”或短语“英雄单位”是否是我设法错过的网页设计中使用的一些常见术语。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-03T01:16:11.980

电影/电视道具设计师使用“英雄”一词；“英雄道具”是为特写镜头打造的。最详细，最真实。这是道具的最佳版本，也是最重要的道具。我一直认为这就是他们得到这个词的地方。

# django - Model.objects.get() 或无

> ID：10867138
> 
> 赞同：32
> 
> 时间：2012-06-03T01:03:08.390
> 
> 标签：django, django-models

有没有办法在一次调用中完成以下操作：

```
Model.objects.get(id=1) else None 
```

我找到这样做的唯一方法是：

```
try:
    object = Model...
except:
    object = None 
```

有没有办法在 django 的一次调用中做到这一点？

**更新**：除了在一个块中似乎没有其他方法可以做到这一点[，](https://stackoverflow.com/questions/3090302/in-django-how-do-i-objects-get-but-return-none-when-nothing-is-found)`try/except`但这里有一个更好的答案：

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2016-08-19T22:50:33.870

这个怎么样：

```
obj = Model.objects.filter(id=1).first() 
```

现在如果没有 id=1 的对象存在 obj 将是 None

参考：[https ://docs.djangoproject.com/en/3.2/ref/models/querysets/#django.db.models.query.QuerySet.first](https://docs.djangoproject.com/en/3.2/ref/models/querysets/#django.db.models.query.QuerySet.first)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T02:29:21.143

如果您在 Web 请求中使用它，并且如果对象不存在，您想返回 404，也许您应该使用

```
get_object_or_404(Mode, pk=1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T08:44:17.787

get_object_or_404

在你的模型中做。. .

```
@models.permalink
def get_absolute_url(self):
    return "/blog/%s/" self.slug 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-18T14:01:20.430

这个怎么样？

```
model_to_find = next(iter(Model.objects.filter(id=1)), None) 
```

# iphone - 未捕获的异常错误！简单的文档应用

> ID：10867141
> 
> 赞同：0
> 
> 时间：2012-06-03T01:03:31.297
> 
> 标签：iphone, ios, uncaught-exception

删除了不应该存在的冒号，因为我的选择器没有。它修复了它，然后出现了这个问题：

```
 2012-06-02 22:33:10.083 TinyPix[10433:fb03] load OK
2012-06-02 22:33:10.084 TinyPix[10433:fb03] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<BIDTinyPixDocument 0x6e665a0> valueForUndefinedKey:]: this class is not key value coding-compliant for the key timeStamp.'
*** First throw call stack:
(0x16b0022 0x1841cd6 0x16afee1 0x9c8efe 0x937831 0x936c99 0x5f47 0x5e77 0x93af30 0x93aedb 0x59ed 0x4546e3 0x40778d9 0x4078509 0x15e7803 0x15e6d84 0x15e6c9b 0x15997d8 0x159988a 0x1b626 0x2a5d 0x29c5)
terminate called throwing an exception 
```

这是我的详细文件：我在 self.detailDescriptionLabel.text 行上收到 SIGABRT 错误。不知道怎么回事。

```
#import "BIDDetailViewController.h"

@interface BIDDetailViewController ()
- (void)configureView;
@end

@implementation BIDDetailViewController

@synthesize detailItem = _detailItem;
@synthesize detailDescriptionLabel = _detailDescriptionLabel;

#pragma mark - Managing the detail item

- (void)setDetailItem:(id)newDetailItem
{
    if (_detailItem != newDetailItem) {
        _detailItem = newDetailItem;

        // Update the view.
        [self configureView];
    }
}

- (void)configureView
{
    // Update the user interface for the detail item.

    if (self.detailItem) {
        self.detailDescriptionLabel.text = [[self.detailItem valueForKey:@"timeStamp"] description];
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [self configureView];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    self.detailDescriptionLabel = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

这是我的文件：

```
#import "BIDMasterViewController.h"
#import "BIDTinyPixDocument.h"

#import "BIDDetailViewController.h"

@interface BIDMasterViewController () <UIAlertViewDelegate>

@property (strong, nonatomic) NSArray *documentFilenames;
@property (strong, nonatomic) BIDTinyPixDocument *chosenDocument;
-(NSURL *)urlForFilename:(NSString *)filename;
-(void)reloadFiles;
- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath;
@end

@implementation BIDMasterViewController
@synthesize colorControl;
@synthesize documentFilenames;
@synthesize chosenDocument;

@synthesize fetchedResultsController = __fetchedResultsController;
@synthesize managedObjectContext = __managedObjectContext;

- (void)awakeFromNib
{
    [super awakeFromNib];
}

-(void)viewWillAppear:(BOOL)animated;
{
    [super viewWillAppear:animated];
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    NSInteger selectedColorIndex = [prefs integerForKey:@"selectedColorIndex"];
    self.colorControl.selectedSegmentIndex = selectedColorIndex;

}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.navigationItem.leftBarButtonItem = self.editButtonItem;

    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)];
    self.navigationItem.rightBarButtonItem = addButton;

    [self reloadFiles];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void)insertNewObject
{
// get the name
    UIAlertView *alert =
    [[UIAlertView alloc] initWithTitle:@"Filename"
                               message:@"Enter a name for your new TinyPix document."
                              delegate:self
                     cancelButtonTitle:@"Cancel"
                     otherButtonTitles:@"Create", nil];
    alert.alertViewStyle = UIAlertViewStylePlainTextInput;
    [alert show];
}

#pragma mark - Table View

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
        [context deleteObject:[self.fetchedResultsController objectAtIndexPath:indexPath]];

        NSError *error = nil;
        if (![context save:&error]) {
             // Replace this implementation with code to handle the error appropriately.
             // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        }
    }   
}

- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // The table view should not be re-orderable.
    return NO;
}

#pragma mark - Fetched results controller

- (NSFetchedResultsController *)fetchedResultsController
{
    if (__fetchedResultsController != nil) {
        return __fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Event" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:20];

    // Edit the sort key as appropriate.
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"timeStamp" ascending:NO];
    NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];

    [fetchRequest setSortDescriptors:sortDescriptors];

    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Master"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
         // Replace this implementation with code to handle the error appropriately.
         // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return __fetchedResultsController;
}    

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type
{
    switch(type) {
        case NSFetchedResultsChangeInsert:
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{
    UITableView *tableView = self.tableView;

    switch(type) {
        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView endUpdates];
}

/*
// Implementing the above methods to update the table view in response to individual changes may have performance implications if a large number of changes are made simultaneously. If this proves to be an issue, you can instead just implement controllerDidChangeContent: which notifies the delegate that all section and object changes have been processed. 

 - (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    // In the simplest, most efficient, case, reload the table view.
    [self.tableView reloadData];
}
 */

- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
    NSManagedObject *object = [self.fetchedResultsController objectAtIndexPath:indexPath];
    cell.textLabel.text = [[object valueForKey:@"timeStamp"] description];
}

-(NSURL *)urlForFilename:(NSString *)filename {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentDirectory = [paths objectAtIndex:0];
    NSString *filePath = [documentDirectory stringByAppendingPathComponent:filename];
    NSURL *url = [NSURL fileURLWithPath:filePath];
    return url;
}

-(void)reloadFiles {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *path = [paths objectAtIndex:0];
    NSFileManager *fm = [NSFileManager defaultManager];

    NSError *dirError;
    NSArray *files = [fm contentsOfDirectoryAtPath:path error:&dirError];
    if (!files) {
        NSLog(@"Encountered error while trying to list files in directory %@: %@", path, dirError);
    }

    NSLog(@"found files: %@", files);

    files = [files sortedArrayUsingComparator:^NSComparisonResult(id filename1, id filename2) {
        NSDictionary *attr1 = [fm attributesOfItemAtPath:[path stringByAppendingPathComponent:filename1]
                                                   error:nil];
        NSDictionary *attr2 = [fm attributesOfItemAtPath:[path stringByAppendingPathComponent:filename2]
                                                                                        error:nil];
                               return [[attr2 objectForKey:NSFileCreationDate] compare:[attr1 objectForKey:NSFileCreationDate]];
                               }];

        self.documentFilenames = files;
        [self.tableView reloadData];

}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [self.documentFilenames count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"FileCell"];

    NSString *path = [self.documentFilenames objectAtIndex:indexPath.row];
    cell.textLabel.text = path.lastPathComponent.stringByDeletingPathExtension;
    return cell;
}

-(IBAction)chooseColor:(id)sender {
    NSInteger selectedColorIndex = [(UISegmentedControl *)sender selectedSegmentIndex];
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    [prefs setInteger:selectedColorIndex forKey:@"selectedColorIndex"];
}

-(void)alertView:(UIAlertView *)alertView
didDismissWithButtonIndex:(NSInteger)buttonIndex {
    if (buttonIndex == 1) {
        NSString *filename = [NSString stringWithFormat:@"%@.tinypix",
                              [alertView textFieldAtIndex:0].text];
        NSURL *saveUrl = [self urlForFilename:filename];
        self.chosenDocument = [[BIDTinyPixDocument alloc] initWithFileURL:saveUrl];
        [chosenDocument saveToURL:saveUrl
                 forSaveOperation:UIDocumentSaveForCreating
                completionHandler:^(BOOL success) {
                    if (success) {
                        NSLog(@"save OK");
                        [self reloadFiles];
                        [self performSegueWithIdentifier:@"masterToDetail"
                                                  sender:self];
                    } else {
                        NSLog(@"failed to save!");
                    }
                }];
    }
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if (sender == self) {
        // if sender == self, a new document has just been created,
        // and chosenDocument is already set.

        UIViewController *destination = segue.destinationViewController;
        if ([destination respondsToSelector:@selector(setDetailItem:)]) {
            [destination setValue:self.chosenDocument forKey:@"detailItem"];
        }
    }else {
        // find the chose document from the tableview
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        NSString *filename = [documentFilenames objectAtIndex:indexPath.row];
        NSURL *docUrl = [self urlForFilename:filename];
        self.chosenDocument = [[BIDTinyPixDocument alloc] initWithFileURL:docUrl];
        [self.chosenDocument openWithCompletionHandler:^(BOOL success) {
            if (success) {
                NSLog(@"load OK");
                UIViewController *destination = segue.destinationViewController;
                if ([destination respondsToSelector:@selector(setDetailItem:)]) {
                    [destination setValue:self.chosenDocument forKey:@"detailItem"];
                }
            }else {
                NSLog(@"failed to load!");
            }
        }];
    }
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T01:50:31.247

您将选择器指定为`insertNewObject:`，最后的冒号表示它需要一个参数。您实现的`insertNewObject`方法不带参数，对于 Objective-C 来说，这使得它变得不同，它找不到一个参数方法。

您应该将实现更改`- (IBAction)insertNewObject:(id)sender {...}`为匹配`@selector(insertNewObject:)`。

# javascript - Javascript 中的多个函数

> ID：10867142
> 
> 赞同：2
> 
> 时间：2012-06-03T01:04:17.443
> 
> 标签：javascript, function

如果这是一个非常愚蠢的问题，我很抱歉，我对 JavaScript 有点陌生。我正在尝试制作一个包含多个功能的网页，但只有第一个功能会成功。我在谷歌上搜索，我只得到一次调用多个函数的结果，但这不是我想要的。这是我正在尝试做的一个例子：

```
<html>
    <head>
        <script type="text/javascript">
            function frogger()
            {
                document.getElementById("descriptions").innerHTML="Frogger <br />Description: Get
                    the frog to the islands at the top of the screen without falling into the water or
                    getting hit by cars. <br />Controls: Up arrow key to move forward, down arrow key to
                    move backward, left arrow key to move left, and right arrow key to move right.";
            }
            function clear()
            {
                document.getElementById("descriptions").innerHTML=" ";
            }
        </script>
    </head>
    <body>
        <div id="descriptions" style="{height:100;}">
        </div>
        <div class="game" onmouseover="frogger()" onmouseout="clear()">
            <a href="/arcade/frogger.html"><img border="0" src="http://ggmedia.site50.net
/pics/frogger.PNG" height="100" width="100" /><br />Frogger</a>
        </div>
    </body>
</html> 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T01:13:08.533

对象中已经有一个命名`clear`的`document`函数。将您的功能命名为其他名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T01:10:12.433

您的字符串有换行符，您可以删除它们或`\`在每行的末尾添加一个

```
function frogger()
{
    document.getElementById("descriptions").innerHTML="Frogger <br />Description: Get\
the frog to the islands at the top of the screen without falling into the water or\
getting hit by cars. <br />Controls: Up arrow key to move forward, down arrow key to\
move backward, left arrow key to move left, and right arrow key to move right.";
} 
```

​ 编辑：如果您更改[`clear`](http://jsfiddle.net/mowglisanu/xrTAM/)函数的名称以说它[`clearx`](http://jsfiddle.net/mowglisanu/xrTAM/1/)有效，那就奇怪了。

编辑：显然在文档对象中有一个 clear 方法

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T01:12:18.280

```
function frogger() {
    document.getElementById("descriptions").innerHTML="Frogger <br />Description: Get the frog to the islands at the top of the screen without falling into the water or getting hit by cars. <br />Controls: Up arrow key to move forward, down arrow key to move backward, left arrow key to move left, and right arrow key to move right.";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T01:13:54.080

将函数重命名为`clear()`其他名称。我将其更改为`clearDesc()`并且工作正常（在修复字符串中的换行问题之后）。见[这里](http://jsfiddle.net/LfkV8/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T01:52:19.723

```
 <div class="game" onmouseover="frogger()" onmouseout="clearr()">mousee</div>
    <div id="descriptions"></div>
    <script type="text/javascript">
        var frogger = function () {
            this.innerHTML = ["Frogger <br />Description: Get}",
                    "the frog to the islands at the top of the screen without falling into the water or",
                    "getting hit by cars. <br />Controls: Up arrow key to move forward, down arrow key to",
                    "move backward, left arrow key to move left, and right arrow key to move right."].join('');
        }.bind(document.getElementById("descriptions"));
        //
        var clearr = function () {
            this.innerHTML = " ";
        }.bind(document.getElementById("descriptions"));

    </script> 
```

这是 jsfiddle.net 中的代码

[http://jsfiddle.net/gerst20051/6Neqv/](http://jsfiddle.net/gerst20051/6Neqv/)

# ruby-on-rails - 如何将 HTML 插入值插入到值中

> ID：10867145
> 
> 赞同：0
> 
> 时间：2012-06-03T01:05:24.130
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我正在尝试做一个简单的登录表单，它只是将您插入到 HTML 输入中的值与您在数据库中的数据进行比较。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T01:17:03.867

设置一个控制器并比较参数哈希。

```
expected_value = '...'
if params[:form_value] == expected_value
  do_something()
else
  do_something_else()
end 
```

# bash - 后台进程重定向到 COPROC

> ID：10867153
> 
> 赞同：3
> 
> 时间：2012-06-03T01:07:10.003
> 
> 标签：bash, ipc, pipe, io-redirection, coproc

在下面的测试脚本中，我运行了一个基本的协同进程`echo`，在后台运行的内置程序附加了它的标准输出：

```
#!/bin/bash
# TEST 1
coproc /bin/sleep 100
echo >&${COPROC[1]} & 
```

脚本总是失败，没有明显的原因，给出输出：

```
./test.sh: line 4: ${COPROC[1]}: Bad file descriptor 
```

我想知道正确的语法是否应该是这个（在重定向之前移动和号）：

```
#!/bin/bash
# TEST 2
coproc /bin/sleep 100
echo & >&${COPROC[1]} 
```

第二个示例似乎有效，因为它在执行期间没有报告错误，但是使用这种语法，实际上不会执行重定向；事实上，考虑这个其他测试：

```
#!/bin/bash
# TEST 3
/bin/echo abc & >xfile 
```

测试 3 创建文件`xfile`，但不向其中写入任何内容。奇怪的是，在重定向后再次尝试定位 & 符号会使`echo`工作正常：

```
#!/bin/bash
# TEST 4
/bin/echo abc >xfile & 
```

测试 4`xfile`在字符串中创建文件`abc`。

了解导致`coproc`重定向错误的原因或正确的语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-11-10T00:37:55.257

如其他地方所述，coproc 安排其文件描述符在子shell 中关闭。您可以使用

```
coproc { whatever; }
exec {WHATEVER[0]}<&${COPROC[0]}- {WHATEVER[1]}>&${COPROC[1]}- 
```

如果使用 4.3 版之前的 Bash，则必须为输入和输出变量使用单独的变量：

```
exec {IN}<&${COPROC[0]}- {OUT}>&${COPROC[1]}- 
```

如果使用 4.1 之前的 Bash，则必须使用固定的文件描述符编号：

```
exec 4<&${COPROC[0]}- 5>&${COPROC[1]}- ; IN=4 OUT=5 
```

对于交互式 shell，您可能需要考虑`disown`.

这种安排还有一个好处是您可以使用多个协同进程，即使 Bash 手册页说它不受支持。

正如其他地方所讨论的，请注意在进程之间共享管道的局限性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T03:23:41.363

您在其他地方得到了答案[http://lists.gnu.org/archive/html/bug-bash/2012-06/msg00027.html](http://lists.gnu.org/archive/html/bug-bash/2012-06/msg00027.html)：

> Coproc 文件描述符对子shell 不可用。它们是使用管道实现的，并且在子外壳中打开管道文件描述符会导致进程挂起并且无法正确终止，从而导致非常难以追踪和重现的错误。

# apache-flex - 如何判断一个DisplayObject是否已经渲染

> ID：10867159
> 
> 赞同：0
> 
> 时间：2012-06-03T01:07:35.353
> 
> 标签：apache-flex

我很困惑 的`visible`属性是否`DisplayObject`为：

*   *来自 Flex*的关于显示对象是否可见的指示。
*   *Flex*显示显示对象的指令。

我之所以问，是因为我正在使用 Flex Pilot 自动化一些 Flex 测试，并且我需要确定显示对象何时变为可点击。在我正在测试的应用程序中，*可点击*似乎意味着*呈现。*

鉴于应用程序的性质和我的测试，我认为监视该`updateCompleted`事件是不可行的。我需要一种方法来根据给定时刻的属性值及其容器的属性来检测显示对象是否可见。

我了解即使显示对象的`visible`属性为 true，也只有在其所有容器也可见时才可见。这意味着我必须通过编写一个 ActionScript 方法来扩展 Flex Pilot，以确定显示对象及其容器是否都具有`visible=true`. 但我担心即使是那个方法也不能确定显示对象是否真的被渲染，因此是可点击的。

我的困惑来自阅读 Adob​​e 的两个描述。

“[关于创建高级组件”](http://livedocs.adobe.com/flex/3/html/help.html?content=ascomponents_advanced_2.html)文档建议该`visible`属性由 Flex 在呈现显示对象后设置。在此描述中，设置值是 Flex 的工作，因此该值是*来自 Flex*的对显示对象是否可见的指示。

另一方面，Adobe 对该属性的[描述](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#visible)[表明`visible`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#visible)该属性是可写的。并且代码示例表明，如果应用程序更改了该值，Flex 将通过显示或隐藏显示对象来做出响应。在此描述中，应用程序将该值设置为*向 Flex*显示对象的指令。我猜在这种情况下，Flex 会重新渲染显示对象（如果`visible`从`false`to更改`true`）或其容器（如果`visible`从`true`to更改`false`）。

所以两个主要问题：

**属性是否`visible`以这两种方式使用，既作为来自 Flex 的关于显示对象可见性的指示，又作为向 Flex 指示是否显示对象的指示？**

**如果应用程序`visible`从 false 变为 true，那么显示对象何时真正可见？** 设置器返回时是否可见？或者设置属性只是安排对象在以后的某个事件中变得可见？如果是后者，则意味着可能有一段时间`visible`为真，但显示对象尚未渲染。如果是这种情况，我不知道如何从给定时刻的显示对象的状态来确定显示对象是否已被渲染。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T08:13:41.583

要呈现的 DisplayObject 有一些关键约束。首先，它必须在显示列表中。visible 必须设置为 true，否则它会从渲染中被忽略。最后一个关键方面是所谓的[弹性赛道](http://www.craftymind.com/2008/04/18/updated-elastic-racetrack-for-flash-9-and-avm2/)，它基本上描述了事件处理、代码执行和渲染发生的时间。因此，为 FlexEvent.UPDATE_COMPLETE 实现事件处理程序并没有那么错误，因为当属性更改时会调度这些事件处理程序，这会更改组件在屏幕上的呈现表示形式。

**是否在这两种方式中都使用了 visible 属性，既作为来自 Flex 的关于显示对象可见性的指示，又作为向 Flex 指示是否显示对象的指示？** 是的，在调度 FlexEvent.CREATION_COMPLETE 之前，框架最初将 visible 属性设置为 true，因此 Flash 播放器不会在某个状态下绘制组件（我不是指 Flex 视图状态），这介于两者之间构造并具有完整的初始化视图。

**如果应用程序将可见从 false 更改为 true，那么显示对象何时真正变得可见？**在下一个渲染周期发生之后。

# visual-studio-2010 - 在 Visual Studio 2010 中启动同一项目的两个实例

> ID：10867163
> 
> 赞同：0
> 
> 时间：2012-06-03T01:08:37.490
> 
> 标签：visual-studio-2010

我正在尝试使用 MSVC 2010 在 C++ 中开发多人游戏，并且我希望它在我点击开始调试时打开我的 exe 的两个可调试实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:49:00.963

您可以右键单击解决方案中的项目并选择调试 > 启动新实例以一次加载多个实例。

# c++ - 在 unix 上找不到 c++ 库

> ID：10867164
> 
> 赞同：1
> 
> 时间：2012-06-03T01:08:41.827
> 
> 标签：c++, unix

我编写了一个简单的 C++ 程序 test.cpp：

```
#include <iostream>
#include <string>

using namespace std;

int main() {
  string s;
  cin >> s;
  cout << s << endl;
  return 0;
} 
```

为什么运行`gcc test.cpp -o mytest`会给我这些错误，以及更多？

```
Undefined symbols for architecture x86_64:
  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string()", referenced from:
      _main in cc8rGYVq.o
  "std::cin", referenced from:
      _main in cc8rGYVq.o 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T01:11:31.123

不要使用命名的可执行文件`gcc`来编译和链接 C++ 程序；你必须使用`g++`. 它不仅可以选择适当的编译器选项，还可以链接到适合您的语言的正确库（这是您在这里遇到的问题。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T01:30:11.107

"gcc" 命令编译 C 代码，为了编译 C++ 代码你应该使用 "g++"

# java - Java Applet JSlider 宽度

> ID：10867168
> 
> 赞同：0
> 
> 时间：2012-06-03T01:09:48.873
> 
> 标签：java, applet, slider, jslider

我正在尝试在 JSlider 下绘制等宽的彩色矩形，以便刻度线分隔颜色。我真的很接近，但无法做到完美。我打印了一堆值，我的问题是滑块的宽度不是滑动条的实际长度。滑块的 x 位置也不是条形图的起始位置。这是我根据滑块位置设置彩色矩形边界的代码。

```
for(int i = 0; i < Global.emSpectrum.length; i++)  //emSpectrum.length is the number of colored rectangles
{
    emSpectrum.get(i).setColorRect(Global.emSpectrum[i], 13 + i * (int)((this.slider.getWidth())/Global.emSpectrum.length),     //13 lines up the first color under the bar
    this.slider.getY() + this.slider.getHeight()/2, (int)((this.slider.getWidth())/Global.emSpectrum.length), 
    (int)(Global.rectHeight * getHeight()));
} 
```

有没有更好的方法来解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T01:34:32.557

是的，一个不错的解决方案是使用一个字典，例如 a`HashTable<Integer, JLabel>`并用 JLabels 填充它，这些 JLabels 包含您的颜色矩形的 ImageIcons，使用与 JSlider 上的适当位置相对应的整数。例如，我的 SSCCE：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.util.Dictionary;
import java.util.Hashtable;

import javax.swing.*;

public class SliderEg extends JPanel {
   public static final Color[] COLORS = { Color.red, Color.orange,
         Color.yellow, Color.green, Color.blue, Color.cyan};
   private static final int BI_W = 30;
   private static final int BI_H = 10;
   private JSlider slider = new JSlider(0, 100, 0);

   public SliderEg() {
      int majorSpacing = slider.getMaximum() / (COLORS.length - 1);
      Dictionary<Integer, JLabel> dictionary = new Hashtable<Integer, JLabel>();
      slider.setMajorTickSpacing(majorSpacing);
      slider.setPaintLabels(true);
      slider.setPaintTicks(true);
      slider.setSnapToTicks(true);
      for (int i = 0; i < COLORS.length; i++) {
         ImageIcon icon = createColorIcon(COLORS[i]);
         JLabel label = new JLabel(icon);
         int key = i * majorSpacing;
         dictionary.put(key, label);
      }
      slider.setLabelTable(dictionary);

      setLayout(new BorderLayout());
      add(slider, BorderLayout.CENTER);
   }

   private ImageIcon createColorIcon(Color color) {
      BufferedImage img = new BufferedImage(BI_W, BI_H,
            BufferedImage.TYPE_INT_RGB);
      Graphics g = img.getGraphics();
      g.setColor(color);
      g.fillRect(0, 0, BI_W, BI_H);
      g.dispose();

      return new ImageIcon(img);
   }

   private static void createAndShowGui() {
      SliderEg mainPanel = new SliderEg();

      JFrame frame = new JFrame("SliderEg");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# c++ - 如何将 lua5.1 添加到 CMakeLists.txt？错误：未找到 lua.hpp

> ID：10867170
> 
> 赞同：0
> 
> 时间：2012-06-03T01:10:08.810
> 
> 标签：c++, lua, cmake

我在 CMakeLists.txt 中添加了以下几行：

```
find_package(Lua51 REQUIRED) 

include_directories(${LUA_INCLUDE_DIRS})

target_link_libraries(cmqhd ${LUA_LIBRARIES} ${Boost_LIBRARIES} ${GOBJECT_LIBRARIES} -lntl -lm -lgmp ) 
```

我仍然得到一个错误：

```
In file included from /home/kirill/Dropbox/work/dev/cmqhd/source/main.cc:10:0:
/home/kirill/Dropbox/work/dev/cmqhd/source/lua_read.h:9:17: fatal error: lua.h: No such file or directory
compilation terminated.
make[2]: *** [CMakeFiles/cmqhd.dir/source/main.cc.o] Error 1
make[1]: *** [CMakeFiles/cmqhd.dir/all] Error 2
make: *** [all] Error 2 
```

文件 lua_read.h 具有以下标头：

```
#ifndef LUA_READ_H

#define LUA_READ_H

#include <stdio.h>
#include <string.h>

#include <iostream>
#include <lua.hpp>
... 
```

**更新 (1)**

```
g++ main.C -I/usr/include/lua5.1/ -llua5.1 
```

编译

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:48:26.887

`${LUA_INCLUDE_DIR}`而不是`${LUA_INCLUDE_DIRS}`(dir, not dirS)

# javascript - $("html").animate 不起作用

> ID：10867174
> 
> 赞同：0
> 
> 时间：2012-06-03T01:10:42.820
> 
> 标签：javascript, jquery

我正在使用以下代码滚动到顶部平滑动画。这在 Mozilla 和 IE 浏览器中运行良好，但在 chrome 中它不起作用。任何人都可以帮忙。

```
$("#animate_top a").click(function(){   
    $("html").animate({scrollTop : 0},'slow');  
}); 
```

我已经添加了示例网址，点击“点击到达底部”，然后在 chrome、mozilla 和 ie 中点击底部的“顶部”链接。

[http://www.sanatanapublications.org/demo/sample.html](http://www.sanatanapublications.org/demo/sample.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T01:14:59.517

对于跨浏览器滚动，使用这个：

`$('html,body')`

如果您在动画上设置回调，它将在 IE 中触发两次，因此您需要在 HTML 中为 IE 使用条件语句：

然后加载一个脚本文件，将其设置为仅使用“body”元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T01:12:35.110

试试吧`$('body')`。如果仍然没有给出预期的结果，您可以提供一个公共样本吗？

# php - 如何将复杂的 php 代码放入另一个 php 代码中？

> ID：10867182
> 
> 赞同：-4
> 
> 时间：2012-06-03T01:13:38.933
> 
> 标签：php, mysql, syntax

我需要能够将我以前构建的站点的一部分放入我现在正在制作的另一个站点中。但是，两者都在 php 中，并且语法存在问题（即“和”的子集太多）。我该如何输入这段代码：

```
 if(mysql_num_rows($result) == 0)
           {
    echo 'No categories defined yet.';
         }
          else
        {
    //prepare the table
    echo '<table border="1">
          <tr>
            <th>Category</th>
            <th>Last topic</th>
          </tr>';   

    while($row = mysql_fetch_assoc($result))
    {               
        echo '<tr>';
            echo '<td class="leftpart">';
                echo '<h3><a href="category.php?id=' . $row['cat_id'] . '">' . $row['cat_name'] . '</a></h3>' . $row['cat_description'];
            echo '</td>';
            echo '<td class="rightpart">';

            //fetch last topic for each cat
                $topicsql = "SELECT
                                topic_id,
                                topic_subject,
                                topic_date,
                                topic_cat
                            FROM
                                topics
                            WHERE
                                topic_cat = " . $row['cat_id'] . "
                            ORDER BY
                                topic_date
                            DESC
                            LIMIT
                                1";

                $topicsresult = mysql_query($topicsql);

                if(!$topicsresult)
                {
                    echo 'Last topic could not be displayed.';
                }
                else
                {
                    if(mysql_num_rows($topicsresult) == 0)
                    {
                        echo 'no topics';
                    }
                    else
                    {
                        while($topicrow = mysql_fetch_assoc($topicsresult))
                        echo '<a href="topic.php?id=' . $topicrow['topic_id'] . '">' . $topicrow['topic_subject'] . '</a> at ' . date('d-m-Y', strtotime($topicrow['topic_date']));
                    }
                }
            echo '</td>';
        echo '</tr>';
    }
} 
```

进入这段代码（我希望表格本身在 div 主目录中并在欢迎下）

```
 echo

      "<div id=holder>
      <div id='nav'>
      <a href='chat.php'>Chat with your friends!</a> 
      <br><br><a href='changepassword.php'>Change password</a><br><br>
      <a href='logout.php'>Logout</a> 
      </div>
      <div id='main'>
      Welcome, ".$_SESSION['user_name']."!

      </div> 
      </div>";

            //fetch last topic for each cat
                $topicsql = "SELECT
                                topic_id,
                                topic_subject,
                                topic_date,
                                topic_cat
                            FROM
                                topics
                            WHERE
                                topic_cat = " .           $row['cat_id'] . "
                            ORDER BY
                                topic_date
                            DESC
                            LIMIT
                                1";

                $topicsresult = mysql_query($topicsql);

                if(!$topicsresult)
                {
                    echo 'Last topic could not be displayed.';
                }
                else
                {
                    if(mysql_num_rows($topicsresult) == 0)
                    {
                        echo 'no topics';
                    }
                    else
                    {
                        while($topicrow =           mysql_fetch_assoc($topicsresult))
                        echo '<a href="topic.php?id=' .                     $topicrow['topic_id'] . '">' . $topicrow['topic_subject'] . '</a> at ' . date('d-m-Y',           strtotime($topicrow['topic_date']));
                    }
                }
            echo '</td>';
        echo '</tr>';
    }
   }
      }; 
```

我认识到这很复杂，但我现在对语法很迷茫，所以如果有人能在这方面帮助我一点，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T01:22:01.967

假设您可以将两个文件都存在于同一位置，您可以`include`将文件与文件中的表格一起使用“欢迎”消息：

```
echo "
<div id=holder>
  <div id='nav'>
    <a href='chat.php'>Chat with your friends!</a> 
    <br><br>
    <a href='changepassword.php'>Change password</a>
    <br><br>
    <a href='logout.php'>Logout</a> 
  </div>
  <div id='main'>
    Welcome, ".$_SESSION['user_name']."!";

    include("path_to_the_table_file.php");

  echo "
  </div> 
</div>";

... 
```

**文档链接：** [include 语句包含并评估指定的文件。](http://php.net/manual/en/function.include.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T01:26:52.807

你可知道？您不必弄乱复杂的回显语法。这也可以：

```
<div id=holder>
<div id='nav'>
<a href='chat.php'>Chat with your friends!</a> 
<br><br><a href='changepassword.php'>Change password</a><br><br>
<a href='logout.php'>Logout</a> 
</div>
<div id='main'>
Welcome, <?php echo $_SESSION['user_name'] ?>!

<?php include("yourotherfile.php"); ?>

</div> 
</div>

<?php

        //fetch last topic for each cat
            $topicsql = "SELECT
                            topic_id,
                            topic_subject,
                            topic_date,
                            topic_cat
                        FROM
                            topics
                        WHERE
                            topic_cat = " .           $row['cat_id'] . "
                        ORDER BY
                            topic_date
                        DESC
                        LIMIT
                            1";

            $topicsresult = mysql_query($topicsql);

            if(!$topicsresult)
            {
                echo 'Last topic could not be displayed.';
            }
            else
            {
                if(mysql_num_rows($topicsresult) == 0)
                {
                    echo 'no topics';
                }
                else
                {
                    while($topicrow =           mysql_fetch_assoc($topicsresult))
                    echo '<a href="topic.php?id=' .                     $topicrow['topic_id'] . '">' . $topicrow['topic_subject'] . '</a> at ' . date('d-m-Y',           strtotime($topicrow['topic_date']));
                }
            }
        echo '</td>';
    echo '</tr>';
}
}
  };

?> 
```

# google-drive-api - Google Picker API 和选择 Google Drive 项目的问题

> ID：10867185
> 
> 赞同：3
> 
> 时间：2012-06-03T01:14:23.237
> 
> 标签：google-drive-api, google-picker

我正在尝试集成 Google Picker 以按照[此示例](https://developers.google.com/drive/integrate-open)从 Google Drive 中选择文件。
打开选择器时，我在 javascript 控制台中收到错误，并且对话框提示登录。

```
Unable to post message to https://docs.google.com. Recipient has origin https://my-app.herokuapp.com. 
```

单击登录按钮时，会打开一个弹出窗口并立即再次关闭，但没有任何反应。

关闭对话框时，javascript 控制台中出现另一个错误

```
Unknown RPC service: picker 
```

我不太确定是什么导致了这些错误，甚至不确定是什么原因造成的。

有人可以让我朝着正确的方向前进吗？

**编辑**
用户登录到应用程序。此外，当在 Google Drive 界面中的文件上使用“打开方式”菜单并选择我的应用程序时，我可以访问该文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T19:03:32.170

您必须将[https://my-app.herokuapp.com](https://my-app.herokuapp.com)添加到 API 控制台中的授权 Javascript 来源列表中：

*   转到 API 控制台：[https ://code.google.com/apis/console/](https://code.google.com/apis/console/)
*   从下拉菜单中选择您的项目
*   打开选项卡 API 访问
*   单击与您的客户端相对应的 Web 应用程序的客户端 ID 部分的编辑设置
*   将 URI 添加到 Authorized JavaScript Origins 列表

# windows - 为什么需要 ILK、PDB 和 EXP 文件？

> ID：10867186
> 
> 赞同：44
> 
> 时间：2012-06-03T01:14:34.103
> 
> 标签：windows, visual-studio-2010, dll, operating-system, pdb

我已经下载了一些 dll 文件，并且还附带了 pdb、exp 和 ilk 文件。现在我需要知道我是否需要将它们放入我的系统文件中，一般来说它们每个的目的是什么？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-06-03T02:05:05.233

**PDB**文件包含调试信息，如果您需要在任何时候单步执行 DLL 的代码，这些文件将非常有用。

[](https://docs.microsoft.com/en-us/cpp/build/reference/dot-ilk-files-as-linker-input)**链接器使用[**ILK**](https://docs.microsoft.com/en-us/cpp/build/reference/dot-ilk-files-as-linker-input)[文件。](https://docs.microsoft.com/en-us/cpp/build/reference/dot-ilk-files-as-linker-input)除非要重新编译 DLL，否则不需要它们。**

 ****EXP**文件包含有关从 DLL 导出的内容的信息

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-12-03T09:07:22.323

*   **.ilk**文件是链接器在开发周期中创建的中间文件。.ilk 文件用于增量链接。如果链接器在尝试进行增量链接时没有找到 .ilk 文件，那么它将执行完整链接并重新生成 .ilk 文件。增量链接旨在加快链接过程。您可以安全地删除 .ilk 文件。

*   **.exp**文件也适用于开发人员。.exp 文件是为导出一些符号的 .exe 和 .dll 文件创建的。它们的用途类似于 .lib 导入库，但有细微差别。即使相应的 .exe 或 .dll 在链接时创建失败，也会始终创建 .exp 文件。相比之下，.lib 导入库仅在相应的 .exe 或 .dll 链接成功时创建。.exp 文件有助于链接相互依赖的组件。例如，.exe 可以通过导出一些函数来为其插件提供对其公共资源的访问。插件还提供导出供 .exe 调用。像这样的相互依赖无法成功链接。.exe 链接将失败，因为 .dll 的导入 .lib 丢失。因此，不会为 .exe 创建 .lib。的联动。dll 将失败，因为 .exe 的导入库丢失。但是，即使链接失败，也会创建导出文件，因此 .dll 可以链接到 .exp 文件而不是 .lib 文件以成功链接。**

# eclipse - 从 Eclipse 创建 Javadoc 的 PDF

> ID：10867192
> 
> 赞同：1
> 
> 时间：2012-06-03T01:15:50.043
> 
> 标签：eclipse, pdf, javadoc

我已经能够为我的一个项目生成 javadoc，但我想将它集成到我的报告中。现在我只有一个充满 HTML 文档的文件夹，有没有一种简单的方法可以将它们转换为单个 pdf 文档或直接从 eclipse 生成 pdf 文档的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-16T19:42:00.907

您可以使用 Maven-javadoc-plugin 上的 doclet 来完成。

基本上只需要下载jar：

[http://pdfdoclet.sourceforge.net/](http://pdfdoclet.sourceforge.net/)

然后在 pom.xml 中添加插件，如下所示：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <version>2.10.2</version>
            <reportSets>
                <reportSet>
                    <id>PDF</id>
                    <reports>
                        <report>javadoc</report>
                    </reports>
                    <configuration>
                        <name>PDF</name>
                        <description>This is my Documentation on PDF.</description>
                        <destDir>pdf</destDir>
                        <doclet>com.tarsec.javadoc.pdfdoclet.PDFDoclet</doclet>
                        <docletPath>${basedir}\..\..\tools\pdfdoclet-1.0.3-all.jar</docletPath>
                        <useStandardDocletOptions>false</useStandardDocletOptions>
                        <additionalparam>
                            -pdf javadoc.pdf
                        </additionalparam>
                    </configuration>
                </reportSet>
            </reportSets>
        </plugin> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T10:38:25.240

看看[HTMLDOC](https://www.msweet.org/projects.php?Z1)项目。它从维护工作超链接的 HTML 页面生成 PDF。

您可以从命令行使用它：

```
htmldoc --webpage -f pdf-file.pdf html-file-1.html ... html-file-N.html 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-03T22:19:51.970

您可以在 Eclipse 中将文件保存为 PDF。文件 -> 打印 -> 然后一个弹出窗口有一个选择框，应该显示“PDF”。如果单击它，其中一个选项是另存为 PDF。虽然，Eclipse 添加了格式。

# python - 在python中将值转换为4字节十六进制

> ID：10867193
> 
> 赞同：0
> 
> 时间：2012-06-03T01:16:11.987
> 
> 标签：python, hex

我想将任何值（可以是负数或正数）转换为十六进制。我目前的方法就是这样做的。

本例中的读取值为 4003。

```
workingline = stringdb.readline().split(";")
print hex(int(workingline[0])) 
```

这返回

```
0xfa3 
```

它应该是：

```
0xa30f0000 
```

（用零和倒置的十六进制填充）如果值为负，则应为：

```
0xFEFFFFFF 
```

值为-2。

我认为在这种情况下填充没有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T01:18:14.413

你想要的`struct`模块：

```
>>> struct.pack("<I", 4003).encode('hex')
'a30f0000' 
```

对于 -2，你需要做一些其他的工作：

```
>>> struct.pack("<I", -2 + 2**32).encode('hex')
'feffffff' 
```

为任何值执行此操作的方法是：

```
struct.pack("<I", (value + 2**32) % 2**32).encode('hex') 
```

# c# - SqlDataReader 异常：索引超出数组范围

> ID：10867196
> 
> 赞同：0
> 
> 时间：2012-06-03T01:16:31.370
> 
> 标签：c#, asp.net, membership-provider

我使用了[msdn.microsoft.com/en-us/library/ms366730.aspx](http://msdn.microsoft.com/en-us/library/ms366730.aspx)上的自定义成员资格提供程序，并进行了一些更改以适合我的用户数据库。在 GetUser 方法中，它使用 SqlDataReader 并抛出：

*System.IndexOutOfRangeException：索引超出了数组的范围。*

那么是什么决定了数组的大小呢？我假设它是 SQL SELECT 语句，并且有 12 个项目，所以`reader.GetBoolean(11)`应该是最后一个索引，对吧？

```
private NCCMembershipUser GetUserFromReader(SqlDataReader reader)
    {

        object providerUserKey = reader.GetValue(0);
        string username = reader.GetString(1);
        string email = username;
        string passwordQuestion = "";
        string comment = "";

        // 0 UserID, 1 Email, 2 PasswordQuestion,
        // 3 Comment, 4 IsApproved, 5 IsLockedOut, 6 CreationDate, 7 LastLoginDate,
        // 8 LastActivityDate, 9 LastPasswordChangedDate, 10 LastLockedOutDate, 11 IsSubscribed

        bool isApproved = reader.GetBoolean(4);
        bool isLockedOut = reader.GetBoolean(5);
        bool isSubscribed = reader.GetBoolean(11);// <--- ****HERE****

        DateTime creationDate = reader.GetDateTime(6);
        DateTime lastLoginDate = new DateTime();
        DateTime lastActivityDate = reader.GetDateTime(8);
        DateTime lastPasswordChangedDate = reader.GetDateTime(9);
        DateTime lastLockedOutDate = new DateTime(10);

        if (reader.GetValue(2) != DBNull.Value)
            passwordQuestion = reader.GetString(2);

        if (reader.GetValue(3) != DBNull.Value)
            comment = reader.GetString(3);

        if (reader.GetValue(7) != DBNull.Value)
            lastLoginDate = reader.GetDateTime(7);

        if (reader.GetValue(10) != DBNull.Value)
            lastLockedOutDate = reader.GetDateTime(10);

        NCCMembershipUser u = new NCCMembershipUser(this.Name,
                                                      username,
                                                      providerUserKey,
                                                      email,
                                                      passwordQuestion,
                                                      comment,
                                                      isApproved,
                                                      isLockedOut,
                                                      creationDate,
                                                      lastLoginDate,
                                                      lastActivityDate,
                                                      lastPasswordChangedDate,
                                                      lastLockedOutDate,
                                                      isSubscribed);

        return u;
    } 
```

从 GetUser 调用该方法：

```
 public override MembershipUser GetUser(string username, bool userIsOnline)
    {
        SqlConnection conn = new SqlConnection(connectionString);
        SqlCommand cmd = new SqlCommand("SELECT UserID, Email, PasswordQuestion," +
            " Comment, IsApproved, IsLockedOut, CreationDate, LastLoginDate," +
            " LastActivityDate, LastPasswordChangedDate, LastLockedOutDate" +
            " IsSubscribed" +
            " FROM Users WHERE Email = @Email AND ApplicationName = @ApplicationName", conn);

        cmd.Parameters.Add("@Email", SqlDbType.NVarChar, 128).Value = username;
        cmd.Parameters.Add("@ApplicationName", SqlDbType.NVarChar, 255).Value = m_ApplicationName;

        NCCMembershipUser u = null;
        SqlDataReader reader = null;

        try
        {
            conn.Open();

            reader = cmd.ExecuteReader();

            if (reader.HasRows)
            {
                reader.Read();
                u = GetUserFromReader(reader);

                if (userIsOnline)
                {
                    SqlCommand updateCmd = new SqlCommand("UPDATE Users " +
                        "SET LastActivityDate = @LastActivityDate " +
                        "WHERE Email = @Email AND ApplicationName = @ApplicationName", conn);

                    updateCmd.Parameters.Add("@LastActivityDate", SqlDbType.DateTime).Value = DateTime.Now;
                    updateCmd.Parameters.Add("@Email", SqlDbType.VarChar, 255).Value = username;
                    updateCmd.Parameters.Add("@ApplicationName", SqlDbType.VarChar, 255).Value = m_ApplicationName;

                    updateCmd.ExecuteNonQuery();
                }
            }

        }
        catch (SqlException e)
        {
            if (WriteExceptionsToEventLog)
            {
                WriteToEventLog(e, "GetUser(String, Boolean)");

                throw new ProviderException(exceptionMessage);
            }
            else
            {
                throw e;
            }
        }
        finally
        {
            if (reader != null) { reader.Close(); }

            conn.Close();
        }

        return u;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T01:25:06.070

我注意到你的 SQL在 LastLockedOutDate 和 IsSubscribed 之间**没有。**

# android - Android 内存不足错误：如何解决？

> ID：10867198
> 
> 赞同：0
> 
> 时间：2012-06-03T01:16:52.393
> 
> 标签：android, sqlite, io, out-of-memory, stringwriter

我有一个应用程序，我正在尝试在其中设置一个相当大的 SQLite 数据库（一个大约有 5000 行的表）。我已经构建了数据库类和所有内容，当我在较小规模（400 行）上进行测试时，我的应用程序可以工作，但是现在当我想导入我的数据库时，我得到了我似乎找不到的内存不足错误一种解决方法。

该数据库最初位于我的 Web 服务器上的 MySQL 上，由于某种奇怪的原因我无法转换它，但我设法生成了一个带有查询的文本文件，以添加所有 5000 行，大小为 11.5mb。我的资产文件夹中有这个文件，我正在尝试将它放入我的数据库中：

```
public void onHandleIntent(Intent intent) {

        DBAdapter db = new DBAdapter(getApplicationContext());
        db.open();

        try {
            InputStream is = getAssets().open("verbs_sql.txt");
            db.executeSQL(convertStreamToString(is));
        } catch (IOException e) {}

        db.close();

        // Run main activity
        Intent i = new Intent(DatabaseReceiver.this, BaseActivity.class);
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);
        DatabaseReceiver.this.startActivity(i);
    }

    public static String convertStreamToString(InputStream is) throws IOException {
        Writer writer = new StringWriter();

        char[] buffer = new char[2048];
        try {
            Reader reader = new BufferedReader(new InputStreamReader(is, "UTF-8"));
            int n;
            while ((n = reader.read(buffer)) != -1) {
                writer.write(buffer, 0, n);
            }
        } finally {
            is.close();
        }
        String text = writer.toString();
        return text;
    }
} 
```

StringWriter() 发生内存不足错误，因此看起来像是将那个大文件放到内存中。我该如何解决这个问题？我也尝试过遍历所有 5000 行，但大约 30 秒后，我再次出现内存不足。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-03T11:29:04.330

我有同样的问题。我尝试了很多方法来解决它，但都失败了。最后我找到了原因，我想知道。在我的情况下，错误的原因是我在 log cat 中打印了整个响应字符串。该数据非常庞大，并且占用了堆内存。请注意以下事项

1.  删除批量数据的 Log cat 打印。
2.  尝试仅对一个响应下的所有操作使用一个 J-SON 阵列（全部重用）。
3.  尽量避免使用数组列表。
4.  当每个项目从 J-Son 数组迭代时插入项目。这意味着不要遵循我们将项目作为对象并将其放入数组列表并将数组列表传递给 DB-helper 并从那里迭代对象并插入的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T01:50:59.257

Sqlite 数据库只是文件，当您尝试在手机上运行数千次插入时，您会一遍又一遍地使用 SD 卡进行文件访问。

您要做的是在桌面上创建 sqlite 数据库，并将已创建的数据库包含在应用程序中。如果您需要定期更新数据库中的信息，您可以将其发布在网站上并让应用程序下载它，只需确保仅通过 Wifi 进行大量下载。

查看此[技术讲座](http://penguinman-techtalk.blogspot.com/2010/08/loading-large-reference-database-in.html)了解更多信息。

编辑：有关在 Windows 中创建 sqlite 数据库并将其包含在您的应用程序中的更多信息，请参阅[此内容。](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T02:03:35.107

我相信你可以按照你想要的方式做到这一点。您发布的代码的问题是您试图将整个文件转换为字符串。我相当肯定即使在台式机上这也会失败。

如果您尝试一次阅读一行并执行 SQL，我相信您会获得更好的运气。然后阅读下一行。您还可以通过 zip 传递文件来减小文件的大小。

如果我能找到几分钟，我会附上一些代码。

# macos - 终端元箭头键绑定中的 emacs

> ID：10867199
> 
> 赞同：8
> 
> 时间：2012-06-03T01:17:01.830
> 
> 标签：macos, emacs, terminal

我刚刚从使用 Emacs.app 切换到使用 iterm2 作为终端仿真器的终端模式下的 emacs 服务器和 emacsclient。不过，我在某些键绑定方面遇到了一些麻烦。特别是 M-left 箭头打印字符 D，M-right 箭头打印 C，M-up 箭头打印 A，M-down 箭头打印 B.M-ret 似乎工作，至少对于 org 模式。我对 iterm2 中的键使用 xterm 默认值，并将左右选项键绑定到 +Esc。我可以使用 Esc-left 或 Esc-right 在 org-mode 中获得 M-left 功能 这在 org-mode 中特别烦人。我是否只需要重新绑定 .emacs 中的键？我该怎么做呢？

我看过这个[http://orgmode.org/manual/TTY-keys.html#TTY-keys](http://orgmode.org/manual/TTY-keys.html#TTY-keys)，但我不明白为什么终端中的箭头键不可用。

编辑：

猫元向上：`^[[1;9A` 猫元向下：`^[[1;9B` 猫元右：`^[[1;9C` 猫元左：`^[[1;9D`

主要问题已解决，但我现在遇到了`shift-up`. `"<select> undefined"`. 我尝试使用从`cat`:获得的转义序列进行类似的映射`^[[1;2A`。不愿意为类似问题创建另一个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-03T01:58:02.677

**解决方案 1**

根据您在此处提供的信息，您可以尝试一件事。您告诉 emacs 将这些转义序列映射到正确的键序列：

```
(add-hook 'term-setup-hook
  '(lambda ()
     (define-key function-key-map "\e[1;9A" [M-up])
     (define-key function-key-map "\e[1;9B" [M-down])
     (define-key function-key-map "\e[1;9C" [M-right])
     (define-key function-key-map "\e[1;9D" [M-left]))) 
```

**解决方案 2**

我还通过谷歌搜索找到了另一种可能的解决方案：重新定义 iTerm 绑定以匹配 emacs 正在寻找的内容。

[http://offbytwo.com/2012/01/15/emacs-plus-paredit-under-terminal.html](http://offbytwo.com/2012/01/15/emacs-plus-paredit-under-terminal.html)

从上面的页面引用：

> 返回到 iTerm2 下的配置文件键绑定并添加以下绑定：

```
M-up      : Esc-[1;4A
M-down    : Esc-[1;4B
M-right   : Esc-[1;4C
M-left    : Esc-[1;4D 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-17T16:03:33.637

我正在回答您的“主要问题已解决，但有新问题”编辑。

我在这个问题上找到了这个人的博客文章： - [http://webframp.com/emacs/2013/02/22/fixing-emacs-bindings-on-the-in-iterm2/](http://webframp.com/emacs/2013/02/22/fixing-emacs-bindings-on-the-in-iterm2/)

基本上，您可以使用“运行猫”和按钮技巧来查看系统/终端发送的转义码，然后添加“定义键”行来定义 M-{up,down,right,left} 和还有 MS-{上、下、右、左}。

# java - 是否可以使用更新的证书重新签署 Java 小程序？

> ID：10867202
> 
> 赞同：5
> 
> 时间：2012-06-03T01:17:17.260
> 
> 标签：java, code-signing, jarsigner

我有一个签名的 Java 小程序，证书刚刚过期。我有一个新证书，但我不确定能否找到原始的、未签名的 applet jar 文件。有什么办法可以让我拿到签名的 jar 并用新证书替换旧证书？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T05:02:10.830

你不能把它包起来。

但是，您应该能够简单地使用不同的证书重新签署 JAR。无论如何，签署 JAR 并不会对其进行加密。它只是将东西添加到清单部分。

这不是安全问题。重新签名的证书与原始证书不同，最终用户必须重新接受它。（我认为您无法避免这种情况......因为这*将*是一个安全问题！）

* * *

无论如何，简单的方法是尝试重新签署已签名的小程序 JAR，并查看它是否有效，以及当您尝试以用户身份运行它时它的行为方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-11T13:17:31.753

为了解决类似的情况，我删除了所有签名文件`META-INF/*.SF`并`META-INF/*.RSA`重新签名。 `META-INF/MANIFEST.MF`现在包含带有 SHA-1 哈希的旧（未使用）行和新的 SHA-256 行；其余的旧签名似乎没有问题：`jarsigner -verify -verbose`使用新签名报告一切正常。

# python - 在 Python 中生成类实例

> ID：10867208
> 
> 赞同：-1
> 
> 时间：2012-06-03T01:18:27.667
> 
> 标签：python, iteration, instance

我一直无法让 python 生成（非预定）数量的类实例。基本上有类能够自我复制。

```
class foo:
    def __init__(self, name):
        self.name = name

while True:
    newinstance(foo) #what would the code be for this?
                     #or maybe
    foo.newinstance  #just something that could update itself 
```

基本上生成一个新实例任意次数。提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T01:21:37.437

这将满足您的要求，但您需要以某种方式保留这些值：

```
while True:
    foo(some_name) 
```

这将永远循环，因此更现实的选择可能是：

```
names = ["Ned", "Felix", "Guy"]
fooses = [foo(name) for name in names] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T01:22:03.140

使用列表推导：

```
instances_of_foo = [foo("bar") for i in range(number_of_instances)] 
```

此外，如果您想向每个实例传递不同的参数，您可以创建 args 列表而不是使用`range()`.

```
list_of_args = [args_for_instance_one, args_for_instance_two,...]

instances_of_foo = [foo(arg) for arg in list_of_args] 
```

# python - python csv不解析分隔符

> ID：10867211
> 
> 赞同：0
> 
> 时间：2012-06-03T01:21:19.123
> 
> 标签：python, csv, delimiter

我正在尝试使用 python 进行简单的 csv 解析，我有以下代码：

```
print csvdata
print "\n"
csvparsed = csv.reader(csvdata)

for row in csvparsed:
    print row 
```

但是，似乎解析数据的每一行都是一个字符，并且没有用逗号分隔。我在这里错过了什么吗？这是我得到的输出：

```
Restaurant ID,2,,
,,,
Menu Name,Breakfast Menu,,

['R']
['e']
['s']
['t']
['a']
['u']
['r']
['a']
['n']
['t']
[' ']
['I']
['D']
['', '']
['2']
['', '']
['', '']
[]
['', '']
['', '']
['', '']
[]
['M']
['e']
['n']
['u']
[' ']
['N']
['a']
['m']
['e']
['', '']
['B']
['r']
['e']
['a']
['k']
['f']
['a']
['s']
['t']
[' ']
['M']
['e']
['n']
['u']
['', '']
['', ''] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T01:24:09.790

`csv.reader`旨在为文本行提供迭代器，这就是打开文件的工作方式。你给了它一个字符串，当你迭代它时会产生字符。如果您从文件中获取数据，只需将打开的文件提供给`csv.reader`，不要先阅读文本。

如果您确实已经在字符串中包含文本，请使用以下命令：

```
csv.reader(csvdata.splitlines()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T01:36:25.963

这可能更接近你想要做的事情：

```
csvparsed = csv.reader(open('csvdata', 'r'))

for row in csvparsed:
    print row 
```

有了这个，以及您在文件中的示例数据，我得到了这个输出：

```
['Restaurant ID', '2', '', '']
['', '', '', '']
['Menu Name', 'Breakfast Menu', '', ''] 
```

# c++ - C++ 函数声明行的哪些部分位于定义的第一行？

> ID：10867214
> 
> 赞同：2
> 
> 时间：2012-06-03T01:21:41.073
> 
> 标签：c++, function

我一直不清楚究竟有多少声明行（通常放在头文件中）使其进入函数定义的第一行。如果在定义中重复某些关键字会导致编译失败，而有些则不会。

例如，考虑一个继承自`std::exception`. 函数的重新定义`what()`通常看起来像

```
virtual const char* what() const throw(); 
```

好的。如果我在源文件中定义它，并且我准确地复制了这一行

```
virtual const char* what() const throw() {} 
```

编译失败并显示类似“虚拟外部类声明”的消息。我删除了“虚拟”，它编译得很好。函数声明的哪些部分需要在其定义中重复的规则是什么？静止的？排队？是否有简明扼要地描述哪些部分是必要的参考资料？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T01:27:48.517

这是对声明和定义的内容的一个很好的解释：

*   [http://msdn.microsoft.com/en-us/library/fash2fc6.aspx](http://msdn.microsoft.com/en-us/library/fash2fc6.aspx) - 声明语法
*   [http://msdn.microsoft.com/en-us/library/c4d5ssht.aspx](http://msdn.microsoft.com/en-us/library/c4d5ssht.aspx) - 定义语法

# r - R.如何制作具有相等行的矩阵

> ID：10867221
> 
> 赞同：5
> 
> 时间：2012-06-03T01:22:48.433
> 
> 标签：r

我有行`f`。我想创建矩阵`R`，使其每一行都相等`f`。在 R 中最有效的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T01:55:49.007

有一排

```
f=c(1,22,33,44,55,66) 
```

得到它的长度

```
lf=length(f) 
```

然后制作矩阵

```
R=matrix(rep(f,lf),
         ncol=lf,
         byrow=T) 
```

给出：

```
R
     [,1] [,2] [,3] [,4] [,5]
[1,]    1   33   44   55   66
[2,]    1   33   44   55   66
[3,]    1   33   44   55   66
[4,]    1   33   44   55   66
[5,]    1   33   44   55   66 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-03T02:47:09.417

```
R <-  matrix(f, 1)[rep(1,n), ]
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    2    3    4    5
[2,]    1    2    3    4    5
[3,]    1    2    3    4    5
[4,]    1    2    3    4    5
[5,]    1    2    3    4    5 
```

或者更紧凑：

```
R <- rbind(f)[rep(1,n), ]
  [,1] [,2] [,3] [,4] [,5]
f    1    2    3    4    5
f    1    2    3    4    5
f    1    2    3    4    5
f    1    2    3    4    5
f    1    2    3    4    5 
```

请注意，矩阵的行名不需要是唯一的，这与 data.frames 的情况不同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-03T02:12:18.177

这是一种可能性：

```
mymat <- do.call( rbind, rep(list(f), 10) ) 
```

# linux - “无法更新 ICEauthority 文件...”错误

> ID：10867224
> 
> 赞同：2
> 
> 时间：2012-06-03T01:23:35.340
> 
> 标签：linux, fedora, omnet++, fedora16

我的电脑上有 fedora16 和 omnet++ 4.2.1。

我刚刚安装了 omnet++ 4.2.2。

当我从现在开始重新启动系统时，我无法以我的用户名登录。

Fedora 给了我这个错误信息： 无法更新 ICEauthority 文件/主页... .ICEauthority。

它让我处于桌面背景而无法访问任何东西。

对此错误的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:48:01.883

可能是因为权限错误。当错误弹出时，试试这个：

1）切换到新的虚拟终端`ctrl alt F2`并登录

2) sudo chown 用户名 ./ -R

这为我解决了问题。

# c# - 这可能吗？在 C# 中调用托管 c++ struct 构造函数

> ID：10867225
> 
> 赞同：4
> 
> 时间：2012-06-03T01:23:38.950
> 
> 标签：c#, c++, c++-cli, managed

我有一个托管的 c++ 类/结构，它带有接受输入的构造函数。在 C# 中，我只能“看到”默认构造函数。有没有办法在不离开托管代码的情况下调用其他构造函数？谢谢。

编辑：事实上，它的任何功能都不可见。

C++：

```
public class Vector4
{
private:
    Vector4_CPP test ;

    Vector4(Vector4_CPP* value)
    {
        this->test = *value;
    }

public:
    Vector4(Vector4* value)
    {
        test = value->test;
    }
public:
    Vector4(float x, float y, float z, float w)
    {
        test = Vector4_CPP( x, y, z, w ) ;
    }

    Vector4 operator *(Vector4 * b)
    {
        Vector4_CPP r = this->test * &(b->test) ;
        return Vector4( &r ) ;
    }
} ; 
```

C＃：

```
// C# tells me it can't find the constructor.
// Also, none of them are visible in intellisense.
Library.Vector4 a = new Library.Vector4(1, 1, 1, 1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:37:52.247

第一个问题是您的类声明是针对非托管 C++ 对象的。

如果您想要一个托管的 C++/CLI 对象，那么您需要以下之一：

```
public value struct Vector4 
```

或者

```
public ref class Vector4 
```

此外，任何包含本机类型的 C++/CLI 函数签名对 C# 都是不可见的。因此，任何参数或返回值都必须是您的 C++/CLI 托管类型或 .NET 类型。我不确定 operator* 签名的外观，但你可以这样休息：

```
public value struct Vector4 
{   
  private:
    Vector4_CPP test;

    Vector4(Vector4_CPP* value)
    {
        this->test = *value;
    }

  public:
    Vector4(Vector4 value)
    {
        test = value.test;
    }

    Vector4(System::Single x, System::Single y, System::Single z, System::Single w)
    {
        test = Vector4_CPP( x, y, z, w ) ;
    } 
} 
```

或者：

```
public ref class Vector4 
{   
  private:
    Vector4_CPP test;

    Vector4(Vector4_CPP* value)
    {
        this->test = *value;
    }

  public:
    Vector4(Vector4^ value)
    {
        test = value->test;
    }

    Vector4(System::Single x, System::Single y, System::Single z, System::Single w)
    {
        test = Vector4_CPP( x, y, z, w ) ;
    } 
} 
```

# python - 使用 Paramiko 作为服务器

> ID：10867230
> 
> 赞同：2
> 
> 时间：2012-06-03T01:26:29.997
> 
> 标签：python, ssh, client, paramiko

我想知道，我想用自定义命令创建一个 SSH 服务器和一个客户端。我曾想过使用 Twisted，但我对文档不太满意。我决定使用 Paramiko，但我想知道，有没有办法创建 Paramiko 服务器？还是只有客户？另一个问题，假设你只能创建一个客户端，我可以在 Paramiko 中创建客户端并使用套接字模块创建服务器并连接到它吗？这可能吗？如果是这样，有什么建议吗？提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T07:28:47.103

是的，Paramiko 既可以用作 SSH 客户端，也可以用作服务器；请参阅[paramiko.Transport.start_server](http://www.lag.net/paramiko/docs/paramiko.Transport-class.html#start_server)开始。

如果您返回并重新访问 Twisted，[twisted.conch](http://twistedmatrix.com/trac/wiki/TwistedConch)也实现了 SSH。

# jquery - Ajax 内容插入 div 问题

> ID：10867236
> 
> 赞同：0
> 
> 时间：2012-06-03T01:27:31.607
> 
> 标签：jquery, ajax

当我使用 ajax 获取内容时，我遇到了一个小问题。问题是一旦成功事件触发，我将加载的内容放到一个 div 上并调用一个函数

```
$('.content').html(data);
$('.image').resize(function(e) { more code.... }); 
```

好吧，问题是当第二行执行时内容还没有准备好，所以它没有效果。

在这种情况下我能做什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T01:37:23.397

将第二行放在回调函数中并使用 .load 完成第一部分：

```
$('.content').load(<ajax url here>, function () {
  $('.image').resize(function (e) {
    // do whatever else you need to do here
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T01:46:46.307

如果问题是您将事件附加到尚未在 DOM 中的事物（由于 AJAX 负载），您可以使用委托事件处理程序。

这假设所有`.image`元素都在元素内`.content`。你可以做：

```
$('.content').on('resize', '.image', function(e) { ... }); 
```

请参阅[jQuery .on()](http://api.jquery.com/on/)事件注册语法。这将在元素中的所有元素上侦听`resize`事件，即使它们是动态添加的（即通过 AJAX）。`.image``.content`

# python - 找不到记录器“dajaxice”的处理程序

> ID：10867238
> 
> 赞同：0
> 
> 时间：2012-06-03T01:27:51.717
> 
> 标签：python, django, logging, dajaxice

您如何正确设置记录器？

我在 django 的默认记录器之后添加了记录器。

```
'loggers': {
    'django.request': {
        'handlers': ['mail_admins'],
        'level': 'ERROR',
        'propagate': True,
    },
   'dajaxice': {
       'handlers': ['fileHandlerDajaxice'],
       'level': 'DEBUG',
       'propagate': False,
   }, 
```

但它不起作用。我将它们更改为 'dajaxice.DajaxiceRequest' 记录器，而处理程序保持不变。我尝试了许多其他不同的组合，但都没有奏效。

例如，

```
ValueError: Unable to configure logger 'dajaxice.DajaxiceRequest': Unable to add handler 'fileHandlerDajaxice': 'fileHandlerDajaxice'

ValueError: Unable to configure logger 'dajaxice': Unable to add handler 'dajaxice': 'dajaxice' 
```

参考，我在关注这个[参考](https://groups.google.com/d/msg/dajaxproject/PoQ6w85yfYY/Xy_kunmgSK0J)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:11:39.333

为了记录`dajaxice`输出，您应该添加一个以`dajaxice`您要使用的处理程序列表命名的新记录器。

```
LOGGING = {
    ...

    'loggers': {
        ...

        'dajaxice': {
            'handlers': ['console'],
            'level': 'INFO',
            'propagate': True,
        },
    }
} 
```

您的代码已经有这个记录器，但它似乎失败了，因为`fileHandlerDajaxice`. 你能把这部分贴出来吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T15:23:34.223

您需要在键下添加一个处理程序（或您在记录器行中`'fileHandlerDajaxice'`使用的任何名称。`'handlers': [...]``'dajaxice'`

# php - 在 Drupal 中逐页传递 $_POST 数据

> ID：10867239
> 
> 赞同：1
> 
> 时间：2012-06-03T01:27:56.673
> 
> 标签：php, drupal, post

有谁知道如何在 Drupal 中将 $_POST 数据（HTML 表单数据）从一个页面传输到另一个页面？

我有两个 PHP 页面，包含在两个不同的 Drupal 节点中，但我无法在它们之间传递 POST 数据。

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T01:31:33.440

考虑使用[会话](http://php.net/manual/en/features.sessions.php)，因为它们完全符合您的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T16:33:52.183

正如 SenorAmor 所建议的，会话是在 HTTP 请求之间共享数据的正确方式。如果您实际上是在 Drupal 中构建多步骤表单，则不应通过在节点中包含表单来实现。相反，您应该[创建一个模块](https://drupal.org/node/361112)并使用[Drupal 的表单 API](http://api.drupal.org/api/drupal/includes!form.inc/group/form_api/7)，该 API 可用于[构建多步骤表单](http://growingventuresolutions.com/blog/drupal-7-multistep-forms-using-variable-functions)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T01:39:54.650

+1 SenorArmor 的建议，听起来像是你需要的。

但是，如果您正在寻找一种*临时*传递数据的方法（例如，通过两个相关表单）并且不想将其保留在 中`$_SESSION`，那么您可能对隐藏`<input>`标签感兴趣。将它们以您想要保留旧“已发布”数据的任何形式放入，这些值将被保留并传递到下一页提交（因此，在`$_POST`最后一页上）。*确保验证这些输入；*人们也可以改变它们。

# objective-c - Objective-C：如何正确初始化 char[]？

> ID：10867241
> 
> 赞同：1
> 
> 时间：2012-06-03T01:28:05.023
> 
> 标签：objective-c, arrays, initialization, char

我需要获取一个 char [] 数组并将其值复制到另一个数组，但我每次都失败。

它使用以下格式工作：

`char array[] = { 0x00, 0x00, 0x00 }`

但是，当我尝试这样做时：

```
char array[] = char new_array[]; 
```

它失败了，即使 new_array 就像原来的一样。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T01:34:00.537

要在运行时进行复制，通常的 C 方法是使用`strncpy`or`memcpy`函数。

如果您希望`char`在编译时将两个数组初始化为相同的常量初始化程序，您可能会被使用`#define`：

```
#define ARRAY_INIT { 0x00, 0x00, 0x00 }
char array[] = ARRAY_INIT;
char new_array[] = ARRAY_INIT; 
```

问题是，这很少做，因为通常有更好的实现。

**编辑：**好的，所以你想在运行时复制数组。这是通过`memcpy`, 部分`<string.h>`（所有地方）完成的。

如果我没看错，您的初始条件如下：

```
char array[] = { 0x00, 0x00, 0x00 };
char new_array[] = { 0x01, 0x00, 0xFF }; 
```

然后你做一些事情，改变数组的内容，完成后，你想设置`array`为 match `new_array`。就是这样：

```
memcpy(new_array, array, sizeof(array));
/*        ^         ^          ^
          |         |          +--- size in bytes
          |         +-------------- source array
          +-------------------------destination array
 */ 
```

库编写者选择首先使用目标对参数进行排序，因为这与 assignment: 中的顺序相同`destination = source`。

没有语言级别的内置方法可以在 C、Objective-C 或 C++ 中使用像这样的原始数组复制数组。C++ 鼓励人们使用`std::vector`.Objective-C 鼓励使用`NSArray`.

不过，我仍然不确定你想要什么。

# django - 提高 forms.ValidationError 不起作用

> ID：10867244
> 
> 赞同：3
> 
> 时间：2012-06-03T01:29:38.130
> 
> 标签：django, validation, django-forms, inline-formset

我有以下型号：

```
class Project(models.Model):
    title = models.CharField(max_length="100")

    pub_date = models.DateField(auto_now_add=True, editable=False)

    budget = models.IntegerField()

class Milestone(models.Model):

    title = models.CharField(max_length="50")

    budget_percentage = models.IntegerField(max_length=2)

    project = models.ForeignKey(Project) 
```

在项目的创建表单中，我包含了一个用于里程碑的内联表单集。

我想验证提交项目时，至少创建了 4 个里程碑，并且所有里程碑的 budget_percentage 总和为 100

这是我的表格：

```
class BaseMilestoneProjectFormSet(BaseFormSet):
    def clean(self):

        if any(self.errors):
            # Don't bother validating the forms unless each form is valid on its own
            return

        if len(self.forms) < REQUIRED_MILESTONES:
            raise forms.ValidationError("At least %s milestones need to be created" % REQUIRED_MILESTONES)

        # Set initial control variables
        # Total percentage of budget to control
        total_percentage = 0
        # Date to control that milestones are linear, i.e. that second milestone isn't delivered before first
        current_control_date = date.min

        for i, form in zip(range(len(self.forms)), self.forms):

            if i == 0 and form.budget_percentage > MAX_BUDGET_FIRST_MILESTONE:
                raise forms.ValidationError("First milestone budget must not exceed %s percentage" % MAX_BUDGET_FIRST_MILESTONE)
            elif form.budget_percentage > MAX_BUDGET_MILESTONE:
                raise forms.ValidationError("Milestone's budget must not exceed %s percentage" % MAX_BUDGET_MILESTONE)

            if form.estimated_delivery_date < current_control_date:
                raise forms.ValidationError("Milestones must be linear, check your delivery dates")

            # Set control variables for next iteration    
            current_control_date = form.estimated_delivery_date                
            total_percentage += form.budget_percentage

        if total_percentage != 100:
            raise forms.ValidationError("All milestones budget percentage should sum up to 100%") 
```

当我提交带有 3 个空里程碑表单的表单时，它对第一个表单没有任何作用。ValidationError(...)

我已经用 raise Exception() 验证了它实际上进入了 if，但它会继续，好像什么也没发生一样。

这是我的代码中的错误还是 ValidationError 的误解？

任何帮助将不胜感激，在此先感谢。

**编辑：**

我正在添加缺少的视图代码

```
class DelayedModelFormMixin(ModelFormMixin):
    def form_valid(self, form):
        self.object = form.save(commit=False)
        self.prepare_object_for_save(self.object)
        self.object.save()
        if hasattr(self.object, "save_m2m"):
            self.object.save_m2m()
        return super(ModelFormMixin, self).form_valid(form)

    def prepare_object_for_save(self, obj):
        pass

class ProjectNew(CreateView, DelayedModelFormMixin):
    model = Project
    success_url = '/projects/project/%(slug)s'
    form_class = ProjectForm

    @method_decorator(login_required)
    def dispatch(self, request, *args, **kwargs):
        return super(ProjectNew, self).dispatch(request, *args, **kwargs)

    def prepare_object_for_save(self, obj):
        obj.owner = self.request.user
        # Code for stacked milestones and rewards
        context = self.get_context_data()
        milestone_form = context['milestone_formset']
        reward_form = context['reward_formset']
        if milestone_form.is_valid() and reward_form.is_valid():
            self.object = form.save()
            milestone_form.instance = self.object
            milestone_form.save()
            reward_form.instance = self.object
            reward_form.save()
            return HttpResponseRedirect(success_url)

    def form_invalid(self, form):
        return self.render_to_response(self.get_context_data(form=form))

    def get_context_data(self, **kwargs):
        context = super(ProjectNew, self).get_context_data(**kwargs)
        if self.request.POST:
            context['milestone_formset'] = MilestoneFormSet(self.request.POST)
            context['reward_formset'] = RewardFormSet(self.request.POST)
        else:
            context['milestone_formset'] = MilestoneFormSet()
            context['reward_formset'] = RewardFormSet()
        return context 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:52:21.840

如果我理解您的问题，问题是您正在计算表单集中有多少表单，但您想要/需要计算表单集中有多少[BOUND](https://docs.djangoproject.com/en/dev/ref/forms/api/#bound-and-unbound-forms)表单。

所以，我认为你需要改变这一行：

```
if len(self.forms) < REQUIRED_MILESTONES: 
```

对于这些行：

```
bounded_forms = filter(lambda form:form.isbound(), self.forms)
if len(bounded_forms) < REQUIRED_MILESTONES: 
```

然后您可以在执行此操作时引发验证错误。

**编辑：**

也许您不了解表单集验证的工作原理。可能[这](https://docs.djangoproject.com/en/dev/topics/forms/formsets/#custom-formset-validation)会有所帮助，特别是这句话：

> 在调用了所有 Form.clean 方法之后调用 formset clean 方法。将使用表单集上的 non_form_errors() 方法找到错误。

如果我明白你说的意思

> 当我提交带有 3 个空里程碑表单的表单时，它对第一个表单没有任何作用。ValidationError(...)

然后，您看不到引发的错误。因此，寻找它们的地方是 formset "non_form_errors" 方法。在你的模板中加入这样的东西：

```
<span>{{milestone_formset.non_form_errors}}</span> 
```

现在您应该看到您在里程碑表单集清理方法中提出的错误。

希望能帮助到你！

# google-app-engine - 从 gwt 中的另一个服务调用一个服务

> ID：10867245
> 
> 赞同：1
> 
> 时间：2012-06-03T01:29:56.660
> 
> 标签：google-app-engine, gwt

我们有一个 GWT + GAE 应用程序，情况如下：

我们有两种不同的表格/页面：

1.  注册为献血者
2.  注册为眼睛捐赠者

到目前为止，我们有两个不同的入口点类，它们调用两个不同的服务，一个实现为 RegisterBloodDonorServiceImpl，另一个实现为 RegisterEyeDonorServiceImpl。

现在，我们想要实现一个功能，我们想要让献血者也可以注册为眼睛捐赠者。由于数据几乎相同，因此我们不希望最终用户填写两个表格，而只需提供一个复选框即可在献血者表格上实现相同的功能。

那么，现在的问题是我们应该如何实现它？

1.  献血者数据在服务中持久化后，我们应该从 RegisterBloodDonorServiceImpl 内部调用 RegisterEyeDonorServiceImpl 吗？如果是，那么我们不确定如何从另一项服务调用一项服务？

2.  我们应该在入口点实现类中一个接一个地调用两个服务吗？

3.  有更好的主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T23:25:49.880

在我们的项目中有代码需要从多个服务调用的地方，我们发现最好将代码从我们的`*ServiceImpl`类中提取到它自己的类中。然后每个服务可以根据需要保存自己的此类实例。

因此，在您的情况下，我建议使用名称创建一个类，例如`EyeDonorServiceCalls`使用`registerEyeDonor`. `RegisterEyeDonorServiceImpl`将保留此类的实例并`registerEyeDonor`在收到适当的服务调用时调用。`RegisterBloodDonorServiceImpl`如果勾选了相应的复选框，将保留另一个实例并调用`registerEyeDonor`作为献血者登记的一部分。

# c++ - C++ 类中的内联规则是什么？

> ID：10867247
> 
> 赞同：4
> 
> 时间：2012-06-03T01:30:19.127
> 
> 标签：c++, inline

从我很久以前在某处读到的内容看来，如果您希望在编译阶段内联类成员函数，则必须在类声明块中定义该函数。

但这有一个细节泄漏的缺点。恕我直言，其他程序员在打开 .h 文件时应该只看到类接口。

第一个陈述在现代 C++ 中是否仍然正确，曾经是这样吗？有没有办法强制内联声明的函数，最好是在另一个文件中？

在类声明块中保留简短的成员函数通常更好吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T01:40:21.773

> 似乎如果您希望在编译阶段内联类成员函数，则必须在类声明块中定义该函数。

这不是真的。在类*定义中**定义*的函数被隐式标记为. 但是您不需要在类中定义函数，您可以显式请求它：*`inline``inline`*

 *```
struct X {
   void f();
};
inline void f() {} 
```

`inline`另一方面，关键字并不意味着该函数将被内*联*，而是它可以在多个翻译单元中*定义*，即如果多个翻译单元包含包含该定义的同一个标头，则链接器不会失败有*多重定义错误*。

现在，在实际*内联*时，编译器可以决定内联或不内联任何函数，无论该函数是否被声明为`inline`提供它看到该函数的*定义*（它将内联的代码），这就是一般的原因应该内联的函数应该在标题中定义（在类定义内部或`inline`在外部标记。

此外，较新的工具链可以执行*整个程序优化*或其他链接时间优化，链接器也可以通过这些优化来决定应该内联函数。在这种情况下，函数定义不需要在调用站点*可见*，因此可以在 .cpp 文件中定义。但是如果你真的想要*内联*函数，最好不要依赖这个特性，而只是在标题中定义函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T01:36:21.260

问：有没有办法强制内联函数？

答：没有

> 无论您如何将函数指定为内联，它都是允许编译器忽略的请求：它可能内联扩展对内联函数的一些、全部或不调用。

问：C++ 类中的内联规则是什么？

> [C++ 中的内联成员函数](https://stackoverflow.com/questions/603390/inline-member-functions-in-c)
> 
> 就标准 C++ 而言，内联函数必须在使用它的每个翻译单元中定义......
> 
> 这与必须在整个程序中只定义一次的非内联函数不同（一个定义规则）......
> 
> 对于成员函数，如果你在类中定义你的函数，它是隐式内联的。由于它出现在标题中，因此必须在使用它的每个翻译单元中定义它的规则会自动得到满足。

这是一个很棒的常见问题解答（比“迂腐”更“实用”）：

[http://www.parashift.com/c++-faq-lite/inline-functions.html](http://www.parashift.com/c++-faq-lite/inline-functions.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T01:59:31.247

> 第一个陈述在现代 C++ 中是否仍然正确，曾经是这样吗？

正如大卫解释的那样，还有 inline 关键字。正如保罗所说，它可以忽略不计。

> 有没有办法强制内联声明的函数，最好是在另一个文件中？

可能是通过配置你的编译器。无论如何，它可能会在你背后做一些事情。例如。gcc`-finline-functions`等将针对某些优化级别打开

> 在类声明块中保留简短的成员函数通常更好还是没有？

由你决定。请注意，如果您多次使用内联方法，那么您可能会增加目标文件的大小，因此可能会增加您正在构建的内容的大小，并且可能会减慢它的速度。

FWIW我只倾向于将实现放在头文件中出于懒惰:)*

# c# - 播放“录制”的声音

> ID：10867249
> 
> 赞同：0
> 
> 时间：2012-06-03T01:30:25.227
> 
> 标签：c#, winforms, bass.dll

我正在用 C# 构建一个相当简单的采样器。我已经掌握了基本的声音结构（音高、播放中停止声音等）。但是当我尝试录制和播放用户输入的声音时，我的问题就出现了。录制时，我将声音保存到字典中，以开始时间为键（类“时间”从 0 开始）以及声音的长度。在播放录制的声音时，我目前正在使用计时器来模拟系统中的时间。每次播放声音时，我都会将计时器间隔设置为当前声音和下一个声音之间的时间差。大部分开始都很好，但声音通常完全不同步，声音被缩短或开始太晚等等，我认为问题在于我使用了计时器，但我不知道另一种方法它。我正在使用贝司。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T03:34:04.967

你用什么定时器？.NET 中的大多数计时器对于此任务来说太不准确了，您应该查看 P/Invoking Multimedia Timers（例如，请参阅[this ）或使用](http://www.codeproject.com/Articles/5501/The-Multimedia-Timer-for-the-NET-Framework)[Stopwatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)构建您自己的计时器。

# python - 屏幕抓取图像（即 Firefox 页面信息/谷歌图像）

> ID：10867253
> 
> 赞同：2
> 
> 时间：2012-06-03T01:31:36.430
> 
> 标签：python, image, firefox, screen-scraping, google-shopping-api

最好使用给定 URL 的 python（当前使用 urllib 和 BeautifulSoup）。

例如，我正在尝试抓取此页面上的主要照片：[http ://www.marcjacobs.com/marc-jacobs/womens/bags-and-accessories/c3122001/the-single#?p=1&s=12](http://www.marcjacobs.com/marc-jacobs/womens/bags-and-accessories/c3122001/the-single#?p=1&s=12)

在 Firefox 中，工具 > 页面信息 > 媒体下列出了所有可见图像，包括指向我要抓取的图像的链接（[http://imagesec.mj.ctscdn.com/image/336/504/6ace6aac-c049-4d7e- 9465-c19b5cd8e4ac.jpg](http://imagesec.mj.ctscdn.com/image/336/504/6ace6aac-c049-4d7e-9465-c19b5cd8e4ac.jpg) )

两个相互关联的问题：

1.  如果我查看源代码，则在 html 文档中找不到从 Firefox 工具检索到的图像路径...有没有什么方法可以在不通过 Firefox 页面信息的情况下检索此路径？也许通过 Python 和/或 Javascript/JQuery？
2.  我正在尝试以“橙色”获取产品照片，并注意页面默认始终加载黑色

一个工作示例可能是 Google 的“购物”，如果您输入该产品的名称并选择颜色，则图像会在搜索结果中以正确的颜色（来自完全相同的页面）显示。

基本上，我希望能够从大多数购物网站上抓取颜色和样式/变化特定的图像。

选择正确的颜色似乎更复杂，在这种情况下，我现在只选择黑色的主要产品图片。

到目前为止，我已经尝试根据 img 高度标签选择图像，也尝试在没有高度/宽度标签时读取尺寸......但我想到必须有更好的方法。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-03T02:19:29.607

这可能有点复杂，但在这种特殊情况下工作的大多数解决方案几乎是相同的。

首先，让我告诉你为什么使用 Beautiful Soup 或 xmlml 不起作用。您需要检索一些只有在单击橙色包缩略图后才可用的信息，对吧？这是使用 Javascript 加载的，因此 Beautiful Soup 和朋友将无法使用橙色包图像（因为他们不解析 Javascript，也不解析树中不存在的元素）。所以这是一个死亡的结局。

但是，还有其他屏幕抓取工具，例如[Selenium](http://seleniumhq.org/docs/03_webdriver.html)或 PhantomJS。我已经测试了两者并且工作得很好。他们基本上集成了浏览器，因此他们显然能够管理 javascript。我不知道您是否需要从服务器上自动抓取它，或者您想随意启动抓取过程。使用 Selenium（在您告诉它要打开哪个页面、要单击哪个元素等之后），您将看到您的浏览器自行完成所有这些工作。还有其他可用选项，例如使用无头浏览器。在我看来，它非常强大，但让它工作起来可能会变得相当复杂。

一个更简单的解决方案是使用 PhantomJs。它与 Selenium 类似，但正如其名称所示，您通过 Javascript 提供指令（这可能会更舒服一些，因为您已经在处理 Web 元素）。我推荐你使用[CasperJS](http://casperjs.org/)：`It eases the process of defining a full navigation scenario and provides useful high-level functions, methods & syntactic sugar for doing common tasks...`

让我来感受一下它的样子：

```
casperFunction = function(){
    var casper = require('casper').create({
        verbose: true
    });

    casper.start('yourwebpage'); // loading the webpage

    casper.then(function(){ // after loading...
        casper.evaluate(function(){ // get me some element's value
            document.getElementById('yourelement').value
        });

    });

    casper.then(function(){ // after that, click on this other element
        this.click('#id_of_other_element');
    })

    casper.wait(7000); // wait for some processing... this can be quite 
                       // useful if you need to wait a few seconds in 
                       // order to retrieve your orange bag later

    casper.run(); // actually runs the whole thing 
```

在那里，您拥有完成任务所需的大部分东西。

顺便说一句，让我提醒您，通常需要获得许可才能检索此类内容。

希望有帮助。

# jquery - json发布后无法重定向

> ID：10867254
> 
> 赞同：2
> 
> 时间：2012-06-03T01:31:48.837
> 
> 标签：jquery, json, asp.net-mvc-3, jquery-ui, modal-dialog

我认为我有以下 jquery 代码

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#dialog-confirm").dialog({
            autoOpen: false,
            modal: true,
            resizable: false,
            width: '500px'
        });

        $(".deleteLink").click(function (e) {
            e.preventDefault();
            var targetUrl = $(this).attr("href");
            var dID = $(this).attr("id");
            $("#dialog-confirm").dialog({
                buttons: {
                    "Confirm": function () {
                        $.ajax({
                            url: '@Url.Action("DeleteSession")',
                            type: 'POST',
                            data: { id: dID },
                            success: function (data) {
                                    window.location.herf = data.redirectToUrl;
                            }
                        });
                    },
                    "Cancel": function () {
                        $(this).dialog("close");
                    }
                }
            });

            $("#dialog-confirm").dialog("open");
        });
    });
</script> 
```

触发对话框的这个链接是；

```
@Html.ActionLink("Delete", "", new { id = s.ID },new { @class = "deleteLink", id = s.ID}) 
```

控制器方法`DeleteSession`返回一个`Json`结果。

控制器：

```
[HttpPost]
public JsonResult DeleteSession(int id)
{

    try
    {
        sRep.DeleteSession(id);
        return Json(new {success = true, redirectToUrl = Url.Action("Index")});
    }
    catch (Exception e)
    {
        return Json(new {success = false, redirectToUrl = Url.Action("DisplayError", new { eerror = 
                                    "Unable to delete the course. " + "Internal error: " + e.Message})});
    }

} 
```

我检查了`Json`结果，看起来很好。唯一的问题是`window.location.herf = data.redirectToUrl;`它不起作用。页面未重定向，对话框仍在屏幕上。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T01:34:38.537

我想你打算这样做 `window.location.href`

您的原始代码：

```
window.location.herf = data.redirectToUrl; 
```

应改为：

```
window.location.href = data.redirectToUrl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T05:33:44.810

你也可以使用

```
$(window.location).attr('href',data.redirectToUrl); 
```

# iphone - 扩展/类别而不是接口

> ID：10867255
> 
> 赞同：2
> 
> 时间：2012-06-03T01:31:53.353
> 
> 标签：iphone, objective-c, ios, objective-c-category

所以我注意到在我的新 Xcode 项目中，默认情况下，我的 .m 文件中有一个类用于我的类。例如，我将在 .m 文件中有这个：

```
@interface ViewController ()

@end

@implementation

   //Some code    

@end 
```

我想知道是否可以在 .m 文件的类别中声明我的变量和函数，或者我应该像以前一样在 .h 文件中这样做。基本上，关于类别的最佳实践是什么。

顺便说一句，我的问题与以下链接有关，但该链接并不能完全回答我的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T01:35:00.623

这不是一个类别，它是一个[类扩展](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)（注意空括号）。您可以在扩展中保留私有实现细节，包括私有 ivars，以将 .h 文件中的声明限制为类的接口。请注意，您只能在扩展中添加 ivars，而不能在类别中添加。

这种方法的一个非常重要的结果是，如果您需要仅用于实现的额外标头的类型的 ivars，您可以避免将该标头包含在接口的标头中，从而对您的类的用户隐藏实现依赖项。

# file - 为什么我的声音文件没有被复制到？

> ID：10867262
> 
> 赞同：0
> 
> 时间：2012-06-03T01:33:17.377
> 
> 标签：file, indexing, audio

所以我写了一个代码来创建两个声音文件，提供一些细节并探索它们，但是我很难用一部分来创建第三个声音文件，它的长度是前两个声音文件中较长的一个，并且采样率两者（他们有相同的sr）。该函数旨在获取前两个声音文件的所有索引的样本值，将它们相加，然后将它们复制到第三个声音文件中。我以为我有它，但是当我浏览第三个文件时，它出现了空白。

```
def sound():
  a = pickAFile()
  b = pickAFile()

  sound1 = makeSound(a)
  sound2 = makeSound(b)

  sr1 = getSamplingRate(sound1)
  sr2 = getSamplingRate(sound2)

  printNow(sr1)
  printNow(sr2)

  play(sound1)
  play(sound2)

  explore(sound1)
  explore(sound2)

  if sr1 == sr2:
    printNow('Sampling Rate 1: %d \nSampling Rate 2: %d' % (sr1, sr2))
  else:
    printNow('Sampling Rates are not equal.')
  c=getLength(sound1)
  d=getLength(sound2)
  printNow('sound1: %d, sound2: %d' % (c, d))
  sound3 = Sound(getLength(sound2), int(sr1))

  for index in range(0, getLength(sound1)): 
    value = getSampleValueAt(sound1, index)

  for index in range(0, getLength(sound2)):
    value2 = getSampleValueAt(sound2, index)

  for index in range(0, getLength(sound3)):  
    setSampleValueAt(sound3, index, value+value2)

  play(sound3)
  explore(sound3) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T23:39:45.897

我猜这是python（？）。我不知道python，但很明显问题出在你代码的这一部分：

```
for index in range(0, getLength(sound1)): 
    value = getSampleValueAt(sound1, index)
for index in range(0, getLength(sound2)):
    value2 = getSampleValueAt(sound2, index)
for index in range(0, getLength(sound3)):  
    setSampleValueAt(sound3, index, value+value2) 
```

假设您已正确缩进，您正在使用三个单独的循环，因此最后一个循环遍历您的目标文件并将所有样本值设置为它找到的最后一个值的总和。您应该只使用一个循环。更像这样的东西：

```
for index in range(0, MIN( getLength(sound1), getLength(sound2) ) ):
    value = getSampleValueAt(sound1, index)
    value2 = getSampleValueAt(sound2, index) 
    setSampleValueAt(sound3, index, value+value2) 
```

（无论 python 中的 min 是什么），当然，您也应该将创建文件的长度值设置为最小值。当然还有其他方法可以解决文件长度不匹配的问题，但首先要解决循环问题。

# java - 制作Applet游戏多人

> ID：10867276
> 
> 赞同：0
> 
> 时间：2012-06-03T01:36:10.627
> 
> 标签：java, sockets, applet, multiplayer

```
 This is a intro to my problem Skip if you don't care. 
```

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

我有一个 Java 小程序，而且我是 Java 新手。CSIS10a 第一学期 Java 简介。我和我的朋友有一个项目要为我们的期末制作一个 Java 小程序游戏。我们以“A”结束，在我看来这是最好的。想想小行星，但有点像 R-Type 这样的横向卷轴。我的数学朋友做了所有的物理，我不得不说一些很酷的东西，我的另一个朋友是美术师，FX画了船，做了爆炸之类的，也很棒。我猜我是“代码猴子”，因为我在网络方面有丰富的背景，而且我是 Linux 服务器的系统管理员。所以我知道 bash 就像我的手背一样，java 对我来说很容易（我应该说比我的同行容易得多）。所以在决赛之后他们说“嘿，我们应该把它放到网上，让它成为多人游戏！”，当然，我说，“当然，这应该很简单！设置一个 java 服务器并让他们来回发送 X 和 Y 坐标。为 X&Y 制作 getter 和 setter 并开展业务！” 当然我错了哈哈。

所以......经过一个月的努力解决这个问题并每周在这里发布一些小问题后，我决定在这里发布整个问题，看看我是否可以获得一些指导。

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

```
 End of intro 
```

我已经转换了一个简单的聊天客户端/服务器系统（基于回显服务器示例）以将整数而不是字符串发送到服务器，并且服务器将整数发送到第二个客户端。到目前为止，客户端仍然是一个应用程序，而不是小程序的一部分，我们一直在通过调用我们单独运行的游戏中的客户端方法来测试它。我不知道如何在游戏启动时运行客户端，因为每次我尝试创建一个创建套接字的方法时，游戏都会冻结并且无法连接。我认为这是因为套接字就像一个无限循环，它永远不会继续使用其余代码。所以我查看了线程，我创建了一个新线程来建立连接并且游戏是分开的，但你猜怎么着？游戏冻结并连接或它播放但不连接大声笑。

任何帮助都会很棒，我不知道该怎么做，如果你想让我发布我所有的代码，我没有想法和 idk，因为它很长，但是如果你愿意，我会发布我的客户课程......

```
package Connection;
import java.awt.Color;
import java.awt.BorderLayout;
import java.awt.event.*;
import javax.swing.*;
import java.util.Timer;
import java.io.*;
import java.net.*;

class client extends JFrame implements ActionListener {

static String address = "127.0.0.1";
static JLabel text, clicked;
static JButton button;
static JPanel panel;
static JTextField textField;
static JTextArea textArea;
Socket socket = null;
PrintWriter out = null;
BufferedReader in = null;

client() {
    text = new JLabel("Send Text Over Socket:");
    textField = new JTextField(20);
    textArea = new JTextArea(5, 20);
    button = new JButton("Send");
    button.addActionListener(this);

    panel = new JPanel();
    panel.setLayout(new BorderLayout());
    panel.setBackground(Color.white);
    getContentPane().add(panel);
    panel.add("Center", textField);
    panel.add("North", textArea);
    panel.add("South", button);
}

public void actionPerformed(ActionEvent event) {
    Object source = event.getSource();

    if (source == button) {
        String text = textField.getText();
        out.println(text);
        textField.setText(new String(""));
        try {
            String line = in.readLine();
            if (line != null)
                client.textArea.append("Text received :" + line + "\n");
            else
                client.textArea.append("Welcome To James World Messager!");
        } catch (IOException e) {
            client.textArea.append("Read failed\n");
            System.exit(1);
        }
    }
}

public void listenSocket() {
    try {
        socket = new Socket(address, 4444);
        out = new PrintWriter(socket.getOutputStream(), true);
        in = new BufferedReader(new InputStreamReader(
                socket.getInputStream()));
    } catch (UnknownHostException e) {
        client.textArea.append("Unknown host: " + address + "\n");
        System.exit(1);
    } catch (IOException e) {
        client.textArea.append("No I/O\n");
        System.exit(1);
    }
}

public static void main(String[] args) throws IOException {
    client frame = new client();
    frame.setTitle("Client Program");

    WindowListener l = new WindowAdapter() {
        public void windowClosing(WindowEvent e) {
            System.exit(0);
        }
    };

    frame.addWindowListener(l);
    frame.pack();
    frame.setVisible(true);
    frame.listenSocket();
} 
```

}

这是我尝试在游戏中实现的代码，作为我可以调用但没有骰子的类......

```
package Game;
import java.io.*;
import java.net.*;

public class tclient extends Thread{
 String address = "***.***.***.***;
 Socket socket = null;
 PrintWriter out = null;
 BufferedReader in = null;
 tclient tclient[];

 public tclient(Socket socket, tclient[] tclient) {
    this.socket = socket;
    this.tclient = tclient;
    }
 public void run(){
 try{
   socket = new Socket(address, 1234);
   out = new PrintWriter(socket.getOutputStream(), true);
   in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
 } catch (UnknownHostException e) {
   System.out.println(e);
 } catch  (IOException e) {
   System.out.println(e); 
 }
 }
 //    public void sendX(int x){
 //        out.println(x);
 //     }
 //    public void sendY(int Y){
 //        out.println(Y);
 //     }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T02:25:08.273

我认为您可能遇到的一个问题（或即将遇到的问题）是 Java applet[不允许与托管 applet 的服务器以外的任何服务器建立 TCP 连接](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html)。因此，除非您在 localhost 上运行 Web 服务器并将您的 Web 浏览器也指向 localhost，否则从 applet 到 127.0.0.1 的 TCP 连接将引发异常并且无法正常工作。

据推测，为了让多人游戏在 Java 小程序上运行，您需要在与 Web 服务器相同的机器上运行一个单独的服务器进程。然后，各种 Java 小程序都可以连接到该服务器进程（因为它们被允许连接到 Web 服务器的 IP 地址），并且服务器进程将负责根据需要将信息从一个 Java 小程序转发到另一个。

# ios - XCode 4 - libsqlite3.dylib：没有这样的文件或目录

> ID：10867277
> 
> 赞同：1
> 
> 时间：2012-06-03T01:36:17.583
> 
> 标签：ios, xcode

我正在尝试编译一个在 Xcode 4（用于 Snow Leopard）中使用 SQlite 的 iOS 应用程序，但出现以下错误 -

```
error: /Apps/Cocktails/libsqlite3.dylib: No such file or directory 
```

我将文件 libsqlite3.dylib 复制到 Xcode 项目中，但错误不会消失。如何解决错误？

**编辑**- 这是完整的错误日志

```
CpResource libsqlite3.0.dylib /Users/ashishagarwal/Library/Developer/Xcode/DerivedData/Cocktails-gzqdmwrvzqciekgjzxnriugcxwwm/Build/Products/Debug-iphonesimulator/Cocktails.app/libsqlite3.0.dylib
cd /Apps/Cocktails
setenv PATH "/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
builtin-copy -exclude .DS_Store -exclude CVS -exclude .svn -exclude .git -exclude .hg -resolve-src-symlinks /Apps/Cocktails/libsqlite3.0.dylib /Users/ashishagarwal/Library/Developer/Xcode/DerivedData/Cocktails-gzqdmwrvzqciekgjzxnriugcxwwm/Build/Products/Debug-iphonesimulator/Cocktails.app

error: /Apps/Cocktails/libsqlite3.dylib: No such file or directory 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T06:23:14.930

看起来您的库缺少 libsqlite3.dylib 和 libsqlite3.0.dylib，因此请从任何其他计算机复​​制这些文件并将这些文件放在您的计算机中。

### 程序：

**1：**在这些文件所在的计算机上打开xcode，将libsqlite3.0.dylib从链接二进制文件中添加到您的项目中。
**2：**右键单击libsqlite3.0.dylib并在finder中显示。
**3：**复制两个文件 libsqlite3.0.dylib 和 libsqlite3.dylib 并放在其他计算机上缺少这些文件的相同位置。

给你，我有同样的问题并以这种方式解决。

# javascript - 如何在 JavaScript 中向 SVG 对象添加过滤器？

> ID：10867282
> 
> 赞同：9
> 
> 时间：2012-06-03T01:37:09.253
> 
> 标签：javascript, svg, svg-filters

我正在尝试使用 JavaScript 创建 feGaussianBlur 过滤器并将其添加到 SVG 矩形，并使用[此代码](http://www.w3schools.com/svg/tryit.asp?filename=trysvg_fegaussianblur)作为参考。我得到一个矩形，但它没有被过滤。我究竟做错了什么？

我正在尝试这样：

```
var container = document.getElementById("svgContainer");
var mySvg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
mySvg.setAttribute("version", "1.1");
container.appendChild(mySvg);

var obj = document.createElementNS("http://www.w3.org/2000/svg", "rect");
obj.setAttribute("width", "90");
obj.setAttribute("height", "90");

var defs = document.createElementNS("http://www.w3.org/2000/svg", "defs");

var filter = document.createElementNS("http://www.w3.org/2000/svg", "filter");
filter.setAttribute("id","f1");
filter.setAttribute("x","0");
filter.setAttribute("y","0");

var gaussianFilter = document.createElementNS("http://www.w3.org/2000/svg", "feGaussianBlur");
gaussianFilter.setAttribute("in","SourceGraphic");
gaussianFilter.setAttribute("stdDeviation","15");

filter.appendChild(gaussianFilter);
defs.appendChild(filter);
mySvg.appendChild(defs);    
obj.setAttribute("filter","url(#f1)");

mySvg.appendChild(obj); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T11:37:58.320

上面的代码现在对我有用！可以简单地使用`createElementNS`,`setAttribute`和`appendChild`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-27T13:20:39.837

如果您喜欢更易读的代码 - 就像我一样 - [svg.js](http://svgjs.com)现在有一个[svg 过滤器插件](https://github.com/svgdotjs/svg.filter.js)。您的示例代码将简化为：

```
var draw = SVG('canvas')

draw.rect(90,90)

rect.filter(function(add) {
  add.gaussianBlur('15')
}) 
```

可能已经晚了一年，但仍然值得一提:)

# r - 添加多图轴

> ID：10867283
> 
> 赞同：2
> 
> 时间：2012-06-03T01:37:11.923
> 
> 标签：r

为了生成具有多个图的布局，我有以下带有一些虚拟图的代码：

```
jpeg("/path/to/file",height=10000,width=5000)
plot.new()
par(mar=c(2,2,1,1), oma=c(2,4,0,0), xpd=NA)

for (i in 1:10) {

    par(mar=c(2,2,1,1),fig=c(0, 0.5, (10-i)/10, (11-i)/10), new=T)    
    matplot(rnorm(20)*sample(100,1),                                          
        col="blue",axes=F,type="l",lwd=10, xlab="",ylab="")

    par(mar=c(2,2,1,1),fig=c(0.5, 1, (10-i)/10, (11-i)/10), new=T)    
    matplot(rnorm(20)*sample(100,1),                                          
        col="red",axes=F,type="l",lwd=10, xlab="",ylab="")    
}
dev.off() 
```

我想在远 LHS 和远 RHS 上添加一条垂直线/轴，跨越一列中的所有 10 个图。因为我将使用这条线作为轴，所以我需要能够添加刻度和标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T11:10:25.233

`?axis`您可以通过或绘制轴`?Axis`。要在多个绘图上跨越您的轴，您必须重置*usr*坐标。

请在下面找到基本图形解决方案：

```
## store number of rows
nRow <- 10

## your example code 
## (only the number "10" is replaced by nRow and oma is adapted)
plot.new()

par(mar=c(2, 2, 1, 1), oma=c(2, 4, 0, 4), xpd=NA)

for (i in 1:nRow) {

    par(mar=c(2, 2, 1, 1), fig=c(0, 0.5, (nRow-i)/nRow, ((nRow+1)-i)/nRow), new=TRUE)    
    matplot(rnorm(20)*sample(100, 1),                                          
            col="blue", axes=F, type="l", lwd=10, xlab="", ylab="")

    par(mar=c(2, 2, 1, 1), fig=c(0.5, 1, (nRow-i)/nRow, ((nRow+1)-i)/nRow), new=TRUE)
    matplot(rnorm(20)*sample(100, 1),                                          
            col="red", axes=F, type="l", lwd=10, xlab="", ylab="")    
}

## define new user coordinates
usr <- c(0, 1, 0, 1) ## x1, x2, y1, y2

## calculate tick positons
## in general: (usr[3]+(diff(usr[3:4])/(nRow-1))*0:(nRow-1))
## but our usecase is much easier:
ticksAt <- 1/(nRow-1)*0:(nRow-1)

## choose left column and reset user plotting area (usr)
par(mar=c(2, 2, 1, 1), fig=c(0, 0.5, 0, 1), usr=usr, new=TRUE)
## draw axis; see ?Axis for details
Axis(side=2, at=ticksAt, labels=as.character(1:(nRow)), line=0.5)

## choose right column and reset user plotting area (usr, not needed because already done)
par(mar=c(2, 2, 1, 1), fig=c(0.5, 1, 0, 1), usr=usr, new=TRUE)
## draw axis; see ?Axis for details
Axis(side=4, at=ticksAt, labels=as.character((nRow+1):(2*nRow)), line=0.5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T02:18:55.990

您可以制作整个设备的整体图，在其中添加轴，然后使用`subplot`函数（TeachingDemos 包）在大图中绘制图。

# javascript - jQuery Tablesorter 日期选择器

> ID：10867285
> 
> 赞同：0
> 
> 时间：2012-06-03T01:37:25.393
> 
> 标签：javascript, jquery, datepicker, tablesorter

我将如何在 Tablesorter 中实现日期选择器，以便我可以在 to 日期之间显示结果`01/01/2001 - 01/01/2012`？

我收到了以下问题，因此我对上述问题提出了疑问：

**在 HTML 中显示一组表格数据，其中数据包含日期。实现过滤表格数据的日期选择器。在可能的情况下，允许通过 ajax 或 json 提要提供表格数据。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T03:57:02.247

正如我之前评论过的，您可以通过简单地使用 2 个[jQuery UI 日期选择器](http://jqueryui.com/demos/datepicker/)来做到这一点——一个用于最小日期，另一个用于最大日期——并过滤日期。

我做了一个非常简单的例子，[看一看](http://jsfiddle.net/ult_combo/zHRv4/20/)。这[是注释版本](http://jsfiddle.net/ult_combo/zHRv4/21/)（您也可以结合日期选择器键入数字，这可能被证明是一种更简单的方法）。

现在，如果您想在 div 中动态加载内容，您只需要查看[jQuery 的 Ajax 文档](http://api.jquery.com/jQuery.ajax/)或阅读一些教程 - 这是非常基本的内容。

制作 Ajax 的最简单方法是将表格包装在 div 中，例如，`tablewrapper`然后您可以使用[`.load()`](http://api.jquery.com/load/)jQuery 方法：

```
$('#tablewrapper').load('UrlWhichContainsMyTable.html'); 
```

在上面的示例中，您将回显一个整体`<table> ... </table>`（或将其包含在 html 文档中）。

如果要动态加载表行，可以对表使用[`.append`](http://api.jquery.com/append/)和[`.appendTo`](http://api.jquery.com/appendTo/)方法：

```
$.get('urlWithMyNewRows.html', function(r){ //or $.post, $.ajax etc
      $('table.bordered').append(r);
}); 
```

在上面的示例中，您将获取表格行的集合以从文档`<tr>`中附加到您的表格中。`urlWithMyNewRows.html`

如果需要，请查看[$.getJSON 文档和示例](http://api.jquery.com/jQuery.getJSON/)。=]

附言。我将我的小提琴称为“简单”，因为我什至没有验证是否在`maxdate`显示`mindate`警告之前也没有显示“未找到结果”消息，即使这些也只是几行代码。

# python - 使用 XML 解析结果在元组中搜索部分字符串匹配

> ID：10867286
> 
> 赞同：1
> 
> 时间：2012-06-03T01:38:15.533
> 
> 标签：python, xml, list, tuples, string-matching

经过几次操作，我得到了一个模式列表：

```
[(u'DAY1 KWH', u'300.000000'), 
(u'DAY2 KWH', u'300.000000'), 
(u'DAY3 KWH', u'300.000000'), 
(u'DAY4 KWH', u'300.000000'), 
(u'DAY5 KWH', u'300.000000'), 
(u'DAY6 KWH', u'300.000000'), 
(u'DAY7 KWH', u'300.000000'), 
(u'DAY8 KWH', u'300.000000'), 
(u'DAY9 KWH', u'300.000000'), 
(u'DAY10 KWH', u'300.000000'), 
(u'DAY11 KWH', u'300.000000'), 
(u'DAY12 KWH', u'300.000000'), 
(u'DAY13 KWH', u'300.000000'), 
(u'DAY14 KWH', u'300.000000'),
... 
```

并非所有元素都包含“天”或“千瓦时”这个词——事实上，它们可能是当月天然气使用量或一周用水量等的测量值。我想做的是提取所有“ day”值并将它们放入一个列表中，所有“week”值放入另一个列表中，所有“month”值放入第三个列表中。最终目标是能够绘制每日、每周和每月的公用事业使用情况。请注意，这些是测试值。

我注释掉的五种不同的方法都没有真正起作用，但每次尝试都来自阅读不同的 Stack Overflow 线程。

我知道代码肯定可以变得更高效/更快，所以如果您有任何优化建议，请随时添加。非常感谢您的帮助！

```
import urllib
import urllib2
from xml.dom import minidom
import matplotlib.pyplot as plt

def main(): 

    path = "http://128.226.6.214/bacrest/bacnet_device_70200/"
    BACrest = 'urn:BACrestService'
    xlink = 'http://www.w3.org/1999/xlink'

    dom = minidom.parse(urllib.urlopen(path)) 

    values = [] 
    descriptions = []
    for node in dom.getElementsByTagNameNS(BACrest, 'ChildNode'):  

        href = node.getAttributeNS(xlink, 'href')

        descriptionDomain = href + '/Description'
        descriptionSubDom = minidom.parse(urllib.urlopen(descriptionDomain))
        descriptionElements = descriptionSubDom.getElementsByTagNameNS(BACrest, 'return')
        descriptions.append(descriptionElements) 

        valueDomain = href + '/Value'
        valueSubDom = minidom.parse(urllib.urlopen(valueDomain))
        valueElements = valueSubDom.getElementsByTagNameNS(BACrest, 'return')[0].firstChild.data
        values.append(valueElements)

    combination = zip(descriptions,values) 
```

解决方案尝试

```
 #print filter(lambda x: 'DAY1 ' in x, combination)

    #dayInfo = []
    #for sublist in combination:
        #if 'DAY1 ' in sublist:
            #dayInfo.append(sublist)
    #print dayInfo

    #dayInfo = [s for s in combination if 'DAY1 ' in s]
    #print dayInfo

    #dayInfo = [i for i,v in combination if i.startswith('DAY1') in i]
    #print dayInfo

    #dayInfo = []
    #if any('DAY1 ' in x for x in combination):
        #dayInfo.append(x)
    #print dayInfo

main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T04:43:46.920

如您所描述的，如果`data`是表单的一些列表`[(u'DAY1 KWH', u'300.000000'), (u'DAY2 KWH', u'300.000000'), ...]`，那么以下代码应该可以工作：

```
for desc, val in data:
    if 'DAY' in desc:
        # do something with val
    elif 'WEEK' in desc:
       # do something else with val
    # etc... 
```

请注意，这并不是特别稳健，因为它会由于大小写等方面的差异而失败。使用正则表达式匹配，或者`desc`在执行字符串搜索之前在每次迭代中向上转换，可能会非常优越，除非您可以绝对确定输入将始终为大写。

# python - Python，一个字符串被分割成许多部分。里面有几块？

> ID：10867290
> 
> 赞同：-5
> 
> 时间：2012-06-03T01:39:19.107
> 
> 标签：python, split

我拆分了一个用分号分隔的很长的字符串，我想知道有多少拆分项？

我记得这与列表有关，python 中有一个方法可以告诉您该列表中有多少。我不记得它的方法。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T01:40:57.553

您可以在拆分后获得项目列表的长度：

```
len(my_long_string.split(';')) 
```

或者，计算分号的数量并加一：

```
my_long_string.count(';') + 1 
```

如果您不需要知道项目是什么，后者可能会更快，而只*需要知道有**多少*项目。

[`len`](http://docs.python.org/library/functions.html#len)是一个返回列表中项目数的函数。字符串有一个方法叫做[`split`](http://docs.python.org/library/stdtypes.html#str.split)分割分隔符上的字符串。他们还有一个方法称为[`count`](http://docs.python.org/library/stdtypes.html#str.count)计算子字符串的非重叠实例的数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T01:40:04.777

```
len(line.split(';')) 
```

将告诉您行中有多少个由分号分隔的字符串。

`line`是您的数据，[split(';')](http://docs.python.org/library/stdtypes.html?highlight=split#str.rsplit)将使用分号作为分隔符拆分行并创建一个字符串列表，而[len()](http://docs.python.org/library/functions.html#len)将告诉您列表中有多少项目。

# windows - 对目录中的所有文件执行 windows cmd 命令

> ID：10867295
> 
> 赞同：1
> 
> 时间：2012-06-03T01:40:22.040
> 
> 标签：windows, powershell, batch-file, logparser

很简单，我想对目录中的每个文件执行一个命令，一次一个，并记录该命令的输出。

我编写了以下批处理脚本：

```
pushd C:\Program Files\Log Parser 2.2
for %%x in (C:\templogs\3\C\IISLogFiles\W3SVC3\deduped*.log) do (
   LogParser "SELECT * INTO weblog FROM %%~dpnx" -i:W3C -o:SQL -server:localhost -database:testdb -driver:"SQL Server" -createTable:OFF >> input.out   
)
popd 
```

当我在命令提示符下执行它时，它所做的一切都是按原样复制粘贴这些命令。什么都不执行。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:36:28.047

出现这种情况的唯一情况是：

```
dir C:\templogs\3\C\IISLogFiles\W3SVC3\deduped*.log 
```

... 会返回空白。您能否再次检查此路径是否实际包含您要处理的文件...？

我已经尝试了几种方法并且总是得到预期的结果（在我的情况下无法识别 LogParser），除非我尝试过我的系统上不存在的路径......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:09:14.387

如何将 LogParser 执行为：

```
LogParser "SELECT * INTO weblog FROM C:\templogs\3\C\IISLogFiles\W3SVC3\deduped*.log" -i:W3C -o:SQL -server:localhost -database:testdb -driver:"SQL Server" -createTable:OFF 
```

# haskell - 条件句中的一元表达式 - GHC 编译，cabal 拒绝

> ID：10867300
> 
> 赞同：15
> 
> 时间：2012-06-03T01:41:49.847
> 
> 标签：haskell, cabal

为这个问题挠了一天。

我的代码中有一些函数如下所示：

```
function :: IO (Maybe Whatever)
function = do
   monadFun
   yaySomeIO
   status <- maybeItWillFail
   if checkStatus status  -- Did we succeed?
   then monadTime >>= return . Just . processItPurely
   else return Nothing 
```

ghci 将毫无问题地以交互方式加载和运行它，ghc 将愉快地编译它。然而，通过 cabal 运行它给了我这个：

```
myProgram.hs:94:16:
Unexpected semi-colons in conditional:
    if checkStatus status; then monadTime >>= return . Just . processItPurely; else return Nothing

Perhaps you meant to use -XDoAndIfThenElse? 
```

无论这个`-XDoAndIfThenElse`选项是什么，我似乎都无法在任何文档的任何地方找到它的踪迹。为什么 cabal（或者此时是 ghc？）因为我使用 IT 首先放在那里的分号而对我大喊大叫？或者在 if-then-else 语句中使用单子表达式只是一个坏主意？

请注意，阴谋集团根本不会抱怨这一点：

```
case checkStatus status of
   True -> monadTime >>= return . Just . processItPurely
   _    -> return Nothing 
```

...除了这很难看，我永远不想把它放在我的代码中。谁能告诉我发生了什么事？请提前致谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-03T02:25:48.693

`if`在-block 中缩进 - 表达式的“正确”方法`do`是将`else`and`then`行缩进到比 更远的位置`if`，就像这样。

```
function = do
   monadFun
   yaySomeIO
   status <- maybeItWillFail
   if checkStatus status  -- Did we succeed?
      then monadTime >>= return . Just . processItPurely
      else return Nothing 
```

这是因为在一个块中具有相同缩进量的行`do`通常被视为单独的语句。

但是，有一个名为的扩展程序`DoAndIfThenElse`允许您按照自己的方式编写它。此扩展在 Haskell 2010 中成为标准，这就是 GHC 默认启用它的原因。

Cabal 倾向于要求您对这些事情更加明确，因此要在 Cabal 中使用它，您需要在`.cabal`文件中提及它或添加`{-# LANGUAGE DoAndIfThenElse #-}`到模块的顶部。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T20:14:36.183

这不是您问题的直接答案，但您可以利用`MaybeT`. 此外，`foo >>= return . bar`与 相同`bar <$> foo`。（`<$>`来自`Control.Applicative`，与 相同`fmap`）

```
function :: MaybeT IO Whatever
function = do
   lift monadFun
   lift yaySomeIO
   status <- lift maybeItWillFail
   guard (checkStatus status)
   processItPurely <$> lift monadTime 
```

唯一的烦恼是无缘无故地撒上`lift`s，但有一些方法可以摆脱这些。

# python - 我尝试使用 python 读取 csv 文件并希望将值存储到 MySQL 中，但现在我遇到了一些错误

> ID：10867303
> 
> 赞同：0
> 
> 时间：2012-06-03T01:43:25.453
> 
> 标签：python, mysql

```
#!/usr/bin/python
import MySQLdb
import sys
import csv

csvfile='/home/arun/Documents/smartearn/Linux/SA/xbrlparser/UGT-2012-Concepts.csv'
def csvparsing():

    spamReader = csv.reader(open(csvfile, 'rb'), delimiter=',', quotechar='"')

    header=spamReader.next()

    conn = MySQLdb.connect (host = "localhost",
                           user = "arunkamaly",
                           db = "se")

    cursor=conn.cursor()
    for clist in spamReader:
        name=clist[1]+clist[2]
        cursor.execute("""
    INSERT INTO se_xbrl_concepts( xbrl_id,xbrl_name,xbrl_type,Xbrl_enumerations,Xbrl_substitutiongroup,Xbrl_balance, Xbrl_periodtype, Xbrl_IsAbstract,xbrl_label,Xbrl_desc)
     values(clist[0],%s,%s,%s,%s,%s,%s,%s,clist[9],%s)""")(name,clist[3],clist[4],clist[5],clist[6],clist[7],clist[8],clist[10])
     #   print name

    conn.commit()
    cursor.close()

if(__name__=='__main__'):
    csvparsing() 
```

mysql表是

```
 Field                  | Type         | Null | Key | Default | Extra          |
+------------------------+--------------+------+-----+---------+----------------+
| xbrl_id                | bigint(20)   | NO   | PRI | NULL    | auto_increment |
| xbrl_name              | varchar(255) | NO   |     | NULL    |                |
| xbrl_type              | varchar(10)  | NO   |     | NULL    |                |
| Xbrl_enumerations      | varchar(25)  | NO   |     | NULL    |                |
| Xbrl_substitutiongroup | varchar(255) | YES  |     | NULL    |                |
| Xbrl_balance           | varchar(50)  | YES  |     | NULL    |                |
| Xbrl_periodtype        | varchar(25)  | YES  |     | NULL    |                |
| Xbrl_IsAbstract        | bit(1)       | YES  |     | NULL    |                |
| xbrl_label             | varchar(255) | YES  |     | NULL    |                |
| Xbrl_desc              | varchar(45)  | YES  |     | NULL    |                |
+------------------------+--------------+----- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T04:45:52.393

如果没有错误跟踪，很难说这是否是唯一的错误，但这肯定是一个错误：

```
cursor.execute("""
INSERT INTO se_xbrl_concepts( xbrl_id,xbrl_name,xbrl_type,Xbrl_enumerations,Xbrl_substitutiongroup,Xbrl_balance, Xbrl_periodtype, Xbrl_IsAbstract,xbrl_label,Xbrl_desc)
 values(clist[0],%s,%s,%s,%s,%s,%s,%s,clist[9],%s)""")(name,clist[3],clist[4],clist[5],clist[6],clist[7],clist[8],clist[10]) 
```

您需要一个逗号将参数列表与字符串分开，并且您需要将括号移到该对的外部：

```
cursor.execute("""
INSERT INTO se_xbrl_concepts( xbrl_id,xbrl_name,xbrl_type,Xbrl_enumerations,Xbrl_substitutiongroup,Xbrl_balance, Xbrl_periodtype, Xbrl_IsAbstract,xbrl_label,Xbrl_desc)
 values(clist[0],%s,%s,%s,%s,%s,%s,%s,clist[9],%s)""",(name,clist[3],clist[4],clist[5],clist[6],clist[7],clist[8],clist[10])) 
```

# perl - 文件句柄数组

> ID：10867308
> 
> 赞同：6
> 
> 时间：2012-06-03T01:45:03.977
> 
> 标签：perl

我想根据索引选择将哪些数据放入哪个文件中。但是，我似乎坚持以下几点。

我使用文件句柄数组创建了文件：

```
my @file_h;
my $file;
foreach $file (0..11)
{
    $file_h[$file]= new IT::File ">seq.$file.fastq";
}

$file= index;
print $file_h[$file] "$record_r1[0]$record_r1[1]$record_r1[2]$record_r1[3]\n"; 
```

但是，由于某种原因，我在最后一行出现错误。帮助任何人......？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-03T04:47:14.710

那应该只是：

```
my @file_h;
for my $file (0..11) {
    open($file_h[$file], ">", "seq.$file.fastq")
       || die "cannot open seq.$file.fastq: $!";
}

# then later load up $some_index and then print 
print { $file_h[$some_index] } @record_r1[0..3], "\n"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-03T02:17:53.930

您始终可以使用面向对象的语法：

```
$file_h[$file]->print("$record_r1[0]$record_r1[1]$record_r1[2]$record_r1[3]\n"); 
```

此外，您可以更简单地打印出数组：

```
$file_h[$file]->print(@record_r1[0..3],"\n"); 
```

或者像这样，如果这四个元素实际上就是全部：

```
$file_h[$file]->print("@record_r1\n"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T01:47:35.543

首先尝试将 分配`$file_h[$file]`给一个临时变量：

```
my @file_h;
my $file;
my $current_file;

foreach $file (0..11)
{
    $file_h[$file]= new IT::File ">seq.$file.fastq";
}

$file= index;
$current_file = $file_h[$file];

print $current_file "$record_r1[0]$record_r1[1]$record_r1[2]$record_r1[3]\n"; 
```

据我记得，Perl 不会将其识别为输出句柄，否则会抱怨语法无效。

# flash - Stage3D iOS 抗锯齿

> ID：10867309
> 
> 赞同：2
> 
> 时间：2012-06-03T01:45:18.690
> 
> 标签：flash, air, 3d, antialiasing, stage3d

有人可以确认是否可以在显示 stage3D 内容的 AIR for iOS 项目中使用抗锯齿功能？我没有让它工作，调试模拟器和设备上的抗锯齿都没有执行。如果可能的话，除了在 context3D.configureBackBuffer() 中传递适当的抗锯齿值之外，是否还有其他必要的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T04:01:31.417

对于移动设备上的 Stage3D，无论您将属性设置为什么，抗锯齿始终处于关闭状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-20T11:34:56.427

至于今天，所有移动设备仍禁用 3D 内容的 Stage3D 抗锯齿功能。这意味着您的 3D 对象的边缘在移动设备上总是呈锯齿状。在 HiDPI 设备（例如 Retina Display）上，锯齿不太明显，但仍然清晰可见。不，你目前无法让它变得更好，即“超级锐利”。

如果您喜欢 AIR 能够在移动设备上提供抗锯齿 3D 内容的想法，Adobe Bugbase 上有一个关于移动设备上的 Stage3D 抗锯齿的新功能请求，我强烈建议您投票： [https：/ /bugbase.adobe.com/index.cfm?event=bug&id=4101164](https://bugbase.adobe.com/index.cfm?event=bug&id=4101164)

谢谢你，祝你的 3D 移动应用程序好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-06T10:02:41.343

以下是最新信息的更新（2017 年）：

*   在桌面上，Stage3D 中始终提供抗锯齿功能，除非您在软件模式下运行。
*   [在移动设备上，AIR 22 在“setRenderToTexture”API（ AIR 22 发行说明](https://helpx.adobe.com/flash-player/release-note/fp_22_air_22_release_notes.html)）中引入了对抗锯齿的支持。
*   [在 iOS 上，您可以从 AIR 24（ AIR 24 发行说明](https://helpx.adobe.com/flash-player/release-note/fp_24_air_24_release_notes.html)）开始在后台缓冲区上激活抗锯齿功能。

如果您是 Starling 开发人员，您可以非常轻松地绕过 Android 的当前限制。要使用抗锯齿渲染对象，只需附加启用抗锯齿的片段过滤器即可。

```
object.filter = new FragmentFilter();
object.filter.antiAliasing = 4; 
```

要过滤整个屏幕，只需将过滤器附加到您的根对象。

# ubuntu - 无法修复 Ubuntu 12.04 libcanberra-gtk 上的依赖问题

> ID：10867312
> 
> 赞同：2
> 
> 时间：2012-06-03T01:46:18.840
> 
> 标签：ubuntu, gnome, apt-get

由于 libcanberra-gtk0 上的依赖项错误，无法安装任何软件包也不是“apt-get upgrade”

apt-get 检查

```
You might want to run 'apt-get -f install' to correct these.
The following packages have unmet dependencies:
 gnome-session-canberra : Breaks: libcanberra-gtk0 (< 0.28-4) but 0.28-3ubuntu3 is installed
E: Unmet dependencies. Try using -f. 
```

apt-get -f 安装

```
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Correcting dependencies... Done
The following extra packages will be installed:
  libcanberra-gtk0
The following packages will be upgraded:
  libcanberra-gtk0
1 upgraded, 0 newly installed, 0 to remove and 585 not upgraded.
2 not fully installed or removed.
Need to get 0 B/17.1 kB of archives.
After this operation, 9,216 B of additional disk space will be used.
Do you want to continue [Y/n]? Y
dpkg: dependency problems prevent configuration of libcanberra-gtk0:i386:
 gnome-session-canberra (0.28-4) breaks libcanberra-gtk0 (<< 0.28-4) and is unpacked but not configured.
  Version of libcanberra-gtk0:i386 to be configured is 0.28-3ubuntu3.
dpkg: error processing libcanberra-gtk0:i386 (--configure):
 dependency problems - leaving unconfigured
dpkg: dependency problems prevent configuration of gnome-session-canberra:
 gnome-session-canberra depends on libcanberra-gtk0; however:
  Package libcanberra-gtk0:i386 is not configured yet.
dpkg: error processing gnome-session-canberra (--configure):
 dependency problems - leaving unconfigured
configured to not write apport reports
                                      Errors were encountered while processing:
 libcanberra-gtk0:i386
 gnome-session-canberra
E: Sub-process /usr/bin/dpkg returned an error code (1) 
```

试图安装一些东西 apt-get install -f aptitude

```
Reading package lists... Done
Building dependency tree       
Reading state information... Done
You might want to run 'apt-get -f install' to correct these:
The following packages have unmet dependencies:
 aptitude : Depends: libboost-iostreams1.49.0 (>= 1.49.0-1) but it is not going to be installed
            Depends: libcwidget3 but it is not going to be installed
            Depends: libept1.4.12 but it is not going to be installed
            Recommends: aptitude-doc-en but it is not going to be installed or
                        aptitude-doc
            Recommends: libparse-debianchangelog-perl but it is not going to be installed
 gnome-session-canberra : Breaks: libcanberra-gtk0 (< 0.28-4) but 0.28-3ubuntu3 is to be installed
E: Unmet dependencies. Try 'apt-get -f install' with no packages (or specify a solution). 
```

我如何重新安装软件包？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T15:03:39.113

您必须在启动板中查找指定的包，因此`libcanberra-gtk0`您需要到[这里](https://launchpad.net/ubuntu/natty/i386/libcanberra-gtk0)，但您可能想更改为另一个 ubuntu 版本和架构。

然后您需要重新输入`sudo apt-get -f install`，并且您可能会不断收到有关库依赖项的错误消息，并且您必须再次重复该过程。

但是，这种方法也很危险，因为它也会影响 ubuntu 升级版本的方式……因为它无法解析这些包。

# rest - RESTful 资源表示 - 人类网络与可编程网络

> ID：10867318
> 
> 赞同：0
> 
> 时间：2012-06-03T01:48:00.780
> 
> 标签：rest, restful-url, restful-architecture

我正在设计用于访问媒体的 RESTful 资源。媒体可以是实时流或存档流。我使用 O'Riellys 文本“RESTful Web 服务”作为指南，但我正在努力处理与“可编程网络”和“人类网络”相关的资源表示。对于人类网络请求，我想返回HTML 表示。对于可编程的 Web 请求，我想返回 XML。话虽如此，请考虑：

```
GET http:// localhost :8080/stream - returns a list of streams

GET http:// localhost :8080/search?stream=abc - return a specific stream 
```

如何区分来自“人类网络”和“可编程网络”的请求，以便我可以返回正确的表示？

O'Reillys 的文字似乎建议设计两个单独的资源。从 PDF 的第 24 页，他说：

> 我会使用相同的工具来获取和处理网页。这两个 URI： 1) http:// api。search.yahoo.com/WebSearchService/V1/webSearch?appid=restbook&query=jellyfish 2) http://search.yahoo.com/search?p=jellyfish 指向同一事物的不同形式：“搜索结果列表查询 'jellyfish'。”一个 URI 服务于 HTML，旨在供 Web 浏览器使用；另一个服务于 XML，旨在供自动化客户端使用。

处理人类网络和可编程网络的两种独立资源是规范还是有替代方案？欢迎提出想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T03:52:42.397

您的示例与问题不匹配，因此我将同时回答这两个问题。

在您给出的示例中，您有两种不同的资源：流列表和单个流。因此，它们应该被分配单独的 URI，并且我强烈建议不要在有一个干净且明显的替代方案的情况下使用查询字符串。

在这种情况下，它是经典的 ReST。`/stream/`是由可用流列表组成的资源，此列表应显示为人类或计算机（或最好两者）的 URI 列表，因此（如 text/html）：

```
<ul>
  <li><a href="/stream/abc">ABC</a></li>
  ...
</ul> 
```

这就引出了你的下一个问题，如何识别流列表资源的不同表示。我使用了三种技术：内容协商、格式查询参数和 RDFa。

RDFa 是我的首选替代方案，在这种情况下，您只有一种表示可以编码人类和机器可读的内容。在简单列表的情况下，这是对 HTML 的一个微不足道的更改：

```
<ul>
  <li><a rev="rdfs:member" href="/stream/abc">ABC</a></li>
  ...
</ul> 
```

如果您的数据有一个或多个纯机器序列化，那么我使用了两种替代方案；通常，两者同时进行。

内容协商是最纯粹、最方便的。只要有一个 text/html，另一个 application/xml 或 application/json，让客户选择。

从浏览器、命令行 (curl/wget/etc) 或脚本测试机器版本时，这并不方便。所以我也喜欢支持格式查询参数。为方便起见，让它采用 mime 类型。

我更喜欢让我的资源由同一个控制器/servlet/etc 处理，让它从文件系统/数据库/任何东西中获取信息，然后根据 mime 类型（内容否定或格式参数）将其分派到适当的视图展示。无论哪种方式，您都在处理同一资源的不同表示，因此最好确保它们可从同一基本 URI 获得，无论您决定支持何种替代方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T02:32:31.577

我想说官方的“符合标准”的答案是使用 ACCEPTS 标头使用内容类型协商。[http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm](http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm)上有很多好东西

如果客户端请求 text/html，则提供人类可读的 html。如果客户端请求 text/xml，则提供 xml。这里的诀窍是，实际上这并不总是得到客户端的良好支持，因此您经常需要使用查询字符串或资源名称修饰的一堆后备，如您发布的示例中所示。

就个人而言，我会尽可能地遵循意识形态，然后根据需要开始务实地添加后备方案。在遇到无法正确处理发送接受标头的客户端之前，我不会为编程或人工消费创建单独的资源。

# django - 为什么我的覆盖 clean_password 函数不起作用？

> ID：10867321
> 
> 赞同：0
> 
> 时间：2012-06-03T01:48:34.483
> 
> 标签：django, django-forms

我是 Django 中另一个表单的子类：

```
class RegistrationForm(forms.Form):
    ...
    def clean_password(self):
            if not re.search('[a-zA-Z]', self.data['password']):
                raise forms.ValidationError('Must contain a letter.')
            return self.data['password']

class addNewFamilyMemberForm(RegistrationForm):
    ...
    def clean_password(self):
        if self.data["username"]:
            super.clean_password(self)
        return self.data["password"] 
```

为什么 Django 会产生这个错误？

```
type object 'super' has no attribute 'clean_password' 
```

的超类`addNewMemberForm`显然有一个`clean_password`功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T01:53:38.233

在 Python 2 中，您需要像这样使用 super：

```
super(addNewFamilyMemberForm, self).clean_password() 
```

您可能应该以某种方式使用返回值，但我不确定如何使用。

此外，类名应该以大写字母开头，但这并不影响它的工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T01:54:32.983

super 实际上不是一个对象，你不能做“super.method”。也许你应该把那条线改成类似

```
super(addNewFamilyMemberForm, self).clean_password() 
```

# regex - Recursive find and replace based on regex

> ID：10867322
> 
> 赞同：2
> 
> 时间：2012-06-03T01:48:37.840
> 
> 标签：regex, linux, unix, grep

I have changed up my director structure and I want to do the following:

*   Do a recursive grep to find all instances of a match
*   Change to the updated location string

One example (out of hundreds) would be:

```
from common.utils import debug  --> from etc.common.utils import debug 
```

To get all the instances of what I'm looking for I'm doing:

```
$ grep -r 'common.' ./ 
```

However, I also need to make sure `common` is preceded by a space. How would I do this find and replace?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T02:01:49.080

It's hard to tell exactly what you want because your refactoring example changes the import as well as the package, but the following will change `common. -> etc.common.` for all files in a directory:

```
sed -i 's/\bcommon\./etc.&/' $(egrep -lr '\bcommon\.' .) 
```

This assumes you have gnu sed available, which most linux systems do. Also, just to let you know, this will fail if there are too many files for sed to handle at one time. In that case, you can do this:

```
egrep -lr '\bcommon\.' . | xargs sed -i 's/\bcommon\./etc.&/' 
```

Note that it might be a good idea to run the sed command as `sed -i'.OLD' 's/\bcommon\./etc.&/'` so that you get a backup of the original file.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T01:56:03.967

This is roughly how you would do it using find. This requires testing

```
 find . -name \*.java -exec sed "s/FIND_STR/REPLACE_STR/g" {} 
```

This translates as "Starting from the current directory find all files that end in .java and execute sed on the file (where {} is a place holder for the currently found file) "s/FIND_STR/REPLACE_STR/g" replaces FIND_STR with REPLACE_STR in each line in the current file.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T02:11:01.730

If your `grep` implementation supports Perl syntax (`-P` flag, on e.g. Linux it's usually available), you can benefit from the additional features like word boundaries:

```
$ grep -Pr '\bcommon\.' 
```

By the way:

`grep -r` tends to be much slower than a previously piped `find` command as in Rob's example. Furthermore, when you're sure that the file-names found do not contain any whitespace, using `xargs` is much faster than `-exec`:

```
$ find . -type f -name '*.java' | xargs grep -P '\bcommon\.' 
```

Or, applied to Tim's example:

```
$ find . -type f -name '*.java' | xargs sed -i.bak 's/\<common\./etc.common./' 
```

Note that, in the latter example, the replacement is done after creating a *.bak backup for each file changed. This way you can review the command's results and then delete the backups:

```
$ find . -type f -name '*.bak' | xargs rm 
```

If you've made an oopsie, the following command will restore the previous versions:

```
$ find . -type f -name '*.bak' | while read LINE; do mv -f $LINE `basename $LINE`; done 
```

Of course, if you aren't sure that there's no whitespace in the file names and paths, you should apply the commands via `find`'s `-exec` parameter.

Cheers!

# groovy - @Delegate 没有默认构造函数的类

> ID：10867323
> 
> 赞同：0
> 
> 时间：2012-06-03T01:49:23.080
> 
> 标签：groovy

如何在 Groovy 中为没有默认构造函数的类创建委托类？我想装饰 JUnit 的 ResultPrinter，但收到关于缺少构造函数的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:13:38.357

我不明白你的问题。我刚刚用 Java 尝试了这个`Short`——它也没有默认的构造函数。

一切都按预期工作，除非您没有初始化委托对象，否则您将获得 NPE。

是否有可能您[使用`@Delegate`不正确](http://groovy.codehaus.org/Delegate+transformation)？委托不装饰现有的类，它允许您在自己的类中使用现有的类方法。就像`extend`，但没有类继承。

示例代码：

```
class Foo {
    @Delegate Short num
    String bar
    String toString() { "$bar: $num" }
}

def f = new Foo(bar: 'bob', num: 34 as Short)
println f // OK
println f.doubleValue() // OK

f = new Foo()
println f.doubleValue() // NPE 
```

（或者，提供一些有用的信息，例如实际的错误和堆栈跟踪以及示例代码，将为您提供更有用的响应。）

# javascript - 如何一次加快多个 facebook likebox 加载时间

> ID：10867328
> 
> 赞同：1
> 
> 时间：2012-06-03T01:50:39.163
> 
> 标签：javascript, facebook

我的问题如标题。我有一个网页来显示所有学生的项目概述，每个人都有一个likebox。总数在 36 个左右，这意味着这个页面需要加载大约 36 个 facebook 社交插件：likebox 一次。

然后，我按照 facebook 官方博客文章中的所有步骤操作：“操作方法：优化社交插件性能” [http://developers.facebook.com/blog/post/530/](http://developers.facebook.com/blog/post/530/)。现在好像好多了。但是通过等待“www.facebook.com/plugins/like.php”加载所有插件的内容仍然需要大约 10 秒。

有没有人有任何关于加速多个 Facebook 插件同时需要少于 5 秒的想法？

提前感谢您的帮助。

# macros - 宏扩展的等式断言失败

> ID：10867329
> 
> 赞同：1
> 
> 时间：2012-06-03T01:50:46.207
> 
> 标签：macros, clojure

我有这个宏（来自[clojure-koans](https://github.com/functional-koans/clojure-koans)）应该允许使用中缀运算符：

```
(defmacro infix-better [form]
  `(~(second form)
    (first form)
    (last form) )) 
```

它做了它应该做的事情，但并不完全扩展到相同的表达式。例如：

```
user=> (= '(* 10 2) (macroexpand '(infix-better (10 * 2))))
false
user=> '(* 10 2)                                           
(* 10 2)
user=> (macroexpand '(infix-better (10 * 2))) 
(* (clojure.core/first user/form) (clojure.core/last user/form)) 
```

最后一个输出最终会是`(* 10 2)`当内部表达式被评估但相等测试返回 false 因为`(clojure.core/first user/form)`严格来说， is not `10`。

如何使扩展宏等于等效的硬编码 Clojure？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T01:58:26.083

您必须取消引用第二种和第三种形式，就像您对第一种形式所做的那样`~`- “当评估内部表达式时，最后一个输出最终将是 (* 10 2)” 绝不是真的 - 内部表达式有已经过了被评估的机会。

```
(defmacro infix-better [form]
  `(~(second form)
    ~(first form)
    ~(last form))) 
```

会修复它并保持你的代码结构相同，但真正的解构会给你一个更好的结果：

```
(defmacro infix-better [[x op y]]
  (list op x y)) ;; or `(~op ~x ~y) 
```

# c# - Parallel.Invoke 和 Parallel.ForEach 本质上是一样的吗？

> ID：10867332
> 
> 赞同：23
> 
> 时间：2012-06-03T01:51:21.910
> 
> 标签：c#, multithreading, parallel-processing, parallel.foreach, parallel.invoke

“相同的事情”我的意思是这两个操作基本上做同样的工作，它只是归结为根据你必须使用的内容调用哪个更方便？（即代表列表或要迭代的事物列表）？我一直在搜索 MSDN、StackOverflow 和各种随机文章，但我还没有找到明确的答案。

**编辑：** *我应该更清楚；我在问这两种方法是否做同样的事情，因为如果他们不这样做，我想了解哪种方法更有效。*

示例：我有一个包含 500 个键值的列表。目前我使用一个`foreach`循环遍历列表（串行）并为每个项目执行工作。如果我想利用多个核心，我应该简单地使用`Parallel.ForEach`吗？
假设为了争论，我有一个包含 500 个代表的数组来处理这 500 个任务 - 最终效果会是任何不同的调用`Parallel.Invoke`并给它一个包含 500 个代表的列表吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-03T02:18:10.530

`Parallel.ForEach`遍历元素列表并可以对数组的元素执行一些任务。

例如。

```
Parallel.ForEach(val, (array) => Sum(array)); 
```

`Parallel.Invoke`可以并行调用许多函数。

例如。

```
Parallel.Invoke(
() => doSum(array),
() => doAvg(array),
() => doMedian(array)); 
```

从上面的示例中，您可以看到它们在功能上有所不同。`ForEach`遍历一个`List`元素并在*每个元素上并行执行***一个任务**，同时可以在*单个元素上并行执行***多个任务**。*`Invoke`*

 ***** * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-03T02:20:08.330

Parallel.Invoke 和 Parallel.ForEach（当用于执行操作时）功能相同，但确实有人特别希望集合是一个数组。考虑以下示例：

```
List<Action> actionsList = new List<Action>
            {
                () => Console.WriteLine("0"),
                () => Console.WriteLine("1"),
                () => Console.WriteLine("2"),
                () => Console.WriteLine("3"),
                () => Console.WriteLine("4"),
                () => Console.WriteLine("5"),
                () => Console.WriteLine("6"),
                () => Console.WriteLine("7"),
                () => Console.WriteLine("8"),
                () => Console.WriteLine("9"),
            };

            Parallel.ForEach<Action>(actionsList, ( o => o() ));

            Console.WriteLine();

            Action[] actionsArray = new Action[]
            {
                () => Console.WriteLine("0"),
                () => Console.WriteLine("1"),
                () => Console.WriteLine("2"),
                () => Console.WriteLine("3"),
                () => Console.WriteLine("4"),
                () => Console.WriteLine("5"),
                () => Console.WriteLine("6"),
                () => Console.WriteLine("7"),
                () => Console.WriteLine("8"),
                () => Console.WriteLine("9"),
            };

            Parallel.Invoke(actionsArray);

            Console.ReadKey(); 
```

此代码在一次运行时产生此输出。它的输出通常每次都以不同的顺序排列。

> 0 5 1 6 2 7 3 8 4 9
> 
> 0 1 2 4 5 6 7 8 9 3

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-12T15:39:38.057

令人惊讶的是，不，它们不是一回事。它们的根本区别在于它们在异常情况下的行为方式：

1.  the [`Parallel.ForEach`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.parallel.foreach)（以及 the[`Parallel.For`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.parallel.for)和即将到来的[`Parallel.ForEachAsync`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.parallel.foreachasync)）**快速失败**。发生异常后，它不会启动任何新的并行工作，并且会在所有当前运行的委托完成后立即返回。
2.  总是调用所有的[`Parallel.Invoke`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.parallel.invoke)动作，不管它们中的一些（或全部）是否失败。

为了演示这种行为，让我们并行运行 1,000 个操作，每三个操作有一个失败：

```
int c = 0;
Action[] actions = Enumerable.Range(1, 1000).Select(n => new Action(() =>
{
    Interlocked.Increment(ref c);
    if (n % 3 == 0) throw new ApplicationException();
})).ToArray();

try { c = 0; Parallel.For(0, actions.Length, i => actions[i]()); }
catch (AggregateException aex)
{ Console.WriteLine($"Parallel.For, Exceptions: {aex.InnerExceptions.Count}/{c}"); }

try { c = 0; Parallel.ForEach(actions, action => action()); }
catch (AggregateException aex)
{ Console.WriteLine($"Parallel.ForEach, Exceptions: {aex.InnerExceptions.Count}/{c}"); }

try { c = 0; Parallel.Invoke(actions); }
catch (AggregateException aex)
{ Console.WriteLine($"Parallel.Invoke, Exceptions: {aex.InnerExceptions.Count}/{c}"); } 
```

输出（在我的 PC 中，.NET 5，发布版本）：

```
Parallel.For, Exceptions: 5/12
Parallel.ForEach, Exceptions: 5/11
Parallel.Invoke, Exceptions: 333/1000 
```

[在 Fiddle 上试试](https://dotnetfiddle.net/BLherk)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T01:57:21.333

我正在尝试找到一种很好的措辞方式；但它们不是一回事。

原因是，Invoke 作用于 Action 数组，而 ForEach 作用于 Action 列表（特别是 IEnumerable）；列表在机制上与数组有很大不同，尽管它们具有相同的基本行为。

我不能说实际上有*什么*区别，因为我不知道，所以请不要接受这个答案（除非你也真的想要！）但我希望它可以唤起人们对机制的记忆。

+1也是一个好问题。

编辑; 我突然想到还有另一个答案；Invoke 可以处理动态的 Action 列表；但是 Foreach 可以使用通用的 IEnumerable 操作，并让您能够使用条件逻辑，逐个操作；所以你可以在每次 Foreach 迭代中说 Action.Invoke() 之前测试一个条件。****

# javascript - 制作对象数组的封装问题

> ID：10867337
> 
> 赞同：0
> 
> 时间：2012-06-03T01:52:56.003
> 
> 标签：javascript, jquery, arrays, object

有谁介意给我解释一下为什么...

```
$(document).ready(function() {
    var scu = ['0291285', '0409338', '0521704', '0521990', '0523652', '0523657', '0523660', '0523704'];
    var inData = $('#output');
    var testdiv = $('#testdiv');
    function Item(scu, description, price, extended, type) {
        this.scu = scu;
        this.description = description;
        this.price = price;
        this.extended = extended;
        this.type = type;
        //this.saved = function() {};
    }
    var rows = [];
    function get() {
        inData.html('');    
        $.each(scu, function(index, val) {
            $.post('chBuild.php', {scu:val}, function(output) {
                $.each(output, function(i, obj) { 
                    var i = 0;
                    rows[i] = new Item(obj.scu, obj.description, obj.price, obj.extended, obj.type);
                    console.log(rows[i].price)
                                    //this logs every object but...                 

                    i =+ 1;
                });
            }, 'json');         
        });
        console.log(rows[0].price);

            //this says rows[0] is undefined?

    }
    inData.click(get);
}); 
```

我试图找到创建和存储多个对象的最佳方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T01:59:27.903

这是因为`$.post`是异步的。`each`唯一启动 HTTP 请求，但它立即返回，因此当第二次运行时，该`console.log`项目尚未创建。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T02:04:48.220

```
$.post('chBuild.php', {scu:val}, function(output) {
            $.each(output, function(i, obj) { 
                var i = 0;
                rows[i] = new Item(obj.scu, obj.description, obj.price, obj.extended, obj.type);
                console.log(rows[i].price)
                i =+ 1;
            });
        }, 'json'); 
```

这里对 $.post 的调用是异步的，将在 ajax 调用返回时填充。也许你应该让它同步

```
$.ajax({'url': 'chBuild.php', 'async': false, ...); 
```

# c# - 结构隐式默认构造函数与无参数构造函数

> ID：10867349
> 
> 赞同：5
> 
> 时间：2012-06-03T01:56:18.247
> 
> 标签：c#, .net

好的，我们听说`struct`不能有一个默认的无参数构造函数，这很好（http://stackoverflow.com/questions/333829/why-cant-i-define-a-default-constructor-for-a-struct-in-net ）。但是文档说“每个值类型都有一个隐式默认构造函数来初始化该类型的默认值。” 来自[http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)

现在隐式默认构造函数和无参数默认构造函数有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T02:03:54.717

隐式默认构造函数*是*编译器自动创建的无参数构造函数。您无法创建无参数构造函数的原因是因为默认构造函数已经存在。我不知道他们为什么选择这样做，以及为什么不允许您覆盖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T02:06:11.600

正如您所指向的答案中所解释的，使用IL，您可以为 a 定义一个无参数的构造函数`struct`，但在某些情况下它不会被调用。

恕我直言，“隐式”构造函数只是一个合乎逻辑的构造函数；内存在分配时被清零。

# php - php/mysql 从 mysql 切换到 mysqli 或 pdo，可以逐步进行

> ID：10867353
> 
> 赞同：1
> 
> 时间：2012-06-03T01:57:41.633
> 
> 标签：php, mysql, refactoring, pdo, mysqli

我有一个使用大量 mysql_query 调用的 Web 应用程序——主要是因为我在教程和其他我学习如何运行查询的地方找到了这些。许多人一直建议我切换到 mysqli，因为 mysql 会在某些时候消失，但是，我已经读到，进行此切换比在末尾添加 i 困难得多，并且需要重写所有代码。

如果我问这个开关是否值得，我想几乎每个人都会说是的，因为坚持使用 mysql 似乎是少数人的观点。所以我的问题是，是否可以逐步切换到 mysqli，即在编写调用或页面时逐渐更新它们，或者最好冻结旧站点并将整个事情重做为一个全 mysqli 或 pdo 站点。当我说得更好时，我考虑到了重做整个网站所涉及的所有工作和成本。显然，将资源分配给站点上的新功能和新事物，而不是重做使用旧 mysql 可以正常工作的事物是很有吸引力的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T02:15:04.627

`mysql_*`根据 PHP 的通知，他们至少在 PHP 5.5/6.0 之前不会正式弃用该扩展，因此您有时间在这些功能完全消失或 E_DEPRECATED 错误开始出现之前重写您的脚本。[http://news.php.net/php.internals/53799](http://news.php.net/php.internals/53799)

也许如果您的代码是意大利面条并且没有组织，那么是时候重新编码/重构了。MVC 与控制器模型一样棒，所有查询都在一个地方，数据库连接/CRUD 位于单个对象属性中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T10:47:33.850

如果我遇到您的情况，我会借此机会全面改进应用程序的架构。

您应该首先将仅处理 DB 交互的代码与应用程序的其余部分分开。最好的方法是转向类似[DataMapper](http://martinfowler.com/eaaCatalog/dataMapper.html)的结构。

那时切换到 PDO 或 MySQLi 将是一项简单的任务。

没有必要一路走到 MVC，但是当你将应用程序的不同职责分开：表示逻辑、模板、路由、业务逻辑、数据访问逻辑等时，你最终会得到一些类似于 MVC 的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T02:32:16.073

关于mysql适配的第一点。最好的选择是最初使用一些自己的适配器/包装器。例如用 query()、rowCount()、eth 方法编写类 MyMysql。并且此时在 mysql/mysqli/pdo 之间切换不会有任何问题。

关于切换的第二点。mysql和mysqli没有太大区别。是的，它不仅仅是在单词末尾使用“i”字母，但大多数查询非常相似。在我的记忆中，没有 mysql_fetch_assoc 等价物（但有 mysql_fetch_array ）。可能比对“mysql”->“mysqli”使用常规模式更难，但并不太难。所以不要害怕 mysqli - 这是 mysql 驱动程序的逻辑延续。

# ipad - iPad 报亭订户信息（姓名、电子邮件、邮编）

> ID：10867362
> 
> 赞同：11
> 
> 时间：2012-06-03T02:00:11.630
> 
> 标签：ipad, itunes, subscriber

当用户在我的 iPad Newsstand 应用上购买杂志订阅时，他们会收到分享一些信息的提示：

**分享您的信息？[此处的应用名称] 的发布者希望您的姓名、电子邮件和邮政编码根据他们的隐私政策使用。**

但是，我似乎无法在 iTunes Connect 中找到订阅者信息。谁能帮我找到这些信息？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T07:10:04.430

它位于销售和趋势部分。您应该可以选择下载选择加入报告，这是一个受密码保护的 ZIP 文件。通过单击“选择加入密码”按钮显示密码。

资料来源： http: [//www.apple.com/itunesnews/docs/AppStoreReportingInstructions.pdf](http://www.apple.com/itunesnews/docs/AppStoreReportingInstructions.pdf)

# iphone - IBOutlet 发布

> ID：10867365
> 
> 赞同：0
> 
> 时间：2012-06-03T02:01:58.073
> 
> 标签：iphone, ios, ipad, iboutlet

unsafe_unretained IBOutlet 对象是在视图消失时释放（`viewWillDisappear`或`viewDidDisappear`）还是在视图卸载时释放（`viewDidUnload`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T03:24:33.503

IBOutlets 永远不应该与他们的 View Controller 形成强烈的保留关系，因为它们不属于它。所以实际上，它们只是在视图控制器脱离上下文时被释放。由于它们的引用极弱，它们在视图控制器被释放时被释放，这种情况随时都可能发生。没有具体的功能。

# ios - NSMutableArray 无法从 objectForKey 的数组中获取值

> ID：10867367
> 
> 赞同：1
> 
> 时间：2012-06-03T02:02:07.940
> 
> 标签：ios, cocoa-touch, xml-parsing

我正在解析 xml 文件，当解析器结束时解析连接开始并假设从数组中获取链接；有代码：问题是我认为字符串“链接”。NSLog 显示“链接”为空。

```
for (int i=0; i<[imagesArray count]; i++)
{
    NSString *link = [[imagesArray objectAtIndex:i] objectForKey:@"link"];
    NSURLRequest *imageRequest= [NSURLRequest requestWithURL:[NSURL URLWithString:link]
                                                 cachePolicy:NSURLRequestReloadIgnoringCacheData
                                             timeoutInterval:30.0];
    NSURLConnection *imageConnection = [[NSURLConnection alloc] initWithRequest:imageRequest delegate:self];

    if (imageConnection)
    {
        NSLog(@"Counter: %i",i);
        receivedData = [[NSMutableData alloc]init];
    }
    [imageConnection start];
    NSLog(@"source", link);
} 
```

感谢您提供任何答案和提示。

# perl - 我可以在我的托管服务提供商机器上安装 perl 模块吗

> ID：10867370
> 
> 赞同：0
> 
> 时间：2012-06-03T02:03:06.067
> 
> 标签：perl

我的托管服务提供商没有安装**HTML::Template** perl 模块，他还没有准备好安装它，因为存在一些安全问题。

有什么办法，我可以将它安装在我的根目录或任何其他地方并可以使用它。

如果是，那么我如何以及如何使用它？

除了更改主机提供商还有其他选择吗？

请提供您的意见。

谢谢，德维什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T06:32:48.903

有几种方法。

首先，您需要检查您的 SP 是否可以在本地目录中安装模块。如果是，那么您需要检查您是否有构建和安装的基本工具。[这篇文章有帮助](http://www.perlmonks.org/?node_id=128077)

如果没有安装基本的构建工具，那么这将是困难的，但并非不可能。

# c++ - c ++将取消引用的对象推送到向量

> ID：10867376
> 
> 赞同：0
> 
> 时间：2012-06-03T02:04:43.350
> 
> 标签：c++, boost, reference, filesystems

我正在制作一个函数来引用文件系统上的路径并递归地将文件名添加到向量中。但首先我必须能够向向量添加路径。

这种方法有什么问题？

```
namespace filesys = boost::filesystem; 
```

方法：

```
void recursive_file_list(filesys::path & root_path, vector<filesys::path> & paths) {
    paths->push_back(*root_path);    // line 14

    // TODO: add more logic to actually recurse through file system
    // for now just add root_path (even though root_path is path of directory, not file)
} 
```

我这样称呼它：

```
 int main(int argc, char* argv[]) {

        // Use the command line arguments
        filesys::path abs_path;    // line 23
        if ( argc > 1 )
            // Make the system complete this path to absolute path
            abs_path = filesys::system_complete( filesys::path( argv[1] ) );
        else {
            // If no arguments given
            cout << "usage:   list_files [path]" << endl;
            exit(1);
        }

        // Is this a valid path?
        if (!filesys::exists( abs_path )) {
            cout << "The path you have specified does not exist." << endl; 
            exit(2);
        }

        // If this is a directory
        vector<filesys::path> filepaths();   
        if (filesys::is_directory( abs_path )) {
            cout << "You have specified a directory." << endl;
            recursive_file_list(&abs_path, &filepaths);
        }

        else {
            cout << "You have specified a file." << endl;
        }
    } 
```

错误：

```
list_files.cpp: In function 'void recursive_file_list(boost::filesystem3::path&, std::vector<boost::filesystem3::path, std::allocator<boost::filesystem3::path> >&)':
list_files.cpp:14: error: base operand of '->' has non-pointer type 'std::vector<boost::filesystem3::path, std::allocator<boost::filesystem3::path> >'
list_files.cpp:14: error: no match for 'operator*' in '*root_path'
list_files.cpp: In function 'int main(int, char**)':
list_files.cpp:43: error: invalid initialization of non-const reference of type 'boost::filesystem3::path&' from a temporary of type 'boost::filesystem3::path*'
list_files.cpp:13: error: in passing argument 1 of 'void recursive_file_list(boost::filesystem3::path&, std::vector<boost::filesystem3::path, std::allocator<boost::filesystem3::path> >&)' 
```

我不明白 - 我通过引用传递它，然后取消引用它以添加它......不知道我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T02:07:13.030

您不能取消引用引用！`*`and`->`运算符不适用于引用；您会将`path`自身推向`vector`自身：

```
paths.push_back(root_path);    // line 14 
```

此外，您不会将地址传递给引用参数，而只是传递参数本身，因此您可以像这样调用函数：

```
recursive_file_list(abs_path, filepaths); 
```

引用本身就具有类似指针的非复制语义；您不需要通过获取地址或尝试取消引用来帮助他们。

# llvm - LLVM 标准输入/标准输出/标准错误

> ID：10867377
> 
> 赞同：15
> 
> 时间：2012-06-03T02:04:44.407
> 
> 标签：llvm

如何在 LLVM中声明`stdin`、`stout`和（最好是 C 版本）？`stderr`我正在尝试在我正在创建的玩具语言中使用一些 stdio 函数。一个这样的功能是`fgets`：

```
char * fgets ( char * str, int num, FILE * stream ); 
```

为了使用我需要`stdin`的 . 所以我写了一些 LLVM API 代码来生成我找到的 FILE 的定义，并声明`stdin`了一个外部全局。代码生成了这个：

```
%file = type { i32, i8*, i8*, i8*, i8*, i8*, i8*, i8*, i8*, i8*, i8*, i8*, %marker*, %file*, i32, i32, i64, i16, i8, [1 x i8], i8*, i64, i8*, i8*, i8*, i8*, i64, i32, [20 x i8] }
%marker = type { %marker*, %file*, i32 }

@stdin = external global %file* 
```

但是，当我运行生成的模块时，它给了我这个错误：

```
Undefined symbols for architecture x86_64:
"_stdin", referenced from:
    _main in cc9A5m3z.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

显然，我写的东西没有用。所以我的问题是我必须在 LLVM API 中写什么来声明`stdin`,`stout`和`stderr`用于`fgets`类似玩具语言编译器之类的函数？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-03T17:54:38.053

如果有人感兴趣，我找到了我的问题的答案。经过一番激烈的搜索后，我找到了一种`stdin`无需进行 C 扩展即可获取流的方法：`fdopen`并制作`FILE`不透明的结构。

```
FILE* fdopen (int fildes, const char *mode) 
```

当 fdopen 为文件描述符 ( `fildes`) 传递 0 时，它返回`stdin`流。使用 LLVM API，我生成了以下 LLVM 程序集：

```
%FILE = type opaque
declare %FILE* @fdopen(i32, i8*)
@r = constant [2 x i8] c"r\00" 
```

`stdin`然后我可以使用这个调用语句进行检索：

```
%stdin = call %FILE* @fdopen(i32 0, i8* getelementptr inbounds ([2 x i8]* @r, i32 0, i32 0)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T11:54:50.837

如果您使用`putchar`, `printf`, `gets`, `strtol`,之类的函数`puts`，`fflush`则不需要`stdin`and `stdout`。我写了一个玩具编译器，这些对于字符串和整数的 I/O 来说已经足够了。`fflush`用 null 调用`stdout`并被刷新。

```
%struct._IO_FILE = type opaque
declare i32 @fflush(%struct._IO_FILE*)
...
call i32 @fflush(%struct._IO_FILE* null)
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T04:23:35.773

它是特定于平台的。有时标准输入是不同符号名称的宏。

例如，在 Android 上，标准输入是`#define stdin (&__sF[0])`.

对于 Microsoft Visual C++，标准输入是`#define stdin (&__iob_func()[0])`

所以你真的需要查看你的平台`stdio.h`标题才能弄清楚。

# javascript - 如何理解 CoffeeScript 的 `extends` 关键字生成的 JavaScript 代码

> ID：10867382
> 
> 赞同：5
> 
> 时间：2012-06-03T02:05:17.783
> 
> 标签：javascript, coffeescript, prototypal-inheritance

`extends`这是由 CoffeeScript 的关键字生成的 JavaScript 代码。原型链是如何设置的？

```
var __hasProp = Object.prototype.hasOwnProperty,
__extends = function(child, parent) { 
    for (var key in parent) { 
        if (__hasProp.call(parent, key)) child[key] = parent[key]; 
    } 
    function ctor() { this.constructor = child; } 
    ctor.prototype = parent.prototype; 
    child.prototype = new ctor; 
    child.__super__ = parent.prototype; 
    return child; 
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T02:15:18.033

```
var __hasProp = Object.prototype.hasOwnProperty,
__extends = function(child, parent) {
    // Copy "static" attributes from the parent constructor to the child constructor
    for (var key in parent) { 
        if (__hasProp.call(parent, key)) child[key] = parent[key]; 
    } 
    // This is the surrogate constructor, used so you don't need
    // to instantiate an instance of the parent just to setup the prototype chain
    // the statement in the surrogate constructor properly attaches
    // the constructor property to object
    function ctor() { this.constructor = child; }
    // Attach the parent's prototype to the surrogate constructor
    ctor.prototype = parent.prototype; 
    // This is setting up the chain, attaching an instance of a constructor whose
    // prototype is set to the parent to the prototype property of the child
    // In naive implementations, this would be child.prototype = new parent();
    child.prototype = new ctor; 
    // Allows access to the parent from user code, and used by the `super` keyword
    child.__super__ = parent.prototype; 
    return child; 
}; 
```

见[http://js-bits.blogspot.com/2010/08/javascript-inheritance-done-right.html](http://js-bits.blogspot.com/2010/08/javascript-inheritance-done-right.html)（我自己的博文）

# ruby-on-rails - 为什么 Capistrano 不使用 bundler 安装 gems？

> ID：10867383
> 
> 赞同：6
> 
> 时间：2012-06-03T02:05:18.040
> 
> 标签：ruby-on-rails, deployment, capistrano, bundler, gemfile

每次我使用 Capistrano 部署应用程序时，它都会抱怨缺少 gem。例如：

```
 ** [out :: mysite.com] Could not find WhateverGem-1.0.0 in any of the sources
 ** [out :: mysite.com] Run `bundle install` to install missing gems. 
```

我通过手动上传我的 Gemfile、SSH 到服务器并运行`bundle install`. 但是，这不应该发生。

这是我的[deploy.rb](https://gist.github.com/2860967)和[Capfile](https://gist.github.com/2860959)的副本。

有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-03T02:34:17.620

您可能只需将其添加到您的 config/deploy.rb

```
require "bundler/capistrano" 
```

# regex - 正则表达式 - 不拾取第二组标签

> ID：10867387
> 
> 赞同：0
> 
> 时间：2012-06-03T02:07:03.873
> 
> 标签：regex

给定以下行，我如何从获取第二组 SPAN 标记中获取下面的正则表达式。我想要拉链，而不是扩展拉链。

```
<TD width="20%">Zip Code: <B><SPAN class="TableBody clsBold">06902</SPAN>-<SPAN class="TableBody clsBold"> 2630</SPAN></B></TD></TR> 
```

正则表达式：

```
<TD.+>([(\s)A-Za-z#]+:)\s*<B><SPAN class="TableBody.*">([\d\s#a-zA-Z$,]+)</SPAN> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T02:09:15.830

`<TD.+>([(\s)A-Za-z#]+:)\s*<B><SPAN class="TableBody.*?">([\d\s#a-zA-Z$,]+)</SPAN>`

[您的正则表达式很接近](http://regexr.com?31565)，但是`TableBody.*`很[贪婪](http://www.regular-expressions.info/repeat.html)，并且添加`?`after`.*`使它变得懒惰，因此它不会抓取整个标签的下一部分。

# c# - NHibernate：错误脱水属性 - 这是什么鬼？

> ID：10867390
> 
> 赞同：24
> 
> 时间：2012-06-03T02:07:36.107
> 
> 标签：c#, nhibernate

我正在金融系统中进行相当复杂的 NHibernate 交易，创建付款，记录分类帐条目，检查付款是否是发票的总金额，如果是，则将发票标记为全额支付等。 . 很多有趣的东西。自然，它必须发生在单个事务中。

当我尝试将更改提交到会话时，我收到以下错误：

```
Error dehydrating property value for C3.DataModel.CFAPTransaction.Vendor 
```

谷歌搜索这个并没有出现很多记录。有人可以告诉我这意味着什么以及我需要将调试工作集中在哪里吗？

**更新**

根据请求，这是完整的错误消息：

> ```
> NHibernate.PropertyValueException: Error dehydrating property v  alue for C3.DataModel.CFAPTransaction.Vendor ---> 
> ```
> 
> NHibernate.HibernateException：无法解析属性：NHibernate.Tuple.Entity.AbstractEntityTuplizer.GetPropertyValue(Object entity, String propertyPath) 的 NHibernate.Tuple.Entity.EntityMetamodel.GetPropertyIndex(String propertyName) 在 NHibernate.Persister.Entity.AbstractEntityPersister 的 APVendorId。在 NHibernate.Type.ManyToOneType.NullSafeSet(IDbCommand st, Object value, Int32 index, Boolean[] settable, ISessionImplementor 的 NHibernate.Type.EntityType.GetIdentifier(Object value, ISessionImplementor session) session) 在 NHibernate.Persister.Entity.AbstractEntityPersister.Dehydrate(Object id, Object[] fields, Object rowId, Boolean[] includeProperty, Boolean[][] includeColumns, Int32 table, IDbCommand 语句, ISessionImplementor session,Int32 index) --- 内部异常堆栈跟踪结束 --- 在 NHibernate.Persister.Entity.AbstractEntityPersister.Dehydrate(Object id, Object[] fields, Object rowId, Boolean[] includeProperty, Boolean[][] includeColumns, Int32 NHibernate 的 NHibernate.Persister.Entity.AbstractEntityPersister.Insert(Object id, Object[] fields, Boolean[] notNull, Int32 j, SqlCommandInfo sql, Object obj, ISessionImplementor session) 的表，IDbCommand 语句，ISessionImplementor 会话，Int32 索引）。 Persister.Entity.AbstractEntityPersister.Insert(Object id, Object[] fields, Object obj, ISessionImplementor session) at NHibernate.Action.EntityInsertAction.Execute() at NHibernate.Engine.ActionQueue.Execute(IExecutable executable) at NHibernate.Engine.ActionQueue NHibernate.Engine.ActionQueue 中的 .ExecuteActions(IList 列表)。ExecuteActions() 在 NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions(IEventSource 会话) 在 NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent 事件) 在 NHibernate.Impl.SessionImpl.Flush() 在 NHibernate.Transaction.AdoTransaction.Commit( ) 在 C:\projects\C3\C3.DataModel.Generated\Generated\NHibernateRepositories.generated.cs:C3.WebUI.Areas.Finance.Controllers.AccountsPayableController 中的 C3.DataModel.Repositories.NHUnitOfWork.Save() 中的第 2659 行。 C:\projects\C3\C3.WebUI\Areas\Finance\Controllers\AccountsPayableController.cs:line 434 中的 CreatePayment（CreatePaymentModel 模型）SessionImpl.Flush() 在 NHibernate.Transaction.AdoTransaction.Commit() 在 C3.DataModel.Repositories.NHUnitOfWork.Save() 在 C:\projects\C3\C3.DataModel.Generated\Generated\NHibernateRepositories.generated.cs:line 2659 在 C3.WebUI.Areas.Finance.Controllers.AccountsPayableController.CreatePayment（CreatePaymentModel 模型）在 C:\projects\C3\C3.WebUI\Areas\Finance\Controllers\AccountsPayableController.cs:line 434SessionImpl.Flush() 在 NHibernate.Transaction.AdoTransaction.Commit() 在 C3.DataModel.Repositories.NHUnitOfWork.Save() 在 C:\projects\C3\C3.DataModel.Generated\Generated\NHibernateRepositories.generated.cs:line 2659 在 C3.WebUI.Areas.Finance.Controllers.AccountsPayableController.CreatePayment（CreatePaymentModel 模型）在 C:\projects\C3\C3.WebUI\Areas\Finance\Controllers\AccountsPayableController.cs:line 434

**更新** 将 NHibernate 投入调试模式，我得到一堆这样的东西：

> Areas.Finance.Controllers.AccountsPayableController 错误 C3.WebUI.Areas.Finance.Controllers.AccountsPayableController：没有其他信息。NHibernate.PropertyValueException：为 C3.DataModel.CFAPTransaction.Vendor 脱水属性值时出错 ---> NHibernate.HibernateException：无法解析属性：NHibernate.Tuple.Entity.EntityMetamodel.GetPropertyIndex(String propertyName) 在 NHibernate.Tuple.Entity 的 APVendorId .AbstractEntityTuplizer.GetPropertyValue(Object entity, String propertyPath) at NHibernate.Persister.Entity.AbstractEntityPersister.GetPropertyValue(Object obj, String propertyName, EntityMode entityMode) at NHibernate.Type.EntityType.GetIdentifier(Object value, ISessionImplementor session) at NHibernate.Type .ManyToOneType.NullSafeSet(IDbCommand st，对象值，Int32 索引，

查询数据库时似乎不会发生这种情况。我有一种感觉，我创建一堆对象，关联它们，然后尝试持久化它们有问题，但这是一个纯粹的猜测。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-05T20:17:47.757

nhibernate 可能没有显示正确的错误属性，检查映射文件中的相邻属性，查找数据库中的数据类型与 .net 中的数据类型或属性中的重复列之间的关系中的错误......也检查一下链接[Fluent NHibernate - IndexOutOfRange](https://stackoverflow.com/questions/10689054/fluent-nhibernate-indexoutofrange)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-09T10:53:26.007

您应该检查 CFAPTransaction 映射，看起来您想为每笔交易指定一个供应商。在这种情况下，您的映射必须类似于下面的代码。

```
public CFAPTransactionMap()
{
  HasOne(x => x.Vendor).ForeignKey("VendorId").Cascade.All();
  ...
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-27T09:11:45.983

就我而言，这是 SQL-Server 上缺少的身份规范。

简单对象：

```
public class Employee
{
    public virtual int ID { get; set; }
} 
```

映射：

```
public class EmployeeMap : ClassMapping<Employee>
{
    public EmployeeMap()
    {
        Id(x => x.ID, map => { map.Generator(Generators.Identity); map.UnsavedValue(0); });
    }
} 
```

SQL：

这是具有主键约束的 ID 列。

[![带约束的 ID 列](../Images/c5dcb1998b5da67952e43f0da1165255.png)](https://i.stack.imgur.com/B5mdz.png)

在这里您可以看到导致问题的缺少的身份规范。 [![缺少身份规范](../Images/76d56af714ca8834b91ccff88013d4ac.png)](https://i.stack.imgur.com/rxVfU.png)

要解决该问题，您必须将 ID 列指定为`IDENTITY` ie

```
CREATE TABLE EMPLOYEE
(
    ID int NOT NULL IDENTITY(0, 1)
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-12T08:57:56.530

我遇到了同样的错误。这是我的示例映射：

```
ManyToOne(x => x.objPerson, map => { map.Column("PersonID"); map.NotNullable(false); });
Property(x => x.intPersonID, map => map.Column("PersonID")); 
```

如果我试图通过仅填充属性`intPersonID`并将其设置为`objPerson`空来将其保存/保存在我的数据库中，这将触发所有属性的脱水错误！

我只是填充的原因`intPersonID`是为了防止在数据库上查询以获取`objPerson`在保存到数据库之前。不幸的是，它会触发一个错误，所以我修改了我的映射并纠正了这个：

```
ManyToOne(x => x.objPerson, map => { map.Column("PersonID"); map.NotNullable(false); }); 
```

或者，如果我想通过获取整个对象来防止查询数据库，我将只使用此映射：

```
Property(x => x.intPersonID, map => map.Column("PersonID")); 
```

但是将它们结合起来是不可能的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-25T19:41:45.257

就我而言，异常是准确地识别出导致错误的属性。`cascade`我有一个缺少定义的多对一属性。`"save-update"`防止错误：

```
<many-to-one name="FocusType" cascade="save-update"
    class="MyInfrastructure.FocusType, MyInfrastructure">
    <column name="FocusTypeId" sql-type="int" not-null="false" />
</many-to-one> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-02-10T14:56:13.647

一个聪明的人曾经告诉我把这个添加到我的地图中

```
.Length(int.MaxValue); 
```

# javascript - JQuery / Javascript 弹出框和表单提交创建

> ID：10867391
> 
> 赞同：-4
> 
> 时间：2012-06-03T02:07:47.800
> 
> 标签：javascript, jquery, user-interface, popup

我有一个 jquery/javascript 问题。对于我正在使用 PHP/JQuery 开发的网站，我需要创建一个带有确定/取消按钮和消息的对话框，然后根据用户是否说确定提交表单。我知道在javascript中我可以创建一个链接到样式页面的新窗口，然后我可以选择用户是否点击ok按钮并使用它提交windows父表单但上次我编写了类似的东西我感觉它需要很多代码行，并且想知道 JQuery 是否支持创建对话框，以及我是否可以使用它做一些类似的功能（希望代码行更少，因为每次我使用 jquery 而不是标准 javascript 时，它看起来真的减少我的代码库）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T02:11:11.843

我认为您正在寻找类似于[jquery ui 对话框](http://jqueryui.com/demos/dialog/)的内容。

# f# - F# 中的格式化警告

> ID：10867392
> 
> 赞同：2
> 
> 时间：2012-06-03T02:08:09.937
> 
> 标签：f#, formatting

以下代码在每个`let`（“可能不正确的缩进”）上触发格式警告：

```
module UtilTests =
    [<Test>] let simpleWithNth ()= true |> should be True
    [<Test>] let negIndex () = true |> should be True
    [<Test>] let tooBigIndex () = true |> should be True
    [<Test>] let lastIndex () = true |> should be True 
```

以下没有：

```
module UtilTests =
    [<Test>] let simpleWithNth ()= true |> should be True
     [<Test>] let negIndex () = true |> should be True
      [<Test>] let tooBigIndex () = true |> should be True
       [<Test>] let lastIndex () = true |> should be True 
```

为什么它希望每个`let`都比它上面的缩进更多？（有没有办法让 Visual Studio 2012 自动格式化？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T11:21:23.013

正如Brian在评论中所说，将属性应用于`let`函数的通常方法是将属性写在`let`绑定之前的行上。我还希望您编写的代码能够工作，因为函数的主体在同一行，但显然，编译器不这么认为......

但是，还有另一种方法可以将属性应用于`let`在您的示例中运行良好的函数：

```
module UtilTests = 
  let [<Test>] simpleWithNth ()= true |> should be True 
  let [<Test>] negIndex () = true |> should be True 
  let [<Test>] tooBigIndex () = true |> should be True 
  let [<Test>] lastIndex () = true |> should be True 
```

如果您正在编写递归函数，则需要这种样式 - 然后前几行的属性不起作用，您需要编写`let rec [<Foo>] foo () = ... and [<Bar>] bar () = ...`.

# javascript - jquery与js脚本冲突

> ID：10867393
> 
> 赞同：3
> 
> 时间：2012-06-03T02:08:51.040
> 
> 标签：javascript, jquery, slider, conflict

欢迎大家，

我的图像滑块有问题，它运行成功，直到执行轮询脚本然后它停止，尝试结合两个脚本没有工作也尝试使用 noConflict 但停止它们。

这是滑块

```
(function ($) {
    $.fn.s3Slider = function (vars) {
        var element = this;
        var timeOut = (vars.timeOut != undefined) ? vars.timeOut : 4000;
        var current = null;
        var timeOutFn = null;
        var faderStat = true;
        var mOver = false;
        var items = $("#sliderContent .sliderImage");
        var itemsSpan = $("#sliderContent .sliderImage span");
        items.each(function (i) {
            $(items[i]).mouseover(function () {
                mOver = true
            });
            $(items[i]).mouseout(function () {
                mOver = false;
                fadeElement(true)
            })
        });
        var fadeElement = function (isMouseOut) {
                var thisTimeOut = (isMouseOut) ? (timeOut / 2) : timeOut;
                thisTimeOut = (faderStat) ? 10 : thisTimeOut;
                if (items.length > 0) {
                    timeOutFn = setTimeout(makeSlider, thisTimeOut)
                } else {
                    console.log("Poof..")
                }
            };
        var makeSlider = function () {
                current = (current != null) ? current : items[(items.length - 1)];
                var currNo = jQuery.inArray(current, items) + 1;
                currNo = (currNo == items.length) ? 0 : (currNo - 1);
                var newMargin = $(element).width() * currNo;
                if (faderStat == true) {
                    if (!mOver) {
                        $(items[currNo]).fadeIn((timeOut / 6), function () {
                            if ($(itemsSpan[currNo]).css("bottom") == 0) {
                                $(itemsSpan[currNo]).slideUp((timeOut / 6), function () {
                                    faderStat = false;
                                    current = items[currNo];
                                    if (!mOver) {
                                        fadeElement(false)
                                    }
                                })
                            } else {
                                $(itemsSpan[currNo]).slideDown((timeOut / 6), function () {
                                    faderStat = false;
                                    current = items[currNo];
                                    if (!mOver) {
                                        fadeElement(false)
                                    }
                                })
                            }
                        })
                    }
                } else {
                    if (!mOver) {
                        if ($(itemsSpan[currNo]).css("bottom") == 0) {
                            $(itemsSpan[currNo]).slideDown((timeOut / 6), function () {
                                $(items[currNo]).fadeOut((timeOut / 6), function () {
                                    faderStat = true;
                                    current = items[(currNo + 1)];
                                    if (!mOver) {
                                        fadeElement(false)
                                    }
                                })
                            })
                        } else {
                            $(itemsSpan[currNo]).slideUp((timeOut / 6), function () {
                                $(items[currNo]).fadeOut((timeOut / 6), function () {
                                    faderStat = true;
                                    current = items[(currNo + 1)];
                                    if (!mOver) {
                                        fadeElement(false)
                                    }
                                })
                            })
                        }
                    }
                }
            };
        makeSlider()
    }
})(jQuery); 
```

这是投票脚本

```
window.onload = function() {
$(".sidePollCon").load("ar_poll.html", function(r, s, xhr) {

    if (s == "error") {
        $(".sidePollCon").load("poll.html");

    } else {
        $(".vote_booroo").html("صوت الان");
        $(".viewresults").html("شاهد النتيجة");
        $("fieldset p").html("");
        $(".results_booroo p").html("");
        $(".result_booroo").attr("src", "../images/poll_color.jpg");

    }

});

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T16:43:01.253

一个潜在的问题可能是`window.onload`分配。它非常容易发生冲突。

每次执行`window.onload =`之前的分配都会被覆盖。[在此处](http://jsfiddle.net/LLzzj/)查看演示：

输出显示第一个`window.onload`分配永远不会被调用，而 jQuery 替代项确实被调用。

`jQuery.noConflict`在这方面做得很少。它所做的只是防止覆盖该`$`符号，以便另一个库可以使用它。

因此，如果您还使用`window.onload`事件来调用滑块，那么您就会发生冲突。您可以使用 jquery 格式轻松解决此问题：

```
$(window).load(function() {
    ...
}); 
```

但是，通常您会将事件与`$(document).load(function(){...});`或简称为：`$(function(){...})`.

因此，对于您的民意调查，这将是：

```
$(function(){
    $(".sidePollCon").load("ar_poll.html", function(r, s, xhr) {

        if (s == "error") {
            $(".sidePollCon").load("poll.html");

        } else {
            $(".vote_booroo").html("صوت الان");
            $(".viewresults").html("شاهد النتيجة");
            $("fieldset p").html("");
            $(".results_booroo p").html("");
            $(".result_booroo").attr("src", "../images/poll_color.jpg");

        }

    });
}); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T04:18:30.677

解决 jquery 中的冲突（可能与另一个 JS 库 .. 像 script.aculo.us）可以使用 noconflict() 解决

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

$.noConflict();

但请确保您的 javascript 代码本身没有错误。使用 firebug 和 console.log('') 来测试你的脚本。

# java - Java Applet GUI 位置

> ID：10867400
> 
> 赞同：-2
> 
> 时间：2012-06-03T02:11:27.400
> 
> 标签：java, applet, vertical-alignment, jlabel, jtextfield

这是一个神秘的问题。我有一个`JSlider`,`JLabel`和`JTextField`. 我希望它们都相邻对齐。我的问题是`JTextField`'s (valueField) 上移了。当我打印出组件之间的 y 坐标值时，它们都是相同的。这是我的代码`JLabel`和`JTextField`：

```
public SliderLabelPanel(String labelStr, String unitLabelStr)
//PRE:  labelStr is initialized  
//POST: a default SliderLabelPanel is created
{
    //this.setLayout(new FlowLayout());
    slider = new JSlider();
    slider.setMajorTickSpacing(10);
    slider.setMaximum(100);
    slider.setMinimum(0);
    slider.setPaintTicks(true);

    label = new JLabel(labelStr);
    valueField = new JTextField();
    unitLabel = new JLabel(unitLabelStr);

    this.add(slider);
    this.add(label);
    this.add(valueField);
    this.add(unitLabel);
    //printFields();
}

public void update()
//POST: this SliderLabelPanel is updated (size of the components)
{
    this.slider.setBounds(0, slider.getY(), (int)(Global.sliderWidth * getWidth()), (int)(Global.labelHeight * getHeight()));
    this.label.setBounds(slider.getX() + slider.getWidth(), slider.getY(), 
                        Global.LABEL_WIDTH, (int)(Global.labelHeight * getHeight()));

    this.valueField.setBounds(label.getX() + label.getWidth(), slider.getY(),
                             (int)(Global.fieldWidth * getWidth()), Global.FIELD_HEIGHT);

    //valueField.getx

    this.unitLabel.setBounds(valueField.getX() + valueField.getWidth(), slider.getY(),
                             Global.LABEL_WIDTH, (int)(Global.labelHeight * getHeight()));
    printFields();
}

public void paintComponent(Graphics g)
//PRE:  g is initialized
//POST: the components of this SliderLabelPanel are painted to g
{
    super.paintComponent(g);
} 
```

将`JSlider`与 对齐`JLabel`，但是`JTextField`将向上移动。也请给我建议，我的想法不多了。感谢所有的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T20:59:08.940

> 你能给我一些建议吗？

*   避免[*绝对定位*](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)。

*   [从sscce](http://sscce.org/)开始并对其进行修改以展示您遇到的任何问题。

![布局测试](../Images/ddfb6ab05b548a3ecc192b5a9c5792cc.png)

```
import java.awt.EventQueue;
import java.awt.GridLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSlider;
import javax.swing.JTextField;

/** @see http://stackoverflow.com/q/10867400/230513 */
public class LayoutTest extends JPanel {

    public LayoutTest() {
        super(new GridLayout(1, 0));
        JSlider slider = new JSlider();
        this.add(slider);
        JLabel label = new JLabel("Label", JLabel.CENTER);
        this.add(label);
        JTextField jtf = new JTextField("Text");
        this.add(jtf);
    }

    private void display() {
        JFrame f = new JFrame("LayoutTest");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new LayoutTest().display();
            }
        });
    }
} 
```

# python - Pygame 输入名称时使用 shift

> ID：10867402
> 
> 赞同：2
> 
> 时间：2012-06-03T02:13:07.990
> 
> 标签：python, pygame, keyboard-events

一个月前我开始使用 Pygame，我的第一款游戏在高分表和玩家姓名输入框中运行良好。我的问题是当玩家输入他们的名字时让 shift 键工作。我没有弄乱我的游戏，而是创建了一个小型测试程序。每当我按下任何修饰键或键盘时，我都会收到错误“文件“C:\PythonProjects\NameBox\namebox.py”，第 61 行，询问 current_string += chr(inkey) ValueError: chr() arg not in range( 256)"

任何人都可以帮我完成这项工作。我已经尝试了很多我在网上找到的建议，但无法让它们中的任何一个起作用。也许有更好的方法来做到这一点，但至少这给了我一个名字（所有都是小写），并将它与分数和日期一起输入到正确位置的高分表中。

这是我的测试程序。希望我正确输入了代码。

```
import pygame, sys, os
os.environ['SDL_VIDEO_CENTERED'] = '1'  # centers Pygame SCREEN on desktop

from pygame.locals import *
pygame.font.init()

SCREENWIDTH = 640
SCREENHEIGHT = 480 
SCREEN = pygame.display.set_mode((SCREENWIDTH+9, SCREENHEIGHT+9))
BASICFONT = pygame.font.Font('freesansbold.ttf', 18, bold = False, italic=False)
WHITE     = (255, 255, 255)
BLACK     = (  0,   0,   0)
GREEN     = (  0, 255,   0)
DARKGREEN = (  0, 128,   0)

def main():
    while True:
        for event in pygame.event.get():
            if event.type == QUIT:
                terminate()
            elif event.type == KEYDOWN:
                if event.key == pygame.K_ESCAPE:
                    terminate()
                elif event.key == pygame.K_n:
                    getname()

        spaceSurf = BASICFONT.render('Press n to enter name', False, WHITE)
        spaceRect = spaceSurf.get_rect()
        spaceRect.midtop = (SCREENWIDTH / 2, SCREENHEIGHT - 30)
        SCREEN.blit(spaceSurf, spaceRect)
        pygame.display.update()

def getname():
    name = ask("Your name")
    SCREEN.fill(BLACK)
    nSurf = BASICFONT.render('Press n to enter name', False, WHITE)
    nRect = nSurf.get_rect()
    nRect.midtop = (SCREENWIDTH / 2, SCREENHEIGHT - 30)
    SCREEN.blit(nSurf, nRect)

    nameSurf = BASICFONT.render('Your name is '+ name, True, WHITE)
    nameRect = nameSurf.get_rect()
    nameRect.midtop = (SCREENWIDTH / 2, SCREENHEIGHT / 2)
    SCREEN.blit(nameSurf, nameRect)

    pygame.display.update()

def ask(question):
    "ask(question) -> answer"
    current_string = ""
    display_box(question + ": " + current_string)
    while 1:
        inkey = get_key()
        if inkey == K_BACKSPACE:
            current_string -= 1
        elif inkey == K_RETURN or inkey == K_KP_ENTER:
            break
        elif inkey == pygame.K_ESCAPE:
            terminate()
        else:
            current_string += chr(inkey)

        display_box(question + ": " + current_string.capitalize())

    return current_string.capitalize() # this is the answer    

def get_key():
    while 1:
        for event in pygame.event.get():
            if event.type == pygame.KEYDOWN:
                return event.key
            else:
                pass

def display_box(message):
  "Print a message in a box in the middle of the screen"
  SCREEN.fill(BLACK)
  left = (SCREENWIDTH / 2) - 156
  top = (SCREENHEIGHT / 2) -100
  pygame.draw.rect(SCREEN, DARKGREEN, (left, top, 320, 200)) 
  SCREEN.blit(BASICFONT.render("New High Score!", True, GREEN),(left + 90, top + 35)) 
  SCREEN.blit(BASICFONT.render("Press Enter when done.", True, GREEN),
          (left + 51, top + 160)) 

  pygame.draw.rect(SCREEN, BLACK, (left + 39, top + 110, 240, 20))
  pygame.draw.rect(SCREEN, WHITE, (left + 38, top + 108, 244, 24), 1)

  if len(message) != 0:
      SCREEN.blit(BASICFONT.render(message, True, WHITE), (left+42, top + 111))

  pygame.display.update()

def terminate():
    pygame.quit()
    sys.exit()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T02:54:34.960

**更新：**在仔细阅读[了链接的问题](https://stackoverflow.com/q/2671589/520779)和[文档](http://www.pygame.org/docs/ref/key.html)之后，我想我找到了一种更好的方法来完成你想要的。

该`KEYDOWN`事件有一个附加属性，`unicode`。引用文档：

> pygame.KEYDOWN 事件有一个额外的属性 unicode 和 scancode。unicode 表示单个字符串，它是输入的完全翻译的字符。这考虑了 shift 和 composition 键。scancode 代表平台特定的密钥代码。这可能因键盘而异，但对于像多媒体键这样的奇怪键的键选择很有用。

我建议不要从您的 中返回一个值，而是一个元组`get_key`，这样您就可以访问这两个值：

```
if event.type == pygame.KEYDOWN:
    return (event.key, event.unicode) 
```

在您的调用代码中，而不是使用`chr(inkey)`使用`unicode`值：

```
(inkey, unichr) = get_key()
...
else:
    current_string += unichr 
```

这样，正确的字符将被附加到字符串中，所有的小细节（修饰键、死键等）都已经处理好了。

PS 不要使用`string.capitalize()`，否则它会弄乱你的字符串。引用[文档](http://docs.python.org/library/stdtypes.html#str.capitalize)：

> 返回字符串的副本，其第一个字符大写，其余小写。

这意味着任何字母都是您的字符串将**始终**遵循此模式：如果它是第一个字符，则大写，否则小写。其他字符（没有大小写）将保持不变。一些例子：

```
>>> "aBcDeF".capitalize()
"Abcdef"
>>> "a123B".capitalize()
"A123b"
>>> "@#$%".capitalize()
"@#$%"
>>> "qq2@3#~`?/|\\".capitalize()
"Qq2@3#~`?/|\\" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T05:47:56.660

这是我最终的工作解决方案。希望它会帮助别人。

```
" This demonstrates how to show an input box on screen and get the player name."
" By Barberic http://web.aanet.com.au/~barberic/"
" with thanks for help from mgibsonbr on stackoverflow.com"

import pygame, sys, os
os.environ['SDL_VIDEO_CENTERED'] = '1'  # centers Pygame SCREEN on desktop

from pygame.locals import *
pygame.font.init()

SCREENWIDTH = 640
SCREENHEIGHT = 480 
SCREEN = pygame.display.set_mode((SCREENWIDTH, SCREENHEIGHT))
BASICFONT = pygame.font.Font('freesansbold.ttf', 18, bold = False, italic=False)
WHITE     = (255, 255, 255)
BLACK     = (  0,   0,   0)
GREEN     = (  0, 255,   0)
DARKGREEN = (  0, 128,   0)

def main():
    while True:
        for event in pygame.event.get():
            if event.type == QUIT:
                terminate()
            elif event.type == KEYDOWN:
                if event.key == pygame.K_ESCAPE:
                    terminate()
                elif event.key == pygame.K_n:
                    getname()

        spaceRect = spaceSurf.get_rect()
        spaceRect.midtop = (SCREENWIDTH / 2, SCREENHEIGHT - 30)
        SCREEN.blit(spaceSurf, spaceRect)
        pygame.display.update()

def getname():
    name = ask("Your name")
    SCREEN.fill(BLACK)
    nSurf = BASICFONT.render('Press n to enter name', False, WHITE)
    nRect = nSurf.get_rect()
    nRect.midtop = (SCREENWIDTH / 2, SCREENHEIGHT - 30)
    SCREEN.blit(nSurf, nRect)

    # display the name on screen
    nameSurf = BASICFONT.render('Your name is '+ name, True, WHITE)
    nameRect = nameSurf.get_rect()
    nameRect.midtop = (SCREENWIDTH / 2, SCREENHEIGHT / 2)
    SCREEN.blit(nameSurf, nameRect)

    pygame.display.update()

def ask(question):
    "ask(question) -> answer"
    current_string = ""
    display_box(question + ": " + current_string)
    while 1:
        (inkey, unichr) = get_key()

        if inkey == K_BACKSPACE:  # remove last char
            current_string = current_string[:-1]
        elif inkey == K_RETURN or inkey == K_KP_ENTER:
            break   # break out of the while loop to return current_string
        elif inkey == pygame.K_ESCAPE:
            terminate()
        else:  
           current_string += unichr  # add a new char

        # limit the name length to 12 characters 
        current_string = current_string[:12]
        # show the current name during typing
        display_box(question + ": " + current_string)

    return current_string # this is the answer    

def get_key():
    while 1:
        for event in pygame.event.get():
            if event.type == pygame.KEYDOWN:
                return (event.key, event.unicode)

def display_box(message):
  "Print a message in a box in the middle of the screen"
  SCREEN.fill(BLACK)
  left = (SCREENWIDTH / 2) - 156
  top = (SCREENHEIGHT / 2) -100
  pygame.draw.rect(SCREEN, DARKGREEN, (left, top, 320, 200)) 
  SCREEN.blit(BASICFONT.render("New High Score!", True, GREEN),
              (left + 90, top + 35)) 
  SCREEN.blit(BASICFONT.render("Press Enter when done.", True, GREEN),
              (left + 51, top + 160)) 

  pygame.draw.rect(SCREEN, BLACK, (left + 39, top + 110, 240, 20))
  pygame.draw.rect(SCREEN, WHITE, (left + 38, top + 108, 244, 24), 1)

  if len(message) != 0:
    SCREEN.blit(BASICFONT.render(message, True, WHITE), (left+42, top + 111))

  pygame.display.update()

def terminate():
    pygame.quit()
    sys.exit()

if __name__ == '__main__':
    main() 
```

# java - 是否可以将最后一列作为 SWT 表中的复选框列？

> ID：10867404
> 
> 赞同：1
> 
> 时间：2012-06-03T02:13:35.253
> 
> 标签：java, checkbox, swt

我知道我们可以使用以下代码在 SWT 中创建一个带有复选框列的表：

```
Table table = new Table(shell, SWT.CHECK) 
```

例如，下面是一个带有复选框列的 SWT 表：

[http://www.eclipse.org/articles/Article-Table-viewer/images/tableViewer.gif](http://www.eclipse.org/articles/Article-Table-viewer/images/tableViewer.gif)

但是复选框列位于第一列，是否可以在创建表格时将复选框“移动”到最后一列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:57:04.583

您可以使用 来实例化表格`SWT.RIGHT_TO_LEFT`，但是您必须在表格上做所有相反的事情，因为如果您不这样做，它似乎会被“镜像”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:17:16.773

我认为没有简单的方法可以做到这一点。您可以添加一个带有复选框图像的新列，如以下代码段所示：

[http://dev.eclipse.org/viewcvs/viewvc.cgi/org.eclipse.jface.snippets/Eclipse%20JFace%20Snippets/org/eclipse/jface/snippets/viewers/Snippet061FakedNativeCellEditor.java?view=markup](http://dev.eclipse.org/viewcvs/viewvc.cgi/org.eclipse.jface.snippets/Eclipse%20JFace%20Snippets/org/eclipse/jface/snippets/viewers/Snippet061FakedNativeCellEditor.java?view=markup)

Eclipse Bugzilla 中有一个开放的错误，为此提供了一个内置的解决方案：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=285121](https://bugs.eclipse.org/bugs/show_bug.cgi?id=285121)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T18:02:09.817

你可能想用它`org.eclipse.swt.custom.TableEditor`来做到这一点。表格编辑器用于在表格中的单元格顶部添加任何控件。

# uuid - 生成 v5 UUID。什么是名称和命名空间？

> ID：10867405
> 
> 赞同：171
> 
> 时间：2012-06-03T02:13:42.390
> 
> 标签：uuid

我已经阅读了该`man`页面，但我不明白它的用途`name`和`namespace`用途。

> 对于版本 3 和版本 5 UUID，必须提供额外的命令行参数命名空间和名称。命名空间是字符串表示形式的 UUID 或内部预定义命名空间 UUID 的标识符（目前已知为“ns:DNS”、“ns:URL”、“ns:OID”和“ns:X500”）。名称是任意长度的字符串。

命名空间：

> 命名空间是字符串表示形式的 UUID 或

这是否意味着我需要将它（UUID v4）存储在与生成的 UUID v5 相关的某个地方？在任何一种情况下，为什么这不会自动完成？

> 名称是任意长度的字符串。

`name`一个完全随机的字符串？那它的目的是什么？可以从 UUID v5 解码吗？

* * *

## 回答 #1

> 赞同：282
> 
> 时间：2015-02-28T01:04:47.450

Type 3 和 Type 5 UUID 只是一种将*哈希*填充到 UUID 中的技术：

*   **类型 1**：填充`MAC address`+`datetime`成 128 位
*   **类型 3**：将 an`MD5 hash`塞入 128 位
*   **类型 4**：填充`random data`128 位
*   **类型 5**：将`SHA1`散列塞入 128 位
*   **类型 6**：[*顺序 UUID 的非官方想法*](http://gh.peabody.io/uuidv6/)

**编辑**：非官方类型 6 现在有官方[rfc](https://datatracker.ietf.org/doc/html/draft-peabody-dispatch-new-uuid-format)

SHA1 哈希输出 160 位（20 字节）；哈希的结果被转换为 UUID。

使用来自 SHA1 的 20 字节摘要：

```
SHA1 Digest:   74738ff5 5367 e958 1aee 98fffdcd1876 94028007
UUID (v5):     74738ff5-5367-5958-9aee-98fffdcd1876
                             ⭡    ⬑first two bits set to 1 and 0, respectively
                             ╰─low nibble is set to 5, to indicate type 5 
```

# 我要散列什么？

你可能想知道我应该散列的是什么。基本上你散列连接：

> sha1( `NamespaceUUID`+ `AnyString`);

您在字符串前面加上一个所谓的**命名空间**，以防止名称冲突。

[UUID RFC](https://www.rfc-editor.org/rfc/rfc4122)为您预定义了四个命名空间：

*   `NameSpace_DNS`：{6ba7b810-9dad-11d1-80b4-00c04fd430c8}
*   `NameSpace_URL`：{6ba7b811-9dad-11d1-80b4-00c04fd430c8}
*   `NameSpace_OID`：{6ba7b812-9dad-11d1-80b4-00c04fd430c8}
*   `NameSpace_X500`:{6ba7b814-9dad-11d1-80b4-00c04fd430c8}

所以，你可以一起散列：

```
StackOverflowDnsUUID = sha1(Namespace_DNS + "stackoverflow.com");
StackOverflowUrlUUID = sha1(Namespace_URL + "stackoverflow.com"); 
```

然后，RFC 定义了如何：

*   从 SHA1 中取出 160 位
*   并将其转换为 128 位的 UUID

基本要点是只取前 128 位，将 a 填充**`5`**到**类型**记录中，然后将段的前两位`clock_seq_hi_and_reserved`分别设置为 1 和 0。

# 更多示例

现在您有了一个生成所谓**Name**的函数，您可以拥有该函数（在伪代码中）：

```
UUID NameToUUID(UUID NamespaceUUID, String Name)
{
    //Note: All code on stackoverflow is public domain - no attribution required.

    Byte[] hash = sha1(NamespaceUUID.ToBytes() + Name.ToBytes());
    Uuid result;

    //Copy first 16-bytes of the hash into our Uuid result
    Copy(hash, result, 16);

    //set high-nibble to 5 to indicate type 5
    result[6] &= 0x0F; 
    result[6] |= 0x50; 

    //set upper two bits to "10"
    result[8] &= 0x3F; 
    result[8] |= 0x80; 

    return result;
} 
```

（注意：系统的字节序会影响上述字节的索引）

现在你可以打电话了：

```
uuid = NameToUUID(Namespace_DNS, 'www.stackoverflow.com');
uuid = NameToUUID(Namespace_DNS, 'www.google.com');
uuid = NameToUUID(Namespace_URL, 'http://www.stackoverflow.com');
uuid = NameToUUID(Namespace_URL, 'http://www.google.com/search&q=rfc+4112');
uuid = NameToUUID(Namespace_URL, 'http://stackoverflow.com/questions/5515880/test-vectors-for-uuid-version-5-converting-hash-into-guid-algorithm'); 
```

# 现在回到你的问题

> 对于版本 3 和版本 5 UUID，必须提供额外的命令行参数命名空间和名称。命名空间是字符串表示形式的 UUID 或内部预定义命名空间 UUID 的标识符（目前已知为“ns:DNS”、“ns:URL”、“ns:OID”和“ns:X500”）。名称是任意长度的字符串。

**命名空间**是您喜欢的任何 UUID。它可以是预定义的之一，或者您可以自己制作，例如^([1](https://web.archive.org/web/20090805171609/http://serverfault.com/questions/45734#45866))：

```
UUID Namespace_RectalForeignExtractedObject = '8e884ace-bee4-11e4-8dfc-aa07a5b093db' 
```

> 名称是任意长度的字符串。

该名称只是您希望附加到命名空间的文本，然后经过哈希处理并填充到 UUID 中：

```
uuid = NameToUUID('8e884ace-bee4-11e4-8dfc-aa07a5b093db', 'screwdriver');
uuid = NameToUUID('8e884ace-bee4-11e4-8dfc-aa07a5b093db', 'toothbrush');
uuid = NameToUUID('8e884ace-bee4-11e4-8dfc-aa07a5b093db', 'broomstick');
uuid = NameToUUID('8e884ace-bee4-11e4-8dfc-aa07a5b093db', 'orange');
uuid = NameToUUID('8e884ace-bee4-11e4-8dfc-aa07a5b093db', 'axe handle');
uuid = NameToUUID('8e884ace-bee4-11e4-8dfc-aa07a5b093db', 'impulse body spray');
uuid = NameToUUID('8e884ace-bee4-11e4-8dfc-aa07a5b093db', 'iPod Touch'); 
```

* * *

## 回答 #2

> 赞同：133
> 
> 时间：2013-03-13T19:55:55.677

名称和命名空间可用于创建（很可能）唯一 UUID 的层次结构。

粗略地说，类型 3 或类型 5 UUID 是通过将命名空间标识符与名称散列在一起生成的。第 3 类 UUID 使用 MD5，第 5 类 UUID 使用 SHA1。只有 128 位可用，其中 5 位用于指定类型，因此所有哈希位都不会进入 UUID。（MD5 也被认为是密码破解，而 SHA1 已处于最后阶段，因此不要使用它来验证需要“非常安全”的数据）。也就是说，它为您提供了一种创建可重复/可验证的“哈希”函数的方法，将可能的分层名称映射到概率上唯一的 128 位值，可能像分层哈希或 MAC 一样。

假设您有一个 (key,value) 存储，但它只支持一个命名空间。您可以使用类型 3 或类型 5 UUID 生成大量不同的逻辑命名空间。首先，为每个命名空间创建一个根 UUID。这可以是类型 1（主机+时间戳）或类型 4（随机）UUID，只要您将它存储在某处即可。或者，您可以为您的根创建*一个*随机 UUID（或使用`null`UUID:`00000000-0000-0000-0000-000000000000`作为根），然后使用“ `uuid -v5 $ROOTUUID $NAMESPACENAME`”为每个命名空间创建一个可重现的 UUID。现在，您可以使用 "`uuid -v5 $NAMESPACEUUID $KEY`”。这些 UUID 可以被扔到单个键值存储中，避免冲突的可能性很高。这个过程可以递归地重复，例如，如果与 UUID 键关联的“值”反过来代表某种逻辑“命名空间” " 就像一个桶、容器或目录，那么它的 UUID 可以反过来用来生成更多层次的 UUID。

生成的类型 3 或类型 5 UUID 包含命名空间 id 和命名空间内名称（键）的（部分）散列。它不再保存命名空间 UUID，就像消息 MAC 保存对其进行编码的消息的内容一样。从 uuid 算法的角度来看，名称是一个“任意”（八位字节）字符串。但是，它的含义取决于您的应用程序。它可以是逻辑目录中的文件名、对象存储中的对象 ID 等等。

虽然这适用于中等数量的命名空间和键，但如果您的目标是大量唯一且概率非常高的键，它最终会失去动力。生日问题（又名生日悖论）的 Wikipedia 条目包括一个表格，该表格给出了不同数量的键和表格大小的至少一次冲突的概率。对于 128 位，以这种方式散列 260 亿个密钥的概率为`p=10^-18`（可忽略不计），但是 26 万亿个密钥，将至少发生一次冲突的概率增加到`p=10^-12`（万亿分之一），而散列`26*10^15`密钥，则增加了至少发生一次碰撞`p=10^-6`（百万分之一）。调整编码 UUID 类型的 5 位，它会更快地用完，因此一万亿个密钥大约有万亿分之一的机会发生一次碰撞。

有关概率表，请参见[http://en.wikipedia.org/wiki/Birthday_problem#Probability_table](http://en.wikipedia.org/wiki/Birthday_problem#Probability_table)。

有关 UUID 编码的更多详细信息，请参阅[http://www.ietf.org/rfc/rfc4122.txt](http://www.ietf.org/rfc/rfc4122.txt)。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2018-07-27T03:07:14.147

名称只不过是某个名称空间中唯一的标识符。问题是命名空间通常非常小，并且其中一个名称经常与其他名称冲突。例如，我的车牌号（名称）在我所在州 DMV 的命名空间中是唯一的，但它可能在世界上不是唯一的；其他州 DMV 可能在自己的命名空间中使用了相同的名称。哎呀，其他人可能有一个电话号码（姓名）也匹配，因为那是另一个命名空间等。

UUID 可以被看作是存在于一个单一的命名空间中，如此庞大以至于它可以为*所有事物*提供一个唯一的名称；这就是“普遍”的意思。但是如何将其他命名空间中的现有名称映射到 UUID？

一个明显的解决方案是为每个项目生成一个 UUID（V1 或 V4），以替换其不相交名称空间中的旧名称。缺点是它们要大得多，您必须将所有新名称传达给拥有数据集副本的每个人，更新所有 API 等。很可能您实际上无法完全摆脱旧名称无论如何，这意味着现在每个项目都有*两个*名称，那么你让事情变得更好还是更糟？

这就是 V3/V5 的用武之地。UUID*看起来*和 V4 一样随机，但实际上是确定性的；任何拥有命名空间正确 UUID 的人都可以*独立地*为该命名空间内的任何给定名称生成相同的 UUID。您根本不需要发布它们，甚至不需要预先生成它们，因为任何人都可以根据需要即时创建它们！

DNS 名称和 URL 是非常常用的命名空间，因此为它们发布了标准 UUID；ASN.1 OID 和 X.500 名称并不常见，但标准机构喜欢它们，因此他们也为它们发布了标准命名空间 UUID。

对于所有其他命名空间，您必须生成自己的命名空间 UUID（V1 或 V4）并将其传达给需要它的任何人。如果您有多个命名空间，那么必须为每个命名空间发布 UUID 显然并不理想。

这就是层次结构的来源：您创建一个“基本”UUID（任何类型），然后将其用作命名其他命名空间的命名空间！这样，您只需发布基本 UUID（或使用明显的 UUID），其余的每个人都可以计算。

例如，让我们继续为 StackOverflow 创建一些 UUID；在 DNS 命名空间中有一个明显的名称，所以基础很明显：

```
uuid ns_dns = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';
uuid ns_base = uuidv5(ns_dns, 'stackoverflow.com'); 
```

StackOverflow 本身为用户、问题、答案、评论等提供了单独的命名空间，但这些也相当明显：

```
uuid ns_user     =  uuidv5( ns_base, 'user'     );
uuid ns_question =  uuidv5( ns_base, 'question' );
uuid ns_answer   =  uuidv5( ns_base, 'answer'   );
uuid ns_comment  =  uuidv5( ns_base, 'comment'  ); 
```

这个特定的问题是#10867405，所以它的 UUID 是：

```
uuid here = uuidv5(ns_question, '10867405'); 
```

请注意，在这个过程中*没有什么*随机的，所以任何遵循相同逻辑的人都会得到相同的答案，但是 UUID 命名空间是如此之大，以至于它（实际上，考虑到 122 位加密哈希的安全性）永远不会与从任何其他命名空间/名称对生成的 UUID。

# ruby-on-rails - ActionView::Template::Error（rails.png 未预编译）

> ID：10867410
> 
> 赞同：5
> 
> 时间：2012-06-03T02:15:59.697
> 
> 标签：ruby-on-rails, ubuntu-11.10, precompile

我收到页面“我们很抱歉，但出现问题，当我尝试加载我的 Rails 应用程序时。当我运行

```
tail -f log/production.log 
```

我明白了

```
ActionView::Template::Error (rails.png isn't precompiled) 
```

我跑了

```
 RAILS_ENV=production rake assets:precompile 
```

从当前目录。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-03T02:51:26.967

我在这里找到了答案

[Ruby on Rails 3.1 资产：预编译和图像](https://stackoverflow.com/questions/7647691/ruby-on-rails-3-1-assetsprecompile-and-images)

在 /current/config/environments 的 production.rb 文件中将 config.assets.compile = false 更改为 config.assets.compile = true

# groovy - 从 Groovy 脚本访问 Jenkins 插件包

> ID：10867411
> 
> 赞同：3
> 
> 时间：2012-06-03T02:16:08.143
> 
> 标签：groovy, jenkins

如果我想从 groovy 脚本中使用 Jenkins 插件，如何找到它的路径？

例如，只是在 master 上进行测试，我希望能够使用 NodeLabelParameter 插件中的 LabelParameterValue 类。下面是我正在寻找的一个示例（尽管它不起作用）。

`currentParameters.add(new hudson.plugins.nodelabelparameter.LabelParameterValue(nodeName))`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T20:51:34.787

在 Postbuild Groovy 脚本中，您可以指定*Additional groovy classpath*。例如：`/var/jenkins/plugins/claim/WEB-INF/classes`对于 Claim 插件代码。我试过了，它奏效了。

不幸的是，路径必须是绝对的，并且不允许环境变量（例如`${JENKINS_HOME}`）。此外，我不完全确定脚本在从属设备上运行时的外观 - 在从属设备上或在主设备上。

# opencv - 如何使用 SURF 和 C 检测视频中的对象？

> ID：10867412
> 
> 赞同：2
> 
> 时间：2012-06-03T02:17:10.747
> 
> 标签：opencv, video-processing, surf

我使用教程中的 SURF 程序来检测视频帧中的对象。但这会检测到所有关键点和描述符。我如何更改程序以仅检测特定对象？

```
CvSeq *imageKeypoints = 0, *imageDescriptors = 0;
int i;

CvSURFParams params = cvSURFParams(500, 1);
cvExtractSURF( image, 0, &imageKeypoints, &imageDescriptors, storage, params );
printf("Image Descriptors: %d\n", imageDescriptors->total);

for( i = 0; i < imageKeypoints->total; i++ )
{
CvSURFPoint* r = (CvSURFPoint*)cvGetSeqElem( imageKeypoints, i );
CvPoint center;
int radius;
center.x = cvRound(r->pt.x);
center.y = cvRound(r->pt.y);
radius = cvRound(r->size*1.2/9.*2);
cvCircle( frame, center, radius, red_color[0], 1, 8, 0 );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T08:31:00.197

该算法旨在检测所有的鲁棒关键点。您必须使用这种算法检测特定对象的唯一方法是拥有要检测的对象的图片（称为标记），以便能够将标记中的这些关键点与图像中的关键点进行比较。那些**匹配**的对意味着在 amrker 和图像中很常见。

了解方法很重要：

1 - 你有你想要检测的图像的标记。您使用 SURF、FAST、SIFT 或任何算法来检测关键点。这是离线的，你只在开始时做一次。

2 - 您开始从视频中获取帧，并为每一帧使用 SURF 来检测视频中的关键点。

3 - 这里是真正的处理部分，您将标记中的点与图像中的点“匹配”。如果你没有得到匹配的对象，它不在图像中。

看看这个[例子](http://www.cs.ubc.ca/~lowe/keypoints/smallex.jpg)。

# c# - 购物车严格使用会话或 cookie

> ID：10867413
> 
> 赞同：0
> 
> 时间：2012-06-03T02:17:38.167
> 
> 标签：c#, asp.net

作为一个 ASP.NET 的新手，我只想知道如何仅使用 cookie 或会话开发一个简单的购物车。只是为了给出一些想法，我的演示购物车中只有四件商品作为样本。任何抬头将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T02:30:47.717

广泛的问题需要一个广泛的答案，所以这里大致介绍了你可以如何做到这一点。

1.  将[DropDownList](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.dropdownlist.aspx)添加到包含每个购物车项目的主 ASPX 表单，以及一个“添加”[按钮](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.aspx)。
2.  *在代码隐藏中的页面加载事件中，使用Page.IsPostBack*检查请求是否是回发（即用户单击“添加”）。
3.  它是一个回发，然后从 DropDownList 中检索产品 ID。
4.  最后，添加或更新[Session](http://asp.net-tutorials.com/state/sessions/)对象以包含用户的购物车。使用*if (Session["Cart"]==null)*检查是否已经有购物车。如果没有，请使用以下方法创建它：

.

```
List<string> newCart = new List<string>();
newCart.Add(newProductId);
Session["Cart"] = newCart; 
```

此处购物车表示为产品 ID（字符串）的简单列表。

# php - 有没有一种安全的方式将变量从 php 发送到 flash

> ID：10867424
> 
> 赞同：1
> 
> 时间：2012-06-03T02:19:37.887
> 
> 标签：php, flash, security

我首先要说我对 flash 和 php 都比较陌生。

目前我有一个带有用户登录名和密码（在 php 中）的站点设置。成功登录后——（对 mysql 的 php 查询）用户登录，用户名和其他一些变量被存储为会话变量。

我想做的是在 Flash 中创建一个在线测验。测验将嵌入网页中。它需要从会话变量中获取用户名并将其传递给 flash，以便了解哪个帐户正在使用测验。是否可以安全地将用户名传递给 flash 程序？如果是这样，我应该在哪里寻找更多信息？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T03:04:11.210

Flash 包括对一种称为[动作消息格式](http://en.wikipedia.org/wiki/Action_Message_Format)(AMF) 的支持，这是一种协议，Flash 应用程序可以使用它来调用服务器上的方法并接收响应。

AMF 是一种二进制协议，具有多种语言的服务器端支持，包括 PHP（和许多 PHP 框架）。我怀疑如果您的 Flash 应用程序可以发出 HTTPS 请求，它应该能够通过 HTTPS 发出 AMF 请求。

但是……“安全”？

如果可以在线上嗅探 AMF 数据，则可以对其进行反序列化，就像明文一样。Flash 插件是一个封闭源代码的应用程序，因此您无法查看源代码然后自己编译它以确保它没有做任何您未授权的事情。

*你*如何定义“安全”？您希望防止的攻击或信息泄漏究竟是什么？

对于您的应用程序，也许一种策略是让浏览器验证用户并建立 PHP 会话。然后在加载时将会话 cookie 值作为变量传递给 Flash 应用程序。然后，您的 Flash 应用程序可以制作自己的包含 cookie 标头的 HTTP/HTTPS 请求，从而将请求标识为已建立会话的一部分。

在我看来应该有一种更简单的方法来处理这个问题，但我对 Flash 的了解也有限。

我支持您应该考虑不使用 Flash 进行这项工作的评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T05:03:56.023

除非它被忽视：你试图阻止什么样的攻击，你准备为它付出多少？

以相反的顺序；为了让您的服务器通过 HTTPS 服务页面，您需要从某个授权机构购买证书。这不是免费服务 + 它已过期。使用加密连接服务页面会按时间和内存对您的服务器征税，它需要对数据 + 流量进行编码（几乎是基本大小的两倍）。它还使嵌入其他人的内容（例如广告、来自其他网站的图像）难以投放，因为并非所有广告提供商都会通过安全和不安全的连接提供广告。如果您计划让您的网站从展示广告中获利，这可能是一个潜在的亮点。

攻击的种类：你在保护谁？您是否担心 Flash 会以某种方式帮助将您的应用程序逻辑暴露给潜在的攻击者，以便她能够利用您的系统弱点？例如，如果您使用 Flash 将内容上传到您的服务器，或者在某些情况下允许使用它加载服务器的代码，这可能是可能的。

或者您是否试图保护用户免受其他用户的侵害，因为如果一个用户可以窃听另一个用户发送的内容，这可能会使她受益？

也有以上两者的度数和组合。

为什么需要将用户名传回给他们？我想他们一定已经知道了。或者你是不是偶然的意思是 Flash 应该发送用户名？在这种情况下，再次，危险到底是什么？是其他用户知道发送了什么名称，还是用户自己能够发送“错误”名称？“错误”是指几件事：错误 - 可能是另一个用户的名称，或者是“正确”用户的名称，但发送的方式会启动另一个会话，而不是在已经存在的会话内部（从另一个选项卡/浏览器登录）。

一些附加信息：虽然您确实需要为证书付费，但使用 Flash 比依赖裸浏览器的功能更有优势。如果您对安全性的主要关注不是通过让您的整个站点通过 HTTPS 服务来给潜在客户留下深刻印象，那么您可以习惯性地在 Flash 中实现 HTTPS，但是，这需要大量的工作和对此事的理解。SSL（用于通过 HTTPS 提供页面的加密）依赖于使用 2 部分密钥的双向编码原理，例如 RSA。这个想法是，给定一个公钥，它只能加密数据，但你需要私钥来解密它。因此，向您的用户发送公钥是安全的，他们以后可以使用它来加密他们发送的数据。在这种情况下，其他任何人几乎不可能窃听您的服务器和用户之间从用户到服务器的方向发送的数据，即使他们可能拥有公钥，他们也无法解密数据。但这不会阻止他们可能知道服务器发送给客户端的信息 - 您应该将其视为可能始终已知且无法隐藏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T10:59:40.567

使此类测验变得安全的唯一方法是：

*   Flash 应用程序，在测验结束时，将所有答案*（不是结果，只是答案）*发送到 PHP 端*（Flash 可以执行 XHR）*
*   PHP方面可以验证用户会话*（如果他开始测验，如果他在测验上花费超过1秒..这样的细节）*
*   PHP 脚本将响应与结果或错误代码一起发送回 Flash-thing

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T02:39:38.303

有一些**方法**可以将数据“从 PHP”发送到 Flash，但没有**安全的方法**可以做到这一点。

要将任何数据“发送”到 Flash，您需要...

*   将其打印在与 Flash 元素相同的页面上（或直接打印到显示它的元素中）。但是，人们可以编辑您打印给他们的任何信息，并使用它来处理发送到 Flash 的数据。

*   让 Flash 发出 HTTP(S) 请求，并从那里获取数据。这也不起作用，因为 Flash 文档可以被反编译，或者数据可以被截获（甚至被欺骗）。

# android - android中片段/对话框之间的通信

> ID：10867425
> 
> 赞同：7
> 
> 时间：2012-06-03T02:20:00.593
> 
> 标签：android, android-fragments, android-dialogfragment

我有一个包含两个片段的活动：一个用于在网格视图中显示产品，另一个用于显示用户添加到订单中的产品（ListFragment）。当用户在网格视图中单击产品时，我需要显示一个对话框（DialogFragment），在其中询问所需产品的数量。然后，当用户在对话框中单击接受时，我希望产品出现在 ListFragment 中。

一方面，我必须将产品对象传递给对话框，以便将其名称显示为对话框的标题（例如）。所以我所做的就是以这种方式传递它：

```
public static class ProductDialog extends DialogFragment {

        static ProductDialog newInstance(ProductVO product) {
            ProductDialog f = new ProductDialog();

            Bundle args = new Bundle();
            args.putSerializable("product", product);
            f.setArguments(args);

            return f;
        }

        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {
            ProductVO product = (ProductVO) getArguments().getSerializable("product");

            return new AlertDialog.Builder(getActivity())
                    .setIcon(R.drawable.ic_dialog_add)
                    .setTitle(R.string.add_product)

                    ...

                    .setPositiveButton(R.string.accept,
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int whichButton) {

                            }
                        }
                    )
                    .setNegativeButton(R.string.cancel,
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int whichButton) {
                            }
                        }
                    )
                    .create();
        }
    } 
```

我觉得没关系，如果我错了，请纠正我。但是，在正按钮的 onClick 事件中，我必须检索对话框中引入的数量并将其传递给另一个片段（ListFragment），此时它应该立即显示在列表中。

我怎么能那样做？

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T03:07:55.507

[推荐](http://android-developers.blogspot.com/2012/05/using-dialogfragments.html)的方法是使用接口从 DialogFragment 到 Activity 通信，然后从 Activity 到 Fragment。

在您的活动中：

```
public class Main extends FragmentActivity implements OnQuantitySelectedListener {

    public interface OnQuantitySelectedListener {
        void onFinishEditDialog(String inputText);
    }

    @Override
    public void onFinishEditDialog(String inputText) {
        Toast.makeText(this, "Quantity: " + inputText, Toast.LENGTH_SHORT).show();
    }
} 
```

然后是DialogFragment内部类

```
public static class ProductDialog extends DialogFragment {

    static ProductDialog newInstance(ProductVO product) {
        ProductDialog f = new ProductDialog();

        Bundle args = new Bundle();
        args.putSerializable("product", product);
        f.setArguments(args);

        return f;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        ProductVO product = (ProductVO) getArguments().getSerializable("product");

        LayoutInflater factory = LayoutInflater.from(getActivity());
        final View textEntryView = factory.inflate(R.layout.alert_dialog_text_entry, null);
        mEditText = (EditText) textEntryView.findViewById(R.id.txt_your_name);

        return new AlertDialog.Builder(getActivity())
                .setIcon(R.drawable.ic_dialog_add)
                .setTitle(R.string.add_product)
                .setView(textEntryView)
                .setPositiveButton(R.string.accept,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int whichButton) {
                             OnQuantitySelectedListener listener = (OnQuantitySelectedListener) getActivity();
                             listener.onFinishEditDialog(mEditText.getText().toString());
                        }
                    }
                )
                .setNegativeButton(R.string.cancel,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int whichButton) {
                        }
                    }
                )
                .create();
    }
} 
```

R.layout.alert_dialog_text_entry 的 XML 来自[API Demos](http://developer.android.com/resources/samples/ApiDemos/res/layout/alert_dialog_text_entry.html)。它不适合您从用户那里获取数量的用例，但它说明了使用自定义布局从用户那里获取价值。

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2008 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <TextView 
        android:id="@+id/username_view"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_marginLeft="20dip"
        android:layout_marginRight="20dip"
        android:text="@string/alert_dialog_username"
        android:gravity="left"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/username_edit"
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:layout_marginLeft="20dip"
        android:layout_marginRight="20dip"
        android:scrollHorizontally="true"
        android:autoText="false"
        android:capitalize="none"
        android:gravity="fill_horizontal"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/password_view"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_marginLeft="20dip"
        android:layout_marginRight="20dip"
        android:text="@string/alert_dialog_password"
        android:gravity="left"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/password_edit"
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:layout_marginLeft="20dip"
        android:layout_marginRight="20dip"
        android:scrollHorizontally="true"
        android:autoText="false"
        android:capitalize="none"
        android:gravity="fill_horizontal"
        android:password="true"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

# javascript - 服务器端读取标签客户端更改

> ID：10867428
> 
> 赞同：1
> 
> 时间：2012-06-03T02:20:37.250
> 
> 标签：javascript, vb.net

如果随着用户将数据输入到我的表单中而更改的标签，我会得到一堆。标签是在客户端使用 js 进行的更改。然后我在所有提交后使用 vb 脚本从这些标签中提取字符串值。

问题是 vb 网络部分没有读取这些标签的新值。无论如何，我可以让它读取新值吗？我有 40 多个标签。谢谢！

编辑：

我尝试添加以下内容

在页面上

```
<asp:HiddenField ID="Label2h" Value="" runat="server"  /> 
```

在客户端 js 部分，警报显示正确的值

```
 var NeedId=document.getElementById('NeedIDLabel').innerHTML;
        document.getElementById('Label2h').Value = NeedId;
        alert(document.getElementById('Label2h').Value); 
```

在服务器端，我添加了一个消息框来显示我的值和它是空的。

```
NeedID = Label2h.Value 
```

编辑 2：使用文本框

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T02:25:14.257

像 C# 和 VB 这样的服务器端语言只能在控件发布到页面时检索由 javascript 更改的新值。提交表单时不张贴标签；因此，您将不得不使用已发布的 HiddenFields 或 TextBoxes 行中的某些内容。

# facebook - ifra 中 Facebook 帖子的 URL 返回“X-Frame-Options 禁止显示”

> ID：10867430
> 
> 赞同：-1
> 
> 时间：2012-06-03T02:21:06.690
> 
> 标签：facebook, facebook-graph-api, clickjacking

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T02:45:32.347

如果它是面向公众的页面，即不需要登录，您可以通过服务器上的代理路由请求，从响应中删除 X-Frame-Options 标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T19:44:57.463

我刚刚通过修复页面选项卡选项解决了这个问题。

没有正确设置页面选项卡，奇怪的是会产生 X 帧错误。

# c - TLE 到酒店 (spoj)

> ID：10867431
> 
> 赞同：-3
> 
> 时间：2012-06-03T02:21:52.990
> 
> 标签：c, algorithm, dynamic-programming

我正在做一个 spoj 的问题，我试图这样做，但我总是得到 TLE（时间限制已过期）问题是[酒店](http://www.spoj.pl/problems/HOTELS/)。这是我的代码，请你告诉我优化它的方法。

```
#include<stdio.h>

int main()
{
    unsigned long long int a,b,i;
    scanf("%llu %llu",&a,&b);
    unsigned long long int arr[a];
    for(i=0;i<a;i++)
    {
        scanf("%llu",&arr[i]);
    }

        unsigned long long int d;
        unsigned long long int k,z=0;
    for(i=0;i<a;i++)
    {
        d = arr[i];
        for(k=i+1;k<a+1;k++)
        {
            if (d<b)
            {
                if(z<d)
                z = d;
            }
            else
            if(d==b)
            {
                z = d;
                break;
            }
            else
            break;
            d = d + arr[k];
        }
        if(d==b)
        break;
    }
    printf("%llu",z);
    return 0;
} 
```

在这种情况下，如果输入 5 12 ，这五个是 2 1 3 4 5 使 12 然后我这样做：首先我将 12 与 2 进行比较，然后是 2+1 ，然后是 2+1+3 等等5 它将 12 与 1 、 1+3 、 1+3+4 .. 进行比较，以这种方式，当我发现等于 12 时，我只采用连续的并中断，否则它会一直持续到最后。

希特什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T06:07:44.407

没有必要像你在解释中所说的那样重新启动`after it goes to 5 it compares 12 to 1 , 1+3 , 1+3+4 .. and in this way`。仔细查看您的方法，您正在一次又一次地重新计算子数组的总和。例如 - 你`1+3+4`在做的时候已经计算了子数组的总和`2+1+3+4`。因此仍有一定的优化空间。

在说出确切的解决方案之前，我希望您先尝试一下。另外一个提示参考以下问题[Find subarray with given sum](http://www.geeksforgeeks.org/archives/19267)。

**编辑：**为将来的目的共享完整的解决方案。

```
#include<stdio.h>

/* Returns the maximum possible sum less than or equal to the gieven sum */
int subArraySum(int arr[], int n, int sum)
{
    /* Initialize curr_sum as value of first element
     and starting point as 0 */
    int curr_sum = arr[0], max_sum = 0, start = 0, i;

    /* Add elements one by one to curr_sum and if the curr_sum exceeds the
     sum, then remove starting element */
    for (i = 1; i <= n; i++)
    {
        // If curr_sum exceeds the sum, then remove the starting elements
        while (curr_sum > sum && start < i-1)
        {
            curr_sum = curr_sum - arr[start];
            start++;
        }

        //keep track of the maximum sum so far.
        if (max_sum < curr_sum)
            max_sum = curr_sum;

        curr_sum = curr_sum + arr[i];
    }

    return max_sum;
} 
```

// 测试上述功能的驱动程序

```
int main()
{
    int arr[] = {7, 3, 5, 6};
    int n = sizeof(arr)/sizeof(arr[0]);
    int sum = 9;
    printf("Max Sum = %d\n", subArraySum(arr, n, sum));
    return 0;
} 
```

# android - 当我在真实设备上运行我的 android 应用程序时抛出 SocketException（连接超时）

> ID：10867434
> 
> 赞同：0
> 
> 时间：2012-06-03T02:22:43.320
> 
> 标签：android, socketexception, connection-timeout

我的 android 应用程序需要通过 HttpClient 执行 Http 请求。
我已经在模拟器上测试过，它工作正常。但是当我在激活 WIFI 的真实设备上执行此操作时，有时会发生 ANR，有时会抛出 SocketException。
设备似乎无法连接服务器。
logcat打印输出如下

此外，该应用程序的包名称为“com.tim.wirelessorder”

```
06-03 09:51:17.803: W/System.err(2307): java.net.SocketException: The operation timed out
06-03 09:51:17.803: W/System.err(2307):     at org.apache.harmony.luni.platform.OSNetworkSystem.connectStreamWithTimeoutSocketImpl(Native Method)
06-03 09:51:17.803: W/System.err(2307):     at org.apache.harmony.luni.platform.OSNetworkSystem.connect(OSNetworkSystem.java:115)
06-03 09:51:17.803: W/System.err(2307):     at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:244)
06-03 09:51:17.803: W/System.err(2307):     at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:533)
06-03 09:51:17.803: W/System.err(2307):     at java.net.Socket.connect(Socket.java:1055)
06-03 09:51:17.803: W/System.err(2307):     at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
06-03 09:51:17.803: W/System.err(2307):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:143)
06-03 09:51:17.803: W/System.err(2307):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
06-03 09:51:17.803: W/System.err(2307):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
06-03 09:51:17.803: W/System.err(2307):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:348)
06-03 09:51:17.803: W/System.err(2307):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
06-03 09:51:17.803: W/System.err(2307):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
06-03 09:51:17.803: W/System.err(2307):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
06-03 09:51:17.803: W/System.err(2307):     at com.tim.wirelessorder.util.net.HttpUtil.getHttpResponse(HttpUtil.java:43)
06-03 09:51:17.803: W/System.err(2307):     at com.tim.wirelessorder.ui.SignIn$BnListener.onClick(SignIn.java:117)
06-03 09:51:17.803: W/System.err(2307):     at android.view.View.performClick(View.java:2408)
06-03 09:51:17.803: W/System.err(2307):     at android.view.View$PerformClick.run(View.java:8818)
06-03 09:51:17.803: W/System.err(2307):     at android.os.Handler.handleCallback(Handler.java:587)
06-03 09:51:17.803: W/System.err(2307):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-03 09:51:17.803: W/System.err(2307):     at android.os.Looper.loop(Looper.java:123)
06-03 09:51:17.810: W/System.err(2307):     at android.app.ActivityThread.main(ActivityThread.java:4627)
06-03 09:51:17.810: W/System.err(2307):     at java.lang.reflect.Method.invokeNative(Native Method)
06-03 09:51:17.810: W/System.err(2307):     at java.lang.reflect.Method.invoke(Method.java:521)
06-03 09:51:17.810: W/System.err(2307):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-03 09:51:17.810: W/System.err(2307):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-03 09:51:17.810: W/System.err(2307):     at dalvik.system.NativeStart.main(Native Method)
06-03 09:51:28.289: W/KeyCharacterMap(2307): Can't open keycharmap file
06-03 09:51:28.289: W/KeyCharacterMap(2307): Error loading keycharmap file '/system/usr/keychars/ilitek_ts.kcm.bin'. hw.keyboards.65538.devname='ilitek_ts'
06-03 09:51:28.289: W/KeyCharacterMap(2307): Using default keymap: /system/usr/keychars/qwerty.kcm.bin 
```

这个问题真的很令人不安，因为我没有开发只能在模拟器上运行的应用程序。那没有任何意义。anybaby 能弄清楚是什么问题吗？

我的代码在这里。

```
 HttpPost request = HttpUtil.getHttpPost(url);
                    List<BasicNameValuePair> list = new ArrayList<BasicNameValuePair>();
                    BasicNameValuePair vName = new BasicNameValuePair(
                            "name", name);
                    list.add(vName);
                    BasicNameValuePair vPwd = new BasicNameValuePair("pwd",
                            pwd);
                    list.add(vPwd);
                    // Log.e("result", "kk:");
                    request.setEntity(new UrlEncodedFormEntity(list));
                    HttpResponse response = HttpUtil
                            .getHttpResponse(request);
// -------- the line above throws the SocketException. this is a static method. the code is added below. 
```

======

```
public static HttpGet getHttpGet(String url) {
    Log.e("url", url);
    HttpGet request = new HttpGet(url);
    return request;
}

public static HttpPost getHttpPost(String url) {
    HttpPost request = new HttpPost(url);
    return request;
}
public static HttpResponse getHttpResponse(HttpGet request)
        throws ClientProtocolException, IOException {
    // Log.e("http", "in ");
    HttpResponse response = new DefaultHttpClient().execute(request);
    // Log.e("http", (response == null) + " ");
    return response;
}

public static HttpResponse getHttpResponse(HttpPost request)
        throws ClientProtocolException, IOException {
    HttpResponse response = new DefaultHttpClient().execute(request);
// ------- and here it performs a HttpPost request, and it seems the request fails to be sent.
        return response;
    } 
```

这是服务器上的 do-post 代码。servlet接收请求，从客户端获取用户在UI上输入的name、pwd参数。然后 servlet 激活一个 DAO，它使用名称 pwd 在 MySQL 中进行查询。你可以看到一个“System.out.println(name)”行，我想通过它来确定 servlet 是否获得了请求。当我在真实设备上测试代码时，控制台没有给出任何打印输出。我认为这意味着 servlet 没有收到请求。

```
 public void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    OutputStream out = response.getOutputStream();
    String name = request.getParameter("name");
    String pwd = request.getParameter("pwd");
    System.out.println(name);

    UserDao dao = new UserDaoImpl();

    byte[] r = dao.query(name, pwd);
    out.write(r);
    out.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T03:20:34.470

当我得到这个时，我没有数据连接。还要检查您是否具有可以执行此操作的正确权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:34:19.133

尝试使用另一种发送 HTTP 请求的方法：

```
url = "http://<your URL>";
URL urlObj = new URL(url);
Log.d("DEBUG", "url=" + url);
URLConnection lu = urlObj.openConnection();

//optional - send parameters
String data = URLEncoder.encode("param", "UTF-8") + "=" + URLEncoder.encode(value, "UTF-8"); //optional - send parameters
// Send data
lu.setDoOutput(true);
OutputStreamWriter wr = new OutputStreamWriter(lu.getOutputStream());
wr.write(data);
wr.flush();
//end of "optional"

// Get the response
BufferedReader rd = new BufferedReader(new InputStreamReader(lu.getInputStream()));
String line = "", res = "";
while ((line = rd.readLine()) != null) {
    res += line;
}

wr.flush();
wr.close();
Log.d("DEBUG", "res=" + res); 
```

# python - 求闭合二维均匀三次 B 样条的面积

> ID：10867437
> 
> 赞同：15
> 
> 时间：2012-06-03T02:23:56.610
> 
> 标签：python, math, numpy, spline

我有一个二维点列表，它们是闭合均匀三次 B 样条的控制顶点 (Dx)。我假设一条简单的曲线（非自相交，所有控制点都是不同的）。

我试图找到曲线包围的区域：

![在此处输入图像描述](../Images/ce659f531ab2e1eb3831f803917beffa.png)

如果我计算结点（Px），我可以将曲线视为多边形；然后我“只”需要在实际曲线和连接结点的直线之间找到每个段的剩余增量区域。

我知道 Bspline 的形状（以及因此面积）在旋转和平移下是不变的 - 所以对于每个段，我可以找到一个平移来将 t=0 结放在原点，并找到一个旋转来放置 t=1 结在 +x 轴上：

![在此处输入图像描述](../Images/ea186a50fddd64c9113537a0c1d7c84f.png)

我可以通过插入点并重新分组来找到曲线的方程：

```
P(t) = (
    (t**3)*(-Dm1 + 3*D0 - 3*D1 + D2)
    + (t**2)*(3*Dm1 - 6*D0 + 3*D1)
    + t*(-3*Dm1 + 3*D1)
    + (Dm1 + 4*D0 + D1)
) / 6. 
```

但我正在努力整合它——我能做到

```
 1
/
| Py(t) dt
/
t=0 
```

但这并没有给我空间。我*想*我需要的是

```
 Px(t=1)
/
| Py(t) (dPx(t) / dt) dt
/
x = Px(t=0) 
```

但在我走得更远之前，我真的很想知道：

1.  这是正确的面积计算吗？理想情况下，分析解决方案会让我开心！

2.  一旦我找到这个区域，我如何判断我是否需要从基础多边形中添加或减去它（第一个图中的红色与绿色区域）？

3.  是否有任何 Python 模块可以为我进行此计算？Numpy 有一些评估三次 Bsplines 的方法，但似乎都没有处理面积。

4.  有没有更简单的方法来做到这一点？我正在考虑可能在一堆点上评估 P(t) - 比如`t = numpy.arange(0.0, 1.0, 0.05)`- 并将整个事物视为一个多边形。知道需要多少细分来保证给定的准确度（我希望误差 < 1%）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T13:20:45.233

就个人而言，我会充分利用样条曲线，并使用[格林定理](http://mathworld.wolfram.com/GreensTheorem.html)将面积积分重写为轮廓积分。

由于您已经知道曲线，因此使用足够阶的高斯正交进行积分将是一件容易的事。没有恶作剧来估计所需的额外区域。我敢打赌它的计算效率也会很高，因为多项式上的高斯求积表现得非常好。三次 B 样条将很好地集成。

我会以这样一种方式编写您的代码，即第一点和最后一点必须重合。这是问题的不变量。

这种方法甚至适用于有洞的区域。你沿着外曲线整合，制作一条连接外曲线和内曲线的假想直线，沿着内曲线整合，然后沿着到达那里的直线返回到外曲线。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T10:42:56.123

1.  选择一些任意点作为枢轴*p* [0]（例如原点 (0,0)）
2.  沿曲线选取一点*p* [1] = *(x,y)*
3.  对该点的曲线求微分，得到速度*v* = < *vx,vy* >
4.  由三个点组成一个三角形，并[计算面积](http://en.wikipedia.org/wiki/Triangle#Using_vectors "维基百科：三角形 - 计算三角形的面积 - 使用向量")。*最简单的方法是向量p* [0] *p* [1]和*v*之间的叉积，然后除以二。
5.  *在t*上积分这个区域，从 0 到 1。

您得到的结果是整条曲线一段的面积。有些人会是消极的，因为他们面对相反的方向。如果将所有段的面积相加，则得到整条曲线的面积。

结果是：

> *面积*[*i*] = (31 *x* [*i* -1] *y* [*i*] + 28 *x* [*i* -1] *y* [*i* +1] + *x* [*i* -1] *y* [*i* +2] - 31 *x* [*i*] *y* [*i* -1] + 183 *x* [*i*] *y* [*i* +1] + 28 *x* [*i*] *y* [*i* +2] - 28 *x* [*i* +1] *y* [*i* -1] - 183 *x* [*i* +1] *y* [*i*] + 31 *x* [*i* +1] *y* [*i* +2] - *x* [*i* +2] *y* [*i* -1] - 28 *x* [*i* +2] *y* [*i*] - 31 *x* [*i* +2] *y* [*i* +1] ) / 720

如果将其转换为矩阵形式，则会得到：

> *面积*[*i*] = < *x* [*i* -1]   *x* [*i*]   *x* [*i* +1]   *x* [*i* +2] > · **P** · < *y* [*i* -1]   *y* [*i*]   *y* [*i* +1]   *y* [*i* +2] > ^T

其中**P**是

```
[    0   31   28    1]
[  -31    0  183   28] / 720
[  -28 -183    0   31]
[   -1  -28  -31    0] 
```

* * *

如果控制点是`[(0,0) (1,0) (1,1) (0,1)]`，则结果区域变为：

```
[(0,0), (1,0), (1,1), (0,1)] -> 242/720
[(1,0), (1,1), (0,1), (0,0)] -> 242/720
[(1,1), (0,1), (0,0), (1,0)] ->   2/720
[(0,1), (0,0), (1,0), (1,1)] ->   2/720 
```

总和为 488/720 = 61/90。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T03:13:53.897

嗯......看起来你已经知道该怎么做了。

1.  是的，这是计算段下面积的正确方法，确实

    ```
    dS=Y*dX=Y*(dX/dt)*dt 
    ```

2.  你不需要关心加法或减法。您需要一直添加，但某些积分（红色段）将为负数（如果您始终设置将 P [n]放在坐标的开头，P [n+1]沿 X 轴正方向）。因此，对于每个段，您需要计算平移和旋转，然后进行积分（全部通过分析完成）。

3.  我不了解 Python 模块，但制作这样的模块似乎最多需要一天的时间。
4.  我认为分析解决方案会更好，并且不是那么难。

无论如何，图形绝对令人惊叹

# sql - 使用 ANT 从 Hibernate 注释类创建 DDL 脚本

> ID：10867439
> 
> 赞同：0
> 
> 时间：2012-06-03T02:24:41.027
> 
> 标签：sql, hibernate, jakarta-ee, orm, ant

我正在尝试**使用 ANT 从我的 Hibernate 注释 bean 生成 SQL DDL**，根据我创建了以下 Ant 脚本的休眠工具文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="yourmarketnet" default="all" basedir=".">
<property name="build.dir" value="C:/Users/naim/Documents/NetBeansProjects/yourmarketnet/build" />
<target name="ddl_generation">
<!-- paths to required jars  -->
<path location="web/WEB-INF/lib/hibernate-annotations.jar" />
<path location="web/WEB-INF/lib/ejb3-persistence.jar" />
<path location="web/WEB-INF/lib/hibernate-entitymanager.jar" />
<path location="web/WEB-INF/lib/javaassist.jar" />
<path location="web/WEB-INF/lib/hibernate-tools.jar"/>
<path location="web/WEB-INF/lib/hibernate-entitymanager.jar" />
<path location="web/WEB-INF/lib/jboss-archive-browsing.jar" />
<path location="web/WEB-INF/lib/javaassist.jar" />

<taskdef name="hibernatetool" classname="org.hibernate.tool.ant.HibernateToolTask">
    </taskdef>
    <classpath>
    <!-- path of annotation beans -->
<path location="${build.dir}/web/WEB-INF/classes/com/yourmarketnet/beans" />
</classpath>
<!-- output destination -->
<hibernatetool destdir="${build.dir}">
<!-- were the annotation beans files are located-->
<!-- list exporters here -->
<hbm2ddl
export="false"
update="false"
drop="true"
create="true"
outputfilename="myApps.ddl"
delimiter=";"
format="false"
haltonerror="true"/>
</hibernatetool>
</target>
</project> 
```

但是我收到以下错误：

使用类加载器 AntClassLoader[] 找不到 taskdef 类 org.hibernate.tool.ant.HibernateToolTask

我检查了我的 /lib & 文件夹，并且存在类路径 hibernate-tools。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T02:37:48.587

在我的 ant 脚本中，我通常使用 lib 文件夹的绝对路径定义一个名为 lib.dir 的属性，并使用该标签来加载我所有的 jar，因为某种原因的相对路径对我来说一直是个问题。对你来说可能也值得一试。

```
<property name="lib.dir" value="C:\path\to\project\WebContent\WEB-INF\lib"/>
<property name="jdk.home" value="C:\path\to\jdk" />
<path id="project.classpath">
    <fileset dir="${lib.dir}">
        <include name="*.jar"/>
    </fileset>
    <pathelement location="${jdk.home}/jre/javaws/javaws.jar"/>
    <pathelement location="${jdk.home}/jre/lib/charsets.jar"/>
    <pathelement location="${jdk.home}/jre/lib/ext/dnsns.jar"/>
    <pathelement location="${jdk.home}/jre/lib/ext/ldapsec.jar"/>
    <pathelement location="${jdk.home}/jre/lib/ext/localedata.jar"/>
    <pathelement location="${jdk.home}/jre/lib/ext/sunjce_provider.jar"/>
    <pathelement location="${jdk.home}/jre/lib/im/indicim.jar"/>
    <pathelement location="${jdk.home}/jre/lib/im/thaiim.jar"/>
    <pathelement location="${jdk.home}/jre/lib/jce.jar"/>
    <pathelement location="${jdk.home}/jre/lib/jsse.jar"/>
    <pathelement location="${jdk.home}/jre/lib/plugin.jar"/>
    <pathelement location="${jdk.home}/jre/lib/rt.jar"/>
    <pathelement location="${jdk.home}/jre/lib/sunrsasign.jar"/>
    <pathelement location="${jdk.home}/lib/dt.jar"/>
    <pathelement location="${jdk.home}/lib/htmlconverter.jar"/>
    <pathelement location="${jdk.home}/lib/tools.jar"/>
</path>
...
// Rest of your build file
... 
```

# java-me - j2me波兰快照屏幕

> ID：10867445
> 
> 赞同：0
> 
> 时间：2012-06-03T02:26:37.063
> 
> 标签：java-me, j2mepolish

我正在尝试使用手机的摄像头通过以下代码段捕获图像

```
 snapShotScreen = new SnapshotScreen( "Snapshot" );
        snapShotScreen.addCommand(cmdBack );
        snapShotScreen.addCommand(cmdCapture);
        snapShotScreen.setCommandListener( new ThreadedCommandListener( this ) );
        this.display.setCurrent(snapShotScreen); 
```

我得到一个空值返回。我的目标设备是具有 mmapi 功能的 nokia/2700_classic，我仍然不明白为什么它不起作用。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:29:25.700

供参考，

要使 Android 摄像头正常工作，您需要编辑 MidletBridge.java 文件。你会发现这个文件：

J2ME-Polish_Root\j2mepolish-src\j2me\src\de\enough\polish\android\midlet\MidletBridge.java

您需要以两种方法（在 MidletBridge 活动中）添加通用 android 相机代码以及公共 by​​te[] 以在您拍照后检索数据，单击保存并设置 byte[] 图像：

```
MidletBridge.java file:

public byte[] imagebytearray = null;

public void startCameraIntent(){
        Intent i = new Intent("android.media.action.IMAGE_CAPTURE");
        startActivityForResult(intent, 10121);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        switch (requestCode) {
            case 10121: 
                imagebytearray = (byte[]) data.getExtras().get("data");
                break;
        }
} 
```

完成此操作后，您需要通过调用在 j2me 波兰应用程序中的任何位置实例化 MidletBridge

```
de.enough.polish.android.midlet.MidletBridge m = new de.enough.polish.android.midlet.MidletBridge();
m.startCameraIntent();
//I couldnt remember if the code continues here after you have taken the picture
byte[] img = m.imagebytearray;
//If the code doesnt pause here, you can just use a button to retreive the image or store the 
//image within the RMSStorage -- need some more code for that -- and then retreive it that way. 
```

我希望这对某人有所帮助，因为我花了数周时间才走到这一步。我的应用程序运行良好并被出售。我丢失了源代码，否则所有 J2ME-Polish 用户都会非常高兴。与黑莓、诺基亚、android 以及 windows ce 一起工作。

顺便说一句..我当时已经将整段代码发送给 J2ME-Polish 人，看起来他们没有发布。如果你真的想要所有的来源......去打扰他们。

# java - Android 转弯方向（不是导航）

> ID：10867448
> 
> 赞同：1
> 
> 时间：2012-06-03T02:28:52.170
> 
> 标签：java, android, html, google-api

我正在为 android 制作一个应用程序，我正在使用 Google Directions API 来获取和解析路线中的每一条腿。我正在地图上显示路线（已经在工作）

我想显示一个转弯方向的列表（尽管它们不会随着你的前进而前进，只是一个方向列表。

我有几个问题，首先，如何获得每条腿的描述？解析 JSON 让我得到这一行：

```
"html_instructions": "Head \u003cb\u003enorth\u003c/b\u003e on \u003cb\u003eS Morgan St\u003c/b\u003e toward \u003cb\u003eW Cermak Rd\u003c/b\u003e" 
```

Java 输出为：

```
Head <b>north</b> on <b>S Morgan St</b> toward <b>W Cermak Rd</b> 
```

有没有一种简单的方法可以将其解析为要在列表中显示的普通字符串？或者只是用“”替换html字符？

其次，如何根据数组的大小在地图视图的顶部显示具有半透明背景的列表？

编辑：期望的结果应该是这样的： ![在此处输入图像描述](../Images/2f7748a0325a60db70693d2c596d48b2.png)

只有他们使用带有固定数量的文本视图的 TableLayout。我想要这样的东西，最好是小一点的，它会显示所有，或者只是一些（并且能够改变）路线描述找不到关于这些问题的信息。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T03:04:16.263

> 有没有一种简单的方法可以将其解析为要在列表中显示的普通字符串？

可能最简单的方法是调用`Html.fromHtml(htmlString).toString()`.

> 二、如何根据数组大小显示透明列表？

~~“透明列表”到底是什么意思？我假设一个显示“空”项目的列表？您可能可以使用`null`任何应该不可见的项目填充数据集，然后您可以在`Adapter`. 或者，您可以例如使用 a `Map<String, Boolean>`，其中的值表示您是要在其中显示字符串（键） `ListView`还是隐藏它/使其透明。~~

**更新问题后编辑：**获得那种透明效果实际上非常简单。“矩形”只是一个单独`ViewGroup`的黑色背景颜色，包括透明度；例如`#55000000`。您可以使用前两个十六进制数字来更改透明度，从而更改视觉色调。

要在地图顶部显示路线信息，您需要使用 a`RelativeLayout`作为根（并可能为其设置半透明背景颜色）。之后，您可以使用您希望它显示的任何内容填充特定的 UI。例如，前几天我创建了类似的东西（作为给朋友的生日礼物），它将把他带到礼物的实际位置。我只是添加了上一个/下一个按钮来手动在导航提示之间移动。

（对不起，提示是荷兰语，但我相信你明白了）

![导航示例](../Images/4483f28403457d72859b112c11891592.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-12T17:43:44.797

我所做的一种简单方法是使用**Webview**并加载`HTML information`它。

例如 ：

1) 让下面给出的**HTML 指令是 Google 路线 API 的响应**

```
 String routeDirection =
                    "Head <b>southeast</b> on <b>Vennala High School Rd</b> toward <b>Evra Lane 9</b>" +
                    "<div style=\"font-size:0.9em\">Pass by Mangalayil Devi temple (on the right)</div>"; 
```

2)**在您的布局文件中添加一个 Web 视图**并在您的代码中引用它：

`WebView webViewDirections = (WebView)findViewById(R.id.webView);`

3）如下所示加载`html instruction`您的：`webview`

`webViewDirections.loadDataWithBaseURL(null, tempRouteDirection, "text/html", "utf-8", null);`

4）您甚至可以**自定义 HTML 信息（更改背景颜色、字体颜色..）**：

```
webViewDirections.getSettings();
        webViewDirections.setBackgroundColor(Color.TRANSPARENT);
        webViewDirections.getSettings().setJavaScriptEnabled(true);
        webViewDirections.setWebViewClient(new WebViewClient() {
            public void onPageFinished(WebView view, String url) {
                view.loadUrl(
                        "javascript:document.body.style.setProperty(\"color\", \"white\");"
                );
            }
        }); 
```

**注意：** 我之所以选择这个解决方案，是因为在我使用`Html.fromHtml`TextView 时，[某些信息会被破坏](https://stackoverflow.com/questions/13972940/android-html-fromhtml-dose-not-work-correctly-on-nested-text-style)。

# c# - 使用 Html Agility Pack 抓取网站。GET 的响应不符合预期

> ID：10867450
> 
> 赞同：1
> 
> 时间：2012-06-03T02:29:21.283
> 
> 标签：c#, asp.net, http

使用 System.Net.HttpRequest 我想在我的代码中模仿用户在以下搜索引擎上的搜索。

[http://www.scirus.com](http://www.scirus.com)

搜索 URL 的示例如下：

[http://www.scirus.com/srsapp/search?q=core+facilities&t=all&sort=0&g=s](http://www.scirus.com/srsapp/search?q=core+facilities&t=all&sort=0&g=s)

我有以下代码来执行 HTTP GET。注意我正在使用 HtmlAgilityPack。

```
protected override HtmlDocument MakeRequestHtml(string requestUrl)
{
    try
    {
        HttpWebRequest request = WebRequest.Create(requestUrl) as HttpWebRequest;
        request.UserAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)";
        HttpWebResponse response = request.GetResponse() as HttpWebResponse;

        HtmlDocument htmlDoc = new HtmlDocument();
        htmlDoc.Load(response.GetResponseStream());
        return (htmlDoc);

    }
    catch (Exception e)
    {
        Console.WriteLine(e.Message);
        Console.Read();
        return null;
    }
} 
```

其中“requestUrl”是上面显示的示例搜索 URL。

htmlDoc.DocumentNode.InnerHtml 的内容不包含搜索结果，并且看起来与将上面显示的示例搜索 URL 复制粘贴到浏览器中时所获得的搜索结果页面完全不同。

我猜这是因为你必须先有一个会话才能执行请求。有人可以建议是否有可行的方法来复制用户代理的行为？或者也许有更好的方法来实现“抓取”我不知道的搜索结果的目标？请提出建议。

Robots.txt 内容：

```
# / robots.txt file for http://www.scirus.com

User-agent: NetMechanic
Disallow: /srsapp/sciruslink

User-agent: *
Disallow: /srsapp/sciruslink
Disallow: /srsapp/search
Disallow: /srsapp/search_simple
Disallow: /search_simple
# for dev and accept server uncomment below line at Build time to disallow robots completely
##Disallow: / 
```

htmlDoc.DocumentNode.InnerHtml 的内容

![回复](../Images/b91d9d2a01ed157cb1fdad4f00d3bdcd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T02:38:45.513

您可能需要设置一个用户代理，例如

```
request.UserAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"; 
```

您还应该检查网站的 Robots.txt 文件以确保您受到欢迎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T06:35:07.077

好的，我实际上是用 webclient 测试的

```
 static void Main(string[] args)
    {
        WebClient client = new WebClient();
        client.Headers.Set("User-Agent", "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0");
        string str = client.DownloadString("http://www.scirus.com/srsapp/search?q=core+facilities&t=all&sort=0&g=s"); 
        byte[] bit = new System.Text.ASCIIEncoding().GetBytes(str);
        FileStream fil = File.OpenWrite("test.txt");
        fil.Write(bit,0,bit.Length);
    } 
```

这是下载的文件[http://pastebin.com/qswtgC4n](http://pastebin.com/qswtgC4n)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-10T02:04:02.927

确保您没有过度 ping 服务器，尤其是在加载文档的代码以前工作的情况下。您可能遇到了将您发送到 robots.txt 或类似页面的服务器规则。

# ajax - 如何使用 ajax、onchange 事件、重新加载到 SAME 页面制作表单

> ID：10867451
> 
> 赞同：0
> 
> 时间：2012-06-03T02:29:30.073
> 
> 标签：ajax, forms, session, onchange

我已经研究了一段时间，我不确定我是否以正确的方式进行，因为我根据示例设置的每个表单都不能满足我的需要。

我需要设置一个表格，它将：

*   从下拉菜单中选择时设置会话

*   不重新加载/刷新页面（我读过使用 AJAX 解决了这个问题）

*   提交并停留在同一页面上（感到困惑，因为大多数 AJAX 示例将其发送到不同的 process.php 页面，该页面据称是“不可见的”但它不会“停留”在同一页面上，它会重定向。

基本上，客户选择 1 到 10 的数量。如果他们选择“2”......它不会重新加载页面......但它确实设置了会话 [数量] = 2。应该很简单......但是我是否发布到与表单相同的页面？或 POST 到不同的页面并以某种方式重定向？

另外，我做的一项测试是每次都将我的“回声会话[数量]”粘贴到页面下方，例如 7、2、3、5 等，而不是替换它。

下面的代码部分来自一个将性别作为下拉菜单的示例。我只想让下拉菜单保持选中状态，并在提交按钮旁边回显选择。这是出于测试目的，以便我了解发生了什么。一旦发生这种情况，我就可以完成表格的其余部分。它目前不会回显任何内容。

```
<? ob_start();?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<?php session_start(); ?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Submit  Form with out refreshing page Tutorial</title>

<!-- JavaScript -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script>
<script type="text/javascript" >
$(function() {
$(".submit").click(function() {
var gender = $("#gender").val();
var dataString = 'gender=' + gender;
if(gender=='')
{
$('.success').fadeOut(200).hide();
$('.error').fadeOut(200).show();
}
else
{
$.ajax({
type: "POST",
url: "join.php",
data: dataString,
success: function(){
$('.success').fadeIn(200).show();
$('.error').fadeOut(200).hide();
}
});
}
return false;
});
});
</script>
<style type="text/css">
body{
}
.error{
color:#d12f19;
font-size:12px;
}
.success{
color:#006600;
font-size:12px;
}
</style>
</head>
<body id="public">
<div style="height:30px"></div>
        <div id="container">
                    <div style="height:30px"></div>

                    <form method="post" name="form">
                        <select id="gender" name="gender">
                        <option value="">Gender</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        </select>
                        <div>
                        <input type="submit" value="Submit" class="submit"/>
                        <span class="error" style="display:none"> Please Enter Valid Data</span>
                        <span class="success" style="display:none"> Your gender is <?php echo $_SESSION['gender'];?></span>
                        </div>
                    </form>

        <div style="height:20px"></div>
        </div><!--container-->
</body>
</html>
<? ob_flush(); ?> 
```

这是我的 POST 页面，名为 join.php （在示例中调用它，所以我现在就使用它）

```
<?php
session_start(); 
if($_POST)
{
$gender = $_POST['gender'];
$_SESSION['gender'] = $gender;
}
else
{ }
?> 
```

# selenium - 如何使用 selenium webdriver 从占位符中获取电子邮件

> ID：10867452
> 
> 赞同：0
> 
> 时间：2012-06-03T02:29:41.110
> 
> 标签：selenium, webdriver

如何使用 java 从 selenium webdriver 中的以下代码中获取值

```
<script id="metamorph-0-start" type="text/x-placeholder"/>
test@gmail.com
<script id="metamorph-0-end" type="text/x-placeholder"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T03:41:17.737

我可能很想回答：

```
String email = driver.findElement(By.xpath("id('metamorph-0-start')/..')")).getText(); 
```

但这只有在没有其他文本兄弟/后代的情况下才有效。

我将假设一些事情，一个是您的 html 实际上是：

```
<script id="metamorph-0-start" type="text/x-placeholder"></script>
test@gmail.com
<script id="metamorph-0-end" type="text/x-placeholder"></script> 
```

要真正收到电子邮件，我会使用 Javascript 执行此操作：

```
String email = (String) ((JavascriptExecutor)driver).executeScript(
    "return arguments[0].nextSibling.textContent.split('\\n')[1]",
    driver.findElement(By.id("metamorph-0-start"))); 
```

您也可以在 Java 中而不是在 Javascript 中进行换行符剥离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T08:17:03.087

如果没有更多关于页面（或包含元素）的知识，我认为 TunaBum 有最好的答案。

也就是说，基于这是页面上唯一的电子邮件地址（或者更确切地说是带有 at-sign int 的文本）的假设，您可以这样做

```
String email = driver.findElement(By.xpath("//*[contains(text(),'@')]")).getText(); 
```

获取`@`在其文本中包含 a 的元素的文本。

如果您的包含元素中有多个`metamorph-number-start/end`，并且每个都包含一些文本，那么 JS 是您唯一的路径，因为`WebDriver`还不能使用文本节点。

# c++ - 在这种情况下如何正确执行 const_cast ？

> ID：10867455
> 
> 赞同：0
> 
> 时间：2012-06-03T02:30:57.740
> 
> 标签：c++

我有一个功能

```
static bool Validate(const char& letter, string& aWord) 
```

我需要调用它

```
Validate(letter, aWord); // where aWord is const 
```

在这种情况下 const_cast 的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T02:36:20.647

如果您绝对确定该函数不会修改字符串，您可以这样做：

```
Validate (letter, const_cast<std::string &>(aWord)); 
```

但是，如果可以假设将签名更改为`const`，则更安全的做法是复制字符串并传递副本，尽管这是不必要的副本。

```
std::string copyOfAWord = aWord;
Validate (letter, copyOfAWord); 
```

如果它确实改变了某些东西，你的副本会得到结果，但它会首先破坏你的逻辑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T02:44:04.640

正确的方法是**不要**施放它。

这里的签名

```
static bool Validate(const char& letter, string& aWord) 
```

就是说`Validate()`可以改变参数`aWord`。因此，向它传递一个将要发生变异的 const 值是未定义的行为（如果它发生了变异（参见最后一段））。

如果您**确定**它`Validate()`不会变​​异，`aWord`那么**仍然不要**抛弃 constness。在这种情况下，更改其签名以反映所提供的保证。

不是 const的事实`aWord`意味着它可以 mutate `aWord`。即使它在这个版本中没有发生变异，未来可能会有人出现并改变它。然后你的程序将以一种可怕的方式中断，以至于无法找到错误。

如果你抛弃了 constness，那么你做错了什么。

唯一的解决方案（如果您不能更改界面）是通过非成本版本。既然你没有；你应该创建一个：

```
std::string    aWordTmpCopy(aWord);
Validate(letter, aWordTmpCopy); 
```

# python - 带有return语句的Python调用函数

> ID：10867456
> 
> 赞同：0
> 
> 时间：2012-06-03T02:31:00.830
> 
> 标签：python

我有下面的部分，它创建了几个人对象并在这些对象上应用了一些方法。

```
class Person:
    def __init__(self, name, age, pay=0, job=None):
        self.name = name
        self.age  = age
        self.pay  = pay
        self.job  = job

    def lastname(self):
        return  self.name.split()[-1]

    def giveraise(self,percent):
        return self.pay *= (1.0 + percent)

if __name__ == '__main__':
    bob = Person('Bob Smith', 40, 30000, 'software')
    sue = Person('Sue Jones', 30, 40000, 'hardware')
    people = [bob,sue]
    print(bob.lastname())
    print(sue.giveraise(.10)) 
```

一旦我运行这个程序，这就是输出——

语法错误：无效的语法

但是当我使用下面的代码运行时，我没有任何问题，

```
if __name__ == '__main__':
    bob = Person('Bob Smith', 40, 30000, 'software')
    sue = Person('Sue Jones', 30, 40000, 'hardware')
    people = [bob,sue]
    print(bob.lastname())
    sue.giveraise(.10)
    print(sue.pay) 
```

两种情况有什么区别

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T02:34:15.897

`*=`是赋值，赋值是 Python 中的语句，而不是表达式。尝试：

```
self.pay *= (1.0 + percent)
return self.pay 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T02:36:50.833

即使在第二个版本中，我也会收到无效的语法错误；我不知道你是如何让它工作的，但你一定是改变了`giveraise`功能。在 Python 中，赋值，包括那些使用 mutator 的赋值，`*=`是语句，而不是表达式；他们没有价值。由于它们没有价值，因此从函数中返回它们是没有意义的，因此会出现错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T02:34:12.453

你的问题是这个函数（在这两种情况下我都得到一个错误）：

```
def giveraise(self,percent):
    return self.pay *= (1.0 + percent) 
```

将其更改为此，它将起作用：

```
def giveraise(self,percent):
    self.pay *= (1.0 + percent)
    return self.pay 
```

我不完全确定Python*为何*会引发语法错误，但我确实知道这是可行的。

# ruby-on-rails - 活动记录 where 方法而不是

> ID：10867457
> 
> 赞同：3
> 
> 时间：2012-06-03T02:31:23.753
> 
> 标签：ruby-on-rails, ruby, activerecord

我似乎无法在任何地方找到答案。我知道我可以做到：

```
Item.where(:color => 'red') 
```

获取所有红色项目，但是如何获取所有颜色不是红色的项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T02:33:07.730

它是旧学校格式和新 Arel 格式的混合体。

```
Item.where("color != ?", 'red') 
```

# c - 有没有一种简单的方法可以从数组中删除项目？

> ID：10867458
> 
> 赞同：2
> 
> 时间：2012-06-03T02:31:32.543
> 
> 标签：c

我有两个清单。

```
char *name[] =  {"RGS", "O", "NRGY", "SIG", "BML-O", "BHI", "KSU", "ORN"};
char *name_to_remove[] =  {"RGS", "O", "NRGY"}; 
```

有没有一种有效的方法来获取项目列表并将其从另一个列表中删除？我已经实现了自己的版本，但我认为它的效率很低。它基本上是复制名称列表，然后使用嵌套的 for 循环遍历重复的名称和 name_to_remove 列表并将任何重复的项目标记为“删除”。最后，我浏览列表并复制所有项目，但值为“删除”的项目除外。它非常丑陋，我怀疑效率低下。我遇到的一个问题（以前没有处理过）是我不确定如果数组在内存中的大小是固定的，是否可以从数组中删除一个项目，所以我最初试图改变值，然后将值添加到新数组中（与原始数组大小相同 - 我要删除的项目数组的大小）。

我看不到更好的方法，memcmp 似乎很有希望，因为它可以比较两个列表，但我无法弄清楚它是如何适合的。我知道 C 不是 python，但这是我在 python 中干净利落的方法：

```
for item in name_to_remove:
    name_copy.remove(item) 
```

也许在幕后，python 命令正在执行与我一样多的循环，但我想我会问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T02:39:57.260

答案是使用适当的数据结构。Python 列表绝对不是作为纯 C 字符串数组实现的（只是因为您可以在 Python 列表中存储不同类型的对象）。因此，您要查找的数据结构可能是[*链表*](http://en.wikipedia.org/wiki/Linked_list)或[*哈希表*](http://en.wikipedia.org/wiki/Hashtable)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T02:40:59.170

> 它基本上是复制名称列表，然后使用嵌套的 for 循环遍历重复的名称和 name_to_remove 列表并将任何重复的项目标记为“删除”。最后，我浏览列表并复制所有项目，但值为“删除”的项目除外。

无需标记任何内容，您可以只复制您在其中找到的任何不存在的项目`name`并将*其*存储`name_to_remove`在新数组中，然后丢弃旧`name`数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T03:19:39.510

如果字符串的顺序无关紧要，您可以对两个数组进行排序以查找重复项，如下所示：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define ARR_SIZE(array) sizeof(array)/sizeof(const char *)

int compare (const void * a, const void * b) {
    return strcmp(*((const char**)a), *((const char**)b));
}

int main(void) {
    const char *name[] =  {"RGS", "O", "NRGY", "SIG", "BML-O", "BHI", "KSU", "ORN"};
    const char *name_to_remove[] =  {"RGS", "O", "NRGY"};
    int i = 0, j = 0;
    qsort(name, ARR_SIZE(name), sizeof(const char*), compare);
    qsort(name_to_remove, ARR_SIZE(name_to_remove), sizeof(const char*), compare);
    while (i != ARR_SIZE(name) && j != ARR_SIZE(name_to_remove)) {
            int diff = strcmp(name[i], name_to_remove[j]);
            if (diff == 0) {
                    name[i] = NULL;
                    i++;
                    j++;
            } else if (diff < 0) {
                    i++;
            } else {
                    j++;
            }
    }
    for (i = 0 ; i != ARR_SIZE(name) ; i++)
            if (name[i])
                    printf("%s\n", name[i]);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T02:40:57.113

我想python版本并不比你的代码效率高。

也就是说，您当然可以改进您的实施。请记住，C 数组实际上只是一块内存，带有一堆指向字符串开头的指针。由于您没有创建新字符串，因此您始终可以重用字符串指针。

从概念上讲，循环遍历您的数组，如果值在要删除的列表中，则将指针设置为 null。然后使用 malloc() 创建一个适当大小的新数组。遍历旧数组，将非空指针复制到新数组。

这样你就有了 2 次循环迭代和一个 malloc。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T02:44:17.743

如果您在编译时分配第一个数组，那么它的大小是固定的，我相信随后不可能通过“删除”选定的元素来回收任何内存。我建议要么实现一个您可以动态分配的链表，然后`free()`在您希望删除项目时实现部分，或者更好的是，实现一个更有效的数据结构，例如二叉搜索树。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-03T02:40:51.253

您可以制作一个哈希映射，然后遍历一个数组并通过测试`mapOfRemovableWords.contains(words[i])`并使用它来决定是否应该将元素复制到一个新数组（或自身的前面）。

您还可以对两个数组进行排序，然后同时遍历它们。使用这样一个事实，即如果您处于某个单词大于另一个列表中的当前单词的位置，那么它不在另一个列表中。你迭代一个，然后决定是否需要迭代另一个，然后重复，直到你完全完成了两个。

# rest - Google Shopping REST API 按类别限制

> ID：10867464
> 
> 赞同：4
> 
> 时间：2012-06-03T02:32:40.890
> 
> 标签：rest, google-shopping-api

我正在尝试按类别限制 Google 购物请求（在这种情况下，我只希望返回实际的电影/DVD/蓝光）..

这是我要传递的内容：

[https://www.googleapis.com/shopping/search/v1/public/products?country=US&q=Terminator&key=MY_KEY](https://www.googleapis.com/shopping/search/v1/public/products?country=US&q=Terminator&key=MY_KEY)

其中 MY_KEY 是我从中获得的密钥： [https ://code.google.com/apis/console/#project:396093783634:access](https://code.google.com/apis/console/#project:396093783634:access)

我希望我返回的结果看起来更像这样：

[https://www.google.com/webhp?rlz=1C1CHFX_enUS459US459&sourceid=chrome-instant&ie=UTF-8&ion=1#q=terminator&hl=en&safe=off&rlz=1C1CHFX_enUS459US459&tbm=shop&source=lnt&tbs=cat:839&sa=X&ei=rMvKT9aqBoac2QXLn9CDQQvw= on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=8fc3a267521f95b1&ion=1&biw=1920&bih=955](https://www.google.com/webhp?rlz=1C1CHFX_enUS459US459&sourceid=chrome-instant&ie=UTF-8&ion=1#q=terminator&hl=en&safe=off&rlz=1C1CHFX_enUS459US459&tbm=shop&source=lnt&tbs=cat:839&sa=X&ei=rMvKT9aqBoac2QXLn9HaCw&ved=0CDQQpwU&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=8fc3a267521f95b1&ion=1&biw=1920&bih=955)

我需要作为参数传入什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:16:15.060

从[https://developers.google.com/shopping-search/v1/reference-request-parameters](https://developers.google.com/shopping-search/v1/reference-request-parameters)看起来您可以指定：

restrictBy=category=categoryName

但 categoryName 必须来自提供的分类，并且您只能在访问 Commerce Search 而不是公共产品列表时提供分类。Google 购物本身可能内置了默认分类法，但 API 文档表明 API 用户无法使用该分类法。

所以：不支持。

**编辑：** [Google工程师确认目前不支持的讨论线程](https://groups.google.com/forum/?fromgroups#!topic/google-search-api-for-shopping/ndUxvH4i3mU)

# ruby-on-rails - 在 Rails 视图中查找模式并替换为链接的正确方法

> ID：10867466
> 
> 赞同：5
> 
> 时间：2012-06-03T02:32:54.767
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我的目标是在段落中找到类似“b1234”的内容并将其替换为：

```
<a href=http://bugtracker.com/bug/1234>b1234</a> 
```

我用普通的红宝石做了这个：

```
"I fixed b1234 today".gsub(/(b([0-9]+))/i, '<a href=http://bugtracker.com/bug/\2>\1</a>') 
```

它输出：

```
=> "I fixed <a href=http://bugtracker.com/bug/1234>b1234</a> today" 
```

我的rails视图中有以下内容：

```
<%= post.content %> 
```

注意：创建帖子时，我不会将 HTML 链接代码存储在我的数据库中。

如果我做：

```
<%= post.content.gsub(...) %> 
```

我在输出文件中得到了转义的 html：

```
&lt;a href= ... instead of <a href= ... 
```

...而且**我想要这种行为**，我不希望用户发布 HTML（iframe 会很可怕！）。

*但是*，我怎样才能在不牺牲安全性的情况下仍然获得我想要的查找和替换功能？也许是一种 Javascript 方法？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T03:06:38.540

将等号加倍。`<%== post.content.gsub(...) %>`. 如果用户也可能在此内容中编写 HTML，那么您需要对其进行[清理](http://wonko.com/post/sanitize)，以便仅允许指定的 HTML 标记，例如。

编辑 | 实际上，如果您要替换的搜索字符串不包含 HTML 特殊字符，您可以将字符串转义，*然后*执行 gsub：

```
<%== h(post.content).gsub(...) %> 
```

# backbone.js - 骨干本地存储“未定义不是函数”

> ID：10867467
> 
> 赞同：6
> 
> 时间：2012-06-03T02:32:59.923
> 
> 标签：backbone.js, local-storage, backbone-local-storage

我正在使用[`Backbone.LocalStorage`](https://github.com/jeromegn/Backbone.localStorage)：http: **[//jsfiddle.net/jiewmeng/grhz9/3/](http://jsfiddle.net/jiewmeng/grhz9/3/)**

```
$(function() {
    console.log(Backbone.LocalStorage); // undefined!!
    var Todo = Backbone.Model.extend({});
    var Todos = Backbone.Collection.extend({
        model: Todo,
        localStorage: new Backbone.LocalStorage("todos")
    });
});​ 
```

第一个`console.log()`给`undefined`. `localStorage: ...`然后线路出现错误

> 未捕获的类型错误：未定义不是函数

预期自是`Backbone.LocalStorage`但`undefined`为什么呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T02:44:38.900

`backbone.localStorage-min.js`您正在加载：

> [http://cdnjs.cloudflare.com/ajax/libs/backbone-localstorage.js/1.0/backbone.localStorage-min.js](http://cdnjs.cloudflare.com/ajax/libs/backbone-localstorage.js/1.0/backbone.localStorage-min.js)

看起来它已经过时并且根本没有定义`Backbone.LocalStorage`。您正在使用的版本`backbone.localStorage-min.js`定义`window.Store`而不是`Backbone.LocalStorage`. 如果你切换到那个（[http://jsfiddle.net/ambiguous/grhz9/5/](http://jsfiddle.net/ambiguous/grhz9/5/)）：

```
var Todos = Backbone.Collection.extend({
    model: Todo,
    localStorage: new Store("todos")
}); 
```

然后你就可以通过建立你的`Todos`收藏。我不知道当你实际尝试使用它时事情会如何运作。“Sun Aug 14 2011 09:53:55 -0400”在互联网时代几乎是永远的，所以这个版本相当古老。

如果从 Github 切换到最新版本：

> [https://raw.github.com/jeromegn/Backbone.localStorage/master/backbone.localStorage-min.js](https://raw.github.com/jeromegn/Backbone.localStorage/master/backbone.localStorage-min.js)

您会看到 JavaScript 中存在一些差异，并且在您使用时一切都会开始工作`new Backbone.LocalStorage('todos')`：

> [http://jsfiddle.net/ambiguous/grhz9/4/](http://jsfiddle.net/ambiguous/grhz9/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T06:37:50.073

The other answer is correct - 1.0 is out of date.

I've updated backbone.localstorage to the latest version:

[http://cdnjs.cloudflare.com/ajax/libs/backbone-localstorage.js/1.1.0/backbone.localStorage-min.js](http://cdnjs.cloudflare.com/ajax/libs/backbone-localstorage.js/1.1.0/backbone.localStorage-min.js) (production)

[http://cdnjs.cloudflare.com/ajax/libs/backbone-localstorage.js/1.1.0/backbone.localStorage.js](http://cdnjs.cloudflare.com/ajax/libs/backbone-localstorage.js/1.1.0/backbone.localStorage.js) (dev)

Hope that helps!

# xna - XNA - 每次执行时鼠标坐标都不同

> ID：10867469
> 
> 赞同：1
> 
> 时间：2012-06-03T02:33:17.630
> 
> 标签：xna

```
 private void Main_Step()
    {
        MouseState mouseState = Mouse.GetState();
        double x_pixel, y_pixel;

        device.Clear(Color.CornflowerBlue);
        spriteBatch.Begin(SpriteSortMode.Deferred, BlendState.AlphaBlend);
        spriteBatch.DrawString(testFont, "(" + mouseState.X + ", " + mouseState.Y, new Vector2(500, 50), Color.Yellow);
        spriteBatch.End();

    } 
```

每当我执行 XNA 程序时，即使我什么都不移动鼠标，鼠标坐标 X、Y 也在不断变化。我认为它应该被修复，因为我没有移动鼠标。

这个问题使鼠标事件变得困难。

有什么问题？我的屏幕分辨率是 1920 x 1080。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:18:38.480

MouseState.X 和 MouseState.Y 表示鼠标相对于窗口左上角的值。它们发生变化的原因可能是因为在 Windows 中，每次运行程序时窗口位置都会发生变化。您可以通过每次运行时截取屏幕截图来检查是否是这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T02:44:06.513

MouseState.X 和 MouseState.Y 是鼠标相对于窗口左上角的坐标。如果它们发生变化，则意味着您的窗口移动或鼠标移动。没有其他可能的解释。

# ios - 从此代码返回 UIImageView？

> ID：10867470
> 
> 赞同：0
> 
> 时间：2012-06-03T02:33:18.590
> 
> 标签：ios, uiimageview, cgcontext, rounding

我从这个链接中找到了以下代码：iphone - How to draw a rounded rectangles in Core Graphics / Quartz 2D？- 堆栈溢出

几乎这是代码：

```
- (UIImageView*)roundImageView:(CGFloat)rad {

    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSetRGBStrokeColor(context, 1.0, 1.0, 1.0, 1.0); 

    CGRect rrect = ivprofilePicture.bounds;

    CGFloat radius = rad; 

    CGFloat minx = CGRectGetMinX(rrect), midx = CGRectGetMidX(rrect), maxx = CGRectGetMaxX(rrect); 

    CGFloat miny = CGRectGetMinY(rrect), midy = CGRectGetMidY(rrect), maxy = CGRectGetMaxY(rrect); 

    CGContextMoveToPoint(context, minx, midy); 

    CGContextAddArcToPoint(context, minx, miny, midx, miny, radius); 

    CGContextAddArcToPoint(context, maxx, miny, maxx, midy, radius); 

    CGContextAddArcToPoint(context, maxx, maxy, midx, maxy, radius); 

    CGContextAddArcToPoint(context, minx, maxy, minx, midy, radius); 

    CGContextClosePath(context); 

    CGContextDrawPath(context, kCGPathFillStroke);

    UIImageView *imageView;

    return imageView;

} 
```

然后我会这样称呼它：

```
myImageView = [self roundImageView:10]; 
```

问题是，我如何从这段代码返回 UIImageView ？我已经创建了一个接收半径参数并返回 UIImageView 的方法。上面代码中的矩形也已经设置为原始 UIImageView 的边界。

但是，我只是不知道如何从这段代码中返回带有圆角的 UIImageView。

有没有人有任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T03:18:42.933

既然你开始了一个图像上下文，并在上面画了一些东西，我认为它类似于你从当前屏幕截取屏幕截图的方式？

```
UIImage* imageView = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

`initWithImage`然后按照正常返回一个新的 UIImageView 。但是，我认为每次绘制图像时都不需要创建一个新的 UIImageView 。您可以返回`UIImage*`并回收 UIImageView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T02:58:12.440

创建 UIImageView 时，请尝试执行以下操作：

```
UIImageView* imageView = [[[UIImageView alloc] init /*or whatever other init method*/] autorelease];
return imageView; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T02:54:08.947

[为所有 UIImageViews 添加圆角](https://stackoverflow.com/questions/2171506/add-rounded-corners-to-uiimageview)

[UIImage圆角](https://stackoverflow.com/questions/262156/uiimage-rounded-corners)

以下是我认为与您的问题相关的一些链接。

# javascript - Javascript/AJAX 适用于主页但不适用于辅助页面

> ID：10867471
> 
> 赞同：0
> 
> 时间：2012-06-03T02:33:43.603
> 
> 标签：javascript, ajax, wordpress

在我刚刚为客户创建的 4 个网站上使用 Wordpress。我有一个带有脚本的侧边栏，该脚本使用 Google Maps API 并估算出租车费用。该脚本在主页上运行良好，但在任何辅助页面上都不起作用。什么会导致这种行为？其中一个站点是[http://yellowcaboffolsom.net](http://yellowcaboffolsom.net)。在主页上试用计算器，然后在任何其他页面上试用。我被这个难住了。杰克乙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T03:42:35.997

打开控制台，点击按钮，它会告诉你问题。

```
Uncaught ReferenceError: pickUp is not defined /make-taxi-reservations/?destinationF=1689+Arden+Way%2C+Sacramento%2C+CA&destinationF=1600+Exposition+Boulevard%2C+Sacramento%2C+CA&address1=1689+Arden+Way%2C+Sacramento%2C+CA&address2=1600+Exposition+Boulevard%2C+Sacramento%2C+CA#:220
Uncaught TypeError: Cannot read property 'value' of undefined myScript.js:9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T03:03:42.357

我不确定这是否是您的全部问题，但在该站点上，函数 book2() 正在为名为 pickUp 的变量赋值，但您初始化的变量名为 pickUP（带有大写的“P”。我d 说第一步是使变量名称匹配，然后您可以查看其他问题是否仍然重现。

# java - 一个用java写的java解释器

> ID：10867473
> 
> 赞同：2
> 
> 时间：2012-06-03T02:33:54.983
> 
> 标签：java, syntax, tree, interpreter, javacc

我想用 Java 编写一个 Java 解释器，目的是为该语言添加一些其他功能。

我想知道是否已经存在一些使用 javacc 用 Ja​​va 编写的 Java 解释器。那会很酷。

我已经在javacc网站上下载了java 1.5语法和Abstract Syntax Tree(AST)，但是问题是AST是刚建好的，还没有填。事实上它什么也没做。

你知道任何用 javacc 编写的开源 Java 解释器吗？

谢谢，

洛伊克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T03:22:40.993

> 你知道任何用 javacc 编写的开源 Java 解释器吗？

简短的回答是不，我不知道。

我花了几分钟谷歌搜索，找不到任何相关的东西。但是，也有使用 JavaCC 用 Ja​​va 编写的其他语言的解释器示例。我还看到了对 Compiler Construction 课程的引用，该课程已经（已经）为“microJava”语言编写了解释器作为家庭作业。

但是想想看。为什么有人会努力用 Java 为 Java 编写编译器/解释器？构建现有工具链已经完成的东西需要做很多工作。甚至更多的努力使它可供其他人使用。这可能解释了为什么你找不到一个。

我建议您从 OpenJDK 代码库开始进行实验……或者通过实现生成字节码或 Java 源代码的编译器。

* * *

Dave Newton 提到的 Polyglot 系统（在上面的评论中）是一个用于进行 Java 语言扩展的框架，最终生成常规的 Java 源代码。这很有趣，但我看不出它在这里会有什么帮助。

# java - 如何从接口类调用 addInterest() 方法来更新存储在 Bankaccount 数组列表中的 currentbalance

> ID：10867479
> 
> 赞同：-3
> 
> 时间：2012-06-03T02:34:48.627
> 
> 标签：java

```
public abstract class BankAccount
{

    private String firstName;
    private String surname;
    private static int nxtID = 1000;
    private int accNo;
    private String address;
    private String phnNo;
    protected double overdraftLimit;
//    private PassBookAccount p;
//    private InvestmentAccount i;

    public BankAccount(String f,String l,String ad,String p)
    {
        this.accNo = nxtID++;
        this.firstName = f;
        this.surname = l;
        this.address = ad;
        this.phnNo = p;
        this.overdraftLimit = 1000;

    }

    public String getfName()
    {
        return this.firstName;
    }

    public String getsName()
    {
        return this.surname;
    }

    public String getPhn()
    {
        return this.phnNo;
    }

    public int getAccNo()
    {
        return this.accNo;
    }

    public String getAddress()
    {
        return this.address;
    }

    public abstract void withdraw(double d);
    public abstract void deposit(double d);

    public void updateOverDraft(double ol)
    {
        this.overdraftLimit = ol;
    }

    @Override
    public String toString()
    {
        return "\n#Account NO\t\t#First Name\t\t#Surname\t\t#Phone No\t\t#Address\n" + this.accNo+ "\t\t" +this.firstName
                +"\t\t" + this.surname + "\t\t" + this.phnNo + "\t\t" + this.address ;
    }

}

public abstract class SavingsAccount extends BankAccount
{

    private double WITHDRAW_FEE = 5.00;

    public SavingsAccount(String f,String l,String ad,String p)
    {
        super(f,l,ad,p);

    }

    public abstract void addInterest();

    public double getWithFee()
    {
       return this.WITHDRAW_FEE;
    }

}

public class ChequeAccount extends BankAccount
{

     private double openingbalance;
    //private double overdraftLimit;
    private double currentBal;

    public ChequeAccount(String f,String s,String ad,String p,double op,double ol)
    {
        super(f,s,ad,p);
        this.openingbalance = op;
        if(ol > super.overdraftLimit)
        {
            super.overdraftLimit = ol;
        }
        this.currentBal = this.openingbalance;
    }

    public double getCurrentBal() {
        return currentBal;
    }

    public void setCurrentBal(double currentBal) {
        this.currentBal = currentBal;
    }

    @Override
    public void deposit(double d)
    {
        this.currentBal += d;
        JOptionPane.showMessageDialog(null, "Your account balance is $:" + this.currentBal );
    }

    @Override
    public void withdraw(double d)
    {
        double maxOverDraft = -(super.overdraftLimit);
        double tempBal = this.currentBal;

        tempBal -= d;
        if(tempBal >= maxOverDraft)
        {
            this.currentBal  = tempBal;
            JOptionPane.showMessageDialog(null, "Your account balance is $:" + this.currentBal);
        }
        else
        {
            JOptionPane.showMessageDialog(null, "Your don't have sufficient money!!");
        }

    }

     public String toString()
    {
        return super.toString() + "\nCurrent Balance:" + this.currentBal + "\nOverdraft  Limit:" + this.overdraftLimit+"\n";
    }

}

public class PassBookAccount extends SavingsAccounts
{

     private double passInterest = 0.05;
    private double openingBlance;
    private double currentBalance;

    public PassBookAccount(String f,String l,String ad,String p,double op)
    {
        super(f,l,ad,p);
        this.openingBlance = op;
        this.currentBalance = this.openingBlance;

    }

    @Override
    public void addInterest()
    {
        this.currentBalance += this.currentBalance * this.passInterest; 
    }

    public double getBalance()
    {
        return this.openingBlance;
    }

    @Override
    public void deposit(double d)
    {
        this.currentBalance += d;
        JOptionPane.showMessageDialog(null, "Your account balance is $:" + this.currentBalance );
    }

    @Override
    public void withdraw(double d)
    {
        if(this.currentBalance > d)
        {
            this.currentBalance -= d + super.getWithFee();
            JOptionPane.showMessageDialog(null, "Your account balance is $:" + this.currentBalance );
        }
        else
        {
            JOptionPane.showMessageDialog(null, "Your don't have sufficient money!!");
        }
    }

    public double getPassInt()// retun PassbookAccount interest rate;
    {
        return this.passInterest;
    }

    public String toString()
    {
        return super.toString() + "\nCurrent Balance:" + this.currentBalance + "\n";
    }

}

public class InvestmentAccount extends SavingsAccount
{

    private double investInterest = 0.06;
    private double openingBlance;
    private double currentBal;
    private double minDep;
    private double minWith;

    public InvestmentAccount(String f,String s,String ad,String p,double op)
    {
        super(f,s,ad,p);
        this.openingBlance = op;
        this.currentBal = this.openingBlance;
        this.minDep = 1000;
        this.minWith = 1000;
    }

    @Override
    public void deposit(double d)
    {
        this.currentBal += d;
        JOptionPane.showMessageDialog(null, "Your account balance is $:" + this.currentBal );
    }

    @Override
    public void withdraw(double d)
    {
        if(this.currentBal > d)
        {
            this.currentBal -= d + super.getWithFee();
            JOptionPane.showMessageDialog(null, "Your account balance is $:" + this.currentBal );
        }
        else
        {
            JOptionPane.showMessageDialog(null, "Your don't have sufficient money!!");
        }
    }

    @Override
    public void addInterest()
    {
        if(this.currentBal > 100000)
        {
            this.investInterest = 0.08;
            this.currentBal += this.currentBal * this.investInterest; 
        }
        else
        {
            this.currentBal += this.currentBal * this.investInterest; 
        }
    }

    public double getMinDep()
    {
        return this.minDep;
    }

    public double getMinWith()
    {
        return this.minWith;
    }

    public double getInvInt() //return Investment account interest rate
    {
        return this.investInterest;
    }

    public String toString()
    {
        return super.toString() + "\nCurrent Balance:" + this.currentBal + "\n";
    }

}

import javax.swing.*;
import java.util.*;
public class Interface
{

     private static ArrayList<BankAccount> bnk = new ArrayList<BankAccount>();

    private static  PassBookAccount p;
    private static  InvestmentAccount invs;
    private static  ChequeAccount ch;

    public static void main(String[] args) 
    {
        int choice  = mainMenu();

        while(choice != 8)
        {
            switch (choice)
            {
                case 1: 
                    int choice2 = createAccount();
                    subMenu(choice2);
                    break;
                case 2:
                    deposit();
                    break;
                case 3:
                    withdraw();
                    break;
                case 4:
                    updateOverdraft();
                    break;
                case 5:
                    addInterest();
                    break;
                case 6:
                    printBalance();
                    break;
                case 7:
                    printAll();
                    break;
                case -99:
                    JOptionPane.showMessageDialog(null, "You must Enter value 1 - 8",
                                                  "Error", JOptionPane.ERROR_MESSAGE);
                    break;
                case -100:
                    JOptionPane.showMessageDialog(null, "You clicked cancel");
                    break;
                case -101:
                    JOptionPane.showMessageDialog(null, "You must Enter value 1 - 8",
                                                  "Error", JOptionPane.ERROR_MESSAGE);
                    break;
                default:
                    JOptionPane.showMessageDialog(null, "Error - enter value again",
                                                  "Error", JOptionPane.ERROR_MESSAGE);
                    break;
            }//end switch
            choice  = mainMenu();
        }//end while  
        System.exit(0);
    }

    public static int mainMenu()
    {

        String menu = "Chadstone Community bank Menu\n\n1\. Create Account\n2\. Deposite\n3\. Withdraw\n4\. Update Overdrafed\n5\. Add Interest\n.6 Print Balance\n7\. Print All\n8\. Quit ";
        String userSelection = JOptionPane.showInputDialog(null, menu, "Chadstone Community Bank",
                                                           JOptionPane.INFORMATION_MESSAGE);
        int option = validateSelection(userSelection);
        return option;
    }

    public static int validateSelection(String userSelection)
    {
        //clicked cancel btn
        if(userSelection == null)

            return -100;
        //click enter without any value - zero   
        if(userSelection.length() < 1)

            return -99;
        //entered more than 1 character
        if(userSelection.length() > 1)
            return -101;
        //entered less than 1 or greater than 8
        if((int)userSelection.charAt(0) < 49 || (int)userSelection.charAt(0) > 56 )
            return -101;
        else
            return Integer.parseInt(userSelection);

    } 

    //sub menu
    public static int createAccount()
    {

        String subMenu = "Chadstone Community bank Menu\n\n1\. Create Cheque account\n2\. Create PassBook account\n3\. Create Investment account\n4\. Return to Main Menu";
        String userSelection2 = JOptionPane.showInputDialog(null,subMenu, "Chadstone Community Bank",
                                                           JOptionPane.INFORMATION_MESSAGE);
        int option2 = validateSelection(userSelection2);
        return option2;
    }

    //Deposit cash to an account
    public static void deposit()
    {
         String strAcc = JOptionPane.showInputDialog("Please Enter The Account number:");
        while(!(Validation.validateAccountNo(strAcc)))
        {
            strAcc = JOptionPane.showInputDialog("Error!!\nRe-Enter the Account Number");
        }
        int acc = Integer.parseInt(strAcc);

        String strDep = JOptionPane.showInputDialog("Enter the Deposit amount");
         while(!(Validation.validateDeposit(strDep)))
        {
            strDep = JOptionPane.showInputDialog("Error!!\nRe-Enter the Deposit amount");
        }
        double amount = Double.parseDouble(strDep);
        int i = 0;
        boolean flag =  false;

        if(bnk.isEmpty())
        {
            JOptionPane.showMessageDialog(null, "There are no accounts created");
        }
        else
        {
            for(BankAccount b: bnk)
            {

                if(b.getAccNo() == acc)
                {
                    b = bnk.get(i);
                    if(b instanceof ChequeAccount)
                    {
                        b.deposit(amount);
                    }
                    else if(b instanceof PassBookAccount)
                    {
                        b.deposit(amount);
                    }
                    else
                    {
                        b.deposit(amount);
                    }
                    flag = true;
                    break;

                }
                else
                {
                    i++;
                }

            }
            if(flag == false)
            {
                JOptionPane.showMessageDialog(null, "Wrong Account number!!");

            }
        }

    }

    //Withdraw cash from an account
    public static void withdraw()
    {
        String strAcc = JOptionPane.showInputDialog("Please Enter The Account number:");
        while(!(Validation.validateAccountNo(strAcc)))
        {
            strAcc = JOptionPane.showInputDialog("Error!!\nRe-Enter the Account Number");
        }
        int acc = Integer.parseInt(strAcc);

        String strWith = JOptionPane.showInputDialog("Enter the withdraw amount");
         while(!(Validation.validateWithdraw(strWith)))
        {
            strWith = JOptionPane.showInputDialog("Error!!\nRe-Enter the Withdraw amount");
        }
        double withdraw = Double.parseDouble(strWith);
        int i = 0;
        boolean flag =  false;

        if(bnk.isEmpty())
        {
            JOptionPane.showMessageDialog(null, "There are no accounts created");
        }
        else
        {
            for(BankAccount b: bnk)
            {

                if(b.getAccNo() == acc)
                {
                    b = bnk.get(i);
                    if(b instanceof ChequeAccount)
                    {
                        b.withdraw(withdraw);
                    }
                    else if(b instanceof PassBookAccount)
                    {
                        b.withdraw(withdraw);
                    }
                    else
                    {
                         b.withdraw(withdraw);
                    }
                    flag = true;
                    break;

                }
                else
                {
                    i++;
                }

            }
            if(flag == false)
            {
                JOptionPane.showMessageDialog(null, "Wrong Account number!!","Error",JOptionPane.ERROR_MESSAGE);

            }
        }

    }

    //update the overdraftlimit
    public static void updateOverdraft()
    {
       String strAcc = JOptionPane.showInputDialog("Please Enter The Account number:");
        while(!(Validation.validateAccountNo(strAcc)))
        {
            strAcc = JOptionPane.showInputDialog("Error!!\nRe-Enter the Account Number");
        }
        int acc = Integer.parseInt(strAcc);

        String strUpOverDrft = JOptionPane.showInputDialog("Enter the new Overdraft limit");
        while(!(Validation.validateOverDraftLimit(strUpOverDrft)))
        {
            strUpOverDrft = JOptionPane.showInputDialog("Error!!\nRe-Enter the Overdraft limit");
        }
        double ol =  Double.parseDouble(strUpOverDrft);

        int i = 0;
        boolean flag =  false;

        if(bnk.isEmpty())
        {
           JOptionPane.showMessageDialog(null, "There are no accounts created","Error",JOptionPane.ERROR_MESSAGE);
        }
        else
        {
            for(BankAccount b: bnk)
            {
               if(b.getAccNo() == acc)
               {
                  b = bnk.get(i);
                  if(b instanceof ChequeAccount)
                  {
                      b.updateOverDraft(ol);
                  }
                  flag = true;
                  break;

                }
                else
                {
                  i++;
                }

              }

            if(flag == false)
            {
                JOptionPane.showMessageDialog(null, "Wrong Account number!!","Error",JOptionPane.ERROR_MESSAGE);

            }
        }
    }

    //adding interest to all savings accounts
    public static void addInterest()
    {
        for(int i = 0; i < bnk.size(); i++)
        {
            BankAccount b = bnk.get(i);
            if(b instanceof PassBookAccount)
            {
                p.addInterest();

            }
            else if(b instanceof InvestmentAccount)
            {
                invs.addInterest();
            }
        }
    }

    //Print only a single account
    public static void printBalance()
    {
       String strAcc = JOptionPane.showInputDialog("Please Enter The Account number:");
        while(!(Validation.validateAccountNo(strAcc)))
        {
            strAcc = JOptionPane.showInputDialog("Error!!\nRe-Enter the Account Number");
        }
        int acc = Integer.parseInt(strAcc);
        int i = 0;
        boolean flag =  false;

        if(bnk.isEmpty())
        {
            JOptionPane.showMessageDialog(null, "There are no accounts created","Error",JOptionPane.ERROR_MESSAGE);
        }
        else
        {
          for(BankAccount b: bnk)
          {

             if(b.getAccNo() == acc)
             {
                  b = bnk.get(i);
                  if(b instanceof ChequeAccount)
                  {
                      JTextArea txt = new JTextArea("#ChequeBookAccount#\n"+b.toString());
                      JOptionPane.showMessageDialog(null,txt);
                  }
                  else if(b instanceof PassBookAccount)
                  {
                      JTextArea txt = new JTextArea("#PassBookAccount\n"+b.toString());
                      JOptionPane.showMessageDialog(null,txt);
                  }
                  else if(b instanceof InvestmentAccount)
                  {
                      JTextArea txt = new JTextArea("#InvestmentAccount#\n"+b.toString());
                      JOptionPane.showMessageDialog(null,txt);

                  }
                  flag = true;
                  break;
            }
             else
             {
                i++;
             }     
          }
          if(flag == false)
          {
             JOptionPane.showMessageDialog(null, "Wrong Account number!!","Error",JOptionPane.ERROR_MESSAGE);

          }
        }

    }

    //Print all the account in the arraylist
    public static void printAll()
    {
        String cheque = "";
        String passBook = "";
        String investment = "";

        for(int i = 0; i < bnk.size(); i++) 
        {
            BankAccount b = bnk.get(i);
            if(b instanceof ChequeAccount)
            {
                cheque += b.toString(); 
            }
            else if(b instanceof PassBookAccount)
            {
                passBook += b.toString();
            } 
            else
            {
                investment += b.toString();
            }
        }
        JTextArea txt = new JTextArea("--ChequeAccounts--\n"+cheque+"--PassBookAccount--\n"+passBook+"--InvestmentAccounts--\n"+investment);
        JOptionPane.showMessageDialog(null,txt);
    }

    //Create Cheque Account
    public static void chequeAccount ()
    {
        String fname = JOptionPane.showInputDialog("Enter the first name:");
        while(!(Validation.validateAccountName(fname)))//Validte First name
        {
            fname = JOptionPane.showInputDialog("Error!!\nRe-Enter the first name");
        }

        String sname = JOptionPane.showInputDialog("Enter the surname:");
        while(!(Validation.validateAccountName(fname)))//Validate Surname
        {
            fname = JOptionPane.showInputDialog("Error!!\nRe-Enter the last name");
        }

        String ad = JOptionPane.showInputDialog("Enter the Address:");
        while(!(Validation.validateAddress(ad)))//Validate Address
        {
            ad = JOptionPane.showInputDialog("Error!!\nRe-Enter the Address:");
        }

        String phn = JOptionPane.showInputDialog("Enter the phn number:");
        while(!(Validation.validatePhoneNo(phn)))//Validate phn No
        {
            phn = JOptionPane.showInputDialog("Error!!\nRe-Enter the phn number:");
        }

        String OBalance = JOptionPane.showInputDialog("Enter the Opening Balance");
        while(!(Validation.validationOpeningBalance(OBalance)))//Validate Opening Balance
        {
            OBalance = JOptionPane.showInputDialog("Error!!\nRe-Enter the Opening Balance");
        }
        double b = Double.parseDouble(OBalance);

        String overDraft = JOptionPane.showInputDialog("Enter the Overdraft Limit");
        while(!(Validation.validateOverDraftLimit(overDraft)))//Validate Overdraft limit
        {
            overDraft = JOptionPane.showInputDialog("Error!!\nRe-Enter the Overdraft Limit");
        }
        double ol = Double.parseDouble(overDraft);

        bnk.add(new ChequeAccount(fname,sname,ad,phn,b,ol));//adding entered data to the array list
        JOptionPane.showInputDialog(null,"Account Created Successfully!!","Successfull",JOptionPane.INFORMATION_MESSAGE);
    }

    //Create PassBook Account
    public static void passBookAccount ()
    {
         String fname = JOptionPane.showInputDialog("Enter the first name:");
        while(!(Validation.validateAccountName(fname)))//Validte First name
        {
            fname = JOptionPane.showInputDialog("Error!!\nRe-Enter the first name");
        }

        String sname = JOptionPane.showInputDialog("Enter the surname:");
        while(!(Validation.validateAccountName(fname)))//Validate Surname
        {
            fname = JOptionPane.showInputDialog("Error!!\nRe-Enter the last name");
        }

        String ad = JOptionPane.showInputDialog("Enter the Address:");
        while(!(Validation.validateAddress(ad)))//Validate Address
        {
            ad = JOptionPane.showInputDialog("Error!!\nRe-Enter the Address:");
        }

        String phn = JOptionPane.showInputDialog("Enter the phn number:");
        while(!(Validation.validatePhoneNo(phn)))//Validate phn No
        {
            phn = JOptionPane.showInputDialog("Error!!\nRe-Enter the phn number:");
        }

        String OBalance = JOptionPane.showInputDialog("Enter the Opening Balance");
        while(!(Validation.validationOpeningBalance(OBalance)))//Validate Opening Balance
        {
            OBalance = JOptionPane.showInputDialog("Error!!\nRe-Enter the Opening Balance");
        }
        double b = Double.parseDouble(OBalance);

        bnk.add(new PassBookAccount(fname,sname,ad,phn,b));//adding entered data to the array list
        JOptionPane.showInputDialog(null,"Account Created Successfully!!","Successfull",JOptionPane.INFORMATION_MESSAGE);
    }

    //Create Investment Account
    public static void  investmentAccount()
    {
         String fname = JOptionPane.showInputDialog("Enter the first name:");
        while(!(Validation.validateAccountName(fname)))//Validte First name
        {
            fname = JOptionPane.showInputDialog("Error!!\nRe-Enter the first name");
        }

        String sname = JOptionPane.showInputDialog("Enter the surname:");
        while(!(Validation.validateAccountName(fname)))//Validate Surname
        {
            fname = JOptionPane.showInputDialog("Error!!\nRe-Enter the last name");
        }

        String ad = JOptionPane.showInputDialog("Enter the Address:");
        while(!(Validation.validateAddress(ad)))//Validate Address
        {
            ad = JOptionPane.showInputDialog("Error!!\nRe-Enter the Address:");
        }

        String phn = JOptionPane.showInputDialog("Enter the phn number:");
        while(!(Validation.validatePhoneNo(phn)))//Validate phn No
        {
            phn = JOptionPane.showInputDialog("Error!!\nRe-Enter the phn number:");
        }

        String OBalance = JOptionPane.showInputDialog("Enter the Opening Balance");
        while(!(Validation.validationOpeningBalance(OBalance)))//Validate Opening Balance
        {
            OBalance = JOptionPane.showInputDialog("Error!!\nRe-Enter the Opening Balance");
        }
        double b = Double.parseDouble(OBalance);

        bnk.add(new InvestmentAccount(fname,sname,ad,phn,b));//adding entered data to the array list
        JOptionPane.showInputDialog(null,"Account Created Successfully!!","Successfull",JOptionPane.INFORMATION_MESSAGE);
    }

    //Sub menu
    public static void subMenu(int choice2)
    {
        while(choice2 != 4)
        {
            switch (choice2)
            {
                case 1:
                    chequeAccount ();
                    break;
                case 2:
                    passBookAccount ();
                    break;
                case 3:
                    investmentAccount();
                    break;
                case -99:
                    JOptionPane.showMessageDialog(null, "You must Enter value 1 - 4",
                                          "Error", JOptionPane.ERROR_MESSAGE);
                break;
                case -100:
                    JOptionPane.showMessageDialog(null, "You clicked cancel",
                                          "Error", JOptionPane.ERROR_MESSAGE);
                break;
                case -101:
                    JOptionPane.showMessageDialog(null, "You entered too many characters",
                                          "Error", JOptionPane.ERROR_MESSAGE);
                break;
               default:
                    JOptionPane.showMessageDialog(null, "Error - enter value again",
                                          "Error", JOptionPane.ERROR_MESSAGE);
                break;    

            }
            choice2 = createAccount();

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T03:09:39.143

要回答您的具体问题：

```
if(b instanceof PassBookAccount)
{
    // At this point you know b is an instance of PassBookAccount

    PassBookAccount pb = (PassBookAccount) b;

    // call methods on pb
} 
```

但是不清楚你的意思是什么，`public class interface`所以我只是假设你的意思是`public class MyMainClass`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T03:51:48.200

您应该能够创建接口类的对象，（尽管我不知道您为什么要这样命名）返回存储在数组中的值并`addInterest()`通过参数将值传递给方法。那就是如果我理解这个问题。

# java - mysql java没有合适的驱动

> ID：10867481
> 
> 赞同：0
> 
> 时间：2012-06-03T02:35:42.177
> 
> 标签：java, mysql

![在此处输入图像描述](../Images/a0cf6549302984526532dabf81ca3237.png)在以下代码中..我没有合适的驱动程序..错误：请帮助。我已经使用它一个小时了，但似乎无法弄清楚。

这太疯狂了。在我开始弄乱 GWT 之前，我能够更早地做到这一点。

```
package com.gwt.churchweb.churchweblogin.client;

import com.google.gwt.user.client.ui.Composite;

import com.google.gwt.user.client.ui.VerticalPanel;
import com.google.gwt.user.client.ui.Label;
import com.google.gwt.user.client.ui.FlexTable;
import com.google.gwt.user.client.ui.TextBox;
import com.google.gwt.user.client.ui.HasHorizontalAlignment;
import com.google.gwt.user.client.ui.CheckBox;
import com.google.gwt.user.client.ui.Button;
import com.google.gwt.event.dom.client.ClickHandler;
import com.google.gwt.event.dom.client.ClickEvent;
import com.google.gwt.user.client.Window;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.sql.DriverManager;

import java.util.logging.Level;
import java.util.logging.Logger;

public class Login extends Composite {

    public Login() {

        VerticalPanel verticalPanel = new VerticalPanel();
        initWidget(verticalPanel);
        verticalPanel.setSize("329px", "186px");

        Label lblNewLabel = new Label("Sign into your account");
        lblNewLabel.setStyleName("gwt-Login-SigninLabel");
        verticalPanel.add(lblNewLabel);

        FlexTable flexTable = new FlexTable();
        verticalPanel.add(flexTable);
        flexTable.setWidth("308px");

        Label lblNewLabel_1 = new Label("Username:");
        lblNewLabel_1.setStyleName("gwt-Label-Login");
        flexTable.setWidget(0, 0, lblNewLabel_1);
        lblNewLabel_1.setWidth("72px");

        final TextBox textboxUsername = new TextBox();
        textboxUsername.setStyleName("gwt-LoginTextBox");
        flexTable.setWidget(0, 1, textboxUsername);
        textboxUsername.setWidth("204px");

        Label lblNewLabel_2 = new Label("Password:");
        lblNewLabel_2.setStyleName("gwt-Label-Login");
        flexTable.setWidget(1, 0, lblNewLabel_2);
        lblNewLabel_2.setWidth("66px");

        final TextBox textBoxPassword = new TextBox();
        textBoxPassword.setStyleName("gwt-LoginTextBox");
        flexTable.setWidget(1, 1, textBoxPassword);
        textBoxPassword.setWidth("204px");
        flexTable.getCellFormatter().setHorizontalAlignment(0, 0, HasHorizontalAlignment.ALIGN_LEFT);
        flexTable.getCellFormatter().setHorizontalAlignment(1, 0, HasHorizontalAlignment.ALIGN_LEFT);

        CheckBox chckbxRememberMeOn = new CheckBox("Remember me on this computer");
        chckbxRememberMeOn.setStyleName("gwt-Checkbox-Login");
        flexTable.setWidget(2, 1, chckbxRememberMeOn);

        Button btnSignIn = new Button("Sign In");
        btnSignIn.addClickHandler(new ClickHandler() {
            public void onClick(ClickEvent event) {
                Connection con = null;
                Statement st = null;
                ResultSet rs = null;

                String url = "jdbc:mysql://localhost:3306/churchweb";
                String user = "root";
                String password = "*****";

                try {
                    con = DriverManager.getConnection(url, user, password);
                    st = con.createStatement();
                    rs = st.executeQuery("SELECT VERSION()");
Window.alert("Fixing to try it");
                    if (rs.next()) {
                        Window.alert(rs.getString(1));
                    }

                } catch (SQLException ex) {
                    Logger lgr = Logger.getLogger(Login.class.getName());
                    lgr.log(Level.SEVERE, ex.getMessage(), ex);

                } finally {
                    try {
                        if (rs != null) {
                            rs.close();
                        }
                        if (st != null) {
                            st.close();
                        }
                        if (con != null) {
                            con.close();
                        }

                    } catch (SQLException ex) {
                        Logger lgr = Logger.getLogger(Login.class.getName());
                        lgr.log(Level.WARNING, ex.getMessage(), ex);
                    }
                }

                if (textboxUsername.getText().length() == 0
                        || textBoxPassword.getText().length() == 0) {
                        Window.alert("Username or password is empty."); 
                    }
            }
        });

        btnSignIn.setStyleName("gwt-Login-SigninButton");
        flexTable.setWidget(3, 1, btnSignIn);

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T02:42:05.980

确保 MySQL[连接器/J](http://dev.mysql.com/downloads/connector/j/)驱动程序 jar 文件位于您的类路径中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T02:43:34.013

您还没有将驱动程序加载到您的应用程序中，请尝试添加 Class.forName("com.mysql.jdbc.Driver");

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T02:43:59.393

您需要加载驱动程序。sun 网页的 connector-j 驱动程序附带的文档中有一些示例。以下是该文档的一个片段。

```
 try {
    Class.forName("com.mysql.jdbc.Driver").newInstance();
  } catch (Exception ex) {
     // handle the error
  } 
```

如果您想了解有关加载 java jdbc 驱动程序的更多信息，请查看与您的驱动程序下载捆绑在一起的 connector-j.pdf 的第 6 章。

# c# - 是否有任何好的 API 设计模式可以将 WRITES 与 READS 分开？

> ID：10867483
> 
> 赞同：2
> 
> 时间：2012-06-03T02:36:43.073
> 
> 标签：c#, .net, design-patterns, domain-driven-design

我正在编写一个由三层组成的相对简单的 Web 应用程序：

1.  前端：非常薄的控制器
2.  业务逻辑：特定领域的服务
3.  存储：精简存储库类

如上所述，大部分业务逻辑都在服务层 2 中。

当我编写这些类时，我发现自己对待 READ 方法与 WRITE 方法非常不同。

## 服务类中的 READ 方法

例如，READ 方法中没有过于严格的参数检查。很多时候，对于简单的读取，Service 方法几乎只用一行代码就实现了 Repository 方法。

## 服务类中的 WRITE 方法

然而，使用 WRITE 方法，我发现自己做了更多的参数检查和业务逻辑实现。事实上，在我的服务类中，我依赖于一个*规则*类，它只被我的 WRITE 方法真正使用。READS 中也有 biz 逻辑，但 WRITES 逻辑更严格。

## 其他可能分离 READS 和 WRITES 的*论据*

我也觉得在实现一个服务类并在一个类中寻找一个方法的时候，在我的脑海中首先要知道我是想读还是写，然后再去寻找方法。

我也觉得在类中寻找方法时，必须通过以“Create”、“Update”、“Get”、“Retrieve”等开头的任意方法名称来分隔 READS 和 WRITES 似乎很麻烦。

## 可能的*问题*，分开是个好主意吗？

我想我正在寻找一种**久经考验的模式**。我可以尝试自己实现它，但我已经觉得**可能存在问题**，例如**过于复杂的设计**，或**循环引用**，**逻辑重复**，例如。READ 类可能依赖于 WRITE 类，反之亦然。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T03:44:50.097

听起来你指的是命令查询职责分离，[CQRS](http://martinfowler.com/bliki/CQRS.html)

Udi Dahan 有一篇好文章让您从[这里](http://www.udidahan.com/2009/12/09/clarified-cqrs/)开始。

MS Patterns and practice 有一个开源项目[http://cqrsjourney.github.com/](http://cqrsjourney.github.com/)这是一个很好的例子。

这种模式的缺点是它可能会过度工程化，尤其是当您正在编写“相对简单的 Web 应用程序”时。

Udi 写了另一篇关于[何时避免 CQRS](http://www.udidahan.com/2011/04/22/when-to-avoid-cqrs/)和[为什么你应该在几乎所有地方使用 CQRS 的文章](http://www.udidahan.com/2011/10/02/why-you-should-be-using-cqrs-almost-everywhere/)希望这会有所帮助。

# c - 在malloc之后打印cstring？

> ID：10867485
> 
> 赞同：1
> 
> 时间：2012-06-03T02:36:52.690
> 
> 标签：c, malloc, cstring

我只是尝试为 c 字符串分配 10 个字节并在没有分配任何内容的情况下打印。我打印了 cstring 的大小。但是结果和我想象的完全不同。由于 malloc 只分配原始内存，我认为它会打印任何垃圾值。而且由于我试图打印 c 字符串的大小，我认为行为应该是未定义的。但他们都打印空字符我认为这是我的代码。

```
int main(void)
{
    int i;
    char * c = (char *)malloc(10);
    for(i=0; i<20; ++i)
    {
        printf("%c.\n", *(c+i));
    }
    return 0;
} 
```

我看到了 20 行“。”。谁能解释一下？我在linux下跑过这个，用的gcc最新版 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T04:00:35.660

每当 Linux 内核将“新”内存页面映射到用户空间到您的进程时，它会用零填充该页面，因此您无法找到另一个进程可能留在这些内存地址中的任何数据残留，因为该内存可能属于另一个进程（以及另一个用户），其中包含秘密数据，例如密码、密钥等（如果您感兴趣，内核会调用[linux/gfp.h](http://git.kernel.org/?p=linux/kernel/git/stable/linux-stable.git;a=blob_plain;f=include/linux/gfp.h;hb=76e10d158efb6d4516018846f60c2ab5501900bc)`unsigned long get_zeroed_page(gfp_t gfp_mask);`中定义的函数）

只要此页面与您的进程相关联，就不会再次用零填充该页面，因此即使您释放了内存，以下代码仍应打印出您之前放入的值：

```
#include <stdlib.h>
#include <stdio.h>

int main(){
    char* test1 = malloc(100);
    int i;
    for(i=0; i<5; i++){
        test1[i] = i+'A';
    }
    free(test1);
    char* test2 = malloc(100);
    for(i=0; i<5; i++){
        printf("%c.\n",test2[i]);
    }
    return 0;
} 
```

这应该会给你以下输出（虽然不能保证）：

```
$ ./a.out 
A.
B.
C.
D.
E. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T02:39:45.757

它还没有被初始化。需要先将其设置为一个值，然后您才能看到任何有用的信息。它只是打印了该内存地址中已经存在的内容（除非设置了一些编译器选项），这很可能只是 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T02:47:32.507

如果您正在读取数组，则行为仍应未定义。你的结果只是意味着内存在分配之前已经存储了 '\0' 。使用 calloc() 将数组初始化为零。

# bash - 如何检测我的新贵脚本是否正在运行？

> ID：10867488
> 
> 赞同：2
> 
> 时间：2012-06-03T02:37:57.057
> 
> 标签：bash, ubuntu, upstart

在伪代码中，我正在尝试执行以下操作

```
if myService is running
  restart myService
else
  start myService 
```

如何将以上内容翻译成 bash 脚本或类似内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T18:47:53.723

标准方法是使用 PID 文件来存储服务的 PID。然后，您可以使用存储在 PID 文件中的 PID 来查看服务是否已经在运行。

看看`/etc/init.d`目录下的各种脚本，看看它们是如何使用 PID 文件的。还可以`/var/run`在大多数 Linux 系统中查看 PID 文件的存储位置。

你可以做这样的事情，这是处理所有 Bourne shell 类型 shell 的通用方法：

```
# Does the PID file exist?

if [ -f "$PID_FILE" ]
then
    # PID File does exist. Is that process still running?
    if ps -p `cat $PID_FILE` > /dev/null 2&1
    then

       # Process is running. Do a restart
       /etc/init.d/myService restart
       cat $! > $PID_FILE
    else
       # Process isn't' running. Do a start
       /etc/init.d/myService start
       cat $! > $PID_FILE
else
   # No PID file to begin with, do a restart
   /etc/init.d/myService restart
   cat $! > $PID_FILE
fi 
```

但是，在 Linux 上，您可以利用[pgrep](http://linux.die.net/man/1/pgrep)：

```
if pgrep myService > /dev/null 2>&1
then
    restart service
else
    start service
fi 
```

请注意您如何不使用任何大括号。该`if`语句对`pgrep`命令的退出状态进行操作。我将 STDOUT 和 STDERR 都输出到 /dev/null 因为我不想打印它们。`pgrep`我只想要命令本身的退出状态。

**阅读[PGREP](http://linux.die.net/man/1/pgrep)手册**

有很多选择。例如，您可能希望使用`-x`来防止意外匹配，或者您可能必须使用`-f`来匹配用于启动服务的完整命令行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T03:07:32.327

如果您在运行**ps aux时看到****myService**，那么您可以简单地在 bash 中执行此操作（编辑为使用 pgrep，如 jordanm 建议的那样）：

 **```
if [ $(pgrep myService) ]; then
    restart myService;
else
    start myService;
fi 
```**

# php - PHP多维数组键为一个数组？

> ID：10867489
> 
> 赞同：2
> 
> 时间：2012-06-03T02:38:19.497
> 
> 标签：php, arrays, key

我在 PHP 中有一个多维数组。它可以具有任意数量的级别，因为它是动态生成的。数组中包含的所有数组都不是空的，并且都设置了键。

我正在寻找一种将所有数组键放入新数组的方法。我知道如何在单层阵列上执行此操作，但我被困住了，因为我不知道阵列将进入多少层，它可能是单层阵列本身还是 20 层多维阵列？

谢谢...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T02:52:12.543

对于这个特定的应用程序，我会使用一个类而不是数组。我这么说的原因是处理多个级别会容易得多，因为您可以在类中使用递归函数来访问它。这是我正在谈论的一般示例：

```
class Node {
    public $children = array();
    public $key;

    public function get_element_by_key($search_key){
        if($this->key == $search_key) return $this;
        foreach ($this->children as &$child) {
            if($child->get_element_by_key($search_key) != NULL){
                return $child;
            }
            else return NULL;
        }
    }
} 
```

您还可以添加函数来添加元素，构造函数来创建元素并添加到父元素等等。然后您将使用该功能`get_element_by_key()`（或类似功能）来访问元素。顺便说一句，我没有尝试过这段代码，我只是为了说明一点而写的。我打赌你可以让它工作！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T02:58:04.207

```
$ritit = new RecursiveIteratorIterator(new RecursiveArrayIterator($myArray), RecursiveIteratorIterator::SELF_FIRST);
$keys = array();
foreach ($ritit as $leafValue) {
    foreach (range(0, $ritit->getDepth()) as $depth) {
        $keys[] = $ritit->getSubIterator($depth)->key();
    }
}
print_r(array_unique($keys)); 
```

我添加了一个`RecursiveIteratorIterator::SELF_FIRST`很好的标志，尽管在这种情况下不需要它（所有子数组至少有一个元素的情况）。事实上，对于这种情况，没有标志会更有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T02:50:50.040

我不确定我是否完全理解你的问题。如果你想将多维键存储在一个单维数组中，你需要一些方法来对它们进行编码。然后，您可以遍历整个“深层”结构，并为每个叶节点将编码键添加到列表中。

如果您只想复制数组，则基本上同样适用。您需要遍历数组，随时构建副本，或使用深复制函数，例如在[PHP 引用数组的深拷贝中讨论的](https://stackoverflow.com/questions/894814/deep-copy-of-php-array-of-references)

您可能缺少的部分是多维数组只是一个数组数组。[oreilly 的 php 书中的](http://oreilly.com/catalog/progphp/chapter/ch05.html)好东西

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T02:56:29.123

如果您想将所有键收集为新数组的*值，则以下内容应该适合您。*

```
// Function to recursively gather keys
function getKeys(&$keyArray, $parentArray) {
    if (!is_array($parentArray) || count($parrentArray) === 0) {
        return;
    }
    foreach ($parentArray as $key => $element) {
        $keyArray[] = $key;
        if (is_array($element)) {
            getKeys($keyArray, $element);
        }
    }
}

// Usage
$arrayToBeChecked = array(array(array(...
$arrayToHoldKeys;
getKeys($arrayToHoldKeys, $arrayToBeChecked); 
```

# python - vim：代码完成使用针对python的omnifunc错误

> ID：10867493
> 
> 赞同：2
> 
> 时间：2012-06-03T02:39:31.893
> 
> 标签：python, vim

我想为 python 使用完整的代码。我生成标签并`.vimrc`像这样设置它的路径：

```
set tags=/home/abc/python.tags 
```

如果我评论“filetype plugin on”，当我按下 cx co vim 会告诉我：

> 未设置选项omnifunc

但是，如果我添加`filetype plugin on`，`.vimrc`当我按下`C-x C-o`vim 将退出并告诉我：

> 导入错误：没有名为站点的模块。

我该怎么做才能使用完整的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:32:35.830

`Import error: No module named site.`

您需要正确设置环境变量`PYTHONPATH`。

# android - startActivityForResult() 不调用 onActivityResult(int requestCode, int resultCode, Intent data)？

> ID：10867495
> 
> 赞同：0
> 
> 时间：2012-06-03T02:39:40.513
> 
> 标签：android

我学习 android 并且我是初学者，我试图获取一张图片并将其转换为我的 imageview，但在调试模式下我看到该应用程序执行该行：startActivityForResult(i,camdata); 带我到 cam 窗口，在我得到照片后，它要求我保存照片，然后我保存它。在那之后发生了-我的意思是我没有到达onActivityResult（int requestCode，int resultCode，Intent data）这一行。为什么？编码：

```
package com.thenewboston.elyakim;

import java.io.IOException;
import java.io.InputStream;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.ImageView;

public class Cam extends Activity implements OnClickListener{

    ImageButton ib;
    Button b;
    ImageView iv;
    Intent i;
    final static int camdata = 0;
    Bitmap bmp ;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.photo);
        initialize();
        InputStream is1 = getResources().openRawResource(R.drawable.ic_launcher);
        bmp = BitmapFactory.decodeStream(is1);

    }
    private void initialize() {
        // TODO Auto-generated method stub
        iv = (ImageView) findViewById(R.id.imageView1);
        ib = (ImageButton) findViewById(R.id.imageButton1);
        b = (Button) findViewById(R.id.button1);
        b.setOnClickListener(this);
        ib.setOnClickListener(this);
    }
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        switch (arg0.getId()){
        case R.id.button1:
            try {
                getApplicationContext().setWallpaper(bmp);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            break;

        case R.id.imageButton1:
            i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(i,camdata);
            break;

        }

        }
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);
        if(requestCode==RESULT_OK){
            Bundle extras = data.getExtras();
            bmp  = (Bitmap) extras.get("data");
            iv.setImageBitmap(bmp);
        }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T02:43:44.627

```
if(requestCode==RESULT_OK){
        Bundle extras = data.getExtras();
        bmp  = (Bitmap) extras.get("data");
        iv.setImageBitmap(bmp);
    } 
```

一定是

```
if(requestCode==camdata){
    if(resultCode==RESULT_OK){
        iv.setImageUri(Uri.parse(data.getDataString()));
    }
} 
```

上面在 imageview 中显示选择的图像

# c# - 如何在 C# 中获取进程的主窗口句柄？

> ID：10867501
> 
> 赞同：8
> 
> 时间：2012-06-03T02:41:41.040
> 
> 标签：c#, process, window, handle

目标是以编程方式启动 Windows 窗体，获取其句柄，并使用 Win Api 的 SendMessage() 函数将信息发送到其 wndProc() 函数。

我处理了 SendMessage() 部分，但现在的问题是在进程启动后获取表单的句柄。

我的第一个猜测是 Process 的 MainWindowHandle 属性会给我我正在寻找的句柄，但是在我启动进程后 MainWindowHandle 保持等于 0 并且以下代码没有显示我刚开始的进程的句柄：

```
foreach (Process p in Process.GetProcesses())
{
Console.WriteLine(p.MainWindowHandle);
} 
```

有人可以告诉我如何做到这一点以及它是否真的可以做到吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T04:51:42.097

有时，进程需要一秒钟来设置所有内容，但对象会立即返回。

出于这个原因，您应该稍等片刻，以便让 Process 真正启动它，然后它的 MainWindowHandle 将被适当地设置，准备好被使用。

```
var proc = Process.Start("notepad");

Thread.Sleep(1000); // This will wait 1 second

var handle = proc.MainWindowHandle; 
```

另一种更聪明的方式是：

```
var proc = Process.Start("notepad");

try
{
    while (proc.MainWindowHandle == IntPtr.Zero)
    {
        // Discard cached information about the process
        // because MainWindowHandle might be cached.
        proc.Refresh();

        Thread.Sleep(10);
    }

    var handle = proc.MainWindowHandle;
}
catch
{
    // The process has probably exited,
    // so accessing MainWindowHandle threw an exception
} 
```

这将导致进程启动，并等到 MainWindowHandle 不为空。

# javascript - 更改正文中的背景图像

> ID：10867503
> 
> 赞同：28
> 
> 时间：2012-06-03T02:42:29.793
> 
> 标签：javascript, css

如何在运行时更改 CSS 中的背景图像？我在正文中有以下背景图像，可以在运行时更改图像吗？

```
body {
height: 100%;
background: #fff8db url(../images/backgrounds/header-top.jpg) no-repeat center top; 
/*background-color: #fff8db;*/
/*background-size: 1650px 900px;*/
font-family: Arial, Verdana, Helvetica, sans-serif; 
font-size:12px; 
font-weight:normal; 
color:#404040;
line-height:20px; } 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-06-03T02:46:29.173

为此，您需要使用 Javascript。您可以像这样设置身体的样式`background-image`。

```
var body = document.getElementsByTagName('body')[0];
body.style.backgroundImage = 'url(http://localhost/background.png)'; 
```

只需确保将 URL 替换为**实际**URL。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-03T02:54:29.433

如果你已经加载了 JQuery，你可以这样做：

```
$('body').css('background-image', 'url(../images/backgrounds/header-top.jpg)'); 
```

**编辑**：

首先在head标签中加载JQuery：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

然后在页面上发生某些事情时调用 Javascript 来更改背景图像，例如当它完成加载时：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('body').css('background-image', 'url(../images/backgrounds/header-top.jpg)');
    });
</script> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-03T04:47:43.470

只需在 body 上设置一个 onload 函数：

```
<body onload="init()"> 
```

然后在javascript中做这样的事情：

```
function init() {
  var someimage = 'changableBackgroudImage';
  document.body.style.background = 'url(img/'+someimage+'.png) no-repeat center center'
} 
```

您可以根据某些条件（例如一天中的时间等）将“someimage”变量更改为您想要的任何内容，并且该图像将被设置为背景图像。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-04T10:40:42.553

如果您的页面有一个[Open Graph](http://opengraphprotocol.org/)图像，通常用于社交分享，您可以使用它在运行时使用 vanilla JavaScript 设置背景图像，如下所示：

```
<script>
  const meta = document.querySelector('[property="og:image"]');
  const body = document.querySelector("body");
  body.style.background = `url(${meta.content})`;
</script> 
```

上面使用[`document.querySelector`](http://devdocs.io/dom/document/queryselector)和[属性选择器](http://devdocs.io/css/attribute_selectors)来*分配* `meta`它选择的第一个 Open Graph 图像。执行类似的任务来获取`body`. 最后，*字符串插值*用于将路径的值分配给 Open Graph 图像`body`。`background.style`

如果您希望图像覆盖整个*视口*并保持固定设置[`background-size`](http://devdocs.io/css/background-size)，如下所示：

```
body.style.background = `url(${meta.content}) center center no-repeat fixed`;
body.style.backgroundSize = 'cover'; 
```

使用这种方法，您可以使用 CSS 设置低质量的背景图像占位符，然后使用图像事件与高保真图像交换`onload`，从而减少*感知延迟*。

# objective-c - 两个实体之间的核心数据 ID

> ID：10867505
> 
> 赞同：0
> 
> 时间：2012-06-03T02:43:09.450
> 
> 标签：objective-c, core-data

我的数据库中目前有两个实体：

```
Subjects
Timetable 
```

在我的`Timetable`实体中，我有一个名为

```
subject 
```

`Subjects`它需要与实体中的对象有某种关系。我该怎么做？我无法建立这种关系，因为每个主题对象都可能有很多时间表对象。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T03:36:30.300

在 Subjects 实体中为“对象”创建一个单独的实体。让我们称之为Foo。

现在，Subjects 将与 Foo 具有一对一的关系。

在您的时间表实体中，您将与 Foo 建立一对多关系。

# jquery - 拖动子元素时触发父元素的“dragleave”

> ID：10867506
> 
> 赞同：185
> 
> 时间：2012-06-03T02:43:15.393
> 
> 标签：jquery, html, file-upload, drag-and-drop, dom-events

## 概述

我具有以下 HTML 结构，并且已将`dragenter`and`dragleave`事件附加到`<div id="dropzone">`元素。

```
<div id="dropzone">
    <div id="dropzone-content">
        <div id="drag-n-drop">
            <div class="text">this is some text</div>
            <div class="text">this is a container with text and images</div>
        </div>
    </div>
</div> 
```

## 问题

当我将文件拖到 上时`<div id="dropzone">`，`dragenter`事件会按预期触发。但是，当我将鼠标移到子元素上时，例如`<div id="drag-n-drop">`，`dragenter`会为该元素触发该事件`<div id="drag-n-drop">`，然后为该元素`dragleave`触发该事件`<div id="dropzone">`。

如果我再次将鼠标悬停在`<div id="dropzone">`元素上，`dragenter`则再次触发事件，这很酷，但是随后`dragleave`为刚刚离开的子元素触发了事件，因此`removeClass`执行了指令，这并不酷。

这种行为是有问题的，原因有两个：

1.  我只是将`dragenter`&附加`dragleave`到了，`<div id="dropzone">`所以我不明白为什么子元素也附加了这些事件。

2.  我仍然在将`<div id="dropzone">`鼠标悬停在其子元素上时拖动元素，所以我不想`dragleave`开火！

## jsFiddle

这是一个 jsFiddle 修补：http: [//jsfiddle.net/yYF3S/2/](http://jsfiddle.net/yYF3S/2/)

## 问题

那么......我怎样才能做到这一点，当我在元素上拖动文件时`<div id="dropzone">`，`dragleave`即使我拖动任何子元素也不会触发......它应该只在我离开`<div id="dropzone">`元素时触发...... . 在元素边界内的任何地方悬停/拖动*不应*触发`dragleave`事件。

我需要它是跨浏览器兼容的，至少在支持 HTML5 拖放的浏览器中，所以[这个答案](https://stackoverflow.com/a/7115883/196921)是不够的。

谷歌和 Dropbox 似乎已经解决了这个问题，但是他们的源代码被缩小/复杂，所以我无法从他们的实现中解决这个问题。

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2012-12-25T05:35:46.817

如果您不需要将事件绑定到子元素，则始终可以使用 pointer-events 属性。

```
.child-elements {
  pointer-events: none;
} 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-06-05T23:02:20.883

我终于找到了一个我满意的解决方案。实际上，我找到了几种方法来做我想做的事，但没有一个像当前的解决方案那样成功......在一个解决方案中，由于向`#dropzone`元素添加/删除边框，我经历了频繁的闪烁......在另一个解决方案中，边框如果您将鼠标悬停在浏览器之外，则永远不会被删除。

无论如何，我最好的 hacky 解决方案是：

```
var dragging = 0;

attachEvent(window, 'dragenter', function(event) {

    dragging++;
    $(dropzone).addClass('drag-n-drop-hover');

    event.stopPropagation();
    event.preventDefault();
    return false;
});

attachEvent(window, 'dragover', function(event) {

    $(dropzone).addClass('drag-n-drop-hover');

    event.stopPropagation();
    event.preventDefault();
    return false;
});

attachEvent(window, 'dragleave', function(event) {

    dragging--;
    if (dragging === 0) {
        $(dropzone).removeClass('drag-n-drop-hover');
    }

    event.stopPropagation();
    event.preventDefault();
    return false;
}); 
```

这工作得很好，但是在 Firefox 中出现了问题，因为 Firefox 是双重调用的`dragenter`，所以我的计数器关闭了。但是，它不是一个非常优雅的解决方案。

然后我偶然发现了这个问题：[How to detect the dragleave event in Firefox when dragging outside the window](https://stackoverflow.com/questions/10253663/how-to-detect-the-dragleave-event-in-firefox-when-dragging-outside-the-window)

所以我接受[了答案](https://stackoverflow.com/a/10310815/196921)并将其应用于我的情况：

```
$.fn.dndhover = function(options) {

    return this.each(function() {

        var self = $(this);
        var collection = $();

        self.on('dragenter', function(event) {
            if (collection.size() === 0) {
                self.trigger('dndHoverStart');
            }
            collection = collection.add(event.target);
        });

        self.on('dragleave', function(event) {
            /*
             * Firefox 3.6 fires the dragleave event on the previous element
             * before firing dragenter on the next one so we introduce a delay
             */
            setTimeout(function() {
                collection = collection.not(event.target);
                if (collection.size() === 0) {
                    self.trigger('dndHoverEnd');
                }
            }, 1);
        });
    });
};

$('#dropzone').dndhover().on({
    'dndHoverStart': function(event) {

        $('#dropzone').addClass('drag-n-drop-hover');

        event.stopPropagation();
        event.preventDefault();
        return false;
    },
    'dndHoverEnd': function(event) {

        $('#dropzone').removeClass('drag-n-drop-hover');

        event.stopPropagation();
        event.preventDefault();
        return false;
    }
}); 
```

这是干净和优雅的，似乎在我迄今为止测试过的每个浏览器中都可以使用（还没有测试过 IE）。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2012-09-04T20:11:56.897

这有点难看，但它确实有效！...

在你的'dragenter'处理程序上存储event.target（在你的闭包内的一个变量中，或其他），然后在你的'dragleave'处理程序中，只有在event.target ===你存储的那个时才会触发你的代码。

如果你的'dragenter'在你不想要它的时候触发（即当它在离开子元素后进入时），那么它在鼠标离开父元素之前最后一次触发，它在父元素上，所以父元素将永远是预期的“dragleave”之前的最后一个“dragenter”。

```
(function () {

    var droppable = $('#droppable'),
        lastenter;

    droppable.on("dragenter", function (event) {
        lastenter = event.target;
        droppable.addClass("drag-over");            
    });

    droppable.on("dragleave", function (event) {
        if (lastenter === event.target) {
            droppable.removeClass("drag-over");
        }
    });

}()); 
```

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2014-12-03T18:21:55.960

起初，我同意人们放弃这种`pointer-events: none`方法。但后来我问自己：

> *在拖动过程中，*您真的需要指针事件来处理子元素吗？

在我的例子中，我在孩子身上发生了很多事情，例如，悬停以显示用于其他操作的按钮、内联编辑等......但是，*在*拖动过程中，**这些都不**是必需的，甚至实际上是不需要的。

 *在我的例子中，我使用这样的东西来选择性地关闭父容器的所有子节点的指针事件：

```
 div.drag-target-parent-container.dragging-in-progress * {
    pointer-events: none;
  } 
```

`dragging-in-progress`使用您最喜欢的方法在`dragEnter`/事件处理程序中添加/删除类，就像我在, et`dragLeave`中所做或所做的一样。`dragStart`人。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-06-03T03:14:41.810

这似乎是一个 Chrome 错误。

我能想到的唯一解决方法是创建一个透明的覆盖元素来捕获您的事件：http: [//jsfiddle.net/yYF3S/10/](http://jsfiddle.net/yYF3S/10/)

**JS**：

```
$(document).ready(function() {
    var dropzone = $('#overlay');

    dropzone.on('dragenter', function(event) {
        $('#dropzone-highlight').addClass('dnd-hover');
    });

    dropzone.on('dragleave', function(event) {
        $('#dropzone-highlight').removeClass('dnd-hover');
    });

});​ 
```

**HTML**：

```
<div id="dropzone-highlight">
    <div id="overlay"></div>

    <div id="dropzone" class="zone">
        <div id="drag-n-drop">
            <div class="text1">this is some text</div>
            <div class="text2">this is a container with text and images</div>
        </div>
    </div>
</div>

<h2 draggable="true">Drag me</h2>
​ 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-06-03T03:00:38.327

问题是，放置区内的元素当然是放置区的一部分，当您进入子级时，您会离开父级。解决这个问题并不容易。您可以尝试向孩子添加事件，也可以将您的班级再次添加到父母。

```
$("#dropzone,#dropzone *").on('dragenter', function(event) {

    // add a class to #dropzone

    event.stopPropagation(); // might not be necessary
    event.preventDefault();
    return false;
}); 
```

您的事件仍会触发多次，但没有人会看到。

//编辑：使用dragmove事件永久覆盖dragleave事件：

```
$("#dropzone,#dropzone *").on('dragenter dragover', function(event) {

    // add a class to #dropzone

    event.stopPropagation(); // might not be necessary
    event.preventDefault();
    return false;
}); 
```

仅为 dropzone 定义 dragleave 事件。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-08-24T14:18:30.457

正如[本答案](https://stackoverflow.com/a/14027995/1372515)[中](https://stackoverflow.com/users/835696/benr)提到的那样，您可以防止子节点触发事件，但如果您需要绑定一些事件，请执行以下操作：

```
#dropzone.dragover *{
   pointer-events: none;
} 
```

并将这个添加到您的 JS 代码中：

```
$("#dropzone").on("dragover", function (event) {
   $("#dropzone").addClass("dragover");
});

$("#dropzone").on("dragleave", function (event) {
   $("#dropzone").removeClass("dragover");
}); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-05-23T18:56:37.800

如果您使用的是 jQuery，请查看： [https ://github.com/dancork/jquery.event.dragout](https://github.com/dancork/jquery.event.dragout)

真是太棒了。

> 为处理真正的拖动离开功能而创建的特殊事件。
> 
> HTML5 dragleave 事件更像 mouseout。创建此插件是为了在拖动时复制 mouseleave 样式功能。
> 
> 使用示例：
> 
> $('#myelement').on('dragout',function(event){ // 你的代码 });

编辑：实际上，我认为它不依赖于 jQuery，即使没有它，您也可以只使用代码。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-01-29T14:21:13.043

我的两分钱：在 dropzone 上隐藏一个图层，然后在 dragenter 时显示它，并将 dragleave 定位在它上面。

演示：[https ://jsfiddle.net/t6q4shat/](https://jsfiddle.net/t6q4shat/)

**HTML**

```
<div class="drop-zone">
  <h2 class="drop-here">Drop here</h2>
  <h2 class="drop-now">Drop now!</h2>
  <p>Or <a href="#">browse a file</a></p>
  <div class="drop-layer"></div>
</div> 
```

**CSS**

```
.drop-zone{
  padding:50px;
  border:2px dashed #999;
  text-align:center;
  position:relative;
}
.drop-layer{
  display:none;
  position:absolute;
  top:0;
  left:0;
  bottom:0;
  right:0;
  z-index:5;
}
.drop-now{
  display:none;
} 
```

**JS**

```
$('.drop-zone').on('dragenter', function(e){
    $('.drop-here').css('display','none');
    $('.drop-now').css('display','block');
    $(this).find('.drop-layer').css('display','block');
    return false;
});

$('.drop-layer').on('dragleave', function(e){
    $('.drop-here').css('display','block');
    $('.drop-now').css('display','none');
    $(this).css('display','none');
    return false;
}); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-07-03T15:15:46.643

@hristo 我有一个更优雅的解决方案。检查这是否是您可以使用的东西。

毕竟你的努力没有白费。起初我设法使用了你的，但在 FF、Chrome 中遇到了不同的问题。在花了这么多小时后，我得到了这个建议完全按照预期工作。

这是实现的方式。我还利用视觉提示来正确引导用户了解放置区。

```
$(document).on('dragstart dragenter dragover', function(event) {    
    // Only file drag-n-drops allowed, http://jsfiddle.net/guYWx/16/
    if ($.inArray('Files', event.originalEvent.dataTransfer.types) > -1) {
        // Needed to allow effectAllowed, dropEffect to take effect
        event.stopPropagation();
        // Needed to allow effectAllowed, dropEffect to take effect
        event.preventDefault();

        $('.dropzone').addClass('dropzone-hilight').show();     // Hilight the drop zone
        dropZoneVisible= true;

        // http://www.html5rocks.com/en/tutorials/dnd/basics/
        // http://api.jquery.com/category/events/event-object/
        event.originalEvent.dataTransfer.effectAllowed= 'none';
        event.originalEvent.dataTransfer.dropEffect= 'none';

         // .dropzone .message
        if($(event.target).hasClass('dropzone') || $(event.target).hasClass('message')) {
            event.originalEvent.dataTransfer.effectAllowed= 'copyMove';
            event.originalEvent.dataTransfer.dropEffect= 'move';
        } 
    }
}).on('drop dragleave dragend', function (event) {  
    dropZoneVisible= false;

    clearTimeout(dropZoneTimer);
    dropZoneTimer= setTimeout( function(){
        if( !dropZoneVisible ) {
            $('.dropzone').hide().removeClass('dropzone-hilight'); 
        }
    }, dropZoneHideDelay); // dropZoneHideDelay= 70, but anything above 50 is better
}); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-10-16T11:46:31.030

我的版本：

```
$(".dropzone").bind("dragover", function(e){
    console.log('dragover');
});

$(".dropzone").bind("dragleave", function(e) {
  var stopDrag = false;
  if (!e.relatedTarget) stopDrag = true;
  else {
    var parentDrop = $(e.relatedTarget).parents('.dropzone');
    if (e.relatedTarget != this && !parentDrop.length) stopDrag = true;
  }

  if (stopDrag) {
    console.log('dragleave');
  }
}); 
```

使用此布局：

```
<div class="dropzone">
  <div class="inner-zone">Inner-zone</div>
</div> 
```

我已经为`e.target`, `e.currentTarget`,`e.relatedTarget`和事件制作了元素`dragover`类的转储。`dragleave`

它向我表明，离开父块时 ( `.dropzone`)`e.relatedTarget`不是该块的子块，所以我知道我已经离开了放置区。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-09-25T06:40:34.850

抱歉，它是 javascript 而不是 jquery，但对我来说，这是解决这个问题的最合乎逻辑的方法。浏览器应该在 dropenter （新元素的）之前调用 dropleave （前一个元素的），因为在离开前一个元素之前不能输入其他东西，我不明白他们为什么这样做！所以你只需要延迟像这样删除：

```
function mydropleave(e)
{
    e.preventDefault();
    e.stopPropagation();

    setTimeout(function(e){ //the things you want to do },1);
} 
```

dropenter 将在 dropleave 之后发生，仅此而已！

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-04-25T18:45:11.670

我对这里介绍的任何解决方法都不满意，因为我不想失去对子元素的控制。

所以我使用了一种不同的逻辑方法，将其转换为一个名为[jquery-draghandler](https://github.com/monteiz/jquery-draghandler)的 jQuery 插件。它绝对不操纵 DOM，保证高性能。它的用法很简单：

```
$(document).ready(function() {

    $(selector).draghandler({
        onDragEnter: function() {
            // $(this).doSomething();
        },
        onDragLeave: function() {
            // $(this).doSomethingElse();
        }
    });

}); 
```

它在不影响任何 DOM 功能的情况下完美地处理了该问题。

[在其Git 存储库](https://github.com/monteiz/jquery-draghandler)上下载、详细信息和解释。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-03-16T23:03:13.457

所以对我来说，这种方法`pointer-events: none;`效果不太好......所以这是我的替代解决方案：

```
 #dropzone {
        position: relative;
    }

    #dropzone(.active)::after {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        content: '';
    } 
```

这样，`dragleave`父元素（在子元素上）或`dragover`子元素是不可能的。希望这可以帮助 ：）

*当我`dragenter`或`dragleave`. 但是，如果您在没有它的情况下工作，请离开课程。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-08-06T12:38:43.257

超级简单的快速修复，未经广泛测试，但现在可以在 Chrome 中使用。

对不起Coffeescript。

```
 dragEndTimer = no

  document.addEventListener 'dragover', (event) ->
    clearTimeout dragEndTimer
    $('body').addClass 'dragging'
    event.preventDefault()
    return no

  document.addEventListener 'dragenter', (event) ->
    $('section').scrollTop(0)
    clearTimeout dragEndTimer
    $('body').addClass 'dragging'

  document.addEventListener 'dragleave', (event) ->
    dragEndTimer = setTimeout ->
      $('body').removeClass 'dragging'
    , 50 
```

这修复了 Chrome 闪烁错误，或者至少修复了导致我出现问题的它的排列。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-11-10T17:44:27.863

我实际上很喜欢我在[https://github.com/lolmaus/jquery.dragbetter/看到的内容](https://github.com/lolmaus/jquery.dragbetter/)但想分享一个可能的选择。我的一般策略是在拖放区域或其任何子项（通过冒泡）时将背景样式应用于拖放区（而不是其子项）。然后我在拖动放置区域时删除样式。想法是当移动到一个孩子时，即使我在离开它时从 dropzone 中删除了样式（dragleave 触发），我只需在 dragentering 任何孩子时将样式重新应用到父 dropzone。问题当然是，当从 dropzone 移动到 dropzone 的子级时，dragenter 在 dragleave 之前被触发到子级上，所以我的样式被乱序应用了。对我来说，解决方案是使用计时器将 dragenter 事件强制返回消息队列，允许我在 dragleave 之后处理它。我使用闭包来访问计时器回调上的事件。

```
$('.dropzone').on('dragenter', function(event) {
  (function (event) {
    setTimeout(function () {
      $(event.target).closest('.dropzone').addClass('highlight');
    }, 0);
  }) (event.originalEvent); 
}); 
```

这似乎适用于chrome，即firefox，并且无论dropzone中有多少孩子都可以使用。我对保证事件重新排序的超时有点不安，但它似乎对我的用例很有效。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-02-05T02:09:10.927

这个答案可以在这里找到：

[悬停子元素时触发 HTML5 dragleave](https://stackoverflow.com/questions/7110353/html5-dragleave-fired-when-hovering-a-child-element)

```
var counter = 0;

$('#drop').bind({
    dragenter: function(ev) {
        ev.preventDefault(); // needed for IE
        counter++;
        $(this).addClass('red');
    },

    dragleave: function() {
        counter--;
        if (counter === 0) { 
            $(this).removeClass('red');
        }
    }
}); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-05-22T11:24:47.533

我有一个类似的问题，我用这种方式解决了它：

问题：当用户在“放置区”（ul 元素）中放置一个元素时会触发函数 drop(ev)，但不幸的是，当该元素被放置在它的一个子元素（li 元素）中时也会触发该函数。

修复：

```
function drop(ev) { 
ev.preventDefault(); 
data=ev.dataTransfer.getData('Text'); 
if(ev.target=="[object HTMLLIElement]")  
{ev.target.parentNode.appendChild(document.getElementById(data));}
else{ev.target.appendChild(document.getElementById(data));} 
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-05-05T17:39:18.233

在这里，最简单的解决方案之一●︿●</p>

看看这个[小提琴](http://jsfiddle.net/pk7_diego/XTWcS/2/)<-尝试在框中拖动一些文件

你可以这样做：

```
var dropZone= document.getElementById('box');
var dropMask = document.getElementById('drop-mask');

dropZone.addEventListener('dragover', drag_over, false);
dropMask.addEventListener('dragleave', drag_leave, false);
dropMask.addEventListener('drop', drag_drop, false); 
```

这样，您应该已经知道这里发生了什么。
看看小提琴，你知道的。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-04-07T05:56:07.853

我试图自己为一个文件上传框实现这一点，当用户将文件拖到空间中时，框的颜色会改变。

我找到了一个很好地结合了 Javascript 和 CSS 的解决方案。假设您有一个`div`带有 id的可放置区域`#drop`。将此添加到您的 Javascript：

```
$('#drop').on('dragenter', function() {
    $(this).addClass('dragover');
    $(this).children().addClass('inactive');
});

$('#drop').on('dragleave', function() {
    $(this).removeClass('dragover');
    $(this).children().removeClass('inactive');
}); 
```

然后，将此添加到您的 CSS 中，以停用所有子类`.inactive`：

```
#drop *.inactive {
    pointer-events: none;
} 
```

因此，只要用户将元素拖到框上，子元素就会处于非活动状态。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2015-07-23T03:41:28.527

我试图自己实现这个，我也不想要 Jquery 或任何插件。

我想按照最适合我的方式处理文件上传：

**文件结构：**

--- /uploads {上传目录}

--- /js/slyupload.js {javascript 文件。}

--- index.php

--- 上传.php

--- styles.css {只是一点样式..}

**HTML 代码：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>my Dzone Upload...</title>
<link rel="stylesheet" href="styles.css" />
</head>

<body>
    <div id="uploads"></div>        
    <div class="dropzone" id="dropzone">Drop files here to upload</div>     
    <script type="text/javascript" src="js/slyupload.js"></script>      
</body>
</html> 
```

然后这是附加的 Javascript 文件:: 'js/slyupload.js'

```
<!-- begin snippet:  -->

<!-- language: lang-js -->

    // JavaScript Document

    //ondragover, ondragleave...

    (function(){        

        var dropzone = document.getElementById('dropzone');
        var intv;

        function displayUploads(data){
            //console.log(data, data.length);
            var uploads = document.getElementById('uploads'),anchor,x;

            for(x=0; x < data.length; x++){

                //alert(data[x].file);
                anchor = document.createElement('a');
                anchor.href = data[x].file;
                anchor.innerText = data[x].name;

                uploads.appendChild(anchor);
            }               
        }

        function upload(files){
            //console.log(files);
            var formData = new FormData(), 
                xhr      = new XMLHttpRequest(),    //for ajax calls...
                x;                                  //for the loop..

                for(x=0;x<files.length; x++){
                    formData.append('file[]', files[x]);

                    /*//do this for every file...
                    xhr = new XMLHttpRequest();

                    //open... and send individually..
                    xhr.open('post', 'upload.php');
                    xhr.send(formData);*/
                }

                xhr.onload = function(){
                    var data = JSON.parse(this.responseText);   //whatever comes from our php..
                    //console.log(data);
                    displayUploads(data);

                    //clear the interval when upload completes... 
                    clearInterval(intv);
                }                   

                xhr.onerror = function(){
                    console.log(xhr.status);
                }

                //use this to send all together.. and disable the xhr sending above...

                //open... and send individually..
                intv = setInterval(updateProgress, 50);
                xhr.open('post', 'upload.php');
                xhr.send(formData);

                //update progress... 
                 /* */                   
        }

        function updateProgress(){
            console.log('hello');
         }          

        dropzone.ondrop = function(e){
            e.preventDefault(); //prevent the default behaviour.. of displaying images when dropped...
            this.className = 'dropzone';
            //we can now call the uploading... 
            upload(e.dataTransfer.files); //the event has a data transfer object...
        }

        dropzone.ondragover = function(){
            //console.log('hello');
            this.className = 'dropzone dragover';
            return false;
        }

        dropzone.ondragleave = function(){
            this.className = 'dropzone';
            return false;
        }           
    }(window)); 
```

**CSS：**

```
body{
	font-family:Arial, Helvetica, sans-serif; 
	font-size:12px;
}

.dropzone{
	width:300px; 
	height:300px;
	border:2px dashed #ccc;
	color:#ccc;
	line-height:300px;
	text-align:center;
}

.dropzone.dragover{
	border-color:#000;
	color:#000;
}
```

* * *

## 回答 #22

> 赞同：-2
> 
> 时间：2016-07-12T19:15:01.850

将`greedy : true`给孩子用作 的函数`droppable`。然后仅启动在第一层上单击的事件。*

# c++ - 定义具有组合关系的类

> ID：10867517
> 
> 赞同：2
> 
> 时间：2012-06-03T02:45:58.980
> 
> 标签：c++

一个文档可以有许多容器，每个容器可能有也可能没有子容器。每个容器都有名称和容器 ID。

在 C++ 中，我将其建模如下

```
 class Container
    {
        string ContainerName;
        int ContainerID;

        int NumberofSubContainers; //number of sub-containers this contain contains
        Container* subcontainerlist;
    };

    class Document
    {
        string DocumentName;

        int NumofContainers; //number of containers document contains
        Container* containerlist;
    }; 
```

这种方法正确还是有更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T03:26:13.980

最好使用 STL 提供的容器，而不是描述你自己的容器（除非你已经证明它不合适）。如果（子）容器是有序的，但不是按它们的 ID 排序的，那么 a `vector`or`deque`可能是不错的选择。所有 STL 容器都有一个`size()`方法来报告容器所包含的元素数量。

您也没有在模型中公开您的任何成员。您要么需要将它们公开，要么提供公共访问器，或者定义朋友。作为一个模型，您可能应该定义公共接口，以便您以后可以自由地修改您的实现，同时保持您的模型完好无损。

在您的模型中，除了 ID 之外，它`Document`看起来与 a 完全一样`Container`，因此可以将其分解。

```
class Container;
typedef std::vector<Container> Containers;

class ContainerOwner
{
protected:
    std::string m_name;
    Containers m_list;
};

class Document : public ContainerOwner
{
public:
    std::string & DocumentName () { return m_name; }
    const std::string & DocumentName () const { return m_name; }

    Containers & ContainerList () { return m_list; }
    const Containers & ContainerList () const { return m_list; }
};

class Container : public ContainerOwner
{
    int m_id;
public:
    std::string & ContainerName () { return m_name; }
    const std::string & ContainerName () const { return m_name; }

    int & ContainerId () { return m_id; }
    int ContainerId () const { return m_id; }

    Containers & SubContainerList () { return m_list; }
    const Containers & SubContainerList () const { return m_list; }
}; 
```

# bash - mysqldump 与 db 在一个单独的文件中

> ID：10867520
> 
> 赞同：35
> 
> 时间：2012-06-03T02:46:29.803
> 
> 标签：bash, awk, backup, mysqldump

我正在编写一个单行命令，将所有数据库备份到它们各自的名称中，而不是使用一个 sql 中的所有内容进行转储。

例如：db1 被保存到 db1.sql 并且 db2 被保存到 db2.sql

到目前为止，我已经收集了以下命令来检索所有数据库。

```
mysql -uuname -ppwd -e 'show databases' | grep -v 'Database' 
```

我打算用 awk 管它做类似的事情

```
awk '{mysqldump -uuname -ppwd $1 > $1.sql}' 
```

但这不起作用。

我是 bash 的新手，所以我的想法可能是错误的。
我应该怎么做才能使其以各自的名称导出数据库？

更新：
好的，必须最终设法从下面的提示中让它工作。
这是最终脚本

```
# replace [] with your own config
# replace own dir to save
# echo doesn't work. hmm...

mysql -u[uname] -p'[pwd]' -e "show databases" \
| grep -Ev 'Database|information_schema' \
| while read dbname; \
do \
echo 'Dumping $dbname' \
mysqldump -u[uanme] -p'[pwd]' $dbname > ~/db_backup/$dbname.sql;\
done 
```

的回声部分不起作用。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-03T02:54:06.090

```
mysql -uroot -N -e 'show databases' | while read dbname; do mysqldump -uroot --complete-insert --some-other-options "$dbname" > "$dbname".sql; done 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-19T07:06:43.773

为每个数据库创建备份确实效率更高。不仅在需要时更容易恢复，而且我还经历过，如果一个表损坏/损坏，对整个数据库进行备份会损坏。并且通过为每个数据库创建备份，它只会中断该数据库，其余的仍然有效。

我们为备份 mysql 数据库而创建的 oneliner 是：

```
mysql -s -r -u bupuser -pSecret -e 'show databases' | while read db; do mysqldump -u bupuser -pSecret $db -r /var/db-bup/${db}.sql; [[ $? -eq 0 ]] && gzip /var/db-bup/${db}.sql; done 
```

最好使用密码“Secret”（更改！）创建一个新的只读 mysql 用户“bupuser”。它将首先检索数据库列表。然后循环并为每个数据库创建一个 dump.sql 文件到 /var/db-bup （您可以更改）。并且只有在没有遇到错误时才 gzip 文件，这将真正大大节省存储空间。当某些数据库遇到错误时，您将看到 .sql 文件而不是 .sql.qz 文件。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-10-10T05:13:11.590

这是一个简单的脚本，它将：

*   转储所有数据库并压缩输出->`SCHEMA_NAME.sql.gz`
*   使用 [autocommit/unique_checks/foreign_key_checks] 加速导入
*   排除默认模式

文件：dump_all.sh

**如何使用：**
./Dump_all.sh -> 将转储所有数据库
./Dump_all.sh SCHEMA_NAME -> 将转储 SCHEMA_NAME 数据库

```
#!/bin/bash
MYSQL_USER="root"
MYSQL_PASS="YOUR_PASS"

echo "-- START --"

echo "SET autocommit=0;SET unique_checks=0;SET foreign_key_checks=0;" > tmp_sqlhead.sql
echo "SET autocommit=1;SET unique_checks=1;SET foreign_key_checks=1;" > tmp_sqlend.sql

if [ -z "$1" ]
  then
    echo "-- Dumping all DB ..."
    for I in $(mysql -u $MYSQL_USER --password=$MYSQL_PASS -e 'show databases' -s --skip-column-names); 
    do
      if [ "$I" = information_schema ] || [ "$I" =  mysql ] || [ "$I" =  phpmyadmin ] || [ "$I" =  performance_schema ]  # exclude this DB
      then
         echo "-- Skip $I ..."
       continue
      fi
      echo "-- Dumping $I ..."
      # Pipe compress and concat the head/end with the stoutput of mysqlump ( '-' cat argument)
      mysqldump -u $MYSQL_USER --password=$MYSQL_PASS $I | cat tmp_sqlhead.sql - tmp_sqlend.sql | gzip -fc > "$I.sql.gz" 
    done

else
      I=$1;
      echo "-- Dumping $I ..."
      # Pipe compress and concat the head/end with the stoutput of mysqlump ( '-' cat argument)
      mysqldump -u $MYSQL_USER --password=$MYSQL_PASS $I | cat tmp_sqlhead.sql - tmp_sqlend.sql | gzip -fc > "$I.sql.gz" 
fi

# remove tmp files
rm tmp_sqlhead.sql
rm tmp_sqlend.sql

echo "-- FINISH --" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-31T09:31:01.060

这对我有用

```
mysql -s -r -uroot -e 'show databases' -N | while read dbname; do 
    mysqldump -uroot --complete-insert --single-transaction "$dbname" > "$dbname".sql; 
done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T02:52:48.933

不是您的问题的答案，而是看一下 Sourceforge 上的[AutoMySQLBackup](http://sourceforge.net/projects/automysqlbackup/)项目，而不是重新发明轮子。它可以满足您的需求，并提供大量附加功能，包括压缩、加密、轮换和电子邮件通知。我前一阵子用过，效果很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-03T09:03:37.573

在寻找 @Jeshurun 建议的 AutoMySQLBackup 项目的可用软件包时，我来到了[荷兰](http://hollandbackup.org)。

对这个名字很感兴趣（我住在荷兰南部的比利时，有时——或者更好的一些地方——被称为“荷兰”），我决定去看看。也许它也可以帮助你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-03T02:53:05.177

看起来不错。目前我唯一能找到的（未经测试）是你在*Show Tables*之后缺少一个分号。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-29T18:51:54.107

这就是我正在使用的，它非常简单，对我来说效果很好。

`mysql --skip-column-names -u root -p -e 'show databases' | while read dbname; do mysqldump --lock-all-tables -u root -p "$dbname"> "$(date +%Y%m%d)-$dbname".sql; done`

带压缩选项：

`mysql --skip-column-names -u root -p -e 'show databases' | while read dbname; do mysqldump --lock-all-tables -u root -p "$dbname" | gzip> /tmp/"$(date +%Y%m%d)-$dbname".sql.gz; done`

如果您没有在命令中添加密码，则需要输入密码加上您拥有的数据库总数。

# jquery - jQuery UI 自动完成：告诉它我的“标签”和“值”

> ID：10867525
> 
> 赞同：7
> 
> 时间：2012-06-03T02:47:54.127
> 
> 标签：jquery, jquery-ui-autocomplete

当那些不是 JSON 数组中使用的索引名称时，有没有办法告诉 jQuery UI Autocomplete 哪些 JSON 数组索引用作“标签”和“值”？

包含我的查找值的数组如下所示（由 Firebug 记录）：

```
[ Object { id="12", name="Don Davis" }, Object { id="17", name="Stan Smith" } ] 
```

我想使用 'id' 作为 'label' 和 'name' 作为 'value' 但不知道如何告诉配置对象。

我的数组包含在一个局部变量中——没有进行 Ajax 调用。

这个[对](https://stackoverflow.com/a/7213191/723007)另一个问题的回答通过创建一个隐藏的表单输入来解决这个问题，但似乎有一种更简洁的方式来处理这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T03:32:36.440

通过阅读[Jquery UI](http://jqueryui.com/demos/autocomplete/#custom-data)文档，您可以尝试这样的事情：

```
<script>
    $(function() {
var projects = [ { id: "12",value: "Don Davis" }, { id: "17", value:"Stan Smith" } ]

    $( "#project" ).autocomplete({
        minLength: 0,
        source: projects,
        focus: function( event, ui ) {
            $( "#project" ).val( ui.item.value);
            return false;
        },
        select: function( event, ui ) {
            $( "#project" ).val( ui.item.value);
            $( "#project-id" ).val( ui.item.id);

            return false;
        },
        search: function(event, ui) { console.log(event); console.log(ui) }
    })
    .data( "autocomplete" )._renderItem = function( ul, item ) {
        return $( "<li></li>" )
            .data( "item.autocomplete", item )
            .append( "<a>" + item.value+"</a>" )
            .appendTo( ul );
    };
});​
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-08T16:11:28.050

只需将结果转换为包含标签值对象列表的数组

```
var list= result.map(function (item) { return { label: item.title, value: item.value }; });
$( "#project" ).autocomplete({
    source: list
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-12-06T19:37:01.967

您必须返回一个像这样的数组：（端服务器 PHP）

`for( ... ){
$suggest = array('value'=>$value,'label'=>$label); }`

# wordpress - W3 Total Cache 缩小重写规则不适用于 nginx

> ID：10867526
> 
> 赞同：1
> 
> 时间：2012-06-03T02:48:05.370
> 
> 标签：wordpress, nginx, rewrite, minify

我已经在 nginx 服务器上安装了带有 W3 Total Cache 的 WordPress。我正在使用带有 Opcode APC 和自动模式的 minify 选项。激活此选项后，我收到以下错误：

> 似乎 Minify URL 重写不起作用。如果使用 apache，请验证服务器配置是否允许 .htaccess，或者如果使用 nginx，请验证所有配置文件都包含在配置中。

在 nginx.conf 我有插件建议我放置的内容，即：

```
# BEGIN W3TC Minify core
rewrite ^/usr/share/nginx/html/wp-content/w3tc/min/w3tc_rewrite_test$ /usr/share/nginx/html/wp/wp-content/w3tc/min/index.php?w3tc_rewrite_test=1 last;
rewrite ^/usr/share/nginx/html/wp-content/w3tc/min/(.+\.(css|js))$ /usr/share/nginx/html/wp/wp-content/w3tc/min/index.php?file=$1 last;
# END W3TC Minify core 
```

在此规则之上，我还有以下内容可以启用 WordPress 漂亮的永久链接：

```
try_files $uri $uri/ /index.php; 
```

这是为了防止零日攻击：

```
#try_files      $uri =404; 
```

但是禁用这些仍然不会使缩小重写工作。

如果我为 minify 禁用 URL 重写，请求会返回 400 状态。

知道我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-23T14:18:03.557

Nginx 缺少一个配置，该配置通过`.htaccess`文件包含在 Apache 配置中。在我的情况下，重写是有效的，但是我使用文件、APC 和 Memcached 缩小收到了上面的错误消息。在对代码进行了一番挖掘之后，我将这一行添加到我的 Nginx 配置中，它清除了消息：

```
rewrite /w3tc_rewrite_test$ /wp-content/plugins/w3-total-cache/pub/minify.php?w3tc_rewrite_test=1 permanent; 
```

您还可以`nginx.conf`将插件生成的包含在您的根文件夹中。

[http://justinsilver.com/technology/fixed-appears-minify-url-rewriting-working-w3tc-nginx/](http://justinsilver.com/technology/fixed-appears-minify-url-rewriting-working-w3tc-nginx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T06:43:51.233

您不需要按照插件的建议将这些行放在 nginx 配置中。

这是一个更新的配置 - [http://rtcamp.com/tutorials/standard-wordpressnginx-configuration-w3-total-cache/](http://rtcamp.com/tutorials/standard-wordpressnginx-configuration-w3-total-cache/)

它可能会进入 W3 Total Cache 帮助部分（请参阅上面文章的评论以获取参考）

# javascript - 使用 API 修改和替换 Google Maps Tiles

> ID：10867529
> 
> 赞同：1
> 
> 时间：2012-06-03T02:48:36.747
> 
> 标签：javascript, google-maps

我想用 GMaps API 替换谷歌地图中的一些图块。事实上，我想知道如何在 API 中集成新的磁贴？提前致谢

# ios - Amazon iOS SDK S3 上传多部分请求失败并出现神秘 URL

> ID：10867530
> 
> 赞同：3
> 
> 时间：2012-06-03T02:49:14.890
> 
> 标签：ios, sdk, amazon-s3, amazon-web-services

我的应用程序正在实现[此处](http://aws.amazon.com/articles/0006282245644577)描述的一种技术，以允许通过 iPhone 的 3G 连接进行多部分文件上传。我也设法将委托插入到操作中，并且可以监控上传进度。但是，上传完成后，文件根本不存在。

深入挖掘后，我发现 SDK 中的 URL 似乎格式不正确。以下是相关代码：

```
__strong AmazonS3Client *s3 = [[AmazonS3Client alloc] initWithAccessKey:kS3Access withSecretKey:kS3Secret];
s3.timeout = 240;

s3ResponseHandler = [[S3ResponseHandler alloc] init];

S3InitiateMultipartUploadRequest *initReq = [[S3InitiateMultipartUploadRequest alloc] initWithKey:[filePath lastPathComponent] inBucket:kS3Bucket]; 
```

initReq 对象最终继承自具有 url 属性的 S3Request。在以下几行中，我记录了我的 [filePath lastPathComponent] 和该 url 属性的值：

```
NSLog(@"filePath lastComp: %@", [filePath lastPathComponent]);
NSLog(@"initReq URL: %@", [initReq url]); 
```

结果：

```
filePath lastComp: filename.ext
initReq URL: https://<bucketname>.(null)/filename.ext 
```

我相信 URL 应该是[https://bucketname.s3.amazonaws.com](https://bucketname.s3.amazonaws.com)，而不是（null）。

如果这是 SDK 用来推送我的上传的 URL，那么它显然不起作用！谁能建议我可以采取哪些故障排除步骤来进一步诊断此问题和解决方法？这几乎感觉像是 SDK 中的一个错误，但我对自己的信任远非如此。

我正在使用当前（撰写本文时）1.3.0 版本的 SDK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T21:32:33.533

感谢亚马逊 AWS 的支持，我设法解决了这个问题。完整的帖子在[这里](https://forums.aws.amazon.com/thread.jspa?messageID=350809&#350809)，但这是后代的坚果。

事实证明，当您支持分段上传时，文件必须大于 5MB，*最后一部分除外*。我认为第一部分也可能是最后一部分。所以现在我有一个简单的测试语句：小于 5MB 的文件将使用“Single Put Object Request”（根据我的问题中的链接）上传，而较大的文件将分成多部分。奇迹般有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T05:10:46.737

嗨，我看到您已经找到了答案，但是我想为其他人提供一些额外的见解，让他们一起了解 AWS。

[这篇文章](https://mobile.awsblog.com/post/TxIRFEQTW9XU8G/S3TransferManager-for-iOS-Part-I-Asynchronous-Uploads)详细介绍了上传和跟踪它们的一个过程。它还包含一些关于 S3TransferManager 如何处理线程的见解。相关地，AWS 提供了两种将数据发布到 s3 的重要方法：`upload:`和`putObjectRequest:`. 该方法`upload:`提供了上传多个文件/请求而无需停止 UI 的能力。该方法`getObjectRequest:`可能会暂停您的 UI 并阻止另一个请求，直到传输完成。

再次只是为了增加对请求方法和 S3TransferManager 处理线程方式的额外见解。

# android - Android 在 Mediaplayer 中显示/隐藏自定义按钮

> ID：10867539
> 
> 赞同：0
> 
> 时间：2012-06-03T02:52:05.693
> 
> 标签：android, button, media-player, hide

我一直在寻找如何显示/隐藏我为此 mediaPlayer 创建的按钮，但找不到好的示例……我希望控件像 mediaController 一样消失并重新出现在屏幕点击上。对 Java 和 Android 来说非常新，播放器和控件按预期工作，但现在我需要在屏幕点击时隐藏/显示它们。感谢您的帮助（XML 位于 Java 代码下方）

```
 public class Audio_Image extends BT_activity_base implements
      MediaPlayer.OnCompletionListener, MediaPlayer.OnPreparedListener,
      MediaPlayer.OnErrorListener, MediaPlayer.OnBufferingUpdateListener {

     private String TAG = getClass().getSimpleName();
     private MediaPlayer mp = null;
     private boolean mShowing = false;

     private Button play;
     private Button pause;
     private Button stop;

     private String dataURL = "";
     public String thisActivityName = "Audio_Image";

     @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            //reference to base layout..
           LinearLayout baseView = (LinearLayout)findViewById(R.id.baseView);

           //setup background colors...
           BT_viewUtilities.updateBackgroundColorsForScreen(this, this.screenData);

           //setup background images..
           if(backgroundImageWorkerThread == null){
               backgroundImageWorkerThread = new BackgroundImageWorkerThread();
               backgroundImageWorkerThread.start();
           }            

           //setup navigation bar...
           LinearLayout navBar = BT_viewUtilities.getNavBarForScreen(this, this.screenData);
           if(navBar != null){
               baseView.addView(navBar);
           }

           //inflate this screens layout file...
           LayoutInflater vi = (LayoutInflater)thisActivity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
           View thisScreensView = vi.inflate(R.layout.audio_image, null);

           //add the view to the base view...
           baseView.addView(thisScreensView);

         //fill JSON properties...
                dataURL = BT_strings.getJsonPropertyValue(this.screenData.getJsonObject(), "dataURL", "");

      play = (Button) findViewById(R.id.play);
      pause = (Button) findViewById(R.id.pause);
      stop = (Button) findViewById(R.id.stop);

      play.setOnClickListener(new View.OnClickListener() {
       public void onClick(View view) {
        play();

       }
      });

      pause.setOnClickListener(new View.OnClickListener() {
       public void onClick(View view) { 

           pause();

       }
      });

      stop.setOnClickListener(new View.OnClickListener() {
       public void onClick(View view) {
        stop();
       }
      });
     }

     private void play() {
         showProgress("Starting audio stream...", 
                 "Please be patient. If you're on 3G this could take a bit.\nWi-Fi is much better for streaming.");

      Uri myUri = Uri.parse(dataURL);
      try {
       if (mp == null) {
        this.mp = new MediaPlayer();
       } else {
        mp.stop();
        mp.reset();
       }
       mp.setDataSource(this, myUri); // Go to Initialized state
       mp.setAudioStreamType(AudioManager.STREAM_MUSIC);
       mp.setOnPreparedListener(this);
       mp.setOnBufferingUpdateListener(this);

       mp.setOnErrorListener(this);
       mp.prepareAsync();

       Log.d(TAG, "LoadClip Done");
      } catch (Throwable t) {
       Log.d(TAG, t.toString());
      }
     }

     @Override
     public void onPrepared(MediaPlayer mp) { 
      Log.d(TAG, "Stream is prepared");
      mp.start();
      mp.setLooping(true);
      hideProgress();
     }

     private void pause() {
         if(mp!=null) 
         if (mp.isPlaying()) { pause.setText("Pause/Resume");
             mp.pause();
          } else { 
              mp.start();
          }

     }

     private void stop() {
         if(mp!=null) mp.stop();

     }

     @Override
     public void onDestroy() {
      super.onDestroy();
      stop();

     }

     public void onCompletion(MediaPlayer mp) {
         stop();

     }

     public boolean onError(MediaPlayer mp, int what, int extra) {
      StringBuilder sb = new StringBuilder();
      sb.append("Media Player Error: ");
      switch (what) {
      case MediaPlayer.MEDIA_ERROR_NOT_VALID_FOR_PROGRESSIVE_PLAYBACK:
       sb.append("Not Valid for Progressive Playback");
       break;
      case MediaPlayer.MEDIA_ERROR_SERVER_DIED:
       sb.append("Server Died");
       break;
      case MediaPlayer.MEDIA_ERROR_UNKNOWN:
       sb.append("Unknown");
       break;
      default:
       sb.append(" Non standard (");
       sb.append(what);
       sb.append(")");
      }
      sb.append(" (" + what + ") ");
      sb.append(extra);
      Log.e(TAG, sb.toString());
      return true;
     }

     public void onBufferingUpdate(MediaPlayer mp, int percent) {
      Log.d(TAG, "PlayerService onBufferingUpdate : " + percent + "%");
     }

        } 
```

XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
 xmlns:android="http://schemas.android.com/apk/res/android"

 android:layout_width="fill_parent"
 android:layout_height="fill_parent">
 <Button
  android:text="Play"
  android:id="@+id/play"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:textSize="20sp">

 </Button>
 <Button
  android:text="Pause"
  android:id="@+id/pause"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:textSize="20sp"></Button>
 <Button
  android:text="Stop"
  android:id="@+id/stop"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:textSize="20sp"></Button>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T03:13:40.300

就我而言，我将`media player`通过将其设为`LinearLayout`. 这样我可以重用它，并在`setVisiblity()`这里显示/隐藏是示例

```
public Player(Context context) {
    super(context);
    this.context = context;
    LayoutInflater.from(context).inflate(R.layout.player, this, true);
    progressText = (TextView) findViewById(R.id.playerProcessText);
    progressControl = (SeekBar) findViewById(R.id.playerSeekbar);
    btnPlay = (Button) findViewById(R.id.playerPlay);
    btnStop = (Button) findViewById(R.id.playerStop);
    btnClose = (Button) findViewById(R.id.playerClose);
    initListener();
}

public void setFilename(String filename) {
    this.filename = filename;
}

private void initListener() {
    // TODO Auto-generated method stub
    btnPlay.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            if (isStop && !isPlay && !isPaused) {
                release();
                setPlayer();
                isStop = false;
                btnPlay.setText("PlayAfterStop");
                onEverySecond.run();
            }
            if (!isPaused) {
                mediaPlayer.pause();
                btnPlay.setText("PauseWhilePlay");
                isPaused = true;

            } else if (isPlay) {
                mediaPlayer.start();
                btnPlay.setText("StartAfterPause");
                isPaused = false;
                isPlay = true;
                onEverySecond.run();
            }
        }
    });

    btnStop.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            setStop();

        }
    });

    btnClose.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            setStop();
            Player.this.setVisibility(View.GONE);
        }
    }) 
```

.....................

![在此处输入图像描述](../Images/9027989c1e9e1ff45242af8ba9b20dfb.png)

# reflection - 映射有区别的联合中的所有值

> ID：10867544
> 
> 赞同：2
> 
> 时间：2012-06-03T02:52:51.490
> 
> 标签：reflection, f#, discriminated-union

假设我有一个受歧视的工会：

```
type card = Smithy | Cellar | Chapel 
```

以及将可区分联合映射到某个值的函数：

```
let initialCardCount = function
  Smithy -> 4
  Cellar -> 6
  Chapel -> 2 
```

我想生成一个包含工会每个成员的成本的地图，例如：

```
[(Smithy, 4); (Cellar, 6); (Chapel, 2)] 
```

这可能吗？我希望能够做类似的事情：

```
List.zip (allValues f) (List.map getCost (allValues f)) |> Map.ofList 
```

[这个问题](https://stackoverflow.com/questions/6997083/how-to-enumerate-a-discriminated-union-in-f)很有帮助，但不是我所需要的；我希望能够访问内存中的工会成员，而不仅仅是检查他们的属性。

我想这样做的原因是我可以有一个可区分的联合代表游戏中所有不同类型的牌，以及一个告诉你每张牌在开始时应该有多少张的函数，然后轻松生成初始卡片到计数的映射。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T11:30:14.833

您可以使用 F# Reflection 获得所有可能的可区分联合案例的列表，但了解 Reflection 的缺点很重要 - 除非小心使用，否则很容易导致设计不佳（可能有更简单和更优雅的功能解决方案）和它的效率也较低（尽管您可能只需要一次获取所有案例的列表）。

以下`getAllValues`函数获取所有案例 - 它假定没有案例存储任何值（即`Smithy of string`不起作用！）如果您想将一些参数传递给案例，您需要在的第二个参数中传递装箱值`MakeUnion`：

```
open Microsoft.FSharp.Reflection

let getAllValues<'T>() : 'T list =
  let cases = FSharpType.GetUnionCases(typeof<'T>)
  [ for c in cases -> unbox (FSharpValue.MakeUnion(c, [| |])) ] 
```

以下是在您的场景中使用该函数的示例：

```
type card = Smithy | Cellar | Chapel 

let initialCardCount = function 
  | Smithy -> 4 
  | Cellar -> 6 
  | Chapel -> 2 

let values = getAllValues<card>()
List.zip values (List.map initialCardCount values) 
```

# command - c ++ fork exec来自命令向量

> ID：10867545
> 
> 赞同：1
> 
> 时间：2012-06-03T02:52:53.580
> 
> 标签：command, exec, fork

我真的迷路了。构建 Linux shell，处理外部命令。我正在尝试创建一个新进程然后执行命令。对 exec()、fork()、pipe() 和 dup() 来说非常新，但我确信我在某个地方需要它们。

基本上我的问题是：将参数传递给 exec 的最佳方法是什么？我知道有很多选择，但是如果我有一个包含“ls -l”的字符串向量，我该如何将它传递给执行？我应该将其重新解析为“ls”和“-l”吗？

我已经有 fork() 创建子进程，但我不知道如何运行 exec()。

在一个有点相关的注释中，我应该在 fork() 的 waitpid 部分中添加什么

```
 pid_t pid;
                int status;
                pid = fork();
                if (pid < 0)
                {
                    cout << "Fork failed." << endl;
                }
                else if (pid == 0)
                {

                    execv("/bin/sh", (VECTOR OF COMMANDS?));
                    _exit (EXIT_FAILURE);
                }
                else
                {
                    if (waitpid (pid, &status, 0) == pid)
                    {
                        cout << "huh?" << endl;
                    }
                    else
                    {
                        cout << "Error." << endl;
                    }
                } 
```

下一个障碍是管道，但当我到达那里时，我会越过那座桥。

编辑：

对于它的价值，这是我遇到问题的解析和调用。后面带有“ *** *”的行似乎是给我带来问题的行

```
 const char *args [1024];

string::iterator it5;
size_t pos5;

for (it5=origCstr.begin(); it5 < origCstr.end(); it5++)
{
    string::iterator it2;
    pos5 = origCstr.find(' ');
    if (pos5 == string::npos)
    {
        tmpChar = origCstr.c_str();
        args[argCount] = tmpChar;
        argCount++;
        break;
    }
    it2 = it5 + pos5;
        tmpCstr = origCstr.substr(0, pos5);
    tmpChar = tmpCstr.c_str();
    args[argCount] = tmpChar;
    origCstr.erase(it5, it2+1);
    argCount++;
}
    tmpChar = origCstr.c_str();
args[argCount] = tmpChar;
argCount++;

    pid_t pid;
int status;
pid = fork();
if (pid < 0)
{
    cout << "Fork failed." << endl;
}
else if (pid == 0)
{

        execv("/bin/", args); ****
        _exit (EXIT_FAILURE);
}
else
{
    if (waitpid (pid, &status, 0) == pid)
    {
        cout << "huh?" << endl;
    }
    else
    {
        cout << "Error." << endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T02:56:24.223

您将需要调用“execv”，以便您可以制作`char*[]`包含选项的选项。“ls”和“-l”在数组中都有自己的位置。

您必须抛弃 const，或使用 char `char const*[]' 数组，然后抛弃其上的 const 以将其传递给 execv。通常，这些系统调用的声明对 C++ 有点不友好。

请参阅[有关此主题的堆栈溢出问题](https://stackoverflow.com/questions/190184/execv-and-const-ness)。

[http://www.yolinux.com/TUTORIALS/ForkExecProcesses.html](http://www.yolinux.com/TUTORIALS/ForkExecProcesses.html)上有一个合理的教程。

粗略地讲：

```
char * exec_args[1024];
int arg_count = 0;
std::vector<std::string> theArgs;

exec_args[arg_count++] = "/bin/whatever"; // leave command in argv[0]
for (int x = 0; x < theArgs.size(); x++) {
   exec_args[arg_count++] = strdup(theArgs[x].c_str());
}
exec_args[arg_count++] = 0; // tell it when to stop!

execv("/bin/whatever", exec_args); 
```

# html - 如何在包括 Firefox 在内的所有主要设备和浏览器上播放视频？

> ID：10867554
> 
> 赞同：3
> 
> 时间：2012-06-03T02:55:11.160
> 
> 标签：html, flash, mp4, ogg, webm

我的目标是在支持所有主要浏览器的网站上拥有一个视频播放器。

我将视频转换为 4 种不同的视频格式，.ogg、.mp4、.webm 和 .swf。

在下面的代码中，html 5 元素尝试播放 mp4、ogg 或 webm 格式的视频。如果失败，代码“回退”以尝试对象元素，因此如果对象也失败，则嵌入元素。

它似乎在 Chrome、Safari、Ipad / Iphone、Android 上运行良好，但我在使用 Firefox 和 Internet Explorer 时遇到了问题。它显示了所有浏览器上的海报 .jpg 以及 Firefox 上的以下错误消息。

> 未找到支持格式和 MIME 类型的视频。

任何人都可以帮助我**改进此代码**或拍摄一些想法来帮助我**在 Firefox、Internet Explorer 和 Safari 上播放视频**吗？

```
<video width="320" height="240" controls="controls" poster="may_28_2012_F6_HQ.jpg">
  <source src="may_28_2012_F6_HQ.ogg" type="video/ogg" />
  <source src="may_28_2012_F6_HQ.mp4" type="video/mp4" />
  <source src="may_28_2012_F6_HQ.webm" type="video/webm" />
    <object width="320" height="240" data="may_28_2012_F6_HQ.mp4">
      <embed width="320" height="240" src="may_28_2012_F6_HQ.swf">
          Your browser does not support video
      </embed>
    </object>
</video> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T12:06:45.127

Firefox 错误没有找到支持格式和 MIME 类型的视频。您可以通过将以下 MIME 类型添加到您的 .htaccess 文件来解决此问题

```
AddType video/mp4 mp4 m4v f4v f4p
AddType video/ogg ogv
AddType video/webm webm
AddType video/x-flv flv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T03:34:40.193

我认为你应该使用Javascript来检测浏览器，并插入相应的视频格式。

喜欢使用 jQuery：

```
if($.browser.mozilla) {
  // using ogg
}else if($.browser.webkit) {
  // using mp4
}else if($.browser.opera) {
  // as webkit
}else {
  // using flash as player
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T09:53:06.133

可以使用这个播放器[http://mediaelementjs.com/](http://mediaelementjs.com/)

# html - What's The Most Current Way To Structure Breadcrumb Navigation Using HTML5

> ID：10867560
> 
> 赞同：7
> 
> 时间：2012-06-03T02:57:16.767
> 
> 标签：html, semantics, markup, breadcrumbs

[Chris Coyier wrote a while ago](http://css-tricks.com/markup-for-breadcrumbs/) that the best markup uses `rel='up'` in a `<nav>` section, but that was in 2010, and he said that this way was debated back then. What's the best way to mark up hierarchy using HTML5 for a breadcrumb navigation bar? Here is Chris' reccomendation:

```
<nav>
  <p>
    <a href="/" rel="index up up up">Main</a> >
    <a href="/products/" rel="up up">Products</a> >
    <a href="/products/dishwashers/" rel="up">Dishwashers</a> >
    <a>Second hand</a>
  </p>
</nav> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T15:47:14.257

This is how Google represents markup for BreadCrumb (using Microdata) -

```
<div itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
    <a href="http://www.example.com/dresses" itemprop="url">
        <span itemprop="title">Dresses</span>
    </a> ›
</div>  
<div itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
    <a href="http://www.example.com/dresses/real" itemprop="url">
        <span itemprop="title">Real Dresses</span>
    </a> ›
</div>  
<div itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
    <a href="http://www.example.com/clothes/dresses/real/green" itemprop="url">
        <span itemprop="title">Real Green Dresses</span>
    </a>
</div> 
```

Source : [https://support.google.com/webmasters/answer/185417](https://support.google.com/webmasters/answer/185417)

But I don't really think that there is right-or-wrong in either of the approaches!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T03:26:34.033

Well, personally, I like [this article](http://coding.smashingmagazine.com/2011/11/11/our-pointless-pursuit-of-semantic-value/) by Divya Manian, which explains that semantics really don't matter as much as most people seem to think. Most of the time, people will be viewing your page in a web browser, and will have no idea what your underlying css or html structure is, and as such couldn't care less as long as it looks pretty and works.

Most search engines and computer accessibility software will figure out what it is regardless of your specific markup, as long as you don't specifically try to hinder them. Putting your navigation in a nav tag will of course help the smarter software, but the smarter software will figure it out anyway.

Worrying about whether your code follows semantics will not provide you with enough tangible benefits to make it worth your time to decide whether a `rel=up` is the "best way" to code your navigation. Don't waste your time, just code your site. (Unless of course you're getting paid by the hour.)

# php - 我根本不懂课，所以很困惑

> ID：10867566
> 
> 赞同：1
> 
> 时间：2012-06-03T02:58:18.373
> 
> 标签：php, oop, class

我已经进行了很长时间的程序化，从不自己上课。制作了我自己的功能，但从不制作对象。课程让我很困惑，我现在迷失在我的代码中。我不明白他们应该如何让事情变得更容易和更有效率。有人可能会根据我在这里的编码方式指出我做错了什么的正确方向吗？

在前面的例子中，我正在制作一个盒子，里面放了一些东西。图书。书籍有不同的尺寸方式来安排它们放入盒子中，所以我想要在放入时以任何方式对齐它以确定您可以放入多少。LimitDeterminer 确定如果它们都放在相同的方向上可以容纳多少，然后将与那里已经存在的东西进行比较。只是一个简报，代码不完整，因为我很沮丧和困惑，这让我在这里纠正我的错误。我也认为我做错了什么，因为我必须不断地为我的函数指定对象......

谢谢

```
<?php

function feetToInches($feet){ //Converts feet to inches
    //$feet = $feet * 12;
    return $feet;
}

class Book{
    var $l = 7;
    var $w = 5;
    var $h = 1;
    var $name = "Book";

    function getDimensions($x){ //Return specified dimension, input as string.
        $dimensionArray = array(
                                "l" => $this->l,
                                "w" => $this->w,
                                "h" => $this->h
                                );
        return $dimensionArray[$x];
    }
}

class Box{
    //This is a box. It has length, width, and height, and you can put things in it.
    var $length = 0;
    var $width = 0;
    var $height = 0;
    var $storedArray = array();
    var $totalPerms = array();

    //Set length,width,height
    function setDimensions($l, $w, $h){
        $this->length = feetToInches($l);
        $this->width = feetToInches($w);
        $this->height = feetToInches($h);
    }

    function storedPerms($array){
        $this->totalPerms[] = $array;
        //results in order
        //lhw
        //hlw
        //wlh
        //whl
        //hwl
        //lwh
    }

    function storeThings($thing, $way){
        $ori = $this->totalPerms[$way];
        var_dump($ori);
        $this->storedArray[] = $thing;
        $this->CalcArrange($ori[0],$ori[1],$ori[2],$thing);
    }

    function getThings($key = null) {
        if ($key) {
            return isset($this->storedArray[$key]) ? $this->storedArray[$key] : null;
        } else {
            return $this->storedArray;
        }
    }

    //Set what's against box length to x, width to y, and height to z. Possible values are "l","w","h".
    function CalcArrange($x,$y,$z,$Thing){
        $lengthDiv = 0;
        $widthDiv = 0;
        $heightDiv = 0;

        $lengthDiv = $this->length / $Thing->getDimensions($x); // 24/7   5    5     7      
        $widthDiv = $this->width / $Thing->getDimensions($y);  //14/5     7    1      1
        $heightDiv = $this->height / $Thing->getDimensions($z); //10/1    1    7      5

        $lengthDiv = intval($lengthDiv);
        $widthDiv = intval($widthDiv);
        $heightDiv = intval($heightDiv);

        echo "<br />" . "Length " . $lengthDiv . " times " . "width " . $widthDiv . " times" . " height " . $heightDiv . " is " . ($lengthDiv * $widthDiv * $heightDiv) . "<br />";
    }

}

$thatBook = new Book;
$BookBox = new Box;
$amount = 96;

$BookBox->setDimensions(24,14,10);

//Put objects in box
function putInBox($obj, $box){
    $box->storeThings($obj, 3);
}

$books = $BookBox->getThings();

foreach ($books as $v){
    echo $v->name . "<br />";
}

function CalcTotalLWH($books){
    foreach($books as $book){
        $lengthSum += $book->l;
        $widthSum += $book->w;
        $heightSum += $book->h;
    }

    echo $lengthSum . "<br />";
    echo $widthSum . "<br />";
    echo $heightSum . "<br />";
    //echo $BookBox->length;

}

echo "<br />";

/*
for($i=0; $i < $possible; $i++){
    $addVal = array_pop($dimArray);
    array_unshift($dimArray, $addVal);
    //var_dump($dimArray);
    $BookBox->CalcArrange($dimArray[0],$dimArray[1],$dimArray[2], $thatBook);
}
*/

function findPerm($array, $map){
    $tmp = $array[$map[2]];
    $array[$map[2]] = $array[$map[1]];
    $array[$map[1]] = $tmp;
    return $array;
 //012   
}

function echoAllArray($array){
    echo "Now trying with ";
    foreach($array as $v){
        echo $v . " ";
    }
}

//Determine possible limits of Box to Object
function LimitDetermine($Obj, $Box){
    $dimArray = array("l","w","h");
    $possible = (count($dimArray)) * 2; //for possibilities. DOING IT RONG USE FACTORIALS.
    $map = array(0,1,2);

    foreach($dimArray as $k => $try){

        //012
        //021
        for($i=0; $i < 2; $i++){
            $dimArray = findPerm($dimArray,$map);
            echoAllArray($dimArray);
            $Box->CalcArrange($dimArray[0],$dimArray[1],$dimArray[2], $Obj);
            $Box->storedPerms($dimArray);
            $addVal = array_pop($map);
            array_unshift($map, $addVal);
        }

        //120
        //102

        //201
        //210
    }
}

LimitDetermine($thatBook,$BookBox);

putInBox($thatBook, $BookBox);

/*
$BookBox->CalcArrange("l","w","h", $thatBook); //Face up flat length to length 60
$BookBox->CalcArrange("w","l","h", $thatBook); //Face up flat width to length 80
$BookBox->CalcArrange("w","h","l", $thatBook); //Width to length, standing. 56
$BookBox->CalcArrange("l","h","w", $thatBook); //The way I usually do it. 84
$BookBox->CalcArrange("h","w","l", $thatBook);
*/

var_dump($BookBox->totalPerms);
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T03:20:31.367

面向对象的代码是一种与过程非常不同的思维方式，我相信你已经熟悉了。本质上，“真正的”面向对象背后的理念（这主要是我在这里的解释）是您创建的每个对象都“做”事情，并且“知道”事情。通常，您可以通过该对象是否真正知道或执行您要求的事情来确定您是否以合乎逻辑的、可理解的方式处理事情。

例如，一个**盒子**可以*存储东西*，你可以**设置***盒子*的维度。您甚至可以*getThings* inside a **box**，但*storedPerms*没有多大意义，*CalcArrange*也没有。稍后我会谈到这些。

 ******** * *

您可以使用 __construct 函数让您的生活更轻松一些。每当您创建书籍或盒子时，您都可以设置其初始尺寸/配置，而无需调用辅助函数。

```
class Box {

    // Define dimension attributes
    public $length;
    public $width;
    public $height;
    public $books;

    public function __construct( $length=0, $width=0, $height=0 ) {
        $this->length = feetToInches( $length );
        $this->width =  feetToInches( $width );
        $this->height = feetToInches( $height );
    }

} 
```

而对于书...

```
class Book {

    // Define dimension attributes
    public $length;
    public $width;
    public $height;
    public $name;

    public function __construct( $name='Book', $length=0, $width=0, $height=0 ) {
        $this->length = feetToInches( $length );
        $this->width =  feetToInches( $width );
        $this->height = feetToInches( $height );
        $this->name = $name;
    }

} 
```

这使您可以像这样创建书籍和盒子：

```
$myNewBox = new Box(60, 12, 24);
$myNewBook = new Book('All Quiet on the Western Front', 12, 4, 8); 
```

从这里，你可能会使用类似的东西：

```
class Box {

    ...

    public function getCapacity( $book ) {

        // Determine how many full books can fit within each dimension
        $lengthCapacity = floor( $this->length / $book->length );      
        $widthDiv =       floor( $this->width / $book->width );
        $heightDiv =      floor( $this->height / $book->height );

        return $lengthCapacity * $widthCapacity * $heightCapacity;
    }
} 
```

然后，你可以通过说：

```
// How many of my new book can fit in my new box?
$bookCapacity = $myNewBox->getCapacity( $myNewBook ); 
```

如果您想尝试以不同方式旋转图书以确定绝对最大容量，那就这样做吧！

```
class Book {

    ...

    public function rotate( $axis ) {

        $startingLength = $this->length;
        $startingWidth = $this->width;
        $startingHeight = $this->height;

        if( $axis == 'x' ) {
            $this->height = $startingLength;
            $this->length = $startingHeight;

        } elseif( $axis == 'y' ) {
            $this->width = $startingLength;
            $this->length = $startingWidth;

        } elseif( $axis == 'z' ) {
            $this->width = $startingHeight;
            $this->height = $startingWidth;

        }

    }
} 
```

* * *

然后你可以编写你的 getCapacity 函数的变体来利用它......

```
class Box {

    ...

    public function getMaxCapacity( $book ) {

        // There are 6 unique ways a book can be positioned
        $axesToRotate = array( 'x', 'y', 'z', 'x', 'y', 'z' );

        $maxCapacity = 0;
        foreach( $axesToRotate as $axisToRotate ) {
            $book->rotate($axisToRotate);
            $maxCapacity = max( $maxCapacity, $this->getCapacity( $book ) );
        }

    } 
```

瞧！您的新功能（假设我已经点了我的 I 并正确地穿过了我的 T），可以像这样运行：

```
$absoluteMaxCapacity = $myNewBox->getMaxCapacity( $myNewBook ); 
```

* * *

最后，语义在这里绝对是非常重要的。我花了大约 10% 的时间编写代码来思考调用方法或变量的最佳方式。此外，尽可能避免代码重复。在上面的示例中，我们实现了 getCapacity 函数，然后 getMaxCapacity 使用该函数来节省时间并简化我们的 getMaxCapacity 函数。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T03:27:01.287

本教程适合初学者...

[http://net.tutsplus.com/tutorials/php/object-oriented-php-for-beginners/](http://net.tutsplus.com/tutorials/php/object-oriented-php-for-beginners/)*******

# c - 程序中的多个scanf导致c崩溃？

> ID：10867567
> 
> 赞同：0
> 
> 时间：2012-06-03T02:58:38.350
> 
> 标签：c

```
#include <stdio.h>

int main()
{       
    printf("how old are you? ");
    int age = 0;
    scanf("%d", age);

    printf("how much does your daily habit cost per day? \n");
    int daily = 0;
    scanf("%d", daily); 

    double thisyear = daily * 365;

    printf("\n");
    printf("this year your habit will cost you: %.2f", thisyear);

    return 0;
} 
```

这是我的学校计划，当我写这篇文章时，我试图让用户 1，给出他们的年龄和 2，他们的日常生活费用。但是当我运行它时我的程序会崩溃

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T03:02:11.977

~~scanf("%d", 每天);~~

需要成为

```
scanf("%d", &daily); 
```

您需要将变量的地址（即指针，这是用 完成的`&`）传递给，`scanf`以便可以更改变量的值。这同样适用于您的其他提示。将其更改为

```
scanf("%d", &age); 
```

现在当你运行你的程序时你应该得到这个：

```
% a.out
how old are you? 30
how much does your daily habit cost per day? 
20

this year your habit will cost you: 7300.00 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T03:01:09.713

scanf 函数需要一个指针。

```
scanf("%d", &age); 
```

同样适用于您在“每日”上扫描的那一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T03:02:54.387

scanf 使用对变量的引用

```
printf("how old are you? ");
int age = 0;
scanf("%d", &age);

printf("how much does your daily habit cost per day? \n");
int daily = 0;
scanf("%d", &daily); 

double thisyear = daily * 365;

printf("\n");
printf("this year your habit will cost you: %.2f", thisyear); 
```

# c++ - 如何使用 C++ 在任务计划程序中创建任务

> ID：10867568
> 
> 赞同：0
> 
> 时间：2012-06-03T03:00:33.100
> 
> 标签：c++, batch-file, taskmanager

我想创建一个程序，以便我所说的“添加任务”。它会询问我所有的变量，例如“任务名称”和其他变量。

然后我使用 system() 来使用以下命令：

schtasks /create /tn TaskName /tr TaskRun /sc schedule /mo 修饰符

如何在 system() 命令中使用 C++ 变量？

或者，如果您有更好的方法来做到这一点，请告诉我。

谢谢你的帮助。-克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T03:23:16.973

您可以使用[任务计划程序 API](http://msdn.microsoft.com/en-us/library/aa383608%28v=vs.85%29)。它有两个版本：

*   [任务调度程序 1.0 接口](http://msdn.microsoft.com/en-us/library/aa383581%28v=vs.85%29)- 可用于 C++ 开发。
*   [Task Scheduler 2.0 Interface](http://msdn.microsoft.com/en-us/library/aa383600%28v=vs.85%29) - 可用于在 C++ 和脚本环境中进行开发。

此外，从[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383614%28v=vs.85%29.aspx)中，请注意每个 API 支持的环境。

> 任务计划程序需要以下操作系统。
> 
> *   任务计划程序 1.0：客户端需要 Windows Vista、Windows XP、Windows 2000 Professional、Windows Me 或 Windows 98。服务器需要 Windows Server 2008、Windows Server 2003 或 Windows 2000 Server。
> *   任务计划程序 2.0：客户端需要 Windows Vista。服务器需要 Windows Server 2008。

# c# - C#如何将函数调用保存在内存中以供以后调用

> ID：10867574
> 
> 赞同：10
> 
> 时间：2012-06-03T03:02:28.130
> 
> 标签：c#, types, delegates, xna

C# 中是否有任何方法可以保存函数调用以供以后调用？例如，我想能够说：

```
public class MyFunctionCaller
{
    public static void SaveFunctionCallForLater(/* Some parameters*/)
    {
    // Save the Function Call in a variable or a list to be invoked after a set amount of time
   }
}

public class MyProgram
{
    public static void Main()
    {
        // Save a call to 'SpecialFunction' along with its parameters,
        // and maybe the object that's calling it (not applicable in
       // this example context, but important to my question)
        MyFunctionCaller.SaveFunctionCallForLater(/* Stuff */);
    }

    public void SpecialFunction(/* Stuff */)
    {
        // Does some cool stuff
    }
} 
```

让我给你一些背景信息：我正在 XNA 中创建一个游戏，我想创建一个 DelayedFunctionCaller 类，任何对象都可以引用它来手动完成函数调用，以及在调用函数之前等待的时间。我自己处理所有的时间等待和触发，所以这不是我迷路的地方，我只是不确定如何或正确的方法来打包要传递给 DelayedFunctionCaller 的函数。

这是踢球者：DelayedFunctionCaller 必须能够运行任何函数，无论是什么对象向它发送函数，函数返回什么，或者它需要什么参数**。我的游戏中已经有 100 多个类，目标是创建一个对象，该对象可以保存其中任何一个的任何函数调用以供以后调用。

所以从我自己的研究中，我找到了[`Type`class](http://msdn.microsoft.com/en-us/library/system.type.aspx)，并且我知道我可以将对象调用的类型、函数名保存为字符串（这是可以接受的牺牲），然后用于[`GetMethod()`](http://msdn.microsoft.com/en-us/library/6hy0h0z1.aspx)将方法保存在 a 中`MemberInfo`，然后使用[`MemberInfo`'s`Invoke()`](http://msdn.microsoft.com/en-us/library/a89hcwhh.aspx)调用函数，即使是在保存的对象上，并使用参数（作为 的数组`Objects`）。

但这一切似乎都非常... hack-ish。我曾尝试查找此内容，并认为[Generic Delegates](http://msdn.microsoft.com/en-us/library/sx2bwtw7.aspx)是我想走的路，但我迷失在那里，我放弃了。我在正确的轨道上吗？这是唯一的方法吗？Generic Delegates 呢，或者当我认为它可以解决我的问题时，我只是在发疯？

任何和所有的帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-03T03:13:56.363

[您可以使用lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)将其保存为操作：

```
Action functionToCallLater = () => SpecialFunction(/* params */);
// later
functionToCallLater(); // calls SpecialFunction with its parameters 
```

如果函数返回一些东西并且你需要它的值，只需使用`Func<T>`类型来代替。

```
int MyMethod(int param) { return param + 1; }
(...)
Func<int> functionToCallLater = () => MyMethod(3);
(...)
int result = functionToCallLater(); // result == 4 
```

请记住，您在 lambda 中使用的任何变量都是自己捕获的，而不是它的值；如果它的值发生变化，那将是调用函数时使用的值。有关更深入的解释，请参阅[Eric Lippert](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)的博客。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-28T08:56:45.790

除了 lambda 表达式，您还可以使用`IEnumerable`or`IEnumerable<T>`方法。之后，调用方法使用 foreach 指令。例如，这个 Unity 引擎代码：

```
using UnityEngine;
using System.Collections;

public class temp : MonoBehaviour {

    public IEnumerable myMethod1(string str){

        Debug.Log(str);
        yield return null;

    }

    public IEnumerable myMethod2(int number, string str){

        Debug.Log(number+str);
        yield return null;

    }

    System.Action CreateAction(params IEnumerable[] methodsArray){

        return () =>{

            IEnumerable[] methods = methodsArray;
            foreach(IEnumerable method in methods){ foreach(IEnumerable run in method); };

        };

    }

    void Start(){

        System.Action methodGroup = CreateAction(myMethod1("one"),myMethod2(1234,"two"));
        methodGroup();

    }
} 
```

# sql - 如何在 PostgreSQL 中为数组元素创建索引？

> ID：10867577
> 
> 赞同：3
> 
> 时间：2012-06-03T03:03:02.453
> 
> 标签：sql, arrays, postgresql, indexing

使用此架构：

```
create table object (
   obj_id      serial      primary key,
   name        varchar(80) not null unique,
   description text,
   tag_arr     int[]
);

create table tag (
   tag_id      serial      primary key,
   label       varchar(20) not null unique
); 
```

一个对象可以附加任意数量的标签。`object X tag`我希望将s 保留在一个数组中，而不是一个表，`tag_id`以便可以通过对象记录轻松获取它们。

如何创建索引以`object`使每个元素`tar_arr`都是索引？

也就是说，有没有更好的方法来解决这个问题？

### 讨论

这可以通过以下方式实现：

```
create table obj_x_tag(
   obj_id    references object,
   tag_id    references tag,
   constraint obj_x_tag_pk primary key( obj_id, tag_id )
);

select obj_id, name, description, array_agg( tag_id )
from object o
join obj_x_tag x using( obj_id )
group by 1, 2; 
```

但对我来说，简单地将`tag_id`s 数组保留在一列中并省去交叉表和`array_agg()`

建议使用[PostgresQL SQL: Converting results to array](https://stackoverflow.com/questions/5723851/postgresql-sql-converting-results-to-array)。如前所述，问题在于“这实际上并不索引单个数组值，而是索引整个数组”

还建议使用 pg`intarr`和`gist`（或`gin`）索引。问题 - 对我来说 - 似乎索引是针对标准 pg 基于集合的数组运算符，*不一定*针对查找数组的*一个*元素进行优化，而是在一个数组*包含*另一个元素的位置与另一个数组*相交*- 对我来说这是违反直觉的也就是说，从规模和速度方面来看，如此广泛的解决方案对于如此狭窄的问题是正确的。此外，`intarr`扩展名似乎仅限于`int`，不包括`int64`或`char`，限制了它的有用性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T05:35:09.567

您可以使用标准 Postgres 在任何一维数组上创建 GIN 索引。
[此处手册中的详细信息](https://www.postgresql.org/docs/current/static/indexes-types.html)（最后一章）。

在使用**`integer`**数组（plain `int4`、not`int2`或`int8`no`NULL`值）进行操作时，[额外提供的模块**`intarray`**](https://www.postgresql.org/docs/current/static/intarray.html)提供了更多的操作符，并且通常具有卓越的性能。安装它（每个数据库一次）：

```
CREATE EXTENSION intarray; 
```

您可以在整数数组上创建 GIN 或 GIST 索引。手册中有[示例。](https://www.postgresql.org/docs/current/static/intarray.html#id-1.11.7.28.7)
[`CREATE EXTENSION`](https://www.postgresql.org/docs/current/static/sql-createextension.html)需要 PostgreSQL 9.1 或更高版本。对于旧版本，您需要运行提供的脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T03:15:22.663

传统的解决方案是使用标签表和标签和对象之间的多对多。然后，您可以索引标签表并通过连接在单个选择语句中提取所有内容。如果您对编程模型不满意，请咨询当地友好的 ORM 供应商。

无论如何，我都不是 PostgreSQL 专家，但这似乎不是数组的好用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:23:30.027

这是我的解决方法，因为我**没有看到 PostgreSQL 优化的内部函数**可以做同样的事情，

```
CREATE FUNCTION unnest_with_idx(anyarray) RETURNS 
table(idx integer, val anyelement) AS $$ 
   SELECT generate_series(1,array_upper($1,1)) as idx, unnest($1) as val;
$$ LANGUAGE SQL IMMUTABLE;
-- Test:
SELECT idx,val from unnest_with_idx(array[1,20,3,5]) as t; 
```

要检查是否存在内部函数，请参阅“[如何使用 postgreSQL 访问数组内部索引？](https://stackoverflow.com/q/12246738/287948) ”问题。

* * *

在@JimNasby 评论后编辑

## pg9.4+的解决方案

```
SELECT * FROM unnest(array[20,11,3,5]) WITH ORDINALITY; 
```

生成`WITH ORDINALITY` 一个新列“序数”，即数组索引。另请参阅[本教程](http://michael.otacoo.com/postgresql-2/postgres-9-4-feature-highlight-with-ordinality/)。

在**pg9.5+**中，它也适用于 JSON 数组！

```
 SELECT * FROM jsonb_array_elements( '[20,11,3,5]'::JSONB ) WITH ORDINALITY 
```

# python - 在与菜单相同的窗口中使用菜单命令显示图像

> ID：10867578
> 
> 赞同：1
> 
> 时间：2012-06-03T03:03:04.393
> 
> 标签：python, image, menu, tkinter

我计划为我的程序提供很多方法，因此我需要在外部文件中实现这些方法，并在导入文件后将其添加到菜单命令中。但是由于菜单命令只接受方法的名称，如果我的方法接受参数，我不确定它是否可以工作。下面是在名为 file.py 的文件中显示图像的代码：

```
from tkinter import *
from tkinter.filedialog import askopenfilename
from PIL import Image, ImageTk

def open(root):
    filename = askopenfilename(filetypes=[("all files","*"),("Bitmap Files","*.bmp; *.dib"),
                                        ("JPEG", "*.jpg; *.jpe; *.jpeg; *.jfif"),
                                        ("PNG", "*.png"), ("TIFF", "*.tiff; *.tif")])
    image = Image.open(filename)
    image1 = ImageTk.PhotoImage(open(filename))
    root.geometry("%dx%d+%d+%d" % (image.size[0], image.size[1], 0, 0))
    panel = Label(root, image = image1)
    panel.pack(side='top', fill='both', expand='yes')
    panel.image = image1 
```

我还有一个名为 gui.py 的文件，我在命令中调用上面的方法 open。所以我这样做了：

```
menu.add_command(label="Open", command=file.open) 
```

我的想法是在与菜单相同的窗口中显示图像，所以我猜方法 open 需要带参数 root 所以在菜单中调用它时，图像将在该窗口中打开。我不确定这是否合乎逻辑，但这是我得到的错误：

> Tkinter 回调 Traceback 中的异常（最近一次调用最后一次）：
> 文件“D:\Python32\lib\tkinter__init__.py”，第 1399 行，**调用** 返回 self.func(*args) 类型错误：open() 恰好需要 1 个参数（0给定）

我是 Python 新手，我的问题有点混乱，但我真的需要帮助。谢谢。

**编辑：**

感谢您对绑定的评论，即使我不确定如何修复它，但是当我将参数添加到称为菜单命令的打开方法时，除了调用该方法而不是分配给命令外，它仍然有效。如何仅调用方法的名称但仍包含参数？这对我来说很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T03:32:20.137

> 感谢您对绑定的评论，即使我不确定如何修复它，但是当我将参数添加到称为菜单命令的打开方法时，除了调用该方法而不是分配给命令外，它仍然有效。

而不是使用

```
menu.add_command(label="Open", myfunc(myarg)) 
```

采用

```
menu.add_command(label="Open", lambda: myfunc(myarg)) 
```

这会添加参数，但会等待运行该函数，直到 add_command 决定调用它。

[更多关于 lambda](https://stackoverflow.com/questions/890128/python-lambda-why)

# c# - 为什么分配 int.MaxValue 的数组失败而分配大小为 int.MaxValue / 2 的两个数组却没有？

> ID：10867579
> 
> 赞同：3
> 
> 时间：2012-06-03T03:03:27.590
> 
> 标签：c#

为什么分配具有大小的字节数组`int.MaxValue`失败

```
 byte[] array1 = new byte[int.MaxValue]; // throws an OutOfMemoryException 
```

并且分配两个数组的大小 `int.MaxValue / 2`不？

```
 byte[] array2 = new byte[int.MaxValue / 2];
    byte[] array3 = new byte[int.MaxValue / 2]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T03:08:03.820

.NET 中对象的最大大小为 2GB：http: [//blogs.msdn.com/b/joshwil/archive/2005/08/10/450202.aspx](http://blogs.msdn.com/b/joshwil/archive/2005/08/10/450202.aspx)

int.MaxValue + 数组开销略大于 2 GB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-29T17:15:42.860

在最新版本的 .NET（至少 4.5 及更高版本）中，您可以分配大于 2Gb 的对象 - 但是您必须设置 gcAllowVeryLargeObjects - [https://msdn.microsoft.com/en-us/library/hh285054(v=vs.110 ).aspx](https://msdn.microsoft.com/en-us/library/hh285054(v=vs.110).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T03:11:15.723

我不知道 c# 中 int.MaxValue 的值，但我认为 .Net 不允许大于 2GB 的对象

# javascript - Wordpress 中的垂直滚动溢出 div

> ID：10867580
> 
> 赞同：0
> 
> 时间：2012-06-03T03:03:34.507
> 
> 标签：javascript, jquery, wordpress

我试图让一个 div 垂直滚动我的 Wordpress 安装中的一些 li 元素 - 在 jQuery / javascript 方面，我是一个严肃的业余爱好者，但是在整天阅读这里的论坛之后，我想我会检查一下，看看有没有经验的人可以帮助我。

我找到了很多很棒的解决方案，但它们中的每一个似乎都与另一个 jQuery 或 javascript 实例冲突。

理想情况下，我想要一些可以在悬停时滚动的东西，但我会选择按钮，甚至只是简单地隐藏丑陋的滚动条。

我正在处理的页面在这里：[http ://ryanlinstrom.com/sandbox/vimeo-test/](http://ryanlinstrom.com/sandbox/vimeo-test/)

我在页面上使用以下脚本 - 如果有任何集成方式，以便我的#thumbs div 无需添加另一个脚本即可滚动，那就太好了。

```
 var apiEndpoint = 'http://vimeo.com/api/v2/';
    var oEmbedEndpoint = 'http://vimeo.com/api/oembed.json'
    var oEmbedCallback = 'switchVideo';
    var videosCallback = 'setupGallery';
    var vimeoUsername = 'user677763';

    // Get the user's videos
    $(document).ready(function() {
        $.getScript(apiEndpoint + vimeoUsername + '/videos.json?callback=' + videosCallback);
    });

    function getVideo(url) {
        $.getScript(oEmbedEndpoint + '?url=' + url + '&width=780&height=435&callback=' + oEmbedCallback);
    }

    function setupGallery(videos) {

        // Sets the video title
        $('#stats h2').text(videos[0].title);

        // Load the first video
        getVideo(videos[0].url);

        // Add the videos to the gallery
        for (var i = 0; i < videos.length; i++) {
            var html = '<li><a href="' + videos[i].url + '" name="'+ videos[i].title +'"><img src="' + videos[i].thumbnail_medium + '" class="thumb" />';
            html += '</a><p>' + videos[i].title + '</p></li>';
            $('#thumbs ul').append(html);
        }

        // Switch to the video when a thumbnail is clicked
        $('#thumbs a').click(function(event) {
            event.preventDefault();
            getVideo(this.href);
            $('#stats h2').detach();
            var title = $(this).attr("name");
            $('#stats').append('<h2></h2>');
            $("#stats h2").text(title);

            return false;
        });

    }

    function switchVideo(video) {
        $('#embed').html(unescape(video.html));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T03:07:32.417

我建议使用两个重叠的不可见 div（一个在顶部，一个在底部）。

然后做类似的事情：

```
$(".top-scroll").bind("mouseover", function(){
    $(".wrapping-div").animate({scrollTop: -= 5}, 100)
});

$(".bottom-scroll").bind("mouseover", function(){
    $(".wrapping-div").animate({scrollTop: += 5}, 100);
}); 
```

然后，当然，添加`overflow:hidden`到您的 CSS 以删除滚动条。

# delphi - delphi-重写文件实际上是做什么的？

> ID：10867581
> 
> 赞同：1
> 
> 时间：2012-06-03T03:03:42.347
> 
> 标签：delphi

是清除现有文件的文件内容还是删除它`Rewrite`并创建一个新文件？我的*app.exe*文件夹中有一个需要清除的文本文件。有什么例子吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T03:09:42.517

从 Delphi XE2 文档中，主题[Rewrite](http://docwiki.embarcadero.com/Libraries/en/System.Rewrite) - 阅读最后引用的段落：

> 创建一个新文件并打开它。
> 
> 在 Delphi 代码中，Rewrite 会创建一个名为 F 的新外部文件。
> 
> F 是与使用 AssignFile 的外部文件关联的任何文件类型的变量。RecSize 是一个可选表达式，仅当 F 是无类型文件时才能指定。如果 F 是无类型文件，则 RecSize 指定要在数据传输中使用的记录大小。如果省略 RecSize，则假定默认记录大小为 128 字节。
> 
> 如果已存在同名的外部文件，则将其删除并在其位置创建一个新的空文件。

在同一文档中，页面底部的链接`System.Rewrite`，修改为使用您的应用程序的文件夹：

```
procedure TForm1.Button1Click(Sender: TObject);
var 
  F: TextFile;
  AppDir: string;
begin
  // Instead of ParamStr(0), you can use Application.ExeName
  // if you prefer
  AppDir := ExtractFilePath(ParamStr(0)); 
  AssignFile(F, AppDir + 'NEWFILE.$$$');
  Rewrite(F);  // default record size is 128 bytes
  Writeln(F, 'Just created file with this text in it...');
  CloseFile(F);
  MessageDlg('NEWFILE.$$$ has been created in the ' + AppDir + ' directory.',
    mtInformation, [mbOk], 0, mbOK);
end; 
```

但是，您应该知道，它`Rewrite`已经过时并且不支持 Unicode。您应该使用更现代的方法来读取和写入文件，例如[TFileStream](http://docwiki.embarcadero.com/VCL/en/Classes.TFileStream)或[TStringWriter](http://docwiki.embarcadero.com/VCL/en/Classes.TStringWriter)（甚至是[TStringList](http://docwiki.embarcadero.com/VCL/en/Classes.TStringList)的简单解决方案）。

```
var
  SL: TStringList;
  AppDir: string;
begin
  AppDir := ExtractFilePath(ParamStr(0));
  SL := TStringList.Create;
  try
    SL.Add('Just created file with this text in it...');
    // Add more lines here if needed, and then only save once
    SL.SaveToFile(AppDir + 'NEWFILE.$$$');
    MessageDlg('NEWFILE.$$$ has been created in the ' + AppDir + ' directory.',
      mtInformation, [mbOk], 0, mbOK);
  finally
    SL.Free;
  end;
end; 
```

请注意，您不能使用`TStrings`; 这是一个抽象类。您需要改用它的后代`TStringList`之一（是最常使用的后代）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T20:34:57.767

我做了一个实验，并确定 REWRITE 会覆盖现有文件。它不会删除然后重新创建文件。你必须学习一点关于文件隧道的知识，这是我刚开始时一无所知的东西。

```
program RewriteTest;

{$APPTYPE CONSOLE}

uses
  SysUtils,
  Windows;

//========================================================================
// Will REWRITE delete an existing file and create a new file,
// or will it overwrite the existing file?
//------------------------------------------------------------------------
// According to the Delphi documentation, it will delete the old file and
// create a new one.  But is this true?
// Internally, it calls the Windows API CreateFile function with the
// CREATE_ALWAYS option.
// The Microsoft documentation for CreateFile says this will overwrite the
// existing file.
// Let's perform an experiment to see what really happens.
// Here are the steps in the experiment:
//
//    1\. Select a file name.
//    2\. Delete that file if it exists.
//    3\. Create a file with that name.
//    4\. Determine the creation time of that file. Call it A.
//
//   - - As with any experiment, we first need a control case.
//       We will explicitly delete the file we just created
//       and then recreate the file.
//
//    5\. Wait a few seconds.
//    6\. Delete the file that was just created.
//    7\. Again, create a file with that same name.
//    8\. Determine the creation time of this new file. Call it B.
//
//   - - We would expect that since the first file was deleted,
//       and a new file was created, that the creation times of
//       these files would be different.
//       I was quite surprised to find that this hypothesis
//       is WRONG!
//       This is why scientific experiments have controls!
//
//       Two separate files created at distinct times had the same
//       Creation Date according to the operating system.
//
//   - - TUNNELING:  It turns out our experimental results were gummed up
//       by something I knew nothing about before, called file tunneling.
//       The Windows operating system has this feature which will save the
//       existing meta-information about a file for "a short time" after it
//       is deleted or renamed.
//       If another file is created with the same name, or renamed
//       to that name, the new file will be assigned the same meta-data
//       as the original.
//       I won't go too far into this topic here. If you're interested you
//       can research it yourself. I'll just say two things about it.
//       There's a very good reason for it. And it can be turned off.
//
//       To turn it off, you need to edit the registry.
//       WARNING: Don't edit the registry unless you know what you are doing.
//       You could damage your operating system.
//
//       [a] Go to key:
//           HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem
//
//       [b] Create a dword value named MaximumTunnelEntries and set it to zero.
//
//       [c] Reboot.
//
//       Remember to put everything back the way it was when you're done.
//
//   - - Did it work?  Rerun the experiment above and note that the file
//       creation times are now different.
//       Now to continue with our experiment.
//       What will happen if we call REWRITE without first deleting the file?
//       Will it delete the existing file and create a new one?
//       Or will it overwrite the existing file?
//
//    9\. Wait a few seconds.
//   10\. Without first explicitly deleting the file,
//       call REWRITE with the same file name.
//   11\. Determine the creation time of this new file. Call it C.
//
//   12\. Compare B to C.  If they are the different, then the file must've
//       been deleted.  If they are the same, then the file was overwritten.
//
//   - - CONCLUSION:  The file creation times are the same. Calling rewrite
//       did not delete the existing file.  Rather it was overwritten.
//
//==============================================================================

{ 1\. select a file name }
const
  gFileName : string = 'rewrite-test.txt';

procedure DeleteFileIfItExists;
begin
  if FileExists ( gFileName ) then
    if not SysUtils.DeleteFile ( gFileName ) then
      raise exception . create ( 'Cannot delete existing file.' );
end; // DeleteFileIfItExists

procedure CreateTheFile;
var
  aTextFile : textfile;
begin
  assignfile ( aTextFile, gFileName );
  rewrite ( aTextFile );
  try
    // To make the experiment more realistic, write something to the file.
    writeln ( aTextFile, 'Current time is: ', DateTimeToStr ( Now ) );
  finally
    closefile ( aTextFile );
  end;
end; // CreateTheFile

function DetermineFileCreationDate : tDateTime;
var
  aFileHandle   : tHandle;
  aCreationTime : tFileTime;
  aSystemTime   : tSystemTime;
begin
  aFileHandle := CreateFile ( pchar(gFileName),
                              GENERIC_READ,
                              FILE_SHARE_READ,
                              nil,
                              OPEN_EXISTING,
                              0,
                              0  );

  if aFileHandle = INVALID_HANDLE_VALUE then
    raise exception . create ( 'Cannot open file' );

  try

    GetFileTime ( aFileHandle,
                  @ aCreationTime,
                  nil,
                  nil  );

  finally
    CloseHandle ( aFileHandle );
  end;

  if not FileTimeToSystemTime ( aCreationTime, aSystemTime ) then
    raise exception . create ( 'Cannot convert file time' );

  Result := SysUtils . SystemTimeToDateTime ( aSystemTime );
end; // DetermineFileCreationDate

procedure WaitAFewSeconds;
begin
  sleep ( 5000 ); // 5 seconds should be enough
end;

procedure RunExperiment;
var
  A : tDateTime;
  B : tDateTime;
  C : tDateTime;
begin
  { 2.} DeleteFileIfItExists;
  { 3.} CreateTheFile;
  { 4.} A := DetermineFileCreationDate;
  { 5.} WaitAFewSeconds;
  { 6.} DeleteFileIfItExists;
  { 7.} CreateTheFile;
  { 8.} B := DetermineFileCreationDate;

  if A = B then
    raise exception . create ( 'The control file times are the same.'
                               + #13'Turn off file tunneling.'
                               + #13'See notes and warnings.' );

  { 9.} WaitAFewSeconds;
  {10.} CreateTheFile;
  {11.} C := DetermineFileCreationDate;

  writeln ( 'The original creation time was ', DateTimeToStr ( B ) );
  writeln ( 'The new      creation time is  ', DateTimeToStr ( C ) );

  if B = C then
    begin
      // This is the one
      writeln ( 'The file creation times are not the same.' );
      writeln ( 'REWRITE overwrites the existing file.' );
    end
  else
    begin
      // This is not run
      writeln ( 'The file creation times are the same.' );
      writeln ( 'REWRITE deletes and recreates the file.' );
    end;

end; // RunExperiment

begin
  try
    writeln ( 'The test will take about 10 seconds. Please wait.' );

    RunExperiment;

    // Give user a chance to see the answer
    writeln ( 'Press Enter to continue' );
    readln;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-14T13:24:05.003

我在使用重置和重写时注意到的最坏情况：

```
try
   ShowMessage('1');
   Reset(MyFile);
   ShowMessage('2');
except
      ShowMessage('3');
      Reset(MyFile);
      ShowMessage('4');
end; 
```

我从未想过有可能的输出：1 3 4

是的，是的，您没看错，这不是错误：第一次调用失败（尝试部分中的那个），第二个调用失败（除了部分中的那个）。

请注意：重写也会发生同样的情况。

这并非总是会发生，但如果您只让一个 Reset 或 Rewrite 发生，那么当发生这种情况时，您将收到 I/O 错误 103。

我已经看到，如果我尝试重新执行重置/重写...除了...结束，如果第一个失败，第二个不会失败。

当然，考虑到我说的是一个单一的呼叫不能失败的情况。

这种情况仅在 Windows 7 和 8/8.1 上发生（或者至少是我所看到的）......我从未见过它们在 WindowsXP 上失败。

建议您...我认为这很奇怪！现在我正在替换所有对 Reset / Rewrite 的调用，以便包括这样的双重调用（如果第一次调用失败重试第二次）。

这样的伎俩有效！至少对我来说！这样的第二次呼叫从未失败。

重要提示：我说的是第一次通话不能失败的情况......我不考虑任何其他情况。

换一种方式说：

*   第一次调用失败的原因没有已知的原因，完全不失败是正确的……但有时它不会失败，而其他人确实会失败（在 Win7/win8/Win8.1 上）。

在线性控制台代码上测试...运行多次相同的代码（相同的 EXE），得到不同的结果。

正如我所说，这很奇怪......解决方案正如我所说：重做重置/尝试重写，除了结束。

用人的话说：

*   如果您不能（尝试）打开门（尝试部分中的重置/重写调用），请打开门（除部分之外的重置/重写），您会看到可以（如果第一次失败，第二次不会失败）。

当然，如果没有已知原因导致第一个失败，除了操作系统故障！！！我不能用另一种形式来称呼它！

# ruby-on-rails - 在 Rails 应用程序中格式化博客文章的简单方法

> ID：10867601
> 
> 赞同：1
> 
> 时间：2012-06-03T03:09:30.873
> 
> 标签：ruby-on-rails, tinymce, ckeditor, text-editor, rich-text-editor

几个小时以来，我一直试图在网站 uncooledblog.com 上进行造型工作。我尝试过使用[这个](https://github.com/spohlenz/tinymce-rails)TinyMCE gem、[CKeditor](https://github.com/galetahub/ckeditor)以及其他一些 gem。我就是想不通这些东西。我想要的只是让用户能够格式化他们的帖子，或者至少能够识别回车。没什么复杂的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T23:49:20.230

我的问题的答案很简单！！

要对文本进行简单的格式化，比如在 text_area 中显示回车，只需在要显示格式的视图中添加 simple_format！

例如：

改变

```
 <%= @article.body %> 
```

到

```
 <%= simple_format @article.body %> 
```

将导致文本以简单的格式显示！

# python - 带有可选组的python正则表达式

> ID：10867604
> 
> 赞同：2
> 
> 时间：2012-06-03T03:10:08.207
> 
> 标签：python, regex

这里是正则表达式的新手，我将不胜感激。

```
cstring = "[0,90,(+45,45)3,0/]S"
regex = re.compile(r'^(\[)(\S+)(\/?)(\][ST]$)')
match = regex.search(cstring)
for s in match.groups():
    print s 
```

结果是 "[" "0,90,(+45,45)3,0/" "]S" 但我想在一个单独的（和可选的 - 上面唯一的一个）组中获得 "/" . 我试图用 [0-9(),+-] 之类的任何组合替换 \S - （这些是第二组中唯一预期的字符）但无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T03:18:39.933

正则表达式数量说明符 + 和 * 是贪心的，您可以添加 ? 到它们的末尾（+？和*？）将它们变成它们的非贪婪形式。

贪婪意味着操作员将在检查下一个令牌之前尝试消耗所有可能的东西。

所以对于

```
\S+\/? 
```

S 将在 / 被检查之前尝试使用它可以使用的所有内容，并且由于 / 是可选的，因此无需为它做任何事情。

一旦我们把它变成非贪婪的形式

```
\S+?\/? 
```

在尝试 / 之前，S 将尽可能少地消耗，这意味着 / 在任何令牌上获得“第一个 dibs”，一旦它无法抓住它们，这些令牌将针对 \S+?

我使用以下方法找到了成功：

```
regex = re.compile(r'^(\[)(\S+?)(\/?)(\][ST]$)') 
```

有关更多信息，您可以查看[python re docs](http://docs.python.org/library/re.html) search for greedy。

作为旁注，如果您将 re.VERBOSE 标志传递给 re.compile 那么它将忽略字符串中的空格，这意味着您可以将其构造为

```
regex = re.compile(r'^ (\[) (\S+?) (\/?) (\][ST]$) ', re.VERBOSE) 
```

我发现在学习正则表达式时很有帮助。

此外，您在组 '^ ([' 之外有字符串标记的开头，但在组 '(][ST]$)' 内有字符串标记的结尾，除了可读性之外，这应该没有什么区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T03:18:50.890

`\S`尝试对你的角色使用非贪婪匹配。那群人正在吞噬你的`/`角色。

将您的正则表达式更改为此对我有用：

```
cstring = "[0,90,(+45,45)3,0/]S"
regex = re.compile(r'^(\[)(\S+?)(\/?)(\][ST]$)')
match = regex.search(cstring)
for s in match.groups():
    print s 
```

# jquery - jQuery Mobile 加载 ui-icon-alt

> ID：10867606
> 
> 赞同：0
> 
> 时间：2012-06-03T03:10:40.270
> 
> 标签：jquery, css, jquery-mobile

我正在尝试加载备用图标集，但我不确定如何加载。我试过添加`ui-icon-alt`为一个类，但没有运气，尝试将数据图标更改为数据图标-alt，尝试过 alt-arrow-l，......你如何加载它？

```
<a data-role="button" data-rel="back" data-theme="b" data-icon="arrow-l" data-iconpos="left">
    Back
</a> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T09:31:37.337

如何加载`ui-icon-alt`任何元素：

```
<a data-role="button" data-icon="arrow-l ui-icon-alt" data-iconpos="left">
    Back
</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T04:09:53.200

用这个覆盖默认的 ui-icon 类

```
.ui-icon{
    background-image: url(http://code.jquery.com/mobile/1.1.0/images/icons-18-black.png)​;
} 
```

请务必将其放在 JQM css 文件之后。

# javascript - 谷歌脚本：Javascript 日期调用返回 NaN

> ID：10867608
> 
> 赞同：0
> 
> 时间：2012-06-03T03:11:20.077
> 
> 标签：javascript, date, google-apps-script, nan

感谢大家对此的关注。

我有一段相同的代码包含在同一个 Google Scripts 项目中的两个单独的函数中。该代码只是一个基本循环，用于匹配给定日期，然后使用索引从电子表格中获取值。有问题的具体行是：

```
var pmsDate = new Date(data[j][dateColIndex]).setHours(0, 0, 0, 0); 
```

该代码在一个功能中运行良好；然而，在另一个函数中，它返回 NaN。我从字面上将循环结构从一个函数复制并粘贴到另一个函数，所以我不明白为什么它不起作用。我已经尝试了我能想到的所有可能的操作，但似乎没有任何东西可以纠正这个问题。

编辑：功能 1 不起作用。功能 2 有效。

任何人都可以指出任何错误或提供一些指导吗？我正在使用 Chrome，同样的问题也出现在 FF 中。

编辑2：感谢您对此提出一些想法。根据要求，我已经发布了这些功能的代码（它们不是很长，所以我发布了整个内容）。此处引用的“数据”表只是一个带有日期和一些相应数据的电子表格。同样，我遇到的问题是 var pmsDate 在函数 2 中正确返回了 DateString，但在函数 1 中返回了 NaN，尽管使用了完全相同的数据数组。感谢任何帮助！

功能一：

```
function getMonthlyRooms(month) {

  var forecastMonth = getMonthDigit(month);
  var monthDays = daysInMonth(month);
  var year = getYear();

  var startDate = new Date(year, forecastMonth, 1, 0, 0, 0, 0);

  var sheetData = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Data");
  var sheetDataCols = sheetData.getDataRange().getNumColumns();
  var sheetDataRows = sheetData.getDataRange().getNumRows();

  // find column header indexes

  var dataHeaders = sheetData.getRange(1, 1, 1, sheetDataCols).getValues();

  for (i = 0; i < sheetDataCols; i++) {
    if (dataHeaders[0][i] == "CONSIDERED_DATE") {
      var dateColIndex = i;
    }
    if (dataHeaders[0][i] == "NO_ROOMS") {
      var roomsColIndex = i;
    }
  }

  // find what row the month begins

  var data = sheetData.getDataRange().getValues();

  for (j = 0; j < sheetDataRows; j++) {
    var pmsDate = new Date(data[j][dateColIndex]).setHours(0, 0, 0, 0);

    if (pmsDate == startDate) {
      var startRow = j + 1;
    }
  }

  // loop through range and sum

  var monthData = sheetData.getRange(startRow, (roomsColIndex + 1), monthDays, 1).getValues();

  var occRooms = 0;

  for (var k in monthData) {
    occRooms += monthData[k][0];
  }

  return occRooms;  

} 
```

功能二

```
function getDailyRooms(date) {

  var forecastDate = new Date(date).setHours(0, 0, 0, 0);

  var sheetData = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Data");
  var sheetDataCols = sheetData.getDataRange().getNumColumns();
  var sheetDataRows = sheetData.getDataRange().getNumRows();

  // find column header indexes

  var dataHeaders = sheetData.getRange(1, 1, 1, sheetDataCols).getValues();

  for (i = 0; i < sheetDataCols; i++) {
    if (dataHeaders[0][i] == "CONSIDERED_DATE") {
      var dateColIndex = i;
    }
    if (dataHeaders[0][i] == "NO_ROOMS") {
      var roomsColIndex = i;
    }
  }

  // loop through data

  var data = sheetData.getDataRange().getValues();

  for (j = 0; j < sheetDataRows; j++) {
    var pmsDate = new Date(data[j][dateColIndex]).setHours(0, 0, 0, 0);

    if (pmsDate == forecastDate) {
      var occRooms = sheetData.getRange(j + 1, roomsColIndex + 1).getValue();
    }
  }

  return occRooms;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T07:43:50.313

您是否尝试过以 1 而不是 0 开始循环？这样做将允许跳过标题值（只是一个想法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:44:35.143

我的猜测是函数使用的数据或逻辑存在差异，导致您无法处理边缘情况。简化调试的一种方法是将共享代码放在一个函数中，而不是有两个副本。这将使查看数据输入和数据输出变得更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T04:40:47.630

为什么 Date 函数中有这么多参数？我认为可能只有 3 个用逗号分隔。你检查 startDate 是一个日期吗？

```
var startDate = new Date(year, forecastMonth, 1, 0, 0, 0, 0); 
```

# c# - 获取进程 ID 时出错

> ID：10867610
> 
> 赞同：4
> 
> 时间：2012-06-03T03:12:18.430
> 
> 标签：c#, winforms

我正在创建一个剪贴板监视器作为项目，在剪贴板更改时，应用程序通过调用 GetClipboardOwner 检测哪个程序使用了剪贴板。

这是代码的摘录：

```
protected override void WndProc(ref Message m)
        {
            const int WM_DRAWCLIPBOARD = 0x308;
            const int WM_CHANGECBCHAIN = 0x030D;

            switch (m.Msg)
            {
                case WM_DRAWCLIPBOARD:
                    Debug.Indent();
                    //Process the clipboard here
                    uint processId;
                    IntPtr ownerHwnd = GetClipboardOwner();
                    GetWindowThreadProcessId(ownerHwnd, out processId);
                    Process proc = Process.GetProcessById((int)processId);
                    Debug.WriteLine(String.Format("Window Title: {0} Filename: {1}", proc.MainWindowTitle, process.MainModule.FileName));
                    SendMessage(_NextClipboardViewer, m.Msg, m.WParam, m.LParam);
                    break;

                case WM_CHANGECBCHAIN:
                    if (m.WParam == _NextClipboardViewer)
                        _NextClipboardViewer = m.LParam;
                    else
                        SendMessage(_NextClipboardViewer, m.Msg, m.WParam, m.LParam);
                    break;

                default:
                    base.WndProc(ref m);
                    break;
            }
        } 
```

和 DLLImports：

```
[DllImport("User32.dll")]
        public static extern IntPtr SetClipboardViewer(IntPtr _newviewerhandle);

[DllImport("User32.dll")]
        public static extern bool ChangeClipboardChain(IntPtr removehandle, IntPtr nexthandle);

[DllImport("User32.dll")]
        public static extern int SendMessage(IntPtr hwnd, int msg, IntPtr wparam, IntPtr lparam);

[DllImport("User32.dll")]
        public static extern IntPtr GetClipboardOwner();

[DllImport("kernel32.dll")]
        public static extern int GetWindowThreadProcessId(IntPtr handle, out uint threadid); 
```

输出窗口中的异常是 -Something.exe 中出现“System.EntryPointNotFoundException”类型的第一次机会异常

**更新 2**将“Kernel32”更改为“User32”后，它可以工作，但对于 Word、Excel 等某些应用程序，我得到了这个异常；System.dll 中出现“System.ComponentModel.Win32Exception”类型的第一次机会异常

有任何想法吗 ？

**更新 3**上述异常是由于 32 位进程（我的应用程序）访问 64 位进程（Word、Excel 等）的模块而导致的。将配置更改为 x64 有效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T03:35:05.860

`DllImport`for`GetWindowThreadProcessId`应该使用，而`user32.dll`不是`kernel32.dll`

根据 MSDN： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms633522 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633522(v=vs.85).aspx)

[或者干脆](http://www.pinvoke.net/default.aspx/user32/GetWindowThreadProcessId.html)使用 PInvoke.Net：GetWindowThreadProcessId

# mysql - 当条件为真时，如何使用 MySQL 触发器更新多个表？

> ID：10867611
> 
> 赞同：3
> 
> 时间：2012-06-03T03:12:54.107
> 
> 标签：mysql, triggers, mysql-error-1064

我正在尝试创建一个触发器来使用条件检查更新另一个表，但我不断收到 MySQL 错误。我的触发器的代码是：

```
DELIMITER $$
CREATEb
TRIGGER visitor_validation
BEFORE INSERT ON ratingsvisitors
FOR EACH ROW
BEGIN
Set @counts=(SELECT count(*) from ratingsvisitors where visotrid=new.userid AND  profileid=New.profileid AND itemid=New.itemid AND likevalidation=New.likevalidation AND likesordislike=New.likesordislike);
SET @ifexists = (SELECT * FROM ratingcounttracks WHERE userid=New.userid AND likedate=New.likevalidation AND countfor=New.likesordislike);
IF (@ifexists = NULL) THEN
INSERT INTO  ratingsvisitors(userid, likedate, clickcount,countfor) values (New.userid, New.likevalidation ,'1',New.likesordislike);
ELSE
UPDATE ratingsvisitors SET clickcount=clickcount+1 WHERE userid=New.userid AND likedate=New.likevalidation AND countfor=New.likesordislike;
ENDIF;
END$$ 
```

MySQL显示错误：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '; 附近使用的正确语法。END' 在第 12 行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T10:49:44.543

你可以做这样的事情

```
DELIMITER $$
CREATE
TRIGGER visitor_validation
BEFORE INSERT ON ratingsvisitors
FOR EACH ROW
BEGIN
Set @counts=(SELECT count(*) from ratingsvisitors where visotrid=new.userid AND     
profileid=New.profileid AND itemid=New.itemid AND likevalidation=New.likevalidation AND  
likesordislike=New.likesordislike);
IF NOT EXISTS (SELECT * FROM ratingcounttracks WHERE userid=New.userid AND   
likedate=New.likevalidation AND countfor=New.likesordislike);
THEN
INSERT INTO  ratingsvisitors(userid, likedate, clickcount,countfor) values (New.userid, 
New.likevalidation ,'1',New.likesordislike);
ELSE
UPDATE ratingsvisitors SET clickcount=clickcount+1 WHERE userid=New.userid AND 
likedate=New.likevalidation AND countfor=New.likesordislike;
ENDIF;
END$$ 
```

# php - 表单不提交重读元音，有没有办法纠正这个问题？

> ID：10867612
> 
> 赞同：-2
> 
> 时间：2012-06-03T03:13:02.237
> 
> 标签：php, html, forms, character-encoding

我为您带来另一个与表格相关的问题：

1- 下面粘贴的代码是一个 php 处理的表单，它将信息提交到电子邮件。它完美地工作，除了当字段填充有字符 ã 的单词时，我会收到以下内容：

```
From :
Sílv &#227 ; o 

e-Mail : joao@qualquercoisa.com.br 
Subject : [Formulário de contato] : ão é í ó ú ça 
Message : ão é í ó ú ça ão é í ó ú ça ão é í ó ú ça ão é í ó ú ça 
```

号码#227；是 ã 的 ASCII 字符代码。所有其他重读元音都正确提交。有没有办法纠正这个问题？

2-另一方面，必须在代码中添加什么来处理单选按钮和复选框？

谢谢

```
Quote
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="content-type" content="text/html; charset=windows-1250">
<title>Líderes do Futuro</title>

<!-- the cascading style sheet-->
<link href="../css/style_contactform.css" rel="stylesheet" type="text/css" />

</head>

<body>
<div id="contentForm">

<!-- The contact form starts from here-->
<?php
$error = ''; // error message
$name = ''; // sender's name
$email = ''; // sender's email address
$subject = ''; // subject
$message = ''; // the message itself
$spamcheck = ''; // Spam check

if(isset($_POST['send']))
{
$name = $_POST['name'];
$email = $_POST['email'];
$subject = $_POST['subject'];
$message = $_POST['message'];
$spamcheck = $_POST['spamcheck'];

if(trim($name) == '')
{
$error = '<div class="errormsg">Por favor complete seu nome</div>';
}
else if(trim($email) == '')
{
$error = '<div class="errormsg">Por favor complete seu nome digite seu e-mail</div>';
}
else if(!isEmail($email))
{
$error = '<div class="errormsg">You have enter an invalid e-mail address. Please, try again!</div>';
}
if(trim($subject) == '')
{
$error = '<div class="errormsg">Please enter a subject!</div>';
}
else if(trim($message) == '')
{
$error = '<div class="errormsg">Please enter your message!</div>';
}
else if(trim($spamcheck) == '')
{
$error = '<div class="errormsg">Please enter the number for Spam Check!</div>';
}
else if(trim($spamcheck) != '5')
{
$error = '<div class="errormsg">Spam Check: The number you entered is not correct! 2 + 3 = ???</div>';
}
if($error == '')
{
if(get_magic_quotes_gpc())
{
$message = stripslashes($message);
}

// the email will be sent here
// make sure to change this to be your e-mail
$to = "johndoe@bogieman.com";

// the email subject
// '[Contact Form] :' will appear automatically in the subject.
// You can change it as you want

$subject = '[Formulário de contato] : ' . $subject;

// the mail message ( add any additional information if you want )
$msg = "From : $name \r\ne-Mail : $email \r\nSubject : $subject \r\n\n" . "Message : \r\n$message";

mail($to, $subject, $msg, "From: $email\r\nReply-To: $email\r\nReturn-Path: $email\r\n");
?>

<!-- Message sent! (change the text below as you wish)-->
<div style="text-align:center;">
<h1>Congratulations!!</h1>
<p>Thank you <b><?=$name;?></b>, your message is sent!</p>
</div>
<!--End Message Sent-->

<?php
}
}

if(!isset($_POST['send']) || $error != '')
{
?>

<h2>Preencha todos os campos:</h2>
<!--Error Message-->
<?=$error;?>

<form method="post" name="contFrm" id="contFrm" action="">

<label><span class="required">*</span> Full Name:</label>
<input name="name" type="text" class="box" id="name" size="30" value="<?=$name;?>" />

<label><span class="required">*</span> Email: </label>
<input name="email" type="text" class="box" id="email" size="30" value="<?=$email;?>" />

<label><span class="required">*</span> Subject: </label>
<input name="subject" type="text" class="box" id="subject" size="30" value="<?=$subject;?>" />

<label><span class="required">*</span> Message: </label>
<textarea name="message" cols="40" rows="3" id="message"><?=$message;?></textarea>

<label><span class="required">*</span> Spam Check: <b>2 + 3=</b></label>
<input name="spamcheck" type="text" class="box" id="spamcheck" size="4" value="<?=$spamcheck;?>" /><br /><br />

<!-- Submit Button-->
<input name="send" type="submit" class="button" id="send" value="" />

</form>

<!-- E-mail verification. Do not edit -->
<?php
}

function isEmail($email)
{
return(preg_match("/^[-_.[:alnum:]]+@((([[:alnum:]]|[[:alnum:]][[:alnum:]-]*[[:alnum:]])\.)+(ad|ae|aero|af|ag|ai|al|am|an|ao|aq|ar|arpa|as|at|au|aw|az|ba|bb|bd|be|bf|bg|bh|bi|biz|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|com|coop|cr|cs|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|in|info|int|io|iq|ir|is|it|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|mg|mh|mil|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|museum|mv|mw|mx|my|mz|na|name|nc|ne|net|nf|ng|ni|nl|no|np|nr|nt|nu|nz|om|org|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|pro|ps|pt|pw|py|qa|re|ro|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw)$|(([0-9][0-9]?|[0-1][0-9][0-9]|[2][0-4][0-9]|[2][5][0-5])\.){3}([0-9][0-9]?|[0-1][0-9][0-9]|[2][0-4][0-9]|[2][5][0-5]))$/i"
,$email));
}
?>
<!-- END CONTACT FORM -->

</div> <!-- /contentForm -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T03:57:52.877

`My 2 cents:`从我所做的测试中，要么`<meta http-equiv="content-type" content="text/html; charset=windows-1250">`完全删除，要么替换`1250`为`1252`. 测试正确返回字符`ão`而不是`&#227;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T13:24:44.720

复制/粘贴下面的代码。另一个问题可能与您的 CSS 样式表有关。尝试删除指向 .css 的链接并直接插入到`<head>`或根本没有样式。下面的代码发送到 2 封电子邮件。在这个罗恩之后，我不知道我还能提供什么帮助，因为这对我来说很好。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Líderes do Futuro</title>

<!-- the cascading style sheet-->
<link href="../css/style_contactform.css" rel="stylesheet" type="text/css" />

</head>

<body>
<div id="contentForm">

<!-- The contact form starts from here-->
<?php
$error = ''; // error message
$name = ''; // sender's name
$email = ''; // sender's email address
$subject = ''; // subject
$message = ''; // the message itself
$spamcheck = ''; // Spam check

if(isset($_POST['send']))
{
$name = $_POST['name'];
$email = $_POST['email'];
$subject = $_POST['subject'];
$message = $_POST['message'];
$spamcheck = $_POST['spamcheck'];

if(trim($name) == '')
{
$error = '<div class="errormsg">Por favor complete seu nome</div>';
}
else if(trim($email) == '')
{
$error = '<div class="errormsg">Por favor complete seu nome digite seu e-mail</div>';
}
else if(!isEmail($email))
{
$error = '<div class="errormsg">You have enter an invalid e-mail address. Please, try again!</div>';
}
if(trim($subject) == '')
{
$error = '<div class="errormsg">Please enter a subject!</div>';
}
else if(trim($message) == '')
{
$error = '<div class="errormsg">Please enter your message!</div>';
}
else if(trim($spamcheck) == '')
{
$error = '<div class="errormsg">Please enter the number for Spam Check!</div>';
}
else if(trim($spamcheck) != '5')
{
$error = '<div class="errormsg">Spam Check: The number you entered is not correct! 2 + 3 = ???</div>';
}
if($error == '')
{
if(get_magic_quotes_gpc())
{
$message = stripslashes($message);
}

// the email will be sent here
// make sure to change this to be your e-mail
// $to = "johndoe@bogieman.com";
$to = 'email1@somesite.xxx, email2@somesite.xxx';

// the email subject
// '[Contact Form] :' will appear automatically in the subject.
// You can change it as you want

$subject = '[Formulário de contato] : ' . $subject;

// the mail message ( add any additional information if you want )
$msg = "From : $name \r\ne-Mail : $email \r\nSubject : $subject \r\n\n" . "Message : \r\n$message";

mail($to, $subject, $msg, "From: $email\r\nReply-To: $email\r\nReturn-Path: $email\r\n");
?>

<!-- Message sent! (change the text below as you wish)-->
<div style="text-align:center;">
<h1>Congratulations!!</h1>
<p>Thank you <b><?=$name;?></b>, your message is sent!</p>
</div>
<!--End Message Sent-->

<?php
}
}

if(!isset($_POST['send']) || $error != '')
{
?>

<h2>Preencha todos os campos:</h2>
<!--Error Message-->
<?=$error;?>

<form method="post" name="contFrm" id="contFrm" action="">

<label><span class="required">*</span> Full Name:</label>
<input name="name" type="text" class="box" id="name" size="30" value="<?=$name;?>" />

<label><span class="required">*</span> Email: </label>
<input name="email" type="text" class="box" id="email" size="30" value="<?=$email;?>" />

<label><span class="required">*</span> Subject: </label>
<input name="subject" type="text" class="box" id="subject" size="30" value="<?=$subject;?>" />

<label><span class="required">*</span> Message: </label>
<textarea name="message" cols="40" rows="3" id="message"><?=$message;?></textarea>

<label><span class="required">*</span> Spam Check: <b>2 + 3=</b></label>
<input name="spamcheck" type="text" class="box" id="spamcheck" size="4" value="<?=$spamcheck;?>" /><br /><br />

<!-- Submit Button-->
<input name="send" type="submit" class="button" id="send" value="" />

</form>

<!-- E-mail verification. Do not edit -->
<?php
}

function isEmail($email)
{
return(preg_match("/^[-_.[:alnum:]]+@((([[:alnum:]]|[[:alnum:]][[:alnum:]-]*[[:alnum:]])\.)+(ad|ae|aero|af|ag|ai|al|am|an|ao|aq|ar|arpa|as|at|au|aw|az|ba|bb|bd|be|bf|bg|bh|bi|biz|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|com|coop|cr|cs|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|in|info|int|io|iq|ir|is|it|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|mg|mh|mil|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|museum|mv|mw|mx|my|mz|na|name|nc|ne|net|nf|ng|ni|nl|no|np|nr|nt|nu|nz|om|org|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|pro|ps|pt|pw|py|qa|re|ro|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw)$|(([0-9][0-9]?|[0-1][0-9][0-9]|[2][0-4][0-9]|[2][5][0-5])\.){3}([0-9][0-9]?|[0-1][0-9][0-9]|[2][0-4][0-9]|[2][5][0-5]))$/i"
,$email));
}
?>
<!-- END CONTACT FORM -->

</div> <!-- /contentForm -->

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T03:37:01.640

罗恩，

查看这个[strtr](http://php.net/manual/en/function.strtr.php)以及这个：

`filter_var`

[http://php.net/manual/en/function.filter-var.php](http://php.net/manual/en/function.filter-var.php)

一个很棒的教程：

[http://www.phpro.org/tutorials/Filtering-Data-with-PHP.html](http://www.phpro.org/tutorials/Filtering-Data-with-PHP.html)

关于您[在此处阅读的复选框问题](http://www.webmasterworld.com/php/3201813.htm)

# java - 如何在旧版本的 Android 上使用 ActionBar？

> ID：10867617
> 
> 赞同：4
> 
> 时间：2012-06-03T03:14:29.717
> 
> 标签：java, android

> **可能重复：**
> [早期 sdk 版本中 ActionBar 的等价物是什么？](https://stackoverflow.com/questions/6031774/what-is-the-equivalent-of-actionbar-in-earlier-sdk-versions)

如果我没记错的话，Android 指南说您应该使用 ActionBar 在应用程序中进行全局导航。

但同时，您通常希望尽可能以最旧的 API 为目标，以获得最大的兼容性。

我正在开始开发应用程序，并将目标设置为 Android 2.2。

可以在这里使用操作栏吗？如果没有，我用什么？

谢谢凯文

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T03:30:36.393

使用[ActionBarSherlock](http://actionbarsherlock.com/)。

*   确保您的项目使用 Android 4.0+ 作为构建目标，并且您添加了兼容性/支持库。（可以右键项目，选择Android Toots > Add Support Library）
*   下载 ActionBarSherlock 库项目并将其导入 Eclipse。
*   右键单击您的主项目，选择属性，然后在左侧窗格中选择 Android。在窗口的下半部分，单击添加按钮并选择 ActionBarSherlock 项目。单击确定。
*   您不使用常规的活动和片段，而是使用 Sherlock 图书馆中的活动和片段。它们具有相同的名称，但以“Sherlock”为前缀（SherlockActivity、SherlockFragment 等）
*   要访问代码中的操作栏，请调用`getSupportActionBar()`. 这将返回常规操作栏（用于 Honeycomb 及更高版本）或 Sherlock 操作栏（用于 pre-Honeycomb）。
*   主题说明在 ActionBarSherlock 网站上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T03:21:13.713

有一个很好的示例项目，名为[ActionBarCompat](http://developer.android.com/resources/samples/ActionBarCompat/index.html)，它展示了如何执行此操作。这不是针对 API 11+ 时可以做到的 100%，但它非常好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T03:33:20.427

绝对使用[ActionBarSherlock](https://stackoverflow.com/q/6031774/844882)而不是 ActionBarCompact。它更容易使用并且维护良好。

# java - 结合treeMaps输出相似的值

> ID：10867630
> 
> 赞同：0
> 
> 时间：2012-06-03T03:17:42.103
> 
> 标签：java, treemaps

我正在尝试比较两个树形图并比较关键字，然后对于两个地图的共同点，我想将这些值加在一起，然后将其输出到文本区域

到目前为止，我有两个可以成功工作的树图，但我不知道如何将它们与其他树进行比较。

到目前为止，这是我的代码：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;
import java.util.Set;
import java.util.TreeMap;
import java.util.TreeSet;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.*;
import javax.swing.border.Border;
import javax.swing.border.TitledBorder;

public class AnalysisFrame extends JFrame
{
private static final int FRAME_WIDTH = 370;
private static final int FRAME_HEIGHT = 700;

JPanel displayPnl, filePnl, fileOnePnl, fileTwoPnl, textPnl, controlPnl, buttonPnl, infoPnl;
JTextArea resultTA;
JButton quitBtn, oneBtn, twoBtn, goBtn;
JScrollPane resultSP;
Border blackline, empty;
Label infoLbl;
File fileOne, fileTwo, finalFile;

public AnalysisFrame()
{
    setSize(FRAME_WIDTH, FRAME_HEIGHT);
    displayPnl = new JPanel();

    createFilePanel();
    displayPnl.add(filePnl);

    createTextPanel();
    displayPnl.add(textPnl);

    createControlPanel();
    displayPnl.add(controlPnl);

    add(filePnl, BorderLayout.NORTH);
    add(textPnl, BorderLayout.CENTER);
    add(controlPnl, BorderLayout.SOUTH);

    this.setTitle("Steven Qualls - CP3 Final");
}

private void createFilePanel() {
    filePnl = new JPanel();

    createFileOnePanel();
    filePnl.add(fileOnePnl);

    createFileTwoPanel();
    filePnl.add(fileTwoPnl);

}

            public void createFileOnePanel() {
                fileOnePnl = new JPanel();

                TitledBorder fileOneB;
                blackline = BorderFactory.createLineBorder(Color.black);
                fileOneB = BorderFactory.createTitledBorder(blackline, "File 1");
                fileOneB.setTitleJustification(TitledBorder.CENTER);
                fileOnePnl.setBorder(fileOneB);

                oneBtn = new JButton("Choose File");

                fileOnePnl.add(oneBtn);
                oneBtn.setPreferredSize(new Dimension (100,30));

                        class OneButtonListener implements ActionListener
                        {
                            @Override
                            public void actionPerformed(ActionEvent evt)
                            {
                                final JFileChooser oneFC = new JFileChooser();
                                oneFC.showOpenDialog(AnalysisFrame.this);
                                String newLine = null;
                                oneFC.getName(null);
                                int returnVal = 0;
                                File fileOne = oneFC.getSelectedFile();

    Scanner input = null;
            try {
                input = new Scanner(fileOne);
            } catch (FileNotFoundException ex) {
                Logger.getLogger(AnalysisFrame.class.getName()).log(Level.SEVERE, null, ex);
            }

    String inputText = input.nextLine();

    String[] words = inputText.split("[ \n\t\r,.;:!?(){}]");

    TreeMap<String, Integer> mapOne = new TreeMap<>();

    for(int i = 0; i < words.length; i++){
        String key = words[i].toLowerCase();

        if (words[i].length() > 1){
            if (mapOne.get(key) == null){
                mapOne.put(key, 1);

            }
            else {
                int value = mapOne.get(key).intValue();
                value++;
                mapOne.put(key, value);

            }
        }

    }
    /* Experimental Set Code

    Set<String> setOne = mapOne.keySet();
    for (String key : setOne)
    {
        Integer value = mapOne.get(key);

    }
    * 
    */

                            }

                        }
                        ActionListener oneListener = new OneButtonListener();
                        oneBtn.addActionListener(oneListener);

            }

            public void createFileTwoPanel() {
                fileTwoPnl = new JPanel();

                TitledBorder fileTwoB;
                blackline = BorderFactory.createLineBorder(Color.black);
                fileTwoB = BorderFactory.createTitledBorder(blackline, "File 2");
                fileTwoB.setTitleJustification(TitledBorder.CENTER);
                fileTwoPnl.setBorder(fileTwoB);

                twoBtn = new JButton("Choose File");

                fileTwoPnl.add(twoBtn);
                twoBtn.setPreferredSize(new Dimension (100,30));

                        class TwoButtonListener implements ActionListener
                        {
                            @Override
                            public void actionPerformed(ActionEvent evt)
                            {
                                final JFileChooser twoFC = new JFileChooser();
                                twoFC.showOpenDialog(AnalysisFrame.this);
                                String newLine = null;
                                twoFC.getName(null);
                                int returnVal = 0;
                                File fileTwo = twoFC.getSelectedFile();

                                        Scanner input = null;
            try {
                input = new Scanner(fileTwo);
            } catch (FileNotFoundException ex) {
                Logger.getLogger(AnalysisFrame.class.getName()).log(Level.SEVERE, null, ex);
            }

    String inputText = input.nextLine();

    String[] words = inputText.split("[ \n\t\r,.;:!?(){}]");

    TreeMap<String, Integer> mapTwo = new TreeMap<>();

    for(int i = 0; i < words.length; i++){
        String key = words[i].toLowerCase();

        if (words[i].length() > 1){
            if (mapTwo.get(key) == null){
                mapTwo.put(key, 1);

            }
            else {
                int value = mapTwo.get(key).intValue();
                value++;
                mapTwo.put(key, value);

            }
        }

    }

                            }
                        }
                        ActionListener twoListener = new TwoButtonListener();
                        twoBtn.addActionListener(twoListener);
            }

private void createTextPanel() { 
    textPnl = new JPanel();

    resultTA = new JTextArea(100, 25);
    resultTA.setEditable(false);
    resultTA.setLineWrap(true);
    resultTA.setWrapStyleWord(true);

    resultSP = new JScrollPane(resultTA);

    textPnl.add(resultTA);
    textPnl.add(resultSP);
}

private void createControlPanel() {
    controlPnl = new JPanel();
    controlPnl.setLayout(new GridLayout(2,1));

    createInfoPanel();
    controlPnl.add(infoPnl);

    createButtonPanel();
    controlPnl.add(buttonPnl);

}

            private void createInfoPanel() {
                infoPnl = new JPanel();

                JLabel infoLbl = new JLabel("Execute will find and output words both files have in common.", JLabel.CENTER);
                infoPnl.add(infoLbl);
            }

            private void createButtonPanel() {
                buttonPnl = new JPanel();

                goBtn = new JButton("Execute");
                quitBtn = new JButton("Quit");

                buttonPnl.add(goBtn);
                buttonPnl.add(quitBtn);

                goBtn.setPreferredSize(new Dimension (100,30));
                quitBtn.setPreferredSize(new Dimension (100,30));

                class QuitButtonListener implements ActionListener
                {
                    @Override
                    public void actionPerformed(ActionEvent evt)
                    {
                        System.exit(0);
                    }
                }

                        ActionListener quitListener = new QuitButtonListener();
                        quitBtn.addActionListener(quitListener);

                class GoButtonListener implements ActionListener
                {
                    @Override
                    public void actionPerformed(ActionEvent evt)
                    {

                    }
                }
                        ActionListener goListener = new GoButtonListener();
                        goBtn.addActionListener(goListener);

            }

} 
```

这是我想出的一些伪代码，我不确定这是否可行或可行，但这是我想出的唯一方法

```
Get a word from mapOne
Check if word exists in mapTwo //This part is going to be the hardest I'm pretty sure
If word is found, get the key and set as freq2 then remove from mapTwo //Not sure if this is even needed
If word is not found in mapTwo, remove word from mapOne
Check mapOne.isEmpty if true, end loop 
```

我的括号或其他东西似乎也有问题，我是编程新手，所以它可能是类似的东西，但是当我制作树形图时，我可以在同一个代码块中成功输出它们，但如果我去底部并尝试在其他地方输出它出现为空或未找到，就像地图只存在于该区域内，我知道我应该知道为什么会发生这种情况，但我不知道，我假设与公共或私人有关，或其他什么。

提前感谢您的帮助，抱歉，问题太大了，我很迷茫。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T03:46:01.953

> **我正在尝试比较两个** ~~树形~~ **图地图并比较** ~~关键字~~ **键，然后对于两个地图共有的那些我想** ~~将~~ **值连接在一起，然后将其输出** ~~到文本区域~~。

```
final Set<String> intersection;
final Set<String> values2;

// Since we're going to mutate the first set, we create a new set that is 
// completely independent from the map.  We fill it with they keys of the 
// first map.

intersection = new HashSet<String>(map1.keySet());  // get the first map's keys
values2 = map2.keySet();                            // ... and the second map's keys

intersection.retainAll(values2);                    // find the intersection

for (String key : intersection)                     // for each value in both sets ...
{                                                   // ... output the details
  System.out.println("key: " + key);
  System.out.println("value 1: " + map1.get(key));
  System.out.println("value 2: " + map2.get(key));
} 
```

见：[`Set.retainAll()`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#retainAll%28java.util.Collection%29)。

# python - 附加到列表返回“列表索引必须是整数，而不是 unicode”（django/python）

> ID：10867631
> 
> 赞同：0
> 
> 时间：2012-06-03T03:18:06.990
> 
> 标签：python, django

我正在尝试将对象附加到列表中，但我不断收到错误消息`list indices must be integers, not unicode`。这对我来说没有任何意义，因为我没有以任何方式操作列表索引......我只是创建一个新列表并将对象添加到它。

瞧：

```
def read(self, request, uid, month, year):
    qs = NewLesson.objects.filter(student__teacher = request.user).filter(endDate__gte=date(int(year), int(month), 1)).filter(startDate__lte=datetime.date(int(year), int(month), calendar.mdays[month]))
    lessonList = []
    qsList = list(qs)
    for l in qsList:
        if l.frequency == 0:
            x = EachLesson()
            x.lessonID = l.id
            x.actualDate = l.startDate
            x.student = l.student
            lessonList.append(x)
        else:
            sd = next_date(l.startDate, l.frequency, datetime.date(int(year), int(month), 1))
            while (sd <= date(int(year), int(month), calendar.mdays[month])):
                x = EachLesson()
                x.lessonID = l.id
                x.actualDate = sd
                x.student = l.student
                lessonList.append(x)
                sd += datetime.timedelta(recurrence)

    return lessonList 
```

为了这个例子，假设 NewLesson 和 EachLesson 在模型中具有相似的结构。

提前致谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T03:34:56.837

好吧，重要的提示是您完成 getitem 调用的*唯一地方：*`mdays[month]`

如果您必须在其他地方转换`month`为一个，很可能是一个导致错误的字符串`int``month``calendar.mdays[month]`

否则，这是您的回溯会识别到的其他地方的调用。我的钱是在`mdays[month]`其他`int(month)`地方。

# ruby-on-rails - rails routing：结合索引和显示动作

> ID：10867633
> 
> 赞同：3
> 
> 时间：2012-06-03T03:18:19.417
> 
> 标签：ruby-on-rails, rails-routing

我有一个现有的基于搜索的应用程序正在移植到 Rails。由于遗留性质，我需要保留表单的现有 URL：

```
/books          # search all books
/books/fiction  # search books with :category => fiction 
```

我将这些映射到我的控制器的`index`&`show`操作，它工作正常，但是用于显示所有书籍与特定类别书籍的代码和标记几乎相同。

`show`结合和`index`动作的最佳方式是什么？因为这个应用程序`index`确实是`show`with的退化案例`:category => nil`。

我可以：

```
def index
   show
   render "show"
end 
```

但这似乎有点难看。在 Rails 中是否有更惯用的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T03:27:31.827

为什么不简单地使用带有可选类别的一条路线：

```
get '/books(/:category)' => 'books#search' 
```

然后在`BooksController`：

```
def search
    # Look at params[:category], if it is there then use it
    # to search, if it isn't there then list 'em all.
    @results = ...
end 
```

然后你只有一条路线，一个控制器，一个视图（统治它们并在黑暗中约束它们），没有重复或诡计。

# jquery - 有没有办法在 HTML5 中保存到 Web SQL 之前调整图像大小？

> ID：10867647
> 
> 赞同：4
> 
> 时间：2012-06-03T03:21:32.030
> 
> 标签：jquery, image, html, canvas, resize

我需要允许用户选择图像，然后将 base64 图像数据保存到 Chrome 中的 web sql 数据库。然后在用户上线时，将这些数据上传到服务器。

我可以像这样获取图像数据：

```
function onFileUploadChange(input) {
        if (input.files && input.files[0]) {
            //alert(input.files.length);
            for (i = 0; i < input.files.length; i++) {
                previewImage(input.files[i], "ImageTag" + getUniqueID());
            }
        }
    }

    function previewImage(file, imgID) {

        $("#ImagePreview").append("<img id='" + imgID + "'  />");

        var reader = new FileReader();
        reader.onload = function (e) {
            $("#" + imgID)
            .attr('src', e.target.result)
            .width(200)
            .height(200);

        };

        reader.readAsDataURL(file);
    } 
```

image.src 具有 base64 图像数据。

一旦用户点击保存，我将抓取所有图像的 src，即 base64 图像数据，并将它们保存到 chrome 的 web sql 数据库。现在的问题是大多数图片太大了。我想将它们调整为原始大小的 1/4，然后将其保存到 web sql。有什么办法吗？应该是帆布吧？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T03:57:40.683

这是在画布中执行此操作的示例：

[http://jsfiddle.net/7QMqX/](http://jsfiddle.net/7QMqX/)

如果 jsfiddle 出现故障，这是相关部分：

```
img.onload = function() {
    // original image size:
    console.log(img.width); // 182
    console.log(img.height); // 176
    // lets resize it to 1/4 original size
    var bigside = Math.max(img.width, img.height);
    var ratio =  0.25;
    can.width = img.width * ratio;
    can.height = img.height* ratio;
    ctx.scale(ratio, ratio); // scale by 1/4
    ctx.drawImage(img, 0, 0);
    // Lets also show the original image for comparison:
    document.body.appendChild(img);

    // anyway, now we can use this command to get the base64 data of the resized image:
    console.log(can.toDataURL());
} 
```

You can draw anything to canvas, and so you load the image, resize the canvas to be 1/4 the image's size, scale the canvas by 1/4, and then draw the image. Then you can get the bitmap on the canvas by calling `toDataURL`, which returns the base64 string.

**note that toDataURL will fail if any of the items drawn to a canvas are not same-domain or [cors-enabled](http://enable-cors.org/).**

# scroll - 鼠标滚轮不在 tmux 中滚动

> ID：10867648
> 
> 赞同：22
> 
> 时间：2012-06-03T03:21:33.510
> 
> 标签：scroll, ubuntu-11.10, tmux

它在 vim 中可以滚动，但在 tmux 中不能滚动。

我遵循了诸如添加之类的建议

```
set -g history-limit 1000
set -g terminal-overrides 'xterm*:smcup@:rmcup@'
setw -g mode-mouse on
set-window-option -g mode-mouse on 
```

`.tmux.conf`但他们都没有帮助

我得到的只是历史命令滚动。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-03T09:44:45.690

正确的命令是：

```
set -g mode-mouse on 
```

你也可以将它添加到你的 ~/.tmux.conf

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-04-11T13:50:35.677

只是将两个相关答案联系在一起：

> 为什么`tmux set -g mouse-mode on`不再工作？

[正如此答案中](https://stackoverflow.com/a/33336609/2375855)所指出的，该选项自**tmux 2.1 版**以来已重命名为：

```
tmux set -g mouse on 
```

要查找本地 tmux 版本，只需运行`tmux -V`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-17T19:26:37.007

```
set -g mouse on 
```

如果它在你的 ~/.tmux.conf 中，就像这样

# java - java作为脚本语言？

> ID：10867649
> 
> 赞同：1
> 
> 时间：2012-06-03T03:21:46.327
> 
> 标签：java, groovy

首先我在网上阅读了一些东西后对脚本语言的理解是，我们可以将其归类为用户可以直接运行而无需编译的脚本语言。最近我在开源产品 xwiki 上工作，我看到他们使用 groovy 作为脚本语言，即从用户界面我可以编写小程序，一旦我保存它，它就会在后端编译和执行。他们是如何做到的，只是简单地将程序作为字符串传递，然后使用 groovy 编译器编译和运行它。如果这种方式 groovy 可以被视为编译语言，因为为了用户体验，他不必编译代码并即时运行（尽管在内部它也被编译成字节码）。

如果这是真的，我们也可以用 java 实现类似的东西，即

```
Process process1 = Runtime.getRuntime().exec("javac "+stringContainingProgram); 
```

并从输入流中获取编译代码而不是运行它。

**我可以说在这方面我们可以将 java 视为脚本语言吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T03:28:05.047

我认为您混淆了“脚本语言”和“解释语言”这两个术语。

解释语言是一种在运行前没有预编译的语言。

脚本语言通常是一种允许任务自动化（脚本）的语言。

Java 有点令人困惑，因为它确实有一个编译阶段，其中 Java 代码被翻译成 JVM 字节码，然后在运行时解释这个字节码，因此 Java 具有编译和解释语言的特性。

使用 Runtime.GetRuntime().exec() 您可以在运行时调用命令，但这与拥有执行相同操作的 bash 脚本相同（或为此将它们输入到终端中）。

在这种情况下，您概述了您正在使用 java 显式调用编译器，下一个逻辑步骤是运行它，但是代码不是从您的 Java 代码中运行的，您的 Java 代码只是在调用它。

简短的回答是否定的，Java 不是一种完全解释型的语言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T03:40:15.700

IMO 术语“脚本语言”太模糊，无法以有意义的方式进行辩论。Groovy 是一种脚本语言吗？它可以提前编译，也可以及时编译。

纯解释语言是脚本语言吗？IMO 语言的执行方式并不重要，因为我不会将早期解释的 BASIC 称为“脚本语言”。

静态类型语言是脚本语言吗？在这里尝试一些有趣的东西......但是带有可选类型的语言呢？

对我来说，归结为“我是否必须手动编译代码”。Java可以是脚本语言吗？Tricky ... 是一个符合“用户*脚本*”界面的编辑器插件，还是只是“编辑器代码库的一部分”？我没有一个我可以肯定地捍卫的答案，并且可以看到双方都在争论。

如果走投无路，honey badger 也不在乎，并说 Java 不是脚本语言，而 Groovy*可以*。但是巨大的系统是用“脚本”语言编写的，比如 Perl。（它们是否*应该*是……值得商榷。）现在要归结为“脚本语言与编程语言的区别是什么？”

真的没什么。IMO 区分几乎总是毫无意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T03:31:24.543

您在示例中拥有的不是 Java。它是一种具有类似 Java 语法的表达式语言。在真正的 Java 中，必须将声明嵌入到类或方法中。

因此，基于该示例，您不能说 Java 是一种脚本语言。您可以创建类似 Java 的脚本语言，但您需要解决一些可用性问题。就像导入的不同语法一样……如果您希望脚本语言具有交互性。

还有一个问题是，要求用户显式声明变量*及其类型*的脚本语言不是人们想要的。真正的 Java 从根本上说是一种具有显式类型声明的静态类型语言。脚本语言（一般来说）是动态类型的。

* * *

> 我可以说 java 不是脚本语言，因为它不是动态类型语言吗？

并不真地。“脚本语言”是*通常用于*脚本的语言。这就是你所能说的。我们甚至无法清楚地定义什么是“脚本”。

没有基本的自然法则说您不能使用静态类型语言编写脚本。这只是......好吧......不是人们想要的。

> 关于编译是否及时或提前，这不是将任何语言限定为脚本语言的标准。对？

那是对的。它不会从根本上影响用于脚本目的的语言的可用性。

现在，您可能会争辩说，如果用户必须在运行脚本之前*显式*编译它们，那么这不是脚本。也许这是将“普通”编程与“脚本”区分开来的东西。然而，这样做的风险是我们隐含地限制“脚本语言”和“脚本”以适应/适合我们的特定偏见。

* * *

如果您通读此答案和其他答案，我们基本上都同意一点。没有关于什么是脚本语言的有用定义，因此无法说 Java 是否是一种。

一个更容易回答的问题是 Java 是否会成为一种*很好的脚本语言*……我的回答是我不这么认为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T07:12:39.780

我知道我的回答会被否决，但是..Dave Newton 是绝对正确的。这个词太笼统了...

在您的示例中，不必编译常规代码。恕我直言，在这种情况下更典型的 groovy 用法是使用 groovy 解释器。

是的：java 可以用作脚本语言。我见过企业产品，您可以在其中使用 Java 代码编写小脚本。该程序将其包装在一个类中，编译并执行它。

因此，如果您比较这些方法，用户是否使用像 groovy 这样的“真正的脚本”语言或通过小技巧将 Java 变成一种语言对用户来说并不重要。

顺便说一句：大多数 java 语句也在 groovy 中运行......所以如果你只看一下像这样的代码片段

```
res = 5 * 16 + 2 
```

您无法判断这是脚本还是未编写脚本的内容的一部分。您甚至无法分辨它是用哪种语言编写的！

所以，回到你原来的问题：

我不会说您可以**将**java 视为一种脚本语言，但在某些情况下您可以使用 java**满足您的脚本需求**，但是人们会错过像动态语言这样的“真正的”脚本语言所附带的快捷方式。

**更新：**

> 正如您所说的“java 可以用作脚本语言。我已经看过企业产品，您可以在其中使用 java 代码编写小脚本”如果您能简要介绍一下您在这里谈论的小脚本类型会很有帮助？

我说的是扩展产品超出正常功能的小脚本：MS Office 产品中的 Visual Basic、Bonita（工作流产品）中的 Groovy 以及 Jasper iReports（报告生成器）中的 Groovy、JavaScript 和 Java（是的！Java！）

顺便说一句：你会在这里找到在 Jasper 中使用 Java 和 Groovy 的一个很好的比较：http: [//jasperforge.org/uploads/publish/ireportwebsite/IR%20Website/iReport_groovy.html](http://jasperforge.org/uploads/publish/ireportwebsite/IR%20Website/iReport_groovy.html)

它向您展示了 Java 可以用作脚本语言，但其他解决方案更好:-)

> 我问这个是因为大多数网络都说脚本语言通常是一种允许任务自动化（脚本）的语言。如果我按照这个定义，那么每种语言都成为脚本语言，因为我们可以使用任何语言自动执行一种或其他类型的任务。

对我来说，脚本语言不仅仅是一种允许任务自动化的语言。对我来说，PHP、Javascript、Visual Basic 和 Groovy 也是脚本语言。还有关于 Post* *Script* *?

顺便说一句：刚刚发现[http://www.beanshell.org/](http://www.beanshell.org/) - 一种完全兼容 Java 的脚本语言。

正如我已经提到的，恕我直言，许多语言都可以用作脚本语言，但有些更适合:-)

# vim - 以编程方式使用 Vim 命令迷你缓冲区

> ID：10867651
> 
> 赞同：1
> 
> 时间：2012-06-03T03:22:11.030
> 
> 标签：vim

我认为我的问题可能是我没有正确的术语来搜索。我想在窗口底部的小迷你缓冲区（用 Emacs 术语，对不起）中编写一个交互式插件，当您键入`:`以进入命令模式时，您的光标位于该区域。FuzzyFinder 和 ctrlp 之类的插件似乎打开了一个新缓冲区，但理想情况下，如果可能的话，我只想共享命令区域，因为我想做的事情总是适合一行。

Vimscript 是否允许使用这个区域，就像 Vim 自己内置的 wildmenu 作品一样？打开一个新的拆分缓冲区对于我想做的事情来说有点笨拙。

很高兴自己阅读文档，我目前还没有真正的切入点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T05:32:28.073

那是命令行。

请参阅[此 Vim wiki 页面](http://vim.wikia.com/wiki/User_input_from_a_script)，了解`input()`. 你想做什么样的事情？

# mysql - mysql vlookup楼

> ID：10867652
> 
> 赞同：0
> 
> 时间：2012-06-03T03:22:27.607
> 
> 标签：mysql

我有一个具有以下 id 值的 navicat 表：

```
VALUES: (5),(7),(9),(10),(25),(50),(55),(56),(62),(63),(64),(65),(68),(70),(72),(80); 
```

我有一个查询：

```
select 
a.id as first_id_number, 
b.id as second_id_number, 
((b.id - a.id) * 2) + b.id as third_id_number
from my_table as a
join my_table as b 
on a.id = (select max(id) from my_table where id < b.id)
where ((b.id - a.id) * 2) + b.id in (select id from my_table); 
```

但是，查询仅在连续行之间应用公式。我想查询所有可能的组合，其中：（（较高的 ID 号 - 较低的 ID 号）* 2）+ 较高的 ID 号等于第三个 ID 号。

例如：

较高的 ID 号 较低的 ID 号 第三个 ID 号 5 25 65 50 55 65 62 63 65

在mysql中可以吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T08:43:31.647

您是否考虑过使用 的三个而不是两个别名`my_table`，生成一个完整的叉积并将您的条件移至`where`子句？IE

```
select
a.id as first_id_number,
b.id as second_id_number,
c.id as third_id_number
from my_table as a, my_table as b, my_table as c
where <your fomula> 
```

# wordpress - 更改了 WordPress 网站的 functions.php 文件，现在整个网站都失去了“主题”

> ID：10867654
> 
> 赞同：0
> 
> 时间：2012-06-03T03:22:42.217
> 
> 标签：wordpress, url, directory

好的，我会尽我所能解释...我在一个托管帐户下有两个域。（granitechristianacademy.org 和 gofbc.com）我首先使用 granitechristianacademy.org 创建了主机帐户，然后在子目录“/FBC”中添加了 gofbc.com。
当我输入 gofbc.com 时，我试图弄清楚如何更改浏览器显示 granitechristianacademy.org/FBC 的方式。为了解决这个问题，我更改了 wordpress 设置中的两个 URL。我将 wordpress 目录的位置设置为 /FBC，将站点 URL 设置为 gofbc.com。我交换了两者，我的网站 (gofbc.com) 从前端正确显示，但不允许我登录仪表板。所以我按照 Wordpress 的指示通过更改活动主题的 functions.php 文件并添加手动更改两者

"update_option('siteurl','http://example.com/blog'); update_option('home','http://example.com/blog');"

在最初的之后

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T05:35:31.877

听起来你把自己置于一个非常棘手的境地。如果您有权访问数据库，则可以验证**wp_options**表中的 URL 是否正确。您需要在该表中查找包含指向您网站的 URL 的任何条目，然后检查它们是否都正确（是的，有几个）。

除此之外，您可以尝试重新激活您的网站主题或再次保存永久链接设置。出于某种原因，刷新永久链接是解决比您想象的更多问题的神奇解决方案。

如果这些都不起作用，那你就有点冲突了。我强烈建议您使用第二个托管帐户，或者至少找到一个允许多个域的托管计划。虽然它可能会花费更多，但替代方案是一个巨大的头痛和更多的时间。

# php - PHP 字符串和 SQL 的问题

> ID：10867659
> 
> 赞同：1
> 
> 时间：2012-06-03T03:25:41.003
> 
> 标签：php, sql, string

我是 PHP 的初学者，但一直在论坛上尝试一个项目。我遇到了一个问题。

```
 $getLatest = dbquery("SELECT * FROM site_forum_thread_comments,site_forum_threads,site_forum_subs WHERE site_forum_thread_comments.thread_id=site_forum_threads.thread_id AND 
        site_forum_threads.sub_id=site_forum_subs.sub_id AND
        site_forum_subs.main_id='".$forum['ID']."'
        ORDER BY site_forum_thread_comments.timestamp DESC LIMIT 1");
            while ($latest = mysql_fetch_assoc($getLatest))
                {
                    $getUser = dbquery("SELECT * FROM users WHERE id='".$latest['user_comment_id']."'");
                    while ($user = mysql_fetch_assoc($getUser))
                    {
                            echo ' <BR>Latest Post: '.$latest['comment'].'
                            <BR>User: '.$user['username'].'
                            <BR>Forum: '.substr($latest['site_forum_threads.title'],0,20).'...';
                    }
                } 
```

这只是代码片段。发生的情况是，$getLatest 从 SQL 查询中获取代码，这些代码来自我数据库中的许多不同表。我的问题：在论坛的最后一部分 '.substry($latest['...blahblahblah']

我可以在其中添加表格功能吗？所以我可以从 site_forum_threads 中检索列“标题”吗？因为在我的其他一个表中，还有一个名为“表”的列，并且查询在它应该从哪个列获取数据之间混淆了。

提前致谢！

编辑：@zerkms

```
$getLatest = dbquery("SELECT * FROM site_forum_thread_comments,site_forum_threads,site_forum_subs 
        site_forum_threads.title AS title_from_site_forum_threads 
        WHERE site_forum_thread_comments.thread_id=site_forum_threads.thread_id AND 
        site_forum_threads.sub_id=site_forum_subs.sub_id AND
        site_forum_subs.main_id='".$forum['ID']."' AND
        side_forum_threads.title= title_from_site_forum_threads
        ORDER BY site_forum_thread_comments.timestamp DESC LIMIT 1");
            while ($latest = mysql_fetch_assoc($getLatest))
                {
                    $getUser = dbquery("SELECT * FROM users WHERE id='".$latest['user_comment_id']."'");
                    while ($user = mysql_fetch_assoc($getUser))
                    {
                            echo ' <BR>Latest Post: '.$latest['comment'].'
                            <BR>User: '.$user['username'].'
                            <BR>Forum: '.substr($latest['title_from_site_forum_threads'],0,20).'...';
                    }
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T03:35:12.817

是的，只需明确指定名称并为其命名

```
site_forum_threads.title AS title_from_site_forum_threads 
```

并使用`$latest['title_from_site_forum_threads']`

总共的选择部分可能看起来像

```
SELECT *, site_forum_threads.title AS title_from_site_forum_threads FROM ... 
```

但我个人建议您始终只选择必要的东西，手动枚举用逗号分隔的所有字段

# c++ - 我想计算 char* word_list[] (C++) 中的字符串数

> ID：10867660
> 
> 赞同：0
> 
> 时间：2012-06-03T03:26:00.707
> 
> 标签：c++, arrays, string, pointers

我正在编程刽子手。

疑问词保存在 char word_list[], const 字符串中。

```
word_list[] = {"apple", "computer", ..., "mouse"}; 
```

问题是从 中随机选择的`word_list[]`，当我使用随机函数时，我想知道`word_list[]`.

`word_list`是 的指针`char*`，对吗？

最后，我怎么知道字符串的数量`word_list[]`？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T03:36:41.193

如果`word_list[]`像您的代码片段一样声明，您可以通过执行以下操作获取元素数：

```
const size_t word_count = sizeof(word_list) / sizeof(word_list[0]); 
```

您可能会考虑一种更灵活的方法，例如在运行时读取 a `std::vector`of 。`std::string`这将允许您修改单词列表而无需重新编译，并且该`vector::size()`函数会告诉您元素的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T03:37:14.343

对于您定义的初始化数组，您可以使用 C 方法来确定数组中的元素数。此方法使用`sizeof`运算符查找数组对象的总大小，然后将该值除以数组元素的大小。

```
const char * word_list[] = { "a", "b", "c" };

for (int i = 0; i < sizeof(word_list)/sizeof(word_list[0]); ++i) {
    // do something
} 
```

如果`word_list`是 STL ，您可以在容器上`vector`使用该方法。`size()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T03:37:42.350

由于您对字符串进行了硬编码，因此您也应该对字符串的数量进行硬编码。

```
char* word_list[] = {"apple", "computer", "mouse"};
int words = 3; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T03:36:33.707

`word_list`应该是`char* []`（char 指针数组）。由于它是一个数组，因此您可以通过`sizeof (word_list) / sizeof(word_list[0])`.

# ruby-on-rails - 通过两个 has_many 关联查找所有项目

> ID：10867661
> 
> 赞同：1
> 
> 时间：2012-06-03T03:26:11.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model, mongoid

假设我有一个 Rails 应用程序，其建模如下：

1.  有一个 HOUSE 类；它有很多房间
2.  有一个ROOM类；它属于_to a HOUSE，拥有_many FURNISHINGS
3.  有一个家具类；它属于一个房间

给出这个模型设置，如何找到给定房屋中的所有家具？我希望能够做类似的事情`arbitrary_house.furnishings`。

在不添加更多关联的情况下这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T03:44:04.740

按如下方式设置模型：

房子.rb

```
has_many :rooms
has_many :furnishings, :through => :rooms 
```

房间.rb

```
belongs_to :house
has_many :furnishings 
```

家具.rb

```
belongs_to :room 
```

现在你可以说

```
arbitrary_house.furnishings 
```

另见：

```
http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association 
```

# ruby - 映射和扫描阵列

> ID：10867665
> 
> 赞同：0
> 
> 时间：2012-06-03T03:26:43.617
> 
> 标签：ruby

我想列出包含给定关键字的数组中的所有字符串。

```
array_name = ["this is california", "hawaii", "washington", "welcome to california"]

a = array_name.map { |s| s.scan(/\b(california)\b/i) }.flatten

# => ["california", "california"] 
```

以上将创建一个新的字符串数组，其中每个字符串都是“california”。如何用整个原始字符串创建一个新数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T03:32:57.937

如果您尝试查找匹配的字符串，则使用了错误的方法，您想要`select`：

```
array_name.select { |s| s.match(/\bcalifornia\b/i) }
# ["this is california", "welcome to california"] 
```

[`select`](https://ruby-doc.org/core/Enumerable.html#method-i-select)方法：

> 返回一个数组，其中包含块不为假的枚举*的*所有*元素。*

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T11:24:44.673

```
array_name.grep /\bcalifornia\b/i
# => ["this is california", "welcome to california"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T03:34:44.543

```
a = array_name.select{|b| b.match /\b(california)\b/i)} 
```*

# android - 广播接收器和烘烤

> ID：10867675
> 
> 赞同：0
> 
> 时间：2012-06-03T03:31:52.657
> 
> 标签：android, broadcastreceiver, intentservice, looper

全部，

我有一个没有关联布局或任何活动的广播接收器。它正在监听某些人从音频插孔中拔出某些东西。

**我已经能够让我的接收器工作并发出通知。我的问题是如何使用没有主要活动或主要布局的接收器显示 Toast 消息？**

现在我发现一两个帖子基本上说这不能完成，因为你需要一个活套来让 Toast 工作。[Android + SMS 接收器 + Toast = 失败](https://stackoverflow.com/questions/3421017/android-sms-receiver-toast-fail)

[除了这个链接http://developer.android.com/reference/android/os/Looper.html](http://developer.android.com/reference/android/os/Looper.html)之外，我不熟悉 Loopers 。

**有没有办法从广播接收器的 onReceive 方法创建一个 IntentService，该方法在工作线程上有一个循环器，使我能够在我的接收器被触发时引发 Toast？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T03:42:56.573

认为您将在广播接收器的 onReceive 方法中获取上下文，请尝试以下代码。

```
public class CallReceiver extends BroadcastReceiver {
   @Override
   public void onReceive(final Context context, final Intent intent) {
      Toast.makeText(context, "NEW_TOAST",Toast.LENGTH_LONG).show();
   }
} 
```

# ruby-on-rails - 如何检查局部变量是否在部分中定义？

> ID：10867683
> 
> 赞同：5
> 
> 时间：2012-06-03T03:33:21.330
> 
> 标签：ruby-on-rails

测试局部变量是否已定义并传递给局部变量的正确语法是什么？

例如，我渲染一个部分

```
<%= render partial: "data-map", locals: {lat: @model.lat, lon: @model.lon, zoom: 10} %> 
```

在部分需要做类似的事情

```
<%= map( options: {
  latitude: if lat.defined? ? lat : 0,
  longitude: if lon.defined? ? lon : 0,
  zoom: if zoom.defined? ? zoom : 50
  }
%> 
```

我无法让这个工作。

我还在 API 中看到了以下内容

```
<% if local_assigns.has_key? :headline %>
  Headline: <%= headline %>
<% end %> 
```

但我也遇到了麻烦。也许我没有得到正确的语法。

感谢任何指针

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T03:54:10.073

从三元格式中删除 if 如下：

```
<%= map( options: {
  latitude: defined?(lat) ? lat : 0,
  longitude: defined?(lon) ? lon : 0,
  zoom: defined?(zoom) ? zoom : 50
  }
%> 
```

# google-app-engine - 如何使用go语言在谷歌应用引擎中按键获取实体

> ID：10867689
> 
> 赞同：1
> 
> 时间：2012-06-03T03:34:56.447
> 
> 标签：google-app-engine, go, google-cloud-datastore

现在我使用 Go 语言在数据存储区中添加了一些实体，我可以查询所有实体，但是我想按键获取一个实体，如何获取 entity'key 并按键查询，如下所示：select * from Blog where key=?

```
c := appengine.NewContext(r)
g := Blog{
Title: r.FormValue("title"),
    Content: r.FormValue("content"),
}
_, err := datastore.Put(c, datastore.NewIncompleteKey(c, "Blog", nil), &g) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:45:32.673

请参阅Go 运行时的[数据存储文档：](https://developers.google.com/appengine/docs/go/datastore/overview#Introducing_the_Go_Datastore_API)

```
var b Blog
err := datastore.Get(c, key, &b) 
```

# asp.net-mvc-3 - 在插件 Nopcommerce 中更改管理员视图

> ID：10867693
> 
> 赞同：1
> 
> 时间：2012-06-03T03:35:27.153
> 
> 标签：asp.net-mvc-3, nopcommerce

我想更改`Views/Manufacturer/_CreateOrUpdate.cshtmlfrom`插件中的视图。

我知道在公共站点中，您只需将自定义视图放在主题的 View 文件夹中，但是对于管理员，我不确定如何覆盖现有视图。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T23:55:56.650

有一个分支允许覆盖管理区域中的视图

[http://nopcommerce.codeplex.com/SourceControl/network/forks/magnuskragelund/nopCommerce](http://nopcommerce.codeplex.com/SourceControl/network/forks/magnuskragelund/nopCommerce)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T12:10:54.270

您可以在现有视图中设置条件，即如果用户是管理员 /// 您的代码，则为默认功能。

> if(User.IsInRole("Admin")) { //你的代码 } else { //默认代码 }

# c# - Selenium Webdriver C# Sendkeys (Keys.Arrowdown)

> ID：10867695
> 
> 赞同：11
> 
> 时间：2012-06-03T03:35:45.627
> 
> 标签：c#, selenium, webdriver

我正在尝试使用 Selenium Webdriver/C# compile 做一个箭头，但是当我尝试编译时出现此错误：

> 'Keys' 是 'OpenQA.Selenium.Keys' 和 'System.Windows.Forms.Keys' 之间的模糊引用 (CS0104)

我的代码：

```
driver.FindElement(By.Id("ctl00_PlaceHolderMain_ctrlChangeBillingAddress_ctrlChangeBillingAddress_txtBillingAddress")).SendKeys(Keys.ArrowDown);
driver.FindElement(By.Id("ctl00_PlaceHolderMain_ctrlChangeBillingAddress_ctrlChangeBillingAddress_txtBillingAddress")).SendKeys(Keys.Enter); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-03T03:37:33.753

如错误所述，`Keys`两个不同的命名空间中有两种不同的类型。

您需要通过编写明确地限定类型`OpenQA.Selenium.Keys`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-03T08:14:57.670

我可以为您提供两种实现方式，但第一种仅在本地有效：

1.  `Element.SendKeys(OpenQA.Selenium.Keys.ArrowUp);`

2.  `char c = '\uE013'; // ASCII code ArrowUp`

    `Element.SendKeys(Convert.ToString(c));`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-22T00:13:54.807

我的代码也发生了同样的事情。就像在我的注册中一样，1\. 我有一个地址字段，它从谷歌搜索中获取输入的地址，然后相应地填写字段，例如：Sub-urb、city、邮政编码等。2.有一个按钮可以附加一个文件（例如从桌面浏览并选择要附加的任何图像或文档）我收到错误“'Keys' is an ambiguous reference between `OpenQA.Selenium.Keys`and`'System.Windows.Forms.Keys' (CS0104)` 然后我意识到这意味着在两个不同的命名空间中有两种不同的 Keys 类型。Coz 用于地址选择，我的代码是：

```
driver.FindElement(By.XPath("//*[@id='PostalAddress_Address']")).SendKeys(Address); //Address to select from autofill and fill textboxes accordingly
        Thread.Sleep(500);
        driver.FindElement(By.XPath("//*[@id='PostalAddress_Address']")).SendKeys(Keys.ArrowDown);
        driver.FindElement(By.XPath("//*[@id='PostalAddress_Address']")).SendKeys(Keys.Enter); 
```

对于附加文件，代码是：

```
//Select and attach file from the computer
        driver.FindElement(By.XPath("//*[@id='graduate-education']/div[4]/label")).Click(); //Click Attach file button
        Thread.Sleep(500);
        //driver.FindElement(By.XPath("//*[@id='graduate-education']/div[4]/label")).SendKeys(AttachFile);
        SendKeys.SendWait(@"Complete File Path"); //Select the file from the location
        Thread.Sleep(500);
        SendKeys.SendWait(@"{Enter}"); 
```

添加的命名空间是：

```
 using OpenQA.Selenium; using System; using System.Threading; using System.Windows.Forms; 
```

因为 - Keys 类型无法识别它实际属于的位置，所以我不得不更改地址字段的代码并使用 OpenQA.Selenium.keys.ArrowDown 如下：

```
driver.FindElement(By.XPath("//*[@id='PostalAddress_Address']")).SendKeys(Address); //Address to select from autofill and fill textboxes accordingly
        Thread.Sleep(500);
        driver.FindElement(By.XPath("//*[@id='PostalAddress_Address']")).SendKeys(OpenQA.Selenium.Keys.ArrowDown);
        driver.FindElement(By.XPath("//*[@id='PostalAddress_Address']")).SendKeys(OpenQA.Selenium.Keys.Enter); 
```

这对我有用，希望对你也一样

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-20T10:23:40.893

尝试这个

> IWebDriver driver = new ChromeDriver();
> driver.Navigate().GoToUrl("http:www.google.com");
> IWebElement MyElement = driver.FindElement(By.Name("q"));
> MyElement.SendKeys(Keys.ArrowUp); MyElement.SendKeys(Keys.ArrowDown);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-03T14:49:51.190

我建议下一步做：

```
 IWebElement element = driver.FindElement(By.Id("ctl00_PlaceHolderMain_ctrlChangeBillingAddress_ctrlChangeBillingAddress_txtBillingAddress"));
    OpenQA.Selenium.Interactions.Actions action = new OpenQA.Selenium.Interactions.Actions(driver);
    action.SendKeys(element, Keys.Down).SendKeys(element, Keys.Enter).Build().Perform(); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-04-21T17:54:19.493

**Actions 类**是 Selenium 提供的用于处理键盘和鼠标事件的能力。在 Selenium WebDriver 中，处理这些事件包括诸如拖放、使用控制键单击多个元素等操作。

```
 IWebDriver driver = new ChromeDriver();
    Actions action = new Actions(driver);
    action.SendKeys(Keys.UpArrow);
    action.Build().Perform();   // build and perform is used to complete that particular action. 
    action = new Actions(driver); // reinitialize 
    action.SendKeys(Keys.DownArrow);
    action.Build().Perform(); 
```

# java - 将 JCombobox 值返回到“原始”列表

> ID：10867701
> 
> 赞同：2
> 
> 时间：2012-06-03T03:37:12.847
> 
> 标签：java, swing, jcombobox

在我的代码中，如果用户选择生产，则可用的频道会更改，但如果用户决定选择“暂存”或“测试”，则应显示完整的频道列表。当这种情况发生时，显示的是`[Ljava.lang.String;@1c23f1bb`相反的。什么会纠正这种行为？我是java新手。

下面是我的代码，当我将 environmentCbx 设置为“生产”以外的其他内容时，我没有`communityNameString`在社区组合框中获得原始字符串数组。

```
String communityNameString[] = {"Connection","CDK","Governors", "Community", "Committee", "Center","All States","Community_2","Sandbox"};

  environmentCbx.addActionListener(new ActionListener(){
  public void actionPerformed(ActionEvent ae) {
      JComboBox environmentCbx = (JComboBox)ae.getSource();
      String environmentName = (String)environmentCbx.getSelectedItem();
      if("Production".equals(environmentName))
      {
          communityCbx.removeAllItems();
          //communityCbx.addItem(productionCommunityNames);
          communityCbx.addItem("Associate");
      }
      else
      {
          communityCbx.removeAllItems();
          communityCbx.addItem(communityNameString);
      } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T03:53:01.977

如本[例](https://stackoverflow.com/a/3191882/230513)所示，您可以拥有多个`ComboBoxModel`，您可以根据需要更改它们。只需构建两个模型：一个包含完整列表，另一个包含子集。

附录：仔细阅读，该符号是应用于 a`[Ljava.lang.String;@1c23f1bb`的方法的工件。一个项目应该是一个个体，例如；您已经添加了整个实例数组。[`toString()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#toString%28%29)`String []``Object``String``String`

# mongodb - 拥有与此正则表达式查询匹配的示例文档

> ID：10867706
> 
> 赞同：-1
> 
> 时间：2012-06-03T03:38:16.227
> 
> 标签：mongodb

所以我在阅读 Kyle 的书时遇到了他使用正则表达式匹配某些文本的示例：

```
db.reviews.find({
    user_id: ObjectId("4c4b1476238d3b4dd5000001"),
    text: /best|worst/i
}) 
```

但它没有示例文档，所以我无法想象他在此示例中使用的文档是如何构建的。那么您能否快速绘制一个上面的正则表达式适用于它的文档？据我所知，它当然有一个 _id 键和一个文本键，但是该文本键的值是什么样的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T05:46:55.657

想象一下这样的事情，在别处有一个用户集合，这是每个用户曾经写过的所有评论的集合。当您想要获取特定用户的所有评论时，您可以查询与该用户的 id 匹配的所有评论 - 这就是 user_id 部分。现在您决定只想要包含“最佳”或“最差”一词的评论（无论大小写如何）。这是查询的第二部分。

假设下面的三个文档都有匹配的 user_id，那么第一个和第三个将匹配文本查询，但中间一个不会。

```
{
   user_id: ObjectId(),
   text : "This was the worst one of my life!"
}

{

   user_id: ObjectId(),
   text : "Totally awesome, couldn't be better!"
}

{
   user_id: ObjectId(),
   text : "BEST EVAH!"
} 
```

# java - 在 Android 中用于网络通信的最佳软件包。Java/Apache？

> ID：10867708
> 
> 赞同：2
> 
> 时间：2012-06-03T03:38:36.543
> 
> 标签：java, android, apache, sockets

我正在尝试完成以下任务：

1.  使用 Android 应用程序作为客户端连接到现有服务器。
2.  保持连接活动发送和接收 yada yada，正常的保持活动会话。
3.  （困难的部分）我需要（尽可能接近实时）检测客户端的套接字中断。

我应该使用 Apache 网络包还是 Java 网络包？关于如何完成#3 的任何其他提示也值得赞赏。哪个软件包在 Android 应用程序中提供了最佳性能/可用性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:10:18.273

对于我曾经做过的一个项目（Android 应用程序和 Java 服务器），我使用了非常强大的[Netty](http://www.jboss.org/netty)框架。它使我能够实现一次协议并在服务器和应用程序之间共享代码。

根据您的需要，这可能有点矫枉过正，但它允许非常高效和可扩展的网络应用程序。

# mysql - 在 Create Table 语句中添加索引

> ID：10867710
> 
> 赞同：0
> 
> 时间：2012-06-03T03:39:05.843
> 
> 标签：mysql, sql

有没有办法可以做到这一点？我知道有单独的语句来明确说明这一点，但是有没有办法可以在 create table 语句中指定索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T03:43:44.303

```
CREATE TABLE lookup
(id INT, INDEX USING BTREE (id)) 
```

# php - 获取多维关联数组中的数组计数

> ID：10867711
> 
> 赞同：2
> 
> 时间：2012-06-03T03:39:47.060
> 
> 标签：php, count, associative-array, multidimensional-array

我正在尝试确定多维关联数组中每个数组的计数。例如，如果我有一个像这样的数组：

```
Array
(
    [food] => Array
        (
            [soup] => Array
                (
                    [chicken noodle] => 
                    [tomato] => 
                    [french onion] => 
                )

            [salad] => Array
                (
                    [house] => 
                    [ceasar] =>
                )

        )
    [drink] => Array
        (
            [soda] => Array
                (
                    [coke] => 
                    [sprite] => 
                    [dr pepper] => 
                )

            [alcoholic] => Array
                (
                    [whiskey] => Array
                        (
                            [Jim Beam] => 
                            [Jameson] =>
                            [Bushmills] =>
                        )
                    [vodka] => Array
                        (
                            [Stolichnaya] => 
                            [Ketel One] =>
                            [Grey Goose] =>
                            [Belvedere] =>
                        )
                    [rum] => Array
                        (
                            [Captain Morgan] => 
                            [Bacardi] =>
                        )
                )
        )
) 
```

不太清楚如何解释，所以我会尽力而为。我想找出数组中每个数组的计数。所以我期望从这个数组中得到的值看起来像：

```
Array
(
        // total count of all arrays at  "level 1" (i.e. food & drink)
        [0] => 2
        // total count of all arrays at  "level 2" (i.e. soup, salad, soda, alcoholic)
        [1] => 4
        // total count of all arrays at  "level 3" (i.e. chicken noodle, tomato, french onion, house, ceasar, coke, sprite, dr pepper, whiskey, vodka, rum)
        [2] => 11
        // total count of all arrays at  "level 4" (i.e. Jim Beam, Jameson, Bushmills, Stolichnaya, Ketel One, Grey Goose, Belvedere, Captain Morgan, Bacardi)
        [3] => 9
) 
```

现在我知道我只对值使用索引键而不是值，如果数组是标准索引数组，则更容易获取这些值（我认为我使用的是正确的术语在这里，请随时纠正我——当然，重点是让我在这里理解——而不是让某人只是“给我一个答案”:)）因为我可以循环遍历数组`for($i = 0 $i < count($array); $i++)`并增加我的计数因此。我已经在 SO 中搜索过这样的问题，但没有找到，如果我错过了，请随时简单地指出它。谢谢！

**解决方案！**（阅读评论以了解对话流程）

```
class Test {

        public function getCounts($data) {
            $levels = array();
            $counts = $this->calc($levels, 0, $data);
            return $counts;
        }

        private function calc(&$levels, $current, $parent) {
            if(!isset($levels[$current])) {
                $levels[$current] = 0;
            }
            foreach($parent as $child) {
                $levels[$current]++;
                if(is_array($child)) {
                    $this->calc($levels, $current+1, $child);
                }
            }
            return $levels;
        }

    }

    $test = new Test();

    $data['food']['soup']['chicken_noodle'] = '';
    $data['food']['soup']['tomato'] = '';
    $data['food']['soup']['french onion'] = '';
    $data['food']['salad']['house'] = '';
    $data['food']['salad']['ceasar'] = '';
    $data['drink']['soda']['coke'] = '';
    $data['drink']['soda']['sprite'] = '';
    $data['drink']['soda']['dr pepper'] = '';
    $data['drink']['alcoholic']['whiskey']['Jim Beam'] = '';
    $data['drink']['alcoholic']['whiskey']['Jameson'] = '';
    $data['drink']['alcoholic']['whiskey']['Bushmills'] = '';
    $data['drink']['alcoholic']['vodka']['Stolichnaya'] = '';
    $data['drink']['alcoholic']['vodka']['Ketel One'] = '';
    $data['drink']['alcoholic']['vodka']['Grey Goose'] = '';
    $data['drink']['alcoholic']['vodka']['Belvedere'] = '';
    $data['drink']['alcoholic']['rum']['Captain Morgan'] = '';
    $data['drink']['alcoholic']['rum']['Bacardi'] = '';

    $counts = $test->getCounts($data);

    echo '<pre>';
    print_r($counts);
    exit('</pre>');

    // Prints the following

    // Array
    // (
    //     [0] => 2
    //     [1] => 4
    //     [2] => 11
    //     [3] => 9
    // ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T03:49:40.860

**更新#2。**很多信息，如果我失去你，请告诉我。

我在最后一个代码中犯了几个小错误（需要通过`$current + 1`而不是`$current++`，并且`$levels[$current]++`在错误的位置）。我用你的示例数据测试了这个更新；它会为你工作。基本上，`calc()`它是一个递归函数，它遍历数组的每一级，计算作为数组的每个索引，并将该计数添加到主“计数”数组 ( `$levels`)。就像我在下面所做的那样，您可以将其直接粘贴到您的课程中。

它不会故意返回任何东西。`$levels`是[通过引用传递的](http://us.php.net/manual/en/language.references.pass.php)，每一层的计数直接在上面更新。因此，您传递给的第一个变量`calc()`将变成一个数组，就像您在问题中寻找的那个一样。

如果你的类脚本看起来完全一样，你*应该*得到错误。之后`class someName {`，您应该只*定义函数和变量*。实际执行操作的代码，例如 using`echo`或 setting `$test = new Test();`，需要放在类定义*之后。*

话虽如此，如果您希望*每次启动此类时都执行一些代码*，则应将此代码放在类的[构造函数](http://us.php.net/manual/en/language.oop5.decon.php)中。

以下是我认为您希望您的班级看起来的样子。如果您希望 $data 在类中，请声明变量`var $data`并将其填充到构造函数中。如果您感到困惑，请告诉我，我可以再次更新我的答案。

```
// Your class
class Test
{
    // Counts the number of arrays in each level of $data
    function calc(&$levels, $current, $parent)
    {
        if (!isset($levels[$current])) {
            $levels[$current] = 0;
        }
        foreach($parent as $child) {
            $levels[$current]++;
            if (is_array($child)) {
                $this->calc($levels, $current + 1, $child);
            }
        }
    }
}

// Let's use the class! Create an instance of it
$test = new Test();

// Fill the data array
$data = array();
$data['food']['soup']['chicken_noodle'] = '';
$data['food']['soup']['tomato'] = '';
$data['food']['soup']['french onion'] = '';
$data['food']['salad']['house'] = '';
$data['food']['salad']['ceasar'] = '';
$data['drink']['soda']['coke'] = '';
$data['drink']['soda']['sprite'] = '';
$data['drink']['soda']['dr pepper'] = '';
$data['drink']['alcoholic']['whiskey']['Jim Beam'] = '';
$data['drink']['alcoholic']['whiskey']['Jameson'] = '';
$data['drink']['alcoholic']['whiskey']['Bushmills'] = '';
$data['drink']['alcoholic']['vodka']['Stolichnaya'] = '';
$data['drink']['alcoholic']['vodka']['Ketel One'] = '';
$data['drink']['alcoholic']['vodka']['Grey Goose'] = '';
$data['drink']['alcoholic']['vodka']['Belvedere'] = '';
$data['drink']['alcoholic']['rum']['Captain Morgan'] = '';
$data['drink']['alcoholic']['rum']['Bacardi'] = '';    

// Count the data for arrays on each level
$count = array();
$test->calc($count, 0, $data);

// Print the results
echo '<pre>';
print_r($count);
exit ('</pre>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-17T14:07:03.243

如果要获取所有数组中所有元素的总和，可以使用

```
count($arr, COUNT_RECURSIVE); 
```

[在线尝试](https://tio.run/##nZTBSgMxEIbvfYochO1C36BWoaUUFS201qsMydSEzWbCJFvZp69bxFqlaVZzyCHzkXzzh8Rrv7@@9d18BcxiIroZ2uFAdKPYEqlCTG5OF79GEajxqeIRktrICp1w3U4Wi9F5KlINkVLVLaOTWpAz5M4w5WjwSwwsqKyZpiYkhSRCAM4cVn6WC8XGVRdiUpCPiaqkS/BsYrKqWHj0HrlPMmAlabJGZoXetQkVtjnuyN@bWkwR6oTmNwc1hrPX@AObNkHXxtpwASwTiexIVdBbfB0PeWgHLeSkHjCiFUuHOXDB2IoFUciSU7Q7VMj4jz65qXt3OQMfwTjxSPwG@fRBAivzN6fy9F2U4wFKTUJS4@Lw8LOMxGy5eXp@Xc1nm9X67mVejvf7Dw)

# xml - 在 solr 中输入任意 xml

> ID：10867718
> 
> 赞同：4
> 
> 时间：2012-06-03T03:41:46.637
> 
> 标签：xml, solr

我有一个关于 Apache Solr 的问题。如果我有一个任意 XML 文件，以及它符合的 XSD，我如何将它输入到 Solr。我可以得到一个代码示例吗？我知道您必须解析 XML 并将相关数据放入 solr 输入文档中，但我不明白该怎么做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T17:05:14.993

DataImportHandler (DIH) 允许您将传入的 XML 传递给 XSL，以及使用 DIH 转换器解析和转换 XML。您可以通过 XSL 将任意 XML 转换为 Solr 的标准输入 XML 格式，或将任意 XML 映射/转换为 DIH 配置文件中的 Solr 模式字段，或两者的组合。DIH 是灵活的。

## 示例 dih-config.xml

这是来自实际工作站点的示例 dih-config.xml（我的朋友，这里没有伪示例）。请注意，它会从 LAMP 服务器上的本地目录中获取 xml 文件。如果您更喜欢直接通过 HTTP 发布 xml 文件，则需要配置[ContentStreamDataSource](http://lucidworks.lucidimagination.com/display/solr/Uploading+Structured+Data+Store+Data+with+the+Data+Import+Handler#UploadingStructuredDataStoreDatawiththeDataImportHandler-DataSources)。

碰巧在这个示例中传入的 xml 已经是标准的 Solr 更新 xml 格式，而 XSL 所做的只是删除空字段节点，而真正的转换，例如从“ignored_seriestitle”构建“ispartof_t”的内容，“ ignore_seriesvolume" 和 "ignored_seriesissue" 是使用 DIH Regex 转换器完成的。（首先执行 XSLT，然后将其输出提供给 DIH 转换器。）属性“useSolrAddSchema”告诉 DIH xml 已经是标准 Solr xml 格式。如果不是这种情况，则需要[XPathEntityProcessor](http://lucidworks.lucidimagination.com/display/solr/Uploading+Structured+Data+Store+Data+with+the+Data+Import+Handler#UploadingStructuredDataStoreDatawiththeDataImportHandler-EntityProcessors)上的另一个属性“xpath”来从传入的 xml 文档中选择内容。

```
<dataConfig>
    <dataSource encoding="UTF-8" type="FileDataSource" />
    <document>
        <!--
            Pickupdir fetches all files matching the filename regex in the supplied directory
            and passes them to other entities which parse the file contents. 
        -->
        <entity
            name="pickupdir"
            processor="FileListEntityProcessor"
            rootEntity="false"
            dataSource="null"
            fileName="^[\w\d-]+\.xml$"
            baseDir="/var/lib/tomcat6/solr/cci/import/"
            recursive="true"
            newerThan="${dataimporter.last_index_time}"
        >

        <!--
            Pickupxmlfile parses standard Solr update XML.
            Incoming values are split into multiple tokens when given a splitBy attribute.
            Dates are transformed into valid Solr dates when given a dateTimeFormat to parse.
        -->
        <entity 
            name="xml"
            processor="XPathEntityProcessor"
            transformer="RegexTransformer,TemplateTransformer"
            datasource="pickupdir"
            stream="true"
            useSolrAddSchema="true"
            url="${pickupdir.fileAbsolutePath}"
            xsl="xslt/dih.xsl"
        >

            <field column="abstract_t" splitBy="\|" />
            <field column="coverage_t" splitBy="\|" />
            <field column="creator_t" splitBy="\|" />
            <field column="creator_facet" template="${xml.creator_t}" />
            <field column="description_t" splitBy="\|" />
            <field column="format_t" splitBy="\|" />
            <field column="identifier_t" splitBy="\|" />
            <field column="ispartof_t" sourceColName="ignored_seriestitle" regex="(.+)" replaceWith="$1" />
            <field column="ispartof_t" sourceColName="ignored_seriesvolume" regex="(.+)" replaceWith="${xml.ispartof_t}; vol. $1" />
            <field column="ispartof_t" sourceColName="ignored_seriesissue" regex="(.+)" replaceWith="${xml.ispartof_t}; no. $1" />
            <field column="ispartof_t" regex="\|" replaceWith=" " />
            <field column="language_t" splitBy="\|" />
            <field column="language_facet" template="${xml.language_t}" />
            <field column="location_display" sourceColName="ignored_class" regex="(.+)" replaceWith="$1" />
            <field column="location_display" sourceColName="ignored_location" regex="(.+)" replaceWith="${xml.location_display} $1" />
            <field column="location_display" regex="\|" replaceWith=" " />
            <field column="othertitles_display" splitBy="\|" />
            <field column="publisher_t" splitBy="\|" />
            <field column="responsibility_display" splitBy="\|" />
            <field column="source_t" splitBy="\|" />
            <field column="sourceissue_display" sourceColName="ignored_volume" regex="(.+)" replaceWith="vol. $1" />
            <field column="sourceissue_display" sourceColName="ignored_issue" regex="(.+)" replaceWith="${xml.sourceissue_display}, no. $1" />
            <field column="sourceissue_display" sourceColName="ignored_year" regex="(.+)" replaceWith="${xml.sourceissue_display} ($1)" />
            <field column="src_facet" template="${xml.src}" />
            <field column="subject_t" splitBy="\|" />
            <field column="subject_facet" template="${xml.subject_t}" />
            <field column="title_t" sourceColName="ignored_title" regex="(.+)" replaceWith="$1" />
            <field column="title_t" sourceColName="ignored_subtitle" regex="(.+)" replaceWith="${xml.title_t} : $1" />
            <field column="title_sort" template="${xml.title_t}" />
            <field column="toc_t" splitBy="\|" />
            <field column="type_t" splitBy="\|" />
            <field column="type_facet" template="${xml.type_t}" />
    </entity>
      </entity>
    </document>
</dataConfig> 
```

## 设置 DIH：

*   确保从 solrconfig.xml 引用 DIH jar，因为默认情况下它们不包含在 Solr WAR 文件中。一种简单的方法是在包含 DIH jar 的 Solr 实例目录中创建一个 lib 文件夹，因为 solrconfig.xml 默认在 lib 文件夹中查找引用。下载 Solr 包时，在 apache-solr-xxx/dist 文件夹中找到 DIH jar。

dist 文件夹： ![solr dih jars 位置](../Images/09aee3eed68609e026ea3e6c7cadc160.png)

*   在 Solr“conf”目录中创建您的 dih-config.xml（如上）。

*   将 DIH 请求处理程序添加到 solrconfig.xml（如果它不存在）。

请求处理程序：

```
<requestHandler name="/update/dih" startup="lazy" class="org.apache.solr.handler.dataimport.DataImportHandler">
<lst name="defaults">
<str name="config">dih-config.xml</str>
</lst>
</requestHandler> 
```

## 要触发 DIH：

[在Data Import Handler Commands](http://lucidworks.lucidimagination.com/display/solr/Uploading+Structured+Data+Store+Data+with+the+Data+Import+Handler#UploadingStructuredDataStoreDatawiththeDataImportHandler-DataImportHandlerCommands)的 wiki 描述中有更多关于 full-import 与 delta-import 以及是否提交、优化等的信息，但以下将触发 DIH 操作而不先删除现有索引，并且在处理完所有文件后提交更改。上面给出的示例将收集在拾取目录中找到的所有文件，转换它们，索引它们，最后，将更新/s 提交到索引（这将使它们在即时提交完成时可搜索）。

```
http://localhost:8983/solr/update/dih?command=full-import&clean=false&commit=true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T06:09:45.557

最简单的方法可能是使用[DataImportHandler](http://wiki.apache.org/solr/DataImportHandler#Usage_with_XML.2BAC8-HTTP_Datasource)，它允许您首先应用 XSL 将您的 xml 转换为 Solr 输入 xml

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-29T15:43:10.420

经过一些研究并没有发现完全自动化的东西来做你所要求的......我想我找到了一些东西。

Lux SOLR 可能是我们正在寻找的[http://luxdb.org/SETUP.html](http://luxdb.org/SETUP.html)

似乎它以某种方式采用 SOLR 并使其启用 Lux 以索引任意 XML。

# android - 在 Android 中，_id 必须存在于创建的任何表中吗？

> ID：10867724
> 
> 赞同：1
> 
> 时间：2012-06-03T03:42:54.793
> 
> 标签：android, string, sqlite, primary-key

我正在尝试创建一个只有外键而不是主键的表。我收到此错误：

```
java.lang.IllegalArgumentException: column '_id' does not exist 
```

我看了一个教程，主键必须是_id，没有解释。这很好。但是如果我不想要主键怎么办！如果我只想要一个外键怎么办。我假设这是我的问题所在。下面的模式是我所拥有的。但第三个是我认为这是来自哪里。

```
database.execSQL("CREATE TABLE events (" +
            "_id INTEGER PRIMARY KEY, event_name TEXT" +
            ")");

database.execSQL("CREATE TABLE reminders(_id INTEGER PRIMARY KEY, event_name TEXT" +
            ")");

database.execSQL("CREATE TABLE events_info (_id INTEGER, event_name TEXT, all_day INTEGER, " +
                    "start_date INTEGER, start_time INTEGER, end_date INTEGER, end_time INTEGER," +
                    " location TEXT, reminder_id INTEGER, notes TEXT, repeat TEXT," +
                    "FOREIGN KEY(_id) REFERENCES events(_id), FOREIGN KEY(reminder_id) REFERENCES reminders(_id))"
                    ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T03:45:35.627

你在用`CursorAdapter`吗？因为如果你是，`CursorAdapter`该类要求有一个名为的列`_id`，否则该类将无法工作。一般来说，让您的数据库表包含一个`_id`为此命名的列通常被认为是一种很好的做法，以防您决定将数据绑定到`CursorAdapter`它的一个或一个子类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T04:25:43.853

发现你的问题：

您的表是`events`，但您正在尝试使用`event`...引用它作为外键

```
REFERENCES event(_id) 
```

应该

```
REFERENCES events(_id) 
```

# ember.js - Ember 中的嵌套数据应该有一个 arrayController 还是多个？

> ID：10867729
> 
> 赞同：4
> 
> 时间：2012-06-03T03:44:10.367
> 
> 标签：ember.js

我正在开发一个概念验证应用程序，我有一个关于数据存储的问题。

我的应用程序有一个客户端模型

```
PM.Client = Ember.Object.extend({
    id: null,
    client: null,
    projects: {}
}); 
```

和项目模型

```
PM.Project = Ember.Object.extend({
    id: null,
    title: null,
    totalHours: null,
    cost: function(){
        return this.get('totalHours') * PM.get('rate');
    }.property('totalHours')
}); 
```

每个客户可以有多个项目，但每个项目只能有一个客户。目前我有一个包含以下数据的虚拟 JSON 文件

```
[
    {
        "id": "1",
        "client": "Fastbook",
        "projects": [
            {
                "id": "1",
                "title": "Website redesign",
                "totalHours": "45",
                "cost": "4500"
            },
            {
                "id": "2",
                "title": "Tidy up admin section",
                "totalHours": "10",
                "cost": "1000"
            }
        ]
    },
    {
        "id": "2",
        "client": "Epicenter",
        "projects": [
            {
                "id": "1",
                "title": "Chaching",
                "totalHours": "25",
                "cost": "2500"
            }
        ]
    }
] 
```

在 Ember 中存储这些数据的最佳方式是什么？我应该有一个用于客户的 arrayController 和另一个用于项目的吗？

Ember Data 可能没问题，但我不打算为此设置 REST。Ember Data 可以使用 localStorage 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:25:03.043

如果没有关于应用程序将要做什么的更多细节，很难说。

我会`ArrayController`为客户使用。我认为项目不需要有一个，因为该数据嵌套在客户端对象中。如果您有一个项目被选中的显示，您可能希望有一个用于当前选定项目的控制器。

如果您可以进一步描述您打算如何处理项目数据，我可以提供更好的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:46:52.717

[我在正在使用的 ember 提要阅读器](http://github.com/mattkatz/Wordprss)中嵌套了数据。

我使用 2 个阵列控制器。我有一组提要，每个提要都包含条目。

对于我的使用，选择一个提要应该显示它包含的条目，我有一个 feedController、一个 selectedFeedController、一个 entryController 和一个 selectedEntryController。

这允许我进行相当细粒度的控制。希望这会促使您开始，并可能弄清楚这是否不适合您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T23:01:18.923

我假设在最后的清洗中，将有一个附有项目列表的客户详细信息视图，以及一个包含所有客户活动项目的项目列表视图。

让用例决定对象模型，而不是对象模型决定用例。如果您需要上述场景，如果您只有一个客户端 ArrayController，您可能会遇到麻烦；在这种情况下，同时拥有客户端和项目 ArrayControllers 会更自然。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T03:26:15.440

我同意@David 和@ebryn。这完全取决于用例。例如，您是否总是一起使用用户和项目数据？这样就不需要单独的数组控制器，尤其是因为数据已经嵌套。

但是，如果您想明确分离关注点，那么您确实应该考虑两个单独的控制器。

同样要从本地存储中读取数据，您必须定义自己的适配器，没有内置方法。自述文件末尾的[ember 数据 github 页面](https://github.com/emberjs/data)详细说明了构建您自己的适配器的步骤。

# wmi - 如何计算每个用户每天在 Exchange 2003 上发送和接收的电子邮件

> ID：10867735
> 
> 赞同：0
> 
> 时间：2012-06-03T03:45:46.090
> 
> 标签：wmi, exchange-server

我想知道每个用户每天发送或接收多少邮件。Exchange 2010 可能更容易但我使用的是 Exchange 2003。我想有两种方法：

1.  获取每个帐户的收件箱和发件箱中有多少电子邮件。然后第二天做同样的事情并计算差异。我可以通过[WMI exchange_mailbox 类](http://msdn.microsoft.com/en-us/library/aa143732%28v=exchg.65%29.aspx "WMI exchange_mailbox 类")获取邮箱中的总项目。但它并没有分别告诉我收件箱和发件箱项目。更重要的是，一些 pop3 用户不会将电子邮件保存在服务器上。项目总数始终为 0。

2.  第二种方法是解析交换日志。但我不知道交换日志。任何脚本都可以做到这一点？

有没有更好的主意我不知道？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T22:27:23.823

这可能有点矫枉过正，但[MailArchiva](http://www.mailarchiva.com/)是一个电子邮件归档工具，它还提供了一些关于它处理的指标和统计信息。它将与大多数邮件服务器软件配合使用，包括 Exchange。他们有一个免费用于非商业用途的“开源版”，并且他们提供商业产品的免费试用。

解析您的 Exchange 日志将是一个更小、更便宜的替代方案。但是由于 StackOverflow 的大多数人可能不知道 Exchange 日志是什么样的，因此您需要在此处发布摘录，以及您在第一次尝试解析它时编写的任何代码。将其添加到您的问题中，看看它会将您带到哪里！

# ruby-on-rails - RSpec“未定义的局部变量或方法‘用户’”

> ID：10867736
> 
> 赞同：0
> 
> 时间：2012-06-03T03:46:00.700
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

我有以下用 RSpec 编写的测试：

```
describe '#create' do
  ...
  it 'redirects users to profile page' do
    response.should redirect_to user_path(user)
  end
  ...
... 
```

我的以下内容`UsersController`：

```
def create
  @user = User.new(params[:user])
  if @user.save
    redirect_to user_path(@user)
  end
end 
```

有谁知道为什么这会返回以下错误：

`NameError: undefined local variable or method 'user'`

我还尝试将其更改为`root_url`在这两种情况下，而不是，`user_path(user)`它给出了一个不同的错误说：

`Expected response to be a <:redirect>, but was <200>`

有谁知道问题可能是什么？我仔细检查了我的代码，并在网上看到了类似的问题，但未能找到解决方案。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T04:13:25.977

您可以使用 Rspec Rail 的`assigns`方法来访问控制器实例变量：

```
it 'redirects users to profile page' do
  response.should redirect_to user_path(assigns :user)
end 
```

这里`assigns :user`等价于`controller.instance_variable_get :@user`。

根据下面@Justin 的评论，他也错过了调用控制器操作的行：

```
post :create, user: attributes_for(:user) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T04:38:37.337

事实证明，它`assigns`只是创建了一个实例变量，并且没有在它上面没有另一个实例变量就不会填充`post :create`它。

因此，为了将来参考，这里是正确的代码：

```
it 'redirects to the users profile page' do
  post :create, user: attributes_for(:user)
  response.should redirect_to user_path(assigns :user)
end 
```

但是，您必须`assigns :user`按照 Mori 的建议使用才能在第二部分中创建实例变量。EG 你不能简单地做`user_path(:user)`or `user_path(@user)`。

希望这对将来的人有所帮助！

# php - 排序步骤和子步骤

> ID：10867738
> 
> 赞同：2
> 
> 时间：2012-06-03T03:46:17.407
> 
> 标签：php, mysql, recursion

我有一个应用程序需要能够从数据库中获取过程并以正确的顺序显示这些步骤。有时，步骤有子步骤，而其他时候，这些子步骤可以有自己的子步骤。我不能为每个过程编写一个单独的 html 页面，因为我们正在讨论其中的很多。我打算即时生成视图。这是我将要显示的示例：

```
1\. Step 1
  a. Step 1a
    i. Step 1ai
    ii. Step 1aii
  b. Step 1b
2\. Step 2 
```

就目前而言，我有一个 PROCEDURE 表、一个 STEP 表和一个 PROCEDURE_STEP 表来交叉引用它们。STEP 表有一个 substep_of 字段，它是父步骤 id 的外键。我仍处于可以根据需要修改数据库的阶段。

那么我的问题是，在我这样做之后：

```
mysql_query(SELECT * FROM PROCEDURE_STEP WHERE procedure_id = $id); 
```

如何对它们进行排序，以便每个子步骤按其父步骤下的顺序整齐地放置在返回数组中？我将把返回数组作为 json 编码数组发送到视图，如果这会有所不同的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T04:11:47.217

您可能想要执行以下操作：

```
SELECT s.id, s.substep_of AS parent
FROM STEP s, PROCEDURE_STEP ps
WHERE ps.step_id = s.id
AND ps.procedure_id = $id; 
```

这将为您提供一个步骤列表，每个步骤都包含一个 ID 和一个父 ID。由此，您可以递归地构建一棵树:)...

```
function get_children_of( $id, $steps ) {
    $children = array();

    foreach( $steps as $step )
        if( $step->parent == $id ) 
            $children[$step->id] = get_children_of( $step->id, $steps );

    // Make it null... so we don't have deal with empty arrays
    if( empty( $children ) ) $children = null; 

    return $children;            
}

$steps = run_crazy_mysql_query();
$tree = get_children_of( 0, $steps ); 
```

这应该会给你一棵看起来像这样的树：

```
0 => array(
    1 => null,
    2 => array(
        3 => null,
        4 => null
    )
) 
```

这应该为您提供一些可以相对轻松地生成 HTML 步骤列表的东西。

# jquery - Safari 中的 JQuery Live 验证回调问题

> ID：10867739
> 
> 赞同：1
> 
> 时间：2012-06-03T03:46:50.830
> 
> 标签：jquery, safari, jquery-validate, livevalidation

这是处理验证回调的代码：

```
 $(".submission-validate").validate({
        submitHandler: function(form) {
            form.submit();
            $('#submit').fadeOut('fast', function() {
                $('#pleasewait').fadeIn('fast');
            });   
        }
    }); 
```

它在其他浏览器上运行良好，但是当我在 Safari 中单击提交时没有任何反应。如果我删除 submitHandler，它工作正常。请帮我解决这个问题。

此外，我阅读了一些文章，其中大约 40% 的可能性是带有要上传文件的表单会挂起或卡住并且没有显示任何活动。我还读到它的解决方案是发送连接关闭标头或其他东西。请帮助我在我的表格中实现这一点。

任何和所有的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:06:59.913

只需将提交按钮的名称重命名为“提交”以外的名称。

提交按钮名称错误：

```
<input type="submit" name="submit" value="Submit" /> 
```

正确的提交按钮名称：

```
<input type="submit" name="send" value="Submit" /> 
```

# xml - 如何使用 XSLT 解决连续节点外观上的这种消除问题？

> ID：10867741
> 
> 赞同：0
> 
> 时间：2012-06-03T03:47:16.233
> 
> 标签：xml, xslt

我有这个输入文件：

```
<myroot>
    <list id="xxx">
        <node id="a">
            <section id="i">
                <item1 id="a0" method="start">
                    <somechild>a</somechild>
                </item1>
                <item1 id="a0" method="start"> <!-- this one is successive from the previous so we eliminate -->
                    <somechild>a</somechild>
                </item1>
                <item1 id="a0" method="stop"/>                
                <item1 id="a0" method="start">
                    <somechild>a</somechild>
                </item1>
            </section>  

            <section id="i">
                <item1 id="a0" method="start"> <!-- this one is successive from the previous so we eliminate -->
                    <somechild>a</somechild>
                </item1>
                <item1 id="a0" method="stop"/>  
                 <item1 id="a0" method="start">
                    <somechild>a</somechild>
                </item1>
                 <item1 id="a0" method="start"> <!-- this one is successive from the previous so we eliminate -->
                    <somechild>a</somechild>
                </item1>
            </section>                
        </node>
    </list>
</myroot> 
```

我的输出：

```
 <myroot>
        <list id="xxx">
            <node id="a">
                <section id="i">
                    <item1 id="a0" method="start">
                        <somechild>a</somechild>
                    </item1>
                    <item1 id="a0" method="stop"/>                
                </section>  

                <section id="i" />
            </node>
        </list>
    </myroot>

**While the expected output should be:**

<myroot>
    <list id="xxx">
        <node id="a">
            <section id="i">
                <item1 id="a0" method="start">
                    <somechild>a</somechild>
                </item1>
                <item1 id="a0" method="stop"/>                
                <item1 id="a0" method="start">
                    <somechild>a</somechild>
                </item1>
            </section>  

            <section id="i">
                <item1 id="a0" method="stop"/>  
                 <item1 id="a0" method="start">
                    <somechild>a</somechild>
                </item1>
            </section>                
        </node>
    </list>
</myroot> 
```

XSLT 文件：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
    <xsl:strip-space elements="*"/>
    <xsl:output indent="yes"/>

    <xsl:template match="@* | node()" name="identity">
        <xsl:copy>
            <xsl:apply-templates select="@* , node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/*/*/*">
        <xsl:copy>
            <xsl:variable name="first-in-group" as="element()*">
                <xsl:for-each-group select="*" group-by="concat(node-name(.), '|', @id,'|', @method)">
                    <xsl:for-each-group select="current-group()/*" group-by="concat(@id, '|', @method)">
                        <xsl:sequence 
              select="for $pos in 1 to count(current-group())
                      return current-group()[$pos]
                              [every $item 
                              in subsequence(current-group(), 1, $pos - 1) 
                              satisfies not(deep-equal($item, current-group()[$pos]))] "/>
                    </xsl:for-each-group>
                </xsl:for-each-group>
            </xsl:variable>
            <xsl:apply-templates select="@*"/>
            <xsl:apply-templates>
                <xsl:with-param name="first-in-group" select="$first-in-group" tunnel="yes"/>
            </xsl:apply-templates>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/*/*/*/*/*">
        <xsl:param name="first-in-group" tunnel="yes"/>
        <xsl:if test="$first-in-group intersect .">
            <xsl:call-template name="identity"/>
        </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

另一种情况：

```
<myroot>
    <list id="xxx">
        <node id="a">
            <section id="i">
                <item1 id="a0" method="start">
                    <somechild>a</somechild>
                </item1>
            </section>  

            <section id="i">               
                <item1 id="a1" method="start"> 
                    <somechild>a</somechild>
                </item1>
                <item1 id="a0" method="start"> <!-- this one is successive from the previous, because the previous node has id of 'a1', so we eliminate -->
                    <somechild>a</somechild>
                </item1>
                <item1 id="a0" method="start"> <!-- this one is successive from the previous so we eliminate -->
                    <somechild>a</somechild>
                </item1>
            </section>                
        </node>
    </list>
</myroot> 
```

预期输出：

```
<myroot>
    <list id="xxx">
        <node id="a">
            <section id="i">
                <item1 id="a0" method="start">
                    <somechild>a</somechild>
                </item1>
            </section>  

            <section id="i">               
                <item1 id="a1" method="start">
                    <somechild>a</somechild>
                </item1>
            </section>                
        </node>
    </list>
</myroot> 
```

这个想法是用相同的方法删除连续的节点。在示例中：

*   开始/开始/停止/开始/开始 --> 开始/停止/开始

XSLT 可以删除连续节点，但不适用于上述场景。

谁能指出我应该在哪里更改 xslt 以适应上述情况？非常感谢您的帮助。

干杯，约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T04:07:00.733

也许我错过了一些东西，但看起来你把它复杂化了。您应该能够匹配/剥离任何等于同名前一个元素的元素。

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*[*][deep-equal(.,preceding::*[name()=current()/name()][1])]"/>

</xsl:stylesheet> 
```

**XML 输出**（使用上面更新的 xml）

```
<myroot>
   <list id="xxx">
      <node id="a">
         <section id="i">
            <item1 id="a0" method="start">
               <somechild>a</somechild>
            </item1>
            <item1 id="a0" method="stop"/>
            <item1 id="a0" method="start">
               <somechild>a</somechild>
            </item1>
         </section>
         <section id="i">
            <item1 id="a0" method="stop"/>
            <item1 id="a0" method="start">
               <somechild>a</somechild>
            </item1>
         </section>
      </node>
   </list>
</myroot> 
```

# php - 查询字符串的htaccess问题

> ID：10867742
> 
> 赞同：3
> 
> 时间：2012-06-03T03:47:55.223
> 
> 标签：php, apache, .htaccess

有一个具有平面文件结构的现有站点，其中包含大量带有查询字符串的 URL。我的问题是我编写了一个 CMS 并设置了一个自定义错误代码页面，该页面使用如下查询字符串：

> 错误文档 404 /error.php?errorcode=404

这个问题是如果旧的损坏的 url 有一个查询字符串，这会覆盖错误文档重定向中的查询字符串。例如，如果你这样做

> www.example.com/missingpage.php - 这将起作用并毫无问题地重定向到 404。

但如果你这样做

> www.example.com/missingpage.php?anything=anything

甚至

> www.example.com/missingpage.php?

errorcode=404 查询字符串不会进入 php 页面，当错误代码不匹配时，它会抛出我设置的通用消息。问题是有大量的链接，包含各种疯狂的查询字符串，因此很难单独过滤掉它们。

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T16:48:58.970

您可以做的其他事情是使用 mod_rewrite 并附加查询字符串。我之前在其他设置上看到过这样做，因为`ErrorDocument`目标通过 URL 映射引擎放回（至少在 apache 2.4 中）。

例如：

```
ErrorDocument 404 /error-doc-404
ErrorDocument 405 /error-doc-405
ErrorDocument 500 /error-doc-500 
```

然后你有这个：

```
RewriteEngine On
RewriteRule ^error-doc-([0-9]{3})$ /error.php?errorcode=$1 [L] 
```

这样，地址栏上的 url 就不会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:51:51.013

I found another option, even though it is not 100% ideal. If you use a full url in the error document definition it will do a redirect and ignore the original url query string. For instance if you do:

> ErrorDocument /error.php?error=404

the bad url that the user used to access the page will remain in the address bar and your query string will be overwritten by whatever is in the address bar. but if you do

> ErrorDocument [http://www.google.com/error.php?error=404](http://www.google.com/error.php?error=404)

Then a redirect will occur and the original "bad" url the user used will be replaced with the error document one.

Here is the caveat that you must know. This is a soft 404 error so search engines might hate your guts.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T06:36:09.193

简单的解决方案，制作一个特定的 404.PHP 页面。我的项目中有一个包含所有这些自定义错误页面的完整目录。

# user-interface - 拥有管理界面有多重要？

> ID：10867743
> 
> 赞同：0
> 
> 时间：2012-06-03T03:48:08.443
> 
> 标签：user-interface

所以我正在开发一个 PHP 社区网站/论坛，我在想，根据它的受欢迎程度，我应该（最终）有几个版主，做一些事情，比如删除垃圾邮件帖子，禁止用户，禁止 IP，等等

这可以通过授予版主访问数据库的权限来完成，但这可能是不安全且完全错误的。

那么我是否应该将*许可*字段关联到每个用户，然后在服务器中，确定用户是否拥有超过给定许可，显示“审核选项卡”或包含他们应该拥有的所有选项或类似内容的部分？

我只是想知道这些东西在现实生活环境中是如何工作的（我不是在谈论 Facebook 或 Twitter 是如何做到这一点的，而是在谈论它在普通论坛中是如何工作的）。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T03:52:46.313

我见过的主要范例是`role`在数据库中为每个用户设置一个字段，然后`role`使用`none`,`moderator`或`admin`. 如果是`moderator`或`admin`，则解锁一些允许他们运行的受保护功能，并授予他们对管理用户界面的访问权限。

例如，您可能有一个函数来`delete users`检查请求使用该函数的[会话](http://php.net/session_start)`user`是否与具有 a`moderator`或`admin`角色的 a 相关联，或者不允许它。我想说，关键是使用需要`user`登录才能创建的会话，使用会话中的 user_id 在数据库中查找它`user`，然后`role`在执行函数之前检查它们是否具有权限。

# java - 如何在自然语言处理 GATE 中阅读段落

> ID：10867746
> 
> 赞同：1
> 
> 时间：2012-06-03T03:49:15.210
> 
> 标签：java, nlp, gate

我正在使用 GATE 工具进行自然语言处理.. 我正在使用 java 代码从句子中读取行并获取关键字.. 必须在 creole xml 中进行哪些修改才能阅读完整的段落..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:55:02.773

您可以使用

```
doc.getNamedAnnotationSets().get("Original markups") 
```

如果它没有给出任何结果，您可以使用`annotateParagraphs()`class 的方法`gate.corpora.TextualDocumentFormat`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T15:19:57.180

我不确定你是什么意思，但如果你使用 ANNIE，你可以将每个段落放在一个单独的标签中。我用了standAloneAnnie.java

> [http://gate.ac.uk/wiki/code-repository/src/sheffield/examples/StandAloneAnnie.java](http://gate.ac.uk/wiki/code-repository/src/sheffield/examples/StandAloneAnnie.java)

如果用户输入

> ```
> What is your name, ,some text sometext
> 
> Sometext sometext sometext 
> ```

结果将是

```
<paragraph>What is your name, ,some text sometext</paragraph>

<paragraph>Sometext sometext sometext</paragraph> 
```

您可以获得更多标签，例如每个单词的人、位置、句子或标记。

例如，如果用户输入

> 在吉隆坡哪里用餐。赫尔顿酒店

结果将是一个 xml 文件，其中包含

```
<paragraph>
        <Sentence>
        <Token>Where</Token>
        <Token>To</Token>
        <Token>
        <Unknown>Dine</Unknown>
        </Token>
        <Token>In</Token>
        <Lookup>
        <Location>
        <Token>Kuala</Token>
        <Token>
        <Lookup>Lumpur</Lookup>
        </Token>
        </Location>
        </Lookup>
        <Token>
        <Split>.</Split>
        </Token>
        </Sentence>

        <Sentence>
        <Organization>
        <Token>Helton</Token>
        <Token>
        <Lookup>
        <Lookup>Hotel</Lookup>
        </Lookup>
        </Token>
        </Organization>
        </Sentence>

     </paragraph> 
```

我目前正在尝试获取同义词，但无法这样做:(我希望结果包含其他选项，例如上述句子，我希望结果是 Dine -> Dinner, Food, Eat, Restaurant。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-01T18:36:22.783

这对我有用：

1.  初始化门
2.  创建门控制器（默认使用 ANNIE）
3.  创建语料库，将语料库设置为控制器，创建门文档（gateDoc），添加到语料库
4.  控制器.执行（）；
5.  以下代码

    ```
     FeatureMap features = gateDoc.getFeatures();
            String originalContent = (String)
         features.get(GateConstants.ORIGINAL_DOCUMENT_CONTENT_FEATURE_NAME);
            int length = originalContent.length();

            TextualDocumentFormat tdf = new TextualDocumentFormat();
                try {
                    tdf.annotateParagraphs(gateDoc,0, length,null);

                } catch (DocumentFormatException e) {
                    e.printStackTrace();
                }

            AnnotationSet paragraphs = gateDoc.getAnnotations().get("paragraph");

            Iterator it = paragraphs.iterator();
            Annotation currAnnot;
            SortedAnnotationList sortedParagraphs = new SortedAnnotationList();

            while (it.hasNext()) {
                currAnnot = (Annotation) it.next();
                sortedParagraphs.addSortedExclusive(currAnnot);
            } // while

            StringBuffer editableContent = new StringBuffer(originalContent);

                System.out.println("Number of Paragraphs -  "+paragraphs.size());

                for(Annotation paragraph:paragraphs){
                    long start = paragraph.getStartNode().getOffset().longValue();
                    long end = paragraph.getEndNode().getOffset().longValue();

                    String paraText=editableContent.substring((int) start, (int) end);
                    System.out.println(paraText);
                } 
    ```

# ios - ios5中的请求超时

> ID：10867747
> 
> 赞同：1
> 
> 时间：2012-06-03T03:49:36.003
> 
> 标签：ios

创建一个非常简单的使用 .net Web 服务的 iOS 5 应用程序。它确实有两种类型的 NSURLConnection 一种在其请求中的超时时间约为 20 秒，而另一种的超时时间非常大 [约为 999999999]。两个连接都工作正常并且能够得到响应。服务器端的连接数也没有限制。在 iOS 设备上测试这个简单的应用程序时，我观察到它工作正常，但有时我会收到请求超时错误。对此进行了很多谷歌搜索，但无法得到令人满意的答案，即为什么在 iOS 中正常工作的 Web 服务界面中会出现请求超时错误。.net Web 服务也不需要对请求进行任何身份验证。是否完全不可能避免“请求超时” iOS应用程序中的问题？它是由于对 Web 服务方法的过度调用而导致的吗？任何人都可以帮助澄清这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T04:07:09.777

> 对此进行了很多谷歌搜索，但无法得到令人满意的答案，即为什么在 iOS 中正常工作的 Web 服务界面中会出现请求超时错误。

根据我的经验，您的连接在超时时会给您在 iOS 中的超时错误。为什么你认为情况并非如此？

你说你的一个连接的超时时间只有 20 秒。您和您的 Web 服务之间可能会发生很多可能需要超过 20 秒的事情——尤其是在电话上的 EDGE 或 3G 无线电上。理论上，即使是 DNS 查找也可能需要这么长时间。

无论如何，我从来没有`NSURLConnection`对我感到厌烦并且无缘无故地超时。仔细检查您的网络连接和路由。如果一切顺利，也许尝试发布一些代码？

# scala - scala & mongoDB - 如何用 salat 计算记录？

> ID：10867748
> 
> 赞同：3
> 
> 时间：2012-06-03T03:49:36.877
> 
> 标签：scala, mongodb, salat

是否可以使用 salat 库发出具有多个条件的 count() 查询？

现在我只是在做类似的事情

```
def countByPoll(pollId: String, option: Int): Int = {
  dao.find(
    MongoDBObject("pollId" -> pollId, "option" -> option)
  ).size
} 
```

但我相信计数会表现得更好

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T06:19:56.317

我查看了[salat来源](https://github.com/novus/salat/blob/master/salat-core/src/test/scala/com/novus/salat/test/dao/SalatDAOSpec.scala)，比预期的要容易

```
def countByPoll(pollId: String, option: Int): Long = {
  dao.count(MongoDBObject("pollId" -> pollId, "option" -> option))
} 
```

# scala - 扩展存在类时出错

> ID：10867750
> 
> 赞同：1
> 
> 时间：2012-06-03T03:50:15.963
> 
> 标签：scala, existential-type

让我们测试简单的构造：

```
case class ListRef (list : List[_]) extends ref.WeakReference(list) 
```

它给出了错误：

```
<console>:8: error: illegal inheritance;
self-type ListRef does not conform to scala.ref.WeakReference[List[_$1]]'s selftype  scala.ref.WeakReference[List[_$1]]
   case class ListRef (list : List[_]) extends WeakReference(list) 
```

这是什么意思，如何逃脱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T07:30:19.383

我不知道该错误消息是什么意思，但转义它似乎很简单。

```
case class ListRef[A](list: List[A]) extends ref.WeakReference(list) 
```

# php - 通过 AJAX 发送 JSON，返回任何内容

> ID：10867753
> 
> 赞同：0
> 
> 时间：2012-06-03T03:51:09.993
> 
> 标签：php, jquery, json, codeigniter

两部分问题。

**如何在 AJAX 调用的控制器中获取发布数据？**

我发送的 JSON 没有标识。例如：

```
$.ajax({
    type: 'POST',
    url: action,
    data: JSON.stringify(data),
    success: function(data){
        alert(data);
    },
    dataType: 'json'
}); 
```

`data`刚刚在哪里`[{"name":"variable_name", "value":"12"}]`

我正在努力：

```
public function save()
{
    header('Content-Type: application/json');
    $json = $this->input->post('data');        
    echo $json;
} 
```

* * *

**如何返回 JSON 以外的内容？**

例如，我正在使用以下控制器进行测试：

```
public function save()
{
    echo "test";
} 
```

调用成功函数时我得到的只是`null`.

任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T04:00:59.710

您将不必设置`dataType`. 当数据类型设置为`'json'`jquery 时，会自动将接收到的数据转换为 js 对象。由于您只返回一个字符串（这不是有效的 json），因此 json 解析器不知道该做什么，只返回 null。通过删除数据类型，您可以获得原始字符串，然后根据字符串的内容使用条件来决定是否将其解析为 json。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T04:04:19.217

在 php 中获取原始 POST 数据的方式（至少是一种方式）`file_get_contents('php://input')`

这会将 JSON 作为原始字符串返回，您可以调用`json_decode`它。

# iphone - 视图控制器之间共享数据的单例或委托

> ID：10867754
> 
> 赞同：2
> 
> 时间：2012-06-03T03:51:14.037
> 
> 标签：iphone

我已经搜索了 SO，寻找在视图控制器之间共享数据的不同方法。我看到传回数据的委托是 ppl 建议的最常见方式，并且一些 ppl 使用单例来从应用程序的任何位置获取信息。我还不熟悉 Core Data，但从我目前看到的情况来看，Core Data 似乎类似于来自 ManagedObjectContext 的 Singleton，您可以访问数据。因此，只要您有对该对象的引用，您就可以访问该数据（如果这种理解有误，请随时纠正我）。

在这种情况下，我想知道是否应该使用委托或单例。我基本上有一个带有两个标签的标签栏控制器。一个选项卡使用委托或在要呈现的视图上分配属性在视图之间来回传递数据。

第二个选项卡是第一个选项卡的摘要视图。因此，在完全不同的视图堆栈上，我需要与选项卡一中相同的数据。在那种情况下，我应该使用 Singleton 以便可以从应用程序中的任何地方访问它吗？还是有更好的解决方案？

另外，我想知道如果您的应用程序即将关闭，您将如何归档数据。在我看来，如果我确实实现了单例，当我收到我的应用程序将进入后台的通知时，我可以查看我的单例并保存数据。但是如果我不使用单例，当应用程序进入后台时，我将如何保存数据。我是否将那个保存代码放在应用程序委托中。

我想最后我想了解在这种情况下哪种设计模式更适合在应用程序之间存档和共享数据。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:07:13.177

我浏览了这个关于核心数据的精彩教程：http: [//timroadley.com/2012/02/09/core-data-basics-part-1-storyboards-delegation/](http://timroadley.com/2012/02/09/core-data-basics-part-1-storyboards-delegation/)

那里使用的方法是：您的 ManagedObjectContext 第一次在您的 AppDelegate 中初始化。然后在我的根视图控制器中，我从 appdelegate 检索 ManagedObjectContext。然后在 prepareForSegue 中，将 managedObjectContext 传递给推送的视图控制器。

AppDelegate 具有 __managedObjectContext 的只读访问器属性，它负责第一次创建这个单例对象。

在每个视图控制器中，我在 viewWillAppear 上设置了 fetchedResultsController，其中包含我想要从核心数据中获取的实体。然后，当用户点击保存按钮时，我直接写入核心数据。在我的特定应用程序中，我有一个明确的“取消”按钮，因为用户可能会出错，或者意外清除可编辑的文本数据。但是您可以在每个控件更改值后立即保留更改，例如在 iOS 中的“设置”菜单中。仅仅因为我的数据的性质，我更喜欢取消/保存方法。一些研究是为了看看您是否必须重新保存整个对象，或者只能更新 coredata 中的单个字段。

如果您直接从 managedObjectContext 读取/写入，核心数据几乎可以解决您的问题。数据立即持久化，并立即更新。如果您的数据不是故意保留的，那么委托是在屏幕之间传递数据的好方法。如果您需要使用非持久数据通知一大堆您不想知道的视图控制器，请考虑将 NSNotificationCenter 与对象或字典一起使用。
[在 Objective-C 中通过 NSNotificationCenter 发送和接收消息？](https://stackoverflow.com/questions/2191594/how-to-send-and-receive-message-through-nsnotificationcenter-in-objective-c)

# c++ - 我可以将 DLL 注入 JVM 并获取 JNIEnv 吗？

> ID：10867761
> 
> 赞同：5
> 
> 时间：2012-06-03T03:53:35.563
> 
> 标签：c++, jvm, code-injection

我希望能够将 .dll 注入到正在运行的 JVM 进程中。我想知道的是，一旦我这样做了，我能否以某种方式获得 JNIEnv 实例，它允许我访问正在运行的 JVM 中的对象？我想要实现的是类似于 Java Reflection 的东西，但是在本机级别上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:28:37.490

附加 API 是您要从进程外部注入 DLL 的内容。请注意，它需要适当的操作系统权限。然后使用 JNI 调用 API 和标准 JNI API 从内部执行您需要的任何操作。

[附加来自 Oracle](http://docs.oracle.com/javase/6/docs/technotes/guides/attach/index.html)的 API 和 [附加来自 IBM的 API](http://publib.boulder.ibm.com/infocenter/java7sdk/v7r0/index.jsp?topic=/com.ibm.java.aix.70.doc/user/attachapi.html)

# wordpress - 二十个主题导航上的类别名称

> ID：10867763
> 
> 赞同：0
> 
> 时间：2012-06-03T03:54:20.057
> 
> 标签：wordpress, wordpress-theming

我是 wordpress 新手，使用的是 20 主题。我创建了类别和子类别。现在我想在导航栏而不是页面上显示这些类别名称。

任何人都可以知道如何做到这一点。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T04:04:30.527

仪表板->外观->菜单

您可以通过这种方式将页面和类别放入您自己的自定义导航中，并且非常易于使用。

如果你有兴趣，这里有一些导航菜单的[相关代码](http://codex.wordpress.org/Navigation_Menus)，这里有一些关于[菜单子面板的信息](http://codex.wordpress.org/Appearance_Menus_SubPanel)

# f# - 纸牌游戏的遗传算法（Dominion）

> ID：10867765
> 
> 赞同：5
> 
> 时间：2012-06-03T03:54:43.567
> 
> 标签：f#, artificial-intelligence, genetic-algorithm, playing-cards

我有一个运行[Dominion](http://www.riograndegames.com/games.html?id=278)的有效 F# 程序，这是一款纸牌游戏。我想使用遗传算法来确定最佳的游戏策略。但是，我对人工智能或遗传算法知之甚少。你能给我指点一些好的文学作品吗？

游戏策略包括对给定手牌的反应。在每一轮中，机器人都会得到一手牌。它可以根据已处理的内容选择玩行动牌或购买新牌。目标是用尽可能多的胜利点卡结束游戏。

硬编码的方法可能类似于：

```
def play(hand, totalDeck):
    if hand contains Smithy then use Smithy
    if hand contains enough coins for Province then buy Province
    if more than 30% of the totalDeck is Smithy, then buy coins 
```

我正在考虑根据每张卡的总套牌目标部分的向量来描述一种策略：

```
[Smithy, Province, Copper, ...]
[.3, .2, .1, ...] 
```

然后要变异一个机器人，我可以改变那个向量，看看变异的版本是否更好。适应度函数将是玩 Dominion 对抗各种其他机器人的平均得分。（一个机器人的分数取决于它与谁比赛，但希望通过与许多机器人进行多次比赛，这可以平衡。）

这有意义吗？我走在正确的道路上吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T18:54:10.207

Dominion 是一款很棒的游戏，但很难使用遗传算法进行优化，因为任何给定游戏的输入因游戏（使用的卡组）而异，最佳策略在游戏过程中会发生变化，以及最佳玩法任何给定的情况只会慢慢地出现在基因搜索中（直觉上，基于我对 GA 和游戏的非常好的理解）。

我认为，更好的 Dominion 方法要么是直接启发式（基于规则）的方法，要么是非常有趣的 Monte Carlo Search（例如，参见[http://cacm.acm.org/magazines/2012/3 /146245-the-grand-challenge-of-computer-go/fulltext](http://cacm.acm.org/magazines/2012/3/146245-the-grand-challenge-of-computer-go/fulltext)）。蒙托卡洛搜索之所以吸引人，正是因为：

*   在 Dominion 中生成随机但合法的移动序列很容易。
*   判断这样一个序列的“价值”至少是直截了当的（增加VP）
*   先验建立“最佳游戏”规则很难（这就是游戏如此出色的原因）

这是一个很好的挑战——你应该在博客上写下你的经历。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T15:27:58.770

你从哪里画出其他机器人？你让它们保持静止吗？如果是这样，受过训练的机器人本身不会变得“擅长”游戏，只会擅长利用虚拟机器人。如果不是，那么其他机器人也会进化，除非应用一些其他限制，否则胜率将不是质量的良好指标。始终意识到，在一群拥有完美技能的机器人的情况下，他们的表现将显得平庸！

你可以采取共同进化的方法：

*   突变足够大的种群中的所有机器人。
*   让他们在循环赛中反复竞争，例如 100 次
*   消除一些表现最差的机器人，
*   保持一些最好的机器人不变（*精英主义*）
*   用优秀机器人的突变和交叉来补充其他人口。

或者您可以针对固定基准进行训练：

*   使用您对游戏的了解，制作一个看起来不错的手工策略的机器人
*   或者，让人类玩家（你自己？）提供动作。这可能是您的机器人训练经验的良好来源，但除非您可以访问（专家）人类动作的大型数据库，否则它非常慢。
*   根据您的基准进行训练
*   选择表现最好的人，变异等

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T20:26:07.287

我认为除非游戏非常线性，否则向量不会真正带来好的结果。我建议采用以下基于规则的方法：

在每个回合中，您都持有一组牌，并且您想确定要打出的牌，或者在您不打出一张牌的情况下，您想抽一张新牌。你需要的是某种优先级函数，它告诉你哪张牌最好玩。这样的优先功能可以通过遗传编程来描述。你总是会打出优先级最高的牌，除非没有牌的优先级高于设定的等级（例如 0），在这种情况下你会抽一张新牌。遗传编程可用于进化该优先功能。

由于您使用的是 F#，因此使用[HeuristicLab尝试这种方法可能是个好主意](http://dev.heuristiclab.com)这是用 C# 编写的。您可以在那里将您的程序作为一个问题来实现，并让评估函数执行该游戏的模拟。为您的规则编写语法和解释器。定义一些参数，使您的优先级规则能够做出有意义的决定，例如一些通用的游戏信息，例如打出的牌数、剩余的省份等，以及一些与牌相关的信息，例如打出该牌的影响（以获胜的形式） -points）等。这些是解释器的输入变量，它将计算优先级值。具有最高优先级值的卡是您选择的卡。然后评估您的策略，例如在您创建此类问题时定义 10 个随机解决方案，并在评估中让每个解决方案与该随机机器人竞争。测量你击败每个随机机器人的数量，你赢的越高，你击败的机器人越多，适应性越好，他们赢的越多，得分越差。然后，您还可以为您的问题添加一个分析器，该分析器将使用性能最佳的解决方案更新问题的随机解决方案，因此您也可以随着时间的推移对这些解决方案进行改进。

如果你愿意，你也可以使用目标部分的想法。在这种情况下，您的编码将是 RealVector。您还可以使用 HeuristicLab 进行优化（使用进化策略、粒子群优化或遗传算法）。

# objective-c - 您可以将任何具有 i386 架构的库用于 Cocoa/Mac OSX 应用程序吗？

> ID：10867766
> 
> 赞同：0
> 
> 时间：2012-06-03T03:55:22.357
> 
> 标签：objective-c, ios, macos, cocoa, ios-simulator

我有一个与 iOS 一起使用的库，它适用于 iPhone 模拟器和设备。当我在库上运行 file 命令时，我得到：

```
libXXX.a (for architecture armv6):  current ar archive random library
libXXX.a (for architecture i386):   current ar archive random library 
```

现在我想为我的 OSX 应用程序使用相同的库。我将架构设置为 32 位 i386。但是我得到一些编译错误：

```
Undefined symbols for architecture i386:
  ".objc_class_name_RTMPClient", referenced from:
      pointer-to-literal-objc-class-name in AppDelegate.o 
```

我不确定该错误是否是因为库最初是为 iOS 开发的（标头都有我必须删除的 UIKit 引用，但似乎无关紧要，因为没有 UI 功能.. 它只是一个用于打开/连接到 RTMP 服务器的库) -- 还是链接错误？一般来说，您可以将为 iPhone 开发的 i386 架构库与 Mac 应用程序一起使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T04:11:20.827

好的，你对你的术语有点困惑。

IOS：

应用程序主要使用适用于 ARM 架构的 iOS 设备的 Foundation 和 UIKit 框架构建。i386 是模拟器，它针对一组私有 Xcode 框架构建以使其“正确”运行。静态库必须针对两者进行编译并捆绑到“通用二进制包”中，以便它们可以在两个平台上运行。

操作系统：

应用程序是在 i386 架构的 Cocoa 和 Appkit 中构建的。但是，它们*没有*链接到相同的 Xcode 框架，因此它们不能在 iOS 设备上运行，必须在 OS X 环境中执行。

要使框架“完全与设备无关”，必须为每种硬件编译一个库并将它们捆绑在一起。

所以这*是*一个链接器错误，因为您将 RTMPClient 文件作为库的一部分包含在内，但它是为错误的架构编译的，或者不是“通用的”。

# ios - 如何创建适用于 Retina 显示而不浪费常规显示空间的 CGBitmapContext？

> ID：10867767
> 
> 赞同：15
> 
> 时间：2012-06-03T03:55:25.547
> 
> 标签：ios, core-graphics, retina-display, cgbitmapcontextcreate

如果它在 UIKit 中，包括`drawRect`，是否会自动处理 Retina 显示的高清方面？那么这是否意味着`drawRect`1024 x 768 视图的当前图形上下文实际上是 2048 x 1536 像素位图上下文？

（**更新：**如果我使用当前上下文创建图像`drawRect`并打印其大小：

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGImageRef image = CGBitmapContextCreateImage(context);
NSLog(@"width of context %i", (int) CGImageGetWidth(image));
NSLog(@"height of context %i", (int) CGImageGetHeight(image)); 
```

然后在新 iPad 上，禁用状态栏，打印 2048 和 1536，iPad 2 将显示 1024 和 768）

我们实际上享受自动为我们处理的 1 点 = 4 像素的奢侈。

但是，如果我们使用`CGBitmapContextCreate`，那么那些真的是像素，而不是点？（至少如果我们为那个位图提供一个数据缓冲区，那么缓冲区的大小（字节数）显然不是为了更高分辨率，而是为了标准分辨率，即使我们`NULL`作为缓冲区传递，以便`CGBitmapContextCreate`为我们处理缓冲区，大小可能和我们传入一个数据缓冲区一样，只是标准分辨率，而不是 Retina 的分辨率）。

我们总是可以为 iPad 1 和 iPad 2 以及新 iPad 创建 2048 x 1536，但它会浪费内存、处理器和 GPU 能力，因为只有新 iPad 才需要它。

那么我们是否必须使用 a`if () { } else { }`来创建这样的位图上下文，我们实际上是如何做到的呢？并且我们所有的代码`CGContextMoveToPoint`都必须针对 Retina 显示器进行调整以使用`x * 2`和`y * 2`与非 Retina 显示器一样使用`x, y`？这对代码来说可能非常混乱。（或者也许我们可以定义一个局部变量`scaleFactor`并将其设置`[[UIScreen mainScreen] scale]`为 1 表示标准分辨率，2 表示视网膜，所以我们的`x`and`y`将永远是`x * scaleFactor`，而`y * scaleFactor`不是当我们使用 绘制时，等等）`x``y``CGContextMoveToPoint`

如果传入 0.0 的比例，似乎`UIGraphicsBeginImageContextWithOptions`可以自动为 Retina 创建一个，但如果我需要创建上下文并保留它（并使用 ivar 或 UIViewController 的属性来保存它），我认为它不能使用. 如果我不使用 释放它`UIGraphicsEndImageContext`，那么它会保留在图形上下文堆栈中，所以看来我必须`CGBitmapContextCreate`改用它。（或者我们只是让它留在堆栈的底部而不担心它？）

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-03T12:07:48.197

经过更多研究，我找到了以下解决方案：

如果您必须使用`CGBitmapContextCreate`，那么有两个步骤可以使上下文具有针对标准显示器或 Retina 显示器量身定制的尺寸和坐标系：

```
float scaleFactor = [[UIScreen mainScreen] scale];

CGSize size = CGSizeMake(768, 768);

CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

CGContextRef context = CGBitmapContextCreate(NULL, 
                           size.width * scaleFactor, size.height * scaleFactor, 
                           8, size.width * scaleFactor * 4, colorSpace, 
                           kCGImageAlphaPremultipliedFirst);

CGContextScaleCTM(context, scaleFactor, scaleFactor); 
```

该示例是创建一个 768 x 768***点***区域，在新 iPad 上，它将是 1536 x 1536***像素***。在 iPad 2 上，它是 768 x 768***像素***。

一个关键的因素是，`CGContextScaleCTM(context, scaleFactor, scaleFactor);`用于调整坐标系，让Core Graphics的任何绘图，如`CGContextMoveToPoint`等，无论是标准分辨率还是Retina分辨率，都会自动工作。

* * *

还有一点需要注意的是，这`UIGraphicsBeginImageContext(CGSizeMake(300, 300));`将在 Retina 显示屏上创建 300 x 300***像素***，而在 Retina 显示屏上`UIGraphicsBeginImageContextWithOptions(CGSizeMake(300, 300), NO, 0.0);`创建 600 x 600***像素***。这`0.0`是为了让方法调用自动为标准显示器或 Retina 显示器提供适当的尺寸。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T21:26:09.457

也试试这个：

```
- (UIImage *)maskImageWithColor:(UIColor *)color
{
    CGRect rect = CGRectMake(0, 0, self.size.width, self.size.height);
    UIGraphicsBeginImageContextWithOptions(rect.size, NO, self.scale);
    CGContextRef c = UIGraphicsGetCurrentContext();
    [self drawInRect:rect];
    CGContextSetFillColorWithColor(c, [color CGColor]);
    CGContextSetBlendMode(c, kCGBlendModeSourceAtop);
    CGContextFillRect(c, rect);
    UIImage *result = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T05:44:21.427

开始新的图像上下文后，您可以使用`UIGraphicsGetCurrentContext`. 然后，如果您想保留它并在之后重用它，只需像保留任何 CF 对象一样保留它（并记住在完成后根据[规则](http://developer.apple.com/library/ios/documentation/CoreFoundation/Conceptual/CFMemoryMgmt/)释放它）。您仍然需要调用`UIGraphicsEndImageContext`以将其从 UIKit 的上下文堆栈中弹出，但如果您保留了上下文，那么上下文将在之后继续存在，您应该能够继续使用它，直到您释放它。

稍后，如果您想再次使用上下文（并且还没有释放它），一种方法是调用`UIGraphicsPushContext`，这会将上下文推回上下文堆栈。

使用上下文的另一种方法是假设它是一个 CGBitmapContext（UIKit 文档称它为“基于位图的上下文”，但没有按名称说 CGBitmapContext）并用于`CGBitmapContextCreateImage`在绘制后从上下文中捕获新图像。

主要区别在于，如果您使用 创建了上下文`UIGraphicsCreateImageContextWithOptions`，则`UIGraphicsGetImageFromCurrentImageContext`返回一个 UIImage ，其`scale`应该与您创建上下文所使用的值匹配。（我不知道如果您弹出上下文然后将其推回，则该比例值是否会保留。）`CGBitmapContextCreateImage`返回一个CGImage，而CGImage只知道像素。

另一个区别是 UIKit 绘图 API，例如 UIBezierPath，在 UIKit 的上下文堆栈中的当前上下文上工作。因此，如果不推送上下文，则只能使用 Quartz API 来绘制上下文。

我还没有测试过上述任何内容，因此您应该先自己彻底测试，然后再用您将交付给用户的代码进行测试。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-11T14:50:33.500

只需创建缩放 0.0 的上下文即可获得主屏幕：

```
UIGraphicsBeginImageContextWithOptions(size,NO,0.0);
CGContextRef context = UIGraphicsGetCurrentContext(); 
```

没有第三步。

# javascript - for 循环与求和操作有多相似？包括的例子

> ID：10867768
> 
> 赞同：1
> 
> 时间：2012-06-03T03:56:20.663
> 
> 标签：javascript, math, for-loop, sum

我打算用这张图作为参考，所以看看它，它只是一个简单的求和方程，没有任何输入。[http://ww2.tnstate.edu/ganter/BIO311-Ch11-Eq2a.gif](http://ww2.tnstate.edu/ganter/BIO311-Ch11-Eq2a.gif)

假设我有一个简单的 javascript for 循环

```
for( i=0; i<2 ; i++) {
//do
}
else {
//etc 
```

现在，在我看来，for 循环有点类似于求和方程。

所以如果 i=0 是“初始化”，i<2 是“条件”，而 i++ 是“增量”。可以将初始化与“i = 1”进行比较，将“条件”与“I”进行比较，将“n1”与“增量”进行比较，将n *（f（x））与“do”进行比较吗？ “？

如果有的话，这两种函数类型的适当类比是什么？

***请随时将此问题迁移到适当的论坛，但我想我首先将它传递给真正的编程论坛，因为我正在谈论 for-loops。

编辑：我认为我对“初始化”和“条件”绝对是正确的，这些都很明显。但其余的......我只是不确定。也许 i++ 更像 n*/f(x)。我不知道。

EDIT2：我不知道谁的答案是“正确的”......下面的任何人都以任何方式明确错误吗？我将保持开放状态，请投票选出您认为最好的答案。如果您不能像我一样决定，请为所有这些投票和/或给出您自己的答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T04:03:11.887

不同之处在于 summation 是一个纯函数，而 for 循环几乎专门用于其副作用。当你转向纯函数形式的 for 循环时，例如列表推导式，你往往会丢失初始化器等，因为它变成了一个 foreach 循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T04:03:41.830

求和方程对一系列数字求和，for 循环重复一个动作一定次数。唯一的求和是 的增量`i`。虽然您可以使用 for 循环来实现求和，但我认为它们不在同一个研究领域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T04:06:00.620

可以说`i = 0`是初始化，并`i < 2`指定范围的终点。`i++`是求和运算假定的隐式增量。

请注意，并非所有数学符号都可以方便地转换为您给出的示例中的代码。有时，您可以在数学中将无穷大指定为范围的终点，但您不会在代码中编写类似的东西（通常，您会检查迭代之间的差异，并在差异小于阈值时停止）。有时，您甚至可以在数学中指定变量的条件（假设我们只想将索引可整除为 3 的那些相加），但您将无法在 javascript 中指定类似的内容。

如果你想编写接近数学的代码，你可以看看 Haskell。

# sql - 缩小数据库时断电，如何恢复我的数据库？

> ID：10867772
> 
> 赞同：0
> 
> 时间：2012-06-03T03:57:21.287
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2, recovery

执行收缩数据库时，断电，我现在无法访问我的数据库，它是（恢复中），我怎样才能恢复它？注意：这是一个非常大的数据库：25 GB。

**编辑：**

我在 serverfault.com 上的问题： [https ://serverfault.com/questions/395067/electricity-gone-off-while-shrinking-database-how-can-i-recover-my-database](https://serverfault.com/questions/395067/electricity-gone-off-while-shrinking-database-how-can-i-recover-my-database)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T04:22:21.687

这不会帮助您解决问题，但必须说。

1)在执行任何会改变您的数据库的操作**之前：****备份！**

2) 缩小数据库的正当理由很少。如果您发现自己需要这样做，您可能有很多没有聚集索引的表，或者聚集索引选择不当。如果你真的要缩小，那就**备份吧！**第一的

3) 25GB 大小的数据库听起来像是包含重要数据，因此它应该在生产服务器上。生产服务器机箱应具有不间断电源 (UPS)。

综上所述，我强烈建议您访问 Paul Randall 的博客。他有许多与 SQL Server 数据库恢复相关的帖子。例如

*   [灾难恢复 101：hack-attach 损坏的数据库](http://sqlskills.com/BLOGS/PAUL/post/Disaster-recovery-101-hack-attach-a-damaged-database.aspx)。

*   [使用 EMERGENCY 模式访问 RECOVERY PENDING 或 SUPECT 数据库](http://sqlskills.com/BLOGS/PAUL/post/Search-Engine-QA-4-Using-EMERGENCY-mode-to-access-a-RECOVERY-PENDING-or-SUSPECT-database.aspx)

您甚至可以考虑在您所在地区聘请专业人士。也许联系微软。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T04:28:09.080

1.  没有备份，没有恢复的机会。请注意，备份不需要是最近的，只要您拥有自上次备份以来的每个日志文件，您可以回放这些文件以到达故障时间点。
2.  我怀疑你有生产实际需要的 25Gb 数据。考虑通过将数据拆分为：
    *   “处理交易所需的数据”（例如最近 30 天的交易）
    *   “报告数据”（其他）

数据仓库使您的生产系统更小，因此更容易管理更改和备份，而且速度更快。

[尝试在http://dba.stackoverflow.com](http://dba.stackoverflow.com)上提问

# c++ - C/C++ 将 int 转换为短和内联 asm（特定于 ARM）

> ID：10867776
> 
> 赞同：9
> 
> 时间：2012-06-03T03:58:31.597
> 
> 标签：c++, c, arm, inline-assembly

这不是一个微不足道的问题。
**注意：我不需要意见或建议使用纯 asm。我实际上需要完成我正在谈论的事情：在将结果分配给短整数时，在没有这个符号/零扩展 optcode 的情况下获得内联 asm。**

我正在处理一个为许多功能滥用 16 位短裤的库，并且我正在对其进行优化。我需要使用内联 asm 添加一些优化的函数。问题是在许多地方函数的结果被分配给一个短整数。也就是说，编译器生成 uxth 或 sxth arm 操作码。

我的目标是避免这个问题，并确保不会生成这个无用的操作码。首先，我需要定义我的优化函数以返回 short int。这样，如果它被分配给一个 int 或一个短 int 就没有额外的操作码来转换结果。

问题是我不知道如何跳过编译器在我自己的函数中生成的 int->short 转换。
像这样的愚蠢演员：`*(short*)(void*)&value`不起作用。编译器要么开始弄乱堆栈制造问题，要么它仍然使用相同的 sxth 对结果进行符号扩展。

我为多个编译器编译，我能够为 arm 的 armcc 编译器解析它，但我无法用 GCC 完成它（我用 4.4.3 或 4.6.3 编译）。使用 armcc，我在内联 asm 语句中使用短类型。在 gcc 中，即使我使用短编译器仍然出于某种原因认为需要符号扩展。

这是一个我无法使用 GCC 的简单代码片段，关于如何让它工作的任何建议？对于这个简单的示例，我将使用 clz 指令：

示例文件**test.c**文件：

```
static __inline short CLZ(int n)
{
    short ret;
#ifdef __GNUC__
    __asm__("clz %0, %1" : "=r"(ret) : "r"(n));
#else
    __asm { clz ret, n; }
#endif
    return ret;
}

//test function
short test_clz(int n)
{
    return CLZ(n);
} 
```

这是我使用 armcc -c -O3 得到的预期结果：

```
test_clz:
    CLZ      r0,r0
    BX       lr 
```

这是 GCC -c -O3 给我的不可接受的结果：

```
test_clz:
    clz r0, r0
    sxth    r0, r0
    bx  lr 
```

另请注意，如果用内部变量`int ret;`而不是`short ret;`armcc 重写 CLZ，则生成与 GCC 相同的结果。

使用 gcc 或 armcc 获取 asm 输出的快速行：
`gcc -O3 -c test.c -o test.o && objdump -d test.o > test.s`
`armcc -O3 --arm --asm -c test.c`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T06:34:59.260

编译器发生变化。特别是 gcc，你今天想出的技巧明天或昨天都行不通。并且不会在编译器（armcc、clang 等）中始终如一地工作。

1）删除短裤并用整数替换并结束它，这是一种选择，它是最不痛苦的解决方案。

2）如果你想要特定的asm，写特定的asm，不要乱来。也是一种选择。

虽然很可能编写出始终比其他代码编译得更好的代码，但您不能始终准确地获得所需的代码序列，而且不一致。从长远来看，您正在伤害自己，即使是编写自己的 asm 解决方案。您实际上正在寻找的解决方案是通过代码并用整数替换短裤，这将生成始终编译的代码比在那里有短裤更好。随着编译器的变化，它将花费更少的时间，并且不必每隔几个月就重写一次。

要彻底控制这一点，需要编译为 asm 或反汇编并删除有问题的指令，将函数留在 asm 中。快速轻松地完成任务，会给你想要的去除这个开销，只是留下一些不太可维护的东西。实际上，既然你有 armcc 做你想要在 armcc 中编译为 asm 的事情，那么就为 gnu 汇编程序习惯的愚蠢性对其进行修补，并将其用作一种解决方案（至少可以编写在 arm 工具和 gnu 下组装的 asm在手臂广告时代，在我失去对工具的访问权之前没有太多的 rvct 时间）。

有很多方法可以获取您提供的确切示例以给出您所追求的确切结果，但我严重怀疑这就是您所追求的，您会编写两行 asm 并完成。我的猜测是你试图在一个函数中内联一些东西（比 CLZ 大），同时仍然把它称为一个简短的，当调用它时，一个 int 会给你你想要的东西，而不需要内联 asm。（我仍然看不到内联 asm 与更改变量声明相比，无论是在哪里实现和测试都需要更少的时间，更少的输入，相同数量的代码来读取和测试）。

所以这是你的现实：

1) 穿着短裤及其副作用

2）将它们更改为整数

花几天、几周或几个月来做某事并不是什么大不了的事。*大多数情况下，避免*做某事需要几天、几周、几个月的时间。然后无论如何你都必须这样做，所以现在你有 2xdays、2xweeks、2xmonths ......无论什么解决方案，你都必须或应该测试它，你正在更改代码，所以这不是一个变化因素决定。使用内联汇编攻击编译器是您的最高风险，并且如果测试确实在时间等式中发生变化，则应该导致最多的测试。需要一些 gcc 版本，并且每 6 个月重新测试一次。

通常，asm 解决方案是在 abi 更改时，可能在重新测试之间间隔 10 年，而当我们从 64 位到 128 位时，修复 C 可能需要 20 年。但是 32 到 64 位的转换仍在进行中，我们还没有开始 ARM 32 到 64 位的转换/混合（不会放弃所有 64 位的 32 位 ARM 处理器，两者都将保留）。后端会一团糟，我现在不会和他们玩游戏。制作干净、可移植的 C 语言，您不依赖代码中 int 的大小（假设/要求最少 32，但确保它是 64 位干净的）是您最便宜的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T07:01:42.663

如果你追求的是速度，而不是代码大小，你可以试试这个：

```
static __inline short CLZ(int n)
{
    short ret;
#ifdef __GNUC__
    __asm__("clz %0, %1\n"
            "bx lr"
            : "=r"(ret) : "r"(n));
#else
    __asm { clz ret, n; }
#endif
    return ret;
} 
```

**更新添加：**在我看来，gcc 编译器在这里做的是正确的事情。在`C`（相对于`C++`）中，没有返回 a 的函数之类的东西`short`——它总是自动转换为`int`. 所以你别无选择，只能愚弄编译器。如果您只是将文件名更改为 会发生什么`test.cpp`？

# java - 如何为jsp页面配置cron作业？

> ID：10867779
> 
> 赞同：0
> 
> 时间：2012-06-03T03:59:32.417
> 
> 标签：java, jsp, cron, crontab, crontrigger

我需要每 30 分钟后执行一个 jsp 页面。我正在使用 glassfish 服务器。我想为此使用 cron 作业，但我以前从未使用过 cron 作业。

请给我任何链接或示例，我可以从中了解如何为 jsp 页面配置 cron 作业并在特定时间段后执行它？

在此先感谢， 埃纳穆尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T04:47:52.963

如果您只是想让网络服务器“执行”一个 JSP 页面，则需要向网络服务器发送一个合适的 HTTP 请求。最简单的方法是使用命令行工具，如`wget`or `curl`（或 Windoze 替代品）。一旦你能成功地做到这一点，把它变成`cron`工作就是一件简单的事情。

参考：

*   您的网络服务器/网络应用程序的文档，以了解要使用的 URL、要使用的 HTTP 方法类型、要发送的参数等。
*   `wget(1)`关于或`curl(1)`如何使用这些命令的手动条目。
*   `crontab(1)`用于并`crontab(5)`了解如何创建 cron 作业的手动条目。

尝试在 Java 中执行此操作很可能会使任务变得比它需要的更复杂。

# sql - 将多个 SQL 行选择为一行

> ID：10867780
> 
> 赞同：5
> 
> 时间：2012-06-03T04:00:21.817
> 
> 标签：sql, sql-server, sql-server-2008

> **可能重复：**
> [将多行连接成一个文本字符串？](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)

假设我有一个名为`tblContractMail`. 带有数据的示例表如下：

![在此处输入图像描述](../Images/b4ef58f48a4b1edf66c221f2752000e5.png)

我需要编写一个产生以下输出的 SQL 查询：

> 'abc@akij.net;efg@akij.net;hjk@akij.net'

我知道两种可能性：

```
DECLARE @str varchar(4000)
SELECT @str = COALESCE(@str + ';', '') + strContract FROM tblContractMail 
SELECT @str 
```

和：

```
DECLARE @str varchar(4000)
SET @str = (SELECT strContract + ';' FROM tblContractMail FOR XML PATH(''))
SET @str = SUBSTRING(@str, 1, LEN(@str)-1)
SELECT @str 
```

有什么方法可以在单个查询中获得此输出（我的意思是不声明任何变量）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T04:15:58.603

第一种方法依赖于变量，所以第一种方法的答案是*否定*的。

但是你可以很容易地使用没有变量的第二种方法，只需要稍微修改一下：

```
SELECT 
  SUBSTRING(
    (SELECT ';' + strContract FROM tblContractMail FOR XML PATH('')),
    2,
    2147483647
  ) 
```

如您所见，分隔符位于项目*之前*。结果，您从第二个字符开始剪切字符串，省略前导分号。长度说明符不必精确地是长度减一，您可以指定任何相当大的数字，并且该函数将返回从第二个字符到结尾的所有内容。在这种情况下，`int`已指定最大值。

# regex - 使用正则表达式删除标签

> ID：10867787
> 
> 赞同：-6
> 
> 时间：2012-06-03T04:01:45.160
> 
> 标签：regex

> **可能重复：**
> [正则表达式匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

如何用空格替换 < > 和标签本身之间的所有内容？

例子：

```
<span class="bold">asdfsdfsda<br />sadfsdfsdf</span> 
```

输出：

```
 asdfsdfsda sadfsdfsdf 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T04:05:56.930

不要使用正则表达式解析 HTML。如果这是在一次受控的情况下，那么这样做：

这里是红宝石。根据您的工具更改它。

```
myline = '<span class="bold">asdfsdfsda<br />sadfsdfsdf</span>'
myline.gsub(/<[^<]*>/," ") 
```

# javascript - 动画 gif 在 Chrome 和 Firefox 中只循环一次

> ID：10867789
> 
> 赞同：32
> 
> 时间：2012-06-03T04:02:37.533
> 
> 标签：javascript, html, firefox, google-chrome, animated-gif

我有一个动画 gif，我想在页面加载时显示它。当我在浏览器之外查看图像时，图像会无限循环并且工作得很好，但是每当我在浏览器中显示图像时，动画只会循环一次。有没有人有任何使图像无限循环的建议？

目前我这样做只是为了使图像出现，这确实使它出现，但只循环一次：

```
document.getElementById('ajaxloader').innerHTML = 
    '<img src="images/ajax-loader.gif" title="Loading, please wait..">'; 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2016-06-28T17:41:01.140

我前段时间写的**GIF**编码器/解码器类也面临同样的问题（并且不时改进）。我昨天才找到解决方案。**GIF**完全没问题，问题出在现代互联网浏览器方面。受影响的浏览器是 Opera、IE 和 Chrome（未测试其他浏览器）。

经过对此事的一些调查（通过比较循环和非循环图像），我发现这些浏览器的**GIF**解码器忽略了**GIF**文件中的循环参数。相反，它们依赖于**GIF**文件第一帧中未记录的应用程序扩展。

所以解决方案是在第一帧图像数据之前添加这个扩展命令。添加这个块：

```
0x21,0xFF,0x0B,"NETSCAPE","2.0",0x03,0x01,0x00,0x00,0x00 
```

这将迫使浏览器无休止地循环。

这是一个例子：

[![循环](../Images/d75eb32f4e61883246576185cb3e0d91.png)](https://i.stack.imgur.com/mDdns.gif)

十六进制视图，以便您查看它是如何添加的：

[![十六进制](../Images/2ef54e1f79954eee90deb1ba505c3de3.png)](https://i.stack.imgur.com/XpyeT.png)

**GIF**对插入/重新排序非图像数据块不敏感，因此您可以将其插入到任何其他扩展之间的任何位置的第一张图像之前。我把它直接放在标题+调色板之后。这可以用**C++**或任何其他语言来完成（不需要重新编码）。有关更多信息，请参阅：

*   [如何在 GIF 图像中找到图像块从哪里开始？](https://stackoverflow.com/a/32369298/2521214)
*   [解码 GIF87a 光栅数据流的数据字节](https://stackoverflow.com/a/29924219/2521214)

* * *

**[里德邓克尔编辑]**

您也可以使用十六进制编辑器手动完成。我在 macOS Sierra 上使用了“Hex Fiend”。

`21 F9`在十六进制的开头部分搜索（这是标题）。在上面的照片中，它是`21 F9 04 04 00 00 00 00`。您的可能略有不同，但请注意它出现在 之前`2C`，它标志着图像块的开始。

在`21 F9`... 部分之前，**插入**以下十六进制，在上图中标记为“应用程序扩展”：

```
21 FF 0B 4E 45 54 53 43 41 50 45 32 2E 30 03 01 00 00 00 
```

保存并测试它。

Spektre 的插件：当心：`21 F9`标记 gfx 扩展块是可选的，因此它可能不会出现在所有或任何帧中（但现在这真的很少见）。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-04-06T11:15:16.110

您可以使用[gifsicle 命令行工具](https://www.lcdf.org/gifsicle/)来处理动画 gif 并添加与所有浏览器兼容的正确循环：

`Animation options: -l, --loopcount[=N] Set loop extension to N (default forever).`

所以在终端我做：

`$ gifsicle --loopcount problem.gif > fixed.gif`

它生成了一个新的动画 GIF，可以在 Chrome 和 Firefox 以及 Safari 中运行。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-07-30T19:25:51.523

使用 ImageMagick，通常预装：

```
convert -loop 0 bad.gif good.gif 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-10T23:07:30.947

似乎[Gimp](https://www.gimp.org/)将允许您导出可以正确循环的 gif。只需打开 gif，然后“文件”>“导出为”并选中“作为动画”和“永远循环”复选框。我不知道这是否会像[Spektre 的回答](https://stackoverflow.com/a/38082881/3281032)那样更新文件，但我的测试图像在 FireFox 60.0b8（64 位）、Chrome 版本 65.0.3325.181（官方构建）（64 位）和 Safari 版本 9.1 中正确循环.1 (11601.6.17)。[![永远的gimp循环](../Images/cd613f3a1205bd1bf3257e9d73c9d365.png)](https://i.stack.imgur.com/eFbr6.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-21T08:59:02.263

您可以声明有限数量的循环，也可以让电影永远循环。只要页面在屏幕上，INFINITE（或 -1）就会一遍又一遍地循环播放电影。例如，此代码生成连续循环的电影：

```
<img 
  src="../graphics/moonflag.mpg" 
  dynsrc="../graphics/moonflag.mpg"
  loop=infinite
  alt="Astronauts on the moon"> 
```

[资源](http://www.htmlcodetutorial.com/images/_IMG_LOOP.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-12T20:39:08.430

根据 Spektre 的回答编写了 PHP gif 修复程序：

```
/**
 * gif image loop fixer, prints image full url
 * 
 * as this is written as a part of framework, there are some config options
 */

// put your images absolute path here eg '/var/www/html/www.example.com/images/'
// or use autodetection below
$GLOBALS['config']['upload_path'] = str_replace("\\", "/", trim(getcwd(), " /\\")).'/images/';

// put your images relative/absolute url here, eg 'http://www.example.com/images/';
$GLOBALS['config']['upload_url'] = '/images/';

function _ig($image){

    $image_a = pathinfo($image);

    $new_filename = $GLOBALS['config']['upload_path'].$image_a['dirname'].'/_'.$image_a['filename'].'.'.$image_a['extension'];
    $new_url = $GLOBALS['config']['upload_url'].$image_a['dirname'].'/_'.$image_a['filename'].'.'.$image_a['extension'];

    if ($image_a['extension'] == 'gif'){

        if (!file_exists($new_filename)){

            // load file contents
            $data = file_get_contents($GLOBALS['config']['upload_path'].$image);

            if (!strstr($data, 'NETSCAPE2.0')){

                // gif colours byte
                $colours_byte = $data[10];

                // extract binary string
                $bin = decbin(ord($colours_byte));
                $bin = str_pad($bin, 8, 0, STR_PAD_LEFT);

                // calculate colour table length
                if ($bin[0] == 0){
                    $colours_length = 0;
                } else {
                    $colours_length = 3 * pow(2, (bindec(substr($bin, 1, 3)) + 1)); 
                }

                // put netscape string after 13 + colours table length
                $start = substr($data, 0, 13 + $colours_length);
                $end = substr($data, 13 + $colours_length);

                file_put_contents($new_filename, $start . chr(0x21) . chr(0xFF) . chr(0x0B) . 'NETSCAPE2.0' . chr(0x03) . chr(0x01) . chr(0x00) . chr(0x00) . chr(0x00) . $end);

            } else {

                file_put_contents($new_filename, $data);

            }

        }

        print($new_url);

    } else {

        print($GLOBALS['config']['upload_url'].$image);

    }

} 
```

这会将 image.gif 的副本复制为 _image.gif，并在颜色表之后插入所需的字符串并打印出新的 src url。（首先检查图像是否已经修复。）

用法：

```
<img src="<?php _ig($image); ?>"> 
```

或者

```
<img src="<?php _ig('image.gif'); ?>"> 
```

免责声明：不承担任何责任，我知道这可以优化:)

# php - 如何使用 AJAX 将信息发送到 PHP 脚本？

> ID：10867796
> 
> 赞同：0
> 
> 时间：2012-06-03T04:03:42.497
> 
> 标签：php, javascript, ajax, post, get

我无法让我的简单 ajax 脚本运行。代码应该很简单。ajax脚本是：

```
<html>

<head><title>Testing ajax</title>

    <script type="text/javascript">

        function ajax() {

            var xmlhttp;

            var fname=document.getElementById("fname").value;

            if(window.XMLHttpRequest) {
                xmlhttp=new XMLHttpRequest();
            } else {
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }

            xmlhttp.onreadystatechange=function() {

                if (xmlhttp.readyState==4 && xmlhttp.status==200) {

                    document.getElementById("output").innerHTML=xmlhttp.responseText;

                }

            }

            xmlhttp.open("GET","ajax.php?fname="+fname,true);
            xmlhttp.send();

        }

    </script>

</head>

<body>

    <form>

        <input type="text" id="fname">

        <input type="text" id="lname">

        <input type="submit" id="submit" onclick="ajax()">

    </form>

    <div id="output"></div>

</body> 
```

php脚本是：

```
<?php

$fname=$_GET['fname'];

echo "<p>Hello ".$fname."</p>";

?> 
```

我也试过：

```
xmlhttp.open("POST","ajax.php",true);
xmlhttp.setRequestHeader("Content-type","application/pass-data");
xmlhttp.send("fname="+fname); 
```

我无法获得既不发布也不获得发送数据的方法。我没有看到简单的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T04:47:40.343

它不起作用的原因是您在`<form>`标签内有输入。删除表单标签后，当我尝试将`<input type="submit" />`控件更改为您的代码时

```
<input type="button" onClick="ajax()" value="Submit" /> 
```

它就像一个魅力。我怀疑由于提交时的某些好处、安全问题等，表单行为的处理方式有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T04:44:58.870

将输入类型从提交更改为按钮

输入类型="按钮" onclick=...

因为当您单击按钮时，如果 type="submit"，它将立即提交页面。

# asp.net - 将简单的 htaccess 转换为 web.config

> ID：10867798
> 
> 赞同：0
> 
> 时间：2012-06-03T04:03:46.620
> 
> 标签：asp.net, .htaccess, iis-7, web-config

我有 htaccess，我想在 web.config 中编写相同的功能，但对此一无所知，请帮忙。以下是我的 htaccess 代码：

`<IfModule mod_rewrite.c> RewriteEngine on RewriteRule ^$ app/webroot/ [L] RewriteRule (.*) app/webroot/$1 [L] </IfModule>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T06:46:19.280

从您的标签中，我假设您使用的是 IIS7 URL 重写模块？如果是这样，那么：

```
<system.webServer>
    <rewrite>
        <rules>
            <rule name="all">
                <match url=".*"/>
                <action type="Redirect" url="app/webroot/{R:0}" redirectType="Permanent"/>
            </rule>
        </rules>
    </rewrite>
</system.webServer> 
```

# wireshark - 监控/记录 TCP 流的工具

> ID：10867800
> 
> 赞同：0
> 
> 时间：2012-06-03T04:04:24.193
> 
> 标签：wireshark, tcpdump

我正在尝试分析来自应用程序的 JSON-RPC 流量以了解未记录的协议。到目前为止，我一直在使用 Wireshark 的“跟随 TCP 流”功能，但其中涉及很多点击。

我可以使用 tcpdump 或 tshark 来完成类似的事情吗？

我只需要从/到特定主机的所有 TCP 流数据转储到标准输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:43:55.023

您正在寻找的是[Bro](http://www.bro-ids.org)的[内容](https://stackoverflow.com/a/7125544/1170277)脚本，用于记录 TCP 流的有效负载。只需按如下方式调用 Bro：

```
bro -r trace.pcap contents 
```

它将以以下形式创建文件

```
contents.<sourceIP>.<sourcePORT>-<destinationIP>.<destinationPORT> 
```

每个流量。Bro 提供的是经过全面测试的 TCP 重组器，这使其成为有效负载检查和更高级别协议分析的理想工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T05:49:45.497

让我做我正在寻找的工具是“ngrep”，我做了：

```
sudo ngrep -Wbyline '' dst host <ip-address> or src host <ip-address> 
```

# eclipse - perl 项目不运行 eclipse

> ID：10867803
> 
> 赞同：2
> 
> 时间：2012-06-03T04:05:44.903
> 
> 标签：eclipse, epic, ubuntu-12.04

我正在使用 Ubuntu 12.04。我已经在我的 Eclipse 上安装了史诗作为插件（最新的 0.6 版本）。

现在安装似乎没问题。但是，每当我尝试使用顶部的运行按钮运行项目时，它都不会运行。相反，我收到一条消息，说“无法启动选择”。

我在 Windows 中做了同样的事情，项目运行良好，没有任何问题。

此外，我无法在我的 Ubuntu Eclipse 中看到任何语法突出显示。我已经在 Perl 的角度。

可能出了什么问题。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:07:39.703

关于运行按钮：
1、尝试不带运行按钮运行脚本，而是选择脚本，右键，运行方式，本地运行。
2.尝试设置您的“运行配置”。单击绿色运行箭头右侧的向下箭头。选择“运行配置”。选择“Perl Local”，然后右键单击以显示“New”。
在“主要”选项卡下设置您的项目和相对脚本位置。
在其他选项卡下填写任何参数、参数等。
保存然后点击绿色按钮进行测试。

# ios - 如何以通用方式设置多关系属性

> ID：10867804
> 
> 赞同：0
> 
> 时间：2012-06-03T04:05:52.480
> 
> 标签：ios, core-data

我知道我可以做到：

```
[managedObject setValue:val forKey:@"key"]; 
```

但是如何将对象添加到多关系 nsorderedset 中？我有一种感觉，我不能只是：

```
NSOrderedSet * set = [managedObject objectForKey:@"therelationship"];
[set addObject:relationshipObj];
[managedObject setValue:set forKey:@"therelationship"]; 
```

或者我可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:26:20.123

我建议在您的 NSManagedObject 子类上实现这样的便捷方法：

```
- (NSMutableOrderedSet *)mutableAuthors;
{
    return [self mutableOrderedSetValueForKey:@"authors"];
} 
```

这让你打电话

```
NSMutableOrderedSet *authors = [mo mutableAuthors];
[authors insertObject:a atIndex:4]; 
```

或者干脆

```
[mo.mutableAuthors insertObject:a atIndex:4] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T05:18:15.690

你可以，但是从 ios4.0 开始，他们一直试图远离使用 KVO 在 NSManagedObjects 上设置值。Apple 希望你创建一个 NSManagedObject 子类。你的实现会变成这样。

```
[[MyManagedObject theRelationshipSet] addObject:newRelationshipObject]; 
```

查看 wwdc 2010 视频集中的“mastering coredata”。

# asp.net-mvc-3 - 如何区分 MVC 3 中 api 控制器中的方法

> ID：10867806
> 
> 赞同：0
> 
> 时间：2012-06-03T04:05:57.883
> 
> 标签：asp.net-mvc-3, asp.net-web-api

我有一个 WebApiController 如下：

```
public newController:webapicontroller
{
    public void method1()
    public void method2()
} 
```

当我调用 URL 时：

> “http://host:port/api/newcontroller/1/2”

来自控制器，它将命中哪个方法（方法 1 或方法 2）？如何编写一个只需要 2 个参数的方法？

如果我在方法名称前面加上 GET 和 POST 作为 GETmethod1 有什么意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T05:20:00.393

是的，据我了解，以http动词（如GetX）开头并且参数数量与URL中参数数量相同的方法被拾取。

# mysql - 保存 SSN 以进行背景调查

> ID：10867808
> 
> 赞同：2
> 
> 时间：2012-06-03T04:06:26.337
> 
> 标签：mysql, database, security, encryption

保存 SSN（社会安全号码）以进行背景调查的最佳流程是什么？我们的背景调查提供者需要他们，但他们并没有让我们自动发送文件的好方法。这方面的行业标准是什么？

# rtsp - 使用vlcj在java中缓冲rtsp网络流

> ID：10867816
> 
> 赞同：1
> 
> 时间：2012-06-03T04:09:16.810
> 
> 标签：rtsp, networkstream, vlcj

请帮助我在 java.i 中缓冲 rtsp 网络流。我正在使用 vlcj 流式传输和捕获流。

# java - 为应用程序监控开发仪表板的建议。类似于 Nagios 的东西

> ID：10867817
> 
> 赞同：2
> 
> 时间：2012-06-03T04:09:27.710
> 
> 标签：java, architecture, monitoring, dashboard

我的新任务是创建一个仪表板来监控应用程序的运行状况。我需要开发一个类似于**Nagios**的仪表板。几个问题可以帮助我开始使用它。

1.  为了监控应用程序，我应该考虑在仪表板上显示哪些指标？
2.  是否有任何框架可以读取应用程序日志并提供必要的指标数据？
3.  除了应用程序日志之外，还有其他来源可以提供与应用程序运行状况相关的数据吗？

我正在开发一个 J2EE 应用程序，它在 flex 中有 UI，后端是 SQL Server 数据库，应用程序服务器是 Tomcat/JBoss。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T04:30:57.283

我只有两个字：**使用[NAGIOS](http://www.nagios.org)**

### 编辑：

Nagios 最多可免费用于 7 个节点。这是[Nagios 定价页面](http://www.nagios.com/products/nagiosxi/pricing)的片段：

> **小型环境的免费许可证**
> 
> 有一个需要监控的小环境？Nagios XI 将监控多达七 (7) 个主机/节点，并提供无限制的免费服务！只需在 XI 管理界面中选择免费许可证。非常适合 SOHO 和个人使用。使用免费许可证时不包括支持服务

# eclipse - Arduino IDE 的键盘短路？

> ID：10867821
> 
> 赞同：1
> 
> 时间：2012-06-03T04:10:13.567
> 
> 标签：eclipse, arduino

我刚刚开始使用 arduino，并且想知道键盘快捷键可以让我在这个新环境中更有效率。另外，我已经适应了日食。有没有办法让 Eclipse 快捷方式在 Arduino IDE 上工作？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T06:23:49.930

我不知道 Arduino IDE 上的快捷方式，但可以将 Eclipse 与 Arduino 一起使用。

请参阅以下文章：

*   [http://arduino.cc/playground/Code/Eclipse](http://arduino.cc/playground/Code/Eclipse)

*   [http://www.baeyens.it/eclipse/](http://www.baeyens.it/eclipse/)

# ruby-on-rails-3 - 使用 javascript 用 gmaps4rails 替换标记

> ID：10867823
> 
> 赞同：0
> 
> 时间：2012-06-03T04:10:25.937
> 
> 标签：ruby-on-rails-3, gmaps4rails

我在这里按照这个例子

[使用 gmaps4rails 动态加载谷歌地图标记](https://stackoverflow.com/questions/5046987/dynamically-load-google-maps-markers-with-gmaps4rails)

我正在尝试使用 .js 请求而不是 .json ，因此我可以在同一个控制器请求中呈现一些其他信息。使用 .json 方法效果很好，但是一旦我切换到 .js，它就不起作用了。正在发送的数据仍然通过 .to_gmaps4rails 方法将其转换为 JSON 数据。

响应 .json 请求时，console.log 显示响应数据解释为标记对象，但响应 .js 请求时它只是字符串数据。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T07:05:11.973

你应该简单地使用：

```
JSON.parse(string) 
```

由于 .js 的结果不会自动转换为对象。

# c# - Javascript没有从隐藏的文本框中读取值 - JQuery C#

> ID：10867827
> 
> 赞同：2
> 
> 时间：2012-06-03T04:12:00.647
> 
> 标签：c#, javascript, jquery, asp.net

我不是 JavaScript / JQuery 方面的专家，我无法弄清楚为什么我的脚本不起作用。当我的 C# 页面加载时，我有一个隐藏的文本框 txtHiddenKeywordArray，它会动态填充逗号分隔的值，例如... horse、buggy、track

我正在尝试使用 jquery.highlight-3.js 中的突出显示功能，其中我有一个标签文本字段，该字段将包含并突出显示关键字列表中的单词。我正在使用脚本

```
<script language="javascript" type="text/javascript">
    var myString = document.getElementById('<%=txtHiddenKeywordArray.ClientID%>').val()
    myArray = myString.split(" ");
    $(document).ready(function () {
        for (i = 0; i < myArray.length; i++)
            $("p").highlight(myArray[i])
    });
</script> 
```

这是文本框声明：

```
<asp:TextBox ID="txtHiddenKeywordArray" ClientIDMode="Static" runat="server" Visible="false"></asp:TextBox> 
```

当我硬编码 var myString 的值时，它工作得很好。我已经尝试对其进行研究，并不断看到我所做的相同示例。该页面确实使用了 MasterPage。这会影响它吗？

知道如何让脚本查看文本框中的值吗？我需要 RegisterStartUpScript 或其他什么吗？感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T04:16:55.650

放

```
style="display:none;" 
```

而不是使用

```
Visible="false" 
```

为您的文本框。

如果将 TextBox 设置为 visible=false。然后，文本框将不会在 html 中呈现。所以，将无法访问。

例如。：

```
<asp:TextBox ID="txtHiddenKeywordArray" ClientIDMode="Static" runat="server" style="display:none;"></asp:TextBox> 
```

JS代码：

```
<script language="javascript" type="text/javascript">      
$(document).ready(function () {
 var myString = $('#<%=txtHiddenKeywordArray.ClientID%>').val();
    myArray = myString.split(" ");  
    for (i = 0; i < myArray.length; i++)
        $("p").highlight(myArray[i])
});

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:52:22.163

您是否尝试过将文本框更改为隐藏字段（因为这就是您想要做的）。

```
<asp:HiddenField runat="server" ID="txtHiddenKeywordArray" Value="horse, track" /> 
```

和js：

```
$(document).ready(function () {
    alert($("input[id$='txtHiddenKeywordArray']").val());
}); 
```

工作得很好:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T04:16:32.137

```
var myString = document.getElementById('<%=txtHiddenKeywordArray.ClientID%>').val() 
```

应该

```
var myString = $('#<%=txtHiddenKeywordArray.ClientID%>').val(); 
```

因为`.val()`适用于 jQuery 对象。

你也可以试试

```
var myString = document.getElementById('<%=txtHiddenKeywordArray.ClientID%>').value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T04:17:59.647

尝试使用

```
var myString = $('#<%=txtHiddenKeywordArray.ClientID%>').val(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T13:28:11.780

您不需要将原始 asp.net 控制标记传递给您的选择器。只是`id`应该工作的名称。这应该有效。

普通的旧 Javascript 应该是

```
var myString = document.getElementById('txtHiddenKeywordArray').value; 
```

jQuery应该是

```
var myString = $('#txtHiddenKeywordArray').val(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-03T04:33:28.227

@Kapil 和 @thecodeparadox 的建议是必要的。您还需要在*$document.ready(...)*中移动前两行 javascript ：

```
<script language="javascript" type="text/javascript">
$(document).ready(function () {
    var myString = $('#<%=txtHiddenKeywordArray.ClientID%>').val();
    myArray = myString.split(" ");
    for (i = 0; i < myArray.length; i++)
        $("p").highlight(myArray[i])
});

</script> 
```

# c# - 修复了我使用 for 循环恢复许多 SQL Server 数据库时卡住的问题

> ID：10867829
> 
> 赞同：0
> 
> 时间：2012-06-03T04:12:20.833
> 
> 标签：c#, database-restore

我需要在 TreeView 中遍历所有数据库，然后选择 TreeNode 作为要恢复的数据库名称。如果我只选择 1、2 或 3 个数据库来恢复，我的代码可以正常工作。但是，如果我选择许多数据库，它将被挂起。

请检查我的代码并帮助我..

```
 foreach (TreeNode tn in trvList.Nodes)
            {
                if (tn.Checked == true)
                { 
                        strFileName = GetFileTorestor(strRealdb);//Check File Directory to restore example : C:data\tn.text.
                        if (strFileName != "")
                        {
                            RestoreDatabase(res, tn);
                        }
                        else
                        {
                            strErorLog += "\r\n -" + tn.Text;
                            blIsEror = true;
                            MessageBox.Show("Database " + tn.Text + " has not found!", "Information", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
                        }                                 
                }
            }       

    /// <summary>
    /// Restore database according to treenode selected.
    /// </summary>
    /// <param name="res"></param>
    /// <param name="tn"></param>
    private void RestoreDatabase(Restore res,TreeNode tn)
    {
        res.Database = tn.Text;
        res.Action = RestoreActionType.Database;
        res.Devices.AddDevice(strFileName, DeviceType.File);
        res.ReplaceDatabase = true;
        this.pgrRestore.Value = 0;
        this.pgrRestore.Maximum = 100;
        //res.Complete += new ServerMessageEventHandler(sqlRestore_Complete);
        res.PercentCompleteNotification = 5;
        res.PercentComplete += new PercentCompleteEventHandler(sqlRestore_PercentComplete);
        res.SqlRestore(DBHelper.Server);
        stLog += "\r\n " + tn.Text + " from file " + strFileName;//Record database name already restore to log text
        txtLog.Text = stLog;
        txtLog.Refresh();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T04:19:53.670

如果您的意思是 UI 冻结了一段时间，那是因为您正在 UI 线程的主线程上执行您的工作。由于线程忙于您的工作，因此无法进行 UI 交互。您应该看看在[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)后台执行您的工作并向 UI 报告进度。

# android - 在 android 2.2 上从前置和后置摄像头拍照

> ID：10867830
> 
> 赞同：0
> 
> 时间：2012-06-03T04:12:47.363
> 
> 标签：android, android-camera, android-camera-intent

我正在设计一个使用相机拍摄照片的应用程序（2.2 版）。

我从[http://developer.android.com/sdk/android-2.3.html](http://developer.android.com/sdk/android-2.3.html)读到2.3 及更高版本支持多个摄像头。但是我还是有点困惑，因为当相机启动时，它通常有一个按钮，用户可以单击以在前置和后置摄像头之间切换，对吧？

或者

2.2没有这个开关？

我希望用户能够同时使用前置和后置摄像头。是否可以在 2.2 版上使用，或者我应该使用 2.3 及更高版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:17:57.727

是的，2.2只能管理后置摄像头。对于前置摄像头，您需要升级到 2.3+。

```
private int getBestCameraId() {

        PackageManager pm = m_mainThreadContext.getPackageManager();

        try {
            if (pm.hasSystemFeature(PackageManager.FEATURE_CAMERA_FRONT)) {
                Log.i(TAG, "Phone has a frontal camera.");
                return Camera.CameraInfo.CAMERA_FACING_FRONT;
            } else {
                Log.i(TAG, "Phone has only rear camera.");
                return Camera.CameraInfo.CAMERA_FACING_BACK;
                }
        } catch (Exception e) {
                return Camera.CameraInfo.CAMERA_FACING_BACK;
    }

} 
```

通过这个简单的功能，它可以检查手机是否有前置或后置摄像头，并返回最好的。返回的 id 可以在 Camera.open(id) 中用于选择所需的相机。

如果在你的清单中你写：

```
<uses-sdk android:minSdkVersion="8" /> 
```

并且您使用库 2.3（或 +）开发您的项目，我发布的功能就像一个魅力！我在相机项目中使用过，所以相信我；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T04:17:27.963

参考这个[这个](https://stackoverflow.com/questions/2779002/how-to-open-front-camera-on-android-platform)&[这个](https://stackoverflow.com/questions/6098729/android-front-camera)

对于 API >=9，您可以使用[Camera 类](http://developer.android.com/reference/android/hardware/Camera.html)查看它是否有多个摄像头，并查询 CameraInfo

```
getNumberOfCameras

getCameraInfo: 
```

而对于 Android 2.2 及更低版本，其 SDK 支持单摄像头。

# php - 正则表达式 - 将 HTML 转换为有效的 XML 标记

> ID：10867836
> 
> 赞同：9
> 
> 时间：2012-06-03T04:13:56.007
> 
> 标签：php, regex

我需要帮助编写一个将 HTML 字符串转换为有效 XML 标记名称的正则表达式函数。例如：它需要一个字符串并执行以下操作：

*   如果字符串中出现字母或下划线，则保留它
*   如果出现任何其他字符，则会将其从输出字符串中删除。
*   如果单词或字母之间出现任何其他字符，则将其替换为下划线。

> ```
> Ex:
> Input: Date Created
> Ouput: Date_Created
> 
> Input: Date<br/>Created
> Output: Date_Created
> 
> Input: Date\nCreated
> Output: Date_Created
> 
> Input: Date    1 2 3 Created
> Output: Date_Created 
> ```

基本上，正则表达式函数应该将 HTML 字符串转换为有效的 XML 标记。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T04:39:18.543

一点正则表达式和一点标准函数：

```
function mystrip($s)
{
        // add spaces around angle brackets to separate tag-like parts
        // e.g. "<br />" becomes " <br /> "
        // then let strip_tags take care of removing html tags
        $s = strip_tags(str_replace(array('<', '>'), array(' <', '> '), $s));

        // any sequence of characters that are not alphabet or underscore
        // gets replaced by a single underscore
        return preg_replace('/[^a-z_]+/i', '_', $s);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T04:20:34.823

**试试这个**

```
$result = preg_replace('/([\d\s]|<[^<>]+>)/', '_', $subject); 
```

**解释**

```
"
(               # Match the regular expression below and capture its match into backreference number 1
                   # Match either the regular expression below (attempting the next alternative only if this one fails)
      [\d\s]          # Match a single character present in the list below
                         # A single digit 0..9
                         # A whitespace character (spaces, tabs, and line breaks)
   |               # Or match regular expression number 2 below (the entire group fails if this one fails to match)
      <               # Match the character “&lt;” literally
      [^<>]           # Match a single character NOT present in the list “&lt;>”
         +               # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
      >               # Match the character “&gt;” literally
)
" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T04:20:57.443

应该可以使用：

```
$text = preg_replace( '/(?<=[a-zA-Z])[^a-zA-Z_]+(?=[a-zA-Z])/', '_', $text ); 
```

因此，有环顾四周，看看前后是否有一个字母字符，并替换它之间的任何非字母/非下划线。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T04:22:20.970

我相信以下应该有效。

```
preg_replace('/[^A-Za-z_]+(.*)?([^A-Za-z_]+)?/', '_', $string); 
```

正则表达式的第一部分`[^A-Za-z_]+`匹配一个或多个非字母或下划线的字符。正则表达式的结尾部分是相同的，只是它是可选的。这是为了允许中间部分`(.*)?`（也是可选的）捕获两个列入黑名单的字符之间的任何字符（甚至是字母和下划线）。

# android - 为 Android 开发时如何在 Eclipse 中看到操作栏？

> ID：10867837
> 
> 赞同：2
> 
> 时间：2012-06-03T04:14:01.887
> 
> 标签：android, eclipse, android-layout

我想知道是否可以在查看活动时在 Android 图形布局中预览操作栏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:06:21.940

如果您下载了包含 ActionBar 的 SDK（例如 API 14 或 15），您可以更改图形布局用于在 Eclipse 中呈现布局的 Android 版本。

在窗口的第一行，您可以选择“区域设置”、“Android 版本”以及创建新布局。将 Android 版本设置为 API 14 或更高版本（Android 4.0 或更高版本），您应该可以看到 ActionBar。还将下面的主题设置为合适的“Theme.Holo.*”

# javascript - 重新加载没有 ssl 的页面（https 到 http）

> ID：10867838
> 
> 赞同：0
> 
> 时间：2012-06-03T04:14:46.803
> 
> 标签：javascript, jquery

我有一个使用 ssl 的安全站点。我有一个用于检查登录的 php 文件，如果您没有登录，它会显示一个登录表单，一旦您登录页面刷新并再次检查登录，当它通过时它会加载页面内容。我想要做的是让它在 https 中加载登录，然后当 javascript 从 ajax 获得登录成功的 ok 时，页面仅使用 http 重新加载以减少页面的加载时间和延迟（这些很大页面和任何小事都会有所帮助）。我需要动态地执行此操作，所以我不能只给它一个重定向 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T04:29:43.563

要解决此问题，您可以使用在您需要登录的每个页面顶部加载的未经测试的伪代码。

```
if(loggedin()&&$_SERVER[SERVER_PORT]==443)
{ 
   //if user is logged in but they are still on the https site, redirect to the http site
    header("Location:http://$_SERVER[HTTP_HOST]$_SERVER[SCRIPT_NAME]?$_SERVER[QUERY_STRING]");
}
elseif(!loggedin()&&$_SERVER[SERVER_PORT]!=443)
{
    //if the user is not logged in and they are not on the secure site,  send them to the login page on the secure site
    header("Location:https://$_SERVER[HTTP_HOST]/login.php");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T05:06:52.493

.htaccess 使用是推荐的方法。使用 .htaccess 仅对单个页面或特定页面使用 https。

检查更多 [http://www.sitepoint.com/forums/showthread.php?694107-htaccess-rule-redirect-https-for-just-one-page](http://www.sitepoint.com/forums/showthread.php?694107-htaccess-rule-redirect-https-for-just-one-page)

[HTTPS 仅在带有 .htaccess 的特定页面上](https://stackoverflow.com/questions/4837657/https-only-on-specific-page-with-htaccess)

# google-maps - “文档范围内特征的最大总数”< 1,000 实际上是什么意思？KML 文件限制

> ID：10867841
> 
> 赞同：3
> 
> 时间：2012-06-03T04:16:08.017
> 
> 标签：google-maps, google-maps-api-3

谷歌地图的限制记录在这里[https://developers.google.com/kml/documentation/mapsSupport](https://developers.google.com/kml/documentation/mapsSupport)但我只是想知道“文档范围内的最大功能总数”实际上是什么意思这是否意味着总点数一条或几条线？

我有一张地图，我正在加载大约 15 个 kml 文件，每个文件大约有 80-150 个坐标，我最近注意到这些文件没有正确显示 - 有些显示为“ghosts” - 我可以选择它们但是我看不见他们。

我是不是超过了限制？

问候，莉亚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T23:53:16.150

最近在 Google 地图中加载 KML 图层的方式似乎发生了一些变化；正如stackoverflow上最近的一些问题所表明的那样，开发人员遇到了类似的问题：

*   [KML 图层限制问题](https://stackoverflow.com/q/10804070/1314132)
*   [KML 图层的问题](https://stackoverflow.com/q/10807261/1314132)
*   [Google Map API v3 仅显示 5 层](https://stackoverflow.com/q/10821682/1314132)
*   [Google Maps KML 层数限制](https://stackoverflow.com/q/10835276/1314132)

以及网络上的其他地方：

*   [http://blog.appsgoogleplus.com/google/17566/google-map-api-v3-displays-only-5-layers/](http://blog.appsgoogleplus.com/google/17566/google-map-api-v3-displays-only-5-layers/)

[错误报告 #4185](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4185)最近在 Google 地图问题页面上提交；它可能与您的问题有关。不确定您是否也遇到了似乎与特定数量的 KML 图层相关的问题，但希望此信息对您有所帮助 -

# mobile - 在桌面浏览器中显示移动应用

> ID：10867842
> 
> 赞同：0
> 
> 时间：2012-06-03T04:16:10.607
> 
> 标签：mobile, jquery-mobile, cordova

大多数移动网站在普通浏览器中看起来真的很糟糕 - 整个页面都延伸到整个页面 - 哦，天哪！

我想展示一个使用 phonegap/JQuery Mobile 开发的移动应用程序，方法是将其 Web 内容放在网上。使它看起来合理的最佳方法是什么？

选项 1\. 创建一个包装器，它仅在移动站点上可用，并使用 iframe 或 ajax 调用移动部分。

选项 2\. 摆弄媒体查询并适当地设置它的样式。（我发现这个选项太难了，因为 JQ Mobile 引入了很多你必须“撤消”的东西。）

选项 3？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T04:18:46.587

选项 3：使用[Ripple](http://ripple.tinyhippos.com/download)，这是一个免费的 Chrome 移动模拟器插件。

选项 4：您还可以考虑做一些服务器端样式（使用用户代理映射库）。在这种情况下，您可以在 HTML 正文上设置*max-width*为 320px，以防您的服务器确定请求来自桌面浏览器。

# javascript - 如何仅在每次单击可滚动（jquery 工具）中的导航按钮时才加载图像，而不是一次加载所有图像？

> ID：10867844
> 
> 赞同：0
> 
> 时间：2012-06-03T04:16:33.483
> 
> 标签：javascript, jquery, ajax, image, scrollable

我在这里关注这个简单的演示教程：http: [//jquerytools.org/demos/scrollable/index.html](http://jquerytools.org/demos/scrollable/index.html)

基本上，我正在按照上面的教程进行操作。该演示的问题在于它一次加载所有图像，极大地影响了性能。我想要它，以便每次单击箭头时它只加载一组图像。所以基本上，一旦你进入页面，它首先加载第一组图像。然后，一旦您单击其中一个箭头，它就会加载下一组图像。这是为了使页面的加载时间更短。无论如何用ajax或jQuery加载来做到这一点？我希望它类似于下面的链接，但使用 jquery 工具可滚动插件：

[http://sorgalla.com/projects/jcarousel/examples/dynamic_ajax_php.html](http://sorgalla.com/projects/jcarousel/examples/dynamic_ajax_php.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T04:23:24.073

如果您提供了一些代码，将会很有帮助。但是，从显示的文档中，您的图像集应该在单独的 div 中以实现您想要的

```
//one set
<div>
      <img src="http://farm1.static.flickr.com/163/399223609_db47d35b7c_t.jpg" />
      <img src="http://farm1.static.flickr.com/135/321464104_c010dbf34c_t.jpg" />
      <img src="http://farm1.static.flickr.com/40/117346184_9760f3aabc_t.jpg" />
      <img src="http://farm1.static.flickr.com/153/399232237_6928a527c1_t.jpg" />
    </div>

///Next set, revealed on click
<div>
      <img src="http://farm1.static.flickr.com/163/399223609_db47d35b7c_t.jpg" />
      <img src="http://farm1.static.flickr.com/135/321464104_c010dbf34c_t.jpg" />
      <img src="http://farm1.static.flickr.com/40/117346184_9760f3aabc_t.jpg" />
      <img src="http://farm1.static.flickr.com/153/399232237_6928a527c1_t.jpg" />
    </div> 
```

# php - 搜索结果的php分页无法显示

> ID：10867846
> 
> 赞同：1
> 
> 时间：2012-06-03T04:16:53.447
> 
> 标签：php, search, pagination

我刚刚在学习分页。我无法让它为搜索结果工作。它使用正确数量的链接正确显示第一页，但单击任何链接（甚至在第 1 页上）会转到空白页。

有人可以告诉我我做错了什么：

以下代码用于单击搜索按钮时。

```
<?php

include('includes/connect-db.php');
include('includes/functions.php');

if (isset($_GET['searchbtn'])){
    $product=$_GET['products'];
    $status=$_GET['ticket_status'];
    $order_by=$_GET['order_by'];
    $ticket_type=$_GET['ticket_type'];

    #check if product has been selected
    if ($_GET['products'] == 'select'){
        echo '<font class="error">&nbsp Please select a product to search.</font>'; 
    }else{
        if ($status == 'All' AND $order_by == 'All' AND $ticket_type == 'All' ){
            $page_query="SELECT * FROM tickets WHERE product='$product' ORDER BY created DESC";
        }elseif ($ticket_type == 'BOX'){
            $page_query="SELECT * FROM tickets WHERE product='$product' AND status='$status' AND pbi <> '-' ORDER BY '$order_by'    ";
        }elseif ($ticket_type == 'PVR'){
            $page_query="SELECT * FROM tickets WHERE product='$product' AND status='$status' AND inc <> '-' ORDER BY '$order_by'    ";
        }else{
            $page_query="SELECT * FROM tickets WHERE product='$product' AND status='$status' ORDER BY created DESC";
        }   
    }#end of else

    $results_per_page=3;
    $result_set=pagination($results_per_page,$page_query);

    $query=$result_set['query'];
    $pages=$result_set['pages'];

    #SELECT, SHOW, DESCRIBE, EXPLAIN and other statements returning resultset. A resource on success or False on Error

    if (!empty($query)){
        $result = mysqli_query($db,$query) or die( "My query ($query) generated an error: ".mysql_error());
        $num_results = mysqli_num_rows($result);

        if ($num_results > 0){
            displayTicket($result);
            if ($pages > 1){
                echo '</br>';
                for($i=1;$i<=$pages;$i++){
                    echo ' <a href="?page='.$i.'">'.$i.'</a> ';
                }
            }
        }else{
            echo "&nbsp No Records found.";
        }
    }#query string is not empty
}   

?> 
```

我已将分页代码放在单独的函数中：

```
function pagination($per_page, $pages_query){
    include('includes/connect-db.php');
    $pagination[]=array();

    #total result count 
    $total_result=mysqli_query($db,$pages_query);

    #ceil takes a decimal number and gives the nearest whole number
    $total=mysqli_num_rows($total_result);
    $pages = ceil($total / $per_page);

    $page = (isset($_GET['page'])) ? (int)$_GET['page'] : 1;
    $start = ($page - 1) * $per_page;

    $query = " LIMIT $start,$per_page";
    $query = $pages_query.$query;
    $pagination['query'] = $query;
    $pagination['pages'] = $pages; 
    return $pagination;
} 
```

注意：链接到其他页面的分页只有在我尝试使用搜索功能时才会失败。我已经在一个在表格中列出信息的页面上进行了尝试，并且链接工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T04:51:01.627

在我看来，问题在于链接中的信息：`localhost/test/searchProductForm.php?page=1`告诉 searchProductForm 要显示哪个页面，但它没有告诉它搜索信息是什么。没有它，您的搜索页面不知道要显示什么。尝试更改分页链接以包含原始搜索链接中的所有信息（即，您的`products`、`ticket_status`、`order_by`和`ticket_type`参数）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-30T09:57:29.863

我知道这是一个旧线程，但是对于无法使用上面使用的代码解决类似问题的任何人，这可能与文档开头缺少 session_start() 有关。

我这样说是因为尽管代码试图获取 ?page= &products= 等传递给 $_GET 语句的会话变量，但它们没有被从 URL 检索到变量中，但您需要将 session_start() 放在请求您的 PHP 文档将信息从 URL 传递到字符串。

# xml - Treewalker 异常，Eclipse

> ID：10867852
> 
> 赞同：0
> 
> 时间：2012-06-03T04:17:49.413
> 
> 标签：xml, eclipse, exception, tomcat, jboss

我使用 eXistdb 进行了一个项目。XML Java API 等。之后，每当我尝试在 Eclipse 中创建动态 Web prj 时，都会出现此错误。当我想创建一个新的服务器实例时，我得到了这个。请帮忙！！！或者我应该完全改变我使用 Visual Studio 成为 C# 程序员的路径，因为我长期面临这个错误。我安装了新的eclipse，tomcat服务器它没有消失！

“所选向导无法启动。插件“org.eclipse.jst.servlet.ui”无法实例化类“org.eclipse.jst.servlet.ui.project.facet.WebProjectWizard”。org/apache/ xml/序列化器/TreeWalker"

提前致谢。

注意：这不是 tomcat 的问题，我安装了新的 eclipse，创建了新的工作区，安装了新的 JRE，我仍然能够创建一个 java 项目，但是当我创建一个类时它给了我

在“任务列表保存作业”期间发生内部错误。org/apache/xml/序列化程序/TreeWalker

第二个错误是：无法将主表保存到文件“C:\Users\SaraS\Desktop\solve.metadata.plugins\org.eclipse.core.resources.safetable\org.eclipse.core.resources”。C:\Users\SaraS\Desktop\solve.metadata.plugins\org.eclipse.core.resources.safetable\org.eclipse.core.resources（系统找不到指定的路径）

请注意，solve 是我的工作区名称。帮助！

更新：我安装了新的 JRE，所以现在我可以创建一个动态 Web 项目然后创建一个类。但是当我想运行 tomcat 服务器时，我再次遇到第一个提到的错误！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T21:27:15.590

好的，我解决了这个问题。JRE 中的 xiling 包（如果我没记错的话）存在问题。安装了新的 JRE，现在可以正常工作了。谢谢。

# php - 使用提交按钮执行不同操作的多个表单

> ID：10867854
> 
> 赞同：1
> 
> 时间：2012-06-03T04:18:13.993
> 
> 标签：php, forms, button, submit

我的 index.php 中有两个表单，我试图让他们分别提交和发布他们的数据

表格 1

```
echo '<form action="process.php?type=news" method="post">';
echo '<table cellspacing="0"><tr><th>';
echo 'Add News to News Feed';
echo '</th></tr><tr><td>';
echo 'Title:<br /><input name="newstitle" type="text" id="add" style="height:16px;width:525px;" size="80" maxlength="186" /><br />';
echo 'Main Body Text:<br /><textarea name="newsfeed" id="add" style="width:525px;height:78px;" maxlength="2000" ></textarea>';
echo '<input style="float:right;margin-top:5px;" id="button" type="submit" value="Submit" />';
echo '</td></tr></table></from>'; 
```

和表格 2

```
echo '<form action="process.php?type=suggest" method="post">';
echo '<table cellspacing="0"><tr><th>';
echo 'Suggest Additions to the Intranet';
echo '</th></tr><tr><td>';
echo '<textarea name="suggest" id="add" style="width:330px;height:60px;" maxlength="800" ></textarea>';
echo '<input style="float:right;margin-top:5px;" id="button" type="submit" value="Submit" />';
echo '</td></tr></table></from>'; 
```

我希望这些都在按下提交按钮后发布并执行操作，但目前第二个表单提交给第一个表单操作

我怎样才能解决这个问题？？？

编辑：我也将 .PHP 用于索引和进程页面，然后使用它将表单回显到页面上

这里也是 process.php 数据

```
$type=$_REQUEST['type'];
$suggest=$_POST['suggest'];
$newstitle=$_POST['newstitle'];
$news=mysql_real_escape_string($_POST['newsfeed']);

if ($type == "news")
{
  $sql=mysql_query("SELECT * FROM newsfeed WHERE title = ('$newstitle')");
  $number_of_rows = mysql_num_rows($sql);
  if ($number_of_rows > 0)
  {
    echo 'This Title is Already Taken';
  }
  else
  {
    $sql="INSERT INTO newsfeed (title, news) VALUES ('$newstitle','$news')";    
    if (!mysql_query($sql,$con))
    {
      die('Error: ' . mysql_error());
    }
    header('Location: index.php');
    exit;
  }
}
elseif ($type == "suggest")
{
  $sql="INSERT INTO suggestions VALUES ('$suggest')";
  if (!mysql_query($sql,$con))
  {
    die('Error: ' . mysql_error());
  }
  header('Location: index.php');
  exit;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T04:28:04.057

会不会是你不是用 关闭表单`</form>`，而是用关闭表单`</from>`，所以第二个表单的代码实际上仍然**在**第一个表单内，因为标签永远不会关闭？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T04:32:51.847

尝试为每个表单点击提交，以便在其提交按钮 html 中输入：

`onclick="document.forms["myform1"].submit();"` 对于表格 2 放 `onclick="document.forms["myform2"].submit();"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T04:36:13.717

我不确定你想要实现什么，所以这是我的假设，1.你的表单提交错误，例如，第二个表单提交第一个表单的数据或 2.你想同时提交 1 个。

为 1：

做这个。

```
<form id="form1" action="process.php" method="POST">
<input type="hidden" name="type" value="news">
....
</form> 
```

注意拼写 /form 不是 /from

```
<form id="form2" action="process.php" method="POST">
<input type="hidden" name="type" value="suggest">
....
</form> 
```

注意拼写 /form 不是 /from

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T04:41:30.207

**一些指示：**

与其呼应很多次，呼应一次就够了！记住回声会减慢你的脚本。此外，我不会将类型作为 $_GET 传递，对于表单来说，post 总是更安全，您可以使用隐藏字段来添加类型：

```
<?php 
echo '
<form action="process.php" method="post">
<input type="hidden" name="type" value="news">
...
...
</form>';//Not </from>
?> 
```

然后使用 PHP 部分使用 switch case 而不是 if elses，添加功能然后与另一个 ifelse 拆分会更容易，而且默认块可用于任何不匹配的内容，例如 if else 语句中的最后一个 else。

```
<?php 
$type = $_POST['type'];

switch($type){
    case "news":
        ...
        break;
    case "suggest":
        ...
        break;
    default:
        //default if different type or no type is set
        break;
}
?> 
```

也转移到 PDO 或为您的 mySQL 准备的 mysqli_ 函数更安全。

# jquery - json 对象到选中的复选框

> ID：10867858
> 
> 赞同：0
> 
> 时间：2012-06-03T04:18:57.970
> 
> 标签：jquery, json

我有这个：

```
<div id="taglist">
    <input type="checkbox" name="chkB1" id="chkB1" value="Mon" />&nbsp;Monday&nbsp;&nbsp;
    <input type="checkbox" name="chkB2" id="chkB2" value="Tue" />&nbsp;Tuesday&nbsp;&nbsp;
    <input type="checkbox" name="chkB3" id="chkB3" value="Wed" />&nbsp;Wednesday&nbsp;&nbsp;
    <input type="checkbox" name="chkB4" id="chkB4" value="Thu" />&nbsp;Thursday&nbsp;&nbsp;<br />
    <input type="checkbox" name="chkB5" id="chkB5" value="Fri" />&nbsp;Friday&nbsp;&nbsp;
    <input type="checkbox" name="chkB6" id="chkB6" value="Sat" />&nbsp;Saturday&nbsp;&nbsp;
    <input type="checkbox" name="chkB7" id="chkB7" value="Sun" />&nbsp;Sunday&nbsp;&nbsp;
    <input type="hidden" name="source_frequency" id="source_frequency" value="" />
</div> 
```

还有这个：

```
var days = ["Mon","Tue","Wed","Sun"]; 
```

我希望天数中的值选中相应的复选框。怎么会做这样的事情:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T04:24:51.590

```
var days = ["Mon","Tue","Wed","Sun"];

for(var day in days){
  $('#taglist input[value='+days[day]+']').prop("checked", true);
}
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T04:27:53.120

```
 var days = "Mon","Tue","Wed","Sun";
    var array=days.split(',');
    $(':checkbox').each(function(){
    if($.inArray($(this).val(), array)>=0)
    {
       $(this).attr('checked');
    }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T04:29:51.117

就像在你的可变日子里有一个循环一样

```
 $(document).ready(function(){
        var days = ["Mon","Tue","Wed","Sun"]; //days array 
        for(var i=0;i<=days.length;i++){
           $('#taglist input[value='+days[i]+']').prop("checked", true);
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T04:33:58.710

```
var days = ["Mon","Tue","Wed","Sun"];

$(':checkbox[name^=chkB]').filter(function(index, val) {
    if(days.indexOf(this.value) >= 0)
        return this.checked = true;
}); 
```

**[样品锻炼](http://jsfiddle.net/6htkq/)**

# javascript - 构造这些 jquery 回调的最佳方法是什么？

> ID：10867859
> 
> 赞同：2
> 
> 时间：2012-06-03T04:19:03.700
> 
> 标签：javascript, callback, web-sql

我是 jquery 的新手，最近对这些回调的强大功能感到惊讶。但是在这里我有一些逻辑，我不确定最好的方法是什么。基本上，我在 chrome 中的 web sql 数据库中有一堆表。我需要遍历表 A、表 B 和表 C。我需要将表的每一行提交给服务器。每行代表一堆复杂的逻辑和数据url，它们必须按照A -> B -> C的顺序提交。

常规的 Java 方式是：

```
TableA.SubmitToServer()
{
    query table A;
    foreach(row in tableA.rows)
    {
        int nRetID = submitToServer(row);
        //do other updates....
    }
} 
```

表 B 和表 C 类似。

然后只需调用：

```
TableA.SubmitToServer();
TableB.SubmitToServer();
TableC.SubmitToServer();
//that is very clear and easy. 
```

但在 JQuery 中，它可能是：

```
db.Transaction(function (tx){
    var strQuery = "select * from TableA";
    tx.executeSql(strQuery, [], function (tx, result) {
        for(i = 0 ; i < result.rows.length; i++) {
            submitTableARowToServer(tx, result.rows.getItem(i), function (tx, result) {
                //do some other related updates based on this row from tableA
                //also need to upload some related files to server...
            });
        }
    }, 
    function errorcallback() ...
}); 
```

如您所见，已经有足够多的嵌套回调。现在，我应该将 TableB 和 tableC 的流程放在哪里？它们都需要具有相似的逻辑，并且只能在 TableA 完成所有操作后才能调用它们。那么，在 JQuery 中执行此操作的最佳方法是什么？

谢谢

# variables - GNU Make：在模式规则宏中使用 %

> ID：10867861
> 
> 赞同：5
> 
> 时间：2012-06-03T04:19:21.377
> 
> 标签：variables, macros, makefile

我正在尝试构建一个允许我`%`在宏调用中使用的模式规则，但我没有得到我期望的结果。

模式规则：

```
%.o: %.cpp $(%_H)
    g++ -o $@ $(FLAGS) -c $< 
```

问题在于 $(%_H)

由于某种原因`%`，它没有扩展到它的定义。

当我打印出依赖列表`($^)`时，只打印源文件。

我有一种非常简洁的方式来设置我想使用的依赖项：

```
# Header Dependencies per object 
Geometry_H:=Geometry.h $(Error_H) 
Enemy_H:=Enemy.h $(Geometry_H) $(Error_H) 
Surface_H:=Surface.h $(Geometry_H) 
Player_H:=Player.h $(Geometry_H) $(Surface_H) 
SDLWindow_H:=SDLWindow.h $(Surface_H) $(Error_H) 
Path_H:=Path.h $(Geometry_H) $(Error_H) 
Territory_H:=Territory.h $(Geometry_H) 
Board_H:=Board.h $(Territory_H) $(Geometry_H) $(Player_H) $(Path_H) $(Enemy_H) $(Error_H) 
Error_H:=Error.h 
Diminisher_H:=Diminisher.h $(SDLWindow_H) $(Geometry_H) $(Surface_H) $(Board_H) $(Error_H) 
Main_H:=$(Diminisher_H) 
```

另一个人建议我将这些变量更改为依赖项列表。

即 Main_H:=$(Diminisher_H)

变成 Main.o: $(Diminisher_H)

这是一个很好的修复，它有效。但是，问题仍然存在，即`$(%_H)`在某种程度上无效。

我想知道如何（如果可能的话）使它成为一个有效的表达式。

我已经尝试过`$( $%_H )`，，`$( $(%)_H )`等等`$( $(value %)_H )`。`%`在宏调用中似乎失去了意义。

有没有办法`%`在宏调用中使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T11:57:28.257

要么使用[二次扩展](http://www.gnu.org/software/make/manual/make.html#Secondary-Expansion)：

```
.SECONDEXPANSION:

%.o: %.cpp $$($$*_H)
    g++ -o $@ $(FLAGS) -c $< 
```

或者（IMO，更好）使用依赖自动生成：

*   [另一个SO问题的答案](https://stackoverflow.com/a/10700187/545027)
*   [高级自动依赖生成](http://mad-scientist.net/make/autodep.html)文章

# c# - 记录到内存然后写入文件

> ID：10867875
> 
> 赞同：1
> 
> 时间：2012-06-03T04:23:24.927
> 
> 标签：c#, performance, logging, loops, io

我想知道一些事情，我有一个循环运行一整天（7 次），然后在其中运行另一个循环，它针对文件中的所有记录运行。（大约 100000），所以总共大约 700000 次，现在我想记录每个循环中的每个处理，并将其记录到文件中，假设我们第一次在第一个循环内，第一次在第二个循环内，我们每次都记录在一个文件中做了什么。但问题是，如果我每次都记录，会严重影响性能，因为IO操作太多，我在想有没有办法，我可以将每一步都记录到内存中（内存流或任何东西）然后在外循环结束时，将所有内存流数据记录到文件中？

说如果我有

```
for (int i=0; i<7; i++)
{
  for (int j=0; j<RecordsCount; j++)
  {
    SomeOperation();
    // I am logging to a file here right now
  }
} 
```

它严重损害了性能，如果我删除日志文件，我可以更早地完成它。所以我认为最好先登录到内存并将所有日志从内存写入文件。那么，有没有办法做到这一点？如果有很多，什么是最好的？

*ps：这是我找到的记录器[http://www.codeproject.com/Articles/23424/TracerX-Logger-and-Viewer-for-NET](http://www.codeproject.com/Articles/23424/TracerX-Logger-and-Viewer-for-NET)，但如果需要，我可以使用任何其他自定义记录器或其他任何东西。*

**编辑：**如果我使用内存流，然后将其全部写入文件，这是否会给我带来更好的性能，然后`File.AppendAllLines`按照 Yorye 和 zmbq 的回答中的建议使用，如果这会给我带来比 Jeremy 评论的任何性能提升吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T04:45:12.627

这只是一个示例，但您可以理解。

你真的有解决方案，你只需要这样做......

```
for (int i=0; i<7; i++)
{
    var entries = new List<string>();

    for (int j=0; j<RecordsCount; j++)
    {
        SomeOperation();

        // Log into list
        entries.Add("Operation #" + j + " results: " + bla bla bla);
    }

    // Log all entries to file at once.
    File.AppendAllLines("logFile.txt", entries);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T20:27:43.577

为什么不使用合适的日志框架而不是自己编写呢？

例如，NLog 内置了缓冲，并且易于配置：[https ://github.com/nlog/NLog/wiki/BufferingWrapper-target](https://github.com/nlog/NLog/wiki/BufferingWrapper-target)

我建议您专注于编写为您的项目带来价值的代码，同时为所有其他东西重用现有的解决方案。这可能会让你更有效率并给出更好的结果:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T04:51:30.333

只要您有足够的缓冲区，将 700,000 行记录到文件中就不会花费很长时间。事实上，与在循环外立即执行相比，如果在循环内执行它不应该花费更长的时间。

不要使用`File.AppendAllLines`或类似的东西，而是打开文件的流，确保你有一个缓冲区，并通过它写入。

# c - gcc 调试，分段错误（核心转储）但没有核心

> ID：10867876
> 
> 赞同：8
> 
> 时间：2012-06-03T04:23:27.103
> 
> 标签：c, debugging, gcc

以前我会`Segmentation Fault`没有内核，然后我在编译命令中添加了 -ggdb 并在执行 gcc 之前在 bash 中执行了这个命令：

```
ulimit -c unlimited 
```

有一段时间一切都很好（我有一个核心），但现在我得到`Segmentation Fault (core dumped)`但在发出 gcc 命令的目录中没有核心？会不会去别的地方？我还能尝试什么？

一点附加信息：

1.  操作系统：Gentoo Linux
2.  在正在运行的内核中启用了启用 ELF 核心转储。
3.  该应用程序是一个用 gtk+ 编写的文本编辑器

**答：** 我找到了两种方法：

1.  `find / -name "core" -ls`
2.  正如托雷克所建议的：

    $ strace ./executable > output.txt 2>&1

    $ grep chdir output.txt

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T05:17:01.993

正如@JonathanLeffler 所指出的，核心转储位于当前目录中。

您可以使用`strace`来查看进程是否执行了 chdir()。不幸的是`strace`，没有显示核心转储本身的去向，但是：

```
$ cat crash.c
int main(void) {
    chdir("/tmp");
    *(int *)0 = 0;
    return 0;
}
$ cc -o crash crash.c
$ strace ./crash
execve("./crash", ["./crash"], [/* 53 vars */]) = 0
... [lots of libc trace stuff snipped] ...
chdir("/tmp")                           = 0
--- SIGSEGV {si_signo=SIGSEGV, si_code=SEGV_MAPERR, si_addr=0} ---
+++ killed by SIGSEGV (core dumped) +++
Segmentation fault
$ ls /tmp 
```

现在有一个核心。*pid*文件在里面。

# python - 以这种格式获取日期时间并转换为 4 字节十六进制

> ID：10867877
> 
> 赞同：1
> 
> 时间：2012-06-03T04:23:27.703
> 
> 标签：python, datetime, hex

我有这种格式的日期时间。

```
1999-12-31 09:00:00 
```

来自十六进制值：

```
F0C46C38 
```

您如何将上述格式的日期时间值转换为 4 字节十六进制？我在上面发布的值是相互补充的。第二个代码块中的十六进制被反转。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T04:54:15.233

386CC4F0(hex) == 946652400(dec)
946652400 是 1999-12-31 15:00:00 GMT 的 Unix 时间戳。

```
import time
print hex(int(time.mktime(time.strptime('1999-12-31 15:00:00', '%Y-%m-%d %H:%M:%S'))) - time.timezone) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-20T10:28:24.710

```
#!/usr/bin/env python3
import binascii
import struct
from datetime import datetime

# convert time string into datetime object
dt = datetime.strptime('1999-12-31 09:00:00', '%Y-%m-%d %H:%M:%S')

# get seconds since Epoch
timestamp = dt.timestamp() # assume dt is a local time

# print the timestamp as 4 byte hex (little-endian order)
print(binascii.hexlify(struct.pack('<I', round(timestamp))))
# -> b'f0c46c38' 
```

# java - 为什么需要用 BoxLayout 调用 setLayout？

> ID：10867879
> 
> 赞同：9
> 
> 时间：2012-06-03T04:23:55.167
> 
> 标签：java, swing, layout, layout-manager, boxlayout

大多数布局管理器都有无参数构造函数（也就是说，您可以创建一个带有 的 FlowLayout `new FlowLayout ()`、一个带有 的 GridLayout `new GridLayout ()`、一个带有 的 GridBagLayout`new GridBagLayout ()`等）。但是，`BoxLayout`这要求您同时传递它将管理的容器和组件应沿其布置的轴。

我的问题是：既然您已经告诉布局管理器要布局哪个组件，为什么还需要编写

```
BoxLayout bl = new BoxLayout(myPanel, BoxLayout.Y_AXIS);
myPanel.setLayout(bl); 
```

而不仅仅是第一行？

我快速查看[了`BoxLayout`源代码](http://www.docjar.com/html/api/javax/swing/BoxLayout.java.html)，发现我使用的构造函数（第 178-185 行）没有调用`target.setLayout(this)`或进行任何类似的调用。添加它似乎真的很简单。Swing 库中没有包含它的原因是什么？

如果重要的话，我正在使用

> Java 版本 1.7.0
> 
> Java(TM) SE 运行时环境（内部版本 1.7.0-b147）

在 Win7Pro 上。

谢谢！

* * *

SSCCE：

```
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JButton;

public class BoxLayoutSSCCE extends JFrame {

    // Change this to see what I mean
    public static final boolean CALL_SET_LAYOUT = true;

    public BoxLayoutSSCCE () {
        super("Box Layout SSCCE");
        JPanel panel = new JPanel();
        BoxLayout bl = new BoxLayout(panel, BoxLayout.Y_AXIS);
        if (CALL_SET_LAYOUT) {
            panel.setLayout(bl);
        }
        panel.add(new JButton("Button 1"));
        panel.add(new JButton("Button 2"));
    }

    public static void main (String[] args) {
        BoxLayoutSSCCE blsscce = new BoxLayoutSSCCE();
        blsscce.pack();
        blsscce.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T07:41:40.157

`Container`必须存在才能传递`BoxLayout`给。通常一个人会这样写：

```
JPanel myPanel = new JPanel();
BoxLayout bl = new BoxLayout(myPanel, BoxLayout.Y_AXIS);
myPanel.setLayout(bl); 
```

合并最后两行是很有诱惑力的，但最小惊讶原则表明布局的构造函数不应该以其他方式改变容器的状态。

Convenienly，[`javax.swing.Box`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Box.html)提供了“一个使用`BoxLayout`对象作为其布局管理器的轻量级容器”。

```
public class Box extends JComponent implements ... {

    public Box(int axis) {
        super();
        super.setLayout(new BoxLayout(this, axis));
    }
} 
```

现在一行就可以了：

```
Box myBox = new Box(BoxLayout.Y_AXIS); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T05:26:21.667

`BoxLayout`确保将布局方法应用于正确的容器。它强制在构造函数中指定的相同容器用于各种方法，例如`layoutContainer(Container target)`,`preferredLayoutSize(Container target)`等。它归结为进行`checkContainer()`验证的方法：

```
void checkContainer(Container target) {
    if (this.target != target) {
        throw new AWTError("BoxLayout can't be shared");
    }
} 
```

`BoxLayout`实现可能会缓存有关容器的一些详细信息并尝试维护状态，因此无法共享。

***编辑：***

`BoxLayout`实现[LayoutManager2.invalidateLayout()](http://docs.oracle.com/javase/6/docs/api/java/awt/LayoutManager2.html#invalidateLayout%28java.awt.Container%29)并在其中重置其缓存的详细信息。其他布局实现遵循相同的模式。例如，[GroupLayout](http://docs.oracle.com/javase/6/docs/api/javax/swing/GroupLayout.html)和[OverlayLayout](http://docs.oracle.com/javase/6/docs/api/javax/swing/OverlayLayout.html)在其构造函数中也需要容器参数。

# java - 通过 Socket 连接发送 String[] 数组

> ID：10867880
> 
> 赞同：2
> 
> 时间：2012-06-03T04:23:59.023
> 
> 标签：java, arrays, sockets

所以我试图`String[]`通过一个开放的套接字连接发送一个。我目前有这个代码：

发送：

```
public void sendData() {
    try {
        OutputStream socketStream = socket.getOutputStream();
        ObjectOutputStream objectOutput = new ObjectOutputStream(socketStream);
        objectOutput.writeObject(new String[] {"Test", "Test2", "Test3"});

        objectOutput.close();
        socketStream.close();

    } catch (Exception e) {
        System.out.println(e.toString());
    }
} 
```

接收：

```
public Object readData() {
    try {
    InputStream socketStream = socket.getInputStream();
    ObjectInputStream objectInput = new ObjectInputStream(new GZIPInputStream(socketStream));
    Object a = objectInput.readObject();
      return a;
    } catch(Exception e) {
        return null;
    }
} 
```

在我收到`String[]`另一端的数据后，我希望能够像往常一样遍历它，这样我就可以获得值。我当前的代码似乎不起作用，因为它`null`作为值返回。

这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T04:33:01.363

> 我当前的代码似乎不起作用，因为它返回 null 作为值。

原因也很明显！

```
} catch(Exception e) {
    return null;
} 
```

这就是说“如果出现问题，请返回`null`并且不要告诉我问题是什么”！

像这样捕获和压制异常是不好的做法。至少，您应该尝试打印异常堆栈跟踪。在编写器代码中，您可以这样做：

```
System.out.println(e.toString()); 
```

这总比没有好，但它只是打印异常名称和消息。你真的应该打印完整的堆栈跟踪......像这样：

```
e.printStackTrace(System.out); 
```

对于生产质量代码，您可能应该记录异常，而不仅仅是将消息写入标准输出。

一旦你有了堆栈跟踪，你就可以找出真正的问题并修复它。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-03T04:41:24.737

我设法自己弄清楚了，我将接收代码更改为：

```
public String[][] readData() {
    try {
    InputStream is = socket.getInputStream();
    ObjectInputStream ois = new ObjectInputStream(is);
     return (String[][])ois.readObject();
    } catch(Exception e) {
        return null;
    }
} 
```

现在就像一个魅力。谢谢大家！

# python - for 循环中的元组解包

> ID：10867882
> 
> 赞同：78
> 
> 时间：2012-06-03T04:24:10.313
> 
> 标签：python, python-3.x

我偶然发现了以下代码：

```
for i, a in enumerate(attributes):
   labels.append(Label(root, text = a, justify = LEFT).grid(sticky = W))
   e = Entry(root)
   e.grid(column=1, row=i)
   entries.append(e)
   entries[i].insert(INSERT,"text to insert") 
```

我不明白这`i, a`一点，在谷歌上搜索相关信息`for`是一件很痛苦的事情。当我尝试使用代码时，我得到了错误：

> ValueError：需要超过 1 个值才能解压

有谁知道它的作用，或者与它相关的更具体的术语，我可以通过谷歌了解更多信息？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-06-03T04:27:54.160

你可以谷歌[“元组解包”](https://stackabuse.com/unpacking-in-python-beyond-parallel-assignment/)。这可以在 Python 的各个地方使用。最简单的就是赋值：

```
>>> x = (1,2)
>>> a, b = x
>>> a
1
>>> b
2 
```

在 for 循环中，它的工作方式类似。如果 iterable 的每个元素都是 a `tuple`，那么你可以指定两个变量，循环中的每个元素都会被解包为这两个变量。

```
>>> x = [(1,2), (3,4), (5,6)]
>>> for item in x:
...     print "A tuple", item
A tuple (1, 2)
A tuple (3, 4)
A tuple (5, 6)
>>> for a, b in x:
...     print "First", a, "then", b
First 1 then 2
First 3 then 4
First 5 then 6 
```

该`enumerate`函数创建一个可迭代的元组，因此可以这样使用。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-03T04:29:13.017

Enumerate 基本上为您提供了一个在 for 循环中使用的索引。所以：

```
for i,a in enumerate([4, 5, 6, 7]):
    print i, ": ", a 
```

将打印：

```
0: 4
1: 5
2: 6
3: 7 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-03T04:29:25.077

以这段代码为例：

```
elements = ['a', 'b', 'c', 'd', 'e']
index = 0

for element in elements:
  print element, index
  index += 1 
```

您循环遍历列表并存储索引变量。`enumerate()`做同样的事情，但更简洁：

```
elements = ['a', 'b', 'c', 'd', 'e']

for index, element in enumerate(elements):
  print element, index 
```

该`index, element`符号是必需的，因为`enumerate`返回一个元组 ( `(1, 'a')`, `(2, 'b')`, ...)，该元组被解压缩为两个不同的变量。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-03T07:11:28.553

```
[i for i in enumerate(['a','b','c'])] 
```

结果：

```
[(0, 'a'), (1, 'b'), (2, 'c')] 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2021-04-12T15:38:00.797

您可以将该`for index,value`方法与使用`( )`. 这在您想在循环中设置几个相关值时很有用，这些值可以在没有中间元组变量或字典的情况下表示，例如

```
users = [
    ('alice', 'alice@example.com', 'dog'),
    ('bob', 'bob@example.com', 'cat'),
    ('fred', 'fred@example.com', 'parrot'),
]

for index, (name, addr, pet) in enumerate(users):
    print(index, name, addr, pet) 
```

印刷

```
0 alice alice@example.com dog
1 bob bob@example.com cat
2 fred fred@example.com parrot 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-03T04:28:56.963

该函数返回一个生成器对象，该对象在每次迭代时`enumerate`生成一个包含元素索引的元组（生成元组并为它们分配变量名称。`i``0``a``for`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-02-13T12:06:58.323

简短的回答，从 for 循环中的列表中解包元组是可行的。enumerate() 使用当前索引和整个当前项创建一个元组，例如 (0, ('bob', 3))

我创建了一些测试代码来证明这一点：

```
 list = [('bob', 3), ('alice', 0), ('john', 5), ('chris', 4), ('alex', 2)]

    print("Displaying Enumerated List")
    for name, num in enumerate(list):
        print("{0}: {1}".format(name, num))

    print("Display Normal Iteration though List")
    for name, num in list:
        print("{0}: {1}".format(name, num)) 
```

元组解包的简单性可能是我对 Python 最喜欢的事情之一：D

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-26T06:48:46.453

```
let's get it through with an example:
list = [chips, drinks, and, some, coding]
  i = 0
  while i < len(list):

           if i % 2 != 0:
                print(i)
                  i+=1
       output:[drinks,some]

    now using EMUNERATE fuction:(precise)
   list = [chips, drinks, and, coding]
for index,items in enumerate(list):

             print(index,":",items)
OUTPUT:   0:drinks
          1:chips
          2:drinks
          3:and
          4:coding 
```

# ios - 创建一个全局变量来存储来自 NSDate 的时间？

> ID：10867884
> 
> 赞同：2
> 
> 时间：2012-06-03T04:25:06.780
> 
> 标签：ios, xcode, global-variables, nstimer, nstimeinterval

我想在满足if条件时将程序运行期间的时间存储到全局变量中，所以当收到新时间时，它应该存储在全局变量中，

在我的 if 条件下，我想检查一下？

```
 NSDate* CurrentTime = [NSDate date]; 
```

// 少于 30 秒

```
if ([CurrentTime timeIntervalSinceDate:TimeStoredinglobalvariable] < 30.0f)
    {
        //do something
        //Reset the new time to
        TimeStoredinglobalvariable = CurrentTime;
    } 
```

这种实现 if 条件的方式是否可以实现我的任务？以及如何使用 NSdate 完成这个全球性的事情？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T06:48:59.310

您可以使用静态变量创建类方法：

。H

```
@interface YourClass : NSObject

@property (nonatomic, strong, readonly) NSDate *storedTime;

@end 
```

.m

```
#import "YourClass.h"

@interface YourClass()
    @property (nonatomic, strong, readwrite) NSDate *storedTime;
@end

@implementation YourClass

static NSDate *_storedTime;

@synthesize storedTime;

- (NSDate *)storedTime {
    if (!_storedTime) {
        _storedTime = [NSDate date];
    }

    if ([_storedTime timeIntervalSinceNow] < -30.0f) {
        //Do you stuff...
        _storedTime = [NSDate date];
    }

    return _storedTime;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T04:48:36.017

这是存储全局变量的非常基本的想法 -

在 .h 文件中

```
extern NSDate myDate; 
```

在 .m 文件中

```
NSDate myDate = XXXX; //where XXXX is the value you need 
```

# winforms - 带参数的 C++ 构造函数不会初始化，错误 C2059 和 C2228

> ID：10867887
> 
> 赞同：1
> 
> 时间：2012-06-03T04:26:38.820
> 
> 标签：winforms, parameters, constructor, c++-cli

我是一名 C# 程序员，试图通过 C++ 创建 Windows 窗体应用程序。
我有一个使用用户创建的类的 Windows 窗体。基本上我正在尝试使用一个带参数的构造函数，但是我的表单不允许我用参数初始化对象。这是代码，希望有人可以向我解释这个问题，因为我完全感到困惑......

这是我的头文件：BankAcct.h

```
public ref class BankAcct
{
    private:
        int money;

    public:
        BankAcct();
        BankAcct(int);
        void Deposit(int);
        void GetBalance(int&);
}; 
```

还有我的定义文件：BankAcct.cpp

```
#include "StdAfx.h"
#include "BankAcct.h"

BankAcct::BankAcct()
{
    money = 0;  
}
BankAcct::BankAcct(int startAmt)
{
    money = startAmt;
}
void BankAcct::Deposit(int depAmt)
{
    money += depAmt;
}
void BankAcct::GetBalance(int& balance)
{
    balance = money;
} 
```

最后是我的主要形式。当然，不会复制整个内容，但我正在尝试声明新的银行帐户对象，并以 50 美元的余额开始。

```
private:
    BankAcct myAccount(50);    //does not work!  WHY??

//private:
  //BankAcct myAccount;    //works 
```

然后在表单构造函数中我的代码是这样的：

```
public:
    frmBank(void)
    {
        InitializeComponent();
        int bal;
        myAccount.GetBalance(bal);
        lblBankBalance->Text += Convert::ToString(bal);
    } 
```

我已经在我的 frmBank.h 顶部包含了 BankAcct.h 文件，我在这里做错了什么？如果我使用默认构造函数（将银行余额从零开始的构造函数），效果会很好。我收到以下错误消息：

错误 C2059：语法错误：“常量”

和

错误 C2228：“.GetBalance”左侧必须有类/结构/联合

感谢您对此提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T04:30:17.730

C# 风格的初始化在 C++ 中不起作用。您需要将初始化程序放在构造函数的初始化部分（即在构造函数`:`的左大括号之间`{`：

```
public:
    MyForm() : myAccount(50) {
        // Your constructor
    }
private:
    BankAcct myAccount; 
```

您现在拥有的方式`myAccount`未定义为`BankAcct`，因此调用`GetBalance`也不编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T04:33:50.013

一种简单的解决方法：

```
private:
    BankAcct *myAccount; // Make this a pointer 
```

... 然后 ...

```
frmBank(void)
{
    InitializeComponent();
    myAccount = new BankAcct(50);
    int bal = myAccount->GetBalance(bal);
    lblBankBalance->Text += Convert::ToString(bal); 
```

还有其他方法。但我认为显式创建“myAccount”对象可以说是最清晰和最简单的。恕我直言...

# groovy - 为什么 DataFlow 变量只能分配一次

> ID：10867888
> 
> 赞同：2
> 
> 时间：2012-06-03T04:27:24.860
> 
> 标签：groovy, concurrency, dataflow, gpars

这些天我正在探索 GPars（Groovy 并行系统）库，我遇到了 DataFlow 变量。文档说数据流变量只能分配一次。但是我找不到这个限制的原因。

有人能告诉我为什么 GPars 中的数据流变量只分配一次吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:25:44.683

在数据流编程中，变量是一次性写入的，这就是它们同步使用（消耗）其值的代码的方式——正是这种数据流指导执行。

一本关于一般编程和特别是数据流并发的好书是[计算机编程的概念、技术和模型](http://www.info.ucl.ac.be/~pvr/book.html)，您可以在其中了解更多关于数据流同步变量的使用方式（使用 Oz 语言）。

另一方面，如果你可以为一个变量分配多个值，那么每次写入值时，都应该通知它的消费者——这听起来更像是消息传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-15T16:39:13.467

由于 DataflowVariable 永远无法更改它的值，因此您不能在其上设置任何竞争条件。您甚至可以进行非阻塞写入，因此设计上非常高效且无死锁。在初始分配之后，您甚至可以进行非阻塞读取。

# mysql - MYSQL 触发器选择和更新同一个表给出错误 #1241 - 操作数应包含 1 列

> ID：10867899
> 
> 赞同：3
> 
> 时间：2012-06-03T04:29:26.590
> 
> 标签：mysql, sql, triggers, mysql-error-1241

当我尝试选择和更新同一个表时，mysql给出错误

```
error
#1241 - Operand should contain 1 column(s) 
```

触发器是

```
DELIMITER $$
CREATE TRIGGER visitor_validation
BEFORE INSERT ON ratingsvisitors
FOR EACH ROW
BEGIN
SET @ifexists = (SELECT * FROM ratingcounttracks WHERE userid=New.vistorid AND likedate=New.likevalidation AND countfor=New.likeordislike);
IF (@ifexists = NULL) THEN
INSERT INTO  ratingcounttracks(userid, likedate, clickcount,countfor) values (New.vistorid, New.likevalidation ,'1',New.likeordislike);
ELSE
UPDATE ratingcounttracks SET clickcount=clickcount+1 WHERE userid=New.vistorid AND likedate=New.likevalidation AND countfor=New.likeordislike;
END IF;
END$$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T04:32:59.157

问题是您将*多个*列 ( `SELECT * FROM ...`) 选择到*单个*变量 ( `@ifexists`) 中。

解决方案是*不*使用变量！只需使用普通 SQL `IF NOT EXISTS (...)`：

```
DELIMITER $$
CREATE TRIGGER visitor_validation
BEFORE INSERT ON ratingsvisitors
FOR EACH ROW
BEGIN
IF NOT EXISTS (SELECT * FROM ratingcounttracks WHERE userid=New.vistorid AND likedate=New.likevalidation AND countfor=New.likeordislike) THEN
    INSERT INTO  ratingcounttracks(userid, likedate, clickcount,countfor) values (New.vistorid, New.likevalidation ,'1',New.likeordislike);
ELSE
    UPDATE ratingcounttracks SET clickcount=clickcount+1 WHERE userid=New.vistorid AND likedate=New.likevalidation AND countfor=New.likeordislike;
END IF;
END$$ 
```

# python - Twisted Socket 端口和类

> ID：10867905
> 
> 赞同：0
> 
> 时间：2012-06-03T04:30:28.837
> 
> 标签：python, ios, sockets, twisted

我正在开发一个与 Twisted 套接字交互以允许在线游戏的二十一点 iPhone 应用程序。我目前的问题是找到正确的端口。让我解释。

我创建了一个名为“Table”的类。它保存像二十一点牌桌一样的信息，如位置、玩家和牌组。一张表分配给一个Twisted socket，一个socket分配给一个端口。现在，我只测试端口 1025-1034。

我想要发生的是应用程序请求按端口升序获取每张桌子上的玩家数量。为了测试，我只允许 1 个用户在一张桌子旁。如果有 1 个用户在一张桌子旁，我希望套接字返回 Table_Not_Found，但是，即使用户在一张桌子旁，套接字也会返回一个人所在的端口，而不是下一个没有人的端口。

我不认为我在使用 Table 类做正确的事情并搜索打开的表。如何找到正确的端口？应用程序连接到一个端口，如果该端口被占用，则返回 Table_Not_Found，然后应用程序请求下一个可用端口。但在我的情况下，套接字总是返回所占用的端口。我只能用我的 iMac 和 MacBook 进行测试，因为它们是客户端。

底线，我如何在端口上搜索可用的表？

谢谢！

```
class Table:
    def __init__(self):
        self.players = []
        self.positions = []
        self.id = 0
        self.numberOfPlayers = 0

    def setID(self, _id):
        self.id = _id

    def setActivePlayer(self, player):
        player.countdown = 20
        while player.count > 0:
            print player.countdown
            time.sleep(1)
            player.countdown -= 1

            if player.countdown == 0:
                print "Out of time"

                moves.surrender(player)

class Socket(Protocol):
    table = Table()

    def connectionMade(self):
        #self.transport.write("""connected""")
        self.factory.clients.append(self)
        print "Clients are ", self.factory.clients

    def connectionLost(self, reason):
        self.factory.clients.remove(self)

    def dataReceived(self, data):
        #print "data is ", data
        a = data.split(':')
        if len(a) > 1:
            command = a[0]
            content = a[1]

            b = content.split(';')
            _UDID = b[0].replace('\n', '')

            if command == "Number_of_Players":
                if Socket.table.numberOfPlayers == 0:
                    msg = "%s:TableFound" % _UDID
                elif Socket.table.numberOfPlayers == 1:
                    msg = "%s:Table_Not_Found" % _UDID

        print msg

        for c in self.factory.clients:
                c.message(msg)

    def message(self, message):
        self.transport.write(message)

NUM_TABLES = 10

factories = [ ]
for i in range(0, NUM_TABLES):
    print i
    factory = Factory()
    factory.protocol = Socket
    factory.clients = []
    factories.append(factory)
    reactor.listenTCP(1025+i, factory)
    #print "Blackjack server started"

reactor.run() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T20:58:13.037

您遇到的主要问题是`table = Table()`在您的套接字类中。这意味着对于所有`Socket`实例，只有一个`Table`.

快速解决方法是将每个存储`Table`在一个上，`Factory`以便所有到那个的连接`Factory`（即侦听 TCP 端口）将共享一个`Table`实例。

这可以通过删除`table = Table()`行来完成，然后`for`像这样修改循环：

```
for i in range(0, NUM_TABLES):
    print i
    factory = Factory()
    factory.table = Table() # <-- add this line
    factory.protocol = Socket
    factory.clients = []
    factories.append(factory)
    reactor.listenTCP(1025+i, factory) 
```

然后调整你`connectionMade`的开始是这样的：

```
def connectionMade(self):
    self.table = self.factory.table 
```

现在每个`Socket`都指向它`Factory`的`Table`.

但是，此代码还有许多其他严重问题：

*   您不需要也不应该为此协议使用多个端口。每个新连接都应该显示出来，并通过协议本身的消息识别它想要玩的二十一点游戏。在多个端口上工作只会让人们更难通过防火墙来玩你的游戏。您可以使用相同的策略，只需在适当的实例上设置`table`属性。`Socket`

*   您期望`dataReceived`收到完整的消息。 [不会的，这是您应该在 Twisted 文档中阅读的常见问题解答。](http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#Whyisprotocol.dataReceivedcalledwithonlypartofthedataIcalledtransport.writewith) 或者更确切地说，它将是在您进行测试时，而不是在您部署到真正的互联网时。如果你在做 iPhone 开发，你应该使用 Network Link Conditioner 来模拟真实的互联网连接。

*   由于您似乎不知道网络协议解析是如何工作的，因此您应该使用[协议构建工具包`AMP`](http://amp-protocol.net/)来构建您的有线协议。 [API 文档包括一个简短的教程。](http://twistedmatrix.com/documents/current/api/twisted.protocols.amp.html)

*   你在打电话`time.sleep`。这将阻止整个服务器。这是构建时间敏感的 Twisted 服务的错​​误方法。更重要的是，Twisted 在等待您`time.sleep`完成时不会处理输入，因此每个玩家总是会立即投降，而不是能够打出任何牌。您应该[`callLater`](http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IReactorTime.html#callLater)改用，来安排改变游戏状态的定时调用。

*您遇到的大多数*问题都是对象组合问题，而不是 Twisted 或 Python 所特有的问题。您需要为自己绘制一张地图，说明哪些实例应该指向哪些其他事物。要理解的重要一点是，当您像`listenTCP`or一样对反应器进行调用时`callLater`，您正在设置的是从反应器到您的对象的引用。它没有什么神奇之处。你只是说“稍后，在这种情况下，在这个对象上调用这个方法”。一切都从那里流出；你的套接字引用了你的桌子，你的桌子引用了他们的玩家，等等。

# dns - 如何使用域名而不是 localhost 访问我的网站？

> ID：10867907
> 
> 赞同：1
> 
> 时间：2012-06-03T04:31:29.307
> 
> 标签：dns, localhost

更具体地说，我有一个名为 koyn 的网站。这是域[http://koyn.net](http://koyn.net)。该网站托管在我的计算机上用于测试目的。我设置了端口转发并将域名指向我的计算机。一切正常，因为当我将链接提供给人们时，他们可以很好地看到我的网站，但这是我的问题。当我在我的网络上的计算机上访问我自己的访问时，它会将我定向到我的路由器设置。我必须输入

```
http://localhost 
```

在我的地址栏中访问我的网站。我不想输入 localhost 我想像其他人一样使用 koyn.net 访问我的网站。我怎样才能做到这一点？先谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T04:39:42.180

如果你在 windows 上，你需要编辑 hosts 文件，所以当你输入 koyn.net 时，它会重新路由到 localhost。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T03:46:16.480

编辑您的主机文件

主机文件的 Windows 默认位置：`C:\Windows\System32\drivers\etc`

以**管理员身份用****记事本**打开

 **所有操作系统都会有一个主机文件，如我的示例：

```
127.0.0.1 localhost
123.45.67.89 www.example.com
#98.76.54.32 www.anotherexample.com 
```

更多：[https ://www.youtube.com/watch?v=7e2MmyPvnhs](https://www.youtube.com/watch?v=7e2MmyPvnhs)

通过命令保存并刷新您的**dns后：**

```
ipconfig /flushdns 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T04:40:19.033

我假设你已经删除了你的端口转发。您是否尝试过清理浏览器缓存？另一种选择，假设您在 Windows 机器上，使用以下命令刷新您的 DNS：

ipconfig /flushdns**

# iphone - 当我想滚动它时 UITableView 的奇怪情况

> ID：10867910
> 
> 赞同：0
> 
> 时间：2012-06-03T04:32:13.767
> 
> 标签：iphone, scroll, tableview

我正在构建一个简单的聊天应用程序，每次我输入一个句子时，这些句子都会被添加到一个数组中（用于在**cellForRowAtIndexPath**委托方法中加载表格视图），然后我重新加载表格视图。最后我使用以下代码将表格视图滚动到底部

```
if ([self.chatList numberOfRowsInSection:0] != 0) {
        NSUInteger rowCount = [self.chatArray count];
        NSIndexPath* indexPath = [NSIndexPath indexPathForRow:rowCount-1 inSection:0];
        [self.chatList scrollToRowAtIndexPath:indexPath 
                         atScrollPosition:UITableViewScrollPositionTop animated:YES];
} 
```

但是，表格视图有时表现不错，有时只能滚动到倒数第二行……</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T06:23:21.880

尝试将 更改`scrollPosition`为`UITableViewScrollPositionBottom`。

# java - 在 Eclipse 4.2 上安装 WindowBuilder

> ID：10867920
> 
> 赞同：21
> 
> 时间：2012-06-03T04:34:08.030
> 
> 标签：java, eclipse, plugins, installation, windowbuilder

我正在使用从[这里](http://www.eclipse.org/downloads/packages/eclipse-classic-42-rc2/junorc2)下载的 Eclipse Juno 4.2 。

在以前的安装中，我一直在使用 3.7，并且一直在使用 WindowBuilder，我发现它非常有用。我注意到这次没有包含它，所以我使用了[此页面](http://www.eclipse.org/windowbuilder/download.php)上提供的[更新站点](http://download.eclipse.org/windowbuilder/WB/integration/4.2/)（zip 文件下载给出了“文件不可用”错误）。

但是，当我运行安装时，它迅速攀升至 28%，然后冻结。半小时后，我收到一个很长的错误，其消息以以下文本开头：

> 收集要安装的项目时发生错误会话
> 
> 上下文是：（profile=epp.package.java，phase=org.eclipse.equinox.internal.p2.engine.phases.Collect，operand=，action=）。
> 
> 下载时出现多个问题。无法在[http://download.eclipse.org/windowbuilder/WB/integration/4.2/plugins/org.eclipse.wb.core_1.5.0.r42x201205291332.jar.pack.gz](http://download.eclipse.org/windowbuilder/WB/integration/4.2/plugins/org.eclipse.wb.core_1.5.0.r42x201205291332.jar.pack.gz)读取存储库。

（[全文](http://pastebin.com/JCVpqjcb)）

有谁知道我该如何安装它？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-03T05:48:45.967

[在http://download.eclipse.org/releases/juno/](http://download.eclipse.org/releases/juno/)尝试 juno 存储库。

在 Eclipse 中：

1.  转到 - 菜单 > 帮助 > 安装新软件...
2.  选择 - 使用：Juno - [http://download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno)
3.  WindowBuilder 项目位于“通用工具”下（或使用过滤器）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-28T18:06:09.580

从此链接[http://download.eclipse.org/windowbuilder/WB/release/R201209281200/4.2/](http://download.eclipse.org/windowbuilder/WB/release/R201209281200/4.2/)安装 WindowBuilder - 只需添加一个新的更新站点。

其他版本：Eclipse 4.3 (Kepler) - [http://download.eclipse.org/windowbuilder/WB/integration/4.3/](http://download.eclipse.org/windowbuilder/WB/integration/4.3/) Eclipse 3.8 (Juno) - [http://download.eclipse.org/windowbuilder/WB/release/R201302221200 /3.8/](http://download.eclipse.org/windowbuilder/WB/release/R201302221200/3.8/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-06T15:59:10.957

对于 Juno，我从以下网址下载了存档更新站点：[http ://eclipse.org/downloads/download.php?file=/windowbuilder/WB/release/R201306261200/WB_v1.6.0_UpdateSite_for_Eclipse4.2.zip](http://eclipse.org/downloads/download.php?file=/windowbuilder/WB/release/R201306261200/WB_v1.6.0_UpdateSite_for_Eclipse4.2.zip)

然后我将该站点作为存档添加到 eclipse 并安装了组件就好了。由于某种原因，设置代理后更新 URL 对我不起作用。希望这可以帮助！

# jquery - 在列表的顶部和底部进行两个页面导航

> ID：10867921
> 
> 赞同：0
> 
> 时间：2012-06-03T04:34:34.467
> 
> 标签：jquery, html, internet-explorer

我正在创建一个简单的 PHP 页面，该页面读取 CSV 文件内容并**在页面中**向用户显示一些选定的列 目前，我正在读取每一行并立即显示它。由于这种方法，我只知道读完整个文件后的总行数（也在文件中搜索）。我想要的是在列表的顶部和底部显示两个页面导航。像这样：

第 1|2|3|4 页

* * *

## 字段 1|字段 2|字段 3|字段 4|字段 5....|字段 n

第 1 行

第 2 行

……

罗恩

* * *

第 1|2|3|4 页

显示所有行后，底部页面导航，我使用 jquery 函数： insertBefore 将另一个页面导航插入顶部。

问题是：

1) IE8 中不显示首页导航，但按 F5 后显示（在 FF、Chrome 中工作）。

2) 使用 insertBefore 函数，在显示底部导航后，顶部导航突然弹出。看起来不自然

有什么建议吗？

源代码：

为了简单起见，我重写了这两个简单的源文件。
-FileList.php：列出所有 csv 文件 -DisplayInList.php
：显示 CSV 文件内容

顺便说一句：我已经通过更改 FileList.php 中的 jquery 代码解决了这个问题

```
 FileList.php
            <?php
                    echo "<script type=\"text/javascript\">\n";
                    echo "$(document).ready(function(){\n";
                    echo "$('a[name=dlink]').click(function(e) {\n";
                    echo "    e.preventDefault();\n";
                    echo "    var href = $(this).attr('href');\n";
                    echo "    $.post('DisplayInList.php',{href:href}, function(response)\n";
                    echo "     list_window = window.open()\n";
                    echo "     list_window.document.write(response);\n";
                    echo "     list_window.focus();\n";
                    echo "     list_window.document.close();\n";
                    echo "    });\n";
                    echo " });\n";
                    echo "});\n";
                    echo "</script>\n";

                    //add CSV file link here
                    foreach($file_list as $f){
                        $display_name = "WHATEVER";
                        echo "<TR><TD><a name=\"dlink\" href=",pathinfo($f,PATHINFO_FILENAME),">",$disp_name,"</a></TD>\n";
                    }
            ?>

            DisplayInList.php

            <?php
                echo "<div id=\"paging_tag\"></div>\n";
                if (($handle = fopen($csv_file, "r")) !== FALSE){
                    $display_cnt = 0;
                    while (($line = fgetcsv($handle, 10000, ",")) !== FALSE){
                        $found = {Check search conditions};
                        if ( $found == true ){
                            $display_cnt++;
                            //Display line to client
                            echo "Selected fields of a csv line to user";
                        }
                    }
                    fclose($handle);
                }

                if ( $display_cnt > 0 ){
                    echo "<p id=\"paging\"><span>PREVIOUS</span> Page 1 | Page 2 | Page 3<span>NEXT</span></p>";
                }

                echo "<script type=\"text/javascript\">\n";
                echo "$('#paging')\n";
                echo "          .insertBefore('#paging_tag');\n";
                echo "</script>";
            ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T07:21:09.010

使用 js 构建 UI 是最不优先的方法。只要可以使用服务器端和 HTML/CSS 方法，就避免使用 javascript。

我建议使用 PHP，例如：

```
$pagerHtml = 'do some code here';
print $pagerHtml; //the first place on top
/*
...
output HTML between the two pager lines
...
*/
print $pagerHtml //the bottom pager line 
```

# php - 如何制作循环赛？或者除了Round Robin之外还有更简单的方法吗？

> ID：10867922
> 
> 赞同：1
> 
> 时间：2012-06-03T04:34:42.940
> 
> 标签：php, mysql

我面临的问题是，如果出现如下示例的问题，该***怎么办：***

代码 1000、2000、3000、4000、5000

编号 1、2、3

=========================================

这个：

**ID 号 1 的代码为 1000、2000、3000、4000**

**ID 号 2 的代码为 2000、4000、3000**

**ID 号 3 的代码为 3000、4000、5000**

=========================================

当所有字段都连接起来时，每个 ID 都找到了相同的代码。从上面的例子中，我想产生公平的结果，并调整到它之前在每个 ID 上的代码如下：（在一组 ID 上产生公平的代码）

=========================================

成为：

**ID 号 1 的代码为 1000、2000**（1000 必须在数字 1 上，因为只有它比其他的有）

**ID 号 2 的代码为 3000、4000**

**ID 号 3 的代码为 5000**（5000 必须在数字 3 上，因为只有它比其他的有）

=========================================

有人说使用**Round Robin**，但我以前从未听说过 Round Robin ，也不知道如何使用它，头脑一片空白。有没有另一种更简单的方法，比如使用 PHP 可能是什么？我迷路了。

谢谢。

==================================================== ===========

**说明**：

我正在制作一个应用程序，其中每个用户都有一个预定义的代码并且没有相同的代码。例如，用户 A 的代码范围在 1000-1500 之间，用户 B 的代码范围在 1600 到 2000 之间。用户 C 的代码范围在 1300-1550 之间。正如我们所见，A 上的代码中包含的 C 上的代码的距离（A -> 1000-1500，C -> 1300-1550）肯定会在两个用户之间重复。有了这个条件，如何将其分离和划分以使其更加公平。让 C 有 1300，A 有 1301，C 有 1302 等等，直到 1500。

我以为我之前给出的简单示例可以很好地理解，但它似乎一团糟，我的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T05:05:22.570

```
$codes = array(1000, 2000, 3000, 4000, 5000);

// set up the receiving "containers"
$ids = array(
  array(),
  array(),
  array(),
);

$n_ids = count($ids);
$i = 0;

foreach ($codes as $code) {
    // use ($i % $n_ids) to distribute over $n_ids containers
    $ids[$i % $n_ids][] = $code;
    ++$i;
}

print_r($ids); 
```

输出：

```
Array
(
    [0] => Array
        (
            [0] => 1000
            [1] => 4000
        )

    [1] => Array
        (
            [0] => 2000
            [1] => 5000
        )

    [2] => Array
        (
            [0] => 3000
        )

) 
```

这个问题是一个简单的分发任务：在 M 个容器上分发 N 个项目。

对于每个`i`(0 <= `i`< `N`)，您选择一个容器来放入项目`N[i]`；选择是通过使用以下表达式完成的：（`i mod M`模`i`数`M`）。

这个表达式就是你可以称之为循环的，因为它是这样循环的：

```
i    :  0  1  2  3  4
i % M:  0  1  2  0  1 
```

## 甚至更快

该`array_chunk`函数也执行此任务，但我认为您想先了解问题。此外，`array_chunk`会产生一些不同的结果。

```
$ids = array_chunk(array(1000, 2000, 3000, 4000, 5000), round(count($codes) / 3)); 
```

输出：

```
Array
(
    [0] => Array
        (
            [0] => 1000
            [1] => 2000
        )

    [1] => Array
        (
            [0] => 3000
            [1] => 4000
        )

    [2] => Array
        (
            [0] => 5000
        )

) 
```

# mysql - 在 MySQL 查询中连接两个表

> ID：10867925
> 
> 赞同：2
> 
> 时间：2012-06-03T04:35:43.707
> 
> 标签：mysql, join

我是 PHP 和 MySQL 的新手，我无法理解`JOIN`。我认为，对我来说，问题在于实际理解查询的逻辑。我要做的是从名为“post”的表中选择所有状态更新，但只选择来自我“关注”的用户的状态更新，然后按日期顺序显示它们。所以，我有两个数据库，它们是这样设置的：

帖子

```
|post_id|user_id|post_body|date_upload|
|   1   |    4  | hey.    | 01/2/2012 | 
```

跟随

```
|relation_id|user_id|followee_id|
|   1       |    4  |     2     | 
```

有人可以解释一下我应该如何在语法和逻辑上进行设置吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T04:44:24.783

我想你会发现这会起作用：

```
SELECT
  p.post_id, 
  p.user_id,
  p.post_body,
  p.date_upload
FROM
  posts p,
  follows f
WHERE
  f.user_id = 4 
    AND
  f.followee_id = p.user_id
ORDER BY
  p.date_upload DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T04:42:14.137

尝试这个

```
select posts.* 
from posts 
        join follows on (follows.user_id = posts.user_id) 
where followee_id = xxxx 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-23T09:25:53.973

**客户“表”**

```
CustomerID           CustomerName

1                    Alfreds Futterkiste

2                   Ana Trujillo Emparedados y helados

3                   Antonio Moreno Taquería 
```

**“订单”表：**

```
OrderID           CustomerID

10308                2

10309                37

10310                77 
```

***********************回答*******************

```
SELECT Customers.CustomerName, Orders.OrderID
FROM Customers
FULL OUTER JOIN Orders
ON Customers.CustomerID=Orders.CustomerID
ORDER BY Customers.CustomerName; 
```

客户名称 OrderID

Alfreds Futterkiste -

Ana Trujillo Emparedados y helados 10308

安东尼奥莫雷诺Taquería 10365

```
 -                               10382

         -                               10351 
```

# javascript - 我的 JS 数组 undefined x 7 的问题

> ID：10867928
> 
> 赞同：2
> 
> 时间：2012-06-03T04:36:15.330
> 
> 标签：javascript

我有一个数组，我试图循环创建一种特定于我当前页面的新型数组。

我的数组如下所示：

```
 //$_SESSION['data'] =
 Array ( 
        [0] => 1 
        [1] => 0 
        [2] => Tom 
        [8] => 1 
        [4] => 1 
        [5] => Array ( 
                        [7] => Array ( 
                                    [0] => Andrew 
                                    [1] => 1 
                                    [2] => 1 
                                    [4] => 0 
                                    [5] => avatar.jpg 
                                    [6] => 1 
                                    ) 
                    ) 
        [6] => Array ( [0] => 1 
                       [1] => 2 
                     ) 
 ) 
```

所以在我的 JS 文件中我有这个：

```
var stats = <? echo json_encode($_SESSION['data'][5]); ?> ; //this is the array 

my_data = new Array();
for(var key in stats){

    if(key in my_data){} else { //prevent double entry

    my_data[key] = new Array();
    my_data[key][0] = stats[key][6]; 
    my_data[key][1] = stats[key][5];
    my_data[key][2] = stats[key][2]; 
    my_data[key][3] = stats[key][0];
    }
}

console.log(my_data); 
```

现在在 console.log 我得到这个：

```
[undefined × 7, Array[4]
 0: "1"
 1: "avatar.jpg"
 2: "1"
 3: "Andrew"
 length: 4
 __proto__: Array[0]
 ] 
```

我想知道为什么它说未定义的x7？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T04:57:08.600

为什么不使用 JSON？

```
var stats = <? echo json_encode($_SESSION['data'][5]); ?> ; 
```

你现在可以正常迭代了。

```
for (x in stats){
     console.log(stats[x]);
} 
```

* * *

**更新**

是的，你会得到'x7 undefined'。这是因为您直接设置了 js 数组中的第 8 个条目。（for循环迭代中的key == 7）前7个条目本质上是未定义的。

如果要使用前几个索引，请使用`array.push(..)`或手动设置最后一个索引`array[array.length] = new_object;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T05:15:55.060

首先尝试将您的对象序列化为 JSON：

```
var stats = <? echo json_encode($_SESSION['data'][5]); ?> ; 
```

接着...

问题是因为您想创建一个包含 7 个键的数组。例如：

```
var boo = [];
boo[7] = new Array(); 
```

因此 JavaScript 将创建一个包含 7 个部分的数组，然后您将拥有一个包含 7 个`undefined`值的数组！

实际上你需要一个`object`not `array`。

试试这个代码：

```
my_data = {};
for(var key in stats){

   if(!my_data[key]) { //prevent double entry
        my_data[key] = [];
        my_data[key][0] = stats[key][6]; 
        my_data[key][1] = stats[key][5];
        my_data[key][2] = stats[key][2]; 
        my_data[key][3] = stats[key][0];
   } 
}

console.log(my_data); 
```

我只是将`my_data`from更改`array`为`object`.

# javascript - Javascript - 如何使用基于网站上像素颜色的画布创建图像？

> ID：10867939
> 
> 赞同：0
> 
> 时间：2012-06-03T04:40:29.340
> 
> 标签：javascript, html, css

我有一个网站，其中有带有背景颜色的 div 标签，我使用相对定位将它们全部移动在一起，使其看起来像图像。我移动了它们，使其恰好位于页面的左上角。

如何从中创建图像，就像如果有一个按钮，当它被点击时，它会创建一个宽度为 608 像素和高度为 105 像素的图像，然后询问用户是否要保存或打开或关闭它它（标准下载框）？

我需要从索引（0,0）开始获取像素颜色，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T05:03:54.563

无需在 div 上使用背景图像，只需将图像绘制到画布上即可。然后看看这个[http://www.html5canvastutorials.com/advanced/html5-canvas-save-drawing-as-an-image/](http://www.html5canvastutorials.com/advanced/html5-canvas-save-drawing-as-an-image/)

# php - 打印工作和回声在php中不起作用

> ID：10867940
> 
> 赞同：2
> 
> 时间：2012-06-03T04:41:19.183
> 
> 标签：php

以下代码仅使用打印语句

```
 file_exists('index.php') || print "hi"; \\ works fine and prints hi

 file_exists('index.php') || echo "hi";  \\ error 
```

为什么`print`有效但`echo`导致解析错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T04:58:52.820

这是因为`echo`它是一种语言结构并且`print`是一个内置函数。

使用`echo`也比`print`出于同样的原因稍快，但在表达式中使用时会导致解析器错误。

另请参阅错误报告：[https ://bugs.php.net/bug.php?id=15866](https://bugs.php.net/bug.php?id=15866)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T04:45:18.160

我认为这是因为 print 返回一个布尔值，而 echo 什么都不返回，所以你不能在布尔表达式中使用。

[http://www.htmlite.com/php004.php](http://www.htmlite.com/php004.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T04:46:11.887

print 返回 1，表示真正的 echo 不返回任何内容。看起来您有一个 or 语句，它需要 file_exists 和输出才能返回 true。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T04:52:33.403

Echo 和 Print 看起来相似但略有不同

打印 - 1 个回声 - 无

在上面的语句中，如果文件存在，那么它什么也不显示

如果不存在，那么下一步是 OR Print ，Print 总是返回一个布尔值

# python - python中的大整数除法错误

> ID：10867942
> 
> 赞同：0
> 
> 时间：2012-06-03T04:41:28.990
> 
> 标签：python, largenumber

我正在用 Python 中的大整数进行一些计算，但得到了一些奇怪的结果。

```
>>> 94970389L * 94958913L / 775920493L
11622692L
>>> 94970389L * 94958913L
9018284906627157L
>>> 775920493L * 11622692L
9018284906627156L 
```

为什么第四行和第六行有区别？它应该是平等的。

我在 linux pc 32bits 上使用 Python 版本 2.7.3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T04:44:27.740

除法的余数是 1：

```
>>> 94970389L * 94958913L % 775920493L
1L 
```

请记住，Python 2.x 中两个整数的除法默认是整数除法，余数被丢弃。

# windows-phone-7 - eval算术表达式windows phone7？

> ID：10867944
> 
> 赞同：0
> 
> 时间：2012-06-03T04:41:57.437
> 
> 标签：windows-phone-7

WP7 是否有任何 API 可以在字符串中获取算术表达式并对其进行评估？

在谷歌上搜索它，但没有出现..

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T15:11:52.003

搜索“C# 从字符串解析算术”时，我发现了很多资源，[其中](http://www.codeproject.com/Articles/13779/The-expression-evaluator-revisited-Eval-function-i)最吸引我。我还没有尝试过，但我想它会在 WP7 上编译。

无论如何，总是有可能构建自己的解析器。[您可以使用表达式树来解决这个问题：在本文](http://math.hws.edu/javanotes/c9/s4.html)中阅读相关内容（向下滚动到表达式树部分）（在 Java 中，但很好地解释了这个概念，并且该语言与 C# 足够相似以便于理解）。

您还可以使用[Shutting Yard 算法](http://en.wikipedia.org/wiki/Shunting_yard_algorithm)，该算法使用堆栈来评估表达式。这只是我现在记得的两种方法，我相信还有更多。这比使用第三方库更难，但您可以根据自己的要求调整它们。

# macos - 试图在 OSX 上安装 git：cannont exec 'git-credential-osxkeychain': Permission denied`

> ID：10867946
> 
> 赞同：15
> 
> 时间：2012-06-03T04:42:27.440
> 
> 标签：macos, git, installation

我正在尝试在我的新 MBP 上安装 Git，并且正在关注文档 @ [https://help.github.com/articles/set-up-git](https://help.github.com/articles/set-up-git)。

我似乎在它说的地方遇到了障碍：`If you do not have the helper, you can download it and copy it to /usr/local/bin`

我在终端导航到 /usr/local/bin 并执行了 sudo wget [link to osxkeychain]。当我尝试做 a 时，`git config --global credential.helper osxkeychain`我得到一个`fatal: cannont exec 'git-credential-osxkeychain': Permission denied`.

我做错什么了？

谢谢！

特雷

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-13T17:52:43.800

将文件下载[`git-credential-osxkeychain`](http://github-media-downloads.s3.amazonaws.com/osx/git-credential-osxkeychain)到您的桌面（！）。
打开终端应用程序。
输入以下内容：

```
sudo cp  ~/Desktop/git-credential-osxkeychain /usr/local/bin/git-credential-osxkeychain  
sudo chmod 755 /usr/local/bin/git-credential-osxkeychain  
sudo git config --global credential.helper osxkeychain 
```

测试它：

```
sudo git credential-osxkeychain 
```

看到`sudo`前缀了吗？凭证的东西似乎需要它......现在应该输出`Usage: git credential-osxkeychain <get|store|erase>`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-03T04:45:07.937

使下载的文件可执行：

```
chmod 755 git-credential-osxkeychain 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T14:38:33.047

[Homebrew](https://brew.sh/)的 git 包设置了这个；只是：

`brew install git`

你走了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T04:48:52.307

试过sudo吗？

/usr/bin 受到保护。或者您可以尝试在笔记本电脑的某个位置下载 git 可执行文件并将该位置添加到您的 PATH 中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-06T20:14:24.987

开始使用 git 的人常犯的错误之一是他们的操作系统可执行文件错误。

请确保当您转到 git 帮助设置页面时单击正确的链接

例如以下链接具有 MAC | 视窗 | LINUX | 页面顶部的所有选项都小到可以被许多人忽略。

```
 https://help.github.com/articles/set-up-git 
```

这发生在我的许多团队成员为 ubuntu 安装 osx 并最终得到上述错误

# codeigniter - 在编辑页面中显示 db 数据

> ID：10867948
> 
> 赞同：0
> 
> 时间：2012-06-03T04:43:10.400
> 
> 标签：codeigniter

我正在使用**registered_member_data_edit**页面？

我的控制器功能是

```
function edit_profile()
    {
        $data['title']= 'Edit Profile';
        $member_id = $this->session->userdata('member_id');
        $this->load->model('user_model','',TRUE);
        $data['row'] = $this->user_model->edit_user($member_id)->result();
        $this->load->view('edit_profile.php', $this->data);
    } 
```

我的模型函数是

```
public function edit_user($member_id)
    {
            $this->db->select('fullname','country','district','address','nominee_name','nominee_relation','mobile_no','password','bank_acc_no','bank_acc_name','bank_name','branch_name');
            return $this->db->get_where('user', array('member_id'=> $member_id));
    } 
```

我的视图页面就像

```
<p><label>User Name</label>
    <input type="text" class="input-short" value="" /></p> 
```

我应该输入什么值以在编辑页面中显示数据库数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T06:13:20.697

```
public function edit_user($member_id)
    {
            $this->db->select('fullname','country','district','address','nominee_name','nominee_relation','mobile_no','password','bank_acc_no','bank_acc_name','bank_name','branch_name');
            return $this->db->get_where('user', array('member_id'=> $member_id));
    } 
```

这将返回您拥有的对象`$data['row']`以及您发送到查看文件的变量。

因此，在视图文件中，您可以使用`$row`.

所以从这里你有2个选择

1.  即使该函数仅返回 1 行，您也必须访问 using `foreach($row->result() as $_data)`，然后您可以像这样访问每一列`$_data->fullname`。
2.  您可以使用将该对象转换为数组，`$row = $row->result_array()`并且可以使用`$row[0]['fullname']`这样的方式访问数据库列。

好运。

# jquery - jquery fancybox 中的 AfterClose 事件

> ID：10867949
> 
> 赞同：0
> 
> 时间：2012-06-03T04:43:25.210
> 
> 标签：jquery, fancybox

我有一个包含`<img />`标签的 div。所有图片均可点击。我想知道`afterClose`触发事件时单击了哪个图像（id）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T04:51:02.603

将此作为该函数的一部分放在 afterClose 事件中， `$('#id of div that contains images').click(function(){var clickedwhat = $(this).val();});` 使 .val() 对图像有用，所以也许 .html()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T04:51:11.033

```
$('selector').find('img').each(function(i,e){
  $e = $(e);
  $e.on("click",function(){
    alert( $e.attr('id') );
  }
}); 
```

# r - 如何将结构化文本转换为 R 中的数据列？

> ID：10867952
> 
> 赞同：6
> 
> 时间：2012-06-03T04:43:50.843
> 
> 标签：r, dataframe

我有一个相当大的（1000 页）结构化文本列表，我想将其转换为数据框（最好使用 R，但我愿意接受建议）。

文本文件如下所示：

```
AC-Acrelândia
TV    Canal 18    AINDA NÃO OUTORGADO
RTV  Canal 9    RADIO TV DO AMAZONAS LTDA
RTV  Canal 10    RADIO TV DO AMAZONAS LTDA(REDENCAO)
TVD  Canal 15    RADIO TV DO AMAZONAS LTDA
TVD  Canal 15    AINDA NÃO OUTORGADO(REDENÇÃO)
FM   88,5 MHz   RADIO E TV MAIRA LTDA

AC-Assis Brasil
TV    Canal 34    AINDA NÃO OUTORGADO
RTV  Canal 6    AMAZONIA CABO LTDA
RTV  Canal 10    RADIO TV DO AMAZONAS LTDA
RTV  Canal 13    AINDA NÃO OUTORGADO
RTV  Canal 45    FUNDACAO JOAO PAULO II 
```

我想把它转换成这样的东西：

```
AC  Acrelândia    TV    Canal 18    AINDA NÃO OUTORGADO
AC  Acrelândia    RTV   Canal 9     RADIO TV DO AMAZONAS LTDA
AC  Acrelândia    RTV   Canal 10    RADIO TV DO AMAZONAS LTDA(REDENCAO)
.... 
```

看起来 readLines() 是一个好的开始，但我对这个结构有困难。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T06:23:47.223

## 至 CSV 文件

由于您对其他语言持开放态度，因此我建议使用 Python 解决方案。它会生成一个如下所示的 csv 文件：

```
"AC","Acrelândia","TV","Canal 18","AINDA NÃO OUTORGADO"
"AC","Acrelândia","RTV","Canal 9","RADIO TV DO AMAZONAS LTDA"
"AC","Acrelândia","RTV","Canal 10","RADIO TV DO AMAZONAS LTDA(REDENCAO)"
"AC","Acrelândia","TVD","Canal 15","RADIO TV DO AMAZONAS LTDA"
"AC","Acrelândia","TVD","Canal 15","AINDA NÃO OUTORGADO(REDENÇÃO)"
"AC","Acrelândia","FM","88,5 MHz","RADIO E TV MAIRA LTDA"
"AC","Assis Brasil","TV","Canal 34","AINDA NÃO OUTORGADO"
"AC","Assis Brasil","RTV","Canal 6","AMAZONIA CABO LTDA"
"AC","Assis Brasil","RTV","Canal 10","RADIO TV DO AMAZONAS LTDA"
"AC","Assis Brasil","RTV","Canal 13","AINDA NÃO OUTORGADO"
"AC","Assis Brasil","RTV","Canal 45","FUNDACAO JOAO PAULO II" 
```

## 编码

这有两个假设：(1) 文件中的第一行或空行之后的任何行是站名和 (2) 字段由两个或多个空格分隔

```
#-*- coding: utf-8 -*-

import re
import csv

# CREATE DATA STRUCTURE TO SIMULATE READING A TEXT FILE

data = u'''AC-Acrelândia
TV    Canal 18    AINDA NÃO OUTORGADO
RTV  Canal 9    RADIO TV DO AMAZONAS LTDA
RTV  Canal 10    RADIO TV DO AMAZONAS LTDA(REDENCAO)
TVD  Canal 15    RADIO TV DO AMAZONAS LTDA
TVD  Canal 15    AINDA NÃO OUTORGADO(REDENÇÃO)
FM   88,5 MHz   RADIO E TV MAIRA LTDA

AC-Assis Brasil
TV    Canal 34    AINDA NÃO OUTORGADO
RTV  Canal 6    AMAZONIA CABO LTDA
RTV  Canal 10    RADIO TV DO AMAZONAS LTDA
RTV  Canal 13    AINDA NÃO OUTORGADO
RTV  Canal 45    FUNDACAO JOAO PAULO II'''.split('\n')

def read_records():
    for line in data:
        yield line

# INITIALIZE SPLITTER, READ RECORDS AND WRITE TO CSV FILE

splitter = re.compile('\s{2,}')
change_station = True
station = ''

f = open('./output.csv', 'w')
writer = csv.writer(f, quoting=csv.QUOTE_ALL)

for rec in read_records():
    rec = rec.strip()
    if rec == '':
        change_station = True
    elif change_station == True:
        station = rec.replace('-', '  ')
        change_station = False
    else:
        record = station + '  ' + rec
        record = record.encode('utf-8')
        record = re.split(splitter, record)
        writer.writerow(record)

f.close()

# READ IN FILE AND PRINT TO CONSOLE FOR DEMO PURPOSES

f = open('./output.csv', 'r')
print ''.join( f.readlines() )
f.close() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T06:43:55.517

如果您乐于使用 Python，那么这将起作用（假设以制表符分隔的输出）：

```
import os

program = open('program', 'r')
new_prog = open('new_prog', 'w')

# Get initial state and city
state, city = program.readline().rstrip().split('-')

for line in program:
    # Blank lines denote city change
    if not line.strip():
        line = program.next()
        state, city = line.rstrip().split('-')
        line = program.next()

    band, cname, channel, show = line.rstrip().split(None, 3)

    new_line = '\t'.join([state, city, band, cname, channel, show, os.linesep])
    new_prog.write(new_line)

program.close()
new_prog.close() 
```

# android - Android：使用默认音乐播放器播放歌曲文件

> ID：10867957
> 
> 赞同：2
> 
> 时间：2012-06-03T04:44:55.857
> 
> 标签：android, android-mediaplayer, media

有没有办法使用默认媒体播放器播放媒体？我可以使用以下代码执行此操作：

```
 Intent intent = new Intent(Intent.ACTION_VIEW);
 MimeTypeMap mime = MimeTypeMap.getSingleton();
 String type = mime.getMimeTypeFromExtension("mp3");
 intent.setDataAndType(Uri.fromFile(new File(songPath.toString())), type);
 startActivity(intent); 
```

但这会启动一个控制较少的玩家，并且不能被推到后台。我可以使用默认媒体播放器启动播放器吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T04:46:12.883

试试下面的代码:::

```
 Intent intent = new Intent(MediaStore.INTENT_ACTION_MUSIC_PLAYER);  
   File file = new File(songPath.toString());  
   intent.setDataAndType(Uri.fromFile(file), "audio/*");  
   startActivity(intent); 
```

更新::也试试这个

```
 Intent intent = new Intent();  
   ComponentName comp = new ComponentName("com.android.music", "com.android.music.MediaPlaybackActivity");
   intent.setComponent(comp);
   intent.setAction(android.content.Intent.ACTION_VIEW);  
   File file = new File(songPath.toString());  
   intent.setDataAndType(Uri.fromFile(file), "audio/*");  
   startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-03T05:51:41.760

最近几天我一直在研究这个，因为我没有股票音乐播放器。似乎很悲惨，不能轻易做到。在查看了各种音乐应用程序的 AndroidManifest.xml 以寻找线索后，我偶然发现了 MediaStore.INTENT_ACTION_MEDIA_PLAY_FROM_SEARCH。

使用下面的方法，只要歌曲在 Android MediaStore 中，我就可以在后台启动三星音乐播放器。您可以指定艺术家、专辑或标题。此方法也适用于 Google Play 音乐，但不幸的是，即使是最新版本的库存 Android 播放器也没有此意图：

[https://github.com/android/platform_packages_apps_music/blob/master/AndroidManifest.xml](https://github.com/android/platform_packages_apps_music/blob/master/AndroidManifest.xml)

```
private boolean playSong(String search){
    try {
        Intent intent = new Intent();
        intent.setAction(MediaStore.INTENT_ACTION_MEDIA_PLAY_FROM_SEARCH);
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        intent.putExtra(SearchManager.QUERY, search);
        startActivity(intent);
        return true;
    } catch (Exception ex){
        ex.printStackTrace();
        // Try other methods here
        return false;
    }
} 
```

找到使用内容 URI 或 URL 的解决方案会很好，但此解决方案适用于我的应用程序。

# jquery - 如何使用 Jquery 遍历 dom

> ID：10867964
> 
> 赞同：1
> 
> 时间：2012-06-03T04:45:19.403
> 
> 标签：jquery

如果我有这个：

```
<h1>or if the title before doesn't exist then this title</h1>
<div>
  <h2>this title</h2>
  <span id="something">
    some other stuff
  </span>
  <span id="this">
    I am here
  </span>
</div>
<h2>Not this title</h2> 
```

据我了解`$(':header')`应该找到标题。我需要它从`$('#this')`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T04:46:17.297

这很可怕，但它是一个适用于任何嵌套级别的块：

```
var $this = $('#this');

$this.add($this.parents()).map(function() {
  return $(this).prevAll(':header').eq(0);
}).get().pop(); 
```

扩展：

```
$this.add(
  $this.parents()        // Adds $this's parents to the current selecor
).map(function() {       // Iterates over the selector
  return $(this)         // Returns each element's
    .prevAll(':header')  // Closest sibling header, vertically
    .eq(0);              // The first one
})
.get()                   // Gets the array from the jQuery object
.pop();                  // Trick for getting the last element 
```

**演示： http: [//jsfiddle.net/xtQ2M/5/](http://jsfiddle.net/xtQ2M/5/)**（尝试删除东西）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T05:11:20.827

```
var headers = $('#this')
        .prevAll(':header')  // all header within parent of `#this`
        .add($('#this')
                      .parent() // go to parent of `#this`
                       .prev(':header') // got the header out of `#this` parent
          );  // output [h1, h2]; 
```

**[演示](http://jsfiddle.net/JXPaM/2/)**

获取`h1`，使用`headers[0]`；

获取`h2`，使用`headers[1]`；

也可以使用

```
$('#this')
         .prevAll(':header')  // all header within parent of `#this`
         .add($('#this')
                        .parent() // go to parent of `#this`
                        .prev(':header') // got the header out of `#this` parent
          ).
          .eq(0); // output: h1, if you use .eq(2) will get h2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T05:34:41.293

如果您想在将来更改逻辑的某些部分，这似乎是一种非常易读的方法：

```
var target = $('#this'),
    closestHeader = target.siblings(':header');

while (!closestHeader.length) {
    target = target.parent();
    closestHeader = target.siblings(':header');
}
closestHeader = closestHeader[0]; 
```

注意：如果页面上绝对没有标题，这将卡住，因此您可能需要先添加一个检查。

## [看演示](http://jsfiddle.net/jNjZB/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T05:28:35.470

您应该能够使用`$(this).closest('h2');`或`$(this).closest('header');`很难用您的示例代码来判断。有关更多信息，请参阅[jQuery.closest()](http://api.jquery.com/closest/)。

# php - 在 Linux 中启动 Tomcat 服务器的 Apache PHP 脚本

> ID：10867965
> 
> 赞同：0
> 
> 时间：2012-06-03T04:45:43.510
> 
> 标签：php, tomcat, administration

我制作了一个 php 脚本来启动 Tomcat 服务器（catalina.sh start），这在 Linux 的命令行中运行良好。它使用不同的 ENV 集作为 ROOT 运行。

但是，我想从 Web 上做同样的事情，请注意，由于安全问题，这个脚本只能通过 localhost 访问（仅用于管理），所以我们解决了安全问题。

问题是，Tomcat 没有启动（我们可以从日志中确认，没有启动任何东西）。我们围绕 catalina.sh 编写了很多 Echo 代码，它提供了正确的 echo 输出。

我确信有更简单的方法可以做到这一点。有任何想法吗？

PHP 脚本执行以下操作：

1.  将目录更改为 th Tomcat Bin
2.  启动 Catalina.sh 脚本 vis startup.sh

命令行打印环境的输出：

```
 ORBIT_SOCKETDIR=/tmp/orbit-root
HOSTNAME=localhost.localdomain
SHELL=/bin/bash
TERM=xterm
HISTSIZE=1000
XDG_SESSION_COOKIE=c111d8f81ff89709b78252c50000000d-1338310776.433586-1797694621
GTK_RC_FILES=/etc/gtk/gtkrc:/root/.gtkrc-1.2-gnome2
WINDOWID=73400323
QTDIR=/usr/lib/qt-3.3
QTINC=/usr/lib/qt-3.3/include
USER=root
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=01;05;37;41:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lz=01;31:*.xz=01;31:*.bz2=01;31:*.tbz=01;31:*.tbz2=01;31:*.bz=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=01;36:*.au=01;36:*.flac=01;36:*.mid=01;36:*.midi=01;36:*.mka=01;36:*.mp3=01;36:*.mpc=01;36:*.ogg=01;36:*.ra=01;36:*.wav=01;36:*.axa=01;36:*.oga=01;36:*.spx=01;36:*.xspf=01;36:
SSH_AUTH_SOCK=/tmp/keyring-bsFAQz/socket.ssh
GNOME_KEYRING_SOCKET=/tmp/keyring-bsFAQz/socket
USERNAME=root
SESSION_MANAGER=local/unix:@/tmp/.ICE-unix/1788,unix/unix:/tmp/.ICE-unix/1788
PATH=/usr/lib/qt-3.3/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/bin:/bin:/root/bin
MAIL=/var/spool/mail/root
DESKTOP_SESSION=gnome
PWD=/programs/tomcat/bin
GDM_KEYBOARD_LAYOUT=us
GNOME_KEYRING_PID=1779
LANG=en_US.UTF-8
GDM_LANG=en_US.UTF-8
GDMSESSION=gnome
HISTCONTROL=ignoredups
SSH_ASKPASS=/usr/libexec/openssh/gnome-ssh-askpass
SHLVL=3
HOME=/root
GNOME_DESKTOP_SESSION_ID=this-is-deprecated
LOGNAME=root
QTLIB=/usr/lib/qt-3.3/lib
DBUS_SESSION_BUS_ADDRESS=unix:abstract=/tmp/dbus-9HtQtRhCr9,guid=e1755bf07ea8a916f0a4e3f70000001c
LESSOPEN=|/usr/bin/lesspipe.sh %s
WINDOWPATH=1
DISPLAY=:0.0
G_BROKEN_FILENAMES=1
COLORTERM=gnome-terminal
XAUTHORITY=/var/run/gdm/auth-for-root-IT2DiY/database
_=/usr/bin/printenv 

```

APACHE 打印环境的输出：

```
 TERM=xterm
PATH=/sbin:/usr/sbin:/bin:/usr/bin
PWD=/programs/tomcat/bin
LANG=C
SHLVL=4
_=/usr/bin/printenv 

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T07:11:16.450

尝试使用[exec()](http://php.net/manual/en/function.exec.php)

```
exec('full path to your script') 
```

# ruby-on-rails - Ruby On Rails ljust(5,'.') does not work

> ID：10867975
> 
> 赞同：0
> 
> 时间：2012-06-03T04:48:34.467
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, string

I'm trying to left justify a string in a rails view with a pad character.

The following doesn't work:

```
<%= menu_items.description.ljust(5,".")%> 
```

Neither does this:

```
<%= menu_items.description.to_s.ljust(5,".")%> 
```

Just to mess around and try to get something I found the following works.

```
<%= menu_items.description.length.to_s.ljust(5,".")%> 
```

It prints out the length converted to a string and appends the pad characters. What gives? How do I make the first snippet work?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T05:02:57.973

The following works because .length gives you a number, probably zero, and then adds ....

```
<%= menu_items.description.length.to_s.ljust(5,".")%> 
```

What do you get when you just do this:

```
<%= menu_items.description %> 
```

Look like menu_items is an array. Try this

```
<% menu_items.each do |menu_item| %>
  <%= menu_item.description.ljust(5,".") %>
<% end %> 
```

Also, if it is not an array, then the .. will be appended to make it a total length of 5\. If description is longer, it will do nothing.

# ruby-on-rails - 如何在 Rails 3.2.3 中使用分页？

> ID：10867977
> 
> 赞同：1
> 
> 时间：2012-06-03T04:48:41.117
> 
> 标签：ruby-on-rails, will-paginate

我是 RoR 的新手，我想在我的应用程序中包含分页。

执行此任务的最佳方法是什么？请给我建议。是否可以在 rails 3.2.3 中使用`will_paginate`gem ？

如果是，我应该包括哪种方法：

```
Post.where(:published => true).paginate(:page => params[:page]).order('id DESC')  

Post.page(params[:page]).order('created_at DESC') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T04:56:07.670

是的，可以`will_paginate`在 rails 3.2.3 应用程序中使用 gem。

代码将取决于每个操作将执行的内容。

下面的代码通常`#index`在你的`PostsController`.

```
@posts = Post.where(:published => true).paginate(:page => params[:page]).order('id DESC') 
```

因此，在您的`posts/index.html.erb`视图文件中，您可以使用以下代码来显示分页链接：

```
<%= will_paginate @posts %> 
```

# android - 如何半透明菜单android

> ID：10867978
> 
> 赞同：1
> 
> 时间：2012-06-03T04:48:49.017
> 
> 标签：android, menu

有人知道如何制作像这张照片这样的菜单吗？如果有任何教程或者你可以给我一个提示，我很感激。

![示例菜单](../Images/4573e1562639595650580c31535f19f4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T04:53:15.807

您可以创建自己的菜单类。这是已发布的文章和源代码的可下载链接。希望此链接对您有所帮助。

[http://www.codeproject.com/Articles/173121/Android-Menus-My-Way](http://www.codeproject.com/Articles/173121/Android-Menus-My-Way)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T05:07:53.943

这个菜单就像一个 i-phone ，你可以从这个[链接 1下载这个菜单的例子](https://github.com/AdilSoomro/Iphone-Tab-in-Android)

它看起来像下图

![在此处输入图像描述](../Images/827ee4a5aa2d0369cbfb618204326820.png)

考虑以下可能对您有帮助的链接

[链接 2](http://www.anddev.org/code-snippets-for-android-f33/iphone-tabs-for-android-t14678.html)

[链接 3](https://stackoverflow.com/a/7975255/1218762)

# ruby-on-rails - 尝试在 Rails 中上传文件的路由问题

> ID：10867980
> 
> 赞同：0
> 
> 时间：2012-06-03T04:49:31.933
> 
> 标签：ruby-on-rails, file-upload, routing

我正在尝试按照[http://bit.ly/JgJyV](http://bit.ly/JgJyV)和[http://bit.ly/LXZ44L](http://bit.ly/LXZ44L)的说明学习如何将数据文件上传到应用程序。

按照说明输入代码后，我打开浏览器并转到下面的链接。

端口 3000 上的 localhost URL：.../upload/index

路由错误 没有路由匹配 [GET] "/upload/index" 尝试运行 rake 路由以获取有关可用路由的更多信息。

我更新 config/routes.rb 为：

```
resources: upload 
```

重新访问端口 3000 上的 localhost URL：.../upload/index

未知操作 找不到 UploadController 的操作“显示”

在端口 3000 上尝试 localhost URL：.../upload 有效！我选择一个文件并单击上传按钮：

路由错误没有路由匹配 [POST] "/assets"

rake 路由返回：Steves-iMac:config steve$ rake routes upload_index GET /upload(.:format) upload#index

```
 POST   /upload(.:format)          upload#create 
```

new_upload GET /upload/new(.:format) 上传#new

edit_upload GET /upload/:id/edit(.:format) 上传#edit

```
 upload GET    /upload/:id(.:format)      upload#show

         PUT    /upload/:id(.:format)      upload#update

         DELETE /upload/:id(.:format)      upload#destroy 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-03T05:04:47.447

有广泛使用的红宝石可以做您想做的事情：[Paperclip](https://github.com/thoughtbot/paperclip)和[Carrierwave](https://github.com/jnicklas/carrierwave)。
那么，为什么要重新发明轮子呢？

# json - “error_subcode”是什么意思

> ID：10867981
> 
> 赞同：0
> 
> 时间：2012-06-03T04:49:53.663
> 
> 标签：json, facebook-graph-api

错误信息中的“error_subcode”是什么意思？

我们可以通过分析“error”和“error_subcode”来确定错误类型吗？

facebook对“error_subcode”有官方解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:01:34.040

如 Facebook 的旧存根中所述

> 除了人类可读的消息外，错误响应还包括`error_subcode`描述错误性质的信息。虽然您通常只能通过重新验证用户身份来响应这些错误，但您可以将这些子代码用于内部日志记录或更好地解释您要求用户再次登录的原因。可能的代码及其含义如下：

```
`error_subcode` Meaning
456  The session is malformed.
457  The session has an invalid origin.
458  The session is invalid, because the app is no longer installed.
459  The user has been checkpointed. The error_data will contain the URL the user needs to go to to clear the checkpoint.
460  The session is invalid likely because the user changed the password.
461  The session is invalid, because the user has reinstalled the app.
462  The session has a stale version.
463  The session has expired.
464  The session user is not confirmed.
465  The session user is invalid.
466  The session was explicitly invalidated through an API call.
467  The session is invalid, because the user logged out.
468  The session is invalid, because the user has not used the app for a long time. 
```

# ios - 带有 UIKit 的 Box2D - 身体物理

> ID：10867983
> 
> 赞同：0
> 
> 时间：2012-06-03T04:50:52.540
> 
> 标签：ios, uikit, box2d, box2d-iphone

我按照本教程介绍了如何将 Box2D 添加到我现有的基于 View 的应用程序中。 [http://www.cocoanetics.com/2010/05/physics-101-uikit-app-with-box2d-for-gravity/](http://www.cocoanetics.com/2010/05/physics-101-uikit-app-with-box2d-for-gravity/)

现在，当我的 body/UIButton 在屏幕的一半上方时，它会向上飞。当它向下一半时，它会向下飞行。物理学似乎也不是很现实。我按照教程中构建的方式构建了我的世界（进行了一些修改以使其与 Xcode 4.0 兼容）。计时器和身体创建也是如此。有谁知道怎么了？（如果您需要更多详细信息，请告诉我）

这是我的身体创建代码：

```
// Define the dynamic body.

b2BodyDef bodyDef;
bodyDef.type = b2_dynamicBody;

CGPoint p = physicalView.center;
CGPoint boxDimensions = CGPointMake(physicalView.bounds.size.width/PTM_RATIO/2.0,physicalView.bounds.size.height/PTM_RATIO/2.0);

bodyDef.position.Set(p.x/PTM_RATIO, (self.stage.frame.size.height - p.y)/PTM_RATIO);
bodyDef.userData = (__bridge void *)physicalView;

// Tell the physics world to create the body
b2Body *body = world->CreateBody(&bodyDef);

// Define another box shape for our dynamic body.
b2PolygonShape dynamicBox;

dynamicBox.SetAsBox(boxDimensions.x, boxDimensions.y);

// Define the dynamic body fixture.
b2FixtureDef fixtureDef;
fixtureDef.shape = &dynamicBox;
fixtureDef.density = 3.0f; // 0 is a ball, and 1 is a rock
fixtureDef.friction = 0.3f; // 0 is a lubercated ball, 1 is rough as sand paper
fixtureDef.restitution = 0.5f; // 0 is a lead ball, 1 is a super bouncy ball
body->CreateFixture(&fixtureDef); 
```

这是我设置世界的代码：

```
CGSize screenSize = self.stage.bounds.size;

screenSize.width = 368;
// Define the gravity vector.
b2Vec2 gravity;
gravity.Set(0.0f, -9.81f);

// Do we want to let bodies sleep?
// This will speed up the physics simulation
bool doSleep = false;

// Construct a world object, which will hold and simulate the rigid bodies.
world = new b2World(gravity);
world->SetAllowSleeping(doSleep);

world->SetContinuousPhysics(true);

// Define the ground body.
b2BodyDef groundBodyDef;
groundBodyDef.position.Set(0, 0); // bottom-left corner

// Call the body factory which allocates memory for the ground body
// from a pool and creates the ground box shape (also from a pool).
// The body is also added to the world.
b2Body* groundBody = world->CreateBody(&groundBodyDef);

// Define the ground box shape.
b2EdgeShape groundBox;

// bottom
groundBox.Set(b2Vec2(0,0), b2Vec2(screenSize.width/PTM_RATIO,0));
groundBody->CreateFixture(&groundBox, 0);

// top
groundBox.Set(b2Vec2(0,screenSize.height/PTM_RATIO), b2Vec2(screenSize.width/PTM_RATIO,screenSize.height/PTM_RATIO));
groundBody->CreateFixture(&groundBox, 0);

// left
groundBox.Set(b2Vec2(0,screenSize.height/PTM_RATIO), b2Vec2(0,0));
groundBody->CreateFixture(&groundBox, 0);

// right
groundBox.Set(b2Vec2(screenSize.width/PTM_RATIO,screenSize.height/PTM_RATIO), b2Vec2(screenSize.width/PTM_RATIO,0));
groundBody->CreateFixture(&groundBox, 0);

// a dynamic body reacts to forces right away
body->SetType(b2_dynamicBody);

// we abuse the tag property as pointer to the physical body
physicalView.tag = (int)body; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:30:27.297

问题是我有一个不可见的 UIView，它以编程方式弹出到视图中并开始与其他对象发生碰撞。

# python - Python IRC 机器人在 240 秒后超时

> ID：10867992
> 
> 赞同：2
> 
> 时间：2012-06-03T04:52:26.420
> 
> 标签：python, sockets, irc, bots

我正在尝试制作一个 IRC 机器人，但它在 240 秒后一直超时。我怎样才能解决这个问题？

```
import socket 
host = 'test'
port = 6667
channel = '#test'
nick = "test"
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((host, port))
s.send('NICK ' + str(nick) +  ' \n\r') 
s.send('USER v v v :v Script' + '\r\n')
s.send('JOIN '+channel+' \n\r')

while True:
    command = s.recv(4096)
    print command 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T05:57:59.493

您没有回复来自服务器的 ping 请求。

当您长时间空闲时，服务器认为连接已死，并发送ping请求，您需要回复pong（以及ping后服务器发送给您的任何内容）。所以如果服务器发给你这个，那应该是你的回复：

```
PING :HELLO_WORLD
PONG :HELLO_WORLD 
```

否则，服务器将确认链接已失效并终止连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T05:40:14.323

您可以尝试使用 irclib - 但是发生的情况很可能是您没有回复服务器的 PING 消息。

每当收到的消息以“PING”开头时，您必须用包含单词 PONG 和您的程序名称（以及可选的主机）的“PONG”消息回复它 - 在“PONG”之后留一个空格。

检查 PING 和 PONG 消息的完整 IRC 规范，并查看您的实验中可能缺少的其他内容：[http ://www.irchelp.org/irchelp/rfc/rfc.html](http://www.irchelp.org/irchelp/rfc/rfc.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-16T00:19:35.363

我的问题是我什至没有可靠地从 IRC 服务器接收 PING 数据包。我通过在套接字级别添加keepalive来修复它：

```
 # enable keepalives at the socket (SOL_SOCKET) level
    self.client.setsockopt(socket.SOL_SOCKET, socket.SO_KEEPALIVE, 1)
    # after 1 second of TCP inactivity, trigger keepalive pings
    self.client.setsockopt(socket.IPPROTO_TCP, socket.TCP_KEEPIDLE, 1)
    # send a keepalive ping every 60 seconds
    self.client.setsockopt(socket.IPPROTO_TCP, socket.TCP_KEEPINTVL, 60)
    # quit after 5 consecutive failures
    self.client.setsockopt(socket.IPPROTO_TCP, socket.TCP_KEEPCNT, 5) 
```

再加上为每个 PING 发回一个 PONG，我的连接打开时间更长。

# python - 如何测试numpy数组中的每个元素是否都被屏蔽

> ID：10867994
> 
> 赞同：6
> 
> 时间：2012-06-03T04:52:47.307
> 
> 标签：python, numpy

如何测试 numpy 数组中的每个元素是否都被屏蔽？这是我想做的：

```
x = #is a maksed numpy array
masked_min = numpy.ma.min(x)
if masked_min IS NOT A MASKED ELEMENT:
  #do some stuff only if masked_min is a value 
```

在实践中，我看到了这一点：

```
>>> x = numpy.ma.array(numpy.array([1,2,3]),mask=[True,True,True])
>>> masked_min = numpy.ma.min(x)
masked 
```

测试`masked`没有帮助：

```
>>> numpy.ma.sum(x) == numpy.ma.masked
masked 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-03T05:09:41.467

如果通过“测试整个数组是否在 numpy 中被屏蔽”是指是否每个元素都被屏蔽，因为掩码本身就是一个数组，你可以使用`.mask.all()`：

```
>>> x = numpy.ma.array(numpy.array([1,2,3]),mask=[True,True,True])
>>> x
masked_array(data = [-- -- --],
             mask = [ True  True  True],
       fill_value = 999999)

>>> x.mask
array([ True,  True,  True], dtype=bool)
>>> x.mask.all()
True 
```

或者也许`.count()`，但这取决于轴。OTOH如果你真的只需要测试你的最小调用的结果是否被“屏蔽”，你可以直接这样做：

```
>>> numpy.ma.min(x)
masked
>>> type(_)
<class 'numpy.ma.core.MaskedConstant'>
>>> isinstance(numpy.ma.min(x), numpy.ma.core.MaskedConstant)
True
>>> numpy.ma.min(x) is numpy.ma.masked
True 
```

[可能有更简单的方法来做到这一点；我自己很少使用掩码数组。]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T05:14:17.133

我认为最 Pythonic 的方法是只做你想做的事，然后捕获如果整个数组被屏蔽而导致的任何错误。

例如：

```
x = numpy.ma.array(numpy.array([1,2,3]),mask=[True,True,True])
try: 
    my_min = numpy.min(x[~x.mask])
    # Continue with my_min
except ValueError: 
    # Bail or what have you
    print 'Masks all around!' 
```

# c - 面向对象的 C 不会编译

> ID：10867995
> 
> 赞同：2
> 
> 时间：2012-06-03T04:53:04.977
> 
> 标签：c, oop, constructor

我已经在 OOC 上浏览了这个 pdf 的前几章：[http ://www.planetpdf.com/codecuts/pdfs/ooc.pdf](http://www.planetpdf.com/codecuts/pdfs/ooc.pdf)

现在我尝试实现一个 String 类。我以前的文件：main.c 和 new2.h。

这是 main.c：

```
#include "new2.h"
#include <stdio.h>

int main(){

    void * stringObject = new2(String,"a");

    printf((*stringObject).text);
} 
```

这是new2.h（包括空白代码，因为我摆脱了所有东西，但我认为我需要完成这项工作）。

```
#include <stdarg.h>
#include <assert.h>
#include <string.h>
#include <stdlib.h>

struct Class{
    size_t size;
    void * (* ctor)(void * self, va_list * app);
//  void * (* dtor)(void * self);
//  void * (* clone)(const void * self);
//  int (* differ)(const void * self, const void * b);

};

struct String{
    const void * mClass;//must be first
    char * text;

};

static void * String_ctor (void * _self, va_list * app)
{
    struct String * self = _self;
    const char * text = va_arg(* app, const char *);
    self->text = malloc(strlen(text)+1);

    assert(self->text);
    strcpy(self->text,text);
    return self;

}

static const struct Class _String ={
    sizeof(struct String),
    String_ctor

};

const void * String =&_String;

void * new2(const void * _class,...)
{
    const struct Class * mClass = _class;
    void * p = calloc(1,mClass->size);

    assert(p);
    *(const struct Class **)p = mClass;

    if(mClass -> ctor)
    {
        va_list ap;

        va_start(ap,_class);
        p=mClass->ctor(p, &ap);
        va_end(ap);
    }

    return p;

} 
```

new2.h 中的所有函数都是从 pdf 链接中逐字逐句获取的。当我尝试使用 gcc 进行编译时，我收到了警告。我正在取消引用一个 void 指针，以及一个我无法在 main.c 中调用字符串文本的错误，因为我的字符串不是联合或结构。

老实说，我发现 new2.h 令人困惑。正如我所说，我从 pdf 中复制了函数。这是我认为会发生的事情：

1.  new2 被调用。参数 String 告诉计算机创建一个指向 Class 结构的指针，并将其指向已经在 new2.h 中创建的 String 结构。
2.  我们为 String 对象分配了足够的内存。
3.  我们调用构造函数 (String_ctor)，并使用变量参数列表来获取 char 参数，在本例中为“a”。

我的理解很模糊，这段代码无法编译。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T05:19:27.117

为了使此代码编译替换

```
 void * stringObject 
```

和

```
 struct String * stringObject 
```

否则编译器无法确定 .text 字段的地址。

`struct String`返回方法的一个原因`void*`是提供继承。只有调用程序知道`struct String`正在使用哪个子类。

本书中的示例可以保留，`void * stringObject`因为它们只使用 String 类的“公共”接口，从不进入内部访问其私有成员。

打印字符串的另一种方法是使用将其打印出来的方法扩展类或定义“朋友”函数。

# objective-c - 简单的布尔切换不起作用？

> ID：10867998
> 
> 赞同：0
> 
> 时间：2012-06-03T04:53:39.120
> 
> 标签：objective-c, ios, cocoa-touch

我正在翻转一个简单的 BOOL 的值，如下所示：

```
active = !active;
NSLog(@"%@", active? @"active" : @"not active"); 
```

我已经做过很多次了，但是现在，由于某种原因它不起作用，这真的让我很生气。每当流量到达这里时，它总是打印“活动”。不是切换！！

这是我的界面：

```
@interface HeaderView : UIView {
    UILabel *label;
    UIButton *button;
    UIImageView *background;
    BOOL active;
    int section;

    __weak id<HeaderViewDelegate> delegate;
} 
```

和执行操作的函数：

```
- (void)actionTUI:(id)sender {
    active = !active;
    NSLog(@"%@", active? @"active" : @"not active");
    UIImage *image = nil;
    if (active) {
        image = [UIImage imageNamed:@"active.png"];
    } else {
        image = [UIImage imageNamed:@"unactive.png"];
    }
    [button setBackgroundImage:image forState:UIControlStateNormal];
    [delegate headerView:self toggled:active];
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T05:14:11.913

`BOOL`与所有其他类型一样，ean 值在运行时初始化为 NULL (0, FALSE, NO)，除非分配了不同的值。您正在为您的 BOOL 分配一个 not(NO)，它在每次运行时都会打印 YES。

此外，您的 NSLog() 很奇怪，它可能以错误的方式评估自己，并且很可能导致问题。它不应该包括文字：

```
NSLog(active? @"active" : @"not active"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T05:23:48.810

好的，问题是切换后，我正在重新加载显然回忆起的表格视图：

```
- (UIView *)tableView:(UITableView *)_tableView viewForHeaderInSection:(NSInteger)section { 
```

这导致新的标题视图被分配/初始化，活动设置为 NO 并在切换后立即设置为 YES。这就是为什么每次，即使在翻转它设置为活动的值之后（因为之后，它会被丢弃并且新的标题视图会出现在它的位置）。

# javascript - 为什么这个简单的代码在 Firefox 中失败，但在其他所有浏览器（包括 Opera 和旧 IE 版本）中都可以使用

> ID：10867999
> 
> 赞同：0
> 
> 时间：2012-06-03T04:53:50.777
> 
> 标签：javascript, firefox, conditional, undefined

```
function T(x){ return (x.textContent) ? function(y){ x.textContent = y; } : function(y){ x.innerText = y; }; }

T(nodeA)('string');
nodeText = T(nodeB);
nodeText('string'); 
```

如果我更改`(x.textContent)`为`(x.textContent !== undefined)`它可以在 Firefox 中使用。否则我没有错误，但没有任何反应。用萤火虫检查显示`T(node);`返回`function()`，这让我感到困惑。

我是 javascript 新手，但我认为这可能是一个错误？我认为它只能是真或假，它应该是真并返回第一个函数，但它也不返回。有人可以说为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T05:59:47.337

`textContent`如果给定节点的 是一个空字符串，这将不起作用`''`，它的计算结果为`false`。这就是为什么你应该这样做`(typeof x.textContent !== 'undefined')`以确保财产的存在。