# StackOverflow 问答 11498000-11498999

# http - 当我使用 ajax PUT 方法发送文件时，我的请求标头中缺少 Content-length

> ID：11498000
> 
> 赞同：-1
> 
> 时间：2012-07-16T04:09:41.983
> 
> 标签：http, jquery, put

我对`ajax`PUT 方法有疑问。
当我发送一个大小超过大约 1M 的文件时，对于缺少 content-length 标头字段将没有响应。

请求头是这样的：</p>

```
Accept:*/*
Content-Type:application/x-www-form-urlencoded; charset=UTF-8
Origin:http://xxxxxxxxxx
Referer:http://xxxxxx
User-Agent:Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.11 (KHTML, like Gecko)         
Chrome/20.0.1132.57 Safari/536.11
X-Requested-With:XMLHttpRequest 
```

我的ajax请求代码如下：</p>

```
var file = ev.dataTransfer.files[0];
$.ajax({
    url: url,
    processData:false,
    data: file,
    type: 'PUT',
    success : function(){},
    error : function(){}
}); 
```

问题发生在 Chrome 和 Firefox 中，我不知道如何处理它。它与浏览器或 PUT 方法有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:18:20.873

我无法完全解析“当我发送超过大约 1M 的文件时，请求将不会对我的请求标头中缺少内容长度的响应。”。

问题是请求没有 Content-Length 头字段，服务器因此拒绝请求吗？那将是一个服务器错误（因为浏览器可能使用[分块编码](http://greenbytes.de/tech/webdav/rfc2616.html#rfc.section.3.6.1)代替）。

# objective-c - 搜索已在 XML 中解析的 UITableView 的正确方法是什么

> ID：11498005
> 
> 赞同：0
> 
> 时间：2012-07-16T04:11:07.643
> 
> 标签：objective-c, xcode, uitableview, uisearchbar

首先，这不是关于如何`UISearchBar`在`UITableView`.

我已经设置了一切，解析，查看等。

我的问题是，什么是正确的搜索方式？

我目前的流程是：

*   解析 XML。
*   将所有内容添加到数组中。
*   显示表格中的数组。
*   用户输入搜索。
*   使用搜索输入再次解析 XML。
*   将所有内容添加到同一个数组中。
*   显示表格中的数组

这样好吗？当它在真实服务器上时，这不会很慢吗？是不是要求太多了？

或者这将是一个更好的方法？

*   解析 XML。
*   将所有内容添加到数组中。
*   显示表格中的数组。
*   用户输入搜索。
*   搜索数组。
*   创建一个新数组并添加搜索到的项目。
*   显示新数组。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:39:47.623

从技术上讲，这两种方法都很好。但是，就性能而言，通常建议避免重复调用 Web 服务。除非您的 Web 服务的数据正在更改，否则最好将来自 Web 服务的数据保存在某个变量（在您的情况下为数组）中，然后使用该数组再次访问 Web 服务数据。

因此，我建议您应该使用第二种方法。我的计算成本会更低。

# php - Yii 能否通过 createUrl 函数正确使用 urlManager 规则？

> ID：11498010
> 
> 赞同：1
> 
> 时间：2012-07-16T04:12:04.323
> 
> 标签：php, url, url-rewriting, yii

我有一系列**urlManager**规则来简化我的 Web 应用程序。例如，Yii 附带的 vanilla 应用程序安装程序创建了“页面”模型，我将页面从*/site/page/view/about*重定向到*/about*。

这很好用，但我不确定 Yii 是否能够阅读我的规则来确定要创建的最佳 URL。目前，如果我使用以下代码 ， **createUrl**将返回标准 URL ( */site/page/view/about )：*`createUrl('/site/page', array('view'=>'about'))`

或者，使用`createUrl('/about')`将正确链接到首选 URL，但这似乎不如第一个示例好。此外，在**CMenu**函数中使用 this 不会将此链接关联为当前*活动*链接。

对于此要求，是否有更好的做法可以遵循？**createUrl**的替代用法似乎过于“硬编码”，并且如前所述，它在系统上不符合逻辑（确定活动页面等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:58:32.080

使用这种方式创建url：/site/page/view/about

```
Yii::app()->createUrl('site/page', array('view'=>'about')); 
```

这里以更好的方式提到：[Yii Url Mmanagement](http://www.yiiframework.com/doc/guide/1.1/en/topics.url)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T16:49:56.863

你的规则`'<page:\w+>' => 'site/page/view/<page>'`不正确。使用这个（假设您使用默认的 gii 生成的代码）作为第一条规则

```
'<view:\w+>'=>'site/page' 
```

# iphone - iPhone 应用程序安装失败

> ID：11498011
> 
> 赞同：1
> 
> 时间：2012-07-16T04:12:18.433
> 
> 标签：iphone, ios, xcode4.2

通过 safari 浏览器，我在开发者帐户中添加了我的 org 设备 UDID 之一。现在我正在尝试使用 iTunes 将一个自定义应用程序安装到该设备。但是App安装失败。

我可以在开发者帐户中看到，在配置文件下，它显示为 0。为什么我无法在设备中安装应用程序。

我在 iPad 上尝试过的相同场景，但它已安装。谁能告诉我可能是什么原因？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:28:42.577

您需要做的是使用 Adhoc_Distribution Profile 对应用程序进行签名，并包括您的 iPhone 以及您想要在其上部署应用程序的任何其他设备。

要创建配置文件，请转到配置门户，从左侧选择配置，然后选择分发选项卡。从那里选择 Adhoc_Distribution，选择正确的 AppID 并添加要在其上部署应用程序的设备。

下载配置文件并按照以下步骤操作。

[http://diaryofacodemonkey.ruprect.com/2011/03/18/ad-hoc-app-distribution-with-xcode-4/](http://diaryofacodemonkey.ruprect.com/2011/03/18/ad-hoc-app-distribution-with-xcode-4/)

然后使用 iTunes 在所需设备上安装应用程序。

# android - android httpURLConnection-getHeaderField

> ID：11498013
> 
> 赞同：1
> 
> 时间：2012-07-16T04:12:31.810
> 
> 标签：android, httpurlconnection

我写了一个应用程序来从互联网上下载照片，部分代码如下：

```
try {

        Log.d("LoadImageFromURL.url", url); 

        url=url.replace(" ", "+");    

        Log.d("LoadImageFromURL.url", url); 

        HttpURLConnection connection = (HttpURLConnection) new URL(url).openConnection();
        connection.setUseCaches(true); 
        String contentType = connection.getHeaderField("Content-Type");
        boolean isImage = contentType.startsWith("image/");

        Log.d("Image size", Long.toString(connection.getContentLength())); 
        Log.d("LoadImageFromURL", "getHeaderField Complete"); 

        if(isImage){

            use httpGet to download the photo.... 

} 
```

现在，我面临两个问题：

1）如果URL中有空格（即[http://www.abc.com/123](http://www.abc.com/123) 45.jpg），代码会将空格替换为“+”（即[http://www.abc.com/ 123+45.jpg](http://www.abc.com/123+45.jpg)）。但结果是返回null。

2）获取HeaderField需要20秒，太慢了。我尝试跳过此过程，下载照片将在几秒钟内完成。

注意照片的大小仅为 1005511 字节。有任何想法吗？

# jquery - jquery ui no selected tab - 选择选项卡时显示静态内容然后选项卡内容

> ID：11498015
> 
> 赞同：-1
> 
> 时间：2012-07-16T04:13:21.370
> 
> 标签：jquery, jquery-ui

这是我到目前为止所拥有的......我试图让用户来到一个没有选择选项卡但它们存在于页面上的页面。当没有选择标签时，我希望显示主页内容。When a tab is selected I want the main page content to hide and the tab content to show for the appropriately selected tab.

```
$(document).ready(function () {
    if(location.hash) {
        $('#tabs').tabs();
        $('#campaigns').hide();
    } else {
        $('#tabs').tabs({
            selected: -1
        });
        $('#campaigns').show();
    }
}); 
```

我的 HTML 与正确的 UI Tab 过程没有什么不同。我只是在该内容下方添加了另一个 ID 为 #campaigns 的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:01:13.500

您可以将`tabsselect`事件绑定到选项卡并使用它来隐藏额外的 div

```
$("#tabs").bind("tabsselect", function (event, ui) {
   $('#campaigns').hide();
}); 
```

# javascript - 在 highcharts 中重置堆积图中的数据

> ID：11498023
> 
> 赞同：0
> 
> 时间：2012-07-16T04:16:26.190
> 
> 标签：javascript, highcharts

我正在尝试通过单击 highcharts 中的按钮来重置堆叠图表中的数据 这是我到目前为止的工作

[http://jsfiddle.net/N9WJ9/1/](http://jsfiddle.net/N9WJ9/1/)

它不工作

你能帮忙解决这个问题吗？谢谢。

只是为了澄清我采取了以下两个例子的帮助

[http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/members/series-setdata/](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/members/series-setdata/)

[http://www.highcharts.com/demo/column-stacked](http://www.highcharts.com/demo/column-stacked)

按钮上的编辑适用于简单的图形，但我无法让它适用于堆叠的列。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T04:55:33.627

在按钮单击中使用以下代码：

```
chart.series[0].setData([10, 10, 10, 10, 10]);
   chart.series[1].setData([5, 5, 5, 5, 5]);
   chart.series[2].setData([4, 4, 4, 4, 4]); 
```

看看这个[小提琴](http://jsfiddle.net/ruchitrami/YUa3R/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T06:04:42.470

为此，您将不得不重新绘制 HighChart 或再次初始化对象。

```
 $('#button').click(function() {
    $("#container").empty(); 

    options.series = [];
    options.series.push({
        name: 'Test',
        data: [10, 10, 10, 10, 10]
    });
    options.series.push({
        name: 'Test2',
        data: [5, 5, 5, 5, 5]
    });
    options.series.push({
        name: 'Test3',
        data: [4, 4, 4, 4, 4]
    });
    chart = new Highcharts.Chart(options);
}); 
```

[http://jsfiddle.net/dane/YUa3R/34/](http://jsfiddle.net/dane/YUa3R/34/)

# php - 如何从 C++ 调用 php-cgi

> ID：11498031
> 
> 赞同：2
> 
> 时间：2012-07-16T04:17:54.283
> 
> 标签：php, c++, web-services, web-applications, cgi

所以我正在编写一个 Web 服务器（我知道，就像世界需要另一个服务器一样！）我想通过 CGI 调用 php。例如，我有一个运行良好的 CGI1.1 实现，足以运行 perl cgi 脚本。

现在我想运行 php。但是当我的 cgi 模块调用 php 程序时，它会返回 404。

我如何让这个工作？

细节：

我正在使用 php5 在 ubuntu 上运行。在我的 Web 服务器中，我将 cgi 请求传递给处理程序，该处理程序将找到程序并使用脚本作为参数调用它。所以这里是产生 cgi 进程的代码：

```
chdir( dir );
execve( argv[0], argv.data(), (char* const*) req.posixEnv() ); 
```

我正在运行的命令相当于：

```
/usr/bin/php5-cgi /home/rafael/webserver/data/cgi-bin/test.php 
```

这意味着我已将“dir”设置为：

```
/home/rafael/webserver/data/cgi-bin 
```

并且 cgi 进程应该在该目录中运行。argv[0] 是“/usr/bin/php5-cgi”，argv.data() 返回一个包含以下元素的空终止数组：

```
/usr/bin/php5-cgi
/home/rafael/webserver/data/cgi-bin/test.php
NULL 
```

进程环境包含 CGI 环境，其中包含一组常用的 CGI 环境变量。

当我从 shell 运行上述命令时，也就是将其输入到 shell 中，脚本运行良好，php 生成测试页面。当我从 CGI 调用它时，它返回：

```
Status: 404 Not Found
X-Powered-By: PHP/5.3.10-1ubuntu3.2
Content-type: text/html

No input file specified. 
```

现在我或多或少知道发生了什么。PHP 正在检测它是在 CLI 还是 CGI 模式下运行，并搜索脚本以在每种模式下以不同的方式运行。在 CGI 模式下，它可能使用 SCRIPT_FILENAME 和 DOCUMENT_ROOT 等 CGI 环境变量来解析脚本名称。我已经尝试了很多东西 - 这些变量的不同设置。但这些都不起作用。

我所知道的：PHP 的整个产生和读取输出工作。例如，如果我删除某些 CGI 变量，使其认为它在 CLI 模式下运行，它会很好地工作 - 生成页面和所有内容。

我需要知道的是：

1.  为 php-cgi 设置 CGI 环境变量以找到我的脚本的正确方法是什么。
2.  从 exec 调用 php 脚本的正确方法是什么。我正在对所有内容使用完整路径来调试它。我更喜欢使用相对路径。

我能找到的所有文档都是关于在特定 Web 服务器上为 cgi 配置 php。我需要从编写服务器的人的角度来了解这一点。

@EDIT：我有一个更简单的例子可以消除c++。我很确定那部分工作正常。假设我制作了一个调用 php-cgi 的脚本，并尝试在 shell 中模拟 cgi 调用约定。

这有效：

```
#export GATEWAY_INTERFACE="CGI/1.1"                                                                                             
export REDIRECT_STATUS=200
export SERVER_PROTOCOL="HTTP/1.1"
export DOCUMENT_ROOT="/home/rafael/web"
#export SCRIPT_FILENAME="cgi-bin/test.php"                                                                                      
export SCRIPT_NAME="cgi-bin/test.php"

/usr/bin/php5-cgi test.php 
```

但这不会：

```
export GATEWAY_INTERFACE="CGI/1.1"                                                                                             
export REDIRECT_STATUS=200
export SERVER_PROTOCOL="HTTP/1.1"
export DOCUMENT_ROOT="/home/rafael/web"
#export SCRIPT_FILENAME="cgi-bin/test.php"                                                                                      
export SCRIPT_NAME="cgi-bin/test.php"

/usr/bin/php5-cgi test.php 
```

我认为 DOCUMENT_ROOT、SCRIPT_FILENAME 和 SCRIPT_NAME 的某种组合可能会起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:55:31.900

搞砸的事情是 php.ini 中“doc_root”的设置。我像这样取消设置：

```
doc_root = 
```

现在 cgi 环境变量的工作方式更像 CGI 规范所说的那样。例如。下面的事情现在有效：

```
export GATEWAY_INTERFACE="CGI/1.1"
export SERVER_PROTOCOL="HTTP/1.1"
export SCRIPT_FILENAME="/home/rafael/web/cgi-bin/test.php"
export SCRIPT_NAME="test.php"
export REDIRECT_STATUS="200"

/usr/bin/php5-cgi test.php 
```

# ios - 为什么我的应用打不开短信编辑器？

> ID：11498032
> 
> 赞同：1
> 
> 时间：2012-07-16T04:18:40.243
> 
> 标签：ios, cocoa-touch, sms, mfmessagecomposeview

我试图让我的应用程序打开 SMS 消息编写器，当应用程序尝试启动编写器时出现这个奇怪的错误：

> [CKSMSComposeRemoteViewController: 0x1ddc2900] 等待服务执行 viewWillAppear 时出错：错误域 = XPCObjectsErrorDomain 代码 = 2“操作无法完成。（XPCObjectsErrorDomain 错误 2。）”

我从来没有看到过任何接近这个的错误，我不知道为什么我会得到它，因为我在网上找到了几乎相同的代码，尝试过它，它工作。

我的代码有什么问题，这个错误是什么意思？

这是我的代码：

```
if ([MFMessageComposeViewController canSendText]) {
            NSLog(@"can send text");
            MFMessageComposeViewController *picker = [[MFMessageComposeViewController alloc] init];
            picker.messageComposeDelegate = self;
            picker.recipients = [stringComponents objectAtIndex:1];
            picker.body = [stringComponents objectAtIndex:2];
            [self presentModalViewController:picker animated:YES];
            NSLog(@"%@", picker.recipients);
            NSLog(@"%@", picker.body);
        } 
```

在构建上述代码时，我在 Xcode 中没有收到任何错误消息，并且我能够将屏幕加载到我想要打开消息编辑器的位置，然后它崩溃并显示消息。感谢您提前回复。

# java - GWT 项目中带有 google Chart API 的虚线

> ID：11498034
> 
> 赞同：1
> 
> 时间：2012-07-16T04:19:45.640
> 
> 标签：java, gwt, google-visualization

我正在尝试将折线图中的一条线设为虚线。这是我的java代码

```
DataTable data = DataTable.create();
data.addColumn( ColumnType.NUMBER, "GaussianProcesses" );
data.addColumn( ColumnType.NUMBER, "SMOreg" );
data.addColumn( ColumnType.NUMBER, "LinearRegression" );
data.addColumn( ColumnType.NUMBER, "MultilayerPerceptron"); 
```

我想将前两列设为虚线/点线而不是实线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:37:21.910

也许您可以使用[此处描述](https://developers.google.com/chart/interactive/docs/roles)的“确定性”角色。

# c++ - 背包分支定界的C++实现

> ID：11498035
> 
> 赞同：8
> 
> 时间：2012-07-16T04:19:47.260
> 
> 标签：c++, knapsack-problem, branch-and-bound

我正在尝试使用分支和边界来实现这个背包问题的 C++ 实现。这个网站上有一个Java版本：[Implementing branch and bound for knapsack](https://stackoverflow.com/questions/7448141/problem-implementing-branch-and-bound-for-knapsack)

我试图让我的 C++ 版本打印出它应该打印出的 90，但它没有这样做，而是打印出 5。

有谁知道问题可能出在哪里和什么地方？

```
#include <queue>
#include <iostream>
using namespace std;

struct node
{
    int level;
    int profit;
    int weight;
    int bound;
};

int bound(node u, int n, int W, vector<int> pVa, vector<int> wVa)
{
    int j = 0, k = 0;
    int totweight = 0;
    int result = 0;

    if (u.weight >= W)
    {
        return 0;
    }
    else
    {
        result = u.profit;
        j = u.level + 1;
        totweight = u.weight;

        while ((j < n) && (totweight + wVa[j] <= W))
        {
            totweight = totweight + wVa[j];
            result = result + pVa[j];
            j++;
        }

        k = j;

        if (k < n)
        {
            result = result + (W - totweight) * pVa[k]/wVa[k];
        }
        return result;
    }
}

int knapsack(int n, int p[], int w[], int W)
{
    queue<node> Q;
    node u, v;
    vector<int> pV;
    vector<int> wV;
    Q.empty();

    for (int i = 0; i < n; i++)
    {
        pV.push_back(p[i]);
        wV.push_back(w[i]);
    }

    v.level = -1; 
    v.profit = 0;
    v.weight = 0;

    int maxProfit = 0;

    //v.bound = bound(v, n, W, pV, wV);
    Q.push(v);

    while (!Q.empty())
    {
        v = Q.front();
        Q.pop();

        if (v.level == -1)
        {
            u.level = 0;
        }
        else if (v.level != (n - 1))
        {
            u.level = v.level + 1;
        }

        u.weight = v.weight + w[u.level];
        u.profit = v.profit + p[u.level];

        u.bound = bound(u, n, W, pV, wV);

        if (u.weight <= W && u.profit > maxProfit)
        {
            maxProfit = u.profit;
        }

        if (u.bound > maxProfit)
        {
            Q.push(u);
        }

        u.weight = v.weight;
        u.profit = v.profit;

        u.bound = bound(u, n, W, pV, wV);

        if (u.bound > maxProfit)
        {
            Q.push(u);
        }
    }
    return maxProfit;
}

int main()
{
    int maxProfit;
    int n = 4;
    int W = 16;
    int p[4] = {2, 5, 10, 5};
    int w[4] = {40, 30, 50, 10};

    cout << knapsack(n, p, w, W) << endl;

    system("PAUSE");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T04:45:59.173

我认为您将利润和权重值放入了错误的向量中。改变：

```
int p[4] = {2, 5, 10, 5};
int w[4] = {40, 30, 50, 10}; 
```

到：

```
int w[4] = {2, 5, 10, 5};
int p[4] = {40, 30, 50, 10}; 
```

你的程序将输出 90。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-23T14:19:27.403

我相信您正在实施的并不是完全的分支定界算法。如果我必须将它与某些东西匹配，它更像是基于估计的回溯。

您的算法中的问题是您正在使用的数据结构。您正在做的只是首先推送所有第一级，然后推送所有第二级，然后将所有第三级推送到队列中，并按插入顺序将它们放回原处。你会得到你的结果，但这只是搜索整个搜索空间。

您需要做的是始终在具有最高估计界限的节点上分支，而不是使用它们的插入顺序弹出元素。换句话说，无论它们的估计范围如何，您总是在以您的方式在每个节点上分支。分支定界技术通过每次仅在一个节点上进行分支来获得速度优势，这最有可能导致结果（具有最高的估计值）。

示例：在您的第一次迭代中，假设您找到了 2 个具有估计值的节点

**节点1**：110

**节点**2：80****

 **您正在将它们都推到您的队列中。您的队列变为“n2-n1-head” 在第二次迭代中，您在 node1 上分支后又推送了两个节点：

**节点3**：100

**节点**4：95****

 **并且您也将它们添加到您的队列中（“n4-n3-n2-head”。出现错误。在下一次迭代中，您将获得 node2 但它应该是具有最高估计值的 node3价值。

因此，如果我没有错过您的代码中的某些内容，那么您的实现和 java 实现都是错误的。您应该使用优先级队列（堆）来实现真正的分支和绑定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T04:51:43.087

您将 W 设置为 16，因此结果为 5。您可以带入背包的唯一物品是物品 3，利润为 5，重量为 10。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-28T07:26:34.697

```
 #include <bits/stdc++.h>
using namespace std;

struct Item
{
    float weight;
    int value;
};
struct Node
{
    int level, profit, bound;
    float weight;
};

bool cmp(Item a, Item b)
{
    double r1 = (double)a.value / a.weight;
    double r2 = (double)b.value / b.weight;
    return r1 > r2;
}
int bound(Node u, int n, int W, Item arr[])
{
    if (u.weight >= W)
        return 0;
    int profit_bound = u.profit;
    int j = u.level + 1;
    int totweight = u.weight;

    while ((j < n) && (totweight + arr[j].weight <= W))
    {
        totweight    = totweight + arr[j].weight;
        profit_bound = profit_bound + arr[j].value;
        j++;
    }
    if (j < n)
        profit_bound = profit_bound + (W - totweight) * arr[j].value /
                                         arr[j].weight;

    return profit_bound;
}

int knapsack(int W, Item arr[], int n)
{
    sort(arr, arr + n, cmp);
    queue<Node> Q;
    Node u, v;
    u.level = -1;
    u.profit = u.weight = 0;
    Q.push(u);
    int maxProfit = 0;
    while (!Q.empty())
    {
        u = Q.front();
        Q.pop();
        if (u.level == -1)
            v.level = 0;

        if (u.level == n-1)
            continue;
        v.level = u.level + 1;
        v.weight = u.weight + arr[v.level].weight;
        v.profit = u.profit + arr[v.level].value;
        if (v.weight <= W && v.profit > maxProfit)
            maxProfit = v.profit;
        v.bound = bound(v, n, W, arr);
        if (v.bound > maxProfit)
            Q.push(v);
        v.weight = u.weight;
        v.profit = u.profit;
        v.bound = bound(v, n, W, arr);
        if (v.bound > maxProfit)
            Q.push(v);
    }

    return maxProfit;
}
int main()
{
    int W = 55;   // Weight of knapsack
    Item arr[] = {{10, 60}, {20, 100}, {30, 120}};
    int n = sizeof(arr) / sizeof(arr[0]);

    cout << "Maximum possible profit = "
         << knapsack(W, arr, n);

    return 0;
}
**SEE IF THIS HELPS** 
```****

# javascript - 使用带有标签的链接处理 Facebook Like 按钮信息（标题和图像）

> ID：11498036
> 
> 赞同：0
> 
> 时间：2012-07-16T04:19:46.980
> 
> 标签：javascript, jquery, facebook, facebook-graph-api, facebook-like

在我的网站上，Like 按钮是动态生成的。与这些 Like 按钮关联的 URL 是自动重定向（使用 htaccess）到其各自主题标签 url 的链接（即“.com/event/200”重定向到“.com/#event/200”）。问题是我似乎无法设置标题或图像。当使用主题标签加载页面时，会查询数据库，然后更改页面标题、元数据和其他内容。Facebook 似乎正在使用在数据库有时间加载并且内容已更改之前设置的元数据。有谁知道我该如何解决这个问题？如果有任何办法，我希望能够在加载喜欢按钮时设置标题和图像。这是我喜欢的按钮代码：

```
<fb:like href='http://website.com/"+postname+"/"+data.id+"' send='true' layout='button_count' width='450' show_faces='true'></fb:like> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:22:57.240

> 与这些 Like 按钮关联的 URL 是自动重定向（使用 htaccess）到其各自主题标签 url 的链接（即“.com/event/200”重定向到“.com/#event/200”）。

那是你的*错误*。

由于 URL 的 Hash 部分不会传输到服务器，因此它只能在客户端使用。所以重定向到它*的服务器端*是一个非常糟糕的主意，因为你对客户端的功能一无所知（如果它支持 JavaScript）。

不要进行服务器端重定向——通过 JS 将它们改为客户端。

本教程展示了如何使“AJAX 页面”可抓取： http: [//support.google.com/webmasters/bin/answer.py ?hl=en&answer=174992](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=174992)

# c# - 如何使用正则表达式忽略前面有特定字符串的字符串？

> ID：11498043
> 
> 赞同：2
> 
> 时间：2012-07-16T04:21:35.210
> 
> 标签：c#, regex

我打开了不区分大小写...

我想匹配`abc`除`watch?v=xxabcxx`or之外的任何地方`tumblr_asdfabcasdf`。

但是如果我使用`(watch\?v=[0-9a-zA-Z]){0}abc`反对`watch?v=xxabcxx`，它匹配，大概是因为引擎失败，直到它检查`abcxxx`是好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:49:18.860

在称为负向的正则表达式中向后看（也向前看，取决于您需要查看的方向）。查看有关“*[正面和负面预测](http://www.regular-expressions.info/lookaround.html)*”的教程。

您可能还想检查“*[正则表达式负前瞻](https://stackoverflow.com/questions/1749437/regular-expression-negative-lookahead)*”的问题和答案。

例如，看一下，*只有前面的字母与 不匹配*`(watch\?v=.*)(?<!xx)abc`时，该部分`(?<xx)abc`才能被读取为匹配，其中是在 apply 之前放置条件的格式。此外，符号表示*向后看*，感叹号表示否定条件。我使用了一个通用的正则表达式，但你可以理解。*`abc``xx`*`(?a)b``a``b``<`*`!`*

# php - 根据变量更改“if”语句

> ID：11498045
> 
> 赞同：0
> 
> 时间：2012-07-16T04:21:39.053
> 
> 标签：php, variables, if-statement

如何在不为每种情况编写新语句的情况下更改基于变量的“if”语句？我的选择下拉菜单“时间线”将填充 25 多个选项，所以我想在 php 脚本中创建 if 语句

用于设置变量的 HTML：

```
<p>Current Status: </p> <select name="timeline" id="timeline">
            <option value="completed" selected>Completed</option>
            <option value="active">Active</option>
</select> 
```

PHP：

```
 $current_state = $_POST['timeline'];
     $current = strtotime("now");

while($row = mysql_fetch_array($results)){

        if($current_state == "completed"){
             $end = strtotime($row['End']);

             $my_if = "if($current > $end){";

        }

        if($current_state == "active"){

           $end = strtotime($row['End']);
           $start = strtotime($row['Start']);

           $my_if = "if($start < $current && $end > $current){";

        }
                //THIS IS WHERE THE IF STATEMENT WOULD BE USED
                echo $my_if;

                            echo '<tr>
                            <td>'. $row['ID']  .'</td>
                            <td>'. $row['Name']  .'</td>
                            <td>'. $row['LastName']  .'</td>

                        </tr>';
                }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T04:27:38.270

你应该完全重写你的逻辑

```
$completed = $_POST['timeline'] == 'completed';
while($row = mysql_fetch_array($results)) {
    $end = strtotime($row['End']);
    if (!$completed)
      $start = strtotime($row['Start']);

    if (
        ($completed  && $current > $end) ||
        (!$completed && $start < $current && $end > $current)
    ) {
      // do stuff
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T04:26:12.950

将“meta-if”的条件包含在`if`自身中：

```
if ($current_state == "completed")
    {
    $end = strtotime($row['End']);
    }

if ($current_state == "active")
    {
    $end = strtotime($row['End']);
    $start = strtotime($row['Start']);
    }

if (($current_state == "completed" && $current > $end) || ($current_state == "active" && $start < $current && $end > $current))
    {
    echo '<tr>
    <td>'. $row['ID']  .'</td>
    <td>'. $row['Name']  .'</td>
    <td>'. $row['LastName']  .'</td>
    </tr>';
    } 
```

# iphone - 故事板中的 Facebook SDK？

> ID：11498046
> 
> 赞同：2
> 
> 时间：2012-07-16T04:21:52.503
> 
> 标签：iphone, facebook, storyboard

是否可以将 Facebook SDK 3.0 与 iPhone 故事板一起使用？我找不到任何使用情节提要的教程。如果可以的话，有教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T01:12:31.363

您可以通过一个示例应用程序向您展示如何使用故事板。这使用 Facebook SDK 3.1。

[https://github.com/fbsamples/ios-social-cafe](https://github.com/fbsamples/ios-social-cafe)

它显示了使用 Facebook 登录、使用 Open Graph 发布、朋友和地点选择器以及深度链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:07:58.230

遇到了同样的问题，我和另一个开发人员自己想出了一个简单的解决方案：

[https://github.com/kincade71/Face-Code-X](https://github.com/kincade71/Face-Code-X)

# android - 画布中的圆圈占据整个父空间

> ID：11498047
> 
> 赞同：2
> 
> 时间：2012-07-16T04:22:16.560
> 
> 标签：android, android-layout, android-canvas

我的父视图是一个RelativeLayout，我添加了一个三角形来扩展View 类。我使用画布和油漆绘制三角形。我面临的问题是，当我触摸相对布局时，触摸侦听器、相对布局和三角形都被触发。我只是想让三角形占据它需要的确切空间。我如何限制我的 customview ，在这种情况下为三角形以占用它的空间，而不是占用整个父布局。

实际上我的要求是：我在布局上有一个相对布局我正在动态添加一些自定义视图。那些具有用于在三角形中拖动点的触摸侦听器，但它们正在全屏显示我的父视图，因为我无法分别为父视图和子视图触发触摸侦听器。

我花了无数个小时为这个问题开发解决方案，但我无法理解它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T04:26:19.967

从我收集到的你所说的，你在 a`RelativeLayout`中画了一个三角形`CustomView`。实际`View`尺寸`FILL_PARENT`适用于宽度和高度。所以表示三角形**可触摸区域**的正方形与表示父**元素可触摸区域**的正方形相同`RelativeLayout`。

您希望三角形绘制区域内的触摸事件由三角形接收，`View`而外部的任何触摸事件都由父级接收。据我了解，无法定义自定义触摸区域。

这不会阻止您操纵绘图边界和触摸焦点来完成您想要的。

**怎么做**

1.  确保您`CustomView`的 triange**始终**接收到触摸事件。当它接收到触摸事件时，它会执行基本的数学运算来确定触摸是否在您的三角形区域内（您必须将用于绘制三角形的三角形边界保存为 的全局变量`CustomView`）。

2.  然后是一个简单的条件语句来确定是否采取行动并消费或传递事件（你甚至想要`TouchEvent`你`RelativeLayout`做任何事情吗？如果不是这样会让这更容易）。

示例代码骨架：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    boolean inTriangle = false;
    float x = event.getX();
    float y = event.getY();

    // This really depends on what behaviour you want, if a drag extends outside the
    // triangle bounds, do you want this to end the touch event? This code could be done
    // more efficiently depending on your choices / needs

    // Do maths to figure out if the point is actually inside the triangle. Once again,
    // many solutions and some much easier than others depending on type of triangle

    // This flow will only register events in the triangle, and do nothing when outside
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        if (inTriangle) {
            // Do whatever it is you want to do

            return true; // to say you consumed the event if necessary
        } else {
            return false; // parent RelativeLayout should now get touch event

    }
} else if (event.getAction() == MotionEvent.ACTION_MOVE) {
    if (inTriangle) {
        // Do whatever it is you want

        return true;
    } else {
        // Do nothing
        return true; // So is stil consumed
    }
}

return true; 
```

}

老实说，问题是开放式/不清楚的方式来提供更具体的内容。但这就是你如何完成你所要求的。只需将其应用于您的特定场景。

**注意：**我遇到了`TouchEvent`传递问题，所以如果你真的想把它们传递到特定的地方，如果你的 Touches 被处理的顺序成为问题，你可能不得不调查[View.dispatchTouchEvent()的玩弄。](http://developer.android.com/reference/android/view/View.html#dispatchTouchEvent%28android.view.MotionEvent%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T05:12:50.620

您在处理三角形的触摸事件时遇到了问题，因为您同时接触了视图 RalativeLayout 和您的自定义视图。

要解决此问题，您必须对 customview 的 onTouchEvent 进行一些更改。就像如果您正在触摸 customview 并且如果您想处理该事件，那么从 onTouchEvent 您将必须返回**true**而不是 false ，这样您的父视图将不会获得触摸事件。

# java - Java 检查扫描仪是否仍然连接

> ID：11498049
> 
> 赞同：1
> 
> 时间：2012-07-16T04:22:24.670
> 
> 标签：java, url, connection

我做了一个从 Ebay 搜索中检索某些数据的方法。这是我正在使用的代码：

```
public static LinkedList<EbaySearchResult> getResults(String search){
    LinkedList<EbaySearchResult> results = new LinkedList<EbaySearchResult>();
    LinkedList<String> links = new LinkedList<String>();
    LinkedList<String> titles = new LinkedList<String>();
    LinkedList<String> prices = new LinkedList<String>();
    LinkedList<String> images = new LinkedList<String>();
    try{
        Scanner reader = new Scanner(new URL(String.format("http://www.ebay.com/sch/i.html?_trksid=p5197.m570.l1313&_nkw=%s&_sacat=0", search)).openStream());
        while(reader.hasNextLine()){
            String line = reader.nextLine().trim();
            if(line != null && !line.equals("")){
                if(line.contains(CONTAINS_ONE) && line.contains(CONTAINS_TWO)){
                    String[] splitter = line.split(CONTAINS_SPLIT);
                    String[] splitter2 = splitter[1].split(CONTAINS_SPLIT_2);
                    images.add(splitter2[0].trim());
                }
                if(line.contains(INFO_CONTAINS)){
                    String[] splitter = line.split(INFO_SPLIT);
                    String[] splitter2 = splitter[1].split(INFO_SPLIT_2);
                    String[] splitter3 = splitter[1].split(INFO_SPLIT_3);
                    String[] splitter4 = splitter3[1].split(INFO_SPLIT_4);
                    links.add(splitter2[0].trim());
                    titles.add(splitter4[0].trim());
                }
                if(line.equalsIgnoreCase(PRICE_INFO)){
                    String next = reader.nextLine().trim();
                    String[] splitter = next.split(PRICE_SPLIT);
                    String[] splitter2 = splitter[1].split(PRICE_SPLIT_2);
                    prices.add(splitter2[0].trim());
                }
                if(line.contains(PRICE_EXTENDED_INFO)){
                    String[] splitter = line.split(PRICE_SPLIT);
                    String[] splitter2 = splitter[1].split(PRICE_SPLIT_2);
                    prices.add(splitter2[0].trim());
                }
            }
        }
        if(!links.isEmpty()){
            try{
            for(int i = 0; i < prices.size(); i++){
                if(titles.get(i) != null && prices.get(i) != null && links.get(i) != null && images.get(i) != null){
                    final String title = titles.get(i);
                    final String price = prices.get(i);
                    final String link = links.get(i);
                    final String image = images.get(i);
                    results.add(new EbaySearchResult(title, price, link, image));
                }
            }
            }catch(Exception e){
                e.printStackTrace();
            }
        }
    }catch(Exception e){
        e.printStackTrace();
    }
    return results;
} 
```

问题是我的互联网一直在下降，从字面上看，一瞬间。我曾尝试在此站点上搜索其他问题，以了解“如何检查您是否仍处于连接状态”或类似问题。我尝试了多种方法，但似乎没有一种方法对我有用。问题是当我的互联网在那一瞬间掉线时，整个方法似乎中断了，变得无用（似乎扫描仪不会自动恢复）。我想要做的是添加检查以查看我是否仍然连接到该站点，如果没有，我基本上想循环回到开头（我知道如何做循环部分，但我只需要检查我是否连接的方法）任何帮助将不胜感激。

注意：没有堆栈跟踪。

编辑：我知道它仍在运行并且该方法正在停止，因为当我查看控制台时，程序仍在运行，基本上我的主要方法中的所有代码实际上都在调用方法“getResults”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:26:44.810

您可以在 try/catch 块周围放置一个循环，并在您想停止从 Ebay 阅读时终止。如果您断开连接，当您尝试从中读取时，流应该抛出异常，异常被捕获，此时（可能在 a 中`finally{}`）确保您的资源被释放，然后它循环回到`try{}`where的顶部创建一个新的扫描仪并建立一个新的连接。

通过确保资源被释放，您可能需要在 try 块之外的 InputStream 声明，并将其设置为`Url.openStream()`调用，以便您可以`close()`在块中调用输入流`finally{}`。

# iphone - iPhone应用程序中的gmail集成

> ID：11498054
> 
> 赞同：-1
> 
> 时间：2012-07-16T04:22:52.783
> 
> 标签：iphone, ios, ipad

我想创建一个应用程序，我想在其中集成 Gmail，用户可以通过它在应用程序中获取他们的电子邮件。那么我该怎么做呢？有谁能够帮我？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-16T04:25:11.230

试试这个项目

[http://code.google.com/p/gtm-oauth/](http://code.google.com/p/gtm-oauth/)

# c# - 如果项目在两个 ObservableCollection 数据类型之间相交，则删除该项目

> ID：11498056
> 
> 赞同：1
> 
> 时间：2012-07-16T04:23:14.780
> 
> 标签：c#, silverlight, list

如果项目在两个 Observable-collection 源之间相交，我该如何删除它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:25:02.753

```
foreach(var p in recentPatients.Intersect(patients).ToList())
    recentPatients.Remove(p); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:06:53.337

使用 Linq，除非您正在处理非常大的集合；但我假设不是，因为这些是可观察的集合。

给定

```
ObservableCollection<T> set1, ObservableCollection<T> set2 
```

得到交点为：

```
var intersection = set1.Intersect(set2); 
```

如有必要，请使用自定义相等比较器。

# git - emacs 临时文件的奇怪 .gitignore 行为

> ID：11498059
> 
> 赞同：15
> 
> 时间：2012-07-16T04:23:43.653
> 
> 标签：git, emacs

如果我`new_file.txt`使用 emacs 进行编辑，则会有临时文件，例如文件未保存和`#new_file.txt#`保存时。我想排除这些文件。所以我这样写：`.#new_file.txt``new_file.txt~``.gitignore`

```
#This is a comment line
*~
[#]*[#]
.\#* 
```

这非常有效。但后来我添加了一些注释行：

```
#This is a comment line
*~
[#]*[#]     # this is a comment
.\#*     # this is another comment 
```

在 a 之后`git status`，我看到两者`#new_file.txt#`并被`.#new_file.txt`列为未跟踪文件。

我认为可能会对作为注释行开头的字符`.gitignore`感到困惑。`#`所以我删除了这两条注释行。但是，又一次，`git status`我仍然看到 并列为未跟踪的文件。`#new_file.txt#``.#new_file.txt`

我愿意 ：

```
git rm -r --cached . 
```

正如[".gitignore not working"](http://www.randallkent.com/development/gitignore-not-working)中所建议的，但它没有帮助。

有人可以告诉我发生了什么，以及如何`.gitignore`按我的意愿工作吗？非常感谢你！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-16T05:10:08.220

对`.gitignore`文件的注释必须在自己的行上 - 任何尾随文件模式的注释都被解释为该模式的一部分。

将您的注释移动到模式之前的行，它应该返回到它的初始行为。

# yii - yii 通过下拉列表更新 clistview

> ID：11498061
> 
> 赞同：1
> 
> 时间：2012-07-16T04:23:52.063
> 
> 标签：yii

我是 Yii 框架的新手。我想创建一个页面。这是当下拉列表更改时，listview/gridview 将通过下拉值更改。

这是我的看法

```
<div class="row">
        <?php

        $records = Company::model()->findAll();
        $company_list = CHtml::listData($records, 'id', 'name');
        echo CHtml::dropDownList('company_id','', $company_list,
        array(
        'onchange'=>"$.fn.yiiListView.update('ajaxListView', {url: '".Yii::app()->createUrl('department/dynamicsectionlist')."?company_id='+$('#company_id option:selected').val()})",
        'prompt'=>'Please select a company',
        )); ?>
    </div>

<?php
$this->widget('zii.widgets.CListView', array(
    'dataProvider'=>$dataProvider,
    'itemView'=>'_view_section',
    'id'=>'ajaxListView',
));
?> 
```

这是模型

```
public function search()
    {
        // Warning: Please modify the following code to remove attributes that
        // should not be searched.

        $criteria=new CDbCriteria;

        $criteria->compare('id',$this->id);
        $criteria->compare('name',$this->name,true);
        $criteria->compare('p_id',$this->p_id);
        $criteria->compare('created',$this->created,true);
        $criteria->compare('updated',$this->updated,true);
        $criteria->compare('company_id',$this->company_id);

        return new CActiveDataProvider($this, array(
            'criteria'=>$criteria,
        ));
    } 
```

这是控制器

```
public function actionDynamicsectionlist()
    {       
        $company_id = $_POST['company_id'];
        $criteria=new CDbCriteria();
        $criteria->condition .= 't.id IN (SELECT t2.id, t2.name FROM department t2 WHERE t2.company_id = :company_id)';

        $criteria->params[':company_id'] = $company_id;
        $dataProvider = new CActiveDataProvider( 'Department', array( 'criteria' => $criteria, ) );
        $this->render( 'sectionlist', array( 'dataProvider' => $dataProvider ) );

    } 
```

但它不起作用。请帮我。

Regads Tharsoe

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:34:19.880

我解决了。

这是控制器

```
// Initial view (department/depatmentlist)
public function actionDepartmentlist()
    {
        $model=new Department('search');        
        $model->unsetAttributes();  // clear any default values     
        $model->p_id = 0;

        // $dataProvider->getData() will return a list of Post objects
        // $dataProvider=new CActiveDataProvider('Department');
        $this->render('list_department',array(
            'model'=>$model,
        ));

    }

// when the user selected the company from dropdown list
public function actionDynamicsectionlist()
    {
        $model=new Department('dsearch');
        $model->unsetAttributes();  // clear any default values
        $model->p_id = 0;
        if(isset($_GET['company_id']))
            $model->company_id = $_GET['company_id'];

        $this->render('sectionlist',array(
            'model'=>$model,
        ));
    } 
```

这是模型（没有变化）

```
public function search()
    {
        // Warning: Please modify the following code to remove attributes that
        // should not be searched.

        $criteria=new CDbCriteria;

        $criteria->compare('id',$this->id);
        $criteria->compare('name',$this->name,true);
        $criteria->compare('p_id',$this->p_id);
        $criteria->compare('created',$this->created,true);
        $criteria->compare('updated',$this->updated,true);
        $criteria->compare('company_id',$this->company_id);

        return new CActiveDataProvider($this, array(
            'criteria'=>$criteria,
        ));
    } 
```

这是视图 (list_department.php)

```
<h1>Departments List</h1>
<div class="row">
Company<br />
    <?php           
    $records = Company::model()->findAll();
    $company_list = CHtml::listData($records, 'id', 'name');
    echo CHtml::dropDownList('company_id','', $company_list,
    array('prompt'=>'Please select a company',)); ?>
</div>
<?php
/*
for ListView
$this->widget('zii.widgets.CListView', array(
    //'dataProvider'=>$dataProvider,
    'dataProvider'=>$model->search(),
    'itemView'=>'_view_section',
    'id'=>'ajaxListView',
));
*/
?>

<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'department-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        'id',
        'name',
        //'p_id',
        'created',
        'updated',
        //'company_id',

    ),
)); 
?>

<?php    
Yii::app()->clientScript->registerScript('search',
    "$('#company_id').change(function(){
    var companyId = $('#company_id option:selected').val();                              
    $.fn.yiiGridView.update(
    'department-grid',  
    { type: 'GET', 
    url: 'http://localhost/mmaig_ceo/ceo-control-system/index.php?r=department/dynamicdepartmentlist&ajax=department-grid&company_id=' + companyId

    }
    );
    });
")
?> 
```

# git - 忽略文件夹中的文件，但仍将其添加到 Git

> ID：11498063
> 
> 赞同：1
> 
> 时间：2012-07-16T04:24:29.303
> 
> 标签：git, frameworks, gitignore

我在我的项目中包含了 Zend，这个库有大约 2.8k 个文件。由于这是一个 PHP 框架，因此我的团队接触此文件夹的机会非常低。

问题是，我应该如何 gitignore 这个文件夹但仍将这个框架保留在存储库中？这甚至可能吗？即，我想`Zend`在 every 中被克隆`clone`，但我不希望 git 每次扫描这些文件夹`status`或`commit`- 这需要 3 秒或更长时间，具体取决于我的 PC 状态。

*   子模块？但这不是远程仓库，或者这意味着我需要为 Zend 创建一个远程仓库
*   gitignore，`add -f`似乎添加了框架，但所有文件都被跟踪

忽略文件夹的原因是为了加快提交速度。这不是我们使用的唯一框架，另一个框架也有超过数千个文件 - 在 Windows 机器上它慢得难以忍受。

**编辑**

似乎之前已经回答过，唯一的方法是使用子模块：

*   [https://stackoverflow.com/a/10810901/534862](https://stackoverflow.com/a/10810901/534862)

它似乎`update-index`是你的方式之一：

*   [http://justaddwater.dk/2009/12/07/how-to-make-git-ignore-files-that-already-exist-in-your-project/](http://justaddwater.dk/2009/12/07/how-to-make-git-ignore-files-that-already-exist-in-your-project/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:38:18.553

使用子模块。通过将其托管在 github 上使其成为远程仓库。现在，您将拥有一个不错的轻量级 repo，其中仅包含团队所做的工作。即使您想更新 Zend，您也可以这样做，但一旦完成就不会影响日常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T16:55:42.210

如果您将文件放在 Zend 目录中，例如`.gitkeep`.gitignore，然后将以下内容添加到您的 .gitignore 中会怎样：

```
# ignore everything in Zend
Zend/*
# except .gitkeep
!Zend/.gitkeep 
```

这将产生忽略该目录中所有内容的效果，但会保留该目录以用于 .gitkeep。

我不是 100% 肯定 git 会做聪明的事情，而不是扫描目录中的其他文件，但我很有希望。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-16T04:34:21.813

使用带有 --cached 选项的 git rm 命令。有了它，git会销毁框架的所有轨道。因此，您在项目文件夹中再次插入框架并将其添加到 .gitignore。我正在寻找您的参考资料。

**编辑：**

我发现。看看[这里](http://git-scm.com/book/en/Git-Basics-Recording-Changes-to-the-Repository#Removing-Files)。

# javascript - 如何使用外部“.js”文件

> ID：11498068
> 
> 赞同：48
> 
> 时间：2012-07-16T04:25:28.123
> 
> 标签：javascript, html

我有以下两个javascript函数：

1

```
showCountry() 
```

2

```
showUser() 
```

我想把它们放在外部“.js”文件中

1

```
<a href="javascript:showCountry('countryCode')">countryCode</a> 
```

2

```
<form>
 <select name="users" onChange="showUser(this.value)">
 <option value="1">Tom</option>
 <option value="2">Bob</option>
 <option value="3">Joe</option>
 </select>
</form> 
```

调用这些函数的正确语法是什么？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-07-16T04:33:46.687

像这样的代码

```
 <html>
    <head>
          <script type="text/javascript" src="path/to/script.js"></script>
          <!--other script and also external css included over here-->
    </head>
    <body>
        <form>
            <select name="users" onChange="showUser(this.value)">
               <option value="1">Tom</option>
               <option value="2">Bob</option>
               <option value="3">Joe</option>
            </select>
        </form>
    </body>
    </html> 
```

我希望它会帮助你....谢谢

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-12-03T07:28:34.943

注意：- 不要在外部 JavaScript 文件中使用***脚本标签。***

```
<html>
<head>

</head>
<body>
    <p id="cn"> Click on the button to change the light button</p>
    <button type="button" onclick="changefont()">Click</button>

     <script src="external.js"></script>
</body> 
```

外部 Java 脚本文件：-

```
 function changefont()
            {

                var x = document.getElementById("cn");
                x.style.fontSize = "25px";           
                x.style.color = "red"; 
            } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-16T04:30:26.967

在你的头部元素中添加

```
<script type="text/javascript" src="myscript.js"></script> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-16T04:35:27.463

这是在 HTML 标记中包含外部 javascript 文件的方法。

```
<script type="text/javascript" src="/js/external-javascript.js"></script> 
```

`external-javascript.js`要包含的外部文件在哪里。确保包含路径和文件名正确。

```
<a href="javascript:showCountry('countryCode')">countryCode</a> 
```

上面提到的方法对于锚标签是正确的，并且可以完美地工作。但是对于其他元素，您应该明确指定事件。

例子：

```
<select name="users" onChange="showUser(this.value)"> 
```

谢谢， XmindZ

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-07-18T13:02:10.260

您可以像这样简单地将 JavaScript 添加到正文段中：

```
<body>

<script src="myScript.js"> </script>
</body> 
```

`myScript`将是您的 JavaScript 的文件名。只需编写代码并享受！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-08T23:47:39.610

我希望这对这里的某人有所帮助：我遇到了一个问题，我需要使用 JavaScript 来操作一些动态生成的元素。在将代码包含到我`<script>` `</script>`在头部的标签之间引用过的外部 .js 文件中并且它运行良好之后，脚本中没有任何效果。尝试在 FF 上使用开发人员工具，它为持有的变量返回 null 值新元素。我决定将我的脚本标签移动到 html 文件的底部，就在`</body>`标签和宾果游戏之前，脚本的每个部分都开始再次正常响应。

# java - 如何声明具有变量泛型的地图？

> ID：11498069
> 
> 赞同：8
> 
> 时间：2012-07-16T04:25:38.390
> 
> 标签：java, generics, map

我有一个`Map`其键是通用类型`Key<T>`的，值是类型的`List<T>`。如果键是 的实例`Key<String>`，则值必须是 a `List<String>`，并且相同的规则适用于任何其他键值对。我尝试了以下方法，但无法编译：

```
Map<T, List<T>> map; 
```

目前我必须用“部分”泛型声明它：

```
Map<Object, List> map; 
```

我知道这很糟糕，但我目前没有更好的选择。在这种情况下可以使用泛型吗？

**更新**

也许我没有清楚地表达我的问题。我想要一张能够：

```
map.put(new Key<String>(), new ArrayList<String>());
map.put(new Key<Integer>(), new ArrayList<Integer>()); 
```

以下代码不应编译：

```
map.put(new Key<String>(), new ArrayList<Integer>()); 
```

键和值应该始终具有相同的泛型类型，而泛型类型可以是任何类型，显然扩展映射不符合我的要求。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T05:16:31.003

我不知道有任何现有的库可以做到这一点，但自己实现并不难。我过去做过几次类似的事情。您不能使用标准的 Map 接口，但可以使用内部的哈希映射来实现您的类。首先，它可能看起来像这样：

```
public class KeyMap {
  public static class Key<T> { }

  private final HashMap<Object,List<?>> values = new HashMap<Object,List<?>>();

  public <T> void put(Key<T> k, List<T> v) {
    values.put(k, v);
  }

  public <T> List<T> get(Key<T> k) {
    return (List<T>)values.get(k);
  }

  public static void main(String[] args) {
    KeyMap a = new KeyMap();
    a.put(new Key<String>(), new ArrayList<String>());
    a.get(new Key<Integer>());
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T04:33:28.047

这就是你想要的：

```
public class Test<T> extends HashMap<T, List<T>>
{
} 
```

如果您不希望 HashMap 作为超类，请将其更改为您想要的任何具体类。

# macos - Bash .profile 未加载

> ID：11498070
> 
> 赞同：16
> 
> 时间：2012-07-16T04:25:41.493
> 
> 标签：macos, bash, .bash-profile

我不确定发生了什么，但我的 ~/.profile 不再加载。

任何人都可以看到以下内容有问题吗？

```
export PS1="\u@local [\w]# "
export EDITOR="subl -w"
export CLICOLOR=1
export LSCOLORS=GxFxCxDxBxegedabagaced

alias vst="ssh -i ~/.ssh/vst root@vst" 
```

我知道一个事实，使用 PS1 就像我试图做`Peter@local [~/path/to/file]#`的那样，但事实并非如此。

有任何想法吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-16T05:59:24.717

`~/.bash_profile`存在还是`~/.bash_login`存在？如果是这样，那将被用来代替`~/.profile`.

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-03-19T18:41:38.387

在[Unix FAQ (for OS X)](http://hayne.net/MacDev/Notes/unixFAQ.html#shellStartup)我们可以阅读：

> **Bash 启动文件**
> 
> 当“登录外壳”启动时，它会读取文件 `/etc/profile`，然后读取`~/.bash_profile`或`~/.bash_login`或 `~/.profile`（**无论哪个存在 - 它只读取其中一个**，并按照提到的顺序检查它们）。
> 
> 当“非登录外壳”启动时，它会读取文件`/etc/bashrc`，然后读取文件`~/.bashrc`.
> 
> 请注意，当使用 name 调用 bash 时`sh`，它会尝试模仿 Bourne shell ( `sh`) 的启动顺序。特别是，默认情况下**调用 as 的非登录 shell`sh`不会读取任何点文件**。有关详细信息，请参阅 bash 手册页。

因此，如果您已经拥有，则bash 不会自动读取`~/.bash_profile`该文件，因此您可以在您的文件中添加以下行来加载它：`~/.profile``~/.bash_profile`

```
# Load user profile file
if [ -f ~/.profile ]; then
  . ~/.profile
fi 
```

# sitecore - Sitecore 中的自定义富文本编辑器以生成 BBCode 标签而不是 HTML

> ID：11498071
> 
> 赞同：0
> 
> 时间：2012-07-16T04:25:47.163
> 
> 标签：sitecore, bbcode, rich-text-editor

我目前正在使用 Sitecore 创建一个移动网站，我不能使用 HTML 作为标记，而是需要使用 BML 作为移动标记语言。请让我知道这方面的以下内容：

1.  我们有一个名为`Description`及其类型的字段`RICH TEXT`。在这里，我们不能使用 Sitecore 在生成 HTML 时提供的普通富文本编辑器。因此，谁能告诉我是否可以使用“移动粗体”按钮创建自定义的富文本编辑器，并且应该为移动设备生成标签而不是普通的 HTML`<b></b>`标签。

2.  众所周知，我们可以通过将字段的源属性设置为 来将富文本编辑器从默认更改为完整`/sitecore/system/Settings/Html Editor Profiles/Rich Text Full`。因此，以类似的方式，我可以在 Core DB 中再创建一个项目，并在其中`/sitecore/system/Settings/Html Editor Profiles/MobileRichTextFull`包含自定义按钮，以便生成如上所述的 BML 标签。如果可能的话，请告诉我需要完成的所有设置以及要遵循的步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:17:37.230

您希望用户直接编辑 BML，还是能够将 HTML 转换为 BML？

对于后者，您最好在表示层/管道中解决这个问题。当您选择最后一个解决方案时，HTML Agility Pack 将成为您的朋友。

否则，请查看有关编辑器的 Teleriks 资源。

# sql - 合并两个相同的表

> ID：11498072
> 
> 赞同：0
> 
> 时间：2012-07-16T04:25:48.520
> 
> 标签：sql, sql-server, sql-server-2008

我在 sql server 2008 R2 中有两个表。
一个表有如下记录，这个表叫做 ASTM_Table

![ASTM_Tables](../Images/2932d0810ff8c1ac890ee9c2f01afe15.png)

另一个名为 ASTM1 的表是这样的

![在此处输入图像描述](../Images/8d943525756ceee169d6a138eb2f91b4.png)

Astm1 表包含 0.1 差异的重力，而“astm_table”具有 0.5 差异的重力（但是，此表是最新的）

我想要的只是从 astm1 表中获取所有这些记录并将它们合并到 astm_table 中，但只有那些在 astm_table 中不可用的记录。

例如，在astm_table中，重力54.1、54.2、54.3、54.4、54.6、54.7、54.8、54.9不可用。所以我想从 astm1 表中获取这些值并将它们复制到 astm_table 中。

是否有可能，是的，那么哪个查询可以完成这项工作？请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T04:41:09.117

如果我理解正确，您只想插入 ASTM1 中的所有行，除了那些已经在 ASTM_Table 中的行。在这种情况下：

```
INSERT INTO ASTM_Table
(astm_id,Table_No,Temperature,Gravity,Result)
SELECT
id,
TBLE,
TEMPR,
GRV_OB,
GRV_SP
FROM ASTM1
WHERE
NOT EXISTS(SELECT * FROM ASTM_Table X WHERE X.Gravity=GRV_OB) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:56:13.067

尝试这个

```
INSERT INTO ASTM_Tables
(Table_No,Temperature,Gravity,Result)
SELECT TBLE, TEMPR, GRV_OB, GRV_SP
FROM ASTM1
WHERE
tble = '5a' and
not EXISTS(SELECT * FROM ASTM_Tables X WHERE X.Gravity = GRV_OB and x.table_no = tble)
order by tble, tempr, grv_ob 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T07:06:23.733

我只是在一个例子中简化了你的查询，请试试这个..

```
create table dbo.t1(id int identity(1,1) not null,col1 int,col2 int)
go
create table dbo.t2(id int identity(1,1) not null,col1 int,col2 int)
go
insert into dbo.t1 values(102,22),(32,33),(10,11)
insert into dbo.t2 values(102,22),(32,33),(10,11),(33,55),(44,66)
go
select id,col1,col2 from t2 
except 
select id,col1,col2 from t1
go
drop table t1,t2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T04:36:58.133

看看这个

[EXCEPT 和 INTERSECT (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms188055.aspx)

您可能想专门查看该`EXCEPT`声明

# php - 使用 .htaccess 和 2 个或更多参数的 URL GET 请求格式

> ID：11498077
> 
> 赞同：0
> 
> 时间：2012-07-16T04:26:23.973
> 
> 标签：php, .htaccess

好吧，我认为这是一个非常常见的问题，但我的问题将集中在处理具有两个以上 .htaccess 格式的参数的获取请求上。

所以对于我当前的 .htaccess

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^([^/]+)$ $1.php 
```

它改变了

mydomain.com/basis_native/home.php

进入。

mydomain.com/basis_native/home

但是当我添加一个 GET 参数时，它会是这样的：

mydomain.com/basis_native/home?role=verifier&page=dashboard

我想要的是用一种很好的方式来处理它，比如：

mydomain.com/basis_native/home/verifier/dashboard

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:32:42.750

将您更改`RewriteRule`为：

```
RewriteRule ^([^/]+)/([^/]+)/([^/]+)$ $1.php?role=$2&page=$3 [QSA] 
```

# iphone - iPhone SDK：如何从文本视图中提取特定文本？

> ID：11498078
> 
> 赞同：1
> 
> 时间：2012-07-16T04:26:29.587
> 
> 标签：iphone, objective-c, ios, ios4, uitextview

我有一个已经从网站提取文本的文本视图。所以，假设文本视图中的文本有这个文本：

```
Save Location 

84°F 

Clear 

Feels like 90°F 
```

在此文本中，如何将“84°F”中显示 84 的文本提取为字符串？请记住，84 是网站上不断变化的变量，因此有时它会是一个不同的数字，我无法直接搜索该数字。如果您知道如何执行此操作，请告诉我 :) 感谢您抽出宝贵时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T04:41:08.977

尝试这样的事情：

```
NSString *originalString = @"Save Location 84°F Clear Feels like 90°F";

NSMutableString *stringWithNums = [NSMutableString stringWithCapacity:originalString.length];

NSScanner *scanner = [NSScanner scannerWithString:originalString];
NSCharacterSet *numbers = [NSCharacterSet 
                       characterSetWithCharactersInString:@"0123456789"];

while ([scanner isAtEnd] == NO) {
    NSString *buffer;
    if ([scanner scanCharactersFromSet:numbers intoString:&buffer]) {
        [stringWithNums appendString:buffer];

    } else {
        [scanner setScanLocation:([scanner scanLocation] + 1)];
        [stringWithNums appendString:@" "];
    }
} 
```

现在`stringWithNums`将包含如下内容：

> 84（一些空格）90

然后你可以像这样解析`stringWithNums`：

```
NSArray *tempArray = [stringWithNums componentsSeparatedByString: @" "];
NSString *finalTemperature;

for(int index = 0; index < [tempArray count]; index++){

    if([[tempArray objectAtIndex:index] intValue] != 0 && [[tempArray objectAtIndex:index] intValue] < 200){
        finalTemperature = [tempArray objectAtIndex: index];
        break;
    }
} 
```

`finalTemperature`将包含“84”。您可以将其放在方法形式中并`originalString`作为参数传入，以便您可以重用此代码。希望这会有所帮助，如果您有任何问题，请务必在评论中提问！

更新：我添加了这一行： && [[tempArray objectAtIndex:index] intValue] < 200

到上面的 if 语句，所以它现在看起来像这样：

```
if([[tempArray objectAtIndex:index] intValue] != 0 && [[tempArray objectAtIndex:index] intValue] < 200){ 
```

在网站文本中，“82”之前的唯一数字似乎是邮政编码，长度为 5 位。实际上，所有温度（地球上）都低于 200（3 位数），所以我输入的额外行确保最终温度是三位数或更少的数字，而不是 5 位数的邮政编码。

希望这可以帮助！

# cassandra - 如何使用 Riak 对 Cassandra 的超级列族进行建模？

> ID：11498082
> 
> 赞同：1
> 
> 时间：2012-07-16T04:27:04.933
> 
> 标签：cassandra, data-modeling, riak

我们正在研究为我们的 Web 服务选择一个 nosql 数据库。我们已经尝试了 Cassandra，并成功地使用 Cassandra 列族和超级列族对我们的原始 MySQL 数据进行了建模。这是一个非常有趣的经历。现在，我们开始研究 Riak 并想知道如何使用 Riak 对 Cassandra 的超级列族进行建模。

比如我们有一个超级列族来存储一个用户的所有好友，其中用户的id为key，好友连接时的时间戳为辅键，节点列族中好友的键值对。

```
uid1 ---- t1 ---- key1 : value11
                  key2 : value12

          t2 ---- key1 : value21
                  key2 : value22

          ...     ...    ...

uid2 ---- tm ---- key1 : valuem1
                  key2 : valuem2

          tn ---- key1 : valuen1
                  key2 : valuen2

          ...     ...    ...

uidx ---- .... 
```

通过上述数据建模，一种用法是我们可以进行范围查询以获取给定时间范围内连接的用户（uid1，例如）的所有（或给定计数）朋友。

使用Riak，应该如何对数据进行建模才能实现上面的使用场景呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:50:13.450

在 Riak 你会使用[Links](http://wiki.basho.com/Links.html)。您将存储用户信息、朋友的用户信息，然后创建从一个朋友到另一个朋友的“链接”。如果您愿意，这可以是双向的。

```
Link: </riak/users/alice>; riaktag="bob" 
```

# java - Java内部类的名称解析

> ID：11498084
> 
> 赞同：0
> 
> 时间：2012-07-16T04:27:17.910
> 
> 标签：java, jenkins, scope, inner-classes

我目前正在尝试为 Jenkins CI 制作一个插件。我正在尝试创建一个新的项目类型，但在编译代码时遇到了一些问题。我在 Jenkins 代码库中看到了以下工作：

```
// hudson/model/AbstractBuild.java
package hudson.model;
public abstract class AbstractBuild<P extends AbstractProject<P,R>,R extends AbstractBuild<P,R>> extends Run<P,R> implements Queue.Executable {
    public abstract class AbstractBuildExecution extends Runner {
        // ...
    }
}

// hudson/matrix/MatrixBuild.java
package hudson.matrix;
public class MatrixBuild extends AbstractBuild<MatrixProject,MatrixBuild> {
    public class MatrixBuildExecution extends AbstractBuildExecution {
        // ...
    }
} 
```

这两个文件编译得很好。当我尝试在我的插件中做同样的事情时......

```
package parallelbuild;
public class ParallelBuild extends AbstractBuild<ParallelProject,ParallelBuild> {
    public class ParallelBuildExecution extends AbstractBuildExecution {
        // ...
    }
} 
```

Maven 给了我来自 javac 的以下错误。

```
[ERROR] /home/jsternberg/jenkins-parallel-build/parallel-build/src/main/java/parallelbuild/ParallelBuild.java:[29,48] cannot find symbol
[ERROR] symbol  : class AbstractBuildExecution
[ERROR] location: class parallelbuild.ParallelBuild
[ERROR] /home/jsternberg/jenkins-parallel-build/parallel-build/src/main/java/parallelbuild/ParallelBuild.java:[29,48] cannot find symbol
[ERROR] symbol  : class AbstractBuildExecution
[ERROR] location: class parallelbuild.ParallelBuild
[ERROR] -> [Help 1] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:06:58.713

您的 POM 是否使用包含具有内部 AbstractBuildExecution 类的 AbstractBuild 的版本？

之所以这么说，是因为至少有一个版本的 AbstractBuild (1.312) 没有它。

# android - 如何使用指挥班管理所有活动转移

> ID：11498085
> 
> 赞同：2
> 
> 时间：2012-07-16T04:27:21.763
> 
> 标签：android, android-activity

我想用这样的类指挥管理所有活动： ![在此处输入图像描述](../Images/3f60d051d3ac8c2087da2fd34394e2ad.png)
***所有***活动都扩展基本活动以使用公共视图。
在这种情况下，我想处理传输活动，例如：

```
 Base -> First -> Second -> Third -> First
 Base -> First -> Fourth -> Fifth -> Fourth 
```

传输活动时，导体必须处理堆栈中的所有活动。
我尝试如下编写这个导体（我使用列表而不是堆栈来管理）：

```
public class Conductor {    
   private List<Activity> listOfActivityInStack;  

   public Conductor(){
  listOfActivityInStack = new ArrayList<Activity>();
   }
   public void startActivity(Activity activity, Class<?> cls){
  listOfActivityInStack.add(activity);
  Intent i = new Intent(activity.getApplicationContext(), cls);
  activity.startActivity(i);
}

   public void startActivityForResult(Activity activity, Class<?> cls, int requestCode){
  listOfActivityInStack.add(activity);
  Intent i = new Intent(activity.getApplicationContext(), cls);
  activity.startActivityForResult(i, requestCode);
}

   public void startAcitivtyClearPrevious(Activity activity, Class<?> cls){
  listOfActivityInStack.clear();
  listOfActivityInStack.add(activity);
  Intent i = new Intent(activity.getApplicationContext(), cls);
  i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
  activity.startActivity(i);
}

   public int getCount(){
  if(listOfActivityInStack == null)
    return 0;
  return listOfActivityInStack.size();
 }
 } 
```

我将此导体存储在全局变量中。然后我使用它如下：

```
 //Get conductor from application global
  conductor.startActivity(FirstActivity.this, SecondActivity.class);
  //Then add conductor to application global 
```

但我有一些问题：

*   我必须为所有活动处理 goBack() 以从列表中删除活动。
*   检查列表中是否存在活动，如果是，请尝试获取其实例。

有没有最好的方法来管理 android 上的所有活动？我试过搜索，但没有找到好的答案。
我想知道天气是否正确。任何推荐或示例都会有所帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:08:31.817

有一种方法可以做到这一点。您必须保存所有活动状态。当您需要召回它们时，您必须使用该状态。

更多信息请看这里：

[使用 Save Instance State 保存 Android Activity 状态](https://stackoverflow.com/questions/151777/saving-an-android-applications-state)

# c# - DateTime 给我“01/01/0001 12:00:00 AM”而不是实际日期

> ID：11498087
> 
> 赞同：2
> 
> 时间：2012-07-16T04:28:13.603
> 
> 标签：c#, asp.net-mvc

我正在使用 MVC 4，并且我有一个接受两个日期的表单字段。一个用于签入，另一个用于结帐。该课程非常基础：

```
public class date {
     public DateTime Checkin { get; set; }
     public DateTime Checkout { get; set; }
} 
```

我使用的格式是 mm/dd/yyyy，其中用户使用 javascript 日历输入签入日期并使用 jquery 移动滑块调整签出日期。但是，我似乎总是得到“01/01/0001 12:00:00 AM”而不是实际日期。我将解决方案提供给了我的同事，即使代码完全相同，他们也没有问题。

是否有我可以更改的设置或者我的视觉工作室搞砸了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T04:31:56.350

你有分配这些属性的代码吗？这是 的默认值`DateTime`，因此应该分配的任何内容都可能根本不执行。是`date`模特吗？如果您依赖 mvc 模型绑定器，请确保您的控制器操作接受 type 的参数`date`。（也许还考虑改进名称）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T04:31:45.270

您显示的类将初始化`Checkin`为`Checkout`DateTime.MinValue，即 01/01/0001 的上午 12 点。

您不会显示任何从初始化值更改该值的代码。

大概是从 UI 到模型的绑定是不正确的。您将不得不发布更多代码来准确诊断出问题所在。建议您在接受来自 UI 的新值的控制器中发布操作。

有关使用 DateTime 作为控制器操作的参数会出现什么问题的指导，请参阅此类似帖子：

[如何在 asp.net mvc 中将日期时间值作为 URI 参数传递？](https://stackoverflow.com/questions/1224201/how-do-i-pass-a-datetime-value-as-a-uri-parameter-in-asp-net-mvc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-24T15:28:57.127

您在客户端的绑定不起作用，请查看您用于日期的输入的名称，例如，检查下面，您可以拥有日期选择器的 id，但属性***名称***应该具有此值: **Checkin**和其他**Checkout**

```
<input id=datepicker name="Checkin" />
<input id=datepicker name="Checkout" /> 
```

# c++ - 使用 GNU C++ 为 Maya 编译时出现编译器错误

> ID：11498090
> 
> 赞同：1
> 
> 时间：2012-07-16T04:28:37.257
> 
> 标签：c++, api, plugins, gnu, maya

我对 C++ 编程相当陌生，对使用 Maya C++ API 进行编程非常陌生。我一直在尝试使用 GNU C++ 编译器，因为我有 64 位版本的 Maya，但我只能免费使用 32 位版本的 Visual C++。这一切都在 64 位 Windows Vista 中运行。

问题是当我尝试编译 Maya 附带的 helloWorldCmd.cpp 示例时，我收到错误消息，提示包含的 Maya 头文件存在问题。Maya 的编译器头文件实际上是否存在问题，或者仅仅是 GNU C++ 不能用于为 Maya 编译插件？我需要帮助，因为这个问题可能会阻止我继续学习如何为 Maya 编写插件。

以下是生成的编译器错误。如果有人能破译问题所在，我将不胜感激：

```
C:\MyPrograms>c++ helloWorldCmd.cpp -o helloWorld.exe
In file included from c:\mingw\bin\../lib/gcc/mingw32/4.6.2/../../../../include/
maya/MString.h:47:0, from c:\mingw\bin\../lib/gcc/mingw32/4.6.2/../../../../include/
maya/MSimple.h:48, from helloWorldCmd.cpp:30:
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/../../../../include/maya/MTypes.h:239:8: e
rror: expected identifier before 'false'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/../../../../include/maya/MTypes.h:239:8: e
rror: expected '}' before 'false'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/../../../../include/maya/MTypes.h:239:8: e
rror: expected unqualified-id before 'false'
c:\mingw\bin\../lib/gcc/mingw32/4.6.2/../../../../include/maya/MTypes.h:239:18:
error: expected declaration before '}' token 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T18:16:00.860

在windows中你应该考虑使用visual studio来编译maya插件，在linux g++中正常的过程是这样的，我不确定它在windows中是如何的。

gcc -fmessage-length=0 -Os -pthread -Wno-deprecated -fno-gnu-keywords --fast-math -fPIC -DLINUX -D_ *USER* _=USER -D_ *HOST* _=HOST -D_ *PROJECTNAME* _=PROJECT -D_ *BUILDVERSION* _=VERSION -DNDEBUG -DREQUIRE_IOSTREAM **-D_BOOL** -I$MAYA_LOCATION/include -I/home/user/customIncludes -O3 -shared -o /tm/helloWorldCmd.so helloWorldCmd.cpp

请注意 D_BOOL 。

并且请不要玛雅不寻找 exe，玛雅在 Windows 中寻找 mll 等在 linux 中。因此，如果您真的是 Maya api 新手，您应该尝试使用 Visual Studio，而 Maya Devkit 有一个 Visual Studio 插件向导，可以帮助您配置插件及其依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T05:26:14.647

问题似乎是 Maya 没有正确检查 C++ 关键字`true`,`false`和`bool`类型。

在 Google 上搜索后，我找到了头文件的副本，如果您自己查看该文件，您会发现它会检查宏`_BOOL`以了解它是否应该创建自己的`bool`类型。

解决方案可能就像添加一样简单

```
#define _BOOL 
```

在包含头文件之前。

请注意，如果头文件错误地检查其他内容，您可能会遇到其他错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T22:57:47.830

使用完整版 Visual Studio 的问题在于，对于学习者来说，购买它的成本有点高，而且 Visual C++ Express 的本机安装只能编译为 32 位目标。但是，我遇到了这篇博客文章，它解释了如何让软件开发工具包与编译为 64 位的 Visual C++ Express 一起使用。它还解释了如何进行所有进一步的设置以准备构建 Maya 插件：

[http://prilisa.com/2012/01/my-first-maya-2011-c-plug-in.html](http://prilisa.com/2012/01/my-first-maya-2011-c-plug-in.html)

# c++ - 用 C++ 实现图形类

> ID：11498096
> 
> 赞同：1
> 
> 时间：2012-07-16T04:29:12.793
> 
> 标签：c++, graph-theory

这是我的课：

```
template <class T>
class Vertex
{
private:
  T data;
  Vertex<T>* next;
public:
  friend class Graph;
  Vertex(T dat, Vertex<T>* nex)
  {   
    data=dat;  next = nex;
  }
};

template <class T>
class Graph
{
public:
  Vertex<T>* head;
  Graph() : head(NULL)
  {
  }

  void insert(T data)
  {
    Vertex<T>* ptr = new Vertex<T>(data, head);
    head = ptr;
  }
}; 
```

主要：

```
int main()
{
  Graph<int> graph;
  graph.insert(1);
} 
```

当我编译它告诉我这个：

```
graph.h: In instantiation of ‘Vertex<int>’:
graph.h:30:   instantiated from ‘void Graph<T>::insert(T) [with T = int]’
main.cpp:6:   instantiated from here
graph.h:10: error: template argument required for ‘struct Graph’ 
```

是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T04:40:40.147

`Graph`在朋友声明中使用该类时，您必须“转发声明”该类：

```
template <class T>
class Graph;

template <class T>
class Vertex
{
private:
//...
public:
friend class Graph<T>;
// ... and so on 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T04:40:39.730

如错误消息所述，无论您在何处使用 Graph 类，您都需要为其提供模板参数。所以，朋友类声明应该有

```
friend class Graph<T>; 
```

代替

```
friend class Graph; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T04:50:05.050

实际上，不需要前向声明。如果尚未定义类或函数，则友元声明会创建前向声明。标准明确说明了这一点。你应该写：

```
template <class T> friend class Graph; 
```

这将有效地将所有实例声明`Graph`为当前类的朋友。

# java - Glassfish：索引 11 处路径中的非法字符：commons-logging-1.1.jar？

> ID：11498098
> 
> 赞同：1
> 
> 时间：2012-07-16T04:29:28.067
> 
> 标签：java, glassfish-3, apache-commons-logging

所以我即将开发一个 Spring MVC Web 应用程序。但是每次我部署应用程序时都会出现一个例外情况：

> java.net.URISyntaxException：索引 11 处路径中的非法字符：file:/E:/My Documents/NetBeansProjects/ProjectName/build/web/WEB-INF/lib/commons-logging-api-1.1.jar。

所以我想可能是 jar 损坏了，所以我下载了另一个也有同样问题的 jar 文件。这是什么原因造成的？

Web 应用程序本身运行良好。但这个例外仍然让我很恼火。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T04:32:09.027

你的意思是索引 11 处的空间吗，空间在 uri 中无效，对空间进行编码

```
file:/E:/My%20Documents/NetBeansProjects/ProjectName/build/web/WEB-INF/lib/commons-logging-api-1.1.jar 
```

# c - C：控制台输出中的垃圾字符

> ID：11498100
> 
> 赞同：3
> 
> 时间：2012-07-16T04:29:43.030
> 
> 标签：c, pointers

我通过创建各种简单的函数来学习 C 指针。我刚刚创建了一个函数来反转 char 数组。它可以工作，但在输出之后它还会显示一堆垃圾字符（见下面的截图）。

![截屏](../Images/bda7baae75ff157ca505619d074fe33e.png)

这是我的代码：

```
void reverseString();

int main()
{
    reverseString();

    system("PAUSE");
    return 0;
}

void reverseString()
{
    char string1[20], string2[20];
    char *ptr1, *ptr2;
    ptr1 = &string1[0];
    ptr2 = &string2[0];

    printf("Enter string: \n");
    scanf("%s", string1);

    int len1 = strlen(string1);

    int i;
    for (i = 0; i < len1; i++)
    {
        ptr2[i] = ptr1[len1 - i - 1];
    }

    printf("%s\n", string2);
} 
```

我怎样才能摆脱垃圾字符？我的代码有什么问题，还是我只是不考虑什么或什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T04:32:09.903

您忘记对新字符串进行 nul 终止：

```
int i;
for (i = 0; i < len1; i++)
{
    ptr2[i] = ptr1[len1 - i - 1];
}

//  Add this
ptr2[i] = '\0'; 
```

* * *

当您打印 a`char*`时，它将继续阅读，直到找到该 nul 字符。但自从你把它排除在外，它就一直在继续……

# javascript - 使用javascript执行链接

> ID：11498101
> 
> 赞同：1
> 
> 时间：2012-07-16T04:29:55.227
> 
> 标签：javascript, ajax, hyperlink, execute

单击以下链接可打开视频：

```
<a href="<?php echo  $rows['image1'] ; ?> " rel="vidbox" title="<?php  echo  $rows['name']."          <br>".nl2br($rows['detail']) ; ?>" id="m2"><?php echo  $rows['name'] ; ?></a> 
```

我可以使用 Javascript/PHP 运行/执行此链接，就好像有人单击了此链接一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T04:53:49.343

无法使用 javascript/jquery 单击链接。您可以使用触发绑定事件，`$('#m2').click()`但它不会打开 url。你可以做的是，使用 document.location.href 打开页面

```
document.location.href = document.getElementById('m2').href; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T04:47:45.820

如果你使用 jQuery，试试这个。

```
$(document).ready(function(){
    $('#m2').click();
}); 
```

`m2`要点击的链接的ID在哪里。

# python - 告诉 Python 在到达最后一个字符时停止在 for 循环中进行比较

> ID：11498102
> 
> 赞同：3
> 
> 时间：2012-07-16T04:30:04.123
> 
> 标签：python, python-2.7

目前我的代码正在查看一个巨大的字符串。它像这样比较字符串：

```
a = 0
for letter in my_str:
    a += 1
    if letter <= my_str[a]: 
```

当我收到“字符串索引超出范围”错误时，它会一直比较直到结束。我知道这是因为它试图将字符串中的最后一个字符与下一个字符（不存在）进行比较 如何解决这个问题！我觉得我已经尝试了一切。帮助表示赞赏。

编辑：好像我刚刚想出了我的解决方案......无论如何，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T04:33:19.773

[使用来自itertools](http://docs.python.org/library/itertools.html#recipes)的成对配方

```
>>> from itertools import tee, izip
>>> def pairwise(iterable):
        "s -> (s0,s1), (s1,s2), (s2, s3), ..."
        a, b = tee(iterable)
        next(b, None)
        return izip(a, b)

>>> text = 'abc'
>>> for x, y in pairwise(text):
        if x <= y:
            pass 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T04:41:19.350

在迭代字符串时避免使用索引来处理字符串。不要将当前字母与下一个字母进行比较，而是将当前字母与*前*一个字母进行比较，这是您在最后一次循环中保存的。将循环外的“previous”变量初始化为对第一遍有意义的东西。

```
lastletter = ""
for letter in text:
    if lastletter <= letter:   # always true for first char
        # do something
    lastletter = letter 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T04:34:15.627

你可能想要的是

```
for i in range(len(str)-1):
    if str[i] <= str[i+1]: 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-16T04:36:13.560

我只是在开头添加了另一个 if 语句，如下所示..

```
if a < len(str): 
```

不知道为什么我花了这么长时间才弄清楚！

# javascript - 如何在我的 jquery 菜单中的 li 项下添加一行？

> ID：11498106
> 
> 赞同：0
> 
> 时间：2012-07-16T04:31:20.843
> 
> 标签：javascript, jquery, css, dynamic, menu

我不确定从哪里开始，但我有一个用 jquery 完成的菜单。当您现在将鼠标悬停在上面时，它会对文本产生一些淡入/淡出效果，并且链接是手动处理的。

我想添加一条简单的线，也许用 css 完成？当您悬停时，在每个 li 下也有一个项目，滑到您悬停的 li，而不仅仅是出现。

我只是不知道从哪里开始这样的事情，因为我以前从来没有在没有图像的情况下真正做到过（最好）。粗略地需要从某个地方开始并单独移动 ul 并在您用鼠标离开 div 时停止在任何地方，并且我希望在您单击链接时保持打开状态。我不是要求任何人为我做这个（除非你喜欢它），只是为了指出正确的方向。我已经看到了一些带有执行此操作的菜单的免费代码，并尝试使用它们或模拟它们，但它不适用于我的菜单。

[小提琴](http://jsfiddle.net/sU5Km/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:07:24.503

我前一阵子做了这个，也许这是你需要的。它将计算您悬停的锚元素的宽度，并将下划线元素（一个 div）增长到它的宽度和位置

```
//underliner
$('#menu a').hover(function(){
    var position = $(this).position(); var width = $(this).width();
    $('#underliner', '#menu').animate({width: width,left: position.left}, 200 );
});
$('#menu').hover(function(){
    $('#underliner', '#menu').animate({opacity: 1}, 200).show();
}, function () {
    $('#underliner', '#menu').animate({opacity: 0}, 200).hide();
}); 
```

下划线元素的 CSS（根据您的需要更改高度和背景颜色）

```
#underliner {
    display: none;
    position: relative;
    height: 5px;
    line-height: 5px;
    font-size: 1px;
    background-color: #44c8f5;
    width: 1px;
    opacity: 0;
    filter: alpha(opacity=0);
} 
```

HTML

```
<div id="menu">
    <ul>
        list items with <a href>'s
    </ul>
    <div id="underliner"></div>
</div> 
```

**编辑**：我尝试将它与您的代码合并，但由于您没有包含 html，我不得不猜测您的“导航栏”是如何布局的。无论如何，试试这个小提琴：http: [//jsfiddle.net/c_kick/DuWcz/](http://jsfiddle.net/c_kick/DuWcz/)

# python - 将json插入mysql。json 字符串是从 json.dumps 中获取的

> ID：11498107
> 
> 赞同：1
> 
> 时间：2012-07-16T04:31:23.417
> 
> 标签：python, mysql, json

问题在于将 json 字符串插入 MySQL 数据库。`json.dumps(d)`在我的 python 程序中，由于d 是字典，我获得了 json 。插入代码是：

```
 query = ("INSERT INTO bm_triesJsons VALUES (%s, %s, %s);"%
                 (article_id, revision_number, jsn))
        print query
        cur.execute(query) 
```

看起来问题是引号，引号前没有转义符号。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T04:33:53.460

在进行查询时使用参数化的方法来处理值。驱动程序将处理逃逸：

```
query = "INSERT INTO bm_triesJsons VALUES (%s, %s, %s);"
cur.execute(query, (article_id, revision_number, jsn)) 
```

如果你想直接手动访问 MySQLdb 使用的转义函数，你可以这样做：

```
c = MySQLdb.connection()
print c.escape_string('{"foo":"bar"}')
# {\"foo\":\"bar\"} 
```

# emacs - elisp：在批处理模式下静音“加载”消息

> ID：11498108
> 
> 赞同：5
> 
> 时间：2012-07-16T04:31:32.833
> 
> 标签：emacs, elisp

即使当我调用`emacs -batch`（即批处理模式而不实际执行任何操作）时，emacs 也会吐出一大堆消息：

```
$ emacs -batch
Loading 00debian-vars...
Loading /etc/emacs/site-start.d/50autoconf.el (source)...
Loading /etc/emacs/site-start.d/50cmake-data.el (source)...
Loading /etc/emacs/site-start.d/50devhelp.el (source)...
Loading /etc/emacs/site-start.d/50dictionaries-common.el (source)...
Loading debian-ispell...
Loading /var/cache/dictionaries-common/emacsen-ispell-default.el (source)...
Loading /var/cache/dictionaries-common/emacsen-ispell-dicts.el (source)...
Loading /etc/emacs/site-start.d/50psvn.el (source)... 
```

有什么办法可以让这些消息静音吗？谷歌对此并没有太大帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-16T05:08:45.987

这些是通常会显示在`*Messages*`缓冲区中的消息，这些消息会转到 stderr。以下是一些使其静音的方法，按复杂程度递增：

*   如果您不打算使用它，最简单的解决方法是重定向 stderr：

    ```
    emacs -batch 2>/dev/null 
    ```

*   这些消息来自[站点范围初始化](http://www.gnu.org/software/emacs/manual/html_node/elisp/Init-File.html)中加载的内容。如果您不需要初始化文件中的任何其他功能，您可以尝试：

    ```
    emacs -batch --no-site-file ... # ignore system-wide
    emacs -batch -Q ... # ignore everything 
    ```

*   理论上可以通过 实现这一点`(setq force-load-messages nil)`，但站点文件是此处打印的一个事实意味着您可能无法足够早地做到这一点。

*   建议该`load`函数，以便始终使用 调用它`NOMESSAGE`。这是一个草图：

    ```
    (defadvice load (before quiet-loading
                       (&optional NOMESSAGE)
                       activate)
       (setq NOMESSAGE t))
    (load site-run-file t) 
    ```

    这应该只是强制 load 始终传入参数`t`，`NOMESSAGE`然后加载`site-run-file`，如果不存在这样的文件则忽略错误。（请注意，至少在我使用 emacs 的所有 2 台机器上，没有`site-run-file`; 我不知道这在野外有多普遍。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T23:31:24.143

我去source-diving，发现该`load`函数调用C函数`message_from_string`来显示`"Loading <whatever>..."`消息。当 Emacs 没有以交互方式运行时，`message_from_string`只是直接打印到`stderr`没有办法避免它。好吧，您可以在参数设置为 true 的情况下调用原始`load`函数`nomessage`，但在批处理模式下运行时安排它可能并非易事。

只需过滤掉您不想要的消息就足够了：

```
$ emacs -batch 2>&1 | grep -v '^Loading.*\.\.\.$' 
```

# ruby-on-rails - 仅显示上周创建的帖子

> ID：11498110
> 
> 赞同：6
> 
> 时间：2012-07-16T04:31:41.137
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sorting, posts

我希望能够显示帖子并按照几个标准对它们进行排序，首先是他们对它们的投票数量，其次是它们的创建日期。我不希望显示超过一周的帖子，因此只显示上周的帖子。我试过这样做：

```
 <%= render @posts.sort_by { |post| post.votes.count if post.created_at < 1.week.ago.utc }.reverse %> 
```

但它给了我一个错误，将 NilClass 与 2 进行比较失败

我知道代码可以通过按投票计数对帖子进行排序，但我也想限制时间，所以有人可以告诉我如何做到这一点。我还是新手，很抱歉这么简单。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T08:39:21.743

Solution by @Salil is ok, but I would suggest adding counter_cache column ( [http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html) ) and changing `recent_post` code (from this comment: [https://stackoverflow.com/a/11498634/1392074](https://stackoverflow.com/a/11498634/1392074) ) into:

```
def self.recent_posts
  Post.where("created_at >= ?", 1.week.ago.utc).order("votes_count DESC, created_at DESC")
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T05:39:53.633

查找帖子的代码应该在模型中，而不是在视图中。总是有一个好主意，您应该获取我们需要显示的记录，而不是获取记录并在视图上显示其中的一些记录。您应该执行以下操作

在你的`post.rb`

```
def self.recent_posts
  Post.select("p.*, COUNT(v.id) AS count").where("post.created_at >= 1.week.ago.utc").joins("p LEFT JOIN votes v on p.id=v.post_id").order("count, created_at DESC")
end 
```

# objective-c - 我如何知道视图是否可见？

> ID：11498115
> 
> 赞同：0
> 
> 时间：2012-07-16T04:32:02.493
> 
> 标签：objective-c, ios, xcode, cocoa-touch, animation

假设我有两个视图控制器：xVC 和 yVC。`-(void)motionBegan`我已经使用了shake API ，并且已经使用了xVC中的方法`-(void)motionEnded:`和方法。`-(void)motionCancelled`发生的情况是当设备摇晃时，它会触发一个简单的动画。现在的问题是，即使我打开了 yVC，也就是`yVS.view`添加了子视图，这个动画也会被触发。我正在寻找的是一些我可以`-(void)motionEnded:`像这样使用的 if 条件：

```
if(yVC == nil)
{
     //trigger animation
} 
```

我的意思是，当 yVC 可见时，震动不应该起作用。我怎么做？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T04:35:59.200

我看到并使用的一般建议是询问视图是否具有非零`window`属性：

```
if( ! yVC.view.window) {
  // trigger animation
} 
```

但请注意，这并不*总是*等同于可见。尽管在大多数应用程序中，它的性能几乎与您所能获得的一样好（它不准确的基本情况是当不同的视图完全掩盖它时，但这仍然可以满足您的需求）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T05:02:02.997

将此添加到您的两个视图控制器：

```
-(void)viewDidAppear:(BOOL)animated 
{
  [super viewDidAppear:animated];    
  visible = YES;    
}

-(void)viewDidDisappear:(BOOL)animated 
{
  [super viewDidDisappear:animated];
  visible = NO;
} 
```

现在，只需检查两个视图控制器的变量 isVisible 并同样触发您的动画。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-07-27T18:17:45.940

前面的答案在某种程度上都有效，但没有考虑到模态呈现的视图控制器。如果视图控制器 A 呈现视图控制器 B，则前面的答案将告诉您 A 仍然可见。如果您像我一样想知道视图是否实际可见（而不仅仅是视图层次结构的一部分），我建议您也检查一下`presentedViewController`属性：

```
if (self.isViewLoaded && [self.view window] && !self.presentedViewController) {
    // User is looking at this view and nothing else
} 
```

这有效，因为只要当前视图控制器**或其**任何祖先当前正在呈现另一个视图控制器，`presentedViewController`它将是非零的。

# matlab - 将多个 .mat 文件加载到 Matlab 工作区

> ID：11498116
> 
> 赞同：2
> 
> 时间：2012-07-16T04:32:05.470
> 
> 标签：matlab, matlab-load

我正在尝试将几个 .mat 文件加载到工作区。但是，它们似乎相互覆盖。相反，我希望它们附加。我知道我可以做类似的事情：

```
S=load(file1)
R=load(file2) 
```

等等

然后手动附加变量。

但是有很多变量，并且为每个变量添加一个附加语句是非常不可取的（尽管可能作为最后的手段）。有什么方法可以让我将 .mat 文件加载到工作区（通过使用`load()`没有分配的命令）并附加它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:19:34.163

听起来您遇到的情况是，每个文件都包含一个矩阵变量 A 并且您希望将所有这些矩阵沿某个维度的串联加载到内存中。我有类似的需求，并编写了以下函数来处理它。

```
function var = loadCat( dim, files, varname )
%LOADCAT Concatenate variables of same name appearing in multiple MAT files
%  
%   where dim is dimension to concatenate along,
%         files is a cell array of file names, and
%         varname is a string containing the name of the desired variable

    if( isempty( files ) )
        var = [];
        return;
    end
    var = load( files{1}, varname );
    var = var.(varname);

    for f = 2:numel(files),

        newvar = load( files{f}, varname );
            if( isfield( newvar, varname ) )
                var = cat( dim, var, newvar.(varname) );
            else
                warning( 'loadCat:missingvar', [ 'File ' files{f} ' does not contain variable ' varname ] );
            end
        end 

    end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T05:08:40.613

它并不完全清楚您所说的“附加”是什么意思，但这是一种将数据加载到应该易于处理的格式的方法：

```
file_list = {'file1';'file2';...};
for file = file_list'
    loaded.(char(file)) = load(file);
end 
```

这利用动态字段引用将列表中每个文件的内容加载到`loaded`结构的自己的字段中。您可以从这里迭代字段并根据需要操作数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T02:31:04.740

克拉克的答案和功能实际上完美地解决了我的情况......我只是添加了以下代码以使其不那么乏味。只需将其添加到开头并摆脱“文件”参数：

```
[files,pathname] = uigetfile('*.mat', 'Select MAT files (use CTRL/COMM or SHIFT)', ...
   'MultiSelect', 'on'); 
```

或者，从这一点开始可能会更有效：

```
[pathname] = uigetdir('C:\');
files = dir( fullfile(pathname,'*.mat') );   %# list all *.mat files
files = {files.name}';                       %# file names

data = cell(numel(files),1);                 %# store file contents
for i=1:numel(files)
    fname = fullfile(pathname,files{i});     %# full path to file
    data{i} = load(fname);                   %# load file
end 
```

（从[处理 matlab 中具有特定扩展名的文件列表](https://stackoverflow.com/questions/7287723/process-a-list-of-files-with-a-specific-extension-name-in-matlab)修改）。

谢谢，杰森

# c# - 错误 allowDefinition='MachineToApplication' 在 asp.net 中超出应用程序级别

> ID：11498130
> 
> 赞同：0
> 
> 时间：2012-07-16T04:33:28.033
> 
> 标签：c#, asp.net, virtual-directory

最近在处理 asp.net 应用程序时，我收到以下错误：

```
It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level.  This error can be caused by a virtual directory not being configured as an application in IIS. 
```

我确信前一天它工作得很好，但是我猜这个错误通常是由于多个 web.config 文件而发生的，但是我检查了我的项目，整个项目包含单个 web.config 文件，谁能告诉我什么可以是这个错误的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:43:59.707

正如错误提示的那样，您需要将放置网站的目录设置为 IIS 中的 Web 应用程序。

![在此处输入图像描述](../Images/d3b958ee1e09b0eedbe7d63185c01786.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T04:51:45.653

谢谢Nawaaz，我得到了解决方案，实际上是因为`i was opening website (using file-->open-->website) and not the solution`，所以我打开了解决方案并清理了解决方案并构建了它，并且工作正常，非常感谢您花时间恢复。

# node.js - ExpressJS: Server.close();

> ID：11498141
> 
> 赞同：0
> 
> 时间：2012-07-16T04:34:36.500
> 
> 标签：node.js, express

我只是想了解如果我们在 NodeJS 的 http.Server 对象中调用 close 方法会发生什么。（我认为这是对象也被 ExpressJS 服务器对象继承）。

我有以下问题：

1.  当我们调用`close()`方法时，它会刷新前一个服务器对象的所有内存吗？
2.  当我们调用`close()`方法并尝试创建一个与之前的服务器对象具有相同端口和主机的新服务器对象时，我们可以再次重用端口和主机地址吗？
3.  当我们调用 close() 方法时，节点实例是否退出？

谢谢回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:34:10.857

1）这可能是一个实现问题，但如果它至少不能使对象中所有分配的内存都符合垃圾回收的条件，我会感到惊讶。

2）可以，只要等待上一个服务器发送`close`事件即可；在那之前，之前的服务器不会最终确定。

3) 如果有更多代码要执行或有未决事件，则不会。

# android - Android NDK 套接字连接问题

> ID：11498146
> 
> 赞同：2
> 
> 时间：2012-07-16T04:35:18.527
> 
> 标签：android, c++, linux, sockets, android-ndk

好的，所以我可以使用以下代码在我的 Android 应用程序中创建一个监听套接字：

```
bool CSocket::tcplisten(int port, int max, int mode)
{
  if((sockid = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)) == INVALID_SOCKET) return false;
  sockaddr_in addr;
  addr.sin_family = AF_INET;
  addr.sin_addr.s_addr = INADDR_ANY;
  addr.sin_port = htons(port);
  if(mode)setsync(1);
  if(bind(sockid, (struct sockaddr*)&addr, sizeof(sockaddr)) == SOCKET_ERROR)
  {
    closesocket(sockid);
    return false;
  }
  if(listen(sockid, max) == SOCKET_ERROR)
  {
    closesocket(sockid);
    return false;
  }
  return true;
} 
```

然后，我可以使用以下代码在 SAME 进程中连接到它：

```
bool CSocket::tcpconnect(char *address, int port, int mode)
{
  sockaddr_in addr;
  hostent* hostEntry;
  if((sockid = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)) == SOCKET_ERROR)
        return false;
  if((hostEntry = gethostbyname(address)) == NULL)
  {
    closesocket(sockid);
    return false;
  }
  addr.sin_family = AF_INET;
  addr.sin_addr.s_addr = htonl(INADDR_ANY);
  addr.sin_port = htons((u_short)port);
  if(mode ==2)setsync(1);
  if(connect(sockid, (struct sockaddr*)&addr, sizeof(sockaddr)) == SOCKET_ERROR)
  {
        closesocket(sockid);
        return false;
  }
  if(mode ==1)setsync(1);
  return true;
} 
```

问题是，我无法连接到运行侦听套接字的其他机器或 google.com 等远程机器上。任何想法为什么我不能让它工作？

经过一些调整和探测，我发现错误发生在该行：

```
if(connect(sockid, (struct sockaddr*)&addr, sizeof(sockaddr)) == SOCKET_ERROR)
{
    closesocket(sockid);
    return false;
} 
```

errno 是 111 ERCONNREFUSED... 请。任何帮助，将不胜感激。该应用程序在权限中设置了完整的 Internet 访问权限......有什么想法吗？

我的 Linux 版本使用相同的代码编译时遇到了同样的问题......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T04:06:59.923

您正在尝试连接到 INADDR_ANY。您想将 hostent 的相关部分复制到 addr.sin_addr.s_addr 中。

# styles - 在 vaadin 的表格中设置列标题的样式

> ID：11498149
> 
> 赞同：2
> 
> 时间：2012-07-16T04:35:24.253
> 
> 标签：styles, vaadin

是否可以为 vaadin 表格中的每个列标题设置独特的样式？有方法 setCellStyleGenerator 仅适用于内容 - 不适用于标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T06:03:32.813

不; 据我所知，目前这是不可能的。请随时提交功能请求：[https ://vaadin.com/bug](https://vaadin.com/bug)

# mongodb - 如何在 MongoDB 中指定自然顺序？

> ID：11498154
> 
> 赞同：1
> 
> 时间：2012-07-16T04:36:01.767
> 
> 标签：mongodb

有没有办法在 mongodb 中指定数据的自然排序，类似于主索引如何在 RDBMS 表中对数据进行排序？

我的用例是我的所有查询都返回按日期字段排序的数据，比如**生日**。根据[MongoDB: Sorting and Natural Order](http://www.mongodb.org/display/DOCS/Sorting+and+Natural+Order)，标准（无上限）集合的自然顺序大致是插入顺序，但不能保证。这意味着在检索数据后需要进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:18:30.990

我相信您指的是[聚集索引](http://en.wikipedia.org/wiki/Database_index#Clustered)，而不是主索引。

MongoDB 2.0 没有聚集索引功能，因此日期上的[常规索引](http://www.mongodb.org/display/DOCS/Indexes)将是您检索的最有效选择。

使用 MongoDB 考虑磁盘上的物理顺序可能还为时过早。MongoDB 使用内存映射文件，因此根据您的工作集 + 查询 + RAM，您可能不需要像预期的那样频繁地从磁盘加载数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T04:45:50.780

如果您正在寻找类似于 RDBMS 中的主索引的东西，请按 _id 排序。由于 _id 以时间戳为前缀，因此将大致为插入顺序。如果您尝试使用 $natural 顺序，它将导致它丢失索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T07:18:40.950

我想如果没有索引的帮助，很难实现你想要的。为了支持分片，MongoDB 中的 _id 字段根据创建文档*时*的时间戳取值。因此，与 RDBMS 表中的标识列不同，您不能让它们单调增加。如果您的所有查询返回按出生日期排序的文档，我认为您必须在 Birthdate 列上创建一个索引。创建索引后，查询变得足够高效。
请参阅：
[MongoDB capped collection and monotonicly increasing index](https://stackoverflow.com/questions/10967752/mongodb-capped-collection-and-monotically-increasing-index)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T04:52:59.530

另外，我要补充一点，您应该考虑使用文档 ID 中的内置时间戳，而不是依赖单独的日期字段，因为它允许您存储更少的数据并删除索引。

杰森·蒙戈总部

# r - 通过命令从列表中找出最大数量

> ID：11498155
> 
> 赞同：9
> 
> 时间：2012-07-16T04:36:05.287
> 
> 标签：r, list, max

我有一个这样的列表：

```
Ll 
$a
3.4 5.6 -2.1 -7.8
$b
2.1 6.7
$c
-6.7,0.001,8.9 
```

我想找出列表中所有元素的最大数量，而不考虑符号。即我希望我的输出看起来像这样：

```
Ll
$a
-7.8
$b
6.7
$c
8.9 
```

有没有办法通过单个命令行来做到这一点？可以使用'by'命令完成吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-16T04:50:16.533

可重现的代码/数据总是有帮助：

```
L1 <- list(a = c(3.4, 5.6, -2.1, -7.8), b = c(2.1, 6.7), c = c(-6.7, 0.001, 8.9)) 
```

用于`lapply`将您自己的函数应用于每个元素，`which.max`轻松找到最大值，我们只需获取每个元素`abs`内的 olute 值：

```
lapply(L1, function(x) x[which.max(abs(x))])
$a
[1] -7.8

$b
[1] 6.7

$c
[1] 8.9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T04:42:35.907

`lapply`是你的朋友！

例如。

```
.list <- list( a = 1:5, b = runif(7), c = -3:1)
 lapply(.list, function(x) x[which.max(abs(x))])
## $a
## [1] 5
## 
## $b
## [1] 0.9248526
## 
## $c
## [1] -3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-17T09:58:49.863

which.max 会给你索引号和值，但是如果你只需要数字，你可以试试这个：

最大（应用（您的列表，最大））

# datetime - 谷歌图表日期时间类型

> ID：11498156
> 
> 赞同：0
> 
> 时间：2012-07-16T04:36:08.247
> 
> 标签：datetime, google-visualization, annotatedtimeline

实例化日期时间类型时是否可以使用文字字符串？（如果不是，跳过）如果是， - 是否需要是 /？如果没关系，请告诉我这有什么问题：

var data = new google.visualization.DataTable({cols:[{label: 'date', type: 'datetime'}, {label: 'power', type: 'number'}], rows: [{c: [ {v:2007/12/01 00:12:00},{v:0}]}, {c: [{v:2007/12/01 01:12:00},{v:101}]}, {c: [{v:2007/12/01 02:12:00},{v:201}]}, {c: [{v:2007/12/01 03:12:00},{v:302 }]}]});

（我已经尝试引用文字日期时间。）-Shawn

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T18:47:13.837

您可能必须将其放入 Epoch 格式。尝试这样的事情

```
new Date("#epoch_seconds_go_here"); 
```

[这](https://stackoverflow.com/questions/6158223/google-charts-api-datetime-unix-format)是可能对您有帮助的链接

# regex - 将标点符号转换为空格

> ID：11498157
> 
> 赞同：4
> 
> 时间：2012-07-16T04:36:08.790
> 
> 标签：regex, string, r

我有一堆带有标点符号的字符串，我想将它们转换为空格：

```
"This is a string. In addition, this is a string (with one more)." 
```

会成为：

```
"This is a string  In addition  this is a string  with one more  " 
```

我可以通过`stringr`包（`str_replace_all()`）手动执行此操作，一次一个标点符号（，/./！/（/）/等），但我很好奇是否有更快的方法我会假设使用正则表达式.

有什么建议么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T04:39:44.547

```
x <- "This is a string. In addition, this is a string (with one more)."
gsub("[[:punct:]]", " ", x)
[1] "This is a string  In addition  this is a string  with one more  " 
```

请参阅`?gsub`进行这样的快速替换，以及 `?regex`有关`[[:punct:]]`课程的详细信息，即

```
‘[:punct:]’ Punctuation characters:
      ‘! " # $ % & ' ( ) * + , - . / : ; < = > ? @ [ \ ] ^ _ ` { |
      } ~’. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T04:39:13.943

看一下`?regex`

```
library(stringr)
str_replace_all(x, '[[:punct:]]',' ')

"This is a string  In addition  this is a string  with one more  " 
```

# php - 使用 PHP 从输入模式中搜索日志文件

> ID：11498159
> 
> 赞同：0
> 
> 时间：2012-07-16T04:36:20.397
> 
> 标签：php, search

我的问题是创建一个可以在日志文件中搜索的搜索功能。

模式是这样的：

```
node-id > command
-Date-other descriptions
Output starts
Output ends
node-id > another command 
```

现在，我遇到的问题是从一个日志文件中剪切一个命令的输出，并将其与另一个日志文件的输出进行比较以进行比较。我无法找到一种方法来搜索内容并将其存储到数组或文件中以进行进一步比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T21:52:25.833

您不能从文件中剪切东西，您只能更改文件并重新保存它（您可能会剪切东西，具体取决于您的文件系统，直接操作相同的东西，但在这里问这个问题意味着您没有这样的低级文件系统经验）

在 php 中会是这样的：

```
$data = file_get_contents($fileToCutFrom);
// ... modify data here, e.g. if it's xml you might wanna use SimpleXML or DOMDocument or some other xml parser, like ganon ( https://code.google.com/p/ganon/ ) - the later one is pretty good if you know you might have incomplete/invalid xml
file_put_contents($fileToCutFrom, $modifiedData);

// and now append to the other file
file_put_contents($fileToAppendTo, $dataToAppend, FILE_APPEND); 
```

但是要知道，如果您从多个文件中执行此操作，您可能会遇到严重的竞争条件，因为 file_get_contents 不是原子的，file_put_contents 也不是，然后您还会遇到要执行多行的问题。因此，如果您的代码可能一次执行多次，您可能想使用一个脚本实例来执行所有“切割”并附加打开一个套接字，而其他脚本只是将它们需要的内容发送到该文件。

另外，如果你想在新数据进入时继续这样做，你可能想看看你的系统上的 inotify （linux）或等效的（osx 也有文件通知服务，但我不知道 windows）

如果您需要不同的东西，您可能想在您的问题中添加信息。

# c++ - 如果需要不同的创建参数/方法，模板化的“ResourceCache”如何加载/创建类型 T 的资源？

> ID：11498161
> 
> 赞同：0
> 
> 时间：2012-07-16T04:36:33.543
> 
> 标签：c++, templates, resources, polymorphism, containers

我只是不知道该怎么做..

基本上，如果每个模板特化类型（T）都有不同的初始化参数，那么通用的 ResourceCache 如何加载/创建资源？

```
template< class T>
class ResourceCache{

  T* cache[100];

  T* LoadResource(different parameters for different  T  ){//used in a cache miss..

          Create( different parameters for different  T );

  }
} 
```

如果我对 IResourceParams 类使用抽象，我的 ResourceCache 将无法在不使用多态的情况下使用它自己已知的类型资源数据，这有点愚蠢，因为在运行时他知道类型是什么，我完全是在做狗屎编译时工具的 prol 中的运行时...我猜..

在我目前的尝试中，我创建了一个具有虚拟 T* Create() 方法的模板化 IResourceDesc，因此您需要派生以添加数据并专门化 Create 方法，但这很糟糕，因为我不能在 ResourceCache 类中拥有 IResourceDesc 的集合（用于比较当前加载的，通过 desc 获取缓存的资源等）...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T04:52:27.483

在 C++11 中，使用可变参数模板和完美转发非常容易：

```
#include <utility>

template<class... Args>
T* LoadResource(Args&&... args){
  unsigned dest_index = /* pick it */ 0;
  cache[dest_index] = new T(std::forward<Args>(args)...);
  return cache[dest_index];
} 
```

对于 C++03，要么提供约 10 个具有不同数量参数的重载，要么[采用就地工厂风格](http://www.boost.org/doc/libs/1_50_0/libs/optional/doc/html/boost_optional/in_place_factories.html)：

```
template< class T>
class ResourceCache{
  T* cache[100];

  template<class Factory>
  T* LoadResource(Factory const& f){
    unsigned dest_index = /* pick cache slot */ 0;
    void* dest = operator new(sizeof(T));
    cache[dest_index] = f.construct(dest);
    return cache[dest_index];
  }
}

template<class T, class A1>
struct in_place_factory1{
  in_place_factory1(A1 const& a1) : _arg1(a1) {}
  int* construct(void* dest) const{
    return new (dest) T(_arg1);
  }
private:
  A1 const& _arg1; // make sure the original argument outlives the factory
};

// in code
ResourceCache<int> cache;
int arg = 5;
int* res = cache.LoadResource(in_place_factory1<int,int>(arg)); 
```

就地工厂基本上是完美转发可变参数模板函数的劣质版本，它可以*将*对象直接放置到容器存储中，而不需要已经完整的对象来复制。

# database - 将 Django 模型从一个应用程序移动到另一个应用程序

> ID：11498163
> 
> 赞同：9
> 
> 时间：2012-07-16T04:36:45.830
> 
> 标签：database, django, django-south, schema-migration

我犯了在同一个 Django 应用程序中创建太多模型的愚蠢错误，现在我想将它分成 3 个不同的模型。问题是：两个客户的站点中已经有生产数据，所以我需要仔细计划要完成的任何模式/数据迁移（我正在使用 django-south）。我不确定如何进行，任何建议将不胜感激。

（如果有任何相关性，我在 Ubuntu 服务器 12.4 LTS 上使用 PostgreSQL）

我考虑过使用[`db.rename_table`](http://south.aeracode.org/wiki/db.rename_table)，但无法弄清楚如何正确更新这些模型的外键（从旧到新） - 在数据库级别无关紧要（因为表重命名已经涵盖了），但在 ORM 级别并非如此.

**更新**：经过思考，并在programmmers.SE上提出[这个问题](https://softwareengineering.stackexchange.com/q/157039/44542)后，我决定保持简单，不用担心产品主要版本之间的迁移。短期内，我将只使用`db.rename_table`匹配新名称，同时也`db_table`按照 Daniel Roseman 的建议使用，同时将模型保留在旧应用程序中。升级到主要版本时，我切换到新应用程序并完全放弃所有迁移（因此新版本的全新安装将“按原样”创建数据库，而不是经历所有历史迁移）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-16T17:31:35.417

我根本不明白您为什么需要任何数据迁移。

只需将模型移动到新应用程序中，并[`db_table`](https://docs.djangoproject.com/en/1.4/ref/models/options/#db-table)在内部 Meta 类中添加一个设置以指向旧表名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T06:11:16.923

我最近在较小的范围内做了类似的事情，这是我的过程：

1.  创建新的应用程序和相应的模型
2.  更新视图以使用新模型
3.  更新单元/系统测试以确保没有损坏（重要！）
4.  编写基于旧模型填充新模型的管理命令
5.  部署代码
6.  为新模型运行迁移
7.  运行管理命令脚本以更新新模型
8.  将旧应用程序保留 1-2 周，当您认为一切都很好时，将其删除。

我没有使用数据迁移的原因：

1.  不熟悉——觉得任务太重要了，不能使用我不熟悉的流程
2.  使用 Python 代码移动数据比使用 South magic 更舒服
3.  遇到依赖关系的南迁移问题。不想通过数据迁移使迁移进一步复杂化。由于我不熟悉数据迁移的机制，这可能是一个错误的假设
4.  也许作为第 3 点的偏见，我说服自己将 South 纯粹用作模式管理工具是“正确”的做法。数据的创建/更新应该在 Django 层中使用夹具或自定义管理命令完成

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T04:36:45.830

我能想到的最简单的解决方案：

1.  创建`SchemaMigration`将旧应用程序中模型的每个外键的类型更改为原始类型（包括其内部的类型）；
2.  正常创建新应用及其模型；
3.  将旧表的数据迁移到新表；
4.  创建另一个`SchemaMigration`，将每个原始类型再次更改为外键，现在指向新表；
5.  从设置中删除旧应用程序并删除其表。

费力，是的，但会成功的。不过，我希望有更好的解决方案。

# c# - 瓦基运动

> ID：11498167
> 
> 赞同：0
> 
> 时间：2012-07-16T04:37:24.723
> 
> 标签：c#, xna-4.0

我试图在 XNA 中进行 Tile-Base Movement，但我不知道如何。我的图块是 32x32，并且精灵大小相同。

这是我用来移动精灵的代码：

```
 if ( Keyboard.GetState().IsKeyDown(Keys.Up))
    {
        Position.Y -= Speed.Y;
    }
    if ( Keyboard.GetState().IsKeyDown(Keys.Down))
    {
        Position.Y += Speed.Y;
    } 
```

...与其他 2 个键相同。

我希望我的精灵移动平滑，一次精确的瓷砖，但不“跳”到瓷砖。对不起我的英语不好，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:46:49.580

您需要根据经过的时间量来更改精灵的位置。

因此，如果您的速度是每秒 32 像素，并且经过的时间是第 60 秒 (60fps)，那么您`32 * (1/60)`每次更新只需移动精灵像素。

使用`Update(GameTime gameTime)`参数获取自上次更新以来经过了多少时间。

# c++ - 在 C++ 代码中处理 Angle Wrap

> ID：11498169
> 
> 赞同：35
> 
> 时间：2012-07-16T04:38:15.470
> 
> 标签：c++, math

有没有一种安全的方法，可以用最少的案例语句简单地处理角度环绕。

当使用特定的角度表示法（0-360 度或 -180 - 180 度（或等效的弧度））并在角度上进行折弯时，会发生角度包络。例如，假设您的角度为 -170，然后减去 50 度。您在数学上加起来是 -220，但实际上应该是 +140 度。

显然，您可以使用以下方法进行检查：

```
if (deg < -180) { 180 - abs(deg + 180); } 
```

或类似的。但首先你需要大量的检查，其次如果你包装两次它就不起作用。

第二种普遍存在的情况是两个角度之间的插值。

例如，假设我有一个 -170 度和 160 度的角度，我想介于它们之间。一种常见的方法是，`ang1 + 0.5(ang2-ang1)`但在我提供的示例中，它将导致角度为 -5 度，而它应该是 175 度。

**在这些情况下是否有处理角度包络的常用方法？**

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-07-16T04:48:03.620

为了完整起见，我将同时包括规范化`[0, 360)`和`[-180, 180)`规范化。

您将需要`#include <math.h>`.

* * *

**归一化为`[0,360)`：**

```
double constrainAngle(double x){
    x = fmod(x,360);
    if (x < 0)
        x += 360;
    return x;
} 
```

**归一化为`[-180,180)`：**

```
double constrainAngle(double x){
    x = fmod(x + 180,360);
    if (x < 0)
        x += 360;
    return x - 180;
} 
```

该模式应该很容易识别以推广到弧度。

* * *

**角平分：**

```
double angleDiff(double a,double b){
    double dif = fmod(b - a + 180,360);
    if (dif < 0)
        dif += 360;
    return dif - 180;
}
double bisectAngle(double a,double b){
    return constrainAngle(a + angleDiff(a,b) * 0.5);
} 
```

这应该在“较小”一侧平分一个角度。（警告：未完全测试）

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-16T11:44:54.847

我发现使用[`remainder()`](https://en.cppreference.com/w/cpp/numeric/math/remainder)数学库很方便。给定一个角度`a`，将其限制为 -180, 180 你可以这样做：

```
remainder(a, 360.0); 
```

并将弧度更改`360.0`为`2.0 * M_PI`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-05-04T10:33:56.140

# 将角度标准化为范围`[-180, 180)`

```
deg -= 360\. * std::floor((deg + 180.) * (1\. / 360.)); 
```

# 将角度标准化为范围`[0, 360)`

```
deg -= 360\. * std::floor(deg * (1\. / 360.)); 
```

## 例子：

`deg = -90`-> `[0, 360)`：

```
deg -= 360\. * std::floor(-90 / 360.);
deg -= 360\. * -1;
deg = 270 
```

`deg = 270`-> `[-180, 180)`：

```
deg -= 360\. * std::floor((deg + 180.) / 360.);
deg -= 360\. * std::floor(480\. / 360.);
deg -= 360\. * 1.;
deg = -90; 
```

请参阅：[http ://en.cppreference.com/w/cpp/numeric/math/floor](http://en.cppreference.com/w/cpp/numeric/math/floor)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-17T00:14:44.240

因此，如果想出一种方法来有效地使用 Mystical 的方法来约束角度。这里是：

![在此处输入图像描述](../Images/31088e90cc17aca4bb5b8b0acfed8801.png)

这似乎适用于我能想到的任何例子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-25T22:02:43.093

我知道这是一个旧线程，但试试这个：

```
double angleRef(double thtIn, double thtRef){
  tht = fmod(thtIn + (180-thtRef),360) + (thtRef-180);
  return tht;
} 
```

所以在你的例子中，如果 A=-170 和 B=160，那么它们之间的中间角度是 `A + 0.5*(angleRef(B,A) - A) = -185`

或者如果您更喜欢 A=160 和 B=-170 `A + 0.5*(angleRef(B,A) - A) = 175`

请原谅任何 c++ 格式错误，它不是我的母语。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-11-24T09:06:09.620

将角度（+PI ~ -PI）映射到有符号整数值（或短值）：

```
angle_signed_short = angle_float / PI * 0x7FFFF; 
```

然后您可以正常添加或子值。然后映射回来：

```
angle_float = angle_signed_short * PI / 0x7FFFF; 
```

# python - 如何使用 Python 中的“if”语句检查某个数字的数字数据列表？

> ID：11498170
> 
> 赞同：0
> 
> 时间：2012-07-16T04:38:15.587
> 
> 标签：python, list, if-statement, stocks

目前，我正在尝试从不同的 CSV 文件中检索数字数据。然后我将这些数据放在 Python 中的列表中。但是，我正在努力让 Python 确定每个单独的数据列表中是否存在大于某个数字的值。我需要能够分别在每个列表中搜索某个值，此时 Python 应该返回我选择的一些文本。我不确定我错过了什么，但 Python 似乎并没有像我希望的那样处理我的语法。

```
 import csv
    stocks = ['JPM','PG','KO','GOOG']
    for stock in stocks:
        Data = open("%sMin.csv" % (stock), 'r')
        Ticker = []
        for row in Data:
            Ticker.append(row.strip().split(','))
        if Ticker > 735:
            print "%s Minimum" % (stock) 
```

我修改了其他股票成为 Ticker 的代码以消除混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:43:09.067

有三个错误，阻止你得到结果。

1.  `stock`是一个值列表，因此您无法直接对列表本身进行数字比较。
2.  您正在将列表附加到列表中。因此，即使您对每个值进行操作，您也会将列表与 int 进行比较。要么找出要附加的元素，要么适当地添加它们。
3.  在该列表中找到最大值以与您进行比较。

首先，将浮点数附加到您的列表中：

```
float(stock_value) 
```

其次，找出拆分行的哪个索引是数值。如果它们都是数值，则通过扩展将它们全部添加到列表中：

```
# only convert items to float that are not empty strings
stock.extend(float(val) for val in row.strip().split(',') if val.strip()) 
```

如果它说，第一列，只添加那个：

```
stock.append(float(row.strip().split(',')[0])) 
```

第三，如果您只是想知道列表中是否有大于 735 的值，您可以简单地询问列表的最大值：

```
if max(stock) > 735:
    print "%s Minimum" % (stock) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T04:44:33.903

确保在将股票价格添加到列表时将其转换为浮动价格。

```
stock.extend(map(float, row.strip().split(','))) 
```

现在开始你的测试。

```
max(stock) > 735 
```

应该做的伎俩。如果列表中的最大数字大于您的目标，那么您知道至少有一个数字是。

更明确的方式是：

```
any(x > 735 for x in stock) 
```

# actionscript-3 - AS3：类型未找到或不是编译时常量

> ID：11498172
> 
> 赞同：0
> 
> 时间：2012-07-16T04:38:39.020
> 
> 标签：actionscript-3, flash, class, actionscript, compilation

我目前正在尝试创建一个小应用程序时遇到问题，这是我第一次尝试处理类，但由于某种原因，即使它已导入文档，我也无法创建该类的任何实例。这是该类的代码（名为“Players”）：

```
package
{
public class Player
{
    public function Player(name_:String)
    {

    }

    public var name_:String;
    private var alignment:int;
    public var healed:Boolean = false;
    public var revealed:Boolean = false;
    public var attacked:Boolean = false;
    public var dead:Boolean = false;

    public function action(target:Player)
    {

    }

    public function describe():String
    {

    }
}

public class Citizen extends Player
{
    public function Citizen(name_:String)
    {
        alignment = 1;
    }

    override public function action(target:Player)
    {

    }

    override public function describe():String
    {
        return "Citizen";
    }
}

public class Investigator extends Player
{
    public function Investigator(name_:String)
    {
        alignment = 1;
    }

    override public function action(target:Player)
    {
        target.revealed = true;
    }

    override public function describe():String
    {
        return "Cop";
    }
}

public class Doctor extends Player
{
    public function Doctor(name_:String)
    {
        alignment = 1;
    }

    override public function action(target:Player)
    {
        target.healed = true;
    }

    override public function describe():String
    {
        return "Doctor";
    }
}

public class Mafioso extends Player
{
    public function Mafioso(name_:String)
    {
        alignment = -1;
    }

    override public function action(target:Player)
    {
        target.attacked = true;
    }

    override public function describe():String
    {
        return "Mafia";
    }
}
} 
```

以及创建实例的代码：

导入玩家；

```
stop();

var totalplayers:Number;
var playerArray:Array = new Array();
var playerType:Array = ["Citizen","Cop","Doctor","Mafia"];

var test:Citizen = new Citizen("James"); 
```

两者都在同一个文件夹中。我得到了标题中描述的错误代码 1046，但老实说，我不知道为什么，flash 在代码提示中找到了它，但它却出现了！任何帮助，将不胜感激。

也是次要问题，我永远不会启动 Player 类（除非通过与其他类的继承），所以我可以将其设为私有吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T04:59:54.060

我假设所有代码都在一个名为`Players.as`.

这是错误的。每个文件应包含**一个类**，并且该类应与文件同名`.as`。

您当前在一个文件中有两个类 (`Player`和)。`Citizen`

您需要做的是获取`Player`您定义的类并将其放在它自己的`.as`. 同名文件（播放器）。对 做同样的事情`Citizen`。

然后你可以使用：

```
import Player;
import Citizen; 
```

尽管这不是必需的，因为您不需要导入与您尝试访问它的目录位于同一目录中的类。

至于错误，您会得到它，因为 Flash 正在尝试查找该类`Players`，而您没有具有该名称的类（只是具有该名称的文件）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T05:11:18.553

根据关于 ActionScript 是否支持私有类的第二个问题，如果您有一个类，除非在内部由公共类访问，否则您可以将其定义为内部。

内部类对当前包内的引用可见。

如果您不希望类在包外公开可见，请将类放在包内并使用 internal 属性标记该类。或者，您可以省略 internal 和 public 属性，编译器会自动为您添加 internal 属性。您还可以将类定义为仅在定义它的源文件中可见。将类放在源文件的底部，包定义的右大括号下方。

在以下示例中，`X`和`Y`类都定义在单个文件 (X.as) 中。 `X`可以正常引用和实例化；但是，`Y`它是内部的，`X`并且只能从`X`.

```
package
{
    import flash.display.Sprite;

    public class X extends Sprite
    {
        public function X()
        {
            super();

            var y:Y = new Y();
        }
    }
}

internal class Y
{
    public function Y()
    {
        trace("internal Y ctor.");
    }
} 
```

当一个类需要在类外无法访问的小型数据模型时，这种模式很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T05:51:42.810

同意其他人这里应该如下图（注意文件名匹配类名，文件名在代码块上方的括号中表示）。此外，您编写了 import Players 而不是 import Player，无论其他发帖人写道，如果所有类当前都在默认包中，则导入是不必要的。

[播放器.as]

```
package
{
    public class Player
    {
        public function Player(name_:String)
        {

        }

        public var name_:String;
        private var alignment:int;
        public var healed:Boolean = false;
        public var revealed:Boolean = false;
        public var attacked:Boolean = false;
        public var dead:Boolean = false;

        public function action(target:Player)
        {

        }

        public function describe():String
        {

        }
    }
} 
```

[公民.as]

```
package
{   
    public class Citizen extends Player
    {
        public function Citizen(name_:String)
        {
            alignment = 1;
        }

        override public function action(target:Player)
        {

        }

        override public function describe():String
        {
            return "Citizen";
        }
    }
} 
```

[调查员.as]

```
package
{
    public class Investigator extends Player
    {
        public function Investigator(name_:String)
        {
            alignment = 1;
        }

        override public function action(target:Player)
        {
            target.revealed = true;
        }

        override public function describe():String
        {
            return "Cop";
        }
    }
} 
```

[医生.as]

```
package
{
    public class Doctor extends Player
    {
        public function Doctor(name_:String)
        {
            alignment = 1;
        }

        override public function action(target:Player)
        {
            target.healed = true;
        }

        override public function describe():String
        {
            return "Doctor";
        }
    }
} 
```

[黑手党.as]

```
package
{
    public class Mafioso extends Player
    {
        public function Mafioso(name_:String)
        {
            alignment = -1;
        }

        override public function action(target:Player)
        {
            target.attacked = true;
        }

        override public function describe():String
        {
            return "Mafia";
        }
    }
} 
```

不幸的是没有抽象类，因为这将是抽象类和抽象方法的理想情况。

# ruby-on-rails - Asset Pipeline 仅创建 application.css，但不创建任何所需的样式表

> ID：11498183
> 
> 赞同：0
> 
> 时间：2012-07-16T04:39:52.930
> 
> 标签：ruby-on-rails, stylesheet, assets

所以这是`application.css.scss`文件的样子：

```
// require_tree .

body { color: red; } 
```

目录中还有 3 个其他 css 文件`app/assets/stylesheets/`。

输出？头部中的单个样式表标记，指向未压缩的`application.css`.

奇怪的是，JavaScript 做得很好，需要它所需要的一切。

我已经检查了这个存储库与其他存储库：据我所知，配置变量没有区别

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:56:09.733

我相信你缺少一个`=`. 尝试这个：

```
/*
 *= require_tree .
*/

body {
  color: red;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:48:11.947

资产管道的功能之一是将所有 css 集中到一个文件中。是否有一些样式由于编译而不起作用？

# android - 在android中使用html调用web服务

> ID：11498185
> 
> 赞同：0
> 
> 时间：2012-07-16T04:40:16.470
> 
> 标签：android, web-services

我使用 HTML 设计了 ​​android UI。现在我想在那个 html 页面中调用 web 服务。我尝试了在 html 中使用 javascript 调用 webservice 的代码。但这对我不起作用。我认为这是因为 android 模拟器中使用的浏览器。

请给我代码以使用 HTML 调用 web 服务。

谢谢……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:45:01.030

在这里找到了类似的问题

[Android 在 WebView 中调用 JavaScript 函数](https://stackoverflow.com/questions/4325639/android-calling-javascript-functions-in-webview)

你需要调用java方法，在java方法里面你可以调用webservice。

# facebook - 在 Facebook 应用程序中使用 masonry.js

> ID：11498190
> 
> 赞同：1
> 
> 时间：2012-07-16T04:40:40.213
> 
> 标签：facebook, jquery-masonry

我目前在我的 Facebook 应用程序中使用砌体插件。一切都很好，但除了一件事，第一次，FB.autoGrow 没有足够快地调整 iframe 的大小。结果，布局被破坏，所有项目都重叠在一起，如图所示。你能告诉我解决这个问题的任何解决方案吗？

![在此处输入图像描述](../Images/c787bccffc42094e99b4928050ee6a64.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:22:43.877

我在 github 上找到了答案。我刚刚添加了这些代码行，它运行良好。

```
 bufferPx: 10000,
 extraScrollPx: 12000, 
```

参考文献： [https ://github.com/desandro/masonry/issues/145](https://github.com/desandro/masonry/issues/145)

# windows - 从批处理文件重复执行 Windows 命令？

> ID：11498192
> 
> 赞同：2
> 
> 时间：2012-07-16T04:40:56.977
> 
> 标签：windows, loops, batch-file, cmd, shutdown

我对 Windows 的批处理文件不太熟悉，所以这似乎是一个初学者的问题。我如何“循环”或重复如下命令？

```
shutdown -a 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T06:14:20.647

我同意评论者@reuben 的观点，你可能应该寻找其他选项（包括让那个同事自己“修复”），但无论如何，这是一种重复运行命令的方法：

```
:loop
shutdown -a
goto loop 
```

请注意，这可能仍会留下一个窗口，它无法取消关闭，因为它不够“快”。

它还会对您的系统造成“轻微恐惧”，至少在`csrss.exe`(or `conhost.exe`) 进程中是这样，因为控制台窗口将忙于打印消息。因此，您可能希望至少重定向输出 ( `shutdown -a > NUL 2>&1`) 和/或在[调用](https://stackoverflow.com/q/4317020/21567)`shutdown`. 当然，后者会显着增加不“捕获”关闭的风险。

总而言之，这不是解决您问题的好方法。对不起。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T04:56:41.397

您是否要关闭多台远程计算机？您可以编写一个 ssh 到每台机器的脚本并将其发送关闭命令：

```
ssh user1@remote_computer1 shutdown
ssh user2@remote_computer2 shutdown
... 
```

如果您的意思是在同一台计算机上循环关闭命令，您可以将关闭命令放在 ~/.bashrc 中，如果您真的想要的话。但请确保您有充分的理由这样做。

# sql - 如何在 Oracle 的分层查询中执行 WHERE-CLAUSE

> ID：11498199
> 
> 赞同：5
> 
> 时间：2012-07-16T04:41:42.150
> 
> 标签：sql, oracle, hierarchical-data, hierarchical-query

在 Oracle 分层查询中，应在 oracle 文档中的 Connect-By 运算符说明之后评估 WHERE-CLAUSE。

但是有一些复杂的情况：如果 WHERE-CLAUSE 包含 JOIN 样式的限定，如 oracle 所说，应在 Connect-By 运算符之前评估 Join-Style 限定，而另一个仅引用一个关系的非连接样式将是在 Connect-By 运算符之后进行评估。

**那么问题来了：如何将 WHERE-CLAUSE 中的限定条件分为两部分，一是在 Connect-By 算子之前求值，二是在 Connect-By 算子之后求值。**

```
example:
SQL> desc bar
Name                                      Null?    Type
----------------------------------------- -------- -----------------
B1                                                 NUMBER(38)
B2                                                 NUMBER(38)

SQL> desc foo;
Name                                      Null?    Type
----------------------------------------- -------- -----------------
F1                                                 NUMBER(38)
F2                                                 NUMBER(38)
SQL> set pagesize 3000
SQL> set linesize 3000
SQL> explain plan for select * from foo, bar where
 2  **f1=b1 and (b2 = 1 or f1=b2 and b1=1 or f2=b1+1) and f1 is not null**
 3  connect by level < 10;

Explained.

SQL> select * from table(dbms_xplan.display);

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------------
Plan hash value: 2657287368

--------------------------------------------------------------------------------------
| Id  | Operation                     | Name | Rows  | Bytes | Cost (%CPU)| Time     |
--------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT              |      |     1 |    52 |     5  (20)| 00:00:01 |
|*  1 |  FILTER                       |      |       |       |            |          |
|*  2 |   CONNECT BY WITHOUT FILTERING|      |       |       |            |          |
|*  3 |    HASH JOIN                  |      |     1 |    52 |     5  (20)| 00:00:01 |
|   4 |     TABLE ACCESS FULL         | FOO  |     1 |    26 |     2   (0)| 00:00:01 |
|   5 |     TABLE ACCESS FULL         | BAR  |     1 |    26 |     2   (0)| 00:00:01 |
--------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - **filter(("B2"=1 OR "B1"=1) AND "F1" IS NOT NULL)**
   2 - filter(LEVEL<10)
   3 - **access("F1"="B1")**
       **filter("F1"="B2" OR "F2"="B1"+1)**

Note
-----
   - dynamic sampling used for this statement

24 rows selected. 
```

所以，如上图所示，WHERE中的条件，f1=b1 and (b2 = 1 or f1=b2 and b1=1 or f2=b1+1) and f1 is not null，变成了两部分：

一：**filter(("B2"=1 OR "B1"=1) AND "F1" IS NOT NULL)** --> 连接后评估

另一个：**filter("F1"="B2" OR "F2"="B1"+1) 和 access("F1"="B1")** --> 在连接前评估为 JOIN-ON

**那么，谁能解释一下如何区分 WHERE 子句中的条件，以及如何从 WHERE 子句中形成这两部分在 connect-by 之前或之后应用？**

谢谢。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:56:09.127

如果您需要明确拆分它，您可以使用括号和内联视图来实现。

```
select *
from (select * 
      from foo, bar 
      where f1=b1 and (b2 = 1 or f1=b2 and b1=1 or f2=b1+1) and f1 is not null)
connect by level < 10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T08:45:44.517

您不应该使用隐式连接，`JOIN`而是使用显式连接。

一旦你这样做了，你就可以将“真实”的 where 条件与连接条件区分开来。

我不清楚（这是使用隐式连接语法的结果）您究竟想使用什么作为连接条件以及使用什么作为 where 条件。

将您的查询重写为如下内容：

```
from foo
   join bar on foo.f1 = bar.b1
where bar.b2 = 1 or ....
  and f1 is not null
connect by level < 10; 
```

该条件`f1 is not null`似乎是不必要的（即使在您的初始查询中），因为如果 f1 无论如何都为空，则连接不会产生任何结果。

# asp.net-mvc - ASP.NET MVC 内置支持 DropDownList 编辑器模板

> ID：11498215
> 
> 赞同：8
> 
> 时间：2012-07-16T04:43:50.700
> 
> 标签：asp.net-mvc

有什么办法可以说我的视图模型属性应该呈现为`DropDownList`（以便我可以指定`DropDownList`项目）？

我发现了很多自定义实现，但我想应该有一个内置的方法来实现这样一个基本的东西。

**更新。**我正在按`Html.EditorForModel`方法渲染我的模型，我不想使用类似的方法`Html.DropDownListFor`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-16T06:25:07.403

没有呈现下拉列表的内置模板，除了呈现, ,下拉列表的`Nullable<bool>`类型，但我认为这不是你要问的。`Not Set``Yes``No`

所以让我们建立一个。与往常一样，我们首先定义视图模型，该模型将表示包含 2 个属性的下拉列表（一个用于选定值，一个用于可用值）：

```
public class ItemViewModel
{
    public string SelectedId { get; set; }
    public IEnumerable<SelectListItem> Items { get; set; }
} 
```

那么我们可以有一个具有这个属性的标准视图模型：

```
public class MyViewModel
{
    public ItemViewModel Item { get; set; }
} 
```

然后是一个将填充视图模型的控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new MyViewModel
        {
            Item = new ItemViewModel
            {
                SelectedId = "2",
                Items = new[]
                {
                    new SelectListItem { Value = "1", Text = "item 1" },
                    new SelectListItem { Value = "2", Text = "item 2" },
                    new SelectListItem { Value = "3", Text = "item 3" },
                }
            }
        };
        return View(model);
    }
} 
```

和相应的视图 ( `~/Views/Home/Index.cshtml`)：

```
@model MyViewModel
@using (Html.BeginForm())
{
    @Html.EditorForModel()
} 
```

现在剩下的就是为`DropDownViewModel`类型 ( `~/Views/Shared/EditorTemplates/DropDownViewModel.cshtml`) 定义一个自定义编辑器模板：

```
@model DropDownViewModel
@Html.DropDownListFor(
    x => x.SelectedId, 
    new SelectList(Model.Items, "Value", "Text", Model.SelectedId)
) 
```

并覆盖 Object 类型的默认模板，以便按照 Brad Wilson 在 中解释的那样进行*Deep Dive*[`his blog post`](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-4-custom-object-templates.html)。否则，默认情况下 ASP.NET MVC 不会递归到您的模板的复杂子类型。所以我们覆盖`~/Views/Shared/EditorTemplates/Object.cshtml`：

```
@foreach (var prop in ViewData.ModelMetadata.Properties.Where(pm => pm.ShowForEdit && !ViewData.TemplateInfo.Visited(pm))) 
{
    if (prop.HideSurroundingHtml) 
    {
        @Html.Editor(prop.PropertyName)
    } 
    else 
    { 
        <div class="editor-label">
            @(prop.IsRequired ? "*" : "")
            @Html.Label(prop.PropertyName)
        </div>
        <div class="editor-field">
            @Html.Editor(prop.PropertyName)
            @Html.ValidationMessage(prop.PropertyName, "*")
        </div>
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T05:05:37.660

您可以使用 Html Helper DropDownList 来构建您的下拉列表，但模型对象应该是无法计数的 SelectionListItem。

```
//on controller
    List<SelectListItem> items = new List<SelectListItem>();
     items.Add(new SelectListItem { Text = "Action", Value = "0"});
     items.Add(new SelectListItem { Text = "Drama", Value = "1" });
     items.Add(new SelectListItem { Text = "Comedy", Value = "2", Selected = true });
     items.Add(new SelectListItem { Text = "Science Fiction", Value = "3" });
     ViewBag.MovieType = items;

//on view

         @Html.DropDownList("MovieType") 
```

如果您不想将模型对象构建为 SelectListItem，那么您应该使用 DropDownListFor

```
//you can use DropDownListFor as
 @Html.DropDownListFor(m=>m.Text,m.Value) 
```

# google-apps-script - htmlService - 响应时间慢吗？

> ID：11498217
> 
> 赞同：1
> 
> 时间：2012-07-16T04:43:59.980
> 
> 标签：google-apps-script

我遵循了谷歌应用程序脚本 htmlService 的 hello world 示例，我发现最小的脚本和 html 页面需要几秒钟才能响应。这是意料中事？？？

```
function doGet() {
    return HtmlService.createHtmlOutputFromFile('helloPage.html');
} 
```

使用 Speed Tracer，我看到 caja.js 的请求时间约为 1 秒；jsapi 0.5 秒；script.google.com/macros/static/client/css/4255899750-MaestroHtmlAppWrapperCss_ltr.css 需要 0.75 秒？

我应该在哪里寻找解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T05:16:21.123

我们知道这比预期的要慢，并且正在努力加快速度。

# iphone - 从代码 iPhone dev 中选择一个新的文本框

> ID：11498219
> 
> 赞同：-2
> 
> 时间：2012-07-16T04:44:12.983
> 
> 标签：iphone, objective-c

> **可能重复：**
> [UITextField 焦点](https://stackoverflow.com/questions/1014999/uitextfield-focus)

标题可能有点混乱..无法弄清楚如何正确表达。我的问题很简单，当视图加载时，我希望选择一个文本框进行编辑。类似于 iPhone Safari 文本框编辑中的下一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:53:29.173

好吧，试试下面的代码。

```
- (void)viewDidLoad {
  [super viewDidLoad];
  [yourTextField becomeFirstResponder];

} 
```

# php - Authorize.net CIM 重复交易窗口

> ID：11498225
> 
> 赞同：9
> 
> 时间：2012-07-16T04:44:50.440
> 
> 标签：php, payment-gateway, credit-card, authorize.net, payment-processing

我正在使用 Authorize.net 的客户信息管理器 API (CIM)。我的测试用例以用户在结账时提供错误地址为中心。

每次用户提交表单时，我的应用程序都会尝试创建客户资料：

```
$txrq = new AuthorizeNetCIM;
$txrsp = $txrq->createCustomerProfileTransaction("AuthCapture", $transaction, 'x_duplicate_window=0'); 
```

`x_duplicate_window`正如您在上面看到的那样，我尝试将传递设置为“额外选项”，在 SDK 中，它是请求的以下部分：

```
<extraOptions><![CDATA[' . $this->_extraOptions . ']]></extraOptions> 
```

无论我为 x_duplicate_window 使用什么值，authorize.net 都会一直返回错误，直到默认时间过去。

```
AuthorizeNet Error: Response Code: 3 Response Subcode: 1 Response Reason Code: 11 Response Reason Text: A duplicate transaction has been submitted. 
```

我担心如果我们的一个（潜在）用户尝试提交错误的地址，意识到他或她的错误，然后在交易超时发生时又收到 3 分钟的额外错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T05:05:50.197

Authorize.net SDK 代码有错误：

~ 360-364 行`CIM.php's method _setPostString()`

```
if ($this->_extraOptions) {
    $this->_xml->addChild("extraOptions");
    $this->_post_string = str_replace("<extraOptions></extraOptions>",'<extraOptions><![CDATA[' . $this->_extraOptions . ']]></extraOptions>', $this->_xml->asXML());
    $this->_extraOptions = false;
} 
```

`$this->_xml->addChild("extraOptions");`导致节点与 str_replace 调用不匹配：`<extraOptions/>`

修改 str_replace 将解决这个问题，它将很好地传递**x_duplicate_window**参数：

```
if ($this->_extraOptions) {
    $this->_xml->addChild("extraOptions");
    $this->_post_string = str_replace("<extraOptions/>",'<extraOptions><![CDATA[' . $this->_extraOptions . ']]></extraOptions>', $this->_xml->asXML());
    $this->_extraOptions = false;
} 
```

# javascript - 从 nodejs crypto 返回的字符串中修剪非 ascii 字符

> ID：11498229
> 
> 赞同：4
> 
> 时间：2012-07-16T04:45:29.573
> 
> 标签：javascript, string, node.js, cryptography, trim

我已经使用 nodejs 加密库成功解密了敏感数据。

问题是解密的数据有一个尾随的非ASCII字符。

我该如何修剪？

我下面的当前修剪功能无法完成这项工作。

```
String.prototype.fulltrim = function () {
  return this.replace( /(?:(?:^|\n)\s+|\s+(?:$|\n))/g, '' ).replace( /\s+/g, ' ' );
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T04:59:18.770

我认为以下就足够了。

```
str.replace(/[^A-Za-z 0-9 \.,\?""!@#\$%\^&\*\(\)-_=\+;:<>\/\\\|\}\{\[\]`~]*/g, '') ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:13:24.897

基于[此答案](https://stackoverflow.com/a/8519863/1520981)，您可以使用：

```
String.prototype.fulltrim = function () {
  return this.replace( /([^\x00-\xFF]|\s)*$/g, '' );
}; 
```

这应该删除字符串末尾的所有空格和非 ascii 字符，但将它们留在中间，例如：

```
"Abcde ffאggg ג ב".fulltrim();
// "Abcde ffאggg"; 
```

# java - Doxygen java接口和抽象类

> ID：11498238
> 
> 赞同：4
> 
> 时间：2012-07-16T04:46:50.953
> 
> 标签：java, inheritance, uml, doxygen, diagram

我最近在我的几个项目中测试了 doxygen。

似乎doxygen对待java接口，抽象类和类是一样的。

没有斜体字体或建议项目的类型。这使得继承图看起来像一个类继承自多个超类。这很烦人。

我错过了一些设置还是它是这样设计的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T14:48:40.817

这确实是缺少的功能。

Doxygen 内部知道该类型，但如果我没记错的话，Graphviz/dot 存在/曾经有一些问题，阻止了用斜体渲染某些节点，而其他节点则没有。

还有一个长期存在的想法是在不同的列表中呈现类和接口（以及其他特殊的复合类型，如 Objective-C 协议和类别），但到目前为止还没有实现（尽管请随时提供帮助 ;-)

# sed - 尝试使用 sed 从包含另一个字符串的行中提取字符串

> ID：11498239
> 
> 赞同：2
> 
> 时间：2012-07-16T04:46:52.107
> 
> 标签：sed, extract

我有一个看起来像这样的文件：

```
$variable['keyword1']   = 'value1';
$variable['keyword2']   = 'value2';
$variable['keyword3']   = 'value3';
$variable['keyword4']   = 'value4'; 
```

*关键字 1-4*都是唯一的，只是字母和数字。

*值 1-4*可能是唯一的，也可能不是唯一的，可以是字母、数字、特殊字符的任意组合

我需要能够提取*value1*或*value2*或*value3*或*value4*并将其保存为 $somevariable。所以关键字显然是我需要在 sed 命令中定义的东西，以便我得到所需的值。我将如何使用 sed one 衬垫来做到这一点？对我来说看起来并不难，但我似乎无法破解它。几个小时以来一直在谷歌上搜索并尝试不同的组合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T05:03:32.890

```
sed -n "s/\$\w\+\['keyword1'\]\s*=\s*'\([^']\+\)';/\1/p" inputfile 
```

保存它：

```
somevariable=$(sed -n "s/\$\w\+\['keyword1'\]\s*=\s*'\([^']\+\)';/\1/p" inputfile) 
```

如果您的文件与您描述的完全一样，您也可以使用它：

```
grep keyword1 inputfile | sed "s/.*=\s*'\([^']\+\)';/\1/" 
```

或者更好：（感谢威廉）

```
sed "/keyword1/s/.*=\s*'\([^']\+\)';/\1/" inputfile 
```

# javascript - Jquery从点击的div中获取id

> ID：11498240
> 
> 赞同：0
> 
> 时间：2012-07-16T04:47:14.340
> 
> 标签：javascript, jquery, html, ajax

我有一个这样的html结构

```
 <div class='mydiv' id='89'>hello</div>
 <div class='mydiv' id='123'>hihihi</div> 
```

而我的jQuery目前是这样的

```
$('.mydiv').click(function(){
$.ajax({
     type: "POST",
     url: 'getdata.php',
     data: { uid: "UNKNOWN" }
     success: function(data) {
     $('#o').html(data);
     $('#o').fadeIn("fast");
    }
    });
    }); 
```

我需要的是用点击的 div 中的 id 填写 jQuery 数据中的 UNKNOWN

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T04:48:25.303

你可以`this.id`用来获取id。

```
$('.mydiv').click(function () {
    $.ajax({
        type: "POST",
        url: 'getdata.php',
        data: {
            uid: this.id
        },
        success: function (data) {
            $('#o').html(data);
            $('#o').fadeIn("fast");
        }
    });
}); 
```

# vb6 - 链表的头部应该是一个虚拟节点吗？

> ID：11498243
> 
> 赞同：0
> 
> 时间：2012-07-16T04:47:33.400
> 
> 标签：vb6, linked-list, head

我目前正在编写一个程序，该程序（截至目前）使用大约五个链表，并且大约有 50 个函数可以修改或以其他方式使用这些链表。我对应该如何实现头节点感到有些不安。

**实现 #1**使用虚拟头节点

如果我创建一个虚拟头节点，则无需删除 headNode，即使该链表没有数据可以表示。下面是显示这个想法的两个不同的可能链接列表。

```
Format: (object)--name_of_pointer_to_next_object--> (next object)
(headNode)--headNode.pNext--> (Nothing/NULL)
(headNode)--headNode.pNext--> (dataNode1)--dataNode1.pNext--> (dataNode2)--dataNode2.pNext--> (Nothing/NULL) 
```

这种实现的好处是，对于与链表一起工作的函数，它们不必为头节点为`Nothing`或（在 c++ 中）的情况提供特殊代码，`NULL`. 下面是使用此实现将节点附加到链表末尾的示例。

```
Public Function AppendNode(theLinkedList as NODE_, theNewNode as NODE_)
    dim lastNode as NODE_

    Set lastNode = theLinkedList

    Do While Not lastNode.pNext Is Nothing
        Set lastNode = lastNode.pNext
    Loop

    Set lastNode.pNext = theNewNode 
End Function 
```

**实现#2** headNode 可以删除

如果我允许删除 headNode，这会带来问题并增加我必须编写的代码量。下面是同一组数据，只是这次头是包含数据的合法节点。

```
Format: (object)--name_of_pointer_to_next_object--> (next object)
(Nothing/NULL)
(dataNode1)--dataNode1.pNext--> (dataNode2)--dataNode1.pNext--> (Nothing/NULL) 
```

这里是同样的功能，只是这次它必须注意头节点是`Nothing`/的可能性`NULL`。

```
Public Function AppendNode(theLinkedList as NODE_, theNewNode as NODE_)
    dim lastNode as NODE_

    If theLinkedList Is Nothing Then
        Set theLinkedList = theNewNode 
    Else
        Set lastNode = theLinkedList

        Do While Not lastNode.pNext Is Nothing
            Set lastNode = lastNode.pNext
        Loop

        Set lastNode.pNext = theNewNode 
    End If
End Function 
```

显然，我倾向于实施#1。每次我想使用链表时，它至少需要少 4 行代码（考虑到我会这样做数百次，你可以将这 4 行乘以 300 左右；例如，它可以让我免于编写 1,200代码行），也许最重要的是，它会减少我的程序的状态量。我的程序将处于的所有可能状态只需要我寻找`pNext Is Nothing`，并且在这一点上非常感谢减少状态量，因为这个程序将是一个怪物，最终将有大约 20k 行必须处理大量状态的复杂代码。

我认为实施＃1是最好的方法，我错了吗？我想不出实施#2 会更好的单一原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:44:29.877

在链表的开头和结尾处有一个特殊的保留节点是很常见的（尽管不是必需的）。它通常被称为[哨兵节点](http://en.wikipedia.org/wiki/Linked_list#Sentinel_nodes)。

顺便说一句，我建议采用“大约 50 个修改或以其他方式使用这些链接列表的函数”并将它们移动到封装它们的类中。

你不应该有这样的代码：

```
Dim theLinkedList as NODE_
Set theLinkedList = New NODE_

'bunch of work with the list
'bunch of work with the list
'bunch of work with the list

Dim theNewNode as NODE_
Set theNewNode = New NODE_
Set theNewNode.Next = someDataObject

Call AppendNode(theLinkedList, theNewNode) 
```

相反，代码应该如下所示：

```
Dim theList As LinkedList
Set theList = New LinkedList

'etc

Call theList.Append(someDataObject) 
```

看到不同？LinkedList 类包装和隐藏细节。它还可以处理诸如头部或尾部是否有哨兵节点之类的事情，这样您项目的所有其余代码就完全不知道了。

# github - 无法让 Disqus 评论在 Github 页面博客上工作

> ID：11498244
> 
> 赞同：2
> 
> 时间：2012-07-16T04:47:33.823
> 
> 标签：github, comments, blogs, disqus

我正在尝试向我的 github 页面博客添加评论，添加代码时没有任何反应。不管我把它贴在哪里。到目前为止，我已经尝试了三种不同的方法：

1.  根据[JB 安装文档](http://jekyllbootstrap.com/usage/blog-configuration.html)，我将“disqus”指定为提供程序，并将我的 disqus short_name 添加到我的 _config.yml 文件中。实际上应该这样做，因为 Jekyll Bootstrap 附带了 disqus 在您注册帐户时提供的 JS 小部件。它在包含文件夹中。

2.  由于这不起作用，我找到了这个小部件，并在我的 post.html 模板中添加了一个包含语句来引用它。这也没有奏效。

3.  由于这些都不起作用（我仍然坚持认为我不应该粘贴 JS，因为它已经包含在 JB 中，但此时我很绝望），我粘贴了 disqus 在我注册帐户时提供的 JS布局和包含中的 post.html - 我一次做了一个，每次粘贴时都进行测试。

每次我这样做，我的页面都没有改变。就像我什么都没做一样。

我已经用谷歌搜索死了，并查看了[另一个成功使用 disqus 的 github 页面的来源](https://github.com/staceybaker1974/erjjones.github.com)——唯一看起来不同的是他将他的 JS 粘贴到 layout.html 页面中——我没有其中一个. 我只有帖子和页面。而且我肯定会尝试在我的帖子中添加评论，而不是我的页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-28T20:51:40.823

我遇到了类似的问题，因为我的网站使用的是 HTTPS，而 Disqus 是通过 HTTP 提供的。

我可以`jekyll serve`在本地看到评论，但评论没有出现在实时网站上。经过一番搜索和比较后，我打开了 Chrome Web Inspector，看到了一系列错误，如下面的两个示例：

> [阻止] [https://devblog.toopher.com/2013/07/05/enabling-travis-ci-for-fun-and-profit/的页面运行来自](https://devblog.toopher.com/2013/07/05/enabling-travis-ci-for-fun-and-profit/)[http://toopherdevblog.disqus.com/](http://toopherdevblog.disqus.com/embed.js)的不安全内容[嵌入.js](http://toopherdevblog.disqus.com/embed.js)。
> 
> [https://devblog.toopher.com/2013/07/05/enabling-travis-ci-for-fun-and-profit/](https://devblog.toopher.com/2013/07/05/enabling-travis-ci-for-fun-and-profit/)的页面显示来自[http://i.imgur.com/EftY63v.png](http://i.imgur.com/EftY63v.png)的不安全内容.

我编辑了 Disqus 评论提供程序 ( `_includes/JB/comments-providers/disqus`) 并将 Disqus URL 更改为`https://`如下所示：

```
dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js'; 
```

希望对其他人有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:28:39.070

首先，让我告诉您，我曾使用过 jekyll，但我**没有**任何使用 jekyll bootstrap 的经验**。**

其次，在查看您在 github 上的存储库后，我认为将*{% include JB/comments-providers/disqus %}*添加到您的 post.html 布局应该可以解决问题。这将在您的 jekyll 帖子中加载 javascript，从而启用评论，当然，在编辑 _config.yml 之后。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-01T15:05:17.317

我有同样的问题。确保您的`_config.yml`集合中的 url 参数正确：

```
url: "https://GITHUBUSERNAME.github.io" 
```

不言而喻，但确保您的短名称参数也是正确的不会有什么坏处：

```
disqus:
    shortname: your-short-name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-09T17:27:32.980

也许您只需要在[这里](https://disqus.com/admin/create/)创建一个站点配置文件。

希望这可以帮助。

# c# - 我在 oledb 中选择不同的查询只返回一行。为什么这样做

> ID：11498252
> 
> 赞同：0
> 
> 时间：2012-07-16T04:48:28.443
> 
> 标签：c#, sql, oledb

我正在尝试在我的 windows 窗体 gui 内的进度条的一部分中获取 excel 列中的唯一条目总数。然而，当我调用下面的函数时，它只返回一行。我正在使用 worksheet.rows.count 来查找唯一的“程序 ID”条目总数。

```
public static int procedureTotals(string excelFile) {
        string connection = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + excelFile
                            + ";Extended Properties='Excel 12.0;HDR=YES;'";
        string sql = null;
        string worksheetName = null;

        DataTable schema = null;
        DataTable worksheet = null;
        DataSet workbook = new DataSet();
        OleDbConnection objconn = new OleDbConnection(connection);
        objconn.Open();
        schema = objconn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);
        worksheetName = schema.Rows[0]["Table_Name"].ToString();
        sql = "SELECT DISTINCT 'Procedure ID' FROM[" + worksheetName + "]";// GROUP BY 'Procedure ID'";
        //data adapter
        OleDbDataAdapter objAdapter = new OleDbDataAdapter();
        objAdapter.SelectCommand = new OleDbCommand(sql, objconn);
        objAdapter.Fill(workbook);
        worksheet = workbook.Tables[0];
        objconn.Close();

        return worksheet.Rows.Count;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:14:03.137

```
sql = "SELECT DISTINCT 'Procedure ID' FROM[" + worksheetName + "]"; 
```

在这里，您只检索一列数据。请将查询更新为

```
sql = "SELECT DISTINCT * FROM [" + worksheetName + "]"; 
```

试试这个.. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-16T20:59:43.997

您正在选择列标题，因此它返回一条记录“生产者 ID”，因为您在它周围加上引号，就好像它是一个字符串一样。

您将不得不将列名更改为无空格的单词 (Procedure_ID)，因此您不需要单引号。当您使用单引号时，系统认为您正在尝试在搜索中包含标题并仅返回一行 >> 标题。

我希望我解释正确。

# ruby - 在数组中查找单词的索引

> ID：11498264
> 
> 赞同：1
> 
> 时间：2012-07-16T04:50:52.837
> 
> 标签：ruby

我是 ruby​​ 新手，最近开始[在七周内阅读七种语言](http://www.teachersyndicate.com/documents/nov_2010/Seven%20Languages%20in%20Seven%20Weeks%20A%20Pragmatic%20Guide%20to%20Learning%20Programming%20Languages.pdf)

在第 35 页，有练习题

```
For the string “Hello, Ruby,” ﬁnd the index of the word “Ruby.” 
```

在 Ruby 中是如何实现的？需要一些指导..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T04:55:37.183

[。指数](http://ruby-doc.org/core-1.9.3/String.html#method-i-index)

```
"Hello, Ruby,".index("Ruby") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T04:57:41.750

来自[文档](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-index)：

index(regexp [, offset]) → fixnum 或 nil 返回给定子字符串或模式 (regexp) 在 str 中第一次出现的索引。如果没有找到则返回 nil。如果存在第二个参数，它指定字符串中开始搜索的位置。

```
"hello".index('e')             #=> 1
"hello".index('lo')            #=> 3
"hello".index('a')             #=> nil
"hello".index(ee)              #=> 1
"hello".index(/[aeiou]/, -3)   #=> 4 
```

所以对于你的困境：

```
ruby-1.9.3-p194@heroku macbook-5:$ irb
s="1.9.3p194 :001 > s="hello, ruby,"
 => "hello, ruby," 
1.9.3p194 :002 > s.index("ruby")
 => 7 
```

# android - 为什么在自定义测试之后调用 testServiceTestCaseSetupProperly(...)？

> ID：11498267
> 
> 赞同：0
> 
> 时间：2012-07-16T04:51:27.583
> 
> 标签：android, unit-testing, service, junit, servicetestcase

我有一个简单的 ServiceTestCase 和一个仅包含生命周期方法的空 IntentSerice，该服务也注册了 AndroidManifest.xml，以及一个操作标签“com.tut.my.service.DATAUPDATE”。

Service 的调用效果很好，所有的 live-cycle 方法都按顺序出现，但是在我的自定义测试完成后发生了一些奇怪的事情。ServiceTestCase 在我的自定义测试之后发布了方法[testServiceTestCaseSetUpProperly()](http://developer.android.com/reference/android/test/ServiceTestCase.html#testServiceTestCaseSetUpProperly%28%29)以确保[setupService()](http://developer.android.com/reference/android/test/ServiceTestCase.html#setupService%28%29)正确运行。

所以我环顾四周，发现一些[有趣的博客](http://convales.blogspot.de/2012/07/never-start-or-shutdown-service-in.html)关注 setupService()，但结论并不令人满意。博客作者建议 - 出于某种充分的理由 - 不要在[setUp()中调用](http://developer.android.com/reference/android/test/AndroidTestCase.html#setUp%28%29)[startService(...)](http://developer.android.com/reference/android/content/Context.html#startService%28android.content.Intent%29)，因为他非常清楚为什么这不是一个好主意。

但是，在我的自定义测试之后调用 testServiceTestCaseSetUpProperly() 给我带来的问题是调用 MyService 服务的新实例。这最终会调用 onCreate 并且服务由于某种原因而死，finito ...但所有测试都成功通过。

这是服务的来源：

```
public class MyService extends IntentService {

  public static final String INTENT = "com.tut.my.service.DATAUPDATE";

  public MyService() {
    super(INTENT);
    Log.d(getClass().getSimpleName(), "called: std c-tor()");
  }

  @Override
  public void onCreate() {
    super.onCreate();
    Log.d(getClass().getSimpleName(), "called: onCreate()");
  }

  @Override
  public int onStartCommand(Intent intent, int flags, int startId) {
    Log.d(getClass().getSimpleName(), "called onStartCommand() --> intent: " + intent.getAction() + " flags: " + flags + " startID: " + startId);
    return super.onStartCommand(intent, flags, startId);
  }

  @Override
  public void onDestroy() {
    super.onDestroy();
    Log.d(getClass().getSimpleName(),"called: onDestory()");
  }

  @Override
  protected void onHandleIntent(Intent intent) {
    Log.d(getClass().getSimpleName(), "called: onHandleIntent() --> Intent: " + intent.getAction());
    setPriceData();
  }
} 
```

这是 ServiceTestCase 的来源

```
@MediumTest
public class MyServiceTest extends ServiceTestCase<MyService> {

  Context mCtx = null;

  public MyServiceTest() {
    super(MyService.class);
  }

  @Override
  protected void setUp() throws Exception {
    super.setUp();
    mCtx = getSystemContext();
  }

  @MediumTest
  public void testGetMyServiceData() throws InterruptedException {
    Intent i = new Intent(MyService.INTENT);
    Log.d(getClass().getSimpleName(), "startService(i)");
    mCtx.startService(i);

    // throttle the instrumentation thread so the service 
    // can be instantiated for sure
    Log.d(getClass().getSimpleName(), "before Thread Sleep");
    Thread.sleep(8000); // needs 10 seconds before ANR
    Log.d(getClass().getSimpleName(), "after Thread Sleep");
  }
} 
```

以及相应的（剥离的）LogCat 输出：

```
I/TestRunner(11954): started: testGetMyServiceData(com.tut.my.service.MyServiceTest)
D/MyServiceTest(11954): startService(i)    
D/MyService(11954): called: std c-tor()
D/MyServiceTest(11954): before Thread Sleep
D/MyService(11954): called: onCreate()
D/MyService(11954): called onStartCommand() --> intent: com.tut.my.service.DATAUPDATE flags: 0 startID: 1
D/MyService(11954): called: onHandleIntent() --> Intent: com.tut.my.service.DATAUPDATE
D/MyService(11954): called: onDestory()
D/MyServiceTest(11954): after Thread Sleep
I/TestRunner(11954): finished: testGetMyServiceData(com.tut.my.service.MyServiceTest)
I/TestRunner(11954): passed: testGetHarvestData(com.tut.my.service.MyServiceTest)
I/TestRunner(11954): started: testServiceTestCaseSetUpProperly(com.tut.my.service.MyServiceTest)
D/MyService(11954): called: std c-tor()
I/TestRunner(11954): finished: testServiceTestCaseSetUpProperly(com.tut.my.service.MyServiceTest)
I/TestRunner(11954): passed: testServiceTestCaseSetUpProperly(com.tut.my.service.MyServiceTest)
I/TestRunner(11954): started: testAndroidTestCaseSetupProperly(com.tut.my.service.MyServiceTest)
I/TestRunner(11954): finished: testAndroidTestCaseSetupProperly(com.tut.my.service.MyServiceTest)
I/TestRunner(11954): passed: testAndroidTestCaseSetupProperly(com.tut.my.service.MyServiceTest)
I/ActivityManager(71): Force stopping package com.tut.my.service uid=10036
I/Process(71): Sending signal. PID: 11954 SIG: 9 
```

所以问题是，为什么 testServiceTestCaseSetupProperly() 在最后而不是首先被调用？以及为什么 MyService 对象如此不优雅地死去。

**编辑：**为了更精确：

我关心的重要部分是对 onCreate 的粗鲁调用。

```
 I/TestRunner(11954): started: testServiceTestCaseSetUpProperly(com.tut.my.service.MyServiceTest)
 D/MyService(11954): called: std c-tor() <--- ONLY one call to onCreate
 I/TestRunner(11954): finished:testServiceTestCaseSetUpProperly(com.tut.my.service.MyServiceTest) 
```

*   如果我要在 onCreate 中分配资源，谁断言我要清理分配的资源？
*   为什么在所有测试结束时开始检查正确的服务设置？
*   为什么它会被杀死呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T06:29:56.167

JUnit 3 使用反射来获取要运行的测试。不保证测试以任何特定顺序运行。此外，单元测试应该相互独立，因此它们的执行顺序不应该相关。

# vb6 - 如何避免列表框中的重复值

> ID：11498271
> 
> 赞同：1
> 
> 时间：2012-07-16T04:51:39.877
> 
> 标签：vb6

表格1

```
ID Division Dept

001 CS IT
002 CD Admin
003 AS Admin 
```

我想在列表框中加载没有重复值的部门

尝试过的代码

```
Dim rdoRs As New ADODB.Recordset
Dim record As Variant
Dim Div As Variant
Dim usr, MySQL As String
usr = "CD,AS,"
record = Split(usr, ",")
For Each Div In record
MySQL = "Select Distinct dept from table1 Where division = '" & div & "'"
   rdoRs.Open MySQL, conn1
   If rdoRs.RecordCount > 0 Then
      Do While Not rdoRs.EOF
         listbox1.AddItem rdoRs!dept
           rdoRs.MoveNext
           Loop
   End If
   rdoRs.Close
Next 
```

输出

```
Listbox1

Admin 'Loaded for CD Division
Admin 'Loaded for AS Division 
```

上面的代码工作正常，但它加载了 2 次管理部门。在列表框中。因为 For Loop 正在为 CD 加载部门管理员，并且再次为 AS 部门加载部门管理员。

我不想在列表框中显示重复的值。

预期产出

```
Listbox1

Admin  'Loaded for both CD and AS Division 
```

如何在 VB6 中做到这一点。

需要 VB6 代码帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:22:53.707

编写一个函数来检查它是否已经在列表中......

```
Public Function FindInList(theList as ListBox, theString as String)
    Dim i as Integer
    theString = LCase(Trim(theString))

    For i = 0 to theList.ListCount - 1
        If LCase(Trim(theList.List(i))) = theString then
            FindInList = i
            Exit Function
        End If
    Next i

    FindInList = -1
End Function 
```

然后，当您想将内容添加到列表中时，只需执行...

```
If FindInList(List1, StringToAdd) = -1 Then List1.AddItem(StringToAdd) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T04:55:09.577

您可以在查询中执行此操作

改变

```
MySQL = "Select dept from table1 Where division = '" & div & "'" 
```

类似于

```
MySQL = "Select DISTINCT dept from table1 Where division = '" & div & "'" 
```

# mysql - MySQL 随机唯一字符串

> ID：11498274
> 
> 赞同：4
> 
> 时间：2012-07-16T04:52:07.410
> 
> 标签：mysql

我正在为一个网站编写一个“重置密码”工具，作为其中的一部分，我需要生成一个随机的、唯一的字符串以插入 MySQL 数据库。

到目前为止，这只是简单地使用`SHA1(RAND())`，并且效果很好。然而，**这只**给出了不同的组合`1.46150164E48`（因为`SHA1`我不太确定唯一的范围`RAND`是什么）不同的组合并且我想确保插入两个相同值的情况永远不会发生。

现在我可以很容易地用 PHP 完成它（因为这是基于 PHP 的网站），遍历一个循环，直到生成一个不存在的随机字符串 - 在大多数情况下，这将是 1 次迭代，但我想知道这是否是可以用 MySQL 吗？

也就是说：在 MySQL 中，是否有可能生成一个伪随机字符串，MySQL 本身将确保在给定的表和字段中是唯一的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T05:35:10.983

您还可以使用每次生成唯一值的 UUID() 全局函数：

```
SELECT UUID() 
```

# python - Ubuntu 12.04 上的 pyaudio 输入设备无效

> ID：11498275
> 
> 赞同：3
> 
> 时间：2012-07-16T04:52:12.897
> 
> 标签：python, ubuntu-12.04, pyaudio

这与此[问题](https://stackoverflow.com/questions/4672155/pyaudio-ioerror-no-default-input-device-available)类似，但我无法让 PyAudio 与 EPD 或系统安装一起使用。

```
 In [1](https://stackoverflow.com/questions/4672155/pyaudio-ioerror-no-default-input-device-available): import pyaudio
In [2]: pa = pyaudio.PyAudio()
In [3]: pa.get_default_input_device_info()
IOError                                   Traceback (most recent call last)
 in ()
----> 1 pa.get_default_input_device_info()

/usr/local/epd/lib/python2.7/site-packages/PyAudio-0.2.4-py2.7-linux-i686.egg/pyaudio.pyc in get_default_input_device_info(self)
    933         """
    934 
--> 935         device_index = pa.get_default_input_device()
    936         return self.get_device_info_by_index(device_index)
    937 

IOError: No Default Input Device Available 
```

或使用系统安装：

```
 >>> import pyaudio
>>> pa = pyaudio.PyAudio()
>>> pa.get_default_input_device_info()
Traceback (most recent call last):
  File "", line 1, in 
  File "/usr/local/lib/python2.7/dist-packages/pyaudio.py", line 935, in get_default_input_device_info
    device_index = pa.get_default_input_device()
IOError: No Default Input Device Available 
```

关于如何解决此问题以使 PyAudio 正常工作的任何想法？

# linux - kannel 配置文件，用于从 localhost 向 moble 发送短信

> ID：11498276
> 
> 赞同：0
> 
> 时间：2012-07-16T04:52:17.423
> 
> 标签：linux, kannel

我是 kannel 的新手，想从我的 localhost 机器向我的手机号码发送消息，但我不知道如何从配置文件开始

对此主题的任何帮助将不胜感激。我尝试了一些配置文件，但似乎没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:56:41.310

Kannel 是一个服务器应用程序，您可以在其中将其连接到运营商 SMSC 以发送短信。在这种情况下，您必须从运营商那里获得一个帐户。否则，您可以将移动/GSM 调制解调器连接到您的本地主机并通过 Kannel 访问它以发送 SMS。

# wix - 在安装过程中检测是否存在特定的用户帐户

> ID：11498279
> 
> 赞同：0
> 
> 时间：2012-07-16T04:52:28.237
> 
> 标签：wix, wix3.5

我正在使用 wix 安装程序，它应该能够在安装过程中检测到特定的 Windows 用户帐户。因此，当我尝试安装时，如果该用户不存在于该机器中，则意味着它不应继续进行。在wix中可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T05:00:47.320

您必须创建一个自定义操作来检查用户，如果找到设置一个`property`. 使此自定义操作在`LaunchConditions`例如​​之前运行，`<Custom Action="Your_CA" Before="LaunchConditions" />`并在启动条件中检查该属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:08:45.213

如果您需要确保用户存在，您可以在安装过程中使用[util:User](http://wix.sourceforge.net/manual-wix3/util_xsd_user.htm)元素来创建用户：

```
<util:User Id="UserToCheckOrCreate"
           Name="User123"
           Password="Pa55w0rd"
           CreateUser="yes"
           UpdateIfExists="yes"
           PasswordNeverExpires="yes"
           PasswordExpired="no"
           RemoveOnUninstall="yes" /> 
```

# c# - 使用共享主机创建定时事件？

> ID：11498280
> 
> 赞同：2
> 
> 时间：2012-07-16T04:52:33.620
> 
> 标签：c#, asp.net, triggers

我不确定这是否可以使用像 GoDaddy/Razor Hosting/DiscountASP/etc. 这样的常规托管计划，或者我是否需要 VPS（或类似的）。

我想要做的是要么让一个程序不断运行并每小时执行一项活动，要么让程序每小时启动一次。该程序/服务基本上使用 HttpWebRequest 获取网页的源并将其保存到 SQL Server 数据库。显然，我希望它每 x 分钟运行一次，以保持内容最新。我可能每天使用该程序 7 次，或者我可能每 7 个月使用一次，因此每次访问页面时它都无法抓取网站。

在我自己的机器上，我会创建一个带有线程或后台服务的 ASP.Net 页面，该页面每隔一小时检查一次时间，然后执行任务。但是由于我在另一台访问权限非常有限的机器上，所以我不知道该怎么做。我在想也许 SQL Server 触发器会起作用，也许在系统时间之外，但我不确定这是否会起作用（我会执行一个程序？）。

还有很多其他方法可以在我的机器上执行此任务，但我无法执行其中任何一种方法，因为我无法访问具有常规托管的实际系统。那么我必须获得 VPS [或类似的东西] 还是有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:59:59.953

您将无法在标准托管计划上运行程序/软件。您将需要 VPS 或专用主机。专用主机是首选，因为某些 VPS 计划，取决于主机，甚至不允许它。

但是，您可以使用 PHP 或任何 Web 语言执行类似的操作，然后将其作为 Cron 作业运行，这在普通主机上是允许的。基本上，如果您可以将其编码为前端页面或小脚本（perl/python 等），那么您可以对其进行编码并使其作为 Cron 运行。因此，例如对页面进行编码，放置在目录 /crons 中，然后将 Cron 作业添加到它，但只是不喜欢站点中的其他任何地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-11T09:01:46.523

最好和最简单的解决方案之一是缓存和缓存对象失效的功能。

```
System.Web.HttpRuntime.Cache.Insert(key,value, null, DateTime.UtcNow.AddHour(1), Cache.NoSliding, Pariority.Default, DelegateToCallWhenCacheIsInvalid); 
```

Asp.Net 在 1 小时内从缓存中删除值并调用您的委托方法。您可以完成您的工作并将另一个值缓存 1 小时。注意一些案例：

1.  在共享主机中，如果在特定时间内未收到请求，应用程序将关闭。您可以在代码中重复手动向您的主机发送请求。
2.  如果应用程序关闭或重新启动，缓存将被回收。您必须保存上次运行日期和时间，以便在开始应用程序后计算正确的第一个周期。
3.  可能是您的缓存被删除以减少内存。检查删除委托中的值的原因或将优先级设置为高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-06T06:21:15.930

也许您可以尝试将 Hangfire 用于**Recurring tasks**。使用 ASP.NET Web MVC/API 配置和使用它非常容易，尽管我还没有在 godaddy 上实际尝试过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-23T22:17:15.867

DiscountASP 在控制面板中有一个“计划任务管理器”：您告诉它每 15 分钟或更长时间调用一次您的页面（然后您可以编写活动代码以在该页面中运行）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-11T08:14:25.353

我认为您正在寻找一种完美的方式来计划和组织活动，只需一分钟的时间安排。让我告诉您可以使用[在线事件注册系统](https://www.eventry.com/en/Event/Event-Registration)轻松处理各种类型的功能。

该系统具有同时推广和管理活动的能力，借助它，您不必担心管理售票或注册的时间。它还将赋予设计定制活动页面甚至门票的特权。

我相信您会在实施该系统后看到不同之处。

# java - Java 中的访问器方法

> ID：11498287
> 
> 赞同：4
> 
> 时间：2012-07-16T04:53:09.237
> 
> 标签：java, methods, accessor

所以我有一个关于“setter”和“getter”方法的问题，以及它们是否有用。

假设我只写了一个非常基本的程序，如下所示：

```
 public class Account
    {
     String name;
     String address;
     double balance; 
    } 
```

然后，假设我编写了另一个使用此“帐户”类的类，如下所示：

```
 class UseAccount
    {
        public static void main(String[] args)
        {
            Account myAccount = new Account();
            Account yourAccount = new Account();

            myAccount.name = "Blah blah"
        }        
    } 
```

等等等等

当我编写`myAccount.name = "Blah blah"`时，我正在更改“帐户”类中变量“名称”的值。我可以随意使用按原样编写的代码多次执行此操作。然而，我注意到，最好将“Account”类中的变量设为私有，然后使用“setter”和“getter”方法。因此，如果我写以下内容：

```
 public class Account
    {
       private String name;
       private String address;
       private String balance;

       public void setName(String n)
       {
          name = n;
       }

       public String getName()
       {
          return name;
       }
    } 
```

我仍然可以通过创建另一个具有以下内容的类来更改变量“name”的值：

```
 class UseAccount
    {
       public static void main(String[] args)
       {
          Account myAccount = new Account();

          myAccount.setName("Blah blah");
       }
    } 
```

我不明白使用这种方法有什么不同，或者应该防止人们改变私有字段的值。有什么帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T04:59:25.550

使用琐碎的访问器方法，除了样式没有区别，但您也可以使用它们执行代码，例如：

```
public void setName(String name) {
    if (name == null) {
        throw new IllegalArgumentException("Name may not be null");
    }
    this.name = name;
} 
```

您还可以从 getter返回*副本，从而保护您的数据：*

```
private List<String> middleNames;
public List<String> getMiddleNames() {
    return new ArrayList<String>(middleNames); // return a copy
    // The caller can modify the returned list without affecting your data
} 
```

这只是两个简单的例子，但是关于如何使用访问器方法的例子不胜枚举。

最好遵循一致的风格，这就是我们总是使用 getter/setter 的原因——所以如果需要，可以执行类似的代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-16T06:09:40.700

试试这个面向对象编程的黄金法则。

**1.**创建**私有**实例变量。

**2.**创建**公共**getter 和 setter 来访问这些 Instance 变量。

**3.**这种方法称为**封装**。尽管可以以**不同的方式使用****封装，但这在****设计模式**中很重要，就像那些不断变化的行为必须封装在抽象类或接口中一样。

 ******4.**现在回到 Getter 和 Setter 的主题......

Getter 和 Setter 有助于验证实例变量的输入。

**例如：** 假设我有一个方法来分配狗的年龄，现在年龄不能是负数，如果我没有 setter 方法，那么我将无法验证年龄的输入。

```
private int age;

public void setDogAge(int age){ 
    if (age>0){
        this.age = age;
    } 
    else{
        System.out.println("Please Enter a Valid Age");
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T05:02:10.860

使用 setter 和 getter 的优点是您可以包含延迟初始化、验证等规则。此外，如果您需要实现 Java Beans 投诉代码，则需要遵循这些规则。

[Java Bean 规范](http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T05:02:40.330

如果您的代码从不更改，那么您是对的 - 没有区别。

但是，代码变化很大。如果您需要跟踪谁修改了他们的名字，会发生什么？

您需要在 Account 类中有一个布尔值，只要 name 字段发生更改，该布尔值就会变为 true。

所以现在你必须浏览每个源文件并放一个

`myAccount.nameChanged = true'`每个下

`myAccount.name = whatever;`

因此，您开始有代码重复，并且出现错误的可能性增加了。如果我错过了改名怎么办？

解决此问题的最佳方法是将成员变量归类为`private`.

您的 setName 代码如下所示：

```
public void setName(String newName)
{
    name = newName;
    nameChanged = true;
} 
```

而且您不必担心错误！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-16T05:05:40.563

`Encapsulation`当您声明一些私有实例变量并声明`public getter`并`setter method`访问和更改实例变量值时，将调用此方法。

如果您使用这些 getter 和 setter 方法来访问/设置实例变量，那么如果开发人员更改实例变量名称，您的程序将不会失败。

例如，在当前版本中，您正在使用名称、地址、余额实例变量，并且在没有 getter 和 setter 方法的情况下访问它们 `myAccount.setName("Blah blah");`但是如果下一个版本开发人员将实例变量名称从 更改`name`为`userName`在这种情况下用户程序将中断但如果您使用的是 getter并且 setter 它不会中断，因为开发人员不会更改 getter 和 setter 方法名称（根据 OOPS 基础知识）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-16T05:02:04.260

事实上，在您更改 getter/setter 方法的访问修饰符或在其中添加额外的逻辑之前，它不会阻止并且没有区别。后者并不总是一个好主意，但有时会有所帮助，例如更新名称应该强制更新一些缓存值或执行一些检查作为结果。使用 getter/setter 是一种很好的做法，并在 POJO 和 JavaBeans 等多种方法中使用，但如果您不打算将自定义逻辑添加到 getter/setter 中并且不打算使用这些方法，那么您将对使用直接访问字段感到满意.

我想提一件事。使用 getter/setter，您可以提供在对象中不持久存在的运行时计算字段。例如，您的`Account`班级对象包含出生日期，您需要获取它的年龄。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-16T05:02:48.223

您始终可以在不使用 getter 和 setter 方法的情况下开发应用程序。正如您所解释的。但是使用 getter 和 setter 是更好的做法，因为访问修饰符 private/public 为您提供了封装，这是 OOPS 功能。您始终可以在不使用 OOPS 特性（如封装、抽象、继承）的情况下编写程序……但如果您编写大型应用程序而不使用，您将难以维护，并且很快就会意识到这些特性的重要性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-22T21:46:04.877

每个 Account 类的字段声明前面的 java 关键字“private”可防止直接引用该字段。如果将 myAccount.name = “whatever” 放在 UseAccount 类中，则会收到错误消息：“name 在 Account 中有私有访问权限”。UseAccount 程序员不需要引用 myAccount.name，而是需要调用方法 myAccount.setName 或方法 myAccount.getName。这些方法称为访问器方法，因为它们提供对 Account 类的字段的访问。****

# php - 通过php将单选按钮和复选框的值放入数据库中的1个字段

> ID：11498289
> 
> 赞同：-1
> 
> 时间：2012-07-16T04:53:18.517
> 
> 标签：php, database, checkbox, radio-button

如何将单选按钮和复选框的值一起插入到 1 行数据库中。例如，表格包含菜单名称和食物的大小。数据库表包含食物和价格..所以当我们用复选框选择我们想要的菜单并选择我们的食物使用单选按钮的大小时，复选框和单选按钮的值将存储在 1 行数据库中......请帮我找到出去

这是我的代码 menu.php

```
<form action="price.php" method="post">

Menu : <br>
<input type="checkbox" value="Siomay" name="tile[]">Siomay <br>
    <input type="radio" name="field[]" value="4" />Small
    <input type="radio" name="field[]" value="5" />Large<br>

<input name="confirm" type=submit id="confirm" value='Confirm'>

</form> 
```

价格.php

```
<?php
$con = mysql_connect("localhost","root");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("project1", $con);

$insert="INSERT INTO menu(name, price) VALUES ('".$_POST['tile']"','".$_POST['field']"')";

if (!mysql_query($insert, $con))
{
die('Error: ' . mysql_error());
}
echo "1 record added";
mysql_close($con) 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:07:17.637

您似乎不需要将您的名字作为一个数组，因此我将首先从您的 html 中的“名称”属性中删除“[]”。

在 php 中，将两个值连接成一个值，然后将其插入数据库。就像是：

```
<?php
$tile = $_POST['tile'];
$field = $_POST['field'];

//concatenate your variables however you want them stored in your db (here it will be tile, field)
$combo = $tile . ', ' . $field;

//connect to db (notice the mysqli function, not mysql!)
$con = mysqli_connect("localhost","username","password","database_name");
if (!$con)
{
    die('Could not connect: ' . mysqli_error());
}

//build query and store result in $result var
$query = "INSERT INTO `tablename` (name) VALUES (" . $combo . ")";
$result = mysqli_query($query);

echo "1 record added";
?> 
```

其中 (name) 将是您希望存储连接值的列名称。显然，请填写您自己的用户名、密码、db_name 等信息。

注意：现在的标准做法是使用 mysqli 函数（或 PDO）而不是 mysql 函数来帮助防止 sql 注入。在这里它不那么相关，但无论如何它都是很好的做法。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:11:14.803

你可以尝试类似的东西；

```
<?php 
    $size = sizeof($_POST['tile'])
    while($size >= 0) {
      $insert="INSERT INTO menu(name, price) VALUES ('".$_POST['tile'][$size]"','".$_POST['field'][$size]"')";

    $size--;
   }
?> 
```

# php - 如何每天增加日期

> ID：11498294
> 
> 赞同：0
> 
> 时间：2012-07-16T04:54:05.617
> 
> 标签：php

我的数据库中有基于团队类型的记录。现在我需要系统根据输入的日期从数据库中显示整个团队的记录，即如果我输入 2012 年 6 月 6 日至 2012 年 6 月 16 日，它应该显示我的所有记录第一次约会到其他约会。（在 php 中）

```
$sql="SELECT mstEmp.empname,InDate, dailyattendance.InTime,dailyattendance.OutTime,mstEmp.teamtype FROM mstEmp left join dailyattendance on (dailyattendance.HolderName = mstEmp.empname) where (InDate between '$from' AND '$to') and mstEmp.teamtype='$chk' GROUP BY mstEmp.empname";
$res = mysql_query($sql);

while($row = mysql_fetch_row($res)) {           
  list($name,$indate,$in,$out,$t) = $row;
  if($row[1]==NULL ||$row[2]==NULL || $row[3]==NULL) { 
    $row[3]='NULL' ;
    $row[2]='NULL' ;
  } else {
    $row[2] = date("g:i A", $in);
    $row[3]= date("g:i A" ,$out);
  }
  $d3 = date("d-m-Y (D)", $in);
  $bg = '';
  if(date('D', $in) == 'Sun' || date('D', $in) == 'Sat')
    $bg = 'bgcolor=#EEEEEE';

  echo "<tr $bg><td colspan=4>Date: ".$d3."</td></tr>";
  if($indate != $date) {
    $date = $indate;
    echo "<tr>";
    echo "<td align=left width='35%'>".trim($name)."</td>";
    echo "<td align=center width='20%' >".$row[2]."</td>";
    echo "<td align=center  width='23%' >".$row[3]."</td>";
    echo "<td align=center width='16%'>".$t."</td>";
    //echo "</tr></table><br>";
  }
}
echo "</tr></table><br>";
echo "</form>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:05:38.300

如果您有一个日期（字符串），并且您想向其中添加 N 天：

```
$date = date($format, strtotime($date, "+{$N}day")); 
```

如果要计算从现在起 N 天后的日期：

```
$date = date($format, time() + $N*86400); // 86400 is number of seconds in 1 day 
```

* * *

另一方面，如果您希望根据日期范围过滤结果（这就是您的问题的样子……），那么您有两个选择：

1.  过滤结果`SQL`（在 php 之前） -`WHERE date BETWEEN '$date1' and '$date2'` 我强烈建议坚持使用此选项，因为如果您的表将有很多记录，则 php 中的过滤结果将消耗 cpu 和内存。

2.  您可以先将两个日期转换为秒 - `$time1 = strtotime($date1)`（第二个日期相同，然后每次需要比较范围时，也转换需要比较的日期，然后检查结果整数是否介于两者之间你之前计算过。

* * *

如果您有两个日期范围（一个在输入 -`$from`和`$to`）和一个在数据库（`InDate`和`OutDate`列）中，那么要获取这些范围交叉的记录，您可以这样做：

```
`WHERE InDate >= '$to' AND OutDate <= '$from'` 
```

* * *

如果您只想循环（在 php 中）从`$dateA`to `$dateB`，那么您可以这样做：

```
// strtotime() converts date to number of seconds since Jan 1 1970
// 86400 is number of seconds in a day, so it ensures steps of 1 day
for($time=strtotime($dateA); $time<=strtotime($dateB); $time+=86400) {
} 
```

# excel - 在 Excel 中引用命名范围

> ID：11498295
> 
> 赞同：2
> 
> 时间：2012-07-16T04:54:09.367
> 
> 标签：excel, excel-formula

我在 excel 中命名了几个范围，并希望在公式 (countif) 中使用它们。我不想一直输入公式并手动更改它，而是想引用一个具有适当范围名称的单元格。例如：

`=COUNTIF(C1, A1)`

并在 C1 中写入“Range1”或“Range 2”或“Range 3”。但是，当我尝试这样做时，它似乎不起作用。

我还尝试使用公式功能区中的“在公式中使用”，并将命名范围粘贴到 C1 中（例如，C1 现在有“= Range1”），但这不起作用。

有谁知道这样的事情是否可以在 Excel 中完成？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T05:06:11.280

您可以使用`INDIRECT`将 C1 中的字符串引用作为范围返回

`=COUNTIF(INDIRECT(C1),A1)`

Debra Dalgleish 的网站在[此处提供有关 INDIRECT的有用信息](http://www.contextures.com/xlFunctions05.html)

# c++ - 在编译时在 C++ 中生成随机数

> ID：11498304
> 
> 赞同：27
> 
> 时间：2012-07-16T04:55:12.387
> 
> 标签：c++, random, c++11, template-meta-programming

我正在尝试`random`在编译时使用 C++11 的库预先计算随机值。我主要是在遵循示例。我在这里做错了什么？

```
using namespace std;
#include <iostream>
#include <vector>
#include <random>

vector<double> rands;
typedef std::mt19937_64 RNG;
uint64_t seed_val;
RNG rng; 

void initialize() {
     rng.seed(seed_val);
}

constexpr vector<double> generate_random( )                 //size_t numbers)
{   
    int numbers = 1000;
    std::uniform_real_distribution<double> zero_one(0.0, 1.0);
        for (unsigned int i = 0; i < numbers; i++) { 
             double rand_num = zero_one(rng);
             rands.push_back( rand_num );
    }
    return rands;
}

int main()
{
    cout << "TMP rands";
    for_each( rands.begin(), rands.end(), [] (double value)
    {
        cout<<value<<endl;
    });
} 
```

[这是一个无耻地从这里](http://eden.dei.uc.pt/~sneves/pubs/2012-snfa2.pdf)偷来的编译时随机数生成器示例，但认为它可能对查找此内容的任何人有用：

```
template<u32 S, u32 A = 16807UL, u32 C = 0UL, u32 M = (1UL<<31)-1>
struct LinearGenerator {
    static const u32 state = ((u64)S * A + C) % M;
    static const u32 value = state;
    typedef LinearGenerator<state> next;
    struct Split { // Leapfrog
        typedef LinearGenerator< state, A*A, 0, M> Gen1;
        typedef LinearGenerator<next::state, A*A, 0, M> Gen2;
    };
}; 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-16T05:02:11.717

只有`constexpr`函数和常量表达式可以在编译时求值。这排除了`<chrono>`和`<random>`。

您可以做的是访问`__TIME__`预处理器宏并定义您自己的由单行`constexpr`函数组成的 PRNG。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-14T10:21:51.623

有一篇关于该主题的研究论文：[用于 C++ 模板元程序的随机数生成器，](http://www.researchgate.net/publication/259005783_Random_number_generator_for_C_template_metaprograms) 其中包含该技巧的[代码片段。](https://github.com/cr-lupin/metarand)`__TIME__`它还讨论了支持不同的随机数引擎和分布作为正交选择。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-09-01T13:58:33.920

我知道这个问题已经有五年的历史了，并且已经有了一个公认的答案。即便如此，我想补充一点，在编译时当然**可以**生成随机数，但每次运行程序都会得到相同的随机数序列。简单来说，如果在编译的时候就知道种子，编译器就**可以**算出会输出什么随机数，直接把程序变成“输出这个数字序列”。

编译器对其优化的积极程度会有所限制，所以我不能保证他们总是会进行这种替换，而且我怀疑任何编译器都能够替换像 Mersenne Twister 这样复杂的东西，但更简单的东西就像`linear_congruential_engine`有一个机会（此外，确保它发生的唯一方法是让编译器输出汇编代码，然后查看汇编代码）。

我知道这是可能的，因为我实现了一个`random_device`使用[Marsaglia 的 Xorshift 算法](https://en.wikipedia.org/wiki/Xorshift)建模的随机生成器。由于 Marsaglia 的论文实际上包含了多种相关算法，因此我让该类采用模板参数来选择要使用的班次模式。我想知道编译器是否会优化`switch`我使用的语句。我忘了传递种子，所以编译器使用默认值，即种子在编译时是已知的。当我查看汇编代码时，不仅没有`switch`了，而且 GCC 已经将程序优化为“输出这三个数字”。

问题中列出的程序的最终版本实际上从未调用函数来生成数字序列，也从未调用函数来为生成器提供种子。这个版本会这样做，但我怀疑它会变成“打印这个随机数序列”。

```
#include <algorithm>
#include <cstdlib>
#include <iostream>
#include <iterator>
#include <random>

int get_seed()
{
    int hour = std::atoi(__TIME__);
    int min = std::atoi(__TIME__ + 3);
    int sec = std::atoi(__TIME__ + 6);
    return 10000 * hour + 100 * min + sec;
}

int main()
{
    // get_seed() returns an int based on __TIME__ (a string literal
    // set by the preprocessor), which is known at compile time.
    //
    // Also, w/r/t the engines in <random>: not setting a seed explicitly
    // will use a default seed, which is known at compile time.  So if
    // you're OK getting the same sequence of numbers for any compilation,
    // then "std::mt19937_64 rng;" may be all you need.
    std::mt19937_64 rng(get_seed());
    std::uniform_real_distribution<double> zero_one(0.0, 1.0);
    const int COUNT = 1000;
    std::generate_n(std::ostream_iterator<double>(std::cout, "\n"), COUNT,
        [&rng, &zero_one]() { return zero_one(rng); });
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-06T03:43:07.313

我会尝试从外部资源中提取它。一个非常简单的例子是用编译命令中定义的宏变量来编译你的程序。这`$RANDOM`是 unix/linux 系统中一个特殊的内置变量，它自动返回一个随机的 16 位数字。

```
g++ -D__RANDOM__=$RANDOM yourprog.cpp -o yourprog

//yourprog.cpp
#include <iostream>
int main() {
  std::cout << "Random variable " << __RANDOM__ << std::endl;
  return 0;
} 
```

您还可以编写自己的脚本或可执行文件来分配给您的宏变量。

```
//DevRandomGenerator.cpp
#include <iostream>
#include <fstream>

class DevRandom {
private:
    std::ifstream stream;
public:

    DevRandom() {
        stream.open("/dev/urandom",std::ios::in|std::ios::binary);
    }

    unsigned int unsignedInt() {
        unsigned int u = 0;
        stream.read((char*)&u, sizeof(unsigned int));
        return u;
    }
};

int main() {
  DevRandom rand;
  std::cout << rand.unsignedInt() << std::endl;
  return 0;
} 
```

然后编译为：

```
g++ DevRandomGenerator.cpp -o DevRandomGenerator
g++ -D__RANDOM__="$(./DevRandomGenerator)" yourprog.cpp -o yourprog 
```

更好的随机生成器是编写一个使用音频和视频输入的程序。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-16T05:04:06.553

不仅`system_clock::now()`编译时不可知，而且您的函数被标记为返回布尔值，但在任何地方都没有返回语句。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-02-12T09:36:39.503

这个问题现在可能已经有九年了，但我仍然没有找到任何令人满意的解决方案，所以我自己实现了一个可靠的编译时随机生成器作为单个头库。它使用 KISS 随机生成器并将其内部状态表示为参数化类型。使用计数器宏伪记忆状态。 `CTRandomTimeSeed`是尝试在多个编译之间实现可变种子。此外，可以使用定义自定义种子`DYNLEC_CUSTOM_RANDOM_SEED`。

```
#pragma once

#include <cstdint>

// all numbers are generated randomly at compile time. the internal state is pseudo
// remembered using the counter macro. the seed is based on time using the timestamp
// and time macro. additionally a custom random seed can be specified to fully rely

#ifndef DYNLEC_CUSTOM_RANDOM_SEED
#define DYNLEC_CUSTOM_RANDOM_SEED 0xbdacf99b3f7a1bb4ULL
#endif

// just iterating over the macros will always result in same
// number because the internal state is only updated for each occurance
// of the following macros

// generates a random number seeded with time and the custom seed
#define DYC_RAND_NEXT (::Dynlec::CTRandomGeneratorValueSeeded<__COUNTER__>)
// generates a random number seeded with time and the custom seed between min and max ( [min, max[ )
#define DYC_RAND_NEXT_BETWEEN(min, max) (min + (::Dynlec::CTRandomGeneratorValueSeeded<__COUNTER__> % (max - min)))
// generates a random number seeded with time and the custom seed with a limit ( [0, limit[ )
#define DYC_RAND_NEXT_LIMIT(limit) DYC_RAND_NEXT_BETWEEN(0, limit)
// helper macro for non repetetive indexed values
#define DYC_RAND_INDEXED(index) (::Dynlec::CTRandomGeneratorValue<index, ::Dynlec::CTRandomSeed ^ DYC_RAND_NEXT>)
// helper macro for non repetetive random streams
#define DYC_RAND_STREAM(n, callback) (::Dynlec::CTRandomStream<n, ::Dynlec::CTRandomSeed ^ DYC_RAND_NEXT>)

namespace Dynlec
{
    // the random generator internal state is represented by
    // the CTRandomGeneratorRaw type with each of its values
    // x, y, z and c
    template <
        uint64_t x, 
        uint64_t y, 
        uint64_t z, 
        uint64_t c>
    class CTRandomGeneratorRaw
    {
        static_assert(y != 0, 
            "CompileTimeRandom can not be used with 'y' equals 0");
        static_assert(z != 0 || c != 0,
            "CompileTimeRandom can not be used with 'z' and 'c' equals 0");
    public:
        typedef CTRandomGeneratorRaw<
            6906969069ULL * x + 1234567ULL,
            ((y ^ (y << 13)) ^ ((y ^ (y << 13)) >> 17)) ^ (((y ^ (y << 13)) ^ ((y ^ (y << 13)) >> 17)) << 43),
            z + ((z << 58) + c),
            ((z + ((z << 58) + c)) >> 6) + (z + ((z << 58) + c) < ((z << 58) + c))> Next;

        constexpr static uint64_t Value = x + y + z;
    };

    // to prevent any accidental selection of invalid parameters
    // these values are omitted
    template <
        uint64_t x,
        uint64_t y,
        uint64_t z,
        uint64_t c>
    class CTRandomGeneratorRawSafe
        :
        public CTRandomGeneratorRaw<
            x, (y == 0) ? 1 : y, (z == 0 && c == 0) ? 1 : z, c>
    {
    };

    // CTRandomGenerator is used to quickly compute the nth iteration
    // of CTRandomGeneratorSafeRaw based on a single uint64_t seed
    template <uint64_t iterations, uint64_t seed>
    class CTRandomGenerator
    {
        friend CTRandomGenerator<iterations + 1, seed>;
        typedef typename CTRandomGenerator<iterations - 1, seed>::Current::Next Current;

    public:
        constexpr static uint64_t Value = Current::Value;
    };

    template <uint64_t seed>
    class CTRandomGenerator<0ULL, seed>
    {
        friend CTRandomGenerator<1ULL, seed>;

        typedef typename CTRandomGeneratorRawSafe<
            seed ^ 1066149217761810ULL,
            seed ^ 362436362436362436ULL,
            seed ^ 1234567890987654321ULL,
            seed ^ 123456123456123456ULL>::Next Current;

    public:
        constexpr static uint64_t Value = Current::Value;
    };

    template <uint64_t iteration, uint64_t seed>
    constexpr static uint64_t CTRandomGeneratorValue = CTRandomGenerator<iteration, seed>::Value;

    const uint64_t CTRandomTimeSeed = 
        CTRandomGeneratorValue<0, (__TIME__[0]) ^
        CTRandomGeneratorValue<0, (__TIME__[1]) ^
        CTRandomGeneratorValue<0, (__TIME__[3]) ^
        CTRandomGeneratorValue<0, (__TIME__[4]) ^
        CTRandomGeneratorValue<0, (__TIME__[6]) ^
        CTRandomGeneratorValue<0, (__TIME__[7])>>>>>> ^
        CTRandomGeneratorValue<0, (__TIMESTAMP__[0]) ^
        CTRandomGeneratorValue<0, (__TIMESTAMP__[1]) ^
        CTRandomGeneratorValue<0, (__TIMESTAMP__[2]) ^
        CTRandomGeneratorValue<0, (__TIMESTAMP__[4]) ^
        CTRandomGeneratorValue<0, (__TIMESTAMP__[5]) ^
        CTRandomGeneratorValue<0, (__TIMESTAMP__[6])>>>>>> ^
        CTRandomGeneratorValue<0, (__TIMESTAMP__[8]) ^
        CTRandomGeneratorValue<0, (__TIMESTAMP__[9]) ^
        CTRandomGeneratorValue<0, (__TIMESTAMP__[20]) ^
        CTRandomGeneratorValue<0, (__TIMESTAMP__[21]) ^
        CTRandomGeneratorValue<0, (__TIMESTAMP__[22]) ^
        CTRandomGeneratorValue<0, (__TIMESTAMP__[23])>>>>>>;

    const uint64_t CTRandomSeed = (DYNLEC_CUSTOM_RANDOM_SEED ^ CTRandomTimeSeed);

    template <uint64_t iteration>
    constexpr static uint64_t CTRandomGeneratorValueSeeded = CTRandomGeneratorValue<iteration, CTRandomSeed>;

    template <uint64_t n, uint64_t seed = ::Dynlec::CTRandomSeed>
    struct CTRandomStream
    {
        // callback(uint64_t index [0;n[, uint64_t random_number)
        template <typename T>
        static void Call(T callback)
        {
            CTRandomStream<n - 1, seed>::Call(callback);
            callback(n - 1, CTRandomGeneratorValue<n, seed>);
        }
    };

    template <uint64_t seed>
    struct CTRandomStream<0, seed>
    {
        template <typename T>
        static void Call(T callback) { }
    };
} 
```

使用示例：

```
// random 64 bit number
std::cout << DYC_RAND_NEXT << std::endl;

// random 64 bit number between [0 and 10[
std::cout << DYC_RAND_NEXT_LIMIT(10) << std::endl;

// random 64 bit number between [1 and 10]
std::cout << DYC_RAND_NEXT_BETWEEN(1, 11) << std::endl;

// initialize array with random numbers
int array[50];

Dynlec::CTRandomStream<50>::Call([&array](uint64_t index, uint64_t n)
    { 
        array[index] = n;
    }); 
```

[Link](https://github.com/phisn/CompileTimeRandom) to the github project containing the project.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-16T05:10:40.137

根据错误消息：

```
cpp11tmprands.cpp:22:15: 错误: 'rands' 未在此范围内声明

```

该变量`rands`未在 的范围内声明`main`。将其设为全局变量而不是局部变量`generate_random`，该错误就会消失。

# php - 将 .php 页面加载到 div Ajax 和 Javascript 中

> ID：11498306
> 
> 赞同：2
> 
> 时间：2012-07-16T04:55:19.540
> 
> 标签：php, javascript, ajax

（我对这一切都很陌生。）我有一个页面，用户可以在其中单击用户帖子的不同排序方法。根据他们单击的内容，显示的内容将对应。

```
function newContent()
{
  $.ajax({
      url: 'ajax/newcontent.php',
      success: function() 
      {
            $("#content_div").empty().load("ajax/newcontent.php");
      }

      });
} 
```

这就是我现在所拥有的。但不是将 .php 页面中的代码加载到#content_box 中，#content_box 只是变为空白。

任何帮助都是极好的！

编辑 ** 将 #content_dov 更改为 #content_div - 哎呀

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T04:59:17.157

你为什么使用两个ajax请求？你只需要使用

```
$("#content_dov").load("ajax/newcontent.php"); 
```

完整的代码是

```
function newContent()
{
    $("#content_dov").load("ajax/newcontent.php");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T04:58:50.267

```
function newContent()
{
  $.ajax({
      url: 'ajax/newcontent.php',
      success: function(data) 
      {
            $("#content_dov").html(data);
      }

      });
} 
```

# c# - 从两个或多个表单 C# 中获取值

> ID：11498308
> 
> 赞同：1
> 
> 时间：2012-07-16T04:55:32.350
> 
> 标签：c#, sql, winforms, connect

好的，在用户成功登录后，一个警告框将显示用户名，然后会弹出另一个表单，使用户能够更改他的密码。我想在条件语句中使用用户名的值（来自登录表单）来更改密码。

我如何获得来自另一种形式的这个值？谢谢。

在此处查看图片：![http://i49.tinypic.com/11r7zw8.png](../Images/87b8e74c5cbafe98b3cd632a789244b9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T05:03:03.450

什么让你困惑？将用户名传递给下一个表单，我看不出第 3 个表单必须知道其他任何信息的原因。这将是另一种无用的依赖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:04:29.657

您可以创建一个将在成功登录时引发的[自定义事件](http://msdn.microsoft.com/en-us/library/awbftdfh.aspx)，您可以使用[CustomEventArgs](http://msdn.microsoft.com/en-us/library/w369ty8x.aspx)传递信息，然后在您启动 2nd Form 时使用它。

像这样的东西：

**表格1**

```
public partial class Form1 : Form
{

    Logon logon;
    PasswordChange pass;

    public Form1()
    {
        InitializeComponent();

        logon = new Logon();
        logon.raiseLoginEvent += new Logon.LoginSuccesful(logon_raiseLoginEvent);
        logon.ShowDialog();

    }

    void logon_raiseLoginEvent(object sender, LoginEventArgs e)
    {
        pass = new PasswordChange();
        pass.LoginName = e.Login;
        pass.ShowDialog();
    }

} 
```

**登录**

```
public partial class Logon : Form
{
    public delegate void LoginSuccesful(object sender, LoginEventArgs e);
    public event LoginSuccesful raiseLoginEvent;

    public Logon()
    {
        InitializeComponent();
    }

    private void Logon_FormClosing(object sender, FormClosingEventArgs e)
    {
        LoginEventArgs ev = new LoginEventArgs("Admin");
        raiseLoginEvent(this, ev);
    }
}

public class LoginEventArgs : EventArgs
{
    public LoginEventArgs(string s)
    {
        loginName = s;
    }
    private string loginName;
    public string Login
    {
        get { return loginName; }
        set { loginName = value; }
    } 
} 
```

**密码更改**

```
public partial class PasswordChange : Form
{
    public PasswordChange()
    {
        InitializeComponent();
    }

    public string LoginName
    {
        get {return  textBox1.Text; }
        set { textBox1.Text = value; }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T05:05:07.333

一种方法是在登录表单中使用公共属性作为用户名，您可以在其他表单中访问该用户名。

例如：

在 LoginForm 中，创建一个公共属性

```
public string UserName { get; private set;} 
```

在 LoginForm 中填写此属性并将其传递给其他表单。在创建第二种形式的对象时，您可以从第一种形式访问数据，然后将其传递给其他形式的属性/构造函数。

例如，

```
FacultyForm facultyForm=new FacultyForm();
facultyForm.UserName = loginForm.UserName; //in this case you have to create a property in other form too. 
```

这只是其中一种方法。

这能解决问题吗？

另一种方法是使用委托/事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T05:44:50.357

将登录表单的用户名文本框设为公开，以便您可以从任何其他表单访问。

您可以更改 LoginForm.designer.cs 中的代码

# javascript - 具有大型动态表单的主干 js

> ID：11498314
> 
> 赞同：2
> 
> 时间：2012-07-16T04:56:05.977
> 
> 标签：javascript, backbone.js

在用主干 js 编写一些应用程序时，我发现自己在主干方面做得很好。是表格/模板杀死了我。我需要 15 分钟来处理模型、集合和视图；然后一到两个小时来处理模板。这样做的原因是我的表单是动态的，选择框会自动填充当前选择的模型值，文本框已经包含模型值。

我目前正在尝试编写几个实用函数来为我动态编写表单；我希望它具有的功能是：

1.  获取模型的属性并基于该表单创建一个空白表单。
2.  使用可能的值填充所有选择字段
3.  使用选定的值（模型属性）填充表单（这可能与数字 2 的功能相同，只是为了一口气完成所有操作）
4.  读取表单值并相应地设置模型属性

我的问题实际上归结为两个部分，首先有人有更好的解决方案吗？其次，实现这些功能配置的最佳方式是什么？最好有一个带有 JSON 的变量吗？

```
var myModelConfiguration =
    [
        {"field":"userName","type":"text","showInForm":1},
        {"field":"userRole","type":"select","showInForm":1}
    ] 
```

或者在一个模型中创建一个只包含所有配置和字段类型的模型会更好吗？并且只传递配置模型和数据模型？

对此方法或更好方法的任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:26:31.153

您是否研究过[骨干形式](https://github.com/powmedia/backbone-forms)？我发现它对于表单生成非常方便。当然，我已经在它之上编写了自己的扩展功能，但它本身就符合您的四个标准。

# sql-server - SQL Server 查询以检查在特定日期的特定时间段是否可以预订

> ID：11498325
> 
> 赞同：1
> 
> 时间：2012-07-16T04:58:15.777
> 
> 标签：sql-server, common-table-expression

我有一个预订表，用于存储预订信息。我们允许在白天预订两个不同的时间段，让我们在工作日上午 10:30 和下午 4:00 进行预订，对于特定时间段，我们最多只能接待 50 名访客。

*样本表和数据的详细信息如下所示*。

根据样本数据，我们无法进行预订，`2012-08-23/16:30`因为它已达到最大访客数量。

以下查询将为我提供我需要在日历上阻止特定时间的日期，以便用户可以为此日期进行预订。

```
 SELECT 
     SUM(NoOfVisitors) as Total, TimeSlot, BookingDate, BookingCancelled  
 FROM 
     VisitorBooking  
 GROUP BY 
     BookingDate, TimeSlot, BookingDate, BookingCancelled 
 HAVING 
     SUM(NoOfVisitors) >= 50 AND TimeSlot = '16:30' 
```

**输出**

```
Total TimeSlot  BookingDate BookingCancelled
50    10:30     2012-08-23  0 
```

我在编写 SQL 查询时遇到问题，该查询将检查他们是否有任何取消，并将计算并给我需要阻止的日期。我尝试了一些查询，但这并没有给我想要的结果。如果我运行上述查询，它也会显示我`2012-07-20`被阻止，但由于其中一个预订已被取消，它仍有 3 位访客可用。

这个查询给了我结果，但我不完全确定这是否正确

```
 SELECT 
     SUM(NoOfVisitors) as Total, TimeSlot, BookingDate, BookingCancelled  
 FROM 
     VisitorBooking  
 GROUP BY 
     BookingDate, TimeSlot, BookingDate, BookingCancelled 
 HAVING 
     (SUM(NoOfVisitors) >= 50 AND TimeSlot = '16:30' )
AND (BookingCancelled = 'false') 
```

我迷失在这方面，我将不胜感激这方面的帮助

我不确定是否可以在不使用 CTE 查询的情况下实现这一目标。

```
CREATE TABLE Booking(
    BookingID nvarchar(10) NOT NULL,
    FirstName nvarchar(150) NULL,
    LastName nvarchar(150) NULL,
    Email nvarchar(150) NULL,
    CompanyName nvarchar(200) NULL,
    Country nvarchar(150) NULL,
    Phone varchar(50) NULL,
    NoOfVisitors int NULL,
    BookingDate date NULL,
    TimeSlot varchar(12) NULL,
    BookedOn datetime NULL,
    GUIDNo varchar(50) NULL,
    BookingCancelled bit NULL,
    ) 
```

**样本数据**

```
BookingID   FirstName LastName Email    CompanyName Country Phone   NoOfVisitors    BookingDate     TimeSlot    BookedOn    GUIDNo  BookingCancelled
---------------------------------------------------------------------------------------------------------------------------------------------------
1900221519  Mark    Tailor  abc@abc.com     XYZ     USA     111111  45              2012-07-20       10:30       2012-06-25 XXXXX   false
5600515751  Michael Brown   abc@abc.com     XYZ     UK      111111  2               2012-07-20       10:30       2012-06-25 XXXXX   false
1638934678  John    Lee     abc@abc.com     XYZ     UK      111111  3               2012-07-20       10:30       2012-06-25 XXXXX   true
8852224170  Lee Wong        abc@abc.com     XYZ     China   111111  50              2012-08-23       16:30       2012-07-15 XXXXX   false 
```

# java - 对 Derby 客户端服务器感到困惑

> ID：11498326
> 
> 赞同：0
> 
> 时间：2012-07-16T04:58:26.770
> 
> 标签：java, database, database-connection, derby, javadb

参考[*Derby 提供的库*](http://db.apache.org/derby/docs/dev/getstart/rgslib46043.html)，我对连接需要连接到服务器数据库（NetBeans 上的 Derby/Java DB）的 Java 应用程序感到困惑。特别是，我很困惑

> 网络服务器库

和

> 网络客户端库

任何人都可以定义它们吗？

# sql - TSQL 通过选择适当的单个值左连接 UPDATE

> ID：11498327
> 
> 赞同：0
> 
> 时间：2012-07-16T04:58:33.237
> 
> 标签：sql, tsql, select, left-join

为简化起见，有两个表格“交易”和“汇率”。

`trades.userid`并`rates.fee`通过`trades.rateid`=`rates.rateid`

问题是 SELECT 不会返回唯一的值，但它们都是可能的。

```
SELECT r.fee
FROM rates AS r
LEFT JOIN trades AS t
ON r.rateid = t.rateid
WHERE t.userid=(somevalue) 
```

`DISTINCT`或者`TOP 1`由于订购混乱，这里无法选择。这里不需要订购。

如何选择正确和独特？

我只是想`rates.fee`通过给定`trades.rateid`一些来选择合适的`trades.userid`

```
trades
------
userid rateid total
101    1      
101    1
101    2
101    1

rates
-----
rateid fee
1      0.90
2      0.80
3      0.70

UPDATE trades
    SET total = (someformula) * (above SELECT query goes here)
    WHERE userid = (somevalue) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:36:55.767

如果特定交易只有一个汇率，您可以使用`update ... from`T-SQL 构造：

```
UPDATE  t
SET     total = (someformula) * r.fee
FROM    trades AS t
JOIN    rates AS r
ON      r.rateid = t.rateid
WHERE   t.userid = (somevalue) 
```

如果`rateid`没有唯一标识费率，则应编辑问题以阐明应选择的费率。

# javascript - 通过 http 传输大文件 (>100MB) 的最佳方式

> ID：11498334
> 
> 赞同：2
> 
> 时间：2012-07-16T04:59:33.563
> 
> 标签：javascript, html, web

还是我根本不应该使用 HTTP 来做这件事？我想从 HTML 网页（HTML 表单）上传文件。我可以简单地按照我对 5MB 文件的方式进行操作吗？我可以从 HTML5 和 JavaScript 中获得什么帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:38:51.003

我已经为此使用[了plupload](http://www.plupload.com)。这是一个可靠的开源解决方案，支持多种后端，如 html5、flash、silverlight 和 gears，甚至 html4 后备。分块上传和客户端图像缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:34:45.800

我认为有很多方法可以做到这一点。

*   **Flash**（抱歉......但它仍然是一种可靠的方式，[uploadify](http://www.uploadify.com/)或[swfupload](http://code.google.com/p/swfupload/)）
*   **像 SaurabhLP 这样的**HTML5新 API 一直在提供建议（但你扼杀了对浏览器的支持）****
***   **JAVA Applet**（还不错，但有点重，[Java Applet File Uploader](http://jumploader.com/)上不错的一个）*   或者也许**websockets**流甚至可以做得很好（浏览器支持也是一个问题，你可以在[这里](https://groups.google.com/forum/?fromgroups#!topic/okrb/o25DlPJ2afg)找到一个不错的有趣的线程，有一些项目）。**

 **我认为你应该看看其他公司是如何做的，比如 Web ***Picasa***（不是很好的例子，因为大多数文件都小于 5mo）但是***YouSendIt***是一个可靠的演员（我认为他们使用的是 Flash，但应该检查）以及作为***Youtube/Vimeo/DailyMotion/视频演员***。我想你会从他们身上学到很多东西。

一个小注释补充说，我认为最大的问题将是连接中断传输。然后，您将“理想地”需要一个能够等待连接恢复的可靠软件，或者一个服务器端允许恢复上传的软件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T06:22:16.687

HTML5 中有一个新功能，您可以通过 DnD（拖放）在某个区域上传文件...

我认为这是你可以尝试的好东西，这是通过使用 HTML5、Jquery、Javascript 和一些 PHP 代码..

[尝试这个](http://tutorialzine.com/2011/09/html5-file-upload-jquery-php/)**

# sql-server - 表变量和虚拟表是一回事吗？

> ID：11498335
> 
> 赞同：4
> 
> 时间：2012-07-16T04:59:35.730
> 
> 标签：sql-server, virtual-table

SQL Server 中的虚拟表和表变量是否相同？什么是虚拟表？为什么我们需要虚拟表，以及如何创建一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T05:03:44.690

`No`, 他们不一样。

仔细阅读这个答案以获得清晰的理解。

[https://dba.stackexchange.com/questions/16385/whats-the-difference-between-a-temp-table-and-table-variable-in-sql-server](https://dba.stackexchange.com/questions/16385/whats-the-difference-between-a-temp-table-and-table-variable-in-sql-server)

# git - git push --all 在 'RPC 失败; 结果 = 22，HTTP 代码 = 0'

> ID：11498337
> 
> 赞同：4
> 
> 时间：2012-07-16T04:59:58.787
> 
> 标签：git, git-push, http-proxy

我有一个有趣的问题。我有一个关于 bitbucket 的宠物项目，到目前为止，我能够从两个不同的网络（家庭和办公室）进行拉取和推送。正确设置配置需要一段时间，但我已经通过一些尝试和错误的方法解决了这个问题。现在的问题是我在办公室创建了一个分支（位于代理后面），我无法使用 --all 参数将其推送到 bitbucket。我正进入（状态：

> RPC 失败；结果 = 22，HTTP 代码 = 0

这是 git bash（已修改）：

```
user@machine /c/dev/data/personal/projectname (master)
$ git push --all --dry-run
Password for 'https://username@bitbucket.org':
To https://username@bitbucket.org/username/projectname
 * [new branch]      ivymigration -> ivymigration

user@machine /c/dev/data/personal/projectname (master)
$ git push --all
Password for 'https://username@bitbucket.org':
Counting objects: 194, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (112/112), done.
Writing objects: 100% (116/116), 58.37 KiB, done.
Total 116 (delta 81), reused 0 (delta 0)
efrror: RPC failed; result=22, HTTP code = 0
atal: The remote end hung up unexpectedly
fatal: The remote end hung up unexpectedly
Everything up-to-date

user@machine /c/dev/data/personal/projectname (master)
$ git config --global -l
http.proxy=http://user:password@proxy:8080
http.postbuffer=524288000
user.name=[My Name]
user.email=[my_name]@[my.domain]
core.autocrlf=true
push.default=upstream 
```

我尝试过[RPC 失败的东西；结果 = 28，HTTP 代码 = 0](https://stackoverflow.com/questions/7700824/rpc-failed-result-28-http-code-0) 但没有成功。由于代理服务器，将 https 更改为 git 或 git+ssh 也不起作用。**有趣的是，在没有 --all 属性的情况下，推送到目前为止运行良好。**但是一旦我想推动所有的东西，包括新的分支，整个事情就崩溃了。

有什么想法吗？

**更新#1：**

我试图按照[https://confluence.atlassian.com/display/BITBUCKET/Branching+a+Repository](https://confluence.atlassian.com/display/BITBUCKET/Branching+a+Repository)部分“如何在 git 中分支”中的说明推送分支，但没有成功。这是 git bash：

```
user@machine /c/dev/data/personal/projectname (master)
$ git push origin ivymigration
Password for 'https://username@bitbucket.org':
Counting objects: 203, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (72/72), done.
Writing objects: 100% (125/125), 70.79 KiB, done.
Total 125 (delta 86), reused 88 (delta 49)
efrror: RPC failed; result=22, HTTP code = 0
atal: The remote end hung up unexpectedly
fatal: The remote end hung up unexpectedly
Everything up-to-date 
```

正如你所看到的，我得到了同样的错误。

**更新#2：**

我已经尝试了 Seth 的建议，结果如下：

```
user@machine /c/dev/data/personal/projectname (ivymigration)
$ GIT_TRACE=1 git push --all
trace: built-in: git 'push' '--all'
trace: run_command: 'git-remote-https' 'origin' 'https://username@bitbucket.org/username/projectname'
Password for 'https://username@bitbucket.org':
trace: run_command: 'send-pack' '--stateless-rpc' '--helper-status' '--thin' '--progress' 'https://username@bitbucket.org/username/projectname/' 'refs/heads/ivymigration:refs/heads/ivymigration'
trace: built-in: git 'send-pack' '--stateless-rpc' '--helper-status' '--thin' '--progress' 'https://username@bitbucket.org/username/projectname/' 'refs/heads/ivymigration:refs/heads/ivymigration'
trace: run_command: 'pack-objects' '--all-progress-implied' '--revs' '--stdout' '--thin' '--delta-base-offset' '--progress'
trace: built-in: git 'pack-objects' '--all-progress-implied' '--revs' '--stdout' '--thin' '--delta-base-offset' '--progress'
Counting objects: 203, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (72/72), done.
Writing objects: 100% (125/125), 70.79 KiB, done.
Total 125 (delta 86), reused 88 (delta 49)
efrror: RPC failed; result=22, HTTP code = 0
atal: The remote end hung up unexpectedly
fatal: The remote end hung up unexpectedly
Everything up-to-date 
```

如您所见，结果相同，没有与实际失败相关的额外信息。所以我尝试了第二个命令。它失败了，因为我在 Windows 中，所以没有`strace`（[Windows 的 Systrace](https://stackoverflow.com/questions/3847745/systrace-for-windows)）。我还尝试在没有代理的网络中创建一个分支（又名家庭），并且能够`git push --all`从那里成功。正如我之前所说。我可以`git push`从代理（又名办公室）后面的网络，但不能这样做`git push --all`。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-05-15T04:50:11.067

这对我有帮助，以下命令将 git 缓冲区增加到 500mb：

```
git config http.postBuffer 524288000 
```

从这里开始：[Git：错误：RPC 失败；结果 = 22，HTTP 代码 = 411](https://stackoverflow.com/questions/16557071/git-error-rpc-failed-result-22-http-code-411)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T17:20:04.580

有点 hack，但我使用 Fiddler2 解决了这个问题，并在[.gitconfig](http://www.fiddler2.com/fiddler2/)中设置代理以通过 Fiddler

```
[http]
proxy = http://USER:PASSWORD@127.0.0.1:8888 
```

缺点是您需要在执行任何远程选项和纯文本密码之前启动 Fiddler，但至少它似乎有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T15:50:56.537

我有同样的问题。我通过暂时从我的以下行中删除这些行来解决它`.gitconfig`：

```
[http]
    proxy = http://user:password@proxy.domain.tld:8080 
```

并改用以下命令：

```
export http_proxy=http://user:password@proxy.domain.tld:8080 
```

# android - Android：仅支持智能手机

> ID：11498342
> 
> 赞同：9
> 
> 时间：2012-07-16T05:00:28.727
> 
> 标签：android, screen-resolution

我的应用程序在谷歌播放。我只想让它与智能手机兼容。为此我已经这样做了......

```
 <uses-sdk
    android:minSdkVersion="4"/>
 <supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="false" /> 
```

我的问题是市场没有过滤平板电脑（mdpi 平板电脑，如三星 tab1）。一件事是有些手机像 WVGA800* (480x800)(mdpi)、WVGA800** (480x800)(ldpi) 在大屏幕和一些平板电脑上在这个范围内。所以我想让手机不是平板电脑那么应该是什么解决方案？？？

我从这里[http://developer.android.com/guide/topics/manifest/supports-screens-element.html找到了一些帮助](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)

```
 <uses-sdk
    android:minSdkVersion="4"
    android:targetSdkVersion="16" />
 <supports-screens
    android:largeScreens="true"
    android:largestWidthLimitDp="320"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="false" /> 
```

它会在市场上工作吗？？..我问这种解决方案是否有人有这方面的经验。我的问题是我无法通过上传新版本的应用程序进行测试。请帮助我..

替代解决方案可以。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T05:35:40.963

您是否在 AndroidManifest.xml 中添加了“兼容屏幕”标签？这是 Google Play 用来根据屏幕尺寸过滤设备的方法。

```
<compatible-screens>
    <!-- small size screens -->
    <screen android:screenSize="small" android:screenDensity="ldpi" />
    <screen android:screenSize="small" android:screenDensity="mdpi" />
    <screen android:screenSize="small" android:screenDensity="hdpi" />
    <screen android:screenSize="small" android:screenDensity="xhdpi" />
    <!-- all normal size screens -->
    <screen android:screenSize="normal" android:screenDensity="ldpi" />
    <screen android:screenSize="normal" android:screenDensity="mdpi" />
    <screen android:screenSize="normal" android:screenDensity="hdpi" />
    <screen android:screenSize="normal" android:screenDensity="xhdpi" />      
    <!-- large screens -->
    <screen android:screenSize="large" android:screenDensity="hdpi" />
    <screen android:screenSize="large" android:screenDensity="xhdpi" />
</compatible-screens> 
```

通过不包括 android:screenSize="xlarge"，您的应用将不会显示在 10.1" 平板电脑上。android:screenSize="large" 有点棘手。它可能是最大 7" 的设备，因此 Galaxy Tab 7" 属于这个类别。但我不确定较新的 Galaxy S3 或配备 4.75 英寸屏幕的 Galaxy Nexus 是否属于“大”屏幕类别。

尝试将上述代码段添加到您的 AndroidManifest.xml 中，如果 Google Play 在支持的设备列表中包含 7" 平板电脑，您可以随时将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T18:01:31.120

正如您所发现的，没有确切或最好的方法。

*   清单中的配置
*   Google Play 中的设备过滤器

此外，在 Google Play 上显示的应用程序名称中保留有关 Google Play 的特别说明，例如仅电话。

对于大多数属于大屏幕功能的 7" 屏幕，您的应用程序可以在 7" 平板电脑上使用。如果您上传了两个 APK，google play 会为您的设备处理正确的 APK。

如果您的应用程序仅是电话并明确使用平板电脑上不可用的电话功能，那么您可以添加代码检查，即使已安装也不允许用户进一步移动。

由于您对平板电脑不感兴趣，因此您不在乎。

最佳做法是假设 7" 平板电脑属于大屏幕手机，应在开发工作中考虑。因为 android 平板电脑具有包括通话 (VOIP) 在内的所有功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T05:58:45.030

所有 android 平板电脑都在 HONEYCOMB ( `level 11, 12, 13`) 上运行。您可以禁止在 Honeycomb 上安装。`min-sdk`现在，您可能想知道如何使用and说明符从 API 级别序列的中间排除一些特定的 API 级别（即：1-15 中的 11,12 和 13）`max-sdk`，因为它们不支持范围。

这是解决方案：

> 您可以在将其发布到 Google Play 时执行此操作。在 Android Developer Console 中，上传应用程序时，进入 APK 文件选项卡并检查高级模式。它允许您上传 2 个具有不同 sdk 级别范围的 apk 文件。但不要忘记为它们设置不同的版本代码。
> 
> 控制台中的所有统计信息都将汇总为两个 apk 文件，因为它是一个。

因此，您可以创建两个 apk（其中一个支持 1 到 10 级，另一个支持 14 和 15 级），这将阻止您的应用程序安装在平板电脑上。:-)

[资源](https://stackoverflow.com/questions/11498591/dis-allow-installation-on-specific-api-level/11498694#11498694)

# php - 将数组的内容打印到 PHP 文件中

> ID：11498344
> 
> 赞同：1
> 
> 时间：2012-07-16T05:00:44.577
> 
> 标签：php

我正在尝试将数组打印到文件 staticSurveyDataFileTest.php 中。我能够打印数组，但不是以理想的格式。

看看下面的代码

文件1.php

```
<?php
include_once("../dc/dcCommonLib.php");
include_once("../dc/persistence/UserData.php");
require_once("../../lib/include/connect.inc.php");

$_SESSION["survey"] = "BestBuyAug2012";
$idLink = dbconnect($_SESSION["survey"]);
$surveyWidget = rendererSurveyLoadHandler();
setDataToSession("surveywidget",$surveyWidget);
$userData = &UserData::getInstance();
$userData->setSurvey($surveyWidget);
saveFkidsToOidToFkidMappingArray($userData->OidToFkidMapping);

// prepare demo array
prepareItemArray($userData->OidToFkidMapping["Demographic"]["Q"],$demo,"b");

// prepare item array
prepareItemArray($userData->OidToFkidMapping["Default"]["Q"],$item,"i");
prepareItemArray($userData->OidToFkidMapping["Default"]["M"],$item,"i");

// prepare comment array
prepareCommentArray($userData->OidToFkidMapping["Comment"]["C"],$comment);

if(!function_exists('file_put_contents')) {
    function file_put_contents($filename, $data,$type, $file_append = false) {
      $fp = fopen($filename, (!$file_append ? 'w+' : 'a+'));
        if(!$fp) {
          trigger_error('file_put_contents cannot write in file.', E_USER_ERROR);
          return;
        }
      if($type) {  
        fputs($fp, "$".$type."=".preg_replace("/[\[\]]/","\"",print_r($data, TRUE)));
      }else {
        fputs($fp, print_r($data, TRUE));
      }
      fclose($fp);
    }
}
print("Strart writting ...................");
file_put_contents("staticSurveyDataFileTest.php", "<?php\n","",true);
file_put_contents("staticSurveyDataFileTest.php", $item,"itemFkids",true);
file_put_contents("staticSurveyDataFileTest.php", $demo,"demoFkids",true);
file_put_contents("staticSurveyDataFileTest.php", $comment,"commentFkids",true);
file_put_contents("staticSurveyDataFileTest.php", "?>","",true);
print("written ...");

function prepareItemArray($userDataArray, &$item, $itemStr) {
    if(is_array($userDataArray)) {
        foreach($userDataArray as $questId=>$respGrp) {
            $selectionGrp=array_unique($respGrp);
            if(count($selectionGrp)==1) {
                $respGrpId=key($respGrp);
                $respId = key($respGrp[$respGrpId]);
                $item[$questId."_".key($respGrp)]=$itemStr.$respGrp[$respGrpId][$respId];           
            }else {
                foreach ($respGrp as $respGrpId=>$resp) {
                    $respGrp[$respGrpId]=$itemStr.$resp;
                }
                $item[$questId."_".key($respGrp)]=$respGrp;
            }
        }
    }   
}

function prepareCommentArray($userDataArray, &$item) {
    if(is_array($userDataArray)) {
        foreach($userDataArray as $questId=>$respGrp) {
            $selectionGrp=array_unique($respGrp);
            if(count($selectionGrp)==1) {
                $respGrpId=key($respGrp);               
                $item[$questId."_".key($respGrp)]=$respGrp[$respGrpId]["fk_id"];            
            }
        }
    }   
}

?> 
```

我在 staticSurveyDataFileTest.php 中得到的内容（输入）是

```
<?php
$itemFkids=Array
(
    "203_19" => i27 //Notice that the Comma's(,) are not present 
    "207_22" => i28
    "357_22" => i99
    "370_70" => i104
    "377_72" => i105
    "140_8" => i1
    "141_8" => i2
    "142_8" => i3
    "143_8" => i4
    "144_8" => i5
    "145_8" => i6
    "151_8" => i7
    "152_8" => i8
    "158_8" => i9
    "164_8" => i10
    "165_8" => i11
    "166_8" => i12
    "167_8" => i13
    "168_8" => i14
    "169_8" => i15
    "175_8" => i16
    "176_8" => i17
    "182_8" => i18
    "183_8" => i19
    "184_8" => i20
    "190_8" => i21
    "196_8" => i22
    "197_8" => i23
    "198_8" => i24
    "199_8" => i25
    "200_8" => i26
    "214_8" => i29
    "215_8" => i30
    "216_8" => i31
    "222_8" => i32
    "223_8" => i33
    "224_8" => i34
    "225_8" => i35
    "226_8" => i36
    "227_8" => i37
    "233_8" => i38
    "234_8" => i39
    "235_8" => i40
    "236_8" => i41
    "237_8" => i42
    "243_8" => i43
    "244_8" => i44
    "245_8" => i45
    "251_8" => i46
    "252_8" => i47
    "253_8" => i48
    "254_8" => i49
    "255_8" => i50
    "256_8" => i51
    "257_8" => i52
    "263_8" => i53
    "264_8" => i54
    "265_8" => i55
    "266_8" => i56
    "267_8" => i57
    "268_8" => i58
    "269_8" => i59
    "270_8" => i60
    "271_8" => i61
    "272_8" => i62
    "278_8" => i63
    "279_8" => i64
    "280_8" => i65
    "281_8" => i66
    "282_8" => i67
    "283_8" => i68
    "289_8" => i69
    "290_8" => i70
    "296_8" => i71
    "297_8" => i72
    "298_8" => i73
    "299_8" => i74
    "300_8" => i75
    "301_8" => i76
    "307_8" => i77
    "308_8" => i78
    "309_8" => i79
    "310_8" => i80
    "311_8" => i81
    "312_8" => i82
    "313_8" => i83
    "314_8" => i84
    "315_8" => i85
    "316_8" => i86
    "317_8" => i87
    "318_8" => i88
    "324_26" => i89
    "328_37" => i90
    "332_48" => i91
    "338_59" => i92
    "344_59" => i93
    "345_59" => i94
    "351_8" => i95
    "352_8" => i96
    "353_8" => i97
    "354_8" => i98
    "364_8" => i100
    "365_8" => i101
    "366_8" => i102
    "367_8" => i103
)
$demoFkids=Array
(
    "129_2" => b1
)
$commentFkids=Array
(
    "373_375" => 1
    "380_382" => 2
)
?> 
```

理想情况下，我想要这样的东西

```
<?php
$itemFkids=Array
(
    "203_19" => i27, //notice the comma's present here
    "207_22" => i28,
    "357_22" => i99,
    "370_70" => i104,
    "377_72" => i105,
    "140_8" => i1,
.
.
.
.
. 
```

.. 我需要在代码中做哪些更改？请帮忙 。提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:31:30.323

我的解决方案需要一个额外的 preg_replace，但它应该可以完成工作。我假设您数组中的所有值都采用“i[somenumbers]”格式。如果没有，你需要一个不同的正则表达式。

```
if($type) 
    fputs($fp, "$".$type."=".preg_replace("/[\[\]]/","\"",print_r($data, TRUE))); 
```

更改为：

```
if($type){

    $count = count($data);
    $i = 1;
    //loop through your type array and append comma , to each except last
    foreach($data as $key=>$val) {

     //if we are before last key, append comma      
     if($i < $count)
          $data[$key] .= ',';

       $i++;
    }

    //run same preg_replace as before
    $data2 = preg_replace('/[\[\]]/','"',print_r($data,TRUE));

    //write to file 
    fputs($fp, "$" . $type . " = " . print_r($data2,TRUE));     

 } 
```

希望这可以帮助！

# wcf - 客户端筛选如何为 WCF IQueryable 方法工作？

> ID：11498346
> 
> 赞同：0
> 
> 时间：2012-07-16T05:00:59.813
> 
> 标签：wcf, wcf-data-services, odata, iqueryable

我是 WCF 的新手，我需要帮助来理解一些东西。

我创建了一个 WCF 数据服务，它返回由服务从实体映射的 DTO。在我的服务合同界面上，我有一些方法`GetMyDto`返回`IQueryable<MyDto>`。

我在 MVC 应用程序中添加了对此服务的服务引用。然后接口和代理客户端返回`List<MyDto>`（或者我可以选择其他几个集合类型）而不是`IQueryable<MyDto>`.

我知道`IQueryable`不能暴露给客户端，但是如果我在客户端上过滤（即`MyServiceClient.GetMyDto().Where(x => x.SomeValue == 1)`）它是在客户端还是服务器上过滤？

我的理解是它可以使用 odata，但是我看到的所有示例都直接将实体模型暴露给客户端，我没有这样做。我正在使用 DTO。

我的限制是什么？帮助我准确了解调用服务时发生的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:42:58.930

WCF 数据服务的重点是向`IQueryable`客户端公开。当您使用数据服务客户端时，您正在查询`IQueryable`. 您的查询将转换为 OData 查询字符串（URL 的一部分）并传递给服务器执行。

如果您需要客户端过滤，您首先必须使用以下内容将所有数据加载到客户端应用程序：`MyServiceClient.GetMyDto().ToList()`然后您可以在列表上执行 linq-to-objects 过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:36:01.780

补充一下拉迪斯拉夫所说的（这是完全准确的）：

如果您使用的是 DTO，则您处于反射提供者领域或自定义提供者领域。自定义提供程序允许极端自定义，但学习曲线相当大。AlexJ 有一个关于这个主题的优秀[博客文章系列。](http://blogs.msdn.com/b/alexj/archive/2010/01/07/data-service-providers-getting-started.aspx)反射提供者在这一点上有一些不幸的限制，但很难具体列举它们，所以最好只是尝试一下，看看你在哪里遇到了痛点。如果您没有达到这些限制，它会非常易于使用，并且可能会在帮助您构建服务方面做得很好。

团队中的几位成员真的很想改善我们的供应商故事。我不能保证这将是我们在不久的将来工作的优先事项，但如果有一些小事情我们可以解决，我们很乐意听到。

# .net - 如何从原始网页中搜索和获取文本？vc++?

> ID：11498350
> 
> 赞同：0
> 
> 时间：2012-07-16T05:01:32.430
> 
> 标签：.net, winforms, visual-c++

这是我拥有的[链接](http://pastebin.com/raw.php?i=yVyxkWFD)，其中包含大量数据，其格式如下：

“ X = 地图编号：Y = 地图名称”

例子

《10000：蘑菇园》。

在 vc++ .net 中，我想编写一个连接到该链接的函数，在数据中搜索一个数字（比如说 10000），然后获取数字旁边的名称（这将是 Mushroom Park），然后将名称放入一个字符串。

下面的代码是我已经拥有的，如果所有数据都在一个 .txt 文件中，它将起作用，但我想将此代码转换为连接到上面的链接并最终使其更高效。

谢谢。

```
String^ GrabMapNameById(String^ CurrentStr)//Current Map String{
if(CurrentMapIDRead.ToString() != CurrentMapID.ToString()) //If map has chnaged
{
       try //Try streaming text
       {
          String^ Maps = "Strife.Maps";//map File Name
          StreamReader^ MapDin = File::OpenText("Strife.Maps");//Stream Declar

          String^ str;
          string s;
          int count = 0;
          while ((str = MapDin->ReadLine()) != nullptr) //Loop for every line
          {
             if(str->Contains(CurrentMapID.ToString())) //Untill Map id found
             {
                CurrentMapIDRead = CurrentMapID; //Set Current Map Name
                CurrentStr = str->Replace(CurrentMapIDRead.ToString() , "" );//Replace map id with null characters
                CurrentStr = CurrentStr->Replace(" =" , "" ); //Take out = characters
                break;// kill while
             }
          }
       }

           catch (Exception^ e)
           {
           }
}return CurrentStr;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:58:35.313

我以前没有使用过 vc++，但我相信您正在寻找 WebRequest 类来获取数据。Microsoft 有一个关于提出此类请求的[教程。](http://support.microsoft.com/KB/815657)它使用流阅读器，因此 try 块内的代码如下所示：

```
String *sURL = S"http://pastebin.com/raw.php?i=yVyxkWFD";
WebRequest *wrGETURL;
wrGETURL = WebRequest::Create(sURL);
WebProxy *myProxy = new WebProxy(S"myproxy", 80);
myProxy->BypassProxyOnLocal = true;

wrGETURL->Proxy = WebProxy::GetDefaultProxy();

Stream *objStream = wrGETURL->GetResponse()->GetResponseStream();

StreamReader *MapDin = new StreamReader(objStream);

String^ str;
string s;
int count = 0;
while ((str = MapDin->ReadLine()) != nullptr) //Loop for every line
{
     if(str->Contains(CurrentMapID.ToString())) //Untill Map id found
     {
         CurrentMapIDRead = CurrentMapID; //Set Current Map Name
         CurrentStr = str->Replace(CurrentMapIDRead.ToString() , "" );//Replace map id with null characters
         CurrentStr = CurrentStr->Replace(" =" , "" ); //Take out = characters
         break;// kill while
     }
} 
```

# asp.net - 处理此类页面未提供错误

> ID：11498351
> 
> 赞同：0
> 
> 时间：2012-07-16T05:01:43.870
> 
> 标签：asp.net, error-handling, url-rewriting

我问了这个[问题](https://stackoverflow.com/questions/11483899/asp-net-allow-access-only-through-routes)，因为没有人得到答案，我别无选择，只能退回到不太有用的 B 计划。我正在使用 URL 重写来防止直接访问 .aspx 页面，方法是使用

```
<httpHandlers>
  <add verb="*" path="*.aspx" type="System.Web.HttpForbiddenHandler" />
</httpHandlers> 
```

这会引发错误“未提供此类页面。”，我该如何将用户重定向到我自己的自定义处理程序页面？是否有一些我可以用来重定向的错误代码？我正在寻找一个 web.config 解决方案。

```
<error statusCode="" redirect="~/notfound.htm" />//What should I put the error code in here? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:16:39.147

删除 bin 文件夹并重建解决方案解决了我的问题。

# php - 通过php将单选按钮和复选框的值放入数据库中的1行

> ID：11498360
> 
> 赞同：0
> 
> 时间：2012-07-16T05:02:46.023
> 
> 标签：php, mysql, checkbox, phpmyadmin, radio-button

如何将单选按钮和复选框的值一起插入到 1 行数据库中。例如，表格包含菜单名称和食物的大小。数据库表包含食物和价格..所以当我们用复选框选择我们想要的菜单时，复选框的值将存储在食物（数据库的表）中并选择我们的食物使用单选按钮的大小，单选按钮的值将存储在价格（数据库表）

请帮助我，我是这个领域的新手，谢谢

这是代码

菜单.php

```
<form action="price.php" method="post">

Menu : <br>
<input type="checkbox" value="Siomay" name="tile[]">Siomay <br>
<input type="radio" name="field" value="4" />Small
<input type="radio" name="fiel" value="5" />Large<br>

<input name="confirm" type=submit id="confirm" value='Confirm'>

</form> 
```

价格.php

```
<?php
$con = mysql_connect("localhost","root");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("project1", $con);

$insert="INSERT INTO menu(name, price) VALUES ('".$_POST['tile']"','".$_POST['field']"')";

if (!mysql_query($insert, $con))
{
die('Error: ' . mysql_error());
}
echo "1 record added";
mysql_close($con) 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:13:56.007

您通常使用 mysql 中的插入函数。[这](http://www.w3schools.com/php/php_mysql_insert.asp)是一些基本但很好的解释，[在这里](http://dev.mysql.com/doc/refman/5.5/en/insert.html)你可以找到更详细的官方解释，但对于新手来说也更难理解。但是您必须从 PHP 中使用它，如您在第一个链接示例中所见。

从 php 读取时，这些值作为常规[$_POST](http://php.net/manual/en/reserved.variables.post.php)或[$_GET接收。](http://php.net/manual/en/reserved.variables.get.php)记住也要使用[mysql_real_escape_string()](http://php.net/manual/en/function.mysql-real-escape-string.php)

有了关于您的项目、表名、代码等的更多信息（阅读[常见问题解答](https://stackoverflow.com/faq)），我们将能够为您提供更多帮助。用return来分隔思想，你写的真的很难读。此外，如果您包含[您](http://mattgemmell.com/2008/12/08/what-have-you-tried/)迄今为止尝试过的内容，那就太好了，这样您就不会觉得您希望我们做您的工作。

编辑

在您输入代码之前，我认为您更像是一个新手，所以我发布了一些非常基本的示例。现在这里有一些可能有效的代码：

```
<?php
$con = mysql_connect("localhost","root");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("project1", $con);

$Tile = mysql_real_escape_string($_POST[tile]);
$Field = mysql_real_escape_string($_POST[field]);

if ( !empty($Tile) && !empty($Field) )
{
  $insert="INSERT INTO menu(name, price) VALUES ('$Tile','$Field')";
  if (!mysql_query($insert, $con))
    {
    die('Error: ' . mysql_error());
    }
echo "1 record added";
}
else echo "Please select at least 1 menu.";

mysql_close($con) 
?> 
```

为什么是`tile[]`menu.php 中的名称？仅用`tile`? 我不是说它是错的，我只是说我从未见过它。另外，你有什么问题？它不保存任何东西？

请注意，这`if ( !empty($Tile) && !empty($Field) )`也用于防止用户尝试对您的页面进行恶意操作，而不仅仅是确保他们选择了一个菜单。

# css - 如何验证缩小的 CSS

> ID：11498365
> 
> 赞同：0
> 
> 时间：2012-07-16T05:03:34.520
> 
> 标签：css, internet-explorer, minify

当我单独附加我的 CSS 文件时，在 IE 中一切正常，但是当我将我的 CSS 合并到一个文件中并缩小它时，一切都开始中断。

有没有办法可以验证缩小的 css

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:14:09.530

在压缩 css 代码时，您应该注意关键位置的空格，例如类调用和媒体查询之间的空格很重要......特别是对于 IE 版本......

使用[CSS Compressor](http://www.csscompressor.com/)以自定义形式缩小 css...

然后您可以使用[W3C Validator对其进行验证](http://jigsaw.w3.org/css-validator/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:44:40.370

我能看到的唯一问题是，结合所有 CSS 会覆盖您的一些样式，这就是您看到事情破裂的原因。您应该重新查看所有样式，看看它们是否没有被覆盖。

# android - 如何创建位于 Android 中所有应用程序之上的 UI 或小部件？

> ID：11498366
> 
> 赞同：8
> 
> 时间：2012-07-16T05:03:36.600
> 
> 标签：android, android-windowmanager

我可以在 Android 中创建一个位于所有应用程序之上的 UI 或小部件吗？有些应用程序具有这样的小部件。一个示例在所有应用程序顶部都有一个相机图标，单击该图标将捕获屏幕。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-16T05:37:42.703

如果您只想显示某些内容，则可以将其显示在所有内容之上，甚至是锁定屏幕。

如果您希望某些内容可以点击，您可以将其显示在除锁屏之外的任何内容之上。

这是一个示例，根据您的需要进行修改：

创建服务并执行以下操作：

```
//These three are our main components.
WindowManager wm;
LinearLayout ll;
WindowManager.LayoutParams ll_lp;

//Just a sample layout parameters.
ll_lp = new WindowManager.LayoutParams();
ll_lp.format = PixelFormat.TRANSLUCENT;
ll_lp.height = WindowManager.LayoutParams.FILL_PARENT;
ll_lp.width = WindowManager.LayoutParams.FILL_PARENT;
ll_lp.gravity = Gravity.CLIP_HORIZONTAL | Gravity.TOP;

//This one is necessary.
ll_lp.type = WindowManager.LayoutParams.TYPE_SYSTEM_ALERT;

//Play around with these two.
ll_lp.flags = WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE;
ll_lp.flags = ll_lp.flags | WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE;

//This is our main layout.
ll = new LinearLayout(this);
ll.setBackgroundColor(android.graphics.Color.argb(0, 0, 0, 0));
ll.setHapticFeedbackEnabled(true);

//And finally we add what we created to the screen.
wm.addView(ll, ll_lp); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-10T02:54:44.897

以下是有关如何显示视图的更多选项。

这将使其覆盖在所有内容（包括锁定屏幕）之上，但不可点击。 **WindowManager.LayoutParams。TYPE_SYSTEM_OVERLAY**

这将使其可点击，但不会超过锁定屏幕 **WindowManager.LayoutParams.TYPE_SYSTEM_ALERT**

这将使它高于一切（包括锁定屏幕）和可点击。 **WindowManager.LayoutParams.TYPE_SYSTEM_ERROR**

关于使用“TYPE_SYSTEM_ERROR”需要注意的一件事。如果您连接点击事件，它调用的任何内容都将在锁定屏幕后发生。

# jquery-ui - 我无法从私有方法中读取 jQuery-UI 小部件工厂选项

> ID：11498367
> 
> 赞同：0
> 
> 时间：2012-07-16T05:03:38.950
> 
> 标签：jquery-ui, widget, factory

我是 jQueryUI 小部件工厂的新手，因此我要问的问题可能很愚蠢。我想创建一个 ajax 工具提示，我可以在其中通过一个选项设置 ajax 调用的 url，但此选项在包含 ajax 调用的 _mouseOver 方法中不可读。

> ```
>  (function($) {
>         $.widget("ui.tooltip", {
>    options: {
>         url: ''
>     },
>   _create: function() {
>       alert(this.options.url); //it works
>       this.element.bind({
>         mouseenter: this._mouseOver
>       });
>     },
>   _mouseOver: function() { 
>       alert(this.options.url); //it dosen't works
>     },
>   ... 
> ```
> 
> 正如我设置的那样： $(".text").tooltip({url: "something" });

有人可以帮我吗，拜托。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:33:28.940

```
(function ($) {
    $.widget("ui.tooltip", {
        self: null,
        options: {
            url: ''
        },
        _create: function () {
            self = this;
            self.element.bind({
                mouseenter: self._mouseOver
            });
        },
        _mouseOver: function () {
            alert(self.options.url); // it should work
        }
    });
})(jQuery); 
```

在 _mouseOver 中使用“this”指的是事件函数内的当前对象，而不是小部件本身。您应该创建一个变量并将小部件 (this) 放在上面，以便能够在任何事件或方法中使用它的选项。在 jQuery 中使用 $.each() 函数时，您会发现相同的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:02:00.717

在这种情况下，_mouseOver 函数的“this”上下文是元素而不是 jquery 小部件。这就是你没有得到 options.url 的原因。

您可以尝试使用此代码作为开始：

```
_create: function() {
      alert(this.options.url); //it works
      this.element.tooltip = this;
      this.element.bind({
        mouseenter: this._mouseOver
      });
    },  
_mouseOver: function() { 
  alert(this.tooltip.options.url); //it dosen't works
}, 
```

它没有经过测试。

# cakephp - cakephp tmp/cache - 访问被拒绝

> ID：11498370
> 
> 赞同：0
> 
> 时间：2012-07-16T05:03:48.637
> 
> 标签：cakephp, cakephp-2.0

我有 CakePHP 应用程序。我设置“chamod -R 0666 tmp”以使 tmp 文件夹中的所有文件夹/文件可写。一切都很好。

昨天我使用了一些控制台脚本（'cake i18n' shell）。在此之后，我失去了对 tmp 文件夹的所有权限 - 我无法打开它，无法更改权限，无法做任何事情 - 请帮助 - 这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:11:36.297

尝试使用：
sudo chmod -Rf 0777 tmp

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:36:04.040

使用 chmod -R 0777 tmp 使 tmp 下的所有文件夹，包括 tmp 可写。将其设置为 chamod 0666 使每个人都可以访问 tmp 目录，但不会使文件可执行。

# r - 从 mpfr 生成的列表中获取值

> ID：11498371
> 
> 赞同：2
> 
> 时间：2012-07-16T05:04:03.417
> 
> 标签：r

考虑以下向量：

```
> v1
[1] 0.000000e+00 0.000000e+00 1.110223e-16 4.440892e-15 3.266195e-08 2.531242e-07   
1.041204e-05 1.172329e-05 1.672447e-05 1.803203e-05 
```

我已将 mpfr 从函数（来自 Rmpfr 包）应用到 v1：

```
> v2<-sapply(v1,function(x){mpfr(x,5)}) 
```

v2 显然是一个列表，但我无法获得实际值。我尝试使用 unlist、v2[[]]、转换为字符 v2[[]] 或向量..

```
> v2

[[1]]
'mpfr1' 0

[[2]]
'mpfr1' 0

[[3]]
 'mpfr1' 1.11e-16 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T10:57:52.077

实际上我有一个类似的问题，因为这是我第一次使用这个包。无论如何，我找到了一个简单的解决方案，虽然不是最优雅的，但我可以添加......：

```
 # Compute 1/7 with 1000 bit precision and store the value in a character object
   x <- mpfr(1,1000)/7
   x.output <- capture.output(x)[2]
   result <- substr(x.output,5,nchar(x.output)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-27T12:48:14.030

您可能希望`str()`与选项`give.head=FALSE`和`digits.d`.

```
> x<-mpfr(1,120)/7

> x    #This would print the precision info
1 'mpfr' number of precision  120   bits
[1] 0.14285714285714285714285714285714285722

> str(x, give.head=FALSE, digits.d=10)
0.1428571429 
```

如果要存储此字符串，则需要`capture.output()`：

```
> y<-capture.output(str(x, give.head=FALSE, digits.d=10))
> y
[1] "0.1428571429" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T05:14:21.813

我认为你根本不需要`sapply()`这里，你可以简单地传入一个向量：

```
require(Rmpfr)
v1 <- c(0.000000e+00, 0.000000e+00, 1.110223e-16, 4.440892e-15, 3.266195e-08, 2.531242e-07)
v2 <- mpfr(v1,5)
#-----
> v2
6 'mpfr' numbers of precision  5   bits 
[1]        0        0 1.11e-16 4.44e-15  3.35e-8  2.53e-7 
```

需要注意的是，我以前从未使用过这个包或函数，所以我建议彻底阅读`?mpfr`以确保您了解这些论点及其含义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-06T17:08:39.270

另一种解决方案：

```
x <- 2*Rmpfr::pnorm(mpfr((1.0490/0.0246), precBits=100), lower.tail=FALSE, log.p = FALSE)

1 'mpfr' number of precision  100   bits 
[1] 2.6253807992339014869315885783658e-397

sub("\'mpfr1\' ", "", capture.output(x@.Data[[1]]))
[1] "2.6253807992339014869315885783658e-397" 
```

# android - 使文本字段水平

> ID：11498380
> 
> 赞同：1
> 
> 时间：2012-07-16T05:05:24.697
> 
> 标签：android, html, cordova

我有 3 个文本字段，我设计如下。我希望它们是水平的并出现在一行中。但它们是垂直的 3 行。有人能帮我吗？

```
<fieldset data-role="controlgroup" data-type="horizontal">
   <legend>The 3 values:</legend>
    <input type="text" id="basic1" value="">
    <input type="text" id="basic2" value="">
    <input type="text" id="basic3"  value="">
</fieldset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:19:09.287

将三个`EditText`s 放在一个`horizonatl` `LinearLayout`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:25:24.360

您必须定义每个输入字段的宽度。

```
 <fieldset data-role="controlgroup" data-type="horizontal">
        <legend>The 3 values:</legend>
        <input style="width:30px; " type="text" id="basic1" value="">
        <input style="width:30px;" type="text" id="basic2" value="">
        <input style="width:30px; "type="text" id="basic3"  value="">
    </fieldset> 
```

# javascript - jquery中的$ .ajax函数不起作用

> ID：11498384
> 
> 赞同：0
> 
> 时间：2012-07-16T05:05:44.303
> 
> 标签：javascript, jquery, ajax

我开始使用 jquery 并遇到了 $.ajax(...) 不起作用的小问题。实际上整个jquery，javascript业务一直很艰难，因为在脚本不起作用的情况下解决了问题。这是我的代码...

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
/*  $.ajax({url:"http://reddit.com/r/nyc.json", success:function(result){
    $("div").text("helloz");
    }});*/
        $("div").text("hello");
});
</script>
</head>
<body>

<div><h2>Let AJAX change this text</h2></div>
<button>Change Content</button>
</body>
</html> 
```

正如您在代码中看到的那样，我已经注释掉了 .ajax 函数，而是放置了一些其他代码片段并且它可以正常工作，证明 jquery 已正常加载并且 ready 函数运行良好。但是，.ajax 函数不起作用。如果我将此代码粘贴到[w3cschool 的 tryit 编辑器](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_ajax2)中，我的互联网连接工作正常，并且代码运行良好。有人可以帮帮我吗。

此外，任何解决此类错误追逐的一般策略都会非常有帮助。我有 chrome 浏览器，但是当我打开 javascript 控制台时，它显示一切正常...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T05:11:18.857

问题是`url:"http://reddit.com/r/nyc.json"`，那不是您的域，因此出现了[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。

你需要在你的服务器上做一个代理。或者，如果站点支持 jsonp，您可以改用 jsonp。

```
$.getJSON('http://www.reddit.com/r/nyc.json?jsonp=?', function(data) {
   console.log(data);
});​ 
```

[演示](http://jsfiddle.net/6fB2V/)。

# python - 将 python 字典表示为矩阵或 csvs

> ID：11498386
> 
> 赞同：1
> 
> 时间：2012-07-16T05:05:47.707
> 
> 标签：python, maps, iteration, dictionary

我正在尝试获取具有以下结构的python字典：

```
>>>my_dict
>>>(i1,j1):{c1:1,c2:3,c3:4},(i2,j2):{c1:1,c2:1,c3:1}... 
```

我想做的是在矩阵或某种用于可视化的表格中获取密钥 (i,j) 和 r1,r2,r3.rn。所以表格表示看起来像这样。

```
 c1  c2  c3 ...rN
i1,j1   1   3  4        
i2,j2   1   1  1     
iN,jN 
```

基本上，我希望行上的主键和列上的值（这是另一个字典）的键。然后轻松地将键映射到列和行值。

我说得很具体，这只是一个例子。我实际上对我在寻找什么感到困惑。我必须这样做很多次，他们是将字典映射到这样的表的简单方法吗？我应该寻找一些模块吗？

在此先感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T05:20:15.557

```
dic={('i1','j1'):{'c1':1,'c2':3,'c3':4},('i2','j2'):{'c1':1,'c2':1,'c3':1}}
header=list(max(dic.values()))
print '\t',
print "  ".join(sorted(header))
for x in dic:
    print ",".join(x)+'\t',
    for y in sorted(dic[x]):
        print str(dic[x][y])+"  ",
    print 
```

**输出：**

```
 c1  c2  c3
i1,j1   1   3   4  
i2,j2   1   1   1 
```

要将其写入文件，请尝试以下操作：

```
with open('data.txt','w') as f:
    dic={('i1','j1'):{'c1':1,'c2':3,'c3':4},('i2','j2'):{'c1':1,'c2':1,'c3':1}}
    header=list(max(dic.values()))
    f.write('\t')
    f.write("  ".join(sorted(header))+'\n')
    for x in dic:
        f.write(",".join(x)+'\t')
        for y in sorted(dic[x]):
            f.write(str(dic[x][y])+"  ")
        f.write('\n') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T05:12:07.150

```
{ 
    'primary_key1': [{key: data},{key: data},{key: data},{key: data},{key: data},{key: data}]},
    'primary_key2': [{key: data},{key: data},{key: data},{key: data},{key: data},{key: data}]} 
     ...
    'primary_keyN': [{key: data},{key: data},{key: data},{key: data},{key: data},{key: data}]}
} 
```

因此，现在您可以使用 PK 将它们取回，如果您有密钥，则可以将它们存储在具有重复密钥的 dict 中，例如：

```
'primary_key1': [{key: data},{key: data},{key: data},{key: data},{key: data},{key: data}] 
```

否则，如果您始终拥有唯一的值键，则进行嵌套：

```
'primary_key1': {key: data, key: data, key: data}, 
```

或否则只有数据：

```
'primary_key1': [data, data, data], 
```

希望这会帮助你。

# c# - ClientScript 不适用于 AJAX UpdateProgress

> ID：11498389
> 
> 赞同：2
> 
> 时间：2012-07-16T05:05:59.390
> 
> 标签：c#, asp.net, ajax, html

我有一个订单输入页面，可能需要一些时间来处理，用户认为浏览器已冻结并关闭它。这是一个弹出式浏览器，当单击 cmdAdd 按钮时，文本框中的项目被写入数据库，子窗口关闭并刷新父窗口以查看更改。这目前工作正常。

我添加了一个 AJAX UpdateProgress 来给用户一些反馈，但是现在 cmdAdd 浏览器没有关闭，并且父级没有更新。进度指示器显示，并且数据库已更新，但仅此而已。有任何想法吗？

注意：UpdateProgress 指示器在站点的其他地方使用，没有问题，只是我在弹出的子窗口中使用它。cmdAdd_click 在没有 updateProgress 控件的情况下正常工作（子关闭，父刷新）

ASPX：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="orderHistory.aspx.cs" Inherits="JWeb.orderHistory" %>
<%@ Register assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagprefix="asp" %>
<!DOCTYPE html>
<html>
    <head id="Head1" runat="server">
        <title>JWebUtils - Order History Sheet</title>
        <link href="App_Themes/Theme/Styles.css" rel="stylesheet" type="text/css" />
        <link href="cssUpdateProgress.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <script type="text/javascript">
            var ModalProgress = '<%= ModalProgress.ClientID %>';         
        </script>
        <DIV style="width: 700px; vertical-align: top; border-collapse: collapse;" class="pageBody">
            <form id="Form1" method="post" runat="server">
                <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
                </asp:ToolkitScriptManager>
                <script type="text/javascript" src="jsUpdateProgress.js"></script>
                <asp:Panel ID="panelUpdateProgress" runat="server" CssClass="updateProgress">
                    <asp:UpdateProgress ID="UpdateProg1" DisplayAfter="0" runat="server">
                        <ProgressTemplate>
                            <div style="position: relative; top: 30%; text-align: center; vertical-align: middle;">
                                <img src="images/loading.gif" style="vertical-align: middle" alt="Processing" />
                                Processing ...
                            </div>
                        </ProgressTemplate>
                    </asp:UpdateProgress>
                </asp:Panel>
                <asp:ModalPopupExtender ID="ModalProgress" runat="server" TargetControlID="panelUpdateProgress" BackgroundCssClass="modalBackground" PopupControlID="panelUpdateProgress" />
<%--                <asp:button id="cmdAdd" tabIndex="5" runat="server" Width="95px" cssClass="dg_buttons" Text="Add to Order" onclick="cmdAdd_Click"></asp:button>
--%>                <asp:UpdatePanel ID="pnlUpdate" runat="server">
                    <ContentTemplate>
                        <TABLE id="Table1" style="WIDTH: 100%;">
                            <TR>
                                <TD class="pageHeader" colspan="2">
                                    <asp:label id="lblTitle" runat="server" Font-Names="Arial" Font-Bold="True">Order History Sheet</asp:label>
                                </TD>
                            </TR>
                            <TR>
                                <TD vertical-align: top;" style="width: 220px;">
                                    <asp:button id="cmdAdd" tabIndex="5" runat="server" Width="95px" 
                                        cssClass="dg_buttons" Text="Add to Order" onclick="cmdAdd_Click"></asp:button>&nbsp;
                                    <asp:button id="cmdClose" tabIndex="5" runat="server" Width="50px" Text="Close" 
                                        CssClass="dg_buttons" onclientclick="window.close(); return false;"></asp:button>&nbsp;
                                    <asp:button id="cmdPrint" tabIndex="5" runat="server" Width="50px" Text="Print" 
                                        CssClass="dg_buttons" CausesValidation="False" UseSubmitBehavior="False"></asp:button>
                                </TD>
                                <TD vertical-align: top;" style="text-align: right; width: 480px;">
                                    <asp:Label ID="lblCustomerName" runat="server"></asp:Label>
                                </TD>
                            </TR>
                            <TR>
                                <TD vertical-align: top;" style="vertical-align: top" colspan="2">
                                    &nbsp;<span class="style1">* Qty Bought is total items purchased in the last 12 
                                    months from the current date </span>
                                    <table style="WIDTH: 100%; vertical-align: top;">
                                        <TR>
                                            <TD colspan="2">
                                                <asp:label id="lblMessage" runat="server" Font-Names="Arial" Font-Size="Small" Width="525px" ForeColor="Red"></asp:label>
                                            </TD>
                                        </TR>
                                        <TR>
                                            <TD colspan="2">
                                                <div class="mGrid">
                                                    << GRIDVIEW OMITTED FOR BEREVITY >>
                                                </div>
                                            </TD>
                                        </TR>
                                    </table>
                                </TD>
                            </TR>
                        </TABLE>
                    </ContentTemplate>
                </asp:UpdatePanel>
            </form>
        </DIV>
        <script type="text/javascript" src="jsUpdateProgress.js"></script>
    </body>
</html> 
```

cmdAdd_Click：

```
 protected void cmdAdd_Click(object sender, EventArgs e)
    {
        string qty = null;
        string itemCode = null;
        int orderID = Convert.ToInt32((Session["OrderID"]));
        int seqNum = 0;
        int orderSeqNum = 0;
        string description = null;
        JWebUtils.priceType pricing = default(JWebUtils.priceType);
        double price = 0;
        string type = null;
        ArrayList sqlParams = new ArrayList();
        JWebDB db = new JWebDB();
        System.Text.StringBuilder script = new System.Text.StringBuilder();
        int discount = 0;
        string strDisc = null;
        JWebUtils jweb = new JWebUtils();

        << CODE TO UPDATE DB OMITTED FOR BEREVITY >>

        script.Append("<script language=\"javascript\">");
        script.Append("window.opener.document.forms[0].submit();self.close();");
        script.Append("</script>");

        Session["IsPopup"] = true;

        ClientScript.RegisterStartupScript(this.GetType(), "XYZ", script.ToString());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:42:43.880

为了`Ajax`在您`Asp.net`的网站上工作，您需要首先`Scriptmanager`在您的 aspx 页面上添加该`ScriptManager`控件管理启用 AJAX 的`ASP.NET`网页的客户端脚本。默认情况下，控件将[Microsoft](http://www.asp.net/ajax) [Library](http://www.asp.net/ajax)`ScriptManager`的脚本注册到页面。这使客户端脚本能够使用类型系统扩展并支持部分页面呈现和 Web 服务调用等功能。[`Ajax`](http://www.asp.net/ajax)

如果您仍然有问题，那么在您的文件后面的代码中使用 代替`ScriptManager.RegisterStartupScript`您的 aspx 页面。`ClientScript.RegisterStartupScript``scriptamanager`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:47:17.447

首先，您应该将 a 添加`ScriptManager`到您的页面，然后应该使用：

```
ScriptManager.RegisterStartupScript(... 
```

# localization - 道场本地化

> ID：11498391
> 
> 赞同：0
> 
> 时间：2012-07-16T05:06:25.400
> 
> 标签：localization, dojo

我必须使用 Dojo**提供客户端本地化**（支持德语和西班牙语）到录音文件夹中存在的“agent.js”文件，但我无法获取该对象。

当 dojo 文件夹和录制文件夹存在于同一文件夹中时，本地化工作正常，但我无法将 dojo 文件夹移动到“数据”文件夹。

文件夹布局[因为我无法发布图像]

```
 - Javascript
      -Adventure
         -Data
            -recordings
               -nls
                 -de
                   agent.js
                 -es
                   agent.js
                 agent.js
              agent.js
  -dojo 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:19:15.730

你可以尝试使用这个：

```
dojo.registerModulePath("yourApp", "../Javascript/Adventure/Data/recordings");

dojo.requireLocalization("yourApp", "agent"); 
```

# iphone - 忽略按钮单击而不将启用设置为false？

> ID：11498395
> 
> 赞同：0
> 
> 时间：2012-07-16T05:07:06.707
> 
> 标签：iphone, xcode, cocoa-touch, ipad, ios5

我有一个按钮，如果发生某种情况，我希望它被“禁用”，而不会使按钮的 alpha 值降低。由于将按钮启用属性设置为 false 将 alpha 更改为大约 0.6 我在被调用的方法中设置了一个 if 语句，然后按下按钮以忽略该函数的其余部分。问题是该按钮在单击时“变暗”。我希望按钮根本不改变，没有变暗，没有函数调用等。我希望按钮的行为就像它被禁用但具有完整的 alpha 一样。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T05:16:13.797

将 userInteraction 设置为 false，如下所示：

```
button.userInteractionEnabled = NO; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:17:55.673

您可以为此使用用户交互属性

myButton.userInteractionEnabled=YES；// 或没有

# asp.net - 发送多个模型以查看 MVC 4

> ID：11498399
> 
> 赞同：10
> 
> 时间：2012-07-16T05:07:30.897
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

我有两个模型类，每个都是数据库中的一个表。一种型号称为“衣服”，另一种型号称为“鞋子”。

我想在同一个 razor 视图中显示每个表的内容，但 MVC 只允许我将一个模型发送到视图。

```
@model IEnumerable<Test.Models.Clothes> 
```

有没有办法将多个模型发送到剃刀视图？

如果不是，那么在已经将另一个模型传递给它的视图中显示另一个模型的内容的正常方法是什么。谢谢你的建议。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T05:10:52.697

要么创建一个视图模型类，该类具有两个类作为其对象。然后它将是类型安全的。

```
public class ViewModelForDisplay
{
       public Clothes Clothes {get; set;}
       public Shoes Shoes {get; set;}
}

//on Controller
Clothes objClothes = GetClothes();
Shoes objShoes = GetShoes();

ViewModelForDisplay objViewModel = new ViewModelForDisplay() {Clothes = objClothes, Shoes= objShoes } 
```

另一种简单的方法是使用 ViewBag。它使用添加到 C# 4 中的动态功能。它允许对象动态添加属性。它也是类型安全的

```
ViewBag.Shoes= objShoes ;
ViewBag.Clothes= objClothes ; 
```

您还可以使用 ViewData 将对象传递给 html。但这不是类型安全的。它需要铸造

```
ViewData["Clothes "] = objClothes ;
ViewData["Shoes "] = objShoes ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T05:08:57.173

制作您自己的类，也就是 View Model，并让它由两个模型组成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-03T09:19:38.193

我发现这篇文章很有趣：

[https://workspaces.codeproject.com/user-10826818/using-multiple-models-in-a-view-in-asp-net-mvc-4](https://workspaces.codeproject.com/user-10826818/using-multiple-models-in-a-view-in-asp-net-mvc-4)

它提供了将多个模型发送到视图的不同方法：

*   查看数据
*   查看包
*   部分视图
*   临时数据
*   视图模型
*   元组

# android - 如何在 android 中使用 android-support-v4.jar 禁用 ViewPager 刷卡

> ID：11498402
> 
> 赞同：6
> 
> 时间：2012-07-16T05:07:45.710
> 
> 标签：android, android-fragments, android-fragmentactivity

我正在创建一个目标为 2.2 的 android 应用程序。我仍然想使用 android.support-v4.jar 中提供的 ViewPager。我需要禁用 Viewpager 在按钮单击时滑动。我使用以下代码进行禁用。但它不起作用。

```
public class ServiesDeail extends FragmentActivity{

    ServiesTitleFragmentAdapter mAdapter;
    ViewPager mPager;
        int position = 0 ;

    @SuppressWarnings({ "rawtypes", "unchecked" })
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mastermenu);

        LinearLayout lnrparent = (LinearLayout) findViewById(R.id.LL_001);
        LayoutInflater inflater = (LayoutInflater)                                                         this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = inflater.inflate(R.layout.menu_deatil, null);
        lnrparent.addView(view);

        mAdapter = new ServiesTitleFragmentAdapter(getSupportFragmentManager());

        mPager = (ViewPager) findViewById(R.id.pagerone);
        mPager.setAdapter(mAdapter);

        TitlePageIndicator indicator = (TitlePageIndicator) findViewById(R.id.indicatorone);
        indicator.setViewPager(mPager,position);

            Menu_Button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                mPager.setClickable(false);
            }
        });
      }
} 
```

如果你有任何想法..请给我回复..我正在等待你的回复

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-16T05:21:22.490

您必须扩展视图寻呼机并为您创建一个自定义视图寻呼机，它可以在 xml 中使用，而不是您从支持库获得的视图寻呼机并更改一些属性，请参见下面的代码，它对我有用。在您的代码中使用 customviewpager，滑动将被禁用。

```
public class CustomViewPager extends ViewPager{

    public CustomViewPager(Context context){
        super(context);
    }

    public CustomViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev){
        return false;
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev){
        return false;
    }
} 
```

# c# - 使用 Web 服务响应

> ID：11498405
> 
> 赞同：1
> 
> 时间：2012-07-16T05:08:06.520
> 
> 标签：c#, web-services, asp.net-4.0, httpresponse, webservice-client

我的页面必须通过以下调用从 Web 服务获得响应：

```
GetModBook.InvService.InventoryServiceClient isc = new GetModBook.InvService.InventoryServiceClient();

GetModBook.InvService.GetModBookingsOperationRequest gmoreq = new GetModBook.InvService.GetModBookingsOperationRequest();

GetModBook.InvService.GetModBookingsOperationResponse gmores = new GetModBook.InvService.GetModBookingsOperationResponse(); 
```

`GetModBookingsOperationResponse`有一个名为 Bookings 的字段，其中包含一系列 Bookings

```
public GetModBookingsOperationResponse 
{
  public Booking Bookings;
} 
```

我使用了 Web 服务的请求部分

例子：

```
gmoreq.RatePackages = new GetModBook.InvService.GetModBookingsOperationRequest[NoofRatePackages] 
```

编辑：

[调用网络服务](https://stackoverflow.com/questions/10096629/object-reference-not-set-to-an-instance-of-an-object-webservices)

但我不知道如何调用响应部分

任何建议将不胜感激。

编辑：

```
GetModBookingsResponse GetModBookings(GetModBookingsRequest request) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T04:56:46.813

以下是您如何获得回复

```
GetModBook.InvService.InventoryServiceClient isc = new GetModBook.InvService.InventoryServiceClient();

GetModBook.InvService.GetModBookingsOperationRequest gmoreq = new GetModBook.InvService.GetModBookingsOperationRequest();
//set the request parameters if there any

GetModBook.InvService.GetModBookingsOperationResponse gmores =isc.GetModBookings(gmoreq); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T06:10:25.930

如果没有看到您完整的类实现，我不能说如何调用它，但这里有一个关于如何调用 Web 服务方法的示例。

以下示例将展示如何使用 Web 服务获取服务器。

**Web服务cs文件**

```
[WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    public class SampleWebService : System.Web.Services.WebService
    {
[WebMethod]
        public DateTime GetServerDate()
        {
            return DateTime.Now;
        }
    } 
```

**Web服务消费者页面**

```
SampleWebServiceWS.SampleWebServiceClient ws = new SampleWebServiceWS.SampleWebServiceClient();
          DateTime dt=  ws.GetServerDate(); 
```

类似的方式，您可以调用您的方法并将其分配给一个变量。

我没有测试代码，但希望这会给如何实现它提供一个想法。

# java - 避免在 Java 自定义标记处理程序中生成 html，第 2 部分

> ID：11498406
> 
> 赞同：1
> 
> 时间：2012-07-16T05:08:17.900
> 
> 标签：java, servlets, jsp-tags

我遇到了一个问题，试图找到关于如何避免在自定义标记处理程序中生成 HTML 的[问题的答案。](https://stackoverflow.com/questions/6693065/how-do-i-avoid-generating-html-in-a-java-custom-tag-handler)像这个提问者一样，我试图避免`println()`在我的标记处理程序中使用一堆语句，并且我真的很想从另一个 .jsp 文件中提取数据。

因此，我尝试了建议的方法：

```
public int doStartTag() throws JspException {
    try {
        pageContext.getResponse().flushBuffer();
        pageContext.getRequest()
                .getRequestDispatcher("/views/tags/loginBlock.jsp")
                .include(pageContext.getRequest(), pageContext.getResponse());
    } catch (Exception e) { throw new RuntimeException(e); }

    return EVAL_BODY_INCLUDE;
} 
```

然而，我得到的是 loginBlock.jsp 的内容在标签所在的 jsp 的输出*上方*，而不是像我预期的那样插入到标签的位置，即使调用`flushBuffer()`.

我有一个问题想得到答案，但谷歌的众神今晚对我并不好：

1.  如果我需要从标签处理程序插入一个 HTML 块，这是最好的方法吗？
2.  在原始答案中，发布者使用了经典的标签处理程序。有没有办法使用简单的标记处理程序（即在扩展 SimpleTagSupport 的类中）来代替？
3.  即使上面喜欢的问题中的提问者接受了答案，我也无法复制成功的结果。我是否遗漏了提问者提出的我遗漏的内容？
4.  我只是以某种我什至不知道的方式离开基地吗？我对整个 jsp/servlets 有点陌生，我不能 100% 确定我应该使用这种设计模式。我基本上是在尝试设计调用后端 Java 的 jsp 文件，这些文件执行一些业务逻辑并生成结果 HTML，但就像我上面所说的，我不想`println()`在我的 Java 标记处理程序中粘贴一堆调用。

感谢您的任何帮助和/或见解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T03:15:06.503

Woot，我终于找到了一个更好的答案，我*知道*我必须忽略一些可能相对简单且相当明显的东西。还有另一个版本`include()`将布尔值作为第二个参数。 [根据文档](http://docs.oracle.com/javaee/1.4/api/javax/servlet/jsp/PageContext.html#include%28java.lang.String,%20boolean%29)：

> 如果 flush 为真，则在处理包含之前，此 JSP 的当前 JspWriter“out”将作为此调用的副作用被刷新。否则，不会刷新 JspWriter“out”。

所以我上面的原始代码应该在一个扩展 SimpleTagHandler 的类中，应该是这样的：

```
public void doTag() {
    PageContext context = (PageContext)getJspContext();
    try {
        // The second parameter below (true) causes the JspWriter to be flushed
        context.include("/views/tags/loginBlock.jsp", true);
    } catch (Exception e) { throw new RuntimeException(e); }
} 
```

这不仅更短更简单，而且意味着我不必将 buffer="none" 放入所有 JSP 页面指令中。如果其他人遇到这个问题和答案，我希望你觉得它有用，因为它确实给我带来了很多悲伤。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T14:12:30.083

我找到*了*答案，但我不知道这是否是*最佳*答案。我将 buffer="none" 插入到我的主 jsp 页面的页面指令中，现在辅助 jsp 页面位于它应该在的位置。同样，我不知道这是否是最好的答案，因为在我看来我应该能够缓冲页面。如果有人有更好的建议，我会把这个问题留几天。

# php - 从列表中绘制随机变量？

> ID：11498412
> 
> 赞同：0
> 
> 时间：2012-07-16T05:08:52.730
> 
> 标签：php, arrays, list, variables, random

所以我用 PHP 制作这个 RPG 游戏是为了让自己更加熟悉这门语言。到目前为止，我已经建立了一个相当不错的系统。现在我在店里工作。我已经做到了，它通过使用数组存储变量，根据城市（村庄、城镇、城市等）的大小，在每个类别（武器、盔甲等）中选择一定数量的商品。这太棒了。

我现在要做的是列出我希望商店可能出售的每件商品，然后为商店将出售的每个插槽随机选择其中一件。例如，在最小的城市规模，商店出售两种武器。它会从武器列表中随机选择两把武器展示给玩家。我一直在使用包含作为一种简单的方法来存储这样的“列表”，所以我真正需要做的就是找到一种方法让游戏从包含提供的列表中随机选择 x 数量的项目并将其存储在数组中的一个变量。

如果您能够如此随机挑选物品，则奖励积分永远不会是相同的物品。（比如如果我们选择两个项目并且项目是“铁剑”、“钢剑”和“龙剑”之类的，它永远不会说“铁剑”和“铁剑”）

到目前为止，这是我的代码摘录。

确定要显示的项目数量。（显示“铁剑”的位置是存储变量的位置。这些是扔进去的虚拟物品。）

```
$Weapons = 2 * $citysize;
$Armor = 2 * $citysize;
$Misc = $citysize;

include 'weapons.php';

if ($Weapons == 2){
    $_SESSION['ShopWeapons'][0] = "Iron Sword";
    $_SESSION['ShopWeapons'][1] = "Everwood Staff";
} elseif ($Weapons == 4){
    $_SESSION['ShopWeapons'][0] = "Iron Sword";
    $_SESSION['ShopWeapons'][1] = "Everwood Staff";
    $_SESSION['ShopWeapons'][2] = "Steel Sword";
    $_SESSION['ShopWeapons'][3] = "Balsa Wand";
} elseif ($Weapons == 6){
    $_SESSION['ShopWeapons'][0] = "Iron Sword";
    $_SESSION['ShopWeapons'][1] = "Everwood Staff";
    $_SESSION['ShopWeapons'][2] = "Steel Sword";
    $_SESSION['ShopWeapons'][3] = "Balsa Wand";
    $_SESSION['ShopWeapons'][4] = "Steel Dagger";
    $_SESSION['ShopWeapons'][5] = "Balsa Bow";
} 
```

展示商店中的物品

```
echo $_SESSION['ShopWeapons'][0] . "<br>";
echo $_SESSION['ShopWeapons'][1] . "<br>";

if(($_SESSION["citysize"] == "town") || ($_SESSION["citysize"] == "city")){
    echo $_SESSION['ShopWeapons'][2] . "<br>";
    echo $_SESSION['ShopWeapons'][3] . "<br>";
}

if($_SESSION["citysize"] == "city"){
    echo $_SESSION['ShopWeapons'][4] . "<br>";
    echo $_SESSION['ShopWeapons'][5] . "<br>";
} 
```

提前一百万次谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:13:03.773

这很容易。当您在显示之前从武器阵列中选择一个随机项目时，将其从阵列中移除。这样，当您去选择另一种随机武器时，它就不是一个选择。

```
while NumberItems < MaxItems
    weapon = NextWeapon()
    RemoveWeapon( weapon )
    AddWeaponToStore( weapon )
    NumberItems++

DisplayStoreHtml() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:14:01.133

如何使用[`shuffle`](http://php.net/shuffle)随机化数组顺序？

# nhibernate - 如何在运行时启用/禁用休眠环境

> ID：11498415
> 
> 赞同：1
> 
> 时间：2012-07-16T05:09:47.530
> 
> 标签：nhibernate

我只需要在几种情况下写历史。是否可以在运行时禁用或启用 Enverse？像这样的东西，例如：使用 (new WriteHistory()) { }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T20:11:10.857

正如@Firo 指出的那样，继承 AuditEventListener（其中包含事件侦听器）并覆盖 OnPostInsert、OnPostUpdate、OnPostDelete、OnPreUpdateCollection、OnPreRemoveCollection 和 OnPostRecreateCollection。在这些方法中，查看是否满足 X - 如果满足，则调用基本 impl。如果没有，什么也不做。您的 AuditEventListener 将您传递给 IntegrationWithEnvers 方法。

# asp.net - 如何在 changepassword Login Control ASP.net 中允许当前密码为空或新密码为空

> ID：11498419
> 
> 赞同：1
> 
> 时间：2012-07-16T05:10:28.030
> 
> 标签：asp.net

使用 changepassword 控件更改密码时，我想将新密码设置为空白。为了支持这种情况，我从 changepassword 控件中删除了必填字段验证器并比较验证器，它仍然会触发

```
 ChangePassword1_ChangePasswordError(object sender, EventArgs e) event. 
```

我正在使用自定义会员提供程序，因此在第一次登录用户可能将他/她的密码设置为空白。在登录控制中，我已经删除了密码字段的必填字段验证器，它运行良好并验证了用户。但changepassord 控件没有。

我试过打电话

```
MembershipProvider.ChangePassword(ChangePassword1.UserName, ChangePassword1.CurrentPassword, ChangePassword1.NewPassword) 
```

从`ChangePassword1_ChangingPassword`事件。这可行，但不会进行所有验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T07:46:34.677

从反射器工具阅读代码后，我发现 ChangePassword Control 调用

```
private void AttemptChangePassword()
{
    if ((user != null) && user.ChangePassword(this.CurrentPasswordInternal,newPasswordInternal, false))
        {...}
} 
```

在上述方法中`user.ChangePassword()`，当旧密码或新密码为空或空白时返回 false。因此，为了克服这个问题，您可以扩展`MembershipUser`类和覆盖`ChangePassword`方法，如下所示。

```
public override bool ChangePassword(string oldPassword, string newPassword)
{
    return true;
} 
```

这样做时，我们可以在密码字段中传递空白密码。

# php - 只获取返回数组的一个值？

> ID：11498424
> 
> 赞同：-1
> 
> 时间：2012-07-16T05:10:57.530
> 
> 标签：php, arrays, parsing, get

我正在使用`print_r($links[1]);`将以下内容返回到页面：

```
Array
(
    [0] => lol
    [1] => this
    [2] => is
    [3] => a
    [4] => freaking
    [5] => test
) 
```

如何获取 0: "lol" 的值，并将其回显到页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:12:37.670

这很简单：

```
echo $links[1][0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:55:17.920

是的，这很简单：

```
echo $links[0]; 
```

# iphone - UIView 只嵌入在 UINavigationController 和 UITabBarController 中，为什么？

> ID：11498430
> 
> 赞同：0
> 
> 时间：2012-07-16T05:12:05.107
> 
> 标签：iphone, ios, view

在 iOS 中，为什么 UIView（和其他）只能嵌入在 UINavigationController 或 UITabBarController 中？这两个班有什么特别之处？

编辑：哎呀，想问'UIViewController'而不是UIView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:18:43.450

不，这不是真的。UIView 嵌入了 UIViewController。该类为 UIView 提供生命周期。它负责从初始化视图到解除分配视图。

UINavigationController 和 UITabBarController 只是从 UIViewController 派生的。它们分别为构建层次结构和在层次结构之间切换提供了额外的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:04:31.697

我认为您所指的嵌入是`embed in`仅允许`UITabBarController`and的菜单项`UINavigationController`。这意味着 XCode 将获取您的`UIViewController`子类并将其嵌入到这两个控制器之一中。它们是特殊的，因为它们是其他控制器的控制器（UIViewControllers 的集合）。Xcode 只是从构建视图控制器中消除了一些痛苦，然后将其添加到导航控制器或标签栏。您可以一键轻松`embed`完成其中之一，无需代码。比过去版本的 XCode 容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T05:30:08.810

UIView 可以嵌入到任何 ViewController 或其子类中。UINavigationController 和 UITabbarController 只不过是 UIViewController 的子类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T06:35:31.393

如果您在 Interface Builder 中谈论“嵌入”，是的，从 iOS 5 开始，Interface Builder 只会为三个视图控制器容器 、`UINavigationController`、`UITabbarController`和`UISplitViewController`. 这些是开箱即用的三个容器控制器。但是，您可以进行自己的视图控制器包含。有关视图控制器包含的信息，请参阅[WWDC 2011 中的第 102节。](https://developer.apple.com/videos/wwdc/2011/?id=102)[另请参阅UIViewController 类参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)中有关视图控制器包含的部分。

# android - 图像字节流操作

> ID：11498433
> 
> 赞同：1
> 
> 时间：2012-07-16T05:12:24.740
> 
> 标签：android

我有来自图像的 1Kb 字节，我可以以任何方式制作图像 b/w 的那部分吗（参考：我想在 android 中操作大图像，所以我试图通过使用字节流来制作 b/w ) 提前感谢您的宝贵时间...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:41:03.510

这不是解决方案，只是想法。将该流转换为颜色数组。您可以通过 BitmapFactory.decodeStream 方法对 Bitmap 进行解码。然后调用 bitmap.getPixels 方法获取具有颜色值的 int 数组。之后，您可以更改位图任何像素的颜色。

# android - 如何保持android猴子工具运行？即不限制事件的数量

> ID：11498434
> 
> 赞同：1
> 
> 时间：2012-07-16T05:12:26.143
> 
> 标签：android, count, monkey

我如何告诉 Android Monkey Tool 它应该为无限数量的事件运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T00:36:04.030

不幸的是，猴子的设计不适合运行无限数量的事件。

当您在猴子命令上提供参数时，它会使用这些参数来生成脚本文件，然后从文件中运行该脚本。因此，无限数量的事件将需要无限长的脚本文件。

# python - Python 中的这种赋值叫什么？a = b = 真

> ID：11498441
> 
> 赞同：44
> 
> 时间：2012-07-16T05:13:25.093
> 
> 标签：python, variable-assignment

我知道[元组拆包](http://docs.python.org/tutorial/datastructures.html#tuples-and-sequences)，但是在单行上有多个等号的情况下，这个作业叫什么？啦啦`a = b = True`

它总是让我有点不适应，尤其是当 RHS 是可变的时，但我很难找到正确的关键字来在文档中搜索。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-07-16T05:15:37.073

这是一个任务链，用来描述它的术语是……

^(- 请给我打鼓好吗？)

### *链式分配*。

* * *

我只是给它一个相当谷歌的运行，发现关于这个主题没有太多可阅读的内容，可能是因为大多数人发现它使用起来非常简单（只有真正的极客想了解更多关于这个主题的信息） .

* * *

在前面的表达式中，计算顺序可以被视为从最右边开始，`=`然后向左工作，这相当于写作：

```
b = True
a = b 
```

* * *

上面的顺序是大多数语言描述的*assignment-chain*，但 python 的做法不同。在 python 中，表达式被评估为下面的等价物，尽管它不会产生任何其他结果，而不是前面描述的结果。

```
temporary_expr_result = True

a = temporary_expr_result
b = temporary_expr_result 
```

* * *

在 stackoverflow 上可以进一步阅读：

*   **[链式作业如何工作？](https://stackoverflow.com/questions/7601823/how-do-chained-assignments-work)** [Python](/questions/tagged/python "显示标记为“python”的问题")

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-16T07:35:46.967

`dis`使用（反汇编）模块此输出进一步支持@refp 的答案：

```
>>> def a(x):
...   g = h = x
...
>>> import dis
>>> dis.dis(a)
  2           0 LOAD_FAST                0 (x)
              3 DUP_TOP
              4 STORE_FAST               1 (g)
              7 STORE_FAST               2 (h)
             10 LOAD_CONST               0 (None)
             13 RETURN_VALUE 
```

RHS 被检索和复制，然后从左到右存储到目标变量中（自己试试这个`e = f = g = h = x`）。

如果 RHS 是一个函数调用，其他一些海报会感到困惑，例如`a = b = fn()`- RHS 只评估一次，然后将结果分配给每个连续的变量。如果返回的值是可变的，例如列表或字典，这可能会导致不必要的共享。

对于那些使用的人`threading`来说，注意在多个显式赋值语句上链式赋值形式没有隐含的“原子性”是有用的——在 g 和 h 的赋值之间可能发生线程切换，另一个线程查看它们中的两个可以在两个变量中看到不同的值。

从[文档中，7.2。赋值语句](https://docs.python.org/3/reference/simple_stmts.html#assignment-statements)，作为两个*目标列表*`g`，作为*表达式*列表：`h`*`x`*

 **> ```
> assignment_stmt ::=  (target_list "=")+ (expression_list | yield_expression) 
> ```
> 
> 赋值语句计算表达式列表（请记住，这可以是单个表达式或逗号分隔的列表，后者产生一个元组）并将*单个结果对象*分配给每个目标列表，*从左到右*。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-16T06:05:04.990

好的，“链式分配”是我所追求的搜索词，但经过更多挖掘后，我认为它并不完全正确。但它比“赋值语句的特殊情况”更容易搜索。

[链接到的维基百科文章](http://en.wikipedia.org/wiki/Assignment_%28computer_science%29) [senderle](https://stackoverflow.com/users/577088/senderle)说：

> 在 Python 中，赋值语句不是表达式，因此不返回值。相反，链式赋值是一系列语句，单个表达式具有多个目标。赋值是从左到右执行的，因此`i = arr[i] = f()` 计算表达式`f()`，然后将结果分配给最左边的目标 ，`i`然后 `arr[i]`使用 的新值将相同的结果分配给下一个目标`i`。

另[一篇博文](http://pythonconquerstheuniverse.wordpress.com/2011/08/29/lambda_tutorial/#footnote2)说：

> 在 Python 中，赋值语句不返回值。链式赋值（或者更准确地说，看起来像链式赋值语句的代码）被识别和支持为赋值语句的一个特例。

这对我来说似乎是最正确的，仔细阅读[文档](http://docs.python.org/reference/simple_stmts.html#assignment-statements)- 特别是 `(target_list "=")+`- 这也说

> 赋值语句计算表达式列表 ... 并将单个结果对象从左到右分配给每个目标列表。

所以它并不是真正“从最右到左评估”——RHS被评估，然后从最左边的目标分配到右——不是我能想到任何现实世界（甚至是人为）的例子，它会做一个不同之处。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-04-16T14:55:54.533

由于我的无知，今天被python的Chained Assignment咬了。在代码中

```
if l1.val <= l2.val:
    tail = tail.next = l1 # this line 
    l1 = l1.next 
```

我所期望的是

```
tail.next = l1
tail = tail.next
# or equivalently 
# tail = l1 
```

而我在下面，它在列表中产生了一个自我循环，让我陷入无限循环，哎呀......

```
tail = l1
tail.next = l1 # now l1.next is changed to l1 itself 
```

因为对于 a = b = c，一种方式（例如 python）相当于

```
tmp = evaluate(c)
evaluate(a) = tmp
evaluate(b) = tmp 
```

并且对于两个赋值具有相等的右操作数。

另一个（例如 C++）等价于

```
evaluate(b) = evaluate(c)
evaluate(a) = evaluate(b) 
```

因为在这种情况下`a = b = c`基本上是

```
b = c
a = b 
```

并且两个右手操作数可能不同。

这就是为什么类似的代码在 C++ 中运行良好的原因。**

# java - 如何使用 Selenium WebDriver 按 Ctrl+0（零）

> ID：11498445
> 
> 赞同：1
> 
> 时间：2012-07-16T05:14:10.367
> 
> 标签：java, selenium, webdriver, virtual-keyboard

我想使用 Selenium WebDriver API 发送键 Ctrl 和零

我尝试了以下代码但无法正常工作

```
 Actions action = new Actions(driver);
        action.keyDown(Keys.CONTROL).sendKeys("F000").keyUp(Keys.CONTROL).perform(); 
```

寻求帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T21:22:07.170

这两个都对我有用：

一个不错的 WebDriver 方法

```
String ctrlZero = Keys.chord(Keys.CONTROL, "0");
driver.findElement(By.tagName("html")).sendKeys(ctrlZero); 
```

以及在更高级别上工作的纯 Java 方法：

```
Robot r = new Robot();
r.keyPress(KeyEvent.VK_CONTROL);
r.keyPress(KeyEvent.VK_0);
r.keyRelease(KeyEvent.VK_CONTROL);
r.keyRelease(KeyEvent.VK_0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:55:01.693

您需要使用 unicode 字符，我想这会起作用 -

您必须在代码中进行此更改 -

```
Actions action =new Actions(driver);
    action.keyDown(Keys.CONTROL).sendKeys(String.valueOf('\u0030')).perform(); 
```

让我知道在此更改后是否遇到任何问题。您可以在此处查看 unicode 表 - [http://unicode.org/charts/PDF/U0000.pdf](http://unicode.org/charts/PDF/U0000.pdf)

# asp.net - VS 2010 与 VS 11 中的 MVC 测试

> ID：11498446
> 
> 赞同：0
> 
> 时间：2012-07-16T05:14:19.677
> 
> 标签：asp.net, asp.net-mvc-3, unit-testing

在过去的两个月里，我一直在努力学习新的 MVC 框架。在了解了所有面向对象的概念之后，我使用 MVC3、EF4 w/ DbContext 和 ASP.Net Membership 提供程序创建了一个测试站点。一切进展顺利。然后，我决定潜入并学习测试，从单元测试开始。

在我的头撞在键盘上两周之后，我现在感到非常沮丧。我浏览了大量的视频教程（TekPub、Plural-sight）、在线教程（ASP.Net、Microsoft 等）以及大量 StackOverflow 问题/答案。我现在*有点*（哈！）了解松散耦合、依赖注入、存储库、接口、存根、模拟（是的，我多次阅读 Fowler 的文章）、Shims、lambdas、重构......这个列表还在继续（ ...等等。）。我看过 Ninject、Structuremap、Moq、TypeMock、JustMock、nUnit、xUnit 等...

所以我知道有很多方法可以给这只猫剥皮。现在我看到 VS11/MVC4 即将问世，他们有一个叫做 Fakes 的东西，这对于像 Membership 这样的静态方法来说似乎是一个不错的选择。

我的问题：

我想测试我的 MVC EF4/DbContext/Membership 应用程序。我的大多数页面都需要经过身份验证的用户 [Authorize]，而那是在我使用要测试的实际方法之前。

如果您刚刚开始（像我一样），那么测试我的 CRUD 应用程序的最简单和最简单的方法是什么？我不一定喜欢在生产端运行 DI 框架（只是另一件可能出错的事情），而且我发现压裂的事情令人困惑，因为所有人都出去了。

我可以升级到 VS11/MVC4 并尝试使用 Fakes 方法。似乎稍微简单一些，但似乎我仍然需要 EF 的所有资源库/接口。

或者你会放弃它并使用像 Selenium 这样的集成测试工具（这是我之前在基于表单的开发中必须使用的工具）？

非常感谢任何建议。对不起，如果这是一个糟糕的问题，但我希望这里有一丝曙光......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:48:19.073

对于所有版本的 mvc 或程序，其测试方式几乎相同。

您应该拥有基于接口的大部分逻辑。这将允许您分离关注点并对您需要的任何内容进行单元测试，这也将使您可以伪造（创建伪造的实现）或模拟（在运行时创建代表您想要的逻辑的类，使用 Mock 或 Rhino Mock）逻辑。

您可以在此处阅读有关基本单元测试的更多信息：

[http://msdn.microsoft.com/en-us/magazine/dd942838.aspx](http://msdn.microsoft.com/en-us/magazine/dd942838.aspx)

我也建议你看看 Steven Sanderson 有示例应用程序的书，包括大多数部分的单元测试。

[http://www.amazon.co.uk/Pro-ASP-NET-MVC-Framework-ebook/dp/B005PZ07US](http://www.amazon.co.uk/Pro-ASP-NET-MVC-Framework-ebook/dp/B005PZ07US)

这里有 MOQ 的介绍 [http://www.codeproject.com/Tips/182847/An-Introduction-to-MOQ](http://www.codeproject.com/Tips/182847/An-Introduction-to-MOQ)

您有替代方案，例如 rhino mock：

[http://ayende.com/blog](http://ayende.com/blog)

和一些例子： [http ://daysincode.blogspot.com/2012/06/examples-of-mocking-with-rhino-moq.html](http://daysincode.blogspot.com/2012/06/examples-of-mocking-with-rhino-moq.html)

当然，这里的一切都会导致：http: [//msdn.microsoft.com/en-us/magazine/ekstremalna-przerobka-asp-net--czesc6-podzial-obowiazkow.aspx](http://msdn.microsoft.com/en-us/magazine/ekstremalna-przerobka-asp-net--czesc6-podzial-obowiazkow.aspx)

# javascript - 从RequireJS开始，模块之间的通信

> ID：11498452
> 
> 赞同：2
> 
> 时间：2012-07-16T05:15:28.557
> 
> 标签：javascript, module, requirejs, mediator

我是一名 ActionScript 3 开发人员，他刚刚开始尝试构建大型 JavaScript 应用程序。所以我理解模块并且理解 AMD 是一个很好的使用模式。我阅读了 RequireJS 并实现了它。但是，我仍然不明白的是如何实现跨模块通信。我知道应该有某种调解人......我阅读了文章和帖子，但仍然无法理解如何简单地实现它。这是我的代码，简化：

**main.js**

```
require(["Player", "AssetsManager"], function (player, manager) {
    player.loadXML();
}); 
```

**播放器.js**

```
define(function () {
    function parseXml(xml)
    {
        // NOW HERE IS THE PROBLEM -- how do I call AssetsManager from here???

        AssetsManager.queueDownload($(xml).find("prop").text());
    }

    return {
        loadXML: function () {
            //FUNCTION TO LOAD THE XML HERE, WHEN LOADED CALL parseXml(xml)
        }

    }

}); 
```

**AssetsManager.js**

```
define(function () {
    var arrDownloadQueue = [];

    return {
        queueDownload: function(path) {
            arrDownloadQueue.push(path);
        }
    }
}); 
```

任何“傻瓜”帮助将不胜感激:) 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:36:11.643

要从您的另一个模块加载模块`define()`，您只需将第一个参数设置为一个数组，其中包含您的模块名称。因此，假设在您的代码中，您想要加载`Player.js`到`AssetsManager.js`中，您只需将字符串包含`Player`在数组中即可。

这是可能的，因为`define`的抽象实现等同于`require`，只是传递给的回调`define`期望返回一个值，并且它将添加一个“模块”到您可以加载的依赖项列表中。

**AssetsManager.js**

```
define(['Player'], function (player) {
    //... Your code.
}); 
```

但是，如果我可以添加它，我个人更喜欢使用`require`传递给回调的内部`define`来获取要加载的依赖项，而不是将参数传递给回调。

所以这是我的建议：

```
define(['Player'], function () {
    var player = require('Player');
}); 
```

这是因为它更符合[CommonJS](http://en.wikipedia.org/wiki/CommonJS)。

这就是`main.js`格式化为对 CommonJS 更友好的样子：

```
require(["Player", "AssetsManager"], function () {
    var player = require('Player');
    var manager = require('AssetsManager');
    player.loadXML();
}); 
```

但是 CommonJS 的做事方式只是个人喜好。我这样做的理由是，您在数组中输入依赖项名称的顺序可能随时更改，我不想同时遍历数组和参数列表。

我的另一个理由（虽然，它只是迂腐），是我来自 Node.js 的世界，模块是通过`require()`.

但这取决于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T04:57:04.950

（这将是对skizeey答案的回复，但我对此没有足够的声誉）

在不通过 require 引入 Player 的 AssetManager 依赖项的情况下解决此问题的另一种方法是传递 main.js 已有的 AssetManager 实例。实现这一点的一种方法可能是让 Player 的 loadXML 函数接受一个 AssetManager 参数，然后将其传递给 parseXml，然后使用它。另一种方法可能是让 Player 拥有一个变量来保存由 parseXml 读取的 AssetManager。它可以直接设置，也可以使用将 AssetManager 存储在变量中的函数，例如 setAssetManager。后一种方式有一个额外的考虑 - 然后您需要在调用 loadXml 之前处理未设置该变量的情况。这个概念通常被称为“依赖注入”。

需要说明的是，我不建议使用 AMD 来加载它。我只是想为您提供更多选择；也许在解决另一个问题时，这种技术可能会更方便您，或者可能会帮助其他人。:)

# iphone - cocos2d中的动画图像序列

> ID：11498453
> 
> 赞同：0
> 
> 时间：2012-07-16T05:15:36.400
> 
> 标签：iphone, cocos2d-iphone

我有这个代码来显示图像的动画

```
-(void) blink:(ccTime) delta {

    animateblink ++; //adds 1 every frame

    if (animateblink <= 6 ) {  //if we included frames to show for breaking and the current frame is less than the max number of frames to play

        if (animateblink < 6) {

      [sprite setTexture:[[CCSprite spriteWithFile:[NSString stringWithFormat:@"%@_blinkk00%i.png", baseImageName,animateblink]] texture]];

    [self unschedule:_cmd];
    [self schedule:@selector(openEyes:) interval:0.1f];

            [self schedule:@selector(moveSprite:) interval:0.1f];
}
    }
} 
```

我有 6 张类似动画的图片

```
dragonimage_blinkk001,dragonimage_blinkk002,dragonimage_blinkk003,dragonimage_blinkk004,dragonimage_blinkk005,dragonimage_blinkk006 like that 
```

我放了两种方法，1：用于动画时间 2：用于图像的移动

代码是

```
-(void) openEyes:(ccTime) delta {

    [sprite setTexture:[[CCSprite spriteWithFile:[NSString stringWithFormat:@"%@.png", baseImageName]] texture]];

    [self unschedule:_cmd];

    int blinkInterval = (arc4random() % 6) + 1; // range 3 to 8
    [self schedule:@selector(blink:) interval:blinkInterval];
}

-(void)moveSprite:(ccTime)delta

{
    movementCounter ++;
    if (movementCounter == 1000) {
        [self unschedule:_cmd];
    }
    else
    {
        spriteimagename.position = ccp(spriteimagename.position.x+10,spriteimagename.position.y);
    }
} 
```

但是第一种方法动画时间不正确，动画有很多延迟，我只想随机快速地显示图像的动画，它是龙飞动画。

我的第二个方法根本不起作用，我没有得到该图像的任何移动。

我希望你能理解我的问题。如何解决上述两个方法问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:33:02.037

快速解决方案是在 cocos2d CCSpriteFrame 类中添加 frameIndex 成员。我不知道是否允许更改。但它工作正常。

```
@interface CCSpriteFrame : NSObject <NSCopying>
{
        int          frameIndex;
        ....
} 
```

//这里在代码中初始化具有唯一索引的帧

```
CCAnimation* animation;

    NSMutableArray *animFrames2 = [NSMutableArray array];
    for( int i=1;i<=15;i++)
    {
        CCSpriteFrame *frame = [cache spriteFrameByName:[NSString stringWithFormat:@"ActerSmash_%d.png",i]];
        frame.frameIndex = (int)i;
        [animFrames2 addObject:frame];
    }
    animation = [CCAnimation animationWithFrames:animFrames2];

    CCAnimate *action = [CCAnimate actionWithDuration:ACTER_SMASH_SPEED animation:animation restoreOriginalFrame:YES];
    action.tag = kTagAnimationSmashAnim ;
    mActer.AnimSmash = action; 
```

//检查帧索引

```
 CCAnimate *anim = mActer.AnimSmash ;

    for(CCSpriteFrame *frame in anim.animation.frames)
    {
      if([mActer isFrameDisplayed:frame] )  )
            {
                if(frame.frameIndex == 5 )
                {
                    //Do something..
                }
            }
    } 
```

# javascript - 这种声明的方式对我们有什么帮助？

> ID：11498456
> 
> 赞同：-3
> 
> 时间：2012-07-16T05:15:48.523
> 
> 标签：javascript, jquery

我看到现在流行一个变量声明，

声明是：

```
var object = object || {};

var array = array || [];

var number = number || 20 
```

像这样。我认为，它正在使用捕获数据。但这是唯一的用途吗？或者这有什么进一步的进展吗？否则我们需要总是这样声明变量吗？任何人都可以解释我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T05:20:01.313

它用于设置变量的默认值。

```
var object = object || {}; 
```

和

```
if (object) {
  var object = object;
} else {
  var object = {};
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T05:19:09.283

如果已经设置了变量，则这样做，它将采用其当前值，否则为默认值。在您提供的示例中，空对象、空数组或 20 个。这样，如果您尝试使用不存在的变量，您的代码就不会中断。

# php - 有人找到 Dreamweaver 代码折叠插件吗？

> ID：11498458
> 
> 赞同：0
> 
> 时间：2012-07-16T05:15:53.140
> 
> 标签：php, plugins, dreamweaver

我一直在寻找一个用于 Dreamweaver 的插件，该插件会自动添加代码折叠标记以进行 PHP 编辑，但我没有想出任何东西。

我想知道是否有人找到了类似的东西，或者我是否可以编写自己的插件？我以前从未为 Dreamweaver 做过，所以我不知道这样的事情是否可行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:21:08.760

Dreamweaver 已经具备该功能。只需选择要折叠的行，然后按`-`左侧的符号（在行号上），它将折叠该区域。

# iphone - 重复符号_OBJC_METACLASS_$_SBJsonParser

> ID：11498462
> 
> 赞同：0
> 
> 时间：2012-07-16T05:16:16.543
> 
> 标签：iphone, ios, facebook

我刚刚将 AWSIOSSDK.framework 和 Facebook SDK 一起包含在我的项目中，然后出现构建错误：

> ld：在 /Users/tom8/Desktop/site1/site1/facebook-ios-sdk/libfacebook_ios_sdk.a(SBJsonParser.o) 和 /Users/tom8/Desktop/AWSiOSSDK.framework/AWSiOSSDK(SBJsonParser.o) 中重复符号 _OBJC_METACLASS_$_SBJsonParser ) 对于架构 i386

我使用 iOS Facebook SDK 静态库，所以我不能简单地删除 facebooksdk 文件夹中的 sbjson 文件。我还尝试删除 AWSIOSSDK 文件夹中的 sbjson 文件，但它也不起作用。有人可以给我一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:21:36.670

几乎无一例外，当我得到重复的符号构建错误时，这是​​因为我从其他 .h 文件中#include-ing .h 文件过多。解决方案几乎总是这两个简单的步骤：

1.  将尽可能多的#include 指令移动到 .m 文件中
2.  在 .h 文件中使用 @protocol 和 @class 前向声明。

*您需要*从 .h 中#include .h的*唯一*情况是您实际扩展类或实现协议时。如果您只需要在签名中使用类名或协议名，请使用前向声明并将#include 移动到 .m 文件中。

 ***例子：**

foo.h

```
#include "Bar.h"
#include "BazProtocol.h"
#include "BarDelegateProtocol.h"
@interface Foo:NSObject <BarDelegate>
@property (strong, nonatomic) id<Baz> myBaz;
@property (strong, nonatomic) Bar *myBar;
@end 
```

变成

```
#include "BarDelegateProtocol.h"
@class Bar;
@protocol Baz;

@interface Foo:NSObject
@property (strong, nonatomic) id<Baz> myBaz;
@property (strong, nonatomic) Bar *myBar;
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T18:22:24.470

我也有同样的问题。您可以从 Facebook 项目本身删除文件，但不能从框架中删除。

所以点击：

facebook-ios-sdk.xcodeproj（打开文件内容）-> FBConnect（查看文件夹内容）-> JSON（查看文件夹内容）-> 删除 SBJsonWriter 和 SBJsonParser。

尝试编译。你应该很高兴去！

伊娃*

# django - django on apache - 管理页面链接可见但不可点击

> ID：11498466
> 
> 赞同：3
> 
> 时间：2012-07-16T05:16:43.057
> 
> 标签：django, apache, django-models, django-admin

我刚刚部署了一个 django 站点，在将我的 DEBUG 变量的值更改为“False”后，我的管理页面链接从活动链接变为简单文本。

尝试直接访问我所知道*的*URL 会导致“TemplateDoesNotExist”。

我确信这不是 Apache 的权限问题，我觉得这与我的管理员配置有关，尽管我不知道是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T05:46:03.470

我想到了。这是任何可能发现自己遇到此问题的人的参考。

我正在使用一种必须不推荐使用的方法来定义我的 Admin 模型 - 我将它们全部放在*models.py*中，而不是为每个应用程序创建单独的*admin.py文件。*

在学习 django 时，有很多教程可以推荐或提供使用这种方法的示例。显然这不再是一个好主意（至少从 Django 1.4 开始不是）。它可能会与一些模板黑客合作，但遵循最新的约定并创建*admin.py*文件可能更干净，而且绝对更简单。

我以为我只是通过“暂时”将它们全部塞进一个文件来节省时间，但是没有一些神奇的仅调试模板加载，这个解决方案失败了。

希望这可以节省一些人的挫败感！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-11T15:31:49.497

我知道这个问题已经解决了。

但就我而言，从 django 1.7 到运行 django 1.6 的服务器，我必须添加

```
admin.auto_discover() 
```

到我的 urls.py。

好吧，我已将此行添加到 urls.py 的末尾，而 django admin 是所有字符！将其移动到文件的顶部，高于 的定义`urlpatterns`，解决了这个问题。

希望这可以帮助 ：）

# ruby-on-rails - Ruby Gem“Databasedotcom”相同的对象问题

> ID：11498467
> 
> 赞同：0
> 
> 时间：2012-07-16T05:16:58.663
> 
> 标签：ruby-on-rails, rubygems, databasedotcom-gem

我正在使用 Ruby Gem“Databasedotcom”将 Salesforce 集成到 Rails 应用程序中，一切正常，但我现在面临 Rails 应用程序和 Salesforce 中对象名称相同的问题。

我的 Rails 应用程序中有一个用户模型，并且用户对象也在 Salesforce 中。因此，当尝试从 Salesforce 用户对象获取数据时，它总是返回 Rails 应用程序用户对象。

这是我的代码

```
client = Databasedotcom::Client.new
client.client_id      #=> foo
client.client_secret  #=> bar

client.authenticate :username => "foo@bar.com", :password => "ThePasswordTheSecurityToken"  #=> "the-oauth-token"

client.materialize("User");

@user = User.find_by_Id('005d0000001291x'); 
```

但上面的语句总是使用 Rails 中的 User 模型。

我想使用 Salesforce 用户对象来获取它的数据。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T05:27:23.430

首先将您的 SF 代码封装在一个模块中，如下所示：

```
module SF
  module Connection          
    def self.client
      @client = Databasedotcom::Client.new("config/salesforce.yml")
      @client.authenticate :username => SF_CONFIG['username'], :password => SF_CONFIG['password_with_token']
      @client
    end
  end
end 
```

并在您指定要与`sobject_module`参数一起使用的模块的位置创建初始化程序：

配置/salesforce.yml：

```
username: username
password_with_token: token
client_secret: secret
client_id: cliend_id
sobject_module : SF 
```

将初始化程序添加到配置/初始化程序：

销售人员.rb：

```
SF_CONFIG = YAML.load_file('config/salesforce.yml') rescue nil 
```

现在您可以在 SF 模块中使用用户，它将是 SF 用户，而不是您的 AR 用户。

而且我强烈建议您阅读文档，有很多方法可以帮助您使 SF 代码更清晰： [http ://rubydoc.info/github/heroku/databasedotcom/master/frames](http://rubydoc.info/github/heroku/databasedotcom/master/frames)

祝顺丰顺利！

# jquery-ui - ajax形式的jquery datepicker不可编辑

> ID：11498469
> 
> 赞同：0
> 
> 时间：2012-07-16T05:18:09.690
> 
> 标签：jquery-ui, jquery

我在 jquery 对话框中使用 datepicker。添加值时它工作正常，但在编辑时它不接受新值

这是我的代码

```
 var edtdlg = $("#editDialog").html(html);

                $(".dob", edtdlg).datepicker({
                    dateFormat : "dd MM yy",
                    changeMonth : true,
                    changeYear : true
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:01:50.223

编辑表单实际上是一个 jsrender 模板，因此一旦模板在 edit() 函数中编译，我需要添加一个单独的日期选择器。

在 edit() 函数日期选择器中选择的数据被添加到 add() 函数使用的网格的全局日期选择器中。将全局日期选择器放在 add() 函数中后，它工作正常:)

# android - 如何将名称设置为用户在 Android 的编辑文本中输入的表格

> ID：11498472
> 
> 赞同：-4
> 
> 时间：2012-07-16T05:18:17.090
> 
> 标签：android

我是安卓新手。在我的项目中，我想将 Table 的名称设置为用户在另一个**Activity**的编辑文本中输入的名称。有人可以帮我解决这个问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:24:55.530

只需从edittext中检索文本，然后将其转换为字符串..然后将其附加到表创建语句并完成。

此外，要将这些信息从一个活动传递到另一个活动，您需要传入表名和意图，然后使用意图中的数据并将其用于上述创建语句。

# javascript - Javascript Array Sort() 前后索引

> ID：11498474
> 
> 赞同：0
> 
> 时间：2012-07-16T05:18:21.497
> 
> 标签：javascript, arrays, sorting, indexing

我有一个对象索引：

```
indexArray = [
    {obj 1},
    {obj 2},
    ...
    {obj n}
]; 
```

我对其应用了排序算法， indexArray 最终被混淆了：

```
indexArray = [
    {obj 77},
    {obj 36},
    ...
    {obj 8}
]; 
```

如果原始数组中有一个元素，我想跟踪它的索引前后。例如，obj 36 在排序前位于 index[35]，新索引为 index[1]。我将如何确定新索引。

我可以在排序之前保留临时变量中的元素/obj36，然后在排序之后询问 indexArray obj36 的当前索引吗？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:25:49.903

是的，使用一个临时变量来引用它，然后在排序的数组中查找它就可以了。如果该方法可用，您可以使用该`Array.prototype.indexOf`方法，或者只是循环查找它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:29:18.170

你可以这样做：

*   创建数组。
*   将其复制到另一个数组。
*   对原始的进行排序。
*   在 unsorted 中搜索 sorted 的 item 的出现。

看一看：

```
// original array of objects
var a = [{
    n: 5
}, {
    n: 3
}, {
    n: 7
}, {
    n: 1
}];

// create a copy of the original (concats the original with a empty one)
var b = a.concat([]);

// sorting
a.sort( function( left, right ) {
    return left.n - right.n;
});

// print a values
for ( var i in a ) {
    console.log( a[i].n );
}

// print b values
for ( var i in b ) {
    console.log( b[i].n );
}

// searching...
for ( var i in a ) {
    console.log( "value: " + a[i].n +
                 " original index: " + b.indexOf(a[i]) +
                 " current index: " + i );
} 
```

[在这里](http://www.w3schools.com/jsref/jsref_obj_array.asp)查看有关数组函数的一些信息。

# iphone - iPhone中的NSXML解析器

> ID：11498475
> 
> 赞同：-2
> 
> 时间：2012-07-16T05:18:37.293
> 
> 标签：iphone, objective-c, xml-parsing, nsxmlparser

我需要获取以下 xml 的值，我正在使用 NSXML 解析器来解析它

```
<boolean xmlns="http://schemas.microsoft.com/2003/10/Serialization/">true</boolean> 
```

我需要从上面的 xml 中获取“真实”值。

我应该在 NSXML 解析器委托方法中做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:26:44.797

如果您想要真正的价值，请执行以下操作：

```
 - (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
    {
        strVal=string;
    }

    - (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
    {
        if([elementName isEqualToString:@"boolean"])
       {
          //you can get 'true' value here
       }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:31:39.823

```
#import "XMLParser.h"

@implementation XMLParser

- (NSString *)parseXMLFile: (NSURL *) url
{   
    outstring = [[NSMutableString alloc] init];

        NSXMLParser *parser = [[NSXMLParser alloc] initWithContentsOfURL: url];

        [parser setDelegate: self];
    [parser parse];
        [parser release];

    return [outstring autorelease];
}

//<boolean xmlns="http://schemas.microsoft.com/2003/10/Serialization/">true</boolean>

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName 
                                              namespaceURI:(NSString *)namespaceURI 
                          qualifiedName:(NSString *)qName 
                          attributes:(NSDictionary *)attributeDict   
{
        if (qName) elementName = qName;
    if (elementName) current = [NSString stringWithString:elementName];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
                         namespaceURI:(NSString *)namespaceURI 
                         qualifiedName:(NSString *)qName
{
    current = nil;
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if (!current) return;
    if ([current isEqualToString:@"boolean"]) 
        [outstring appendFormat:@"%@\n", string];
}

//  <boolean xmlns="http://schemas.microsoft.com/2003/10/Serialization/">true</boolean>

-(void) parserDidStartDocument:(NSXMLParser *)parser {
    NSLog(@"parserDidStartDocument");   
}

-(void) parserDidEndDocument: (NSXMLParser *)parser {
    NSLog(@"parserDidEndDocument %@", outstring);   
}
@end 
```

[有关 nsxml 解析参考站点的更多详细信息，请单击此处。](http://homepages.ius.edu/rwisman/C490/html/nsxmlparser.htm)

这可能对你更有帮助。

# javascript - CKEditor 实体在编辑器显示中转换为 HTML

> ID：11498477
> 
> 赞同：2
> 
> 时间：2012-07-16T05:18:47.103
> 
> 标签：javascript, ckeditor

如果我在页面加载时有一个包含以下内容的文本区域：

```
<h1>Hello</h1>
<p>&lt;h1&gt;Hello world&lt;/h1&gt;</p> 
```

我将 CKEditor 应用于 textarea，CKEditor 将内容呈现为好像两行都是 h1 元素，即使其中一个是包裹在段落中的实体。

为了清楚起见，我希望看到的是：

* * *

# 你好

`<h1>Hello world</h1>`

* * *

我实际得到的是：

* * *

# 你好

# 你好世界

* * *

奇怪的是，如果我`<h1>Hello world</h1>`在编辑器中输入，它将在源代码中生成实体编码字符串并按预期显示（打印以显示为输入）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T08:21:34.270

那是因为即使在 textarea 中，您也必须对 HTML 进行编码。所以实际上你应该将它的内容设置为：

```
&lt;h1&gt;Hello&lt;/h1&gt;
&lt;p&gt;&amp;lt;h1&amp;gt;Hello world&amp;lt;/h1&amp;gt;&lt;/p&gt; 
```

如您所见 - Hello world 标头被编码两次。

# sql - 与 NOT IN 一起使用的 DISTINCT 或 GROUP BY 返回错误的结果

> ID：11498478
> 
> 赞同：2
> 
> 时间：2012-07-16T05:18:57.587
> 
> 标签：sql, drupal, drupal-7

我有两个表
用户列：uid、名称、邮件等
users_roles 列：uid、rid

在 users_roles 中，每次向用户添加角色时，都会在 users_roles 表中列出该角色。因此，假设用户 1 具有角色 1 和 4。在表中：

```
users_roles:  
uid | rid  
 1  |  1  
 1  |  4 
```

我需要返回所有不具有角色 4 或 5 的用户。我尝试将 Group By 和 Distinct 与 NOT IN 结合使用。我一直遇到的问题是，如果用户同时具有角色 1 和 4，它们将在结果中返回。以下是我的 Group By 查询示例：

```
SELECT *
FROM users AS u
LEFT JOIN users_roles AS ur ON u.uid = ur.uid
WHERE ur.rid NOT
IN ( 4, 5 )
GROUP BY ur.uid 
```

我也尝试过子查询无济于事，因为问题似乎是 Group By 在完成查询后合并了行。因此，它只是找到包含 uid 1 rid 4 的记录并在结果中返回它。

我无法使用的 Drupal 模块 Views（由于 Views Bulk Operations 的安全问题）通过执行以下操作实现了预期的结果：

```
LEFT JOIN users_roles ON users.uid = users_roles.uid 
AND (users_roles.rid = '4' OR users_roles.rid = '5') 
```

对于长期维护，我不想在每次添加角色时都更新代码，这将导致一个长查询。

我查看了以下内容：
[Aggregating Rows](https://stackoverflow.com/a/4768499)
[Filtering distinct rows in SQL](https://stackoverflow.com/questions/10796468/filtering-distinct-rows-in-sql)

虽然有 Drupal 函数可以让我获得角色 id 列表，我可以在其中取消设置我不希望出现在结果数组中的角色，但我觉得我缺少对 SQL 的基本理解。有没有更好的方法在 SQL 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:30:10.060

> 我需要返回所有没有角色 4 和 5 的用户

```
select  *
from    users u
where   not exists
        (
        select  *
        from    users_roles ur
        where   ur.rid in (4,5)
                and ur.uid = u.uid
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:04:03.093

如果您想检查 4 和 5 不存在（不一定是其中之一），您可以使用

```
select  * 
from    users u 
where   not exists 
        ( 
        select  uid
        from    users_roles ur 
        where   ur.rid in (4,5)     
                and ur.uid = u.uid 
    group by uid having count(distinct rid)=2
        ) 
```

如果列表很长，您可以使用包含所有可能值的映射表并在上述查询中使用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:56:48.580

我想要这样：

```
SELECT *
FROM users AS u
LEFT JOIN users_roles AS ur ON (u.uid = ur.uid AND ur.rid IN ( 4, 5 ) )
WHERE ur.rid IS NULL
GROUP BY u.uid 
```

# iphone - 在滑动时更改图像的 X 和 Y 位置以进行拼贴

> ID：11498482
> 
> 赞同：-1
> 
> 时间：2012-07-16T05:19:13.013
> 
> 标签：iphone, objective-c, ios, xcode, ios5

我正在参考这个应用程序的屁股参考，我想制作拼贴画，我可以通过滑动下面给出的滑块来增加图像的 XY 位置。我怎样才能实现这个功能。？

![参考图像](../Images/741d10707b8f1d06c6cb5674bdb2fd37.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:38:38.157

你可以这样做：在界面中声明 uiimageview 实例：

```
@interface myViewController
{
    UIImageView *myImage;
} 
```

或者通过 xib 文件添加它。然后加

```
-(IBAction) sliderChanged:(id) sender; 
```

到 h.file 并实现它：

```
-(IBAction) sliderChanged:(id) sender
{
     UISlider *slider = (UISlider *) sender;
     int scaleFactor =(int)(slider.value + 0.5f);

     CGAffineTransform scale = CGAffineTransformMakeScale(scaleFactor, scaleFactor); // example
     myImage.transform = scale;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:46:14.973

```
@interface myViewController
{
    IBOutlet UIIMageView *myImage;
    IBOutlet UISlider *slider1;
    IBOutlet UISlider *slider2;
}
- (void)viewDidLoad{
   slider1.tag=101;
   slider2.tag=102;
}
-(IBAction) sliderChanged:(UISlider*) sender
{
     int x,y;

  switch (sender.tag) {
        case 101:
           x=(int)(slider1.value + 0.5f);
            break;
         case 102:
           y=(int)(slider2.value + 0.5f);
            break;
        default:
            break;
    }
     CGAffineTransform scale = CGAffineTransformMakeScale(x, y); 
     myImage.transform = scale;
} 
```

祝你好运！！！

# wix - Wix：如果定义变量包含特殊字符，则条件字符串错误

> ID：11498484
> 
> 赞同：1
> 
> 时间：2012-07-16T05:19:17.957
> 
> 标签：wix

当定义变量包含@，-等特殊字符时，现在这个变量在比较条件中使用，然后给出“Bad conditional string”错误。并且此条件用于在自定义对话框中发布新对话框。

示例代码：

```
<?define Key="test@key"?>

<Control Id="LicenseKey" Type="Edit" Password="yes" X="20" Y="139" Width="320" Height="15" Property="Keytext" />

<Control Id="Next" Type="PushButton" X="236" Y="243" Width="56" Height="17" Default="yes" Text="Next">
     <Publish Event="SpawnDialog" Value="CheckKey" Order="2"><![CDATA[Keytext <> $(var.Key)]]></Publish>
</Control> 
```

那么谁能告诉我如何解决这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T06:34:59.097

如果我理解正确，`var.Key`您传递的值包含一些特殊字符。我想你应该`$(var.Key)`用引号括起来这个被假定为一个值，像这样：

```
<Publish Event="SpawnDialog" Value="CheckKey" Order="2"><![CDATA[Keytext <> "$(var.Key)"]]></Publish> 
```

# session - PHP 中的 session.auto_start 有缺点吗？

> ID：11498486
> 
> 赞同：6
> 
> 时间：2012-07-16T05:19:25.123
> 
> 标签：session, php

我通常最终添加`session_start()`到我的 PHP 站点上每个页面的顶部（或在每个页面上依次包含的头文件中）。我最近发现您可以使用以下设置自动启动会话`php.ini`：

`session.auto_start = 1`

使用此设置的潜在缺点是什么（如果有）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T05:35:23.593

> 如果您打开**[session.auto_start](http://php.net/manual/en/session.configuration.php#ini.session.auto-start)**那么将对象放入会话的唯一方法是使用 auto_prepend_file 加载其类定义，您将在其中加载类定义，否则您将不得不**[序列化（）](http://php.net/manual/en/function.serialize.php)**您的对象并在之后**[取消序列化（）](http://php.net/manual/en/function.unserialize.php)**它。[见](http://php.net/manual/en/intro.session.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-29T16:38:20.423

也许这有帮助。如果在页面加载时没有创建会话，它将创建一个会话。

```
if(!isset($_SESSION)): session_start();endif; 
```

如果要开始特定会话，请使用以下内容：

```
if(!isset($_SESSION['your_session'])){             
            $data = array('default data');
            $_SESSION['your_session']=$data;
        } 
```

# symfony - symfony2：将主题应用于集合类型的单个字段

> ID：11498487
> 
> 赞同：4
> 
> 时间：2012-07-16T05:19:39.647
> 
> 标签：symfony, symfony-forms

只需将主题应用于表单字段很容易，例如：

```
{% form_theme form _self %}

{% block _product_name_widget %}
    {{ block('field_widget') }}
{% endblock %} 
```

但是如果表单域是集合类型呢？例如： `product['models'][1][comment`，我不知道如何自定义它。（这可能是这里的第一个问题）

**更新：**此处的回答者：[Symfony2：带有数据原型的集合表单字段类型](https://stackoverflow.com/questions/8488831/symfony2-collection-form-field-type-with-data-prototype)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T11:03:41.980

从 Symfony 2.1 开始（它可能也适用于 2.0，但不确定）应用主题来收集你这样做：

假设我们有一个产品集合（我们有多个产品实体）

控制器：

```
 $repository = $this->getDoctrine()->getRepository('ExampleBundle:Product');
    $products = $repository->findAll();

    $productCollection = new Products;

    foreach ($products as $product) {
        $productCollection->getProducts()->add($product);
    }

    $collection = $this->createForm(new ProductsType, $productCollection);

    return $this->render('ExampleBundle:Default:index.html.twig', array(
        'collection' => $collection->createView()
            )); 
```

您的主题可能如下所示：

```
{% block _productsType_products_entry_name_row %}
    <div class="yourDivName">{{ block('form_widget') }}</div>
{% endblock %}
{% block _productsType_products_entry_description_row %}
    <div class="yourDivDescription">{{ block('form_widget') }}</div>
{% endblock %} 
```

诀窍是使用“条目”，其中 twig 将为您完成对每一行和您指定的每个字段的上述更改

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:01:56.870

您可以使用覆盖 collection_widget 块：

```
{% block collection_widget %}
{% spaceless %}
    {% if prototype is defined %}
        {% set attr = attr|merge({'data-prototype': form_row(prototype) }) %}
    {% endif %}
    {{ block('form_widget') }}
{% endspaceless %}
{% endblock collection_widget %} 
```

如果您想如何自定义表单集合类型，请尝试查看此[产品包](https://github.com/khepin/ProductBundle)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-19T05:44:40.787

您也可以通过引用这样的小部件来覆盖`collection_widget`单个字段的主题。

例如，如果“类别”是`ProductType`表单上的“集合”小部件，您可以这样做。

```
{% block _product_categories_widget %}
    {% for child in form %}
        {{- form_row(child) -}}
        <hr>
    {% endfor %}
{% endblock %} 
```

# ruby - Vim 中的自动完成方法结构

> ID：11498492
> 
> 赞同：3
> 
> 时间：2012-07-16T05:20:15.047
> 
> 标签：ruby, vim

有谁知道是否有办法在 Vim 中自动完成方法？对于 Ruby 中的示例，如果我键入：

```
def my_method 
```

然后按 Enter 键，它将填写`end`并将光标移动到 x 所在的位置：

```
def my_method
  x
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T05:28:48.887

[vim-endwise](https://github.com/tpope/vim-endwise)这样做（我已经很高兴不卸载它，所以我想这甚至是一种认可）。

# java - 具有任意 JSON 键的 Jackson ObjectMapper

> ID：11498499
> 
> 赞同：16
> 
> 时间：2012-07-16T05:21:24.057
> 
> 标签：java, android, json, jackson, android-assets

我在一个 Android 项目中使用 Jackson 1.9.5 来解析 JSON 文件。

到目前为止，我还没有遇到任何问题，并且可以使用以下代码很好地解析文件：

```
AssetManager mgr = getAssets();
ObjectMapper mapper = new ObjectMapper();

try {
    InputStream ifp = mgr.open("detail_schema.json");
    schema = mapper.readValue(ifp, DetailSchema.class);
} catch (IOException e) {
    e.printStackTrace();
} 
```

其中 DetailSchema 类由原始类型和类的混合组成。我现在遇到了一个问题，我想解析一些 JSON，如下所示：

```
"fields": {
    "Suburb": "Paddington",
    "State": "NSW",
    "Post Code": "2074",
    "Lollipop": "Foo Bar Haz"
} 
```

我不可能事先知道地图键（它们可以是用户定义的）。因此，我不确定相关的 Java 类应该是什么样子。

即，对于这个例子，它可能看起来像：

```
public class MyClass {

    public String Suburb;
    public String State;
    public String PostCode;
    public String Lollipop;

} 
```

但这对于 JSON 文件的另一个实例可能不正确。理想情况下，我需要一些方法让 Jackson 将值映射到[NameValuePair 之](http://docs.oracle.com/javase/1.5.0/docs/api/org/omg/DynamicAny/NameValuePair.html)类的东西。我怀疑在这种情况下自动对象映射可能不是一个选项 - 有人可以确认或否认这一点吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-16T05:33:55.877

你有两个选择。您可以[在 ObjectMapper 中使用 readTree](https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html#readTree(java.io.InputStream))，它返回一个[JsonNode](https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/JsonNode.html)。使用 a`JsonNode`很像使用树，因此您可以获取子节点、读取值等：

```
InputStream ifp = mgr.open("detail_schema.json");
JsonNode root = mapper.readTree(ifp);
JsonNode fields = root.get("fields");
for (JsonNode children : fields) {
    // ...
} 
```

然后你需要`DetailSchema`手动构建你的对象。

或者，您可以让 Jackson 将其反序列化为`Map`，在这种情况下，您将使用您的代码，但在哪里`MyClass`会是这样的：

```
public class MyClass {
    public Map<String, Object> fields;

    // getter/setters
} 
```

`String`如果您确定输入是 json 中的文本，您也可以键入地图值。（实际上，我不确定杰克逊的执法类型，也许它无论如何都会允许任何事情......）

# wpf - WPF图中是否可以有独立的多个轴？

> ID：11498503
> 
> 赞同：1
> 
> 时间：2012-07-16T05:21:41.320
> 
> 标签：wpf, graph, open-source, wpftoolkit, dynamic-data-display

科学图中的每个系列都有**独立的多个**轴是非常常见的情况。

要求是，

图表可以有多个系列。每个系列都与单独的 Y 轴和一个 X 轴（时间）相关联。

例如，Y1 轴显示温度，Y2 轴在 X 轴上显示压力与时间的关系。

两个轴都可能显示不同的比例（范围最小值 - 最大值），例如从 0 到 100 开氏度的温度和从 300 到 900 kPa 的压力，因此将绘制系列。

我正在寻找可以提供此功能的开源控件或免费软件。

我正在尝试使用 WPF 来绘制图形并为此研究 WPF Tookit 和[动态数据显示](http://dynamicdatadisplay.codeplex.com/)。

请查看[多轴的 FLOT 示例](http://people.iola.dk/olau/flot/examples/interacting-axes.html)。我想要 WPF 中的这个功能。

但我无法在这些控件中找到**独立**多轴的功能。

请帮忙，否则我不得不放弃使用 WPF 的想法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:03:05.807

就动态数据显示而言，我知道很可能实现您正在寻找的内容。您始终可以创建一个新的轴对象并将其添加到绘图仪的子级中。然后，您可以自由地交互和映射每个轴。D3 中操作的关键是映射，因此如果您有两个不同的数据源，您可以将它们绘制在同一个图表上，具体取决于您将它们映射到的轴以及映射它们的方式。动态数据显示应该符合您的要求。

# http-headers - 删除 HTTP 标头“服务器”。在 IIS 6 中

> ID：11498506
> 
> 赞同：1
> 
> 时间：2012-07-16T05:22:09.503
> 
> 标签：http-headers, iis-6

我正在使用带有 IIS6 的 VS 2008。我想从 Http 标头“服务器”中删除服务器标记。我在 Global.asax 中使用了以下代码。

```
void Application_PreSendRequestHeaders(object src, EventArgs e)
{
        HttpContext.Current.Response.Headers.Remove("Server");
} 
```

它显示错误“对象引用未设置为对象的实例”。我该如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:58:29.523

以下是对我有用的步骤（对于 IIS6）：

1.  在网络服务器上下载并安装[UrlScan 2.5](http://www.microsoft.com/en-us/download/details.aspx?id=12719)
2.  打开 UrlScan 配置文件 (%windir%\system32\inetsrv\urlscan\urlscan.ini)
3.  找到 RemoveServerHeader 行并将值设置为 1（应为 RemoveServerHeader=1）
4.  重置 IIS 并测试标头是否消失

仅作记录......如果您升级到 IIS 7（集成管道模式），您可以使用自定义 HttpModule 的代码来实现这一点。

祝你好运！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T16:35:07.227

看看这里的答案：[https](https://stackoverflow.com/a/12804722/2074016) ://stackoverflow.com/a/12804722/2074016 。它具有额外的错误处理，可以修复您的错误：

```
protected void Application_PreSendRequestHeaders(object sender, EventArgs e)
{
    // Remove the "Server" HTTP Header from response
    HttpApplication app = sender as HttpApplication;
    if (null != app && null != app.Request && !app.Request.IsLocal &&
        null != app.Context && null != app.Context.Response)
    {
        NameValueCollection headers = app.Context.Response.Headers;
        if (null != headers)
        {
            headers.Remove("Server");
        }
    }
} 
```

# apache-zookeeper - Zookeeper - 三个节点，只有错误

> ID：11498507
> 
> 赞同：20
> 
> 时间：2012-07-16T05:22:23.760
> 
> 标签：apache-zookeeper

我有三个动物园管理员节点。所有端口都是开放的。ip地址是正确的。下面是我的配置文件。由厨师引导的所有节点都具有相同的安装和配置文件。

```
# The number of milliseconds of each tick
tickTime=3000
# The number of ticks that the initial
# synchronization phase can take
initLimit=10
# The number of ticks that can pass between
# sending a request and getting an acknowledgement
syncLimit=5
# the directory where the snapshot is stored.
dataDir=/var/lib/zookeeper
# Place the dataLogDir to a separate physical disc for better performance
# dataLogDir=/disk2/zookeeper

# the port at which the clients will connect
clientPort=2181

server.1=111.111.111:2888:3888
server.2=111.111.112:2888:3888
server.3=111.111.113:2888:3888 
```

这是其中一个节点的错误。所以......我对如何得到错误感到很困惑，因为配置相当普通。所有三个节点都在做同样的事情。

```
2012-07-16 05:16:57,558 - INFO  [main:QuorumPeerConfig@90] - Reading configuration from: /etc/zookeeper/conf/zoo.cfg
2012-07-16 05:16:57,567 - INFO  [main:QuorumPeerConfig@310] - Defaulting to majority quorums
2012-07-16 05:16:57,572 - FATAL [main:QuorumPeerMain@83] - Invalid config, exiting abnormally
org.apache.zookeeper.server.quorum.QuorumPeerConfig$ConfigException: Error processing /etc/zookeeper/conf/zoo.cfg
    at org.apache.zookeeper.server.quorum.QuorumPeerConfig.parse(QuorumPeerConfig.java:110)
    at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:99)
    at org.apache.zookeeper.server.quorum.QuorumPeerMain.main(QuorumPeerMain.java:76)
Caused by: java.lang.IllegalArgumentException: serverid replace this text with the cluster-unique zookeeper's instance id (1-255) is not a number
    at org.apache.zookeeper.server.quorum.QuorumPeerConfig.parseProperties(QuorumPeerConfig.java:333)
    at org.apache.zookeeper.server.quorum.QuorumPeerConfig.parse(QuorumPeerConfig.java:106)
    ... 2 more 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-16T05:36:31.217

您需要创建一个名为 myid 的文件并将其放入 zookeeper var 目录，每个服务器一个，由一行组成，仅包含该机器 id 的文本。因此，服务器 1 的 myid 将包含文本“1”，仅此而已。id 在整体中​​必须是唯一的，并且应该具有介于 1 和 255 之间的值。

更多信息请访问[http://zookeeper.apache.org/doc/r3.3.3/zookeeperAdmin.html#sc_zkMulitServerSetup](http://zookeeper.apache.org/doc/r3.3.3/zookeeperAdmin.html#sc_zkMulitServerSetup)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-07T14:56:11.627

```
server.1=111.111.111:2888:3888
server.2=111.111.112:2888:3888
server.3=111.111.113:2888:3888 
```

你的服务器和IP是

然后在目录（dataDir=/var/lib/zookeeper）下的111.111.111和2在111.111.111.112和111.111.111.113服务器中的每个节点上创建myid文件。

如果您将值“1” myid 文件设置为带有任何扩展名的 myid 文件，您将获得数字格式异常和“无效配置，异常退出”。

因此，只需创建不带任何扩展名的 myid 文件，并将整数值 1、2、3 放在相应的服务器中，不带双引号

# sockets - socket.emit() 与 socket.send()

> ID：11498508
> 
> 赞同：158
> 
> 时间：2012-07-16T05:22:29.953
> 
> 标签：sockets, node.js, socket.io

这两者有什么区别？

我注意到，如果我在工作程序中从 更改`socket.emit`为`socket.send`，服务器无法接收到消息，尽管我不明白为什么。

我还注意到，在我的程序中，如果我从 更改`socket.emit`为`socket.send`，服务器会收到一条消息，但它似乎收到了多次。当我使用`console.log()`查看服务器收到的内容时，它显示的内容与我使用`socket.emit`.

为什么会有这种行为？你怎么知道什么时候使用`socket.emit`or `socket.send`？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-07-16T08:11:45.497

使用 socket.emit 您可以像这样注册自定义事件：

服务器：

```
var io = require('socket.io').listen(80);

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

客户：

```
var socket = io.connect('http://localhost');
socket.on('news', function (data) {
  console.log(data);
  socket.emit('my other event', { my: 'data' });
}); 
```

Socket.send 做同样的事情，但你没有注册到“新闻”，而是注册到消息：

服务器：

```
var io = require('socket.io').listen(80);

io.sockets.on('connection', function (socket) {
  socket.send('hi');
}); 
```

客户：

```
var socket = io.connect('http://localhost');
socket.on('message', function (message) {
  console.log(message);
}); 
```

* * *

## 回答 #2

> 赞同：117
> 
> 时间：2012-12-07T17:04:25.063

简单而精确（来源：[Socket.IO google group](https://groups.google.com/forum/?fromgroups=#!topic/socket_io/2UvtNHpd-W4)）：

`socket.emit`允许您在服务器和客户端上发出自定义事件

`socket.send`发送与`'message'`事件一起接收的消息

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2013-11-15T22:25:53.050

TL;博士：

`socket.send(data, callback)`本质上等同于调用`socket.emit('message', JSON.stringify(data), callback)`

在不查看源代码的情况下，我会假设 send 函数更有效地*编辑：至少对于发送字符串消息*？

所以是的，基本上，emit 允许您发送对象，这非常方便。

以这个例子为例`socket.emit`：

```
sendMessage: function(type, message) {
    socket.emit('message', {
        type: type,
        message: message
    });
} 
```

对于那些在家里记分的人来说，这是使用的样子`socket.send`：

```
sendMessage: function(type, message) {
    socket.send(JSON.stringify({
        type: type,
        message: message
    }));
} 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2012-11-22T22:17:14.033

`socket.send`实现与 vanilla WebSocket 接口的兼容性。`socket.emit`只是 Socket.IO 的功能。它们都做同样的事情，但`socket.emit`在处理消息时更方便一些。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-10T03:34:53.873

[https://socket.io/docs/client-api/#socket-send-args-ack](https://socket.io/docs/client-api/#socket-send-args-ack)

`socket.send`// 发送消息事件

`socket.emit(eventName[, ...args][, ack])`// 你可以自定义事件名称

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-23T12:39:23.387

在基本的双向通信系统中，socket.emit 已被证明更令人信服且易于使用（个人经验），并且是主要为此目的而构建的 Socket.IO 的一部分

# wpf - 缩放/调整通过 DataTemplate 创建的 ScatterViewItem

> ID：11498511
> 
> 赞同：0
> 
> 时间：2012-07-16T05:23:31.943
> 
> 标签：wpf, pixelsense

我在缩放通过 DataTemplate 创建的 scatterViewItem 时遇到问题。

我建立了这样的东西：http: [//msdn.microsoft.com/en-us/library/ff727736](http://msdn.microsoft.com/en-us/library/ff727736)

我的项目也有同样的问题（如果你想看:-) [mtscrumtool.codeplex.com](http://mtscrumtool.codeplex.com)）， scatterViewItem 无法缩放。

ScatterViewItem 的数据模板如下所示：

```
<DataTemplate x:Key="ScatterViewItemDataTemplate" >
<Border BorderThickness="2" BorderBrush="White" Margin="10">
    <StackPanel Background="{DynamicResource {x:Static s:SurfaceColors.Accent3BrushKey}}">
        <Label Content="{Binding Name}" 
               HorizontalAlignment="Center" 
               VerticalAlignment="Center"
               FontSize="20"/>

        <Label Content="{Binding CanDrag}"
               HorizontalAlignment="Center" 
               VerticalAlignment="Center"
               FontSize="18"/>
    </StackPanel>
</Border> 
```

谁能帮我？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:29:32.420

Check the `ItemContainerStyle` property of the ScatterView and see if it sets `CanScale="False"`, if not then try and set the property of the `ItemContainerStyle` by setting a setter of `CanScale="true"` property.

# git - 单个项目中的多个 .gitignore

> ID：11498512
> 
> 赞同：2
> 
> 时间：2012-07-16T05:23:39.197
> 
> 标签：git, gitignore

我在管理我`.gitignore`正在开发的网站的文件时遇到问题。我将我的网站存储在多个存储库中，这些存储库需要在 git 中隐藏或显示不同的文件。例如：我不希望我的 Github 存储库存储图像或数据库信息。另一方面，我的生产服务器需要同时查看这两个文件，但我可能不需要一些用于开发目的的文件。

`.gitignore`管理多个存储库的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T05:27:52.180

`.git/info/exclude`是仅限本地的`.gitignore`

如果您将模式存储在那里，它将仅适用于该特定克隆。`.gitignore`但是，如果提交给 repo，则会平等地影响所有 repo。

[如何告诉 git 忽略文件？](https://git.wiki.kernel.org/index.php/GitFaq#How_do_I_tell_git_to_ignore_files.3F)

> .git/info/exclude 仅对您的存储库是本地的，并且不会被可能从您的存储库获取的其他人共享。
> .gitignore 更常用，因为它可以签入存储库，从而自动与项目的所有用户共享。

# php - 我可以在 symfony-2.0 中为服务类使用注解吗？

> ID：11498513
> 
> 赞同：2
> 
> 时间：2012-07-16T05:23:39.280
> 
> 标签：php, symfony, annotations

只是为了Java Spring Hibernate。

如果我想制作服务类，我可以使用注释`@service`吗？

我必须使用 PHP yml 文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T06:00:35.817

您可以使用[JMSDIExtraBundle](http://jmsyst.com/bundles/JMSDiExtraBundle)。

# asp.net - 在asp.net网页中加载大量数据

> ID：11498514
> 
> 赞同：2
> 
> 时间：2012-07-16T05:23:54.587
> 
> 标签：asp.net

我在 SQL Server 中有一个包含超过 12000 行的表。当我将所有行加载到 asp.net 网页中时，加载所有行需要 10 到 15 分钟。

请帮我在几秒钟内加载数据..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:16:13.757

该过程的哪个部分花费的时间最多？此操作有许多不同的阶段：

1.  SQL Server 中的查询执行时间。
2.  将时间从 SQL Server 传输到数据读取器（ADO.NET？通过网络？）
3.  将数据绑定到 ASP.NET 中的网格。
4.  将呈现的 HTML 传输到客户端。

只有当你*确切地*知道什么是慢时，你才能正确优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:31:39.930

解决方案：

1.  您可以使用[qzip](https://developers.google.com/speed/articles/gzip)。显然，它不会将加载时间缩短到几秒钟。但是您会看到加载时间有很好的改进。

2.  编写一个处理程序，它以 100 组的形式返回结果并使用 jQuery 异步显示结果，就像在 Facebook 中一样，当你向下移动时，会提供更多故事，你可以为你的网站做类似的事情，或者你可以有一个“加载更多”除了用户必须按下“加载更多”按钮之外，该按钮执行相同的操作。

注意：实现上述内容并不难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T06:06:26.313

可能您需要找到具有按需`virtual paging`支持的第三方网格控件。

# ruby-on-rails - nil:NilClass 的未定义方法“gsub”

> ID：11498516
> 
> 赞同：5
> 
> 时间：2012-07-16T05:24:46.693
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我是 ruby​​ on rails 的新手.. 我遇到 gsub 问题.. 我每次去我的商店页面列表时都会显示“未定义的方法 `gsub' for nil:NilClass”..

这是我的代码：

```
def self.search(search_val, page = 1)
    @search_val = search_val.gsub("'", "\\\\'")
    search_query = "store_id LIKE '%#{ @search_val }%' OR english_name LIKE '%#{ @search_val }%' OR chinese_name LIKE '%#{ @search_val }%'"
select("jos_store.id, store_id, english_name, chinese_name, store_manager, delivery_area,year, week").joins("LEFT OUTER JOIN (SELECT id as store_replenishment, store, MAX(stock_movement) AS stock_movement FROM jos_store_replenishment GROUP BY store) AS replenishment ON replenishment.store = jos_store.id").joins("LEFT OUTER JOIN jos_stock_movement ON jos_stock_movement.id = replenishment.stock_movement").where(search_query).order("year DESC, week DESC").paginate :page => page, :per_page => 15  
  end 
```

提前致谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-16T20:25:49.320

`.to_s`当您使用字符串方法时，这是一个很好的做法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-02-20T21:29:44.090

您可以在 上使用`&`运算符`search_val`。它允许您避免空指针异常，而无需添加额外的检查或`to_s`用于将字符串转换为字符串。

所以，你会有这样的东西：

```
@search_val = search_val&.gsub("'", "\\\\'") 
```

您可以在此处阅读有关安全导航运算符的更多信息：http: [//mitrev.net/ruby/2015/11/13/the-operator-in-ruby/](http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-16T05:43:38.470

这意味着`search_val`实际上是零。您可以通过打印 的值轻松验证这一点`search_val`。

# php - 重新加载页面后打印 MySQL 行的下一行 ID

> ID：11498521
> 
> 赞同：1
> 
> 时间：2012-07-16T05:25:13.937
> 
> 标签：php, mysql

我有一个简单的表单，我在其中动态插入一个 MySQL 表中的值：

```
<input type="text" name="title" value="1" size="45"> 
```

该值=“1”来自一个`id`参数为自增的 MySQL 表。所以之后`id=1`是`2`, `3`, `4`, `5`, `6`, `7`, `8`,`9`等等

当我提交表单时，它会再次重新加载，但我希望`id`下次`2`再加载。然后第三次，应该是`3`，然后`4`，然后`5`，等等……

```
$res16 = sql_query("select * from mlf2_entries order by id desc limit 1 ");
    $row = sql_fetch_array($res16);
$textqb = $row['id']; 
```

^ 我试过了，但它总是显示 value="1"

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T05:31:27.413

您可以做的是使用 MySQL`LIMIT`子句中的偏移功能来获取下一行。这也解释了该领域可能存在的任何顺序空白`id`：

```
SELECT * FROM mlf2_entries ORDER BY id LIMIT 0,1 
```

`id`^ 这将按字段的升序获取第一行。

子句中的第一个数字`LIMIT`是偏移量。第二个数字是返回的行数（您只需要一行，因此您可以保持该数字不变）。

要偏移到第二行，请执行`LIMIT 1,1`... 以偏移到第三行：`LIMIT 2,1`，依此类推。

# android - 复合 XML 形状

> ID：11498526
> 
> 赞同：1
> 
> 时间：2012-07-16T05:26:00.593
> 
> 标签：android, xml, shape

是否可以创建由形状组合组成的复合 XML？本质上，我想使用 xml 形状创建一个箭头——这可能吗？

如果是这样，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:04:34.700

我假设您正在画布上绘制该形状。您可以在 XML 中执行此操作，但维护起来会非常困难。

这是Java代码中的一个更简单的解决方案

```
Paint paint = new Paint();
paint.setStyle(Paint.Style.STROKE);
paint.setStrokeWidth(2);
paint.setColor(BLACK);
Path path = new Path();
path.moveTo(0, -10);
path.lineTo(5, 0);
path.lineTo(-5, 0);
path.close();
path.offset(10, 40);
canvas.drawPath(path, paint);
path.offset(50, 100);
canvas.drawPath(path, paint);
// offset is cumlative
// next draw displaces 50,100 from previous
path.offset(50, 100);
canvas.drawPath(path, paint); 
```

如果您想要更简单的解决方案，请使用位图并使用 Matrix 旋转它以指向特定方向

```
ImageView image = (ImageView) findViewById(R.id.bitmap_image);
Bitmap bMap = BitmapFactory.decodeResource(getResources(), R.drawable.test);
Matrix mat = new Matrix();
mat.postRotate(90);
Bitmap bMapRotate = Bitmap.createBitmap(bMap, 0, 0, bMap.getWidth(), bMap.getHeight(), mat, true);
image.setImageBitmap(bMapRotate); 
```

# jquery - 预期通过 AJAX 预加载 JS 和 CSS - 多少才算太多？

> ID：11498527
> 
> 赞同：2
> 
> 时间：2012-07-16T05:26:09.920
> 
> 标签：jquery, caching, optimization, pagespeed

我很想听听其他一些开发人员的意见，您在多大程度上利用了“[预期预加载](http://developer.yahoo.com/performance/rules.html#preload)”？

我们的主页上有几个大小合适、缩小的 JS 和 CSS 文件集（每个大约 50k，在我们的 cdn 上设置了所有缓存），然后是 123kb 的缩小/可缓存/cdn'd JS 集文件和页面上的更多 CSS，用户不可避免地会在我们的主页之后立即访问。

因此，我一直在使用 jQuery 的 getScript()（设置了缓存选项）来进行预加载，并且一直在主页上的 pageload 上加载 123kb 文件，以使用户更快地过渡到站点的更丰富区域，并且更愉快。

事情在我的电脑上似乎表现得很好，但是 a) 这不是每个人的设置和 b) 在我的 Firebug Net 控制台上看到如此多的 KB (~550kb) 感觉有点有趣。当我返回它时，它被缓存了 565kb/568kb 并且只有大约 2.6 秒的加载时间......但仍然......

想法？至理名言？这对移动用户有很大影响吗？

很想听听你的想法，干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:55:24.173

老实说，我认为别人发现了什么并不重要，你应该自己衡量它——否则，你将永远盲目。如您所知，您额外的 javascript 可能会损害您的实际主页性能。要记住的关键观察是每个站点都是不同的：不同的人口统计数据、浏览器的细分、移动设备与桌面设备，以及最重要的业务 KPI。

所有这一切都说：衡量它，不要依赖轶事。有很好的工具可以帮助你。如果您运行 Google Analytics，请查看自定义变量。您可以在整个会话期间或在 cookie 过期之前标记访问者，并根据该 cookie 采用条件路径。例如，一些用户获得预加载路径，而其他用户则没有。完成此操作后，将 GA 中的数据与您的 KPI 进行比较：广告点击率、跳出率、每次访问的页面数、购买量、漏斗率等。

或者，GA 最近还推出了“内容实验”，它允许您直接在 GA 中运行测试（包括站点优化），并使用所有统计机制来分析您的结果。

最后但并非最不重要的一点是，GA 并不是镇上唯一的游戏。搜索“a/b 测试”，您会发现大量的 3rd 方工具，以及可以放入您自己的框架的开源插件。

# delphi - 超字节 ICS HTTPS POST

> ID：11498529
> 
> 赞同：2
> 
> 时间：2012-07-16T05:26:43.040
> 
> 标签：delphi, delphi-xe2, firemonkey, indy10, cloudflare

我想在框架中创建一个`CloudFlare`客户端。`Firemonkey`对于那些不知道的人，CloudFlare 可以作为任何拥有网站的人的 CDN。它们有一个可用的 API，并且与许多 Web API 一样，它们`JSON`与基于令牌的系统一起使用。它需要帐户电子邮件地址和帐户令牌才能访问 API。它在 HTTPS 上运行，您可以想象，尝试通过 HTTP/非 SSL 访问 API 只会产生空结果。

我希望创建的应用程序将用作一体化管理工具，旨在消除我使用 Web 浏览器来管理我的 CloudFlare 设置的需要。我遇到了最基本的问题；SSL 发布。看，我可以通过网络浏览器提交 API 请求并获取结果列表（例如`https://www.cloudflare.com/api_json.html?a=stats&z=DOMAIN&u=EMAIL&tkn=TOKEN`- 出于明显原因删除了个人详细信息），但我不确定我将如何获得这些相同的结果（或来自 API 的任何结果就此而言）在Firemonkey中。

我已经`Overbyte ICS`安装了 SSL，以及基本的捆绑`Indy`组件，但我很难开始使用它。我需要`https://www.cloudflare.com/api_json.html`通过 HTTPS/SSL 发布参数列表，但我不知道从哪里开始。我已经看到了一些围绕 SO 的各种示例，主要使用 ICS，但我一直无法找到任何特定于使用多个参数发布的内容、我应该如何格式化它等等。

我尝试的一个示例是使用 ICS `TSSLHttpCli`，将我的参数写为单个字符串（即`a=stats&z=DOMAIN&u=EMAIL&tkn=TOKEN`），将其写入`SendStream`of `TSSLHttpCli`，寻找`0,0`，设置 URL（即`https://www.cloudflare.com/api_json.html?`），然后调用该`Post`方法。但是，这给了我`Connection aborted on request`. 这是我尝试过的代码（尽管我已经用通用值替换了个人详细信息）；

```
var
  Data : AnsiString;
  RcvStrm, SndStrm : TMemoryStream;
begin
  SndStrm := TMemoryStream.Create;
  RcvStrm := TMemoryStream.Create;
  Data := '?a=stats&z=MYDOMAIN&u=MYEMAIL&tkn=MYTOKEN';
  SslHttpCli.SendStream := SndStrm;
  SslHttpCli.SendStream.Write(Data[1],Length(Data));
  SslHttpCli.SendStream.Seek(0,0);
  Memo1.Lines.LoadFromStream(SndStrm);
  ShowMessage('Waiting!');
  SslHttpCli.RcvdStream := RcvStrm;
  SslHttpCli.URL := 'https://www.cloudflare.com/api_json.html';
  SslHttpCli.Post;
  Memo1.Lines.Clear;
  Memo1.Lines.LoadFromStream(RcvStrm);
  Memo1.Lines.Add('.....');
  RcvStrm.Free;
  SndStrm.Free;
  ShowMessage('Complete!');
end; 
```

这些`ShowMessage`程序只是为了提供视觉中断，因此我每次都可以查看流中的数据。当`Memo1.Lines.LoadFromStream(SndStrm);`被调用时，我按预期得到一个问号，`Data`即备忘录中的内容。

当我调用时`Memo1.Lines.LoadFromStream(RcvStrm);`，我希望它添加来自 API 的返回结果，然后添加它下面的 5 个点。但是，这并没有发生，很明显我收到的消息与问题有关。我假设我没有正确设置数据，但我只是不确定在尝试发布之前我应该​​如何格式化它。我什至将下面的所有内容都注释掉`Memo1.Lines.LoadFromStream(RcvStrm);`到最后，看看是否在`Clear`备忘录上调用了该过程，但备忘录的内容与我调用时的内容保持一致`LoadFromStream(SndStrm)`。决赛`ShowMessage`也不叫。

我最初尝试使用 String 而不是 AnsiString，但这只是输出 Data 的第一个字符而不是整个字符串。

它不起作用的原因可能有很多（API访问的所有细节都是正确的，所以这是代码的问题），但我需要有更多经验和知识的人来指引我正确的方向。

我的网络编码知识有限，到目前为止我只在Delphi中处理过基本的SQL和FTP。一旦我完成了这一步，我仍然必须使用解析的 JSON，但是现在，任何人都可以帮助我完成这项工作，这样我就可以开始了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T18:50:00.397

我注意到您似乎通过 GET 请求解决了这个问题，但我注意到您的 POST 请求存在两个直接问题：

1.  正如 Runner 建议的那样，删除“？” 在您的数据中。这 '？' 仅在将参数附加到 GET 请求中的 URL 时使用。

2.  您永远不会设置 HTTP 请求的内容类型（应该是`application/x-www-form-urlencoded`）。您可以使用以下代码执行此操作：

    `SSLHttpCli.ContentTypePost := 'application/x-www-form-urlencoded';`

只是一个有用的想法。我检查了[https://www.cloudflare.com/docs/client-api.html](https://www.cloudflare.com/docs/client-api.html)，他们提到接受 POST 请求。服务器可能会拒绝具有任何其他内容类型的请求。

如果您需要通过 POST 请求联系另一个 API 并想使用 Overbyte 组件，请稍加思考。

希望信息有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-08T14:42:17.987

尝试这个;

```
SndStrm := TMemoryStream.Create;
RcvStrm := TMemoryStream.Create;
Data := 'a=stats&z=MYDOMAIN&u=MYEMAIL&tkn=MYTOKEN';
SndStrm.Write(Data[1], Length(Data));
SndStrm.Seek(0, 0);
SslHttpCli.SendStream := SndStrm; 
```

# c++ - 将 C++ 方法绑定到现有 JS 函数原型的最简单方法？

> ID：11498531
> 
> 赞同：4
> 
> 时间：2012-07-16T05:26:58.093
> 
> 标签：c++, oop, v8

我有几个简单的 C++ 类，例如：

```
class Audio {
public:
    Audio(const char *filename, bool async = true);
    ~Audio();

    Audio *play(int fade = 0);
    Audio *pause();
    Audio *loop(int loops = -1);
    Audio *volume(float volume); 
```

我在 JavaScript 中复制了如下结构：

```
var Audio = function(filename, async) {};
Audio.prototype.Play = function(fade) {};
Audio.prototype.Pause = function() {};
Audio.prototype.Loop = function(loops) {};
Audio.prototype.Volume = function(volume) {}; 
```

在阅读了 v8、v8-juice 和大量博客的文档和源代码之后......我找不到关于如何使用 C++ 方法“覆盖”JS 函数的单一参考。

理想情况下，我希望 JS 能够控制类的创建/销毁（这可能吗？），并让这些对象始终指向我的本机函数（PrototypeTemplate？）。

我今天花了一整天的时间阅读与此相关的文章/博客/代码，但我希望找不到一个简单的答案。

* * *

为了您的利益，对我的“简单”回答将是这样的（包装器对我来说很好；如果我必须为创建/销毁编写包装器，那没关系）：

```
v8::Local<v8::Function> jsAudioFunction = v8::Local<v8::Function>::Cast(v8::Context::GetCurrent()->Global()->Get(v8::String::New("Audio")));
jsAudioFunction->Setup(/* setup constructor/destructor */);
jsAudioFunction->SetPrototype(/* map native methods to js functions */); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:07:04.480

虽然这不能回答将本机代码绑定到 JS 对象的问题，但以下是我的劳动成果：

```
static void jsAudioGC(v8::Persistent<v8::Value> object, void *data) {
    v8::Persistent<v8::Object> obj = v8::Persistent<v8::Object>::Cast(object);
    Audio *audio = static_cast<Audio*>(obj->GetPointerFromInternalField(0));
    if (audio != NULL) {
        obj->SetPointerInInternalField(0, NULL);
        v8::V8::AdjustAmountOfExternalAllocatedMemory(-sizeof(audio));
        delete audio;
    }
    object.Dispose();
}

v8::Handle<v8::Value> jsAudio(const v8::Arguments &args) {
    v8::Persistent<v8::Object>::New(args.This()).MakeWeak(NULL, jsAudioGC);

    Audio *audio = new Audio(get(args[0], ""), get(args[1], true));
    v8::V8::AdjustAmountOfExternalAllocatedMemory(sizeof(audio));
    args.This()->SetPointerInInternalField(0, audio);
    return args.This();
}

v8::Handle<v8::Value> jsAudioPlay(const v8::Arguments &args) {
    Audio *audio = static_cast<Audio*>(args.This()->GetPointerFromInternalField(0));
    if (audio != NULL) audio->play(get(args[0], 0));
    return args.This();
} 
```

在我的 init() 函数内部：

```
v8::Handle<v8::FunctionTemplate> audio = v8::FunctionTemplate::New(&jsAudio);
audio->PrototypeTemplate()->Set("Play", v8::FunctionTemplate::New(&jsAudioPlay));
audio->InstanceTemplate()->SetInternalFieldCount(1);
globals->Set("Audio", audio); 
```

这完全按照我想要的方式完成了一切；包括正确的实例化和垃圾收集。

我对这种方法的唯一遗憾是我希望能够“只使用定义的内容”。这样，这些函数只有在包含 JS“类”时才可用（可以在 JS IDE 中定义和记录所有函数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:32:24.547

好吧，我遇到了同样的问题……但还没有弄清楚 GC 集成的东西。对我来说，这就像拥有两个不同的模板一样。一个用于构造函数（和实例生成器）的 FunctionTemplate 和一个用于带有回调的生成数据的 ObjectTemplate。

这是一个 C++ API 类的示例：

[https://github.com/martensms/lycheeJS-adk/blob/master/v8gl/api/script.cpp](https://github.com/martensms/lycheeJS-adk/blob/master/v8gl/api/script.cpp)

下面是 JavaScript 端的样子：

[https://github.com/martensms/lycheeJS-adk/blob/master/v8gl/test/04-script.js](https://github.com/martensms/lycheeJS-adk/blob/master/v8gl/test/04-script.js)

我这样做是因为这似乎是通常数据类型的实现方式。也许我稍后会移动原型上的方法，但我会看看这是否有意义。

# android - Android如何逐帧放置多帧imageView动画

> ID：11498533
> 
> 赞同：1
> 
> 时间：2012-07-16T05:27:15.940
> 
> 标签：android, android-layout, animation

我在片段中有逐帧动画，

但我需要将动画放在不同的地方，

到目前为止，我可以制作一个动画 ![在此处输入图像描述](../Images/ae5ee0033f3a05ed68c7c1a86867ca6f.png) [头上的那个]

那么如何将其他动画放置在特定的 X 和 Y 位置，并使它们具有动画效果？

这里我使用的代码：

.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="#FF0000">

<RelativeLayout android:layout_width="wrap_content" android:layout_height="wrap_content">

       <ImageView 
android:layout_width="fill_parent" android:layout_height="fill_parent"
android:src="@drawable/home_bgnd" android:scaleType="fitXY" />

    <AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

        <ImageView     android:id="@+id/imgTesto"
       android:contentDescription="@string/imageFrag1"
       android:layout_x="265dp"
       android:layout_y="23dp"
            android:layout_width="41dp" 
            android:layout_height="41dp"
            android:src="@drawable/c_0"
    />

   <ImageView     android:id="@+id/imgTesto1"
       android:contentDescription="@string/imageFrag1"
       android:layout_x="265dp"
       android:layout_y="100dp"
            android:layout_width="41dp" 
            android:layout_height="41dp"
            android:src="@drawable/c_0"
    />

    </AbsoluteLayout>

</RelativeLayout>

<Button
       android:id="@+id/button1"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="TesteoB" />

</LinearLayout> 
```

和.java

```
public class HomeTab extends Fragment {
    /* (non-Javadoc)
     * @see android.support.v4.app.Fragment#onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)
     */

    AnimationDrawable animation;

    AnimationDrawable animation1;

    //ImageButton yourButton = new ImageButton(this);

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        if (container == null) {
            // We have different layouts, and in one of them this
            // fragment's containing frame doesn't exist.  The fragment
            // may still be created from its saved state, but there is
            // no reason to try to create its view hierarchy because it
            // won't be displayed.  Note this is not needed -- we could
            // just run the code below, where we would create and return
            // the view hierarchy; it would just never be used.
            return null;
        }

        //animation 0
        animation = new AnimationDrawable();
        animation.addFrame(getResources().getDrawable(R.drawable.c_0), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c1), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c2), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c3), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c4), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c5), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c6), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c7), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c8), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c9), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c10), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c9), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c8), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c7), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c6), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c5), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c4), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c3), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c2), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c1), 100);

        animation.setOneShot(false);

        //animation 1
        animation1 = new AnimationDrawable();
        animation1.addFrame(getResources().getDrawable(R.drawable.c_0), 100);
        animation1.addFrame(getResources().getDrawable(R.drawable.c1), 100);
        animation1.addFrame(getResources().getDrawable(R.drawable.c2), 100);
        animation1.addFrame(getResources().getDrawable(R.drawable.c3), 100);
        animation1.addFrame(getResources().getDrawable(R.drawable.c4), 100);
        animation1.addFrame(getResources().getDrawable(R.drawable.c5), 100);
        animation1.addFrame(getResources().getDrawable(R.drawable.c6), 100);
        animation1.addFrame(getResources().getDrawable(R.drawable.c7), 100);
        animation1.addFrame(getResources().getDrawable(R.drawable.c8), 100);
        animation1.addFrame(getResources().getDrawable(R.drawable.c9), 100);
        animation1.addFrame(getResources().getDrawable(R.drawable.c10), 100);
        animation1.addFrame(getResources().getDrawable(R.drawable.c9), 100);
        animation1.addFrame(getResources().getDrawable(R.drawable.c8), 100);
        animation1.addFrame(getResources().getDrawable(R.drawable.c7), 100);
        animation1.addFrame(getResources().getDrawable(R.drawable.c6), 100);
        animation1.addFrame(getResources().getDrawable(R.drawable.c5), 100);
        animation1.addFrame(getResources().getDrawable(R.drawable.c4), 100);
        animation1.addFrame(getResources().getDrawable(R.drawable.c3), 100);
        animation1.addFrame(getResources().getDrawable(R.drawable.c2), 100);
        animation1.addFrame(getResources().getDrawable(R.drawable.c1), 100);

        animation1.setOneShot(false);

        View V = inflater.inflate(R.layout.tab_home_layout, container, false);

        ImageView imageView = (ImageView)V.findViewById(R.id.imgTesto); //mestrua imagen ok, en el fragmentus

        //animation 0
        imageView.setBackgroundDrawable(animation);

        imageView.post(new Starter());

        //animation 1
        /*
        ImageView imageView1 = (ImageView)V.findViewById(R.id.imgTesto1); //mestrua imagen ok, en el fragmentus

           imageView1.setBackgroundDrawable(animation);

            imageView1.post(new Starter());
        */
        return V;

    }

     class Starter implements Runnable {

        public void run() {
            animation.start();        
        }

    }

} 
```

那么如何避免制作动画0、动画1、动画N

一样，只是在不同的位置？

还请注意我使用已弃用的`AbsoluteLayout`

谢谢！

# sql-server - SQL Server：单用户模式

> ID：11498535
> 
> 赞同：1
> 
> 时间：2012-07-16T05:27:27.607
> 
> 标签：sql-server, sql-server-2008

我遇到了 SQL 系统管理员帐户和 SA 禁用的问题。

我想使用单用户模式重新创建系统管理员帐户。

`-m'SQLCMD'`在 SQL Server 实例服务之一（命名实例之一）上激活单个用户模式。

问题是，当我尝试登录 sqlcmd 时，我收到错误消息：

> `Login failed`, 服务器处于单用户模式，此时只有一名管理员可以连接。

我停止了所有服务，只留下我登录。甚至禁用了tcp，但我仍然得到同样的错误。

我如何确定是否有任何帐户正在尝试登录，或者我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:23:23.287

使用小写字母`-m"sqlcmd"`。

-m 选项将对客户端名称进行字符串匹配。

这就是微软推荐使用它的方式。

参考：[以单用户模式启动 SQL Server](http://msdn.microsoft.com/en-us/library/ms188236.aspx)

# php - 从数组插入到 else 更新

> ID：11498536
> 
> 赞同：0
> 
> 时间：2012-07-16T05:27:33.437
> 
> 标签：php, mysql, arrays

希望有人能指出我正确的方向，因为我无法让它工作。这就是发生的情况：我的客户端将（Rightmove）.blm 文件上传到服务器，脚本解压缩 zip 文件并使用解析器将属性放入数组中。从这里我可以毫无问题地插入数据库，如果存在，我需要它来更新数据库中的信息，否则插入，因为 blm 文件可能包含新属性或已编辑的现有属性。blm 文件仅包含属性信息，没有 id 等，因此一旦插入数据库，我就会通过自动添加给它一个 id (propid)。

请查看下面的代码，希望您有一个建议，我可以用它来做我需要做的事情:)

```
foreach ($rmdata as $key => $properties) {    

$fields = array();   
$values = array();

foreach ($rmdata[$key] as $field=>$value) { 
if (!isset($value)) {       

}

if (isset($value)) {

$sql_props = mysql_query("SELECT propid FROM epsales");
 while($row = mysql_fetch_array($sql_props)){
     $propid = $row["propid"];
}

$fields[] = $field; 
$values[] = "'".$value."'";

$array1 = array($field);
$array2 = array($value);

$sqlupdate = array_combine($array1, $array2);

foreach ($sqlupdate as $field=>$value) {
        $sql_update = "$field='$value', "; 
}
}   
}

$sql_fields = implode(', ', $fields);   
$sql_values = implode(', ', $values);

$sqlPropInsert = mysql_query('INSERT INTO epsales ('. $sql_fields .') VALUES ('.    $sql_values .') ON DUPLICATE KEY UPDATE SET '. $sql_update .''); 
```

感谢您抽出宝贵的时间，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:04:17.337

几个注意事项：

1.  `foreach ($rmdata[$key] as $field=>$value)``foreach ($properties as $field=>$value)`与此上下文中的相同
2.  `if(isset($value))`通过启动该循环可以避免整个事情`if(!$value) continue;`
3.  当您选择 propid 时，您正在选择表格中的*每一行*，这肯定不是您打算做的，因为您循环遍历它们并且每次都使用最后一个。
4.  构建更新部分的部分在几个方面存在缺陷。最简单的解决方法是意识到您可以通过在循环后重新组合 $fields 和 $values 数组来获得正确的结果（如下所示）
5.  我不能轻易看出你会在哪里得到键冲突，除非 $rmdata 将包含一个 propid，如果它是更新而不是插入，或者如果有其他键并且它只是被处理而没有在代码，这很好。

下面是我直接从你那里复制的代码，只是为了解决这些问题而进行了修改：

```
foreach ($rmdata as $properties) {     
  $fields = array();   
  $values = array();
  $updates = array();
  foreach ($properties as $field=>$value) { 
    if (!$value) continue;
    $fields[] = $field; 
    $values[] = "'".$value."'";
    $updates[] = $field . '="'.$value.'"';
  }     
  $sql_fields = implode(', ', $fields);   
  $sql_values = implode(', ', $values);
  $sql_updates = implode(', ', $updates);
  $sqlPropInsert = mysql_query('INSERT INTO epsales ('. $sql_fields .') VALUES ('.    $sql_values .') ON DUPLICATE KEY UPDATE SET '. $sql_updates .'');
} 
```

**请注意**，此技术需要数据中的*某些*内容具有冲突的键才能触发 ON DUPLICATE KEY。如果数据数组中有一些值可以唯一标识这些行，则该字段应该是数据库中的唯一键，这将导致这种冲突很好地发生。

# sql - 如何确保非负列？

> ID：11498537
> 
> 赞同：19
> 
> 时间：2012-07-16T05:27:48.017
> 
> 标签：sql, sql-server, sql-server-2008

我需要创建一个`Branch`包含列`branch_name`和`branch_city`字符类型的表，`assets`作为整数类型。`branch_name`是主键，我必须确保它`assets`是非负数。

我试过了

```
CREATE TABLE Branch
(
    branch_name navarchar(100) primary key,
    branch_city nvarchar(100),
    assests int NOT NULL
) 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-16T05:30:55.877

您需要为您的主键**定义**一个数据类型，并且您需要添加一个`CHECK`约束以确保`assets`它是非负的：

```
CREATE TABLE dbo.Branch
(
    branch_name NVARCHAR(100) primary key,
    branch_city nvarchar(100),
    assets int NOT NULL CHECK (assets >= 0)
) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-16T05:52:14.733

更改表创建约束以检查列

```
ALTER TABLE Branch ADD CONSTRAINT chkassets CHECK (assets > 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T05:50:34.377

试试这个

```
CREATE TABLE Branch (
    branch_name VARCHAR(100) PRIMARY KEY
    ,branch_city NVARCHAR(100)
    ,assests INT NOT NULL
    ,CONSTRAINT ck_assets_positive CHECK (assests >= 0)
    ) 
```

# .net - n 层架构中的依赖注入 - 如何处理

> ID：11498539
> 
> 赞同：1
> 
> 时间：2012-07-16T05:27:51.550
> 
> 标签：.net, dependency-injection, n-tier-architecture

我想构建一个 N 层应用程序。

客户端（WebJson-MVC、WebSoap-WCF）
API
BLL
DAL

`Client`取决于`API`那取决于`BLL`那取决于`DAL`。
所以可以说我想注入`API`到客户端(WebJson-MVC, WebSoap-WCF) 。
既然有 2 个客户，那么注射的最佳方法是什么？我应该将依赖注入框架工作导入哪个项目？
解决方法是什么？
我应该在哪里初始化上下文？`IApplicationContext ctx = ContextRegistry.GetContext();`

**编辑 1**
如果我将在 WebJson-MVC 中创建依赖项注入并且我想将`bll`MVC`api`与 BLL 耦合，那么让 bll 和客户端潮汐耦合不是很糟糕吗？另外，我应该如何将 API 注入 WebSoap-WCF？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:04:36.947

对于 WebJson-MVC 框架，毫无疑问。MVC 框架中的初始化将在 Global.asax.cs 文件的 ApplicationStart() 中进行。

# javascript - 如何使用javascript增加和重置html的字体大小？

> ID：11498540
> 
> 赞同：2
> 
> 时间：2012-07-16T05:28:29.417
> 
> 标签：javascript, jquery, html

我使用以下代码来增加和重置 HTML 的字体大小。但无法增加字体大小。我想增加 HTML 页面的整个正文部分的字体大小。以下代码我用来增加页面的字体大小.

```
<script type="text/javascript">
  $(document).ready(function(){
    // Reset Font Size
    var originalFontSize = $('html').css('font-size');
    //console.log(originalFontSize);

    $(".resetFont").click(function(){
      $('html').css('font-size', originalFontSize);
    });

    // Increase Font Size
    $(".increaseFont").click(function(){
      var currentFontSize = $('html').css('font-size');
      var currentFontSizeNum = parseFloat(currentFontSize, 10);
      var newFontSize = currentFontSizeNum*1.2;

      $('html').css('font-size', newFontSize);
      return false;
    });
  });

</script> 
```

在 HTML 页面中，我使用了以下内容

```
<a href="#" class="resetFont">RESET Font</a>
<a href="#" class="increaseFont">INCREASE FONT</a> 
```

请帮我...

提前谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:00:55.840

您仅将 font-size 设置为`<html>`. 我想问题是，需要增加字体大小的实际文本应用了内联样式或具有字体大小定义的 css 类`pixel`。这样它的大小就不会增加。尝试将 font-size 设置为文本的实际 html 元素，或`em`为文档中的所有元素设置 font-size `"<html>"`。

然后你可以使用你的javascript来让它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:15:17.560

您的代码对我来说运行良好，但如果仍然无法运行，请尝试以下操作：http: [//jsfiddle.net/XZfKh/](http://jsfiddle.net/XZfKh/)。

```
var originalFontSize;
$(document).ready(function(){
  // Reset Font Size
  originalFontSize = $('html').css('font-size');
  //console.log(originalFontSize);

   $(".resetFont").click(function(){
    $('html').css('font-size', originalFontSize);
  });

   // Increase Font Size
  $(".increaseFont").click(function(){
    var currentFontSize = $('html').css('font-size');
    var currentFontSizeNum = parseFloat(currentFontSize, 10);
    var newFontSize = currentFontSizeNum*1.2;
     $('html').css('font-size', newFontSize);
    return false;
  });
}); 
```

我将声明移至`originalFontSize`顶部。

**编辑：**

如果某些元素`font-size`已经指定，请使用以下代码：

```
var newFontSize = 100;
$(document).ready(function(){
  $(".resetFont").click(function(){
    newFontSize = 100;
    var allElems = $('*');
    for(var counter = 0; counter < allElems.length; counter++) {
        $(allElems[counter]).css('font-size', '100%');
    }
  });

  // Increase Font Size
  $(".increaseFont").click(function(){
    newFontSize = newFontSize*1.2;
    var allElems = $('*');
    for(var counter = 0; counter < allElems.length; counter++) {
        $(allElems[counter]).css('font-size', newFontSize + '%');
    }
    return false;
  });
}); 
```

它循环浏览页面上的所有元素，并`font-size`为每个元素增加 。

[例子](http://jsfiddle.net/XZfKh/3/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-16T05:44:34.700

我认为这取决于你的 CSS。如果您在 HTML 元素（如 body、div 等）下定义了具有绝对字体大小（例如 px 值）的元素，这将不起作用。如果您使用相对大小（例如 em），这个脚本看起来应该可以工作。

# ruby-on-rails - Rails：将值动态传递给表单

> ID：11498541
> 
> 赞同：0
> 
> 时间：2012-07-16T05:28:30.840
> 
> 标签：ruby-on-rails, forms, dynamic

不确定我是否正确地问了这个问题，但这是我想要做的：

1.  从下拉列表中选择一个事件（我知道怎么做）

2.  将该事件 ID 传递给表单中代码的另一部分。

例如：

```
<%= form_for(@event_location) do |f| %>
  <%= select("event_location", :event_id, events_names_ids_hash, { :include_blank => true }) %> 
```

然后将选中的 event_id 传递给同一个表单的另一部分

# 修改问题

如何在提交表单之前捕获：event_id 的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:56:51.207

看看你能不能用这个。确切的代码现在可能可以工作，您需要进行一些小的修改，但这是使用 java 脚本的概念。
<%= form_for(@event_location) 做 |f| %> <%= select("event_location", :event_id, events_names_ids_hash, :onchange =>"javascriptFunction()", { :include_blank => true }) %>

```
<script type="text/javascript">
  function requestUrl()
  {
   var e = document.getElementById("event_id");
  var selectedId = e.options[e.selectedIndex].value;
   computedValue= "your calculation in javascript"
   document.getElementById("textbox").innerHTML=computedValue;
   }
</script> 
```

# jquery - jquery 中的 Mouseenter 和 Mouseleave 函数

> ID：11498544
> 
> 赞同：0
> 
> 时间：2012-07-16T05:28:51.353
> 
> 标签：jquery

我有 div 框。我希望当用户将其悬停或 mouseenter 时，下一个 div 应该显示，当用户 mouseout 时，可见 div 应该淡出。我的功能无法正常工作。

```
<head>    
<script type="text/javascript" src="jquery-1.7.2.js"></script>    
<script type="text/javascript">  

$(function (){      

    $('.box').bind({            
        mouseenter: function (){                
            $(this).next().fadeIn('fast')               
        },          
        mouseout: function (){
            $(this).next().fadeOut('fast')                  
        }

        })      
    })    
</script>    

<style>

body { margin:0}
.box { height:300px; width:300px; background:#F00}

.boxcaption { width:300px; height:300px; background:#00F; position:absolute; left:0; top:0; display:none}
</style>
</head>

<body>

<div class="wrap">

<div class="box"></div>
<div class="boxcaption"></div>

</div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T05:34:00.860

第二个元素在第一个元素之上。因此，当您进入鼠标然后它淡入时，它会立即看到鼠标退出，这就是它淡入的原因。将您的第二个元素向下移动 300 像素，您会发现它有效。

# jsp - 如何重定向`中的值 `一个jsp页面的``另一个jsp页面..？

> ID：11498551
> 
> 赞同：0
> 
> 时间：2012-07-16T05:30:01.570
> 
> 标签：jsp, struts2, taglib

如何将一个jsp页面的值重定向`<s:property/>`到`<input type="text"/>`另一个jsp页面的..？

我有两个 jsp 页面： one.jsp 和 two.jsp

一个.jsp：

```
 <%@taglib prefix="s" uri="/struts-tags" %>
    <%@page contentType="text/html" pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <title>Jsp - one</title>
        </head>
        <body>
            <h1>One JSP</h1>
             <s:iterator value="u" begin="0" end="0">
    <s:property value="uid" />
</s:iterator>
             <a href="two.jsp">Go to two.jsp</a>
        </body>
    </html> 
```

二.jsp：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Jsp - two</title>
    </head>
    <body>
        <h1>Two JSP</h1>
         <input type="text" id="two" name="two" value="<%=request.getParameter("uid")%>" /> //in this textfield i want the value of <s:property/> of one.jsp. But i am getting "null" in it.
         <a href="one.jsp">Go to one.jsp</a>
    </body>
</html> 
```

请注意：one.jsp 正在使用 struts2 taglib，并且 的值`<s:property/>`是从返回一些列表的动作类中获取的`u`，列表是具有唯一`u`性的类型。我已经正确地完成了数据库中类和表的映射。而 two.jsp 没有使用任何 taglib。two.jsp 与数据库或taglib 无关。它只有一个来自 one.jsp 的链接。在two.jsp 中，我想要 one.jsp 的值。但我正在参与其中。请给一些方法来获得它。`users``uid``<input type="text">``<s:property/>``"null"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:44:27.497

```
<s:iterator value="u" begin="0" end="0">
     <a href="two.jsp?uid=<s:property value="uid"/>">Go to two.jsp</a>
</s:iterator> 
```

或者

```
<s:iterator value="u" begin="0" end="0">
   <s:set var="valToSend" value="uid" />
</s:iterator>

<a href="two.jsp?uid=<s:property value="valToSend"/>">Go to two.jsp</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:14:24.677

行。

1 您不想从列表中选择 uId 并且您需要将第一个 uid 传递到第二页：

```
 <body>
    <h1>One JSP</h1>
    <a href="two.jsp?uid=<s:property value="u.get(0)"/>">Go to two.jsp</a>
  </body> 
```

2 你想从列表中选择 uId

```
<body>
  <h1>One JSP</h1>
  <form action="two.jsp">
    <s:select name="uid" list="u" listKey="uid" listValue="uid"/>
    <input type="submit" value="Go to two.jsp"/>
  </form>
</body> 
```

# sql - 如果表上有视图，如何处理 DROP TABLE？

> ID：11498555
> 
> 赞同：0
> 
> 时间：2012-07-16T05:30:33.773
> 
> 标签：sql, sql-server, sql-server-2008

`View`可以使用`DROP VIEW`命令删除。`DROP TABLE`如果桌子上有视图，是否有处理解决方案？

我试过了

```
DROP TABLE ORDER_TBL CASCADE; 
```

[现代DBMS](http://en.wikipedia.org/wiki/Database#Terminology_and_overview)中还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T05:36:05.877

根据 MSDN 文档：

> [http://msdn.microsoft.com/en-us/library/ms173790.aspx](http://msdn.microsoft.com/en-us/library/ms173790.aspx)
> 
> 任何引用已删除表的视图或存储过程都必须使用 DROP VIEW 或 DROP PROCEDURE 显式删除。

换句话说，MSSQL 不会自动警告您，或为您删除视图。视图变得无效。

MSDN 继续：

> 要报告对表的依赖关系，请使用 sys.dm_sql_referencing_entities。

例如：

*   [http://sqlserverdownanddirty.blogspot.com/2011/07/finding-object-dependancies-in-sql.html](http://sqlserverdownanddirty.blogspot.com/2011/07/finding-object-dependancies-in-sql.html)

    SELECT referencing_schema_name, referencing_entity_name, is_schema_bound, [definition] FROM sys.dm_sql_referencing_entities ('mySchema.myTable', 'OBJECT') r INNER JOIN sys.sql_modules m ON r.referencing_id = m.object_id

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T05:43:29.360

如果您需要按名称查找数据库对象（例如表、列、触发器） - 请查看名为[SQL Search的](http://www.red-gate.com/products/sql-development/sql-search/)**免费**Red-Gate 工具，它会在您的整个数据库中搜索任何类型的字符串。

![在此处输入图像描述](../Images/06aa8195296565da03113074a84f9fa1.png)

![在此处输入图像描述](../Images/2b38d4018a9fbf766a665542ad2c611d.png)

对于任何 DBA 或数据库开发人员来说，它都是一个很棒的必备工具——我是否已经提到它完全**免费**用于任何用途？

**在删除表之前**使用 SQL 搜索，您可以找出其他对象依赖于该表。您需要以某种方式处理这些问题 - 删除依赖项或删除这些对象以及您的表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T05:58:09.987

**选项1：**

如果您之前运行此脚本`DROP TABLE`，它会列出在您的表上有引用的所有对象：

```
SELECT DISTINCT so.name,so.xtype
FROM syscomments sc
INNER JOIN sysobjects so ON sc.id=so.id
WHERE sc.TEXT LIKE '%YOUR TABLE%' 
```

如果您只想要视图，您可以通过过滤上述查询`AND s.xtype='V'`。

**选项 2：**

您可以将[WITH SCHEMABINDING](http://it.toolbox.com/blogs/coding-dotnet/schemabinding-option-in-views-14746)添加到视图的定义中，这样您就不能删除基于表的表。

# php - 将登录信息从 PHP 传递到 AIR

> ID：11498567
> 
> 赞同：0
> 
> 时间：2012-07-16T05:31:40.697
> 
> 标签：php, android, air

我有一个简单的 php 登录页面。当用户和密码正确时，我希望它将登录信息传递给空气。当我使用闪存（将值传递给 swf 文件）时，我能够做到这一点。但我现在不知道该怎么做，因为该应用程序位于 android 设备中，我不知道如何引用它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:07:07.120

当您说从 PHP 传递到 AIR 时，您的意思是用户在 android 浏览器中访问您的 Web 应用程序，登录，然后您想在用户登录的情况下启动该应用程序？在这种情况下，您可以将加密字符串中的凭据作为启动参数传递给 AIR 应用程序。为您的应用程序注册一个自定义命名空间，例如**my-air-app://**，然后将参数传递给应用程序。

如果您的意思是您使用 WebView 从您的应用程序启动登录页面并且您希望应用程序获取它们 - 将 URL 更改侦听器添加到您的 webview 对象，从 PHP 重定向到自定义协议，监视此 URI，一次接收、获取和解密数据。

# javascript - Android：无法覆盖 Javascript 中的默认本地存储功能？

> ID：11498571
> 
> 赞同：1
> 
> 时间：2012-07-16T05:32:52.633
> 
> 标签：javascript, android, webview, local-storage

我想覆盖本地存储的默认函数，并且我完全按照指南通过[在 Javascript 中覆盖默认函数？](https://stackoverflow.com/questions/9268461/overriding-default-functions-in-javascript).

但是，被覆盖的功能只能在 Android 4.0+（内置浏览器）以及适用于 Android 和桌面的 Chrome 上完美运行。在 Android 2.3.x 上，在我的测试中，这些功能在页面加载后 10 秒左右恢复为默认实现，原因不明。'Got remused' 意味着我不能调用我自己的 SetItem/GetItem。

有人遇到同样的问题吗？是错误还是功能错误？

# windows-phone-7.1 - 在wp7中单击图像时如何显示大图像？

> ID：11498573
> 
> 赞同：0
> 
> 时间：2012-07-16T05:33:35.207
> 
> 标签：windows-phone-7.1

在一个页面中，我正在显示图像、描述等文件。每当单击该小图像时，还需要显示大尺寸图像和关闭图标，并且需要显示背景屏幕的模糊（因为背景文件中没有用户交互）。无论何时点击关闭图标需要显示实际数据。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:43:07.940

一种方法是在您的页面上显示此内容：

```
<Grid Name="datagrid">
    // your small image and other fields
</Grid>

<Grid Name="imagegrid" Visibility="Collapsed">
    // larger image and a button to "close"
</Grid> 
```

在小图片的 TAP 事件中，将 datagrid 可见性更改为折叠，将 imagegrid 可见性更改为可见。在 imagegrid 中关闭按钮的单击事件中，将 datagrid 可见性更改为可见，将 imagegrid 可见性更改为折叠。

第二种方法是使用另一个只有大图片和关闭按钮的页面。当用户点击小图片时，导航到第二页，当用户点击关闭或返回按钮时，导航回到带有小图片和所有字段的第一页。

# java - 一段时间后发生 java.net.UnknownHostException

> ID：11498574
> 
> 赞同：0
> 
> 时间：2012-07-16T05:33:52.663
> 
> 标签：java, eclipse, unknown-host

我在 Eclipse 中有一个项目来从某个网站检索数据。由于要检索的数据太多，我必须让代码在一夜之间运行。我得到一个`jave.net.UnknownHostException`之后的某个时候。代码运行很长时间没有任何问题，只是后来才`UnknownHostexception`发生。关于为什么会发生这种情况的任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:47:58.200

您只能拥有正在部署战争的服务器的mac地址，请[在此处查看如何](http://www.mkyong.com/java/how-to-get-mac-address-in-java/)获取MAC地址

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:02:43.017

我以前在我的一个项目中看到过这个错误。在 Java 1.5 之前，JVM 用于缓存 DNS 条目并且不支持 TTL 值。如果由于某种原因修改了 DNS 条目（通常是 Akamai 或其他 CDN 网络的情况），并且您之前访问的 IP 不再可用，您可能会遇到此错误。

有关此行为的一些信息可在[http://www.rgagnon.com/javadetails/java-0445.html](http://www.rgagnon.com/javadetails/java-0445.html)和[http://blog.andrewbeacock.com/2006/12/warning-java-caches-dns-to- ip-address.html](http://blog.andrewbeacock.com/2006/12/warning-java-caches-dns-to-ip-address.html)。

您可能会尝试在 iptrace 工作正常并且从同一台机器开始失败时运行**iptrace** - 如果 IP 已更改，则您遇到了这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T06:07:02.773

我的猜测是您的互联网连接可能中断了。你有任何其他日志来验证这一点吗？

# ruby-on-rails - 获取水豚测试下拉列表的选择值

> ID：11498575
> 
> 赞同：65
> 
> 时间：2012-07-16T05:33:53.647
> 
> 标签：ruby-on-rails, rspec, capybara

我必须为网站编写测试。我正在尝试获取下拉框的选定值。到目前为止，我可以通过这样做来获取下拉列表的内容

```
find_field('restrictions__rating_movies').text 
```

返回 - 不允许电影 G PG M R13 R15 R16 R18 R RP16 允许所有电影

我可以获得所选对象的值。

```
find_field('restrictions__rating_movies').value 
```

回报 - 1000

这对我没有多大帮助，因为我试图从下拉框中获取所选项目的文本。

```
<select class="" id="restrictions__rating_movies" name="restrictions[][rating_movies]">            
<option value="0">Don't Allow Movies</option>
<option value="100">G</option>
<option value="200">PG</option>
<option value="300">M</option>
<option value="325">R13</option>
<option value="350">R15</option>
<option value="375">R16</option>
<option value="400">R18</option>
<option value="500">R</option>
<option value="600">RP16</option>
<option value="1000" selected="selected">Allow All Movies</option></select> 
```

在这种情况下，我需要获取值“允许所有电影”我已经尝试了上述两个示例的许多不同组合。

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2013-09-04T20:15:47.673

[`have_select`](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/RSpecMatchers:have_select)如果您将 Capybara 与 Rspec 一起使用，则会有一个匹配器：

```
expect(page).to have_select(
  'my-select',         # locator
  selected: 'Option 2' # option
) 
```

##### 参数：

Locator (String) (默认为：nil) — 选择框的标签、名称或 id Options (Hash) using `:selected`(String, Array) — 应选择的选项

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-07-16T14:59:18.783

```
find_field('restrictions__rating_movies').find('option[selected]').text 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-08-26T16:00:18.117

获取所选选项值的非常简单的方法是：

```
find("#restrictions__rating_movies").value 
```

这将返回选定的选择选项值。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-06-28T15:58:25.747

如果您只需要断言是否使用给定选项选择了一个字段，那么简单的答案是

```
#Find a select box by (label) name or id and assert the given text is selected
When /^select box "([^"]*)" is selected with "([^"]*)"$/ do |dropdown, selected_text|    
  assert page.has_select?(dropdown, selected: selected_text)
end 
```

来源：[http ://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers#has_select%3F-instance_method](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers#has_select%3F-instance_method)

但是你的问题的标题是**"Get select value for dropdown"**。而且我遇到了类似的问题，我不仅想断言选择，还想检索所选字段的文本和值。我在 API 上找不到直接的方法。我发现的最简单的方法是：`#all("option").find &:selected?`

```
When /^ select box "([^"]*)" is selected with "([^"]*)"$/ do |dropdown, selected_text|
  sb = find_field(dropdown)
  sb_selected = sb.all("option").find &:selected?
  msg = "Selected: #{sb_selected.text.inspect} - value:#{sb_selected.value.inspect}"
  assert page.has_select?(dropdown, selected: selected_text), msg
end 
```

当断言失败时，这会给我一个更全面的错误消息。

如果有多个选择，您可以使用 #select 代替 #find，如`#all("option").select &:selected?`. 它将返回一个数组。

这个答案不像以前的那样依赖于'option [selected]'技巧，所以即使选择是由Javascript完成的（这就是以前的答案对我根本不起作用的原因）。

测试：

```
capybara (2.2.1)
capybara-webkit (1.1.0)
cucumber (1.3.14)
cucumber-rails (1.4.0) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-01-31T16:44:09.867

如果您想查找当前选定的文本，而不假设它可能是什么，以便您可以将其与期望进行比较，即使选择是由 JS 做出的（因此没有 'option[selected]' ）。

首先我找到选择的值，然后找到具有该值的选项文本：

```
 def selected(selector)
    value = find(selector).value
    text = find(selector).find("option[value='#{value}']").text
  end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-15T23:10:11.307

创建一个简单的函数来返回给定`select`元素的文本（下拉菜单）：

```
def get_dropdown_selected_item_text(dropdown)
  value = dropdown.value
  return dropdown.all(:css, "option").select {|opt| opt.value == value} .first.text
end 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-16T09:25:35.563

像这样的东西会起作用吗？

```
within("//select[@id='restrictions__rating_movies']") do
  find_field("//option[@selected='selected']").text
end 
```

# java - 如何暂停 Java 线程一小段时间，比如 100 纳秒？

> ID：11498585
> 
> 赞同：32
> 
> 时间：2012-07-16T05:35:32.007
> 
> 标签：java, sleep, thread-sleep, method-invocation, nanotime

我知道**Thread.sleep()**可以使 java 线程暂停一段时间，例如某些毫秒和某些纳秒。但问题是这个函数的调用也会导致开销。

例如，如果我想让一个线程挂起 100 纳秒，我调用**Thread.sleep(0, 100)**。这个过程的全部成本是**invocation_cost + 100 nanosceonds**，这可能比我想要的要大得多。我怎样才能避免这个问题，并达到我的目的？

我需要这个的原因是我想离线进行模拟。我分析了一个任务的执行时间；现在我想通过在同一时间段内挂起一个线程来模拟这个执行时间。

谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-16T05:40:54.370

睡眠的粒度通常受线程调度程序的中断周期限制。在 Linux 中，这个中断周期在最近的内核中一般为 1ms。在 Windows 中，调度程序的中断周期通常在 10 或 15 毫秒左右

如果我必须在少于此时间的时间内停止线程，我通常会使用忙等待

**编辑**：我怀疑你会在 jrockit + solaris 上得到最好的结果。窗户盒上的数字很糟糕。

```
@Test
public void testWait(){
    final long INTERVAL = 100;
    long start = System.nanoTime();
    long end=0;
    do{
        end = System.nanoTime();
    }while(start + INTERVAL >= end);
    System.out.println(end - start);
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-16T06:49:25.597

对于模拟，我不会尝试实时模拟，因为这不会给您可重复的结果。即你不能测试你的模拟。

相反，我会使用数据驱动的模拟时钟，并尽可能快地运行所有内容。这为您提供了可重现的结果，并允许您比实时更快地模拟（例如快 2 倍到 100 倍）

* * *

怀疑一个线程大约需要 10 微秒。尝试将线程挂起的时间少于此时间是没有意义的。

要忙等待一小段时间，可以试试。

```
long start = System.nanoTime();
while(start + delay >= System.nanoTime()); 
```

注意：正如@EugeneBeresovsky 评论的那样，在您的机器运行 292 年后，这可能会溢出，因此您可以选择将其写为

```
while(System.nanoTime() - start < delay); 
```

这将适用于少于 292 年的延迟。您可以使用 System.currentTimeMillis() 进行更长的延迟。

然而，即使这样也不可靠，因为 System.nanoTime() 在 Centos 5.x 上最多可能需要 300 ns，因此调用它两次将需要比 100 ns 长得多的时间。此外，许多操作系统的分辨率仅为 1000 ns（1 微秒），因此无论您要寻找的延迟如何，此循环都将等待长达 1 微秒。

相反，您可以做的是在未优化的短循环中忙于等待。

对于 100 ns 的延迟，我怀疑最好是忙于等待您正在等待的任何内容，而不是创建一个单独的忙循环。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-10-22T14:56:50.347

```
public static void busySleep(long nanos)
{
  long elapsed;
  final long startTime = System.nanoTime();
  do {
    elapsed = System.nanoTime() - startTime;
  } while (elapsed < nanos);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-16T06:37:42.713

做一个忙碌的等待，（即有一个while循环循环通过这么多数字什么都不做）。在您的程序开始时，您可以计算执行此繁忙等待所花费的时间，并增加或减少它以达到 5 纳秒

我发现 object.wait 会因为这个频率而变得毛茸茸，还要注意繁忙的等待解决方案很可能是依赖于机器的因此为什么你应该在程序开始时有一个校准步骤

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-16T06:36:01.767

另一个问题`Thread.sleep()`是不能保证在指定时间后唤醒。睡眠线程保证在指定的纳秒/微秒内睡眠，但不保证在此之后立即唤醒。由于您在谈论纳秒，您可能想尝试`Object.wait(long, int)`.

使用上述方法，我已经非常符合 10s 纳秒的顺序。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-12-09T23:53:31.640

假设一个生产者线程正在填充一个工作缓冲区，比如一个链表。可以调整缓冲区的大小，使其在睡眠-唤醒周期内不会清空，并且 cpu 可以支持在您睡眠时清空缓冲区的消费者线程。您甚至可以增加缓冲区大小，直到您醒来时它不为空。现在，多少睡眠是一个业务决策，因为存在切换开销。上面有很多关于计算的提示！

当然，有几个阻塞并发类，但通常它们的容量是固定的。我不得不相信，阻塞与线程挂起一样昂贵。

# arrays - PHP将数组除以空值

> ID：11498586
> 
> 赞同：0
> 
> 时间：2012-07-16T05:35:33.053
> 
> 标签：arrays

这是来自输入字段的数组，如下所示

```
Array(
    [0] =>
    [1] => 737
    [2] => 736
    [3] => 735
    [4] => 
    [5] => 748
    [7] => 744
    [8] => 747
    [9] => 746
    [10] => 
    [11] => 748
    [12] => 747
    [13] => 746
    [14] => 745
    [15] => 744
); 
```

有没有办法将它除以空值并删除空值，如下所示：

```
Array(
    [0] => Array(
        [0] => 737
        [1] => 736
        [2] => 735
    )
    [1] => Array(
        [0] => 748
        [1] => 744
        [2] => 747
        [3] => 746
    )
    [2] => Array(
        [0] => 748
        [1] => 747
        [2] => 746
        [3] => 745
        [4] => 744
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:49:47.940

如果您想将数组拆分为以“null”值作为分隔符的子数组，则应该执行以下操作：

```
$newArray = array();
$subArray = null;
for ($i = 0; $i < count($array); $i++) {
    if (!$subArray) $subArray = array();

    $v = $array[$i];
    if ($v) {
        array_push($subArray, $v);
    } else {
        if (count($subArray) > 0) array_push($newArray, $subArray);
        $subArray = null;
    }
}

if ($subArray) array_push($newArray, $subArray); 
```

# sql - 如何从 Joomla 2.5 中的 sql 查询加载对象？

> ID：11498588
> 
> 赞同：0
> 
> 时间：2012-07-16T05:35:40.533
> 
> 标签：sql, database, joomla2.5

[在这里](http://www.theartofjoomla.com/home/9-developer/135-database-upgrades-in-joomla-16.html "ArtOfJoomla 网站")使用 Andrew Eddie 的教程，我正在为菜单构建一些自定义代码。开始了：

```
$query ->select('id, menutype, title')
       ->from('#__menu_types')
       ->where('menutype='.$somemenu);
    $db->setQuery($query); 
```

我不知道如何像以前使用 Joomla 1.5 那样加载一个对象值：

```
$result = $db->loadObject();
$thetitle = $result->title; // I need this value and I always get error "Notice: Trying to get property of non-object" at this line 
```

请问我怎样才能成功获得 $thetitle 的价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:59:16.170

那应该行得通。我认为您的代码没有问题。

您收到的错误与未在数据库中找到匹配项一致。

由于您似乎没有任何错误处理，它甚至可能是一个 SQL 错误。

尝试添加这个：

```
if ($error = $db->getErrorMsg()) {
    throw new Exception($error);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T04:36:06.657

正确的查询是

```
$query ->select('id, menutype, title')
       ->from('#__menu_types')
       ->where('menutype='.$db->quote($somemenu));
    $db->setQuery($query); 
```

现在我可以正确获取查询的值。

# cdi - 用 CDI 替换工厂类

> ID：11498589
> 
> 赞同：0
> 
> 时间：2012-07-16T05:35:55.200
> 
> 标签：cdi, jboss-weld

我的应用程序中有一组处理器 bean 以及一个用于创建它们的工厂。

```
public abstract class Processor {
    public Processor(String config) { .... }
    public abstract void process() throws Exception;
}

public class Processor1 extends Processor {
    public Processor1(String config) { super(config);..}
    public void process() {....}
}

public Processor newProcessor(String impl, String config) {
    // use reflection to create processor
} 
```

我可以使用 CDI 替换工厂类/方法吗？而是使用@Produces？

我尝试使用以下内容来迭代或选择我想要的实例。但是 Weld 告诉我 allProcessorInstances.isUnsatisfied() == true。为了让 Weld 找到我的处理器子类，我必须创建默认的无参数 ctor。

```
@Inject @Any Instance<Processor> allProcessorInstances; 
```

有没有办法告诉 CDI 容器使用我希望它使用的构造函数？还是我以错误的方式思考这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T17:13:07.957

要使用构造函数，您需要使用 @Inject 对其进行注释，但是，构造函数上的每个参数本身必须是 bean 或 CDI 范围内的东西。

使用生产者方法并将[InjectionPoint](http://docs.jboss.org/cdi/api/1.0/javax/enterprise/inject/spi/InjectionPoint.html)作为参数，然后将您的配置作为注释的一部分将起作用。

# jquery - jQuery用链接确认对话

> ID：11498590
> 
> 赞同：0
> 
> 时间：2012-07-16T05:35:55.403
> 
> 标签：jquery

我有一个链接，单击该链接会打开一个对话框，当单击对话框中的 CONFIRM 按钮时，需要通过带有一些变量的 GET 操作将用户发送到特定的 URL（原始链接）。显然，如果单击 CANCEL，则链接单击操作无效。

不太清楚如何把这一切放在一起。这是我到目前为止所做的。

**JS**

```
$("#doSomething").click(function(){
        $("#myConfirm").dialog({
            resizable: false,
            height:140,
            modal: true,
            buttons: {
                "Continue": function() {
                    $(this).dialog("close");
                    // go to url...
                },
                Cancel: function() {
                    $(this).dialog("close");
                }
            }
        });
    }); 
```

**HTML**

```
<a href="page.php?var=1" id="doSomething">Link</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:42:31.347

试试这个（在你的继续按钮的处理程序内）：

```
window.location = "page.php?var=1"; 
```

**编辑1：完整的代码。**

```
$("#doSomething").click(function(){
    $("#myConfirm").dialog({
        resizable: false,
        height: 140,
        modal: true,
        buttons: {
            "Continue": function() {
                window.location = "page.php?var=1"; // you can create the URL as you like...
            },
            "Cancel": function() {
                $(this).dialog("close");
            }
        }
    });
}); 
```

**编辑2：点击链接完成代码。**

**HTML：**

```
<a id="myHyperlink" href="#">Link</a> 
```

**JavaScript：**

```
$("#myHyperlink").click(function(){
    $("#myConfirm").dialog({
        resizable: false,
        height: 140,
        modal: true,
        buttons: {
            "Continue": function() {
                window.location = "page.php?var=1"; // you can create the URL as you like...
            },
            "Cancel": function() {
                $(this).dialog("close");
            }
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T06:12:18.647

在 // go to url 添加一个 ajax 调用。

```
$.ajax({
         url: yourUrl,
         beforeSend: function() {
              // do something like show a loading image
         },
         success: function() {
              // do something like hide the loading image
         },
         error: function() {
              // do something like hide a loading image and alert error message
         }
}); 
```

# android - 禁止在特定 API 级别上安装

> ID：11498591
> 
> 赞同：0
> 
> 时间：2012-07-16T05:35:58.210
> 
> 标签：android, compatibility

如何禁止我的应用在特定 API 级别上运行？我知道清单中[uses-sdk标记中的 3 个说明符。](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)但这不能产生我想要实现的逻辑。

例如：我想允许我的应用程序安装在`Level 4`to上`Level 10`，禁止`Level 11`to`Level 13`并再次允许`Level 14`and `Level 15`。

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T05:46:34.613

您可以在将其发布到 Google Play 时执行此操作。在 Android Developer Console 中，上传应用程序时，进入 APK 文件选项卡并检查高级模式。它允许您上传 2 个具有不同 sdk 级别范围的 apk 文件。但不要忘记为它们设置不同的版本代码。

控制台中的所有统计信息都将汇总为两个 apk 文件，因为它是一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:55:07.203

您可以创建两个 apk（不建议）。一个支持 api 级别 4 到 10，另一个支持 api 级别 14 和 15，您需要在开发者控制台中激活这两个 apk。Play 商店根据 android manifest xml 决定安装哪个 apk。

# ruby-on-rails - 重新创建 schema_migrations 表

> ID：11498595
> 
> 赞同：2
> 
> 时间：2012-07-16T05:36:14.923
> 
> 标签：ruby-on-rails, mysql2

当我升级我的 ruby​​ 版本时，我不得不重新安装我的 gems。在某个地方，它为我的项目彻底清除了我的数据库。

我不能跑

```
rake db:migrate 
```

因为我不再有 schema_migrations 表。但是当我去创建一个新表时，我得到了这个错误：

```
#1005 - Can't create table 'schema_migrations' (errno: 13)
Please check privileges of directory containing database. 
```

我该如何重新创建这张桌子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:12:36.370

知道了！我不得不删除我的 schema.rb 文件并创建一个新数据库并更改我的 database.yml 文件以连接到那个。然后我跑了`rake db:migrate`，它创建了 schema_migrations 表并继续迁移回我的旧状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:42:39.903

你跑`bundle install`了吗？

# javascript - 带有分块请求正文的 XmlHttpRequest？

> ID：11498596
> 
> 赞同：5
> 
> 时间：2012-07-16T05:36:26.353
> 
> 标签：javascript, jquery, ajax, comet

我知道如何使用 XmlHttpRequest 对象在 javascript 中处理分块下载。有什么方法可以使用 javascript 执行分块上传，打开连接但只能一点一点地上传数据块？

我知道使用 Http 1.1 服务器应该可以进行分块上传，并且找到了很多关于使用各种其他平台（C# java 等）进行分块上传的参考，但在浏览器中没有找到任何关于使用 javascript 这样做的参考。

编辑：用例是将数据流式传输到服务器，而不是上传大文件，类似于使用分块响应将数据流式传输到客户端。这是发出单个 ajax 请求的替代方法，因为从客户端到服务器的数据块非常频繁（< 0.5 秒间隔）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-11-17T20:35:46.230

截至今天（2021 年 11 月），我相信浏览器中仍然很大程度上缺少对使用 HTTP 分块数据传输的 UPLOADS 的支持。

[如果您查看Request (Fetch API)](https://developer.mozilla.org/en-US/docs/Web/API/Request#browser_compatibility)的浏览器支持矩阵的“在请求正文中发送 ReadableStream”列，您可以看到当前对于除“Deno”之外的所有浏览器都是“否”。但是，您会注意到列旁边的“实验”标志。因此，它在某些浏览器（例如 Chrome）中是实验性的。不过，我不会屏住呼吸说它很快就会成为主流。

HTTP 分块数据传输编码在技术上不是一次发送数据块的必要条件，我相信常规 HTTP 数据传输也一次只发送数据块，但是“分块”是在 TCP 级别完成的（请更正如果我在这里错了，我）。因此，两种协议都可用于流式传输文件上传。WebSockets 当然也是另一种选择。选择哪种协议的主要区别在于您是否提前知道流的最终长度。

如果您需要流式上传您事先不知道其长度的数据（例如实时视频、视频电话会议、远程桌面会话、聊天等），那么您最好的选择可能[是 WebSocket API](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket)（或内置的东西）在它的上面）。

如果您需要提前知道长度的上传数据（文件、图像、视频等），那么我相信您最好的选择可能是使用[Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)甚至[旧`XmlHttpRequest`API](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest)的普通 POST 或 PUT 。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T05:54:34.497

您可以使用 FileReader API 和 slice 方法。

使用切片，您可以获得可以上传的数据块，然后您需要在服务器端重新组装它们。

这是关于如何在 javascript [http://www.html5rocks.com/en/tutorials/file/dndfiles/中处理文件的一个很好的介绍](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

您可以查看[http://caniuse.com/#feat=filereader](http://caniuse.com/#feat=filereader)以获取浏览器支持

# php - Magento - 发送朋友重定向到 404 页面

> ID：11498598
> 
> 赞同：-1
> 
> 时间：2012-07-16T05:36:36.670
> 
> 标签：php, magento

发送朋友表单重定向到 404 页面。我已将“发送朋友”从其单独页面移至产品详细信息页面。我在“catalog.xml”中对页面布局进行了更改。

这是我在“catalog.xml:”中写的

```
<block type="catalog/product_view_tabs" name="product.info.tabs" as="info_tabs" template="catalog/product/view/tabs.phtml" >
    <action method="addTab" translate="title" module="catalog"><alias>description</alias><title>Product Description</title><block>catalog/product_view_description</block><template>catalog/product/view/description.phtml</template></action>
    <action method="addTab" translate="title" module="catalog"><alias>upsell_products</alias><title>We Also Recommend</title><block>catalog/product_list_upsell</block><template>catalog/product/list/upsell.phtml</template></action>
    <action method="addTab" translate="title" module="catalog"><alias>additional</alias><title>Additional Information</title><block>catalog/product_view_attributes</block><template>catalog/product/view/attributes.phtml</template></action>
    <action method="addTab" translate="title">
        <alias>send-friend</alias>
        <title>Send Friends</title>
        <block>sendfriend/send</block>
        <template>sendfriend/send.phtml</template>
    </action>
<!--    <action method="addTab" translate="title" module="catalog"><alias>reviewsthis</alias><title>Review This Product</title><block>review/form</block><template>review/form.phtml</template></action> -->
    <action method="addTab" translate="title" module="catalog"><alias>reviews</alias><title>Reviews</title><block>review/product_view_list</block><template>review/product/view/list.phtml</template></action> 
</block> 
```

问题是表单没有获得正确的“操作”URL。“send.phtml”中的语句，即

```
action="<?php echo $this->getSendUrl() ?>" 
```

返回这个：

```
http://localhost/magento_test1/catalog/product/sendmail/id/130/ 
```

而它应该返回如下内容：

```
http://localhost/magento_test1/sendfriend/product/sendmail/id/171/cat_id/35/ 
```

当我将表单移动到产品详细信息页面时，肯定会出现问题。现在，“$this->getSendUrl ()”给出了产品页面的相对路径。

谁能告诉我如何解决这个问题？我错过了什么？如何让函数获取 Sendfriend 控制器的 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:53:55.957

如果禁用“发送给朋友”模块，就会发生这种情况。确保通过转到系统->配置->目录->电子邮件给朋友来启用它。

*编辑* 根据您的评论，该主题可能与您当前版本的 Magento 无法 100% 兼容。因此，请确保生成发送给朋友 URL 的代码是正确的：

查看 app/design/frontend/default//template/catalog/product/view.phtml 并查找发送给朋友的代码。确保它看起来像这样：

```
<?php if ($this->canEmailToFriend()): ?>
    <p class="email-friend"><a href="<?php echo $this->helper('catalog/product')->getEmailToFriendUrl($_product) ?>"><?php echo $this->__('Email to a Friend') ?></a></p>
<?php endif; ?> 
```

# objective-c - 目标 C：传递 NSArray 作为方法的引用

> ID：11498599
> 
> 赞同：1
> 
> 时间：2012-07-16T05:36:38.663
> 
> 标签：objective-c, recursion, stack, nsarray, pass-by-reference

我有一个将数组作为引用传递的方法，我使用递归多次调用此方法。我将数组用作“堆栈”。该代码用于将后缀转换为中缀的计算器，并且只是一个简单的工具。

我对代码及其输出有疑问。该代码有效，但是当我取消注释其中一个部分`[stack removeLastObject];`时，它停止工作并声称该数组为空。

我没有得到这个，因为我正在从主数组中删除一个对象——而不是我在递归中使用的副本。如果我输入一个用于递归的副本，然后从原始对象中删除一个对象，该副本是否会受到影响？

我的主要示例是使用应输出 (3 + 5) 的 3、5、+ 数组。如果我取消注释我得到的一段代码（3+3）。这是代码：

```
+(NSString*) descriptionTop:(NSMutableArray *) stack{

NSMutableString *programFragment = [NSMutableString stringWithString:@""];

id topOfStack = [stack lastObject];
if (topOfStack) [stack removeLastObject];
NSLog(@"operation is %@", topOfStack);
NSLog(@"Stack is%@", stack);

if([ topOfStack isKindOfClass:[NSNumber class]]){
    [programFragment appendFormat:@"%g", [topOfStack doubleValue]];
}
else if( [topOfStack isKindOfClass:[NSString class]])
{
    NSString *operation = topOfStack;
    if ([operation isEqualToString:@"+"] || 
        [operation isEqualToString:@"-"] ||  
        [operation isEqualToString:@"/"] ||  
        [operation isEqualToString:@"*"]) {

       NSMutableArray *operand1 = [stack mutableCopy];
        [operand1 removeLastObject];

        NSMutableArray *operand2 = [stack mutableCopy];
        // [stack removeLastObject];

        [programFragment appendFormat:@"(%@ %@ %@)", [self descriptionTop:operand1], operation, [self descriptionTop:operand2]];

    }
 }

NSLog(@" program fragment returns %@", programFragment);
return programFragment;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T06:47:54.887

我想我理解你想要做什么，但你的逻辑相当混乱。假设您的额外内容未注释，让我们浏览一下您的输入代码（堆栈顶部在`[3 5 +]`哪里）。首先，您（正确地）从堆栈中弹出运算符：`+``[stack removeLastObject]`

```
id topOfStack = [stack lastObject];
// topOfStack = +
// stack = [3 5 +]

if (topOfStack) [stack removeLastObject];
// topOfStack = +
// stack = [3 5] 
```

然后你发现那`topOfStack`是一个字符串，所以你把它分配给`operation`. 然后你这样做：

```
 NSMutableArray *operand1 = [stack mutableCopy];
        // operation = +
        // operand1 = [3 5]
        // stack = [3 5]

        [operand1 removeLastObject];
        // operation = +
        // operand1 = [3]
        // stack = [3 5]

        [stack removeLastObject];
        // operation = +
        // operand1 = [3]
        // stack = [3] 
```

请注意，此时，5 完全消失了！您的任何变量中都没有它。因此，当您设置时`operand2`， the`3`位于顶部（实际上是唯一的元素）：

```
 NSMutableArray *operand2 = [stack mutableCopy];
        // operation = +
        // operand1 = [3]
        // stack = [3]
        // operand2 = [3] 
```

现在，让我们回到我们设置的地方`operand1`，但删除额外的`[stack removeLastObject]`：

```
 NSMutableArray *operand1 = [stack mutableCopy];
        // operation = +
        // operand1 = [3 5]
        // stack = [3 5]

        [operand1 removeLastObject];
        // operation = +
        // operand1 = [3]
        // stack = [3 5]

        NSMutableArray *operand2 = [stack mutableCopy];
        // operation = +
        // operand1 = [3]
        // stack = [3 5]
        // operand2 = [3 5] 
```

现在`operand2`有`5`在顶部，因此对`descriptionTop:`on的递归调用会`operand2`找到，并且您会得到的`5`正确答案`(3 + 5)`。`[3 5 +]`

**但是这个功能还是坏了。**

考虑输入`[3 4 5 * +]`。什么是正确的输出？我认为应该是`(3 + (4 * 5))`。但是你的函数是做什么的？让我们来看看它。首先，它弹出`+`操作符：

```
id topOfStack = [stack lastObject];
// topOfStack = +
// stack = [3 4 5 * +]

if (topOfStack) [stack removeLastObject];
// topOfStack = +
// stack = [3 4 5 *] 
```

接下来，它将堆栈复制到`operand1`并从中删除最后一个元素`operand1`：

```
 NSMutableArray *operand1 = [stack mutableCopy];
    // operation = +
    // operand1 = [3 4 5 *]
    // stack = [3 4 5 *]

    [operand1 removeLastObject];
    // operation = +
    // operand1 = [3 4 5]
    // stack = [3 4 5 *] 
```

然后，假设我们不这样做`[stack removeLastObject]`，它将堆栈复制到`operand2`：

```
 NSMutableArray *operand2 = [stack mutableCopy];
    // operation = +
    // operand1 = [3 4 5]
    // stack = [3 4 5 *]
    // operand2 = [3 4 5 *] 
```

现在你可以看到，当我们`descriptionTop:`在`operand1`这里递归调用时，它会返回`5`。当我们递归调用`descriptionTop:`时`operand2`，它会返回`4 * 5`。所以我们返回`(5 + (4 * 5))`。怎么了`3`？我们从未达到它！

这里的问题是，要到达`3`，我们必须将堆栈中的 用作一个操作数，然后在*同一个堆栈*（已消耗的位置）中查找另一个操作数，以便我们*可以*找到.`4 5 *`*`4 5 *``3`*

 *您需要做的就是*根本不*复制堆栈！您需要将*相同*的堆栈对象传递给递归调用，这样当您弹出所有构成一个操作数的元素时，您可以在堆栈顶部找到另一个操作数的元素。像这样：

```
 // operation = +
    // stack = [3 4 5 *]

    NSString *operand2Description = [self descriptionTop:stack];
    // operation = +
    // operand2Description = "4 * 5"
    // stack = [3]

    NSString *operand1Description = [self descriptionTop:stack];
    // operation = +
    // operand1Description = "3"
    // operand2Description = "4 * 5"
    // stack = [] (empty stack)

    [programFragment appendFormat:@"(%@ %@ %@)", operand1Description, operation, operand2Description];
    // programFragment = "(3 + (4 * 5))" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:06:47.500

你打`[stack removeLastObject]`了两次电话。当您的`stack`数组只剩下一个元素时，代码将失败，因为您首先删除了最后一个对象，然后（如果是`NSString`）您尝试再次删除最后一个元素，但没有留下任何对象。*

# php - 在数组中查找类似条件

> ID：11498602
> 
> 赞同：3
> 
> 时间：2012-07-16T05:36:43.503
> 
> 标签：php, mysql, arrays, sorting

我有以下数组，我想使用搜索和排序。搜索和排序就像我们使用 MySQL“LIKE”条件进行的排序，但在数组中而不是在数据库中。

```
Array
(
    [4] => Varun Kumar
    [14] => Jason Ince
) 
```

就像用 Jason Ince 输入“jas”记录一样，必须分别用键和值以及记录的其余部分从中出来。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T05:43:05.350

你的意思是这样的：

```
foreach($yourArr as $key => $value) {
    if (strpos($value, $yourString) !== false) {
       //results here
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T05:43:38.843

您可以使用[`array_filter`](http://php.net/array_filter)：

```
$filtered_array = array_filter($original_array, create_function($a, 'return stristr($a,"jas")!==false')); 
```

或者，如果您使用的是 php 5.3+，则语法为：

```
$filtered_array = array_filter($original_array, function($a){ return stristr($a,"jas")!==false }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T05:45:57.843

```
function arraySearch( $array, $search ) { 
    foreach ($array as $a ) { 
        if(strstr( $a, $search)){ 
            echo $a;
        } 
    } 
return false; 
}
arraySearch(array("php","mysql","search"),"my"); // will return mysql 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T05:46:29.313

你也可以这样使用：

```
function check($yourString)
{
    foreach($yourArr as $key => $value) {
        if (strpos($value, $yourString) !== false)
            return strpos($value, $yourString);
    }
} 
```

这样您就可以检查条件是否为假。

# apache-zookeeper - Zookeeper Newbie - 我要读写哪些节点？我应该负载平衡吗？

> ID：11498605
> 
> 赞同：1
> 
> 时间：2012-07-16T05:36:56.617
> 
> 标签：apache-zookeeper

我是动物园管理员新手。我在三个独立的数据中心中有三个节点。我需要从 python pykeeper API 读取和写入数据吗？所以...

1）我从哪个节点读取和写入？有关系吗？循环赛？写给主人，从奴隶那里读？

2) 我怎么知道哪台服务器被选为主服务器？我关心的？我还没有弄清楚。

3）现在我正在使用以下连接到zookeeper。

```
import zc.zk
from random import choice
zk_servers = ['111.111.111.111:2181','111.111.111.222:2181','111.111.111.333:2181']
zk = zc.zk.ZooKeeper(choice(zk_servers)) 
```

这就引出了一个问题，如果 zk 节点发生故障怎么办？我应该将节点放在 HA 代理后面以对请求进行负载平衡吗？

任何关于使用最佳实践读写 zk 节点的建议都非常感谢。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T00:51:41.390

一般模型是您向客户端提供服务器节点列表，然后将其作为一个整体连接到集群。ZooKeeper 打乱服务器地址列表，然后连接到其中一个。您不会选择各种服务器来执行单独的任务...zookeeper 的部分要点是它通过添加更多节点来水平扩展...每个节点都根据请求的数据和位置响应读取和写入集群已经把它。

# c# - 从字符串中替换 MatchCollection 项

> ID：11498606
> 
> 赞同：0
> 
> 时间：2012-07-16T05:37:01.420
> 
> 标签：c#, regex

我有一个包含数学表达式的字符串，例如：

```
strExpression= a+b+tan(a)+tan(b)+a+b 
```

我想用 a 和 b(比如 a=10,b=20) 的值替换这个表达式，使它变成：

```
10+20+tan(10)+tan(20)+10+20 
```

但是当我使用时，`Regex.Replace`我得到：

```
10+20+t10n(10)+t10n(20)+10+20 
```

如何在正确的位置替换 a 和 b 的值。

我已过滤掉包含以下内容的 MatchCollection 对象：

```
{a},{b},{tan},{a},{tan},{b},{a},{b} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:42:14.367

您可以在变量名之前和之后使用单词边界`\b`（例如`\ba\b`，对于 variable`a`和`\bb\b`for variable `b`）来匹配表达式中的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T05:57:04.200

使用*边界* `\b`：

```
\b    The match must occur on a boundary 
      between a \w (alphanumeric) and a \W (nonalphanumeric) character. 
```

例如：

```
\b\w+\s\w+\b 
```

结果是

```
"them theme" "them them" in "them theme them them" 
```

以便使用：

```
Regex.Replace(inputString, @"(\bb\b)", "20");
Regex.Replace(inputString, @"(\ba\b)", "10"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T05:44:09.990

```
string expression = "strExpression= a+b+tan(a)+tan(b)+a+b";
expression = Regex.Replace(expression, @"\ba\b", "10");
expression = Regex.Replace(expression, @"\bb\b", "20");
Console.WriteLine(expression); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T05:45:15.990

尝试在您的正则表达式中更具体，而不仅仅是替换值。以下是一些描述捕获的字符是否可变的规则

1.  变量必须有二元运算符（+、-、*、/），并在其右侧（如果开始）、左侧（如果结束）或两侧有空格。如果传入函数，它也可以在它周围有 paranethis。所以创建一个满足所有这些条件的正则表达式

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T05:50:19.057

你可以这样做：

[正则表达式示例](http://regexr.com?31hoq)

然后用同样的方法`b`替换`20`

# android - Android 的通话录音应用程序，抛出异常

> ID：11498608
> 
> 赞同：1
> 
> 时间：2012-07-16T05:37:02.743
> 
> 标签：android, record, mediarecorder

当我在模拟器中运行以下代码时，呼叫开始并且当呼叫断开时它在调用停止函数时显示 NullPointerException 并且当使用 VOICE_CALL 作为音频源时输出是一个空文件。但是当我将 VOICE_UPLINK 作为音频源时有效（仍然存在空指针异常）。当我在设备中运行它时，一旦拨打号码，它就会显示 FileNotFound 异常和 Permission Denied。但是我已经在清单文件中提供了所需的权限。

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.STORAGE" />
<uses-permission android:name="android.permission.RECORD_AUDIO" /> 
```

我只从互联网上得到了这里和那里的代码。我做的是一场彻底的灾难。完整的课程代码：

```
public class ServiceReceiver extends BroadcastReceiver {
PhoneStateListener listener; 
TelephonyManager telephony;
MediaRecorder recorder = new MediaRecorder();

@Override
public void onReceive(Context context, Intent intent) {

    telephony = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);

    listener = new PhoneStateListener() {

        @Override
        public void onCallStateChanged(int state, String incomingNumber) {

            switch(state)
            {

               case TelephonyManager.CALL_STATE_OFFHOOK:
                    Log.d("DEBUG", "OFFHOOK");        
                    StartRecording();
                    break;
               case TelephonyManager.CALL_STATE_IDLE:
                   Log.d("DEBUG", "IDLE");        
                    StopRecording();
                   break;
               case TelephonyManager.CALL_STATE_RINGING:
                   Log.d("DEBUG", "RINGING");
                   break;
            }

        }

        public void StartRecording(){

             recorder.setAudioSource(MediaRecorder.AudioSource.VOICE_CALL);
             recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
             recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
             recorder.setOutputFile(this.getFullSdPath());

             try {
                recorder.prepare();
                Log.i(this.getClass().getName(), "Prepared");
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                Log.i(this.getClass().getName(), "ERR 1");
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                Log.i(this.getClass().getName(), "ERR 2");
            }

            recorder.start();   // Recording is now started
            Log.i(this.getClass().getName(), "Start Recording");
        }

        public void StopRecording(){

             recorder.stop();          
             recorder.release();
             recorder = null;
             Log.i(this.getClass().getName(), "Stop Recording");
        }

        public String getFullSdPath(){
            File sdCard = new File(Environment.getExternalStorageDirectory()    + "/RecordMyVoice");
            if (!sdCard.exists()) {
                sdCard.mkdir();
            }
            File file = new File(Environment.getExternalStorageDirectory()+"/RecordMyVoice/",new Date().getTime()+".mp4");
            System.out.println("Full path of record sound is : "+file.getAbsolutePath());
            return file.getAbsolutePath();
        }           
    };          
    telephony.listen(listener, PhoneStateListener.LISTEN_CALL_STATE);           
}
    } 
```

难道我做错了什么？我听说在 Android 中无法轻松制作通话录音应用程序。

# vbscript - 使用 vbscript 的 Powerpoint 自动化

> ID：11498613
> 
> 赞同：1
> 
> 时间：2012-07-16T05:37:43.263
> 
> 标签：vbscript, powerpoint

我收到以下代码的错误消息：

```
Dim objPPT As PowerPoint.Application
Dim objPres As PowerPoint.Presentation

'Opening blank presentation
Set objPPT = WScript.CreateObject("PowerPoint.Application")
objPPT.visible = 1
Set objPres = objPPT.presentations.Add
objPres.Slides.Add (1, PowerPoint.PpSlideLayout.ppLayoutBlank) 
```

此脚本停止执行，提示错误消息为`Line 1 Char 12 Expected End of statement`

我是 vbscript 的新手，如果我犯了一些错误，请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T08:29:12.457

要使用[vbscript](http://msdn.microsoft.com/en-us/library/d1wf56tt%28v=vs.84%29.aspx)，您必须了解 vbscript 的语法。下面是添加幻灯片到 PPT 的示例代码（此处使用的 PPT 模板）

```
' Add a Slide to a Microsoft PowerPoint Presentation
 Const ppLayoutText = 2

 Set objPPT = CreateObject("PowerPoint.Application")
 objPPT.Visible = True

 Set objPresentation = objPPT.Presentations.Add

 objPresentation.ApplyTemplate _
 ("C:\Program Files\Microsoft Office\Templates\1033\ProjectStatusReport.potx")

 Set objSlide = objPresentation.Slides.Add _
 (1, ppLayoutText) 
```

# asp.net - 发送批量邮件 ASP.NET 不起作用

> ID：11498616
> 
> 赞同：1
> 
> 时间：2012-07-16T05:37:52.240
> 
> 标签：asp.net

我正在尝试发送大量邮件，但无论我发送多少邮件，我都只收到 500 封邮件。我正在循环发送邮件。这是一个示例。

```
foreach (EmailInfo data in emaildata.ToArray())
{
    SmtpClient smtpClient = new SmtpClient();
    MailMessage mailMsg = new MailMessage();

    smtpClient.Send(mailMsg);

    smtpClient.Dispose();
} 
```

我正在使用`.net framework 4.0`. 发送 500 封邮件后出现此异常

`Service not available, closing transmission channel. The server response was: too many connections`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:40:31.013

显然，服务器在固定时间内不接受那么多邮件和连接。你可能想放慢速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:41:57.723

您的 SMTP 服务器很可能将此解释为垃圾邮件尝试。从概念上讲，发送大量电子邮件很简单，但反垃圾邮件措施使事情变得更加困难。您的服务提供商是否知道您正在尝试批量发送邮件？会不会违反服务条款？这些问题是 MailChimp 等批量邮件服务存在的重要原因。

PS 要非常注意尝试变通方法以使其也能正常工作，如果您继续推动此操作，您可能会导致您的帐户被禁止或服务器列入黑名单。

# c - 将链表实现与 malloc 函数分离

> ID：11498618
> 
> 赞同：0
> 
> 时间：2012-07-16T05:38:15.607
> 
> 标签：c, memory-management

我被告知要设计一个链表模块，其中链表函数都在一个头文件中，但内存分配（malloc）不会发生在这些模块中。内存分配应该只发生在主函数中。我无法弄清楚。帮帮我吧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:42:08.470

您应该一次性`main`分配足够大的内存（A 内存池）。现在在您的模块中，您需要管理（分配和释放）该池中的内存块，而不是为`malloc`.

如果您不了解内存池，请阅读此内容 - [http://en.wikipedia.org/wiki/Memory_pool](http://en.wikipedia.org/wiki/Memory_pool)。

但是存在碎片问题，您需要解决这个问题。在下面的步骤中，我使用一个位数组来标记空闲和分配的节点。

例子-

*   在`main`您分配 50*sizeof(node) （50 取决于应用程序）
*   现在，您将分配池的指针传递给您的函数。
*   保留一个计数器，用于计算分配节点的数量，将其初始化为 0
*   还保留一个大小为 50 的位数组，初始化为 0（全部免费）
*   分配时，检查溢出，遍历位数组，找到第一个空闲节点。如果第*j*位为 0，则将新节点的地址作为 Base + *j* (*sizeof node) 传递，并递增计数器。将第*j*位设置为 1。
*   解除分配时，只需将计数器递减，并将相应位设置为 0。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:12:33.280

您可以将其作为结构数组执行，并通过数组索引链接它。然后可以在`main`函数中分配该数组。请注意，您必须跟踪列表中的条目数，因为列表将限制为您分配的条目数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T06:06:38.790

已经实现了：看看`<sys/queue.h>`那是一个只有标题的链表。

# c# - 禁用抽象方法的实现

> ID：11498619
> 
> 赞同：0
> 
> 时间：2012-07-16T05:38:29.500
> 
> 标签：c#

我有一个下面的代码，它有一个接口、抽象类和一个类。我想禁用 FreeCustomer 类中抽象方法 Print() 的实现。这可能吗？非常感谢。

```
 public interface ICustomer
    {
        string CustomerName { get; set; }
        double Amount { get; set; }
        string Print();
    }

    public abstract class Customer : ICustomer
    {
        public string CustomerName { get; set; }
        public double Amount { get; set; }
        public abstract string Print();
    }

    public class GoldCustomer : Customer
    {
        public override string Print() {
            return "You are a Gold Customer: " + CustomerName;
        }
    }

    public class FreeCustomer : Customer 
    {

    } 

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T05:44:39.280

即使有可能，这也是一个坏主意：为什么您只想执行合同的一部分？

您似乎遇到了这个问题，因为`ICustomer`接口试图做太多不同的事情（从而违反了[接口隔离原则](http://en.wikipedia.org/wiki/Interface_segregation_principle)）。

如果您并不总是需要或想要实现该`Print`方法，则将其从接口中取出，或将其移至单独的接口中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T06:12:39.080

派生类不需要实现基类的抽象方法的唯一情况是您将派生类也声明为抽象类。

正如 MSDN 文档所说[，](http://msdn.microsoft.com/en-us/library/ms173149.aspx) “如果基类将成员声明为抽象，则必须在直接从该类继承的任何非抽象类中重写该方法。如果派生类本身是抽象的，则它继承抽象成员而不实现它们。”

因此，您可以将 FreeCustomer 声明为抽象的，然后不需要在其中实现 print，尽管我认为它没有任何用途。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T05:56:16.580

在您的特定情况下，不要像`abstract`在基`Customer`类中那样声明该函数 - 而是使用`public virtual`, 并在基类中提供一个**空**实现。

然后您所要做的就是在您实际需要该`Print()`功能的类中覆盖它，在其他所有事情中它什么都不做（因为将使用基本实现）。这意味着您可以将其保留在界面上。

# tizen - 在 Tizen 中设置警报标签

> ID：11498620
> 
> 赞同：1
> 
> 时间：2012-07-16T05:38:30.993
> 
> 标签：tizen

任何人都知道如何以编程方式在 tizen 中为警报设置标签，当警报触发它不应该打开任何其他应用程序时，它应该显示给定的文本。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-28T09:26:22.320

通过“显示给定文本”，我假设您想要显示全屏应用程序或弹出窗口。

这里有一些方法可以做到这一点。

1.  您可以传递您自己的应用 ID 并[处理此事件](https://developer.tizen.org/development/api-references/native-application?redirect=/dev-guide/2.4/org.tizen.native.mobile.apireference/group__CAPI__ALARM__MODULE.html#gafac0e4fc42f5553f2f0c788dc9361e02)。

2.  对于弹出窗口，您可以使用[EFL Timer API](https://developer.tizen.org/development/api-references/native-application?redirect=/dev-guide/2.3.1/org.tizen.native.mobile.apireference/group__Ecore__Timer__Group.html)。

3.  我不建议这样做，但您可以将[两个应用程序打包为 package 的一部分](https://developer.tizen.org/forums/general-support/package-two-applications-one)。然后一个应用程序可以调用另一个应用程序。

# raphael - SVGFigure 可以在 Graphiti 中缩放为 VectorFigure 吗？

> ID：11498627
> 
> 赞同：0
> 
> 时间：2012-07-16T05:39:18.800
> 
> 标签：raphael, graphiti-js

我一直在玩 Draw2D Graphiti 的演示，只是想知道它是否可以缩放（在编辑器中更改宽度/高度）SVGFigure 例如 OpAmp，就像如何缩放基本形状一样？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:36:26.830

新版graphiti（0.9.87）内置了这个功能。

# xml - 如何在返回 XML 的 Razor 视图中关闭 HTML5 验证规则？

> ID：11498628
> 
> 赞同：4
> 
> 时间：2012-07-16T05:39:24.957
> 
> 标签：xml, asp.net-mvc, visual-studio-2010, html, razor

在我的 MVC4 应用程序中，我有一个 Razor 视图，它返回一些 XML。

在 Visual Studio 中，所有 XML 标记都被突出显示为无效的 HTML5 标记。

好的，我可以接受——除了 HTML5 验证也不允许我按照我的意愿使用`<source>`我的 XML 中的元素。

它实际上导致我的视​​图抛出错误，大概是因为我对`<source>`元素的使用在 HTML5 中无效。

如何在 Razor 中关闭 HTML5 验证，或者告诉它我的视图生成的是 XML，而不是 HTML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T05:50:30.297

我刚刚想出了一个解决方法。如果我`<source>`使用 HTML.Raw() 输出标签，它似乎没问题：

```
<some_markup>
@Html.Raw("<source>")@Model.DeviceId@Html.Raw("</source>")
</some_markup> 
```

有点蹩脚，但它的工作原理。不过，我仍然想知道如何使 Razor 使用 XML。

# bulkinsert - 批量插入时 MongoDb 中的对等错误重置连接

> ID：11498631
> 
> 赞同：3
> 
> 时间：2012-07-16T05:39:34.930
> 
> 标签：bulkinsert, pymongo

我正在尝试通过在 pymongo 中进行批量插入来插入 500 个文档，但出现此错误

```
File "/usr/lib64/python2.6/site-packages/pymongo/collection.py", line 306, in insert
    continue_on_error, self.__uuid_subtype), safe)
  File "/usr/lib64/python2.6/site-packages/pymongo/connection.py", line 748, in _send_message
    raise AutoReconnect(str(e))
pymongo.errors.AutoReconnect: [Errno 104] Connection reset by peer 
```

我环顾四周，发现[这里](http://comments.gmane.org/gmane.comp.db.mongodb.user/3606)发生这种情况是因为插入文档的大小超过 16 MB，因此根据 500 个文档的大小应该超过 16 MB。所以我像这样检查了 500 个文档（python 字典）的大小

```
size=0
for dict in dicts:
    size+=dict.__sizeof__()
print size 
```

这给了我`502920`。这就像 500 KB。不到 16 MB。那我为什么会收到这个错误。我知道我正在计算 python 字典而不是 BSON 文档的大小，而 MongoDB 接受 BSON 文档，但不能将 500KB 变成 16+ MB。此外，我不知道如何将 python dict 转换为 BSON 文档。

我的 MongoDB 版本是 2.0.6，pymongo 版本是 2.2.1

**编辑** 我可以使用 150 个文档进行批量插入，这很好，但是超过 150 个文档会出现此错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T23:55:04.187

此[批量插入错误](https://jira.mongodb.org/browse/PYTHON-414)已解决，但您可能需要更新您的 pymongo 版本：

`pip install --upgrade pymongo`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:42:35.363

> 由于批量插入的文档的总大小大于 16 MB，因此发生错误

```
My method of calculating the size of dictionaries was wrong. 
```

当我手动检查字典的每个键并发现 1 个键的大小为 300 KB 时。所以这确实使批量插入的文档的总大小超过了 16 MB。`(500*(300+)KB) > 16 MB`. 但是我仍然不知道如何在不手动检查字典的情况下计算字典的大小。有人可以建议吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T08:55:00.393

刚刚遇到了同样的错误，并通过创建我自己的小批量来解决它，如下所示：

```
region_list = []
region_counter = 0
write_buffer = 1000
# loop through regions
for region in source_db.region.find({}, region_column):
    region_counter += 1 # up _counter
    region_list.append(region)
    # save bulk if we're at the write buffer
    if region_counter == write_buffer:
        result = user_db.region.insert(region_list)
        region_list = []
        region_counter = 0
# if there is a rest, also save that
if region_counter > 0:
    result = user_db.region.insert(region_list) 
```

希望这可以帮助

注意：小更新，从 pymongo 2.6 开始，PyMongo 将根据最大传输大小自动拆分列表：“insert() 方法根据 max_message_size 自动将大批量文档拆分为多个插入消息”

# objective-c - 使用 BradLarson / GPUImage ** 问题的图像过滤效果

> ID：11498636
> 
> 赞同：4
> 
> 时间：2012-07-16T05:40:04.917
> 
> 标签：objective-c, ios, ios4

我想为 UIImage 添加不同的效果。目前我正在尝试使用 GUIImage 库。[https://github.com/BradLarson/GPUImage](https://github.com/BradLarson/GPUImage) 但是，我无法运行提供的大多数示例。对我来说唯一有效的例子是**FilterShowcase**它工作得很好。

**但问题是，它只适用于相机。我想要的是将静态图像加载到 UIImageView 并应用这些过滤器。**

我试过了，但做不到。

这就是我尝试的方式

```
 - (void)setupFilter;
{
//    videoCamera = [[GPUImageVideoCamera alloc]  initWithSessionPreset:AVCaptureSessionPreset640x480 cameraPosition:AVCaptureDevicePositionBack];
////    videoCamera = [[GPUImageVideoCamera alloc] initWithSessionPreset:AVCaptureSessionPreset640x480 cameraPosition:AVCaptureDevicePositionFront];
//    videoCamera.outputImageOrientation = UIInterfaceOrientationPortrait;

UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 350)];

imgView.Image=[UIImage imageNamed:@"WID-small.jpg"];

[self.view addSubview:imgView];

BOOL needsSecondImage = NO;

switch (filterType)
{
    case GPUIMAGE_SEPIA:
    {
        self.title = @"Sepia Tone";
        self.filterSettingsSlider.hidden = NO;

        [self.filterSettingsSlider setValue:1.0];
        [self.filterSettingsSlider setMinimumValue:0.0];
        [self.filterSettingsSlider setMaximumValue:1.0];

        filter = [[GPUImageSepiaFilter alloc] init];

        sourcePicture = [[GPUImagePicture alloc] initWithImage:imgView.image smoothlyScaleOutput:YES];
        [sourcePicture processImage];            
        [sourcePicture addTarget:filter];

    }; break; 
```

实际上我试图做的是，**加载静止图像**而不是**videoCamera**。但它不起作用。如果有人可以帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T18:30:06.997

首先，其他示例应用程序可能无法为您构建的原因有几个。如[本答案](https://stackoverflow.com/a/11483354/19679)所述，请确保您在 Xcode 窗口的左上角选择了应用程序的方案，而不是 GPUImage 框架项目。如果更改没有帮助，请退出 Xcode，从您的 DerivedData 目录中删除相关项目目录，然后重新启动 Xcode。由于最近 Xcode 版本中的错误，有时似乎需要这样做。

图像的过滤在项目文档中进行了描述，该文档位于 Readme.md 文件和您上面链接的页面上。特别是，请参阅标题为“处理静止图像”的部分：

> 有几种方法可以处理静止图像并创建结果。第一种方法是创建静止图像源对象并手动创建过滤器链：
> 
> ```
> UIImage *inputImage = [UIImage imageNamed:@"Lambeau.jpg"];
> 
> GPUImagePicture *stillImageSource = [[GPUImagePicture alloc] initWithImage:inputImage];
> GPUImageSepiaFilter *stillImageFilter = [[GPUImageSepiaFilter alloc] init];
> 
> [stillImageSource addTarget:stillImageFilter];
> [stillImageSource processImage];
> 
> UIImage *currentFilteredVideoFrame = [stillImageFilter imageFromCurrentlyProcessedOutput]; 
> ```
> 
> 对于您希望应用于图像的单个过滤器，您可以简单地执行以下操作：
> 
> ```
> GPUImageSepiaFilter *stillImageFilter2 = [[GPUImageSepiaFilter alloc] init];
> UIImage *quickFilteredImage = [stillImageFilter2 imageByFilteringImage:inputImage]; 
> ```

SimpleImageFilter 示例应用程序更详细地展示了如何执行此操作。

# nginx - Nginx中不同IP的不同域？

> ID：11498640
> 
> 赞同：4
> 
> 时间：2012-07-16T05:40:21.480
> 
> 标签：nginx

例如，我想使用具有不同 IP 地址的两个不同域

```
domain1.com - 12.34.56.78 
domain2.com - 98.76.54.32 
```

我在 Linux 操作系统上使用**nginx 。**我应该在我的 nginx.conf 中添加什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T06:15:30.943

您必须使用block创建两个**虚拟主机。**`server`

让我们假设`/var/www`包含任何 HTML 页面、CGI 脚本、...的目录`domain1.com`和目录`domain2.com`

```
server {
  listen          12.34.56.78:80;
  server_name     domain1.com

  index           index.html;
  root            /var/www/domain1.com
}

server {
  listen          98.76.54.32:80;
  server_name     domain2.com;

  index           index.html;
  root            /var/www/domain2.com
} 
```

# javascript - 在 JavaScript 中设置倒数计时器

> ID：11498660
> 
> 赞同：-9
> 
> 时间：2012-07-16T05:43:32.790
> 
> 标签：javascript, jquery

我需要设置一个倒计时。剩余时间，格式为`"00:00:00"`.

我需要创建一个倒数计时器，在四个`<span></span>`元素中显示分钟和秒。

例如，当我有 56 分 45 秒时，它的值应该设置如下：

```
5-with in one span element
6-with in second span element
4-with in third span element
5-with in last span element 
```

或者

```
<span>5</span><span>6</span><span>4</span><span>5</span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:51:43.550

这将使您开始并推动您朝着正确的方向前进。剩下的就看你了。

```
var start = 5;

function countdown() {
    $("#spanId").html(start--);
    if (start)
       setTimeout(countdown, 1000);
}
countdown(); 
```

# ios - ios核心数据 - 将实体记录复制到另一个实体

> ID：11498661
> 
> 赞同：1
> 
> 时间：2012-07-16T05:43:36.643
> 
> 标签：ios, core-data, ios4, nsentitydescription

我有 2 个实体，Units 和 BUnits，Units 实体有一个数据会被多次替换，BUnits 将是 Units 实体在清除数据之前的备份。

所以，我创建了一个`NSManagedObjectContext`实例，然后我通过使用为每个实体检索了一个实例

```
NSManagedObjectContext *context = [mainDelegate managedObjectContext];

NSEntityDescription *unitsEntity = [NSEntityDescription entityForName:@"Units" inManagedObjectContext:context];

NSEntityDescription *bUnitsEntity = [NSEntityDescription entityForName:@"BUnits" inManagedObjectContext:context]; 
```

但我没有设法将 Units 实体记录复制到 BUnits 实体，除了为每个记录创建一个循环，但我相信有更好的解决方案。

您对此有何看法，有更好的解决方案吗？

**更新：**

如果有人可以使用它，我使用的解决方案在我的回答中，我认为有更好的方法可以做到这一点，我会继续检查它，如果我发现任何问题，我会更新问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:24:27.853

这是我使用的，对每条记录使用循环：

```
- (void) copyEntities:(NSString *)sourceEntity And:(NSString *)destinationEntity {
NSManagedObjectContext *context = [mainDelegate managedObjectContext];

NSEntityDescription *Units = [NSEntityDescription entityForName:sourceEntity inManagedObjectContext:context];
NSEntityDescription *BUnits = [NSEntityDescription entityForName:destinationEntity inManagedObjectContext:context];

NSFetchRequest *dataRequest = [[NSFetchRequest alloc] init];

[dataRequest setEntity:Units];

NSError *error = nil;

NSArray *dataArray = [context executeFetchRequest:dataRequest error:&error];

for (UnitsClass *unit in dataArray) {

    UnitsClass *savedUnits;

    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:BUnits];
    NSPredicate *pred = [NSPredicate predicateWithFormat:@"(code = %@)", unit.code];
    NSPredicate *pred1 = [NSPredicate predicateWithFormat:@"(code2 = %@)", unit.code2];

    NSPredicate *compoundPredicate = [NSCompoundPredicate andPredicateWithSubpredicates:[NSArray arrayWithObjects:pred, pred1, nil]];

    [request setPredicate:compoundPredicate];

    NSError *error = nil;

    NSArray *objects = [context executeFetchRequest:request error:&error];

    //this if to indicate if we inserting to the BUnits or updating it.
    if ([objects count] > 0) {
        //Found the record, update The info
        savedUnits = [objects objectAtIndex:0];
    } else {
        savedUnits = [NSEntityDescription insertNewObjectForEntityForName:destinationEntity inManagedObjectContext:context];
    }

    savedUnits.code = unit.code;
    /*Add your updated info*/

    NSError *errors;
    if (![context save:&errors]) {
        NSLog(@"Whoops, couldn't save: %@", [errors localizedDescription]);
    }
}

NSLog(@"BUnits count = %d",[context countForFetchRequest:[NSFetchRequest fetchRequestWithEntityName:destinationEntity] error:&error]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:45:43.447

根据给定的信息，没有比循环每个单元对象并创建备份对象更好的方法了。

# facebook - url参数传递方法

> ID：11498664
> 
> 赞同：0
> 
> 时间：2012-07-16T05:43:39.547
> 
> 标签：facebook, url, twitter, parameters, parameter-passing

url 参数的传递如何在 facebook、twitter、youtube 或其他类似网站中工作。

例如：

脸书[http://www.facebook.com/](http://www.facebook.com/) **stackoverflowpage**

推特：http: [//twitter.com/](http://twitter.com/) **StackOverflow**

你管：[http ://www.youtube.com/user/](http://www.youtube.com/user/) **BBCWorldwide**

其中粗体是参数（我相信那些是参数）

我在大多数网站上看到的都是这样的，

[http://www.website.com/index.php?id=stackoverflow](http://www.website.com/index.php?id=stackoverflow)

那么上面那些网站是如何以不同的方法传递参数的，他们是如何做到的？或者当新用户加入这些网站时，是否会在他们的服务器中创建一个新文件。

例如： [http :](http://www.facebook.com/) **//www.facebook.com/stackoverflowpage** [http://www.facebook.com/stackoverflowpage.php （或](http://www.facebook.com/)**.aspx**任何方法）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T05:47:02.313

这通常通过在服务器端重写 URL 来完成。例如使用 .htaccess。一个典型的情况是：当一个[http://server.com/x/y](http://server.com/x/y)形式的请求进来时，它被重写为[http://server.com/index.php?param1=x¶m2=y](http://server.com/index.php?param1=x&param2=y)然后传递到请求处理器（比如 PHP）。

参考：[http ://en.wikipedia.org/wiki/Rewrite_engine](http://en.wikipedia.org/wiki/Rewrite_engine)

# c# - 使用 NTFS 对子文件夹应用权限

> ID：11498665
> 
> 赞同：0
> 
> 时间：2012-07-16T05:43:42.610
> 
> 标签：c#, ntfs

我使用以下代码为文件夹应用权限。这工作得很好，但我希望权限也适用于主文件夹内的所有子文件夹。我该如何实现呢？

```
 ADsSecurity objADsSec;
        SecurityDescriptor objSecDes;
        AccessControlList objDAcl;
        AccessControlEntry objAce1;
        AccessControlEntry objAce2;
        AccessControlEntry objAce3;
        Object objSIdHex;
        ADsSID objSId;

        objADsSec = new ADsSecurityClass();
        objSecDes = (SecurityDescriptor)(objADsSec.GetSecurityDescriptor("FILE://" + vPath));
        objDAcl = (AccessControlList)objSecDes.DiscretionaryAcl;

        objSId = new ADsSIDClass();
        objSId.SetAs((int)ADSSECURITYLib.ADS_SID_FORMAT.ADS_SID_SAM,   UserName.ToString());
        objSIdHex = objSId.GetAs((int)ADSSECURITYLib.ADS_SID_FORMAT.ADS_SID_SDDL);

        objAce2 = new AccessControlEntryClass();
        objAce2.Trustee = (objSIdHex).ToString();
        objAce2.AccessMask = (int)ActiveDs.ADS_RIGHTS_ENUM.ADS_RIGHT_GENERIC_READ;
        objAce2.AceType = (int)ActiveDs.ADS_ACETYPE_ENUM.ADS_ACETYPE_ACCESS_ALLOWED;
        objAce2.AceFlags = (int)ActiveDs.ADS_ACEFLAG_ENUM.ADS_ACEFLAG_VALID_INHERIT_FLAGS;
        objDAcl.AddAce(objAce2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:31:49.437

您是否已经尝试递归搜索目录？

此代码应该可以正常工作

```
void DirSearch(string sDir) 
{
    try 
    {
       foreach (string d in Directory.GetDirectories(sDir)) 
       {
        foreach (string f in Directory.GetFiles(d, txtFile.Text)) 
        {
           lstFilesFound.Items.Add(f);
        }
        DirSearch(d);
       }
    }
    catch (System.Exception excpt) 
    {
        Console.WriteLine(excpt.Message);
    }
} 
```

# windows-phone-7 - 焦点更改为在 Windows Phone 应用程序页面中单击 LoadMore 按钮

> ID：11498666
> 
> 赞同：0
> 
> 时间：2012-07-16T05:44:01.260
> 
> 标签：windows-phone-7, windows-phone-7.1

在我的 Windows Phone 应用程序中，我的一个页面中有一个带有 Load More 按钮的 ListBox。页面底部有一个文本框和一个按钮。当我单击列表框底部的加载更多按钮时，焦点会自动转到文本框并显示小键盘。我不需要将焦点转到 buttonclick 上的文本框。这个问题是如何发生的，我该如何克服这个问题。

用于列表框的样式的 xaml 如下所示

```
<phone:PhoneApplicationPage.Resources>
    <Style x:Key="ListBoxMore" TargetType="ListBox">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Foreground" Value="{StaticResource PhoneForegroundBrush}"/>
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
        <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Visible"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListBox">
                    <ScrollViewer x:Name="ScrollViewer">
                        <StackPanel>
                        <ItemsPresenter/>
                            <Border BorderBrush="Black" BorderThickness="0,0.5">
                                <Button Content="Load More..." Name="btnLoadMore" Visibility="Visible" Background="White" Foreground="#FF176DDC" Click="btnLoadMore_Click"></Button>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</phone:PhoneApplicationPage.Resources> 
```

如下所示的列表框的 xaml

```
<ListBox x:Name="userDetailsList" SelectionMode="Multiple" Style="{StaticResource ListBoxMore}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <Border BorderThickness="0,0.5,0,0" BorderBrush="Black" Width="440">
                    <Grid Width="430">
                        <Image Source="{Binding UserImage}"/>
                        <TextBlock Text="{Binding UserName}"/>
                        <TextBlock Text="{Binding Details}"/>
                        <TextBlock Text="{Binding Date}"/>
                    </Grid>
                </Border>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

当我单击 loadmore 按钮时，焦点转到位于列表框下方的文本框。那里只有一个文本框。

# asp-classic - 在包含文件中创建对象时出现 asp 错误“800706be”

> ID：11498668
> 
> 赞同：2
> 
> 时间：2012-07-16T05:44:21.683
> 
> 标签：asp-classic, tridion

我有 ASP 应用程序，让我清楚所有代码在我的旧服务器上工作正常。

我们最近将我们的应用程序移到了 windows 2008 server R2 SP1，现在在部署之后，在我们的 default.asp 页面中，我们包含了四个不同的文件，问题在于每个文件，所以我以一个文件为例。

主文件（default.asp）在顶部有下面的对象创建代码。

```
<%
Dim objTdsComponentLink, objTdsPageLink
Set objTdsComponentLink = Server.CreateObject("cd_link.ComponentLink")
Set objTdsPageLink= Server.CreateObject("cd_link.PageLink")
%> 
```

在这里一切正常，我们可以使用该对象而不会出现任何错误。

如上所述，我们包含四个不同的文件，并且在每个文件中我们为 PageLink 服务创建新对象，如下所示：

```
Set PageLink = Server.createObject("cd_link.PageLink")
<%  strURL = PageLink.GetLink("tcm:0-79-1", "tcm:79-64940-64", "", "", "more", True).URL%> 
```

问题是，如果我们尝试将新对象声明为 Set PageLink = Server.createObject("cd_link.PageLink")，则会出错。但是，如果我们使用上面在 default.asp 中声明的相同对象，它会完美运行，如果我们使用或尝试创建新对象，则会出现以下错误。

```
error '800706be'
/include/home/FuelIndex.asp, line 26 
```

我们是否在这里遗漏了一些配置/安装，并且令人惊讶的是为什么它适用于主页（default.asp）对象以及它在我们的旧设置中运行良好。

如果您能为上述问题提供一些建议/解决方案，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T07:13:52.650

我假设你在 IIS7 上。确保您已将服务器端包含作为您的网络服务器角色的一项功能打开。它在 server 2008 或更新的机器上默认不打开。它在服务器配置下，为 IIS 添加/删除角色。

如果包含确实在父路径中，请确保您已在 IIS 上启用父路径。确保您的包含代码在其语法中是正确的。可能想要使用包含虚拟进行测试，因为它更灵活（与包含文件相比）。

最后，如果您创建的组件是 32 位的，请确保您的应用程序池是 32 位的。或 64 位（如果您正在使用）。

# android - eclipse可以在调试时自动给你的apk起一个不同的名字吗？

> ID：11498672
> 
> 赞同：0
> 
> 时间：2012-07-16T05:44:41.637
> 
> 标签：android, eclipse

我想在我的手机上测试我的应用程序，但显然使用调试证书签名的应用程序与市场上发布的应用程序冲突。

我正在尝试查找我怀疑与 proguard 相关的问题，因此我想在我的手机上对这两种情况进行比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:48:11.570

您可以手动重命名您的 apk 文件名。然后安装它，这样它就不会删除您以前的安装

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:53:08.160

为了知道 proguard 是否有效，您可以对 apk 的代码进行去混淆处理，看看它是否可读。

您还可以查看输出 proguard 文件夹并查看它所做的事情。

或者，您可以在带有字符串的纯类（与android没有任何关系的类）上使用反射，以查看proguard是否已触及它。如果是这样，你会得到一个异常，因为应用程序找不到它（因为 proguard 更改了它的名称），反之亦然。

# ios - 头部运动检测 - iOS

> ID：11498676
> 
> 赞同：2
> 
> 时间：2012-07-16T05:45:22.200
> 
> 标签：ios, camera

有人问我是否可以使用 iPhone 的摄像头检测某人的头部运动。这是因为这个人想要检测他的头部何时接触到一些从上面掉下来的随机物体。

[这场比赛](http://www.juegosgratis.ca/juegos/Dominar-la-pelota/)几乎代表了我想说的。是否可以使用摄像头检测某人的头部运动或身体其他部位，以避免球触地？不要在屏幕上使用手指，也不要移动设备。

你认为这可能吗？因为我没有看到任何应用程序/游戏使用某人的动作。如果在 iOS 中是可能的......是否有可能在 Android 上做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:40:02.157

Have a look at this Apple demo code, it's pretty close to what you're after: [http://developer.apple.com/library/ios/#samplecode/SquareCam/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/SquareCam/Introduction/Intro.html)

# c# - 为什么 Void 是一个结构？

> ID：11498677
> 
> 赞同：22
> 
> 时间：2012-07-16T05:45:29.860
> 
> 标签：c#, .net

我意识到在 Microsoft .NET Framework 中，`void`返回类型是一个结构。为什么？

```
...
public void TestMethod()
{

}
... 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-16T05:47:31.837

该框架使用[一个被调用的值类型`System.Void`](http://msdn.microsoft.com/en-us/library/system.void.aspx)来表示`void`与反射一起使用的返回类型关键字。尽管`void`意味着缺少返回值，但从技术上讲，它仍然是一种类型，并且为了在代码中这样表达，它必须是结构（值类型）或类（引用类型）。

参见[`MethodInfo.ReturnType`](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.returntype.aspx)示例。

至于为什么框架设计者选择创建`System.Void`一个结构而不是一个类是任何人的猜测，但它首先必须由一个类型来表示。我同意这样的评论，即避免通常与参考查找相关的不必要的开销，以及其他优化。

# vbscript - 我希望 vb 脚本从 vpn 网络中的远程计算机向我的本地计算机发送电子邮件通知

> ID：11498678
> 
> 赞同：0
> 
> 时间：2012-07-16T05:45:32.463
> 
> 标签：vbscript

我有以下代码在本地网络中运行良好。但我希望相同的功能适用于通过 vpn 连接的远程机器，即使我没有登录也是如此。

```
Function Sendmail()
    Dim objMessage
    Set objMessage = CreateObject("CDO.Message")
    objMessage.Subject = "Checking for latest file"
    objMessage.From = "d@tkd.com"
    objMessage.To = "s@tkd.com"
    objMessage.TextBody = "This is to intimate you regrding latest File........."

    objMessage.Configuration.Fields.Item _
    ("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2  

    'Name or IP of Remote SMTP Server
    objMessage.Configuration.Fields.Item _
    ("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "mail.tkd.com"

    'Type of authentication, NONE, Basic (Base64 encoded), NTLM
    objMessage.Configuration.Fields.Item _
    ( "http://schemas.microsoft.com/cdo/configuration/smtpauthenticate" ) = cdoBasic

    'Your UserID on the SMTP server
    objMessage.Configuration.Fields.Item _
    ( "http://schemas.microsoft.com/cdo/configuration/sendusername" ) = "deepika@tecknodreams.com"

    'Your password on the SMTP server
    objMessage.Configuration.Fields.Item _
    ("http://schemas.microsoft.com/cdo/configuration/sendpassword") = "123"

    'Server Port
    objMessage.Configuration.Fields.Item _
    ("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25

    'Use SSL for the connection (False or True)
    objMessage.Configuration.Fields.Item _
    ( "http://schemas.microsoft.com/cdo/configuration/smtpusessl" ) = False

    'Connection Timeout in seconds (the maximum time CDO will try to establish a connection to the SMTP server)
    objMessage.Configuration.Fields.Item _
    ( "http://schemas.microsoft.com/cdo/configuration/smtpconnectiontimeout" ) = 60

    objMessage.Configuration.Fields.Update
    objMessage.Send
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:18:44.947

下面的示例代码是否适合您将完全取决于您的 SMTP 服务器的配置。如果您的服务器需要凭据才能传输电子邮件，那么此代码很可能会失败。如果您的服务器允许匿名邮件提交，它应该可以正常工作。

```
'
' Sends an email via SMTP using CDO
'
' When calling, supply:
'   fromAddress (e.g., "me@my.org")
'   toAddress   (e.g., "you@your.org")
'   subjectLine (e.g., "Here's what this message is about")
'   messageBody (e.g., "Here is a detailed message with lots of info...")
'   smtpServer  (e.g., "mail-server.my.org")
'
Sub sendEmail(fromAddress, toAddress, subjectLine, messageBody, smtpServer)

   Const cdoSendUsingPickup = 1 'Send message using the local SMTP service pickup directory.
   Const cdoSendUsingPort = 2 'Send the message using the network (SMTP over the network).

   Const cdoAnonymous = 0 'Do not authenticate
   Const cdoBasic = 1 'basic (clear-text) authentication
   Const cdoNTLM = 2 'NTLM

   Set objMessage = CreateObject("CDO.Message")
   objMessage.Subject = subjectLine
   objMessage.From = fromAddress
   objMessage.To = toAddress
   objMessage.TextBody = messageBody
   'objMessage.AddAttachment "C:\files\filename.pdf"

   objMessage.Configuration.Fields.Item _
    ("http://schemas.microsoft.com/cdo/configuration/sendusing") = cdoSendUsingPort

   'Name or IP of Remote SMTP Server
   objMessage.Configuration.Fields.Item _
    ("http://schemas.microsoft.com/cdo/configuration/smtpserver") = smtpServer

   'Type of authentication, NONE, Basic (Base64 encoded), NTLM
   objMessage.Configuration.Fields.Item _
    ("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = cdoAnonymous

   'Server port (typically 25)
   objMessage.Configuration.Fields.Item _
    ("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25

   'Connection Timeout in seconds (the maximum time CDO will try to establish a connection to the SMTP server)
   objMessage.Configuration.Fields.Item _
    ("http://schemas.microsoft.com/cdo/configuration/smtpconnectiontimeout") = 30

   objMessage.Configuration.Fields.Update

   '==End remote SMTP server configuration section==

   objMessage.Send

End Sub 
```

# java - 如何在 WAR 文件中设置 MAC 地址

> ID：11498679
> 
> 赞同：0
> 
> 时间：2012-07-16T05:45:35.163
> 
> 标签：java, jsp, war

这是一个用例：

用户访问我的网站并填写注册表，然后我们捕获用户 IP 地址、MAC 地址、操作系统版本和主机名。WAR 文件会根据注册表单中提供的用户电子邮件地址直接发送给用户。然后，用户下载此 WAR 文件并进行部署。

我的问题是，当下载的 WAR 运行时，它只捕获用户端（客户端）的 IP 地址、MAC 地址、主机名、操作系统版本（用户）。如果这些特定值不匹配，则不会在客户端部署 WAR 文件。

# android - 在android中查看不同语言文本的选项？

> ID：11498680
> 
> 赞同：4
> 
> 时间：2012-07-16T05:45:41.930
> 
> 标签：android, language-agnostic, unicode

**我正在开发一个应用程序，我想在其中为用户提供三种语言选项，例如英语、印地语和旁遮普语（区域语言）。**

*我想知道最好的方法是什么？* **我找到的一种方法是**制作英语、印地语和旁遮普语的三个不同的 xml 文件。然后解析这些xml文件。我已经知道如何在 android 中显示旁遮普字体。但我必须在我的应用程序中使用 4-5 本书。所以这样看起来不合适。

**我还必须在我的应用程序中添加书签功能。因此，任何人都可以建议我使用三种语言的不同书籍的最佳方式，其中添加书签功能也很容易。**

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:38:50.443

将每个版本存储为原始资源（在 /res/raw 中）。拿出来

```
public static String getRawFile(int resourceId, Resources resources) {

    Writer writer;

    try {
        InputStream is = resources.openRawResource(resourceId);
        writer = new StringWriter();
        char[] buffer = new char[BUFFER_SIZE];
        try {
            Reader reader = new BufferedReader(new InputStreamReader(is, "UTF-8"));
            int n;
            while ((n = reader.read(buffer)) != -1) {
                writer.write(buffer, 0, n);
            }
        } finally {
            is.close();
        }
    } catch (Exception ex) {
        Log.e(TAG, "Unable to read raw resource!", ex);
        return null;
    }

    return writer.toString();
} 
```

像这样调用：

```
Resources resources = context.getResources();
String text = Utilities.getRawFile(R.raw.test_response, resources)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T19:07:48.193

我相信最好的答案是遵循[支持多种语言](http://developer.android.com/training/basics/supporting-devices/languages.html)的 android 文档这里是[ISO 639-1 代码](http://www.loc.gov/standards/iso639-2/php/code_list.php)列表所以你的项目看起来像这样：

```
MyProject/
    res/
       values/
           strings.xml
       values-es/
           strings.xml
       values-pa/
           strings.xml
       values-hi/
           strings.xml 
```

然后每个 strings.xml 将具有每种语言的不同值。这将涵盖您的用户界面中的内容以及类似的内容。

然后根据您的问题，如果这是某种阅读器，您将下载适合用户语言设置的 xml 文件/书籍。

```
Locale.getDefault().getDisplayLanguage(); 
```

# iphone - iOS开发建议

> ID：11498682
> 
> 赞同：2
> 
> 时间：2012-07-16T05:45:53.117
> 
> 标签：iphone, ios, ipad

我正在开发一个 iOS 应用程序——它基本上是内容驱动的——它有分类信息。但是，是的，内容会经常更新——如果用户想现在或以后更新，则会收到警报提示。所以我需要的建议是：

1.  内容由管理员管理，网络服务用 PHP 编写，后端是 MySQL。当用户下载应用程序时 - 整个数据库应该与应用程序一起安装还是应该只移动数据并将其存储在设备数据库中？

2.  当内容有更新时 - 如何与设备同步？会有一个标志来检测最后一次更新吗？

对此的任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T05:56:37.747

1）由于更新后端数据库中的数据比在应用程序中更容易和更快（由于需要重新构建和重新提交应用程序，漫长的审批过程等），因此部署您的数据是有意义的具有使用适当数据模型（可能使用核心数据）的空数据库的应用程序。第一次运行时，您的应用程序可以从 Web 服务下载最新数据。

2) 您的应用可以在用户首选项中存储上次成功同步的时间戳，并将该值包含在其对 Web 服务的请求中，以便从服务中获取对数据的增量更新。

3) 如果您有大量数据，我建议您将 UI 设计为可以在数据到达时立即显示一些数据，同时显示一条清晰的消息，通知用户同步仍在进行中。这样用户可以很快开始与应用程序交互，但应用程序仍然可以在后台继续下载数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:23:56.483

是的，这是个好主意。我使用以下过程：

1）第一次加载应用程序时下载数据库。

2) 使用修改后的时间戳存储每条记录。

3) 每次应用启动时，调用webservice，参数为最新时间戳。

如果任何记录已被修改或插入，它将被提供 web 服务。对于已删除的记录，每条记录都有一个删除标志。如果为真，则删除该记录。

# iphone - 如何将 HID 配置文件连接到 iOS 设备？

> ID：11498692
> 
> 赞同：9
> 
> 时间：2012-07-16T05:46:31.630
> 
> 标签：iphone, objective-c, bluetooth

我想通过 HID（人机接口设备）配置文件检查蓝牙设备是否是我想要的设备。

是否可以？？

以及如何获取 HID 配置文件？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T08:18:30.260

根据您的评论，我确实理解您的要求：您想编写一个 iOS 应用程序，该应用程序从使用 HID 配置文件通过蓝牙连接的设备获取输入。应用程序不应接受来自其他类似设备的输入。

第一个答案是：你不能那样做。[蓝牙 HID 连接是](http://www.youtube.com/watch?v=JHhc2p7gZxE)在操作系统级别建立的

*   点击“设置”，选择“通用”>“蓝牙”
*   打开蓝牙
*   打开蓝牙输入设备
*   在您的 iOS 设备的蓝牙设备发现中选择您的远程输入设备并配对展位设备

一旦连接了输入设备，它就会按预期工作：发送输入事件（在键盘字符/控制信号的情况下）。在应用程序级别，您无法访问低级别数据，例如蓝牙地址、制造商信息等。Gamekit 无济于事。它比操作系统级别更高，并且还需要在远程端具有适当应用程序的 iOS 设备。

再想一想，由于您也在开发远程蓝牙输入设备，您可能会更上一层楼。您按照上述方式连接设备，但您对输入设备发送到移动设备的数据进行加密。您的应用程序解密数据，您的问题就解决了。第三方设备不使用您的协议，也无法与您的应用程序对话。（因此您的应用程序将忽略他们的输入）。但是这种方法会破坏与其他不使用您的应用程序的设备的兼容性（例如，您无法再让蓝牙键盘与普通电脑一起使用）。

# php - 如果数据库值为 NULL，jQuery 隐藏 HTML 标记

> ID：11498693
> 
> 赞同：-2
> 
> 时间：2012-07-16T05:46:33.117
> 
> 标签：php, jquery, dreamweaver

我正在使用 Dreamweaver 的内置 PHP 功能来构建一个小型应用程序。我正在以重复的 ul, li 结构检索数据，如下所示。

*   客户名称
*   职位描述
*   完成年份

客户名称和职位描述将始终具有值，完成年份可能具有空值。如果完成年份为空值，则不应显示“li”。

我正在尝试使用 jQuery 来做到这一点，但对我来说看起来很复杂。我可以在 PHP 中实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:59:12.510

```
$array = array('client_name'=>'John', 'job_descr'=>'Programming', 'year'=>null);

foreach ($array as $data) {
    echo '<ul>';
    ($data['client_name']!=null)?echo '<li>'.$data['client_name'].'</li>':echo '';
    ($data['job_descr']!=null)?echo '<li>'.$data['job_descr'].'</li>':echo '';
    ($data['year']!=null)?echo '<li>'.$data['year'].'</li>':echo '';
    echo '<ul>';
} 
```

如果我理解正确，这就是你所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:03:37.577

用 PHP 做这件事是合乎逻辑的方式——你必须向我们展示 PHP 源代码来帮助你——它只涉及一个 if 语句检查 null 并且如果它是真的不回显该列表..但是回答你的jquery 问题.. 如果你的输出是这样的：

```
<ul id="this_is_the_list">
    <li>
        <ul>
            <li>Client name value</li>
            <li>Job desc value</li>
            <li>This isnt null</li>
        </ul>
    </li>
    <li>
        <ul>
            <li>Another name value</li>
            <li>Another Job desc value - this one will be null</li>
            <li></li>
        </ul>
    </li>
</ul>​ 
```

你的jQuery将是：

```
$(document).ready(function() {
        //for each additional list within the target list
        //which has a 3rd li (i would suggest giving this a
        //class instead to better target it).
        $('#this_is_the_list li li:nth-child(3)').each(function() {
            if($(this).text().length < 1) { //if its empty
                 $(this).parents('#this_is_the_list > li').remove(); //remove its parent list item
            }
        });
    });​ 
```

小提琴在这里演示：http: [//jsfiddle.net/QxcLS/](http://jsfiddle.net/QxcLS/)

# php - 从 Yii 中的责备行为扩展中获取名称

> ID：11498696
> 
> 赞同：1
> 
> 时间：2012-07-16T05:46:46.600
> 
> 标签：php, yii, yii-extensions

通过使用 Yii 框架中的[Blameble Behavior](http://www.yiiframework.com/extension/blameable-behavior/)扩展，我想跟踪创建者和更新者。在这里我可以记录他们的身份，现在我想知道如何从中获取他们的名字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:39:14.883

为此，您必须在模型中添加一个关系

```
'creator' => array(self::BELONGS_TO, 'User', 'my_own_creator_column_name'),
'updater' => array(self::BELONGS_TO, 'User', 'my_own_updater_column_name'), 
```

然后您可以从`$model->creator`和`$model->updater`

# android - 地图视图错误

> ID：11498698
> 
> 赞同：0
> 
> 时间：2012-07-16T05:46:53.583
> 
> 标签：android, map

我不知道我做错了什么，因为这不起作用并且 log cat 显示错误，如下所示。我尝试了不同的代码，但仍然出现此错误。有人会帮我解决这个错误吗？

**正在设置的权限：**

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

**活动**

```
public class Maping extends MapActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_map);

    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

**XML 布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/map_main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#6b6a6a"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#333333"
        android:baselineAligned="false"
        android:orientation="horizontal" >

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="0.97"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/mapname"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_marginBottom="10dp"
                android:layout_marginTop="10dp"
                android:textColor="#ffffff"
                android:textSize="20dp"
                android:text="@string/map" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:background="#8da635" >

            <Button
                android:id="@+id/addplace"
                android:layout_width="50dp"
                android:layout_height="50dp"
                android:background="@drawable/add" />
        </LinearLayout>
    </LinearLayout>

    <com.google.android.maps.MapView
        android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="0lz3OFI5uqLUtnyTYnfbV-lWI6pL5NzX-BUk2dg"
        android:clickable="true"
        android:enabled="true" >
    </com.google.android.maps.MapView>

</LinearLayout> 
```

**日志猫**

```
07-16 10:46:49.180: E/AndroidRuntime(364): FATAL EXCEPTION: main
07-16 10:46:49.180: E/AndroidRuntime(364): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{hopscriber.com/hopscriber.com.Maping}: java.lang.ClassNotFoundException: hopscriber.com.Maping in loader dalvik.system.PathClassLoader[/data/app/hopscriber.com-1.apk]
07-16 10:46:49.180: E/AndroidRuntime(364):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
07-16 10:46:49.180: E/AndroidRuntime(364):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
07-16 10:46:49.180: E/AndroidRuntime(364):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-16 10:46:49.180: E/AndroidRuntime(364):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
07-16 10:46:49.180: E/AndroidRuntime(364):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-16 10:46:49.180: E/AndroidRuntime(364):  at android.os.Looper.loop(Looper.java:130)
07-16 10:46:49.180: E/AndroidRuntime(364):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-16 10:46:49.180: E/AndroidRuntime(364):  at java.lang.reflect.Method.invokeNative(Native Method)
07-16 10:46:49.180: E/AndroidRuntime(364):  at java.lang.reflect.Method.invoke(Method.java:507)
07-16 10:46:49.180: E/AndroidRuntime(364):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-16 10:46:49.180: E/AndroidRuntime(364):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-16 10:46:49.180: E/AndroidRuntime(364):  at dalvik.system.NativeStart.main(Native Method)
07-16 10:46:49.180: E/AndroidRuntime(364): Caused by: java.lang.ClassNotFoundException: hopscriber.com.Maping in loader dalvik.system.PathClassLoader[/data/app/hopscriber.com-1.apk]
07-16 10:46:49.180: E/AndroidRuntime(364):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
07-16 10:46:49.180: E/AndroidRuntime(364):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
07-16 10:46:49.180: E/AndroidRuntime(364):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
07-16 10:46:49.180: E/AndroidRuntime(364):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
07-16 10:46:49.180: E/AndroidRuntime(364):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:52:59.163

您尚未在 AndroidManifest.xml 文件中声明您的 Activity。

```
<activity android:name="hopscriber.com.Maping">//here hopscriber.com.Maping==Path of Activity
   <intent-filter>
     <action android:name="android.intent.action.MAIN" />
     <category android:name="android.intent.category.LAUNCHER" />
   </intent-filter>
 </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:06:29.620

将以下行添加到应用程序标记中的清单文件中

```
<uses-library android:name="com.google.android.maps" /> 
```

# objective-c - 如何从 Objective-C 发送 Minecraft Server 数据包

> ID：11498701
> 
> 赞同：3
> 
> 时间：2012-07-16T05:47:07.107
> 
> 标签：objective-c, ios5, network-protocols, minecraft, packets

我确实看过将[数据包发送到 Minecraft 服务器的问题：Objective-C](https://stackoverflow.com/questions/10859049/sending-packets-to-minecraft-server-objective-c)

如果他们在此处使用此链接，则可能是相关的：[Protocol - Minecraft Server](http://mc.kev009.com/Protocol)但是，他们没有使用该链接。他们使用主要用于一般信息的 wiki。我引用的是创建一个新客户端。但是，当我在 IRC 上询问时。他们说话就像我什么都不知道一样。所以，我在这里问。

```
 How do i Send the packet correctly with the fields to Minecraft server? 
```

请注意，Minecraft 服务器的代码在网站上。

我拥有的代码，连接到服务器，Minecraft 服务器上的输出如下所示：

```
 [INFO] Disconnecting /192.168.1.4:60911: Took too long to log in
 [INFO] Disconnecting /192.168.1.4:60915: Took too long to log in
 [INFO] Disconnecting /192.168.1.4:60927: Took too long to log in
 [INFO] /192.168.1.4:60934 lost connection
 [INFO] Disconnecting /192.168.1.4:60954: Took too long to log in 
```

我如何正确发送这些数据包？

```
 NSUserDefaults *defs = [NSUserDefaults standardUserDefaults];
    unsigned char *ch[] = {0x02, [[defs stringForKey:@"Username"] UTF8String]};
    UInt8 i = (UInt8)ch;
    NSData *requestData = [NSData dataWithBytes:&i length:sizeof(i)];

    NSString *reqLog = [[NSString alloc] initWithData:requestData encoding:NSUTF8StringEncoding];

    [asyncsocket writeData:requestData withTimeout:-1.0 tag:0];

    //[asyncsocket readDataToData:[GCDAsyncSocket LFData] withTimeout:-1.0 tag:0];

    [asyncsocket readDataToLength:5 withTimeout:-1.0 tag:0];

    /*NSData *responseTerminatorData = [@"\n" dataUsingEncoding:NSASCIIStringEncoding];

     [asyncsocket readDataToData:responseTerminatorData withTimeout:-1.0 tag:0];*/ 
```

最后说明：IOS5 是此应用程序的平台

# iphone - 使用 Cocos2D 进行图像渲染

> ID：11498709
> 
> 赞同：-4
> 
> 时间：2012-07-16T05:48:14.243
> 
> 标签：iphone, ios

嗨，我正在开发一个带有 cocos2D 框架的 iPhone 应用程序，用于图像渲染。我们如何将图像拆分为图层，例如考虑一个房屋图像，我想溢出房屋的屋顶、门、墙壁等，我想改变各自的颜色或图像，任何人都可以帮我解决这个问题。！我还需要一些示例代码。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:53:28.010

使用不同的图层进行不同的渲染深度。

您可以在此处阅读有关 Cocos2D 编程的更多信息：[单击此处](http://cocos2d.org/doc/programming_guide/index.html)

获取 Cocos2D SDK 并运行一些示例测试应用程序。[在此处下载 SDK](http://www.cocos2d-iphone.org/download)

# android - 关于 Xtify 推送通知即将使用 GCM 服务

> ID：11498711
> 
> 赞同：1
> 
> 时间：2012-07-16T05:48:39.377
> 
> 标签：android

我是一名 Android 开发人员，我正在使用 Xtify 进行推送通知。当我使用 xtify 时，我使用了 C2DM，但在 xtify 的网站上，C2DM 已被弃用，人们已经开始使用 GCM 服务。我已经阅读了文档，其中有一个名为 Migration 的选项。在迁移中，我们只需要将用户 ID 替换为我做过的应用程序密钥，但我仍然没有收到通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:49:38.223

Xtify 发布了他们的 GCM 版本的 Android SDK，它取代了 C2DM。您可以在开发者网站上下载带有示例应用程序的副本。[Xtify SDK 下载](http://developer.xtify.com/display/sdk/Download+the+Xtify+SDKs "Xtify SDK 下载")

# php - 为什么 getUser() 总是返回 0？

> ID：11498713
> 
> 赞同：1
> 
> 时间：2012-07-16T05:48:57.973
> 
> 标签：php, facebook, sdk

这个 Facebook PHP SDK 快把我逼疯了！

```
getUser() always return 0 
```

让我解释一下我的工作：

```
$facebook = new Facebook(array(
              'appId'  => FACEBOOK_APP_ID,
              'secret' => FACEBOOK_SECRET,
            ));
$user = $facebook->getUser();

if ($user === 0)
{
   $loginUrl = $facebook->getLoginUrl(array(
        'scope'        => 'email, publish_stream',
        'redirect_uri' => FB_REDIRECT_URI
   ));
   echo "<script type='text/javascript'>window.location = '$loginUrl';</script>";
   exit();
} 
```

简单的代码，相当于示例。好的...

我在 login.php 和 complete.php 中有这段代码

我从 login.php 发送请求并将 redirect_uri 设置为 complete.php （与我在**使用 Facebook 登录的网站中**写的一样......显然是一个完整的 URL，如[https://www.example.com/complete.php](https://www.example.com/complete.php)）

我真的不明白为什么我仍然得到0！这是不可能的，我按照 LoginURL 登录 Facebook。

我还通过 URL 传递了“权限”。

我已经在这个app注册了，所以我真的不明白为什么这个SDK一直返回0。

有人可以帮助我吗？

信息：

我只选择了带有 Facebook 登录的网站，没有其他...“Facebook 上的应用程序”未选择。

**编辑：**

```
https://www.facebook.com/login.php?api_key=216182291818102&skip_api_login=1&display=page&cancel_url=https%3A%2F%2Fwww.example.com%2Fusers%2Fcomplete%2F%3Ferror_reason%3Duser_denied%26error%3Daccess_denied%26error_description%3DThe%2Buser%2Bdenied%2Byour%2Brequest.%26state%3D720fab495a21639032816d3c688ae87b&fbconnect=1&next=https%3A%2F%2Fwww.facebook.com%2Fdialog%2Fpermissions.request%3F_path%3Dpermissions.request%26app_id%3D216182291818102%26redirect_uri%3Dhttps%253A%252F%252Fwww.example.com%252Fusers%252Fcomplete%252F%26display%3Dpage%26response_type%3Dcode%26state%3D720fab495a21639032816d3c688ae87b%26perms%3Duser_birthday%252Cemail%26fbconnect%3D1%26from_login%3D1%26client_id%3D216182291818102&rcount=1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:29:19.243

尝试这个

```
$facebook = new Facebook(array(
          'appId'  => FACEBOOK_APP_ID,
          'secret' => FACEBOOK_SECRET,
          'cookie' => true,
)); 
```

首先您登录 facebook 帐户，然后执行此代码。

```
$user=$facebook->getUser(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:57:45.640

我使用了相同的示例，它对我有用。我的连接是这样的，尝试添加 cookie = true 并检查，希望对你有用

```
$facebook = new Facebook(array(
          'appId'  => FACEBOOK_APP_ID,
          'secret' => FACEBOOK_SECRET,
          'cookie' => true,
)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T06:01:57.360

你从哪里得到的例子？这是来自 FB 开发者页面（https://developers.facebook.com/docs/authentication/server-side/）：

```
 <?php 

   $app_id = "YOUR_APP_ID";
   $app_secret = "YOUR_APP_SECRET";
   $my_url = "YOUR_URL";

   session_start();
   $code = $_REQUEST["code"];

   if(empty($code)) {
     $_SESSION['state'] = md5(uniqid(rand(), TRUE)); //CSRF protection
     $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
       . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
       . $_SESSION['state'];

     echo("<script> top.location.href='" . $dialog_url . "'</script>");
   }

   if($_SESSION['state'] && ($_SESSION['state'] === $_REQUEST['state'])) {
     $token_url = "https://graph.facebook.com/oauth/access_token?"
       . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
       . "&client_secret=" . $app_secret . "&code=" . $code;

     $response = file_get_contents($token_url);
     $params = null;
     parse_str($response, $params);

     $graph_url = "https://graph.facebook.com/me?access_token=" 
       . $params['access_token'];

     $user = json_decode(file_get_contents($graph_url));
     echo("Hello " . $user->name);
   }
   else {
     echo("The state does not match. You may be a victim of CSRF.");
   }

 ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T06:06:47.650

你的代码看起来不错。您应该为 facebook 数组再提供一个参数，即`cookie=>true`. 您应该参考以下对我有用的教程。

[http://www.9lessons.info/2011/02/login-with-facebook-and-twitter.html](http://www.9lessons.info/2011/02/login-with-facebook-and-twitter.html)

希望它对你有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T06:56:24.253

现在我发布APP的配置。

```
App ID/API Key
xxxxxxxxxxxxxxxxxx // your App ID
App Secret
xxxxxxxxxxxxxxxxxxxxxxx //Your secret key
Site URL
http://localhost/      //your site url
Contact Email
example@example.com   //your email id
Support URL
http://localhost      //your support url 
```

我只提供了这么多信息，它对我来说非常有用。

# android - 为什么未决意图不广播并给予例外？

> ID：11498714
> 
> 赞同：0
> 
> 时间：2012-07-16T05:49:01.057
> 
> 标签：android

我制作应用程序的流程是_

1- 成功登录 facebook 后获取所有好友 ID 并存储到 Arraylist。2-之后我设置alarmManaget每天执行一次，代码如下：-

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.friendlist);
    lvfrnd = (ListView)findViewById(R.id.listview);
    Bundle mbundle = getIntent().getExtras();
    if(mbundle!=null && Constant.isService==false )
    {
        appId = mbundle.getString("appid");
    }
    if(mbundle!=null && Constant.isService==true )
    {
        isSuccess = mbundle.getString("success");
    }
    mUserIdFetcher = new UserIdFetcher();
    mfriendIdlist = mUserIdFetcher.getFriendIdList(appId);
    String friendId = makeStringOfId(mfriendIdlist);
    SharedPreferences mprePreferences = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
    SharedPreferences.Editor editor = mprePreferences.edit();
    editor.putString("userId", friendId);
    editor.commit();
    setAlarmManager(appId);
    setListView();
 }

private String makeStringOfId(ArrayList<String>  mfIdlist)
{
    int length =0;
    String midstring = "";
    if(mfIdlist!=null)
    {
         length = mfIdlist.size();
    }

    for(int mindex =0;mindex<length;mindex++)
    {
        midstring = midstring+mfIdlist.get(mindex)+"/";
    }
    return midstring;

}

private void setAlarmManager(String appid)
 {
    // add minutes to the calendar object
       Calendar updateTime = Calendar.getInstance();
        updateTime.setTimeZone(TimeZone.getDefault());
        updateTime.set(Calendar.HOUR_OF_DAY,10);
        updateTime.set(Calendar.MINUTE,42);

   Intent mintent = new Intent(this,BirthDayReciever.class);
   mintent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
   PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0, mintent, PendingIntent.FLAG_CANCEL_CURRENT);
   AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
   // should be AlarmManager.INTERVAL_DAY (but changed to 15min for testing)
   alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, updateTime.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pendingIntent);
   System.out.println("call--------------1");
 }

 private void setListView()
 {
     if(Constant.mfriendInfolist!=null &&Constant.mfriendInfolist.size()>0)
     {
       mlistcustomer = new ListCustomAdapter(Friendlist.this,Constant.mfriendInfolist);
       lvfrnd.setAdapter(mlistcustomer);
       mlistcustomer.notifyDataSetChanged(); 
     }
  } 
```

在上面的活动中，当执行到达挂起的意图时发生此异常：-

```
 07-16 10:44:26.193: E/AndroidRuntime(773): Uncaught handler: thread main exiting due to uncaught exception
     07-16 10:44:26.333: E/AndroidRuntime(773): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.bday.Alarm/com.bday.Alarm.Friendlist}: java.lang.IllegalArgumentException: Can't use FLAG_RECEIVER_BOOT_UPGRADE here
   07-16 10:44:26.333: E/AndroidRuntime(773):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2596)
    07-16 10:44:26.333: E/AndroidRuntime(773):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2621)
    07-16 10:44:26.333: E/AndroidRuntime(773):  at android.app.ActivityThread.access$2200(ActivityThread.java:126)
   07-16 10:44:26.333: E/AndroidRuntime(773):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1932)
    07-16 10:44:26.333: E/AndroidRuntime(773):  at android.os.Handler.dispatchMessage(Handler.java:99)
   07-16 10:44:26.333: E/AndroidRuntime(773):   at android.os.Looper.loop(Looper.java:123)
    07-16 10:44:26.333: E/AndroidRuntime(773):  at android.app.ActivityThread.main(ActivityThread.java:4595)
    07-16 10:44:26.333: E/AndroidRuntime(773):  at java.lang.reflect.Method.invokeNative(Native Method)
   07-16 10:44:26.333: E/AndroidRuntime(773):   at java.lang.reflect.Method.invoke(Method.java:521)
  07-16 10:44:26.333: E/AndroidRuntime(773):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
   07-16 10:44:26.333: E/AndroidRuntime(773):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
    07-16 10:44:26.333: E/AndroidRuntime(773):  at dalvik.system.NativeStart.main(Native Method)
    07-16 10:44:26.333: E/AndroidRuntime(773): Caused by: java.lang.IllegalArgumentException: Can't use FLAG_RECEIVER_BOOT_UPGRADE here
    07-16 10:44:26.333: E/AndroidRuntime(773):  at android.os.Parcel.readException(Parcel.java:1222)
    07-16 10:44:26.333: E/AndroidRuntime(773):  at android.os.Parcel.readException(Parcel.java:1206)
    07-16 10:44:26.333: E/AndroidRuntime(773):  at android.app.ActivityManagerProxy.getIntentSender(ActivityManagerNative.java:2065)
    07-16 10:44:26.333: E/AndroidRuntime(773):  at android.app.PendingIntent.getBroadcast(PendingIntent.java:230)
    07-16 10:44:26.333: E/AndroidRuntime(773):  at com.bday.Alarm.Friendlist.setAlarmManager(Friendlist.java:102)
   07-16 10:44:26.333: E/AndroidRuntime(773):   at com.bday.Alarm.Friendlist.onCreate(Friendlist.java:71)
   07-16 10:44:26.333: E/AndroidRuntime(773):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
   07-16 10:44:26.333: E/AndroidRuntime(773):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2544)
   07-16 10:44:26.333: E/AndroidRuntime(773):   ... 11 more 
```

广播类启动服务，它获取用户的 facebook 朋友信息名称、生日并设置到对象类中，然后将该类放入 arralist 并将该数组列表显示到 Listview 我正在使用广播来更新这个朋友列表，每天一次我的服务类是：-

```
 public static final String PREFS_NAME = "MyPrefsFile";
 String [] friendFBId=null;

public UIUpdater(String name)
{

    super("UIUpdater");
    System.out.println("call--------------3");
    SharedPreferences mprePreferences = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
    String stringofUserId = mprePreferences.getString("userId","");
    if(stringofUserId!=null)
    {
        friendFBId = stringofUserId.split("/"); 
    }

}

@Override
protected void onHandleIntent(Intent intent) 
{

    Log.d("check--------------", "entered DisplayLoggingInfo");

    URL img_value = null;

    Bundle params =new Bundle();
    int length = friendFBId.length;

    String mAccessdata=Facebook.getAccessToken();

         try {
             System.out.println("fdartr");
            params.putString("format", "json");
            params.putString("access_token", mAccessdata);
            if(friendFBId!=null && friendFBId.length>0)
            {
                FriendsObject mFriendsObject = null;

                for(int mindex =0;mindex<10;mindex++)
                {
                      mFriendsObject = new FriendsObject();
                     String url = "https://graph.facebook.com/"+friendFBId[mindex];
                     System.out.println("infourl   "+url);
                     String response = Util.openUrl(url, "GET", params);
                        JSONObject json = new JSONObject(response);

                        try {
                            String name=json.getString("name");
                            mFriendsObject.setName(name);
                        } catch (Exception e) {
                            e.printStackTrace();
                        }

                        try {
                            String fname = json.getString("first_name");
                            mFriendsObject.setFirst_name(fname);
                        } catch (Exception e) {
                            e.printStackTrace();
                        }

                        try {
                            String lname = json.getString("last_name");
                            mFriendsObject.setLast_name(lname);
                        } catch (Exception e) {
                            e.printStackTrace();
                        }

                        try {
                            String gender = json.getString("gender");
                            mFriendsObject.setGender(gender);
                        } catch (Exception e) {
                            e.printStackTrace();
                        }

                        try {
                            String location = json.getString("locale");
                            mFriendsObject.setLocale(location);
                        } catch (Exception e) {
                            e.printStackTrace();
                        }

                        try {
                            String web = json.getString("link");
                            mFriendsObject.setLink(web);
                        } catch (Exception e) {
                            e.printStackTrace();
                        }

                        try {
                            String bdate=json.getString("birthday");
                            mFriendsObject.setBirthday(bdate);
                        } catch (Exception e) {
                            e.printStackTrace();
                        }

                        try {
                            String username=json.getString("username");
                            mFriendsObject.setUsername(username);
                        } catch (Exception e) {
                            e.printStackTrace();
                        }

                        try {
                            String imgurl =" http://graph.facebook.com/"+friendFBId[mindex]+"/picture";
                            System.out.println("imgurl  ========= "+imgurl);
                            mFriendsObject.setImgUrl(imgurl);
                        } catch (Exception e) {
                            e.printStackTrace();
                        }
                        System.out.println("================="+Constant.mfriendInfolist.size());
                        Constant.mfriendInfolist.add(mindex,mFriendsObject);
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
        }
        Bundle mbundle = new Bundle();
        intent = new Intent(this,Friendlist.class);
        Constant.isService = true;
        mbundle.putString("success","SUCCESS");
        startActivity(intent);
} 
```

执行广播后发生此异常：-

```
 07-16 11:39:01.443: E/AndroidRuntime(1012): Uncaught handler: thread main exiting due to uncaught exception
  07-16 11:39:01.463: E/AndroidRuntime(1012): java.lang.RuntimeException: Unable to instantiate service com.bday.Alarm.UIUpdater: java.lang.InstantiationException: com.bday.Alarm.UIUpdater
  07-16 11:39:01.463: E/AndroidRuntime(1012):   at android.app.ActivityThread.handleCreateService(ActivityThread.java:2878)
  07-16 11:39:01.463: E/AndroidRuntime(1012):   at android.app.ActivityThread.access$3200(ActivityThread.java:126)
   07-16 11:39:01.463: E/AndroidRuntime(1012):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1986)
  07-16 11:39:01.463: E/AndroidRuntime(1012):   at android.os.Handler.dispatchMessage(Handler.java:99)
  07-16 11:39:01.463: E/AndroidRuntime(1012):   at android.os.Looper.loop(Looper.java:123)
  07-16 11:39:01.463: E/AndroidRuntime(1012):   at android.app.ActivityThread.main(ActivityThread.java:4595)
  07-16 11:39:01.463: E/AndroidRuntime(1012):   at java.lang.reflect.Method.invokeNative(Native Method)
  07-16 11:39:01.463: E/AndroidRuntime(1012):   at java.lang.reflect.Method.invoke(Method.java:521)
   07-16 11:39:01.463: E/AndroidRuntime(1012):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
    07-16 11:39:01.463: E/AndroidRuntime(1012):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
   07-16 11:39:01.463: E/AndroidRuntime(1012):  at dalvik.system.NativeStart.main(Native Method)
  07-16 11:39:01.463: E/AndroidRuntime(1012): Caused by: java.lang.InstantiationException: com.bday.Alarm.UIUpdater
      07-16 11:39:01.463: E/AndroidRuntime(1012):   at java.lang.Class.newInstanceImpl(Native Method)
      07-16 11:39:01.463: E/AndroidRuntime(1012):   at java.lang.Class.newInstance(Class.java:1479)
     07-16 11:39:01.463: E/AndroidRuntime(1012):    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2875)
      07-16 11:39:01.463: E/AndroidRuntime(1012):   ... 10 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:12:12.680

Intent 标志应该放在 Intent 对象上（定义它们的地方）。创建待处理意图时的标志是不同的。

也不`FLAG_RECEIVER_BOOT_UPGRADE`是供应用程序使用的。它不在 SDK 中。

**根本原因：**不要将任何 FLAG_ACTIVITY_ 常量与 getBroadCast() 或 sendBroadcast() 一起使用。而是使用 intent.setFlags(0);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-31T08:02:46.367

Some say this is a bug in Android and is removed in 4.4:

[https://stackoverflow.com/a/22883183/305135](https://stackoverflow.com/a/22883183/305135)

as a temporary solution you can use this :

```
notificationIntent.setFlags(0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T05:57:42.030

找出此意图标志出现的位置：`FLAG_RECEIVER_BOOT_UPGRADE`

然后删除它或找到一种不同的方式来做你想做的事情。

# xml - 使用 XSLT 1.0 对多个属性进行分组

> ID：11498717
> 
> 赞同：2
> 
> 时间：2012-07-16T05:49:56.173
> 
> 标签：xml, xslt, xpath, xslt-1.0

输入 XML：

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<document>
  <section name="foo" p="Hello from section foo" q="f" w="fo1"/>
  <section name="foo" p="Hello from section foo1" q="f1" w="fo1"/>
  <section name="bar" p="Hello from section bar" q="b" w="ba1"/>
  <section name="bar" p="Hello from section bar1" q="b1" w="ba1"/>
</document> 
```

预期的输出 XML：

```
<document>
  <section name="foo" w= "fo1">
      <contain p="Hello from section foo" q="f" />
      <contain p="Hello from section foo1" q="f1" />
  </section>
  <section name="bar" w= "ba1">
      <contain p="Hello from section bar" q="b" />
      <contain p="Hello from section bar1" q="b1" />
  </section>
</document> 
```

我的应用程序只能使用 XSLT 1.0，所以我不能使用`xsl:for-each-group`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T06:17:37.757

利用：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:key name="k" match="section" use="@name"/>
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="/document">
    <xsl:copy>
      <xsl:apply-templates select="section[generate-id() = generate-id(key('k', @name))]"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="section">
    <xsl:copy>
      <xsl:copy-of select="@name | @w"/>
      <xsl:for-each select="key('k', @name)">
        <contain p="{@p}" q="{@q}"/>
      </xsl:for-each>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

# asp.net-mvc - ASP.NET MVC 4 的移动“选择器”此时是否不可靠？

> ID：11498723
> 
> 赞同：1
> 
> 时间：2012-07-16T05:50:19.090
> 
> 标签：asp.net-mvc, mobile

我问是因为我在我的网站上注意到，如果我用 iPhone 打它，有时它会显示移动视图，有时它会显示常规视图。

我还读到 MVC 4 在确定浏览器是否来自移动设备方面并不是特别有效，这是真的吗？如果是这样，我们能做些什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:52:34.547

**更新：** Microsoft 已针对此错误发布了[解决方法包。](http://nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes)

我在[这里](http://forums.asp.net/post/5095212.aspx)添加了这个解决方法，

```
public class MyDefaultViewLocationCache : DefaultViewLocationCache, IViewLocationCache
{
    public MyDefaultViewLocationCache(TimeSpan timeSpan): base(timeSpan)
    {
    }
    public MyDefaultViewLocationCache()
        : base()
    {
    }

    public new string GetViewLocation(HttpContextBase httpContext, string key)
    {
        var location = base.GetViewLocation(httpContext, key);
        if (location == null)
        {
            var cache = httpContext.Cache;
            RemoveAllCacheStartWith(key, cache);
        }
        return location;
    }

    private static void RemoveAllCacheStartWith(string key, System.Web.Caching.Cache cache)
    {
        var keyWithoutDisplayMode = key.Substring(0, key.Substring(0, key.Length - 1).LastIndexOf(':') + 1);
        var items = new List<string>();
        var enumerator = cache.GetEnumerator();
        while (enumerator.MoveNext())
        {
            var _key = enumerator.Key.ToString();
            if (_key.StartsWith(keyWithoutDisplayMode))
            {
                items.Add(_key);
            }
        }
        foreach (string item in items)
        {
            cache.Remove(item);
        }
    }

    public new void InsertViewLocation(HttpContextBase httpContext, string key, string virtualPath)
    {
        base.InsertViewLocation(httpContext, key, virtualPath);
    }
}

// In App Start
ViewEngines.Engines.OfType<RazorViewEngine>().First().ViewLocationCache =
new MyDefaultViewLocationCache(); 
```

有关详细信息，请参阅[此](http://weblogs.asp.net/imranbaloch/archive/2012/08/31/display-mode-bug-in-asp-net-mvc-4-and-workaround.aspx)。

# php - imagecopyresampled 后我无法输出新图像

> ID：11498724
> 
> 赞同：0
> 
> 时间：2012-07-16T05:50:29.267
> 
> 标签：php, image, resize

有人可以帮帮我.. 我想检查我的调整大小是否正常工作，但我无法输出 imagecopyresampled 图像。它现在输出一堆奇怪的字符。

```
//uploading image
    $image_file = $_FILES['image']['tmp_name'];
    $image_size = @getimagesize($image_file);

    $image_mime = $image_size['mime'];
    $image_width = $image_size['0'];
    $image_height  = $image_size['1'];
    $image_ratio = $image_width/$image_height;

    //not an image
    if ($image_size === false) {
        error('1');
    } 

    //check to see if valid image type
    switch ($image_mime){
        case 'image/jpg':
        case 'image/jpeg':
        case 'image/pjpeg':
            $image_file = @imagecreatefromjpeg($image_file);
            break;

        case 'image/png':
            $image_file = @imagecreatefrompng($image_file);
            break;

        default: 
            error('2');
            break;
    }

    if ($image_width < 450 || $image_height < 350) {
        //image too small
        error('3');
    } 

    if ($image_ratio >= 1){
        //resize by height
        $height = 350;
        $ratio = $height/$image_height;
        $width = $image_width * $ratio;
    } else {
        //resize by width
        $width = 450;
        $ratio = $width/$image_width;
        $height = $image_height * $ratio;
    }

    //get the center axis
    $x_center = ($image_width - $width)/2;
    $y_center = ($image_height - $height)/2;

    $new_image = imagecreatetruecolor($width, $height);
    imagecopyresampled($new_image, $image_file, 0, 0, $x_center, $y_center, $width, $height, $image_width, $image_height);

    imagepng($new_image);

    exit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:53:15.293

那些奇怪的字符*是以*二进制输出的图像。您的浏览器不知道那应该是图像，因为您没有告诉它。在图像输出之前添加一个标题，以告知浏览器它正在处理什么样的数据：

```
header('Content-Type: image/png'); 
```

# ios - AFNetworking：附加参数作为 PUT 请求的查询字符串

> ID：11498729
> 
> 赞同：4
> 
> 时间：2012-07-16T05:50:34.410
> 
> 标签：ios, afnetworking

首先，我意识到对于 PUT 请求，请求参数应该在请求正文中传递。但是，我正在使用一个 API（我只是在使用，而不是开发），它期望请求参数作为 PUT 请求的查询字符串附加。

我正在使用 AFHTTPClient 的子类。对于我所指的特定 PUT 请求，我使用**getPath:parameters:success:failure:**。

到目前为止，我找到的解决方案是手动构造**路径**变量以包含我要传递的参数。当然，这并不理想，我想知道是否还有其他不易出错的选项。

**简而言之，有没有办法使用 AFHTTPClient （的子类）发送 PUT 请求，并将传递的参数附加（和编码）作为查询字符串（就像 GET 请求一样）？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T08:23:09.750

AFHTTPClient.m 中的 getPath:parameters:success:failure 方法调用 requestWithMethod:path:parameters。在后一种方法中，根据某些值检查 HTTP 方法以确定如何将参数附加到请求中。如您所见，默认情况下，参数仅应在 GET、HEAD 或 DELETE 请求的情况下附加到 URL。由于您也需要在 PUT 请求的情况下将它们附加到 URL，因此修改 requestWithMethod:path:parameters 如下：

```
 - (NSMutableURLRequest *)requestWithMethod:(NSString *)method 
                                      path:(NSString *)path 
                                parameters:(NSDictionary *)parameters 
{   
    NSURL *url = [NSURL URLWithString:path relativeToURL:self.baseURL];
    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] initWithURL:url] autorelease];
    [request setHTTPMethod:method];
    [request setAllHTTPHeaderFields:self.defaultHeaders];

    if ([method isEqualToString:@"GET"] || [method isEqualToString:@"HEAD"]) {
        [request setHTTPShouldUsePipelining:YES];
    }

    if (parameters) {        
        if ([method isEqualToString:@"GET"] || [method isEqualToString:@"HEAD"] || [method isEqualToString:@"DELETE"] || [method isEqualToString:@"PUT"]) {
            url = [NSURL URLWithString:[[url absoluteString] stringByAppendingFormat:[path rangeOfString:@"?"].location == NSNotFound ? @"?%@" : @"&%@", AFQueryStringFromParametersWithEncoding(parameters, self.stringEncoding)]];
            [request setURL:url];
        } else {
            NSString *charset = (NSString *)CFStringConvertEncodingToIANACharSetName(CFStringConvertNSStringEncodingToEncoding(self.stringEncoding));
            switch (self.parameterEncoding) {
                case AFFormURLParameterEncoding:;
                    [request setValue:[NSString stringWithFormat:@"application/x-www-form-urlencoded; charset=%@", charset] forHTTPHeaderField:@"Content-Type"];
                    [request setHTTPBody:[AFQueryStringFromParametersWithEncoding(parameters, self.stringEncoding) dataUsingEncoding:self.stringEncoding]];
                    break;
                case AFJSONParameterEncoding:;
                    [request setValue:[NSString stringWithFormat:@"application/json; charset=%@", charset] forHTTPHeaderField:@"Content-Type"];
                    [request setHTTPBody:[AFJSONStringFromParameters(parameters) dataUsingEncoding:self.stringEncoding]];
                    break;
                case AFPropertyListParameterEncoding:;
                    [request setValue:[NSString stringWithFormat:@"application/x-plist; charset=%@", charset] forHTTPHeaderField:@"Content-Type"];
                    [request setHTTPBody:[AFPropertyListStringFromParameters(parameters) dataUsingEncoding:self.stringEncoding]];
                    break;
            }
        }
    }

    return request;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-25T19:00:19.553

您可以在不修改底层 AFNetworking 代码的情况下执行 datwalk 答案中的代码正在执行的操作。使用 AFNetworking 创建包含 URL 参数的路径：

```
NSDictionary *mutableParameters = [[NSMutableDictionary alloc] initWithObjectsAndKeys:@"csv",@"format", @"0",@"level", @"2013-10-25", @"keydate", nil];

NSString *urlPath = [NSString stringWithFormat:@"applications/%@/Planning?%@", name, AFQueryStringFromParametersWithEncoding(mutableParameters, NSUTF8StringEncoding)];

NSString *apiFunctionPath = [urlPath stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

[self putPath:apiFunctionPath
   parameters:nil
      success:^(AFHTTPRequestOperation *operation, id XML) {
          NSLog(@"%@",XML);
      }
      failure:^(AFHTTPRequestOperation *operation, NSError *error) {
          NSLog(@"%@",error);
      }]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-11T19:58:55.167

对于我的 API，更改 AFHTTPClient 对象的编码解决了这个问题：

```
myAFHTTPClient.parameterEncoding = AFJSONParameterEncoding; 
```

# objective-c - 如何创建LinkedIn关注按钮networkapicall url

> ID：11498732
> 
> 赞同：0
> 
> 时间：2012-07-16T05:51:27.880
> 
> 标签：objective-c, linkedin

如何创建LinkedIn关注按钮networkapicall url，我有第一个请求的人/~/following/companies/，第二个请求我需要networkapicall的url。如果有人可以提供networkapicall的url，我会感谢他们。 .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:54:06.087

您可以从以下网址获取链接：http: [//developer.linkedin.com/plugins/share-plugin-generator](http://developer.linkedin.com/plugins/share-plugin-generator)

他们为您提供个人资料 URL 的链接

**编辑**：

使用`UIWebView`并将链接作为`NSString`

# asp.net - 如何将我的 silverlight 应用程序与 SQL Server 2005 连接

> ID：11498733
> 
> 赞同：0
> 
> 时间：2012-07-16T05:51:36.023
> 
> 标签：asp.net, .net, sql, silverlight, wcf-data-services

我正在尝试将我的 silverlight 应用程序与 Sql server 2005 连接以进行登录。我对 Silverlight 完全陌生，想在 Silverlight 中建立自己的网站。请推荐有用的网站以供参考。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:59:01.983

您必须使用 Web 服务示例 WCF。1)**将 WCF 添加到您的项目中。**

```
//This is your interface Class.
 namespace SilverlightApplication1.Web
 {      
  [ServiceContract]
  public interface IService1
  {
    [OperationContract]
    bool UserLogin(string email, string password);
  }
 }

 //This is your service code behind class
 namespace SilverlightApplication1.Web
 {   
  public class Service1 : IService1
  {
    public bool UserLogin(string email,string password)
    {
                // Your logic here to verify user name and password
    }
  }
 }

 //After creating the service. Add a reference to your application.** 
```

2)**将服务引用添加到您的 Silverlight 应用程序。** 右键单击您的项目，选择 Web 引用选项并将服务添加到您的项目中。现在，如果您的表单上有一个按钮控件，它将向您的 wcf 服务提交数据。在其单击事件中添加以下代码。

```
 Service1Client proxy ; 
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        proxy.UserLogin += new EventHandler<InsertDataCompletedEventArgs>(proxy_UserLogin);
        proxy.UserLogin(txtEmail.Text, "Password");
    }

   void proxy_UserLogin(object sender, InsertDataCompletedEventArgs e)
    {
        if (e.Result == true)
        {
            lblMesg.Content = "User Login successfully";
        }
        else
        {
            lblMesg.Content = "User record not found";
        }
    } 
```

在按钮 Click 事件中调用该服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T05:59:31.097

这可能会对您有所帮助 [http://www.codeproject.com/Articles/37522/7-Simple-Steps-to-Connect-SQL-Server-using-WCF-fro](http://www.codeproject.com/Articles/37522/7-Simple-Steps-to-Connect-SQL-Server-using-WCF-fro)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:41:18.727

If you want a SQL Server connection for logging on, you can create a Silverlight Business Application project. It has user logon built in. This way, you can concentrate on the rest of your Silverlight application's features.

# django - django + PyMongo 池化的最佳实践？

> ID：11498734
> 
> 赞同：10
> 
> 时间：2012-07-16T05:51:41.350
> 
> 标签：django, mongodb, connection-pooling, pymongo

我`db = pymongo.Connection()`在 Django 的 views.py 中调用了一个简单的 MongoDB 连接来存储一些简单的统计信息。

使其自动支持 MongoDB 连接池的最佳实践是什么？

我需要把`end_request()`代码放在哪里？

连接时如何选择`max_pool_size`参数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T05:59:02.423

[PyMongo 中的连接池是如何工作的？](https://pymongo.readthedocs.io/en/stable/faq.html#how-does-connection-pooling-work-in-pymongo)

> 每个 Connection 实例都有内置的连接池。默认情况下，每个线程在第一次操作时都会保留自己的套接字。这些套接字一直保留到该线程调用 end_request() 为止。
> 
> 调用 end_request() 允许将套接字返回到池中，并由其他线程使用，而不是创建新的套接字。明智地使用此方法对于具有许多线程或长时间运行的线程（很少调用 PyMongo 操作）的应用程序很重要。
> 
> 或者，使用 auto_start_request=False 创建的连接将在所有线程之间（安全地）共享套接字。

我认为这取决于您拥有的应用程序类型以及请求将保持连接多长时间。调用的想法`end_request`有助于长时间运行的请求长时间保持套接字并导致创建许多套接字。如果单个请求可以在不再需要连接时释放连接，则套接字可以重新用于其他请求。

如果它们是快速请求，那么我相信`auto_start_request=False`可以通过重用套接字来实现。

确保连接继续使用相同的套接字意味着它将具有一致的读取。想想如果您进行了查询但它被延迟了，然后立即进行了另一个查询并且它使用了不同的套接字。此套接字设法在前一个套接字之前响应。您将有不一致的数据，因为它不反映以前的写入。

# asp.net-mvc-3 - 如何在 MVC 应用程序中的层之间使用事件进行通信

> ID：11498740
> 
> 赞同：0
> 
> 时间：2012-07-16T05:52:13.247
> 
> 标签：asp.net-mvc-3, events, event-handling, repository-pattern, 3-tier

我正在尝试将事件用作 3 层应用程序中层之间的一种通信形式，因为建议使用事件来避免层之间的耦合。但是，当结果中需要同步响应时，我无法弄清楚如何使用事件，例如 MVC Web 应用程序。考虑下面的例子

```
//1\. Repository for Employee (Database Tier)

interface IEmployeeRepository
{
    //event to signal add complete in repository
    public event EventHandler event_EmployeeAdded_To_Repository;

    void AddEmployee(Employee emp);

}

public class EmployeeRepository: IEmployeeRepository
{
    //implementation of event
    public event EventHandler event_EmployeeAdded_To_Repository;

    public void AddEmployee(Employee emp)
    {
        //Save to database

        //Fire event to signal add complete in repository
        event_EmployeeAdded_To_Repository(null,e);
    }
}

//2\. Business Tier for Employee

interface IEmployee
{
    //event to signal add complete in business tier
    public event EventHandler event_EmployeeAdded_To_Entity;
    public void AddEmployee();

}

public class Employee : IEmployee
{
    public event EventHandler event_EmployeeAdded_To_Entity;
    IEmployeeRepository _empRepository;

    //constructor injection
    public Employee(IEmployeeRepository empRepository)
    {
        this._empRepository = empRepository;

        //Add event handler for the repository event
        this._empRepository.event_EmployeeAdded_To_Repository += OnEmployeeAddedToRepository;
    }

    public void AddEmployee()
    {
        //Call repository method for adding to database
        _empRepository.AddEmployee(this);

    }

    //Event handler for the repository event
    public void OnEmployeeAddedToRepository(Object sender, EventArgs e)
    {
        //Fire event to signal add complete in business tier
        event_EmployeeAdded_To_Entity(null, e);
    }

}

//3\. Presentation Tier

public class EmployeeController : Controller
{
    IEmployee _emp;

    //constructor injection
    public EmployeeController(IEmployee emp)
    {
        this._emp = emp;

        //Add event handler for business tier event
        this._emp.event_EmployeeAdded_To_Entity += OnEmployeeAddedToEntity;
    }

    //This is an Ajax method call
    public ActionResult Add()
    {
        //Call add method of business tier
        _emp.AddEmployee();

        //What do I do here ?
    }

    //Event handler for the business tier event
    public void OnEmployeeAddedToEntity(Object sender, EventArgs e)
    {
        //What do I do here ?
    }

} 
```

在上面的示例中，我在存储库（数据库层）中定义了事件“event_EmployeeAdded_To_Repository”以通知存储库中的添加完成。在业务层中，我定义了处理此事件的事件处理程序“OnEmployeeAddedToRepository”。“OnEmployeeAddedToRepository”事件处理程序依次触发事件“event_EmployeeAdded_To_Entity”。最后，在表示层中，我定义了事件处理程序“OnEmployeeAddedToEntity”来处理业务层事件。

但是在控制器中，我有一个动作“Add”需要同步返回响应（在“AddEmployee”完成之后）以通知用户（或者可能调用另一个 ajax 动作）。触发事件只会将控制流从操作更改为事件处理程序。

那么在这种情况下你将如何使用事件呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:06:27.727

> 那么在这种情况下你将如何使用事件呢？

简短的回答是：你不会:)

你的处境是，你有一把锤子，你正在寻找一个钉子。而是确定*为什么*需要这样做。

通常，您几乎不会在域内知道域本身发生了什么事情。您可以查看域事件。但是再一次，一个特定的域可能会对另一个域中发生的事情更感兴趣。

如果您*确实*发现自己需要在网络服务器上知道添加了员工，那么无论如何我都会使用域事件。域事件通常用于在其他系统订阅的服务总线上发布事件。例如，一旦您在 HR 系统中添加了一名员工，访问控制系统就会想知道以便它可以开始发卡。在这种情况下，访问控制系统将使其端点订阅该`Company.HR.Messages.EmployeeAddedEvent`消息。

# java - 如何使用 Hibernate 覆盖使用 Hibernate 注释的特定条件的表数据？

> ID：11498742
> 
> 赞同：0
> 
> 时间：2012-07-16T05:52:20.890
> 
> 标签：java, hibernate

我们正在使用 Hibernate 生成销售报告。

**设想**

当用户在输入一些条件后单击生成报告按钮时，我正在使用休眠从数据库中获取数据，然后我们正在做一些数据操作以生成实际的报告数据。报表数据存储在 ArrayList 中，然后将其持久化到 CommissionSummary 表中的数据库中，该表与 hibernate 实体映射如下

**CommussionSummary.java**

```
@Column(length=100)
private String advisorName;
private String advisorCodeParent;
@Column(length=100)
private String advisorNameParent;
@Column(length=100)
private String advisorPost;
@Column
private Double percentage;
@Column
private Double diffPercentage;
@Column
private Double saleAmount;
@Column
private Long saleCount;
@Column
private Double commissionAmount;
@Column
private Integer month;
@Column
private Integer year; 
```

每个月都会生成报告。我的问题是：2012 年 7 月 5 日，用户生成了数据，所以我将此信息存储在 CommissionSummary 表中。现在用户在 2012 年 7 月 15 日生成了相同的报告，那么它应该覆盖早先月份的数据。

**覆盖标准应该是月份和年份。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:18:15.563

使用 HQL 查询获取一年中给定月份的 CommissionSummary：

```
select c from CommissionSummary where c.year = :year and c.month = :month 
```

如果不为空，则将其删除：

```
session.delete(existingCommissionSummary); 
```

然后保存新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:38:16.243

我相信您需要的是简单的数据检查。
解决方案一：
1\. 从数据库加载数据并检查这些数据是否存在重复。
2\. 如果您发现它们相等，请删除旧版本。

解决方案二：
另一种可能的解决方案是定义您的列**unique**，因此如果用户想要放置相同的数据，他将收到一些异常。像这样的东西：

```
@Table(name="TABLE_NAME", uniqueConstraints = {
@UniqueConstraint(columnNames={"advisorName", "advisorNameParent", "advisorPost", "percentage", "diffPercentage" , "saleAmount", "saleCount", "commissionAmount" })

@Column(name = "ADVISOR_NAME", length=100)
private String advisorName;
private String advisorCodeParent;
@Column(name = "ADVISOR_PARENT_NAME", length=100)
private String advisorNameParent;
@Column(name = "ADVISOR_POST" , length=100)
private String advisorPost;
@Column(name = "PERCENTAGE")
private Double percentage;
@Column (name = "DIFF_PERCENTAGE")
private Double diffPercentage;
@Column (name = "SALE_AMOUNT")
private Double saleAmount;
@Column (name = "SALE_COUNT")
private Long saleCount;
@Column (name = "COMMISSION_AMOUNT")
private Double commissionAmount; 
```

使用它，您可以检查是否有一些错误，您可以执行所需的操作。

# c# - FileVersionInfo 检索到不正确的文件版本

> ID：11498744
> 
> 赞同：0
> 
> 时间：2012-07-16T05:52:37.090
> 
> 标签：c#, .net, dll

我必须通过 C# 检索详细信息选项卡下的值，例如文件版本、.dll 和 .exe 文件的产品版本。我为此使用以下代码。

```
 FileVersionInfo myFile = FileVersionInfo.GetVersionInfo('Name of the file');
     //File Version
     string fileVersion = myFile.FileVersion; 
```

此代码的问题是它为某些文件提供了不正确的文件版本。这些文件的详细信息选项卡显示不同的文件版本和代码检索不正确的值。我不确定为什么会这样。

请帮忙。提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:26:18.487

> 预期版本（来自资源管理器）是 10.0.0.35，我得到 10.0.000.0035

那是同一个数字。文件版本号在本机资源中出现*两次*。当您在 C++ 程序中编辑版本资源时，您也可以看到一些内容。有一个人类可读的版本，对格式没有限制。这就是您正在阅读的内容，请注意 FileVersionInfo.FileVersion 如何返回*string*。

还有一个机器可读的版本，一个 64 位的数字。4 个部分各有 16 位。这就是 Explorer 正在阅读的内容。对应的属性是 FileMajorPart、FileMinorPart、FileBuildPart 和 FilePrivatePart。请注意它们如何返回*int*。

ProductVersion 也有这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-06T10:24:26.277

您可以通过以下方法获得完整的应用程序文件版本

```
FileVersionInfo myFile = FileVersionInfo.GetVersionInfo('Name of the file');
string fileVersion = string.Format("{0}.{1}.{2}.{3}", myFile.FileMajorPart, 
                                                      myFile.FileMinorPart, 
                                                      myFile.FileBuildPart, 
                                                      myFile.FilePrivatePart) 
```

# java - Java - 从 Jar 文件创建类

> ID：11498745
> 
> 赞同：5
> 
> 时间：2012-07-16T05:52:53.953
> 
> 标签：java, oop, class

是否可以从 jar 文件中加载一个类，然后从中创建一个对象？

注意：jar文件在程序编译的时候是没有的，是用户后期添加的，在用户启动程序的时候加载进去的。

我的代码是这样的：用户有一个 jar 文件，里面只有一个编译的 java 类。然后，用户将这个 jar 文件放在一个目录中并启动我的程序，该程序查看目录并找到这个 jar 文件。然后它加载这个 jar 文件并从中创建一个类，然后从中创建一个对象并将其添加到数组中。

除了从 jar 文件（作为 java.io 文件加载）创建一个类，然后从该类创建和对象之外，我已经完成了所有工作。

有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T06:01:31.237

你正在寻找[`Class#forName`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#forName(java.lang.String))和[`Class#newInstance`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#newInstance())方法。

[此链接](http://www.xyzws.com/Javafaq/what-does-classforname-method-do/17)提供了一个关于初始化知道其名称的类的好示例（从链接中提取）：

```
Class c = Class.forName("com.xyzws.AClass");
AClass a = (AClass)c.newInstance(); 
```

这些情况的一个很好的例子是使用 JDBC（正如链接也指出的那样），因为您初始化了要连接的 db 引擎驱动程序的对象。请记住，这个驱动程序来自一个导入到您的项目中的 jar，它可以是 MySQL、Oracle 或 MSSQL Server 的 jar，您只需提供驱动程序类名称并让 JDBC API 和 jar 处理 SQL 工作。

```
Class.forName("org.gjt.mm.mysql.Driver");
Connection con = DriverManager.getConnection(url, "myLogin", "myPassword"); 
```

此外，对于动态加载 jar 的这个特定问题，还有问答：

*   [我应该如何在运行时动态加载 Jars？](https://stackoverflow.com/q/60764/1065197)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:03:11.720

更简单的？方法是让用户将 jar 文件放在类路径中。
这样，您的代码将可以访问将由 jvm 加载的类

编辑：即使@Luiggi 的回答也假设 jar 在类路径中

# opengl - SDL_LoadBMP 加载位图倒置并镜像

> ID：11498747
> 
> 赞同：2
> 
> 时间：2012-07-16T05:53:00.337
> 
> 标签：opengl, sdl, textures

SDL_LoadBMP 将位图倒置加载并在 OpenGL 中镜像。可能是什么问题？

```
unsigned int loadTexture (const char * fileName)
{
    unsigned int texId;
    GLenum format;
    GLint colorCount;

    SDL_Surface * image = SDL_LoadBMP (fileName);

    colorCount = image->format->BytesPerPixel;
    if (colorCount == 4)
    {
         if (image->format->Rmask == 0x000000ff)
             format = GL_RGBA;
         else
             format = GL_BGRA;
    }
    else if (colorCount == 3)
    {
         if (image->format->Rmask == 0x000000ff)
             format = GL_RGB;
         else
             format = GL_BGR;
    }

    glGenTextures(1, &texId);
    glBindTexture(GL_TEXTURE_2D, texId);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

    glTexImage2D(GL_TEXTURE_2D, 0, colorCount, image->w, image->h, 0, format, GL_UNSIGNED_BYTE, image->pixels);

    SDL_FreeSurface(image);
    return texId;
} 
```

..这就是我绘制测试四边形的方式..

```
glBegin(GL_QUADS);
    glTexCoord2i(0, 0); glVertex3f(-1.0, -1.0, 0.0);
    glTexCoord2i(1, 0); glVertex3f( 1.0, -1.0, 0.0);
    glTexCoord2i(1, 1); glVertex3f( 1.0,  1.0, 0.0);
    glTexCoord2i(0, 1); glVertex3f(-1.0,  1.0, 0.0);
glEnd(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:39:18.883

OpenGL 总是假定纹理图像的原点位于“左下角”。

严格来说，OpenGL 假定纹理的数据从原点开始，并随着纹理坐标的增加而前进。所以如果你绘制一个纹理坐标向右和向上的纹理，图像原点将在左下角。

在 OpenGL 端无法更改此行为，因此您必须对加载的图像数据进行适当调整，或使用一些着色器技巧来翻转那里的方向。然而，大多数图像加载库都允许您选择您期望的原点，因此我将其设置为左下方。然后库在内部处理数据。

# c++ - 插入向量并调整其大小

> ID：11498748
> 
> 赞同：1
> 
> 时间：2012-07-16T05:53:01.327
> 
> 标签：c++, vector, insert, resize

如何调整包含整数值的向量向量的大小。

```
std::vector<std::vecotr<int>> MyVector;
int value = 10;

//need to insert values as 2 rows and 3 columns, like
//Myvector[0][0] = value;
//Myvector[0][1] = value;
//Myvector[0][2] = value;
//Myvector[1][0] = value;
//Myvector[1][1] = value;
//Myvector[1][2] = value;

// ......
//here i have to resize the vector size to 4 rows and 5 cols using resize() function.

MyVector.resize(.......); //Hoe is this possible. 
```

第一个问题是，我必须将值插入为 2 行和 3 列。我怎样才能`push_back`为此目的使用功能。之后需要调整到指定的大小。由于它是向量的向量，因此我对此感到担心。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T06:01:31.300

您可以将向量的向量视为一个矩阵，其中成员向量是“行”。

```
int main()
{
    std::vector<std::vector<int> > MyVector;
    //Create a row:
    std::vector<int> subVector;
    subVector.push_back(1);
    subVector.push_back(2);
    //put the row into the vector:
    MyVector.push_back(subVector);
    //create another row:
    subVector.clear();
    subVector.push_back(3);
    subVector.push_back(4);
    //put the second row into the vector
    MyVector.push_back(subVector);
    //access the first row and add an element to it:
    MyVector[0].push_back(6);
    //access the second row and add an element to it:
    MyVector[1].push_back(6);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T05:56:15.573

您可以初始化向量以包含两个向量，每个向量代表一行。每一个都可以初始化为包含 3 个元素，代表列：

```
std::vector<std::vecotr<int>> MyVector(2, std::vector<int>(3)); 
```

然后你可以通过推回新行来调整它的大小：

```
// add a row
MyVector.push_back(std::vector<int>(3)); 
```

要添加列，您可以 push_back 到每一行，使用辅助函数可以更好地实现

```
void appendColumn(std::vector<int> v); 
```

我认为通过编写包装类可以更好地管理这一切，因此您可以轻松确保所有向量的维度都与 NxM 矩阵一致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T06:29:37.047

你可以`MyVector`围绕你`vector`的`vector`. 您可以定义自己的调整大小操作。在这种情况下，我将其定义为在访问向量时延迟调整列的大小。

```
struct MyVector {
  std::vector< std::vector<int> > vec_;
  size_t cols_;
  struct MySubVector {
    const MyVector &outer_;
    std::vector<int> &vec_;
    MySubVector (MyVector &outer, std::vector<int> &vec)
      : outer_(outer), vec_(vec) {}
    int & operator [] (int i) const {
      vec_.resize(outer_.cols_);
      return vec_[i];
    }
  };
  MySubVector operator [] (int i) {
    return MySubVector(*this, vec_[i]);
  }
  void resize (size_t rows, size_t cols) {
    vec_.resize(rows);
    cols_ = cols;
  }
}; 
```

如果您希望`resize`在调整大小时为您设置一个特定值，那么您将必须迭代每一行并调用调整大小操作，并设置初始化程序。

```
struct resize_cols {
  size_t cols;
  int val;
  resize_cols (size_t c, int v) : cols(c), val(v) {}
  void operator () (std::vector<int> &vec) const {
    vec.resize(cols, val);
  }
};

void resize (size_t rows, size_t cols, int v) {
  vec_.resize(rows);
  std::for_each(vec_.begin(), vec_.end(), resize_cols(cols, v));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T08:12:38.697

在这种情况下，只需`resize`在外向量上使用函数：

```
MyVector.resize( 2, std::vector<int>( 3, value ) ); 
```

更一般地说，如果您想在不更改现有值的情况下调整大小，则必须循环。

# cocoa-touch - 如何用两层实现drawLayer：inContext？

> ID：11498752
> 
> 赞同：0
> 
> 时间：2012-07-16T05:53:52.310
> 
> 标签：cocoa-touch, uiview, core-graphics, calayer

我可以实现`drawLayer:inContext:`两次，每层一次吗？

例如：

```
CALayer *layer1 = [CALayer layer];
layer1.frame = self.view.frame;
[self.view.layer addSubLayer:layer1];

CALayer *layer2 = [CALayer layer];
layer2.frame = self.view.frame;
[self.view.layer addSubLayer:layer2]; 
```

现在我有两个层（除了 UIView 中已经包含的层），我希望每个层根据它们的`drawLayer:inContext:`方法实现不同的“动作”。那么我怎样才能让每一层都执行特定的操作呢？我应该使用`performSelector:`吗？请给我任何提示或建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:31:13.980

我在[这里](https://stackoverflow.com/questions/4579795/multiple-drawlayer?rq=1)找到了解决方案。您所要做的就是保持对您当前使用的图层的引用。然后使用`if..else...`或 switch 语句`drawLayer:inContext:`根据您正在使用的当前层执行操作。

# spring - 在 Java EE 中创建单例时出错

> ID：11498754
> 
> 赞同：0
> 
> 时间：2012-07-16T05:54:14.403
> 
> 标签：spring, hibernate, jakarta-ee, singleton

我是 Java EE 的新手，我正在尝试向现有的 Java EE 应用程序添加一个新的数据库表和程序，该应用程序使用带有持久性和 Spring 框架的休眠。我收到一条错误消息，提示找不到符号我创建了 4 个类：-

```
public interface ncs_userInterface extends Persistable {
    public abstract int getVersion();

    public abstract String getPERSONIDNO();

    public abstract String getFULLNAME();

    public abstract long getID();

    public abstract Date getCreationDate();

    public abstract int getROLEID();

    public abstract int getSCHEMEID();

    public abstract String getSCHEMETITLE();

    public abstract String getROLENAME();

    public abstract void setVersion(int version);

    public abstract void setPERSONIDNO(String PERSONIDNO);

    public abstract void setFULLNAME(String FULLNAME);

    public abstract void setID(long ID);

    public abstract void setCreationdate(Date creationdate);

    public abstract void setROLEID(int ROLEID);

    public abstract void setSCHEMEID(int SCHEMEID);

    public abstract void setSCHEMETITLE(String SCHEMETITLE);

    public abstract void setROLENAME(String ROLENAME);

}

public class ncs_user extends PersistentObject implements ncs_userInterface{
    private long ID;
    private int version;
    private Date creationdate;
    private String PERSONIDNO;
    private String FULLNAME;
    private int ROLEID;
    private String ROLENAME;
    private int SCHEMEID;
    private String SCHEMETITLE;

    public ncs_user() {

    }

    public ncs_user(String PERSONIDNO, int version){
        this.PERSONIDNO=PERSONIDNO;
        this.version=version;
    }
// All the getters and setters follow this but haven't listed them in this code
}

public abstract class ncs_userManager extends BasicManager{

    protected static ncs_userManager INSTANCE;

    public static final synchronized ncs_userManager getInstance() {
        return INSTANCE;
    }

    public abstract void createAndPersistncs_user(ncs_userInterface newNcs_user);

    public abstract List findNcs_usersByIdentity(String PERSONIDNO);

    public abstract void updateNcs_user(ncs_userInterface changedNcs_user);

    public abstract void deleteNcs_user(ncs_userInterface deletableNcs_user);   
}

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import org.hibernate.Hibernate;
import org.hibernate.type.Type;
import org.olat.admin.user.delete.service.UserDeletionManager;
import org.olat.core.commons.persistence.DB;
import org.olat.core.commons.persistence.DBFactory;
import org.olat.core.gui.UserRequest;
import org.olat.core.gui.control.WindowControl;
import org.olat.core.id.Identity;
import org.olat.core.logging.OLog;
import org.olat.core.logging.Tracing;
import org.olat.core.util.coordinate.CoordinatorManager;
import org.olat.user.UserDataDeletable;

public class ncs_userManagerImpl extends ncs_userManager implements UserDataDeletable{

    private static OLog log = Tracing.createLoggerFor(ncs_userManagerImpl.class);

    public ncs_userManagerImpl(final UserDeletionManager userDeletionManager) {
        userDeletionManager.registerDeletableUserData(this);
        INSTANCE = this;
    }

    @Override
    public void createAndPersistncs_user(final ncs_userInterface newNcs_user) {
        final DB db = DBFactory.getInstance();
        db.saveObject(newNcs_user);
        if (log.isDebug()) {
            log.debug("NCS_USER has been created: " + newNcs_user.getPERSONIDNO());
        }
    }

    @Override
    public List<ncs_userInterface> findNcs_usersByIdentity(final String PERSONIDNO) {
        final String query = "from org.olat.ncs_user.ncs_user as b where b.PERSONIDNO = ?";
        return DBFactory.getInstance().find(query, PERSONIDNO, Hibernate.LONG);
    }

    @Override
    public void updateNcs_user(final ncs_userInterface changedNcs_user) {
        DBFactory.getInstance().updateObject(changedNcs_user);
    }

    @Override
    public void deleteNcs_user(final ncs_userInterface deletableNcs_user) {
        DBFactory.getInstance().deleteObject(deletableNcs_user);
    }

    @Override
    public void deleteUserData(final Identity identity, final String aString) {

    }

} 
```

我还为上面的代码创建了一个休眠映射文件和一个弹簧上下文文件。我正在尝试使用以下代码创建一个单例：-

```
final ncs_userManager n;
n = new ncs_userManager.getInstance();
final ncs_userInterface newncs_user = new ncs_user(login, 0);
List l = n.findNcs_usersByIdentity(PERSONIDNO); 
```

我在行中遇到错误`n = new ncs_userManager.getInstance()`：-

```
org/olat/admin/user/imp/ImportStep00.java:[205,75] error: cannot find symbol 
```

我想知道是否有人可以帮助我弄清楚我犯了什么错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:56:26.460

使其成为静态和静态最终变量应仅在声明时实例化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:02:33.710

删除“新”关键字作为其抽象类，您正在调用它的静态方法。

# ruby-on-rails - 谁能告诉我如何在 Rails3 中制作链接标记？

> ID：11498759
> 
> 赞同：0
> 
> 时间：2012-07-16T05:54:38.713
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view, controller

我想做这样的链接标记

用户列表 / 用户 A / 博客

用户列表/用户A/个人资料也可能是这样的

用户列表可以是模型。
用户 A 将由参数
Blog 给出，或者 Profile 将是一个动作（方法）

如果视图是这样的，我如何将这些信息传递给我的控制器查看。你显然可以修改！谢谢

```
 <ul class="breadcrumb">
          <li>

          <% if !@FirstDirPath.nil? %>
          <%= @FirstDirPath %> <span class="divider">/</span>
          <% end %>

          <% if !@SecondDirPath.nil? %>
          <%= @SecondDirPath %> <span class="divider">/</span>
          <% end %>

          <% if !@ThirdDirPath.nil? %>
          <%= @ThirdDirPath %> <span class="divider">/</span>
          <% end %>

          <% if !@FourthDirPath.nil? %>
          <%= @FourthDirPath %> <span class="divider">/</span>
          <% end %>        

          </li>
          </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:01:10.427

在您的视图中使用 link_to 助手。例如：

```
<%= link_to "My link", "link_url" %> 
```

对于您的 AR 记录，您可以使用以下语法：

```
<%= link_to "Profile", user %>
<%= link_to article.title, article %>
# ... etc. 
```

**UPD**

我不明白你想做什么。在视图中，您可以使用在操作中定义的实例变量。例如：

```
@links = [
  { label: "My link",      destination: some_path },
  { label: "Another link", destination: "path/path" },
  { label: "Third link",   destination: third_list_path }
] 
```

比在视图中您可以：

```
<% @links.each do |link| %>
  <%= link_to link[:label], link[:destination] %>
<% end %> 
```

# java - Win7 上的 Selenium Firefox 问题

> ID：11498760
> 
> 赞同：0
> 
> 时间：2012-07-16T05:54:39.910
> 
> 标签：java, firefox, windows-7, selenium, jboss-arquillian

我在[arquillian-examples arquillian drone tutorial](https://github.com/arquillian/arquillian-examples/tree/master/arquillian-drone-tutorial)`mvn test`上运行（使用 Maven 3）。

我在 Win7 上收到以下错误（使用 jdk 1.6.0.26）。

```
14:54:46.002 INFO - Preparing Firefox profile...
14:55:06.829 ERROR - Failed to start new browser session, shutdown browser and c
lear all session data
java.lang.RuntimeException: Firefox refused shutdown while preparing a profile
        at org.openqa.selenium.server.browserlaunchers.FirefoxChromeLauncher.wai
tForFullProfileToBeCreated(FirefoxChromeLauncher.java:367)
        at org.openqa.selenium.server.browserlaunchers.FirefoxChromeLauncher.pop
ulateCustomProfileDirectory(FirefoxChromeLauncher.java:120)
...
14:55:06.891 INFO - Got result: Failed to start new browser session: Error while
 launching browser on session null
classLoader = WebappClassLoader (delegate=true; repositories=WEB-INF/classes/)
... 
```

我想：（a）让Firefox正常工作；或 (b) 让它在 IE 中工作。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:13:32.673

这就是我解决它的方法 - 但我对回答核心问题的解决方案持开放态度，并将其标记为答案。

我在这里修改了文件： `\arquillian-examples\arquillian-drone-tutorial\src\test\resources`

加上：

```
<extension qualifier="selenium">
    <property name="browser">*iexplore</property>
</extension> 
```

# jquery - 使用ajax + colorbox加载谷歌方向小部件不起作用

> ID：11498761
> 
> 赞同：0
> 
> 时间：2012-07-16T05:54:43.077
> 
> 标签：jquery, ruby-on-rails, ajax, colorbox

我在轨道上，当我看到这个时，谷歌方向小部件会加载。

```
<div>
  <script src="//www.gmodules.com/ig/ifr?url=http://hosting.gmodules.com/ig/gadgets/file/114281111391296844949/driving-directions.xml&amp;up_fromLocation=&amp;up_myLocations=<%= @meeting.location.address %>&amp;up_defaultDirectionsType=&amp;up_autoExpand=&amp;synd=open&amp;w=320&amp;h=55&amp;title=Directions+by+Google+Maps&amp;lang=en&amp;country=US&amp;border=%23ffffff%7C3px%2C1px+solid+%23999999&amp;output=js"></script>
</div> 
```

但是，如果我的页面上有一个链接，比如称为“方向”，并且希望在有人单击方向时将上述内容加载到颜色框中，则该小部件不会加载。

```
$(".location-directions").click(function(){
  $(this).colorbox({
        open: true,
        href: "/directions?mid=<%= @meeting.id %>",
        width: "400px",
        height: "300px",
        overlayClose:true,
        escKey:true,
        returnFocus:true
    });
    return false;
}) 
```

打开的颜色框是空的。没有小部件。“/directions”路由再次打开一个具有相同谷歌脚本路径的视图：

```
<div>
  <script src="//www.gmodules.com/ig/ifr?url=http://hosting.gmodules.com/ig/gadgets/file/114281111391296844949/driving-directions.xml&amp;up_fromLocation=&amp;up_myLocations=<%= @meeting.location.address %>&amp;up_defaultDirectionsType=&amp;up_autoExpand=&amp;synd=open&amp;w=320&amp;h=55&amp;title=Directions+by+Google+Maps&amp;lang=en&amp;country=US&amp;border=%23ffffff%7C3px%2C1px+solid+%23999999&amp;output=js"></script>
</div> 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:46:22.497

我遇到了同样的问题，在我花了最后 5 个小时尝试不同的事情之后，我终于发现我应该把“http:”放在 //www="... 前面所以它应该像“http: //www.gmodules.com...etc" 希望这会有所帮助，去睡觉吧。

# c - 使用 make 包含头文件时出错

> ID：11498762
> 
> 赞同：1
> 
> 时间：2012-07-16T05:54:55.547
> 
> 标签：c, makefile, header-files, gnu-make

我必须编译两个独立的进程——`sendfdsock.c and recvfdsock.c`使用 make 文件。这两个文件都有自己的`main`功能。这意味着它们是独立的，我必须将它们编译为两个不同的二进制文件。这是我的制作文件：

```
compileAll:sendfdsock recvfdsock

sendfdsock:sendfdsock.o 
    gcc -o sendfdsock sendfdsock.o

sendfdsock.o:sendfdsock.c accessories.h
    gcc -c sendfdsock.c

recvfdsock.o:recvfdsock.c accessories.h
    gcc -c recvfdsock.c

recvfdsock:recvfdsock.o 
    gcc -o recvfdsock recvfdsock.o 
```

在这里，我创建了一个`compileAll`编译这两个文件的目标。
这两个文件都需要使用`accessories.h`. 正如 GNU Make Doc 中提到的 - 一个简单的 Make 文件。我写了这个make文件。

**附件.h**：

```
#include <malloc.h>
#include <time.h>
#include <fcntl.h>
#include <unistd.h>
#include <stdio.h>
#include <errno.h>
#include <string.h>
#include <pthread.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <error.h>
#include <signal.h>
#include <sys/ioctl.h>
#include <sys/un.h>
#include <stropts.h>

#define PORT "4444" //port we are listening on

int sendall(int fd, char *buf, int *len);
int recvall(int fd, char *buf, int *len);
void logp(int typ, char* msg);
void errorp(char *where, int boolean, int errn,char *what); 
```

**附件.c**：

```
#include "accessories.h"

void logp(int typ, char* msg) // typ --> type(category) of message [1-Normal Log, 2-Warning(any unexpected thing happened), 3-Error, 4-Debugging Log ]
{
    int fd;
    time_t now;
    ssize_t wlength=0;
    char * dat;
    char * str;
    int size = 45+strlen(msg);//14+24+5+sizeof msg+1

    str= (char *) malloc(size);

    time(&now);//system time in seconds
    dat = ctime(&now); // converting seconds to date-time format
    dat = strtok(dat,"\n");

    //Appending type of log
    switch(typ)
    {
    case 1:
        strcpy(str,"__LOG__    |  ");
        strcat(str,dat);
        break;
    case 2:
        strcpy(str,"__WARN__   |  ");
        strcat(str,dat);
        break;
    case 3:
        strcpy(str,"__ERR__    |  ");
        strcat(str,dat);
        break;
    case 4:
        strcpy(str,"__DEBUG__  |  ");
        strcat(str,dat);
        break;
    default:
        strcpy(str,"__UNDEF__  |  ");
        strcat(str,dat);
        break;
    }

    strcat(str,"  |  ");
    strcat(str,msg);//appending message
    strcat(str,"\n");

    fd = open("log", O_WRONLY | O_CREAT | O_APPEND, 0644); // should be opened somewhere else
    if (fd == -1)
        printf("Could not open log - %s\n",strerror(errno));
    else
    {//need to add lock to the file and printing error message
        while ( wlength < strlen(str) )
        {
            wlength = write(fd, str,strlen(str));
            if (wlength == -1)
            {
                printf("Error : writing log\n");
                break;
            }
        }

    }
}

int sendall(int fd, char *buf, int *len)
{
    int total = 0;        // how many bytes we've sent
    int bytesleft = *len; // how many we have left to send
    int n;

    while(total < *len) {
        n = send(fd, buf+total, bytesleft, 0);
        if (n == -1) { break; }
        total += n;
        bytesleft -= n;
    }

    *len = total; // return number actually sent here

    return n==-1?-1:0; // return -1 on failure, 0 on success
}

int recvall(int fd, char *buf, int *len)
{
    int total = 0;        // how many bytes we've sent
    int bytesleft = *len; // how many we have left to send
    int n;

    while(total < *len) {
        n = recv(fd, buf+total, bytesleft, 0);
        if (n == -1) { break; }
        total += n;
        bytesleft -= n;
    }

    *len = total; // return number actually sent here

    return n==-1?-1:0; // return -1 on failure, 0 on success
} 

void errorp(char *where, int boolean, int errn,char *what)
{
    char errmsg[21+strlen(where)];
    strcpy(errmsg,"Where - ");
    strcat(errmsg,where);
    strcat(errmsg,"  |  Error - ");

    if(boolean == 1)//we got error number
    {
        strcat(errmsg,strerror(errn));
        //fprintf(stderr,"ERROR - In %s and error is %s\n",where ,strerror(errn));
        logp(3,errmsg);
    }
    else if(boolean == 0)//we got a message
    {
        strcat(errmsg,what);
        //fprintf(stderr,"ERROR - In %s and error is %s\n",where ,what);
        logp(3,errmsg);
    }
    else//we got nothing
    {
        strcat(errmsg,"No Message");
        //fprintf(stderr,"ERROR - In %s\n",where);
        logp(3,errmsg); 
    }
} 
```

最初一切正常，但是当我尝试使用`accessories.c`编译中定义的任何函数时，都会出现错误。
例如，我在中使用日志功能`sendfdsock.c`：

```
#include "accessories.h"

#define CONTROLLEN  CMSG_LEN(sizeof(int))

static struct cmsghdr   *cmptr = NULL;  /* malloc'ed first time */ 
int send_err(int fd, int errcode, const char *msg);
int send_fd(int fd, int fd_to_send);

int main(int argc, char const *argv[])
{   
    logp(1,"started"); //This function is defined in accessories.c

    int fd_to_send;
    if((fd_to_send = open("vi",O_RDONLY)) < 0)
        printf("vi open failed");

    struct sockaddr_un address;
    int  socket_fd, nbytes;
    char buffer[256];
........ 
```

编译的输出是：

```
abhi@abhi-me:~/bridge/server$ make compileAll 
gcc -c sendfdsock.c
sendfdsock.c: In function ‘send_fd’:
sendfdsock.c:111:9: warning: format ‘%d’ expects argument of type ‘int’, but argument 2 has type ‘ssize_t’ [-Wformat]
sendfdsock.c:114:5: warning: format ‘%d’ expects argument of type ‘int’, but argument 2 has type ‘ssize_t’ [-Wformat]
gcc -o sendfdsock sendfdsock.o
sendfdsock.o: In function `main':
sendfdsock.c:(.text+0x32): undefined reference to `logp'
collect2: ld returned 1 exit status
make: *** [sendfdsock] Error 1
abhi@abhi-me:~/bridge/server$ 
```

**为什么*未定义对 logp*错误的引用？**

## 为什么我不在最终链接中写附件.o：

但正如 GNU Make Doc 中给出的这个例子：

```
In this example, all the C files include ‘defs.h’, but 
only those defining editing comminclude ‘command.h’, and only
low level files that change the editor buffer include 'buffer.h':

edit : main.o kbd.o command.o display.o \
    insert.o search.o files.o utils.o
    cc -o edit main.o kbd.o command.o display.o \
    insert.o search.o files.o utils.o
main.o : main.c defs.h
    cc -c main.c
kbd.o : kbd.c defs.h command.h
    cc -c kbd.c
command.o : command.c defs.h command.h
    cc -c command.c
display.o : display.c defs.h buffer.h
    cc -c display.c
insert.o : insert.c defs.h buffer.h
    cc -c insert.c
search.o : search.c defs.h buffer.h
    cc -c search.c
files.o : files.c defs.h buffer.h command.h
    cc -c files.c
utils.o : utils.c defs.h
    cc -c utils.c
clean :
    rm edit main.o kbd.o command.o display.o \
    insert.o search.o files.o utils.o 
```

在这里链接所有文件时，`edit`他们不写`defs.o or buffer.o`. 意味着在链接时它们不包括头文件的目标文件。他们也没有写任何目标，比如：`defs.o or buffer.o` **为什么**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T06:01:20.950

您只是在两个链接目标中都错过了 Accessories.o。像这样的东西：

```
accessories.o: accessories.c

sendfdsock: sendfdsock.o accessories.o
    $(CC) -o $@ $(CFLAGS) $(LDFLAGS) $+ 
```

此外，考虑使用内置规则，如果需要，只需修改它们的参数。查看`make -p`完整列表（并制作信息页）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:04:14.680

您误解了源文件、头文件和目标文件之间的关系。

假设我有以下四个文件：

```
//foo.h
#define PI 3.1

//bar.h
void func();

//bar.c
#include "foo.h"
#include "bar.h"
void func()
{
  ...
}

//baz.c
#include "foo.h"
#include "bar.h"

int main()
{
  func();
} 
```

（我省略了标头保护，我想你知道这些。）我必须使用编译器从每个*源*文件生成一个目标文件：`bar.c`->`bar.o`和`baz.c`-> `baz.o`。我不必从头文件中创建目标文件，`foo.h`并且这些文件将由任何需要它们的源文件`bar.h`简单地生成。`#include`然后我将目标文件链接在一起形成一个可执行文件：

```
baz: bar.o baz.o
    gcc -o baz bar.o baz.o

bar.o: bar.c foo.h bar.h
    gcc -c bar.c

baz.o: baz.c foo.h bar.h
    gcc -c baz.c 
```

如果我忽略了链接`bar.o`到可执行文件，当链接器到达`baz`调用的地方`func()`并且链接器不知道该放什么（因为它缺少`func()`in的定义`bar.o`）时，我会得到一个链接器错误：

```
baz.o: In function `main':
baz.c:(.text+0x32): undefined reference to `func()' 
```

所以 GNU Make 文档是正确的，正如亚历克斯所说，你的规则应该有：

```
sendfdsock:sendfdsock.o accessories.o
    ...

accessories.o: accessories.c accessories.h
    ... 
```

（顺便说一句，一旦你让这个 makefile 工作，我们可以向你展示如何使它更简洁。）

# c# - 如何将 ContentType 字段绑定到 Orchard 中的另一个字段？

> ID：11498763
> 
> 赞同：0
> 
> 时间：2012-07-16T05:54:58.350
> 
> 标签：c#, orchardcms

我正在尝试将两个 ImageField 添加到我的自定义类型中，这样当我选择一个图像时，它会在我的字段中保存两个版本的选定文件（例如：全尺寸和缩略图）。这里我需要将我的第二个字段绑定到第一个完成这个。有没有可能这样做？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:47:10.987

您可以尝试 jquery 在您输入第一个表单时完成您的第二个表单，或者在帖子上创建一个事件，如果您只想转到服务器端，您可以在保存操作方法中订阅该事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:08:21.353

图像字段不会为您执行此操作，因此您不应尝试破解它，而应修改该字段的代码，以便它可以选择动态创建图像的缩略图（它不应该是两个单独的图像字段）。完成后，您可以考虑贡献您的工作。

# localhost - 本地主机文件夹中的 PHP 邮件

> ID：11498767
> 
> 赞同：1
> 
> 时间：2012-07-16T05:55:11.620
> 
> 标签：localhost, php

当我使用 sendmail 功能时，我希望将 PHP 邮件保存为我 PC 中的一个文件夹中的 HTML 文档。

我怎样才能做到这一点

# cuda - CUDA 共享内存大小意味着什么

> ID：11498769
> 
> 赞同：4
> 
> 时间：2012-07-16T05:55:32.127
> 
> 标签：cuda, shared-memory

我正在尝试自己解决这个问题，但我做不到。所以我想听听你的建议。

我正在编写这样的内核代码。VGA是GTX 580。

```
xxxx <<< blockNum, threadNum, SharedSize >>> (... threadNum ...)
(note. SharedSize is set 2*threadNum)

__global__ void xxxx(..., int threadNum, ...)
{
    extern __shared__ int shared[];
    int* sub_arr = &shared[0];
    int* sub_numCounting = &shared[threadNum];
    ...
} 
```

我的程序每块创建大约 1085 个块和 1024 个线程。

（我正在尝试处理巨大的数组）

所以每个块的共享内存大小是 8192（1024*2*4）字节，对吧？

我发现通过使用 cudaDeviceProp，我可以在 GTX 580 上的每个块中使用最多 49152 字节的共享内存。

而且我知道 GTX 580 有 16 个处理器，线程块可以在处理器上实现。

但是我的程序出现错误。（8192bytes < 49152bytes）

我在内核中使用“printf”来查看是否运行良好，但有几个块没有运行。（虽然我创建了 1085 个区块，但实际上只有 50~100 个区块在运行。）

而且我想知道在同一处理器上运行的块是否共享相同的共享内存地址。（如果没有，是否为共享内存分配其他内存？）

我当然不能理解每块共享内存的最大大小是什么意思。

给我建议。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-16T15:18:02.327

是的，同一个多处理器上的块共享相同数量的共享内存，对于您的 GPU 卡，每个多处理器 48KB（计算能力 2.0）。因此，如果您在同一个多处理器上有 N 个块，则每个块的最大共享内存大小为 (48/N) KB。

# jquery - jQuery 问题 - 未捕获的类型错误：无法读取未定义的属性“浏览器”

> ID：11498770
> 
> 赞同：3
> 
> 时间：2012-07-16T05:55:32.250
> 
> 标签：jquery, wordpress, slider

我正在尝试向网站添加滑块。

当我在本地测试时，它在标准 html 文件中工作正常，但是当我尝试将其传输到 wordpress 站点时，我不断收到此错误：

> 未捕获的类型错误：无法读取未定义的属性“浏览器”

它指向问题代码中的第 11 行

```
isIE = $.browser.msie, 
```

我不确定发生了什么，因为它适用于基本文件而不是 wordpress 实时站点。

这是滑块的 jquery 文件 - 我确信它很简单，但我只是没有弄清楚。

谢谢瑞恩

```
var current       = 0,
imagenum          = {},
heroName          = {},
speed             = 500,
messageDelay      = 10000,
expanded          = false,
animating         = false,
easeType          = 'easeOutQuint',
scrollEase        = 'easeInOutExpo',
easeTypeCB        = 'cubic-bezier(0.770,  0.000, 0.175, 1.000)',
isIE              = $.browser.msie,
currenth          = 0,
anim              = false,
isLoading         = false,
autoHero          = '',
heroSlideLoading  = false,
heroSlideDuration = 1000,
gt1000            = false,
scrollSpeed       = 1000,
scrollAnimation   = false,
autoCarousel      = true,
heros, winw, heroc, herobtns, herobg, wbTimeout, image2, heromax, currentbg, tabindex, tabDiv, showing, tabLinks, clientList, num, anchor_max, anchors;

$(document).ready(function(){

  checkHash();
  heroCarousel();

});

function getHash(){
 var hash = window.location.hash;
 return hash.substring(1);
}

function checkHash(){
var currentHash = getHash();
if(currentHash.length > 0){
    var src;
    var projectLink;

    if( currentHash.charAt(0) == '!' ){
        src         = currentHash.substr(1).replace('-', ' ');
        projectLink = $.inArray(src, projectName);

        scrollToProject((projectLink+1));
    } else if( currentHash.charAt(0) == '@' ){
        src         = currentHash.substr(1);
        projectLink = $.inArray(src, heroName);

        if(projectLink > -1){
            loadHero(projectLink);
            $('.slider-wrapper img').imagesLoaded( function(){
                autoCarousel = false;
            });
        }
    }
  }
 }

function getWindowWidth(){
 return $(window).width();
}

function heroCarousel(auto){

heros    = $('.hero');
heroc    = $('#hero-carousel');
herobtns = $('.slider-wrapper .pager-btn');
herobg   = $('.heroimgbg');
heromax  = $('.hero').length-1;

if(heroc.size()){

    $(window).resize(function(){

        winw = $(window).width();
        heroc.width(winw * (heromax+1));
        $('.hero, .heroimgbg').width(winw);

        var heroPos = -(winw * (currenth));
        if(isIE){
            heroc.animate({
                'left' : heroPos
            }, 0);
        } else {
            heroc.css({
                '-webkit-transform' : 'translate3d(' + heroPos + 'px, 0, 0)',
                '-moz-transform' : 'translate(' + heroPos + 'px, 0)',
                '-o-transform' : 'translate(' + heroPos + 'px, 0)',
                '-ms-transform' : 'translate(' + heroPos + 'px, 0)',
                'transform' : 'translate(' + heroPos + 'px, 0)',
                '-webkit-transition': 'none',
                '-moz-transition': 'none',
                '-o-transition': 'none',
                '-ms-transition': 'none',
                'transition': 'none'
            });
        }
        isLoading = false;
        anim      = false;
        loadHero(currenth);

    }).resize();

    //previous/next buttons
    herobtns.click(function(){
        if( $(this).hasClass('next') ){
            loadHero('next');
        } else {
            loadHero('prev');
        }
        autoCarousel = false;

        return false;
    });
    //simple nav buttons
    snav.click(function(){
        var ind = $('.simple-nav li a').index(this);
        loadHero(ind);
        autoCarousel = false;

        return false;
    });

           loadHero(0);

  }

 }

function loadHero(dir){
if(!isLoading){
    isLoading = true;

    if( dir == 'next' ){
        if( currenth >= heromax ){
            currenth = 0;
        } else {
            currenth++;
        }

    } else if( dir == 'prev' ) {
        if( currenth <= 0 ){
            currenth = heromax;
        } else {
            currenth--;
        }
    } else {
        currenth = dir;
    }

    var slide = $('#hero-carousel .hero').eq(currenth);
    slide.addClass('next-slide');

    //load current slide
    if(getWindowWidth() > 1200){
        if(!slide.hasClass('loaded1200')){
            slide.removeClass('loaded');
            $('.tab-container:eq(0) h1').hide();
            $('#spinner').show();

            image2 = $('<img src="'+$('.heroimgbg'+currenth).attr('data-src')+'" alt="" />');
            currentbg = $('.heroimgbg'+currenth);
            currentbg.html(image2);

            if(slide.find('.heroimg').length){

                //load carousel images
                slide.find('.heroimg').each(function(){
                    var image;
                    if(getWindowWidth() > 1200){
                        image = $(this).attr('data-src-large') ? $('<img src="'+$(this).attr('data-src-large')+'" alt="" />') : $('<img src="'+$(this).attr('data-src')+'" alt="" />');
                    } else {
                        image = $('<img src="'+$(this).attr('data-src')+'" alt="" />');
                    }
                    $(this).html(image);
                    //image.delay(500).animate({'opacity': 1},500, easeType);
                });
                slide.find('img').imagesLoaded(function(){
                    changeTheme(slide);
                    slide.addClass('loaded1200');
                    //animate carousel
                    animHero(dir);
                });

            } else {
                changeTheme(slide);
                slide.addClass('loaded1200');
                animHero(dir);
            }
        } else {
            changeTheme(slide);
            animHero(dir);
        }
    } else {
        if(!slide.hasClass('loaded')){
            slide.removeClass('loaded1200');
            $('.tab-container:eq(0) h1').hide();
            $('#spinner').show();

            image2 = $('<img src="'+$('.heroimgbg'+currenth).attr('data-src')+'" alt="" />');
            currentbg = $('.heroimgbg'+currenth);
            currentbg.html(image2);

            if(slide.find('.heroimg').length){

                //load carousel images
                slide.find('.heroimg').each(function(){
                    var image;
                    if(getWindowWidth() > 1200){
                        image = $(this).attr('data-src-large') ? $('<img src="'+$(this).attr('data-src-large')+'" alt="" />') : $('<img src="'+$(this).attr('data-src')+'" alt="" />');
                    } else {
                        image = $('<img src="'+$(this).attr('data-src')+'" alt="" />');
                    }
                    $(this).html(image);
                    image.delay(500).animate({'opacity': 1},500, easeType);
                });
                slide.find('img').imagesLoaded(function(){
                    changeTheme(slide);
                    slide.addClass('loaded');
                    //animate carousel
                    animHero(dir);
                });

            } else {
                changeTheme(slide);
                slide.addClass('loaded');
                animHero(dir);
            }
        } else {
            changeTheme(slide);
            animHero(dir);
        }
    }
  }
 }

function changeTheme(slide){
$('.tab-container:eq(0) h1').show();
$('#spinner').hide();

//set theme
if(slide.attr('data-theme')){
    $('body').attr('class', 'anchors');
    $('body').addClass('theme-' + slide.attr('data-theme'));
}
}

function animHero(dir){

//$('body').css('cursor', 'auto');
if( !anim ){
    anim = true;
    var finishAnim;

    //load background image
    var image2src = $('.heroimgbg'+currenth).attr('data-src');

    if(currenth !== dir || dir === 0){
        currentbg = $('.heroimgbg'+currenth);
        $('.heroimgbg').each(function(){
            if($(this).css('opacity') > 0){
                $(this).animate({'opacity': 0}, heroSlideDuration, easeType);
            }
        });
        currentbg.css('background-image', 'url(' + image2src + ')').delay(500).animate({'opacity': 1}, heroSlideDuration, easeType);
    }

    //clear classes
    $('.hero').removeClass('exit enter fromleft fromright active');
    //$('.simple-nav li').removeClass('active');

    var currentSlide = $('.hero:eq('+currenth +')');
    currentSlide.addClass('enter');

    $('.hero:gt('+ currenth +')').addClass('fromright');
    $('.hero:lt('+ currenth +')').addClass('fromleft');

    /*heroc.animate({
        'left' : (currenth * -winw),
        leaveTransforms:true
    }, heroSlideDuration, 'easeInOutQuint', function(){
        anim      = false;
        isLoading = false;
        $('.hero:eq('+currenth +')').addClass('active');
    }).css('z-index','20');*/

    var heroPos = (currenth * -winw);
    if(isIE){
        heroc.animate({
            'left' : heroPos
        }, heroSlideDuration, 'easeInOutQuint', function(){
            anim      = false;
            isLoading = false;
            $('.hero:eq('+currenth +')').addClass('active');
        });
    } else {
        heroc.css({
            '-webkit-transform' : 'translate3d(' + heroPos + 'px, 0, 0)',
            '-moz-transform' : 'translate(' + heroPos + 'px, 0)',
            '-o-transform' : 'translate(' + heroPos + 'px, 0)',
            '-ms-transform' : 'translate(' + heroPos + 'px, 0)',
            'transform' : 'translate(' + heroPos + 'px, 0)',
            '-webkit-transition': '-webkit-transform 1s ' + easeTypeCB,
            '-moz-transition': '-moz-transform 1s ' + easeTypeCB,
            '-o-transition': '-o-transform 1s ' + easeTypeCB,
            '-ms-transition': '-ms-transform 1s ' + easeTypeCB,
            'transition': 'transform 1s ' + easeTypeCB
        });
        clearTimeout(finishAnim);
        finishAnim = setTimeout(function(){anim = false; isLoading = false;}, 1000);
        $('.hero:eq('+currenth +')').addClass('active');
    }

    clearTimeout(autoHero);
    if(autoCarousel === true){
        autoHero = setTimeout(function(){
            loadHero('next');
        }, 6000);
    }

 }
 }

 var showSwitch = ($('.slider-wrapper').length) ? true : false;
 //var scrollOffset = -30;

 (function($,undefined){$.fn.imagesLoaded=function(callback){var $this=this,$images=$this.find("img").add($this.filter("img")),len=$images.length,blank="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";function triggerCallback(){callback.call($this,$images)}function imgLoaded(){if(--len<=0&&this.src!==blank){setTimeout(triggerCallback);$images.unbind("load error",imgLoaded)}}if(!len)triggerCallback();$images.bind("load error",imgLoaded).each(function(){if(this.complete||this.complete===
 undefined){var src=this.src;this.src=blank;this.src=src}});return $this}})(jQuery);

 (function(){var special=jQuery.event.special,uid1="D"+ +new Date,uid2="D"+(+new Date+1);special.scrollstart={setup:function(){var timer,handler=function(evt){var _self=this,_args=arguments;if(timer)clearTimeout(timer);else{evt.type="scrollstart";jQuery.event.handle.apply(_self,_args)}timer=setTimeout(function(){timer=null},special.scrollstop.latency)};jQuery(this).bind("scroll",handler).data(uid1,handler)},teardown:function(){jQuery(this).unbind("scroll",jQuery(this).data(uid1))}};special.scrollstop=
{latency:300,setup:function(){var timer,handler=function(evt){var _self=this,_args=arguments;if(timer)clearTimeout(timer);timer=setTimeout(function(){timer=null;evt.type="scrollstop";jQuery.event.handle.apply(_self,_args)},special.scrollstop.latency)};jQuery(this).bind("scroll",handler).data(uid2,handler)},teardown:function(){jQuery(this).unbind("scroll",jQuery(this).data(uid2))}}})(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-16T06:03:18.897

默认情况下，我认为 Wordpress 将 jQuery 置于“无冲突”模式，因此将`$`其用作快捷方式是`jQuery`行不通的。我猜这是你的问题，因为错误表明这`$`是未定义的。

来自 Wordpress 文档：

> 为了使用 $ 的默认 jQuery 快捷方式，您可以在代码周围使用以下包装器：
> 
> ```
> jQuery(document).ready(function($) {
>     // $() will work as an alias for jQuery() inside of this function
> }); 
> ```

或者，您可以在代码中使用 $ 的任何地方使用 jQuery：

```
isIE = jQuery.browser.msie 
```

[您可以在Wordpress 文档](http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_wrappers)中阅读更多相关信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T08:07:01.347

在文件 editor_plugin.js（位于 ibrowser 根插件文件夹中）中注释掉了以下行：

```
tinymce.ScriptLoader.load(url + '/interface/common.js'); 
```

并添加这个

```
$.getScript(url+'/interface/common.js'); 
```

对 editor_plugin_src.js 也做同样的事情。

应该是固定的。

# jquery - asp.net mvc3中的Ajax调用并返回错误

> ID：11498773
> 
> 赞同：1
> 
> 时间：2012-07-16T05:56:06.307
> 
> 标签：jquery, ajax, asp.net-mvc-3

我在我的视图中调用了一个动作控制器，当我设置断点并观察 ajax 函数的行为时，它在后面的代码上正常工作，但是当返回函数时它不运行“**成功：函数**”并返回错误

```
$.ajax({
        type: "POST",
        url: "/GetListContents",
        data: { _PageID: PageID, _LangID: LangID, _BoxTypeID: 6, _ListTypeID: 8, _Count: CurPageIndex },
        cache: false,
        dataType: 'html',
        success: function (html) {
            $("#dynamicBody").html(html);
            $("#dynamicFooter").html("Hello");
        },
        error: function (xhRequest, ErrorText, thrownError) {
            $("#dynamicBody").html(xhRequest.status);
            $("#dynamicBody").html(ErrorText);
        }
    }); 
```

**GetListContents**在后面的代码上工作，但结果是错误tnx
for advance
，抱歉英语不好
**更新**
这是我的动作控制器代码

```
[HttpPost]
    public PartialViewResult GetListContents(int _PageID, int _LangID, int _BoxTypeID, int _ListTypeID, int _Count)
    {
        dynamic cOut = GetListContent(_PageID, _LangID, _BoxTypeID, _ListTypeID, _Count);
        return PartialView("DynamicPagingBoxInfo",null);
    }

    public dynamic GetListContent(int _PageID, int _LangID, int _BoxTypeID, int _ListTypeID, int _Count)
    {
        List<ipMedia_PageContentsCache> PageContent = new List<ipMedia_PageContentsCache>();
        ListPageDataProvider.GetDynamicBoxContent(ref PageContent, _PageID, _LangID,_Count * 10);
        ViewBag.PageListContents = PageContent;
        ViewBag.CurPageIndex = _Count;
        return PageContent;
    } 
```

更新 ||
更多解释：我的部分视图使用 viewbag 来渲染页面并从该部分视图后面的代码中获取数据，这在页面请求上运行的第一次工作正常，但是当我想用 ajax 渲染它时，ajax 函数返回错误！我的视图包在第一次和 ajax 调用中具有相同的结构

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:20:07.607

您需要从控制器发回实际的 html。看看`RenderPartial`。我过去曾使用以下代码来执行此功能（放置在我的控制器继承的基本控制器上）：

```
 protected string RenderPartialView(string viewName, object model)
    {
        if (string.IsNullOrEmpty(viewName))
        {
            viewName = ControllerContext.RouteData.GetRequiredString("action");
        }

        ViewData.Model = model;

        using (var sw = new StringWriter())
        {
            var viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName);
            var viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);

            viewResult.View.Render(viewContext, sw);

            return sw.GetStringBuilder().ToString();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:13:06.980

可能是错误在行

```
url: "/GetListContents", 
```

尝试`url: '@Url.Action('GetListContents','YourControllerName'),`改用

# android - 从 gmail 应用程序启动应用程序

> ID：11498778
> 
> 赞同：0
> 
> 时间：2012-07-16T05:56:31.187
> 
> 标签：android

我有一个用于预览 .dst 文件类型的 android 应用程序，我可以通过从文件资源管理器中单击文件来启动该应用程序，我是通过以下代码完成的

```
 <intent-filter >
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data android:scheme="file" />
            <data android:mimeType="*/*" />
            <data android:pathPattern=".*\\.DST" />
            <data android:host="*" />
           </intent-filter> 
```

现在我需要从默认的 gmail 应用程序启动应用程序，我想我需要更改 android:scheme="file"

标记，请帮助我为 gmail 应用程序提供正确的方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:11:44.010

更新清单如下

```
 <intent-filter >
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data android:host="*" />
            <data android:mimeType="application/octet-stream"
                />
            <data android:pathPattern=".*\\.DST" />
        </intent-filter> 
```

# php - 通过在 php 中使用 mail() 在邮件中删除 URL 中的参数值

> ID：11498780
> 
> 赞同：0
> 
> 时间：2012-07-16T05:56:40.270
> 
> 标签：php

我正在使用以下代码发送确认邮件，但我不知道为什么邮件中的 url 参数被删除并且在邮件中我得到的 url 像`http://example.com/confirm.php?user_id=`参数值 (1) 被删除

```
$headers = "From: admin@example.com \n";
    $headers .= "X-Mailer: PHP/SimpleModalContactForm";
    $headers .= "MIME-Version: 1.0\n";
    $headers .= "Content-type: text/html; charset=utf-8\n";
    $headers .= "Content-Transfer-Encoding: quoted-printable\n";

    $subject = "Confirm Your Registration Example.com";
    $subject = mb_encode_mimeheader($subject, "UTF-8", "B", "\n");
    $to="abc@demo.com";
    $body="<table> <tr> <td> Hello </td> </tr>";
    $body.="<tr> <td> Please confirm your registration by clicking following link  <td> </tr>";
    $body.="<tr> <td>  http://example.com/confirm.php?user_id=1</td> </tr>";

    $body.="</table>";

    @mail($to, $subject, $body, $headers) or  die("Unfortunately, a server issue prevented delivery of your message."); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:00:33.950

你试过像这样的标签吗

```
 <a href="http://example.com/confirm.php?user_id=1">http://example.com/confirm.php?user_id=1</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:22:53.277

解决了，只是改变了标题

```
$headers = "From: admin@example.com \n";
$headers .= "X-Mailer: PHP/SimpleModalContactForm";
$headers .= "MIME-Version: 1.0\n";
$headers .= "Content-type: text/html; charset=utf-8\n";
$headers .= "Content-Transfer-Encoding: quoted-printable\n"; 
```

至

```
$headers = "MIME-Version: 1.0" . "\r\n";
$headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
$headers .= 'From: admin@example.com' . "\r\n"; 
```

# c++ - 在 C++ 解决方案中重用基类时 MSVC 链接器错误 LNK2019

> ID：11498793
> 
> 赞同：1
> 
> 时间：2012-07-16T05:57:52.357
> 
> 标签：c++, visual-studio, linker-errors, lnk2019

这真的让我感到震惊，而且 Visual Studio 2008 是如此无脑，以至于它对以下错误根本没有帮助。

我的 C++ 解决方案中有几个项目。一个项目在 crashreporter.h 和 crashreporter.cpp 文件中有 C++ 基类 CCrashReporter。

我需要从中派生另一个类，该类位于同一解决方案中的另一个项目中。所以我这样做：

```
//From CrashReporter2.h
#pragma once
#include "..\BaseModules\CrashReporter.h"

class CCrashReporter2 :
    public CCrashReporter
{
public:
    CCrashReporter2(void);
    virtual ~CCrashReporter2(void);
}; 
```

接着：

```
//From crashreporter2.cpp
#include "StdAfx.h"
#include "CrashReporter2.h"

CCrashReporter2::CCrashReporter2(void):
CCrashReporter(ENTERY_PARAM_FOR_REPORTER2)
{
}

CCrashReporter2::~CCrashReporter2(void)
{
} 
```

上面的代码编译好了，但是当链接器运行时，我得到了这些：

```
1>CrashReporter2.obj : error LNK2019: unresolved external symbol "public: __thiscall CCrashReporter::CCrashReporter(int) blah-blah
1>CrashReporter2.obj : error LNK2019: unresolved external symbol "public: __thiscall CCrashReporter::~CCrashReporter(void) blah-blah
1>C:\Users\Dev\C++\ProjName123\Debug\Mod123.exe : fatal error LNK1120: 2 unresolved externals 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:09:41.113

请参阅 Bo Persson 的评论。每个项目都需要以一种或另一种方式链接到正确的文件。将源文件直接添加到项目中，或者创建一个链接到应用程序的静态/动态库项目。

# ms-access - 根据客户 ID 将多页 MS Access 报告拆分为单独的 pdf 文件？

> ID：11498794
> 
> 赞同：2
> 
> 时间：2012-07-16T05:57:55.540
> 
> 标签：ms-access, vba

我希望根据客户 ID 将多页访问报告拆分为单独的 pdf 文件，然后根据客户名称（或 ID）保存这些 pdf 文件。

我已经研究过将报告“打印”/“转换”成一个巨大的 pdf 文件并在那里拆分，但是一些客户发票跨越两页以上，因此逐页拆分一个 pdf 文件是行不通的。

任何帮助将不胜感激; 如果有人需要对任何事情进行更多澄清，请随时告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T06:37:23.853

使用 Access 2007（请参阅下面的注释）或更高版本可以轻松做到这一点。

使用参数打开报表`WhereCondition`以将记录源限制为特定客户。

```
DoCmd.OpenReport "rptFoo", acViewPreview, , "Customer_ID = 1" 
```

然后使用 OutputTo 以您提供的文件名将其保存为 PDF。

```
DoCmd.OutputTo acOutputReport, "", acFormatPDF, "Spacely_Sprockets.pdf" 
```

之后关闭报告。

```
DoCmd.Close acReport, "rptFoo" 
```

`Customer_ID`您可以创建一个为和数据打开记录集的过程`Customer_Name`，然后将这 3 个命令与每行的值一起使用。

如果您的 Access 版本早于 2007 年，您必须告诉我们您用于创建 PDF 文件的方法。

注意：对于 Access 2007，Office Service Pack 2 提供[内置的另存为 PDF/XPS 支持](http://support.microsoft.com/kb/953195)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T10:57:38.920

MS Access 2010 提供 PDF 打印功能，对于 2007 年，您可以安装 Microsoft 的附加组件：[以 PDF 和 XPS 文件格式打印、共享和保护文件](http://office.microsoft.com/en-us/help/print-share-and-protect-files-in-the-pdf-and-xps-file-formats-HA010167527.aspx#_Toc290894468)

对于 2007 之前的版本，您可以使用：

*   Stephen LeBan 的[ReportToPDF](http://www.lebans.com/reporttopdf.htm)仅包含两个 DLL，但仅适用于 MS Access

*   [CutePDF](http://www.cutepdf.com/)是免费且易于使用的。

*   [PDFCreator](http://www.pdfforge.org/pdfcreator/)也是免费的，可以用 VBA 完全自动化（虽然最近没用过，相信这个功能还是可以的）

*   任意数量的付费 PDF 创建者。

[OpenReport 的 WHERE 参数自2003 版本](http://msdn.microsoft.com/en-us/library/aa210291%28v=office.11%29.aspx)（也是[OpenReport 2010](http://msdn.microsoft.com/en-us/library/bb238032%28v=office.12%29.aspx)）以来可用

要为所有客户打印版本 2003、2007 和 2010 的报告，您可以循环浏览相关文件并

```
Dim rs AS DAO.Recordset
Set rs = CurrentDB.OpenRecordset("SELECT DISTINCT CustimerID FROM Invoices")

   Do While Not rs.EOF
      ''expression.OpenReport(ReportName, View, FilterName, 
      ''      WhereCondition, WindowMode) -- 2010 has OpenArgs

      DoCmd.OpenReport "Invoices",<..>,,"CustomerID=" & rs!CustomerID
      ''OutputTo or other relevant code

      rs.MoveNext
   Loop 
```

获取 PDF 取决于您的版本和已安装的工具。例如，如果您使用的是 PDFCreator 或 CutePDF，则可以`acViewNormal`用于视图。PDFCreator 设置将允许您预先指定一个文件名，对于CutePDF，您必须填写一个文件名。对于 Access 2007 和 2010，您可以使用`OutputTo`，正如已经提到的那样，这`acViewPreview`是最好的。

要通过电子邮件发送 2007 年和 2010 年的报告，您可以使用[SendObject](http://msdn.microsoft.com/en-us/library/bb214075%28v=office.12%29.aspx)。对于早期版本，您将需要更多代码。最简单的选择可能是自动化 Outlook。

# c# - 如何以编程方式转换以下xaml？

> ID：11498796
> 
> 赞同：3
> 
> 时间：2012-07-16T05:58:05.590
> 
> 标签：c#, .net, wpf, wpfdatagrid

我想要图像中的格式标题（第一行向内，总重量，纯重量和数量。在第二行）。我可以使用 XAML 中的以下代码实现相同的功能，但我该如何以编程方式执行此操作？

XAML：

```
 <dg:DataGrid>
        <dg:DataGridTemplateColumn Width="210">
            <dg:DataGridTemplateColumn.HeaderTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <TextBlock Grid.Row="0" 
                                   Text="INWARD" 
                                   TextAlignment="Center">
                        </TextBlock>
                        <StackPanel Grid.Row="1" Orientation="Horizontal">
                            <TextBlock Width="80"
                                       Text="Gross Weight"
                                       TextAlignment="Right"
                                       Margin="0,0,2,0">
                            </TextBlock>
                            <TextBlock Width="80"
                                       Text="Pure Weight" 
                                       TextAlignment="Right"
                                       Margin="0,0,0,0">
                            </TextBlock>
                            <TextBlock Width="40"
                                       Text="Quantity"
                                       TextAlignment="Right"
                                       Margin="2,0,0,0">
                            </TextBlock>
                        </StackPanel>
                    </Grid>
                </DataTemplate>
            </dg:DataGridTemplateColumn.HeaderTemplate>
            <dg:DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal" >
                        <TextBlock Style="{DynamicResource grdCellCurrencyData}" 
                                                       Width="80"
                                                       Margin="0,0,2,0">
                            <TextBlock.Text> 
                                <MultiBinding Converter="{StaticResource CurrencyConverter}" ConverterParameter="True">
                                    <Binding Path="INGrossWeight" Mode="OneWay" />
                                    <Binding Path="BaseUOMNoofDecimals" Mode="OneWay" />
                                </MultiBinding> 
                            </TextBlock.Text>
                        </TextBlock>
                        <TextBlock Style="{DynamicResource grdCellCurrencyData}"
                                                           Width="80"
                                                           Margin="0,0,0 0">
                            <TextBlock.Text> 
                                <MultiBinding Converter="{StaticResource CurrencyConverter}" ConverterParameter="True">
                                    <Binding Path="INPureWeight" Mode="OneWay" />
                                    <Binding Path="BaseUOMNoofDecimals" Mode="OneWay" />
                                </MultiBinding> 
                            </TextBlock.Text>
                        </TextBlock>
                        <TextBlock Style="{DynamicResource grdCellCurrencyData}"
                                   Width="40"
                                   Text="{Binding Path=INQuantity, Mode=OneWay}" Margin="2,0,0,0">
                        </TextBlock>
                    </StackPanel>
                </DataTemplate>
            </dg:DataGridTemplateColumn.CellTemplate>
        </dg:DataGridTemplateColumn>
    </dg:DataGrid> 
```

在上面的代码中，如果您在 中看到`DataGridTemplateColumn`，我已将网格放入内部并将标题拆分为两行。我想以编程方式从后面的代码中执行相同的方式。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:11:15.367

您可以尝试并使用[`FrameworkElementFactory`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelementfactory.aspx)以编程方式为您的标头创建`DataTemplate`，以下 SO 线程具有与此相关的代码 -[如何在 c# 代码中构建 DataTemplate？](https://stackoverflow.com/questions/248362/how-do-i-build-a-datatemplate-in-c-sharp-code/248638#248638)

但是，正如`FrameworkElementFactory`不[推荐使用](https://stackoverflow.com/questions/9091853/purpose-of-using-frameworkelementfactory)的那样，最好在其中定义标题模板`Resources`并用于[`FindResource()`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.findresource.aspx)设置 HeaderTemplate。

编辑：

这是你的代码：

```
DataGridTemplateColumn col1 = new DataGridTemplateColumn();

//create the data template 
DataTemplate headerLayout = new DataTemplate();

//set up the stack panel 
FrameworkElementFactory gridFactory = new FrameworkElementFactory(typeof(Grid));

// define grid's rows  
var row1 = new FrameworkElementFactory(typeof(RowDefinition));
gridFactory.AppendChild(row1);
var row2 = new FrameworkElementFactory(typeof(RowDefinition));
gridFactory.AppendChild(row2);

// set up the inwardTextBlock 
FrameworkElementFactory inwardTextBlock = new FrameworkElementFactory(typeof(TextBlock));
inwardTextBlock.SetValue(Grid.RowProperty, 0);
inwardTextBlock.SetValue(TextBlock.TextProperty, "INWARD");
gridFactory.AppendChild(inwardTextBlock);

//set up the stack panel 
FrameworkElementFactory spFactory = new FrameworkElementFactory(typeof(StackPanel));
spFactory.SetValue(StackPanel.OrientationProperty, Orientation.Horizontal);
spFactory.SetValue(Grid.RowProperty, 1);

// set up the grossWeightTextBlock 
FrameworkElementFactory grossWeightTextBlock = new FrameworkElementFactory(typeof(TextBlock));
inwardTextBlock.SetValue(TextBlock.TextProperty, "Gross Weight");
inwardTextBlock.SetValue(TextBlock.WidthProperty, 80);
spFactory.AppendChild(inwardTextBlock);

// set up the pureWeightTextBlock 
FrameworkElementFactory pureWeightTextBlock = new FrameworkElementFactory(typeof(TextBlock));
inwardTextBlock.SetValue(TextBlock.TextProperty, "Pure Weight");
inwardTextBlock.SetValue(TextBlock.WidthProperty, 80);
spFactory.AppendChild(inwardTextBlock);

// set up the qtyWeightTextBlock 
FrameworkElementFactory qtyWeightTextBlock = new FrameworkElementFactory(typeof(TextBlock));
inwardTextBlock.SetValue(TextBlock.TextProperty, "Quantity");
inwardTextBlock.SetValue(TextBlock.WidthProperty, 80);
spFactory.AppendChild(inwardTextBlock);

gridFactory.AppendChild(spFactory);

// set the visual tree of the data template 
headerLayout.VisualTree = gridFactory;

// set the header template
col1.HeaderTemplate = headerLayout; 
```

# c# - 在 WPF 中，制作将特殊字符插入多个 TextBox 的按钮的最佳方法是什么？

> ID：11498799
> 
> 赞同：0
> 
> 时间：2012-07-16T05:58:20.647
> 
> 标签：c#, .net, wpf, button, user-interface

如果我有多个 TextBox 和其他文本插入控件，并且我想创建一些将特殊字符插入到焦点所在的 TextBox 中的按钮，那么最好的控件是什么以及应该设置哪些属性？

按键要求：

1.  单击时按钮不会窃取焦点。
2.  按钮可以将文本（例如特殊字符）插入到任何接受键盘输入的控件中。
3.  光标应该像用户在键盘上输入文本一样移动。

如果#2 不可能，将控件限制为仅文本框就足够了。

注意：我不想让按钮无法聚焦，只是为了让它们在单击时不会窃取焦点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:32:11.880

我不知道单击时没有窃取焦点的任何按钮，但是在按钮单击事件句柄中，您可以将焦点返回给以前的所有者。如果我必须实现这一点，我会创建一个附加到所有特殊文本框的父面板和所有要插入一些文本的按钮的行为。

```
 <StackPanel>
    <i:Interaction.Behaviors>
        <local:TextBoxStateTracker/>
    </i:Interaction.Behaviors>
    <TextBox />

    <Button Content="description" Tag="?" />
</StackPanel> 
```

为简单起见，我将要插入到文本框中的文本放在 Tag 属性中。

```
public class TextBoxStateTracker : Behavior<Panel>
{
private TextBox _previouslySelectedElement;
private int _selectionStart;
private int _selectionLength;

protected override void OnAttached()
{
//after control and all its children are created find textboxes and buttons
    AssociatedObject.Initialized += (x, y) =>
        {
            var textBoxElements = FindChildren<TextBox>(AssociatedObject);
            foreach (var item in textBoxElements)
            {
                item.LostFocus += new RoutedEventHandler(item_LostFocus);
            }

            var buttons = FindChildren<Button>(AssociatedObject);
            foreach (var item in buttons)
            {
                item.Click += new RoutedEventHandler(item_Click);
            }
        };
}

private void item_Click(object sender, RoutedEventArgs e)
{
    if (_previouslySelectedElement == null) return;
    //simply replace selected text in previously focused textbox with whatever is in tag property
    var button = (Button)sender;
    var textToInsert = (string)button.Tag;

    _previouslySelectedElement.Text = _previouslySelectedElement.Text.Substring(0, _selectionStart)
        + textToInsert +
        _previouslySelectedElement.Text.Substring(_selectionStart + _selectionLength);
    _previouslySelectedElement.Focus();
    _previouslySelectedElement.SelectionStart = _selectionStart + textToInsert.Length;
}

private void item_LostFocus(object sender, RoutedEventArgs e)
{
    //this method is fired when textboxes loose their focus note that this
    //might not be fired by button click
    _previouslySelectedElement = (TextBox)sender;
    _selectionStart = _previouslySelectedElement.SelectionStart;
    _selectionLength = _previouslySelectedElement.SelectionLength;
}

public List<TChild> FindChildren<TChild>(DependencyObject d)
   where TChild : DependencyObject
{
    List<TChild> children = new List<TChild>();

    int childCount = VisualTreeHelper.GetChildrenCount(d);

    for (int i = 0; i < childCount; i++)
    {
        DependencyObject o = VisualTreeHelper.GetChild(d, i);

        if (o is TChild)
            children.Add(o as TChild);

        foreach (TChild c in FindChildren<TChild>(o))
            children.Add(c);
    }

    return children;
} 
```

}

这或多或少与您描述的一样，但远非完美，我认为这足以让您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:33:04.117

您需要覆盖标签和文本框的模板。

要求 1 和 2 - 可以在充当按钮的标签模板内完成。

要求 3 - 可以在文本框的模板内完成。

这并不容易……
您可能需要学习很多 WPF 样式、XAML 和重写控制模板。甚至可能创建一个自定义控件。

# yii - Yii - 一个控制器多个 url

> ID：11498805
> 
> 赞同：2
> 
> 时间：2012-07-16T05:59:07.023
> 
> 标签：yii

我正在尝试创建两个非常相似并且可以共享同一个数据库表的 Yii 模型。一个是“问题”，一个是“文章”。他们都有一个标题、正文和作者。“问题”在表中有一个额外的字段，“文章”不需要与之交互，称为 follow_up。

大多数方法和验证是相同的，但有一些细微的差异可以用 if 语句轻松完成。我看到的主要问题是 URL，我想要单独的 URL，例如 site.com/question 和 site.com/article，但让它们都与相同的模型、控制器和视图交互。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T06:15:46.770

使用`urlManager`Yii 配置中的组件设置 /article 和 /question 的路由到同一个控制器，然后使用不同的操作或不同的参数来区分两者。由于您说它们几乎相同，因此我建议使用不同的参数和单个操作，如下所示：

```
array(
  ...
  'components' => array(
    ...
    'urlManager' => array(
      'question/<\d+:id>' => 'mycontroller/myaction/type/question/id/<id>',
      'article/<\d+:id>' => 'mycontroller/myaction/type/article/id/<id>',
    ),
  ),
); 
```

当然，您必须根据需要对其进行修改，但这是一般设置。在这里查看更多信息：[http ://www.yiiframework.com/doc/guide/1.1/en/topics.url](http://www.yiiframework.com/doc/guide/1.1/en/topics.url)

# c++ - 向量中的非连续插入

> ID：11498813
> 
> 赞同：0
> 
> 时间：2012-07-16T05:59:34.730
> 
> 标签：c++, vector

是否可以以非连续方式在 std::vector 中插入值，例如，

```
std::vector<int> Myvector;
//Myvector[0] = 123;
//Myvecotr[2] = 456;
//Myvector[5] = 789; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T06:03:22.627

有点。您不能真正以这种方式*插入*，但您可以设置大小，并且只为您关心的人设置值。

如果您真的希望它稀疏（例如，在您的示例中 Myvector[1], [3], [4] 根本不存在），那么不。对于类似的事情，您可以使用 an`std::map<int, int>`而不是向量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T06:56:59.243

当您的代码对尚不存在的元素使用索引时。或者换句话说，如果您的索引超过 (>=) `vector::size()`，那么您正在访问一个不存在的元素。唉，你最终会出现未定义的行为。

```
std::vector<int> Myvector;
Myvector[0] = 123; // boom  Myvector[0] was never created 
```

所以你需要添加这些元素

```
// the boring way
Myvector.push_back(0);
Myvector.push_back(0);
Myvector.push_back(0);
Myvector.push_back(0);
Myvector[0] = 123; // set element 0 to 123
Myvector[2] = 456; // set element 2 to 456 
```

或者如其他答案所述，您设置了大小（我更喜欢）：

```
Myvector.resize(5); 
```

或者从头开始说明尺寸：

```
std::vector<int> Myvector(5); // 5 elements, all with the value of the default c'tor 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T06:07:09.837

如果你可以在开始时设置大小，那么你可以做这样的事情

```
vector<int> iVec(5);
iVec[0] = 0;
iVec[2] = 2;
iVec[4] = 4; 
```

# iphone - 如何在不将 self.view 作为 aa 参数传递的情况下从 iphone 静态库添加视图？

> ID：11498814
> 
> 赞同：0
> 
> 时间：2012-07-16T05:59:39.913
> 
> 标签：iphone, ios5, static-libraries, xcode4.3

我是他 iphone 开发的新手。我想知道是否有任何方法可以将视图添加到 self.view 而不将其作为参数传递。有人可以建议我一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:10:44.873

这很简单。参数只不过是对它的引用。因此，如果您对此有参考，则可以。因此，声明对要添加为子视图的视图的引用。然后在方法中你可以调用方法`[self.view addSubView:<object>.referencedView];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:36:41.997

不，这是不可能的。如果您想向 self.view 添加视图，则必须将其作为参数传递。

如果您不想通过，那么您的库应该了解您的 viewController，并且应该将子视图添加到 viewController.view。

# javascript - 限制 Asp:TextBox 不允许超过 6 个字符

> ID：11498815
> 
> 赞同：1
> 
> 时间：2012-07-16T05:59:41.913
> 
> 标签：javascript, asp.net

我想限制用户不能在文本框中输入超过 6 个字符。当用户开始在文本框中输入并达到最大限制并尝试输入第 7 个字符时，文本框将不允许他这样做并提醒他达到了最大尺寸。我如何做到这一点？

我已经在我的代码中添加了 JavaScript 函数来执行此操作，但没有得到我调用此函数的事件，目前我正在调用 on-blur 但我能够在文本框中输入超过 9 个字符，然后当我点击在一个按钮上然后我收到警报消息。如果达到最大限制，我希望在输入文本框本身时得到提示。我当前的代码如下：-

```
 <asp:TextBox ID="txtVolumeProcessed" runat="server" CssClass="text" MaxLength="999999" onblur="javascript:validate();"  ></asp:TextBox> 
```

和Javascript代码是： -

```
function validate() {
    if (document.getElementById('<%=txtVolumeProcessed.ClientID%>').value.length > 7) {
        alert("Volume Processed not exceed 999999");
        document.getElementById('<%=txtVolumeProcessed.ClientID%>').select();
        document.getElementById('<%=txtVolumeProcessed.ClientID%>').focus();
        return false;
    }
    else {
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T06:01:28.223

如果它是一个 asp.net 文本框，您可以在其上设置[MaxLength](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.maxlength.aspx)属性。这将完成您正在寻找的东西。

```
<asp:TextBox runat="server" MaxLength="6"></asp:TextBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:14:51.267

MaxLength 属性将获取或设置用户可以键入或粘贴到文本框控件中的最大字符数。

如果你写`6`那么六个字符，你可以输入。

所以`999999`改为`6`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T06:23:03.397

如果只想让用户输入字符`MaxLength`，则赋予属性值。`6``6``insted of 999999`

```
No need to check by java script because in `asp:textbox` gives the property to set max.  characters entered by user. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-19T05:01:34.823

如果您使用的是**ASP.NET Core**，那么一点点 JQuery 对我有用（可能也适用于常规 ASP.NET，但未经测试）：

```
$(document).ready(function () {
  $("input[data-val-length-max]").each(function(index) {
    // console.log( index + ": " + $(this).attr('data-val-length-max'));
    $(this).attr("maxlength", $(this).attr('data-val-length-max'));
  });
}); 
```

将上述代码与 System.ComponentModel.DataAnnotations 中的验证属性（如 MaxLengthAttribute 和/或 StringLengthAttribute）结合使用：

> [StringLength(1, ErrorMessage = "中间初始值不能超过1个字符。")]
> 
> [MaxLength(1, ErrorMessage = "中间初始值不能超过1个字符。")]

您还可以根据需要使用其他验证属性。例如，我也使用正则表达式来验证中间名首字母：

> [RegularExpression(@"^[a-zA-Z']*$", ErrorMessage = "只允许使用字母字符。")]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-01T19:34:05.763

确保它使用默认的 TextMode；如果您尝试像 * *Numbe* MaxLength 之类的东西，则会被忽略。

# css - CSS 优先级和 Wordpress

> ID：11498818
> 
> 赞同：0
> 
> 时间：2012-07-16T06:00:32.717
> 
> 标签：css, wordpress, wordpress-theming

所以，在过去的几天里，我一直在尝试将我的[Wordpress 网站和 PunBB 论坛进行可视化整合，但我在 CSS 上遇到了麻烦。](http://bytecraft.org/)目前，我将论坛夹在 Wordpress 的页眉和页脚之间，但 Wordpress 的 CSS 样式表似乎与 PunBB 的表单以一种意想不到的方式发生冲突。

根据 Stack Overflow 上的建议，我继续利用论坛中的所有内容都属于 a 的事实，`<div id="mid-inner">`并添加`#mid-inner`到论坛样式表中的每个 CSS 规则中，给出：

```
...
#mid-inner body {
    background:url(../bg.png) repeat-x #6a0a0a;/*#213f53;*/
    color: #222;
}
#mid-inner a:focus {
    outline: 0;
}
#mid-inner a:link,
#mid-inner a:visited,
#mid-inner .js_link {
    color: #387ca6;
    text-decoration: none;
}
#mid-inner a:hover,
#mid-inner a:active,
#mid-inner a:focus {
    color: #CD0021;
    text-decoration: underline;
}
... 
```

然而，这并没有那么好。出于某种原因，Wordpress 主题坚持要覆盖 PunBB 主题的 CSS，而我无法弄清楚我缺少什么 — 可能与优先级有关。这是 Wordpress 主题、PunBB 主题和混乱的混合主题的快速相册：[Imgur 链接](http://imgur.com/a/txia7)。无论如何，我确定我忘记了一些东西，但是 Wordpress Stack Exchange 已经提供了很多帮助。如果我需要添加更多信息，请告诉我，并提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:04:07.137

查看[级联规则](http://www.w3.org/TR/CSS21/cascade.html#cascade)（特别是关于[特异性](http://www.w3.org/TR/CSS21/cascade.html#specificity)的部分），确保您的 CSS[有效](http://jigsaw.w3.org/css-validator/)并使用浏览器提供的工具（Chome 开发人员工具、Firefox 的 Firebug 扩展等）查看哪些规则正在应用于元素你关心的顺序。

# php - PHP：在 MySQL 数据库中正确存储图像名称

> ID：11498820
> 
> 赞同：2
> 
> 时间：2012-07-16T06:00:34.977
> 
> 标签：php, mysql, image

我将图像名称存储在 MySQL 数据库中。每次我执行上传时，我都会返回一个带有图像名称的链接，然后我提取图像名称并保存到数据库中。我对一些严重缺陷进行了更正，但即使我已经建立了检查点，我仍然面临在我的数据库中插入空格/重复名称的问题。

如何避免文件名的重复/空格？

在数据库中存储名称是否有更好的方法？

![在此处输入图像描述](../Images/132317637120480deda0abe82fb54b69.png)

图像在网络服务器中的位置：

```
http://www.example.com/imageupload/uploads/medium/50038dc14afb7.jpg 
```

浏览器中的链接：

```
http://www.example.org/imageupload/index.php?i=50038dc14afb7.jpg 
```

PHP

```
<?
    $images = retrieve_images();
    insert_images_into_database($images);

    function retrieve_images()
    {        
        $images = explode(',', $_POST['i']);
        return $images;
    }

    function insert_images_into_database($images)
    {
        if(!$images) //There were no images to return
            return false;        

        $db = dbConn::getConnection();

        foreach($images as $image)
        {
            $sql = "INSERT INTO `urlImage` (`image_name`) VALUES ( ? )";
            $prepared = $db->prepare($sql);
            $prepared->execute(array($image));
        }
    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:41:51.497

几件事：

*   要确保您有唯一的文件名，请使用 tempnam() ( [http://php.net/manual/en/function.tempnam.php](http://php.net/manual/en/function.tempnam.php) )

*   为避免页面重新加载问题，请将上传表单发布到不同的页面，该页面在完成上传后重定向到不同的页面（或上一个表单页面）。

*   这与您的问题无关，但您的 SQL 准备语句应该在循环之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T06:16:06.597

首先，可以通过检查来修复空白名称问题`$_POST['i']`：

```
if (!isset($_POST['i'])) {
    echo "No image to upload!";
    die();
} 
```

上传图片后是否尝试过重定向？

```
// When image is uploaded
header("Location: http://example.org/imageupload/index.php");
die(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T06:27:58.163

您可以在上传时更改图像名称，rand() 是函数，它返回随机值，因此可以避免重复的图像名称，日期时间选项将始终返回新的日期时间，因此您可以轻松获得唯一性图片名称

```
Ex.$imageName.rand().$extention;
    OR
Ex. $date = new DateTime(now);
    $date = $date->format('Y_m_d_H_i_s');
    $imageName.$date.$extention; 
```

# android - 使用 cutome 标题栏时无法获得 sdk 版本 15 的功能

> ID：11498832
> 
> 赞同：1
> 
> 时间：2012-07-16T06:02:07.850
> 
> 标签：android, custom-titlebar

我的应用程序 minSdkVersion 是 15。所以当用户触摸它时，应用程序中的按钮会变成浅蓝色。后来我为应用程序添加了一个自定义标题。之后，当用户触摸它时，我的应用程序组件颜色变为橙色。我发现这是自定义标题的问题。如何解决它。我需要 sdk 版本 15 的功能。请看我如何添加自定义标题栏。

我的清单。

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" 
    android:theme="@style/CustomTheme"> 
```

我用于自定义标题栏的样式 (custom_style.xml)

```
<?xml version="1.0" encoding="utf-8"?>
    <resources>
        <style name="CustomTheme" parent="android:Theme">
            <item name="android:windowTitleSize">30dip</item>
        </style>
    </resources> 
```

更改为客户标题栏的活动代码

```
requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

    setContentView(R.layout.main);

    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title); 
```

我的标题栏布局（window_title.xml）

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="30dip"
android:background="#FF0000" >

 <ImageView
    android:id="@+id/header"
    android:src="@drawable/ic_launcher"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_gravity="left"/>

<Switch
    android:id="@+id/laodAutomatically"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="MirrorLink auto-connect" 
    style="@android:style/Theme.Holo"
    android:layout_alignParentRight="true"
     />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:03:01.913

您的主题可能应该继承自一个主题，这是 SDK 15 的主题。有一个很好的教程可以帮助您开始支持具有主题和样式的各种 SDK 版本。希望这可以帮助。

[http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

您的主题应该有选择地继承 Theme 或 android:Theme.Light，具体取决于平台版本。看向本页的末尾。

# php - ColdFusion 文件中的 PHP 变量值

> ID：11498837
> 
> 赞同：0
> 
> 时间：2012-07-16T06:02:56.953
> 
> 标签：php, javascript, jquery, coldfusion

我在 ColdFusion 页面上实现了验证码。我希望这些 PHP 变量的值来验证用户提交的验证码。我正在尝试通过 jQuery 中的 ajax 来做到这一点。但没有取得任何成功。这是代码： -

PHP代码：

```
<?php
session_start();
$word_1 = '';
for ($i = 0; $i < 4; $i++) 
{
    $word_1 .= chr(rand(97, 122));
}
for ($i = 0; $i < 4; $i++) 
{
    $word_2 .= chr(rand(97, 122));
}
$_SESSION['random_number'] = $word_1.' '.$word_2;
$dir = 'fonts/';
$image = imagecreatetruecolor(165, 50);
$font = "recaptchaFont.ttf";
$color = imagecolorallocate($image, 0, 0, 0);
$white = imagecolorallocate($image, 255, 255, 255); 
imagefilledrectangle($image, 0,0, 709, 99, $white);
imagettftext ($image, 22, 0, 5, 30, $color, $dir.$font, $_SESSION['random_number']);
header("Content-type: image/png");
imagepng($image); 
$var = $word_1;
//echo "http://ed-s2:81/iucn_assets/custom/rangers/reCaptcha/get_captcha.php?var=".$var;
$word_1 = $_POST['firstRanNo'];
?> 
```

ColdFusion 文件代码（在 jQuery 中获取 PHP 变量）：

```
function change_captcha()
 {
    document.getElementById('captcha').src="http://ed-s2:81/iucn_assets/custom/rangers/reCaptcha/get_captcha.php?rnd=" + Math.random();
            var getNo = random_no();
            var num= "abc";         
             function random_no(){           
                 var res="";
                 $.ajax
                 ({
                    type:"POST",
                    data:{"firstRanNo":num},
                    url:"http://ed-s2:81/iucn_assets/custom/rangers/reCaptcha/get_captcha.php",
                    async:false,
                    success:function(result){

                        alert(result);
                    }        
                 });     
             }
 } 
}); 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:35:11.483

您使用的是什么版本的 ColdFusion？[如果是 ColdFusion 8 或更高版本，为什么不使用 <cfimage> - http://livedocs.adobe.com/coldfusion/8/Images_11.html](http://livedocs.adobe.com/coldfusion/8/Images_11.html)的内置验证码功能？

# jsf - javax.el.PropertyNotFoundException：目标无法到达，“null”在外键引用上返回 null

> ID：11498839
> 
> 赞同：5
> 
> 时间：2012-07-16T06:03:05.850
> 
> 标签：jsf, foreign-keys, jpa-2.0

**我知道 managedBean 有问题，但我不知道它是什么**

`departmentManagedBean.department.faculty.facultyName`当我从 jsf 页面尝试时，它会给出一个空指针，如下所示：

> javax.el.PropertyNotFoundException: /administrator/department/DepartmentRegistration.xhtml @30,260 value="#{departmentRequestBean.department.faculty.facultyName}": 目标不可达，'null' 返回 null

```
javax.el.PropertyNotFoundException: /administrator/department/DepartmentRegistration.xhtml @30,260 value="#{departmentRequestBean.department.faculty.facultyName}": Target Unreachable, 'null' returned null
at com.sun.faces.facelets.el.TagValueExpression.getType(TagValueExpression.java:100)
at org.richfaces.component.util.InputUtils.findConverter(InputUtils.java:123)
at org.richfaces.component.util.InputUtils$1.getConverterByProperty(InputUtils.java:56)
at org.richfaces.component.util.InputUtils.getConvertedValue(InputUtils.java:148)
at org.richfaces.component.util.InputUtils.getConvertedValue(InputUtils.java:137)
at org.richfaces.renderkit.InputRendererBase.getConvertedValue(InputRendererBase.java:50)
at javax.faces.component.UIInput.getConvertedValue(UIInput.java:1030)
at javax.faces.component.UIInput.validate(UIInput.java:960)
at javax.faces.component.UIInput.executeValidate(UIInput.java:1233)
at javax.faces.component.UIInput.processValidators(UIInput.java:698)
at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
at javax.faces.component.UIForm.processValidators(UIForm.java:253)
at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
at javax.faces.component.UIViewRoot.processValidators(UIViewRoot.java:1172)
at com.sun.faces.lifecycle.ProcessValidationsPhase.execute(ProcessValidationsPhase.java:76)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:636) 
```

* * *

```
public class Department implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @NotNull
    @Column(name = "DepartmentID")
    private Integer departmentID;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 255)
    @Column(name = "DepartmentName")
    private String departmentName;
    @JoinColumn(name = "FacultyName", referencedColumnName = "FacultyName")
    @ManyToOne(optional = false, fetch = FetchType.EAGER)
    public Faculty faculty;

    public Faculty getFaculty() {
        return faculty;
    }

    public void setFaculty(Faculty faculty) {
        this.faculty = faculty;
    }
    public Department() {

    }

    public Department(Integer departmentID) {
        this.departmentID = departmentID;
    }

    public Department(Integer departmentID, String departmentName) {
        this.departmentID = departmentID;
        this.departmentName = departmentName;
    }

    public Integer getDepartmentID() {
        return departmentID;
    }

    public void setDepartmentID(Integer departmentID) {
        this.departmentID = departmentID;
    }

    public String getDepartmentName() {
        return departmentName;
    }

    public void setDepartmentName(String departmentName) {
        this.departmentName = departmentName;
    }
} 
```

* * *

```
public class DepartmentSessionBean {
    @PersistenceContext(unitName = "ApplicationPU")
    private EntityManager em;

    public void persist(Department department) {     
        em.persist(department);
    }
} 
```

* * *

```
public class Faculty implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @NotNull
    @Column(name = "FacultyID")
    private Integer facultyID;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 255)
    @Column(name = "FacultyName")
    private String facultyName;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "faculty", fetch = FetchType.EAGER)
    private List<Department> departmentList;

    public Faculty() {
    }

    public Faculty(Integer facultyID) {
        this.facultyID = facultyID;
    }

    public Faculty(Integer facultyID, String facultyName) {
        this.facultyID = facultyID;
        this.facultyName = facultyName;
    }

    public Integer getFacultyID() {
        return facultyID;
    }

    public void setFacultyID(Integer facultyID) {
        this.facultyID = facultyID;
    }

    public String getFacultyName() {
        return facultyName;
    }

    public void setFacultyName(String facultyName) {
        this.facultyName = facultyName;
    }

    public List<Department> getDepartmentList() {
        return departmentList;
    }

    public void setDepartmentList(List<Department> departmentList) {
        this.departmentList = departmentList;
    }
} 
```

**这是我需要解决方案的 ManagedBean：**

```
@ViewScoped public class DepartmentRequestBean {
@EJB
private DepartmentSessionBean departmentSessionBean;
private Department department = new Department();
public Department getDepartment() {
    return department;
}

public void setDepartment(Department department) {
    this.department = department;
}

public void save(){

        departmentSessionBean.persist(department);

}

public DepartmentRequestBean() {
    this.faculty = new Faculty();
}} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T13:14:58.173

> value="#{departmentRequestBean.department.faculty.facultyName}": 目标不可达，'null' 返回 null

这基本上意味着以下值之一

*   `#{departmentRequestBean.department}`
*   `#{departmentRequestBean.department.faculty}`

`null`在处理表单提交期间返回。由于您已经明确创建了`Department`自己，那么它只能表示`Faculty`仍然是`null`.

要正确修复它，请更换`DepartmentRequestBean`

```
private Department department = new Department(); 
```

经过

```
private Department department;

@PostConstruct
public void init() {
    department = new Department();
    department.setFaculty(new Faculty());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T09:20:50.163

像这样在 backing bean 中初始化你的部门类

```
public Department getDepartment() {
if(department == null){
department = (Department)super.getInstance(Department.class);
}
return department;
} 
```

如果对象变为空，这将创建一个新的部门对象

# php - 如果有人从其他墙上安装应用程序，如何获取 fb 用户 ID

> ID：11498843
> 
> 赞同：-2
> 
> 时间：2012-07-16T06:03:28.617
> 
> 标签：php, facebook, facebook-graph-api

我是 facebook 应用程序的新手。所以，我有点困惑。首先我会告诉你我在我的应用程序中做了什么。我已经创建了一个应用程序。任何人安装我的应用程序，然后我将发布在他的墙上。

现在我告诉你我想要什么？如果有人点击他的帖子并安装我们的应用程序，那么我想存储当前用户引用其帖子的用户的 facebook id？

例如：杰克安装我们的应用程序。安装应用程序后，我们在杰克墙上发布应用程序链接、消息等。之后标记看到杰克墙上的帖子并标记安装应用程序。那时我想要杰克 FB 用户 ID。有可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:08:19.103

您最好的选择是在第一个发帖人分享到他的墙上的链接中包含“发帖人用户 ID”。这样，当其他用户使用此链接时，您可以从 $_GET 变量中获取推荐人用户 ID。

# python - 如何暂停 Python 中的所有其他线程？

> ID：11498848
> 
> 赞同：4
> 
> 时间：2012-07-16T06:03:44.390
> 
> 标签：python, celery

我正在制作一个`"python debug mapper"`显示`'snapshot'`当前 python 执行的

目前，我需要知道一种方法，`pause every other threads`以便`'capture'`在其他线程运行时不会发生。

有没有办法：

*   暂停其他线程（）；
*   恢复其他线程（）；

谢谢。

ps：我应该进行任何修改以使代码与 Celery 和 Django 一起使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:36:54.393

根据您是否只想在其他线程正在运行时跟踪一个线程，或者您是否想停止其他线程，我可以考虑两种解决方案。如果其他线程必须在不跟踪的情况下运行，只需让您的跟踪命令首先检查当前线程 id，并且仅当线程是您感兴趣的线程时才执行跟踪操作：

```
def dotrace():
    if tracing and threading.current_thread() == the_traced_thread:
        ... do the tracing ... 
```

相反，如果在跟踪一个线程时必须停止其他线程，则可以使跟踪操作作为其他线程的停止工作，添加如下内容：

```
def dotrace():
    while tracing and threading.current_thread() != the_traced_thread:
        time.sleep(0.01)
    if tracing and threading.current_thread() == the_traced_thread:
        ... do the tracing ... 
```

当然，在最后一种情况下，只有跟踪操作会暂停，因此其他线程可能会继续运行，直到它们完成或执行任何被跟踪的操作。

基本上，您只会停止正在监视的其他线程，而不是所有其他线程。我会说这很好，因为增加了程序仍然保持功能的可能性（您使用的某些库和框架可能需要其他线程来运行以使被跟踪的线程实际工作）但当然是 YMMV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:13:31.723

你可以使用`sys.setcheckinterval(somebignumber)`

```
设置检查间隔（...）
    设置检查间隔（n）

    告诉 Python 解释器每隔一段时间检查一次异步事件
    n 说明。这也会影响线程切换发生的频率。

```

# mysql - Sql 查询不起作用？

> ID：11498855
> 
> 赞同：0
> 
> 时间：2012-07-16T06:04:29.823
> 
> 标签：mysql, sql

为什么此查询不返回 2011 年和 2012 年的数据。谁能帮助我。提前致谢。

```
SELECT 
    country_code,
    SUM(`attendance`) as k6_attendance,
    count(*) as total_events ,
    IF(MONTH(`session_date`)<5,YEAR(`session_date`),YEAR(`session_date`)+1) as YR2
  FROM `v_knowledge_session` v
  WHERE  session_date >0 
  Group by YR2,country_code
  HAVING YR2>(YEAR(NOW())-2) AND country_code='IN'
  ORDER BY country_code,YR2; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:27:40.567

尝试将其包装在子选择中，然后在外部查询中对 YR2 进行比较：

```
SELECT a.* 
FROM
(
    SELECT 
        country_code,
        SUM(attendance) AS k6_attendance,
        COUNT(*) AS total_events,
        IF(MONTH(session_date)<5,YEAR(session_date),YEAR(session_date)+1) AS YR2
    FROM v_knowledge_session v
    WHERE session_date > 0 AND country_code = 'IN'
    GROUP BY YR2, country_code
) a
WHERE 
    a.YR2 > YEAR(NOW())-2
ORDER BY 
    a.country_code, a.YR2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:08:27.477

您需要在 ORDER BY 子句以外的地方使用相同的表达式

```
SELECT country_code,SUM(`attendance`) as k6_attendance,count(*) as total_events , 
    IF(MONTH(`session_date`)<5,YEAR(`session_date`),YEAR(`session_date`)+1) as YR2 
    FROM `v_knowledge_session` v 
    WHERE  session_date >0  
    Group by IF(MONTH(`session_date`)<5,YEAR(`session_date`),YEAR(`session_date`)+1) ,country_code 
    HAVING IF(MONTH(`session_date`)<5,YEAR(`session_date`),YEAR(`session_date`)+1) >(YEAR(NOW())-2) AND country_code='IN' 
    ORDER BY country_code,YR2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T06:08:46.813

您不能在`HAVING`子句中使用非聚合条件。`country_code='IN'`必须在`WHERE`子句中。`HAVING`创建子句的原因是该`WHERE`子句无法处理聚合条件。在您的查询中，`having`不需要子句，因为您的条件未聚合。您也可以删除`ALIAS` *v*

试试这个：

```
SELECT    country_code, 
          SUM(`attendance`) as k6_attendance,
          count(*) as total_events ,
          IF(MONTH(`session_date`) < 5 ,
               YEAR(`session_date`),
               YEAR(`session_date`) + 1) as YR2
FROM      `v_knowledge_session` 
WHERE      session_date > 0 AND country_code='IN' AND YR2 > (YEAR(NOW())-2) 
Group by  YR2, country_code
ORDER BY  country_code,YR2; 
```

# oracle - 如何恢复对 Oracle Forms 6i 中记录的更改？

> ID：11498865
> 
> 赞同：2
> 
> 时间：2012-07-16T06:05:59.297
> 
> 标签：oracle, triggers, plsql, oracleforms

我有一个在 Oracle Forms 6i 中运行的表单，它具有表格格式的行，这些行是从数据库中的某个表中填充的。一列启用了 [List_Of_Values] 属性，以允许用户在可能的值中进行选择。

列表中的某些值只有在用户有权执行此操作时才能选择，并且我创建了一个 [WHEN-VALIDATE-ITEM] 触发器来在值更改后检查权限。触发器引发 form_trigger_failure 以防止用户保存所做的更改。

问题是，如果用户收到关于缺少选择该值的权限的通知，那么用户就无法知道之前的（旧）值来再次选择它，除非表单被取消，这会导致他的另一个（有效）更改也会丢失。

这是我在触发器中编写的代码

```
DECLARE
NEW_LOCATION  VARCHAR2(100);
BEGIN
NEW_LOCATION := :BLK_MAT_STG_PLACES_PILE.STG_LOC_ID;

    IF NEW_LOCATION LIKE 'OH01%' THEN
        IF NOT :GLOBAL.USER_ID LIKE 'Admin%' THEN
            MESSAGEBOX('You are not authorized to select this value');

            /* What can I write to load the old value to this item? */ 
            RAISE FORM_TRIGGER_FAILURE;
        END IF;
    END IF;
END; 
```

我试过 ROLLBACK 但这并没有将旧值恢复为表单。我也尝试了 SYNCHRONIZE，但没有效果。除了再次通过数据库表提取值之外，还有其他选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T06:37:29.970

```
BEGIN    
    IF NEW_LOCATION LIKE 'OH01%' THEN
        IF NOT :GLOBAL.USER_ID LIKE 'Admin%' THEN
            MESSAGEBOX('You are not authorized to select this value');

            /* Return it to the original value that was fetched from database */ 
            :BLK_MAT_STG_PLACES_PILE.STG_LOC_ID :=
              get_item_property('BLK_MAT_STG_PLACES_PILE.STG_LOC_ID'
                               ,DATABASE_VALUE);

            RAISE FORM_TRIGGER_FAILURE;
        END IF;
    END IF;
END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T05:02:13.263

我的一位同事找到了解决此问题的方法如下：

1.  在参数列表中定义一个全局参数（我命名为`TEMP_LOCATION`）

2.  在`PRE-TEXT-ITEM`触发器中（在导航到项目之前执行）我写了

    开始 :GLOBAL.TEMP_LOCATION := :BLK_MAT_STG_PLACES_PILE.STG_LOC_ID; 结尾;

3 然后在`WHEN-VALIDATE-ITEM`我在这个问题中写的触发代码中，我取消了 raise`FORM_TRIGGER_FAILURE`并简单地用`TEMP_LOCATION`

```
DECLARE
    NEW_LOC  VARCHAR2(100);
BEGIN
        NEW_LOC := :BLK_MAT_STG_PLACES_PILE.STG_LOC_ID;

        IF   NEW_LOC LIKE 'OH01%' THEN

            IF NOT :GLOBAL.USER_ID LIKE 'Admin_%' THEN

                MESSAGE('YOU ARE NOT AUTHORIZED TO SELECT THIS VALUE');

                :BLK_MAT_STG_PLACES_PILE.STG_LOC_ID := :GLOBAL.TEMP_LOCATION;  
                  /* this solved my problem */

            END IF;

        END IF;
END; 
```

我感谢所有试图提供帮助的人。如果有人提出比我自己更好的答案，那么我会很乐意接受。

# postgresql - 我如何转换成字符串？

> ID：11498867
> 
> 赞同：0
> 
> 时间：2012-07-16T06:06:14.630
> 
> 标签：postgresql, openerp

我使用 sql 命令在数据库中选择字段

```
 partner_obj = self.pool.get('res.partner'). browse (cr, uid, ids, *args)
                partner_name = partner_obj.ids
                customer = (partner_name)
                cr.execute("select b.city from res_partner a, res_partner_address b where b.partner_id = a.id AND a.id = %s",(customer))
                ads = cr.fetchone()
                city = ads and ads[0] or None 
```

但是，我只知道我们必须转换成字符串。我已经尝试过这样做（上面的代码），但仍然无法正常工作。

我之所以这样，是因为你想知道SO是在哪个城市发消息的

你能帮我吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:11:51.420

OpenERP 城市中的第一点不是关系字段，因此当您触发 sql 来获取城市时，您将获得名称，但如果您有任何存储城市代码的自定义项，那么您需要再进行一次 SQL 注入以从城市中找出匹配的城市代码。

如果您将城市作为与 res_partner_address 的关系字段，那么在这种情况下，城市字段将仅存储关系记录表的 ID，因此当您使用 sql 注入时，您将获得与您的地址相关联的城市 ID。

如果我遗漏了什么，请告诉我，谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T16:39:40.930

我认为您不需要运行原始 SQL，您应该能够使用浏览记录来获取您想要的信息。我不确定你到底想从你的问题中得到什么，但我假设你正在传递一个合作伙伴 ID 列表，并且你想要返回一个他们拥有地址的所有城市名称的列表。我没有测试过这段代码，只是一个建议。

```
def find_cities(self, cr, uid, partner_ids, context=None):
    cities = set()
    partner_obj = self.pool.get('res.partner')
    for partner in partner_obj.browse(cr, uid, partner_ids, context):
        for address in partner.address:
            if address.city:
                cities.add(address.city)
    return list(cities) 
```

# mongoid - mongoid.yml 在生产中设置错误的数据库

> ID：11498871
> 
> 赞同：3
> 
> 时间：2012-07-16T06:06:32.500
> 
> 标签：mongoid

我升级到 mongoid 3.0.1 并创建了新格式的 mongoid.yml - 我的 mongoid.yml 看起来像这样：

```
production:
  sessions:
    default:
      database: grbr_production
      hosts:
        - localhost:27017
      options:
        consistency: :strong
  options:
    raise_not_found_error: false
test:
  sessions:
    default:
      database: grbr_test
      hosts:
        - localhost:27017
      options:
        consistency: :strong
        raise_not_found_error: false
development:
  sessions:
    default:
      database: grbr_development
      hosts:
        - localhost:27017
      options:
        consistency: :strong
        raise_not_found_error: false 
```

在开发中，我看到选择了正确的数据库。但在生产中，我看到“管理员”数据库被选中，这破坏了我的应用程序。我已在生产机器中将 RAILS_ENV 设置为“生产”，但仍然看到此错误。我看到的另一个非常奇怪的事情是，在生产中，moped 甚至不查询数据库。以下来自开发和生产的日志显示：

```
Development log:
 MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6645ms)**
 MOPED: 127.0.0.1:27017 QUERY        database=grbr_development collection=topsearches  selector={"$query"=>{"type"=>"books"}, "$orderby"=>{"cnt"=>-1}} flags=[] limit=10 skip=0 fields=nil (0.8984ms)

Production Log:
MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6878ms)** 
```

所以在生产中，我看不到生产数据库上的查询被触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T03:27:51.233

为什么您的产品指向本地主机？那好像不行了

你可以尝试这样的事情：

```
production:
  sessions:
    default:
      uri: "YOUR-DB-ADDRESS" 
```

# android - 在 Android 中更新微调器

> ID：11498873
> 
> 赞同：0
> 
> 时间：2012-07-16T06:06:34.647
> 
> 标签：android, spinner

在我的应用程序中，我有 1 个微调器选项。我正在显示 6 个值（这是值文件中的数组）。现在，当我单击其 5 项微调器值时，所选项目将显示在活动屏幕的微调器中。

当我在微调器中选择第 6 项时，我必须开始一项新活动。可能吗？我必须按位置值执行此操作吗？

同样在新活动中（选择第 6 项后），我有 5 个 edittext 值，用户可以在其中输入一个字符串，该字符串应该替换微调器中的旧值。是否可以动态更新微调器？

我的微调器代码：

```
Spinner s2=(Spinner)findViewById(R.id.spinner1);
ArrayAdapter<CharSequence> adapter1 = ArrayAdapter.createFromResource(
  this, R.array.group_array, android.R.layout.simple_spinner_item);
adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
s2.setAdapter(adapter1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:15:19.610

这是可能的

## 编码：

```
ArrayAdapter yearadp =  new ArrayAdapter(this,android.R.layout.simple_spinner_item,  yearlist);
            yearadp.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

         year_spinner.setAdapter(yearadp);
    index=0;

     year_spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
          spintext=parent.getItemAtPosition(pos).toString();

                if(spintext=="6")
                {
 intent        =    new Intent(ListMonthActivity.this,NewChart.class);
 startActivity(intent);
 }
  }
    } 
```

是的，我们可以用设置来做

```
mon_spinner.setSelection(iSelectedMonth);
intent        =    new Intent(ListMonthActivity.this,NewChart.class); 
```

当某个动作完成时，您可以提及或不提及，您可以传递到另一个活动中。

# extjs4 - 激活选项卡面板的第二个选项卡

> ID：11498875
> 
> 赞同：2
> 
> 时间：2012-07-16T06:06:44.580
> 
> 标签：extjs4, extjs4.1

我`tabpanel`在第一个选项卡上有一个 , 和一个按钮。当我`click`在那时`button`，我需要到`setfocus`第二个选项卡和`activate`它（如显示属于该选项卡的内容）。我的代码如下，我`setFocus`无法`activate`从`Button click event`.

```
Ext.define('MyApp.view.MyTabPanel', {
    extend: 'Ext.tab.Panel',

    height: 250,
    width: 400,
    activeTab: 0,

    initComponent: function () {
        var me = this;

        Ext.applyIf(me, {
            items: [{
                xtype: 'panel',
                title: 'Tab 1',
                items: [{
                    xtype: 'button',
                    text: 'MyButton',
                    listeners: {
                        click: {
                            fn: me.onButtonClick,
                            scope: me
                        }
                    }
                }]
            }, {
                xtype: 'panel',
                title: 'Tab 2'
            }, {
                xtype: 'panel',
                title: 'Tab 3'
            }]
        });

        me.callParent(arguments);
    },

    onButtonClick: function (button, e, options) {
        // Set Focus, and activate the 2nd tab
    }

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T06:50:07.523

找到选项卡面板的容器。要获取容器，您可以使用 Ext.getCmp

```
Ext.getCmp('center-region').setActiveTab('your-tab-name'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T06:27:58.913

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.tab.Panel-method-setActiveTab](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.tab.Panel-method-setActiveTab)

还有几个在类级别文档中设置活动选项卡的示例。

# mysql - mysql联合不同的数据库但相同的模式

> ID：11498878
> 
> 赞同：1
> 
> 时间：2012-07-16T06:06:48.270
> 
> 标签：mysql, union

如图（phpmyadmin），我在数据库**week1**中有表，这些表现在是空的。

我有另一个具有完全相同 sql 架构**w1moninside**和**w1monoutside**的数据库， 但它们具有值。

我想**联合**这两个并在第 1 周插入它们我该怎么办？我插入图片只是为了清除.unoin 用于其中一个表，例如第一个表，**数据** 对我来说就足够了

谢谢。

![在此处输入图像描述](../Images/8978113b28360e7480ddd602e10a195f.png)

```
mysql> describe w1moninside.data;
+--------------+------------------+------+-----+---------+-------+
| Field        | Type             | Null | Key | Default | Extra |
+--------------+------------------+------+-----+---------+-------+
| sid          | int(10) unsigned | NO   | PRI | NULL    |       |
| cid          | int(10) unsigned | NO   | PRI | NULL    |       |
| data_payload | text             | YES  |     | NULL    |       |
+--------------+------------------+------+-----+---------+-------+
3 rows in set (0.01 sec) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:13:47.643

```
Insert into week1 (column list)
select column list from dbname.w1moninside where...
union
select column list from dbname.w1monoutside where.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:37:51.703

```
Insert into week1.TableName (column list)
select column list from w1moninside.TableName where...
union
select column list from w1monoutside.TableName where 
```

# vb.net - RightFax 服务器设置

> ID：11498879
> 
> 赞同：0
> 
> 时间：2012-07-16T06:06:53.953
> 
> 标签：vb.net, rightfax

我目前正在使用 Visual Basic 与 rightfax 进行集成。为了建立连接，有一些基本设置。

请问服务器名只能是servername 还是IP 地址也可以？

因为目前我正在使用 IP 但它返回一个错误“系统找不到指定的文件”任何人都可以告诉我吗？感谢任何回复。

```
gl_MyFaxServer = New RFCOMAPILib.FaxServer()
        gl_MyFaxServer.ServerName = "172.17.80.167"
        gl_MyFaxServer.Protocol = RFCOMAPILib.CommunicationProtocolType.cpNamedPipes
        gl_MyFaxServer.AuthorizationUserID = "ADMINISTRATOR"
        gl_MyFaxServer.AuthorizationUserPassword = "password01"
        gl_MyFaxServer.UseNTAuthentication = RFCOMAPILib.BoolType.False

        gl_MyFaxServer.OpenServer() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T21:56:56.990

您是否安装了 FaxUtil 客户端来安装所需的 dll 文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T09:46:17.990

由于身份验证失败导致此错误。通过使用它们通过“RightFax FaxUtil”连接到正确的传真服务器，确保提供的详细信息。

还有一件事，“管理员”帐户设置为 RightFax 服务器没有密码。所以尝试评论“gl_MyFaxServer.AuthorizationUserPassword = “password01””行。不要传递空字符串，只需删除密码分配。

# javascript - JQuery - 如何将新函数附加到现有事件处理程序？

> ID：11498880
> 
> 赞同：0
> 
> 时间：2012-07-16T06:06:57.413
> 
> 标签：javascript, jquery

我遇到过这个用例：多个模板文件有自己的 JavaScript 代码来处理浏览器调整大小。我希望，作为渲染结果，所有模板都将使用每个模板中定义的 JavaScript 处理浏览器调整大小事件（类似于 C# 的事件处理程序功能）

例如：

```
header.jsp - alert('foo') when browser resizes

body.jsp - alert('bar') when browser resizes

When header/body.jsp are rendered into one page:

alert('foo') then alert('bar') when browser resizes. 
```

到目前为止，我还没有看到 JQuery 如何支持这个用例。我的想法可行吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:29:14.263

JavaScript 是 .js 文件而不是 .jsp。

但是你必须监听的事件是 resize 事件。在 JQuery 中你可以使用这个：

```
$(document).resize(function() {
    //whatever
    alert('foo');
}); 
```

或者

```
$(document).on('resize', function() {
    //whatever
    alert('bar');
}); 
```

# php - 关于在下拉框中显示所有字体

> ID：11498881
> 
> 赞同：0
> 
> 时间：2012-07-16T06:07:01.670
> 
> 标签：php, jquery, html

> **可能重复：**
> [列出用户浏览器可以显示的所有字体](https://stackoverflow.com/questions/3368837/list-every-font-a-users-browser-can-display)

我想在下拉框中显示我系统中的所有字体我该怎么做直到现在我只是手动指定字体名称..

```
<select id="family" name="family">
<option>Verdana</option>
<option>Arial</option>
<option>Helvetica</option>
<option>Times New Roman</option>
<option>Comic Sans MS</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:38:20.477

PHP 在服务器上运行。这必须在客户端完成，因此您需要使用 Flash 或 Silverlight（在客户端计算机上运行）。

# actionscript-3 - flash cs5.5 as3 - 获取阿拉伯语表示形式 A 和 B 的 unicode 字符

> ID：11498884
> 
> 赞同：0
> 
> 时间：2012-07-16T06:07:07.603
> 
> 标签：actionscript-3, flash, unicode

我有一个像 'دبي' 这样的字符串，我想得到它正确的 unicode 字符。目前，我正在使用 str.charCodeAt(index) 来获取其 unicode 字符，但对于阿拉伯字符，它提供 0600 到 06FF 之间。但是，我想要阿拉伯语演示文稿表格 A 和 B - 以实际编写的为准。

谁能建议如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:29:34.003

您发布的字符串由 0600...06FF 范围内的三个普通阿拉伯字母组成，因此您得到*的是*正确的 Unicode 字符。如果您的意思是要确定使用的上下文字形形式，那么这超出了字符级别，无法从字符串中确定。（可以通过应用阿拉伯语书写规则来确定*应该*使用哪些形式，但这与知道渲染软件实际使用哪些形式不同。*）*

阿拉伯语演示文稿是不适合正常使用的遗留字符。正常渲染不应该将正常字符转换为这种形式，而是根据上下文选择字形。

# c# - 将进程列表放入 C# 中的组合框中

> ID：11498886
> 
> 赞同：0
> 
> 时间：2012-07-16T06:07:20.067
> 
> 标签：c#, winforms, combobox

我想要的是，当我单击 comboBox1 框时，它将显示当前正在运行的所有进程。

```
private void comboBox1_MouseClick(object sender, MouseEventArgs e)
{
     comboBox1.Items.Clear();
     Process[] MyProcess = Process.GetProcesses();
     for (int i = 0; i < MyProcess.Length; i++)
            comboBox1.Items.Add(MyProcess[i].ProcessName + "-" + MyProcess[i].Id);
} 
```

为什么它拒绝工作？：秒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T06:09:58.280

最好使用列表框，这样您就可以在自己的行上显示所有进程，而不必像现在在组合框/下拉菜单中那样将其下拉

欲了解更多信息，请看这里 [http://msdn.microsoft.com/en-us/library/1f3ys1f9.aspx](http://msdn.microsoft.com/en-us/library/1f3ys1f9.aspx)

像这样更改您的代码以进行测试

添加这个方法

```
private void LoadProcesses()
{
    comboBox1.Items.Clear();
    Process[] MyProcess = Process.GetProcesses();
    for (int i = 0; i < MyProcess.Length; i++)
        comboBox1.Items.Add(string.Format("{0} - {1}", MyProcess[i].ProcessName, MyProcess[i].Id));

} 
```

并在您的表单加载事件中添加：

```
LoadProcesses(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T06:18:37.813

尝试在 initializeComponets 之后立即将代码放入构造函数中使用选项卡聚焦组合框！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T06:35:53.507

不知道问题是什么，但这段代码工作正常：

```
comboBox1.Items.Clear();
comboBox1.Items.AddRange(Process.GetProcesses().Select<Process, string>(F => F.ProcessName + "- " + F.Id).ToArray()); 
```

实际上，也许进程的数量发生了变化，这会使索引器失效......

# windows - Visual Studio 2005 .exe 文件未在另一台计算机上运行

> ID：11498888
> 
> 赞同：1
> 
> 时间：2012-07-16T06:07:27.557
> 
> 标签：windows, windows-7, visual-studio-2005, exe

我有一个在 Windows 7 64 位机器上运行的 Visual Studio 2005 C++ 应用程序。我试图在另一台具有 Windows 7 64 位的计算机上运行它，但是当我将它复制到桌面并运行 .exe 文件时，没有响应.但是我没有在新机器上安装visual studio 2005 ide，我目前正在安装它。另外，我用谷歌搜索并得到了很多令人困惑的答案。有人可以告诉我这里可能会出现什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:30:21.527

尝试在可执行文件不工作的机器上安装“Microsoft Visual C++ Redistributable Package”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:50:45.653

您需要构建才能在`Release`没有`Debug`Visual Studio 的 PC 上运行应用程序。如果您已经这样做了，请尝试将 EXE 加载到目标计算机上的[Dependency Walker](http://dependencywalker.com/)中，以查看可能缺少哪些其他库。

# spring - JAR 地狱问题？Weblogic 10.3.4 Spring 3.1.0.RELEASE Spring 模块验证 0.8

> ID：11498898
> 
> 赞同：0
> 
> 时间：2012-07-16T06:09:08.640
> 
> 标签：spring, weblogic, weblogic-10.x, spring-3, spring-modules

我正在使用 Maven 开发 Java Spring 3.1.0.RELEASE 并一直在 Jettry 服务器上运行它。它在 Jetty 上运行良好。

在我们迁移到 Weblogic 10.3.4 之前，问题来了。我们正在使用 Spring Modules Validation 0.8，它需要 Spring 2.0.3 才能运行。这会是错误的原因吗？（它可能会覆盖我们拥有的 Spring 3.1.0.RELEASE）

以下是错误

```
ExecuteThread: '6' for queue: 'weblogic.kernel.Default (self-tuning)'] ERROR o.s.web.context.ContextLoader - Context initialization failed
org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from ServletContext resource [/WEB-INF/spring/spring-security.xml]; nested exception is java.lang.NoSuchMethodError: org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.getLocalName(Lorg/w3c/dom/Node;)Ljava/lang/String;
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:375) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:303) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:280) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:131) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:147) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:92) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:100) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:298) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:241) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:184) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:49) [spring-2.0.3.jar:2.0.3]
at weblogic.servlet.internal.EventsManager$FireContextListenerAction.run(EventsManager.java:481) [weblogic.jar:10.3.4.0]
at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321) [com.bea.core.weblogic.security.identity_1.1.2.1.jar:1.1.2.1]
at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120) [com.bea.core.weblogic.security.wls_1.0.0.0_6-1-0-0.jar:6.1.0.0]
at weblogic.servlet.internal.EventsManager.notifyContextCreatedEvent(EventsManager.java:181) [weblogic.jar:10.3.4.0]
at weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1872) [weblogic.jar:10.3.4.0]
at weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:3153) [weblogic.jar:10.3.4.0]
at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1508) [weblogic.jar:10.3.4.0]
at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:482) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425) [weblogic.jar:10.3.4.0]
at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.flow.ScopedModuleDriver.start(ScopedModuleDriver.java:200) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:247) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425) [weblogic.jar:10.3.4.0]
at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:27) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:636) [weblogic.jar:10.3.4.0]
at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:205) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.SingleModuleDeployment.activate(SingleModuleDeployment.java:43) [weblogic.jar:10.3.4.0]
at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:161) [weblogic.jar:10.3.4.0]
at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:79) [weblogic.jar:10.3.4.0]
at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:569) [weblogic.jar:10.3.4.0]
at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:150) [weblogic.jar:10.3.4.0]
at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:116) [weblogic.jar:10.3.4.0]
at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:323) [weblogic.jar:10.3.4.0]
at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:844) [weblogic.jar:10.3.4.0]
at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1253) [weblogic.jar:10.3.4.0]
at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:440) [weblogic.jar:10.3.4.0]
at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:163) [weblogic.jar:10.3.4.0]
at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:195) [weblogic.jar:10.3.4.0]
at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:13) [weblogic.jar:10.3.4.0]
at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:68) [weblogic.jar:10.3.4.0]
at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528) [com.bea.core.weblogic.workmanager_1.9.0.0.jar:1.9.0.0]
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:207) [com.bea.core.weblogic.workmanager_1.9.0.0.jar:1.9.0.0]
at weblogic.work.ExecuteThread.run(ExecuteThread.java:176) [com.bea.core.weblogic.workmanager_1.9.0.0.jar:1.9.0.0]

Caused by: java.lang.NoSuchMethodError: org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.getLocalName(Lorg/w3c/dom/Node;)Ljava/lang/String;
at org.springframework.security.config.SecurityNamespaceHandler.parse(SecurityNamespaceHandler.java:69) ~[spring-security-config-3.1.0.RELEASE.jar:3.1.0.RELEASE]
at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1114) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1104) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:133) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:90) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:458) ~[spring-2.0.3.jar:2.0.3]
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:353) ~[spring-2.0.3.jar:2.0.3]
... 48 common frames omitted 
```

以下是 pom.xml 中的依赖项

```
<dependencies>
    <!-- test -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.9</version>
        <scope>test</scope>
    </dependency>

    <!-- logging -->
    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-classic</artifactId>
        <version>${logback.version}</version>
    </dependency>
    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-core</artifactId>
        <version>${logback.version}</version>
    </dependency>
    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-access</artifactId>
        <version>${logback.version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${org.slf4j.version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jul-to-slf4j</artifactId>
        <version>${org.slf4j.version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>${org.slf4j.version}</version>
    </dependency>

    <!-- servlet -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp.jstl</groupId>
        <artifactId>jstl-api</artifactId>
        <version>1.2-rev-1</version>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.2</version>
        <scope>provided</scope>
    </dependency>

    <!-- spring -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-jetty</artifactId>
        <version>2.0.4</version>
        <exclusions>
            <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>${org.springframework.version}</version>
        <exclusions>
            <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>${org.springframework.version}</version>
        <exclusions>
            <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-taglibs</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <!-- database -->
    <dependency>
        <groupId>org.mybatis</groupId>
        <artifactId>mybatis</artifactId>
        <version>3.0.6</version>
    </dependency>
    <dependency>
        <groupId>org.mybatis</groupId>
        <artifactId>mybatis-spring</artifactId>
        <version>1.0.2</version>
    </dependency>
    <dependency>
        <groupId>c3p0</groupId>
        <artifactId>c3p0</artifactId>
        <version>0.9.1.2</version>
    </dependency>
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib-nodep</artifactId>
        <version>2.2.2</version>
    </dependency>

    <!-- json -->
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.9.4</version>
    </dependency>

    <!--
        ORACLE Y U NO USE PUBLIC LICENSE FOR YOUR JDBC?
        solution, download the ojdbc6.jar on zaki's computer (the movie server)
        then run:
        mvn install:install-file -Dfile=ojdbc6.jar -DgroupId=com.oracle -DartifactId=oracle -Dversion=11.2.0.3 -Dpackaging=jar -DgeneratePom=true
        please adjust the -Dfile location
    -->
    <dependency>
        <groupId>com.oracle</groupId>
        <artifactId>oracle</artifactId>
        <version>11.2.0.3</version>
    </dependency>

    <!-- tiles -->
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-jsp</artifactId>
        <version>2.2.2</version>
        <scope>runtime</scope>
    </dependency>

    <!-- diplaytag -->
    <dependency>
        <groupId>displaytag</groupId>
        <artifactId>displaytag</artifactId>
        <version>1.2</version>
    </dependency>
    <dependency>
        <groupId>displaytag</groupId>
        <artifactId>displaytag-export-poi</artifactId>
        <version>1.2</version>
    </dependency>

    <!-- JExcelAPI library --> 
    <dependency>
        <groupId>net.sourceforge.jexcelapi</groupId>
        <artifactId>jxl</artifactId>
        <version>2.6.3</version>
    </dependency>

    <!-- commons-lang apache -->
    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.6</version>
    </dependency>

    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-lang3</artifactId>
        <version>3.1</version>
    </dependency>

    <!-- spring modules validation -->
    <dependency>
        <groupId>org.springmodules</groupId>
        <artifactId>spring-modules-validation</artifactId>
        <version>0.8</version>
    </dependency>

    <!-- JSR-303 javax validation -->
    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator-annotation-processor</artifactId>
        <version>4.2.0.Final</version>
    </dependency>

</dependencies>

<build>
    <finalName>artajasa-billing</finalName>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.2</version>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>weblogic-maven-plugin</artifactId>
            <version>2.9.1</version>
        </plugin>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>${java.version}</source>
                <target>${java.version}</target>
                <encoding>${project.build.sourceEncoding}</encoding>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.mybatis.generator</groupId>
            <artifactId>mybatis-generator-maven-plugin</artifactId>
            <version>1.3.1</version>
        </plugin>
        <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>maven-jetty-plugin</artifactId>
            <version>6.1H.14.1</version>
            <configuration>
                <connectors>
                    <connector implementation="org.mortbay.jetty.nio.SelectChannelConnector">
                        <port>10000</port>
                    </connector>
                </connectors>
                <webAppConfig>
                    <contextPath>/${project.name}</contextPath>
                </webAppConfig>
                <scanTargets>
                    <scanTarget>target/classes/</scanTarget>
                </scanTargets>
                <scanIntervalSeconds>0</scanIntervalSeconds>
            </configuration>
        </plugin>
    </plugins> 
```

我希望这次会有“光”。自一周前以来，我一直在努力寻找答案。非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:44:32.313

当您的依赖项版本冲突时`pom.xml`，Maven 通常会尝试使用最新版本。

但是，当它不起作用时，您遇到了一种情况 -`spring-modules-validation`依赖于`org.springframework:spring:2.0.3`，但 Spring 的较新版本不再提供`org.springframework:spring`工件，因此 Maven 在这里看不到冲突并且不排除旧版本。

因此，您需要手动排除它：

```
<dependency>
    <groupId>org.springmodules</groupId>
    <artifactId>spring-modules-validation</artifactId>
    <version>0.8</version>
    <exclusions>
        <exclusion>  
            <groupId>org.springframework</groupId>
            <artifactId>spring</artifactId>
        </exclusion>
    </exclusions> 
</dependency> 
```

# makefile - GNU Make 列出自上次调用 make 以来修改的源文件？

> ID：11498901
> 
> 赞同：3
> 
> 时间：2012-07-16T06:09:18.810
> 
> 标签：makefile, gnu-make

我知道

Make 根据已更改的源文件自动计算出需要更新的文件。它还会自动确定更新文件的正确顺序，以防一个非源文件依赖于另一个非源文件。

因此，如果您更改了一些源文件然后运行 ​​Make，它不需要重新编译您的所有程序。它仅更新那些直接或间接依赖于您更改的源文件的非源文件。

现在我想知道我是否可以让 Make 列出这些修改过的来源？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T14:18:31.813

您需要一个虚拟文件，它使用您的所有资源作为先决条件：

```
mod_list: foo.c bar.cc baz.cpp
    @echo modified sources: $?
    @touch $@ 
```

您可以将源列表保留为单独的变量：

```
WATCHED_SOURCES = foo.c bar.cc baz.cpp
mod_list: $(WATCHED_SOURCES)
    @echo modified sources: $?
    @touch $@ 
```

或者使用通配符查看所有存在的来源：

```
WATCHED_SOURCES = $(wildcard *.c *.cc *.cpp *.whatever)
mod_list: $(WATCHED_SOURCES)
    @echo modified sources: $?
    @touch $@ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:13:53.897

一种简单的方法是使用 dry run 选项来制作，这是一个`-n`或`--dry-run`几个其他选择，部分取决于您正在使用的实现。这会告诉您如果执行 make 会做什么，其中会*告诉*您它将重新编译哪些源文件。

这一切都在`man`页面中。

# android - 后台服务能在安卓和iOS上运行多久

> ID：11498902
> 
> 赞同：1
> 
> 时间：2012-07-16T06:09:30.443
> 
> 标签：android, ios, background-service

后台服务是否限制为 10 分钟，还是可以运行数小时？用户有什么方法可以在后台服务运行时关闭它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T06:28:48.877

取决于代码，您可以永远运行后台服务，也可以在应用退出后立即关闭它。除此之外，如果它在几分钟内没有执行任何操作，操作系统本身可以关闭后台服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T06:48:02.903

系统可以运行服务有两个原因。如果有人调用 Context.startService() ，那么系统将检索服务（创建它并在需要时调用其 onCreate() 方法），然后使用客户端提供的参数调用其 onStartCommand(Intent, int, int) 方法。此时服务将继续运行，直到调用 Context.stopService() 或 stopSelf()。请注意，对 Context.startService() 的多次调用不会嵌套（尽管它们确实会导致对 onStartCommand() 的多次相应调用），因此无论启动多少次服务都将停止一次 Context.stopService() 或 stopSelf （） 叫做; 但是，服务可以使用它们的 stopSelf(int) 方法来确保在处理启动的意图之前不会停止服务。

看到这个链接

[http://developer.android.com/guide/components/services.html#Lifecycle](http://developer.android.com/guide/components/services.html#Lifecycle)

# objective-c - UITableView 重复行的

> ID：11498907
> 
> 赞同：0
> 
> 时间：2012-07-16T06:09:53.897
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

这是我在“cellForRowAtIndexPath”中使用的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString* cellIdentifier = @"OBBirthControlMethodsTableCell";
    OBCustomDetailCell *cell = (OBCustomDetailCell *)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    NSLog(@"cell id - %@",cell.subviews);
    CGRect frame = [tableView rectForRowAtIndexPath:0];
    if(nil == cell)
    {
        cell = [[[OBCustomDetailCell alloc]
                 initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];

        if (indexPath.row != 3)
        {
            //Setting the basic template
            UIView *template = [[UIView alloc] init];
            template.tag = indexPath.row+10;
            NSLog(@"path index = %d",indexPath.row);
            UIImageView *templateImage = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0,
                                                                                       200,
                                                                                       frame.size.height)];
            UILabel *templateLabel = [[UILabel alloc] initWithFrame:CGRectMake(templateImage.frame.size.width+20,
                                                                               0,
                                                                               cell.frame.size.width - templateImage.frame.size.width+20,
                                                                               frame.size.height)];
            [template addSubview:templateImage];
            [template addSubview:templateLabel];

            [cell.contentView addSubview:template];
        }
    }

    UIView *templateView = [cell.contentView viewWithTag:indexPath.row + 10];
    if (templateView)
    {
        NSLog(@"Gotten a templateView object");
        if (indexPath.row == 0)
        {
            templateView.frame = frame;

            for (UIView *view in templateView.subviews)
            {
                if ([view isKindOfClass:[UIImageView class]])
                {
                    [(UIImageView *)view setImage:[UIImage imageNamed:@"baby.jpeg"]];
                }
                else if  ([view isKindOfClass:[UILabel class]])
                {
                    [(UILabel *)view setText:@"This is not working"];
                }
            }
        }
        else
        {
            templateView.frame = CGRectMake(0, 50,
                                            frame.size.width,
                                            frame.size.height);

        }
    }
    return cell;
} 
```

但问题是新单元格给了我与旧单元格相同的值，一旦你向下滚动，新单元格就会出队..

**编辑** 一旦我们向下滚动到具有与第一个单元格相同的值的新单元格，就会创建一个重复的单元格..

*   我希望仅为 select rows() ..if (indexPath.row != 3) 创建 UIView
*   我希望 UIView 的位置在某些行中有所不同.. if (indexPath.row == 0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:35:11.580

这段代码有几个问题。首先，您的问题的主要原因是这一点：

```
template.tag = indexPath.row+10; 
```

你为什么做这个？只需使用一个常量值，例如`10`. 不需要涉及索引路径，因为每个单元格都会改变。这将导致`viewWithTag:`重复使用的单元格失败，并将返回`nil`。

其次，您不能只为 设置模板单元格`indexPath.row != 3`，因为在某些时候，非模板单元格可能会被重用。它将没有模板视图，因此以下布局将失败。您需要为这两种类型的单元格使用两个重用标识符。最终产品应如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *templateCellIdentifier = @"OBBirthControlMethodsTableCell";
    static NSString *otherCellIdentifier = @"OtherTableCell";

    if (indexPath.row != 3) {
        // Handle normal cells
        OBCustomDetailCell *cell = (OBCustomDetailCell *)[tableView dequeueReusableCellWithIdentifier:templateCellIdentifier];
        if (cell == nil) {
            cell = [[[OBCustomDetailCell alloc] initWithStyle:UITableViewStyleDefault reuseIdentifier:templateCellIdentifier] autorelease];
            // Set up template cell
        }
        // Handle per-cell data
    } else {
        // Handle special cells
        OBCustomDetailCell *cell = (OBCustomDetailCell *)[tableView dequeueReusableCellWithIdentifier:otherCellIdentifier];
        if (cell == nil) {
            cell = [[[OBCustomDetailCell alloc] initWithStyle:UITableViewStyleDefault reuseIdentifier:otherCellIdentifier] autorelease];
            // Set up other cell
        }
        // Handle per-cell data (not really necessary if there's only one of these)
    }
} 
```

# rest - 实现连接控制的 RESTful 方式

> ID：11498910
> 
> 赞同：0
> 
> 时间：2012-07-16T06:10:10.600
> 
> 标签：rest

我正在通过 REST Web 服务实现软件更新服务器。它旨在通过对资源的 GET 请求来获取客户端升级“指令”（而不是文件本身）

```
/clients/{clientId}/upgrades?completed=false 
```

客户端设计为每隔 30 分钟轮询一次资源。当没有可用的升级时，资源返回状态码 404，如果可用，则返回升级指令。当客户端升级完成后，客户端将通过 PUT 请求向服务器报告

```
/clients/{clientId}/upgrades/{upgradeId} 
```

有一些状态变化。

现在，需要从服务器端进行升级连接控制，即最大同时升级连接限制。

我可以添加一个“升级”状态指示器字段来升级资源，在访问 /clients/{clientId}/upgrades 时更改指示器，并计算“升级计数==true”以查找连接数。如果超出连接数限制，则返回状态码 404 给客户端。但是，它确实打破了 REST Web 服务的无状态原则。

欢迎任何想法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:08:20.843

您可以要求客户端使用请求启动升级的值（例如“升级”状态）对资源进行成功的 PUT。每次您的服务器获得其中一个值时，它都会检查它已批准的当前客户端总数。如果还有资源，那么它可以返回成功，允许客户端继续。

当客户端发送完成 PUT 请求时，您可以减少资源计数器。

# php - 将excel文件导入数据库时 出错

> ID：11498912
> 
> 赞同：1
> 
> 时间：2012-07-16T06:10:11.567
> 
> 标签：php, mysql

我正在将 excel 文件导入我的数据库。导入时出现 ***错误您的 SQL 语法有错误；查看与您的 MySQL 服务器版本相对应的手册，了解在 ' 999, , , 2009-02-03, 9, 133, 2, 0, 0, 0, 3, 1, 1, 1, 04/ 附近使用的正确语法02/2009, 40816.0460995,' 在第 1 行*** 我为查询做了回显，这是正确的。但是当我尝试将它插入数据库时​​，我得到了这个错误。这是我的数据库结构

```
CREATE TABLE `product` (
  `product_id` int(11) NOT NULL AUTO_INCREMENT,
  `model` varchar(64) COLLATE utf8_bin NOT NULL,
  `sku` varchar(64) COLLATE utf8_bin NOT NULL,
  `upc` varchar(12) COLLATE utf8_bin NOT NULL,
  `location` varchar(128) COLLATE utf8_bin NOT NULL,
  `quantity` int(4) NOT NULL DEFAULT '0',
  `stock_status_id` int(11) NOT NULL,
  `image` varchar(255) COLLATE utf8_bin DEFAULT NULL,
  `manufacturer_id` int(11) NOT NULL,
  `shipping` tinyint(1) NOT NULL DEFAULT '1',
  `price` decimal(15,4) NOT NULL DEFAULT '0.0000',
  `points` int(8) NOT NULL DEFAULT '0',
  `tax_class_id` int(11) NOT NULL,
  `date_available` date NOT NULL,
  `weight` decimal(15,8) NOT NULL DEFAULT '0.00000000',
  `weight_class_id` int(11) NOT NULL DEFAULT '0',
  `length` decimal(15,8) NOT NULL DEFAULT '0.00000000',
  `width` decimal(15,8) NOT NULL DEFAULT '0.00000000',
  `height` decimal(15,8) NOT NULL DEFAULT '0.00000000',
  `length_class_id` int(11) NOT NULL DEFAULT '0',
  `subtract` tinyint(1) NOT NULL DEFAULT '1',
  `minimum` int(11) NOT NULL DEFAULT '1',
  `sort_order` int(11) NOT NULL DEFAULT '0',
  `status` tinyint(1) NOT NULL DEFAULT '0',
  `date_added` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `date_modified` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `viewed` int(5) NOT NULL DEFAULT '0',
  PRIMARY KEY (`product_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_bin AUTO_INCREMENT=50 ; 
```

以及导入和插入数据库的代码

```
 <?php
require_once 'reader.php';
$Host = "localhost";
$User = "user";
$Password = "password";
$DBname = "test";
$Link = mysql_connect ($Host, $User, $Password) or die (mysql_error());
mysql_select_db($DBname);

if(isset($_POST['submit']))
{
    $filename = $_FILES['uploadedfile']['name'];

$TARGET_PATH = "uploads/";

//$filename = mysql_real_escape_string($filename);

$TARGET_PATH .= $filename;

if (move_uploaded_file($_FILES['uploadedfile']['tmp_name'],$TARGET_PATH))

chmod($TARGET_PATH, 0777);

{ 

    $data = new Spreadsheet_Excel_Reader();
    $data->setOutputEncoding('CP1251');
    $data->read($TARGET_PATH);

$count=0;
    for ($i = 1; $i <= $data->sheets[0]['numRows']; $i++) {
        for ($j = 1; $j <= $data->sheets[0]['numCols']; $j++) {
            if($j==1){
                $product_id=$data->sheets[0]['cells'][$i][$j];
                    }

                    if($j==2){
                $model=$data->sheets[0]['cells'][$i][$j];
                    }

            if($j==3){
                $sku=$data->sheets[0]['cells'][$i][$j];
                    }
            if($j==4){
                $upc=$data->sheets[0]['cells'][$i][$j];
                    }       

            if ($j==5){
                $location=$data->sheets[0]['cells'][$i][$j];
                }
            if ($j==6){
                $quantity=$data->sheets[0]['cells'][$i][$j];
                    }       

            if ($j==7){
                $stock_status_id=$data->sheets[0]['cells'][$i][$j];
                     }
            if ($j==8){
                $image=$data->sheets[0]['cells'][$i][$j];
                }         
                if ($j==9){
                $manufacturer_id=$data->sheets[0]['cells'][$i][$j];
                }
                if ($j==10){
                $shipping=$data->sheets[0]['cells'][$i][$j];
                    }
                    if ($j==11){
                $shippingamount=$data->sheets[0]['cells'][$i][$j];
                    }
                    if ($j==12){
                $price=$data->sheets[0]['cells'][$i][$j];
                    }
                if ($j==13){
                $points=$data->sheets[0]['cells'][$i][$j];
                }       
                    if ($j==14){
                $tax_class_id=$data->sheets[0]['cells'][$i][$j];
                    }
                    if ($j==15){
                $date_available=$data->sheets[0]['cells'][$i][$j];
                    }
                    if ($j==16){
                $weight=$data->sheets[0]['cells'][$i][$j];
                    }
                    if ($j==17){
                $weight_class_id=$data->sheets[0]['cells'][$i][$j];
                    }
                    if ($j==18){
                $length=$data->sheets[0]['cells'][$i][$j];
                    }
                    if ($j==19){
                $width=$data->sheets[0]['cells'][$i][$j];
                    }
                    if ($j==20){
                $height=$data->sheets[0]['cells'][$i][$j];
                    }
                    if ($j==21){
                $length_class_id=$data->sheets[0]['cells'][$i][$j];
                    }
                    if ($j==22){
                $subtract=$data->sheets[0]['cells'][$i][$j];
                    }
                    if ($j==23){
                $minimum=$data->sheets[0]['cells'][$i][$j];
                    }
                    if ($j==24){
                $sort_order=$data->sheets[0]['cells'][$i][$j];
                    }
                    if ($j==25){
                $status=$data->sheets[0]['cells'][$i][$j];
                    }
                    if ($j==26){
                $date_added=$data->sheets[0]['cells'][$i][$j];
                    }
                if ($j==27){
                $date_modified=$data->sheets[0]['cells'][$i][$j];
                }
                if ($j==28){
                $viewed=$data->sheets[0]['cells'][$i][$j];
                }                           

        }
$count++;

$Query72 ="insert into product (product_id,model,sku,upc,location,quantity,stock_status_id,image, manufacturer_id, shipping, shippingamount, price, points, tax_class_id, date_available, weight, weight_class_id, length, width, height, length_class_id, subtract, minimum, sort_order, status, date_added, date_modified,viewed) values('', '$model', '$sku', '$upc', '$location', $quantity, $stock_status_id, '$image', $manufacturer_id, $shipping, $shippingamount, $price, $points, $tax_class_id, $date_available, $weight, $weight_class_id, $length, $width, $height, $length_class_id, $subtract, $minimum, $sort_order, $status, $date_added, $date_modified, $viewed)";
echo $Query72;
mysql_query ($Query72) or die (mysql_error()); 
if (mysql_affected_rows() >= 1) {
    print("ROW $count - update successful!");} else {print("ROW $count - update failed!");
    }

        }
    }
    echo "Updated Successfully";
}

?> 
```

请帮助我为什么会收到此错误以及如何解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:16:22.237

用这个

```
$Query72 ="insert into product (product_id,model,sku,upc,location,quantity,stock_status_id,image, manufacturer_id, shipping, shippingamount, price, points, tax_class_id, date_available, weight, weight_class_id, length, width, height, length_class_id, subtract, minimum, sort_order, status, date_added, date_modified,viewed) 
values('', '".$model."', '".$sku."', '".$upc."', '".$location."', '".$quantity."','".$stock_status_id."', '".$image."', '".$manufacturer_id."', '".$shipping."', '".$shippingamount."', '".$price."', '".$points."', '".$tax_class_id."', '".$date_available."', '".$weight."', '".$weight_class_id."', '".$length."', '".$width."', '".$height."','".$length_class_id."','".$subtract."','".$minimum."','".$sort_order."', '".$status."','".$date_added."','".$date_modified."','".$viewed."')"; 
```

愿它帮助你。

发生此错误是因为您没有正确使用引号。在您的查询中，日期值必须是单引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:26:08.730

使用带双床的字符串变量就可以了....

# html - 在典型的登录情况下，需要使用 SSL 保护多少页面？

> ID：11498916
> 
> 赞同：4
> 
> 时间：2012-07-16T06:10:34.123
> 
> 标签：html, security, ssl, https

例如，假设我有 login.html，它将用户名和密码发布到 verify.html。我需要在 SSL 下拥有 login.html 还是只是 verify.html 就足够了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T07:13:51.240

这是一个摘要：

*   *login.html* **必须**受到保护，否则其内容可能会被篡改，例如通过更改表单的操作位置。
*   *verify.html* **必须**受到保护，否则凭据不受保护并且可能被窃听。
*   验证成功后的所有其他内容都*应该*受到保护，否则会话 ID 等验证信息可能会被窃听。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T06:18:11.717

从技术角度来看，安全是最低限度的。保护 login.html 也将带来 3 个优势：

1.  浏览器会知道它正在处理敏感信息，从而执行安全策略
2.  最重要的是，用户将知道他正在处理一个安全的应用程序，因为导航栏将显示一个锁。
3.  试图更改登录目标（窃取凭据）的中间人攻击将不再可能。

无论如何，为处理个人数据的网站的每个部分提供 SSL 是一种很好的做法，因为越来越多的用户希望他们的个人信息得到保密。

# iphone - 是否有任何 API 可以通过 iTunes 帐户捐款？

> ID：11498917
> 
> 赞同：0
> 
> 时间：2012-07-16T06:10:35.093
> 
> 标签：iphone, ios, ipad, ios5

我正在为 iOS 上的慈善机构准备一个应用程序。贝宝是我的首选。我不能假设所有用户都有 Paypal，但我确信他们都有 iTunes 帐户。

我可以让用户通过输入 iTune 帐户用户名和密码来捐赠给慈善机构吗？

苹果支持[红十字会为日本地震捐款](http://www.tuaw.com/2011/03/13/apple-now-accepts-donations-to-red-cross-japan-relief-fund-via-i/)。苹果有开放这种API吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T06:29:29.270

更新：

[美国非营利组织可以通过 Apple Pay 接受捐款](https://developer.apple.com/support/apple-pay-nonprofits/)：

> 从 2016 年 11 月 14 日开始，美国的非营利组织可以使用 Apple Pay 提供一种简单而安全的方式来接受来自其应用程序和网站的捐款。与使用 Apple Pay 购买商品和服务类似，用户无需输入账单、运费或联系方式即可捐款。

[App Store 指南](https://developer.apple.com/app-store/review/guidelines/)继续说：

> 可接受
> 
> 获得批准的非营利组织可以使用 Apple Pay 在自己的应用程序中直接筹款，前提是这些筹款活动遵守所有应用程序审核指南。这些应用程序必须披露资金的使用方式，遵守所有必要的地方和联邦法律，并向捐赠者提供适当的税收收据。将捐赠者与其他非营利组织联系起来的非营利平台必须确保应用程序中列出的每个非营利组织也都经过了非营利组织的批准程序。详细了解如何成为经批准的非营利组织。
> 
> 不可接受
> 
> 除非您是经批准的非营利组织，否则请在应用程序内为慈善机构和筹款活动筹集资金。为此类原因寻求筹集资金的应用程序必须在 App Store 上免费，并且只能在应用程序之外筹集资金，例如通过 Safari 或 SMS。

下面我的旧答案早于慈善捐赠政策的修订。

* * *

他们不仅没有 API，而且似乎明确排除了这样做的可能性。[请参阅App Store 审查指南](https://developer.apple.com/appstore/resources/approval/guidelines.html)第 21 节：

> 21 慈善和捐款
> 
> 21.1 可以向公认的慈善组织捐款的应用程序必须是免费的
> 
> 21.2 募捐必须通过 Safari 中的网站或短信进行

我不太确定他们为什么这样做（可能是 501(c)(3) 组织的会计问题）。

[无论如何，通过MFMessageComposeViewController](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html)发起 SMS或将尽可能多的用户参数传递给 Safari 中的网页

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:urlForDonation]]; 
```

# java - 在 JMS 异步消息处理中，只要调用 onMessage()，就会从队列中删除消息

> ID：11498919
> 
> 赞同：3
> 
> 时间：2012-07-16T06:10:37.167
> 
> 标签：java, jms, messagebroker, openmq

**要求：**我希望消息在队列中持续存在直到`onMessage()`成功执行。如果在执行期间发生任何异常`onMessage()`并且如果它未被处理，则应将消息重新传递给侦听器。

我将 Glassfish v2 作为应用程序服务器。我正在使用 OpenMQConnectionFactory 和 JmsTemplate 在队列上发送消息。 **请注意，我没有使用 MDB。**

```
<bean id="openMQConnectionFactory"
    class="com.is.br.util.OpenMqConnectionFactoryBean">
    <property name="imqAddressList" value="mq://localhost:7676" />
    <property name="imqDefaultUsername" value="admin" />
    <property name="imqDefaultPassword" value="admin" />
</bean> 
```

我尝试将 AUTO_ACKNOWLEDGE 作为确认模式，但在未重新传递异常引发的消息时在侦听器中。

**消息生产者.java**

公共无效发送消息（最终字符串响应流）{

```
 System.out.println("Enter into IsJmsProducer.sendMessage method");

    try {
        MessageCreator creator = new MessageCreator() {
            public Message createMessage(Session session) {
                ObjectMessage message = null;
                try {
                    message = session.createObjectMessage(responseStream);
                    } catch (Exception e) {
                    System.out.println("Unable create a JMSMessage");
                }
                return message;
            }
        };

        System.out.println("Sending message to destination: " + this.destination.toString());
        this.jmsTemplate.setSessionAcknowledgeMode(Session.AUTO_ACKNOWLEDGE);

        this.jmsTemplate.send(this.destination, creator);
        System.out.println("SendMessage to queue successfully.");           
    } catch (Exception ex) {
        System.out.println("SendMessage to queue Fail." + ex);
    }
    System.out.println("Exit from IsJmsProducer.sendMessage method");

} 
```

**SampleJMSConsumer.java**

```
public class SampleJMSConsumer implements MessageListener {

    @Override
    public void onMessage(Message message) {
        throw new RuntimeException();
   }
} 
```

然后我尝试`this.jmsTemplate.setSessionAcknowledgeMode(Session.CLIENT_ACKNOWLEDGE);`在我调用的侦听器中使用并在我调用 `message.acknowledge();`的`catch`块中调用`session.recover()`仍然消息未重新传递。

**SampleJMSConsumer.java**

```
public class SampleJMSConsumer implements MessageListener  {

    @Override
    public void onMessage(Message message) {

        ObjectMessage objectMessage = (ObjectMessage) message;
        Object object;
        try {
            object = objectMessage.getObject();
            if (object instanceof String) {
                System.out.println("Message received - " + object.toString());
                throw new JMSException("JMS exception");
            }
            message.acknowledge();
        } catch (JMSException e) {
               session.recover();
        }
    } 
```

}

当我在调试模式下运行程序并在代理管理控制台中的队列上发送消息时，我能够看到消息的数量，但只要调用 onMessage() 的消息数量减少一。这意味着消息被消费并从队列中删除。该消息是否被视为“已送达”？请帮助我理解为什么发生异常时消息没有重新传递？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:42:44.713

我认为这是设计使然，在调用 onmessage 时交付。如果你想对异常做点什么，你可以使用 try catch 来处理它。

假设消息再次被放入队列，无论如何在消费时您可能会遇到相同的异常。

ack 机制应该是关于确保正确交付的。也许你所追求的是一个拒绝机制，你要求 prpoducerside 发送一条新消息？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:23:55.287

客户确认适合您。在您的 onMessage() 方法中，一旦处理结束，您需要调用 Acknowledge，否则如果有任何异常，则不要调用 Acknowledge()。

Session.Recovery() 停止并重新启动消息传递。消息的传递将从最后一个未确认的消息开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-20T13:14:09.947

在消费者中创建的会话应将会话模式设置为 AUTO_ACK / DUPS_OK_ACK。您尚未共享启动消费者的代码。您在生产者而不是消费者中设置会话模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T07:06:55.247

我建议验证 OpenMQ 的默认会话模式是什么。可能发生的情况是，一旦打开连接，就无法更改它，因此必须在打开连接时指定。

# wcf - Ext Js - TreeStore 在使用 ASP.net WCF 服务时不加载数据

> ID：11498925
> 
> 赞同：0
> 
> 时间：2012-07-16T06:11:49.007
> 
> 标签：wcf, extjs4.1

我正在尝试构建动态树。我从 C# WCF 服务获取数据。它返回给我 JSON 数据，但数据没有反映在树中。我正在使用 EXTJS 4。

.Js 代码 -

```
Ext.require([
    'Ext.tree.*',
    'Ext.data.*',
    'Ext.tip.*'
 ]);    

Ext.onReady(function () {
    Ext.QuickTips.init();

var store = Ext.create('Ext.data.TreeStore', {
        proxy: {
                 type: 'ajax',
                 url: 'Services/InfographicsDataService.svc/GetTree'
               },
        root: {
                 text: 'Ext JS',
                 id: 'src',
                 expanded: true
              },
      reader: {
                 type: 'json',
                 root: 'd'
              }
    }); //  End of store code       

    var tree = Ext.create('Ext.tree.Panel', {
             store: store,
             viewConfig: 
             {
                plugins:{ ptype: 'treeviewdragdrop' }
             },
        renderTo: 'tree-div',
        height: 300,
        width: 250,
        title: 'Files',
        useArrows: true
    }); // End of tree    
}); // End of ready function 
```

这是我服务端的代码-::

```
[OperationContract]
[WebGet]
 public List<TreeNode> GetTree()
 {
   List<TreeNode> nodes = new List<TreeNode>();
      nodes.Add(new TreeNode() { id="src/ModelManager.js", text = 
     "ModelManager.js" });

       nodes.Add(new TreeNode() { id="src/data", text = "data" });
      nodes.Add(new TreeNode() { id="src/draw", text = "draw" });
      return nodes;
 } 
```

wcf 服务返回的 Json--

```
{"d":[
  {
    "__type":"TreeNode:#Infographics.Services.Model",
    "id":"src\/ModelManager.js",
    "leaf":false,
    "text":"ModelManager.js"    
  },
 { 
   "__type":"TreeNode:#Infographics.Services.Model",
   "id":"src\/data",
   "leaf":false,
   "text":"data"
 },
 {
   "__type":"TreeNode:#Infographics.Services.Model",
   "id":"src   \/draw",
   "leaf":false,
   "text":"draw"
 }]
} 
```

调用将转到服务器并返回数据但不在树中添加节点页面仅显示根 Extjs 节点。

最初我认为，它只是阅读器的根属性，我需要将其设置为 "d" ，但我还缺少一些东西。

有人可以帮我找出我犯的那个小错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:46:57.377

能不能这样换个店试试

```
var store = Ext.create('Ext.data.TreeStore', 
{
  proxy: 
  {
     type: 'ajax',
     url: 'Services/InfographicsDataService.svc/GetTree',
     reader: 
     {
        type: 'json',
        root: 'd'
     }
  },
  root:
  {
     text: 'Ext JS',
     id: 'src',
     expanded: true
  }  
}); 
```

# android - Twitter：使用 scribe 发送直接消息

> ID：11498926
> 
> 赞同：8
> 
> 时间：2012-07-16T06:12:06.420
> 
> 标签：android, twitter

这是我使用 scribe 发送直接消息的代码。但它给了我无效的回应。我究竟做错了什么？

```
 OAuthRequest req;
 OAuthService s;
 s = new ServiceBuilder()
        .provider(TwitterApi.class)
        .apiKey(APIKEY)
        .apiSecret(APISECRET)
        .callback(CALLBACK)
        .build();
 req = new OAuthRequest(Verb.POST, "https://api.twitter.com/1/direct_messages/new.format?user_id="+user_id+"&text=my app test");

s.signRequest(MyTwitteraccesToken, req);
Response response = req.send();

   if (response.getBody() != null) {
    String t=response.getBody();
    Log.w("twittersent","twittersent"+t);
 } 
```

有谁能够帮助我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:19:47.557

尝试在您的请求 URL 中将格式指定为 XML 或 JSON。此外，请确保您的整个文本文件是 URL 编码的。

# jquery - 数字格式

> ID：11498927
> 
> 赞同：1
> 
> 时间：2012-07-16T06:12:07.680
> 
> 标签：jquery, number-formatting

> **可能重复：**
> [如何使用 jQuery 格式化电话号码](https://stackoverflow.com/questions/8760070/jquery-phone-number-format)

我想格式化这样的数字。

```
"XXX-XX-XXXX" 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T06:40:03.803

您可以将这个出色的插件用于所有数字格式

[http://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

# cordova - phonegap tabbar 插件无法更改页面

> ID：11498929
> 
> 赞同：1
> 
> 时间：2012-07-16T06:12:12.203
> 
> 标签：cordova

我使用PhoneGap NativeControls Plugins创建了一个ios Tabbar，当我点击一个tabbar时，它并没有将视图更改为相应的html，以下是我的代码，感谢您的帮助。

这些函数用于改变浏览量：

```
function showFirstPage()
{
    window.location.href = 'firstTab.html';
}

function showSecondPage()
{
    window.location.href = 'secondTab.html';
}

function showThirdPage()
{
    window.location.href = 'thirdTab.html';
}

function showFourthPage()
{
    window.location.href = 'fourthTab.html';
}

function showFifthPage()
{
    window.location.href = 'fifthTab.html';
} 
```

创建一个标签栏：

```
function onBodyLoad()
{   
    document.addEventListener("deviceready", onDeviceReady, false);
}

function onDeviceReady() {
      // Initializating TabBar
    nativeControls = window.plugins.nativeControls;
    nativeControls.createTabBar();

    // 首页
    nativeControls.createTabBarItem(
                                "firstTab",
                                "首页",
                                "/www/tabs/tabbar1.png",
                                {"onSelect": function() {
                                //console.log("firstTab");
                                showFirstPage();
                                }}
                                );

// 版块
    nativeControls.createTabBarItem(
                                "secondTab",
                                "版块",
                                "/www/tabs/tabbar2.png",
                                {"onSelect": function() {
                                //console.log("secondTab");
                                showSecondPage();
                                }}
                                );

// 贴图
    nativeControls.createTabBarItem(
                                "thirdTab",
                                "贴图",
                                "/www/tabs/tabbar3.png",
                                {"onSelect": function() {
                                //console.log("thirdTab");
                                showThirdPage();
                                }}
                                );

// 个人中心
    nativeControls.createTabBarItem(
                                "fourthTab",
                                "个人中心",
                                "/www/tabs/tabbar4.png",
                                {"onSelect": function() {
                                //console.log("fourthTab");
                                showFourthPage();
                                }}
                                );

// 更多
    nativeControls.createTabBarItem(
                                "fifthTab",
                                "更多",
                                "/www/tabs/tabbar5.png",
                                {"onSelect": function() {
                                //console.log("fifthTab");
                                showFifthPage();
                                }}
                                );

    // Compile the TabBar
    nativeControls.showTabBar();
    nativeControls.showTabBarItems("firstTab", "secondTab", "thirdTab", "fourthTab", "fifthTab");
    nativeControls.selectTabBarItem("firstTab");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T23:30:59.873

在我的代码中，如果 Tab-bar 中的更改通常不会更改页面，则 Javascript 错误会停止一切。我不明白为什么代码不起作用

也许尝试通过使用“try-catch”来解决问题[http://www.w3schools.com/js/js_try_catch.asp](http://www.w3schools.com/js/js_try_catch.asp)

# ruby-on-rails - 如何对字符串上的每个其他字符执行操作？

> ID：11498930
> 
> 赞同：1
> 
> 时间：2012-07-16T06:12:11.800
> 
> 标签：ruby-on-rails, ruby

如何仅将字符串的偶数字母大写？

我试过了：

```
str = "apples"; str.capitalize 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T12:06:47.337

```
"abcdefgh".gsub /..?/, &:capitalize
=> "AbCdEfGh"

"abcdefgh".gsub /(?!^)..?/, &:capitalize
=> "aBcDeFgH" 
```

Use `string.gsub!` instead of `string.gsub` if you want to modify your original string.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:56:02.680

```
string.scan(/..?/).map(&:capitalize) * '' 
```

# android - 通过 DDMS 在 Android 设备上模拟模拟位置

> ID：11498936
> 
> 赞同：12
> 
> 时间：2012-07-16T06:12:52.767
> 
> 标签：android, gps, location

我有一个我一直在研究的适用于 Android 2.3.3 的 GPS 导航应用程序。我目前正在尝试通过 DDMS 通过 GPX 文件模拟位置。虽然这可以在 android 模拟器上完美找到，但我无法让它在实际设备上运行。

我可以在“设备”选项卡下看到设备，但我无法发送任何模拟位置数据或 GPX 数据，因为“仿真控制”选项卡下的选项是灰色的。

我注意到以前关于 StackOverflow 的问题提到这是不可能的，但是标题为“使用 DDMS”的 Google 文档 - [http://developer.android.com/tools/debugging/ddms.html](http://developer.android.com/tools/debugging/ddms.html)声明如下（在底部这页纸）

> 设置手机位置
> 
> 如果您的应用程序依赖于手机的位置，您可以让 DDMS 向**您的设备**发送或 AVD 模拟位置。如果您想在不进行物理移动的情况下测试应用程序位置特定功能的不同方面，这将非常有用。您可以使用以下地理位置数据类型：

我只是想知道如何通过 DDMS 将虚假位置数据发送到设备。提前感谢您的帮助，我真的很感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-14T17:21:38.417

比尔扎克，你的理解是正确的。简而言之，Android 的文档具有误导性。许多开发人员对此感到困惑。您不能像在模拟器上那样加载 gpx 文件并发送到设备，这与文档的建议相反。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-16T22:36:37.637

如果您在设备上激活模拟位置，则可能。比将 ACCESS_MOCK_LOCATION 权限添加到您的清单。

您现在可以编写自己的 MockLocationManager 来生成 mocj 位置。

最简单的方法是您使用为您生成模拟 lactions 的应用程序。[GPS路线模拟器](https://play.google.com/store/apps/details?id=com.forgottenprojects.mocklocations&feature=also_installed)工作得很好。可以在 sdCard 上存储 kml 文件或定义自己的路线

# android - 当我在手机上运行应用程序时。版本是 android 4.0.3

> ID：11498938
> 
> 赞同：2
> 
> 时间：2012-07-16T06:13:14.670
> 
> 标签：android, logcat

这是什么错误，为什么会发生？SDK是4.0.3。

```
 07-16 14:00:03.090: E/AndroidRuntime(29487): FATAL EXCEPTION: main
07-16 14:00:03.090: E/AndroidRuntime(29487): java.lang.IllegalArgumentException: Window type can not be changed after the window is added.
07-16 14:00:03.090: E/AndroidRuntime(29487):    at android.os.Parcel.readException(Parcel.java)
07-16 14:00:03.090: E/AndroidRuntime(29487):    at android.os.Parcel.readException(Parcel.java)
07-16 14:00:03.090: E/AndroidRuntime(29487):    at android.view.IWindowSession$Stub$Proxy.relayout(IWindowSession.java)
07-16 14:00:03.090: E/AndroidRuntime(29487):    at android.view.ViewRootImpl.relayoutWindow(ViewRootImpl.java)
07-16 14:00:03.090: E/AndroidRuntime(29487):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java)
07-16 14:00:03.090: E/AndroidRuntime(29487):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java)
07-16 14:00:03.090: E/AndroidRuntime(29487):    at android.os.Handler.dispatchMessage(Handler.java)
07-16 14:00:03.090: E/AndroidRuntime(29487):    at android.os.Looper.loop(Looper.java)
07-16 14:00:03.090: E/AndroidRuntime(29487):    at android.app.ActivityThread.main(ActivityThread.java)
07-16 14:00:03.090: E/AndroidRuntime(29487):    at java.lang.reflect.Method.invokeNative(Native Method)
07-16 14:00:03.090: E/AndroidRuntime(29487):    at java.lang.reflect.Method.invoke(Method.java)
07-16 14:00:03.090: E/AndroidRuntime(29487):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java)
07-16 14:00:03.090: E/AndroidRuntime(29487):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java)
07-16 14:00:03.090: E/AndroidRuntime(29487):    at dalvik.system.NativeStart.main(Native Method) 
```

当我运行应用程序时，应用程序会自动关闭。弹出异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:19:34.893

看看这个帖子

[Android上的幼儿安全应用程序](https://stackoverflow.com/questions/8072866/toddler-safe-app-on-android)

我认为这可能会有所帮助，他得到了同样的错误。

```
java.lang.IllegalArgumentException: Window type can not be changed after the window is added 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:17:07.387

如果您想执行特定于 Android 的版本，请阅读 API：http: [//developer.android.com/reference/android/os/Build.html](http://developer.android.com/reference/android/os/Build.html)

并寻找可以帮助您的房产。

# backbone.js - 骨干.木偶区域和布局

> ID：11498941
> 
> 赞同：0
> 
> 时间：2012-07-16T06:13:26.247
> 
> 标签：backbone.js, javascript-framework, marionette

有没有办法为木偶区域指定模板？现在我正在使用布局对象来指定模板。

```
 AppLayout = Backbone.Marionette.Layout.extend({

     template: tmpl

    });

    var layout = new AppLayout();
    App.main.show(layout);

    App.addRegions({
        userInfo: "#userInfo",
        mainMenu: "#mainMenu",
        content: "#content"
    });

    App.mainMenu.show(new mainMenuView.Views.menu());
    App.content.show(new dashboard.Views.main()); 
```

为什么当我在布局对象中定义它们时，我无法直接从我的应用对象访问我的区域？

```
 AppLayout = Backbone.Marionette.Layout.extend({

     template: tmpl
     regions: {
         userInfo: "#userInfo",
        mainMenu: "#mainMenu",
        content: "#content"
      }
    });

    var layout = new AppLayout();
    App.main.show(layout);

    does not work:
    App.mainMenu.show(new mainMenuView.Views.menu());
    App.content.show(new dashboard.Views.main()); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:46:02.680

> 有没有办法为木偶区域指定模板？

这正是一个布局——一个在渲染输出中带有区域的渲染模板。

> 为什么当我在布局对象中定义它们时，我无法直接从我的应用对象访问我的区域？

布局中的区域范围为布局的`el`，与事件相同。即使您将一个区域定义为“#id”选择器，它仍然会限定在布局范围内，并且不会在布局的`el`.

此外，在布局上定义区域会将区域添加到布局，而不是应用程序对象。如果要在应用程序对象上定义区域，则必须直接将它们添加到应用程序对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T11:49:24.767

要访问放置在区域中的布局区域，您可以编写：

```
App.main.currentView.mainMenu.show(someView)
App.main.currentView.content.show(anotherView) 
```

# html - 当浮动应用于其子元素时收缩

> ID：11498946
> 
> 赞同：9
> 
> 时间：2012-07-16T06:13:46.883
> 
> 标签：html, css, css-float

我正在尝试在我的网站的主容器中创建一个元素容器。为了使元素容器排成一行，我`float:left;`对它们进行了应用。但是当我添加`float`到它们时，主容器缩小了！我尝试应用`clear:both`到主容器，但没有任何变化。

CSS：

```
#main_container
{
    clear:both;
    margin-top:20px;
    padding:20px 10px 30px 15px;
    background:#ccc;
}
.element_container
{
    float:left;
    width:238px;
    height:300px;
    border:1px solid #000;
} 
```

HTML：

```
<div id="main_container">

    <div class="element_container"></div>

    <div class="element_container"></div>

    <div class="element_container"></div>

</div> 
```

![在此处输入图像描述](../Images/8b8f61338934ca7f49309f50db2cc7e9.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T06:16:18.927

尝试添加：

```
overflow: auto; 
```

到`#main_container`

**编辑：**作为另一种浮动清除方法，您可以使用 :after，如此[处](http://robertnyman.com/2007/04/12/how-to-clear-css-floats-without-extra-markup-different-techniques-explained/)所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T06:17:03.853

添加`overflow: hidden;`到主容器 -

```
#main_container
{
    clear:both;
    margin-top:20px;
    padding:20px 10px 30px 15px;
    background:#ccc;
    overflow: hidden;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T06:17:14.003

尝试将 div 的宽度设置为 100%。也许这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T06:35:46.073

嗨，现在这个解决方案的两个选项现在执行此操作

首先是

```
<div id="main_container">

    <div class="element_container"></div>

    <div class="element_container"></div>

    <div class="element_container"></div>
  <div class="" style="clear:both;"></div> //  add this in your html 
</div> 
```

现在第二个是定义你的主容器`Overflow`

```
#main_container{
overflow:hidden;
} 
```

# .htaccess - RewriteRule 不起作用，而其余的则起作用

> ID：11498949
> 
> 赞同：0
> 
> 时间：2012-07-16T06:14:02.940
> 
> 标签：.htaccess, redirect, blogs, permalinks

我的博客的 .htaccess 设置为通过多个 URL 访问一个页面，并根据访问的 URL 显示不同的内容。

```
http://kn3rdmeister.com/category/blog/
http://kn3rdmeister.com/2012/
http://kn3rdmeister.com/2012/07/ 
```

所有人实际上都在使用`http://kn3rdmeister.com/blog.php`.

.htaccess 文件非常方便，因为我只需要使用不同的查询字符串重定向到一页（几乎*永远）。*在和他们玩了很多之后，我所有的规则终于奏效了，我很高兴他们这样做了。好吧，*几乎*所有这些都有效。最后一个没有。

.htaccess：

```
RewriteEngine On

RewriteRule ^blog\.php$ /category/blog/ [R=301,L]
RewriteRule ^category/blog/?$ blog.php [L]

RewriteRule ^category/blog/page/?$ /category/blog/ [R=301,L]
RewriteRule ^category/blog/page/([0-9]*)/?$ /category/blog/?pagenum=$1 [L]

RewriteRule ^([0-9]{4})/?$ /category/blog/?year=$1 [L]
RewriteRule ^([0-9]{4})/([0-9]{2})/?$ /category/blog/?year=$1&month=$2 [L] 
RewriteRule ^([0-9]{4})/([0-9]{2})/([0-9]{2})/?$ /category/blog/?year=$1&month=$2&day=$3 [L] 
RewriteRule ^([0-9]{4})/([0-9]{2})/([0-9]{2})/(^/]+)/?$ /category/blog/?url=http://kn3rdmeister.com/$1/$2/$3/$4/ [L] 
```

最后一条规则应该重定向到每个博客文章的“永久链接”页面。由于每个 URL 都是唯一的，因此我使用帖子 URL 作为唯一标识符。本质上，它应该通过“blog.php”传递“url”查询字符串。PHP 脚本接管，看到“url”查询字符串已设置，然后在其行中加载具有该确切 URL 的唯一帖子。

该脚本有效，但重定向无效。直接前往

`http://kn3rdmeister.com/blog.php?url=http://kn3rdmeister.com/2012/07/04/amsterdam-ave/`

将加载正确的内容。然而，要去

`http://kn3rdmeister.com/2012/07/04/amsterdam-ave/`

没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:38:40.547

尝试添加[QSA (Query String Append)](http://wiki.apache.org/httpd/RewriteFlags/QSA)。此外，反转规则，以便“更深”的链接位于顶部。

```
RewriteRule ^([0-9]{4})/([0-9]{2})/([0-9]{2})/(^/]+)/?$ /category/blog/?url=http://kn3rdmeister.com/$1/$2/$3/$4/ [QSA,L]
RewriteRule ^([0-9]{4})/([0-9]{2})/([0-9]{2})/?$ /category/blog/?year=$1&month=$2&day=$3 [QSA,L] 
RewriteRule ^([0-9]{4})/([0-9]{2})/?$ /category/blog/?year=$1&month=$2 [QSA,L] 
RewriteRule ^([0-9]{4})/?$ /category/blog/?year=$1 [QSA,L] 
```

**但是**，您不能在其他规则中使用重写的链接。因此，无论您`category/blog/`将其替换为`blog.php`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:36:15.457

虽然 webarto 评论是很好的建议，但您的问题是缺少 [:

```
^([0-9]{4})/([0-9]{2})/([0-9]{2})/([^/]+)/?$ 
```

不是

```
^([0-9]{4})/([0-9]{2})/([0-9]{2})/(^/]+)/?$ 
```

# android - 在文本视图中更改不同字符的大小，Android

> ID：11498956
> 
> 赞同：3
> 
> 时间：2012-07-16T06:14:37.047
> 
> 标签：android, textview, android-ui

我想创建一个文本视图，其中一些字符的大小为 40pt，一些字符的大小为 20pt。

我尝试使用 Html.fromhtml() 但找不到任何用于更改大小的标签。

如果可能，请提供帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T06:20:13.087

像这样使用[SpannableStringBuilder](http://developer.android.com/reference/android/text/SpannableStringBuilder.html)：

```
SpannableStringBuilder spanTxt = new SpannableStringBuilder("Different");
spanTxt.append(" android.");
//make the textsize 2 times.
spanTxt.setSpan(new RelativeSizeSpan(2f), spanTxt.length() - " android".length(), spanTxt.length(), 0  ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T06:34:51.717

您可以为此使用 html。

例如。*啊啊* *啊***_**

 *```
String abc="<font color=BLUE><i>A</i></font>";
abc=abc+"<b>A</b><i>A</i>";
textView.setText(Html.formHtml(abc)); 
```

您可以使用字体标签设置任何大小的文本，还可以设置它的颜色..

这是最简单的方法；*

# jquery - jquery删除url中问号后的所有内容

> ID：11498957
> 
> 赞同：11
> 
> 时间：2012-07-16T06:14:42.070
> 
> 标签：jquery, url, parameters

我想知道是否可以删除 URL 中问号后的所有内容？

`http://www.site.com?some_parameters_continue_forever`

我可以用`.remove()`吗？需要在参数中放入什么？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T07:08:14.407

由于 url 由浏览器控制，因此当您更改 url 时，页面将重新加载。仍然是您想要做的，在标记类型之后您不需要这些东西的页面上`?`..

```
window.location = "http://www.mysite.com" //or whatever your site url is 
```

要动态执行此操作，您可以使用以下函数，然后使用`window.location`

```
function getPathFromUrl(url) {
  return url.split("?")[0];
} 
```

**注意**：*当您更改网址时，页面将刷新。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-16T06:19:53.837

您可以使用这个简单的正则表达式：

```
yourUrl.replace(/\?.+/, '') 
```

`reomve()`用于 DOM 的东西。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-16T06:20:53.130

试试这个片段：

```
var url = "http://www.somexample.com?a=b&c=2&d=3";
url = url.substring(0 , url.indexOf('?')+1); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-29T11:31:37.667

在 Python 3 中发布这对我有用，因为其他一些解决方案没有。

```
import re

mystring = 'http://www.example.com?some_parameters_continue_forever'
mystring_clean = re.sub(r'\?.*', '', mystring)

print(mystring_clean) 
```

# jsp - 在 JSP EL 中找不到属性异常

> ID：11498958
> 
> 赞同：1
> 
> 时间：2012-07-16T06:14:49.937
> 
> 标签：jsp, jakarta-ee, servlets, el

很烦人。不知道为什么会出现这个错误。在下面的代码中

```
NOTE:

if I only use <td>${user.id}</td> than its printing id properly but on ${user.username} property generating error. See below JSP page code.

If I use below code in JSP page like to test than I get all the objects and properties

<c:forEach var="user" items="${users}" varStatus="i">
    <tr>
        <td>${users[i.index]}</td>
    </tr>                       
</c:forEach>

Result:

User[id=1,username=u1,password=p1,firstname=f1,lastname=l1,dob=2012-07-01,age=40]
User[id=2,username=u2,password=p2,firstname=f2,lastname=l2,dob=2012-07-02,age=39]
User[id=3,username=u3,password=p3,firstname=f3,lastname=l3,dob=2012-07-03,age=38] 
```

**错误：**

```
09:49:49,047 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/crud_jsp_servlet_cdi_jdbc_tagfile].[jsp]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet jsp threw exception: javax.el.PropertyNotFoundException: The class 'com.myapp.dao.User' does not have the property 'username'.
    at javax.el.BeanELResolver.getBeanProperty(BeanELResolver.java:661) [jboss-el-api_2.2_spec-1.0.0.Final.jar:1.0.0.Final]
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:290) [jboss-el-api_2.2_spec-1.0.0.Final.jar:1.0.0.Final]
    at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:175) [jboss-el-api_2.2_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.el.parser.AstValue.getValue(AstValue.java:169) [jbossweb-7.0.13.Final.jar:]
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:935) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jsp.WEB_002dINF.admin.UserList_jsp._jspx_meth_c_005fforEach_005f0(UserList_jsp.java:137)
    at org.apache.jsp.WEB_002dINF.admin.UserList_jsp.access$1(UserList_jsp.java:114)
    at org.apache.jsp.WEB_002dINF.admin.UserList_jsp$Helper.invoke1(UserList_jsp.java:215)
    at org.apache.jsp.WEB_002dINF.admin.UserList_jsp$Helper.invoke(UserList_jsp.java:240)
    at org.apache.jsp.tag.web.layout_tag.doTag(layout_tag.java:120)
    at org.apache.jsp.WEB_002dINF.admin.UserList_jsp._jspx_meth_tags_005flayout_005f0(UserList_jsp.java:96)
    at org.apache.jsp.WEB_002dINF.admin.UserList_jsp._jspService(UserList_jsp.java:69)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) [jbossweb-7.0.13.Final.jar:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final] 
```

***JSP 页面：***

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>

<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib prefix="tags" tagdir="/WEB-INF/tags"%>

<tags:layout path="${pageContext.request.contextPath}">
    <jsp:attribute name="search">
        <tags:search />
    </jsp:attribute>
    <jsp:body>
        <div class="mainDiv">
            <table class="table table-striped table-bordered table-condensed">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>UserName</th>
                        <th>Password</th>
                        <th>FirstName</th>
                        <th>LastName</th>
                        <th>Date of Birth</th>
                        <th>Age</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <c:forEach var="user" items="${users}">
                        <tr>
                            <td>${user.id}</td>
                            <td>${user.username}</td>
                            <td>${user.password}</td>
                            <td>${user.firstname}</td>
                            <td>${user.lastname}</td>
                            <td>${user.dob}</td>
                            <td>${user.age}</td>
                            <td><a href="#"><i class="icon-edit"></i></a> <a href="#"><i
                                    class="icon-trash"></i></a></td>
                        </tr>
                    </c:forEach>
                </tbody>
            </table>
        </div>
    </jsp:body>
</tags:layout> 
```

***用户.java***

```
package com.myapp.dao;

import java.sql.Date;

public class User {

    private Long id;
    private String username;
    private String password;
    private String firstname;
    private String lastname;
    private Date dob;
    private int age;

    public User(){
    };

    public User(Long id, String username, String password, String firstname, String lastname, Date dob, int age){

        this.id = id;
        this.username = username;
        this.password = password;
        this.firstname = firstname;
        this.lastname = lastname;
        this.dob = dob;
        this.age = age;
    }

    public Long getId(){
        return id;
    }

    public void setId(Long id){
        this.id = id;
    }

    public String getUserName(){
        return username;
    }

    public void setUserName(String username){
        this.username = username;
    }

    public String getPassword(){
        return password;
    }

    public void setPassword(String password){
        this.password = password;
    }

    public String getFirstName(){
        return firstname;
    }

    public void setFirstName(String firstname){
        this.firstname = firstname;
    }

    public String getLastName(){
        return lastname;
    }

    public void setLastName(String lastname){
        this.lastname = lastname;
    }

    public Date getDob(){
        return dob;
    }

    public void setDob(Date dob){
        this.dob = dob;
    }

    public int getAge(){
        return age;
    }

    public void setAge(int age){
        this.age = age;
    }

    public String getFullName(){
        return this.firstname + " " + this.lastname;
    }

} 
```

***塞尔维莱特：***

```
List<User> users = null;
        userDAO = new UserDAOJDBC();

        users = userDAO.listUsers();
        request.setAttribute("users", users);

        String path = "/WEB-INF/admin/UserList.jsp";
        getServletContext().getRequestDispatcher(path).forward(request, response); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T06:21:52.163

Java Bean 属性的大小写很重要。在 EL 中您尝试访问属性`username`，但在 bean 中您有`getUserName/setUserName`。请改用`getUsername/setUsername`（小写“n”）。

# android - 逐像素读取图像

> ID：11498960
> 
> 赞同：0
> 
> 时间：2012-07-16T06:14:51.577
> 
> 标签：android

无论如何我可以逐像素读取jpeg而不将整个图像放入内存？我已经搜索了很长时间。提前感谢您的宝贵建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:26:15.607

您不能，因为 jpeg 图像数据不是以 jpeg 文件格式逐像素写入的。但据我记得，jpeg 编码 8x8 像素的块，所以你可能会坚持下去......

# asp.net - 在顶部下拉列表中添加空白数据时出错

> ID：11498961
> 
> 赞同：0
> 
> 时间：2012-07-16T06:14:58.263
> 
> 标签：asp.net, vb.net

我有一个下拉列表，我有一个数据源，我想添加它工作的空白数据，但选择的值始终为 0

我背后的代码：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
listhostel()   
End Sub

Protected Sub listhostel()
Dim dash As New DataSet
Dim clas As New Class1

dash = clas.returndataset("select ID as idhostel,Nama from Hostel")

listhotelx.DataSource = dash
listhotelx.DataBind()
listhotelx.Items.Insert(0, New ListItem("-- Select --", 0))
End Sub

Protected Sub viewdatagrid_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles viewdatagrid.Click    
Label1.Text = listhotelx.SelectedValue 
viewdata()
End Sub 
```

文件.aspx

```
 <asp:DropDownList ID="listhotelx" runat="server" DataTextField="Nama"
 DataValueField="idhostel" >
        </asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:29:24.950

数据绑定并添加项目后，请注意如何设置项目 SelectedIndex：

```
listhotelx.Items.Insert(0, new ListItem("-- Select --", String.Empty));
listhotelx.SelectedIndex = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:36:05.803

你得到的错误是因为`ListItem`must have`(string,string)`作为参数并且你传递`("-- Select --",0)`的是`(string,int)`.

如果要在顶部添加空白数据，则只需输入空字符串。

```
listhotelx.Items.Insert(0, new ListItem(String.Empty, String.Empty));
listhotelx.SelectedIndex = 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T06:43:51.390

在 Page_Load 上必须添加 Page.IsPostBack

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        If Not Page.IsPostBack Then
            listhostel()
        End If
    End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T06:24:37.453

将新项目添加到下拉列表后调用 DropDownList.DataBind() 方法。ListItem 方法只接受字符串值，因此在您的代码中将 0 替换为“0”

```
Protected Sub listhostel()
Dim dash As New DataSet
Dim clas As New Class1

dash = clas.returndataset("select ID as idhostel,Nama from Hostel")

listhotelx.DataSource = dash    
listhotelx.Items.Insert(0, New ListItem("-- Select --", "0")) // here the 2nd argument is string.
listhotelx.DataBind()
End Sub

//    I have checked this code and it works fine for me 
```

我还在我的下拉列表中添加了一个项目

```
<asp:DropDownList ID="DropDownList1" runat="server" OnSelectedIndexChanged="DropDownList1_SelectedIndexChanged">
   <asp:ListItem Text="name1" Value="-1" ></asp:ListItem>
</asp:DropDownList> 
```

在我添加新项目时单击按钮，它成功地将项目添加到索引 0。

```
 protected void Button1_Click(object sender, EventArgs e)
{
    DropDownList1.Items.Insert(0,new ListItem("name", "-1"));         
    DropDownList1.DataBind();
} 
```

# graphite - 石墨：图/函数中节点的递归下降？

> ID：11498963
> 
> 赞同：3
> 
> 时间：2012-07-16T06:15:04.283
> 
> 标签：graphite, statsd

来自 Graphite 的后续问题[：求和所有匹配模式的统计数据？](https://stackoverflow.com/questions/11480952/graphite-sum-all-stats-that-match-a-pattern/11489491)：

是否有任何 Graphite 魔法可以递归地降低节点名称？我现在知道我可以使用这样的模式：

```
stats.timers.api.*.200.count 
```

...但想象一下我有以下内容：

```
stats.timers.api.foo.bar.200.count
stats.timers.api.baz.200.count 
```

我想在同一张图表上看到这两个统计数据（以及所有其他任意深度的数据）。我尝试了以下方法：

```
stats.timers.api.*.200.count
stats.timers.api.**.200.count 
```

前者只向我显示上面的“baz”示例之类的项目；后者是一个错误。

有没有其他方法可以以深度不敏感的方式匹配指标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-03T11:56:12.883

dannyla 答案的更简洁的单行版本是：

`stats.timers.api.{*,*.*,*.*.*}.200.count`

但是对您的问题的简短回答不会，递归下降节点名称没有魔法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T04:27:06.893

我知道这不是您所追求的 100%，但是您可以在同一个图表上拥有多个目标。

您可以将以下内容组合到同一张图表上，该图表将为您提供结果，但不是您之后的干净解决方案。

```
stats.timers.api.*.200.count
stats.timers.api.*.*.200.count
stats.timers.api.*.*.*.200.count 
```

# javascript - 将选择框的值转移到隐藏字段

> ID：11498964
> 
> 赞同：0
> 
> 时间：2012-07-16T06:15:13.473
> 
> 标签：javascript, jquery

我有三个选择框，一个选择年份，另一个选择月份，最后一个选择当天。我的目标是让它们自动插入一个隐藏字段（例如 2012-07-16），这是主要的“日期”字段，并且存储到数据库中。

有谁知道如何最好地实现这一目标？一些建议将不胜感激，非常感谢你，帕特里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T06:17:48.247

```
$('#year, #month, #day').change(function() {
    $('#date').val($('#year').val()+'-'+$('#month').val()+'-'+$('#ay').val())
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:23:49.510

使用纯 javascript 的工作示例，您可以将其更改为 jquery。

[http://jsfiddle.net/R3yeX/](http://jsfiddle.net/R3yeX/)

# python - 如何在python中自动安装缺少的模块？

> ID：11498969
> 
> 赞同：2
> 
> 时间：2012-07-16T06:15:45.763
> 
> 标签：python, linux, configure, autoconf

我想发布我的简单 python 脚本，它使用一些扩展模块，例如`argparse`和`watchdog`. 我认为假设我的脚本的用户已经安装了这些模块是不合理的。所以我认为我应该在版本中包含一个配置脚本来测试用户环境（如果我可以自动安装这些缺失的模块，那就再好不过了：P）。

我的问题是：是否有任何类似`configure`c 程序的实用程序。如果没有这些东西，是否可以适应`configure`python环境？否则我必须从头开始编写一些:(。

谢谢和最好的问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T06:26:46.863

看看[setuptools](http://pypi.python.org/pypi/setuptools/)，特别是[这个](http://peak.telecommunity.com/DevCenter/PkgResources#requirement-objects)文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T06:53:56.020

将 PIP 与说明所有必需模块的文本文件一起使用。像这样：

```
pip install -r requirement.txt 
```

见： [http ://www.pip-installer.org/en/latest/requirements.html](http://www.pip-installer.org/en/latest/requirements.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T06:46:38.847

您还可以使用[pip](http://pypi.python.org/pypi/pip/)安装模块。PIP 是`easy_install`.

# javascript - Javascript替换表达式

> ID：11498970
> 
> 赞同：0
> 
> 时间：2012-07-16T06:15:53.270
> 
> 标签：javascript, jquery

我无法在 javascript 中替换一些 url 变量。我正在尝试替换`&s=`and的值`&so=`。下面是我的代码：

```
url = url.replace(/(s=).*?(&)/, '$1' + $("#sort_by").val() + '$2');
url = url.replace(/(so=).*?(&)/, '$1' + $("#sort_ord").val() + '$2'); 
```

第一次替换没有问题，`s`值总是被替换，但`so`变量似乎永远不会被替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:19:32.993

将您的代码更改为：

```
url = url.replace(/(s=)[^&]*/, '$1' + $("#sort_by").val());
url = url.replace(/(so=)[^&]*/, '$1' + $("#sort_ord").val()); 
```

这应该适用于大多数 URL（但不是 RFC 允许的所有 URL）。这利用了`&`主要用于在 URL 的查询字符串中分隔键值对的事实。

# android - android中的赛车3D对象（非图像）旋转

> ID：11498973
> 
> 赞同：1
> 
> 时间：2012-07-16T06:16:07.827
> 
> 标签：android

我想开发一个赛车游戏，我想在选择汽车时顺时针旋转汽车对象（不是图像）。之后，当用户向左拖动屏幕时，我想更改汽车对象的颜色，就像 Android 中的图像滑动一样。我不知道用于游戏开发的任何类型的 3rd 方 API 以使其更容易。我认为旋转的汽车必须是动画，但我搜索 Android 只支持 XML 形式的动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:28:32.757

请参考 Android 中的 OpenGL，我认为这是您完成任务和编写任何游戏的唯一合理方式。此链接将帮助您开始： http: [//www.learnopengles.com/android-lesson-one-getting-started/](http://www.learnopengles.com/android-lesson-one-getting-started/)

# jmeter - JMeter - 请求未在图形输出中的控制器内分组

> ID：11498977
> 
> 赞同：2
> 
> 时间：2012-07-16T06:16:22.393
> 
> 标签：jmeter

在我的测试计划中，我有一系列步骤，例如 Login、HomePage、DoSearch、DoTask、Logout，每个步骤都有许多 HTTP 请求。我曾尝试使用简单控制器、事务控制器、将事务控制器保留在简单控制器中，反之亦然，但无法在任何图表中查看步进级别的时间。它最多向我显示登录的时间，但其他请求未在任一控制器上分组。尝试检查“生成父样本”和“包括持续时间......”但没有运气。

有人可以让我知道这里需要做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:09:15.703

您需要添加一个侦听器。每个听众提供不同的信息。我通常只使用汇总报告。

# android - 安卓。ldpi、mdpi、hdpi 说明

> ID：11498986
> 
> 赞同：2
> 
> 时间：2012-07-16T06:17:33.697
> 
> 标签：android

所以，关于这个 stackoverflow 接受的答案：[How do I convert ppi into dpi for Android images？](https://stackoverflow.com/questions/6930031/how-do-i-convert-ppi-into-dpi-for-android-images)

所以，好的，我让每个背景图像都是那个人在答案中指定的尺寸。但是，如果我定义了放置在屏幕上的其他 ImageView（较小的），与上面定义的尺寸相关（例如，假设 ImageView 的 hdpi 设备尺寸为 20x20，如果我为 ldpi 设备计算此尺寸，图像必须是 7x7 像素，这非常小）然后 ldpi 设备将无法在屏幕上看到任何东西 :) 或者他们会？我做对了吗？

我非常困惑。有人可以为我澄清一下吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T06:43:20.903

另一个问题中提到的分辨率将始终填满屏幕，但您应该为每个屏幕尺寸提供不同的布局文件以保持 dpi 独立（如果您愿意）。

查看开发页面中的示例![http://developer.android.com/images/screens_support/density-test-good.png](../Images/db35346da4b469ac446aa846c657a7c8.png)

此外，它总是有助于启动适当的模拟器（mdpi 为中等尺寸，ldpi 为最小尺寸，hdpi 为最大尺寸，具体取决于您计划支持的设备）并尝试您的布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T06:25:35.383

您的图像至少应该是易于查看的大小，甚至是用户在他/她的设备上可以点击的大小。

这些指南适用于特定图像，例如启动器图标或菜单项，不一定适用于您在应用中使用的任何图像。对于这些类型的图像，您是指定图像大小和分辨率的最佳判断者。

您可以将这些图像仅用作 mdpi，并提供 hdpi 版本，以便它至少为 hdpi 和 xdpi 设备提供更高分辨率的图像。

# hibernate - 使用 JTA 的优势

> ID：11498988
> 
> 赞同：1
> 
> 时间：2012-07-16T06:17:37.707
> 
> 标签：hibernate, jta

我正在使用 struts 和 hibernate 开发一个 java web 应用程序。目前，我正在使用 Hibernate 的 Transaction 进行 hibernate 中的事务管理。与 Hibernate 事务相比，使用 JTA 事务划分有什么优势？更具体地说，建议什么时候使用 JTA ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T07:13:32.507

推荐使用JTA

*   使用 Java EE 应用服务器时，因为它提供开箱即用的 JTA 和连接池，以及管理控制台等其他好东西，它允许获取有关事务的统计信息、健康状态等
*   当您有一个分布式事务时，即跨越多个事务资源的事务：两个数据库，或一个数据库和一个 JMS 代理等。

无论您是否使用 JTA，我都建议您使用一个框架（Spring、EJB，...），让您以声明方式划分事务，而不是用代码划分它们。这确实使应用程序更加健壮和可维护。

# google-apps-script - Google Apps 与其他网站之间的数据交换

> ID：11498992
> 
> 赞同：0
> 
> 时间：2012-07-16T06:17:47.713
> 
> 标签：google-apps-script, google-apps, stackmob

G'day伙计们

简而言之，我想知道 Google Apps 是否可以使用其他站点的 REST API 与其他站点交换数据？

在我的具体情况下，我有一个在 StackMob 上运行的移动后端，并且正在探索 Google Apps 作为一种可能的数据管理解决方案。为此，我可以使用 StackMob 的 API 在 Google Apps 和 StackMob 之间进行通信，这一点至关重要。

干杯和 TIA，佩德罗 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:16:42.773

您可以使用 Google Apps Script 的 UrlFetch Service 在 Google Apps 和 StackMob 的其余 API 之间进行通信。这是可以帮助您的参考 URL [https://developers.google.com/apps-script/service_urlfetch](https://developers.google.com/apps-script/service_urlfetch)

URLFetch 与 Twitter API 的使用示例 [https://developers.google.com/apps-script/articles/twitter_tutorial](https://developers.google.com/apps-script/articles/twitter_tutorial)

# sql - SQL Server 日期时间字段问题

> ID：11498993
> 
> 赞同：0
> 
> 时间：2012-07-16T06:17:48.580
> 
> 标签：sql, sql-server, sql-server-2008, datetime, regional-settings

我的个人电脑运行的是 Windows 7（土耳其语），我安装了 SQL Server 2008。当我创建一个新数据库时，数据库语言是土耳其语_CI_AS

我有一台装有 Windows Server 2003（英语）的服务器，并在该服务器上安装了 SQL Server 2008。我将区域和语言选项设置为土耳其语。我正在创建一个数据库并选择排序规则土耳其语_CI_AS

但是当我在服务器上的表中插入一行时，会发生错误：

> 日期格式无效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:29:20.097

您应该始终使用明确的格式，例如 YYYYMMDD 或 YYYYMMDD HH:MM:SS，这样无论服务器/数据库的设置如何，都可以正确添加。阅读此内容以更好地理解[http://beyondrelational.com/modules/2/blogs/70/posts/10898/understanding-datetime-column-part-ii.aspx](http://beyondrelational.com/modules/2/blogs/70/posts/10898/understanding-datetime-column-part-ii.aspx)

# java - 当我们在测试类上调用 db 时，EasyMock

> ID：11498994
> 
> 赞同：0
> 
> 时间：2012-07-16T06:17:50.170
> 
> 标签：java, junit, easymock

我正在测试一个类，比如用 JUnit 说 MyClass。我正在使用 easymock 来隔离对 db 的需求。它工作正常。因此，如果有对模型对象的调用，我只是模拟该对象。例如，如果我有

```
public void method(Project project) { project.getName(); ..} 
```

在 MyClass 中，我只使用 mockedProject。然后我说 MyClass.method(mockedProject); 但是如果我在 MyClass 中有 this.getName() 怎么办。在这种情况下，由于我想要我正在测试的类（MyClass）的真实对象，我无法模拟 MyClass 对象。所以我不能为 MyClass 对象定义返回值，因为它是一个真实的对象。请记住 getName() 会抛出我不希望它离开的数据库。

当我有 this.method() 并且该方法与 db 一起使用时，在这种情况下我应该怎么做。我无法模拟我正在测试的这个对象。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:20:36.647

如果您能够模拟用于访问数据库的类，那么就这样做，然后`this.getName()`将使用模拟的类并获得您定义的任何数据。

如果不能模拟 DB 访问类，那么您将无能为力。

**更新：**

测试 JPA 实体可能会有点棘手，如果你可以模拟实际的实体，那么无论如何，去做它并让它返回你喜欢的任何东西而不是 DB 结果。但我不确定这是否可能。

我建议您在[这里](http://blog.schauderhaft.de/2011/03/13/testing-databases-with-junit-and-hibernate-part-1-one-to-rule-them/)和[这里](http://java.dzone.com/articles/testing-databases-junit-and-0)查看更详细的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:45:50.733

您应该模拟在 MyClass.getName() 中访问数据库的类（例如 EntityManager）并记录这些模拟所需的行为

# php - 标记间隔的错误定位

> ID：11498995
> 
> 赞同：1
> 
> 时间：2012-07-16T06:18:06.890
> 
> 标签：php, position, marker

我可以显示请求中的所有标记，但它们在我的地图中指向一个小间隙。

例如，纽约指向魁北克附近。如果我放大地图，所有标记都会靠近正确的位置。

有谁知道如何修理它？

我的代码：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3.1&sensor=true"></script>
<script type="text/javascript">
//<![CDATA[
    var geocoder;
    var map;
    var timeout = 600;
    var address_position = 0;
    var address = [
        <?php
        $_list="";
        $_unicite=array();
        foreach($search_data as $k => $item)
        {
            $_address=trim($item->meta_value);                              

            if(!empty($_address))
            {
                if(!in_array($_address,$_unicite)){
                    $_unicite[$item->post_id]=$_address;
                    $_list.='"'.$_address.'",';
                }
            }                               
        } 
        if(!empty($_list)) {
            $_list=substr($_list,0,abs(strlen($_list)-1));
        }
        echo $_list;
        ?>             
        ];
    var link = [
         <?php
            $_list2="";
            $_unicite2=array();
            foreach($search_data as $k => $item)
            {
                $_link=trim($item->post_id);                                

                if(!empty($_link))
                {
                    if(!in_array($_link,$_unicite2)){
                        $_unicite2[$item->post_id]=$_link;
                        $_list2.='"'.$_link.'",';
                    }
                }                               
            }       
            if(!empty($_list2)) {
                $_list2=substr($_list2,0,abs(strlen($_list2)-1));
            }
            echo $_list2;
         ?>             
         ];
    var title = [
        <?php
        $_list3="";
        $_unicite3=array();
        foreach($search_data as $k => $item)
        {
            $_title=trim($item->post_title);                                

            if(!empty($_title))
            {
                if(!in_array($_title,$_unicite2)){
                    $_unicite2[$item->post_id]=$_title;
                    $_list3.='"'.$_title.'",';
                }
            }                               
        }    
        if(!empty($_list3)) {
            $_list3=substr($_list3,0,abs(strlen($_list3)-1));
        }
        echo $_list3;
        ?>             
        ];
    var image = new google.maps.MarkerImage(
        'http://www.bookyourparis.com/images-site/beachflag.png',
        new google.maps.Size(28,54),
        new google.maps.Point(0,0),
        new google.maps.Point(14,54)
    );
    function addMarker(position)
    {
        geocoder.geocode({'address': address[position]}, function(results, status)
        {
            address_position++;
            if (address_position < address.length)
            {
                setTimeout(function() { addMarker(address_position); }, (timeout));
            }
            if (status == google.maps.GeocoderStatus.OVER_QUERY_LIMIT)
            {
                setTimeout(function() { addMarker(position); }, (timeout * 3));
            }
            /**
            if (address_position < address.length)
            {
                if (status == google.maps.GeocoderStatus.OVER_QUERY_LIMIT)
                {
                    setTimeout(function() { addMarker(position); }, (timeout * 3));
                } else {
                    setTimeout(function() { addMarker(address_position); }, (timeout));
                }
            }
            /**/
            else if (status == google.maps.GeocoderStatus.OK) 
            {   
                map.setCenter(results[0].geometry.location);                
                var marker = new google.maps.Marker({
                    position: results[0].geometry.location,
                    map: map,  
                    title:address[position],
                    icon: image,
                }); 
                var contentString = '<div id="content_bulle"><div id="bodyContent_bulle" style="margin-top:5px;">'+
                '<h1 style="font-size:1.5em">'+title[position]+
                '</h1><h2 style="font-size:1.2em">'+results[0].formatted_address+
                '</h2><p style="color:#AF1A40"><a target="_blank" href="?p='+link[position]+'">View</a></p>'+
                '</div></div>';
                var infowindow = new google.maps.InfoWindow({
                    content: contentString,
                    maxHeight: 100
                });
                google.maps.event.addListener(marker, 'click', function() {
                  infowindow.open(map,marker);
                });
            } 
        });
    }
    function codeaddress() {
        geocoder = new google.maps.Geocoder();
        //var latlng = new google.maps.LatLng(-34.397, 150.644);
        var myOptions = {
            zoom: 2,
            navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
            mapTypeId: google.maps.MapTypeId.HYBRID,  
        }   
        map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
        addMarker(address_position);
    }
    function centerMap() 
    {
        map.setCenter(markers[markers.length-1].getPosition());
    } 
    jQuery(window).load( function(){
        codeaddress();
    }); 
 //]]>
</script>
<div id="map_canvas" style="width: 940px; height: 420px;border:1px solid #999"></div> 
```

# javascript - MooTools Slider 在创建后添加到 DOM 时不起作用

> ID：11498997
> 
> 赞同：0
> 
> 时间：2012-07-16T06:18:12.370
> 
> 标签：javascript, slider, mootools

我在让 MooTools Slider (http://mootools.net/docs/more/Drag/Slider) 工作时遇到了很多问题。经过大量调试后，问题似乎在于我在将滑块添加到 dom 之前创建了滑块（通过执行 new Slider(sliderElement,knobElement)）。当我之后创建滑块时它工作正常，但是这样做会迫使我在代码中*非常*不合逻辑的位置创建滑块

我想做的是：

```
createSlider: function()
{
    var sliderContainer = new Element('div');   
    var sliderTrack = new Element('div', {class: 'slider_track'});
    var sliderKnob = new Element('div', {class: 'slider_knob'});
    sliderTrack.grab(sliderKnob);

    new Slider(sliderTrack, sliderKnob);

    slidersContainer.grab(sliderTrack);

    return sliderContainer;
} 
```

有没有办法让它像这样工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:15:04.047

为什么不从一开始就将滑块放在代码中，然后用 CSS 隐藏它，直到它被启用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:36:04.977

如何将目标容器的引用传递给您的函数，然后首先向其中添加所需的元素，然后构造滑块。

# python - PyQT4 改变 qDateTimeEdit 时间值？

> ID：11498998
> 
> 赞同：2
> 
> 时间：2012-07-16T06:18:13.330
> 
> 标签：python, datetime, pyqt4

卡在我程序的这一部分..似乎我找不到一个像样的例子来说明如何做到这一点..

我有一个 QDateTimeEdit 对象我已经将它的显示值设置为我当前系统时间使用的值

```
self.ui.dateTimeEdit.setDate(QDate.currentDate()) 
```

它的输出例如是**7/16/2012 12:00:00 AM**

现在我的问题是..我想将**12:00:00 AM**设置为**11:59:59 PM**

请问我该怎么做？

感谢任何愿意花时间在我的问题上的人。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-16T14:45:48.707

PyQt 中基本上可以使用三种不同的对象：

*   日期

*   时间

*   Q日期时间

QDateTime 接受其他两种类型。因此，您可以使用 QDate 实例定义 QDateTime 对象的日期，同样可以使用 QTime 完成。

显然，如果您尝试更改时间，则需要使用 QTime 对象。

这里有些例子：

```
#create a QDateTimeEdit object
myDTE = QtGui.QDateTimeEdit()

#get current date and time
now = QtCore.QDateTime.currentDateTime()

#set current date and time to the object
myDTE.setDateTime(now)

#set date only
today = QtCore.QDate.currentDate()
myDTE.setDate(today)

#set time only
this_moment = QtCore.QTime.currentTime()
myDTE.setTime(this_moment)

#set an arbitrary date
some_date = QtCore.QDate(2011,4,22) #Year, Month, Day
myDTE.setDate(some_date)

#set an arbitrary time
some_time = QtCore.QTime(16,33,15) #Hours, Minutes, Seconds (Only H and M required)
myDTE.setTime(some_time)

#set an arbitrary date and time
someDT = QtCore.QDateTime(2011,4,22,16,33,15)
myDTE.setDateTime(someDT) 
```