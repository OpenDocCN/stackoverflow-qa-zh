# StackOverflow 问答 11559000-11559999

# android - 如何在android地图中勾勒文本

> ID：11559002
> 
> 赞同：1
> 
> 时间：2012-07-19T10:36:39.093
> 
> 标签：android

我想在地图内的叠加层中勾勒出文本。我尝试了下面的代码，但结果不是很令人满意。

```
Paint paint = new Paint();
                paint.setTextAlign(Paint.Align.CENTER);
                paint.setTextSize(mTextSize);

                paint.setAntiAlias(true);
              //  paint.setARGB(150, 0, 0, 0); // alpha, r, g, b (Black, semi see-through)
              //  paint.setARGB(255, 255, 255, 255); 
                paint.setColor(0xFFFFFFFF );
                //paint.setStyle(Paint.Style.STROKE);
                paint.setStyle(/*Paint.Style.FILL_AND_STROKE*/Paint.Style.FILL);
                //show text to the right of the icon
                canvas.drawText(item.getTitle(), ptScreenCoord.x+(distancesShift), ptScreenCoord.y+23-mTextSize, paint);
                // again to show outline
                Paint paint2 = new Paint();
                paint2.setTextAlign(Paint.Align.CENTER);
                paint2.setTextSize(mTextSize);

                paint2.setAntiAlias(true);
                paint2.setTextAlign(Paint.Align.CENTER);
              //  paint.setARGB(150, 0, 0, 0); // alpha, r, g, b (Black, semi see-through)
              //  paint2.setARGB(255, 255, 255, 255); 
                paint2.setColor(0x00000000);
                paint2.setStyle(Paint.Style.STROKE);
                paint2.setStrokeWidth(4);

                canvas.drawText(item.getTitle(), ptScreenCoord.x+(distancesShift), ptScreenCoord.y+23-mTextSize, paint2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:56:54.497

我知道了！！我对上面的代码做了一些小的改动，如下所示。

```
Paint paint = new Paint();
            paint.setTextAlign(Paint.Align.CENTER);
            paint.setTextSize(mTextSize);

            paint.setAntiAlias(true);
          //  paint.setARGB(150, 0, 0, 0); // alpha, r, g, b (Black, semi see-through)
          paint.setARGB(255, 0, 0, 0); 
            //paint.setColor(0xFFFFFFFF );
            //paint.setStyle(Paint.Style.STROKE);
            paint.setStyle(/*Paint.Style.FILL_AND_STROKE*/Paint.Style.STROKE);
            paint.setStrokeWidth(4);
            //show text to the right of the icon
            canvas.drawText(item.getTitle(), ptScreenCoord.x+(distancesShift), ptScreenCoord.y+23-mTextSize, paint);
            // again to show outline
            Paint paint2 = new Paint();
            paint2.setTextAlign(Paint.Align.CENTER);
            paint2.setTextSize(mTextSize);

            paint2.setAntiAlias(true);
            paint2.setTextAlign(Paint.Align.CENTER);
          //  paint.setARGB(150, 0, 0, 0); // alpha, r, g, b (Black, semi see-through)
           paint2.setARGB(255, 255, 255, 255); 
           // paint2.setColor(0x00000000);
            paint2.setStyle(Paint.Style.FILL);

            canvas.drawText(item.getTitle(), ptScreenCoord.x+(distancesShift), ptScreenCoord.y+23-mTextSize, paint2); 
```

# objective-c - NSURL 没有 %

> ID：11559003
> 
> 赞同：2
> 
> 时间：2012-07-19T10:36:40.357
> 
> 标签：objective-c, xcode, macos, cocoa, drag-and-drop

我正在实现我的拖放方法。我怎么能`NSUrl`没有`%`空间应该在哪里？我稍后将 NSUrl 转换为 NSString，但我不能告诉 NSString 替换`%`为空格，因为用户可能会拖动`%`名称中带有符号的文件。因此，该文件将无法正确定位。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:42:13.780

调用`path`您的`NSUrl`实例的方法，它会转义百分比`%`序列，并用它们相应的“原始”字符替换它们。

您可以使用`NSString`'s`stringByReplacingPercentEscapesUsingEncoding:`和`stringByAddingPercentEscapesUsingEncoding:`方法在转义字符串和非转义字符串之间进行转换。

# iphone - 在 iPhone 的 UIAutomation 测试中访问 UIASCRIPT 变量

> ID：11559008
> 
> 赞同：0
> 
> 时间：2012-07-19T10:36:59.800
> 
> 标签：iphone, xcode, instruments, ios-ui-automation

有没有办法在 javascript 测试代码中访问仪器的命令行参数？

我正在使用以下命令开始 UI 测试：

> 仪器 -t /Developer/Platforms/iPhoneOS.platform/Developer/Library/Instruments/PlugIns/AutomationInstrument.bundle/Contents/Resources/Automation.tracetemplate -e UIASCRIPT abc.js

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T01:20:26.670

我已经使用该工具 1.5 个月，似乎没有这样的访问权限。

# jquery - jquerymobile 标题中的中心标题图像

> ID：11559009
> 
> 赞同：1
> 
> 时间：2012-07-19T10:37:00.013
> 
> 标签：jquery, css, html

我的标题是左对齐的，即使我打算将它居中。这是我的代码：

```
<div data-role="page" id="first">
    <div data-role="header">
        <div >
            <img style="margin:0 auto;margin-left:auto;margin-right:auto;align:center;"  onclick='doAction("showStoreLocatorMap()")' src="images/main_header.png" alt="main logo" vspace="2"/>
        </div>
    </div><!-- /header -->

    <div data-role="content" id="firstPageContent"> 
    </div><!-- /content -->
</div><!-- /page --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-05T20:59:47.493

将图像放在任何标题标签中，我遇到了同样的问题，这解决了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:55:15.670

将 CSS 添加`div`到`img`.

```
<div style="margin-left: auto; margin-right: auto;">
    <img onclick='doAction("showStoreLocatorMap()")' src="images/main_header.png" alt="main logo" vspace="2"/>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:18:28.747

只有这样才能完成工作：

```
<div align="center">
     <img  onclick='doAction("showStoreLocatorMap()")' src="images/main_header.png" alt="main logo" vspace="2"/>
</div> 
```

# c# - 想要我的asp.net 表单中的多个html 数据表？

> ID：11559012
> 
> 赞同：0
> 
> 时间：2012-07-19T10:37:14.603
> 
> 标签：c#, asp.net, html

我在我的 asp.net 表单中使用了一个 htmltable，但我想要在运行时使用多个 htmltable，比如当我点击提交它在我的 htmldatattable 中选择的相关数据时

我想在运行时生成的特定 htmltable 中查看特定的 id 记录，我该怎么做？

这是我的htmltable代码

```
 protected void Page_Load(object sender, EventArgs e)
 {

    HtmlTable dTable = new HtmlTable();
    dTable.CellPadding = 2;
    // dTable.CellSpacing = 0;
    dTable.Border = 1;
    dTable.BorderColor = "#cccccc";

    int tRows;
    int tCells;

    for (tRows = 0; tRows < 1; tRows++)
    {
        HtmlTableRow dTRow = new HtmlTableRow();
        HtmlTableRow dtrow = new HtmlTableRow();
        HtmlTableRow dtrow3 = new HtmlTableRow();
        HtmlTableRow dtrow4 = new HtmlTableRow();
        for (tCells = 0; tCells < 1; tCells++)
        {
            HtmlTableCell dTCell = new HtmlTableCell();
            HtmlTableCell dtcell1 = new HtmlTableCell();
            HtmlTableCell dtcell3 = new HtmlTableCell();
            HtmlTableCell dtcell4 = new HtmlTableCell();
            HtmlInputText txt = new HtmlInputText();
            HtmlInputText txt1 = new HtmlInputText();
            HtmlInputText txtAge = new HtmlInputText();
            HtmlInputText txtHeight = new HtmlInputText();
            dTCell.InnerText = "FirstName:: " + Convert.ToString(tRows);
            dtcell1.InnerText = "LastName::" + Convert.ToString(tRows);
            dtcell3.InnerText = "Age::" + Convert.ToInt32(tRows);
            dtcell4.InnerText = "Height::" + Convert.ToString(tRows);
            dTCell.Controls.Add(txt);
            dtcell1.Controls.Add(txt1);
            dtcell3.Controls.Add(txtAge);
            dtcell4.Controls.Add(txtHeight);
            dtrow.Controls.Add(dtcell1);
            dtrow3.Controls.Add(dtcell3);
            dtrow4.Controls.Add(dtcell4);
            dTRow.Controls.Add(dTCell);
        }
        dTable.Controls.Add(dTRow);
        dTable.Controls.Add(dtrow);
        dTable.Controls.Add(dtrow3);
        dTable.Controls.Add(dtrow4);
        Panel1.Controls.Add(dTable);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:55:30.080

尝试将您的代码移动到 Init() 方法中，而不是 page_load。[这个主题](https://stackoverflow.com/questions/4484854/how-to-add-control-to-the-page-programatically-in-page-load)也可以提供帮助。

# matlab - 将函数定义为 x,y 数据的插值

> ID：11559025
> 
> 赞同：3
> 
> 时间：2012-07-19T10:38:12.727
> 
> 标签：matlab, function, spatial-interpolation

我在 data.txt 中有 2 列 xy 数据，如下所示：

```
0  0
1  1
2  4
3  9
4  16
5  25 
```

现在我想定义一个函数 f(x)，其中 x 是第一列， f(x) 是第二列，然后能够像这样打印这个函数的值：

```
f(2) 
```

哪个应该给我4。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T10:42:15.927

假设您想要一些作为参考的数字之间的返回值，您可以使用线性插值：

```
 function y= linearLut(x)
         xl = [0 1 2 3 4 5];
         yl = [0 1 4 9 16 25];
         y = interp1(xl,yl,x);
    end 
```

该函数的更通用版本可能是：

```
 function y= linearLut(xl,yl,x)
         y = interp1(xl,yl,x);
    end 
```

然后您可以使用匿名函数创建特定实例：

```
 f = @(x)(linearLut([0 1 2 3 4],[0 1 4 9 16],x));
    f(4); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:45:31.513

您可以使用 导入文件`textread()`，然后使用`find`以选择正确的行。

在我的脑海中，未经测试：

```
function y = findinfile(x)
    m = textread(data.txt)
    ind = find(m(:,1)==x)
    y = m(ind,2)
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:52:30.540

如果您只需要在数组中找到正确的值（无需插值），您可以使用：

```
function out=ff(b)
  a = [0 1 2 3 4 5 ; 3 4 5 6 7 8]';
  [c,d]=find(a(:,1)==b);
  out = a(c,2); 
```

# ruby - 基于时间戳有条件地重新下载网站数据

> ID：11559026
> 
> 赞同：0
> 
> 时间：2012-07-19T10:38:14.150
> 
> 标签：ruby, mechanize

**如果我的本地data.csv**副本超过 1 小时，我会以简单的形式从网站上的帐户重新下载文件：

```
# Mission: make sure data*.csv is most current whenever called
def updateData  
  return if File.exists?("data.csv") && (Time.now - File::Stat.new("data.csv").mtime) < 3600

  $agent = Mechanize.new
  $agent.pluggable_parser.default = Mechanize::Download  

  $page = $agent.get("http://website.com/login.jsp")
# login etc.
  $agent.get("/getdata!downLoad.action").save("data.csv")
end 
```

但是他们提到我的数据更新每天只发布三次：16:45、18:45 和 22:45。

问题：只有当我的副本比上次更新时间（包括昨天的）更旧时，如何使我的代码更智能地获取更新？

一些数组`["16:45", "18:45", "22:45"]`可能会有所帮助，但我不确定 Ruby 的下一步是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:54:37.360

这样的事情可以做到：

```
require 'time'

current = Time.now.strftime("%H%M")
past = File::Stat.new("data.csv").mtime.strftime("%H%M")
if (current > '2245' and past < '2245') or (current > '1845' and past < '1845') or (current > '1645' and past < '1645') or (File::Stat.new("data.csv").mtime.day != Time.now.day and current > '1645')
    #update
end 
```

您还需要改变存储方式`mtime`。它需要采用`hhmm`. 创建 csv 时，您会这样设置`mtime`。`mtime = Time.now.hour.to_s + Time.now.min.to_s`

# freeswitch - Freeswitch 找不到我的软电话用户详细信息

> ID：11559029
> 
> 赞同：5
> 
> 时间：2012-07-19T10:38:26.803
> 
> 标签：freeswitch

我已经安装了 freeswitch，我正在关注这个

[http://www.onlinesolution.co.nz/viewtopic.php?t=102](http://www.onlinesolution.co.nz/viewtopic.php?t=102)

添加软电话用户。我已经连接了它，所以我可以测试拨打俄罗斯方块主题（9891）并且一切正常但是当我重新启动freeswitch时它现在说

2012-07-19 11:25:37.882544 [警告] sofia_reg.c:1989 找不到用户 [1000@MY_IP] 您必须在目录中定义一个名为“MY_IP”的域并添加一个 id="1000 " 属性，您必须将设备配置为在其身份验证凭据中使用正确的域。

我不知道我做了什么改变以使其表现不同。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T14:23:49.087

我遇到了同样的问题，并通过更改内部和外部 sip 配置文件中的 IP 地址来解决它。

```
/usr/local/freeswitch/conf/sip_profiles/internal.xml  
/usr/local/freeswitch/conf/sip_profiles/external.xml 
```

所以在 internal.xml 中我改为`$${local_ip_v4}`（`192.168.16.50`freeswitch 机器 LAN IP）。并且`external.xml`，`$${local_ip_v4}`到外部 IP 地址（连接到互联网）。

FreeSWITCH Wiki:
[Multi Home Tutorial](https://freeswitch.org/confluence/display/FREESWITCH/Multi+home+tutorial)中解释，[“设置 SIP 配置文件以使用不同的以太网端口”](https://freeswitch.org/confluence/display/FREESWITCH/Multi+home+tutorial#Multihometutorial-SETTINGTHESIPPROFILESTOUSEDIFFERENTETHERNETPORTS)

# html - 对于多重选择，HTML 属性“大小”的 css 等效项是什么？

> ID：11559031
> 
> 赞同：0
> 
> 时间：2012-07-19T10:38:34.650
> 
> 标签：html, css

> **可能重复：**
> [通过css选择标签的大小属性？](https://stackoverflow.com/questions/119961/select-tags-size-attribute-through-css)

有一个 HTML select 元素是多个：

```
<select id="users_interdits" name="users_interdits" multiple="multiple" size="20" class="selectmultiple"> 
```

如何在 css "selectmultiple" 中为这个 "size" 属性编写 css 等效项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:43:42.010

您可以在[CSS`height`](http://www.w3.org/TR/CSS21/visudet.html#the-height-property)属性中获得的最接近的值（可能使用[`em`units](http://www.w3.org/TR/CSS21/syndata.html#value-def-length)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:44:46.483

您应该在样式表文档中添加它。

```
select {
    height:20px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:49:51.890

正如 Quentin 所建议的，CSS 中没有 size 属性的“直接翻译”。即使在 CSS 通常与 select multiple 一起使用的场景中，仍然指定 size。可以在这里看到一个例子：

[http://www.456bereastreet.com/lab/styling-form-controls-revisited/select-multiple/](http://www.456bereastreet.com/lab/styling-form-controls-revisited/select-multiple/)

如果您打算使用高度而不是大小来使用 CSS 设置样式，则每个大小增量等于高度增加 10em。但是，这仅在 Chrome、Firefox 和 IE8+ 中经过测试。

# c++ - XML Parser - 数据绑定 C++ 生成器

> ID：11559034
> 
> 赞同：2
> 
> 时间：2012-07-19T10:38:38.873
> 
> 标签：c++, xml-parsing, c++builder

我对 C++ 有点困惑和陌生。基本上我有一个这样的 XML 文档：

```
<Program>
 <DOSCommands>
   <Command>ipconfig /all</Command>
 </DOSCommands>
 <DOSCommands>
  <Command>chkdsk</Command>
 </DOSCommands>

 <Copy>
  <File>lol.txt</File>
 </Copy>
 <Copy>
  <File>BestMan.txt</File>
 </Copy>
</program> 
```

显然，我真正的 XML 包含很多 Copy 和 Dos 标签。我已经从 XML 数据绑定中为此生成了代码。我似乎无法将这些正确加载到我的数据结构中。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T19:28:30.607

除非这是一项家庭作业，否则为什么不使用[tinyxml2](http://www.grinninglizard.com/tinyxml2/index.html)之类的库并且不要重新发明轮子呢？它有一个非常好的 c++ 接口。

# mongodb - 如何测试 txmongo 中的连接是否断开

> ID：11559037
> 
> 赞同：2
> 
> 时间：2012-07-19T10:38:48.410
> 
> 标签：mongodb, twisted, pymongo

如何测试查询是否成功，例如由于连接问题？我正在使用扭曲的[txmongo](https://github.com/fiorix/mongo-async-python-driver)驱动程序。

我的应用程序从 RabbitMQ 获取一些东西并将其放入 MongoDB。我需要能够测试是否存在一些问题，这样我就不会确认该消息并将其存储在队列中。

我查看了代码，但找不到合适的方法。我是使用扭曲的新手。有一个警告`RuntimeWarning("not connected")`，但它不是一个例外被抓住。也许可以测试`factory.size > 0`

# android - 如何通过 UPnP 获取控制点中远程设备的图标？

> ID：11559040
> 
> 赞同：0
> 
> 时间：2012-07-19T10:38:54.227
> 
> 标签：android, upnp

我使用 org.cybergarage.upnp.ControlPoint 在 android 平台中实现了一个 UPnP 控制点。我可以获取DMS和DMR设备，但是不知道如何获取远程设备的图标。我可以获取icon()的URL，但是如何获取带有URL的图标文件。URL是这样的：/img/icon-S5.png。我搜索了 org.cybergarage.upnp 实现的 upnp 堆栈，但我找不到相关的 API。请给我一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:15:47.013

您找不到特定的 UPnP API，因为它只是设备上下文中的标准 HTTP URL。您可以像使用任何其他普通网络服务器一样通过 HTTP 请求获取图像。因此，如果图标 URL 是`/img/icon-S5.png`并且设备正在侦听，例如`192.168.1.42:7564`，您必须对`http://192.168.1.42:7564/img/icon-S5.png`. 我不知道cybergarage API，但它也应该为您提供图像大小和MIME，这样您就无需在显示之前猜测或解析图像。

# javascript - 为收音机分配相同的名称，javascript中的复选框

> ID：11559041
> 
> 赞同：1
> 
> 时间：2012-07-19T10:39:00.590
> 
> 标签：javascript, jquery, html, nested-loops

我创建了一个嵌套的 ul li 树。我想要每个 li 节点之前的收音机或复选框控件。为此，我`class="single/multiple"`每里都有一个。现在我创建了一个 jquery 嵌套函数，它扫描所有 li 并附加一个单选或复选框控件。它工作正常。

**查询：**

```
var count = 0;
$(function(){
    AddCBRadNodes($("#tree").children("ul"));
});

function AddCBRadNodes(node) {
    count = count+1;
    $(node).children("li").each(function() {
        if($(this).hasClass("single")) {
            $(this).prepend("<span><input type='radio' name='rad_"+count+"' /></span>");
        }
        else if($(this).hasClass("multiple")) {
            $(this).prepend("<span><input type='checkbox' name='cb_"+count+"' /></span>");
        }

        //Nesting here
        if($(this).children("ul").children("li").size() > 0) {
            AddCBRadNodes($(this).children("ul"));
        }
    });
}​ 
```

小提琴在这里 - [http://jsfiddle.net/ashwyn/Y46Dw/1/](http://jsfiddle.net/ashwyn/Y46Dw/1/)

我无法做的是我需要每个 li 级别的唯一名称。例如。A1、A2、A3 应该与其他 li 名称相同但名称不同。如果您将分析 firebug 中的控件，那么您将了解我当前的 jquery 分配`rad_1`给`P1`、`rad_6`和。这是我迫切需要帮助的逻辑问题。提前致谢。`P2``P3`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:27:17.593

将`count`变量向上移出递归函数的范围

`count`并在递归调用之前递增

[http://jsfiddle.net/Y46Dw/10/](http://jsfiddle.net/Y46Dw/10/)

**编辑...**

保持同名同级——

如果你把`count`它作为参数传递给函数怎么办？

像这样....

[http://jsfiddle.net/Y46Dw/13/](http://jsfiddle.net/Y46Dw/13/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:55:44.413

始终注意你在做什么和什么时候做。
移动

```
var count = 0; 
```

到代码的第一行和

```
count = count+1; 
```

里面

```
 $(node).children("li").each(function() { 
```

您需要在做任何其他事情之前设置初始值，并在每次使用它时增加它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:52:53.253

简化的 jquery 只显示收音机。

这是工作小提琴。

[http://jsfiddle.net/ashwyn/Y46Dw/14/](http://jsfiddle.net/ashwyn/Y46Dw/14/)

如果有以前的 li 兄弟，那么我复制了名称，否则我增加了计数。

# c# - 如何将字符串的值转换为类型

> ID：11559042
> 
> 赞同：2
> 
> 时间：2012-07-19T10:39:02.933
> 
> 标签：c#, type-conversion

由于 WCF 不支持类型，我将类型作为字符串类型传递。例如：

```
var str= "int" 
```

现在我想将其转换为 Type **int**，因为我想将 CLR 类型作为参数传递。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:42:29.887

你的意思是喜欢使用[Type.GetType()](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)？

```
string typeName = "System.Int32"; // Sadly this won't work with just "int"
Type actualType = Type.GetType(typeName); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:51:40.787

如果该类型在当前执行的程序集中或在 Mscorlib.dll 中，则获得由其命名空间限定的类型名称就足够了（请参阅[@Rawling 答案](https://stackoverflow.com/a/11559091/63011)）：

```
var str = typeof(int).FullName;
// str == "System.Int32" 
```

否则，您需要一个程序集限定名称`Type`：

```
var str = typeof(int).AssemblyQualifiedName;
// str == "System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" 
```

然后你可以使用[`Type.GetType`](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)：

```
var intType = Type.GetType(str); 
```

* * *

**编辑：**

如果要使用系统别名，可以创建一个`Dictionary<string, Type>`将所有别名映射到它们的类型：

```
static readonly Dictionary<string, Type> Aliases =
    new Dictionary<string, Type>()
{
    { "byte", typeof(byte) },
    { "sbyte", typeof(sbyte) },
    { "short", typeof(short) },
    { "ushort", typeof(ushort) },
    { "int", typeof(int) },
    { "uint", typeof(uint) },
    { "long", typeof(long) },
    { "ulong", typeof(ulong) },
    { "float", typeof(float) },
    { "double", typeof(double) },
    { "decimal", typeof(decimal) },
    { "object", typeof(object) }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:41:49.637

试试这个

```
 int myInt = 0;
    int.TryParse(str, out myInt);

    if(myInt > 0)
    {
     // do your stuff here
    } 
```

* * *

如果你的意思是你只想发送类型然后使用

`string str = myInt.GetType().ToString();` 它会给你类型

# c++ - 在 *.idl 文件中包含 class.h 文件会产生错误

> ID：11559043
> 
> 赞同：1
> 
> 时间：2012-07-19T10:39:05.680
> 
> 标签：c++, compiler-errors, corba, idl, omniorb

我在 Corba 中有一些简单的界面：

```
#ifndef __INTERFFACE_IDL__
#define __INTERFFACE_IDL__

import User.h;

interface Interfface {  void fun(in User u); };

#endif 
```

而且我还有简单的 C++ 类 User.h 和私有字段：名字、姓氏、年龄和 getter 和 setter。我使用omniORB，并尝试将我的界面翻译成C++文件：

```
    omn​​iidl -bcxx interface.idl

```

但它给了我这些错误：

```
omniidl -bcxx interface.idl
interface.idl:4: Syntax error in definition
interface.idl:4: Syntax error in abstract valuetype
interface.idl:8: Error in look-up of 'User': 'User' not found
omniidl: 3 errors. 
```

User.h 与 interface.idl 位于同一文件夹中。怎么了？

这段代码：

```
#ifndef __INTERFFACE_IDL__
#define __INTERFFACE_IDL__

**import test/User.h;**

interface Interfface {  void fun(in User u); };

#endif 
```

给出相同的错误...

**编辑：**

我的 User.h 文件：

```
#include <string>
using std::string;

class User
{
    private :
            string firstName;
            string lastName;
            int age;
    public :
            string getFirstName();
            string getLastName();
            int getAge();
            void setFirstName(string);
            void setLastName(string);
            void setAge(int);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T23:14:33.327

`import`不是有效的 IDL。也许你的意思是`#include`？但是你的`User.h`文件是 C++ 的。它需要在 IDL 中。

# objective-c - 如何播放音频先完成音频文件然后再开始播放？

> ID：11559044
> 
> 赞同：0
> 
> 时间：2012-07-19T10:39:11.800
> 
> 标签：objective-c, ios, cocoa-touch, avaudioplayer

我是 iPhone 的初学者。我已经拍摄了两个音频文件，但是如何先播放完成然后接下来只播放一种方法...

这是我的代码是....

```
-(IBAction)onclicksound
{
   path=[[NSBundle mainBundle]pathForResource:@"Animalfile" ofType:@"plist"];
        dict=[[NSDictionary alloc]initWithContentsOfFile:path];
        NSError *error;
        animalaudio=[dict valueForKey:@"Animalsound"];

        NSLog(@"animalaudio:%@",animalaudio);
        NSLog(@"currentsound=%d",currentsound);
        selectanimalaudio=[animalaudio objectAtIndex:currentsound];

        NSString *soundpath=[[NSBundle mainBundle]pathForResource:selectanimalaudio ofType:@""];
        NSLog(@"selectaudio:%@",selectanimalaudio);
        AVAudioPlayer *audioplayer=[[AVAudioPlayer alloc]initWithContentsOfURL:[NSURL fileURLWithPath:soundpath]  error:&error];
            if (error)
            {
                NSLog(@"Error in audioPlayer: %@", 
                  [error localizedDescription]);
            } 
            else 
            {

                self.audiosound=audioplayer;
                [audioplayer release];
                //audiosound.numberOfLoops=currentsound;
                //[self.audiosound setDelegate:self];
                [audiosound play];
                NSLog(@"audioplayer:%@",audiosound);
            }

        NSError *err;
        animalsecaudio=[dict valueForKey:@"Birdsound"];
        NSLog(@"animalaudio:%@",animalsecaudio);
       // NSLog(@"currentsound=%d",currentsound);
        selectanimalsecaudio=[animalsecaudio objectAtIndex:currentsound];
          NSLog(@"selectanimalsecaudio:%@",selectanimalsecaudio);
         NSString *soundsecpath=[[NSBundle mainBundle]pathForResource:selectanimalsecaudio ofType:@""];
        AVAudioPlayer *audioplayerr=[[AVAudioPlayer alloc]initWithContentsOfURL:[NSURL fileURLWithPath:soundsecpath]  error:&err];
        if (err)
        {
            NSLog(@"Error in audioPlayer: %@", 
                  [err localizedDescription]);
        } 
        else 
        {

            self.animalsecsound=audioplayerr;
            [audioplayerr release];
            //audiosound.numberOfLoops=currentsound;
            [animalsecsound play];
            [animalsecsound prepareToPlay];
           // [self.animalsecsound setDelegate:self];
            NSLog(@"audioplayer:%@",animalsecsound);
        }
} 
```

所以，第二个avaudioplayer如何在完成avaudioplayer后播放任何建议和源代码..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:42:03.180

您可以调用`AVAudioPlayer`的委托方法`audioPlayerDidFinishPlaying:`

例如：

```
- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)sender successfully:(BOOL)success
{
    if (success) 
        {
            //code to play next sound
        }
} 
```

# api - LinkedIn Groups API：检索对问题的评论？

> ID：11559049
> 
> 赞同：1
> 
> 时间：2012-07-19T10:39:53.553
> 
> 标签：api, linkedin

我可以从这个页面理解：[https](https://developer.linkedin.com/documents/groups-api) ://developer.linkedin.com/documents/groups-api 只能从具有经过身份验证的组成员的 Groups API 中检索信息。

我需要定期检索对发布到组的特定问题的评论，不一定是我自己的用户。

所以我在想是否有可能以编程方式对用户（即组成员）进行身份验证，并通过该用户检索我需要的组信息。

你们中的任何人有没有这方面的经验或知道没有通过基于 web 的linkedin 登录对用户进行身份验证的任何其他方式？

亲切的问候，大卫

# jquery - 如何使用静态项目预先添加 kendo ui 下拉列表远程数据

> ID：11559052
> 
> 赞同：4
> 
> 时间：2012-07-19T10:40:12.013
> 
> 标签：jquery, drop-down-menu, kendo-ui

可能是标题不像我希望的那样清晰。我一直在将 kendo ui 用于联系人管理系统，我需要为特定用户预先加载（通过 ajax）组，方法是使用 value = 的“所有联系人” `-1`。这是一个删除实际上是一个组但在数据库中没有说明的所有联系人的选项。所以在下拉列表完成加载时，我们应该有如下选项（从 ajax 调用加载第 1 组、第 2 组、第 3 组，手动添加所有联系人）：

```
all contacts
group 1
group 2 
group 3 
```

下面是我的代码，它工作正常，为用户加载组。

```
$("#groupCombo").kendoDropDownList({
                placeholder: "all contacts",
                dataTextField: "NAME",
                dataValueField: "GROUP_ID",
                dataSource : {
                    transport:{
                       read: {
                            url: crudServiceBaseUrl+"subscribers/readgroups", 
                            dataType: "json",
                            data: {
                              userId: dataItem.USER_ACCOUNT_ID
                            }
                        } 
                    }
                }
            }); 
```

我怎样才能做到这一点？感谢您阅读本文。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T12:58:06.883

数据源有一个插入函数，它将一个新的模型实例插入数据源。

```
// insert a new model item at the very front of the collection
$("#groupCombo").data('kendoDropDownList').dataSource.insert(0, { GROUP_ID: -1, NAME: "all contacts" }); 
```

# javascript - XSS 漏洞

> ID：11559053
> 
> 赞同：0
> 
> 时间：2012-07-19T10:40:15.373
> 
> 标签：javascript, android, jquery-mobile, xss

测试我的移动应用程序时出现以下错误。我该如何解决这个 XSS 错误？

q 请求参数的值作为标签之间的纯文本复制到 HTML 文档中。有效载荷`2906f<script>alert(1)</script>b08ffac3085`在 q 参数中提交。此输入在应用程序的响应中未经修改地回显。

这种概念验证攻击表明可以将任意 JavaScript 注入应用程序的响应中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:41:59.843

在将其放入 HTML 文档之前，您将其编码为 HTML。

使用 JavaScript（因为这是您提到的唯一语言），这通常意味着使用`createTextNode`而不是`innerHTML`.

# php - PHP 脚本 - 意外'}

> ID：11559054
> 
> 赞同：-2
> 
> 时间：2012-07-19T10:40:19.733
> 
> 标签：php

该脚本正在显示我请求的数据（Id、Dsc、School），但我在第 20 行出现错误。

```
{
  if ($row['suspended']==1){ 
```

解析错误：语法错误，第 20 行 C:\wamp\www\unit5\scripts\meminclude.php 中的意外 '}'

```
 <?php
 include("dbconnect1.php");

$query = "SELECT id,dsc, school FROM module WHERE dsc LIKE '%%%s%%'";

$link = @ mysql_query($query);
  if (!$link) {

header("location:../account/account.master.php?page=invalid&errorcode=1");
   die();
 }

$i=0;
 $status="";

while ($row = mysql_fetch_array($link, MYSQL_ASSOC))

{
  if ($row['suspended']==1){

$status="SUS";
  }
   echo "

<tr id='row$i' class='trows'>".
         "
<td id='id$i'>".$row['id']."</td>".
         "
<td id='dsc$i'>".$row['dsc']."</td>".
         "
<td id='school$i'>".$row['school']."</td>".
         "
</td>".
         "
<td><input type='radio' name='whome' id='showMe$i' onclick='showMem($i)' /></td>
";
         if ($status=='SUS'){
          echo "
<td><input type='radio' name='suspend' checked='checked' disabled='disabled' /></td>
";
         } else {
          echo "
<td><input type='radio' name='suspend' id='suspend$i' onclick='suspendMem($i)' /></td>
";
         }
         echo "
<td><input type='radio' name='delete' id='delete$i' onclick='deleteMe($i)' /></td>
".
         "
<td id='status$i'>".$status."</td></tr>";
  $i++;
  $status="";
 }
?> 
```

此处引用了该脚本：

```
 <script type="text/javascript">
     $(document).ready(function() {
           var numrecs=$(".trows").length;
           var me= $('#th1').html()+" - "+(numrecs)+" Records in Table.";
           $('#th1').html(me);
           RiVm=numrecs;
      });
     </script>
     <link rel="stylesheet" href="../css/results.css" type="text/css" /> 
     <div id="appleft">
         <form id="myapprovelist" method="post"> 
         <fieldset style="border:none">
         <table id="myTable"> 
          <tr><th id="th1" colspan="10">Active Membership List</th></tr>
          <tr class="red"> 
           <th>ID</th>
           <th>DSC</th>
           <th>School</th>
           </tr>
          <?php include("../scripts/meminclude.php")?>  
         </table> 
        </fieldset>
       </form>
      </div>
      <div id="appright">
       <img id="theBroon" src="" alt="" /><br />
       <span id="myBroon"></span>
      </div>
    </div>
    <div style="clear:both">    
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:50:59.957

我检查并清理了格式、缩进并更改了整个引用堆。

尝试这个：

```
<?php
    include("dbconnect1.php");
    $query = "SELECT id,dsc, school FROM module WHERE dsc LIKE '%%%s%%'";
    $link = @ mysql_query($query);
    if (!$link) 
    {
        header("location:../account/account.master.php?page=invalid&errorcode=1");
        die();
    }

    $i=0;
    $status="";
    while ($row = mysql_fetch_array($link, MYSQL_ASSOC))
    {
        if ($row['suspended']==1)
        {
            $status="SUS";
        }
        echo "<tr id='row".$i."' class='trows'><td id='id".$i."'>".$row['id']."</td><td id='dsc".$i."'>".$row['dsc']."</td><td id='school".$i."'>".$row['school']."</td></td><td><input type='radio' name='whome' id='showMe".$i."' onclick='showMem(".$i.")' /></td>";
        if ($status=='SUS')
        {
            echo "<td><input type='radio' name='suspend' checked='checked' disabled='disabled' /></td>";
        }
        else
        {
            echo "<td><input type='radio' name='suspend' id='suspend".$i."' onclick='suspendMem(".$i.")' /></td>";
        }
        echo "<td><input type='radio' name='delete' id='delete".$i."' onclick='deleteMe(".$i.")' /></td><td id='status".$i."'>".$status."</td></tr>";
        $i++;
        $status="";
    }
?> 
```

和数据库连接：

```
<?php 
    $hostname = "localhost";
    $username = "root";
    $password = "";
    $dbase = "timetable";
    $link = @ mysql_connect($hostname, $username, $password);
    if (!$link) 
    {
        header("location:../account/account.master.php?page=invalid&errorcode=1");
        die($link);
    }
    $db_selected = @ mysql_select_db($dbase, $link);
    if (!$db_selected) 
    {
        header("location:../account/account.master.php?page=invalid&errorcode=1");
        die();
    }
?> 
```

# c# - 创建具有 while 语句属性的 do 语句

> ID：11559057
> 
> 赞同：-6
> 
> 时间：2012-07-19T10:40:52.493
> 
> 标签：c#

已解决。试图创建一个 do 语句，在检查 while 之前不会做任何事情。只需在 do 语句之前放置一个 if 语句即可解决。

使用 do 语句和您可能需要的任何其他内容，编写等效于：

```
while (b) {
    s;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:44:10.403

是语言的标准部分：

```
do
{
s;
} while (b); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:45:09.220

如果我正确理解了您的问题，您有一个使用 do..while 循环的代码，并且您想用“常规”while 循环替换它。

这不像您在示例中所说的那么简单。不同之处在于 do..while 将始终至少运行一次，并在完成后检查条件。While 循环可能根本不会运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T10:47:01.587

我想你可能正在寻找

```
if(b)
{
    do
    {
        s;
    }
    while(b);
} 
```

# javascript - javascript中的数组操作

> ID：11559059
> 
> 赞同：1
> 
> 时间：2012-07-19T10:41:01.167
> 
> 标签：javascript

我有以下数组...

```
var arr = [1,2,3,4,5,6,7,8,9] 
```

我需要将其转换为以下...

```
var newArr = [
    [1,4,7],
    [2,5,8],
    [3,6,9],
]; 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T10:47:44.210

当然有可能；像这样的东西应该工作。

```
function manipulate(array, amount) {
    // The array to return
    var ret = [];

    // Add the first few values to the array
    // ret = [[1],[2],[3]];
    for (var i=0;i<amount;i++) {
        ret.push([array.shift()]);
    }

    // Now push the last few values on there.
    for (var i=0;array.length;i = ++i % amount) {
        ret[i].push(array.shift());
    }

    return ret;
} 
```

然后像这样称呼它；

```
manipulate(arr, 3); 
```

# css - 使用 CSS 创建负条形图

> ID：11559061
> 
> 赞同：1
> 
> 时间：2012-07-19T10:41:04.337
> 
> 标签：css, charts, data-visualization

我已经问过一个非常相似的问题，但那是使用 javascript/php - 我没有太多运气找到理想的解决方案，所以想尝试只使用类似于下面的 CSS 来模拟图表

如您所见，图表行有一个次要元素，该元素以不同的颜色覆盖并带有黑色边框。这是我想要实现的风格 - 任何人都可以建议如何最好地做到这一点？

任何人都可以通过创建另一个图表覆盖在另一个图表上来建议解决此问题的最佳方法吗？

![负条形图](../Images/108f45ad7cd615c05635231f2e2c54cd.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T12:16:41.020

我尝试用纯 CSS 制作图表[http://dabblet.com/gist/3142994](http://dabblet.com/gist/3142994)

...第二个版本的 HTML 更少，CSS 更简洁：http: [//dabblet.com/gist/3143479](http://dabblet.com/gist/3143479)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-19T10:52:16.127

在这种情况下，我建议使用现有的可视化 API，而不是重新发明轮子。谷歌提供了一个相当广泛的：

[https://developers.google.com/chart/interactive/docs/gallery](https://developers.google.com/chart/interactive/docs/gallery)

如果您喜欢冒险并且这不是您所追求的，请使用`float: right;`将左栏对齐到右侧。

# python - 在python中连接字符串和整数

> ID：11559062
> 
> 赞同：149
> 
> 时间：2012-07-19T10:41:07.440
> 
> 标签：python, concatenation, string-concatenation

在 python 中说你有

```
s = "string"
i = 0
print s+i 
```

会给你错误所以你写

```
print s+str(i) 
```

不出错。

我认为这是处理 int 和 string 连接的一种非常笨拙的方法。甚至 Java 也不需要显式转换为 String 来执行这种连接。有没有更好的方法来进行这种连接，即无需在 Python 中显式转换？

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2012-07-19T10:43:47.410

现代字符串格式：

```
"{} and {}".format("string", 1) 
```

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2012-07-19T10:44:18.277

没有字符串格式：

```
>> print 'Foo',0
Foo 0 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-07-19T10:42:49.873

字符串格式化，使用新式`.format()`方法（使用[.format()](http://docs.python.org/library/stdtypes.html#str.format)提供的默认值）：

```
 '{}{}'.format(s, i) 
```

或较旧但“仍然存在”的 -`%`格式：

```
 '%s%d' %(s, i) 
```

在上面的两个示例中，连接的两个项目之间*没有空格。*如果需要空间，可以简单地添加到格式字符串中。

这些为如何连接项目、它们之间的空间等提供了*很多*控制和灵活性。有关[格式规范的详细信息，请参阅此](http://docs.python.org/library/string.html#formatspec)。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-07-10T07:49:46.470

Python 是一种有趣的语言，虽然通常有一种（或两种）“显而易见”的方式来完成任何给定的任务，但灵活性仍然存在。

```
s = "string"
i = 0

print (s + repr(i)) 
```

上面的代码片段是用 Python3 语法编写的，但 print 后面的括号始终是允许的（可选），直到版本 3 强制它们。

希望这可以帮助。

凯特琳

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-01-10T18:36:15.170

format() 方法可用于连接字符串和整数

```
print(s+"{}".format(i)) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-06-29T18:00:59.373

在 python 3.6 及更高版本中，您可以像这样格式化它：

```
new_string = f'{s} {i}'
print(new_string) 
```

要不就：

```
print(f'{s} {i}') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-27T12:00:03.947

如果你只想打印你可以这样做：

```
print(s , i) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-23T15:11:38.177

假设您想在这样的情况下连接字符串和整数：

```
for i in range(1,11):
   string="string"+i 
```

并且您收到类型或连接错误

最好的方法是做这样的事情：

```
for i in range(1,11):
   print("string",i) 
```

这将为您提供连接的结果，如字符串 1、字符串 2、字符串 3 ...等

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-20T12:41:42.607

您也可以使用**f 字符串**！

```
s = "string"
i = 95
print(f"{s}{i}") 
```

# php - 根据文件是否存在重写

> ID：11559065
> 
> 赞同：1
> 
> 时间：2012-07-19T10:41:17.253
> 
> 标签：php, apache, .htaccess, mod-rewrite, url-rewriting

我正在我的数据库驱动网站上实现缓存。我将缓存文件保存到 /cache/ 作为 id.html

我有像[http://www.example.com/view/article/id/12338.html这样的网址](http://www.example.com/view/article/id/12338.html)

现在我需要检查这个 12338.html 文件是否存在于缓存中。如果存在，它应该是服务器，否则它应该重写为 /viewArticle.php?id=12338

所以这就是我需要的：

1）在这种情况下提取 id 号，例如 12338。

2）检查 /cache/id.html 是否存在，例如 /cache/12338.html 在这种情况下并提供它并退出。

3）或服务/viewArticle.php?id=12338

我需要什么重写条件和规则？特别是用于从请求文件名中提取 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:06:04.970

将此 .htaccess 文件放在您的服务器文档根目录中

```
<ifModule mod_rewrite.c>
  RewriteEngine on

  RewriteRule view/article/id/(.*).html$ /cache/$1.html [NC]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^cache(.*)\.html$ /viewArticle.php?id=$1  [NC]
</IfModule> 
```

# javascript - JavaScript 函数可以引用原型链上的原型吗？

> ID：11559066
> 
> 赞同：1
> 
> 时间：2012-07-19T10:41:21.467
> 
> 标签：javascript, function, constructor, prototypal-inheritance

```
Constructor1=function(){};
Constructor1.prototype.function1=function this_function()
{
  // Suppose this function was called by the lines after this code block
  // this_function - this function
  // this - the object that this function was called from, i.e. object1
  // ??? - the prototype that this function is in, i.e. Constructor1.prototype
}
Constructor2=function(){};
Constructor2.prototype=Object.create(Constructor1.prototype);
Constructor2.prototype.constructor=Constructor2;
object1=new Constructor2();
object1.function1(); 
```

如何在不知道构造函数名称的情况下检索最后一个引用（由???表示）？

例如，假设我有一个从原型链继承的对象。当我在其上调用方法时，我可以知道使用的是哪个原型吗？

两者在理论上似乎都是可能的，但是如果没有超过恒定数量的赋值语句（如果我有很多这样的功能），我找不到任何可行的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:46:27.113

每个函数的原型都有一个通过[`constructor`属性*^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/constructor)对该函数的引用。所以你可以通过

```
var Constr = this.constructor; 
```

获得原型有点棘手。在支持 ECMAScript 5 的浏览器中，您可以使用[`Object.getPrototypeOf` *^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/GetPrototypeOf)：

```
var proto = Object.getPrototypeOf(this); 
```

在较旧的浏览器中，*可能*可以通过**非标准** [`__proto__` *^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/Proto)属性获取它：

```
var proto = this.__proto__; 
```

* * *

> 当我在其上调用方法时，我可以知道使用的是哪个原型吗？

是的，如果浏览器支持 ES5。然后您必须反复调用`Object.getPrototypeOf()`，直到找到具有该属性的对象。例如：

```
function get_prototype_containing(object, property) {
    do {
        if(object.hasOwnProperty(property)) {
            break;
        }
        object = Object.getPrototypeOf(object);
    }
    while(object.constructor !== window.Object);

    // `object` is the prototype that contains `property`
    return object;
}

// somewhere else
var proto = get_prototype_containing(this, 'function1'); 
```

# methods - Cocos2d：麻烦安排在特定时间间隔多次调用方法

> ID：11559071
> 
> 赞同：0
> 
> 时间：2012-07-19T10:41:34.883
> 
> 标签：methods, time, cocos2d-iphone, scheduled-tasks, call

**我运行以下代码，期望在方法“ displayWarningMessage** ”上以不同的时间间隔（例如，1秒后，2.6秒后等）安排三个后续调用，但没有工作（它仅在第一次显示消息） .

我在调度程序中找不到可以多次显示并具有特定延迟的方法签名。有人有什么建议吗？

```
[self scheduleOnce:@selector(displayWarningMessage)  delay:0.7f];
[self scheduleOnce:@selector(displayWarningMessage)  delay:1.7f];
[self scheduleOnce:@selector(displayWarningMessage)  delay:3.7f]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:04:47.413

这里的问题是，当您调用第一个计划时，它已成功计划。但是下一个立即调用是发出警告

```
CCScheduler#scheduleSelector. Selector already scheduled. Updating interval from: X.2 to X.2 
```

您可以在日志中看到这一点。

您可以做的是在调用选择器时，在方法结束时您可以再次安排下一次，直到完成。您可以使用一个计数器来跟踪它被调用的次数，将所有间隔放入一个数组中，然后在计数器标识的特定索引处为间隔安排下一个选择器。像这样：

```
NSArray *intervals = [NSArray arrayWithObjects:[NSNumber numberWithFloat:0.7],[NSNumber numberWithFloat:1.7],[NSNumber numberWithFloat:3.7], nil];

int counter = 0;

//schedule it for the first time with object at index counter/index 0
[self scheduleOnce:@selector(displayWarningMessage)  delay:[(NSNumber *)[intervals objectAtIndex:counter]] floatValue]; 
```

现在在您的选择器中，执行以下操作：

```
-(void)displayWarningMessage
{
    //do all your stuff here

    //increment counter
    counter ++;

    if(counter < [intervals count])
    {
        //schedule it for the next time with object at index counter/index 
        [self scheduleOnce:@selector(displayWarningMessage)  delay:[(NSNumber *)[intervals objectAtIndex:counter]] floatValue];
    }
} 
```

`intervals`当然应该是类`counter`ivars。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T01:36:35.163

尝试这个：

```
- (void)displayWarningMessage {
    //Stuff
}

- (void)callStuff {
    CCCallFunc *call = [CCCallFunc actionWithTarget:self selector:@selector(displayWarningMessage)];
    CCDelayTime *delay1 = [CCDelayTime actionWithDuration:0.7f];
    CCDelayTime *delay2 = [CCDelayTime actionWithDuration:1.7f];
    CCDelayTime *delay3 = [CCDelayTime actionWithDuration:3.7f];
    CCSequence *actionToRun = [CCSequence actions:delay1, call, delay2, call, delay3, call, nil];
    [self runAction:actionToRun];
} 
```

这应该适用于你想要做的事情，至少这是我想象的那样。我相当确定您可以在一个 CCSequence 中多次调用 CCCallFunc，而无需单独创建三次。当然，如果需要，您也可以根据需要使这些延迟可变。让我知道事情的后续。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-01-08T12:54:39.803

方法被创建。

```
[self schedule: @selector(displayWarningMessage:) interval:3.2f];

-(void) displayWarningMessage:(ccTime) delta
{

    CCLOG(@"alert........!!!!!!");

} 
```

在未检测到警告消息中使用调用方法。

# c# - XamlParseException - 使用 WPF C#/Kinect 处理图像像素

> ID：11559072
> 
> 赞同：1
> 
> 时间：2012-07-19T10:41:39.250
> 
> 标签：c#, image, kinect, pixels

我想使用此代码访问要与我的 Kinect 代码一起使用的图像像素。所以我可以用图像位替换深度**位****，**所以我创建了一个 WPF 应用程序，一旦我运行我的代码，我就会得到这个异常（它不会发生在控制台应用程序上）但我需要它作为**WPF 应用程序**运行，因为 . . 我打算将它与**Kinect一起使用**

 ********XamlParseException**

> '对匹配指定绑定约束的'pixelManipulation.MainWindow'类型的构造函数的调用引发了异常。行号“3”和行位置“9”。

这是代码：

```
public partial class MainWindow : Window
    {

           System.Drawing.Bitmap b = new
                System.Drawing.Bitmap(@"autumn_scene.jpg");

        public MainWindow()
        {
            InitializeComponent();

            doSomethingWithBitmapFast(b);

        }

        public static void doSomethingWithBitmapFast(System.Drawing.Bitmap bmp)
        {
            Rectangle rect = new Rectangle(0, 0, bmp.Width, bmp.Height);

            System.Drawing.Imaging.BitmapData bmpData =
                bmp.LockBits(rect,
                    System.Drawing.Imaging.ImageLockMode.ReadOnly,
                    bmp.PixelFormat);

            IntPtr ptr = bmpData.Scan0;

            int bytes = bmpData.Stride * bmp.Height;
            byte[] rgbValues = new byte[bytes];

            System.Runtime.InteropServices.Marshal.Copy(ptr,
                           rgbValues, 0, bytes);

            byte red = 0;
            byte green = 0;
            byte blue = 0;

            for (int x = 0; x < bmp.Width; x++)
            {
                for (int y = 0; y < bmp.Height; y++)
                {
                    //See the link above for an explanation 
                    //of this calculation (assumes 24bppRgb format)
                    int position = (y * bmpData.Stride) + (x * 3);
                    blue = rgbValues[position];
                    green = rgbValues[position + 1];
                    red = rgbValues[position + 2];
                    Console.WriteLine("Fast: " + red + " "
                                       + green + " " + blue);
                }
            }
            bmp.UnlockBits(bmpData);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:50:30.993

问题出在您的 xaml 文件中，而不是在您的代码中。由于异常状态**xaml 解析异常**。我的猜测是您在 xaml 中声明了一些事件处理程序/属性来绑定到不再存在的东西。发布 xaml 文件内容以获得更多帮助。

**编辑**

所以这不是它看起来的样子。Xaml 文件可以，但代码不行。线上构造函数抛出异常

```
System.Drawing.Bitmap b = new
            System.Drawing.Bitmap(@"autumn_scene.jpg"); 
```

我不确定为什么对位图构造函数的调用无效，但将其更改为：

```
System.Drawing.Bitmap b = new Bitmap(
            System.Drawing.Image.FromFile(@"autumn_scene.jpg")); 
```

应该可以正常工作。******

# asp.net - UpdatePanel + Timer 从我的 DropDownList 获得焦点

> ID：11559074
> 
> 赞同：1
> 
> 时间：2012-07-19T10:41:45.940
> 
> 标签：asp.net, ajax, timer, updatepanel

我使用计时器和更新面板在我的页面中显示时钟（只是一个例子）。

在我的 aspx 中使用此代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default3.aspx.cs" Inherits="Default3" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title></title>

    <script type="text/javascript">

    </script>

    <script runat="server">
        protected void btnClick(object sender, EventArgs e)
        {
            for (int i = 0; i < 100000000; i++)
            {
                txt.Text = "Denis Storti";
            }

        }
        protected void TimerTick(object sender, EventArgs e)
        {
            DropDownList1.Focus();
            ScriptManager1.SetFocus(DropDownList1);
            for (int i = 0; i < 100000000; i++)
            {
                txt.Text = "Timer Tick";
                //upnBusca.Update();

            }
        }
    </script>

</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server" />
    <script type="text/javascript">
        function Cancel() {
            Sys.WebForms.PageRequestManager.getInstance().abortPostBack();
        }

        var prm = Sys.WebForms.PageRequestManager.getInstance();
        prm.add_initializeRequest(InitializeRequest);
        prm.add_endRequest(EndRequest);
        var postBackElement;
        function InitializeRequest(sender, args) {
            postBackElement = args.get_postBackElement();
            if (postBackElement.id == 'Timer1') {
                $get('UpdateProgress1').style.display = "block";
            }
        }
        function EndRequest(sender, args) {
            if (postBackElement.id == 'Timer1') {
                $get('UpdateProgress1').style.display = "none";
            }
        }
    </script>

    <div style="padding-left: 20%; padding-top: 10%">
        <p>
       <asp:Timer ID="Timer1" runat="server" Interval="1000" OnTick="TimerTick">
            </asp:Timer>
            <asp:UpdatePanel ID="upnBusca" UpdateMode="Conditional" ChildrenAsTriggers="false"
                runat="server">
                <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="btnBusca" EventName="Click" />
                </Triggers>
                <ContentTemplate>
                    <asp:TextBox ID="txt" runat="server">
                    </asp:TextBox>
                    <asp:Button ID="btnBusca" runat="server" OnClick="btnClick" Text="Busca Nome" />
                    <%=DateTime.Now.ToString() %>
                    &nbsp;
                    <asp:UpdatePanel ID="upnDate" UpdateMode="Conditional" ChildrenAsTriggers="false"
                        runat="server">
                        <ContentTemplate>
                            <%=DateTime.Now.ToString() %>
                            <br />
                                 <asp:DropDownList ID="DropDownList1" runat="server" 
                        Width="110px">
                        <asp:ListItem>1</asp:ListItem>
                        <asp:ListItem>2</asp:ListItem>
                        <asp:ListItem>3</asp:ListItem>
                        <asp:ListItem>4</asp:ListItem>
                        <asp:ListItem>5</asp:ListItem>
                        <asp:ListItem>6</asp:ListItem>
                        <asp:ListItem></asp:ListItem>
                    </asp:DropDownList>
                        </ContentTemplate>
                        <Triggers>
                            <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />
                            <asp:AsyncPostBackTrigger ControlID="DropDownList1" />
                        </Triggers>
                    </asp:UpdatePanel>
                </ContentTemplate>
            </asp:UpdatePanel>
            <asp:UpdateProgress DisplayAfter="0" ID="UpdateProgress1" runat="server" DynamicLayout="False">
                <ProgressTemplate>
                    <span style="font-size: large">Processing...</span>
                    <asp:LinkButton ID="LinkButton1" runat="server" OnClientClick="Cancel(); return false;"
                        Text="Cancel" />
                </ProgressTemplate>
            </asp:UpdateProgress>
        </p>
    </div>
    </form>
</body>
</html> 
```

我选择了一个下拉列表，这个 ajax 代码导致下拉列表不集中并关闭。

我怎样才能保持对这个下拉列表的关注。

任何帮助，将不胜感激。谢谢

# android - 如何以excel格式将用户输入的数据从android应用程序存储到服务器数据库？

> ID：11559079
> 
> 赞同：0
> 
> 时间：2012-07-19T10:41:55.507
> 
> 标签：android

我正在尝试开发一个 android 应用程序，其中用户应该填写一些参数以将它们存储到服务器数据库中，我只想将该参数（数据）存储在 Excel 工作表中而不是 MySql 数据库中

# .htaccess - htaccess 重写子文件夹

> ID：11559082
> 
> 赞同：0
> 
> 时间：2012-07-19T10:42:00.887
> 
> 标签：.htaccess, mod-rewrite

我想重写两个虚拟子文件夹/content/view/和/content/section/。我现在有这个：

```
RewriteCond %{REQUEST_URI}  ^htaccesstst/content/(view|section)+
RewriteRule ^$ http://www\.google\.nl [L,R=301] 
```

这会重写 /content、/content/、/content/view/、/content/section/，这是正确的。但是它也重写了 /content/ （之后什么都没有）。我不要这个！帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:59:58.747

您可以将其替换为：

```
RewriteRule ^htaccesstst/content/(view|section)/?$ http://www.google.nl [L,R=301] 
```

# javascript - 如何通过javascript将数组作为参数传递给plsql过程

> ID：11559083
> 
> 赞同：0
> 
> 时间：2012-07-19T10:42:00.013
> 
> 标签：javascript, plsql

我正在从 window.opener.location.href 调用一个 plsql 过程，我想将一个数组作为参数传递给这个过程。

```
window.opener.location.href="dt_bulk_test_pkg.pc_bulk_test?ps="+frmresult.ps.value+
                            "&p_step="+frmresult.p_step.value+
                            "&p_year="+frmresult.p_year.value+
                            "&p_quarter="+frmresult.p_quarter.value+
                            "&p_diagnostic_type="+frmresult.p_diagnostic_type.value+
                            "&p_overwrite="+frmresult.p_overwrite.value+
                            "&p_company_id="+v_comp_id; 
```

`v_comp_id`是一个数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:53:16.367

PL/SQL 是一种数据库技术，Javascript 是一种浏览器内技术（除非你正在使用 node 或 Rhino 做服务器端 JS，但你不是）。浏览器只能与 Web 服务器通信。因此，从 javascript 的角度来看，您不是在调用存储过程，而是在调用一个 Web 服务器，您必须在某个地方运行该服务器来调用该存储过程。

如何精确地表示数组取决于服务器端语言/网络框架，但一个相当标准的方法是 jQuery 的[$.param](http://api.jquery.com/jQuery.param/)方法。例如，在这个站点上打开控制台我可以这样做：

```
> $.param({example: [1,2,3]})
"example%5B%5D=1&example%5B%5D=2&example%5B%5D=3" 
```

警告的话。

*   直接通过 HTTP 公开数据库存储过程不仅是糟糕的设计，而且可能是一个非常糟糕的安全风险。
*   在 url 中嵌入参数意味着您正在使用 HTTP GET 请求。GET 请求适用于不影响服务器状态的资源，因此请注意您的存储过程只获取数据，而不是更改它。危险在于有人可以将该 URL 放在电子邮件中，甚至是网页上的 img src 标签，而人们只需单击链接或访问网页即可点击该 URL。
*   所有参数都应该通过 url 编码。就像我提到的，jQuery.param 会做到这一点。
*   您也可能将自己暴露在[XSS 攻击](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-13T14:20:19.757

我知道这是一个旧线程，但我来到这里，所以我猜其他人会。

很可能通过 URL 将数组传递给 PL/SQL，并且它是明确支持的，而不是狡猾的 hack。[链接到 Oracle 文档](http://docs.oracle.com/cd/E14571_01/portal.1111/e12041/concept.htm)

您将 PL/SQL 输入参数声明为 varchar2 的表。然后在 URL 中重复传递相同的参数名称。

**1/ PL/SQL 源示例：**

```
CREATE OR REPLACE PROCEDURE test_array(
    p IN dbms_sql.varchar2_table )
AS
BEGIN
  FOR i IN p.FIRST .. p.LAST
  LOOP
    htp.p(p(i)||'<br>');
  END LOOP;
END test_array; 
```

* **2/ 调用它的示例 URL： - 用您自己的设置替换 XXXXXXXXXXXXXXX ***

```
http://XXXXXXXXXXXXXX/test_array?p=first ele&p=second ele 
```

**3/ 输出**

```
first ele
second ele 
```

你可以传入任意数量的元素，我在这个例子中只使用了 2 个。

如果您的数据类型不是 varchar2，无论如何从 URL 中将它们捕获为 varchar2，并将它们转换为 pl/sql 中的数字等。

# excel - 将数据复制到另一个工作簿中的不同范围

> ID：11559089
> 
> 赞同：0
> 
> 时间：2012-07-19T10:42:22.873
> 
> 标签：excel, vba

下面的代码将所有工作表内容从源工作簿复制到目标工作簿。工作表名称完全相同。该代码以完全相同的顺序/范围（“A2：A700”，＆_“D2：D700，”＆_“C2：C700”）将数据从源复制到目标工作簿中。但是，我希望上述范围内的源数据进入目标工作簿上的不同范围（I3、k3 和 AC3）。任何帮助表示赞赏。

```
Option Explicit

    Sub seunweb()
    'this macro copies from one workbook to another

    Dim wbSource As Workbook, wbDestination As Workbook
    Dim ws As Worksheet, rng As Range
    Dim NextRow As Long, LastRow As Long

    Application.ScreenUpdating = False

        Set wbSource = Workbooks.Open("D:\test.xls")
        Set wbDestination = ThisWorkbook
    For Each ws In wbSource.Sheets

    For Each rng In ws.Range("A2:A700," & _
                                     "D2:D700," & _
                                     "C2:C700").Areas
                wbDestination.Sheets(ws.Name).Range(rng.Address).Value = rng.Value

            Next rng

        Next ws

        wbSource.Close SaveChanges:=False

        Application.ScreenUpdating = True

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:07:36.143

而不是你的 for 循环，使用类似的东西

```
Set rng = ws.Range("A2:A700")
wbDestination.Sheets(ws.Name).Range("I3").Resize(rng.Rows.Count, rng.Columns.Count).Value = rng.Value

Set rng = ws.Range("D2:D700")
wbDestination.Sheets(ws.Name).Range("K3").Resize(rng.Rows.Count, rng.Columns.Count).Value = rng.Value

' continue this this for each source range 
```

# c# - 在 AWS EC2 实例上使用 Visual Studio 调试 WCF 应用程序

> ID：11559090
> 
> 赞同：0
> 
> 时间：2012-07-19T10:42:29.097
> 
> 标签：c#, wcf, visual-studio, amazon-ec2, remote-debugging

### 本地调试正常

我想将 Visual Studio 调试器附加到我的 WCF 应用程序（w3wp.exe 工作进程）。我可以在本地安装了 Visual Studio 的开发服务器上成功地做到这一点。

### 如何在 EC2 上调试？

*现在我需要偶尔在作为 Amazon Web Services EC2 实例的生产服务器上执行此操作。*

*   关于远程调试 MSDN 说：[不支持通过 Internet 进行调试。](http://msdn.microsoft.com/en-us/library/bt727f1t(v=vs.110).aspx)- 那么有没有办法将调试器远程附加到在 EC2 实例上运行的 WCF 应用程序？
*   我知道的唯一解决方案是我必须在 EC2 实例（时间和磁盘空间）上安装 Visual Studio 并将源代码放在那里，然后使用本地调试？希望有一个替代和更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:05:18.367

这不是最佳实践，但您可以拥有一个安装了 Visual Studio 的 EC2 实例或 EBS 快照。通过 RDP'ing 到该服务器中进行本地有效调试，然后当您完成后，您可以切换回干净的生产服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-15T16:02:53.283

如果安装 VS 有问题，您可以设置 VPN 客户端和远程工具（比 VS 安装小得多）。

这个想法是在您的机器和 EC2 实例之间设置一个 VPN，安装远程工具（实际上您可能甚至不需要这样做，只需运行 msvsmon.exe）并使用 VPN 连接。

更多信息：

[我的博文](https://keyoti.com/blog/remote-debug-net-applications-over-the-internet-with-visual-studio/)

[互联网上的远程调试器](https://stackoverflow.com/questions/6458454/remote-debugger-over-internet/)

# c# - 正则表达式验证器每次都会触发

> ID：11559092
> 
> 赞同：1
> 
> 时间：2012-07-19T10:42:31.123
> 
> 标签：c#, asp.net, regex, asp.net-mvc-3

如何编写正则表达式（使用 C#）来检查是否没有字符“<”和“>”？

我在控制台上写了代码进行测试：

```
Regex reg = new Regex(@"^(?!(.*<+.*)|(.*>+.*))");
string[] array = { "any text", "$baks> fgg", "att <br /> dfsdf", "<<script />> sdfsdf", "@##%%^^&&" };
foreach (var str in array)
{
    if (reg.IsMatch(str))
         Console.WriteLine("OK:\t\t{0}", str);
    else
         Console.WriteLine("XSS ATTACK:\t{0}", str);
} 
```

结果是：

```
OK:             any text
XSS ATTACK:     $baks> fgg
XSS ATTACK:     att <br /> dfsdf
XSS ATTACK:     <<script />> sdfsdf
OK:             @##%%^^&& 
```

但是如果我使用这个表达式来验证属性，比如

```
[RegularExpression(@"^(?!(.*<+.*)|(.*>+.*))")] 
```

它会触发任何单词。为什么？如何写出正确的表达方式？

这只是对客户端的简单验证。使用 AntiXSS 在服务器端实现全面验证。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:23:58.730

客户端 RegularExpressionValidator 使用 Javascript 来执行验证。Javascript 正则表达式不理解“高级”功能，例如`(?! ... )`。

尝试将其作为整个表达式：`[^<>]*`，表示除`<`and之外的所有内容`>`。

Also note that the RegexValidator acts as if the expression is always 'anchored' with `^` and `$`.

# r - R中字符串中的平均数字

> ID：11559093
> 
> 赞同：0
> 
> 时间：2012-07-19T10:42:35.130
> 
> 标签：r, character, mean

我在数据框中有一列看起来像这样：

`[1] [0.50 .. 0.52] [0.52 .. 0.54] [0.54 .. 0.56] [0.56 .. 0.58]
[5] [0.58 .. 0.60] [0.60 .. 0.62] [0.62 .. 0.64] [0.64 .. 0.66]
[9] [0.66 .. 0.68] [0.68 .. 0.70] [0.70 .. 0.72] [0.72 .. 0.74]
[13] [0.74 .. 0.76] [0.76 .. 0.78] [0.78 .. 0.80] [0.80 .. 0.82]`

我想取这列中两个数字的平均值。但是，我不知道该怎么做。我尝试使用 gsub() 替换“ .. ”，但我无法删除括号，而且我似乎找不到仅提取数字的方法。获得这些数字的平均值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T11:02:21.797

您可以使用 R 中的正则表达式的**基本**函数（gsub、regexp、...）或**stringr**包（**str_extract**）。

```
require(stringr)

string <- c("[0.50 .. 0.52]", "[0.52 .. 0.54]", "[0.54 .. 0.56]", "[0.56 .. 0.58]")

number <- as.numeric(str_extract(string, "\\d\\.\\d+"))
number
[1] 0.50 0.52 0.54 0.56 
```

**然后，您可以使用zoo中的****rollmean**函数计算 1 和 2、3 和 4 之间的平均值

 **```
require(zoo)
average <- rollmean(number, 2)
average[as.logical(seq_along(average) %%2 )]
[1] 0.51 0.55 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T11:09:27.813

用于`gsub`取出括号（记住为它们进行双重转义），然后用于`strsplit`分隔数字，并使用and`sapply`处理结果列表：`mean``as.numeric`

```
x <- c("[0.52 .. 0.54]", "[0.54 .. 0.56]")

sapply(strsplit(gsub("[\\[\\]]","",x,perl=T)," .. "),function(x) mean(as.numeric(x)))
[1] 0.53 0.55 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T11:10:02.927

用于`gsub`将特殊字符替换为空格。然后`strsplit`采取`mean`：

首先复制数据：

```
x <- scan(what="character", quote='"', sep=" ", text='"[0.50 .. 0.52]" "[0.52 .. 0.54]" "[0.54 .. 0.56]" "[0.56 .. 0.58]" "[0.58 .. 0.60]" "[0.60 .. 0.62]" "[0.62 .. 0.64]" "[0.64 .. 0.66]" "[0.66 .. 0.68]" "[0.68 .. 0.70]" "[0.70 .. 0.72]" "[0.72 .. 0.74]" "[0.74 .. 0.76]" "[0.76 .. 0.78]" "[0.78 .. 0.80]" "[0.80 .. 0.82]"') 
```

然后`gsub`使用`sapply`and `mean`：

```
xx <- gsub("\\[|\\.\\.|\\]", "", x)
sapply(strsplit(xx, "  "), function(x)mean(as.numeric(x))) 
```

结果：

```
 [1] 0.51 0.53 0.55 0.57 0.59 0.61 0.63 0.65 0.67 0.69 0.71 0.73 0.75 0.77 ... 
```

* * *

正则表达式的工作方式如下：

*   括号`[ ]`表示替换括号内的任何文本
*   您想替换括号`[`，`]`但由于这些在正则表达式中有意义，您需要转义这些，即`\\[`和`\\]`
*   最后，`|`与逻辑相同的意思`OR`，即找到我的括号或双句点

`?regexp`您可以在或处阅读更多关于 R 中正则表达式的信息`?gsub`。**

# r - 如何设置 ggplot2 stat_smooth() 取值的范围以适合线条？

> ID：11559094
> 
> 赞同：5
> 
> 时间：2012-07-19T10:42:38.753
> 
> 标签：r, ggplot2

我想`stat_smooth`只使用指定范围内的数据来拟合一条线，换句话说，我想`stat_smooth`在 x(0,99)、x(100,199) 和 x(199,299) 之间拟合一条线。

我设法得到相当接近使用`facet_grid`如下：

```
ggplot(avtimes3, aes(x=trial, y=ttime, colour=factor(id))) +
facet_grid(. ~ brk, scales = "free") +
geom_vline(xintercept = short_bks, colour="red") +
geom_vline(xintercept = long_bks, colour="green") +
geom_point() + 
geom_point(shape=21, fill="white")+
opts(title=titl) +
ylab("Time taken (ms)") +
xlab("Trial No.")+
stat_smooth(method="loess") 
```

但它在每个网格上绘制了大量空白空间。我一直无法找到删除它的方法。

我从另一篇文章中获得的另一个部分解决方案包括为范围创建一个组，但这似乎不尊重传递给`qqplot`.

```
ggplot(avtimes3, aes(x=trial, y=ttime, colour=factor(id))) +
geom_vline(xintercept = short_bks, colour="red") +
geom_vline(xintercept = long_bks, colour="green") +
geom_point() + 
geom_point(shape=21, fill="white")+
opts(title=titl) +
ylab("Time taken (ms)") +
xlab("Trial No.")+
stat_smooth(method="loess", aes(group=brk)) 
```

关于如何使它工作的任何帮助？谢谢！

数据：

```
> dput(avtimes3)
structure(list(trial = c(0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 
6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 14, 14, 
15, 15, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 
23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 30, 30, 
31, 31, 32, 32, 33, 33, 34, 34, 35, 35, 36, 36, 37, 37, 38, 38, 
39, 39, 40, 40, 41, 41, 42, 42, 43, 43, 44, 44, 45, 45, 46, 46, 
47, 47, 48, 48, 49, 49, 50, 50, 51, 51, 52, 52, 53, 53, 54, 54, 
55, 55, 56, 56, 57, 57, 58, 58, 59, 59, 60, 60, 61, 61, 62, 62, 
63, 63, 64, 64, 65, 65, 66, 66, 67, 67, 68, 68, 69, 69, 70, 70, 
71, 71, 72, 72, 73, 73, 74, 74, 75, 75, 76, 76, 77, 77, 78, 78, 
79, 79, 80, 80, 81, 81, 82, 82, 83, 83, 84, 84, 85, 85, 86, 86, 
87, 87, 88, 88, 89, 89, 90, 90, 91, 91, 92, 92, 93, 93, 94, 94, 
95, 95, 96, 96, 97, 97, 98, 98, 99, 99, 100, 100, 101, 101, 102, 
102, 103, 103, 104, 104, 105, 105, 106, 106, 107, 107, 108, 108, 
109, 109, 110, 110, 111, 111, 112, 112, 113, 113, 114, 114, 115, 
115, 116, 116, 117, 117, 118, 118, 119, 119, 120, 120, 121, 121, 
122, 122, 123, 123, 124, 124, 125, 125, 126, 126, 127, 127, 128, 
128, 129, 129, 130, 130, 131, 131, 132, 132, 133, 133, 134, 134, 
135, 135, 136, 136, 137, 137, 138, 138, 139, 139, 140, 140, 141, 
141, 142, 142, 143, 143, 144, 144, 145, 145, 146, 146, 147, 147, 
148, 148, 149, 149, 150, 150, 151, 151, 152, 152, 153, 153, 154, 
154, 155, 155, 156, 156, 157, 157, 158, 158, 159, 159, 160, 160, 
161, 161, 162, 162, 163, 163, 164, 164, 165, 165, 166, 166, 167, 
167, 168, 168, 169, 169, 170, 170, 171, 171, 172, 172, 173, 173, 
174, 174, 175, 175, 176, 176, 177, 177, 178, 178, 179, 179, 180, 
180, 181, 181, 182, 182, 183, 183, 184, 184, 185, 185, 186, 186, 
187, 187, 188, 188, 189, 189, 190, 190, 191, 191, 192, 192, 193, 
193, 194, 194, 195, 195, 196, 196, 197, 197, 198, 198, 199, 199, 
200, 200, 201, 201, 202, 202, 203, 203, 204, 204, 205, 205, 206, 
206, 207, 207, 208, 208, 209, 209, 210, 210, 211, 211, 212, 212, 
213, 213, 214, 214, 215, 215, 216, 216, 217, 217, 218, 218, 219, 
219, 220, 220, 221, 221, 222, 222, 223, 223, 224, 224, 225, 225, 
226, 226, 227, 227, 228, 228, 229, 229, 230, 230, 231, 231, 232, 
232, 233, 233, 234, 234, 235, 235, 236, 236, 237, 237, 238, 238, 
239, 239, 240, 240, 241, 241, 242, 242, 243, 243, 244, 244, 245, 
245, 246, 246, 247, 247, 248, 248, 249, 249, 250, 250, 251, 251, 
252, 252, 253, 253, 254, 254, 255, 255, 256, 256, 257, 257, 258, 
258, 259, 259, 260, 260, 261, 261, 262, 262, 263, 263, 264, 264, 
265, 265, 266, 266, 267, 267, 268, 268, 269, 269, 270, 270, 271, 
271, 272, 272, 273, 273, 274, 274, 275, 275, 276, 276, 277, 277, 
278, 278, 279, 279, 280, 280, 281, 281, 282, 282, 283, 283, 284, 
284, 285, 285, 286, 286, 287, 287, 288, 288, 289, 289, 290, 290, 
291, 291, 292, 292, 293, 293, 294, 294, 295, 295, 296, 296, 297, 
297, 298, 298, 299, 299), id = c(1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 2, 1.5, 
2), ttime = c(2564, 2050.5, 2204.75, 2060.625, 2266.125, 1880.125, 
2224.25, 2067, 2215.375, 2199.25, 2333.375, 2434.625, 2278.875, 
2102, 2104.5, 2049, 2336.125, 2159.5, 2110.625, 2082.875, 2197.5, 
2136.5, 2107.375, 2025, 2342, 2289.875, 2106.25, 2146.75, 2187.25, 
2104.875, 2151.375, 2246.375, 2143.75, 2091.625, 2129.625, 2163.875, 
2132.5, 2265.25, 1959, 2054.25, 2205.5, 2033, 1992.875, 1965.625, 
1983.875, 1973.75, 1953.625, 1936.375, 2012.25, 2106.75, 2115, 
2195.375, 2210.875, 2097.625, 2016.25, 2084.375, 2005.25, 2250.875, 
2352.875, 2217.625, 2141.75, 2154.375, 2181.625, 2083.5, 2103.5, 
1959.5, 2020.75, 2255.25, 2039.125, 2144.125, 2216.125, 2216.125, 
2014.125, 2234.625, 1975.625, 2289, 2035.5, 2058.25, 2039.5, 
2222.5, 2013.125, 2156.375, 1896.375, 1990.875, 2014.125, 2030.625, 
1928.875, 2021, 2013, 2001.5, 1940.625, 2029.375, 2075.5, 2179.375, 
1991, 2292.25, 2020.375, 2065.375, 2007.375, 2192.5, 1954.25, 
2128.5, 1949.875, 2240.25, 2119.375, 2011.625, 1984.875, 2182, 
1955.375, 2010.5, 1924.5, 2043.25, 2033, 2183.375, 2075.75, 2011.375, 
1969.625, 2002.375, 1921.5, 2111.875, 1951, 2103, 1780.375, 1935.75, 
1930.75, 2044.375, 1892.25, 2128.75, 1973.875, 1992.625, 1920.625, 
2093, 2047.875, 2285.625, 1968, 2208.375, 2021.25, 2079.375, 
1988.75, 2147.875, 1989, 2026.25, 1873.25, 2084.75, 2010.25, 
2163.25, 1960.125, 1987.125, 2043.75, 2154.875, 2188.25, 2402.625, 
2101.625, 2019.625, 2447.5, 1996.125, 2009.875, 2037.625, 2195.5, 
2123.875, 1986.625, 2093, 1793.125, 1858.125, 1862.625, 1895.5, 
1806, 1951.5, 1784.625, 2041.625, 1868.625, 2095.25, 1946.125, 
1930.75, 2010.5, 2179.375, 1903.875, 2049.25, 1958.125, 2053.75, 
2016.75, 2057.875, 1898.875, 2196.875, 1939.75, 2265.875, 2090.875, 
2187.875, 2082.75, 2089.125, 1904, 2303.25, 1982.125, 2094.375, 
2205.625, 2259.25, 2018.5, 1882.25, 1978.125, 1901.625, 1834.5, 
2019.375, 1802.125, 1929.875, 1700.75, 2019, 1691.125, 1959.375, 
1774.375, 2138.375, 1751.25, 2036.125, 1808.5, 2138, 1848, 2109.75, 
1823.125, 2001, 1923, 2057.125, 1827.5, 1877.375, 1823.125, 1860.25, 
1742.875, 2047.625, 2018.125, 2016.125, 1799, 2095.25, 1735.25, 
1951, 1776.625, 2057.125, 1726.125, 2068.5, 1806, 2107.875, 1774.375, 
1956, 1920.75, 1943.25, 1714.125, 1756.125, 1789.25, 1941.125, 
1734.125, 2195.375, 1788.375, 2005.375, 1832.5, 1861, 1830.25, 
2263.625, 1903.75, 2090.375, 2015.875, 2019.25, 1807.375, 2143.375, 
1882.5, 1901.75, 1897.125, 1866.75, 1943.125, 1943.875, 1818.75, 
2089.5, 1818, 1992.875, 1910.25, 1855.125, 1825.5, 1850.25, 1881.125, 
1953.625, 1840.25, 2119.25, 1745.25, 2045.5, 1767.625, 2019.875, 
1759.5, 1876.125, 1667.875, 1948, 1767.125, 2046.25, 1721, 1984.5, 
1842.875, 2300.125, 1726.625, 2252.875, 1718.75, 1983.625, 1842.375, 
2165.125, 1932, 2154.375, 1746.125, 1936.75, 1920.625, 2056.25, 
1854.375, 2022.125, 1973.625, 2064.25, 1883.5, 2077.375, 2117.25, 
2089, 1759, 2082.875, 1910.75, 1955.75, 1847.375, 1998.25, 1796.375, 
2028.5, 1804.5, 1920.625, 1793.25, 1841.125, 1778.625, 1929.25, 
1742.25, 1988.875, 1805.375, 1982.75, 1797.125, 1963.75, 1682.875, 
2028.25, 1664.375, 2109.5, 1747.625, 1992, 1767.125, 2064.125, 
1740.125, 2083.875, 1952.375, 2007.125, 1763.125, 2050, 1780.25, 
2181.25, 1810.5, 1990.25, 1706.875, 2029, 1715.125, 2211.375, 
1876.375, 2003.625, 1773.5, 1986.75, 1824, 2198.375, 1777.375, 
2075, 1761.25, 1873, 1725.125, 1917.75, 1773.875, 1860.25, 1788, 
1908.625, 1955.375, 1943.875, 1828.5, 1860.5, 1836.25, 2134.5, 
1829.75, 1949.375, 1762, 2058.75, 1736.75, 1908.625, 1816.375, 
2113.625, 1868.125, 2042.625, 1796.375, 2280.5, 1773, 1968.125, 
1885.75, 2136.375, 1784.5, 2103.875, 1785.875, 2296.875, 1782.625, 
1969.125, 1864.75, 2062.5, 1800.75, 2289.75, 1639.5, 2081.75, 
1735.125, 1947.375, 1617.875, 1871.125, 1676.375, 1998, 1685, 
1929.625, 1762.625, 2073.625, 1698.75, 1834.5, 1669, 1858.875, 
1705.625, 2164.625, 1750.125, 1835.875, 1836.25, 1992, 1741.625, 
1874.375, 1810.375, 2140.875, 1819.5, 2277.625, 1779.5, 2054.875, 
1703.375, 1978.125, 1754.625, 1964.875, 1749.875, 1959.625, 1932.875, 
1952.125, 1709.625, 2038.125, 1680.5, 1893, 1664.5, 1961.125, 
1700.25, 1871, 1753, 1889.75, 1724, 1878.875, 1827.375, 1849.25, 
1850.75, 1977.125, 1783.625, 1977.25, 1895.125, 2097.5, 1716.375, 
1985.5, 1675.375, 1845.25, 1764.5, 2089.375, 1766.75, 1848.125, 
1730.125, 1991.5, 1865.375, 2030.875, 1864.625, 1960.875, 1739.25, 
2204.375, 1758.125, 2175.375, 1871.5, 1994.25, 1739.25, 2028.875, 
1646.125, 1958.375, 1709.25, 1914.5, 1638.375, 1965.375, 1691.5, 
2154.375, 1833.75, 1892.375, 1891.625, 1999.25, 1752.75, 1952.5, 
1702.625, 1907.75, 1671.25, 1947.375, 1734.875, 2125.375, 1745.25, 
2145.25, 1756.125, 2095.25, 1707.5, 1939.375, 1738.25, 2102.875, 
1862.375, 2152.875, 1719, 2091.25, 1969.25, 2088.125, 1702.875, 
2231.625, 2007.5, 2087, 1732.625, 1866.625, 1675.875, 1971.625, 
1663.875, 2016.5, 1834, 1927.75, 1777.25, 1995, 2029.125, 2009.5, 
1778.5, 1868, 1711.5, 1820.375, 1706.625, 1911.375, 1850, 2001.625, 
1753.375, 2105.625, 1812.125, 2028.125, 1820.5, 2205.75, 1812.625, 
2238, 1812.125, 2236.25, 1713.375, 2482, 1844.25, 1951.25, 1995.125, 
2108.5, 1873.125, 1977, 1849, 2064.25, 1709.75, 1962, 1844, 1828.5, 
1735.75, 1974.125, 1675, 2147, 1789.75, 2099.875, 1790.5, 2083, 
1713.5, 2250.125, 1930.25, 2321.75, 1742.5, 2189.875, 1840, 2070, 
1823.125, 2027.25, 1782.875, 2344, 1788.875, 2106.25, 1824.75, 
2251.625, 1902.5, 1961.375, 1873.5, 2158.75, 1855.125, 1933.75, 
1825.75, 2001.875, 1887.75, 2002.75, 1945.375, 2230.875), se = c(259.899705930686, 
137.567905310172, 228.087917729734, 172.114158284968, 234.074502600897, 
109.939827292024, 271.704918063696, 195.301781134443, 227.085803284951, 
169.989784356926, 257.363066052332, 353.735067201228, 231.204411529526, 
151.548082893092, 230.22527787241, 188.563933833745, 289.179037319443, 
130.584537478874, 250.616449800715, 90.5208021672367, 192.562883977454, 
178.968373103821, 225.736567192507, 157.087555204096, 222.259179466547, 
189.375330032716, 195.44269803266, 156.734278090568, 222.104443738912, 
155.254449844211, 229.124571350234, 234.785535687055, 214.213407443538, 
136.267454648675, 218.906693878922, 219.006069509826, 181.324098154185, 
198.187568984535, 160.006249877934, 152.706271505603, 280.670689090054, 
147.26276321111, 197.418648480474, 131.188242273133, 184.134989060821, 
117.833531184585, 177.697770857873, 95.0770246957697, 179.782482660098, 
149.204886697071, 143.619164061466, 171.956798717003, 225.56939362264, 
150.268680500248, 233.734415064864, 134.100833264163, 177.509833731623, 
179.588959004802, 302.633231433458, 256.399655776179, 261.114900132927, 
194.266379848099, 233.925960318034, 180.624314136117, 204.312523215923, 
147.377552080169, 190.48347791119, 143.664757334567, 184.82012853235, 
203.166050796949, 199.973965939498, 181.057847652148, 226.143478278409, 
219.701090567226, 192.715458040753, 161.770339856053, 161.292214850651, 
121.259130731316, 209.589053694537, 141.678080772675, 203.257616049542, 
158.180608516702, 146.132393189483, 151.949173539331, 171.350459324492, 
194.983967976491, 127.888265615509, 167.346091336829, 133.506152881217, 
141.716391833428, 110.950912167112, 128.343141825231, 135.5180536207, 
175.427125437561, 133.723194910767, 194.496120967562, 173.14114158892, 
142.659927487414, 199.71273454461, 219.278280469622, 135.405970273523, 
223.876480612477, 155.919786783828, 219.316531687487, 142.123178151409, 
132.259071725048, 131.867823095163, 192.080526268096, 97.3238220544472, 
154.800909004345, 143.230957348114, 172.257049409969, 113.881987789365, 
301.963629402852, 147.572228078321, 145.94690050788, 116.268306930258, 
103.901556687775, 123.388903182464, 217.304134920557, 106.773123959169, 
137.984730004032, 172.231876249516, 166.958479654588, 130.019607037884, 
182.871142914114, 142.971994010815, 203.262387603525, 68.1171358501557, 
215.99462108878, 142.521168540476, 236.726032125143, 124.067728839073, 
132.166282913933, 131.916369611313, 236.530271205249, 124.9966785273, 
159.275585240084, 89.4242995898925, 208.220816639794, 86.0348766489497, 
106.74431232757, 117.217708011326, 186.83259791283, 92.4279159283446, 
153.374745313562, 121.694646774505, 171.894115820093, 107.795731097559, 
127.720179284358, 272.201064734981, 364.814039590231, 155.784528103495, 
143.156624703255, 489.334059134015, 173.340544006382, 83.3367603462002, 
166.637431215627, 219.917679403648, 209.582530411224, 228.411747375843, 
189.848059548381, 139.321242034884, 107.117331780889, 112.04876768303, 
153.452994198782, 110.70181957467, 212.323287868826, 88.1538706507791, 
223.663885064493, 109.954525908928, 174.492810944831, 91.7725132947146, 
157.710715054042, 91.0863013065866, 274.394589277923, 98.7716409379303, 
171.341946119448, 134.708208136274, 186.973140737227, 120.51344767879, 
161.766303826141, 86.3732426945488, 199.796095834514, 104.603801829297, 
242.194169263011, 161.9110687891, 212.630332930518, 146.398032529715, 
205.110722494322, 115.358911972281, 240.223909687846, 120.004380500404, 
183.283731791138, 236.191503528992, 204.437359424767, 129.357340064534, 
146.524589598957, 121.586893898385, 142.473924619309, 127.924224222221, 
188.175823699539, 152.876518506651, 145.462002586341, 87.0048746581806, 
133.546273414338, 98.8791537866877, 174.15909572859, 106.353174695714, 
186.087147163058, 126.108053158506, 209.25995773371, 98.74281167327, 
160.608886073325, 96.4942633379977, 180.464554295692, 109.188473603477, 
150.810548134311, 167.763332448678, 179.1967631145, 107.239551605606, 
88.4372128970605, 102.662838856827, 97.9408987239608, 106.765670897264, 
250.209122357108, 133.851255063757, 171.96443127868, 79.5145988392787, 
134.235367651642, 91.3258979854956, 180.483774498271, 100.323216494773, 
155.563886451378, 109.931543227722, 157.58716408932, 101.749692874229, 
194.113501177238, 76.3331367615477, 161.404881321123, 150.197697100474, 
146.905551533727, 100.562780231342, 141.682925362535, 145.424839448326, 
138.486517845601, 108.039251713043, 131.377990315295, 112.028525943172, 
96.5617747314418, 125.319448952325, 154.683432486205, 95.5564063038909, 
200.194721057489, 93.4435945217373, 122.469812242504, 203.591190300212, 
211.888510947216, 101.610414521769, 196.474547379189, 103.015775490941, 
119.9206210672, 145.295442547246, 128.463967988804, 150.725085301969, 
165.399455593766, 104.018499384896, 215.797110400355, 121.178587217379, 
119.188841385065, 143.195265035445, 174.310318264787, 134.187901306872, 
127.609721696384, 138.859697626777, 122.751482024804, 115.77236747786, 
181.758252907537, 103.840494096887, 162.714583594359, 124.458819566382, 
205.661861654721, 129.944493644677, 188.241243156222, 100.24442227091, 
158.948217084325, 111.493984062562, 148.115875246376, 115.076216979382, 
139.682931772538, 136.821630169147, 191.964509136083, 79.2329155762571, 
165.804471495365, 81.7984784175633, 230.305537547407, 124.336946798953, 
170.654667750402, 154.3081332918, 162.600182030736, 81.7580134779285, 
245.344491771992, 129.797636108235, 219.264496995882, 75.4214202000996, 
235.570692870072, 162.076253823845, 207.486811112693, 67.3856173717465, 
167.51779622945, 132.19219638736, 189.748047232564, 104.87049837095, 
158.695737351611, 122.825187912391, 148.869519810374, 78.1129990782584, 
197.096672255738, 78.5845626197847, 133.345550035559, 103.367582649771, 
175.46753235489, 104.227215735623, 124.734781135816, 156.960975302325, 
160.870483619588, 113.155984312427, 166.304737229581, 79.420431317856, 
206.602599036342, 114.308392002262, 208.96263763786, 94.5465564644515, 
168.996380984074, 108.669048277656, 137.826236357855, 109.913104882903, 
151.036892371178, 120.993718476268, 173.60406898416, 89.1802823939078, 
119.126199214471, 112.281523969886, 173.941845526026, 109.368550830274, 
183.11822878754, 122.79741592209, 194.953634597709, 113.22401941032, 
205.555584244957, 113.743200346218, 159.083199256597, 92.3830220757967, 
192.970014093604, 106.811405473787, 128.241393125287, 95.926683312979, 
236.008152855544, 137.267595801569, 215.379145553337, 126.974538716007, 
158.024523413298, 116.186080737509, 152.477633020153, 99.9564972339753, 
192.186456152798, 119.916702860777, 201.098123703686, 97.9207040707648, 
159.467074243736, 175.587985423263, 175.71460601742, 74.9249624624531, 
183.511385400003, 104.460476121012, 195.090363677963, 99.0178104469811, 
190.719121962489, 105.451241271567, 249.549934167207, 101.510511419121, 
163.787529777802, 122.226799945838, 260.121464587769, 81.4819080488774, 
207.000080874725, 100.300074330552, 318.607292984415, 92.1772361114329, 
164.345502513542, 89.5695559726789, 220.035868626328, 121.088220495873, 
215.86027536845, 110.382361022946, 266.694209422113, 97.2656409566826, 
199.965929017563, 114.208416940259, 155.021887855508, 84.6120875356639, 
199.733013760155, 111.110948412579, 199.452800539018, 123.88609940183, 
133.35290685942, 111.102500534416, 187.941616836947, 98.1187213641864, 
234.046011959798, 123.069956877031, 120.168919427731, 127.988132471614, 
232.385450852365, 98.7424047712025, 146.951765653127, 105.750717660517, 
145.651300506675, 79.970069735942, 258.883932728549, 87.6153194163473, 
115.796841416953, 106.095938726634, 166.706649965912, 101.298698606081, 
146.769977649674, 108.152494439895, 195.816006705639, 174.924881837074, 
249.006880104317, 86.1696831009276, 159.538333671611, 80.2393601090779, 
174.212353742289, 63.3733093603744, 186.199723559331, 107.657764218047, 
160.516124857554, 126.626480741589, 168.920145705005, 109.61880989202, 
105.320503617021, 129.726085051763, 115.527671391502, 106.433077565201, 
190.60022087193, 77.0231296429845, 112.304592197165, 119.858845552353, 
206.728492576271, 107.217902289816, 139.122047844433, 119.25886272846, 
122.684227359743, 103.792504202237, 210.152362882267, 120.954970591184, 
104.686393917398, 214.792876769027, 191.32610530565, 79.7480267333126, 
222.855494499398, 91.1213746094421, 140.845628513733, 111.331069979845, 
177.763178886566, 99.5254364471716, 140.033980251223, 91.6609508499355, 
130.849559200087, 135.593791669404, 217.92957885355, 135.812625320434, 
250.986371108359, 85.4232633921898, 196.743119093691, 78.9173250714225, 
225.198796106589, 134.913331968554, 156.164833932428, 107.713865336429, 
166.808641166629, 97.9876882754738, 152.573043104419, 95.9305459322376, 
171.318833924186, 111.86454460322, 182.048554894802, 97.4309279145268, 
152.878913044185, 133.997168147049, 205.307168608753, 211.624746856654, 
175.627827887756, 100.98775562272, 214.86931244031, 81.6376877034831, 
119.379609110721, 92.9686487094286, 209.254282896944, 93.4634071823987, 
161.94630255339, 119.06507074465, 223.306623758199, 95.2261288985329, 
196.493161458612, 131.601943103327, 154.470748213283, 96.1410329374805, 
199.033866240683, 123.609976698023, 240.952161634687, 120.094010793925, 
249.304657999003, 98.3497312800454, 210.566280496529, 93.4448724993971, 
208.160904238936, 144.170162357839, 238.586686851671, 117.022424209453, 
141.61642579013, 106.825030089261, 227.534764808432, 76.6747391583434, 
202.614782284018, 145.926106545157, 164.683001768332, 104.052141805374, 
186.763888372458, 290.37355482083, 247.792756149166, 121.924889056454, 
139.544795675081, 90.5098652870819, 128.81228555815, 97.8303811816291, 
158.302258072064, 92.8779921648365, 203.965152617164, 89.5191395137694, 
128.750026005545, 119.657761598295, 179.974247909845, 133.466823057803, 
238.607474287195, 116.294720660791, 201.864700091069, 112.108435629464, 
271.062377507466, 83.4109742479969, 239.645348081583, 130.262886667144, 
152.792196650035, 176.884388948181, 162.02645286672, 98.7427099479103, 
137.316891063804, 122.648306726416, 125.046669859126, 100.13272442114, 
180.137447522718, 217.650850807303, 149.685622937828, 100.501021672135, 
139.485974397326, 97.2504131463864, 168.918196600772, 149.435096996274, 
196.609242398287, 118.348909102341, 97.2902505760102, 79.5321139091445, 
234.000338636812, 162.735625873905, 258.4290279748, 82.6042631207027, 
234.984151251283, 134.304026107081, 246.673584201586, 132.418632361268, 
137.06069432398, 103.267931251672, 181.858657832316, 108.533312446982, 
177.572294130749, 130.488060482833, 183.539693789732, 143.39418697124, 
155.657584081672, 144.60809105994, 205.197357091028, 124.319639509842, 
153.618817439234, 120.377345697365, 157.628795128211, 158.939875199937, 
149.213503553992, 103.583978611559, 143.635257000402), brk = c(0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2)), .Names = c("trial", "id", 
"ttime", "se", "brk"), row.names = c(NA, -600L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T13:45:22.483

如果您正在谈论构面之间的空间，您可以试试这个（另请注意，我们没有`short_brks`，`long_brks`所以我从您的示例代码中删除了这些）。 `grid`该`unit`功能需要。

```
require(ggplot2)
require(grid)

avtimes3$id <- factor(avtimes3$id)
## create and store plot
p <- ggplot(avtimes3, aes(x=trial, y=ttime, colour=id)) + 
  facet_grid(. ~ brk, scales = "free") + 
  geom_point(shape=21, fill="white") +
  ## remove space between panels    
  opts(panel.margin = unit(0, "lines")) + 
  ylab("Time taken (ms)") + 
  xlab("Trial No.")

## as you had
p + stat_smooth(method="loess") 
```

![按 ID 和刻面显示黄土线的散点图](../Images/07767b2c8f8e487bf50cd4b44c78d37a.png)

```
## only one line per facet
p + stat_smooth(method="loess", aes(colour=NULL)) 
```

![黄土线散​​点图仅按面](../Images/4266db5063c2931880440d4cf89382a7.png)

编辑：重读你写的和试过的，我想你可能想要这个：

```
## setup plot
p <- ggplot(avtimes3, aes(x=trial, y=ttime, colour=id)) +  
  geom_point(shape=21, fill="white") + 
  ylab("Time taken (ms)") +  
  xlab("Trial No.")

p + stat_smooth(aes(group = brk), method="loess") 
```

![散点图上的三个黄土线没有刻面](../Images/60e2ed4726ac699f4c0a3ffb2a77093b.png)

这里和你之前不同的是第一个参数`stat_smooth`是映射，第五个是方法。在`R`你有两个选择（也许更多）。要么按顺序给出参数，*要么*明确命名参数。在您的第二个示例中，您给出了无序的参数并且没有明确命名，例如：

```
p + stat_smooth(method = "loess", mapping = aes(group = brk)) 
```

为每个 id 获取单独的行并分组依据`brk`有点棘手（从概念上）。我们需要 brk 和 id 的交互。像大多数几何图形一样，单独着色是行不通的。

```
p + stat_smooth(method = "loess", mapping = aes(group = interaction(brk, id))) 
```

![黄土线按 id 和位置分解的散点图](../Images/77091c9be214457374d416c1bf198332.png)

# c++ - 声明 typedef 类型

> ID：11559096
> 
> 赞同：6
> 
> 时间：2012-07-19T10:42:42.557
> 
> 标签：c++, typedef, declaration

```
struct mystruct
{
    int   i;
    double f;
} ;

typedef mystruct myotherstruct;

//the other .cpp file
struct mystruct;  //OK,this is a correct forward declaration.
struct myotherstruct; // error C2371（in vc2k8）: 'myotherstruct' : redefinition; different basic types 
```

大家好。为什么我不能转发声明 myotherstruct？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:44:59.000

`typedefs`如果没有类型定义的前向声明，则不能前向声明`struct`。你应该先转发声明`struct`然后`typedef`

```
struct mystruct;
typedef mystruct myotherstruct; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:45:41.967

`myotherstruct`标识符不是`struct`标签，它本身就是一个类型*名称*。您在没有`struct`关键字的情况下使用它。一旦定义，名称就不能再用于`struct`标签。在您的示例中，您不是前向声明`myotherstruct`类型，而是`struct`使用标签前向声明 a `myotherstruct`，这会给您一个错误，因为该名称`myotherstruct`已被`typedef`.

# nhibernate - NHibernate 组件在多对一 NULL 时加载为 null，尽管有几个非 null 属性

> ID：11559097
> 
> 赞同：0
> 
> 时间：2012-07-19T10:42:42.617
> 
> 标签：nhibernate, nhibernate-mapping

我知道当数据库中映射组件的所有属性都为空时，NHibernate 会将组件设置为空。但是，在以下情况下，如果多对一项目*LevelOfInvolvement*为空，则该组件被设置为空，尽管该组件的所有其他属性**都不**为空。

无论其他字段的值如何，更改数据库中*LevelOfInvolvement*列的值都会导致组件为空或不为空。

这是完整的映射：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class name="NHS.WebTeam.LPTInvolvementHub.Activity, NHS.WebTeam.LPTInvolvementHub" table="[Activity]" lazy="false" optimistic-lock="version" where="Deleted=0" >
    <id name="ID" type="Int32" column="ID" unsaved-value="0">
      <generator class="hilo">
        <param name="table">NHibernateHiLo</param>
        <param name="column">NextValue</param>
        <param name="max_lo">100</param>
      </generator>
    </id>

    <version name="Version"/>
    <property name="Deleted" />
    <property name="LastUpdateBy" />
    <property name="LastUpdateDate" />

    <many-to-one name="Service" column="ServiceID"></many-to-one>
    <property name="Title"></property>
    <property name="Abstract"></property>
    <property name="ProposedDate"></property>
    <property name="DueDate"></property>
    <property name="ActualDate"></property>
    <property name="Rationale"></property>
    <many-to-one name="PreAssessment" column="PreAssessmentID"></many-to-one>
    <many-to-one name="PostAssessment" column="PostAssessmentID"></many-to-one>

    <component name="InvolvementChecklist">
      <property name="Impact" column="InvolvementChecklist_Impact"></property>
      <property name="RewardsAndRecognition" column="InvolvementChecklist_RewardsAndRecognition"></property>
      <property name="Training" column="InvolvementChecklist_Training"></property>
      <property name="LogisticalIssues" column="InvolvementChecklist_LogisticalIssues"></property>
      <property name="Feedback" column="InvolvementChecklist_Feedback"></property>
      <property name="DueRegard" column="InvolvementChecklist_DueRegard"></property>
      <property name="SupportRequiredFromTheTeam" column="InvolvementChecklist_SupportRequiredFromTheTeam"></property>
      <property name="QualityAssurance" column="InvolvementChecklist_QualityAssurance"></property>
      <property name="NonComplianceReason" column="InvolvementChecklist_NonComplianceReason"></property>
      <many-to-one name="LevelOfInvolvement" column="InvolvementChecklist_LevelOfInvolvementID"></many-to-one>
    </component>

  </class>
</hibernate-mapping> 
```

加载实体的代码很简单：

```
entity = NHibernateSession.Load(persitentType, id); 
```

我正在使用 NHibernate 版本 3.3.1

这似乎是一个相对简单的映射，但我找不到其他有类似问题的参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T22:14:05.917

除了在所有组件成员为 null 时返回 null 之外，我相信 NHibernate 还会在**任何**不可为 null 的成员为 null 时将组件视为 null。默认情况下，`<many-to-one>`映射会创建一个不可为空的成员，我认为这会导致您看到的行为。尝试更改`LevelOfInvolement`映射以允许空值：

```
<many-to-one 
    name="LevelOfInvolvement" 
    column="InvolvementChecklist_LevelOfInvolvementID" 
    not-null="false" /> 
```

# php - PHP：第二个函数没有被调用

> ID：11559100
> 
> 赞同：0
> 
> 时间：2012-07-19T10:42:49.453
> 
> 标签：php, function, sequence

我正在使用 PHP 并想一个接一个地运行 2 个函数。

这些函数是 getallmydata() 和 createCSV()

下面的代码可以正常运行第一个函数，但第二个函数 createCSV() 不起作用。似乎没有正确调用它。

我的代码结构有什么问题，因为这两个函数都可以独立正常工作吗？我无法解决这个问题！

```
<?php

//run this function//
getallmydata();
//then run this function//
createCSV();

function getallmydata(){ 

require_once dirname(__FILE__).'/cm/csrest_general.php';
require_once dirname(__FILE__).'/cm/csrest_clients.php';
require_once dirname(__FILE__).'/cm/csrest_campaigns.php';

$api_key = 'MY API KEY';
$wrap = new CS_REST_General($api_key);
$result = $wrap->get_clients();
$Content = "";

if ($result->was_successful()) {

foreach ($result->response as $client) {

    $client_wrapper = new CS_REST_Clients($client->ClientID, $api_key);
    $client_details_result = $client_wrapper->get();
    $campaigns_result = $client_wrapper->get_campaigns();

    if ($client_details_result->was_successful()) {
        /* This is where the client details will be */
        $client_details = $client_details_result->response;

        echo ('<pre>');
        /*print out the company name*/
        echo "Company Name = " . $client_details->BasicDetails->CompanyName . "<br/>";
        /*print out the company markup*/
        echo "Markup On Delivery = " . $client_details->BillingDetails->MarkupOnDelivery . "<br/>";

        $count = 0;

            if ($campaigns_result->was_successful()) {

                /*print out the latest campaign name of the current campaign*/
                foreach ($campaigns_result->response as $campaign_ob) {

                    echo 'Latest Campaign Name = ' . $campaign_ob->Name . '<br/>';
                    //echo 'Latest Subject = ' . $campaign_ob->Subject . '<br/>';
                    //echo 'Total Recipients = ' . $campaign_ob->TotalRecipients . '<br/>';
                    //echo 'Sent Date = ' . $campaign_ob->SentDate . '<br/>';

                    /*Set content for CSV File*/

                    //$Content .= "This is within the loop \n";

                    $count++;

                    if($count > 0) break;

                }/*end loop*/

            }/*end campaigns if statement*/

        echo ('</pre>');

    } else {
        echo 'Failed with code '.$client_details_result->http_status_code."\n<br /><pre>";
        var_dump($client_details_result->response);
    }

}

} else {
echo 'Failed with code '.$result->http_status_code."\n<br /><pre>";
var_dump($result->response);
echo ('</pre>');
} 

} //end main function

/*create the downloadable csv file*/

function createCSV(){

$FileName = date("d-m-y") . '.csv';

# Titlte of the CSV
//$Content = "Company_Name Markup Campaign_Name Subject Recipients Date \n";

# fill data in the CSV
//$Content .= "\"John Doe\",\"New York, USA\",15,65465464 \n";
$Content .= "Testing The Function Works OK \n";
//$Content .= "This should be another line";
header('Content-Type: application/csv'); 
header("Content-length: " . filesize($NewFile)); 
header('Content-Disposition: attachment; filename="' . $FileName . '"'); 
echo $Content;
exit();  

}//end csv download function

/*end create downloadable .csv file */

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:52:56.140

我认为你应该得到错误：`headers already sent`. （你检查了第二个函数是否被调用？你可以通过`echo`在函数的第一行放置一个来找到它。）

您正在尝试创建一个 CSV 页面，但您在第一个函数中解析 HTML，因此标头已经发送到客户端，说明它是一个普通的 HTML 页面。在第一个函数中删除这些回声，它应该可以工作。

PHP手册的引用：

> 请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 发送。使用 include 或 require 函数或其他文件访问函数读取代码并在调用 header() 之前输出空格或空行是一个非常常见的错误。使用单个 PHP/HTML 文件时也存在同样的问题。

有关标头的更多信息：[PHP 标头](http://php.net/manual/en/function.header.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T10:53:10.957

首先我想我会告诉你 1 你应该先写函数定义然后你应该调用一个函数，即

```
function getallmydata(){
 // function code
}

function createCSV(){
   // function code
}

getallmydata();
createCSV(); 
```

2\. 第二件事是检查php代码之外的代码中是否有任何空白或任何作为resonse发送的o / p，因为当您使用该用户时，如果除了作为响应发送`header()`之外的任何类型的内容然后功能失败。试试这个东西，然后再检查一次。`header()``header()`

# php - 无法在 sourceforge 中使用 PHP 写入文件

> ID：11559105
> 
> 赞同：2
> 
> 时间：2012-07-19T10:43:00.587
> 
> 标签：php, fwrite

我想将 HTTP POST 数据发送到 PHP 文件，然后将数据写入文件。我使用的脚本如下，

```
 <?php
    #error_reporting(E_ERROR | E_PARSE);
    $msglen=strlen($_POST["msgarea"]);
    $msg=$_POST["msgarea"];
    $fp = fopen("dinesh.txt", 'w');
    fwrite($fp, $msg); 
     fclose($fp); 
     echo "Data Written -> $msg";
    ?> 
```

我在 sourceforge 中托管这个脚本文件。

我刚刚创建了空文件 dinesh.txt 并将该文件放在与脚本文件相同的目录中。但不幸的是它没有写在文件中。

是什么原因 ？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-09T10:36:26.997

来自：http: [//sourceforge.net/apps/trac/sourceforge/ticket/2772](http://sourceforge.net/apps/trac/sourceforge/ticket/2772)

> 通常，不允许写入驻留在项目 Web 空间中的文件夹和文件。如果您需要写入文件系统，您应该使用与 htdocs 处于同一级别的名为 persistent 的文件夹。

我在我的电脑上使用：

```
$ mkdir persistent
$ chmod 0777 persistent
$ scp -r persistent my_account@web.sourceforge.net:/home/project-web/my_project/ 
```

并在 PHP 中设置：

```
$fp = fopen("../persistent/dinesh.txt", 'w'); 
```

它有效！

**编辑：** 您可以访问 SSH 控制台 4 小时（[https://sourceforge.net/apps/trac/sourceforge/wiki/Shell%20service](https://sourceforge.net/apps/trac/sourceforge/wiki/Shell%20service)）。您可以转到项目的 web 目录，创建目录，设置权限，删除文件等。午夜指挥官可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:51:03.380

检查`$_POST["msgarea"]`该文件不为空，并且该文件对于尝试写入它的用户是可写的。当然，还要检查日志是否有错误。

```
<?php
error_reporting(E_ALL);
var_dump($_POST["msgarea"]);

$msglen=strlen($_POST["msgarea"]);
$msg=$_POST["msgarea"];
$fp = fopen("dinesh.txt", 'w');
$result = fwrite($fp, $msg); 
fclose($fp); 
if ($result) {
    echo "Data Written -> $result";
} else {
    echo "Error";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T10:51:14.000

我认为您正在只读网络空间中编写，检查文件权限和路径

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T10:49:38.427

你可以，检查那个文件夹权限，他们有777权限吗

```
$myFile = "testFile.txt";
$fh = fopen($myFile, 'w') or die("can't open file");
$stringData = "Bobby Bopper\n";
fwrite($fh, $stringData);
fclose($fh); 
```

# javascript - 我希望我的输入向左写

> ID：11559108
> 
> 赞同：0
> 
> 时间：2012-07-19T10:43:16.743
> 
> 标签：javascript, html, window, getselection

我知道这可以通过使用 window.getSelection() 方法在 javascript 中实现，但我不熟悉这个选择对象。你能帮我写一个代码让用户的书写光标总是在输入字符串的开头吗？

```
$('input[type="text"]')
    .attr('maxlength','7')
    .keyup(function(){
        var sel = window.getSelection();
        console.log(sel);
        // need a code for here to make the cursor (caret) at the begining of the string

    }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:12:36.263

您总是可以使用 CSS`direction: rtl;` 这行代码只需将文本的方向更改为从右到左，然后您可以使用将 css 类添加到您的 html 元素中`.addClass("your_class")`

请务必注意，此方法不会替换类。它只是添加类，将其附加到任何可能已经分配给元素的类。

**编辑：**尝试将`.addClass("your_class")`keyup 功能放在外面（尽管这可能仍然无法为您提供您正在寻找的最佳结果），请查看我下面的评论以获得更好的方法。

**更新：**这是另一种方法

```
$('input[type="text"]').change(function () {
$(this).val() = $(this).split("").reverse().join("");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T11:38:07.987

可以使用以下组合来完成：

*   `dir = "rtl"`
*   每次按键后将文本框插入符号移至 0

演示：http: [//jsfiddle.net/FF9Tf/1/](http://jsfiddle.net/FF9Tf/1/)

*注意：*使用这些答案中的提示/代码。

*   [在文本框的焦点上设置光标长度为 14](https://stackoverflow.com/questions/1865563/set-cursor-at-a-length-of-14-onfocus-of-a-textbox/1867393#1867393)
*   [在表单输入字段中定义光标位置](https://stackoverflow.com/questions/1909220/define-cursor-position-in-form-input-field)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:59:24.873

试试这个，它会让光标在输入框中的文本开头保持闪烁

```
$('input[type="text"]')
    .attr('maxlength','7')
    .attr('dir', "rtl")
    .keyup(function(){
        var sel = window.getSelection();
        console.log(sel);
        // need a code for here to make the cursor (caret) at the begining of the string

    }) 
```

尝试演示链接 [http://jsfiddle.net/hcWCQ/1/](http://jsfiddle.net/hcWCQ/1/)

在例如：单击输入框，然后按 Shift+TAB，然后开始键入不完全是您要查找的内容....但在某个接近的地方

# javascript - .on 和 .off 在 jquery 中不起作用

> ID：11559113
> 
> 赞同：0
> 
> 时间：2012-07-19T10:43:27.783
> 
> 标签：javascript, jquery

我以这种方式附加了一个跨度的点击事件。跨度在表内。

```
 $("#tblImport").find("span").each(function () {
                $(this).click(function () {
                    appendData(this);
                });
            }); 
```

此事件处理程序“appendData”发出 ajax 请求并获取数据。

```
 function appendData(prntSpan) {
            $(prntSpan).append(createElements());//ajax call.
            updateEvents(prntSpan);
        } 
```

我想要的是分离这个点击事件处理程序并附加一个新的。所以我尝试了这个。

```
function updateEvents(curntSpan) {
        $(curntSpan).off('click');//this works
        $(curntSpan).off('click', appendData);// but this does not work strange
        $(curntSpan).on('click', toggleData(curntSpan));//nor a new click handler is attached
    } 
```

执行上面使用 .on 的行时调用该函数，但之后单击 span 时不会触发任何事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:20:33.660

`.on()`您在函数检查[中](http://api.jquery.com/on/)有错误的语法。所以在我看来，你应该改变你的代码：

```
$("#tblImport span").click(function (e) {
                e.stopPropagation();
                appendData(this);
            }); 
```

这有更简洁的语法。

```
function updateEvents(curntSpan) {
        $(curntSpan).off('click');//this works
        $("#tblImport").on('click', curntSpan, function() { toggleData(curntSpan); });
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-07T06:01:03.607

```
function updateEvents(curntSpan) {
    /* ... */
    $(curntSpan).on('click', toggleData(curntSpan));
} 
```

这将做的是：

1.  评估`$(curntSpan)`，产生一个 jQuery 对象
2.  访问其`.on`属性
3.  评估`'click'`and `toggleData(curntSpan)`，产生一个字符串和其他东西
4.  `.on`使用字符串和上一步中的其他内容作为参数调用属性

我认为你想要的是这样的：

```
function updateEvents(curntSpan) {
    /* ... */
    $(curntSpan).on('click', function(){ toggleData(curntSpan) });
} 
```

在第 3 步中，这将评估`function(){ toggleData(curntSpan) }`而不是`toggleData(curntSpan)`— 结果是一个在调用`toggleData(curntSpan)`时调用的函数（即当`click`事件被触发时）。

一般规则：

1.  每当你调用一个函数时，它的参数都会被评估
2.  例如，当您评估一个函数*调用*`f(x)`时，您运行该函数并获取结果
3.  当你评估一个函数*表达式*时，例如`function() { /* f(x) */ }`，结果就是那个函数（这里：一个不带参数并且有一个空主体的函数，因为它被注释掉了）。

同样的逻辑就是为什么你这样做`$(function() { /* ... */ })`而不是`$(f(x))`在页面“启动”时运行一些代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:47:52.897

```
 $(curntSpan).off('click', appendData); 
```

将不起作用，因为您首先没有将 appendData 作为处理程序。在处理程序中，您将匿名函数放入运行 appendData，而不是 appendData 本身

# uibutton - UIButton 正确的 TouchUp 检测

> ID：11559115
> 
> 赞同：0
> 
> 时间：2012-07-19T10:43:29.017
> 
> 标签：uibutton, uicontrolevents

当有人单击 UITableViewCell 中的按钮时，我正在使用以下代码调用函数。不幸的是，即使在按钮区域之外释放触摸，代码仍然会被调用。（例如，触摸按钮，滑动手指离开按钮，按钮仍处于动作状态）。

有人可以告诉我为什么会发生这种情况，或者这样做的正确方法是什么？我想我的问题可能出在“addTarget”子句上——也就是说，TouchUpInside 可能指的是我的 UITableView 而不是按钮本身？

```
[cellPeriod.myButton1 addTarget:self action:@selector(buttonClickedStopWatch:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:47:27.970

该问题与 UITableView 无关。

我想也许苹果是故意这样做的，因为我们的手指不是鼠标。你可以检查苹果公司的应用程序，它也有问题。可以看到navigationBar的backItemButton。

如果你想解决它，你可以使用 UIControl 的方法：

```
 - (void)endTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event; 
```

检查此点是否在按钮的矩形内。并且可以添加一个 BOOL 值来决定是否继续做选择器

添加：

```
#import "MyButton.h"

@implementation MyButton

- (void)endTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event
{
    CGPoint location = [touch locationInView:self];
    CGRect btnRect = CGRectMake(0, 0, self.frame.size.width, self.frame.size.height);
    if (CGRectContainsPoint(btnRect, location)) {
        self.tag=-1;
        return;
    }
    self.tag=-2;
}
@end 
```

# python - __getattr__ 在一个类上，而不是（或以及）一个实例

> ID：11559120
> 
> 赞同：4
> 
> 时间：2012-07-19T10:43:40.373
> 
> 标签：python

我知道我可以编写如下代码：

```
class A :
    def __getattr__ (self, name) :
        return name 
```

捕获对类实例上未定义属性的访问，因此：

```
A().ATTR == 'ATTR' 
```

是*True*。但是有什么办法可以为班级本身做到这一点吗？我希望能够使以下两行都可以工作，并且可以区分（即，有不同的魔术方法被调用，或者魔术方法可以告诉它是如何被调用的）

```
a = A().ATTR
b = A.ATTR 
```

我怀疑答案是**否定**的，但也许有一些深巨蟒？

**编辑**：实际问题是以向后兼容的方式扩展自定义活动记录库。ORM 代码支持如下代码：

```
ar = AR_people()
ar.find()
name = ar.name 
```

访问表，其中`name`可能会映射到不同的列名，例如`pe_name`. 我们希望能够写出类似的东西

```
ar.filter(AR_people.age >= 21) 
```

最后得到

```
pe_age >= 21 
```

（很像其他 ORM 库所做的），所以`AR_people.age`需要返回一个实现的类的实例`__ge__`等等来做转换魔术。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T10:47:12.103

您可以使用[元类](http://docs.python.org/reference/datamodel.html#customizing-class-creation)：

```
In [1]: class meta(type):
   ...:     def __getattr__(self, name):
   ...:         return name
   ...:     
   ...:     

In [2]: class A(object):
   ...:     __metaclass__ = meta
   ...:     def __getattr__(self, name):
   ...:         return name
   ...:     
   ...:     

In [3]: A().attr
Out[3]: 'attr'

In [4]: A.attr
Out[4]: 'attr' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:52:50.027

是的你可以。元类就是答案。

```
class MyMetaclass(type):
    def __getattr__(cls, name):
        return "cls.%s" % name

class A :
    __metaclass__ = MyMetaclass
    def __getattr__ (self, name) :
        return name

print A().ATTR
print A.ATTR 
```

将输出

```
ATTR
cls.ATTR 
```

# html - 如何在 i-os 设备中为 textarea 显示垂直滚动条？

> ID：11559124
> 
> 赞同：4
> 
> 时间：2012-07-19T10:43:48.007
> 
> 标签：html, scroll, textarea

textarea 中的垂直滚动条在 IE、FF 和 Chrome 中显示，但在 ipod/ipad 等 i-os 设备中不显示。

```
<textarea  id="termsConditions" cols="30" rows="5" readonly="readonly">Sample text sample           text sample text sample text sample text sample text sample text sample text sample text sample text sample text sample text sample text sample text sample text sample text sample text sample text sample</textarea> 
```

如何解决这个问题？

提前非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T21:15:34.857

Just as Michael Halpin has said. Add `-webkit-overflow-scrolling: touch` into your styles.

**HTML**

```
<textarea  id="termsConditions" cols="30" rows="5" readonly="readonly">Sample text sample           text sample text sample text sample text sample text sample text sample text sample text sample text sample text sample text sample text sample text sample text sample text sample text sample text sample</textarea> 
```

**CSS**

```
#termsConditions {
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}​ 
```

**[DEMO](http://jsfiddle.net/4SnyJ/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-18T12:01:09.833

它对我有用

```
::-webkit-scrollbar {width: 10px;}
::-webkit-scrollbar-track {-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); border-radius: 10px;}
::-webkit-scrollbar-thumb {border-radius: 10px; -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5);} 
```

希望这对你有用

# c# - 对来自 xml 的数据执行乘法时遇到问题

> ID：11559126
> 
> 赞同：2
> 
> 时间：2012-07-19T10:43:52.153
> 
> 标签：c#, asp.net, xml, google-api, xmldocument

嗨，我在乘以从谷歌金融 api 检索到的数据时遇到问题。我知道我现在正在做的事情是错误的，所以我想要一些关于如何去做的指示以及一些关于这方面的例子。

```
 string url = "http://www.google.com/ig/api?stock=" + Server.UrlEncode(symbol1.Text);
     XmlDocument xdoc = new XmlDocument();
     xdoc.Load(url);
     currentPrice1.Text = GetData(xdoc, "last");
     int quantity = 50;
     int currentPrice = int.Parse(currentPrice1.Text);
     int totalValue = quantity * currentPrice; 
```

**获取数据方法**

```
private string GetData(XmlDocument doc2, string strElement)
{

    XmlNodeList xnodelist5 = doc2.GetElementsByTagName(strElement);
    XmlNode xnode5 = xnodelist5.Item(0);
    return Get_Attribute_Value(xnode5, "data");

} 
```

**错误** ![错误](../Images/878904789ce499e7b4abc4686851f894.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:56:21.157

可能是*数据*属性的值不是数字或未指定。使用 TryParse 方法或使用 try..catch.. 块包装您的代码。

```
 decimal currentPrice;
 if(decimal.TryParse(currentPrice1.Text, out currentPrice))
  {
     //
   } 
```

或者`int.TryParse`，如果数据属性的值为整数，则使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:59:13.840

查看您的代码curentPrice1.Text 的打印屏幕可能有一个空或空或一些非数字

所以请做

```
int currentPrice = 0;

if(!string.IsEmptyOrNull(currentPrice1.Text))
{
   int price = 0;
   if(int.TryParse(currentPrice1.Text, out price))
   {
       currentPrice = price ;
   }
} 
```

# r - R中最快的按列排序

> ID：11559127
> 
> 赞同：16
> 
> 时间：2012-07-19T10:43:55.977
> 
> 标签：r, data.table

我有一个数据框`full`，我想从中获取最后一列和一列`v`。然后，我想以`v`最快的方式对两列进行排序。`full`从 csv 读入，但这可用于测试（包括一些真实性的 NA）：

```
n <- 200000
full <- data.frame(A = runif(n, 1, 10000), B = floor(runif(n, 0, 1.9)))
full[sample(n, 10000), 'A'] <- NA
v <- 1 
```

我在`v`这里有一个，但实际上它可能会改变，并且`full`有很多专栏。

* * *

我尝试使用 and 对数据框、数据表和矩阵进行排序`order`（`sort.list`一些想法来自[这个线程](https://stackoverflow.com/questions/1296646/how-to-sort-a-dataframe-by-columns-in-r)）。所有这些的代码：

```
# DATA FRAME

ord_df <- function() {
  a <- full[c(v, length(full))]
  a[with(a, order(a[1])), ]
}

sl_df <- function() {
  a <- full[c(v, length(full))]
  a[sort.list(a[[1]]), ] 
}

# DATA TABLE

require(data.table)

ord_dt <- function() {
  a <- as.data.table(full[c(v, length(full))])
  colnames(a)[1] <- 'values'
  a[order(values)]
}

sl_dt <- function() {
 a <- as.data.table(full[c(v, length(full))])
 colnames(a)[1] <- 'values'
 a[sort.list(values)]
}

# MATRIX

ord_mat <- function() {
  a <- as.matrix(full[c(v, length(full))])
  a[order(a[, 1]), ] 
}

sl_mat <- function() {
  a <- as.matrix(full[c(v, length(full))])
  a[sort.list(a[, 1]), ] 
} 
```

时间结果：

```
 ord_df  sl_df    ord_dt   sl_dt   ord_mat sl_mat
Min.     0.230   0.1500   0.1300   0.120   0.140   0.1400
Median   0.250   0.1600   0.1400   0.140   0.140   0.1400
Mean     0.244   0.1610   0.1430   0.136   0.142   0.1450
Max.     0.250   0.1700   0.1600   0.140   0.160   0.1600 
```

或使用`microbenchmark`（结果以毫秒为单位）：

```
 min      lq       median   uq       max
1  ord_df() 243.0647 248.2768 254.0544 265.2589 352.3984
2  ord_dt() 133.8159 140.0111 143.8202 148.4957 181.2647
3 ord_mat() 140.5198 146.8131 149.9876 154.6649 191.6897
4   sl_df() 152.6985 161.5591 166.5147 171.2891 194.7155
5   sl_dt() 132.1414 139.7655 144.1281 149.6844 188.8592
6  sl_mat() 139.2420 146.8578 151.6760 156.6174 186.5416 
```

似乎订购数据表获胜。和之间没有太大区别`order`，`sort.list`除非使用数据帧`sort.list`的速度要快得多。

在数据表版本中，我也尝试设置为键（因为它是根据文档排序的），但由于内容不是整数`v`，我无法让它工作。`v`

理想情况下，我希望尽可能加快速度，因为我必须为不同的`v`值多次执行此操作。有谁知道我如何能够进一步加快这个过程？是否值得尝试`Rcpp`实施？谢谢。

* * *

如果对任何人有用，这是我用于计时的代码：

```
sortMethods <- list(ord_df, sl_df, ord_dt, sl_dt, ord_mat, sl_mat)

require(plyr)
timings <- raply(10, sapply(sortMethods, function(x) system.time(x())[[3]]))
colnames(timings) <- c('ord_df', 'sl_df', 'ord_dt', 'sl_dt', 'ord_mat', 'sl_mat')
apply(timings, 2, summary) 

require(microbenchmark)
mb <- microbenchmark(ord_df(), sl_df(), ord_dt(), sl_dt(), ord_mat(), sl_mat())
plot(mb) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-19T22:43:28.193

我不知道将这种东西作为编辑是否更好，但它似乎更像是答案，所以这里会做。更新的测试功能：

```
n <- 1e7
full <- data.frame(A = runif(n, 1, 10000), B = floor(runif(n, 0, 1.9)))
full[sample(n, 100000), 'A'] <- NA

fdf <- full
fma <- as.matrix(full)
fdt <- as.data.table(full)
setnames(fdt, colnames(fdt)[1], 'values')

# DATA FRAME
ord_df <- function() { fdf[order(fdf[1]), ] }
sl_df <- function() { fdf[sort.list(fdf[[1]]), ] }

# DATA TABLE
require(data.table)
ord_dt <- function() { fdt[order(values)] }

key_dt <- function() {
  setkey(fdt, values) 
  fdt
}

# MATRIX
ord_mat <- function() { fma[order(fma[, 1]), ] }
sl_mat <- function() { fma[sort.list(fma[, 1]), ] } 
```

结果（使用不同的计算机，R 2.13.1 和`data.table`1.8.2）：

```
 ord_df  sl_df   ord_dt  key_dt  ord_mat sl_mat
Min.     37.56   20.86   2.946   2.249   20.22   20.21
1st Qu.  37.73   21.15   2.962   2.255   20.54   20.59
Median   38.43   21.74   3.002   2.280   21.05   20.82
Mean     38.76   21.75   3.074   2.395   21.09   20.95
3rd Qu.  39.85   22.18   3.151   2.445   21.48   21.42
Max.     40.36   23.08   3.330   2.797   22.41   21.84 
```

![排序](../Images/e4fac30171a2c8db93e0cfeb57c4b66f.png)

所以 data.table 是明显的赢家。使用键比排序更快，并且我认为它的语法也更好。感谢大家的帮助。

# jsf-2 - 升级到 JSF2 后自定义设置器中的 IllegalArgument 异常

> ID：11559136
> 
> 赞同：1
> 
> 时间：2012-07-19T10:44:28.177
> 
> 标签：jsf-2, el, illegalargumentexception

`.xhtml`升级到 JSF2（可能）后，文件中会生成一个特殊的访问器，`IllegalArgumentExceptions`但我真的不知道为什么。在我的本地 JBoss (4.2.2) 上运行应用程序不会生成此异常，但这可能与调试数据和实时数据之间的差异有关。

生成以下堆栈跟踪，我可以从生产服务器日志中提取：

```
Caused by: javax.el.ELException: /xy/xy-subtemplate1.xhtml @131,45 value="#{someClass.someProperty}": java.lang.IllegalArgumentException
    at com.sun.facelets.el.TagValueExpression.setValue(TagValueExpression.java:101)
    at javax.faces.component.UIInput.updateModel(UIInput.java:818)
    ... 36 more
Caused by: java.lang.IllegalArgumentException
    at sun.reflect.GeneratedMethodAccessor1134.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at javax.el.BeanELResolver.setValue(BeanELResolver.java:108)
    at com.sun.faces.el.DemuxCompositeELResolver._setValue(DemuxCompositeELResolver.java:255)
    at com.sun.faces.el.DemuxCompositeELResolver.setValue(DemuxCompositeELResolver.java:281)
    at org.apache.el.parser.AstValue.setValue(AstValue.java:114)
    at org.apache.el.ValueExpressionImpl.setValue(ValueExpressionImpl.java:249)
    at com.sun.facelets.el.TagValueExpression.setValue(TagValueExpression.java:93)
    ... 37 more 
```

`someClass`正在列表中进行迭代，并具有以下访问方法`someProperty`：

```
public int getSomeProperty() {
    return this.getSomeRelatedEnum().ordinal();
}

public void setSomeProperty( final int index) {
    this.setSomeRelatedEnum( SomeRelatedEnum.fromOrdinal( index) );
} 
```

这怎么会导致`IllegalArgumentException`上面提到的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:00:36.803

当 setter 方法毕竟需要与 EL 提供的参数类型不同的参数类型时，就会发生这种情况。

我*想*这与 EL 中硬编码/未转换的数字默认被视为`long`而不是`int`. 尝试更改`int`为`long`，或像这样在输入组件上提供显式整数转换器`<h:someInput converter="javax.faces.Integer">`。

顺便说一句，你为什么不直接获取/设置枚举本身呢？通过其序数获取/设置枚举是古怪的。

# mysql - 为什么我不能在 WHERE 中使用我的列，而我可以在 GROUP BY 中使用？

> ID：11559137
> 
> 赞同：1
> 
> 时间：2012-07-19T10:44:30.920
> 
> 标签：mysql, sql, group-by, where-clause

我有什么特别的原因让 MySQL 在允许使用的`date_sent_at`同时`WHERE`不允许使用 in`GROUP BY`吗？

```
SELECT
    CONCAT(type, '_', IF(om.is_auto, 'auto', 'user')) AS subtype,
    DATE(om.sent_at) AS date_sent_at,
    COUNT(om.id) AS sends
FROM outgoing_message om INNER JOIN outgoing_message_customers AS omc
    ON om.id = omc.outgoing_message_id
WHERE
    omc.customer_id = 2
    AND
    om.status <> 'pending'
    AND
    date_sent_at >= '2012-01-01'
GROUP BY subtype, date_sent_at 
```

**编辑**：我知道（当然）我可以用`DATE(om.sent_at) >= '2012-01-01'`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:48:56.097

问题是您使用`DATE(om.sent_at) as date_sent_at`. 该`AS`部分在`WHERE`子句中不起作用，但在`GROUP BY`语句中起作用。

试试这个：

```
SELECT
CONCAT(type, '_', IF(om.is_auto, 'auto', 'user')) AS subtype,
DATE(om.sent_at) as date_sent_at,
COUNT(om.id) as sends
FROM outgoing_message om INNER JOIN outgoing_message_customers AS omc
ON om.id = omc.outgoing_message_id
WHERE
omc.customer_id = 2 and om.status <> 'pending'
AND
DATE(om.sent_at) > '2012-01-01'
GROUP BY subtype, date_sent_at 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:49:45.380

不能在 WHERE 子句中使用别名。应该使用完整的句子`DATE(om.sent_at) >`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T10:49:59.510

您不能在 where 子句中使用列别名，但可以在 have 子句中使用它们。

在 where 子句中使用以下条件：

```
DATE(om.sent_at) > '2012-01-01' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T10:51:26.367

您不能在 where 中使用别名，但可以在 GROUP BY 中使用

正如这里的[mysql](http://dev.mysql.com/doc/refman/5.5/en/select.html "mysql")文档中所写：

```
A select_expr can be given an alias using AS alias_name. The alias is used as the expression's column name and can be used in GROUP BY, ORDER BY, or HAVING clauses. For example: 
```

希望这有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T10:49:14.163

date_sent_at 是别名 .. 你必须在 where 子句中给出 DATE(om.sent_at)

请查看 [SELECT 语句中的操作顺序](http://databases.aspfaq.com/database/how-do-i-use-a-select-list-alias-in-the-where-or-group-by-clause.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T10:50:19.613

您不能使用您在 WHERE 子句中的 SELECT 列表中指定的列别名。您可以使用用于构造列的表达式：

```
SELECT        CONCAT(type, '_', IF(om.is_auto, 'auto', 'user')) AS subtype,
              DATE(om.sent_at) as date_sent_at,
              COUNT(om.id) as sends
FROM          outgoing_message om 
INNER JOIN    outgoing_message_customers AS omc
ON            om.id = omc.outgoing_message_id
WHERE         omc.customer_id = 2
AND           om.status <> 'pending'
AND           DATE(om.sent_at) >= '2012-01-01'
GROUP BY      subtype, date_sent_at 
```

# c# - TransactionScope 块中的所有代码在提交或回滚之前如何真正执行？

> ID：11559142
> 
> 赞同：5
> 
> 时间：2012-07-19T10:44:40.873
> 
> 标签：c#, .net, transactions, transactionscope

我已经阅读了有关[TransactionScope](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)和[这篇](http://msdn.microsoft.com/en-us/magazine/cc300805.aspx)文章的内容，但我仍然不明白 2 件事：

1.  什么时候`SqlCommand.ExecuteNonQuery`执行它直到`scope.Complete()`被调用才真正执行？如果是真的，那么**在**范围内执行的所有操作都保留在哪里等待`scope.Complete()`或`scope.Rollback()`？
2.  何时`TransactionScope`实例化它如何防止`SqlCommand.ExecuteNonQuery`被执行并等待`scope.Complete()`或`scope.Rollback()`？它是否创建了一些“地方”并`SqlCommand`以某种方式知道它并将说明放在那里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T10:55:58.210

> [1] 执行 SqlCommand.ExecuteNonQuery 时，直到调用 scope.Complete() 才真正执行？

不，这是不正确的。您的命令在您调用的行上执行`ExecuteNonQuery`。然而，了解所有更改的存储*位置是很有趣的。*更改不会直接转到服务器端受影响的表，而是将更改存储在临时位置（再次在服务器端），这会导致您的第二个问题的答案

> [2] 当 TransactionScope 被实例化时，它如何防止 SqlCommand.ExecuteNonQuery 被执行并等待 scope.Complete() 或 scope.Rollback()？

它不会因此*阻止*执行操作，但是由于操作的结果存储在临时位置，因此您必须将这些更改与主表合并 -*或*`scope.Commit()`丢弃这些更改 - `scope.Rollback()`（或任何用于丢弃特定数据库数据提供者中的更改）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:49:05.203

TransactionScope 隐藏了很多东西。

当您创建一个 TransactionScope 时，您在其中所做的一切都在数据库事务的上下文中。因此 SQL 语句将立即执行，但它们的影响将在事务内部，因此其他进程在事务提交之前不会知道它们已经发生。

如果您只使用单个数据库，则根据您是否 .Complete() 打开一个事务并提交或回滚。此外，如果在 TransactionScope 的上下文中发生异常，则回滚事务。

如果您正在使用多个数据库，则会在每个数据库中创建一个事务，并且 Microsoft 分布式事务协调器 (MSDTC) 管理整个事务。当您 .Complete() 时，MSDTC 将指示每个单独的事务提交。

注意 MSDTC 不限于数据库 - 请参阅[此处](http://en.wikipedia.org/wiki/Distributed_Transaction_Coordinator)了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:51:02.023

事务范围不会阻止代码执行，它会阻止事务被提交。所以在 a 的情况下`SqlCommand.ExecuteNonQuery`，因为它在事务内部，所以`SqlCommand`查看事务协调器并看到它在事务内部被调用，所以当它连接到 SQL Server 时，事务被维护，所以 SQL 写数据到数据库，但除非事务已提交（或有人执行“脏读”），否则无法读取。如果从不调用完成，则在`TransactionScope`处理它时回滚，并且 SQL 可以撤消插入（或它所做的任何其他操作）。

任何使用事务（例如其他数据库技术）的事物都需要实现其 .Net 代码以支持事务。

事务本质上用在数据库中，但理论上，可以制作其他代码来支持它。

但是，要回答您的问题，代码在`Complete()`调用方法之前不会停止，它会运行，而是在事务中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T10:52:10.380

这可能会对您的问题有所帮助，您可以启用 MSDTC 跟踪以查看事务

有关详细信息，请参阅链接[http://support.microsoft.com/kb/899115](http://support.microsoft.com/kb/899115)

希望这可以帮助..

# c# - 只拒绝从父文件夹继承？

> ID：11559148
> 
> 赞同：0
> 
> 时间：2012-07-19T10:45:02.193
> 
> 标签：c#, ntfs

我的应用程序中有 4 个文件夹，每个文件夹都有一定的权限...

文件夹1里面有文件夹2，文件夹2里面有文件夹3和文件夹4

我可以使用以下代码拒绝从文件夹 2 到文件夹 3 的继承，但我想从文件夹 1 继承到文件夹 3？

我希望文件夹继承 folder1 的所有属性

```
 string folderpath="xyz";
        string UserAccount = "asp";
        System.IO.DirectoryInfo FolderInfo = new System.IO.DirectoryInfo(folderpath);
        DirectorySecurity FolderAcl = new DirectorySecurity();
        FolderAcl.AddAccessRule(new FileSystemAccessRule(UserAccount,       FileSystemRights.ReadData, InheritanceFlags.ContainerInherit | InheritanceFlags.ObjectInherit, PropagationFlags.None, AccessControlType.Allow));
        const bool protectRulesFromInheritance = true;
        const bool preserveInheritance = true;
        FolderAcl.SetAccessRuleProtection(protectRulesFromInheritance, preserveInheritance);
        FolderInfo.SetAccessControl(FolderAcl); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:52:27.657

你只能从你的父母那里继承。祖父母的继承只是隐含的；也就是说，如果您从您的父母继承，而您的父母*从其*父母继承，您将拥有隐式祖父母继承。

如果这*是*可能的，管理（内部和用户界面方面）将是可怕的，尤其是在移动文件夹时......

# javascript - 如何从javascript中的ondrop事件中获取文件URL

> ID：11559149
> 
> 赞同：6
> 
> 时间：2012-07-19T10:45:03.960
> 
> 标签：javascript, jquery

我正在为我正在制作的上传器运行以下代码。

```
holder.ondrop = function (e) {
    e.preventDefault();
    console.log(e);
} 
```

我希望用户能够将文件从桌面拖到网络浏览器上，然后我想捕获它的位置，以便我可以手动上传它（不想通过 javascript 上传）我的问题是但是，我如何从事件中获取文件的客户端位置，以便我可以将其放入`<input type="file">`?

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:59:56.970

下面是一个mozilla的例子，使用事件的dataTransfer对象来获取拖拽的文件列表

[例子](https://developer.mozilla.org/En/DragDrop/DataTransfer#files)

我的例子：

```
holder.ondrop = function (e) {
    e.preventDefault();
    if(e.dataTransfer && e.dataTransfer.files.length != 0){
        var files = e.dataTransfer.files //Array of filenames
        files[0]; //the first file in the list

        // code to place file name in field goes here...

    }else{
        // browser doesn't support drag and drop.
    }

    console.log(e);
} 
```

使用 mozilla 示例，因为它比我提供的更全面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:51:14.047

输入文件字段可以视为普通输入字段，其值可以如下获取。

```
<input id="inputid" type="file" dropzone="..."> 

holder.ondrop = function (e) {
    e.preventDefault();
    var path = $('#inputid').val();
    //split the string at the lastIndexOf '/' to get filename 
    console.log(e);
} 
```

# c# - 将 C# 锯齿状数组转换为数组并再次返回

> ID：11559151
> 
> 赞同：2
> 
> 时间：2012-07-19T10:45:24.837
> 
> 标签：c#, .net, arrays, serialization, multidimensional-array

我目前有一个锯齿状数组`Class[][][]`，我想将其序列化为普通`Class[]`数组，然后在反序列化后转换回`Class[][][]`数组。是否有可能在这两种方式之间进行转换？尺寸是恒定的尺寸。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T11:01:50.677

这是您可以展平为一维结构的方式：

```
var jagged = new object[][][];
var flattened = jagged.SelectMany(inner => inner.SelectMany(innerInner => innerInner)).ToArray(); 
```

至于回到多维 - 这将完全取决于你试图实现的目标/数据代表什么

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T11:21:58.773

如果您不介意序列化展平数组*和*整数数组，则可以使用以下内容：

```
public static int[] JaggedSizes<T>(this T[][][] topArray)
{
    List<int> rtn = new List<int>();
    rtn.Add(topArray.Length);
    for (int i = 0; i < topArray.Length; i++)
    {
        var midArray = topArray[i];
        rtn.Add(midArray.Length);
        for (int j = 0; j < midArray.Length; j++)
        {
            var botArray = midArray[j];
            rtn.Add(botArray.Length);
        }
    }
    return rtn.ToArray();
}

// Thanks @Dave Bish
public static T[] ToFlat<T>(this T[][][] jagged)
{
    return jagged.SelectMany(inner => 
        inner.SelectMany(innerInner => innerInner)).ToArray(); 
}

public static T[][][] FromFlatWithSizes<T>(this T[] flat, int[] sizes)
{
    int inPtr = 0;
    int sPtr = 0;
    int topSize = sizes[sPtr++];
    T[][][] rtn = new T[topSize][][];
    for (int i = 0; i < topSize; i++)
    {
        int midSize = sizes[sPtr++];
        T[][] mid = new T[midSize][];
        rtn[i] = mid;
        for (int j = 0; j < midSize; j++)
        {
            int botSize = sizes[sPtr++];
            T[] bot = new T[botSize];
            mid[j] = bot;
            for (int k = 0; k < botSize; k++)
            {
                bot[k] = flat[inPtr++];
            }
        }
    }
    return rtn;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T10:47:39.120

我不这么认为，罗里。

如果它是一个 Class[,,] 多维数组，您可能已经能够做到这一点，但是每个数组可能具有不同长度的事实将始终是一个绊脚石。

假设您将 if 作为 Class[] + 另一个类进行序列化以提供原始尺寸，那么您将是黄金。

# java - JAXB 元素 使声明的类型 T 作为参数以与任何类一起使用

> ID：11559155
> 
> 赞同：2
> 
> 时间：2012-07-19T10:45:37.293
> 
> 标签：java, jaxb, classname

我得到了这个代码

```
private Object fooMethod(Node node, Class classOut)
  JAXBElement<MessageAcknowledgementType> root = unmarshallerjaxObject.unmarshal(node, MessageAcknowledgementType.class); 
```

因为我要用不同的类名调用 fooMethod，所以我想在 JAXBElement 中指定变量 classOut 中的类名，我已经尝试过了，但它不起作用：

```
JAXBElement <classOut.getSimpleName()> root = unmarshallerjaxObject.unmarshal(node, classOut.getSimpleName()); //It doesn't work 
```

关于如何在 JAXBElement 中指定类名的任何想法？谢谢！。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:19:49.293

最简单的事情是：

```
private Object fooMethod(Node node, Class<?> classOut) {
    JAXBElement<?> root = unmarshallerjaxObject.unmarshal(node, classOut);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:42:57.473

这个怎么样：

```
Object obj = fooMethod(node, classout); 
```

定义另一种方法，将其转换为适合您的类型：

```
private <T> JAXBElement<T> getCast(Class<T> clazz, Object obj){
    return (JAXBElement<T>)obj;
}

     JAXBElement<Member> jaxbElement = getCast(SomeClass.class, obj); 
```

# visual-studio-2010 - 如何将目标框架从 4.0 更改为 4.0.3

> ID：11559156
> 
> 赞同：1
> 
> 时间：2012-07-19T10:45:37.863
> 
> 标签：visual-studio-2010, .net-4.0, portable-class-library

我在 Visual Studio 2010 中安装了 Portable Library Tools beta 2。我创建了一个新库并将其设置为与 .Net 4.0.3 和 Silverlight 5 兼容。然后我尝试从 Silverlight Web 添加对 PCL 项目的引用项目。我收到消息：

> 无法添加对项目“PortableClassLibrary”的引用。当前项目的目标框架不是可移植库项目“PortableClassLibrary”的目标框架之一或不兼容。
> 
> 可通过项目属性中的 Library 选项卡更改 Portable Library 项目的目标框架。

我不想更改 PCL 目标，我想更改 Web 项目的目标。我去了“属性”>“应用程序”选项卡，目标框架是“.Net Framework 4.0”。4.0.3 没有选项。我检查并意识到这台机器上没有安装 4.0.3 (KB2600211) 的更新，所以我按照要求安装并重新启动。

VS 中仍然没有 4.0.3 选项，我仍然收到消息。有任何想法吗？

**编辑**

VS 2010 SP1 已经安装。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T06:16:09.760

要面向 .NET Framework 4.0.3，您需要安装 KB2600214，然后将项目属性 -> 应用程序 -> 目标框架更改为 .NET Framework 4.0.3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T14:29:17.207

您可能需要查阅Microsoft 网站上的[此页面](http://msdn.microsoft.com/en-us/library/vstudio/cc668079%28v=vs.100%29.aspx)。它为这些 Targeted Framework 错误提供了一些解决方法。就个人而言，我最终在我的 csproj 文件中手动修改了这一行：

```
<TargetFrameworkVersion>v4.0.3</TargetFrameworkVersion> 
```

# selenium - 如何使用 selenium IDE 知道屏幕中标签或字段的数量

> ID：11559159
> 
> 赞同：0
> 
> 时间：2012-07-19T10:45:43.643
> 
> 标签：selenium, selenium-ide

有没有办法使用 Selenium IDE 在特定屏幕中查找字段或标签的数量？如果是，我们如何记录它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:55:00.400

根据[文档](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html#storeXpathCount)，您可以使用

```
storeXpathCount(xpath, variableName) 
```

如果您可以通过 XPath 找到它们，则计算页面上的元素数量。

# tfs - 当构建运行超出允许的时间跨度时，TFS 2010 构建电子邮件通知

> ID：11559161
> 
> 赞同：0
> 
> 时间：2012-07-19T10:45:51.417
> 
> 标签：tfs, tfsbuild

我正在使用 TFS 2010 构建服务。如果构建运行时间更长，我需要发送电子邮件。

例如：假设构建通常运行 10 分钟，但现在如果构建运行超过 20 分钟......我需要发送电子邮件通知。

我可以请你帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:20:18.373

此功能不是开箱即用的。但是，这可以提出很好的功能请求，请在此处提出以供考虑 => [http://visualstudio.uservoice.com/forums/121579-visual-studio](http://visualstudio.uservoice.com/forums/121579-visual-studio)

然而，要让它在这里工作是你可以做的......编写一个 tfs 构建活动，它使用 tfs api 提取最后的构建执行时间，并将其插入到流程工作流中的各个位置，最好是在每个工作流任务之前和之后检查构建已经消耗了多少时间，同时根据预期时间进行测量。使用电子邮件通知任务相应地发送电子邮件。

这是一个示例，向您展示如何获取最后的构建详细信息，[http://blogs.microsoft.co.il/blogs/shair/archive/2011/01/11/tfs-api-part-33-get-build -definitions-and-build-details.aspx](http://blogs.microsoft.co.il/blogs/shair/archive/2011/01/11/tfs-api-part-33-get-build-definitions-and-build-details.aspx)和这里的自定义任务示例[http://msdn.microsoft.com/en-us/library/t9883dzc.aspx](http://msdn.microsoft.com/en-us/library/t9883dzc.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:33:28.620

或者，查询 TFS 构建队列并检查正在进行的构建的运行时间。当任何构建超过定义的阈值时，发送电子邮件。这可以在 Windows 服务中相对轻松地完成。

您将使用 TFS 客户端对象模型来查询这样的构建。Tarun 已经提供了一个很好的链接。

# java - 从列表中的自定义类返回字符串

> ID：11559163
> 
> 赞同：-1
> 
> 时间：2012-07-19T10:46:11.483
> 
> 标签：java, class, list

我有一个班级球员

```
public Player (String name, int num) {
    name = name;
    num= num;
} 
```

//getter 和 setter

然后我会有一个球员名单

```
List<Player> listPlayers = new ArrayList<Player>(); 
```

我需要制定一个方法来返回给定数字的玩家姓名

```
String getPlayerName(int num){
    ...
} 
```

我可以使该方法查看所有列表，但我想以更有效的方式执行此操作。有人可以给我一些提示吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:48:47.900

使用 a`Map<Integer, Player>`存储所有玩家。通过他的地图从地图中获取玩家`num`将非常有效：

```
map.get(num); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:48:42.837

如果您*只有*列表，那么没有什么比遍历列表、找到具有正确编号的玩家并返回名称更有效的了。

我很想将方法更改为

```
public Player getPlayerByNumber(int num) 
```

不过，然后让调用者得到名字。如果您以后想要获取其他值，它会更加灵活。

如果您愿意更改数据结构，则可以使用 a`Map<Integer, Player>`而不是列表 - 类似 a 的东西`HashMap`将允许有效访问。如果您需要保留插入顺序，则需要使用 a `LinkedHashMap`，但这可能不是必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:49:10.713

好吧，如果你试图根据他的号码返回一个玩家，“正确的”数据结构将是一个地图，那么你将使用 playerMap.get(playerNumber) 来获取与该号码对应的玩家。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T10:50:25.317

```
String getPlayerName(int num) {

for(Player player:listPlayers) {
    if(player.getNum() == num) {
    return player.getName();
    }
}
return null;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T10:50:34.413

试试这个..

```
public String getPlayerName(int num){

   for (Player p : listPlayers){

           if (p.getNum()==num){

              return p.getName();
              break();
             }

    }

           return null;

} 
```

**为了更好的方法使用集合，如地图**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T10:54:35.607

而不是 a`ArrayList<Player>`你可以有 a `Map<Integer, Player>`，然后你可以使用你的来访问 Player `num`：

```
Map<Integer, Player> listPlayerList = new HashMap<Integer, Player>();

// fill in your players with the following line
listPlayerList.add(player.getNum(), player);

// remove a player
listPlayer.remove(player.getNum();

// get player with specific num
Player p = listPlayer.get(num);
String name = p.getName();

// iterate over players
for (Player p: listPlayer.values()) {
  doStuffWith(p);
} 
```

如果您不能将您的更改`ArrayList`为 a `Map`，那么您的运气不好，必须遍历您的`ArrayList`并检查`num`每个条目的。

# xcode4.3 - 新类忽略 *.pch 文件的导入 - 为什么？

> ID：11559171
> 
> 赞同：1
> 
> 时间：2012-07-19T10:47:03.963
> 
> 标签：xcode4.3, pch

我有一个使用 Xcode 3 创建的项目，现在想使用 Xcode 4.3 对其进行更新。

我使用了一个`*.pch`效果很好的文件——但是在我现在在 Xcode4.3 中创建的所有新类上，这个 pch 被忽略了，我需要为这些类手动编写导入。

这是错误还是功能:-)？

**为了使 pch 文件适用于新的类文件，我需要做些什么特别的事情吗？**

非常感谢

# cluster-analysis - 在欧几里得空间中寻找“最紧”的子集

> ID：11559174
> 
> 赞同：0
> 
> 时间：2012-07-19T10:47:16.390
> 
> 标签：cluster-analysis, graph-theory, mathematical-optimization, euclidean-distance

我在点 x_1, x_2, ... x_n \in R^d 中给出。我希望找到 k 点的子集，使得这些 k 点之间的距离之和最小。天真地这是一个 O(n 选择 k) 问题，但我正在寻找一种更快的算法。

我可以想到两种替代的等效公式：

1.  最小边权团问题：将点视为一个图，边权重是距离，并找到最小权重团。[这相当于最大边权重问题](https://cstheory.stackexchange.com/questions/2221/heuristics-for-the-minimum-weight-k-clique-problem)，已知它是 NP 完全的。但是，我知道我的图表嵌入在 R^d 中，并且所有权重都是正数，所以这可能会有所帮助吗？

2.  最小无约束子矩阵问题：给定对称距离矩阵，我想找到一个总和最小的 kXk 次要。

我会很感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:09:31.943

最明显的优化实际上并不需要任何不同的公式。

首先贪婪地找到一个接近最佳的候选人。尝试通过交换成员在线性时间内对其进行细化。然后进行详尽的搜索，但只要新候选者比贪婪的候选者更差，就停止以修剪搜索空间。

例如

1.  计算平均值
2.  按与均值的平方距离对对象进行排序
3.  依次测试所有长度为 k 的 nk 个区间，选择最好的
4.  对于任何未选择的对象，尝试将其与选择的对象之一交换，如果它提高了分数

现在你应该有一个相当好的修剪候选者。

然后做一个详尽的搜索，只要它比这个候选人更差就停下来。

注意：步骤 1-3 是从快速凸包算法中获得的灵感。

# actionscript-3 - 阶段变为空

> ID：11559179
> 
> 赞同：0
> 
> 时间：2012-07-19T10:47:28.560
> 
> 标签：actionscript-3, flash

我正在使用 Flash Professional CS5.5 中的 AS3 创建游戏。

在这个游戏中，我有一个“再次”按钮，以便玩家可以重置关卡并从新开始。我现在的问题是：

单击“再次”后，舞台变为空。

我在“ResetLevel”方法中所做的只是将某些元素的 x 和 y 位置设置回 0，从影片剪辑中删除一些项目，但我不会从显示列表中删除所有项目。所以背景，平视显示器，飞机并没有从影片剪辑中删除。这是我的显示列表的草图。可移除项目有时为零，有时为 30 或更多项目（取决于游戏时间，依此类推）

```
Displaylist:

stage
|-- Game movieclip
    |--LevelBackground
    |--Removeable item 
    |--Removeable item
    |--Removeable item
    |--Plane
    |--HUD 
```

但是在删除“可移动项目”并设置 levelbackground 和 plane 的位置坐标后，舞台为空。

也许有人可以帮我指出这个问题的解决方案。

**编辑：**

“ResetLevel”方法将在“游戏动画剪辑”中调用，并且舞台也将从“游戏动画剪辑”访问。因此，当我重置关卡时，我不会从显示列表中删除“游戏动画剪辑”。我只删除了游戏影片剪辑中包含的一些元素。

这里有一些来自“游戏影片剪辑类”（GameMC）的伪代码：

```
public class GameMC extends Sprite {

    //Some properties here

    public function GameMC() {
        //Some code here

        //--Events--
        this.addEventListener(Event.ADDED_TO_STAGE, Init, false, 0, true);
        this.addEventListener(Event.REMOVED_FROM_STAGE, Removed, false, 0, true);
    }

    private function Init(e:Event) {
        this.removeEventListener(Event.ADDED_TO_STAGE, Init);
        //Some Code here
    }

    private function ResetLevel() {
        //Some Code here, too
        if(removeItemArray.length > 0) {
            for(i = 0; i < removeItemArray.length; i++) {
                currentRemoveableItem = removeItemArray[i];
                this.removeChild(currentRemoveableItem );
                removeItemArray.splice(i, 1);
            }
        }
        level.x = 0;
        level.y = 0;

        trace(stage); //Will output null
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:57:13.247

当从 DisplayList 中删除 DisplayObject 时，它不再持有对舞台的任何引用。因此，无论您需要设置/计算什么，都应在有效状态下进行。Event.ADDED、Event.ADDED_TO_STAGE、Event.REMOVED 和 Event.REMOVED_FROM_STAGE 有助于验证 DisplayObject 的状态是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T15:59:43.107

现在我曾经将舞台存储到一个属性中并访问它：

```
public class GameMC extends Sprite { 

    //Some properties here
    private var stagevar:Stage;

    public function GameMC() { 
        //Some code here 

        //--Events-- 
        this.addEventListener(Event.ADDED_TO_STAGE, Init, false, 0, true); 
        this.addEventListener(Event.REMOVED_FROM_STAGE, Removed, false, 0, true); 
    } 

    private function Init(e:Event) { 
        this.removeEventListener(Event.ADDED_TO_STAGE, Init); 
        this.stagevar = stage;
        //Some Code here 
    } 

    private function ResetLevel() { 
        //Some Code here, too 
        if(removeItemArray.length > 0) { 
            for(i = 0; i < removeItemArray.length; i++) { 
                currentRemoveableItem = removeItemArray[i]; 
                this.removeChild(currentRemoveableItem ); 
                removeItemArray.splice(i, 1); 
            } 
        } 
        level.x = 0; 
        level.y = 0; 

        trace(stagevar); //Will output [Object Stage]
    } 
} 
```

# javascript - JavaScript 继承 Object.create

> ID：11559184
> 
> 赞同：1
> 
> 时间：2012-07-19T10:48:00.793
> 
> 标签：javascript, internet-explorer, inheritance, prototype, object-create

好的，我正在尝试跟踪对 Web 应用程序上的巨大表单所做的任何更改。加载页面时，我创建一个 JS 对象，它“捕获”所有输入字段（选择、单选按钮、复选框等）的初始状态。
当用户改变数百个输入元素中的任何一个的值时*，*新值将在第二个对象中进行跟踪。当用户点击`Update`时，这两个对象会进行比较，并且只发送那些已更改的值，以相应地更新数据。

我认为使用继承是明智的，而不是构建 2 个完全独立的对象：

```
var initialState = getInitialState();//eg:{bar:'1',foo:'bar',atom:'bomb',some:{nested:'objects'}}
var tracker = Object.create(initialState); 
```

随着事情的发展，`tracker`对象可能最终看起来像这样：

```
{bar:'0',foo:'bar',atom:'peace',some:{nested:'objects'}} 
```

在 FF 和 chrome 中调用`JSON.stringify`这个对象时，一切都很好：只返回对象自己的属性。在 IE 中不是这样：跟踪器没有`prototype`属性，所以看起来会`Object.create`创建**副本**而不是继承链？
`tracker.__proto__ === initialState`返回 true，而`tracker.prototype === initialState`计算结果为 false，实际上该`tracker.prototype`属性是未定义的。

问题1：是否有另一种方法可以在 IE 中设置继承链，让我*剥离*未更改的原型值？

问题2：我还想要一种方法——如果可能的话——建立一个允许嵌套对象的继承链。就像现在一样，嵌套对象是通过使用递归函数迭代*主对象来处理的。*有点傻，因为那是我想省略的。

**简而言之：**
我想知道这是否存在：

```
var a = {bar:'1',foo:'bar',atom:'bomb',some:{nested:'objects'}};
var b = Object.magicDeepCreate(a);//<=== preferably X-browser
b.bar = '0';
b.bar.some.nested = 'stuff';
console.log(JSON.stringify(b));
//{"bar":"0","some":{"nested":"stuff"}} 
```

与往常一样：没有 jQuery 标签，意味着*没有 jQuery*
注意：我所说的 IE 是指怪物 IE8，而不是 IE9（可悲的是公司政策）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:34:56.993

> `tracker.__proto__ === initialState`返回 true，而`tracker.prototype === initialState`计算结果为 false，实际上该`tracker.prototype`属性是未定义的。

该[`__proto__`属性](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/Proto)是非标准的，仅限 FF。要获取对象的原型对象，请使用[`Object.getPrototypeOf()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/getPrototypeOf). *函数对象*的`prototype`属性是引用该函数的所有实例（使用创建的）继承的对象的属性。*`new`*

 *> 在 IE 中不是这样

[`Object.create()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create/)IE8 完全不支持。您是使用普通垫片还是静默失败？或者你甚至使用了一个真正复制所有属性的函数？

> `Object.magicDeepCreate(a)`，最好是X浏览器

这应该很简单，假设所有目标浏览器都实现`Object.create`：

```
Object.deepCreate = function deepCreate(o) {
    var res = Object.create(o);
    for (var i in o)
        if (Object.hasOwnProperty(o, i) && typeof o[i] == "object")
             res[i] = deepCreate(o[i]);
    return res;
}; 
```

> 仅对已更改的内容进行字符串化

这应该是标准行为`JSON.stringify`- 原型对象不被考虑在内。

但是，我不确定为什么您需要对该`tracker`对象进行继承。只需使用一个空对象，并添加所有已更改的属性。如果要删除已重置为初始状态的那些，可以将其存储在一个额外的对象中进行比较 - 但没有继承的理由。只需使用：

```
Object.emptyStructure = function s(o){
    var res = {};
    for (var i in o)
        if (typeof o[i] == "object")
            res[i] = s(o[i]);
    return res;
};
var initialState = getInitialState();
var tracker = Object.emptyStructure(initialState);

// set:
if (newVal == initialState.some.nested)
    delete tracker.some.nested;
else
    tracker.some.nested = newVal; 
```*

# php - mysqli ::准备SQL错误

> ID：11559186
> 
> 赞同：0
> 
> 时间：2012-07-19T10:48:09.180
> 
> 标签：php, mysql, sql, mysqli

请帮忙 ：）。我得到这个错误：

```
Warning: mysqli::prepare() [mysqli.prepare]: (42000/1064): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '?(id INT NOT NULL AUTO_INCREMENT, PRIMARY KEY(id))' at line 1 in ***/classes/db.mysql.class.php on line 69

Warning: mysqli::prepare() [mysqli.prepare]: (42000/1064): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '?)' at line 1 in ***/classes/db.mysql.class.php on line 75 
```

在这个 php 代码调用中：

```
public function createTable($tableName) {

    $this->connect();

    if ($stmt = $this->dbSocket->prepare("CREATE TABLE ?(id INT NOT NULL AUTO_INCREMENT, PRIMARY KEY(id))")) {
        $stmt->bind_param("s", $tableName);
        $stmt->execute();
        $stmt->close();
    }

    if ($stmt = $this->dbSocket->prepare("INSERT INTO sys_userTables(userTableName) VALUES (u_?)")) {
        $stmt->bind_param("s", $tableName);
        $stmt->execute();
        $stmt->close();
    }

    $this->disonnect();
} 
```

$tableName 是字符串并且正确传递。

connect() 方法是：

```
private function connect() {
    $this->dbSocket = new mysqli($this->dbHost, $this->dbUser, $this->dbPassword, $this->dbDatabase);
    if (mysqli_connect_errno()) {
        printf("Brak połączenia z serwerem MySQL. Kod błędu: %s\n", mysqli_connect_error());
        exit();
    }
} 
```

TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:09:38.280

您不能使用表名作为参数。

如果这样做的目的是创建几个具有相同结构但名称不同的表，我建议使用类似的东西：

```
$table_names = array('a', 'b', 'c');

foreach($table_names as $name) {
  $query = "CREATE TABLE `$name` (id INT NOT NULL AUTO_INCREMENT, PRIMARY KEY(id))";
  // run query or add it to a collection to run later
  // or append a ';' to the end of the string and do it with a multi_query
} 
```

# java - 为java中的对象分配相同的值

> ID：11559187
> 
> 赞同：1
> 
> 时间：2012-07-19T10:48:09.430
> 
> 标签：java, object, clone

假设有两个 abc 类的对象

`abc obj = new abc(10,20);`// 设置两个变量的值。说 x 和 y

`abc obj1 = obj;` // 指向相同的内存所以相同的值

但是，如果有一种方法可以将一个对象的值分配给另一个对象，两者都有差异。记忆。简单地说，我希望复制的值不是地址。任何操作员或其他东西都可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:52:09.603

可以使用`clone()`方法（假设子类实现了`java.lang.Cloneable`接口）

```
abc obj1 = obj.clone() 
```

请记住，默认行为`clone()`是返回对象的浅表副本。这意味着原始对象的所有字段的值都被复制到新对象的字段中（它不会遍历其他对象的整个图形）。

我想“深度复制”可以序列化和反序列化的对象。

*深拷贝对每个对象的字段进行不同的拷贝，递归遍历被复制对象引用的其他对象的整个图*

更多信息：

[http://javatechniques.com/blog/faster-deep-copies-of-java-objects/](http://javatechniques.com/blog/faster-deep-copies-of-java-objects/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:57:57.027

如果使用 clone() 方法，您必须实现 Cloneable 接口并为此方法编写自己的实现。我认为最好在你的类中创建一个复制构造函数并使用它。

例如：

```
public class YourClass() {
     private int prop1;
     private int prop2;
     ...
     // Getters and setters for properties.
     ...

     // Default constructor
     public YourClass() {
     }

     // Copy constructor
     public YourClass(YourClass instance) {
         this.prop1 = instance.getProp1();
         this.prop2 = instance.getProp2();
         // The same for other methods
     }

} 
```

这是关于 StackOverflow 上[的克隆、复制构造函数和工厂方法的好帖子。](https://stackoverflow.com/questions/1106102/clone-vs-copy-constructor-vs-factory-method)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T10:51:36.953

使用**深度克隆**.Implement [Cloneable](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Cloneable.html) Interface in class`abc`并实现`clone()`

```
 abc obj = new abc(10,20); // setting the values of two var. say x and y

 abc obj1 = obj.clone(); 
```

`Cloning`取决于您的班级结构。如果您考虑下面的简单班级，例如您的示例。

```
 class ABC implements Cloneable {

private int a;
private int b;

public int getA() {
    return a;
}

public ABC(int a, int b) {
    super();
    this.a = a;
    this.b = b;
}

public void setA(int a) {
    this.a = a;
}

public int getB() {
    return b;
}

public void setB(int b) {
    this.b = b;
}

@Override
protected Object clone() throws CloneNotSupportedException {
    // TODO Auto-generated method stub
    return super.clone();
}
} 
```

在 main 中测试它会返回**false**。

```
public static void main(String[] args) throws CloneNotSupportedException {

    ABC a = new ABC(1, 2);

    ABC b = (ABC) a.clone();

    System.out.println(a == b);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T10:54:17.273

您必须构造一个新对象。正如其他人指出的那样，您可以通过实现`Cloneable`and来实现这一点`clone()`，但是您也可以通过实现一个构造函数或工厂方法来显式地创建新对象，该方法从原始对象持有的数据中创建新对象。

实现不会有太大差异，但我发现显式实例化不太容易实现错误。

Josh Bloch 在 Effective Java 中对此进行了详细评论。根据您的版本，它是第 3 章中的第[10](http://java.sun.com/developer/Books/effectivejava/Chapter3.pdf)项或第 11 项。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T10:55:55.027

尝试使用“运算符重载”。我知道，我知道，Java 没有它，但这并不能阻止您“使用”它。

您需要做的就是：

```
obj1.copy(obj2); 
```

在 abc 的声明中

```
public void copy(abc other) {
    var1 = other.var1;
    var2 = other.var2;
} 
```

我想强调，这只是来自记忆并且未经测试，但我看不出它为什么不工作的理由。

或者，您可以使用“clone()”，但请注意，您的类中的“引用”会被克隆。真的，最好手动完成。

通过覆盖“复制”，您还可以确保您的子类被正确复制。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-19T10:56:49.357

使用 Object 类的 clone 方法。

```
MyClass mobj = new MyClass("Vivek");

MyClass mobj1 = mobj.clone(); 
```

但是对于深度克隆，请尝试使用`Serialization and Deserialization`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-19T11:19:36.520

您必须使用克隆方法。克隆的默认行为是浅拷贝。

# android - 内部类 AsyncTask 使用周围 Activity 类中的方法？

> ID：11559192
> 
> 赞同：0
> 
> 时间：2012-07-19T10:48:40.030
> 
> 标签：android, android-asynctask

几个月以来让我感到困惑的事情。以下构造是否保存？AsyncTask 是 Activity 中的内部类。AsyncTask 调用 Activity 类中的方法。此方法不使用活动对象或 UI 调用。

```
public class MyActivity extends Activity {

    private class MyAsyncTask extends AsyncTask<Void, Void, Void> {

        @Override
        protected void doInBackground(...) {
            longRunningMethod();
        }

        @Override
        protected void onPostExecute(... ) {
        }

        @Override
        protected void onPreExecute (...) {
        }
    }

    private void longRunningMethod() {
        // ...
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:56:12.750

只要它不尝试修改 UI，它就是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:57:54.747

如果不更新 UI，则安全，如果您正在更新 UI，则可以使用 runOnUiThread 方法。

# actionscript-3 - as3中创建选择工具

> ID：11559200
> 
> 赞同：1
> 
> 时间：2012-07-19T10:49:03.837
> 
> 标签：actionscript-3, flash, flash-cs5, flashdevelop

嗨，我正在开发一种打印工具，用户可以在其中绘制和编辑形状。我已经开发了绘制形状的工具，但我不知道如何开发一个选择工具，用户可以选择多个对象并可以编辑它们。如果有人有解决方案，请帮助我开发此应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:15:33.213

我使用了 senocular.com 的[这个转换工具，到目前为止它似乎已经满足了我的所有目的。](http://www.senocular.com/?id=1.371)

您可以选择性地选择要使用的功能，并且代码的调整相对简单。

此外还有一个[演示](http://www.senocular.com/demo/TransformToolAS3/TransformTool.html)，使用相同的。

# c - base64的解码表构造

> ID：11559203
> 
> 赞同：5
> 
> 时间：2012-07-19T10:49:13.700
> 
> 标签：c, base64

我正在阅读这个[libb64](http://libb64.sourceforge.net/)源代码，用于编码和解码 base64 数据。

我知道编码过程，但我不知道如何构建以下解码表以进行快速查找以执行编码的 base64 字符的解码。这是他们正在使用的表格：

```
static const char decoding[] = {62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-2,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51}; 
```

有人能解释一下这个表中的值如何用于解码目的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T10:57:16.277

这是一个移位和有限的 ASCII 转换表。表的键是 ASCII 值，值是 base64 解码值。该表被移动，使得索引`0`实际上映射到 ASCII 字符`+`，并且任何进一步的索引都映射 ASCII 值之后`+`。表中的第一个条目，即 ASCII 字符`+`，映射到 base64 值`62`。然后忽略三个字符 (ASCII `,-.`) 并将下一个字符映射到 base64 值`63`。下一个字符是 ASCII `/`。

如果您查看该表和[ASCII 表](http://en.wikipedia.org/wiki/ASCII#ASCII_printable_characters)，其余部分将变得显而易见。

它的用法是这样的：

```
int decode_base64(char ch) {
    if (ch < `+` or ch > `z`) {
        return SOME_INVALID_CH_ERROR;
    }

    /* shift range into decoding table range */
    ch -= `+`;

    int base64_val = decoding[ch];

    if (base64_val < 0) {
        return SOME_INVALID_CH_ERROR;
    }

    return base64_val;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-15T03:33:03.787

众所周知，每个字节有 8 位，可能有 256 种组合与 2 个符号（base2）。
使用 2 个符号需要浪费 8 个字符来表示一个字节，例如 '01010011'。
使用基数 64 可以用 1 个字符表示 64 种组合...
所以，我们有一个基表：
A = 000000
B = 000001
C = 000010
...
如果你有“Man”这个词，那么你就有了字节：
01001101、01100001、01101110等
：
01101010110000101101110

六位组中断：010011 010110 000101
10111010011010011010011 = T
010110 = W 000101 = W 000101
= F 101110 = f 101110 = f
101110 = u
so，'so，'Man'= base64'=> Base64'=> base64'='Twfu'。
正如所见，这对于长度为 6 的倍数的流非常有效。

如果您的流不是 6 的倍数，例如“Ma”，则您有以下流：
010011 010110 0001
您需要完成才能拥有 6 组：
010011 010110 000100
，因此您拥有编码基数 64：
010011 = T
010110 = W
000100 = E
所以，'Ma' => 'TWE'

在解码流之后，在这种情况下，您需要将最后的倍数长度计算为 8 的倍数，因此删除额外的位以获得原始流：
T = 010011
W = 010110
E = 000100
1) 010011 010110 000100
2) 01001101 01100001 00
3) 01001101 01100001 = '马'
实际上，当我们放置尾随 00 时，我们用 '=' 标记 Base64 字符串的结尾添加到每个尾随 '00（'Ma' ==> Base64 'TWE='）

参见链接：[http://www .base64decode.org/](http://www.base64decode.org/)

在 base 64 上表示的图像是一个很好的选择，可以在许多应用程序中用字符串表示，因为这些应用程序很难直接使用真正的二进制流。真正的二进制流更好，因为它是 base256，但在 HTML 中很难，例如，有 2 种方式，较小的流量，或者更容易使用字符串。

参见 ASCII 代码，base 64 的字符在表 ASCII 上从范围 '+' 到 'z' 但在 '+' 和 'z' 之间有一些值不是 base 64 符号

'+' = ASCII DEC 43
...
'z' = ASCII DEC 122
从 DEC 43 到 122 是 80 个值，但
43 OK = '+'
44 不是 base 64 符号，因此解码索引为 -1（base64 的无效符号）
45 ... .
46 ...
...
122 OK = 'z'
执行解码所需的字符，将 43 ('+') 递减为向量上的索引 0，以便通过索引快速访问，因此，解码 [80] = {62, -1, -1 ........, 49, 50,51};

Roberto Novakosky
开发者系统

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-11T17:38:24.397

考虑这两个映射表：

```
static const char decodingTab[] = {62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-2,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51};
static unsigned char encodingTab[64]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"; 
```

decodeTab 是 encondingTab 的反向映射表。所以decodeTab[i] 永远不应该是-1。事实上，预计只有 64 个值。但是decodeTab的大小是128。所以，在decodeTab中，意外的索引值被设置为-1（一个不在[0,63]中的任意数字）

```
char c;
unsigned char i;
...
encoding[decoding[c]]=c;
decoding[encoding[i]=i; 
```

希望能帮助到你。

# .net - 网站无法连接到 SQL 服务器并出现错误 - 26 服务器未找到

> ID：11559205
> 
> 赞同：-3
> 
> 时间：2012-07-19T10:49:31.367
> 
> 标签：.net, sql-server

我正在开发一个网站，但是当我在我的网站中添加数据库时，会出现这样的错误：

与 SQL Server 建立连接时发生网络相关或特定错误。服务器未找到或无法访问。验证实例名称是否正确以及是否将 Sql 服务器配置为允许远程连接。（提供者：SQL网络接口，error 26-error locating Server/Instance Specified）

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T15:15:54.470

Web 上有大量资源可用于调试此错误。
这是一个：[http ://www.sqlserver-dba.com/2011/05/sql-server-error-26-troubleshooting-checklist.html](http://www.sqlserver-dba.com/2011/05/sql-server-error-26-troubleshooting-checklist.html)

# slider - 如何使用 flexslider 设置多个滑块？

> ID：11559209
> 
> 赞同：4
> 
> 时间：2012-07-19T10:49:41.597
> 
> 标签：slider, flexslider

我使用 flexslider，当我按照他们网站上的说明操作时，它不适用于多个滑块，这是代码：

我需要两个滑块上的控制器导航，说明在这里： [http ://www.woothemes.com/flexslider/](http://www.woothemes.com/flexslider/)

有人我做错了吗？

```
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<link rel="stylesheet" href="http://www.esens.nl/assets/templates/esens/flexslider/flexslider.css" type="text/css" media="screen" />
<script src="http://www.esens.nl/assets/templates/esens/flexslider/jquery.flexslider-min.js"></script>

<!-- Target sliders individually with different properties -->
<script type="text/javascript" charset="utf-8">
  $(window).load(function() {
    $('#main-slider').flexslider({
      animation: 'slide',
      controlsContainer: '.flex-container'
    });

    $('#secondary-slider').flexslider();
  });
</script>

<!-- Somewhere in the  of your page -->
<div id="main-slider" class="flexslider">
  <ul class="slides">
        <li><img src="http://i00.i.aliimg.com/img/pb/951/248/411/411248951_991.jpg" /></li>
        <li><img src="http://espn.go.com/i/eticket/20070515/photos/etick_on_08.jpg" /></li>
        <li><img src="http://www.pizzapartyweekend.com/pizza.jpg" /></li>
        <li><img src="http://espn.go.com/i/eticket/20070515/photos/etick_on_08.jpg" /></li>
  </ul>
</div>

<br><br><br>

<div id="secondary-slider" class="flexslider">
  <ul class="slides">
        <li><img src="http://images.forum-auto.com/mesimages/651885/Noir%20Fantome.png" /></li>
        <li><img src="http://www.pizzapartyweekend.com/pizza.jpg" /></li>
        <li><img src="http://espn.go.com/i/eticket/20070515/photos/etick_on_08.jpg" /></li>
        <li><img src="http://i00.i.aliimg.com/img/pb/951/248/411/411248951_991.jpg" /></li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T11:28:53.923

```
<!-- Target sliders individually with different properties -->
<script type="text/javascript" charset="utf-8">
  $(window).load(function() {
    $('#main-slider').flexslider({
      animation: 'slide',
      controlsContainer: '.flex-container'
    });

    $('#secondary-slider').flexslider({
      animation: 'slide',
      controlsContainer: '.flex-container'
    });
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-15T00:25:40.547

**[我在Jsfiddle](http://jsfiddle.net/charly2k12/bmfxb3xv/)中的 Live 解决方案在这里**

```
<!-- Target sliders individually with different properties -->
<script type="text/javascript" charset="utf-8">
/*-----------------------------------------------------------------------------------*/
/* DOC Javascript JS */ 
/*-----------------------------------------------------------------------------------*/
(function($, window){
/*-----------------------------------------------------------------------------------*/
    window.app = {};
    /*--------------------------------------------------------------------------------*/

    app.uiSlide =
    {
        /* Test elem and Call flexslider() */
        flexslider:     function ( elem, params ) {
                            // Test if elem exist in dom
                            if( $(elem).length > 0 ){
                                 // Call function
                                 $(elem).flexslider(params);
                            };
        },
        /* Define and init all elem */
        init:           function () {

                            // 1 Define Objects Collection
                            var elem =
                            [
                                // Slider A
                                {
                                    slide: '#flexslider-a',
                                    param: {
                                        animation:          'slide',
                                        controlsContainer:  '.flex-container'
                                    } 
                                },
                                // Slider B
                                {
                                    slide: '#flexslider-b',
                                    param: {
                                        animation:          "slide",
                                        controlNav:         false,
                                        animationLoop:      true,
                                        slideshow:          false,
                                        smoothHeight:       true,
                                    } 
                                }
                                // Add Slide XYZ
                                //...
                                //...
                            ];

                            // 2 Init All
                            for( var i=0; i < elem.length; i++ ){
                                this.flexslider( elem[i].slide, elem[i].param )
                            }

        }
    };

    /* init all function() */
    app.start =
       function(){
           this.uiSlide.init()
       };
   /*--------------------------------------------------------------------------------*/
    $(document).ready(function(){app.start();})
/*-----------------------------------------------------------------------------------*/
})(jQuery, window)
</script>

<!-- Somewhere in the of your page -->

<!-- SLIDER A -->
<div id="flexslider-a" class="flexslider">
  <ul class="slides">
        <li><img src="http://i00.i.aliimg.com/img/pb/951/248/411/411248951_991.jpg" /></li>
        <li><img src="http://espn.go.com/i/eticket/20070515/photos/etick_on_08.jpg" /></li>
        <li><img src="http://www.pizzapartyweekend.com/pizza.jpg" /></li>
        <li><img src="http://espn.go.com/i/eticket/20070515/photos/etick_on_08.jpg" /></li>
  </ul>
</div>

<br><br><br>

<!-- SLIDER B -->
<div id="flexslider-b" class="flexslider">
  <ul class="slides">
        <li><img src="http://images.forum-auto.com/mesimages/651885/Noir%20Fantome.png" /></li>
        <li><img src="http://www.pizzapartyweekend.com/pizza.jpg" /></li>
        <li><img src="http://espn.go.com/i/eticket/20070515/photos/etick_on_08.jpg" /></li>
        <li><img src="http://i00.i.aliimg.com/img/pb/951/248/411/411248951_991.jpg" /></li>
  </ul>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-15T21:04:14.063

*OP解决的问题：*

> 我已经弄清楚了，我正在使用一些旧文件。我使用 flexslider，当我按照他们网站上的说明操作时，它不适用于多个滑块，这是代码：

```
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<link rel="stylesheet" href="http://www.xxx.nl/assets/templates/esens/flexslider/flexslider.css" type="text/css" media="screen" />
<script src="http://www.xxx.nl/assets/templates/esens/flexslider/jquery.flexslider-min.js"></script>

<!-- Target sliders individually with different properties -->
<script type="text/javascript" charset="utf-8">
  $(window).load(function() {
    $('#main-slider').flexslider({
      animation: 'slide',
      controlsContainer: '.flex-container'
    });

    $('#secondary-slider').flexslider();
  });
</script>

<!-- Somewhere in the  of your page -->
<div id="main-slider" class="flexslider">
  <ul class="slides">
        <li><img src="http://i00.i.aliimg.com/img/pb/951/248/411/411248951_991.jpg" /></li>
        <li><img src="http://espn.go.com/i/eticket/20070515/photos/etick_on_08.jpg" /></li>
        <li><img src="http://www.pizzapartyweekend.com/pizza.jpg" /></li>
        <li><img src="http://espn.go.com/i/eticket/20070515/photos/etick_on_08.jpg" /></li>
  </ul>
</div>

<br><br><br>

<div id="secondary-slider" class="flexslider">
  <ul class="slides">
        <li><img src="http://images.forum-auto.com/mesimages/651885/Noir%20Fantome.png" /></li>
        <li><img src="http://www.pizzapartyweekend.com/pizza.jpg" /></li>
        <li><img src="http://espn.go.com/i/eticket/20070515/photos/etick_on_08.jpg" /></li>
        <li><img src="http://i00.i.aliimg.com/img/pb/951/248/411/411248951_991.jpg" /></li>
  </ul>
</div> 
```

# php - 当第一个完成时触发第二个 ajax 函数

> ID：11559212
> 
> 赞同：0
> 
> 时间：2012-07-19T10:49:47.617
> 
> 标签：php, ajax, jquery

好的，所以我在第一次调用完成后尝试启动 ajax 调用。我有一个带有 3 个下拉菜单的表单。第一个菜单 onload 运行脚本以返回值。然后我想将 vale 输入第二个脚本并运行脚本来填充第二个第三个菜单。

第二个下拉列表填充第一个的 onChange。这很好用。然后，我希望将该馈送的结果输入到第三个下拉列表中。我知道我的外部查询是正确的，我只是认为 ajax 是错误的。这是我的 Ajax 调用....

```
<script type="text/javascript" charset="utf-8">

jQuery(document).ready(function() {
jQuery('#networks').trigger('change');
});

function get_cities(networks)
{
$.ajax({
   type: "POST",
   url: "select.php", 
   beforeSend:  function () {
  $("#folder").html("<option>Loading ...</option>");
    },
   data: "idnetworks="+networks +"&par="+ <?php echo $row_rs_doc['parentid']; ?>,

   success: function(msg){
     $("#folder").html(msg);
   }

   });

} 
</script>
<script type="text/javascript" charset="utf-8">

jQuery(document).ready(function() {  
jQuery('#folder').trigger('change');
});

function get_sub(folder)
{
$.ajax({
   type: "POST",
   url: "select2.php", 
   beforeSend:  function () {
  $("#subfolder").html("<option>Loading ...</option>");
    },
   data: "iddocs="+folder,

   success: function(msg){
     $("#subfolder").html(msg);
   }

   });

} 
</script> 
```

好的，这是表单字段

```
<select name="networks" id="networks" onChange='get_cities($(this).val())'>
   <?php create(network, networkid, netname);?>
  </select>

<select name="folder" id="folder" onChange='get_sub($(this).val())'>

</select>

<select name="subfolder" id="subfolder">

</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:51:46.153

亲吻它。只需将第二个 ajax 调用放在`success`第一个调用中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:53:24.473

您可以使用延迟对象，这将允许您启动其他操作，而无需重写现有的事件处理程序，也无需过多地嵌套代码：

```
var req1 = $.ajax(...);

req1.done(function() { ... } );  // start your second request 
```

# jquery - 嵌套的 Ajax 请求，好的还是坏的做法？

> ID：11559214
> 
> 赞同：1
> 
> 时间：2012-07-19T10:49:54.340
> 
> 标签：jquery, ajax

我必须使用 jQuery 向服务器发出一系列 Ajax 发布请求，每个请求都取决于先前响应的结果，例如

```
预处理数据 Ajax（返回作业数组）{
    register-job-Ajax（返回 job_id）{
       对于每个准备好的数据索引 i{
           submit_job_Ajax（job_id，jobs_array[i]）{
               如果（最后一个返回的工作）{
                   unregister_job-Ajax(jon_id){
                       后处理-数据-Ajax；
                   }                   
               }
           }
       }
    }

}

```

这会产生大量不可读的代码并且很难调试。只是想知道是否有人知道如何避免嵌套的 Ajax 请求，或者向我指出一个替代解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:55:38.693

使用成功回调

```
$.ajax({
  url: "URL",
  data: "DATA",
  success: function(data) {

    //data contains the returned data
    //Next ajax here

  }
}); 
```

# xml - XML 格式在使用 XDocument 与 XmlWriterSettings 保存时丢失

> ID：11559216
> 
> 赞同：1
> 
> 时间：2012-07-19T10:49:55.957
> 
> 标签：xml, f#, xsd, linq-to-xml

我正在尝试更新 XML，但想保留格式{缩进}而不插入 XmlDeclaration 标记。以下是我正在应用的代码段。

```
let UpdateAndSave (configFileName:string) = 
    let xmlDoc = XDocument.Load(configFileName)
    xmlDoc.XPathEvaluate(@"Product/SomeTag/Attr[@type='Value']") :?> _
    |> Seq.cast<XElement>
    |> Seq.iter (fun elem -> elem.AddAfterSelf(XElement.Parse("<Risk type=\"123\" methodology=\"Sample\"/>")))
    do 
        let xmlWriterSettings = new XmlWriterSettings()
        xmlWriterSettings.OmitXmlDeclaration = true
        xmlWriterSettings.Indent = true
        using(XmlWriter.Create(configFileName, xmlWriterSettings))(fun xmlFileWriter -> 
        xmlDoc.Save(xmlFileWriter)
        )   
    configFileName 
```

更新后，xml 格式完全丢失，并且“XmlDeclaration”标签也被插入。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T11:07:05.207

在 F# 中，`=`是比较运算符，`<-`而是对可变字段的赋值。我希望编译器抱怨在您的示例`xmlWriterSettings.OmitXmlDeclaration = true`中没有`unit`价值。

此外，您的`do`块似乎是多余的，为了简洁起见`using`可以替换`use`为。

```
let xmlWriterSettings = new XmlWriterSettings()
xmlWriterSettings.OmitXmlDeclaration <- true
xmlWriterSettings.Indent <- true
use xmlWriter = XmlWriter.Create(configFileName, xmlWriterSettings)
xmlDoc.Save(xmlWriter) 
```

# php - 请帮我连接 PHP 脚本中另一个文件夹中的文件

> ID：11559218
> 
> 赞同：0
> 
> 时间：2012-07-19T10:49:58.260
> 
> 标签：php, require, fpdf

找出错误“FPDF 错误：流意外结束”，FPDF 类在文件夹`/ FPDF/fpdf.php`中，但如果我这样做了，我会以这种方式连接 -

```
require ('/FPDF/fpdf.php'); 
```

然后一个错误PHP

> 致命错误：require() [function.require]: Failed opening required '../FPDF/fpdf.php' (include_path = '.:/usr/lib/php:/usr/local/lib/php') in/ home/u552896297/public_html/createPdfFromBase64.php 在第 20 行

**告诉我如何附加另一个文件夹中的文件？**

*我试图以这种方式连接 -*

```
require ($ _SERVER ['DOCUMENT_ROOT']. '/ FPDF / fpdf.php'); 
```

但在那之后，一般来说，并覆盖了警告和致命错误（（（

> 警告：require () [function.require]: open_basedir 限制生效。文件（/usr/local/apache/htdocs/FPDF/fpdf.php）不在允许的路径（s）内：（/home/:/usr/lib/php:/tmp:/usr/share/locale） /home/u552896297/public_html/createPdfFromBase64.php 第20行
> 
> 警告：require (/usr/local/apache/htdocs/FPDF/fpdf.php) [function.require]: failed to open stream: Operation not allowed in /home/u552896297/public_html/createPdfFromBase64.php on line 20
> 
> 致命错误：require() [function.require]: Failed opening required '/usr/local/apache/htdocs/FPDF/fpdf.php' (include_path = '.:/usr/lib/php:/usr/local/lib /php ') 在/home/u552896297/public_html/createPdfFromBase64.php 第20行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:57:15.493

**open_basedir**在您的配置 php 中未激活...

您可以在 php.ini
[http://www.php.net/manual/en/ini.core.php#ini.open-basedir中更改它](http://www.php.net/manual/en/ini.core.php#ini.open-basedir)

# parse-platform - 为用户上传和保存图片到 parse.com 数据库 - Ruby on Rails 网站

> ID：11559220
> 
> 赞同：0
> 
> 时间：2012-07-19T10:49:59.573
> 
> 标签：parse-platform

我是 parse.com 和 REST API 的新手。我有一个网站，其数据库位于 parse.com

我想允许用户上传个人资料图片，然后将其存储在用户的 parse.com 数据库中。我看看它的 REST API：[https ://www.parse.com/docs/rest#files](https://www.parse.com/docs/rest#files)

但我不太明白如何将它与 ruby​​ on rails 集成以允许用户上传他/她的图片。

如果有人可以提供帮助，我将不胜感激。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T01:38:08.197

查看我们的[http://github.com/adelevie/parse-resource](http://github.com/adelevie/parse-resource)或[http://github.com/adelevie/parse-ruby-client](http://github.com/adelevie/parse-ruby-client)以获取 Parse + Ruby 入门的帮助。

# matlab - 如何优化matlab中的嵌套for循环

> ID：11559221
> 
> 赞同：3
> 
> 时间：2012-07-19T10:50:04.757
> 
> 标签：matlab, optimization, vectorization

我在 matlab 程序中有一个嵌套三次的 for 循环。谁能帮我优化一下。

```
w=5;
a = rand(m*n,10); b=rand(m,n);
for i = 1 : m
   for j = 1 : n
      for k = 1 : l
         if (i-w >= 1 && i+w <= m)
             featureL = a(((i-1)*n)+j,:); featureR = a(((i-1)*n)+j-d,:);
             D1(i,j,k) = sqrt( sum( (featureL - featureR) .* (featureL - featureR) ) );
             D2(i,j,k) = mean2( b(i-w:i+w, j-w:j+w) );
         end
      end
   end
end 
```

我知道使用 meshgrid 可以大大提高性能，但我不知道该怎么做。

感谢期待。

可以做这样的事情吗..

```
[X Y Z] = meshgrid(1:m,1:n,1:l);
D1(something containing X,Y,Z) = sqrt( sum( ( a(something cont. X,Y) - a(something cont. X,Y)).*(a(something cont. X,Y) - a(something cont. X,Y)) ) );
% similarly D2 
```

非常感谢！。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:55:57.553

我发现攻击这些东西的好方法是渐进式的。首先检查最内层循环中的所有内容，看看是否可以在更高级别完成。这将减少重复计算。

例如，您可以执行`if (i-w >= 1 && i+w <= m)`更高的两个级别（因为它仅取决于`i`、`w`和`m`），减少 if 检查并跳过循环迭代。完成后，您的`featureL`计算`featureR`可以上移一级；它们在`k`循环内执行，但仅依赖于`j`. 类似地，`sqrt( sum( (featureL - featureR) .* (featureL - featureR) ) )`可以在`k`循环之外计算，放入变量中，然后再赋值。

事实上，据我所知，您可以摆脱整个`k`循环，因为`k`从未使用过。这是您的代码，其中一些已应用：

```
w=5; 
a = rand(m*n,10); 
b=rand(m,n); 
for i = 1 : m
    if (i-w >= 1 && i+w <= m)
        for j = 1 : n
            featureL = a(((i-1)*n)+j,:); 
            featureR = a(((i-1)*n)+j-d,:);
            x = sqrt( sum( (featureL - featureR) .* (featureL - featureR) ) );
            y = mean2( b(i-w:i+w, j-w:j+w) )           
            D1(i,j,:) = x;              
            D2(i,j,:) = y;
        end    
    end 
end 
```

# php - 找出 PHP 解释器当前卡在哪里？

> ID：11559222
> 
> 赞同：0
> 
> 时间：2012-07-19T10:50:07.547
> 
> 标签：php, debugging, xdebug

我有一个 PHP 脚本卡住了，但我不知道代码在哪里。

我正在使用 Xdebug。

如何找出服务器当前卡在代码的哪一行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:53:53.063

卡住？如果您的意思是花费最多时间的行，那么您可以设置 xdebug 以生成跟踪转储并使用[kcachegrind](http://kcachegrind.sourceforge.net/html/Home.html)或[webgrind分析它们](http://code.google.com/p/webgrind/)

如果你把它放到你的 php.ini 中：

```
[xdebug]
xdebug.profiler_enable_trigger = 1 
```

`?XDEBUG_PROFILE`您可以通过添加到您的网址来生成转储。保存转储的默认目录是 /tmp/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:53:38.210

跟踪[执行](http://xdebug.org/docs/execution_trace)或使用[分析器](http://xdebug.org/docs/profiler)。

# objective-c - 如何检查 iOS 上日期的格式是什么？

> ID：11559227
> 
> 赞同：0
> 
> 时间：2012-07-19T10:50:30.570
> 
> 标签：objective-c, ios, format

在我的应用程序中，我从服务器获取了一些日期。一些日期采用这种格式：`"MMM dd, yyyy hh:mm:ss a"`而另一些采用这种格式：`"yyyy-MM-dd HH:mm:ss Z"`。我以上述格式之一从服务器获取日期作为字符串。但是我希望我所有的日期都采用第一种格式。那么我如何比较日期是否为第二种格式以便我可以更改它？我知道如何更改格式，只是不知道如何将日期与特定格式进行比较。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:53:53.310

如果这些是唯一的格式，只需检查一些简单的东西，比如第五个字符是破折号，那么它是第二个，否则是第一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:00:36.993

如果您知道任何给定返回字符串的格式，那么您可以明确地为获取日期的每次迭代设置格式，然后将其转换为您需要的任何格式。像这个例子；

```
NSString *myString1 = @"01-30-2012"; 
NSString *myString2 = @"30-01-2012"; 

// Now convert the string to a date object 
NSDateFormatter *myDateFormat = [[NSDateFormatter alloc] init]; 

[myDateFormat setDateFormat:@"dd-MM-yyyy"]; 
NSDate *date1 = [myDateFormat dateFromString:myString1]; 

[myDateFormat setDateFormat:@"MM-dd-yyyy"]; 
NSDate *date2 = [myDateFormat dateFromString:myString2]; 
[myDateFormat release]; 
```

# java - 使用 Liferay 的 DynamicQuery 按另一个表排序

> ID：11559229
> 
> 赞同：0
> 
> 时间：2012-07-19T10:50:37.873
> 
> 标签：java, liferay, liferay-6, dynamicquery

我在 Liferay 6 中进行动态查询时遇到问题。我正在尝试`JournalArticles`根据他们的`view count`. 视图计数在另一个表 ( `AssetEntry`) 中指定。

我坚持这个：

```
DynamicQuery query = DynamicQueryFactoryUtil.forClass(
JournalArticle.class, "articleParent", PortalClassLoaderUtil.getClassLoader());

//adding criterions
query.add(...);

DynamicQuery dq0 = DynamicQueryFactoryUtil.forClass(AssetEntry.class, "asset", 
PortalClassLoaderUtil.getClassLoader())
.setProjection(ProjectionFactoryUtil.property("asset.classPK"))
.add(PropertyFactoryUtil.forName("asset.companyId")
.eqProperty("articleParent.companyId"))
.add(PropertyFactoryUtil.forName("asset.groupId")
.eqProperty("articleParent.groupId"));

query.add(PropertyFactoryUtil.forName("articleParent.resourcePrimKey").in(dq0))
            .addOrder(OrderFactoryUtil.desc("asset.viewCount")); 
```

有了这个，我收到一条错误消息：`could not resolve property: asset of: com.liferay.portlet.journal.model.impl.JournalArticleImpl`.

如果我删除`addOrder`-call，这个错误就会消失。我应该如何添加订单语句以便主查询知道`asset.viewCount`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:44:15.963

```
AssetEntryQuery assetEntryQuery = new AssetEntryQuery();
assetEntryQuery.setClassName(JournalArticle.class.getName());
assetEntryQuery.setXXX //adding criterions
assetEntryQuery.setOrderByCol1("viewCount");
List<AssetEntry> assetEntries = AssetEntryServiceUtil.getEntries(assetEntryQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:38:36.403

恐怕没有直接的方法可以用`DynamicQuery`API 做到这一点。

我认为您需要将[`Service builder Finders`](http://www.liferay.com/community/wiki/-/wiki/Main/Service+Builder+Finders)即[自定义查询](http://www.liferay.com/en/community/wiki/-/wiki/1071674/Custom+queries+in+Liferay+5.2)与服务生成器一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:19:54.437

您不能使用动态查询，因为 JournalArticle 实体没有直接引用 AssetEntry 实体。

一种可能性是从 AssetEntry 表（基本上是您的 dq0）中检索文章的有序 ID，然后执行另一个查询并以编程方式进行排序（您有排序的 ID）。

最后我认为这条线

```
query.add(PropertyFactoryUtil.forName("articleParent.resourcePrimKey").in(dq0)) 
```

不做你认为它做的事。resoucePrimKey 是对资源表的权限引用。您需要使用 id 列。

# scala - 如何从scala中的两个字符串列表中获取唯一元素？

> ID：11559232
> 
> 赞同：1
> 
> 时间：2012-07-19T10:50:42.273
> 
> 标签：scala

我有两个要比较的列表：

清单一：

```
List("one","two","three","four") 
```

列举二：

```
List("one","two") 
```

如何从这两个列表中获取唯一值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T10:55:53.140

如果您的两个列表是`r1`and `r2`，并且假设您希望每个列表中的值不存在于另一个列表中：

```
r1.filterNot(r2.contains) ::: r2.filterNot(r1.contains) 
```

或者

```
r1.diff(r2) ::: r2.diff(r1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T16:22:46.457

把它们变成集合，然后得到交叉点。然后，您可以根据需要将其转回`Seq`，但首先要问自己他们是否必须`Seq`排在第一位，而不是`Set`.

```
scala> List("one","two","three","four").toSet & List("one","two").toSet
res0: scala.collection.immutable.Set[String] = Set(one, two) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T10:53:30.120

对 Set 使用差分运算符`&~`

[http://www.scala-lang.org/api/current/scala/collection/immutable/Set.html](http://www.scala-lang.org/api/current/scala/collection/immutable/Set.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T12:52:34.230

我`List(1, 2, 3, 4) ::: List(1, 2, 5) distinct`用于这个问题。它返回`List(1, 2, 3, 4, 5)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-31T13:52:41.553

我建议使用以下 O(m+n) 运行时间（假设输入数组已排序）。

```
def mergeUniqueSortedArrays( A: Array[String], B: Array[String] ): Array[String]= {
  val n = A.length
  val m = B.length
  var C = Array[String]()
  var i = 0
  var j = 0
  while (i < n && j < m) {
    if (i == n) {
      if ( B(j) != A(i-1) ) {
        C :+= B(j)
      }
      j+=1
    }
    else if (j == m) {
      if ( A(i) != B(j-1) ) {
        C :+= A(j)
      }
      i+=1
    }
    else {
      if ( A(i) < B(j) ) {
        if (C.length == 0 || A(i) != C(C.length-1)) {
          C :+= A(i)
        }
        i+=1
      }
      else if ( B(j) < A(i) ) {
        if (C.length == 0 || B(j) != C(C.length-1)) {
          C :+= B(j)
        }
        j+=1
      }
      else {
        if (C.length == 0 || A(i) != C(C.length-1)) {
          C :+= A(i)
        }
        i+=1
        j+=1
      }
    }
  }
  return C
} 
```

--

注意：如果输入数组未排序，那么您可以轻松地对输入数组进行排序，假设 n>m，它将在 O(max{(n + m), (n log n)}) 时间内运行。

注意： O(n + m) 时间在技术上假设字符串长度受常数 k 的限制，但无论如何你都不会绕过它。

# macos - NSPopUpButton 多选

> ID：11559241
> 
> 赞同：6
> 
> 时间：2012-07-19T10:51:20.667
> 
> 标签：macos, cocoa, nspopupbutton, multipleselection

有没有人知道如何制作一个带有多个选择的 NSPopUpButton ，就像这样。 ![在此处输入图像描述](../Images/842212d9f15330f3214f44f38820368b.png)

# ios5 - iPhone Sdk 中的 UIImageView 旋转和缩放

> ID：11559250
> 
> 赞同：0
> 
> 时间：2012-07-19T10:51:49.793
> 
> 标签：ios5, uiimageview, quartz-2d, image-rotation, zooming

我在我的项目中使用 UIImageview 实现缩放和旋转，我在旋转图像后面临放大和缩小问题，

这是我的代码如下：

在 .h 文件中

```
@interface ViewController : UIViewController{
 float degrees;
 float height;
 float width;

float moveLeft;
float moveRight;
}

@property(nonatomic,retain)UIImageView *imageView;

-(IBAction)rotationLeft:(id)sender;
-(IBAction)rotationRight:(id)sender;
-(IBAction)zoomIn:(id)sender;
-(IBAction)zoomOut:(id)sender;

-(IBAction)moveLeft:(id)sender;
-(IBAction)moveRight:(id)sender; 
```

在 .m 文件中

```
- (void)viewDidLoad
{
[super viewDidLoad];

height=50;
width=50;
degrees=20;
moveLeft=20;
moveRight=20;
imageView=[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"1.png"]];
imageView.frame=CGRectMake(100, 100,width, height);
[self.view addSubview:imageView];

// Do any additional setup after loading the view, typically from a nib.
}
-(IBAction)rotationLeft:(id)sender{
//the value in degrees
imageView.transform = CGAffineTransformMakeRotation(degrees*M_PI/180);
degrees=degrees+25;
}

-(IBAction)rotationRight:(id)sender{
//the value in degrees
degrees=degrees-25;
imageView.transform = CGAffineTransformMakeRotation(degrees*M_PI/180);

}
-(IBAction)zoomIn:(id)sender{
height=height-15;
width=width-15;
imageView.frame=CGRectMake(100, 100,width, height);
}
-(IBAction)zoomOut:(id)sender{
height=height+15;
width=width+15;
imageView.frame=CGRectMake(100, 100,width, height);
} 
```

请找到随附的图片供您参考。![在此处输入图像描述](../Images/36ff39ddfdcd89fa8b901345e0b33ef5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:05:04.777

您应该`CGAffineTransformMakeScale`用于缩放目的，而不是强制框架。

然后在某个地方定义一个全局`foal x = 1;`：

```
-(IBAction)zoomIn:(id)sender{
   x += 0.3;
   imageView.transform = CGAffineTransformMakeScale(x, x);
}

-(IBAction)zoomOut:(id)sender{
   x -= 0.3;
   imageView.transform = CGAffineTransformMakeScale(x, x);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:06:18.997

我建议使用与您拥有的旋转代码非常相似的方法来缩放图像：

```
CGAffineTransformMakeScale(CGFloat sx, CGFloat sy); 
```

发送大于 1.0 放大，小于 1.0 缩小；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T06:17:33.710

下面的代码对我来说很完美！！！

```
-(IBAction)rotationLeft:(id)sender{
//the value in degrees
    degrees=degrees+25;
    CGAffineTransform t;
    t=CGAffineTransformMakeScale(x, x);
    // imageView.transform = CGAffineTransformMakeRotation(degrees*M_PI/180,x,x);
    imageView.transform=CGAffineTransformRotate(t, degrees*M_PI/180);
}

-(IBAction)rotationRight:(id)sender{
    degrees=degrees-25;
    CGAffineTransform t;
    t=CGAffineTransformMakeScale(x, x);
    imageView.transform=CGAffineTransformRotate(t, degrees*M_PI/180);

 }
 -(IBAction)zoomIn:(id)sender{
    x += 0.3;
    CGAffineTransform t;
    t=CGAffineTransformMakeRotation(degrees*M_PI/180);
    imageView.transform=CGAffineTransformScale(t, x, x);
 }

 -(IBAction)zoomOut:(id)sender{
     x -= 0.3;
    CGAffineTransform t;
    t=CGAffineTransformMakeRotation(degrees*M_PI/180);
    imageView.transform=CGAffineTransformScale(t, x, x);
 } 
```

# c# - 反应式扩展滑动时间窗口

> ID：11559255
> 
> 赞同：5
> 
> 时间：2012-07-19T10:52:11.770
> 
> 标签：c#, system.reactive

我有一系列股票报价，我想获取最后一小时的所有数据并对其进行一些处理。我正在尝试通过响应式扩展 2.0 来实现这一点。我在另一篇文章中阅读了使用间隔，但我认为已弃用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T08:54:02.653

这种扩展方法会解决您的问题吗？

```
public static IObservable<T[]> RollingBuffer<T>(
    this IObservable<T> @this,
    TimeSpan buffering)
{
    return Observable.Create<T[]>(o =>
    {
        var list = new LinkedList<Timestamped<T>>();
        return @this.Timestamp().Subscribe(tx =>
        {
            list.AddLast(tx);
            while (list.First.Value.Timestamp < DateTime.Now.Subtract(buffering))
            {
                list.RemoveFirst();
            }
            o.OnNext(list.Select(tx2 => tx2.Value).ToArray());
        }, ex => o.OnError(ex), () => o.OnCompleted());
    });
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T11:14:36.897

您正在寻找窗口操作员！这是我写的关于使用重合序列（序列的重叠窗口） [http://introtorx.com/Content/v1.0.10621.0/17_SequencesOfCoincidence.html的长篇文章](http://introtorx.com/Content/v1.0.10621.0/17_SequencesOfCoincidence.html)

所以如果你想建立一个滚动平均值，你可以使用这种代码

```
var scheduler = new TestScheduler();
var notifications = new Recorded<Notification<double>>[30];
for (int i = 0; i < notifications.Length; i++)
{
  notifications[i] = new Recorded<Notification<double>>(i*1000000, Notification.CreateOnNext<double>(i));
}
//Push values into an observable sequence 0.1 seconds apart with values from 0 to 30
var source = scheduler.CreateHotObservable(notifications);

source.GroupJoin(
      source,   //Take values from myself
      _=>Observable.Return(0, scheduler), //Just the first value
      _=>Observable.Timer(TimeSpan.FromSeconds(1), scheduler),//Window period, change to 1hour
      (lhs, rhs)=>rhs.Sum())    //Aggregation you want to do.
    .Subscribe(i=>Console.WriteLine (i));
scheduler.Start(); 
```

我们可以看到它在接收值时输出滚动和。

0, 1, 3, 6, 10, 15, 21, 28...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T15:48:30.150

很可能`Buffer`是您正在寻找的内容：

```
var hourlyBatch = ticks.Buffer(TimeSpan.FromHours(1)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-29T21:52:09.987

或者假设数据已经被`Timestamp`编辑，只需使用`Scan`：

```
 public static IObservable<IReadOnlyList<Timestamped<T>>> SlidingWindow<T>(this IObservable<Timestamped<T>> self, TimeSpan length)
    {
        return self.Scan(new LinkedList<Timestamped<T>>(),
                         (ll, newSample) =>
                         {
                             ll.AddLast(newSample);
                             var oldest = newSample.Timestamp - length;
                             while (ll.Count > 0 && list.First.Value.Timestamp < oldest)
                                 list.RemoveFirst();

                             return list;
                         }).Select(l => l.ToList().AsReadOnly());
    } 
```

# java - 使用 Java 应用程序打开 VIM

> ID：11559265
> 
> 赞同：0
> 
> 时间：2012-07-19T10:52:50.237
> 
> 标签：java, vim

我需要我的 Java 控制台应用程序来执行以下操作：

1.  打开 VIM
2.  <用户输入多行单词和:wq >
3.  然后我的应用程序应该能够获取 vim 输入并在终端中打印它。

到目前为止，我被困在 1.. 似乎不可能让 Java 打开 VIM！

这是我一直在摆弄的一些非功能性代码：

[呼叫系统文本编辑器](https://stackoverflow.com/questions/833828/call-system-text-editor)

[http://www.linglom.com/2007/06/06/how-to-run-command-line-or-execute-external-application-from-java](http://www.linglom.com/2007/06/06/how-to-run-command-line-or-execute-external-application-from-java)

非常感谢的建议

编辑

好的，所以以下将打开 VIM 但背景。有什么办法吗？

```
String[] command = {"/usr/bin/vim", "test.txt"};
Process vimProcess = Runtime.getRuntime().exec(command);
vimProcess.waitFor(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:08:35.047

1.  从 java 运行 vim（请注意，这将适用于 gnome，如果您使用 KDE，请使用“konsole”）：

    `Process pr = Runtime.getRuntime().exec("gnome-terminal -e 'vim /tmp/tmpfile'");`

2.  等待用户完成并退出：

    `int exitVal = pr.waitFor(); //check for the right exitVal`

3.  读取输入并写入终端：

    `System.out.println(FileUtils.raedFileToString(new File("/tmp/tmpfile")));`

# wordpress - 将 WordPress 保留在版本控制中 - 主题的单独存储库

> ID：11559266
> 
> 赞同：3
> 
> 时间：2012-07-19T10:52:52.957
> 
> 标签：wordpress, git

我在 Git 下有我的 WordPress 项目，并将 WordPress 作为子模块。我想将我的主题开发保留在一个单独的子模块中，但在当前设置中，并且在将主题设置作为子模块时遇到了一些困难。

这是我的文件系统：

```
/.git (master repo)
/index.php
/wp-config.php
/wordpress (WordPress repo as a submodule)
/wp-content 
  themes
     test-theme (theme repo)
        .git
        index.php
        (etc...) 
```

现在，当我将我的主存储库推送到 github 并尝试在另一台机器上克隆它时，wordpress 子模块下载正常，但我的主题文件夹没有，并且我收到关于未定义子模块的错误。

我尝试使用它来将我的主题添加为子模块：

```
git submodule add ./wp-content/themes/test-theme/.git ./wp-content/themes/test-theme 
```

但我收到以下错误：“远程（来源）没有 .git/config 中定义的 url”

我如何将我的主题存储库定义为子模块，当它基本上托管在项目“内部”而不是在线单独的存储库中时？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T12:51:35.240

I'm still relatively new to using submodules but I have been trying to do something similar and found two blog posts quite helpful: one by [Clint Berry](http://clintberry.com/2011/speed-up-your-wordpress-development-cycle-with-git/) and another by [David Winter](http://davidwinter.me/install-and-manage-wordpress-with-git/).

The principle of a submodule is that it should have a separate repo and then when you add that submodule to a new project the add submodule command should be pointing to the repo:

```
git submodule add https://github.com/youruseraccount/test-theme.git ./wp-content/themes/test-theme
git init
git update 
```

I believe this is why you are getting the error, there is no URL associated with the origin. Look in the files .gitmodule and .git/config to confirm. If I am correct, the git init will add the necessary entries in .git/config and git update this will pull the theme from the repo and put it into the subdirectory.

See [here](https://stackoverflow.com/questions/5542910/how-do-i-commit-changes-in-a-git-submodule) for how to commit changes to the submodule and [here](https://stackoverflow.com/questions/1260748/how-do-i-remove-a-git-submodule) for how to remove the submodule.

# android - 一次添加多个产品

> ID：11559267
> 
> 赞同：1
> 
> 时间：2012-07-19T10:52:52.740
> 
> 标签：android, in-app

我想一次在我的产品列表中添加多个产品。我用谷歌搜索了很多，但没有找到任何东西。请帮我这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:56:50.567

这记录在 In app billing reference [here](http://developer.android.com/guide/google/play/billing/billing_admin.html#billing-list-setup)的`Adding a batch of items to a product list`子标题下。但目前不支持批量添加订阅产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:57:07.103

要使用 CSV 文件将一批商品添加到产品列表中，您首先需要创建 CSV 文件。检查一下 - [http://developer.android.com/guide/google/play/billing/billing_admin.html#计费形式添加](http://developer.android.com/guide/google/play/billing/billing_admin.html#billing-form-add)

# javascript - dojo 中 require() 和 define() 函数的主要区别是什么？我们什么时候使用它们？

> ID：11559270
> 
> 赞同：35
> 
> 时间：2012-07-19T10:53:06.370
> 
> 标签：javascript, dojo, js-amd, ibm-mobilefirst

我是学习道场的新手，我遇到了`require()`和`define()`功能，但我无法理解其中任何一个。另外，我什么时候使用它们中的任何一个？一个小的演示或示例将是有益的。非常感谢！

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-07-19T11:18:01.097

`require`并且`define`是异步模块定义 (AMD) API 的一部分。

你`define`用来定义一个可以被其他代码使用的模块。一般`define`会在一个javascript文件中使用。javascript 文件正在定义一个模块。所有 Dojo 文件都使用定义。

当您不定义模块时使用`require`，但您需要已定义的模块。一般`require`会在 HTML 页面中使用。HTML 页面不是模块，但需要模块才能将页面呈现给用户。

AMD API

[https://github.com/amdjs/amdjs-api/wiki/AMD](https://github.com/amdjs/amdjs-api/wiki/AMD)

# zend-framework - Zend 打开 Zend/Application.php 失败

> ID：11559275
> 
> 赞同：3
> 
> 时间：2012-07-19T10:53:12.240
> 
> 标签：zend-framework

好的，所以我对 Zend 比较陌生。我创建了一个新的应用程序并开始构建基于[指南](http://akrabat.com/zend-auth-tutorial/)的身份验证系统。但是，服务器正在排除内部服务器错误。

检查 PHP 错误日志后，我收到以下两个错误：

> [Thu Jul 19 10:26:40 2012] [error] [client 80.194.255.4] PHP Warning: require_once(Zend/Application.php): failed to open stream: No such file or directory in /home/www-data/ zend.danielgroves.net/htdocs/public/index.php 第 18 行
> 
> [2012 年 7 月 19 日星期四 10:26:40] [错误] [客户端 80.194.255.4] PHP 致命错误：require_once()：无法打开所需的“Zend/Application.php”（include_path='/home/www-data/zend .danielgroves.net/htdocs/library:.:/usr/share/php:/usr/share/pear') 在 /home/www-data/zend.danielgroves.net/htdocs/public/index.php 第 18 行

控制器：-

```
class Admin_AuthController extends Zend_Controller_Action 
{ 
    public function init() 
    { 
         /* Initialize action controller here */ 
    } 

    public function indexAction() 
    { 
        $form = new Application_Form_login(); 
        $request = $this->getRequest(); 
        if ($request->isPost()) { 
            if ($form->isValid($request->getPost())) {

            } 
        }
        $this->view->form = $form;
    }
} 
```

关于这可能是什么原因的任何想法？正如我所说，我是 Zend 的新手，所以当涉及到这些错误时，我真的不知道从哪里开始，尤其是因为这是引用由 Zend CLI 工具创建的文件。

任何指针/建议等都会非常受欢迎。

担。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T11:04:58.407

您的应用程序需要能够访问 Zend Framework 类。通常，您会将它们放入`library`应用程序的文件夹中（Zend Tool 不会为您执行此操作）。因此，从您下载的 ZF 副本中，将`library/Zend`文件夹复制到您的`library`文件夹中。您应该最终得到它正在寻找的文件`/home/www-data/zend.danielgroves.net/htdocs/library/Zend/Application.php`，这将修复错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:51:43.133

我有这个完全相同的问题。首先，我缺少对 Zend/Application.php 的引用。所以我找到了，并复制到库文件夹中，并将代码更改为指向库文件夹中的文件。然后在 Application.php 文件中对同一文件有另一个引用。我修好了。现在我有一系列其他错误，例如：致命错误：第 82 行的 C:\Development\PHPSites\testProjectIII\library\Application.php 中未找到 Class 'Zend_Loader_Autoloader'

所以我 REM 出第 82 行： $this->_autoloader = Zend_Loader_Autoloader::getInstance();

我得到这个错误：致命错误：第 388 行的 C:\Development\PHPSites\testProjectIII\library\Application.php 中找不到类'Zend_Config_Ini'

所以我 REM 去掉那一行： $config = new Zend_Config_Ini($file, $environment);

之后，我终于得到了这个错误：注意：未定义的变量：C:\Development\PHPSites\testProjectIII\library\Application.php 中的配置第 417 行致命错误：在非对象上调用成员函数 toArray() C:\Development\PHPSites\testProjectIII\library\Application.php 在第 417 行

现在 - 如果我明白我在这里看到的内容，那就是应用程序正在寻找包含未定义类的库。我所做的只是获取整个工作程序（这是从启动向导中取出的，没有任何更改），它在 Zend 安装的 Apache 服务器上运行。但是我把它带到了我的 IIS 服务器根目录所在的另一个文件夹，并且找不到这些库。

我一直试图隔离什么是什么，但没有任何效果。我的帖子正上方的答案正是我尝试过的。

# java - 重新启动不可重新启动的作业的新实例

> ID：11559285
> 
> 赞同：1
> 
> 时间：2012-07-19T10:53:44.813
> 
> 标签：java, spring, spring-batch

我已经定义了一个带有参数 restart="false" 的 Spring-Batch 作业，因为我不希望再次启动相同的作业实例。

```
<batch:job id="myJob" restartable="false">
    <batch:step id="myStep">
        <batch:tasklet>
            ...
        </batch:tasklet>
    </batch:step>
</batch:job> 
```

该作业在另外两个更高级别的作业中被引用：

```
<batch:job id="hightLevelJob1" restartable="false">
    <batch:step id="myHighLevelJob1Step1" next="...">
        <batch:job ref="myJob"/>
    </batch:step>
    ...
</batch:job>

<batch:job id="hightLevelJob2" restartable="false">
    <batch:step id="myHighLevelJob2Step1" next="...">
        <batch:job ref="myJob"/>
    </batch:step>
    ...
</batch:job> 
```

我现在有两个 JUnit-Tests，每个都启动一个高级作业：

```
@Autowired
private JobOperator jobOperator;

@Test
public void testHighLevelJob1() throws JobExecutionException {
    final Long executionId = jobOperator.startNextInstance("myHighLevelJob1");
    ...
}

@Test
public void testHighLevelJob2() throws JobExecutionException {
    final Long executionId = jobOperator.startNextInstance("myHighLevelJob2");
    ...
} 
```

第一个测试运行良好，而第二个测试抛出 JobRestartException：

```
JobInstance already exists and is not restartable 
```

我正在使用 jobOperator.startNextInstance() 所以它创建了一个**新**工作。但是，这似乎只适用于启动的高级作业。看起来 Spring-Batch 试图重用引用的作业。

如何将作业配置为每次都创建引用作业的新实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:30:28.263

您需要一个[JobParametersIncrementer](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/core/JobParametersIncrementer.html)才能工作，因为 startNextInstance 的 javadocs 清楚地指出：“在由附加到指定作业的 JobParametersIncrementer 确定的 JobInstance 序列中启动下一个”

JobParametersIncrementer 帮助您增加新参数并将其放入 JobParameters 中，通过这种方式可以启动 Job 的新实例。

修改您的作业定义 bean 并添加一个增量器

```
<batch:job id="myJob" restartable="false" incrementer="incrementer">
    <batch:step id="myStep">
        <batch:tasklet>
            ...
        </batch:tasklet>
    </batch:step>
</batch:job> 
```

并用一个简单的增量器实现 JobParametersIncrementer 类

```
<bean id="incrementer"
        class="com...TrivialJobParametersIncrementer" /> 
```

您可以在 spring 批处理管理示例中找到示例[TrivialJobParametersIncrementer 。](https://src.springframework.org/svn/spring-samples/templates/batch-admin-web/trunk/template/src/main/java/org/springframework/batch/admin/sample/TrivialJobParametersIncrementer.java)

# c# - 使用c#识别ftp URL是目录名还是文件

> ID：11559287
> 
> 赞同：1
> 
> 时间：2012-07-19T10:53:46.280
> 
> 标签：c#, ftp

对于 ftp 路径`ftp://ftp.something.com/`，我可以使用以下代码列出所有目录：

```
WebRequest req = WebRequest.Create(url) as WebRequest;
        req.Method = WebRequestMethods.Ftp.ListDirectory;

//code to get response from ftp site and list all files and directories path in a list name name_list. 
```

现在 foreach 来自列表 name_list 的路径，如果路径是目录，那么我将该路径添加到列表名称 sub_list 中，否则如果它是某个文件的路径（.txt、.pdf、.rar、.html、.tw 和更多扩展名） ) 然后将该路径添加到另一个列表名称 final_list 中。到目前为止，我能做的是：

```
foreach(string url in name_list)
{
 if (Regex.IsMatch(url, ".*?" + @"(\.[A-Za-z]{2,4}$)"))
         //add to sub_list
else
        //add to final_list
} 
```

但这不是实现我的目标的可靠和稳健的方式。有没有其他最好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:41:36.780

您可以查看文件权限以查看它是否是目录。请参考以下示例：

[http://www.copyandwaste.com/posts/view/parsing-webrequestmethodsftplistdirectorydetails-and-listdirectory/](http://www.copyandwaste.com/posts/view/parsing-webrequestmethodsftplistdirectorydetails-and-listdirectory/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:05:11.923

我会使用 System.IO.Path 类来确定它是路径还是文件。具体来说：http: [//msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)

# themes - 在 Sublime Text 2 中应用苏打主题时遇到问题

> ID：11559290
> 
> 赞同：7
> 
> 时间：2012-07-19T10:53:54.017
> 
> 标签：themes, sublimetext2, soda

我已经使用 Sublime Text 2 中的 Package Control 安装了 Soda Theme，然后通过 Preferences -> Settings - User 激活它。但是它没有得到应用。[相反，我现在的主题是 Solarized，它在我的 Preferences.sublime-settings 文件](https://gist.github.com/3142977)（第 3 行）的顶部声明：

当我在控制台中查询主题时，输出是正确的：

```
>>> view.settings().get('theme')
u'Soda Light.sublime-theme' 
```

这也是正确的：

```
>>> view.settings().get('color_scheme')
u'Packages/Color Scheme - Default/Solarized (Light).tmTheme' 
```

为什么我看到的是 Solarized 主题而不是 Soda？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T16:54:41.113

主题不是文本编辑屏幕的颜色。

它是程序的 chrome，是文本编辑器周围的一切；选项卡样式；等等

[如果您在 Github 上](https://github.com/buymeasoda/soda-theme#bonus-options)查看Soda，您可以下载并使用与屏幕截图中相同的配色方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T22:13:33.877

如果其他人对 color_scheme vs theme 的概念感到困惑，这个问题在[这里](http://www.sublimetext.com/forum/viewtopic.php?f=2&t=8288&p=34505)得到了回答。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T02:52:30.403

您必须`,`在第一个参数集之后添加。对我来说它看起来像这样：

```
{
  "theme": "Soda Dark.sublime-theme",
  "ignored_packages":
  [
    "Vintage"
  ],
  "default_encoding": "UTF-8"
} 
```

# java - 如何将 ByteArrayOutputStream 转换为 Reader

> ID：11559292
> 
> 赞同：2
> 
> 时间：2012-07-19T10:53:56.620
> 
> 标签：java, unit-testing

有

```
ByteArrayOutputStream b = ...;

//some code under test writes to b

 Reader result = (convert b to reader);

 IOUtils.contentEqualsIgnoreEOL(expected, result); 
```

如何将 a 转换`ByteArrayOutputStream`为 a `Reader`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-19T10:56:22.377

你可以试试

```
ByteArrayOutputStream baos = 
Reader reader = new InputStreamReader(new ByteArrayInputStream(baos.toByteArray())); 
```

一个更简单的解决方案是检查缓冲区的内容。

```
assertEquals(expected, baos.toString().trim()); 
```

# automation - 通过 elisp 自动化 org-mode html 导出

> ID：11559297
> 
> 赞同：2
> 
> 时间：2012-07-19T10:54:23.780
> 
> 标签：automation, elisp, org-mode

我想使用定义在`~/.emacs`. 我写了以下代码：

```
(defun publish-custom-orgs ()
  "publish certain org files as html files"
  (interactive)
  (find-file "~/org/a.org")
  (org-export-as-html)
  (find-file "~/org/b.org")
  (org-export-as-html)
) 
```

但这不会导出文件；相反，它在 minibuffer 中显示了一个奇怪的输出：

![在此处输入图像描述](../Images/6b8d38f1e8f32be019371207167cf111.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:30:58.153

您可以尝试 org-export-as-html-batch

```
(defun publish-custom-orgs ()
  "publish certain org files as html files"
  (interactive)
  (find-file "~/org/a.org")
  (org-export-as-html-batch)
  (find-file "~/org/b.org")
  (org-export-as-html-batch)
) 
```

# javascript - $.merge(); 奇怪的行为，失去了 jQuery 关联

> ID：11559298
> 
> 赞同：0
> 
> 时间：2012-07-19T10:54:26.370
> 
> 标签：javascript, jquery

```
var first = $('#one, #two, #three');
var second = $('#six, #seven, #eight'); 
```

现在，我想用它`$.merge()`来合并选择并隐藏它们。

```
var merged = $.merge(first, second);
merged.hide(); // works, but alters "first" 
```

由于我后来必须`first`单独重用选择，所以我尝试了复制合并。

```
var merged = $.merge( $.merge([], first), second );
merged.hide(); // =
// = Uncaught TypeError: Object [object HTMLDivElement], [object HTMLDivElement], [,...] has no method 'hide' 
```

错误很明显——元素失去了 jQuery 关联。

1.  我是否跳过了有关选择分组/合并的课程？
2.  是`$(merged).hide();`唯一的解决方案吗？
3.  为什么复制合并删除了 jQuery？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:13:11.193

您不需要[**.add()**](http://api.jquery.com/add/)`.merge()`代替：[](http://api.jquery.com/add/)

 **```
var combined = first.add(second);
             //  ^----will not be affected
combined.hide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:12:45.357

合并的文档说它通过添加秒的值来改变第一个对象。我相信你需要像这样复制它：`$.merge($.merge($(), first), second)`

或者你可以使用切片：

`$.merge(first.slice(0), second)`**

# asp.net - 即使在使用 updatepanel 后，整个页面也会在网格排序上刷新

> ID：11559302
> 
> 赞同：0
> 
> 时间：2012-07-19T10:54:34.247
> 
> 标签：asp.net, vb.net

我在一页上有两个网格，它们都是独立的，但是当我对一个网格进行排序时，页面会刷新并在其他网格上排序消失。

我已经使用了更新面板，但仍然无法正常工作...请帮助我...

```
<form id="form1" runat="server">
    <div>

        <asp:ScriptManager ID="ScriptManager1" runat="server" EnablePartialRendering="true">
        </asp:ScriptManager>
        <table>
        <tr>
        <td>
        <asp:TextBox ID="txt1" runat="server"></asp:TextBox>
        </td>
        </tr>
        <tr>
        <td>
         <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
        <asp:GridView ID="grvDemo" runat="server" AllowSorting="true" AutoGenerateColumns="true" EnableSortingAndPagingCallbacks="TRUE">
        </asp:GridView>
        </ContentTemplate>
        <Triggers> <asp:AsyncPostBackTrigger ControlID="grvDemo" EventName="grvDemo_Sorting" /> </Triggers>
        </asp:UpdatePanel>
        </td>
        <td>
          <asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Conditional">
          <ContentTemplate>
        <asp:GridView ID="GridView1" runat="server" AllowSorting="true" AutoGenerateColumns="true" EnableSortingAndPagingCallbacks="TRUE">
        </asp:GridView>
        </ContentTemplate>
        <Triggers><asp:AsyncPostBackTrigger ControlID="GridView1" EventName="GridView1_Sorting" /></Triggers>
        </asp:UpdatePanel>
        </td>
        </tr>
        </table>

    </div>
    </form> 
```

代码：

```
Partial Class Import_ETL_Popup
    Inherits Syscon.Web.UI.Page.baseClass
    Protected Sub Page_Load1(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        bindgrid()
    End Sub
    Public Function bindgrid()
        Dim dt As DataTable = DBHelper.ExecuteDataset(FunctionFactory.GetConnectionString(), CommandType.Text, "select user_name,password from tbl_user_mst").Tables(0)
        grvDemo.DataSource = dt
        grvDemo.DataBind()
        Dim dt1 As DataTable = DBHelper.ExecuteDataset(FunctionFactory.GetConnectionString(), CommandType.Text, "select password,user_name from tbl_user_mst order by user_name").Tables(0)
        GridView1.DataSource = dt1
        GridView1.DataBind()
    End Function

    Protected Sub grvDemo_Sorting(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewSortEventArgs) Handles grvDemo.Sorting
        Dim dt As DataTable = DBHelper.ExecuteDataset(FunctionFactory.GetConnectionString(), CommandType.Text, "select user_name,password from tbl_user_mst order by user_name desc").Tables(0)
        grvDemo.DataSource = dt
        grvDemo.DataBind()
    End Sub

    Protected Sub GridView1_Sorting(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewSortEventArgs) Handles GridView1.Sorting
        Dim dt1 As DataTable = DBHelper.ExecuteDataset(FunctionFactory.GetConnectionString(), CommandType.Text, "select password,user_name from tbl_user_mst order by user_name desc").Tables(0)
        GridView1.DataSource = dt1
        GridView1.DataBind()
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:07:24.097

尝试这个

```
 <asp:AsyncPostBackTrigger ControlID="grvDemo" EventName="OnSorting" /> 
```

和这个

```
<asp:AsyncPostBackTrigger ControlID="GridView1" EventName="OnSorting" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:00:34.077

`EventName`您在`UpdatePanel`控件中提供错误

有关此主题的更多信息，请[转到此处](https://stackoverflow.com/questions/4742208/adding-postbacktriggers-and-asyncpostbacktriggers-to-updatepanel-for-dynamically)

实际上，您不必在控件的该`EventName`属性中提供事件处理程序`UpdatePanel`，您只需要提供事件的名称，就像`click`按钮控件提供的事件的名称一样。

# download - 如何将文件发送到浏览器进行下载？

> ID：11559304
> 
> 赞同：7
> 
> 时间：2012-07-19T10:54:36.667
> 
> 标签：download, playframework-2.0

当客户端请求文件时，我使用此代码发送它：

```
public static Result download(String file) {
    File file = getRealFile(file);
    return Ok(file);
} 
```

但我发现浏览器不会下载它，而是显示它的内容。响应头：

```
Content-Type    text/plain
Transfer-Encoding   chunked 
```

发送文件的正确方法是什么？

* * *

**更新**

根据 Razvi 的回答，我发现这个问题的答案似乎很好：[https ://stackoverflow.com/a/1074925/342235](https://stackoverflow.com/a/1074925/342235)

但是我们真的需要设置这么多的标题吗？

```
header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-Disposition: attachment; filename=$filepath");
header("Content-Type: mime/type");
header("Content-Transfer-Encoding: binary");
// UPDATE: Add the below line to show file size during download.
header('Content-Length: ' . filesize($filepath)); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T11:02:14.287

您需要设置 Content-Disposition 标头。我相信标头的值应该是`attachment`. 为此，请参阅[操作响应](http://www.playframework.org/documentation/2.0.2/JavaResponse)文档。

对于 play 2.0，以下工作无需明确设置标头：

`ok(new FileInputStream(file))`

# python - Python类变量访问速度

> ID：11559313
> 
> 赞同：0
> 
> 时间：2012-07-19T10:55:35.467
> 
> 标签：python, performance, class, variables

假设有一个类：

```
class x(obj):
    y = 1 
```

什么是更快（或首选）：

```
 def __init__(self):
        print self.y 
```

或者：

```
 def __init__(self):
        print x.y 
```

我认为`x.y`可以更好地传达意图，但我对速度影响感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:04:33.710

通过这些微优化可能实现的性能提升并不重要。到目前为止，ing的影响使`print`属性访问的成本相形见绌。作为参考，这是一个测试脚本：

```
import sys,timeit
class ClassAccess(object):
    y = 1
    def __init__(self):
        print(ClassAccess.y)

class SelfAccess(object):
    y = 1
    def __init__(self):
        print(self.y)

ca = timeit.timeit(ClassAccess, number=100000)
sa = timeit.timeit(SelfAccess, number=100000)

sys.stderr.write(str(ca) + "\n")
sys.stderr.write(str(sa) + "\n") 
```

在我的机器上（使用 yakuake 终端），这个输出

```
0.640013933182
0.628859043121 
```

这在两个变体相同的实验误差范围内。粗略的实验表明：

*   大约 90% 的运行时间是由实际显示打印结果引起的。
*   在其余部分中，大约 50% 是单独打印语句占用的时间。
*   其余的大约 80%*是*由对象的分配引起的。

因此，可以肯定地说得出性能没有差异的结论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:20:26.330

请注意，根据类的实现，返回的值可能会有所不同。

这将返回实例的 y 属性：

```
def __init__(self):
    print self.y 
```

虽然这会返回类的 y 属性：

```
def __init__(self):
    print x.y 
```

如果构造函数覆盖 y 属性 a la ：

```
def __init__(self, y=None):
    self.y = y
def print(self):
    print self.y 
```

返回的值会有所不同。Python 在检查 y 之前查找实例内部字典以检查类 internat 字典。所以我认为 print xy 应该稍微快一些，因为它避免了查找实例字典。

# c# - Kinect 光标控制与虚拟 XNA-Rectangle-'Touchpad' - Y 轴倒置

> ID：11559315
> 
> 赞同：2
> 
> 时间：2012-07-19T10:55:39.957
> 
> 标签：c#, xna, kinect, coordinate-systems

我正在尝试为 MS Kinect 实施实时策略控制方案。到目前为止，我已经有了一个光标，可以通过移动你的左手（或右手，取决于你的惯用手）来移动它。我有一个基于 Open-NI 的 Kinect 控制器，它为玩家的运动设置骨架，并为我的应用程序提供手腕、肘部、肩部和身体中心坐标。为了将这些手腕坐标投影到屏幕上，我设置了一个 Rectangle，它位于玩家中心稍左/右的位置，只要手腕在矩形内移动，光标就会在屏幕上移动。我的问题是，XNA-Rectangle 的左上角作为原点，即 X 轴指向右，因为它“应该”，但 Y 轴指向下方，而 Kinect 的 Y 轴 -坐标系指向上方。这导致光标在屏幕上向上移动，当我向下移动手时，反之亦然。我无法用 Kinect 坐标系改变任何东西，所以是否可以“翻转”矩形的“坐标系”，使其 Y 轴也向上？

以下是相关代码：

（来自校准（）-方法：）

```
List<Vector3> joints = UDPlistener.getInstance().ParseCalibCoordinates(data);
//0 = Right Wrist 1 = Right Elbow 2 = Right Shoulder
//3 = Left Wrist  4 = Left Elbow 5 = Left Shoulder
//6 = Center
height = 762; 
width = 1024;            
switch (hand)
{
    case 0:
    cursorSpace = new Rectangle((int)(joints[6].X * 2) - 200, (int)(joints[6].Y * 2) + height, width, height);
    break;
    case 3:
    cursorSpace = new Rectangle((int)(joints[6].X * 2) - 1200, (int)(joints[6].Y * 2) + height, width, height);
    break;
}

public Point Cursor(String data)
{   
    List<Vector3> joints = UDPlistener.getInstance().ParsePlayCoordinates(data);
    //0 = Right Wrist 1 = Left Wrist 2 = Center
    double mhx = 0; //main hand x-coordinate
    double mhy = 0; // main hand y-coordinate
    switch (hand)
    {
        case 0:
        mhx = joints[hand].X;
        mhy = joints[hand].Y;
        break; 

        case 3:
        mhx = joints[hand-2].X;
        mhy = joints[hand-2].Y;
        break;                    
    }

int x; 
int y;
if (Math.Abs(mhx - mhxOld) < 1.0 || Math.Abs(mhy - mhyOld) < 1.0) 
//To remove jittering of the cursor
{
    x = (int) mhxOld * 2;
    y = (int) mhyOld * 2;  
}
else
{
    x = (int) mhx * 2;
    mhxOld = mhx;
    y = (int) mhy * 2;
    mhyOld = mhy;
}

Point cursor = new Point(0,0);

if (cursorSpace.Contains(x,y)) 
{
    cursor = new Point(x - cursorSpace.X, y - CursorSpace.Y);                    
    lastCursorPos = cursor;
    return cursor;                    
} 
```

对不起，文字墙，我希望，我能说清楚。

提前致谢，

KK

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:26:40.337

我使用扩展方法来转换 OpenNI 坐标。以下示例将 OpenNI 坐标映射到左上角 640x480 矩形中的 XNA 坐标，表示为 Vector2 对象。

```
public static Vector2 ToXnaCoordinates(this Point3D point)
{
    return new Vector2(
        point.X + 320,
        (point.Y - 240) * -1);
} 
```

翻转 y 坐标的魔法就是`* -1`零件。

如果要达到与 640x480 不同大小的矩形，则需要在转换后相应地缩放坐标。例子：

```
public static Vector2 ToScaledXnaCoordinates(this Point3D point, int rectSizeX, int rectSizeY)
{
    return new Vector2(
        (point.X + 320) * rectSizeX / 640,
        (point.Y - 240) * -rectSizeY / 480);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:35:40.873

我知道这不是 XNA，但我想把它放在那些 wpf 用户那里:) 如果您使用类似[Channel 9 的](http://channel9.msdn.com/Series/KinectQuickstart/Skeletal-Tracking-Fundamentals)方法，只需使用 bool 来确定是否反转。例子：

```
 private void ScalePosition(FrameworkElement element, Joint joint, bool inverted)
    {
        //convert the value to X/Y
        Joint scaledJoint = joint.ScaleTo(967, 611);

        //convert & scale (.3 = means 1/3 of joint distance)
        //Joint scaledJoint = joint.ScaleTo(1280, 720, 1f, 1f);
        if (!inverted)
        {
            Canvas.SetLeft(element, scaledJoint.Position.X);
            Canvas.SetTop(element, scaledJoint.Position.Y);
        }

        if (inverted)
        {
            Canvas.SetLeft(element, scaledJoint.Position.X);
            Canvas.SetBottom(element, scaledJoint.Position.Y);
        }
    } 
```

希望这对 WPF 用户有所帮助！

# html - 如何在 css 中定位 IE 6 和 IE7

> ID：11559316
> 
> 赞同：1
> 
> 时间：2012-07-19T10:55:41.527
> 
> 标签：html, css

大家好：我如何解决 ie 7 和 ie6 中的 css 问题：我的 div 在这两个中更改位置：www.justcode/housetostay：如果我得到任何帮助，我将非常高兴

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T10:56:58.160

您可以使用条件来执行此操作。

在您添加此代码。

```
<!--[if lt IE 8]>
    // Add your IE only stylesheet here
<![endif]--> 
```

这意味着如果浏览器小于 IE8，则在评论中加载样式表。

如果需要，您可以更具体。

`<!--[if IE ]>`- 针对从 5.5 到 9 的所有 IE 版本

`<!--[if gt IE6 ]>`- 针对所有大于 IE6 的 IE 版本

`<!--[if IE7 ]>`- 仅针对 IE7

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:58:44.500

在不使用黑客的情况下，我建议使用这种技术

```
<!--[if lt IE 7]><html class="ie6"><![endif]-->
<!--[if IE 7]><html class="ie7"><![endif]-->
<!--[if IE 8]><html class="ie8"><![endif]-->
<!--[if gt IE 8]><!--><html><!--<![endif]--> 
```

然后你可以添加css：

```
.ie6 .my-div {

}
.ie7 .my-div {

} 
```

当您可以在常规单个样式表中定位所有版本时，为每个版本的 IE 使用单独的样式表是相当过时/糟糕的 IMO

你可以在这里阅读更多：http: [//paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)

# android - 为什么 findFragmentById() 返回 null？

> ID：11559317
> 
> 赞同：0
> 
> 时间：2012-07-19T10:55:42.873
> 
> 标签：android, android-fragments, android-fragmentactivity

在下面的方法中，NasaDailyFragment 在调试器中始终为 null。该方法调用 NasaDailyFragment.onRefresh(); 因此使用失败。我不知道为什么它为空。

```
public class NasaAppActivity extends FragmentActivity {
//other methods
   public void onRefreshClicked(View view){
       Log.d("debug", "in run");
       FragmentManager fragmentManager=getSupportFragmentManager();
       NasaDailyImage NasaDailyFragment=(NasaDailyImage)fragmentManager.findFragmentById(R.id.fragment_iotd);

       if(NasaDailyFragment!=null){
       Log.d("debug", "fragment has been casted and is NOT null!!!");
       }

       NasaDailyFragment.onRefresh();//always crashes here because NasaDailyFragment is null, this is "line 40" of the code

   }
   } 
```

这是 R.id.fragment_iotd 定义的片段的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <fragment android:name="com.wajumbie.nasadailyimage.NasaDailyImage"
        android:id="@+id/fragment_iotd"
        android:layout_width="match_parent"
        android:layout_height="match_parent"

        />
</LinearLayout> 
```

logcat 输出

```
07-19 11:21:25.916: D/debug(534): in run
07-19 11:21:25.916: D/AndroidRuntime(534): Shutting down VM
07-19 11:21:25.916: W/dalvikvm(534): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
07-19 11:21:25.936: E/AndroidRuntime(534): FATAL EXCEPTION: main
07-19 11:21:25.936: E/AndroidRuntime(534): java.lang.IllegalStateException: Could not execute method of the activity
07-19 11:21:25.936: E/AndroidRuntime(534):  at android.view.View$1.onClick(View.java:3044)
07-19 11:21:25.936: E/AndroidRuntime(534):  at android.view.View.performClick(View.java:3511)
07-19 11:21:25.936: E/AndroidRuntime(534):  at android.view.View$PerformClick.run(View.java:14105)
07-19 11:21:25.936: E/AndroidRuntime(534):  at android.os.Handler.handleCallback(Handler.java:605)
07-19 11:21:25.936: E/AndroidRuntime(534):  at android.os.Handler.dispatchMessage(Handler.java:92)
07-19 11:21:25.936: E/AndroidRuntime(534):  at android.os.Looper.loop(Looper.java:137)
07-19 11:21:25.936: E/AndroidRuntime(534):  at android.app.ActivityThread.main(ActivityThread.java:4424)
07-19 11:21:25.936: E/AndroidRuntime(534):  at java.lang.reflect.Method.invokeNative(Native Method)
07-19 11:21:25.936: E/AndroidRuntime(534):  at java.lang.reflect.Method.invoke(Method.java:511)
07-19 11:21:25.936: E/AndroidRuntime(534):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-19 11:21:25.936: E/AndroidRuntime(534):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-19 11:21:25.936: E/AndroidRuntime(534):  at dalvik.system.NativeStart.main(Native Method)
07-19 11:21:25.936: E/AndroidRuntime(534): Caused by: java.lang.reflect.InvocationTargetException
07-19 11:21:25.936: E/AndroidRuntime(534):  at java.lang.reflect.Method.invokeNative(Native Method)
07-19 11:21:25.936: E/AndroidRuntime(534):  at java.lang.reflect.Method.invoke(Method.java:511)
07-19 11:21:25.936: E/AndroidRuntime(534):  at android.view.View$1.onClick(View.java:3039)
07-19 11:21:25.936: E/AndroidRuntime(534):  ... 11 more
07-19 11:21:25.936: E/AndroidRuntime(534): Caused by: java.lang.NullPointerException
07-19 11:21:25.936: E/AndroidRuntime(534):  at com.wajumbie.nasadailyimage.NasaAppActivity.onRefreshClicked(NasaAppActivity.java:40)
07-19 11:21:25.936: E/AndroidRuntime(534):  ... 14 more
07-19 11:21:26.556: I/dalvikvm(534): threadid=3: reacting to signal 3
07-19 11:21:26.586: I/dalvikvm(534): Wrote stack traces to '/data/anr/traces.txt' 
```

# android - 安卓图片上传

> ID：11559325
> 
> 赞同：-1
> 
> 时间：2012-07-19T10:56:00.393
> 
> 标签：android

我是android的新手。现在要上传一张图片到php服务器。我搜索了很多链接，但我没有从这些链接中得到正确的解决方案。所以请任何人帮助我。要求是： 1.
我想从android sd卡上传一张图片到php服务器。
2.使用多部分实体。

所以请给我一些运行代码。谢谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:06:23.543

看到基本上你需要有基于 PHP 的 web 服务，允许你上传你的照片，然后你可以使用 JAVA 编码为图像上传使用 andoid。

[从 Android 将图像上传到 PHP 服务器](https://stackoverflow.com/questions/2544517/uploading-images-to-a-php-server-from-android)是您所有问题的首要链接。

[http://blog.sptechnolab.com/2011/03/09/android/android-upload-image-to-server/](http://blog.sptechnolab.com/2011/03/09/android/android-upload-image-to-server/)也是您正在寻找的解释。

# ruby - 如果存在 attr_accessible Ruby，比较同一个 activerecord 对象的两个实例返回 false

> ID：11559327
> 
> 赞同：0
> 
> 时间：2012-07-19T10:56:12.703
> 
> 标签：ruby, arrays, object, activerecord, compare

使用 Ruby 1.9.3 和 ActiveRecord 3.2.6。

我在尝试比较具有 attr_accessible :property 设置的 ActiveRecord 对象时遇到问题，该对象包含在使用 include?(object) 的关联对象数组中。

这些是我的 2 个 ActiveRecord 模型，Account 和 Role。

帐户：

```
class Account < ActiveRecord::Base

  # Associations
  #
  has_many :role_assignments, :dependent => :destroy
  has_many :roles, :through => :role_assignments
end 
```

角色：

```
class Role < ActiveRecord::Base

  attr_accessible :title

  # Associations
  #
  has_many :role_assignments, :dependent => :destroy
  has_many :accounts, :through => :role_assignments
end 
```

如果我然后创建几个角色（比如“管理员”和“编辑”）并将“管理员”分配给一个帐户，我会假设这会起作用：

```
role = Role.find_by_title("Admin")
account = Account.first # => The Account we assigned the "Admin" role to

account.roles.include?(role) # => Should be true but returns false 
```

但这实际上返回错误！

如果我从角色模型中删除“attr_accessible:title”并重复上述操作，那么它确实返回 true。

所以我想我的问题是......为什么 attr_accessible 会导致这个特定问题？还是我必须以不同的方式检查 account.roles 中是否存在角色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:32:30.553

你可以试试

```
account.role_ids.include?(role.id) 
```

# apache - .HTACCESS Mod 重写没有后缀？

> ID：11559333
> 
> 赞同：0
> 
> 时间：2012-07-19T10:56:27.827
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我正在尝试让以下 Mod Rewrite 使用没有斜杠作为后缀或文件名。

```
RewriteEngine On
RewriteRule ^test/([^/]*)/([^/]*)/$ /example1/example2/index.php?brand=

$1&video=$2 [L] 
```

但是，如果我从 /$ 中删除尾部斜杠，上述方法将不起作用。

回顾一下：

> www.example.co.uk/example/example2/index.php?brand=x&video=y

重写为

> www.example.co.uk/test/brand/video/

但我无法让它工作

> www.example.co.uk/test/brand/video

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:10:31.567

尝试将正则表达式从更改`^test/([^/]*)/([^/]*)/$`为`^test/([^/]*)/([^/]*)/?$`

# listview - 按下后退按钮后 JQuery Mobile 列表视图链接未正确加载

> ID：11559334
> 
> 赞同：1
> 
> 时间：2012-07-19T10:56:28.350
> 
> 标签：listview, jquery, jquery-mobile

我正在使用 JQuery Mobile 1.1.0 构建一个包含列表视图的简单移动网站。我遇到了嵌套链接和后退按钮按下的问题。在 Chrome (Linux) 上，URL 返回`domain.com/#&ui-page=0-2`但仅显示旋转加载器和空白页面，在 Android 上，列表视图重新出现，但单击新链接会引发奇怪的行为；旋转加载器旋转，加载页面，然后浏览器自行返回到列表视图。这显然是不可取的。我已经设置`data-ajax="false" data-transition="none"`了，因为链接是由 foreach() PHP 脚本创建的，并且需要`page_id`通过 GET 发送值。

我还禁用了`page`和`listview`容器中的数据转换，然后将以下内容放入`<head>`标签中：

```
<script language=javascript>
  $(document).bind("mobileinit", function () {
        $.mobile.ajaxLinksEnabled = false;
  });
</script> 
```

我有点不知所措，不知道出了什么问题，也找不到类似问题的提及。根本不需要转换，也不需要缓存行为，因为我试图使用 JQM 只是为了它的小部件优点。任何帮助将不胜感激。

谢谢。

**快速解决：**

```
<script language=javascript>
  $(document).bind("mobileinit", function () {
        $.mobile.ajaxLinksEnabled = false;
        $.mobile.pushStateEnabled = false;
  });
</script> 
```

# javascript - 如何在javascript中用字符串变量替换一些文本？

> ID：11559335
> 
> 赞同：0
> 
> 时间：2012-07-19T10:56:29.040
> 
> 标签：javascript, dom

我知道这是一个非常简单的问题，但是每次偶数触发时，我都需要用变量替换段落中的这段文本。

标记看起来像这样

```
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>
#container {width:100%; text-align:center; }
#heading {width:100%; text-align:center; }
</style>
</head>

<div id="heading">
<h1>hello</h1> 
</div> 
<body>
<div id="container">
<textarea name="mytextarea" cols="60" rows="40"></textarea>
</div>
</body>
</html> 
```

我需要的是它在标签中说“你好”的地方，它是一个变量，可以被我将生成的字符串替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:03:29.313

您可以创建一个看起来像这样的函数。

```
function replaceTitle (replaceText) {
    document.getElementById("heading").getElementsByTagName("h1")[0].innerHTML = replaceText;
} 
```

如果您使用的是**jQuery**，它可能看起来更像这样。

```
function replaceTitle (replaceText) {
    $("#heading h1").html(replaceText);
} 
```

然后你像这样调用函数

```
replaceText(yourVariable); 
```

给你的`<h1>`标签一个 id 或一个类可能会更好，这样你就可以直接引用它，但我会假设你有充分的理由不这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:15:01.560

一个关于如何让简单的事情变得复杂的例子:)

javascript:

```
// simple way:
function replace_text(text) {
    var heading = document.getElementById('heading');
    heading.innerHTML = '<h1>' + text + '</h1>';
}

// complicated way:
function replace_text2(text) {
    var heading = document.getElementById('heading');
    var node = heading.childNodes[0];
    while ( node && node.nodeType!=1 && node.tagName!='H1' ){
        //console.log(node.nodeType,node);
        node = node.nextSibling;
    }
    if (node) {
        node.replaceChild(document.createTextNode(text),node.childNodes[0]);
    }
} 
```

html:

```
<input type="button" onclick="replace_text('HELLO 1!');" value="Replace 1st text" />
<input type="button" onclick="replace_text2('HELLO 2!');" value="Replace 2nd text" /> 
```

[脚本在这里](http://pastebin.com/nCzV1gNi)。

# c# - 如何将 gridView 命令字段按钮制作成 ajax 更新面板 PostBackTrigger

> ID：11559336
> 
> 赞同：0
> 
> 时间：2012-07-19T10:56:30.463
> 
> 标签：c#, asp.net, gridview, triggers, updatepanel

我在 ajax 更新面板中有一个 gridview。我已将不同的按钮事件设置为 AsyncPostBackTriggers，但我希望选择按钮打开子网页，因此它必须是回发。我尝试了以下方法：

```
<Triggers>
      <asp:AsyncPostBackTrigger ControlID="gvClients" EventName="RowCancelingEdit" />
      <asp:AsyncPostBackTrigger ControlID="gvClients" EventName="RowEditing" />
      <asp:AsyncPostBackTrigger ControlID="gvClients" EventName="RowUpdated" />
      <asp:AsyncPostBackTrigger ControlID="gvClients" EventName="RowUpdating" />
      <asp:AsyncPostBackTrigger ControlID="gvClients" EventName="Sorted" />
      <asp:AsyncPostBackTrigger ControlID="gvClients" EventName="Sorting" />
      <asp:PostBackTrigger ControlID="gvClients" />
</Triggers> 
```

我收到以下错误：“System.ArgumentException：无法通过 RegisterAsyncPostBackControl 和 RegisterPostBackControl 注册 ID 为 'gvClients' 的控件。如果与目标控件关联的触发器有冲突，则可能发生这种情况。”

我尝试从后面的代码中访问选择按钮并将其设置为触发器。

这是代码：

```
 protected void gvClients_RowDataBound(object sender, GridViewRowEventArgs e)
    {
       if (e.Row.RowType == DataControlRowType.DataRow)
        {     
            Button btnDtls = (Button)e.Row.Cells[0].Controls[2];
            string btnDtlsId = btnDtls.ID;
            PostBackTrigger trigger = new PostBackTrigger();
            trigger.ControlID = btnDtlsId;
            UpdatePanel1.Triggers.Add(trigger);
        }
    } 
```

在调试中，我看到按钮的 ID 是“ctl01”，但出现此错误：“在 UpdatePanel 'UpdatePanel1' 中找不到触发器的 ID 为 'ctl01' 的控件”。有没有办法访问控制字段选择按钮并将其设置为 PostBackTrigger？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:00:59.757

由于按钮位于模板内，因此其最终 id 不同，您可以从 UniqueID 属性中获取它。 [http://msdn.microsoft.com/en-us/library/system.web.ui.control.uniqueid.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.control.uniqueid.aspx)

# wordpress - 网站 url 由 htaccess 更改

> ID：11559339
> 
> 赞同：-4
> 
> 时间：2012-07-19T10:56:36.447
> 
> 标签：wordpress, .htaccess, url

这是我的项目网站**http://readysolution.info/usjobs/test-category/?cpid=2&c_id=acc/**

**我只需要通过http://readysolution.info/usjobs/XXXX/YYYY/VVVVV**显示 url 而不是这个

**测试类别/?cpid=2&c_id=acc/**

这可以通过 .htaccess 以这种新格式显示我的网站网址。/usjobs 之后会显示什么，它将替换另一个单词

示例：1）如果它有 **/usjobs/test-category/?cpid=2&c_id=acc/**，那么它将是**usjobs/XXXX/YYYY/VVVVV**

2) 1) 如果它有 **/usjobs/test-category/?cpid=2**，那么它将是**usjobs/DDDD/KKKKK**

请帮帮我！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:39:24.973

您可以使用 htaccess Rewrite 将请求 URI“翻译”为 WP URI。例如：

浏览器中的请求：mysite.com/seg_1/wp_post_slug/seg_2

使用 Rewrite 你可以要求 mysite/com/wp_post_slug ，你会没事的。

请注意：

1）以上是伪代码，仅供参考，可能不准确。

2）在请求的 RI 中的某个地方，您将必须拥有一些可用于识别您实际想要请求的页面/帖子的东西。例如，您不能收到 mysite.com/xxx/yyy/zzz 的请求，然后以某种方式重写为您服务 mysite.com/bbb。bbb 必须在请求中，以便您可以使用重写来解析它。（注意：实际上， tere 可能是解决此问题的方法，但是您将不得不维护某种参考/转换表。）

# javascript - 如果没有 src，则使用 jquery 隐藏图像

> ID：11559342
> 
> 赞同：0
> 
> 时间：2012-07-19T10:56:47.293
> 
> 标签：javascript, jquery

如果我的图像不包含 src，那么我想使用可见性隐藏来隐藏它：

```
<img border="0" src="" style="cursor:hand;cursor:pointer;" id="EntityPic543"> 
```

我怎么能用jquery做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T11:00:09.283

```
$('img').filter(function(index){return $(this).attr('src')==='';}).hide(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:58:34.963

```
$(document).ready(function(){
  $("img").each(function(){
     (!this.src || $(this).prop("src")) && $(this).hide();
  });
}); 
```

感谢@GeorgeMauer

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T11:00:31.130

```
$('img').each(function() { 
  !this.src && $(this).hide()
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T10:59:33.637

试试这个没有任何循环：

```
$('img[src=""]').hide(); 
```

## **[演示](http://jsfiddle.net/xx62q/3/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T12:43:06.797

```
$("#EntityPic543").css("visibility", "hidden"); 
```

这将隐藏元素。

# delphi - 挂在 SomeObject.Free 上。检查 FPC 中的对象是否已经空闲？

> ID：11559351
> 
> 赞同：0
> 
> 时间：2012-07-19T10:57:07.790
> 
> 标签：delphi, free, freeze, fpc

如果有一个对象（在我的情况下是 TJSONData）并且我想释放这个对象，程序流有时会挂在这个位置。我的代码中已经有如下构造，但有时它似乎不适合这种情况：

```
if Assigned(MyRecord.MyJSONData) then
begin
  MyRecord.MyJSONData.Free;
end; 
```

如果我尝试释放一个对象两次，我可以在测试中重现这种行为。在我的程序中，这通常不应该发生，但现在我真正的问题是：

有没有办法检查对象是否已经空闲？还是我还需要使用 FreeAndNil();？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T11:06:32.870

> Assigned 函数检查引用是否**不为 nil**。如果不是 nil 则返回 True，如果 nil 则返回 False。

显然，当您释放对象并且未将引用设置为 nil 时，它将通过下一次分配的检查（引用 <> nil）并再次尝试释放。但是引用（指针）已经悬空（指向释放或更糟，更改的内存）。

通常，您应该将引用设置为**nil**或更好 - 使用 FreeAndNil 函数。这样，每次您想要访问已释放的对象时，它将为零，这就是您的检查。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T11:48:01.587

Delphi 论坛上有一个关于 FreeAndNil 的大线程（最终压垮了论坛）。

共同点是，对于 95% 的任务，您不应该*检查*对象是否处于活动状态，您应该事先*知道*它并构建程序，以便您始终知道并且永远不需要这些检查。

一些幸存或恢复的链接位于[http://www.theregister.co.uk/2012/01/16/verity_stob_sons_of_khan_2011/print.html](http://www.theregister.co.uk/2012/01/16/verity_stob_sons_of_khan_2011/print.html)和[https://forums.embarcadero.com/message.jspa?messageID=413796](https://forums.embarcadero.com/message.jspa?messageID=413796)

# java - 收到的 JMS 消息被截断

> ID：11559358
> 
> 赞同：0
> 
> 时间：2012-07-19T10:57:17.757
> 
> 标签：java, jms, ibm-mq, mq

我已将接收到的消息长度设为 1000000，但消息仍被截断完成的代码如下

```
import java.io.FileInputStream;

import javax.jms.JMSException;
import javax.jms.Session;

import com.ibm.jms.JMSMessage;
import com.ibm.jms.JMSTextMessage;
import com.ibm.mq.jms.JMSC;
import com.ibm.mq.jms.MQQueue;
import com.ibm.mq.jms.MQQueueConnection;
import com.ibm.mq.jms.MQQueueConnectionFactory;
import com.ibm.mq.jms.MQQueueReceiver;
import com.ibm.mq.jms.MQQueueSender;
import com.ibm.mq.jms.MQQueueSession;

public class SimplePTP {

  public static void main(String[] args) {
    try {
      MQQueueConnectionFactory cf = new MQQueueConnectionFactory();
String request= null;
      // Config
      cf.setHostName("CTMQ9000");
      cf.setPort(1414);
      cf.setTransportType(JMSC.MQJMS_TP_CLIENT_MQ_TCPIP);
      cf.setQueueManager("CTMQTST01");
      cf.setChannel("SYSTEM.ADMIN.SVRCONN");

      MQQueueConnection connection = (MQQueueConnection) cf.createQueueConnection();
      MQQueueSession session = (MQQueueSession) connection.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);
      MQQueue queue = (MQQueue) session.createQueue("CONTPLAT.CPS.DELIVERYPREP.REQUEST.TEST");
      MQQueueSender sender =  (MQQueueSender) session.createSender(queue);
      MQQueue queue1 = (MQQueue) session.createQueue("CONTPLAT.CPS.DELIVERYPREP.RESPONSE.TEST");
      MQQueueReceiver receiver = (MQQueueReceiver) session.createReceiver(queue1);      

      String request ="sdfHelp Me Name name for Photo Studio!I'm opening a portrait studio in a my town and am stuck on what to name it. I will be photographing (Portrait, wedding Photography)) children and families both at the studio and on location.sdffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffsdf"
      long uniqueNumber = System.currentTimeMillis() % 1000;
      JMSTextMessage message = (JMSTextMessage) session.createTextMessage(request);     

      // Start the connection
      connection.start();

      sender.send(message);
      System.out.println("Sent message:\\n" + message +"lol");
Thread.sleep(2000);
      JMSMessage receivedMessage = (JMSMessage) receiver.receive(10000000);
      System.out.println("\\nReceived message:\\n" + receivedMessage);

      sender.close();
      receiver.close();
      session.close();
      connection.close();

      System.out.println("\\nSUCCESS\\n");
    }
    catch (JMSException jmsex) {
      System.out.println(jmsex);
      System.out.println("\\nFAILURE\\n");
    }
    catch (Exception ex) {
      System.out.println(ex);
      System.out.println("\\nFAILURE\\n");
    }
  }
} 
```

如果消息的长度超过某个限制，我不知道有多少，但它会被截断，任何增加或解决方法以显示完整消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T05:53:27.433

正如 Germann 指出的那样，您传递给接收方法的参数不是消息大小，它实际上是以毫秒为单位的等待时间。表示呼叫必须等待消息到达的时间。例如，如果您将等待时间设置为 1000，则接收呼叫将等待 1 秒以等待消息到达。如果消息在 1 秒之前到达，调用将立即返回并将消息提供给应用程序。如果一秒钟后消息仍未到达，则调用将超时返回，并且不会向应用程序提供消息。在 MQ 术语中，您将看到 2033 原因代码。

您如何确定消息被截断？您是否收到 MQRC_TRUNCATED_MESSAGE_FAILED 异常？如果应用程序提供的缓冲区不足以填充传入消息，则会引发此异常。MQ JMS 不会引发 MQRC_TRUNCATED_MESSAGE_FAILED 异常，因为它在内部处理所需的缓冲区大小并将消息返回给应用程序。

我猜这个问题可能是因为您正在打印 JMSMessage，而发送的消息是 JMSTextMessage。JMSMessage.ToString 可能不会打印整个消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:20:35.190

你在哪里将长度设置为1000000？如果您阅读 MQ 文档，您会发现 receiver.receive(10000000); 不设置消息大小。

# android - Android - 活动生命周期和 HTTP 会话

> ID：11559363
> 
> 赞同：0
> 
> 时间：2012-07-19T10:57:24.527
> 
> 标签：android, httpclient, android-lifecycle

我正在阅读文章“管理活动生命周期”（http://developer.android.com/training/basics/activity-lifecycle/index.html），我有点困惑。也许首先我会试着说出我的应用程序做了什么。所以，这是某种http客户端。用户登录到服务器和客户端存储授权（会话 ID）。登录后，TimerTask 正在执行，每 10 秒从服务器获取一些小 json，顺便说一下，服务器知道授权密钥仍然有效（通常它有效约 30 分钟）。在这个 json 中可能是一些应该向用户显示的事件（我为此使用通知管理器）或用户应该回答的问题（我正在显示带有“是”、“否”、“不要”的自定义对话框不知道”，然后 POST 回答到服务器）。

当我的应用程序处于前台时，这可以正常工作，但我真的不知道如果应用程序停止/暂停该怎么办。

我的疑惑：

*   我希望即使用户单击主页按钮或出现其他应用程序，TimerTask 也应该工作。有两个原因：一 - 需要通知用户有关事件，二 - 我需要保持活动会话 ID。但是这篇文章说，当活动在前台时，它应该释放资源。这是什么意思？什么是限制？我必须停止计时器吗？
*   文档说系统可以在不再需要时终止应用程序。不再需要是什么意思？当用户不使用它或应用程序代码暂时什么都不做时？我的 TimerTask 可以让应用程序保持活动状态吗？
*   存储授权密钥。在系统重新创建活动（如方向更改等）的情况下，我需要记住会话 ID。我用于此 SharedPreferences 对象。问题是使用这个对象，密钥保存在数据库中，我无法识别我的应用程序何时永久关闭（这意味着“注销”）或只是因为方向改变而重新创建。当用户在几个小时后再次运行应用程序并且我的活动恢复死会话 ID（我的应用程序看起来像“已登录”，因为授权变量不为空并且我将此状态用作标志）时，会发生这种情况。我需要一些 SharedPreferences 对象的临时版本。onSaveInstanceState 中传入的 bundle 对象呢？是暂时的吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:11:52.883

看起来你在正确的轨道上。我认为您应该继续阅读文档。一些建议：

*   [活动生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)
*   [上下文.bindService()](http://developer.android.com/reference/android/content/Context.html#bindService%28android.content.Intent,%20android.content.ServiceConnection,%20int%29)
*   [服务连接](http://developer.android.com/reference/android/content/ServiceConnection.html)

# asp.net-mvc - ASP.NET MVC 在 Windows Azure 上部署失败

> ID：11559364
> 
> 赞同：1
> 
> 时间：2012-07-19T10:57:24.527
> 
> 标签：asp.net-mvc, azure, cloud

我正在尝试将 ASP.NET MVC 3.0 应用程序上传到 Windows Azure。上传正常，但配置（上传后自动运行）失败。

任何的想法 ？（我是 Windows Azure 的新手）

![在此处输入图像描述](../Images/5972c7e5a6674f44dcaf29560740380f.png)

![在此处输入图像描述](../Images/1b19fc1bb7a0da94868b75cfd76bf794.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:38:28.917

在新门户中，您必须明确选中一个复选框以允许部署少于两个实例：

![在此处输入图像描述](../Images/e7f033e83fe91ec868281fb18baade96.png)

绝对没有义务使用 2 个实例。只有当您有 2 个或更多实例时，才会有 SLA。我有 1 个实例的生产角色，我很高兴使用 Windows Azure 服务。

**更新**

刚刚对第一个答案发表了“链接资源”评论。所以这也是我的 2 美分：链接资源功能只是我们开发人员快速了解我们的应用程序并在组件之间快速导航的一种方式。与我们应用程序的配置文件无关。您可以像通常使用常规应用程序一样设置 Windows Azure SQL 数据库连接字符串 - 在 web.config (web.release.config) 中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:11:33.223

答案就在第二个屏幕截图中。

当您从门户上传您的包时，对话框底部有一个复选框，上面写着“即使一个或多个角色包含单个实例，也要部署”如果您选择部署到单个实例，则需要检查该复选框。

这是必需的，因为无法使用单个实例维护 SLA。有时单个实例需要应用操作系统更新，或者有时会出现硬件故障。当这些事件之一发生时，拥有多个实例是继续为请求提供服务的唯一方法。

您可能不想部署具有单个实例的生产解决方案。但是，对于开发周期，您当然可以使用 1。

# c# - 使用 ajax 填充 ComboboxList 客户端

> ID：11559365
> 
> 赞同：0
> 
> 时间：2012-07-19T10:57:24.840
> 
> 标签：c#, javascript, asp.net, ajax

好的，所以我正在使用这段 AJAX 代码

```
xhr2 = new XMLHttpRequest();
xhr2.open('POST', '/AllPoints.aspx', false);
xhr2.setRequestHeader('kml_file', path); 
```

我在服务器端做的是这个

```
protected void Page_Load(object sender, EventArgs e)
    {

        if (!IsPostBack)
        {
            if (!string.IsNullOrEmpty(Request.Headers["kml_file"]))
            {
                DataTable dt = GetDataSet().Tables[0];

                CBList_Pontos_Repetidos.DataSource = dt;
                CBList_Pontos_Repetidos.DataTextField = dt.Columns[1].ToString();
                CBList_Pontos_Repetidos.DataValueField = dt.Columns[0].ToString();
                CBList_Pontos_Repetidos.DataBind();
            }
        }

    } 
```

一切运行良好，通过调试，我可以看到所有代码都在执行，问题是，这都是服务器端的，没有实际的回发，异步与否，所以客户端没有显示任何内容，我只能看到服务器端。

我一直在这个周围，我似乎无法找出解决方案，有什么帮助吗？

PS：我已经编辑了所有不必要的代码字符串，以便您更好地理解它。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:03:41.873

我会看看通过 ajax 访问 asp.net 页面方法。这是一个有用的[链接](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

# tridion - 是否可以手动触发工作流程？

> ID：11559367
> 
> 赞同：5
> 
> 时间：2012-07-19T10:57:31.053
> 
> 标签：tridion, tridion-2011

是否可以手动触发工作流程？

例如，我不想在保存和关闭组件时触发工作流，但我想多次更新组件，并且在我觉得没问题后，我想触发为组件附加的工作流。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T11:05:14.387

就像 Jeremy 说的（还）不可能，但它也会破坏 Workflow 的整个想法，即您不能签入未经批准的内容。在您的情况下，您可以根据需要多次编辑组件。无论您只是保存它还是保存并关闭它。一旦您报告“我完成了”，它就会传递到工作流中的下一个活动 - 即完成您的活动。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T11:28:28.807

您必须了解有关 Tridion 工作流程的一些内容。它不是设计或打算成为一个*流程工作流*，它是一个批准工作流。

当对需要工作流的项目进行更改时，工作流启动（项目被锁定）。完成更改后，您将完成活动并继续工作流程。

从它的声音来看，您可能正在为工作流驱动内容发布的组织工作，而 Tridion 从一开始就设计为*不需要*工作流来发布到网站，工作流仅适用于需要额外验证步骤的组织（有些会说这是因为他们不能信任编辑，但这是另一回事，使用权限比工作流程更容易解​​决，但我离题了）。

不管怎样，对您来说好消息是，正如我们所说，工作流引擎正在重新设计，下一个版本将为我们的工作流引擎带来许多新*的面向流程的*概念。但是目前，您想做的事情是不可能的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T10:59:29.877

不，这是不可能的。工作流程只能在项目的保存时触发。对于您提到的情况，您只需要在您对内容感到满意时完成初始活动。

# objective-c - NSObject 可以是一个类的两个实例的委托吗？

> ID：11559368
> 
> 赞同：1
> 
> 时间：2012-07-19T10:57:40.723
> 
> 标签：objective-c, delegates

我有两个 NSTextfield，我想对每个使用相同的方法：

```
-(void)controlTextDidChange: (id)sender {
[label setStringValue:[textfield stringValue]];
} 
```

我想使用不同的`label/textfield`一对，具体取决于哪个 NSTextField 发送消息。这些信息在`sender`对象中是否可用，还是我必须创建一个新的委托？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:04:56.863

这`[sender object]`是你的`textfield`，所以`stringValue`很容易得到。但是，获取相关标签并非如此：您需要构建自己的方案才能找到它。

一种方法是通过将文本字段的`tag`属性设置为不同的数字来标记您的文本字段。如果将第一个标签的文本字段标签设置为 1，将第二个标签的文本字段标签设置为 2，则可以执行以下操作：

```
-(void)controlTextDidChange: (id)sender {
    NSTextField *textfield = [sender object];
    NSLabel *label = nil;
    switch ([textfield tag]) {
    case 1: label = myLabelOne; break;
    case 2: label = myLabelTwo; break;
    }
    [label setStringValue:[textfield stringValue]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:56:27.467

这是我解决它的方法：

```
-(void)controlTextDidChange: (id)sender {
    [[[window contentView]
    viewWithTag:( [[sender object] tag] + 100 )]
    setStringValue:[ [sender object] stringValue]]; 
```

I set in interface builder the tag of the labels to a value of: 100 + the tag of the associated NSTextField. There is also no need for IBOutlet.

# rabbitmq - spring-rabbitmq如何配置心跳

> ID：11559369
> 
> 赞同：3
> 
> 时间：2012-07-19T10:57:47.430
> 
> 标签：rabbitmq, spring-rabbit

如何配置 spring-rabbitmq 连接工厂

```
<rabbit:connection-factory id="connectionFactory" host="${rabbitmq.host}" port="${rabbitmq.port:5672}"
    username="guest" password="guest"/> 
```

有一个请求的心跳？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T10:57:47.430

您可以将底层连接工厂作为 bean 提供，在 rabbit:connection-factory 上设置的属性将被覆盖。

```
<rabbit:connection-factory id="connectionFactory" host="${rabbitmq.host}" port="${rabbitmq.port:5672}"
        username="guest" password="guest" connection-factory="rcf" />

<bean id="rcf" class="com.rabbitmq.client.ConnectionFactory">
        <property name="host" value="${rabbitmq.host}"/>
        <property name="requestedHeartbeat" value="10" />
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T07:06:04.170

您应该使用`requestedHeartbeat`connectionfactory bean 的属性

```
<bean id="rabbitconnectionFactory" class="com.rabbitmq.client.ConnectionFactory">
        <property name="host" value="localhost"/>
        <property name="requestedHeartbeat" value="100" />
</bean> 
```

# c# - 转换日期格式时无法识别字符串

> ID：11559374
> 
> 赞同：0
> 
> 时间：2012-07-19T10:58:02.937
> 
> 标签：c#, visual-studio-2008, datetime

如何将“dd/mm/yyyy”转换为“yyyy-mm-dd”格式。我试过这样：

```
 DateTime dtInputDate = DateTime.Parse(txtDate.Text); //txtDate.Text = "19/07/2012"
 string strOutputDateFormat = "YYYY-MM-DD";
 dtInputDate.ToString(strOutputDateFormat);
 txtDate.Text = dtInputDate.ToShortDateString(); 
```

但出现错误：字符串未被识别为有效的日期时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:01:02.697

日期格式应为：

```
string strOutputDateFormat = "yyyy-MM-dd"; 
```

要将字符串解析为日期，请使用[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)方法和[格式说明符](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:02:16.003

您可以使用 Parse Exact，并指定格式，如`"d/M/yyyy"`

```
 string strDate = "19/07/2012";
 DateTime dtInputDate = DateTime.ParseExact(strDate, "d/M/yyyy", CultureInfo.InvariantCulture); //txtDate.Text = 
 string strOutputDateFormat = "yyyy-MM-dd";
 Console.Write(dtInputDate.ToString(strOutputDateFormat));
 strDate = dtInputDate.ToString(strOutputDateFormat); 
```

编辑：这里替换`strDate`为`txtDate.Text`您的代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T11:02:23.540

请尝试以下操作，看看情况如何，日期格式区分大小写：

```
string strOutputDateFormat = "yyyy-MM-dd"; 
```

您的代码的第三行和第四行也没有做任何有用的事情！您需要将两者都替换为：

```
txtDate.Text = dtInputDate.ToString(strOutputDateFormat); 
```

`dtInputDate.ToString(strOutputDateFormat);`正在返回一个值，但您没有将此值分配给任何变量，`dtInputDate.ToShortDateString();`也不会以`yyyy-MM-dd`格式输出您的日期。

如果您的代码的第一行抛出错误，请确保它`txtDate.Text`实际上包含“19/07/2012”并且您没有将它放入另一个文本框中，并检查您认为命名的文本框`txtDate.Text`实际上是！

希望这可以帮助

[http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T11:13:51.803

试试下面的代码。

```
DateTime dtInputDate = DateTime.Parse(this.txtDate.Text); 

this.txtDate.Text = dtInputDate.ToString(String.Format("yyyy-MM-dd", dtInputDate.ToShortDateString())); 
```

![输出](../Images/b81e8ad2a37b4f303e77d16ce0e7d7b0.png)![在此处输入图像描述](../Images/fce790d436f5dd94c2b1cd963c073a69.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T11:03:37.380

尝试类似的东西

```
DateTime dtInputDate = DateTime.ParseExact(txtDate.Text,"dd/MM/yyyy",null,DateTimeStyles.None);
string strOutputDateFormat = "yyyy-MM-dd";
txtDate.Text = dtInputDate.ToString(strOutputDateFormat); 
```

[DateTime.ParseExact 方法（字符串、字符串、IFormatProvider）](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)

[DateTime.ParseExact 方法（字符串、字符串、IFormatProvider、DateTimeStyles）](http://msdn.microsoft.com/en-us/library/ms131038)

甚至

[DateTime.TryParseExact 方法（字符串、字符串、IFormatProvider、DateTimeStyles、DateTime%）](http://msdn.microsoft.com/en-us/library/ms131044)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T11:03:51.077

您的代码应该类似于

```
txtDate.Text = DateTime.Parse(txtDate.Text).ToString("yyyy-MM-dd"); 
```

# android - 在不使用 Eclipse 的情况下将库导入 Android/Java 程序

> ID：11559377
> 
> 赞同：0
> 
> 时间：2012-07-19T10:58:07.330
> 
> 标签：android, andengine

我想知道如何将自定义库导入我的 Android/Java 程序。我想用 AndEngine 开发，但我不知道如何手动导入库。:P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:10:47.027

试试这个，

```
 Add the Lib folder on your project. On that folder you should placed your jar files. 
```

之后，右键单击您的项目并从出现的菜单中选择构建路径。有你可以看到，

```
 libraries tab->Add Jars->please goes to your project Lib folder(created by you)->jar files. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:11:28.733

尝试使用 Maven 创建 android 应用程序。使用 maven 安装您的库并将其添加为 pom.xml 中的依赖项

然后尝试用maven构建它。

# ios - 到达的远程数据在哪里适合 MVC 模型

> ID：11559383
> 
> 赞同：3
> 
> 时间：2012-07-19T10:58:29.397
> 
> 标签：ios, model-view-controller

我读了这个问题：[了解 iOS 应用程序中使用的 MVC 模式](https://stackoverflow.com/questions/5674879/understanding-mvc-pattern-used-in-ios-apps)，并加载并运行了[示例](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)，发现它有助于了解如何从网络收集外部数据，例如图像。我可以看到 IconDowloader 如何与 ViewController 一起收集图像并通过委托将它们返回给 ViewController。

我不明白 IconDownloader（或任何从外部源检索数据的“助手”）适合 MVC 模型的位置。对我来说，它似乎被固定在控制器的一侧。

它是控制器的一部分吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:58:56.667

IconDownloader 是控制器层次结构的一部分，它们共同形成“控制器”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:01:01.517

是的，IconDownloader 是一个控制器对象。请注意，MVC 模式一般说的是控制器，而不仅仅是*视图*控制器。除了视图控制器之外，还可以有更多的控制器对象来处理应用程序的其他子系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T11:01:46.507

一般来说，谈论 MVC，它应该是服务层的一部分，它不是理论 MVC 的一部分，但在现实世界中，总是有服务层（或称为其他）但被委派来处理 I/O 读/写等。

# android - 从 Activity 手动更改小部件状态

> ID：11559386
> 
> 赞同：2
> 
> 时间：2012-07-19T10:58:40.517
> 
> 标签：android, android-widget

我的应用程序有一个小部件，当我们点击它时它会点亮 LED 闪光灯，当我们再次点击它时它会关闭它。

这是代码（感谢这篇[文章](https://stackoverflow.com/questions/7515309/widget-for-turning-on-off-camera-flashlight-in-android)中的 Kartik ）：

**WidgetProvider.java**

```
public class WidgetProvider extends AppWidgetProvider {

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
            int[] appWidgetIds) {

        Intent receiver = new Intent(context, WidgetReceiver.class);
        receiver.setAction("COM_FLASHLIGHT");
        receiver.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0,
                receiver, 0);

        RemoteViews views = new RemoteViews(context.getPackageName(),
                R.layout.widget);

        views.setOnClickPendingIntent(R.id.imageButtonWidget, pendingIntent);

        appWidgetManager.updateAppWidget(appWidgetIds, views);

    }
} 
```

**WidgetReceiver.java**

```
public class WidgetReceiver extends BroadcastReceiver {
    public static boolean isLightOn = false;
    public static Camera camera;

    @Override
    public void onReceive(Context context, Intent intent) {
        RemoteViews views = new RemoteViews(context.getPackageName(),
                R.layout.widget);

        if (isLightOn) {
            views.setImageViewResource(R.id.imageButtonWidget,
                    R.drawable.widget_lamp_button_default);
        } else {
            views.setImageViewResource(R.id.imageButtonWidget,
                    R.drawable.widget_lamp_button_checked);
        }

        AppWidgetManager appWidgetManager = AppWidgetManager
                .getInstance(context);
        appWidgetManager.updateAppWidget(new ComponentName(context,
                WidgetProvider.class), views);

        if (isLightOn) {
            if (camera != null) {
                camera.stopPreview();
                camera.release();
                camera = null;
            }
            isLightOn = false;

        } else {
            // Open the default i.e. the first rear facing camera.
            camera = Camera.open();
            if (camera == null) {
                Toast.makeText(context, "R.string.no_camera",
                        Toast.LENGTH_SHORT).show();

            } else {
                // Set the torch flash mode
                Parameters param = camera.getParameters();
                param.setFlashMode(Camera.Parameters.FLASH_MODE_TORCH);
                try {
                    camera.setParameters(param);
                    camera.startPreview();
                    isLightOn = true;
                } catch (Exception e) {
                    Toast.makeText(context, "R.string.no_flash",
                            Toast.LENGTH_SHORT).show();
                }
            }
        }
    }
} 
```

现在我想从我的应用程序中关闭小部件。在我的应用程序的主要活动中使用此代码，我可以释放小部件拍摄的相机：

**MainActivity.java**

```
//Stop widget camera
        if (WidgetReceiver.isLightOn){
        Camera a = WidgetReceiver.camera;
        a.stopPreview();
        a.release();
        a = null;
        WidgetReceiver.isLightOn=false;} 
```

但问题是小部件仍然设置为选中的可绘制对象（`R.drawable.widget_lamp_button_checked`）。所以手电筒很好地关闭了，但我仍然需要强制小部件将其可绘制设置为未选中的（`R.drawable.widget_lamp_button_default`）。

我怎样才能做到这一点 ？

编辑：**问题已解决**

**WidgetProvider.java**

```
 public class WidgetProvider extends AppWidgetProvider {

        @Override
        public void onUpdate(Context context, AppWidgetManager appWidgetManager,
                int[] appWidgetIds) {

             // Set widget's drawable to unchecked

            RemoteViews views2 = new RemoteViews(context.getPackageName(),
                    R.layout.widget);
            AppWidgetManager mManager = AppWidgetManager.getInstance(MainActivity
                    .getContext());
            ComponentName cn = new ComponentName(MainActivity.getContext(),
                    WidgetProvider.class);
            views2.setImageViewResource(R.id.imageButtonWidget,
                    R.drawable.widget_lamp_button_default);
            mManager.updateAppWidget(cn, views2);

            // Widget OnClick Behavior

            Intent receiver = new Intent(context, WidgetReceiver.class);
            receiver.setAction("COM_FLASHLIGHT");
            receiver.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);
            PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0,
                    receiver, 0);

            RemoteViews views = new RemoteViews(context.getPackageName(),
                    R.layout.widget);

            views.setOnClickPendingIntent(R.id.imageButtonWidget, pendingIntent);

            appWidgetManager.updateAppWidget(appWidgetIds, views);

        }
    } 
```

**WidgetReceiver.java** -> 保持不变

**MainActivity.java**

```
 public class MainActivity extends Activity {
        private static Context mContext;

        public static Context getContext() {
            return mContext;
        }

       @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            mContext = this;

                   //Stop widget camera

                    if (WidgetReceiver.isLightOn){
                    Camera a = WidgetReceiver.camera;
                    a.stopPreview();
                    a.release();
                    a = null;
                    WidgetReceiver.isLightOn=false;}

        // Fire Widget's update with Intent 

        Intent intent = new Intent(this, WidgetProvider.class);
                intent.setAction("android.appwidget.action.APPWIDGET_UPDATE");
                // Use an array and EXTRA_APPWIDGET_IDS instead of
                // AppWidgetManager.EXTRA_APPWIDGET_ID,
                // since it seems the onUpdate() is only fired on that:
                int[] ids = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
                intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, ids);
                sendBroadcast(intent);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:08:04.397

在 AppWidgetProvider的 onReceive() 方法中，使用类 的`updateAppWidget`方法向您的 AppWidgetProvider 发送广播并更新您的小部件：`AppWidgetManager`

```
@Override
public void onReceive(Context context, Intent intent) {

    ...
    views = new RemoteViews(context.getPackageName(),
    R.layout.yourwidgetlayout);
    AppWidgetManager mManager = AppWidgetManager.getInstance(App
    .getContext());
    ComponentName cn = new ComponentName(App.getContext(),
    YourAppWidgetProvider.class);
    //change your views,here I change text of text view witch it's id is "widgettextview" 
    views.setTextViewText(R.id.widgettextview, "lastWord");
    mManager.updateAppWidget(cn, views);
    ...
} 
```

这是应用程序定义：

```
public class App extends Application implements OnInitListener {

    private static Context mContext;

    public void onCreate() {
        super.onCreate();
        mContext = this;
        }
    public static Context getContext() {
        return mContext;
    }
} 
```

# linux - Nginx 和 php-fpm：无法摆脱 502 和 504 错误

> ID：11559388
> 
> 赞同：17
> 
> 时间：2012-07-19T10:58:47.380
> 
> 标签：linux, performance, nginx, php

我有一个 ubuntu 服务器和一个负载很高的网站。服务器是：

*   专用于 nginx，使用 php-fpm（无 apache），mysql 位于不同的机器上
*   有 8 GB 的 RAM
*   每秒获取大约 2000 个请求。

每个 php-fpm 进程消耗大约 65MB 的 RAM，根据`top`命令：

![最高命令](../Images/e56299e583943d4274ec666c587fe75b.png)

空闲内存：

```
admin@myserver:~$ free -m
             total       used       free     shared    buffers     cached
Mem:          7910       7156        753          0        284       2502
-/+ buffers/cache:       4369       3540
Swap:         8099          0       8099 
```

* * *

**问题**

最近，我遇到了很大的性能问题。响应时间非常长，非常多`Gateway Timeouts`，而且在晚上，当负载变高时，90% 的用户只会看到“找不到服务器”而不是网站（我似乎无法重现这一点）

* * *

**日志**

我的 Nginx 错误日志充满了以下消息：

```
2012/07/18 20:36:48 [error] 3451#0: *241904 upstream prematurely closed connection while reading response header from upstream, client: 178.49.30.245, server: example.net, request: request: "GET /readarticle/121430 HTTP/1.1", upstream: "fastcgi://127.0.0.1:9001", host: "example.net", referrer: "http://example.net/articles" 
```

我尝试切换到 unix 套接字，但仍然出现这些错误：

```
2012/07/18 19:27:30 [crit] 2275#0: *12334 connect() to unix:/tmp/fastcgi.sock failed (2: No such file or directory) while connecting to upstream, client: 84.
237.189.45, server: example.net, request: "GET /readarticle/121430 HTTP/1.1", upstream: "fastcgi://unix:/tmp/fastcgi.sock:", host: "example.net", referrer: "http
://example.net/articles" 
```

php-fpm 日志中充满了这些：

```
[18-Jul-2012 19:23:34] WARNING: [pool www] seems busy (you may need to increase pm.start_servers, or pm.min/max_spare_servers), spawning 32 children, there  are 0 idle, and 75 total children 
```

我试图将给定的参数增加到`100`，但似乎仍然不够。

* * *

**配置**

这是我目前的配置

**php-fpm**

```
listen = 127.0.0.1:9001
listen.backlog = 4096
pm = dynamic
pm.max_children = 130
pm.start_servers = 40
pm.min_spare_servers = 10
pm.max_spare_servers = 40
pm.max_requests = 100 
```

**nginx**

```
worker_processes  4;
worker_rlimit_nofile 8192;
worker_priority 0;
worker_cpu_affinity 0001 0010 0100 1000;

error_log  /var/log/nginx_errors.log;

events {
    multi_accept off;
    worker_connections  4096;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    access_log off;
    sendfile        on;
    keepalive_timeout  65;
    gzip  on;

    # fastcgi parameters
    fastcgi_connect_timeout 120;
    fastcgi_send_timeout 180;
    fastcgi_read_timeout 1000;
    fastcgi_buffer_size 128k;
    fastcgi_buffers 4 256k;
    fastcgi_busy_buffers_size 256k;
    fastcgi_temp_file_write_size 256k;
    fastcgi_intercept_errors on;

    client_max_body_size 128M;

    server {
        server_name example.net;
        root /var/www/example/httpdocs;
        index index.php;
        charset utf-8;
        error_log /var/www/example/nginx_error.log;

        error_page 502 504 = /gateway_timeout.html;

        # rewrite rule
        location / {
            if (!-e $request_filename) {
                rewrite ^(.*)$ /index.php?path=$1 last;
            }
        }
        location ~* \.php {
            fastcgi_pass 127.0.0.1:9001;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_param PATH_INFO $fastcgi_script_name;
            include fastcgi_params;
        }
    }
} 
```

**我将非常感谢有关如何识别问题以及我可以调整哪些参数来解决此问题的任何建议。或者也许 8GB 的​​ RAM 不足以应付这种负载？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:02:49.827

若干问题。仍然值得在如此繁忙的网站上修复它们。MySQL 可能是目前的根本原因。但从长远来看，您需要做更多的工作。

**缓存**

我看到您的错误消息之一显示对上游 php 的获取请求。对于如此高流量的站点（您提到的 2000 r/s），这看起来不太好。此页面 (/readarticle/121430) 似乎是一个完全可缓存的页面。一方面，您可以使用 nginx 来缓存此类页面。查看[fastcgi 缓存](http://wiki.nginx.org/HttpFastcgiModule#fastcgi_cache)

```
GET /readarticle/121430 
```

**php-fpm**

```
pm.max_requests = 100 
```

该值表示处理 100 个请求后，一个进程将被 php-fpm master 杀死。php-fpm 使用该值来对抗 3rd 方内存泄漏。您的站点非常繁忙，速度为 2000r/s。您的最大子进程为 130 个，每个子进程最多只能处理 100 个请求。这意味着在 13000/2000 = 6.5 秒后，它们都将被回收。这太多了（每秒杀死 20 个进程）。您至少应该从值 1000 开始，只要您没有看到内存泄漏，就应该增加该数字。有人在生产中使用 10,000。

**nginx.conf**

*   问题一：

    ```
     if (!-e $request_filename) {
            rewrite ^(.*)$ /index.php?path=$1 last;
        } 
    ```

    应该用更高效的 try_files 代替：

    ```
     try_files $uri /index.php?path=$uri; 
    ```

**如果**位置块和正则表达式重写规则匹配，您可以节省额外的费用。

*   问题 2：使用 unix socket 会比使用 ip 节省更多时间（根据我的经验，大约 10-20%）。这就是为什么 php-fpm 默认使用它。

*   问题 3：您可能有兴趣在 nginx 和 php-fpm 之间建立 keepalive 连接。在 nginx 官方网站中给出[了一个示例。](http://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:55:54.460

我需要查看您的 php.ini 设置，我认为这与 MySQL 无关，因为您遇到了看起来像的套接字错误。此外，这是在一段时间后开始发生的事情，还是在服务器重新启动时立即发生？

尝试重新启动 php5-fpm 守护进程，看看在跟踪错误日志时会发生什么。

检查您的 php.ini 文件以及通常位于 /etc/nginx/fastcgi_params 中的所有 fastcgi_params。您正在尝试做的事情有很多例子。

另外，您是否启用了 apc php 缓存扩展？

如果您在灯堆栈上，它在您的 php.ini 文件中将如下所示：

extension=apc.so
....
apc.enabled=0

从命令行进行一些 mysql 连接负载测试并查看结果可能不会有什么坏处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-13T12:08:07.013

设置 nginx 微缓存也会有所帮助。这将在几秒钟内提供相同的响应。

[http://seravo.fi/2013/optimizing-web-server-performance-with-nginx-and-php](http://seravo.fi/2013/optimizing-web-server-performance-with-nginx-and-php) 有一些关于 nginx 性能的好信息。个人遵循这一点，我很高兴。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T23:27:25.760

为了得到这个问题的答案：

`You should check your MySQL server. Probably it's overloaded or it limits count of parallel MySQL connections. You should find the bottleneck. And according to your top screenshot it doesn't look like either RAM or CPU, then it's most likely I/O.`-@VBrat

您将来可能想做的事情：

1-增加你的内存大小。

2-使用缓存。请参阅[这篇文章](http://www.theukwebdesigncompany.com/articles/php-caching.php)，了解缓存如何加速您的网站

3-减少执行的查询数量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T02:22:15.543

*   为 PHP 设置 APC 扩展（检查/配置）
*   MySQL - 检查配置、索引、慢查询
*   安装和配置 Varnish。这可以缓存页面请求，并且在减少您需要进行的 php 请求和 mysql 查询的数量方面非常有用。使用 cookie/ssl 可能会很棘手，但除此之外并不太难，而且非常值得运行

# php - 如何从 URL 中获取查询字符串

> ID：11559392
> 
> 赞同：0
> 
> 时间：2012-07-19T10:59:03.700
> 
> 标签：php, jquery

我的页面名称是 index.php，它包含一些链接（内部页面链接）和内容。单击链接时，我`"selected" class`正在应用链接`li`并显示相关内容，并且我的页面链接从 index.php 更改为 index.php#c2（或 #c3、#c4、c1 用于其他 ID）。

我的问题是页面加载。如果我在其他页面中提供此链接，例如。在`page.php`我这样给出时，我`<li><a href="index.php?#c2">link2</a></li>`怎么知道`#c2`基于此在 URL 中传递我想应用`"selected" class`到`li`. 我试过了，`$_SERVER`但没有完成。我无法获得“？”之后的字符串。

请告诉我是否有其他方法可以做到这一点..

```
<li class="selected"><a href="#c1">link1</a></li>
<li><a href="#c2">link2</a></li>
<li><a href="#c3">link3</a></li>
<li><a href="#c4">link4</a></li>

<div id="c1"><!-- contents of link1 --></div>
<div id="c2"><!-- contents of link2 --></div>
<div id="c3"><!-- contents of link3 --></div>
<div id="c4"><!-- contents of link4 --></div> 
```

jQuery代码添加选定的类

```
$('.links a').click(function(){
    $('.links  a').parent().removeClass('selected');
    $(this).parent().addClass('selected');  
}); 
```

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:01:48.150

您不能在 PHP 中执行此操作，仅因为它是客户端机制并且 PHP 在服务器上 :) 您必须直接在 JS 中解析查询字符串。

尝试这样的事情：

```
$('a [href='+document.location.hash+']').parent().addClass('selected'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:06:58.220

我认为这会起作用......例如

```
example.com/page.html#anchor
example.com/page.html#anotheranchor 
```

索尔是...

```
if(window.location.hash) {
  // Fragment exists
} else {
  // Fragment doesn't exist
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:23:53.897

您可以在服务器脚本或 javaScript 中使用正则表达式，而不是为每个元素定义 clss。只需使用下面给出的正则表达式模式，它只会为您提供 URL 中的链接部分。

```
 ^.*index.php/?(.*)$ 
```

要了解如何在 JavaScript 中使用[RegExp 对象](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)，请点击链接。

# python - 在 python 中测试副作用

> ID：11559401
> 
> 赞同：1
> 
> 时间：2012-07-19T10:59:22.300
> 
> 标签：python, unit-testing, assert

我想检查我的函数没有副作用，或者只有影响精确变量的副作用。是否有一个函数可以检查它实际上没有副作用（或仅对某些变量有副作用）？

如果没有，我该如何编写自己的如下：

*我的想法是这样的，初始化，调用被测函数，然后调用最终方法：*

```
class test_side_effects(parents_scope, exclude_variables=[]):
    def __init__():
        for variable_name, variable_initial in parents_scope.items():
            if variable_name not in exclude_variables:
                setattr(self, "test_"+variable_name, variable_initial)
    def final(self, final_parents_scope):
        for variable_name, variable_final in final_parents_scope.items():
            if variable_name[:5] is "test_" and variable_name not in exclude_variables:
                assert getattr(self, "test_"+variable_name) is variable_final, "Unexpected side effect of %s from %s to %s" % (variable_name, variable_initial, variable_final)

#here parents_scope should be inputted as dict(globals(),**locals()) 
```

*我不确定这是否正是我想要[的字典](https://stackoverflow.com/questions/1041639/get-a-dict-of-all-variables-currently-in-scope-and-their-values) ...*

最后，我应该这样做吗？如果不是，为什么不呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:43:17.187

我不熟悉您可能正在编写测试的嵌套函数测试库，但您似乎真的应该在这里使用类（即许多框架中的 TestCase）。

如果您的问题与在您的 TestCase 中获取父变量有关，您可以获得`__dict__`（我不清楚您所指的“父”变量是什么。

**更新**：@hayden 发布了一个要点来展示父变量的使用：

```
def f():
    a = 2
    b = 1
    def g():
        #a = 3
        b = 2
        c = 1
        print dict(globals(), **locals()) #prints a=1, but we want a=2 (from f)
    g()
a = 1
f() 
```

如果将其转换为字典，则可以通过以下方式解决问题：

```
class f(object): # could be unittest TestCase
    def setUp(self, a=2, b=1):
        self.a = a
        self.b = b

    def g(self):
        #a = 3
        b = 2
        c = 1
        full_scope = globals().copy()
        full_scope.update(self.__dict__)
        full_scope.update(locals())
        full_scope.pop('full_scope')
        print full_scope # print a = 1

my_test = f()
my_test.setUp(a=1)
my_test.g() 
```

寻找已经实现此功能的工具是正确的。我希望其他人将有一个已经实施的解决方案。

# ios - iphone上的html5应用程序视图大小错误

> ID：11559404
> 
> 赞同：1
> 
> 时间：2012-07-19T10:59:24.480
> 
> 标签：ios, html, resize

我刚得到一个 html5 应用程序，其中的代码需要部署到 iphone，但大小似乎完全搞砸了（就像整个屏幕的 4 倍）。由于我对html5的经验很少，我想问一下，除了添加

```
<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0"/> 
```

index.html 文件中的行？

# iphone - 编写一个带有可变参数的 replaceTokensWithStrings: 方法

> ID：11559408
> 
> 赞同：1
> 
> 时间：2012-07-19T10:59:54.370
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我想做以下事情：

```
["Hello <firstname> <middlename> <lastname>". replaceTokensWithStrings: 
  @"firstname", someFirstName, 
  @"middlename", middleNameMightBeNilObject,
  @"lastname", lastNameObject]; 
```

看起来这是不可能的，因为“`nil`作为终结者问题”。

然而`NSLog`，它也接受多个参数，也可以`nil`作为参数处理：

```
NSString *nilValue = nil;

NSLog(@"Value of nilValue=%@", nilValue); 
```

输出

```
Value of nilValue=(null) 
```

那么我怎样才能在我的`replaceTokensWithStrings:...`方法中实现这一点呢？

**更新：我的方法的签名：**

```
-(NSString *)replaceTokensWithStrings:(NSString *)input, ... NS_SOMETHING_SPECIAL_HERE{ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:00:56.230

您不能将 nil 更改为 @"" 以便将其替换为空白字符串吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:07:36.023

不工作？

```
["Hello <firstname> <middlename> <lastname>". replaceTokensWithStrings: 
  @"firstname", @"Peter", 
  @"middlename", @"", // or myStr
  @"lastname", @"Smith"]; 
```

或检查值：

```
@"middlename", myStr ? myStr : @"", 
```

* * *

### 编辑：

如果你想要可变参数，你应该阅读[http://cocoawithlove.com/2009/05/variable-argument-lists-in-cocoa.html](http://cocoawithlove.com/2009/05/variable-argument-lists-in-cocoa.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T19:20:51.290

`NSLog`计算其格式字符串（第一个参数，文字字符串）中的格式说明符（ , 等）的数量，`%@`以便`%i`知道它应该从调用堆栈中拉出多少个参数。这就是它可以处理`nil`参数的原因——它使用计数来终止它的处理（顺便说一下，如果你给它的参数太少，它经常会崩溃）。

因为你有一个格式类型的字符串，你可以做同样的事情——只需要一个辅助方法来计算`<something>`字符串中被调用的元素的数量`replaceTokensWithStrings:`，并使用结果来限制你对`va_list`.

在`NS_SOMETHING_SPECIAL`您的方法声明中将`NS_REQUIRES_NIL_TERMINATION`适用于您`nil`用作哨兵的情况。如果您从某个地方获取参数的数量，则不需要任何特别的东西。

# python - 从 python 字典到设置列表

> ID：11559414
> 
> 赞同：0
> 
> 时间：2012-07-19T11:00:08.873
> 
> 标签：python, dictionary

我希望能够在可以设置的选项列表中转换字典（使用完整路径），例如这应该通过：

```
def test_dic_to_args(self):
    dic = {"x1": {"x2": "val1"}, "x2": "val3"}
    des = ["x1.x2:val1", "x2:val3"]
    self.assertEqual(conf.dict_to_args(dic), des) 
```

现在我开始写它，我认为它很容易，但它比我想象的更棘手，有队列，类型检查等等。有没有聪明的方法来解决这个问题？也许最好的选择仍然是递归 DFS，你怎么看？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T11:13:47.827

如果字典应该是任意嵌套的，那么递归方法很可能是最简单的。

```
def dict_to_args(d, prefix=()):
    for k, v in d.iteritems():
        if isinstance(v, dict):
            for x in dict_to_args(v, prefix + (k,)):
                yield x
        else:
            yield ".".join(prefix + (k,)) + ":" + v 
```

例子：

```
>>> list(dict_to_args(dic))
['x2:val3', 'x1.x2:val1'] 
```

# facebook - 提供的网址无效 Facebook RestFB

> ID：11559415
> 
> 赞同：5
> 
> 时间：2012-07-19T11:00:18.057
> 
> 标签：facebook, facebook-graph-api

我正在使用使用 RestFB 的 Facebook Graph。当我尝试将 URL 发布到 Facebook 时 -

```
http://localhost:8080/demo 
```

![在此处输入图像描述](../Images/204d2b55c246d6f0725deefedae45f3f.png) 我什至试过

```
http://www.wannaget.com/home 
```

这也行不通。问题不是本地或实时 url。因为这以前是有效的，但现在它给了我无效的 URL 错误。

它给出以下响应

```
INFO: Facebook responded with HTTP status code 400 and response body: {"error":{"message":"(#1500) The url you supplied is invalid","type":"OAuthException","code":1500}} 
```

我不明白为什么会这样。一切正常，但现在我面临这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T15:04:00.410

网址格式无效。我猜它必须以扩展名结尾，例如“http://localhost:8080/demo.html”

对我有用的解决方法（在轨道上）：

我试图在 fb 上发布链接“localhost:3000/articles/53”，但出现同样的错误。为了解决它，我有以下路线：

```
match 'news/article/:id/x.x' => 'articles#show' 
```

并在 fb 上成功发布结果链接“localhost:3000/articles/53/xx”

欢迎任何真正的解决方案！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T11:14:40.650

您提供的 URL 用于在您的机器上运行的本地服务器。Facebook 必须能够访问该 URL，但它不能，因为它不在 Internet 上 - 它只能从您的本地计算机访问。

您必须为 Facebook 提供其服务器可访问的真实 URL...

# java - Vaadin : 调用自定义 JavaScript 函数

> ID：11559417
> 
> 赞同：2
> 
> 时间：2012-07-19T11:00:30.580
> 
> 标签：java, javascript, vaadin

是否可以从 Vaadin Portlet 调用 Java Script 函数？例如，我有一个 Portlet 和一个 JavaScript 文件，其中包含函数：alert(message)。我想调用该函数并从我的 Vaadin portlet 发送消息。

非常感谢任何指南。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:19:36.377

用于`Window.executeJavaScript(...)`在浏览器中执行任意 Javascript 代码。

# php - 根据行是否存在更新/插入

> ID：11559420
> 
> 赞同：2
> 
> 时间：2012-07-19T11:00:34.617
> 
> 标签：php, sql, postgresql

处理一些 postgreSQL 查询。正如我在上一个问题中所说..我对 SQL 逻辑的了解非常有限..

我有这个插入一行的查询。

```
$timestamp = date('Y-m-d G:i:s.u');
$check_time = "start"; //can also be stop
$check_type = "start_user"; //can also be stop_user

$insert_query = "INSERT INTO production_order_process_log (
production_order_id, 
production_order_process_id, 
$check_time, 
$check_type) 
    VALUES (
'$production_order_id', 
'$production_order_process_id', 
'$timestamp', 
'$user')
"; 
```

不幸的是，每次都添加一个新行。我想添加条件 SQL 以便

如果 production_order_process_id 不存在，请按照上面查询中的内容执行 INSERT。也就是说，添加包含所有新信息的新行

但如果`production_order_process_id`确实存在并且`check_type`是`stop_user`然后更新行以用 填充列并`stop`用填充`$timestamp`列。`stop_user``$user`

我知道这很复杂..或者，至少对我来说是^^非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:55:09.450

这通常被称为 `MERGE`或 upsert。PostgreSQL 没有明确支持这个操作。

我`MERGE`在 PostgreSQL 中看到的关于 PostgreSQL的最佳文章是[depesz 的这篇文章](http://www.depesz.com/2012/06/10/why-is-upsert-so-complicated/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:03:34.427

如果您可以创建**存储过程**并在插入新记录时调用，那就太好了。

```
 DELIMITER $$

    DROP PROCEDURE IF EXISTS `DB`.`InsertNewRow` $$
    CREATE PROCEDURE `db`.`InsertNewRow` ()
    BEGIN

    DECLARE V_EXIST INT DEFAULT 0;
    DECLARE   V_check_type VARCHAR(20);

    SELECT production_order_process_id,check_type INTO V_EXIST,V_check_type FROM production_order_process_log;

    IF V_EXIST=0 THEN

      INSERT INTO production_order_process_log (
      production_order_id,
      production_order_process_id,
      $check_time,
      $check_type)
        VALUES (
      '$production_order_id',
      '$production_order_process_id',
      '$timestamp',
      '$user');

    ELSEIF V_check_type='stop_user' THEN

      /* UPDATE QUERY HERE */

    END IF;
    END $$

    DELIMITER ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T11:03:50.263

在插入类型 ON DUPLICATE KEY UPDATE 后...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T11:03:55.333

使用`MERGE`声明

这是用法

```
MERGE INTO table [[AS] alias]
USING [table-ref | query]
ON join-condition
[WHEN MATCHED [AND condition] THEN MergeUpdate | DELETE]
[WHEN NOT MATCHED [AND condition] THEN MergeInsert]

MergeUpdate is
UPDATE SET { column = { expression | DEFAULT } |
          ( column [, ...] ) = ( { expression | DEFAULT } [, ...] ) }
[, ...]
(yes, there is no WHERE clause here)

MergeInsert is
INSERT [ ( column [, ...] ) ]
    { DEFAULT VALUES | VALUES ( { expression | DEFAULT } [, ...] )
[, ...]}
(no subquery allowed) 
```

如果您搜索它，我相信您会找到更多文章/示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T11:06:42.170

只需在插入内容中添加 WHERE CLAUSE：

```
INSERT INTO production_order_process_log   
           (  production_order_id, production_order_process_id, check_time, check_type)
    VALUES ( '$production_order_id', '$production_order_process_id', '$timestamp', '$user')
WHERE NOT EXISTS ( SELECT *
        FROM production_order_process_log nx
        --
        --  assuming production_order_id is the Primary Key, here
        --
        WHERE nx.production_order_id = '$production_order_id'
        ); 
```

更新：我对参数和 VALUE() 感到困惑。下面的片段在没有参数的情况下工作，但具有*立即*值：

```
INSERT INTO tmp.production_order_process_log
           (  production_order_id, production_order_process_id, check_time, check_type)
    SELECT 1, 2, '2012-07-19 12:12:12', 'Lutser'
WHERE NOT EXISTS ( SELECT *
        FROM tmp.production_order_process_log nx
        --
        --  assuming production_order_id is the Primary Key, here
        --
        WHERE nx.production_order_id = 1
        ); 
```

（您必须稍作更改才能重新添加参数）

# php - 匹配所有出现的字符串

> ID：11559425
> 
> 赞同：2
> 
> 时间：2012-07-19T11:00:58.150
> 
> 标签：php, regex, perl, preg-match-all

我的搜索文本如下。

```
...
...
var strings = ["aaa","bbb","ccc","ddd","eee"];
...
... 
```

它包含许多行（实际上是一个 javascript 文件）但需要解析变量*字符串*中的值，即 aaa 、 bbb 、 ccc 、 ddd 、 eee

以下是 Perl 代码，或者在底部使用 PHP

```
my $str = <<STR;
    ...
    ...
    var strings = ["aaa","bbb","ccc","ddd","eee"];
    ...
    ...
STR

my @matches = $str =~ /(?:\"(.+?)\",?)/g;
print "@matches"; 
```

我知道上面的脚本会匹配所有的瞬间，但它也会解析其他行中的字符串（*“xyz”*）。所以我需要检查字符串*var strings =*

```
/var strings = \[(?:\"(.+?)\",?)/g 
```

使用上面的正则表达式它将解析*aaa*。

```
/var strings = \[(?:\"(.+?)\",?)(?:\"(.+?)\",?)/g 
```

使用上面，将得到*aaa*和*bbb*。因此，为了避免正则表达式重复，我使用了 '+' 量词，如下所示。

```
/var strings = \[(?:\"(.+?)\",?)+/g 
```

但我只有*eee*，所以**我的问题是为什么我只在使用 '+' 量词时才得到*eee ？***

更新 1：使用 PHP preg_match_all（这样做是为了获得更多关注 :-)）

```
$str = <<<STR
    ...
    ...
    var strings = ["aaa","bbb","ccc","ddd","eee"];
    ...
    ...
STR;

preg_match_all("/var strings = \[(?:\"(.+?)\",?)+/",$str,$matches);
print_r($matches); 
```

更新 2：为什么它匹配*eee*？因为贪心`(?:\"(.+?)\",?)+`。通过消除贪婪， `/var strings = \[(?:\"(.+?)\",?)+?/` *aaa*将被匹配。**但为什么只有一个结果？有没有什么办法可以通过使用单个正则表达式来实现？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:08:34.983

这是一个单一的正则表达式解决方案：

```
/(?:\bvar\s+strings\s*=\s*\[|\G,)\s*"([^"]*)"/g 
```

`\G`是一个零宽度断言，它匹配上一个匹配结束的位置（或者如果它是第一次匹配尝试，则为字符串的开头）。所以这就像：

```
var\s+strings\s*=\s*[\s*"([^"]*)" 
```

...在第一次尝试时，然后：

```
,\s*"([^"]*)" 
```

...在那之后，但每场比赛都必须从最后一场比赛结束的地方开始。

这是一个[**PHP 演示**](http://ideone.com/brwIT)，但它也可以在 Perl 中运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T14:39:09.197

您可能更喜欢这种首先`var strings = [`使用`/g`修饰符查找字符串的解决方案。这将设置为在下一个正则表达式`\G`之后立即匹配`[`，该正则表达式查找所有紧随其后出现的双引号字符串，可能前面有逗号或空格。

```
my @matches;

if ($str =~ /var \s+ strings \s* = \s* \[ /gx) {
  @matches = $str =~ /\G [,\s]* "([^"]+)" /gx;
} 
```

尽管使用了`/g`修饰符，但您的正则表达式`/var strings = \[(?:\"(.+?)\",?)+/g`只匹配一次，因为没有第二次出现`var strings = [`. 当匹配完成时，每个匹配项都会返回捕获变量 、 等的值列表，并且（无需`$1`转义双引号）捕获多个值，只留下最终值。您需要编写类似上述的内容，它只为每个匹配捕获一个值。`$2``$3``/(?:"(.+?)",?)+/``$1``$1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T11:20:46.220

因为它`+`告诉它重复括号内的确切内容`(?:"(.+?)",?)`一次或多次。所以它将匹配`"eee"`字符串，然后查找该`"eee"`字符串的重复，它没有找到。

```
use YAPE::Regex::Explain;
print YAPE::Regex::Explain->new(qr/var strings = \[(?:"(.+?)",?)+/)->explain();

The regular expression:

(?-imsx:var strings = \[(?:"(.+?)",?)+)

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  var strings =            'var strings = '
----------------------------------------------------------------------
  \[                       '['
----------------------------------------------------------------------
  (?:                      group, but do not capture (1 or more times
                           (matching the most amount possible)):
----------------------------------------------------------------------
    "                        '"'
----------------------------------------------------------------------
    (                        group and capture to \1:
----------------------------------------------------------------------
      .+?                      any character except \n (1 or more
                               times (matching the least amount
                               possible))
----------------------------------------------------------------------
    )                        end of \1
----------------------------------------------------------------------
    "                        '"'
----------------------------------------------------------------------
    ,?                       ',' (optional (matching the most amount
                             possible))
----------------------------------------------------------------------
  )+                       end of grouping
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

一个更简单的例子是：

```
my @m = ('abcd' =~ m/(\w)+/g);
print "@m"; 
```

仅打印`d`。这是因为：

```
use YAPE::Regex::Explain;
print YAPE::Regex::Explain->new(qr/(\w)+/)->explain();

The regular expression:

(?-imsx:(\w)+)

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  (                        group and capture to \1 (1 or more times
                           (matching the most amount possible)):
----------------------------------------------------------------------
    \w                       word characters (a-z, A-Z, 0-9, _)
----------------------------------------------------------------------
  )+                       end of \1 (NOTE: because you are using a
                           quantifier on this capture, only the LAST
                           repetition of the captured pattern will be
                           stored in \1)
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

如果您在捕获组上使用量词，则只会使用最后一个实例。

* * *

这是一种有效的方法：

```
my $str = <<STR;
    ...
    ...
    var strings = ["aaa","bbb","ccc","ddd","eee"];
    ...
    ...
STR

my @matches;
$str =~ m/var strings = \[(.+?)\]/; # get the array first
my $jsarray = $1;
@matches = $array =~ m/"(.+?)"/g; # and get the strings from that

print "@matches"; 
```

* * *

**更新**：单行解决方案（尽管不是单个正则表达式）将是：

```
@matches = ($str =~ m/var strings = \[(.+?)\]/)[0] =~ m/"(.+?)"/g; 
```

但这是非常难以理解的恕我直言。

# sql-server - 合并和触发 - 主键违规

> ID：11559428
> 
> 赞同：1
> 
> 时间：2012-07-19T11:00:59.457
> 
> 标签：sql-server, tsql, triggers, merge-replication

我有那些桌子

```
CREATE TABLE [Test](
    [Id] [int] NOT NULL,
    [Value] [int] NOT NULL,
    [Id_Test_2] [int] NOT NULL,
 CONSTRAINT [PK_Test] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

CREATE TABLE [Test_2](
    [Id_Test_2] [int] NOT NULL,
    [Value_Test_2] [int] NOT NULL,
 CONSTRAINT [PK_Test_2] PRIMARY KEY CLUSTERED 
(
    [Id_Test_2] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

在测试表上，我有一个更新触发器：

```
CREATE TRIGGER [dbo].[Test_TriggerUpdate]
ON [dbo].[Test]

FOR UPDATE 

NOT FOR REPLICATION

AS
BEGIN

MERGE Test_2 AS Target

    USING 
        ( SELECT    D.Id_Test_2 ,
                    ( COALESCE(D.Value, 0) * 2 ) AS Value 
          FROM      Deleted D                    
        ) AS Source
    ON ( Target.Id_Test_2 = Source.Id_Test_2       )
    WHEN MATCHED 
        THEN 
            UPDATE
          SET               TARGET.Value_Test_2 = ( TARGET.Value_Test_2 - Source.Value )
    WHEN NOT MATCHED BY TARGET 
        THEN
        INSERT  (
                      Id_Test_2 ,
                      Value_Test_2

                    )
          VALUES    ( Source.Id_Test_2 ,                      
                      (Source.[Value]*(-1))
                    );

  MERGE Test_2 AS Target
    USING 
        ( SELECT    I.Id_Test_2 ,
                    ( COALESCE(I.Value, 0)
                      * 2 ) AS Value
          FROM      INSERTED I
        ) AS Source
    ON ( Target.Id_Test_2 = Source.Id_Test_2
       )
    WHEN MATCHED 
        THEN 
            UPDATE
          SET               TARGET.Value_Test_2 = ( TARGET.Value_Test_2    + Source.Value )
    WHEN NOT MATCHED BY TARGET 
        THEN
        INSERT  (
                      Id_Test_2 ,
                      Value_Test_2

                    )
          VALUES    ( Source.Id_Test_2 ,
                      Source.[Value]
                    );

END 
```

表 test_2 为空，测试有此记录

```
Id  Value   Id_Test_2
1   10  1
2   20  1
3   30  2 
```

当我运行此更新时

```
UPDATE Test  SET VALUE= 50 
```

我有这种错误

> 消息 2627，级别 14，状态 1，过程 Test_TriggerUpdate，第 12 行违反主键“PK_Test_2”。无法将值为 (1) 的重复键插入“Test_2”。

当使用多行调用合并操作时可能会发生这种情况，而不是在 INSERT 和下一个 UPDATE 操作之前调用，它为记录 1 和 2 运行两个 INSERT。可以做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:36:20.267

解决这个问题的简单方法是在键上使用 group by 指令和在值上使用聚合函数来求和，如下所示：

```
ALTER TRIGGER [dbo].[Test_TriggerUpdate]
ON [dbo].[Test]

FOR UPDATE 

NOT FOR REPLICATION

AS
BEGIN

  MERGE Test_2 AS Target
    USING 
        ( SELECT    D.Id_Test_2 ,
                    **sum(( COALESCE(D.Value, 0) * 2 )) AS Value**
          FROM      Deleted D      
          **GROUP BY  Id_Test_2**
        ) AS Source
    ON ( Target.Id_Test_2 = Source.Id_Test_2 )
    WHEN MATCHED 
        THEN 
        UPDATE
          SET TARGET.Value_Test_2 = ( TARGET.Value_Test_2 - Source.Value )
    WHEN NOT MATCHED BY TARGET 
        THEN
        INSERT  ( Id_Test_2 ,
                  Value_Test_2
                )
        VALUES  ( Source.Id_Test_2 ,
                  (Source.[Value]*(-1))
                );

  MERGE Test_2 AS Target
    USING 
        ( SELECT    I.Id_Test_2 ,
                    **sum(( COALESCE(I.Value, 0) * 2 )) AS Value**
          FROM      INSERTED I
          **GROUP BY  Id_Test_2**  
        ) AS Source
    ON ( Target.Id_Test_2 = Source.Id_Test_2 )
    WHEN MATCHED 
        THEN 
        UPDATE
          SET TARGET.Value_Test_2 = ( TARGET.Value_Test_2 + Source.Value )
    WHEN NOT MATCHED BY TARGET 
        THEN
        INSERT  ( Id_Test_2 ,
                  Value_Test_2
                )
        VALUES  ( Source.Id_Test_2 ,
                  Source.[Value]
                );

END 
```

# php - 是否建议对原生和非原生站点使用基于 API 的架构？

> ID：11559434
> 
> 赞同：0
> 
> 时间：2012-07-19T11:01:18.883
> 
> 标签：php, yii, restful-url

我计划使用一种架构（MVC = PHP->Yii），我将为本地站点（主要 Web 应用程序）和非本地站点（iPhone、BB、WAP 等应用程序）使用基于 REST API 的架构。

不，我的问题是建议将 View-Controller (HTML+User Requests) (For Main Site) 与 Controller-Model (Request/Response+DB) (for API) 一起使用，并且相同的 API 平台将用于非本地应用程序，或者我应该对主站点使用完整的 MVC 并为 API 构建单独的平台。这是因为我不希望主站点有额外的 HTTP (cURL) 开销。

**更新：** @karmakaze 这就是我的想法，但我仍然必须编写 RestControllers，因为涉及很多代码。所以无论如何我们最终有两个不同的控制器，例如

```
UserController extends CController {
    actionRegister() {
        ...Some calculations
        .
        .
        Instead of making Calls to model We will use call controller i.e.
        $userRest = new UserRestController();
        /*
         * This will return json data or php obj depending on params passed or
         * may raise an exception
         */
        $userRest->actionCreate($param1, $param2);
        // Process data obtained.
    }
} 
```

还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:50:07.697

如果它符合您的需求，您可以基于一些 JavaScript 库（如[AngularJs](http://angularjs.org/)、[BackBone.JS](http://backbonejs.org/)或任何其他*MVC* JavaScript 库）构建前端。

这样你应该在 Yii 中只构建一个 RESTful API，作为你应用程序的后端。

然而，这个解决方案暴露了一些东西：很难[让应用程序可抓取](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)。

问题的角度让我明白了在服务端渲染HTML是比较重要的。我正在考虑这个解决方案：

1.  制作普通的 MVC 应用程序，包括控制器和视图
2.  使用以下任一记号：

    *   默认情况下的`GET`参数，但当它是 API 调用时：`false``ture`

检查这个例子：

```
// in a controller:
public function actionView($id, $api=false) {
    // some calculations, getting the $model variable
    if ($api) {
        echo $model->json_output(); // you can implement it in components/model.php or generate the json output some other way
    } else {
        render('view', array('model'=>$model));
    }
} 
```

*   例如，一个名为*api*的子域（您将拥有 api.yourapp.tld），
*   或者使用请求中的另一个 HTTP 参数来确定它是否是 API 调用。

这些版本中的任何一个都将带来一种验证客户端是否请求浏览器的 JSON/XML 响应（API 调用）或 HTML 的方法。

这样，您就可以避免为 API 和主站点构建单独的控制器而感到头疼。

**注意**当它们只是呈现表单时，不需要对动作执行此技巧 - 这是无用的。

**注意 2**您可以使用后一种方法来呈现请求，`_request_fragment`并假设每个请求都是 API 调用，除非`$_GET['_request_fragment']`指定。像这样，您可以使用 Yii制作[AngularJs](http://angularjs.org/)、[Blackbone.js应用程序。](http://backbonejs.org/)

**UPDATE**在[这里](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)`_request_fragment`指定，大多数搜索引擎都使用它来爬取 AJAX Web 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T02:58:18.303

对主 Web 应用程序使用完整的 MVC，并重用相同的模型和控制器来构建 REST API。如果您在构建主 Web 应用程序时遵循 Yii 约定，则有一些扩展会自动执行此操作。只需在[Yii 扩展](http://www.yiiframework.com/extension/)中搜索 REST 即可。我们将为我们的移动应用程序做同样的事情。目前正在研究 RESTFullYii。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:09:15.373

您可以对本机和非本机应用程序使用相同的方法，它还会减少您在开发时间的工作以及更新或更改您的逻辑......我确实有很多这种情况的经验......

# c++ - 如何在 Windows 的发布模式下避免“program.exe 已停止工作”窗口？

> ID：11559435
> 
> 赞同：13
> 
> 时间：2012-07-19T11:01:18.877
> 
> 标签：c++, windows, visual-studio-2010

我正在开发 Visual Studio 2010 上的 C++ 软件。由于该软件应该在无法进行人工交互的服务器上运行，我真的需要摆脱这个“program.exe 已停止工作”窗口出现错误时会在发布版本中弹出。我只是希望程序终止（也许还会给出错误消息，但不一定）并且不要让它保持阻塞等待某人单击“关闭程序”按钮。我不得不提到我的机器上有 64 位 Windows 7 Professional。

我已经阅读了几件事，例如：

*   _set_abort_behavior 函数。这解决了调用 abort() 时的情况，但对于诸如“向量下标超出范围”之类的错误，情况并非如此。

*   我知道我可以通过异常处理来解决其中一些错误，但并非所有错误都是异常，因此这不能解决我的整个问题。

*   我还阅读了有关 Dr. Watson 调试器的一些信息，它应该以静默方式终止应用程序，但我的印象是这个调试器不适用于 Windows 7。另外我不知道这个调试器是否能解决我的问题在释放模式...

*   我发现在我的整个机器上禁用错误报告并不是一个优雅的选择，尽管我读到这也可能是一种替代方案（不是我真正想要的）。

如何在 Visual Studio 中执行此操作？有什么我可以使用的设置吗？

有没有办法在 Visual Studio 中将所有错误转换为异常，以便我可以通过异常处理机制解决问题？（如果这是一个愚蠢的问题，请宽容）

我期待着你的建议。非常感谢您的宝贵时间！

最好的问候，科妮莉亚

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-19T11:10:20.100

您可以使用

```
SetErrorMode(SEM_FAILCRITICALERRORS | SEM_NOGPFAULTERRORBOX); 
```

[SetErrorMode 的 MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680621%28v=vs.85%29.aspx)

你也可以[参考这里](https://stackoverflow.com/questions/9718695/how-can-i-supress-all-error-dialogs-when-a-process-crashes-i-only-want-it-to-cr)

希望这能解决您的问题...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:41:15.443

一个好方法是添加您自己的未处理异常过滤器（请参阅[SetUnhandledExceptionFilter()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680634%28v=vs.85%29.aspx)文档），然后编写日志和小型转储，以便您可以进行所需的任何错误处理（例如关闭设备/句柄），并且您还有一个您可以稍后分析的故障转储。此答案中的有用信息：[https ://stackoverflow.com/a/1547251/188414](https://stackoverflow.com/a/1547251/188414)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-09-10T00:01:46.217

有时这个错误只是因为你没有`&`在你使用的值之前添加一个符号`scanf`

尝试以下解决我的问题

从

```
scanf("%d",code); 
```

到

```
scanf("%d",&code); 
```

# javascript - 只允许使用 javascript 和 mootools 将整数和浮点数输入到字段中

> ID：11559436
> 
> 赞同：0
> 
> 时间：2012-07-19T11:01:21.547
> 
> 标签：javascript, mootools

我需要某种指导，说明如何只允许将 int 或 float 输入到表单输入字段中。验证必须发生在按键事件上。我遇到的问题是，例如，在输入时，`1.2`keyup 事件函数中的检查会看到`1.`哪个不是数字。

这是我的代码：

```
document.id('inputheight').addEvent('keyup', function(e) {
    this.value = this.value.toFloat();
    if (this.value == 'NaN') {
        this.value = 0;
    }         
}); 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:55:52.097

您可以简单地清理 keyup 上字段的值。这样的事情应该可以解决问题：

```
this.value = this.value.replace(/([^\d.]+)?((\d*\.?\d*)(.*)?$)/, "$3"); 
```

正则表达式立即用它遇到的第一个数字字符串替换该值。

```
([^\d.]+)?  // optionally matches anything which is not
            // a number or decimal point at the beginning

(\d*\.?\d*) // tentatively match any integer or float number

(.*)?$      // optionally match any character following
            // the decimal number until the end of the string 
```

# jquery - 使用 jQuery 对象调用 jQuery 触发器

> ID：11559437
> 
> 赞同：1
> 
> 时间：2012-07-19T11:01:23.497
> 
> 标签：jquery, events, triggers, bind, jquery-events

我有一个 jQuery 对象，我想将它传递给 jQuery.trigger。绑定函数应该接收这个对象并用它做一些事情。但是，似乎绑定函数接收的是 DOM 节点，而不是传递给触发器的完整 jQuery 对象。

例子：

```
var doSomething = function(event, object) {
    object.myPluginFunction(); 
}

$("#selector").bind("finished", doSomething);

var myObject = $("#table").myPlugin();
$("#selector").trigger("finished", myObject); 
```

问题是：在`doSomething`我无法访问`object.myPluginFunction`......接收到的对象实际上似乎不是一个对象。相反，它是一个 DOM 节点。在我看来，jQuery 剥离了它。

有没有办法在不调用`$.myPlugin`或引入回调的情况下获得访问权限？

我使用 jQuery 1.4.1，无法升级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:11:54.220

您需要在数组中调用触发器参数

```
$("#selector").trigger("finished", [myObject]);​ 
```

[jsFiddle](http://jsfiddle.net/jbNWd/)

另外，请注意，由于此“完成”是您创建的自定义事件，因此与任何 UI（本机）事件无关，因此调用 using[`triggerHandler`](http://api.jquery.com/triggerHandler/)而不是`trigger`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:19:56.343

另一个例子：

```
var obj = (function() {
    var that = {};
    var name = "toto";

    that.getName = function() {
        return name;    
    };

    return that;
})();

$("#btnTest").bind("customEvent", function(evt, obj) {
    console.log(obj.t1.getName());
});

$("#btnTest").click(function() {
    $("#btnTest").trigger("customEvent", {t1: obj});
}); 
```

jsFiddle：http: [//jsfiddle.net/EJLwu/3/](http://jsfiddle.net/EJLwu/3/)

# networking - dnsmasq 正常解析 DNS 查询

> ID：11559438
> 
> 赞同：0
> 
> 时间：2012-07-19T11:01:24.620
> 
> 标签：networking, ubuntu, dns, dnsmasq

我是 dnsmasq 的新手，网络不是我的强项，希望我错过了一些简单的东西。

我有一台运行 dnsmasq 的 Ubuntu 笔记本电脑。笔记本电脑的 WiFi 连接到 Internet，笔记本电脑的以太网连接到 LAN。

将我的机器插入局域网中，笔记本电脑为我分配了一个 IP 地址。在我的机器上访问 www.google.com 会拿起笔记本电脑，然后我会看到笔记本电脑的 Apache 页面，这是我想要的结果。问题是我无法访问任何其他网站，无法访问目标主机。

我希望运行 dnsmasq 的笔记本电脑允许我的机器正常解析 DNS 查询，并且仅在访问 www.google.com 时受到限制。

我的 dnsmasq.conf 是默认的，除了：

```
address=/www.google.com/192.168.0.1
interface=eth0
dhcp-range=192.168.0.50,192.168.0.150,12h 
```

我感觉这可能与每个网络上的 IP 设置有关？
WiFi 有一个静态 IP 192.168.1.55 连接到 192.168.1.1 的路由器和 192.168.1.10 的 DNS 服务器。
以太网使用 IP 192.168.0.1 手动配置，将路由器设置为 WiFi IP 192.168.1.55，DNS 服务器 192.168.1.55 也是如此。

提前感谢您的帮助。
皮特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:14:34.913

经过一番摆弄，这与 iptables 而不是 dnsmasq 有关。

# parsing - 使用 Applescript 在 URL 中创建随机数

> ID：11559439
> 
> 赞同：0
> 
> 时间：2012-07-19T11:01:30.810
> 
> 标签：parsing, url, random, numbers, applescript

对于有经验的applescript用户来说，这可能相当容易，但我想知道如何在URL中随机化一个数字并让safari然后打开该URL..

所以例如.. [http://example.com/something=(RANDOM](http://example.com/something=(RANDOM) NUMBER)&something=...

真的很感激这方面的一些帮助..

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:58:13.750

这是一个例子：

```
set randNum to random number from 1 to 20
tell application "Safari"
    open location "http://example.com/something=" & randNum & "something=..."
end tell 
```

# f# - 如何在 F# 中管理调试打印

> ID：11559440
> 
> 赞同：7
> 
> 时间：2012-07-19T11:01:43.180
> 
> 标签：f#

我想使用具有类型签名的函数向我的项目添加调试打印，例如：

```
bool -> Printf.TextWriterFormat<'a> -> 'a 
```

即它应该接受一个布尔值来指示我们是否处于详细模式，并使用它来决定是否打印。

例如，假设`dprint : bool -> Printf.TextWriterFormat<'a> -> 'a`我想要这种行为：

```
> dprint true "Hello I'm %d" 52;;
Hello I'm 52
val it : unit = ()
> dprint false "Hello I'm %d" 52;;
val it : unit = () 
```

这个想法是可以使用命令行标志来避免控制此输出。我还想避免“不冗长”情况下的运行时成本。可以使用以下方法定义一个像这样工作的函数`kprintf`：

```
let dprint (v: bool) (fmt: Printf.StringFormat<'a,unit>) =  
  let printVerbose (s: string) =
    if v then System.Console.WriteLine(s)

  fmt |> Printf.kprintf printVerbose 
```

但是在我的机器上打印/忽略带有`List.iter (dprint b "%A") [1..10000]`(b \in {true,false}) 的数字序列对于 b 的两个值都需要 1.5 秒。

我想出了另一种使用反射的方法，它构建了一个适当类型的函数来丢弃格式化参数：

```
let dprint (v: bool) (fmt: Printf.TextWriterFormat<'a>) : 'a =
  let rec mkKn (ty: System.Type) =
    if FSharpType.IsFunction(ty) then
      let _, ran = FSharpType.GetFunctionElements(ty)
      FSharpValue.MakeFunction(ty,(fun _ -> mkKn ran))
    else
      box ()
  if v then
    printfn fmt
  else
    unbox<'a> (mkKn typeof<'a>) 
```

但是这里的反射似乎太昂贵了（甚至比标准库中的复杂定义`printf`有时还要昂贵）。

我不想在我的代码中乱扔以下东西：

```
if !Options.verbose then
    printfn "Debug important value: %A" bigObject5 
```

或关闭：

```
dprint (fun () -> printfn "Debug important value: %A" bigObject5) 
```

那么，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T13:05:53.563

我喜欢您使用反射的解决方案。如何在类型级别缓存它，以便您为每种类型只支付一次反射的代价？例如：

```
let rec mkKn (ty: System.Type) =
    if Reflection.FSharpType.IsFunction(ty) then
        let _, ran = Reflection.FSharpType.GetFunctionElements(ty)
        // NOTICE: do not delay `mkKn` invocation until runtime
        let f = mkKn ran
        Reflection.FSharpValue.MakeFunction(ty, fun _ -> f)
    else
        box ()

[<Sealed>]
type Format<'T> private () =
    static let instance : 'T =
        unbox (mkKn typeof<'T>)
    static member Instance = instance

let inline dprint verbose args =
    if verbose then
        printfn args
    else
        Format<_>.Instance 
```

实用主义者只会使用快速 C# 格式的打印机器来代替它。`Printf`正如您所指出的，我避免在生产代码中使用函数，因为它们具有开销。但是 F# 打印肯定感觉更好用。

我的`#time`结果`List.iter (dprint false "%A") [1..10000]`：

*   原始版本：0.85
*   带反射的原始版本：0.27
*   建议版本：0.03

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T13:33:36.007

这个怎么样：

```
/// Prints a formatted string to DebugListeners.
let inline dprintfn fmt =
    Printf.ksprintf System.Diagnostics.Debug.WriteLine fmt 
```

然后你可以写：

```
dprintfn "%s %s" "Hello" "World!" 
```

`Debug.WriteLine(...)`标记为，`[<Conditional("DEBUG")>]`因此 F# 编译器*应该*能够在编译时消除整个语句（尽管您必须试验并检查编译后的 IL 以查看它是否确实如此。

请注意，此解决方案仅在您不关心在运行时更改详细程度时才有效。如果是这种情况，您将不得不寻找不同的解决方案。

更新：出于好奇，我只是尝试了这段代码（它确实有效）并且 F# 2.0 编译器不会编译所有内容（即使进行了优化），所以无论是否调试速度都是一样的。可能还有其他方法可以让编译器消除整个语句以解决速度问题，但您只需进行一些试验即可找到答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T11:18:26.500

为什么不使用`#defines`只是做

```
let dprint  (fmt: Printf.StringFormat<'a,unit>) =  
#if DEBUG
  let printVerbose (s: string) =
        System.Console.WriteLine(s)

  fmt |> Printf.kprintf printVerbose
#else
   fun _ -> () 
```

在我的机器上，优化版本的样本测试需要 0.002 秒

# javascript - 在 Javascript 中，如何在特定选项的文本框中显示数字。

> ID：11559441
> 
> 赞同：1
> 
> 时间：2012-07-19T11:01:43.897
> 
> 标签：javascript, jquery, textbox

在 JavaScript 中，我需要帮助将值附加到文本框中。发生的情况是，使用下面的相关代码，用户可以将表格行中的“选项类型”添加到文本框中。例如，如果用户单击“添加”按钮并且在该行中选项类型为“真或假”，那么我希望它在文本框中显示数字 27，并且如果“选项类型”为“是或否”然后在文本框中显示数字 28。所以我想要它像下面

```
Option Type             Number

True or False           27
Yes or No               28 
```

我的问题是如何将 2 种选项类型的数字插入到文本框中？

我在下面对 True 或 False 进行了尝试，但没有奏效：

```
var myNumbers = {};

   myNumbers["True-False"] = "27";

   gridValues = myNumbers[gridValues]; 
```

下面是真假按钮：

```
<input name="answerTrueName"  id="answerTrue"   type="button"   value="True"    onclick="btnclick(this);"/>
<input name="answerFalseName" id="answerFalse"  type="button"   value="False"   onclick="btnclick(this);"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:59:22.923

想通了，应该是这样的：

```
var myNumbers = {};

   myNumbers["True or False"] = "27";

   gridValues = myNumbers[gridValues]; 
```

# c# - 主键应该总是从 1 开始吗？

> ID：11559450
> 
> 赞同：4
> 
> 时间：2012-07-19T11:01:57.367
> 
> 标签：c#, asp.net, sql, vb.net, database-design

我正在迁移一个旧数据库（oracle），并且很少有表，`CountryCode`它们的主键是字符串（），我正在考虑添加 Number 列作为主键，因为它可以快速使用。这些表并不大。`DeptCode``RoleCodes``Codes``joins`

我想知道这些表的主键是否应该从数字“1”开始，或者它可以从 100 开始，只是为了区分黑白表 PK，尽管我不认为我会在报告中显示它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:04:32.400

您不应该这样做来区分表格。那是不切实际的。

并非所有主键都必须从 1 开始，就像订单号一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T11:06:30.293

对于序列生成的 ID，如果很容易（取决于您的数据库等），我建议从不同的值开始*。**您不应该在代码*中使用它来区分它们，但它可以使测试更加合理。

在此之前，我遇到过一种情况，我不小心使用了一个表的外键，*就好像*它是另一个表的外键一样。测试通过了，因为 ID*巧合*地相同。发现问题后，我们更改了初始种子，发现测试清晰*很多。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T11:32:29.880

您用来切换到整数主键的基本原理似乎无效：使用 INT 而不是原始代码（我假设是字符串）所看到的性能增益将可以忽略不计。PK 总是被索引的，字符串或数字的索引和即时一样好。因此，除非您真的需要 INT，否则我很想坚持使用原始数据类型并使用原始数据 - 简化数据迁移（这是在做任何工作时都应该考虑的事情）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T11:06:36.167

例如，在 ERP 系统中定义代表某组项目的数字范围是很常见的。

这可以作为更大数量的位置，例如

```
1234567890
   | |
   index 4 - 6 represents region code
   index 7 - 8 represents dept code... 
```

或者，正如我在您的情况下所怀疑的那样，零件在同一个地方，例如

```
1000 - 1999 Region codes
2000 - 2999 DeptCode
3000 - 3999 RoleCode 
```

因此：不，它不一定以 1 开头。

更大的 ERP 系统甚至有数字范围的配置部分！

**现在，从数据库的角度来看：**

是的，您的表应该始终有一个主键！拥有一个将极大地提高平均情况下的性能。（但在大多数数据库系统中，如果您不提供一个，则会由您看不到且无法处理的 DBMS 设置一个。有些 DBMS 甚至创建索引，但那是另一回事）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T11:15:29.833

我认为保存主键的起始编号或起始值无关紧要。
重要的是它们将在连接表的 FK 中以与 MAIN 表的 PK 中相同的值表示。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-19T12:15:09.970

代理键可以有任何值，只要它们是唯一的。毕竟，这就是使它成为“代理”的原因-值本身没有内在意义，通常甚至不应该向用户显示。话虽如此，您可以考虑使用不同的种子，仅用于测试目的，正如[Jon Skeet 建议](https://stackoverflow.com/a/11559524/533120)的那样。

话虽如此，您真的需要引入一个新的（代理）密钥吗？现有的自然键实际上可能导致**更少的**¹ JOINS，并且可能对[集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)有用。虽然代理键有[合法用途](https://stackoverflow.com/a/11230592/533120)，但不要仅仅因为它“时髦”而这样做 - 始终注意您正在做出的权衡并为您的具体需求选择合适的平衡点。

* * *

*¹它会自动向下“传播”外键，因此您无需将子表加入父表以获得自然键 - 自然键已经在子表中。*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-19T11:04:26.597

主键从什么 int 开始并不重要。假设代码没有定期更新，我不相信 int 会更快。它在很大程度上取决于它是 varchar 还是已知大小。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-19T11:05:46.407

我个人总是将字段名称“Id”作为表的主键，必要时定义为 int 或 bigInt。

如果表与枚举类型匹配，那么我确保 Id 与可以是任何数字的 EnumeratedType id 匹配 - 所以不，它不需要从 1 开始。

如果它与枚举类型不匹配，那么我通常会使用从 1 开始的自动递增键，但这并不总是需要。

注意 - 如果行数很少，那么索引数字和 varchar 之间的差异将可以忽略不计。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-19T11:11:41.607

是的，它从哪个整数开始并不重要，它的主要用途是唯一地定义行和其他表之间的关系。

# json - 对backbone.js 使用多个json 请求

> ID：11559457
> 
> 赞同：1
> 
> 时间：2012-07-19T11:02:28.257
> 
> 标签：json, api, rest, backbone.js, routes

我最近开始使用backbone.js，经过许多教程后，我终于开始摸索了。

我坚持的一件事是如何使用路由来允许列表提取不同的休息请求。

假设我的收藏中有以下内容

```
 var NewsCollection = Backbone.Collection.extend({  
          model : News,  
          url: 'http://api.example.com/index.php/news/all/format/json',  
        }); 
```

根据我的理解，如果我错了，请纠正我主干将从上述提要中提取的所有数据存储到扩展此集合的模型中，这一切都将起作用，我将拉入提要然后将其显示在视图中

这是我在路由中感到困惑的地方，我有以下内容。

```
var NewsRouter = Backbone.Router.extend({
            routes: {
                "": "defaultRoute",
                "news/:country_code":"updatedRoute"
            },

            defaultRoute: function () {
                console.log("defaultRoute");
                var movies = new NewsCollection()
                new NewsView({ collection: movies });
                movies.fetch();
                //setInterval(function(){movies.fetch({success: function(){}});}, 60000);
            },
            updatedRoute:function (country_code) {

                //confused
                    this.movie = this.movies.get(country_code);

            }

        }) 
```

我需要运行 updatedRoute 函数，它会显示基于国家代码猫的新闻列表，见下​​文。 [http://api.example.com/index.php/news/country/gb/format/json](http://api.example.com/index.php/news/country/gb/format/json)

单击列表项时如何更新整个提要，以便浏览器 url。

```
http://localhost:8888/backbonetut/#news/gb 
```

我的清单项目是。

```
<li><a href='#news/gb'>GB</a></li> 
```

我可以在 updateRoute 函数中使用

```
this.movie = this.movies.get(country_code); 
```

有人可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:34:08.380

您可以覆盖集合上的功能，也可以在路由器操作中`fetch`临时更改集合的功能。`url`

# iphone - 在 iPhone 模拟器中安装 PJSIP

> ID：11559458
> 
> 赞同：1
> 
> 时间：2012-07-19T11:02:31.107
> 
> 标签：iphone, pjsip

我正在尝试在 iPhone 模拟器上安装 pjsip，但我遇到了问题。我遵循了[http://trac.pjsip.org/repos/wiki/Getting-Started/iPhone](http://trac.pjsip.org/repos/wiki/Getting-Started/iPhone)中的教程，并执行了以下步骤：

```
pjproject-2.0.1 $ export DEVPATH=/Developer/Platforms/iPhoneSimulator.platform/Developer

pjproject-2.0.1 $ export CC=/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/gcc-4.0

pjproject-2.0.1 $ ./configure-iphone configure-iphone error: directory /Developer/Platforms 
```

/iPhoneSimulator.platform/Developer 不存在。请安装 iPhone 开发包

我在这里想念什么。有人可以给我一些关于如何继续解决此错误的线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:37:53.900

如果您使用的是最新的 SDK，则路径不正确，因为最新的 Xcode 和 iOS SDK 在 Xcode 应用程序文件夹中有 Developer 文件夹。( `/Applications/Xcode.app/Contents/`)

将您的导出更改为以下内容

```
export DEVPATH=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer
export CC=/Applications/Xcode.app/Contents/Developer/usr/bin 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:35:41.097

如果您按照上面的链接并尝试在 iPhone 模拟器上安装 pjsip，请跳过**构建 PJSIP**指令部分（$ cd /path/to/your/pjsip/dir$ ./configure-iphone$ make dep && make clean && make ) 直接转到**模拟器**构建指令希望它可以帮助你。如果您遇到任何问题，请尝试让我知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:28:46.447

[试试这个](https://stackoverflow.com/questions/11848333/just-info-how-to-build-and-compile-pjsip-for-xcode-using-sample-code-ipjsua-t)，我只是用我的 xcode 测试它。我也在设备上进行测试。有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T11:27:37.897

请检查以下链接。您将从那里获得源代码，并且可以为设备和模拟器构建。

[https://github.com/radif/SIPHON-SIP-Client-that-actually-compiles](https://github.com/radif/SIPHON-SIP-Client-that-actually-compiles)

# perl - Perl：为什么在打印时双引号会增加额外的空间？

> ID：11559459
> 
> 赞同：-2
> 
> 时间：2012-07-19T11:02:37.163
> 
> 标签：perl

我希望以下 2 个打印件是相同的。

```
@a=(a..z);
print "@a\n";
print @a; 
```

但实际上，它给了我这个：

```
a b c d e f g h i j k l m n o p q r s t u v w x y z
abcdefghijklmnopqrstuvwxyz 
```

为什么要多出空格？

我正在为 Windows 使用 ActivePerl。

### 更新

有了以下2个答案，我想出了这个：

```
use English;
$LIST_SEPARATOR="*";
@a=(a..z);
print "@a\n"; 
```

它给了我这个：

```
a*b*c*d*e*f*g*h*i*j*k*l*m*n*o*p*q*r*s*t*u*v*w*x*y*z 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T11:08:37.637

请参阅[perldoc perlvar](http://perldoc.perl.org/perlvar.html#$)

*   `$LIST_SEPARATOR`
*   `$"`

> 当数组或数组切片被插入双引号字符串或类似的上下文（如 ）时`/.../`，其元素由该值分隔。默认为空格。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-19T11:09:22.430

这记录在[perldata](http://perldoc.perl.org/perldata.html#Array-Interpolation)中：

> [通过将元素与$"](http://perldoc.perl.org/perlvar.html#%24%22)变量中指定的分隔符连接起来，数组和切片被插入到双引号字符串中（如果指定了“use [English](http://perldoc.perl.org/English.html) ;”，则为 $LIST_SEPARATOR ），默认为空格。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-19T13:17:17.163

因为 for 的默认值`$"`是一个空格，而 for 的默认值`$,`是一个空字符串。

[您可以在perlvar](http://perldoc.perl.org/perlvar.html)中阅读有关 Perl 的所有特殊变量的信息。

# java - 如何从 JSF 组件获取验证状态

> ID：11559460
> 
> 赞同：4
> 
> 时间：2012-07-19T11:02:47.727
> 
> 标签：java, validation, jsf, jsf-2

我想设置一个特殊的错误类来将 div 块放入我的 JSF 自定义组件中。如果此字段未通过验证，我想将 errorClass 设置为“错误”。

```
<c:if test="${?????}">
    <c:set var="errorClass" value="error" />    
</c:if>

<div class="input ${errorClass}">
    <label for="#{rich:clientId('input')}:input">#{cc.attrs.label}</label>
    <h:inputText id="input" value="#{cc.attrs.value}"
        <cc:insertChildren />
    </h:inputText>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T11:20:42.667

您可以`component.valid`在 inputText 的 style 或 styleClass 属性中使用：

```
<h:inputText value="#{cc.attrs.value}" 
             styleClass="#{component.valid ? '' : 'error'}" /> 
```

但是，这对您不起作用，`div`因为它不是 jsf 组件。您可以尝试组件绑定（从理论上，未经测试）：

```
<div class="#{myComponent.valid ? '' : 'error'}">
    <h:inputText id="input" value="#{cc.attrs.value}" binding="#{myComponent}">
        <cc:insertChildren />
    </h:inputText>
</div> 
```

# sql - SQL Server 2008 更新触发器 - 更新某些列方法

> ID：11559462
> 
> 赞同：1
> 
> 时间：2012-07-19T11:03:00.783
> 
> 标签：sql, sql-server-2008, triggers

`date_modified`我正在一个应该更新列的表上创建一个触发器。下面的代码是最好的方法吗？我这样做对吗？

```
IF EXISTS(SELECT * FROM DELETED) --checking if this is an update, not insert
BEGIN
IF NOT(UPDATE(date_modified)) -- checking if desired column was not updated
BEGIN
    DECLARE @updatedID int
    SELECT @updatedID = ID FROM deleted -- fetching updated record ID
    UPDATE table SET date_modified=GETDATE() WHERE ID=@updatedID -- updating desired column
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:15:25.413

您可以简单地使用它而不是声明变量

```
UPDATE table SET date_modified=GETDATE() WHERE ID in 
(SELECT ID FROM deleted) 
```

# java - EhCache 溢出到特定路径的磁盘

> ID：11559464
> 
> 赞同：9
> 
> 时间：2012-07-19T11:03:24.250
> 
> 标签：java, hibernate, ehcache

我在我的应用程序中使用带有休眠功能的 ehcache。这是ehcache.xml的配置

```
<ehcache>
    <diskStore path="java.io.tmpdir"/>        

    <defaultCache
            maxElementsInMemory="10"
            eternal="false"
            timeToIdleSeconds="120"
            timeToLiveSeconds="120"
            overflowToDisk="true"
            diskSpoolBufferSizeMB="300"
            maxElementsOnDisk="10000000"
            diskPersistent="false"
            diskExpiryThreadIntervalSeconds="120"
            memoryStoreEvictionPolicy="LRU"
            />
</ehcache> 
```

我的 diskStore 路径是 java.io.tmpdir，我想将其更改为我的应用程序路径**${WebApp}/DiskStore**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T11:17:01.793

存储位置由硬编码路径指定。

路径属性的合法值是合法的文件系统路径。

例如，对于 Unix：/home/application/cache

以下系统属性也是合法的，在这种情况下它们被翻译：

```
user.home - User's home directory
user.dir - User's current working directory
java.io.tmpdir - Default temp file path
ehcache.disk.store.dir - A system property 
```

可以在系统属性下方指定子目录，例如：

java.io.tmpdir/一个

在 Unix 系统上变成：

/tmp/一个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T14:42:23.923

也可以使用将在编译时替换的属性。因此，您需要正确配置您的 pom.xml，例如

```
<build>
    <filters>
        <filter>${user.home}/my.properties</filter>
    </filters>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
        </resource>
    </resources>
</build> 
```

（至少这是我们项目的工作环境）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-03T18:30:43.937

我最近尝试过 ehcache，想知道`java.io.tmpdir`它是什么以及它在我的机器上的位置。此页面中接受的答案没有解决我的问题。我查`/tmp`了一下，没有找到ehcache文件。

以下是我在网上找到的，希望对其他人有所帮助：

1.`env`在终端上运行命令。它打印操作系统环境。就我而言，它给了我：

`TMPDIR=/var/folders/1j/pb3h7_hl7890px72_f8mntd00000gn/T/`

2.或者，您可以从 python 控制台查询：

```
Python 3.5.1 (v3.5.1:37a07cee5969, Dec  5 2015, 21:12:44)
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import tempfile
>>> tempfile.gettempdir()
'/var/folders/1j/pb3h7_hl7890px72_f8mntd00000gn/T' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-30T10:26:55.410

干得好。

user.home -> 它是用户主目录 ei C:\Users\abc (windowdrive:\Users\username) user.dir -> C:\Users\abc\eclipse-workspace\project java.io.tmpdir -> C :\Users\abc\AppData\Local\Temp\ ehcache.disk.store.dir - 系统属性 ( [https://www.ehcache.org/documentation/3.7/](https://www.ehcache.org/documentation/3.7/) )

如需更多帮助，请随时通过电子邮件 uncer_sh@yahoo.com 进行交流

谢谢

# c# - 根据项目类中的日期值对 ObservableCollection 进行排序

> ID：11559466
> 
> 赞同：0
> 
> 时间：2012-07-19T11:03:33.530
> 
> 标签：c#, silverlight, sorting, observablecollection

这个问题可能看起来像[这样](https://stackoverflow.com/q/11191074/1196411)，但实现方式不同。我将该示例仅用于我的新实现

我在课堂上关注 ObservableCollection，我在 Windows phone 7 应用程序中使用该集合将数据绑定到我的列表框

```
public ObservableCollection<CustomClass> myList = new ObservableCollection<CustomClass>(); 
```

我尝试了以下方式，但排序不正确

**我的课**

```
public class CustomClass : IComparable<CustomClass>
{
 public string Id { get; set; }        
 public string Name { get; set; }        
 public string CreatedDate get{ get; set; }

 public int CompareTo(CustomClass  other)
    {
        var compareDate1 = DateTime.Parse(CreatedDate);
        var compareDate2 = DateTime.Parse(other.CreatedDate);
        return compareDate2.CompareTo(compareDate1);

    }
 } 
```

**子类**

```
public class ComparingObservableCollection<T> : ObservableCollection<T>
 where T : IComparable<T>
{

protected override void InsertItem(int index, T item)
{
    if (!Items.Contains<T>(item))
        {
            try
            {
                var bigger = Items.First<T>(F => F.CompareTo(item) > 0);
                index = Items.IndexOf(bigger);
            }
            catch
            {
                index = Items.Count;
            }
            finally
            {
                base.InsertItem(index, item);
            }
        }
  }
} 
```

问题不在于逻辑，而在于输入日期，我正在查询下一个 15 天 createddates 而不检查下面的代码是否有效，但需要处理 dec/jan 月份的日子

**更新** 我的自定义类

```
public class CustomClass : IComparable<CustomClass>
{
public string Id { get; set; }
public string Name { get; set; }
public DateTime Created { get; set; }

private string _CreatedDate;
public string CreatedDate
{
    private get
    {
        return _CreatedDate;
    }
    set
    {
        Created = DateTime.Parse(value);
        _CreatedDate = value;
    }
}

public CustomClass(string id, string name, string created)
{
    Id = id;
    Name = name;
    CreatedDate = created;
}

public int CompareTo(CustomClass other)
{
    return CreateDate.Date.DayOfYear.CompareTo(other.CreateDate.Date.DayOfYear);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:24:45.160

如果你想让这个类自己排序（CreatedDate）

```
public class CustomClass : IComparable<CustomClass>
{
    public string Id { get; set; }
    public string Name { get; set; }
    public DateTime Created { get; set; }

    private string _CreatedDate;
    public string CreatedDate
    {
        private get
        {
            return _CreatedDate;
        }
        set
        {
            Created = DateTime.Parse(value);
            _CreatedDate = value;
        }
    }

    public CustomClass(string id, string name, string created)
    {
        Id = id;
        Name = name;
        CreatedDate = created;
    }

    public int CompareTo(CustomClass other)
    {
        return Created.CompareTo(other.Created);
    }
}

public class ComparingObservableCollection<T> :  ObservableCollection<T> where T : IComparable<T>
{
    // this function presumes that list is allways sorted and index is not used at all
    protected override void InsertItem(int index, T item)
    {
        if (!Items.Contains<T>(item))
        {
            try
            {
                var bigger = Items.First<T>(F => F.CompareTo(item) > 0);
                index = Items.IndexOf(bigger);
            }
            catch 
            {
                index = Items.Count;
            }
            finally
            {
                base.InsertItem(index, item);
            }
        }
    }
} 
```

# c# - 为自动映射编写通用函数

> ID：11559469
> 
> 赞同：0
> 
> 时间：2012-07-19T11:03:39.153
> 
> 标签：c#, generics, automapper

我在一个基于 .NET MVC3 的项目的模块中有超过 8 页。我有一个控制器来处理所有页面。当我从视图中获取值时，我必须转换为本地模型来执行业务层中的逻辑。要从 转换模型`ViewModel`，我使用的是 Auto Mapper。是否有可能将 Auto Mapper 作为通用功能？

这是我正在使用的代码：

```
Mapper.CreateMap<WorkLoadRatioViewModel, WorkLoadRatio>();
WorkLoadRatio _workloaddata = Mapper.Map<WorkLoadRatioViewModel, WorkLoadRatio>(_vmodel);
Mapper.CreateMap<LeadTimeDayDetailsViewModel, LeadTimeDayDetails>();
LeadTimeDayDetails _leadtimedata = Mapper.Map<LeadTimeDayDetailsViewModel,LeadTimeDayDetails>(_vmodel); 
```

有没有办法把所有的代码都只是为了调用一个通用函数？例如，

```
public static TModel ToModel<TModel>(TModel model,TViewModel viewmodel) 
where TModel : class
{
    //mapper function to return the TModel OBject.
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T11:27:44.377

这是你想要做的：

```
public TDest Map<TSource, TDest>(TSource viewModel)
{
    Mapper.CreateMap<TSource, TDest>();
    TDest result = Mapper.Map<TSource, TDest>(viewModel);

    return result;
}

public ActionResult MyAction(WorkLoadRationViewModel viewModel)
{
    WorkLoadRatio model = Map<WorkLoadRationViewModel, WorkLoadRatio>(viewModel);
} 
```

# java - Logback - 过滤堆栈跟踪

> ID：11559477
> 
> 赞同：5
> 
> 时间：2012-07-19T11:04:01.197
> 
> 标签：java, stack-trace, logback

我正在使用 logback 进行日志记录，我发现过滤堆栈跟踪存在一些问题。我有一个这样的结构：

```
public class Main {
    static final Logger logger = (Logger) LoggerFactory.getLogger(Main.class);

    public static void main(String[] args) {
        logger.debug("Start");

        MyObject1 loggingElement = new MyObject1();
        loggingElement.logg();

        logger.debug("End");
    }
}

public class MyObject1 {

    public MyObject2 obj;
    static final Logger logger = (Logger) LoggerFactory.getLogger(MyObject1.class);

    public MyObject1() {
        obj = new MyObject2();
    }
    public void logg() {
        obj.loggError();
    }
}
public class MyObject2 {
    static final Logger logger = (Logger) LoggerFactory.getLogger(MyObject2.class);

    public void loggError() {
        logger.error("Error info", new Throwable("Error"));
    }
} 
```

和这样的配置xml：

```
<property name="mask" 
            value="MyObject2"/>

<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
        <pattern>%d{HH:mm:ss} | %level | %-4thread | %-21logger | %m%n
        </pattern>
    </encoder>
</appender>

<root level="${root.level:-TRACE}">
    <appender-ref ref="STDOUT" />
</root> 
```

当我运行 main 方法时，我得到如下输出：

```
12:29:35 | DEBUG | main | com.logging.Main      | Start
12:29:35 | ERROR | main | com.logging.MyObject2 | Error info
java.lang.Throwable: Error
    at com.logging.MyObject2.loggError(MyObject2.java:11) [bin/:na]
    at com.logging.MyObject1.logg(MyObject1.java:17) [bin/:na]
    at com.logging.Main.main(Main.java:14) [bin/:na]
12:29:35 | DEBUG | main | com.logging.Main      | End 
```

我想删除其中包含“MyObject1”的行，并保持其余的堆栈跟踪不变，就像在这个例子中一样：http: [//java.dzone.com/articles/filtering-stack-trace-hell](http://java.dzone.com/articles/filtering-stack-trace-hell)

我试图更改 logback 的配置

```
<pattern>%d{HH:mm:ss} | %level | %-4thread | %-21logger | %m%n%ex{full,${mask}}
</pattern> 
```

根本不起作用

```
<pattern>%d{HH:mm:ss} | %level | %-4thread | %-21logger | %m%n%eXe{full,${mask}}
            </pattern> 
```

删除整个堆栈跟踪（不是我的解决方案）

任何人都知道有什么可以帮助的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-24T15:38:06.873

从版本 1.1.3 开始，此功能已[包含在 Logback Classic 中](http://logback.qos.ch/news.html)。它似乎适用于 PatternLayout 的以下转换词：

*   [ex/异常/可抛出](http://logback.qos.ch/manual/layouts.html#ex)
*   [rEx / rootException](http://logback.qos.ch/manual/layouts.html#rootException)
*   [xEx / xException / xThrowable](http://logback.qos.ch/manual/layouts.html#xThrowable)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-04T17:18:14.693

在我的情况下，我使用了[`ThrowableConverter`](https://github.com/logstash/logstash-logback-encoder/blob/master/src/main/java/net/logstash/logback/stacktrace/ShortenedThrowableConverter.java)堆栈跟踪。

您可以将其添加到您的 logback.xml 中，您的 consoleAppender 位于您的编码器中：

```
 <appender name="consoleAppender" class="ch.qos.logback.core.ConsoleAppender">
        <encoder class="net.logstash.logback.encoder.LogstashEncoder">

            <!-- your other encoder configurations -->

            <stackTrace>
                <fieldName>stacktrace</fieldName>
                <throwableConverter class="net.logstash.logback.stacktrace.ShortenedThrowableConverter">
                    <pattern>[%thread] - %msg%n%stack{1,1024,10,rootFirst}</pattern>
                </throwableConverter>
            </stackTrace>

        </encoder>
    </appender> 
```

它将在堆栈跟踪中添加一个字段名称*“stack_trace”*。它为我完成了这项工作。

在堆栈内部，您有参数：

*   **maxDepthPerThrowable**：限制每个 throwable 的 stackTraceElements 数量
*   **maxLength**：限制跟踪字符的总长度。
*   **shortedClassNameLength**：基于类名的缩写`shortenedClassName`
*   **rootCauseFirst**：以“正常”顺序（root-cause-last）或 root-cause-first 输出

# jquery - ASP.NET 将 Jquery Datepicker 添加到 Gridview 文本框（在编辑 gridview 时）

> ID：11559480
> 
> 赞同：1
> 
> 时间：2012-07-19T11:04:16.443
> 
> 标签：jquery, asp.net, gridview, textbox

我的问题似乎有点难以理解，但很简单，我相信解决方案也很简单。

我有一个可以编辑和更新的 Gridview。我们都知道，当我们单击编辑时，如果列设置为 ReadOnly = "True"，则会出现一个默认的 Textbox 控件...

我可以通过单击Gridview的编辑按钮从动态创建的文本框返回值，这一切都很好......

我的问题是：我想将javascript代码添加到在gridview中单击编辑按钮时创建的动态文本框中。

这是单击文本框时 Datepicker 显示的 javascript 代码：

```
<head runat="server">

<link rel="Stylesheet" type="text/css" href="css/jquery.datepick.css" />
<script type="text/javascript" src="js/jquery.datepick.js"></script>

<script type="text/javascript" language="javascript">
    $(function () {    
        $('#Textbox_Name').datepick({ dateFormat: 'dd/mm/yyyy' });            
    });
</script>
</head> 
```

现在，而不是首先将文本框名称放在该代码上，我想知道动态创建的 gridview 编辑文本框的名称，然后在该文本框上显示日期选择器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:31:01.027

处理 RowCreated 事件：

```
protected void grid_RowCreated(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowState == DataControlRowState.Edit)
    {
        var textBox = e.Row.FindControl("myTextBox") as TextBox;
        ClientScript.RegisterStartupScript(this.GetType(), "datepick", 
        "$(function () { $('#" + textBox.ClientID + "').datepick({ dateFormat: 'dd/mm/yyyy' });  })", true);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:34:50.413

这里的简单方法是将 css 类名称添加到您的编辑器，然后将 datepick 应用于所有具有此类的编辑器

```
<script type="text/javascript" language="javascript">
    $(function () {
        $('.className').datepick({ dateFormat: 'dd/mm/yyyy' });
    });
</script> 
```

另请参阅此问题，该问题有解决方案，包括更新面板：[Asp.Net UpdatePanel in Gridview Jquery DatePicker](https://stackoverflow.com/questions/3341623/asp-net-updatepanel-in-gridview-jquery-datepicker/3341741#3341741)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T21:29:11.413

我让我的工作是这样的：

（RowDataBound 事件）

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
   TextBox tbOne = e.Row.FindControl("txtMyTextBox") as TextBox;
   if (tbOne != null)
   {
       string js = "$(function() { $('#" + tbOne.ClientID + "').datepicker();  });";
       ClientScript.RegisterStartupScript(this.GetType(), "DatePickJS_" + Guid.NewGuid().ToString("N"), js, true);
   }
} 
```

# c# - 相机变焦问题 Windows 8

> ID：11559484
> 
> 赞同：1
> 
> 时间：2012-07-19T11:04:26.620
> 
> 标签：c#, microsoft-metro

我正在尝试在相机应用程序中提供缩放功能，为此我正在使用 MediaCapture 类，MediaCapture 的所有其他功能都可以正常工作，除了缩放，我正在使用以下代码来实现缩放：

```
private void zoomSlider_ValueChanged(object sender, Windows.UI.Xaml.Controls.Primitives.RangeBaseValueChangedEventArgs e)
{
    m_mediaCaptureMgr.VideoDeviceController.Zoom.TrySetValue(zoomSlider.Value);
} 
```

但它不起作用请告诉我该怎么做？

**编辑：代码格式更正**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T06:02:34.680

你也可以像这样在 XAML 中缩放相机视图

```
<CaptureElement x:Name="previewElement1" Width="1366" Height="672">
                <CaptureElement.RenderTransform>
                    <ScaleTransform  x:Name="zoom"/>
                </CaptureElement.RenderTransform>
                </CaptureElement>

<Slider  Width="30" Height="300" Name="zoomSlider" ValueChanged="zoomSlider_ValueChanged_1" /> 
```

在 C# 中

```
private void zoomSlider_ValueChanged_1(object sender, Windows.UI.Xaml.Controls.Primitives.RangeBaseValueChangedEventArgs e)
{
    try
    {
        zoom.ScaleX = zoomSlider.Value;
        zoom.ScaleY = zoomSlider.Value;
        zoom.CenterX = 683;
        zoom.CenterY = 384;
    }
    catch (Exception)
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-30T21:09:29.170

`<ScaleTransform>`不修改相机的变焦。它只是放大图像，因此您会看到相同的图像更加像素化。

相机的变焦是由`ZoomControl`类控制的。它位于`MediaCapture`课堂内。

示例：`Slider`元素更改相机的缩放。

```
<CaptureElement x:Name="captureElement"
                Stretch="UniformToFill" />

<Slider x:Name="sliderZoom"
        Width="250"
        ValueChanged="sliderZoom_ValueChanged"/> 
```

的配置`Slider`：

```
MediaCapture _mediaCapture;

// Initialization of the MediaCapture ...

if(this._mediaCapture.VideoDeviceController.ZoomControl.Supported)
{
    sliderZoom.Minimum = this._mediaCapture.VideoDeviceController.ZoomControl.Min;
    sliderZoom.Maximum = this._mediaCapture.VideoDeviceController.ZoomControl.Max;
    sliderZoom.StepFrequency = this._mediaCapture.VideoDeviceController.ZoomControl.Step;
} 
```

`Slider`当改变其值时修改相机的缩放：

```
private void sliderZoom_ValueChanged(object sender, RangeBaseValueChangedEventArgs e)
{
    if(this._mediaCapture.VideoDeviceController.ZoomControl.Supported)
    {
        this._mediaCapture.VideoDeviceController.ZoomControl.Value = (float)e.NewValue;
    }
} 
```

如果`StepFrequency`不等于`ZoomControl.Step`尝试修改缩放时将显示此错误：

```
An exception of type 'System.ArgumentException' occurred in ....exe but was not handled in user code
WinRT information: Zoom factor
Additional information: The parameter is incorrect. 
```

# java - 如何使用 Hibernate 中的现有数据处理多对多关系

> ID：11559486
> 
> 赞同：0
> 
> 时间：2012-07-19T11:04:31.403
> 
> 标签：java, hibernate, many-to-many, hibernate-mapping

我有三个表，即个人信息、groups_designation、groups_design_category

*   个人信息：pid（个人ID）
*   groups_designation:gid(组 id)
*   groups_design_category:gid,pid

实际上我在两个表中都有数据（个人信息，组_设计）。所以我们提供了一个屏幕。在那，用户选择组并分配个人ID，并将数据拉入groups_design_category表中。在这种情况下，我映射为

```
Personal.hbm.xml:-

<set name="empwthgrp" inverse="true" lazy="true"  table="groups_desig_category">
 <key>
    <column name="pid" not-null="true" />
  </key>

            <many-to-many entity-name="com.aims.beans.DesignationGroupBean">
                <column name="gid" not-null="true" />
            </many-to-many>

</set> 
```

Personal.java:-

```
/**
 * 
 */
private static final long serialVersionUID = 1L;
private int pid,deptno;
private String name,designation;
private Address address;
private Address permentaddress;
private Set famildtlslst;
private Set empwthgrp=new HashSet();
public Set getEmpwthgrp() {
    return empwthgrp;
}
public void setEmpwthgrp(Set empwthgrp) {
    this.empwthgrp = empwthgrp;
}
public Set getFamildtlslst() {
    return famildtlslst;
}
public void setFamildtlslst(Set famildtlslst) {
    this.famildtlslst = famildtlslst;
}
public Address getPermentaddress() {

    return permentaddress;
}
public void setPermentaddress(Address permentaddress) {

    this.permentaddress = permentaddress;
}
public Address getAddress() {

    return address;
}
public void setAddress(Address address) {
    this.address = address;
}
public int getDeptno() {
    return deptno;
}
public void setDeptno(int deptno) {
    this.deptno = deptno;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public int getPid() {
    return pid;
}
public void setPid(int pid) {
    this.pid = pid;
}
public String getDesignation() {
    return designation;
}
public void setDesignation(String designation) {
    this.designation = designation;
} 
```

GroupingDesig.hbm.xml:-

```
<class name="beans.DesignationGroupBean" table="groups_designation" proxy=beans.DesignationGroupBean">

<id name="gid" column="gid" type="java.lang.Integer">
 <generator class="sequence"><param name="sequence">gid_seq</param> </generator>
</id>
<property name="gname"  type="java.lang.String" column="gname" not-null="true" />
<property name="description"  type="java.lang.String" column="description" not-null="true" />
<set name="grpwthemp" inverse="true" lazy="true" table="groups_desig_category">
 <key>
    <column name="gid" not-null="true" />
  </key>
             <many-to-many entity-name="com.aims.beans.Personal">
                <column name="pid" not-null="true" />
            </many-to-many>
</set>
</class> 
```

DesignationGroupBean.java:-

```
private int gid;
private String gname,description;
private Set grpwthemp=new HashSet();
public Set getGrpwthemp() {
    return grpwthemp;
}
public void setGrpwthemp(Set grpwthemp) {
    this.grpwthemp = grpwthemp;
}
public String getDescription() {
    return description;
}
public void setDescription(String description) {
    this.description = description;
}
public int getGid() {
    return gid;
}
public void setGid(int gid) {
    this.gid = gid;
}
public String getGname() {
    return gname;
}
public void setGname(String gname) {
    this.gname = gname;
} 
```

实际上我正在尝试 session.saveOrUpdate(pBean)。但它不起作用。可能可以更改一对多和多对一而不是多对多关系。我认为它不适合这种情况。所以，在这种情况下如何处理？如果您使用逆向工程，那么它会创建为一对多和多对一的关系？为什么？请帮帮我。

**更新：-**

我是在一对多和多对一关系休眠中实现的，而在数据库中它是多对多关系。然后它工作正常，下面粘贴了具有一对多关系的休眠映射文件

GroupingDesig.hbm.xml:-

```
<set name="grpwthemp" inverse="true" lazy="true" table="groups_desig_category">
 <key>
    <column name="gid" not-null="true" />
  </key>
                <one-to-many class="com.aims.beans.GroupAssignment"/>

           <!--  <many-to-many entity-name="com.aims.beans.Personal">
                <column name="pid" not-null="true" />
            </many-to-many>-->

</set> 
```

个人.hbm.xml

```
<set name="empwthgrp" inverse="true" lazy="true"  table="groups_desig_category">
 <key>
    <column name="pid" not-null="true" />
  </key>
    <one-to-many class="com.aims.beans.GroupAssignment"/>

            <!--
            <many-to-many entity-name="com.aims.beans.DesignationGroupBean">
                <column name="gid" not-null="true" />
            </many-to-many>-->

</set> 
```

AssigGroupingDesig.hbm.xml:-

```
<many-to-one name="personal" column="pid" class="com.aims.beans.Personal" not-null="true"></many-to-one>
<many-to-one name="desigdt" column="gid" class="com.aims.beans.DesignationGroupBean" not-null="true"></many-to-one> 
```

什么时候会出现关系船的图片？。我在网上搜索了多对多关系示例，即。

[Mykong 多对多](http://www.mkyong.com/hibernate/hibernate-many-to-many-relationship-example/)

请帮我。**我的问题是什么时候会实时出现/使用多对多关系？**

**更新 2：-**

谢谢。删除反向标签它工作正常。但我对删除查询的生成有疑问。请检查日志

```
 /* load com.beans.Personal */ select personal0_.pid as pid0_, personal0_.name as name5_0_, personal0_.DEPTNO as DEPTNO5_0_, personal0_.designation as designat4_5_0_, personal0_.pddress1 as pddress5_5_0_, personal0_.pddress2 as pddress6_5_0_, personal0_.pcity as pcity5_0_, personal0_.pstate as pstate5_0_, personal0_1_.HomeAddress1 as HomeAddr2_7_0_, personal0_1_.HomeAddress2 as HomeAddr3_7_0_, personal0_1_.homecity as homecity7_0_, personal0_1_.homestate as homestate7_0_ from personalinfo personal0_, address personal0_1_ where personal0_.pid=personal0_1_.pid and personal0_.pid=?

delete collection com.beans.Personal.empwthgrp */ delete from groups_desig_category where pid=?

insert collection row com.beans.Personal.empwthgrp */ insert into groups_desig_category (pid, gid) values (?, ?) 
```

为什么生成“从pid =的groups_desig_category中删除？”。请帮助我

更新 3：-

是的。我正在使用 session.get 加载数据。因为我对一些必填字段有异常。这就是我加载数据然后更新记录的原因

```
 per=(Personal)session.get(Personal.class,new Integer(pBean.getPid()));
    per.setEmpwthgrp(pBean.getEmpwthgrp());
    session.saveOrUpdate(per); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:11:07.620

在您的多对多映射中，您将它们**都**设置为**inverse**。您需要选择一个将**拥有**该关系的实体 - 对于该实体，您将在映射中删除该`inverse="true"`设置。这将是在保存或更新时将保持人员与组关系的实体。

由于在您发布的问题中`saveOrUpdate(pBean)`，并且我假设`pBean`是实体，`Personal`因此您需要删除`inverse="true"`.`Personal.hbm.xml`

参考文档中的更多信息：http: [//docs.jboss.org/hibernate/core/3.6/reference/en-US/html/associations.html#assoc-bidirectional-join-m2m](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/associations.html#assoc-bidirectional-join-m2m)

# ios - UIScrollView 围绕点缩放

> ID：11559487
> 
> 赞同：2
> 
> 时间：2012-07-19T11:04:32.423
> 
> 标签：ios, uiscrollview

我有一个 UIScrollView，当用户捏合时，我想围绕某个点进行缩放（不一定是内容中心，也不一定是捏合中心）。

解决此问题的最佳方法是什么？

我已经尝试过很多次变换等，但似乎从来没有做对。

我对各种解决方案持开放态度。

# windows-8 - 如何使用 javascript 在 Windows 8 Metro 应用程序中的不同 html 页面之间导航？

> ID：11559490
> 
> 赞同：2
> 
> 时间：2012-07-19T11:04:38.737
> 
> 标签：windows-8, microsoft-metro, windows-runtime

如何使用 javascript 在不同的 html 页面之间导航？我尝试使用以下语句，但它不起作用。我添加了一个断点，发现执行了下面的语句。但是它仍然没有显示`page2.html`.

`WinJS.Navigation.navigate("page2.html", null);`

谁能告诉我为什么在所有情况下它都不起作用？我发现的一个选项是 iframe，我还没有尝试过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:18:10.440

此 API 不是特定的页面导航器；它是关于加载由 WinJS 中的位置服务定义的位置：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh452768.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh452768.aspx)有关于使用该模型的细节的详细信息。

也就是说，如果您希望使用新页面的普通 Web 模型，无论是普通链接，还是将 window.location 设置为另一个页面，都会导致浏览器导航。

# java - spring data jpa中“向所有存储库添加自定义行为”的几个问题

> ID：11559491
> 
> 赞同：3
> 
> 时间：2012-07-19T11:04:40.253
> 
> 标签：java, repository, spring-data, spring-data-jpa

我使用 Spring data jpa，我正在尝试向所有存储库添加自定义行为，如下所述：http: [//static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#repositories.custom -所有存储库的行为](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#repositories.custom-behaviour-for-all-repositories)

我遇到了几个问题：

-首先，在**RepositoryMetadata**类中没有**getDomainClass**这样的方法，如 Spring 文档中所述（见下文）：

 **```
protected Object getTargetRepository(RepositoryMetadata metadata) {
      return new MyRepositoryImpl<T, I>((Class<T>) metadata.getDomainClass(), entityManager);
} 
```

我改用了以下方法：**getDomainType()**是这样吗？

-其次我的应用程序在tomcat启动时抛出异常。这是完整的堆栈跟踪：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'globalRepositoryImpl' defined in file [E:\users\jumartin\dev_sts\.metadata\.plugins\org.eclipse.wst.server.core\
tmp0\wtpwebapps\SuiviTRC\WEB-INF\classes\trc\suivi\repository\GlobalRepositoryImpl.class]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could
 not instantiate bean class [trc.suivi.repository.GlobalRepositoryImpl]: No default constructor found; nested exception is java.lang.NoSuchMethodException: trc.suivi.repository.GlobalRepositoryImpl.<i
nit>() 
```

这是我的自定义全局存储库代码：

```
public class GlobalRepositoryImpl<T, ID extends Serializable> extends SimpleJpaRepository<T, ID> implements GlobalRepository<T, ID> {

    private EntityManager em;

    public GlobalRepositoryImpl(Class<T> domainClass, EntityManager em) {
        super(domainClass, em);
        this.em = em;
    }

    public void sharedCustomMethod(ID id) {

    }

} 
```

这是我的xml配置：

```
<repositories base-package="trc.suivi.repository" factory-class="trc.suivi.repository.GlobalRepositoryFactoryBean">
        <repository id="pliRepository" />
        <repository id="globalRepository" />
    </repositories> 
```

我无法在网上找到任何其他样本。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T05:46:57.220

我已经做了一个完整的例子来说明如何向所有存储库添加自定义行为。 [http://borislam.blogspot.hk/2012/07/customizing-spring-data-jpa-repository.html](http://borislam.blogspot.hk/2012/07/customizing-spring-data-jpa-repository.html)

您可以将不同 JPA 实现的特性（例如 hibernate、openJPA）添加到您的基础存储库中。我对此做了另一个教程。 [http://borislam.blogspot.hk/2012/07/adding-hibernate-native-sql-features.html](http://borislam.blogspot.hk/2012/07/adding-hibernate-native-sql-features.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:11:48.503

我终于得到了一些帮助，并且能够通过在中间接口上使用 @NoRepositoryBean 注释来让我的存储库工作。

更多信息可在此处获得：http: [//forum.springsource.org/showthread.php?128536-Several-issues-with-quot-adding-custom-behaviour-to-all-repositories-quot-in-spring-data- jpa](http://forum.springsource.org/showthread.php?128536-Several-issues-with-quot-adding-custom-behaviour-to-all-repositories-quot-in-spring-data-jpa)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-03T07:05:22.133

从 Spring Data JPA 1.9.M1 开始，向 Spring Data 管理的所有存储库添加自定义方法变得更加容易。[这个](https://github.com/spring-projects/spring-data-examples/tree/master/jpa/example/src/main/java/example/springdata/jpa/customall)例子有所有的细节。

在您的情况下，示例如下所示：

1) 配置

```
@Configuration
@EnableAutoConfiguration
@EnableJpaRepositories(repositoryBaseClass = GlobalRepositoryImpl.class)
class CustomRepositoryConfig {} 
```

2）自定义基础存储库：

```
public class GlobalRepositoryImpl<T, ID extends Serializable> extends SimpleJpaRepository<T, ID> implements GlobalRepository<ID> {

    public GlobalRepositoryImpl(JpaEntityInformation<T, ?> entityInformation, EntityManager entityManager) {
        super(entityInformation, entityManager);
    }

    @Override
    public void sharedCustomMethod(ID id) {

    }
} 
```

3）一些存储库：

```
public interface SomeRepository extends GlobalRepository<User, Long> {} 
```

当然`GlobalRepository`还需要注释`@NoRepositoryBean`**

# javascript - 如何上传图片并在浏览器中查看？

> ID：11559495
> 
> 赞同：-3
> 
> 时间：2012-07-19T11:04:49.170
> 
> 标签：javascript, html, file-upload, filereader

有什么方法可以从 PC 上传图像文件并在浏览器中预览。它应该是跨浏览器兼容的。Filereader 是一种方法，但是在 chrome 中本地执行功能存在问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:07:12.850

您可以使用 FormData 通过 ajax 将图像发送到服务器，取回图像的源并在 ajax 调用返回时将图像元素添加到具有该源的文档中。

FormData 文档 - [https://developer.mozilla.org/en/XMLHttpRequest/FormData](https://developer.mozilla.org/en/XMLHttpRequest/FormData)

# jquery - 在单个页面中使用多个 Highcharts

> ID：11559497
> 
> 赞同：2
> 
> 时间：2012-07-19T11:04:55.067
> 
> 标签：jquery, ajax, highcharts

我正在使用 Highcharts，我想将多个图表添加到单个页面

下面是我的js代码

```
<script type="text/javascript">
$(function () {
    var chart;
    $(document).ready(function() {

        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false
            },
            title: {
                text: 'Visual Data'
            },
            tooltip: {
                formatter: function() {
                    return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';
                }
            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: true,
                        color: '#000000',
                        connectorColor: '#000000',
                        formatter: function() {
                            return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';
                        }
                    }
                }
            },

            series: [{

                type: 'pie', 
                name: 'Market Share',
                data: [
                    ['Plan 1',       <?php echo $1; ?>],
                    ['Plan 2',    <?php echo $2; ?>],
                    ['Plan 3',     <?php echo $3; ?>]

                ]
            }]
        });
    });

});
        </script> 
```

我可以简单地重复代码并更改代码 renderTo: 'container' 以显示其他图表，但代码重复了很多次。

有没有更好的方法可以重用代码，以便将数据传递给

```
 series: []

title: {
                text: 'Visual Data'
            }, 
```

显示多个图表。目前我想在一个页面中显示 5 个图表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T11:29:01.477

您可以使用`Highcharts.setOptions`为页面上的所有图表定义相同的选项。以下是示例代码：

```
Highcharts.setOptions({
        global: {
            //Highchart uses UTC time by default
            useUTC: false
        },
        legend: {
            enabled: false
        },
        credits: {
            enabled: false
        },
        xAxis: {
            type: 'datetime',
            tickColor: '#96AA8C',
            labels: {
                style: {
                    color: '#555F50'
                }
            },
            tickPixelInterval: 70,
            maxZoom: 20 * 1000
        },
        title: {
            style: {
                color: '#343434'
            }
        },
        tooltip: {
            xDateFormat: '%d/%m/%Y %H:%M:%S'               

        }
    }); 
```

您可以通过这种方式定义所有属性（不确定“全部”）。

# c# - 存储库模式 IRepository 在 IServiceRepository 内部

> ID：11559499
> 
> 赞同：3
> 
> 时间：2012-07-19T11:04:57.990
> 
> 标签：c#, model-view-controller, dependency-injection, repository, repository-pattern

我已经实现了存储库模式，并且效果很好。

```
public interface IServiceRepository
{
    User GetUser(int id);
    User GetUser(string email);
    User GetUser(string email, byte[] password);
    //SkipCode
}

//Service repository where I keep extended methods for database manipulation
public class ServiceRepository : IServiceRepository
{
    private readonly IRepository<User> _userRepository;
    private readonly IRepository<Order> _orderRepository;
    private readonly IUnitOfWork _unitOfWork;

    public ServiceRepository(IRepository<User> userRepository, IRepository<Order> orderRepository, IUnitOfWork unitOfWork)
    {
    }

    //SkipImplementation        
} 
```

当我想从`IServiceRepository`Controller 中访问某些方法时，我会这样做

```
public class AccountController : Controller
{
    private readonly IRepository<OrderDetail> _orderDetailRepository;
    private readonly IRepository<UserDetail> _userDetailRepository;
    private readonly IServiceRepository _serviceRepository;

    public AccountController(IRepository<OrderDetail> orderDetailRepository, IRepository<UserDetail> userDetailRepository, IServiceRepository serviceRepository)
    {
        _orderDetailRepository = orderDetailRepository;
        _userDetailRepository = userDetailRepository;
        _serviceRepository = serviceRepository;
    }
} 
```

如您所见，我在这种情况下注入`IRepositories`和。`IServiceRepository`有时我只注射`IRepositories`或`IServiceRepository`根据需要注射。

问题是也许我应该全部`IRepositories`搬进`IServiceRepository`. 并且在所有控制器中仅嵌入`IServiceRepository`和访问？这个实现对我来说看起来更清楚，因为只会注入控制器。但是要访问例如一个from将需要在 中构建和注入所有其他存储库，因此它可能会减慢整个应用程序的速度。你怎么看？`IRepositories``IServiceRepository``IServiceRepository``Repositorie<User>``ServiceRepository``ServiceRepository`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:34:08.927

我的回答是有争议的，所以请多多包涵:)

 **构建和注入存储库*几乎不需要任何***时间**。我假设您的存储库在创建时不会打开任何连接，所以不要为微优化而烦恼，让它工作:)**

 **你可以合并你的接口，只要结果接口很小（比如不超过 10 个左右的方法），有重点并且有明确的目的。

* * *

**旁注**
：存储库模式需要什么？您是否允许（或在最近的未来计划中）在数据库之间轻松切换？在大多数情况下，存储库是一个巨大的过度杀伤和维护问题。

考虑这段代码

```
public interface IServiceRepository
{
    User GetUser(int id);
    User GetUser(string email);
    User GetUser(string email, byte[] password);
    //SkipCode
} 
```

它告诉我什么？嗯，从通用名称我无法理解这个接口的作用，它就像一个服务的服务，抽象之上的抽象。但是从方法定义中我看到它对 s 做了一些事情`User`。

为什么要明确使用`IUnitOfWork`？您使用的数据提供者还没有实现它吗？

而不是所有这些*架构*（当然如果可能的话），直接使用 ORM，这很容易做和维护，可靠和快速。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:37:36.540

您的 ServiceRepository 似乎更接近[服务层](http://martinfowler.com/eaaCatalog/serviceLayer.html)中的域服务，而不是它自己的存储库。

域服务通常协调与各种数据存储库的一系列交互，例如从客户存储库加载客户和从订单存储库加载订单列表，以呈现客户及其所有订单的统一视图。因此，域服务用于围绕应用程序创建操作边界——抽象各种数据访问序列。

这是一个很好的方法，但我认为你遇到的问题是你还没有走得足够远。如果您决定将应用程序的操作封装到一系列域服务中，那么控制器将不需要访问存储库。另一方面，如果您决定控制器将采用该存储库并自己访问存储库，那么您的 ServiceRepository 类和其他类似的类基本上成为实用程序类。

我看到您有两个选择 - 将您的服务层改进到控制器不再需要存储库的程度：

```
public class AccountController
{
    public AccountController(IAccountsService service)
    {
        _service = service;
    }

    public void SomeActionMethod(Foo someParams)
    {
        _service.SomeAction(someParams);
    }
} 
```

或者调用 ServiceRepository 它是一个快捷实用程序，用于执行固定的数据访问序列......

```
public class AccountController
{
    public AccountController(ICustomerRepository customerRepo, IOrderRepository orderRep)
    {
        _customerRepo = customerRepo;
        _orderRepo = orderRepo;
    }

    public void SomeActionMethod(Foo someParams)
    {
        var utility = new CustomerOrderBuilderUtility(_customerRepo, _orderRepo);

        var customerWithOrders = utility.GetCustomerAndOrders(someParams.CustomerId);

        // some domain logic...
    }
} 
```**

# java - 为什么从 MySQL 数据库中存储和检索的时间戳看起来从 System.currentTimeMillis “转移”？

> ID：11559511
> 
> 赞同：0
> 
> 时间：2012-07-19T11:05:45.550
> 
> 标签：java, mysql, linux, datetime, timestamp

当我`currentTimeInMillis`从数据库中取出时间戳并减去它时，我得到的值不正确。查看日志后，这些值似乎在 197 907 ms / 60 000 = 119.965117 分钟左右发生了一些变化。看起来像“两个小时的问题”。

MySQL 使用 SYSTEM 时区：

```
mysql> SELECT @@global.time_zone, @@session.time_zone;
+--------------------+---------------------+
| @@global.time_zone | @@session.time_zone |
+--------------------+---------------------+
| SYSTEM             | SYSTEM              |
+--------------------+---------------------+ 
```

并且 JVM 没有参数指定时区（因此它应该拾取系统时区）。

网络服务器和数据库服务器是同一台机器。

这个问题只能在使用 Virtuozzo 的生产服务器上重现（根本不重要），而不是在我的本地主机上，它可以在使用 Java6 和 Java7 的生产服务器上重现。

使用 JDBC 将日期插入数据库中：

```
cityItemInsertStmt.setDate(3, new Date(System.currentTimeMillis()); 
```

并使用普通 JDBC 阅读：

```
cityItemEntry.setVoteDate(rs.getDate("vote_date")); 
```

有关系统的更多信息：

```
Ubuntu 10.04.4 LTS
2.6.18-028stab099.3 #1 SMP 3 月 7 日星期三 15:20:22 MSK 2012 x86_64 GNU/Linux
jdk1.6.0_33 (x64) 取自 Oracle 网站并手动安装

```

glassfish的参数

```
/usr/lib/jvm/jdk1.6.0_33/bin/java -cp /home/glassfish/glassfish/modules/glassfish.jar -XX:+UnlockDiagnosticVMOptions -XX:PermSize=64m -XX:MaxPermSize=192m -XX:NewRatio =2 -Xmx2048m -Xms1024m -server -javaagent:/home/glassfish/glassfish/lib/monitor/flashlight-agent.jar -Dfelix.fileinstall.disableConfigSave=false -Dproduct.name -Djavax.net.ssl.keyStore=/home /glassfish/glassfish/domains/domain1/config/keystore.jks -Djava.awt.headless=true -Dfelix.fileinstall.poll=5000 -Djava.endorsed.dirs=/home/glassfish/glassfish/modules/endorsed:/home /glassfish/glassfish/lib/endorsed -Dfelix.fileinstall.bundles.startTransient=true -Djavax.net.ssl.trustStore=/home/glassfish/glassfish/domains/domain1/config/cacerts.jks -Dcom.sun.enterprise。 security.httpsOutboundKeyAlias=s1as -DANTLR_USE_DIRECT_CLASS_LOADING=true -Djava.security.auth.login。config=/home/glassfish/glassfish/domains/domain1/config/login.conf -Dgosh.args=--nointeractive -Dosgi.shell.telnet.maxconn=1 -Djdbc.drivers=org.apache.derby.jdbc.ClientDriver -Dfelix.fileinstall.dir=/home/glassfish/glassfish/modules/autostart/ -Dosgi.shell.telnet.port=6666 -Djava.security.policy=/home/glassfish/glassfish/domains/domain1/config/server。策略 -Dfelix.fileinstall.log.level=2 -Dcom.sun.enterprise.config.config_environment_factory_class=com.sun.enterprise.config.serverbeans.AppserverConfigEnvironmentFactory -Dosgi.shell.telnet.ip=127.0.0.1 -Dcom.sun。 aas.instanceRoot=/home/glassfish/glassfish/domains/domain1 -Dcom.sun.aas.installRoot=/home/glassfish/glassfish -Djava.ext.dirs=/usr/lib/jvm/jdk1.6.0_33/lib/ ext:/usr/lib/jvm/jdk1.6.0_33/jre/lib/ext:/home/glassfish/glassfish/domains/domain1/lib/ext -Dfelix.fileinstall.bundles.new。start=true -Djava.library.path=/home/glassfish/glassfish/lib:/usr/lib/jvm/jdk1.6.0_33/jre/lib/amd64/server:/usr/lib/jvm/jdk1.6.0_33 /jre/lib/amd64:/usr/lib/jvm/jdk1.6.0_33/lib/amd64:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib com .sun.enterprise.glassfish.bootstrap.ASMain -domainname domain1 -asadmin-args --host,,,localhost,,,--port,,,4848,,,--secure=false,,,--terse=false ,,,--echo=false,,,--interactive=false,,,start-domain,,,--verbose=false,,,--debug=false,,,--domaindir,,,/home/ glassfish/glassfish/domains,,,domain1 -instancename server -verbose false -debug false -asadmin-classpath /home/glassfish/glassfish/modules/admin-cli.jar -asadmin-classname com.sun.enterprise.admin.cli。 AsadminMain -upgrade false -type DAS -domaindir /home/glassfish/glassfish/domains/domain1 -read-stdin true/usr/lib/jvm/jdk1.6.0_33/jre/lib/amd64/server:/usr/lib/jvm/jdk1.6.0_33/jre/lib/amd64:/usr/lib/jvm/jdk1.6.0_33/ lib/amd64:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib com.sun.enterprise.glassfish.bootstrap.ASMain -domainname domain1 -asadmin-args --主机,,,localhost,,,--port,,,4848,,,--secure=false,,,--terse=false,,,--echo=false,,,--interactive=false,,, start-domain,,,--verbose=false,,,--debug=false,,,--domaindir,,,/home/glassfish/glassfish/domains,,,domain1 -instancename server -verbose false -debug false - asadmin-classpath /home/glassfish/glassfish/modules/admin-cli.jar -asadmin-classname com.sun.enterprise.admin.cli.AsadminMain -upgrade false -type DAS -domaindir /home/glassfish/glassfish/domains/domain1 -read-stdin 为真/usr/lib/jvm/jdk1.6.0_33/jre/lib/amd64/server:/usr/lib/jvm/jdk1.6.0_33/jre/lib/amd64:/usr/lib/jvm/jdk1.6.0_33/ lib/amd64:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib com.sun.enterprise.glassfish.bootstrap.ASMain -domainname domain1 -asadmin-args --主机,,,localhost,,,--port,,,4848,,,--secure=false,,,--terse=false,,,--echo=false,,,--interactive=false,,, start-domain,,,--verbose=false,,,--debug=false,,,--domaindir,,,/home/glassfish/glassfish/domains,,,domain1 -instancename server -verbose false -debug false - asadmin-classpath /home/glassfish/glassfish/modules/admin-cli.jar -asadmin-classname com.sun.enterprise.admin.cli.AsadminMain -upgrade false -type DAS -domaindir /home/glassfish/glassfish/domains/domain1 -read-stdin 为真0_33/lib/amd64:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib com.sun.enterprise.glassfish.bootstrap.ASMain -domainname domain1 -asadmin-args --host,,,localhost,,,--port,,,4848,,,--secure=false,,,--terse=false,,,--echo=false,,,--interactive=false, ,,start-domain,,,--verbose=false,,,--debug=false,,,--domaindir,,,/home/glassfish/glassfish/domains,,,domain1 -instancename server -verbose false -debug false -asadmin-classpath /home/glassfish/glassfish/modules/admin-cli.jar -asadmin-classname com.sun.enterprise.admin.cli.AsadminMain -upgrade false -type DAS -domaindir /home/glassfish/glassfish/domains /domain1 -read-stdin true0_33/lib/amd64:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib com.sun.enterprise.glassfish.bootstrap.ASMain -domainname domain1 -asadmin-args --host,,,localhost,,,--port,,,4848,,,--secure=false,,,--terse=false,,,--echo=false,,,--interactive=false, ,,start-domain,,,--verbose=false,,,--debug=false,,,--domaindir,,,/home/glassfish/glassfish/domains,,,domain1 -instancename server -verbose false -debug false -asadmin-classpath /home/glassfish/glassfish/modules/admin-cli.jar -asadmin-classname com.sun.enterprise.admin.cli.AsadminMain -upgrade false -type DAS -domaindir /home/glassfish/glassfish/domains /domain1 -read-stdin true--echo=false,,,--interactive=false,,,start-domain,,,--verbose=false,,,--debug=false,,,--domaindir,,,/home/glassfish/glassfish /domains,,,domain1 -instancename server -verbose false -debug false -asadmin-classpath /home/glassfish/glassfish/modules/admin-cli.jar -asadmin-classname com.sun.enterprise.admin.cli.AsadminMain -upgrade假 -type DAS -domaindir /home/glassfish/glassfish/domains/domain1 -read-stdin true--echo=false,,,--interactive=false,,,start-domain,,,--verbose=false,,,--debug=false,,,--domaindir,,,/home/glassfish/glassfish /domains,,,domain1 -instancename server -verbose false -debug false -asadmin-classpath /home/glassfish/glassfish/modules/admin-cli.jar -asadmin-classname com.sun.enterprise.admin.cli.AsadminMain -upgrade假 -type DAS -domaindir /home/glassfish/glassfish/domains/domain1 -read-stdin true

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:14:23.390

这与时区有关吗？我怀疑您的数据库位于不同的时区，而您的客户端/服务器位于不同的时区。我认为通常的偏好是将数据库保持在 GMT 时区。

尝试查找有关时区问题的更多信息，您可能会找到一些答案。

# javascript - jQuery live() 已弃用：将 on 用于 mouseenter 和 mouseout？

> ID：11559512
> 
> 赞同：2
> 
> 时间：2012-07-19T11:05:59.780
> 
> 标签：javascript, events, deprecated, jquery

我想知道如何用 jQuery 重写以下监听器`on()`

```
$('.box').live({
        mouseenter:
        function() {
            $(this).children('.menu').stop(true, true).fadeIn(fadeIn);
        },
        mouseleave:
        function() {
            $(this).children('.menu').stop(true, true).fadeOut(fadeOut);
        }
    }); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T11:07:24.190

```
$(document).on('hover', '.box', function(e) {
  if( e.type == 'mouseenter') {
    $(this).children('.menu').stop(true, true).fadeIn(fadeIn);
  } else {
    $(this).children('.menu').stop(true, true).fadeOut(fadeOut);
  }
}); 
```

而不是使用任何不是动态`document`的父元素会更好。`.box`

阅读有关**[`.on()`](http://api.jquery.com/on)**.

`.on()`委托事件（又名现场事件）的语法是：

```
$( StaticParent ).on( eventName, target, handlerFunction ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T11:12:38.190

对于**完全** `.on`等效：

```
$(document).on({
    mouseenter: function() {
        $(this).children('.menu').stop(true, true).fadeIn(fadeIn);
    },
    mouseleave: function() {
        $(this).children('.menu').stop(true, true).fadeOut(fadeOut);
    }
}, '.box'); 
```

虽然这里的主要好处是您不需要使用`document`，但您可以只使用保证在页面生命周期内存在的最接近的父级。

# iphone - 如何在 iPhone Core Data 中添加索引属性

> ID：11559515
> 
> 赞同：0
> 
> 时间：2012-07-19T11:06:10.867
> 
> 标签：iphone, sqlite, core-data

我有一个大数据要使用 Core Data 存储到 sqlite 存储中的三个表中。它在删除和插入上运行缓慢。我想添加索引以提高性能，但我不知道该怎么做。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T17:39:00.087

**您可以通过Detail Pane的****General 选项卡**为字段设置索引。**选择要添加索引的属性--->转到详细信息窗格的常规选项卡--->选中索引**属性附近的复选框。

 ****![属性详细信息窗格](../Images/d363e03eea23e59553ab83d844808809.png)****

# iphone - 在 iOS 中使用 HTTPS 和多个 NSURLProtectionSpace

> ID：11559516
> 
> 赞同：1
> 
> 时间：2012-07-19T11:06:11.217
> 
> 标签：iphone, ios, ipad, https, nsurl

我正在创建一个 iOS 应用程序，它要求用户在启动时登录，然后在会话过程中使用这些凭据在服务器上查询 4-5 个不同的服务。

它自己的服务器（xyz）不接受凭据，但如果查询它提供的服务，那么它们就会被接受。例如`https://xyz/service1`有效，`https://xyz`无效。

现在我想知道的是，是否有什么阻碍`NSURLProtectionSpace`在登录时创建 4-5 的方式，为服务器上的每个服务一个，然后在使用每个服务时使用相应的保护空间？或者有没有更好的方法来实现在这种情况下可以工作的东西？

所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:06:47.260

事实证明，创建多个`NSURLProtectionSpace`'s 的方式没有任何障碍，因为每个 's 都是为单独的 url 创建的。

# c# - 如何跟踪一组控件中任何控件的编辑

> ID：11559517
> 
> 赞同：1
> 
> 时间：2012-07-19T11:06:13.757
> 
> 标签：c#, user-controls, event-handling

我的程序旨在更改和保存用户设置。该程序由许多用户控件组成。当应用程序产生至少一个未保存的更改时，我需要在关闭应用程序之前向用户显示消息以保存设置。控件太多，为每个控件定义一个事件效率低下。我不确定这只是解决我的问题的一种方法。任何建议请..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:21:53.917

可能这对某人有用：

```
public partial class Form1 : Form
{
    public bool EditedFlag=false;

    private void Changed(object sender, EventArgs e)
    {
        EditedFlag=true;
    }

    public Form1()
    {
        InitializeComponent();            
        foreach (Control ctrl in this.Controls)
        {
            ControlEvents(ctrl);
        }
    }

    public void ControlEvents<T>(T sender)
    {            
        if (sender is TextBox) 
        {
            var obj = sender as TextBox;
            obj.TextChanged+= new EventHandler(Changed);
        }
        if (sender is CheckBox)
        {
            var obj = sender as CheckBox;
            obj.CheckedChanged += new EventHandler(Changed);
        }
        if (sender is ComboBox)
        {
            var obj = sender as ComboBox;
            obj.SelectedIndexChanged += new EventHandler(Changed);
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:49:34.493

实际上没有任何选项可以满足您的要求。如果您的控件绑定到一个对象，您可以使用该对象来查看它是否有任何更改，假设该对象实现了 INotifyPropertyChanged。

另一种方法是以编程方式将处理程序（用于“更改”事件，例如`TextChanged`TextBox）添加到映射到设置标志的单个子的每个控件。

# ios - 在 iPhone sdk 中从 LinkedIn 获取用户个人资料数据

> ID：11559518
> 
> 赞同：4
> 
> 时间：2012-07-19T11:06:14.227
> 
> 标签：ios, xcode, linkedin

使用 IOS，我正在尝试将 LinkedIn 集成到应用程序中。集成也在工作，用户登录也在工作，但我无法获取用户个人资料的数据，其中包含教育、技能等所有用户记录。成功登录后，我只能获得这四个值。-first-name -site-standard-profile-request -last-name -headline

任何人都可以请得到所有的价值，而不是这些。提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-27T06:26:22.073

问题是在登录后从 LinkedIn 获取个人资料数据。演示应用程序来自[https://github.com/ResultsDirect/LinkedIn-iPhone](https://github.com/ResultsDirect/LinkedIn-iPhone)

我们必须在“-(RDLinkedInConnectionID *)profileForCurrentUser”这个函数中做一些改变。该函数位于LinkedInClientLibrary -> Classes -> RDLinkedInEngine 这个位置。

我们只需更改以下 url 即可获取数据。

```
NSURL* url = [NSURL URLWithString:[kAPIBaseURL stringByAppendingString:@"/v1/people/~/
"]]; 
```

要获取用户配置文件数据，只需将 url 更改为：

```
NSURL* url = [NSURL URLWithString:[kAPIBaseURL stringByAppendingString:@"/v1/people/~:(id,first-name,last-name,maiden-name,formatted-name,phonetic-last-name,location:(country:(code)),industry,distance,current-status,current-share,network,skills,phone-numbers,date-of-birth,main-address,positions:(title),educations:(school-name,field-of-study,start-date,end-date,degree,activities))"]]; 
```

从这个 url 我们可以得到配置文件用户的数据。

要从用户配置文件中获取更多字段，请参阅以下链接：

[https://developer.linkedin.com/documents/field-selectors](https://developer.linkedin.com/documents/field-selectors) [https://developer.linkedin.com/documents/profile-fields](https://developer.linkedin.com/documents/profile-fields)

要根据字段获取数据，我们必须提及该字段的父字段和所需字段。这在[https://developer.linkedin.com/documents/profile-fields](https://developer.linkedin.com/documents/profile-fields)这个链接中列出。

如果我们想要来自教育的数据，那么我们必须提到

```
educations:(school-name,field-of-study,start-date,end-date,degree,activities) 
```

教育将是父母，括号（）中的其他数据是我们可以从个人资料中获得的字段。

希望这也对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-06T07:44:30.767

Micro给出的上述解释是正确的，适当的

要从 LinkedIn 获取电子邮件 ID，只需更改 url

```
 NSURL *url = [NSURL URLWithString:@"http://api.linkedin.com/v1/people/~:(id,first-name,last-name,maiden-name,email-address,formatted-name,phonetic-last-name,location:(country:(code)),industry,distance,current-status,current-share,network,skills,phone-numbers,date-of-birth,main-address,positions:(title),educations:(school-name,field-of-study,start-date,end-date,degree,activities))"]; 
```

你会收到电子邮件

或者您需要更多帮助，您可以关注堆栈溢出链接 [无法获取链接的连接 EMAIL ID](https://stackoverflow.com/questions/17630267/not-able-to-fetch-linked-connections-email-id/19806450#19806450)

# javascript - 如何从 Node.js 中的异步循环返回

> ID：11559523
> 
> 赞同：1
> 
> 时间：2012-07-19T11:06:25.007
> 
> 标签：javascript, node.js, asynchronous, node-async

当使用[异步](https://github.com/caolan/async/)库进行流控制时，特别是 async.forEach 在需要跳过特定项目时如何正确执行回调。

例子：

```
async.forEach(bigCollection, function(item, callback) {

    if(skipThis) {
        return callback();
        // OR BELLOW IS BETTER??
        //return process.nextTick(callback);
    }

    db.query(query, callback);

}, callback); 
```

如果我不使用`process.nextTick(callback)`，如果 bigCollection 太大，我是否会面临堆栈溢出的风险？如果我确实使用了`process.nextTick(callback)`我会破坏我的代码吗？

我已经养成了这样做的习惯`process.nextTick(callback)`，但是我不确定这样做是否是一个好习惯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:20:25.923

我会说没有 nextTick 没关系。

```
async.forEach(bigCollection, function(item, callback) {
    if(skipThis) {
        return callback();
    }
    db.query(query, callback);
}, callback); 
```

如果 bigCollection 太大，那么在进入循环之前就会溢出。

# php - 从 PHP 中的对象获取数组值

> ID：11559527
> 
> 赞同：0
> 
> 时间：2012-07-19T11:06:35.843
> 
> 标签：php, arrays, function

我正在尝试从数组对象中获取 ['text'] 值。
当我尝试 print_r($item) 时，我得到这个作为输出：

```
ToDo Object
(
[data:private] => Array
    (
        [id] => 128
        [user_id] => 6785
        [view_stat] => 0
        [position] => 12
        [text] => 3rd try
        [dt_added] => 2012-07-17 04:29:08
        [tick] => 0
        [temp_view] => 6785
        [viewer] => 6785
    )
) 
```

如何在php中获取[文本]值？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T11:07:44.890

因为这些是私有变量，所以你不能！

您需要在类中创建一个公共函数，它将返回所需的特定数据：

```
public function getText () {
  return $this -> text;
} 
```

在课堂之外，您可以像这样检索它：

```
$class = new ToDo();
$myText = $class -> getText(); 
```

# c# - 使用数据注释进行客户端验证

> ID：11559529
> 
> 赞同：0
> 
> 时间：2012-07-19T11:06:42.473
> 
> 标签：c#, asp.net, jquery, data-annotations

我在将客户端验证与数据注释结合使用时遇到问题。该项目使用 ASP.NET Framework 4.5，这是一个具有 MVP 模式的 Web 应用程序和 jQuery Ajax 调用来动态加载用户控件。

这是（剥离的）用户控件，其中包含需要验证的输入元素：

```
<form id="insertArtist" class="form-horizontal">
<fieldset>
<legend>Add new artist</legend>
    <div class="control-group">
        <label class="control-label" for="name">Name</label>
        <div class="controls">
            <asp:TextBox runat="server" ID="name" ClientIDMode="Static" CssClass="input-medium"></asp:TextBox>
            <ml:DataAnnotationValidator runat="server" ID="davName" ControlToValidate="name" EnableClientScript="true" PropertyToValidate="Name" SourceTypeName="Music.Library.Domain.Models.Artist, Music.Library.Domain">
        </ml:DataAnnotationValidator>
    </div>
    <div class="form-actions">
        <button id="save" class="btn btn-primary" name="submit" type="submit">Save</button>
        <button id="cancel" class="btn">Cancel</button>
    </div>
</div>
</form> 
```

使用以下 ajax 调用动态加载此用户控件：

```
$('#add').click(function () {
    $.ajax({
        url: "/Artist/Manage/Insert.ascx.axd",
        type: "POST",
        dataType: "html",
        success: function (obj) {
            $('#body_artist').html($(obj));
        }
    });
}); 
```

这是用户单击保存时执行的 jquery：

```
$('#save').click(function (event) {
    event.preventDefault();

    $.ajax({
        url: "/artist/add.axd",
        type: "POST",
        dataType: "html",
        cache: false,
        async: true,
        data: 'Ajax=true&' + $('#insertArtist').serialize(),
        beforeSend: function (jqXHR, settings) {
            $('#loading').show();
        },
        success: function (data) {
            if (data == "succes") {
                showNotification('succes', 'Succesfully added artist');
            } else {
                showNotification('error', 'Error while adding artist: ' + data);
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            showNotification('error', 'Error while adding artist: ' + data);
        },
        complete: function () {
            $('#loading').hide();
        }
    });
}); 
```

现在，由于没有来自 asp.net 控件的触发器，因此自定义数据注释验证器将不会验证。

我尝试使用 Javascript 进行验证，使用 Page_ClientValidate()、ValidateEnable() 和 Validate() 方法。不幸的是，在尝试此操作时，我一遍又一遍地遇到相同的错误：

```
Page_ClientValidate is not defined 
```

其他方法的情况相同。我在这里束手无策。

是不是因为 UserControl 是动态加载的，所以这些客户端验证方法不起作用？我已将 EnableClientScript 设置为 true。

或者有人对如何实现这一点有其他想法吗？我真的很想使用数据注释。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:23:06.333

它可以是一个解决方案 [http://xhalent.wordpress.com/2011/01/24/applying-unobtrusive-validation-to-dynamic-content/](http://xhalent.wordpress.com/2011/01/24/applying-unobtrusive-validation-to-dynamic-content/)

特别是，它是这个问题的重复[Unobtrusive validation not working on dynamic-adding partial view](https://stackoverflow.com/questions/9321040/unobtrusive-validation-on-dynamically-added-partial-view-not-working)这也指 XHalent 博客

# git - 如何将文件与 X 版本之前的提交进行比较

> ID：11559530
> 
> 赞同：1
> 
> 时间：2012-07-19T11:06:45.160
> 
> 标签：git, diff

要将文件与不是当前 HEAD 的某个提交进行比较，我调用`git log`，记下提交哈希，然后调用`git diff <hash> filename`.

有没有办法像这样使用 diff 命令：`git diff -<x_commits_back> filename`并将文件与`x`以前版本的版本进行比较？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T11:18:50.390

是的，您可以使用：

```
git diff HEAD~X -- filename 
```

酌情更换`X`。请注意，它遵循合并提交的第一个父级。

# twitter-bootstrap - 我怎样才能做类似“扩展所有”链接的事情？

> ID：11559532
> 
> 赞同：0
> 
> 时间：2012-07-19T11:06:50.560
> 
> 标签：twitter-bootstrap, accordion

是否可以在 twitter bootstrap collapse 插件上打开所有块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:25:10.393

您可能只想使用一些 jQuery，而不是使用折叠插件。

```
jQuery(document).ready(function(){
    $('.accordion .heading').click(function() {
        $(this).next().toggle('slow');
        return false;
    });
}); 
```

[JSFiddle 示例](http://jsfiddle.net/auNu8/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:23:57.160

我相信你可以只使用“in”类来做到这一点......

`<div id="collapseOne" class="accordion-body collapse **in**">`

# entity-framework - 教学实体框架为自定义 NodeTypes 生成 SQL

> ID：11559533
> 
> 赞同：1
> 
> 时间：2012-07-19T11:06:52.430
> 
> 标签：entity-framework, expression-trees

是否可以通过使用带有 NodeType Extension 和 CanReduce = false 的自定义表达式继承器来自定义 SQL 的生成？

考虑以下要点，其中 Name 是 ViewModel 中的属性，Attribute1 是 MS SQL 中 SQL 类型列中的属性。

```
/* may not compile, focus is on SQL generation. */
Expression<Func<ViewModel, bool>> expr = (vm) => vm.Name == "abc" && vm.Attribute1 == 123;
var translator = new CustomExpressionVisitor();
LambdaExpression translated = (LambdaExpression)translator.Visit(expr);

/*
translated has a custom Expression type for vm.Attribute1 == 123 part, it is of type XmlPredicateExpression and this expression has all necessary information to generate an SQL query on this column.
*/ 
```

我们如何教 EntityFramework 为这个表达式生成 SQL？可能吗？

# jquery - jQuery height() 在调整大小时不会改变

> ID：11559534
> 
> 赞同：6
> 
> 时间：2012-07-19T11:06:52.483
> 
> 标签：jquery, resize, height

我以前从来没有遇到过这个问题，但我似乎找不到解决方案，所以我希望你们能帮助我。

**jQuery**

```
function setTheHeight() {

    if( $('#main.level1 .block.attention .block-content').length ) {
        //Get value of highest element
        var maxHeight = Math.max.apply(Math, $('#main.level1 .block.attention .block-content').map (
            function() {
                return $(this).height();
            }
        ));
        console.log(maxHeight);
        $('#main.level1 .block.attention .block-content').height(maxHeight);
    }
}

setTheHeight();

$(window).resize(function() {
    setTheHeight();
}); 
```

基本上这个函数的作用是检查最高的 div 并将所有选定 div 的高度设置为这个高度。这工作正常。但这是一种响应式设计，所以当用户调整浏览器的大小时，内容会变小，div 会变高。所以我添加了一个调整大小事件。该事件正在被触发，但它没有改变高度。知道为什么调整大小不会改变高度吗？

快速 jsFiddle 显示发生了什么：http: [//jsfiddle.net/3mVkn/](http://jsfiddle.net/3mVkn/)

**使固定**

嗯，这简直是愚蠢的。因为我正在设置 height() 它已经修复了所以我所要做的就是重置高度并且它起作用了。

更新代码：

```
function setTheHeight() {

    if( $('#main.level1 .block.attention .block-content').length ) {

        //Reset height
        $('#main.level1 .block.attention .block-content').height('auto');

        //Get value of highest element
        var maxHeight = Math.max.apply(Math, $('#main.level1 .block.attention .block-content').map (
            function() {
                return $(this).height();
            }
        ));
        console.log(maxHeight);
        $('#main.level1 .block.attention .block-content').height(maxHeight);
    }
}

setTheHeight();

$(window).resize(function() {
    setTheHeight();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T11:50:01.633

这与 jQuery 无关，而是 CSS。这是因为一旦将 .block-content 的高度设置为某个值，在调整窗口大小后，这些 .block-content 的高度不会改变，因为高度不再设置为，`auto`而是设置为某个预定义的值。

解决方案是使用`return $(this)[0].scrollHeight`而不是`return $(this).height()` 这种方式，它会返回内容的真实高度，而不是CSS定义的高度。

**编辑：**

解决方案实际上是计算 .block-content 内所有子项的高度，然后返回该值。我在这里编辑了你的代码[http://jsfiddle.net/3mVkn/12/](http://jsfiddle.net/3mVkn/12/)

这应该会给你所需的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:49:26.127

我认为您缺少一个`.map()`功能参数。我看了`.map()` [这里](http://api.jquery.com/jQuery.map/)。

# iphone - CLGeocoder reverseGeocodeLocation 无法产生一致的结果

> ID：11559537
> 
> 赞同：3
> 
> 时间：2012-07-19T11:07:00.307
> 
> 标签：iphone, objective-c, ios5, xcode4.2

对于两个不同的坐标系，我无法从 CLGeocoder reverseGeocodeLocation 获得相同的结果。例如。

```
CLLocation *tempLocation = [[CLLocation alloc] initWithLatitude:37.785834 longitude:-122.406417]; // coordinate for apple head quater
CLGeocoder *geocoder = [[CLGeocoder alloc] init];    
[geocoder reverseGeocodeLocation:tempLocation completionHandler:
 ^(NSArray* placemarks, NSError* error){
     if ([placemarks count] > 0)
     {
         CLPlacemark *placemark = [placemarks objectAtIndex:0];             
         NSLog(@" %@",placemark.addressDictionary); 
     }
 }]; 
```

## 输出 ：

```
City = "San Francisco";
Country = "United States";
CountryCode = US;
FormattedAddressLines =     (
    "Apple Store, San Francisco",
    "1 Stockton St",
    "San Francisco, CA  94108-5805",
    "United States"
);
Name = "Apple Store, San Francisco";
PostCodeExtension = 5805;
State = California;
Street = "1 Stockton St";
SubAdministrativeArea = "San Francisco";
SubLocality = "Union Square";
SubThoroughfare = 1;
Thoroughfare = "Stockton St";
ZIP = 94108; 
```

* * *

但是当我使用

```
CLLocation tempLocation = [[CLLocation alloc] initWithLatitude:27.672654 longitude:85.313744]; 
///CLLocation *tempLocation = [[CLLocation alloc] initWithLatitude:37.785834 longitude:-122.406417]; 
CLGeocoder *geocoder = [[CLGeocoder alloc] init]; 
[geocoder reverseGeocodeLocation:tempLocation completionHandler: 
 ^(NSArray placemarks, NSError* error) { 
    if ([placemarks count] > 0) { 
        CLPlacemark *placemark = [placemarks objectAtIndex:0]; 
        NSLog(@" %@",placemark.addressDictionary); 
    }
}]; 
```

输出是

```
{ 
Country = Nepal; 
CountryCode = NP; 
FormattedAddressLines = ( "Pulchowk Road", Nepal ); 
Name = "Pulchowk Road"; 
State = Bagmati; 
Street = "Pulchowk Road"; 
Thoroughfare = "Pulchowk Road"; 
} 
```

问题是为什么我没有得到所有的信息。例如 City ， ZIP .. 丢失。我应该如何在程序中处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:31:36.363

地理位置始终使用最佳可用信息。对于尼泊尔来说，与 Apple 或其服务提供商签约的地图公司很可能没有提供您所缺少的信息。这更像是一个合同/服务质量问题，我认为您无能为力。除非尝试优化您的应用程序以提供最佳的用户体验，即使它只有不完整的数据。

# java - 在 Eclipse CDT 中获取调用层次结构

> ID：11559540
> 
> 赞同：4
> 
> 时间：2012-07-19T11:07:07.690
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-cdt, call-hierarchy

我正在为 Eclipse CDT 开发一个插件，我想生成一个函数的调用层次结构。

是否可以不必自己遍历每个文件的语法树？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T09:57:28.713

```
CallHierarchy hierarchy = new CallHierarchy();
IJavaSearchScope searchScope = SearchEngine.createWorkspaceScope();
hierarchy.setSearchScope(searchScope);
ArrayList<MethodCall> methodCalls = new ArrayList<MethodCall>();

MethodWrapper[] callerWrapper = hierarchy.getCallerRoots(methods);
ArrayList<MethodWrapper> callsWrapper = new ArrayList<MethodWrapper>();
for (int i = 0; i < callerWrapper.length; i++) {
    callsWrapper.addAll(Arrays.asList(callerWrapper[i]
            .getCalls(new NullProgressMonitor())));
}

for (int i = 0; i < callsWrapper.size(); i++)
    methodCalls.add(callsWrapper.get(i).getMethodCall());
// Now you will get method calls in methodCalls list.
IMember member = methodCalls.get(0).getMember();// you will get one of
                                                // caller method in
                                                // member by this method 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:00:03.037

这是 CDT 中用于填充调用层次结构视图的代码的链接：http: [//git.eclipse.org/c/cdt/org.eclipse.cdt.git/tree/core/org.eclipse.cdt。 ui/src/org/eclipse/cdt/internal/ui/callhierarchy/CHQueries.java](http://git.eclipse.org/c/cdt/org.eclipse.cdt.git/tree/core/org.eclipse.cdt.ui/src/org/eclipse/cdt/internal/ui/callhierarchy/CHQueries.java)

看起来很复杂，而且都是内部的（意味着它不是公共 API）。玩得开心。

# python - 在 Mac 上安装 virtualenvwrapper - 未找到 hook_loader.py pkg_resources

> ID：11559549
> 
> 赞同：2
> 
> 时间：2012-07-19T11:07:24.293
> 
> 标签：python, macos

我正在尝试在我的 Mac 上设置 virtualenv 和 virtualenvwrapper，但遇到 virtualenvwrapper 问题。

我已经浏览了其他相关的帖子并尝试了一些东西，但是当我的 .bash_profile 在线加载时我仍然收到错误

```
source /usr/local/bin/virtualenvwrapper.sh 
```

错误消息：文件“”，第 1 行，文件“/Library/Python/2.7/site-packages/virtualenvwrapper/hook_loader.py”，第 16 行，导入 pkg_resources ImportError：没有名为 pkg_resources 的模块*

```
'which python' yields '/usr/local/bin/python' 
```

并运行 IDLE 告诉我它使用 v2.7.3

我之前跑过

```
pip install virtualenv 
```

和

```
pip install virtualenvwrapper 
```

他们俩似乎都很好。

运行“查找”显示 pkg_resources.py 位于 /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py

我的路径是 /usr/local/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/X11/bin

也 cat .bash_profile 产量

```
export WORKON_HOME=$HOME/workspace/virtualenvs
export PROJECT_HOME=$HOME/workspace/repos
export PATH=/usr/local/python:$PATH
source /usr/local/bin/virtualenvwrapper.sh 
```

其他人有这个问题并找到了解决办法吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:54:02.407

今天早上我遇到了同样的错误。在我的基本 python 环境（不在虚拟环境中）上升级 setuptools 解决了这个问题。这是我运行的命令

```
sudo pip install setuptools --upgrade 
```

我之前安装了 setuptools，但也许我的版本不好或安装损坏。使用 --upgrade 升级修复了它。

# assembly - 我应该在存在 ASM SSSE3 代码的情况下使用 -mssse3 进行编译吗？

> ID：11559559
> 
> 赞同：2
> 
> 时间：2012-07-19T11:08:05.363
> 
> 标签：assembly, vectorization, x264, sse3

我有一个关于在 GCC 上编译 x264 的问题。

x264 具有处理 SSE3 和 SSSE3 等指令集的汇编代码，并且默认情况下在 makefile 中禁用自动矢量化。

我是否应该使用 -mssse3 标志编译它，或者这实际上会导致性能损失？

-mssse3 是否暗示 -msse3 还是 SSE3 与 SSSE3 分开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:15:16.670

该`-m<isa>`标志告诉编译器在它生成的代码中使用什么指令。它不影响内联汇编，它只是进一步未经修改地传递给汇编器，不影响`.s`单独编译的汇编（）文件。使用 SSSE3 编译并且没有自动矢量化是毫无意义的，因为 SSE 完全是关于矢量化，尽管它也可以用于执行标量浮点运算。

# c# - MonoTouch.Dialog：如何在另一个 RootElement 中创建 RadioElement？

> ID：11559561
> 
> 赞同：1
> 
> 时间：2012-07-19T11:08:15.927
> 
> 标签：c#, xamarin.ios, monotouch.dialog

我有两个`RootElement`元素装箱。见代码。最深的级别应该是`StringElement`可点击的，允许选择当前的评论。但是，由于缺少`RadioGroup`. MT.Dialog可以吗？

```
Root = new RootElement ("Annotations")
{
  new Section ("Review")
  {
    // This element's caption is supposed to be whatever gets selected deep down.
    new RootElement("Reviews", new RadioGroup(0))
    {
      new Section("My Reviews")
      {
        new RootElement("Local profile")
       {
         new Section()
         {
           // Tapping this element should make "Local profile selected" appear as caption of the "Reviews" RootElement.
           new RadioElement("Activate", "Local profile selected")
         },
...more elements... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:35:47.170

指定无线电组，如下所示：

```
new RootElement ("Local Profile", new RadioGroup (0)) {
    ....
} 
```

# javascript - 更改文本框的值，与另一个具有比率的文本框值相比

> ID：11559569
> 
> 赞同：0
> 
> 时间：2012-07-19T11:08:54.377
> 
> 标签：javascript, c#, asp.net

我正在研究 ASP.NET C#。

使用 Javascript，当另一个文本框的值以 3:2 的比例变化时，我需要更改一个文本框的值。

例如，如果文本中的值为 150，则其他文本框的值应为 100。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:28:12.337

尝试这个，

**Javascript：**

```
<script type="text/javascript">
    function fill() {
        document.getElementsByName('txt2')[0].value) = (document.getElementsByName('txt1')[0].value) * (2 / 3);
    }
</script> 
```

**正文标签中的代码：**

```
<form id="form1" runat="server">
<div>    
    <%--The text boxes must have numeric values--%>
    <asp:TextBox ID="txt1" runat="server" onchange="javascript:fill();"></asp:TextBox>

    <asp:TextBox ID="txt2" runat="server"></asp:TextBox>
</div> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:36:36.593

您可以在文本框中使用`onchange`或`onkeyup`事件

将以下 java-script 函数添加到您的 html

```
function ChangeValue() {
    if (document.getElementById('txtval1').value) {
        document.getElementById('txtval2').value=document.getElementById('txtval1').value*2/3;
    }
} 
```

然后将两个带有 ids txtval1,txtval2 的文本框添加到您的 html 中，添加`onkeyup="ChangeValue();`到第一个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:32:38.493

使用这样的东西

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function change() {    
    var t1Val = (document.getElementById("t1")).value;
    (document.getElementById("t2")).value = ((t1Val * 2) / 3);
};
</script>
</head>
<body>

<input id="t1" type="text" onchange="change()"/>
<input id="t2" type="text"/>

</body>
</html> 
```

如果您需要任何验证，您可以在 change() 函数中编写。

[http://jsfiddle.net/bdd63/1/](http://jsfiddle.net/bdd63/1/)

# c++ - 来自同一个 bool c++ 的两个 if 语句的最佳实践

> ID：11559570
> 
> 赞同：1
> 
> 时间：2012-07-19T11:09:00.323
> 
> 标签：c++, if-statement

我有一个 if 语句 [显然] 仅在条件为真时运行。在这个 if 语句之后，有一些代码应该始终运行，然后是另一个 if 语句，应该在与第一个相同的条件下运行。

中间的代码是使用堆栈的特定元素执行操作，两边的 ifs 分别在操作之前和之后对堆栈执行 push/pop。

所以逻辑是这样的：

1.  我需要推送堆栈吗？是/否
2.  在栈顶执行操作
3.  堆栈是否被推送？（如果是，则弹出）

第 1 项和第 3 项条件相同。

这是我第一次在 C++ 中编写的代码

```
#include <stdio.h>
#include <stdlib.h>

int somefunction(){
    return rand() % 3 + 1; //return a random number from 1 to 3
}

int ret = 0;

//:::::::::::::::::::::::::::::::::::::::
//  Option 1 Start
//:::::::::::::::::::::::::::::::::::::::
int main(){
    bool run = (ret = somefunction()) == 1; //if the return of the function is 1
    run = (run || (ret == 2));              //or the return of the function is 2
    if (run){                               //execute this if block
        //conditional code
        if (ret == 1){
            //more conditional code
        }
    }
        //unconditional code
    if (run){
        //even more conditional code
    }
}
//:::::::::::::::::::::::::::::::::::::::
//  Option 1 End
//::::::::::::::::::::::::::::::::::::::: 
```

在写完这篇文章后，我认为这样做可能更有效：

```
//:::::::::::::::::::::::::::::::::::::::
//  Option 2 Start
//:::::::::::::::::::::::::::::::::::::::
int main(){
    bool run;
    if (run=(((ret = somefunction()) == 1)||ret == 2)){ //if the return of the function is 1 or 2 then execute this if block
        //conditional code
        if (ret == 1){
            //more conditional code
        }
    }
    //unconditional code
    if (run){
        //even more conditional code
    }
}
//:::::::::::::::::::::::::::::::::::::::
//  Option 2 End
//::::::::::::::::::::::::::::::::::::::: 
```

我更喜欢第一种方法的可读性，因为它分为几行，而第二种方法在同一行中有两个赋值（=）和两个比较（==）。我想知道使用第二种方法是否更好（出于效率或可执行文件大小的原因），或者是否有比这两种方法更好的方法。

在任何人说它只会产生几乎无法估量的差异之前，这是一个巨大的循环，必须在 1/50 秒内运行数千次，所以我想尽可能多地节省时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T11:10:46.800

性能不应该是您关心的问题：现代编译器通常足够聪明，可以在任何情况下优化代码。如果代码基本上做同样的事情，结果将是相同的。

因此，您应该更喜欢更具可读性（因此更易于维护）的变体。

我会写这样的东西：

```
ret = somefunction();
// I don't know what is the semantics of ret == 1, so let's imagine some
bool operationIsPush = (ret == 1);
bool operationIsOnTop = (ret == 2);

if (operationIsPush || operationIsOnTop)
{
    //conditional code
}

if (operationIsPush)
{
    //more conditional code
}

//unconditional code

if (operationIsPush || operationIsOnTop)
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:12:59.523

我相信这里的表现不会有任何差异。第一个原因是您的编译器可能会在每种情况下优化代码。第二个是你只是改变了操作发生的地方（比如“我做 A->B->C 或 A->C->B”），而不是操作的数量，所以它总是相同的计算量（1个函数调用，几个`==`等等）。

但是考虑到这 `(run=(((ret = somefunction()) == 1)||ret == 2))` 很难阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T11:13:48.217

正确性比您是否将分配布尔值的两个操作合并为一个（编译器可能无论如何都会这样做）更重要。

对于推送/弹出堆栈，您应该使用范围保护（[此处](http://www.drdobbs.com/cpp/generic-change-the-way-you-write-excepti/184403758)为原始文章）。这将确保如果某些东西抛出了“无条件位”，你永远无法确定，那么它仍然可以正常运行。否则你会得到一个有趣的惊喜（堆叠一个，或者溢出）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T11:13:34.747

如果有一种情况可以将“if-else”拆分为不同的大循环，它会更快

而不是

```
loop {  if_1  {some work}    if_2 {some other work}   } 
```

你可以

```
if_1 { loop {work }}    if_2 {loop{same work}} 
```

更极端的是，如果您可以拆分最内部的“if”句子，则可以有 10-20 个（取决于您的情况）运行 x2 x3 更快的不同的巨大循环（如果由于“if”而变得缓慢）

# android - 在android中的listview项目上制作不同的可点击视图

> ID：11559575
> 
> 赞同：1
> 
> 时间：2012-07-19T11:09:22.747
> 
> 标签：android, adapter

在我的应用程序中，我有一个 listView。列表视图的每个项目都包含一个可点击的主体（图像和一些文本）和 3 个其他可点击的 textView。

当我单击该项目时，它会显示该项目上显示的相应区域的地图，这很好用，因为我在我的活动中的列表视图上使用 onItemClick。

但是，当我想在图像中标记为红色的 3 个其他 TextView 上实现 onClick 时，我必须在适配器类的 getView 方法中实现 onClick。

问题来了：

```
public View getView(int position, View convertView, ViewGroup parent) {

    View vi = convertView;
    ViewHolder holder = new ViewHolder();
    p = values.get(position);
    String date = new java.text.SimpleDateFormat("dd/MM/yy")
            .format(new java.util.Date(p.timeStamp));
    if (vi == null) {

            vi = inflater.inflate(R.layout.feed_items, null);
            holder.text = (TextView) vi.findViewById(R.id.label);
            holder.image = (ImageView) vi.findViewById(R.id.logo);
            holder.thankLabel = (TextView) vi.findViewById(R.id.thankLabel);
            holder.iwantLabel = (TextView) vi.findViewById(R.id.iWantLabel);
            holder.detailsLabel = (TextView) vi
                    .findViewById(R.id.detailsLabel);

                    holder.thankLabel
                    .setOnClickListener(new View.OnClickListener() {

                        public void onClick(View arg0) {

                        }
                    });
            holder.iwantLabel
                    .setOnClickListener(new View.OnClickListener() {

                        public void onClick(View arg0) {

                            Intent intent = new Intent(activity,
                                    IWantActivity.class);
                            intent.putExtra("productDetails", p.productName
                                    + "^" + p.reportedPrice);
                            activity.startActivity(intent);
                        }
                    });
            holder.detailsLabel
                    .setOnClickListener(new View.OnClickListener() {

                        public void onClick(View arg0) {

                        }
                    });
        }
        vi.setTag(holder);
    } else {

        holder = (ViewHolder) vi.getTag();
    }
    return vi;
} 
```

在我的活动中，当我想要单击哪个项目的引用时，我可以使用位置参数，但在 getView 的情况下，参数位置给出了新创建的项目，而不是我点击的项目的 iWant。如何解决这个问题？

![在此处输入图像描述](../Images/32f7825d8b272dc959c02c48df9e8f79.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:13:29.550

您可以将标签放在标签上，并将其用作单击处理程序的上下文。

# android - 如何仅在我的应用程序中强制使用 zxing lib？

> ID：11559577
> 
> 赞同：3
> 
> 时间：2012-07-19T11:09:29.330
> 
> 标签：android, zxing

好的，可以说有 3 个不同的应用程序在手机上使用 zxing lib。每当我想用自己的应用程序打开 zxing 时，android 都会询问我是使用应用程序 1 还是应用程序 2 还是我自己的应用程序来完成操作。如何强制它仅通过我的应用程序运行而没有任何对话框？有机会做吗？

**编辑**

在 CommonsWare 的补充中，如果您想处理其他活动的条形码结果，您可以这样做。

第 1 步：跳转到 Capture Activity 中名为 handleDecode 的方法。在 handleDecodeInternally(rawResult, resultHandler, barcode); 之后添加这些行

```
Intent intent = new Intent(getIntent().getAction());
intent.putExtra("SCAN_RESULT", rawResult.getText());
setResult(RESULT_OK,intent);
finish(); 
```

第 2 步：对其他活动的 onActivityResult 事件做任何想做的事情。

PS：再次感谢 CommonsWare。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T11:27:09.850

首先，没有“zxing lib”。您应该使用 Barcode Scanner 应用程序，在活动级别将其绑定到您的应用程序中，最好使用他们的`IntentIntegrator`代码。[这是一个示例应用程序来演示这一点](https://github.com/commonsguy/cw-omnibus/tree/master/Camera/ZXing)。ZXing 的创建者明确不支持或认可将 Barcode Scanner 源代码烘焙到另一个应用程序中。

但是，鉴于您的症状，我不得不假设您正在尝试将 Barcode Scanner 源代码添加到您自己的应用程序中。

您可能在扫描活动元素的清单中有类似的内容：

```
 <intent-filter >
            <action android:name="com.google.zxing.client.android.SCAN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter> 
```

您不是条形码扫描仪。然而，这`<intent-filter>`声称您是条形码扫描仪。

您需要删除它`<intent-filter>`，将 Barcode Scanner 源代码的副本修改为不需要它，然后使用基于组件的`Intent`构造函数（例如`new Intent(this, ThisIsYourRevisedScanningActivity.class)`）启动扫描活动。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-29T08:28:03.347

只要包括这个，这已经完成了我所需要的..

```
Intent intent = new Intent("com.google.zxing.client.android.SCAN");
            intent.setPackage(getPackageName());
            intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
            startActivityForResult(intent, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:21:54.597

Android 不允许您自行设置。只有用户可以为操作设置默认应用程序。如果在您的手机上，您希望您的应用程序处理该事件，则在选择器中选择您的应用程序之前选中用作默认框。

出于安全原因，Android 不允许您在没有用户交互的情况下将您的应用程序设置为默认值，因为这样恶意应用程序可能会将自身作为默认值绑定到各种事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-24T14:03:01.290

实际上你需要像 CommonsWare 说的那样删除意图过滤器，所以它必须如下：

```
<activity
       android:name="com.google.zxing.client.android.CaptureActivity"
       android:screenOrientation="landscape"
       android:configChanges="orientation|keyboardHidden"
       android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
       android:windowSoftInputMode="stateAlwaysHidden">
</activity> 
```

而不是通过外部意图调用你应该调用 zxing 像：

```
private final static int ACTION_ZXING_SCANNER = 0x0000c0de; //IntentIntegrator.REQUEST_CODE
private void startZxingScanner() {
    final Intent intent = new Intent(this, com.google.zxing.client.android.CaptureActivity.class);
    intent.setAction(Intents.Scan.ACTION);
    startActivityForResult(intent, ACTION_ZXING_SCANNER);
} 
```

然后`onActivityResult()`使用请求代码处理结果`ACTION_ZXING_SCANNER`。如果需要，导入字符串：

```
import com.google.zxing.client.android.Intents; 
```

注意：这对我有用，我将 zxing 项目作为库添加到我的项目中，所以这里是 - “zxing lib”:)

# android - 在android中加载对话框

> ID：11559578
> 
> 赞同：1
> 
> 时间：2012-07-19T11:09:30.823
> 
> 标签：android, progressdialog

我在 webview 中加载对话框时遇到问题。我的对话框是 dismis 但我必须再等一秒钟才能显示完整的 webview .. 我想要的是，如果加载对话框是 dismis webview 完成.. 这是我的 webview 代码：

```
progressBar = new ProgressDialog(this);
webView = (WebView) findViewById(R.id.webView1);
webView.getSettings().setJavaScriptEnabled(true);
webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);

final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
progressBar = ProgressDialog.show(WebViewFacebook.this, "Loading", "Please wait for a moment...");

webView.setWebViewClient(new WebViewClient() {
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }

    public void onPageFinished(WebView view, String url) {
        if (progressBar.isShowing()) {
            progressBar.dismiss(); //--> this progressbar always dismis although mw webview not done ><
        }
    }

    public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
        alertDialog.setTitle("Error");
        alertDialog.setMessage(description);
        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                //return;
                finish();
            }
        });
        alertDialog.show();
    }
});
webView.loadUrl(strurl); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:27:05.563

请参阅下面的代码

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    view = (WebView) findViewById(R.id.WebView01);
    view.setBackgroundColor(0);  // set the background transparent 

    progressDialog = ProgressDialog.show(view.getContext(), "Loading...", "Loading...");
    progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER    );

    view.setWebChromeClient(new MyWebChromeClient());
    view.getSettings().setJavaScriptEnabled(true);
    view.setWebViewClient(new MyWebViewClient());
    view.loadUrl("http://www.XXX.XXX");

} 
```

然后创建类

```
 private class MyWebViewClient extends WebViewClient {
    @Override
     public boolean shouldOverrideUrlLoading(WebView view, String url) 
    {
        view.loadUrl(url);
        return true;
    }
}

private class MyWebChromeClient extends WebChromeClient {

    @Override
    public void onProgressChanged(WebView view, int newProgress) {
        if(progressDialog!=null){
            if ( newProgress >=80 ) {
                progressDialog.dismiss();
            } else {
                progressDialog.setMessage(newProgress + " % loaded");
            }
        }
        super.onProgressChanged(view, newProgress);
    }
} 
```

# css - 将背景图像应用于电子邮件中的 td 元素

> ID：11559579
> 
> 赞同：0
> 
> 时间：2012-07-19T11:09:32.553
> 
> 标签：css, outlook, newsletter

我有一个`td`并且想在`bg-image`里面放一个。知道在不同的客户端上使用带有 css 的时事通讯存在不同的问题。

我试过这个：

```
<td style=" background-image: url('...absolute path...');
           background-repeat: repeat-y no-repeat;
           width: 15px;">&nbsp;
</td> 
```

我还尝试将类属性添加到`td`并将css放在头部。没有任何效果，img 没有出现。

编辑：现在我从德国资料中了解到，Outlook 不支持许多 CSS 属性，例如

*   背景图片
*   背景位置
*   背景重复
*   展示
*   浮动
*   位置

如何将背景图像添加到`td`元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:49:24.417

我认为，将图像放入**td**的唯一方法是：

```
<td><img src"#" /></td> 
```

当然，如果您没有图像以外的其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:14:09.540

我认为 Outlook 不支持 CSS 中的背景图像。

[http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

# javascript - 在光标位置插入 HTML 并使用 javascript 将光标移动到插入的 html 的末尾

> ID：11559582
> 
> 赞同：1
> 
> 时间：2012-07-19T11:09:42.193
> 
> 标签：javascript, iframe, greasemonkey

我正在编写一个脚本，在下面提到的撰写页面中将预先保存的 html 内容插入到 Gmail 的可编辑 iframe 中。这个脚本只能在 Firefox 上的 Greasemonkey 中使用。所以我不需要考虑任何其他浏览器。

目前它插入文本一次然后被窃听。我猜是因为 range.setStart() 期望第一个参数是一个节点，它 createContextualFragment() 不返回。

有没有其他方法可以在当前光标的位置添加 html，然后将光标移动到添加的 html 的末尾（而不是所有内容的末尾）？

[https://mail.google.com/mail/?view=cm&fs=1&tf=1&source=mailto&to=example@example.com](https://mail.google.com/mail/?view=cm&fs=1&tf=1&source=mailto&to=example@example.com)

```
function insertTextAtCursor(text) {
    var sel, range, html, textNode;
    if (window.frames[3].window.frames[0].getSelection()) {
        sel = window.frames[3].window.frames[0].getSelection();
        if (sel.getRangeAt && sel.rangeCount) {
            range = sel.getRangeAt(0);
            range.deleteContents();
            textNode = range.createContextualFragment(text);
            //textNode = document.createTextNode(text);
            range.insertNode( textNode );
            range.setStart(textNode, textNode.length);
            range.setEnd(textNode, textNode.length);
            sel.removeAllRanges();
            sel.addRange(range);
            window.frames[3].window.frames[0].focus();
        }
    }
} 
```

更新 1：如果我在插入 html 后注释代码以移动光标，则它不再被窃听，但光标停留在同一个地方。

```
//range.setStart(textNode, textNode.length);
//range.setEnd(textNode, textNode.length);
sel.removeAllRanges();
//sel.addRange(range); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:26:31.140

给你一些东西。

[在这个答案](https://stackoverflow.com/a/2819568/982924)的帮助下，我写了这个：

1.  将您的文本/html粘贴到光标位置
2.  将光标移动到文本区域的末尾

将其保存为**test.html**以在本地进行测试

```
<html>

<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
    <script>
    jQuery.fn.extend({
        insertAtCaret: function(myValue){
          return this.each(function(i) {
            if (document.selection) {
              //For browsers like Internet Explorer
              this.focus();
              sel = document.selection.createRange();
              sel.text = myValue;
              this.focus();
            }
            else if (this.selectionStart || this.selectionStart == '0') {
              //For browsers like Firefox and Webkit based
              var startPos = this.selectionStart;
              var endPos = this.selectionEnd;
              var scrollTop = this.scrollTop;
              this.value = this.value.substring(0, startPos)+myValue+this.value.substring(endPos,this.value.length);
              this.focus();
              this.selectionStart = startPos + myValue.length;
              this.selectionEnd = startPos + myValue.length;
              this.scrollTop = scrollTop;
            } 
            else {
              this.value += myValue;
              this.focus();
            }
          })
        }
    });

    var myhtml = '<b> this html will be <i>added</i> to the </b> cursor position (and will move to the end)';
    var movetotheendof = '';
    $(window).load(function(){
        $('#btnpastepre').click(function() {
            $('#txtarea').insertAtCaret(myhtml)
            movetotheendof = $('#txtarea').val()
            $('#txtarea').val("").val(movetotheendof)
        })
    });
    </script>
</head>

<body>

    <div id="formcontainer">
        <button id="btnpastepre">click to paste</button>

        <form id="formulario">
            <textarea id="txtarea" cols=60 rows=20></textarea>
        </form>
    </div>

</body>

</html> 
```

**或点击这里在线测试：http:** [//jsfiddle.net/RASG/Vwwm4/](http://jsfiddle.net/RASG/Vwwm4/)

现在您所要做的就是根据您的需要更改它（gmail或任何其他网站）

## 编辑

我忘了你想要一个 GM 脚本 :)
在这里

```
// ==UserScript==
// @name        TESTE 3
// @namespace   TESTE 3
// @description TESTE 3
// @require     http://code.jquery.com/jquery.min.js
// @include     *
// @version     1
// ==/UserScript==

jQuery.fn.extend({
    insertAtCaret: function(myValue){
        return this.each(function(i) {
            if (document.selection) {
                //For browsers like Internet Explorer
                this.focus();
                sel = document.selection.createRange();
                sel.text = myValue;
                this.focus();
            }
            else if (this.selectionStart || this.selectionStart == '0') {
                //For browsers like Firefox and Webkit based
                var startPos = this.selectionStart;
                var endPos = this.selectionEnd;
                var scrollTop = this.scrollTop;
                this.value = this.value.substring(0, startPos)+myValue+this.value.substring(endPos,this.value.length);
                this.focus();
                this.selectionStart = startPos + myValue.length;
                this.selectionEnd = startPos + myValue.length;
                this.scrollTop = scrollTop;
            } 
            else {
                this.value += myValue;
                this.focus();
            }
        })
    }
});

var myhtml = '<b> this html will be <i>added</i> to the </b> cursor position (and will move to the end)';
var movetotheendof = '';

$(window).load(function(){
    $('#btnpastepre').click(function() {
        $('#txtarea').insertAtCaret(myhtml)
        movetotheendof = $('#txtarea').val()
        $('#txtarea').val("").val(movetotheendof)
    })
}) 
```

只需创建一个包含此内容的 html 文件即可对其进行测试

```
<html>
<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
    <div id="formcontainer">
        <button id="btnpastepre">click to paste</button>
        <form id="formulario">
            <textarea id="txtarea" cols=60 rows=20></textarea>
        </form>
    </div>
</body>
</html> 
```

# javascript - 使用 javascript 获取浏览器历史记录并通过 php 打印

> ID：11559585
> 
> 赞同：-2
> 
> 时间：2012-07-19T11:09:47.060
> 
> 标签：javascript, php, browser, browser-history

我需要说

```
$userid ="xx Number";
$pageurl ="http://www.example.com/" . $userid  . ".php"; 
```

检查浏览器历史 >> 如果用户在 $pageurl 之前访问过这个页面 >> echo "welcome back!"

请问我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:19:07.420

您无法从用户的设备读取浏览历史记录。这将是一个巨大的隐私问题。我不想让你知道我的浏览历史。

您将需要找到其他方法来跟踪用户。一个典型的解决方案是使用 cookie。

# vba - 在每行之后插入 n 个空白单元格的代码非常慢

> ID：11559590
> 
> 赞同：2
> 
> 时间：2012-07-19T11:10:12.910
> 
> 标签：vba, optimization, excel

这将是我的代码，但如果我有超过 5000 行和 1 列，则需要一生。有没有办法减少查询时间？

```
Sub InsertRows() 
    Dim numRows As Integer 
    Dim r As Long 

    Application.ScreenUpdating = False 

    r = Cells(Rows.Count, "A").End(xlUp).Row 
    numRows = 11 

    For r = r To 1 Step -1 
        ActiveSheet.Rows(r + 1).Resize(numRows).Insert 
    Next r 

    Application.ScreenUpdating = True 
End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T12:53:08.903

这花费了 < 1 秒。

```
Sub InsertRows()

Dim numberOfValues As Long
Dim i As Long
Dim values As Variant

Const numberOfEmptyRows As Long = 11

Application.ScreenUpdating = False

' count values in column A
numberOfValues = Cells(Rows.Count, "A").End(xlUp).Row

' populate array with numbers
ReDim values(1 To numberOfValues, 1 To 1)
For i = 1 To numberOfValues
  values(i, 1) = i
Next i

' I know there is a better way to do this part...
Range(Cells(1, 2), Cells(numberOfValues, 2)).Value = values
For i = 1 To numberOfEmptyRows - 1
  Range(Cells(Rows.Count, "B").End(xlUp).Offset(1, 0), Cells(Rows.Count, "B").End(xlUp).Offset(numberOfValues, 0)).Value = values
Next i

' sort by values inserted in column B
Range(Cells(1, 1), Cells(Rows.Count, "B").End(xlUp)).Sort Key1:=Range("B1"), _
        Order1:=xlAscending, Header:=xlGuess, _
        OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
        DataOption1:=xlSortNormal

Columns("B:B").EntireColumn.Delete

Application.ScreenUpdating = True
End Sub 
```

此代码使用辅助列（在本例中为 B）在目标范围旁边插入一个数字序列。然后它在自身下方添加相同的数字 N 次，并对该列进行排序。最后，它删除该列。这就是您可以快速将空白行插入任何数据集中的方法。

更改`Const numberOfEmptyRows As Long = 11`是否要插入更多/更少的空白行。在达到 Excel 的行数限制之前，这种技术可以处理的记录数（以及可以插入的空白行数）是有限制的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T13:17:10.247

Jimmy, your code is very nice. But if there isn't any content in 'A' column while the other columns have some the result of sorting will go wrong.

So, I will use UsedRange to get numberOfValues as below.

```
 Set r2Arrange = ActiveSheet.UsedRange 
```

count values in column A:

```
numberOfValues = r2Arrange.Rows.Count 
```

# php - 如何仅访问第二个数组？

> ID：11559591
> 
> 赞同：0
> 
> 时间：2012-07-19T11:10:14.363
> 
> 标签：php, forms, multidimensional-array

我正在这样做：

```
$sql_glassware = 'SELECT id, name FROM glassware';
$qry_glassware = $con->query($sql_glassware);
$get_glassware = $qry_glassware->fetchAll(PDO::FETCH_ASSOC);
debug($get_glassware); 
```

`debug()`是个人功能；它返回这样的结果：

```
$get_glassware = array(19) {
    [0]=>array(2) {
        ["id"]=>string(1) "1"
        ["name"]=>string(8) "Cocktail"
    }
    [1]=>array(2) {
        ["id"]=>string(1) "2"
        ["name"]=>string(9) "Margarita"
    }
    [2]=>array(2) {
        ["id"]=>string(1) "3"
        ["name"]=>string(8) "Highball"
    }
    ...
} 
```

我猜第一个数组级别是行，第二个级别是列。
*不知道为什么它会将 id 作为字符串返回...*

然后我正在使用一个类来构造一个完整的表单；我有一个名为的公共函数`addSelect()`，其中第一个参数采用一组值来构建选项列表：`array('name0','name1', 'name2','...')`并在里面执行一个`foreach()`-loop：

```
public function addSelect($opt=array(),$param=array())
    $name = $this->useEither($param['name'],'dropdown-list');  //  useEither() is a personal function
    foreach ($opt as $val => $name){
        $options .= '<option value="'.$val.'">'.$name.'</option>';
    }
    $select = '<select name="'.$name.'" '.$param['string'].'>'.$options.'</select>';
    $this->formElements[] = $select;  //  store the list for use later
} 
```

如何重新编写这个小函数，以便我可以`$get_glassware`直接将第一个参数传递给我的函数并让它输出如下选项：

```
<option value="1">Cocktail</option>
<option value="2">Margarita</option>
<option value="3">Highball</option> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:47:44.943

试试这个：

```
public function addSelect($opt=array(),$param=array())
    $name = $this->useEither($param['name'],'dropdown-list');  //  useEither() is a personal function
    foreach ($opt as $option){
        $options .= '<option value="'.$option['id'].'">'.$option['name'].'</option>';
    }
    $select = '<select name="'.$name.'" '.$param['string'].'>'.$options.'</select>';
    $this->formElements[] = $select;  //  store the list for use later
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:47:57.270

我不确定你为什么或者你想在那里做什么，但是你在 addSelect 中的 foreach 覆盖了 $name 变量。

但据我了解您的问题，这应该可以解决您的问题。

```
foreach ($opt as $val => $name){
    $options .= '<option value="' . $name['id'] . '">' . $name['name'] . '</option>';
} 
```

对于调试功能...通常 print_r 比 var_dump 更容易阅读，但有时可能仍然需要调试。

# internet-explorer - IE9 - CSS3111：@font-face 遇到未知错误

> ID：11559592
> 
> 赞同：33
> 
> 时间：2012-07-19T11:10:18.400
> 
> 标签：internet-explorer, css, fonts, google-webfonts

[我嵌入了来自http://www.google.com/webfonts](http://www.google.com/webfonts)的三种 Google 字体（Dosis、Open Sans、Lato）

除了返回的 IE9 之外，它们都可以正常工作：

```
CSS3111: @font-face encountered unknown error. 
2HG_tEPiQ4Z6795cGfdivPY6323mHUZFJMgTvxaG2iE.eot

CSS3111: @font-face encountered unknown error. 
KlmP_Vc2zOZBldw8AfXD5g.eot

CSS3111: @font-face encountered unknown error. 
zLhfkPOm_5ykmdm-wXaiuw.eot 
```

并且偶尔会破坏整个网站。

可以做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-30T16:39:38.397

我找到了这个答案，它比公认的答案更直接地解决了这个问题，这真的不应该是答案:)

> 现在是我们的主要亮点 - “CSS3111：@font-face 遇到未知错误”。这个错误非常模糊。如果您再次查看 MSDN，您会看到它的描述说：“级联样式表 ( CSS）字体”。“未知问题”对我来说听起来不太好——我应该如何解决未知问题？幸运的是，我们在这里得到了提示。它说：“检查字体的来源”。实际上，CSS3111 通常是由字体的二进制源问题引起的。例如，流行的在线 TTF 到 EOT 转换器之一会生成带有不符合 Microsoft 标准的 NAME 表的 EOT 文件，这导致 EOT 字体永远不会在 IE 中加载并产生 CSS3111 错误。因此，当您体验 CSS3111 时，尝试使用不同的 TTF 到 EOT 转换器或字体生成器总是好的。

资料来源： http: [//www.marinbezhanov.com/web-development/16/how-to-embed-webfonts-properly-and-how-to-solve-the-ambiguous-css3111-font-face-encountered-unknown-错误/](http://www.marinbezhanov.com/web-development/16/how-to-embed-webfonts-properly-and-how-to-solve-the-ambiguous-css3111-font-face-encountered-unknown-error/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-09T08:11:46.897

我使用以下方法解决了 IE 9 上的问题`@font-face`：

```
@font-face {
    font-family: Gidole;
    src: url('Gidole-Regular.woff2') format('woff2'),
         url('Gidole-Regular.woff') format('woff');
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-27T13:22:31.870

我们发现，由于新的 Windows 10 策略，您会遇到相同的错误。如果您的错误发生在 Windows 10 + IE11 上，解决方案可以是：

[IE 11：我自己的代码中出现错误 CSS3111，并且 google.com/fonts 不呈现任何字体](https://stackoverflow.com/questions/33023461/ie-11-error-css3111-in-my-own-code-and-google-com-fonts-doesnt-render-any-fon)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-17T17:33:32.827

注释掉 EOT 字体的第二个源声明对我有用。确保您在“src: url("../fonts/webfonts/Helvetica Neue.eot");”上方的第一个声明

在 Chrome、Firefox、Sarafi、IE9-10-11 上测试。

```
@font-face {
  font-family: 'Helvetica Neue';
  font-style: normal;
  font-weight: 400;
  src: url("../fonts/webfonts/Helvetica Neue.eot");
  src: local("Helvetica Neue"), local("Helvetica Neue"),
    /*url("../fonts/webfonts/Helvetica Neue.eot?#iefix") format("embedded-opentype"),*/
    url("../fonts/webfonts/Helvetica Neue.woff2") format("woff2"),
    url("../fonts/webfonts/Helvetica Neue.woff") format("woff"),
    url("../fonts/webfonts/Helvetica Neue.ttf") format("truetype"),
    url("../fonts/webfonts/Helvetica Neue.svg") format("svg"); } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-29T16:12:01.683

*当您使用desubroutinize* d 字体时，也会发生此错误，似乎没有任何版本的 Internet Explorer 能够处理。

如果您使用[fonttools](https://github.com/fonttools/fonttools)[`pyftsubset`](https://github.com/fonttools/fonttools/blob/master/Lib/fontTools/subset/__init__.py)包生成字体文件，请确保您*没有*设置标志。*`--desubroutinize`*

 ** * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-24T15:38:10.763

我在 IE11 中遇到了同样的问题，我通过将字体文件`.woff2`从`.woff`.

通常，请确保浏览器支持字体文件格式。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-19T11:19:13.333

希望以下说明对您有用：

> 如果您的字体位于远程服务器（例如 CDN）上，它们将无法在所有浏览器中正确呈现。这只是部分正确。是的，如果没有明确的“Access-Control-Allow-Origin”标头，Firefox 和 Internet Explorer 将不会显示您的网络字体（如果您按 F12 在 IE 中打开开发人员工具并转到控制台选项卡，您将获得 CSS3117 : @font-face 跨域请求失败。资源访问受限。错误）那只是因为 IE 和 Firefox 默认不允许跨域字体。另一方面，谷歌浏览器将毫无问题地加载字体，如果您不知道跨域问题，调试这可能会非常令人沮丧。虽然我个人也更喜欢将我的字体放在同一个域上，
> 
> ```
> <FilesMatch "\.(ttf|otf|eot|woff)$">
>       <IfModule mod_headers.c>
>           Header set Access-Control-Allow-Origin http://mydomain.com"
>       </IfModule>
> </FilesMatch> 
> ```

[请参阅参考资料](http://www.marinbezhanov.com/web-development/16/how-to-embed-webfonts-properly-and-how-to-solve-the-ambiguous-css3111-font-face-encountered-unknown-error/)*

# google-chrome - HTTP“过期”标头在 Chrome 中不起作用

> ID：11559599
> 
> 赞同：16
> 
> 时间：2012-07-19T11:10:41.443
> 
> 标签：google-chrome, http-headers, cache-control

我的系统是 Windows 7 x64，Chrome 20.0.1132.57 m。

在我的 HTTP 响应标头中，我有：

```
Cache-Control: public, max-age=1000
Expires: *some date* 
```

在 IE & FF 中，页面缓存在本地，当我尝试通过键入 URL 并按 Enter 再次访问时，没有发送请求并且页面正确显示。但是在 Chrome 中，它总是向服务器发送一个带有以下标头的请求：

```
Cache-Control: max-age=0 
```

我不希望客户端向我的服务器发送请求然后回复 304。我想节省往返时间。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-07T15:17:01.430

测试时要小心。我注意到在 Chrome 版本 20 中，如果我按 F5 重新加载页面，然后在网络面板中我会看到新请求。Hoewer 如果我将光标放在标题栏上，在当前页面 url 之后，然后按 Enter，我会从缓存中获取资源，而标题被设置为缓存。

最好只使用最大年龄。Max age 和 Expires 是相同的，但在 max age 中你指定了持续时间。

请参阅： [http](http://betterexplained.com/articles/how-to-optimize-your-site-with-http-caching/) ://betterexplained.com/articles/how-to-optimize-your-site-with-http-caching/ 方法 3 和方法 4。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-16T12:35:11.103

我有类似的问题，我发现如果您使用新的 chrome 选项卡发出请求，它将起作用。

# maven - 谁能给我建议？我尝试使用 maven 进行编译并收到此消息以及“构建失败”消息

> ID：11559601
> 
> 赞同：0
> 
> 时间：2012-07-19T11:10:42.927
> 
> 标签：maven, accumulo

无法在项目 accumulo-core 上执行目标 org.codehaus.mojo:exec-maven-plugin:1.2.1:exec (generate-core-thrift)：命令执行失败。无法运行程序“C:\Documents and Settings\deepak\trunk\core\src\main\thrift\thrift.sh”（在目录“C:\Documents and Settings\deepak\trunk\core”中）：CreateProcess 错误=193 , %1 不是有效的 Win32 应用程序 -> [帮助 1]

我去了包含 pom.xml 的目录trunk并执行： mvn compile

我尝试在[http://maven.apache.org/plugins/](http://maven.apache.org/plugins/)找到插件，但找不到任何 .

谁能解释一下问题是什么？这些开源的东西太复杂了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:19:04.873

错误 193 还有另一种描述：“当您启动 Windows Share Point 服务器或 Windows Exchange 服务器时，您可能会看到 Windows 错误代码 193。该错误消息还会在您的系统日志中生成一般的服务控制管理器消息。”

[Windows 错误代码 193](http://error.info/windows/software-193.html)

尽管它对您的问题没有直接的答案，但可能对您也有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:26:42.167

[Apache Accumulo](http://accumulo.apache.org)目前在其构建系统中不支持 Windows。考虑使用[Ubuntu](http://www.ubuntu.com/)、[Fedora](http://fedoraproject.org/)、[CentOS](http://www.centos.org/)、[Mac OSX](http://www.apple.com/mac/)或其他 Linux 或 BSD 系统。如果您真的必须在 Windows 中构建，那么您对[​​Cygwin](http://www.cygwin.com/)很幸运。

# tridion - SmartTarget 部署 Web 服务 - XML 部署到根目录？

> ID：11559604
> 
> 赞同：2
> 
> 时间：2012-07-19T11:10:56.980
> 
> 标签：tridion, smarttarget

我在单独的服务器上设置了 SmartTarget 并让 SmartTarget 部署 Web 服务正常工作，因此当从 Tridion 发布内容时，它不会丢弃在本地文件系统上生成的 XML 内容，而是通过 Web 服务将其发送到 Fredhopper 所在的服务器安装。到目前为止一切都很好...

我遇到的问题是部署的 XML 文件被丢弃在 Fredhoppers 根目录 C:\fredhopper\instance01\FAS 中，而不是从中加载 XML 文件的目录 (C:\fredhopper\instance01\FAS\data\xml\incoming\批）！我在配置中找到的用于指定正确拾取目录的唯一位置是 SmartTargetDeploymentWebService.war 中的 SmartTargetDeploymentWebService.properties 文件，但正确设置为指向 C:\fredhopper\instance01\FAS\data\xml\incoming\批

有谁知道这可能是什么原因造成的？我可能只是愚蠢，所以希望有经验的人能够指出我正确的方向；）

更新：在部署服务首次加载时的日志中发现了这一点：

```
2012-07-19 12:56:05,909 ERROR SmartTargetDeployment - Unable to load configuration for fredhopper.location
java.lang.NullPointerException: null
at java.util.Properties$LineReader.readLine(Properties.java:418) ~[na:1.6.0_23]
at java.util.Properties.load0(Properties.java:337) ~[na:1.6.0_23]
at java.util.Properties.load(Properties.java:325) ~[na:1.6.0_23]
at com.tridion.smarttarget.web.SmartTargetDeployment.<init>(SmartTargetDeployment.java:33) ~[classes/:na]
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [na:1.6.0_23]
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) [na:1.6.0_23]
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) [na:1.6.0_23]
at java.lang.reflect.Constructor.newInstance(Constructor.java:513) [na:1.6.0_23]
at java.lang.Class.newInstance0(Class.java:355) [na:1.6.0_23]
at java.lang.Class.newInstance(Class.java:308) [na:1.6.0_23]
at com.sun.xml.ws.api.server.InstanceResolver.createNewInstance(InstanceResolver.java:215) [webservices-rt-1.4.jar:1.0]
at com.sun.xml.ws.api.server.InstanceResolver.createDefault(InstanceResolver.java:180) [webservices-rt-1.4.jar:1.0]
at com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:124) [webservices-rt-1.4.jar:1.0]
at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:467) [webservices-rt-1.4.jar:1.0]
at com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parseAdapters(DeploymentDescriptorParser.java:253) [webservices-rt-1.4.jar:1.0]
at com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parse(DeploymentDescriptorParser.java:147) [webservices-rt-1.4.jar:1.0]
at com.sun.xml.ws.transport.http.servlet.WSServletContextListener.contextInitialized(WSServletContextListener.java:108) [webservices-rt-1.4.jar:1.0]
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3669) [tmp6105104870192773276catalina.jar:na]
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4104) [tmp6105104870192773276catalina.jar:na]
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:759) [tmp6105104870192773276catalina.jar:na]
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:739) [tmp6105104870192773276catalina.jar:na]
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:524) [tmp6105104870192773276catalina.jar:na] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T11:15:26.237

您可以检查 WEB-INF/classes/SmartTargetDeploymentWebService_conf.xml 中指定的位置吗？

根据文档，这就是应该设置位置的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:47:36.360

通常，如果您在 XML 配置文件领域发现空引用异常，执行配置文件的模式验证会很有帮助。我不知道架构是否可用于此特定配置。@Nuno - 你知道吗？

# sql - 用于将数据从 3 个表复制到空表的单行查询

> ID：11559609
> 
> 赞同：1
> 
> 时间：2012-07-19T11:11:29.647
> 
> 标签：sql, sql-server, oracle, sql-server-2008, database-performance

今天面试，有人问我是否可以编写一个查询来将数据从 3 个表复制到一个空表。

我开始说，我将使用临时表或表变量，但他说不，他想在单个语句或查询中查看....我是空白 :(

请问你们中的任何人都可以分享正确的答案吗:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:13:23.737

```
insert into <emplty_table>
select * from table1
union all
select * from table2
union all
select * from table3 
```

前提是所有表都具有相同的结构

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:15:11.310

取决于具体情况，但总的来说，我认为这个想法是使用联合。以下显然是伪代码，但它传达了这个想法：

```
insert into x (field1, field2, field3)
  select a, b, c
    from table1
  union
  select d, e, f
    from table2
  union
  select g, h, i
    from table3 
```

# sql - 如何通过sql获取oracle connect中的最终父id列

> ID：11559612
> 
> 赞同：5
> 
> 时间：2012-07-19T11:11:37.420
> 
> 标签：sql, oracle, connect-by

1 像这样创建表

```
    创建表 oracle_connet_by_test (
    item_id NUMBER 主键，
    parent_id NUMBER，
    item_desc VARCHAR2(8));

    插入 oracle_connet_by_test 值（1、0、'AAA'）；
    插入 oracle_connet_by_test 值（2、0、'BBB'）；
    插入到 oracle_connet_by_test 值（3、1、'CCC'）；
    插入到 oracle_connet_by_test 值（4、2、'DDD'）；
    插入到 oracle_connet_by_test 值（5、1、'EEE'）；
    插入 oracle_connet_by_test 值（6、3、'FFF'）；
    插入 oracle_connet_by_test 值（7、3、'GGG'）；
    犯罪;

```

2 当我运行这个脚本时，输出将是

```
    SQL> 选择级别，
      2 ITEM_ID，
      3 PARENT_ID, LPAD(' ', 4 * (LEVEL - 1)) || ITEM_DESC 作为 ITEM_DESC
      4 来自 ORACLE_CONNET_BY_TEST
      5 以 parent_Id = 0 开始
      6 按之前的 ITEM_ID 连接 = PARENT_ID
      7;

         LEVEL ITEM_ID PARENT_ID ITEM_DESC
    ---------- ---------- ---------- ------------
             1 1 0 AAA
             2 3 1 CCC
             3 6 3 FFF
             3 7 3
             2 5 1 电子电气设备
             1 2 0 BBB
             2 4 2 DDD

```

3 问题：如果我想要这个结果，我应该如何编写代码？

```
         LEVEL ITEM_ID PARENT_ID ITEM_DESC SUPER_ID
    ---------- ---------- ---------- ---- ---- ------
             1 1 0 AAA 1
             2 3 1 CCC 1
             3 6 3 FFF 1
             3 7 3 GGG 1
             2 5 1 电子电气设备 1
             1 2 0 血脑屏障 2
             2 4 2 DDD 2

```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T11:28:11.147

使用 connect_by_root：

```
SELECT LEVEL,
           ITEM_ID,
           PARENT_ID, LPAD(' ', 4 * (LEVEL - 1)) || ITEM_DESC AS ITEM_DESC
           , connect_by_root item_id  AS SUPER_ID
      FROM ORACLE_CONNET_BY_TEST
     START WITH parent_Id = 0
    CONNECT BY PRIOR ITEM_ID = PARENT_ID
    ; 
```

# ios - 代码行随机触发 dispatch_async

> ID：11559616
> 
> 赞同：1
> 
> 时间：2012-07-19T11:11:54.220
> 
> 标签：ios, grand-central-dispatch

在我的 secondView 我这样做：

```
-(void)viewDidDisappear:(BOOL)animated
{
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);

    dbq = [[dbqueries alloc] init];

    [[NSNotificationCenter defaultCenter] postNotificationName:@"abc" object:nil];
    //disabling a button and turning a progressView in the mainView on

    dispatch_async(queue, ^{
        //WORK
    });
} 
```

该通知禁用一个按钮并导致 mainView 上的 progressView（在 progressView 中有一个 ActivityIndi​​cator）启动。在完成工作的区域中，一个方法被调用 3 到 6 次，如果它们都完成了，我会向 mainView 发送另一个通知以启用按钮并停止 progressView。现在奇怪的是，按钮在正确的时间启用，但 progressView 在几秒钟后随机停止

```
- (void)enableStartButton
{
    NSLog(@"enableStartButton");

    self.startARButton.enabled = YES;
    [self.progressView setHidden:YES];

    [[self.progressView.subviews objectAtIndex:0] stopAnimating];
} 
```

我真的不知道这里发生了什么，提前谢谢！

# salesforce - 无法将组件属性与控制器绑定

> ID：11559619
> 
> 赞同：5
> 
> 时间：2012-07-19T11:12:23.190
> 
> 标签：salesforce, apex-code, visualforce

我正在尝试开发一个从视觉力页面获取属性的视觉力自定义组件。我需要在控制器的构造函数中访问该属性，以便我可以从数据库中获取一些记录，并且我需要在组件中显示这些记录。但问题是我没有在控制器中获得属性值。

请参阅下面的代码以清楚地了解问题..

控制器 ：

```
public with sharing class AdditionalQuestionController {
    public String CRFType {get;set;}
    public AdditionalQuestionController () {
        system.debug('CRFType : '+CRFType);
        List<AdditoinalQuestion__c> lstAddQues = [Select AddQues__c from AdditoinalQuestion__c wehre CRFType = :CRFType];
        system.debug('lstAddQue : '+lstAddQue);
    }
} 
```

零件 ：

```
<apex:component controller="AdditionalQuestionController" allowDML="true">
    <apex:attribute name="CRFType" description="This is CRF Type."  type="String" required="true" assignTo="{!CRFType}" />
        <apex:repeat value="{!lstAddQue}" var="que">
            {!que}<br />
        </apex:repeat>
</apex:component> 
```

视觉力量页面：

```
 <apex:page >
    <c:AdditionalQuestionComponent CRFType="STE" />
</apex:page> 
```

谢谢，维维克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T13:06:13.563

我相信这里的问题是您期望成员变量在构造函数中具有值 - 障碍是正在构造类的实例！它尚不存在，因此无法预先为非静态成员变量赋予值。

不要在构造函数中进行查询，而是指定自己的 getter`lstAddQue`并在需要数据时在其中进行查询。当然，您可能希望缓存该值，以便查询不是每次都运行，但从看起来与此处无关的事物来看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:04:53.723

不幸的是，VF 组件中的属性上的 Setter 方法似乎在构造函数返回后被调用。这是您的控制器的另一种解决方案，它使用 getter 方法来填充您的列表（将在您的 CRFType 成员变量设置后调用）：

```
public with sharing class AdditionalQuestionController {
    public String CRFType {set;}
    public AdditionalQuestionController () {
        system.debug('CRFType : '+CRFType); // this will be null in the constructor
    }
    public List<AdditoinalQuestion__c> getLstAddQue() {
        system.debug('CRFType : '+CRFType); // this will now be set
        List<AdditoinalQuestion__c> lstAddQues = [Select AddQues__c from AdditoinalQuestion__c wehre CRFType = :CRFType];
        system.debug('lstAddQue : '+lstAddQue);
        return lstAddQue;
    }
} 
```

# php - eregi_replace 到 preg_replace

> ID：11559623
> 
> 赞同：0
> 
> 时间：2012-07-19T11:12:32.040
> 
> 标签：php, regex

我正在尝试使用 preg_replace() 修复已弃用的函数 eregi_replace()。

```
$text = eregi_replace('(((f|ht){1}tp://)[-a-zA-Z0-9@:%_+.~#?&//=]+)', '<a target="_blank" class="clickable" href="\1">\1</a>', $text);

$text = eregi_replace('([[:space:]()[{}])(www.[-a-zA-Z0-9@:%_+.~#?&//=]+)', '\1<a target="_blank" class="clickable" href="http://\2">\2</a>', $text); 
```

我怎样才能让这些与 preg_replace() 一起工作？我在这里过头了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:41:41.043

您只需更改函数的名称并将表达式包装在分隔符中。对于不区分大小写的函数`eregi()`and `eregi_replace()`，在最后一个分隔符之后放置一个`i`修饰符：

```
ereg('...', foo) // preg_match('/.../', foo)
eregi('...', foo) // preg_match('/.../i', foo)
ereg_replace('...', foo) // preg_replace('/.../', foo)
eregi_replace('...', foo) // preg_replace('/.../i', foo) 
```

我在`/`这里使用了定界符，但您需要使用最有意义且不会出现在您的表达式本身中的任何定界符。

绝大多数（如果不是全部）常用表达将是直接结转，无需转换。我已经转换了几个大型项目并且从未遇到过我必须实际修改表达式的情况，但这并不是说没有一些差异。

# php - php数组和循环

> ID：11559625
> 
> 赞同：0
> 
> 时间：2012-07-19T11:12:37.287
> 
> 标签：php

我有一个在 for 循环中运行的数组

例如

```
Array
(
    [0] => xyz
    [1] => abc
)

Array
(
    [0] => xyz
    [1] => abc
)

Array
(
    [0] => xyz.com
    [1] => xyz.co.uk
    [2] => xyz-west.co.uk
    [3] => xyz.com
    [4] => xyz.co.uk
    [5] => xyz.com
    [6] => xyz.com
)

Array
(
    [0] => xyz.com
    [1] => xyz.ca
    [2] => xyz.com
    [3] => xyz.com
    [4] => xyz.com
    [5] => xyz.com
    [6] => xyz.com
    [7] => xyz.com
    [8] => xyz
) 
```

现在我想知道是否有办法获得具有最大数组计数的前五个数组（即其中包含最大元素）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:19:13.787

首先使用[count函数](http://php.net/manual/en/function.count.php)统计所有数组的数组元素，
然后将所有计数保存在一个数组中，并使用[函数](http://php.net/manual/en/function.sort.php)对其进行排序，然后您将获得前5名。 .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:14:45.500

我认为您正在寻找的功能是

```
$myElements=count($myArray); 
```

您可以将其弹出一个循环以查看哪个具有最多的元素。

如果您有多个维度的数组，您仍然可以获得其中所有元素的计数，如下所示：

```
$myElements=count($myArray, COUNT_RECURSIVE); 
```

这将计算所有元素，而不仅仅是第一级。

# r - 加速 RData 加载

> ID：11559628
> 
> 赞同：32
> 
> 时间：2012-07-19T11:12:42.390
> 
> 标签：r, io

我已经检查了几个相关的问题，例如这个

[如何将数据快速加载到 R 中？](https://stackoverflow.com/questions/4756989/how-to-load-data-quickly-into-r)

我引用了评价最高的答案的特定部分

> 这取决于您要做什么以及如何进一步处理数据。在任何情况下，从二进制 R 对象加载总是会更快，前提是您总是需要相同的数据集。这里的**限制速度是硬盘驱动器的速度，而不是 R**。二进制形式是工作空间中数据框的内部表示，因此不再需要转换

我真的是这么想的。然而，生活是关于实验的。我有一个包含 igraph 对象的 1.22 GB 文件。也就是说，我认为我在这里找到的内容与对象类无关，主要是因为您甚至可以在调用“库”之前加载（'file.RData'）。

该服务器中的磁盘非常酷。正如您可以检查阅读时间到内存

```
user@machine data$ pv mygraph.RData > /dev/null
1.22GB 0:00:03 [ 384MB/s] [==================================>] 100% ` 
```

但是，当我从 R 加载这些数据时

```
>system.time(load('mygraph.RData'))
   user  system   elapsed 
178.533  16.490   202.662 
```

所以加载 *.RData 文件似乎比磁盘限制慢 60 倍，这应该意味着 R在“加载”时实际上**做了一些事情。**

使用不同硬件的不同R版本我也有同样的感觉，只是这次我有耐心做基准测试（主要是因为有这么酷的磁盘存储，加载实际需要多长时间太可怕了）

关于如何克服这个问题的任何想法？

* * *

在答案中的想法之后

```
save(g,file="test.RData",compress=F) 
```

现在该文件为 3.1GB，而之前为 1.22GB。就我而言，加载解压缩要快一些（到目前为止，磁盘不是我的瓶颈）

```
> system.time(load('test.RData'))
user  system elapsed 
126.254   2.701 128.974 
```

将未压缩的文件读入内存大约需要 12 秒，所以我确认大部分时间都花在了设置环境上

我会带着 RDS 结果回来，听起来很有趣

* * *

正如所承诺的那样，我们在这里

```
system.time(saveRDS(g,file="test2.RData",compress=F))
user  system elapsed 
7.714   2.820  18.112 
```

我得到一个 3.1GB 就像“保存”未压缩一样，虽然 md5sum 不同，可能是因为`save`还存储了对象名称

现在读...

```
> system.time(a<-readRDS('test2.RData'))
user  system elapsed 
41.902   2.166  44.077 
```

因此结合这两种想法（解压缩和 RDS）运行速度快 5 倍。感谢您的贡献！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T11:40:02.153

`save`默认情况下会压缩，因此解压缩文件需要额外的时间。然后将较大的文件加载到内存中需要更长的时间。您的`pv`示例只是将压缩数据复制到内存，这对您来说不是很有用。;-)

更新：

我测试了我的理论，但它是不正确的（至少在我的 Windows XP 机器上具有 3.3Ghz CPU 和 7200RPM HDD）。加载压缩文件更快（可能是因为它减少了磁盘 I/O）。

额外的时间花在`RestoreToEnv`(in `saveload.c`) 和/或`R_Unserialize`(in `serialize.c`) 上。因此，您可以通过更改这些文件来加快加载速度，或者可以使用`saveRDS`单独保存对象，`myGraph.RData`然后以某种方式`loadRDS`跨多个 R 进程将数据加载到共享内存中......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T11:42:51.840

对于这么大的变量，我怀疑大部分时间都花在了内部 C 代码中（[http://svn.r-project.org/R/trunk/src/main/saveload.c](http://svn.r-project.org/R/trunk/src/main/saveload.c)）。您可以运行一些分析，看看我是否正确。（函数中的所有 R 代码`load`都是检查您的文件是否为非空且未损坏。

除了将变量读入内存之外，它们（除其他外）还需要存储在 R 环境中。

在加载变量时获得大幅加速的唯一明显方法是以并行方式重写代码以允许同时加载变量。这大概需要大量重写 R 的内部结构，所以不要为这样的功能屏住呼吸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-12T16:54:17.213

RData 文件加载需要一段时间的主要原因是解压缩步骤是单线程的。

fastSave R 包允许使用并行工具来保存和恢复 R 会话：

[https://github.com/barkasn/fastSave](https://github.com/barkasn/fastSave)

但它只适用于 UNIX（尽管您应该仍然能够在其他平台上打开文件）。

# javascript - 如何通过 JQuery 迭代此文本框

> ID：11559629
> 
> 赞同：0
> 
> 时间：2012-07-19T11:12:43.097
> 
> 标签：javascript, jquery, html

嗨，我有以下 html 代码

```
<td>
  Question1
   <input type="radio" value="1" name="1" id="1_1">Agree
   <input type="radio" value="2" name="1" id="1_2">Dis-Agree
  <input type="text" size="30" name="1[answer]" id="1_answer" class="answer">
</td>
<td>
  Question2
   <input type="radio" value="1" name="2" id="2_1">Agree
   <input type="radio" value="2" name="2" id="2_2">Dis-Agree
  <input type="text" size="30" name="2[answer]" id="2_answer" class="answer">
</td>
<input type="text" size="30" name="feedback[answers]" id="feedback_answers"> 
```

我想做的是

*   当用户单击单选按钮时，它会获取选定的值并在文本框中与问题一起设置（例如：1_answer）
*   同时我想将相同的值附加到“feedback_answers”文本框中

我设法迈出了第一步，但我无法从 Ex: 1_answer 文本框到 'feedback_answers' 文本框中获取值，以下是我的 JQuery 代码

```
$(document).ready(function() {

    $("input:radio[type=radio]").click(function() {
       id = $(this).attr('id');
       ids = id.split("_")
       question_id = ids[0]
       answer_id = ids[1]
       $('#' + question_id + '_answer').val(answer_id);
       $(".answer").each(function(index, value){
         alert(this.val)
       });  
}); 
```

有人可以帮我吗，我想遍历所有“asnwer”文本框（例如：1_answer）并将它们全部放到“feedback_answers”文本框中。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:22:44.627

试试这个

```
$(document).ready(function() {
    var feedback_answers = $("#feedback_answers");
    $("input[type=radio]").click(function() {
       var id = $(this).attr('id');
       var ids = id.split("_")
       var question_id = ids[0]
       var answer_id = ids[1];
       var answers = [];
       $('#' + question_id + '_answer').val(answer_id);
       $(".answer").each(function(index, value){
          //alert($(this).val())
          answers.push($(this).val());
       });  
       feedback_answers.val(answers.join());
}); 
```

# ios - 有没有办法查看构建中包含哪些 UDID？

> ID：11559637
> 
> 赞同：29
> 
> 时间：2012-07-19T11:13:18.627
> 
> 标签：ios, ipa, udid

我正在寻找一种方法来验证 IPA 或 mobileprovision 文件，以查看在我分发应用程序进行 beta 测试之前是否已添加所有测试设备。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-19T11:21:33.567

`.mobileprovision`在文本编辑器中打开文件。包含的设备将列在 plist 部分的 ProvisionedDevices 元素下。

如果您使用 testflight，它会自动将配置文件中的设备与您注册的测试人员进行比较。

可以通过复制文件、将其重命名为`.zip`并解压缩来检查 IPA 的内容。在里面你会找到`.mobileprovision`文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-11T16:06:03.110

我使用[http://thebetafamily.com/supersend/](http://thebetafamily.com/supersend/)查看我的 iOS 应用程序中包含哪些 UDID，这也是将 ipa 发送给我的客户的一种简单方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-07T15:08:54.083

[Diawi](https://www.diawi.com/)让您分发 IPA 文件并查看其中配置的设备。

1.  上传 IPA 文件。
2.  上传文件后打开 Diawi 提供的链接。
3.  点击同伴
4.  单击已配置的设备
5.  查看 UDID 列表

现在您的 IPA 文件已准备好分发，您可以确定谁可以使用它。

[![第2步](../Images/9307f063361d100343e3f8678d4e8b23.png)](https://i.stack.imgur.com/Gr295.png)

[![在此处输入图像描述](../Images/838c1ab542a38503c1e2f3960020faa0.png)](https://i.stack.imgur.com/bLZ5R.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-27T12:28:19.493

> 1.  获取 iPA/构建文件。右键单击并使用存档实用程序打开。
>     
>     
> 2.  将创建新目录 Payload。
>     
>     
> 3.  打开有效载荷。
>     
>     
> 4.  包文件应该有 APP 名称。
>     
>     
> 5.  右键单击文件，选择“显示包内容”。
>     
>     
> 6.  在此文件夹中，您可以归档一个名为“embedded.mobileprovision”的文件。使用 Textedit 应用程序打开此文件。或在终端中使用 vim 编辑器打开它。
>     
>     
> 7.  复制您的 UDID 并在 embedded.mobileprovision 文件中的 UDID 列表中进行搜索。

[遵循本教程：](https://medium.com/@abhimuralidharan/ios-how-to-check-if-an-ipa-file-is-properly-created-for-a-udid-46a44ab7c206)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-01T13:23:25.260

一个命令：

```
zipgrep 00008020-000D15C4343200E2 MyApp.ipa 
```

输出：

```
Payload/MyApp.app/embedded.mobileprovision:Binary file (standard input) matches 
```

TL;博士：

*   IPA 文件是一个 zip 文件，其中包含`Payload/MyApp.app/embedded.mobileprovision` 在 MacOS 上工作的文件，我没有在其他操作系统上测试

参考：

*   它基于接受的答案[https://stackoverflow.com/a/11559771/1489446](https://stackoverflow.com/a/11559771/1489446)

# iphone - 在文档目录中创建多个 Plist 文件..？

> ID：11559639
> 
> 赞同：0
> 
> 时间：2012-07-19T11:13:20.760
> 
> 标签：iphone, objective-c, ios5, plist

我正在开发一个包含 5 个`plist`文件的应用程序。我想将所有这些文件保存在文档目录中。因为我想动态地向它们添加数据。我正在使用创建一个 plist 路径

从中检索数据`plist`

```
NSMutableArray *pathsArray = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docpath = [pathsArray objectAtIndex:0];
NSString *scorePlistPath = [docpath stringByAppendingPathComponent:@"highScores.plist"];

if (![[NSFileManager defaultManager] fileExistsAtPath:scorePlistPath]) {
    scorePlistPath = [[NSBundle mainBundle] pathForResource:@"highScores" ofType:@"plist"];
}
highScoreArray = [[NSMutableArray alloc]initWithContentsOfFile:scorePlistPath]; 
```

将数据写入`plist`

```
scorePlistPath = [docpath stringByAppendingPathComponent:@"highScores.plist"];

[highScoreArray writeToFile:scorePlistPath atomically:YES]; 
```

现在我想`plists`在文档目录中再添加一个.. 不在 Bundle 中。我怎样才能做到这一点..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:03:53.503

以编程方式，您**无法**将文件添加到应用程序包中，因为您没有权限，并且从`Documents`文件夹中保存或加载文件并不是什么大问题：

首先，您需要定义文件所在**的 URL ：**

```
NSString *_filename = @"myOwn.plist";
NSURL *_resourceURL = [[[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject] URLByAppendingPathComponent:_fileName]; 
```

然后你可以**保存文件**：

```
NSArray *_array = // your array as you defined
[_array writeToURL:_resourceURL atomically:true]; 
```

并且**可以随时再次加载文件**：

```
NSData *_plistData = [NSData dataWithContentsOfFile:[_resourceURL path]];
NSArray *_loadedArray = [NSPropertyListSerialization propertyListFromData:_plistData mutabilityOption:NSPropertyListImmutable format:nil errorDescription:nil]; // the option or the format parameter might be set for your special wishes, so check the documentation, please 
```

和*中提琴*，它完成了。

**更新#1**

此代码在任何带有 的**真实**设备上都可以完美运行`iOS4.3+`，它从未在模拟器上进行过测试。

# android - 会话管理是android调用soap webservices

> ID：11559644
> 
> 赞同：0
> 
> 时间：2012-07-19T11:13:31.653
> 
> 标签：android, session-management

嗨，我开发了一个名为soap webservices的登录表单。它对我来说完全成功了……但是现在我实现了这一部分。在这里我将进行会话管理……如何在dis登录表单中进行会话管理。请指导我.

dis 是我的 android 编码部分：

```
 package com.soap;
  import org.ksoap2.SoapEnvelope;
  import org.ksoap2.serialization.PropertyInfo;
  import org.ksoap2.serialization.SoapObject;
  import org.ksoap2.serialization.SoapPrimitive;
  import org.ksoap2.serialization.SoapSerializationEnvelope;
  import org.ksoap2.transport.HttpTransportSE;

   import android.app.Activity;
   import android.content.Intent;
   import android.os.Bundle;
   import android.view.View;
   import android.widget.Button;
   import android.widget.CheckBox;
   import android.widget.EditText;
   import android.widget.TextView;
   import android.content.SharedPreferences;
   import android.content.Context;
   public class Login extends Activity {
   private static final String SPF_NAME = "vidslogin";
   private static final String USERNAME = "username";
   private static final String PASSWORD = "password";

   EditText userName,userPassword;
   private final String NAMESPACE = "http://ws.userlogin.com";
   private final String URL = "http://192.168.1.168:8085/LoginSoap/services/Login?wsdl";
   private final String SOAP_ACTION = "http://ws.userlogin.com/authentication";
   private final String METHOD_NAME = "authentication";
   /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.login);

 Button logout = (Button) findViewById(R.id.btn_logout);
  logout.setOnClickListener(new View.OnClickListener() {

 public void onClick(View v) {
 // Switching to Register screen
  Intent i = new Intent(getApplicationContext(), Login.class);
  startActivity(i);
  }
  });

 Button login = (Button) findViewById(R.id.btn_login);
 login.setOnClickListener(new View.OnClickListener() {

 public void onClick(View arg0) {
  loginAction();

     }
     });
    }

   private void loginAction(){
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    EditText userName = (EditText) findViewById(R.id.tf_userName);
    String user_Name = userName.getText().toString();
    EditText userPassword = (EditText) findViewById(R.id.tf_password);
    String user_Password = userPassword.getText().toString();

  //Pass value for userName variable of the web service
    PropertyInfo unameProp =new PropertyInfo();
    unameProp.setName("userName");//Define the variable name in the web service method
    unameProp.setValue(user_Name);//set value for userName variable
    unameProp.setType(String.class);//Define the type of the variable
    request.addProperty(unameProp);//Pass properties to the variable

  //Pass value for Password variable of the web service
    PropertyInfo passwordProp =new PropertyInfo();
    passwordProp.setName("password");
    passwordProp.setValue(user_Password);
    passwordProp.setType(String.class);
    request.addProperty(passwordProp);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try{
        androidHttpTransport.call(SOAP_ACTION, envelope);
           SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

           TextView result = (TextView) findViewById(R.id.tv_status);
           result.setText(response.toString());

    }
    catch(Exception e){

    }
   }

    } 
```

指导我如何在 android 应用程序中进行会话。请给我一些想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:53:52.507

有多种实现方式`Session Management`。我建议你应该尝试使用`Cookies`

新`ksoap`版本（我猜是 ksoap 2.5.4）内置了 cookie 支持，使您能够将 cookie 传入和传出应用程序。

**细节**

该类`HttpTransportSE`公开了方法调用，除了所需的 SOAP 参数之外，它还接受`HeaderProperty`实例列表。它还返回一个like List。这提供了向请求附加附加标头并查看返回的标头的能力。由于 cookie 只是这些标头之一，因此可以使用此工具来发送和接收 cookie。

Cookie 简单地从 Web 服务接收并作为 HTTP 前导中的标头发送到 Web 服务。为了在 ksoap2-android 中使用 cookie，需要保存所有返回的 cookie，并在随后调用 Web 服务时返回它们。

**例子**

```
 List respHeaders = android_http.call(SOAP_ACTION, envelope2, reqHeaders); 
  for(int ix=0; ix<respHeaders.size(); ix++) { 
  HeaderProperty hp = (HeaderProperty)respHeaders.get(ix); 
  System.out.println("Header"+ix+"="+hp.getKey()+" / "+hp.getValue()); 
```

因此，对于会话管理，您只需保存 Cookie 并在请求中设置它们。

这是一个显示[如何保存cookie并将cookie返回到Web服务的问题](https://stackoverflow.com/questions/6381491/how-to-save-and-return-cookies-to-the-web-service)

信息来源：[ksoap2-android和cookies](http://code.google.com/p/ksoap2-android/wiki/Cookies)

# javascript - 单击另一个元素时选择（展开）下拉菜单

> ID：11559646
> 
> 赞同：5
> 
> 时间：2012-07-19T11:13:37.267
> 
> 标签：javascript, jquery

我有一个 div 包含一个选择菜单和另一个元素（*.dropArrow*）。

我想做的是在单击 .dropArrow 时选择菜单。

这是我到目前为止尝试过但没有成功的jquery...

```
$(".dropArrow").live('click', function() {
    $(this).siblings("select").click();
}); 
```

HTML

```
<div class="selectContainer selectTest" style="width: 305px;">
    <select id="selectTest">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
    </select>
    <span class="dropArrow">^</span>
</div> 
```

我猜这是错误的 .click() 部分，因为我可以将其更改为 .hide() 之类的东西并且它工作正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T11:54:24.280

我让它工作，只使用 CSS，没有 Javascript。但是我不认为这个解决方案是 100% 完美的。

亲自查看：[jsfiddle.net/Luuk/35xdx/](http://jsfiddle.net/Luuk/35xdx/1/)

此外，[这篇文章](https://stackoverflow.com/questions/360431/can-i-open-a-dropdownlist-using-jquery)还解释了有关使用 Javascript 激活选择元素的更多信息

# php - 如何从 URL 中删除 index.php？

> ID：11559648
> 
> 赞同：0
> 
> 时间：2012-07-19T11:13:44.580
> 
> 标签：php, mod-rewrite, symfony1, url-rewriting

我正在服务器上配置一个项目，该项目是由其他一些开发人员使用 Symfony 框架构建的。该项目几乎已配置，除了它在 url 中显示**index.php 。**它没有显示在站点运行正常的先前服务器中。

我检查了**settings.yml**文件，它的**no_script_name**设置为**on**。我还检查了 Apache 服务器，并且已经启用了重写模块。

.htaccess 文件的代码位于此链接 [http://pastebin.com/BhquQsk7](http://pastebin.com/BhquQsk7)

它仍然没有从 URL 中删除**index.php 。**我还希望在后期从 URL 中删除文件夹**web ，但现在，如果这个问题得到解决，那将非常有帮助。**

提前感谢所有帮助:)

# android - .xml 布局文件无法正常工作，因为 身体

> ID：11559653
> 
> 赞同：1
> 
> 时间：2012-07-19T11:14:03.990
> 
> 标签：android, xml, file, layout

我正在研究我在互联网上找到的一个非常简单的示例，但是我的 main.xml 布局文件不起作用。

当我在 main.xml 添加正文时，它无法显示任何东西。

任何帮助表示赞赏:)

这是 main.xml 文件。

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="schemas.android.com/apk/res/android"; android:orientation="vertical" android:layout_width="fill_parent" android:layout_height="fill_parent"> 
<EditText android:id="@+id/myEditText" android:layout_width="fill_parent" android:layout_height="wrap_content" android:text="@string/new_to_do_item" android:hint="@string/hint_msg" /> 
<ListView android:id="@+id/myListView" android:layout_width="fill_parent" android:layout_height="wrap_content" /> 
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:25:10.010

利用`<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"`

**代替**

```
<LinearLayout xmlns:android="schemas.android.com/apk/res/android"; 
```

**尝试这个...**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/myEditText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/hint_msg"
        android:text="@string/new_to_do_item" />

    <ListView
        android:id="@+id/myListView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:37:11.357

```
<LinearLayout xmlns:android="schemas.android.com/apk/res/android"; 
android:orientation="vertical" 
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
> 
```

至

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
android:orientation="vertical" 
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
> 
```

为我工作

编辑：慢^^

编辑2：

添加一些有用的东西：您必须将 XML 或 HTML 标记标记为“代码示例”，然后它们会正常显示

编辑3：

[加载布局时出现异常：java.util.LinkedHashMap.eldest()Ljava/util/Map$Entry;](https://stackoverflow.com/questions/11275754/exception-in-loading-layout-java-util-linkedhashmap-eldestljava-util-mapentr)

第一个答案似乎对某些人有用

# blackberry - 如何更改黑莓浏览器内容字段的颜色

> ID：11559657
> 
> 赞同：0
> 
> 时间：2012-07-19T11:14:14.080
> 
> 标签：blackberry

我在 title 中附加位图字段，在 status 中附加位图字段。

我添加了一个包含浏览器内容的字段

```
browserContent = BE._renderingSession.getBrowserContent(connection, this, e);

if (browserContent != null) {

     Field field = browserContent.getDisplayableContent();

     if (field != null) {
          synchronized (Application.getEventLock()) {
               add(field);
          }
     }
} 
```

当浏览器内容加载它们的颜色是黑色并且加载后它们很好。

我的问题是我不希望它们的颜色是黑色的，......加载时应该是白色的......

# javascript - 隐藏浏览器滚动条但将内容保留在其原始位置

> ID：11559658
> 
> 赞同：1
> 
> 时间：2012-07-19T11:14:32.507
> 
> 标签：javascript, jquery, html, css

我在[这里](http://jsfiddle.net/zDTnY/)有一个示例 html、查询、css 布局。当我点击隐藏链接然后它隐藏浏览器滚动条时它现在做了什么（这很好，我想要这个效果）。但是当滚动条消失时，p 标签中的内容或文本会向右延伸，这是我不想要的。如何隐藏滚动条并将所有内容保留在原始位置？

请在[此处查看我的代码](http://jsfiddle.net/zDTnY/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:22:07.423

将宽度设置为窗口宽度而不是 100%：

```
$("p").css("width", $(window).width()); 
```

[http://jsfiddle.net/zDTnY/5/](http://jsfiddle.net/zDTnY/5/)

# jsf-1.2 - JSPG0005E: 找不到 uri[http://myfaces.apache.org/tomahawk] 前缀 [x] 的 tld 文件

> ID：11559661
> 
> 赞同：0
> 
> 时间：2012-07-19T11:14:37.667
> 
> 标签：jsf-1.2, websphere-7, tomahawk, tld

我正在使用 jsf 1.2 和丰富的面孔 3.3.2。在 websphere 7 服务器上部署我的应用程序时，我收到以下错误

```
JSPG0227E: Exception caught while translating /pages/summary/summary.jsp:  
/pages/summary/summary.jsp(0,1) --> JSPG0005E: tld file could not be found for  
uri[http://myfaces.apache.org/tomahawk] prefix [x] 
```

这个错误的可能原因是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:40:31.950

行。问题是生产服务器中缺少 tomahawk12-1-1.jar 文件。复制它，它很干净。

# android - Adapter类中的Holder类

> ID：11559664
> 
> 赞同：8
> 
> 时间：2012-07-19T11:14:46.667
> 
> 标签：android, adapter

有一个简单的问题，在搜索后我想问为什么我们创建静态持有者类并在其中分配视图？请消除我的疑虑，这将对我有很大帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T11:41:28.443

您的代码可能会`findViewById()`在滚动期间频繁调用`ListView`，这会降低性能。即使适配器返回一个膨胀的视图进行回收，您仍然需要查找元素并更新它们。避免重复使用的一种方法`findViewById()`是使用**`"view holder"`**设计模式。

一个`ViewHolder`对象将每个组件视图存储在 Layout 的标签字段中，因此您可以立即访问它们而无需重复查找它们。首先，您需要创建一个类来保存您的确切视图集。

您可以阅读[Android 指南](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)以获取更多详细信息。

1.  因此，当您使用“View Holder”时，您可以轻松访问每个视图，而无需进行查找，从而节省宝贵的处理器周期。
2.  拥有一个`static inner class`视图可以大大提高性能

您还可以查看[为什么 Android 更喜欢静态类](https://stackoverflow.com/questions/3106912/why-does-android-prefer-static-classes)链接。

**一个更有趣的链接[ListView 的工作原理](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)**，在阅读了这篇博客之后，开发人员可以清楚地了解 LisView 的逻辑，以及为什么需要为 listView 实现内部静态类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T11:33:45.937

如果您了解 an 的`AdapterView`工作原理，答案也很简单。

An[`AdapterView`](http://developer.android.com/reference/android/widget/AdapterView.html)是一个视图，其子级由 确定[`Adapter`](http://developer.android.com/reference/android/widget/Adapter.html)。（`AdapterView`更具体地说，具体的实现，如`ListView`）包含比任何给定时间显示的信息更多的信息。为了优化内存消耗和性能，`Adapter`通常重用`View`代表单个项目的 s。因此，您的`View`对象数量少于相应的数据。

重用对象可以是`View`s 或的复杂层次结构`ViewGroups`。因此，如果您想`View`从该层次结构中查找单个对象，则需要依赖`findViewById()`方法，而当视图层次结构具有多个级别时，这将变得昂贵。因此，为了简单起见（也为了提高性能），我们使用了 View-Holder 模式，其中`View`我们感兴趣的单个对象被分配给一个静态内部类。

您可以参考 Lars Vogel 的[Android ListView 和 ListActivity - 教程](http://www.vogella.com/articles/AndroidListView/article.html#adapterperformance_hoder)了解更多关于 View-Holder 模式的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T11:29:12.090

这是一个优化点。如果没有 viewHolder，您每次都需要调用 findViewById 方法。使用 viewHolder，您只需调用一次。

带有 TextView 和 ImageView 的示例：

*   没有 ViewHolder：

    ```
    if (convertView == null) {
        convertView = mInflater.inflate(..., null);
    }
    //Following called each time
    TextView tv = (TextView)convertView.findViewById(...);
    ImageView iv = (ImageView)convertView.findViewById(...);

    tv.setText(...) 
    ```

*   使用 ViewHolder：

    ```
    if (convertView == null) {
        convertView = mInflater.inflate(..., null);
        holder = new ViewHolder();
        //called once
        holder.tv = (TextView) vi.findViewById(..);
        holder.iv = (ImageView) vi.findViewById(...);
        vi.setTag(holder);
    } else {
        holder = (ViewHolder) vi.getTag();
    }

    holder.tv.setText(...) 
    ```

# ajax - CakePHP 从视图中交叉发布到不同的控制器

> ID：11559665
> 
> 赞同：0
> 
> 时间：2012-07-19T11:14:50.077
> 
> 标签：ajax, cakephp

我有一个“工作”控制器，允许用户相互分配任务/工作。这些工作中的每一个都有一个“客户”，它是一个外键。

在作业控制器的“添加”视图中，我添加了一个复选框和另一个字段，以允许用户从“添加”作业表单中添加客户端。基本上，我需要一个 ajax 请求，将输入的客户端名称发送到“客户端”控制器，然后控制器会将新客户端添加到数据库中，然后返回一个新的客户端列表，以便我更新下拉列表列表。

我不知道从哪里开始，因为我之前没有在 PHP 环境中使用过 AJAX，而且我不确定应该如何构建它，或者应该如何开始处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:34:41.760

我已经提出了一个解决方案。它不是很优雅，但它确实有效。

在我的视图底部：

```
echo $this->Html->scriptBlock(
            'function sendAjaxRequest(){
            $.ajax({
               type: "POST",
                url: "' . $this->Html->url(array('controller' => 'clients', 'action' => 'add_external')) . '",
                data: "name="+$(\'#JobNewClientName\').val(),
                success: function(msg){
                    //parse and sort the entries alphabetically
                    msg = $.parseJSON(msg);
                    var values = [];
                    for(var i in msg) {
                        values.push({ key: i, value: msg[i] });
                    }
                    values.sort(function(a, b) {return a.value.toLowerCase().localeCompare(b.value.toLowerCase())});
                    var str = values.map(function (kvp) { return kvp.value; }).join(\'\n\');
                    //remake the selectbox options
                    var options = \'<option value=""></option>\';
                    $.each(values, function(i){
                        options += \'<option value="\'+values[i].key+\'">\'+values[i].value+\'</option>\';
                    });        
                    $(\'#JobClientId\').html(options);
                }
            });
     }'); 
```

控制器：

```
function add_external() {
        $this->autoRender = false;        
        $this->Client->create();
        $this->Client->set('name', $_POST['name']);
        $this->Client->save();
        echo json_encode($this->Client->find('list', array('order' => array('Client.name' => 'ASC'))));     
    } 
```

本质上，该`add_external()`函数从 ajax 中获取一个发布的名称并将其添加到数据库中。然后`json_encode`是所有客户。

然后这个 JSON 对象在 javascript 成功语句中被解析和排序，这个排序保留了控制器定义的顺序，即按字母顺序按值（不是键）。

接下来，我可以创建一个全新的`options`变量，其中包含选择框所需的相同标记。然后我需要做的就是把它们关掉。

如果有人能想到一个更优雅的解决方案，我很乐意授予他们接受。

# python - Scrapy：在 2 个蜘蛛之间传递数据

> ID：11559666
> 
> 赞同：1
> 
> 时间：2012-07-19T11:15:07.513
> 
> 标签：python, web-scraping, scrapy

我需要创建一个从网站抓取一些数据的蜘蛛。部分数据是外部 URL。

我已经创建了从根站点抓取数据的蜘蛛，现在我想为外部网页编写蜘蛛。

我正在考虑创建一个使用 SgmlLinkExtractor 跟踪每个外部网页中的某些特定链接的爬虫。

将 start_url 列表传达给第二个蜘蛛的推荐方法是什么？

我的想法是为项目生成一个 json 文件并读取第二个蜘蛛的 start_requests 中的属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:27:58.677

> 我已经创建了从根站点抓取数据的蜘蛛，现在我想为外部网页编写蜘蛛。

将这些外部页面 url 保存到数据库中。

> 将 start_url 列表传达给第二个蜘蛛的推荐方法是什么？

覆盖[`BaseSpider.start_requests`](http://doc.scrapy.org/en/latest/topics/spiders.html#scrapy.spider.BaseSpider.start_requests)您的其他蜘蛛并从您从数据库获得的 url 创建请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T18:54:30.033

这个问题很模糊，但这是一种方法（？？）

```
class PracticeSpider(BaseSpider):
    name = "project_name"
    allowed_domains = ["my_domain.org"]

    def start_requests(self):
        start_urls = "The First Page URL"
        return [Request(start_urls, callback=self.parse)]

    def parse(self, response):
        # parse the first page
        yield self.pageParser(response)

        # grab the external URLs you want to follow
        ext_urls = ...

        for url in ext_urls:
            yield Request(url, callback=self.pageParser)

    def pageParser(self, response):
        # parse the page
        return items 
```

Request 中还有一个**meta={}**属性可能会有所帮助。

# c# - 混淆哈希表的浅表副本

> ID：11559667
> 
> 赞同：4
> 
> 时间：2012-07-19T11:15:10.243
> 
> 标签：c#, asp.net, hashtable

我遇到了一些关于哈希表的浅拷贝和深拷贝的文章/解释，我读的越多，我就越困惑。

```
Hashtable ht = new Hashtable();
ht.Add("1", "hello");

Hashtable ht2 = new Hashtable();
ht2 = ht;                          // case1: is this shallow copy?
ht2["1"] = "H2";

Hashtable ht3 = new Hashtable(ht); // case2: is this shallow copy?
ht3["1"] = "H3";

Hashtable ht4 = new Hashtable();
ht4 = (Hashtable)ht.Clone();       // case3: is this shallow copy?
ht4["1"] = "H4"; 
```

*   案例1：结果，ht内容变化与ht2相同。
*   Case2：结果，ht内容与ht3不同。
*   Case3：结果，ht内容与ht4不同。

如果Case2和Case3是浅拷贝，结果不应该和Case1一样吗？

List、ArrayList 等也会发生这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:17:47.837

在案例 1 中，两者`ht2`和都`ht`指的是 的同一个实例`Hashtable`。

在情况 2 和 3 中，`ht3`并`ht4`引用通过复制原始条目创建的*不同对象。*`Hashtable`

请注意，即使进行“深度”复制（创建新映射），您仍然会复制引用。例如：

```
var original = new Dictionary<int, StringBuilder>();
original[10] = new StringBuilder();

var copy = new Dictoinary<int, StringBuilder>(original);
copy[20] = new StringBuilder();

// We have two different maps...
Assert.IsFalse(original.ContainsKey(20));

// But they both refer to a single StringBuilder in the entry for 10...
copy[10].Append("Foo");
Assert.AreEqual("Foo", original[10].ToString()); 
```

# stylus - 如何在手写笔中添加条件！重要

> ID：11559672
> 
> 赞同：4
> 
> 时间：2012-07-19T11:15:11.653
> 
> 标签：stylus

我想在`!important`定义中添加一个条件字符串，*而不必重复这些行*......到目前为止我最接近的是：

```
fontSize(size, isImportant = false)
  importantString=""
  if isImportant
    importantString = !important

  font-size unit(size, 'px') importantString
  font-size unit(size / 10, 'rem') importantString 
```

这不起作用，因为`importantString=""`实际上 inserts ，如果未定义，则`""`删除分配实际上会打印。`importantString`

最好的方法是：

```
font-size unit(size, 'px') if isImportant !important 
```

但我想这是不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T20:29:32.287

回答你的问题——你可以`unquote()`在引号周围使用`importantString`，所以如果没有 ，它不会输出任何内容`important`。

看起来像这样：

```
fontSize(size, isImportant = false)
  importantString = isImportant ? !important : unquote("")

  font-size unit(size, 'px') importantString
  font-size unit(size / 10, 'rem') importantString 
```

然而！如果你问我，我建议你做*一些不同*的事情——像这样做一个透明的 mixin `font-size`：

```
font-size(size, args...)
  $rem_ratio = 10 if not $rem_ratio is defined
  if unit(size) == 'rem'
    font-size unit(size * $rem_ratio, 'px') args
    font-size size args
  else if unit(size) == ''
    font-size unit(size, 'px') args
    font-size unit(size / $rem_ratio, 'rem') args
  else
    font-size arguments 
```

可以像使用泛型一样透明地使用该 mixin `font-size`。更重要的是，有两种使用方法：

```
.foo
  font-size 1rem

.bar
  font-size 10 
```

您可以在此处使用`rem`单位，将其转换为后备中的像素，或使用无单位数字，将其转换为您希望它出现在您的问题中。`rem`并且重要性将被保留，您甚至可以使用`$rem_ratio`变量来声明一个像素中有多少像素。

享受！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:37:43.943

可能有一个更清洁的解决方案，但我会选择类似的东西：

```
fontSize(size, isImportant = false)
  if isImportant
    font-size unit(size, 'px') !important
    font-size unit(size / 10, 'rem') !important
  else
    font-size unit(size, 'px')
    font-size unit(size / 10, 'rem') 
```

**更新：**替代解决方案，使用休息参数：

```
fontSize(size, args...)
  font-size unit(size, 'px') args
  font-size unit(size / 10, 'rem') args 
```

用法：

```
p
  fontSize(12, !important)

h1
  fontSize(14) 
```

**更新：**命名参数，也许更好：

```
fontSize(size, important = null)
  font-size unit(size, 'px') important
  font-size unit(size / 10, 'rem') important 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T16:11:59.963

在“显示”中没有编译

手写笔

```
display block !important 
```

CSS

```
display:block 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-08T16:48:17.440

```
display( arg = '' )
    if arg == 'inline-block'
        display arg
        zoom 1
        *display inline
    else if arg == 'box'
        display -moz-box
        display -webkit-box
        display box
    else
        display arg 
```

# ios - ipad如何停止屏幕移动

> ID：11559673
> 
> 赞同：1
> 
> 时间：2012-07-19T11:15:13.570
> 
> 标签：ios, asp.net-mvc-3

我有一个可以从 Ipad 访问的 ASP MVC 3 应用程序。我希望在从 ipad 连接到此应用程序时固定屏幕。

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:22:29.860

这解决了我的问题，但我不知道这是否是正确的方法

```
<body id="content_body" ontouchmove="blockMove()">
  @* the body goes here *@
</body> 
```

这是javascript函数的定义

```
function blockMove() {
  event.preventDefault();
} 
```

# javascript - 使用 JavaScript 发送具有不同类的多个复选框值

> ID：11559676
> 
> 赞同：-1
> 
> 时间：2012-07-19T11:15:16.157
> 
> 标签：javascript, jquery, ajax

您好，制作了一个实时过滤器功能，但在发送来自不同类的复选框值时遇到问题：

```
<input type="checkbox" onclick="return test();" class="type" name="type1" value="1"  /> Trousers <br />
<input type="checkbox" onclick="return test();" class="type" name="type3" value="3"  /> T-shirts <br />
<input type="checkbox" onclick="return test();" class="type" name="type2" value="2"  /> Jackets <br />

<input type="checkbox" onclick="return test();" class="color" name="color1" value="1"  /> Red <br />
<input type="checkbox" onclick="return test();" class="color" name="color3" value="3"  /> Blue <br />
<input type="checkbox" onclick="return test();" class="color" name="color2" value="2"  /> Green <br /> 
```

使用此代码，我可以从所有复选框中动态获取值：

```
function test() {
    var counter = 0, 
        i = 0,       
        url = 'items.php?',    
        input_obj = $('input[type=checkbox]');

    for (i = 0; i < input_obj.length; i++) {
        if (input_obj[i].type === 'checkbox' && input_obj[i].checked === true) {
            counter++;
            url = url + '&a=' + input_obj[i].value;
        }
    }
    if (counter > 0) {
        alert(url);

    }
} 
```

但我需要不同的类具有不同的 url 名称`(type - &a=value, color - &b=value)`并将所有这些组合到一个 url。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:36:39.740

通过为复选框赋予相同的**名称**（因为您使用的是 PHP，以该名称结尾`[]`）而不是使用类来对复选框进行分组。然后用于[`serialize`](http://api.jquery.com/serialize/)为您的 Ajax 请求生成编码数据。

例如：[_](http://jsfiddle.net/dWS6P/)

```
<form>

<label><input type="checkbox" name="type[]" value="1"  /> Trousers </label>
<label><input type="checkbox" name="type[]" value="3"  /> T-shirts </label>
<label><input type="checkbox" name="type[]" value="2"  /> Jackets </label>

<label><input type="checkbox" name="color[]" value="1"  /> Red </label>
<label><input type="checkbox" name="color[]" value="3"  /> Blue </label>
<label><input type="checkbox" name="color[]" value="2"  /> Green </label>

</form> 
```

​和

```
$('input[type=checkbox]').on('click', function () {
    alert($(this.form).serialize());
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:41:44.600

花了一段时间才明白你想表达什么......

我*猜*您想将复选框的当前状态发送到一个 url，很可能在选择某个复选框后立即发送。

我真的不明白该机制如何与所有 onclick 一起工作......我建议你重组你的代码：

从您的输入复选框中删除这些 onclick 定义，而是将您的 test() 例程绑定到单击复选框时引发的 javascript 事件。使用像 jQuery 这样的 javascript 库使这更方便。使用不同的 jQuery 选择器进行绑定，您可以对不同的事件有不同的反应，例如按选中的复选框的类进行过滤。

```
$('input.type').on('click',function(e){test('type',e);});
$('input.color').on('click',function(e){test('color',e);}); 
```

或者，您可以使用单个绑定并评估作为参数“e”传递的事件。您可以使用它来读取已单击元素的类。

希望这可以帮助。否则，请尝试更清楚地说明您真正想要发生的事情。您的目标不是“不同的类有不同的 url 名称”，而是应该将复选框值发送到不同的 url，或者应该将浏览器转发到不同的 url，具体取决于...

# android - 无法连接到我的 Web 服务

> ID：11559680
> 
> 赞同：4
> 
> 时间：2012-07-19T11:15:28.190
> 
> 标签：android, web-services

我无法从 android 应用程序连接我的 Web 服务。也许我使用了错误的参数？

活动：

```
public class MainActivity extends Activity {

final private String METHOD_NAME = "getMenuePlan";
final private String NAMESPACE = "http://webservice.kantine.de/";
final private String SOAP_ACTION = "\"" + NAMESPACE + METHOD_NAME + "\"";
final private String URL = "http://10.0.2.2:8080/Kantine/MenuePlan?wsdl";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

    envelope.setOutputSoapObject(request);

    HttpTransportSE httpTransport = new HttpTransportSE(URL);
    SoapObject result = null;

    try {

        httpTransport.call(SOAP_ACTION, envelope);
        result = (SoapObject) envelope.getResponse();

    } catch (SoapFault e) {

        Log.e("error", "", e);

    } catch (IOException e) {

        Log.e("error", "", e);

    } catch (XmlPullParserException e) {

        Log.e("error", "", e);

    }

    if (result != null) {
        Log.i("Result", result.toString());
    } else {
        Log.i("Result", "null");
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

WSDL：

```
<wsdl:definitions name="KantineWSImplService" targetNamespace="http://webservice.kantine.de/"><wsdl:types><xs:schema elementFormDefault="unqualified" targetNamespace="http://webservice.kantine.de/" version="1.0"><xs:element name="getMenuePlan" type="tns:getMenuePlan"/><xs:element name="getMenuePlanResponse" type="tns:getMenuePlanResponse"/><xs:complexType name="getMenuePlan"> [...] 
```

例外：

```
 7-19 10:58:10.287: E/AndroidRuntime(1008): FATAL EXCEPTION: main
07-19 10:58:10.287: E/AndroidRuntime(1008): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.wstest/com.example.wstest.MainActivity}: android.os.NetworkOnMainThreadException
07-19 10:58:10.287: E/AndroidRuntime(1008):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at android.os.Looper.loop(Looper.java:137)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at android.app.ActivityThread.main(ActivityThread.java:4745)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at java.lang.reflect.Method.invokeNative(Native Method)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at java.lang.reflect.Method.invoke(Method.java:511)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at dalvik.system.NativeStart.main(Native Method)
07-19 10:58:10.287: E/AndroidRuntime(1008): Caused by: android.os.NetworkOnMainThreadException
07-19 10:58:10.287: E/AndroidRuntime(1008):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at libcore.io.IoBridge.connectErrno(IoBridge.java:144)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at libcore.io.IoBridge.connect(IoBridge.java:112)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at java.net.Socket.connect(Socket.java:842)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:76)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at libcore.net.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:188)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at org.ksoap2.transport.ServiceConnectionSE.openOutputStream(ServiceConnectionSE.java:109)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:157)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:96)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at com.example.wstest.MainActivity.onCreate(MainActivity.java:41)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at android.app.Activity.performCreate(Activity.java:5008)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
07-19 10:58:10.287: E/AndroidRuntime(1008):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
07-19 10:58:10.287: E/AndroidRuntime(1008):     ... 11 more 
```

我已添加到清单中。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:20:00.620

OMG ...为什么每个调用`WebService`

这是[答案。](https://stackoverflow.com/a/11535247/1436931).

**网络请求只能在 ANDROID >= 3.0 的后台线程上进行**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:17:02.547

您应该在单独的线程中进行网络调用。 [如何修复 android.os.NetworkOnMainThreadException？](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)

# php - PHP - 删除字符串的 2 部分

> ID：11559684
> 
> 赞同：1
> 
> 时间：2012-07-19T11:15:38.730
> 
> 标签：php

我一直在试图解决这个问题，因为我以前从来不需要这样做，但是我将如何删除字符串的 2 部分？这是我到目前为止所拥有的..

```
str_replace('/pm ', '', $usrmsg) 
```

$usrmsg 将是用户在我的聊天室中发送的内容，我已经删除了 /pm 但这需要 2 个变量...

1：用户名 2：给用户的消息

用户名没有空格，因此在第二个单词之后，将输入给用户的消息。如何分别删除字符串的前 2 部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:23:54.690

使用正则表达式。应该是这样的：

```
if(preg_match('#^/pm ([A-Za-z]+) (.*)$#',$message,$matches))
     var_dump($matches); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:32:45.523

```
$string = '/pm username bla bla bla';

list($comand, $user, $text) = explode(" ", $string, 3);

// $comand  --> /pm
// $user    --> username
// $text    --> bla bla bla 
```

或者干脆

```
list(, $user, $text) = explode(" ", $string, 3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:22:39.647

所以你已经删除了`/pm`，你只需要下一个单词？

```
// remove the /pm
$usrmsg = str_split('/pm', '', $usrmsg);

// split the usrmsg by space
$parts = str_split(' ', $usrmsg);

// the username is the first part
$username = $parts[0]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T11:28:16.857

如果您熟悉正则表达式，请使用以下内容：

```
$inp = '/pm matt Hey Matt, here\'s my message to you...';

preg_match('~^\/pm\s?(?P<username>.*?)\s(?P<message>.*?)$~', $inp, $matches);

echo $matches['username'] . PHP_EOL;
echo $matches['message']; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T11:32:55.620

您可以按如下方式使用explode() 方法

```
$tokens = explode(' ', "/pm matt hi matt this is maatt too", 3);
print_r($tokens); 
```

The first element of array will have "/pm", the second username and the third will have the message.

# jquery - 复选框值未发送到 django 中的视图

> ID：11559685
> 
> 赞同：0
> 
> 时间：2012-07-19T11:15:41.337
> 
> 标签：jquery, html, django, django-views

如果复选框被选中，那么只有我看到其他值而不是提交我做错了什么

```
 <form>
 <input type="checkbox" id="tagdata" name="tagdata" onchange="get_checkbox_value();" value="0"/>
 </form>

function get_checkbox_value()
{
if ($('#tagdata').attr('checked')) {
  $('#tagdata').val('1');
}
else
{
  $('#tagdata').val('0');
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:22:05.393

我不确定你到底在问什么，但只有在复选框被勾选/交叉时才会提交复选框值。如果提交了值，则用户已选中复选框，如果未提交值，则不选中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:04:49.283

如果我对您的要求是正确的，请使用这个，我对代码格式感到抱歉。

```
<html>
<head>       <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
</head>
</body>
<form>
 <input type="checkbox" id="tagdata" name="tagdata" onchange="get_checkbox_value();" />
 </form>
<script>
function get_checkbox_value()
{
if ($('#tagdata').attr('checked')) {

   $('#tagdata').val('1');

}
else
{

  $('#tagdata').val('0');

}
}

</script>
</body>
</html> 
```

# c# - StackPanel 中的子级动画 - WPF (C#)

> ID：11559687
> 
> 赞同：2
> 
> 时间：2012-07-19T11:15:59.817
> 
> 标签：c#, wpf, animation, user-controls, storyboard

我有一个以 UserControls 作为孩子的 StackPanel。我想应用一个故事板动画，它可以在一秒钟内将孩子的身高从 0 增加到 100，从而创建一个平滑的向下滑动动画。当一个新的孩子被添加到 StackPanel - 时，这将被调用`StackPanel1.children.Add(usercontrol1)`。StackPanel 子项是 UserControls，所以我**不想**使用 DataTemplates。下面是我的意思的示例布局。

![示例布局](../Images/e81cae12dcd0af0911f7d5af1c8a4e4b.png)

有人可以帮我创建这个，因为我不知道如何制作它。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:27:32.647

您需要以 StoryBoard 的对象为目标。

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    var usercontrol1 = new Label();
    usercontrol1.Background = new SolidColorBrush(Colors.Red);
    usercontrol1.Content = "Hello";
    usercontrol1.Name = "UniqueName" + System.Guid.NewGuid().ToString("N");
    RegisterName(usercontrol1.Name, usercontrol1);

    StackPanel1.Children.Add(usercontrol1);
    // Create a DoubleAnimation to animate the width of the button.
    DoubleAnimation myDoubleAnimation = new DoubleAnimation();
    myDoubleAnimation.From = 0;
    myDoubleAnimation.To = 100;
    myDoubleAnimation.Duration = new Duration(TimeSpan.FromMilliseconds(1000));

    // Configure the animation to target the button's Width property.
    Storyboard.SetTargetName(myDoubleAnimation, usercontrol1.Name);
    Storyboard.SetTargetProperty(myDoubleAnimation, new PropertyPath(Button.HeightProperty));

    // **Set the Target Object for the Animation.**
    Storyboard.SetTarget(myDoubleAnimation, usercontrol1);

    // Create a storyboard to contain the animation.
    Storyboard myWidthAnimatedButtonStoryboard = new Storyboard();
    myWidthAnimatedButtonStoryboard.Children.Add(myDoubleAnimation);
    myWidthAnimatedButtonStoryboard.Begin(usercontrol1);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:23:41.463

好吧，这或多或少是上面评论中所写链接的复制粘贴。首先，您需要创建您的控件（假设是 usercontrol1）并给它一个唯一的名称，以便故事板引用它。

**编辑：**下面是一个简单的应用程序的代码：

XAML：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="800"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>
    <StackPanel Name="StackPanel1">

    </StackPanel>
    <Button Grid.Row="1" Click="Button_Click">

    </Button>
</Grid> 
```

和后面的代码：

```
private void Button_Click(object sender, RoutedEventArgs e)
    {
        var usercontrol1 = new Label();
        usercontrol1.Background = new SolidColorBrush(Colors.Red);
        usercontrol1.Content = "Hello";
        usercontrol1.Name = "UniqueName" + System.Guid.NewGuid().ToString("N");
        RegisterName(usercontrol1.Name, usercontrol1);

        StackPanel1.Children.Add(usercontrol1);
        // Create a DoubleAnimation to animate the width of the button.
        DoubleAnimation myDoubleAnimation = new DoubleAnimation();
        myDoubleAnimation.From = 0;
        myDoubleAnimation.To = 100;
        myDoubleAnimation.Duration = new Duration(TimeSpan.FromMilliseconds(1000));

        // Configure the animation to target the button's Width property.
        Storyboard.SetTargetName(myDoubleAnimation, usercontrol1.Name);
        Storyboard.SetTargetProperty(myDoubleAnimation, new PropertyPath(Button.HeightProperty));

        // Create a storyboard to contain the animation.
        Storyboard myWidthAnimatedButtonStoryboard = new Storyboard();
        myWidthAnimatedButtonStoryboard.Children.Add(myDoubleAnimation);
        myWidthAnimatedButtonStoryboard.Begin(usercontrol1);

    } 
```

# java - context.xml 和 server.xml 之间的区别？

> ID：11559689
> 
> 赞同：9
> 
> 时间：2012-07-19T11:16:15.433
> 
> 标签：java, jakarta-ee, tomcat

`context.xml`Tomcat 和Tomcat有什么区别`server.xml`？如果我想添加如下标签：

```
 <Resource name="jdbc/MyDs" auth="Container" type="javax.sql.DataSource"
     driverClassName="org.apache.derby.jdbc.ClientDriver"
     url="jdbc:derby://localhost:1527/my_database;create=true"
     username="me" password="me" maxActive="20" maxIdle="10" maxWait="-1" /> 
```

我应该在哪里添加它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-19T11:28:46.463

server.xml 用于服务器，context.xml 用于在该服务器上运行的应用程序。一台服务器上可能有多个 context.xml 文件（每个应用程序），但只有一个 server.xml。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-03-29T17:16:55.243

Tomcat Web 应用程序有一组称为部署描述符的配置，它们可以分为两组：依赖于服务器的 (context.xml) 和独立于服务器的 (web.xml)。

**server.xml** - 存储在服务器端并描述 Tomcat 服务器的一般配置。该文件是唯一的一个 Tomcat 服务器。

**context.xml** - 可以存储在服务器端 (conf/) 或嵌入 Web 应用程序 (META-INF/)。该文件包含依赖于服务器的配置，例如 Tomcat 服务器提供的 DataSources。

**web.xml** - 可以存储在服务器端 (conf/) 或嵌入 Web 应用程序 (WEB-INF/)。此文件包含独立于服务器的配置，例如 servlet 映射。

Tomcat conf/ 目录中服务器端的 Context.xml 和 web.xml 用于提供 Tomcat 的默认行为，如默认 servlet 映射。因此，每个服务器有一个 server.xml，每个 Web 应用程序有一对 context.xml/web.xml 文件。如果您想在多个应用程序之间共享配置，您应该使用 server.xml（例如，它用于安全领域）。否则 - server.xml/web.xml。在您的情况下，我建议您使用嵌入的 web 应用程序 context.xml。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T12:12:40.203

此条目可以放在 server.xml 中或单独的上下文文件中。上下文 xml 文件可以特定于每个应用程序部署，而 server.xml 成为全局文件。

特定于应用程序的上下文文件通常位于 catalina\localhost 文件夹中。

# c - 如何检查c中信号量的状态？

> ID：11559690
> 
> 赞同：0
> 
> 时间：2012-07-19T11:16:17.833
> 
> 标签：c, ipc, pipe, semaphore, shared-memory

我有一个全局静态变量，它是一个信号量，因为我正在编写一个库而不是一个程序。

在`main()`使用该库的程序中`fork()`，基于共享内存，对管道进行调用、读取和写入/写入。

例如，这是`main()`使用我的库：

```
#include <stdio.h>
#include <stdlib.h>
#include "my_pipe_shared_memory_based.h"
int main()

{
    int spd, pid, rb;
    char buff[4096];
    my_new_init();

    if (my_new_fifo("tmp_shm_pipe",0666) < 0)
    {
        perror("my_new_fifo");
        exit(1);
    }

    if (fork()) 
    {
        spd = my_new_open("tmp_shm_pipe", O_RDONLY, 0600);
        if (spd < 0)
        {
            perror("PARENT: my_new_open");
            exit(1);
        }
        rb = my_new_read(spd, buff, sizeof(buff));
        if (rb > 0)
            write(1, buff, rb);
    }

    else
    {
        spd = my_new_open("tmp_shm_pipe", O_WRONLY, 0600);
        if (spd < 0)
        {
            perror("SON: my_new_open");
            exit(1);
        }
        my_new_write(spd, "hello world!\n", sizeof("hello world!\n"));
    }

    my_new_close(spd);
    my_new_un_link("tmp_shm_pipe");
    my_new_finish();

    return 0;
} 
```

现在，我想在每次进程**读取和/或写入**方法之前使用信号量：

1.  **我的新写（）**

2.  **my_new_read()**

`my_new_write`现在，问题是，我怎样才能在上面请求的方法（例如& ）中每次检查信号量的状态`my_new_read`，所以我可以让进程做他的事情，或者阻止它，如果另一个进程当前正在读/写？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:50:46.210

这里的关键是您必须确保确保互斥的信号量对两个进程都是可见的。为此，您需要在分叉**之前分配共享内存并初始化信号量。**对于此任务，您可以例如使用 mmap。示例（没有任何错误检查）：

```
sem_t *sem = mmap(NULL, sizeof(sem_t),
                  PROT_READ | PROT_WRITE, MAP_ANONYMOUS | MAP_SHARED, 0, 0); 
```

之后，使用 sem_init 初始化信号量并确保第二个参数 pshared 不为零。手册说：

> 如果 pshared 不为零，则信号量在进程之间共享，并且应该位于共享内存的区域中（请参阅 shm_open(3)、mmap(2) 和 shmget(2)）。（由于 fork(2) 创建的子进程继承了父进程的内存映射，它也可以访问信号量。）任何可以访问共享内存区域的进程都可以使用 sem_post(3)、sem_wait(3) 等对信号量进行操作.

最后fork进程，正常使用sem_wait和sem_post。

编辑：

真的，尝试替换这个：

```
mySemaphore = sem_open("mySemaphore", O_CREAT, S_IRUSR | S_IWUSR); 
```

有了这个：

```
mySemaphore = mmap(NULL, sizeof(sem_t),
                   PROT_READ | PROT_WRITE, MAP_ANONYMOUS | MAP_SHARED, 0, 0);
sem_init(mySemaphore, 1, 1); 
```

在函数 my_new_open

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:21:25.500

sem_trywait() 和 sem_wait() 不是您要找的东西吗？用信号量句柄调用它们，你就会知道它们的状态。

[http://pubs.opengroup.org/onlinepubs/7908799/xsh/sem_trywait.html](http://pubs.opengroup.org/onlinepubs/7908799/xsh/sem_trywait.html)

不确定信号量，但是带有互斥锁的 pthread_cond_timedwait() 也可以让您在不阻塞线程（或超时）的情况下检查同步状态。

# java - 在java中运行进程时如何获取processid？

> ID：11559692
> 
> 赞同：0
> 
> 时间：2012-07-19T11:16:22.663
> 
> 标签：java

通过使用下面的代码，我可以运行批处理文件

```
Process p = Runtime.getRuntime().exec("E:/web_chat_temp/RunOpenfire/RunMe.bat"); 
```

但是在这里我怎样才能获得这个过程的进程ID。

因为我需要在其他应用程序中停止...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:02:48.713

假设您在 Windows 机器上运行此程序，并且您也在 Windows 中运行其他应用程序。

你使用命令

> > tasklist 或 tasklist [进程名称]

获取其进程ID。

# arrays - 如何在 Selenium WebDriver 的页面对象 (PageFactory) 中使用数组？

> ID：11559695
> 
> 赞同：0
> 
> 时间：2012-07-19T11:16:49.370
> 
> 标签：arrays, selenium, webdriver

我将 Selenium Web 驱动程序与 JUnit Eclipse 一起使用。我有这样的课：

```
import org.openqa.selenium.By;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.support.CacheLookup;
import org.openqa.selenium.support.FindBy;

//Path
 public class Path {
int i;
String[]path_name;
@FindBy(linkText=path_name[i])
@CacheLookup
private WebElement path;
public void path(int number,String[]path_name){
 for (i=1; i<number; i++){
    path.findElement(By.linkText(path_name[i])).click();  
 }
}
} 
```

它一个一个地打开定义数量的链接。此类与我的主要测试位于单独的文件中。要调用类路径，我使用页面对象（页面工厂）。这是我的主要测试中的代码：

```
Path path=  PageFactory.initElements(driver, Path.class);
path.path ( 2, new String[]{ "First", "New text"}); 
```

`The value for annotation attribute FindBy.linkText must be a constant expression`但我在网上遇到错误`@FindBy(linkText=path_name[i])`。我应该以什么方式将我的数组声明为页面对象？或者也许还有另一种方法可以从类路径中调用方法路径？如果我删除这部分代码，则会出现错误：@FindBy(linkText=path_name[i]) @CacheLookup 但在这种情况下，JUnit 找不到数组的元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T10:45:07.603

注释`@FindBys`就是您要查找的内容。它返回一个列表。

如果你想要一个数组，你可以从列表中转换或使用[这个](https://stackoverflow.com/questions/8008138/selenium-webdriver-and-pagefactory-initialize-listwebelement-elements)答案...

# php - 通过 ajax 将 php 生成的数组传递给另一个 php 文件

> ID：11559696
> 
> 赞同：0
> 
> 时间：2012-07-19T11:16:55.917
> 
> 标签：php, javascript, jquery, ajax, json

我从 oracle db (index.php) 生成了一个 php 数组

```
 while ($row = oci_fetch_array ($stid, OCI_ASSOC + OCI_RETURN_NULLS)){

    $result[]=$row;

} 
```

现在我必须将此数组传递给另一个 php 文件以进行其他处理。

```
 <script language="javascript" type="text/javascript">

  function sortme()
   {  
    var d=document.getElementById("div");
    var obj = <?php echo json_encode($result); ?>;
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
           xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
   xmlhttp.onreadystatechange=function()
     {
       if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        d.innerHTML=xmlhttp.responseText;
        }
     }
  xmlhttp.open("GET","getsorted.php?q=obj",true);
  xmlhttp.send();
   } 
```

然后在 php 文件中获取 sorted.php 我需要这个二维数组“结果”并对其进行排序。所以我用这个，（getsorted.php）

```
 <?php

    $q=$_GET["q"];
    $ans=json_decode(str_replace('\"','"',$q),true);
    var_dump($q);
    var_dump($ans);
   ?> 
```

但我无法弄清楚任何事情。我无法取回数组。如果这是错误的方法，请提出正确的方法。

请务必发布代码。

非常感谢。

有更好的方法吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:23:11.057

当您必须传递 URLEncoded JSON 表示时，您传递的是字符串“obj”。代替：

```
xmlhttp.open("GET","getsorted.php?q=obj",true); 
```

和：

```
xmlhttp.open("GET","getsorted.php?q=" + encodeURIComponent(JSON.stringify(obj)),true); 
```

* * *

你在做什么有点像这样：

```
PHP file  AnotherPHPFile
   |           ^  |
   |       ____|  |
   V      /       v
Javascript---(sorted result into HTML) 
```

如何简单地将`getsorted.php`文件包含在您的文件中`index.php`并直接使用排序功能。您以这种方式保存网络请求..

# java-me - 开发J2ME移动应用的软件有哪些？

> ID：11559697
> 
> 赞同：0
> 
> 时间：2012-07-19T11:17:00.780
> 
> 标签：java-me

我对开发用于移动设备的 J2ME 应用程序很感兴趣。是否有任何易于使用的免费软件来帮助开发 J2ME 应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T13:05:15.123

我的建议是使用像 Java ME（又名 Sun Microsystems WTK）这样的模拟器：

Sun Java Wireless Toolkit 2.5.2_01 for CLDC 下载 (1)（非常稳定）或最近的 JAVA ME SDK 3.0.5。

使用您喜欢的 IDE。- 面向移动开发人员的 Eclipse（Eclipse Juno (4.2) 包）不能与插件 MTJ（Java 移动工具）一起正常工作；我的建议是以前的 Eclipse 版本。然后使用 Eclipse IDE (2) 的 PULSAR 版本。此版本有 MTJ 插件。

(1) Java无线工具包2.5.2_01 [http://www.oracle.com/technetwork/java/download-135801.html](http://www.oracle.com/technetwork/java/download-135801.html)

(2) Eclipse Pulsar 版（面向 Java ME - 移动开发者） [http://www.eclipse.org/downloads/packages/pulsar-mobile-developers/heliossr2](http://www.eclipse.org/downloads/packages/pulsar-mobile-developers/heliossr2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T12:32:54.070

NetBeans 是官方的、免费的并且在不断发展。[http://netbeans.org/features/javame/](http://netbeans.org/features/javame/)

它不像 VB6 那样容易使用，但可以。

# ipad - iPad Safari (iOS 5.0.1) 上的 iframe CSS3 缩放问题

> ID：11559700
> 
> 赞同：11
> 
> 时间：2012-07-19T11:17:05.487
> 
> 标签：ipad, css, iframe, scale, safari

我需要扩大 iframe 以使其更大（我无法控制 iframe 内容的源代码）。我正在尝试通过`-webkit-transform: scale(1.3)`CSS 属性来实现它。

iframe 的内容已正确放大，但是当我尝试触摸 iframe 中的任何控件时，似乎在错误的位置接收到触摸事件（我可以看到控件的“阴影”在触摸错误的位置）。因此事件处理程序不起作用（我怀疑它们没有被调用，因为在错误的位置检测到触摸）。有人遇到过这个问题吗？可以解决吗？

我创建了一个产生问题的测试用例（在 iPad Safari 中尝试）：http: [//jsfiddle.net/9vem2/](http://jsfiddle.net/9vem2/)

以更易读的格式来源：

父页面（iframe 的容器）：

```
<!DOCTYPE html>
<html>
<head>
    <title>Parent</title>

    <style type="text/css"> 
        iframe
        {        
            left: 200px;
            -webkit-transform: scale(1.3);
        }
    </style>    
</head>

<body>
    <h2>Parent</h2>
    <iframe src="child.html"></iframe>
</body>
</html> 
```

子页面（iframe 内容）：

```
<!DOCTYPE html>
<html>
<head>
    <title>Child</title>
</head>

<body>
    <h2>Child</h2>
    <input type="text"></input>
    <button onclick="alert('hello');">Button</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:21:31.860

这感觉像是一个 hacky 解决方案，但由于它正在修复似乎是一个错误的问题，我想这并不重要。我没有在 2D 中缩放，而是将 iframe 在 3D 中移向查看器，请参阅此演示：http: [//jsfiddle.net/ianlunn/MSUmS/](http://jsfiddle.net/ianlunn/MSUmS/)

被`<body>`制作成 3D 空间，如下所示：

```
body {
 -webkit-perspective: 800px;
} 
```

然后 iframe 在该 3D 空间中沿 Z 轴向查看器移动：

```
iframe {
    -webkit-transform: translateZ(130px);
} 
```

这可能需要针对实际应用程序进行修改，特别是如果 iframe 包含在`<body>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T16:25:25.317

[正如您可以在Phonegap Iframe Usage](https://github.com/phonegap/phonegap/wiki/iFrame-Usage)中看到的那样，这些是 iOS 5 上 iframe 实现的一些错误，即使您不使用 phonegap 您也可以找到有用的提示，因为它是基于 HTMS/JS/CSS 的。我引用该文件的最后一段：

> 在 iOS 5 及更高版本上使用原生滚动时，iFrame 可能会干扰并导致滚动手势被错误解释。这是 Apple 实现中的一个错误，唯一的解决方法是避免使用 iFrame 或使用不同的滚动库（例如 iScroll）。

您是否也尝试过我认为可以将 CSS 文件从父窗口注入 iframe 上的 HTML 的 Javascript 解决方案，因为最终它全部加载到 DOM 中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T16:27:16.137

使 iFrame 响应式可能更容易，因此如果浏览器调整大小，响应式内容也会如此...这可能会解决它，因为缩放似乎只是缩放框架而不是重新调整其中的内容。

[http://jsfiddle.net/D2uBW/](http://jsfiddle.net/D2uBW/)

让我知道我与您正在寻找的东西有多接近，并请评论任何想法或修复。

# sqlite - Metro8 Sqlite 选择查询

> ID：11559705
> 
> 赞同：2
> 
> 时间：2012-07-19T11:17:49.433
> 
> 标签：sqlite, microsoft-metro

我遇到了 SqlLite 和 metro8 应用程序的问题。如何在 SqlLite 数据库上执行查询（选择）？

插入工作正常（它只是 db.Insert(something)），但不知道如何选择刚刚插入的值。

`var db1 = new SQLite.SQLiteConnection(dbpath);`

有一个方法叫：

`db1.Execute(TableMapping map, string query, params object[] args)`

但是该方法中的 tablemapping 和 params 参数是什么？

感谢您的任何回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:15:43.603

这是使用 SQLiteDatabase 和 sqlite-net.1.0.5 NuGet 包...

我们做这样的选择：

```
 private SQLiteAsyncConnection _asyncConnection;

    public async Task<IList<string>> ReadIds()
    {
        List<MyDataType> result = await _asyncConnection.Table<MyDataType>().ToListAsync();
            return result.Select(x => x.Id).ToList();
    } 
```

或者：

```
 public async Task<int> ReadCount(int id)
    {
        return await _asyncConnection.ExecuteScalarAsync<int>(
               String.Format("select COUNT(*) from MyDataType where Id == '{0}'", id));
    } 
```

# asp.net - ASP.NET 分层设计

> ID：11559706
> 
> 赞同：0
> 
> 时间：2012-07-19T11:17:50.403
> 
> 标签：asp.net, vb.net, design-patterns

我从 MSDN 阅读了以下文章：http: [//msdn.microsoft.com/en-us/library/aa581779](http://msdn.microsoft.com/en-us/library/aa581779)

它讨论了创建数据层、业务逻辑层和表示层以及具有 getProductsDAL()、getProductsBLL() 等命名约定，甚至将它们分离到类库中。

我的问题是：如果不使用 .NET 数据集，开发人员是否会遵循这种方法，即如果您自己执行所有逻辑，例如有一个名为 getProducts 的函数，该函数使用连接对象连接到数据库，然后使用 SQLDataReader 循环遍历结果集并显示页面上的结果。我正在考虑将这样的功能拆分成层。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:34:50.063

如果您打算按照自己的方式进行操作：
您的数据层将包含打开连接、执行查询/存储过程并返回数据集或数据表的方法。该层不接收上层的连接信息，只返回每个方法的查询结果。连接在这个级别被实例化。

您的业​​务逻辑层包含每个调用一个或多个数据层方法的方法。示例：添加新用户也意味着为该用户设置权限，因此 DL.InsertUser(params...) 和 DL.SetPermissions(int Userid, List permissions) 由 BL.AddNewUser(params...) 调用。此 BL 方法还可以调用另一个 DL 方法，该方法获取默认权限列表以分配新用户

您的 UI 层将使用所有适当的新用户详细信息调用 BL.AddNewUser(params...)

# php - 无序列表的PHP分页

> ID：11559709
> 
> 赞同：0
> 
> 时间：2012-07-19T11:18:03.880
> 
> 标签：php, jquery

项目 1 项目 2 项目 3

我按此顺序排列了三个项目，我使用无序列表按此顺序排列项目。我没有找到按无序列表排列的项目的分页插件，我如何为此实现分页。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:36:15.620

使用[https://github.com/wesnolte/Pajinate](https://github.com/wesnolte/Pajinate)获取无序列表。

# java - 如何在黑莓中替换超过 1 个字符

> ID：11559710
> 
> 赞同：3
> 
> 时间：2012-07-19T11:18:05.370
> 
> 标签：java, regex, blackberry

我知道如何用字符串中的另一个字符替换某个字符：

> System.out.println(replaceAll("你在哪里??", "?", ""))

```
public static String replaceAll(String front, String pattern, String back){

    if (front == null)
        return "";

    StringBuffer sb = new StringBuffer(); //A StringBuffer is created
    int idx = -1;
    int patIdx = 0;

    while ((idx = front.indexOf(pattern, patIdx)) != -1)
    {
        sb.append(front.substring(patIdx, idx));
        sb.append(back);
        patIdx = idx + pattern.length();
    }

    sb.append(front.substring(patIdx));
    return sb.toString();
} 
```

此代码将全部替换`?`为空白并打印出（“你在哪里”）

现在我想知道的是如何替换超过 1 个字符。在 Java 中，我可以只使用简单的正则表达式，但如果在黑莓中，我会写如下内容：

`System.out.println(replaceAll("Henry!! Where are you??", "!?", ""))`

然后黑莓不捡起来。那么如何克服黑莓的这个限制呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T11:41:30.267

没有任何方法可以按照您的意愿进行操作。但我可以建议你制作一个`array of string of the pattern which you want to replace`. 循环遍历**字符串数组，**通过它们的位置获取字符串并将其传递给您的

`public static String replaceAll(String front, String pattern, String back)`. 希望这会帮助你 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T12:26:55.260

如果您想替换 String `front`中使用的任何字符，`pattern`您可以使用`toCharArray()`，遍历模式中的所有字符，检查哪个是第一个替换的（最近的）并替换它。我的意思是这样的

```
public static String replaceAll(String front, String pattern, String back) {

    if (front == null)
        return "";

    StringBuffer sb = new StringBuffer(); // A StringBuffer is created
    int idx = -1;
    int patIdx = 0;

    boolean end = true;
    int tmp = -1;

    do {
        end = true;
        for (char c : pattern.toCharArray()) {
            //System.out.println("searching for->"+c+" from patIdx="+patIdx+" idx="+idx);
            if ((tmp = front.indexOf(c, patIdx)) != -1) {
                //System.out.println("FOUND->"+c+" from patIdx="+patIdx+" idx="+idx+" tmp="+tmp);
                if (idx == -1 || idx == patIdx-1 || (idx > patIdx && tmp < idx)){
                    end = false;
                    idx = tmp;
                    //System.out.println("setting replacement to ->"+c+" patIdx="+patIdx+" idx="+idx);
                }
            }
        }
        if (!end && idx != -1) {
            //System.out.println("replacing patIdx="+patIdx+" idx="+idx);
            sb.append(front.substring(patIdx, idx));
            sb.append(back);
            patIdx = idx+1;
        }
        //System.out.println("----");
    }while(!end);

    sb.append(front.substring(patIdx));
    return sb.toString();
} 
```

# jquery - 从几个 div 打印文本

> ID：11559712
> 
> 赞同：-3
> 
> 时间：2012-07-19T11:18:20.370
> 
> 标签：jquery

我看到了这个[答案](https://stackoverflow.com/a/2255438/1511551)，但是如何继续从第二个、第三个 div 打印文本？这就是我想要的：

```
<script type="text/javascript">
function PrintElem(elem)
{
    Popup($(elem).text());
}
function Popup(data) 
{
    var mywindow = window.open('', 'Coupon', 'height=300,width=710');
    mywindow.document.write('<html><head><title>Coupon</title>');
    /*optional stylesheet*/ mywindow.document.write('<link rel="stylesheet" href="cupon.css" type="text/css" />');
    mywindow.document.write('</head><body ><div class="coupon_logo"><img src="discount.jpg"></div><div class="coupon_conditions">');
             mywindow.document.write(data); // text from first div
    mywindow.document.write('</div>');
    mywindow.document.write('<div class="coupon_clinic_info">');
            //text from second div
    mywindow.document.write('</div>');
    mywindow.document.write('</body></html>');
    mywindow.print();
    mywindow.close();
    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:23:27.810

我想只需将一个类应用于您要打印的所有 div 就可以了

```
<div id="mydiv" class="toprint">
    This will be printed. 
</div>

<div>
    This will not be printed.
</div>

<div id="anotherdiv" class="toprint">
    This will be printed.
</div> 
```

然后使用您引用的问题的答案，更改此行：

```
<input type="button" value="Print Div" onclick="PrintElem('.toprint')" /> 
```

# java - JDBC Transaction 如何在 TRANSACTION_READ_COMMITTED 隔离级别锁定表？

> ID：11559716
> 
> 赞同：0
> 
> 时间：2012-07-19T11:18:32.960
> 
> 标签：java, jdbc, locking, database

我已经阅读了本教程：[http](http://docs.oracle.com/javase/tutorial/jdbc/basics/transactions.html) ://docs.oracle.com/javase/tutorial/jdbc/basics/transactions.html但我认为我仍然缺少一些东西。

让我们举个例子：

*   线程 T1 有自己的 Connection
*   线程 T2 有自己的 Connection

因此，这些线程执行一个事务（setAutoCommit(false) 在两个不同的连接上）。此事务在单个数据库表上执行以下查询：

*   选择一行以读取累进数字 (PN)
*   插入一行将渐进数设置为：PN++（我
    读过的内容+1）

此表中的累进数字必须是唯一的（它是主键）。

JDBC Transactions（带有 TRANSACTION_READ_COMMITTED 隔离级别）是否避免了 T1 和 T2 读取相同的 PN 值并尝试在表中插入相同的 PN++ 的问题？在执行插入并调用 commit() 之前，表是否被锁定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:35:25.563

不，为了确保您始终拥有唯一编号，您需要：1) [更好] 将 DB 字段更改为身份/序列/自动编号，具体取决于 DB 2) 使用 UUID 作为标识符 3) [最差] 锁定读取/递增/写入序列持续时间的行

TRANSACTION_READ_COMMITTED 只会确保您只能读取已经提交到数据库的数据。即，如果您之间还有 200 个数据库操作

```
UPDATE sequence 
```

和

```
commit 
```

在您提交之前，其他线程将无法读取您更新的数据，因此实际上它会做与您想要的完全相反的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T08:05:07.333

您还可以在应用程序级别进行同步。如果一个应用程序中只有一种方法正在执行增量，这将起作用。

```
private **synchronized** void increment() {
    Calendar calendar = Calendar.getInstance();
    int year = calendar.get(Calendar.YEAR);
    int current = dao.getMaxNumber(year);
    dao.insertNumber(year, current+1);
} 
```

# github - 如何让 Team City 访问 GitHub 组织的私有存储库？

> ID：11559722
> 
> 赞同：1
> 
> 时间：2012-07-19T11:18:54.597
> 
> 标签：github, continuous-integration, teamcity

我的组织正在使用 GitHub 进行源代码控制 - 所有存储库都是私有的。

我们还有一个内部服务器为 CI 运行 Team City。

允许 TC 从 GitHub 拉取更改的最佳方式是什么？

我能想到的唯一解决方案是设置一个新的 GitHub 用户并使该用户成为组织的成员。好像有点啰嗦。我也可以使用我的凭据，但这是一个直接的黑客攻击。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:29:31.133

最后，我使用群组电子邮件地址在 GitHub 上创建了一个新用户帐户。

我还在 GitHub 上创建了一个新团队，对 TeamCity 中管理的项目具有*读写*访问权限，并将新用户添加到该团队。

我本可以只指定*读取*权限，但我使用的是 TeamCity 的标签功能，该功能会在每次成功构建时将标签添加到 GitHub 存储库，因此需要*写入*权限。

# php - symfony 2.1 在控制器中设置表单主题

> ID：11559729
> 
> 赞同：0
> 
> 时间：2012-07-19T11:19:17.967
> 
> 标签：php, forms, twig, symfony-2.1

最近我在 Symfony / Bridge / Twig / Extension / FormExtension.php 中使用了 symfony 2.0 中的 setTheme 函数，例如：

```
$this->get('twig')->getExtension('form')->setTheme($view, $theme); 
```

sf2.1中没有这个功能。在控制器中设置表单主题的替代方法是什么？提前感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:58:15.217

我检查了 Symfony 2.1 的最新来源，似乎可以通过：

```
$this->get('twig')->getExtension('form')->renderer->setTheme($view, $theme); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T15:58:42.377

这是从控制器生成带有参数的模板并为其设置主题的完整示例。

```
// Create the form using $this->createForm() ...
$myView = $myform->createView();
//Set the form theme
$this->get('twig')->getExtension('form')->renderer->setTheme($myView, 'XBundle:path/to/theme/myTheme.html.twig');
$content = $this->renderView('XBundle:path/to/template/myTemplate.html.twig', array('templateParam1' => $myView, 'templateParam2' => $param2));
return new Response($content); 
```

希望这可以帮助。干杯

# php - 使用 PHP 生成 PDF 文件（包括 PNG 图像）

> ID：11559730
> 
> 赞同：0
> 
> 时间：2012-07-19T11:19:19.907
> 
> 标签：php, pdf, png, fpdf

**问题：**需要将从textarea获取的base64编码的PNG图片，用PHP转换成PNG图片（扩展名为.png-image.png的二进制文件），并将图片存储在服务器上。然后借助 PHP 和 FPDF 类生成 PDF 文件（example1.pdf），插入之前保存的 PNG 图像。生成的 PDF 文件也存储在服务器上。

这是我打开的文件createPdfFromBase64.php：

```
<?php
    #header('Content-Type: image/png');

    $base64 = $_POST['base64']; // Получаем base64 код PNG изображения из <textarea id="base64" name="base64"></textarea>

    #echo("$base64");

    $base64 = str_replace(' ','+',$base64); // If you want to save data that is derived from a Javascript canvas.toDataURL() function, you have to convert blanks into plusses. If you do not do that, the decoded data is corrupted.

    $data = base64_decode($base64); // Декодирует данные base64 и записывает их в переменную $data

    echo("$data");

    $filename = "image.png";

    // Пишем содержимое в файл image.png
    file_put_contents($filename, $data); // Сохраняем изображение image.png на сервере

    // Подключаем класс FPDF, для генерации PDF документа
    require('/home/u552896297/public_html/FPDF/fpdf.php');

    // Создаем FPDF объект
    $pdf= new FPDF();

    // Устанавливаем свойства документа
    $pdf->SetAuthor('Evgeniy Privalov'); // Устанавливаем автора PDF документа.
    $pdf->SetTitle('PDF generator'); // Устанавливаем title PDF документа.

    // Настройки страницы. Теперь когда главное сделано, приступим к созданию страницы.
    $pdf->AddPage('P'); // Книжная ориентация страницы
    $pdf->SetDisplayMode('real','default'); //Функция SetDisplayMode определяет как будет отображена страница. Вы можете определить параметры увеличения и разметки. В примере мы используем 100% увеличение и разметку по умолчанию, определенную в программе, используемой для просмотра.

    // Вставляем PNG картинку в верхний левый угол с разрешением в 300 точек на дюйм (300dpi)
    $pdf->Image('image.png', 10, 10, -300);

    // В конце мы выведем наш результат используя функцию Output
    $pdf->Output('example1.pdf', 'F'); // Здесь мы указали имя файла и параметр вывода, в данном случае "F". "F"-параметр сохранит результат в файл example1.pdf
?> 
```

index.html 文件在这里 - [http://print-online.16mb.com/](http://print-online.16mb.com/)。必须先按“保存名片”（“Сохранить визитку”），然后单击“转换为 PDF”（“Конвертировать в PDF”）。

**但是在生成PDF的时候，报错FPDF error: Not a PNG file: image.png**

请帮我解决问题！

**UPD：**在服务器上创建了 image.png 文件，但它不会出现在您的浏览器中！[http://print-online.16mb.com/image.png](http://print-online.16mb.com/image.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:57:53.373

显然，上传或之后的编辑出现问题。使用[http://www.php.net/manual/en/ref.fileinfo.php](http://www.php.net/manual/en/ref.fileinfo.php)测试上传的图片，看看返回的信息是否如您所愿。

# php - 以您想要的方式重新排列（重新排序，排序）数组 php

> ID：11559731
> 
> 赞同：0
> 
> 时间：2012-07-19T11:19:22.310
> 
> 标签：php

我有一个数组，结果如下： a = laranja b =banana c = maçã d = limao

现在我想重新排序它，但没有什么合乎逻辑的东西，比如 d,c,b,a。我只想按照我想要的方式重新排序。可以是 a,d,c,b 或 , c,a,b,d。

我尝试了排序，多重排序，但没有成功。

有什么建议吗？

[我在这里](http://codepad.viper-7.com/6xhYOZ)粘贴一些代码，看看它是否有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:26:48.500

见[排序（）](http://php.net/manual/en/function.sort.php)

```
$yourArray;
sort($yourArray);
print_r($yourArray);
// Now alphabetical 
```

此外，如果您编写一个函数来根据需要对值进行排序，请使用[usort()](http://php.net/manual/en/function.usort.php)

```
<?php
function cmp($a, $b)
{
    if ($a == $b) {
    return 0;
    }
    return ($a < $b) ? -1 : 1;
}

$a = array(3, 2, 5, 6, 1);

usort($a, "cmp");

foreach ($a as $key => $value) {
    echo "$key: $value\n";
}
?>

0: 1
1: 2
2: 3
3: 5
4: 6 
```

编辑：

您的 foreach 语句是 kaput。

```
<?php
    function cmp($a, $b)
    {
        if ($a == $b) 
        {
            return 0;
        }
        return ($a < $b) ? -1 : 1;
    }

    $a = array("d"=>"limao", "a"=>"laranja", "b" =>"banana", "c"=>"maçã");
    print_R($a);
    usort($a, "cmp");
    print_R($a);
?> 
```

输出：

```
Array
(
    [d] => limao
    [a] => laranja
    [b] => banana
    [c] => maÃ§Ã£
)
Array
(
    [0] => banana
    [1] => laranja
    [2] => limao
    [3] => maÃ§Ã£
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:39:52.780

您可能需要在数组中添加另一个条目，称为类似`sort_order` 具有数字权重的条目，并按此排序。

像：

```
Array (
  Array ( 'name' => 'test', 'sort' => 1 ),
  Array ( 'name' => 'test test', 'sort' => 2 )
); 
```

# python - 在不登录的情况下使用 ssh-agent

> ID：11559732
> 
> 赞同：3
> 
> 时间：2012-07-19T11:19:24.003
> 
> 标签：python, linux, ssh, paramiko, ssh-agent

我们想使用 ssh-agent 通过 ssh 自动连接到多台机器，使用 ubuntu 机器上的专用用户（12.04）；问题是因为我们已经通过脚本生成了这个用户

```
useradd -m -s /bin/bash USER 
```

而且我们没有登录该用户，ssh-agent 没有运行，并且任何尝试使用 ssh 而不提供密码（我们使用 python 和 paramiko）都失败了

```
no autentication methods available 
```

我们做了一些研究，发现很多人会用这个命令行启动 ssh-agent

```
eval "ssh-agent" 
```

但这对我们不起作用（尤其是当上述命令通过 python 执行时）。

让它工作的唯一方法是登录到该用户（例如通过 ssh）并输入上面的命令，这使得我们的自动化方法不那么自动化：有没有办法让 ssh-agent 在启动时启动而无需登录到专用用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:36:00.503

我认为这个问题在[Server Fault](https://serverfault.com/)网站上会得到更好的回答。

但是，这是一个想法。

在所有 pc 上创建一个 init 脚本，这样当 pc 启动时，它以用户身份登录并启动 ssh-agent 并注销。将 init 脚本运行级别设置为在 pc 以正常/多用户模式启动时启动。

# ios - 使用 UIWebView

> ID：11559733
> 
> 赞同：1
> 
> 时间：2012-07-19T11:19:25.377
> 
> 标签：ios, xcode, uiwebview, delegates, dependencies

我有一个`UIWebView`,`HTML`初始化后从缓存加载 -file ：

```
UIWebView *tempWebView = [[UIWebView alloc] init];
tempWebView.delegate = self;
[self.view addSubview:tempWebView];

[tempWebView loadHTMLString:htmlString baseURL:baseURLString]; 
```

比`webViewDidFinishLoad:(UIWebView *)webView`我试图执行的`javascript`：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
    [[webView stringByEvaluatingJavaScriptFromString:jsString] floatValue];
    // other manipulations...

    [webView removeFromSuperview];
} 
```

问题是`HTML`-code 具有外部依赖项，例如：

```
<link rel="stylesheet" href="css/book.css" type="text/css"/> 
```

而且有这样的印象，就是这个`*.css`来不及加载，所以`javascript`-code返回了错误的值。如果执行`webViewDidFinishLoad:(UIWebView *)webView`延迟的内容（假设 2.0f 秒），一切都会好起来的。

但是这种延迟在不同的设备和情况下可能会有所不同。那么如何确定所有依赖项都已加载以执行我的`javascript`代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:31:45.750

使用此代码

webViewDidStartLoad

```
- (void)webViewDidStartLoad:(UIWebView *)webView 
{
[[webView stringByEvaluatingJavaScriptFromString:jsString] floatValue];
// other manipulations...
} 
```

# iphone - 顶部有圆角的 UIButton

> ID：11559734
> 
> 赞同：1
> 
> 时间：2012-07-19T11:19:28.217
> 
> 标签：iphone, objective-c, ios, uibutton, calayer

我需要一个带有背景图像、顶部圆角和阴影的 UIButton。这是我的代码

我从堆栈溢出中尝试了很多帖子，但没有一个对我有用。

我能够使用以下方法添加具有圆角和阴影的背景图像的 UIButton。

```
CALayer *imageLayer = [imageButton layer];
imageLayer.frame =  CGRectMake(110, 190, 100, 100);
imageLayer.cornerRadius = 10.0; 
imageLayer.shadowColor = [UIColor grayColor].CGColor;
imageLayer.shadowOpacity = 1.0;
imageLayer.shadowRadius = 1;
imageLayer.shadowOffset = CGSizeMake(03.0f, 08.0f);
imageLayer.masksToBounds = YES;

CALayer *sublayer = [CALayer layer];
sublayer.backgroundColor = [UIColor blueColor].CGColor;
sublayer.shadowOffset = CGSizeMake(5, 8);
sublayer.shadowRadius = 2.0;
sublayer.shadowColor = [UIColor grayColor].CGColor;
sublayer.shadowOpacity = 0.8;
sublayer.frame = imageLayer.frame;
sublayer.borderColor = [UIColor blackColor].CGColor;
sublayer.borderWidth = 0.0;
sublayer.cornerRadius = 10.0;

[imageButton.layer.superlayer insertSublayer:sublayer atIndex:0]; 
```

现在我怎样才能使顶角变圆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:26:13.427

要制作圆角，您必须使用渐变层 CAGradientLayer。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:29:54.407

不要忘记

```
#import <QuartzCore/QuartzCore.h> 
```

如果您使用的是 CAGradientLayer

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:45:44.360

您可以查看[ColoredRoundedButton](https://github.com/paulgrayson/ColoredRoundedButton)开源实现。它使用`cornerRadius`UIButton 的属性`CALayer`来获得圆角。

# javascript - 如何排序导致 nodejs - mongodb 搜索，但是，通过调用动态方法

> ID：11559735
> 
> 赞同：8
> 
> 时间：2012-07-19T11:19:32.473
> 
> 标签：javascript, node.js, mongodb, express

我正在通过 mongo 本机连接器连接到 mongodb 的 nodejs 中开发一个 Web 应用程序。

在我的一个 js 文件中，我有一个通用方法来调用“find”或“findOne”操作来从 mongodb 集合中检索我需要的任何内容，如下所示：

这对我来说可以。

但是现在，我需要对结果进行排序，据我所知，MongoDB 使用“排序”方法来实现这一点。

```
collection.ensureIndex(indexedFields, function(error, indexName) {
    if (error) {
        callback(error);
    } else {
        var operation = (params.options.one) ? collection.findOne : collection.find;

        operation.call(collection, params.selector, params.fields, params.options,
            function(error, result){
                if (error) {
                    ...
                } else {
                    ... 
                }       
            }
        );
    }
}); 
```

在一个简单的查询中，应该是这样的： 例如：

```
collection.find().sort({field : 1}), 
```

我不知道如何调用“排序”方法，这是我的通用方式。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T14:22:44.620

你看过 mongojs (https://github.com/gett/mongojs) 吗？我将它用于我的节点应用程序，它运行良好（我也使用 expressjs）。您可以使用以下语法进行简单的查找和排序：

```
db.test.find().sort({name:1}, function(error, tuples) { console.log(tuples) }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T18:22:15.643

你不能对调用的输出做同样的事情吗？：

```
 operation.call(collection, params.selector, params.fields, params.options,
            function(error, result){
                ... 
            }
        ).sort({field: 1}); 
```

如果排序只能应用于`find`and not的结果`findOne`，那就有点复杂了：

```
 var operation = (params.options.one) ? collection.findOne : function() {
        var findResults = collection.find.apply(this, [].slice.call(arguments));
        return findResults.sort({field: 1});
    }; 
```

（当然，最后一个完全未经测试，但看起来应该很接近。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-14T01:47:11.973

使用游标是最好的解决方案，因为排序是在 mongodb 引擎中进行的

```
var grades = db.collection('data');

var cursor = grades.find();
// cursor.skip(1);
// cursor.limit(4);
// cursor.sort(['State', 1]);
cursor.sort( [['Temperature', 'desc'],['State','asc']] );

//var options = { 'skip' : 1,
//                'limit' : 4,
//                'sort' : [['grade', 1], ['student', -1]] };
//var cursor = grades.find({}, {}, options);

cursor.each(function(err, doc) {
    if(err) throw err;
    if(doc == null) {
        return db.close();
    }
    console.dir(doc);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-10T22:20:20.577

我有一个文章模型，我想按类别搜索并根据创建日期获取最新文章，这就是我的做法

```
const query = {category: "category1"};
Articles.find(query, callback).sort({created_date: -1}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T08:02:12.833

应该和斯科特说的差不多。

第一种方法不起作用，因为未定义的对象调用了 sort。我认为这是有道理的，因为首先执行了一个回调。第二个方法几乎是我需要的，但不起作用，findResults.sort 再次返回一个未定义的。

我终于做了一些更简单的事情，它似乎成功了，但是......仍然缺少一些东西：

```
operation.call(collection, params.selector, params.fields, params.options,               
   function(error, result){
         if (err) ....
         else results.sort({field:1}, callback(err, sortedResults))
   } 
```

好吧，它在“results.sort”处暂停，它仍在等待......我不知道是什么。查看 mongodb 控制台，没有启动查询。另一方面，回调作为一个函数存在，但没有被调用......

然后，我尝试以另一种方式做到这一点；

```
var sortedResults = results.sort({field:1};
callback(err, sortedResults) 
```

在这种情况下，执行会继续，但会返回未排序的结果。

还有其他想法吗？它必须在那里......

谢谢

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T08:14:33.657

我找到了解决方案。

似乎缺少“toArray”，否则不起作用。

```
operation.call(collection, params.selector, params.fields, params.options, function(error, result)   {
if (error) {
    callback(error);
} else {
        result.sort(params.sort).toArray(function(error, items) {
            ... 
        }
} 
```

我希望它会有所帮助

# php - Substr 的 PHP 代码 - 让它在一个单词后停止？

> ID：11559740
> 
> 赞同：0
> 
> 时间：2012-07-19T11:19:40.750
> 
> 标签：php

> **可能重复：**
> [缩短 PHP 中的字符串（仅限完整单词）](https://stackoverflow.com/questions/972010/shorten-string-in-php-full-words-only)

在我使用的 substr 下面。从我的数据库中回显前 38 个字符。这段代码破坏了结尾的单词。

```
<?php echo substr(ucfirst($row['metadesc']),0,38); ?>... 
```

像这样的输出。

```
news for today was null try tomo 
```

如何在单词结尾后 38 个字符后停止字符串。

输出应该是这样的

```
news for today was null try tomorrow 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:32:29.473

```
function TrimString($String, $Length)
{
    if(strlen($String) > $Length)
    {
        $Temp[0] = substr($String, 0, $Length);
        $Temp[1] = substr($String, $Length);
        $SpacePos = strpos($Temp[1], ' ');
        if($SpacePos !== FALSE)
        {
            return $Temp[0].substr($Temp[1], 0, $SpacePos);
        }
    }
    return $String;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:25:06.113

```
function substrword($str, $begin, $length) 
{
    if (($begin + $length) < strlen($str)) {    
            return substr($str, $begin, $length).current(explode(' ', substr($str, $length))).'...';
    }
    return $str;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:58:32.237

您可以使用此正则表达式：

```
preg_match('/^(.{1,38})\b/u', $string, $matches); 
```

您的字符串将是：

```
$matches[1] 
```

# android - 运行命令 Android 终端模拟器。通过代码安装apk

> ID：11559749
> 
> 赞同：3
> 
> 时间：2012-07-19T11:20:12.400
> 
> 标签：android, installation, apk, terminal-emulator

我正在尝试在 Android 终端模拟器上运行命令。我的设备植根并安装了*superuser.apk*。

我这样做是这样的：

```
 try {
        Process process = Runtime.getRuntime().exec(cmd);
        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(process.getInputStream()));
        String line = bufferedReader.readLine();
        while ( line != null ) {
            Log.i("SHELL", line);
            line = bufferedReader.readLine();
        }
    } catch ( Exception e) {
        e.printStackTrace();
    } 
```

也很好：

```
 try {
        Process process = Runtime.getRuntime().exec(<b>cmd</b>*);
        process.waitFor();
    } catch ( Exception e ){
        e.printStackTrace();
    } 
```

我正在尝试安装一个。Apk 按代码。我尝试了以下方法：

**cmd** =>`pm install /mnt/sdcard/app.apk` 没有任何结果。

**cmd** =>`su -c "pm install /mnt/sdcard/app.apk"` 带单引号、双引号和不带引号。结果：

```
 I/SHELL(1432): Usage: su [options] [LOGIN]

    I/SHELL(1432): Options:
    I/SHELL(1432):   -c, --command COMMAND         pass COMMAND to the invoked shell
    I/SHELL(1432):   -h, --help                    display this help message and exit
    I/SHELL(1432):   -, -l, --login                make the shell a login shell
    I/SHELL(1432):   -s, --shell SHELL             use SHELL instead of the default in passwd
    I/SHELL(1432):   -v, --version                 display version number and exit
    I/SHELL(1432):   -V                            display version code and exit. this is
    I/SHELL(1432):                                 used almost exclusively by Superuser.apk 
```

**ls**等其他命令运行良好。

**如何安装位于 /mnt/sdcard 中的 apk？**

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T11:25:18.453

尝试这个 ：

```
su -c "pm install /mnt/sdcard/app.apk" root 
```

但是我认为，如果您的手机没有root，它就行不通

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T07:48:47.963

我找到了解决方案。

```
 Process p;  
    try {  
            // Preform su to get root privledges  
            p = Runtime.getRuntime().exec("su");   

            // Attempt to write a file to a root-only  
            DataOutputStream os = new DataOutputStream(p.getOutputStream());  
            os.writeBytes(**any command**+"\n");  

            // Close the terminal  
            os.writeBytes("exit\n");  
            os.flush();  
            try {  
                    p.waitFor();
                    if (p.exitValue() != 255) {  
                            // Sucess :-)
                    }  
                    else {  
                           // Fail
                    }  

            } catch (InterruptedException e) {  
                    // Fail
            }  
    } catch (IOException e) {  
            // Fail
    } 
```

谢谢大家！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:25:49.930

我怀疑当您执行命令时，它不是 ADB Shell，而是您的应用程序的 shell 环境。

来自代码：（如果你想通过 Intent 来做的话）

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(new File(path+"/<application_name>.apk")), "application/vnd.android.package-archive");
startActivity(intent); 
```

这是权限..

```
<uses-permission android:name="android.permission.INSTALL_PACKAGES" /> 
```

# python - 我可以在 Plone 4.1 中将内容规则的记录器操作的输出格式化为 CSV 吗？

> ID：11559752
> 
> 赞同：1
> 
> 时间：2012-07-19T11:20:26.850
> 
> 标签：python, plone

当添加新内容（即文件）时，我创建了一个内容规则来运行记录器操作。当我在 Linux 上运行 zinstance.log 文件的视图时，我会看到所有日志。我希望将每个记录器操作的输出分别发送到另一个日志文件，以便它仅在 Plone 站点适用的情况下包含与该规则相关的日志。这怎么可能实现。有没有相同的插件？我知道我们可以 grep o/p 并将其通过管道传输到 CSV 以便稍后对其进行格式化。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-19T12:23:46.937

这可以通过两种方式实现，这两种方法在步骤 3 中有所区别：

第一步：记录一般写在zinstance.log中的一行。（在某些情况下它是多行编写的，因此您需要处理异常）。所以在这里你可以使用 readline 函数来读取每条记录。

第 2 步：读取记录后，并使用 writelines 写入您想写入的相应位置。

第三步：读写记录后，现在有两种选择：

方法1：你可以将zinstance.log复制到你读过的任何地方（带有日期和时间的字幕，这样你就可以随时使用日志）并创建一个新的空zinstance.log（服务器会自动将新日志写入新文件，无论您下次运行程序时，您都可以使用它）在它所在的位置。

方法2：您也可以将指向该位置的指针保存在一个文件中，直到您读取的任何位置，下次运行程序时读取该文件并从该位置开始读取记录。这种方法可能会导致不可靠性，好像文件大小超出了数据类型的范围，然后它会弯曲指针直到你读到的地方。由于日志文件足够大，所以最好不要采用这种方法

希望这能解答您的疑虑

# c# - FileUpload 控件不能在“外部”AJAX 更新面板工作，但在“内部”与回发触发器一起工作？

> ID：11559762
> 
> 赞同：0
> 
> 时间：2012-07-19T11:20:49.197
> 
> 标签：c#, asp.net, ajax, file-upload

我的问题很简单，希望能回答。

我正在制作一个带有文件上传控件的简单表单，该控件最初未在 AJAX 面板中使用，对于我的一生，我无法弄清楚为什么我的代码保持不变，找不到 FileUpload 控件的内容。

```
<asp:Panel ID="pnlUpload" runat="server" class="workerDetailsPanelLeft" Visible="true">

<h3 class="titleHighlightStyle">Probation Documents</h3><br />
<table cellspacing="0">
<tr>
<td class="standardLabel" valign="top">Current Documents</td>
<td colspan="2">
<asp:ListBox ID="lstDocs" runat="server" Width="200px"></asp:ListBox>
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
<asp:ImageButton ID="btnSelect" runat="server" SkinID="selectprobationdoc"/>
</td>
<td class="standardLabel" style ="width:200px">Select documents</td>
</tr>
<tr>
<td>
&nbsp;
</td>
</tr>
<tr>
<td class="standardLabel">Upload Documents</td>
<td colspan="2">
<asp:FileUpload ID="uplDoc" runat="server" Height="22px" Width="200px"/> 
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
<asp:Button ID="btnSave" runat="server" Text="Save" OnClick="btnSave_Click" CausesValidation="False" />
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
</tr>
<tr>
<td>
<asp:Label ID="lblUploadError" runat="server" Text="Probation document required" ForeColor="Red" Visible="false"></asp:Label> 
</td>
</tr>
</table>             
</asp:Panel> 
```

原谅我删除了空格的格式！！

现在，当我的标记是这样并且我在 FileUpload 上调用 .HasFile() 时，它会返回一个空值吗？

当我添加以下内容时

```
<asp:UpdatePanel ID="ContentPanel" UpdateMode="Conditional" runat="server" ChildrenAsTriggers="true">
<Triggers>
<asp:PostBackTrigger ControlID="btnSave" />
</Triggers>
<ContentTemplate>
  *Markup as above* 
```

我可以得到控件的内容。我知道带有文件上传控制的 Ajax 更新面板存在问题，解决方案是添加回发触发器，但是任何人都可以从这个标记中看到为什么它可能找不到文件？

```
 if (this.uplDoc.HasFile)
        {
            String fileExtension = System.IO.Path.GetExtension(uplDoc.FileName).ToLower();
            String validExt = sAllowedExt;

            if (validExt.IndexOf("," + fileExtension + ",") != -1)
            {
                if (this.uplDoc.FileBytes.Length >= 0)
                {
                    return string.Empty;
                }
                else
                {
                    return "PROC0003";  //Invalid File Size            
                }
            }
            else
            {
                return "PROC0002"; //Invalid file type        
            }
        } 
```

以上是检查背后的初始代码，这与添加更新面板相比从未改变。

有人可以帮我理解我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:42:03.977

这是一个简单的答案，

托管内容页面的母版页将这些页面包装在更新面板中，因此为什么我的代码没有获取文件上传控件的内容，它正在执行异步回发而不是完整回发。

无论如何谢谢@Shai

# cordova - Phonegap - 无法播放本地声音文件

> ID：11559763
> 
> 赞同：1
> 
> 时间：2012-07-19T11:20:52.930
> 
> 标签：cordova

我正在尝试使用 Phonegap 播放本地声音文件。这在 http 上运行良好，但不适用于本地文件。我可以看到设备上的文件并手动播放它们，但不能使用 Phonegap 的 API 这样做。我试过了：

1.  .mp3 和 .wav 文件格式。
2.  将文件放在 www/ （带有 path `/android_asset/www/sound.mp3`）和 /sdcard/ （带有 path `sound.mp3`）中。
3.  改变协议（有或没有 file://）。

但似乎没有任何效果，成功和错误回调都没有被调用。在尝试播放之前，我还要确保该文件确实存在。这是我的代码：

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fs) {

                        var directoryReader = fs.root.createReader();
                        directoryReader.readEntries(function(entries) {
                            for (var i=0; i<entries.length; i++) {
                                if (entries[i].isFile && entries[i].name.match(/.*\.wav$/)){

                                    var audio = new Media(entries[i].toURL().substr(19), function(){console.log('success');}, function(){console.log('error');});
                                    console.log("!!!!! " + audio.getDuration());
                                    audio.play();
                                    audio.release();    
                                    break;
                                }
                            }
                        }, function (error) {
                            alert(error.code);
                        })
                   }, function (error) {
                           alert(error.code);
                   }); 
```

`audio.getDuration`总是返回 -1。我在运行 Android 2.3.3 的 Android Nexus S 上使用 Phonegap 1.9，该应用针对 API 级别 2.1。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:47:58.060

`getDuration`同步调用时返回 -1。您需要在 setInterval 循环中调用它，如下所示[http://docs.phonegap.com/en/1.9.0/cordova_media_media.md.html#media.getDuration](http://docs.phonegap.com/en/1.9.0/cordova_media_media.md.html#media.getDuration)以获得正确的持续时间。

我不认为你可以从 assets/www 播放文件，但 sdcard 上的文件工作得很好。您需要确保不传递 FileEntry 对象的完整路径。您需要修剪起始路径（file:///mnt/sdcard/），因为媒体播放器插件会自行添加。我在挠头一个小时左右后发现了这一点！

# visual-studio - [CompanyName] 以小写“i”开头时的命名空间命名约定

> ID：11559768
> 
> 赞同：17
> 
> 时间：2012-07-19T11:21:06.953
> 
> 标签：visual-studio, namespaces, resharper, naming, stylecop

我的公司名称以小写“i”开头。例如：iWare（这不是真正的公司名称，但它说明了用途）。

正因为如此，我发现由于命名空间命名规则/约定，我经常不得不与 StyleCop 和 Resharper 作斗争。

有谁知道我应该如何命名我的命名空间（有时是类）。

例如。

```
namespace iWare.Product.X
{
    ...
} 
```

可以想象，上面显示的大多数工具都不喜欢这样。关于替代方案应该是什么，有什么建议吗？我尝试使用以下方法抑制错误：

```
[SuppressMessage("StyleCop.CSharp.NamingRules", "SA1300:ElementMustBeginWithUpperCaseLetter", Justification = "Reviewed. Suppression is OK here.")]
namespace iWare.Product.X
{
    ...
} 
```

但是，这会导致以下错误：命名空间声明不能有修饰符或属性

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-13T21:33:53.923

[布雷特的回答](https://stackoverflow.com/a/11623425/473305)解决了工具的问题，但要回答标题中的问题（当公司名称以小写字母开头时应该使用什么命名空间命名约定）：

[这个 MSDN 文章](https://msdn.microsoft.com/en-us/library/ms229026.aspx)，链接到[这个其他答案](https://stackoverflow.com/a/4623870/473305)，状态，

> 如果你的品牌使用非传统的大小写，你应该遵循你的品牌定义的大小写，即使它偏离了正常的命名空间大小写。

因此，根据 Microsoft 的说法，您示例中的正确命名空间名称实际上是`iWare.Product.X`，带有小写的“i”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T02:49:10.790

似乎您正在使用 iWare 或您的公司名称作为您的根命名空间。

在我的项目中，我通常在/使用 MyProject 的属性窗口中指定我的根命名空间，或者在右侧的 MenuItem 'Project' > 'Properties' > 'Application' - 'root namespace' 文本框中指定我的根命名空间。

因此，我根本没有在我的编码中指定它，除非我从另一个组件/项目中引用它作为导入。

# xml - 返回以 UTF-8 编码的视图，没有 BOM

> ID：11559772
> 
> 赞同：1
> 
> 时间：2012-07-19T11:21:44.787
> 
> 标签：xml, vb.net, asp.net-mvc-2, itunes, atom-feed

在我的 MVC Web 应用程序中，我开发了一个函数来返回 Newsstand Atom Feed（用于 Apple 的 Newsstand）。他们对此提要的要求之一是它以 UTF-8 有效编码，并且不得包含 BOM。这就是我编写视图的方式（类名是虚构的，以保护我公司的隐私）：

```
<%@ Page Language="VB" Inherits="System.Web.Mvc.ViewPage(Of IEnumerable (Of AtomFeed))" ContentType="application/atom+xml" ResponseEncoding="UTF-8" %><?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:news="http://itunes.apple.com/2011/Newsstand"><%="" %><%  If Not Model Is Nothing Then%><%  Dim updateDate As String = ViewData("feedUpdate")%><% If (Not String.IsNullOrEmpty(updateDate)) Then%>
<updated><%= updateDate %></updated><%
End If%><% For Each f In Model%>
<entry>
    <id><%= f.id%></id>
    <updated><%= f.updated%></updated>
    <published><%= f.published%></published>
    <news:end_date><%= f.endDate%></news:end_date>
    <summary><%= f.summaryText%></summary>
    <news:cover_art_icons>
        <news:cover_art_icon size="SOURCE" src="<%= f.newspaperCover %>"/>
    </news:cover_art_icons>
</entry><%
        Next%><%
End If%>
</feed> 
```

今天我们收到一封来自 iTunes 的邮件，抱怨他们无法导入我们的 XML，但不知道为什么会失败。呈现的 XML 符合他们的要求，所以我唯一的猜测是我的视图编码存在问题。

如何在没有 BOM 的情况下以 UTF-8 正确返回此视图，以便当他们从我给定的 url 中提取 XML 时，它将被正确处理？

编辑：

使用 Darin 的实现后，我得到了以下提要

```
 <?xml version="1.0" encoding="utf-8"?>
<feed xmlns:news="http://itunes.apple.com/2011/Newsstand"
xmlns="http://www.w3.org/2005/Atom">
  <title type="text"></title>
  <id>uuid:5fc48c36-a1d3-4280-a856-a1a0528e2552;id=1</id>
  <updated>2012-07-23T00:40:00Z</updated>
  <entry>
    <id>23.07.2012</id>
    <title type="text"></title>
    <summary type="text">...</summary>
    <updated>2012-07-23T00:40:00Z</updated>
    <published xmlns="">2012-07-23T00:40:00Z</published>
    <news:end_date>2012-07-24T00:40:00Z</news:end_date>
    <news:cover_art_icons>
      <news:cover_art_icon size="SOURCE"
      src="https://www.someurl.com" />
    </news:cover_art_icons>
  </entry>
  <entry>
    <id>22.07.2012</id>
    <title type="text"></title>
    <summary type="text">...</summary>
    <updated>2012-07-22T00:40:00Z</updated>
    <published xmlns="">2012-07-22T00:40:00Z</published>
    <news:end_date>2012-07-23T00:40:00Z</news:end_date>
    <news:cover_art_icons>
      <news:cover_art_icon size="SOURCE"
      src="https://www.someurl.com" />
    </news:cover_art_icons>
  </entry>
</feed> 
```

现在 Apple 的报亭无法导入以下提要，因为他们说他们无法在此提要的条目元素中找到元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:32:21.590

我建议您使用专为此目的设计的[SyndicationFeed类，而不是在视图中手动生成 XML 提要。](http://msdn.microsoft.com/en-us/library/system.servicemodel.syndication.syndicationfeed.aspx)

因此，让我们假设您有一些表示您的数据的域模型：

```
public class NewsstandFeed
{
    public DateTime? Updated { get; set; }
    public IEnumerable<AtomFeed> Items { get; set; }
}

public class AtomFeed
{
    public int Id { get; set; }
    public DateTime Updated { get; set; }
    public DateTime Published { get; set; }
    public DateTime EndDate { get; set; }
    public string SummaryText { get; set; }
    public string NewspaperCover { get; set; }
} 
```

然后是一个控制器，它将查询一些 DAL 以检索域模型：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        // Normally this will come from a database or something,
        // but I am hardcoding it for demonstration purposes here
        var model = new NewsstandFeed
        {
            Updated = DateTime.Now,
            Items = new[]
            {
                new AtomFeed 
                {
                    Id = 1,
                    Updated = DateTime.Now,
                    Published = DateTime.Now,
                    EndDate = DateTime.Now,
                    SummaryText = "some summary",
                    NewspaperCover = "http://www.google.com"
                }
            }
        };

        return new NewsstandFeedResult(model);
    }
} 
```

注意到`NewsstandFeedResult`控制器动作返回了吗？让我们实现它：

```
public class NewsstandFeedResult : ActionResult
{
    public const string NewsstandNS = "http://itunes.apple.com/2011/Newsstand";
    public NewsstandFeed Model { get; private set; }

    public NewsstandFeedResult(NewsstandFeed model)
    {
        Model = model;
        if (model.Items == null)
        {
            model.Items = Enumerable.Empty<AtomFeed>();
        }
    }

    public override void ExecuteResult(ControllerContext context)
    {
        var response = context.HttpContext.Response;
        response.ContentType = "application/atom+xml";

        var feed = new SyndicationFeed();
        var n = new XmlQualifiedName("news", "http://www.w3.org/2000/xmlns/");
        XNamespace newsstandNs = NewsstandNS;
        feed.AttributeExtensions.Add(n, newsstandNs.ToString());
        if (Model.Updated.HasValue)
        {
            feed.LastUpdatedTime = new DateTimeOffset(Model.Updated.Value.ToUniversalTime());
        }

        var items = new List<SyndicationItem>();
        foreach (var item in Model.Items)
        {
            var si = new SyndicationItem();
            si.Id = item.Id.ToString();
            si.LastUpdatedTime = new DateTimeOffset(item.Updated.ToUniversalTime());
            si.Summary = new TextSyndicationContent(item.SummaryText);

            si.ElementExtensions.Add(new XElement(newsstandNs + "end_date", item.EndDate.ToUniversalTime()));
            si.ElementExtensions.Add(
                new XElement(
                    newsstandNs + "cover_art_icons",
                    new XElement(
                        newsstandNs + "cover_art_icon", 
                        new XAttribute("size", "SOURCE"), 
                        new XAttribute("src", item.NewspaperCover)
                    )
                )
            );
            items.Add(si);
        }
        feed.Items = items;

        using (var writer = XmlWriter.Create(response.OutputStream))
        {
            var formatter = new Atom10FeedFormatter(feed);
            formatter.WriteTo(writer);
        }
    }
} 
```

就是这样。现在只需导航到`/home/index`，您将获得符合所有行业标准的有效 Atom 提要，因此您不必担心 BOM 和其他东西。

# android - android中的Listview检索

> ID：11559778
> 
> 赞同：1
> 
> 时间：2012-07-19T11:22:08.720
> 
> 标签：android, listview

在我的应用程序中，我在列表视图中显示数据表单数据库。我的列表视图按列显示 4 个文本视图，如果用户单击特定行，我必须获取这 4 个文本视图值。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:31:07.217

您需要做的是维护四个数组列表，通过您获取的数据库值创建这些列表，然后在列表项上单击获取每个单独项的值，例如

```
@Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int position,
            long id) {
        // TODO Auto-generated method stub

    String  s1 = ArrayList1.get(position);

    String  s2 = ArrayList2.get(position);

     String s3 = ArrayList3.get(iposition);

    String  s4 = ArrayList4.get(position);

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:30:41.220

试试这个，

```
 list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {

            String textview1 = ((TextView) view.findViewById(R.id.text1)).getText().toString();
            String textview2 = ((TextView) view.findViewById(R.id.text2)).getText().toString();
            String textview3 = ((TextView) view.findViewById(R.id.text3)).getText().toString();
            String textview4 = ((TextView) view.findViewById(R.id.text4)).getText().toString();

         }
    }); 
```

# c# - 在相等覆盖范围内检查 null

> ID：11559786
> 
> 赞同：2
> 
> 时间：2012-07-19T11:22:42.960
> 
> 标签：c#, equality

好的，我有一个类，我想在其中覆盖相等运算符，所以我有以下代码：

```
/// <summary>
/// Over-ride of the equality operator.
/// </summary>
/// <param name="credential1">The left hand object to test for equality.</param>
/// <param name="credential2">The right hand object to test for equality.</param>
/// <returns>True if the objects are equal.</returns>
public static bool operator ==(KnownServerCredential credential1, KnownServerCredential credential2)
{
    // ok check if either is null
    bool cell1Null = Equals(null, credential1);
    bool cell2Null = Equals(null, credential2);

    // if both are, then it's true
    if (cell1Null && cell2Null)
    {
        return true;
    }

    // if only one is, then how can they be the same?
    if (cell1Null || cell2Null)
    {
        return false;
    }

    // neither are - so we can now go to full on equality
    return credential1.IsEqualTo(credential2);
} 
```

这很好用，我很满意。然而，静态分析工具（Resharper 和 VS2010 代码分析）发誓最后一行可能会引发空引用异常，因为我在前两行中检查空值的方式。如果我将前两行从 更改为`Equals(null, credentialX)`，`credentialX == null`则静态分析工具会很高兴，但它会创建堆栈溢出异常，因为然后我会递归调用相等覆盖。我可以通过使用两全其美`(object)credentialX == null`，但这似乎不是最干净的方式。

所以简单的问题是，我是否遗漏了某些东西，或者演员和比较是实现我正在寻找的最佳方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:28:47.920

检查一对对象是否相等有两种方法：引用相等和结构/值相等。引用相等是所有引用类型（类）的默认值，结构相等是所有值类型的默认值（但默认实现不是最优的）。使用以下指南为引用类型和值类型实现结构相等。

# 平等

相等性检查应遵循以下规则：

*   一个对象等于它自己（身份）
*   比较`x`返回`y`与比较相同的`y`事实`x`。（对称）
*   如果`x`等于`y`并且`y`等于`z`，则`x`必须等于`z`。（传递性）
*   一个对象永远不等于`null`。
*   `null`等于`null`。
*   不应抛出任何异常。

让您的类或结构实现[`IEquatable<T>`](http://msdn.microsoft.com/en-us/library/ms131187.aspx)自定义相等检查的接口，然后实现[`IEquatable<T>.Equals(T)`](http://msdn.microsoft.com/en-us/library/ms131190.aspx)and[`Object.Equals()`](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)方法。

## 引用类型（类）的相等性

对于引用类型，实现如下[`IEquatable<T>.Equals(T)`](http://msdn.microsoft.com/en-us/library/ms131190.aspx)方法：

```
public bool Equals(MyType other)
{
    if (Object.ReferenceEquals(other, null) ||      // When 'other' is null
        other.GetType() != this.GetType())          // or of a different type
        return false;                               // they are not equal.
    return this.field1 == other.field1
        && this.field2 == other.field2;
} 
```

然后像这样覆盖[`Object.Equals()`](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)：

```
public override bool Equals(object obj)
{
    return Equals(obj as MyType);
} 
```

## 值类型（结构）的平等

由于值类型不能是`null`，因此实现如下[`IEquatable<T>.Equals(T)`](http://msdn.microsoft.com/en-us/library/ms131190.aspx)方法：

```
public bool Equals(MyType other)
{
    return this.field == other.field
        && this.field2 == other.field2;
} 
```

然后像这样覆盖[`Object.Equals()`](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)：

```
public override bool Equals(object obj)
{
    if (!(obj is MyType))
        return false;
    return Equals((MyType)obj);
} 
```

# 等式运算符

对于引用类型和值类型，您可能希望覆盖默认的相等和不等运算符。根据[Jon Skeet](https://stackoverflow.com/a/1451459/146622)的这篇文章，等式和不等式运算符可以这样实现：

```
public static bool operator ==(MyType left, MyType right)
{
    return Object.Equals(left, right);
}

public static bool operator !=(MyType left, MyType right)
{
    return !(left == right);
} 
```

请注意， when和`left`/或`right`is不调用覆盖（因此不调用方法）。`null`[`Object.Equals(object, object)`](http://msdn.microsoft.com/en-us/library/w4hkze5k.aspx)[`Object.Equals(object)`](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)[`IEquatable<T>.Equals(T)`](http://msdn.microsoft.com/en-us/library/ms131190.aspx)

# 哈希码

有时对象的哈希码很重要，例如当对象可能被放入字典或哈希表时。一般来说，当你重写`Equals()`方法时，重写`GetHashCode()`方法。哈希码应遵循[以下规则](http://blogs.msdn.com/b/ericlippert/archive/2011/02/28/guidelines-and-rules-for-gethashcode.aspx)：

*   哈希码[永远](https://stackoverflow.com/a/34541/146622)不应该改变，即使在修改了对象中的某些字段之后也是如此。
*   对于被认为相等的对象，哈希码必须相等。
*   对于被认为不相等的对象，哈希码可以是任何东西（包括相等）。
*   哈希码应该是随机分布的。
*   哈希码函数绝不能抛出异常，并且必须始终返回。
*   哈希码的计算速度应该非常快。

因此，要实现[`Object.GetHashCode()`](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)使用结构相等的类或结构，请从对象中选择一些不可变的字段并标记它们`readonly`。仅使用这些字段来计算哈希码。覆盖该[`Object.GetHashCode()`](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)方法并[像这样实现它](https://stackoverflow.com/a/263416/146622)：

```
public override int GetHashCode()
{
    unchecked
    {
        int hash = 17;
        // Don't forget to check for null values.
        hash = hash * 29 + field1.GetHashCode();
        hash = hash * 29 + field2.GetHashCode();
        // ...
        return hash;
    }
} 
```

或者，如果您只有一个不可变字段，您可以考虑只使用：

```
public override int GetHashCode()
{
    // Don't forget to check for null values.
    return field1.GetHashCode();
} 
```

如果您没有不可变字段，请[返回一个常量哈希码](https://stackoverflow.com/a/11481543/146622)。例如，[类型本身的哈希码](https://stackoverflow.com/a/8178226/146622)。

```
public override int GetHashCode()
{
    return GetType().GetHashCode();
} 
```

# 集合的结构平等

不应使用默认`Equals()`方法比较集合。相反，集合的默认相等性应该是引用相等性。要实现结构相等，请实现[`IStructuralEquatable`](http://msdn.microsoft.com/en-us/library/system.collections.istructuralequatable.aspx)接口。例如：

```
bool IStructuralEquatable.Equals(object obj, IEqualityComparer comparer)
{
    var other = obj as MyType;
    if (other == null)
        return false;
    return ((IStructuralEquatable)this.innerArray)
        .Equals(other.innerArray, comparer);
}

int IStructuralEquatable.GetHashCode(IEqualityComparer comparer)
{
    return ((IStructuralEquatable)this.innerArray).GetHashCode(comparer);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T11:26:24.143

通常，当我必须检查是否等于 null 时，我使用：

```
if (object.ReferenceEquals(myref, null))
{ 
```

它的优点是可以绕过重载`Equals`和`operator==`.

# actionscript-3 - AS3 使用可选对象实例化一个类

> ID：11559789
> 
> 赞同：1
> 
> 时间：2012-07-19T11:22:44.300
> 
> 标签：actionscript-3, oop

我有一个需要用对象实例化的类：

```
public class FusePumpComboBox extends Sprite
{
    private var _rowCount;

    public function FusePumpComboBox(args:Object)
    {
        _rowCount = (args.rowCount !== undefined) ? args.rowCount : 5;
    }
} 
```

如果我不想将行数传递给它并像这样实例化怎么办：

```
var obj:FusePumpComboBox = new FusePumpComboBox(); 
```

正如您所期望的那样，目前我收到参数数量不匹配的错误。我试过给`args:Object`一个默认值......我认为这就是解决方案所在，只是不知道给它什么或如何 ( `args:Object = {}`) 不起作用。

编辑：我也会有吸气剂和二传手......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:26:07.890

你可以试试这个：

```
public function FusePumpComboBox(args:Object=null)
{
    _rowCount = (args && args.hasOwnProperty('rowCount')) ? args.rowCount : 5;
                       //      ^----- The correct way of checking the properties
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:24:43.603

您可以将`null`其用作默认值并检查是否`args`在`null`方法内。

我必须注意，尽管这在 JavaScript 中很常见（使用设置解析对象），但在 OOP 的上下文中继续下去并不是一个好习惯。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-19T11:29:11.613

上面的答案阐明了解决方案。

附带说明：将参数传递给构造函数是一种不好的模式。

最好通过 getter 和 setter 来维护属性。

解析复杂的对象参数必须在外部完成，因为据我所知，它不是类“自己的”功能。

# mysql - LOAD DATA INFILE 字段终止于

> ID：11559790
> 
> 赞同：0
> 
> 时间：2012-07-19T11:22:45.003
> 
> 标签：mysql, file-io, load, field

我已经搜索了这个论坛，但我没有找到与我面临的这个特定问题相关的任何内容。也就是说，我有一个要传输到 MySQL 数据库的文本文件，我正在使用 PHP 编写脚本。

我想知道的是我是否可以在 FIELDS TERMINATED BY 参数中使用多个分隔符：

> 加载数据文件'$file'
> 
> > 进入表 $my_table
> > 
> > > 以“;”结尾的字段
> > > 
> > > > 由 '\r\n' 终止的行";

我的文本文件如下所示：

> 11;111111;;1111111;;;;;;1111;;;;11111;;1111111111;111111111;;;111; ......

所以，只使用**';'** 作为分隔符，我没有得到想要的结果，例如在某些 db 字段中，我得到的数据类似于**;;1111;** - 通常应该只有数字。

有没有办法让所有的分号充当分隔符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:25:40.853

您的输入 txt 文件格式不正确。

你可以找到并替换;; 和 ; 在文本编辑器中，然后尝试再次将数据加载到表中。

重复此查找和替换过程两次以将所有分号转换为一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:21:07.147

\N 在数据文件中的分隔符之间。当 sql 加载它时，这会将字段标记为空。

# android - 您如何以编程方式在 Android ICS 及更高版本上截取屏幕截图？

> ID：11559795
> 
> 赞同：3
> 
> 时间：2012-07-19T11:22:51.380
> 
> 标签：android, screen, screenshot, capture

我正在尝试编写一个在 Android 4.0+ 上执行屏幕捕获的应用程序。我知道您很可能必须拥有一部扎根的手机，这很好。

我尝试从 /dev/graphics/fb0 获取数据。它可以工作，但只能获得启动屏幕。（HTC One X）因此我猜测，由于 ICS 完全通过加速渲染，它在启动后不会渲染到帧缓冲区。

虽然网络上关于这个问题的信息有限，但还是有一些建议。一种是使用 Android-Screenshot-Library。它不起作用（它从 /dev/fb0 获取帧缓冲区内容）。其他建议仅用于捕获您自己的应用程序的屏幕。我想捕获用户正在做什么的屏幕（这是为了研究，没有恶意。）

到目前为止，我被困住了，所以欢迎任何想法或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:17:31.800

直接访问帧缓冲区需要特定于设备的知识，并且经常更改图形引擎的模式，因此不推荐。

更好的答案是检查 adbd 在您的特定版本上做了什么。看

安卓/平台/系统/核心/adb/framebuffer_service.c

在 AOSP 中，其标签与您安装的 Android 版本相当（尽管从技术上讲，供应商构建可能具有不同的 adbd impelement 屏幕截图功能）。

目前，在 master 中，它正在运行一个名为“screencap”的独立可执行文件，它将数据转储到 stdout。

您可能需要以*图形*组中的用户身份运行它，即 root 或 adb 的*shell*用户 ID。

# artificial-intelligence - AI领域有什么东西，比如PL领域的lambda-the-ultimate？

> ID：11559797
> 
> 赞同：3
> 
> 时间：2012-07-19T11:22:59.917
> 
> 标签：artificial-intelligence

人工智能领域有没有博客或论坛或讨论组，例如编程语言领域的[lambda-the-ultimate ？](http://lambda-the-ultimate.org/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:58:35.157

我不知道有任何这样的整体 AI 博客。AI 是一个非常广泛的主题：大多数博客只涵盖一个小节。这是我们的博客，涵盖了一系列 AI 主题（不是全部），但它专注于一个单一的、实际的实现（所以可能不是您想要的）：

*   [与人工智能相关的所有事物：规则、流程、事件、代理、计划、本体等：Drools 和 jBPM 团队博客](http://blog.athico.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:44:48.307

正如 Geoffrey 所说，大多数博客、论坛或讨论组都是零散的。以下是几个网站。

[http://ai-faq.com/#BestPlacesToTalkAboutAI](http://ai-faq.com/#BestPlacesToTalkAboutAI)：

*   OR Exchange（运筹学）
*   GameDev.net（游戏人工智能）
*   AIGameDev（游戏人工智能）
*   Developpez.com（广泛的人工智能，但在法语中）

[http://ai-faq.com/#otherFAQs](http://ai-faq.com/#otherFAQs)：

*   comp.ai.neural-nets
*   comp.ai.nat-lang： http: [//www.faqs.org/faqs/natural-lang-processing-faq/](http://www.faqs.org/faqs/natural-lang-processing-faq/)
*   comp.ai.genetic: [ftp://rtfm.mit.edu/pub/usenet/comp.ai.genetic/](ftp://rtfm.mit.edu/pub/usenet/comp.ai.genetic/)
*   comp.lang.lisp：[http ://www.cs.cmu.edu/afs/cs/Web/Groups/AI/lang/lisp/faq/](http://www.cs.cmu.edu/afs/cs/Web/Groups/AI/lang/lisp/faq/)

[http://ai-faq.com/#AIclasses](http://ai-faq.com/#AIclasses)：

*   最近的一系列在线课程：[http ://www.class-central.com/](http://www.class-central.com/)
*   伯克利网络广播
*   MIT OpenCourseWare 以及 MITx / edX 即将推出
*   斯坦福工程无处不在（SEE）
*   杂项 AI 讲座：http: [//videolectures.net/Top/Computer_Science/Artificial_Intelligence/](http://videolectures.net/Top/Computer_Science/Artificial_Intelligence/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:24:02.800

我想添加一些关于机器学习的博客：

*   [这个数字紧缩生活](http://blog.smellthedata.com/)
*   [机器学习理论](http://hunch.net/)
*   [数据挖掘：文本挖掘、可视化和社交媒体](http://datamining.typepad.com/data_mining/)
*   [人工智能与社会科学](http://brenocon.com/blog/)

# java - 将 Lucene 中的查询与 BooleanQuery 结合起来

> ID：11559798
> 
> 赞同：2
> 
> 时间：2012-07-19T11:23:05.707
> 
> 标签：java, solr, lucene

我创建了一个示例 Lucene 代码片段，它索引一个小文件。我能够正确执行索引并搜索单个字段值。但是，我想查询多个字段。我正在使用`BooleanQuery`，但它不起作用。

有人可以建议吗？这是我的代码片段。

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Set;

import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.document.Fieldable;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.IndexWriterConfig;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.BooleanClause;
import org.apache.lucene.search.BooleanQuery;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.ScoreDoc;
import org.apache.lucene.search.TermQuery;
import org.apache.lucene.search.TopScoreDocCollector;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.SimpleFSDirectory;
import org.apache.lucene.util.Version;

public class LocalFSLucene {

    private final Version version = Version.LUCENE_36;

    private final String indexDirectory = "/Work/Lucene/LocalFSIndex";

    private final String dataFile = "/Work/Lucene/data.txt";

    private final String fields[] = {"date", "time", "cs-method", "cs-uri",
                                     "sc-status", "time-taken"};

    private IndexWriterConfig config = null;

    public void setConfig() {

        /* Check if the IndexWriterConfiguration is available or not.
         * If not, we will create one and save it for any further references.
         */
        if (config == null) {
            config = new IndexWriterConfig(version, new StandardAnalyzer(version));
        }
    }

    private final String rowDelimiter = " ";
    public void buildIndex() throws Exception {

        /* Create the Configuration object for writing index files */
        setConfig();

        /* Get the handle to the directory where indexes will be created */
        Directory dir = new SimpleFSDirectory(new File(indexDirectory));

        /* Initialize the index writer object */
        IndexWriter indexWriter = new IndexWriter(dir, config);

        /* Reader object to read the data file */
        BufferedReader reader = new BufferedReader(new FileReader(dataFile));

        /* Read each line of the data and build the index on the fields */
        String row = null;

        while ((row = reader.readLine()) != null) {

            /* Get each field in the current row */
            String fieldValues[] = row.split(rowDelimiter);

            /* Create a document for each row to store the index information */
            Document doc = new Document();

            for (int i = 0; i < fields.length; i++) {
                doc.add(new Field(fields[i], fieldValues[i], Field.Store.YES, Field.Index.ANALYZED));
            }

            /* Add the document to index */
            indexWriter.addDocument(doc);
        }

        /* Push the index files on the File System */
        indexWriter.commit();

        /* Close the reader object */
        reader.close();

        /* Close the index writer object */
        indexWriter.close();

        System.out.println("Indexing is complete");
    }

    public void search(Map<String, String> params) throws Exception {

        /* Get the handle to the directory where indexes are be created */
        Directory dir = new SimpleFSDirectory(new File(indexDirectory));

        /* Create the Index Reader object to read the indexes created */
        IndexReader reader = IndexReader.open(dir);

        /* Create the detective object which will perform search operation */
        IndexSearcher detective = new IndexSearcher(reader);

        System.out.println("Total Number of Documents - " + detective.maxDoc());

        /* Build the query containing the clues which the detective will use
         * to solve the case.
         */
        //Query q = new QueryParser(version, field, new StandardAnalyzer(version)).parse(value);
        BooleanQuery q = new BooleanQuery();

        Set<String> fields = params.keySet();

        for (String field : fields) {
            q.add(new TermQuery(new Term(field, params.get(field))), BooleanClause.Occur.SHOULD);
        }

        /* The TopScoreDocCollector will create the bag where the detective will
         * put all the found clues to solve the case.
         */
        TopScoreDocCollector clueBag = TopScoreDocCollector.create(10, true);

        /* Ask the detective to start */
        detective.search(q, clueBag);

        /* Get all the clues which the detective found during investigation
         * and display them.
         */
        ScoreDoc clues[] = clueBag.topDocs().scoreDocs;

        System.out.println("Total Clues Found - " + clues.length);
        System.out.println();

        for (int i = 0; i < clues.length; i++) {

            /* Get the pointer to the clue */
            int clueId = clues[i].doc;

            /* Get the actual clue from the clue bag */
            Document clue = detective.doc(clueId);

            /* Print the document */
            List<Fieldable> lstFields = clue.getFields();

            System.out.print((i + 1) + " --> ");
            for (Fieldable fld : lstFields) {

                String strField = fld.name();

                String strValue = clue.get(strField);

                System.out.print(strField + ":" + strValue + "  ");
            }
            System.out.println();
        }
    }

    public static void main(String args[]) throws Exception {
        LocalFSLucene obj = new LocalFSLucene();

        //obj.buildIndex();

        Map<String, String> searchParams = new HashMap<String, String>();
        searchParams.put("cs-method", "GET");
        searchParams.put("cs-uri", "/blank");
        obj.search(searchParams);
    }
} 
```

这是`data.txt`我正在使用的。

```
2010-04-21 02:24:01 GET /blank 200 120
2010-04-21 02:24:01 GET /US/registrationFrame 200 605
2010-04-21 02:24:02 GET /US/kids/boys 200 785
2010-04-21 02:24:02 POST /blank 304 56
2010-04-21 02:24:04 GET /blank 304 233
2010-04-21 02:24:04 GET /blank 500 567
2010-04-21 02:24:04 GET /blank 200 897
2010-04-21 02:24:04 POST /blank 200 567
2010-04-21 02:24:05 GET /US/search 200 658
2010-04-21 02:24:05 POST /US/shop 200 768
2010-04-21 02:24:05 GET /blank 200 347 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:00:30.060

终于让那个东西工作了。以下是您应该如何使用它。

1.  `BooleanQuery`使用您的字段和参数构建您的查询。
2.  使用 .传递`BooleanQuery`要解析的字符串`QueryParser`。

这是相同的片段。

```
BooleanQuery b = new BooleanQuery();

Set<String> fields = params.keySet();
StandardAnalyzer analyzer = new StandardAnalyzer(version);

b.add(new TermQuery(new Term("cs-method", "GET"), BooleanClause.Occur.SHOULD);
b.add(new TermQuery(new Term("cs-uri", "/blank"), BooleanClause.Occur.SHOULD);

Query q = new QueryParser(version, "cs-method", analyzer).parse(b.toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T18:03:19.407

这是`main()`上面代码片段下方的方法：

```
public static void main(String args[]) throws Exception {
    LocalFSLucene obj = new LocalFSLucene();

    //obj.buildIndex();

    Map<String, String> searchParams = new HashMap<String, String>();
    searchParams.put("cs-method", "GET");
    searchParams.put("cs-uri", "/blank");
    obj.search(searchParams);
} 
```

此外，输出如下：

```
Total Number of Documents - 11
Total Clues Found - 0 
```

* * *

`QueryParser`和的查询不同`BooleanQuery`。我在另一个版本中看到了一个没有的`+`标志。`QueryParser`检查以下内容。

使用`QueryParser`

```
Query q = new QueryParser(version, "cs-method", new StandardAnalyzer(version)).parse("cs-method:GET AND cs-uri:/blank"); 
```

输出为`QueryParser`

```
Total Number of Documents - 11
Query --> +cs-method:get +cs-uri:blank
Total Clues Found - 5 
```

使用`BooleanQuery`

```
Map<String, String> searchParams = new HashMap<String, String>();
searchParams.put("cs-method", "GET");
searchParams.put("cs-uri", "/blank");
BooleanQuery q = new BooleanQuery();

Set<String> fields = params.keySet();
for (String field : fields) {
    q.add(new TermQuery(new Term(field, params.get(field))), BooleanClause.Occur.SHOULD);
} 
```

输出为`BooleanQuery`

```
Total Number of Documents - 11
Query --> cs-method:GET cs-uri:/blank
Total Clues Found - 0 
```

# sql - SQL查询从2个表中获取数据

> ID：11559805
> 
> 赞同：2
> 
> 时间：2012-07-19T11:23:25.590
> 
> 标签：sql

我有 2 个表，用户和文件。
用户有 (id, name)，
文件有 (id, user_id, path)。
我需要显示带有用户的表格和每个用户的上传文件数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T11:25:06.047

使用`LEFT JOIN`,`GROUP BY`和`COUNT`如下：

```
SELECT Users.name, COUNT(Files.id) AS files_count
FROM Users
LEFT JOIN Files
ON Users.id = Files.user_id
GROUP BY Users.name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:26:11.337

```
select
    u.id,u.name,count(f.id) as counting
from
    users as u inner join files as f on u.id=f.user_id
group by
      u.id,u.name 
```

# android - 操作栏列表导航 - 从下拉列表中隐藏当前项目

> ID：11559806
> 
> 赞同：0
> 
> 时间：2012-07-19T11:23:26.457
> 
> 标签：android, android-actionbar, actionbarsherlock

在我的应用程序中，我使用带有列表导航的操作栏。有诸如家庭、类别、多媒体之类的可能性......当我在家庭活动中时，我点击导航下拉菜单，但我想从列表中隐藏家庭项目。我在那个屏幕上，所以导航到同一个屏幕是没有意义的。是否有一些选项可以从下拉列表中隐藏选定/当前项目？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T10:23:24.853

可以的，就是有点麻烦。而且您不能使用真正的操作栏导航功能。您需要使用自定义 ActionView 添加自己的 MenuItem 并扩展 Spinner 类（请参阅[Spinner : onItemSelected not called when selected item保持不变，](https://stackoverflow.com/questions/10854329/spinner-onitemselected-not-called-when-selected-item-remains-the-same)因为下面的代码伪造了当前选择，当您在下拉菜单中选择“真实”时选项它不会触发 onItemSelected 事件）

关键是下拉菜单可以与选择的显示不同。有关此问题的更好解释，请参见此答案[Difference between getView & getDropDownView in SpinnerAdapter](https://stackoverflow.com/questions/13433874/different-between-getview-vs-getdropdownview-with-spinneradapter)

下面的代码是一个适配器，它只从 getView() 返回标题项目，但对 getDropDownView() 工作正常（即返回该位置的视图）

每次进行新选择时，您都必须重新创建适配器，但它会从下拉列表中删除当前活动。

```
class NavigationAdapter extends BaseAdapter implements SpinnerAdapter{

    ArrayList<NavigationItem> items;
    NavigationItem titleItem;
    public NavigationAdapter(ArrayList<NavigationItem> items, NavigationItem titleItem){
        this.items = items;
        this.titleItem = titleItem;
        //make sure the title item isn't also in our list
        Iterator<NavigationItem> iterator = items.iterator();
        while(iterator.hasNext()){
            NavigationItem item = iterator.next();
            if(item.getId() == titleItem.getId()){
                iterator.remove();
            }
        }
    }

    @Override
    public int getCount() {
        return items.size();
    }

    @Override
    public NavigationItem getItem(int position) {
        return items.get(position);
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        //only ever return the title item from this method
        if(convertView == null){
            convertView = LayoutInflater.from(Main.this).inflate(R.layout.listrow_single_line_with_image, null);
        }

        NavigationItem item = titleItem;

        TextView tv = (TextView) convertView;
        tv.setText(item.getName());
        Drawable d =  getResources().getDrawable(item.getDrawableId());
        d.setBounds(0, 0, 56, 56);
        tv.setCompoundDrawables(d, null, null, null);

        return convertView;
    } 

    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent) {

        if(convertView == null){
            convertView = LayoutInflater.from(Main.this).inflate(R.layout.listrow_single_line_with_image, null);
        }

        NavigationItem item = getItem(position);

        TextView tv = (TextView) convertView;
        tv.setText(item.getName());
        Drawable d =  getResources().getDrawable(item.getDrawableId());
        d.setBounds(0, 0, 56, 56);
        tv.setCompoundDrawables(d, null, null, null);

        return convertView;

    }

} 
```

上面的 NavigationItem 只是一个包装类，这里是为了完整性

```
class NavigationItem{
    int drawableId;
    String name;
    int id;
    public NavigationItem(int id, String name, int drawableId) {
        super();
        this.drawableId = drawableId;
        this.name = name;
        this.id = id;
    }
    public int getDrawableId() {
        return drawableId;
    }
    public void setDrawableId(int drawableId) {
        this.drawableId = drawableId;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
} 
```

# linq-to-sql - Linq2Sql 嵌套表

> ID：11559808
> 
> 赞同：0
> 
> 时间：2012-07-19T11:23:32.600
> 
> 标签：linq-to-sql

我的 LINQ2SQL 查询有问题。我试图只获取`TabA`关联`TabC` `Name`列包含例如lorem 的行。有任何想法吗 ？

我试试

```
(from x in db.TabA
 x.TabB.FirstOrDefault(y => y.TabC.name == "lorem") != null
 x).ToList(); 
```

但我得到了`method is not supported error`。

![在此处输入图像描述](../Images/22c4af07546482c95dab8dc8cdff97c0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:13:04.510

这是解决方案

```
(from x in db.TabA
 where x.TabB.Count(a => a.TabC.name == "lorem") > 0
 select x).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-19T20:22:30.933

你也可以试试这个它就像 sql 中的“like”查询一样工作。

```
(from x in db.TabA
 where x.TabB.Count(a => a.TabC.name.contains("lorem")) > 0
 select x).ToList(); 
```

# java - 如何使用java复制整个数据库方案

> ID：11559815
> 
> 赞同：0
> 
> 时间：2012-07-19T11:23:52.520
> 
> 标签：java, mysql, jdbc

我正在为我们的 MySQL 数据库创建一个中间件。我需要的部分内容是允许使用我的中间件的用户将选择的方案复制到具有不同名称的新方案中。我正在复制的方案应该与存储过程和所有表数据（如索引等）一起复制。

现在我知道如何使用 cmd 来执行此操作，但是如何使用 java 来执行此操作？另一点是运行适配器的电脑没有 MySQL 服务器，所以我不能通过 java 使用来自 cmd 的 MySQL 转储。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:41:42.537

您可以使用以下查询：

> 显示表格；

返回数据库中的表列表；

> 显示创建表_table_name_

将返回您的表格方案。（它包括键、索引）

> 显示过程状态

程序清单

> 显示创建过程_procedure_name_

程序代码

# jmeter - 如何在 JMETER 测试执行中的验证页面上获取新的加密 URL

> ID：11559820
> 
> 赞同：0
> 
> 时间：2012-07-19T11:24:00.107
> 
> 标签：jmeter

我是 Jmeter 的新手，在处理来自 jmeter 的请求时遇到了问题，我的测试用例如下：

1.  申请人必须从主页单击在线申请，这会将用户重定向到新的验证页面。
2.  在此页面上输入令牌编号和其他详细信息，然后单击验证按钮，它将重定向到要填写的详细信息数量的表格。
3.  填写所有必需的详细信息并提交。

总的来说看起来很简单，但为了保护应用程序开发人员，添加了两个带有普通 url 的查询字符串“Value”和“Digest”，这两个值是使用当前 session_id 作为密钥的服务器加密信息。
现在要执行第 2 步和第 3 步，我需要提供新的生成值和摘要。

请指导我如何检索单击按钮后收到的值。
与树结果侦听器一样，它仍然在同一页面上，以响应我向服务器发送请求，但无法检索新值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T11:00:59.370

您可以使用后处理器测试元素“正则表达式提取器”从先前的响应中提取内容以在以后的请求中使用它。想一个匹配这些值的正则表达式。服务器必须以某种方式告诉浏览器它们是什么，无论是在 http 32 重定向中还是在某个地方作为隐藏的输入表单字段。您可以从那里将其提取到一个变量中，并在随后的 http 请求的 GET 或 POST 参数中使用该变量。

# c# - 从 Class 对象访问枚举

> ID：11559825
> 
> 赞同：0
> 
> 时间：2012-07-19T11:24:25.450
> 
> 标签：c#, class, object, enums

我正在尝试开发一个可用于在 SQLite 中动态创建表/列的类；我创建了我的类如下：

```
public class NewColumns
{
    public string ClmName;

    public Types NewType { get; set; }

    public void SetName(string NewColumn)
    {
        ClmName = NewColumn;
    }
}

public enum Types
{
    INTEGER = 0,
    REAL = 1,
    NUMERIC = 2,
    TEXT = 3,
    BLOB = 4,
}

public static bool CreateTable(string DBPath, string TableName, params NewColumns ClumnName)
{
    bool succ = false;
    mDBcon.ConnectionString = "Data Source=" + DBPath + ".db3";
    mDBcon.Open();
    cmd = new SQLiteCommand(mDBcon);
    cmd.CommandText = "CREATE TABLE IF NOT EXISTS " + TableName + " (ISBN VARCHAR(15), Tag VARCHAR(15));";
    cmd.ExecuteNonQuery();
    return succ;
} 
```

我想像这样将我的新值传递给类：

```
clsSqlite.CreateTable("test", "newTable", new clsSqlite.NewColumns { ClmName = "", NewType.INTEGER }); 
```

但是上面代码中的“NewType”不能识别我的枚举值，如果我手动输入枚举值“INTEGER”，它会给我以下错误：

无效的初始化程序成员声明

在此先感谢您的帮助。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:27:32.330

```
clsSqlite.CreateTable(
    "test", 
    "newTable", 
    new clsSqlite.NewColumns { ClmName = "", NewType = Types.INTEGER }); 
```

`NewType`是您的属性的名称，枚举被称为`Types`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:26:46.860

将枚举移到类定义之外，你会没事的。

您可以考虑为您的枚举使用除 Types 之外的其他名称，因为它可能会在将来让您和其他人感到困惑。

并将您的变量更改为属性。

# string - 匹配多个单词中的字符串

> ID：11559826
> 
> 赞同：0
> 
> 时间：2012-07-19T11:24:29.713
> 
> 标签：string, algorithm, substring

我找到了许多关于如何匹配字符串中的多个模式的解决方案，但没有找到如何匹配多个单词中的单个字符串。

到目前为止，我所知道的最好的方法是对每个单词使用 KMP 算法，但这不是那么有效（复杂度 = 单词长度的总和），所以我正在寻找一些更好的算法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:34:13.063

你从根本上误解了这个问题。您可以轻松地将问题分解为查找单词中所有出现的字符串。这是通过将每个单独的字符串组合成一个大字符串（或单词）来完成的。然后您可以遍历这个较大的字符串一次并使用有效的算法，例如 KMP 或正则表达式（虽然不一定推荐使用正则表达式）。一个例子来说明我的意思：

```
List<String> stringList = new ArrayList<String>();

    String first = "abc";  
    String second = "def";  
    String third = "xyz";  
    stringList.add(first);  
    stringList.add(second);  
    stringList.add(third);  

for(String string : stringList)  
{  
    kmp(string);  
} 
```

等价于以下内容：

```
List<String> stringList = new ArrayList<String>();  
stringList.add("abcdefxyz");  
for(String string : stringList)  
{  
   kmp(string);   
} 
```

正如 Kevin 在评论中指出的那样，这里使用分隔符可以防止生成不正确的结果。

# java - Arduino与Java接口的问题

> ID：11559829
> 
> 赞同：0
> 
> 时间：2012-07-19T11:24:48.527
> 
> 标签：java, c, serial-port, arduino

我遵循了[与 Java 的接口教程](http://www.arduino.cc/playground/Interfacing/Java)，但在测试时遇到了一些问题。目前，当我尝试手动输入时，我的 Arduino 程序运行良好。

Arduino上的C代码段：

```
char line[20];
int line_pos = 0;
char action[10];
unsigned long duration;
boolean data_ready = false;

void setup()
{
  Serial.begin(9600);
  delay(1500);
  Serial.println("Ready!");
}

void loop()
{
char state;
if(Serial.available()>0)
{
    delay(20);
    state = Serial.read();

    if(state == '!')
    {
      data_ready = true;
      line[line_pos] = state;
      line_pos = 0;
    }
    else
    {
      line[line_pos] = state;
      line_pos = line_pos + 1;
    }

    if(data_ready == true)
    {
        split(line);
        Serial.print(action);
        delay(20);
        Serial.print("!");
        delay(20);
        Serial.print(duration);
        delay(20);
        Serial.print("!");

        Serial.println("Data has been split");

        if(strcmp(action, "left") == 0)
        {
            Serial.println("Received left");
        }
        else if(strcmp(action, "right") == 0)
        {
            Serial.println("Received rightt");
        }
        else if(strcmp(action, "straight") == 0)
        {
            Serial.println("Received straight");
        }

        memset(line, 0, 20);
        data_ready = false;
    }
    }
}  

void split(char input[20])
{
char *param, *ptr;

param = strtok_r(input, "#", &ptr);
strncpy(action, param, sizeof(action));
action[sizeof(action)-1] = '\0';

param = strtok_r(NULL, "!", &ptr);
duration = strtoul(param, &param, 10);
} 
```

当我输入“left#123！”时 我在 COM 中得到以下输出，如预期的那样。这里没有问题：

**准备好！left!123!数据已拆分 接收到左侧**

现在这是我的 Java 代码：

```
import java.io.InputStream;
import java.io.OutputStream;
import gnu.io.CommPortIdentifier; 
import gnu.io.SerialPort;
import gnu.io.SerialPortEvent; 
import gnu.io.SerialPortEventListener; 
import java.util.Enumeration;

public class SerialTest implements SerialPortEventListener {
    SerialPort serialPort;
        /** The port we're normally going to use. */
    private static final String PORT_NAMES[] = { 
            "/dev/tty.usbserial-A9007UX1", // Mac OS X
            "/dev/ttyUSB0", // Linux
        "COM3", // Windows
        };
/** Buffered input stream from the port */
private InputStream input;
/** The output stream to the port */
private OutputStream output;
/** Milliseconds to block while waiting for port open */
private static final int TIME_OUT = 2000;
/** Default bits per second for COM port. */
private static final int DATA_RATE = 9600;

private String display = "";

public void initialize() {
    CommPortIdentifier portId = null;
    Enumeration portEnum = CommPortIdentifier.getPortIdentifiers();

    // iterate through, looking for the port
    while (portEnum.hasMoreElements()) {
        CommPortIdentifier currPortId = (CommPortIdentifier) portEnum.nextElement();
        for (String portName : PORT_NAMES) {
            if (currPortId.getName().equals(portName)) {
                portId = currPortId;
                break;
            }
        }
    }

    if (portId == null) {
        System.out.println("Could not find COM port.");
        return;
    }

    try {
        // open serial port, and use class name for the appName.
        serialPort = (SerialPort) portId.open(this.getClass().getName(),
                TIME_OUT);

        // set port parameters
        serialPort.setSerialPortParams(DATA_RATE,
                SerialPort.DATABITS_8,
                SerialPort.STOPBITS_1,
                SerialPort.PARITY_NONE);

        // open the streams
        input = serialPort.getInputStream();
        output = serialPort.getOutputStream();

        // add event listeners
        serialPort.addEventListener(this);
        serialPort.notifyOnDataAvailable(true);
    } catch (Exception e) {
        System.err.println(e.toString());
    }
}

/**
 * This should be called when you stop using the port.
 * This will prevent port locking on platforms like Linux.
 */
public synchronized void close() {
    if (serialPort != null) {
        serialPort.removeEventListener();
        serialPort.close();
    }
}

/**
 * Handle an event on the serial port. Read the data and print it.
 */
public synchronized void serialEvent(SerialPortEvent oEvent) {
    if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) {
        try {
            int available = input.available();
            byte chunk[] = new byte[available];
            input.read(chunk, 0, available);

            System.out.println(display);

            display += (new String(chunk)).trim();
            if(display.contains("!"))
            {
                display = display.substring(0, display.indexOf("!"));

                if(display.equals("Ready"))
                {
                    String reply = "left#123!";
                    byte reply_byte[] = new byte[reply.length()];
                    reply_byte = reply.getBytes("UTF-16LE");
                    output.write(reply_byte);
                }

                display = "";
            }

        } catch (Exception e) {
            System.err.println(e.toString());
        }
    }
    // Ignore all the other eventTypes, but you should consider the other ones.
}

public static void main(String[] args) throws Exception {
    SerialTest main = new SerialTest();
    main.initialize();
    System.out.println("Started");
}
} 
```

下面是 Java 代码在控制台中打印的内容：

**实 0 数据 Datahas Datahasbee Datahasbeen sp Datahasbeen split**

串行输入似乎没有被流畅地读取，而是在重复部分中。有人可以帮我诊断问题并给我解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:59:11.713

这里至少有两件事需要注意，但这是基于我对 Java 以外的语言的经验，因此它的行为方式可能不完全相同。

首先是事件看起来像是在少数字符后被触发，也许您的 Arduino 发送速度不够快，无法同时出现。这会导致您的 Java 代码重复输出，因为您正在打印`display`然后将新的附加`chunk`到它。如果你没有找到感叹号，它永远不会被清除。你最好打印`chunk`一下，看看你收到了什么。

第二个是你可能只接收新数据的事件，所以如果新数据出现在事件被触发和你调用之间，`input.read()`那么另一个事件不会被触发。您最好在事件处理程序中有一个循环，在仍有可用数据时继续，例如：

```
public synchronized void serialEvent(SerialPortEvent oEvent) {
    if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) {
        try {
            int available = input.available();
            while (available > 0)
            {
                byte chunk[] = new byte[available];
                input.read(chunk, 0, available);

                System.out.println(new String(chunk));

                // Perform your packet processing here

                // See if there is any more data that came in while we were
                // processing the event
                available = input.available();
            }

        } catch (Exception e) {
            System.err.println(e.toString());
        }
    }
    // Ignore all the other eventTypes, but you should consider the other ones.
} 
```

# android - 如何在android / eclipse中使按钮的颜色像玻璃的颜色

> ID：11559832
> 
> 赞同：2
> 
> 时间：2012-07-19T11:25:00.650
> 
> 标签：android, eclipse, button

是否可以在 android/eclipse 上使按钮的背景颜色像玻璃的颜色？..如果是这样怎么办？如果不是为什么？

谢谢你的时间！...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T12:26:59.883

这是您正在寻找的解决方案。

使用这个 xml`drawable`

```
 <?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:state_focused="false">
    <shape >
        <gradient 
            android:startColor="#2F000000" 
            android:endColor="#2fDEDEDE"  
            android:angle="270" />
        <!-- <stroke 
            android:width="1dp" 
            android:color="#bb00ff00" /> -->
        <corners 
            android:radius="3dp" />
        <padding 
            android:left="10dp" 
            android:top="10dp" android:right="10dp" 
            android:bottom="10dp" />
    </shape>
</item>

<item android:state_pressed="true" >

    <shape>
        <gradient 
            android:startColor="#2F000000" 
            android:endColor="#2fDEDEDE" 
            android:angle="270" />
       <!--  <stroke 
            android:width="1dp" 
            android:color="#bb00ff00" /> -->
        <corners 
            android:radius="3dp" />
        <padding 
            android:left="10dp" 
            android:top="10dp" android:right="10dp" 
            android:bottom="10dp" />
    </shape>
</item>

<item>
    <shape>
         <gradient
            android:startColor="#2F000000" 
            android:endColor="#2fDEDEDE" 
            android:angle="180" />
            <!-- <gradient
            android:startColor="@color/cream_dark"
            android:endColor="@color/cream"
            android:angle="270"/> -->

         <!--  <stroke 
            android:width="1dp" 
            android:color="#ffffffff" />  -->
        <corners
            android:bottomRightRadius="3dp"
            android:bottomLeftRadius="3dp"
            android:topLeftRadius="3dp"
            android:topRightRadius="3dp"/>
        <padding 
            android:left="10dp" 
            android:top="10dp" android:right="10dp" 
            android:bottom="10dp" />
    </shape>
</item>

</selector> 
```

`usage`

```
 <Button android:id="@+id/text1"       
        android:layout_marginTop="200dp"
        android:layout_width="fill_parent"
        android:gravity="center"
        android:textColor="#FF1414"
        android:background="@drawable/btn_darkblue"=========>this is the button background
        android:text="Ram kiran"
        android:layout_marginLeft="50dp"
        android:layout_marginRight="50dp"
        android:textSize="15dp"
        android:layout_height="60dp"        
        /> 
```

它看起来像

![在此处输入图像描述](../Images/9849afc4d020bd6bc920c55e05a04023.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T06:01:20.677

尝试将此设置透明背景设置为按钮

`android:background="@android:color/transparent"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:48:26.483

我同意 Cata，但如果这些对您有帮助，您也可以使用形状或使用半透明颜色。您可以在[`vogella.com`](http://www.vogella.com/blog/2011/07/19/android-shapes/)或[`betaful.com`](http://www.betaful.com/2012/01/programmatic-shapes-in-android/)

# iphone - 将 NSDecimalNumber 与 NSDecimalNumber 相乘返回 0

> ID：11559835
> 
> 赞同：1
> 
> 时间：2012-07-19T11:25:07.167
> 
> 标签：iphone, objective-c, ios

我知道这种问题不应该问。但是，我在没有任何线索的情况下在这里停留了几天。所以，我真的需要帮助。

我有一个核心数据对象，比如说产品。

// 产品
NSDecimalNumber *quantity
NSDecimalNumber *price

我要做的是总结价格并将其设置为标签。我搜索并发现这里的一些主题说 NSDecimalNumber 不能进行标准匹配操作，因为它是一个包装实际值的对象。它必须通过**decimalNumberByAdding**和**decimalNumberByMultiplyingBy**来完成。所以，我写了下面的代码，

```
NSDecimalNumber *totalPrice = [[NSDecimalNumber alloc] initWithDouble:0.0];
[self.productArray enumerateObjectsUsingBlock:^(Product *product, NSUInteger idx, BOOL *stop) {
    [totalPrice decimalNumberByAdding:[product.price decimalNumberByMultiplyingBy:product.quantity]];
    NSLog(@"%@", totalPrice);
    NSLog(@"%@", totalPrice.doubleValue);
    NSLog(@"%@", totalPrice.decimalValue);
}]; 
```

这些 NSLog 都没有显示正确的结果。他们既没有显示 0 也没有显示 NULL

但是，如果我 NSLog 以下代码，可以显示正确的结果。

```
[product.price decimalNumberByMultiplyingBy:product.quantity] 
```

你能帮我指出我在这里想念什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T11:35:20.500

您没有分配返回值。

```
[totalPrice decimalNumberByAdding:[product.price decimalNumberByMultiplyingBy:product.quantity]]; 
```

应该：

```
totalPrice = [totalPrice decimalNumberByAdding:[product.price decimalNumberByMultiplyingBy:product.quantity]]; 
```

由于 decimalNumberByAdding 返回一个值，因此不会自动更新变量。因此，totalPrice 始终为 0，这是您在初始化时分配的值。

# php - 如何使用当前用户（登录用户）在 MySql 中切换用户并备份数据库？

> ID：11559840
> 
> 赞同：0
> 
> 时间：2012-07-19T11:25:24.723
> 
> 标签：php, mysql, phpmyadmin

我正在使用 phpmyadmin 连接到 mysql。
我当前的用户对查看所有数据库有一些限制。
我也无法更改 phpmyadmin 的当前用户并使用管理员用户登录，因为我在 cpanel 中。
我有管理员用户名和密码。
我应该使用哪个 sql 查询来切换到该用户可以看到的管理员用户和备份数据库？
另外我怎样才能将该 sql 文件下载到我的本地机器上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:31:26.440

```
UPDATE mysql.user SET Grant_priv='Y', Super_priv='Y' WHERE User='root'; 
```

# objective-c - 删除 Xcode 中的匿名实例警告

> ID：11559843
> 
> 赞同：0
> 
> 时间：2012-07-19T11:25:39.823
> 
> 标签：objective-c, xcode, instance-variables

我有一个从一个类创建的匿名实例，它在它的自定义实例方法中添加它以便超级视图层和动画它，虽然这很好用 Xcode 给我一个警告，'未使用的表达式结果'，有没有办法消除这个错误不改变班级？

如果我用指针创建一个实例，我只会得到“未使用的变量“myIVar”，因为我不需要在我的代码中指向它。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:49:34.780

正如@Hot Licks 所指出的，

“我从未见过你所说的这种警告，但你可以使用`__unused`声明中的属性消除未使用的变量消息。”

# c# - 三类之间的循环引用

> ID：11559845
> 
> 赞同：-1
> 
> 时间：2012-07-19T11:25:44.100
> 
> 标签：c#, class, circular-reference

我有三个类，它们之间有一个循环引用。

```
class A 
{
    public A()
    {
        B obj = new B();
    }
}
class B
{
    public B()
    {
        C obj = new C();
    }
}
class C
{
    public C()
    {
        A obj = new A();
    }
} 
```

当我创建 的对象时`A`，它会引发异常。
如何创建循环引用彼此的类实例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T11:29:00.977

> 当我创建 A 的对象时，它会抛出异常

嗯，是的，它会的。创建`A`创建一个新`B`的创建一个新的`C`，创建一个新的`A`等等。

> 我该如何解决循环引用。

大概您希望`C`构造函数了解原始信息`A`？如果是这样，有两种选择：

*   分别构建所有三个，然后告诉他们彼此。这要求类型是可变的。
*   `this`从`A`构造函数传递给`B`构造函数，然后从`B`构造函数传递给`C`构造函数。`this`就允许escape的构造函数而言，这是令人讨厌的`A`，应该*非常*小心地完成。（`B`并且`C`在实例有机会完成初始化之前不应调用实例上的任何方法。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T11:29:29.663

你可以这样做：

```
class A 
{
    public B b;

    public A()
    {
        this.b = new B(new C(this));
    }
}
class B
{
    public C c;
    public B(C c)
    {
        this.c = c;       
    }
}
class C
{
    public A a;
    public C(A a)
    {
        this.a = a;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T11:36:27.837

您也可以尝试[延迟](http://msdn.microsoft.com/en-us/library/dd997286.aspx)加载对象。这样，它们实际上不会立即构造，也不会进入构造的循环循环，而是在您真正需要它们时构造。

您可以尝试在 MSDN 文章中使用 C# 的[实现](http://www.jkillaars.nl/tech/?p=34)`Lazy<T>`，或者通过使用.`get{ }`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-19T11:31:07.517

仍然简洁的最简单方法是创建一个接口 IA，它为类 A 定义公共接口。然后让类 A 实现接口 IA。然后添加一个可以创建 A 实例并返回 IA 的工厂类。这样类 C 不需要知道类 A 并且循环引用被破坏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T11:29:07.080

当你调用 A、B 或 C 的构造函数时，你总是会得到一个异常。也许你可以通过将参数传递给构造函数来解决它，但我想知道你想用这个结构做什么。你能告诉我吗？

# sql - 如何使用 SQL Server 列出文件夹内的文件

> ID：11559846
> 
> 赞同：57
> 
> 时间：2012-07-19T11:25:48.420
> 
> 标签：sql, sql-server

如何在不使用`xp_cmdshell`存储过程的情况下列出 SQL Server 中文件夹内的文件？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-11-27T23:10:46.240

您可以使用**xp_dirtree**

它需要三个参数：

**根目录的路径，**要 获取文件和文件夹的**深度，最后一个用于仅显示文件夹或同时显示文件夹和文件。**

例子：`EXEC xp_dirtree 'C:\', 2, 1`

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-03-20T02:25:50.797

可以使用 xp_DirTree 完成，然后在需要时循环生成完整的文件路径。

这是我用来自动将数据库恢复到测试服务器的脚本的摘录。它扫描文件夹和所有子文件夹以查找任何备份文件，然后返回完整路径。

* * *

```
 DECLARE @BackupDirectory SYSNAME = @BackupFolder

  IF OBJECT_ID('tempdb..#DirTree') IS NOT NULL
    DROP TABLE #DirTree

  CREATE TABLE #DirTree (
    Id int identity(1,1),
    SubDirectory nvarchar(255),
    Depth smallint,
    FileFlag bit,
    ParentDirectoryID int
   )

   INSERT INTO #DirTree (SubDirectory, Depth, FileFlag)
   EXEC master..xp_dirtree @BackupDirectory, 10, 1

   UPDATE #DirTree
   SET ParentDirectoryID = (
    SELECT MAX(Id) FROM #DirTree d2
    WHERE Depth = d.Depth - 1 AND d2.Id < d.Id
   )
   FROM #DirTree d

  DECLARE 
    @ID INT,
    @BackupFile VARCHAR(MAX),
    @Depth TINYINT,
    @FileFlag BIT,
    @ParentDirectoryID INT,
    @wkSubParentDirectoryID INT,
    @wkSubDirectory VARCHAR(MAX)

  DECLARE @BackupFiles TABLE
  (
    FileNamePath VARCHAR(MAX),
    TransLogFlag BIT,
    BackupFile VARCHAR(MAX),    
    DatabaseName VARCHAR(MAX)
  )

  DECLARE FileCursor CURSOR LOCAL FORWARD_ONLY FOR
  SELECT * FROM #DirTree WHERE FileFlag = 1

  OPEN FileCursor
  FETCH NEXT FROM FileCursor INTO 
    @ID,
    @BackupFile,
    @Depth,
    @FileFlag,
    @ParentDirectoryID  

  SET @wkSubParentDirectoryID = @ParentDirectoryID

  WHILE @@FETCH_STATUS = 0
  BEGIN
    --loop to generate path in reverse, starting with backup file then prefixing subfolders in a loop
    WHILE @wkSubParentDirectoryID IS NOT NULL
    BEGIN
      SELECT @wkSubDirectory = SubDirectory, @wkSubParentDirectoryID = ParentDirectoryID 
      FROM #DirTree 
      WHERE ID = @wkSubParentDirectoryID

      SELECT @BackupFile = @wkSubDirectory + '\' + @BackupFile
    END

    --no more subfolders in loop so now prefix the root backup folder
    SELECT @BackupFile = @BackupDirectory + @BackupFile

    --put backupfile into a table and then later work out which ones are log and full backups  
    INSERT INTO @BackupFiles (FileNamePath) VALUES(@BackupFile)

    FETCH NEXT FROM FileCursor INTO 
      @ID,
      @BackupFile,
      @Depth,
      @FileFlag,
      @ParentDirectoryID 

    SET @wkSubParentDirectoryID = @ParentDirectoryID      
  END

  CLOSE FileCursor
  DEALLOCATE FileCursor 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-19T11:49:51.177

为避免授予所需的*系统管理员*权限`xp_dirtree`，请改为执行以下操作：

## SQLCLR

创建一个具有外部访问权限的[SQLCLR](https://en.wikipedia.org/wiki/SQL_CLR)程序集，该程序集将文件列表作为结果集返回。有很多例子可以说明如何做到这一点。

这是使用*纯 SQL*创建 SQLCLR 的方法；这是乔纳森·凯哈亚斯的。[完整的解释。](https://www.sqlservercentral.com/articles/trading-in-xp_cmdshell-for-sqlclr-part-1-list-directory-contents)

（安装后，这样称呼它`SELECT * FROM master.dbo.os_directory_info('C:\', default)`：）

### 用于创建目录列表功能的 SQL 脚本

```
/*
-- To uninstall:
USE [master]
GO
DROP FUNCTION [dbo].[os_directory_info]
DROP ASSEMBLY SQLCLRNet_DirectoryBrowser
DROP USER SQLCLRNet_ExampleLogin
DROP LOGIN SQLCLRNet_ExampleLogin 
DROP ASYMMETRIC KEY SQLCLRNet_ExampleKey
GO
*/

/*
* This script creates a function that lists the contents of the given directory.
* It uses a .NET CLR instead of the unsecure option of using xp_cmdshell or xp_dirtree which require sysadmin priveleges.
* It is the handywork of Jonathan Kehayias. You can find the complete explanation and source code here: https://www.sqlservercentral.com/articles/trading-in-xp_cmdshell-for-sqlclr-part-1-list-directory-contents
* 
* Once installed, call the function using something like:
*     SELECT *
*     FROM master.dbo.os_directory_info('C:\', default)
*/

-- Enable Common Language Runtimes (.NET code plugins)
-- (Microsoft Docs on this: https://docs.microsoft.com/en-us/sql/relational-databases/clr-integration/clr-integration-enabling?view=sql-server-ver15)
EXEC sp_configure 'clr enabled', 1;  
RECONFIGURE;  
GO 

USE [master]
GO

/****** Object:  SqlAssembly [SQLCLRNet_DirectoryBrowser]    Script Date: 01/23/2009 22:19:49 ******/
IF  EXISTS (SELECT * FROM sys.assemblies asms WHERE asms.name = N'SQLCLRNet_DirectoryBrowser')
DROP ASSEMBLY [SQLCLRNet_DirectoryBrowser]

GO

/****** Object:  SqlAssembly [SQLCLRNet_DirectoryBrowser]    Script Date: 01/23/2009 22:19:49 ******/
CREATE ASSEMBLY [SQLCLRNet_DirectoryBrowser]
AUTHORIZATION [dbo]
-- Hexadecimal representation of Precompiled Binary below. (Source code here: https://www.sqlservercentral.com/articles/trading-in-xp_cmdshell-for-sqlclr-part-1-list-directory-contents)
FROM 0x4D5A90000300000004000000FFFF0000B800000000000000400000000000000000000000000000000000000000000000000000000000000000000000800000000E1FBA0E00B409CD21B8014CCD21546869732070726F6772616D2063616E6E6F742062652072756E20696E20444F53206D6F64652E0D0D0A2400000000000000504500004C0103008C887A490000000000000000E00002210B0108000010000000080000000000000E2F000000200000004000000000400000200000000200000400000000000000040000000000000000800000000200001B020100030040850000100000100000000010000010000000000000100000000000000000000000C02E00004B000000004000006004000000000000000000000000000000000000006000000C000000E02D00001C0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000080000000000000000000000082000004800000000000000000000002E74657874000000140F0000002000000010000000020000000000000000000000000000200000602E7273726300000060040000004000000006000000120000000000000000000000000000400000402E72656C6F6300000C0000000060000000020000001800000000000000000000000000004000004200000000000000000000000000000000F02E0000000000004800000002000500642200007C0B00000900000000000000000000000000000050200000800000000000000000000000000000000000000000000000000000000000000000000000897E69923F70A4BADA0B6E1E1BC164F4F71B7C6FFC97C8DA03DAA4AD965FC428DA61F34B05E1DA6E73AC47D2B64C10791C9945AD4A8AD582286E71B6AB8D9215417732F17E43650EBB0C3B31ABE323C7E627DE10E021072588858B456BF9293EFC2A9D5BDC719A0ED62237A9075402DE93B44C3A99AA3396E7D670E39B875079133002004D00000001000011000F00281000000A731100000A0A0F01281200000A2D160F01281000000A7E1300000A281400000A16FE012B01160C082D09066F1500000A0B2B10060F01281000000A6F1600000A0B2B00072A0000001330020024010000020000110002751A00000114FE0316FE010C083A8D0000000002741A0000010A03066F1700000A281800000A8103000001047E1900000A810400000105066F1A00000A281B00000A81050000010E04066F1C00000A281D00000A81060000010E05066F1E00000A281D00000A81060000010E06066F1F00000A281D00000A81060000010E07066F2000000A8C1C0000016F2100000A281800000A8103000001003882000000000274190000010B03076F1700000A281800000A8103000001047E2200000A8104000001057E2300000A81050000010E04076F1C00000A281D00000A81060000010E05076F1E00000A281D00000A81060000010E06076F1F00000A281D00000A81060000010E07076F2000000A8C1C0000016F2100000A281800000A8103000001002A1E02282400000A2A42534A4201000100000000000C00000076322E302E35303732370000000005006C000000D8020000237E0000440300007C04000023537472696E677300000000C00700000800000023555300C8070000100000002347554944000000D8070000A403000023426C6F620000000000000002000001471502000900000000FA013300160000010000001C00000002000000030000000A000000240000000C00000002000000010000000200000000000A0001000000000006004E0047000600680055000A00950080000A00B10080000A00BC0080000A00C50080000600280109010600940182010600AB0182010600C80182010600E701820106000002820106001902820106003402820106004F02820106006802090106007C0282010600A80295024B00BC0200000600EB02CB0206000B03CB020A005F034403060088037E030600A10347000600BA037E030600DC037E0306000B04470006004A047E0300000000010000000000010001000100100029000000050001000100D0200000000096009F000A0001002C21000000009100D100130003005C22000000008618EB002D000B0000000100F10000000200F60000000100FD00020002000101020003003501020004004201020005004701020006005601020007006801020008007B013900EB002D004100EB0031004900EB0031005100EB0031005900EB0031006100EB0031006900EB0031007100EB0031007900EB0031008100EB0036008900EB0031009100EB003B00A100EB004100A900EB002D00B100EB002D00190074039E02B900EB00310019009603A202C100A803A602C100AE03A902B900C903AF02B900C903B502C900E5039E021900EE03C4022100FA03CA02D1000004CE022900EE03D202C9001404D8023100EE03DD02C9002504D802C9003704D802C9005904E402090068049E0221007104CA0229007604E9020900EB002D0020007B00E8002E003300F5022E001B0015032E00230015032E002B001B032E001300F5022E003B003E032E00430015032E00530015032E00630073032E006B007C032E0073008503BC02ED020480000001000000EE0CDE9C0100000046002903000002000000000000000000000001003E000000000002000000000000000000000001007400000000000000003C4D6F64756C653E0053514C434C524E65745F4469726563746F727942726F777365722E646C6C0055736572446566696E656446756E6374696F6E73006D73636F726C69620053797374656D004F626A6563740053797374656D2E436F6C6C656374696F6E730049456E756D657261626C650053797374656D2E446174610053797374656D2E446174612E53716C54797065730053716C537472696E67006F735F6469726563746F72795F696E666F0053716C426F6F6C65616E0053716C496E7436340053716C4461746554696D65006F735F6469726563746F72795F696E666F5F46696C6C526F77002E63746F7200706174680066696C746572006F626A00616C746E616D650053797374656D2E52756E74696D652E496E7465726F705365727669636573004F75744174747269627574650069735F6469726563746F72790073697A65006372656174656461746574696D65006C61737477726974656461746574696D65006C6173746163636573736461746574696D65006174747269620053797374656D2E5265666C656374696F6E00417373656D626C795469746C6541747472696275746500417373656D626C794465736372697074696F6E41747472696275746500417373656D626C79436F6E66696775726174696F6E41747472696275746500417373656D626C79436F6D70616E7941747472696275746500417373656D626C7950726F6475637441747472696275746500417373656D626C79436F7079726967687441747472696275746500417373656D626C7954726164656D61726B41747472696275746500417373656D626C7943756C7475726541747472696275746500436F6D56697369626C6541747472696275746500417373656D626C7956657273696F6E4174747269627574650053797374656D2E446961676E6F73746963730044656275676761626C6541747472696275746500446562756767696E674D6F6465730053797374656D2E52756E74696D652E436F6D70696C6572536572766963657300436F6D70696C6174696F6E52656C61786174696F6E734174747269627574650052756E74696D65436F6D7061746962696C6974794174747269627574650053514C434C524E65745F4469726563746F727942726F77736572004D6963726F736F66742E53716C5365727665722E5365727665720053716C46756E6374696F6E417474726962757465006765745F56616C75650053797374656D2E494F004469726563746F7279496E666F006765745F49734E756C6C00537472696E6700456D707479006F705F457175616C6974790046696C6553797374656D496E666F0047657446696C6553797374656D496E666F730046696C65496E666F006765745F4E616D65006F705F496D706C696369740046616C7365006765745F4C656E677468004461746554696D65006765745F4372656174696F6E54696D65006765745F4C617374577269746554696D65006765745F4C61737441636365737354696D650046696C6541747472696275746573006765745F4174747269627574657300546F537472696E670054727565004E756C6C000000032000000000009ECB0FEF72F31F419C9076BDA15576330008B77A5C561934E0890800021209110D110D190008011C10110D10111110111510111910111910111910110D03200001042001010E042001010205200101114D042001010880A00024000004800000940000000602000000240000525341310004000001000100F7671782FE28927CFC962926986C6805F2FCF63C5AE36629B96FF4E04219D3AB0CBAA70305FD298B110328AFAC7ACADC6F845C263467870B4C90E707CC84F80396E8DAA766E6FE5738F73BF896119BB97C3B8B4B7841309E1E65C2FC214CBBF4AA511652033F15820F76EF404CA389D639AA8D256EBDF82E705A122C4385ABB581B401000500540E044E616D65116F735F6469726563746F72795F696E666F540E1146696C6C526F774D6574686F644E616D65196F735F6469726563746F72795F696E666F5F46696C6C526F775455794D6963726F736F66742E53716C5365727665722E5365727665722E446174614163636573734B696E642C2053797374656D2E446174612C2056657273696F6E3D322E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038390A446174614163636573730000000054020F497344657465726D696E697374696301540E0F5461626C65446566696E6974696F6E80B76E616D65206E766172636861722834303030292C2069735F6469726563746F7279206269742C2073697A655F696E5F627974657320626967696E742C206372656174655F64617465206461746574696D652C0D0A2020202020202020202020202020202020202020202020206C6173745F7772697474656E5F746F206461746574696D652C206C6173745F6163636573736564206461746574696D652C2061747472696275746573206E766172636861722834303030290320000E0320000202060E050002020E0E0520001D12650620011D12650E070703125D120902050001110D0E030611110320000A05000111150A042000116D0600011119116D04200011710306111507070312691265021F01001A53514C434C524E65745F4469726563746F727942726F7773657200000501000000002201001D4F53492052657374617572616E7420506172746E6572732C20496E632E00003401002F436F7079726967687420C2A9204F53492052657374617572616E7420506172746E6572732C20496E632E203230303900000801000701000000000801000800000000001E01000100540216577261704E6F6E457863657074696F6E5468726F777301000000008C887A490000000002000000C4000000FC2D0000FC0F000052534453A92E044D99B24A418E5662F67CF1EFCC03000000433A5C446F63756D656E747320616E642053657474696E67735C6A6B656861796961735C4D7920446F63756D656E74735C56697375616C2053747564696F20323030385C50726F6A656374735C53514C434C524E65745F4469726563746F727942726F777365725C53514C434C524E65745F4469726563746F727942726F777365725C6F626A5C44656275675C53514C434C524E65745F4469726563746F727942726F777365722E70646200E82E00000000000000000000FE2E0000002000000000000000000000000000000000000000000000F02E00000000000000005F436F72446C6C4D61696E006D73636F7265652E646C6C0000000000FF2500204000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100100000001800008000000000000000000000000000000100010000003000008000000000000000000000000000000100000000004800000058400000080400000000000000000000080434000000560053005F00560045005200530049004F004E005F0049004E0046004F0000000000BD04EFFE0000010000000100DE9CEE0C00000100DE9CEE0C3F000000000000000400000002000000000000000000000000000000440000000100560061007200460069006C00650049006E0066006F00000000002400040000005400720061006E0073006C006100740069006F006E00000000000000B00468030000010053007400720069006E006700460069006C00650049006E0066006F0000004403000001003000300030003000300034006200300000005C001E00010043006F006D00700061006E0079004E0061006D006500000000004F00530049002000520065007300740061007500720061006E007400200050006100720074006E006500720073002C00200049006E0063002E00000060001B000100460069006C0065004400650073006300720069007000740069006F006E0000000000530051004C0043004C0052004E00650074005F004400690072006500630074006F0072007900420072006F0077007300650072000000000040000F000100460069006C006500560065007200730069006F006E000000000031002E0030002E0033003300310030002E00340030003100350038000000000060001F00010049006E007400650072006E0061006C004E0061006D0065000000530051004C0043004C0052004E00650074005F004400690072006500630074006F0072007900420072006F0077007300650072002E0064006C006C000000000084002F0001004C006500670061006C0043006F007000790072006900670068007400000043006F0070007900720069006700680074002000A90020004F00530049002000520065007300740061007500720061006E007400200050006100720074006E006500720073002C00200049006E0063002E00200032003000300039000000000068001F0001004F0072006900670069006E0061006C00460069006C0065006E0061006D0065000000530051004C0043004C0052004E00650074005F004400690072006500630074006F0072007900420072006F0077007300650072002E0064006C006C000000000058001B000100500072006F0064007500630074004E0061006D00650000000000530051004C0043004C0052004E00650074005F004400690072006500630074006F0072007900420072006F0077007300650072000000000044000F000100500072006F006400750063007400560065007200730069006F006E00000031002E0030002E0033003300310030002E00340030003100350038000000000048000F00010041007300730065006D0062006C0079002000560065007200730069006F006E00000031002E0030002E0033003300310030002E0034003000310035003800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000C000000103F00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
WITH PERMISSION_SET = SAFE

GO

-- Create the Asymmetric Key from the Assembly. (More about `CREATE ASYMMETRIC KEY`: https://docs.microsoft.com/en-us/sql/t-sql/statements/create-asymmetric-key-transact-sql?view=sql-server-ver15#:~:text=An%20asymmetric%20key%20is%20a,generates%20a%20new%20key%20pair.&text=The%20private%20key%20can%20be,1024%2C%20or%202048%20bits%20long.)
CREATE ASYMMETRIC KEY SQLCLRNet_ExampleKey 
FROM ASSEMBLY [SQLCLRNet_DirectoryBrowser]
GO

-- Create the Login from the Asymmetric Key
CREATE LOGIN SQLCLRNet_ExampleLogin 
FROM ASYMMETRIC KEY SQLCLRNet_ExampleKey
GO

-- Grant the External Access Privilege to the Login
GRANT EXTERNAL ACCESS ASSEMBLY TO SQLCLRNet_ExampleLogin 
GO

-- Create the database user for Authorization on the Assembly
CREATE USER SQLCLRNet_ExampleLogin FOR LOGIN SQLCLRNet_ExampleLogin
GO

-- Set Authorization to the Database User
ALTER AUTHORIZATION ON ASSEMBLY::[SQLCLRNet_DirectoryBrowser] TO SQLCLRNet_ExampleLogin
GO

-- Set the Assembly for External Access
ALTER ASSEMBLY [SQLCLRNet_DirectoryBrowser] WITH PERMISSION_SET = EXTERNAL_ACCESS
GO

-- Create the TSQL Function that maps to the Assembly
CREATE FUNCTION [dbo].[os_directory_info](@path [nvarchar](max), @filter [nvarchar](100) = null)
RETURNS  TABLE (
    [name] [nvarchar](max) NULL,
    [is_directory] [bit] NULL,
    [size_in_bytes] [bigint] NULL,
    [create_date] [datetime] NULL,
    [last_written_to] [datetime] NULL,
    [last_accessed] [datetime] NULL,
    [attributes] [nvarchar](max) NULL
) WITH EXECUTE AS CALLER
AS 
EXTERNAL NAME [SQLCLRNet_DirectoryBrowser].[UserDefinedFunctions].[os_directory_info]

/*
You can now run this function using something like
    SELECT *
    FROM master.dbo.os_directory_info('C:\', default)
*/ 
```

原始文章：[为 SQLCLR 交易 xp_cmdshell（第 1 部分）- 列出目录内容](https://www.sqlservercentral.com/articles/trading-in-xp_cmdshell-for-sqlclr-part-1-list-directory-contents)

和的一些**主要好处**：`xp_cmdshell``xp_dirtree`

*   运行时不需要*系统管理员*权限。
*   功能消失的风险不会因为它没有被记录在案。
*   有限的攻击面

* * *

另一个例子：[又一个 TVF：从目录返回文件](http://web.archive.org/web/20150703133004/http://blogs.msdn.com/b/sqlclr/archive/2005/05/20/420623.aspx)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-19T12:04:57.523

如果您愿意，可以使用 CLR 函数/程序集来实现此目的。

1.  创建 SQL Server CLR 程序集项目。
2.  转到属性并确保连接上的权限级别设置为外部
3.  向程序集添加一个 Sql 函数。

这是一个示例，可让您像表格一样选择结果集。

```
public partial class UserDefinedFunctions
{
    [SqlFunction(DataAccess = DataAccessKind.Read,
        FillRowMethodName = "GetFiles_FillRow", TableDefinition = "FilePath nvarchar(4000)")]
    public static IEnumerable GetFiles(SqlString path)
    {
        return System.IO.Directory.GetFiles(path.ToString()).Select(s => new SqlString(s));
    }

    public static void GetFiles_FillRow(object obj,out SqlString filePath)
    {
        filePath = (SqlString)obj;
    }
}; 
```

还有你的 SQL 查询。

```
use MyDb

select * From GetFiles('C:\Temp\'); 
```

但请注意，您的数据库需要使用以下 SQL 命令启用 CLR 程序集功能。

```
sp_configure 'clr enabled', 1
GO
RECONFIGURE
GO 
```

默认情况下禁用CLR 程序集（如`XP_CMDShell`），因此如果不使用 XP Cmd Shell 的原因是因为**您没有权限**，那么您也可能会被此选项卡住……仅供参考。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-12T01:39:19.280

我找了很长时间才找到一个简单的解决方案，最后发现了一些非常复杂的 CLR 解决方案，因此决定编写我自己的简单 VB 解决方案。只需从*已安装模板下的**数据库*选项卡创建一个新的 VB CLR 项目，然后添加一个新的*SQL CLR VB 用户定义函数*。我将其重命名为**CLRGetFilesInDir.vb**。这是里面的代码...

 ****```
Imports System
Imports System.Data
Imports System.Data.Sql
Imports System.Data.SqlTypes
Imports Microsoft.SqlServer.Server
Imports System.IO
-----------------------------------------------------------------------------
Public Class CLRFilesInDir
-----------------------------------------------------------------------------
<SqlFunction(FillRowMethodName:="FillRowFiles", IsDeterministic:=True, IsPrecise:=True, TableDefinition:="FilePath nvarchar(4000)")> _
Public Shared Function GetFiles(PathName As SqlString, Pattern As SqlString) As IEnumerable
    Dim FileNames As String()

    Try
    FileNames = Directory.GetFiles(PathName, Pattern, SearchOption.TopDirectoryOnly)
    Catch
        FileNames = Nothing
    End Try

    Return FileNames

End Function
-----------------------------------------------------------------------------
Public Shared Sub FillRowFiles(ByVal obj As Object, ByRef Val As SqlString)
    Val = CType(obj, String).ToString
End Sub

End Class 
```

我还将*项目属性*窗口中的程序集名称更改为**CLRExcelFiles**，并将默认命名空间更改为**CLRGetExcelFiles**。

注意：如果您使用的不是 SQL Server 2012，请将目标框架设置为 3.5。

编译项目，然后将 CLRExcelFiles.dll 从 \bin\release 复制到**SQL Server 机器上的**C:\temp 之类的地方，而不是您自己的。

在 SSMS 中：-

```
CREATE ASSEMBLY <your assembly name in here - anything you like>
FROM 'C:\temp\CLRExcelFiles.dll';

CREATE FUNCTION dbo.fnGetFiles
(
@PathName NVARCHAR(MAX),
@Pattern NVARCHAR(MAX)
)
RETURNS TABLE (Val NVARCHAR(100))
AS
EXTERNAL NAME <your assembly name>."CLRGetExcelFiles.CLRFilesInDir".GetFiles;
GO 
```

然后调用它

```
SELECT * FROM dbo.fnGetFiles('\\<SERVERNAME>\<$SHARE>\<folder>\' , '*.xls') 
```

注意：即使我在项目属性下的 SQLCLR 选项卡上将权限级别更改为 EXTERNAL_ACCESS，我仍然需要在每次（重新）创建它时运行它。

```
ALTER ASSEMBLY [CLRFilesInDirAssembly] 
WITH PERMISSION_SET = EXTERNAL_ACCESS 
GO 
```

和乌拉！那应该工作。

* * *

## 回答 #6

> 赞同：-7
> 
> 时间：2012-07-19T20:47:32.390

非常简单，只需使用 SQLCMD 语法。

记得在 SSMS 中启用 SQLCMD 模式，在 Query -> SQLCMD Mode 下查看

尝试执行：

!!目录
!!:GO

或者也许：
!!DIR "c:/temp"
!!:GO****

# c++ - 编译使用matlab引擎的c++程序eclipse

> ID：11559855
> 
> 赞同：0
> 
> 时间：2012-07-19T11:26:13.723
> 
> 标签：c++, eclipse, matlab, linker, matlab-engine

我正在尝试配置 eclipse 来编译和运行`engdemo.cpp`使用 matlab 引擎的示例。

我按照[这里](http://mindchasers.net/knowledge/matlabengine.html)写的说明进行操作，但仍然有错误：

```
make all 
Building target: matlabEngine
Invoking: GCC C++ Linker
g++ -L/usr/local/MATLAB/R2011a/bin/glnx86 -Xlinker -rpath-link -Xlinker /usr/local/MATLAB/R2011a/bin/glnx86 -o"matlabEngine"  ./engdemo.o   -leng -lm -lmat -lmex -lut
/usr/bin/ld: ./engdemo.o: undefined reference to symbol 'mxDestroyArray'
/usr/bin/ld: note: 'mxDestroyArray' is defined in DSO /usr/local/MATLAB/R2011a/bin/glnx86/libmx.so so try adding it to the linker command line
/usr/local/MATLAB/R2011a/bin/glnx86/libmx.so: could not read symbols: Invalid operation
collect2: ld returned 1 exit status
make: *** [matlabEngine] Errore 1 
```

当我从 shell 编译程序时，我使用这些命令，并且没有错误，所以我可以运行它。

```
g++ -c  -I/usr/local/MATLAB/R2011a/extern/include -I/usr/local/MATLAB/R2011a/simulink/include -DMATLAB_MEX_FILE -ansi -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/local/MATLAB/R2011a/extern/include/cpp -I/usr/local/MATLAB/R2011a/extern/include -DGLNX86 -DGCC  -DMX_COMPAT_32 -O -DNDEBUG  "engdemo.cpp"
g++ -O  -o  "engdemo"  engdemo.o  -Wl,-rpath-link,/usr/local/MATLAB/R2011a/bin/glnx86 -L/usr/local/MATLAB/R2011a/bin/glnx86 -leng -lmx -lm 
```

但是我需要在eclipse中编译。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:39:08.563

通常，链接器错误可能很难调试。在这种情况下，错误信息非常丰富。

`undefined reference to symbol 'mxDestroyArray'`表示包含被调用符号的库`mxDestroyArray`没有被链接。但是，它确实告诉您该库已被调用`libmx.so`并在其中找到，`/usr/local/MATLAB/R2011a/bin/glnx86`以便您知道在哪里查找。

在您的`g++ -O ...`命令中，您将包含此库 ( `... -L/usr/local/MATLAB/R2011a/bin/glnx86 ...`) 的路径，这解释了它为什么起作用。

您还需要使用命令中的`-l`标志`-lmx`在链接器命令中引用库本身`g++ -O ...`。

您需要在 Eclipse 中做同样的事情。

在 Eclipse 中，您可以通过选择`Project`菜单并转到`Properties`. 展开`C/C++ General`并选择`Paths and Symbols`。此对话框允许您告诉 Eclipse 链接器所需的库位于何处，类似于 g++ 中的 -L 参数。

为此，请将库名称和路径添加到`Library Paths`和`Libraries`选项卡下的列表中。

注意：添加路径是不够的，您还需要指定库名称（在 g++ 中它是 -l 参数，在这种情况下，`-lmx`）

在`Libraries`选项卡上，添加一个名为`mx`. 这应该在`-lmx`您的 eclipse 链接器命令中添加一个。

# android - 填充表格布局android

> ID：11559859
> 
> 赞同：1
> 
> 时间：2012-07-19T11:26:40.540
> 
> 标签：android, android-tablelayout

有人可以帮我....我正在尝试使用数据库中的一些值填充表格，每次收到分数时都会更新...由于某种原因，我的表格没有更新为新分数。

这是我的代码：（提前感谢）

```
**/**
 * 
 */
package group6.scoresheet;

import group6.scoresheet.model.DataStore;
import group6.scoresheet.model.Game;
import group6.scoresheet.model.GamePlayer;
import group6.scoresheet.model.GameTeam;
import group6.scoresheet.model.Player;
import group6.scoresheet.model.Team;

import java.lang.reflect.Array;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;

/**
 * This displays the Team's scores.
 * Called when the user clicks the Team stats tab
 * @author NiraliPatel
 *
 */
public class TeamStatistics extends Activity {

    private Team team1 = null;
    private Team team2 = null;
    private int teamOne = 0;
    private int teamTwo = 1;
    private DataStore dataStore = null;
    Game game;
    Player player;
    Team team;
    TableLayout t1;
    TableLayout t2;

    /** Called when the activity is created */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.team_stats);
        this.dataStore = (DataStore)getApplicationContext();
        game = dataStore.getCurrentGame();
        // Get the two teams that are playing
        Bundle extras = getIntent().getExtras();
        if(extras != null)
        {
            this.teamOne = extras.getInt("teamOne");
            this.teamTwo = extras.getInt("teamTwo");
        }

        this.team1 = this.dataStore.getTeams().get(this.teamOne);
        this.team2 = this.dataStore.getTeams().get(this.teamTwo);

        populate();

    }
    /**
     * Populates the lists with the Teams scores
     */
    public void populate()
    {

        Team team1 = getTeam(1);
        Team team2 = getTeam(2);

        TextView team1Name = (TextView) findViewById(R.id.Team1);
        team1Name.setText(team1.getName());

        TextView team2Name = (TextView) findViewById(R.id.Team2);
        team2Name.setText(team2.getName());

        Map<Team, Integer> score_1 = this.game.getScore();

        String[] scoreType = {"Total Score:", "Home Runs:", "Total Balls:", "Total Outs:"};
        String[] t1Scores = {Integer.toString(score_1.get(this.team1)), "0", "0", "0"};
        String[] t2Scores = {Integer.toString(score_1.get(this.team2)), "0", "0", "0"};

        t1 = (TableLayout)findViewById(R.id.tableTeamDataT1);
        for(int i = 0; i < scoreType.length; i++){
            teamRow(t1, scoreType[i] , t1Scores[i]);
        }
        t2 = (TableLayout)findViewById(R.id.tableTeamDataT2);
        for(int i = 0; i < scoreType.length; i++){
            teamRow(t2, scoreType[i] , t2Scores[i]);
        }

    }
    public void teamRow(TableLayout table, String col1, String col2){
                TableRow tr1 = new TableRow(this);
                //Create text views to be added to the row.
                TextView tvScore = new TextView(this);
                TextView tvScoreValue = new TextView(this);

                //Put the data into the text view by passing it to a user defined function createView()
                createView(tr1, tvScore, col1);
                createView(tr1, tvScoreValue, col2);
                /**if(heading){
                    tr1.setBackgroundColor(Color.WHITE);
                    //tr1.setGravity(5);
                    tvName.setTextColor(Color.BLACK);
                    tvRbi.setTextColor(Color.BLACK);
                    tvHomeRuns.setTextColor(Color.BLACK);
                }*/
                //Add the new row to our tableLayout tl
                table.addView(tr1);
    }

            public void createView(TableRow tr1, TextView t, String viewdata) {
                t.setText(viewdata);
                tr1.addView(t); // add TextView to row.
                }

    /**
     * Gets a team given the team number
     * @param   teamNumber  The number of the team to be selected (1 for team 1, 2 for team 2)
     * @return              The team
     */
    private Team getTeam(int teamNumber)
    {
        Team team = null;

        switch(teamNumber)
        {
        case 1:
            team = this.team1;
            break;
        case 2:
            team = this.team2;
            break;
        }

        return team;
    }   

    public void onResume(){
        super.onResume();
        //populate();
    }
}

**

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FF004000"
    android:gravity="right"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/TeamStatsHeader" >

        <RelativeLayout
            android:id="@+id/RelativeLayout2"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <TableLayout
                android:id="@+id/tableTeamDataT1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="31dp"
                android:layout_toLeftOf="@+id/Team2"
                android:stretchColumns="0,1,2" >

                <TableRow
                    android:id="@+id/tableTeamRow1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >
                </TableRow>
            </TableLayout>

            <TextView
                android:id="@+id/Team1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:text="@string/Teams"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TableLayout
                android:id="@+id/tableTeamDataT2"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_alignParentTop="true"
                android:layout_below="@id/Team2"
                android:layout_toRightOf="@+id/tableTeamDataT1"
                android:stretchColumns="0,1,2" >

                <TableRow
                    android:id="@+id/tableTeamRow2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >
                </TableRow>
            </TableLayout>

            <TextView
                android:id="@+id/Team2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_alignParentTop="true"
                android:layout_marginRight="102dp"
                android:text="@string/Teams"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </RelativeLayout>

    </ScrollView>

    <TextView
        android:id="@+id/TeamStatsHeader"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="@string/TeamStats"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="40dp" />

    <Button
        android:id="@+id/finish_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/TeamStatsHeader"
        android:layout_alignParentBottom="true"
        android:layout_marginLeft="52dp"
        android:text="@string/Continue" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:51:40.293

试着写`invalidate()`；

```
linearMain = (LinearLayout) findViewById(R.id.linearmainLayout);

@Override
protected void onResume() {
    super.onResume();

    linearMain.removeAllViews();
    linearMain.invalidate();

    AddLayout();
} 
```

请参阅我添加这样的表格布局。我正在动态创建`TableLayout`并将其添加到`LinearLayout`我在 XML 布局文件中声明的

```
 TableLayout tableContainer = new TableLayout(getApplicationContext());
    TableLayout.LayoutParams tab_lp = new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
    tableContainer.setLayoutParams(tab_lp);

    TableRow row = new TableRow(this);

    final TextView tvProduct = new TextView(getApplicationContext());

    LinearLayout.LayoutParams lp_l3 = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, (LayoutParams.WRAP_CONTENT));
    tvProduct.setLayoutParams(lp_l3);
    tvProduct.setText(product);

    row.addView(tvProduct,  new TableRow.LayoutParams(1));
    tableContainer.addView(row,new TableLayout.LayoutParams()); 

    linearMain.addView(tableContainer); 
```

# c - NDK-C文件中.a文件的使用

> ID：11559872
> 
> 赞同：2
> 
> 时间：2012-07-19T11:27:10.207
> 
> 标签：c, makefile, android-ndk, java-native-interface

我正在尝试在我的 C 代码中使用 .a 文件以在 Java 中使用（抱歉我的英语不好）。我为自己创建了一个名为`libtest.a`. 现在，当我包含该库中存在的文件时，会出现错误，因为没有这样的文件或目录。

我已将其放在我的和所在`libtest.a`的同一个文件夹中`Android.mk``Application.mk`

C代码：

```
#include <string.h>
#include <stdio.h>
#include <stdlib.h>
#include <jni.h>
#include <exp.h> //the header in libtest.a 
```

这是我的makefile：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE := libtest
LOCAL_SRC_FILES := libtest.a

include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := socket
LOCAL_SRC_FILES := source/interface.c source/file.c
LOCAL_LDFLAGS += libtest.a  

include $(BUILD_SHARED_LIBRARY) 
```

当我编译它时，我收到以下错误

```
error: exp.h: No such file or directory 
```

我想使用 .a 而不使用它的代码，所以我希望我足够清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:41:05.080

.a 文件中*没有*头文件，只有编译后的代码，它本质上是一个字节流，而不是编码的 .h-files 。这不是 Java。要使用您的文件，`libtest.a`您必须提供该`exp.h`文件以及任何相关的头文件。

你应该使用`LOCAL_STATIC_LIBRARIES`它。

```
include $(CLEAR_VARS)
LOCAL_MODULE    := libtest
LOCAL_SRC_FILES := libtest.a
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := socket
LOCAL_SRC_FILES := source/interface.c source/file.c
LOCAL_STATIC_LIBRARIES += libtest

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T10:13:30.363

因为我改变了我的 .mk 文件

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE := libtest
LOCAL_SRC_FILES := libtest.a
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/../../libtest/jni/include
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := socket
LOCAL_SRC_FILES := source/interface.c source/file.c
LOCAL_STATIC_LIBRARIES += libtest
include $(BUILD_SHARED_LIBRARY) 
```

# javascript - 如何在画布内旋转形状？

> ID：11559873
> 
> 赞同：1
> 
> 时间：2012-07-19T11:27:13.600
> 
> 标签：javascript, html

我正在使用画布加载图像：

```
var canvas=document.getElementById('canvas');
var context=canvas.getContext('2d');

context.scale(0.5,0.5);
canvas.setAttribute('width', tempImg.width*0.5);
canvas.setAttribute('height', tempImg.height*0.5);
context.drawImage(tempImg ,0,0,canvas.width,canvas.height); 
```

我正在使用其他画布在运行时绘制形状：

```
var annCanvas=document.getElementById('annCanvas');
var annContext=annCanvas.getContext('2d');
context.beginPath();
context.lineWidth=4;
context.strokeRect(x,y,w,h);
context.stroke(); 
```

两个画布的位置都是绝对的，所以它们看起来像彼此重叠。但我想同时旋转两个画布（角度值 90,180,270,0）。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:31:43.453

用这个：

```
context.rotate(90); // rotates 90 deg clockwise 
```

# android - 格式化按钮内的文本

> ID：11559875
> 
> 赞同：3
> 
> 时间：2012-07-19T11:27:19.730
> 
> 标签：android, button, text-formatting

我正在开发一个自定义号码选择器，我有一个带有“+”和“-”符号的按钮。
目前我只有这段代码来创建按钮。

```
increment = new Button(context);
increment.setTextSize(25);
increment.setText("+"); 
```

现在，我想像这样添加要在按钮上显示的最小值和最大值。

![目标外观示例](../Images/63041a2c88a71a0ceb383305e4734dc0.png)
我怎样才能做到这一点？
所以我需要将最大标签居中，并给它一个不同的大小作为加号。

任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:38:36.223

不知道是不是你需要的，

但是在您的布局 xml 文件中，

```
<Button
         android:id="@+id/btn1"
         android:layout_width="0dip"
         android:background="@android:color/darker_gray"
         android:drawableBottom="@drawable/image_plus"
         android:text="Max: 10"
         />

<!-- 
android:drawableBottom="@drawable/image_plus" // plus sign from drawable
android:text="Max: 10" // Text you want to put on top of image
 --> 
```

或者使用代码，

```
increment = new Button(context);
increment.setTextSize(25);
increment.setText("Max: 10");
increment.setCompoundDrawables(null, null, null, getResources().getDrawable(R.drawable.plus_sign)); // Here you have to apply + sign image to drawable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:41:39.987

许多解决方案：

*   您可以使用标准按钮并在其上写很多行（可能带有“\n”）
*   您可以创建一个扩展 Button 类的自定义按钮，并重写 onDraw 方法以写入您的最大值和最小值。
*   您可以创建一个包含 3 个 textView（或 2 个 textView 和一个 imageView）的布局，并为单击效果添加一个 backgroundDrawable。

希望对你有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T11:45:35.813

您可以创建自己的自定义按钮：

这是布局：

```
<com.your.package.ui.widget.IncrementButton xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:background="@drawable/button_grey" >

    <TextView
        android:id="@+id/increment_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:text="+"
        android:textColor="@android:color/black"
        android:textSize="22sp" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@id/increment_label"
        android:layout_centerHorizontal="true"
        android:text="Max 10"
        android:textColor="#FFFFFF"
        android:textSize="14sp" />

</com.your.package.ui.widget.IncrementButton> 
```

您需要一个可绘制背景的形状（以显示点击）：您不会有颜色，只需用您的颜色替换它们。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true"><shape>
            <padding android:bottom="10dip" android:left="10dip" android:right="10dip" android:top="10dip" />

            <corners android:radius="5dip" />

            <stroke android:width="1dip" android:color="@color/black" />

            <gradient android:angle="270" android:endColor="@color/button_dark_grey" android:startColor="@color/button_light_grey" />
        </shape></item>
    <item android:state_focused="true"><shape>
            <padding android:bottom="10dip" android:left="10dip" android:right="10dip" android:top="10dip" />

            <corners android:radius="5dip" />

            <stroke android:width="1dip" android:color="@color/black" />

            <gradient android:angle="45" android:endColor="@color/button_dark_grey" android:startColor="@color/button_light_grey" />
        </shape></item>
    <item><shape>
            <padding android:bottom="10dip" android:left="10dip" android:right="10dip" android:top="10dip" />

            <corners android:radius="5dip" />

            <stroke android:width="1dip" android:color="@color/black" />

            <gradient android:angle="270" android:endColor="@color/button_light_grey" android:startColor="@color/button_dark_grey" />
        </shape></item>

</selector> 
```

然后您可以完全控制按钮：

```
package com.your.package.ui.widget;

public class IncrementButton extends RelativeLayout implements OnClickListener {

    private OnIncrementClick onIncrementClickListener;

    public interface OnIncrementClick {
        void onIncrementClick();
    }

    public IncrementButton(Context context) {
        super(context);
        init();
    }

    public IncrementButton(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public IncrementButton(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    private void init() {
        setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        if(this.onIncrementClickListener != null)
            this.onIncrementClickListener.onIncrementClick();
    }

    public void setOnIncrementClickListener(OnIncrementClick onIncrementClickListener) {
        this.onIncrementClickListener = onIncrementClickListener;
    }
} 
```

然后，您可以在任何布局中包含该按钮，引用它并添加一个单击侦听器（就像普通按钮一样）。

```
 IncrementButton button = (IncrementButton) findViewById(R.id.whatever);
 button.setOnIncrementClickListener(yourListener); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T11:38:57.937

```
increment = new Button(context);
increment.setTextSize(25);
String text="<h4>Max:10</h4><h1><b>+</b></h1>";
increment.setText(Html.formHtml(text)); 
```

# c# - listBox selectedItem 问题

> ID：11559877
> 
> 赞同：2
> 
> 时间：2012-07-19T11:27:30.887
> 
> 标签：c#, winforms, listbox

这工作正常：

```
private void btnDelete_Click(object sender, EventArgs e)
{
    for (int i = 0; i < listBox1.SelectedItems.Count; i++) 
    {
        listBox1.Items.Remove(listBox1.SelectedItems[i].ToString());
        i--;
    }
} 
```

但这不起作用：

```
private void btnDelete_Click(object sender, EventArgs e)
{
    listBox1.Items.Remove(listBox1.SelectedItems);
} 
```

为什么第二个`btnDelete_Click`不起作用？我的意思是我`listBox1`用鼠标选择了一条线，然后按下按钮。该`.Remove`功能不识别我选择了哪一行？即使我说`.Remove(listBox1.SelectedItem)`，是否必须拥有和 selectedItem 数组？这个词不是不言`SelectedItems`自明吗？而且由于我`listBox1`用鼠标单击了我的行，程序或IDE不能理解选择了哪一行吗？为什么我还要用`SelectedItems[i]`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:29:07.063

我认为 SelectedItems 需要索引号。也许这就是你不能删除任何项目的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:41:21.527

`ListBox.Items.Remove()`期望删除***一个项目***，同时`ListBox.SelectedItems`返回***项目集合***( `SelectedObjectCollection`) - 即使只选择了一个项目！

您可以编写一个扩展方法来删除所有选定的项目：

```
public static class ListBoxExtension
{
    public static void RemoveSelectedItems(this ListBox source)
    {
        if(source==null) return;
        while(source.SelectedItems.Count!=0)
        {
            source.Items.Remove(source.SelectedItems[0]);
        }
    }
} 
```

可以这样使用：

```
this.listbox1.RemoveSelectedItems(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T11:33:58.113

也改变

```
for (int i = 0; i < listBox1.SelectedItems.Count; i++) 
{
    listBox1.Items.Remove(listBox1.SelectedItems[i].ToString());
    i--;
} 
```

至

```
 for (int i = (listBox1.SelectedItems.Count - 1); i >= 0; i--)
    { 
      listBox1.Items.Remove(listBox1.SelectedItems[i]);
    } 
```

这应该是

```
 listBox1.Items.Remove(listBox1.SelectedItem); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T11:32:10.653

`listBox1.SelectedItems`返回所选项目的集合。要删除项目，您只能使用 传入集合中的单个对象`Remove()`，或者使用 为集合中的对象提供索引`RemoveAt()`。

移除一个对象：

```
listBox1.Items.Remove(listBox1.SelectedItem); 
```

删除索引处的对象：

```
listBox1.Items.RemoveAt(5); 
```

没有您正在寻找的 RemoveRange() 方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T11:59:25.237

第二个示例不起作用的原因是因为您试图以集合的形式传递多个项目，以便一次删除。

要删除一个项目，您需要一次完成一个，因此您***需要***一个循环。

另外，我可以建议使用 a`ListView`代替吗？我个人发现它们更容易使用更多的选项。

例如，你可以`ListView`用这个来制作你的循环

```
foreach (ListViewItem item in listView1.SelectedItems)
{
    item.Remove();
} 
```

如果您尝试一次只删除一个被选中的项目，那么您可以

```
listBox1.Items.Remove(listBox1.SelectedItem); 
```

`SelectedItem`而不是`SelectedItems`，复数是它没有循环就无法处理的集合，单数是它可以理解的单个项目。

# visual-c++ - 在 vc++ 代码中调用 vc++ dll 时出现未处理的异常

> ID：11559883
> 
> 赞同：0
> 
> 时间：2012-07-19T11:27:44.937
> 
> 标签：visual-c++, dll, loadlibrary

我想在我的 vc++ 代码中调用我的 vc++ dll。但错误发生**在 .exe 中 0x00000000 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000000。**

在最后一行之后。我按序号调用了 vc++ dll。

在 .h 文件中

```
typedef int (*LPVAR)(char * ptr_f, char *CC); 
```

在 .cpp 文件中

```
HINSTANCE hDLL;
hDLL = NULL;
LPVAR var;
hDLL = LoadLibrary("Prod.dll");

if( hDLL == NULL )
    AfxMessageBox("Could not load the DLL");

/*int ordinal = 2;
HMODULE  dll = LoadLibrary("Prod.dll");
FARPROC fn = GetProcAddress(dll, MAKEINTRESOURCE(ordinal));*/ //how to proceed after this.

else
{
    var = (LPVAR)GetProcAddress(hDLL, "Ver_C");
    char *ch,a;
    ch = (char*)malloc(100*sizeof(char));

    a = 'z'; 
    int ans = var(ch,&a); //Unhandle exception after that.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:42:23.090

看起来你的`var`函数指针是`NULL`. 这意味着`Ver_C`没有出口。

您可以`dumpbin.exe /exports Prod.dll`用来检查导出了哪些函数（及其名称）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:51:46.973

实际上，问题是免费后的免费图书馆，它具有当前价值。

```
else
   {
    var =(LPVAR)GetProcAddress(hDLL, MAKEINTRESOURCE(2));
    char *ch,a;
    ch = (char*)malloc(100*sizeof(char));

    a = 'z';
    int ans;
     ans = var(ch,&a);
     if ( hDLL != NULL )
             FreeLibrary( hDLL );
} 
```

# cocoa - 可可：如何在可可中将 nsdate 转换为 nstimeinterval？

> ID：11559885
> 
> 赞同：2
> 
> 时间：2012-07-19T11:27:51.260
> 
> 标签：cocoa

```
 NSDate *newDate=[newDate dateByAddingTimeInterval:difference]; 
```

现在我想将此 newDate 转换为 NStimeInterval。

我该如何进行这种转换？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T12:29:27.070

`NDDate`和`NSTimeInterval`是两个不同的东西，你不能将 a 转换`NSDate`为 a `NSTimeInterval`，反之亦然。

`NSDate`表示绝对日期并`NSTimeInterval`表示两个日期之间的时间。

但是，您可以使用此方法从参考日期创建 NSTimeInterval：

```
- (NSTimeInterval)timeIntervalSinceDate:(NSDate *)anotherDate 
```

你可以这样做：

```
NSDate *referenceDate = /* Your reference date */
NSDate *date = /* Your date */
NSTimeInterval timeInterval = [date timeIntervalSinceDate:referenceDate]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T11:55:37.370

正如我在上面的评论中提到的，你需要知道你想要`NSTimeInterval`代表什么，因为它是两个时间点（即两个`NSDate`实例）之间的距离。

如果您希望它代表您`newDate`和 2001 年 1 月 1 日 GMT 之间的时间，您可以使用：

```
- (NSTimeInterval)timeIntervalSinceReferenceDate; 
```

（[参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsdate_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDate/timeIntervalSinceReferenceDate)）。

但是，如果您希望它表示自另一个*参考日期*以来的时间，则需要将该参考日期创建为`NSDate`对象并使用：

```
- (NSTimeInterval)timeIntervalSinceDate:(NSDate *)anotherDate; 
```

（[参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsdate_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDate/timeIntervalSinceDate%3a)）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-02-17T08:58:40.913

稍微短一点：

```
NSDate *date = ...

NSTimeInterval interval = [date timeIntervalSinceReferenceDate]; 
```

并将其取回：

```
date = [[NSDate alloc] initWithTimeIntervalSinceReferenceDate:timeInterval]; 
```

# javascript - 使用 JavaScript 的 JQuery 移动样式

> ID：11559887
> 
> 赞同：1
> 
> 时间：2012-07-19T11:27:56.420
> 
> 标签：javascript, jquery, html, css, jquery-mobile

```
$(this).css("background-color", "red"); 
```

对于正常输入，我为每个输入循环设置了背景 RED 样式，效果很好。

但是当它被选中时，它似乎不起作用。jquery 移动选择图像仍然保持不变！

我正在使用 JQuery + JQuery Mobile。

我如何强制它改变？即使它只是添加一个边框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:41:02.107

您可以轻松地覆盖 CSS 中每个选择菜单的样式：

```
div.ui-select span.ui-btn-inner {
    border: 1px solid red;
    color: red;
    text-align: right;    
} 
```

.. 或者如果你想坚持使用 jQuery：

​<code>$('.ui-select span.ui-btn-inner').css('background-color', 'blue');​​​​​​​​​​​​​​​​​​​​​​​​​ ​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​</code>

.. 要自定义一个特定的选择菜单，给你的选择元素 an`id`然后用 jQuery 选择它，你需要附加`-button`到`id`. 这是因为 jQuery Mobile 创建了多个您可能不知道的元素。所以，如果你给你的选择菜单一个 id`custom-id`并且你想改变它的背景颜色，你的 jQuery 应该是这样的：

```
$('.ui-select #custom-id-button span.ui-btn-inner').css('background-color', 'green'); 
```

.. 和 CSS 一样：

```
div.ui-select #custom-id-button span.ui-btn-inner {
    text-align: left;    
} 
```

**更新了 JSFiddle**
[http://jsfiddle.net/5Bkx9/6/](http://jsfiddle.net/5Bkx9/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:02:19.933

My solution for this was

```
$(element).parent().addClass("inputRequired"); 
```

Getting the parent of the element(which is the select tag) and adding the required class to the DIV instead.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:19:39.343

检查`this`执行上下文中的内容。请记住，`this`对于相同的确切方法，可能会有所不同，具体取决于调用的目标。最好使用选择器明确选择它。

如果这不是问题，请检查您是否将此字段设置为`!important`在背景颜色后添加了指令样式。

为了更好地分析您的问题，您必须向我们提供更多信息，最好在 jsfiddle 中复制。

# ios - 在 iOS 中从浮点值手动定位

> ID：11559894
> 
> 赞同：1
> 
> 时间：2012-07-19T11:28:33.457
> 
> 标签：ios, floating-point, position, manual

我目前使用以下方法定位了一个项目

```
CGRect torpfr = torp.frame;
torpfr.origin.x =  [[NSUserDefaults standardUserDefaults] floatForKey:@"torpx"];
torpfr.origin.y =  [[NSUserDefaults standardUserDefaults] floatForKey:@"torpy"];
torp.frame = torpfr; 
```

`torpx`基本上，这会根据存储在和下的浮动来创建和定位按钮`torpy`。

本质上，我在 , 处有一个对象 ( `torpfr`) `torpx`，`torpy`并且我需要绘制第二个对象 (假设`label1`) 偏移到`Torpfr`.

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:33:40.843

看看这里： [https ://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html)

你会发现：CGRectOffset

一个与源大小相同的矩形，但其原点相对于源沿 x 轴偏移 dx 单位，沿 y 轴偏移 dy 单位。

关于动画，请看这里：[iOS - 当 UIView 移动时将 UITextField 移动到不同的位置](https://stackoverflow.com/questions/7217566/ios-moving-a-uitextfield-to-a-different-position-when-a-uiview-moves)

# android - 在android中添加我们自己的应用程序？

> ID：11559895
> 
> 赞同：1
> 
> 时间：2012-07-19T11:28:35.030
> 
> 标签：android, android-intent, popup

我们的 android 设备包含两个不同的 PDF 阅读器应用程序。一个是`Adobe Reader`，另一个是`Nook PDF`。当我们选择任何 PDF 文件时，`Popup Menu`会显示。在此弹出菜单中包含两个 PDF 阅读器应用程序。例如截图是

![在此处输入图像描述](../Images/c732317397fbcd8098c6224a5b1e5276.png)

如何在此处添加我们自己的应用程序（弹出菜单）。当我们自动选择任何文件时，我们自己的应用程序也会显示在弹出窗口中。可能吗。

新截图是

![在此处输入图像描述](../Images/e7949a826e033827591c4bc5b60b11a4.png)

这里`Hello World`的应用程序包名称是`com.hello`并且`Exit`用于退出`Popup Menu`. 如何通过编程方式添加这两个应用程序。给我主意。我需要一些示例代码的示例。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:31:24.257

这可以通过使用[Intent Filters](http://developer.android.com/guide/components/intents-filters.html#ifs)来实现。您需要明确告诉 Android 您的应用能够处理某些操作，然后 Android 会将您的应用添加到这些操作的选择器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:38:36.810

您需要使用隐式意图并使用[意图过滤器指定它们](http://developer.android.com/guide/components/intents-filters.html#ifs)

它看起来像这样。它需要在您的 AndroidManifest.xml 文件中定义

```
<intent-filter>
  <action android:name="android.intent.action.VIEW"/>
  <data android:scheme="http" android:mimeType="application/pdf"/>
  <category android:name="android.intent.category.DEFAULT"/>
  <category android:name="android.intent.category.BROWSABLE"/>
</intent-filter> 
```

操作部分表示您的活动将能够查看 PDF，数据部分表示它接受 PDF 类型和具有 HTTP 方案的 URL 的数据。可浏览类别是允许来自浏览器的链接打开此活动所必需的（可选）。

# iphone - UIImage 在 iPhone 中不滚动

> ID：11559899
> 
> 赞同：5
> 
> 时间：2012-07-19T11:28:53.653
> 
> 标签：iphone, ipad, uiscrollview, uiimage

我是 iPhone 开发者的新手，

我想滚动我的图像，

这是我的代码片段，

```
- (void)viewDidLoad {
UIImage *image1 = [UIImage imageWithContentsOfFile:[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"bg.png"]];
    self.imageView = [[UIImageView alloc] initWithImage:image1];
    self.imageView.frame = (CGRect){.origin=CGPointMake(0.0f, 0.0f), .size=image1.size};
    [self.scrollView addSubview:self.imageView];
    self.scrollView.contentSize = image.size;

 [self centerScrollViewContents];
}

- (void)centerScrollViewContents {
    CGSize boundsSize = self.scrollView.bounds.size;
    CGRect contentsFrame = self.imageView.frame;

    if (contentsFrame.size.width < boundsSize.width) {
        contentsFrame.origin.x = (boundsSize.width - contentsFrame.size.width) / 2.0f;
    } else {
        contentsFrame.origin.x = 0.0f;
    }

    if (contentsFrame.size.height < boundsSize.height) {
        contentsFrame.origin.y = (boundsSize.height - contentsFrame.size.height) / 2.0f;
    } else {
        contentsFrame.origin.y = 0.0f;
    }

    self.imageView.frame = contentsFrame;
}

- (UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    // Return the view that you want to zoom
    return self.imageView;
} 
```

也`bg.png`没有应用于我的背景。

**任何帮助将不胜感激。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T18:43:20.657

答案实际上是许多其他答案和评论的组合，以及一些其他调整。

1.  正如潘所说，你需要设置你的滚动视图委托。否则，您的 viewForZoomingInScrollView: 委托实现将不会被调用。我已经在 viewDidLoad: 中提供了这个调用，尽管你也可以在界面构建器或故事板中连接它。
2.  正如 Teodor Carstea 在对原始帖子的评论中所说，在您的原始代码中，您将您的`.imageView.size`和您 的设置`.scrollView.contentsSize`为完全相同的东西。您不需要设置`.imageView.frame.` 将作为 `initWithImage:`. 这将使尺寸不同。
3.  您确实需要将 设置`.scrollView.contentSize`为`image.size`. 您在哪里执行此操作很重要，至少在设置缩放比例之前必须发生。
4.  正如 Kunal Balani 提到的，您必须启用滚动，尽管您可以在情节提要或界面构建器中设置它。
5.  正如 MidhunMP 所说，您必须拥有`.userInteractionEnabled = YES`，尽管通常这些是在故事板/界面生成器中设置的默认值，所以我不会将它们包含在下面的代码更改中。
6.  您的方法`centerScrollViewContents`并没有真正使内容*居中*，而是重新塑造 imageView 框架。我只是简单地注释掉了这个电话，因为我认为这完全没有必要。相反，我做了一个简单的调用，在左上角开始你的图像。
7.  如果您只想滚动，则设置`zoomScale`,`minimumZoomScale`和 `maximumZoomScale`不是必需的。如果您还想捏合缩放，那么您需要将所有这三个设置在适当的位置。
8.  如果视图小于内容范围，您似乎确实想要拉伸视图。如果这确实是一个问题（即，如果您知道您的 bg.png 太小以至于需要拉伸），则分别计算 contentFrame 与图像帧的宽度比和高度比，其中较大的将是您的新zoomScale，您将能够向另一个方向滚动。或者，还有其他方法可以决定您想要该规模集的方式。搜索 stackoverflow.com 以获取根据需要设置缩放比例的其他答案。

这是应用这些项目后的代码。

```
(void)viewDidLoad {
    self.scrollView.delegate = self;         // can be set in storyboard
    self.scrollView.scrollingEnabled = YES;  // can be set in storyboard
    NSString* bgPng
      = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"bg.png"];
    UIImage *image1 = [UIImage imageWithContentsOfFile:bgPng];
    self.imageView = [[UIImageView alloc] initWithImage:image1];
//  self.imageView.frame = (CGRect){.origin=CGPointMake(0.0f, 0.0f), .size=image1.size};
    [self.scrollView addSubview:self.imageView];
    self.scrollView.contentSize = image.size;

    // set zoom scale here if desired.

    // if zoom is implemented, the following call should be made
    // after setting .zoomScale, .minimumZoomScale & .maximumZoomScale
    self.scrollView.contentOffset = CGPointZero;

//  [self centerScrollViewContents];
}

//- (void)centerScrollViewContents {
//    CGSize boundsSize = self.scrollView.bounds.size;
//    CGRect contentsFrame = self.imageView.frame;
//
//    if (contentsFrame.size.width < boundsSize.width) {
//        contentsFrame.origin.x = (boundsSize.width - contentsFrame.size.width) / 2.0f;
//    } else {
//        contentsFrame.origin.x = 0.0f;
//    }
//
//    if (contentsFrame.size.height < boundsSize.height) {
//        contentsFrame.origin.y = (boundsSize.height - contentsFrame.size.height) / 2.0f;
//    } else {
//        contentsFrame.origin.y = 0.0f;
//    }
//  
//    self.imageView.frame = contentsFrame;
//}

- (UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    // Return the view that you want to zoom
    return self.imageView;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:31:01.007

好吧，试试这个：

```
UIImageView *tempImgv = [[[UIImageView alloc]init] autorelease];
    [tempImgv setImage:[UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%@/bg.png", [[NSBundle mainBundle]resourcePath]]]];
    [tempImgv setFrame:your_desired_frame];
    self.imageView = tempImgv;
    [self.scrollWiew setContentSize: size_greater_than_scroll_frame];
    [self.scrollWiew addSubview:self.imageView]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T22:33:14.647

首先检查您的滚动视图框架。仅当帧大小 < contentsize 时才会启用滚动。因为如果所有内容都在框架中可见，那么你为什么需要滚动呢？

试试这个 ：

```
UIScrollView *scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0,
                 self.view.frame.size.width, self.view.frame.size.height)];
    //用你拥有的任何框架初始化

  scroll.scrollEnabled = YES // 这是小鬼...不要忽略这个

   //无论你的代码是什么

    self.scrollView.contentSize = image.size;// 这是错误的

    //contentSize 属性为可滚动内容的大小。这指定了可滚动区域的大小。
    // 做这个
    self.scrollView.contentSize = imageView.frame.size;

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T16:43:34.433

将图像视图和滚动视图的用户交互启用属性设置为是。请检查此代码，

```
- (void)viewDidLoad
{
    UIImage *image1 = [UIImage imageWithContentsOfFile:[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"bg.png"]];
    self.imageView = [[UIImageView alloc] initWithImage:image1];
    self.imageView.frame = (CGRect){.origin=CGPointMake(0.0f, 0.0f), .size=image1.size};
    imageView.userInteractionEnabled = YES;
    scrollView.userInteractionEnabled = YES;
    [self.scrollView addSubview:self.imageView];
    self.scrollView.contentSize = image.size;

    [self centerScrollViewContents];
} 
```

如果您需要将图像设置为滚动视图的背景，请使用：`self.scrollView.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageWithContentsOfFile:[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"bg.png"]]];`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T05:16:38.957

在上面的代码中，您提供了

```
 UIImage *image1 = [UIImage imageWithContentsOfFile:[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"bg.png"]];
    self.imageView = [[UIImageView alloc] initWithImage:image1];
    self.imageView.frame = (CGRect){.origin=CGPointMake(0.0f, 0.0f), .size=image1.size};
    [self.scrollView addSubview:self.imageView];
    self.scrollView.contentSize = image.size; 
```

您设置的滚动视图的内容大小等于图像的大小，即上面的粗体代码。尝试使用以下代码。

```
CGSize sizeOfScroll = image.size;
sizeOfScroll.width *= 1.5f;
sizeOfScroll.height *= 1.5f;

self.scrollView.contentSize = sizeOfScroll; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T18:12:18.243

滚动图像

```
scroll.userinteractionEnable = YES; 
```

然后，

```
self.scrollView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageWithContentsOfFile:[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"image.png"]]]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-31T10:24:06.920

在上面的代码中，您需要设置最小和最大缩放比例。

[http://developer.apple.com/library/ios/#DOCUMENTATION/WindowsViews/Conceptual/UIScrollView_pg/ZoomZoom/ZoomZoom.html](http://developer.apple.com/library/ios/#DOCUMENTATION/WindowsViews/Conceptual/UIScrollView_pg/ZoomZoom/ZoomZoom.html)

```
self.scrollView.minimumZoomScale=0.5;
self.scrollView.maximumZoomScale=6.0;

```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-31T15:22:33.733

您是否在其他地方设置了滚动视图委托？
像这样：`self.scrollView.delegate = self;`

# jquery - 使用 jquery 验证验证多个表单

> ID：11559901
> 
> 赞同：1
> 
> 时间：2012-07-19T11:28:57.257
> 
> 标签：jquery, jquery-validate

我的网页中有近 5 个表单，其元素已使用 jquery.validate.js 进行验证。最后我有“保存”按钮（不是提交），点击它可以保存所有细节。单击“保存”时，我需要验证所有表单，如果任何验证失败，我需要停止该单击事件。有没有办法做到这一点？

例如 ：

```
<html>
<script type='text/javascript'>
    $(document).ready(function () {
        $('#form1').validate();
        $('#form2').validate();
        $('#form3').validate();
    });
</script>
<form id='form1'>..elements to be validated..</form>
<form id='form2'>..elements to be validated..</form>
<form id='form3'>..elements to be validated..</form>
<form id='form4'>..elements to be validated..</form>...
<input type='button' name='save_btn' id='save_btn' value='save'>
</html> 
```

我也试过

```
$("#save_btn").click(function(){
    $("form1").validate();
}); 
```

它显示错误消息但仍然执行单击功能。如果有人可以建议我一些解决方案，它将对我更有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T04:08:01.033

您可以使用可用于检查表单或特定元素是否有效的函数[valid()](http://docs.jquery.com/Plugins/Validation/valid)

所以你可以为你的按钮点击事件做这样的事情

```
$("#save_btn").click(function(){
  if ($("form1").valid()
        && $("form2").valid()
        && $("form3").valid()
        && $("form4").valid())
  {
     // do what you want here
  } else {
     return false; // to suppress the click event
  }
}); 
```

# objective-c - Objective C 中的位置管理器

> ID：11559905
> 
> 赞同：1
> 
> 时间：2012-07-19T11:29:06.543
> 
> 标签：objective-c

这是我的位置管理器代码

```
locationManager = [[CLLocationManager alloc] init];
locationManager.delegate = self;
locationManager.desiredAccuracy=kCLLocationAccuracyNearestTenMeters;
locationManager.distanceFilter = 200;
mapView.showsUserLocation=true;
[locationManager startUpdatingLocation]; 
```

这是另一个也用于 startupdatelocation 的函数

```
- (void)startLocationManager:(NSTimer *)timer
{  
   [locationManager startUpdatingLocation];
   [timer invalidate];
    timer = nil;
} 
```

这是

```
 - (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    NSLog(@"Testing");

    CLLocationCoordinate2D location;
    location.latitude=newLocation.coordinate.latitude;
    location.longitude=newLocation.coordinate.longitude;

    [locationManager stopUpdatingLocation];

    [NSTimer scheduledTimerWithTimeInterval:60
                             target:self
                           selector:@selector(startLocationManager:)
                           userInfo:nil
                            repeats:NO];
} 
```

这工作正常，但应用程序不在后台运行。如果我删除`NStimer`并且不停止位置管理器，则应用程序在后台运行得非常好。我希望位置管理器每 1 分钟运行一次以更新坐标。该应用程序还应该在后台运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:25:55.920

您可以查看[指南](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)（尤其是“声明您的应用支持的后台任务”部分）。它特别指出

> 有几种方法可以在后台跟踪用户的位置，其中大多数实际上并不需要您的应用程序在后台连续运行：
> 
> *   重大变化的定位服务（推荐）
> *   仅前台定位服务
> *   后台定位服务

您不应该像在后台那样使用位置管理器。

> 为用户提供持续位置更新（即使在后台）的应用程序可以通过在其 Info.plist 文件中包含 UIBackgroundModes 键（带有位置值）来启用后台位置服务。在 UIBackgroundModes 键中包含此值不会阻止系统挂起应用程序，但它确实告诉系统它应该在有新的位置数据要传递时唤醒应用程序。因此，此键有效地让应用程序在后台运行，以便在位置更新发生时处理它们。

[有一个教程，其中包含有关如何在此处](http://www.mindsizzlers.com/2011/07/ios-background-location/)执行此操作的更多信息。

# ruby-on-rails - 在 Windows 7 x64 上安装 Ruby、Rails 和 DevKit 的问题 - 需要修复

> ID：11559912
> 
> 赞同：6
> 
> 时间：2012-07-19T11:29:17.783
> 
> 标签：ruby-on-rails, ruby, devkit

我在尝试安装 ruby​​ 和 rails 时遇到了许多问题。在清除以前安装的版本之后，我已经尝试过没有和现在。

尝试运行“gem install rdiscount --platform=ruby”时出现以下错误：

```
C:\Windows\system32>gem install rdiscount --platform=ruby
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing rdiscount:
    ERROR: Failed to build gem native extension.

    "C:/Program Files (x86)/ruby-1.9.3/bin/ruby.exe" extconf.rb
checking for random()... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of necessary libraries and/or headers.  Check the mkmf.log file for more details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=C:/Program Files (x86)/ruby-1.9.3/bin/ruby
    --with-rdiscount-dir
    --without-rdiscount-dir
    --with-rdiscount-include
    --without-rdiscount-include=${rdiscount-dir}/include
    --with-rdiscount-lib
    --without-rdiscount-lib=${rdiscount-dir}/lib
C:/Program Files (x86)/ruby-1.9.3/lib/ruby/1.9.1/mkmf.rb:368:in `try_do': The complier failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/1.9.1/mkmf.rb:435:in `try_link0'
    from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/1.9.1/mkmf.rb:440:in `try_link'
    from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/1.9.1/mkmf.rb:552:in `try_func'
    from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/1.9.1/mkmf.rb:797:in `block in have_func'
    from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/1.9.1/mkmf.rb:693:in `block in checking_for'
    from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/1.9.1/mkmf.rb:280:in `block (2 levels) in postpone'
    from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/1.9.1/mkmf.rb:280:in `block in postpone'
    from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/1.9.1/mkmf.rb:276:in `postpone'
    from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/1.9.1/mkmf.rb:692:in `checking_for'
    from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/1.9.1/mkmf.rb:796:in `have_func'
    from extconf.rb:5:in `<main>'

Gem files will remain installed in C:/Program Files (x86)/ruby-1.9.3/lib/ruby/gems/1.9.1/gems/rdiscount-1.6.8 for inspection.
Results logged to C:/Program Files (x86)/ruby-1.9.3/lib/ruby/gems/1.9.1/gems/rdiscount-1.6.8/ext/gem_make.out 
```

我已经按照指示运行了 DevKit 安装，它似乎可以工作。Rails 以前可以工作，但现在不行。有人对如何使它工作有任何建议吗？还是卸载重试？

谢谢

保罗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T12:02:35.653

我建议卸载并重新安装。此外，我建议使用[http://railsinstaller.org/](http://railsinstaller.org/)中的 Rails 安装程序，根据我的经验，这是在 Windows 机器上安装 rails 和 ruby​​ 最轻松的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T15:57:10.637

**似乎您在带有空格**的目录中安装了 Ruby（沿着 DevKit？）。

正如在 Ruby 自己的安装程序中指出的那样，不建议使用带有空格的路径（这就是为什么默认为`C:\Ruby193`

作为 DevKit 一部分的编译器 GCC 存在带空格的路径问题，因此也建议将 DevKit 的安装放置在**没有空格**的路径中（例如`C:\DevKit`）

所有这些都在 RubyInstaller 和[DevKit 安装说明页面中提到](https://github.com/oneclick/rubyinstaller/wiki/Development-Kit)

# java - 解析来自 Yahoo BOSS 的 Json 响应。错误

> ID：11559914
> 
> 赞同：0
> 
> 时间：2012-07-19T11:29:25.250
> 
> 标签：java, json, yahoo-boss-api

我正在尝试将 Json 响应字符串作为参数传递给 jsonObject，如 Yahoo [http://developer.yahoo.com/java/howto-parseRestJava.html](http://developer.yahoo.com/java/howto-parseRestJava.html) 在以下给定代码中所示，这是为了让 yahoo 搜索结果：

```
/**
 * ParseYahooSearchResultsJSON.java
 * This example shows how to parse Yahoo! Web Service search results returned in JSON format. 
 *
 * @author Daniel Jones www.danieljones.org
 */

import java.io.*;

import org.json.*;

import org.apache.commons.httpclient.*;
import org.apache.commons.httpclient.methods.*;

public class ParseYahooSearchResultsJSON {

    public static void main(String[] args) throws Exception {
        String request = "http://api.search.yahoo.com/WebSearchService/V1/webSearch?appid=YahooDemo&query=umbrella&results=10&output=json";

        HttpClient client = new HttpClient();
        GetMethod method = new GetMethod(request);

        // Send GET request
        int statusCode = client.executeMethod(method);

        if (statusCode != HttpStatus.SC_OK) {
            System.err.println("Method failed: " + method.getStatusLine());
        }
        InputStream rstream = null;

        // Get the response body
        rstream = method.getResponseBodyAsStream();

        // Process the response from Yahoo! Web Services
        BufferedReader br = new BufferedReader(new InputStreamReader(rstream));
        String jsonString = "";
        String line;
        while ((line = br.readLine()) != null) {
            jsonString += line;
        }
        br.close();

        // Construct a JSONObject from a source JSON text string.
        // A JSONObject is an unordered collection of name/value pairs. Its external 
        // form is a string wrapped in curly braces with colons between the names 
        // and values, and commas between the values and names.
        JSONObject jo = new JSONObject(jsonString);

        // A JSONArray is an ordered sequence of values. Its external form is a 
        // string wrapped in square brackets with commas between the values.
        JSONArray ja;

        // Get the JSONObject value associated with the search result key.
        jo = jo.getJSONObject("ResultSet");

        //System.out.println(jo.toString());

        // Get the JSONArray value associated with the Result key
        ja = jo.getJSONArray("Result");

        // Get the number of search results in this set
        int resultCount = ja.length();

        // Loop over each result and print the title, summary, and URL
        for (int i = 0; i < resultCount; i++)
        {
            JSONObject resultObject = ja.getJSONObject(i);
            System.out.println(resultObject.get("Title"));
            System.out.println(resultObject.get("Summary"));
            System.out.println(resultObject.get("Url"));
            System.out.println("--");
        }
    }
} 
```

添加所需的身份验证代码并包含所需的 jar 后，我收到以下错误：

> 未找到 JSONObject["ResultSet"]。在 org.json.JSONObject.get(JSONObject.java:422) 在 org.json.JSONObject.getJSONObject(JSONObject.java:516) 在 SignPostTest.parseResponse(SignPostTest.java:187) 在 SignPostTest.main(SignPostTest.java: 222)

这是 Json 响应字符串的开头：

```
{"bossresponse":{"responsecode":"200","web":{"start":"0","count":"50","totalresults":"36800","results":[{"date": "","clickurl":"http:\/\/uk.news.yahoo.com\/apple\/","url":"http:\/\/uk.news.yahoo.com\/apple\/","dispurl":"uk.news.yahoo.com\/apple","title":"Latest Apple news | headlines â€“ Yahoo! News UK","abstract":"Get the latest Apple news on Yahoo! News UK. Find in-depth commentary on Apple in our full coverage news section."},{"date": "","clickurl":"http:\/\/answers.yahoo.com\/question\/index?qid=20080113074727AAuSMGy","url":"http:\/\/answers.yahoo.com\/question\/index?qid=20080113074727AAuSMGy","dispurl":"answers.yahoo.com\/question\/index?qid=20080113074727AAuSMGy","title":"JailBreak <b>Ipod? - Yahoo<\/b>! Answers","abstract":"Best Answer: Jailbreaking Guide ok jailbreaking is when you download the AppSnapp (found at www.jailbreakme.com) application to your iPod touch after first ..."},{"date": 
```

查看响应和对象名称，雅虎似乎在响应中做了一些更改，我将以下两行代码更改为：

```
// Get the JSONObject value associated with the search result key.
jo = jo.getJSONObject("bossresponse");

// Get the JSONArray value associated with the Result key
ja = jo.getJSONArray("results"); 
```

我仍然收到错误：

> org.json.JSONException：未找到 JSONObject["results"]。在 org.json.JSONObject.get(JSONObject.java:422) 在 org.json.JSONObject.getJSONArray(JSONObject.java:498) 在 SignPostTest.parseResponse(SignPostTest.java:185) 在 SignPostTest.main(SignPostTest.java: 222)

我不知道问题出在哪里。这是我第一次做json解析。我可能在某一点或另一个方面有误解。请说清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:23:35.433

上面提到的 yahoo URL 将错误作为 json 响应发回，在描述中说

“该服务已关闭。有关详细信息，请参阅弃用服务博客文章[http://developer.yahoo.com/blogs/ydn/posts/2010/08/api_updates_and_changes](http://developer.yahoo.com/blogs/ydn/posts/2010/08/api_updates_and_changes) ”

这就是您无法访问 JSON 响应的预期属性的原因。

# c# - 加载跟踪侦听器属性

> ID：11559916
> 
> 赞同：5
> 
> 时间：2012-07-19T11:29:37.807
> 
> 标签：c#, configuration, trace, tracelistener

所以我有一个自定义跟踪监听器，它的生命是这样开始的：

[http://www.codeproject.com/Articles/30956/A-Rolling-XmlWriterTraceListener](http://www.codeproject.com/Articles/30956/A-Rolling-XmlWriterTraceListener)

我已将其修改为更像 Log4Net RollingFileAppender （请参阅： http: [//logging.apache.org/log4net/release/sdk/log4net.Appender.RollingFileAppender.html](http://logging.apache.org/log4net/release/sdk/log4net.Appender.RollingFileAppender.html)）

当我运行代码时，我发现它没有从配置文件中的自定义属性中设置属性/字段值。

在运行时分析对象会发现 Attributes 属性 (this.Attributes) 不包含任何内容。

任何想法我将如何解决这个问题？

我应该手动填充这些还是什么？

好的，这是一个代码示例：

```
[HostProtection(Synchronization = true)]
public class RollingXmlWriterTraceListener : XmlWriterTraceListener
{
    public RollingXmlWriterTraceListener(string filename)
        : base(filename)
    {
        _basicTraceFileName = filename;
        LoadAttributes();
    } 
```

在 LoadAttributes 方法中，我然后做......

```
if (Attributes.ContainsKey("maxTraceFileCount"))
{
   string attributeValue = Attributes["maxTraceFileCount"]; 
```

问题是“属性”从不包含任何内容。此类使用包含属性的配置信息从框架代码实例化...

```
 <sharedListeners>
    <add type="emedia.Common.Wcf.RollingXmlWriterTraceListener, emedia.Common.Wcf" 
         name="System.ServiceModel.XmlTrace.Listener" 
         traceOutputOptions="None" 
         initializeData="C:\Logs\MyTraceFileName.svclog" 
         MaxTraceFileSize="1048576"
         MaxTraceFileCount="10"
    />
 </sharedListeners> 
```

编辑2：

XmlWriterTraceListener 类是 .Net 的一部分，通过使我的基类继承 Attributes 属性。

在配置中，我应该能够指定任何属性，然后在代码中执行类似...

```
var attValue = Attributes["something"]; 
```

...但由于某种原因，这会返回 null （该属性不在集合中）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-05T19:01:46.503

直到完全构建侦听器的实例*之后*，才会从配置文件中填充 Attributes 集合。

而不是在构造函数中调用 LoadAttributes 方法，您需要确保在侦听器对象完全实例化之后但在首次使用之前调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T01:17:50.437

以防万一你还没有解决这个问题或任何人未来的帮助......

我今天一直在看这个。您是否包含了 GetSupportedAttributes 的覆盖？

今天早上有一段时间我遇到了同样的问题。包括这个并列出我期望解决的那些属性。所以在你上面的例子中你需要

```
protected override string[] GetSupportedAttributes()
{
    return new[] { "MaxTraceFileSize" };
} 
```

# linux - 从cap文件中一一读取tcp数据包？

> ID：11559917
> 
> 赞同：0
> 
> 时间：2012-07-19T11:29:49.870
> 
> 标签：linux, sockets, wireshark, tcpdump

可以从文件中一个一个地读取数据包吗？
我想在这种情况下拆分我的cap文件取决于数据包的内容，例如当我捕获一个长期的数据包流时，我只需要一些数据包进行抽象，例如我只想抽象一个tr069会话，从做一个 rpc 调用到响应结束，然后将这些数据包重定向到一个文件，当然，它们可以混合许多其他数据包，这没问题，我只需要这些数据包，然后我将结果文件作为我的记录，那怎么办呢？
tcpdump 或 tshark 或任何其他 unix utils？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:05:35.497

也许 tcpdump 的过滤器可以解决您的问题。您可以使用 tcpdump 读取您的 cap 文件并将过滤后的结果直接输出到文件。例子：

```
tcpdump -r big.pcap -w small.pcap "src port 2438" 
```

[有关过滤器的更多信息，请参见pcap-filter(7)](http://linux.die.net/man/7/pcap-filter)的手册页。

# version-control - 在 Mercurial（或等效）中保留只读标志

> ID：11559919
> 
> 赞同：0
> 
> 时间：2012-07-19T11:29:55.857
> 
> 标签：version-control, mercurial, dvcs, readonly

我们希望阻止对源代码控制中且已应用的 SQL 迁移脚本进行更改。有没有办法将文件（特别是 SQL 迁移脚本）标记为只读并将其保存在源代码管理中？

我们可以在我们的中央存储库中使用预提交挂钩，但这需要用户执行一些高级操作来撤消他们的本地提交。

失败了，还有其他建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:54:53.383

看看[AclExtension](http://mercurial.selenic.com/wiki/AclExtension)。它允许您以多种方式指定访问控制。

在您的情况下，您可以尝试通过禁止所有用户对这些文件进行所有更改来将脚本设置为“只读”（参见`DONT-TOUCH-THIS.txt`示例）。

请注意，这仍然需要一个钩子，但至少可以省去您自己编写的麻烦。您可以让所有开发人员同意使用该`pretxncommit`钩子，如果违反了 ACL 权限，这将阻止提交事务的发生。

# mysql - MySQL 查询选择 ENUM('M', 'F') 作为 'Male' 或 'Female'

> ID：11559920
> 
> 赞同：5
> 
> 时间：2012-07-19T11:29:56.137
> 
> 标签：mysql, sql

我的字段是性别的 ENUM 并存储“M”或“F”，但有没有办法根据值将字段选择为“男性”或“女性”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T11:32:38.040

```
SELECT IF(gender='M','Male', 'Female') AS Gender 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T11:32:54.983

你可以为它做一个案例：

```
SELECT CASE enum_field 
WHEN 'M' THEN 'Male' 
WHEN 'F' THEN 'Female' 
END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T11:32:35.263

是的，您可以使用以下查询来执行此操作。

```
SELECT (CASE WHEN field = 'M' THEN 'MALE'
            WHEN field = 'F' THEN 'FEMALE'
       END) AS sex
FROM table; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T11:32:35.653

使用`CASE`语句，例如：

```
SELECT CASE FieldName WHEN 'M' THEN 'Male' ELSE 'Female' END
FROM TableName 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T11:38:19.927

不同的技术

```
select replace(replace(column,'M','Male'),'F','Female') from table 
```

# json - GRAILS：用（嵌套的）JSON 创建域类对象

> ID：11559926
> 
> 赞同：3
> 
> 时间：2012-07-19T11:30:34.267
> 
> 标签：json, grails, grails-orm

有没有一种通用的方法可以递归地从 JSON 中创建 Grails-Objects？

例子

```
class Person {String name, String surname  ....}

class Text { String content, Person owner } 
```

从以下 JSON 创建对象的最简单方法是什么：

```
{
   "class":"Text",
  "content":"test test test",
  "owner":{
     "class":"Person",
     "id":1
  }
} 
```

甚至出自：

```
{
   "class":"Text",
  "content":"test test test",
  "owner":{
     "class":"Person",
     "name":"foo",
     "surname":"bar"
  }
} 
```

一个简单的创建（没有嵌套类）就像魅力一样：

```
Person p = new Person(JSON.parse(responseBody)) 
```

另一个问题是：如果无法进行嵌套创建，我该如何修改反序列化过程？

目前我通过手动分配避免了这个问题：

```
def jsonObj = new JsonSlurper().parseText( element.toString() )
Person.get(jsonObj.owner.id) 
```

如果有一个通用的方法会很好。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:43:44.317

我以前没有做过，但我想你可以使用反射。

```
def myClass = Class.forName("${owner.class}")
def classLoader = this.getClass().getClassLoader()
def myDomain = (myClass, true, classLoader).newInstance()) 
```

编辑：省略了一个结束括号

# android - 为什么 Android 应用程序在修复错误后不重新加载到模拟器 Intellij IDEA？

> ID：11559927
> 
> 赞同：1
> 
> 时间：2012-07-19T11:30:35.443
> 
> 标签：android, macos, intellij-idea, emulation

我在 Intellij Idea 中为 Android 编写了第一个简单的应用程序，将其加载到模拟器中，然后我对布局进行了一些更改，并尝试再次将固定的应用程序加载到模拟器中，但我有过时的应用程序，而不是新的固定应用程序。我应该怎么做才能在模拟器中运行新应用程序？

Intellij IDEA 11.1.2 CE Android 2.3.3 Android SDK 工具 r20 Mac OS X 10.7.4

-- 提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:48:27.053

很可能是 IDEA 11.1.2 中的一个错误，原因是与该 IDEA 版本之后发布的新 Android 平台工具不兼容。IDEA 11.1.3+ 版本应该可以正常工作。

# c# - 使用调度程序创建 Windows 服务？

> ID：11559931
> 
> 赞同：0
> 
> 时间：2012-07-19T11:30:41.027
> 
> 标签：c#, windows-services

我正在创建一个 Windows Server，它将自行安装在 dobleclick 上。但我正在编写核心代码。我面临的问题是

windows 服务器将从数据库中获取 10 条记录并使用 WCF 服务上传。现在完成这 10 条记录后，服务将再次查看数据库并再次获取 10 条记录。

但我也在使用定时器，这样这个过程将在每 5 分钟后继续。现在，如果在某个时间，使用 WCF 上传的时间超过 5 分钟，我必须停止新的执行并等待它完成。

我该怎么表现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:33:29.470

每次计时器计时，将其禁用并在执行结束时再次启用它，以便在最后一次执行结束后 5 分钟再次计时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:48:53.403

这是锁定的理想方案。在下面的示例中，回调将每 5 分钟触发一次。如果在下一次回调触发时服务仍在处理前一批，它将简单地丢弃它并在 5 分钟内重试。如果您愿意，您可以更改它以使回调排队，但是，如果您排队太多，您需要警惕线程池饥饿。

您甚至可以将您的时间间隔缩短到 1 分钟，以避免在批次溢出的情况下出现任何长时间的延迟。

```
static Timer timer; 
static object locker = new object(); 

public void Start() 
{ 
    var callback = new TimerCallback(DoSomething); 
    timer = new Timer(callback, null, 0, 300000); 
} 

public void DoSomething() 
{ 
    if (Monitor.TryEnter(locker)) 
    { 
       try 
       { 
           // my processing code 
       } 
       finally 
       { 
           Monitor.Exit(locker); 
       } 
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:34:05.897

当你开始做你的事情时，为什么不设置一个布尔值（或者锁定更好）。

在循环中，检查您的布尔（或锁定）是否处于活动状态，然后跳过，这样您的下一批将在 5 分钟后运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T11:44:05.667

使用 a [`Timer`](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)to 计时五分钟，但告诉它不要重复：

```
timer = new Timer(state => FetchRecords(), null, 
                    new TimeSpan(0, 5, 0), Timeout.Infinite); 
```

`FetchRecords`这将在五分钟后调用该方法，但不重复 ( `Timeout.Infinite`)。

在您的`FetchRecords`方法结束时，重新启动计时器：

```
timer.Change(new TimeSpan(0, 5, 0), Timeout.Infinite); 
```

这将重新启动计时器。

只要方法调用在这段时间内完成，这种模式就可以让心跳每五分钟滴答一次，但如果方法调用仍在进行中，则不滴答。

# html - 水平对齐图像替换文本

> ID：11559945
> 
> 赞同：0
> 
> 时间：2012-07-19T11:31:18.790
> 
> 标签：html, css, sprite, text-alignment, image-replacement

也许我今天有点厚，但我需要一些 CSS 帮助。我正在制作一个看似简单的产品评论展示。这是一个 div (.rating)，其中有两个元素：

1.  `<strong class="score fourStars">Rated 4 out of 5 stars</strong>`
2.  `<span class="reviewsCount">average from 34 reviews</span>`

**HTML片段：**

```
<div class="rating">
  <strong class="score fourStars">customer rating 4 out of 5 stars</strong> <span class="reviewsCount">from 34 reviews</span>
</div> 
```

**CSS**

```
.rating {
   overflow: auto;
   text-align: center;
}
.score {
   display: block;
   float: left;
   width: 50px;
   background: transparent url(http://images2.drct2u.com/content/common/images/commongui/productReviewRatingStars.png) no-repeat 0 50%;
   text-indent: 100%;
   white-space: nowrap;
   overflow: hidden; /* hide text, phark image replacement (new technique)
   http://www.zeldman.com/2012/03/01/replacing-the-9999px-hack-new-image-replacement/ */
}
.score.fourStars {
   background-position: -1200px 50%;
}
 ... 
```

**问题**

我已经很好地从精灵中得到了这个东西。现在的问题是如何让它集中对齐？！我一直在寻找 inline-block 来拯救我，但显然它必须在 IE7 上工作。该死的。

**基本视觉示例**

```
[          [score.fourStars][.reviewCount]          ] 
```

也许我错过了一些明显的东西。也许有人可以指出我的光的方向。设置 text-align: center 似乎只对齐评论部分的数量，而不是图像替换的评论星。

帮助...

# django - Django - 可以在一个 HttpRequest 中返回 POST 和 GET 请求吗？

> ID：11559946
> 
> 赞同：3
> 
> 时间：2012-07-19T11:31:23.097
> 
> 标签：django, post, get

POST 和 GET 请求可以在一个 HttpRequest 中发生吗？

如果是这样，我如何检测其中一个或另一个的存在？

IE

`request.method == 'POST'`

和

`request.method == 'GET'`

不能同时为真。（好吧，我想人们可以通过定义 == 或将方法调用重定向到一个函数来做一些可怕的黑客行为，但是 ew。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T11:35:34.670

您不返回请求，而是返回响应。响应不关心它是否为`GET`or `POST`，它取决于您的实现，您想要做什么并响应这些请求。

编辑评论：您可以安全地使用检查请求类型的方法，即使用`request.method == 'POST'`or `request.method == 'GET`。如果你想双重确认检查`request.POST`。例如

```
if request.method == 'POST' and request.POST:
    #do POST processing

elif request.method == "GET" and request.GET :
    #do GET processing 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:03:14.810

事实证明，一个 HTTP 响应（如在底层技术中）不能/不应该同时返回 POST 和 GET 数据。我认为我的这种基本误解使人们感到困惑。

# google-apps-script - 从 Google Apps 脚本库安装脚本时，托管库是否会继承？

> ID：11559951
> 
> 赞同：4
> 
> 时间：2012-07-19T11:31:29.987
> 
> 标签：google-apps-script

文档说明了[从库安装 Apps 脚本时复制的内容](https://developers.google.com/apps-script/publishing_gallery#whats_published)，但不清楚库脚本中使用的托管库是否也被复制。

从 Google Apps 脚本库安装脚本时，托管库是否会继承？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:51:37.037

是的，库配置应在安装时与脚本一起复制。

# java - 比较一个字符串的单词和另一个字符串的单词

> ID：11559952
> 
> 赞同：-3
> 
> 时间：2012-07-19T11:31:34.890
> 
> 标签：java, string-comparison

我有两个字符串，其中包含用空格分隔的字母和数字。例如 String1"elza7ma wa2fa fel matab" 和 String2"2ana ba7eb el za7ma 2awy 2awy"。

我想让 String1 的每个单词都与 String2 的所有单词进行比较，并生成比较单词的百分比。如果比较词的百分比大于 80%，则返回该词以供进一步使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:55:40.747

您可以使用该类的`split()`方法`String`在数组中获取返回给您的两个字符串的每个单独单词，然后您可以遍历数组以查找匹配的单词。这是一个非常简单的例子，应该能让你朝着正确的方向开始。如果您先尝试自己编写代码，然后在有问题时提出问题并提供一些代码以供审查，您将获得更好的帮助。

```
String[] s1 = String1.split(" ");
String[] s2 = String2.split(" ");

for(String s : s1){
    for(String ss : s2){
        if(ss.equals(s)){
            //do something
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:54:45.987

看一下 string 类的[split](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)和[compareTo](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#compareTo%28java.lang.String%29)方法。要分离您的字符串，您只需执行以下操作：

```
String frag[] = String1.split(" "); 
```

这会将字符串拆分为由空格分隔的片段。您现在可以使用循环将所有片段相互比较。

```
for(int i=0; i<frag.length(); ++i){
    if(frag[i].compareTo(frag2[i]) == 0){
    //do something
    }
} 
```

# java - HashMap put() 和 get() 方法如何工作的内部原理（仅限基本逻辑）

> ID：11559954
> 
> 赞同：6
> 
> 时间：2012-07-19T11:31:44.087
> 
> 标签：java, data-structures, hashmap, hashtable

`HashMap`当我们使用`put()`方法在类中放置一个键实例说“键”和一个值实例说“值”时，`HashMap`该类在内部做什么。当我们说 时，它如何取回值`hashMap.get(key)`？

**编辑**：我不想在这里详细说明，基本上是试图了解大局以及在和操作中的作用`equals()`和`hashcode()`方法。`put()``get()`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-19T11:49:47.417

如果您谈论更高的图片，就像下面一样。这里我将项目`key`称为`Map`

**在放置物品时。**

1.  `hashcode`密钥计算
2.  如果`basket`存在`hashcode`，则使用`equals`键搜索该篮子中的键的方法来确定是否要添加或替换元素。
3.  如果不存在，则创建新的篮子（重新散列）并将该元素添加到其中。

**得到：**

1.  获取`hashcode`密钥
2.  去那个篮子
3.  在键上迭代使用`equals`将返回该篮子中的那个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:36:04.273

这就是 IBM jdk 1.6 中所做的（我相信所有供应商都差不多）

**编辑**

关于你可能`equals`有`hashcode`兴趣看到[这篇](https://stackoverflow.com/a/27609/579580)文章。

**编辑结束**

```
 /**
 * Maps the specified key to the specified value.
 * 
 * @param key
 *            the key
 * @param value
 *            the value
 * @return the value of any previous mapping with the specified key or null
 *         if there was no mapping
 */
@Override
public V put(K key, V value) {
    return putImpl(key, value);
}

V putImpl(K key, V value) {
    Entry<K,V> entry;
    if(key == null) {
        entry = findNullKeyEntry();
        if (entry == null) {
            modCount++;
            if (++elementCount > threshold) {
                rehash();
            }
            entry = createHashedEntry(null, 0, 0);
        }
    } else {
        int hash = key.hashCode();
        int index = hash & (elementData.length - 1);
        entry = findNonNullKeyEntry(key, index, hash);
        if (entry == null) {
            modCount++;
            if (++elementCount > threshold) {
                rehash();
                index = hash & (elementData.length - 1);
            }
            entry = createHashedEntry(key, index, hash);
        }
        if ((cache != null) && (hash >> CACHE_BIT_SIZE == 0)
                && (key instanceof Integer)) {
            cache[hash] = value;
        }
    }

    V result = entry.value;
    entry.value = value;
    return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-02T14:28:36.227

从onwords 开始，通过使用平衡树而不是链表来存储映射条目，可以提高键中存在大量冲突的对象`java 8`的性能。`HashMap`主要思想是，一旦哈希桶中的项目数超过某个阈值，该桶将从使用条目的链接列表切换到平衡树。在高哈希冲突的情况下，这将提高最坏情况下的`O(n)`性能`O(log n).`

基本上当一个桶变得太大时（目前：） `TREEIFY_THRESHOLD = 8`，`HashMap`动态地用树图的临时实现替换它。这样一来，`O(n)`我们就会变得更好，而不是悲观`O(log n)`。

的箱（元素或节点）`TreeNodes`可以像任何其他箱一样被遍历和使用，但在填充过多时还支持更快的查找。然而，由于绝大多数正常使用的 bin 并没有被过度填充，因此在 table 方法的过程中检查树 bin 的存在可能会被延迟。

`Tree`箱（即元素全部为 的箱`TreeNodes`）主要由 hashCode 排序，但在 ties 的情况下，如果两个元素属于相同的“<code>class C implements Comparable<C>”，那么它们的`compareTo()`方法用于订购。

因为`TreeNodes`它们的大小大约是常规节点的两倍，所以我们仅在 bin 包含足够的节点时才使用它们。当它们变得太小（由于移除或调整大小）时，它们会被转换回普通垃圾箱（目前：）`UNTREEIFY_THRESHOLD = 6`。在用户分布良好的情况`hashCodes`下，很少使用树箱。

链接到[java 文档](https://docs.oracle.com/javase/8/docs/api/java/util/Map.html)

[集合框架增强](https://docs.oracle.com/javase/8/docs/technotes/guides/collections/changes8.html)

# javascript - 如何实现后退按钮以动态生成 html？

> ID：11559957
> 
> 赞同：3
> 
> 时间：2012-07-19T11:31:48.053
> 
> 标签：javascript, html, navigation

我有单页应用程序。所有数据都由 ajax 检索并在客户端呈现。我有下一个工作流程：

1.  用户打开项目列表。列表有无限滚动
2.  用户滚动并点击项目
3.  系统发出ajax请求，生成新的html并替换之前的内容
4.  用户点击浏览器的后退按钮
5.  系统更改 url ( [historyjs](https://github.com/balupton/History.js/) ) 和路由器加载项目并呈现列表。但是滚动的位置丢失了！所以用户需要滚动到列表中的上一个位置。

如何在后退/下一个行动中保持这个位置并为所有项目实施通用解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:30:50.123

这是我的解决方案（咖啡脚本）：

```
class window.Explore
  cached_pages = {}

  preserve: (url)=>
    current_position = window.pageYOffset || document.documentElement.scollTop || 0

    cached_pages[url] = 
      position: current_position

  clean: =>
    cached_pages = {}

  scroll_back: (url)=>    
    if cached_pages[url]
      $('body').scrollTop cached_pages[url].position

window.cached_explore = new Explore()

window.prev_state = undefined
window.current_state = undefined

$ ->
  History = window.History
  if !History.enabled
    return false

  History.Adapter.bind window, "statechange", =>
      # store previous history state
      window.prev_state = window.current_state
      window.current_state = History.getState()
      # preserve each page position before leaving
      if window.prev_state and window.prev_state.hash
        window.cached_explore.preserve(window.prev_state.hash)    

      place_match = location.pathname.match(/\/place\/(.*)/)    

      # place page
      if place_match
        # retrieve place      
        window.retrieve_place place_match[1], window.search_query, (err, place_dto) ->        
          # render place page
          window.show_place_popup place_dto        

      # explore places page
      else if location.pathname is '' or location.pathname is '/'
        # check if a page was already opened
        window.renred_explore_page()

        if window.prev_state
          window.cached_explore.scroll_back location.pathname 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:45:15.900

返回浏览器按钮会更频繁地将您返回到“缓存”页面。如果没有缓存，那么它将重新渲染页面。显然，由于 HTTP 状态的性质是丢失的。我的建议是将项目的编号存储在列表中，或者将项目值存储在“会话”变量或“缓存”对象中，并在页面加载之前从那里访问它。

如果 Session["lastSelectedItem"] != null，则获取值/数字，并使用 jQuery 或其他方法在正确的位置设置“选择器”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T12:02:25.050

只需添加到列表 ID 并滚动到此 ID

```
<div id="item_1002">content of 1002</div>
<div id="item_1003">content of 1003</div>
<div id="item_1004">
    <span>content of 1004</span>
    <a href="#item_1002">goto 1002</a>
</div> 
```

这甚至可以工作 wo js :)

用户点击链接，去发帖`id`（如果它在当前页面上可用）并有类似的位置`http://site.com/#item_1002`。当用户点击返回浏览器时，将 url 更改为`http://site.com/#item_1004`并滚动到`<div id="item_1004">...`

* * *

编辑

我确定这行不通，但就像概念一样，它比我糟糕的英语更好

```
<script type="text/javascript">
    // scroll to id
    // http://stackoverflow.com/questions/68165/javascript-to-scroll-long-page-to-div

    // need to use this
    // History.Adapter.bind(element,event,callback);
    // but I'm stuck how it works
    // so jQ
    $(document).ready(function(){
        $('a').click(function(){
            // document.getElementById('youridhere').scrollIntoView();
            $(this).scrollIntoView();
            History.pushState({}, 'title', '#item_ID');
        })

        // Bind to StateChange Event
        // Note: We are using statechange instead of popstate
        History.Adapter.bind(window,'statechange',function(){
            // Note: We are using History.getState() instead of event.state
            var State = History.getState();

            $(State.url).scrollIntoView();
        });
    })

</script>

<div id="item_1002">content of 1002</div>
<div id="item_1003">content of 1003</div>
<div id="item_1004">
    <span>content of 1004</span>
    <a href="javascript:">goto 1002</a>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T11:59:22.363

如果您不想或无法使用会话，请尝试使用`History.replaceState()`.

如果用户在无限滚动中加载新列表项，请替换历史状态`History.replaceState()`并附加项目计数或最后一个项目 ID。

如果用户单击后退按钮，则评估项目计数，加载列表并向下滚动。

# javascript - Backbone.js - 集合未定义

> ID：11559958
> 
> 赞同：3
> 
> 时间：2012-07-19T11:31:49.207
> 
> 标签：javascript, backbone.js, javascript-framework

我正在尝试学习backbone.js，但我一直坚持获取json并添加到集合中。集合是未定义的，我不知道为什么。代码：

```
$(document).ready(function() {
    (function($) {
        //model
        window.Wine = Backbone.Model.extend();

        window.WineCollection = Backbone.Model.extend({
            url: "http://localhost/bootstrap/json.php",
            model: Wine
        });

        //views
        window.WineItemView = Backbone.View.extend({
            template: _.template($("#wine-item-template").html()),
            tagName: 'li',
            render: function() {
                $(this.el).html(this.template(this.model.toJSON()));
                return this;
            }
        });

        window.WineListView = Backbone.View.extend({
            tagName: 'ul',
            initialize: function() {
                this.model.bind('reset', this.render, this);

            },
            render: function() {

                _.each(this.model.models, function(wine) {
                    $(this.el).append(new WineItemView({
                        model: wine
                    }).render().el);
                }, this);
                return this;
            }
        });

        window.WineView = Backbone.View.extend({
            template: _.template($('#wine-template').html()),
            render: function() {
                $(this.el).html(this.template(this.model.toJSON()));
                return this;
            }
        });
        //Router
        window.AppRouter = Backbone.Router.extend({
            routes: {
                '': 'home',
                'wines/:id': "wineDetails"
            },
            home: function() {
                this.wineList = new WineCollection();

                this.wineListV = new WineListView({
                    model: this.wineList
                });
                this.wineList.fetch({success: function(){
                    console.log(this.wineList.models); // => 2 (collection have been populated)
                }});
                console.log(this.wineListV);

                $("#winelist").html(this.wineListV.render().el);
            },
            wineDetails: function(id) {
                this.wine = this.wineList.get(id);
                console.log(id);
                this.wineView = new WineView({
                    model: this.wine
                });
                $("#container").empty().html(this.wineView.render().el);
            }
        });

    })(jQuery);

    var app = new AppRouter();
    Backbone.history.start();
}); 
```

json.php 返回：

```
[
   {
      "name":"Wine 1",
      "price":"100",
      "status":"available"
   },
   {
      "name":"Wine 1",
      "price":"100",
      "status":"available"
   },
   {
      "name":"Wine 1",
      "price":"100",
      "status":"available"
   }
] 
```

我正在我的本地主机上对此进行测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T13:17:35.883

你犯了一个愚蠢的错字：

```
window.WineCollection = Backbone.Model.extend 
```

应该

```
window.WineCollection = Backbone.Collection.extend 
```

请注意，按照惯例，您的`WineListView`类应该使用 this.collection 来引用一个实例，`WineCollection`并且 Backbone 集合对象提供下划线迭代方法，因此而不是

```
.each(this.model.models, function(wine) { 
```

做

```
this.collection.each(function (wineModel) { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T13:30:59.167

你应该改变

```
window.WineCollection = Backbone.Model.extend({
            model: Wine,
            url: "wine.json"

        }); 
```

至

```
window.WineCollection = Backbone.Collection.extend({
            model: Wine,
            url: "wine.json"

        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:42:32.213

欢迎来到 SO :) 这是你的第一个问题，所以让我让它难忘。当您说集合是`undefined`您可以向我们提供行号（或突出显示它）以便于调试。如果你想引用你想要的对象（默认为object ）而不是在下面做 #1 ，你必须在内部`initialize`方法中输入`_.bindAll(this)``window`

```
 _.each(this.model.models, function (wine) {
     $(this.el).append(new WineItemView({
         model: wine
     }).render().el);
 }, this); 
```

### 1

```
 this.model.each(function (wine) {
     $(this.el).append(new WineItemView({
         model: wine
     }).render().el);
 }, this); 
```

也试试这个

```
 window.WineListView = Backbone.View.extend({
     tagName: 'ul',
     initialize: function () {
         _.bindAll(this);
         this.model.on('reset', this.render);
     },
     render: function () {
         #1
     }
 }); 
```

以防万一你在这里迷路是代码的副本[http://jsbin.com/axixir/edit#javascript](http://jsbin.com/axixir/edit#javascript)

# extjs - 商店的动态网址不适用于分页工具栏

> ID：11559962
> 
> 赞同：3
> 
> 时间：2012-07-19T11:32:23.970
> 
> 标签：extjs, pagination, store

我有一个网格，人们基于某些选择将看到数据。要在网格中加载数据，我使用这个

```
Details.load({
url: baseUrl + 'data/'+data.Id+'/info.json?page=1&fromDate=' + startDate + 'T' + startTime + '&toDate=' + endDate + 'T' + endTime
}); 
```

这将加载商店。但是现在有问题。我有一个分页工具栏

```
bbar: Ext.create('Ext.PagingToolbar', {
        store: Details,
        displayInfo: true,
        displayMsg: 'Displaying record {0} - {1} of {2}',
        emptyMsg: "No records to display",

    }) 
```

现在，当网格与商店一起加载时，分页工具栏会正确显示页面。但是当我点击下一步时，它不会加载相同的网址。它将加载商店中定义的 url。所以我确实在没有 url 的情况下尝试了商店，但是出现了错误：

```
TypeError: p is undefined 
```

那么我需要做什么才能使用正确的 url 获取 pagingToolbar 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:07:52.923

您可以通过其[Proxy](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.JsonP-cfg-url)更改商店的 url 。尝试在商店 beforeload 上添加一个侦听器，该侦听器应在发出请求之前触发

```
listeners:{
    //this is used to construct the proxy url before the load is done
    beforeload:{

        fn:function () {
            var me = this;
            me.updateProxyURL(); //write this function yourself
        }
    } 
```

# visual-c++ - dllimport需要什么？

> ID：11559971
> 
> 赞同：2
> 
> 时间：2012-07-19T11:32:41.237
> 
> 标签：visual-c++, dllimport, declspec

我正在使用 DLL 来更好地理解它们。`Add`所以我创建了一个简单的 dll（带有加载时动态链接） ，它具有`Sub`和`Mul`. `__declspec(dllexport)`在我用于函数声明的 dll 的头文件中。

对于可执行文件，我将编译 dll 后创建的 .lib 添加到属性（用于链接）。之后我直接调用该函数`Add`而不使用`__declspec(dllimport)`. 该程序奏效了。然后我将函数调用更改为`__declspec(dllimport) (Add)`，程序再次运行。

我无法理解需求`__declspec(dllimport)`是什么？我还没有编写运行时链接 DLL，但从我看到的示例中，在这种情况下也不需要 dllimport。

感谢你的协助。

# android - Android：在项目中创建测试项目会导致“构建期间发生错误”，有什么想法吗？

> ID：11559973
> 
> 赞同：0
> 
> 时间：2012-07-19T11:32:44.997
> 
> 标签：android, eclipse, junit, adt, android-testing

我正在使用最新版本的 eclipse (v4) 和最新版本的 eclipse 的 ADT 插件。

阅读文档，android 建议在我正在创建的项目的相同结构中创建测试项目，但在名为 tests 的目录下（与当前 src 目录相同级别）

我已经尝试了很多次，每次单击完成时都会出现错误。

> 未找到元素，构建期间发生错误。

我创建了许多其他项目并删除了项目名称之间的所有空格，以防万一这导致问题，但错误仍然出现。

当然，在当前项目之外创建一个测试项目是可行的，但根据文档，最好的地方是将测试项目放在正在测试的项目中。

我有什么遗漏吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T19:32:23.717

实际上，Android 建议将测试保存在具有测试目录的并行目录结构的单独项目中。请参阅[测试基础下的测试项目](http://developer.android.com/tools/testing/testing_android.html#TestProjects)。该文档将指导您使用 ADT 创建测试项目。

# asp.net - 返回数据表和字符串

> ID：11559979
> 
> 赞同：1
> 
> 时间：2012-07-19T11:33:16.207
> 
> 标签：asp.net, gridview, datatable

我想返回一个应该包含一个字符串的数据表，在返回一个数据表时手动添加一个字符串，下面是我正在使用的代码：

```
static public DataTable GetInfoByCode(string code, string user)
    {

    string sql =    "SELECT aspnet_Users.UserName,  " +
                    "Code.dateUsed" +
                    "FROM aspnet_Membership INNER JOIN" +
                    "aspnet_Users ON aspnet_Membership.UserId = aspnet_Users.UserId INNER JOIN"+
                    "rAccessCode ON aspnet_Users.UserId = rAccessCode.userID INNER JOIN"+
                    "Code ON rAccessCode.CodeID = Code.accessCodeID"+
                    "WHERE (Code.accessCode = code)";

                    MembershipUser userPass = Membership.GetUser(user);
                    string password = userPass.GetPassword();
                    SqlDataAdapter da = new SqlDataAdapter(sql, ConnectionString);
        DataTable dt = new DataTable();
        da.Fill(dt);
        return dt; //want to return password field in the dt so that i can link datasource with datagridview and show password and username in gridview
        } 
```

我想在 dt 中添加密码，以便在 datagrid 视图中检索密码字段，例如：

```
<asp:GridView ID="gvList" runat="server" >
    <Columns>
        <asp:BoundField DataField="UserName" ReadOnly="True" HeaderText="Username" />
        <asp:BoundField DataField="password" ReadOnly="True" HeaderText="Password" />
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:46:19.007

如果您希望数据表中有一个且只有一行，则可以进行以下修改：

```
DataTable dt = new DataTable();
da.Fill(dt);
//Add the password column:
dt.Columns.Add("password", typeof (String)); 
//set the value:
dt.Rows[0]["password"] = password;
//Now return your datatable 
```

这将向 DataTable 添加一个附加列，`password`然后您为其设置值。

但是，在您的原始示例中，我看不到您在哪里过滤用户名。像下面这样的查询在这里应该有所帮助：

```
string sql =    "SELECT aspnet_Users.UserName,  " +
                "Code.dateUsed " +
                "FROM aspnet_Membership INNER JOIN" +
                "aspnet_Users ON aspnet_Membership.UserId = aspnet_Users.UserId INNER JOIN"+
                "rAccessCode ON aspnet_Users.UserId = rAccessCode.userID INNER JOIN"+
                "Code ON rAccessCode.CodeID = Code.accessCodeID"+
                "WHERE (Code.accessCode = @code)";

                using(SqlConnection connection = new SqlConnection("connstring"))
                {
                    using(SqlCommand command = new SqlCommand())
                    {
                        command.Connection = connection;
                        command.CommandType = CommandType.Text;
                        command.Text = sql;

                        command.Parameters.AddWithValue("@code", code);

                        connection.Open();

                        using(SqlDataReader reader = command.ExecuteReader())
                        {
                            dt.Load(reader);
                        }

                    }

                } 
```

请注意，查询已被参数化，因此我们只尝试返回与用户代码匹配的行。如果不存在这样的行，你会想要满足这个（`dt.Rows.Count == 0`例如）

但是，我同意其他海报，没有理由不将其表示为自定义用户对象 - 您仍然可以将其数据绑定到显示器。例如：

```
public class User{

  public string UserName { get; set; }

  public string Code { get; set; }

  public string PasswordHash { get; set; }

  public User()
  {

  }

} 
```

然后，在加载期间：

```
User user = new User();     

using(...)
{
        using(SqlDataReader reader = command.ExecuteReader())
        {
            if(reader.Read())
            {   
                user.UserName = reader.GetString(reader.GetOrdinal("UserName"));
            }     
        }
    }

user.PasswordHash = userPass.GetPassword();
user.Code = code; 
```

其中 using(...) 是外部 using 块的简写。

也没有理由不能这样做`List<User>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:47:08.890

最好返回将包含所有想要的值的对象，然后将数据网格绑定到此类对象的列表。但是，如果您想坚持使用 DataTable 解决方案，您可以添加列（或在下面的示例中添加它以选择）并用密码数据填充它。顺便提一句。似乎此查询将返回只有一行的 DataTable：

静态公共数据表GetInfoByCode（字符串代码，字符串用户）{

```
string sql =    "SELECT aspnet_Users.UserName,  " +
                "Code.dateUsed, Password as '' " +
                "FROM aspnet_Membership INNER JOIN" +
                "aspnet_Users ON aspnet_Membership.UserId = aspnet_Users.UserId INNER JOIN"+
                "rAccessCode ON aspnet_Users.UserId = rAccessCode.userID INNER JOIN"+
                "Code ON rAccessCode.CodeID = Code.accessCodeID"+
                "WHERE (Code.accessCode = code)";

                MembershipUser userPass = Membership.GetUser(user);
                string password = userPass.GetPassword();
                SqlDataAdapter da = new SqlDataAdapter(sql, ConnectionString);
    DataTable dt = new DataTable();
    da.Fill(dt);
    if (dt.Rows.Count > 0)
      dt.Rows[0].SetField<string>("Password", password);
    return dt; //want to return password field in the dt so that i can link datasource with datagridview and show password and username in gridview
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T11:48:42.240

如果总是返回一条记录，那么你可以这样做

```
dt.Columns.Add("Password");
dt.Rows[0]["Password"] = password; 
```

否则您将不得不遍历您的记录并分配密码

# osgi - “Import-Bundle”和“Require-Bundle”有什么区别？

> ID：11559980
> 
> 赞同：14
> 
> 时间：2012-07-19T11:33:18.900
> 
> 标签：osgi, spring-dm

**spring source dm server specific Import-Bundle**和 OSGi 的**Require-Bundle**有什么区别？
我很困惑是否在我的项目中使用 Import-Bundle 或 Require-Bundle。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-20T07:23:34.407

Import-Bundle 与 Require-Bundle 类似，它创建对另一个包的完整依赖项，包括该包的依赖项。这种*传递性*很糟糕，因为您不知道自己依赖什么，从而产生了我们在面向对象编程中非常熟悉的臭名昭著的“[大泥球”问题。](http://www.laputan.org/mud/)

在 OO 中，我们通过使用接口找到了解决这种纠缠的方法，它们将实现与规范分开。OSGi 是围绕一个类似的尽管更高阶的*服务合同*概念而构建的。这些契约（接口、权限、助手类）存储在一个包中。在基于合同的编程中，您依赖于合同，而不是实现。Ergo，一个 OSGi 包应该依赖于包，因为它们代表了合约。

```
 Import-Package               <=> interface
 Import-Bundle/Require-Bundle <=> implementation class 
```

Import-Bundle 不是 OSGi，它是专有的 Spring 扩展。它是 Require-Bundle 的一种更简洁的形式；不洁是支持某些 Eclipse 用例所必需的。OSGi 决定不采用此标头，因为如果您想从组件构建系统，Require-Bundle/Import-Bundle 从根本上被破坏了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T14:20:30.893

理想情况下，您应该尝试改用 Import-Package。它使您的捆绑包彼此之间的依赖性降低。它还允许表明您仅依赖于捆绑包的一部分。这对于管理版本也很重要。在 OSGi 中，您可以定义独立于捆绑包版本的导出包的版本。因此，您可以确保仅在 API 真正更改时才更改其版本。这可以使您的应用程序更易于管理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T16:33:53.670

它在 SpringSource 中进行了[解释](http://static.springsource.com/projects/dm-server/1.0.x/programmer-guide/html/ch05s05.html)

总结一下：Import-Bundle 会导入某个 bundle 的所有导出包，部署时会解决这个问题，而 Require-Bundle 确实需要该类型的 bundle，并且这种关系在运行时保持不变。

通常，它们的行为几乎相同。例如，在以下情况下可能会有所不同：

*   您有“拆分包”：存在于多个包中的包，您可能会“丢失”与 Import-Package / Import-Bundle 的依赖关系，您只能用 Require-Bundle 表示（请注意，*如果可以的话，您真的应该避免拆分包*）

*   我认为 Bundle->Package 解决方案是在您部署*该*捆绑包时。如果您将带有导出包的包重新部署到具有不同导出的版本，我认为包不会注意到。老实说，我不太确定这一点。

总而言之，如果你真的需要的话，我会说坚持使用 OSGi 标准：Import-Package 或 Require-Bundle。你会有更多的标题，但从长远来看，你会有更多的选择。

# java - 如何在 GXT 中合并网格单元

> ID：11559987
> 
> 赞同：4
> 
> 时间：2012-07-19T11:33:57.273
> 
> 标签：java, gridview, gxt

我想知道是否可以像这样合并 GXT Grid 中的单元格：

![合并单元格](../Images/2dfd1262cfc8433419961a3c14a66f92.png)

我想我必须覆盖渲染器，但找不到哪个渲染器。
有人可以告诉我使用 GXT 3.0 的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:59:04.067

下面是我如何在 gxt 3 中编辑网格中的单元格。在此示例中，我只是添加了一个 div，以便为硒测试添加一个 id：

```
ColumnConfig<LessonOFY, String> name = new ColumnConfig<LessonOFY, String>(lessonProperties.name(), 250, i18n.lessonName());

AbstractCell<String> c2 = getTestingLabel(GAE_ID_CONSTANTS.IDS.LESSON_GRID.toString());

name.setCell(c2);

public static AbstractCell<String> getTestingLabel(final String label) {
    AbstractCell<String> c2 = new AbstractCell<String>() {

        @Override public void render(com.google.gwt.cell.client.Cell.Context context, String value, SafeHtmlBuilder sb) {

            value = "<div id=\"" + label + "\">" + value + "</div>";
            sb.appendHtmlConstant(value);
        }

    };
    return c2;
} 
```

value 只是最初在网格中设置的值

既然你提出了这个问题，我真的很想做同样的事情。如果你愿意，请告诉我进展如何。请！

# javascript - 如何在CKEditor的当前位置设置默认样式..？

> ID：11559995
> 
> 赞同：0
> 
> 时间：2012-07-19T11:34:41.467
> 
> 标签：javascript, ckeditor

如何通过javascript在当前位置设置一些默认的CKEditor样式（在样式组合框中显示）。？

例如，如果光标在一个位置，我必须在输入任何字符后为该位置设置“标记：黄色”样式，它应该变为黄色。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T16:46:41.457

我不确定我是否理解你，但你不只是想执行命令应用（或删除）例如粗体样式吗？如果是，您可以通过以下方式执行此操作：

```
editor.execCommand('bold'); 
```

如果您在文本中的某处放置了空选择（插入符号），则在执行此命令之前，编辑器将创建空`<strong>^</strong>`元素，因此当用户开始键入时，文本将加粗。

**更新**

样式的应用方式略有不同。

```
var style = new CKEDITOR.style(
    { name: 'Blue Title', element: 'h3', styles: { 'color': 'Blue' } });
style.apply(editor.document); 
```

这会将蓝色标题样式应用于当前选择。`_source/plugins/styles/styles/default.js`您可以在(http://dev.ckeditor.com/browser/CKEditor/trunk/_source/plugins/styles/styles/default.js)中找到其他样式定义，也可以在代码中获取它们：

```
editor.getStylesSet(function(stylesDefinitions) {
    // stylesDefinitions is an array
}); 
```

# c# - 如何在 WPF 中创建计时器？

> ID：11559999
> 
> 赞同：83
> 
> 时间：2012-07-19T11:35:03.327
> 
> 标签：c#, wpf

我是 wpf 计时器的新手，我需要一个代码，每 5 分钟就会弹出一个消息框。.任何人都可以帮助我获得简单的计时器代码。

这就是我到目前为止所尝试的：

```
System.Windows.Threading.DispatcherTimer dispatcherTimer = new System.Windows.Threading.DispatcherTimer(); 
private void test() 
{ 
    dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick); 
    dispatcherTimer.Interval = new TimeSpan(0, 0, 1); 
    dispatcherTimer.Start(); 
} 
private void dispatcherTimer_Tick(object sender, EventArgs e)
{ 
    // code goes here 
} 

private void button1_Click(object sender, RoutedEventArgs e)
{ 
    test(); 
} 
```

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-07-19T11:44:13.850

在 WPF 中，您使用[`DispatcherTimer`](https://docs.microsoft.com/en-us/dotnet/api/system.windows.threading.dispatchertimer).

```
System.Windows.Threading.DispatcherTimer dispatcherTimer = new System.Windows.Threading.DispatcherTimer();
dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
dispatcherTimer.Interval = new TimeSpan(0,5,0);
dispatcherTimer.Start();

private void dispatcherTimer_Tick(object sender, EventArgs e)
{
  // code goes here
} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2015-06-16T20:32:02.827

补充以上。如果您希望将滴答事件编组回 UI 线程，则使用调度计时器。否则我会使用 System.Timers.Timer。