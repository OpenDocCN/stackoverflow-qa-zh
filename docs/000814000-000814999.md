# StackOverflow 问答 000814000-000814999

# c# - 如何将 JSON 转换为 XML 或 XML 转换为 JSON？

> ID：814001
> 
> 赞同：314
> 
> 时间：2009-05-02T02:25:41.970
> 
> 标签：c#, json, xml, json.net

我开始使用 Json.NET 将 JSON 格式的字符串转换为对象，反之亦然。我不确定在 Json.NET 框架中，是否可以将 JSON 中的字符串转换为 XML 格式，反之亦然？

* * *

## 回答 #1

> 赞同：459
> 
> 时间：2009-05-02T02:58:08.820

是的。使用包含辅助方法的 JsonConvert 类用于此精确目的：

```
// To convert an XML node contained in string xml into a JSON string   
XmlDocument doc = new XmlDocument();
doc.LoadXml(xml);
string jsonText = JsonConvert.SerializeXmlNode(doc);

// To convert JSON text contained in string json into an XML node
XmlDocument doc = JsonConvert.DeserializeXmlNode(json); 
```

此处的文档：[**使用 Json.NET 在 JSON 和 XML 之间进行转换**](http://james.newtonking.com/projects/json/help/index.html?topic=html/ConvertingJSONandXML.htm)

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-08-13T15:26:21.533

是的，你[可以](http://www.newtonsoft.com/json/help/html/ConvertJsonToXml.htm)做到（我愿意），但在转换时要注意一些悖论，并妥善处理。您无法自动符合所有接口可能性，并且在控制转换方面的内置支持有限 - 许多 JSON 结构和值无法自动双向转换。请记住，我使用 Newtonsoft JSON 库和 MS XML 库的默认设置，因此您的里程可能会有所不同：

### XML -> JSON

1.  所有数据都变成字符串数据（例如，你总是会得到*"false"* not *false*或*"0"* not *0*）显然 JavaScript 在某些情况下会以不同的方式处理这些数据。
2.  子元素可以成为嵌套对象`{}`或嵌套数组`[ {} {} ...]`，具体取决于是否只有一个或多个 XML 子元素。您将在 JavaScript 等中以不同的方式使用这两者。符合相同模式的不同 XML 示例可以通过这种方式产生实际上不同的 JSON 结构。在某些（但不一定是所有）情况下，您可以将属性[*json:Array='true'添加到您的元素以解决此问题。*](http://www.newtonsoft.com/json/help/html/ConvertXmlToJsonForceArray.htm)
3.  您的 XML 必须格式正确*，*我注意到它不需要完全符合 W3C 标准，但是 1\. 您必须有一个根元素，以及 2\. 您不能以数字开头元素名称是两个强制的 XML 标准我在使用 Newtonsoft 和 MS 库时发现。
4.  在旧版本中，空白元素不会转换为 JSON。他们被忽略了。空白元素不会成为*“元素”：null*

新的更新改变了 null 的处理方式（感谢 Jon Story 指出）：[https ://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_NullValueHandling.htm](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_NullValueHandling.htm)

### JSON -> XML

1.  您需要一个将转换为根 XML 元素的顶级对象，否则解析器将失败。
2.  您的对象名称不能以数字开头，因为它们不能转换为元素（XML 在技术上比这更严格），但我可以通过打破其他一些元素命名规则来“逃脱”。

请随时提及您注意到的任何其他问题，我已经开发了自己的自定义例程来准备和清理字符串，因为我来回转换。您的情况可能需要也可能不需要准备/清理。正如 StaxMan 所提到的，您的情况实际上可能需要您在对象之间进行转换......这可能需要适当的接口和一堆案例语句/等来处理我上面提到的警告。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2015-09-05T11:02:48.027

您也可以使用 .NET Framework 进行这些转换：

**JSON 到 XML：**使用[System.Runtime.Serialization.Json](https://msdn.microsoft.com/en-us/library/system.runtime.serialization.json%28v=vs.110%29.aspx)

```
var xml = XDocument.Load(JsonReaderWriterFactory.CreateJsonReader(
    Encoding.ASCII.GetBytes(jsonString), new XmlDictionaryReaderQuotas())); 
```

**XML 到 JSON：**使用[System.Web.Script.Serialization](https://msdn.microsoft.com/en-us/library/system.web.script.serialization%28v=vs.110%29.aspx)

```
var json = new JavaScriptSerializer().Serialize(GetXmlData(XElement.Parse(xmlString)));

private static Dictionary<string, object> GetXmlData(XElement xml)
{
    var attr = xml.Attributes().ToDictionary(d => d.Name.LocalName, d => (object)d.Value);
    if (xml.HasElements) attr.Add("_value", xml.Elements().Select(e => GetXmlData(e)));
    else if (!xml.IsEmpty) attr.Add("_value", xml.Value);

    return new Dictionary<string, object> { { xml.Name.LocalName, attr } };
} 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2009-05-02T03:29:27.823

我不确定这种转换是否有意义（是的，很多人都这样做，但主要是为了迫使方形钉穿过圆孔）——存在结构阻抗不匹配，并且转换是有损耗的。所以我建议不要进行这种格式到格式的转换。

但如果你这样做，首先从 json 转换为 object，然后从 object 转换为 xml（反之亦然）。进行直接转换会导致输出丑陋、信息丢失或两者兼而有之。

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2009-05-03T02:01:32.050

感谢大卫布朗的[回答](https://stackoverflow.com/a/814027/641833)。在我的 JSON.Net 3.5 中，转换方法位于 JsonConvert 静态类下：

```
XmlNode myXmlNode = JsonConvert.DeserializeXmlNode(myJsonString); // is node not note
// or .DeserilizeXmlNode(myJsonString, "root"); // if myJsonString does not have a root
string jsonString = JsonConvert.SerializeXmlNode(myXmlNode); 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-05-03T14:44:05.033

我搜索了很长时间以找到可接受的解决方案的替代代码，希望不使用外部程序集/项目。[感谢DynamicJson](http://dynamicjson.codeplex.com/)项目的源代码，我想出了以下内容：

```
public XmlDocument JsonToXML(string json)
{
    XmlDocument doc = new XmlDocument();

    using (var reader = JsonReaderWriterFactory.CreateJsonReader(Encoding.UTF8.GetBytes(json), XmlDictionaryReaderQuotas.Max))
    {
        XElement xml = XElement.Load(reader);
        doc.LoadXml(xml.ToString());
    }

    return doc;
} 
```

注意：出于 xPath 的目的，我想要一个 XmlDocument 而不是 XElement。此外，这段代码显然只是从 JSON 到 XML，有多种相反的方法。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-04-11T06:47:59.687

这是将xml转换为json的完整c#代码

```
public static class JSon
{
public static string XmlToJSON(string xml)
{
    XmlDocument doc = new XmlDocument();
    doc.LoadXml(xml);

    return XmlToJSON(doc);
}
public static string XmlToJSON(XmlDocument xmlDoc)
{
    StringBuilder sbJSON = new StringBuilder();
    sbJSON.Append("{ ");
    XmlToJSONnode(sbJSON, xmlDoc.DocumentElement, true);
    sbJSON.Append("}");
    return sbJSON.ToString();
}

//  XmlToJSONnode:  Output an XmlElement, possibly as part of a higher array
private static void XmlToJSONnode(StringBuilder sbJSON, XmlElement node, bool showNodeName)
{
    if (showNodeName)
        sbJSON.Append("\"" + SafeJSON(node.Name) + "\": ");
    sbJSON.Append("{");
    // Build a sorted list of key-value pairs
    //  where   key is case-sensitive nodeName
    //          value is an ArrayList of string or XmlElement
    //  so that we know whether the nodeName is an array or not.
    SortedList<string, object> childNodeNames = new SortedList<string, object>();

    //  Add in all node attributes
    if (node.Attributes != null)
        foreach (XmlAttribute attr in node.Attributes)
            StoreChildNode(childNodeNames, attr.Name, attr.InnerText);

    //  Add in all nodes
    foreach (XmlNode cnode in node.ChildNodes)
    {
        if (cnode is XmlText)
            StoreChildNode(childNodeNames, "value", cnode.InnerText);
        else if (cnode is XmlElement)
            StoreChildNode(childNodeNames, cnode.Name, cnode);
    }

    // Now output all stored info
    foreach (string childname in childNodeNames.Keys)
    {
        List<object> alChild = (List<object>)childNodeNames[childname];
        if (alChild.Count == 1)
            OutputNode(childname, alChild[0], sbJSON, true);
        else
        {
            sbJSON.Append(" \"" + SafeJSON(childname) + "\": [ ");
            foreach (object Child in alChild)
                OutputNode(childname, Child, sbJSON, false);
            sbJSON.Remove(sbJSON.Length - 2, 2);
            sbJSON.Append(" ], ");
        }
    }
    sbJSON.Remove(sbJSON.Length - 2, 2);
    sbJSON.Append(" }");
}

//  StoreChildNode: Store data associated with each nodeName
//                  so that we know whether the nodeName is an array or not.
private static void StoreChildNode(SortedList<string, object> childNodeNames, string nodeName, object nodeValue)
{
    // Pre-process contraction of XmlElement-s
    if (nodeValue is XmlElement)
    {
        // Convert  <aa></aa> into "aa":null
        //          <aa>xx</aa> into "aa":"xx"
        XmlNode cnode = (XmlNode)nodeValue;
        if (cnode.Attributes.Count == 0)
        {
            XmlNodeList children = cnode.ChildNodes;
            if (children.Count == 0)
                nodeValue = null;
            else if (children.Count == 1 && (children[0] is XmlText))
                nodeValue = ((XmlText)(children[0])).InnerText;
        }
    }
    // Add nodeValue to ArrayList associated with each nodeName
    // If nodeName doesn't exist then add it
    List<object> ValuesAL;

    if (childNodeNames.ContainsKey(nodeName))
    {
        ValuesAL = (List<object>)childNodeNames[nodeName];
    }
    else
    {
        ValuesAL = new List<object>();
        childNodeNames[nodeName] = ValuesAL;
    }
    ValuesAL.Add(nodeValue);
}

private static void OutputNode(string childname, object alChild, StringBuilder sbJSON, bool showNodeName)
{
    if (alChild == null)
    {
        if (showNodeName)
            sbJSON.Append("\"" + SafeJSON(childname) + "\": ");
        sbJSON.Append("null");
    }
    else if (alChild is string)
    {
        if (showNodeName)
            sbJSON.Append("\"" + SafeJSON(childname) + "\": ");
        string sChild = (string)alChild;
        sChild = sChild.Trim();
        sbJSON.Append("\"" + SafeJSON(sChild) + "\"");
    }
    else
        XmlToJSONnode(sbJSON, (XmlElement)alChild, showNodeName);
    sbJSON.Append(", ");
}

// Make a string safe for JSON
private static string SafeJSON(string sIn)
{
    StringBuilder sbOut = new StringBuilder(sIn.Length);
    foreach (char ch in sIn)
    {
        if (Char.IsControl(ch) || ch == '\'')
        {
            int ich = (int)ch;
            sbOut.Append(@"\u" + ich.ToString("x4"));
            continue;
        }
        else if (ch == '\"' || ch == '\\' || ch == '/')
        {
            sbOut.Append('\\');
        }
        sbOut.Append(ch);
    }
    return sbOut.ToString();
 }
} 
```

要将给定的 XML 字符串转换为 JSON，只需调用 XmlToJSON() 函数，如下所示。

```
string xml = "<menu id=\"file\" value=\"File\"> " +
              "<popup>" +
                "<menuitem value=\"New\" onclick=\"CreateNewDoc()\" />" +
                "<menuitem value=\"Open\" onclick=\"OpenDoc()\" />" +
                "<menuitem value=\"Close\" onclick=\"CloseDoc()\" />" +
              "</popup>" +
            "</menu>";

string json = JSON.XmlToJSON(xml);
// json = { "menu": {"id": "file", "popup": { "menuitem": [ {"onclick": "CreateNewDoc()", "value": "New" }, {"onclick": "OpenDoc()", "value": "Open" }, {"onclick": "CloseDoc()", "value": "Close" } ] }, "value": "File" }} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2011-03-03T15:29:21.637

试试这个功能。我只是写了它，并没有太多机会测试它，但我的初步测试很有希望。

```
public static XmlDocument JsonToXml(string json)
{
    XmlNode newNode = null;
    XmlNode appendToNode = null;
    XmlDocument returnXmlDoc = new XmlDocument();
    returnXmlDoc.LoadXml("<Document />");
    XmlNode rootNode = returnXmlDoc.SelectSingleNode("Document");
    appendToNode = rootNode;

    string[] arrElementData;
    string[] arrElements = json.Split('\r');
    foreach (string element in arrElements)
    {
        string processElement = element.Replace("\r", "").Replace("\n", "").Replace("\t", "").Trim();
        if ((processElement.IndexOf("}") > -1 || processElement.IndexOf("]") > -1) && appendToNode != rootNode)
        {
            appendToNode = appendToNode.ParentNode;
        }
        else if (processElement.IndexOf("[") > -1)
        {
            processElement = processElement.Replace(":", "").Replace("[", "").Replace("\"", "").Trim();
            newNode = returnXmlDoc.CreateElement(processElement);
            appendToNode.AppendChild(newNode);
            appendToNode = newNode;
        }
        else if (processElement.IndexOf("{") > -1 && processElement.IndexOf(":") > -1)
        {
            processElement = processElement.Replace(":", "").Replace("{", "").Replace("\"", "").Trim();
            newNode = returnXmlDoc.CreateElement(processElement);
            appendToNode.AppendChild(newNode);
            appendToNode = newNode;
        }
        else
        {
            if (processElement.IndexOf(":") > -1)
            {
                arrElementData = processElement.Replace(": \"", ":").Replace("\",", "").Replace("\"", "").Split(':');
                newNode = returnXmlDoc.CreateElement(arrElementData[0]);
                for (int i = 1; i < arrElementData.Length; i++)
                {
                    newNode.InnerText += arrElementData[i];
                }

                appendToNode.AppendChild(newNode);
            }
        }
    }

    return returnXmlDoc;
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-06-13T13:57:55.287

要转换`JSON`字符串`XML`试试这个：

```
 public string JsonToXML(string json)
    {
        XDocument xmlDoc = new XDocument(new XDeclaration("1.0", "utf-8", ""));
        XElement root = new XElement("Root");
        root.Name = "Result";

        var dataTable = JsonConvert.DeserializeObject<DataTable>(json);
        root.Add(
                 from row in dataTable.AsEnumerable()
                 select new XElement("Record",
                                     from column in dataTable.Columns.Cast<DataColumn>()
                                     select new XElement(column.ColumnName, row[column])
                                    )
               );

        xmlDoc.Add(root);
        return xmlDoc.ToString();
    } 
```

`XML`为了转换`JSON`试试这个：

```
 public string XmlToJson(string xml)
    {
       XmlDocument doc = new XmlDocument();
       doc.LoadXml(xml);

       string jsonText = JsonConvert.SerializeXmlNode(doc);
       return jsonText;
     } 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-06-06T07:50:34.470

这是一个简单的片段，它将 XmlNode（递归地）转换为哈希表，并将同一子节点的多个实例分组到一个数组中（作为一个 ArrayList）。大多数 JSON 库通常接受 Hashtable 以将其转换为 JSON。

```
protected object convert(XmlNode root){
    Hashtable obj = new Hashtable();
    for(int i=0,n=root.ChildNodes.Count;i<n;i++){
        object result = null;
        XmlNode current = root.ChildNodes.Item(i);

        if(current.NodeType != XmlNodeType.Text)
            result = convert(current);
        else{
            int resultInt;
            double resultFloat;
            bool resultBoolean;
            if(Int32.TryParse(current.Value, out resultInt)) return resultInt;
            if(Double.TryParse(current.Value, out resultFloat)) return resultFloat;
            if(Boolean.TryParse(current.Value, out resultBoolean)) return resultBoolean;
            return current.Value;
        }

        if(obj[current.Name] == null)
            obj[current.Name] = result;
        else if(obj[current.Name].GetType().Equals(typeof(ArrayList)))
            ((ArrayList)obj[current.Name]).Add(result);
        else{
            ArrayList collision = new ArrayList();
            collision.Add(obj[current.Name]);
            collision.Add(result);
            obj[current.Name] = collision;
        }
    }

    return obj;
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-05-01T14:42:01.527

[Cinchoo ETL](https://www.nuget.org/packages/ChoETL/) - 一个开源库，只需几行代码即可轻松将 Xml 转换为 JSON

XML -> JSON：

```
using (var p = new ChoXmlReader("sample.xml"))
{
    using (var w = new ChoJSONWriter("sample.json"))
    {
        w.Write(p);
    }
} 
```

JSON -> XML：

```
using (var p = new ChoJsonReader("sample.json"))
{
    using (var w = new ChoXmlWriter("sample.xml"))
    {
        w.Write(p);
    }
} 
```

小提琴示例：[https ://dotnetfiddle.net/enUJKu](https://dotnetfiddle.net/enUJKu)

查看[CodeProject](https://www.codeproject.com/search.aspx?q=Cinchoo%20ETL)文章以获得更多帮助。

免责声明：我是这个库的作者。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-08-30T09:39:54.583

我确实像大卫布朗所说的那样，但我得到了以下例外。

```
$exception {"There are multiple root elements. Line , position ."} System.Xml.XmlException 
```

一种解决方案是使用根元素修改 XML 文件，但这并不总是必要的，对于 XML 流，这也可能是不可能的。我的解决方案如下：

```
var path = Path.GetFullPath(Path.Combine(Environment.CurrentDirectory, @"..\..\App_Data"));
var directoryInfo = new DirectoryInfo(path);
var fileInfos = directoryInfo.GetFiles("*.xml");

foreach (var fileInfo in fileInfos)
{
    XmlDocument doc = new XmlDocument();
    XmlReaderSettings settings = new XmlReaderSettings();
    settings.ConformanceLevel = ConformanceLevel.Fragment;

    using (XmlReader reader = XmlReader.Create(fileInfo.FullName, settings))
    {
        while (reader.Read())
        {
            if (reader.NodeType == XmlNodeType.Element)
            {
                var node = doc.ReadNode(reader);
                string json = JsonConvert.SerializeXmlNode(node);
            }
        }
    }
} 
```

生成错误的示例 XML：

```
<parent>
    <child>
        Text
    </child>
</parent>
<parent>
    <child>
        <grandchild>
            Text
        </grandchild>
        <grandchild>
            Text
        </grandchild>
    </child>
    <child>
        Text
    </child>
</parent> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-09-05T13:12:27.297

我使用以下方法将 JSON 转换为 XML

```
List <Item> items;
public void LoadJsonAndReadToXML() {
  using(StreamReader r = new StreamReader(@ "E:\Json\overiddenhotelranks.json")) {
    string json = r.ReadToEnd();
    items = JsonConvert.DeserializeObject <List<Item>> (json);
    ReadToXML();
  }
} 
```

和

```
public void ReadToXML() {
  try {
    var xEle = new XElement("Items",
      from item in items select new XElement("Item",
        new XElement("mhid", item.mhid),
        new XElement("hotelName", item.hotelName),
        new XElement("destination", item.destination),
        new XElement("destinationID", item.destinationID),
        new XElement("rank", item.rank),
        new XElement("toDisplayOnFod", item.toDisplayOnFod),
        new XElement("comment", item.comment),
        new XElement("Destinationcode", item.Destinationcode),
        new XElement("LoadDate", item.LoadDate)
      ));

    xEle.Save("E:\\employees.xml");
    Console.WriteLine("Converted to XML");
  } catch (Exception ex) {
    Console.WriteLine(ex.Message);
  }
  Console.ReadLine();
} 
```

我使用了名为 Item 的类来表示元素

```
public class Item {
  public int mhid { get; set; }
  public string hotelName { get; set; }
  public string destination { get; set; }
  public int destinationID { get; set; }
  public int rank { get; set; }
  public int toDisplayOnFod { get; set; }
  public string comment { get; set; }
  public string Destinationcode { get; set; }
  public string LoadDate { get; set; }
} 
```

有用....

# c# - C# 中的本机菜单

> ID：814011
> 
> 赞同：0
> 
> 时间：2009-05-02T02:36:36.063
> 
> 标签：c#, .net, contextmenu

在 C# 中使用本机菜单的最佳方法是什么？

编辑：我想使用本机菜单，因为它比丑陋的 .NET 菜单更好看。有人可以准确地向我解释我如何使用它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-02T03:06:53.510

在[System.Windows.Forms](http://msdn.microsoft.com/en-us/library/system.windows.forms.aspx)命名空间中，您将找到以下类：`Menu`、`ContextMenu`、`MenuItem`、`MenuStrip`、`ContextMenuStrip`、`ToolBar`、`ToolStrip`等。

这些类只是本机实现这些控件的 Win32 API 调用的包装器。System.Windows.Forms 命名空间中的*几乎每个*类都是如此；当您使用这些类时，您实际上是在使用本机控件。

因此，在 .NET 中使用本机菜单的最佳方法是使用 .NET 提供的控件来显示菜单，如上所述。您使用哪个取决于您要完成的任务。将主菜单附加到表单的最简单选项是使用`Menu`对象，填充有`MenuItem`集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T02:53:35.350

如果您指的是系统菜单（右键单击窗口标题栏时弹出的上下文菜单），[这里有一篇关于 CodeGuru 的精彩文章，](http://www.codeguru.com/csharp/csharp/cs_misc/userinterface/article.php/c9327)用于在 C# 中操作它。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2009-05-02T03:42:13.253

你无法通过一堆 API 黑客来获得它。此外，您可以更轻松地获得更好的菜单。

# flash - 开始 Flash 开发

> ID：814013
> 
> 赞同：1
> 
> 时间：2009-05-02T02:39:08.410
> 
> 标签：flash

我想制作一个基于 Flash 的网站。

我喜欢这样的东西：http: [//bfish.free.fr/](http://bfish.free.fr/)

这很难吗？我做了一点Flash工作，但我可以学习。

我怎样才能实现我的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T02:45:39.380

kongregate 有一些很好的教程，主要是面向游戏的，但你可以从中学习一些基础知识。

[孔雷盖特](http://www.kongregate.com/labs)

# iphone - 如何创建一个框架并用分段控件填充它？

> ID：814015
> 
> 赞同：-3
> 
> 时间：2009-05-02T02:39:53.183
> 
> 标签：iphone, objective-c, cocoa, cocoa-touch

我想创建一个框架并用分段控件填充它。我该怎么做？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T02:58:44.573

如果通过使用分段控件填充框架，您的意思是要添加分段控件作为具有特定框架的另一个视图的子视图，您可以这样做：

```
CGRect frame = CGRectMake(X_ORIGIN,Y_ORIGIN,WIDTH,HEIGHT);
UISegmentedControl * seg = [[UISegmentedControl alloc] initWithFrame:frame];
[viewYouWantToAddTheControlTo addSubview:seg];
[seg release]; 
```

这有帮助吗？

# wcf - 如何在 WCF 中创建修剪服务

> ID：814026
> 
> 赞同：1
> 
> 时间：2009-05-02T02:57:58.320
> 
> 标签：wcf

我有一个包含很多方法和 DataContracts 的 WCF 服务。它通常由大型应用程序“A”使用。我想创建一个小型应用程序“B”，它将使用相同的服务器，但服务中只有几个方法。我想减小 XAP 的大小，并且由于客户端使用的是服务公开的所有方法的一小部分，因此我希望拥有一个比 Visual Studio 自动创建的服务参考文件更小的服务参考文件。我可以删除不手动使用的方法，但我不能真正使用更新服务命令。

有什么解决办法吗？

非常感谢，卡罗尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T19:18:54.983

好的，所以你有一个完整的 IGreatService 接口，其中包含许多方法，这些方法是在 MyGreatService 类上实现的。

怎么样：您创建一个新的第二个接口 IMyServiceB，它只有您想要向第二组用户公开的少数方法。你这样做是为了让你的服​​务同时实现 IGreatService 和 IMyServiceB （这绝对有可能，没问题）：

```
public class MyGreatService : IGreatService, IMyServiceB
{
 .. 
} 
```

然后服务 B 基本上只调用服务实现中您想要公开的那几个方法 - 假设您在 IGreatService 上有 MethodA，您也想在 IMyServiceB 上公开（作为 MethodB） - 像这样实现它：

```
public class MyGreatService : IGreatService, IMyServiceB
{
   ....
   // as defined on IGreatService
   public void MethodA (....)  
   {
   }

   ....
   public void MethodB (.....)   // as defined on IMyServiceB
   {
        MethodA();
   } 
} 
```

这样，您将获得两个独立的接口（= 服务），但基本上您只编写一次代码。

然后，您可以在不同且单独的端点上公开 IMyServiceB，以便应该只看到 IMyServiceB 的用户可以连接到该单独的端点，并且他们只会获得使用您的服务 B 操作所需的任何内容。

那能行吗？

马克

# sql-server - TSQL - 如何在插入之前根据不同列中的值检查值？

> ID：814029
> 
> 赞同：2
> 
> 时间：2009-05-02T02:58:45.760
> 
> 标签：sql-server, database, check-constraints

有没有办法实现一个 CHECK 约束来检查同一个表中不同列中的另一个值的值？具体来说，我想在插入行之前确保要插入的“结帐”日期值大于表中的“签入”日期值。

我可能遗漏了一些细节，所以如果是这种情况，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-02T03:07:31.137

是的，MSSQL Server（和其他）允许[对表进行 CHECK CONSTRAINTS](http://msdn.microsoft.com/en-us/library/ms188258.aspx) - 这样您就可以比较列：

```
ALTER TABLE tbl ADD CONSTRAINT chkCheckout_GT_Checkin
    CHECK (Ckeckout > Checkin) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-02T03:18:31.810

您可以使用以下支票：

```
ALTER TABLE dbo.myTable ADD CONSTRAINT CK_myTable_CheckoutGreaterThanCheckin
CHECK (dbo.CheckDates()>1) 
```

然后添加一个函数，如：

```
CREATE FUNCTION CheckDates()
RETURNS int
AS 
BEGIN
    DECLARE @retval int
    SET @retval = (SELECT COUNT(*) FROM myTable WHERE checkout > checkin)
    RETURN @retval
END; 
```

这些可能无法按书面方式工作（抱歉，目前无法访问 SQL 引擎。）

或者您可能希望在查询中包含检查，以便在检查失败时不必在代码中使用错误处理。

如果您只是希望插入失败，您可以将 where 子句扩展为：

```
INSERT INTO myTable (checkout) 
VALUES(@checkout) 
WHERE @checkout > @checkin AND IDcolumn = @IDcolumn 
```

如果你想返回某种类型的指标，你可以使用类似上面的东西，但添加 SELECT @@ROWCOUNT 或者你可以使用提前检查值：

```
DECLARE @var int
SET @var = (SELECT count(*)
FROM myTable
WHERE @checkout > checkin AND IDcolumn = @IDcolumn) 
```

如果值通过，@var 将等于 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T04:03:57.630

您可以尝试使用触发器。

# python - 如何修复 Mac OS X 10.5 Leopard 上默认 Python 包中损坏的 BSDDB 安装？

> ID：814041
> 
> 赞同：4
> 
> 时间：2009-05-02T03:08:07.937
> 
> 标签：python, macos, osx-leopard, berkeley-db, bsddb

在带有开发人员工具的 Mac OS X 10.5 (Leopard) 上的默认 Python 安装上执行以下操作：

```
noel ~ : python

Python 2.5.1 (r251:54863, Jan 13 2009, 10:26:13) 
[GCC 4.0.1 (Apple Inc. build 5465)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import bsddb
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/bsddb/__init__.py", line 51, in <module>
import _bsddb
ImportError: No module named _bsddb 
```

不错吧？如何在不放弃和安装/配置/维护我自己的 Python 包的情况下按照[TMNC 的建议](http://blogs.23.nu/c0re/2007/12/antville-16716/)或使用 MacPorts 等来解决这个问题？

### 编辑

我通过 MacPorts 安装 Python2.4 和 BSDDB 解决了这个问题。

我的问题仍然存在：为什么默认安装被破坏了，是否可以修复它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-02T03:59:58.420

按照[http://marc-abramowitz.com/archives/2007/11/28/hacking-os-xs-python-dbhash-and-bsddb-modules-to-work/](http://marc-abramowitz.com/archives/2007/11/28/hacking-os-xs-python-dbhash-and-bsddb-modules-to-work/)上的说明进行操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-23T04:28:28.960

该补丁对我不起作用，我不得不替换 /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7 中的 bsddb 文件夹

使用 bsddb3：

/usr/local/lib/python2.7/site-packages/bsddb3

确保备份 bsddb 文件夹以防万一。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-17T11:10:12.693

这种痛苦在 OSX 10.8 上仍然存在。我无法使用 macports py-bsddb3 将 bsddb3 安装到 virtualenv 中。非常简单并且有效的是：

*   从 macports 安装 db53
*   下载并解压 bsddb3 源代码 ( [https://pypi.python.org/pypi/bsddb3/6.1.0](https://pypi.python.org/pypi/bsddb3/6.1.0) )
*   sudo python setup.py –berkeley-db-incdir=/opt/local/include/db53 –berkeley-db-libdir=/opt/local/lib/db53 install

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-04-16T15:18:45.547

我发现的一个解决方案是安装 ActivePython，挖掘它的库（位于 /Library/Frameworks/Python.framework/Versions/....您的版本在这里..../lib）并复制并粘贴**_bsddb.so**文件进入我的 OS X 10.6 本机 python 2.6 安装目录（/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/）。

这解决了丢失的 _bsddb 问题，使我在本机 python 安装中使用了 bsddb 的工作版本。然后，我刚刚卸载了 ActivePython（[此处的说明](http://docs.activestate.com/activepython/2.6/installnotes.html#osxpkg_uninstall)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-12T19:28:54.530

我遇到的错误是“没有名为 _bsddb 的模块”。事实证明我不需要升级我的 bsddb。我正在使用在 Windows 中创建的 .pkl 文件。在重命名 pkl 文件后，Mac OSX Python 重新创建了一个新的 .pkl.db 文件，现在它可以完美运行了。

# regex - 帮助精炼正则表达式 ("\b\d{6}([ ]{1,15})\d{7}\b")

> ID：814042
> 
> 赞同：0
> 
> 时间：2009-05-02T03:08:46.250
> 
> 标签：regex

在过去，我的理解是机场的纬度/经度必须在同一条线上（L 300216 0915302 '2425 29865997），300216/0915302 是纬度/经度。我刚刚发现用户还可以将纬度/经度放在不同的行上。

```
I  ARA                                    '* ACADIANA  AIRPORT         29865996    
                L    300216                               '2425     29865997    
                     0915302                              '2425     29865998    
                S    MSY                                            29865999    
                M    05E                                            29866000    
                P    100  0300                                      29866001    
                P    239  3405                                      29866002    
                P    999  7001  O                                   29866003 
```

如何修改我的 RegEx 以捕获任何 6 位数字，然后是 7 位数字，前面有一个 L，中间没有字母？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T03:25:42.170

至于搭配

> 任何 6 位数字，后跟 7 位数字，前面有一个 L，中间没有字母

您可以使用以下模式：

```
\bL\s*\d{6}\s*\d{7}\b 
```

这将匹配

> L(任意数量的空白)dddddd(任意数量的空白)dddddd

被边界包围。当涉及到多行匹配时，这通常是您可以使用您正在使用的正则表达式引擎设置的标志。\s 将很好地匹配换行符，但前提是您设置了多行标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T04:18:16.457

我在右手栏中看到八个数字，而不是七个。我看错了吗？所以我认为这个问题并不完全是以前的答案似乎正在回答的问题。七个数字实际上在下一行。

此外，这对我来说看起来像是固定长度的列输出，因此如果您知道列数，则可以通过使用精确数字而不是 * 修饰符来获得显着的速度。

因此，如果“x”是 L 和 6 位数字之间的列数，并且“L”在第一列，

$text =~ m/L\s{x}(\d{6}).*[\r\n]\s\s{x}(\d{7})/

看起来好像应该匹配。不确定文件中可能还有什么要处理的，但它是开始的地方。

$1 = 第一个数字块 (6)，$2 = 下一行的 7 个数字。（使用 perl 语法，根据其他实现的需要进行调整）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T03:18:39.737

试试下面的。根据您的总结，我让它匹配任何 6 位数字组，后跟任意长度的空格，包括换行符，然后是 L 和 7 位数字

```
\d{6}[\s\n]*L\s*\d{7} 
```

我使用了 .Net 形式的正则表达式。如果您使用不同的引擎，您可以发布哪个引擎？这也仅适用于 ASCII 字符集。

# java - HashTable Java...你能检查我的代码吗

> ID：814043
> 
> 赞同：1
> 
> 时间：2009-05-02T03:11:22.920
> 
> 标签：java, hashtable

我正在为java中的哈希表编写一个类...请确保我到目前为止做得正确。

我需要在其中存储 StudentRecord 对象....我正在根据 long 类型的学生 ID 计算哈希值...

```
package proj3;

import java.util.LinkedList;

public class HashTable {

    LinkedList<StudentRecord> [] buckets;
    int size;

    public HashTable(){
            size = 10;
            initialize();       
    }

    public HashTable(int initialSize){
        size = initialSize;
        initialize();
    }

    private void initialize(){
        for(int i=0; i<size; i++){
            buckets[i] = new LinkedList<StudentRecord>();
        }
    }
    /** for testing only
    private int calculateHashString(String s){
        int hash = 0;
        for(int i=0; i<s.length(); i++){
            hash += s.charAt(i);
        }
        return hash % size;
    }
    **/

    private int calculateHash(long l){
        return (int) (l % size);
    }

    public boolean contains(StudentRecord sr){
        int hash = calculateHash(sr.studentID);
        LinkedList<StudentRecord> l = buckets[hash];
        if(l.contains(sr)){
            return true;
        }
        return false;
    }

    public void put(StudentRecord sr){
        int hash = calculateHash(sr.studentID);
        LinkedList<StudentRecord> l = buckets[hash];
        if(!l.contains(sr)){
            buckets[hash].add(sr);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-02T03:26:34.210

我认为您可能想要编写单元测试来验证其实际功能，而与您的 f(r)iendly SO 专家是否健全检查无关。

除了简单的测试用例之外，一件好事是将实现的功能与标准 JDK HashMap 进行比较；生成随机键和/或值，插入、删除并检查两个实现之间的状态是否相同（在它们应该相同的程度上）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-02T09:28:08.227

`buckets`似乎永远不会被初始化。当你尝试这样做时，编译器应该给你一个警告。坚持集合优先于数组（原语除外）。

通过调用另一个构造函数 ( ) 可以更简单地实现您的无参数构造函数`this(10`。

出于多个原因，`(int) (l % size)`即使带有正数，表达式也可能返回负数。`size`

编码

```
public boolean contains(StudentRecord sr){
    ...
    if(l.contains(sr)){
            return true;
    }
    return false;
} 
```

可以更清楚地写成

```
public boolean contains(Student student) {
    ...
    return list.contains(student);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-02T03:23:25.497

看起来不错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-02T09:30:35.363

汤姆是对的，您需要将存储桶初始化为新的 LinkedList [大小]。

我认为您希望将大小设为最终值，并从更大的值开始，例如 256。如果您在将项目添加到表后调整大小，则需要将它们全部移动到新的存储桶中（来自更改后的哈希算法） .

另一方面，10 有利于测试 - 同一个桶上有很多碰撞！

为了节省内存，您不必在开始时初始化所有这些新的 LinkedList()，您可以将它们保留为空。您可以等待创建每个列表对象，直到新项目实际命中空存储桶。当然，这将意味着需要额外的代码，以检查您尝试读取的存储桶是否为空，如果是，则假设它是一个空列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-22T16:25:31.113

您也必须重写 equals 和 hashCode 方法。

# sql - 运行总计列的复杂 SQL 查询

> ID：814054
> 
> 赞同：3
> 
> 时间：2009-05-02T03:23:41.580
> 
> 标签：sql, sql-server

我正在尝试在 SQL Server 2008 中解决一个相当复杂的查询。我想在这里获得 SQL 专家的一些意见。

想象一下，我有一个包含以下字段的 Payments 表：

PaymentID int、CustomerID int、PaymentDate 日期时间、金额小数

所以本质上，它是一个客户在特定日期支付的表格。需要注意的重要一点是，在某些情况下，付款金额可能为负值。因此，随着时间的推移，任何给定客户支付的总金额可能会上升或下降。

我们试图弄清楚的是 SQL 来计算每个客户支付的总金额的最高点。

因此，如果 Fred 进行了 3 次付款：第一次支付 5 美元，第二次支付 5 美元，第三次支付 -3 美元。该报告将显示 Fred 的最高总支付金额为 10 美元（在他的第二次支付时），而他的最终支付金额为 7 美元。

我们需要为十万客户（每个客户可能进行一百到一千笔付款）运行此报告，所以它必须很快。

有没有一种很好的方法来构造这个查询而不将运行总计存储在数据库中？如果可能，我们希望避免存储预先计算的值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-02T03:43:31.503

你的问题似乎是这样的：

```
SELECT CustomerID, SUM(Ammount) FROM table WHERE Amount > 0 GROUP BY CustomerID
SELECT CustomerID, SUM(Ammount) FROM table GROUP BY CustomerID 
```

但是，我认为您的意思是您想要一个看起来像这样的表格

```
Customer  Payment  HighPoint  RunningTotal
123       5        5          5
123       5        10         10
123       -3       10         7 
```

在这种情况下，我将使用上面的两个选择创建一个视图，以便该视图类似于。

```
SELECT CusotmerID, 
  PaymentDate, 
  Ammount, 
  (SELECT SUM(Ammount) 
    FROM table as ALIAS 
    WHERE ALIAS.Amount > 0 
      AND ALIAS.PaymentDate <= PaymentDate 
      AND ALIAS.CustomerID = CustomerID), 
  (SELECT SUM(Ammount) 
    FROM table as ALIAS 
    WHERE ALIAS.CustomerID = CustomerID 
    AND ALIAS.PaymentDate <= PaymentDate)
FROM table 
```

此外，您可以考虑在表的 Amount 列上使用非唯一索引来加快查看速度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-02T12:45:42.667

作为子查询的替代方法，您可以使用运行总计查询。这是我为这种情况设置的方法。首先创建一些测试数据：

```
create table #payments (
    paymentid int identity,
    customerid int,
    paymentdate datetime,
    amount decimal
)

insert into #payments (customerid,paymentdate,amount) values (1,'2009-01-01',1.00)
insert into #payments (customerid,paymentdate,amount) values (1,'2009-01-02',2.00)
insert into #payments (customerid,paymentdate,amount) values (1,'2009-01-03',-1.00)
insert into #payments (customerid,paymentdate,amount) values (1,'2009-01-04',2.00)
insert into #payments (customerid,paymentdate,amount) values (1,'2009-01-05',-3.00)
insert into #payments (customerid,paymentdate,amount) values (2,'2009-01-01',10.00)
insert into #payments (customerid,paymentdate,amount) values (2,'2009-01-02',-5.00)
insert into #payments (customerid,paymentdate,amount) values (2,'2009-01-03',7.00) 
```

现在您可以执行运行总计查询，该查询会在每次付款后计算每个客户的余额：

```
select cur.customerid, cur.paymentdate, sum(prev.amount)
from #payments cur
inner join #payments prev
    on cur.customerid = prev.customerid
    and cur.paymentdate >= prev.paymentdate
group by cur.customerid, cur.paymentdate 
```

这会生成数据：

```
Customer  Paymentdate        Balance after payment
1         2009.01.01         1
1         2009.01.02         3
1         2009.01.03         2
1         2009.01.04         4
1         2009.01.05         1
2         2009.01.01         10
2         2009.01.02         5
2         2009.01.03         12 
```

要查看最大值，您可以对运行的总计查询进行分组：

```
select customerid, max(balance)
from (
    select cur.customerid, cur.paymentdate, balance = sum(prev.amount)
    from #payments cur
    inner join #payments prev
        on cur.customerid = prev.customerid
        and cur.paymentdate >= prev.paymentdate
    group by cur.customerid, cur.paymentdate
) runningtotal
group by customerid 
```

这使：

```
Customer   Max balance
1          4
2          12 
```

希望这是有用的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-02T03:36:18.307

该操作与每个客户的付款次数呈线性关系。因此，您将不得不检查每笔付款，保持运行总额和高水位线，并且在所有付款结束时，您将得到答案。无论您是在 CLR 存储过程中执行此操作（我立即想到了），还是使用游标或临时表或其他任何方式，它都可能不会很快。

如果您必须一遍又一遍地运行此报告，您应该认真考虑保留一个高水位标记字段并在收到付款时更新（或不更新）。这样，您的报告将是微不足道的——但这就是数据集市是为了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-02T03:40:36.830

```
list = list of amounts ordered by date
foreach in list as amount
  running += amount
  if running >= high
    high = running 
```

为了保持快速，您将需要在触发器上随金额递增的运行总计，以及每个客户的高值（也可以通过触发器更新以使重新查询更加简单）。

我认为没有代码你不能做这种事情（存储过程就是代码）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-02T04:21:58.790

就像安多马尔的回答一样。您可以计算每次付款的运行总计。然后找到最大峰值支付...

```
with
rt as (
  select
    Payments.*,
    isnull(sum(p.Amount), 0) + Payments.Amount as running
  from
    Payments
    left outer join Payments p on Payments.CustomerID = p.CustomerID
      and p.PaymentDate <= Payments.PaymentDate
      and p.PaymentID < Payments.PaymentID
),
highest as
(
  select
    CustomerID, PaymentID, running as peak_paid
  from
    rt
  where
    PaymentID = (select top 1 rt2.PaymentID 
        from rt rt2 
        where rt2.CustomerID = rt.CustomerID
        order by rt2.running desc, rt2.PaymentDate, rt2.PaymentID)
)

select
  *,
  (select sum(amount) from Payments where Payments.CustomerID = highest.CustomerID) as total_paid  
from
  highest; 
```

但是，由于您有大约 100 万笔付款，这可能会很慢。就像其他人所说的那样，您可能希望将 CustomerID、PaymentID 和 peak_paid 存储在单独的表中。该表可以在每次付款插入时更新，也可以作为 sqljob 更新。

更新了查询以使用联接而不是子查询。由于 PaymentDate 没有时间，我通过 PaymentId 过滤掉了同一天的多笔付款。

# google-app-engine - 如何在 Google App Engine 上设置我的域名？

> ID：814060
> 
> 赞同：12
> 
> 时间：2009-05-02T03:25:43.043
> 
> 标签：google-app-engine, dns, deploying

我已经制作了一个网站以在 App Engine 上运行，并已部署它。我已将我的域名重定向到 ghs.google.com，它成功地转到了我的网站。

问题是在地址栏中，“www.mysite.com”变成了“myappid.appspot.com”，我不知道如何让它留在“www.mysite.com”。

这似乎是一件很简单的事情，但它开始让我发疯了！

我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-02T03:30:47.897

看看[这个快速指南](http://aralbalkan.com/1466)，本质上是：

> 为 www.yourdomain.com 添加一个 CNAME 并将其指向 ghs.googlehosted.com。
> 
> 通过appspot.com 登录您的应用程序。
> 
> 单击管理 → 应用程序设置链接。
> 
> 单击域设置部分下的添加域...按钮
> 
> 在域名框中添加 www.yourdomain.com，然后单击添加域...按钮

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T01:22:05.297

关于裸域问题。请查看：[http](http://code.google.com/appengine/kb/general.html#naked_domain) ://code.google.com/appengine/kb/general.html#naked_domain并点击此处提供的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T13:03:07.727

您获得所描述行为的唯一原因是您的应用程序是否发出从 www.mysite.com 到 mysite.appspot.com 的 301 或 302 重定向。App Engine 不会自行执行此操作。如果您粘贴相关的处理程序代码，也许我们可以发现问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-06T04:19:14.830

我发现我的域名提供商允许我将 URL 重定向从[http://mysite.com](http://mysite.com)到另一个 url，但不幸的是它没有让我将[http://mysite.com](http://mysite.com)重定向到[http://www.mysite .com](http://www.mysite.com) _

不过，我发现它会让我重定向到[http://www.mysite.com/home](http://www.mysite.com/home)，所以我已经这样做了。从 www.mysite.com/home，我可以重定向到 www.mysite.com，但我没那么挑剔 :)

我认为在我最初的问题中，我的浏览器可能一直在缓存东西，所以当我玩的时候它没有正确响应。第二次重置我的历史记录或 ctrl+F5 有所帮助。

第一个答案在谷歌应用程序方面提供了很好的说明，但提供的链接真的让我对在 dyndns.com 上设置东西的说明感到厌烦（这对我来说真的很奇怪）。我只需要触摸谷歌应用程序和我的域名提供商。

Google has some doc as well which I found [http://www.google.com/support/a/bin/answer.py?hl=en&answer=61057](http://www.google.com/support/a/bin/answer.py?hl=en&answer=61057)

Thanks for everyone's help :)

# c# - 正确格式化 C# 字符串的 JSON

> ID：814062
> 
> 赞同：0
> 
> 时间：2009-05-02T03:27:23.723
> 
> 标签：c#, json, unicode

如果你在 MVC 中这样做：

```
var jsonData = 
    new { myimage = 
        "<img alt=\"\" src=\"/Content/images/ShowFPots.png\" />" };

return Json(jsonData); 
```

你把它作为一个值

```
"\u003cimg alt=\"\" src=\"/Content/images/ShowFPots.png\" /\u003e" 
```

我如何将其作为一个值，或者当我将它们添加到 innerHtml 时 <> 是否会正确解释？

```
"<img alt=\"\" src=\"/Content/images/ShowFPots.png\" />" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-02T04:00:07.860

那是正确的javascript，unicode编码。将其插入 html/DOM 会很好

[https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Unicode](https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Unicode)

# c# - 重命名 TriabgleIndices 属性和错误消息

> ID：814074
> 
> 赞同：0
> 
> 时间：2009-05-02T03:36:29.490
> 
> 标签：c#, ide, visual-studio-express

我正在使用 C# Express Edition - 2008 开发工具。我打算通过使用 100.000 个项目的数组来形成一个 3D 网格对象。为了能够形成 3D 网格，我必须使用数千个“mesh.TriangleIndices.Add(...);” . 但是由于不必要的代码量，这不是一个好的应用程序。我必须使用缩短的编码，例如“mesh.Tai.Add(...);”。

执行 Refactoring>Rename 后，系统提示如下错误信息：“ **Rename failed. The definition is not in C# project in the current solution** ”

如何解决这个问题呢 ？请帮忙 ！:-)

亲切的问候 Oner YILMAZ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-02T04:58:54.520

`TriangleIndices``MeshGeometry3D`是被引用程序集中的类的属性的名称。您不能重命名它。

如果您必须使用代码创建网格（最好使用建模工具将网格创建为文件），请考虑使用辅助方法来缩短内容：

```
private void AddTI(MeshGeometry3D mesh, int index)
{
    mesh.TriangleIndices.Add(index);
} 
```

不过，请认真考虑为什么要这样做。建模工具可以轻松创建标准格式的网格，并且您只需要几行代码即可加载网格文件。

# scons - 如何让 SCons 更新已更改目录中的已安装文件？

> ID：814075
> 
> 赞同：0
> 
> 时间：2009-05-02T03:38:50.950
> 
> 标签：scons

我正在做：

```
data = env.InstallAs('$PREFIX/share/odysi', 'data')
env.Alias('install', data) 
```

第一次效果很好。但是，如果我更改了“数据”文件夹中的某些内容并`scons -Q install`再次执行此操作，它会显示“安装”是最新的。即使文件已更改并且需要重新安装。

目录（和子目录）中有很多文件，所以如果我可以避免明确列出它们，那将是最好的。尖端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T08:17:34.777

这应该可以解决问题：

```
files = Glob('data/*.*')
data = env.Install('$PREFIX/share/odysi', files)
env.Alias('install', data) 
```

它至少需要 SCons 1.0.1 来支持 Glob。

# python - PY2EXE：如何输出“*_D.PYD”文件（调试）并使用MSVCR80D.DLL？

> ID：814078
> 
> 赞同：0
> 
> 时间：2009-05-02T03:40:31.447
> 
> 标签：python, windows, py2exe

我的应用程序的调试配置是针对：

```
 PYTHON25_D.DLL
  MSVCR80D.DLL 
```

我们在应用程序中使用 Python .PYD 文件。其中一些 .PYD 是由 PY2EXE 转换为 .PYD 的 .PY。

当我在 MYSCRIPT.PY 上运行 PY2EXE 时，我得到以下 .PYD 和依赖项：

```
MYSCRIPT.PYD
  PYTHON25.DLL
  MSVCR71.DLL
  KERNEL32.DLL 
```

我*想要*的是调试版本，它基于我的应用程序使用的同一个 C 运行时库 (MSVCR80D.DLL) 构建。

如何将 MYSCRIPT.PY 转换为：

```
MYSCRIPT_D.PYD                 <-- debug version of .PYD end with "_D"
  PYTHON25_D.DLL               <-- debug version of Python
  MSVCR80D.DLL                 <-- ver 8.0, Debug
  KERNEL32.DLL 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-02T05:12:00.713

它不起作用，因为 MSVCR80D 是并行运行时

您将需要告诉用户直接安装 MS 运行时或手动复制清单文件。也没有为您选择 MSVCR71.DLL。它适用于 Python，因此您可能仍需要保留它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T09:09:38.847

请注意，MS 调试 dll 是不可分发的 - 您不能让它们闲置。但是，如果您运行 Python 的调试版本和 py2exe 的调试编译版本，py2exe 将正确收集所有 dll 的调试版本。

# java - 在 LinkedList 中查找元素

> ID：814082
> 
> 赞同：1
> 
> 时间：2009-05-02T03:42:53.173
> 
> 标签：java, search, linked-list

如果我有一个 Employee 对象的 LinkedList...

每个员工都有一个姓名和一个 ID 字段。

我有linkedList调用列表....

如果我想查看列表中是否包含员工，我会这样做：

```
list.contains(someEmployeeObject) 
```

如果我想查看列表是否包含基于员工 ID 的员工，怎么样？

假设我有以下方法：

```
public boolean containsEmployeeByID(int id) 
```

我如何知道列表是否包含带有参数 id 的员工对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-02T03:49:40.177

只需遍历列表并查找匹配项。如果您经常这样做并且不经常更改列表，请先构建 Map 索引。

```
List<Employee> list = ...
for (Employee e : list)
   if (e.getID() == id)
      return true;
return false; 
```

也就是说，将员工保存在 LinkedList 中？多么奇怪的示例问题...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T03:54:13.020

也许您应该使用键是 ID 和值是员工姓名或员工对象的映射？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-02T03:54:34.143

您可以覆盖您的 equals() 方法以根据 Id 进行比较，但这通常不是最佳实践。

另一种选择是创建一个 HashMap，然后您可以通过他们的 ID 检索您的员工。

```
for (Employee empl : list) {
    map.put(empl.getId(), empl);
}

String idLookup = "1234";

Employee employee = map.get(idLookup); 
```

# c# - 在 .Net framework 2.0 中使用 .Net framework 3.5 功能

> ID：814085
> 
> 赞同：1
> 
> 时间：2009-05-02T03:44:06.243
> 
> 标签：c#, .net

是否可以转换 .Net framework 3.5 的一些 dll 并在 .Net framework 2.0 中使用？

我真的需要 .Net 2.0 中的托管命名管道命名空间:-(

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-02T08:15:37.620

您可以通过一些技巧使用 .NET 2.0 中的 C# 3.0 编译器功能 - 但您将无法使用 2.0 中不存在的框架 dll/类型/方法。我**不**建议在没有客户端安装 .NET 3.5 的情况下尝试简单地部署任何 3.5 dll。我的期望是你必须在机器上安装 .NET 3.5，或者在没有你想要的框架特性的情况下勉强凑合。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-01-12T20:31:04.803

是的你可以。我已经做到了。我在带有 .NET 2.0 的 Windows 2000 服务器上使用 System.Core、System.Xml.Linq、System.Data.Linq 和其他 3.5 的东西

无需“转换”任何东西，3.5 程序集（绿色位）针对的是 2.0 版本的 CLR。您需要做的是为 .NET 2.0（我认为是 SP2）安装最新的服务包，这将更新 red bits 程序集。

[http://www.danielmoth.com/Blog/2007/06/net-framework-35.html](http://www.danielmoth.com/Blog/2007/06/net-framework-35.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-02T03:57:24.683

您可以使用[LINQBridge](http://www.albahari.com/nutshell/linqbridge.aspx)在 .NET Framework 2.0 中使用 .NET Framework 3.5 的一些功能，但不能使用您提到的 AFAIK 特定命名空间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-02T04:04:19.470

这取决于 dll 使用的 .net 3.5 的哪些功能。大部分代码与2.0版本相同。大多数可以实现的[Linq是2.0。](http://weblogs.asp.net/fmarguerie/archive/2007/09/05/linq-support-on-net-2-0.aspx)但是……有些东西在 2.0 中是行不通的……你必须试试看。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-02T10:59:02.080

简单的回答：不。:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-01-12T20:35:46.810

这是一篇很好的博客文章（以及后面的一两篇文章）详细介绍了您可以在 .NET 2.0 中使用哪些内容而无需更改，哪些内容不能，以及通过一两个解决方法可以实现哪些内容：

[从 .NET 2.0 使用 C# 3.0](http://www.danielmoth.com/Blog/2007/05/using-c-30-from-net-20.html)

# javascript - 如何知道用户的滚动是向上还是向下？

> ID：814086
> 
> 赞同：11
> 
> 时间：2009-05-02T03:45:41.917
> 
> 标签：javascript, jquery

我想确定用户的滚动。我正在使用 jQuery.. 并且 jquery 有 .scroll 事件.. 但是 .scroll 事件无法确定用户是向下还是向上滚动页面。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-05-02T03:50:28.710

您可以从这样的变量开始：

```
var position = $(window).scrollTop(); // should start at 0 
```

然后有一些东西可以监控 scrollTop 是向上还是向下：

```
$(window).scroll(function() {
  var scroll = $(window).scrollTop();
  if (scroll > position) {
    console.log("scrolling downwards");
  } else {
    console.log("scrolling upwards");
  }
  position = scroll;
}); 
```

```
var position = $(window).scrollTop();

$(window).scroll(function() {
  var scroll = $(window).scrollTop();
  if (scroll > position) {
    console.log("scrolling downwards");
  } else {
    console.log("scrolling upwards");
  }
  position = scroll;
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<p style="font-size: 40px;">

  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent vitae erat et lacus facilisis hendrerit ac nec lectus. Aenean hendrerit maximus tempus. Phasellus feugiat odio vitae ligula eleifend condimentum. Vestibulum id faucibus magna, sit amet
  consequat nunc. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Vestibulum pellentesque, magna ut ultricies lacinia, nisi dui condimentum ante, vitae euismod arcu eros vitae nulla. Donec finibus erat sed libero
  commodo tincidunt. Curabitur pulvinar, nisl vitae tempus commodo, felis nisi pretium arcu, sed gravida risus sapien eu ipsum. In metus magna, consequat eleifend sem a, condimentum imperdiet augue. Fusce blandit dui eu erat lacinia, vitae laoreet orci
  porttitor. Nulla tortor nibh, porttitor at augue quis, elementum hendrerit velit. Fusce at risus in massa pellentesque dapibus id ut velit. In tempor magna vitae diam posuere pharetra. Aliquam sed semper sem. Nam dapibus pretium tempus. Interdum et
  malesuada fames ac ante ipsum primis in faucibus. Interdum et malesuada fames ac ante ipsum primis in faucibus. Cras ex odio, auctor eget mauris eget, dignissim rutrum mauris. Nulla porttitor leo nec enim gravida scelerisque. Nam consectetur malesuada
  enim eu tincidunt. Morbi posuere imperdiet nisl. Aenean non tortor porttitor, aliquam lectus a, scelerisque risus. Donec eu felis non justo sollicitudin venenatis eget eu mauris. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam fringilla
  mi ut purus ornare, et interdum est accumsan. Donec dapibus enim non sem dictum pretium. Pellentesque quis velit sem. Duis rutrum vulputate sem eget fringilla. Pellentesque vel enim nulla. Aliquam erat volutpat. Maecenas lacinia condimentum semper.
  Quisque gravida orci ut mauris rhoncus interdum. Pellentesque id augue vitae leo accumsan vehicula. Fusce sed justo id metus ornare ultrices. Vestibulum gravida lacus vitae finibus viverra. Maecenas dapibus quam et pulvinar tempus. Maecenas at molestie
  justo. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Vivamus non elementum dui, a rutrum ligula. Ut ut odio feugiat, suscipit arcu eget, feugiat leo. Nunc elit erat, ultricies vel volutpat vitae, dignissim
  vel nunc. Sed pharetra lacus sem, quis dignissim metus ullamcorper a. Vivamus ac augue libero. Donec consectetur sem non ipsum faucibus cursus. Morbi facilisis efficitur urna sit amet vehicula. Proin nec finibus magna. Cras suscipit nec eros sit amet
  vestibulum. Integer aliquam a mauris non interdum. Fusce eu mattis enim. Vestibulum congue ullamcorper velit ut tempus. Curabitur et pretium massa, ac condimentum massa.
</p>
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-10-24T02:43:09.147

这是一个使用纯 javascript 的示例：

```
var previousPosition = window.pageYOffset || document.documentElement.scrollTop;

window.onscroll = function() {
  var currentPosition = window.pageYOffset || document.documentElement.scrollTop;

  if (previousPosition > currentPosition) {
    console.log('scrolling up');
  } else {
    console.log('scrolling down');
  }

  previousPosition = currentPosition;
};
```

```
<h1>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Assumenda perferendis consequuntur sunt possimus rem iusto necessitatibus dignissimos odio nam vel quia vitae voluptates quibusdam quidem, maxime mollitia perspiciatis, ipsum veritatis!</h1><h1>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Assumenda perferendis consequuntur sunt possimus rem iusto necessitatibus dignissimos odio nam vel quia vitae voluptates quibusdam quidem, maxime mollitia perspiciatis, ipsum veritatis!</h1><h1>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Assumenda perferendis consequuntur sunt possimus rem iusto necessitatibus dignissimos odio nam vel quia vitae voluptates quibusdam quidem, maxime mollitia perspiciatis, ipsum veritatis!</h1><h1>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Assumenda perferendis consequuntur sunt possimus rem iusto necessitatibus dignissimos odio nam vel quia vitae voluptates quibusdam quidem, maxime mollitia perspiciatis, ipsum veritatis!</h1>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-11T09:15:45.220

# 纯 JS 中的最快方法

```
let position = window.pageYOffset; // get current page-Y-offset

window.addEventListener('scroll', () => { // Listen for scroll

let scroll = window.pageYOffset; // get page-Y-offset value with every scroll

//If the scroll is greater than position, user has scrolled down, else they scrolled up
scroll > position ? console.log('down') : console.log('up');

//Set the position equal to scroll
position = scroll;

}); 
```

### 这是一个简单的例子。

```
//The message variable is specific to this example
const message = document.querySelector('.message');

let position = window.pageYOffset;

  window.addEventListener('scroll', () => {
    let scroll = window.pageYOffset;

    scroll > position ? message.innerHTML = 'Scrolled Down' : message.innerHTML = 'Scrolled Up';
    position = scroll;
  });
```

```
.container {
  postion: relative;
  width: 100%;
  height: 200vh;
  background: linear-gradient(red,blue);
}

.container .message {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 50px;
  color: white;
  font-size: 2em;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 1em 0;
}
```

```
<div class="container">
  <div class="message">Scroll down and up</div>
</div>
```

# flash - 用于绘图小程序的另一个 MovieClip 中的 MovieClip。为什么以及如何？

> ID：814088
> 
> 赞同：0
> 
> 时间：2009-05-02T03:46:37.390
> 
> 标签：flash, actionscript

我试图在 Flash 中找出一个简单的绘图程序，这给我带来了麻烦。主绘图区域是一个名为 drawZone 的 MovieClip。但是，在显示某些内容时，作者使用了另一个嵌入在名为 zone 的 drawZone Symbol 中的 MovieClip。drawZone 符号有 2 层，一个遮罩层和一个包含区域符号的遮罩子层。

1.  为什么作者这样做而不是简单地在 drawZone MovieClip 中绘制所有内容？
2.  区域符号显示的唯一位置是在电影资源管理器中。我在哪里可以访问它，我如何将这样一个嵌入式符号添加到我自己的代码中？

这是一个屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/YxoKi.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-02T03:52:32.947

我的 Flash 技能有点生疏，但我认为这是因为您无法对根影片应用蒙版。

# java - 从 Java 调用 VB 程序

> ID：814090
> 
> 赞同：2
> 
> 时间：2009-05-02T03:48:12.863
> 
> 标签：java, vb.net, vb6

我想知道是否有人可以告诉我从 Java 调用 Visual Basic 程序的最佳方法。我有几个 VB 应用程序，我想从我正在构建的 Java 应用程序中运行它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-02T04:09:18.430

您可以使用[ProcessBuilder.start()](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/ProcessBuilder.html#start())或较旧的[Runtime.exec()](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)来启动进程。[Java SE 文档](http://java.sun.com/javase/reference/index.jsp "Sun 提供的 Java SE 文档")中提供了此信息。

# apache-flex - 是否可以通过使用 SWFLoader 动态加载的电影访问主机应用程序中声明的静态字段

> ID：814097
> 
> 赞同：0
> 
> 时间：2009-05-02T03:54:01.570
> 
> 标签：apache-flex, flash, actionscript-3, flex3

是否可以通过动态加载的电影访问主机中声明的静态字段（假设加载的电影来自完全受信任的域）。

我主要关心的是确保我们不会向加载的 swf 公开数据，但仍希望监听加载的 swf 触发的事件（通过托管应用程序回调函数）。

* * *

更新

SWFLoader（用于 flex）和 Loader（flash）确实有所不同。SWFLoader 包装了 Loader，但在 Flex API 3.2（或 3.3？）之前，您似乎无法直接访问加载器**contentLoaderInfo**，它用作加载的 swf 的 loaderInfo 的链接，而无需先访问主机的 content 属性swf加载器。在 Flex 3.3 中，他们在 SWFLoader.swfBridge 上引入了一个属性，该属性（查看源代码）公开了嵌套加载器的 contentLoaderInfo.sharedEvents 对象。

但似乎仍然存在一个问题：swfBridge (on the event.COMPLETE) 似乎为空？

那么我们如何获取宿主 SWFLoader 的 contentLoaderInfo.sharedEvents 对象呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-03T14:17:51.907

如果您的应用程序 A.swf 从不同的域加载文件 B.swf，并且在 B.swf 的域上有一个跨域策略文件允许 A.swf 访问 B.swf 的内容，是的，您几乎可以访问那里的所有内容位于 B.swf 内，包括静态字段。您使用[TextSnapshot](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/text/TextSnapshot.html)类阅读了这些内容。

如果你想让 A.swf 从不同的域加载 B.swf，但又不想让 A.swf 访问 B.swf 的内容，那就不允许它访问，至于事件，我记得有一些东西称为[SharedEvents](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/display/LoaderInfo.html#sharedEvents)。我很幸运还不需要这个，但我记得在[Essential Actionscript 3.0](http://oreilly.com/catalog/9780596526948/)中读到过这个。关于安全性，有一整章很无聊。抱歉，我无法提供更具体的例子，因为我没有根据我的个人经历做出回应。

祝你好运！

# .net - 有没有办法拒绝 .NET 控件来设置最终 HTML 元素的样式

> ID：814101
> 
> 赞同：1
> 
> 时间：2009-05-02T03:57:21.827
> 
> 标签：.net, css, controls

我有一个看起来像这样的控件：

```
<asp:DetailsView ID="dvUsers" runat="server" DataSourceID="odsData" 
                 DataKeyNames="Id">
...
</asp:DetailsView> 
```

最终将创建 a`<table>`作为最外层的元素。在我的 CSS 中，我有：

```
table tr {
border-top: 0 ;
border-left: 0 ;
border-right: 0 ;
border-bottom-width: 1px;
} 
```

现在，当我运行网站时，渲染`<table>`将具有边框和样式，这是由于控件的默认设置，看起来像这样

```
<table cellspacing="0" rules="all" border="1" id="ctl00_body_dvUsers" 
       style="border-collapse:collapse;"> 
```

这显然会覆盖我的 CSS，因为它是内联的，我不想要这个。有什么方法可以自动完成所有样式的转换吗？我猜想通过`DetailsView`在`table`同样的方法。

如果某些设计人员想要更改所有表格的样式，这将导致大量重复代码和大量工作，因为我必须返回并更改主题文件中每个控件的样式。

有没有办法说“不要乱用样式，我知道我在做什么！” ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-02T04:36:35.650

看看[CSS Friendly Control Adapters](http://www.codeplex.com/cssfriendly)项目。它提供了一个插入式解决方案，将 DetailsView 控件（和其他）从基于表格的设计转换为使用 CSS 类而不是内联样式的基于 div 的设计。

因此，例如，它会自动转换这个令人头疼的代码：

```
<table cellspacing="2" CssSelectorClass="PrettyDetailsView" border="0" id="ctl00_ctl00_MainContent_LiveExample_DetailsView1" style="background-color:White;border-style:None;">
  <tr style="color:#F7F6F3;background-color:#5D7B9D;font-weight:bold;">
    <td colspan="2">Author Details</td>
  </tr><tr style="color:#333333;background-color:White;">
    <td style="font-weight:bold;">ID</td><td>998-72-3567</td>
  </tr><tr style="color:#333333;background-color:#F7F6F3;">
    <td style="font-weight:bold;">Last name</td><td>Ringer</td>
  </tr><tr align="center" style="color:Cyan;background-color:#284775;">
    <td colspan="2"><table border="0">
      <tr>
        <td><span>1</span></td><td><a href="javascript:__doPostBack('ctl00$ctl00$MainContent$LiveExample$DetailsView1','Page$2')" style="color:Cyan;">2</a></td>
      </tr>
    </table></td>
  </tr>
</table> 
```

进入和平与宁静：

```
<div class="PrettyDetailsView" id="ctl00_ctl00_MainContent_LiveExample_DetailsView1">
  <div class="AspNet-DetailsView">
      <div class="AspNet-DetailsView-Header">
        Author Details
      </div>
      <div class="AspNet-DetailsView-Data">
        <ul>
          <li>
            <span class="AspNet-DetailsView-Name">ID</span><span class="AspNet-DetailsView-Value">998-72-3567</span>
          </li>
          <li class="AspNet-DetailsView-Alternate">
            <span class="AspNet-DetailsView-Name">Last name</span><span class="AspNet-DetailsView-Value">Ringer</span>
          </li>
        </ul>
      </div>
      <div class="AspNet-DetailsView-Pagination">
        <span class="AspNet-DetailsView-ActivePage">1</span><a class="AspNet-DetailsView-OtherPage" href="javascript:__doPostBack('ctl00$ctl00$MainContent$LiveExample$DetailsView1','Page$2')">2</a>
      </div>
  </div>
</div> 
```

我已经成功使用了一段时间了，强烈推荐它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T05:57:56.577

如果您想要更多地控制您的 html，请考虑使用[中继器控件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T10:23:50.417

我经常为此使用javascript。例如，下面的代码将从所有表中删除所有内联样式属性：

```
$(document).ready(function () {

    $('table').filter(function (index) {
        return $(this).removeAttr("style");
    });

}); 
```

# jquery - 单击锚点时的 HTML 滚动位置

> ID：814115
> 
> 赞同：0
> 
> 时间：2009-05-02T04:07:09.730
> 
> 标签：jquery, html

我有一个 MVC 应用程序并使用 JQuery。

我有这样设置的锚

```
<a href="#" id="addcomment">Add Comment</a> 
```

然后当点击锚点时我这样做

```
$('#addcomment').click(function() {
    $('#divComments').slideDown(2000);
}); 
```

问题是单击锚点时，浏览器立即滚动到窗口顶部，单击链接，然后 div 滚动

我该如何阻止这种情况发生？

马尔科姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-02T06:04:30.570

使用命名锚有什么问题？

不需要 javascript 的开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-02T04:09:12.157

您必须`return false;`在单击功能的底部添加以防止发生默认链接事件操作。在这种情况下，默认链接事件将转到页面顶部，因为 href`#`告诉浏览器转到顶部。所以它看起来像这样：

```
$('#addcomment').click(function() {
    $('#divComments').slideDown(2000);
    return false;
}); 
```

虽然这也是可以接受的：

```
$('#addcomment').click(function(e) {
    $('#divComments').slideDown(2000);
    e.preventDefault();
}); 
```

[文档在这里](http://docs.jquery.com/Events/jQuery.Event#event.preventDefault.28.29)。

# java-me - 在 J2ME 中帮助创建图像并解析它

> ID：814130
> 
> 赞同：1
> 
> 时间：2009-05-02T04:19:45.847
> 
> 标签：java-me

谁能告诉我如何在 J2ME 中将 png 图像解析为许多 png 图像？？？

例如：我只是想拥有一个 150*150 像素的源图像并将其解析为 10 个 15*15 像素的图像。

我写了一个有例外的 elemantary 代码。

这是我的代码：

```
public class HelloMIDlet extends MIDlet implements CommandListener {
private boolean midletPaused = false;

private Command exitCommand;
private Form form;
private StringItem stringItem;
Image im , im2;
Form form1 = null;

public HelloMIDlet() {
    try {
        // create source image
        im = Image.createImage("/image1.JPG");

        int height = im.getHeight() ;
        int width = im.getWidth() ;
        int x = 0 ;
        int y = 0 ;

        while ( y < height ){

             while ( x < width ){

                 // create 15*15 pixel of source image
                 im2 = im.createImage(im, x, y, 15, 15, Sprite.TRANS_NONE) ;
                 x += 15 ;
             }

             y += 15 ;
             x = 0 ;
        }          
    } 
    catch (IOException ex) {
        ex.printStackTrace();
    }

} 
```

请帮我把它做好....这是紧急情况！

非常感谢各位...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-28T13:10:19.833

也许如果我理解正确，您有一张 150x150 的图像，其中包含许多其他图像。如果是这种情况，请为每个图像设置索引，并在您以适当的坐标绘制和绘制图像时使用 Graphics.setClip()。例如，您想将图像的 15、15 处的图像绘制到设备屏幕中的坐标 50、50。

```
...
g.setClip(15, 15);
g.drawImage(image, 35, 35, g.TOP | g.LEFT);
... 
```

希望有帮助

# language-agnostic - 您是否曾经进行过代码更改并只是测试而不是试图完全理解您所做的更改？

> ID：814133
> 
> 赞同：4
> 
> 时间：2009-05-02T04:22:58.380
> 
> 标签：language-agnostic, testing, maintenance

我在一个有 12 年历史的代码库中工作，我是唯一的开发人员。有时我会根据直觉（或逻辑上的巨大飞跃 ;-) 做出非常小的改变。

通常我会尝试解构该更改并确保我通读了代码。

但是有时，（这些天越来越多）我只是测试并确保它具有我想要的效果。（我是一个非常彻底的测试人员，即使我阅读了代码也会进行测试）。

这对我有用，并且令人惊讶的是（与我看到的大多数软件相比）很少有错误逃逸到野外。

**但我想知道这是否只是编码的“艺术”方面。**是的，在理想情况下，您会详尽阅读更改修改的每一段代码，但我在实践中，如果您确信它只会影响一小部分代码，这是一种常见的做法吗？

我显然可以看出这在一个可怜的程序员手中将是一种灾难性的方法。但是后来，我见过表面上正在阅读代码并左右破坏东西的程序员（在他们自己的代码基础上，只有他们一直在工作）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-02T04:49:28.537

一旦您将遗留代码包装到双重安全测试中（良好的单元测试和良好的系统/集成/回归测试，两层中的每一层都具有出色的覆盖率），依靠测试来捕捉误解是一种有效的短期战术方法。这是使向遗留代码库添加测试成为高 ROI 策略的部分原因：它使您能够更快地进行紧急错误修复或添加迫切需要的功能，让您对所做的更改的可靠性有合理的信心，而无需彻底了解现有代码的复杂性。

然而，正如其他答案所暗示的那样，这些变化正在积累技术债务；至于任何其他债务，你越早还清，从长远来看你的情况就越好。在这种情况下，“回报”不仅仅是关于内部的文档，它通常可以用于重构代码库以提高清晰度和延展性——真正好的测试也会帮助你自信地进行这样的重构，就像它们一样为遗留代码的错误修复和功能增强做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-02T05:07:30.270

它偶尔发生在我身上。但我想强调另一个人在他们的评论中提到的一点。

*   无论你明白什么部分，试着记录下来。下次进行其他更改时，您可能会为自己和他人节省大量时间。

而且，为了我的两分钱...

*   您提到您“测试”您的工作并将其与之前的结果进行比较。几年前我读到一个人试图争论公司可以拥有的最有价值的东西不是代码本身，而是测试（即：JUnit）。他说，在软件的整个生命周期中，代码会经常更改——从小的修复和增强到完全重写。凭借成熟和经验，我理解他现在的意思，并尝试使用他的建议。通过测试用例，您可以证明您的新工作是功能性的并且不会破坏任何东西。我的意思是...尝试保存和重用您可能拥有的任何测试。一些程序员有时倾向于丢弃这些测试。当其他程序员也进行更改时，它们将变得非常有价值。

快乐的代码更改，

杰奇！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-02T04:38:25.800

有时更改代码和测试可以帮助您理解代码。当然，当你做出你不理解的改变时，你总是在危险的地方。我认为您的成功不仅取决于您的“经验”，还取决于当前代码的稳定性。
您可以轻松地更改编写良好的代码。但随着时间的推移，这种做法会赶上你。
如果您查看代码并且不理解它，那么现在是弄清楚并记录它的时候了。否则，每个其他程序员都必须弄清楚何时必须进行更改。最好只做一次，做对，为以后的每个人节省时间和麻烦。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-02T04:32:43.117

我很可能不是这个问题的预期目标，因为我现在只是几年的专业开发人员。但是，无论如何，我都会扔掉我的 2 美分。

我一直这样做。当我在紧迫的最后期限内时，无论我是否理解整个事情，我都会让代码可靠地工作。

我通常会尽力稍后再回去看看我做了什么——通常是在周末——并更新代码以反映复制/粘贴代码的任何错误决定。但是最后期限才是王道，尤其是如果合同中有因错过期限而受到处罚的情况。您可以随时发送更新以解决以后的任何问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-02T06:13:08.397

不，我*从不*这样做。我希望我的代码 100% 合乎逻辑并且没有错误，并且在未来几年内其他人会阅读它。不完全理解我的代码上下文的整个概念似乎很危险。而*阅读代码*应该是确定系统准确运行的最快方式。如果不是这种情况，那么我建议代码的质量有问题。

在阅读的同时，我也在学习。我认为对我正在开发的系统的进展感到好奇是我专业标准的重要组成部分。有了这种好奇心，就有能力发展系统并改进它。如果我做不到这一点，我认为开发会很快变得乏味。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-02T04:57:30.577

不断地！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-02T04:58:13.710

您希望您的代码由可以单独测试和理解的小块组成。

每个小块都应该做一件事并做好，无论那块是函数、方法还是类。

您希望能够从这些小块中组合出更大的功能块，这样每个组合物，无论*内部多么复杂，**在该功能的抽象级别上都*保持简单。

换句话说，即使在高层次上，我们仍然应该能够用简单的外部来描述复杂的内部。

这就是 Andrew Koenig 所说的“抽象是选择性无知”的意思。通过*有意*放弃某事物内部*如何工作的知识，我们可以考虑的不是它是**如何*工作的，而是它*做*了什么。

让我们举一个简短的例子。在高端，我们可能会说，“这个类在某些数据结构中找到最小的 int”。这告诉我们它做了什么*，*而不是它是如何做的，在这个抽象层次上，这就是我们所关心的。

我们有一个做某事的东西，它是模块化的，我们可以用任何做*同样事情*的东西来代替它，不管它*是怎么*做的。那是有一个公共接口。

现在在较低级别上，它的工作方式可能*是*在内部它是一个堆，或一个优先级队列，或其他任何东西。

这些东西可以用树、自平衡树，甚至（次优）链表来实现。链表将是次优实现，但只要它做同样的事情，我们就不会真正咖啡馆，因为如果次优恢复到足以减慢我们的程序，我们可以将其换成更好的实现具有相同的界面。

这些东西是根据树遍历来实现的（预购：总是按照左、父、右的顺序）。这些东西都是通过节点上的简单操作来实现的。

这是重要的部分：因为应用程序的*其余部分*不依赖于该模块的内部或副作用，所以将较差的实现换成更好的实现不会改变我们的其他代码，它只会加快整体速度。

每一层只与它上面和下面的层通信，因此每一层都可以被替换。从视觉上看，它看起来像圆圈中的圆圈，而不是维恩图的重叠。

如果你不得不依赖直觉，这表明你的代码有副作用，或者它与其他模块的接口过于宽泛，或者根本没有接口，而不是由自包含构建的代码，不相交，模块，你有重叠和交叉点和脆弱的代码。你没有把它分解成足够简单的片段来理解。

（废话，已经晚了，我担心我可以更好地分解这个解释。我会回来编辑这个。）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-05-31T02:26:14.187

如果你改变一个方法，你应该彻底测试它，包括调用这个方法的方法。

# php - 编写php函数

> ID：814139
> 
> 赞同：0
> 
> 时间：2009-05-02T04:30:04.260
> 
> 标签：php

我是 php 新手，正在尝试编写登录功能。位卡住并收到错误。这是我的功能：

```
<?php

if(!defined('_VALID_ACCESS')) die('direct access is not allowed.');
include('includes/connect.php'); 

function login($username, $password)
{
    $username = trim($username);
    $password = trim($password);
    echo $username;
    echo $password;
    $login_sql  = "SELECT * FROM user WHERE user = '".($username)."' 
    AND pass = '".(md5($password))."'";
    $login_result = $mysqli->query($login_sql) or die(mysqli_error());
    $row=$login_result->fetch_row();
    if($row[0] == 1)
    {
        return true;
    }
    else
    {
        return false;
    }
}
?> 
```

连接.php

```
<?php
$db_name = "coolmates";
$db_server = "localhost";
$db_user = "justron";
$db_pass = "Justron9004";

$mysqli = new MySQLi($db_server, $db_user, $db_pass, $db_name) or die(mysqli_error());

?> 
```

注意：未定义的变量：第 14 行 ..\login.php 中的 mysqli

致命错误：在第 14 行对 ..\login.php 中的非对象调用成员函数 query()

帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-02T04:33:04.800

您缺少全局标识符。即：

```
function login($username, $password)
{
    global $mysqli;
    $username = trim($username);
    $password = trim($password);
    echo $username;
    echo $password;
    $login_sql  = "SELECT * FROM user WHERE user = '".($username)."' 
    AND pass = '".(md5($password))."'";
    $login_result = $mysqli->query($login_sql) or die(mysqli_error());
    $row=$login_result->fetch_row();
    if($row[0] == 1)
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

我想补充一件事：不要那样构造 SQL，尤其是在使用 mysqli 时。使用绑定参数。做这个：

```
$login_result = $mysqli->query("SELECT COUNT(1) result FROM user WHERE user = ? AND pass = ?");
$login_result->bind_param("ss", $username, md5($password));
$login_result->execute();
$login_result->bind_result($count);
$login_result->fetch();
if ($count == 1) {
  // success
} else {
  // failure
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-02T04:33:49.633

问题是“包含”默默地死了。这是 PHP 的一个可爱的特性，它不会告诉你它们什么时候不成功。

用“require”替换你的“include”，这样当找不到文件时它就会死掉。

*另外，请立即*阅读 SQL 注入和 XSS 安全性。您的 SQL 非常不安全，并且尝试将用户名设置为（字面意思，包括引号）登录

```
' or true or '' = ' 
```

将立即使潜在的攻击者的生活变得更容易。

```
select 'hello' = '' or true or '' = '' and 'world' = '1'; 
```

返回你看到的“真”。

# ide - DigitalMars D 编程的最佳 IDE 是什么？

> ID：814142
> 
> 赞同：11
> 
> 时间：2009-05-02T04:31:33.523
> 
> 标签：ide, d

从很多方面来看，Digital Mars D 似乎是一种非常好的编程语言，但我唯一的问题是浪费大量时间在命令行中以老式方式向编译器写入参数。D有什么好的IDE吗？提前致谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-02-26T19:35:03.833

用于 D 的最佳 IDE 可能是您最常使用且最熟悉的 IDE。

如果您喜欢[Eclipse](http://www.eclipse.org/)，您应该查看[DDT（D 开发工具）](https://ddt-ide.github.io/)（以前称为 Descent）

如果你喜欢 Visual Studio，你应该签出[VisualD](http://www.dsource.org/projects/visuald)。

[XCode](http://michelf.com/projects/d-for-xcode/)也有D，但它似乎落后了。

另一个有趣的选项是[Mono-D ，它为](http://mono-d.sourceforge.net/)[MonoDevelop](http://monodevelop.com/)添加了很好的 D 支持。它适用于 Linux、Windows 和 Mac。

Mono-D 支持代码完成、语法突出显示、类浏览、错误突出显示、“转到定义”、智能代码格式化等。如果你喜欢 MonoDevelop，或者需要跨平台支持，它似乎是个不错的选择。

MonoDevelop（和 Mono-D）使用 Visual Studio 项目格式。VisualD 和 Mono-D 可以共享项目文件。我没有测试过这个。

**编辑：**我刚刚浏览了[这个链接](http://prowiki.com/wiki4d/wiki.cgi?EditorSupport)，它很好地展示了 D IDE 选项，包括它们的开发活跃程度。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2010-04-10T22:56:56.047

请试试我的[D-IDE](http://d-ide.sourceforge.net/)，看看这个 IDE 是否是你能找到的最好的 IDE；）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-02T04:50:15.960

我没有在其中尝试过 D，因此您需要自己进行评估，但是：

*   [Slickedit 2009](http://www.slickedit.com/content/view/498/#DLanguageSupport)和
*   [宙斯编辑器](http://zeusedit.com/d.html)

两人都声称完全支持 D。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-05T05:09:02.677

在环顾并测试了此问题中推荐的所有 IDE 以及[https://stackoverflow.com/questions/50179/an-ide-for-d](https://stackoverflow.com/questions/50179/an-ide-for-d)中的所有 IDE 之后，我对任何答案都不满意。我开始相信对于 D 来说真的没有“最佳 IDE”这样的东西，但最近我发现了一个在我看来是一个非常好的解决方案：**[SkyIDE](http://www.techopinion.net/start/node/6)**

[![替代文字](https://i.stack.imgur.com/PRmY3.jpg)](https://i.stack.imgur.com/PRmY3.jpg)
[（来源：[hubpages.com](http://z.hubpages.com/u/77709_f520.jpg)）]

它也是 Digital Mars C++、Free Pascal 和其他语言的好 IDE...

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2011-02-04T16:31:02.547

[geany](http://www.geany.org/)是 D 编程的最佳 ide：

支持D编程

语法高亮

自动完成

易于设置 D 编译器 ldc、gdc 或 dmd 或使用 make 文件代替

如果您的小项目没有生成文件，您可以使用此命令（示例）

ldc -of "../%e" $(find .-name "*.d")

# php - curl 无法获取网页内容，为什么？

> ID：814149
> 
> 赞同：3
> 
> 时间：2009-05-02T04:35:33.997
> 
> 标签：php, curl, screen-scraping, web-scraping

我正在使用 curl 脚本转到链接并获取其内容以进行进一步操作。以下是链接和 curl 脚本：

```
<?php 
$url = 'http://criminaljustice.state.ny.us/cgi/internet/nsor/fortecgi?serviceName=WebNSOR&amp;templateName=detail.htm&amp;requestingHandler=WebNSORDetailHandler&amp;ID=368343543';

//curl script to get content of given url

$ch = curl_init();

// set the target url

curl_setopt($ch, CURLOPT_URL,$url);

// request as if Firefox

curl_setopt($ch, CURLOPT_HTTPHEADER, Array("User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.15) Gecko/20080623 Firefox/2.0.0.15") ); 
curl_setopt($ch, CURLOPT_NOBODY, false);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$result= curl_exec ($ch);
curl_close ($ch);
echo $result;
?> 
```

但是该网站并没有通过脚本将其排除在外，它会在结果中给用户异常，但是如果我们通常将 url 粘贴到浏览器中，它会完美地打开页面。

请帮忙，我在这里做错了什么。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-02T16:19:37.270

我运行了以下程序/脚本，页面已正确下载。这很可能意味着您运行脚本的服务器无法访问位于“criminaljustice.state.ny.us”的服务器。这可能是因为您的服务器配置错误，或者他们的服务器明确阻止了您，这是激进的屏幕抓取的常见结果。

```
<?php
$url = 'http://criminaljustice.state.ny.us/cgi/internet/nsor/fortecgi?serviceName=WebNSOR&templateName=detail.htm&requestingHandler=WebNSORDetailHandler&ID=368343543';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_HTTPHEADER, Array("User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.15) Gecko/20080623 Firefox/2.0.0.15") ); 
curl_setopt($ch, CURLOPT_NOBODY, false);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$result= curl_exec ($ch);
curl_close ($ch);
echo $result; 
```

附加故障排除提示——如果您对运行 PHP 脚本的机器具有 shell 访问权限，请运行以下命令

```
curl -I 'http://criminaljustice.state.ny.us/cgi/internet/nsor/fortecgi?serviceName=WebNSOR&templateName=detail.htm&requestingHandler=WebNSORDetailHandler&ID=368343543' 
```

这将输出响应标头，其中可能包含有关您的请求失败原因的一些线索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-02T05:30:34.397

对于用户代理，我认为您想使用 CURLOPT_USERAGENT 常量

```
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-02-23T22:31:57.193

我遇到了同样的问题，最终没有设置跟随位置选项。我认为 curl 默认会将其设置为 true，但我想不会！？一旦我设置它就可以得到完整的网站没问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-02T04:52:08.980

用户代理是否应该在这样的数组中？我以前从未见过这样的做法。

尝试只使用纯字符串，即

```
curl_setopt($ch, CURLOPT_HTTPHEADER, 'User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.15) Gecko/20080623 Firefox/2.0.0.15'); 
```

# asp.net - 如何创建基于 Web 的可视化流程设计器？

> ID：814150
> 
> 赞同：2
> 
> 时间：2009-05-02T04:36:22.250
> 
> 标签：asp.net, jquery, asp.net-ajax, business-process-management

我被要求在 asp.net/c# 中设计基于 Web 的流程设计器（业务流程设计器）。我的团队中目前有一名程序员，我们有两个月的时间。我们找到了一些开源 BPM 设计师，但我们想设计自己的，因为我们的学习渴望？请给建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T04:53:51.770

看看[js-graph-it](http://js-graph-it.sourceforge.net/)，它是一种基于 javascript 和 CSS 的图表技术。虽然不是一个完整的解决方案，但它可能是您可以开始的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-12-09T14:49:05.273

您可以使用 Silverlight Canvas 来设计工作流程。您可以将工作流框创建为工作流设计器的资产，并允许用户将这些工作流框拖放到画布上。然后使用箭头连接盒子。这将标记进程之间的流程

然后将该过程导出到 XML 或您想要保存的数据库中，然后您制作自己的代码来处理该 xml 并执行工作流中定义的条件。

所以总的来说，该应用程序将分为 3 个部分。

1.  基于 Silverlight 的工作流设计器应用程序
2.  将 Designer 与数据库交互的数据库连接器服务
3.  将执行该工作流的流程执行引擎。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-02T05:42:52.963

“但我们想设计自己的，以满足我们的学习需求”

这一说法令人担忧。您还说您有 1 个程序员和 2 个月来完成系统。有了这些限制，我会说除了简单/小型系统之外构建任何东西都是不切实际的。

你有任何真正的（即付费的）客户吗？

是的，然后做出一个基本的设计选择来满足你的学习欲望而不是客户的优先级，这对你的客户是非常不负责任的。

如果不是，那么我想您可以随心所欲地进行学习，但是了解现有选项也是进一步了解知识的好方法。

在专业情况下，我会首先非常仔细地评估现有选项，并且只有在我确定它们缺乏某些关键要求时，才考虑自己编写。自己写的并不常见。

抱歉有点挑剔，但是如果做出错误的选择，我已经多次看到这种“以眼泪收场”的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-02T04:49:02.093

我可能会因为不匹配您提供的标签而被激怒；然而，最近我在网上找到了一个让我印象深刻的应用程序。它是**一闪**而过的，我还没有在任何网站上找到一个更流畅的故事板界面。该应用程序称为[想象力立方](http://www.imaginationcubed.com/index.php)。我知道使用如此有趣的界面来放置形状和流程图是非常规的......但我发现它比当今市场上的硬壳应用程序加载更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-02T05:17:24.757

请考虑您的客户。快速提供几乎现有的解决方案（可能作为 v1）然后利用节省的时间来教育自己不是更好吗？这样，您不仅可以提高生产力和荣誉，还可以让您的用户提交真实世界的体验，从而使您的 v2 变得更好？

# sql - 没有工具的 Sql Server 2005 安装？

> ID：814153
> 
> 赞同：0
> 
> 时间：2009-05-02T04:36:43.590
> 
> 标签：sql, sql-server-2005

我正在安装 SQL Server 2005 标准版。

但安装完成后，会显示 Management Studio、Business Intelligence 和 Analysis Services 等工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T04:42:39.847

如果我没记错的话，这些工具在 CD 2 上

* * *

看看这篇[文章](http://channel9.msdn.com/forums/Coffeehouse/139463-Installing-SQL-Server-2005-Standard/)：

> 当您第一次插入 DVD 时，安装下应该有两个项目列表。它应该看起来像这样：
> 
> **服务器组件、工具、联机丛书和示例**
> 
> **运行 SQL Native Client 安装向导**
> 
> 您已经安装了“运行 SQL Native Client 安装向导”，接下来您需要安装“服务器组件、工具、联机丛书和示例”。这是您将获得 SQL Server 和 Server Management Studio 的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T04:47:21.363

你*缺少*工具吗？或者你有它们？不清楚。我相信 Express 会在没有工具的情况下安装。您确定要安装标准版吗？

# java - 在 MySQL 中一起使用准备好的语句和连接池

> ID：814156
> 
> 赞同：4
> 
> 时间：2009-05-02T04:40:27.357
> 
> 标签：java, mysql, connection-pooling, prepared-statement

目前，对于每个查询，都会创建并重复使用准备好的语句。我没有使用任何连接池。C3P0 是一个被广泛推荐的库。

但是，由于 PreparedStatement 与连接相关联。在池化环境中，连接被返回到池中，从而有效地使 PreparedStatement 不可用。我对这个结论是否正确？有什么方法可以同时使用 Prepared Statement 和连接池？

更新：这是独立的应用程序。所以，我不能使用一个框架来获得正确的连接池。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T07:35:19.323

这取决于您使用的池化机制。大多数 Java EE 应用程序服务器都有连接池实现，其中有一个准备好的语句缓存以及池中的每个连接。因此，准备好的语句和连接一样被重用。我不知道任何具有此功能的独立池机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T05:03:17.520

我相信如果您关闭连接，PreparedStatement 将“丢失”，但只要相同的连接保持打开状态，相同的 PreparedStatement 就应该可用。您应该查看 Spring 使用 JdbcTemplate 为您执行此操作。它将抽象出所有这些，因此您不必担心。只需将它传递给 DataSource 就可以了。

以下是如何使用 c3p0 作为 DataSource 对象：http: [//forum.springframework.org/showthread.php ?t=13078](http://forum.springframework.org/showthread.php?t=13078)

然后，您可以创建一个 JdbcTemplate bean 并将数据源作为构造函数参数传递，然后将 JdbcTemplate 注入您正在使用的任何 DAO 对象中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T12:12:00.890

当我从“高性能 MySQL”中看到[这个材料](http://www.petefreitag.com/item/390.cfm)时，它让我觉得你必须对你的 MySQL 配置做一些超出你在 Java 中设置的任何事情的事情。您是否编辑了 my.cnf 文件？

另外，您是否查看过有关该主题的[其他 SO 问题](https://stackoverflow.com/questions/222019/how-to-use-mysql-prepared-statement-caching)？

编辑：Spring 是一个可以帮助池化的框架，非常适合独立应用程序。

# mips - Mips syscall + eof = 无法读取整个文件？

> ID：814159
> 
> 赞同：2
> 
> 时间：2009-05-02T04:43:58.360
> 
> 标签：mips

我正在编写一些 mips 代码，每次循环迭代读取 ~4kb。问题是我正在读取的 mp3 文件包含多个 1A 实例，因此系统调用 14 停止并且不会再读取而不会到达文件的实际末尾。有没有办法解决？另外，是否有人拥有可以添加到系统调用 13 的标志的完整列表？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T07:00:10.717

如果您使用的是 MARS 模拟器，我认为这是不可能的（除非有人在您的特定安装中扩展了系统调用接口）。从[这里](http://courses.missouristate.edu/KenVollmar/MARS/Help/SyscallHelp.html)的文档：

> MARS 实现了两种模式：0 表示读取，1 表示写入，并且忽略标志。

如果您使用的是 MARS 以外的模拟器，您需要告诉我们是哪一个。并非所有这些都实现相同的系统调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T05:05:20.120

尝试以二进制模式打开文件。

# python - 在 Python 中使用 rm -rf 的最简单方法

> ID：814167
> 
> 赞同：81
> 
> 时间：2009-05-02T04:52:24.737
> 
> 标签：python

`rm -rf`在 Python中进行等效操作的最简单方法是什么？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2009-05-02T04:54:34.670

```
import shutil
shutil.rmtree("dir-you-want-to-remove") 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-03-04T23:28:12.180

虽然有用，但 rmtree 并不等效：如果您尝试删除单个文件，它会出错，`rm -f`但不会（参见下面的示例）。

为了解决这个问题，您需要检查您的路径是文件还是目录，并采取相应措施。这样的事情应该可以解决问题：

```
import os
import shutil

def rm_r(path):
    if os.path.isdir(path) and not os.path.islink(path):
        shutil.rmtree(path)
    elif os.path.exists(path):
        os.remove(path) 
```

注意：此函数不会处理字符或块设备（需要使用`stat`模块）。

`rm -f`与 Python 的区别示例`shutils.rmtree`

```
$ mkdir rmtest
$ cd rmtest/
$ echo "stuff" > myfile
$ ls
myfile
$ rm -rf myfile 
$ ls
$ echo "stuff" > myfile
$ ls
myfile
$ python
Python 2.7.1+ (r271:86832, Apr 11 2011, 18:13:53) 
[GCC 4.5.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import shutil
>>> shutil.rmtree('myfile')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/shutil.py", line 236, in rmtree
    onerror(os.listdir, path, sys.exc_info())
  File "/usr/lib/python2.7/shutil.py", line 234, in rmtree
    names = os.listdir(path)
OSError: [Errno 20] Not a directory: 'myfile' 
```

*编辑：*处理符号链接；根据@pevik 的评论注意限制

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-01T07:11:52.230

```
import os
import shutil

def rm_r(path):
    if not os.path.exists(path):
        return
    if os.path.isfile(path) or os.path.islink(path):
        os.unlink(path)
    else:
        shutil.rmtree(path) 
```

稍微改进了加布里埃尔格兰特的版本。这也适用于目录的符号链接。注意：函数不*处理*Un*x 字符和块设备（它需要使用[stat](https://docs.python.org/3.0/library/stat.html)模块）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-28T09:43:42.243

```
def delite(filepath):

    import os, stat, sys
    def intertwin(_list):
        list1 = []
        for i in _list:
            list1 += i
        return list1
    allpath = os.walk(filepath)
    walk = []
    dirs = []
    path = []
    allfiles = []
    for i in allpath:
        walk.append(i)
    for i in walk:
        dirs.append(i[0])
    for _dir in dirs:
        os.chdir(_dir)
        files = os.listdir(_dir)
        files1 = []
        for i in files:
            files1.append(_dir + '\\' + i)
        files = files1[:]
        allfiles.append(files)
    allfiles = intertwin(allfiles)
    for i in allfiles:
        os.chmod(i, stat.S_IRWXU)
    allfiles.reverse()
    os.chdir(sys.path[0])
    for i in allfiles:
        try:
            os.remove(i)
        except:
            try:
                os.rmdir(i)
            except:
                pass
    os.chmod(filepath, stat.S_IRWXU)
    try:
        os.remove(filepath)
    except:
        os.rmdir(filepath)
        allfiles.reverse()
        os.chdir(sys.path[0])
        for i in allfiles:
            try:
                os.remove(i)
            except:
                try:
                    os.rmdir(i)
                except:
                    pass
        os.chmod(filepath, stat.S_IRWXU)
        try:
            os.remove(filepath)
        except:
            os.rmdir(filepath) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-31T02:36:06.560

阻止删除文件的 Windows 解决方法是截断文件：

```
outputFile = open(r"filename.txt","w") 
outputFile.truncate()
outputFile.close()
outputFile = open(r"filename.txt","a+") 
```

来源：[https ://stackoverflow.com/a/2769090/6345724](https://stackoverflow.com/a/2769090/6345724)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-05-02T09:38:05.003

shutil.rmtree() 是正确的答案，但只需看看另一个有用的功能 - os.walk()

* * *

## 回答 #7

> 赞同：-10
> 
> 时间：2015-10-29T17:42:14.343

只需这样做：

```
import os
dirname = "path_to_directory_to_remove"
os.system("rm -rf %s" % dirname) 
```

# postgresql - 在 PostgreSQL 中存储不区分大小写的 varchar

> ID：814172
> 
> 赞同：11
> 
> 时间：2009-05-02T04:58:00.217
> 
> 标签：postgresql, collation, case-insensitive

我想在 SQL 表中为我的用户名*varchar*添加一些约束，以便如果用户名存在，则无法创建不同情况下的重复用户名。我怎样才能做到这一点？谢谢

编辑：
我正在使用 PostgreSQL，非常感谢一些语法帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-05-02T06:59:04.560

从[文档](http://www.postgresql.org/docs/current/interactive/sql-createindex.html)

```
CREATE UNIQUE INDEX lower_title_idx ON films ((lower(title))); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-03T18:39:18.720

请注意 PostgreSQL 8.4（目前是 beta）将有一个[不区分大小写的文本类型](http://docs.postgresql.fr/8.4/citext.html)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-02T05:04:49.607

如果尚未填充表，您可以考虑在进行任何插入并使字段成为主键（或仅具有唯一约束）之前简单地转换为标准的大写或小写。如果用户想在他指定的情况下查看他的用户 ID，这可能是数据库中的另一列。

**更新**：基于更新的标签，我仍然建议我提出的解决方案较少依赖特定的 DBMS。

# ruby - 机架和乘客有什么区别？

> ID：814179
> 
> 赞同：12
> 
> 时间：2009-05-02T05:03:52.150
> 
> 标签：ruby, sinatra, passenger, rack, dreamhost

我正在尝试将 Sinatra 应用程序部署到 Dreamhost，它显示以下内容：

> 由于DH 支持Passenger，而后者又支持基于Rack 的ruby 应用程序，DH 确实支持Sinatra。

我很难解析该语句 - Rack 和 Passenger 之间有什么区别（以及为什么 Sinatra “基于 Rack”）？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-05-02T05:22:18.783

[Rack](https://rack.github.io/)是用于 Web 服务器的[标准化 API](https://www.rubydoc.info/github/rack/rack/master/file/SPEC)，用于与 Ruby 中的中间件和 Web 框架进行通信。[Phusion Passenger](http://www.modrails.com/)是一个 Apache 模块，它实现了 Rack API。[Sinatra](http://www.sinatrarb.com/)是一个建立[在 Rack API 之上的](http://www.sinatrarb.com/api/index.html)Web 框架，所以因为 Dreamhost 支持 Phusion Passenger，这意味着它支持 Rack，因此也支持 Sinatra。

# c# - c#、内部和反射

> ID：814183
> 
> 赞同：1
> 
> 时间：2009-05-02T05:05:37.700
> 
> 标签：c#, reflection, internal

有没有办法通过反射执行“内部”代码？

这是一个示例程序：

```
using System;
using System.Reflection;

namespace ReflectionInternalTest
{
    class Program
    {
        static void Main(string[] args)
        {
            Assembly asm = Assembly.GetExecutingAssembly();

            // Call normally
            new TestClass();

            // Call with Reflection
            asm.CreateInstance("ReflectionInternalTest.TestClass", 
                false, 
                BindingFlags.Default | BindingFlags.CreateInstance, 
                null, 
                null, 
                null, 
                null);

            // Pause
            Console.ReadLine();
        }
    }

    class TestClass
    {
        internal TestClass()
        {
            Console.WriteLine("Test class instantiated");
        }
    }
} 
```

创建一个测试类通常工作得很好，但是当我尝试通过反射创建一个实例时，我收到一个 missingMethodException 错误，说它找不到构造函数（如果你尝试从程序集外部调用它会发生这种情况）。

这是不可能的，还是我可以做一些解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-02T05:33:36.497

这是一个例子......

```
 class Program
    {
        static void Main(string[] args)
        {
            var tr = typeof(TestReflection);

            var ctr = tr.GetConstructor( 
                BindingFlags.NonPublic | 
                BindingFlags.Instance,
                null, new Type[0], null);

            var obj = ctr.Invoke(null);

            ((TestReflection)obj).DoThatThang();

            Console.ReadLine();
        }
    }

    class TestReflection
    {
        internal TestReflection( )
        {

        }

        public void DoThatThang()
        {
            Console.WriteLine("Done!") ;
        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-02T05:51:43.113

根据 Preets 对另一个帖子的指示：

```
using System;
using System.Reflection;
using System.Runtime.CompilerServices;

namespace ReflectionInternalTest
{
    class Program
    {
        static void Main(string[] args)
        {
            Assembly asm = Assembly.GetExecutingAssembly();

            // Call normally
            new TestClass(1234);

            // Call with Reflection
            asm.CreateInstance("ReflectionInternalTest.TestClass", 
                false, 
                BindingFlags.Default | BindingFlags.CreateInstance | BindingFlags.Instance | BindingFlags.NonPublic, 
                null, 
                new Object[] {9876}, 
                null, 
                null);

            // Pause
            Console.ReadLine();
        }
    }

    class TestClass
    {
        internal TestClass(Int32 id)
        {
            Console.WriteLine("Test class instantiated with id: " + id);
        }
    }
} 
```

这行得通。（添加了一个参数来证明它是一个新实例）。

原来我只需要实例和非公共 BindingFlags。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-05-23T12:28:51.963

如果您在 C# 4.0 中，请使用 AccessPrivateWrapper 动态包装器[http://amazedsaint.blogspot.com/2010/05/accessprivatewrapper-c-40-dynamic.html](http://amazedsaint.blogspot.com/2010/05/accessprivatewrapper-c-40-dynamic.html)

# c# - C#：在 N x N 矩阵中找到最大 m 个元素的高效算法

> ID：814186
> 
> 赞同：2
> 
> 时间：2009-05-02T05:07:25.670
> 
> 标签：c#, algorithm, matrix

我想知道是否有一种有效的算法可以在 N x N 矩阵中找到最大的 m 个元素，方法头如下：

```
double[] greatestValues(double[][] matrix, int numberOfElements); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-02T05:23:39.017

如果将 N x N 矩阵视为 N x N 项的数组，则可以应用以下技术之一：

> **基于快速排序的选择算法的直接应用 基于**快速排序的选择算法可用于查找 k 个最小或 k 个最大元素。要找到 k 个最小元素，请使用基于中位数快速排序的算法找到第 k 个最小元素。在找到第 k 个最小元素的分区之后，所有小于第 k 个较小元素的元素将出现在第 k 个元素的左侧，所有较大的元素将出现在第 k 个最小元素的右侧。因此，从第 1 到第 k 个元素（含）的所有元素构成了 k 个最小元素。时间复杂度在元素总数 n 中是线性的。
> 
> **基于数据结构的解决方案**另一种简单的方法是将列表的每个元素添加到有序集合数据结构中，例如堆或自平衡二叉搜索树，最多具有 k 个元素。每当数据结构有超过 k 个元素时，我们删除最大的元素，这可以在 O(log k) 时间内完成。每个插入操作也需要 O(log k) 时间，因此总体上需要 O(nlog k) 时间。
> 
> 可以在 Θ(n) 时间内将列表转换为堆，然后使用改进的广度优先搜索算法遍历堆，该算法将元素放入优先级队列（而不是通常在BFS），并在恰好遍历 k 个元素后终止扫描。由于队列大小在整个遍历过程中保持 O(k)，因此需要 O(klog k) 时间才能完成，导致该算法的时间界限为 O(n + klog k)。

从[这里](http://en.wikipedia.org/wiki/Selection_algorithm#Selecting_k_smallest_or_largest_elements)。

# c# - 如何将 SAme 类的多个对象序列化为单个文件并在 c# 中将这些对象反序列化为这些对象

> ID：814191
> 
> 赞同：2
> 
> 时间：2009-05-02T05:14:01.270
> 
> 标签：c#, serialization

如何将同一类的多个对象序列化为一个文件并反序列化为c#中的那些对象

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-02T06:12:56.370

尝试这样的事情：

```
using (FileStream output = 
    new FileStream("C:\\peoplearray.dat", FileMode.CreateNew))
{
    BinaryFormatter bformatter = new BinaryFormatter();
    bformatter.Serialize(output, 
                         new Person[] {
                             new Person{Firstname="Alex"}
                         });
}
using (FileStream input = 
      new FileStream("C:\\peoplearray.dat", FileMode.Open))
{
    BinaryFormatter bformatter = new BinaryFormatter();
    var results = bformatter.Deserialize(input) as Person[];
    foreach (Person p in results)
    {
        Console.WriteLine(p.Firstname);
    }
} 
```

只要人是 [Serializable] 这将工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-02T05:16:15.587

序列化和反序列化这些对象的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-12-24T07:40:30.263

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;

class SerializeMe implements Serializable {
    private static final long serialVersionUID = 1L;

    private int data;

    public SerializeMe (int data) {
        this.data = data;
    }

    public int getData() {
        return data;
    }
}

public class UIDTester {
    public static void main(String... strings) throws Exception {
        File file = new File("out.ser");
        FileOutputStream fos = new FileOutputStream(file);
        ObjectOutputStream oos = new ObjectOutputStream(fos);

        //Create the multiple Objects
        SerializeMe serializeMe = new SerializeMe(1);
        SerializeMe serializeMe1 = new SerializeMe(10);
        SerializeMe serializeMe2 = new SerializeMe(100);
        SerializeMe serializeMe3 = new SerializeMe(1000);

        //Create an array and assign objects
        Object[] obj=new Object[]{serializeMe,serializeMe1,serializeMe2,serializeMe3};
        // Write object array to Stream Class
        oos.writeObject(obj);
        oos.close();

        //Process of Deserializable
        FileInputStream fis = new FileInputStream(file);
        ObjectInputStream ois = new ObjectInputStream(fis);

        //create an array of Object class
        Object[] obj1=(Object[]) ois.readObject();

        //looping the array
        for(int i=0;i<obj1.length;i++){

            SerializeMe dto = (SerializeMe) obj1[i];
            System.out.println("data : " + dto.getData());
        }
        ois.close();
    }
} 
```

# cocoa-touch - 用 CGContextStrokePath 改变颜色

> ID：814196
> 
> 赞同：5
> 
> 时间：2009-05-02T05:16:48.750
> 
> 标签：cocoa-touch

我正在尝试使用 iPhone/Touch SDK 绘制一些简单的线条。我希望能够更改线条的颜色，但是在实际调用 CGContextStrokePath 之前，调用 CGContextSetRGBStrokeColor 似乎不会影响使用 CGContextAddLineToPoint 绘制的线条。因此，如果我多次调用来更改颜色，只有在 CGContextStrokePath 之前进行的调用才会有任何效果。这就是我的意思：

```
 - (void)drawRect:(CGRect)rect 
{
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextMoveToPoint(ctx, 0, 0);
    CGContextSetRGBStrokeColor(ctx,1,0,0,1);
    CGContextAddLineToPoint(ctx, 100, 100);
    //CGContextStrokePath(ctx);
    CGContextSetRGBStrokeColor(ctx,0,1,0,1);
    CGContextAddLineToPoint(ctx, 200, 300);
    //CGContextStrokePath(ctx);
    CGContextSetRGBStrokeColor(ctx,0,0,1,1);
    CGContextStrokePath(ctx);
} 
```

我想我做错了什么，我只是不知道是什么。我认为如果我添加了 CGContextStrokePath 调用，那会有所帮助，但它没有。

请参阅下面的讨论，了解我如何获得更正的代码：

```
- (void)drawRect:(CGRect)rect 
{
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextBeginPath(ctx);
    CGContextMoveToPoint(ctx, 0, 0);
    CGContextSetRGBStrokeColor(ctx,1,0,0,1);
    CGContextAddLineToPoint(ctx, 100, 100);
    CGContextStrokePath(ctx);
    CGContextClosePath(ctx);
    CGContextBeginPath(ctx);
    CGContextMoveToPoint(ctx, 100, 100);
    CGContextSetRGBStrokeColor(ctx,0,1,0,1);
    CGContextAddLineToPoint(ctx, 200, 300);
    CGContextStrokePath(ctx);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-02T05:57:12.773

我不认为你做错了什么，只是给定图形上下文的 CGContextStrokePath 一次只能有一个 RGBStrokeColor 。因此，需要多次调用 CGContextStrokePath，每种颜色一次。

每次调用 CGContextAddLineToPoint() 时，对图形上下文的引用（不是副本）都会添加到该绘图操作堆栈中。当您最终调用 CGContextStrokePath() 时，将使用 RGBStrokeColor 的最后一个值。

如果您想在相同的图形上下文中使用多种颜色，那么您似乎需要多次调用 CGContextStrokePath() 来更改两次调用之间图形上下文上 RGBStrokeColor() 的值。AccelerometerGraph/GraphView.m 中的 Apple 示例代码似乎也表明了这一点。

# c# - 如何实现通用方法对不同的值类型进行数学计算

> ID：814202
> 
> 赞同：5
> 
> 时间：2009-05-02T05:22:23.293
> 
> 标签：c#, generics

我有一个接受 IEnumerable-decimals 并执行各种数学函数的方法。我想在 IEnumerable-int- 上使用相同的方法。我该如何实施？例如找到一个简单的总和？

```
void Calculate<T>(IEnumerable <T> ListOFNumbers)
{
   int count= ListofNumbers.Count();
   ?sum=?;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-02T08:07:17.093

这些都可以在[MiscUtil](http://www.yoda.arachsys.com/csharp/miscutil/)中免费获得。该类`Operator`提供对通用算术的访问；并且有 , 等的通用实现（作为扩展方法）`Sum`-`Average`除了原语之外，还可以使用具有合适运算符的**任何类型。**因此，例如，您可以使用 Sum 和 of[`Complex<T>`](http://csharpindepth.com/ViewNote.aspx?NoteID=50)等。

请注意，它当前使用 .NET 3.5；我确实在某个地方有一个 2.0 版本，但它没有经过测试......

[使用文档](http://www.yoda.arachsys.com/csharp/miscutil/usage/genericoperators.html)中显示了 sum的**简化**示例：

```
public static T Sum<T>(this IEnumerable<T> source)
{
    T sum = Operator<T>.Zero;
    foreach (T value in source)
    {
        if (value != null)
        {
            sum = Operator.Add(sum, value);
        }
    }
    return sum;
} 
```

虽然 IIRC 的*实际*实现有更多...

顺便说一句，请注意`dynamic`（在 .NET 4.0 / C# 4.0 中）据说支持运算符，但我们必须等待测试版才能看到它的作用。从我之前`dynamic`在 CTP 中的观察来看，我*预计*它会比 MiscUtil 代码慢一点，但我们会看到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T05:40:25.043

您可以使用[IEnumerable.Sum](http://msdn.microsoft.com/en-us/library/bb534734.aspx)函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T05:46:06.933

这纯粹是在反射器中寻找和跳跃。

```
 {
   IQueryable qt = ListofNumbers.AsQueryable();
   Console.WriteLine(qt.Sum());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-02T06:29:33.287

您可以使用内置的 LINQ Aggregate(...) 方法来执行此操作以及许多其他更复杂的计算，即

```
int[] n = new int[] { 1, 2, 3, 4, 4, 5, 5, 6 };
int sum = n.Aggregate((x, y) => x + y); 
```

在执行 lamdba 时，对于枚举中的每个元素，x,y 的值一次是

```
0,1
1,2
3,3
6,4,
10,4,
14,5,
19,5
24,6 
```

分别，最终结果是30

有了这个，你可以使用任何你想要的聚合函数：

例如：

```
int[] n = new int[] { 1, 2, 3, 4, 4, 5, 5, 6 };
int count = n.Aggregate((x, y) => x + 1); 
```

为了简化这一点，有用于常见聚合的内置函数，如 Count 和 Max。希望这可以帮助

亚历克斯

# c# - 通过单例类获取数据库连接

> ID：814206
> 
> 赞同：19
> 
> 时间：2009-05-02T05:27:55.307
> 
> 标签：c#, design-patterns, singleton

我创建了一个单例类，这个类返回一个数据库连接。所以我的问题是这种连接也满足单身标准吗？
如果没有，那么我怎么能使它成为单身。
这是代码。

```
public sealed class SingletonDB
{
    static readonly SingletonDB instance = new SingletonDB();
    static SqlConnection con =new SqlConnection(ConfigurationManager.ConnectionStrings["mydb"].ConnectionString);

    // Explicit static constructor to tell C# compiler
    // not to mark type as beforefieldinit
    static SingletonDB()
    {
    }

    SingletonDB()
    {
    }

    public static SingletonDB Instance
    {
        get
        {
            return instance;
        }
    }

    public static SqlConnection GetDBConnection()
    {
        return con;
    }
} 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-05-02T10:27:49.597

你的 Singleton 仍然关闭。

至于单例模式，请在此处查看 Jon Skeet 的非常好的详细描述：http: [//www.yoda.arachsys.com/csharp/singleton.html](http://www.yoda.arachsys.com/csharp/singleton.html)

为 SqlConnection 对象使用 Singleton 是一个非常非常糟糕的主意。没有理由这样做。

如果您试图避免“new SqlConnection()”或“connection.Open()”的性能损失，请注意，由于连接池在幕后进行，因此确实没有性能损失。***连接池处理昂贵***连接的打开/关闭。不是 SqlConnection 对象。

您将无法同时使用该连接打开多个 SqlDataReaders/Commands，并且如果您尝试与多个线程共享同一个连接对象，则会遇到线程阻塞问题。

单例模式是最被过度使用和滥用的模式，单例模式有许多您可能不知道的副作用。在这里很好地谈论单身人士的危险[http://www.youtube.com/watch?v=-FRm3VPhseI](http://www.youtube.com/watch?v=-FRm3VPhseI)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T11:49:01.050

在 .NET C# 中，你可以像这样写你的单例

```
 public class Singleton{
public static readonly Singleton Instance= new Singleton();
private Singleton(){} 
```

或对于多线程环境：

```
using System;

public sealed class Singleton
{
   private static volatile Singleton instance;
   private static object syncRoot = new Object();

   private Singleton() {}

   public static Singleton Instance
   {
      get 
      {
         if (instance == null) 
         {
            lock (syncRoot) 
            {
               if (instance == null) 
                  instance = new Singleton();
            }
         }

         return instance;
      }
   }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-02T06:37:46.763

连接本身不满足 Singleton 标准，因为您可以创建数据库连接对象的多个实例。根据定义，单例只能实例化一次。

您*可以*`SqlConnection`通过将示例更改为以下方式来制作单例的一部分：

```
public sealed class SingletonDB
{
    private static readonly SingletonDB instance = new SingletonDB();
    private readonly SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["mydb"].ConnectionString);

    // Explicit static constructor to tell C# compiler
    // not to mark type as beforefieldinit
    static SingletonDB()
    {
    }

    private SingletonDB()
    {
    }

    public static SingletonDB Instance
    {
        get
        {
            return instance;
        }
    }

    public SqlConnection GetDBConnection()
    {
        return con;
    }
} 
```

这样`SqlConnection`，您的`SingletonDB`班级使用的将只有一个`SqlConnection`，因此遵循单例模式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-04-21T20:22:53.093

单例意味着您创建的类只能实例化一次。因此，如果您希望这种情况发生，请做两件事：

1.  将构造函数设为私有。（这是为了防止其他类访问它。）
2.  将类实例化为：

    ```
    get
    {
     if(instance == null) //important coz, the class will be instantiated only on the first call
     {
       instance = new singletonDb;
     }
     return instance;
    } 
    ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-02T05:35:21.653

如果没有其他方法可以连接到数据库，并且无法覆盖此属性，我会说是。如果这就是你正在做的事情，那么你可能把这个单例的事情走得太远了。如果数据库暂时关闭并且您的应用程序失去连接怎么办？然后您必须重新启动您的应用程序才能再次使用数据库。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-02T05:35:41.170

我想，如果没有看到一些代码，我无法回答这个问题。如果您说您的应用程序中只有一个数据库连接实例，那么如果您可以保证您的应用程序将仅在一个线程上运行（或至少所有使用数据库连接的操作都可以），那么这可能会起作用，因为您可以't（据我所知）在同一连接上并行运行多个操作。

此外，如果这意味着您的应用程序将在两次使用之间保持连接打开，我建议您不要这样做。数据库连接是数据库服务器上的有限资源，因此您应该仅在需要时保持它们打开，然后再关闭它们。

# java - 最有前途的新 JSR？

> ID：814207
> 
> 赞同：1
> 
> 时间：2009-05-02T05:27:55.837
> 
> 标签：java, jsr

最近我选择了一个非常有用的 Web 服务框架，[Jersey](http://jersey.dev.java.net)（JAX-RS aka jsr-311；以及它的 Rock start 实现）和一个漂亮的验证库[Hibernate Validator](http://validation.hibernate.org)（“Bean Validation API”，jsr-303）。

这两个 jsr 都是相对较新的，这让我想知道我可能还缺少什么 - 鉴于有数百个 JSR，具有不同程度的进展、活动和潜力，要跟踪它们并不容易。

那么除了我提到的2之外，还有什么其他人认为有前途和值得关注的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-02T12:26:47.360

[`JSR-291`](http://www.osgi.org/JSR291/HomePage)[](http://www.osgi.org/JSR291/HomePage): Java™ SE 的动态组件支持

* * *

基于 OSGi 模型，将其集成到 Java 中会非常有趣。

但[`JSR-277`](http://tech.puredanger.com/java7#jsr277)最终选择了（Java 模块依赖项）......[在](http://alblue.blogspot.com/2008/11/rise-and-fall-of-osgi-and-jsr277.html)从当前的 JDK7 实现中删除之前。

与此同时，有[很多 OSGi 框架可供使用](https://stackoverflow.com/questions/560794/what-osgi-container-do-you-recommend)；）

* * *

如文章“模块依赖的表示”中所述：

> JSR 291 和 JSR 277 之间的主要区别之一是表示、满足和管理模块依赖关系的方式。
> 
> [...] 一个更重要的区别与需要能够预测模块集合的行为有关。这在管理模块的依赖关系时至关重要。
> 
> *   使用**JSR 291**，**外部管理系统能够读取每个模块中的依赖关系声明**并应用规范中的规则来确定这些模块将如何连接，是否有任何缺失的依赖关系，以及，如果有，如何这样可以满足依赖关系。
>     
>     
> *   使用 JSR **277**时，使用导入策略时的位置完全不同。**确定导入策略行为的唯一方法是执行**它。但即便如此，也不能保证每次运行时导入策略都会给出相同的结果。此外，如果缺少依赖项，则检查导入策略以确定如何满足缺少的依赖项是不可行的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-06T14:23:52.487

我希望在手机中更频繁地实现 JSR-239 OpenGL-ES Binding（带有漂亮的 NIO 缓冲区）和 JSR-256 Sensor API（至少与 OSGi 有一些关系）。

# iphone - 使用路径屏蔽图像

> ID：814208
> 
> 赞同：1
> 
> 时间：2009-05-02T05:28:12.263
> 
> 标签：iphone, objective-c, image, mask, cgcontext

如何使用路径屏蔽图像？我想要做的是画一条线`CGContextStrokePath`，只显示它下面的那些部分`CGLayerRef`。另外，你如何只擦除`CGLayerRef` 它下面的那些部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-12-09T23:56:49.993

另请查看 文档`CGContextSetBlendMode()`，尤其是与`kCGBlendModeClear`.

# java - Java Generic Binary Search Tree 类型问题

> ID：814212
> 
> 赞同：1
> 
> 时间：2009-05-02T05:31:56.390
> 
> 标签：java, generics, casting, binary-search-tree

我正在做这个让我感到困惑的家庭作业...

我提供了以下 BinarySearchTree 类

```
import java.util.NoSuchElementException;

/**
 *
 * @param <T> The type of data stored in the nodes of the tree, must implement  Comparable<T> with the compareTo method.
 */
public class BinarySearchTree<T extends Comparable<T>> {

    BinaryTree<T> tree;

    int size;
    public BinarySearchTree() {
        tree = new BinaryTree<T>();
        size = 0;
    }

    public boolean isEmpty() {
        return tree.isEmpty();
    }

    protected BinaryTree<T> recursiveSearch(BinaryTree<T> root, T key) {
        if (root == null) {
            return null;
        }
        int c = key.compareTo(root.data);
        if (c == 0) {
            return root;
        }
        if (c < 0) {
            return recursiveSearch(root.left, key);
        } else {
            return recursiveSearch(root.right, key);
        }
    }

    public T search(T key) {
        if (tree.isEmpty()) { 
            return null;
        }
        return recursiveSearch(tree, key).data;
    }

    public void insert(T item) {

        if (tree.isEmpty()) { // insert here
            tree.makeRoot(item);
            size++;
            return;
        }

        // do an iterative descent
        BinaryTree<T> root = tree;
        boolean done=false;
        BinaryTree<T> newNode = null;
        while (!done) {
            int c = item.compareTo(root.data);
            if (c == 0) { // duplicate found, cannot be inserted
                throw new OrderViolationException();
            }
            if (c < 0) { // insert in left subtree
                if (root.left == null) { // insert here as left child
                    newNode = new BinaryTree<T>();
                    root.left = newNode;
                    done=true;
                } else { // go further down left subtree
                    root = root.left;
                }
            } else { // insert in right subtree
                if (root.right == null) { // insert here as right child 
                    newNode = new BinaryTree<T>();
                    root.right = newNode;
                    done=true;
                } else { // go further down right subtree
                    root = root.right;
                }
            }
        }
        // set fields of new node
        newNode.data = item;
        newNode.parent = root;
        size++;
    }

    /**
     * @param deleteNode Node whose parent will receive new node as right or left child,
     *                  depending on whether this node is its parent's right or left child. 
     * @param attach The node to be attached to parent of deleteNode.
     */
    protected void deleteHere(BinaryTree<T> deleteNode, BinaryTree<T> attach) {

        // deleteNode has only one subtree, attach
        BinaryTree<T> parent = deleteNode.parent;
        deleteNode.clear();  // clear the fields
        if (parent == null) {
            return;
        }
        if (deleteNode == parent.left) {
            // left child of parent, attach as left subtree
            parent.detachLeft();
            parent.attachLeft(attach);
            return;
        }
        // attach as right subtree
        parent.detachRight();
        parent.attachRight(attach);
    }

    protected BinaryTree<T> findPredecessor(BinaryTree<T> node) {
        if (node.left == null) {
            return null;
        }
        BinaryTree<T> pred = node.left; // turn left once
        while (pred.right != null) { // keep turning right
            pred = pred.right;
        }
        return pred;
    }

    public T delete(T key) {
        if (tree.isEmpty()) { // can't delete from an empty tree
            throw new NoSuchElementException();
        }

        // find node containing key 
        BinaryTree<T> deleteNode = recursiveSearch(tree, key);
        if (deleteNode == null) { // data not found, can't delete
            throw new NoSuchElementException();
        }

        BinaryTree<T> hold;

        // case c: deleteNode has exactly two subtrees
        if (deleteNode.right != null && deleteNode.left != null) {
            hold = findPredecessor(deleteNode);
            deleteNode.data = hold.data;
            deleteNode = hold; // fall through to case a or b
        }

        // case a: deleteNode is a leaf
        if (deleteNode.left == null && deleteNode.right == null) {
            deleteHere(deleteNode, null);
            size--;
            return deleteNode.data;
        }       

        // case b: deleteNode has exactly one subtree
        if (deleteNode.right != null) {
            hold = deleteNode.right;
            deleteNode.right = null;
        } else {
            hold = deleteNode.left;
            deleteNode.left = null;
        }

        deleteHere(deleteNode,hold);
        if (tree == deleteNode) { // root deleted
            tree = hold;
        }
        size--;
        return deleteNode.data;
    }

    public T minKey() {
        if (tree.data == null) { // tree empty, can't find min value
            throw new NoSuchElementException();
        }

        BinaryTree<T> root = tree;
        T min=root.data;
        root = root.left;  // turn left once
        while (root != null) {  // keep going left to leftmost node
            min = root.data;
            root = root.left;
        }
        return min;
    }

    public T maxKey() {
        if (tree.getData() == null) { // tree empty, can't find max value
            throw new NoSuchElementException();
        }

        BinaryTree<T> root=tree;
        T max=root.data;
        root = root.right;  // turn right once
        while (root != null) { // keep going to rightmost node
            max = root.data;
            root = root.right;
        }
        return max;
    }

    public int size() {
        return size;
    }

    protected void recursivePreOrder(BinaryTree<T> root, Visitor<T> visitor) {
        if (root != null) {
            visitor.visit(root);
            recursivePreOrder(root.left, visitor);
            recursivePreOrder(root.right, visitor);
        }
    }

    public void preOrder(Visitor<T> visitor) {
        if (tree.isEmpty()) {
            return;
        }
        recursivePreOrder(tree, visitor);
    }

    protected void recursiveInOrder(BinaryTree<T> root, Visitor<T> visitor) {
        if (root != null) {
            recursiveInOrder(root.left, visitor);
            visitor.visit(root);
            recursiveInOrder(root.right, visitor);
        }
    }

    public void inOrder(Visitor<T> visitor) {
        if (tree.isEmpty()) {   
            return;
        }
        recursiveInOrder(tree, visitor);
    }

    protected void recursivePostOrder(BinaryTree<T> root, Visitor<T> visitor) {
        if (root != null) {
            recursivePostOrder(root.left, visitor);
            recursivePostOrder(root.right, visitor);
            visitor.visit(root);
        }
    }

    public void postOrder(Visitor<T> visitor) {
        if (tree.isEmpty()) {
            return;
        }
        recursivePostOrder(tree, visitor);
    }
} 
```

==================================================== ===============================

现在我有另一个班级学生......我想创建一个学生对象的二叉搜索树......

```
BinarySearchTree<Student> tree = new BinarySearchTree<Student>(); 
```

但是，当我这样做时，我收到以下错误：

有界不匹配：Student 类型不是 BinarySearchTree 类型的有界参数 > 的有效替代品

任何想法这里发生了什么......我无法弄清楚。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-02T05:57:54.580

```
 public class BinarySearchTree<T extends Comparable<T>> 
```

一个正式的泛型参数，在您的情况下为 T，列出了类成为有效 T 所需的内容。在您的情况下，您说过，“要成为有效的 T，类必须实现 Comparable”（关键字是“扩展”，但实际上这意味着“扩展或实现”。）

在您的实例中，T 是学生。如果我们用 Student 代替 T：

```
public class BinarySearchTree<Student extends Comparable<Student>> 
```

这是真的吗？Student 真的实现了 Comparable 吗？

如果是这样，Student 就符合作为 T 的要求，因此您可以使用 Student 作为形参 T 的实参。

如果没有，你会得到你看到的编译器的抱怨。

实际上，为了涵盖更复杂的情况，即子类的 Comparable 实现由超类完成，更一般的形式是：

```
 public class BinarySearchTree<T extends Comparable<? super T > > 
```

所以你需要让Student实现Comparable<Student>。

请注意，我*没有*说编译器正在寻找`Student.compareTo`. 它甚至没有那么远。它正在查看是否将 T（在您的情况下为 Student）声明为实现 Comparable<T>（在您的情况下为 Comparable<Student>）。

现在添加`implements Comparable< Student >`到 Student*也*会使编译器确保`public int compareTo`Student 上有一个方法。但是没有“实现 Comparable”，即使编译器知道有一个方法`Student.compareTo`，它也不知道那`compareTo`是`Comparable.compareTo`.

（换句话说，我们正在寻找已声明的实现，而不仅仅是恰好有一个具有正确名称和签名的方法。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T05:41:28.130

Student 类是否实现了 Comparable？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T05:56:12.963

> 但我不太确定如何实现 compareTo 方法。

基本上它类似于以下内容。您必须决定订购的工作方式。

```
class Student implements Comparable<Student> {

    //...

    int compareTo(Student other) {
        // return some negative number if this object is less than other
        // return 0 if this object is equal to other
        // return some positive number if this object is greater than other
    }
} 
```

# ruby - 在 ruby 中查找任意正则表达式的最后一个（最右边的）匹配项

> ID：814213
> 
> 赞同：6
> 
> 时间：2009-05-02T05:32:20.320
> 
> 标签：ruby, regex, reverse

我正在使用 ruby​​ 中的文本编辑器，我需要使用用户提供的正则表达式模式来支持“查找”功能。这是一个简单（熟悉）的用例：

> Joe User 正在编辑一个文本文件，并将光标定位在文件中间的某个位置。他想从当前光标位置*向后*搜索与任意正则表达式匹配的最近子字符串。

我认为这个问题相当于将用户的模式应用于文件中光标位置之前的整个字符串。当然，我可以遍历文件开头的所有匹配项并使用最后一个匹配项，但这似乎效率低下……最好搜索“从右到左”，但我还没有找到办法这与红宝石正则表达式。你能帮我吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-02T05:51:58.870

在您的字符串上使用 rindex 方法。像这样：

```
>> 'ssBssBss'.rindex(/B/)
=> 5 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-02T05:54:12.483

由于 .* 的贪婪本性， looking for`.*(foo)`还应该找到最右边的 foo（但 rindex 可能更快——需要一个微基准来检查！）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-02T06:02:57.953

我认为 rindex 是要走的路。看起来 rindex 实际上会向后遍历字符串。查看[string.c的第 957 行](http://www.ruby-doc.org/doxygen/1.8.1/string_8c-source.html)

看起来有人在 2001 年想出了一种在 PERL 中[反转正则表达式](http://www.perl.com/pub/a/2001/05/01/expressions.html)的方法。所以你会反转一个字符串并反转一个正则表达式......然后使用从左到右的方法。

我相信现在这有点过头了，你可以选择 rindex

# javascript - GInfoWindow maxContent 取决于当前选择的选项卡

> ID：814216
> 
> 赞同：2
> 
> 时间：2009-05-02T05:34:32.513
> 
> 标签：javascript, google-maps

我正在使用 Google Maps API 在其上显示地图和一些标记。当用户单击标记时，我使用 GMap2 对象的 openInfoWindowTabsHtml 来显示带有标签的小气球。我还将 maxContent 传递给 openInfoWindowTabsHtml，因此气球变得可最大化。

现在我的问题是，我希望最大化的内容取决于当前选择的选项卡（基本上我的最大化内容是我在气球中显示的“短内容”的扩展版本）。

不过，我真的没有办法做到这一点。我正在考虑在信息窗口上捕捉最大化点击事件，并在它最大化之前修改maxContent。但是如何修改maxContent呢？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-01T13:27:07.630

我最后所做的是使用开源库 gmaps-utility-library 中的 tabbedmaxcontent.js - [http://code.google.com/p/gmaps-utility-library](http://code.google.com/p/gmaps-utility-library) - 所以最大化的气球也有标签。

# css - 如何使用有效的 CSS 定位 IE7 和 IE8？

> ID：814219
> 
> 赞同：65
> 
> 时间：2009-05-02T05:38:24.783
> 
> 标签：css, internet-explorer, internet-explorer-8, web-standards

我想使用符合 W3C 的 CSS 来定位 IE7 和 IE8。有时修复一个版本的 CSS 并不能修复另一个版本。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2010-12-03T19:45:04.557

**使用 HTML 和 CSS 显式定位 IE 版本，无需 hack**

如果您不想在 CSS 中添加 hack，请使用此方法。为元素添加一个浏览器唯一的类，`<html>`以便您以后可以根据浏览器进行选择。

例子

```
<!doctype html>
<!--[if IE]><![endif]-->
<!--[if lt IE 7 ]> <html lang="en" class="ie6">    <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="ie7">    <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="ie8">    <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="ie9">    <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->
    <head></head>
    <body></body>
</html> 
```

然后在您的 CSS 中，您可以非常严格地访问您的目标浏览器。

例子

```
.ie6 body { 
    border:1px solid red;
}
.ie7 body { 
    border:1px solid blue;
} 
```

有关更多信息，请查看[http://html5boilerplate.com/](http://html5boilerplate.com/)

**使用 CSS“黑客”定位 IE 版本**

更重要的是，这里有一些技巧可以让你瞄准 IE 版本。

使用 "\9" 来定位 IE8 及以下版本。
使用“*”来定位 IE7 及以下版本。
使用“_”来定位 IE6。

例子：

```
body { 
border:1px solid red; /* standard */
border:1px solid blue\9; /* IE8 and below */
*border:1px solid orange; /* IE7 and below */
_border:1px solid blue; /* IE6 */
} 
```

**更新：目标 IE10**

IE10 无法识别条件语句，因此您可以使用它来将“ie10”类应用于`<html>`元素

```
<!doctype html>
    <html lang="en">
    <!--[if !IE]><!--><script>if (/*@cc_on!@*/false) {document.documentElement.className+=' ie10';}</script><!--<![endif]-->
        <head></head>
        <body></body>
</html> 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-05-02T05:45:33.503

我建议您查看有条件的评论，并为您遇到问题的 IE 制作单独的表格。

```
 <!--[if IE 7]>
   <link rel="stylesheet" type="text/css" href="ie7.css" />
 <![endif]--> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-01-07T21:27:56.207

## 你的问题的答案

选择除 IE8 及以下版本之外的所有浏览器的一种完全有效的方法是使用`:root`选择器。由于 IE 8 及以下版本不支持`:root`，因此包含它的选择器将被忽略。这意味着您可以执行以下操作：

```
p {color:red;}
:root p {color:blue;} 
```

这仍然是完全有效的 CSS，但它确实会导致 IE8 及更低版本呈现不同的样式。

## 其他技巧

这是我能找到的所有完全有效的 CSS 浏览器特定选择器的列表，*除了*一些看起来非常多余的选择器，例如只选择一种类型的古代浏览器（[1](https://en.wikipedia.org/wiki/CSS_hack#body:empty_hack)、[2](https://en.wikipedia.org/wiki/CSS_hack#Commented_backslash)）：

```
/******  First the hacks that target certain specific browsers  ******/
* html p                        {color:red;} /* IE 6- */
*+html p                        {color:red;} /* IE 7 only */
@media screen and (-webkit-min-device-pixel-ratio:0) {
    p                           {color:red;}
}                                            /* Chrome, Safari 3+ */
p, body:-moz-any-link           {color:red;} /* Firefox 1+ */
:-webkit-any(html) p            {color:red;} /* Chrome 12+, Safari 5.1.3+ */
:-moz-any(html) p               {color:red;} /* Firefox 4+ */

/****** And then the hacks that target all but certain browsers ******/
html> body p                  {color:green;} /* not: IE<7 */
head~body p                   {color:green;} /* not: IE<7, Opera<9, Safari<3 */
html:first-child p            {color:green;} /* not: IE<7, Opera<9.5, Safari&Chrome<4, FF<3 */
html>/**/body p               {color:green;} /* not: IE<8 */
body:first-of-type p          {color:green;} /* not: IE<9, Opera<9, Safari<3, FF<3.5 */
:not([ie8min]) p              {color:green;} /* not: IE<9, Opera<9.5, Safari<3.2 */
body:not([oldbrowser]) p      {color:green;} /* not: IE<9, Opera<9.5, Safari<3.2 */ 
```

## 学分和来源：

*   [http://css-tricks.com/snippets/css/browser-specific-hacks/](http://css-tricks.com/snippets/css/browser-specific-hacks/)
*   [https://en.wikipedia.org/wiki/CSS_hack](https://en.wikipedia.org/wiki/CSS_hack)
*   [http://www.webdevout.net/css-hacks](http://www.webdevout.net/css-hacks)
*   MDN [`:first-child`](https://developer.mozilla.org/en-US/docs/Web/CSS/:first-child#Browser_compatibility)：； [`:root`](https://developer.mozilla.org/en-US/docs/Web/CSS/:root#Browser_compatibility); [`:first-of-type`](https://developer.mozilla.org/en-US/docs/Web/CSS/:first-of-type#Browser_compatibility); [`:not()`](https://developer.mozilla.org/en-US/docs/Web/CSS/:not#Browser_compatibility); [`:any()`](https://developer.mozilla.org/en-US/docs/Web/CSS/:any#Browser_compatibility); [`* ~ *`](https://developer.mozilla.org/en-US/docs/Web/CSS/General_sibling_selectors#Browser_compatibility)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-01-06T12:29:45.007

有关截至 2015 年的更完整列表：

## 即 6

```
* html .ie6 {property:value;} 
```

或者

```
.ie6 { _property:value;} 
```

## 即 7

```
*+html .ie7 {property:value;} 
```

或者

```
*:first-child+html .ie7 {property:value;} 
```

## IE 6 和 7

```
@media screen\9 {
    .ie67 {property:value;}
} 
```

或者

```
.ie67 { *property:value;} 
```

或者

```
.ie67 { #property:value;} 
```

## 即 6、7 和 8

```
@media \0screen\,screen\9 {
    .ie678 {property:value;}
} 
```

## 即 8

```
html>/**/body .ie8 {property:value;} 
```

或者

```
@media \0screen {
    .ie8 {property:value;}
} 
```

## 仅限 IE 8 标准模式

```
.ie8 { property /*\**/: value\9 } 
```

## 即 8,9 和 10

```
@media screen\0 {
    .ie8910 {property:value;}
} 
```

## 仅限 IE 9

```
@media screen and (min-width:0) and (min-resolution: .001dpcm) { 
 // IE9 CSS
 .ie9{property:value;}
} 
```

## IE 9 及以上

```
@media screen and (min-width:0) and (min-resolution: +72dpi) {
  // IE9+ CSS
  .ie9up{property:value;}
} 
```

## IE 9 和 10

```
@media screen and (min-width:0) {
    .ie910{property:value;}
} 
```

## 仅限 IE 10

```
_:-ms-lang(x), .ie10 { property:value\9; } 
```

## IE 10 及以上

```
_:-ms-lang(x), .ie10up { property:value; } 
```

或者

```
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
   .ie10up{property:value;}
} 
```

## IE 11（及更高版本..）

```
_:-ms-fullscreen, :root .ie11up { property:value; } 
```

* * *

## Javascript 替代品

### [现代化](http://modernizr.com/)

> Modernizr 在页面加载时快速运行以检测功能；然后它创建一个带有结果的 JavaScript 对象，并将类添加到 html 元素

### [用户代理选择](http://rog.ie/blog/html5-boilerplate-addon)

Javascript：

```
var b = document.documentElement;
        b.setAttribute('data-useragent',  navigator.userAgent);
        b.setAttribute('data-platform', navigator.platform );
        b.className += ((!!('ontouchstart' in window) || !!('onmsgesturechange' in window))?' touch':''); 
```

在元素中添加（例如）以下`html`内容：

```
data-useragent='Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C)'
data-platform='Win32' 
```

允许非常有针对性的 CSS 选择器，例如：

```
html[data-useragent*='Chrome/13.0'] .nav{
    background:url(img/radial_grad.png) center bottom no-repeat;
} 
```

* * *

## 脚注

如果可能，请避免浏览器定位。识别并修复您发现的任何问题。支持[**渐进增强**](http://en.wikipedia.org/wiki/Progressive_enhancement)和[**优雅降级**](http://en.wikipedia.org/wiki/Fault_tolerance)。考虑到这一点，这是一个“理想世界”的场景，并非总是可以在生产环境中获得，因此——上述内容应该有助于提供一些不错的选择。

* * *

### 归因/基本阅读

*   [基思·克拉克](http://keithclark.co.uk/articles/moving-ie-specific-css-into-media-blocks/)
*   [保罗爱尔兰人](http://www.paulirish.com/2009/browser-specific-css-hacks/)
*   [网络虔诚](http://www.webdevout.net/css-hacks)
*   [扳手](http://www.thespanner.co.uk/2009/01/29/detecting-browsers-javascript-hacks/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-02T05:44:29.450

好吧，您不必担心 IE7 代码无法在 IE8 中运行，因为 IE8 具有兼容模式（它可以呈现与 IE7 相同的页面）。但是，如果您仍然想针对不同版本的 IE，现在已经使用了一段时间的方法是使用[条件注释](http://msdn.microsoft.com/en-us/library/ms537512(VS.85).aspx)或[以 * 开始您的 css 规则以针对 IE7 及以下](http://www.ejeliot.com/blog/63)版本。或者您可以关注服务器上的用户代理并根据该信息提供不同的 CSS 文件。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-02T06:17:14.910

实际问题不是 IE8，而是您用于早期版本 IE 的 hack。

IE8 非常接近标准兼容，因此您根本不需要任何 hack，也许只需要一些调整。问题是如果你对 IE6 和 IE7 使用了一些 hack；您必须确保它们仅适用于这些版本而不适用于 IE8。

前段时间我做了我们公司的网站兼容IE8。我真正改变的唯一一件事是添加告诉 IE 页面符合 IE8 的元标记......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-02T15:33:49.423

我是用 Javascript 做的。我在 html 元素中添加了三个 css 类：

```
ie<version>
lte-ie<version>
lt-ie<version + 1> 
```

所以对于 IE7，它增加了`ie7`, `lte-ie7`..., `lt-ie8`...

这是javascript代码：

```
(function () {
    function getIEVersion() {
        var ua = window.navigator.userAgent;
        var msie = ua.indexOf('MSIE ');
        var trident = ua.indexOf('Trident/');

        if (msie > 0) {
            // IE 10 or older => return version number
            return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);
        } else if (trident > 0) {
            // IE 11 (or newer) => return version number
            var rv = ua.indexOf('rv:');
            return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);
        } else {
            return NaN;
        }
    };

    var ieVersion = getIEVersion();

    if (!isNaN(ieVersion)) { // if it is IE
        var minVersion = 6;
        var maxVersion = 13; // adjust this appropriately

        if (ieVersion >= minVersion && ieVersion <= maxVersion) {
            var htmlElem = document.getElementsByTagName('html').item(0);

            var addHtmlClass = function (className) { // define function to add class to 'html' element
                htmlElem.className += ' ' + className;
            };

            addHtmlClass('ie' + ieVersion); // add current version
            addHtmlClass('lte-ie' + ieVersion);

            if (ieVersion < maxVersion) {
                for (var i = ieVersion + 1; i <= maxVersion; ++i) {
                    addHtmlClass('lte-ie' + i);
                    addHtmlClass('lt-ie' + i);
                }
            }
        }
    }
})(); 
```

此后，您`.ie<version>`在样式表中使用 css 类，如 potench 所述。

[（在检查用户是否使用带有 jQ​​uery 的 IE](https://stackoverflow.com/questions/19999388/jquery-check-if-user-is-using-ie)中使用了 Mario 的 detectIE 函数）

拥有 lte-ie8 和 lt-ie8 等的好处是它可以针对所有小于或等于 IE9 的浏览器，即 IE7 - IE9。

# c# - 如何使用 mshtml 将复选框设置为“已选中”？

> ID：814220
> 
> 赞同：2
> 
> 时间：2009-05-02T05:38:50.350
> 
> 标签：c#, .net, html, webforms, mshtml

我可以用 mshtml 做大部分我需要做的事情，但我有点不知道如何将复选框输入元素设置为“已选中”。情况是这样的...

```
IHTMLElementCollection inputElements = (IHTMLElementCollection)doc.all.tags("input");
foreach (IHTMLElement el in inputElements)
{
    string elementHtml = el.outerHTML;
    string termsOfServiceIdentifier = "id=chkUTOS_ver2";

    //  select the Terms of Service checkbox
    if (elementHtml.Contains(termsOfServiceIdentifier)) 
    {
        HTMLInputElement chkTOS = (HTMLInputElement)el;
        chkTOS.@checked = true;  //  that's the solution. Thanks Wayne.
     }
     else
     {
        //  do nothing - we're not interested in this element
     }
} 
```

提前感谢您的帮助！

格雷格

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-02T05:46:19.087

[HTMLInputElement](http://msdn.microsoft.com/en-us/library/dd347093(VS.85).aspx)将 Checked 属性公开为布尔值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T05:44:56.360

在纯 JavaScript 中，复选框元素有一个`checked`属性。所以[在纯 JavaScript 中] 你可以这样写：

```
document.getElementById("myCheckbox").checked = true; 
```

我不知道 .NET 或您在那里使用的任何东西，但他们可能会以类似的方式进行操作。

史蒂夫

# asp.net-mvc - PartialView 呈现新页面而不是在 div 中

> ID：814224
> 
> 赞同：2
> 
> 时间：2009-05-02T05:40:59.800
> 
> 标签：asp.net-mvc

我以前遇到过这个问题，我一生都不记得如何解决它或我在哪里搜索过它。

我从一个动作传回一个局部视图

```
 return PartialView("CommentsListControl", recipe.Comments); 
```

但这会加载一个新网页而不是我的 div 为什么？？？？？？？？？

```
<table width="100%">
    <tr><td>
        <div id="divComments">
            <% using (Ajax.BeginForm("CreateComment", new AjaxOptions { UpdateTargetId = "divCommentsList", InsertionMode = InsertionMode.Replace }))
               { %>
            <textarea id="comments" name="comments" rows="3" cols="60"></textarea>
            <table width="100%"><tr><td align="right">
                <a href="#" id="savecomment">Save Comment</a>
                <%= Html.Hidden("recipeid", Model.RecipeID) %>
            </td></tr>
            </table>
            <% } %>
        </div>
    </td></tr>
    <tr><td>
        <div id="divCommentsList">
            <% Html.RenderPartial("CommentsListControl", Model.Comments); %>
        </div>
    </td></tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T06:17:19.963

您展示的示例在表单上没有提交按钮。在 WebForms 中，您可以使用“asp:Hyperlink”控件生成一个看起来像提交表单的链接，但那是因为 WebForms 正在为您实现 JavaScript。在 MVC 中，你必须自己做。尝试将“保存评论”链接换成提交按钮：

```
<input type="submit" value="Save Comment" /> 
```

然后使用 CSS 将按钮样式设置为您心中的内容。

# python - Python lxml屏幕抓取？

> ID：814227
> 
> 赞同：1
> 
> 时间：2009-05-02T05:44:05.253
> 
> 标签：python, html, parsing, screen-scraping, lxml

我需要用 python 做一些 HTML 解析。经过一些研究，lxml 似乎是我最好的选择，但我很难找到可以帮助我完成我想做的事情的例子。这就是我听到的原因。我需要为所有可见文本抓取一个页面.. 去掉所有标签和 javascript.. 我需要它给我留下可见的文本。听起来很简单.. 我用 HTMLParser 做到了，但它不能很好地处理 javascript

```
class HTML2Text(HTMLParser.HTMLParser):
    def __init__(self):
        HTMLParser.HTMLParser.__init__(self)
        self.output = cStringIO.StringIO()

    def get_text(self):
        return self.output.getvalue()

    def handle_data(self, data):
        self.output.write(data)

def ParseHTML(source):
    p = HTML2Text()
    p.feed(source)
    text = p.get_text()
    return text 
```

任何关于使用 lxml 或更好的方法来做到这一点的想法 HTMLParser .. HTMLParser 将是最好的，因为不需要额外的库 .. 谢谢大家

斯科特 F。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-02T05:47:06.650

我知道没有屏幕抓取库“与 Javascript 配合得很好”——很难预测 JS 可以动态、有条件地改变 HTML DOM 的所有方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-04-08T21:02:24.197

[scrape.py](http://zesty.ca/scrape/)可以为你做到这一点。

它很简单：

```
import scrape
s = scrape.Session()
s.go('yoursite.com')
print s.doc.text 
```

跳转到本视频的 2:40 左右，从 scrape.py 的创建者那里获得精彩的概述： [pycon.blip.tv/file/3261277](http://pycon.blip.tv/file/3261277)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T09:40:04.577

我知道没有 Python HTML 解析库可以处理正在解析的页面中运行的 javascript。由于 Alex Martelli 等人给出的原因，这还不够“简单”。

对于这个任务，您可能需要考虑到一个更高的层次，而不仅仅是解析 HTML 并查看 Web 应用程序测试框架。

两个可以执行 javascript 并且基于 Python 或可以与 Python 交互：

*   [帕米](http://pamie.sourceforge.net/)
*   [硒](http://seleniumhq.org/)

不幸的是，我不确定这些框架的“单元测试”方向是否真的会让你刮掉可见的文本。

所以唯一的其他解决方案是自己做，比如将[python-spidermonkey](http://github.com/davisp/python-spidermonkey/tree/master)集成到你的应用程序中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-02T08:33:29.900

BeautifulSoup ( [http://www.crummy.com/software/BeautifulSoup/](http://www.crummy.com/software/BeautifulSoup/) ) 通常是 Python html 抓取问题的正确答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-05T14:47:08.087

我认为，您的代码在某种程度上很聪明且非常灵活。

简单地添加 handle_starttag() 和 handle_endtag() 来抑制 <script> 块怎么样？

```
class HTML2Text(HTMLParser.HTMLParser):
    def __init__(self):
        HTMLParser.HTMLParser.__init__(self)
        self.output = cStringIO.StringIO()
        self.is_in_script = False
    def get_text(self):
        return self.output.getvalue()
    def handle_data(self, data):
        if not self.is_in_script:
            self.output.write(data)
    def handle_starttag(self, tag, attrs):
        if tag == "script":
            self.is_in_script = True
    def handle_endtag(self, tag):
        if tag == "script":
            self.is_in_script = False

def ParseHTML(source):
    p = HTML2Text()
    p.feed(source)
    text = p.get_text()
    return text 
```

# php - URL重写问题

> ID：814234
> 
> 赞同：0
> 
> 时间：2009-05-02T05:49:48.890
> 
> 标签：php, url-rewriting

我在 php 中创建了一个网站。

数据库中存储了一个故事标题列表，当用户单击其中的任何标题时，用户将被重定向到一个带有查询字符串的页面。比如story.php?id=25

这意味着现在将显示 id 为 25 的故事。现在我想重写 URL，但是当我重写它时会出现问题。

在 story.php 页面中，我正在读取 $_GET['id'] 之类的查询字符串。但是在 URL 重写之后，我无法像这样读取它。任何机构都可以建议做什么吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T05:56:45.020

您可以使用 .htaccess 重写长 URL 服务器端，但不重定向浏览器（因此它仍然在地址栏中显示长 URL），例如：

```
 RewriteEngine on
 RewriteRule story\/(\d+)\/(.+) story.php?id=$1 
```

只是让你的长链接看起来像 www.site.com/story/25/This_is_the_title

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T15:26:35.930

如果你对你的 url 字符串做了一些调整，你可以这样做。

[http://www.domain.com/story.php?story=25&title=some_name](http://www.domain.com/story.php?story=25&title=some_name)

重写后可能是这样。

[http://www.domain.com/25/some_name.html](http://www.domain.com/25/some_name.html)

**代码：**

```
RewriteEngine On
RewriteRule ^story/([^/]*)/([^/]*)\.html$ /story.php?story=$1&title=$2 [L] 
```

# sql-server - 如何在不损坏目标数据库中的数据的情况下将表模式从一个数据库迁移到另一个数据库？

> ID：814237
> 
> 赞同：0
> 
> 时间：2009-05-02T05:51:22.583
> 
> 标签：sql-server, schema, migration

如何在不损坏目标数据库中的数据的情况下将表模式从一个数据库迁移到另一个数据库？

我想将我的数据从我部署的开发副本移动到实时数据库，并想运行一些脚本来做到这一点。我需要升级某些表的架构并创建其他表。我现在想，我必须根据部署检查目标数据库中的每个表，然后复制新表，但这将非常乏味。关于如何做到这一点有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T06:04:56.420

查看 Redgate 的 SQL 比较工具

[http://www.red-gate.com/products/SQL_Compare/index.htm](http://www.red-gate.com/products/SQL_Compare/index.htm)

您应该能够比较两个数据库，然后根据差异生成脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T06:04:48.353

您可以使用工具来生成脚本。Redbrick 有一个，Erwin 也可以做 deltas。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-02T08:29:20.940

除了优秀的 Red-Gate SQL 比较之外，另一个是[ApexSQL 的 SQL Diff](http://www.apexsql.com/sql_tools_diff.asp)。

如果您还需要比较和同步来自各种来源的数据，ApexSQL 也有一个 SQL 数据差异。

强烈推荐！

马克

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-09T20:15:17.693

除了上面提到的 RedGate 软件，**Embarcadero Change Manager**可以同时进行模式和数据实例比较，然后为模式生成更改脚本和为数据生成 DML 脚本，以使两个数据库同步。

# css - 针对 Safari 进行强大的 CSS 开发我有哪些选择

> ID：814241
> 
> 赞同：0
> 
> 时间：2009-05-02T05:52:05.780
> 
> 标签：css, safari

我可以使用 FireFox 和 FireBug，在一个窗格中，我可以实时打开一个 .css 文件，当我进行编辑时，我可以看到这些编辑反映在 FireFox 中。这是一个非常方便且有价值的功能。

在没有开始就浏览器进行辩论的情况下，我希望能够在 Safari 中做同样的事情。除了我在这台笔记本电脑上的显示器太小之外，css 的实时开发帮助我以非常好的速度推进事情。

虽然我几乎可以肯定任何 Safari 的输入管理器都不会得到正式支持，但我对此表示同意。我一直在玩“Web Inspector”，但据我所知，这不符合我的需求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T06:03:44.567

您使用的是哪个版本的 Safari？我推荐使用 Safari 4 Public Beta，它有一个全新的 Web Inspector，可以让你实时编辑 DOM（不过我不确定你是否真的可以用它来编辑 CSS 文件）。

史蒂夫

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T06:04:06.483

你是在 Mac 上做这个吗？你可以试试[CSSEdit](http://macrabbit.com/cssedit/)。它不是免费的，但有一个内置的 webkit 预览

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-02T05:55:41.433

获取最新版本的[webkit](http://webkit.org/)，它具有更强大的 Web Inspector 版本，您可以将其与最新的 Safari（打开两个浏览器）一起使用来调试 Safari。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-02T05:55:00.610

您可以尝试安装[FirebugLite](http://getfirebug.com/lite.html)。

# zend-framework - 如何从 Zend 验证错误中输出 HTML？

> ID：814243
> 
> 赞同：7
> 
> 时间：2009-05-02T05:54:37.070
> 
> 标签：zend-framework, zend-form, zend-validate

我试图让这个 Zend Validator 输出一个链接到 resetpass 表单。目前，它只是将 HTML 输出为文本。关于如何将其作为 HTML 写入页面的任何想法？

谢谢！

这是我的代码：

```
 protected $_authAdapter;
    protected $_messageTemplates = array(
            self::NOT_UNIQUE => 'This email has already been registered! <a href=\'/user/resetpass/\'>Need to reset your password?</a>'
    );

    public function isValid($value, $context=null)
    {
        $value = (string) $value;
        $users = new Users(array('db' => 'tdb'));
        if($users->userExists($value)){
            $this->_error(self::NOT_UNIQUE);
            return false;
        }
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-03-10T16:18:33.213

在 1.7 版上，这是访问验证器并禁用转义的正确方法：

$zendelement->getDecorator('Errors')->setOption('escape', false);

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-02T10:55:25.333

您必须将配置选项 'escape' = false 传递给 Zend_Form_Decorator_Errors()。

大多数情况下，这个是自动加载的，所以你必须请求它。

```
$zendelement->getDecorator('Zend_Form_Decorator_Errors')->setOption('escape', false); 
```

# internet-explorer - 使用 XSLT 创建条件注释？

> ID：814249
> 
> 赞同：12
> 
> 时间：2009-05-02T05:57:10.777
> 
> 标签：internet-explorer, xslt, conditional-comments

我想在 XSLT中创建[条件注释。](http://msdn.microsoft.com/en-us/library/ms537512(VS.85).aspx)

但是当我使用这个时：

```
<!-- [If IE7] [endif] --> 
```

在 中`<xsl:comment>`，XSLT 在呈现时将其从输出中删除。

有没有办法在 XSLT 中创建条件注释？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-02T06:11:50.880

只需使用`<xsl:comment>`标签并将您的评论包含在标签中。

例如：

```
<xsl:if test="@id = '1'">
  <xsl:comment>
    <![CDATA[[if IE]><![endif]]]>
  </xsl:comment>
</xsl:if> 
```

[Taming Your Multiple IE Standalones](http://www.positioniseverything.net/articles/multiIE.html)是一篇关于这个主题的好文章。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2010-10-07T13:15:07.617

上述解决方案假定条件注释内的内容不包含任何 XSLT 参数。在下面的示例中，我们需要`$DATA_ROOT_PATH`处理一个参数，以便为我们提供 CSS 文件的正确位置。在这种情况下`<xsl:comment/>`是不合适的。我们必须使用`<xsl:text/>`和禁用输出转义。

仅当我们使用 IE7 时，此处的示例才会包含 CSS 文件。

```
<xsl:text disable-output-escaping="yes">&lt;!--[if IE 7]&gt;</xsl:text>
  <link rel="stylesheet" type="text/css" href="{$DATA_ROOT_PATH}/resources/css/ie7.css" media="screen"/>
<xsl:text disable-output-escaping="yes">&lt;![endif]--&gt;</xsl:text> 
```

如果`$DATA_ROOT_PATH`= */example* ，代码示例将生成如下输出：

```
<!--[if IE 7]>
  <link rel="stylesheet" type="text/css"
        href="/example/resources/css/ie7.css"
        media="screen" />
<![endif]--> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T18:38:49.267

This was the only way I was able to get my ie stylesheet to be applied:

```
 <xsl:comment>[if IE]>
      &lt;link rel="stylesheet" type="text/css" href="ie.css" />
      &lt;![endif]</xsl:comment> 
```

I had to make sure there is no space between my text and the xsl:comment opening/closing tags

# c# - Linq to Lucene：“Lucene Term 的谓词不能是空字符串。”

> ID：814269
> 
> 赞同：0
> 
> 时间：2009-05-02T06:16:15.783
> 
> 标签：c#, linq-to-sql, lucene, lucene.net, linq-to-lucene

我正在尝试在我的项目中实现 Linq To Lucene，但是在尝试搜索某些内容时，我总是得到一个`Enumeration yielded no results`结果，当我调试并尝试`[IndexContext].[TableProperty]`在`Watch`窗口中打开我时，我收到以下消息：

> Lucene Term 的谓词不能是空字符串。

我曾尝试在 Google 中搜索此内容，但显然它没有返回任何结果！

有没有人遇到过这个消息？我该如何解决？因为目前它没有返回任何数据

**[更新]**

显然问题是当`Between`我使用. 举个例子：`Match``Like``Lucine.Linq.Extensions`

```
var db = new MusicRepo_DB_IndexContext(@"C:\MusicRepoDB_index",
                                       new MusicRepo_DBDataContext()); 
```

以下查询返回结果：`db.Artists.Where(a => a.Name == "Camel");`

但是这个没有：`db.Artists.Where(a => a.Search("Camel"));`

**[更新]**

经过进一步测试，我意识到`Match`扩展方法确实返回了结果，而其他方法 ( `Search`, `Like`) 没有。我仍在为这个问题而苦苦挣扎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-18T04:43:51.540

我也在我的项目中使用它，我相信这条消息会显示“Lucene 术语的谓词不能是空字符串。”，因为 Lucene 不接受空术语作为搜索条件。

这就是发生在我身上的事情：

（Northwind 数据库）当我尝试搜索时

```
var mmCustomers = from c in dbi.Get<Customer>()
                      where c.ContactTitle == "Marketing Manager"                       
                      select c; 
```

它工作正常，但是当我尝试时：

```
var mmCustomers = from c in dbi.Get<Customer>()                       
                      select c; 
```

它显示了“Lucene Term 的谓词不能是空字符串”。错误。

希望能帮助到你

# f# - 如何在 f# 中执行多行 lambda 表达式？

> ID：814278
> 
> 赞同：19
> 
> 时间：2009-05-02T06:20:46.133
> 
> 标签：f#, lambda

我将如何在 F# 中执行此操作（C#）

```
public class MyClass
{
    void Render(TextWriter textWriter)
    {
        Tag(() =>
                {
                    textWriter.WriteLine("line 1");
                    textWriter.WriteLine("line 2");
                });
        Tag(value =>
                {
                    textWriter.WriteLine("line 1");
                    textWriter.WriteLine(value);
                }, "a");
    }

    public void Tag(Action action)
    {
        action();
    }
    public void Tag<T>(Action<T> action, T t)
    {
    action(t);
    }
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-05-02T06:36:02.977

F# 中的多行 lambda 只是

```
(fun args ->
    lots
    of
    code
    here
) 
```

整个代码将类似于

```
open System.IO

type MyClass() as this =
    let Render(tw : TextWriter) =
        this.Tag(fun() ->
            tw.WriteLine("line1")
            tw.WriteLine("line2")
        )
        this.Tag(fun(value : string) ->
            tw.WriteLine("line1")
            tw.WriteLine(value)
        , "a"
        )
    member this.Tag(action) = 
        action()
    member this.Tag(action, x) =
        action(x) 
```

假设我没有抄写错误。（我在公共接口中使用了 F# 函数类型而不是 Action 委托。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-02T06:51:20.943

如果您只想编写多行 lambda，则可以使用括号内的分号运算符将多个语句串在一起。例子：

```
(fun () -> (write_line "line 1" ; write_line "line 2")) 
```

和

```
(fun val -> (write_line "line 1" ; write_line val)) 
```

虽然我给出的第二个例子只有在 val 的类型是字符串时才有效。

警告：我不知道 F# 的细节。我是在 Objective Caml 背景下写这篇文章的。这些语言非常相似，但可能存在一些差异，使我的建议略有错误。另外，我现在不在带有 ocaml 或 F# 解释器的机器上，所以我无法检查这些片段以确保它们工作。

# perl - 如何在 FreeBSD 7.1 下编译带有线程支持的 Perl 5.10？

> ID：814285
> 
> 赞同：5
> 
> 时间：2009-05-02T06:27:51.670
> 
> 标签：perl, multithreading, compilation, freebsd

我正在尝试在我的 FreeBSD 7.1 (BSD) 服务器上编译 Perl 5.10，但是当我运行配置脚本并回答问题时，我收到以下错误：

```
...POSTIX threads should be supported by FreeBSD 7.1 ... but your system is missing the shared libc_r. 
```

谷歌搜索的答案想出了安装 gethostnamadr.c 这很好，除了两件事：

1.  我不知道把这个文件放在哪里
2.  如果 Configure 想要查看 libc_r，这如何解决我的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-02T19:02:02.557

要在 FreeBSD 7.* 上启用 Perl 5.10 线程，您只需使用`patch`. 然后，您可以使用 -Dusethreads 构建 perl 或回答`Configure`文件问题以启用线程，一切顺利。我还没有进行任何重要的测试或比较，但是一切都可以正常编译，包括线程库，并且我所有的 Perl 程序都可以正常工作。

```
--- hints/freebsd.sh 2008/10/20 04:59:30 1.1
+++ hints/freebsd.sh 2008/10/20 22:49:29
@@ -211,6 +211,14 @@
exit 1
;;

+ 7.*)
+ # 7.x doesn't install libc_r by default, and Configure
+ # would fail in the code following
+ #
+ # gethostbyaddr_r() appears to have been implemented in 6.x+
+ ldflags="-pthread $ldflags"
+ ;;
+
*)
if [ ! -r "$lc_r" ]; then
cat <<EOM >&4 
```

编辑：我忘记了我的参考；在这里查看更多信息：[http](http://www.gossamer-threads.com/lists/perl/porters/232518?nohighlight=1#232518) ://www.gossamer-threads.com/lists/perl/porters/232518?nohighlight=1#232518 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-02T18:26:25.390

与 Spolsky 所说的“perl 几乎被遗忘”相反...... perl 非常活跃。

您还没有指出您安装了哪个版本的 FreeBSD... 但是假设您安装了最少的 FreeBSD 7.1，那么您无法安装线程库或线程库不在库路径中。

请注意，libc 是一个通用的“c”库，而 libc_r 是该文件的线程安全版本。一些 2005 年的谷歌结果表明 libc_r 已被弃用。

考虑到这一点，您很可能正处于“修订冲突”之中。遗憾的是，FreeBSD 本身并没有提供 perl 的线程安全版本，但是，它们确实打包了 perl 5.10 和几个更​​高版本。我发现这个链接很有用：

[http://www.nabble.com/How---where-to-get-a-Perl-that-has-threads--td22270858.html](http://www.nabble.com/How---where-to-get-a-Perl-that-has-threads--td22270858.html)

您可能还想尝试安装 FreeBSD 附带的 p5-fork 库

[http://www.nabble.com/How---where-to-get-a-Perl-that-has-threads--td22270858.html](http://www.nabble.com/How---where-to-get-a-Perl-that-has-threads--td22270858.html)

# sql - 如何将 django 中的图标转换为 SQL 语句？

> ID：814288
> 
> 赞同：0
> 
> 时间：2009-05-02T06:30:53.643
> 
> 标签：sql, django

我想获得每年每个月的销售价格 **前****5**名。

 **所以我输入这样的代码

```
def query(request):
    from django.db import connection
    cursor = connection.cursor()
    cursor.execute("SELECT product_style_id ,sum(price) As total_p ,sum(cast( amount as int )) AS total_a FROM jewelry_productorder  group by product_style_id ORDER BY total_p DESC LIMIT 5 " )
    output = cursor.fetchall()
    variables = RequestContext (request, {'output':output,})
    return render_to_response('top5.html', variables) 
```

结果显示整个表格的前 5 名，而不是每年每个月的前 5 名。

所以我输入这样的代码（通过添加 WHERE 子句）

```
def query(request):
    m = request.GET['month']
    y = request.GET['year']
    d = str(y+'-'+m)
    from django.db import connection
    cursor = connection.cursor()
    cursor.execute("SELECT product_style_id ,sum(price) As total_p ,sum(cast( amount as int )) AS total_a FROM jewelry_productorder WHERE due_date LIKE %s group by product_style_id ORDER BY total_p DESC LIMIT 5 " ,[d])
    output = cursor.fetchall()
    variables = RequestContext (request, {'output':output,})
    return render_to_response('top5.html', variables) 
```

结果是这样的

/查询处的编程错误

运算符不存在：日期~~未知第 1 行：...total_a FROM Jewelry_productorder WHERE due_date LIKE E'200... ^ 提示：没有运算符与给定名称和参数类型匹配。您可能需要添加显式类型转换。

请帮帮我，我该怎么办？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T06:53:19.067

Django 中的 __icontains 可以使用 ILIKE 用 SQL 编写。

例子：

```
SELECT ... WHERE some_column ILIKE '%some_string%' 
```

因此，您可以像这样重写查询：

```
cursor.execute("SELECT product_style_id ,sum(price) As total_p ,sum(cast( amount as int )) AS total_a FROM jewelry_productorder WHERE due_date ILIKE %s group by product_style_id ORDER BY total_p DESC LIMIT 5", ["%%%s%%" % d]) 
```

如果您的数据库不支持 ILIKE （如对我的回答的评论中指出的那样），请执行以下操作：

```
SELECT ... WHERE LOWER(some_column) LIKE LOWER('%some_string%') 
```

请注意，使用 LOWER 可能会阻止您的数据库使用索引（如果您在该列上有索引）。

另外，请注意 Django 1.1 添加了聚合支持，因此您应该能够进行 GROUP BY 查询，而无需求助于原始 SQL。检查这个：[http ://docs.djangoproject.com/en/dev/topics/db/aggregation/](http://docs.djangoproject.com/en/dev/topics/db/aggregation/)

# iphone - 如何将 NSURLconnection http 响应数据与 iphone 中的字符串值进行比较？

> ID：814290
> 
> 赞同：0
> 
> 时间：2009-05-02T06:31:41.160
> 
> 标签：iphone, string, http, comparison, nsurlconnection

我想做一个激活模块，它将发送一个带有 PIN 码的 http 请求，然后读取响应。如果响应为“OK”，则会打开一个主菜单。问题是我收到的响应为“OK”，但我无法将它与 NSString @“OK”进行比较。如何将http响应与字符串进行比较？

这是我的一段代码：

```
-(IBAction) submitPINAction:(id) sender
{
    printf("inside submit btn");
    mydata = [NSMutableData alloc];
    NSURLRequest *request = [NSURLRequest  requestWithURL:
                             [NSURL URLWithString:@"http://192.168.100.3/WWTF/activationApp.php?PIN=11111"]

                                              cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
    NSURLConnection *connection=[[NSURLConnection alloc] initWithRequest:request delegate:self];
    if(connection)
    {
        mydata = [[NSMutableData data] retain];
    }
    else
    {
        //Handle error : Not received data
        printf("No internet connection");
    }
}

-(void)connection:(NSURLConnection *)theConnection
   didReceiveData:(NSData *)incrementalData {
    printf("data received");
    if (mydata==nil) {
        mydata =
        [[NSMutableData alloc] initWithCapacity:2048];
    }
    [mydata appendData:incrementalData];
    NSString *temp = [[NSString alloc] initWithData:mydata encoding:NSASCIIStringEncoding];

    NSString *string1 = @"OK";

    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

    if([string1 isEqualToString:temp]){   // HERE IS THE PROBLEM, THE STRINGS ARE NOT GETTIN COMPARED

        [prefs setBool:TRUE  forKey: @"activationKey"];
        // show the main menu
        mainMenuController *mmC = [[mainMenuController alloc]initWithNibName:@"mainMenu" bundle:[NSBundle mainBundle]];
        self.mmainMenuController = mmC;
        [mmC release];
        [self.view addSubview:[mmainMenuController view]];
    }
    else{
        printf("in else");
        [prefs setBool:FALSE  forKey: @"activationKey"];
        //show an alert
        UIAlertView *alertActivationFail = [[UIAlertView alloc] initWithTitle:@"Activation Failed!" message:@"PIN is Incorrect" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alertActivationFail show];
        [alertActivationFail release];
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-02T07:34:05.800

我将使用以下行来查看响应实际上是 OK 字符串，因为它可能包含空格或其他字符。

```
NSLog(@"string1 = '%@' temp = '%@'", string1, temp); 
```

将此行放在这样的 if 语句之前...

```
NSString *string1 = @"OK";
NSLog(@"string1 = '%@' temp = '%@'", string1, temp);
if([string1 isEqualToString:temp]){   // HERE IS THE PROBLEM, THE STRINGS ARE NOT GETTIN COMPARED 
```

如果额外的空格是比较失败的原因，那么您可以使用以下方法从字符串中修剪空格：

```
+(NSString *)trim:(NSString *)value {
    return [value stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T07:54:47.373

我要确保的另一件事是，您在检查字符串之前已收到所有数据。看起来您进行了字符串签入，但在数据完成后进行`didReceiveData`签入可能更有意义。`connectionDidFinishLoading`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T07:42:42.970

感谢 Korros 和 danvin 帮助我。问题确实出在空格上。正如你所说，我修剪了空格，它起作用了。

并感谢 stackoverflow.com。这真的是一个很棒的论坛。我为所有 iPhone 相关主题找到了有用的分析器，同时我相信它也有助于其他平台。

# iphone - 收集和讨论 Cocoa Touch 设计模式的网站？

> ID：814297
> 
> 赞同：4
> 
> 时间：2009-05-02T06:41:24.210
> 
> 标签：iphone, cocoa-touch, design-patterns

有人知道吗？如果它不存在，有人有兴趣合作创建它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-02T07:39:46.707

[委托模式](http://en.wikipedia.org/wiki/Delegation_pattern)是一种设计模式，它对于充分利用多个`UIKit`类非常重要。Apple 的开发人员文档页面（[示例](http://developer.apple.com/iPhone/library/documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html)）将是很好的网络资源，可以收集有关相关方法的信息。

**编辑**：[这是](http://cocoawithlove.com/2008/06/five-approaches-to-listening-observing.html)关于观察者模式的 Cocoa 实现的页面。[这是一本](https://rads.stackoverflow.com/amzn/click/com/0321535022)关于设计模式的 Cocoa 实现的书。在 iPhone 开发方面，~~KVO~~ Cocoa 绑定尚未实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-02T10:59:24.450

更新：另见： http: [//www.cocoacontrols.com/](http://www.cocoacontrols.com/)

迄今为止最好的网站在这里，[http://www.iphoneexamples.com/](http://www.iphoneexamples.com/)

其他的还有 iosdevelopertips.com、iphonedevsdk.com、iphone.zcentric.com，当然还有官方的 Apple Dev 论坛。

我遇到过许多（主要是 barcamp）社区，他们开始了这样的努力，但没有时间跟进。我同意这样的网站会很有用，因为 Cocoa touch 带来了许多 OS X 不存在的挑战（内存、性能、无后台进程等）。

我只能得出结论，每个人都在他们的雇主/客户 NDA 之下和/或每个人都忙于创建这样的网站！

# iphone - 以类似于 Windows 的 MessageBox() 的方式使用 UIAlertView？

> ID：814300
> 
> 赞同：4
> 
> 时间：2009-05-02T06:51:58.973
> 
> 标签：iphone

我是 iPhone 的新手，我希望能够以类似于 Windows`MessageBox()`或`MessageDlg()`in的方式使用 UIAlertView `Delphi`。

例如，我有一个方法需要要求用户确认某事，然后根据他们的响应继续操作。

例如（伪代码）：

```
-(void)doSomething
{
  [doStep1];
  [doStep2];
  var myValue = [getDefaultValue];

  if (myValue = nil)
  {
    if [promptUser(@"No value in setting. Use the default value?")] //UIAlertView here?
    {
       myValue = @"defaultValue";
    }
    else
      return;  // bug out of the routine 'cause we have no value.
  }

  [doStep3 withValue:myValue];

} 
```

或者，换一种说法——有没有一种方法可以`UIAlertView`在例程中向用户提出问题，以控制该例程的逻辑流程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-02T22:05:29.263

根本没有理由继承 UIAlertView。这就是代表的目的。您只需要一个支持 UIAlertViewDelegate 协议的类（例如您的视图控制器），并将 UIAlertView 的委托属性设置为该类。然后，您可以在此类中实现 alertView:clickedButtonAtIndex: 方法，如果您想以不同的方式专门处理取消，请实现 alertViewCancel: 方法。

[您可以在UIAlertView 文档](http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIAlertView_Class/UIAlertView/UIAlertView.html#//apple_ref/occ/instp/UIAlertView/delegate)和[UIAlertViewDelegate](http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html)文档中阅读有关它的更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-02T07:09:36.687

我不知道是什么`MessageDlg()`，但是您当然可以`UIAlertView`根据按下的按钮来继承和处理对话框响应，例如：

设置`UIAlertView`子类头：

```
//
//  ARReachabilityAlertView.h
//

#import <UIKit/UIKit.h>

@interface ARReachabilityAlertView : UIAlertView <UIAlertViewDelegate> {
}

@end 
```

设置`UIAlertView`子类实现：

```
//
//  ARReachabilityAlertView.m
//

#import "ARReachabilityAlertView.h"

@implementation ARReachabilityAlertView

- (id)initWithFrame:(CGRect)frame {
  if (self = [super initWithFrame:frame]) {
    [self setTitle:@"Error"];
    [self setMessage:@"This application won't run without a network connection. Do you want to quit?"];
    [self addButtonWithTitle:@"Quit"];
    [self addButtonWithTitle:@"Continue"];
    [self setDelegate:self];
  }
  return self;
}

- (void) alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
  if (buttonIndex == 0)
    exit(0); // quit application if "Quit" is pressed; otherwise, do nothing
}

- (void) drawRect:(CGRect)rect {
  [super drawRect:rect];
}

- (void) dealloc {
  [super dealloc];
}

@end 
```

注意`alertView:clickedButtonAtIndex:`委托方法。这将处理您用来决定应用程序如何进行的条件。你可以从这里发送一个`NSNotification`，或者在应用程序委托中调用一个方法，无论你想要什么。

在我的示例中，`UIAlertView`如果没有网络连接，这将被实例化，如果用户在警报视图中单击“退出”，应用程序将关闭。否则，如果用户单击“继续”，应用程序将照常运行。

请注意，子类的实现需要`drawRect:`调用该方法。我不确定这是否是一个错误，因为我希望`drawRect:`在超类中调用该方法；我就此向 Apple 提交了一份错误报告，但我没有听到任何消息。如果你想看看效果如何，请评论它——这很有趣。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-02T12:26:29.450

我相信您希望将 UIAlertView 用作模式警报框（从某种意义上说，您希望您的代码在用户做出选择之前停止运行）。没有简单的方法可以做到这一点，并且真的建议您不要以这种方式为 iPhone 编写代码。我认为亚历克斯的解释是一个很好的解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-01-26T17:26:50.750

为此，您可以手动运行主循环。我没有设法直接停止主循环，所以我改为运行主循环 0.5 秒并等待用户响应。

我在为 iPhone 上的 C#/MonoTouch 用户研究问题时遇到了这个问题。下面的示例是为 MonoTouch/C# 编写的，但转换为 Objective-C 应该很简单

以下函数显示了如何使用上述方法实现模态查询：

```
int WaitForClick ()
{
    int clicked = -1;
    var x = new UIAlertView ("Title", "Message",  null, "Cancel", "OK", "Perhaps");
    x.Show ();
    bool done = false;
    x.Clicked += (sender, buttonArgs) => {
        Console.WriteLine ("User clicked on {0}", buttonArgs.ButtonIndex);
    clicked = buttonArgs.ButtonIndex;
    };    
    while (clicked == -1){
        NSRunLoop.Current.RunUntil (NSDate.FromTimeIntervalSinceNow (0.5));
        Console.WriteLine ("Waiting for another 0.5 seconds");
    }

    Console.WriteLine ("The user clicked {0}", clicked);
    return clicked;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-02-13T18:30:05.840

只是一个快速提示：如果您希望一个类成为多个 UIAlertView 的委托，只需使用 tag 属性来告诉谁是谁：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Clear all" message:@"Are you sure you want to erase everything?" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK", nil];
alert.tag = ALERT_DELETE_TAG;
[alert autorelease];
[alert show]; 
```

使用 UIAlertView 作为第一个参数调用委托方法，您可以在那里检查谁是发起者。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-01T14:09:12.220

感谢@miguel.de.icaza，我找到了如下解决方案（**部分代码**）：

```
@interface MyClass: NSObject <UIAlertViewDelegate>
{
   int confirmed;
}
- (BOOL) removeObjectAtIndex:(NSUInteger)index;
@end

@implementation

- (BOOL) removeObjectAtIndex:(NSUInteger)index
{   
    // delete confirmation alert
    confirmed = -1;

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Delete confirmation" message:@"Are you sure to delete object" delegate:self cancelButtonTitle:@"Yes" otherButtonTitles: @"No", nil];
    alert.tag = 2;
    [alert show];
    [alert release];

    // wait for confirm (0 or 1)
    while (confirmed == -1) {
        // this is what you need!!!
        [[NSRunLoop mainRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:0.5]];
    }

    if (confirmed) {
        [myObjects removeObjectAtIndex:index];
        return YES;
    }
    else
        return NO;
}

- (void) alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    switch (alertView.tag) {
        case 1:
            // ...
            break;
        case 2:
            if (buttonIndex == 0) // delete confirmed
                confirmed = 1;
            else                  // dismiss
                confirmed = 0;
            break;
        default:
            break;
    }
}

@end 
```

# ruby-on-rails - 为什么 Rails.cache.read 无法在 ApplicationController 中获取任何内容？

> ID：814303
> 
> 赞同：0
> 
> 时间：2009-05-02T06:54:00.577
> 
> 标签：ruby-on-rails, caching

我的 Ruby on rails 应用程序有问题。ApplicationController 中的 Ruby on Rails 缓存。数据拿不到，但它存在。

```
class ApplicationController < ActionController::Base
  before_filter :init

  def init
    @setting = Rails.cache.read("data/setting")
    if not @setting
      @setting = Setting.find_create
      Rails.cache.write("data/setting",@setting)
    end
  end
end 
```

Development.log 显示：

> 缓存读取：数据/设置
> 
> 设置负载 (0.5ms) SELECT * FROM > "settings" LIMIT 1
> 缓存写入：数据/设置

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-02T09:18:38.590

我是Json，我被改名了。

但是开发环境设置当前是：

```
config.action_controller.perform_caching             = true 
```

perform_caching 已开启！其他缓存可以工作。只有这个缓存不起作用（它在 ApplicationController 中）。

```
@setting = Rails.cache.read("data/setting")
if not @setting
  @setting = Setting.find_create
  Rails.cache.write("data/setting",@setting)
end 
```

为什么？Rails.cache.read 不能在 ApplicationController 中工作吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T08:24:13.637

如果您在开发模式下运行应用程序，则缓存可能已关闭。检查您的 config/development.rb 文件中的以下内容：

```
config.action_controller.perform_caching             = false 
```

要测试您的缓存，您可以将此值更改为 true，或者在打开缓存的不同环境中运行。我经常创建一个环境 development_as_production，指向开发数据库，​​但使用我的 production.rb 设置。

# flash - 如何等待外部 .txt 文件在 ActionScript 3 中加载？

> ID：814304
> 
> 赞同：1
> 
> 时间：2009-05-02T06:57:07.917
> 
> 标签：flash, actionscript-3, actionscript

如何等待外部 .txt 文件在 ActionScript 3 中加载？如果我使用 URLLoader，我不能保证文件已经加载，因为它会在完成时调度一个事件。我正在从另一个类调用加载器函数，所以我不能简单地将下一个操作粘贴到事件侦听器中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T10:05:46.857

要加载文本文件（或 XML 文件），您可以使用 URLLoader。[这是来自kirupa](http://www.kirupa.com/forum/showthread.php?p=1910480#post1910480)的 XML 示例（几乎相同）

```
var loader:URLLoader;
loader = new URLLoader();
loader.addEventListener(Event.COMPLETE, xmlLoaded);

var request:URLRequest = new URLRequest("file.xml");
loader.load(request);
function xmlLoaded(event:Event):void {
    var myXML:XML = new XML(loader.data);
} 
```

如果您从另一个类调用它，您可以将调用者作为对 EventListener 的引用传递并处理来自被调用类的 Event.COMPLETE：

```
loader.addEventListener(Event.COMPLETE, caller_class.xmlLoaded); 
```

理想情况下，您可以使您的加载器类可重用并使其扩展 EventDispatcher，这样您就可以听您自己的类，而不是听 URLLoader。我不会为此发布代码以保持答案简单，但如果您有兴趣，这里有几个链接：[XML 加载器的示例](http://www.kirupa.com/forum/showpost.php?p=2300098&postcount=2)和[更复杂的图像加载器的另一个示例（为避免混淆，请不要阅读它，除非您已经了解文本/XML 之一）](http://www.flashandmath.com/bridge/spintake2/loader.html)

我希望它有帮助:)

* * *

**已编辑：** 显然您正在寻找 dispatchEvent 方式这里有几个提示：

1) 将您的类扩展到 EventDispatcher

```
public class YourClass extends EventDispatcher{ 
```

2) 用于`dispatchEvent(new Event("event_name"));`调度事件

3) 从另一个班级收听这个事件。例如：`loader_class.addEventListener("event_name", callback);`

*4) Optionally you can change the string ("event_name") by a constant like `DispatcherClass.EVENT_NAME` by defining the constant in the dispatcher class `public const EVENT_NAME:String = "event_name",` and call it from the other class like this: `loader_class.addEventListener(DispatcherClass.EVENT_NAME, callback);`

I hope everything is clearer now.

# linux - 如何在我的用户名中使用带有@符号的linux命令行ftp？

> ID：814322
> 
> 赞同：25
> 
> 时间：2009-05-02T07:17:31.910
> 
> 标签：linux, ftp

`@`当我的用户名中间有一个符号时，如何在 linux 命令行上运行它？

```
ftp -u user:password@host/destination_folder/ sourcefile.txt 
```

我的用户名是`info@domain.com`，它认为我的主机是`domain.com`.

注意：这是无人值守的上传，所以我不能只输入用户名和密码。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2011-02-03T19:38:38.630

试试这个：使用“%40”代替“@”

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-05-02T07:25:26.913

作为替代方案，如果您不想创建配置文件，请使用以下命令进行无人值守`curl`上传`ftp`：

```
curl -u user:password -T file ftp://server/dir/file 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-05-02T07:25:24.400

尝试在这样的`~/.netrc`文件中定义帐户：

```
machine host login info@domain.com password mypassword 
```

检查[`man netrc`](http://man.cx/netrc)详情。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-03-15T19:57:54.433

我只需键入`ftp hostdomain.com`，下一个提示要求我输入一个名称，如果它与我当前的用户不同。

我想这取决于你的 FTP 是如何配置的。也就是说，它是否假定相同的用户名（如果未提供）或询问。好消息是，即使没有解决方案，下次你面对这个问题时，它可能会为你工作：D

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-06T08:53:26.030

更完整的答案是 ftp（至少安装在 centos 6 上的 ftp 程序）是不可能的。

由于您想要一个无人参与的过程，因此“pts”的答案可以正常工作。

> 使用 curl 而不是 ftp 进行无人值守上传：

```
curl -u user:password -T file ftp://server/dir/file 
```

%40 似乎不起作用。

```
[~]# ftp domain.com
ftp: connect: Connection refused
ftp> quit
[~]# ftp some_user%40domain.com@domain.com
ftp: some_user%40domain.com@domain.com: Name or service not known
ftp> quit 
```

我所要做的就是打开 ftp 程序并使用域并在被询问时输入用户。通常，无论如何都需要密码，因此交互性质可能没有问题。

```
[~]# ftp domain.com
Connected to domain.com (173.254.13.235).
220---------- Welcome to Pure-FTPd [privsep] [TLS] ----------
220-You are user number 2 of 1000 allowed.
220-Local time is now 02:47\. Server port: 21.
220-This is a private system - No anonymous login
220-IPv6 connections are also welcome on this server.
220 You will be disconnected after 15 minutes of inactivity.
Name (domain.com:user): some_user@domain.com
331 User some_user@domain.com OK. Password required
Password:
230 OK. Current restricted directory is /
Remote system type is UNIX.
Using binary mode to transfer files. 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-07-21T20:10:11.937

curl -f -s --disable-epsv -u someone@somewhere.com:gr8p455w0rd -T /some/dir/filename [ftp://somewher.com/ByramHealthcareCenters/byram06-2011.csv](ftp://somewher.com/ByramHealthcareCenters/byram06-2011.csv)

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2011-02-06T07:39:41.860

我从来没有见过这个`-u`参数。但是如果你想使用“@”，那么将它声明为“\@”怎么样？

这样它应该被解释为你想要的。你知道类似

```
ftp -u user\@domain.tld@ftp.host.tld 
```

# php - Cakephp 的 auth 组件让我很快退出。无论如何要改变这个？

> ID：814325
> 
> 赞同：2
> 
> 时间：2009-05-02T07:18:29.317
> 
> 标签：php, authentication, cakephp

这是我第一次使用 StackOverflow，尽管我经常“阅读”Coding Horror。反正...

我正在使用 CakePHP 开展一个学校/大学项目，并且我正在使用内置的 AuthComponent 来支持用户身份验证（即登录等）。

我的问题是它会在很短的时间间隔后将我注销。它甚至没有让我等待一个完整的会话（即关闭浏览器）。有时 5 分钟，有时 10 分钟，偶尔 15 分钟，但不会更多。

最糟糕的是，当我调用一个需要用户登录的方法并且它决定在此之前死掉时，它会让我退出。

我已经搜索了很多，但似乎找不到答案。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T07:22:57.420

我从 1.1 版开始就没有使用过 CakePHP，所以我不确定这是否已经改变，但你可能想检查一下你的`DEBUG`水平。设置越`DEBUG`低，分配给 的值越低`CAKE_SESSION_TIMEOUT`。同样，在 1.1 中，这一切都在`app/config/core.php`.

**编辑**：刚刚检查过，它已被重写，但想法保持不变。在`core.php`寻找：

```
/**
 * Session time out time (in seconds).
 * Actual value depends on 'Security.level' setting.
 */
Configure::write('Session.timeout', '120'); 
```

并增加它以使会话超时需要更长的时间。

# c++ - 使用 SDL 进行硬件缓冲，关于它是如何工作的问题

> ID：814326
> 
> 赞同：1
> 
> 时间：2009-05-02T07:18:46.260
> 
> 标签：c++, sdl, hardware-interface

我决定做我的第一个游戏，它会很简单，但我想使用 c++，我选择了 SDL 来学习。所以我的问题是关于编写代码时如何处理“缓冲区”。我将在底部发布我的相关代码。

好的，所以基本上我理解的方式是 SDL 负责实际将哪个缓冲区绘制到屏幕上。当我写入缓冲区时，它始终是我正在写入的后备缓冲区，或者当前未在屏幕上绘制的缓冲区。因此，当我调用 SDL_Flip(screen) 时，它会将我的屏幕表面“blit”到后备缓冲区上，然后将指向哪个缓冲区的指针移动到那个曾经是后备缓冲区的缓冲区，我一直在处理的那个缓冲区，以及现在显示的旧缓冲区成为后缓冲区。此时如果我调用 SDL_FillRect(arguments) 它将在现在的后台缓冲区上执行吗？

我将发布我的学习游戏的整个“心跳”，因为它可能有助于澄清我的问题：

```
//While the user hasn't quit
while( quit == false )
{
    //If there's an event to handle
    if( SDL_PollEvent( &event ) )
    {
        //If a key was pressed
        if( event.type == SDL_KEYDOWN )
        {
            //Set the proper message surface
            switch( event.key.keysym.sym )
            {
                case SDLK_UP: message = upMessage; break;
                case SDLK_DOWN: message = downMessage; break;
                case SDLK_LEFT: message = leftMessage; break;
                case SDLK_RIGHT: message = rightMessage; break;
            }
        }

        else if( event.type == SDL_QUIT ) //if the user clicks the little X in the upper right corner.
        {
            quit = true;
        }
    }

    //If a message needs to be displayed
 if( message != NULL )
 {
      // Clear the back buffer.
      SDL_FillRect( SDL_GetVideoSurface(), NULL, 0 );

      //Draw the backgroudn to the back buffer.
      apply_surface( 0, 0, background, screen );

      // Draw the "message" to the back buffer.
      apply_surface( ( SCREEN_WIDTH - message->w ) / 2, ( SCREEN_HEIGHT - message->h ) / 2, message, screen );

      //Null the surface pointer
      message = NULL;
    }

    //Swap the current and back buffer.
    if( SDL_Flip( screen ) == -1 )
    {
        return 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-02T18:09:04.480

它高度依赖于您的系统（即 X11、Linux 帧缓冲区、Windows）以及用于与之交互的后端 SDL。还有你传递给 SDL_SetVideoMode 的标志。基本上，软件表面位于程序的内存区域中，硬件表面位于图形卡的内存中。你所描述的在我看来是一个双缓冲区，如果你通过 SDL_HWSURFACE | 就会启用它。SDL_DOUBLEBUF 到 SDL。请记住，并非所有平台和配置都支持此功能，您可能会得到不同的东西。

# networking - 无法调查中美之间的DNS中毒

> ID：814327
> 
> 赞同：4
> 
> 时间：2009-05-02T07:18:47.350
> 
> 标签：networking, dns

我很想知道不同国家对政治网站的 DNS 请求有何不同。

我需要知道如何将 DNS 查询发送到远程计算机，比如说在中国。然后，我想将结果与美国进行比较。实验的目的是获得有关 DNS 毒物概念的亲身体验。我觉得我的课太理论化了。

**你如何比较中国和美国的 DNS 请求，**以便我可以调查 DNS 中毒？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-02T07:35:33.223

这在一定程度上取决于查询的更改方式。如果服务器根据您所在的位置给出不同的结果，那么直接询问它没有任何用处。如果您的查询被中间的缓存服务器毒害，这些方法可能会有所帮助。

如果您在世界不同地区拥有 shell 帐户，您可以执行一个简单的测试。

我正在使用'dig'，它在大多数*nix 系统上都可用。如果您运行的是 Windows，您可能希望[在此 DNS 工具列表中搜索替代方案](http://www.dns.net/dnsrd/tools.html)

**查找负责的 DNS 服务器**
`dig ns domain-in-question.com @the.dns.server.you.want.to.use`
**获取主机名的 IP 地址**
`dig a host.domain-in-question.com @the.dns.server.you.want.to.use`
（您可以跳过 @.. 部分以使用当前服务器运行）

我建议从世界不同的地方尝试这两种方法，看看服务器本身是否给出不同的结果，或者途中的缓存服务器是否被毒化。

此外，搜索“如何毒害 dns”给了我一些实际的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-02T07:22:36.030

您可以只使用 nslookup （该`server`命令允许您指定要询问的 DNS 服务器）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-02T07:35:21.820

试试这个网络工具：

[http://www.kloth.net/services/dig.php](http://www.kloth.net/services/dig.php)

至于了解 DNS 中毒，每台计算机都有信任哪个 DNS 服务器的设置，等等。如果链中的其中一个受到威胁，下游的每台计算机都将收到不良信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-02T14:53:22.203

如果远程服务器配置正确，它们不会让你询问它们。

任何递归解析器都应配置为仅向其打算服务的客户端提供答案。

# asp.net - jQuery 的原生 ajax 函数 vs ajaxDotNet 插件

> ID：814328
> 
> 赞同：2
> 
> 时间：2009-05-02T07:20:26.817
> 
> 标签：asp.net, jquery

我将 jQuery 与 ASP.NET 3.5 和 ajaxDotNet 插件一起使用。这两者之间有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T07:33:45.160

[ajaxDotNet 插件](http://code.google.com/p/ajaxdotnet/)使用 jQuery 的本机 ajax 函数，但它是专门为调用 ASP.NET PageMethods 和启用 JSON 的 Web 服务而设计的。

# c# - 如何将大文本添加到列表视图的（详细）项目？

> ID：814333
> 
> 赞同：0
> 
> 时间：2009-05-02T07:24:02.393
> 
> 标签：c#, winforms

我正在编写一个分析器，它显示特定程序的数据包。一些数据包非常大，列表视图仅显示前 15-20 个字符：\

这是我的代码

```
 string __str = String.Join(" ", data.Select(x => x.ToString("x2")).ToArray()); //covert the byte[](packet) to hex string
        string __ascii = AsciiToString(data); //convert the byte[](packet) to ASCII
        if (encrypted) FormMain.PFA(form => form.listViewAnalyzer.Items.Add("S<-C [ENCRYPTED] Blowfishkey = 0xFF")); 
        else FormMain.PFA(form => form.listViewAnalyzer.Items.Add("S<-C")); 
        ListViewItem item = new ListViewItem(__str); //create new item and place the packet as hex string
        item.SubItems.Add(__ascii); //add the ascii variant as substring
        FormMain.PFA(form => form.listViewAnalyzer.Items.Add(item)); //add the item 
```

它必须是一个属性，禁止添加超过 x 行的文本，但我看不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T08:14:23.193

列表视图将*包含*所有文本，如果它太长或有多行，你就*看不到它。*

Outlook 和诸如数据包嗅探器之类的东西通常工作的方式是列表视图伴随着一个文本框或“预览”窗口。您可以更改您的 UI，以便在列表视图中选择项目以在 Outlook 样式的预览窗格中显示该项目的完整详细信息。然后你可以有一个大的多行文本框和任何你想要的东西。我经常通过在`ListViewItem.Tag`属性中放置一个对象来做到这一点，这样我就可以在 UI 中检索它并在`ListView.SelectedIndexChanged`事件触发时显示在预览中。

或者，预览可以在双击时弹出的对话框中。事实上，将预览 UI 制作成一个`UserControl`，那么你可以两者都做！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T07:32:31.793

> listview 仅显示前 15-20 个字符：\

也许您需要使列更宽？

> 它必须是一个属性，禁止添加超过 x 行的文本，但我看不到它。

列表视图项不换行，因此从技术上讲，它们禁止超过 1 行的文本

# php - 为 WAMP 上的安装创建安装程序包

> ID：814334
> 
> 赞同：3
> 
> 时间：2009-05-02T07:24:13.420
> 
> 标签：php, installation, wamp

我已经开发了一个 PHP Web 应用程序，现在我正在考虑在 Windows 上部署它。

为了简化我的部署，我计划为其创建一个安装程序。此安装程序应执行以下操作：

1.  检查先决条件，例如 Apache、MySQL 等，如果它们不可用，请安装它们
2.  将 PHP 应用程序放在 Application 文件夹中，并在此过程中设置端口号，为应用程序创建一个 conf 文件，更新 httpd.conf 以确保它引用特定于应用程序的 conf 文件。
3.  运行我准备的数据库设置脚本和数据库填充脚本。
4.  在应用程序配置文件中设置数据库设置，以便它们指向正确的数据库。

我正在寻找一个安装程序来帮助我解决这方面的问题，比如[Advanced Installer](http://www.advancedinstaller.com)。当然，我仍然需要为它编写很多自定义操作代码，这是我非常讨厌的事情。我现在的问题是，有没有人做过所有这些事情并且愿意分享他的代码，所以我不不必从头开始做所有事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-02T08:42:05.933

我认为您正在寻找这个[http://installbuilder.bitrock.com/](http://installbuilder.bitrock.com/)。Bitrock 被 SugarCRM 等一些大型项目用于在其他计算机上获取 LAMP 堆栈。试试看！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-02T15:53:19.470

你可以试试movAmp。这会将您的应用程序打包到一个工作可执行文件中，包括 apache/php/mysql。
因此，您的应用程序应该知道它是否已安装，例如在第一次点击时重定向到安装脚本。

> Movamp 是一个开发环境。
> 
> MovAMP 被设想为支持密钥 USB 或任何其他弱容量支持。将其连接到装有 Microsoft Windows 的计算机上，您就可以访问服务器网络、数据库和 INTERPRETER PHP。如果 MovAMP 成功满足自己的空间不足，他可以提供也安装在工作站上。
> 
> 与 EasyPhp 或 WAMP5 类似，MovAMP 插入 APACHE 2.0.54、MYSQL 4.1.12、PHP 5.0.4 和 phpMyAdmin 2.6.2-pl1。自由软件开发的出口，这些技术证明了它们的快速性和稳定性。
> 
> 一旦被抛出，他会在通知区域添加一个图标，以允许停止服务器 Apache 和 MySQL 或实现站点或 phpMyAdmin 的接收。

[关联](http://en.kioskea.net/telecharger/telecharger-191-movamp)

# c# - 有没有办法在 C# 的运行时分配条件方法或添加预处理指令？

> ID：814337
> 
> 赞同：0
> 
> 时间：2009-05-02T07:26:16.397
> 
> 标签：c#, debugging, runtime, c-preprocessor

目的是能够在运行时从生产构建的数据库中打开调试调用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T07:30:23.000

不; 条件方法和预处理器指令的关键在于它们会导致编译器从最终的可执行文件中省略代码。这些的运行时等价物是一个`if`语句。

但是，[面向方面的编程](http://www.google.co.uk/search?q=.NET+AOP&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a)大致相当于您所要求的，因为它允许您将代码注入正在运行的程序中，否则该程序不会存在。

**编辑：**正如 Joe 提到的，这样做的方法是针对 log4net 之类的日志框架进行编程，该框架允许对记录的内容进行细粒度控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T07:29:23.767

不在预处理器级别。毕竟，您正在运行该过程的结果。当然，您可以将预处理器检查更改为普通代码检查，显然可以根据需要进行切换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-02T07:31:07.117

不，但大多数日志记录子系统都提供此功能。例如，使用 log4net 您可以动态更改日志记录级别，或者如果使用 System.Diagnostics.Trace 您可以动态更改[TraceSwitch](http://msdn.microsoft.com/en-us/library/system.diagnostics.traceswitch(VS.71).aspx)级别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-02T07:30:13.297

您显然不能影响二进制代码本身（如#if 语句）。

我通常做的是确保我的代码包含大量日志记录，这些日志记录由[跟踪开关](http://msdn.microsoft.com/en-us/library/system.diagnostics.traceswitch.aspx)激活。这样，您可以让系统在生产环境中运行而很少或没有日志记录，并且当您想研究一些问题时，您可以通过更改配置文件来打开日志记录。

# asp.net - 如何在只读的文本框中获取值

> ID：814341
> 
> 赞同：0
> 
> 时间：2009-05-02T07:29:06.750
> 
> 标签：asp.net, vb.net

我有一个文本框。在它的 onclick 中，我调用了一个 javascript fn 来调用 calendar.Texbox 是只读的。单击文本框日历即将到来，文本框中显示值。但是在单击我编写了要保存的代码的提交按钮时，我没有在文本框中获得价值。这可能是什么原因？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-02T07:44:13.500

我怀疑您的文本框具有[禁用](http://www.w3.org/TR/html401/interact/forms.html#h-17.12.1)属性而不是[只读](http://www.w3.org/TR/html401/interact/forms.html#h-17.12.2)属性，这会阻止它将其值发布到服务器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2010-01-16T15:28:12.347

我也有这个问题，有一个非常简单的解决方法

而不是使用属性选项使文本框只读。通过添加此代码背后的代码来执行此操作：

```
YourTextBox.Attributes.Add("readonly", "readonly"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-18T10:29:14.957

您可以使用

```
Request.Form[YourTextBox.UniqueID] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T20:11:02.220

我猜文本框被禁用了，所以人们必须使用日历控件来输入日期？文本框仅用于显示所选日期？

如果您希望文本框保持只读状态（即禁用客户端），则有一个隐藏的输入，该输入具有您要在服务器上处理的值，这可能是可行的方法。因此，为页面添加一个额外的输入。采用

```
<asp:HiddenField ... runat="server" /> 
```

因此，更新您的只读文本框的客户端代码也将更新您的隐藏输入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-11T11:51:04.533

如果 readonly 属性为真，它不会中断您的 .cs 调用。你可以像往常一样使用它：

这是您的输入：

```
<asp:TextBox ID="txtBraid" runat="server" Text="Im sooo readonly" ReadOnly="True"></asp:TextBox>
<asp:Label ID="lblBraid" runat="server" Text="Im gonna change, i promise"></asp:Label> 
```

在 .cs 页面上将这些放到 onClick 函数或其他东西上：

```
lblBraid.Text = txtBraid.Text; 
```

# css - 如何删除超链接图像周围的轮廓？

> ID：814366
> 
> 赞同：103
> 
> 时间：2009-05-02T07:41:11.760
> 
> 标签：css

当我们使用 CSS 进行文本替换并给出否定的测试缩进时，即`text-indent:-9999px`. 然后，当我们单击该链接时，虚线将如下面的示例图像所示。解决方案是什么？

[![在此处输入图像描述](https://i.stack.imgur.com/vihVF.gif)](https://i.stack.imgur.com/vihVF.gif)

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2011-02-14T16:25:24.723

对于删除锚标记的轮廓

```
a {outline : none;} 
```

从图像链接中删除轮廓

```
a img {outline : none;} 
```

从图像链接中删除边框

```
img {border : 0;} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-05-02T07:47:06.720

您可以在锚元素上使用 CSS 属性“outline”和“none”值。

```
a {
outline: none;
} 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-01-25T07:20:35.953

对于 Internet Explorer 9：

```
a:active, a:focus { 
 outline: none; 
 ie-dummy: expression(this.hideFocus=true);
} 
```

资料来源：[http ://social.msdn.microsoft.com/Forums/en-HK/ieextensiondevelopment/thread/1023adfd-bd73-47ac-ba9c-2bad19ac583a](http://social.msdn.microsoft.com/Forums/en-HK/ieextensiondevelopment/thread/1023adfd-bd73-47ac-ba9c-2bad19ac583a)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-05-02T22:52:06.797

请注意，焦点样式的存在是有原因的：如果您决定删除它们，通过键盘导航的人不再知道焦点是什么，因此您正在损害您网站的可访问性。

（将它们保留在适当的位置也有助于不喜欢使用鼠标的高级用户）

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-05-02T13:42:46.117

**Firefox**和**Internet Explorer (IE)**的边框效果是一样的，当你点击某个链接时它会变得可见。

此代码将仅修复 IE：

```
a:active { outline: none; }. 
```

而这个将**修复 Firefox 和 IE**：

```
:active, :focus { outline: none; -moz-outline-style: none; } 
```

如果您想从站点中删除链接边框，则应将最后的代码添加到您的样式表中。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-08-22T06:25:14.923

将此代码包含在您的样式表中

```
img {border : 0;}

a img {outline : none;} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-05-26T13:09:47.867

我希望这对你们中的一些人有用，它可用于从链接、图像和 Flash 以及 MSIE 9 中删除轮廓：

```
 a, a:hover, a:active, a:focus, a img, object, embed {
    outline: none;
    ie-dummy: expression(this.hideFocus=true); /* MSIE - Microsoft Internet Explorer 9 remove outline */
    } 
```

下面的代码能够隐藏图像边框：

```
 img {
    border: 0;
    } 
```

如果您想支持 Firefox 3.6.8 但不支持 Firefox 4... 单击输入 type=image 也会产生虚线轮廓，要在旧版本的 Firefox 中将其删除，则可以使用以下方法：

```
 input::-moz-focus-inner { 
   border: 0; 
   } 
```

IE 9 在某些情况下不允许删除链接周围的虚线轮廓，除非您在页面之间和页面中包含此元标记：

```
 <meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-12-01T16:02:26.460

这是适用于 Google Chrome 的最新版本

```
:link:focus, :visited:focus {outline: none;} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-02T07:58:41.013

`-moz-user-focus: ignore;`在基于 Gecko 的浏览器中（您可能需要 !important，具体取决于它的应用方式）

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-07-31T03:54:07.953

您可以将`overflow:hidden`文本缩进放在属性上，并且跨越页面的虚线将消失。

我看过几篇关于一起删除轮廓的帖子。这样做时要小心，因为您可能会降低网站的可访问性。

```
a:active { outline: none; } 
```

我个人只会使用这个属性，好像该`:hover`属性具有相同的 css 属性，它会阻止为使用键盘导航的人显示轮廓。

希望这能解决您的问题。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-11-24T14:59:49.360

像这样使用 HTML 4.01

`<img src="image.gif" border="0">`

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-05-31T07:56:43.433

为了删除虚线大纲href链接，您可以在您的css文件中编写：

```
a {
   outline: 0;
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-02-21T06:50:39.563

如果上述解决方案对任何人都不起作用。也试试这个

```
a {
 box-shadow: none;
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-05-14T20:17:10.980

我敢打赌，大多数用户不是使用键盘作为导航控件的用户类型。那么对于喜欢使用键盘导航的一小群人来说，惹恼大多数用户是否可以接受？简短的回答——取决于你的用户是谁。

此外，我在 Firefox 和 Safari 中没有以同样的方式看到这种体验。所以这个论点似乎主要是针对IE的。这完全取决于您的用户群和他们的知识水平——他们如何使用网站。

如果你真的想知道你在哪里并且你是一个键盘用户，你可以随时查看状态栏，因为你键入网站。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-02-26T10:05:01.663

这对我来说非常有用

`a img {border:none;}`

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-02-17T06:21:18.213

任何具有链接的图像都会在图像周围有一个边框，以帮助表明它是与旧浏览器的链接。将border="0" 添加到您的IMG HTML 标记将防止该图片在图像周围有边框。

但是，为每个图像添加边框 =“0”不仅会耗费时间，还会增加文件大小和下载时间。如果您不希望任何图像有边框，请创建包含以下代码的 CSS 规则或 CSS 文件。

img {边框样式：无；}

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-03-12T16:32:28.690

我不确定这对这个人来说是否仍然是一个问题，但我知道这对许多人来说可能是一种痛苦。当然，上述解决方案在**某些**情况下会起作用，但如果您使用 WordPress 等 CMS，并且大纲是由插件或主题生成的，您很可能**无法解决**此问题，具体取决于你是如何添加 CSS 的。

我建议有一个单独的样式表（例如，使用“ **Lazyest StyleSheet** ”插件），并在其中输入以下 CSS 以覆盖现有的插件（或主题）强制样式：

```
a:hover,a:active,a:link {
    outline: 0 !important;
    text-decoration: none !important;
} 
```

将 ' **!important** ' 添加到特定规则将使其优先生成，即使该规则可能在其他地方（无论是在插件、主题等中）。

这有助于节省开发时间。当然，您可以挖掘原始资源，但是当您处理许多项目时，或者需要执行更新（您的更改可以被覆盖 [*不建议！* ]），或者添加新插件或主题时，这是最好的求助以节省时间。

希望这会有所帮助……和平！

* * *

## 回答 #18

> 赞同：-9
> 
> 时间：2009-05-02T08:15:03.457

是的，我们可以使用。CSS 重置`a {outline:none}`为

* * *

`a:focus, a:active {outline:none}` 对于重置 CSS 的最佳实践，最佳解决方案是使用 common`:focus{outline:none}`如果您仍有最佳选项，请分享

# asp.net - 在 ASP.Net 中按标签名称选择静态 html 元素

> ID：814371
> 
> 赞同：0
> 
> 时间：2009-05-02T07:44:57.227
> 
> 标签：asp.net

有谁知道在服务器端的 ASP.net 页面中选择所有纯 HTML <p> 元素的方法？就我而言，我想在它们进入浏览器之前对它们进行一些文本操作。

我意识到我可以添加 runat=server 然后 FindControl 为每个。但这是很多代码。

这相当于 javascript 的 getElementsByTagName，但在服务器端。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T08:09:46.057

您可以将浏览器适配器用于页面：只是一个想法：来自 System.Web.UI.Page -> MyPage 的派生类

您应该创建 BrowserAdapter 并覆盖此页面的呈现，在输出中您会发现生成的 HTML 将转到客户端浏览器。在这种情况下，您可以进行一些 XSLT 突变，或简单的 XML(XPATH) 替换，结果您的任务将完成:)。

```
<browsers>
<browser refID="default">
    <controlAdapters>
        <adapter controlType="System.Web.UI.Page"
                 adapterType="yournamespace.TestAdapter" />
    </controlAdapters>
</browser> 
```

```
public class TestAdapter : PageAdapter
    {
        protected override void Render(HtmlTextWriter writer)
        {
            /* Get page output into string */
            var sb = new StringBuilder();
            TextWriter tw = new StringWriter(sb);
            var htw = new HtmlTextWriter(tw);

            // Render into my writer
            base.Render(htw);

            string page = sb.ToString();

                        // Here you can change output of render

            writer.Write(page);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T08:14:46.607

通过过滤处理程序的输出来考虑一个 Http 过滤器模块。

服务器上没有等效的 document.getElementsByTagName，除非每个单独的 p 标签都是 runat=server。

[http://msdn.microsoft.com/en-us/magazine/cc301704.aspx](http://msdn.microsoft.com/en-us/magazine/cc301704.aspx)

# regex - 双引号括号内的字符串

> ID：814375
> 
> 赞同：2
> 
> 时间：2009-05-02T07:47:43.380
> 
> 标签：regex, vim

我有如下一行。

fullname =（这是一个测试名称）；

我想双引号“（”和“）”内的所有字符串。

即 fullname = ("this" "is" "a" "test" "name");

有人可以给我一个 vim 正则表达式来做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-02T08:13:29.573

我会这样做：

```
:s/\<\w\+\>/"&"/gc 
```

由于确认开关“c”，您将被要求每次更换。回答“n”（否）替换“全名”，回答“a”（全部）替换该行的其余部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-02T08:15:56.167

这样做：

```
:%s/\v(\(.*)@<=[[:alnum:]]+(.*\))@=/"&"/g 
```

请注意，如果输入格式错误，使用正则表达式匹配嵌套模式（如括号中）将出错。上面根本不处理嵌套括号，引用或转义的括号也会破坏它。小心轻放。

内容如下：

```
:%s 替换所有行
/ 匹配
\v （打开“非常神奇”）
(\(.*)@<= 紧跟左括号的位置，在这一行
[[:alnum:]]+ 一系列字母数字字符（即“单词”）
(.*\))@= 后跟一个结束括号，在这一行
/ 用。。。来代替
"&" 匹配，用引号引起来
/g 全局

```

一个值得注意的事实是 vim 实际上确实支持可变长度的后视。大多数现代正则表达式实现都没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T07:53:26.270

此命令将除空格、制表符、等号、括号或分号之外的所有内容放在引号中：

```
:s/[^ \t=();][^ \t=();]*/"&"/g 
```

请注意，此引号`fullname`也是如此，但您可以手动删除这些引号。

有时值得手动完成部分工作，因为自动化会更慢。

运行命令：

```
:help substi 
```

获取有关 vim 中正则表达式替换的帮助。

# css - z-index css 弹出框和ie7

> ID：814377
> 
> 赞同：6
> 
> 时间：2009-05-02T07:49:46.590
> 
> 标签：css, firefox, internet-explorer-7, z-index

我有一些 div 框，在悬停时应该显示一个语音框。使用 jQuery 和 CSS 并没有什么难的。

但是，弹出语音出现在 IE7 中的邻居 div 下——我不能让它出现在它下面（见截图）。

我试图在不同的地方玩 z-index 没有成功。

**FF** [替代文字 http://img134.imageshack.us/img134/5314/63386894.png](http://img134.imageshack.us/img134/5314/63386894.png) **IE7** [替代文字 http://img396.imageshack.us/img396/9329/95483890.png](http://img396.imageshack.us/img396/9329/95483890.png)

**HTML**

```
<div class="boardshot_list">
    {% for ... %}

    <span class="img_box">
        <a  href="/site_media/xxx" target="_blank">
            <img class="trigger" src="xxx" alt="{{ item.title }}" />
        </a>

  <div class="container_speech_box popup">
   <div class="two">
    <b class="tl"><b class="tr"></b></b>
     <p>
     blabla
     </p>
    <b class="bl"></b><b class="br"><b class="point"></b></b>
   </div>
  </div>

 </span>

    {% endfor %}

    </div> 
```

**CSS**

```
div.boardshot_list span.img_box {
 display:block;
 width:220px;
 height:180px;
 float: left;
 margin: 0 10px 10px 0;
 position: relative;
}
img.trigger{
 border:1px solid #373743;
}
div.popup
{
    display: none; 
    position: absolute; 
 z-index: 50;
}

/* POPUP rounded box */
.container_speech_box div:after {content: "."; display: block; height:11px; clear:both; visibility:hidden;}
.container_speech_box div {width:300px; height:auto; font-family:verdana; font-size:11px;}
b.tl {display:block; width:300px; height:8px; font-size:1px;}
b.tr {display:block; width:292px; height:8px; font-size:1px; float:right;}
b.bl {display:block; width:8px; height:8px; font-size:1px; float:left;}
b.br {display:block; width:292px; height:8px; font-size:1px; float:right; position:relative;}
b.point {display:block; font-size:1px; width:25px; height:14px;}
.container_speech_box div p {padding:8px; margin:0; border:3px solid #4f5b69; border-width:0 3px; text-align:justify;}

div.two b.tl {background:url(/site_media/images/top_left2.gif) top left no-repeat;}
div.two b.tr {background:url(/site_media/images/top_right2.gif) top right no-repeat;}
div.two p {background:#fff;}
div.two b.bl {background:url(/site_media/images/bottom_left2.gif) top left no-repeat;}
div.two b.br {background:url(/site_media/images/bottom_right2.gif) top right no-repeat;}
div.two b.point {background:url(/site_media/images/point2.gif) top left no-repeat; margin:5px 0 0 125px;}

/* end popup table */

div.boardshot_list {
 width: 700px;
 clear: left;
 min-height: 80px;

}
div.boardshot_list .memo_id {
 padding-left: 10px;
 position: relative;
 float:right;
 color:#60564d;
 font-size: 25px;
 padding-top: 20px;
 width: 50px;
 top: 30px;
 left: 10px;
 font-family:"Palatino Linotype","Book Antiqua",Palatino,FreeSerif,serif;
}

div.boardshot_list.even {
 background-color: #f3f5f6;

}

div.boardshot_list .title span{
 color: #bbb;
 font-weight: normal;
}

div.boardshot_list .img img {
 border:1px solid #373743;
} 
```

**JS**

```
 <script type="text/javascript">
    $(document).ready(function(){

 $('.img_box').each(function () {
     // options
     var distance = 10;
     var time = 250;
     var hideDelay = 50;
     var hideDelayTimer = null;

     // tracker
     var beingShown = false;
     var shown = false;

     var trigger = $('.trigger', this);
     var popup = $('.popup', this).css('opacity', 0);

     // set the mouseover and mouseout on both element
     $([trigger.get(0), popup.get(0)]).mouseover(function () {
       // stops the hide event if we move from the trigger to the popup element
       if (hideDelayTimer) clearTimeout(hideDelayTimer);

       // don't trigger the animation again if we're being shown, or already visible
       if (beingShown || shown) {
         return;
       } else {
         beingShown = true;
         // reset position of popup box
         popup.css({
           top: -10,
           left: 20,
           display: 'block' // brings the popup back in to view
         })

         // (we're using chaining on the popup) now animate it's opacity and position
         .animate({
           top: '-=' + distance + 'px',
           opacity: 0.9
         }, time, 'swing', function() {
           // once the animation is complete, set the tracker variables
           beingShown = false;
           shown = true;
         });
       }
     }).mouseout(function () {
       // reset the timer if we get fired again - avoids double animations
       if (hideDelayTimer) clearTimeout(hideDelayTimer);

       // store the timer so that it can be cleared in the mouseover if required
       hideDelayTimer = setTimeout(function () {
         hideDelayTimer = null;
         popup.animate({

           opacity: 0
         }, time, 'swing', function () {
           shown = false;
           popup.css('display', 'none');
         });
       }, hideDelay);
     });
   });
});

    </script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-03T03:31:42.193

我认为这是由于`z-index`Internet Explorer 中的错误。定位的元素（即带有非 的元素`position`）`static`建立它们自己的堆叠上下文。

[http://www.quirksmode.org/bugreports/archives/2006/01/Explorer_z_index_bug.html](http://www.quirksmode.org/bugreports/archives/2006/01/Explorer_z_index_bug.html)

以我的经验，就好像你的所有元素`div.boardshot_list span.img_box`都有一个 z-index `0`，每个里面的元素`div.boardshot_list span.img_box`都有一个`z-index`es `0.1`，`0.2`依此类推，而不是`1`and `2`。

您应该能够通过将`span.img_box`包含可见弹出窗口的 z-index 设置为 来解决此问题`1`，如下所示：

```
// reset position of popup box
popup.css({
    top: -10,
    left: 20,
    display: 'block' // brings the popup back in to view
})

$(this).css('z-index', '1'); 
```

不要忘记将其重置为`0`弹出窗口消失时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T08:16:58.223

这可能是因为不同浏览器中的multiple classes ( `.container_speech_box and .popup`) 样式解析冲突。尝试将 .popup div 包裹在 .container_speech_box 周围。

# php - php xpath - 获取最后一个属性

> ID：814382
> 
> 赞同：1
> 
> 时间：2009-05-02T07:56:21.253
> 
> 标签：php

如果某些nong在同一个标​​签中不小心多次输入了同一个属性，我该如何选择最后一个？？？（默认情况下，它似乎选择第一个......我不确定这是否是属性层次结构在 html 中的工作方式？）

使用下面的示例...

查询：“./@href”
标签：
预期结果：“2.html”
结果：“1.html”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-02T09:33:50.410

然后你得到一个

```
警告：DOMDocument::loadXML()：在实体中重新定义了属性 href
```

load()/loadxml()
[W3C 上的消息说](http://www.w3.org/TR/REC-xml/#attdecls)：

> 当为给定元素类型的同一属性提供多个定义时，第一个声明是绑定的，后面的声明将被忽略。

# sql-server-2000 - 我可以在表格视图上使用全文搜索吗

> ID：814385
> 
> 赞同：0
> 
> 时间：2009-05-02T07:59:35.990
> 
> 标签：sql-server-2000

我正在使用 sql server 2000 我可以在表格视图上使用全文搜索..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T08:27:24.113

不可以。SQL Server 2000 全文搜索不**直接**支持视图的全文索引。*但是，您可以在*视图中包含全文查询，但不能在 SQL Server 2000 中*的视图上*创建全文索引。

# php - php xpath - 属性上的字符串函数

> ID：814391
> 
> 赞同：0
> 
> 时间：2009-05-02T08:06:52.633
> 
> 标签：php, xpath

使用下面的 xpath 查询在属性上应用字符串函数（例如“normalize-space”）的正确语法是什么？

查询：“./@media”

我在其他地方看到过这样的例子，但如果我使用 php 的 xpath 库尝试它，它什么也不返回......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-02-27T21:43:19.397

使用[评估（）](http://www.php.net/manual/en/domxpath.evaluate.php)而不是`query()`。它将返回一个类型化的结果。它从 PHP 5.1 开始可用。

```
$doc = new DOMDocument();
$xpath = new DOMXpath($doc);
$q = $xpath->evaluate('"test"');
var_dump($q); 
```

输出：

```
string(4) "test" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T09:27:02.800

在 DOMXPath 对象上使用[query()](http://us2.php.net/manual/en/domxpath.query.php)将*始终*生成节点集（包装在[DOMNodeList](http://us2.php.net/manual/en/class.domnodelist.php)对象中），而不是字符串。

您无法提取 XPath 函数的结果。您必须查询要处理的节点，并在 PHP 中处理它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T08:47:22.583

```
./[normalize-space(@media) 
```

请试试这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-02T09:18:02.900

这个怎么样？

```
normalize-space(./@media) 
```

你也可以试试：

```
normalize-space(string(./@media)) 
```

但我认为这里没有必要。

# jquery - 日期选择器上的事件 mouseout

> ID：814397
> 
> 赞同：2
> 
> 时间：2009-05-02T08:10:36.697
> 
> 标签：jquery, plugins, datepicker, bind, mouseout

有人可以解释一下这段代码是如何工作的吗

因为，我不知道我是否应该将代码放在插件文件或页面之外的 de head 部分

我还需要注意什么

代码来自[http://www.kelvinluck.com/assets/jquery/datePicker/v2/demo/datePickerCloseMouseOut.html](http://www.kelvinluck.com/assets/jquery/datePicker/v2/demo/datePickerCloseMouseOut.html)

在此先感谢，理查德

（另外，我也不知道 wat cal 指的是什么，datePickerDiv 和 $('.date-pick')？）

```
 $(function() 
{ 
   var cal; 
   var $this; 

   var checkForMouseout = function(event) 
   { 
      var el = event.target; 

      while (true){ 
         if (el == cal) { 
            return true; 
         } else if (el == document) { 
            $this.dpClose(); 
            return false; 
         } else { 
            el = $(el).parent()[0]; 
         } 
      } 
   }; 

   $('.date-pick') 
      .datePicker() 
      .bind( 
         'dpDisplayed', 
         function(event, datePickerDiv) 
         { 
            cal = datePickerDiv; 
            $this = $(this); 
            $(document).bind( 
               'mouseover', 
               checkForMouseout 
            ); 
         } 
      ).bind( 
         'dpClosed', 
         function(event, selected) 
         { 
            $(document).unbind( 
               'mouseover', 
               checkForMouseout 
            ); 
         } 
      ); 

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T08:43:06.900

此代码将检查鼠标是否离开 datepicker div，如果鼠标离开则关闭它。代码通过检查接收事件的元素是否是日历来检查这一点。

```
//el is set above or below, call is set globally in the document.ready
while (true){ //this will loop forever until a return
     if (el == cal) { //is the receiving element the calender
        return true; //we return true (no ideo why true and not null or 'yaadada'
     } else if (el == document) { //we check if the target el is the document
        $this.dpClose();  //close the element
        return false; //return to leave loop
     } else { //el is neither the call or the document
        el = $(el).parent()[0]; //set el to the imidiate parent of the current el and reloop
     }
} 
```

您应该将此代码放在文档的开头。

更容易的是这段代码：

```
$('.date-pick') 
  .datePicker() 
  .bind( 
     'dpDisplayed', 
     function(event, datePickerDiv) 
     { 
        cal = datePickerDiv; //datepickerdiv should somehow hold the the datpicker div , something like: $('.date-pick')[0];
        $this = $(this); 
        $(cal).mouseleave( function() { $(this).dpClose(); });
     }
} 
```

一个更好的问题可能是，你为什么不包含你不知道它做什么的代码？

注意：这段代码非常难看，你应该考虑重写它。

# svn - 如何在 Subversion 中返回旧版本的代码？

> ID：814433
> 
> 赞同：515
> 
> 时间：2009-05-02T08:35:42.813
> 
> 标签：svn, backport

我正在和朋友一起做一个项目，我想返回旧版本的代码并将其设置为当前版本。我该怎么做？

我在 vs08 上使用“anksvn”。

我的 PC 上有我想要的版本，但提交失败；我收到的消息是“提交失败，文件或目录已过期。”

我的 PC 上也有 subversion 客户端。

* * *

## 回答 #1

> 赞同：818
> 
> 时间：2009-05-02T08:38:28.500

基本上你需要“向后合并” - 将当前版本和以前版本之间的差异应用于*当前*版本（这样你最终会得到一个看起来像旧版本的工作副本）然后再次提交。因此，例如从修订版 150（当前）回到修订版 140：

```
svn update
svn merge -r 150:140 .
svn commit -m "Rolled back to r140" 
```

Subversion 红皮书对此有[很好的部分](http://svnbook.red-bean.com/en/1.8/svn.branchmerge.basicmerging.html#svn.branchmerge.basicmerging.undo)。

* * *

## 回答 #2

> 赞同：180
> 
> 时间：2009-05-02T09:43:51.200

您只能在颠覆历史记录的**开头提交新的更改。**

您无法直接使用 PC 上的良好副本执行任何操作的原因是它的`.svn`文件夹知道它是过去的代码，因此需要在任何提交之前进行更新。

# 找到好的修订号并还原

1.  找到您想要的旧副本的修订号。

    通过以下方式获取*当前*版本：

    ```
    svn info --show-item revision
    # or
    svn log 
    ```

    或者要检查项目的*旧*版本，请使用：

    ```
    svn update -r <earlier_revision_number> 
    ```

    直到找到正确的修订号。

2.  记下正确的修订号（假设`123`以下示例）。

3.  更新到最新版本：

    ```
    svn update 
    ```

4.  撤消您想要的修订版和最新版本之间的所有更改：

    ```
    svn merge -r HEAD:123 .
    svn commit -m "Reverted to revision 123" 
    ```

    （与上面 Jon Skeet 的回答相同。）

# 如果找不到修订号

如果找不到旧副本，而只想提交当前 PC 上的文件：

1.  制作好版本的副本（但没有任何`.svn`文件夹）：

    ```
    cd ..
    rsync -ai --exclude=.svn  project/  project-good/ 
    ```

2.  现在确保您拥有最新版本：

    ```
    cd project
    svn update
    # or make a fresh checkout
    svn checkout <url> 
    ```

3.  将您的好版本复制到工作副本的顶部。

    此命令将复制并删除工作树中不在您的好副本中的所有文件，但不会影响现有`.svn`文件夹。

    ```
    cd ..
    rsync -ai --exclude=.svn --delete  project-good/  project/ 
    ```

    如果您没有 rsync，您可以使用`cp -a`，但您还需要手动删除任何不需要的文件。

4.  你应该能够提交你现在拥有的东西。

    ```
    cd project
    svn commit -m "Reverted to good copy" 
    ```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2013-03-27T13:21:28.240

只需使用此行

> svn update -r yourOldRevesion

您可以通过以下方式了解您当前的版本：

> svn信息

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2009-07-02T20:39:44.910

如果您想要这样做，使用合并撤消整个签入的标准方法效果很好。但是，有时您想要做的只是还原单个文件。没有合法的方法可以做到这一点，但是有一个技巧：

1.  使用 svn log 找到你想要的版本。
2.  使用 svn 的 export 子命令：

    svn 导出[http://url-to-your-file@123](http://url-to-your-file@123) /tmp/filename

（其中 123 是文件的好版本的修订号。）然后移动或复制该单个文件以覆盖旧文件。签入修改后的文件，您就完成了。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-09-02T10:53:15.687

**有点老派**

```
svn diff -r 150:140 > ../r140.patch
patch -p0 < ../r140.patch 
```

然后通常

```
svn diff
svn commit 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-04-13T07:42:41.477

我认为这是最适合的：

向后合并，例如，如果提交的代码包含从 rev 5612 到 5616 的修订，则只需向后合并。它对我有用。

例如：

```
svn merge -r 5616:5612 https://<your_svn_repository>/ 
```

它将包含一个合并的代码回到以前的版本，然后你可以提交它。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-02-28T20:08:13.787

这就是我所做的和为我工作的。

我想撤消我在某些时间所做的多次提交中的更改，并想转到上一个提交点。

1.  转到团队 -> 显示历史记录。
2.  右键单击要忽略的修订版或修订版范围。
3.  选择“还原更改”选项。

这将运行反向合并，撤消工作副本中的更改。

只需查看代码并提交即可。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-02T08:40:04.037

右键单击要还原的最高层次 >>`Revert`或`Revert to Revision`

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-05-24T12:48:18.260

以前的大多数答案都使用了反向合并，这通常是正确的答案。但是，有一种情况（这只是发生在我身上）不是。

在进行小改动时，我不小心将带有 Unix 行结尾的文件更改为 DOS 行结尾，并提交了它。这很容易撤消，无论是通过更改行尾并再次提交，还是通过反向合并，但它具有将`svn blame`我的编辑列表作为文件每一行的源的效果。（有趣的是，Windows 上的 TortoiseSVN 不受此影响；只有命令行`svn blame`。）

如果您想维护所报告的历史记录`svn blame`，我认为您需要执行以下操作：

*   删除文件并提交。
*   在存储库中，将文件的先前良好副本复制到头部，并提交。
*   恢复您想要保留的任何编辑。

删除有点吓人，但请记住，您始终将文件保存在存储库中，因此恢复它并不是什么大问题。这里有一些代码来说明这些步骤。假设这`xxx`是最后一个好的副本的修订号。

```
svn rm svn+ssh://path/to/file
svn copy svn+ssh://path/to/file@xxx svn+ssh://path/to -m"Restore good copy"
svn update
<restore the edits>
svn commit -m"Restore edits" 
```

请注意，对于存储库中的副本，目标需要是目录，而不是文件名。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-04-12T16:11:12.460

这个页面上有很多危险的答案。请注意，从 SVN 版本 1.6 开始，执行 update -r 可能会导致树冲突，这会迅速升级为潜在的数据丢失 kafkeresque 噩梦，您需要在谷歌上搜索有关树冲突的信息。

恢复到版本的正确方法是：

```
svn merge -r HEAD:12345 . 
```

其中 12345 是版本号。不要忘记点。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-02T08:38:09.780

同步到旧版本并提交。这应该可以解决问题。

[这](http://svnbook.red-bean.com/en/1.8/svn.branchmerge.basicmerging.html#svn.branchmerge.basicmerging.undo)也是撤消更改的解释。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-09-06T13:11:08.983

右键单击项目 > 替换为 > 修订或 URL > 选择要还原的特定修订。

现在将本地更新代码版本提交到存储库。这会将代码库恢复到特定的修订版。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-05-23T11:09:37.347

简而言之，Jon Skeet 的答案几乎就是解决方案，但是如果您像我一样，您可能需要一个解释。Subversion 手册将此称为

# 樱桃采摘合并

从手册页。

> 2.  这种形式称为 'cherry-pick' 合并：'-r N:M' 指的是修订版 N 和 M 之间源分支历史记录的差异。
>     
>     
>     
>     “反向范围”可用于撤消更改。例如，当源和目标引用同一分支时，可以“撤消”先前提交的修订。在**反向范围内**，'-r N:M' 中的 N 大于 M，或者'-c' 选项与负数一起使用：'-c -M' 等价于 '-r M:'。撤消这样的更改也称为执行“反向合并”。

* * *

> *   如果源是文件，则差异将应用于该文件（对于反向合并早期更改很有用）。否则，如果源是目录，则目标默认为“.”。
>     
>     
>     
>     在正常使用中，工作副本应该是最新的，只有一次修订，没有本地修改和切换子树。

例子：

```
svn merge -r 2983:289 path/to/file 
```

这将用来自服务器的修订版 289 替换本地副本 [2983]（根据上面的引用，它应该与服务器同步 - 您的责任）。更改发生在本地，这意味着如果您有一个干净的签出，那么可以在提交之前检查更改。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-03-24T11:47:16.377

以下对我有用。

我有很多本地更改，需要丢弃本地副本中的那些并检查 SVN 中的最后一个稳定版本。

1.  检查所有文件的状态，包括被忽略的文件。

2.  grep 所有行以获取新添加和忽略的文件。

3.  用 替换那些`//`。

4.  和`rm`-rf 所有行。

    ```
    svn status --no-ignore | grep '^[?I]' |  sed "s/^[?I] //" | xargs -I{} rm -rf "{}" 
    ```

# asp.net - 每个的 GridView

> ID：814444
> 
> 赞同：2
> 
> 时间：2009-05-02T08:45:36.830
> 
> 标签：asp.net, vb.net, gridview, foreach

我有一个显示项目详细信息的网格视图，我添加了两个模板字段，一个是复选框，另一个是文本框，我想要的只是检查客户想要购买的所有项目，并在文本框中写下数量，当我点击一个按钮时，我应该检查 gridview 中的所有行，当复选框被选中时，我应该将文本框中的值与名为 Quantity 的 gridview 的数据绑定字段中的值进行比较，然后继续我的订单功能。 ..

我知道这听起来太多了，所以任何形式的帮助都非常感谢......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-02T08:59:08.483

如果您的问题是“如何遍历 GridView 的行”，那么我的回答如下：

```
int count = gridView1.Rows.Count;

for(int i=0; i < count; i++)
{
  GridViewRow row = gridView1.Rows[i];
  CheckBox cb = row.FindControl("CheckBoxID") as CheckBox;
  //Check if CheckBox is checked
  if(cb != null && cb.Checked) 
  {
    // Logic here.
  }
} 
```

# database - 数据库设计草图

> ID：814447
> 
> 赞同：0
> 
> 时间：2009-05-02T08:49:48.957
> 
> 标签：database, database-design, normalization

任何人现在什么是数据库的设计草案？？？是否是设计过程和步骤，例如：

*   确定数据库的用途
*   查找并整理所需信息
*   将信息分成表格
*   将信息项变成列
*   指定主键
*   设置表关系
*   完善您的设计
*   应用规范化规则

或者是别的什么？？？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T08:58:39.107

任何事物的草稿都是初步（或粗略）草图。它可以是设计、图片或文档等。它通常不是最终的，并且通常表示一个迭代过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T09:12:28.670

草案版本是您提出的。它不是最终版本，可以根据需要进行修改。在您的情况下，草稿版本必须包含您为数据库设计提供的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T08:58:02.197

它是一个松散的术语，取决于您在做什么，如果您正在计划或分析，它可能指的是您提到的内容，或者它可能是您认为数据库外观的简单丢弃原型，并为您提供更多对您的数据库有切实的感觉...

# assembly - 术语：汇编语言编程中的“寄存器”

> ID：814448
> 
> 赞同：8
> 
> 时间：2009-05-02T08:51:10.747
> 
> 标签：assembly, cpu-registers

我听说过这些术语：寄存器、硬件寄存器、程序寄存器、寄存器文件。

所有这些有什么区别？在汇编中，EAX 寄存器的类型是什么？程序寄存器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-02T08:55:59.050

寄存器是 CPU 内部的存储区域。以下是一些定义：

*   寄存器文件是一组寄存器 - 完整描述请参见[http://en.wikipedia.org/wiki/Register_file](http://en.wikipedia.org/wiki/Register_file)。
*   eax 寄存器是 Intel x86 系列 CPU 的累加器寄存器 - 它是完成整数数学运算的地方。
*   程序寄存器（我认为您的意思是程序计数器）是一个特殊用途的寄存器，其中包含要执行的下一条机器代码指令的地址

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-02T09:37:14.537

寄存器是最基本的数据存储设备。现在这些是主要的区别。

寄存器文件通常是以这样的方式组织的大量寄存器集合，以便它们用于计算。在现代处理器中，所有计算都是在存储在寄存器文件中的几个寄存器中的值之间执行的。

硬件寄存器一般是指存储配置和状态信息的寄存器。这可能用于处理器或某些外部硬件 I/O 设备。

程序寄存器可以指程序计数器，一种特殊的寄存器，用于存储处理器正在执行的当前指令的内存位置。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-02T08:53:45.157

寄存器是位于 CPU 内部的一小块内存。并被汇编语言用来执行各种任务。

程序寄存器是指程序计数器吗？

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-02T09:02:03.217

嗯，你有通用寄存器，然后你有特殊用途的寄存器（例如，程序计数器寄存器），还有其他各种（内存/段寄存器，SSE）。

EAX、EBX 等是标准的通用寄存器。您可以将它们用于任何您想要的。通常，应该将返回值放入 EAX，但基本上就是这样。然后你有堆栈指针 EBP，它指向你的堆栈的开头。最后，您必须对指向当前指令 EIP 的计数器进行编程。在 x86 上，有一些特殊情况，其中两个寄存器在进行 64 位整数计算时融合在一起。字符串指令存在更多特殊情况。如果您要学习汇编，最简单的方法是从具有更多寄存器的 PowerPC 开始，您可以不受限制地自由使用所有寄存器。

所有这些寄存器当然都是硬件寄存器，也就是说，它们是物理内置在你的 CPU 中的；）它们所在的地方称为寄存器文件。

您可以看到的另一种类型的寄存器是，如果您有一个使用寄存器 ( [Parrot](http://www.parrot.org/) ) 的虚拟机，您将获得“虚拟寄存器”，然后将其分配给真实寄存器。这类似于您在自己编写编译器时可以做的事情，您基本上假设了无限数量的寄存器（也就是说，您在每次使用时生成一个新寄存器），并在不同的阶段（寄存器分配）对真实寄存器进行转换）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-02T09:19:44.330

“硬件寄存器”也可能指某个硬件设备内的位置。例如，一个 UART（COM 端口）看起来像一个 D 形连接器，带有 9 或 25 个引脚从机柜外部，但对于设备驱动程序来说，它看起来像几个配置寄存器、一个状态寄存器和保存下一个字符的数据寄存器发送和接收到的最后一个字符。（我在那里遗漏了*很多*细节。）

在 x86 架构中，这些寄存器通常位于通过 I/O 指令访问的特殊物理地址空间中。在其他平台中，硬件寄存器通常映射到正常内存空间的某个角落。在任何一种情况下，操作系统及其设备驱动程序的重要作用之一是防止应用程序代码需要知道硬件寄存器的位置及其含义的详细信息。

在某些类型的硬件设备中，内存和硬件寄存器之间的区别不太清楚。例如，您的视频适配器包含一个称为帧缓冲区的内存块，用于保存每个像素的颜色和亮度值。该内存是一个大型硬件寄存器还是只是一个具有有趣副作用的缓冲区？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-28T03:09:44.973

关于这个问题，您应该考虑两种一般类型的寄存器：

*   程序寄存器
*   硬件寄存器

硬件寄存器是有时钟的（在时钟节拍上更新）并用于处理器电路的**物理**设计。

程序寄存器是随机存取存储器，保存在 CPU 中的寄存器文件中。汇编/机器代码指令通过 %eax、%esp、%rdi、%edi 等名称访问这些寄存器。

# sql - 实体框架抛出“System.Data.EntityException：底层提供程序在打开时失败。” 在移动 10k+ 条记录时

> ID：814449
> 
> 赞同：1
> 
> 时间：2009-05-02T08:52:25.067
> 
> 标签：sql, entity-framework

我有一个应用程序，我在同一个数据库中将数据从一个表移动到另一个表（完成了一些简单的计算）。我使用实体框架从第一个表中选择数据并将其添加到另一个表中。我尝试传输appx。100k 行，问题是它似乎终止了与我的数据库的连接。运行一段时间后，我收到以下错误。有谁知道为什么会发生这种情况？注意。我正在运行 ms 2008 express。

```
See the end of this message for details on invoking 
just-in-time (JIT) debugging instead of this dialog box.

************** Exception Text **************
System.Data.EntityException: The underlying provider failed on Open. ---> System.Data.SqlClient.SqlException: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No connection could be made because the target machine actively refused it.)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, SqlConnection owningObject)
   at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnection owningObject)
   at System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(String host, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, Int64 timerStart)
   at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
   at System.Data.SqlClient.SqlConnection.Open()
   at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure)
   --- End of inner exception stack trace ---
   at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure)
   at System.Data.EntityClient.EntityConnection.Open()
   at System.Data.Objects.ObjectContext.EnsureConnection()
   at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
   at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at System.Data.Objects.ELinq.ObjectQueryProvider.<GetElementFunction>b__0[TResult](IEnumerable`1 sequence)
   at System.Data.Objects.ELinq.ObjectQueryProvider.ExecuteSingle[TResult](IEnumerable`1 query, Expression queryRoot)
   at System.Data.Objects.ELinq.ObjectQueryProvider.System.Linq.IQueryProvider.Execute[S](Expression expression)
   at System.Linq.Queryable.First[TSource](IQueryable`1 source)
   at DataExtractProgram.Form1.ect()
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINDOWS/Microsoft.NET/Framework64/v2.0.50727/mscorlib.dll
----------------------------------------
DataExtractProgram
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///C:/Documents%20and%20Settings/Administrator/Local%20Settings/Apps/2.0/6LPXQTY9.K57/NMK5LWCH.01M/data..tion_edf9c07719516f7e_0001.0000_b19bec20c89bf848/DataExtractProgram.exe
----------------------------------------
System.Windows.Forms
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Windows.Forms/2.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System/2.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Drawing
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Drawing/2.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
DataLayer
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///C:/Documents%20and%20Settings/Administrator/Local%20Settings/Apps/2.0/6LPXQTY9.K57/NMK5LWCH.01M/data..tion_edf9c07719516f7e_0001.0000_b19bec20c89bf848/DataLayer.DLL
----------------------------------------
System.Data.Entity
    Assembly Version: 3.5.0.0
    Win32 Version: 3.5.30729.1 built by: SP
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Data.Entity/3.5.0.0__b77a5c561934e089/System.Data.Entity.dll
----------------------------------------
System.Core
    Assembly Version: 3.5.0.0
    Win32 Version: 3.5.30729.1 built by: SP
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Core/3.5.0.0__b77a5c561934e089/System.Core.dll
----------------------------------------
BusinessLayer
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///C:/Documents%20and%20Settings/Administrator/Local%20Settings/Apps/2.0/6LPXQTY9.K57/NMK5LWCH.01M/data..tion_edf9c07719516f7e_0001.0000_b19bec20c89bf848/BusinessLayer.DLL
----------------------------------------
System.Data
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_64/System.Data/2.0.0.0__b77a5c561934e089/System.Data.dll
----------------------------------------
System.Configuration
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Configuration/2.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll
----------------------------------------
System.Xml
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Xml/2.0.0.0__b77a5c561934e089/System.Xml.dll
----------------------------------------
System.Web
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_64/System.Web/2.0.0.0__b03f5f7f11d50a3a/System.Web.dll
----------------------------------------
System.Runtime.Serialization
    Assembly Version: 3.0.0.0
    Win32 Version: 3.0.4506.2152 (SP.030729-0100)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Runtime.Serialization/3.0.0.0__b77a5c561934e089/System.Runtime.Serialization.dll
----------------------------------------
System.Transactions
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_64/System.Transactions/2.0.0.0__b77a5c561934e089/System.Transactions.dll
----------------------------------------
System.EnterpriseServices
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_64/System.EnterpriseServices/2.0.0.0__b03f5f7f11d50a3a/System.EnterpriseServices.dll
----------------------------------------
Anonymously Hosted DynamicMethods Assembly
    Assembly Version: 0.0.0.0
    Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_64/mscorlib/2.0.0.0__b77a5c561934e089/mscorlib.dll
----------------------------------------

************** JIT Debugging **************
To enable just-in-time (JIT) debugging, the .config file for this
application or computer (machine.config) must have the
jitDebugging value set in the system.windows.forms section.
The application must also be compiled with debugging
enabled.

For example:

<configuration>
    <system.windows.forms jitDebugging="true" />
</configuration>

When JIT debugging is enabled, any unhandled exception
will be sent to the JIT debugger registered on the computer
rather than be handled by this dialog box. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T08:58:29.607

很难说，但看看轰炸时哪些连接处于活动状态会很有趣......也许它以某种方式产生了多个......

然而; 对于传输大量数据，我通常会推荐一个存储过程（如果可以在数据库中完成处理） - 或者如果您需要更丰富的代码，比如`SqlBulkCopy`挂钩到一个`IDataReader`- 这将允许您将数据从一个表流式传输到另一个具有最小的缓冲/开销。

将任意数据源表示为`IDataReader`（提供给`SqlBulkCopy`）是一种痛苦，但您可以使用[`SimpleDataReader`](http://groups.google.co.uk/group/microsoft.public.dotnet.languages.csharp/msg/b1d70b504cdee2ad)它。您还可以`ExecuteReader`在源上使用`SqlCommand`来使用源中的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T09:05:51.557

> 我将数据从同一个数据库的一个表移动到另一个表（完成了一些简单的计算）

我不确定你为什么不只是在做：

```
insert into destination_table( a, c, f, m, n, p)
select a, b, c, d + e, f * c + .1 * b, g || h 
from source_table
where some_predicate; 
```

也就是说，包括您在选择中的所有计算。

# php - php xpath - 仅获取标签属性/删除内部标签内容

> ID：814471
> 
> 赞同：3
> 
> 时间：2009-05-02T09:07:37.807
> 
> 标签：php

我如何能：

1.  隐藏xpath“/html/head”查询中head标签之间的所有内容？

例如，在“ `<html><head><title>some title</title>some text</head>`...”上会产生 nodeValue = “some title some text”，这是不相关的，因为我只需要标签属性，不需要将不相关的数据添加到我的数据库中。

2.  隐藏xpath“/html/body”查询中的所有子/后代节点？

例如，在“ `<html><body><div>some anchor</div>some text</body>`...”上会产生 nodeValue = “some anchor some text” “some text” 与 body 标签相关，我确实需要保留它并处理其他所有内容。

我也不想完全从 dom 文档中删除它们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T21:15:28.703

> 这无关紧要，因为我只需要标签属性

我不确定您的示例中的属性在哪里。而且我不是 PHP xpath 实现专家。

但是，您可以尝试以下方法：

*   `text()`在表达式末尾使用xpath 函数（例如`"/html/head/text()"`）仅获取文本节点，而不是标签
*   xpath 函数应该返回一个 NodeList。您应该使用它来获取整个片段 XML - 例如[DOMXpath](http://us2.php.net/domxpath)就是这样做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T19:14:51.997

在那种情况下，也许像这样的 preg_match 可能是您需要的？

```
preg_match( '/<head (.*)>/', $file_contents, $matches );
echo ( isset( $matches[1] ) ) ? $matches[1] : ''; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T09:27:53.750

**编辑：** 关于 head 元素-您只想获取 head 元素的属性，可以使用 xpath("//head")[然后 $head->attributes](http://bg.php.net/manual/en/function.simplexml-element-attributes.php)。

我不会直接回答你的问题，这个问题不是很详细，但我宁愿讲一个我自己的经历的故事。我相信，如果您了解我给出的示例的含义，您可以解决您的问题。

我从标签中了解到您想在工作中使用 PHP。我最近遇到了类似的问题，我必须解析大约 100 个静态 html 文档，并提取部分信息以将其放入数据库中。最初我考虑的是正则表达式，但随着我的研究，我发现这将是一项乏味的任务。

所以我最终弄乱了 PHP 中的 XPath 和 SimpleXML。

这是我的结果：

```
$file_contents = file_get_contents( $file );
$dom = new DOMDocument;
$dom->loadHTML( $file_contents );
$document = simplexml_import_dom( $dom ); 
```

现在我有一个包含 HTML 代码的 SimpleXML 对象。这真的很棒 - 这是它的滚动方式：

假设您有以下 html 代码：

```
<div id="content">
<div class="description">
    <dl>
        <dt>Title</dt>
        <dd>
            <ul><li> first item </li> <li> second item</li></ul>
            <p> a paragraph.. </p>
        </dd>
    </dl>
</div>
</div> 
```

现在，您可以遍历代码中的所有 <dl> 元素，它们是 div#description 的子元素和 div#content 的孙子元素，如下所示：

```
foreach( $document->xpath( "//div[@id='content']/div[@class='description']/dl" ) as $element ) 
```

然后通过像这样的递归函数解析所有孩子：

```
function recurse( $parent )
{
echo '<' . $parent->getName() . '>' . "\n";
#echo $parent # you might want to strip any white spaces like \t and \n here

foreach( $parent->children() as $child )
{
    if( count( $child->children() ) > 0 )
    {
        recurse( $child );
    }
    else
    {
       echo '<' . $child->getName() . '>';
       echo $child;
       echo '</' . $child->getName() . '>' . "\n";
    }
}
echo '</' . $parent->getName() . '>' . "\n";
} 
```

我希望我对你有所帮助，祝你好运！

# java - 需要一个算法来解决这个问题

> ID：814472
> 
> 赞同：-4
> 
> 时间：2009-05-02T09:07:49.303
> 
> 标签：java, php, algorithm

这是约束

*   我有三个桶（水）容量 10 升、2 升和 50 升。
*   再给我一桶 0 到 100 升的水
*   我必须按顺序装满水桶，先装 10 个，然后装 2 个，最后装 50 个。任何额外的东西都可以处理。

用最少的代码行如何做到最好？while循环？请想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-02T09:20:11.350

每次填充 10 升水桶时，源水桶中的水量将减少 10 升。

每次填充 2 升水桶时，源水桶中的水量将减少 2 升。

每次装满 50 升的桶时，源桶中的水就会减少 50 升。

我们可以概括一下吗？

每次你装满一桶 N 升，你的源桶中就会少 N 升。

您的源存储桶中的容量不能少于零升，因此您实际填充的是源存储桶中的容量和目标存储桶的容量中的较小值。

既然是你填写的金额，

每次填充 N 升的桶时，源桶中的 min(N, source_bucket_capacity) 升将减少。

当水桶中有水时，请继续装满水桶。当源存储桶为空或您没有更多目标存储桶时停止。

所以

*   设置源存储桶。
*   设置目标存储桶列表。
*   而源存储桶不为空并且您在目标列表中有未填充的存储桶
    *   获取下一个目标存储桶。
    *   将其填充到 min(N, source_bucket_capacity)
    *   将源桶递减 min(N, source_bucket_capacity)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T09:13:53.550

我不明白，你为什么不能简单地装满水桶？你能更好地解释这个问题吗？我没有看到限制，请解释限制，如果有的话...

如果没有限制，您可以使用 stephan202 答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T09:13:34.500

如果您不想将此问题推广到具有任意容量的任意数量的存储桶，那么您根本不需要循环：

分别将存储桶命名为 a = 10、b = 2、c = 50 和 d = 100。当 d 大于 0 时，从 d 中减去 a，从 d 中减去 b，从 d 中减去 c。仅此而已。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-02T17:15:41.080

```
<?php echo (($i = rand(1,100) - 62) > 0) ? $i : 0; ?> 
```

上面的代码会输出一个随机装满 1-100 升的桶在倒入其他三个桶的总容量（62）时还剩下多少升。

正如其他人已经指出的那样，您提出问题的方式几乎没有揭示您要解决的实际问题。我怀疑上面的解决方案是你应该提供的。但是由于您只要求最短的解决方案，所以就是这样。一条线。

# java - JPA 未将外键保存到 @OneToMany 关系

> ID：814474
> 
> 赞同：22
> 
> 时间：2009-05-02T09:09:51.763
> 
> 标签：java, spring, jpa

我正在将 Spring 与 Hibernate 一起用作 JPA 提供程序，并试图获取一个 @OneToMany（具有许多电话号码的联系人）以将外键保存在电话号码表中。从我的表单中，我得到一个包含电话（号码）列表的联系人对象。Contact 得到正确持久化（Hibernate 从指定的序列中获取一个 PK）。Phone(numbers) 列表也使用正确的 PK 保持不变，但 Contacts 表没有 FK。

```
public class Contact implements Serializable {

    @OneToMany(mappedBy = "contactId", cascade = CascadeType.ALL, fetch=FetchType.EAGER)
    private List<Phone> phoneList;

}

public class Phone implements Serializable {

    @JoinColumn(name = "contact_id", referencedColumnName = "contact_id")
    @ManyToOne
    private Contact contactId;

}

@Repository("contactDao")
@Transactional(readOnly = true)
public class ContactDaoImpl implements ContactDao {

    @Transactional(readOnly = false, propagation = Propagation.REQUIRES_NEW)
    public void save(Contact c) {
        em.persist(c);
        em.flush();
    }
}

@Controller
public class ContactController {
    @RequestMapping(value = "/contact/new", method = RequestMethod.POST)
    public ModelAndView newContact(Contact c) {
        ModelAndView mv = new ModelAndView("contactForm");
        contactDao.save(c);
        mv.addObject("contact", c);
        return mv;
    }
} 
```

希望我得到了上述所有相关信息，否则请告诉我。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-05-02T09:20:07.590

您必须自己管理 Java 关系。对于这种事情，你需要类似的东西：

```
@Entity
public class Contact {
  @Id
  private Long id;

  @OneToMany(cascade = CascadeType.PERSIST, mappedBy = "contact")
  private List<Phone> phoneNumbers;

  public void addPhone(PhoneNumber phone) {
     if (phone != null) {
        if (phoneNumbers == null) {
            phoneNumbers = new ArrayList<Phone>();          
        }
        phoneNumbers.add(phone);
        phone.setContact(this);
     }
  }

  ...
}

@Entity
public class Phone {
  @Id
  private Long id;

  @ManyToOne
  private Contact contact;

  ...
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-04T17:21:14.093

回复 Cletus 的回答。我会说`@column`在 id 字段以及所有序列内容上都有注释很重要。使用注解的 mappedBy 参数的替代方法`@OneToMany`是使用`@JoinColumn`注解。

顺便说一句，您需要查看 addPhone 的实现。应该是这样的。

```
public void addPhone(PhoneNumber phone) {
    if (phone == null) {
        return;
    } else {
        if (phoneNumbers == null) {
            phoneNumbers = new ArrayList<Phone>();
        }
        phoneNumbers.add(phone);
        phone.setContact(this);
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-12-01T07:06:22.590

如果 Contact-Phone 关系是单向的，您也可以 `mappedBy`在`@OneToMany`注释中替换为`@JoinColumn(name = "contact_id")`。

```
@Entity
public class Contact {
  @Id
  private Long id;

  @OneToMany(cascade = CascadeType.PERSIST)
  @JoinColumn(name = "contact_id")
  private List<Phone> phoneNumbers;

  // normal getter/setter
  ...
}

@Entity
public class PhoneNumber {
  @Id
  private Long id;

  ...
} 
```

JPA中的类似[@OneToMany -> Parent - Child Reference (Foreign Key)](https://stackoverflow.com/questions/9533676/jpa-onetomany-parent-child-reference-foreign-key?rq=1)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-10T06:34:43.383

我不认为**addPhone**方法是必要的，你只需要在电话对象中设置联系人：

```
phone.setContact(contact); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-20T16:34:21.223

如果您希望您的关系是单向的，即只能从联系人导航到电话，您需要添加

```
@JoinColumn(name = "contact_id", nullable = false) 
```

在您`@OneToMany`的父实体下。

`nullable = false` **如果您希望休眠以填充子表上的 fk，则非常**重要****

 *** * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-06T19:59:19.347

试试这个示例：

```
@Entity
public class Contact {
    @Id
    private Long id;

    @JoinColumn(name = "contactId")
    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)
    private Set<Phone> phones;
}

@Entity
public class Phone {
    @Id
    private Long id;
    private Long contactId;
} 
```

# windows - 哪个存储库包含 LWP::Parallel::UserAgent？

> ID：814475
> 
> 赞同：1
> 
> 时间：2009-05-02T09:09:55.570
> 
> 标签：windows, perl, cpan, lwp, perl-ppm

我需要安装[LWP::Parallel::UserAgent](http://www.metacpan.org/module/LWP::Parallel::UserAgent)才能在 Windows 环境中运行，我使用的是 ActivePerl 5.10。我在谷歌上搜索，但没有找到关于这个包的 repo 的任何信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T11:57:14.403

当您想查找模块（或模块所在的发行版）时，请始终使用 CPAN，而不是 Google。转到 search.cpan.org 并在文本框中输入模块名称，然后单击搜索。您将看到如下所示的结果：

> [LWP::Parallel::UserAgent](http://search.cpan.org/~marclang/ParallelUserAgent-2.57/lib/LWP/Parallel/UserAgent.pm)
> 用于并行用户代理的类
> [ParallelUserAgent-2.57](http://search.cpan.org/~marclang/ParallelUserAgent-2.57/) `****` ( [1 条评论](http://cpanratings.perl.org/d/ParallelUserAgent)) - 2004 年 2 月 9 日 - [Marc Langheinrich](http://search.cpan.org/~marclang/)

第一个链接指向您正在搜索的模块的文档。第二个是指向模块所在发行版的链接（通常它们具有相同的名称，但正如我们在这里看到的它们可能不同），第三个链接是人们对这个模块的看法，第四个是作者的 CPAN 页面，其中包含作者上传到 CPAN 的所有模块及其联系信息。

从这个搜索信息我们可以看到 LWP::Parallel::UserAgent 在 ParallelUserAgent 分布中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T16:05:38.473

如果您想查看可用的 ppm 包，请转到[Kobes Search](http://cpan.uwinnipeg.ca/htdocs/faqs/cpan-search.html)。在那里，您会看到[ParallelUserAgent](http://cpan.uwinnipeg.ca/search?query=paralleluseragent&mode=dist)目前仅在 Kobes 已知的存储库中可用于 perl 5.8。我在 Windows 上看到很多[测试失败，](http://matrix.cpantesters.org/?dist=ParallelUserAgent+2.57)所以我有点怀疑它是否会在那里工作，但它是一个纯 perl 模块，所以你真正需要做的就是从[CPAN 分发](http://search.cpan.org/dist/ParallelUserAgent/)中复制文件，自己看看它是否工作与否。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T10:44:13.627

您可以从[CPAN](http://search.cpan.org/~marclang/ParallelUserAgent-2.57/lib/LWP/Parallel/UserAgent.pm)获得它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-02T18:47:24.370

将模块映射到包含它的发行版的神奇 CPAN 索引文件是*modules/02packages.details.txt.gz*。如果您只是被 CPAN 的副本所困扰，可以访问诸如[CPAN Search](http://search.cpan.org)之类的网站，那么这就是寻找的地方。

此外，该`cpan -D`命令会告诉您：

```
% cpan -D LWP::Parallel::UserAgent
LWP::Parallel::UserAgent
-------------------------------------------------- ----------------------
        （没有说明）
        M/MA/MARCLANG/ParallelUserAgent-2.57.tar.gz
        安装：
        CPAN: undef 不是最新的
        马克·朗海因里希 (MARCLANG)
        marclang@cpan.org

```

# linq - linq的缺点

> ID：814476
> 
> 赞同：4
> 
> 时间：2009-05-02T09:10:21.263
> 
> 标签：linq

linq 一般有什么缺点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-02T09:28:14.543

*   刚开始时可能很难理解
*   延迟执行可以将错误与其原因分开（就时间而言）
*   进程外 LINQ（例如 LINQ to SQL）总是会有点泄漏的抽象——本质上，您需要知道什么有效，什么无效

不过，我仍然非常喜欢 LINQ :)

编辑：写完这份短名单后，我记得我已经回答了[一个非常相似的问题](https://stackoverflow.com/questions/271384/pros-and-cons-of-linq-language-integrated-query)......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-02T09:52:38.603

LINQ 最大的痛点是（使用数据库后端）如果没有[泄漏抽象](http://www.joelonsoftware.com/articles/LeakyAbstractions.html)，就不能在存储库接口上使用它。

LINQ**在**一个层（尤其是 DAL 等）内非常棒，但是由于不同的提供程序支持不同的东西，所以您不能依赖`Expression<Func<...>>`或`IQueryable<T>`功能相同的功能用于不同的实现。

例如，在 LINQ-to-SQL 和实体框架之间：

*   EF 不支持`Single()`
*   `Skip`如果你//没有明确的，`Take`EF会出错`First``OrderBy`
*   EF 不支持 UDF

等等。 ADO.NET 数据服务的 LINQ 提供程序支持不同的组合。这使得模拟和其他抽象变得不安全。

但是：对于内存中（LINQ-to-Objects），或在单层/实现中......太棒了。

这里还有一些想法：[实用 LINQ](http://marcgravell.blogspot.com/2009/02/pragmatic-linq.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-02T09:38:23.460

就像编程中的任何抽象一样，它很容易受到误解：“如果我只了解这个抽象，我就不需要了解幕后发生的事情。”

事实是，如果您确实了解幕后发生的事情，您将从抽象中获得更好的价值，因为您将了解它不再适用的地方，因此您将能够更有信心地应用它在适当的地方取得成功。

这适用于所有抽象，并且适用于大桶中的 Linq。要了解 Linq to Objects，最好的办法是学习如何`Select`在`Where`C `Aggregate`# 中使用`yield return`. 然后弄清楚如何`yield return`用类来代替大量的手写代码。然后，您将能够在欣赏它为您节省的努力的情况下使用它，并且它不再看起来像魔术，因此您将了解其局限性。

对于 Linq 的变体也是如此，其中谓词被捕获为表达式并传输到另一个环境以执行。您必须了解它的工作原理才能安全地使用它。

所以 Linq 的第 1 个缺点是：简单的例子看起来很短很简单。问题是，样本的作者怎么知道要写什么？因为他们知道如何将其全部写成长格式，并且他们知道如何将 Linq 的片段用作缩写，所以他们得出了漂亮的简短版本。

正如我所说，并不是真正特定于 Linq，但无论如何都与它高度相关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-04-21T09:05:50.453

匿名类型。正确的 ORM 应*始终*返回“您的”类型的对象（部分类，可以添加我的方法，覆盖等）。有很多教程和使用 linq 的不同复杂查询的示例，但它们都不关心解释返回“属性包”（return new { .........} ）的优势。我应该如何使用匿名类型，再次将其包装在另一个类中？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-02T09:28:49.190

其实我想不出有什么缺点。它使编程生活变得更加简单，因为很多东西可以用更紧凑但可读性更好的方式编写。

但话虽如此，我也必须同意 Jon 的观点，即你应该知道你在做什么（但这适用于所有技术进步）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-02T09:32:37.903

它唯一的缺点是它的性能见这篇[文章](http://www.codeproject.com/KB/dotnet/LINQ_Performance_Test.aspx)

# asp.net - 如何修复 ASP.NET AJAX 控件或页面中的 HTML Intellisense

> ID：814482
> 
> 赞同：2
> 
> 时间：2009-05-02T09:13:04.160
> 
> 标签：asp.net, visual-studio, ajax, visual-studio-2005, intellisense

我正在使用 ASP.NET AJAX。我创建了一个基于 .master 文件的 .aspx 页面。我将 , , 控件添加到内容页面中，突然标记智能感知不再适用于这些控件或嵌套在其中的任何控件。

这是一个错误吗？我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T09:18:34.410

智能感知问题的修复将在 VS 2005 SP1 中。

同时，您可以使用两种解决方法来立即修复它：

1) 在处理 .aspx 内容页面时，保持 .master 文件在 Visual Studio IDE 中打开。事实证明，智能感知引擎只有在关闭 .master 文件时才会遇到问题。只要它在同一个 IDE 中打开，它就可以很好地解析程序集并为您提供完整的智能感知

2) 进入您的 web.config 文件并将 ASP.NET AJAX 控件的标记前缀命名更改为 . 例如，而不是：

`<controls> <add tagPrefix="asp" namespace="Microsoft.Web.UI" assembly="Microsoft.Web.Extensions" /> <add tagPrefix="asp" namespace="Microsoft.Web.UI.Controls" assembly="Microsoft.Web.Extensions" /> </controls>`

将它们更改为以下内容：

`<controls> <add tagPrefix="ajax" namespace="Microsoft.Web.UI" assembly="Microsoft.Web.Extensions" /> <add tagPrefix="ajax" namespace="Microsoft.Web.UI.Controls" assembly="Microsoft.Web.Extensions" /> </controls>`

然后，您需要更新 .aspx 页面中的标记前缀以使用此新标记前缀。

这些方法中的任何一种都可以解决问题并提供完整的智能感知。然后应该使用 VS 2005 SP1 完全解决该问题。

# design-patterns - 我应该在这里应用状态模式吗？

> ID：814490
> 
> 赞同：0
> 
> 时间：2009-05-02T09:18:07.640
> 
> 标签：design-patterns, state-pattern

我有一个画了很多东西的面板。为了提高绘图效率，我使用了 BufferedImage，这样我就不必在每次发生某些事情时都绘制所有内容。

我的paintComponent 只需要'if' 语句：

```
if(!extraOnly) //paint something

paint something

if(listener.getRectangle() != null) // Paint something 
```

我喜欢使用状态模式的想法，但我不确定使用它的正确时机？我不喜欢必须为 extraOnly 设置布尔值的想法，也许我也有模式发烧 :)。每个状态只有一个方法，draw(Graphics g)

由于这是我的应用程序在 MVC 模式中的视图部分，我也不确定使用状态模式是错误的。状态不应该是模型而不是视图的一部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T09:31:31.633

我认为在视图中有状态没有任何问题。不过，这显然与模型中的状态不同。

一个例子是网络浏览器。本例中的模型是网页 DOM，浏览器视图将 DOM 呈现为屏幕演示。在向下滚动网页时，在每一帧上渲染 DOM 会非常低效。显然，缓冲状态是解决此问题的方法。仅当底层 DOM 发生更改时，才需要更新状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T09:28:05.887

一个drawables列表怎么样，每个都有az level和一个dirty flag？所以你的油漆看起来像：

```
paint()
{
    sort(drawables, by z-level)
    foreach(drawable in drawables)
       if (drawable.isDirty())
           drawable.paint()
} 
```

您将需要考虑弄脏重叠的对象，但通常这种方法很容易实现。

编辑：嗯，没那么简单。如果你移动一个物体，你需要重新绘制它下面的表面。如果您对背景元素和前景元素有明确的区分，您可能希望将它们绘制到不同的图像缓冲区中，这将允许您快速重绘背景而无需再次渲染。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T09:38:04.660

一般更大的问题似乎是如何进行高效绘画？

如果绘制速度较慢，局部绘制是提高性能的好方法。

但是，首先证明绘图很慢！如果分析表明绘图是一个问题，那么您可以迁移到部分更新。

一种方法是使用“脏矩形跟踪”。这是一个非常广泛使用的东西，术语是“无效”（需要重绘的区域）和“验证”（绘制脏位的行为）。窗口系统几乎肯定已经在这样做了，因此您可能可以搭载它，例如 Java Swing RepaintManager 保持脏区域的边界矩形。

但是，您可以轻松地自己滚动。你可以有一个成员变量——一个“区域”，或者只是一个向量中的矩形列表，或者一个边界矩形——来表示下一次绘制时要更新的区域。在您的构造函数或大小更改的处理程序中，将其初始化为整个区域。任何时候您想重绘面板的一部分，通过将矩形添加到脏区来使该部分无效。绘画时只画脏区的部分，然后清除脏区。例如，以这种方式进行局部绘制可以很好地使用缓冲图像作为中介。简单的！

# asp.net - ASP.NET 和变音符号

> ID：814491
> 
> 赞同：0
> 
> 时间：2009-05-02T09:18:18.560
> 
> 标签：asp.net, character-encoding, diacritics

我打算使用 Visual Studio 2008 创建 asp.net 页面。这些页面最好完全符合 XHTML 标准。我应该如何将变音符号包含在页面内容中（无需在 URL 中使用变音符号）？我应该使用字符引用（带有“&”的那些），还是直接从键盘上写它们？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T09:42:42.980

您需要确保页面的字符集编码正确，UTF-8 通常涵盖大多数西方字母，而 UTF-16 则适用于使用[ideograms](http://en.wikipedia.org/wiki/Ideogram)的语言所需的双字节字符。

在页面的 HEAD 元素中，您将需要某种形式的以下标记；

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 
```

您还需要确保指定了正确的 DOCTYPE；

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

[W3C 字符集教程](http://www.w3.org/International/tutorials/tutorial-char-enc/)很好地涵盖了这一点

# .net - Convert.ToInt32(string) 和 Int32.Parse 之间的区别？

> ID：814501
> 
> 赞同：0
> 
> 时间：2009-05-02T09:21:12.440
> 
> 标签：.net

完全重复：[.Net Parse 与 Convert](https://stackoverflow.com/questions/18465/net-parse-verses-convert) 有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-02T09:26:53.720

`Convert.ToInt32(string)`并`Int32.Parse(string)`产生相同的结果，除非字符串实际上为空。

在这种情况下，`Int32.Parse(null)`抛出一个`ArgumentNullException`

但是，`Convert.ToInt32(null)`返回零。

所以最好使用`Int32.Parse(string)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T09:24:06.240

parse 方法为您提供了更多数字格式的选项。除此之外，它们几乎相同。

MSDN 说：

[Convert.ToInt32() 详细信息](http://msdn.microsoft.com/en-us/library/sf1aw27b.aspx)

[Int32.Parse() 详细信息](http://msdn.microsoft.com/en-us/library/system.int32.parse.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-02T09:29:38.160

Int.Parse() 尝试解析也可以接受格式

```
Int.Parse(String, NumberStyles) 
```

您还可以指定 out 参数，并且 parse 将仅返回 true 或 false 以显示解析是否成功

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-07-11T15:32:36.367

如果您需要转换 int，您有 3 个选项。

```
int.Parse
Convert.ToInt32
int.TryParse 
```

这三个中最好的解决方案通常是 int.TryParse。这三者之间的区别在于速度和可靠性。

*   如果传入除 int 以外的任何值， int.Parse 将引发异常。一般的经验法则是例外是缓慢的。

*   Convert.ToInt32 将处理 null 并返回 0 但是它将为其他输入引发异常。再一次，例外是缓慢的。

*   int.TryParse 将处理几乎所有的输入。它将
    根据传递的参数是否被转换返回真或假。如果结果为 false，则转换后的 int 为 0。如果结果为 true，则 int 已转换并且您有一个已转换的 int。

我不会将 int.Parse 用于任何事情。如果我确定我的输入是正确的并且我有某种形式的验证，我会使用 Convert.ToInt32 来节省自己输入额外的行。在所有其他情况下，我会使用 int.TryParse

每个语法：

```
int result;
boolean success;

result = int.Parse(null) = Exception
result = Convert.ToInt32(null) = 0
success = int.TryParse(null, out result) = False/0

result = int.Parse("asd") = Exception
result = Convert.ToInt32("asd") = Exception
success = int.TryParse("asd", out result) = False/0 
```

# outlook - Outlook 2007 加载项 - 当用户将电子邮件从一个文件夹移动到另一个文件夹时会发生什么事件？

> ID：814509
> 
> 赞同：1
> 
> 时间：2009-05-02T09:26:20.210
> 
> 标签：outlook, vsto, add-in

我正在编写 Outlook 2007 加载项。我想知道当用户将电子邮件从一个文件夹移动到另一个文件夹时会发生什么事件（通过拖放或移动到文件夹选项）。我的应用程序代表垃圾邮件过滤器，我有一个垃圾邮件文件夹，我需要知道用户何时将电子邮件表单收件箱移动到垃圾邮件或将垃圾邮件表单移动到收件箱（这对我来说意味着电子邮件分类错误，我必须重新训练它） .

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T13:57:41.103

安装[Outlook Spy](http://www.dimastr.com/outspy/home.htm)工具，然后尝试您的实验，看看 Outlook 在幕后触发了哪些事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T11:53:05.147

[Folder.BeforeItemMove](http://msdn.microsoft.com/en-us/library/bb147840.aspx)怎么样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T12:59:58.140

[Spambayes](http://spambayes.sourceforge.net/)是一个流行的开源垃圾邮件过滤器，它的工作方式与您描述的完全一样 - 看看它是如何做到的。

# nhibernate - NHibernate排序一个有很多集合

> ID：814510
> 
> 赞同：0
> 
> 时间：2009-05-02T09:26:34.377
> 
> 标签：nhibernate

我有实体食谱，它有一个 HasMany 集合评论。

在 MVC 控制器操作中，我正在获取配方，然后显示评论。

如何按“EnteredOn”的降序对评论进行排序？

我在哪里对它们进行排序？

```
 Recipe recipe = session.Load<Recipe>(id);
    NHibernateUtil.Initialize(recipe.Comments); 
```

马尔科姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T09:35:23.123

我想我会按原样检索评论（不是特别排序），然后在显示评论之前对食谱的评论集合进行排序。

根据您创建类和映射的方式，我认为这是唯一的方法，因为集合和包映射表示 NHibernate 中的无序集合。

像这样的东西：

```
Recipe recipe = session.Get<Recipe> (id);

var orderedComments = recipe.Comments.OrderBy ( comment => comment.EnteredOn );

foreach( Comment c in orderedComments )
{
   // display the comment
} 
```

我的 Reciple 实体看起来像这样：

```
public class Recipe
{
   // ...
   ...

   private ISet<Comment> _comments = new HashedSet<Comment>();

   public ReadOnlyCollection<Comment> Comments
   {
      get { return _comments.ToList().AsReadOnly(); }
   }

   public void AddComment( Comment c )
   {
       if( c != null && !_comments.Contains (c) )
       {
          c.Recipe = this;
          _comments.Add (c);
       }
   }

   public void RemoveComment(Comment c )
   {
       if( c != null && _comments.Contains (c) )
       {
           c.Recipe = null;
           _comments.Remove(c);
       }
   }
} 
```

和映射：

```
<class name="Recipe" table="Recipes">
    ...
    <set name="Comments" access="field.camelcase-underscore" ... >
        ...
    </set>
</class> 
```

# javascript - 如何在客户端浏览器中动态创建富文本区域

> ID：814517
> 
> 赞同：0
> 
> 时间：2009-05-02T09:28:48.333
> 
> 标签：javascript, richtextbox, fckeditor

我使用所见即所得...富文本区域，我想在运行时动态创建它

我也使用 FCKeditor 并尝试在运行时创建新的富文本区域，但在这里我不能在运行时在浏览器中创建动态富文本区域

同样，当我在旧的富文本区域中创建新的数据时，它的价值将保持不变

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T10:37:04.533

您可以为此使用 FCKeditor.CreateHTML() 或 FCKeditor.ReplaceTextarea()。每个编辑器都需要一个（唯一的）ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T10:57:43.080

您是特别想要[Rich Text](http://en.wikipedia.org/wiki/Rich_Text_Format)，还是想要某种 HTML 格式？如果你想要后者，那么在 TinyMCE 上取得了成功，效果很好，但实际上有一堆堆，其中很多都很好。

# ms-access - 选中的列表框

> ID：814526
> 
> 赞同：1
> 
> 时间：2009-05-02T09:33:41.737
> 
> 标签：ms-access, combobox, listbox

我是 Access 新手，我正在为我们的一些用户创建数据库。我设计了一个输入用户名、名字和姓氏等的表单。
其中一些用户为多个部门工作，这意味着我需要某种类型的列表框控件，允许他们在输入联系信息时选择多个部门。

在 VB Studios 2005 中，此控件称为 CHECKED LISTBOX。我在访问中到处寻找，但似乎找不到它或任何非常相似的东西。

列表框或组合框的选项在这里不可行，因为它们仅允许用户仅在输入其详细信息时选择一个选项。对此的任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T11:51:35.510

使用“Multi Select”属性设置为“Simple”的普通列表框。

然后，用户可以单击多个列表项，所有这些项都保持选中状态，直到他们再次取消选择它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T12:33:49.283

还有另一种选择：

如果您使用的是 Access 2007，则可以将您的字段声明为接受多个值的查找字段。当您将列表框绑定到该字段时，您将获得复选框。

使用它们很[容易](http://www.databasedev.co.uk/multivalued-fields.html)。
您还[可以从 MS Office 网站找到更多信息](http://office.microsoft.com/en-us/access/HA012337221033.aspx)。

但是，请注意：

*   这仅适用于新的 Access 2007 数据库格式，您将无法将数据库保存为旧的 MDB 格式。

*   多值字段与大多数其他数据库不兼容，这意味着如果您决定有一天升级到 SQL Server，您将不得不重新设计您的表以使用 Remou 提到的连接表。

*   这些多值字段很难从 VBA 中使用：它们返回的值实际上是另一个记录集，您必须遍历它才能获取所有值。

话虽如此，如果您只是想要一些简单的东西并且您不打算从代码中操作数据库，那么它可能是一个实用的选择，尽管它不是一个非常兼容或面向未来的选择。

我没有使用它们，但我认为其他人应该能够做出自己的决定，知道他们可以使用什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-02T20:14:00.967

您可能希望考虑使用子表单，因为这样可以省去使用列表框中的数据更新表格的麻烦。子表单可以使用以人员 ID 作为链接的子字段和主字段的部门-人员联结表。绑定到部门 ID 的组合框将允许用户选择部门。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-02T22:45:17.733

如果您真的设置了复选框，[Stephen Lebans](http://www.lebans.com/vb_listbox.htm)有一个示例数据库，它使用带有复选框的内置 Access 列表框（来自 Access 向导之一）。

# sharepoint - 我不能在 SharePoint 中“创建或扩展 Web 应用程序”？

> ID：814532
> 
> 赞同：0
> 
> 时间：2009-05-02T09:36:58.657
> 
> 标签：sharepoint

当我想在 Centeral Administration中**创建或扩展 Web 应用程序**时遇到此错误**“找不到未使用的端口” 。**我还尝试禁用防病毒和防火墙，但没有奏效。事件查看器中与此相关的错误是：

 ***“找不到源 (PrmBackgroundAgent) 中事件 ID (0) 的描述。本地计算机可能没有必要的注册表信息或消息 DLL 文件来显示来自远程计算机的消息。您可以使用 /AUXSOURCE=标志以检索此描述；有关详细信息，请参阅帮助和支持。以下信息是事件的一部分：system_monitor 运行失败。”*

如果您有任何想法，请告诉我；）

PS 我使用 Moss 2007 和 SP2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-03T04:24:59.163

您是否尝试过禁用防火墙或防病毒软件（假设其中一个或两个都安装在盒子上）？[MSDN 上报告](http://social.msdn.microsoft.com/Forums/ja-JP/sharepointadmin/thread/0d70c7a6-9ec5-4343-8f5c-29b9692c18d2)了类似的问题。

顺便说一句，如果这解决了它，显然您需要找到根本原因（即防火墙规则），而不仅仅是在没有防火墙或病毒检查器的情况下运行！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T06:36:35.330

[http://social.technet.microsoft.com/Forums/en-US/sharepointadmin/thread/0d70c7a6-9ec5-4343-8f5c-29b9692c18d2](http://social.technet.microsoft.com/Forums/en-US/sharepointadmin/thread/0d70c7a6-9ec5-4343-8f5c-29b9692c18d2)

“正如莱昂内尔所说，防病毒软件是罪魁祸首。要解决此问题，您需要从 SharePoint 服务器的防病毒设置中的互联网浏览器/互联网接口应用程序列表中删除 w3wp 进程。一些防病毒软件具有所有 http安全端口号在其设置中列出。您可能还必须在该列表中添加应用程序端口号。

希望这可以帮助。如果您需要更多详细信息，请随时联系我。

萨西。”

# wpf - 从 WinForms 读取 WPF ResourceDictionaries

> ID：814539
> 
> 赞同：1
> 
> 时间：2009-05-02T09:40:22.423
> 
> 标签：wpf, winforms, resources

是否可以从 WinForms 读取 WPF ResourceDictionaries？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T09:42:40.640

将资源字典添加到 WPF 项目时，生成操作会自动设置为 Page。这意味着编译器会生成一个 BAML 流并将其添加到程序集的资源中。

由于 WPF 具有读取 BAML 流的内置功能，但它的 API 不是公共的，因此我们必须编写一个小助手类来通过反射访问内部方法。

```
public static class BamlReader
{
    public static object Load(Stream stream)
    {
        ParserContext pc = new ParserContext();
        MethodInfo loadBamlMethod = typeof(XamlReader).GetMethod("LoadBaml", 
            BindingFlags.NonPublic | BindingFlags.Static)
        return loadBamlMethod.Invoke(null, new object[] { stream, pc, null, false });
    }
}

// Usage:
StreamResourceInfo sri = System.Windows.Application.GetResourceStream(
    new Uri("/MyAssemblyName;component/MyResourceDict.xaml", UriKind.Relative));
    ResourceDictionary resources = (ResourceDictionary)BamlReader.Load(sri.Stream); 
```

资料来源：[如何从 WinForms 读取 WPF ResourceDictionaries](http://www.wpftutorial.net/ReadWPFResourcesFromWinForms.html)

# java - Ejb sql [select * from where A & 1]

> ID：814546
> 
> 赞同：1
> 
> 时间：2009-05-02T09:43:27.003
> 
> 标签：java, sql, mysql, ejb

我将在 ejb ql 中使用这样的查询：

```
Select * from whe A&1; 
```

但我有以下错误：

```
line 1, column 171: unexpected char [&]. 
```

如何使用此运算符检查一行中的位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T12:42:55.887

使用[BIT_AND](http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html#function_bit-and)函数

# sql - 如何替换 SQL Server 表列中的字符串

> ID：814548
> 
> 赞同：387
> 
> 时间：2009-05-02T09:43:52.523
> 
> 标签：sql, sql-server, database, database-administration

我有一个`SQL Sever`引用路径（`UNC`或其他）的表（），但现在路径将改变。

在路径列中，我有很多记录，我只需要更改路径的一部分，而不是整个路径。而且我需要在每条记录中将相同的字符串更改为新字符串。

我怎么能用简单的方法做到这一点`update`？

* * *

## 回答 #1

> 赞同：647
> 
> 时间：2009-05-02T09:45:49.977

这很容易：

```
update my_table
set path = replace(path, 'oldstring', 'newstring') 
```

* * *

## 回答 #2

> 赞同：138
> 
> 时间：2009-05-02T09:47:07.400

```
UPDATE [table]
SET [column] = REPLACE([column], '/foo/', '/bar/') 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-03-01T23:26:33.320

I tried the above but it did not yield the correct result. The following one does:

```
update table
set path = replace(path, 'oldstring', 'newstring') where path = 'oldstring' 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-12-09T14:25:54.473

```
UPDATE CustomReports_Ta
SET vchFilter = REPLACE(CAST(vchFilter AS nvarchar(max)), '\\Ingl-report\Templates', 'C:\Customer_Templates')
where CAST(vchFilter AS nvarchar(max)) LIKE '%\\Ingl-report\Templates%' 
```

没有这个`CAST`功能我得到了一个错误

参数数据类型`ntext`对于函数的参数 1 无效`replace`。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-04-27T10:10:45.777

您可以使用此查询

```
update table_name set column_name = replace (column_name , 'oldstring' ,'newstring') where column_name like 'oldstring%' 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2017-07-24T16:01:20.853

所有的答案都很好，但我只想给你一个很好的例子

```
select replace('this value from table', 'table',  'table but updated') 
```

此 SQL 语句将用第三个参数替换给定语句（第一个参数）中存在的单词“table”（第二个参数）

初始值是`this value from table`，但在执行替换功能后，它将是`this value from table but updated`

这是一个真实的例子

```
UPDATE publication
SET doi = replace(doi, '10.7440/perifrasis', '10.25025/perifrasis')
WHERE doi like '10.7440/perifrasis%' 
```

例如，如果我们有这个值

```
10.7440/perifrasis.2010.1.issue-1 
```

它会变成

```
10.25025/perifrasis.2010.1.issue-1 
```

希望这能给你更好的可视化

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-03-30T14:53:48.047

```
select replace(ImagePath, '~/', '../') as NewImagePath from tblMyTable 
```

> 其中“ImagePath”是我的列名。
> “NewImagePath”是“ImagePath”的临时列名称
> “~/”是我当前的字符串。（旧字符串）
> “../”是我需要的字符串。（新字符串）
> “tblMyTable”是我在数据库中的表。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-07-21T14:09:30.900

如果目标列类型不是 varchar/nvarchar 之类的**text**，我们需要将列值转换为字符串，然后将其转换为：

```
update URL_TABLE
set Parameters = REPLACE ( cast(Parameters as varchar(max)), 'india', 'bharat')
where URL_ID='150721_013359670' 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-05-10T13:30:54.170

您需要在替换功能的帮助下替换路径。

```
update table_name set column_name = replace(column_name, 'oldstring', 'newstring') 
```

这里`column_name`指的是您要更改的那一列。

希望它会奏效。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-03-29T04:32:54.137

您还可以在运行时替换电子邮件模板的大文本，这是一个简单的示例。

```
DECLARE @xml NVARCHAR(MAX)
SET @xml = CAST((SELECT [column] AS 'td','',        
        ,[StartDate] AS 'td'
         FROM [table] 
         FOR XML PATH('tr'), ELEMENTS ) AS NVARCHAR(MAX))
select REPLACE((EmailTemplate), '[@xml]', @xml) as Newtemplate 
FROM [dbo].[template] where id = 1 
```

# wpf - WPF - 将滑块值数据绑定到 StoryBoard？

> ID：814550
> 
> 赞同：0
> 
> 时间：2009-05-02T09:45:33.003
> 
> 标签：wpf, data-binding, animation, expression-blend, storyboard

我正在尝试创建一个音量控制，为此我创建了一个故事板，它在视觉上为音量设置动画。我把它放在一个通用的滑块控件中。我想将滑块的值直接绑定到情节提要的时间线位置。如果滑块的值为 0，则情节提要应位于 00:00 等处，一直到顶部。这可能吗？

这是控件的代码。故事板动画在这里。

```
<ControlTemplate TargetType="{x:Type Slider}">
                    <ControlTemplate.Resources>
                        <Storyboard x:Key="SoundControl_Animation">
                            <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="path3" Storyboard.TargetProperty="(UIElement.Opacity)">
                                <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0.005"/>
                                <SplineDoubleKeyFrame KeyTime="00:00:00.5000000" Value="0"/>
                                <SplineDoubleKeyFrame KeyTime="00:00:01" Value="1"/>
                            </DoubleAnimationUsingKeyFrames>
                            <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="path2" Storyboard.TargetProperty="(UIElement.Opacity)">
                                <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0"/>
                                <SplineDoubleKeyFrame KeyTime="00:00:00.5000000" Value="1"/>
                            </DoubleAnimationUsingKeyFrames>
                            <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="path1" Storyboard.TargetProperty="(UIElement.Opacity)">
                                <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0.495"/>
                                <SplineDoubleKeyFrame KeyTime="00:00:00.5000000" Value="1"/>
                            </DoubleAnimationUsingKeyFrames>
                        </Storyboard>
                    </ControlTemplate.Resources>
                    <Grid Width="Auto" Height="Auto">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="51.333"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid x:Name="GridRoot" Margin="0,0,0,0" Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Center">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto" MinHeight="{TemplateBinding MinHeight}"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- TickBar shows the ticks for Slider -->
                            <TickBar Visibility="Collapsed" x:Name="TopTick" Height="4" SnapsToDevicePixels="True" Placement="Top" Fill="{DynamicResource GlyphBrush}"/>
                            <Border Grid.Row="1" Margin="0" x:Name="Border" Height="4" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="2"/>

                            <!-- The Track lays out the repeat buttons and thumb -->
                            <Track Grid.Row="1" x:Name="PART_Track">
                                <Track.Thumb>
                                    <Thumb Style="{DynamicResource SimpleSliderThumb}"/>
                                </Track.Thumb>
                                <Track.IncreaseRepeatButton>
                                    <RepeatButton Style="{DynamicResource SimpleScrollRepeatButtonStyle}" Command="Slider.IncreaseLarge"/>
                                </Track.IncreaseRepeatButton>
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton Style="{DynamicResource SimpleScrollRepeatButtonStyle}" Command="Slider.DecreaseLarge"/>
                                </Track.DecreaseRepeatButton>
                            </Track>

                            <TickBar Visibility="Collapsed" Grid.Row="2" x:Name="BottomTick" Height="4" SnapsToDevicePixels="True" Placement="Bottom" Fill="{TemplateBinding Foreground}"/>
                        </Grid>
                        <Path Stretch="Fill" Data="F1 M-65.067448,318.22277 C-65.067448,318.22277 -58.87652,318.2416 -58.87652,318.2416 -58.797256,318.31822 -54.599352,312.8803 -54.599352,312.8803 -54.599352,312.8803 -54.601205,330.97579 -54.601205,330.97579 -54.601205,330.97579 -58.83846,325.45217 -58.83846,325.45217 -58.83846,325.45217 -64.980101,325.3728 -64.988066,325.38226 -65.018879,325.41884 -65.067448,318.22277 -65.067448,318.22277 z" HorizontalAlignment="Left" Margin="0,0,0,0" Stroke="{DynamicResource DrawBrush_IconStroke}" StrokeThickness="1" Fill="{DynamicResource DrawBrush_Std_Button_HighlightPatch_MouseOver}" x:Name="path" Width="15" Opacity="1" VerticalAlignment="Stretch" Grid.Column="0" Height="20"/>
                        <Path Margin="20.671,14,26.662,14" Fill="{x:Null}" Stretch="Fill" StrokeThickness="2" Data="M75.569117,15.851553 C75.569117,15.851553 85.628643,23.181896 75.250364,31.167364" HorizontalAlignment="Stretch" Width="4" Grid.Column="0" Height="10" Stroke="#FF666666" d:LayoutOverrides="HorizontalAlignment" x:Name="path1"/>
                        <Path Margin="25.51,9,19.823,9" Fill="{x:Null}" Stretch="Fill" StrokeThickness="2.5" Data="M75.569117,15.851553 C75.569117,15.851553 85.628643,23.181896 75.250364,31.167364" HorizontalAlignment="Stretch" Height="20" Stroke="#FF848484" x:Name="path2"/>
                        <Path Margin="0,4,12.156,4" Fill="{x:Null}" Stretch="Fill" StrokeThickness="3" Data="M75.569117,15.851553 C75.569117,15.851553 85.628643,23.181896 75.250364,31.167364" HorizontalAlignment="Right" Width="8" Height="30" Stroke="#FFB9B9B9" x:Name="path3"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="TickPlacement" Value="TopLeft">
                            <Setter Property="Visibility" Value="Visible" TargetName="TopTick"/>
                        </Trigger>
                        <Trigger Property="TickPlacement" Value="BottomRight">
                            <Setter Property="Visibility" Value="Visible" TargetName="BottomTick"/>
                        </Trigger>
                        <Trigger Property="TickPlacement" Value="Both">
                            <Setter Property="Visibility" Value="Visible" TargetName="TopTick"/>
                            <Setter Property="Visibility" Value="Visible" TargetName="BottomTick"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Background" Value="{DynamicResource DisabledBackgroundBrush}" TargetName="Border"/>
                            <Setter Property="BorderBrush" Value="{DynamicResource DisabledBorderBrush}" TargetName="Border"/>
                        </Trigger>

                        <!-- Use a rotation to create a Vertical Slider form the default Horizontal -->
                        <Trigger Property="Orientation" Value="Vertical">
                            <Setter Property="LayoutTransform" TargetName="GridRoot">
                                <Setter.Value>
                                    <RotateTransform Angle="-90"/>
                                </Setter.Value>
                            </Setter>
                            <!-- Track rotates itself based on orientation so need to force it back -->
                            <Setter TargetName="PART_Track" Property="Orientation" Value="Horizontal"/>
                        </Trigger>

                    </ControlTemplate.Triggers>
                </ControlTemplate> 
```

它放在画布上的控件本身是这样的：

```
<Slider Margin="47.75,9.75,0,0" Style="{DynamicResource btn_SoundVolumeSlider}" Grid.Column="3" d:LayoutOverrides="Height" VerticalAlignment="Top" HorizontalAlignment="Stretch" SmallChange="0" TickFrequency="0" Value="3"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-02T11:14:13.977

这取决于您计划实现的目标。关键是应该在可视树上的项目之间执行属性绑定。如果您显示动画，我可以告诉您如何正确绑定动画和滑块值。

例如，如果您的动画是一个旋钮，那么执行此操作的方法是通过转换器将滑块值绑定到您想要动画的项目的旋转角度。但是，正如我所说，这取决于你的动画。显示它，即使是 JPEG，我可以告诉更多细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-03-31T19:35:49.503

老了，我知道，但我在很多地方都看到过这个问题。希望这个答案对其他人有所帮助。

来自 MSDN：**如何：使用情节提要对其进行动画处理后设置属性**

[http://msdn.microsoft.com/en-us/library/aa970493.aspx](http://msdn.microsoft.com/en-us/library/aa970493.aspx)

您需要从对象中移除情节提要并手动将其值设置为动画的结束值。

# seo - 如果 googlebot 尝试将营销 URL 编入索引，我应该担心吗？

> ID：814554
> 
> 赞同：1
> 
> 时间：2009-05-02T09:48:31.453
> 
> 标签：seo, googlebot

我最近开始使用[Google Webmaster Tools](https://www.google.com/webmasters/tools)。

看到谷歌试图索引多少链接，我感到非常惊讶。

```
http://www.example.com/?c=123
http://www.example.com/?c=82
http://www.example.com/?c=234
http://www.example.com/?c=991 
```

这些都是作为来自合作伙伴网站的链接而存在的广告系列。

目前他们都被我的机器人文件拒绝，直到网站完成 - 就像网站上的每个页面一样。

我想知道处理此类链接的最佳方法是什么 - 在我减少 robots.txt 文件的限制之前。

我担心它们会被视为不同的 URL 并开始出现在谷歌的搜索结果中。它们都对应于同一页面 - 给予或接受。我不希望人们按原样找到它们并单击它们。

到目前为止，最好的想法是呈现一个包含查询字符串的页面，如下所示：

```
 // DO NOT TRY THIS AT HOME. See edit below
 <% if (Request.QueryString != "") { %>

    <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">

 <% } %> 
```

我需要这样做吗？这是最好的方法吗？

**编辑：**事实证明这**不是一个好方法**。事实证明，Google 在与另一个没有 NOINDEX 的页面具有相同内容的页面上看到了 NOINDEX。显然它认为它们是同一件事，并且 NOINDEX 优先。结果，我的网站完全从 Google 中消失了。警告：这可能是我同时做的其他事情，但我不会冒险使用这种方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-02T10:00:06.120

This is the sort of thing that `rel="canonical"` was designed for. [Google posted a blog article about it.](http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T09:55:13.387

是的，Google 会将它们解释为不同的 URL。

Depending on your webserver you could use a rewrite filter to remove the parameter for search engines, eg [url rewrite filter](http://tuckey.org/urlrewrite/) for Tomcat, or [mod rewrite](http://httpd.apache.org/docs/1.3/mod/mod_rewrite.html) for Apache.

Personally I'd just redirect to the same page with the tracking parameter removed.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T09:54:19.147

这似乎是最好的方法，除非页面存在于它自己的文件夹中，在这种情况下，您可以修改 robots.txt 文件以忽略该文件夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-02T10:12:27.713

For resources that should not be indexed I prefer to do a simple return in the page load:

```
if (IsBot(Request.UserAgent)
    return; 
```

# svn - 需要一种万无一失的方法来维护和更新 Web 应用程序而不会搞砸它

> ID：814555
> 
> 赞同：1
> 
> 时间：2009-05-02T09:51:58.120
> 
> 标签：svn, web

我正在开发一个简单的社交网络应用程序，很快就会准备好启动它。但是，我想要一种正确维护它的方法，以便我们不时对应用程序进行更新和添加新功能。我需要一些有关如何立即执行此操作的指示，因为现在我在本地服务器上使用 tortoise svn 进行应用程序颠覆，每次我希望上传它时，我都会使用简单的 ftp 将导出的文件上传到远程服务器.

有没有更好的方法来做到这一点 - 我的意思是我不想上传并最终发现我不小心覆盖了一个不应该被覆盖的关键文件 - 我的意思是这样做的正确方法是什么.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T10:12:59.663

我习惯于在 Web 服务器上签出一个普通的工作副本。如果存储库中不存在文件，则不应在 Web 上。通过这种方式，您可以轻松地移动整个网络并创建其他版本（例如不同域上的 beta 版本），而无需担心复制所有必要的文件。而且您可以轻松地添加新功能而不会破坏发布版本 - 只需在单独的分支中处理功能，在不同的 URL 上测试分支，当您准备好时，将分支合并回主干并更新主干副本。

当然，在服务器上签出普通工作副本也有一些缺点，例如，您可能不想通过 Web 提供某些文件。这可能是也可能不是问题——我正在使用[Catalyst](http://www.catalystframework.org/)，所以这不会打扰我，因为每个请求都会通过控制器堆栈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T10:02:50.873

您应该创建实时系统的预生产镜像并使用脚本部署到该镜像。然后，在使用另一个脚本将代码从预生产部署到实际生产环境之前，您可以在该环境中检查您的更改没有破坏任何功能。

使用源代码控制来管理您的开发、预生产和生产环境是必不可少的。[SubVersion](http://subversion.tigris.org)是一个不错的选择，如果您不喜欢命令行，请使用[TortoiseSVN](http://tortoisesvn.tigris.org)。

# c# - 如何对事件日志中的 .NET 2.0 错误报告消息进行故障排除？

> ID：814560
> 
> 赞同：9
> 
> 时间：2009-05-02T09:55:07.117
> 
> 标签：c#, .net, crash, event-log, crash-reports

[我在一个名为EVEMon](http://evemon.battleclinic.com/)的开源产品上工作，该产品是用 C# 编写的，针对 .NET 2.0 平台，我有一个用户正在遭受我们无法解决的奇怪的 .NET 崩溃。

```
事件类型：错误
事件源：.NET 运行时 2.0 错误报告
事件类别：无
事件编号：5000
日期：2009 年 4 月 29 日
时间：晚上 10:58:10
用户：不适用
电脑：删除了这个
描述：
事件类型 clr20r3、P1 evemon.exe、P2 1.2.7.1301、P3 49ea37c8、P4
system.windows.forms，P5 2.0.0.0，P6 4889dee7，P7 6cd3，P8 18，P9
system.argumentexception，P10 无。

数据：
//以上描述的十六进制表示

```

应用程序本身崩溃而没有显示错误（尽管有错误处理 UI），上述消息是从 Windows 事件日志中复制出来的。最终用户已重新安装 .NET 并更新到最新版本。.PDB 文件随程序的每个发行版本一起分发，以帮助调试和测试，有问题的用户拥有正确版本的 EVEMon 的完整 PDB 文件。

是否有特定的、经过试验和测试的技术来分析和诊断这种类型的崩溃？如果是这样，有哪些工具和技术可用于帮助调试？

## 特别感谢

我要特别感谢 Steffen Opel 并强调[他的回答](https://stackoverflow.com/questions/814560/how-to-troubleshoot-net-2-0-error-reporting-messages-in-the-event-log/1082254#1082254)虽然没有直接回答我提出的问题，但解决了我的代码库中更大的问题，即全局错误处理缺少一个重要组件。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-07-04T08:00:20.503

这就是我为崩溃的最终用户解决问题的方法。

1.  [在http://www.microsoft.com/whdc/devtools/debugging/default.mspx](http://www.microsoft.com/whdc/devtools/debugging/default.mspx)下载并安装适用于 Windows 的调试工具

2.  安装工具后（默认情况下它们最终会转到 C:\Program Files\）启动命令行窗口。

3.  切换到包含 adplus 的目录（例如“C:\Program Files\Debugging Tools for Windows (x86)”）。

4.  运行以下命令。这将启动应用程序并附加 adplus。

> `adplus -crash -o C:\debug\ -FullOnFirst -sc C:\path\to\your\app.exe`

## 创建故障转储后

一旦应用程序崩溃启动 WinDbg 并加载在 C:\debug 中创建的 .dmp 文件。（文件 --> 打开故障转储）

执行这些命令以查看堆栈跟踪并希望找到问题。

加载 SOS 进行调试

*   .NET 4.0 之前

> ```
> .loadby sos mscorwks 
> ```

*   .NET 4.0

> ```
> .loadby sos clr 
> ```

查看堆栈跟踪

```
!clrstack 
```

查看更有用的堆栈跟踪

```
!clrstack –p 
```

戳一个对象..也许看看是什么导致了异常

```
!do <address> 
```

例如，这是由于应用程序随机出现 IO 异常而导致的结果。WinDbg 指出被引用的路径不正确。

```
0:009> !do 017f2b7c    
Name: System.String    
MethodTable: 790fd8c4    
EEClass: 790fd824    
Size: 124(0x7c) bytes    
 (C:\WINDOWS\assembly\GAC_32\mscorlib\2.0.0.0__b77a5c561934e089\mscorlib.dll)    
String: \\server\path\not_here.txt
Fields:    
      MT    Field   Offset                 Type VT     Attr    Value Name    
79102290  4000096        4         System.Int32  1 instance       54 m_arrayLength    
79102290  4000097        8         System.Int32  1 instance       53 m_stringLength    
790ff328  4000098        c          System.Char  1 instance       5c m_firstChar    
790fd8c4  4000099       10        System.String  0   shared   static Empty    
    >> Domain:Value  00161df8:790d884c <<    
7912dd40  400009a       14        System.Char[]  0   shared   static WhitespaceChars    
    >> Domain:Value  00161df8:014113e8 << 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-07-04T13:55:48.897

查看您的源代码（主干）表明您的未处理异常处理对于 Windows 窗体应用程序似乎不完整：

您需要同时处理**非**UI 线程异常和 UI 线程异常：

*   对于前者，您需要通过 实现 CLR 未处理的异常处理程序`AppDomain.CurrentDomain.UnhandledException`，该处理程序已经到位。

*   对于后者，您需要通过 实现 Windows 窗体未处理的异常处理程序**`Application.ThreadException`**，这似乎丢失了；这确实可以产生您正在目睹的那些问题。有关实现示例，请参阅[Application.ThreadException Event](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.threadexception.aspx)的 MSDN 文档。

请注意，现在您明确禁止通过 捕获未处理的 Windows 窗体异常`Application.SetUnhandledExceptionMode(UnhandledExceptionMode.ThrowException)`，您需要将其更改`UnhandledExceptionMode.CatchException`为启用到您的处理程序的路由`Application.ThreadException`，正如 Jehof 已经正确建议的那样。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-07-01T08:54:08.730

用户使用什么操作系统（Windows XP、Windows Vista 等）？

如果 Windows Vista 尝试禁用“问题报告和解决方案功能”（控制面板-->问题报告和解决方案-->更改设置-->高级设置-->关闭我的程序，问题报告）

或者尝试设置

```
 Application.SetUnhandledExceptionMode( UnhandledExceptionMode.CatchException ); 
```

这将始终将异常路由到 ThreadException 处理程序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-07-01T07:51:48.137

我们遇到了线程代码中的异常问题。如果您生成一个新线程并忘记在线程方法中处理异常，则应用程序只会“停止” - 没有错误消息，什么都没有，而只是事件日志中的一个条目。即使这样`UnhandledExceptionHandler`也不会触发。

也许是这样的原因？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-30T15:16:01.943

简而言之：应用程序中存在未处理的异常。

如果您可以访问机器（通过远程访问等），请尝试安装 Visual Studio Express 并启动应用程序。您应该看到一个对话框，提供了使用新的 Visual Studio 实例调试应用程序的机会。

也可能是有一些东西阻止了 Windows 窗体正确初始化。我已经看到论坛帖子表明字体问题可能导致这种情况——确保用户安装了您的应用程序需要的字体以及通常的默认值，例如 MS SansSerif、Arial、Tahoma、Times 等。

失败了...尝试在PC上牺牲一只鸡。每次都有魅力！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-07-02T20:09:35.423

...如果您能够联系到那个受苦的用户，这里有一个

## 想法：记录预执行阶段

不要给你的`program.exe`做一个快捷方式，而是给 做一个快捷方式`program.bat`，这将

```
echo "Pre-start" > stage.txt
start program.exe 
```

`Program.cs`因此将的第一行是

```
File.WriteAllLines("stage.txt", "Program execution started."); 
```

在`AppDomain.UnhandledException`第一行的处理程序中将是

```
File.WriteAllLines("stage.txt", "Unhandled exception has been caught."); 
```

此外，确保处理程序不分配内存或资源——在程序启动时预先分配它们。处理程序仅触发写入日志。

## 注释

（用户发送的）很可能`stage.txt`包含“预启动”。这发生在第 3 方 .dll 中引发异常时——甚至在您的程序启动之前。

在这种情况下，您将需要一个简单的检查程序，它不会引用您`program.exe`所做的程序集，但会引用`Assembly.Load(...)`它们。

## 附言

`stage.txt`应该放在 %APPDATA% 下的某个地方，而不是在 Program Files 中。

我[在 Server 2003 上发现了一个有趣的案例](http://www.dotnetspider.com/resources/4115-Error-EventType-clr-r.aspx)和[另一个很好的讨论](http://geekswithblogs.net/steveclements/archive/2008/04/30/error--eventtype-clr20r3.aspx)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-02T10:05:17.467

`.pdb`您应该通过将特定版本的文件发送给用户（放在 旁边`.exe`）并让他们重现崩溃来获得更详细的堆栈跟踪。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-07-02T14:20:00.803

您应该`AppDomain.UnhandledException`在代码中处理。

有人问了一个[类似的问题](https://stackoverflow.com/questions/219594/net-whats-the-best-way-to-implement-a-catch-all-exceptions-handler/1055954#1055954)。也见相关的。

# iphone - Xcode CGRectZero 错误

> ID：814563
> 
> 赞同：1
> 
> 时间：2009-05-02T09:55:44.900
> 
> 标签：iphone, xcode, core-graphics

编译代码时出现以下错误

```
 "_CGRectZero", referenced from:
          _CGRectZero$non_lazy_ptr in RootViewController.o
          _CGRectZero$non_lazy_ptr in SecondViewController.o
    ld: symbol(s) not found
    collect2: ld returned 1 exit status 
```

构建失败（1 个错误）

有人可以告诉我解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-02T09:59:29.570

听起来您的项目缺少框架。

右键单击项目的**Groups & Files列中的***Frameworks*文件夹，然后选择*Add* > *Existing Frameworks...*

 ****从框架列表中选择*CoreGraphics.framework 。*

一旦你重建，这个错误应该会消失（除非它是别的东西）。

# javascript - 使用 JavaScript 插入 HTML 元素

> ID：814564
> 
> 赞同：108
> 
> 时间：2009-05-02T09:57:59.200
> 
> 标签：javascript, html

使用以下语法时，无需为每种类型的属性和事件繁琐地搜索解决方法：

```
elem = document.createElement("div");
elem.id = 'myID';
elem.innerHTML = ' my Text '
document.body.insertBefore(elem,document.body.childNodes[0]); 
```

有没有一种方法可以将整个 HTML 元素声明为字符串？喜欢：

```
elem = document.createElement("<div id='myID'> my Text </div>");
document.body.insertBefore(elem,document.body.childNodes[0]); 
```

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2009-05-02T11:03:38.853

与其直接弄乱**`innerHTML`**它，不如创建一个片段然后插入它：

```
function create(htmlStr) {
    var frag = document.createDocumentFragment(),
        temp = document.createElement('div');
    temp.innerHTML = htmlStr;
    while (temp.firstChild) {
        frag.appendChild(temp.firstChild);
    }
    return frag;
}

var fragment = create('<div>Hello!</div><p>...</p>');
// You can use native DOM methods to insert the fragment:
document.body.insertBefore(fragment, document.body.childNodes[0]); 
```

好处：

1.  您可以使用原生 DOM 方法进行插入，例如 insertBefore、appendChild 等。
2.  您可以在插入之前访问实际的 DOM 节点；您可以访问片段的 childNodes 对象。
3.  使用文档片段非常快；比在 DOM 之外创建元素更快，在某些情况下比 innerHTML 更快。

* * *

即使**`innerHTML`**在函数中使用，这一切都发生在 DOM 之外，所以它比你想象的要快得多......

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2012-01-26T14:01:07.707

你要这个

```
document.body.insertAdjacentHTML( 'afterbegin', '<div id="myID">...</div>' ); 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2015-08-13T02:57:59.397

看看[insertAdjacentHTML](https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML)

```
var element = document.getElementById("one");
var newElement = '<div id="two">two</div>'
element.insertAdjacentHTML( 'afterend', newElement )
// new DOM structure: <div id="one">one</div><div id="two">two</div> 
```

**position**是相对于您要插入的相邻元素的位置：

**'beforebegin'** 在元素本身之前

**'afterbegin'** 就在元素内部，在它的第一个子元素之前

**'beforeend'** 就在元素内部，在它的最后一个子元素之后

**'afterend'** 在元素本身之后

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2009-05-02T10:02:06.287

在老式 JavaScript 中，您可以这样做：

```
document.body.innerHTML = '<p id="foo">Some HTML</p>' + document.body.innerHTML; 
```

回应您的评论：

> [...] 我有兴趣声明新元素的属性和事件的来源，而不是`innerHTML`元素的来源。

不过，您需要将新的 HTML 注入 DOM；这就是`innerHTML`在老式 JavaScript 示例中使用的原因。元素的前面带有新的 HTML `innerHTML`。`BODY`我们并没有真正触及`BODY`.

我将重写上述示例以澄清这一点：

```
var newElement = '<p id="foo">This is some dynamically added HTML. Yay!</p>';
var bodyElement = document.body;
bodyElement.innerHTML = newElement + bodyElement.innerHTML;
// note that += cannot be used here; this would result in 'NaN' 
```

使用 JavaScript 框架可以减少代码的冗长并提高可读性。例如，jQuery 允许您执行以下操作：

```
$('body').prepend('<p id="foo">Some HTML</p>'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-09-17T11:54:52.047

据我所知，公平地说，这是相当新的和有限的，这种技术的唯一潜在问题是您无法动态创建一些表格元素。

我通过将“模板”元素添加到隐藏的 DIV 中，然后使用 cloneNode(true) 创建一个克隆并根据需要附加它来使用表单进行模板化。请注意，您确实需要确保根据需要重新分配 id 以防止重复。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-10-13T14:36:33.210

正如其他人所说，可以模拟方便的 jQuery[前置功能：](http://api.jquery.com/prepend/)

```
var html = '<div>Hello prepended</div>';
document.body.innerHTML = html + document.body.innerHTML; 
```

虽然有些人说最好不要“弄乱” **innerHTML**，但如果您知道这一点，它在许多用例中都是可靠的：

> 如果`<div>`、`<span>`或`<noembed>`节点具有包含字符 ( `&`)、 ( `<`) 或 ( `>`) 的子文本节点，则 innerHTML 将这些字符分别返回为`&amp`、`&lt`和`&gt`。用于`Node.textContent`获取这些文本节点内容的正确副本。

[https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML](https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML)

或者：

```
var html = '<div>Hello prepended</div>';
document.body.insertAdjacentHTML('afterbegin', html) 
```

`insertAdjacentHTML`可能是一个不错的选择：[https ://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML](https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-09-25T00:28:46.537

如果要在现有页面的标签中插入 HTML 代码，请使用[Jnerator](http://jnerator.com)。该工具是专门为此目的而创建的。

而不是编写下一个代码

```
 var htmlCode = '<ul class=\'menu-countries\'><li
        class=\'item\'><img src=\'au.png\'></img><span>Australia </span></li><li
        class=\'item\'><img src=\'br.png\'> </img><span>Brazil</span></li><li
        class=\'item\'> <img src=\'ca.png\'></img><span>Canada</span></li></ul>';
    var element = document.getElementById('myTag');
    element.innerHTML = htmlCode; 
```

您可以编写更易于理解的结构

```
 var jtag = $j.ul({
        class: 'menu-countries',
        child: [
            $j.li({ class: 'item', child: [
                $j.img({ src: 'au.png' }),
                $j.span({ child: 'Australia' })
            ]}),
            $j.li({ class: 'item', child: [
                $j.img({ src: 'br.png' }),
                $j.span({ child: 'Brazil' })
            ]}),
            $j.li({ class: 'item', child: [
                $j.img({ src: 'ca.png' }),
                $j.span({ child: 'Canada' })
            ]})
        ]
    });
    var htmlCode = jtag.html();
    var element = document.getElementById('myTag');
    element.innerHTML = htmlCode; 
```

# delphi - 为什么在 Delphi 中可以自我赋值？

> ID：814567
> 
> 赞同：17
> 
> 时间：2009-05-02T10:00:02.533
> 
> 标签：delphi, oop, language-features, self, delphi-prism

GUI 应用程序中的这段代码编译并运行：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  Self := TForm1.Create(Owner);
end; 
```

（用 Delphi 6 和 2009 测试）

*   为什么自写而不是只读？
*   这在哪些情况下有用？

编辑：

*   这在德尔福棱镜中也可能吗？（我想是的，看[这里](https://forums.codegear.com/thread.jspa?threadID=20291)）

更新：使用自我分配的德尔福应用程序/库：

*   [python4delphi](http://code.google.com/p/python4delphi/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-02T12:24:01.937

这并不像它可能的那么糟糕。我刚刚在 Delphi 2009 中对其进行了测试，看起来，虽然 Self 参数不使用**const**语义，你似乎暗示它应该使用它，但它也没有使用**var**语义，所以你可以全部改变它希望在您的方法中，而不会实际丢失调用者对您的对象持有的引用。那将是一件非常糟糕的事情。

至于原因，二选一。要么是一个简单的疏忽，要么是 Marco 建议的：允许您将 Self 传递给**var**参数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-02T11:40:21.247

也许允许传递给 const 或 var 参数？

这可能是人工制品，因为系统在 := 符号左侧的任何地方都没有 self 。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-02T17:16:29.473

分配给自我是如此不合逻辑和无用，以至于这个“功能”可能是一个疏忽。与可赋值常量一样，纠正这些问题并不总是那么容易。

这里的简单建议是：不要这样做。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-02T12:04:21.690

实际上，“Self”只是对堆栈中某个位置的名称引用，该位置存储指向堆中对象的地址。对这个变量强制只读是可能的，显然设计者决定不这样做。我认为这个决定是武断的。

看不到任何有用的情况，这只会更改堆栈中的值。此外，更改此值可能很危险，因为无法保证引用实例成员的代码的行为将在编译器版本之间保持一致。

**更新：**回应`PatrickvL`评论

> “变量”“Self”不在堆栈上（据我所知，从来没有）；相反，它的值在调用任何对象方法之前被放入寄存器（准确地说是 EAX）。——</p>

不，Self 在内存中有实际地址。试试这个代码，看看你自己。

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  ShowMessage(IntToStr(Integer(@Self)));
end;

procedure TForm1.Button2Click(Sender: TObject);
var
  newform: TForm;
  p: ^Integer;
begin
  Self.Caption := 'TheOriginal';
  newform := TForm.Create(nil);
  try
    newform.Caption := 'TheNewOne';
    // The following two lines is, technically, the same as
    //   Self := newform;
    p := Pointer(@Self);
    p^ := Integer(newform);
    ShowMessage(Self.Caption);  // This will show 'TheNewOne' instead of 'TheOriginal'
  finally
    Self.Free; // Relax, this will free TheNewOne rather than TheOriginal
  end;
end; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-03-30T11:49:33.093

有时，当您想尽可能地优化方法时（不诉诸汇编），“Self”可以（ab）用作“自由”变量 - 它可能只是意味着使用堆栈和使用堆栈之间的区别使用寄存器。

当然，堆栈的内容很可能已经存在于 CPU 缓存中，因此访问速度应该很快，但寄存器更快。

作为旁注：我仍然怀念在 Amiga 的摩托罗拉 68000 上编程并拥有 16 个数据和 16 个地址寄存器的日子……我不敢相信世界选择了有限的 4 个寄存器80x86 系列处理器！

最后一点，我有时会选择使用 Self，因为 Delphi 的优化器实际上并没有*优化*得那么好。（至少，与可以在各种 LLVM 优化器中找到的诡计相比，它相形见绌。）恕我直言，当然还有 YMMV。

# iphone - 基于视图和基于窗口的应用程序模板之间的主要区别？

> ID：814575
> 
> 赞同：2
> 
> 时间：2009-05-02T10:03:33.117
> 
> 标签：iphone, xcode, xcode-template

Iphone 中基于视图的应用程序模板和基于窗口的应用程序模板之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-03T16:14:46.320

核心思想是基于 Window 的应用程序模板比基于 View 的应用程序模板更简单。对具有单一视图的项目使用基于视图的应用程序模板。对其他类型的项目使用基于窗口的应用程序模板（或其他模板）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-02T10:12:08.977

基于视图的应用程序模板为您提供了 UIView 设置，而基于窗口的应用程序模板没有。

# asp.net - 如何在页面刷新的情况下使用 jquery 调用服务器端函数？

> ID：814581
> 
> 赞同：1
> 
> 时间：2009-05-02T10:05:49.680
> 
> 标签：asp.net, jquery, ajax

如何在页面刷新的情况下使用 jquery 调用服务器端函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-02T10:29:47.000

使用 AJAX：

```
$.get('somepage.aspx', {foo: 'bar'}, function(data){
  alert('the page returned this: '+data); 
 }); 
```

然后设置 somepage.aspx 来执行函数并返回数据（如果需要）。

有关 jQuery AJAX 的更多信息，请参见：[http ://docs.jquery.com/Ajax](http://docs.jquery.com/Ajax)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-02T11:22:37.827

以下是使用 jQuery 和 Microsoft Ajax调用自定义[ASP.NET PageMethod的方法：](http://www.singingeels.com/Articles/Using_Page_Methods_in_ASPNET_AJAX.aspx)

```
<%@ Page Language="C#" AutoEventWireup="true" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Untitled Page</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"></script>
    <script type="text/javascript" src="http://www.json.org/json2.js"></script>
</head>
<script runat="server">
    /// <summary>
    /// A custom PageMethod that will echo back the argument
    /// </summary>
    /// <param name="argument">some arbitrary string</param>
    /// <returns></returns>
    [System.Web.Services.WebMethod]
    public static string MyPageMethod(string argument)
    {
        return "hello " + argument;
    }    
</script>

<script type="text/javascript">
function callPageMthodWithMicrosoftAjax(argument) {
    PageMethods.MyPageMethod(argument, function(result) {
        document.getElementById('result').innerHTML = result;
    }, function(error) {
        alert(error.get_message());
    });
}

function callPageMthodWithjQueryAjax(argument) {
    jQuery.ajax({
        url: '/default.aspx/MyPageMethod',
        type: 'post',
        contentType: 'application/json',
        data: JSON.stringify({ argument: argument }),
        dataType: 'json',
        processData: false,
        success: function(data, textStatus) {
            jQuery('#result').html(data.d);
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
            var jsonError = JSON.parse(XMLHttpRequest.responseText);
            alert(jsonError.Message);
        }

    });
}
</script>
<body>
    <form id="form1" runat="server">
        <asp:ScriptManager ID="ScriptManager" runat="server" EnablePageMethods="true" />    
        <a href="#" onclick="callPageMthodWithMicrosoftAjax('Microsoft Ajax')">call PageMethod with Microsoft Ajax</a>
        <br />
        <a href="#" onclick="callPageMthodWithjQueryAjax('jQuery')">call PageMethod with jQuery</a>
        <div id="result"></div>
    </form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-02T10:49:06.673

如果您有需要调用的仅限服务器的方法，请在服务器端使用 WebMethod，在客户端使用 ajax。读[这个](http://www.dev102.com/2008/04/30/call-aspnet-webmethod-from-jquery/)我很有用。

再见

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-02T11:09:14.410

我看到你使用的是 asp.net，所以你有几个选择：

1.  要获取当前 aspx 页面以外的任何资源，请使用 $.get()。这可能是一个图像文件或另一个 aspx 页面的输出。
2.  如果您需要往返当前页面并为当前页面使用安全性等，则可以[调用 web 方法](http://encosia.com/2008/03/27/using-jquery-to-consume-aspnet-json-web-services/)。请注意，在您调用 web 方法期间，您的 ViewState 将不可用。我链接到的文章来自 Dave Ward 的[Encosia](http://www.encosia.com)，他有一个关于使用 jQuery 和 Asp.net 进行 AJAX 调用的广泛系列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-03-30T08:30:09.407

Use the Jquery .ajax() method.

```
$.ajax({
  url: "test.aspx/method",
  context: document.body,
  success: function(){
    $(this).addClass("done");
  }
}); 
```

# ruby-on-rails - 你如何在 Rails 中动态调用 attr_accessible？

> ID：814584
> 
> 赞同：1
> 
> 时间：2009-05-02T10:10:46.720
> 
> 标签：ruby-on-rails, ruby, metaprogramming

我有一个相当独特的类，它允许其子类声明虚拟字段。子类可以通过调用父类的方法来声明存储为 XML 的虚拟字段，如下所示：

```
class Child1 < Parent
  create_xml_field ["readings", "usage"]
end
```

我设法通过一个讨厌的工作让它工作。create_xml_field方法将字段名称*存储*在 Class 变量中（见下文）。从*after_initialize*方法内部调用*init_xml_fields*方法。

```
class Parent < ActiveRecord::Base

  def self.create_xml_field(fields)
    @@xml_fields[self.name] = fields
  end

  def init_xml_fields(xml_fields)
    xml_fields.each do |f|
      f=f.to_sym
      self.class_eval do
        define_method(f) { ... } # define getter
        define_method(f) { ... } # define setter
        attr_accessible(f)       # add to mass assign OK list, does not seem to work!
      end
    end
  end

  protected
    def after_initialize
      init_xml_fields
    end
end
```

够恶心吧？我并不自豪，但我很难让它发挥作用。此外，解决方法不适用于表单参数的大规模分配。

有没有人有经验动态调用 attr_accessible 以允许在子类中进行大规模分配？先感谢您！

**为了清楚起见，对这篇文章进行了编辑！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T11:13:46.803

下面是我如何实现创建访问器方法并将它们设置为 attr_accessibles 的元编程部分。

我使用 YAML 而不是 XML，只是作为个人圣战。我什至继续实施了不需要的序列化部分，只是为了将您推向 YAML。

```
require 'yaml'
require 'rubygems'
require 'active_support'
require 'active_record'

module Yamlable
  def self.included m
    m.extend ClassMethods
  end

  module ClassMethods
    def add_yaml_fields *args
      write_inheritable_array(:yaml_fields, args)
      attr_accessor(*args)
      attr_accessible(*args)
      before_save :serialize_yaml_fields
    end
  end

  def serialize_yaml_fields
    self.yamlable_column = read_inheritable_attribute(:yaml_fields)\
      .inject({}) { |h, a| h[a] = send(a); h }.to_yaml
  end

  def initialize(*args)
    super
    YAML::load(yamlable_column).each { |k, v| send("#{k}=", v) }
  end
end

class ParentModel < ActiveRecord::Base
  include Yamlable
  add_yaml_fields :foo, :bar
end

class ChildModel < ParentModel
end

# look, they're there:
y ChildModel.read_inheritable_attribute(:yaml_fields) 
```

现在，如果您想知道为什么您的特定代码不起作用，您将不得不发布更多内容。

* * *

我可能应该对类可继承属性进行一些扩展。它们有点像类变量，有点像类实例变量。

如果你在一个类中定义了一个可继承的属性，它的所有子类都会共享它。但是，如果您在子类中更新所述属性，则该子类会复制原始属性并对其进行更新，因此更新是专有的，不会影响继承链中它周围的其他类。

使用普通`write_inheritable_attribute`方法，在子类上设置它只会覆盖父类的值。使用可继承的数组和哈希，`write_inheritable_*`将连接/合并到父类的值。

* * *

所以，在实践中，我的`add_yaml_fields`作品是这样的：

```
class Parent
  add_yaml_attributes :foo

class Child1 < Parent
  add_yaml_attributes :bar

class Child2 < Parent
  add_yaml_attributes :baz 
```

这样，每个类的 yaml 属性将是：

*   家长： foo
*   Child1：foo，bar
*   Child2：foo，baz

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-09T12:50:38.457

@kch 是正确的，但是我使用**initialize(*args)**发现了一个问题。ActiveRecord 并不总是使用**new()**实例化模型对象，因此并不总是调用**initialize()方法。**

而是使用**after_initialize(*args)**，如下所示。

```
def self.included m
    m.extend ClassMethods
  end

  module ClassMethods
    def add_yaml_fields *args
      write_inheritable_array(:yaml_fields, args)
      attr_accessor(*args)
      attr_accessible(*args)
      before_save :serialize_yaml_fields
    end
  end

  def serialize_yaml_fields
    self.yamlable_column = read_inheritable_attribute(:yaml_fields)\
      .inject({}) { |h, a| h[a] = send(a); h }.to_yaml
  end

  def after_initialize(*args)
    super
    YAML::load(yamlable_column).each { |k, v| send("#{k}=", v) }
  end
end

class ParentModel < ActiveRecord::Base
  include Yamlable
  add_yaml_fields :foo, :bar
end

class ChildModel < ParentModel
end 
```

# macos - 有没有在 mac 上创建 Graphviz Diagrams 的好教程？

> ID：814585
> 
> 赞同：3
> 
> 时间：2009-05-02T10:10:53.770
> 
> 标签：macos, visualization, graphviz, diagramming

在我找不到任何其他有用的 mac 图表工具之后，我对 Graphviz 非常感兴趣。

有没有在 mac 上创建 Graphviz Diagrams 的好教程？

# php - 使用 PHP exec 调用 MySQL exe 不起作用

> ID：814586
> 
> 赞同：2
> 
> 时间：2009-05-02T10:10:53.910
> 
> 标签：php, mysql

我有一个非常简单的 PHP 脚本`exec`，调用`mysql`命令：

```
 $dbhost = 'localhost';
  $dbuser = 'root';
  $dbpass = 'mypass';
  $db = 'job';
  $file ='job_create.sql';
  $mySQLDir='"C:\Program Files\MySQL\MySQL Server 5.1\bin\mysql"';

    if ($dbpass != '') {
        $cmd = $mySQLDir.' -h '.$dbhost.' --user='.$dbuser.' --password='.$dbpass.' < "'.dirname(__FILE__).'\\'.$file.'"';
    } else {
        $cmd = $mySQLDir.' -h '.$dbhost.' --user='.$dbuser.' < "'.dirname(__FILE__).'\\'.$file.'"';
    }

    // echo $cmd;
    exec($cmd,$out,$retval); 
```

我希望上面的脚本调用`mysql`命令，传入用户身份验证信息并`job_create.sql`即时运行。

唯一的问题是它不起作用，因为`job_create.sq`l 没有正常运行。. 我尝试`mysql`使用以下脚本直接从命令行调用命令，

```
bin\mysql.exe -h localhost --user=root --password=mypass < "job_create.sql" 
```

它有效。

知道如何解决这个问题吗？

**编辑：我从 PHP 命令行调用这个脚本。即 PHP.exe installdb.php**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-02T12:21:46.047

我找到了解决方案

问题是你需要明确地包含`$cmd`在“”中。即，

```
exec('"'.$cmd.'"',$out ,$retval); 
```

这是有效的完整代码：

```
<?php

  $dbhost = 'localhost';
  $dbuser = 'root';
  $dbpass = 'password';
  $db = 'job';
  $file =dirname(__FILE__).'\\'.'job_create.sql';
  $mySQLDir='"C:\\Program Files\\MySQL\\MySQL Server 5.1\\bin\\mysql.exe"';

    if ($dbpass != '') {
        $cmd = $mySQLDir.' -h '.$dbhost.' --user='.$dbuser.' --password='.$dbpass.' < "'.$file.'"';

    } else {
        $cmd = $mySQLDir.' -h '.$dbhost.' --user='.$dbuser.' < "'.$file.'"';
    }

     echo $cmd;  

   exec('"'.$cmd.'"',$out ,$retval);
   echo "\n";
    echo ($retval);

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-02T11:51:02.843

这里的问题可能是

```
mysql < file.sql 
```

取决于由 shell 促进的管道操作。如果 php 直接使用 exec*() 系列的 api 调用而不是通过 shell 来执行命令，这将不起作用。我知道 shell 实际上是在 linux 上使用的，但在 windows 上可能不是这样。该手册没有具体说明命令的执行方式。

尝试改用 -e 标志和 source 命令：

```
bin\mysql.exe -h localhost --user=root --password=mypass -e 'source job_create.sql' 
```

无论调用命令的方式如何，这都应该有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-02T12:19:29.453

您的脚本应该可以工作，但作为最佳实践，请务必尝试使用 -e 标志和“源”命令而不是 < 字符。

很有可能，该脚本以与您不同的用户身份运行，并且没有命令行权限来运行您的命令。检查用户权限。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-02-12T17:27:58.487

即使在 Ubuntu 上，这也发生在我身上。问题是我正在执行以下代码：

```
$mysql = shell_exec("sudo which mysql");
$cmd = "$mysql --host=$host --user=$user --password=$pass -D $dbname -e 'source $base_sql_file'";
exec($cmd, $output, $retvar); 
```

只缺少一个细节...... shell_exec 返回带有尾随字符的输出。执行命令时，我得到一个`MySQL error 127 (Record is crashed)`.

解决方案很简单：添加`trim function`到`shell_exec`:)

```
$mysql = trim(shell_exec("sudo which mysql"));
$cmd = "$mysql --host=$host --user=$user --password=$pass -D $dbname -e 'source $base_sql_file'";
exec($cmd, $output, $retvar); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-02T10:14:29.737

`-p`和之间不应有空格`mypass`。

顺便说一句，我建议你使用表格`--password=mypass`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-02T11:12:06.277

尝试使用[proc_open](http://php.net/proc_open) () 而不是 exec()。
proc_open 允许您显示命令行工具给出的错误。

# graphics - 计算机图形学中是否存在未知领域？

> ID：814588
> 
> 赞同：7
> 
> 时间：2009-05-02T10:12:06.793
> 
> 标签：graphics

在我看来，计算机图形现在似乎一切皆有可能。似乎我们可以完全令人信服地描绘布料、水、皮肤，任何东西。

是否存在仍然存在挑战的领域，或者现在的重点是寻找更快的算法和缩短渲染时间？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-02T10:21:10.890

1.  水
2.  火
3.  人们
4.  实时完成所有操作
5.  物理学（与计算机图形学领域有些相关）

*我还没有见过完全*令人信服的数字人类。任何显着规模的水和火也是如此。

以计算机游戏物理学的一些最新发展为例：Red Faction: Guerilla 中的可破坏建筑物，Force Unleashed 中的基于材料的破坏等。大部分计算机图形都围绕视频游戏和电影展开，足够好就是足够好。里面有很多巧妙的诡计。在效率、可扩展性、彻底性和现实性方面还有很大的改进空间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-02T10:37:51.583

如果你想正确地做到这一点，几乎所有的图形在图形中仍然是不可能的。为了实现实时帧率，布料、水和皮肤都是伪造的。我们仍然无法做到可能是最基本的效果：适当的照明。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-20T12:42:34.570

我在电子游戏领域工作了 8 年，我看到游戏和电影中的图形每年都在变得更好。

在我看来，我们不必担心让图形看起来正确；使用我们现在拥有的技术并增加 CPU 功率，这将不是问题......对于静止镜头。

我现在在游戏和电影中看到的问题是（恕我直言）角色动画看起来不正确。尽管渲染得非常漂亮，但视频游戏和电影中的角色并没有逼真的动画效果——即使使用了动作捕捉也是如此。角色缺少一些让他们看起来自然的东西——无论是呼吸模式，身体做出的随机微动，某人随机眨眼更快或更慢的方式……我无法确定它到底是什么，只是没有看起来不自然。

所以.. 我认为下一个研究领域应该是（人类）运动和动画，让东西看起来正确。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-02T10:28:27.130

我想不出有什么比一个令人信服的人更难做到的事情了，这在本杰明·巴顿奇事中已经做到了（恕我直言）。看看[这个关于 BB 制作的网站](http://www.benjaminbuttonfx.com/site.html)。电影中的人脸图形是由计算机制作的，但制作人脸动画仍然存在挑战，目前还不能单独由计算机完成。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-02T10:44:10.680

我同意 Steven 和 erik 的观点。说到人，我们深陷于[恐怖谷。](http://en.wikipedia.org/wiki/Uncanny_valley)

jalf 是正确的，他指出很多事情仍然是烟雾缭绕的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-02T11:10:42.533

3D
不是看起来像 3d 的图片，但我指的是实际的 3d——一旦我们把 2D 降下来，然后在第 3 暗处再做一遍。我们现在才刚刚开始在影院中看到一些非常酷的东西，以及一些非常有趣的新产品，它们不再需要特殊的galsses。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-08T06:14:27.487

光栅图形基本上是一个巨大的黑客集合。光线追踪或类似方法更“合适”。您可以通过光线追踪免费获得光能传递、反射和折射等信息。实时进行光线追踪对于游戏来说意义重大。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-05-21T00:04:33.273

关于光线追踪；光线追踪很酷，但以“标准”方式进行光线追踪并不能为您提供逼真的照明，因为光线是从相机（您坐在显示器前时眼睛的位置）通过视平面（您的计算机屏幕）投射的看看他们在哪里结束。

在现实世界中，它不会那样工作。您不会从眼睛发射雷达/声纳射线并检查它们击中的东西；相反，其他物体会发出能量，有时这种能量会到达您的视网膜。

因此，计算照明的正确方法类似于光子映射，其中每个光源发出的能量通过介质（空气、水）传输并反射/折射穿过/穿过材料。

想一想 - 通过屏幕上的像素从相机拍摄光线会为您提供一个单一的方向，您可以检查光强度，而实际上光线可能会以许多不同的角度到达同一像素。因此，“标准”光线追踪不会给您带来光散射效果，除非您实施特殊的技巧来考虑这一点。除了多边形光栅化之外，人们想要使用另一种方式的确切*原因*难道不是黑客攻击吗？

光线追踪并不是最终的解决方案。

唯一真正的解决方案是一个无限的过程，其中灯光发出的能量在场景中反弹，如果你幸运的话，最终会出现在你的相机镜头上。由于无限过程很难模拟，我们必须在某一点或另一点近似它。游戏使用 hack 来使东西看起来不错，但最终所有其他光栅化器/渲染器/跟踪器/任何策略都必须在某个时候实施限制 - hack。

重要的是——这真的重要吗？我们是要 100% 模拟现实生活，还是计算一张看起来 100% 真实的图片就足够了，无论使用什么技术？

如果您无法分辨图片是真实的还是 CGI 的，那么使用了什么方法或 hack 是否重要？

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-05-08T06:07:11.433

有些人认为计算机视觉是计算机图形学的前沿。它基本上是反向的 CG：不是从模型到图像，而是从图像到模型。计算机视觉是一个年轻的领域，存在大量未解决的问题。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-02T15:47:22.930

一个使您与数学隔离并且对程序员不友好的 API。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-05-02T11:20:46.147

大量的东西仍然很难或非常慢。

例如，尝试将透明对象与雾化结合起来。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-20T12:53:44.047

挑战似乎是对没有多边形的表面进行高性能建模。多边形是光栅化表面，显示在光栅化屏幕上。

# asp.net - ASP.NET - 如何显示服务器统计信息/信息？

> ID：814593
> 
> 赞同：3
> 
> 时间：2009-05-02T10:13:11.673
> 
> 标签：asp.net

在 php 中有一个函数`phpinfo();`可以显示整个负载的服务器统计信息和配置信息。ASP.NET 中的等价物是什么？有没有什么？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-24T20:09:49.347

您现在可以使用[`System.Web.Helpers.ServerInfo.GetHtml()`](http://msdn.microsoft.com/en-us/library/system.web.helpers.serverinfo.gethtml.aspx)(in `System.Web.Helpers.dll`) 来返回所有环境变量的 HTML 表，这与 phpinfo() 非常相似。

[http://msdn.microsoft.com/en-us/library/system.web.helpers.serverinfo.gethtml.aspx](http://msdn.microsoft.com/en-us/library/system.web.helpers.serverinfo.gethtml.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-02T13:05:20.170

简单的回答：没有。

但是在 web.config 中为整个应用程序启用跟踪后，您可以查看 trace.axd 以获取类似信息。

```
<configuration>
  <system.web>
    <trace enabled="true" pageOutput="false" requestLimit="40" localOnly="false"/>
  </system.web>
</configuration> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T10:16:57.623

答案是否定的，但我认为这个问题的答案会对你有所帮助：[How to print similar information as phpinfo() but for ASP.NET?](https://stackoverflow.com/questions/544209/is-there-an-equivalent-to-phpinfo-in-asp-net)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-02T10:17:27.000

ASP.NET 中没有`phpinfo`样式函数。我认为您可以启用跟踪`Web.config`并导航`trace.axd`以查看类似的内容。

# macos - mac osx 有没有好的免费的纯文本编辑器？

> ID：814597
> 
> 赞同：3
> 
> 时间：2009-05-02T10:16:39.560
> 
> 标签：macos, text-editor

我想知道安装的mac上似乎没有文本编辑器能够只保存没有任何格式的文本。您知道哪些纯文本编辑器允许在没有任何格式（如字体大小等）的情况下编辑文本？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-02T10:33:36.697

OSX有一个完善的[vim 7.2](http://code.google.com/p/macvim/)版本。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-02T10:19:43.750

`emacs`, `vim`,`nano`

Mac OS X TextEdit 支持编辑文本文件而不进行格式化。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-02T10:31:28.930

如果您安装和使用**[Vim](http://www.vim.org/)****或****[Emacs](http://www.gnu.org/software/emacs/)****中的任何**一个，您将拥有一个可以在现在和将来的任何主要平台上使用的文本编辑器，并且也可以在大多数次要平台上使用。

作为奖励，它们都得到了*很好*的支持，非常强大，并且（不足为奇）对您可能想要做**的任何类型的文本编辑**（甚至是您尚未意识到自己想要的类型）都有现有的、丰富的支持）。

当然，它们都默认支持创建纯文本文件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-03-24T02:35:20.500

如果您想要自由，[TextWrangler是您的最佳选择。](http://www.barebones.com/products/TextWrangler/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-02T10:48:43.447

对于免费的 Maclike（对于给定的值）GUI，有[Komodo Edit](http://www.activestate.com/komodo_edit/)、[Smultron](http://www.tuppis.com/smultron/)、[TextWrangler](http://www.barebones.com/products/TextWrangler/)。

在 Emacs 变体中，我个人最喜欢的是[Aquamacs](http://aquamacs.org/)，因为它尽最大努力减轻 OS X 与 Emacs 阻抗不匹配，并预装了一些更复杂的软件包。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-02T14:14:40.563

听起来您不知道可以使用 TextEdit 保存纯文本文件。虽然默认为 RTF，但您可以转到“格式”>“制作纯文本”进行切换。

当然，Xcode 将保存纯文本文件，并让您控制编码和行尾等内容。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-02T11:07:32.463

那是几年前的事了，但我尝试了所有我能找到的前端编辑（JS、XHTML、CSS 等）。我发现 Komodo 是最好的、最舒适的、最直观的。它并不完美，但它是我找到的最接近的。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-05-02T10:21:51.950

您可能会考虑阅读此[http://hackresponsibly.com/the-best-text-code-editors-for-windows-mac-os-x-and-linux/](http://hackresponsibly.com/the-best-text-code-editors-for-windows-mac-os-x-and-linux/)

# wpf - WPF中的多语言

> ID：814600
> 
> 赞同：22
> 
> 时间：2009-05-02T10:18:00.477
> 
> 标签：wpf, xaml, globalization, multilingual

你能推荐一种为 WPF 应用程序实现多语言系统的好方法吗？我现在使用的方法涉及 XML、类和 xaml 扩展。它在大多数情况下都可以正常工作，但是当我必须处理动态标签或动态文本时，通常需要一些额外的努力。我想让程序员只在主要问题上工作而忘记了语言问题。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-05-02T10:49:40.743

跟着这些步骤：

**1)**将所有`String`片段放在单独的资源文件中。

示例`StringResources.xaml`：：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:system="clr-namespace:System;assembly=mscorlib">

    <!-- String resource that can be localized -->
    <system:String x:Key="All_Vehicles">All Vehicles</system:String>

</ResourceDictionary> 
```

**2)**为每种语言制作副本并将它们添加（翻译）到合并的词典中。不要忘记添加国家/地区的 ISO 代码以使事情变得更容易。

示例`App.xaml`：

```
<Application x:Class="WpfStringTables.App"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
StartupUri="Window1.xaml">
    <Application.Resources>
        <ResourceDictionary >
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="StringResources.de-DE.xaml" />
                <ResourceDictionary Source="StringResources.nl-NL.xaml" />
                <ResourceDictionary Source="StringResources.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application> 
```

最后一个带有字符串的资源文件将用于替换代码中的文本部分。

**3a)**使用`String`表格中的文本部分：

示例`Window1.xaml`：

```
<Window x:Class="WpfStringTables.Window1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="Window1" Height="300" Width="300">
    <Grid>
        <Button Margin="51,82,108,129" Name="AllVehiclesButton" 
                Content="{StaticResource All_Vehicles}"/>
    </Grid>
</Window> 
```

**3b）**从代码加载资源（如果您不想通过设置，请仅使用此代码`XAML`）：

```
void PageLoad()
{
  string str = FindResource("All_Vehicles").ToString();
} 
```

**4)**申请开始时切换到新文化：

代码片段来自`App.xaml.cs`：

```
public static void SelectCulture(string culture)    
{      
    if (String.IsNullOrEmpty(culture))
        return;

    //Copy all MergedDictionarys into a auxiliar list.
    var dictionaryList = Application.Current.Resources.MergedDictionaries.ToList();

    //Search for the specified culture.     
    string requestedCulture = string.Format("StringResources.{0}.xaml", culture);
    var resourceDictionary = dictionaryList.
        FirstOrDefault(d => d.Source.OriginalString == requestedCulture);

    if (resourceDictionary == null)
    {
        //If not found, select our default language.             
        requestedCulture = "StringResources.xaml";
        resourceDictionary = dictionaryList.
            FirstOrDefault(d => d.Source.OriginalString == requestedCulture);
    }

    //If we have the requested resource, remove it from the list and place at the end.     
    //Then this language will be our string table to use.      
    if (resourceDictionary != null)
    {
        Application.Current.Resources.MergedDictionaries.Remove(resourceDictionary);
        Application.Current.Resources.MergedDictionaries.Add(resourceDictionary);
    }

    //Inform the threads of the new culture.     
    Thread.CurrentThread.CurrentCulture = new CultureInfo(culture);
    Thread.CurrentThread.CurrentUICulture = new CultureInfo(culture);

} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-05-02T13:01:59.053

我正在使用[WPF 本地化扩展](https://github.com/XAMLMarkupExtensions/WPFLocalizationExtension)。这是本地化任何类型的`DependencyProperty`on `DependencyObject`s 的一种非常简单的方法。

*   处于真正稳定的状态
*   支持类似绑定的写作风格`Text = {LocText ResAssembly:ResFile:ResKey}`
*   使用 .resx-fallback 机制（例如 en-us -> en -> 独立文化）
*   支持文化强制（例如“这必须一直是英语”）
*   适用于正常的依赖属性
*   与控制模板一起使用
*   可以在 XAML 中使用（真的：P），无需任何额外的命名空间
*   可以在后面的代码中用于将本地化值绑定到动态生成的控件
*   `INotifyPropertyChanged`高级使用工具
*   支持字符串格式，例如`"this is the '{0}' value"`
*   支持前缀和后缀值（目前有`LocText`扩展名）
*   在生产系统中使用（比如我的公共关系产品）
*   将语言切换到运行时不会影响**时间**片
*   可以与`.resx`所有程序集中的任何资源文件 ( ) 一起使用（也可以在运行时动态加载）
*   不需要任何初始化过程（比如“调用 xyz 注册一个特殊的本地化字典”）
*   在设计时可用（MS Expression Blend、MS Visual Studio 2008（Normal 和 SP1）
*   在设计时可以更改所选语言
*   可以本地化任何类型的数据类型，只要它的转换器（`TypeConverter`）存在（扩展`LocalizeExtension`）
*   内置了对`Text`, upper `Text`, lower `Text`, `Image`s, `Brush`es`Double`和`Thickness`
*   不影响任何内存泄漏
*   保持`UID`不动产
*   提供`SpecificCulture`用作`IFormatProvider`（例如`(123.20).ToString(LocalizeDictionary.SpecificCulture) = "123.20"`或`"123,20"`）
*   提供一些功能来检查和获取后台代码中的资源值
*   不会改变文化`Thread.CurrentCulture`或`Thread.CurrentUICulture`（可以很容易地改变）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-02T10:57:16.937

Josh Smith 写了一篇关于他的首选方法的深入教程：[在 WPF 中创建国际化向导](http://www.codeproject.com/KB/WPF/InternationalizedWizard.aspx)。

它可能会引导您进行大的重新设计（这是一个[MVVM 解决方案](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)），但出于其他原因，使用 MVVM 似乎也是值得的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-10-31T14:06:39.613

使用这篇文章，我设法轻松地使用资源文件来处理多语言 WPF 窗口。 [http://www.codeproject.com/KB/WPF/WPF_Resx_Localization.aspx](http://www.codeproject.com/KB/WPF/WPF_Resx_Localization.aspx) 您应该检查一下，因为它非常简单有效。

# asp.net - Silverlight 页面添加到 html

> ID：814602
> 
> 赞同：0
> 
> 时间：2009-05-02T10:18:18.543
> 
> 标签：asp.net, html, silverlight, xaml

我有一个 silverlight 页面，我有一个带有我的布局的 html 页面。如何将 silverlight 页面添加到我的 html 页面的一部分？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T10:28:35.240

[本文](http://msdn.microsoft.com/en-us/library/cc189089%28VS.95%29.aspx)将告诉您如何嵌入 Silverlight。如果您使用 Visual Studio 创建 Silverlight 应用程序，IDE 应该为您创建嵌入 Silverlight 控件所需的所有代码。

# jquery - 为什么 JQuery 自动完成只显示一项？

> ID：814609
> 
> 赞同：0
> 
> 时间：2009-05-02T10:28:39.563
> 
> 标签：jquery, html, django

我在我的模板上使用 JQuery 自动完成功能，但是当我得到结果时，自动完成功能只显示一项，尽管获取的结果不止一项。它只显示列表中的第一项！

例子：

如果我有一个带有**('python', 'pythonism', 'pythodus')的结果列表**

在自动完成上我输入**“pyt”**它只在下拉菜单中显示**“python” ！**

我的自动完成代码：

```
$(document).ready(function(){

        $("#tags1").autocomplete("/taglookup/", {
        width: 320,
        max: 4,
        highlight: false,
        multiple: true,
        multipleSeparator:",",
        scroll: true,
        scrollHeight: 300,
        delay: 10
         });

      }); 
```

我的 AJAX django 视图被调用：

```
def tag_lookup(request):
    # Default return list
    results = []
    if request.method == "GET":
        if request.GET.has_key(u'q'):
            value = request.GET[u'q']
            # Ignore queries shorter than length 3
            if len(value) > 2:
                TI = Tag.objects.filter(name__contains=value)
                print TI
                results = [ x.name for x in TI]
    print results #shows me more than one item is returned
    return HttpResponse('|'.join(results), mimetype='text/plain') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-03T11:31:19.530

伙计们，刚刚发现我正在使用的 JQuery 自动完成插件需要一个换行符作为项目之间的分隔符，所以我已经替换了我的 Ajax Django 视图来读取这样的内容；

```
 return HttpResponse('\n'.join(results), mimetype='text/plain') 
```

它的工作完美！

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T12:38:39.797

看起来jQuery 正在`HttpResponse`做的事情。尝试更改为. 另外，由于我不知道.`Something|Something|...``Something,Something,...``multipleSeparator``'|'``HttpResponse`

# javascript - 如何使用 JavaScript 从 URL 读取 GET 数据？

> ID：814613
> 
> 赞同：55
> 
> 时间：2009-05-02T10:32:16.840
> 
> 标签：javascript, parsing, url

我正在尝试将数据从一页传递到另一页。

> www.mints.com?name=something

如何`name`使用 JavaScript 阅读？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2009-05-02T10:47:23.137

在使用如下自定义解析函数或第三方库之前，请查看[这个更当前的解决方案。](https://stackoverflow.com/a/55576345/18771)

下面的代码可以工作，并且在不可用的情况下仍然有用[`URLSearchParams`](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams)，但它是在 JavaScript 中没有可用的原生解决方案的时候编写的。在现代浏览器或 Node.js 中，更喜欢使用内置功能。

* * *

```
function parseURLParams(url) {
    var queryStart = url.indexOf("?") + 1,
        queryEnd   = url.indexOf("#") + 1 || url.length + 1,
        query = url.slice(queryStart, queryEnd - 1),
        pairs = query.replace(/\+/g, " ").split("&"),
        parms = {}, i, n, v, nv;

    if (query === url || query === "") return;

    for (i = 0; i < pairs.length; i++) {
        nv = pairs[i].split("=", 2);
        n = decodeURIComponent(nv[0]);
        v = decodeURIComponent(nv[1]);

        if (!parms.hasOwnProperty(n)) parms[n] = [];
        parms[n].push(nv.length === 2 ? v : null);
    }
    return parms;
} 
```

使用如下：

```
var urlString = "http://www.example.com/bar?a=a+a&b%20b=b&c=1&c=2&d#hash";
    urlParams = parseURLParams(urlString); 
```

它返回一个像这样的对象：

```
{
  "a"  : ["a a"],     /* param values are always returned as arrays */
  "b b": ["b"],       /* param names can have special chars as well */
  "c"  : ["1", "2"]   /* an URL param can occur multiple times!     */
  "d"  : [null]       /* parameters without values are set to null  */ 
} 
```

所以

```
parseURLParams("www.mints.com?name=something") 
```

给

```
{name: ["something"]} 
```

* * *

**编辑**：[这个答案的原始版本](https://stackoverflow.com/revisions/814628/3)使用基于正则表达式的 URL 解析方法。它使用了一个较短的函数，但该方法有缺陷，我用适当的解析器替换了它。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2019-04-08T15:00:35.270

现在是 2019 年，不需要任何手写解决方案或第三方库。如果要在浏览器中解析当前页面的 URL：

```
# running on https://www.example.com?name=n1&name=n2
let params = new URLSearchParams(location.search);
params.get('name') # => "n1"
params.getAll('name') # => ["n1", "n2"] 
```

如果要在浏览器或 Node.js 中解析随机 URL：

```
let url = 'https://www.example.com?name=n1&name=n2';
let params = (new URL(url)).searchParams;
params.get('name') # => "n1"
params.getAll('name') # => ["n1", "n2"] 
```

它利用了现代浏览器附带的[URLSearchParams接口。](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-10-13T18:41:50.947

我认为这也应该有效：

```
function $_GET(q,s) {
    s = (s) ? s : window.location.search;
    var re = new RegExp('&amp;'+q+'=([^&amp;]*)','i');
    return (s=s.replace(/^\?/,'&amp;').match(re)) ?s=s[1] :s='';
} 
```

就这样称呼它：

```
var value = $_GET('myvariable'); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-08-07T03:56:04.263

试试这个方法

```
var url_string = window.location;
var url = new URL(url_string);
var name = url.searchParams.get("name");
var tvid = url.searchParams.get("id"); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-02T11:52:27.940

这是一个解决方案。当然，这个函数不需要加载到“window.params”选项中——可以自定义。

```
window.params = function(){
    var params = {};
    var param_array = window.location.href.split('?')[1].split('&');
    for(var i in param_array){
        x = param_array[i].split('=');
        params[x[0]] = x[1];
    }
    return params;
}(); 
```

[http://www.mints.com/myurl.html?name=something&goal=true](http://www.mints.com/myurl.html?name=something&goal=true)上的示例 API 调用：

```
if(window.params.name == 'something') doStuff();
else if( window.params.goal == 'true') shoutGOOOOOAAALLL(); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-11-14T14:20:26.003

你可以很容易地做到这一点

```
const shopId =  new URLSearchParams(window.location.search).get('shop_id');
console.log(shopId); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-02T10:36:34.677

location.search [https://developer.mozilla.org/en/DOM/window.location](https://developer.mozilla.org/en/DOM/window.location)

尽管大多数使用某种解析例程来读取查询字符串参数。

这是一个[http://safalra.com/web-design/javascript/parsing-query-strings/](http://safalra.com/web-design/javascript/parsing-query-strings/)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-07-26T11:15:50.143

我还做了一个相当简单的函数。您可以通过以下方式调用它： get("yourgetname");

并得到任何东西。（现在我写了它，我注意到如果你的值中有 & ，它会给你 %26 ..）

```
function get(name){
  var url = window.location.search;
  var num = url.search(name);
  var namel = name.length;
  var frontlength = namel+num+1; //length of everything before the value 
  var front = url.substring(0, frontlength);  
  url = url.replace(front, "");  
  num = url.search("&");

 if(num>=0) return url.substr(0,num); 
 if(num<0)  return url;             
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-10-20T13:23:17.940

当前选择的答案在我的情况下根本不起作用，我觉得这是一个相当典型的答案。[我在这里](https://www.sitepoint.com/get-url-parameters-with-javascript/)找到了以下功能，效果很好！

```
function getAllUrlParams(url) {

  // get query string from url (optional) or window
  var queryString = url ? url.split('?')[1] : window.location.search.slice(1);

  // we'll store the parameters here
  var obj = {};

  // if query string exists
  if (queryString) {

    // stuff after # is not part of query string, so get rid of it
    queryString = queryString.split('#')[0];

    // split our query string into its component parts
    var arr = queryString.split('&');

    for (var i=0; i<arr.length; i++) {
      // separate the keys and the values
      var a = arr[i].split('=');

      // in case params look like: list[]=thing1&list[]=thing2
      var paramNum = undefined;
      var paramName = a[0].replace(/\[\d*\]/, function(v) {
        paramNum = v.slice(1,-1);
        return '';
      });

      // set parameter value (use 'true' if empty)
      var paramValue = typeof(a[1])==='undefined' ? true : a[1];

      // (optional) keep case consistent
      paramName = paramName.toLowerCase();
      paramValue = paramValue.toLowerCase();

      // if parameter name already exists
      if (obj[paramName]) {
        // convert value to array (if still string)
        if (typeof obj[paramName] === 'string') {
          obj[paramName] = [obj[paramName]];
        }
        // if no array index number specified...
        if (typeof paramNum === 'undefined') {
          // put the value on the end of the array
          obj[paramName].push(paramValue);
        }
        // if array index number specified...
        else {
          // put the value at that index number
          obj[paramName][paramNum] = paramValue;
        }
      }
      // if param name doesn't exist yet, set it
      else {
        obj[paramName] = paramValue;
      }
    }
  }

  return obj;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-08-29T09:02:20.343

我用以下方法修复/改进了 Tomalak 的答案：

*   仅在需要时创建一个数组。
*   如果值中有另一个等式符号，则它会在值内
*   它现在使用该`location.search`值而不是 url。
*   空搜索字符串会导致空对象。

代码：

```
function getSearchObject() {
    if (location.search === "") return {};

    var o = {},
        nvPairs = location.search.substr(1).replace(/\+/g, " ").split("&");

    nvPairs.forEach( function (pair) {
        var e = pair.indexOf('=');
        var n = decodeURIComponent(e < 0 ? pair : pair.substr(0,e)),
            v = (e < 0 || e + 1 == pair.length) 
                ? null : 
                decodeURIComponent(pair.substr(e + 1,pair.length - e));
        if (!(n in o))
            o[n] = v;
        else if (o[n] instanceof Array)
            o[n].push(v);
        else
            o[n] = [o[n] , v];
    });
    return o;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-08-07T04:19:47.713

像这样尝试.. 例如：**www.example.com ?id=1**

```
$.urlParam = function (name) {
    var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.search);
    return (results !== null) ? results[1] || 0 : false;
}
console.log($.urlParam('id')); 
```

希望能帮助到你。:)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-02-26T10:39:48.353

> 你可以这样做

```
function parseURLParams(url) {
        var queryStart = url.indexOf("?") + 1,
            queryEnd   = url.indexOf("#") + 1 || url.length + 1,
            query = url.slice(queryStart, queryEnd - 1),
            pairs = query.replace(/\+/g, " ").split("&"),
            parms = {}, i, n, v, nv;

        if (query === url || query === "") return;

        for (i = 0; i < pairs.length; i++) {
            nv = pairs[i].split("=", 2);
            n = decodeURIComponent(nv[0]);
            v = decodeURIComponent(nv[1]);

            if (!parms.hasOwnProperty(n)) parms[n] = [];
            parms[n].push(nv.length === 2 ? v : null);
        }
        return parms;
    }

    //enter code here

    var urlString = "http://www.examle.com/bar?a=a+a&b%20b=b&c=1&c=2&d#hash";

    urlParams = parseURLParams(urlString);
    console.log(urlParams) 
```

# macos - graphviz 有没有好的 IDE 或 WYSIWYG 编辑器？

> ID：814621
> 
> 赞同：38
> 
> 时间：2009-05-02T10:40:06.477
> 
> 标签：macos, ide, editor, wysiwyg, graphviz

实际上我下载了一个用于 graphviz 的 GUI（不记得那个网站），上面说他们赢得了 Apple 设计奖。但该工具实际上只显示我创建的 *.dot 文件。而已。它只是被称为“Graphviz”......我想周围有更好的工具可以使用 Graphviz 技术。

我试过这个：[链接文本](http://www.pixelglow.com/graphviz/)

虽然他们说他们获得了苹果设计奖，但我真的看不到那里有什么特别的 GUI。界面很差。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2010-11-10T19:33:19.937

当前版本的 Graphviz.app 不包含上面[rampion 屏幕截图](https://stackoverflow.com/questions/814621/is-there-any-good-ide-or-wysiwyg-editor-for-graphviz/814639#814639)中显示的“外部编辑器”按钮- 或 Render/Stop 按钮，它已将“设置”按钮替换为“属性”。但是，它可以按照描述的方式使用。

[我从http://graphviz.org/Download_macos.php](http://graphviz.org/Download_macos.php)下载了“graphviz-2.27.20101110.0545.pkg” 。请注意，有几个地方可以下载各种自称为 Graphviz 的东西：

*   [http://graphviz.org/Download_macos.php](http://graphviz.org/Download_macos.php)
*   [http://graphviz.org/Download..php](http://graphviz.org/Download..php)
*   [http://www.pixelglow.com/graphviz/download/](http://www.pixelglow.com/graphviz/download/)

使用第一个，我选择了最新的开发快照 - 浏览邮件列表（[兴趣](https://mailman.research.att.com/pipermail/graphviz-interest/)和[开发](https://mailman.research.att.com/pipermail/graphviz-devel/)）显示它仍然非常活跃，你不会从仍然有“内容即将推出”消息的 pixelglow 网站知道从 2004 年开始。

无论如何，当 2.27 启动时，它会抛出一个“打开”对话框。打开一个 .dot 文件将显示一个图表，但取消将您减少到只有一个菜单栏。不要灰心，用文本创建一个文件

```
graph graphname {
} 
```

并称它为something.dot。

在 Graphviz 中打开它，你会得到一个带有空图的 GUI：

![替代文字](https://i.stack.imgur.com/8T0ar.png)

在文件中输入更多文本，如下所示：

```
graph graphname {
  a -- b -- c -- d -- a;
  a -- c;
  b -- d;
} 
```

保存时，Graphviz 窗口会自动更新以显示：

![替代文字](https://i.stack.imgur.com/50aln.png)

“属性”工具箱中有很多选项，但看起来他们希望您手动编辑源代码。我有点期待“添加顶点”和“添加边缘”按钮，以及移动顶点的能力，但这显然不是它的目的。

因此，显然，WYSIWYG 编辑器是屏幕一侧您最喜欢的文本编辑器，而 Graphviz 则是另一侧。就 IDE 而言，现在最好的东西似乎是打印出 DOT 格式的[文档](http://www.graphviz.org/Documentation.php)。不是每个人都对 WYSIWYG 编辑器或 IDE 的想法，但它可能适用于活跃用户。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-02T10:56:50.697

[Graphviz.app](http://www.pixelglow.com/graphviz/)有一个命令可以在外部编辑器中打开当前的点文件。如果您使用它，它将监视文件句柄的更改，并在每次保存到外部编辑器后更新图表。这就是如何让它作为所见即所得界面工作的方法。

![图形可视化](https://i.stack.imgur.com/7pj02.jpg)

“编辑”按钮位于左上角，“设置”旁边。

实际上它无论如何都会持续监控文件句柄，所以我要做的是在 Graphviz.app 中打开点文件，启动 vim 并编辑点文件（使用`set backupcopy=yes`）并在每个`:w`.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-04T05:12:50.227

不完全是你所要求的——但我要提到的项目的潜力是相当大的——作为一个 graphviz 粉丝，我对现在的可能性感到非常惊讶。

简短的历史：

*   [http://ushiroad.com/jsviz/](http://ushiroad.com/jsviz/) - ushiroad 制作了这个小家伙。使用 Emscripten 项目，他交叉编译了足够多的 graphviz，以将布局和基本节点内容作为纯 JavaScript 应用程序。您必须单击 DOT src 框架右下角的小圆箭头按钮。

唯一的缺点（这绝不会削弱将 graphviz 移植到 javascript 的美妙之处）是您可以用它做什么的限制。它基本上只是带有几个主要形状节点的点布局 - 不支持颜色。等等

作者厉害到可以上传自己的作品到github，[https://github.com/gyuque/livizjs](https://github.com/gyuque/livizjs)

*   [https://github.com/mdaines/viz.js](https://github.com/mdaines/viz.js) - 看起来它把它带到了一个新的水平，从[演示页面](http://mdaines.github.io/viz.js/)看起来好像 vis.js 可以做所有 graphviz 的标准构建可以做的事情，但一切都在你的浏览器。

所以，如果你愿意——你可以很容易地使用一个轻量级（但专业！）的浏览器内编辑器，比如[CodeMirror](http://codemirror.net/)（它支持 vi 键）——然后安装一个像 jsviz 这样的“渲染”按钮。

所以..不完全是你要找的。但是对于在这个问题上花费一点时间的人来说，天赐良机 - 大量基于 Web 的客户端图形工具等待着您。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-02-17T12:56:34.020

There was a UI called dotty. I don't remember it being very nice to use.

[http://linux.die.net/man/1/dotty](http://linux.die.net/man/1/dotty)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-04T16:36:00.503

出色的[OmniGraffle](http://www.omnigroup.com/applications/OmniGraffle/)可以导入 *.dot 文件，但遗憾的是，我认为您不能将其往返并将编辑后的结果本地导出为 dot 文件。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-02T11:27:05.960

[Pixelglow](http://www.pixelglow.com/graphviz/)看起来像您所指的网站。

我注意到他们现在提供支持 iPhone 的解决方案（！）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-12-08T14:47:27.827

另一种解决方案可能是[tintfu](http://sourceforge.net/projects/tintfu/)。不幸的是，它不允许您直接编辑源代码。

# google-app-engine - 如何在我的 Google App Engine 项目中实现 OpenID 使用者？

> ID：814622
> 
> 赞同：17
> 
> 时间：2009-05-02T10:42:59.903
> 
> 标签：google-app-engine, gwt, openid

我想在我的 Java [Google App Engine](http://en.wikipedia.org/wiki/Google_App_Engine) Web 应用程序中使用 OpenID，但我不知道从哪里开始...

我看过[openid4java](http://code.google.com/p/openid4java/)和[joid](http://code.google.com/p/joid/)。

**openid4java**说您必须在“认可的库”路径上放置一些库。我的计算机上没有本地计算机，而且我肯定不知道如何在 Google App Engine 上执行此操作。

**joid**看起来很简单，但看起来不是最新的或其他什么，因为当我尝试获得身份验证时，我从 Google 收到了 HTTP 400。

任何指针？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-09T19:30:19.613

[http://code.google.com/p/dyuproject/](http://code.google.com/p/dyuproject/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-02T17:16:54.870

[翻译http://appengine-cookbook.appspot.com/recipe/accept-google-aol-yahoo-myspace-facebook-and-openid-logins/](http://appengine-cookbook.appspot.com/recipe/accept-google-aol-yahoo-myspace-facebook-and-openid-logins/)应该很容易（它提供了一个 Python 应用程序引擎方法来做到这一点) 进入应用程序引擎 Java，如果您可以通过 rpxnow.com。如果解析 json 有问题，您还可以从 rpxnow.com 请求 xml 结果。有关 RPX API 的更多信息，请参阅[https://rpxnow.com/docs](https://rpxnow.com/docs)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T19:01:45.997

对于 openidjava 库，您只需将其包含在您的项目中。[如果您使用的是 Eclipse（它有一个很棒的GWT](http://en.wikipedia.org/wiki/Google_Web_Toolkit)和 App Engine插件）。将 openidjava 文件粘贴到您的 src 目录或 WEB-INF/lib 目录中的 jar 中，并确保将其添加到您的类路径中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-24T02:57:41.433

好吧，我知道这是一个老问题，但我现在正试图让 openid4java 在 App Engine 上运行，但它不起作用。似乎它使用了一个想要启动新线程的“HTTPClient”库，因此 App Engine 会抛出异常。

因此，如果您打算在 App Engine 上使用 openid4java，请先查看是否有解决方案。我只是找不到一个:(

[您可以在此处](http://groups.google.com/group/openid4java/browse_thread/thread/8b5b19bbf1aa89fe)和[此处](http://groups.google.com/group/openid4java/browse_thread/thread/4ec280d72453d09/8cc191fb67893168?lnk=gst&q=app+engine#8cc191fb67893168)更详细地查看问题。

希望能帮助到你！

# silverlight - Silverlight Webservice“远程服务器返回错误：未找到”

> ID：814627
> 
> 赞同：9
> 
> 时间：2009-05-02T10:46:13.747
> 
> 标签：silverlight, web-services

我有一个 Silverlight 应用程序，它检索可序列化类的列表。在这些类中还有其他可序列化的类，其中一些也在列表中。事情是一切正常，直到我填写导致silverlight应用程序抛出异常“远程服务器返回错误：NotFound”的可序列化类列表之一

这是填充类的代码（不要被大量代码吓倒，它只是用信息填充类）：

```
 private SCharacter getSCharacter(Character userCharacter)
        {
            var iqcb = userCharacter.CharacterBodies;
            var iqcs = userCharacter.CharacterStats;
            var iqgs = userCharacter.CharacterSettings;
            var iqcp = userCharacter.CharacterPoints;
            var iqcproj = userCharacter.CharacterProjectiles;

            var currChar = 
                new SCharacter 
                {
                    characterID = userCharacter.characterID,
                    characterName = userCharacter.characterName,
                    characterClassID = userCharacter.characterClassID,
                    userUsername = userCharacter.userUsername
                };
            foreach (var cb in iqcb)
            {
                var scb = new SCharacterBody();
                scb.body.bodyId = cb.bodyId;
                scb.body.bodyName = cb.Body.bodyName;
                scb.bodyPart.bodyPartId = cb.BodyPart.bodyPartId;
                scb.bodyPart.bodyPartName = cb.BodyPart.bodyPartName;
                currChar.characterBodyList.Add(scb);
            }
            foreach (var cs in iqcs)
            {
                var scs = 
                    new SCharacterStat 
                    { 
                          characterID = cs.characterID,
                          statId = cs.statId,
                          characterStatId = cs.characterStatId,
                          statName = cs.Stat.statName,
                          statValue = cs.statValue                           
                    };
                currChar.characterStatList.Add(scs);
            }
            foreach (var igs in iqgs)
            {
                var scs = new SCharacterSetting
                    {
                        characterID = igs.characterID,
                        modifierId = igs.GameSetting.modifierId,
                        modifierType = igs.GameSetting.Modifier.modifierType,
                        characterSettingId = igs.characterSettingId,
                        settingDescription = igs.GameSetting.settingDescription,
                        settingName = igs.GameSetting.settingName,
                        settingValue = igs.GameSetting.settingValue
                    };
                var gss = igs.GameSetting.Stat;
                scs.stat.statId = gss.statId;
                scs.stat.statName = gss.statName;
                currChar.characterSettingList.Add(scs);
            }
            foreach (var cp in iqcp)
            {
                var scp = new SCharacterPoint
                {
                    characterID = cp.characterID,
                    characterPointsId = cp.characterPointsId,
                    pointsId = cp.pointsId,
                    pointsName = cp.Point.pointsName,
                    pointsValue = cp.pointsValue                    
                };
                currChar.characterPointList.Add(scp);
            }

            foreach (var cp in iqcproj)
            {
                var scp = 
                    new SCharacterProjectile 
                    { 
                         characterId = cp.characterId,
                         characterProjectileId = cp.characterProjectileId,
                         particleId = cp.Projectile.particleId,
                         projectileHeight = cp.Projectile.projectileHeight,
                         projectileWidth= cp.Projectile.projectileWidth,
                         damageId =cp.Projectile.damageId,
                         damageDuration = cp.Projectile.Damage.damageDuration,
                         damageValue = cp.Projectile.Damage.damageValue,
                         projectileName = cp.Projectile.projectileName
                    };
                scp.force.forceName = cp.Projectile.forceName;
                scp.force.impulseX = (float)cp.Projectile.Force.impulseX;
                scp.force.impulseY = (float)cp.Projectile.Force.impulseY;
                scp.force.torque = (float)cp.Projectile.Force.torque;

                scp.projectileParticle.particleId = cp.Projectile.particleId;
                scp.projectileParticle.particleName = cp.Projectile.Particle.particleName;

                foreach (var psv in cp.Projectile.Particle.ParticleSettingValues)
                {
                    var spsv = new SParticleSettingValue();
                    spsv.particleId = psv.particleId;
                    spsv.particleSettingID = psv.particleSettingID;
                    spsv.particleSettingName = psv.ParticleSetting.particleSettingName;
                    spsv.particleSettingValue = psv.particleSettingValue1;
                    spsv.particleSettingValuesID = psv.particleSettingValueID;
                    scp.projectileParticle.particleSettingList.Add(spsv);
                }

                foreach (var pc in cp.Projectile.Particle.ParticleColours)
                {
                    var spc = new SParticleColour();
                    spc.colourHex = pc.colourHex;
                    spc.particleColourId = pc.particleColourId;
                    spc.particleId = pc.particleId;
                    scp.projectileParticle.particleColourList.Add(spc);
                }
                currChar.projectileList.Add(scp);
            }
            return currChar; 
        } 
```

在最后 3 行代码中`currChar.projectileList.Add(scp);`，如果我删除那行代码，一切正常。我认为可能导致问题的是 ciruclar 引用，但我检查了类，似乎找不到任何类。如果需要，我将粘贴与之相关的类的代码`projectileList`

更新：尝试调试 web 服务本身，显然 xml 序列化存在问题，您可以在[此处找到问题](https://stackoverflow.com/questions/814792/c-system-invalidoperationexception-the-type-foo-was-not-expected)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2011-02-02T11:02:26.490

下次，您应该启用 WCF 跟踪：

把它放在你的 web.config 文件中：

```
<system.diagnostics>    
    <sources>
      <source name="System.ServiceModel"
              switchValue="Information, ActivityTracing"
              propagateActivity="true">
        <listeners>
          <add name="traceListener"
              type="System.Diagnostics.XmlWriterTraceListener"
              initializeData= "c:\temp\WEBTraces.log" />
        </listeners>
      </source>
    </sources>
  </system.diagnostics> 
```

在此处阅读更多内容：http: [//msdn.microsoft.com/en-us/library/ms733025.aspx](http://msdn.microsoft.com/en-us/library/ms733025.aspx)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-02T12:14:05.957

您得到的错误是一个通用错误，可能会产生误导。您的问题可能与 Silverlight 不支持某些类型因此无法使用 WCF 传递的事实有关。

要获取有关错误的更多详细信息，请尝试使用名为 Fiddler 的免费工具。您可以在此处找到有关如何使用它的详细说明：[WCF Essentials - Fiddler](http://mokosh.co.uk/post/2009/03/31/silverlight-and-wcf-essentials-fiddler/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-02T12:38:12.857

[在我的第二个](https://stackoverflow.com/questions/814792/c-system-invalidoperationexception-the-type-foo-was-not-expected/814802#814802)问题中找到了我的问题的解决方案。

# uml - 谁能告诉我在哪里可以获得 ERP 系统的示例 UML 图？

> ID：814636
> 
> 赞同：5
> 
> 时间：2009-05-02T10:55:28.657
> 
> 标签：uml, sample

我想学习一个ERP系统。为此，我想研究它的过程。因此，如果有人可以给我一些有用的链接，那将对我有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-02T11:17:12.847

愿你在这里找到有用的东西

[模型驱动的 ERP 实施](http://campus.hesge.ch/dugerdilp/_private/ICEIS2006.pdf)

[UML 图](http://www.neogia.org/UML_Diagram)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T11:23:07.403

查看 Silverstron 的数据模型资源书系列。不是 UML ......但很接近。 [第 1 卷](https://rads.stackoverflow.com/amzn/click/com/0471380237)，[第 2 卷](https://rads.stackoverflow.com/amzn/click/com/0471353485)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-02T11:35:12.197

有许多 ERP 系统，其中大多数是为特定行业设计的，有时甚至是为特定公司设计的。

所以你必须先选择一个特定的ERP系统，然后再对其进行分析。一个很好的起点是[SourceForge 上的 ERP 系统列表](http://sourceforge.net/search/?type_of_search=soft&words=erp)。

另一个起点是[这份](http://www.dsmforum.org/events/DSVL02/linvald.pdf)关于 ERP 系统中 UML 图的一般使用的文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-08T17:52:45.173

这是一个典型的 UML，我一直在寻找和你一样的东西，向客户展示这个，这是最好的例子 [https://creately.com/diagram/example/hn34ipx61/ERP](https://creately.com/diagram/example/hn34ipx61/ERP)

# asp.net-mvc - Asp.net MVC 表单验证相关

> ID：814637
> 
> 赞同：1
> 
> 时间：2009-05-02T10:55:50.807
> 
> 标签：asp.net-mvc

我不知道人们是否已经问过这个问题，或者他们还没有看到这个问题或其他什么。

我正在为每个创建视图创建强类型视图。

我通过制作部分 LINQ 类实体来验证服务器端的表单。

通过添加功能喜欢

```
public IEnumerable<RuleViolation> GetRuleViolations()
    {
        if (String.IsNullOrEmpty(Name))
            yield return new RuleViolation("Name is Required", "Name");
        if (String.IsNullOrEmpty(Date.ToString()))
            yield return new RuleViolation("Date is Required", "Date");
        yield break;
    } 
```

我的控制器动作的结构类似于 [（来源：][[scottgu.com](http://www.scottgu.com/blogposts/mvcpreview5/step15.png)][）][![替代文字](https://i.stack.imgur.com/pVQ5h.png)](https://i.stack.imgur.com/pVQ5h.png)

**问题**：

如果名称字段长度为 Varchar2(10)，并且用户输入的名称超出了此限制，则产品（见图）对象的名称将为**空**字符串。

更多其他问题与上面的**日期**相同如果用户不输入日期，那么对象也将具有类似 1/1/0001 的日期。

摘要：我们应该使用这种方法吗？或者使用方法，比如通过使用 FormColletion 或 Request.Form 来获取所有元素...

Cam你给我最好的建议吗？

另请参阅[Justin_etheredge 的帖子](http://dotnet.dzone.com/news/aspnet-mvc-think-before-you-bi)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T12:23:16.777

这个问题有很多潜在的解决方案。

*   对于字符串：我使用使用反射的验证器从 LINQ 实体属性的列属性中获取字符串的最大长度并检查这些。或者，如果列将被截断，您可以处理插入时发生的错误。

*   对于日期：您可以对必须由用户输入的日期（即必须在某个合理的日期之后）或可以自动输入的日期进行完整性检查，使用数据库生成的默认值并将属性标记为自动生成并读取- 仅在设计师中。不要将这些日期放在表单上，​​以便在您发布页面时不会在实体中设置它们。这适用于“创建日期”等。对于修改日期，请执行类似的操作，但具有由更新触发器生成的值，而不是更新时的默认值。

*   对于布尔值（默认为 false）：验证值提供者除了对实体本身进行验证外，还尝试了该字段的值。或者，您可以使列可为空并检查它是否不为空。两者都是妥协，但后者使数据模型适合验证框架，所以我更喜欢前者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T12:31:33.790

这是一种做事方式——但它几乎打破了 MVC 模式。你在那里执行检查的方式是你基本上允许 LINQ 和上下文来处理它——这就是你遇到问题的原因。理想情况下，您希望在控制器和实际数据之间创建一个层——例如，一个服务层（在商业世界中称为商业智能 (BI) 层）。

在该服务层中，您将实施您的规则——例如名称的长度、日期的有效性、允许和不允许的内容。如果那里有问题，那么您可以冒泡错误并让控制器处理它们。

理想情况下，您希望在控制器和实际逻辑之间创建一个抽象级别。

我会看看我是否可以尽快举个例子（目前有一些事情出现......）

# asp.net - 如何从我的 aspx.cs 文件中调用 javascript 方法

> ID：814642
> 
> 赞同：1
> 
> 时间：2009-05-02T10:58:46.433
> 
> 标签：asp.net, javascript, asp.net-ajax, updatepanel

我有一个 javascript 方法，我必须在页面加载时从 aspx 页面调用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-02T11:05:33.530

Javascript 方法是客户端方法，因此您不能在服务器端代码中调用它们。

但是，如果您正在寻找一种在页面加载时调用您的方法的方法，请将您的方法调用放入脚本标记并将其写入您的 aspx 页面：

```
<body>
  <script language="javascript">
    myMethod();
  </script>
</body> 
```

或者您可以像这样从代码隐藏中注册您的脚本：

```
protected void Page_Load(object sender, EventArgs e)
{
    string script = "myMethod();";

    if (!this.Page.ClientScript.IsClientScriptBlockRegistered("myPostBackScript"))
    {
        this.Page.ClientScript.RegisterClientScriptBlock(typeof(MyPage),
               "myPostBackScript", script, true);
    }
} 
```

# java - 是否可以在单独的 war 文件中创建可动态插入的 GWT 小部件/portlet？

> ID：814647
> 
> 赞同：5
> 
> 时间：2009-05-02T11:00:13.153
> 
> 标签：java, gwt, widget, portlet, portal

是否可以在 GWT 中创建可以动态加载并添加到 GWT Web 应用程序的小部件/portlet，以及 GWT 小部件可以驻留在单独的 war 文件中的位置？

为了澄清我的问题：符合 JSR168/JSR286 的门户可以在单独的项目（war 文件）中创建 portlet 并将它们动态加载到门户页面中。假设您想在 GWT 应用程序中做类似的事情。因此，假设我们为 GUI 创建了一个仅使用 GWT 的门户（没有 JSP 等），并且我们希望动态添加一个用纯 GWT 编写的“portlet”。那可能吗？

我可以想象它可以使用 IFrame 来完成，但如果这样的 GWT 小部件/portlet 完全成为 GWT 主机“门户”应用程序的一部分并共享它的样式表和其他资源，那就更好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T10:14:35.873

我想“GWT portlet”只不过是您自己编写的一个小部件（并且可能实现了一个公共接口）。

困难的部分是动态地允许预编译的 gwt 应用程序包含另一个 gwt 组件（在本例中为 portlet），而无需再次使用源代码进行编译（这似乎是问题所暗示的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-12-21T11:51:57.797

我也一直在研究这个问题，尤其是在看过 Wave 演示之后。据我所知，wave 团队采用的方法是使用 Google Gadget api 或 Gadget api 的变体。谷歌也有一个使用 GWT 编写小工具的教程。我想你会使用基于事件的 api，其中 JSO 对象在 Gadget 和 GWT 应用程序之间传递。请注意，如果来自不同的域，这也可能会引入 XSS 问题。我认为这类似于在 Flash 中动态加载 swf。事件方法类似于安全地使用跨站点动态加载的 swf。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-06-20T18:57:32.517

我还是 GWT 的新手，但根据我读过的内容，我可以告诉你，你必须遵循一个架构 MVP 和一个应用控制器，它可以动态地“插入”和“播放”你想要使用必须使用的元数据调度的内容来自模型层......类似于“元应用程序”的东西

# latex - 如何获取 Latex 文档中可用命令的列表？

> ID：814654
> 
> 赞同：2
> 
> 时间：2009-05-02T11:05:46.633
> 
> 标签：latex

我对乳胶本身了解不多。我需要的只是可用命令的列表。所有标准命令以及来自“usepackage”声明的命令。

我目前专注于 MiKTeX，所以如果 MiKTeX 确实提供，那当然很棒，否则我确实有解析一些 .sty 或 .def 文件的想法。但我不明白这些文件背后的语法。如果解析是唯一的解决方案，我应该在这些文件中寻找什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-02T19:47:28.300

解析 TeX 代码绝不是获取所有控制序列列表的唯一方法。其他可能性包括：

*   使 TeX 在加载相关包后转储其数据结构，然后解析转储文件；当您运行该`latex`命令时，真正发生的是`tex`二进制文件加载`latex.fmt`转储文件，该文件是通过相同的二进制文件解析所有 LaTeX 内置代码并转储其数据结构而生成的；

*   修改 TeX 的源代码以在每次定义控制序列时输出一些东西；

*   在可编写脚本的调试器中运行 TeX，在序列插入哈希表的位置插入断点，并让脚本输出序列的名称。

这些都不是一个特别简单的解决方案，但可能比自己编写一个与 TeX 等效的解析器更容易。要开始使用，请查看[TeX: The Program](http://c2.com/cgi/wiki?TexTheProgram)和您的 TeX 系统的源代码。

如果您的目标是在编辑器中提供“智能感知”，那么仅列出命令序列不会有太大帮助：当用户键入 时`\ref{`，您应该提供文档中定义的标签列表（如果键入`Chapter~\ref{`结果会加分章节标签列表，并非所有标签）；for `\settowidth{`，长度命令列表；对于`\begin{`，环境列表；等等

你可以看到[AUCTeX](http://www.gnu.org/software/auctex/manual/auctex/index.html)（一种 Emacs 模式）做了什么；它有一个有限的、基于正则表达式的解析器来处理常见的情况，以及一堆扩展功能的特定于包的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T12:29:07.480

在我看来，您可以使用“备忘单”之类的东西。[这里](http://www.stdout.org/~winston/latex/latexsheet-a4.pdf)有一个，但肯定还有更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T08:44:04.570

从您的问题中不清楚您是想要一个在程序中使用的列表，还是只是为您自己提供文档？

在后一种情况下，最近的 TeX 发行版包含命令，该命令`texdoc`将针对您提出的任何要求找到并打开文档，例如`texdoc hyperref`. 为方便起见，它定义了别名：`texdoc koma`即使实际文件名为`scrguien.pdf`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-02T11:08:26.847

latex 是一个宏包，宏系统（一些卫生系统除外）是出了名的难以解析。

这些年来没有*像样的*乳胶到 html 转换器的事实证明了这一点。

但无论如何，现有的可以给你一个如何继续的例子，搜索 latex2html（在 Perl 中）、tex2ht 和 hevea

# c# - 如何在c#中从数组中复制所有不同的元素

> ID：814655
> 
> 赞同：1
> 
> 时间：2009-05-02T11:06:29.283
> 
> 标签：c#, arrays

假设有一个这样的数组：

```
double [] numbers = new double[] {1,1,2,2,5,7,7,7}; 
```

我想以一种省时的方式只将不同的数字复制到一个新数组中（结果应该是数字 = {1,2,5,7}）。我知道如何以一种时间效率低的方式做到这一点——通过查看下一个数字是否与前一个数字相同，如果是，则继续复制循环。还有其他方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-02T11:10:23.143

```
using System.Linq;

double[] newArray = numbers.Distinct().ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-02T11:16:52.317

如果您没有 Linq，您可以执行以下操作：

```
List<double> uniques = new List<double>;
foreach (double num in numbers)
{
  if (!uniques.Contains(num)) uniques.Add(num);
}

double[] uniquearray = uniques.ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-02T11:11:41.003

显然，有必要检查列表的每个元素来做到这一点。您描述的“时间效率低下”方式实际上已经是对您必须做的基本要素的描述。如果您想要一种方便的方式来做到这一点，Linq 已经定义了`Distinct()`运算符，然后您可以将其与`ToArray()`.

# asp.net-mvc - 访问除默认路由以外的任何内容时出错

> ID：814673
> 
> 赞同：1
> 
> 时间：2009-05-02T11:16:27.233
> 
> 标签：asp.net-mvc, routing, mono

我无法让路由在单声道上工作。默认路由工作正常，但没有其他工作。

这些是我设置的路线：

```
 routes.MapRoute(
            "HelloRoute",
            "Hello/{name}",
            new { controller = "Home", action = "Hello" }
        );

        routes.MapRoute(
            "Default",
            "{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", id = "" }
        ); 
```

在我的 HomeController 上，我有相应的操作：

```
 public ActionResult Index ()
    {
        ViewData["Message"] = "Welcome to ASP.NET MVC on Mono!";
        return View ();
    }

        public ActionResult Hello(string name)
    {
        ViewData["Message"] = "hello "+name;
        return View ();
    } 
```

现在，如果我导航到[http://localhost/](http://localhost/)我会收到消息 Welcome to... 但是如果我转到[http://localhost/Hello/World](http://localhost/Hello/World)我会收到错误消息：

```
value name controller does not match any of the values. 
```

说明：HTTP 500。处理请求时出错。

堆栈跟踪：

System.InvalidOperationException：值名称控制器与任何值都不匹配。在 System.Web.Routing.RouteData.GetRequiredString (System.String valueName) [0x00000] 在 System.Web.Mvc.MvcHandler.ProcessRequest (System.Web.HttpContextBase httpContext) [0x00000] 在 System.Web.Mvc.MvcHandler.ProcessRequest (System.Web.HttpContext httpContext) [0x00000] 在 System.Web.Mvc.MvcHandler.System.Web.IHttpHandler.ProcessRequest (System.Web.HttpContext httpContext) [0x00000] 在 System.Web.HttpApplication+c__Iterator2.MoveNext () [0x00000] 在 System.Web.HttpApplication.Tick () [0x00000]

我在做明显错误的事情吗？

除了额外的路线、动作和视图之外，这是在 Monodevelop 中创建的标准 asp.net mvc 项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T12:05:46.367

正如本文评论部分所建议的那样，这似乎是 MonoDevelop 的 ASP.NET MVC 模板中的一个[错误](http://mjhutchinson.com/journal/2009/04/02/aspnet_mvc_monodevelop_addin_preview)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T13:24:27.710

原来这是单声道路由实现中的一个错误。

我在这里填写了一份错误报告：[https](https://bugzilla.novell.com/show_bug.cgi?id=500739) ://bugzilla.novell.com/show_bug.cgi?id=500739 。现在已经修复了，虽然我还没有尝试过。

# nhibernate - 流畅的nhibernate：where子句中的问题

> ID：814679
> 
> 赞同：0
> 
> 时间：2009-05-02T11:19:35.900
> 
> 标签：nhibernate, fluent-nhibernate

我正在使用流利的nhibernate。

我写了一段代码，例如，

```
var data = session.CreateCriteria(typeof(CustomerNameValueList))
                        .Add(Expression.Eq("CustomerId","3"))
                        .List<CustomerNameValueList>(); 
```

但 nhibernate 生成的查询看起来像

```
select column1,column2,column3 from table where CustomerId=? 
```

问题在于“customerId=？” 加速：CustomerId = 3“

为什么客户 ID=？而不是 customerId=3

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-02-25T20:54:56.220

这个查询没有错。这 '？' 在日志中将替换为字符串值“3”。如果您的列类型实际上是 int，您可能会遇到问题。查询的参数化是您想要保护您免受 SQL 注入攻击的原因。如果生成的查询如您所期望的那样具有 CustomerId='3' 并且 '3' 来自网页上的文本框，则可以注入更多 SQL，例如从 MyUserTable 中删除的 '3'。

# c# - C# - 在 ListBox 中添加按钮

> ID：814682
> 
> 赞同：6
> 
> 时间：2009-05-02T11:22:09.980
> 
> 标签：c#, .net, listbox

我正在编写一个 C# 应用程序（WinForm），其中包含用户添加的内容的 ListBox。现在，我可以在 ListBox 下有一个普通的按钮来删除项目，但我想把按钮放在内容旁边，这样就在 ListBox 里面。

像这样：

*   内容 1 | X
*   内容 2 | X
*   ...
*   内容 5 | X

问题是我缺乏 .NET 方面的经验，所以我不知道在所有自动控制的情况下如何实现这一点。我用谷歌搜索了它，但没有找到有意义的结果。

欢迎任何实现这一目标的提示、线索或片段！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-02T11:37:35.747

您可以使用 ListView 代替 ListBox，ListView[可以添加自定义列类型](http://www.codeproject.com/KB/list/ListViewEmbeddedControls.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-02T13:51:51.727

所以一个人可以制作一个自定义控件，但对于我的应用程序来说，这并不值得麻烦。

我所做的是创建一个 DataGrid，使它类似于 ListView，但有自己的耀斑。我这样做是因为 DataGrid 已经在其单元格中内置了一个按钮控件。

是的，我知道，有点丑陋的“黑客”，但它就像一个魅力！:)

给 Shay Erlichmen 的道具，他让我在我的 ListBox 之外思考。看看我在那里做了什么？;)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-02T11:33:33.353

使用系统；使用 System.Collections.Generic；使用 System.Windows.Forms；

命名空间 WindowsFormsApplication11 { public partial class Form1 : Form { List _items = new List();

```
 public Form1()
    {
        InitializeComponent();

        _items.Add("One");
        _items.Add("Two");
        _items.Add("Three");

        listBox1.DataSource = _items;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        // The Add button was clicked.
        _items.Add("New item " + DateTime.Now.Second);

        // Change the DataSource.
        listBox1.DataSource = null;
        listBox1.DataSource = _items;
    }

    private void button2_Click(object sender, EventArgs e)
    {
        // The Remove button was clicked.
        int selectedIndex = listBox1.SelectedIndex;

        try
        {
            // Remove the item in the List.
            _items.RemoveAt(selectedIndex);
        }
        catch
        {
        }

        listBox1.DataSource = null;
        listBox1.DataSource = _items;
    }
} 
```

}

private void button1_Click(object sender, EventArgs e) { // 添加按钮被点击。// ...

```
button2.Enabled = true; 
```

}

private void button2_Click(object sender, EventArgs e) { // 删除按钮被点击。// ....

```
if (listBox1.Items.Count == 0)
{
    button2.Enabled = false;
} 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-02T11:29:46.560

假设它是一个 WinForms 应用程序

为此，您需要一个自定义控件。我会检查诸如[http://www.devexpress.com/Products/NET/Controls/WinForms/Editors/editors/ListBoxes.xml](http://www.devexpress.com/Products/NET/Controls/WinForms/Editors/editors/ListBoxes.xml)之类的供应商，也许有人知道专门执行此操作的控件。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-02T11:29:11.600

我不知道您为什么要专门这样做？我会在底部放置一个按钮，用于删除列表框中的所有选定项目。这被认为是做这种事情的常用方法，除非您想使用 jquery 并在列表框上放置一个 onClick 事件，如果该项目存储在数据库中或从页面上的列表中删除该项目，则该事件发送调用以删除该项目.

# projects - 项目演示中最尴尬的时刻？

> ID：814687
> 
> 赞同：0
> 
> 时间：2009-05-02T11:25:28.223
> 
> 标签：projects

您是否有过这样的经历，例如在演示过程中出现问题，您感到非常糟糕和不舒服。你怎么能应付这样的情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-02T11:28:53.740

像史蒂夫乔布斯那样做：

对着观众微笑，说：“当它起作用时，真是太棒了。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T11:29:07.653

有一次，我向一位来自英格兰北部的客户展示一些软件时，我成为了口音飘忽综合症的受害者，并说“现在！” 用我最好的博尔顿口音。

幸运的是，他要么没有注意到，要么礼貌地没有提及。不过还是很尴尬。

# javascript - document.getElementById 似乎不起作用

> ID：814696
> 
> 赞同：0
> 
> 时间：2009-05-02T11:33:07.893
> 
> 标签：javascript

我正在尝试执行此操作，但看不到任何结果：

```
<script>
function init() {
document.getElementById('welcome').innerHTML = "<font color=white>Logged As:"+ param + "</font>";
}
window.onload = init; 
</script>

    <body>
           ...........
    <div class="span-24 bottom_header" id="welcome"></div>
           ...........
    </body> 
```

这里有什么问题…………

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-02T11:39:23.247

可能是因为您的背景是白色的，并且您正在为字体设置白色：`<font color=white>`. 试试黑色:-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-02T11:42:02.367

这个独立的示例在 Firefox 和 IE7 中非常适合我：

```
<html><head><script>
function init() {
    document.getElementById('welcome').innerHTML = "<font color=white>Logged As: TEST</font>";
}
window.onload = init; 
</script></head>
<body>
<div class="span-24 bottom_header" id="welcome"></div>
</body></html> 
```

您正在添加白底白字，请记住...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-02T11:38:23.543

您是否考虑过使用 jquery 之类的框架？上面的代码将变成......

```
$('#welcome').html("<font color='white'>Logged As: TEST</font>"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-02T11:46:32.683

两件事情：

1) 确保页面上的 ID 为“welcome”的元素不超过一个

2）题外话，但修改你需要使用“字体”标签。在这个时候，它被严重弃用了。你应该使用`<span style="color:white;">Logged as: TEST</span>`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-02T14:33:20.270

Perspx 和 JimmyP 已经在问题的评论中提到了这一点：

**Are you sure you the `param` variable exists somewhere before executing your function?**

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-03T11:21:55.137

Actually, the *correct* jQuery translation would be:

```
$('#welcome').html("<font color='white'>Logged As: TEST</font>"); 
```

Three cheers for my lack of "reputation"!

# http - HTTP URL - 参数名称中允许的字符

> ID：814700
> 
> 赞同：25
> 
> 时间：2009-05-02T11:34:50.357
> 
> 标签：http, url, character-encoding, specifications

对于 URL 参数名称中允许使用哪些字符，是否有任何正式限制？

我一直在阅读[RFC3986](https://www.rfc-editor.org/rfc/rfc3986)（“统一资源标识符（URI）：通用语法”），但没有得出明确的结论。

我知道存在实际限制，但实际上是否会禁止执行以下操作：

```
参数 with\funny<chars>=some_value
```

只要我正确地逃脱它：

```
参数%20with%1cfunny%3cchars%3e=some_value
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-02T11:38:49.847

URI 规范中对转义参数名称没有限制。但是，您使用的服务器端软件可能存在限制。如果您使用“自制”脚本来解释 URI，则尤其如此。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-02T12:16:45.433

您还应该阅读[RFC2396](http://www.ietf.org/rfc/rfc2396)。它似乎比 RFC3986 提供更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-02T11:37:16.653

URL 有保留字符，但只要您转义 (urlencode) 就可以了。

根据使用的框架，如果您尝试提交可疑值，您可能会遇到异常。ASP.NET 具有内容过滤功能，如果您尝试提交“不安全”数据（如脚本或 HTML），则会引发异常。这是框架的一个特性，而不是 URL 语法强制执行的限制或规则。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-24T21:31:58.763

根据[RFC 2396](https://www.ietf.org/rfc/rfc2396)，参数名称和值可以包含大写/小写字母、十进制数字和 -_.!~*'() 字符。其他一切都需要逃脱。

# iphone - UITableViewController 中的其他界面元素，单元格未取消选择

> ID：814704
> 
> 赞同：1
> 
> 时间：2009-05-02T11:36:42.487
> 
> 标签：iphone, uitableview

我正在努力创建一个表格视图控制器，其中包含的不仅仅是表格视图。

我不想使用页脚视图，因为我想要页面底部的工具栏，并且在某些情况下，表格中的行数不足以将页脚放在屏幕底部。另一个问题是工具栏反弹；）

我尝试不使用 UITableViewController 并使用 UIViewController 这可以正常工作，但是当我单击导航控件返回时，该行仍然突出显示。

所以我有两个问题： 1\. 如何让行像 UITableViewController 一样淡出？和 2\. 是否可以将不是 UITableViews 的其他 UI 元素添加到 UITableViewController？

谢谢卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T12:48:35.670

关于第一个问题，

我有同样的问题。[您可以在用户返回表格视图时如何执行单元格取消选择](https://stackoverflow.com/questions/777321/how-to-perform-a-cell-deselection-when-a-user-returns-to-a-table-view)中看到我的问题？

正如丹尼尔所说：

> 当您在 viewDidAppear: 等中调用 super 时，UITableViewController 会自动为您处理此问题。因此，实现此目的最简单的方法是继承 UITableViewController。如果你不能（例如因为表格只是更复杂视图的一部分），那么你必须在 viewDidAppear: 方法中自己做。（您也应该闪烁滚动条）。

关于第二个问题：

我不认为你能做到。表格视图可以包含页眉视图、页脚视图、表格单元格视图和剖面视图。您可以在这些“子”视图中添加您喜欢的其他任何 ui 控件，但不能直接添加到 UITableViewController。

# design-patterns - 业务线 Web 应用程序最重要的模式是什么？

> ID：814710
> 
> 赞同：0
> 
> 时间：2009-05-02T11:39:00.813
> 
> 标签：design-patterns

[在开发可测试的 n 层业务线](http://en.wikipedia.org/wiki/Line_of_business)Web 应用程序时，您应该了解哪些最重要的模式？

*   存储库模式
*   模型视图控制器
*   依赖注入模式
*   工厂模式
*   辛格尔顿

还有什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T12:15:43.033

由于您询问设计模式与业务最佳实践之间的联系，因此您必须处理一些主观性。我将完全专注于使您的代码易于理解和重用。

我会较少关注设计模式（没有一种模式比另一种更好），而是关注一些基本的设计原则：

*   使用自我记录的编码约定（因此您根本不必记录，代码只是可以理解的）。
*   不要重复自己（干）
*   使用面向对象的编程技术（不要只使用对象作为函数的容器）

如果您必须知道在几乎所有业务情况下最有效的模式，它们是：

*   MVC - 这使您能够将代码分成易于维护的部分
*   工厂模式 - 提供使用逻辑来确定应如何创建对象的能力
*   单例 - 特别适用于数据库连接对象
*   活动对象 - 当您不必担心状态持久性时，让生活变得更加轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T11:47:06.347

“最重要的？

问题域的模式——不管它们是什么。应付账款、总账、应收账款、组织层次结构。

[http://www.businessanalysisbooks.com/0471295515.html](http://www.businessanalysisbooks.com/0471295515.html)

[http://www.amazon.com/Analysis-Patterns-Reusable-Addison-Wesley-Technology/dp/0201895420](https://rads.stackoverflow.com/amzn/click/com/0201895420)

技术模式（MVC、Repository 等）是次要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T12:24:22.780

简短的回答：**这取决于**

# c# - VSTO - C# 中的 Outlook 事件处理程序

> ID：814712
> 
> 赞同：3
> 
> 时间：2009-05-02T11:39:58.953
> 
> 标签：c#, .net, outlook, vsto

我需要为 Outlook 约会项目显示自定义表单而不是默认检查员表单。我想在 C# 中执行此操作。

[devx](http://www.devx.com/MicrosoftISV/Article/29261/2213)上有一个很好的教程，但它使用的是 VB，我想使用 C#。所以我已经将代码翻译成 C#，但我遇到了一个问题，我需要重写（称为）的`Open`事件处理程序。在上面提到的 tute 中，他们说在 VB 中执行以下操作：`AppointmentItem``mcAI`

```
Private Sub tyAI_Open(ByRef Cancel As Boolean) Handles tyAI.Open
    Cancel = True
End Sub 
```

这对我来说翻译为：

```
private void mcAI_Open(out bool Cancel)
{
    Cancel = true;
} 
```

（请注意，我已经尝试过使用和不使用`out`and`ref`参数，以及使用/不使用对象作为第一个参数）

但是我们需要注册这是一个事件，所以我输入了这段代码：

```
mcAI.Open += 
    new Microsoft.Office.Interop.Outlook.ItemEvents_10_OpenEventHandler(mcAI_Open); 
```

但是我无法编译它，因为我得到了错误：

> `No overload for 'mcAI_Open' matches delegate 'Microsoft.Office.Interop.Outlook.ItemEvents_10_OpenEventHandler'`

关于我应该如何为`Open`事件注册我的函数的任何想法`AppointmentItem`？提前致谢。

（顺便说一句，有一个[MSDN QA](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/d22810d9-3bab-4825-a54f-a05244c7f819/)表明我的代码应该可以工作，但我仍然卡住了。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-02T12:24:58.283

从理论上讲，这应该有效：

```
private void mcAI_Open(ref bool Cancel)
{
    Cancel = true;
} 
```

# uml - 对象图应该是什么样子的？

> ID：814721
> 
> 赞同：0
> 
> 时间：2009-05-02T11:47:35.363
> 
> 标签：uml, object-diagram

我在网上搜索，但我发现了一堆非常不同的图表。它们中的大多数甚至看起来都不像对象图。它们没有对象的价值。我想知道我必须如何以这种方式绘制对象图，我的教授不会告诉我这是绝对错误的。任何好的教程链接都非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-02T12:10:36.527

[![替代文字](https://i.stack.imgur.com/54XOf.jpg)](https://i.stack.imgur.com/54XOf.jpg)
[（来源：[developer.com](http://www.developer.com/img/articles/2003/06/17/UML0503.jpg)）]

一个对象 uml 图可能应该是这样的。你可以在网上找到很多例子。祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T12:03:55.510

您可能正在考虑一个类图，它显示了类（而不是对象实例）之间的关系，对吧？

[UML（统一建模语言）](http://www.uml.org/)是执行此操作的标准方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-02T12:14:24.393

对象图的用途往往有限（它们通常适用于其他图）。我怀疑你想要一个类或通信图。类图将有字段但没有值，而通信图包含消息。

这是一个[对象图](http://www.agilemodeling.com/artifacts/objectDiagram.htm)。[作为本教程](http://www.developer.com/design/article.php/2223551)的一部分，有更详细的描述。

阅读[此页面](http://www.agilemodeling.com/style/classDiagram.htm)以了解类图的不同用途，并阅读[此](http://www.ibm.com/developerworks/rational/library/content/RationalEdge/sep04/bell/)页面以获取教程。

[这是](http://www.xpdian.com/Thecommunicationdiagram.html)通信图的两个示例。

# c# - 在 WCF 中传递复杂类型的标准化方法是什么？

> ID：814728
> 
> 赞同：0
> 
> 时间：2009-05-02T11:52:37.957
> 
> 标签：c#, wcf, argument-passing

我是 WCF 的新手，目前我正在开发 TCP WCF 服务，我不确定我是否正确理解传递参数，所以我建议您发表评论并给出标准化的方式。

为了弄清楚我开发了一个用于测试目的的小型服务，它具有单一方法并依赖于公开单个类的外部 .Net dll。服务合同代码

```
 [ServiceContract]
    public  interface IMyService
    {
        [OperationContract]
        int Test1(actionType at, calculationType ct, action a);
        [OperationContract]
        int Test2(DataSeries s);
    } 
```

其中 `actionType`, `calculationType`,`action`是在外部 dll 中声明的枚举，是在 dll`DataSeries`中声明的类。

dll 中类的原始定义在其成员上`DataSeries`标记为`[Serializable]`only 而 no 。`[DataMember]`

我在客户端和服务器端使用第三个 dll，令我惊讶的是两个应用程序都可以正常工作，而无需放入`[DataContract]`DataSeries 类，也无需使用任何`[EnumMember]`内部枚举，`[DataMember]`内部类。

那么发生了什么？

另一个实验：

从客户端删除第 3 方并按原样使用服务我发现 vs2008 生成枚举和`DataSeries`类并用适当的属性标记它们？像

```
 [System.CodeDom.Compiler.GeneratedCodeAttribute      ("System.Runtime.Serialization", "3.0.0.0")]
    [System.Runtime.Serialization.DataContractAttribute(Name="actionType",  Namespace="http://schemas.datacontract.org/2004/07/DBInterface")]
    public enum actionType : int {

        [System.Runtime.Serialization.EnumMemberAttribute()]
        All = 0,

        [System.Runtime.Serialization.EnumMemberAttribute()]
        Buy = 1,

        [System.Runtime.Serialization.EnumMemberAttribute()]
        Sell = 2,
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T13:06:36.873

[DataContract](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractattribute.aspx)、[DataMember](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute.aspx)和[EnumMember](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.enummemberattribute.aspx)属性由[DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)（通常是[basicHttpBinding](http://msdn.microsoft.com/en-us/library/system.servicemodel.basichttpbinding.aspx)或[wsHttpBinding](http://msdn.microsoft.com/en-us/library/system.servicemodel.wshttpbinding.aspx)）使用。[如果您使用 TCP 绑定 ( netTcpBinding](http://msdn.microsoft.com/en-us/library/system.servicemodel.nettcpbinding.aspx) )公开端点，则只需要[SerializableAttribute](http://msdn.microsoft.com/en-us/library/system.serializableattribute.aspx)。请注意，使用 DataContractSerializer 您只能将 SerializableAttribute 添加到您的类中，它会自动序列化所有字段。

我会向您推荐以下内容：如果您希望您的服务可互操作，请使用 basicHttpBinding 并使用 DataContract 和 DataMember 属性标记您的类。如果您的客户端是 .NET 应用程序，请使用 netTcpBinding 并使用 SerializableAttribute 标记您的类。

您还可以阅读这篇[文章](http://geekswithblogs.net/claraoscura/archive/2007/05/28/112799.aspx)以比较不同的绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T14:05:25.390

> 但是没有使用 DataContract 或任何属性，我发现客户端工作正常

是的，这是真的 - 如果您使用的数据类型没有用 [DataContract] 标记，WCF 将尝试在它们上使用默认的 SOAP 序列化程序，并且只序列化所有公共的（所有公共属性）。

它有效 - 但它可能不是你想要/期望的 - 所以我会同意 darin 的意见 - 总是在你的类型上使用明确的 [DataContract] 属性。您对自己（或其他需要稍后维护您的代码的程序员）的意图越清晰越好。这些幕后发生的“魔术”有时会引起混乱——你最好**不要**过分依赖它们

马克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T12:47:32.270

所以对我来说，我使用 [DataContract]s，并传入一个参数，然后返回一个数据合同。

这提供了更大的灵活性，因为我可以使用新的可选属性来扩展数据合约，而不会破坏任何现有的客户端。

我还为其创建数据联系人的枚举；因为我可以做同样的事情，在不破坏任何东西的情况下扩展枚举，并且我可以控制命名空间。

```
[DataContract(Namespace = "http://namespace.mydomain.com/2009/05", Name = "ReferenceTypeData")]
public enum GenderEnum
{
    [EnumMember()]
    Unknown = 0,
    [EnumMember()]
    Male = 1,
    [EnumMember()]
    Female = 2
} 
```

然后，您必须在服务合同上注明

```
[ServiceKnownType(typeof(GenderEnum))]
public interface IServiceContract
{
    ....
} 
```

# visual-studio - 将代码发送到 F# 交互式控制台

> ID：814732
> 
> 赞同：4
> 
> 时间：2009-05-02T11:55:36.140
> 
> 标签：visual-studio, visual-studio-2008, f#

在 Visual Studio 2008 中通过按键盘上的 Alt+Enter 可以将高亮代码直接发送到 F# 交互式控制台，这确实非常有用。是否可以以类似的方式将项目中的一个、多个或所有文件的内容同时发送到 F# 交互式控制台？我的意图是像以前一样以交互方式测试我的代码，但这次我正在处理的文件中的代码依赖于项目中其他文件中的代码。如果我要问的不是最有效的方法，我会很感激解释是什么。=]

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-02T12:00:13.010

没有什么可以直接做到这一点，但是

*   您可以点击例如 Ctrl-A 一次突出显示整个文件
*   您可以制作一个 script.fsx 来“#load”项目中的每个文件

# .net - 从.net项目中检索所有字符串的方法？

> ID：814734
> 
> 赞同：2
> 
> 时间：2009-05-02T11:58:01.733
> 
> 标签：.net, string

有没有办法列出 .net 项目中的所有字符串（未嵌入资源中的字符串）？我对消息框字符串等特别感兴趣，因此我可以检查所有内容是否已正确翻译和编写。到目前为止我尝试过的所有工具都只能列出资源字符串。

非常感谢任何帮助。

啊忘了说：我是一个运行 Windows 并且只运行 Windows 的 Windows 人，所以请告诉我一些在 Windows 上运行的东西。我不介意不使用命令行工具黑客等的简单方法，但如果真的有必要，肯定会这样做。

**更新**：可以直接在 VS 搜索中使用正则表达式，非常方便。

> ("[^"]*")

匹配所有字符串。但是，我只想列出至少包含一个空格字符的字符串。

**Update2** "([^"])+:b+([^"])+" 做我需要的。希望它可以帮助别人。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-02T12:04:39.067

这应该在一定程度上有所帮助：

用于`ildasm`将 IL 转储到文件中。然后在 PowerShell 中运行：

```
cat filename.il | where { $_.Contains("ldstr") } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T16:14:18.360

"([^"])+:b+([^"])+" 这匹配所有至少有一个空格字符的字符串。对我来说，这就足够了。如果需要，请随意修改它。希望对某人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T13:17:47.893

Mehrdad 让 ILDASM 将 IL 输出转储到文件并进行搜索的想法`ldstr`非常出色。我承认，我从来没有想过使用这种方法。

如果您需要 Windows 的 GREP 解决方案，我最好的体验是使用[RegexBuddy](http://www.regexbuddy.com/)或它的老大哥 - [PowerGREP](http://www.powergrep.com/)。

# ruby-on-rails - Ruby 中的 &block 是什么？它是如何在这里通过方法传递的？

> ID：814739
> 
> 赞同：60
> 
> 时间：2009-05-02T12:01:58.293
> 
> 标签：ruby-on-rails, ruby

在一本 Ruby on Rails 书中看到了这段代码。第一个来自视图，第二个是辅助模块。我不明白那是怎么`&block`回事`attributes={}`。任何人都可以指导我进行某种解释这一点的教程吗？

```
<% hidden_div_if(@cart.items.empty?, :id => "cart") do %>
 <%= render(:partial => "cart", :object => @cart) %>
<% end %>

module StoreHelper
 def hidden_div_if(condition, attributes = {}, &block)
  if condition
   attributes["style"] = "display: none"
  end
   content_tag("div", attributes, &block)
  end
end 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2009-05-02T12:54:29.010

Blocks are a fairly basic part of ruby. They're delimited by either `do |arg0,arg1| ... end` or `{ |arg0,arg1,arg2| ... }`.

They allow you to specify a callback to pass to a method. This callback can be invoked two ways - either by capturing it by specifying a final argument prefixed with `&`, or by using the `yield` keyword:

```
irb> def meth_captures(arg, &block)
       block.call( arg, 0 ) + block.call( arg.reverse , 1 )
     end
#=> nil
irb> meth_captures('pony') do |word, num|
       puts "in callback! word = #{word.inspect}, num = #{num.inspect}"
       word + num.to_s
     end
in callback! word = "pony" num = 0
in callback! word = "ynop" num = 1
#=> "pony0ynop1" 
irb> def meth_yields(arg)
       yield(arg, 0) + yield(arg.upcase, 1)
     end
#=> nil
irb> meth_yields('frog') do |word, num|
       puts "in callback! word = #{word.inspect}, num = #{num.inspect}"
       word + num.to_s
     end
in callback! word = "frog", num = 0
in callback! word = "FROG", num = 1
#=> "frog0FROG1" 
```

Note that our callback was the same in each case - we can remove repetition by saving our callback in an object, and then passing it to each method. This can be done using `lambda` to capture the callback in an object, and then passed to a method by prefixing it with `&`.

```
irb> callback = lambda do |word, num|
       puts "in callback! word = #{word.inspect}, num = #{num.inspect}"
       word + num.to_s
     end
#=> #<Proc:0x0052e3d8@(irb):22>
irb> meth_captures('unicorn', &callback)
in callback! word = "unicorn", num = 0
in callback! word = "nrocinu", num = 1
#=> "unicorn0nrocinu1"
irb> meth_yields('plate', &callback)
in callback! word = "plate", num = 0
in callback! word = "PLATE", num = 1
#=> "plate0PLATE1" 
```

It's important to understand the different uses of `&` here as a prefix to the last argument of a function

*   in a function definition, it captures any passed block into that object
*   in a function call, it expands the given callback object into a block

If you look around blocks are used all over the place, especially in iterators, like `Array#each`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-02T12:20:09.560

这`&block`是一种将一段 Ruby 代码发送到一个方法，然后在该方法的范围内评估该代码的方法。在上面的示例代码中，这意味着部分命名的购物车将在 div 中呈现。我认为术语[闭包](http://en.wikipedia.org/wiki/Closure_(computer_science))在计算机科学中用于此目的。

所以在你的例子中`&block`是：

```
<%= render(:partial => "cart", :object => @cart) %> 
```

可以在[Robert Sosinski 的博客](http://www.robertsosinski.com/2008/12/21/understanding-ruby-blocks-procs-and-lambdas/)上找到一些很好的阅读和对块、procs 和 lamdas 的解释。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-02T12:21:10.570

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-05-21T17:46:11.803

Ruby implements Blocks, Procs and lambdas which are referred to as closures in the computer science community. If you beginning to learn Ruby you will quickly run into code that looks like this.

```
a = ["dog", "cat", "bird"]
a.alter_each! do |n, i|
  "#{i}_#{n}"
end 
```

So whats going on here?

We start off with an array of animal names and call the alter_each! method passing a block. In this block of code we can specify how we want to alter each item. Our example will prefix each animal name with it's position in the array. As the alter_each! method iterates through each item it will execute our block passing the value and index. Our block captures these params, prefixes the index to the name and returns the result. Now lets look at the alter_each! method.

Notice the method doesn't specify any params, that's because a block is automatically assigned to yield keyword. yield is called like a function passing in the value and index of each item in the array and overriding the original value.

```
class Array
  def alter_each!
    self.each_with_index do |n, i|
      self[i] = yield(n,i)
    end
  end
end 
```

What if you need to pass a param to this method?

You can modify the method signature to accept params and finally catch the block with a param starting with an ampersand. In the example below our block will be captured with the &block param which we will invoke the call method. This is in place of using yield

```
class Array
  def modify_each!(add_one = true, &block)
    self.each_with_index do |n, i|
      j = (add_one) ? (i + 1) : i
      self[i] = block.call(n,j)
    end
  end
end 
```

[Full article on ruby blocks](http://www.jonathanspooner.com/web-development/ruby-5/how-does-a-ruby-block-work/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-02T12:25:12.090

It works like this:

`@cart.items.empty?` is the codition

`:id => "cart"` Becomes attributes as per convention you can remove {} on a param hash if it is last one.

the block is

`render(:partial => "cart", :object => @cart)`

so within the function if the cart is empty it will add the attribute style with value "display: none"

Then it will create a div tag filled with the content of the result of executing the block which will be the result of rendering the partial view cart with the contents of @cart.

# java - 哪些设计模式在创建高可用性应用程序时使用得最多？

> ID：814742
> 
> 赞同：15
> 
> 时间：2009-05-02T12:03:34.217
> 
> 标签：java, design-patterns, database-design, high-availability

同样，是否有应该避免的设计模式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-02T13:58:39.917

我假设您正在编写一个服务器类型的应用程序（让我们暂时离开 Web 应用程序 - 有一些现成的解决方案可以提供帮助，所以让我们看看“我已经编写了这种很棒的新型服务器"，但我希望它是 HA 问题）。

在服务器实现中，来自客户端的请求通常（以某种形式）转换为某种事件或命令类型模式，然后在一个或多个队列上执行。

因此，第一个问题 - 需要以能够在集群中生存的方式存储事件/命令（即，当新节点接管为主节点时，它会查看下一个需要执行并开始的命令）。

让我们从单线程服务器 impl 开始（最简单的 - 概念仍然适用于多线程，但它有自己的一组问题0。处理命令时需要某种事务处理。

另一个问题是管理副作用以及如何处理当前命令的失败？在可能的情况下，以事务的方式处理副作用，以便它们全有或全无。IE。如果命令更改了状态变量，但在执行中途崩溃，那么能够返回到“先前的”状态是很棒的。这允许新的主节点恢复崩溃的命令并重新运行该命令。另一个好方法是将副作用分解成更小的任务，这些任务可以再次在任何节点上运行。IE。存储主要请求开始和结束任务，有很多小任务处理每个任务只有一个副作用。

这也引入了其他会影响您的设计的问题。这些状态变量不一定是数据库更新。它们可以是共享状态（比如内部组件的有限状态机），也需要分布在集群中。因此，管理更改的模式使得主代码必须看到它需要的一致版本的状态，然后在整个集群中提交该状态。使用某种形式的不可变（至少来自进行更新的主线程）数据存储很有用。IE。所有更新都有效地在必须通过某种中介或外观的新副本上完成，这些中介或外观仅在跨集群更新后使用更新更新内存中的本地副本（或跨集群的最小成员数量以实现数据一致性）。

其中一些问题也存在于 master worker 系统中。

还需要良好的错误管理，因为状态更新可能出错的事情数量增加（因为您现在涉及网络）。

我经常使用状态模式。对于您想要发送请求/响应的副作用，而不是一行更新，并使用特定于对话的 fsm 来跟踪进度。

另一个问题是端点的表示。IE。连接到主节点的客户端需要能够重新连接到新的主节点，然后监听结果？还是您只是取消所有待处理的结果并让客户重新提交？如果您允许处理待处理的请求，则需要一种识别端点（客户端）的好方法（即查找中的某种客户端 ID）。

还需要清理代码等（即不希望等待客户端重新连接的数据永远等待）。

使用了很多队列。因此，很多人会使用一些消息总线（jms 对 java 来说）以事务方式推送事件。

兵马俑（再次用于 java）为您解决了很多问题 - 只需更新内存 - 兵马俑是您的外观/中介。他们刚刚为您注入了这些方面。

Terracotta（我不为他们工作） - 引入了“超级静态”的概念，所以你会得到这些很酷的集群范围的单例，但你只需要知道这将如何影响测试和开发工作流程 - 即。使用大量组合，而不是继承具体实现以实现良好的重用。

对于 Web 应用程序 - 一个好的应用程序服务器可以帮助复制会话变量，一个好的负载均衡器可以工作。在某种程度上，通过 REST（或您选择的 Web 服务方法）使用它是编写多线程服务的一种简单方法。但它会对性能产生影响。再次取决于您的问题域。

消息服务（例如 jms）通常用于在不同服务之间引入松散耦合。使用体面的消息服务器，您可以进行大量消息路由（再次，apache camel 或类似的工作做得很好），即。说一个针对 jms 生产者集群的粘性消费者等，这也可以实现良好的故障转移。Jms 队列等可以提供一种在集群中分发 cmds 的简单方法，不依赖于主/从。（同样，这取决于您是在做 LOB 还是从头开始编写服务器/产品）。

（如果我以后有时间我会整理一下，也许会在修复拼写语法等方面提供更多细节）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-02T13:07:45.157

创建可靠软件的一种方法是[仅崩溃软件](http://lwn.net/Articles/191059/)：

> 仅崩溃软件是可以安全崩溃并快速恢复的软件。阻止它的唯一方法是让它崩溃，而启动它的唯一方法是恢复。仅崩溃系统由与可重试请求通信的仅崩溃组件组成；通过崩溃和重新启动故障组件并重试任何已超时的请求来处理故障。生成的系统通常更加健壮和可靠，因为崩溃恢复是开发过程中的一等公民，而不是事后的想法，并且您不再需要额外的代码（以及相关的接口和错误）来显式关闭。所有软件都应该能够安全地崩溃并快速恢复，但仅崩溃软件必须具备这些品质，否则它们的缺失很快就会显现出来。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-02T14:03:52.510

我建议阅读[Release it！](http://www.pragprog.com/titles/mnee/release-it)迈克尔·尼加德。他概述了许多影响生产系统的反模式，以及有助于防止一个错误组件导致整个系统瘫痪的模式。本书涵盖三个主要领域；稳定性、容量和一般设计（包括网络、安全性、可用性和管理）。

我以前的工作场所（有时）被 Nygard 概述的几乎每一个故障场景所困扰（每次停机都会造成收入损失）。实施他建议的一些技术和模式可以显着提高系统的稳定性和可预测性（是的，这本书有点以 Java 为中心，但这些原则适用于许多情况）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-02T12:47:56.747

错误的：

> ...并且会有一个存储服务器

好的：

> ...并且将有一个（多个）存储服务器场，前面有（多个）负载平衡器

*   将负载平衡器放在一切前面。现在你可以有 4 个后端，但将来你可以有 400 个，所以明智的做法是只在 LB 上管理它，而不是所有使用后端的应用程序。

*   使用多级缓存。

*   寻找加速thigs的流行解决方案（例如memcached）。

*   如果您要更新系统，请分多个小步骤逐步进行。如果您迈出一大步（关闭旧的，打开新的并祈祷它会起作用），它很可能会失败。

*   使用 DNS 名称，fe`storage-lb.servicename`解析为所有存储负载均衡器的地址。如果你想添加一个，只需修改 dns，所有服务将自动开始使用它。

*   把事情简单化。您依赖的系统越多，您的服务就越会受到影响。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-02T14:36:53.570

设计高可用性 (HA) 系统是一个活跃的研究和开发领域。如果您查看 ACM 或 IEEE，有大量关于服务质量（可用性、可靠性、可扩展性等）以及如何实现它们（松散耦合、适应等）的研究论文。如果您正在寻找更多实际应用程序，请查看容错系统和中间件，这些系统和中间件旨在支持集群、网格或类似云的功能。

复制和负载平衡（也称为反向代理）是实现 HA 系统的一些最常见模式，并且通常可以在不对底层软件进行代码更改的情况下完成，假设它不是太紧密耦合。甚至最近的许多云产品基本上都是通过复制和负载平衡来实现的，尽管它们倾向于建立弹性来处理广泛的系统需求。

使软件组件无状态可以减轻复制的负担，因为状态本身不需要与软件组件一起复制。无状态是 HTTP 可扩展性如此之好的主要原因之一，但它通常需要应用程序添加它们自己的状态（例如会话），然后需要复制这些状态。

因此，使松散耦合的系统比紧密耦合的系统具有高可用性更容易。由于系统组件的可靠性决定了整个系统的可靠性，因此可能需要更换不可靠的组件（硬件故障、软件错误等）。允许在运行时进行动态调整，可以在不影响整个系统可用性的情况下更换这些故障组件。松散耦合是使用可靠消息传递系统的另一个原因，其中发送者和接收者不必同时可用，但系统本身仍然可用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-02T13:13:52.660

据我了解，您正在寻找在 HA 架构的 java 应用程序部分中使用的特定模式。当然，可以使用大量的模式和最佳实践，但这些并不是真正的“HA 模式”。相反，它们是可以在许多情况下使用的好主意。

我想我想说的是：高可用性架构由许多小部分组成。如果我们选择其中一个小部件并检查它们，我们可能会发现这个小部件没有神奇的 HA 属性。如果我们检查所有其他组件，我们会发现同样的事情。当它们以一种智能的方式组合在一起时，它们就成为了一个 HA 应用程序。

HA 应用程序是您从一开始就做好最坏打算的应用程序。如果您曾经认为“这个组件非常稳定，我们不需要额外的冗余”，那么它可能不是 HA 架构。毕竟，处理您预见的问题场景很容易。让您感到惊讶的是，它会导致系统崩溃。

尽管如此，仍有一些模式在 HA 环境中特别有用。其中许多都记录在Martin Fowler的经典著作[《企业应用程序架构模式》中。](http://martinfowler.com/books.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-07T18:20:11.530

我将“***高可用性***”解释为“***零停机时间***”`，可以根据其他 SE 问题实施：

[Java 应用程序的零停机部署](https://stackoverflow.com/questions/4462042/zero-downtime-deployment-for-java-apps/34435827#34435827)

1.  A/B切换：（滚动升级+回退机制）
2.  并行部署 – Apache Tomcat：（仅适用于 Web 应用程序）
3.  延迟端口绑定
4.  高级端口绑定

我将使用其中一些概念从软件角度提出高可用性系统的设计模式，这与上述方法相得益彰。

***要使用的模式：***

[代理](https://en.wikipedia.org/wiki/Proxy_pattern)/[工厂](https://en.wikipedia.org/wiki/Factory_method_pattern) ：

有一个代理对象，代理将决定将请求重定向到哪里。假设您拥有版本 1 和版本 2 的软件。如果客户端使用旧协议连接，请将它们重定向到版本 1 软件。新客户端可以直接连接到版本 2。Proxy 可以使用 Factory 方法或 AbstractFactory 来渲染新版本的软件。

[战略](https://en.wikipedia.org/wiki/Strategy)

您可以在运行时通过从一系列算法中选择一个算法来更改算法。如果以航空公司为例，您可以在非高峰和高峰流量月份在 DiscountFare 和 NormalFare 算法之间切换。

[装饰者](https://en.wikipedia.org/wiki/Decorator_pattern)：

您可以在运行时更改对象的行为。添加一个新类并装饰额外的责任。

[适配器](https://en.wikipedia.org/wiki/Adapter)：

当您在版本 1 和版本 2 之间更改接口或合同时很有用。适配器将适当地响应新旧客户端请求。

一般准则：

1.  对象之间的松散耦合
2.  在您的应用程序中遵循[SOLID](https://en.wikipedia.org/wiki/SOLID_(object-oriented_design))原则

有关上述模式，请参阅[sourcemaking](https://sourcemaking.com/design_patterns)网站文章以更好地理解。

***什么不可以使用：***

除了设计模式之外，您还必须采取一些预防措施来实现应用程序的零停机时间。

1.  不要在系统中引入单点故障。
2.  谨慎使用分布式缓存（例如 Terracotta）/锁。
3.  移除服务之间的硬耦合。通过使用消息传递总线/框架（JMS、ActiveMQ 等）消除服务之间的紧密耦合

* * *

## 回答 #8

> 赞同：-6
> 
> 时间：2009-05-02T12:28:16.450

高可用性更多的是关于硬件可用性和冗余，而不是编码约定。在几乎所有 HA 案例中，我都会使用几种模式：我会为我的数据库对象选择**单例模式**，并使用**工厂模式**来创建单例模式。然后工厂可以有逻辑来处理数据库的可用性问题（这是大多数可用性问题发生的地方）。例如，如果 Master 宕机，则连接到第二个 Master 进行读写，直到 Master 回来。我不知道这些是否是最常用的模式，但它们在我的代码中是最常用的。

当然这个逻辑可以在 __construct 方法中处理，但是工厂模式可以让你更好地控制你的代码和如何处理数据库连接问题的决策逻辑。工厂还可以让您更好地处理单例模式。

我绝对会避免使用*装饰器模式*和*观察者模式*。它们都在您的代码中创建了复杂性，使其难以维护。在他们的情况下，这些是满足您需求的最佳选择，但大多数情况下并非如此。

# tfs - 加载 TFS 报告时出现问题

> ID：814751
> 
> 赞同：0
> 
> 时间：2009-05-02T12:07:29.573
> 
> 标签：tfs, reportserver, tfs-reports

我已经在单个服务器上安装了 TFS 并按照文档中的说明对其进行了完全配置，并使用 MSF 为敏捷过程创建了一个项目。现在，当我尝试浏览项目站点（[http://tfs/Sites/MyProject](http://tfs/Sites/MyProject)）的报告时，出现以下错误：

**项目“/MyProject/Bug Rates”的路径无效。完整路径的长度必须少于 260 个字符；其他限制适用。如果报表服务器处于本机模式，则路径必须以斜杠开头。(rsInvalidItemPath)**

谁能告诉我如何解决这个问题？谢谢

**编辑：**

我已将报表服务器数据库连接模式更改为 Native，现在我收到以下错误：

**找不到项目“/MyProject/Bug Rates”。(rsItemNotFound)**

我也尝试修复 TFS，但也没有解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T05:39:04.163

我今天也遇到了这个问题，这就是我解决它的方法。

1.  打开您的 Web.config 并找到`"ReportServerPath"`. 它看起来像这样：

    < add key="ReportServerPath" value="/< YourReportpath >.Reports/"/>

2.  现在右键单击报告并选择`'Properties'`。定位`'TargetReportFolder'`

您的`'ReportServerPath'`Web.config`should be the same`与您`'TargetReportFolder'`的报告属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-09-12T12:15:26.180

您运行 TFS 2008 还是 2010？

在 TFS 2010 中，您可以在没有 SSRS 的情况下对其进行配置。如果未配置，那么当您创建新的团队项目时，当然不会安装报告。

# wpf - WPF 中的关键提示

> ID：814756
> 
> 赞同：4
> 
> 时间：2009-05-02T12:12:17.473
> 
> 标签：wpf

Office 2007 和功能区引入了“[关键提示](http://blogs.msdn.com/outlook/archive/2008/10/20/ribbon-key-tips.aspx)”的概念。

> 简而言之，功能区中的每个命令都会收到一个字母，您可以按下该字母来激活该命令。...这些字母由小的“KeyTips”表示，表示要按下以激活控件的字母。KeyTips 使用 Alt 键显示，因此使用它们的感觉类似于 Windows 中菜单导航的工作方式。
> 
> （来源：http: [//blogs.msdn.com/jensenh/archive/2006/04/12/574930.aspx](http://blogs.msdn.com/jensenh/archive/2006/04/12/574930.aspx)）

关键提示的示例如下所示。在此图中，用户已按下 ALT 键，并正在等待进一步的输入。

[Word 2007 中的关键提示示例 http://blogs.msdn.com/blogfiles/outlook/WindowsLiveWriter/RibbonKeyTips_8F7C/clip_image002_thumb.jpg](http://blogs.msdn.com/blogfiles/outlook/WindowsLiveWriter/RibbonKeyTips_8F7C/clip_image002_thumb.jpg)

**是否有任何“关键提示”的 WPF 开源示例？**

您将如何以通用方式（即不需要功能区）实现类似此功能的功能？您将如何使用 MVVM 模式来实现这一点（假设 ICommand 不支持 InputBindings）。

注意：ActiPro 已经在他们的[Ribbon](http://www.actiprosoftware.com/Products/DotNet/WPF/Ribbon/KeyTips.aspx)实现中实现了这个功能，但他们还没有发布源代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-07-15T02:14:43.253

首先，您可以查看 Microsoft 的 WPF 工具包中的[功能区预览](http://wpf.codeplex.com/Wiki/View.aspx?title=WPF%20Ribbon%20Preview)。

或者，一种通用方法是这样的：

1.  在`DependencyProperty`您可以触发的窗口/顶级控件中创建一个，例如`IsShowingKeyTips`. 在您认为合适的时候捕捉键盘输入以翻转它。

2.  使 a`ContentControl`具有两个依赖属性，例如 1)`IsShowingKeyTip`和 2) `KeyTipText`。让我们称之为`KeyTipContentControl`.

3.  编辑`ContentControl`'s`ControlTemplate`以查看您想要的方式。让它成为一个`Canvas`或你最喜欢的布局容器，使用一些绑定来适当地调整它的大小，也许会抛出一些负值`Margin`。

4.  如果你想变得花哨，就让一些`AttachedProperties`喜欢`KeyTip.Text`将它们从普通控件冒泡到`KeyTipContentControl`.

5.  在您的 XAML 中，将您想要的 KeyTips 放在`ContentControls`周围。`Controls`根据需要设置绑定。

你最终会在顶层得到这样的东西：

```
<Window ... >
  <code:KeyTipContentControl 
     KeyTipText="A" 
     IsShowingKeyTip="{Binding IsShowingKeyTips}">
     <Button x:Name="MyButtonWithKeyTip" ... />
  </code:KeyTipContentControl>
</Window> 
```

以优雅的方式处理按键并不是我现在想做的事情。:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-05-18T05:41:54.047

只需使用[Fluent Ribbon Control Suite](http://fluent.codeplex.com)（它是免费的并支持所有必需的功能）

# automation - 无头互联网浏览器？

> ID：814757
> 
> 赞同：72
> 
> 时间：2009-05-02T12:13:23.507
> 
> 标签：automation, headless-browser, webautomation

我想做以下事情。登录网站，单击几个特定链接，然后单击下载链接。我想将此作为 Windows 上的计划任务或 Linux 上的 cron 作业运行。我对我使用的语言并不挑剔，但如果可能的话，我希望在不将浏览器窗口放在屏幕上的情况下运行它。

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2009-05-02T14:15:26.960

以下是我所知道的无头浏览器列表：

*   [HtmlUnit](http://htmlunit.sourceforge.net/) - Java。自定义浏览器引擎。有限的 JavaScript 支持/DOM 模拟。开源。
*   [Ghost](https://github.com/jeanphix/Ghost.py) - 仅限 Python。基于 WebKit。完整的 JavaScript 支持。开源。
*   [斜纹](http://twill.idyll.org/)- Python/命令行。自定义浏览器引擎。没有 JavaScript。开源。
*   [PhantomJS](http://phantomjs.org/) - 命令行/所有平台。基于 WebKit。完整的 JavaScript 支持。开源。
*   [Awesomium](http://awesomium.com/) - C++/.NET/所有平台。基于铬。完整的 JavaScript 支持。商业/免费。
*   [SimpleBrowser](https://github.com/axefrog/SimpleBrowser) - .NET 4/C#。自定义浏览器引擎。不支持 JavaScript。开源。
*   [ZombieJS](http://zombie.labnotes.org/) - Node.js。自定义浏览器引擎。JavaScript 支持/模拟 DOM。开源。基于[jsdom](https://github.com/tmpvar/jsdom)。
*   [EnvJS](http://www.envjs.com/) - 通过 Java/Rhino 编写的 JavaScript。自定义浏览器引擎。JavaScript 支持/模拟 DOM。开源。
*   [Watir-webdriver](http://watirwebdriver.com/) with [headless gem](https://github.com/leonid-shevtsov/headless) - Ruby 通过 WebDriver. 通过浏览器 (Firefox/Chrome/Safari/IE) 提供完整的 JS 支持。
*   [Spynner](https://github.com/makinacorpus/spynner) - 仅限 Python。PyQT 和 WebKit。
*   [jsdom](https://github.com/tmpvar/jsdom) -Node.js。自定义浏览器引擎。通过模拟 DOM 支持 JS。开源。
*   [TrifleJS](http://triflejs.org/) - 使用 MSIE (Trident) 和 V8 的 PhantomJS 端口。开源。
*   [ui4j](https://github.com/ui4j/ui4j/) - 纯 Java 8 解决方案。一个围绕 JavaFx WebKit 引擎的包装库，包括。无头模式。
*   [Chromium Embedded Framework](https://bitbucket.org/chromiumembedded/cef) - Chromium 的完整最新嵌入式版本，可根据需要进行离屏渲染。C/C++，带有 .NET 包装器（和其他语言）。因为它是 Chromium，所以它支持*一切*。BSD 许可。
*   [Selenium WebDriver](http://docs.seleniumhq.org/projects/webdriver/) - 通过浏览器（Firefox、IE、Chrome、Safari、Opera）完全支持 JavaScript。官方支持的[绑定](http://docs.seleniumhq.org/about/platforms.jsp#programming-languages)是 C#、Java、JavaScript、Haskell、Perl、Ruby、PHP、Python、Objective-C 和 R。非官方绑定可用于[Qt](https://github.com/cisco-open-source/qtwebdriver)和[Go](https://github.com/tebeka/selenium)。开源。

通过模拟 DOM 支持 JavaScript 的无头浏览器通常会遇到一些使用更高级/模糊浏览器功能或具有视觉依赖性（例如通过 CSS 位置等）的网站的问题，因此虽然这些网站中的纯 JavaScript 支持browsers 通常是完整的，实际支持的浏览器功能应该被认为只是部分的。

（注意：这篇文章的原始版本只提到了 HtmlUnit，因此评论。如果您知道其他无头浏览器实现并具有编辑权限，请随时编辑此帖子并添加它们。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-11T09:08:04.720

查看[twill](http://twill.idyll.org/)，一种非常方便的脚本语言，正是您正在寻找的。从[例子](http://twill.idyll.org/examples.html)：

```
setlocal username <your username>
setlocal password <your password>

go http://www.slashdot.org/
formvalue 1 unickname $username
formvalue 1 upasswd $password
submit

code 200     # make sure form submission is correct! 
```

如果您正在寻找更大的灵活性，还有一个[Python API 。](http://twill.idyll.org/examples.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-19T22:42:10.360

看看[PhantomJS](http://phantomjs.org)，一个**基于 JavaScript 的自动化框架**，可用于 Windows、Mac OS X、Linux 和其他 *ix 系统。

使用 PhantomJS，您可以执行以下操作：

```
console.log('Loading a web page');

var page = new WebPage();
var url = "http://www.phantomjs.org/";

page.open(url, function (status) {
    // perform your task once the page is ready ...
    phantom.exit();
}); 
```

或评估**页面的标题**：

```
var page = require('webpage').create();
page.open(url, function (status) {
    var title = page.evaluate(function () {
        return document.title;
    });
    console.log('Page title is ' + title);
}); 
```

[PhantomJS 的快速入门](http://code.google.com/p/phantomjs/wiki/QuickStart)页面中的示例。您甚至可以使用[render()](http://code.google.com/p/phantomjs/wiki/Interface#render%28fileName%29)方法**将页面呈现为 PNG、JPEG 或 PDF 。**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-02T12:18:00.440

我曾经使用 Internet Explorer ActiveX 控件（WebBrowser、MSHTML）做到这一点。您可以在不使其可见的情况下实例化它。

这可以使用任何支持 COM 的语言来完成（Delphi、VB6、VB.net、C#、C++、...）

当然，这是一个快速而肮脏的解决方案，可能不适合您的情况。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-11-08T17:21:39.260

PhantomJS 是一个基于 WebKit 的无头浏览器，您可以使用 JavaScript 编写脚本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-02T12:19:46.253

除了文件的自动下载（因为那是一个对话框），带有嵌入式 web 控件的 win 表单将执行此操作。

你可以看看[Watin](http://watin.sourceforge.net)和[Watin Recorder](http://watintestrecord.sourceforge.net)。它们可能会帮助 C# 代码登录到您的网站、导航到 URL，甚至可能帮助自动下载文件。

虽然是 YMMV。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-02T12:27:42.303

如果链接是已知的（例如，您不必在页面上搜索它们），那么您可能可以使用[`wget`](http://www.gnu.org/software/wget/). 我相信它将跨多个提取进行状态管理。

如果你更有进取心，那么我会深入研究[Python 3.0](http://docs.python.org/3.0/library/internet.html)中的新东西。他们重新编写了 HTTP 堆栈的接口，恕我直言，有一个[非常好的接口](http://docs.python.org/3.0/library/http.client.html#examples)，容易受到这种类型的脚本的影响。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-03-18T13:57:19.167

服务器上带有 YUI 的 Node.js。看看这个视频：[http ://www.yuiblog.com/blog/2010/09/29/video-glass-node/](http://www.yuiblog.com/blog/2010/09/29/video-glass-node/)

这个视频中的人 Dav Glass 展示了他如何使用节点从 Digg 获取页面的示例。然后他将 YUI 附加到他抓取的 DOM 上，并且可以完全操纵它。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-10-23T17:15:10.367

如果你使用 PHP - 试试[http://mink.behat.org/](http://mink.behat.org/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-02T12:28:26.933

您可以将[Watir](http://wtr.rubyforge.org/)与 Ruby 一起使用，或者将[Watin](http://watin.sourceforge.net/)与单声道一起使用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-02T12:29:50.020

您还可以使用 Live Http Headers（Firefox 扩展）来记录发送到站点（登录 -> 链接 -> 下载链接）的标题，然后使用 fsockopen 将它们复制到 php 中。您可能需要更改的唯一内容是您从登录页面收到的 cookie 值。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-02T14:09:51.903

.NET 包含[System.Windows.Forms.WebBrowser](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)。您可以创建一个实例，将其发送到 URL，然后轻松解析该页面上的 html。然后，您可以点击您找到的任何链接等。

我只对这个对象进行了最低限度的工作，所以我不是专家，但如果您已经熟悉 .NET，那么它可能值得研究。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-05-02T13:15:01.050

[libCURL](http://curl.haxx.se/libcurl/)可以用来创建这样的东西。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-02T13:26:53.487

你不能只使用下载管理器吗？

有更好的，但 FlashGet 具有浏览器集成，并支持身份验证。您可以登录，单击一堆链接并将它们排队并安排下载。

你可以写一些东西，比如说，作为一个代理来捕获特定的链接并将它们排队以供以后下载，或者一个 Javascript 小书签，它修改链接去`"http://localhost:1234/download_queuer?url=" + $link.href`并让下载排队 - 但你会重新发明下载管理器-wheel，并且通过身份验证可能会更复杂..

或者，如果您希望“登录，单击链接”位也自动化 - 查看[屏幕抓取](https://stackoverflow.com/questions/tagged/screen-scraping).. 基本上您通过 HTTP 库加载页面，找到下载链接并下载它们..

稍微简化的示例，使用 Python：

```
import urllib
from BeautifulSoup import BeautifulSoup
src = urllib.urlopen("http://%s:%s@example.com" % ("username", "password"))
soup = BeautifulSoup(src)

for link_tag in soup.findAll("a"):
    link = link_tag["href"]
    filename = link.split("/")[-1] # get everything after last /
    urllib.urlretrieve(link, filename) 
```

在使用“用户名”和“密码”的用户名/密码进行身份验证后，这将下载 example.com 上的每个链接。当然，您可以使用[BeautifulSoup 的](http://www.crummy.com/software/BeautifulSoup/)HTML 选择器找到更具体的链接（例如，您可以找到所有带有“下载”类的链接，或以 开头的 URL `http://cdn.example.com`）。

你几乎可以用任何语言做同样的事情。

# python - Python正则表达式解析

> ID：814786
> 
> 赞同：2
> 
> 时间：2009-05-02T12:28:13.877
> 
> 标签：python, regex

我在 python 中有一个字符串数组，数组中的每个字符串看起来像这样：

```
<r n="Foo Bar" t="5" s="10" l="25"/> 
```

我已经搜索了一段时间，我能找到的最好的东西是尝试将 HTML 超链接正则表达式修改为适合我需要的东西。

但并不真正了解很多正则表达式的东西，我还没有任何工作。这就是我到目前为止所拥有的。

```
string = '<r n="Foo Bar" t="5" s="10" l="25"/>'
print re.split("<r\s+n=(?:\"(^\"]+)\").*?/>", string) 
```

从该字符串中提取 n、t、s 和 l 的值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-02T12:34:08.153

这将使您大部分时间到达那里：

```
>>> print re.findall(r'(\w+)="(.*?)"', string)
[('n', 'Foo Bar'), ('t', '5'), ('s', '10'), ('l', '25')] 
```

[re.split](http://docs.python.org/library/re.html#re.split)和[re.findall](http://docs.python.org/library/re.html#re.findall)是互补的。

每当您的思考过程以“我想要每个看起来像 X 的项目”开头时，您都应该使用`re.findall`. 当它以“我想要每个 X 之间和周围的数据”开头时，使用`re.split`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-02T13:32:54.753

> ```
> <r n="Foo Bar" t="5" s="10" l="25"/> 
> ```

该源看起来像 XML，所以“最好的方法”是使用 XML 解析模块。如果它不完全是 XML，BeautifulSoup（或者更确切地说，`BeautifulSoup.BeautifulStoneSoup`模块）可能效果最好，因为它擅长处理可能无效XML（或“不*完全是*XML”的东西）：

```
>>> from BeautifulSoup import BeautifulStoneSoup
>>> soup = BeautifulStoneSoup("""<r n="Foo Bar" t="5" s="10" l="25"/>""")

# grab the "r" element (You could also use soup.findAll("r") if there are multiple
>>> soup.find("r")
<r n="Foo Bar" t="5" s="10" l="25"></r>

# get a specific attribute
>>> soup.find("r")['n']
u'Foo Bar'
>>> soup.find("r")['t']
u'5'

# Get all attributes, or turn them into a regular dictionary
>>> soup.find("r").attrs
[(u'n', u'Foo Bar'), (u't', u'5'), (u's', u'10'), (u'l', u'25')]
>>> dict(soup.find("r").attrs)
{u's': u'10', u'l': u'25', u't': u'5', u'n': u'Foo Bar'} 
```

# php - IE：“This.container”为空或不是对象

> ID：814791
> 
> 赞同：0
> 
> 时间：2009-05-02T12:30:01.160
> 
> 标签：php, javascript, internet-explorer

我在 IE7 中没有这个错误，在 Firefox3 中没有

它说“This.container”为空或不是对象

在 php 文件第 3 个字符的第 77 行。

第77行如下：

```
<input name="news_title_txt" type="text" class="fieldcell_" id="news_title_txt" size="50"  ></td> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-02T12:48:39.133

我会尝试的一件事是`this`不要尝试`This`。

# web-services - c# System.InvalidOperationException: 类型 foo 不是预期的

> ID：814792
> 
> 赞同：0
> 
> 时间：2009-05-02T12:30:15.713
> 
> 标签：web-services

这个问题与我问的另一个[问题有关](https://stackoverflow.com/questions/814627/silverlight-webservice-the-remote-server-returned-an-error-notfound)，我有这个 web 服务，它返回一个类，该类本身有一个类列表。当我尝试调用该方法时，将引发以下异常：

> System.InvalidOperationException：不应使用 YambushiDataClass.SCharacterProjectile 类型。

这是它说它没有的课程`expect`：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.Serialization;

namespace YambushiDataClass
{

    public class SCharacterProjectile : SProjectile
    {
        public int? characterProjectileId { get; set; }
        public string projectileName { get; set; }
        public int? characterId { get; set; }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T12:37:17.867

两天后我的大脑试图解决这个问题显然我试图`List<SProjectile> projectileList = new List<SProjectile>();`用继承自 SProjectile 的类型 SCharacterProjectile 填充列表 public 因此无法序列化

# algorithm - 二叉搜索树和m-way树的区别

> ID：814819
> 
> 赞同：1
> 
> 时间：2009-05-02T12:53:51.710
> 
> 标签：algorithm

请解释二叉搜索树和m-way树之间的区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-02T13:26:06.920

m-way 树是具有`m`值和`m + 1`链接的树结构。

二叉树是 m 路树的一种特殊情况，`m`等于一，这意味着每个节点只有一个值和两个链接（您可以向下移动到左侧或右侧链接）。这是一个二叉树的示例，它显示了这一点：

```
 +----+
             | 20 |
             +----+
            /      \
      +----+        +----+
      | 14 |        | 23 |
      +----+        +----+ 
```

一棵 m 路树的每个节点可以有多个值，但理论仍然相同。您可以根据值选择下移到哪个链接，并且有`m + 1`可能的选择。一棵 m-way 树（其中`m`为 2）可能如下所示：

```
 +----+----+
              | 17 | 30 |
              +----+----+
       ______/     |     \______
      /            |            \
+----+----+   +----+----+   +----+----+
| 11 | 15 |   | 19 | 28 |   | 33 | 34 |
+----+----+   +----+----+   +----+----+ 
```

这些 m-way 树通常用于您可以在有效块中容纳多个值的情况。高效，我的意思是可以高效地读取和写入，例如磁盘块、扇区、集群或柱面，具体取决于存储子系统的运行方式。

例如，假设：

*   一个磁盘块是 512 字节；
*   树中的值占用 122 个字节；和
*   链接占用 4 个字节。

在这种情况下，您可以将 4 个值放入一个磁盘块中，计算如下：

```
numvals = int ((blocksize - linksize) / (valuesize + linksize))
        = int ((   512    -     4   ) / (   122    +     4   ))
        = int (          508          /            126        )
        = int (                    4.0317                     )
        =                             4 
```

这为您提供了四个值和五个链接，总共 508 个字节：

```
4 * 122 = 488
5 *   4 =  20
          ---
          508 
```

尽管有一些浪费（在这种情况下为四个字节），但这具有在每个可有效检索的块中存储整数个值的优点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-02T12:58:28.330

[二叉搜索树](http://en.wikipedia.org/wiki/Binary_search_tree)只有两个固定分支，因此更容易实现。当树必须存储在磁盘上而不是内存中时，通常使用诸如[B树之类的 m 路树。](http://en.wikipedia.org/wiki/B-tree)示例包括文件系统和数据库索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-18T17:08:53.980

m 向搜索树是一个 m 向树，其中：

每个节点有 m 个子节点和 m-1 个键字段每个节点中的键按升序排列。前 i 个子节点中的键小于第 i 个键 最后 mi 个子节点中的键大于第 i 个键

m阶多路搜索树的扩展是m阶B树。当要访问/存储的数据位于辅助存储设备上时，将使用这种类型的树，因为它们允许将大量数据存储在节点中。

m阶B树是一个多路搜索树，其中：

根至少有两个子树，除非它是树中的唯一节点。每个非根节点和每个非叶节点最多有 m 个非空子节点和至少 m/2 个非空子节点。每个非根节点和每个非叶节点中的键数比其非空子节点数少一。所有叶子都在同一水平面上。

# c# - 如何确保在 .NET 中正确处理对象？

> ID：814821
> 
> 赞同：7
> 
> 时间：2009-05-02T12:55:34.467
> 
> 标签：c#, .net

我使用 C# 在 .NET 2 中创建了一个连续运行的[Windows 窗体应用程序。](http://en.wikipedia.org/wiki/Windows_Forms)对于大多数帐户，我对此感到满意，但有人向我报告说它偶尔会失败。我能够在 50% 的时间内监控它的性能，而且我从未注意到失败。

在这一点上，我担心程序可能使用了太多资源，并且在不再需要资源时没有处理它们。

正确处置已创建计时器和图形对象（如图形路径、SQL 连接等）的已创建对象的最佳实践是什么，或者我可以依靠 dispose 方法来处理所有垃圾收集？

另外：有没有办法可以监控应用程序使用的资源？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-02T12:59:52.740

最佳做法是确保在不再需要对象时立即调用实现[IDisposable接口的所有对象。](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)

这可以通过[using](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)关键字或[try/finally](http://msdn.microsoft.com/en-us/library/zwc8s4fz.aspx)构造来完成。

在为表单的生命周期分配资源的 WinForms 表单中，需要一种稍微不同的方法。由于表单本身实现了 IDisposable，这表明在某个时间点将在此表单上调用 Dispose。您想确保您的一次性资源同时得到处置。为此，您应该覆盖表单[Dispose(bool disposing)](http://msdn.microsoft.com/en-us/library/a4zkb31d.aspx)方法。实现应该是这样的：

```
protected override void Dispose(bool disposing)
{
    if (disposing)
    {
        // dispose managed resources here
    }
    // dispose unmanaged resources here
} 
```

关于表单中的组件的说明：如果您的对象实现了[IComponent](http://msdn.microsoft.com/en-us/library/system.componentmodel.icomponent.aspx)接口，您可以将实例放在表单[Container](http://msdn.microsoft.com/en-us/library/system.componentmodel.component.container.aspx)中。当容器本身被处置时，容器将负责处置组件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-02T13:16:20.970

除了已经说过的，如果您使用 COM 组件，最好确保它们已完全发布。我有一个一直用于 COM 版本的片段：

```
private void ReleaseCOMObject(object o)
{
   Int32 countDown = 1;
   while(countDown > 0)
       countDown = System.Runtime.InteropServices.Marshal.ReleaseCOMObject(o);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-02T13:00:14.330

你应该调用`Dispose`稀缺资源来释放它们。您可以为此使用`using`声明：

```
using (var resource = new MyScarceObject()) 
{
    // resource will be used here...
} // will free up the resources by calling Dispose automatically 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-02T20:19:08.910

有几种方法可以确保这一点。我找到的主要帮助是利用“使用”关键字。这是这样应用的：

```
using(SqlConnection connection = new SqlConnection(myConnectionString))
{
    /* utilise the connection here */ 
} 
```

这基本上转化为：

```
SqlConnection connection = null;
try
{
    connection = new SqlConnection(myConnectionString);
}
finally
{
    if(connection != null) connection.Dispose();
} 
```

因此，它仅适用于实现 IDisposable 的类型。

在处理 GDI 对象（如钢笔和画笔）时，此关键字非常有用。但是，在某些情况下，您可能希望将资源保留更长的时间，而不仅仅是方法的当前范围。作为一项规则，如果可能，最好避免这种情况，但例如在处理 SqlCe 时，保持与数据库的一个连接持续打开会更高效。因此，人们无法逃避这种需要。

在这种情况下，您不能使用“使用”，但您仍然希望能够轻松回收连接所持有的资源。您可以使用两种机制来取回这些资源。

一种是通过终结器。所有超出范围的托管对象最终都由垃圾收集器收集。如果你已经定义了一个终结器，那么 GC 将在收集对象时调用它。

```
public class MyClassThatHoldsResources
{
    private Brush myBrush;

    // this is a finaliser
    ~MyClassThatHoldsResources()
    {
       if(myBrush != null) myBrush.Dispose();
    }
} 
```

然而，不幸的是，上面的代码是废话。原因是在最终确定时，您**无法保证**哪些托管对象已被收集，哪些尚未收集。因此，上面示例中的“myBrush”可能已经被垃圾收集器丢弃了。因此最好不要使用终结器来收集托管对象，它的用途是整理**非托管**资源。

终结器的另一个问题是它不是确定性的。例如，假设我有一个通过串行端口进行通信的类。一次只能打开一个到串行端口的连接。因此，如果我有以下课程：

```
class MySerialPortAccessor
{
    private SerialPort m_Port;

    public MySerialPortAccessor(string port)
    {
        m_Port = new SerialPort(port);
        m_Port.Open();
    }

    ~MySerialPortAccessor()
    {
        if(m_Port != null) m_Port.Dispose();
    }
} 
```

然后，如果我使用这样的对象：

```
public static void Main()
{
    Test1();
    Test2();
}

private static void Test1()
{
    MySerialPortAccessor port = new MySerialPortAccessor("COM1:");
    // do stuff
}

private static void Test2()
{
    MySerialPortAccessor port = new MySerialPortAccessor("COM1:");
    // do stuff
} 
```

我会有问题。问题是终结者不是确定性的。也就是说我不能保证它什么时候会运行，因此可以处理我的串口对象。因此，当我运行测试 2 时，我可能会发现端口仍然打开。虽然我*可以*在 Test1() 和 Test2() 之间调用 GC.Collect() 来解决这个问题，但*不*推荐。如果你想从收集器中获得最佳性能，那就让它自己做吧。

因此，我真正想做的是：

```
class MySerialPortAccessor : IDispable
{
    private SerialPort m_Port;

    public MySerialPortAccessor(string port)
    {
        m_Port = new SerialPort(port);
        m_Port.Open();
    }

    public void Dispose()
    {
        if(m_Port != null) m_Port.Dispose();
    }
} 
```

我会像这样重写我的测试：

```
public static void Main()
{
    Test1();
    Test2();
}

private static void Test1()
{
    using( MySerialPortAccessor port = new MySerialPortAccessor("COM1:"))
    {
        // do stuff
    }
}

private static void Test2()
{
    using( MySerialPortAccessor port = new MySerialPortAccessor("COM1:"))
    {
        // do stuff
    }
} 
```

这现在可以工作了。那么终结者呢？为什么要使用它？

非托管资源和不调用 Dispose 的可能实现。

作为其他人使用的组件库的编写者；他们的代码可能会忘记处理对象。其他东西可能会终止该进程，因此 .Dispose() 不会发生。由于这些情况，应实施终结器以将任何非托管资源清理为“最坏情况”情况，但 Dispose 还应*整理*这些资源，以便您拥有“确定性清理”例程。

所以最后，[.NET Framework Guidelines 书中](https://rads.stackoverflow.com/amzn/click/com/0321246756)推荐的模式是按如下方式实现这两者：

```
public void SomeResourceHoggingClass, IDisposable
{
    ~SomeResourceHoggingClass()
    {
        Dispose(false);
    }

    public void Dispose()
    {
        Dispose(true);
    }

    // virtual so a sub class can override it and add its own stuff
    //
    protected virtual void Dispose(bool deterministicDispose)
    {    
         // we can tidy managed objects
         if(deterministicDispose)
         {
              someManagedObject.Parent.Dispose();
              someManagedObject.Dispose();
         }

         DisposeUnmanagedResources();

         // if we've been disposed by .Dispose()
         // then we can tell the GC that it doesn't
         // need to finalise this object (which saves it some time)
         //
         GC.SuppressFinalize(this);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-02T13:07:33.330

一些提示：

- 尽可能利用 Using() 关键字。如果您有单元测试，我建议您重构代码以实现此更改。

[http://msdn.microsoft.com/en-us/library/yh598w02.aspx](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

- 请记住显式取消注册所有事件处理程序并从在整个应用程序期间存在的列表中删除所有对象。这是程序员在 .NET 中最常犯的错误，导致这些项目未被收集。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-02T13:23:06.710

至于监控内置[perfmon](http://technet.microsoft.com/en-us/library/bb490957.aspx) ( [2](http://msdn.microsoft.com/en-us/library/aa645516(VS.71).aspx) ) 可以很好地解决内存使用等问题。如果您担心文件句柄、dll 句柄等，我推荐[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)和[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-02T17:17:14.183

当对象不可访问时，将调用[Object.Finalize 方法](http://msdn.microsoft.com/en-us/library/system.object.finalize.aspx)。在实现 IDisposable 的类中抑制这种不必要的调用会很有帮助。您可以通过调用[GC.SuppressFinalize 方法来做到这一点](http://msdn.microsoft.com/en-us/library/system.gc.suppressfinalize.aspx)

```
public void Dispose()
{
    // dispose resources here

    GC.SuppressFinalize(this);
} 
```

# silverlight - 如何确定silverlight app的主机

> ID：814822
> 
> 赞同：1
> 
> 时间：2009-05-02T12:55:43.080
> 
> 标签：silverlight, amazon-s3

我的 silverlight 应用程序需要返回到它的数据来源的主机。如何让网络客户端连接回该站点的根目录。

例如，我的 silverlight xap 位于 Amazon S3 存储桶中，并通过同一存储桶中的 HTML 文件加载。我想做一个[http://mybucket.s3.amazonaws.com/](http://mybucket.s3.amazonaws.com/)然后对该 GET 返回的 xml 进行操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-02T13:05:32.120

使用`System.Windows.Application.Host`- 请参阅包含此示例[的文档](http://msdn.microsoft.com/en-us/library/system.windows.application.host(VS.95).aspx)：

“以下示例展示了如何使用 Host 获取 Silverlight 应用程序包的路径。”

```
<UserControl x:Class="SilverlightApplication.Page"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid>
        <TextBlock Text="{Binding Source}" />
    </Grid>

</UserControl> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-25T21:11:43.423

C# 中的 Application.Current.Host.Source

# c - 如何在动态链接库中引用全局变量？

> ID：814823
> 
> 赞同：4
> 
> 时间：2009-05-02T12:57:09.143
> 
> 标签：c, assembly, solaris, dynamic-linking, sparc

环境是 32 位 SPARC 上的 Solaris，但我认为这是动态链接和/或与位置无关的代码更普遍的问题。

我有一个汇编程序，我将其编译为与位置无关的代码，并从 C 程序动态链接到它。它工作正常，除了我不能从汇编程序中引用汇编程序保留的任何内存。在汇编程序中跳转可以正常工作。

我只想在汇编程序中读取和写入内存，但是任何时候我尝试都会遇到分段错误。

我写了这个测试程序来调试这个问题

```
 .section ".data"
  .global foo
foo: .word 1
  .section ".text"
  .global testprog
testprog:
  save %sp, -(92+4), %sp
  sethi %hi(foo), %o0 ! set foo, %o0
  or %o0, %lo(foo), %o0 
  call print_int
  nop
  ret
  restore 
```

我编译这个

> 作为 -K PIC -b

并在 C 中 dlopen 生成的 .so

```
dlhandle = dlopen(obj_file, RTLD_NOW)
dl_testprog = dlsym(dlhandle, "testprog") 
```

当我打电话时`dl_testprog()`，它会打印“4”。如果我尝试打印 testprog 或 print_int 的地址，它也会打印“4”。跳转到一个标签，其他一切都很好。查看反汇编，foo 被替换为 0x0，就像它应该的那样。

我是否必须通过`_GLOBAL_OFFSET_TABLE_`或其他什么，才能在汇编程序中写入我自己的内存？如果是这样，我该怎么做？我尝试的一切都导致了段错误，并且我无法找到一个很好的指导如何做到这一点（这让我相信你不应该这样做。这不是链接器问题吗？） .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-03T02:22:15.840

通过查看 C 编译器为 PIC 输出的代码解决了这个问题，这是我从一开始就应该做的，而不是阅读手册和随机网页。

PIC 中对象的地址（至少在 32b SPARC 上）可能很明显但确实是 ( `_GLOBAL_OFFSET_TABLE_ + PC + object`)。约定是在函数的开头计算 GOT 地址到 %l7。详细信息在[这里](http://docs.oracle.com/cd/E23824_01/html/819-0690/chapter4-10454.html#chapter4-29405 "链接器和库指南：与位置无关的代码")，除了如何实际计算 %l7。

```
addpc:
  add %o7, %l7, %l7 ! %o7 == addr of call == PC
  retl
   nop
testprog:
  sethi %hi(_GLOBAL_OFFSET_TABLE_-8), %l7 ! -8 = distance from call addpc
  add %l7, %lo(_GLOBAL_OFFSET_TABLE_-4), %l7 
  call addpc ! add PC to %l7
   nop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T13:18:31.463

是的，我相信你必须通过 GOT 来处理私人数据。[请参阅此处](http://www.nasm.us/doc/)的第 9.2 节。尽管 NASM 是 x86 汇编程序，但在 SPARC/Solaris 上的一般原则也应该相同。

此外，AT&T 汇编器通常使用“@got”语法来指定重定位 wrt。得到。确切的细节将在您的汇编器手册中描述，即 NASM 的语法细节不适用于 Solaris 的汇编器。

# google-app-engine - Google App Engine 上的 Jython 开发

> ID：814845
> 
> 赞同：6
> 
> 时间：2009-05-02T13:12:38.403
> 
> 标签：google-app-engine, jython

有没有人有任何直接使用 Jython 和 Google App Engine 的经验（好或坏）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-02T14:03:14.820

~~要问一个显而易见的问题：你为什么要这样做？(C)Python 由 Google App Engine 原生支持，现在已经相当成熟并且得到很好的支持。~~

不过，要回答最初的问题：我没有个人经验，但我可以给你一个大概的概述：

当前最简单的方法是使用 Jython 对调用 Java 的支持来使用 App Engine Java SDK。这意味着尽管您将编写 Python，但它看起来很像 Java，并且您必须使用 Java 文档，而不是 Python 文档。

但是，理论上可以在 App Engine 上的 Jython 中使用 Python SDK。SDK 是纯 Python，SDK 和运行时之间的所有交互都是通过 RPC 通过 google.appengine.api.apiproxy_stub_map 模块完成的。Java 在 com.google.apphosting.api.ApiProxy 类中有一个等效的接口 -有关如何配置它的一些详细信息，请参阅有关[GAE 中的单元测试的文章。](http://code.google.com/appengine/docs/java/howto/unittesting.html)

鉴于所有这些，以下是在 Jython 中使用 Python API 的方法：

1.  编写一个 Python apiproxy_stub，它只接受所有 API 调用并将它们发送到 com.google.apphosting.api.ApiProxy 类。
2.  将 Python SDK 的相关部分与您的 Jython 应用程序捆绑在一起（不幸的是，这是大部分内容）。
3.  在您的初始化代码中，安装您编写的 apiproxy_stub 子类作为所有相关服务（datastore_v3、memcache、user、urlfetch 和图像）的处理程序。

如果您最终这样做了，请将其记录下来并发布代码 - 我知道至少还有一位其他用户会感兴趣。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-01-30T04:40:57.077

首先，有人声称[Jython、Querces 和 JRuby 可以](https://stackoverflow.com/questions/3488675/how-can-jvm-implementations-like-jython-and-jruby-beat-their-native-counterparts)利用 JVM 的力量在速度方面击败他们的本地对手。

但是，关于 Jython 的速度存在一些相互矛盾的信息。一位 Stack Overflow 用户声称[Jython 是他进行的速度测试所涉及的许多语言中最慢的](https://stackoverflow.com/questions/2486734/jython-webapp-performance/2486780#2486780)。

这两个性能问题都没有真正涉及 App Engine，通常只涉及 JVM。

在[这篇由 Jython 提交者发布的文章中](http://jython.xhaus.com/jython-on-google-appengine-why-bother/)，Alan Kennedy 声称 App Engine 上的 Jython 将 Python 的快速开发特性与 JVM 中可用的丰富库相结合。Jython 是 Python，但它是可以直接访问 Java 类的 Python。

我对 Querces PHP 有一些经验。我将 JQuery Form Builder 插件移植到 Google App Engine。它是 PHP 代码，但 PHP 能够直接访问用 Java 编写的 DAO 对象。同样，Jython 也能做到这一点。

Alan Kennedy 还遇到了[Nick Johnson 提出的挑战](http://jython.xhaus.com/transforming-with-xslt-on-google-appengine-and-jython/)，他在该挑战中展示了可以在 App Engine 上使用 Jython 完成的事情，否则这些事情在纯 Python、XSLT 转换中很难完成。他回答了尼克回答中的划线问题：你为什么要这样做？

# jquery - 使用上滑时如何防止网页滚动回顶部？

> ID：814849
> 
> 赞同：2
> 
> 时间：2009-05-02T13:14:23.407
> 
> 标签：jquery, scroll, slideup

我有一个包含多个 DIV 元素的网页。如果我使用 jquery 函数 SlideUp 隐藏一个（朝向页面底部），页面会自动滚动回顶部。我怎样才能防止这种情况？

要触发 jquery 函数，我执行以下操作：

```
$(MyLink).click(function() {
MyDiv.slideUp("slow");
} 
```

`MyLink`在`MyDiv`其中位于页面中间的某个位置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-02T13:30:00.233

您如何通过锚点触发 jquery 功能？如果是这样，让函数返回 false，否则浏览器将重定向到 href 属性，在这种情况下为 '#'。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-02T13:49:15.603

我所做的是有人建议（添加`return false`）并且它有效：

```
$(MyLink).click(function() {
MyDiv.slideUp("slow");
return false;
} 
```

# apache-flex - 使用 SWFLoader 加载 swf（或其他外部远程资源）时，是否执行任何客户端缓存

> ID：814855
> 
> 赞同：1
> 
> 时间：2009-05-02T13:18:20.870
> 
> 标签：apache-flex, flash, actionscript-3

想知道何时使用 flex3 中的 SWFLoader（甚至图像组件）加载外部远程资源（例如 SWF 或 JPG），是否有任何客户端（即浏览器缓存？）或加载的资源。特别是，第二个请求然后访问先前访问的资源是否只使用缓存的资源，或者会发出新的请求。很高兴知道两者是否可能（即告诉它始终使用新加载或使用缓存副本（如果可用））

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-03T22:51:59.253

浏览器负责缓存所有外部加载的媒体，例如图像声音、视频甚至 SWF。这些可以通过清除浏览器缓存来删除。我向任何在 Firefox 中测试 Flash 项目的人推荐[Clear Cache Button](https://addons.mozilla.org/en-US/firefox/addon/1801) Firefox Add-on。

但是，Flash Player 处理任何外部加载的**签名**Flash 组件（例如任何 Adob​​e Flex 框架组件）的缓存。您可以在此处阅读有关[Flash Player 缓存的](http://labs.adobe.com/wiki/index.php/Flash_Player#Flash_Player_cache)更多信息。清除浏览器缓存不会清除这些组件。

要阻止浏览器缓存文件，您需要确保其文件名在每次加载时都是唯一的。您可以通过附加一个随机字符串作为 URL 变量来做到这一点。我通常使用当前时间，或者一个随机数：

```
var noCache:int = new Date().getTime();
myImage.load("filename.jpg?uniq=" + noCache); 
```

[或者，您可以使用URLVariables](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/net/URLVariables.html)类添加唯一变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T14:54:40.873

如果它正在缓存，您可能会避免它使用随机变量加载资源。例如，加载 uri“/background.swf?var=1432”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T12:03:49.340

您应该清空浏览器缓存。这样，一旦一切正常，缓存仍然可以工作。这意味着如果我访问同一个网站 5 次，我只会加载一次（这真的很方便）。

ktulur 建议的解决方案有效，但请记住在完成时评论/删除它。

您可以执行以下操作：

```
var anticache:String="";
anticache = String(Math.random());
var file_url:String = "Whatever.xxx"+anticache; 
```

然后注释/取消注释第二行以使用/忽略反缓存方法。我希望它有帮助:)

# asp.net - 从多项选择中加载输入

> ID：814862
> 
> 赞同：0
> 
> 时间：2009-05-02T13:23:39.300
> 
> 标签：asp.net, select, user-input

嗨，我有一个任务，因为选择输入类型的下拉列表是

*   文本框
*   约会时间
*   数字

在选择其中一种类型时，我必须打开所选输入（例如，如果用户选择日期时间，我必须打开日期时间输入）

对于这个最适合的任务

1.  使用aspview（每个输入类型一个视图）
2.  对于每个用户控件，因此当用户选择一种类型时，它会在运行时加载它的用户控件

或者你有更好的主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-02T13:33:16.653

另一个想法...

您可以将每个控件封装在一个 div 中，并使用 javascript 将每个控件的显示从无更改为某物。

# asp.net - 如何从 HttpModule 生成 404 错误？

> ID：814863
> 
> 赞同：2
> 
> 时间：2009-05-02T13:24:07.893
> 
> 标签：asp.net, http-status-code-404

我有一个 ASP.NET HttpModule 处理 HttpApplication.BeginRequest 以将一些请求重定向到其他文件。通常我会解析请求，将文件写入 HttpContext.Current.Response.OutputStream，然后调用 HttpApplication.CompleteRequest()。对于某些请求，我找不到相关文件 - 如何返回 404 错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-02T13:27:21.443

你试过`throw new HttpException(404, "Not Found");`吗？

# c# - == 和 Equals() 之间的 C# 区别

> ID：814878
> 
> 赞同：642
> 
> 时间：2009-05-02T13:36:58.237
> 
> 标签：c#, .net, equals

我在比较 2 个字符串的 silverlight 应用程序中有一个条件，由于某种原因，当我使用`==`它时返回**false**而`.Equals()`返回**true**。

这是代码：

```
if (((ListBoxItem)lstBaseMenu.SelectedItem).Content.Equals("Energy Attack"))
{
    // Execute code
}

if (((ListBoxItem)lstBaseMenu.SelectedItem).Content == "Energy Attack")
{
    // Execute code
} 
```

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：493
> 
> 时间：2009-05-02T13:39:29.853

当`==`用于类型的表达式时`object`，它会解析为[`System.Object.ReferenceEquals`](https://msdn.microsoft.com/en-us/library/system.object.referenceequals.aspx).

[`Equals`](https://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)只是一种`virtual`方法并且行为如此，因此将使用覆盖的版本（用于`string`比较内容的类型）。

* * *

## 回答 #2

> 赞同：381
> 
> 时间：2009-05-02T13:40:30.193

在将对象引用与字符串进行比较时（即使对象引用引用了字符串），`==`特定于字符串类的运算符的特殊行为将被忽略。

通常（即不处理字符串时）`Equals`比较**值**，同时`==`比较**对象引用**。如果您要比较的两个对象指的是同一个对象的确切实例，则两者都将返回 true，但如果一个对象具有相同的内容并且来自不同的源（是具有相同数据的单独实例），则只有 Equals 会返回真。但是，正如注释中所指出的，字符串是一种特殊情况，因为它覆盖了`==`运算符，因此在纯粹处理字符串引用（而不是对象引用）时，即使它们是单独的实例，也只会比较这些值。以下代码说明了行为的细微差别：

```
string s1 = "test";
string s2 = "test";
string s3 = "test1".Substring(0, 4);
object s4 = s3;

Console.WriteLine($"{object.ReferenceEquals(s1, s2)} {s1 == s2} {s1.Equals(s2)}");
Console.WriteLine($"{object.ReferenceEquals(s1, s3)} {s1 == s3} {s1.Equals(s3)}");
Console.WriteLine($"{object.ReferenceEquals(s1, s4)} {s1 == s4} {s1.Equals(s4)}"); 
```

输出是：

```
True True True
False True True
False False True 
```

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2009-05-02T13:47:46.667

`==`并且`.Equals`都依赖于实际类型中定义的行为和调用站点的实际类型。两者都只是方法/运算符，可以在任何类型上重写并给出作者想要的任何行为。根据我的经验，我发现人们`.Equals`在对象上实现但忽略实现 operator是很常见的`==`。这意味着`.Equals`将实际测量值的相等性，同时`==`将测量它们是否是相同的参考。

当我使用定义不断变化的新类型或编写通用算法时，我发现最佳实践如下

*   如果我想比较 C# 中的引用，我`Object.ReferenceEquals`直接使用（一般情况下不需要）
*   如果我想比较我使用的值`EqualityComparer<T>.Default`

在某些情况下，当我觉得 of 的用法`==`不明确时，我会在代码中明确使用`Object.Reference`equals 来消除歧义。

Eric Lippert 最近发表了一篇关于为什么 CLR 中有两种相等方法的博客文章。值得一读

*   [http://blogs.msdn.com/ericlippert/archive/2009/04/09/double-your-dispatch-double-your-fun.aspx](http://blogs.msdn.com/ericlippert/archive/2009/04/09/double-your-dispatch-double-your-fun.aspx)

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2012-10-11T07:54:23.153

**== 运算符**

1.  如果操作数是[值类型](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)并且它们的**值**相等，则返回 true，否则返回 false。
2.  如果操作数是除字符串以外的[引用类型](http://msdn.microsoft.com/en-us/library/490f96s2.aspx)并且都引用同一个**实例**（同一个对象），则返回 true 否则返回 false。
3.  如果操作数是**字符串**类型并且它们的**值**相等，则返回 true，否则返回 false。

**。等于**

1.  如果操作数是[引用类型](http://msdn.microsoft.com/en-us/library/490f96s2.aspx)，则执行[引用相等](http://msdn.microsoft.com/en-us/library/system.object.referenceequals.aspx)，即如果两者都引用同一个**实例**（同一个对象），则返回 true，否则返回 false。
2.  如果操作数是[值类型](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)，则与 == 运算符不同，它首先检查它们的**类型**，如果它们的类型相同，则执行 == 运算符，否则返回 false。

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2016-11-27T09:56:45.453

据我了解，答案很简单：

1.  `==`比较对象引用。
2.  `.Equals`比较对象内容。
3.  `String`数据类型总是像内容比较一样。

我希望我是正确的，它回答了你的问题。

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2013-08-15T11:15:44.410

首先，有*区别*。对于数字

```
> 2 == 2.0
True

> 2.Equals(2.0)
False 
```

对于字符串

```
> string x = null;
> x == null
True

> x.Equals(null)
NullReferenceException 
```

在这两种情况下，`==`行为都比`.Equals`

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2011-08-11T03:35:44.653

我要补充一点，如果您将对象转换为字符串，那么它将正常工作。这就是为什么编译器会给你一个警告说：

> 可能的意外参考比较；要进行值比较，请将左侧转换为“字符串”

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2019-06-03T13:40:24.143

就像对已经很好的答案的补充一样：这种行为不仅限于字符串或比较不同的数字类型。即使两个元素都是相同底层类型的对象类型。“==”不起作用。

以下屏幕截图显示了比较两个对象 {int} - 值的结果

[![来自 VS2017 的示例](https://i.stack.imgur.com/fbeUg.png)](https://i.stack.imgur.com/fbeUg.png)

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2017-11-16T19:48:25.057

因为到目前为止还没有提到该方法的静态版本，`.Equal`所以我想在此处添加它以总结和比较 3 种变体。

```
MyString.Equals("Somestring"))          //Method 1
MyString == "Somestring"                //Method 2
String.Equals("Somestring", MyString);  //Method 3 (static String.Equals method) - better 
```

where`MyString`是来自代码中其他地方的变量。

**背景信息和总结：**

在 Java 中`==`不应该使用比较字符串。我提到这一点，以防你需要同时使用这两种语言，并且让你知道 using`==`也可以用 C# 中更好的东西代替。

在 C# 中，使用方法 1 或方法 2 比较字符串没有实际区别，只要两者都是字符串类型。但是，如果一个为空，一个是另一种类型（如整数），或者一个表示具有不同引用的对象，那么，正如最初的问题所示，您可能会遇到比较内容是否相等可能不会返回什么你期望。

**建议的解决方案：**

因为 using与比较事物时`==`的 using 并不完全相同`.Equals`，所以您可以使用*静态 String.Equals*方法来代替。这样，如果两边不是同一个类型，你仍然会比较内容，如果一个为空，你将避免异常。

```
 bool areEqual = String.Equals("Somestring", MyString); 
```

写起来有点多，但在我看来，使用起来更安全。

以下是从 Microsoft 复制的一些信息：

```
public static bool Equals (string a, string b); 
```

参数

`a` 细绳

要比较的第一个字符串，或`null`。

`b` 细绳

要比较的第二个字符串，或`null`。

退货 `Boolean`

`true`如果 的值与`a`的值相同`b`；否则，`false`。如果两者都是`a`，则该方法返回。`b``null``true`

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-05-02T16:02:44.283

我在这里有点困惑。如果 Content 的运行时类型是字符串类型，那么 == 和 Equals 都应该返回 true。但是，由于情况并非如此，因此 Content 的运行时类型不是字符串，并且在其上调用 Equals 正在执行引用相等，这解释了 Equals("Energy Attack") 失败的原因。然而，在第二种情况下，关于应该调用哪个重载的 == 静态运算符的决定是在编译时做出的，这个决定似乎是 ==(string,string)。这向我表明 Content 提供了对字符串的隐式转换。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-07-11T11:04:21.103

为答案再添一分。

`.EqualsTo()`方法为您提供了与文化和区分大小写进行比较的规定。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-01-26T09:12:56.013

@BlueMonkMN 的早期回答还有另一个维度。另一个维度是，@Drahcir 的标题问题的答案也取决于我们*如何*得出该`string`值。为了显示：

```
string s1 = "test";
string s2 = "test";
string s3 = "test1".Substring(0, 4);
object s4 = s3;
string s5 = "te" + "st";
object s6 = s5;
Console.WriteLine("{0} {1} {2}", object.ReferenceEquals(s1, s2), s1 == s2, s1.Equals(s2));

Console.WriteLine("\n  Case1 - A method changes the value:");
Console.WriteLine("{0} {1} {2}", object.ReferenceEquals(s1, s3), s1 == s3, s1.Equals(s3));
Console.WriteLine("{0} {1} {2}", object.ReferenceEquals(s1, s4), s1 == s4, s1.Equals(s4));

Console.WriteLine("\n  Case2 - Having only literals allows to arrive at a literal:");
Console.WriteLine("{0} {1} {2}", object.ReferenceEquals(s1, s5), s1 == s5, s1.Equals(s5));
Console.WriteLine("{0} {1} {2}", object.ReferenceEquals(s1, s6), s1 == s6, s1.Equals(s6)); 
```

输出是：

```
True True True

  Case1 - A method changes the value:
False True True
False False True

  Case2 - Having only literals allows to arrive at a literal:
True True True
True True True 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-04-15T09:10:38.837

真的很棒的答案和例子！

我只想补充一下两者之间的根本区别，

> 运算符如`==`不是多态的，`Equals`而是

考虑到这个概念，如果您提出任何示例（通过查看左手和右手引用类型，并检查/了解该类型是否实际上重载了 == 运算符并且 Equals 被覆盖），您肯定会得到正确的答案.

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-07-09T13:31:35.750

这是由于值相等（equal 方法）和引用相等（== 运算符），因为 equal 方法检查值，而相同的 == 检查引用。

== 运算符覆盖代码在[https://referencesource.microsoft.com/上的字符串类中可用](https://referencesource.microsoft.com/)

所以现在更容易理解了，equal 方法也有两种实现，一种来自字符串类本身，一种来自对象类。它对性能的影响以及我还运行一些基本代码并尝试了解基准。

我在下面分享结果如果我在某处错了，请更正或建议。有 3 个案例，我为所有案例运行了相同的代码，这就是结果。

**案例1：**这里我使用的是字符串。equal 方法比较两个字符串并且两个字符串具有相同的值。string.equals(a,b)

**第一次运行：5608195 滴答**

**第二次运行：5529387 滴答声**

**第三次运行：5622569 滴答声**

**总刻度：16760151**

**案例2：**这里我使用的是字符串。equal() 方法（重载一个）用于比较 2 个字符串并且两个字符串具有相同的值。a.等于(b)

**第一次运行：6738583 滴答声**

**第二次运行：6452927 滴答声**

**第三次运行：7168897 滴答声**

**总刻度=20360407**

**案例 3：**这里我使用 == 运算符比较 2 个字符串，并且两个字符串具有相同的值。a==b

**第一次运行：6652151 滴答声**

**第二次运行：7514300 滴答**

**第三次运行：7634606 滴答声**

**总刻度=21801057**

```
class Program
{
    private static int count;
    static string a = "abcdef";
    static string b = "abcdef";
    static void Main(string[] args)
    {            

        for (int j = 1; j <= 3; j++)
        {
            Stopwatch sw = new Stopwatch();
            sw.Start();
            for (int i = 1; i <= 1000; i++)
            {
                checkString();
            }
            sw.Stop();
            Console.WriteLine(sw.ElapsedTicks);
        }
        Console.ReadLine();

    }
    public static void checkString()
    {
        for (int i = 1; i <= 100000; i++)
        {
            if (a==b)
                count++;
        }
    }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-02-14T17:47:05.593

C# 中的`==`标记用于两个不同的相等检查运算符。当编译器遇到该标记时，它将检查被比较的任何一个类型是否已经为被比较的特定组合类型（*）或两种类型都可以转换为的类型组合实现了相等运算符重载。如果编译器发现这样的重载，它将使用它。否则，如果这两种类型都是引用类型，并且它们不是不相关的类（可能是接口，也可能是相关的类），编译器会将`==`其视为引用比较运算符。如果两个条件都不适用，编译将失败。

请注意，其他一些语言对两个相等检查运算符使用单独的标记。例如，在 VB.NET 中，`=`标记在表达式中仅用于可重载的相等检查运算符，并`Is`用作引用测试或空测试运算符。用于`=`不覆盖相等检查运算符的类型将失败，尝试`Is`用于测试引用相等或无效性以外的任何目的也会失败。

(*) 类型通常仅重载相等性以便与自身进行比较，但对于类型而言重载相等性运算符以与其他特定类型进行比较可能很有用；例如，`int`可以（恕我直言，应该有但没有）定义一个相等运算符来与 进行比较`float`，这样 16777217 就不会报告自己等于 16777216f。事实上，由于没有定义这样的运算符，C# 将提升`int`to `float`，在相等检查运算符看到它之前将其四舍五入为 16777216f；然后该运算符看到两个相等的浮点数并将它们报告为相等，而不知道发生的舍入。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2014-03-20T04:31:40.277

当我们创建任何对象时，对象有两个部分，一个是内容，另一个是对该内容的引用。 `==`比较内容和参考； `equals()`仅比较内容

[http://www.codeproject.com/Articles/584128/What-is-the-difference-between-equalsequals-and-Eq](http://www.codeproject.com/Articles/584128/What-is-the-difference-between-equalsequals-and-Eq)

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2021-01-29T19:06:28.540

请注意，C# 中有两种不同类型的相等

1- `Value Equality`（对于 int、DateTime 和 struct 等值类型）

2- `Reference Equality`（对于对象）

有两种基本的标准协议来实现相等检查。

1-`==`和`!=`运算符。

2-`virtual` `Equals`方法。

== 和 != 是静态解析的，这意味着 C# 将在编译时决定哪种类型将执行比较。

例如`value-type`

```
 int x = 50;
 int y = 50;
 Console.WriteLine (x == y); // True 
```

但对于`reference type`

```
 object x = 50;
 object y = 50;
 Console.WriteLine (x == y); // False 
```

最初根据`Equals()`操作数实际类型在运行时解析。

例如，在以下示例中，在运行时，将决定`Equals()`将应用于 int 值，结果为`true`.

```
object x = 5;
object y = 5;
Console.WriteLine (x.Equals (y)); // True 
```

但是，对于引用类型，它将使用引用相等检查。

```
MyObject x = new MyObject();
MyObject y = x;
Console.WriteLine (x.Equals (y)); // True 
```

请注意，`Equals()`使用结构比较 for `struct`，这意味着它在结构的每个字段上调用 ​​Equals。

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2014-11-15T11:34:26.483

***==***

== 运算符可用于比较任何类型的两个变量，**它只是比较位**。

```
int a = 3;
byte b = 3;
if (a == b) { // true } 
```

注意： int 的左侧有更多的零，但我们在这里不关心。

int a (00000011) == 字节 b (00000011)

请记住 == 运算符只关心变量中位的模式。

使用 == 如果两个引用（原语）引用堆上的同一个对象。

无论变量是引用还是原语，规则都是相同的。

```
Foo a = new Foo();
Foo b = new Foo();
Foo c = a;

if (a == b) { // false }
if (a == c) { // true }
if (b == c) { // false } 
```

a == c 为真 a == b 为假

a 和 c 的位模式相同，因此使用 == 时它们相等。

***平等的（）：***

使用 equals() 方法查看**两个不同的对象是否相等**。

比如两个不同的String对象，都代表“简”中的字符

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2014-12-30T02:11:37.837

Equal 和 == 之间的唯一区别在于对象类型比较。在其他情况下，例如引用类型和值类型，它们几乎相同（两者都是按位相等或两者都是引用相等）。

对象：等于：按位相等 ==：引用相等

string: (equals 和 == 对于 string 是一样的，但是如果 string 之一变成了 object，那么比较结果会不同) Equals: 按位相等 == : 按位相等

有关更多说明，请参见[此处](http://miafish.wordpress.com/2014/12/30/equals-vs/)。

# winforms - 用于 Intranet 而不是基于 Web 的 Windows Forms

> ID：814879
> 
> 赞同：5
> 
> 时间：2009-05-02T13:38:38.967
> 
> 标签：winforms

我们能否完全使用 WinForms 而不是基于浏览器的 Web 应用程序来实现企业范围的 Intranet 应用程序？有什么优点和缺点，哪个优于其他？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-02T13:45:56.030

我脑子里的一些东西：

### WinForms 专业人士

*   更丰富的用户体验
*   反应更灵敏
*   通常更容易编写交互式流程

### 网络应用专家

*   集中维护（易于更新，...）
*   集中式数据访问安全
*   更容易通过 Internet 和在旅途中访问
*   不依赖客户端上的浏览器以外的任何东西（因此客户端平台无关紧要）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-02T14:00:54.497

我们在我以前工作的地方开发了很多 winforms 应用程序。[在部署的情况下， ClickOnce](http://geekswithblogs.net/gpro/archive/2008/03/16/clickonce-winforms-deployment-part-1.aspx)使事情变得容易得多。

# sharepoint - 我可以将对象字段添加到 SPItem，以将某种对象附加到项目上吗？

> ID：814883
> 
> 赞同：0
> 
> 时间：2009-05-02T13:41:53.467
> 
> 标签：sharepoint, moss, wss, field

我有一个 SPListItem 对象。我可以添加一个字段来存储某种对象，如 ArrayList 或 Dictionary 之类的吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T14:08:34.150

您可以使用 SPListItem.Properties 来存储不属于特定 SPField 的自定义信息。设置属性后不要忘记调用 Update()/SystemUpdate()。

# delphi - Delphi：如何处理多个文件？

> ID：814888
> 
> 赞同：1
> 
> 时间：2009-05-02T13:47:17.777
> 
> 标签：delphi, delphi-2007

在 Delphi 2007 中，我如何制作一个程序来读取第一个文件，然后关闭它以读取第二个文件，依此类推，直到最后一个文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-02T14:01:11.987

您是否尝试读取目录中的每个文件？试试这门课。这不是我的原始代码，但我已经对其进行了一些修改和定制。它会为您提供与您在可以传递给 TFilestream 的字符串列表中设置的条件相匹配的所有文件名。

```
unit findfile;

interface

uses
  Classes;

type
   TFileAttrKind = (ffaReadOnly, ffaHidden, ffaSysFile, ffaDirectory, ffaArchive, ffaAnyFile);
   TFileAttr = set of TFileAttrKind;

   TFindFile = class(TObject)
   private
      s: TStringList;

      fSubFolder : boolean;
      fAttr: TFileAttr;
      FPath : string;
      FBasePath: string;
      fFileMask : string;
      FDepth: integer;

      procedure SetPath(Value: string);
      procedure FileSearch(const inPath : string);
      function cull(value: string): string;
   public
      constructor Create(path: string);
      destructor Destroy; override;

      function SearchForFiles: TStringList;

      property FileAttr: TFileAttr read fAttr write fAttr;
      property InSubFolders : boolean read fSubFolder write fSubFolder;
      property Path : string read fPath write SetPath;
      property FileMask : string read fFileMask write fFileMask ;
   end;

implementation

{$WARN SYMBOL_PLATFORM OFF}
{$WARN UNIT_PLATFORM OFF}
uses
   Windows, SysUtils, FileCtrl;

constructor TFindFile.Create(path: string);
begin
   inherited Create;
   FPath := path;
   FBasePath := path;
   FileMask := '*.*';
   FileAttr := [ffaReadOnly, ffaDirectory, ffaArchive];
   s := TStringList.Create;
   FDepth := -1;
end;

procedure TFindFile.SetPath(Value: string);
begin
   if fPath <> Value then
   begin
      if (Value <> '') and (DirectoryExists(Value)) then
         fPath := IncludeTrailingPathDelimiter(Value);
   end;
end;

function TFindFile.SearchForFiles: TStringList;
begin
   s.Clear;
   try
      FileSearch(Path);
   finally
      Result := s;
   end;
end;

function TFindFile.cull(value: string): string;
begin
   result := StringReplace(value, FBasePath, '', []);
end;

destructor TFindFile.Destroy;
begin
   s.Free;
   inherited Destroy;
end;

procedure TFindFile.FileSearch(const InPath : string);
var Rec  : TSearchRec;
    Attr : integer;
begin
   inc(FDepth);
   try
      Attr := 0;
      if ffaReadOnly in FileAttr then
         Attr := Attr + faReadOnly;
      if ffaHidden in FileAttr then
         Attr := Attr + faHidden;
      if ffaSysFile in FileAttr then
         Attr := Attr + faSysFile;
      if ffaDirectory in FileAttr then
         Attr := Attr + faDirectory;
      if ffaArchive in FileAttr then
         Attr := Attr + faArchive;
      if ffaAnyFile in FileAttr then
         Attr := Attr + faAnyFile;

      if SysUtils.FindFirst(inPath + FileMask, Attr, Rec) = 0 then
         try
            repeat
               if (Rec.Name = '.') or (Rec.Name = '..') then
                  Continue;
               s.Add(cull(inPath) + Rec.Name);
            until SysUtils.FindNext(Rec) <> 0;
         finally
            SysUtils.FindClose(Rec);
         end;

      If not InSubFolders then
         Exit;

      if SysUtils.FindFirst(inPath + '*.*', faDirectory, Rec) = 0 then
         try
            repeat
               if ((Rec.Attr and faDirectory) <> 0)  and (Rec.Name <> '.') and (Rec.Name <> '..') then
               begin
                  FileSearch(IncludeTrailingPathDelimiter(inPath + Rec.Name));
               end;
            until SysUtils.FindNext(Rec) <> 0;
         finally
            SysUtils.FindClose(Rec);
         end;
   finally
      dec(FDepth);
   end;
end;

end. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T15:16:44.463

如果你想重复一个动作，那么你想要的就是一个*循环*。Delphi 带有三个用于循环的保留字：`for`、`repeat`和`while`。所有都记录在帮助文件中；我认为最重要的主题叫做[*结构化陈述*](http://docs.codegear.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/devcommon/declarationsandstatements_xml.html#537472756374757265642053746174656D656E7473)。你会很好地阅读它们。

`for`当您已经拥有要处理的事物的数组或列表时，传统的循环是最合适的。在您的情况下，可能是文件名列表。你可以这样写循环：

```
for i := 0 to High(FileNames) do begin ... end; 
```

或这个：

```
for i := 0 to Pred(FileNames.Count) do begin ... end; 
```

然后您将`FileNames[i]`在循环中引用以获取当前迭代的文件名。`for`当包含您的文件名的事物具有可用的*枚举*器或*迭代器*时，您还可以使用一种新型循环。然后你会这样写循环：

```
for name in FileNames do begin ... end; 
```

`While``repeat`当您在循环开始之前不一定知道您需要运行代码多少次时，就会使用和循环。您可以将它与[`FindFirst`](http://www.delphibasics.co.uk/RTL.asp?Name=FindFirst)和[`FindNext`](http://www.delphibasics.co.uk/RTL.asp?Name=FindNext)Delphi 函数结合使用。例如：

```
if FindFirst('*.txt', faAnyFile, SearchResult) = 0 then try
  repeat
    // Do something with SearchResult.Name
  until FindNext(SearchResult) <> 0;
finally
  SysUtils.FindClose(SearchResult);
end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-02T14:58:31.270

[DIFileFinder](http://www.yunqa.de/delphi/doku.php/products/filefinder/index?DokuWiki=8h8jsj06ocpcn159pom87e1vb1)可能是您想要的。

# c# - 如何列出 当 IsReadOnly 是接口成员时将 IsReadOnly 设为私有？

> ID：814895
> 
> 赞同：24
> 
> 时间：2009-05-02T13:53:56.340
> 
> 标签：c#, .net

我正在创建一个专门的代理类来实现`IList<T>`和包装一个内部`List<T>`实例。

`List<T>`它本身实现`IList<T>`了，它声明了一个成员**bool IsReadOnly**，但是当我尝试从我自己的类中访问该成员时，我不能，因为在`List<T>`， IsReadOnly 是私有的。

所以我的问题是；如果接口的实现要求所有实现的成员都是公共的，为什么`List<T>`要实现 IsReadOnly 作为私有，从而拒绝我访问它？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-05-02T13:55:49.487

它显式地实现了接口成员。

[http://msdn.microsoft.com/en-us/library/aa288461(VS.71).aspx](http://msdn.microsoft.com/en-us/library/aa288461(VS.71).aspx)

请注意，这不会使 interface 成员`private`。它仍然可以公开使用，但前提是您通过界面（使用强制转换）查看对象。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-05-02T13:56:57.220

它能够做到这一点的原因是它使用了显式接口实现。

```
bool IList<T>.IsReadOnly { get { ... } } 
```

该成员仍然可以访问，但只能通过`IList<T>`类型访问。

```
List<T> list = ...;
bool isReadOnly = ((IList<T>)list).IsReadOnly; 
```

在实现时`IList<T>`，该类型本身并未承诺提供 IsReadOnly 值。相反，它承诺在被视为`IList<T>`. 它是否在实际类中提供它纯粹是类型作者的选择。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-02T13:57:15.037

对于 if 的情况`List<T>`，`IsReadOnly`并没有真正的意义：它总是`false`. `List`因此显式地实现`ICollection<T>`（和`IList`）接口，从而使接口“私有”以供正常使用。如果您仍然需要访问它，您可以通过显式转换到接口：

```
bool result = ((ICollection<string>)yourStringList).IsReadOnly;
// Or equivalently using `IList`. 
```

# python - Google App Engine - 关于 cron 任务的设计注意事项

> ID：814896
> 
> 赞同：1
> 
> 时间：2009-05-02T13:54:04.047
> 
> 标签：python, database, google-app-engine, cron

我正在使用 Google App Engine 开发软件。

我对以下问题的优化设计有一些考虑：我需要定期创建和保存某些实体的快照。

在传统的关系数据库世界中，我会创建插入新摘要记录的数据库作业。

例如，一个工作会为每个活动用户插入一条记录，其中包含他当前的分数到“userrank”表中，比如每小时。

我想知道在 Google App Engine 中实现这一目标的最佳方法是什么。我知道有 Cron 服务，但它是否允许我们执行将插入/更新数千条记录的作业？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-02T16:17:30.970

我想你会发现，无论你的框架是什么，每小时对每个用户的状态进行快照都不能很好地扩展。更普通的环境会通过让您运行更长的任务来掩盖这一点，但您仍然会达到每小时为每个用户的数据拍摄快照的地步。

我的建议是：添加一个“最后一个快照”字段，并将模型的 put() 函数子类化（假设您使用的是 Python；在 Java 中也是如此，但我不知道语法），例如每当您更新记录时，它都会检查自上次快照以来是否超过一个小时，如果是，则创建并写入快照记录。

为了防止并发更新创建两个相同的快照，您需要为快照指定一个从拍摄快照的时间派生的键名。这样，如果两个并发更新尝试写入快照，一个将无害地覆盖另一个。

要获取给定小时的快照，只需查询比请求时间段更新的最旧快照。作为一个额外的好处，由于不活动的记录没有被快照，你也节省了大量的空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-02T14:23:21.200

您是否考虑过使用[远程 API](http://code.google.com/appengine/articles/remote_api.html)？通过这种方式，您可以获得数据存储的 shell 并避免超时。他们在该链接中演示的 Mapper 类非常有用，我已经成功地使用它对大约 1500 个对象进行批处理操作。

也就是说，cron 也应该可以正常工作。您确实对每个单独请求的时间有限制，因此您不能一次全部浏览它们，但是您可以使用重定向来循环任意数量的用户，一次处理一个用户。如果您需要有关此方法的帮助，文档中应该有一个示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-18T19:35:02.840

我会结合使用 Cron 作业和此处详述的循环 url 获取方法：http: [//stage.vambenepe.com/archives/549](http://stage.vambenepe.com/archives/549)。通过这种方式，您可以捕获超时并开始另一个请求。

总结这篇文章，cron 作业调用您的初始进程，您捕获超时错误并再次调用该进程，掩码为第二个 url。您必须在两个 URL 之间进行 ping 操作，以防止应用引擎认为您处于意外循环中。您还需要注意不要无限循环。确保你的更新循环有一个结束状态，因为如果它永远不会结束，这会让你很快超过你的配额。

# sql - SQL ORDER BY 问题

> ID：814898
> 
> 赞同：0
> 
> 时间：2009-05-02T13:56:43.230
> 
> 标签：sql, plsql

[这个问题](https://stackoverflow.com/questions/810599/order-by-with-decode-function-issue-with-multiple-columns)的重复，它本身交叉引用了同一问题的其他 3 个小变体。

* * *

大家好，

很抱歉，我将我的问题作为一个新问题放在这篇文章中。我现在非常需要你的帮助，非常感谢你的帮助

```
SELECT *
    FROM (SELECT distinct gl.group_id,
                 gl.group_name,
                 gl.group_description,
                 gl.status_code,
                 gl.member_count,
                 (SELECT grpp.group_name
                      FROM test_group_relationship grel JOIN test_group grpp
                               ON grel.parent_group_id = grpp.group_id
                      WHERE grel.child_group_id = gl.group_id
                 ) AS parent_group_name,
                 gl.group_name_key,
                 gl.group_description_key
             FROM   test_group AS gl
             WHERE  gl.group_org_id   = '3909'
               AND (gl.group_name_key LIKE '%GROUP%')
         ) AS data_set 
    ORDER BY DECODE(:sort_key,
                      'name',            'constant',
                      'description',     group_description_key,
                      'memberCount',     LPAD(member_count, 4),
                      'status',          LPAD(status_code, 4),
                      'parentGroupName', parent_group_name
               )NULLS FIRST,
         UPPER(SUBSTR(group_name, 1, 1)),
         SUBSTR(group_name, 1, 1) DESC,
         UPPER(group_name),
         group_name DESC,
         group_name_key, 
         ; 
```

我的问题仍然是相似的。我希望根据 :sort_key 变量进行动态排序，该变量在每次排序时都有解码中的各种选项之一。

何时，sort_key :='name'。正如我们所见，它计算为一个常量，然后是 ORDER BY 子句中的剩余列。

现在，当变量 sort_key:= 'description' 或 'memberCount'....每个值时，每个值的 ORDER BY LOGIC 都不同。

As an example,when 'description' is selected-the sorting in the ORDER BY cluase should do as it does for 'name'.

像这样的例子： -

```
 UPPER(SUBSTR(group_description, 1, 1)),
             SUBSTR(group_description, 1, 1) DESC,
             UPPER(group_description),
             group_description DESC,
             group_description_key, 
```

简而言之，sort_key 变量获得的每个选项 - ORDER BY 逻辑都是不同的，我现在必须在相同的 SQL 中实现它。

如果可以通过 CASE 订购所有选项 - 你能帮帮我吗？我非常需要你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T14:49:48.983

如果我理解正确，您是在询问是否可以根据绑定参数（包括 ASC/DESC 变化等）动态改变整个 ORDER BY 列表。

您最好的选择是根据您想要排序的方式使用不同的 ORDER BY 运行不同的查询。它更简单，运行速度更快。

如果你真的想按照你要求的方式去做，你可以在一定程度上使用与 ORDER BY DECODE(choice1, expression1,choice2, expression2,...) 相同的技术来做，除了表达式必须要复杂得多。每个表达式都必须按照排序优先级的顺序生成固定大小字段的串联字符串，例如：

```
ORDER BY DECODE('description',     UPPER(SUBSTR(group_description, 1, 1))
                                || SUBSTR(group_description, 1, 1) 
                                || RPAD(UPPER(group_description),40)
                                || RPAD(group_description_key,10)

                ,'name',           UPPER(SUBSTR(group_name, 1, 1)),
                                || LPAD(1000-ASCII(group_name)), -- first char DESC
                                || RPAD(UPPER(group_name),20)
                                || RPAD(group_name_key,10) 
```

此外，很难混合 ASC 和 DESC 字段。您可以使用诸如 LPAD(1000000 - n,7) 之类的东西来切换数字字段的方向，其中 1000000 是一个高于任何可能的 n 的数字。您还可以像我在示例中使用 group_name 的第一个字符一样玩一些其他技巧。

这种技术将阻止数据库使用索引来加速排序（除非您添加一些疯狂的基于函数的索引）。

同样，我建议您放弃这种方法，并根据您所需的 ORDER BY 子句向数据库发送一个完全不同的查询。如果您使用 PL/SQL，您还可以使用动态 SQL 使用所需的 ORDER BY 子句构建查询并执行该查询。

编辑：我的 PL/SQL 有点生疏，但这里是如何在 PL/SQL 中使用动态 SQL 进行操作。

```
FUNCTION QueryGroups(sort_key in varchar2) RETURN REF CURSOR
IS
   sql_block VARCHAR2(2000);
   order_by VARCHAR2(2000);
   ret REF CURSOR;
BEGIN
   order_by :=
     CASE sort_key
       WHEN 'name'
         THEN  q'{UPPER(SUBSTR(group_name, 1, 1)),
                  SUBSTR(group_name, 1, 1) DESC,
                  UPPER(group_name),
                  group_name DESC,
                  group_name_key}';
       WHEN 'description'
         THEN  q'{UPPER(SUBSTR(group_description, 1, 1)),
                  SUBSTR(group_description, 1, 1) DESC,
                  UPPER(group_description),
                  group_description DESC,
                  group_description_key}';
     END CASE;

     sql_block = q'{SELECT *
                FROM (SELECT distinct gl.group_id,
                 gl.group_name,
                 gl.group_description,
                 gl.status_code,
                 gl.member_count,
                 (SELECT grpp.group_name
                      FROM test_group_relationship grel JOIN test_group grpp
                               ON grel.parent_group_id = grpp.group_id
                      WHERE grel.child_group_id = gl.group_id
                 ) AS parent_group_name,
                 gl.group_name_key,
                 gl.group_description_key
             FROM   test_group AS gl
             WHERE  gl.group_org_id   = '3909'
               AND (gl.group_name_key LIKE '%GROUP%')
         ) AS data_set }' || order_by;

     OPEN ret for sql_block;
     return ret;
END QueryGroups; 
```

# javascript - 动画背景图像

> ID：814910
> 
> 赞同：2
> 
> 时间：2009-05-02T14:03:45.567
> 
> 标签：javascript, jquery, jquery-ui, animation, jquery-animate

我喜欢使用 Jquery 及其伴侣 Jquery Ui，但无法找到在一定时间内（如 5 秒）为背景图像设置动画的方法。我不能这样做：

```
$('sampleelement').animate({'background-image':'url(hello.jpg)'},5000); 
```

有任何想法吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T14:11:36.780

这是不可能的。Css 不允许像这样对背景图像进行操作。您应该在内容后面放入一个带有背景的 div 并将其淡入：

```
<div id='background_img' style='display:none; position:absolute;'><!-- position me behind the content!--><img ... /></div> 
<div id='content'>YDADA</div>

$('#background_img').fadeIn(5000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T15:14:48.203

使用 jQuery[背景位置动画](http://plugins.jquery.com/project/backgroundPosition-Effect)插件。请参阅[演示](http://www.protofunc.com/scripts/jquery/backgroundPosition/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T14:14:26.743

为什么不使用动画 GIF？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-02T14:44:18.870

Pim Jager 的方法是最接近没有动画 gif 的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-02T17:02:20.800

我在[Cheer Us Up](http://cheerusup.com/)中所做的是使用基本的 javascript 来更改背景图像——

```
$(function(){
curr = 0;
setTimout(changeBg(),200); 

});

function changeBg() {
curr++;

document.body.style.backgroundPosition = curr + 20;

} 
```

这就是基本思想。我没有使用 jquery，因为我只是想让它慢慢滑过。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-02T15:06:37.803

您可以创建多个图像，然后使用 setTimeout 将一个替换为另一个。这有点像模拟 .gif，只是提供了更多的灵活性和质量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-06-20T14:31:50.543

这就是你需要的：[http ://www.ovalpixels.com/bgImageTransition/](http://www.ovalpixels.com/bgImageTransition/)

# cocoa - 单击停靠图标时如何打开应用程序窗口？

> ID：814921
> 
> 赞同：45
> 
> 时间：2009-05-02T14:10:31.447
> 
> 标签：cocoa

我很惊讶这不会自动发生，但我希望我的应用程序窗口在单击 Dock 图标时自动打开。

澄清一下，当我打开应用程序时，窗口会自动打开，但是当我单击窗口的十字但让应用程序运行时，当我单击停靠图标时，窗口不会打开。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2009-07-20T09:50:53.097

`- (BOOL)applicationShouldHandleReopen:(NSApplication *)theApplication hasVisibleWindows:(BOOL)flag`在您的应用委托中实现。查看文档以获取返回值的详细信息。

基于文档的应用程序和非基于文档的应用程序的行为略有不同。如果单击基于文档的应用程序的停靠图标时没有打开的窗口，那么它将创建一个新文档。如果单击非基于文档的应用程序的停靠图标时没有打开的窗口，那么它将什么也不做。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-02-14T10:37:19.650

```
- (BOOL)applicationShouldHandleReopen:(NSApplication *)theApplication hasVisibleWindows:(BOOL)flag
{
    if (flag) {
        return NO;
    }
    else
    {
       [YourWindow makeKeyAndOrderFront:self];// Window that you want open while click on dock app icon
        return YES;
    }
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2010-06-04T13:52:07.400

这就是我正在做的事情，以使非基于文档的应用程序的主窗口在关闭后返回屏幕。我知道这可能不是正确的方法，但到目前为止它对我有用。

在 AppDelegate 上实现这一点，窗口被定义为同一对象的实例变量。

```
- (BOOL) applicationShouldOpenUntitledFile:(NSApplication *)sender
{
    [window makeKeyAndOrderFront:self];
    return NO;
} 
```

如果有人有更好的解决方案，请回复。谢谢！

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-10-04T23:19:37.370

正如其他人指出的那样，`applicationShouldHandleReopen`在非文档应用程序中使用重新打开关闭窗口的方法是正确的方法。我要添加的唯一更改是一种更灵活的方法来检查必须重新显示的窗口，方法是遍历`NSApplication`可见和不可见的列表`.windows`并检查所需的窗口。

```
func applicationShouldHandleReopen(_ sender: NSApplication, hasVisibleWindows flag: Bool) -> Bool {

    if flag == false {

        for window in sender.windows {

            if (window.delegate?.isKind(of: WelcomeWindowController.self)) == true {
                window.makeKeyAndOrderFront(self)
            }
        }
    }

    return true
} 
```

**附录**

a) 如果窗口被隐藏，那么当用户点击应用程序的 Dock 图标时它会自动显示，所以不需要实现`applicationShouldHandleReopen`方法。

b) 选中的*“关闭时释放”*选项不会以任何方式影响上述行为。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-02T15:05:52.237

当应用程序处于活动状态时，基于文档的应用程序将自动打开一个新的无标题文档，因此我假设您指的是非基于文档的应用程序。

在您的应用程序委托中实现[applicationDidBecomeActive:方法并打开/显示窗口。](http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/applicationDidBecomeActive:)

编辑：

[有关代表](http://developer.apple.com/documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html#//apple_ref/doc/uid/TP40002974-CH7-SW18)的一些信息。

[关于打开和关闭 Windows](http://developer.apple.com/documentation/Cocoa/Conceptual/WinPanel/Tasks/OpeningClosingWindows.html#//apple_ref/doc/uid/20000226-CJBCCCEF)和[NSWindow](http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html) API的一些信息

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-01-02T13:10:15.243

添加到已接受答案的解决方案：

有了接受的答案，重新打开的窗口不再对鼠标事件做出反应。

使用接受的答案时，您还必须确保在 IB 窗口的属性检查器中取消选中“关闭时释放”。这解决了无响应的窗口问题。

# datagrid - [WPF ToolKit：如何将组合框中的选定值设置为当前单元格？

> ID：814922
> 
> 赞同：0
> 
> 时间：2009-05-02T14:10:33.163
> 
> 标签：datagrid

我正在使用以下代码将组合框绑定到 wpf 中的数据网格。

但是当我从组合框中选择项目并制表时，网格不包含所选值。

我想将选定的值设置为数据网格的当前单元格。

```
 <dg:DataGridComboBoxColumn.ItemsSource>
                                        <col:ArrayList>
                                            <sys:String>A</sys:String>
                                            <sys:String>B</sys:String>
                                            <sys:String>C</sys:String>
                                            <sys:String>D</sys:String>
                                            <sys:String>E</sys:String>
                                        </col:ArrayList>
                                    </dg:DataGridComboBoxColumn.ItemsSource>
                                </dg:DataGridComboBoxColumn> 
```

请只做那些需要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-10T10:38:46.850

尝试这个

```
<dg:DataGridComboBoxColumn SelectedValueBinding="{Binding ProductID}"                                         
                                       SelectedValuePath="ProductID"
                                       DisplayMemberPath="ProductName"
                                       Header="Product"
                                       Width="135" 
                                       ItemsSource="{Binding Source={StaticResource Product}}"
                                       SelectedItemBinding="{Binding Product}">
                    <dg:DataGridComboBoxColumn.EditingElementStyle> 
```

# nhibernate - NHibernate/FluentNHibernate 属性包

> ID：814931
> 
> 赞同：4
> 
> 时间：2009-05-02T14:23:10.123
> 
> 标签：nhibernate, fluent-nhibernate

给定一个 Vehicle 类和一个 VehicleProperty 类...

```
public class Vehicle
{
    public virtual int Id { get; protected set; }
    public virtual string Registration { get; set; }

    private List<VehicleProperty> _properties = new List<VehicleProperty>();
    public virtual IEnumerable<VehicleProperty> Properties
    {
        get { return _properties; }
        protected set{ _properties = new List<VehicleProperty>(value);}
    }

    public virtual void AddProperty(string name, string value)
    {
        _properties.Add(new VehicleProperty {Name = name, Value = value});
    }
}

public class VehicleProperty
{
    public virtual string Name { get; set; }
    public virtual string Value { get; set; }
} 
```

如何映射这两个类，以便 VehicleProperty 表具有 [VehicleId] 和 [Name] 的复合键。Vehicle 将是一个聚合根（VehicleProperty 不能在 Vehicle 类之外访问）。

我已经尝试了我能想到的一切（我是 NHibernate 的新手，所以这并不多）

```
public class VehicleMap : ClassMap<Vehicle>
{
    public VehicleMap()
    {
        Id(x => x.Id);
        Map(x => x.Registration);
        HasMany(x => x.Properties)
            .Inverse()
            .Cascade.All();
    }
}

public class VehiclePropertyMap : ClassMap<VehicleProperty>
{
    public VehiclePropertyMap()
    {
        UseCompositeId()
            .WithKeyProperty(x => x.Name)
            .WithKeyReference(x => x.Vehicle, "Vehicle_Id");
        Map(x => x.Name);
        Map(x => x.Value);
    }
} 
```

此映射导致以下 sql 和 StaleStateException“意外行数：0；预期：1”（我也不想在 VehicleProperty 上拥有 Vehicle 属性）...

```
INSERT INTO "Vehicle" (Registration) VALUES (@p0); select last_insert_rowid(); @p0 = 'AA09CDE'
UPDATE "VehicleProperty" SET Name = @p0, Value = @p1 WHERE Name = @p2 AND Vehicle_Id = @p3; @p0 = 'Colour', @p1 = 'Black', @p2 = 'Colour', @p3 = '' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-03T09:20:12.463

我完全同意 Stefan 的观点，虽然我无法证明他的映射的正确性，但 Fluent NHibernate 的直译如下：

```
public class VehicleMap : ClassMap<Vehicle>
{
  public VehicleMap()
  {
    Id(x => x.Id);
    Map(x => x.Registration);

    HasMany(x => x.Properties)
      .Component(c =>
      {
        c.Map(x => x.Name);
        c.Map(x => x.Value);
      })
      .Cascade.AllDeleteOrphan();
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-02T22:45:37.140

1.  不要使用复合 ID。
2.  逆的意思是，这是另一个的逆关系。如果没有其他的，它只是没有更新。
3.  您将 VehicleProperty.Name 属性声明为主键。如果主键已经初始化，NH 认为它已经被存储并因此尝试更新。（这就是你得到例外的原因。）你可以改变这种行为，但最好使用人工主键或下面的映射。

我不知道 FluentNHibernate 向您展示代码。我可以告诉你它在 XML 中的样子。

```
<class name="Vehicle">
  <id name="Id" generator="native"/>

  <property name="Registration"/>

  <!-- declare the table Vehicle_Properties for the property Properties -->
  <bag name="Properties" table="Vehicle_Properties" cascade="all-delete-orphan">

    <!-- primary key of Vehicle_Properties and foreign key -->
    <key column="Vehicle_FK"/>

    <!-- contents of the table: Name and Value -->
    <composite-element class="VehicleProperty">
      <property name="Name"/>
      <property name="Value"/>
    </composite-element>
  </bag>

</class> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T23:47:28.083

首先，为复合 PK 创建一个单独的类：

```
public class VehiclePropertyPK
{
  public virtual Vehicle PropertyVehicle { set; get; }
  public virtual string Name { set; get; }

  // You must implement your own GetHasCode and Equals methods
  public override int GetHashCode()
  {
    ...
  }

  public override bool Equals(object o)
  {
    ...
  }
} 
```

然后，以这种方式重构`VehicleProperty`类：

```
public class VehicleProperty
{
  public virtual VehiclePropertyPK VehicleCompId { get; set; }
  public virtual string Value { get; set; }
} 
```

最后，地图：

```
public class VehicleMap : ClassMap<Vehicle>
{
  public VehicleMap()
  {
    Id(x => x.Id);
    Map(x => x.Registration);
    HasMany(x => x.Properties)
        .KeyColumn("Vehicle_Id")
        .Inverse()
        .Cascade.All();
  }
}

public class VehiclePropertyMap : ClassMap<VehicleProperty>
{
  public VehiclePropertyMap()
  {
    CompositeId<VehiclePropertyPK>(x => x.VehicleCompId)
            .KeyReference(y => y.PropertyVehicle , "Vehicle_Id")
            .KeyProperty(y => y.Name, "Name");
    Map(x => x.Value);
  }
} 
```

（NHibernate 3.3.1 和 FluentNHibernate 1.3.0）

# python - python常规exp。带有 unicode 字符

> ID：814933
> 
> 赞同：3
> 
> 时间：2009-05-02T14:26:05.263
> 
> 标签：python, regex

我需要一个 reg exp 来解析类似的东西 -

```
"2 * 240pin" 
```

其中 * 可以是常规星号或 unicode char \u00d7 或只是一个 x。这就是我所拥有的，但它不起作用：

```
multiple= r'^(\d+)\s?x|*|\\u00d7\s?(\d+)(\w{2,4})$'
multiplepat= re.compile(multiple, re.I)
print multiplepat.search(u'1 X 240pin').groups() 
```

返回

```
multiplepat= re.compile(multiple, re.I)
File "C:\Python26\lib\re.py", line 188, in compile
return _compile(pattern, flags)
File "C:\Python26\lib\re.py", line 243, in _compile
raise error, v # invalid expression
error: nothing to repeat 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T14:39:06.467

```
multiple= r'^(\d+)\s[xX\*\\u00d7]\s?(\d+)(\w{2,4})$' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-02T14:41:06.007

您需要转义，`*`因为它是您使用它的上下文中的量词。但是你也可以使用一个字符类。所以试试这个：

```
ur'^(\d+)\s?[x*\u00d7]\s?(\d+)(\w{2,4})$' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-02T14:44:35.767

使用[字符集 ( `[]`)](http://docs.python.org/library/re.html#regular-expression-syntax)：

> []
> 
> 用于表示一组字符。字符可以单独列出，也可以通过给出两个字符并用“-”分隔来表示一系列字符。**特殊字符在集合内不活跃**。

```
>>> m= u'^(\\d+)\\s?[x*\u00d7]\\s?(\\d+)(\\w{2,4})$'
>>> mpat=re.compile(m)
>>> mpat.search(u'1 * 240pin').groups()
(u'1', u'240', u'pin')
>>> 
```

# c# - 为什么 C# 默认将方法实现为非虚拟的？

> ID：814934
> 
> 赞同：105
> 
> 时间：2009-05-02T14:28:05.087
> 
> 标签：c#, java, .net, virtual-functions

与 Java 不同，为什么 C# 默认将方法视为非虚函数？是否更有可能是性能问题而不是其他可能的结果？

我想起了阅读 Anders Hejlsberg 的一段关于现有架构带来的几个优点的段落。但是，副作用呢？默认情况下使用非虚拟方法真的是一个很好的权衡吗？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2009-05-02T14:31:11.803

应该为继承*设计*类以便能够利用它。默认情况下拥有方法`virtual`意味着类中的每个函数都可以被插入并被另一个函数替换，这并不是一件好事。许多人甚至认为类应该是`sealed`默认的。

`virtual`方法也可能对性能产生轻微影响。然而，这不太可能是主要原因。

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2010-06-18T11:23:02.417

我很惊讶这里似乎有这样的共识，即默认情况下非虚拟是做事的正确方法。我要站在栅栏的另一边——我认为是务实的。

大多数理由对我来说就像古老的“如果我们给你权力，你可能会伤害自己”的论点。来自程序员？！

在我看来，那些没有足够知识（或没有足够时间）来设计他们的库以实现继承和/或可扩展性的编码器正是那个产生了我可能不得不修复或调整的库的编码器——正是覆盖能力最有用的库。

我不得不编写丑陋、绝望的变通代码（或放弃使用并推出我自己的替代解决方案）的次数，因为我无法覆盖远远超过我被咬的次数（例如在 Java 中）通过覆盖设计者可能没有考虑到的地方。

Non-virtual-by-default 让我的生活更加艰难。

**更新：**有人指出[非常正确]我实际上并没有回答这个问题。所以 - 很抱歉迟到了....

我有点希望能够写一些精辟的东西，比如“C# 默认将方法实现为非虚拟的，因为做出了一个错误的决定，它比程序员更重视程序”。（我认为基于这个问题的其他一些答案，这在某种程度上是合理的——比如性能（过早的优化，有人吗？），或者保证类的行为。）

但是，我意识到我只是在陈述我的观点，而不是 Stack Overflow 想要的明确答案。当然，我认为，在最高级别上，明确的（但无益的）答案是：

默认情况下它们是非虚拟的，因为语言设计者需要做出决定，这就是他们选择的。

现在我猜他们做出这个决定的确切原因我们永远不会......哦，等等！ [谈话记录！](http://www.artima.com/intv/nonvirtual.html)

因此，这里关于重写 API 的危险和显式设计继承的需要的答案和评论似乎都在正确的轨道上，但都缺少一个重要的时间方面：Anders 的主要关注点是维护一个类或 API 的隐式*跨版本*合同。而且我认为他实际上更关心的是允许 .Net / C# 平台在代码下进行更改，而不是关心用户代码在平台之上的更改。（而他的“务实”观点与我的完全相反，因为他从另一边看。）

（但他们不能只是默认选择虚拟，然后在代码库中添加“final”吗？也许这不完全一样……而且 Anders 显然比我聪明，所以我就让它撒谎吧。）

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2009-05-02T14:35:35.867

因为很容易忘记一个方法可能会被覆盖而不是为此而设计。C# 让您在将其变为虚拟之前进行思考。我认为这是一个伟大的设计决定。有些人（例如 Jon Skeet）甚至说默认情况下应该密封类。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2009-05-02T14:41:39.063

总结其他人所说的，有几个原因：

**1-**在 C# 中，语法和语义中有很多东西直接来自 C++。C++ 中默认非虚拟的方法影响了 C#。

**2-**默认情况下每个方法都是虚拟的，这是一个性能问题，因为每个方法调用都必须使用对象的虚拟表。此外，这极大地限制了即时编译器内联方法和执行其他类型优化的能力。

**3-**最重要的是，如果默认情况下方法不是虚拟的，则可以保证类的行为。当它们默认为虚拟时，例如在 Java 中，您甚至不能保证一个简单的 getter 方法会按预期执行，因为它可以被覆盖以在派生类中执行任何操作（当然，您可以并且应该使方法和/或类final）。

正如 Zifre 所提到的，人们可能想知道为什么 C# 语言没有更进一步，默认情况下使类密封。这是关于实现继承问题的整个辩论的一部分，这是一个非常有趣的话题。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-05-02T14:29:40.543

C# 受 C++（以及更多）的影响。C++ 默认不启用动态调度（虚函数）。对此的一个（好？）论据是问题：“您多久实现一次属于类层次结构的类？”。避免默认启用动态调度的另一个原因是内存占用。没有指向[虚拟表](http://en.wikipedia.org/wiki/Virtual_table)的虚拟指针 (vpointer) 的类当然比启用后期绑定的相应类小。

性能问题不是那么容易说“是”或“不是”的。其原因是即时 (JIT) 编译，它是 C# 中的运行时优化。

[另一个关于“虚拟通话速度..](https://stackoverflow.com/questions/676915/speed-of-virtual-call-in-c-vs-c) ”的类似问题

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-05-02T14:46:27.260

原因很简单，除了性能成本外，还有设计和维护成本。与非虚拟方法相比，虚拟方法具有额外的成本，因为类的设计者必须计划当该方法被另一个类覆盖时会发生什么。如果您期望特定方法更新内部状态或具有特定行为，这会产生很大影响。您现在必须计划派生类更改该行为时会发生什么。在这种情况下编写可靠的代码要困难得多。

使用非虚拟方法，您可以完全控制。任何错误都是原作者的错。代码更容易推理。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-02T20:10:47.307

如果所有 C# 方法都是虚拟的，那么 vtbl 会大得多。

只有在类定义了虚拟方法时，C# 对象才具有虚拟方法。的确，所有对象都具有包含等效 vtbl 的类型信息，但如果没有定义虚拟方法，则将仅存在基本 Object 方法。

@Tom Hawtin：说 C++、C# 和 Java 都来自 C 语言家族可能更准确:)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-10-28T21:21:59.957

来自 perl 背景，我认为 C# 让每个可能想要通过非虚拟方法扩展和修改基类行为的开发人员的厄运，而不会迫使新类的所有用户意识到潜在的幕后细节。

考虑 List 类的 Add 方法。如果开发人员想要在“添加”特定列表时更新几个潜在数据库之一怎么办？如果默认情况下“添加”是虚拟的，则开发人员可以开发一个覆盖“添加”方法的“BackedList”类，而无需强制所有客户端代码知道它是“BackedList”而不是常规“List”。出于所有实际目的，“BackedList”可以被视为客户端代码中的另一个“列表”。

从可能提供对一个或多个列表组件的访问的大型主类的角度来看，这是有道理的，这些组件本身由数据库中的一个或多个模式支持。鉴于默认情况下 C# 方法不是虚拟的，因此主类提供的列表不能是简单的 IEnumerable 或 ICollection 甚至是 List 实例，而是必须将其作为“BackedList”广告给客户端，以确保新版本调用“添加”操作以更新正确的架构。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-02T14:47:46.773

这当然不是性能问题。Sun 的 Java 解释器使用相同的代码来分派（`invokevirtual`字节码），HotSpot 无论是否生成完全相同的代码`final`。我相信所有 C# 对象（但不是结构）都有虚拟方法，所以你总是需要`vtbl`/runtime 类标识。C#是“类Java语言”的一种方言。说它来自 C++ 并不完全诚实。

有一种想法是您应该“为继承而设计，否则就禁止它”。这听起来像是一个好主意，直​​到您有一个严重的业务案例需要快速修复。也许从您无法控制的代码继承。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-10T00:32:11.593

表现。

想象一组覆盖虚拟基方法的类：

```
class Base {
   public virtual int func(int x) { return 0; }
}

class ClassA: Base {
   public override int func(int x) { return x + 100; }
}

class ClassB: Base {
   public override int func(int x) { return x + 200; }
} 
```

现在假设您要调用该`func`方法：

```
 Base foo;
   //...sometime later...
   int x = foo.func(42); 
```

看看 CPU 实际要做的事情：

```
 mov   ecx, bfunc$ -- load the address of the "ClassB.func" method from the VMT
    push  42          -- push the 42 argument
    call  [eax]       -- call ClassB.func 
```

## 没问题？没问题！

组装并不难理解：

1.  `mov ecx, foo$`：这需要进入内存，并命中对象的虚拟方法表（VMT）的一部分以获取覆盖`foo`方法的地址。CPU 将开始从内存中获取数据，然后继续：
2.  `push 42`：将参数压`42`入堆栈以调用函数。没问题，可以马上运行，然后我们继续：
3.  `call [ecx]`调用`ClassB.func`函数的地址。← !!!

那是个问题。`ClassB.func`尚未从 VMT 中获取函数的地址。这意味着 CPU 不知道下一步要去哪里。理想情况下，它会跟随 a`jump`并在等待`ClassB.func`从内存中返回的地址时继续执行指令。但它不能；所以我们等待。

如果幸运的话：数据已经在 L2 缓存中。将值从 L2 缓存中取出到可以使用的地方需要 12-15 个周期。CPU 不知道接下来要去哪里，而不必等待内存 12-15 个周期。

# ℂℙ -

我们的程序在 12-15 个周期内无所事事。

CPU 内核有 7 个执行引擎。CPU 的主要工作是让这 7 条管道充满要做的事情。这意味着：

*   将您的机器代码 JIT 转换为不同的顺序
*   尽快开始从内存中提取，让我们继续做其他事情
*   提前执行 100、200、300 条指令。它将在您的循环中提前执行 17 次迭代，跨越多个函数调用和返回
*   它有一个分支预测器来尝试*猜测*比较会走哪条路，这样它就可以在我们等待的同时继续执行。如果它猜错了，那么它必须撤消所有这些工作。但是分支预测器并不愚蠢——94% 的时间都是正确的。

您的 CPU 拥有所有这些功能和能力，而且它只是停滞了 15 个周期！？

这太可怕了。这真糟糕。**每次**调用方法时都会受到这种惩罚`virtual`——不管你是否真的覆盖了它。

我们的程序**每次**方法调用都慢了 12-15 个周期，因为语言设计者让虚拟方法选择退出而不是选择加入。

这就是微软决定不让所有方法默认为虚拟的原因：他们从 Java 的错误中吸取了教训。

# 有人将Android移植到C#，而且速度更快

2012 年，Xamarin 人将所有 Android 的 Dalvik（即 Java）移植到 C#。从[他们那里：](https://archive.is/sgA4J#selection-255.0-259.147)

> # 表现
> 
> 当 C# 出现时，Microsoft 以几种重要的方式修改了该语言，使其更易于优化。引入了值类型以允许小对象具有较低的开销**，并且虚拟方法被选择加入，而不是选择退出，这使得更简单的 VM。**

*（强调我的）*

# jsp - jsp中如何查看登录信息

> ID：814935
> 
> 赞同：0
> 
> 时间：2009-05-02T14:28:17.770
> 
> 标签：jsp

这是我第一次使用jsp，我遇到了一些问题。

如果我有两种类型的登录，我想知道如何检查登录。例如，我有学生和教授。当任何人登录时，它应该检查是学生还是教授将她转发到正确的页面，即：学生应该去take_quiz.jsp页面，教授应该去add_quiz.jsp页面。

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-03T13:50:41.457

您可以使用两种方式：

1-

使用 (IF Else) 作为您的示例

如果（此 ID 的密码 =“学生”表中的密码）然后将他转发到 Take_Quze.pjs 否则（如果（此 ID 的密码 =“教授”表中的密码）然后将他转发到 proffesor.jsp 否则输入错误消息）/ /结束其他

但这不是有效的方式。

--

2- 另一种方法是为学生和教授使用单独的登录表单，在 JSP 中，您可以使用两个目录，例如 /professor/logi.jsp 用于教授和 /Student/login.jsp 用于学生..

就这样.. ：）

# c# - 从 MS-Word ApplicationClass 获取 PID？

> ID：814936
> 
> 赞同：15
> 
> 时间：2009-05-02T14:28:58.080
> 
> 标签：c#, ms-word, pid

考虑这段代码：

```
using Microsoft.Office.Interop.Word;

ApplicationClass _application = new ApplicationClass(); 
```

我可以从 _application 启动的 Winword.exe 进程中获取 PID 吗？

我需要 PID，因为文件损坏，即使使用以下代码，我也无法退出 ApplicationClass：

```
_application.Quit(ref saveFile, ref missing, ref missing);
System.Runtime.InteropServices.Marshal.ReleaseComObject(_application);
GC.Collect();
GC.WaitForPendingFinalizers(); 
```

我无法搜索winword.exe进程并杀死它，因为我会有几个，我不知道要杀死哪个。如果我可以为每个 ApplicationClass 获得一个 PID，我就可以杀死正确的 winword.exe 进程，这让我很难退出。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2011-07-01T09:42:29.533

这是如何做到的。

```
//Set the AppId
string AppId = ""+DateTime.Now.Ticks(); //A random title

//Create an identity for the app

this.oWordApp = new Microsoft.Office.Interop.Word.ApplicationClass();
this.oWordApp.Application.Caption = AppId;
this.oWordApp.Application.Visible = true;

while (GetProcessIdByWindowTitle(AppId) == Int32.MaxValue) //Loop till u get
{
    Thread.Sleep(5);
}

///Get the pid by for word application
this.WordPid = GetProcessIdByWindowTitle(AppId);

///You canh hide the application afterward            
this.oWordApp.Application.Visible = false;

/// <summary>
/// Returns the name of that process given by that title
/// </summary>
/// <param name="AppId">Int32MaxValue returned if it cant be found.</param>
/// <returns></returns>
public static int GetProcessIdByWindowTitle(string AppId)
{
   Process[] P_CESSES = Process.GetProcesses();
   for (int p_count = 0; p_count < P_CESSES.Length; p_count++)
   {
        if (P_CESSES[p_count].MainWindowTitle.Equals(AppId))
        {
                    return P_CESSES[p_count].Id;
        }
   }

    return Int32.MaxValue;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-08-03T14:32:34.967

Word 文件中可能有一些错误。结果，当您使用 方法打开文件时`Word.ApplicationClass.Documents.Open()`，将显示一个对话框并且该过程将挂起。

改为使用`Word.ApplicationClass.Documents.OpenNoRepairDialog()`。我发现它解决了问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-02T15:10:18.933

获取它的常用方法是将 Word 的标题更改为独特的名称，然后在顶层窗口列表中跳转，直到找到它 (EnumWindows)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-09-08T07:25:44.347

[http://www.codekeep.net/snippets/7835116d-b254-466e-ae66-666e4fa3ea5e.aspx](http://www.codekeep.net/snippets/7835116d-b254-466e-ae66-666e4fa3ea5e.aspx)

```
///Return Type: DWORD->unsigned int
///hWnd: HWND->HWND__*
///lpdwProcessId: LPDWORD->DWORD*
[System.Runtime.InteropServices.DllImportAttribute( "user32.dll", EntryPoint = "GetWindowThreadProcessId" )]
public static extern int GetWindowThreadProcessId ( [System.Runtime.InteropServices.InAttribute()] System.IntPtr hWnd, out int lpdwProcessId );

private int _ExcelPID = 0;
Process _ExcelProcess;

private Application _ExcelApp = new ApplicationClass();
GetWindowThreadProcessId( new IntPtr(_ExcelApp.Hwnd), out _ExcelPID );
_ExcelProcess = System.Diagnostics.Process.GetProcessById( _ExcelPID );

...

_ExcelProcess.Kill(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-03-18T19:12:14.693

最后，我想出了解决用户“名称”锁定文件的方法，而word文档没有被用户打开，但是我们的程序会在后台进程中产生空白标题，我们也可以在后台杀死那些虚拟的WINWORD。

[![在此处输入图像描述](https://i.stack.imgur.com/T6oQJ.png)](https://i.stack.imgur.com/T6oQJ.png)

[![在此处输入图像描述](https://i.stack.imgur.com/cgS3G.png)](https://i.stack.imgur.com/cgS3G.png)

通过这段代码，我们不需要使用**ReleaseComObject(_application)**我真的不知道这是一个好主意，因为当我重新打开该文件时，第一次发布看不到文档的任何内容，至少需要关闭并再次打开。

```
 public static void KillProcessBlankMainTitle(string name) // WINWORD
    {
        foreach (Process clsProcess in Process.GetProcesses())
        {

            if (Process.GetCurrentProcess().Id == clsProcess.Id)
                continue;
            if (clsProcess.ProcessName.Equals(name))
            {
                if(clsProcess.MainWindowTitle.Equals(""))
                    clsProcess.Kill();
            }
        }
    } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-07-31T04:56:31.953

在我们的街道上迎来了假期！“Word”从我这里喝了多少血……

获取 PID 的方法有哪些：

1.  获取进程列表，运行 WORD，获取进程列表，其中将是所需的进程。缺点如果多线程，那就是大问题了！！！
2.  通过安装一个唯一的窗口名称。“Bing”先生给Guid带来了一个好主意。缺点是Windows操作系统的一个特性，如果进程生成的窗口没有显示属性，进程就会失去Title属性，会为空。即，要么 wordApp.Visible = true 必须始终如此。要么我们做真的​​，表演魔术，然后再做假。
3.  您可以通过打开文档的窗口获取Hwnd！正如其中一条消息所建议的那样[https://stackoverflow.com/a/59146157/4143902](https://stackoverflow.com/a/59146157/4143902) 缺点是您需要暂时创建一个不可见的文档窗口并获取 Hwnd，关闭它并继续工作。最佳选择。

例子：

```
// Setting up the environment
app.Visible = false;
app.DisplayAlerts = Word.WdAlertLevel.wdAlertsNone;
app.AutomationSecurity = Microsoft.Office.Core.MsoAutomationSecurity.msoAutomationSecurityForceDisable;
app.ScreenUpdating = false;

// The interface is a collection of documents
Word.Documents docs = app.Documents;

// Getting the window handle
Word.Document trashDoc = docs.Add();
Word.Window wind = trashDoc.ActiveWindow;
// Converting the handle to the process id
int intProcId;
GetWindowThreadProcessId(wind.Hwnd, out intProcId);
// If we want multithreading, we store the dictionary task - >window id
lock (objWorkThreadLock)
{
    if (dictThread.ContainsKey(idTask)) dictThread[idTask] = intProcId;
}
trashDoc.Saved = true;
trashDoc.Close(Word.WdSaveOptions.wdDoNotSaveChanges, Type.Missing, Type.Missing);
if (trashDoc != null) Marshal.ReleaseComObject(trashDoc);
if (wind != null) Marshal.ReleaseComObject(trashDoc);

// Work further
Word.Document doc = null;
doc = docs.OpenNoRepairDialog( ... )

...

[DllImport("user32.dll")]
public static extern int GetWindowThreadProcessId(int hWnd, out int lpdwProcessId);

public void Killing(int intProcId)
{
    if (intProcId != 0)
    {
        try
        {
            Process proc = Process.GetProcessById(intProcId);
            proc.Kill();
        }
        catch (Exception ex)
        {
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-02T14:42:11.903

不，很遗憾，无法将 ApplicationClass 的实例与 Word 的运行进程相关联。

为什么需要杀死 Word 的实例？难道您不能要求它关闭所有文档，然后停止使用该实例吗？如果您最终删除对该类的所有引用，[GC](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)将启动并关闭[COM](http://en.wikipedia.org/wiki/Component_Object_Model)服务器。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-02-07T09:41:37.203

在启动应用程序之前，列出所有正在运行的 Word 进程，启动应用程序，然后再次列出正在运行的 Word 进程。在第二个列表中找到但在第一个列表中没有找到的过程是正确的：

```
var oPL1 = from proc in Process.GetProcessesByName("WINWORD") select proc.Id;
var app = new Word.Application();

var oPL2 = from proc in Process.GetProcessesByName("WINWORD") select proc.Id;
var pid = (from p in oPL2 where !oPL1.Contains(p) select p).ToList()[0]; 
```

该方法有明显的时间问题，但它是我发现的唯一一种在大多数情况下都能可靠工作的方法。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-04-22T10:13:48.563

```
 public void OpenWord(string Path, bool IsVisible)
    {

        MessageFilter.Register();
        object oMissing = Missing.Value;
        GUIDCaption = Guid.NewGuid().ToString();
        wordApp = new Microsoft.Office.Interop.Word.ApplicationClass();
        wordApp.Visible = IsVisible;
        wordApp.Caption = GUIDCaption;
        object oPath = Path;
        wordDoc = wordApp.Documents.Open(ref  oPath, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing);

    }
    /// <summary>
    /// 关闭文件
    /// </summary>
    public void CloseWord()
    {
        object oMissing = Missing.Value;
        GUIDCaption = "";
        if (null != wordDoc)
        {
            wordDoc.Close(ref oMissing, ref oMissing, ref oMissing);
        }
        if (null != wordApp)
        {
            wordApp.Quit(ref oMissing, ref oMissing, ref oMissing);
        }
        MessageFilter.Revoke();
        GC.Collect();
        KillwordProcess();

    }
    /// <summary>
    /// 结束word进程
    /// </summary>
    public void KillwordProcess()
    {
        try
        {
            Process[] myProcesses;
            //DateTime startTime;
            myProcesses = Process.GetProcessesByName("WINWORD");

            //通过进程窗口标题判断
            foreach (Process myProcess in myProcesses)
            {
                if (null != GUIDCaption && GUIDCaption.Length > 0 && myProcess.MainWindowTitle.Equals(GUIDCaption))
                {
                    myProcess.Kill();
                }
            }
            MessageFilter.Revoke();
        }
        catch (Exception e)
        {
            throw e;
        }
    } 
```

# php - php xpath - 获取节点位置

> ID：814943
> 
> 赞同：0
> 
> 时间：2009-05-02T14:35:15.930
> 
> 标签：php

我有以下精简的php代码......

```
foreach ($xpath->query('/html/body//a')} as $queryitem) {
   $nodeposition = ???;
   $parentposition = ???;
} 
```

...从这里可以找到每个节点的位置及其父节点的位置吗？

例如：

`0..<html>`
`1....<head>`
`2......<title>`
`3......<meta>`
`4......<meta>`
`5....<body>`
`6......<div>`
`7........<a>`

这将为每个标签生成一种 ID 以及它所连接的父标签的 ID。

所以结果将是 = 0|,1|0,2|1,3|1,4|1,5|0,6|5,7|6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T10:15:10.140

如果“位置”是指先前节点的数量（正如您在样本中暗示的那样），那么这将起作用（可能不是一流的效率，但尽管如此）：

```
foreach ($xpath->query('/html/body//a') as $queryitem) {
   $nodeposition = count($xpath->query('preceding::*', $queryitem));

   $parent = $xpath->query('parent::*', $queryitem);
   if ($parent->length == 1)
     $parentposition = count($xpath->query('preceding::*', $parent->item(0)));
   else
     $parentposition = -1; // or whatever
} 
```

未经测试，但你明白了。

另一种方法是编写一个 XSLT 身份转换，将位置作为属性添加到文档中的所有节点。然后，您可以读取 PHP 代码中的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T21:08:27.997

我不相信您将能够在 dom 中获得位置（读取 xpath），除非您自己进行一些花哨的编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T07:05:27.983

您需要了解完整的 DOM 树才能解决此问题。但是使用 XPath，您只会获得与路径匹配的某些子树。您需要逐个向上遍历树并检索与 XPath 匹配的每个元素的信息。但这可能效率低下。如果您从根向下遍历树并计算节点数，可能会更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T04:10:00.297

在 PHP 中处理 XML 的最简单方法是使用[SimpleXML](http://nl2.php.net/simplexml)类并使用 Children 属性进行循环。见[http://nl2.php.net/manual/en/function.simplexml-element-children.php](http://nl2.php.net/manual/en/function.simplexml-element-children.php)

# javascript - 在浏览器中寻找可定制的语法高亮

> ID：814949
> 
> 赞同：2
> 
> 时间：2009-05-02T14:40:22.343
> 
> 标签：javascript, syntax-highlighting

我正在寻找一个可自定义的 JavaScript 脚本，它可以动态突出显示块中的代码，例如

<code class="someclass">源代码...</code>

它需要可定制，因为源代码是一种非常深奥的编程语言（Mozart/Oz）。理想情况下，我只需编辑一些正则表达式以使其工作。

我需要动态突出显示，因为它应该在 github wiki 中工作，它会在 pre 标记中转义所有 HTML 代码。

到目前为止，我的 Google fu 已经抛弃了我……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T14:43:17.343

[SyntaxHighlighter](http://code.google.com/p/syntaxhighlighter/)可能是您正在寻找的。它也支持自定义语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-07-29T04:07:08.767

[jQuery Syntax Highlighter](http://www.balupton.com/projects/jquery-syntaxhighlighter/)是基于[Alex Gorbatchev 的 Syntax Highlighter](http://alexgorbatchev.com/SyntaxHighlighter/)第 3 版的新产品- 一个非常非常流行的纯 JavaScript 语法高亮器。

它支持`code`和`pre`块之类的东西，能够使用类名`language-javascript`来表示我们希望它突出显示，以及自动换行。您可以通过正常选择来复制和粘贴代码，而不必像许多其他人一样打开原始视图。它可以通过使用 HTML5 数据属性`data-sh`或通过在初始化时指定选项来进一步定制。定期更新的绝佳稳定选择。

# winapi - 自动换行 Win32

> ID：814954
> 
> 赞同：0
> 
> 时间：2009-05-02T14:43:02.743
> 
> 标签：winapi, word-wrap

我正在尝试对一段文本进行自动换行，以便在否则会太长的窗口中显示。我使用的字体不是固定宽度的字体，因此 GetSystemMetrics 不会为我的文本返回准确的值。

在这里使用`static`窗口不是一个选项，因为`static`窗口不会告诉我一个重要的信息：自动换行后绘制的文本的高度。

有任何想法吗？

比利3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-02T14:50:11.540

查看 Win32 API 调用[DrawtextEx](http://msdn.microsoft.com/en-us/library/dd162499(VS.85).aspx)。您需要传递**DT_CALCRECT**选项，告诉 Windows 您希望计算矩形。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-02T14:48:49.780

您可以使用设置了*DT_CALCRECT*标志的[*DrawText()*](http://msdn.microsoft.com/en-us/library/dd162498(VS.85).aspx) API 函数。您需要先为 HDC 选择正确的字体。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-07T16:36:58.573

`DrawTextEx()`如果要以单一字体显示整个文本，它将完成您想要和需要的一切。

如果您需要混合字体，则必须自己完成工作。在这种情况下，您需要查看`GetTextMetrics()`(not `GetSystemMetrics()`)之类的 API `GetTextExtentExPoint32()`，并确定每次运行的位置和大小。

如果您需要处理复杂的脚本（例如，从右到左的语言和字母根据上下文改变形状的脚本），您将需要 Uniscribe。注意：Uniscribe 功能强大但级别很低。用更高级别的接口包装它可能需要做很多工作。如果您需要复杂的脚本处理，最好使用浏览器控件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-26T11:47:39.233

两者都`DrawText()`可以`DrawTextEx()`做到这一点。关键是`DT_WORDBREAK`在`format`参数中使用。

要在顶部的 100 x 100 矩形内绘制文本，可以使用以下任一方法：

```
 RECT textRect;
    SetRect(&textRect, 0, 0, 100, 100);
    DrawText(hdc,TEXT("THIS IS TEXT THAT WILL PROBABLY WRAP AROUND A 100 BY 100 RECTANGLE. BUT YOU CAN'T BE SURE UNLESS YOU TRY."),-1,&textRect, DT_LEFT | DT_NOCLIP | DT_WORDBREAK); 
```

该`DT_LEFT`选项将句子向左对齐。`DT_NOCLIP`确保文本不会在底部被剪切。

或者

使用`DrawTextEx()`：

```
 RECT textRect;
    SetRect(&textRect, 0, 0, 100,100);
    DrawTextEx(hdc,(LPSTR)TEXT("THIS IS TEXT THAT WILL PROBABLY WRAP AROUND A 100 BY 100 RECTANGLE. BUT YOU CAN'T BE SURE UNLESS YOU TRY."), -1, &textRect, DT_LEFT| DT_NOCLIP|DT_WORDBREAK , NULL); 
```

# javascript - 将脚本添加到 html 页面的 firefox 扩展

> ID：814958
> 
> 赞同：0
> 
> 时间：2009-05-02T14:44:48.417
> 
> 标签：javascript, html, firefox, scripting, firefox-addon

我在询问使用 javascript 将脚本添加到 Firefox 中的 html 选项卡。我想避免使用greasemonkey。有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T17:07:53.253

您可以使用 GreaseMonkey，然后使用[GreaseMonkey 编译器](http://arantius.com/misc/greasemonkey/script-compiler)将脚本转换为扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T17:15:21.940

您还可以将书签用于开发目的。像 http://www.learningjquery.com/2008/06/updated-jquery-bookmarklet之类的[东西](http://www.learningjquery.com/2008/06/updated-jquery-bookmarklet)，虽然谷歌搜索会带来许多其他的好东西。（ps。为什么stackoverflow用橙色突出新东西，我觉得我更喜欢黄色（浅色）。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T19:51:55.667

虽然我不知道这是否是 OP 的意图，但在 GreaseMonkey 中无法执行某些操作（例如，写入磁盘）。

（三年前，当我这样做时，对通用汽车进行了一次微不足道的改变，绕过了这些限制。）

# c# - 从文件中搜索特定数据

> ID：814960
> 
> 赞同：1
> 
> 时间：2009-05-02T14:47:23.997
> 
> 标签：c#

我有一个包含文本和少量数字的文件。我只想从中提取数字。我该怎么做？

我尝试使用所有拆分的东西，但到目前为止没有运气。我的文件是这样的：

*AT+CMGL="ALL" +CMGL: 5566,"REC READ","Ufone" 尊敬的客户，您的 DAY_BUCKET 订阅将于 2009 年 2 月 5 日到期 +CMGL: 5565,"REC READ","+923466666666"*

**请告诉我从该文件中提取 +923466666666 等数字的方法，以便我可以将它们放入另一个文件或文本框中。**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T14:53:08.193

如果数字都在行尾，那么您可以使用如下代码

```
foreach ( string line in File.ReadAllLines(@"c:\path\to\file.txt") ) {
  Match result = Regex.Match(line, @"\+(\d+)""$");
  if ( result.Success ) { 
    var number = result.Groups[1].Value;
    // do what you want with the number
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-02T17:58:32.180

这是一个使用 String.Split 的示例。“数字”包含一个“+”，因此实际上它应该被视为字符串而不是数字。我假设它是一个带有“+”的电话号码，可能用于国际电话？如果是电话号码，您需要注意破折号、号码中的空格以及添加到末尾的分机号码，例如“+9234 666-66666 ext 235”等等......

无论如何 - 希望这个例子对掌握拆分有用。

代码包括使用 NUnit v2.4.8 的单元测试

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using NUnit.Framework;
using System.Text.RegularExpressions;

namespace SO.NumberExtractor.Test
{
    public class NumberExtracter
    {
        public List<string> ExtractNumbers(string lines)
        {
            List<string> numbers = new List<string>();
            string[] seperator = { System.Environment.NewLine };
            string[] seperatedLines = lines.Split(seperator, StringSplitOptions.RemoveEmptyEntries);

            foreach (string line in seperatedLines)
            {
                string s = ExtractNumber(line);
                numbers.Add(s);
            }

            return numbers;
        }

        public string ExtractNumber(string line)
        {
            string s = line.Split(',').Last<string>().Trim('"');
            return s;
        }

        public string ExtractNumberWithoutLinq(string line)
        {
            string[] fields = line.Split(',');
            string s = fields[fields.Length - 1];
            s = s.Trim('"');

            return s;
        }
    }

    [TestFixture]
    public class NumberExtracterTest
    {
        private readonly string LINE1 = "AT+CMGL=\"ALL\" +CMGL: 5566,\"REC READ\",\"Ufone\" Dear customer, your DAY_BUCKET subscription will expire on 02/05/09 +CMGL: 5565,\"REC READ\",\"+923466666666\"";
        private readonly string LINE2 = "AT+CMGL=\"ALL\" +CMGL: 5566,\"REC READ\",\"Ufone\" Dear customer, your DAY_BUCKET subscription will expire on 02/05/09 +CMGL: 5565,\"REC READ\",\"+923466666667\"";
        private readonly string LINE3 = "AT+CMGL=\"ALL\" +CMGL: 5566,\"REC READ\",\"Ufone\" Dear customer, your DAY_BUCKET subscription will expire on 02/05/09 +CMGL: 5565,\"REC READ\",\"+923466666668\"";

        [Test]
        public void ExtractOneLineWithoutLinq()
        {            
            string expected = "+923466666666";

            NumberExtracter c = new NumberExtracter();
            string result = c.ExtractNumberWithoutLinq(LINE1);

            Assert.AreEqual(expected, result);            
        }

        [Test]
        public void ExtractOneLineUsingLinq()
        {
            string expected = "+923466666666";

            NumberExtracter c = new NumberExtracter();
            string result = c.ExtractNumber(LINE1);

            Assert.AreEqual(expected, result);
        }

        [Test]
        public void ExtractMultipleLines()
        {
            StringBuilder sb = new StringBuilder();
            sb.AppendLine(LINE1);
            sb.AppendLine(LINE2);
            sb.AppendLine(LINE3);

            NumberExtracter ne = new NumberExtracter();
            List<string> extractedNumbers = ne.ExtractNumbers(sb.ToString());

            string expectedFirst = "+923466666666";
            string expectedSecond = "+923466666667";
            string expectedThird = "+923466666668";

            Assert.AreEqual(expectedFirst, extractedNumbers[0]);
            Assert.AreEqual(expectedSecond, extractedNumbers[1]);
            Assert.AreEqual(expectedThird, extractedNumbers[2]);
        }
    } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-02T14:51:21.240

文件有多大？如果文件小于几兆字节，我建议将文件内容加载到字符串中并使用编译的正则表达式来提取匹配项。

这是一个简单的例子：

```
 Regex NumberExtractor = new Regex("[0-9]{7,16}",RegexOptions.Compiled);

    /// <summary>
    /// Extracts numbers between seven and sixteen digits long from the target file.
    /// Example number to be extracted: +923466666666
    /// </summary>
    /// <param name="TargetFilePath"></param>
    /// <returns>List of the matching numbers</returns>
    private IEnumerable<ulong> ExtractLongNumbersFromFile(string TargetFilePath)
    {

        if (String.IsNullOrEmpty(TargetFilePath))
            throw new ArgumentException("TargetFilePath is null or empty.", "TargetFilePath");

        if (File.Exists(TargetFilePath) == false) 
            throw new Exception("Target file does not exist!");

        FileStream TargetFileStream = null;
        StreamReader TargetFileStreamReader = null; 
        string FileContents = "";
        List<ulong> ReturnList = new List<ulong>();

        try
        {
            TargetFileStream = new FileStream(TargetFilePath, FileMode.Open);
            TargetFileStreamReader = new StreamReader(TargetFileStream);
            FileContents = TargetFileStreamReader.ReadToEnd();

            MatchCollection Matches = NumberExtractor.Matches(FileContents);

            foreach (Match CurrentMatch in Matches) {
                ReturnList.Add(System.Convert.ToUInt64(CurrentMatch.Value));
            }

        }
        catch (Exception ex)
        {
            //Your logging, etc...
        }
        finally
        {
            if (TargetFileStream != null) {
                TargetFileStream.Close();
                TargetFileStream.Dispose();
            }

            if (TargetFileStreamReader != null)
            {
                TargetFileStreamReader.Dispose();
            }
        }

        return (IEnumerable<ulong>)ReturnList;

    } 
```

样品用法：

```
List<ulong> Numbers = (List<ulong>)ExtractLongNumbersFromFile(@"v:\TestExtract.txt"); 
```

# java - 创建数组问题。请帮忙

> ID：814965
> 
> 赞同：0
> 
> 时间：2009-05-02T14:48:53.260
> 
> 标签：java, generics, linked-list

> **Dupe：** [数组的 Java 泛型语法](https://stackoverflow.com/questions/185594/java-generics-syntax-for-arrays)

我想创建一个数组来保存 Integer 类型的链表。

```
import java.util.LinkedList;

public class Test {

    public static void main(String [] args){

        LinkedList<Integer> [] buckets = new LinkedList<Integer>[10];       

    }
} 
```

我收到一条错误消息：无法创建 LinkedList 的通用数组

为什么是这样？能解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-02T14:50:36.000

泛型和 ye olde 数组相处得并不好（这个主题已经被完成了很多次，在这里和其他地方）。使用列表的（数组）列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-02T14:56:28.373

你可以用另一种列表类型包装它，例如：

```
ArrayList<LinkedList<Integer>> buckets = new ArrayList<LinkedList<Integer>>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-02T15:37:01.397

尝试

```
List<Integer> [] buckets = new LinkedList[10]; 
```

我不知道为什么 Java 不允许在数组上使用泛型，因为您可以将泛型放在右侧（尽管这样会给出未经检查的警告）

# php - PHP 货币正则表达式

> ID：814973
> 
> 赞同：4
> 
> 时间：2009-05-02T14:53:23.403
> 
> 标签：php, regex, format, numbers

我正在尝试找到一段正则表达式来匹配货币值。

我只想匹配数字和 1 个小数点，即

**允许**

*   10
*   100
*   100.00

**不允许**

*   字母字符
*   100,00
*   +/- 100

我已经搜索并尝试了很多，但没有任何运气。

希望你能给点建议

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-02T18:31:20.150

```
if (preg_match('/^[0-9]+(?:\.[0-9]+)?$/', $subject))
{
    # Successful match
}
else
{
    # Match attempt failed
} 
```

**旁注**：如果要限制所需的小数位数，可以执行以下操作：

```
/^[0-9]+(?:\.[0-9]{1,3})?$/im 
```

所以

```
100.000 
```

将匹配，而

```
100.0001 
```

惯于。

如果您需要任何进一步的帮助，请发表评论。

**PS**如果可以，请使用上面发布的数字格式化程序。原生函数总是更好（更快），否则这个解决方案会很好地为您服务。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T05:45:45.073

这个怎么样

```
if (preg_match('/^\d+(\.\d{2})?$/', $subject))
{
   // correct currency format
} else {
  //invalid currency format
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-02T15:32:13.327

您可能需要考虑使用正则表达式的其他替代方法。

例如，有一个[`NumberFormatter`](http://php.net/manual/en/class.numberformatter.php)类，它提供灵活的数字和货币[解析](http://php.net/manual/en/numberformatter.parsecurrency.php)和[格式化](http://php.net/manual/en/numberformatter.format.php)，并内置国际化支持。

它内置于 PHP 5.3 及更高版本中，可作为 PHP 5 早期版本的扩展使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-02T14:55:30.997

试试这个正则表达式：

```
^(?:[1-9]\d+|\d)(?:\.\d\d)?$ 
```

# mercurial - 无法通过 http 克隆 mercurial (hg) 存储库

> ID：814974
> 
> 赞同：5
> 
> 时间：2009-05-02T14:53:34.247
> 
> 标签：mercurial, repository, clone

我无法通过 http 克隆我的存储库：

中止：“ [http://MYREPO](http://MYREPO) ”似乎不是 hg 存储库！

首先，我通过**hg init MYREPO**创建了一个新的 repo，然后添加了一些文件并提交。

我的仓库的目录受密码保护，但没有任何问题的迹象，我尝试了两种克隆方法：（在我的本地机器上）

hg 克隆[http://MYREPO](http://MYREPO) my_repo

和

hg 克隆[http://user:password@MYREPO](http://user:password@MYREPO) my_repo

repo 目录的权限是：drwxrwxr-x

我可以在我的远程机器上克隆这个存储库（同一个存储库），没有任何问题。

什么可能是错的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-02T15:03:55.220

更新：

看起来您在存储库和主机名之间感到困惑

如果运行“hg serve”，“hg clone [http://USER@HOST:8000](http://USER@HOST:8000) ”，其中主机可以是您机器的 IP 或主机名（在 linux 上键入“主机名”或尝试“ping localhost”）。您可以通过将 --port #### 传递给 hg serve 将默认端口从 8000 更改。

如果您想通过 ssh 执行此操作，请“hg clone ssh://USER@HOST//PATH/TO/YOUR/REPOSITORY”。假设您在主目录中创建了一个名为 MYREPO 的存储库，那么您将执行以下操作：“hg clone ssh://USER@HOST/~/MYREPO”

您只能通过 http 克隆您的 repo，这是通过 http 为 repo 提供服务的东西。Mercurial 为您提供了一个内置的 http 服务器。在您的存储库中运行“hg serve”，然后尝试从另一个位置（或另一个命令外壳）克隆它。如果你只想要一个本地克隆，你不需要使用http（“hg clone”）。

此外，请尝试“hg help clone”和“hg help serve”了解详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-08-22T02:47:21.870

奇怪的是，使用 ssh 进行克隆需要一个不直观的额外正斜杠。

这适用于我在端口 43211 上运行 ssh 的主机

```
hg clone ssh://example.com:43211//repos/myRepo ./myRepo 
```

端口号后的双斜杠有效，但那里的单斜杠会导致“.hg not found”错误

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-02T15:26:38.940

besszero 是对的，但是如果您仍然要使用用户名和密码，为什么不使用 SSH 进行克隆呢？

hg clone ssh://machine_ip//your/repo/location your_repo

如果您不想为 mercurial 的 http 服务器打开另一个端口并且您不需要 hgweb 功能，那么它也更安全，流量也是加密的。唯一的缺点是您必须登录才能结帐，但 HTTP 不能用于推回更改，至少在我的经验中不是这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-02T19:41:12.200

啊...需要小心 .htaccess 配置。就我而言，我需要将“hgwebdir.cgi”添加到克隆路径中......不过感谢您的回答！

SSH 似乎是合乎逻辑的，但不知何故，我无法与本地用户以外的用户一起使用它：

hg clone ssh://MY_REMOTE_USER@MYREPO 远程：中止：这里没有 Mercurial 存储库（未找到.hg）！

# c - getch 已弃用

> ID：814975
> 
> 赞同：17
> 
> 时间：2009-05-02T14:53:35.090
> 
> 标签：c, deprecated

回到过去，我在大学里学过一些 C 和 C++，但我对 C++ 的关注并不多。现在我想关注 C++，但是当我使用该`getch()`函数时，我从下面收到警告。

> 警告 C4996：'getch'：不推荐使用此项目的 POSIX 名称。而是使用符合 ISO C++ 的名称：_getch。详细信息请参见在线帮助。

现在，我正在使用 VS 2005 express，我不知道如何处理这个警告。我需要在出现错误消息或需要按键的其他内容`getch()`后使用。`printf()`

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-05-02T14:57:35.873

Microsoft 决定不推荐使用不带下划线的名称，因为这些名称是保留给程序员选择的。如果特定于实现的扩展想要遵守 C 或 C++ 标准，则它们应该在全局命名空间中使用以下划线开头的名称——或者它们应该将自己标记为符合标准的组合环境，例如 POSIX/ANSI/ISO C，其中这样的功能则对应于这些标准之一。

也阅读[这个关于 getcwd() 的答案](https://stackoverflow.com/questions/647704/why-is-getcwd-not-iso-c-compliant/647802#647802)，以获得 PJ Plauger 的解释，他当然非常了解这些东西。

如果您只对等待用户键入的某些键感兴趣，那么真的没有理由不使用`getchar`. 但有时只是更实用、更方便用户`_getch`和朋友使用。但是，C 或 C++ 标准没有指定这些，因此会限制程序的可移植性。记住这一点。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-02T15:04:46.857

如果你喜欢 C++，为什么`printf`和`getch`？考虑使用`cout`and`cin.get`代替。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-02T19:07:27.240

使用 _getch() 而不是 getch()

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-02T15:05:53.827

正如错误所说，该名称`getch()`已被弃用（因为这是 Microsoft 特定的扩展），`_getch()`而是建议使用。我不确定 POSIX 是从哪里来的。POSIX 没有定义`getch()`，而是包含[ISO C 标准](http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf)（第 298 页，草案链接到，因为最终标准不是免费的）[`getchar()`](http://www.opengroup.org/onlinepubs/009695399/functions/getchar.html)所指定的内容。解决方案是按照建议进行操作并使用，或使用标准C。`_getch()``getchar()`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-02T14:56:25.487

你为什么需要这个？`getchar()`如果您需要捕获单个字符，为什么不使用呢？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-02T11:19:43.240

您可以使用“std::getc(stdin);”。它的工作方式类似于“getch();” 在我的程序中。我认为这是 'getch()' 的一个很好的选择如果我错了，请告诉我。

```
#include <cstdio>

switch (std::getc(stdin)) {
    case 'a':   cout << 'a' << endl ; break;
    case 'b':   cout << 'b' << endl ; break;
    default:    cout << '$' << endl; break;
} 
```

如果您在控制台上输入“a”，它会输出“a”。

# django - 这是 Google Application Engine + Django 中变量访问的错误吗？

> ID：814996
> 
> 赞同：0
> 
> 时间：2009-05-02T15:08:56.160
> 
> 标签：django, google-app-engine

最近，我发现了一个非常令人不安的问题。

我有以下python代码：

```
for cat in cats:
  cat.pages = ['apple', 'table', 'computer']

template_values = {
  'cats': cats
}

path = os.path.join(os.path.dirname(__file__), 'templates/index.html')
self.response.out.write(template.render(path, template_values)) 
```

index.html django 模板如下所示：

```
{% for cat in cats %}
   <div>{{ forloop.counter }}</div>
   <div>name: {{ cat.cat_name }}</div>
   <div>pages: {{ cat.pages|length }}<br>
{% endfor %} 
```

当我使用 GAE SDK 在本地运行上面的代码时，我得到了以下示例结果：

```
1.
name: sample1
pages: 3

2.
name: sample2
pages: 3 
```

等等。我什至可以构建一个嵌套循环，因为我可以访问循环内的 cat.pages。但是，当我将此代码上传到 AppEngine 时，我会得到以下结果：

```
1.
name: sample1
pages: 0

2.
name: sample2
pages: 0 
```

而且我什至根本无法访问 cat.pages 变量。我的代码有什么问题？或者这是一个错误？它按预期在本地工作，但在部署到 GAE 服务器后会产生这个奇怪的结果。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-02T16:22:40.820

也许尝试：

```
for cat in cats:
   for item in ['apple', 'table', 'computer']:
       cat.pages.append(item) 
```

如果 cat.pages 在 GAE 中是一个时髦的东西，比如检测列表，那么您的原始代码会用普通的 python 列表替换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-02T16:10:44.373

我认为我们将需要更多的上下文来了解问题所在。“猫”从何而来，单独的猫对象是什么？我猜它们是模型实例，但是根据您的示例很难说。如果将它们替换为一组简单的 Object 子类，它会起作用吗？这将向您显示它是否特定于您正在使用的类。

但是，一般来说，为了模板方便，将任意属性分配给您的对象是一个坏主意。您最好创建一个容器对象或字典。

# flash - as3 swc组件通过代码预览

> ID：814999
> 
> 赞同：0
> 
> 时间：2009-05-02T15:10:00.947
> 
> 标签：flash, components

我正在开发一个基于 as3 swc 的组件，它完全通过构造函数中的动作脚本填充其内容（例如 sprite.graphics.lineTo...）。当我将组件拖到舞台上时，它是空的。如果我导出我的电影，一切正常，但我还需要实时预览才能工作。我可以使用占位符图形来解决这个问题，但我更愿意将它纯粹作为代码保留。有没有办法解决这个问题？谢谢，大卫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-02T18:57:34.020

我想我知道你在说什么。

在定义了组件的库中，右键单击该项目并将其导出为 .swf。这会将所有代码和所有内容编译为该符号的 swf。

再次右键单击该项目并转到组件定义，将实时预览文件设置为您刚刚导出的 .swf。

完成此操作后，您应该能够在预览模式下看到该项目的实际外观。

我只是在 2 天前这样做，如果它不起作用，请记住让我知道。***********