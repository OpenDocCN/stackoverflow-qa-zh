# StackOverflow 问答 11802000-11802999

# python - Python 如何在没有 %s 的情况下进行字符串替换？

> ID：11802001
> 
> 赞同：1
> 
> 时间：2012-08-03T19:19:42.943
> 
> 标签：python, sql, string

查看我发现的以下 Python 2.6 代码行：

```
key = 'hire_date' 
update_dict['key'] = update_dict[key]     #added e.g. {..., 'key': '12/31/1999'}
if key == 'hire_date':
     query_string = "UPDATE employee SET " + key + "= CAST(%(key)s AS DATE) WHERE emp_id = '" + emp.employee + "'" 
```

我已经测试了这段代码，它可以工作。它成功地将数据库中员工的hire_date 字段更新为`'key'`字典中的任何 date 值。

当我注意到`%(key)s`不知何故设法获取字典的值时，我正在对其进行参数化`'key'`。它是如何做到的？我一直认为您必须`% dictionaryOrTupleOrWhatever`在字符串之后添加才能使其正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T19:21:52.933

在您粘贴的代码中，不会发生插值。但是，以后可以对变量进行插值：

```
>>> x = "%(var)s" # no interpolation yet
>>> d = {'var': 88}
>>> x % d # interpolate into the stored string
'88' 
```

鉴于您发布的代码看起来像 SQL，以后也可以通过 SQL 库调用对其进行插值。许多 SQL 接口库提供了类似的使用`%`符号的字符串替换，并鼓励用户使用这些而不是内置的字符串替换，因为 SQL 库版本具有各种保护措施来防止恶意注入攻击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T19:23:21.787

我敢打赌，您稍后会在代码中发现有一个 DB API`execute`语句`update_dict`作为参数。然后 DB API 进行替换而不是 Python 字符串格式化，从而正确处理绑定。

看看这个： http: [//furius.ca/pubcode/pub/antiorm/lib/python/dbapiext.html#escaping-in-the-dbapi-2-0](http://furius.ca/pubcode/pub/antiorm/lib/python/dbapiext.html#escaping-in-the-dbapi-2-0)

# c# - 如何添加 2 个十进制值并将其添加到 DataSet 的新列中？

> ID：11802006
> 
> 赞同：1
> 
> 时间：2012-08-03T19:20:00.917
> 
> 标签：c#, .net

我正在尝试添加 2 个十进制值并将其保存到新的数据列中。但我意识到这不是我应该怎么做的。我在哪里想错了，请告诉我。谢谢！这是在 Visual Studio 2005 中使用 c#..

```
 Dataset ds = new DataSet();
 DataColumn newColumn2;
 newColumn2 = new DataColumn("TotalAmount");
 decimal TotalAmountSold = 0;
 for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
 {
     TotalAmountSold = Convert.ToDecimal(ds.Tables[0].Rows[i]["AmountSold"]) + Convert.ToDecimal(ds.Tables[0].Rows[i]["AmountUpgraded"]);
 }
 TotalAmountSold = Math.Round(Convert.ToDecimal(TotalAmountSold.ToString()), 2);
 newColumn2.Expression = TotalAmountSold.ToString();
 ds.Tables[0].Columns.Add(newColumn2); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T19:27:41.740

[查看MSDN](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression%28v=vs.90%29.aspx)上的示例。您基本上想要创建一列，指定公式，然后将该列添加到 DataTable。你最终会得到类似的东西

```
// Create total column.
DataColumn totalColumn = new DataColumn();
totalColumn.DataType = System.Type.GetType("System.Decimal");
totalColumn.ColumnName = "total";
totalColumn.Expression = "AmountSold + AmountUpgraded";

// Add columns to DataTable.
...
table.Columns.Add(totalColumn); 
```

您不需要手动循环遍历所有行，这将为您计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:54:37.093

只是学习？一些建议：

1.  摆脱 Visual Studio 2005。Microsoft 提供了最新的 Visual Studio 的免费版本，尽管有限制。主要是因为 VS 2005 太糟糕了。
2.  查找并使用 Microsoft 在线文档。
3.  举一个更好的例子。你错过了一个重要的部分 - 从数据库中获取数据。谷歌“C# DataAdapter 类”。
4.  转换为十进制可能是不必要的。我*假设*数据库将数字存储为数字数据类型。我进一步*假设*接收此数据的 DataTable 具有将其数据类型指定为十进制的特定列。

这就是您显示的代码如何清理：

```
    DataColumn newColumn2 = new DataColumn("TotalAmount", typeof(decimal));
    十进制 TotalAmountSold = 0;

    foreach（ds.Tables[0].Rows 中的 DataRow theRow）{
        TotalAmountSold += theRow['AmountSold"] + theRow["AmountUpgraded"];
    }

```

1.  采用该类型的 DataColumn 构造函数。现在我们不必在添加过程中转换任何东西。这假设要添加的列也是十进制的。
2.  foreach 比 for 循环更简洁、更具表现力
3.  += 否则`TotalAmountSold`我们添加的每一行都会被覆盖。

# facebook - 使用友好 URL 分享 Facebook

> ID：11802007
> 
> 赞同：0
> 
> 时间：2012-08-03T19:20:16.247
> 
> 标签：facebook, facebook-like, facebook-javascript-sdk, facebook-sharer

我正在尝试在一个页面中实现多个 Facebook 共享按钮来共享不同的内容。

我在看这个页面： [https ://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

并尝试完全按照示例中列出的方式实现 Direct URL：

```
https://www.facebook.com/dialog/feed?
app_id=123050457758183&
link=https://developers.facebook.com/docs/reference/dialogs/&
picture=http://fbrell.com/f8.jpg&
name=Facebook%20Dialogs&
caption=Reference%20Documentation&
description=Using%20Dialogs%20to%20interact%20with%20users.&
redirect_uri=http://www.example.com/response 
```

但是，如果您单击上面的链接并单击共享，则会收到一条错误消息。如何防止错误消息发生并在单击共享时将故事实际发布到提要？

我应该在我的页面上激活其他东西吗？我想确保我可以分享不同的内容。

任何见解将不胜感激：D。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:31:25.020

要使示例与您的值一起使用，您需要使用[https://developers.facebook.com/apps](https://developers.facebook.com/apps)页面设置 facebook 应用程序。在基本设置页面设​​置应用程序的域和站点 url 很重要，因为 facebook 会`redirect_uri`根据这些验证提要对话框的参数。

有了应用程序的 ID，您可以更改示例`app_id`和`redirect_uri`参数，它应该可以工作。

### 编辑：

由于您尝试在 facebook 标签上使用这些，请查看[facebooks javascript sdk](http://developers.facebook.com/docs/reference/javascript/)。FB.ui方法使这些共享界面使用起来更加愉快[。](http://developers.facebook.com/docs/reference/javascript/FB.ui/)

# c# - 确定是数组还是对象

> ID：11802012
> 
> 赞同：2
> 
> 时间：2012-08-03T19:21:06.727
> 
> 标签：c#, .net, json, web-services, rest

我创建了一个类来解析 JSON 响应。我遇到的问题是一个项目有时是一个数组，而其他项目是一个对象。我试图想出一个解决方法，但它总是给我一些其他问题。

我想要某种 if 或 try 语句，让我确定要创建什么。

伪代码...

```
 [DataContract]
    public class Devices
    {   
        if(isArray){
        [DataMember(Name = "device")]
        public Device [] devicesArray { get; set; }}

        else{
        [DataMember(Name = "device")]
        public Device devicesObject { get; set; }}
    } 
```

使用 Dan 的代码，我想出了以下解决方案，但现在当我尝试使用它时，我遇到了铸造问题。“无法将‘System.Object’类型的对象转换为‘MItoJSON.Device’类型”

```
[DataContract]
    public class Devices
    {
        public object target;

        [DataMember(Name = "device")]
        public object Target
        {
            get { return this.target; }

            set
            {
                this.target = value;

                var array = this.target as Array;
                this.TargetValues = array ?? new[] { this.target };
            }
        }

        public Array TargetValues { get; private set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:18:44.597

将目标属性声明为对象。然后，您可以创建一个辅助属性来处理目标是数组还是单个对象：

```
 private object target;

    public object Target
    {
        get { return this.target; }

        set
        {
            this.target = value;

            var array = this.target as Array;
            this.TargetValues = array ?? new[] { this.target };
        }
    }

    public Array TargetValues { get; private set; } 
```

# php - 在服务器上运行 Symfony 命令

> ID：11802013
> 
> 赞同：1
> 
> 时间：2012-08-03T19:21:17.367
> 
> 标签：php, symfony1, symfony-1.4

我现在在服务器上的**Symfony 1.4**上有我的应用程序。我使用**FileZilla**上传文件，但我现在如何使用命令行，例如，`plugin:publish-assets`？

FileZilla 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T15:16:13.583

要在生产环境中使用 symfony 的 CLI，您需要对托管应用程序的服务器进行 SSH 访问。您不能通过 FileZille运行 shell 命令*（如`symfony`） ；*FileZilla 是 FTP 软件，仅此而已。

由于涉及固有的安全风险，许多共享主机提供商不提供 SSH 访问。您需要确定您的主机是否提供 SSH 访问，如果没有，则启用它，或者如果拥有 shell 访问权限至关重要，请移至新主机。

symfony 的 CLI 访问使许多常见任务在生产中更易于管理，但是您所要求*的（将资产部署到 web 目录）*只能通过 FTP 访问来完成。

**[有一整章是关于部署 Symfony 1.4 应用程序的](http://www.symfony-project.org/jobeet/1_4/Doctrine/en/22)**

在您的情况下，只需在`php symfony plugin:publish-assets`本地运行，**然后**通过 FTP 推送您的代码。

我强烈建议您研究提供 SSH 访问的托管环境。将 symfony 与[git](http://git-scm.com/)之类的 VCS 相结合并设置服务器以直接从存储库中提取标签，以及简单地使用 symfony 的`project:deploy`CLI 任务进行部署，使得在生产环境中管理代码非常容易。

# html - XPath - 在由匹配文本标识的两个 DIV 之间选择 text()

> ID：11802014
> 
> 赞同：3
> 
> 时间：2012-08-03T19:21:25.650
> 
> 标签：html, css, xpath, scrapy

我有这个 HTML，

```
<div id="General" class="detailOn">
    <div class="tabconstraint"></div>
    <div id="InstitutionMain" class="detailseparate">
        <div id="InstitutionMain_divINFORight" style="float:right;width:40%"></div>
        <div style="font-weight:bold;padding-top:6px">Special Learning Opportunities</div>
        Distance learning opportunities<br>

        <div style="font-weight:bold;padding-top:6px">Student Services</div>
        Remedial services<br>
        Academic/career counseling service<br>

        <div style="font-weight:bold;padding-top:6px">Credit Accepted</div>
        Dual credit<br>
        Credit for life experiences<br>
    </div>
</div> 
```

我要提取

```
text() = between [Div/text() = "Special Learning Opportunities</div>
        Distance learning opportunities"] and [div/text()="Student Services"] 
```

其他 div 类似

我尝试了这段代码，它为我提供了标识的 div 后面的所有文本，

```
div[1]/div[contains(text(),"Special Learning Opportunities")]/following-sibling::text() 
```

虽然这段代码给了我 div 之前的所有文本

```
div[1]/div[contains(text(),"Student Services")]/preceding-sibling::text() 
```

有没有办法准确获取指定 DIV 之间的所有文本。提前致谢。

我正在使用 python 2.x 和 scrapy 进行爬行。

注意：我当前的方法：- 使用这三个 xpath

```
item['SLO']=site.select('div[1]/div[contains(text(),"Special Learning Opportunities")]/following-sibling::text()').extract()
item['SS']=site.select('div[1]/div[contains(text(),"Student Services")]/following-sibling::text()').extract()
item['CA']=site.select('div[1]/div[contains(text(),"Credit Accepted")]/following-sibling::text()').extract() 
```

我得到三个这样的项目，

```
item['SLO']=['Distance learning opportunities','Remedial services',' Academic/career counseling service','Dual credit','Credit for life experiences']
item['SS']=['Remedial services',' Academic/career counseling service','Dual credit','Credit for life experiences']
item['CA']=['Dual credit','Credit for life experiences'] 
```

然后我在 python 列表上工作以获得我想要的，

但我认为在 XPath 中应该有更快的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T20:00:54.260

您可以直接将“a 和 b 之间的文本”翻译成 XPath，如“text()[previous-sibling = a and next-sibling = b]”

IE：

```
//text()[(preceding-sibling::div[1]/text() = "Special Learning Opportunities") and (following-sibling::div[1]/text() = "Student Services")] 
```

应该管用。

（虽然我测试它失败了，但它似乎是我的 XPath 解释器中的一个错误）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T20:10:06.550

Here you go, not so classy as the previous answer, but hey - atleast it works! :-)

```
div[1]//div[contains(text(),"Special Learning Opportunities")]/following-sibling::node()[position() <= count( div[1]//div[contains(text(),"Student Services")]/following-sibling::node()) + 1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T10:18:11.363

你可以试试这个。。

```
//div[contains(text(),"Special Learning Opportunities")]//following-sibling::text()[./following-sibling::div[contains(text(),'Student Services')]] 
```

# java - 如何从多个 GUI 类集成多页 Java 桌面应用程序

> ID：11802018
> 
> 赞同：3
> 
> 时间：2012-08-03T19:21:47.203
> 
> 标签：java, swing, user-interface, layout-manager, cardlayout

我正在开发一个 Java Swing 桌面应用程序项目。该应用程序有大约 15 个 GUI 页面。我可以使用分层窗格和选项卡式窗格将所有 GUI 组件放在一个类中。但是这个类将是巨大的。如果我可以将项目分成几个较小的子项目并让每个子项目有一个或几个 GUI 页面，那将是一个想法。我可以单独处理每个子项目，并在所有子项目完成后将它们重新集成到一个应用程序中。我的问题是，如何集成来自不同类的所有 GUI 页面，以便在单击按钮时可以向后导航并在不同页面之间强制？由于子项目包含 GUI 页面，因此每个页面都需要有一个 JFrame。如何在 JFrame 1 和 JFrame 2 之间切换并强制使一个可见而另一个不可见？ [这个问题](https://stackoverflow.com/questions/2423197/how-do-i-make-my-frames-change-in-java) 展示了如何创建新的 JFrame。但是没有显示JFrames之间是如何来回切换的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T21:46:41.190

> ... 该应用程序有大约 15 个 GUI 页面。我可以使用分层窗格和选项卡式窗格将所有 GUI 组件放在一个类中。但是这个类将是巨大的。

不必要。GUI 可以非常简单，并且可以有一个方法允许其他类添加页面，比如`registerPage(...)`：

```
public void registerPage(JComponent page, String name) {
  pageHolder.add(page, name);
  nameComboModel.addElement(name);
} 
```

然后给类方法以允许一个人进入下一页或上一页或随机页面。例如，像这样小的类可以工作：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class LotsOfPagesPanel extends JPanel {
   private CardLayout cardlayout = new CardLayout();
   private JPanel pageHolder = new JPanel(cardlayout);
   private DefaultComboBoxModel<String> nameComboModel = new DefaultComboBoxModel<String>();
   private JComboBox<String> nameCombo = new JComboBox<String>(nameComboModel);

   public LotsOfPagesPanel() {
      JPanel btnPanel = new JPanel(new GridLayout(1, 0, 5, 0));
      btnPanel.add(new JButton(new PrevAction(this, "Previous", KeyEvent.VK_P)));
      btnPanel.add(new JButton(new NextAction(this, "Next", KeyEvent.VK_N)));
      JPanel bottomPanel = new JPanel();
      bottomPanel.add(btnPanel);
      bottomPanel.add(nameCombo);

      nameCombo.addActionListener(new NameComboListener());
      pageHolder.setBorder(BorderFactory.createEtchedBorder());

      setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
      setLayout(new BorderLayout(5, 5));
      add(pageHolder, BorderLayout.CENTER);
      add(bottomPanel, BorderLayout.PAGE_END);
   }

   public void previousPage() {
      cardlayout.previous(pageHolder);
   }

   public void nextPage() {
      cardlayout.next(pageHolder);
   }

   public void show(String name) {
      cardlayout.show(pageHolder, name);
   }

   public void registerPage(JComponent page, String name) {
      pageHolder.add(page, name);
      nameComboModel.addElement(name);
   }

   private class NameComboListener implements ActionListener {
      @Override
      public void actionPerformed(ActionEvent e) {
         String selection = nameCombo.getSelectedItem().toString();
         show(selection);
      }
   }
} 
```

这个类真正做的就是充当您的“页面”的存储库，并且具有允许连续或随机翻阅页面的逻辑，仅此而已，但这就是它真正需要做的，并且通过限制它，我们限制班级规模。如果需要其他功能，请为这些创建其他类

...例如我们的 Action 类，包括 PrevAction 类：

```
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;

public class PrevAction extends AbstractAction {
   private LotsOfPagesPanel lotsOfPages;

   public PrevAction(LotsOfPagesPanel lotsOfPages, String name, Integer keyCode) {
      super(name);
      this.lotsOfPages = lotsOfPages;
      putValue(MNEMONIC_KEY, keyCode);
   }

   @Override
   public void actionPerformed(ActionEvent e) {
      lotsOfPages.previousPage();
   }
} 
```

和 NextAction.java

```
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;

public class NextAction extends AbstractAction {
   private LotsOfPagesPanel lotsOfPages;

   public NextAction(LotsOfPagesPanel lotsOfPages, String name, Integer keyCode) {
      super(name);
      this.lotsOfPages = lotsOfPages;
      putValue(MNEMONIC_KEY, keyCode);
   }

   @Override
   public void actionPerformed(ActionEvent e) {
      lotsOfPages.nextPage();
   }
} 
```

你当然需要一个主要的方法：

```
import java.awt.Color;
import java.awt.Dimension;
import java.util.Random;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingConstants;
import javax.swing.SwingUtilities;

public class LotsOfPagesMain {
   private static final String[] LABELS = { "One", "Two", "Three", "Four",
         "Five", "Six", "Seven", "Eight", "Nine", "Ten", "Eleven", "Twelve",
         "Thirteen", "Fourteen", "Fifteen" };
   private static final Dimension LABEL_SIZE = new Dimension(400, 300);

   private static void createAndShowGui() {
      LotsOfPagesPanel lotsOfPages = new LotsOfPagesPanel();
      Random random = new Random();

      // I'm using JLabels as a simple substitute for your complex JPanel GUI "pages"
      for (String labelText : LABELS) {
         JLabel label = new JLabel(labelText, SwingConstants.CENTER);
         label.setPreferredSize(LABEL_SIZE);
         label.setOpaque(true);
         label.setBackground(new Color(random.nextInt(170) + 85, random
               .nextInt(170) + 85, random.nextInt(170) + 85));
         lotsOfPages.registerPage(label, labelText);
      }

      JFrame frame = new JFrame("LotsOfPages");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(lotsOfPages);
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

但无论如何它都不会是一个庞大的类，而且您不必担心在用户处翻转多个 JFrame。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T20:32:44.747

您对集中控制器的想法不错。

就个人而言，我的第一个想法是尝试将这些单独的页面组合成域组（或责任组）。这会给我我的第一级控制。我会决定我希望用户如何使用这些域。

一旦你完成了这项工作，你就可以进入下一个级别，哪些组相互工作（如果有的话）以及你希望用户如何与这些交互

等等。

我同意 HovercraftFullOfEels 的观点，你不想向用户扔很多窗口，这只会让他们感到沮丧，你也不希望他们不得不在相关页面之间轻弹，其中一个信息对另一个有用。

你可能会发现你最终得到了两者的结合。也就是说，您可能需要为用户提供在框架中打开某些页面的灵活性。这将使他们能够决定他们总是需要哪些信息以及他们可以浏览哪些信息。

恕我直言

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:54:05.420

你有几个选择：

1.  您可以使用 setVisible(false) 隐藏旧的 JFrame
2.  您可以使用 dispose() 摆脱旧的 JFrame

您可以在此处获取有关这些方法以及如何调用它们的更多信息：http: [//docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html)

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-28T17:52:27.587

我使用的方法是将页面制作为面板并使这些面板静态并将我想要的面板添加到我的框架中并删除前一个面板是我使用的功能：

```
public static void add(JPanel panelYouWantToAdd, JPanel prevPanelToRemove) {
        prevPanelToRemove.setVisible(false);
        panelYouWantToAdd.setVisible(true);
        appFrame.add(panelYouWantToAdd);
        appFrame.getContentPane().remove(prevPanelToRemove);
        appFrame.getContentPane().invalidate();
        appFrame.getContentPane().validate();

    } 
```

使用这种方法，您应该只发送您要使用的面板和已经在框架上的前一个面板

# ruby-on-rails - 我应该在 Rails 的哪个位置测试跨模型逻辑？

> ID：11802034
> 
> 赞同：2
> 
> 时间：2012-08-03T19:23:09.673
> 
> 标签：ruby-on-rails, testing, rspec, model

**该软件**

我在我创建的 Rails 3.2 应用程序中有一些模型。粗略地说，关键模型是公司、产品和 ReverseIndex。正如您可能猜到的那样，公司有多种产品。产品有一些属性关键字。

我已经创建了 ReverseIndex，它对于给定的关键字有一个产品 ID 列表。这样我可以通过关键字快速查找产品。

使用 after_save 回调更新产品时会更新 ReverseIndex，以确保事情保持同步。

**关于如何用 rspec 测试它的问题**

我已经让代码工作了，但现在想添加测试，例如，确保当使用相同的关键字添加其他产品时，该关键字的相应 ReverseIndex 条目会使用产品的 id 更新，并且当产品被删除时，产品也会更新来自 ReverseIndex 条目的引用。

我正在使用 rspec 进行测试。这个问题与模型有关，逻辑在模型类中。然而，这似乎更像是系统行为而不是模型单元测试。由于它使用 after_save 和模型中的方法，因此它与控制器无关。

我怀疑这更多是功能测试的问题——尽管我真的想确认基本的模型行为。（问题是我需要先创建两个产品，然后进行测试，然后添加第三个已经使用关键字的产品。）也许可以（并且应该）使用 rspec）为此，我只是对适当的方式不够熟悉去做吧。

有什么想法吗？我将如何使用 rspec 执行此操作，还是应该使用替代测试方法？

# python - 如何从 numpy 数组的时间点创建掩码？

> ID：11802036
> 
> 赞同：0
> 
> 时间：2012-08-03T19:23:14.153
> 
> 标签：python, arrays, numpy, mask

data 是一个包含 2500 个时间序列的矩阵。我需要随着时间的推移对每个时间序列进行平均，丢弃围绕峰值记录的数据点（在间隔 tspike-dt*10...tspike+10*dt 中）。每个神经元的尖峰时间数量是可变的，并存储在一个包含 2500 个条目的字典中。我当前的代码迭代神经元和尖峰时间并将掩码值设置为 NaN。然后调用bottleneck.nanmean()。但是，此代码在当前版本中速度较慢，我想知道是否有更快的解决方案。谢谢！

```
import bottleneck
import numpy as np
from numpy.random import rand, randint

t = 1
dt = 1e-4
N = 2500
dtbin = 10*dt

data = np.float32(ones((N, t/dt)))
times = np.arange(0,t,dt)
spiketimes = dict.fromkeys(np.arange(N))
for key in spiketimes:
  spiketimes[key] = rand(randint(100))

means = np.empty(N)

for i in range(N):        
  spike_times = spiketimes[i]
  datarow = data[i]
  if len(spike_times) > 0:
    for spike_time in spike_times:                        
      start=max(spike_time-dtbin,0)
      end=min(spike_time+dtbin,t)
      idx = np.all([times>=start,times<=end],0)
      datarow[idx] = np.NaN
  means[i] = bottleneck.nanmean(datarow) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:28:21.020

而不是使用`nanmean`你可以只索引你需要和使用的值`mean`。

```
means[i] = data[ (times<start) | (times>end) ].mean() 
```

如果我误解了并且您确实需要索引，您可以尝试

```
means[i] = data[numpy.logical_not( np.all([times>=start,times<=end],0) )].mean() 
```

同样在您可能不想使用的代码中`if len(spike_times) > 0`（我假设您在每次迭代中删除尖峰时间，否则该语句将始终为真并且您将有一个无限循环），仅使用`for spike_time in spike_times`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T20:52:35.537

代码中的绝大多数处理时间都来自这一行：

```
idx = np.all([times>=start,times<=end],0) 
```

这是因为对于每个尖峰，您都在将*每个值*与开始和结束时间进行比较。由于您在此示例中具有统一的时间步长（我认为这在您的数据中也是如此），因此简单地计算开始和结束索引要快得多：

```
# This replaces the last loop in your example:
for i in range(N):        
    spike_times = spiketimes[i]
    datarow = data[i]
    if len(spike_times) > 0:
        for spike_time in spike_times:
            start=max(spike_time-dtbin,0)
            end=min(spike_time+dtbin,t)
            #idx = np.all([times>=start,times<=end],0)
            #datarow[idx] = np.NaN
            datarow[int(start/dt):int(end/dt)] = np.NaN
    ## replaced this with equivalent for testing
    means[i] = datarow[~np.isnan(datarow)].mean() 
```

这将我的运行时间从 ~100s 减少到 ~1.5s。您还可以通过在spike_times 上对循环进行矢量化来节省更多时间。这样做的效果将取决于您的数据的特征（对于高峰值率应该是最有效的）：

```
kernel = np.ones(20, dtype=bool)
for i in range(N):        
    spike_times = spiketimes[i]
    datarow = data[i]
    mask = np.zeros(len(datarow), dtype=bool)
    indexes = (spike_times / dt).astype(int)
    mask[indexes] = True  
    mask = np.convolve(mask, kernel)[10:-9]

    means[i] = datarow[~mask].mean() 
```

# cmd - DOS FOR 命令选项 tokens=07 有效，但 tokens=08 无效

> ID：11802041
> 
> 赞同：0
> 
> 时间：2012-08-03T19:24:01.327
> 
> 标签：cmd, dos

我在美国英语语言环境中使用 Windows 2008 R2。我的批处理文件在 8 月 1 日之后停止工作。从 3 月到 7 月运行良好。

该脚本将带有前导零的数字月份转换为字符串。这是重现的脚本。实际的批处理脚本从 %date% 中提取数字月份。

```
set month=07

REM convert numerical month to string
for /f "tokens=%month%" %%A in (
    "jan feb mar apr may jun jul aug sep oct nov dec") do (
    set month_str=%%A
)
echo %month_str% 
```

以上运行良好。它显示“七月”

但是，如果我将月份更改为 08，则会失败并显示错误消息

```
8" was unexpected at this time 
```

所以我删除了前导零。

```
set /A month=100%month% %% 100 
```

现在它又可以正常工作了，这是我的问题

1.  Windows 2008 R2 FOR 命令的官方文档在哪里？

编辑：[http ://technet.microsoft.com/en-us/library/cc754900.aspx](http://technet.microsoft.com/en-us/library/cc754900.aspx)

1.  将零填充数字传递给令牌选项可能是我的错，但为什么 07 是可接受的而不是 08？
2.  如果 07 是有效参数，它是否与 7 相同或解释为其他内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:22:51.317

根据对问题的评论，您似乎已经意识到 Windows 正试图将 08 视为八进制，这当然失败了。

每当 CMD.EXE 内部命令需要解析数字时，它会将任何前缀`0`为八进制的数字字符串和任何前缀`0x`为十六进制的数字字符串处理。这些数字也可以选择以符号作为前缀。这些数字仅限于可以表示为有符号 4 字节整数的值：-2147483648 到 2147483647。

我知道微软文档讨论十六进制和八进制数字支持的唯一地方是 SET 命令的 /A 选项。但似乎所有被视为数字的字符串都以相同的方式处理。

这包括：

**1) 设置/A**

```
set /a 010+0xA
18 
```

**2) FOR /F TOKENS 和 SKIP 选项**

```
for /f "tokens=010" %A in ("1 2 3 4 5 6 7 8 9 10") do @echo %A
8 
```

**3) 为 /L**

```
for /l %N in (010 1 0xA) do @echo %N
8
9
10 
```

**3) IF数值比较**

```
if 012==0xA echo match
match 
```

**4）使用子串操作的变量扩展**（负数示例）

```
set "test=0123456789ABCDEF"
echo %test:~-0xA,-010%
67 
```

这就是我目前能想到的，但可能还有其他人。

# model - 在保留模型材质外观的同时对 XNA 模型应用多种效果

> ID：11802044
> 
> 赞同：0
> 
> 时间：2012-08-03T19:24:20.070
> 
> 标签：model, xna, effect, lighting

如何在模型的不同部分仍然保持不同材料的属性的同时将各种不同的效果应用于模型？

我在 xna 中使用 Model 类，并在搅拌机中创建了模型（使用 .fbx 文件格式）。据我所知，通过 xna 的内容管道加载模型会在各种 BasicEffect 实例中存储有关不同材质的信息（例如镜面反射功率和漫反射颜色）。我想要做的是对模型应用各种不同的自定义效果（包括我世界中的所有点光源），同时仍然让模型的光泽部分保持其闪亮的外观（例如）。我的想法是永远不要重新映射模型，而是保留 BasicEffect 实例作为某些材料外观的参考。在这种情况下，我需要在应用正确的效果后手动绘制每个 ModelMeshPart。我是否按照正确的思路将大量全局效应应用于我的模型？是否有更好的方法来访问 .fbx 文件中的材料信息？我是否应该用一种效果重新映射我的模型，并将我可能需要的所有技术塞进其中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:03:53.870

在绘图循环中，您已经在迭代网格并为每个网格部分调用单独的绘图。因此，在该循环中，不要使用附加到模型的效果，而是将设置（来自模型或其他）放到您自己的效果上，应用它，然后使用它来绘制网格。

XNA 开发人员已经注意到，内容导入器和模型类必须是专门的，以使初级程序员可以简单地绘制模型。不幸的是，这使得它们不适合您想要实现的技术。如果您想做更高级的绘图，您可能需要扩展 Model 类，并将基础用作几何/纹理存储介质。

# java - 如何将用户输入的日期发送到 Hibernate + SQL db JSF 2.0

> ID：11802045
> 
> 赞同：0
> 
> 时间：2012-08-03T19:24:19.873
> 
> 标签：java, hibernate, jsf, jsf-2

我正在尝试通过 JSF 2.0 发送日期并休眠到我的 SQL DB 字段之一。Hibernate 自动对该字段进行逆向工程并将其映射到 date() 对象，但我现在不确定如何以正确的格式解析用户输入的字符串以设置为 date() 对象，然后设置为我的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:41:39.913

您可以使用 jsf 日期转换器：

```
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      >
...
    <h:inputText id="date" value="#{yourBean.dateField}" 
                 size="20" required="true">

        <f:convertDateTime pattern="dd-MM-yyyy" />
    </h:inputText>
...
</html> 
```

在您的 JSF bean 中：

```
Date dateField;

public Date getDateField() {
  return date;
}

public void setDateField(Date date) {
  this.date = date;
} 
```

和 JPA 映射：

```
@Temporal(TemporalType.DATE) java.util.Date date; 
```

# c# - 解决我的服务层中的依赖关系

> ID：11802047
> 
> 赞同：3
> 
> 时间：2012-08-03T19:24:23.830
> 
> 标签：c#, ninject, repository-pattern, n-tier-architecture, onion-architecture

我在试图弄清楚如何解决我的架构中的依赖问题时遇到了麻烦。我正在使用 NHibernate，我试图用我自己的 ICriteriaItem 接口抽象它的 ICriteria 接口。ICriteriaItem 在我的存储库接口中使用：

ICriteriaItem.cs

```
public interface ICriteriaItem
{
    string PropertyName { get; set; }
    object Value { get; set; }
} 
```

IUserRepository.cs

```
public interface IUserRepository 
{
    IEnumerable<User> Find(IList<ICriteriaItem> criteria);
} 
```

我的服务层在其 AccountService 中使用此存储库

AccountService.cs

```
public class AccountService : IAccountService
{
    private IUserRepository _userRepo;
    private IRoleRepository _roleRepo;

    public AccountService(IUserRepository userRepository,
        IRoleRepository roleRepository)
    {
        _userRepo = userRepository;
        _roleRepo = roleRepository;
    }

    public ValidateUser(string username, string password)
    {
        password = HashPassword(password);

        _userRepo.Find(new List<ICriteriaItem>() {
            new CriteriaItem() { "Username", username },
            new CriteriaItem() { "Password", password},
        });
    }
} 
```

我的问题是使用 Ninject 获取 CriteriaItem 的实例。我所有的绑定都在我的 MVC 层中完成，目前，我的服务层对 Ninject 一无所知。我的服务已经注入到构造函数中。所以这是我的选择：

1.  我可以将 ICriteriaItem 注入到构造函数中。这感觉很脏，因为每个服务都会注入这个。我确信我可以使用基本存储库来做到这一点，但它仍然感觉很脏。

2.  注入我的内核并在我的服务中使用它来获取 ICriteriaItem 的实例。感觉更糟。

3.  只需公开 ICriteriaItem 的具体类并取消接口即可。

4.  找别的方法...

想法？我在这一切都错了吗？有没有更好的办法？我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T23:30:59.353

CriteriaItem 是一个数据传输对象。DTO 不应该有任何依赖关系，因此不应该使用 Nnject 创建它们。当前的实现应该是这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T19:32:31.783

您可以使用工厂模式，并将其注入您的*AccountService*构造函数中。

```
public ICriteriaItemFactory
{
    ICriteriaItem GetNew();
} 
```

现在，您的实现将需要接受*IKernel*依赖项，但至少您没有将内核注入您的核心类之一。

```
public CriteriaItemFactory : ICriteriaItemFactory
{
    private IKernel _kernel;

    public CriteriaItemFactory(IKernel kernel)
    {
        _kernel = kernel;
    }

    public ICriteriaItem GetNew()
    {
        return _kernel.Get<ICriteriaItem>();
    }
} 
```

# jaxb - JAXB (Moxy) XML 元数据映射问题

> ID：11802049
> 
> 赞同：2
> 
> 时间：2012-08-03T19:24:33.243
> 
> 标签：jaxb, eclipselink, moxy

我正在尝试使用 Moxy 的 XML 元数据扩展来映射以下界面。但是当我尝试加载它时，我收到以下错误。我不能将公共构造函数添加到，`AddressType`因为它是一个枚举。

`AddressType`我的问题是：即使我没有在 xml 元数据中指定，为什么 Moxy impl 还在查看？

```
public interface TokenizedUnitedStatesAddress
{
    class AddressType extends Enum
    {
        public static final AddressType STREET = new AddressType("street");    
        public static final AddressType PO_BOX = new AddressType("poBox");    
        public static final AddressType RURAL_ROUTE = new AddressType("ruralRoute");

        public static AddressType getEnum(final String type)
        {
            return (AddressType) getEnum(AddressType.class, type);
        }

        protected AddressType(final String name)
        {
            super(name);
        }
    }

    String getApartmentNumber();

    //removed other getters for brevity
} 
```

* * *

```
<xml-bindings xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.eclipse.org/eclipselink/xsds/persistence/oxm http://www.eclipse.org/eclipselink/xsds/eclipselink_oxm_2_4.xsd"
   version="2.4" package-name="com.abc.ic.domain.country.us">
   <java-types>
      <java-type name="TokenizedUnitedStatesAddress">
         <xml-root-element />
         <xml-type
            prop-order="StreetPreDirection StreetNumber StreetName StreetType StreetPostDirection UnitDesignator UnitNumber AddressLine1 AddressLine2 City State PostalCode CarrierRoute LengthAtAddress OwnershipStatus" />
         <java-attributes>
            <xml-element name="StreetPreDirection" java-attribute="preDirectional" />
            <xml-element name="StreetNumber" java-attribute="houseNumber" />
            <xml-element name="StreetName" java-attribute="streetName" />
            <xml-element name="StreetType" java-attribute="streetType" />
            <xml-element name="StreetPostDirection" java-attribute="postDirection" />
            <xml-element name="UnitNumber" java-attribute="apartmentNumber" />
            <xml-element name="AddressLine1" java-attribute="primaryAddress" />
            <xml-element name="AddressLine2" java-attribute="secondaryAddress" />
            <xml-element name="City" java-attribute="cityName" />
            <xml-element name="State" java-attribute="stateAbbreviation" />
            <xml-element name="PostalCode" java-attribute="zipCode" />
         </java-attributes>
      </java-type>
   </java-types>
</xml-bindings> 
```

* * *

```
javax.xml.bind.JAXBException: 
Exception Description: The class com.abc.ic.domain.country.us.TokenizedUnitedStatesAddress$AddressType requires a zero argument constructor or a specified factory method.  Note that non-static inner classes do not have zero argument constructors and are not supported.
 - with linked exception:
[Exception [EclipseLink-50001] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.JAXBException
Exception Description: The class com.abc.ic.domain.country.us.TokenizedUnitedStatesAddress$AddressType requires a zero argument constructor or a specified factory method.  Note that non-static inner classes do not have zero argument constructors and are not supported.]
    at org.eclipse.persistence.jaxb.JAXBContext$TypeMappingInfoInput.createContextState(JAXBContext.java:908)
    at org.eclipse.persistence.jaxb.JAXBContext.<init>(JAXBContext.java:157)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:170)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:157)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:117)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:107) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:06:27.930

即使 XML 用于提供元数据，Mxoy impl 仍会内省该类。这是因为，根据设计，外部映射文件用于扩充注释提供的元数据。

The issue however is that the commons-land Enum abstraction requires us to have a non-public single argument constructor for the enums. I fixed this issue by adding a public no-arg constructor that initializes a default enum. This is sufficient for my application. I've however created a bug which can be followed [here](https://bugs.eclipse.org/bugs/show_bug.cgi?id=386597).

**Note**: I also looked at the [foctory-method option of Moxy](http://blog.bdoughan.com/2011/06/jaxb-and-factory-methods.html) but it requires an empty arg method as the factory method which is not the case in case of Enum.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:21:05.063

I am a developer on the EclipseLink MOXy team, and I've been looking at this issue. You are correct as to why the AddressType class was introspected, and I see that you have a workaround.

Another solution would be to create an XmlAdapter that can convert between Apache Enum classes and their XML (string) representation, as follows:

```
import javax.xml.bind.annotation.adapters.XmlAdapter;

import org.apache.commons.lang.enums.Enum;

import enumbindings.TokenizedUnitedStatesAddress.AddressType;

public class ApacheEnumAdapter extends XmlAdapter<String, Enum> {

    public ApacheEnumAdapter() {
    }

    @Override
    public Enum unmarshal(String s) throws Exception {
        return AddressType.getEnum(s);
    }

    @Override
    public String marshal(Enum e) throws Exception {
        if (null == e) {
            return null;
        }
        return e.getName();
    }

} 
```

And then hook up the adapter in your bindings file like this:

```
...
<xml-element name="StreetType" java-attribute="streetType">
    <xml-java-type-adapter value="enumbindings.ApacheEnumAdapter" />
</xml-element>
... 
```

As far as the bug you entered, EclipseLink is actually behaving correctly in this situation, we do not do any special handling of Apache Commons classes and so a default no-arg constructor (or some other handling mechanism) is still required. However I will update your bug and change it to an enhancement request to support Apache Enums out of the box, and we will evaluate it.

Thanks,

Rick

# vb.net - 允许用户处理事件代替默认事件

> ID：11802051
> 
> 赞同：0
> 
> 时间：2012-08-03T19:24:38.043
> 
> 标签：vb.net, custom-events

我正在构建一个自定义控件，我想做的是有一个事件让我们将此事件称为 OnMenuShow。现在我想做的是在我的控件中处理此事件以显示一个菜单，但允许实现我的自定义控件的用户在父窗体中处理事件以显示不同的菜单（如果他们愿意）。所以用户代码看起来像这样。

```
 Public Sub Control_OnMenuShow(sender as Object, e as CustomEventArgs) handles Control.OnMenyShow
      'DO some work
       e.handled = true
    end Sub 
```

我只是不确定如何防止事件在事件中为控件内的代码触发两次。如果有人能指出我正确的方向，那将非常有帮助

-内森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:17:19.137

在您的控制下：

```
Public Event MenuShow As EventHandler

Public Overridable Sub OnMenuShow()
  RaiseEvent MenuShow(New EventArgs)
End Sub 
```

现在，消费者可以覆盖 OnMenuShow，这将绕过您的 raiseevent 语句，而您无需“检查”任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:27:03.380

我发现汉斯的回答最适合我的问题，如果他把它留在答案中，我会将他的答案标记为已回答。我将留下我最终编码的方式以供将来参考。

```
Public Event MenuShow As EventHandler(Of  MenuShowEventArgs)

Public Overridable Sub OnMenuShowEvent()
    Dim args As New MenuShowEventArgs(False, "Control")
    RaiseEvent MenuShow(Me, args)
    if args.handled then return
    'DO WORK
End Sub 
```

# django - 在 ModelFormset 中设置初始值

> ID：11802053
> 
> 赞同：0
> 
> 时间：2012-08-03T19:24:43.077
> 
> 标签：django

根据[文档](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#providing-initial-values)，无法为绑定到模型的字段提供初始值。

在我的模型表单中，虽然我创建了一个额外的未绑定字段：

```
class DealCForm(ModelForm):
    attach_deal_conversation  = forms.BooleanField(required=False, initial=False) 
```

因此，如果满足某些条件，我想设置此值。

**看法：**

```
deal_formset = modelformset_factory(Deal, form=DealCForm, extra=0)

if (request.POST)
        pass
else:                 
        opendeal_formset = deal_formset(queryset=formset_query)
variables = RequestContext(request, {'opendeal_formset' : opendeal_formset)
return render_to_response('conversation.html', variables) 
```

在视图中，就在将其发送到模板之前，我已经直接设置了值，但是它不起作用：

```
for dfm in deal_formset:
            for odfm in opendeal_formset:
                if dfm.pk == odfm.pk:
                    odfm.attach_deal_conversation = True; 
```

但它不起作用。知道如何为未绑定字段设置初始值吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:25:52.407

这对我来说是：

```
for form in opendeal_formset:
    form.fields['attach_deal_conversation'].initial=True 
```

# c# - 在 Infragistics UltraGrid 中启用和禁用列

> ID：11802054
> 
> 赞同：9
> 
> 时间：2012-08-03T19:24:42.957
> 
> 标签：c#, infragistics

我有一个 Infragistics 网格，我想根据某些要求禁用和启用某些列。我读过一些文章说要使用`AllowUpdate = DefaultableBoolean.True`，但它对我不起作用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-03T20:43:15.580

我想当您谈论禁用的列时，您的意思是禁用这些列中的编辑。你也没有指定语言，所以我将使用 C#

```
UltraGridColumn c = grdWork.DisplayLayout.Bands[0].Columns["YourColumnName"];
c.CellActivation = Activation.NoEdit; 
c.CellClickAction = CellClickAction.CellSelect; 
```

属性**CellActivation**也可以设置为`Activation.Disabled`或`Activation.ActivateOnly`。
属性**CellClickAction**允许为单击的单元格设置适当的选择状态。您可以使用`CellSelect`或`RowSelect`。（最后一个，模仿 ListBox 的行为）
像往常一样，真正的困难是找到正确的属性。然后 Intellisense 会给你一个快速公平的解释这些值的含义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T02:14:26.780

如果您只想根据需要显示和隐藏列，那么您可以尝试以下操作。

```
UltraGrid myGrid = new UltraGrid();
//Bind to your data here
myGrid.DisplayLayout.Bands[0].Columns["ColumnName"].Hidden = true; 
```

# c - 进程执行结束后的 fork() 输出

> ID：11802055
> 
> 赞同：4
> 
> 时间：2012-08-03T19:24:48.940
> 
> 标签：c, fork

考虑下面的代码片段：

```
int main()
{
    fork();
    fork();
    fork();
    printf("Hello World\n");
} 
```

我得到了输出：[ubuntu 12.04]

```
aashish@aashish-laptop:~$ ./a.out
Hello World
Hello World
Hello World
aashish@aashish-laptop:~$ Hello World <---------------------------
Hello World
Hello World
Hello World
Hello World 
```

为什么流程执行结束后会输出“Hello Word”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T21:39:40.903

简短的回答是您正在创建多个进程，这些进程彼此异步运行。长答案如下：

当您在 shell 提示符下键入*./a.out*时，会创建一个运行您的程序的进程。我们称这个过程为 1。

进程 1 调用 fork()。这将创建一个新的子进程，进程 2，并且 1 和 2 在第一次 fork() 调用之后继续执行，继续进行第二次 fork() 调用。进程 1 创建子进程 3，进程 2 创建子进程 4。所有四个进程都在第二个 fork() 之后继续，继续到最后的 fork() 调用。流程 1 创建流程 5；流程 2 创建流程 6；流程 3 创建流程 7；过程 4 创建过程 8。

![非艺术家对流程层次结构的渲染](../Images/f055556a69a8544be514293855f31301.png)

请注意，这些进程编号是任意的：不能保证它们会按该顺序创建。

一旦第一个 fork() 被执行，异步就开始发挥作用。系统不提供关于调度父级与子级的保证。理论上，孩子可以在父母继续之前完成，父母可以在孩子获得任何资源之前完成。最可能的情况是在中间的某个地方：原始进程与其子进程共享资源，因此所有进程都同时运行。

谜题的最后一部分源于 shell 正在等待进程 1 完成这一事实。*只有*进程 1。shell 不知道（或关心）进程 1 已启动其他进程。所以当 Process 1 完成时，shell 会显示一个提示。碰巧的是，进程 1 的一些后代还没有到达 printf() 语句。当他们到达那里时，shell 已经显示了它的提示符。

要进一步探索这一点，您可能想尝试将*fork()*调用更改为*printf("%d\n", fork());* 和/或将*printf("Hello World\n")*更改为*printf("Hello from pid %d\n", getpid() )*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T19:29:17.773

在第二个 shell 提示符之后出现的“Hello World”输出来自分叉的进程，而不是来自 shell（你）启动的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:31:21.950

那是因为你做了 1 个分叉 (2)，然后你再分叉 (4)，然后再分叉 (8)，然后为每个分叉打印 Hello world。这就是为什么你有 8 个输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T19:43:04.180

```
int main() {
    pid_t c[3];
    int i, n = 0;
    for (i = 0; i < 3; ++i) {
        switch ((c[n] = fork())) {
        case 0:  break;
        case -1: perror("fork"); exit(EXIT_FAILURE);
        default: ++n;
        }
    }
    printf("[%d] Hello World\n", (int)getpid());
    // Without waiting, some children may still be running when the
    // parent exits. This makes it look like output is generated
    // after the process is over, when in fact not all the processes
    // are done yet.
    //
    // The process is not really finished until its children are
    // finished. The wait call waits on a child process to finish.
    for (i = 0; i < n; ++i) wait(0);
    return 0;
} 
```

# terminal - 终端 mysql -v 给出拒绝访问错误 1045 (28000)

> ID：11802060
> 
> 赞同：0
> 
> 时间：2012-08-03T19:25:23.383
> 
> 标签：terminal, osx-mountain-lion, mysql-error-1045

当我尝试使用终端检查 mysql 版本时，出现以下错误。

```
KillBill:~ KillBill$ mysql -v
ERROR 1045 (28000): Access denied for user 'KillBill'@'localhost' (using password: NO) 
```

但是当我执行以下操作并添加密码时，它可以工作并将我登录到 MYSQL 提示符。

```
KillBill:~ KillBill$ mysql -u root -p 
```

为什么我只在 mysql -v 提示符下收到以下错误。我该怎么做才能修复它？其他一切工作正常，我可以在我正在开发的应用程序中连接到 mysql db 没有任何问题。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:30:49.370

如果您在没有给出 -u 选项的情况下启动 mysql 客户端，它假定您想使用当前用户名登录，在您的情况下为 KillBill。如果此用户不是 mysql 用户或者是 mysql 用户，但必须指定密码才能登录，则该用户将被拒绝连接。

以“root”身份登录，创建一个 mysql 用户名“KillBill”并分配密码。[在这里](http://dev.mysql.com/doc/refman/5.1/en/create-user.html)寻找它的语法。然后使用 GRANT 语句分配适当的权限。

# jquery - 更改简单的内联模态窗口 css 脚本

> ID：11802061
> 
> 赞同：0
> 
> 时间：2012-08-03T19:25:23.773
> 
> 标签：jquery, css

我正在使用来自 sohtanaka.com 的“简单内联模式窗口 css”脚本。由于这个网站离线，我现在找不到我的答案。

有人可以帮我吗？

我只想在页面加载时显示一次弹出窗口，不会一直显示。

包含弹出窗口的 div：

```
<div id="popup_load" class="popup_block">
<b>Lorem ipsum dolores sit amet</b>
</div> 
```

脚本

```
<script type="text/javascript">
$(document).ready(function(){

    $.fn.popOpen = function(){

        var popID = $(this).attr('rel'); //Get Popup Name
        var popURL = $(this).attr('href'); //Get Popup href to define size

        //Pull Query & Variables from href URL
        var query= popURL.split('?');
        var dim= query[1].split('&');
        var popWidth = dim[0].split('=')[1]; //Gets the first query string value

        //Fade in the Popup and add close button
        $('#' + popID).fadeIn('slow').css({ 'width': Number( popWidth ) }).prepend('<a href="#" class="close"><img src="images/close.png" class="btn_close" title="<?php echo $lang['sluit'] ?>" /></a>');

        //Define margin for center alignment (vertical   horizontal) - we add 80px to the height/width to accomodate for the padding  and border width defined in the css
        var popMargTop = ($('#' + popID).height() + 20) / 2;
        var popMargLeft = ($('#' + popID).width() + 20) / 2;

        //Apply Margin to Popup
        $('#' + popID).css({
            'margin-top' : -popMargTop,
            'margin-left' : -popMargLeft
        });

        //Fade in Background
        $('body').append('<div id="fade"></div>'); //Add the fade layer to bottom of the body tag.
        $('#fade').css({'filter' : 'alpha(opacity=80)'}).fadeIn(); //Fade in the fade layer - .css({'filter' : 'alpha(opacity=80)'}) is used to fix the IE Bug on fading transparencies
    };

    $('a.poplight[href=#?w=400]').popOpen(); //Run popOpen function once on load

    //Close Popups and Fade Layer
    //$('a.close, #fade').live('click', function() { //When clicking on the close or fade layer...
    $('a.close').live('click', function() { //When clicking on the close...
        $('#fade , .popup_block').fadeOut(function() {
            $('#fade, a.close').remove();  //fade them both out
            location.reload(); // reload page
        });
        return false;
    });

    popOpen
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:30:29.103

当你第一次显示你的弹出窗口时设置一个 cookie。然后在再次显示之前，在显示之前检查 cookie 是否存在。

```
$(document).ready(function(){
    if (cookie is set){
        return ;
    }

    show cookie code

    then mark cookie as set
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:33:59.953

您单击实际链接以关闭弹出窗口，其中可能包含 # 符号作为 href，这会导致浏览器重新加载页面。为您关闭功能尝试这样的事情

```
$('a.close').live('click', function(e) { //When clicking on the close...
        e.preventDefault();
        $('#fade , .popup_block').fadeOut(function() {
            $('#fade, a.close').remove();  //fade them both out
            location.reload(); // reload page
        });
        return false;
    }); 
```

这可以防止链接执行其默认操作，并且应该导致弹出窗口在加载时仅显示一次

# ruby - 如何按值对哈希数组进行排序？

> ID：11802065
> 
> 赞同：1
> 
> 时间：2012-08-03T19:26:04.690
> 
> 标签：ruby, arrays, sorting, hash

我正在尝试根据给定的键值对哈希数组进行排序，并将首先在数组顶部返回该值，然后是剩余数据。

示例是：

```
students = [{name: "John Doe", age: 16, adviser: "Mrs. Robinson"},
            {name: "John Smith", age: 18, adviser: "Mrs. Williams"},
            {name: "Michael Rodriguez", age: 17, adviser: "Mr. Lee"}]

def sort_by_adviser(data, name)
  ...
end

> sort_by_adviser(students, "Mr. Lee")
=> [{name: "Michael Rodriguez", age: 17, adviser: "Mr. Lee"},
    {name: "John Doe", age: 16, adviser: "Mrs. Robinson"},
    {name: "John Smith", age: 18, adviser: "Mrs. Williams"}]

> sort_by_adviser(students, "Mrs. Williams")
=> [{name: "John Smith", age: 18, adviser: "Mrs. Williams"},
    {name: "Michael Rodriguez", age: 17, adviser: "Mr. Lee"},
    {name: "John Doe", age: 16, adviser: "Mrs. Robinson"}] 
```

这里的输出将顾问的名字放在列表的顶部，然后是数组中的其他哈希值。

```
> sort_by_keyvalue(data, "Z")
=> [{letter: 'Z'},
    {letter: 'A'},
         .
         .
         .
    {letter: 'Y'}]

> sort_by_keyvalue(data, 5)
=> [{number: 5, value: 'value1'},
    {number: 5, value: 'value2'},
    {number: 5, value: 'value3'},
    {number: 9, value: 'value1'},
    {number: 9, value: 'value2'},
    {number: 8, value: 'value1'},
    {number: 8, value: 'value2'},
    {number: 7, value: 'value1'},
    {number: 6, value: 'value1'},
    {number: 4, value: 'value1'},
    {number: 3, value: 'value1'},
    {number: 2, value: 'value1'},
    {number: 1, value: 'value1'},
    {number: 1, value: 'value2'},
    {number: 0, value: 'value1'}] 
```

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:21:25.713

另一个实现:)

```
def sort_by_adviser(data, name)
    data.each_with_index do |hash,index|
      if hash[:adviser]==name
         data.delete_at index #delete from array
         data.unshift hash
         break
      end
    end
   data
end

 > sort_by_adviser(students, "Mr. Lee")  
 #=> [{:name=>"Michael Rodriguez", :age=>17, :adviser=>"Mr. Lee"}, {:name=>"John Doe", :age=>16, :adviser=>"Mrs. Robinson"}, {:name=>"John Smith", :age=>18, :adviser=>"Mrs. Williams"}] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T19:49:04.700

```
def creamy_sort(key, value, arr)
  top, bottom = arr.partition{|e| e[key] == value }
  top.concat(bottom.sort{|a,b| b[key] <=> a[key]})
end

creamy_sort(:adviser, "Mr. Lee", students) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T19:52:08.137

我有这个解决方案：

```
students = [{name: "John Doe", age: 16, adviser: "Mrs. Robinson"},
            {name: "John Smith", age: 18, adviser: "Mrs. Williams"},
            {name: "Michael Rodriguez", age: 17, adviser: "Mr. Lee"}]

def sort_by_adviser(data, *name)
  data.sort_by{| entry |    
    [ 
      name.index(entry[:adviser]) || 999,
      entry[:age], entry[:name] #2nd sort criteria
    ]
  }
end

p sort_by_adviser(students, "Mr. Lee")
#[{:name=>"Michael Rodriguez", :age=>17, :adviser=>"Mr. Lee"}, {:name=>"John Doe", :age=>16, :adviser=>"Mrs. Robinson"}, {:name=>"John Smith", :age=>18, :adviser=>"Mrs. Williams"}]

p sort_by_adviser(students, "Mrs. Williams")
# [{:name=>"John Smith", :age=>18, :adviser=>"Mrs. Williams"}, {:name=>"John Doe", :age=>16, :adviser=>"Mrs. Robinson"}, {:name=>"Michael Rodriguez", :age=>17, :adviser=>"Mr. Lee"}] 
```

我不明白，剩余条目的排序是什么。

你写道：*然后是剩余的数据。*哈希的顺序标准是什么？

我选择了年龄，然后是名字。但是您可以根据需要对其进行调整。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T19:47:04.990

你可以这样做：

```
def sort_by_adviser(data, name)
  data = data.sort{|x,y|x[:adviser] <=> y[:adviser]}
  i = data.index{|h|h[:adviser] = name}
  h = data.delete_at i
  data.unshift h
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-03T20:03:44.997

```
def weird_sort(array, key, value)
  return array.sort_by{|d| 2 <=> (d[key] == value).object_id}
end 
```

这是基于在红宝石中`true.object_id`等于的事实。`2`一种奇怪的解决方案，这就是为什么它是一个`weird_sort`:p 它也弄乱了其他值排序......所以它只保证你的值相等！

# ruby-on-rails - 嵌套形式的质量分配

> ID：11802067
> 
> 赞同：2
> 
> 时间：2012-08-03T19:26:11.760
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我正在关注 railscasts 196 集，我尝试了他所拥有的，但我遇到了以下错误

```
ActiveModel::MassAssignmentSecurity::Error in SurveysController#create
Can't mass-assign protected attributes: questions_attributes
Rails.root: /home/jean/rail/surveysays 
```

到目前为止我的代码

调查表格

```
<%= form_for(@survey) do |f| %>
  <% if @survey.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@survey.errors.count, "error") %> prohibited this survey from being saved:</h2>

      <ul>
      <% @survey.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>

  <%= f.fields_for :questions do |bf|%>
    <%= bf.label :content, "Question" %><br />
    <%= bf.text_area :content, :rows=> 3 %>
  <% end %>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

调查关系

```
class Survey < ActiveRecord::Base
  has_many :questions, :dependent => :destroy
  accepts_nested_attributes_for :questions
  attr_accessible :name
end 
```

问题关系

```
class Question < ActiveRecord::Base
  belongs_to :survey
  attr_accessible :content, :survey_id
end 
```

新控制器

```
def new
    @survey = Survey.new
    3.times {@survey.questions.build }

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @survey }
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:30:40.167

把你的班级改成这个

```
class Survey < ActiveRecord::Base
  has_many :questions, :dependent => :destroy
  accepts_nested_attributes_for :questions
  attr_accessible :name, :questions_attributes
end 
```

[在此处](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)查找主题“与 attr_accessible 一起使用”以获取更多信息

# web-applications - 测试 Spring 安全性

> ID：11802071
> 
> 赞同：2
> 
> 时间：2012-08-03T19:26:44.663
> 
> 标签：web-applications, spring-security

我已经使用 Spring security 保护了我的服务器并尝试对其进行测试。我的测试包括登录一个测试用户（已经存在于数据库中），然后尝试访问一个安全的 URL，该 URL 需要对用户进行身份验证并具有特定的角色。

这是我的代码，

我创建了一个安全上下文：

```
<!-- URL's that start with the "app/secured" prefix requires authentication -->
<http auto-config="false" use-expressions="true">
    <form-login login-processing-url="/app/login"
        authentication-success-handler-ref="ajaxAuthenticationSuccessHandler"
        authentication-failure-handler-ref="ajaxAuthenticationFailureHandler" />
    <intercept-url pattern="/**" access="permitAll" />
    <intercept-url pattern="**/app/secured/**" access="isAuthenticated()" />
</http>

<authentication-manager alias="authenticationManager">
    <authentication-provider user-service-ref="myUserDetailsService">
        <password-encoder ref="passwordEncoder">
            <salt-source user-property="creationTime" />
        </password-encoder>
    </authentication-provider>
</authentication-manager>

<beans:bean id="passwordEncoder"
    class="me.co.server.bl.security.ExtendedShaPasswordEncoder" />

<beans:bean id="ajaxAuthenticationSuccessHandler"
    class="me.co.server.web.resource.register.login.AjaxAuthenticationSuccessHandler" />

<beans:bean id="ajaxAuthenticationFailureHandler"
    class="me.co.server.web.resource.register.login.AjaxAuthenticationFailureHandler" />

<beans:bean id="myUserDetailsService"
    class="me.co.server.bl.security.MyUserDetailsService" /> 
```

我在 web.xml 的顶部添加了安全上下文和安全过滤器：

```
<!-- Spring Security -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
    /WEB-INF/spring/applicationContext.xml
    /WEB-INF/spring/security-context.xml
    </param-value>
</context-param> 
```

这是我的网络层球衣实现：

```
@Path("/secured/{resourceName}")
@Component
public class SecuredResourceProvider extends ServiceResourceProvider {

    /*--- Members ---*/

    private ILogger logger = LogManager.getLogger(SecuredResourceProvider.class);

    @Inject
    protected SecuredResourceFactory securedResourceFactory;

    /*--- Constructors ---*/

    protected SecuredResourceProvider() {
    super("Secured");
    }

    /*--- Public Methods ---*/

    @GET
    @Produces("application/json")
    @Path("/{resourceId}")
    public String getSecuredResource(@PathParam("resourceId") String resourceId, @PathParam("resourceName") String resourceName)
        throws UnhandledResourceException, UnauthorizedAccessException, ServerInternalErrorException, JsonException, ResourceArgumentException {

    // NOT IMPLEMENTED AT THE MOMENT //

    return null;
    }

    @PUT
    @Consumes(MediaType.APPLICATION_JSON)
    @Produces(MediaType.TEXT_PLAIN)
    @Path("/{code}")
    public String putSecuredResource(String resourceData, @PathParam("code") String ownerResourceId, @PathParam("resourceName") String resourceName)
        throws UnhandledResourceException, UnauthorizedAccessException, ServerInternalErrorException, JsonException, ResourceArgumentException {

    if (SecuredResources.isSecuredResource(resourceName)) {
        IResource<String> resource = securedResourceFactory.getResourceInstance(resourceName);

        String resourceString = resource.put(ownerResourceId, resourceData);
        return createReturnResourceString(resourceString);
    } else {
        throw new UnhandledResourceException("Invoking a secured method for an unsecured resource " + resourceName);
    }
    }

    @POST
    @Consumes(MediaType.APPLICATION_JSON)
    @Produces(MediaType.TEXT_PLAIN)
    @Path("/{resourceId}")
    public String postSecuredResource(String resourceData, @PathParam("resourceName") String resourceName, @PathParam("resourceId") String resourceId)
        throws UnhandledResourceException, UnauthorizedAccessException, ServerInternalErrorException, JsonException, ResourceArgumentException {

    if (SecuredResources.isSecuredResource(resourceName)) {
        IResource<String> resource = securedResourceFactory.getResourceInstance(resourceName);
        String resourceString = resource.post(resourceId, resourceData);
        return createReturnResourceString(resourceString);
    } else {
        throw new UnhandledResourceException("Invoking a secured method for an unsecured resource " + resourceName);
    }
    }

    @DELETE
    @Consumes(MediaType.TEXT_PLAIN)
    @Produces(MediaType.TEXT_PLAIN)
    @Path("/{code}")
    public String deleteSecuredResource(String resourceId, @PathParam("code") String ownerResourceId, @PathParam("resourceName") String resourceName)
        throws UnhandledResourceException, UnauthorizedAccessException, ServerInternalErrorException, JsonException, ResourceArgumentException {

    if (SecuredResources.isSecuredResource(resourceName)) {
        IResource<String> resource = securedResourceFactory.getResourceInstance(resourceName);

        String resourceString = resource.delete(ownerResourceId, resourceId);
        return createReturnResourceString(resourceString);
    } else {
        throw new UnhandledResourceException("Invoking a secured method for an unsecured resource " + resourceName);
    }
    }
} 
```

除了根据我的 url 的拦截定义，这个 spring bean 应该是安全的（需要经过身份验证的用户）之外，这里没有什么特别的。Web 层将请求委托给业务逻辑层，业务逻辑层使用方法安全注释进行保护：

```
 @Override
    @Secured("ROLE_BRAND_MANAGER")
    public String post(String gymCode, String trainingSessionJson) throws UnhandledResourceException, ServerInternalErrorException,
        ResourceArgumentException, JsonException {

...

} 
```

为此，我将 global-method-security 声明添加到我的**application-context**：

```
<security:global-method-security secured-annotations="enabled" proxy-target-class="true"/> 
```

发布的用户是品牌经理（就当局而言），但目前这些 suthorities 并没有持久化，而是从实体硬编码返回：

```
@Entity
@Table(name = "brand_managers")
public class BrandManager implements Serializable, UserDetails {

    /** Serial version unique id */
    private static final long serialVersionUID = -7992146584570782015L;

    public static final String ROLE = "ROLE_BRAND_MANAGER";

    /*--- Members ---*/

    /** The unique, internal ID of the entity. */
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id")
    private long id;

    /**
     * The creation time of this user
     */
    @Column(name = "creation_time")
    protected long creationTime;

    /**
     * The hashed password
     */
    @Column(name = "password")
    protected String password;

    @Column(name = "first_name")
    protected String firstName;

    @Column(name = "last_name")
    protected String lastName;

    @Column(name = "email")
    protected String eMail;

    @Column(name = "address1")
    protected String address1;

    @Column(name = "address2", nullable = true)
    protected String address2;

    @Column(name = "city")
    protected String city;

    @Column(name = "state")
    protected String state;

    @Column(name = "zip", nullable = true)
    protected String zip;

    @Column(name = "country")
    protected String country;

    @Column(name = "phone")
    protected String phone;

    @Column(name = "brand_id")
    protected int brandId;

    /*--- Constructors ---*/

    /**
     * default
     */
    public BrandManager() {
    setCreationTime(Calendar.getInstance().getTimeInMillis());
    }

    public BrandManager(String password, String firstName, String lastName, String eMail, String address1, String address2, String city,
        String state, String zip, String country, String phone, int brandId) {
    this();
    this.password = password;
    this.firstName = firstName;
    this.lastName = lastName;
    this.eMail = eMail;
    this.address1 = address1;
    this.address2 = address2;
    this.city = city;
    this.state = state;
    this.zip = zip;
    this.country = country;
    this.phone = phone;
    this.brandId = brandId;
    }

    /*--- Overridden Methods ---*/

    @Override
    public Collection<? extends GrantedAuthority> getAuthorities() {
    // currently not holding authorities in DB, but returning hard-coded
    return AuthorityUtils.createAuthorityList(ROLE);
    }
... getter and setters...

} 
```

我的 UserDetailsS​​ervice 简单地从数据库加载用户（使用 dao 委托）。

现在，当我测试我的服务器（在 tomcat 中运行）并调用安全 URL 时，我看到了一些奇怪的东西。我在AffirmativeBased类的“决定”方法中放了一个断点，这是Spring安全的DecisionManager的默认实现：

公共无效决定（身份验证，对象对象，集合 configAttributes）抛出 AccessDeniedException { int deny = 0;

```
for (AccessDecisionVoter voter : getDecisionVoters()) {
    int result = voter.vote(authentication, object, configAttributes);

    if (logger.isDebugEnabled()) {
        logger.debug("Voter: " + voter + ", returned: " + result);
    }

    switch (result) {
    case AccessDecisionVoter.ACCESS_GRANTED:
        return;

    case AccessDecisionVoter.ACCESS_DENIED:
        deny++;

        break;

    default:
        break;
    }
} 
```

并且在调用我的服务方法时，该方法使用@Secured 注释进行注释，我看到“configAttributes”属性包含一个值为 [permitAll] 的元素，这不是我期望看到的。我希望看到“ROLE_BRAND_MANAGER”。我在调试错误的地方吗？我怎么知道我的安全相关代码是正确的？

在此先感谢，瑜伽士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T23:35:40.947

在这样的命名空间配置中实际上有两个`AccessDecisionManager`实例。一种用于网络安全，一种用于方法安全。如果需要，两者都可以被覆盖。

您的断点可能意味着您正在查看网络安全（如果您在调试器中检查堆栈，这应该很明显）。

确保它`global-method-security`与要保护的 bean 在同一个上下文文件中。Spring Security FAQ 中提供了更多信息，您还可以在 SO 上找到有关父/子 spring 上下文文件的其他讨论。通常，如果您想保护在您的调度程序 servlet 配置文件（例如`spring-servlet.xml`）中声明的 MVC 控制器或其他 Web bean，那么它也应该放在那里。它们不会从主应用程序上下文（由`ContextLoaderListener`您的 中加载的那个`web.xml`）中可见，因此如果您将方法安全元素放在那里，它将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:58:33.830

正如 php-coder 所建议的：

> 第一条规则总是获胜，所以我建议重新排序 intercept-url-s 并将 permitAll 移动到最后。

我不得不切换我的 url 拦截定义的顺序，现在流程变得有意义了。

# oracle - 原因：FDPSTP 由于 ORA-06550 失败：第 1 行，第 7 列：PLS-00221：不是程序或未定义

> ID：11802076
> 
> 赞同：0
> 
> 时间：2012-08-03T19:27:01.917
> 
> 标签：oracle, plsql

我正在尝试在 APPS 中运行并发请求，但我不断收到此错误

```
(Cause: FDPSTP failed due to ORA-06550: line 1, column 7:
PLS-00221: 'XXINV_ITEM_ORACLE_E5B0' is not a procedure or is undefined
ORA-06550: line 1, column 7:  
PL/SQL: Statement ignored) 
```

这是我的包裹体，它只是一个简单的插入。

```
CREATE OR REPLACE PACKAGE BODY  APPS.XXINV_ITEM_ORACLE_E5B0 IS
PROCEDURE  inv_com_proc (
      o_chr_errbuf     OUT      VARCHAR2,
      o_num_retcode    OUT      NUMBER
  )
AS
  begin
  EXECUTE IMMEDIATE 'TRUNCATE TABLE  XXINV.XXINV_ITEM_ORACLE_E5B0';
  Insert into XXINV.XXINV_ITEM_ORACLE_E5B0(ORGANIZATION_CODE ,
  ITEM_NUM, 
  ON_HAND_QUANTITY ,
  ITEM_TYPE ,
  STATUS ,
  MATERIAL_COST ,
  MATERIAL_OVERHEAD_COST,
  RESOURCE_COST,
  OVERHEAD_COST,
  OUTSIDE_PROCESSING_COST,
  SUBINVENTORY_CODE ,
  LOCATORS )
  select OWNING_ORG_CODE, ITEM_NUMBER, ON_HAND_QUANTITY, ITEM_TYPE, STATUS, MATERIAL_COST ,
  MATERIAL_OVERHEAD_COST,
  RESOURCE_COST,
  OVERHEAD_COST,
  OUTSIDE_PROCESSING_COST,
  SUBINVENTORY_CODE ,
  LOCATOR
  from apps.XXRPT_INV_VALUATION_D535_V
  where apps.XXRPT_INV_VALUATION_D535_V.SUBINVENTORY_CODE = 'FG' AND apps.XXRPT_INV_VALUATION_D535_V.STATUS = 'ONHAND';
  COMMIT;
  END;

end XXINV_ITEM_ORACLE_E5B0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T22:49:33.320

当您在系统管理中定义并发程序可执行文件时，请确保您的**执行文件名**包含`schema.package.procedure`，如`APPS.XXINV_ITEM_ORACLE_E5B0.inv_com_proc`（无括号）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:22:26.973

看来您正在尝试执行包本身 - 那是行不通的。您必须在包中执行一个过程/函数：

```
DECLARE
  o_chr_errbuf  VARCHAR2(256);
  o_num_retcode NUMBER;
BEGIN 
  APPS.XXINV_ITEM_ORACLE_E5B0.inv_com_proc ( o_chr_errbuf, o_num_retcode);
END;
/ 
```

一个简单的测试：

```
DECLARE
  err VARCHAR2(256);
  CODE NUMBER;
BEGIN xx(err, CODE); END;

ORA-06550: line 5, column 7:
PLS-00221: 'XX' is not a procedure or is undefined
ORA-06550: line 5, column 7:
PL/SQL: Statement ignored
SQL> SELECT * FROM a;

                                     ID
---------------------------------------
SQL> DECLARE
  2    err VARCHAR2(256);
  3    CODE NUMBER;
  4  BEGIN
  5    xx.tst(err, CODE);
  6  END;
  7  /

PL/SQL procedure successfully completed
SQL> SELECT * FROM a;

                                     ID
---------------------------------------
                                      1 
```

# css - 有什么方法可以忽略复制时的 css 样式吗？

> ID：11802083
> 
> 赞同：1
> 
> 时间：2012-08-03T19:27:41.293
> 
> 标签：css, copy-paste

例子：

```
<p style="color:blue; font-family:Consolas">blue text</p> 
```

用户选择文本、复制和粘贴（所见即所得、单词等）。文本没有蓝色和 consolas 字体？

从浏览器到浏览器 = 简单内容到所见即所得

从浏览器到单词

有一本包含可用于内容的关键字的手册。用户通常直接从手册中复制关键字并粘贴到编辑器中。所以编辑器采用手册的风格。这就是我不想要的。我可以禁用选择或更改关键字的标签以输入和设置样式，但存在一种简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:30:07.850

这是本机操作系统/软件功能。这不是您可以通过 js/html 控制的。

但是，您可以通过 javascript 构建一个函数，将该文本复制到剪贴板。

或者在您的选项中搜索本机功能以将其关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:43:19.283

这是所有 Windows 操作系统的默认设置。当您选择文本时，选择区域中将出现蓝色。手动我们从不改变颜色。我认为这个答案对你很有用......

# r - XTS 的日期来自不同的来源。使用 R 计算 beta

> ID：11802086
> 
> 赞同：5
> 
> 时间：2012-08-03T19:27:47.483
> 
> 标签：r, finance, xts, quantmod

我对 R 有点陌生。我想我的错误对有经验的人来说是微不足道的。

我正在尝试编写一个 R 程序来计算许多股票的 beta。股票代码从 读取`Input.csv`，数据从 yahoo 下载。然后，代码循环遍历每只股票的 beta 计算，并输出一个总结回归的 csv。

当所有时期都假设一个单一的无风险利率时，我让代码工作，但我相信在标准化超额收益时我可能需要使用每个月的实际无风险利率。我在这一步遇到问题。xts 已从 FRED (GS20) 成功下载，但是当从证券和市场回报中减去回报时，它会产生一个长度为零的 xts。这会杀死程序。

我相信这可能是因为 FRED 和雅虎之间的日期格式不同。我注意到 getSymbols 命令忽略了起始日期。任何帮助，将不胜感激。

```
require(PerformanceAnalytics)
require(quantmod)
require(car)

setwd("R Projects/Beta Test")

proxy <- read.csv("Input.csv",header=FALSE)[,1]
summary <- as.data.frame(matrix(0, ncol = 5, nrow = 0))

mar <- getSymbols("^GSPC", src = "yahoo", from = as.Date("2006-01-01"),
                  to = as.Date("2011-12-31"),auto.assign=FALSE)
riskFree <- getSymbols("GS20", src = "FRED", from = as.Date("2006-12-01"),
                       to = as.Date("2011-12-31"),auto.assign=FALSE)

for (n in proxy){

    sec <- getSymbols(n, src = "yahoo", from = as.Date("2006-01-01"),
                      to = as.Date("2011-12-31"),auto.assign=FALSE)

    #Monthly Returns
    #ERROR PRODUCED HERE
    sec.xsmonthly <- monthlyReturn(to.monthly(sec),type="log") - riskFree
    mar.xsmonthly <- monthlyReturn(to.monthly(mar),type="log") - riskFree

    sec.reg <- lm(sec.xsweekly ~ mar.xsmonthly + lag(mar.xsmonthly,-1))

    summary[n,1] <- coef(sec.reg)[1]
    summary[n,2] <- coef(sec.reg)[2]
    summary[n,3] <- coef(sec.reg)[3]
    summary[n,5]<-summary(sec.reg)$r.squared
}

summary[,4] <- summary[,2]+summary[,3]

colnames(summary) <- c("Alpha","Beta","Beta-Lag","Sum Beta","R-Squared")
write.csv(summary,file="output.csv") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:38:01.767

请注意，`getSymbols.FRED`它没有`from`和`to`参数，因为无法使用日期范围查询 FRED。问题是 FRED 日期在每个月初对齐，而 的输出`to.monthly`在每个月底对齐。`to.monthly`解决此问题的一种方法是在`riskFree`循环之前调用：

```
mar <- getSymbols("^GSPC", from="2006-01-01", to="2011-12-31", auto.assign=FALSE)
riskFree <- getSymbols("GS20", src="FRED", auto.assign=FALSE)

riskFree <- Cl(to.monthly(riskFree))
mar.xsmonthly <- monthlyReturn(to.monthly(mar),type="log") - riskFree 
```

# java - 如何启用 Mockito 调试消息？

> ID：11802088
> 
> 赞同：34
> 
> 时间：2012-08-03T19:28:11.573
> 
> 标签：java, debugging, testing, mockito

如何启用[Mockito](http://code.google.com/p/mockito/)调试消息？特别是，我想打印带有存根的方法的详细信息`when()`以及与这些方法的每次交互。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-03T19:57:46.347

Mockito 1.9.0 引入了监听器，现在捆绑了一个详细的记录器：

所以基本上如果你想要简单而愚蠢的日志，只需执行以下操作：

```
List mockWithLogger = mock(List.class, withSettings().verboseLogging()); 
```

有关详细信息，请参阅[http://docs.mockito.googlecode.com/hg/latest/org/mockito/MockSettings.html#verboseLogging](http://docs.mockito.googlecode.com/hg/latest/org/mockito/MockSettings.html#verboseLogging) ()

干杯，

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-03-19T12:00:01.750

布莱斯的答案是要走的路，但另一种选择是：

```
new org.mockito.internal.debugging.MockitoDebuggerImpl().printInvocations(mockedObject); 
```

它只是将在该点之前发生的交互打印到给定选项。不够健壮，但可以解决问题并且在某些情况下可能有用（即使用模拟注释时）

例如，这应该根据[MockitoSettings工作](http://docs.mockito.googlecode.com/hg/org/mockito/MockSettings.html#spiedInstance%28java.lang.Object%29)

```
spiedObject = mock(ToMock.class, withSettings().spiedInstance(toMockInstance).verboseLogging()) 
```

虽然在 1.9.5 中似乎没有监视任何东西，它只是在嘲笑它。

# actionscript-3 - 如何将所有键盘输入捕获到自定义元素？

> ID：11802092
> 
> 赞同：0
> 
> 时间：2012-08-03T19:28:24.413
> 
> 标签：actionscript-3, flash

这是我的问题：我的加载程序中有一个 swf，在那个 swf 中我有一个 keylistener：

```
stage.addEventListener(KeyboardEvent.KEY_DOWN, this.__onKeyDown, false, int.MAX_VALUE); 
```

现在我在这个阶段添加了一个 TextInput，我希望这个输入能够在我关注它时捕获所有键盘事件。是否有可能在我的 TextInput 失去焦点之前，本机 __onKeyDown 不会触发？

谢谢你的回答，对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:31:20.940

你可以给你的听众更高的优先级（你是），并在你的处理程序中停止AllPropogation。我从来没有用嵌入式 swf 尝试过这个，所以如果它不能立即工作，你也可以尝试在捕获阶段监听事件（addEventListener 中的第三个参数）。

```
function __onKeyDown(e:KeyboardEvent):void {
    e.stopImmediatePropagation();
    //rest of you handler code here 
} 
```

# design-patterns - 接受日期的设计模式

> ID：11802093
> 
> 赞同：-1
> 
> 时间：2012-08-03T19:28:28.990
> 
> 标签：design-patterns, date-format

我的一位朋友接受了采访，这是被问到的问题，

Web 应用程序应该接受任何模式的日期，

即它可以mm-dd-yy/dd-mm-yyyy/dd-mm-yy,Jan-dd-yyyy..任何你能想到的日期模式..

他需要一个功能，一旦用户输入，它将逐个字符地验证。

我们如何处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:54:14.907

也许我误解了，但如果问题是关于**验证**，那么它不是关于解码日期，而只是确保日期不是无效的。也就是说，不允许您输入 29-02-2011 或 02-29-11 等等。

我要做的是编写一个函数，首先将日期分成几部分。鉴于这个问题，我们可以说日期将采用数字形式，因此需要一个分隔符。让我们使用 (. - /) 作为可能的分隔符。使用分隔符将日期分成三部分，以便在内存中拥有三个不同的数值。

现在讲逻辑。第一个值可以是任何值（d，m，y）。第二个值永远不会是一年，所以它只能是 (d, m)。第三个值永远不会是一个月，所以它只能是 (d, y)。牢记这一点，我会按照以下方式做一些事情：

1.  尝试查找年份，因为它没有范围。x > 31 的任何值 x 都必须是年份。

2.  试着找到那一天。任何不是年份且大于 12 的值都必须是日期。

3.  获得这些值后，请快速检查以确保月份 <= 12。如果不是，则日期无效。

...但是模棱两可呢..？

在模棱两可的情况下，例如 01-01-01，您将必须使用上述逻辑找出每个值*可能*是什么。给定每个日期段的值，您需要编写一个函数来测试每种可能性。我想如果您尝试验证日期，如果日期通过至少一项测试，您会将其标记为有效。基本上，您只需编写一个函数，说明给定年份中的给定月份（不要忘记闰年），这一天可以落入什么范围，然后循环遍历给定日期的每个可能情况。

如果问题是要真正破译日期，那么正如已经解释的那样，在不施加格式限制的情况下不可能 100% 准确地做到这一点。您唯一的其他选择是挂钩 JS 事件以在字段值更改时触发，并在字段更新旁边以长格式（2012 年 1 月 1 日）显示软件认为用户输入的日期。您如果您愿意，甚至可以使该日期可点击，以允许用户循环使用不同的格式。最后，如果这是您所要求的，那么您将不会获得实现您想做的事情的具体方法。

# c++ - 使用 C++ 并发，我需要使用互斥吗？

> ID：11802094
> 
> 赞同：1
> 
> 时间：2012-08-03T19:28:35.930
> 
> 标签：c++, multithreading, thread-safety, mutex

我必须设计一个从本地网络读取 UDP 数据并将数据存储在当前值表 (CVT) 中的应用程序。

然后，将出现一个单独的线程并从 CVT 中读取值，对它们进行处理，然后通过 UDP 将它们发送出去。CVT 条目将由单独的标量组成，例如浮点数和整数。

我的问题是，我需要多少互斥来保护 CVT 的更新/读取？

换句话说，如果我有一个线程写入 32 位 int 并且另一个线程从该 int 读取，我是否需要为此使用互斥锁？

我不在乎阅读器线程是否没有获得存储的绝对最新值，我只是担心在更改该位置时尝试读取该位置。我知道关键字“volatile”在 Java 中用于这种情况，但它在 C++ 中并没有做同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T19:33:07.077

这里很大程度上取决于您使用哪种平台来支持线程。如果您有可用的原子类型，则可以使用它们。否则，是的，你几乎被一个互斥锁（某种类型的——许多平台有不止一种类型）困住了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:40:07.367

正如您描述这个问题时，只要您只有一个编写器，它就已经是线程安全的（假设代码在 32 位或更高字宽的处理器上运行 - 在这种情况下，32 位写入是原子的）。

`volatile`存储修饰符告诉编译器变量具有非标准的加载存储语义——即它不能依赖 CPU 寄存器中的副本与内存中的值保持一致。
一般的副作用是禁用围绕该变量的任何优化（即那些依赖于内存中的存储而不改变其下方的优化）。结果是每次使用时都会从内存中重新加载。

`volatile`这是在多线程情况下使用 的少数场合之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:33:44.263

这取决于您为当前值表使用的内容。如果您使用的是 SQLServer 之类的数据库，那么您不必担心，因为数据库会处理它。

如果您使用的是文件系统，那么您的问题仍然存在。

您可以编写一个基于 TCP 的客户端/服务器，将请求排队并按顺序响应它们。

如果您正在使用内存，那么您将需要使用互斥锁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T19:42:49.423

只要您的 32 位`int`在内存中正确对齐，我猜这是因为它在大多数现代平台上默认设置，读取实际上`int`是线程安全的。

# c# - 在 MVC 应用程序中工作的生产数据库上获取现有 Crystal Report 所涉及的步骤？

> ID：11802096
> 
> 赞同：0
> 
> 时间：2012-08-03T19:28:42.140
> 
> 标签：c#, .net, asp.net-mvc-3, visual-studio-2010, crystal-reports

我是 Crystal Reports 世界的新手，我发现了各种关于在 VS 2010 中创建新 Crystal Report 的文章，但没有关于获取现有报表并使用它生成可以由用户。

这是我发现我试图作为开始使用的文章： [ASP.NET MVC 中的 Crystal Reports](https://stackoverflow.com/questions/348785/crystal-reports-in-asp-net-mvc)

在我们的 ERP 系统中运行原始报告时，我运行了 SQL Profiler，并尝试将此查询用作我的数据源，但每次我加载报告文件时，它都会引发异常：

```
 Exception Details: System.Runtime.InteropServices.COMException: Database logon failed. 
```

如果我通过代码进行调试，则 HasRecords

```
 '((CrystalDecisions.CrystalReports.Engine.ReportDocument)(rptH)).HasRecords' threw an exception of type 'CrystalDecisions.CrystalReports.Engine.LogOnException' 
```

我还尝试添加 SetDatabaseLogin 方法，使用用户名和密码以及 DBO 访问数据库，但得到了相同的结果。

```
 rptH.SetDatabaseLogon("username", "password"); 
```

所以为了长篇大论，我想知道是否有人知道一篇好文章，或者可以给我一些万无一失的步骤来让报告在我的代码中工作，在那里我可以返回一个 PDF（即使我硬编码 SQL首先......我只是想看看它的工作）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:57:01.047

这是我们在我工作的地方如何做的一个过于简化的版本......

```
protected void btnGetReport_Click(object sender, EventArgs e)
{
   System.Guid desiredGuid = System.Guid.NewGuid();
   desiredGuid = createReport();
   //open report in browser
   Response.Redirect(@"SecureReports\" + desiredGuid + ".pdf");
}

private System.Guid createReport()
{
    System.Guid desiredGuid = System.Guid.NewGuid();
    string workpath = "";
    ReportDocument reportDocument = new ReportDocument();

    workpath = @"c:\Reports\cr_myReport.rpt";

    reportDocument.FileName = workpath;
    reportDocument.SetDatabaseLogon("user", "pass", "SERVER\\sql", "database");
    reportDocument.SetParameterValue("@param", strParam);
//export CR to a pdf on the server
    reportDocument.ExportToDisk(ExportFormatType.PortableDocFormat, @"c:\SecureReports\" + desiredGuid + ".pdf");
//send location of pdf back to calling function
        return desiredGuid;
    } 
```

# visual-studio-2010 - 如何更改 Visual Studio 2010 中调试器执行点图标的颜色？

> ID：11802097
> 
> 赞同：2
> 
> 时间：2012-08-03T19:28:41.763
> 
> 标签：visual-studio-2010, user-interface, visual-studio-debugging

有什么方法可以更改 Visual Studio 2010 调试器中执行点箭头图标的颜色？

我说的是在当前执行指针所在行的左边距中的淡黄色箭头。我的问题是它与边缘的浅灰色背景的对比度非常差，有时我很难找到箭头。

我在 Visual Studio 设置中没有看到任何允许此更改的方法，虽然我发现链接到 vs 主题编辑器的[Change Visual Studio 2010 调色板](https://stackoverflow.com/questions/2727506/change-visual-studio-2010-color-palette)允许更改许多 VS UI 元素的主题 - 它没有t 似乎会影响调试器边距图标或边距颜色本身。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T12:07:26.900

是的，工具 > 选项 > 环境 > 字体和颜色 > 在“显示项目：”下，选择“当前语句”。自己做的:-)

# ruby-on-rails - Ruby On Rails：以一种形式创建同一类的多个对象

> ID：11802100
> 
> 赞同：0
> 
> 时间：2012-08-03T19:28:57.400
> 
> 标签：ruby-on-rails, multiple-instances

我需要能够以一种形式创建同一类 A 的多个对象。这些对象都将具有相同的属性，因此我不想单独创建这些对象。唯一不同的属性是 id 字段`b_id`，它引用另一个 B 类的实例。

我的目标是拥有与另一个模型 B 的所有实例相关的复选框，因此模型 B 的每个实例都会有一个复选框。所以，当我单击另一个模型 B 的 3 个特定实例的复选框时，我想要能够生成 3 个 A 类对象，除了`b_id`字段之外，它们都具有相同的属性。

如何设置我的表单以生成 A 类的多个实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:33:46.647

在您`create`对控制器的操作中，您可以获取标识实例创建次数的参数，然后执行以下操作：

```
number_of_instances = params[:times].to_i
number_of_instances.times do |obj|
  #=> Create instances, do whatever you want.
end 
```

# objective-c - Objective C 视频播放器有很多错误

> ID：11802103
> 
> 赞同：0
> 
> 时间：2012-08-03T19:29:05.480
> 
> 标签：objective-c

所以在模拟器上它工作得非常完美。没有错误，什么都没有 现在我想把它放在我的 iPod 上，但我得到了一些未知的错误，我不知道如何修复它们。

-我有`MediaPlayer.framework`，它包含在我的构建中

这是错误：

```
ld: warning: ignoring file /Users/NAME/Desktop/XCode/PROJECT/MediaPlayer.framework/MediaPlayer, file was built for unsupported file format which is not the architecture being linked (armv7)
Undefined symbols for architecture armv7:
  "_OBJC_CLASS_$_MPMoviePlayerViewController", referenced from:
      objc-class-ref in MoviePlayViewController.o
  "_MPMoviePlayerDidEnterFullscreenNotification", referenced from:
      -[MoviePlayViewController viewDidLoad] in MoviePlayViewController.o
  "_MPMoviePlayerWillExitFullscreenNotification", referenced from:
      -[MoviePlayViewController viewDidLoad] in MoviePlayViewController.o
  "_MPMoviePlayerPlaybackDidFinishNotification", referenced from:
      -[MoviePlayViewController viewDidLoad] in MoviePlayViewController.o
  "_MPMoviePlayerPlaybackDidFinishReasonUserInfoKey", referenced from:
      -[MoviePlayViewController playbackFinished:] in MoviePlayViewController.o
  "_MPMoviePlayerWillEnterFullscreenNotification", referenced from:
      -[MoviePlayViewController viewDidLoad] in MoviePlayViewController.o
  "_MPMoviePlayerDidExitFullscreenNotification", referenced from:
      -[MoviePlayViewController viewDidLoad] in MoviePlayViewController.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

谁能告诉我错误的含义以及我必须检查的内容？:)

谢谢

对我来说唯一可以理解的是：不支持的文件格式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T19:32:26.397

它找不到`MediaPlayer.framework`我认为是问题所在。您需要在构建设置中更新您的库头搜索路径。我相信它正在您的桌面上寻找它。

您可能需要将它添加到您的目标，重新链接它，或者只是确保它指向正确的位置。

# .htaccess - Codeigniter 中的 index.php 安装在子文件夹中

> ID：11802105
> 
> 赞同：0
> 
> 时间：2012-08-03T19:29:18.347
> 
> 标签：.htaccess, codeigniter

在我的项目中的子文件夹上安装 codeigniter 时遇到了一个小问题。问题是我无法`index.php`从网址中删除。`.htaccess`在我将它安装在子文件夹中之前，我有一个运行良好的文件。文件夹结构如下：

`test_project/myapp` myapp - codeigniter 安装文件夹。

CodeIgniter 配置：基本 url：“http://localhost/test_project/myapp/”

我的`.htaccess`文件包含以下内容：

```
RewriteEngine On  
RewriteBase /myapp
RewriteCond %{REQUEST_URI} ^system.*  
RewriteRule ^(.*)$ /index.php/$1 [L]  
RewriteCond %{REQUEST_FILENAME} !-f  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteRule ^(.*)$ index.php/$1 [L] 
```

`.htaccess`如果我将`codeigniter`安装转移到`test_project`.Ive 放置`.htaccess`在我的子文件夹（myapp）中，上述文件将完美运行`index.php`。

我已经在`WAMP`服务器上安装了它并且正在使用`codeigniter 2.1.2`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T03:47:33.730

删除或注释这些行：

```
RewriteBase /myapp
RewriteCond %{REQUEST_URI} ^system.*  
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

原因是 .htaccess 中的前 3 行是相对的，无论您决定将应用程序放在哪个目录中都应该有效。

# android - 检查共享首选项设置屏幕上的 editText

> ID：11802106
> 
> 赞同：0
> 
> 时间：2012-08-03T19:29:19.070
> 
> 标签：android, regex, sharedpreferences

我想知道是否有办法检查某人在共享首选项/设置屏幕上输入的内容以进行验证。用户触摸 Ip 输入选项，弹出一个 edittext 对话框，我试图将他们可以输入的内容限制为标准 IP 地址（即 0-255.0-255.0-255.0-255） 我查看过许多在线论坛并看到了使用 REGEX 和模式的不同事物的示例，这就是我到目前为止所拥有的，但绝对没有发生任何事情......有人可以帮助我吗？我将不胜感激！

```
 public class PrefsActivity extends PreferenceActivity implements
        OnSharedPreferenceChangeListener
{
    private EditTextPreference ipTextBox;
    private String whatWasTyped;
    private String previousText = "";
    private Editor myEditor;

    final Pattern IP_ADDRESS = Pattern
            .compile("^((1\\d{2}|2[0-4]\\d|25[0-5]|\\d?\\d)\\.){3}(?:1\\d{2}|2[0-4]\\d|25[0-5]|\\d?\\d)$");
    private String IP_FROM_PREFS = "ipAddressPref";
    SharedPreferences prefs;

    @Override
    /**
     * The onCreate method handles thing when starting this activity, 
     * mainly display the activity_settings.xml.
     */
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        // pattern for IP address validation
        addPreferencesFromResource(R.layout.activity_settings);

        // prefs.registerOnSharedPreferenceChangeListener(this);

        prefs = PreferenceManager.getDefaultSharedPreferences(this);
        // Get a reference to the preferences
        ipTextBox = (EditTextPreference) getPreferenceScreen().findPreference(
                IP_FROM_PREFS);

    }

    @Override
    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,
            String key)
    {
        // check prefs value for IP.

        if (key.equals(IP_FROM_PREFS))
        {

            whatWasTyped = prefs.getString(IP_FROM_PREFS, "");
            CharSequence s = whatWasTyped;
            if (IP_ADDRESS.matcher(s).matches())
            {
                previousText = s.toString();
                            myEditor = prefs.edit();
                            myEditor.putString(IP_FROM_PREFS, previousText);
                myEditor.commit();

            } else
            {
                //if the format does not match, put up an error message
                            // or something.

            }
        }

    }

    @Override
    protected void onResume()
    {
        super.onResume();

        // Setup the initial values
        // mCheckBoxPreference.setSummary(sharedPreferences.getBoolean(key,
        // false) ? "Disable this setting" : "Enable this setting");
        // mListPreference.setSummary("Current value is " +
        // sharedPreferences.getValue(key, ""));

        // Set up a listener whenever a key changes
        getPreferenceScreen().getSharedPreferences()
                .registerOnSharedPreferenceChangeListener(this);
        previousText = prefs.getString(IP_FROM_PREFS, "");
    }

    @Override
    protected void onPause()
    {
        super.onPause();

        // Unregister the listener whenever a key changes
        getPreferenceScreen().getSharedPreferences()
                .unregisterOnSharedPreferenceChangeListener(this);
    }

} 
```

由于这是在共享首选项屏幕上创建的，因此没有按钮 ID 等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:46:34.957

只是写

```
 whatWasTyped.replace(s, previousText); 
```

不会将 previousText 分配给 SharedPreference 您需要将其分配回共享首选项并提交。

# php - 使用 javascript 小部件到 php 的字符集编码

> ID：11802109
> 
> 赞同：2
> 
> 时间：2012-08-03T19:29:34.333
> 
> 标签：php, javascript, utf-8, character-encoding

我正在创建一个 Javascript 小部件，它是一个将查询字符串重定向到弹出窗口中的 php 页面的按钮。将集成小部件的页面首先使用以下方法将信息发送到 Javascript 小部件：

```
<script src="http://api.mydomain.com/widget/widget.js?api_key=123&firstname=Veronica&lastname=Gällman" type="text/javascript"></script> 
```

小部件读取提交的字符串，然后创建弹出窗口/iframe 并重定向到[http://api.mydomain.com/widget/index.php?firstname=Veronica&lastname](http://api.mydomain.com/widget/index.php?firstname=Veronica&lastname) =Gällman

当包含 JS 小部件的页面没有`charset=utf-8`. 特殊字符将变成问号或方框。

我的程序员希望我这样做：

```
<script type="text/javascript">
    var search = 'api_key='+encodeURIComponent('1234')+
        '&firstname='+encodeURIComponent('Veronica')+
        '&lastname='+encodeURIComponent('Gällman')+
    document.write( search );
</script> 
```

但我发现这种方法对于想要使用小部件的人来说是有问题的，而且一点也不优雅。

所以最后，我的问题是：有没有更好的方法来解决这个问题？

该脚本应支持具有`charset=utf-8`和`charset=iso-8859-1`在其上的页面。

我给他的建议是：

1.  强制积分器发送`&charset=iso-8859-1`查询字符串，如果不是utf-8，然后在index.php中将ISO转换为UTF-8

2.  使用库来检测字符编码。如果检测为 ISO，则在 index.php 中将其转换为 UTF-8

这些听起来合理吗？2号可以吗？或者有更好的解决方案吗？

我是否被迫告诉我的小部件用户`urlencode`在他们的页面上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:07:54.923

You can detect encoding using [mb_detect_encoding](http://php.net/manual/en/function.mb-detect-encoding.php) function and convert it with [mb_convert_encoding](http://www.php.net/manual/en/function.mb-convert-encoding.php) or [iconv](http://www.php.net/manual/en/function.iconv.php).

By the way, can't you make a world a better place by forcing people to use UTF-8? :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:30:50.380

正如 Donatas 已经提到的，最好强迫人们——尤其是在网络上！——在所有事情上都使用 UTF8。

但如果您需要将 UTF8 字符串转换为 ISO-8859-1，请尝试[http://phpjs.org/functions/utf8_decode](http://phpjs.org/functions/utf8_decode) ...

PS：请记住，并非所有 UTF8 字符都可以用 ISO-8859-1 表示法表示！

# batch-file - BAT 文件（批处理）中的嵌套循环返回不需要的结果

> ID：11802111
> 
> 赞同：3
> 
> 时间：2012-08-03T19:29:57.417
> 
> 标签：batch-file

我有以下代码。除了几个问题外，它工作得很好。首先，我的“如果不是空白”检查根本不起作用。其次，在每次迭代期间，它最后一次将服务器名作为服务器名和文件夹传递，我真的不明白......

**代码**

```
 SET servers=server01,server02
 SET drive=c
 SET root=program files (x86)\test\
 SET backup=%root%\backup 
 SET folders=folder01\,folder02\file01.txt

 FOR %%b in (%servers%) do (
    FOR %%a in (%folders% %%b) DO (
        if not %%a == "" call :backup %%b %%a
    )
 )

:backup
 SET currentfile="\\%1\%drive%$\%2"
 setlocal
 echo Backing Up %currentfile%
 REM mkdir "\\%1\%drive%$\%backup%"
 REM xcopy /I
 exit /b
 endlocal
 goto :end 
```

**输出**

```
1] Backing Up "\\server01\c$\folder01\"
2] Backing Up "\\server01\c$\folder02\file01.txt"
3] Backing Up "\\server01\c$\server01"
4] Backing Up "\\server02\c$\folder01\"
5] Backing Up "\\server02\c$\folder02\file01.txt"
6] Backing Up "\\server02\c$\server02"
7] Backing Up "\\\c$\" 
```

如您所见，不需要第 3、6 和 7 行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T19:58:55.210

第 3 行和第 6 行是由于`%%b`内部 for 循环引起的。第 7 行是因为脚本在循环后没有终止，所以它在`:backup`最后再次运行代码。

以下似乎给出了预期的结果：

```
@echo off

SET servers=server01,server02
SET drive=c
SET root=program files (x86)\test\
SET backup=%root%\backup 
SET folders=folder01\,folder02\file01.txt

FOR %%b in (%servers%) do (
    FOR %%a in (%folders%) DO (
        rem echo a is %%a
        if not %%a == "" call :backup %%b %%a
    )
)

exit /b

:backup
SET currentfile="\\%1\%drive%$\%2"
setlocal
echo Backing Up %currentfile%
REM mkdir "\\%1\%drive%$\%backup%"
REM xcopy /I
endlocal 
```

# xampp - 如何让手写笔与 xampp 一起使用并自动编译 .styl 文件？

> ID：11802112
> 
> 赞同：1
> 
> 时间：2012-08-03T19:29:59.993
> 
> 标签：xampp, localhost, stylus

嗨，我一直在寻找这个简单的答案。

我已经安装了 node.js 和 stylus 并且必须用 cmd 将 .styl 文件编译成 css ......现在我的问题是如何让它与 xampp 一起工作。

我希望能够编辑我的 .styl 文件并在我的 localhost/whatever 中查看结果。

提前感谢，如果这是一个真正的菜鸟问题，我很抱歉，但我一直在寻找并没有找到答案。

# ruby-on-rails - 如何在 ruby on rails 中传递参数

> ID：11802115
> 
> 赞同：-1
> 
> 时间：2012-08-03T19:30:10.413
> 
> 标签：ruby-on-rails

我有一个像

```
<%= form_for(@blood_donor_form) do |f| %>

    Blood Group   <%= f.text_field :bloodGroup %>

    <%= link_to "Search", findBlood_path , class: "btn btn-large btn-primary"%>

<% end %> 
```

控制器看起来像：

```
def findBlood
@blood_donor_form = BloodDonor.new 
@blood_donors = BloodDonor.find_all_by_bloodGroup("B+") 
end 
```

那么如何将值从 bloodGroup 字段传递给控制器​​？目前我对其进行了硬编码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:35:20.350

如果您没有搜索模型，请使用`form_for`助手或助手制作表单，并使用或在表单中设置的任何内容获取控制器中的搜索字段。`forn_tag``params[:search]`

# c# - 为什么我需要 Default.aspx.designer.cs 文件？

> ID：11802116
> 
> 赞同：1
> 
> 时间：2012-08-03T19:30:12.817
> 
> 标签：c#, asp.net, visual-studio-2010

当我用来创建 ASP.NET 网站时，文件后面只有一个代码，例如 Default.aspx.cs。同时我创建了 ASP.NET Web 应用程序，这次 Visual Studio 生成了一个附加代码作为 Default.aspx.designer.cs 我的问题为什么我需要它？我继承了 Page 类以外的一个类，所以我删除了“inherits="MySite.Default"。但是我在 Default.aspx.designer.cs 文件中提及标识符时出现错误。在这方面也请帮助我.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:17:02.453

设计器文件由 Visual Studio 自动生成，就像您在 aspx 和 aspx.cs 文件中编写的代码的脚手架一样。因为这些是自动生成的，所以您永远不需要或不应该接触这些文件。

我建议您将代码放回原处，根据需要从所需的其他类继承，并让 Visual Studio 担心设计器文件。

只需对那些 aspx 和 aspx.cs 文件进行更改即可，而无需考虑设计器文件。

在此处查找更多信息：[aspx.designer.cs 它是如何工作的？](https://stackoverflow.com/questions/3284710/aspx-designer-cs-how-does-it-work)

# azman - 有没有办法在 Net SQL AzMan 中执行“AND”而不是“OR”？

> ID：11802123
> 
> 赞同：0
> 
> 时间：2012-08-03T19:30:45.480
> 
> 标签：azman, netsqlazman

Net SQL AzMan 中的所有设置似乎都是基于“或”的。

例如：

> 如果您将 3 个（授权的）应用程序组添加到操作，则用户需要位于第一个或第二个或第三个中才能获得操作权限。
> 
> 我正在寻找一种方式来说明用户需要在（第一个和第二个）或（第一个和第三个）中。

**有没有办法做到这一点？**

*原因：*
我们的用户在部门之间移动时权限会滚雪球。我想为每个 Active Directory 部门设置一个角色（在上面的示例中为“第一个”）。如果我可以使上述逻辑正常工作，那么当用户更改部门时，他们将失去以前部门的权限（即使他们的老板很懒惰并且没有更新 AzMan）。

如果我不能在 AzMan 中使用它，那么我可以让我的应用程序来完成它。但在 AzMan 级别上会容易得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:45:31.803

您可以在操作上使用 BizRule 来执行此操作。它的代码有点矫枉过正，但这应该只需最少的修改。

```
using System;
using System.Security.Principal;
using System.IO;
using System.Data;
using System.Collections;
using System.Collections.Specialized;
using System.Collections.Generic;
using System.Text;
using NetSqlAzMan;
using NetSqlAzMan.Interfaces;

using System.Security.Principal;
using System.Reflection;

namespace APPLICATION.BizRules
{
    public sealed class BizRule : IAzManBizRule
    {
        public BizRule()
        { }

        public bool Execute(Hashtable contextParameters, IAzManSid identity, IAzManItem ownerItem, ref AuthorizationType authorizationType)
        {
            string sqlConnectionString = "data source=DATABASE_FQN;initial catalog=DATABASE;Integrated Security=false;User Id=USER_NAME;Password=PASSWORD";

            IAzManStorage storage = new SqlAzManStorage(sqlConnectionString);

            try
            {
                bool authorized = false;
                if (identity.StringValue.StartsWith("S"))
                {
                    //this is a little over kill but there is no way to reference standard .net libraries in NetSqlAzMan
                    Assembly asm = Assembly.Load(@"System.DirectoryServices.AccountManagement, Version=3.5.0.0, Culture=Neutral, PublicKeyToken=b77a5c561934e089");

                    System.Type userPrincipalType = asm.GetType("System.DirectoryServices.AccountManagement.UserPrincipal");
                    System.Type principalContextType = asm.GetType("System.DirectoryServices.AccountManagement.PrincipalContext");
                    System.Type contextTypeType = asm.GetType("System.DirectoryServices.AccountManagement.ContextType");
                    System.Type identityTypeType = asm.GetType("System.DirectoryServices.AccountManagement.IdentityType");

                    Object principalContext = Activator.CreateInstance(principalContextType, new object[] { Enum.ToObject(contextTypeType, 1), "DENALLIX" });

                    MethodInfo methodInfo = userPrincipalType.GetMethod("FindByIdentity", new Type[] { principalContextType, identityTypeType, typeof(string) });

                    Object userPrincipal = methodInfo.Invoke(null, new object[] { principalContext, Enum.ToObject(identityTypeType, 4), identity.StringValue });
                    string userPrincipalName = userPrincipal.GetType().GetProperty("UserPrincipalName").GetValue(userPrincipal, null).ToString();

                    WindowsIdentity user = new WindowsIdentity(userPrincipalName);

                    authorized = (checkRoleAuthorization(storage, "GROUP1", user) && checkRoleAuthorization(storage, "GROUP2", user)) || checkRoleAuthorization(storage, "GROUP3", user);
                }
                else
                {
                    AzManUser user = new AzManUser(identity);
                    authorized = (checkRoleAuthorization(storage, "GROUP1", user) && checkRoleAuthorization(storage, "GROUP2", user)) || checkRoleAuthorization(storage, "GROUP3", user);
                }

                return authorized;
            }
            catch (SqlAzManException ex)
            {
                return false;
            }
        }

        private bool checkRoleAuthorization(IAzManStorage storage, string roleName, object user)
        {
            AuthorizationType auth = AuthorizationType.Deny;            
            if (user is WindowsIdentity)
            {
                auth = storage.CheckAccess("MY STORE", "MY APPLICATION", roleName, (WindowsIdentity)user, DateTime.Now, true);                
            }
            else
            {
                auth = storage.CheckAccess("MY STORE", "MY APPLICATION", roleName, (IAzManDBUser)user, DateTime.Now, true);                
            }
            return auth == AuthorizationType.Allow || auth == AuthorizationType.AllowWithDelegation;
        }

    }
    public partial class AzManUser : IAzManDBUser
    {
        private Dictionary<string, object> _customColumns = new Dictionary<string, object>();

        private IAzManSid _sid;
        private string _username;

        public AzManUser(string username, string sid)
        {
            _username = username;
            _sid = new NetSqlAzMan.SqlAzManSID(sid);
        }

        public AzManUser(string sid)
        {
            _username = string.Empty;
            _sid = new NetSqlAzMan.SqlAzManSID(sid);
        }

        public AzManUser(IAzManSid sid)
        {
            _username = string.Empty;
            _sid = sid;
        }

        public Dictionary<string, object> CustomColumns
        {
            get { return _customColumns; }
        }

        public IAzManSid CustomSid
        {
            get
            {
                return _sid;
            }
        }

        public string UserName
        {
            get { return _username; }
        }
    }
} 
```

# c# - 在c#中对richtextbox中的数字进行排序

> ID：11802128
> 
> 赞同：-6
> 
> 时间：2012-08-03T19:30:55.860
> 
> 标签：c#, sorting, numbers, richtextbox

我有一个带有很多数字的richtextbox，任何数字都在一个特殊的行中，我想要对数字进行排序...例如：< 99 1 12 1023 > 想要排序 < 1 12 99 1023 >

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:39:04.603

`.Text`如果您只想让每个元素出现在自己的行上，则可以将 RichTextBox 的属性设置为 String.Join 的输出：

```
int[] numbers = new[] { 99, 1, 12, 1023 };
Array.Sort(numbers);
richTextBox1.Text = String.Join(Environment.NewLine, numbers); 
```

很难从你的问题中看出问题所在。如果你想在一行中输出排序后的数字，它们之间有空格，你可以加入一个空格：

```
richTextBox1.Text = String.Format("< {0} >", String.Join(" ", numbers)); 
```

如果您尝试以这种格式读取数字，重新排序并以相同格式输出，则必须解析单个数字的字符串：

```
string inputRaw = "< 99 1 12 1023 >";
inputRaw = inputRaw.Trim(new[] { '<', '>' });
List<int> inputNumbers = new List<int>();
string[] temporary = inputRaw.Split(' ');
foreach (string s in temporary)
{
    int n;
    if (Int32.TryParse(s, out n))
        inputNumbers.Add(n);
}
inputNumbers.Sort();

richTextBox1.Text = String.Format("< {0} >", String.Join(" ", inputNumbers)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:33:13.097

将数字放入数组中，然后调用 Array.Sort 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:57:06.640

如果文本框只是放置这些数字的输出，那么在将值放入文本框之前使用`Array.sort`.

如果文本框实际上是用户提供值的输入，则您首先需要获取每一行内容并转换为数字，并随时存储在数组中：

```
int[] linesAsNumbers = new int[richTextBox1.Lines.Length]; // We'll store the numbers in this array

int i = 0; // Keep an index of where to place the incoming numbers
foreach (string line in richTextBox1.Lines)
{
    linesAsNumbers[i++] = Convert.ToInt32(line); // Convert each line into a number and store it into our newly created array
} 
```

现在您必须使用 Array.Sort 对数组进行排序，并将所有数字重新连接成一个字符串：

```
Array.Sort(linesAsNumbers); // It automatically sorts from lowest to highest

richTextBox1.Text = String.Join<int>("\n", linesAsNumbers); 
```

如果任何行包含非数字字符，这当然会窒息，但适用于您的场景。

# jquery - 是否有用于有条件地禁用表单（不提交）的 jQuery 插件？

> ID：11802129
> 
> 赞同：0
> 
> 时间：2012-08-03T19:31:01.283
> 
> 标签：jquery, jquery-plugins

我正在使用 jQuery 1.7.2。

我不想阻止表单提交。我想模拟所有输入的禁用属性。可能添加和删除此属性。

我有一个输入并提交的表单：

```
<form name="login" id="login" method="post" action="">
    <label>Password</label>
    <input class="text" id="password" name="password" />
    <button type="submit">Login</button>
</form> 
```

在页面下方有另一个表单，除非填写登录表单，否则我想阻止该表单。

```
<form id="form" method="post" action="">
    <label>Enter Phone Number</label>
    <input id="areacode" name="areacode" maxlength="3" class="required number" type="text" pattern="[0-9]*" />
    <input id="phoneone" name="phoneone" maxlength="3" class="required number" type="text" pattern="[0-9]*" />
    <input id="phonetwo" name="phonetwo" maxlength="4" class="required number" type="text" pattern="[0-9]*" />
    <button id="phone_submit" type="submit">Next</button>
</form> 
```

现在我想阻止用户填写此表单，而不是提交。如果他们禁用 javascript 等，后端将阻止它。后端还在有效提交时将“只读”属性发送回第一个表单的输入字段。

所以jQuery本质上可以查看第一个表单输入是否是只读的，如果不是，则禁用另一个表单。我不想隐藏它，我只想禁用所有字段和按钮。

我在想必须已经有一个插件可以做这样的事情，或者一个至少可以检查第一个表单的输入字段的 jquery 函数。到目前为止，我有：

```
<script type="text/javascript">
    $(window).load(function(){
        if $('#password').attr('readonly',true){
            $('#areacode').attr('disabled',true);
            $('#phoneone').attr('disabled',true);
            $('#phonetwo').attr('disabled',true);
            $('#phone_submit').attr('disabled',true);
    };
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:34:51.910

或者，您可以使用以下方法实现此目的：

```
$('#divID').modal().show();
$('#divID').modal().close(); 
```

[http://www.ericmmartin.com/projects/simplemodal/](http://www.ericmmartin.com/projects/simplemodal/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:45:11.030

我尝试了一些新的表单处理方式，有点相似，但是您不希望显示或隐藏基于其他字段的元素。幸运的是，因为我很懒，要改变它的行为你只需要改变 2 行代码。

它仍然非常基本且未经过适当测试，但您可以在我的网站 [http://geuze.name/html5form/html5form.relate.js](http://geuze.name/html5form/html5form.relate.js)上找到源代码（更改第 125 和 127 行）

还有一个快速演示以及我在[http://geuze.name/html5form/上的 html5form polyfill](http://geuze.name/html5form/)

即使不完全是您所需要的，代码也可能只是帮助您朝着正确的方向思考。

**编辑** 添加代码，因为明显的懒惰服务器；）

```
/*
 *  Form Relationship Plugin - jQuery plugin
 *  Version 0.2
 * 
 * Built for the jQuery library
 * http://jquery.com
 * 
 * Plugin allows you to easily add smart relations between form fields and other elements
 * 
 *
 */

(function($){
    $.fn.relate = function(options){
        // Uncomment string below during testing
        "use strict";
        var tmp = {},
        // Default configuration properties
            defaults = {
                scoreRequired: 1,
                scoreOnTrue: 1,
                scoreOnFalse: 0,
                globalScope: true,
                debug: false
            },
            callbacks = {
                oninitialize:  function(){},// Runs once per form
                onfinish:      function(){}// Runs once after no errors
            },
            opts = $.extend(
                    {},
                    defaults,
                    callbacks,
                    options
            );
        // Force debug false on sucky browsers
        if(typeof(console)  === 'undefined' || typeof(console.info)  === 'undefined'){
            opts.debug = false;
        }
        // Our debug output
        function debug(str){
            if(opts.debug === true){
                console.info(str);
            }
        };
        // Helper function to determine object size
        function objSize(obj) {
            var size = 0, key;
            for (key in obj) {
                if (obj.hasOwnProperty(key)) size++;
            }
            return size;
        };

        // Update per element
        // Easier would be to always loop over everything, but I assume this is faster
        function update(form){
            var related,
                currentScore = 0,
                scoreOnTrue = 1,
                scoreOnFalse = 0;

            // Reset score
            $('[data-currentscore]').removeAttr('data-currentscore');
            // Loop all possible smart elements
            $('select[data-relate], select:has(option[data-relate]), input[data-relate], textarea[data-relate]', form).each(function(){
                if($(this).is('select')){
                    $('option', this).each(function(){
                        // Find relation
                        related = $(this).attr('data-relate');
                        // If no relation, no points to anything
                        if(!related || related.length  0 ? $(this).attr('data-scoreontrue') * 1 : opts.scoreOnTrue;
                        scoreOnFalse = $(this).filter('[data-scoreonfalse]').length > 0 ? $(this).attr('data-scoreonfalse') * 1 : opts.scoreOnFalse;
                        if($(this).is(':selected')){
                            $(related).each(function(){
                                currentScore = $(this).filter('[data-currentscore]').length > 0 ? $(this).attr('data-currentscore') * 1 : 0;
                                $(this).attr('data-currentscore', currentScore + scoreOnTrue);
                            });
                        } else {
                            $(related).each(function(){
                                currentScore = $(this).filter('[data-currentscore]').length > 0 ? $(this).attr('data-currentscore') * 1 : 0;
                                $(this).attr('data-currentscore', currentScore - scoreOnFalse);
                            });
                        }
                    });
                } else {
                    // Find relation
                    related = $(this).attr('data-relate');
                    // If no relation, no points to anything
                    if(!related ||related.length  0  ? $(this).attr('data-scoreontrue') * 1 : opts.scoreOnTrue;
                    scoreOnFalse = $(this).filter('[data-scoreonfalse]').length > 0  ? $(this).attr('data-scoreonfalse') * 1 : opts.scoreOnFalse;
                    if($(this).is('input:radio') || $(this).is('input:checkbox')){
                        if($(this).is(':checked')){
                            $(related).each(function(){
                                currentScore = $(this).filter('[data-currentscore]').length > 0 ? $(this).attr('data-currentscore') * 1 : 0;
                                $(this).attr('data-currentscore', currentScore + scoreOnTrue);
                            });
                        } else {
                            $(related).each(function(){
                                currentScore = $(this).filter('[data-currentscore]').length > 0 ? $(this).attr('data-currentscore') * 1 : 0;
                                $(this).attr('data-currentscore', currentScore + scoreOnFalse);
                            });
                        }
                    } else if($(this).val() !== '' && $(this).val() != $(this).attr('placeholder')){
                        $(related).each(function(){
                            currentScore = $(this).filter('[data-currentscore]').length > 0 ? $(this).attr('data-currentscore') * 1 : 0;
                            $(this).attr('data-currentscore', currentScore + scoreOnTrue);
                        });
                    } else {
                        $(related).each(function(){
                            currentScore = $(this).filter('[data-currentscore]').length > 0 ? $(this).attr('data-currentscore') * 1 : 0;
                            $(this).attr('data-currentscore', currentScore + scoreOnFalse);
                        });
                    }
                }
            });
            // Finaly loop over all fields with some sort of score
            $('[data-currentscore]').each(function(){
                var scoreRequired = $(this).has('[data-scorerequired]') ? $(this).attr('data-scorerequired') * 1 : opts.scoreRequired;
                if($(this).attr('data-currentscore') * 1 >= scoreRequired * 1){
                    $(this).show();
                } else {
                    $(this).hide();
                }
            });

        };

        // Loop over all forms requested
        this.each(function(){
            // Private properties
            var form = $(this);

            // Init / change / keyup(fixes some browsers on select)
            update(form);
            $('select[data-relate], select:has(option[data-relate]), input[data-relate], textarea[data-relate]')
            .change(function(){
                update(form);
            }).keyup(function(){
                update(form);
            });
        });
        return this;
    }
})(jQuery); 
```

用法如下： `$('form').relate({...});`和一些html数据属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T19:51:00.573

我使用一个简单的 if 语句并显示和隐藏覆盖来做到这一点。我首先通过添加禁用属性来做到这一点，但我想要叠加层，因此两种方式都没有意义。

不像某些人想要的那样语义化，但它工作得很好。下面的代码是内联样式以提高可读性。

太棒了....html：

```
<form>
    <input id="password" type="text" />
    <button type="submit">Submit</button>
</form>
<fieldset style="position: relative;">
    <div class="overlay" style="width:100%;height:100%; position: absolute; top:0; left:0; background: rgba(0,0,0,0.5); color: #fff;">You must fill out the password above.</div>
    <form></form>
</fieldset> 
```

js：

```
<script type="text/javascript">
    $(document).ready(function() {
        var block = false;
        if ($('#password').attr('readonly')) {
            block = false;
        } else {
            block = true;
        }
        if (block) {
            $('.overlay').css('display','block');
        }
    });
</script> 
```

现在，当后端将密码设置为只读时，您可以使用字段集中的表单。如果 #password 输入上没有 readonly 属性，则表单被有效阻止。当然，与往常一样，有后端代码阻止表单提交，以防有人决定用 firebug 或其他东西擦除覆盖。

谢谢你的帮助。

# iphone - 你如何复制模态交叉溶解动画？

> ID：11802136
> 
> 赞同：0
> 
> 时间：2012-08-03T19:31:30.093
> 
> 标签：iphone, ios, modal-dialog, segue

我有一个游戏，它的顶部有一个重播按钮。如果您按下回放按钮，关卡会重新启动。好吧，为了做到这一点，我曾经从按钮到它自己的 vc 进行 segue，但有人告诉我这很糟糕，因为你只是在不需要时将 vc 添加到堆栈中。

所以，我决定只重置所有属性，但我也想要你在做模态segue时得到的很酷的交叉溶解动画。我该如何添加这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:16:36.113

您可以尝试在图层中使用动画，例如：

```
CATransition *transition = [CATransition animation];
transition.duration = 2.0;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
transition.type = kCATransitionFade;
transition.delegate = self;
[self.view.layer addAnimation:transition forKey:nil];
self.view.hidden = YES;
self.view.hidden = NO; 
```

这样，您在视图中所做的每一个更改都会为视图设置动画......

# ruby-on-rails - 防止直接创建 Rails3 模型（只想允许从另一个模型中创建）

> ID：11802139
> 
> 赞同：0
> 
> 时间：2012-08-03T19:31:57.167
> 
> 标签：ruby-on-rails, ruby, model

我想确保

```
MyModel.new # ...raises an error... 
```

然后

```
MyOtherModel::create_my_model # ...only this should work! 
```

有什么好方法可以做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:03:25.553

没有什么直接的AFAIK。以下应该可以工作。

```
class MyModel < ActiveRecord::Base
  ..
  belongs_to :my_other_model
  def initialize( need_this_argument = nil )
    raise if need_this_argument.nil?
    super() # It is important to put the () here.
  end
end

class MyOtherModel < ActiveRecord::Base
...
  has_one :my_model
  accepts_nested_attributes_for :my_model
  def create_my_model(arguments)
    MyModel.new( true ) # Pass a non nil argument
  end
end 
```

MyModel.new #=> RuntimeError
a =MyOtherModel.new
b = a.create_my_model
..# 在这里做你的事情
b.save
a.save

# javascript - 我可以使用 jQuery 创建 xml 还是使用服务器端？

> ID：11802143
> 
> 赞同：-1
> 
> 时间：2012-08-03T19:32:19.567
> 
> 标签：javascript, jquery, xml

是否可以使用 jQuery 创建一个 xml 文件，还是必须使用服务器端函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:36:43.047

JQuery 是一个在客户端/浏览器上运行的 javascript 库。要写入服务器，您需要使用服务器端工具。前任。ASP，Python，PHP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:38:35.027

使用 jquery ajax 将一些数据发送到服务器页面（ASP.NET/PHP）并在那里创建 XML。

下面的示例调用 ASP.NET MVC 操作方法，在该方法中，我使用传递的数据创建 XML 文档并将其保存到磁盘。我在`LINQtoXML`此示例中使用 API

```
 $.post("Home/CreateXML", { name : "Angel", age : "22" } function(data){
       alert("Response from server is : "+data);
 }); 
```

在你的服务器端，

```
public ActionResult CreateXML(string name,string age)
{
  XElement elm=new XElement("SomeXML",
                     new XElement("Name",name),
                     new XElement("Age",age));

 elm.Save("C:\\somexml.xml") 
 return Content("XML Created and saved in disk!");   
} 
```

执行此操作将以这种形式创建一个 XML

```
 <SomeXML>
    <Name>Angel</Name>
    <Age>Angel</Age>
 </SomeXML> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:45:10.403

您可以为您的 xml 文件创建 xml 内容，然后在 href 中将其设置为 base64。

检查此线程： [如何在 Javascript 中创建用于下载的动态文件 + 链接？](https://stackoverflow.com/questions/8310657/how-to-create-a-dynamic-file-link-for-download-in-javascript)

# java - XML 模式方法命名不一致

> ID：11802146
> 
> 赞同：0
> 
> 时间：2012-08-03T19:32:26.650
> 
> 标签：java, xsd

我希望有人经历过这个问题，也许可以有所启发。

我有一个 xml 架构和一个 ant 构建文件。当我在 Windows 和 Mac 上运行 ant 时，输出 .java 文件会有所不同，即使我使用相同的 jaxb-xjc.jar 来进行 xml 编译。Windows 端将属性的“getter”方法命名为“getX”。Mac 方面想将它们命名为“isX”。有没有人经历过这样的事情和/或有解决方案？这在 Windows Vista 和 7 以一种方式执行此操作与 Mac OSX 10.6 和 10.7（在 Mac OSX 10.8 上未经测试）以另一种方式执行此操作之间是一致的。

- - 编辑 - -

我将附上 ant build.xml 文件中的一些代码。

告诉它 xjc 是什么。

```
<taskdef name="xjc" classname="com.sun.tools.xjc.XJCTask">
    <classpath refid="classpath"/>
</taskdef> 
```

这是“实际”编译：

编译自动机模式

```
 <echo>Compiling old automaton schema</echo>
    <xjc schema="${oldxml-schema}" destdir="${src.dir}" package="${oldxml.package}">
        <produces dir="${oldxml-gen.dir}" includes="**/*.java"/>
    </xjc>

    <echo>Compiling the plugin schema</echo>
    <mkdir dir="${plugin-gen.dir}" />
     <xjc schema="${plugin-schema}" destdir="${src.dir}" package="${plugin.package}">
         <produces dir="${plugin-gen.dir}" includes="**/*.java"/>
    </xjc>

    <echo>Compiling the pluginDesumaSide schema</echo>
    <mkdir dir="${pluginDesumaSide-gen.dir}" />
     <xjc schema="${pluginDesumaSide-schema}" destdir="${src.dir}" package="${pluginDesumaSide.package}">
        <produces dir="${pluginDesumaSide-gen.dir}" includes="**/*.java"/>
    </xjc>
</target> 
```

所有目标（我的意思是像 ${} 这样提到的任何目标）都已定义，并且每个链接和编译都正确，除了 Mac 将“getter”方法命名为变量的“is”方法。它们是布尔属性，如果未指定，则具有默认值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:01:27.963

从我得到的回复中，我能够谷歌寻找解决方案。显然，由于规范中的一些不一致，这种命名不一致和另一个（getter 返回原语但 setter 只接受对象）对于旧的 xml 编译器来说是偶然的。

通过访问[http://jaxb.java.net/](http://jaxb.java.net/)并获取新的 jaxb-impl.jar 和 jaxb-xjc.jar 已解决此问题。我下载并运行了 jaxb.jar 文件下载，它创建了所需的 jar。

# c# - 关联后的新栏目问题

> ID：11802149
> 
> 赞同：0
> 
> 时间：2012-08-03T19:32:36.433
> 
> 标签：c#, sql, database, ado.net

我在 Visual Studio 中创建了 2 个表，说 TA 和 TB。在 edmx 文件中，我在 TA 和 TB 之间建立了一对多的关联。建立关联后，会在 TB 中生成一个名为 的新列`TAId`。

我只想知道是否必须在数据库的 TB 表中添加该列？

**编辑：** 我得到的例外：

> nCeremony.msl(23,10)：错误 3004：从第 23 行开始映射片段时出现问题：没有为 Set CourseOptions 中的属性 CourseOption.MenuId 指定映射。
> 
> 在以下情况下，具有密钥 (PK) 的实体将不会往返：
> 
> 实体类型为 [CeremonyDBModel.CourseOption]
> 
> Ceremony.msl(31,10)：错误 3004：从第 31 行开始映射片段时出现问题：没有为 Set Menus 中的属性 Menu.CeremonyId 指定映射。
> 
> 在以下情况下，具有密钥 (PK) 的实体将不会往返：
> 
> 实体是类型 [CeremonyDBModel.Menu]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:01:48.357

一对多关联是通过让子表中的记录引用其父表来完成的。

考虑一个客户和购买的例子。一个客户可以进行多次购买，但每次购买只能属于一个客户。考虑以下两个表：

```
customers     purchases
============  ===========
id  name      id  customer_id  product 
```

每个客户都有一个唯一的 ID 和名称。每次购买还有一个唯一的 ID 和产品名称。但是，为了具有一对多关联，购买表*还*必须引用哪个客户进行了购买。您不能反过来执行此操作，否则您将有重复的客户名称，每个客户都引用了一些购买。

例如：

```
customers     purchases
============  ===========
id  name      id  customer_id  product
--- --------  --- ------------ --------
1   John      1   1            apple
2   Mary      2   1            orange
              3   2            banana 
```

在此示例中，您可以看到约翰购买了一个苹果和一个橙子，而玛丽购买了一个香蕉。

该`customer_id`列是购买表与客户表建立关系所必需的。

通过创建 TA 和 TB 表之间的关联，Visual Studio 为您创建了列`TAid`，因为这就是 MS SQL Server 等关系数据库处理它们的方式。

# javascript - IE 9 还能像在旧的 IE 和 Netscape / Firefox 中那样使用 Javascript 进行签名吗？

> ID：11802152
> 
> 赞同：1
> 
> 时间：2012-08-03T19:32:43.270
> 
> 标签：javascript, internet-explorer, internet-explorer-9, certificate

可以在 IE 和 Netscape 中使用数字证书进行签名 [http://bozhobg.wordpress.com/2009/04/16/how-to-create-a-digital-signing-solution-with-only-javascript/](http://bozhobg.wordpress.com/2009/04/16/how-to-create-a-digital-signing-solution-with-only-javascript/)

IE 9 中的等价物是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T21:19:25.003

你会遇到这个问题。

线索在您提供的链接中的代码中。具体来说，它在哪里使用`new ActiveXObject()`.

ActiveX 是一项*非常*古老的技术，并且存在严重的安全问题。出于这个原因，它的使用已经被劝阻了一段时间（在你链接到的文章被写之前很久就是这种情况）。

IE9 仍然支持它，但只是出于遗留原因；强烈建议不要使用它，您需要转到浏览器配置并禁用一些安全设置才能使其正常工作。

如果您确实让 activeX 在 IE9 中工作，您还需要确保您的 PC 上安装了相关的 activeX 控件，这些控件实际上可以完成工作（我没有使用有问题的那些，所以我无法建议他们）。此外，由于activeX技术已被弃用，您可能会发现您需要使用的activeX控件可能没有保持最新。这可能会影响它是否适用于较新版本的 IE 或 Windows。

# opencl - 运行时的 OpenCL 错误计算矩阵乘法

> ID：11802155
> 
> 赞同：2
> 
> 时间：2012-08-03T19:32:53.230
> 
> 标签：opencl, gpu, runtime-error, hpc

这几天我一直在调试，无法让这个 OpenCL 矩阵乘法内核运行。每当我运行程序时，GPU 的输出都会产生类似于 -198746573.0000 的大负数。我想知道有 HPC 经验的人是否可以指出我的代码中的错误，或者是否是驱动程序错误。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <string.h>

#define widthA 2
#define heightA 2

#define widthB heightA
#define heightB 2

#define widthC widthA
#define heightC heightB

#ifdef __APPLE__
#include < OpenCL/opencl.h >
#else
#include <opencl.h>
#endif

#define MEM_SIZE (128)
#define MAX_SOURCE_SIZE (0x100000)

int main()
{
  float * A = (float *)malloc(sizeof(float)*widthA*heightA);
  float * B = (float *)malloc(sizeof(float)*widthB*heightB);
  float * C = (float *)malloc(sizeof(float)*widthC*heightC);
  float * Res = (float *)malloc(sizeof(float)*widthC*heightC);
  float * D= (float *)malloc(sizeof(float)*widthC*heightC);

  float ref[widthC][heightC];

  int i, j, k;

   FILE * fp1 = fopen("matAdata.txt", "w");
  if (!fp1) {
    fprintf(stderr, "Failed to open matAdata.\n");
    exit(1);
   }

  for(i = 0;i < widthA; i++)
  {
        for(j=0;j < heightA; j++)       {
            float p=(rand()%100)/7.0;
            //*(A+i*heightA+j)=rand()%100 + p;
            *(A+i*heightA+j)=4.0;
            fprintf(fp1, "%f ",*(A+i*heightA+j));
        }
        fprintf(fp1, "\n");
   }
   fclose(fp1);

   fp1 = fopen("matBdata.txt", "w");
   if (!fp1) {
    fprintf(stderr, "Failed to open matAdata.\n");
    exit(1);
   }

    for(i = 0;i < widthB; i++)
    {
        for(j=0; j < heightB; j++)      {
            float p=(rand()%100)/7.0;
            //*((B+i*heightB+j))=rand()%100 + p;
            *((B+i*heightB+j))=4.0;
            fprintf(fp1, "%f ",*(B+i*heightA+j));
        }
        fprintf(fp1, "\n");
    }
    fclose(fp1);

  cl_device_id device_id = NULL;
  cl_context context = NULL;
  cl_command_queue command_queue = NULL;
  cl_mem memobjA = NULL;
  cl_mem memobjB = NULL;
  cl_mem memobjC = NULL;
  cl_mem rowA = NULL;
  cl_mem colC = NULL;
  cl_program program = NULL;
  cl_kernel kernel = NULL;
  cl_platform_id platform_id[10];
  cl_platform_id platform = NULL;
  cl_uint ret_num_devices;
  cl_uint ret_num_platforms;
  cl_int ret;
  cl_event GPUDone[0];
  //char string[MEM_SIZE];

  FILE *fp;
  char fileName[] = "matrixMultiplication.cl";
  char *source_str;
  size_t source_size;
  int row = widthA;
  int col = heightC;
  /* Load the source code containing the kernel*/
  fp = fopen(fileName, "r");
  if (!fp) {
    fprintf(stderr, "Failed to load kernel.\n");
    exit(1);
  }
  source_str = (char*)malloc(MAX_SOURCE_SIZE);
  source_size = fread( source_str, 1, MAX_SOURCE_SIZE, fp);
  fclose( fp );

  /* Get Platform and Device Info */
  ret = clGetPlatformIDs(10, platform_id, &ret_num_platforms);

  char cBuffer[1024];
  cl_uint c;

  for(c = 0; c < ret_num_platforms; c++)
  {
    clGetPlatformInfo(platform_id[c], CL_PLATFORM_NAME, 1024, &cBuffer, NULL);
    if (strstr(cBuffer, "NVIDIA") != NULL)
    {
        platform = platform_id[c];
        break;
    }

  }

  printf("Found Platform %s\n", cBuffer);

  ret = clGetDeviceIDs( platform, CL_DEVICE_TYPE_GPU, 1, &device_id, &ret_num_devices);

  printf("Found %d devices.\n", ret_num_devices);

  /* Create OpenCL context */
  context = clCreateContext( NULL, 1, &device_id, NULL, NULL, &ret);

  /* Create Command Queue */
  command_queue = clCreateCommandQueue(context, device_id, 0, &ret);

  /* Create Memory Buffer */
  memobjA = clCreateBuffer(context, CL_MEM_READ_ONLY, widthA * heightA * sizeof(float), NULL, &ret);
  memobjB = clCreateBuffer(context, CL_MEM_READ_ONLY, widthB * heightB * sizeof(float), NULL, &ret);
  memobjC = clCreateBuffer(context, CL_MEM_READ_WRITE, widthC * heightC * sizeof(float), NULL, &ret);
  rowA = clCreateBuffer(context, CL_MEM_READ_ONLY,  sizeof(int), NULL, &ret);
  colC = clCreateBuffer(context, CL_MEM_READ_ONLY,  sizeof(int), NULL, &ret);

  // Copy the lists A and B to their respective memory buffers
    ret = clEnqueueWriteBuffer(command_queue,memobjA, CL_TRUE, 0,
           widthA * heightA * sizeof(float), A, 0, NULL, NULL);
    ret = clEnqueueWriteBuffer(command_queue, memobjB, CL_TRUE, 0,
            widthB * heightB * sizeof(float), B, 0, NULL, NULL);
    ret = clEnqueueWriteBuffer(command_queue, rowA, CL_TRUE, 0, sizeof(int), &row, 0, NULL, NULL);
    ret = clEnqueueWriteBuffer(command_queue, colC, CL_TRUE, 0, sizeof(int), &col, 0, NULL, NULL);

  /* Create Kernel Program from the source */
  program = clCreateProgramWithSource(context, 1, (const char **)&source_str,
                                      (const size_t *)&source_size, &ret);

  /* Build Kernel Program */
  ret = clBuildProgram(program, 1, &device_id, NULL, NULL, NULL);

  /* Create OpenCL Kernel */
  kernel = clCreateKernel(program, "matrixMultiplication", &ret);

  /* Set OpenCL Kernel Arguments */
  ret = clSetKernelArg(kernel, 0, sizeof(cl_mem), (void *)&memobjA);
  ret = clSetKernelArg(kernel, 1, sizeof(cl_mem), (void *)&memobjB);
  ret = clSetKernelArg(kernel, 2, sizeof(cl_mem), (void *)&memobjC);
  ret = clSetKernelArg(kernel, 3, sizeof(int), (void *)&row);
  ret = clSetKernelArg(kernel, 4, sizeof(int), (void *)&col);
  /* Execute OpenCL Kernel */

  //ret = clEnqueueTask(command_queue, kernel, 0, NULL,NULL);
  size_t globalThreads[2] = {widthA, heightB};
  size_t localThreads[2] = {16,16};

  clEnqueueNDRangeKernel(command_queue, kernel, 2, NULL, globalThreads, localThreads, 0, NULL, NULL);
  //clFlush(command_queue);
  //clFinish(command_queue);

  /* Copy results from the memory buffer */
  ret = clEnqueueReadBuffer(command_queue, memobjC, CL_TRUE, 0,
                            widthA * heightC * sizeof(float), Res, 0, NULL, &GPUDone[0]);

  printf("Buffer Read ended with %d.\n", ret);
  clWaitForEvents(1, GPUDone);

  fp1 = fopen("matGPURes.txt", "w");
  if (!fp1) {
    fprintf(stderr, "Failed to open matAdata.\n");
    exit(1);
  }

  printf("\nResult\n");
    for(i = 0;i < widthA; i++)
    {
        for(j=0;j < heightC; j++)
        {

            fprintf(fp1, "%f ",*(Res+i*heightC+j));
            ref[i][j] = *(Res+i*heightC+j);
            printf("GPU Output: %f\n", *(Res+i*heightC+j));
        }
        fprintf(fp1, "\n");
    }
    fclose(fp1);

  ret = clFlush(command_queue);
  ret = clFinish(command_queue);
  ret = clReleaseKernel(kernel);
  ret = clReleaseProgram(program);
  ret = clReleaseMemObject(memobjA);
  ret = clReleaseMemObject(memobjB);
  ret = clReleaseMemObject(memobjC);
  ret = clReleaseCommandQueue(command_queue);
  ret = clReleaseContext(context);
  ret = clReleaseEvent(GPUDone[0]);

  free(source_str);

  float sum=0.0;

  for(i = 0;i < widthA; i++)
    {
        for(j = 0; j < heightC; j++)
        {
            sum = 0;
            for(k = 0; k < widthB; k++)
            {
                sum += A[i*col+k] * B[k*row+j];
                printf("Multiplying A: %f, B: %f\n", A[i*col+k], B[k*row+j]);
            }
        D[i*heightC+j] = sum;
        }

    }

    fp1 = fopen("matNormalMultiplicationRes.txt", "w");

  if (!fp1) {
    fprintf(stderr, "Failed to open matNormalMultiplicationRes.txt\n");
    exit(1);
  }

    for(i = 0; i<widthA; i++)
    {
        for(j = 0; j<heightA; j++)
        {
            if (ref[i][j] != D[i*heightA+j])
            {
                printf("Calculation error[ CPU: %f, GPU: %f ]\n", D[i*heightA+j], ref[i][j]);
            }
        }
    }

  printf("\nResult\n");
    for(i = 0;i < widthA; i++)
    {
        for(j=0;j < heightC; j++)
        {
            fprintf(fp1, "%f ",*(D+i*heightC+j));

        }
        fprintf(fp1, "\n");
    }
   free(A);
   free(B);
   free(C);
   free(D);
   free(Res);
  return 0;
} 
```

这是内核

```
#define BLOCK_SIZE 16

__kernel
void matrixMultiplication(__global float* A, __global float* B, __global float* C,  int wA, int wB )
{
    //int i = get_global_id(0);
    //int j = get_global_id(1);

    float Csub = 0.0f;        

    int bx = get_group_id(0);
    int by = get_group_id(1);

    int tx = get_local_id(0);
    int ty = get_local_id(1);

    int aBegin = wA * BLOCK_SIZE * by;
    int aEnd = aBegin + wA - 1;
    int aStep = BLOCK_SIZE;

    int bBegin = BLOCK_SIZE * bx;
    int bStep = BLOCK_SIZE * wB;

    for (int a = aBegin, b=bBegin;
        a <= aEnd;
        a += aStep, b+=bStep)
    {
        __local float As[BLOCK_SIZE][BLOCK_SIZE];
        __local float Bs[BLOCK_SIZE][BLOCK_SIZE];

        As[ty][tx] = A[a + wA * ty + tx];
        Bs[ty][tx] = B[b + wB * ty + tx];
        barrier(CLK_LOCAL_MEM_FENCE);

        for( int k = 0; k < BLOCK_SIZE; ++k)
            Csub += As[ty][k] * Bs[k][tx];
        barrier(CLK_LOCAL_MEM_FENCE);

    }

    int c = wB * BLOCK_SIZE * by + BLOCK_SIZE * bx;
    C[c + wB * ty + tx] = Csub;
    /*
    float value=0;
    for ( int k = 0; k < widthA; k++)
    {
        value = value + A[k + j * widthA] * B[k*widthB + i];
    }
    C[i + widthA * j] = value;
    */
} 
```

我一遍又一遍地检查，但根本找不到任何错误。在我断定它是驱动程序问题之前，我想确保它不是代码错误。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T12:36:41.817

你真的需要这样一个复杂的内核吗？如果你真的想做简单的矩阵乘法，你可以写一个这样的简单内核，它很容易调试。

```
 __kernel void matrixMultiplication (__global float* A, 
                                      __global float* B,
                                      __global float* C,

                                       int widthA, int widthB )
{
    //y direction
    int row = get_global_id(1);

    int col = get_global_id(0);

    float cSum = 0.0f;

    //calculate the result
    for (int i=0; i<widthA; i++)
    {
        cSum += A[row*widthA+ i] * B[i*widthB+col];
    }

    C[row*widthB+col] = cSum;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T21:29:48.573

案例可能已经结束，但为了谷歌的用户：不应该在主机上显式声明共享内存并作为内核参数传递给源吗？在这种情况下，__local 关键字不是您要查找的关键字。

请参阅[如何在 OpenCL 中声明本地内存？](https://stackoverflow.com/questions/8888718/how-to-declare-local-memory-in-opencl)详细解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T23:24:57.147

检查主机的功能。这里有几件事可以帮助您入门...

1）您不需要创建缓冲区并将其排入队列以获取标量常量 Int，如 row 和 col。只需将其设置为内核参数即可。

2) 等待带有事件的 clEnqueueNDRangeKernel。您要确保计算已完成。

3）在内核中添加 printf 语句来打印选择的值，看看输入和输出的值是你所期望的。

尝试

if (get_local_id(0) % 8 == 0) {

```
printf    some  useful  value of a,b,c 
```

}

3) 尝试使用将输入数组复制到输出数组的哑内核的主机代码。这将确认您已经处理了缓冲区创建和队列读/写代码正确！

# jquery - jQuery自动完成更改异或关闭

> ID：11802171
> 
> 赞同：1
> 
> 时间：2012-08-03T19:34:20.330
> 
> 标签：jquery, autocomplete, jquery-autocomplete

我正在使用 jQuery 的自动完成功能，并按以下方式进行了设置

```
$('#id').autocomplete({
        source: function (request, response) {
            $.ajax({
                url: 'myurl'
            , type: 'POST'
            , dataType: 'json'
            , data: { 'query': request.term }
            , success: function (data) {
                response($.map(data, function (item) {
                    return { label: item, value: item };
                }));
            }
            });
        },
        delay: 300,
        minLength: 2,
        close: function (event, ui) { doAjaxStuffNow() },
        change: function (event, ui) { doAjaxStuffNow() }
    }); 
```

由于我想通过 ajax 调用实现时间，我同时使用了 close 和 change 功能。我希望它在菜单关闭时执行，或者在菜单永远不会打开的情况下，当字段模糊时执行。问题是，如果菜单关闭然后字段模糊，它会触发两次，所以我想知道是否有人知道实现关闭异或变化效果的方法。

谢谢，汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:44:11.083

您可以使用 focus 和 blur 方法来确定值是否已更改。

```
$("#combo_input_id").focus(function() {
    oldval = $(this).val();
    }).blur(function(){
        if(oldval != $(this).val()){
            doAjaxStuffNow();
        };
        return false;
    }); 
```

它不是很漂亮，但它完成了工作。我希望 jqueryui 的未来版本会触发 change 方法，即使用户从不输入输入。

# ios - AudioQueueDispose 在 IOS 6 中崩溃，在 IOS 5 中工作正常

> ID：11802172
> 
> 赞同：0
> 
> 时间：2012-08-03T19:34:29.337
> 
> 标签：ios, streaming, soundcloud

我从 SoundCloud 流式传输音乐，使用他们的流式 API，而后者又使用 Apple 的 AudioToolbox 框架。[您可以在此处](https://github.com/soundcloud/cocoa-api-wrapper)找到 git 存储库。

该应用程序使用 ios 5 及更低版本可以正常播放。现在有了 ios 6，只要通过 AudioQueueDispose 处理 AudioQueue，我就会得到[EXC_BAD_ACCESS](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioQueueReference/Reference/reference.html)。我试过注释掉这一行；果然它不再崩溃了，但显然我的音频流继续播放并且永远不会被释放。

我不确定是什么原因造成的。这是需要向 Apple 报告的错误吗？或者 ios 6 中的一些新功能会在处理后无意中导致在某处引用 audioQueue？有没有人注意到这样的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:26:31.037

AudioQueueDispose 将在 iOS6 设备中正常工作。您必须将 true 作为 AudioQueueDispose 的第二个参数传递。然后它异步停止队列。但问题是同样的事情在 iOS 6.1 设备中不起作用。谁能帮我解决这个问题。谢谢你的提前。

# javascript - 视觉上打乱字符串，同时保持它同样有效

> ID：11802177
> 
> 赞同：0
> 
> 时间：2012-08-03T19:34:43.127
> 
> 标签：javascript, string

这更像是一件有趣的事情，但因为我很好奇..（这本质上是混淆，但我正在解释它，所以每个人都可以从中获取一些东西）

假设我们有一个字符串（在 JavaScript 中是 ~）：

`var str = "stackoverflow`

现在，还要说这个字符串应该在视觉上被遮挡，这样如果你要通读，你就不会只是看到`stackoverflow`那里，而是一些更难简单阅读的东西。我正在考虑将其转换为数字形式，然后将其转换为像任何其他字符串一样读取。不知道这是否可能，但我会尝试它，因为它很有趣。

所以，我的问题是，你个人如何做到这一点，同时保持字符串完全有效？我个人尝试放入一堆对我自己的乐趣没有任何帮助的正则表达式。同样，这更像是一种因为我很好奇的东西，并且可能不会被使用。

例子：

```
var str = `s./\\t./ack; 
```

输出：

`stack`

显然，该代码完全不可能，但它只是说明了我正在查看的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:39:04.323

您可以将每个字符编码为字符实体：

```
"\u0073\u0074\u0061\u0063\u006b\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077" 
```

混淆（如果这是您的目标）在很大程度上没有意义，但根据要求，`stackoverflow`在字符串中不再可见。执行编码的函数：

```
function uniencode(str) {
    function pad(str) {
        return Array(5 - str.length).join('0') + str;
    }

    return Array.prototype.map.call(str, function(c) {
        return '\\u' + pad(c.charCodeAt(0).toString(16));
    }).join('');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:43:05.460

Base64 很常见。不幸的是，JavaScript 不提供原生 Base64 支持，但您可以在 PHPJS上找到[编码](http://phpjs.org/functions/base64_encode)和[解码功能。](http://phpjs.org/functions/base64_decode)

例子：

```
var str = "c3RhY2tvdmVyZmxvdw";
alert(base64_decode(str)); // alerts "stackoverflow" 
```

**编辑**：正如 Charmander 所指出的（喜欢这个名字 ^_^），一些浏览器（Firefox、Chrome ......）实际上支持 Base64。他们只是为这些函数取了很奇怪的名字：`btoa()`编码和`atob()`解码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:44:35.383

[http://www.javascriptobfuscator.com/default.aspx](http://www.javascriptobfuscator.com/default.aspx)

```
var _0x6ee4=["\x73\x74\x61\x63\x6B\x6F\x76\x65\x72\x66\x6C\x6F\x77"];
var str=_0x6ee4[0]; 
```

# ibm-mq - WebSphere MQ q 程序读/写到文件

> ID：11802178
> 
> 赞同：3
> 
> 时间：2012-08-03T19:34:44.950
> 
> 标签：ibm-mq

我使用以下内容将队列内容写入文件：

> q -xb -ITESTQ -mTEST > messages.out

我在队列中有 3 条二进制消息成功写入文件。现在我需要将同一个文件加载回队列（稍后同一个队列）。当我做：

> q -xb -oTESTQ -mTEST < messages.out

它放置了 9 条消息而不是 3 条。我猜在加载文件时格式被误读了。我注意到 q 程序中有 -X 选项。它的用途是什么？我还有什么其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:45:28.797

为此，您**确实**需要查看 QLoad 程序 ( [SupportPac MO03](http://ibm.co/SupptPacMO03) )。与 Q 程序相同的作者，每一点都是一个很好的工具。也是免费的。正如作者在手册中解释的那样：

> 自从我发布我的 MA01 (Q Utility) SupportPac 以来，我就定期要求解释如何使用它来卸载并随后重新加载队列中的消息。答案一直是这不是 MA01 的用途，而且肯定有一个可用的实用程序。好吧，在完成了足够多的这些请求之后，我自己寻找了一个实用程序，但并没有真正找到符合要求的任何东西。所需要的是一个非常简单的、有人会说不复杂的程序，它将队列卸载到文本文件中。文本文件的概念很重要，因为许多用户希望能够在文件创建后更改文件。我还发现基于文本的文件更便携，所以如果我们想卸载队列，比如在 Windows 上，这似乎很有用，然后在 Solaris 机器上再次加载消息。这种方法的缺点是文件比它在二进制模式下要大。使用字符的十六进制表示而不是字符本身来存储数据实际上使用了两倍的空间。然而，一般来说，我不设想人们使用这个程序来卸载大量的消息数据，而是在死信队列上卸载一些测试消息或一些恶意消息，然后将它们更改并重新加载到其他地方。

# java - ImageButton 上的 Android 4.1 Jellybean drawable 未显示

> ID：11802180
> 
> 赞同：0
> 
> 时间：2012-08-03T19:34:52.780
> 
> 标签：java, android, android-4.2-jelly-bean

我有一个像这样的 ImageButton：

```
<ImageButton android:id="@+id/donateButton"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent"
           android:layout_marginRight="1dp"
           android:src="@drawable/donate"
           android:contentDescription="@string/donate"
           /> 
```

@drawable/donate 指向 donate.gif 在较旧的 Android 版本（1.5、1.6、2.X）上，此图像会显示。有人遇到类似问题或有解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T19:40:43.667

将您的图形从 GIF 更改为 png。

不推荐使用 Gif，请参阅：http: [//developer.android.com/guide/topics/resources/drawable-resource.html#Bitmap](http://developer.android.com/guide/topics/resources/drawable-resource.html#Bitmap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T01:14:48.740

正确答案是：因为 4.1 在 GIF 支持方面存在错误。我在 Nexus 7 上的一个应用程序中遇到了同样的错误消息。

这已经在[http://code.google.com/p/android/issues/detail?id=35285得到报告](http://code.google.com/p/android/issues/detail?id=35285)

给定和接受的答案“更改为 png”可能听起来有效且有帮助，但仍然是一种解决方法。只要文档声明支持 GIF 格式，即使不鼓励，它也有望工作。

尽管如此，与（优化的）PNG 版本相比，大多数简单 GIF 的占用空间通常要小得多。对我来说，这个错误强制转换又增加了 200k，即整个应用程序大小的 20%。一些开发人员仍然关心 apk 占用空间。

为了使答案完整，以便其他人可以找到它：

```
09-14 02:45:43.873: E/OpenGLRenderer(12425): Cannot generate texture from bitmap 
```

# wordpress - WP-电子商务自定义字段

> ID：11802184
> 
> 赞同：1
> 
> 时间：2012-08-03T19:35:16.870
> 
> 标签：wordpress, plugins, e-commerce, custom-fields

我有一个安装了插件自定义字段版本 1.4.5 的 wordpress 电子商务网站...

我添加了一个名为 size 的新属性及其下拉菜单。它仅在我编辑产品时出现在管理页面中，但在 wpsc-single_product.php 中它不仅仅出现一行文本。如何让下拉菜单显示在 wpsc-single_product.php 上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:39:40.723

您可以通过添加以下行手动将字段添加到您的主题：

```
<?php if( function_exists( 'wpsc_the_custom_fields' ) ) wpsc_the_custom_fields( 'slug=' ); ?> 
```

确保将您的自定义字段 slug 附加到“slug =”

例如'slug=my-dropdown'

# ember.js - 使用路由时如何访问视图属性和操作处理程序？

> ID：11802188
> 
> 赞同：1
> 
> 时间：2012-08-03T19:35:56.650
> 
> 标签：ember.js

似乎当我在 Ember.js 中使用新的路由功能时，视图上定义的属性和操作处理程序无法从其模板访问。相反，只有控制器的属性可用，应用程序会在路由器中查找操作处理程序。

这是问题的一个例子：http: [//jsfiddle.net/InMatrix/wtUML/3/](http://jsfiddle.net/InMatrix/wtUML/3/)

如果您单击我的个人资料 ---> 照片 ---> 测试，您将在控制台中收到此错误：

> 无法响应状态 root.profile.photos 中的事件 testButton。

显然，在 App.PhotosView 中定义的以下操作处理程序对事件不可用。

```
App.PhotosView = Em.View.extend({
    templateName: 'photos',
    testButton: function(){
        alert('test Button');                
    }
}); 
```

有没有办法可以将我的动作处理程序保留在相关的视图类中？我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:04:57.850

动作的默认上下文已更改为路由器。如果您希望视图处理操作，您需要像这样指定它：

```
<button {{action testButton target="view"}}>test</button> 
```

这是您的小提琴的工作版本：http: [//jsfiddle.net/wtUML/4/](http://jsfiddle.net/wtUML/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T21:12:29.533

@buuda 确定了它，但如果您想了解更多信息，请参阅动作助手的嵌入式文档：

[https://github.com/emberjs/ember.js/blob/master/packages/ember-handlebars/lib/helpers/action.js](https://github.com/emberjs/ember.js/blob/master/packages/ember-handlebars/lib/helpers/action.js)

# magento - 用于新 CMS 布局的 Magento 模块，但版本为 1.7.0.2

> ID：11802189
> 
> 赞同：1
> 
> 时间：2012-08-03T19:36:08.167
> 
> 标签：magento

我正在尝试为 Magento 中的 CMS 页面创建一个新的布局选项。我已经按照[Magento wiki 上的说明](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/0_-_theming_in_magento/adding_cms_layout_templates)创建了一个模块，但它不起作用。当我对实际的核心 config.xml 文件进行相同的添加时，它可以正常工作，但不能作为自定义模块。根据一些研究，这似乎可以在 Magento 1.6 中使用，但在 1.7 中不起作用，我试图找出原因。我有以下内容：

**应用程序/etc/modules/Fruit_Banana.xml**

```
<?xml version="1.0"?>
<config>
  <modules>
    <Fruit_Banana>
      <active>true</active>
      <codePool>local</codePool>
      <depends>
        <Mage_Page />
      </depends>
    </Fruit_Banana>
  </modules>
</config> 
```

**app/code/local/Fruit/Banana/etc/config.xml**

```
<?xml version="1.0"?>
<config>
  <modules>
    <Fruit_Banana>
      <version>0.1.0</version>
    </Fruit_Banana>
  </modules>
  <global>
    <page>
      <layouts>
        <homepage_middle translate="label">
          <label>Homepage</label>
          <template>page/homepage.phtml</template>
          <layout_handle>homepage_one</layout_handle>
        </homepage_middle>
        <!-- add more layouts here -->
      </layouts>
    </page>
  </global>
</config> 
```

任何想法为什么它似乎不能作为一个模块工作？我正在使用版本 1.7.0.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:41:31.593

`local`模块应该在目录`code`中

`app/code/local/Fruit/Banana/etc/config.xml`

而不是`core`你提到的目录

`app/code/core/local/Fruit/Banana/etc/config.xml`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:15:48.710

好吧，好像我搞砸了！它实际上在 1.7 中有效，我的问题是我的 config.xml 文件名拼写为 confix.xml

一旦我调整了它，自定义布局就会立即弹出！感谢那些插话的人。

# jquery - jQuery slideUp/Down 和 fadeOut/In 中途停止

> ID：11802190
> 
> 赞同：0
> 
> 时间：2012-08-03T19:36:08.223
> 
> 标签：jquery, fadein, fadeout, slidedown, slideup

这是小提琴：

[http://jsfiddle.net/4mmk2/](http://jsfiddle.net/4mmk2/)

快速单击按钮将导致动画中途暂停。我怀疑这是 stop() 函数的问题，但我找不到解决方法。顺便说一句，我使用 stop 来防止 jQuery 将所有滑动动画放入队列中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:37:24.157

尝试：

```
$('a').toggle(function() {
    $('div').stop(1,1).slideUp()
}, function() {
    $('div').stop(1,1).slideDown()
})​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/4mmk2/2/)**

将 stop 方法的 clearQueue 和 jumpToEnd 属性设置为 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:41:15.913

[`toggle()`](http://api.jquery.com/category/deprecated/)已弃用，您可以尝试`slideToggle()`：

```
$('a').click(function(e) {
    e.preventDefault();
    $('div').stop(true,true).slideToggle()
}) 
```

[http://jsfiddle.net/4mmk2/3/](http://jsfiddle.net/4mmk2/3/)

# excel - Excel 使用变量查找和替换

> ID：11802193
> 
> 赞同：0
> 
> 时间：2012-08-03T19:36:41.037
> 
> 标签：excel, vba, macos

我想知道是否有办法以这种方式查找和替换：

我需要找到所有包含`apt`后跟数字的单元格。但数字总是不同的。那么是否有脚本或其他东西可以做到这一点？

寻找 ：`apt XX` `(the 2 Xs representing the numbers)`

替换为：`app 30`

所以它会定位所有的地方`apt + a number`

因为我有数千行，我不想这样做：

查找 : 01...

查找 : 02...

查找 : 03...

等等

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:48:25.087

这是您要查找的内容：

```
Sub findApt()
    Dim count As Integer
    count = Application.WorksheetFunction.CountA(Range("B:B"))
    Dim i As Integer
    i = 1
    Do While i <= count
        If (InStr(Range("B" & i), "apt")) Then
            Range("B" & i) = Mid(Range("B" & i), 1, Application.WorksheetFunction.Search("apt", Range("B" & i)) - 1) & "app 30"
        End If
        i = i + 1
    Loop
End Sub 
```

这假设您的数据在 B 列中。享受吧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:17:14.397

正则表达式确实很有用，但我相信内置的“正则表达式”就足够了。从帮助文件：

> 使用星号查找任何字符串。例如，s*d 查找“sad”和“started”。
> 
> 使用问号查找任何单个字符。例如，s?t 查找“sat”和“set”。

因此，在您的情况下，只需按 Ctrl+H 即可获得“搜索和替换”对话框，然后写入`apt *`搜索框和`app 30`替换框。

PS：从您的问题中不清楚是否有一些单元格包含`apt`后跟数字以外的其他内容并且应该保留。如果是这种情况，请按照 Emmanuel 的建议或`Scripting.Regex`在 VBA 中使用 RegEx。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:47:06.363

我建议您安装 Find And Replace [Excel Regex](http://www.codedawn.com/regex-find-replace-download.php)。允许您使用正则表达式进行查找和替换。

# lotus-notes - 如何在另一个自定义控件中获取文档数据源？

> ID：11802196
> 
> 赞同：0
> 
> 时间：2012-08-03T19:36:52.703
> 
> 标签：lotus-notes, xpages

我有一个包含以下内容的 xPage：

```
 <div class="lotusFrame">
    <xc:layoutCommonBanner />
    <xp:callback facetName="facetTitleBar" id="callbackTitleBar" />
    <xc:layoutDiscrepancyPlaceBar />
    <div class="lotusMain">
        <div class="lotusColLeft">
            <xp:callback facetName="facetColLeft" id="callbackColLeft" />
        </div>
        <div class="lotusColRight">
            <xp:callback facetName="facetColRight" id="callbackColRight" />
        </div>
        <div class="lotusContent">
            <xp:callback facetName="facetContent" id="callbackContent" />
        </div>
    </div>
    <xc:layoutCommonFooter />
    <xc:layoutCommonLegal />
</div> 
```

如您所见，其中有几个自定义控件组成布局。在 facetContent 中，有一个带有文档数据源的文档。它是页面中唯一的文档。我需要在 layoutDiscrepancyPlaceBar 自定义控件中以某种方式获取此文档。

我在网上找到了一些旧文章，其中包含名为 currentDocument 的未记录功能。它应该在每个带有文档数据源的页面上。但它不起作用。我有 Domino 8.5.2 并且 currentDocument 似乎不再受支持。

你能帮我吗？如何从另一个自定义控件中的一个自定义控件获取文档数据源。甚至可能吗？

提前致谢， 吉日

编辑：好的，它仍然受支持，但它仅适用于自定义控件，该控件包含在带有文档数据源的控件中。在上述情况下，它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T00:18:30.107

您最好的选择是在自定义属性中移交绑定名称。（让我们称之为`bindto`。然后你将你的领域绑定到

```
 "${#{"+compositeData.bindto+"}}" 
```

[在此处](http://www.wissel.net/blog/d6plinks/SHWL-8L7JH2)查看详细信息（在 prezi 内）

PS currentDocument 记录在某处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T06:18:36.150

您还可以将数据源上的句柄直接传递给自定义控件，以及要绑定到数据源上的项的名称。因为 EL 支持数组语法以及点语法，所以您可以定义如下表达式：

```
#{compositeData.dsn[compositeData.fieldName]} 
```

（其中“dsn”是传递数据源句柄的属性，“fieldName”是传递要绑定到该数据源的项目名称的属性。）

可以在[此处](http://xmage.gbs.com/blog.nsf/d6plinks/TTRY-86EMBS)找到有关此方法的更多详细信息。

# ios - AppAi.de 似乎违反了沙盒政策

> ID：11802199
> 
> 赞同：1
> 
> 时间：2012-08-03T19:37:18.883
> 
> 标签：ios, sandbox

最近出现在苹果应用商店的一款应用：[AppAide](http://itunes.apple.com/us/app/appaide/id529890484?ls=1&mt=8)

它似乎违反了应用程序沙盒政策。它声称在后台运行并收集用户在其 iOS 设备上运行的应用程序的统计数据。

有人对这在技术上如何可能有任何想法吗？

# android - 如何获取特定列中最后一列值的整数主键值

> ID：11802201
> 
> 赞同：0
> 
> 时间：2012-08-03T19:37:21.640
> 
> 标签：android, sql, sqlite

我有以下表结构

```
_id   column1    column2   column3  column4

1      abcd1      abcd2      abcd3    qbcd4
2      efgh1      efgh2      efgh3    efgh4
3      blah1                 blah3    blah4
5      blll1                          
8      hsdhj               
.........
......... 
```

现在我想更新 column3 的值 where _id = 5;

但是现在在我的 android 应用程序的运行时，我怎么知道 _id 是`5`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:53:04.000

你的问题有点模糊，但试试这个：

```
UPDATE table SET column3 = "new value" WHERE _id = (SELECT min(_id) FROM table WHERE column3 is null); 
```

这将`column3`使用您想要的新值更新第 5 行。

这假设您没有：

```
_id   column1    column2   column3  column4

1      abcd1      abcd2      abcd3    qbcd4
2      efgh1      efgh2      efgh3    efgh4
3      blah1                          blah4
5      blll1                          
6      blah1                 blah3    blah4
8      hsdhj
9      wdenm
... 
```

你想要_id = 8。

# python - Django：视图中的视图

> ID：11802204
> 
> 赞同：0
> 
> 时间：2012-08-03T19:37:45.870
> 
> 标签：python, django, django-templates, django-views

这可能看起来很基本，但是，尽管我可以猜到，您如何在视图中创建视图，或者更准确地说，如何在动态模板中创建动态模板。你看，我有这些 html 块，其中包含某些事物的统计信息。我将如何创建一个返回这些框之一的视图，以便另一个视图可以将它们插入到模板块中？只是有一个返回它的函数是“好的”，还是我“必须”遵循同样`functionName(request)`的事情而不是`functionName(info1, info2, info3)`像普通函数一样。这似乎是一件很常见的事情，以至于会有某种标准。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:43:39.680

这正是[自定义模板标签](https://docs.djangoproject.com/en/1.4/howto/custom-template-tags/)- 特别是包含标签 - 的用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:52:04.453

如果我理解你，你基本上是在谈论预填充模板上下文。基本上，您希望在多个视图中出现一些共同的上下文，但您不想为每个视图重复自己。使用基于函数的视图，最好的方法是简单地使用通用方法来处理这个问题：

```
def add_some_context(context={}):
    context['foo'] = 'bar'
    return context

def view1(self, request):
    context = {
        'something1': 'blah',
    }
    return render_to_response('template1.html', add_some_context(context), context_instance=RequestContext(request))

def view2(self, request):
    context = {
        'something2': 'blah',
    }
    return render_to_response('template2.html', add_some_context(context), context_instance=RequestContext(request)) 
```

然后，这两个视图都有一个`foo`可以使用的上下文变量。使用基于类的视图执行此操作，您可以创建一个 mixin 类：

```
class MyViewMixin(object):
    def get_context_data(self, **kwargs):
        context = super(MyViewMixin, self).get_context_data(**kwargs)
        context['foo'] = 'bar'
        return context

class MyView1(MyViewMixin, DetailView):
    ...

class MyView2(MyViewMixin, ListView):
    ... 
```

当需要将它添加到实际模板中时，您可以让每个视图的模板继承自`foo`以某种方式实现上下文变量的模板。

如果它应该应用于*每个*视图，那么上下文处理器更合适，但如果它只是用于少数视图，那么这两种方法会很好地为您服务。

# java - 有没有好的线程安全格式缓存库？

> ID：11802205
> 
> 赞同：4
> 
> 时间：2012-08-03T19:37:48.007
> 
> 标签：java, multithreading

我想在我的 webapp 中进行一些格式化，使用 MessageFormat、DateFormat、DecimalFormat 等。

由于这些不是线程安全的，因此每次使用一个静态实例将不起作用，但每次需要创建一个新的 XXXXFormat 对象似乎很浪费。使用 ThreadLocal 缓存和重用它们似乎是一种明显的优化。

这似乎是一种非常常见的模式，所以我想知道是否有任何合适的库。

而不是调用：

```
 DecimalFormat formatter = new DecimalFormat("###,##0.00");

    String formatted = formatter.format(value); 
```

每次我需要格式化某些东西时，为什么不：

```
 String formatted = FormatCache.formatDecimal("###,##0.00",numberValue); 
```

FormatCache 会在哪里使用以格式模式为键的 HashMap 进行 ThreadLocal 缓存？

大概还有其他方法，例如：

```
 String FormatCache.formatDecimal(String, Number);
    String FormatCache.formatDate(String, Date);
    String FormatCache.formatMessage(String, Object...); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T19:46:49.573

[Apache Commons Lang](https://commons.apache.org/lang/) has [`FastDateFormat`](https://commons.apache.org/lang/api/org/apache/commons/lang3/time/FastDateFormat.html)，它以正确的方式（在我看来）解决了问题，首先是线程安全的：

> FastDateFormat 是 SimpleDateFormat 的快速且线程安全的版本。
> 
> 在大多数格式化情况下，此类可用作 SimpleDateFormat 的直接替代品。此类在多线程服务器环境中特别有用。SimpleDateFormat 在任何 JDK 版本中都不是线程安全的，也不会像 Sun 已关闭 bug/RFE 那样。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-04T23:40:48.453

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T22:12:59.330

你应该非常小心这样的事情。标准（简单）格式化程序不是线程安全的。我遇到了一些与一些共享/缓存格式化程序相关的多线程问题，但那是几年前的事了（Java 1.4）。如果您检查 JavaDocs ( [SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html) )，您会注意到以下内容：

> 同步
> 
> 日期格式不同步。建议为每个线程创建单独的格式实例。如果多个线程同时访问一个格式，它必须在外部同步。

# 3d - 简单的程序 3D 洞穴生成？

> ID：11802213
> 
> 赞同：3
> 
> 时间：2012-08-03T19:38:36.917
> 
> 标签：3d, minecraft, procedural

我一直在研究 3D 程序世界，现在我想开始添加洞穴系统。

我想找到一种以程序方式创建 3D 洞穴系统的相当简单的方法。我目前正在使用 Perlin Noise 生成我的世界，2D 用于高程/细节，3D 用于雕刻悬垂和较小的洞穴，但是当涉及到长长的相互连接的洞穴时，我感到很困惑。

我希望得到更像 Minecraft 的洞穴系统的东西。它们似乎非常紧密相连，几乎在任何方向上随机分支，并且洞穴中的几乎任何点都会具有相当圆形的外观，并且整个半径相当相等（不是最好的措辞，但不太清楚如何表达）。

像我想要的那样生成洞穴的最大挑战是我想动态生成世界。世界目前是逐块生成的，从玩家所在的位置开始，然后从那里向外生成。我**不想**生成任何世界，**然后**使用漫游模式、元胞自动机等挖掘洞穴。

一个很好的例子：

![在此处输入图像描述](../Images/fe7923f482779614bd26d82ba3c60c69.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:58:33.233

在生成你的世界时，我将对你的生成算法做出一些相当大的假设。

您正在创建一个类似于 Minecraft 的世界。这意味着世界是由方块组成的，没有这些方块构成了“空气”或玩家空间。因此，当您在世界上制作积木时，您不希望在您希望有洞穴的地方放置积木或相反地移除已放置的积木。好的？

你如何生成洞穴，本质上是负空间，这完全取决于你。但在你的问题中可能存在你的答案。洞穴“非常紧密相连，几乎在任何方向上随机分支，并且洞穴中的几乎任何点都会具有相当圆形的外观，并且整个半径相当相等”。然后，您所需要的只是生成符合该规范的生成算法，并且要么不在那里放置块，要么删除已经放置的块，或者用你自己的话“挖掘”。

作为旁注，让生成算法从玩家所在的位置生成听起来是一个相当糟糕的主意，但我想它是否有效。

# python - 整数文字是 Python 中的对象吗？

> ID：11802214
> 
> 赞同：14
> 
> 时间：2012-08-03T19:38:39.723
> 
> 标签：python, syntax

> **可能重复：**
> [访问 python int 文字方法](https://stackoverflow.com/questions/10955703/accessing-a-python-int-literals-methods)

Python 中的一切都是对象。甚至一个数字也是一个对象：

```
>>> a=1
>>> type(a)
<class 'int'>
>>>a.real
1 
```

我尝试了以下方法，因为我们应该能够访问对象的类成员：

```
>>> type(1)
<class 'int'>
>>> 1.real
  File "<stdin>", line 1
    1.real
         ^
SyntaxError: invalid syntax 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-03T19:40:51.840

是**的，整数文字是Python*中的一个对象***。总而言之，解析器需要能够理解它正在处理一个整数类型的对象，而该语句`1.real`使解析器误以为它有一个浮点数，`1.`后面跟着单词`real`，因此会引发语法错误。

要对此进行测试，您也可以尝试

```
>> (1).real
  1 
```

也，

```
>> 1.0.real
  1.0 
```

所以在`1.real`python 的情况下，将 解释`.`为小数点。

**编辑**

BasicWolf 也说得很好——`1.`被解释为 1 的浮点表示，所以`1.real`相当于写作`(1.)real`——所以没有属性访问运算符，即句点/句号。因此语法错误。

**进一步编辑**

正如 mgilson 在他/她的评论中提到的那样：解析器可以处理对`int`的属性和方法的访问，但前提是该语句清楚地表明它被赋予 an`int`而不是 a `float`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-03T19:45:33.470

尽管 with 的行为`1.real`似乎不合逻辑，但由于语言规范，这是可以预料的：Python 解释`1.`为浮点数（请参阅[浮点文字）](http://docs.python.org/reference/lexical_analysis.html#floating-point-literals)。但正如@mutzmatron 指出的那样`(1).real`有效，因为括号中的表达式是一个有效的 Python 对象。

更新：注意以下坑：

```
1 + 2j.real
>>> 1.0      # due to the fact that 2j.real == 0
# but
1 + 2j.imag  
>>> 3.0      # due to the fact that 2j.imag == 2 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-03T20:00:54.277

一种语言通常分为三层。

当您向一种语言提供程序时，它首先必须“阅读”该程序。然后它将它读到的东西构建成它可以使用的东西。最后它以“程序”的形式运行该东西并（希望）打印结果。

这里的问题是python的第一部分——读取程序的部分——被混淆了。它很困惑，因为它不够聪明，无法知道两者之间的区别

```
1.234 
```

和

```
1.letters 
```

似乎正在发生的事情是，它认为您正在尝试输入一个数字，`1.234`但犯了一个错误并输入了字母（！）。

所以这与`1`“真正的”是什么以及它是否是一个对象无关。所有这些逻辑都发生在我之前描述的第二和第三阶段，当 python 尝试构建然后运行程序时。

您发现的只是 python 读取程序的一个奇怪（但有趣！）的皱纹。

[我称它为错误，但它可能是这样的。事实证明，有些东西对计算机来说很难阅读。python 的设计可能是为了让计算机可以轻松（快速）地读取程序。修复这个“错误”可能会使 python 中读取程序的部分变得更慢或更复杂。所以这可能是一个权衡。]

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-03T19:55:18.877

您仍然可以访问 1.real：

```
>>> hasattr(1, 'real')
True
>>> getattr(1, 'real')
1 
```

# c# - 在托管 COM 服务器中记录对 QueryInterface 的调用

> ID：11802217
> 
> 赞同：1
> 
> 时间：2012-08-03T19:39:00.890
> 
> 标签：c#, .net, com, interface, queryinterface

我按照[此处](http://code.msdn.microsoft.com/windowsdesktop/CSExeCOMServer-f2a59967)的示例创建了一个 C# 进程外 COM 服务器。

我的服务器是从我无法控制的第三方应用程序中使用的。为了找出他们在加载我的组件时需要哪些接口，我想记录他们对 QueryInterface 方法的所有调用。但是，因为我使用的是 .NET，所以我无法自己实现 IUnknown::QueryInterface - 它是由 CCW（COM 可调用包装器）自动提供的。

有没有办法为我的 C# COM 服务器记录对 QueryInterface 的所有调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T21:23:29.980

很抱歉回答了我自己的问题，但是经过一些非常研究密集的工作后，我发现由于 .NET 4 可以实现[ICustomQueryInterface](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.icustomqueryinterface.aspx)并提供他自己的 QueryInterface 托管实现。向其中添加日志记录将非常容易。

# jquery - 从 Django 视图执行 jQuery 函数？

> ID：11802221
> 
> 赞同：0
> 
> 时间：2012-08-03T19:39:10.000
> 
> 标签：jquery, python, django

我有一个退出视图，当用户成功退出时，我想执行一个 jQuery 函数，上面写着“你已经退出了！” 在吐司弹出。如何从 Django 视图调用 jQuery 函数。我从这里得到了 jQuery 代码：http: [//shawntabai.com/wp/2011/09/06/toast-notifications-using-jquery/](http://shawntabai.com/wp/2011/09/06/toast-notifications-using-jquery/)

意见.PY：

```
def signout(request):
    logout(request)
    return HttpResponseRedirect(reverse(index)) 
```

存储在我的标题中的 jQuery 函数：

```
<head>
<script type="text/javascript">
    function toast(sMessage)
{
    var container = $(document.createElement("div"));
    container.addClass("toast");

    var message = $(document.createElement("div"));
    message.addClass("message");
    message.text(sMessage);
    message.appendTo(container);

    container.appendTo(document.body);

    container.delay(100).fadeIn("slow", function()
    {
        $(this).delay(2000).fadeOut("slow", function()
        {
            $(this).remove();
        });
    });
}
</script>
<head> 
```

我可以做这样的事情：

```
def signout(request): 
    logout(request) 
    return HttpResponseRedirect(reverse(index, "$(document).ready(function(){toast('test');});")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:36:31.360

我建议改用 Django 消息 - [https://docs.djangoproject.com/en/dev/ref/contrib/messages/](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)。

您可以检查模板中是否填充了“消息”并显示 toast 通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:43:13.247

将此添加到您的脚本标签：

```
$(document).ready(function(){
  toast("test");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T21:28:20.237

回答：我结合了两个回答来得到我的答案：

1.  [在标题http://shawntabai.com/wp/2011/09/06/toast-notifications-using-jquery/](http://shawntabai.com/wp/2011/09/06/toast-notifications-using-jquery/)中使用 jQuery 插件
2.  使用 django 消息框架：[https ://docs.djangoproject.com/en/1.4/ref/contrib/messages/](https://docs.djangoproject.com/en/1.4/ref/contrib/messages/)
3.  将 {{ message }} 插入到 jQuery 脚本中。

视图.PY

```
def signout(request):
    logout(request)
    messages.add_message(request, messages.INFO, 'Signout Successful.')
    return HttpResponseRedirect(reverse(index)) 
```

索引.html

```
{% if messages %}
    {% for message in messages %}
        <script type="text/javascript">
            $(document).ready(function(){toast("{{ message }}");});
        </script>
    {% endfor %}
{% endif %} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T20:48:45.107

不幸的是，我不知道 JQuery，所以这将是更多的伪代码-y/Prototype-y，但这是最好的方法。（JQuery 用户，请随时使用实际 JQuery 修复它）

在您的注销链接上，添加一个对视图执行 AJAX 请求的事件处理程序：

```
$('a').click(function() {
   Ajax.send('/path/to/logout/', {
      onSuccess: function(response) {
         toast(response.responseText, function() {
             window.location = '/path/to/index/';
         });
      },
      onFailure: function(response) {
         toast(response.responseText);
      }
   });
}) 
```

请注意，我向`toast()`. 您需要将 toast 更改为：

```
function toast(sMessage, action)
{
    var container = $(document.createElement("div"));
    container.addClass("toast");

    var message = $(document.createElement("div"));
    message.addClass("message");
    message.text(sMessage);
    message.appendTo(container);

    container.appendTo(document.body);

    container.delay(100).fadeIn("slow", function()
    {
        $(this).delay(2000).fadeOut("slow", function()
        {
            $(this).remove();
            if (action) action();
        });
    });
} 
```

最后，观点：

```
def signout(request):
    if logout(request):
        return HttpResponse('You have successfully logged out!')
    else:
        return HttpResponseBadRequest('There was an error logging out.') 
```

# php - 通过将代码添加到 URL 来显示特定的 div

> ID：11802223
> 
> 赞同：1
> 
> 时间：2012-08-03T19:39:21.220
> 
> 标签：php, jquery, url, html, show

我以这段代码为例：

```
<html>
<head>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>

<script type="text/javascript">
function showonlyone(thechosenone) {
     $('.newboxes').each(function(index) {
          if ($(this).attr("id") == thechosenone) {
               $(this).show(200);
          }
          else {
               $(this).hide(600);
          }
     });
}
</script>

</head>

<body>

             <div style="border: 1px solid blue; background-color: #99CCFF; padding: 5px; width: 150px;">
                <a id="myHeader1" href="javascript:showonlyone('newboxes1');" >show this one only</a>
             </div>
             <div class="newboxes" id="newboxes1" style="border: 1px solid black; background-color: #CCCCCC; display: block;padding: 5px; width: 150px;">Div #1</div>

             <div style="border: 1px solid blue; background-color: #99CCFF; padding: 5px; width: 150px;">
                <a id="myHeader2" href="javascript:showonlyone('newboxes2');" >show this one only</a>
             </div>
             <div class="newboxes" id="newboxes2" style="border: 1px solid black; background-color: #CCCCCC; display: none;padding: 5px; width: 150px;">Div #2</div>

             <div style="border: 1px solid blue; background-color: #99CCFF; padding: 5px; width: 150px;">
                <a id="myHeader3" href="javascript:showonlyone('newboxes3');" >show this one only</a>
             </div>
             <div class="newboxes" id="newboxes3" style="border: 1px solid black; background-color: #CCCCCC; display: none;padding: 5px; width: 150px;">Div #3</div>

</body>
</html> 
```

在另一个页面上，我希望有一个链接，当用户通过单击该外部链接加载页面时，该链接将显示**Div #2 。**我认为通过对 URL 进行某种类型的调整，这样的事情是可能的？例如：domain.com/page.php?=showdiv2

感谢您提供任何帮助，我的编码知识有限（尤其是 PHP），所以如果您选择提供帮助，请详细说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:52:32.253

有两个步骤要做：首先我们需要知道如何在我们的域中使用参数，最后需要切换内容。

1）您可以将参数添加到被调用的文件中，如下所示：

```
http://server/path/file?key=value 
```

对于这个例子，让我们使用 key `page`。因此，这些将是您需要链接的网址：

```
http://server/path/file?page=div-1
http://server/path/file?page=div-2 
```

2) 将您的代码拆分为一个 php 文件，其中包含现在所有的内容和两个文件，您可以随意命名，例如 div-1.php 和 div-2.php 。将特定的 div-1 和 div-2 内容复制到后者中。

3) 最后打开您的主 php 文件并删除 div-1 和 div-2。他们现在应该都在其他文件中。并输入以下php代码：

```
<?php
if (isset($_REQUEST['page']) === false || in_array($_REQUEST['page'], array('div-1', 'div-2')) === false) {
    $_REQUEST['page'] = 'div-1';
}
include $_REQUEST['page'] . '.php';
?> 
```

该 urls 将调用 php 文件，将其内容推送到浏览器并在推送时执行我们输入的脚本。脚本验证是否设置了 url 参数页面，检查它是否有效并将第二个文件推送到我们所在的位置把脚本放在前面。出于安全原因，后一种检查是非常必要的（见下文）！

* * *

注意：以下代码行用于显示默认页面，例如`index`或`start`。它可以很容易地改变。

```
$_REQUEST['page'] = 'div-1'; 
```

注意：我们需要关心安全性，因此不允许不存在的页面。如果我们不这样做，可以执行您服务器上的各种 php 脚本。只需在上面的 if 语句中更改、编辑或添加其他元素到数组中：

```
array('div-1', 'div-2') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:42:39.113

有多种方法可以在这里完成您想做的事情。我将解释如何使用`$_GET`.

您可以使用`$_GET`变量来控制它（在 URL 的末尾，只需添加`?varName=value`where`varName`是变量的名称（这是任意的），并且`value`是您要为其分配的值。

然后在您的 PHP 代码中，您可以通过**a)**检查它是否存在和**b)**根据其值执行逻辑来访问此变量：

```
<?php
    $divToShow = isset($_GET['div']) ? $_GET['div'] : "";

    //logic here
?> 
```

因此，例如，如果您想`<div id="div_2">`显示，您可以通过编写将其插入到 jQuery 中：

```
<script language="javascript" type="text/javascript">
    $("div#div_<?= $divToShow ?>").show();
    $("div:not(#div_<?= $divToShow ?>)").hide();
</script> 
```

或者你可以简单地强制 PHP 只打印出 div #2：

```
<?php
// set $divId to a value

if ($divId == $divToShow) : ?>
    <div id="<?= $divId ?>">
        <!-- content here -->
    </div>
<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T19:45:43.383

我会用 PHP 对其进行编码，如下所示：

page.php?id=idofdiv

```
<html>
<head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<script type="text/javascript">
function showonlyone(thechosenone) {
 $('.newboxes').each(function(index) {
      if ($(this).attr("id") == thechosenone) {
           $(this).show(200);
      }
      else {
           $(this).hide(600);
      }
 });
}
$(document).ready(function(){
$("#<?php echo $_GET['id']; ?>").show();
});
</script>
</head>
<body>

         <div style="border: 1px solid blue; background-color: #99CCFF; padding: 5px; width: 150px;">
            <a id="myHeader1" href="javascript:showonlyone('newboxes1');" >show this one only</a>
         </div>
         <div class="newboxes" id="newboxes1" style="border: 1px solid black; background-color: #CCCCCC; display: block;padding: 5px; width: 150px;">Div #1</div>

         <div style="border: 1px solid blue; background-color: #99CCFF; padding: 5px; width: 150px;">
            <a id="myHeader2" href="javascript:showonlyone('newboxes2');" >show this one only</a>
         </div>
         <div class="newboxes" id="newboxes2" style="border: 1px solid black; background-color: #CCCCCC; display: none;padding: 5px; width: 150px;">Div #2</div>

         <div style="border: 1px solid blue; background-color: #99CCFF; padding: 5px; width: 150px;">
            <a id="myHeader3" href="javascript:showonlyone('newboxes3');" >show this one only</a>
         </div>
         <div class="newboxes" id="newboxes3" style="border: 1px solid black; background-color: #CCCCCC; display: none;padding: 5px; width: 150px;">Div #3</div> 
```

我所做的是：

```
$(document).ready(function(){
$("#<?php echo $_GET['id']; ?>").show();
}); 
```

当 PHP 被解析（这是服务器端）时，它将发送 url ($_GET['id']) 中给出的 id 以在您的 jQuery 代码中解析。此代码将在文档准备好时执行。

如果 $_GET['id'] 为空或不存在，则不会发生任何事情（没有要显示的 div）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T19:48:17.700

与往常一样，有许多解决方案，但是我们在应用程序中有类似的要求，我们希望一个页面向另一个页面发送消息以显示给用户。例如，更新设置后返回主页，顶部显示“设置已更新”消息。我们的解决方案是在 url 中发送消息，然后在每个页面加载时运行一个 javascript，在 url 中查找消息。如果它在那里，它会显示给用户，如果它不在那里，则什么也不会发生。

在我们常见的 pageLoad 例程（每个页面上的 javascript）中，我们执行

```
if (jQuery.query.get('fadeMessage'))
{
    FadeMessage(jQuery.query.get('fadeMessage'));
} 
```

然后 FadeMessage 定义为：

```
function FadeMessage(message) {
jQuery('#fadeMessage').html(message).animate({ "top": "0" }, 1000).delay(2000).animate({ "top": "-80px" }, 1000); 
```

}

“fadeMessage” div 在每个页面上为：

```
<div id="fadeMessage">
</div> 
```

尽管在我输入此内容时，我想我们可以在需要时注入该 div。嗯... :-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T19:44:31.323

您只能通过在页面加载时检查 URL 的哈希部分来使用 Javascript/jQuery 执行此操作：

`http://mydomain.com/some/path#showcontainer1`

HTML

```
<div class="container_one" style="display:none;">Content</div>
<div class="container_two" style="display:none;">Other Content</div> 
```

JS

```
$(function(){

  switch( window.location.hash ){
    case '#showcontainer1':  //if hash is #showcontainer1
      $('.container_one').fadeIn();   //fadein the container with some class 
      break;
    default:
      $('.container_two').fadeIn()   //else fade container with other class
      break;
  }

}); 
```

# android - android 4.0.4 奇怪的行为

> ID：11802227
> 
> 赞同：0
> 
> 时间：2012-08-03T19:39:37.537
> 
> 标签：android, multithreading

我为我的许可证项目工作，其中一部分包含在一个 android 客户端中。一切都很好，直到我将手机升级到 Android 4.0.4。

所以，我有一个 AsyncTask。它看起来像这样：

```
public class TestTask extends AsyncTask<Context, Integer, Long> {

@Override
protected Long doInBackground(Context... params) {
    for (int i = 0; i < 10; i++) {
        System.out.println("nothing-" + i);
        if (i == 5) {
            TestTask2 testTask2 = new TestTask2();
            testTask2.execute(null);
        }
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
    return null;
} 
```

}

此任务等待 5 秒，然后它会调用另一个异步任务 TestTask2。

```
public class TestTask2 extends AsyncTask<Context, Integer, Long> {

@Override
protected Long doInBackground(Context... params) {
    System.out.println("task 2 in action");
    return null;
} 
```

}

在 android 4.0.3 或更低版本中，输出为：

> 无-0 无-1 无-2 无-3 无-4 无-5
> 
> 任务 2 进行中
> 
> 无 6 无 7 无 8 无 9

当我升级到 4.0.4 时，第二个任务直到第一个任务完成后才开始。

> 无-0 无-1 无-2 无-3 无-4 无-5 无-6 无-7 无-8 无-9
> 任务2 在行动

android 4.0.4 中是否有任何线程策略或其他？可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:41:48.470

听起来与此有关： [Serial Execution of multiple AsyncTasks](https://stackoverflow.com/questions/6890704/serial-execution-of-multiple-asynctasks)

不知道默认设置是否已更改，尽管我会尝试重新查找一篇旧帖子...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:57:51.447

谢谢你的问题。显然默认行为已经改变： [https ://groups.google.com/d/msg/android-developers/8M0RTFfO7-M/JZSHiOz9bPgJ](https://groups.google.com/d/msg/android-developers/8M0RTFfO7-M/JZSHiOz9bPgJ)

你可以通过改变这个来获得旧的行为：

```
testTask2.execute(null); 
```

对此：

```
testTask2.executeOnExecutor(THREAD_POOL_EXECUTOR, null); 
```

# google-apps-script - 如何在脚本库上发布脚本

> ID：11802228
> 
> 赞同：0
> 
> 时间：2012-08-03T19:39:42.590
> 
> 标签：google-apps-script, spreadsheet

如何将我的脚本之一发布到脚本库，以便将其添加到我想要的任何其他电子表格中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:16:43.877

请参阅问题[http://code.google.com/p/google-apps-script-issues/issues/detail?id=1599](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1599)。否则，您可以通过在脚本编辑器中单击 Publish--> Publish to Gallery 来发布脚本。然而，这必须经过一个批准程序，并且将向公众开放，我听说这不会很快发生。

# ruby-on-rails - 从 Ruby on Rails 3.2.6 中的 Paperclip 生成的文件中删除问号

> ID：11802230
> 
> 赞同：7
> 
> 时间：2012-08-03T19:39:53.637
> 
> 标签：ruby-on-rails, ruby, paperclip, strip

我正在使用 Paperclip-FFMEG 将视频文件上传到我的开发环境（最终，当我的项目投入生产时，上传到本地服务器）。

上传视频时，文件名默认如下：

```
/system/modelnames/paperclipnames/.../mynewfile.mp4?xxxxxxxxxx 
```

我相信问号后面的 10 位数字是时间戳。

但是，我将用来播放视频的播放器不喜欢在文件附件之后有任何内容 - 所以我想在将 URL 传递给播放器之前去掉问号和它后面的时间戳。

我尝试使用以下 Ruby（我认为）剥离函数：

```
temp_variable = model.paperclipattribute.url(:blah).strip('?')[0] 
```

然而，Rails 抛出了一个错误：

```
wrong number of arguments(1 for 0) 
```

我认为我做错了吗？还有其他解决方案吗？我不想完全关闭时间戳，因为我只需要在这种情况下这样做。

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-05-02T14:55:56.283

如果您想为给定的附件在任何地方执行此操作并且不需要传递额外的参数，则可以`use_timestamp`在调用`has_attached_file`模型中的方法时设置该选项。因此，以 Paperclip README 中给出的示例为基础：

```
has_attached_file :avatar,
  :styles => { :medium => "300x300>", :thumb => "100x100>" },
  :default_url => "/images/:style/missing.png",
  :use_timestamp => false 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T10:28:08.223

希望这可以作为我自己问题的答案（因为它可能对偶然发现这篇文章的其他人有用），但我后来发现处理这个问题的另一种（更合适的）方法是在视图中显示内容时，将`false`参数添加到 URL()，如下所示：

```
model.paperclipattribute.url(:whateverstyle, false) 
```

时间戳将被自动删除。我认为这更好，因为`split`我建议的方法可能会删除您不打算删除的内容 - 例如，如果您的文件名为“Is_this_a_question_?_Yes_it_is.mp4?xxxxxx”，那么第一个问号之后的所有内容可能被删除（即文件将被读取为“这是一个问题_”，从而损坏文件名。

我没有测试过这个，所以我可能是错的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-30T18:02:06.073

全局默认它们为关闭，只需将其放在 config/initializers/paperclip.rb 文件中。

`Paperclip::Attachment.default_options[:use_timestamp] = false`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T19:42:41.403

你想`split`改用我相信。strip 不接受任何参数，它只是删除前导和尾随空格

# git - 如何创建远程分支？

> ID：11802232
> 
> 赞同：0
> 
> 时间：2012-08-03T19:40:09.237
> 
> 标签：git, github

如果我像这样在本地 git repos 上创建分支：

`git checkout -b test`

然后推

`git push`

我实际上并没有`test`在我的 GitHub 页面中看到新分支。如何让我的远程分支镜像我的本地分支？

## 更新

当我提交（即使没有更改）并运行时：

`git push origin test`

那行得通。但这是正确的方法吗？不应该`git push`将所有本地更改推送到远程存储库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:43:02.980

利用

```
git push -u origin test:test 
```

创建远程分支。

> 但这是正确的方法吗？

是的。

> *git push*不应该将所有本地更改推送到远程存储库吗？

仅当分支设置为首先跟踪到远程分支时。在您明确推送一次之前，您的分支不会跟踪任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:43:19.907

您必须明确推送新的本地分支：

```
git push origin test:test 
```

否则 Git 会推送你创建的任何（临时）本地分支3

# html - 而 ol li 样式应用于 ul li?

> ID：11802233
> 
> 赞同：0
> 
> 时间：2012-08-03T19:38:27.677
> 
> 标签：html, css

我正在尝试创建嵌套列表：

```
<html>
  <head>
    <style>
      ol li {
        list-style: decimal outside none;
      }
    </style>
  </head>
  <body>
    <ol>
      <li>Digit</li>
      <ul>
        <li>Circle</li>
      </ul>
      <li>Digit</li>
    </ol>
  </body>
</html> 
```

但我得到的是：

```
1\. Digit
    1\. Circle
2\. Digit 
```

为什么我在无序列表中得到一个“十进制”标记？我想我只将“十进制”应用于`ol li`元素，而不是`ul li`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T19:41:54.087

选择器说“一个 li 是 ol 的后代”

包含“Circle”的 li 是 ol 的孙子，所以它是后代。

（它*不*应该是孙子，因为 an 唯一允许的子元素`ol`是`li`s，所以`ul`应该在 an 内`li`（这仍然会使其成为曾孙）或根本不在里面`ol`）。

您可能希望使用子选择器`>`而不是后代选择器（空格）

# jquery - 使用兄弟元素创建悬停和当前页面状态

> ID：11802238
> 
> 赞同：0
> 
> 时间：2012-08-03T19:40:44.620
> 
> 标签：jquery, hover, parent-child, siblings, current-page

我有动画导航按钮，实际上可以使用 css 设置所有内容，但一个元素除外。一个箭头。这是实际的实时页面。

[http://sclarkstudio.com/testing/mm/index.htm](http://sclarkstudio.com/testing/mm/index.htm)

我正在尝试使箭头在当前页面上可见且静态。我有一个悬停脚本，当类设置为 .arrow 时，它会为箭头设置动画，当类设置为 .currenta 时，它是静态且可见的。

```
<body id="@@id@@"> <!-- in this case "home" -->

<nav class="sidebar1">
<ul class="navbox">
    <li class="navBtn">
        <div class="slider on"></div>
        <a id="BtnText" class="navButton home"href="index.htm">Home</a>
        <div id="arrow" class="arrow"></div>
    </li>
    <li class="navBtn">
        <div class="slider on"></div>
        <a id="BtnText" class="navButton news"href="news.htm">News</a>
        <div id="arrow" class="arrow"></div>

and so on...

 </ul>
</nav> 
```

我正在尝试编写的脚本只需要将箭头 div 的类更改为“.currenta”

```
var bodyID = $("body").attr("id");
var url = window.location;

$(function() {

$('nav ul li a #BtnText').each(function(){
var myHref = $(this).attr('href');
if( url == myHref) {
    $(this).closest('div','#arrow').css('currenta');
} 
});
}); 
```

我一直在努力解决这个问题，而不是最好的编码器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:10:38.120

首先：ID 应该是唯一的。它只会抓取它找到的具有该 ID 的第一个元素

第二：添加一个类使用[addClass()](http://api.jquery.com/addClass/)

第三：`window.location`永远不会==你`href`的代码永远不会运行。您想通过使用检查它是否包含您的 href`indexOf`

第四：你可以只用它们的类名来获取元素。

```
$('.arrow').each(function(){
     var $this = $(this);
     if(window.location.indexOf($this.siblings('a.navButton').attr('href')) > -1){  //
         $this.removeClass('arrow').addClass('currenta');  
         // I think you wanted to remove the arrow class.. if not just remove it
     }
}); 
```

[http://jsfiddle.net/9x9uF/](http://jsfiddle.net/9x9uF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:10:53.893

首先，`id`您的页面中`(BtnText and arrow)`存在重复的 s 不止一次，将它们更改为`class`因为`id`必须是唯一的。所以你的 html 应该像下面这样

```
<nav class="sidebar1">
    <ul class="navbox">
        <li class="navBtn">
            <div class="slider on"></div>
            <a class="BtnText" class="navButton home" href="index.htm">Home</a>
            <div class="arrow"></div>
        </li>
        <li class="navBtn">
            <div class="slider on"></div>
            <a class="BtnText" class="navButton news" href="news.htm">News</a>
            <div class="arrow"></div>
    </ul>
</nav> 
```

**JS**

```
var url = window.location;
$(function() {
    $('nav ul li a.BtnText').each(function(){
        var myHref = $(this).attr('href');
        if(url.match(myHref)) { // use match
            $(this).next('div.arrow')
            .removeClass('arrow').addClass('currenta'); // use removeClass and addClass
        } 
    });
}); 
```

[**演示**](http://jsfiddle.net/heera/fmLBe/2/)。

**更新：**

请记住，删除类后，`arrow`您将丢失与该类关联的所有样式，因此您可以直接使用而不使用`addClass`删除类。所以，在那种情况下`arrow``removeClass`

```
$(this).next('div.arrow').removeClass('arrow').addClass('currenta'); 
```

应该

```
$(this).next('div.arrow').addClass('currenta'); 
```

# regex - 当 Perl 正则表达式插值关闭时，排除了哪些转义？

> ID：11802239
> 
> 赞同：4
> 
> 时间：2012-08-03T19:40:49.070
> 
> 标签：regex, perl, string-interpolation

我很好奇当插值被关闭时，哪些转义序列被排除在 Perl 正则表达式中被匹配，比如使用撇号（单引号）作为分隔符`m''`，以及为什么。[perlop](http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators "佩洛普")中插值的描述提到：

> 在这个阶段不执行插值。任何反斜杠序列包括`\\`在解析正则表达式的阶段被处理。

但是，对[perlre](http://perldoc.perl.org/perlre.html#Regular-Expressions "佩尔雷")中的转义序列的测试表明，并非所有的转义序列都被同等对待。

因此，我测试了[perlre](http://perldoc.perl.org/perlre.html#Regular-Expressions "佩尔雷")的“转义序列”部分中列出的所有简单转义，发现有些是“关闭”而有些是“打开”。[perlrebackslash](http://perldoc.perl.org/perlrebackslash.html#Regular-Expressions "perlrebackslash")中的“on”和“off”转义与“字符转义”和“转义修饰符”描述之间似乎存在对应关系。到目前为止，我还没有测试过该页面上列出的所有可能的转义，只是来自这两组的那些。

即使我测试了所有可能的转义，我也不确定我是否理解为什么有些在插值关闭时仍然有效，而另一些则没有。任何人都可以启发我吗？

* * *

**更新：**正如@tchrist 所建议的，这里有一些例子。我基本上使用了以下 shell 代码的变体来针对来自 STDIN 的一些用户输入来测试这些代码：

```
perl -e "use 5.012; while(<>) { say 'YES' if m'\t';}" 
```

转义`\e`, `\f`, `\n`, `\r`, 和`\t`, 当在非插值匹配结构中使用时，例如`m'\t'`(etc.) 仍将匹配它们转义的特殊字符，而不是它们的文字字符串表示。这与我在使用插值匹配形式（例如`m/\t/`）时看到的匹配行为相同，这就是我所说的仍在“工作”的意思。

另一方面，修饰符如`\L`, `\U`, `\l`, 和`\u`inside of 的作用`m''`与 inside of 不同`m//`。例如`m'\uthis'`不匹配输入：“这是一个字符串”，而`m/\uthis/`匹配这样的输入。第一种形式*将*匹配输入：“\uthis is a string”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:13:29.760

它是单引号字符串和双引号字符串之间的区别，这些规则与正则表达式模式是分开的

所以`m'$foo'`喜欢`'$foo'`和不喜欢`"$foo"`

```
use Data::Dump;
$foo = 12;
dd qr/$foo/i;
dd qr'$foo'i;
__END__
qr/12/i
qr/$foo/i 
```

因此，如果使用插值，则匹配 12，如果禁用插值，则匹配`$`，行尾（或字符串）后跟 foo

更多信息请参见[http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators](http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators)

**更新：**附带说明，除了 Data::Dump 之外，Data::Dumper 和 Data::Dump::Streamer 都`qr'$foo'i`错误地“转储”为`qr/$foo/i`

# android - 逆向工程 Android 资产

> ID：11802246
> 
> 赞同：1
> 
> 时间：2012-08-03T19:41:25.617
> 
> 标签：android, reverse-engineering

我正在尝试对 APK 文件进行逆向工程。

我尝试使用 apk2jar 来获取类和资源文件。但我无法解压缩资产。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:44:07.877

使用 apk 工具。它将对所有布局、值、资产等进行逆向工程。

Apktool：http: [//ibotpeaches.github.io/Apktool/](http://ibotpeaches.github.io/Apktool/)

# deployment - Azure 启动任务，等待所有其他任务完成

> ID：11802253
> 
> 赞同：2
> 
> 时间：2012-08-03T19:41:58.253
> 
> 标签：deployment, azure, startup

我的 webrole 有一个启动任务，从 blob 下载一些可执行文件，然后继续安装。

从 .cmd 文件，我启动一个下载文件的 power shell 脚本，然后从 .cmd 启动文件。

如果我在发布完成后通过 RDP 手动运行该脚本，则该脚本可以正常工作。

但是，当作为启动脚本运行时，它有时（*经常*）在不同的点上失败。

`taskType`设置`background`为。

上次，错误是该命令`PowerShell`不存在...

另外，我`powershell -command set-executionpolicy unrestricted`在运行我的 PS 脚本之前使用，但我[在这里](http://blogs.msdn.com/b/jimoneil/archive/2011/02/07/azure-startup-tasks-and-powershell-lessons-learned.aspx#alone)读到其他任务可能会重置此设置并使我的失败。

好乱。

所以这让我想，如果我可以在开始我的任务之前等待所有其他任务执行，它将消除这些类型的问题

我想我可以检查某个进程是否正在运行并等待它完成，但我不知道要检查哪个进程。

或者也许还有另一种解决方案。

**~编辑~**

[我在这里](http://blog.elastacloud.com/2011/01/14/implementing-custom-performance-counters-in-windows-azure-sdk-1-3/)读到有关 powershell 不存在的错误可能是由于在 Visual Studio 中将批处理文件保存为 UTF-8 引起的。我在记事本++中从头开始重写它并确保它保存为ANSI。然后，同样的错误。完整的信息是：

> 'PowerShell' 不是内部或外部命令、可运行程序或批处理文件。

同样，该脚本可以从远程桌面的命令行完美运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-14T19:02:12.200

这可能是由编码问题引起的。如[本答案](https://stackoverflow.com/a/15877248/700926)所述，您应该将文件保存为*ASCII*以确保正确解释您的脚本。

从链接的答案：

> 用你的 VS 2012 Ultimate 打开你的whatever.cmd 文件。单击文件->将whatever.cmd另存为->在对话框中[保存]按钮旁边有一个小箭头。它将显示一个菜单，其中包含“使用编码保存”选项。
> 
> 选择它。现在从可用编码列表中选择“US-ASCII Codepage 20127”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:51:14.107

可以在需要完成的脚本末尾设置一个环境变量，然后在等待依赖项的脚本中，循环直到设置环境变量，然后启动它的活动。

您还可以从单个 powershell 脚本运行所有内容，并在安装程序语句上使用“-asjob”开关，使用“wait-job”cmdlet 阻止直到任务完成然后继续。Powershell 还提供了一个“？！” 确保最后一条语句正确执行的运算符。

# entity-framework - Entity Framework CF 可以存储“对象类型”值吗？

> ID：11802255
> 
> 赞同：9
> 
> 时间：2012-08-03T19:42:01.903
> 
> 标签：entity-framework, ef-code-first

这是一个问题。

我需要为我的对象存储道具。而且我不知道——它是什么道具——它是数据驱动的。我使用“对象类型”作为道具的“价值”，但是...... EF 是否适用于对象类型？

对象从来都不是复杂类型——它是布尔值、字符串、Int 和 Guid。

直到 EF 进入游戏 - 一切都很好。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-04T06:24:00.127

不。EF 不支持这一点，因为它需要数据库中的“动态”列类型。数据库可以支持这样的场景——例如 SQL 服务器提供`sql_variant`。不幸的是，EF 无法映射这些列。[这](http://www.codeproject.com/Articles/137509/Reading-sql_variant-in-Entity-Framework)是在只读方案中使用变体列的解决方法。解决方法`DefiningQuery`在 EDMX 中使用。理论上，您应该能够映射修改命令，以便能够使用它来保存更改。不可能在代码优先中使用它 - 代码优先只提供基本映射。

# javascript - setTimeout 回调函数的返回值在哪里？

> ID：11802256
> 
> 赞同：0
> 
> 时间：2012-08-03T19:42:08.773
> 
> 标签：javascript, callback

我有一个回调，我多次回调（通过 setTimeOut 递归）......只有一个条件我想捕获返回值，即回调完成时回调自身。

但是在这种情况下，当我退回某些东西时，我并没有得到我期望的东西，而且我根本不知道它去哪里了。有两个 console.log 语句标记了这些点......在下面的代码段中。一个是我发送的……另一个是我期望的。

```
 if( MC.C.movePane( pane_element, 0, 0, 0, 'begin' ) ) {
            cover_element.style.display = 'none';
            console.log('I never got it');
        }
        return o_p;
    },
    movePane: function( pane_element, start, end, index, state ) {
        if( ( state === 'begin' ) ) { // init the function
            start = parseInt( window.getComputedStyle( pane_element, null ).getPropertyValue("top"), 10 );
            end = start + 40;
            index = start;
            state = 'down';
            MC.C.movePane( pane_element, start, end, index, 'down' );
        }
        if( ( state === 'down' ) && ( index < end ) ) { // move down
            index += 1;
            pane_element.style.top = ( index ) + 'px';
            setTimeout( function( ){ MC.C.movePane( pane_element, start, end, index, state ); }, 1 );
        }
        else if( ( state === 'down' ) && index === end ) { // hold
            state = 'up';
            setTimeout( function( ){ MC.C.movePane( pane_element, start, end, index, state ); }, 2000 );
        }
        else if( ( state === 'up' ) && ( index > start ) ) { // move up
            index -= 1;
            pane_element.style.top = ( index ) + 'px';
            setTimeout( function( ){ MC.C.movePane( pane_element, start, end, index, state ); }, 1 );
        }
        else if( ( state === 'up' ) && ( index === start ) ) { // all done, return
            console.log('I just returned true');
            return true;
            // document.getElementById( 'po_but_cov' ).style.display='none';
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:45:04.167

如果您询问如何恢复`movePane()`从 调用它时的返回值，`setTimeout()`则不能。`setTimeout()`没有为捕获和返回值做任何规定。但这没关系，因为当回调执行时，调用的代码`setTimeout()`不再运行——是吗？

如果您希望回调传达它已完成某项操作，那么 - 抓住你的帽子 - 你将不得不给你的回调一个它自己的回调。当回调虽然在做它的时间延迟的事情时，它可以调用那个回调，如果它得到返回值，它会做任何原始代码会做的事情。

对不起，如果这让你头疼，但这就是它的工作原理。

它可能看起来像（对不起，如果括号和大括号不完全匹配）

```
 MC.C.movePane( pane_element, 0, 0, 0, 'begin', function() {
        cover_element.style.display = 'none';
    });
    return o_p;

    // ...
    movePane: function( pane_element, start, end, index, state, myCallback ) {
        // ...
        else if( ( state === 'up' ) && ( index === start ) ) { // all done, return
            console.log('I just returned true');
            // return true;
            myCallback(); 
```

# javascript - 如何在 div 标签内显示 jquery 验证消息

> ID：11802257
> 
> 赞同：0
> 
> 时间：2012-08-03T19:42:11.343
> 
> 标签：javascript, jquery, html, css

我正在使用 jQuery Validate 方法成功验证必填字段。一切正常，但我想在 ia div 标签内显示错误消息，该选项可让错误在显示 10 或 20 秒后消失，基本上就像自动隐藏一样。

这是我创建的标记

```
 <script type="text/javascript">
$(document).ready(function(){
    $("#cForm").validate({
    rules: {
        PaymentMethod: {
            required: true
        }
        ,ShippingMethod: {
            required: true
        }
    },

    messages: {

        PaymentMethod: {
            required:" Select a payment method!"
        }
        ,ShippingMethod: " Select a shipping method!."
    }   

    });

});
</script>

<sytle="text/css">
 #ship-msg, #pay-msg {display:none; background:url("/image/req.gi") no-repeat left center transparent;}
 .msg { color:#000;}

</style>

<form id="cForm" method="post" action="/pay.html">
<div class="ship-options">
<label for="ShippingMethod">Shipping Method</label>
<select id="ShippingMethod" name="ShippingMethod" >
  <option value="">Choose Shipping Method</option>
  <option value"UPS-GROUND">UPS GROUND</option>
  <option value"UPS-1DAY">UPS 1DAY</option>
  <option value"UPS-2DAY">UPS 2DAY</option>
    </select>
    <div id="ship-msg><div class="msg"> // display the error messgae here </div>
</div>

<div class="pay-options">
<label for="PaymentMethod">Payment Method</label>    
<select id="PaymentMethod" name="PaymentMethod" >
  <option value="">Choose Paymenet Method</option>
  <option value"VISA">VISA</option>
  <option value"MASTERCARD">MASTERCARD</option>
  <option value"AMEX">AMERICAN EXPRESS</option>
</select>
 <div id="pay-msg><div class="msg"> // display the error messgae here </div>
</div>
<input type="submit" value="Continue" id=" />

</form>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.8/jquery.validate.min.js"></script> 
```

因此，当某些人单击继续按钮并且如果未选择方法时显示它们，则会显示相应的 div 及其消息

我知道我错过了什么

感谢并感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:05:20.177

1.  You misspelled the opening `<style>` tag. Therefore `#ship-msg`, `#pay-msg` won't be hidden:

    `<sytle="text/css"> ... </style>`

2.  Your script must be placed **after** jQuery has been loaded. That is at the end of your document. If you place it before the jQuery script is loaded, the browser won't recognize function calls like `$(document).ready()` and `$("#cForm").validate()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:08:47.217

I am assuming that the obvious mistakes (jQuery reference BEFORE the code and style tag mispelling) were simple oversights on your part and that you want to know how to make the appearing/disappearing happen. If you want to make the error appear and then go away after some time, when the validation fails call this function:

```
function ToggleErrorMessage(messageDiv) {
    messageDiv.toggle().delay(20000).toggle();
} 
```

Which will turn the div on, wait 20 secs, and then turn it off. "messageDiv" is the div which you want to apply this to.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T20:20:52.107

这不是严格使用您的验证，但这应该可以帮助您

[例子](http://jsfiddle.net/jjay225/qZkpH/21/)

# html - 使用 html5 制作动画

> ID：11802267
> 
> 赞同：-2
> 
> 时间：2012-08-03T19:43:06.443
> 
> 标签：html

我看到了这个很棒的[动态图像网站](http://9elements.com/io/projects/html5/canvas/)，它让我对实际开发感到好奇。我的计划是在浏览器的左右边缘创建一个友好的更动态的动画，让它更有味道或生命。我是一个完整的初学者，但我愿意学习。那么我需要什么来创建像链接上所见的动画，并且有什么好的教程可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:50:04.503

您可以为 HTML5 画布编写原始代码，或者使用 Adob​​e Edge 等第三方应用程序。

[http://labs.adobe.com/technologies/edge/](http://labs.adobe.com/technologies/edge/)

还可以查看 CSS3 动画

[http://webdesignerwall.com/trends/47-amazing-css3-animation-demos](http://webdesignerwall.com/trends/47-amazing-css3-animation-demos)

或者像 Alice.js 这样的 Javascript 动画库

[http://blackberry.github.com/Alice/](http://blackberry.github.com/Alice/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:44:35.563

你想学习的是 HTML5 with Canvas。

本质上，W3 正在尝试用此功能替换闪存。

# javascript - 你能用 onblur 事件调用外部 Javascript

> ID：11802273
> 
> 赞同：0
> 
> 时间：2012-08-03T19:43:21.763
> 
> 标签：javascript, dom-events, onchange, onblur

我编写了一个 JavaScript 脚本并将其保存为外部文件，现在想在完成时调用它来验证表单条目（而不是整个表单）。我正在考虑使用`onchange`and `onblur`，但找不到任何方法来做到这一点。我只是瞎了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:47:19.000

您还必须在 HTML 页面中包含外部脚本。假设您的外部脚本文件已命名`my_external.js`并包含一个名为 的函数`my_external_function`，则以下代码示例应该可以工作：

```
<html>
<head>
    <script src="my_external.js"></script>
</head>

<body>
    <input type="text" onblur="my_external_function()" />
</body>
</html> 
```

# ruby-on-rails - 递归嵌入和 Mongoid - 父级不保存

> ID：11802278
> 
> 赞同：2
> 
> 时间：2012-08-03T19:44:04.430
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

我对这个问题慢慢变得疯狂。我很确定这是一件微不足道的事情，我误解了一些事情，因为我刚刚开始使用 Mongoid（和 Ruby on Rails）。

我的模型如下：

```
class Drawing
include Mongoid::Document

    field :image_uid
    image_accessor :image
    field :date_created, type: Time, default: Time.now

    recursively_embeds_many

    embedded_in :user
    embedded_in :painting_template, class_name: 'Painting', inverse_of: :template_drawing
    embedded_in :painting_result, class_name: 'Painting', inverse_of: :result_drawing 
```

用户模型“embeds_many”图纸，绘画模型“embeds_one”template_drawing 和result_drawing。

在过去的几个小时里，我一直在尝试做的是创建一个新的绘图，将其附加到用户并定义其父级（如果有的话）。我一直在控制台中玩耍，但基本上我所做的与此类似：

```
User.first.drawings.last.parent_drawing = User.first.drawings.first.dup 
```

虽然控制台看起来很开心并返回了 User.first.drawings.first 的内容，但 User.first.drawings.last.parent_drawing 返回 nil...

我试图将它们分配给变量并分配变量等。但没有任何改变。我曾尝试创建新图纸并将其中一个作为另一个的父级，但也未成功。

我得出的结论是，分配父母是不可能的。所以我尝试反过来添加一个孩子，但我仍然没有得到一个有父母或孩子的对象。

这里还有一些失败的代码（从我的 Rails 代码中提取和缩短）：

```
drawing = Drawing.new({:user => @user})
drawing.parent_drawing = @user.drawings.find(parent_id).dup
drawing.save 
```

有趣的是，绘图本身已保存并列在 user.drawings 中，但没有父级。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:45:38.297

接受评论中的建议，我试图从头开始重新思考我的模型。我重新阅读了有关多态关系的文档，并使绘图具有多态性。仍然一个绘图应该能够嵌入到另一个绘图中，并且递归嵌入再无处可寻。

With the doc/code of Mongoid about cyclic relationships (http://rdoc.info/github/mongoid/mongoid/Mongoid/Relations/Cyclic/ClassMethods) I suspected it was because the embeddings "recursively_embeds_many" is doing were wrong because they didn't include the fact that Drawing was polymorphic!

Given that the embedded_in statement is made by the fact that it is polymorphic, adding

```
embeds_one :base_drawing, class_name: "Drawing", as: :drawable, cyclic: true 
```

seemed to have the effect I was looking for. It won't include "children" as "recursively_embeds_many" would have done, but it's not necessary in my case.

I hope this helps the next person having trouble with recursively embedded polymorphic relationships.

# c# - configSections 的 web.config inheritInChildApplications="false"？

> ID：11802284
> 
> 赞同：3
> 
> 时间：2012-08-03T19:44:23.533
> 
> 标签：c#, iis, inheritance, web-config, location

我在 IIS 7 上有一个 .NET 4.0 应用程序，其中包含一个嵌套的 .NET 2.0 应用程序。问题是嵌套的 .NET 2.0 应用程序在`<configSections>`web.config 中有 system.web.extensions sectionGroup，而 .NET 4.0 父应用程序 machine.config 也包含这些 sectionGroups。这会导致状态码 500 服务器错误。

从子应用程序 web.config 中注释掉 system.web.extensions sectionGroup 是可行的，但不是我们设置的选项。

如何防止在子应用程序中继承父 web.config？我已经看到它`<location path="." inheritInChildApplications="false">`在以前的 .NET 版本中使用过，但是我该如何包装 location 元素呢？

Intellisense 向我显示“不允许使用 inheritInChildApplications 属性”，而且我把它放在哪里似乎并不重要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T19:49:00.947

我们将所有不想继承的设置包装在一个空的位置元素中：

```
<location inheritInChildApplications="false"> 
```

Intellisense 抱怨它，但它似乎在生产模式下运行得很好。

[本文](http://runtingsproper.blogspot.com/2010/04/solved-iis7-validateintegratedmodeconfi.html)中有一些很好的附加信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T22:43:59.073

这种情况下的解决方案是修改我的测试环境以避免`configSection`冲突。这种冲突似乎没有真正的解决方案。请参阅此处：[如何在 Web Config 中停止 configSections 的继承](https://stackoverflow.com/questions/1572326/)

# ajax - django：使用 json 对象测试基于 POST 的视图

> ID：11802299
> 
> 赞同：25
> 
> 时间：2012-08-03T19:45:09.580
> 
> 标签：ajax, django, json, unit-testing

我有一个 django 应用程序，它有几个通过 POST 请求接受 json 对象的视图。json 对象是中等复杂的，有几层嵌套，所以我使用 json 库来解析 raw_post_data，如下所示：

```
def handle_ajax_call(request):
    post_json = json.loads(request.raw_post_data)

    ... (do stuff with json query) 
```

接下来，我想为这些视图编写测试。不幸的是，我不知道如何将 json 对象传递给客户端。这是我的代码的最简单版本：

```
def test_ajax_call(self):
    c = Client()
    call_command('loadfixtures', 'temp-fixtures-1') #Custom command to populate the DB

    J = {
      some_info : {
        attr1 : "AAAA",
        attr2 : "BBBB",
        list_attr : [ "x", "y", "z" ]
      },
      more_info : { ... },
      info_list : [ 1, 22, 23, 24, 5, 26, 7 ]
    }

    J_string = json.dumps(J)
    response = c.post('/ajax/call/', data=J_string ) 
```

当我运行测试时，它失败了：

```
AttributeError: 'str' object has no attribute 'items' 
```

如何在 Client.post 方法中传递 JSON 对象？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-03T20:13:51.547

[该文档](https://docs.djangoproject.com/en/1.4/topics/testing/#django.test.client.Client.post)似乎暗示，如果您将`content_type`参数传递给`client.post`，它将将该`data`值视为文档并直接 POST 。所以试试这个：

```
response = c.post('/ajax/call/', content_type='application/json', data=J_string) 
```

# .net - 为.Net开发的windows服务创建.exe文件的过程

> ID：11802303
> 
> 赞同：-2
> 
> 时间：2012-08-03T19:45:14.930
> 
> 标签：.net

我创建 windowservice 应用程序以根据他们的输入向客户提交潜在客户，但我无法在 Windows7 操作系统上安装此应用程序以进行测试。应用程序是使用 VS2008 开发的，我使用转换工具将其迁移到 VS2010。

注意：它具有 ClassLibrary，其中实现了业务逻辑。

任何人都可以帮助我创建安装文件以在 Windows7 操作系统上安装此服务。

问候

哈里什·卡卡尼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:48:08.467

您可以使用 installutil 安装该服务，至少可以使其正常工作。

[http://msdn.microsoft.com/en-us/library/50614e95(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/50614e95(v=vs.71).aspx)

为您的服务的 .exe 和任何依赖的 DLL 创建一个文件夹，然后在 .exe 上运行 installutil。

请记住，默认情况下服务以相当有限的权限运行。如果服务正在访问文件等资源，请确保它具有足够的权限来执行此操作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-06T20:16:02.303

我们不需要创建任何安装项目来安装 Windows 服务。

只需按照以下流程。

1）一旦开发完成，构建您的应用程序。然后将在您的应用程序的 bin/Debug 文件夹中创建 EXE 文件。

2) 安装 Windows 服务

1\. 在开始菜单或开始页面上，打开开发人员命令提示符的快捷菜单，然后选择以管理员身份运行。

2\. 导航到包含项目输出的文件夹。例如，在我的文档文件夹下，导航到 Visual Studio 11\Projects\MyNewService\bin\Debug。

3\. 输入以下命令：

installutil.exe MyNewService.exe

4.如果服务安装成功，installutil.exe会报成功。

# c - 添加到排序链表

> ID：11802307
> 
> 赞同：-1
> 
> 时间：2012-08-03T19:45:31.693
> 
> 标签：c

我有一个使用结构的链表，现在用户必须将等级从最低到最高进行排序或从最高到最低。我无法编写第三个条件，例如用户输入 ACB，程序会崩溃，所以我不知道问题出在哪里。

我知道我的代码一团糟：D，我也很抱歉，请原谅我的英语不好。

这里是结构：

```
typedef struct student
{
char sname[32];
char sid[9];
struct student *snext;
struct course *current;
struct course *head;
struct course *tail;
} STUDENT;

typedef struct course
{
char cname[15];
char grade;
struct course *next;
} COURSE; 
```

这是功能：

```
void add_course(STUDENT *current){

int hx,cy,tmpz;
COURSE *tmp = current->current;
if(current->head!=NULL){
hx = current->head->grade;
cy = current->current->grade;}

    //here the first element will be added
    if(current->head==NULL){
    current->head = current->current;
    current->tail = current->current;
    current->tail->next = NULL;
    }
    else{
       //here it compares the head grade and the element i want to add
       //so if the ascii number of head's grade is greater than the current's grade
       //then the current will be the head and the previous head will be after the
       //current head 
        if(hx>cy){
        current->current->next = current->head;
        current->head = current->current;
        current->current = current->head;
        while(current->current->next!=NULL)
        current->current = current->current->next;
        current->tail->next = current->current;
        current->tail = current->current;
        current->tail->next = NULL;
        }

        else{
           //what i am trying to do here is e.g. if i have three elements already and 
           //their grades are ( first element: A  second element: C  third element:  D) 
           //and i want to add a new element and its grade is B
           //so the problem here it doesnt sort them it only crash in this condition
           //i dont know what i am really doing here lol
           //third condition
            current->current = current->head;
            hx = current->current->grade;
            tmpz = tmp->grade;
            while(current->current->next!= NULL && tmpz>hx){
            current->current = current->current->next;
            hx = current->current->next->grade;
            }
        current->current->next = tmp->next;
        current->current->next = tmp;
        current->current = tmp;

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:20:15.323

在原始代码中，这个片段是可疑的：

```
if(current->head!=NULL){
hx = current->head->grade;
cy = current->current->grade;}
else{
}
    if(current->head==NULL){ 
```

缩进表明它自己的行上的右大括号是一个闯入者；您不需要一个空`else`块，并且缩进表明`if (current->head == NULL)`代码应该是主体的一部分，`else`而不是一组新的条件。如果删除标识为闯入者的行，则可能需要在函数末尾添加一个额外的右大括号。

如果你干净地缩进你的代码，那么很容易看到块是如何排列的。当你把缩进弄得一团糟时，很难发现这样的错误。缩进用于使代码易于阅读和理解，误导性缩进意味着代码难以阅读，难以理解和正确。

* * *

在修改后的代码中，去掉了原始注释，重新格式化和缩进以便于阅读，并为讨论点添加了新的注释，我们有：

```
void add_course(STUDENT *current)
{
    int hx,cy,tmpz;                        // P1
    COURSE *tmp = current->current;        // P2

    if (current->head != NULL)             // P3
    {
        hx = current->head->grade;
        cy = current->current->grade;
    }

    if (current->head == NULL)
    {
        current->head = current->current;  // P4
        current->tail = current->current;
        current->tail->next = NULL;        // P5
    }
    else
    {
        if (hx > cy)                       // P6
        {
            current->current->next = current->head;
            current->head = current->current;
            current->current = current->head;
            while (current->current->next != NULL)
                current->current = current->current->next;
            current->tail->next = current->current;
            current->tail = current->current;
            current->tail->next = NULL;
        }
        else
        {                                  // P7
            current->current = current->head;
            hx = current->current->grade;
            tmpz = tmp->grade;
            while (current->current->next != NULL && tmpz > hx)
            {
                current->current = current->current->next;
                hx = current->current->next->grade;
            }
            current->current->next = tmp->next;
            current->current->next = tmp;
            current->current = tmp;
        }
    }
} 
```

用于块的开放式大括号的位置是有争议的。有些人，包括 K&R，喜欢与`if`, `else`, `while`, `for`,`switch`等在同一行的左大括号。我非常喜欢[Allman](http://en.wikipedia.org/wiki/Indent_style#Allman_style)缩进风格，但在必要时使用本地约定。当我大量重新格式化某些东西时，它会进入 Allman 风格——但你不应该将其解释为我的反常性以外的任何东西。更改不是对您的代码的任何批评的一部分。

您没有向我们展示没有课程记录的学生记录是如何表示的。最合理的表示是`head`,`tail`和`current`都初始化为 NULL。

您的函数需要学生记录，但（令人惊讶的是）不是要添加的课程，尽管名称`add_course()`. 鉴于使用`current->current`at P4，我们必须假设您`current->current`在调用该函数之前通过设置为新课程部分添加了课程，并且您需要该函数来确定新课程在列表中的`head`位置结束于`tail`. 这在功能上不是很有凝聚力——这是一个糟糕的设计。理想情况下，新的课程记录应该作为单独的参数传递给函数，并且该`next`字段应该为 NULL（并且应该初始化课程名称，并且必须初始化成绩）：

```
void add_course(STUDENT *student, COURSE *new_course); 
```

我们可以观察到 P1 和 P2 处的变量直到 P6 或 P7 才使用，因此 P1、P2 和 P3 处的代码应该移到 P6 之前或更晚。我将坚持使用 C89 代码，而不是使用 C99（以及 C11 和 C++）支持的“在任何地方定义”规则。

P4 到 P5 的段落应该处理一个空列表。它可以写成使用`tmp`（在这种情况下，P2 的定义应该保留在原处）。写起来可能更清楚：

```
 COURSE *new_course = current->current;

 if (current->head == NULL)
 {
     current->head = new_course;
     current->tail = new_course;
     new_course->next = NULL;
 } 
```

如果在调用函数之前正确初始化课程，则最终分配应该是不必要的。

假设已经有一门课程与学生相关联，并且通过调用代码将新课程的值更改`current->current`为新课程并调用此函数来添加新课程。有几种可能的情况需要考虑：

1.  新课程是（该）现有课程的副本（应该被拒绝 - 但该函数不返回值，因此无法指示该课程被拒绝）。
2.  新课程成绩低于现有课程成绩。
3.  新课程成绩高于现有课程成绩。
4.  新课程成绩与现有课程成绩相同。

问题没有具体说明第一种和最后一种情况应该怎么做。当出现第二种情况时，应在现有课程之前插入新课程；当第三个出现时，应在现有课程之后插入新课程。为明确起见，如果新成绩相同，则应按字母顺序列出课程。处理重复项涉及在整个列表中搜索匹配项；它可能应该被封装成一个函数：

```
COURSE *find_course(STUDENT *student, COURSE *course); 
```

该函数获取一个学生，从`head`到搜索列表`tail`，将课程名称与列表中的课程进行比较。如果有，则返回列表中匹配的元素；此处的代码只要求函数返回 NULL 表示未找到该名称。

```
COURSE *find_course(STUDENT *student, COURSE *course)
{
    COURSE *next_student = student->head;
    while (next_student != NULL && strcmp(next_student->cname, course->cname) != 0)
        next_student = next_student->next; 
    return next_student;
} 
```

将此函数接口和实现更改为：

```
COURSE *find_course(COURSE *course, const char *cname)
{
    while (course != NULL)
    {
        if (strcmp(course->cname, cname) == 0)
            return(course);
        course = course->next;
    }
    return(course);
} 
```

这可用于搜索任何正确构建的课程列表，例如有效课程列表（因此您可以拒绝无效课程）。

我们还应该回顾当有多个现有课程时应该发生什么，这样我们就可以避免重复代码。重复的课程检查是相同的，仍然应该排在第一位。由于我们可以通过归纳安全地假设空列表是有序的，而单元素列表是有序的，我们可以决定`add_course()`始终确保课程列表是有序的。

但是，我将把它留给你处理。

我们将需要一个课程比较功能。我们可以使用与 相同的约定`strcmp()`，如果第一个参数应该在第二个之前返回一个负数，如果第二个应该在第一个之前返回一个正数；如果两个课程相同，则（名义上）为零：

```
int cmp_course(const COURSE *c1, const COURSE *c2)
{
    if (c1->grade < c2->grade)
        return -1;
    else if (c1->grade > c2->grade)
        return +1;
    else
        return(strcmp(c1->cname, c2->cname));
} 
```

### 继续

*[...长时间的停顿...24小时或更长时间...]*

这是您的代码，经过注释，包装到工作，编译，运行（C99）程序中。除了轻微的重新格式化和添加断言之外，我根本没有更改代码`add_course()`。

```
#include <assert.h>
#include <inttypes.h>
#include <stdio.h>

typedef struct student
{
    char sname[32];
    char sid[9];
    struct student *snext;
    struct course *current;
    struct course *head;
    struct course *tail;
} STUDENT;

typedef struct course
{
    char cname[15];
    char grade;
    struct course *next;
} COURSE;

extern void add_course(STUDENT *current);

void add_course(STUDENT *current)
{
    int hx,cy,tmpz;
    COURSE *tmp = current->current;
    assert(tmp != 0);
    if (current->head != NULL)
    {
        hx = current->head->grade;
        cy = current->current->grade;
    }

    if (current->head == NULL)
    {
        current->head = current->current;
        current->tail = current->current;
        current->tail->next = NULL;
    }
    else
    {
        if (hx > cy)
        {
            current->current->next = current->head;
            current->head = current->current;
            current->current = current->head;
            while (current->current->next != NULL)
                current->current = current->current->next;
            current->tail->next = current->current;
            current->tail = current->current;
            current->tail->next = NULL;
        }
        else
        {
            current->current = current->head;
            hx = current->current->grade;
            tmpz = tmp->grade;
            while (current->current->next != NULL && tmpz>hx)
            {
                current->current = current->current->next;
                hx = current->current->next->grade;
            }
            current->current->next = tmp->next;
            current->current->next = tmp;
            current->current = tmp;
        }
    }
}

static void dump_student(FILE *fp, const char *tag, const STUDENT *student)
{
    fprintf(fp, "Student: %s\n", tag);
    fprintf(fp, "Name: %s; ID: %s\n", student->sname, student->sid);
    fprintf(fp, "Next:    0x%" PRIXPTR "\n", (uintptr_t)student->snext);
    fprintf(fp, "Current: 0x%" PRIXPTR "; ", (uintptr_t)student->current);
    fprintf(fp, "Head: 0x%" PRIXPTR "; ", (uintptr_t)student->head);
    fprintf(fp, "Tail: 0x%" PRIXPTR "\n", (uintptr_t)student->tail);
    COURSE *cp = student->head;
    while (cp != 0)
    {
        fprintf(fp, "Course: %-14s (%c) (0x%.16" PRIXPTR ")\n",
                cp->cname, cp->grade, (uintptr_t)cp->next);
        cp = cp->next;
    }
}

int main(void)
{
    STUDENT s1 = { "Yours Truly", "me", 0, 0, 0, 0 };
    COURSE  c[] =
    {
        { "Math",    'B', 0 },
        { "English", 'A', 0 },
        { "Science", 'D', 0 },
        { "History", 'C', 0 },
        { "French",  'C', 0 },
    };

    dump_student(stdout, "Before", &s1);

    for (int i = 0; i < 5; i++)
    {
        char buffer[8];
        sprintf(buffer, "After%d", i+1);
        s1.current = &c[i];
        add_course(&s1);
        dump_student(stdout, buffer, &s1);
    }
    return(0);
} 
```

注意`dump_student()`功能；我发现具有这种接口的函数非常有用，并且经常将它们保留在代码中以供以后调试。该`FILE *`参数意味着可以将输出发送到标准错误（或日志文件）和标记以识别正在运行的调用的发生情况。如果需要，您可以在界面中添加文件、行、函数名；我通常不会那样做。

只有几个地方的代码是 C99；中的`for`循环`main()`和课程指针定义`dump_student()`；如果您的 C 编译器不支持 C99 语法，您可以移动变量定义。

这是 Mac OS X 10.7.4 上 64 位编译的示例输出。

```
Student: Before
Name: Yours Truly; ID: me
Next:    0x0
Current: 0x0; Head: 0x0; Tail: 0x0
Student: After1
Name: Yours Truly; ID: me
Next:    0x0
Current: 0x7FFF643D84E0; Head: 0x7FFF643D84E0; Tail: 0x7FFF643D84E0
Course: Math           (B) (0x0000000000000000)
Student: After2
Name: Yours Truly; ID: me
Next:    0x0
Current: 0x7FFF643D84E0; Head: 0x7FFF643D84F8; Tail: 0x7FFF643D84E0
Course: English        (A) (0x00007FFF643D84E0)
Course: Math           (B) (0x0000000000000000)
Student: After3
Name: Yours Truly; ID: me
Next:    0x0
Current: 0x7FFF643D8510; Head: 0x7FFF643D84F8; Tail: 0x7FFF643D84E0
Course: English        (A) (0x00007FFF643D84E0)
Course: Math           (B) (0x00007FFF643D8510)
Course: Science        (D) (0x0000000000000000)
Student: After4
Name: Yours Truly; ID: me
Next:    0x0
Current: 0x7FFF643D8528; Head: 0x7FFF643D84F8; Tail: 0x7FFF643D84E0
Course: English        (A) (0x00007FFF643D84E0)
Course: Math           (B) (0x00007FFF643D8528)
Course: History        (C) (0x0000000000000000)
Student: After5
Name: Yours Truly; ID: me
Next:    0x0
Current: 0x7FFF643D8540; Head: 0x7FFF643D84F8; Tail: 0x7FFF643D84E0
Course: English        (A) (0x00007FFF643D84E0)
Course: Math           (B) (0x00007FFF643D8540)
Course: French         (C) (0x0000000000000000) 
```

请注意，前几次插入很好，但之后出现问题。我跑了下来`valgrind`，这给了代码一个干净的健康状况（尽管系统库之外没有动态内存分配）。

我建议您追查为什么在第三次插入后列表没有正确扩展。

# php - MAMP xdebug URL 不使用 Netbeans '构造' localhost:8888

> ID：11802309
> 
> 赞同：0
> 
> 时间：2012-08-03T19:45:34.790
> 
> 标签：php, debugging, mamp, netbeans-7

我正在运行的内容：

*   Mac OSX 10.6.8
*   MAMP 2.0.5
*   网豆 7.0.1

中的当前设置`php.ini`

```
[xdebug]

xdebug.default_enable=1
xdebug.remote_enable=on
xdebug.remote_handler=dbgp
xdebug.remote_host=localhost
xdebug.remote_port=9000
xdebug.remote_autostart=1 
```

看起来我在`php.ini`文件中的 xdebug 设置没有问题，因为我的网页在典型的橙色表格中显示了 php 错误和通知。

`http://localhost/sitename/XDEBUGSESSIONblabla`但是当我单击 Netbeans 中的调试按钮时，它会生成一个以而不是开头的 URL`http://localhost:8888/sitename/XDEBUGSESSIONblabla`

在 php.ini 文件中，我尝试了设置
`xdebug.remote_host=localhost`
以及
`xdebug.remote_host=localhost:8888`

我注释掉了`php.ini`文件中的所有 zend 变量，但没有注释掉 [xdebug] 下面的 zend_extension，即：`zend_extension="/Applications/MAMP/bin/php/php5.3.6/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so"`

还有`[xcache-common]`- 部分略高于文件中的`[xdebug]`部分，`php.ini`它也有一条关于我未注释的 zend_optimizer 的规则，因为它不属于`[Zend]`php.ini 文件的部分。

在旁注中：我实际上在我的 php.ini 文件中找不到任何`[Zend]`部分，但我在我尝试遵循的教程中看到了它：

[这里](http://netbeans.org/kb/docs/php/configure-php-environment-mac-os.html#installEnableXdebug) 和 [这里](http://technosophos.com/content/debugging-your-php-code-xdebug-mamp-textmate-and-macgdbp-support)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:48:28.307

第二次将 Netbeans 项目 URL 设置放在`:8888`后面就可以了。`localhost`所以这意味着在创建项目后，右键单击项目文件夹，然后在“运行配置”下的对话框中，顶部的第三个字段显示“项目 URL”。这是您可以在项目创建后更改它的地方。

# objective-c - glColor4f 使用 GLKTextureLoader 停止加载纹理

> ID：11802310
> 
> 赞同：1
> 
> 时间：2012-08-03T19:45:36.193
> 
> 标签：objective-c, ios5, opengl-es-2.0, glkit, glktextureloader

我目前在新 iPad 上的 GLKView 下使用 OpenGL ES 2.0。似乎，每当我调用 glColor4f 时，除了导致 GL_INVALID_OPERATION 错误之外，什么都没有发生（即它不会为我想要的多边形着色）。然后，一旦我尝试加载纹理，就会收到以下错误消息： `Error loading file: The operation couldn't be completed. (GLKTextureLoaderErrorDomain error 8.)`

但在调用 glColor4f 之前，一切正常。下面是我的 drawInRect 代码：

```
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect
{
    glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT);

    // Render the object with GLKit
    self.effect.texture2d0.enabled        = NO;
    self.effect.transform.modelviewMatrix = _defaultModelMatrix;

    [self.effect prepareToDraw];

    // Render the grid
    glBindBuffer(GL_ARRAY_BUFFER, _gridVertexBuffer);
    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, 0, 0);

    glColor4f(1.0f, 0.0f, 0.0f, 1.0f);
    glDrawArrays(GL_TRIANGLES, 0, TRIANGLES * 6);

    glDisableVertexAttribArray(GLKVertexAttribPosition);
    glBindBuffer(GL_ARRAY_BUFFER, 0);
} 
```

如果有人可以提供帮助，我将不胜感激。不过有些事情要指出。我尝试着色的对象存储在 VBO 中，并且呈现为白色（即使我尝试将其着色为红色）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:09:52.173

glColor4f 不是 OpenGLES2.0 命令（它来自 GLES1.1）

您要做的是在着色器中声明一个名为“颜色”（或类似名称）的制服，像通常使用任何着色器制服一样设置该制服，并在写入像素之前将您的片段颜色与该制服相乘。

# java - 正则表达式没有选择第一次出现的文本

> ID：11802312
> 
> 赞同：1
> 
> 时间：2012-08-03T19:45:44.773
> 
> 标签：java, regex

我有一个正则表达式，它过滤所有 IP 地址的文本。但是，有一个问题！它获取所有不相关的文本，除了前面的文本。例如，首先，使用这个网站：

[http://myregexp.com/signedJar.html](http://myregexp.com/signedJar.html)

制作正则表达式：

```
(?<=[0-9]{1,4}+\.[0-9]{1,4}+\.[0-9]{1,4}+\.[0-9]{1,4}+)([[^\n][\n]](?![0-9]{1,3}+\.[0-9]{1,3}+\.[0-9]{1,3}+\.[0-9]{1,3}+))*[[^\n]\n] 
```

并输入：

这个文本不会被选择 1.1.1.1 但是，这个 t 4.55.62.1 ext 的其余 2.2.22.345 将被选择 32.4.3.1 就好了

您应该看到如下内容： ![http://i.imgur.com/LzZWl.png](../Images/57d7928f5ba335e841523de9f74ed9a7.png)

所以我的问题是，使“此文本不会被选中”成为选中状态的最佳方法是什么？（或第一个 IP 之前的任何文本）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T02:02:06.407

我怀疑你让这项工作变得比它需要的更难。如果你只是想抓取所有的IP地址，为什么不直接匹配它们呢？例如：

```
List<String> matchList = new ArrayList<String>();

Pattern p = Pattern.compile("\\b(?:[0-9]{1,3}\\.){3}[0-9]{1,3}\\b");
Matcher m = p.matcher(s);
while (m.find()) {
    matchList.add(m.group());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T22:44:42.090

我刚刚有个主意！一个非常简单的解决方案是将 1.1.1.1 附加到字符串的开头，然后忽略我的正则表达式拆分返回的第一个 IP（godspeedlee 建议的拆分-如果您想添加答案并为此投票，我会接受)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T21:07:52.830

这个：？<=

表示非捕获组，尝试删除它并查看选择了什么。

# python - 带有独立进程的nose2 vs py.test

> ID：11802316
> 
> 赞同：7
> 
> 时间：2012-08-03T19:46:33.400
> 
> 标签：python, nose, pytest

我们一直在使用nosetest 来运行和收集我们的单元测试（它们都写成我们喜欢的python 单元测试）。我们喜欢鼻子的地方：

*   使用标准的 python 单元测试（我们喜欢这种强加的结构）。
*   支持在 xml 中报告覆盖率和测试输出（用于 jenkins）。

我们缺少的是一种在隔离进程中运行测试同时保持良好错误报告的好方法（我们正在通过 python 测试 C++ 库，因此段错误不应该是灾难性的）。鼻管似乎不再维护，我们遇到了一些问题。

我们正试图弄清楚我们是否应该 - 修复/使用 nosepipe - 切换到 nose2 并编写 nosepipe2。- 使用 pytest 或其他一些测试框架。

我们更愿意使用具有良好社区的方法。似乎我们的问题（需要良好隔离的 C++ 插件）可能是一个常见问题，但谷歌搜索我还没有找到维护的解决方案。来自更有经验的负责人的建议表示赞赏。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-04T08:08:10.053

pytest 有[xdist 插件](http://pypi.python.org/pypi/pytest-xdist)，它提供了`--boxed`在受控子进程中运行每个测试的选项。这是一个基本示例：

```
# content of test_module.py

import pytest
import os
import time

# run test function 50 times with different argument
@pytest.mark.parametrize("arg", range(50))
def test_func(arg):
    time.sleep(0.05) # each tests takes a while
    if arg % 19 == 0: 
        os.kill(os.getpid(), 15) 
```

如果你运行这个::

```
$ py.test --boxed
=========================== test session starts ============================
platform linux2 -- Python 2.7.3 -- pytest-2.3.0.dev8
plugins: xdist, bugzilla, cache, oejskit, cli, pep8, cov
collecting ... collected 50 items

test_module.py f..................f..................f...........

================================= FAILURES =================================
_______________________________ test_func[0] _______________________________
/home/hpk/tmp/doc-exec-420/test_module.py:6: running the test CRASHED with signal 15
______________________________ test_func[19] _______________________________
/home/hpk/tmp/doc-exec-420/test_module.py:6: running the test CRASHED with signal 15
______________________________ test_func[38] _______________________________
/home/hpk/tmp/doc-exec-420/test_module.py:6: running the test CRASHED with signal 15
=================== 3 failed, 47 passed in 3.41 seconds ==================== 
```

您会看到有几个测试报告为崩溃，由小写字母`f`和相应的故障摘要指示。您还可以使用 xdist 提供的并行化功能来加快测试速度：

```
$ py.test --boxed -n3
=========================== test session starts ============================
platform linux2 -- Python 2.7.3 -- pytest-2.3.0.dev8
plugins: xdist, bugzilla, cache, oejskit, cli, pep8, cov
gw0 I / gw1 I / gw2 I
gw0 [50] / gw1 [50] / gw2 [50]

scheduling tests via LoadScheduling
..f...............f..................f............
================================= FAILURES =================================
_______________________________ test_func[0] _______________________________
[gw0] linux2 -- Python 2.7.3 /home/hpk/venv/1/bin/python
/home/hpk/tmp/doc-exec-420/test_module.py:6: running the test CRASHED with signal 15
______________________________ test_func[19] _______________________________
[gw2] linux2 -- Python 2.7.3 /home/hpk/venv/1/bin/python
/home/hpk/tmp/doc-exec-420/test_module.py:6: running the test CRASHED with signal 15
______________________________ test_func[38] _______________________________
[gw2] linux2 -- Python 2.7.3 /home/hpk/venv/1/bin/python
/home/hpk/tmp/doc-exec-420/test_module.py:6: running the test CRASHED with signal 15
=================== 3 failed, 47 passed in 2.03 seconds ==================== 
```

原则上，仅分发到并行子进程通常就足够了，并且避免了为每个测试启动一个装箱进程的开销。这目前仅在您的崩溃测试少于`-n`进程数时才有效，因为没有重新启动垂死的测试进程。无需太多努力即可消除此限制。同时，您将不得不使用安全装箱选项。

# java - 如何将列表操作为字符串并在单独的行中打印

> ID：11802321
> 
> 赞同：0
> 
> 时间：2012-08-03T19:46:57.797
> 
> 标签：java, list, arraylist

我正在尝试使用以下代码导出 4 列。最后一列组织是一个列表。

```
 String appname = "abc";
    String path = "//home/exportfile//";
    String filename = path + "ApplicationExport-" + appname + ".txt";
    String ret = "false";

    QueryOptions ops = new QueryOptions();
    Filter[] filters = new Filter[1];
    filters[0] = Filter.eq("application.name", appname);
    ops.add(filters);

    List props = new ArrayList();
    props.add("identity.name");

    // Do search
    Iterator it = context.search(Link.class, ops, props);

    // Build file and export header row
    BufferedWriter out = new BufferedWriter(new FileWriter(filename));
    out.write("IdentityName,UserName,WorkforceID,Organization");
    out.newLine();

    // Iterate Search Results
    if (it != null) {
        while (it.hasNext()) {

            // Get link and create object
            Object[] record = it.next();
            String identityName = (String) record[0];
            Identity user = (Identity) context.getObject(Identity.class, identityName);

            // Get Identity attributes for export
            String workforceid = (String) user.getAttribute("workforceID");

            // Get application attributes for export
            String userid = "";

            List links = user.getLinks();
            if (links != null) {
                Iterator lit = links.iterator();
                while (lit.hasNext()) {
                    Link l = lit.next();
                    String lname = l.getApplicationName();
                    if (lname.equalsIgnoreCase(appname)) {
                        userid = (String) l.getAttribute("User Name");
                        List organizations = l.getAttribute("Organization");

                        StringBuilder sb = new StringBuilder();
                        String listItemsSeparator = ",";

                        for (Object organization : organizations) {
                            sb.append(organization.toString());
                            sb.append(listItemsSeparator);
                        }

                        org = sb.toString().trim();

                    }
                }
            }

            // Output file
            out.write(identityName + "," + userid + "," + workforceid + "," + org);
            out.newLine();
            out.flush();
        }

        ret = "true";
    }

    // Close file and return
    out.close();
    return ret; 
```

上述代码的输出将是。例如：

```
IdentityName,UserName,WorkforceID,Organization

dthomas,dthomas001,12345,Finance,HR 
```

我如何以以下方式获得输出

```
IdentityName,UserName,WorkforceID,Organization

dthomas,dthomas001,12345,Finance

dthomas,dthomas001,12345,HR 
```

我需要在哪里更改代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:56:24.667

*删除*这个最里面`for`的块和相关的变量：

```
StringBuilder sb = new StringBuilder();

for (Object organization : organizations)
{
    sb.append(organization.toString());
    sb.append(listItemsSeparator);
}

org = sb.toString().trim(); 
```

*将*声明移到块`organizations` *外*`if (it != null) {`：

```
// Get application attributes for export
String userid = "";
List organizations = null;
List links = user.getLinks();

if (it != null)
{
    Iterator lit = links.iterator();
    while (lit.hasNext())
    {
        Link l = lit.next();
        String lname = l.getApplicationName();
        if (lname.equalsIgnoreCase(appname))
        {
            userid = (String) l.getAttribute("User Name");
            organizations = l.getAttribute("Organization"); 
```

然后更改此文件输出代码：

```
// Output file
out.write(identityName + "," + userid + "," + workforceid + "," + org);
out.newLine(); 
```

对此：

```
// Output file
for (Object organization : organizations)
{
    out.write(identityName + "," + userid + "," + workforceid + "," + organization.toString());
    out.newLine();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:58:37.110

*您必须为每个*组织在文件中写入一行。因此，基本上，不要将用户的所有组织与字符串生成器连接起来，并将输出语句移动到遍历组织的 for 循环中。

但是很难提供一个工作示例，因为您显示的代码尚未编译...

* * *

这应该使您更接近解决方案：

```
if (links != null) {
  Iterator lit = links.iterator();
  while (lit.hasNext()) {
    Link l = lit.next();
    String lname = l.getApplicationName();
    if (lname.equalsIgnoreCase(appname)) {
      userid = (String) l.getAttribute("User Name");
      List organizations = l.getAttribute("Organization");
      for (Object organization : organizations) {
        // Output file
        out.write(identityName + "," + userid + "," + workforceid + "," + organization);
        out.newLine();
        out.flush();
      }
    }
  }
} 
```

# codenameone - 使用代号一设计的应用程序中的屏幕黑屏

> ID：11802326
> 
> 赞同：0
> 
> 时间：2012-08-03T19:47:21.087
> 
> 标签：codenameone

我用[代号 one](http://www.codenameone.com)制作了我的应用程序。

我遇到了这个奇怪的问题：

我将手机闲置了一会儿，然后去做了一些工作。

大约 15 分钟后，当我的应用程序仍在运行时，我的屏幕变黑了。所以当我激活屏幕时，我得到的只是一个黑屏。我的应用程序无处可见。

菜单按钮也不起作用。我尝试再次打开该应用程序，但再次出现黑屏（刚刚恢复相同的状态）。所以我不得不按下主页按钮并强制停止应用程序然后启动它。

这种行为非常随意。我试图重现它，但这并不是一直发生的事情。

但是，它确实有时会突然发生。

这可能是什么原因？我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T09:03:47.477

与此相关的声音： [http ://code.google.com/p/codenameone/issues/detail?id=154&can=1&q=wake](http://code.google.com/p/codenameone/issues/detail?id=154&can=1&q=wake)

我猜你说的是安卓设备吧？

应用程序在 Android 设备上挂起时会继续运行，如果在应用程序挂起时发生某些事情，它可能会在唤醒时失败。如果你能重现这个文件的一个bug，用重现它的方式（包括代码）。

您可以将崩溃报告系统用于付费订阅者（请参阅开发人员指南）。

您还可以安装 Android SDK 并使用 DDMS 检查设备并查看失败的原因（最好使用调试版本）。

# events - 为什么我的 javascript 鼠标事件没有触发？

> ID：11802327
> 
> 赞同：1
> 
> 时间：2012-08-03T19:47:25.877
> 
> 标签：events, mouse, javascript

这是我认为很简单的代码：

```
<html>
    <head>
        <script>

            function Foobar(id) {

                self = this;

                self.id = id;
                self.canvas = document.createElement('canvas');
                self.canvas.style.border = '1px solid black';
                document.body.appendChild(self.canvas);
                self.canvas.addEventListener('mousedown', self.onMouseDown, true);

                self.onMouseDown = function(e) {
                    console.log(self.id);
                }

            }            

            var s1, s2;

            function onLoad() {
                s1 = new Foobar(1);
                s2 = new Foobar(2);
            }

        </script>
    </head>
    <body onload='onLoad()'>
    </body>
</html> 
```

为什么控制台不弹出id号？

这是一个小提琴：http: [//jsfiddle.net/VRn7v/](http://jsfiddle.net/VRn7v/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T19:52:39.683

您必须`self`在绑定事件侦听器之前分配方法

**固定的**

[http://jsfiddle.net/landau/VRn7v/3/](http://jsfiddle.net/landau/VRn7v/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T19:54:36.643

`self`是`window`对象的属性，通常是错误的变量名。此外，您的`self`变量是隐式全局变量，因为您缺少`var`关键字。最后，在声明事件处理程序之前绑定它。

```
function Foobar(id) {
    var that = this; // pick a better name, and use "var"
    that.id = id;
    that.canvas = document.createElement('canvas');
    that.canvas.style.border = '1px solid black';
    document.body.appendChild(that.canvas);

    that.onMouseDown = function(e) {
        console.log(self.id);
    }; // missing semicolon

    // bind the handler after declaring it
    that.canvas.addEventListener('mousedown', that.onMouseDown, true);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T19:51:35.720

```
self.canvas.addEventListener('mousedown', self.onMouseDown, true); 
```

在这一行中，`self.onMouseDown`is `undefined`，因为您仅在之后分配它。使其工作的可能的快速修复：

*   将函数创建/分配移到用法之上
*   将`onMouseDown`函数移动到原型（不好，`self`范围内没有本地）
*   不使用`self.onMouseDown`, 但是`self.canvas.onmousedown`（使用传统事件注册跨浏览器安全）

此外，您的`self`变量是全局的。使用有效的处理程序附件，两次点击都会记录`"2"`。而且，在`self`您使用它的大多数地方都不需要该变量 - 唯一需要它的是事件处理程序。

更正小提琴：http: [//jsfiddle.net/VRn7v/2/](http://jsfiddle.net/VRn7v/2/)

# java - App Engine 聊天应用程序

> ID：11802330
> 
> 赞同：0
> 
> 时间：2012-08-03T19:47:34.133
> 
> 标签：java, google-app-engine, xmpp

我正在使用 xmpp 在应用引擎上编写聊天应用程序。我的想法是让用户互相聊天。我可以通过获取登录用户并删除地址的@gmail.com 部分并将其替换为@appid.appspotchat.com 来获取要发送到google talk 帐户的消息）例如，如果登录用户是bob @gmail.com，用于发送的 jid 将是 bob@appid.appspotchat.com）。然后，您可以将消息发送到 google talk 帐户，例如 jeff@gmail.com。

我的问题是再次收到消息。开发者页面显示了应用程序本身如何接收到 appid@appspot.com jid 的消息，但是如何让它接收到 appid.appspot.com jid 的消息，然后将这些消息呈现给登录的用户？总体思路是，当用户登录时，我将检索联系人列表，获取他们的联系人（将 gmail.com 替换为 appid.appspotchat.com），然后将可用的联系人呈现给用户。

如果这是不可能的，有没有办法让登录用户以不同的方式与其他用户聊天？我已经简要地查看了频道 api，但我认为这不合适？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T21:27:51.313

当您的服务器收到针对该用户的消息时，您可以使用 Channel API 将消息发送到客户端。无法将 XMPP 消息*直接*发送给您自己页面上的用户；XMPP API 用于向登录到 XMPP 客户端（例如 Gmail、Pidgin 等）的用户发送消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:08:58.887

你不能使用`anything@your_app_id.appspot.com`. 相反，您必须`anything@your_app_id.appspotchat.com`按照[XMPP 地址](https://developers.google.com/appengine/docs/java/xmpp/overview#XMPP_Addresses)中的说明使用。

# c# - C# WebApi 单元测试和模拟控制器

> ID：11802331
> 
> 赞同：11
> 
> 时间：2012-08-03T19:47:37.907
> 
> 标签：c#, unit-testing, asp.net-web-api, moq, xunit

我正在处理这个 WebAPI 项目，我需要为它创建单元测试。该项目的基础是使用 VS 2010 创建的，然后添加了一个 WebApi 模块。

控制器的工作方式有点妨碍测试/模拟。我正在使用 xUnit 和 Moq ，但绝对没有必要坚持使用这两个。

应用程序使用特定对象来处理数据库访问，所以我有控制器对象，它的构造函数需要 DataAccessObject

我在模拟控制器/数据访问对时遇到问题。我试图运行的第一个测试是 GetAllFromDataBase，但我真的不知道如何去做。

编辑：

我按照 Cuong Le 告诉我的做了，现在整个人都在动，我真的很感激。但我遇到了另一个问题。要访问 API，有一个用户名/密码对，我的控制器使用 Thread.CurrentPrincipal.Identity.Name；现在我需要设置这个值才能让它完全工作我猜。

还有 valueServiceMock.Setup(service => service.GetValues()) .Returns(new[] { "value1", "value2" });

似乎没有工作。当代码尝试访问数据库时，由于无法获取有效的用户名来查找，因此什么也得不到

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-04T06:37:14.427

为了使您的应用程序可测试，您需要在设计时考虑到可测试性。从技术上讲，要设计到可测试性，您的应用程序应该尽可能地在层之间、组件之间甚至类之间保持松耦合。

为可测试性设计的很多提示：避免密封的静态类......但是您需要注意的最流行的事情是[依赖注入模式](http://martinfowler.com/articles/injection.html)，而不是在构造函数或其他对象的方法中创建对象，应该注入这个对象. 通过这种方式，我们在类之间建立了松散的依赖关系，并且很容易通过模拟框架来**伪造。**特别是依赖于外部资源的对象：网络、文件或数据库。

如何使用依赖注入注入对象：这就是为什么 IocContainer 是正确的工具，它会自动为您注入对象。我更喜欢使用的 IoC Container 是：[Autofac](http://code.google.com/p/autofac/)和[NInject](http://www.ninject.org/)。

此处将 ValueService 注入 ValuesController 的示例：

```
public class ValuesController : ApiController
{
    private readonly IValueService _valueService;

    public ValuesController(IValueService valueService)
    {
        _valueService = valueService;
    }

    public string[] Get()
    {
        return _valueService.GetValues();
    }

    public string Get(int id)
    {
        return _valueService.GetValue(id);
    }
} 
```

下面是使用 Moq 进行单元测试的简单代码：

```
var valueServiceMock = new Mock<IValueService>();
valueServiceMock.Setup(service => service.GetValues())
            .Returns(new[] { "value1", "value2" });

var controller = new ValuesController(valueServiceMock.Object);
var values = controller.Get();

Assert.AreEqual(values.Length, 2);
Assert.AreEqual(values[0], "value1");
Assert.AreEqual(values[1], "value2"); 
```

# algorithm - 如何在 dijkstra 算法中以 O(log n) 时间更新优先级队列中的键？

> ID：11802333
> 
> 赞同：7
> 
> 时间：2012-08-03T19:47:44.613
> 
> 标签：algorithm, data-structures, priority-queue, dijkstra

过去一周我一直在研究 dijkstra 的算法，我在 java 中有正确的运行代码。它使用数组来计算标准 findMin 函数，该函数为您提供距离最小的顶点。显然它是 O(n)，现在我希望使用 Priority Queue(Min Heaps) 来实现它

我的思考过程是：

```
while (there are unseen Vertex)
{

    vertex= get TheVertex WithSmallest Distance Yet;//(In can be done in O(log n) using heap)

  for this vertex {

    find all of the adjacent edges and traverse them.

    for a particular vertex which is not there in heap yet{

        Simply add it in the queue;
    }
  }
} 
```

但是如果堆中存在一个特定的顶点，那么考虑到找到的 Min 节点的距离，它的距离可能会被更新。

现在我的问题是如何在 O(log n) 时间内更新堆中的特定元素。

我们不能在 O(1) 时间内找到那个元素，对吧？

在像我这样的幼稚实现中，它将是 O(n)，

那么任何人都可以建议可以做些什么来处理这个瓶颈吗？我们如何在 O(log n) 时间内更新堆中的特定顶点？（类似地，我们如何在 O(1) 时间内找到特定元素）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T19:56:03.513

我知道这种情况有两种基本方法：

1.  每当您访问顶点的邻居时，无论它们是否在堆中，都将它们插入堆中。然后，当你得到距离堆最小的顶点时，检查它之前是否已经从堆中删除。如果有，那么也删除这个并继续。否则，将其标记为已删除并访问所有邻居。

2.  保留一个显式指针，指向每个元素在堆中的位置。然后，您可以对已定位的元素执行称为“减少键”的操作。

# ruby-on-rails-3 - 为一个食谱运行 capistrano 任务，而不是另一个？

> ID：11802335
> 
> 赞同：0
> 
> 时间：2012-08-03T19:47:54.867
> 
> 标签：ruby-on-rails-3, capistrano

我有一个先有鸡/有蛋的情况，其中一个目录应该存在于部署之前：update_code 任务。

有什么方法可以确定 cap deploy:cold 是否是调用配方并且没有为此运行任务？但是对于所有其他人呢？（上限部署，上限部署：迁移，等等）

现在，我正在使用捕获来确定服务器上是否存在该目录，但如果没有必要，最好不要这样做。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T01:52:23.610

在 deploy:update_code 任务上使用 before 挂钩会解决您的问题吗？您可以创建一个运行的任务：

```
task :mkdir_for_update_code do
    mkdir -p /path_of_dir/
end 
```

然后添加

```
before 'deploy:update_code', 'deploy:mkdir_for_update_code' 
```

根据任务所在的命名空间替换第二个变量中的部署。

# tomcat - 测试 Tomcat 的 JDBC 池连接

> ID：11802338
> 
> 赞同：1
> 
> 时间：2012-08-03T19:48:16.360
> 
> 标签：tomcat, jdbc, connection-pooling, jmx, monitor

有没有办法（例如通过使用 JMX/MBeans）来测试 Tomcat 服务器的 JDBC 池连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T02:49:20.687

如果你想使用 JMX bean，你可以寻找这个 bean：

```
Catalina:type=DataSource,context=/[context],host=[hostname],class=javax.sql.DataSource,name="[your JNDI name]" 
```

该 bean 有一个`getConnection()`返回`javax.sql.Connection`对象的方法。完成后记得调用`close()`它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:08:10.620

You did not specify which version of Tomcat you are using and what connection pool, so I feel free to assume you are using DBCP. In that case you can access a lot of the status values from the `org.apache.commons.dbcp.BasicDataSource`. You will have to do it from inside of your web application. Probably, the least invasive way is to throw in a JSP page that gets your pooled data source from JNDI, queries BasicDataSource for status values and displays them in a simple HTML table.

# android - 如何在android中单击按钮时显示视图寻呼机的特定页面

> ID：11802341
> 
> 赞同：3
> 
> 时间：2012-08-03T19:48:23.323
> 
> 标签：android, android-viewpager

我正在开发一个项目，我在一个屏幕上使用 View Pager，如下所示：

![在此处输入图像描述](../Images/baa401efd4d361101a10419ad97bcf2a.png)

但是你可以在那里看到，有一个上面的布局，其中列出了根据显示的页面选择的年份。当我们滑动视图寻呼机时，年份也会根据显示页面的索引更改为下一个年份。我必须对将显示相应 View Pager Page 的年份的 TextView 执行 Click 操作。但如何实施呢？意味着当我们点击另一个视图时，我们如何在 View Pager 中显示特定的页面索引。意味着当我们选择 1998 年时，将显示对应于 1998 年的页面。我已经编写了代码，但这对我不起作用。

**代码：**

```
for (int i = 0; i < (Overview_Years.size()); i++) {
                tvYear[i] = new TextView(Overview_New.this);
                img_Pagination[i] = new ImageView(Overview_New.this);

                //yearValue = Overview_Years.get(i).toString();
                LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                        LayoutParams.WRAP_CONTENT,
                        LayoutParams.WRAP_CONTENT);
                // params.weight = 0.5f;

                params.gravity = Gravity.CENTER_VERTICAL;
                params.setMargins(40, 4, 0, 0);

                // tvYear[i].setLayoutParams(new
                // LayoutParams(LayoutParams.WRAP_CONTENT,
                // LayoutParams.WRAP_CONTENT));
                tvYear[i].setLayoutParams(params);

                // tvYear[i].setText(Overview_Years.get(i).toString());
                tvYear[i].setText(Overview_Years.get(i).toString());
                tvYear[i].setTag(Overview_Years.get(i).toString());

                tvYear[i].setGravity(Gravity.CENTER);
                tvYear[i].setTypeface(null, Typeface.BOLD);
                tvYear[i].setTextColor(Color.WHITE);
                tvYear[i].setId(i);
                tvYear[i].setPadding(2, 0, 1, 17);
                //tvYear[i].setTag(Overview_Years.get(i-1).toString());
                final TextView tv = tvYear[i];
                **tvYear[i].setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View arg0) {
                        for(int i=0;i<((ViewGroup)yearHorizontalScrollView.getChildAt(0)).getChildCount();i++){
                            if(((TextView)arg0)== ((ViewGroup)yearHorizontalScrollView.getChildAt(0)).getChildAt(i)){
                                currentposition = i;

                            }
                        }**

                        onYearSelect(((TextView)arg0).getText().toString());
                    }

                });

                layout_Years.addView(tvYear[i]);

                LinearLayout.LayoutParams paramsPagination = new LinearLayout.LayoutParams(
                        LayoutParams.WRAP_CONTENT,
                        LayoutParams.WRAP_CONTENT);
                // params.weight = 0.5f;

                paramsPagination.gravity = Gravity.CENTER_VERTICAL;
                paramsPagination.setMargins(5, 2, 0, 0);
                img_Pagination[i].setLayoutParams(paramsPagination);
                /*if (i == 0) {
                    img_Pagination[0]
                            .setBackgroundResource(R.drawable.pagination_selected);
                } else {*/
                    img_Pagination[i]
                            .setBackgroundResource(R.drawable.pagination_unselected);
                //}
                img_Pagination[i].setId(i);
                layout_Pagination.addView(img_Pagination[i]);

                tvYear[0].setBackgroundResource(R.drawable.selector_x);
                /*tvYear[0]
                        .setBackgroundResource(R.drawable.selector_x);*/
                //tv_Overview_AllYears.setBackgroundResource(R.drawable.selector_bg_big_new);
                count=-1;

            } 
```

提前谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-03T19:59:52.887

您应该能够在 OnClickListener 中使用 setCurrentItem 方法**（下面的语法和文档）**，并且您的 viewpager 会自动滚动**（如果未停用 smoothScroll）**到新位置。

```
ViewPager.setCurrentItem(int index);
OR
ViewPager.setCurrentItem(int index, boolean smoothScroll); 
```

在这种情况下，您将用**索引**替换您想要的索引。因此，您可能还需要一个数组来存储年份和页面之间的关系，或者您可以在年份中设置一个 TAG（比如说位置），然后在 OnClickListener 上检索该 TAG 并转到该位置。

有关更多信息，请参阅[ViewPager 文档](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setCurrentItem%28int%29)

# html - 在另一个网站上激活搜索

> ID：11802343
> 
> 赞同：0
> 
> 时间：2012-08-03T19:48:32.910
> 
> 标签：html, forms

我正在尝试将其他两个站点的搜索表单嵌入到我自己的站点中。这是我的网站，表格在底部：[http](http://dsa.dartmouth.edu/) ://dsa.dartmouth.edu/ 。

DGD 搜索工作正常 - 用户被定向到搜索结果页面 - 但课程选择器没有 - 用户只是被重定向到空白搜索页面。

这是我的表单代码：

```
<form action="http://coursetown.hacktown.cs.dartmouth.edu/search" method="post" class="appSearch">
       <input id="search" name="query[title]" placeholder="course title(s)" type="text" role="textbox">
       <input type='submit' name='commit' type="submit" value='Search' />
</form> 
```

有没有办法让用户在点击搜索时被定向到 coursetown 的搜索结果页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:56:31.930

[http://coursetown.hacktown.cs.dartmouth.edu/search](http://coursetown.hacktown.cs.dartmouth.edu/search)上的搜索表单由 AJAX 提交，因此没有可点击的搜索 URL。此外，它似乎使用了一个隐藏的“authenticity_token”字段，该字段可能是在加载时在服务器端生成的，因此您可能需要了解他们是否有可用于此目的的 API。

如果您可以直接编辑该页面以触发基于 URL 参数的 JavaScript 搜索，这也是一个选项，但不确定您对搜索页面的控制级别。

# java - 使用 ProcessBuilder（带重音符号）在 mac finder 中打开一个文件夹

> ID：11802345
> 
> 赞同：0
> 
> 时间：2012-08-03T19:48:37.847
> 
> 标签：java, macos

您可以使用**ProcessBuilder**或**Runtime.getRuntime().exec()**通过 Java 在 finder 中打开一个收藏夹。但是我已经尝试了两种方法，我可以使用 ProccessBuilder 来完成，如下面的代码所示：

```
ProcessBuilder pb = new ProcessBuilder("open", path);
Process p = pb.start();

int exitCode = p.waitFor(); 
```

我可以打开带有或不带有空格的文件夹，例如：

/myFolder/测试文件夹/

但我无法打开任何带有以下口音的文件夹：

/myFolder/保罗卡塞/

我怎样才能让 ProcessBuilder （或其他东西）在 Java 中打开带有重音符号的文件夹？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T11:34:20.453

这是一个已注册的[错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7193966)。但它最近已修复。更新到最新的 Java 版本。

发生这种情况是因为 Java 无法检测到包含非 ascii 字符的文件路径。

# java - 如何使用 Java 正则表达式来匹配此模式？

> ID：11802346
> 
> 赞同：0
> 
> 时间：2012-08-03T19:48:37.470
> 
> 标签：java, regex

我想`*instance*stuck*`在一个句子中匹配一个模式，实例和卡住之间的单词数可以是 1 到 3。我如何用 Java 中的正则表达式编写这个模式？

例如：

1.  “实例卡住”将匹配模式
2.  “刚刚被卡住的实例”将匹配模式
3.  “xyz 的服务器 123 中的实例被卡住”将与模式不匹配

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T19:52:34.350

您可以尝试以这种方式进行测试

```
String s1 = "The instance just got stuck";
String s2 = "The instance in the server 123 at xyz is stuck";
System.out.println(s1.matches(".*instance (\\w+\\s+){1,3}stuck.*")); // true
System.out.println(s2.matches(".*instance (\\w+\\s+){1,3}stuck.*")); // false 
```

`\\w`匹配任何字母数字字符，就像`[a-zA-Z0-9]`
`\\s`是空格类
`+`意味着`+`必须至少找到一次之前的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:52:40.933

像这样的东西：

`instance(\\w\\s){1,3}stuck`

[在此处](http://www.regular-expressions.info/repeat.html)查看有关限制单词重复的更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:53:57.387

试试这个：`instance( \w+){1,3} stuck`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T19:55:18.967

也许：

```
instance (\w* ){0,3}stuck 
```

这也将匹配古怪的空白：

```
instance\s*(\w*\s*){0,3}stuck 
```

# c - 写入物理内存地址

> ID：11802347
> 
> 赞同：1
> 
> 时间：2012-08-03T19:48:40.210
> 
> 标签：c, windows, memory, driver, wdk

我的内核模式驱动程序内部是以下代码：

```
PHYSICAL_ADDRESS    physAddr;
PVOID               pvk;
unsigned int        reg_addr; // physical address to write to
unsigned int*       reg_val;  // pointer to value to be written

// assume reg_addr and reg_val are initialized to some values

physAddr.QuadPart = (ULONGLONG)reg_addr;
pvk = MmMapIoSpace(physAddr,sizeof(reg_addr),MmNonCached);
WRITE_REGISTER_ULONG((ULONG*)pvk,(ULONG)&reg_val); 
```

该地址没有被写入，我不知道为什么。这是正确的程序还是我错过了一个步骤？另外，我的指针算术可能是错误的吗？我已经尝试了所有排列，但没有一个产生正确的结果。我希望由 指定的物理内存`reg_addr`写入由 指向的值指定的内容`reg_val`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:43:05.600

您的代码有一些看起来奇怪/错误的地方：-

首先，`PHYSICAL_ADDRESS.QuadPart`是一个 64 位的值，但您为其分配了一个 32 位的 int。你确定那是你想做的吗？

其次，我假设您要映射一个 32 位“ULONG”寄存器：

```
pvk = MmMapIoSpace(physAddr,sizeof(reg_addr),MmNonCached); 
```

这可能会起作用，但我认为你的意思是这个

```
pvk = MmMapIoSpace(physAddr, sizeof(ULONG), MmNonCached); 
```

最后，您将指针变量的*地址*`reg_val`写入寄存器。您的评论暗示您要写入?所*指向*的值 `reg_val`如果是这样，请改用它。

```
WRITE_REGISTER_ULONG((ULONG*)pvk, *reg_val); 
```

# android - 如何在 AndEngine 中流式传输实时网络摄像头视频？

> ID：11802349
> 
> 赞同：1
> 
> 时间：2012-08-03T19:48:41.743
> 
> 标签：android, android-layout, video-streaming, webcam, andengine

嗨，我正在使用游戏引擎 AndEngine，我希望能够将实时视频从机器人上的网络摄像头流式传输到我的 Android 应用程序。我使用 AE 的原因是因为我需要控制我的机器人的游戏控件。但是，我不知道在使用 AndEngine 时如何流式传输视频（或者甚至在不使用它时）。控件和视频源需要在同一个屏幕中（除非绝对没有其他方法）。我的问题是如何将视频流放在 AndEngine 场景之上，和/或如何提供一种格式以使其不会模糊控件？（它们位于屏幕的左下角和右上角，我知道这很痛苦，但由于我的设备上的多点触控存在一些问题，我认为我无法更改它）。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:02:50.413

查看 GitHub 上的增强现实示例。 [https://github.com/nicolasgramlich/AndEngineExamples](https://github.com/nicolasgramlich/AndEngineExamples) 它可能对你有用。但是，我知道这个例子是有问题的，当我尝试它时没有工作，但也许你会有更多的运气。

# php - 错误的 DNS 设置，php_network_getaddresses: getaddrinfo failed Name or service not known, nslookup

> ID：11802351
> 
> 赞同：5
> 
> 时间：2012-08-03T19:48:46.193
> 
> 标签：php, apache, dns, ping

问题最初看起来像这样：

> 警告：file_get_contents() [function.file-get-contents]: php_network_getaddresses: getaddrinfo failed: Name or service not known in /home/ ***/*** /ppk_hotweb.class.php on line 58

我也使用了 cURL，它只是返回 null，就是这样。（文件和 cURL）都已启用。

试过了`file_get_contents('google.com')`，它奏效了！

那为什么不行`file_get_contents('domain.com.au')`呢？

所以我开始阅读相关的 stackoverflow 帖子，人们说这是 DNS 设置问题。

我尝试了以下方法：

```
> # ping domain.com.au
ping: unknown host domain.com.au 
```

楼主怎么了？该网站是实时的。

还：

> # nslookup domain.com.au
> 服务器：203.16.60。 ***地址：203.16.60。***#53
> 
> *** 找不到 domain.com.au：没有答案

和

```
> # dig domain.com.au

; <<>> DiG 9.8.2rc1-RedHat-9.8.2-0.10.rc1.el6_3.2 <<>> domain.com.au
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 52814
;; flags: qr aa rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 0

;; QUESTION SECTION:
;domain.com.au.          IN      A

;; AUTHORITY SECTION:
domain.com.au.   3600    IN      SOA     ns1.web24.net.au. dns.web24.net.au. 2012080201 7200 3600 604800 3600

;; Query time: 1 msec
;; SERVER: 203.16.60.***#53(203.16.60.3)
;; WHEN: Sat Aug  4 05:43:23 2012
;; MSG SIZE  rcvd: 92 
```

我真的很感激任何帮助！谢谢。

UPD：顺便说一句，刚刚尝试了 Whois 查找...

> domain.com.au 不可用

:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T20:29:38.033

您的服务器使用的 DNS 服务器可能正在使用旧的缓存 DNS 记录，因为查找该主机对我有用。

我的`dig`结果还返回了一条有效的 A 记录，而您的记录似乎没有。

考虑到 DNS 问题，这可能不会改变任何东西，但是

```
file_get_contents('domain.com.au'); 
```

应该：

```
file_get_contents('http://domain.com.au'); 
```

使用第一个选项将尝试查找本地文件而不是使用`http`包装器。

如果您有权限，请尝试将`/etc/resolv.conf`文件中的名称服务器更改为其他名称服务器。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-10-07T08:24:10.150

您可以在没有 https 的情况下使用此命令，如下所示

```
 php -r "readfile('http://symfony.com/installer');" > symfony 
```

# jquery-ui - 如何使用 jquery ui 完整文件而不是缩小版本？

> ID：11802358
> 
> 赞同：1
> 
> 时间：2012-08-03T19:49:32.850
> 
> 标签：jquery-ui

我在“ [jQuery 入门](http://jqueryui.com/docs/Getting_Started)”之后使用 3 个文件实现了 datepicker：

1.  `<link type="text/css" href="css/themename/jquery-ui-1.8.22.custom.css" rel="Stylesheet" />`
2.  `<script type="text/javascript" src="js/jquery-1.4.4.min.js"></script>`
3.  `<script type="text/javascript" src="js/jquery-ui-1.8.22.custom.min.js"></script>`

它建议使用 3 个文件，包括“jquery-1.4.4.min.js”。如果我想为 datepicker 使用完整的 .js 文件，例如“jquery.ui.datepicker.js”怎么办。要求使用完整版的原因是根据我的需要修改一些在缩小版中很难的元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:51:15.720

然后下载并引用未缩小的版本。

除了文件的大小之外，没有任何区别。完成更改后，您可以随时重新缩小。

如果您正在进行自定义构建，则非缩小版本`jquery.ui.datepicker`将在`development-bundle/ui`文件夹中。

# html - 在多行跨度中添加三个点

> ID：11802361
> 
> 赞同：23
> 
> 时间：2012-08-03T19:49:50.980
> 
> 标签：html, css

我[在 SO 上发现了这个问题](https://stackoverflow.com/questions/11426275/how-can-i-show-dots-in-a-span-with-hidden-overflow)，解决方案非常简单：

jsfiddle：http: [//jsfiddle.net/Y5vpb/](http://jsfiddle.net/Y5vpb/)

html:

```
<span>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen look</span>​ 
```

CSS：

```
span{
    display:inline-block;
    width:180px;
    white-space: nowrap;
    overflow:hidden !important;
    text-overflow: ellipsis;
} 
```

它像预期的那样工作，它打印：`Lorem Ipsum is simply du...`

现在，我想要做同样的事情，但一直失败，在以下示例中创建：

jsfiddle：http: [//jsfiddle.net/9HRQq/](http://jsfiddle.net/9HRQq/)

html:

```
<div class="textContainer">                
    <img src="#" class="image" alt="the_image">
    <span class="text">"The quick brown fox jumps over the lazy dog" is an english-language pangram, that is, a phrase that contains all of the letters of the English alphabet. It has been used to test typewriters and computer keyboards, and in other applications involving all of the letters in the English alphabet. Owing to its brevity and coherence, it has become widely known.</span>
</div> 
```

CSS：

```
.textContainer{
    width: 430px;
    float: left;
    margin-top: 10px;
    border: 1px solid black;                
}

.text {
    font-size: 24px;
    line-height: 24px;
    font-weight: bold;
    color: #047F04;
    display: block;
    white-space: normal;
    overflow: hidden !important;
    text-overflow: ellipsis;
    height: 99px;
}

.image {
    float: right;
    position: absolute;
    top: 85px;
    right: 10px;
    width: 108px;
    height: 42px;
} 
```

你能告诉我`...`在我的例子中如何实现放在字符串的末尾？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-03T20:01:35.537

该`text-overflow`属性的规范说这对于多行文本是不可能的：

> 此属性指定当**内联内容**在其具有“溢出”而不是“可见”的内联进展方向上溢出其块容器元素（“块”）时呈现。例如，当文本**被阻止换**行时（例如，由于'white-space:nowrap' 或单个单词太长而无法容纳），文本可能会溢出。

换句话说，仅适用于单行文本块。

来源：[http ://dev.w3.org/csswg/css3-ui/#text-overflow](http://dev.w3.org/csswg/css3-ui/#text-overflow)

**编辑** 这个小提琴有一个使用 jquery 的解决方法：http: [//jsfiddle.net/k5VET/](http://jsfiddle.net/k5VET/)（来源：[跨浏览器多行文本溢出，省略号附加在宽度和高度固定的 div 中？](https://stackoverflow.com/questions/3404508/cross-browsers-mult-lines-text-overflow-with-ellipsis-appended-within-a-widthhe)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-07T09:48:34.023

```
span{
    display: block; /* Fallback for non-webkit */
    display: -webkit-box;
    -webkit-line-clamp: 3; /* no of lines */
    text-overflow: ellipsis;
    overflow:hidden !important;
    width:180px;
} 
```

上面的 CSS 属性会放三个点...
例如：

> Lorem Ipsum 只是
> 印刷和
> 排版行业的虚拟文本。洛雷姆...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-01-02T15:28:05.983

这在没有 js 或 jquery 的情况下是可能的。只是纯CSS。

类似于 vijay 的答案，但要添加，您需要为`-webkit-box-orient: vertical;`

```
span {
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;  /* limit to 2 lines */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T19:55:11.977

将`width: 200px;`和添加`white-space: nowrap;`到您的 .text css 块。没有设置宽度，文本只是扩展和填充。

# objective-c - Restkit 0.10.1 与 RKObjectManager 的对象映射

> ID：11802362
> 
> 赞同：0
> 
> 时间：2012-08-03T19:49:56.523
> 
> 标签：objective-c, json, ios5, mapping, restkit

我一直在努力寻找一个解决方案和一个很好的教程来教授 Restkit 的对象映射功能。但是，来自 GITHUB repo 的教程非常不清楚。

这是我收到的对[http://baseURL.com/contacts/进行 GET 调用的 JSON](http://baseURL.com/contacts/)

请注意，与其他教程相比，我的 JSON 没有像“ACContact”这样的根密钥路径。

```
[{
 "status":"ACTIVE",
 "fax":"555-1212",
"addresses":[
  {
     "line1":"6 Main Street",
     "line2":"",
     "city":"Acton"
  },
  {
     ...
  }
....(other stuff)...
}
...more similar JSONs for the other contacts...
] 
```

我仍然无法弄清楚如何映射子对象地址数组，因此我只是尝试映射该类的其他常规属性：

```
RKObjectManager *manager = [RKObjectManager objectManagerWithBaseURL: some_URL] ;

[[manager client] setValue:@"true" forHTTPHeaderField:@"SSLClientCipher"] ;
[[manager client] setValue:@"accept" forHTTPHeaderField:@"application/json"] ;

RKObjectMapping * contactMap = [RKObjectMapping mappingForClass:[ACContact class]] ;
[contactMap mapKeyPath:@"status" toAttribute:@"status"] ;
[contactMap mapKeyPath:@"fax" toAttribute:@"fax"] ;

[[manager mappingProvider] addObjectMapping:contactMap] ;

[manager loadObjectsAtResourcePath:@"/contacts" delegate:self] ; 
```

这是我后来收到**的错误：**

**restkit.object_mapping:RKObjectMapper.m:81 添加映射错误：找不到 keyPath 的对象映射：''**

**restkit.network:RKObjectLoader.m:222 在映射过程中遇到错误：找不到 keyPath 的对象映射：''**

1）谁能告诉我这里出了什么问题？请注意，与其他教程相比，我的 JSON 没有像“ACContact”这样的根密钥路径。

对于 JSON 中的状态和传真等简单属性，是否有将值映射到我的联系人类属性的约定。

2）此外，我知道我可以使用关系映射来映射子对象地址，但是当我声明一个 NSMutableArray 来存储联系人内的地址列表时我该怎么做。

3）如果一切正常，如何在解析多个联系人的整个 JSON 时创建联系人列表？

感谢您的时间。布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:04:54.220

为了映射到没有 rootkeypath 的 JSON，我们设置使用：

[self.manager.mappingProvider setObjectMapping:self.contactMap forResourcePathPattern:@"/contacts"] ;

但是，这会造成您无法进行 POST 的问题，因为没有 RootKeyPath 就无法为对象创建序列化映射。

# data-access-layer - 当子表引用父表时，web2py 的 DAL 会自动创建前向引用吗？

> ID：11802368
> 
> 赞同：0
> 
> 时间：2012-08-03T19:50:19.813
> 
> 标签：data-access-layer, web2py

以下信息来自 web2py book 的第 270 页：

```
person = db.person(id)

for dog in person.dog.select(orderby=db.dog.name):
    print person.name, 'owns', dog.name 
```

在这最后一个表达式`person.dog`中是一个快捷方式

```
db(db.dog.owner==person.id) 
```

现在：

这本书没有引用`person`定义表的部分，我不相信该表的任何先前定义实际上有一个`dog`列。如果 person 表确实有一个`dog`列，那就没有意义了，因为大概一个人可以有很多条狗。

那么他们是说从`dog`表到人的引用以某种方式自动创建了从人到的前向引用`dog`，而没有任何明确的列`person`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:37:13.433

“人”数据库​​表本身没有自动创建任何内容。相反，表示给定人员记录的 DAL Row 对象包括一个 DAL Set 对象，该对象表示“dog”表中引用该人员的记录集。在代码中，`person`是一个 Row 对象（即`db.person(id)`）——它有一个“dog”属性，就是下面的 DAL Set 对象：

```
db(db.dog.owner == person.id) 
```

这是引用此 person.id 的一组狗。如果你这样做：

```
>>> print db.person(1) 
```

你会看到类似的东西：

```
<Row {'name': 'John', 'update_record': <function <lambda> at 0x2b08758>,
'dog': <gluon.dal.Set object at 0x2b00d10>, 'id': 1,
'delete_record': <function <lambda> at 0x2b08b90>}> 
```

因此，除了包含记录的“name”和“id”值之外，Row 对象还包括表示引用此人的“dog”表记录的 Set 对象`update_record()`和函数。`delete_record()`如果您打印与该 Set 对象关联的查询，您将获得以下信息：

```
>>> print db.person(1).dog.query
(dog.owner = 1) 
```

因此，前向引用是在 Row 对象本身中创建的。请注意，该`db.person(1).dog`属性只是一个定义查询的 Set 对象——它不包含实际的“狗”表记录，甚至不包含对其 id 的引用。在您调用`select()`方法 via之前，不会对数据库进行任何查询`db.person(1).dog.select()`，这将返回“dogs”表中的实际记录。

# xslt - 嵌套 XSL 元素：在 xsl:template name="xxxx" 中嵌套 xsl:if

> ID：11802370
> 
> 赞同：-2
> 
> 时间：2012-08-03T19:50:21.507
> 
> 标签：xslt

我不断收到 XSLT 错误：

```
<xsl:template name="PermissionsHeader">
  <xsl:if test="true">
  </xsl:if>
</xsl:template> 
```

是否存在某种优先级，其中 xsl:if 不能嵌套在 xsl:template 中？我想要的只是 xsl:template 中的一些条件...谢谢

错误信息：

```
Error on line 1 column 1 
  SXXP0003: Error reported by XML parser: Premature end of file. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:53:59.470

```
<xsl:if test="true"> 
</xsl:if> 
```

看[这里](http://www.dpawson.co.uk/xsl/sect2/N8413.html)

# php - 如何使用 PHP 简单 HTML DOM 获取最接近 h1 标签的 img 标签？

> ID：11802371
> 
> 赞同：0
> 
> 时间：2012-08-03T19:50:39.027
> 
> 标签：php, simpledom

`h1`我有从网页获取第一个标签的代码。现在我想获得`img`出现在这个标签之前或之后的第一个`h1`标签。如何使用 PHP Simple HTML DOM 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:55:46.580

不容易。但是，这应该可以工作：

1.  得到`<h1>`你已经拥有的
2.  获得下一个兄弟姐妹。检查是否是图像，或者如果不是，检查它是否有图像作为孩子/后代
3.  获取上一个兄弟姐妹。与上述相同的检查。
4.  如果您还没有找到图像，请将下一个兄弟放在前面，将前一个放在后面，然后重复直到找到或用完节点。
5.  如果您仍然没有图像，请获取的父节点`<h1>`并从步骤 2 开始重复整个过程。
6.  您现在应该已经遍历了整个文档，所以如果您现在没有结果，那么任何地方都没有图像。

根据需要修剪步骤。

# iphone - 将字符修剪到特定数量的 Twitter iOS

> ID：11802373
> 
> 赞同：0
> 
> 时间：2012-08-03T19:50:49.043
> 
> 标签：iphone, xcode, nsstring, character

我觉得这太罗嗦了，但我会尽力而为。我的应用程序内置了每天都在变化的报价。其中一些超过 140 个字符，但我希望能够通过 Twitter 分享，所以我需要一种方法来获取计数，如果超过 140，请编辑它。到目前为止，我所拥有的是：

```
int maxChars = 140;
        int charsLeft = maxChars - [label1.text length];

        NSString *removed = [label1.text substringToIndex:[label1.text length] -  charsLeft];

        TWTweetComposeViewController* twc = [[TWTweetComposeViewController alloc] init];
        [twc setInitialText:removed];
        [self presentModalViewController:twc animated:YES]; 
```

其中 label1 是显示报价的 UILabel。这会在超过 140 个字符的引号上引发错误

```
[__NSCFString substringToIndex:]: Range or index out of bounds' 
```

有什么想法吗？我在想的另一件事。每个报价都以

```
" - Person who said it 
```

我在想我可以得到字符数，删除多余的字符 + 3 并在 - 之前插入一个 ...。我怎么能这样做，或者至少修复我现有的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:07:14.467

好吧，想象一下您的代码带有一个包含 10 个字符的标签。

```
 int maxChars = 140;

 int charsLeft = maxChars - [label1.text length];

 NSString *removed = [label1.text substringToIndex:[label1.text length] -  charsLeft]; 
```

变成

```
 int charsLeft = 140 - 10; //charsLeft = 130

 NSString *removed = [label1.text substringToIndex:10 -  130]; 
```

这将告诉 SubstringToIndex 获取从 0 到 -120 的字符，这没有多大意义。

拆分字符串以隔离引用的作者可能会很棘手，因为引号和作者姓名都可能包含连字符。如果你想尝试一下，你可以做一些类似这个spring-parsing question建议的答案之一（http://stackoverflow.com/questions/2166809/number-of-occurrences-of-a-substring-in -an-nsstring) 用于字符串 @" - "，并尝试隔离最后一个实例。

# google-apps-script - REST API 需要调用 URL，但在访问作为 Web 应用程序部署的脚本时遇到问题

> ID：11802374
> 
> 赞同：0
> 
> 时间：2012-08-03T19:51:00.477
> 
> 标签：google-apps-script, twilio

我正在对服务进行 REST 调用，然后需要连接到稳定的 URL。我将脚本发布为 Web 应用程序，然后尝试使用该 URL，Twilio（我正在使用的 REST api）响应说它无权访问 Google Apps 脚本稳定 URL。有关回调 URL 所需内容的更具体信息。 [http://www.twilio.com/docs/api/rest/making-calls#url-parameter](http://www.twilio.com/docs/api/rest/making-calls#url-parameter) 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T23:53:50.913

在这里从 Twilio 抢夺。您可能想查看 GAS 团队关于[如何将 Twilio 与 GAS 一起使用](https://developers.google.com/live/shows/11404657)的截屏视频。他们在部署过程中强调您必须确保将“谁有权访问应用程序”的权限设置为“所有人”。你可以试一试，看看它是否适合你？

# ruby-on-rails - Rails 在另一个表单中渲染表单的一部分

> ID：11802375
> 
> 赞同：7
> 
> 时间：2012-08-03T19:51:09.590
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有一个页面，您可以在其中创建发票。有一个单独的部分允许您将付款添加到发票中。我想要做的是在创建发票时添加创建付款的功能。

我想将“创建付款”表单视图呈现到“创建发票”表单视图中。我怎样才能做到这一点？这是一些代码：

发票表单视图（注意渲染调用）：

```
<%= form_for(@contract) do |f| %>
  <div class="field">
    f.label "Add payment?"
    <div id="pay_form">
      <%= render 'payments/pay_form' %>
    </div>
</div> 
```

(_pay_form.html.erb) 创建付款表单的部分内容（请注意，我没有在此处包含 form_for 标记，因为我不想在上面的发票页面上的另一个表单中放置下一个表单）：

```
<div class="field">
  <%= f.label 'Amount Paid:' %>
  <%= f.text_field :amount %>
</div>
<div class="field">
  <%= f.label 'Payment Method' %>
  <%= f.select :method, %w(Cash Credit Check) %>
</div> 
```

主要问题是`f`部分中的变量不存在。即使我`f`从表单中分配 Invoice 的 var，参数的名称也将是`params[:invoice][:amount]`而不是`params[:payment][:amount]`. 明白我在说什么吗？

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T20:10:13.960

您需要将`f`变量从视图传递到局部。

为此，请更改

```
<%= render 'payments/pay_form' %> 
```

进入

```
<%= render 'payments/pay_form', f: f %> 
```

如果您遇到名称错误，因为两者都被命名`f`

尝试：

```
<%= render :partial => 'payments/pay_form', :locals => { :f => f} %> 
```

或者

```
<%= form_for(@contract) do |builder| %>
  <div class="field">
    builder.label "Add payment?"
    <div id="pay_form">
      <%= render 'payments/pay_form', f: builder %>
    </div>
</div> 
```

希望这可以帮助。

为了进一步学习，我认为您真正要寻找的是嵌套形式。

如果您有兴趣了解它们，这里有一些关于这个主题的好教程：

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1) [http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)

# meteor - 如何加快 Meteor 中的数据库刷新率？

> ID：11802376
> 
> 赞同：1
> 
> 时间：2012-08-03T19:51:10.477
> 
> 标签：meteor

我有一个流星应用程序，它将 MongoDB 数据库中的数据提供给用谷歌图表编写的图表。我有第二个应用程序（用 java 编写），它不断更新 MongoDB 数据库中的记录。尽管 Java 应用程序每秒更新多次记录，但客户端上的数据似乎每隔几秒才更新一次。有没有办法加快速度，或者有人对如何诊断它为什么慢有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T02:58:54.943

有两个地方你想看。

首先，包`mongo_driver`中的`mongo-livedata`mongo 在服务器端轮询 mongo（现在每 10 秒）以保持同步。

其次，使用包进行在线同步`stream`；我不是 100% 确定它是如何工作的，但这就是您必须查看消息是如何被缓冲/如何轮询套接字等的。但除了延迟+轮询超时之外，它应该是“即时的”。

所以我的猜测是你想专注于第一部分。

# java - 在 DynamicReports 中使用图表时隐藏表格信息

> ID：11802377
> 
> 赞同：0
> 
> 时间：2012-08-03T19:51:13.783
> 
> 标签：java, jasper-reports, dynamic-reports

我正在使用动态报告。在他们的网站 [http://dynamicreports.sourceforge.net/examples/examples.html](http://dynamicreports.sourceforge.net/examples/examples.html)上，我只看到表格信息和图表都出现的图表示例。

我只需要图表部分。我试图弄清楚如何隐藏报告的表格部分。

任何人都知道如何在查看图表时隐藏表格部分？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:15:30.703

在这个例子中，表格没有出现

[http://www.dynamicreports.org/examples/multiaxischartreport.html](http://www.dynamicreports.org/examples/multiaxischartreport.html)

尝试做同样的事情，并更改图表。

```
report().setTemplate(Templates.reportTemplate)
        .fields(dateField)  
        .title(  
            Templates.createTitleComponent("MultiAxisChart"),  
            cht.multiAxisChart(chart1, chart2),  
            cht.multiAxisChart()  
                .addChart(chart1, AxisPosition.LEFT_OR_TOP)  
                .addChart(chart2, AxisPosition.RIGHT_OR_BOTTOM))  
          .pageFooter(Templates.footerComponent)  
          .setDataSource(createDataSource())  
          .show(); 
```

# php - 从外部 PHP 使用 EasyBlog 的自动发布

> ID：11802380
> 
> 赞同：1
> 
> 时间：2012-08-03T19:51:18.050
> 
> 标签：php, joomla, easyblog

我正在尝试将**EasyBlog**博客文章从我自己的组件自动发布到 Twitter。我目前有：

```
$blog = EasyBlogHelper::getTable( 'Blog' );
$blog->load( $postId );
$blog->autopost(array('twitter')); 
```

`autopost`说它成功了，但帖子没有出现在 Twitter 上，我的 Joomla 网站的后端也没有显示。我没有收到任何错误消息。

我能做些什么来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:45:38.443

事实证明，我错误地使用了 EB 的 API。最后一行应该是：

```
$blog->autopost(array('twitter'), array('twitter')); 
```

# sql - Oracle SQL 查询：如何使用计数

> ID：11802384
> 
> 赞同：4
> 
> 时间：2012-08-03T19:51:53.427
> 
> 标签：sql, oracle

我有以下格式的数据

```
userid  amount  term  APR
1        10       5    1
1        10       4    2
2        20       6    1
2        20       4    3
2        20       3    1 
```

我想按金额、期限、APR 进行排序，所以在输出中我想要最大数量，它是相应的期限 APR。如果金额相同，请选择具有最长期限的一项，如果期限也相同，则会发生相同的情况。但是这三者的结合总是独一无二的。

输出列：

```
userid,  amount, term, apr, numberOfRowsForEachUser
  1       10       5   1      2
  2       20       6   1      3 
```

**问题：我能够获得前四列，但不确定如何获得“总报价”或“每个用户的总行数”。**

我的查询看起来像这样。

```
select 
  userid,amount,term,apr
  from 
( select userid, amount, term,  apr
   RANK() OVER (PARTITION BY userid ORDER BY amount,term,apr) amount_rank,   
from 
   tableXYZ
) 
where amount_rank = 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T19:53:48.350

只需添加一个`COUNT(*)`解析函数

```
select 
  userid,amount,term,apr, cnt
  from 
( select userid, amount, term,  apr
   RANK() OVER (PARTITION BY userid ORDER BY amount,term,apr) amount_rank,   
   COUNT(*) OVER (PARTITION BY userid) cnt
from 
   tableXYZ
) 
where amount_rank = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T20:12:26.957

我喜欢 Justing 答案（+1），但仍然想提供一个对我来说更直观的替代答案：

```
select x.userid,x.amount,x.term,x.apr,y.cnt
from tableXYZ x, (select userid, COUNT(1) cnt from tableXYZ group by userid) y
where x.term = (select max(term) from tableXYZ xx where xx.userid = x.userid)
and x.userid = y.userid 
```

[你可以在这里](http://sqlfiddle.com/#!4/b6b4e/11)玩

# javascript - 正则表达式 - 从与表达式不匹配的字符串中删除所有内容

> ID：11802385
> 
> 赞同：16
> 
> 时间：2012-08-03T19:52:01.210
> 
> 标签：javascript, regex

我正在创建一个 JavaScript 函数，它将获取用户输入的值并从中创建一个 CSS 类名。以下表达式可用于检测最终结果是否遵循有效的 css 规则

```
-?[_a-zA-Z]+[_a-zA-Z0-9-]* 
```

但我需要找到一种方法来使用它来删除所有无效字符。

我在想类似的东西：

```
var newClass = userInput.replace(EVERYTHING BUT /[_a-zA-Z0-9-]/, ""); 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-03T19:57:28.693

使用`^`运算符 and对现有正则表达式进行非常小的修改应该可以工作`g`：

```
/[^a-zA-Z0-9_-]+/g 
```

应该用作：

```
var newClass = userInput.replace(/[^a-zA-Z0-9-_]/g, ''); 
```

`^`字符，作为括号内的第一个字符，`[]`指定匹配*不在*括号内的内容（即 - 您要删除的字符）。
修饰符对整个`g`输入字符串执行全局匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T20:00:17.140

```
var newClass = userInput.replace(/\W/, ""); 
```

\w 等于 [a-zA-Z0-9_]

\W 等于 [^a-zA-Z0-9_]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T19:58:58.427

`var result = userInput.replace(/[^\w-]/g, '');`

# ruby-on-rails - “向导”帐户创建过程中的纯 REST 或流程驱动设计？

> ID：11802398
> 
> 赞同：0
> 
> 时间：2012-08-03T19:53:09.543
> 
> 标签：ruby-on-rails, model-view-controller, rest

我正在构建一个注册向导有点冗长的应用程序。

该向导将包含以下步骤（以及关联的模型类）：

1.  组织信息（组织）
2.  账户计划（OrganizationSubscription、OrganizationSubscriptionType）
3.  付款明细（OrganizationPaymentDetail）
4.  用户帐户 (AdminUser)

您是否建议构建一个向导控制器，即“AccountSetup”，它通过每个步骤来容纳所有这些对象的创建，或者我应该采用纯粹的 RESTful 方式，仅在它们关联的资源路径和操作中创建这些对象。每个组织设置只能使用一次此控制器。任何编辑或附加帐户信息都将仅使用 RESTful 资源。

显然前者会更容易，因为我需要向用户直观地显示步骤并显示带有验证错误的视图，而无需在会话中进行大量重定向和存储状态。

但是，后者更像是一种最佳实践。我想构建以便任何开发人员都可以挖掘。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:57:08.983

您可能希望将向导推送到数据库中，以便您可以更轻松地跟踪不完整的注册和内容。因此，您可以拥有一个具有状态的向导模型，并且该模型属于您从向导创建的所有相关关联模型（顺便说一下，您也不会在控制器代码中乱扔此逻辑，而是将其推回模型中）。

这也为您提供了一个点，您可以验证所有相关模型是否正确并准备好完成。

# html - 轮廓被下一个元素隐藏

> ID：11802399
> 
> 赞同：22
> 
> 时间：2012-08-03T19:53:11.963
> 
> 标签：html, css, outline

我有一排图像，每个图像都包含在一个链接中。

当我将鼠标悬停时，我希望在每个图像周围出现一个虚线轮廓。

问题是，除了最后一张图片，RHS 上的轮廓都不见了。

就好像图像与左侧图像的轮廓重叠。

无论如何，当我悬停时，要在所有 4 面都出现轮廓？

（我需要图像相互对接而没有间隙。）

我在 FF14、chrome、IE9 上试过这个。

[http://jsfiddle.net/spiderplant0/P3WBG/](http://jsfiddle.net/spiderplant0/P3WBG/)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-03T20:01:04.773

最简单的方法是分配`position: relative`给`a`元素，然后增加`z-index`of `a > img:hover`（而不是样式化`a:hover`:

```
a > img {
    position: relative;
}

a > img:hover {
    outline: 3px dotted blue;
    z-index: 3000;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/P3WBG/18/)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-03T19:59:56.423

只需添加`position: relative; z-index: 1000`他们的`:hover`风格：[更新的小提琴](http://jsfiddle.net/P3WBG/15/)

**更新：**实际上，您甚至不需要`z-index`, 相对定位本身就可以实现您的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:59:46.180

您可以做的是将每个图像边框设置为 1px 实心，无论背景颜色是什么，然后`img:hover`将边框设置为您想要的。这是我正在谈论的工作的 jsFiddle：http:
[//jsfiddle.net/P3WBG/12/](http://jsfiddle.net/P3WBG/12/)

# java - XSLT 参数不起作用

> ID：11802401
> 
> 赞同：1
> 
> 时间：2012-08-03T19:53:31.003
> 
> 标签：java, xml, xslt

这是我的java代码，与参数有关：

```
 transformer.setParameter("limad","1234");
    transformer.transform(text, new StreamResult(response.getOutputStream())); 
```

我的 xslt 有：

```
<xsl:template match="/">
    <xsl:param name="limad"/>
    .... lots of stuff here...
                                <td>
                                    <xsl:value-of select="$limad"/>
                                </td>
    .... lots of stuff here...
</xsl:template> 
```

我的结果是：<td></td>

有任何想法吗？我该如何调试呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T21:05:22.310

我不是 java 专家，但是如果您尝试将参数传递给 xslt，则需要将它们放在 template-match="/" 之外

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">

<!-- Imports -->
<xsl:import href="test.xslt"/>

<xsl:output method="html"
                  doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
                  doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"
                  indent="yes" standalone="yes"/>

 <!-- Parameters-->
<xsl:param name="limad"/>

<!-- Templates Match-->
<xsl:template match="/">
    .... lots of stuff here...
                                <td>
                                    <xsl:value-of select="$limad"/>
                                </td>
    .... lots of stuff here...
</xsl:template>
</xsl:stylesheet> 
```

# c# - 使用 Linq to SQL 更新所有列表项

> ID：11802404
> 
> 赞同：1
> 
> 时间：2012-08-03T19:53:55.257
> 
> 标签：c#, sql, linq, ienumerable

要更新列表项，请使用以下代码：

```
foreach (MyObject obj in listObj)
  {
      // modify fields              
      obj.myProperty = value; //any value
      objRepository.Modify(obj);
  }
contex.SubmitChanges(); 
```

问题是该列表包含超过 5000 条记录，并且处理过程非常缓慢。有什么方法可以更快地更新它？直接用sql？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:01:58.497

在我看来有两种可能：

1.  在 SQL 中实现存储过程，并通过与数据库的直接连接直接访问它。很难在没有任何代码的情况下为您提供任何详细的帮助，但您绝对应该从 sp 中挤出比 LINQ to SQL 循环更多的性能，因为该语句是提前准备好的，只要您只创建一次连接即可真正做的是将数据传递给服务器并让服务器处理其余的事情。

2.  另一种选择是修改您的存储库以接受缓存大小作为可能的参数。也就是说，您告诉存储库仅在其内存中有给定数量的记录时才影响对数据库的更改，或者每 x 毫秒一次，以较早的时间为准。这有点像 StringBuilder 的工作方式，在您开始使用 StringBuilder 以提高性能之前，您可以让 StringBuilder 了解要保留多少空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:50:49.587

有一篇古老但很棒的文章展示了如何使用 linq2sql 执行批量更新

[http://www.aneyfamily.com/terryandann/post/2008/04/Batch-Updates-and-Deletes-with-LINQ-to-SQL.aspx](http://www.aneyfamily.com/terryandann/post/2008/04/Batch-Updates-and-Deletes-with-LINQ-to-SQL.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T20:53:31.530

如果您使用的是数据库，则性能下降是由 5000 多次往返数据库来保存更改造成的。每次往返都可能很昂贵。保存这些更改的最佳选择是将它们批量化，EF 为您执行此操作（我假设这就是您正在使用的）。

如果您可以使用单个 SQL 语句识别列表中的对象，则存储过程可能是更新该数据的最快方法。但是，如果您之后不刷新对象，您将面临对象缓存与底层数据库不同步的风险。使用实体框架，您可以将存储的过程导入到您的上下文中，并直接调用它。

另一个选项是您编写的 - foreach 循环。如果它是您编写的东西，而不是生成的东西，我会仔细研究分析您的存储库类的 Modify 方法。

这可能是性能需求可能超过模型纯度的情况之一。根据我的经验，EF 和其他 ORM 框架非常适合单独处理对象和小型集合，但是我发现在处理中到大型数据集合（只有数百条记录）时，卸载基于集合的数据变得更加高效处理数据库，让数据库引擎做它被优化的事情。我们正在谈论将运行时间从几分钟减少到几秒钟。

祝你好运！

# iphone - 自动调整大小的 UILabel 边界

> ID：11802409
> 
> 赞同：1
> 
> 时间：2012-08-03T19:54:15.283
> 
> 标签：iphone, objective-c, cocoa-touch

我想用代码创建 UILabel 和其他一些元素。UILabel 的大小可以根据文本而改变，所以我必须相应地移动其他元素。我怎样才能最有效地做到这一点？我尝试访问 bounds 属性，但奇怪的是，它为空：

```
CGRect textRect = CGRectMake(20, 20, 280, 50);
label = [[UILabel alloc] initWithFrame:textRect];
label.text = someString;
label.lineBreakMode = UILineBreakModeWordWrap;
label.numberOfLines = 0;    
[superView addSubview: label];
NSLog(@"bounds: %@", label.bounds); 
```

打印出“边界：（空）”

标签本身在预期的坐标中呈现得很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T20:15:45.323

bounds 属性是一个 CGRect。CGRect 不是 Objective-C 对象，所以你不能直接使用`%@`. 您需要先将其转换为字符串`NSStringFromCGRect`：

```
NSLog(@"bounds: %@", NSStringFromCGRect(label.bounds)); 
```

处理布局`UILabel`及其周围元素的最佳方法是创建一个自定义`UIView`子类以包含标签和其他元素，并覆盖其`layoutSubviews`方法来进行布局。

例如，假设我们想要标签和图像视图，并且我们希望图像视图与标签的底部边缘齐平。我们可以创建一个`UIView`名为的子类`ContainerView`：

```
@interface ContainerView : UIView

@property (nonatomic, strong) UILabel *label;
@property (nonatomic, strong) UIImageView *imageView;

@end 
```

我们可以将其用作标签的超级视图和图像视图。我们将依靠 ContainerView 来布置标签和图像，因此我们不需要指定它们的框架。我们还将依赖 ContainerView 将标签和图像视图添加为子视图。

```
ContainerView *superView = [[ContainerView alloc] initWithFrame:someRect];

UILabel *label = [[UILabel alloc] initWithFrame:CGRectZero];
label.text = someString;
label.lineBreakMode = UILineBreakModeWordWrap;
label.numberOfLines = 0;
superView.label = label;

UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"someImage"]];
superView.imageView = imageView;

[self.view addSubview:superView]; 
```

下面是我们如何实现 ContainerView（假设我们使用 ARC）：

```
@implementation ContainerView

@synthesize label = _label;
@synthesize imageView = _imageView; 
```

我们将覆盖 ContainerView 的“标签”设置器以将标签添加为子视图：

```
- (void)setLabel:(UILabel *)label {
    if (_label) {
         [_label removeFromSuperview];
    }
    _label = label;
    if (_label) {
        [self addSubview:label];
    }
} 
```

我们对 'imageView' setter 做同样的事情：

```
- (void)setImageView:(UIImageView *)imageView {
    if (_imageView) {
         [_imageView removeFromSuperview];
    }
    _imageView = imageView;
    if (_imageView) {
        [self addSubview:imageView];
    }
} 
```

有趣的部分是`layoutSubviews`方法。系统`layoutSubviews`在不同的时间将消息发送到视图，包括在它获得新的子视图之后以及它的大小发生变化时。

```
- (void)layoutSubviews {
    [super layoutSubviews];

    // Put the label's upper left corner at (20, 20) and make it as wide as I am,
    // minus a 20 point margin on each side.
    self.label.frame = CGRectMake(20, 20, self.bounds.size.width - 40, 10000);
    // Tell the label to make itself exactly large enough to fit its text.  This will
    // shrink its height.
    [self.label sizeToFit];

    // Now put the image view flush against the bottom edge of the label.
    CGSize imageSize = self.imageView.image.size;
    self.imageView.frame = CGRectMake(20, CGRectGetMaxY(self.label.frame),
        imageSize.width, imageSize.height);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T08:26:16.713

-(UILabel *)lable:(UILabel *)label textSize:(NSInteger)size lableText:(NSString *)str {

```
 lable.numberOfLines=1;
 CGSize maximumSize = CGSizeMake(320,1000);//SetMaximumSize....
 UIFont *dateFont = [UIFont fontWithName:@"arial" size:size];
 lable.font=dateFont;

CGSize dateStringSize = [str sizeWithFont:dateFont 
                           constrainedToSize:maximumSize 
                               lineBreakMode:UILineBreakModeWordWrap];
lable.text=str;

CGRect dateFrame = CGRectMake(5,0,dateStringSize.width,dateStringSize.height);
lable.frame = dateFrame;

return label; 
```

}

# facebook - Facebook SDK 从不设置 $user

> ID：11802410
> 
> 赞同：0
> 
> 时间：2012-08-03T19:54:20.790
> 
> 标签：facebook, authentication, facebook-php-sdk, facebook-authentication

我不知道我做错了什么。它总是向我显示 auth url，但我总是点击链接但仍然没有设置我的应用程序。

```
ini_set('include_path',"F:\fubolito\ajax.fubolito.py\inc");
include($_SERVER['DOCUMENT_ROOT'].'../ajax.fubolito.py/inc/config.global.php');
include('sdk/facebook.php');
$facebook = new Facebook(array('appId'  => $fb['app_id'],'secret' => $fb['secret'],
'cookie' => true,
));

$facebook->setAccessToken($_GET['code']);

$user = $facebook->getUser();

if(!$user)
echo '<a href="'.$facebook->getLoginUrl().'">Login</a>'; 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:47:42.150

```
<?php 
require 'src/facebook.php';
$facebook = new Facebook(array(
  'appId'  => 'YourAppId',
  'secret' => 'SecretKey',
  'cookie' => true, // enable optional cookie support
  ));
//  
try { $user = $facebook->getUser(); } catch (FacebookApiException $e) {  }
//
$access_token = $_SESSION['fb_YourAppID_access_token'];
if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');

  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}
if ($user) {
  $params = array (
  access_token => ''.$access_token.'',
  );
  $logoutUrl = $facebook->getLogoutUrl($params);
} else {
$params = array(
  scope => 'read_stream,publish_stream,publish_actions,read_friendlists',
  //redirect_uri => $url
  );
  $loginUrl = $facebook->getLoginUrl($params);
};

?> 
```

# group-by - 我需要在 where 子句的表达式中使用 X 列，也需要在创建列的表达式中使用 X 列，但我不想按它进行分组

> ID：11802417
> 
> 赞同：0
> 
> 时间：2012-08-03T19:55:09.730
> 
> 标签：group-by, case

我想使用下面的 SQL 语句

```
SELECT TRANSCRIPTDETAIL.PEOPLE_ID, 
MIN(TRANSCRIPTDETAIL.TranscriptDetailId) AS min_transcr_detail_id, 
MIN(TRANSCRIPTDETAIL.START_DATE) AS min_class_start, 
MIN(TRANSCRIPTDETAIL.ACADEMIC_YEAR) AS min_aca_year, 

MIN(CASE TRANSCRIPTDETAIL.ACADEMIC_TERM 
    WHEN 'SPRING' THEN TRANSCRIPTDETAIL.ACADEMIC_YEAR + '1-SPRING' 
        + COALESCE (ACADEMIC.ACADEMIC_RATING, N'') 
    WHEN 'SUMI' THEN TRANSCRIPTDETAIL.ACADEMIC_YEAR + '2-SUMI' 
        + COALESCE (ACADEMIC.ACADEMIC_RATING, N'') 
    WHEN 'FALL' THEN TRANSCRIPTDETAIL.ACADEMIC_YEAR + '2-FALL' 
    + COALESCE (ACADEMIC.ACADEMIC_RATING, N'') 
    ELSE TRANSCRIPTDETAIL.ACADEMIC_YEAR + '*-' 
            + transcriptdetail.academic_term + '*' 
            + COALESCE (ACADEMIC.ACADEMIC_RATING, N'') 
    END) AS student_min_term_track, 

MIN(COALESCE (dbo.ACADEMIC.ACADEMIC_RATING, N'')) AS min_track 

FROM dbo.TRANSCRIPTDETAIL AS TRANSCRIPTDETAIL 
INNER JOIN dbo.ACADEMIC 
ON TRANSCRIPTDETAIL.PEOPLE_CODE_ID = dbo.ACADEMIC.PEOPLE_CODE_ID 
    AND TRANSCRIPTDETAIL.ACADEMIC_YEAR = dbo.ACADEMIC.ACADEMIC_YEAR 
    AND TRANSCRIPTDETAIL.ACADEMIC_TERM = dbo.ACADEMIC.ACADEMIC_TERM 
    AND TRANSCRIPTDETAIL.TRANSCRIPT_SEQ = dbo.ACADEMIC.TRANSCRIPT_SEQ 
    AND TRANSCRIPTDETAIL.ACADEMIC_SESSION = dbo.ACADEMIC.ACADEMIC_SESSION 

WHERE (TRANSCRIPTDETAIL.ACADEMIC_YEAR >= '2011') 

GROUP BY TRANSCRIPTDETAIL.PEOPLE_ID, dbo.ACADEMIC.PEOPLE_CODE_ID, 
dbo.ACADEMIC.PROGRAM, dbo.ACADEMIC.COLLEGE 

ORDER BY TRANSCRIPTDETAIL.PEOPLE_ID, min_class_start, dbo.ACADEMIC.PROGRAM DESC 
```

当我将它放入 Microsoft SQL Server Manager 2008 时购买，它通过给我每年 1 行而不是每人、程序和大学 1 行来不断地将学年添加到组中。

我正在尝试做的事情是合法的，服务器管理器并不特别关心它，还是我不能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:07:19.497

Try this:

```
;WITH CTE AS 
(
SELECT t.PEOPLE_ID, 
a.PEOPLE_CODE_ID, 
a.PROGRAM, 
a.COLLEGE , 
t.TranscriptDetailId, 
t.START_DATE, 
t.ACADEMIC_YEAR, 

-- student term track
CASE t.ACADEMIC_TERM 
    WHEN 'SPRING' THEN t.ACADEMIC_YEAR + '1-SPRING' 
        + COALESCE (A.ACADEMIC_RATING, N'') 
    WHEN 'SUMI' THEN t.ACADEMIC_YEAR + '2-SUMI' 
        + COALESCE (A.ACADEMIC_RATING, N'') 
    WHEN 'FALL' THEN t.ACADEMIC_YEAR + '2-FALL' 
    + COALESCE (A.ACADEMIC_RATING, N'') 
    ELSE t.ACADEMIC_YEAR + '*-' 
            + t.academic_term + '*' 
            + COALESCE (A.ACADEMIC_RATING, N'') 
END AS student_term_track, 

-- track
COALESCE (a.ACADEMIC_RATING, N'') AS track 

FROM dbo.TRANSCRIPTDETAIL t 
INNER JOIN dbo.ACADEMIC a ON t.PEOPLE_CODE_ID = a.PEOPLE_CODE_ID 
    AND t.ACADEMIC_YEAR = a.ACADEMIC_YEAR 
    AND t.ACADEMIC_TERM = a.ACADEMIC_TERM 
    AND t.TRANSCRIPT_SEQ = a.TRANSCRIPT_SEQ 
    AND t.ACADEMIC_SESSION = a.ACADEMIC_SESSION 

WHERE (t.ACADEMIC_YEAR >= '2011') 
)

SELECT PEOPLE_ID, 
MIN(TranscriptDetailId) AS min_transcr_detail_id, 
MIN(START_DATE) AS min_class_start, 
MIN(ACADEMIC_YEAR) AS min_aca_year, 
MIN(student_term_track) AS student_min_term_track
MIN(track) ) AS min_track 
FROm CTE
GROUP BY PEOPLE_ID, PEOPLE_CODE_ID, PROGRAM, COLLEGE 
ORDER BY PEOPLE_ID, MIN(START_DATE), PROGRAM DESC 
```

# sql - 触发器更新延迟

> ID：11802419
> 
> 赞同：1
> 
> 时间：2012-08-03T19:55:16.693
> 
> 标签：sql, triggers, oracle10g, delay

我想创建一个更新触发器，它在同一表的say status2 列更新后更新数据库中say status1 列的值？

但这（更新）应该在延迟 3 分钟后发生。

请提供示例代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T20:13:31.713

这是我要做的：

1.  创建一个 PL/SQL 过程，扫描您的表以查找 3 分钟后已下达但未付款的订单。我假设您在表格中有时间戳或其他内容，因此您可以知道何时下订单。

2.  创建一个调用您的过程的[DBMS_SCHEDULER作业。](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_sched.htm)让作业每 3（或 2 或 1）分钟运行一次。

3.  现在，您所要做的就是正常插入表中。

# sql-server - “防止保存需要重新创建表的更改”负面影响

> ID：11802429
> 
> 赞同：266
> 
> 时间：2012-08-03T19:55:46.400
> 
> 标签：sql-server, sql-server-2008, database-design, sql-server-2005

**前言**

我今天正在修改 SQL Server 2008 中的一列，将数据类型从货币（18,0）更改为（19,2）。

我从 SQL Server 收到错误“您所做的更改需要删除并重新创建以下表”。

**在您争先恐后地回答之前，请阅读以下内容：**

> 我已经知道**工具 ► 选项 ► 设计器 ► 表和数据库设计器 ► 取消选中**“防止保存需要重新创建表的更改”框。 [![防止保存需要在五次单击中重新创建表的更改](../Images/0339cb0cdd2873bf9d10ad8672cd24a5.png)](https://i.stack.imgur.com/NqKim.gif) ......所以**不要**回答！

**实际问题**

我的实际问题是其他问题，如下所示：

这样做有什么负面影响/可能的缺点吗？

取消选中此框时，表实际上是否会自动删除并重新创建？

如果是这样，该表是否是源表的 100% 精确副本？

* * *

## 回答 #1

> 赞同：254
> 
> 时间：2014-06-19T16:21:30.637

**工具 --> 选项 --> Designers 节点 --> 取消选中“**防止保存需要重新创建表的更改**”。**

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2012-08-03T19:58:10.603

只有在 SQL Server 的 Management Studio 被编程为知道如何执行此操作的唯一方法时，才会删除并重新创建该表。

在某些情况下，它会在不需要时执行此操作，但也存在您在 Management Studio 中所做的编辑*不会*删除并重新创建的情况，因为它不必这样做。

问题是枚举所有案例并确定它们落在哪一边将是相当乏味的。

这就是为什么我喜欢[`ALTER TABLE`](https://docs.microsoft.com/en-us/sql/t-sql/statements/alter-table-transact-sql)在查询窗口中使用，而不是隐藏他们正在做的事情的视觉设计师（坦率地说有错误）——我确切地知道会发生什么，我可以为唯一可能发生的情况做准备是删除并重新创建表（这比 SSMS 对您执行此操作的频率要少一些）。

> 这样做有什么负面影响/可能的缺点吗？

当然。如果您可以自己编写更改脚本而不重建整个表，那就更好了 - 考虑表是 10TB 并且数据库记录大量的情况（想想同步 AG、更改跟踪、复制、编写不佳的触发器）和表被高度访问-这是灾难的潜在秘诀。如果您的更改是您可以应用在线提示或添加列并批量复制数据而不是 GUI 将执行的全部或全部操作，那么这会更好。

> 取消选中此框时，表实际上是否会自动删除并重新创建？

它*可能*。有一系列方案，结果取决于 SSMS 的版本、SQL Server 的版本，有时甚至是版本。您可以通过选中该框并尝试首先将更改*应用于无意义的数据库副本来进行*检查，但是恕我直言，使用实际的 ALTER TABLE 脚本而不是尖尖的点击 GUI 是可行的方法。

> 如果是这样，该表是否是源表的 100% 精确副本？

是的，如果 SSMS 必须重建表，它在完成后将是一个 100% 精确的副本（当然更改除外），但这可能是下周三。该过程创建表的新版本，将所有数据复制到其中，然后删除旧表并重命名新表。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-04T11:27:10.477

**[参考](http://support.microsoft.com/kb/956176)**- 关闭此选项可以帮助您避免重新创建表，它也可能导致更改丢失。例如，假设您启用 SQL Server 2008 中的更改跟踪功能来跟踪对表的更改。当您执行导致重新创建表的操作时，您会收到“症状”部分中提到的错误消息。但是，如果关闭此选项，则在重新创建表时会删除现有的更改跟踪信息。因此，Microsoft 建议您不要通过关闭该选项来解决此问题。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-09-04T20:47:50.297

只有在以下情况下，SQL Server 才会删除并重新创建表：

*   添加新列
*   更改列的 Allow Nulls 设置
*   更改表格中的列顺序
*   更改列数据类型

使用 ALTER 更安全，因为如果在您重新创建表时元数据丢失，您的数据将会丢失。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-10-15T23:31:51.807

是的，这有负面影响：

如果您编写出被此标志阻止的更改，您会得到类似下面的脚本（我只是将联系人中的 ID 列转换为自动编号的 IDENTITY 列，但该表具有依赖关系）。请注意以下运行时可能发生的潜在错误：

1.  甚至微软警告这可能会导致数据丢失（该评论是自动生成的）！
2.  在一段时间内，不强制执行外键。
3.  如果您在 ssms 中手动运行它并且“ EXEC('INSERT INTO ”失败，并且您让以下语句运行（默认情况下它们会运行，因为它们被“go”拆分），那么您将插入 0 行，然后删除旧表。
4.  如果这是一张大表，则插入的运行时间可能会很大，并且事务持有模式修改锁，因此会阻塞*很多*东西。

--

```
/* To prevent any potential data loss issues, you should review this script in detail before running it outside the context of the database designer.*/

BEGIN TRANSACTION
GO
ALTER TABLE raw.Contact
    DROP CONSTRAINT fk_Contact_AddressType
GO
ALTER TABLE ref.ContactpointType SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE raw.Contact
    DROP CONSTRAINT fk_contact_profile
GO
ALTER TABLE raw.Profile SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
CREATE TABLE raw.Tmp_Contact
    (
    ContactID int NOT NULL IDENTITY (1, 1),
    ProfileID int NOT NULL,
    AddressType char(2) NOT NULL,
    ContactText varchar(250) NULL
    )  ON [PRIMARY]
GO
ALTER TABLE raw.Tmp_Contact SET (LOCK_ESCALATION = TABLE)
GO
SET IDENTITY_INSERT raw.Tmp_Contact ON
GO
IF EXISTS(SELECT * FROM raw.Contact)
     EXEC('INSERT INTO raw.Tmp_Contact (ContactID, ProfileID, AddressType, ContactText)
        SELECT ContactID, ProfileID, AddressType, ContactText FROM raw.Contact WITH (HOLDLOCK TABLOCKX)')
GO
SET IDENTITY_INSERT raw.Tmp_Contact OFF
GO
ALTER TABLE raw.PostalAddress
    DROP CONSTRAINT fk_AddressProfile
GO
ALTER TABLE raw.MarketingFlag
    DROP CONSTRAINT fk_marketingflag_contact
GO
ALTER TABLE raw.Phones
    DROP CONSTRAINT fk_phones_contact
GO
DROP TABLE raw.Contact
GO
EXECUTE sp_rename N'raw.Tmp_Contact', N'Contact', 'OBJECT' 
GO
ALTER TABLE raw.Contact ADD CONSTRAINT
    Idx_Contact_1 PRIMARY KEY CLUSTERED 
    (
    ProfileID,
    ContactID
    ) 

GO
ALTER TABLE raw.Contact ADD CONSTRAINT
    Idx_Contact UNIQUE NONCLUSTERED 
    (
    ProfileID,
    ContactID
    ) 

GO
CREATE NONCLUSTERED INDEX idx_Contact_0 ON raw.Contact
    (
    AddressType
    ) 
GO
ALTER TABLE raw.Contact ADD CONSTRAINT
    fk_contact_profile FOREIGN KEY
    (
    ProfileID
    ) REFERENCES raw.Profile
    (
    ProfileID
    ) ON UPDATE  NO ACTION 
     ON DELETE  NO ACTION 

GO
ALTER TABLE raw.Contact ADD CONSTRAINT
    fk_Contact_AddressType FOREIGN KEY
    (
    AddressType
    ) REFERENCES ref.ContactpointType
    (
    ContactPointTypeCode
    ) ON UPDATE  NO ACTION 
     ON DELETE  NO ACTION 

GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE raw.Phones ADD CONSTRAINT
    fk_phones_contact FOREIGN KEY
    (
    ProfileID,
    PhoneID
    ) REFERENCES raw.Contact
    (
    ProfileID,
    ContactID
    ) ON UPDATE  NO ACTION 
     ON DELETE  NO ACTION 

GO
ALTER TABLE raw.Phones SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE raw.MarketingFlag ADD CONSTRAINT
    fk_marketingflag_contact FOREIGN KEY
    (
    ProfileID,
    ContactID
    ) REFERENCES raw.Contact
    (
    ProfileID,
    ContactID
    ) ON UPDATE  NO ACTION 
     ON DELETE  NO ACTION 

GO
ALTER TABLE raw.MarketingFlag SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
BEGIN TRANSACTION
GO
ALTER TABLE raw.PostalAddress ADD CONSTRAINT
    fk_AddressProfile FOREIGN KEY
    (
    ProfileID,
    AddressID
    ) REFERENCES raw.Contact
    (
    ProfileID,
    ContactID
    ) ON UPDATE  NO ACTION 
     ON DELETE  NO ACTION 

GO
ALTER TABLE raw.PostalAddress SET (LOCK_ESCALATION = TABLE)
GO
COMMIT 
```

# java - 获取文本并使其成为字符串

> ID：11802434
> 
> 赞同：-2
> 
> 时间：2012-08-03T19:56:04.103
> 
> 标签：java, string, text, input

我正在做一个项目，只是想进行一些练习编程。我遇到了一个颠簸。

我正在尝试从组织如下的文本文件中获取名称：`["name", "name", "name", "name"]`并将每个名称转换为不带标点符号的名称，并将它们转换为`ArrayList`.

一旦名称在列表中，我将使用我拥有的另一段代码对它们进行排序。任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:02:15.597

您可以[`String#split`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)在`,`分隔符上并从结果数组项[中删除](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)所有`"[]`字符。

`ArrayList`这将从数组中创建一个：

```
List<String> list = new ArrayList<String>(Arrays.asList(stringArray)); 
```

**剧透**

```
String names = "[\"Tony Parker\", \"John Smith\", \"Michelle\", \"David\"]";
System.out.println(Arrays.asList(names.replaceAll("[\\[\\]\"]", "").split(", "))); 
```

*   用空字符串替换所有不需要的字符
*   将序列“，”上的字符串拆分为一个数组
*   将数组转换为列表（实际上是：创建数组的列表*视图*）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:02:44.227

干得好。这向您展示了如何获取名称字符串并将每个名称放入数组列表的基础知识

```
import java.util.ArrayList;
public class Practice 
{
    public static void main(String[] args)
    {
        // Initialize Variables
        String names = "['Tony Parker', 'John Smith', 'Michelle', 'David']";
        ArrayList<String> namesList = new ArrayList<String>();
        int startingPoint = 0;

        // Replace All Unwanted Characters In String With White Space
        names = names.replace("[", "").replace("]", "").replace("'", "");

        // Trim The String Down And Then Add A Comma At The End
        names.trim();
        names = names + ",";

        // For Each Comma That Is Encountered, Add The Name into The ArrayList
        for (int i = 0; i < names.length(); i++)
        {
            if (names.charAt(i) == ',')
            {
                namesList.add(names.substring(startingPoint, i));
                startingPoint = i +1;
            }
        }

        // Print Out The Array List Of Names
        System.out.println(namesList);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T20:03:26.863

您真的应该在这里阅读如何提出更好的问题，但这里有两个链接可以帮助您入门：

[http://www.leepoint.net/notes-java/io/10file/10readfile.html](http://www.leepoint.net/notes-java/io/10file/10readfile.html)

[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split(java.lang.String](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split(java.lang.String) )

# python - 无标题 wxPython 窗口隐藏任务栏

> ID：11802435
> 
> 赞同：2
> 
> 时间：2012-08-03T19:56:12.937
> 
> 标签：python, windows, wxpython, taskbar

这段代码：

```
import wx

app = wx.App()
frame = wx.Frame(None, style = wx.DEFAULT_FRAME_STYLE & ~wx.CAPTION)
frame.Maximize()
frame.Show()
app.MainLoop() 
```

生成一个覆盖整个屏幕的框架，包括我的任务栏。有没有办法让它只占用任务栏不占用的屏幕？

*   操作系统：Windows XP

*   蟒蛇：2.7.3

*   WxPython：2.9.3.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:34:58.957

据我所知，我会说不，你不能用 Maximize 方法来做到这一点。您可以通过获取屏幕尺寸并将框架的抓取设置为减去任务栏空间来伪造它。您可能必须找到一种方法来获取任务栏的位置，因为有些人不会将其留在底部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-05T02:22:25.477

获取没有任务栏的工作区位置和大小：

```
c_x, c_y, c_w, c_h = wx.ClientDisplayRect() 
```

设置位置和大小：

```
frame = wx.Frame(None, pos=(c_x, c_y), size=(c_w, c_h),
                      style=wx.DEFAULT_FRAME_STYLE & ~wx.CAPTION & ~wx.RESIZE_BORDER) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-14T18:01:15.390

我想在这里放置一个后续解决方案，因为上述问题似乎仍然有效，并且问题也出现在 C++ 中。

一个可能且相当通用的解决方案是**在最大化之前应用****默认**框架样式，然后恢复为您的**自定义**（无标题）样式。

 ****成功测试的 C++ 版本内容如下：

```
frame->SetWindowStyle(wxDEFAULT_FRAME_STYLE);
frame->Maximize(true);
frame->SetWindowStyle(wxRESIZE_BORDER); 
```

在 Windows 10 下，这会导致标题栏短暂闪烁，但效果似乎很小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-19T04:07:19.840

对于未来的人来说。尝试使用 ShowFullScreen(True)

我是 wx 的新手，但尝试使用 self.ShowFullScreen(True) 或 frame.ShowFullScreen(True)****

# python - Pythonic 在列表之间交换的方式？

> ID：11802436
> 
> 赞同：3
> 
> 时间：2012-08-03T19:56:15.187
> 
> 标签：python, list

我想要一个城市列表和一个邮政编码列表，以及对应的位置（如果纽约市在城市列表中排名第一，则纽约州的代码将在代码列表中排名第一）。假设我想设置`x`为纽约市的邮政编码。我知道可以这样做：

```
y = citylist.index('New York')
x = postcodelist[y]
xstring = str(x) 
```

但是，有没有一种方法可以使列表相等并在一行中执行此操作，例如：

```
x = postcodelist.citylist.index('New York').string 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T19:59:17.100

如果我理解正确，您有两个并行列表，您希望将它们本质上视为键列表和值列表。如果是这样，您可以执行以下操作：

```
>>> places = ['New York', 'Texas', 'California']
>>> zips = ['01010', '70707', '90909']
>>> place_zip_map = dict(zip(places, zips))
>>> place_zip_map['New York']
'01010' 
```

基本上，将您的地点列表作为您的键，将您的邮政编码列表作为您的值，用于`zip`将它们组合成一系列键值对，然后用于`dict`创建将它们相互映射的字典。

**编辑**：如果您想以另一种方式创建字典，将邮政编码/邮编映射到您可以使用相同过程的地方，只需翻转`zip`. 然后，如果您想要一个可以查找的结构，则可以将两个结果字典合并为一个。只要没有与邮政编码同名的地方，就不应该发生冲突。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T20:04:45.817

您可以使用[pyzipcode](http://pypi.python.org/pypi/pyzipcode/)：

```
>>> from pyzipcode import ZipCodeDatabase
>>> zcdb = ZipCodeDatabase()
>>> zcdb['10001'].city
u'New York'
>>> len(zcdb.find_zip(city="New York"))
167
>>> zcdb.find_zip(city="New York")[0].zip
u'10001'
>>> zcdb.find_zip(city="New York")[1].zip
u'10002'
>>> zcdb.find_zip(city="New York")[2].zip
u'10003' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T19:59:09.660

如果您以正确的顺序生成列表，您可以使用`zip`它们一起迭代它们：

```
for city, zipcode in zip(citylist, postcodelist):
  print city, zipcode 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T19:58:50.733

你的意思是这样吗？

```
x = str(postcodelist[citylist.index('New York')]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T19:59:49.503

```
str(postcodelist[citylist.index('New York')]) 
```

但是，我会注意到您可能要考虑不使用这样的并行列表。通常最好有一个带有“name”和“zip”属性的对象列表。

# python - Python 和 CPU 使用率

> ID：11802437
> 
> 赞同：3
> 
> 时间：2012-08-03T19:56:17.957
> 
> 标签：python, cpu

我使用 Python 编写了一段非常耗时的代码（包含大量递归）。我正在测试代码的运行时，我注意到无论代码变得多么复杂，Python 都不会消耗我 CPU 的全部计算能力。我在带有 Intel Dual Core 的 Windows7 上运行 Python，而 Python 从不使用超过 1 个 CPU。基本上一个 CPU 正在运行，而另一个 CPU 处于空闲状态。

有人可以解释一下背景中发生的事情吗？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T20:02:44.413

您的脚本在单个进程中运行，因此在单个处理器上运行。Windows 调度程序可能会非常频繁地将其从一个核心移动到另一个核心，但它不能一次在多个地方运行单个进程。

如果您想使用更多的 CPU 资源，则需要弄清楚如何拆分工作负载，以便可以在多个进程中运行代码的多个实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T21:23:45.637

实际上，多线程 Python 应用程序不足以使用超过 1 个 CPU 内核。Python 使用一种称为“全局解释器锁”(GIL) 的结构。您的 Python 实例中的所有代码都必须获得此锁，这意味着在您的 Python 应用程序中，即使您有多个处理器并且是多线程的，在任何给定时间点都只会执行一个代码线程

也就是说 - 如果您使用多处理模块，您可以使用多个核心：

```
import multiprocessing

def run():
    x = 1+1
    save(x)

if __name__=="__main__":
    for i in range(100):
        p = multiprocessing.Process(target=run)
        p.start() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T20:01:59.303

如果您的 python 应用程序不是多线程的，则它不会使用超过 1 个 CPU 内核来执行。

# python - 当冻结为可执行文件时，多处理会运行主窗口的新实例

> ID：11802438
> 
> 赞同：9
> 
> 时间：2012-08-03T19:56:22.320
> 
> 标签：python, multiprocessing, pyinstaller

一年前我已经问过[这个确切的问题。](https://stackoverflow.com/questions/7067787/python-multiprocessing-processes-become-copies-of-the-main-process-when-run-fr)我的应用程序使用 Python 的多处理模块，该模块在从命令行运行时可以正常工作，但是当我使用 Pyinstaller 将其打包为可执行文件时，多个进程会作为原始实例的新实例生成，而不是运行它们应该运行的函数。上次给我的建议以及我在其他地方看到的建议是`multiprocessing.freeze_support(`在我的块开始时调用 )，`if __name__ == "__main__":`我一直在这样做，但由于某种原因我突然又遇到了这个问题。还有什么可能导致这种情况？

更新：我已经确认 freeze_support() 行的存在根本不会影响这个问题。评论它或取消评论它会给出完全相同的行为：主窗口的副本被打开并坐在那里什么都不做。这是在我的主要 Python 模块的最末端调用它的块：

```
if __name__ == '__main__':
    freeze_support()

    # (A bunch of commented-out lines)
    main() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T14:42:25.027

我是一个白痴。（好吧，也许不是，但这完全是我的错）多处理通过使用两个附加参数运行它来向进程发出它是子进程的信号：标志`--multiprocessing-fork`和来自父进程的管道的数字句柄。`multiprocessing.freeze_support`检查此标志的存在以确定是运行为子进程指定的函数还是正常程序。无论如何，我解析命令行参数的方法改变了`sys.argv`，它摆脱了标志并导致子进程像新的父进程一样工作。

所以，这个故事的寓意是，**永不改变`sys.argv`。**我切换到使用`optparse`，它抱怨标志的存在，所以我不得不向它传递一个过滤的参数列表。一旦我这样做了，问题就消失了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-23T22:24:03.380

`setup.py`可能导致此问题的样式程序的其他问题：

如果你使用入口点来启动你的程序，你可能需要把`multiprocessing.freeze_support()`.`main()`

例如[Pyinstaller_setuptools](https://pypi.org/project/pyinstaller-setuptools/)`main()`直接调用，跳过`if __name__ == '__main__':`块中的所有语句。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-19T11:05:26.963

我遇到了同样的问题，但我已经解决了在代码中放置 if 子句以避免每个 kivy 代码在新进程中运行的问题。例如：

```
if __name__ == '__main__': # to avoid new window with a new process
    multiprocessing.freeze_support() # support multiprocessing in pyinstaller
    from kivy.lang.builder import Builder
    from kivy.clock import Clock
    from kivy.uix.popup import Popup
    from kivy.uix.textinput import TextInput
    from kivy.uix.scatterlayout import ScatterLayout
    from kivy.graphics.transformation import Matrix
    from kivy.uix.scatter import Scatter
    from kivy.uix.screenmanager import ScreenManager, Screen
    from kivy.properties import BooleanProperty, ListProperty, BoundedNumericProperty, StringProperty, NumericProperty
    from kivy.uix.boxlayout import BoxLayout
    from kivy.app import App
    from kivy.uix.behaviors import ButtonBehavior
    from kivy.uix.image import Image
    from kivy.core.window import Window
```

除此之外，我所有使用 kivy 的类都需要放在同一个 if 子句中，以避免主程序中的错误。

我的结论是 kivy、多处理和 pyinstaller 的一些交互使新窗口弹出。如果直接从 python 运行代码，则不会显示问题。就我而言，我已经在使用一个 if 子句来导入 kivy.core.window，并且直接从 python 运行代码效果很好，但在 pyinstaller 之后却没有，即使使用 freeze_support。

我希望它可以帮助某人。

# vbscript - 在 Windows XP 的 VB 脚本中的任务计划程序中创建任务

> ID：11802440
> 
> 赞同：1
> 
> 时间：2012-08-03T19:56:26.923
> 
> 标签：vbscript

在任务计划程序中找到了一个 Visual Basic 脚本来创建任务。然而，即使它说它正在运行，它也不会工作。我认为这是因为它使用了不同的用户名。如果我在任务计划程序中手动创建一个任务，它需要我的密码并使用不同的用户名。最重要的是，我似乎无法找到一种方法来设置日期，而不仅仅是时间：

```
Set ObjShell = CreateObject("WScript.Shell")
objShell.run "AT 10:00 C:\Test.txt"
Set ObjShell = nothing 
```

如果可能的话，我想拥有最短和最简单的代码。我不是VB专家，所以请多多包涵。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T13:16:09.560

不幸的是，这些脚本都没有解决我自己的问题，因为我需要以 Windows XP 中的当前用户身份安装任务。我编写并测试了这些 VBScript 以尝试做到这一点，但它们确实添加了任务并且可以正常工作。

该函数将任务添加到在系统帐户下运行的任务调度程序中。我仅在 Windows XP 中对此进行了测试，但我猜它在其他版本的 Windows 中仍然有效。您可能需要对其进行一些调整以使其适合您的需求。基于[此](http://blogs.technet.com/b/heyscriptingguy/archive/2004/09/22/how-can-i-manage-scheduled-tasks-using-scripts.aspx)。

```
Function ScheduleTaskWinXP(taskName)

    Dim strComputer
    strComputer = "."

    Dim objWMIService
    Set objWMIService = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & _
        strComputer & "\root\cimv2")

    ' Win32_ScheduledJob class
    ' http://msdn.microsoft.com/en-us/library/windows/desktop/aa394399(v=vs.85).aspx

    Dim objNewJob
    Set objNewJob = objWMIService.Get("Win32_ScheduledJob")

    ' Create method of the Win32_ScheduledJob class
    ' http://msdn.microsoft.com/en-us/library/windows/desktop/aa389389(v=vs.85).aspx

    Dim errJobCreated
    errJobCreated = objNewJob.Create("Notepad.exe", _
        "********123000.000000-420", True , _
        1 OR 4 OR 16, , , taskName) 

    Out errJobCreated
End Function 
```

此功能在 Windows 7 中有效，但在 Windows XP 中无效。我没有测试其他 Windows 版本。基于[此](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384054%28v=vs.85%29.aspx)。

```
Function ScheduleTaskWin7(taskName)

    ' Task Scheduler Scripting Objects
    ' http://msdn.microsoft.com/en-us/library/windows/desktop/aa383607(v=vs.85).aspx

    '------------------------------------------------------------------
    ' This sample schedules a task to start on a weekly basis.
    '------------------------------------------------------------------

    ' A constant that specifies a weekly trigger.
    const TriggerTypeWeekly = 3
    ' A constant that specifies an executable action.
    const ActionTypeExec = 0   

    '********************************************************
    ' Create the TaskService object.
    Dim service
    Set service = CreateObject("Schedule.Service")
    call service.Connect()

    '********************************************************
    ' Get a folder to create a task definition in. 
    Dim rootFolder
    Set rootFolder = service.GetFolder("\")

    ' The taskDefinition variable is the TaskDefinition object.
    Dim taskDefinition
    ' The flags parameter is 0 because it is not supported.
    Set taskDefinition = service.NewTask(0) 

    '********************************************************
    ' Define information about the task.

    ' RegistrationInfo object
    ' http://msdn.microsoft.com/en-us/library/windows/desktop/aa382100(v=vs.85).aspx

    ' Set the registration info for the task by 
    ' creating the RegistrationInfo object.
    Dim regInfo
    Set regInfo = taskDefinition.RegistrationInfo
    regInfo.Description = "Start Notepad weekly."
    regInfo.Author = "Administrator"

    ' Set the task setting info for the Task Scheduler by
    ' creating a TaskSettings object.
    Dim settings
    Set settings = taskDefinition.Settings
    settings.Enabled = True
    settings.StartWhenAvailable = True
    settings.Hidden = False

    '********************************************************
    ' Create a weekly trigger. Note that the start boundary 
    ' specifies the time of day that the task starts, the 
    ' day-of-week specfies on what day of the week the task 
    ' runs, and the interval specifies what weeks the task runs.
    Dim triggers
    Set triggers = taskDefinition.Triggers

    Dim trigger
    Set trigger = triggers.Create(TriggerTypeWeekly)

    ' Trigger variables that define when the trigger is active 
    ' and the time of day that the task is run. The format of 
    ' this tims is YYYY-MM-DDTHH:MM:SS
    Dim startTime, endTime

    Dim time
    startTime = "2006-05-02T08:00:00"  'Task runs at 8:00 AM
    endTime = "2015-05-02T08:00:00"

    Out "startTime :" & startTime
    Out "endTime :" & endTime

    trigger.StartBoundary = startTime
    trigger.EndBoundary = endTime
    trigger.DaysOfWeek = 1
    trigger.WeeksInterval = 1    'Task runs every week.
    trigger.Id = "WeeklyTriggerId"
    trigger.Enabled = True

    '***********************************************************
    ' Create the action for the task to execute.

    ' Add an action to the task to run notepad.exe.
    Dim Action
    Set Action = taskDefinition.Actions.Create( ActionTypeExec )
    Action.Path = "C:\Windows\System32\notepad.exe"

    Out "Task definition created. About to submit the task..."

    '***********************************************************
    ' Register (create) the task.

    call rootFolder.RegisterTaskDefinition(taskName, taskDefinition, 6, , , 3)

    Out "Task submitted."

End Function 
```

如果你想在当前用户下创建一个任务并且不关心 Windows XP，这个 shell 命令会做：

```
schtasks /create /tn "TaskName" /tr "Executable.exe" /sc HOURLY /f 
```

`/f`在 Windows XP 中无效，所以不要使用它。不幸的是，在 Windows XP 中，这将提示输入当前用户的密码。

```
schtasks /create /tn "TaskName" /tr "Executable.exe" /sc HOURLY 
```

[此处](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/schtasks.mspx?mfr=true)和[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/bb736357%28v=vs.85%29.aspx)以及许多其他地方都有此命令的一些文档。

# android - Android：AsyncThread 强制我关闭我的应用程序

> ID：11802444
> 
> 赞同：0
> 
> 时间：2012-08-03T19:56:38.807
> 
> 标签：android, multithreading

我对 Android 比较陌生。我正在尝试使用 AsyncTask 但在执行线程后，我的应用程序强制我关闭它。在我的异步线程中，我在服务器端执行 php，它保存来自 Android 传感器的数据。任何帮助将不胜感激。谢谢

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);        
 .....
 final FuncionsActivity functions = new FuncionsActivity();
 if(something)
    functions.execute(nameValuePairs); 
 .....
  }

 private class FuncionsActivity extends 
       AsyncTask<ArrayList<NameValuePair>, Integer, Integer > {
    @Override
    protected Integer doInBackground(ArrayList<NameValuePair>... data) {
         // 1) Connect via HTTP. 2) Encode data. 3) Send data.
        try
        {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new     

                  HttpPost("http://.../saveCoordinates.php");                           
            //HttpPost httppost = new 
            httppost.setEntity(new UrlEncodedFormEntity(data[0]));
            HttpResponse response = httpclient.execute(httppost);
            Log.i("postData", response.getStatusLine().toString());
            this.onPostExecute(null);
                //Could do something better with response.
        }
        catch(Exception e)
        {
            Log.e("log_tag", "Error1:  " + e.toString());
        }
      return 0;     
      }

      protected void onProgressUpdate(Integer... item){
            Log.d("TestP", item[0] + " item has been processed");
      }

      protected void onPostExecute(Integer result){
            Log.d("TestP", "AsyncTask returned : " + result);
      }
 }

@Override
protected void onDestroy() {            
    super.onDestroy(); // Move to bottom
    //System.runFinalizersOnExit(true);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:07:33.853

You don't have to call `onPostExecute()` yourself, the system will do it with whatever you return in `doInBackground()`.

I guess changing the line to `return null` like the other answer says, could fix the issue, but it's probably not what you want. You probably want to return an integer, extracted from the response, or something else.

Another strange thing in your code is `data[0]`, data is an ArrayList, does that compile? You also can't be defining a new variable data since this would produce duplicate variable compiler error.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:00:24.707

尝试改变这个：

```
this.onPostExecute(null); 
```

对此：

```
return null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T20:03:38.243

为什么您尝试在后台方法中调用 post Execute 方法。它是自动调用的。删除它并尝试

希望能帮助到你

# android - Android 布局：固定位置上的 1 个 imageview 和 2 个 imageview 填满剩余空间

> ID：11802449
> 
> 赞同：1
> 
> 时间：2012-08-03T19:57:12.063
> 
> 标签：android, android-layout, imageview, android-relativelayout

我做了一个看起来像这样的设计：

![在此处输入图像描述](../Images/0303e4fae9fab62f8916463f01e18ac7.png)

问题是创建应该指向当前选择的类别的小三角形。本质上，没有背景和东西，它看起来像这样：

![在此处输入图像描述](../Images/4fb425c70567d770a5d27710cfe32004.png)

在类别文本下方，放置了一个透明的蓝色矩形，应在其右侧放置“指针”。我想象这个指针被放置在一个包含以下 imageview 元素的相对布局中：

1.  一个透明的矩形，填充从顶部到 imageview 2 的空间

2.  包含指针的图像视图。这只是一个带有完全透明指针矩形的正方形图像。它具有固定的宽度和高度，并且使用顶部和左侧边距位于固定/不同的位置。

3.  一个透明的矩形，填充从 2 到底部的空间

我尝试使用相对布局创建它，但我无法让它工作。似乎一次只能使用 1 个高度可变的元素。我也尝试使用垂直布局，但根本没有这样做。

实现我的设计目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:33:23.980

您可以执行以下操作。使用下面的示例，您必须在代码中管理指针 ImageView 的选定可见性和选定的文本颜色。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#669999"
    android:gravity="center"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight=".1"
        android:gravity="bottom|right"
        android:orientation="vertical" >

        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/item_text"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:gravity="center_vertical|right"
                android:text="Favourites"
                android:textColor="#33CCFF"
                android:textSize="42sp" />

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/item_text"
                android:background="@drawable/pointer"
                android:visibility="invisible" />
        </RelativeLayout>

        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/item_text"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:gravity="center_vertical|right"
                android:text="Coffee"
                android:textColor="#FFFF00"
                android:textSize="42sp" />

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/item_text"
                android:background="@drawable/pointer" />
        </RelativeLayout>

        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/item_text"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:gravity="center_vertical|right"
                android:text="Milk"
                android:textColor="#33CCFF"
                android:textSize="42sp" />

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/item_text"
                android:background="@drawable/pointer"
                android:visibility="invisible" />
        </RelativeLayout>

        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/item_text"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:gravity="center_vertical|right"
                android:text="Instant"
                android:textColor="#33CCFF"
                android:textSize="42sp" />

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/item_text"
                android:background="@drawable/pointer"
                android:visibility="invisible" />
        </RelativeLayout>
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight=".9"
        android:background="#33CCFF" >
    </LinearLayout>

</LinearLayout> 
```

它将如下所示：

![屏幕模型](../Images/60e8a9630fcd3f39b8de1c358bef83b5.png)

此布局中仅使用一个图像。那就是我为这个例子准备的pointer.png。

![指针.png](../Images/8d4197fdec537cc6298bc135874318c7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:12:53.913

创建图像的 9patch png 版本。这是只有某些区域可以拉伸的图像。android SDK[中有一个工具看看](http://developer.android.com/tools/help/draw9patch.html)。（您需要使箭头左侧的区域成为唯一延伸的部分）。

然后使用一个框架布局，里面有两个Layouts；一个用于亮蓝色背景，一个用于指针。例如：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width/height/ect...>

    <LinearLayout android:id="BlueBackground"
                  android:background="brightblue"
                  android:layout_width/height/ect.../>

    <LinearLayout android:id="Pointer"
                  android:background="pointer9patch"
                  android:layout_width/height/ect...>
    //The List
    </LinearLayout>

 </FrameLayout> 
```

**编辑：**

如果您希望指针菜单只占用屏幕的某个部分，您可以使用水平线性布局将屏幕一分为二：

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width/height/ect...>

    <ImageView android:id="BlueBackground"
               android:layout_width/height/ect...>
    <LinearLayout android:id="HSplitLayout"
                  orientation="horizontal">

        <LinearLayout android:id="Pointer"
                   android:layout_width/height/ect...>
        //The List
        </LinearLayout>

        <ContentOnRight...>

    </LinearLayout>

 </FrameLayout> 
```

# objective-c - NSMutableAttributedString KVO 未触发通知

> ID：11802451
> 
> 赞同：0
> 
> 时间：2012-08-03T19:57:18.970
> 
> 标签：objective-c, key-value-observing

我有一个我似乎无法解决的困境。但是，我通过绑定到模型上的属性应用了一些 KVO，因为我没有通过点符号分配 KVO 不会被触发。相反，我像这样附加：

```
[[self messagesString] appendAttributedString:attrVal]; 
```

`messagesString`是一个`NSMutableAttributedString`。当然这不会启动 KVO 通知，所以我改为执行以下操作：

```
[self willChangeValueForKey:@"messagesString"];
[[self messagesString] appendAttributedString:attrVal];
[self didChangeValueForKey:@"messagesString"]; 
```

但我没有运气。如果我执行以下操作：

```
NSAttributedString *attrVal = [[NSAttributedString alloc] initWithString:str];
[self willChangeValueForKey:@"messagesString"];
[[self messagesString] appendAttributedString:attrVal];
[self didChangeValueForKey:@"messagesString"];
messagesString = [[NSMutableAttributedString alloc] initWithAttributedString:messagesString]; 
```

然后它工作正常。但是，如果我删除附加行，它就不起作用。似乎它必须按照这个顺序，包括这些东西，才能工作。

我错过了什么如此明显的启动KVO通知？

**编辑**

所以，我已经从这个类声明中删除了所有不相关的东西，但这是我所指的主要内容：

```
#import <Foundation/Foundation.h>

@interface Channel : NSObject {
    NSString* name;
    NSMutableAttributedString *messagesString;
}

@property (retain) NSString* name;
@property (retain) NSMutableAttributedString* messagesString;

- (id)initWithName:(NSString*)name;
- (void)appendString:(NSString*)str;

@end 
```

以及实施

```
#import "Channel.h"

@implementation Channel

@synthesize name;
@synthesize messagesString;

- (id)initWithName:(NSString *)channelName {
    self = [super init];

    if (self)
    {
        [self setName:channelName];
        messagesString = [[NSMutableAttributedString alloc] initWithString:@" "];
    }

    return self;
}

- (void)appendString:(NSString *)str {
     NSAttributedString *attrVal = [[NSAttributedString alloc] initWithString:str];
    [self willChangeValueForKey:@"messagesString"];
    [[self messagesString] appendAttributedString:attrVal];
    [self didChangeValueForKey:@"messagesString"];
    messagesString = [[NSMutableAttributedString alloc] initWithAttributedString:messagesString];
}

@end 
```

我这样做`initWithString`是`NSMutableAttributedString`因为如果它还没有空字符串（`appendAttributedString`如果在实例化时没有设置任何值，则有问题），您使用此类实例的方式会有些奇怪。

这是在一个完全独立的类中将字符串附加到它的方式：

```
Channel *c = [channels valueForKey:@"server"];
[c appendString:val]; 
```

最后，我的 UI 在 Attributed String 属性上有一个绑定，`NSTextView`可以转到`self.currentChannel.messagesString`. 我现在不在我的 Mac 上，所以我无法显示这些位。

`appendString`我班上的方法`Channel`看起来就像是因为我在玩弄它来让它工作。非常玩代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:11:54.110

我创建了一个项目并使用它。如果您决定使用手动 KVO（使用自动...类方法声明），那么当您在该 ivar/property 上使用“setValue”时，您将不会获得 kvo（所以我的原始答案不正确）。

我创建了一个测试项目，然后使用了一个可变字符串并验证了是的，当我使用将 appendString: 包裹在可变字符串周围的 will/did 消息时，我确实得到了 KVO。这验证了您显示的代码实际上应该可以工作。然后我注释掉了该代码并直接用另一个字符串设置了可变字符串，并且根本没有得到任何 KVO（如预期的那样）。

在这一点上，我只能推测你的属性、你的类或你的 observeValueForKeypath: 方法有一些非常不寻常的地方来监视这些变化。

编辑：问题是 NSTextView。它维护自己的存储系统，因此实际上当您想要将数据附加到它时，您将直接执行此操作，并且与您的属性字符串的绑定应该更新（而不是相反）。当您进行最终更改时它起作用的原因是您告诉 textView 字符串已更改，但当它看起来最初并没有更改时，但最终当您确实设置了一个全新的字符串时，它会注册更改并更新。

看看这个[线程](http://www.cocoabuilder.com/archive/cocoa/196195-nsmutableattributedstring-binding.html)的推理和解决方案。戴维森是长期负责文本系统的苹果工程师之一（他回答了这个问题）。

# javascript - 通过 javascript 请求 ASP.NET 处理程序

> ID：11802453
> 
> 赞同：0
> 
> 时间：2012-08-03T19:57:24.730
> 
> 标签：javascript, asp.net, ashx

所以我试图自学 asp.net 和 javascript。我下载了一个网站模板并将其转换为一个asp站点。它有一个联系表格，javascript 调用一个 php 函数来发送电子邮件。我不能使用 php 在我的托管站点上发送电子邮件。

该模板包含一个文件`MailHandler.ashx`，我应该可以用它来用 asp 发送邮件。我已经完成了我的研究，我相信我的代码可以正常工作。我的问题是，javascript 用于调用 PHP 文件的位置，如何将其转换为调用此 MailHandler 文件？

这是调用我的 php 文件的相关代码：

```
$.ajax({
    type: "POST",
    url:_.mailHandlerURL,   //this value is the path to the php file
    data:{
        name:_.getValFromLabel($('.name',_.form)),
        email:_.getValFromLabel($('.email',_.form)),
        phone:_.getValFromLabel($('.phone',_.form)),
        fax:_.getValFromLabel($('.fax',_.form)),
        state:_.getValFromLabel($('.state',_.form)),
        message:_.getValFromLabel($('.message',_.form)),
        owner_email:_.ownerEmail,
        stripHTML:_.stripHTML
}, 
```

我知道这是在调用 php 文件的 post 方法，那么如何在 Mailhandler 文件中调用 post 方法呢？

这是我的处理程序文件：

```
public class Handler : IHttpHandler {
    public void ProcessRequest (HttpContext context) {

             //create mail client, create message, send email

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:02:10.250

检查这个较早的帖子[$.get, $.post, $.ajax, $(elm).load to .ashx 页面问题](https://stackoverflow.com/questions/4450139/get-post-ajax-elm-load-to-ashx-page-problem)我相信你的问题是格式 - 查看数据：属性。

您肯定需要将 _.mailHandlerURL 设置为 ashx 文件的 url。

我相信它应该看起来更像这样：

```
var dataParams = "name="+_.getValFromLabel($('.name',_.form));
    dataParams += ", email="+_.getValFromLabel($('.name',_.form));
        // etc for the rest 
$.ajax({
    type: "POST",
    url:_.mailHandlerURL,   //this value is the path to the php file
    data:dataParams
}, 
```

如果此代码与您需要在 java 脚本中的最后一个 } 之后添加右括号并添加分号而不是逗号一样：

```
$.ajax({
    type: "POST",
    url:_.mailHandlerURL,   //this value is the path to the php file
    data:dataParams
}); 
```

# php - 在while循环中动态添加行

> ID：11802454
> 
> 赞同：0
> 
> 时间：2012-08-03T19:57:25.907
> 
> 标签：php, javascript, loops

我正在构建一个运输表格，并编写了一个 php 页面来查询 mysql 数据库以获取销售订单并显示该订单中的每个行项目。然后，我希望能够为每个行项目添加一个框号（其中包含产品的物理框的编号）。例如，订单项 #1 用于 15 件产品 A。如果一个盒子包含两件产品 A，而我要运送 8 个零件或四个盒子，我希望能够添加一行，输入盒子编号并继续为订单项 #2 做类似的事情。

到目前为止，这是我所拥有的：

```
<script language="javascript">
      // Last updated 2006-02-21
function addRowToTable()
{
  var tbl = document.getElementById('tblSample');
  var lastRow = tbl.rows.length;
  // if there's no header row in the table, then iteration = lastRow + 1
  var iteration = lastRow + 1;
  var row = tbl.insertRow(lastRow);

  // Item cell
  var cellLeft = row.insertCell(0);
  var textNode = document.createTextNode(iteration);
  cellLeft.appendChild(textNode);

  // Cust PN cell
  var cellBox_Num = row.insertCell(1);
  var el = document.createElement('input');
  el.type = 'text';
  el.name = 'Box_Num[]';
  el.id = 'Box_Num' + iteration;
  el.size = 18;

  el.onkeypress = keyPressTest;
  cellBox_Num.appendChild(el);
}
function keyPressTest(e, obj)
{
  var validateChkb = document.getElementById('chkValidateOnKeyPress');
  if (validateChkb.checked) {
    var displayObj = document.getElementById('spanOutput');
    var key;
    if(window.event) {
      key = window.event.keyCode; 
    }
    else if(e.which) {
      key = e.which;
    }
    var objId;
    if (obj != null) {
      objId = obj.id;
    } else {
      objId = this.id;
    }
    displayObj.innerHTML = objId + ' : ' + String.fromCharCode(key);
  }
}
function removeRowFromTable()
{
  var tbl = document.getElementById('tblSample');
  var lastRow = tbl.rows.length;
  if (lastRow > 1) tbl.deleteRow(lastRow - 1);
}

    </script>

//define variables and some other form stuff

$i=0;
$n=1;

while($i < $num1) {

$SO_Line_Item=mysql_result($result1,$i,"SO_Line_Item");
$My_PN=mysql_result($result1,$i,"My_PN");
$My_PN_Rev=mysql_result($result1,$i,"My_PN_Rev");
$Cust_PN=mysql_result($result1,$i,"Cust_PN");
$Cust_PN_Rev=mysql_result($result1,$i,"Cust_PN_Rev");
$Description=mysql_result($result1,$i,"Description");
$SOItemQty=mysql_result($result1,$i,"Qty");
$UOM=mysql_result($result1,$i,"UOM");
$Program=mysql_result($result1,$i,"Program");
$Required_Date=mysql_result($result1,$i,"Required_Date");   
$SOItemShipQty=mysql_result($result2,$i,"count(My_SN)"); 

?>
<tr>
<td width="3px" valign="top" align="center"><?php
echo "$SO_Line_Item";?>
</td>
<td nowrap="nowrap" valign="top" align="center"><?php
echo "$Cust_PN - $Cust_PN_Rev";?>
</td>
<td nowrap="nowrap" valign="top" align="center"><?php
echo "$My_PN - $My_PN_Rev";?>
</td>
<td nowrap="nowrap" valign="top" align="center"><?php
echo "$Description";?>
</td>
<td nowrap="nowrap" valign="top" align="center">
<?php
echo "$SOItemQty";?>
</td>
<td nowrap="nowrap" valign="top" align="center">
<?php
echo "$UOM";?>
</td>
<td nowrap="nowrap" valign="top" align="center">
<?php
echo $SOItemQty - $SOItemShipQty;?>
</td>
<td nowrap="nowrap" valign="top" align="center">
<input size="2" align="right" type="text" name="Qty">
</td>
<td nowrap="nowrap" valign="top" align="center">
<?php
echo "$Required_Date";?>
</td>
<td nowrap="nowrap" valign="top" align="center">
<?php
echo "$Program";?>
</td>
</tr>
<tr>
<td colspan="10">
<p>
<input type="button" value="Add" onclick="addRowToTable();" />
<input type="button" value="Remove" onclick="removeRowFromTable();" />
<!-- 
<input type="button" value="Submit" onclick="validateRow(this.form);" />
<input type="checkbox" id="chkValidate" /> Validate Submit  
-->
<b><font color="RED">Add/Remove Box Number For This Line Item</font></b>
</p>
</td>
</tr>

<tr>
<td></td>
<td>
<table id="tblSample">
<tr>
    <td>1</td>
    <td><input type="text" name="Box_Num[]"
     id="Box_Num1" size="18" onkeypress="keyPressTest(event, this);" /></td>

  </tr>
</table>
</td>
</tr>
<?php

$i++;
} 
```

我能够很好地创建表单，但是我的添加和删除按钮都会影响循环的第一个实例。这是可以理解的，因为循环中所有实例的表 ID 都是“tblSample”。我不知道如何为循环的每个实例使我的 Javascript 动态化。

# android - 允许 Android WebView 的跨域请求

> ID：11802456
> 
> 赞同：10
> 
> 时间：2012-08-03T19:57:36.913
> 
> 标签：android, html, cross-domain, android-webview

我正在尝试从托管在 www.myURL.com/somefolder/runScript 的服务器中检索一些数据。我在 www.myURL.com 上提供一个网页，该网页恰好与端点位于同一服务器上以检索我的数据。但是，我在 Eclipse 中收到此错误：

```
08-03 19:47:57.210: E/Web Console(27287): XMLHttpRequest cannot load http:myendpoint Origin http://www.myURL.com is not allowed by Access-Control-Allow-Origin. at null:1 
```

有没有人能够成功地在 android webview 上允许跨域请求？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-07T09:52:45.100

您是否在服务器上设置了正确的标头（Access-Control-Allow-Origin）？

看看[https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T09:13:56.107

我不知道你到底想做什么。你想解析html文档吗？

你可以从 jsoup.org 看看 jsoup

# linux - 如何在 Bash 中使用 SSH 返回外部（本地）范围？

> ID：11802463
> 
> 赞同：0
> 
> 时间：2012-08-03T19:58:21.013
> 
> 标签：linux, bash

我正在通过 ssh 远程执行命令。是否可以将输出或命令发送到我自己的 shell？（不远程）例如，我想使用彩色输出。我也不介意远程执行回声。但似乎远程机器无法识别语法并引发错误。

```
ssh myapp "
    mkdir /some/dir || echo "$(tput setaf 1)ERROR$(tput sgr0)"
" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:07:38.373

Maybe you need to escape your remote command correctly:

```
ssh myapp "
    mkdir /some/dir || echo '$(tput setaf 1)ERROR$(tput sgr0)'
" 
```

# android - 使用 MVC .Net 后端的移动 Facebook 和 Google 登录。安卓

> ID：11802466
> 
> 赞同：3
> 
> 时间：2012-08-03T19:58:37.473
> 
> 标签：android, asp.net-mvc, authentication, asp.net-web-api, membership-provider

我正在努力为将具有 MVC.Net 后端的 Android 应用程序创建授权系统。我想使用 .Net Memebership 提供商，还想使用 Facebook 和 Google 帐户。最终将有三种登录方式（FB、Google、Forms Auth），每一种方式后端都是会员提供者，因此有一个用户记录。

我已经阅读了很多关于 Android 应用程序的这些主题，并观看了 Google IO [Android REST 客户端应用程序](http://www.youtube.com/watch?v=xHXn3Kg2IQE)视频（如果你想在 Android 中做好事，那么女巫是必须的）。但在这一切之后，我仍然没有更接近于找出人们是如何创建这些成员资格或授权系统的。

到目前为止，我的想法是：当用户在应用程序上使用 Facebook（使用 SSO）登录时，他们会从 Facebook 获得一个令牌，然后当他们从他们的手机将内容发布到网站时，他们会将这个令牌和他们的 FB 用户 ID 传递给 MVC WebAPI 服务和服务器向 FB 发出请求，并在执行任何 POST 或 PUT 等操作之前检查令牌是否有效。

我对 Google 帐户也有同样的想法，尽管我目前还没有调查过。

此外，我希望用户能够使用与手机相同的身份验证方法（FB、Google 或普通表单身份验证）登录网站。

我真的不确定这在架构上是否正确，我没有看到/找不到端到端移动/网络身份验证系统的任何示例，但需要一些关于通常完成的操作的帮助。

我找到[了 question](https://stackoverflow.com/questions/4663215/android-facebook-login-and-to-web-server)，但它对答案没有任何投票，所以不确定。我敢肯定，这已经做过了！

# android - GetSupportActionBar 返回 null

> ID：11802467
> 
> 赞同：3
> 
> 时间：2012-08-03T19:58:47.333
> 
> 标签：android, actionbarsherlock

在我开始我的第二个 Activity 之后，没有 ActionBar。当我调用 GetSupportActivity 时，它返回 null。为什么？我有 minSdkVersion 10 和 targetSdkVersion 15。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.test.myapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="15"
        />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock.Light" 
        >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" 
            android:windowSoftInputMode="stateHidden"
            >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity 
            android:name=".ShowMusic2"
            android:label="Search Results">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

这是我的第二个活动 (ShowMusic2) 的 OnCreate。它是一个 ListActivity。

```
public class ShowMusic2 extends SherlockListActivity {
        @Override
        public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);

        getSupportActionBar().setDisplayHomeAsUpEnabled(true);

        showMusic = getIntent();
        pkgName = getPackageName();
        html = (String)showMusic.getStringExtra(pkgName + ".html");     
        new populateListView().execute(songs.toArray(new Song[songs.size()]));
        adapter =new SongAdapter(this,R.layout.list_item1, songs.toArray(new Song[songs.size()]));
        setListAdapter(adapter);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T02:19:11.370

对于问题 getSupportActionBar() 总是返回 NULL 那是因为你在 AndroidManifest.xml 中设置了主题 NoActionBar

Theme.Sherlock.Light.NoActionBar

如果您的应用程序不使用操作栏，则无需使用该方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T20:22:22.603

我没有玩过 SherlockListActivity 太多……但这是在黑暗中拍摄的……尝试移动

```
 getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

进入你的 onStart 方法覆盖而不是 onCreate

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-12T19:18:58.753

```
if you're using toolbar in a separate xml file without any layout, then getSupportActionBar() will return null. To avoid this error, just place your toolbar inside a layout.

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:layout_width="match_parent"
    android:layout_height="?attr/actionBarSize"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:orientation="horizontal"
    xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- Toolbar -->
    <android.support.v7.widget.Toolbar
        android:id="@+id/my_toolbar"
        android:layout_width="match_parent"
        android:layout_height="?attr/actionBarSize"
        android:background="@color/colorPrimary"
        android:theme="@style/AppTheme.CustomThemeOverlay"
        app:popupTheme="@style/AppTheme.PopupOverlay"
        app:layout_scrollFlags="scroll|enterAlways|snap" />

</LinearLayout> 
```

将以下代码放入您的 style.xml 文件中

```
<style name="AppTheme.CustomThemeOverlay" parent="ThemeOverlay.AppCompat.ActionBar"/>
<style name="AppTheme.PopupOverlay" parent="ThemeOverlay.AppCompat.Light"/> 
```

这个解决方案对我有用。我希望这可以帮助某人。:)

# python - 你如何在 python 中找到元组的相似性，作为分数？

> ID：11802470
> 
> 赞同：0
> 
> 时间：2012-08-03T19:58:56.737
> 
> 标签：python, tuples, similarity

例如，如果我在 python 中有元组 (1,2) 和 (3,2)，有没有办法让程序返回 0.5 或 1/2？我已经搜索过，但找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:03:45.337

```
>>> a = (1, 2)
>>> b = (3, 2)
>>> sum(x == y for x, y in zip(a, b)) / float(len(a))
0.5 
```

该`float()`调用仅在 Python 2.x 上是必需的，以避免整数除法。或者，您可以`from __future__ import division`在文件顶部使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:05:09.520

对于一般的元组对，您可能需要使用`set`：

```
similarity = float(len(set(a).intersection(set(b))))/len(a) 
```

当然，使用`len(a)`表明“相似性”是相关的，需要更好地定义。

在这种情况下，我已经回答了这个问题：*a 中的元素有多少部分也在 b 中？*

# java - Proguard保持类actionbarsherlock

> ID：11802474
> 
> 赞同：3
> 
> 时间：2012-08-03T19:59:10.610
> 
> 标签：java, android, obfuscation, actionbarsherlock, proguard

有

```
-keep class com.actionbarsherlock.** { *; } 
```

在我的 proguard 配置中。正如 Actionbarsherlock 家伙所提议的（请参阅[http://actionbarsherlock.com/faq.html](http://actionbarsherlock.com/faq.html)）。但只有在添加之后

```
-keep public class * extends com.actionbarsherlock.app.SherlockFragment 
```

扩展 SherlockFragment 的类被保留，所以我可以使用这些片段。

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T20:21:20.633

假设您有以下片段声明，用于 xml 布局：

```
public class MyFragment extends SherlockFragment {
    …
} 
```

MyFragment 类不在`com.actionbarsherlock.*`包中，所以 ProGuard 会混淆类名。为了保留可能在 xml 布局中使用的类，请添加以下参数：

```
# keep all classes that might be used in XML layouts
-keep public class * extends android.view.View
-keep public class * extends android.view.ViewGroup
-keep public class * extends android.support.v4.app.Fragment 
```

# r - 确保更改函数不会破坏包其余部分的代码

> ID：11802476
> 
> 赞同：0
> 
> 时间：2012-08-03T19:59:20.450
> 
> 标签：r

我有一个包，正在讨论更改函数的代码。我会但想确定这如何影响其他一切。我在 github 和本地 repo 上有这个包。我最初的想法是列出包中的所有函数（即使是未加载到命名空间中的函数），然后列出如何将所有这些函数发送到控制台。然后我可以将代码剪切并粘贴到文本编辑器中，并查找正在使用的该函数的实例。

如果这个问题有一个简单的解决方案，我不想重新发明轮子。如果我的方式看起来是最合理的，我仍然不知道如何实现。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T20:02:02.393

这称为单元测试。虽然它不是灵丹妙药（“你无法证明或测试正确性”），但它有很大帮助。

有关介绍，请参阅[R Wiki 上的此页面](http://rwiki.sciviews.org/doku.php?id=developers:runit)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T02:29:19.493

这是查看哪些函数受其他函数影响或包含其他函数的一种相当快速的方法。最近，我发现在使用导入时我不需要`require`或在包函数内部。`library`因此，我使用该包的功能查看了我的包，`termco.a`以查找带有`library`or的事件`require`。第一部分传递包 R 目录的路径并逐行读取每个文件。然后`termoco.a`计算出现次数并使用索引仅返回包含这些术语的那些函数。您必须下载该软件包的测试版[`qdap`](https://github.com/trinker/qdap)。

安装`qdap`：

```
library(devtools)
install_github("qdap", "trinker") 
```

查找条款：

```
WD <- getwd()
setwd("C:/Users/trinker/GitHub/qdap/R/")
m <- sapply(dir(), readLines)
n <- do.call(rbind, lapply(seq_along(m), function(i){
    data.frame(fun=rep(names(m)[i], length(m[[i]])), text=m[[i]])
}))

x <- with(n, termco.a(text, fun, qcv(require, library)))
x$raw[rowSums(x$raw[, -c(1:2)]) > 0, ] 
```

输出：

```
> x$raw[rowSums(x$raw[, -c(1:2)]) > 0, ]
                   fun word.count require library
1   adjacency_matrix.R        198       0       1
59         formality.R        954       2       0
112            qprep.R        145       4       4
116  read.transcript.R        563       1       1
144         termco.a.R        614       1       0
146         termco.d.R        535       1       0
156      trans.cloud.R        928       5       0 
```

# performance - Ipad 上的 SVG 性能不佳

> ID：11802481
> 
> 赞同：4
> 
> 时间：2012-08-03T19:59:45.187
> 
> 标签：performance, ipad, svg, d3.js

我正在使用 D3.js 渲染 3000 个 SVG 圆圈。D3.js 效果很好，但您需要使用鼠标移动它们。在我的 Safari 桌面上效果很好，但是，当我在 Ipad 上渲染它们时……嗯，从 15 FPS 下降到 2/1 FPS。

如果我只渲染 500 圈……钢很差。有什么办法可以提高性能吗？

我正在使用这个移动它们：

```
var diff = this.lastClientX - getD3MousePosition().X;
            if(isNumber(diff)){
                this.XLines.forEach(function(line){
                    line.attr("x1",parseFloat(line.attr("x1")) - diff);
                    line.attr("x2",parseFloat(line.attr("x2")) - diff);
                })
            }
            this.lastClientX = getD3MousePosition().X; 
```

*   Diff 只是获得最后一次鼠标移动的变量。
*   getD3MousePosition() 为您提供 mouseX 和 mouseY 位置。
*   this.Xlines 具有对每个 SVG 圆圈的 jquery 引用，一旦渲染它们就从 D£.js 收集。

基本上，我想在 Ipad 上以流畅的方式移动 3000 个 SVG 圆圈。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T21:23:50.717

尝试 CSS3 转换。您可以使用 CSS3 转换来转换点，而不是更改 SVG 位置属性。这在 iPad 上可能会更流畅。

如果这还不够好：您可以尝试使用 HTML5 Canvas 而不是 SVG 以获得更好的渲染性能。D3 支持 Canvas 进行渲染。

# c# - C#中的继承

> ID：11802487
> 
> 赞同：4
> 
> 时间：2012-08-03T20:00:03.587
> 
> 标签：c#, inheritance

ow 表示 T 是从实现某些方法的其他类继承的：

```
public Class A
 {
    public string GetAccessPoint();
    public string GetPriorityMap();
 }

public Class IndexBuilder<T> where T : A
{
   List<string> Go<T>(T obj)
   {
      string aPt=obj.GetAccessPoint();
      string pMap=obj.GetPriorityMap();
   }
} 
```

换句话说，我无法访问 obj 的 GetAccessPoint 和 GetPriority 映射，尽管我指出它是从 A 继承的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-03T20:01:22.127

那是因为当您使 Go 方法成为通用方法时，您重新定义了 T 是什么。由于 T 是在类级别定义的，因此无需在 Go 中重新定义它。试试这个：

```
public Class IndexBuilder<T> where T : A
{
   List<string> Go(T obj)
   {
      string aPt=obj.GetAccessPoint();
      string pMap=obj.GetPriorityMap();
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T20:01:58.057

您正在指定一个额外`<T>`的 in `List<string> Go<T>(T obj)`，它重新定义`T`为不一定从继承的不同类型`A`。改为使用`List<string> Go(T obj)`以避免重新定义`T`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T20:10:00.730

正如[其他答案（正确）解释的那样](https://stackoverflow.com/a/11802508/65358)，问题是您在`<T>`方法中定义了一个新的。

话虽如此，如果这是您的全部课程，那么您可能无论如何都不需要通用课程。以下将正常工作：

```
public Class IndexBuilder
{
   List<string> Go(A obj)
   {
      string aPt=obj.GetAccessPoint();
      string pMap=obj.GetPriorityMap();
      // Create list...
   }
} 
```

如果您只是`A`直接使用的实例，则不需要在`IndexBuilder`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T20:04:51.533

您正在用方法中的 T 覆盖类中的 T `Go`。

# windows-phone-7 - Storyboard WP7 - 坐标

> ID：11802488
> 
> 赞同：0
> 
> 时间：2012-08-03T20:00:11.007
> 
> 标签：windows-phone-7, storyboard, expression-blend

我创建了一个故事板来为一个图像控件设置动画，该图像控件以编程方式放置在我的画布上。故事板是在 Expression Blend 中创建的。

当我播放 Storyboard 时，图像消失并在其他地方出现动画（我最终看到图像控件在最后飞了进来）。它不会动画我首先放置图像的位置。故事板有效，但它没有在我想要动画的地方制作动画。控件应该在屏幕底部和特定图像的右侧进行动画处理。这就是我通过代码更改图像位置的原因。

这是xml：

```
 <Storyboard x:Name="sbBagExit">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.SkewX)" Storyboard.TargetName="imgBag">
            <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="11"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.7" Value="10.9973"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="imgBag">
            <EasingDoubleKeyFrame KeyTime="0" Value="332"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="332"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.7" Value="332"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="imgBag">
            <EasingDoubleKeyFrame KeyTime="0" Value="-16"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.7" Value="169.983"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
    <Storyboard x:Name="sbBagDrop">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Projection).(PlaneProjection.RotationY)" Storyboard.TargetName="imgBag">
            <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="imgBag">
            <EasingDoubleKeyFrame KeyTime="0" Value="-172"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="332.001"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="344"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="332"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="imgBag">
            <EasingDoubleKeyFrame KeyTime="0" Value="-8"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="-8"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="-8"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleY)" Storyboard.TargetName="imgBag">
            <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0.829"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="1"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" Storyboard.TargetName="imgBag">
            <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="1.2"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="1"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard> 
```

第二个故事板发生在第一个故事板之后。

我已经为此苦苦思索了整整两个星期了……谁能看到我看不到的东西？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:08:33.210

因为您使用 Blend 来生成动画，Blend 将 From 和 To 属性的值基于您在 Blend 中使用的元素的坐标和布局。

这包括它的容器和边距。

因为您没有指定所需的坐标，所以我无法告诉您出了什么问题。

我会首先更改 TranslateX 和 TranslateY，以了解它们在做什么以及何时执行我希望他们执行的操作。

# objective-c - 滑动视图和视图控制器

> ID：11802494
> 
> 赞同：0
> 
> 时间：2012-08-03T20:00:26.107
> 
> 标签：objective-c, view, controller

我正在尝试进行滑动导航，但我阻止了一点。我必须使用一个控制它们滑动的视图控制器创建多个视图？或者我每次都必须用一个视图控制器创建一个视图？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:33:31.143

依靠。
**1，**您可以在单个 UINavigationController 中嵌入多个 viewController，并在每个 viewController 上使用 UISwipeGestureRecognizer 和 Segue 在它们之间分层移动......

**2,** ... 或者您可以使用一个带有多个 UIViews 和一个 UIPageControl 的单个 viewController（就像在默认的 Weather 应用程序中一样）。[您可以在此处](https://stackoverflow.com/questions/2230665/how-to-implement-views-to-the-pagecontrol)和[此处](http://cocoawithlove.com/2009/01/multiple-virtual-pages-in-uiscrollview.html)找到示例。

第二个选项将为您提供更流畅的滚动体验，但为了显示整个不同的视图控制器，我认为您必须使用第一个选项。

还有在视图/视图控制器之间传输数据的问题。在第一个选项中，您应该使用 Segues 和委托协议在 viewControllers 之间传输数据。

# oracle - Oracle SQLPlus 可以运行 select 语句，但不能运行 Create Package

> ID：11802495
> 
> 赞同：0
> 
> 时间：2012-08-03T20:00:30.657
> 
> 标签：oracle, sqlplus

我正在尝试创建部署脚本。

我有一个名为 Deploy.bat 的批处理文件

```
@Echo Off
sqlplus -s UID/pwd@Server @.\runall.sql >> OracleDeploy.log 2> error.log 
```

然后在 runall.sql 我有

```
@test1.sql
EXIT 
```

如果我把下面的语句，我的批处理文件运行良好。

```
Select * from User_table; 
```

但是，如果我输入一个 create table 语句，SQLPlus 似乎会等待输入并挂起，直到我按下 Control + c 并终止批处理作业。

```
create table t1
(c1 varchar2(10)); 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:50:19.650

如果您尝试创建一个包，如您的主题行所示，我怀疑您需要在脚本的最后一行添加一个尾随“/”：

```
create package p1 as 
...
end p1;
/ 
```

create table 语句应该像您定义的那样工作。

# .net - SpreadSheetGear 与 DataGridView Visual Studio 2008

> ID：11802496
> 
> 赞同：1
> 
> 时间：2012-08-03T20:00:32.650
> 
> 标签：.net, winforms, datagridview, spreadsheetgear

我正在创建一个关于 SpreadSheetGear 和本机 DataGridView 之间差异的优缺点列表。试图确定我们是否应该购买控件或使用本机 DataGridView 或其他一些本机控件。我不需要公式或图表。我确实需要多个工作表、标准格式设置功能、每个工作表的多个表格区域、合并单元格、命名单元格、隐藏行、保护某些单元格、工作表中的详细单元格以及同一工作表中的表格区域以及编辑功能。我认为 SpreadSheetGear 支持这一点，而 DataGridView 不支持这一点。我对 SpreadSheetGear 的唯一问题是总成本。我需要确保我应该使用 SpreadSheetGear vs datagridview 或其他更便宜的控件。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:51:25.037

我已经使用 SpreadSheetGear 几年了。它适用于我的情况，因为我的用户是会计师，并且非常喜欢使用 Excel。SpreadSheetGear 为我提供了一种在拥有与数据库连接的数据时为他们提供类似 Excel 的体验的方法。

以下所有功能都像 Excel 一样工作：多个工作表、标准格式设置功能、合并单元格、命名单元格、隐藏行、保护某些单元格。

编辑能力——你是说数据编辑吗？SpreadSheetGear 工作表控件具有诸如 cellEndEdit 之类的事件，您可以在其中获取可用于更新模型的单元格内容。

我不确定您对接下来两个功能的要求是什么：每个工作表中的多个表格区域和工作表中的详细信息单元格以及同一工作表中的表格区域。

几年来我没有寻找另一个电子表格控件，所以我不确定目前有什么。在我购买 SSG 之前，我尝试了多种选择，但没有找到适合我的方法。我需要的一个重要功能是一个做公式的工作表，所以你的情况可能完全不同。

# api - 通过 API 从 asana 获取所有任务信息

> ID：11802504
> 
> 赞同：2
> 
> 时间：2012-08-03T20:01:10.390
> 
> 标签：api, asana

我正在编写一个简单的应用程序来构建一个任务依赖树（我通过评论一个任务“依赖于：”来声明一个依赖），它确实是一个简单的任务，也应该是一个简单而快速的脚本，但是我在这里遇到了瓶颈。

从 API 文档中我得到我需要： 使用 /project//tasks 查询项目任务迭代槽任务：

*   获取完整的任务信息，因为我只获取 id 和 name。
*   获取任务故事。

我想做的是一个简单的 api 调用来一次获取所有这些信息，比如：/project//tasks options.expand {task, stories}。我错过了什么或者这不可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T19:25:07.630

借助“opt_fields”选项（[https://asana.com/developers/documentation/getting-started/input-output-options](https://asana.com/developers/documentation/getting-started/input-output-options)），您可以通过一个请求获得有关任务的完整信息。

不幸的是，“故事”仍然需要另一个请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:24:45.173

不。正如在体式查询中看到的那样，查询是树状结构。要获取故事，您需要 workspace_id > project_id > task_id & task_id 的故事。我建议您使用循环。项目的任务，用于获取有关任务和历史的信息。收到任务 ID 后 - 发送两个请求信息任务和故事。谢谢你，鲁斯兰。

# c# - 如何跨不同的编程语言共享业务概念？

> ID：11802505
> 
> 赞同：15
> 
> 时间：2012-08-03T20:01:11.647
> 
> 标签：c#, c++, python, serialization, cross-language

我们开发了一个分布式系统，该系统由以不同编程语言（C++、C# 和 Python）实现的组件构建，并通过网络相互通信。系统中的所有组件都以相同的业务概念运行，并且也根据这些概念相互通信。

因此，我们在以下两个挑战中苦苦挣扎：

1.  使我们的业务概念在这三种语言中的表达保持同步
2.  跨这些语言的我们的业务概念的序列化/反序列化

对于这个问题，一个简单的解决方案就是定义相同的数据结构（和序列化代码）三次（对于 C++、C# 和 Python）。

不幸的是，这个解决方案有严重的缺点：

*   它会产生很多“代码重复”</li>
*   它需要大量的跨语言集成测试来保持一切同步

我们考虑的另一个解决方案是基于 ProtoBufs 或 Thrift 等框架。这些框架有一个内部语言，其中定义了业务概念，然后这些概念在 C++、C# 和 Python 中的表示（连同序列化逻辑）由这些框架自动生成。

虽然这个解决方案没有上述问题，但它还有另一个缺点：由这些框架生成的代码将代表底层业务概念的数据结构和序列化/反序列化这些数据结构所需的代码耦合在一起。

我们觉得这污染了我们的代码库——我们系统中使用这些自动生成的类的任何代码现在都“熟悉”这种序列化/反序列化逻辑（严重的抽象泄漏）。

我们可以通过用我们的类/接口包装自动生成的代码来解决它，但这让我们回到了幼稚解决方案的缺点。

谁能推荐一个解决所描述问题的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T06:45:18.133

列夫，你可能想看看[ICE](http://www.zeroc.com/)。它提供面向对象的 IDL，并映射到您使用的所有语言（C++、Python、.NET（据我所知，所有 .NET 语言，不仅仅是 C#））。尽管 ICE 是一个中间件框架，但您不必遵循它的所有策略。

特别是在您的情况下，您可能希望在 ICE IDL 中定义组件的接口，并将它们作为代码的一部分进行维护。然后，您可以生成代码作为构建例程的一部分并从那里开始工作。或者，您可以使用 ICE 为您提供的更多功能。

ICE 支持 C++ STL 数据结构并支持继承，因此它应该为您提供足够强大的形式主义，以便随着时间的推移逐渐构建您的系统，并具有良好的可维护性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T10:04:57.643

> 系统中的所有组件都以相同的业务概念运行，并且也根据这些概念相互通信。

当我说对了时，您已经将系统分成不同的部分，通过定义明确的接口进行通信。但是您的接口共享您称为“业务概念”的数据结构（如果没有看到示例就很难理解），并且由于必须为您的所有三种语言构建这些接口，因此您在保持它们“同步”时遇到了问题。

当保持接口同步出现问题时，很明显你的接口太宽泛了。有不同的可能原因，有不同的解决方案。

可能的原因 1 - 你过度概括了你的界面概念。如果是这种情况，请在此处重新设计：放弃泛化并创建尽可能广泛的接口。

可能的原因2：用不同语言编写的部分没有处理单独的业务案例，它们之间可能有“水平”分区，但没有垂直分区。如果是这种情况，您就无法避免界面的广泛性。

如果原因 2 是您的问题，代码生成在这里可能是正确的方法。如果现有的代码生成器不满足您的需求，您为什么不自己编写呢？例如，将接口定义为 C# 中的类，引入一些元属性并在代码生成器中使用反射来在生成相应的 C++、Python 以及“实际使用的”C# 代码时再次提取信息。如果您需要带有或不带有序列化的不同变体，也可以生成它们。工作生成器的工作量不应超过几天（YMMV 取决于您的要求）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T14:55:27.990

嗯，曾几何时，MS 试图用 IDL 解决这个问题。好吧，实际上它试图解决的不仅仅是定义数据结构，但是，无论如何，这一切都已成为过去，因为这些天没有人会走上 COM 路线。

一个值得关注的选项是[SWIG](http://www.swig.org/)，它应该能够移植数据结构以及跨语言的实际调用。我自己没有这样做，但它有可能不会像 protobufs 那样紧密地耦合序列化和数据结构。

但是，你真的应该考虑一下前面提到的耦合到底是不是一件坏事。什么是您的理想解决方案？据说它做了两件事：它基于一个定义生成跨多种语言的兼容数据结构，它还提供序列化代码将它们拼接在一起 - 但在一个单独的抽象层中。这个想法是，如果有一天您决定使用不同的序列化方法，您可以直接切换该层，而无需重新定义所有数据结构。所以考虑一下 - 期望有一天只切换序列化代码而不接触接口到底有多现实？在大多数情况下，序列化格式是最永久的设计选择，因为您通常会遇到向后兼容性等问题。

现在让我们假设存在这样一个工具，它将数据结构生成与序列化分开。可以说，2 年后，您决定需要一种完全不同的序列化方法。除非此工具还支持可插入的序列化格式，否则您无论如何都需要开发该层，以便将现有结构缝合到新的序列化解决方案 - 这与完全选择新包一样多。因此，能够满足您的要求的唯一真正可行的解决方案是不仅支持跨所有语言的数据类型定义和代码生成，而且**不仅**与序列化无关，但也已经准备好实现您想要切换到的未来序列化格式 - 因为如果它只对序列化格式不可知，这意味着您仍然有自己实现它的任务 - 总而言之语言——这并不比重新定义一些数据结构少。

所以我的观点是，序列化和数据类型定义如此频繁地结合在一起是有原因的——它只是最常见的用例。我会仔细研究一下您希望使用所需的抽象级别能够实现什么，想想开发这样的解决方案需要做多少工作以及是否值得。我确定这些工具可以做到这一点，顺便说一句 - 可能只是昂贵的专有类型，每个许可证花费 1 万美元 - 我认为同样的论点适用于那里 - 它可能只是过度工程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T00:08:18.313

我同意 Tristan Reid（包装业务逻辑）。实际上，几个月前我遇到了同样的问题，然后我偶然发现了《Unix 编程艺术》一书（可[在线](http://www.faqs.org/docs/artu/)免费获得）。引起我注意的是将策略与机制（即接口与引擎）分离的哲学。现代编程环境（例如 NET 平台）试图将所有内容集成到单个域下。在那些日子里，我被要求开发一个必须满足以下要求的 WEB 应用程序：

1.  它必须轻松适应用户界面的未来趋势，而无需更改核心算法。

2.  它必须可以通过不同的界面访问：Web、命令行和桌面 GUI。

3.  它必须在 Windows 和 Linux 上运行。

我打赌完全在 C/C++ 中开发机制（引擎）并使用本机操作系统库（POSIX 或 WinAPI）和良好的开源库（postgresql、xml 等）。我将引擎模块开发为命令行程序，最终实现了 2 个接口：Web（使用 PHP+JQuery 框架）和桌面（NET 框架）。这两个接口都与机制无关：它们只是通过调用诸如 Windows 中的 CreateProcess() 或 UNIX 中的 fork() 之类的函数来启动核心模块可执行文件，并使用管道来监视它们的进程。

我并不是说 UNIX 编程哲学适用于所有目的，但我从那时起应用它并取得了很好的效果，也许它也对你有用。选择一种语言来实现该机制，然后使用另一种使界面设计变得容易的语言。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T09:31:30.257

我将通过使用有关您的域实体的某种元信息（XML 或 DSL，取决于复杂性）来实现这一点，然后为每种语言生成代码。这将减少（手动）代码重复。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T23:23:35.940

您可以使用诸如 UML 建模器之类的工具对这些数据结构进行建模（想到 Enterprise Architect，因为它可以为所有 3 个生成代码。）然后直接从模型中为每种语言生成代码。

虽然我会仔细查看之前关于使用 XSD 的评论。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-03T21:04:20.827

您可以将业务逻辑包装为 Web 服务，并使用所有三种语言调用它 - 只需一个实现。

# php - PHP 自定义订单

> ID：11802506
> 
> 赞同：-2
> 
> 时间：2012-08-03T20:01:15.933
> 
> 标签：php, mysql

我正在写博客，我需要订购/排序方面的帮助。我有一个名为 order 的字段。下面展示了数据库的结构：

```
id | name       | order
-------------------------
1  | post one   | 5
2  | post two   | 4
3  | post three | 3
4  | post four  | 2
5  | post five  | 1 
```

我可以使用 SQL ORDER BY 子句根据“订单”字段进行排序。我真正想做的是，当我将帖子 2 的顺序更改为 4 时，是否有一种机制可以自动对其余行进行排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:02:32.010

我会假设只是`ORDER BY`在数据库中的`order`字段上？

* * *

既然我更好地理解了您的问题，那么如何：`order`以十为单位编号您的字段（`10`，`20`，`30`等等）。然后，当您要更改顺序时，请调整数字（例如，更改`10`为`25`将其放在`20`和之间`30`）。完成重新排序后，运行以下命令：

```
SET @order = 0;
UPDATE `posts` SET `order` = (@order := @order+10) ORDER BY `order` ASC 
```

# java - 使用 Mina JAR 依赖项而不是捆绑包？

> ID：11802507
> 
> 赞同：5
> 
> 时间：2012-08-03T20:01:20.093
> 
> 标签：java, maven, apache-mina

Mina 最近似乎将他们的工件部署为`*.bundle`文件，这至少是令人讨厌的，充其量是彻头彻尾的邪恶。

如果我像这样在 Maven 中依赖 Mina：

```
<dependency>
    <groupId>org.apache.mina</groupId>
    <artifactId>mina-core</artifactId>
    <version>${mina.version}</version>
    <type>jar</type>
</dependency>
<dependency>
    <groupId>org.apache.mina</groupId>
    <artifactId>mina-integration-beans</artifactId>
    <version>${mina.version}</version>
    <type>jar</type>
</dependency>
<dependency>
    <groupId>org.apache.mina</groupId>
    <artifactId>mina-integration-jmx</artifactId>
    <version>${mina.version}</version>
    <type>jar</type>
</dependency> 
```

...然后我收到以下错误：

```
Multiple annotations found at this line:
- Missing artifact org.apache.mina:mina-integration-ognl:bundle:2.0.4
- Missing artifact org.apache.mina:mina-core:bundle:2.0.4
- Missing artifact org.apache.mina:mina-integration-beans:bundle:2.0.4 
```

我不确定为什么它仍在寻找`*.bundle`文件而不是`*.jar`文件。为什么它不查找和查找 JAR 文件？

这尤其令人沮丧，因为我有一些依赖于这个项目的项目，而且如果没有 Mina JAR，它们都会失败。旧的 Java JAR 发生了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T17:40:15.760

首先我发现只使用核心它没有任何问题，但如果你开始使用 mina-integration-bean 或 mina-integration-jmx 你会遇到问题。此外，我[在 Mina 项目的 JIRA 跟踪器中发现了以下问题，](https://issues.apache.org/jira/browse/DIRMINA-806)它准确地说明了您的问题。

另一方面，您可以像这样在 Maven 中排除这些捆绑包依赖项：

```
 <dependencies>
    <dependency>
      <groupId>org.apache.mina</groupId>
      <artifactId>mina-core</artifactId>
      <version>2.0.4</version>
      <type>jar</type>
    </dependency>
    <dependency>
      <groupId>org.apache.mina</groupId>
      <artifactId>mina-integration-beans</artifactId>
      <version>2.0.4</version>
      <type>jar</type>
      <exclusions>
        <exclusion>
          <groupId>org.apache.mina</groupId>
          <artifactId>mina-core</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>org.apache.mina</groupId>
      <artifactId>mina-integration-ognl</artifactId>
      <version>2.0.4</version>
      <type>jar</type>
      <exclusions>
        <exclusion>
          <groupId>org.apache.mina</groupId>
          <artifactId>mina-core</artifactId>
        </exclusion>
        <exclusion>
          <groupId>org.apache.mina</groupId>
          <artifactId>mina-integration-beans</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>org.apache.mina</groupId>
      <artifactId>mina-integration-jmx</artifactId>
      <version>2.0.4</version>
      <type>jar</type>
      <exclusions>
        <exclusion>
          <groupId>org.apache.mina</groupId>
          <artifactId>mina-core</artifactId>
        </exclusion>
        <exclusion>
          <groupId>org.apache.mina</groupId>
          <artifactId>mina-integration-beans</artifactId>
        </exclusion>
        <exclusion>
          <groupId>org.apache.mina</groupId>
          <artifactId>mina-integration-ognl</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
  </dependencies> 
```

# php - 可扩展的网络统计跟踪

> ID：11802517
> 
> 赞同：1
> 
> 时间：2012-08-03T20:02:07.003
> 
> 标签：php, mysql, apache, web-statistics

我正在寻找“最佳实践”或只是推荐的跟踪统计数据的方法。如果我正在开发一个具有类似 youtube 的页面统计跟踪（查看、访问等）的网站。拥有实时统计数据非常重要，但我想避免缩放时出现问题，并且想知道除了缓存之外是否还有其他方法可以解决这个问题。

我计划对大部分统计数据使用 Google Analytics，但 Google 仅每 3-4 小时更新一次。

我有点担心可扩展性。一些统计数据需要实时 - 像 youtube 这样的网站如何处理它？他们是计算内存中的统计数据，然后将数据库查询推迟到每 30 分钟一次，还是只是缓存读取请求并每隔几个小时更新一次？你会推荐做什么？

再次感谢 SO，我很高兴你们其他人可以分享我缺乏的丰富经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T08:27:17.400

我可以推荐一种跟踪网络统计数据的方法，如果你有 iPhone，你可能想看看 TeddyTrack。（完全披露：我参与了这个项目。）它是实时的。事实上，如果你摇晃你的 iPhone，它会立即更新你的统计数据。:-) 你只得到四个图表，但它们包括（复杂的）每周队列图表。它的设置和管理远没有 Google Analytics 复杂。但为什么选择？为什么不获取 Google Analytics、Piwik、AWStats 和 TeddyTrack？使用所有这些，看看你最喜欢哪些。TeddyTrack 可能适合您，因为它非常轻量级，并且可以将您的数据保存在您的服务器上。链接：

awstats.sourceforge.net、piwik.org、www.google.com/analytics、teddytrackapp.com。

您也可以不使用上面提到的 chartbeat.com 之类的免费软件，但它们要花很多钱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:27:14.563

不确定您使用的是哪个版本的 Google Analytics，但较新的版本支持实时统计信息。查看[http://analytics.blogspot.com/2011/09/whats-happening-on-your-site-right-now.html](http://analytics.blogspot.com/2011/09/whats-happening-on-your-site-right-now.html)

您还可以查看 Omniture（现已被 Adob​​e 收购）提供的站点催化剂。我使用它已经有一段时间了，但它确实是企业级和可扩展的。

一切顺利！

# networking - 知识产权变更计划

> ID：11802523
> 
> 赞同：0
> 
> 时间：2012-08-03T20:02:30.823
> 
> 标签：networking, ipv4

所以，我的工作有几个网络和小型企业地点，都带有互联网阻塞服务器。经理们都轮换并希望从服务器中获得自由，即 DHCP 范围之外的 AKA 静态 IP 地址。

我的问题是他们都需要访问彼此的网络，因此设置备用配置并不是那么有用。我将如何创建一个应用程序来更改我的用户 IP 地址，以便它在他们更改的位置也匹配他们的静态 IP？

这只是他们本地机器上的内部 IP 地址，每个位置的网络都有一个静态 IP 等待他们。只需要更改他们的IP地址。

是否有一个批处理文件命令可以帮助实现这一目标？如果不是，可能编写脚本或进入更大的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T07:21:01.077

在机器本身上执行此操作将很困难。它需要能够识别每个网络，当连接到未知网络（如家庭网络或热点）时会做什么？

我认为让 DHCP 服务器从正常的动态地址池之外分发静态地址会更好。这样一来，一切都可以自动运行，同时还为机器提供静态地址。

我知道这不是您问题的真正答案，但我希望这可以为您提供替代方案。

# ruby-on-rails - Rails - 关联 - 我指的是什么？

> ID：11802525
> 
> 赞同：0
> 
> 时间：2012-08-03T20:02:38.330
> 
> 标签：ruby-on-rails, associations

我是 Rails 的新手，一直在努力使用命名约定来弄清楚我实际指的是什么。对于许多名称非常相似的项目（例如模型类、数据库表、控制器），从示例中所引用的对象并不总是很明显。

在关联[指南](http://guides.rubyonrails.org/getting_started.html#creating-new-posts)中，它使用帖子和评论作为示例。你能帮我理解实际指的是什么吗？

跟协会 `has_many :comments` 是什么`:comments`？这是模型类还是控制器？

引用关联对象时： 此示例中的`@post.comments.build` 内容是什么？`comments`是类、控制器还是实例变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:04:14.640

评论是一个模型，而不是一个控制器。这在您的两个示例中都是正确的。首先是定义两个模型之间的关系。在第二个中，它是一个新的评论类型对象，它被创建并填充了对帖子的引用。

您可以使用的经验法则是模型通常不会引用控制器，而是其他模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:13:03.930

模型代表真实的对象。（因此它们被称为模型）。评论、帖子是实际的对象表示。has_many :comments 只是说帖子有很多评论的一种方式。所以它指的是模型。

控制器是模型发生动作的地方。随着您的进行，您会意识到给定模型可以有多个控制器。控制器是您决定如何处理各种事件的地方。因此，任何路由都将映射到控制器操作。

@post.comment.build 表示对于有可能评论的模型帖子，构建模型评论的实例。这将导致触发控制器中的功能。

# javascript - node.js mongodb javascript 范围混淆

> ID：11802528
> 
> 赞同：0
> 
> 时间：2012-08-03T20:02:49.467
> 
> 标签：javascript, node.js, mongodb, express

我正在开发一个 express.js 应用程序，没有猫鼬。

我要做的是，将对 mongodb 的调用封装在一个函数中，向函数传递一些参数并从 mongodb 获取数据。

我遇到的问题由下面的代码解释

```
function get_data()
{
    var mongo = require('mongodb'),Server = mongo.Server,Db = mongo.Db;
    var server = new Server('localhost', 27017, {auto_reconnect: true});
    var db = new Db('test', server); 

    db.collection('test_collection', function(err, collection) {

        collection.find().toArray(function(err, items) {
            var data = items;
        });
    });

    console.log(data);
    console.log("in get");
    return data;
} 
```

如何从该函数返回从 mongo db 中提取的项目数组。

我想知道作用域在 javascript 中的工作原理以及如何将项目放入变量中并从 get_data 函数返回它们。

**回答后**

我修复了代码。它现在可以工作并且看起来像这样。

```
function get_data(callback) { 
    var mongo = require('mongodb'),Server = mongo.Server,Db = mongo.Db;
    var server = new Server('localhost', 27017, {auto_reconnect: true});
    var db = new Db('test', server);

    db.open(function(err, db) {
        if (err) return callback(err);

        db.collection('test_collection', function(err, collection) {
            if (err) return callback(err);
            collection.find().toArray(callback);
        });
    });
}

get_data(function(err, items) {
    // handle error
    console.log(items);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:10:28.877

由于项目是从 MongoDB 异步检索的，因此该函数`get_data`需要接受将用于返回结果的回调。我相信您还需要明确`open`数据库连接。

```
function get_data(callback) {
    ...

    db.open(function(err, db) {
        if (err) return callback(err);

        db.collection('test_collection', function(err, collection) {
            if (err) return callback(err);
            collection.find().toArray(callback);
        });
    });
}

get_data(function(err, items) {
    // handle error
    console.log(items);
}); 
```

# excel - 如何让 Excel 与我的网站进行交互？

> ID：11802529
> 
> 赞同：-1
> 
> 时间：2012-08-03T20:02:58.033
> 
> 标签：excel, web

我想使用 Excel 2010 从我的个人网站进行计算。我希望用户在字段中输入数据并按提交。然后，Excel 获取数据，对其进行计算，并将计算出的数据输出到用户可以看到的另一个字段表单中。

这需要在实际网站之外完成，因为我不想在 Excel 上共享公式。

例如：

网页包含三个字段：第一位、第二位和解决方案。最终用户在第一个和第二个表单中输入 2 和 5，然后按提交。Excel 工作表在后台添加这些数字。数字 7 出现在解决方案字段中。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:19:48.530

你说这是在你的个人网站上，所以我假设你可以访问服务器并且可以做一些基本的脚本。是否绝对有必要使用 Excel？这似乎使用 perl、PHP、python 等来执行简单的加法会更直接。

如果您在 Javascript 中进行计算，您将向查看者公开公式，因为客户端执行脚本，因此必须具有源代码。

但是，对于上述脚本语言之一，脚本的源代码由服务器解析，但从未传递给用户。

例如，一个 php 脚本可以简单地将表单提交的结果发送给它自己：

`<?php`和之间的区域在`?>`服务器端解析，从不传递给用户。

```
<?php
    $a = '';
    $b = '';
    $result = '';

    if (@$_POST['submit'] == 'Submit')
    {
        $a = $_POST['a'];
        $b = $_POST['b'];
        $result = SecretFormula($a, $b);
    }

    function SecretFormula($a, $b)
    {
        return $a + $b;
    }
?>

<html>
    <head>
    </head>
    <body>
        <form id="form" method="post" action="">
            Enter Number A: <input name="a" type="text" value="<?php echo $a; ?>" /><br />
            Enter Number B: <input name="b" type="text" value="<?php echo $b; ?>" /><br />
            <input name="submit" type="submit" value="Submit" /><br />
            <br />
            Result: <input name="result" type="text" value="<?php echo $result; ?>" />
        </form>
    </body>
</html> 
```

# jquery - 如何创建类似幻灯片效果的android.com

> ID：11802533
> 
> 赞同：0
> 
> 时间：2012-08-03T20:03:22.730
> 
> 标签：jquery

谁能告诉我谷歌在他们的网站[http://www.android.com](http://www.android.com)上使用什么脚本来制作幻灯片效果？动画非常流畅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:18:35.150

他们显然在使用内部脚本，对于 Chrome，它`-webkit-transform: translateZ(value);`具有值转换结合 CSS3 不透明度转换和 JavaScript 更改。制作起来相当简单。

在 Internet Explorer 和 Mozilla Firefox 中，这是一个简单的淡入淡出效果。我没有测试过其他浏览器。

# html - 根据条件将 xsl 的输出转换为 url

> ID：11802535
> 
> 赞同：0
> 
> 时间：2012-08-03T20:03:25.450
> 
> 标签：html, xml, xslt

目前我还是个新手，但是我已经使用 xsl 来格式化一个 xml 提要，以便为我的网站输出到 html 中。但是，我想更进一步，将一些输出文本转换为 html 链接。

是否有任何可用的教程可以提供帮助？

为了提供更好的上下文，输出是一个足球联赛表，我想让球队名称自动链接到一个 url。因此，如果 name = 'Portsmouth' 那么我希望朴茨茅斯成为我确定的链接。如何格式化下表以针对所有可能不同的团队名称执行此操作？

```
<xsl:for-each select="team">
<tr>
<td><xsl:value-of select="position"/></td>
<td><xsl:value-of select="name"/></td>
<td><xsl:value-of select="played"/></td>
<td><xsl:value-of select="won"/></td>
<td><xsl:value-of select="drawn"/></td>
<td><xsl:value-of select="lost"/></td>  
<td><xsl:value-of select="for"/></td>
<td><xsl:value-of select="against"/></td>
<td><xsl:value-of select="goalDifference"/></td>
<td><xsl:value-of select="points"/></td>

</tr> 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:17:13.130

如果要有条件地输出标签，可以执行以下操作。

```
 <xsl:template match="/">
    <xsl:apply-templates select="//team"/>
  </xsl:template>

  <xsl:template match="team">
    <td>
      <xsl:value-of select="position"/>
    </td>
    <td>
      <xsl:choose>
        <xsl:when test="name='Portsmouth'">
          <a>
            <xsl:attribute name="href">
              <xsl:value-of select="concat('someurl.com?name=',name)"/>
            </xsl:attribute>
          </a>
        </xsl:when>
        <xsl:otherwise>
          <xsl:value-of select="name"/>
        </xsl:otherwise>
      </xsl:choose>

    </td>
    <td>
      <xsl:value-of select="played"/>
    </td>
    <td>
      <xsl:value-of select="won"/>
    </td>
    <td>
      <xsl:value-of select="drawn"/>
    </td>
    <td>
      <xsl:value-of select="lost"/>
    </td>
    <td>
      <xsl:value-of select="for"/>
    </td>
    <td>
      <xsl:value-of select="against"/>
    </td>
    <td>
      <xsl:value-of select="goalDifference"/>
    </td>
    <td>
      <xsl:value-of select="points"/>
    </td>
  </xsl:template> 
```

使用应用模板而不是 foreach 循环。

如果其中一支球队是朴茨茅斯，输出将是

```
<td><a href="someurl.com?name=Portsmouth"/></td> 
```

如果您希望每个团队都有一个 url，那么只需删除选择语句并离开

```
 <td>
           <a>
            <xsl:attribute name="href">
              <xsl:value-of select="concat('someurl.com?name=',name)"/>
            </xsl:attribute>
          </a>
    </td> 
```

# powershell - 使用带有 ie 对象的 Powershell 将文档上传到 Sharepoint 2007

> ID：11802539
> 
> 赞同：0
> 
> 时间：2012-08-03T20:03:43.230
> 
> 标签：powershell, file-upload, sharepoint-2007, powershell-2.0, sendkeys

**目标：**以编程方式将文档上传到 Sharepoint

**问题 ：**

1.  尝试使用时：`[void][System.Reflection.Assembly]::LoadWithPartialName("Microsoft.SharePoint")`它不会出错，但当我尝试使用它包含的对象时会出错。比如`New-Object Microsoft.SharePoint.SPSite($url)`。解决此问题的方法是下载“Microsoft.Sharepoint.dll”，该文件包含在安装 MOSS 的实际服务器上的 Web 扩展文件夹中。问题在于，在托管我们的 Sharepoint 站点的 2008 服务器上运行这些脚本在大公司中绝不是“实用的”。

2.  我的第二种方法是使用 Internet Explorer com 对象物理导航到页面并从那里上传文件。获得文本框的 ID 后，我无法设置该值，因为我的研究显示微软的“安全措施”。使用`get-member`cmdlet 时，我可以看到这个 html 元素的字段值应该是“System.String value {get;set;}”。当我尝试设置该值时，没有任何反应。网站上的文本框本身不允许您输入任何内容。相反，文本框是可点击的，并会显示“选择要上传的文件”窗口。如果我手动选择要上传的文件而不提交，请返回 ISE 并执行`$uploadText.Value`它会吐出我刚刚选择控制台的文件。

3.  我的第三个努力是使用 VB 中的 sendkeys 对象将路径发送到 Web 浏览器并以这种方式上传文件。但是在运行它时，程序只是挂起并且从不发送它。我在[http://technet.microsoft.com/en-us/library/ff731008](http://technet.microsoft.com/en-us/library/ff731008)找到的这个策略被描述为“有点……喜怒无常……”。我首先让 $ie 对象打开 Microsoft 文件浏览器，然后尝试向它发送密钥。

**尝试的代码：（**使用 IE com 对象、AppActivate 和 Sendkeys）：

```
$spURL = "https://SharepointSite"
[void] [System.Reflection.Assembly]::LoadWithPartialName("'Microsoft.VisualBasic")
$ie = new-object -com "InternetExplorer.Application"
$ie.visible = $true
$ie.navigate2($spURL)
while($ie.Busy -eq $true) {Start-Sleep 1}
($ie.Document.GetElementByID("zz16_UploadMenu")).click()
while($ie.Busy -eq $true) {Start-Sleep 1}
$uploadText = $ie.Document.GetElementByID("ctl00_PlaceHolderMain_ctl01_ctl02_InputFile")
[Microsoft.VisualBasic.Interaction]::AppActivate("Upload Document")
$uploadText.value = "C:\uploadFile.xlsx" #this line does nothing
$uploadText.click() ## opens up "choose file to upload"
[void] [System.Reflection.Assembly]::LoadWithPartialName("'System.Windows.Forms")
[System.Windows.Forms.SendKeys]::SendWait("C:\uploadFile.xlsx") 
```

就是这样，浏览器框弹出，脚本永远不会结束。我发现其他一些人在将 AppActivate 设置为“选择要上传的文件”（在将其更改为 IE 标题“上传文档”之前将其设置为）时遇到了麻烦。虽然这些问题都在 VB 中，但我确实找到了有人声称是“引用 Microsoft HTML 库”的修复程序，但它只适用于 VB，我需要在 powershell 中使用它。可以在[此处](http://forums.codeguru.com/showthread.php?522047-How-to-add-reference-to-Microsoft-HTML-Object-Library)找到该修复程序，但它对我不起作用。

微软似乎只是不希望我以编程方式上传文件。但在我认为这是“不可能”之前，我只想先在这里发布。任何帮助将不胜感激，我认为使用 powershell 一切皆有可能！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:38:04.123

由于安全原因，您无法使用 Comobject IE 进行文件上传

我通过在 PS 中使用 watin dll 解决了这个问题。

我无法从这里访问我的样品，但您可以在 www.watin.org 找到所需的一切

# html - JSP 中的 ResultSet#getFetchSize() 循环不会产生任何 HTML

> ID：11802542
> 
> 赞同：0
> 
> 时间：2012-08-03T20:03:58.733
> 
> 标签：html, jsp, jdbc, scriptlet

我有以下代码：

```
 <%
            for (int i = 0; i < rs.getFetchSize(); i++) {
                System.out.print("test");
                //blah
%>
        <div id="Test<%= out.print(i) %>">
            <div class="<%= oddOrEven(i)%>Header">
                <div class="<%= oddOrEven(i)%>A">Test<% out.print(i);%></div>
                <div class="<%= oddOrEven(i)%>B"> 
                //Stuff here 
```

奇数或偶数只是根据我传递给它的数字用奇数或偶数来响应，这应该使我的 css 样式在灰色之间交替。

当我编译页面时它可以工作，但这部分完全被省略并且没有出现在源代码中。有人可以帮我完成这项工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T21:37:11.367

[`ResultSet#getFetchSize()`](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getFetchSize%28%29)不会像您预期的那样返回返回记录的数量。它只返回配置的提取大小。例如，它可能仅`0`根据 JDBC 驱动程序配置和语义返回。

只需使用[通常的方式](http://docs.oracle.com/javase/tutorial/jdbc/basics/)将光标移动到下一行。[`ResultSet#next()`](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#next%28%29)

```
for (int i = 0; rs.next(); i++) { 
```

* * *

也就是说，[十年来官方不鼓励](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)在 JSP 文件中编写 Java 代码。我建议也从事这方面的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:18:45.353

这个怎么样：

```
<%
for(int i = 0; i < rs.getFetchSize(); i++)
{
%>
<div id="Test<%= i%>">
  <div class="<%= oddOrEven(i)%>Header">
     <div class="oddOrEven(i)A">Test<%= i%></div>

<%
}
%> 
```

您缺少最后一个花括号，它将完成 for 循环

你也不需要提供 ... out.println() ... <%= %> 会为你做的

# ios - armv6 和 armv7

> ID：11802547
> 
> 赞同：7
> 
> 时间：2012-08-03T20:04:24.477
> 
> 标签：ios, armv6

我有一个我创建的应用程序，我正在尝试在旧的 iphone 3g 上进行测试。我已经多次使用这款手机进行测试，但这个新应用由于某种原因不接受构建。

我做了一些搜索，发现我需要将架构从“armv7”收费到“armv6”，我在项目和目标中都这样做了。这样做之后，我在尝试构建到设备时收到以下错误（构建是应用程序的名称）

`Could not launch "construction" No such file or directory (/Users/Matthew/Library/Developer/Xcode/DerivedData/Construction-cqtujdbjhpvbkrehtfzwvuhvxdrs/Build/Products/Debug-iphoneos/Construction.app/Construction)`

但我可以在模拟器中构建它工作正常......任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T08:12:18.690

非常感谢你——我永远不会出现在清理`UIRequiredDeviceCapabilities`的情况。`Info.plist`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:38:15.220

这些解决方案都不适合我。我正在使用 XCode 4.5 和 ML。我最终要做的（仍然需要彻底测试）是重新创建我的项目，开始清理，然后将所有源和库移动到新项目，并为这个新项目选择我的配置文件。在副本中，我还手动复制了旧 Info.plist 文件的内容，并将它们粘贴到新的 Info.plist 上，全部替换。

就我而言，我正在使用 CorePlot 并且该库需要 armv7（根据链接器），所以我不能只使用 armv6。

我想弄清楚的是（便宜的）XCode 何时更改了一些设置以不作为设备上的调试器运行。我在“project.pbxproj”文件中猜测。否则我无法解释为什么新创建的项目有效而旧项目无效。

我知道这个解决方案可能不适用于所有人，就像我的情况一样，因为会丢失所有 svn 更改。

我会发布这方面的任何进展。

我的下一步是添加 CorePlot 并让项目构建它，而不是使用预构建的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T22:09:36.687

这些都不适合我。但这确实有效......

做通常的事情：我清除了构建目录（cmd-k），清除了 DerivedData（参见 prefs|Locations），从我的 iPhone 5 中删除了该应用程序，拔掉了 iPhone，然后重新启动了 Xcode。

最后这样做：打开 Xcode Organizer。点击设备 | （您的设备名称）| 应用程序。最后，从此处删除您的应用程序（又名。再次从您的设备中删除该应用程序）。

构建并运行...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T21:49:22.597

对不起，我回答了我自己的问题！我想我应该保留它以防其他人遇到同样的问题...我之前没有将 plist 设置更新为 armv6..​​.我确实必须删除 plist 中的 armv7 才能使其正常工作

# ruby - ruby - 通过重复多个哈希的键进行分组

> ID：11802549
> 
> 赞同：2
> 
> 时间：2012-08-03T20:04:25.280
> 
> 标签：ruby, arrays, hash

我有以下数组

```
t = [
  {nil => 1, 10 => 2, 16 => 4, 5=> 10},
  {nil => 9, 5 => 2, 17 => 3, 10 => 2},
  {10 => 4, 5 => 9, 17 => 1}
] 
```

我怎样才能得到这个结果？

```
{nil => [1,9,0],10 => [2,2,4], 16 => [4,0,0], 5 => [10,2,9], 17=>[0,3,1]} 
```

我已经看到我可以使用这样的东西

```
t.group_by{|h| h['key']} 
```

但我不确定是否可以将正则表达式放在括号内

提前致谢

哈维尔

**编辑：**

只是想按数组内每个散列的每个键进行分组，如果键不存在，则该散列的值为 0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:29:16.080

这个难以辨认怎么办：

```
t = [
  {nil => 1, 10 => 2, 16 => 4, 5=> 10},
  {nil => 9, 5 => 2, 17 => 3, 10 => 2},
  {10 => 4, 5 => 9, 17 => 1}
]

# Create hash of possible keys
keys = t.reduce({}) { |m, h| h.each_key { |k| m[k] = [] }; m }

# Iterate through array, for each hash, for each key, append the 
# value if key is in hash or zero otherwise
t.reduce(keys) { |m, h| m.each_key { |k| m[k] << (h[k] || 0) }; m }

puts keys
#=> {nil=>[1, 9, 0], 10=>[2, 2, 4], 16=>[4, 0, 0], 5=>[10, 2, 9], 17=>[0, 3, 1]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:50:38.263

我不认为有任何可用的功能刚刚尝试了哈希

```
 def do_my_work(data) 
    hash = {}
    #get all keys first 
    arr.map{|m| m.keys}.flatten.uniq.each {|a| hash[a]=[]}
    # Now iterate and fill the values
    arr.each do |elm|
      hash.each do |k,v|
        hash[k] << (elm[k].nil? ? 0 : elm[k])
      end
    end
  end   

  hash = do_my_work(t)

  puts hash
  # => {nil=>[1, 9, 0], 10=>[2, 2, 4], 16=>[4, 0, 0], 5=>[10, 2, 9], 17=>[0, 3, 1]} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T21:01:05.250

不是我写过的最优雅的代码，但它可以完成工作并且易于理解：

```
def jqq(a)
  keys = []
  result = {}

  a.each do |h|
    keys += h.keys
  end

  keys.uniq.each do |key|
    result[key] = []
    a.each do |h|
      h.default = 0
      result[key] << h[key]
    end
  end

  result
end

t = [
  {nil => 1, 10 => 2, 16 => 4, 5=> 10},
  {nil => 9, 5 => 2, 17 => 3, 10 => 2},
  {10 => 4, 5 => 9, 17 => 1}
]

puts jqq(t)
# {nil=>[1, 9, 0], 10=>[2, 2, 4], 16=>[4, 0, 0], 5=>[10, 2, 9], 17=>[0, 3, 1]} 
```

# javascript - 是否可以在同一页面上查看一个 html 元素两次，或者我必须创建一个副本？

> ID：11802551
> 
> 赞同：12
> 
> 时间：2012-08-03T20:04:28.693
> 
> 标签：javascript, html, css

我正在创建一个允许查看和编辑“edit-div”中“src-div”内容的站点。我没有直接编辑 src-div，因为它使用 css zoom 属性进行了缩略图。

我考虑过使用 knockout.js 将两个元素绑定到 observable。目前，我已经使用jquery .html() 函数实现了该功能：只需在'select'上将edit-div innerhtml设置为src-div innerhtml，并在对edit-div进行更改后反转该过程以更新src-div。

我想知道我是否真的需要 2 个 div，或者是否有某种方法可以在一个页面上实际查看同一元素两次，并且所做的任何更改都会自动反映在两个“视图”中，从而无需复制 innerhtml 属性回来和在两个元素之间。

本质上，这就像一个镜面效果，没有翻转。

到目前为止我发现的最接近的是：

[http://developer.apple.com/library/safari/#documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Reflections/Reflections.html](http://developer.apple.com/library/safari/#documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Reflections/Reflections.html)

任何执行此任务的推荐做法都值得赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T20:09:23.583

（几乎）您在页面上看到的所有内容在 DOM 中都有对应项。DOM 中的所有内容都会被准确地渲染一次（除了伪类）。并且 DOM 中的每个节点只能有一个父节点（没有排除项）。

不幸的是，您必须克隆特定节点并对两者进行更改，因为当前 CSS 文档中没有复制和翻译机制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T20:22:38.623

如果您使用的是 jquery，您可以使用一个 div 并“克隆”它。您可以阅读此内容以获取更多信息。 [http://api.jquery.com/clone/](http://api.jquery.com/clone/)

如果将 div 的类设置为相同的内容，则可以将更改传播到两者。然后您可以将 .addClass 应用于第二个 div 以应用“反射”效果（如果这是您的最终目标）。

# python - IPython - 循环输入历史记录中的块？

> ID：11802555
> 
> 赞同：2
> 
> 时间：2012-08-03T20:04:46.697
> 
> 标签：python, ipython, python-idle

假设我输入以下内容：

```
def foo():
    print(2) 
```

然后，当我想编辑我的函数时，我按`Up`箭头键重写它，然后一次循环通过我的输入一行（即首先显示`print(2)`，然后显示`def foo():`）。有没有办法让它像 IDLE 那样循环遍历代码块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:10:57.293

我在 Linux 上使用早期版本的 iPython 时遇到了这个问题（我认为是 11）。新版本不这样做。

我目前仍在使用 11，我的解决方案是只使用 iPython qtconsole 来代替你想要的。我认为它会在 Windows 上做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-26T23:58:35.917

由于 IPython 已经停止使用 readline，这个问题又回来了，“解决方案”是使用`PageUp`and`PageDown`代替`C-up`and `C-down`。

# c# - ReportDocument.ExportToDisk() 耗时过长

> ID：11802559
> 
> 赞同：1
> 
> 时间：2012-08-03T20:04:57.290
> 
> 标签：c#, crystal-reports, export

我正在做单元测试，我注意到程序永远不会完成执行该行

```
var reportDoc = new ReportDocument();
reportDoc.Load("M:\ArchiveNodeAccessReport.rpt");
reportDoc.SetDatabaseLogon("", "", ".", "MyDB");
for (int i = 0; i < reportDoc.Database.Tables.Count; i++) {
            reportDoc.Database.Tables[i].ApplyLogOnInfo(logonInfo);
        }
reportDoc.VerifyDatabase();
reportDoc.ExportToDisk(ExportFormatType.PortableDocFormat, "M:\Report.pdf"); 
```

什么可能导致这个问题，我该如何解决这个问题？

提前致谢。

# excel - 从 Excel 2010 中的 Access 2010 中的特定记录中读取特定字段

> ID：11802564
> 
> 赞同：1
> 
> 时间：2012-08-03T20:05:10.867
> 
> 标签：excel, ms-access

在我将 Access(2007) 数据库转换为 Access(2010) 数据库之前，我有以下 Excel VBA 代码运行良好。我使用了 Access(2010) 中的一些新功能来改进我的数据库，但现在我的 Excel 宏将无法运行。我收到以下消息。

运行时错误 3343 未协调的数据库格式

我认为修复可能是一个简单的修复，但我不是程序员，所以我迷路了......提前感谢您的帮助。

```
Sub Get_Hardware()  'Retrieves hardware weights from Access database

'********Note: If program fails to run, in the visual basic editor, under tools, references, you may
'        need to have "Microsoft DAO 3.6 Object Library" downloaded**********

' ******* May also need to register DAO 3.6 if it does not apear in the selectable list by doing the following.
'       1\.  Open Window's start menu and select "Run"
'       2\.  Paste the following into the run windo and tell it to run it....
'            regsvr32 "c:\program files\common files\microsoft shared\dao\dao360.dll"

Do While Not IsEmpty(ActiveCell.Offset(0, 0))

    DAOCopyFromRecordSet "\\fil-ict-07\s0052491$\Engineering\Mass Properties Database (Access 2010)\Mass Properties Database (2010).accdb", "Hardware", "Part Number", ActiveCell
    ActiveCell.Offset(1, 0).Select

Loop

End Sub
___________________________________________________________________________________________

Public Sub DAOCopyFromRecordSet(DBFullName As String, TableName As String, _
    FieldName As String, TargetRange As Range)

Dim db As Database, UW, MC, Des, WQ As Recordset
Dim intColIndex As Integer
Dim MatCode As String

    Set TargetRange = TargetRange.Cells(1, 3)
    Set db = OpenDatabase(DBFullName)

    'SQL Query
    Set UW = db.OpenRecordset("SELECT  Std_Parts.UnitWeight FROM Std_Parts WHERE (((Std_Parts.[Part Number]) = '" & _
            ActiveCell.Offset(0, 0).Value & "'))", dbReadOnly)

    Set MC = db.OpenRecordset("SELECT  Std_Parts.Material_Code FROM Std_Parts WHERE (((Std_Parts.[Part Number]) = '" & _
            ActiveCell.Offset(0, 0).Value & "'))", dbReadOnly)

    Set Des = db.OpenRecordset("SELECT  Std_Parts.Description FROM Std_Parts WHERE (((Std_Parts.[Part Number]) = '" & _
            ActiveCell.Offset(0, 0).Value & "'))", dbReadOnly)

    Set WQ = db.OpenRecordset("SELECT  Std_Parts.Qual FROM Std_Parts WHERE (((Std_Parts.[Part Number]) = '" & _
            ActiveCell.Offset(0, 0).Value & "'))", dbReadOnly)

    ' write recordset
    TargetRange.CopyFromRecordset UW
    Set TargetRange = TargetRange.Cells(1, 0)
    TargetRange.CopyFromRecordset Des
    Set TargetRange = TargetRange.Cells(1, 3)
    TargetRange.CopyFromRecordset MC
    Set TargetRange = TargetRange.Cells(1, 22)
    TargetRange.CopyFromRecordset WQ

    ActiveCell.Offset(0, 6).Select

    ActiveCell.Formula = "=RC[-4]*RC[-1]"
GoOn:
    ActiveCell.Offset(0, -6).Select

    Set UW = Nothing
    Set MC = Nothing
    Set Des = Nothing
    Set WQ = Nothing
    db.Close

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:25:22.210

您需要参考`Microsoft Office 12.0 Access Database Engine Object Library`，而不是旧的 DAO 库。

# java - 在播放框架 2 上使用 ManyToOne 字段绑定表单请求

> ID：11802566
> 
> 赞同：2
> 
> 时间：2012-08-03T20:05:19.403
> 
> 标签：java, scala, playframework, playframework-2.0

当我向我的模型“项目”添加一个多单字段并尝试绑定相应的表单时，我收到此错误。

```
Execution exception
[IllegalStateException: No value] at line 31

=> Item item = itemForm.bindFromRequest().get(); 
```

“项目”**模型**：包装模型；

```
@Entity 
public class Item extends Model {

    @Id
    public Long id;

    @ManyToOne
    @Constraints.Required
    @Formats.NonEmpty
    public Category category;

    @Constraints.Required
    public String title;

    @Constraints.Required
    public String content;

    public String picture;

    (..)    
} 
```

表单**视图**：

```
 @helper.form(action = routes.Application.newItem(), 'id -> "item_form", 'method -> "POST", 'enctype -> "multipart/form-data"){
    <fieldset>
        @helper.inputText(
        itemForm("title"),
        '_label -> "Titre"  )

        @helper.select(
        itemForm("category"), 
        helper.options(Category.list),
        '_label -> "Categorie")

        @helper.textarea(
        itemForm("content"),
        '_label -> "Description")

         @helper.inputFile(
         field = itemForm("picture"), 
         '_display -> "Attachment", 
         '_label -> Messages("Image") )
         <input type="submit" value="Ajouter">

    </fieldset>
    } 
```

**控制器**：_

```
public static Result newItem(){
        Item item = itemForm.bindFromRequest().get(); //SOMETHING GO WRONG HERE
        MultipartFormData body = request().body().asMultipartFormData();
        FilePart picture = body.getFile("picture");  
        if (picture != null) {
              (...)
        }
            else{
              (...)
            }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T06:16:32.113

考虑到类别模型具有 id 字段，类别字段的表单视图应该是。

```
@helper.select(
        itemForm("category.id"), 
        helper.options(Category.list),
        '_label -> "Categorie") 
```

# c# - 循环读取/处理网络太紧？

> ID：11802576
> 
> 赞同：0
> 
> 时间：2012-08-03T20:06:59.700
> 
> 标签：c#, loops

我的应用程序启动并绘制 MDI 父窗体。此时，它等待事件发生。为了启动主循环，用户必须单击工具栏按钮。这调用了主处理例程，这里是代码。

```
 private void MainAPRSTW_Main()
        {
        //frmSplash objfrmSplash = new frmSplash();
        //objfrmSplash.ShowDialog();

        //this is the main list
        TopNodeList MainList = new TopNodeList(this);

        //setup the filter
        FilterList CallFilter = new FilterList();
        CallFilter.ReadPassList();
        CallFilter.ReadBlockList();

        //load what's in the cache
        MainList.ReadCache(this);

        //initiate the Socket
        Socket server = new Socket(AddressFamily.InterNetwork,
                                   SocketType.Stream,
                                   ProtocolType.Tcp);

        //initiate the endpoints
        IPEndPoint AGWPEServer=new IPEndPoint(IPAddress.Parse(AGWIPAddress), AGWPort);

        try
            {
            server.Connect(AGWPEServer);
            }
        catch (SocketException e)
            {
            System.Windows.Forms.MessageBox.Show("Unable to connect to server.");
            junk = e.ToString();//this keeps the compiler from complaining
            return;
            }

        //send command to enable monitor frames
        try
            {
            server.Send(MonitorCommand, 36, SocketFlags.None);
            }
        catch (SocketException e)
            {
            System.Windows.Forms.MessageBox.Show("Unable to write monitor command.");
            junk = e.ToString();//this keeps the compiler from complaining
            return;
            }

        //-problem code starts here--------------------------------------------
        while (TerminateFlag == false)
            {
            if (server.Available > 35)
                {
                //only go here if we have enough data available to process
                //get the next header
                TelemetryHeader.readHeader(server);

                //read the rest of the packet and ignore
                int recv = server.Receive(AGWServerData,
                                          TelemetryHeader.MessageSize,
                                          SocketFlags.None);

                //Is it a telemetry packet?
                if (Detector.isTelemetry(AGWServerData,TelemetryHeader.SourceCallsign))
                    {
                    if (CallFilter.Find(TelemetryHeader.SourceCallsign))
                        MainList.ProcessPacket(AGWServerData, Detector, this);
                    }
                }//close If (server.Available).......
            }//close while (terminateflag)......
        //-problem code stops here-------------------------------------------
        }//close MainAPRSTW_Main 
```

您可以看到我在哪里描述了问题代码。如果我保留此代码，则子窗体只会部分填充，并且程序将无响应。这是一个屏幕截图。

[http://www.blandranch.net/Files/broke.jpg](http://www.blandranch.net/Files/broke.jpg)

如果我注释掉问题代码，所有子窗体都会绘制。这是那个屏幕截图。

[http://www.blandranch.net/Files/working.jpg](http://www.blandranch.net/Files/working.jpg)

所以对我来说很明显我需要做一些不同的事情。我猜这个循环太紧了。是这种情况还是有其他问题？

问题是，什么是正确的方法？我使用后台工作者吗？还有其他方法吗？

查克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:21:52.327

使用 BackgroundWorker 或线程池。UI 线程不应该被阻塞。进入这样的循环会阻止 UI 线程能够处理 UI 更新消息（如重绘控件或更新新条目）。

在您的情况下，我建议使用 BeginConnect 和 BeginSend 而不是 Connect 并使用异步 IO 来进行后台处理。

# c - Pragma Pack Ignored and __attribute__ ((aligned (2), packed)); does not have any effect

> ID：11802582
> 
> 赞同：3
> 
> 时间：2012-08-03T20:07:34.757
> 
> 标签：c, gcc, xilinx

I have been trying to look up this problem but have not found a solution that works. My compiler is ignoring #pragma pack(push) #pragma pack(2) and __ attribute __ ((aligned (2), packed)) does not solve problem as well. The stack is 8 byte aligned and want to convert some structures to be 2 byte aligned. -fpack-struct works but it affects all structures.

I would like to use #pragma pack.

I am programming a xilinx microblaze in SDK 13.3 eclipse IDE GCC #4.1.2

I guess I dont understand what is making the compiler ignore the Pragma pack.. I dont want to turn the warnings off I would like to use it.

```
#pragma pack(push)
#pragma pack(2)
struct _Size_Test
{

  union
  {
    struct{
        int8    x;
        int8    y;
     };
     int16    z;
  };
}Size_Test;
#pragma pack(pop) 
```

sizeof(Size_test) = 4 when it should be 2

adding *attribute*((aligned(2),packed)) does not work

```
struct _Size_Test
{

  union
  {
    struct{
        int8    x;
        int8    y;
     };
     int16    z;
  };
}Size_Test _attribute_((aligned(2),packed)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:36:26.293

结构大小为四个字节的原因是由于内部结构包含 x 和 y 字段。使用您指定的 2 字节打包编译指示，这些字段中的每一个都将是 2 字节对齐的，使联合中最长的成员为 4 字节长。

如果紧凑性对您很重要，则将 1 字节打包与显式填充字段结合使用。在这个特定的示例中，甚至不需要填充：

```
#pragma pack(push, 1)

struct _Size_Test
{
    union
    {
        struct
        {
            int8 x;
            int8 y;
        };

        int16 z;
    };
} Size_Test; 
```

以下代码段显示了显式填充如何工作：

```
#pragma pack(push, 1)

struct _Size_Test
{
    union
    {
        struct
        {
            int8 x;
            int8 pad1;
        };

        int16 z;
    };
} Size_Test; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T00:27:57.377

你可以为你的结构使用这样的东西：

```
struct __packed__
{
    char* member_one;
    int *member_two;
    .... 
} my_struct; 
```

您还可以尝试使用以下方法抑制标准对齐：

```
int *__unaligned my_int_pointer; 
```

希望这有帮助。

问候。

# android - 自定义列表视图适配器最简单的过滤方法是什么？

> ID：11802587
> 
> 赞同：0
> 
> 时间：2012-08-03T20:08:13.117
> 
> 标签：android, sqlite, filter, textview, adapter

![在此处输入图像描述](../Images/a79563e5e9c7cc802abc15d3aa7c7df8.png)

我有一个连接 sqllite 数据库的 EditText 和自定义 ListView 适配器。我可以添加、删除和编辑记录。下一个目标是通过 EditText 过滤记录。我写了这段代码，但没有正确过滤。

```
private EditText et_search_filter;
private TextWatcher watcher_search_filter;
et_search_filter = (EditText) findViewById(id.et_search_box);
et_search_filter.addTextChangedListener(watcher_search_filter);

watcher_search_filter = new TextWatcher() {
public void onTextChanged(CharSequence s, int start, int before, int count) {
    adapter.getFilter().filter(s);              
}

public void beforeTextChanged(CharSequence s, int start, int count, int after) {
}

public void afterTextChanged(Editable s) {
} 
```

};

这是我的光标方法：

```
public ArrayList<Item> item_get_all() {
    ArrayList<Item> itemList = new ArrayList<Item>();

    String selectQuery = "SELECT * FROM " + TABLE_ITEMS;

    SQLiteDatabase db = this.getWritableDatabase();

    Cursor cursor = db.rawQuery(selectQuery, null);

    if (cursor.moveToFirst()) {
        do {
            Item dbitems = new Item();
            dbitems.setID(Integer.parseInt(cursor.getString(cursor.getColumnIndex(items_id))));
            dbitems.setName(cursor.getString(cursor.getColumnIndex(items_item_name)));
            dbitems.setBrand(cursor.getString(cursor.getColumnIndex(items_brand)));
            dbitems.setItemType(cursor.getString(cursor.getColumnIndex(items_type)));
            dbitems.setModel(cursor.getString(cursor.getColumnIndex(items_model)));
            dbitems.setNote(cursor.getString(cursor.getColumnIndex(items_note)));
            dbitems.setPurchaseFrom(cursor.getString(cursor.getColumnIndex(items_purchase_from)));
            dbitems.setPurchasePrice(cursor.getString(cursor.getColumnIndex(items_price)));
            dbitems.setPurchaseDate(cursor.getLong(cursor.getColumnIndex(items_purchase_date)));
            itemList.add(dbitems);              
        } while (cursor.moveToNext());
    }
    db.close();
    return itemList;
} 
```

我这样称呼光标适配器：

```
public void getItemList() {     
    ArrayList<Item> itemArray = new ArrayList<Item>();      
    itemArray = db.item_get_all();      
    adapter = new ItemAdapter(this, R.layout.items_row, itemArray);
    ilistViewItems.setAdapter(adapter);                     
} 
```

这是我的 ItemAdapter.java 和 Item_row.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <TextView
        android:id="@+id/tv_item_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="@string/nullstr"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#ffffff"
        android:textSize="13dp"
        android:textStyle="bold" />
    <TextView
        android:id="@+id/tv_item_brand"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/tv_item_name"
        android:text="@string/nullstr"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#bbbbbb"
        android:textSize="11dp" />
    <TextView
        android:id="@+id/tv_purchase_date"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/tv_item_name"
        android:text="@string/nullstr"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#aabbbb"
        android:textSize="11dp" />
</RelativeLayout>

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;
import db.Item;
public class ItemAdapter extends ArrayAdapter<Item>{
private ArrayList<Item> items;
private TextView item_name;    
private TextView item_brand;
private TextView item_purchase_date;      

public ItemAdapter(Context context, int textViewResourceId, ArrayList<Item> objects) {
    super(context, textViewResourceId, objects);
    this.items = objects;

}

public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        LayoutInflater vi = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = vi.inflate(R.layout.items_row, null);
    }

    item_name = (TextView) convertView.findViewById(R.id.tv_item_name);    

    item_brand = (TextView) convertView.findViewById(R.id.tv_item_brand);
    item_purchase_date = (TextView) convertView.findViewById(R.id.tv_purchase_date);       

    item_name.setText(items.get(position).getName());       
    item_brand.setText("[" + items.get(position).getItemType() + "] " + items.get(position).getBrand() + " " + items.get(position).getModel());
    item_purchase_date.setText(items.get(position).getPurchasedDateStr());

    return convertView;
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T23:04:53.503

**改写**

你实现了 Item 的 toString() 方法了吗？

```
public class Item {
    ...

    // Define a method to return a String that describes each Item, preferably unique String
    public String toString() {
        return name + "  " + brand + "  " + model + "  " + type;
    }
} 
```

当我对您发布的所有内容都使用此方法时，EditText 会很好地过滤 ListView。让我知道这个简单的更改是否适合您。

**效率**

我想指出一些技巧，以使您现有的代码运行得更快。

查看数据库适配器的 get_item_all() 方法。

*   对于一个新的Cursor，你只需要调用moveToNext()，当有有效数据要读取时，这将返回true。
*   SQliteDatabases 中的 ID 是`long`数据类型。您应该将 Item 中的 id 从 an 更改`int`为 a`long`并使用 Cursor.getLong()。
*   *您为每个*项目搜索每个列的索引。查找索引一次并将它们存储在本地。

总之，这更有效：

```
int idIndex = cursor.getColumnIndex(items_id);
int nameIndex = cursor.getColumnIndex(items_item_name);
//etc.

while (cursor.moveToNext()) {
    Item dbitems = new Item();

    dbitems.setID(cursor.getLong(idIndex));
    dbitems.setName(cursor.getString(nameIndex));
    ...
    itemList.add(dbitems);              
} 
```

接下来，查看 Item.getView()。

*   您只需要创建一个 LayoutInflater 并将其存储在类中。我建议在你的构造函数中初始化它。
*   `item.get(position)`每次调用 getView() 时，您都会使用 findViewById() 和多次。每当用户滚动 ListView 时，适配器使用 getView() 来显示每一行，您只需要在`convertView`为 null 时调用 findViewById()。

全部一起：

在构造函数中创建一个名为`LayoutInflater mInflater`并初始化它的变量：

```
mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

在您的 ItemAdapter 添加这个嵌套类：

```
public class ViewHolder {
    TextView name;
    TextView brand;
    TextView purchase_date;
} 
```

在 getView() 中：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder viewHolder;
    Item item = (Item) getItem(position);
    if(convertView == null) {
        convertView = mInflater.inflate(R.layout.list_item, parent, false);

        viewHolder = new ViewHolder();
        viewHolder.name = (TextView) convertView.findViewById(R.id.tv_item_name);
        viewHolder.brand = (TextView) convertView.findViewById(R.id.tv_item_brand);
        viewHolder.purchase_date = (TextView) convertView.findViewById(R.id.tv_purchase_date);
        convertView.setTag(viewHolder);
    }
    else
        viewHolder = (ViewHolder) convertView.getTag();

    viewHolder.name.setText(item.getName());
    viewHolder.brand.setText("[" + item.getItemType() + "] " + item.getBrand() + " " + item.getModel());
    viewHolder.purchase_date.setText(item.getPurchasedDateStr());
    return convertView;
} 
```

如果已经创建了 convertView，您是否看到工作量减少了多少？希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:50:57.940

我还没有阅读所有内容，但他说明了过滤方法。因此，我会推荐[autoCompleteTextView](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)，因为它会在达到一种可用文本时完成。当你按下一个字母让我们说“S”它会显示三星或索尼 acd

网页示例：

```
public class CountriesActivity extends Activity {
     protected void onCreate(Bundle icicle) {
         super.onCreate(icicle);
         setContentView(R.layout.countries);

         ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                 android.R.layout.simple_dropdown_item_1line, COUNTRIES);
         AutoCompleteTextView textView = (AutoCompleteTextView)
                 findViewById(R.id.countries_list);
         textView.setAdapter(adapter);
     }

     private static final String[] COUNTRIES = new String[] {
         "Belgium", "France", "Italy", "Germany", "Spain"
     };
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T14:09:04.757

看起来你的`ItemAdapter`扩展`ArrayAdapter`，所以你应该创建你的自定义过滤器。检查这个[`SO question`](https://stackoverflow.com/q/2718202/1050058)和 [另一个类似](https://stackoverflow.com/q/2519317/1050058)的。在第一个链接中，还有另一个选项是`override`toString 在您的`Item`类中返回您要过滤的字段。自己检查。如果您想过滤光标适配器，请遵循 Sam 指南（在您发布的代码中，您从光标获取数据并放入您的类，因此它不是光标适配器）。`FilterQueryProvider`使用 a或 return注册您的`filtered cursor`适配器[`runQueryOnBackgroundThread`](http://developer.android.com/reference/android/widget/CursorAdapter.html#runQueryOnBackgroundThread%28java.lang.CharSequence%29)

# c - RegEnumKeyEx 无法正常工作

> ID：11802590
> 
> 赞同：0
> 
> 时间：2012-08-03T20:08:25.537
> 
> 标签：c, winapi, registry

我正在尝试创建一个列出特定（Windows 注册表）键的所有子键的函数。

发生的事情是只有第一个项目被正确输出，所有其他项目都被截断或重复 - 我认为这是一个缓冲区问题。

我已经阅读了函数文档，但对我帮助不大。

这是代码：

```
#include<stdio.h>
#include<windows.h>

void print_list(HKEY hkey, char* path){

char dwValue[255];
DWORD  dwSize = 0;
DWORD n; // subkeys
HKEY tmp;
int i;

if(RegOpenKeyEx(hkey, path, 0, KEY_READ, &tmp) == ERROR_SUCCESS){

    DWORD  dwSize = sizeof(dwValue);

    RegQueryInfoKey(tmp,NULL,NULL,NULL,&n,NULL,NULL,NULL,NULL,NULL,NULL,NULL);      

    for(i=0; i< n; i++){
        RegEnumKeyEx(tmp,i,dwValue,&dwSize,NULL,NULL,NULL,NULL);
        printf("%s\n", dwValue);
    }

    RegCloseKey(tmp);
}
}

int main(){
print_list(HKEY_LOCAL_MACHINE, "SOFTWARE");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:17:00.927

在调用 to 之前添加以下行`RegEnumKeyEx()`：

```
dwSize = sizeof(dwValue); 
```

as`dwSize`是输入和输出参数。在输入时，它说明缓冲区的大小。来自[`RegEnumKeyEx()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724862%28v=vs.85%29.aspx)：

> 指向变量的指针，该变量指定由 lpName 参数指定的缓冲区大小（以字符为单位）。此大小应包括终止空字符。如果函数成功，lpcName 指向的变量包含存储在缓冲区中的字符数，不包括终止空字符。

请注意，您应该**始终检查函数的返回值**（就像您为 所做的那样`RegOpenKeyEx()`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:17:38.177

如果您检查 RegEnumKeyEx 调用的返回代码，您会看到您得到 0xEA，这意味着数据比您提供的缓冲区长。

这是因为 dwSize 是一个输入/输出参数。当您调用它时，该函数假定缓冲区最后有 dwSize 个字符可用。返回时，dwSize 已更改为实际数据的大小。这使得 dwSize 比实际缓冲区大小小得多。在下一次调用时，它可能认为您没有足够的空间，而是返回错误代码。

您需要在每次调用之前重置 dwSize。

# mysql - MySQL union on two tables with cumulative value aka "bank statement"

> ID：11802598
> 
> 赞同：0
> 
> 时间：2012-08-03T20:08:51.460
> 
> 标签：mysql

I'd really appreciate your help.

The situation is I have these two tables:

**Table 1: debits**. Example:

```
 date       item   value_debits
    2012-08-01 item1  10
    2012-08-03 item2  15 
```

**Table 2: credits**. Example:

```
 date       item   value_credits
    2012-07-31 item3  20
    2012-08-02 item4  30 
```

**Desired result:**

```
 date       item   value  balance
    2012-07-31 item3  20     20
    2012-08-01 item1  (10)   10
    2012-08-02 item4  30     40
    2012-08-03 item3  (15)   25 
```

I can easily calculate cumulative values for each of the tables separately:

```
set @cumulative :=0;
select date, item, value_debits, @cumulative := @cumulative + value_debits AS "Cumulated" 
from debits
order by date DESC 
```

It's not too difficult to union and order by date these two tables to get this:

```
 date       item   value
    2012-07-31 item3  20
    2012-08-01 item1  10
    2012-08-02 item4  30
    2012-08-03 item3  15 
```

But how to get to the desired result is beyond me.

Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:28:27.720

您可以使用：

```
SELECT     a.date,
           a.item,
           CASE 
               WHEN a.value < 0 THEN CONCAT('(', a.value, ')') 
               ELSE a.value
           END AS value,
           @bal:=@bal+a.value AS balance
FROM       (
           SELECT date, item, value_debits*-1 AS value FROM debits
           UNION ALL
           SELECT date, item, value_credits FROM credits
           ) a
CROSS JOIN (SELECT @bal:=0) bal_init
ORDER BY   a.date 
```

* * *

看看这个[*SQLFiddle 演示*](http://sqlfiddle.com/#!2/6ca67/3/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:48:15.227

这是我公认的低效尝试您的解决方案。如果有时间，我会尝试制定一个更有效的方法。但是，它确实有效。

```
SELECT U.`date`, U.item, U.value, 
  (SELECT SUM(U2.value) FROM 
     (SELECT `date`,item,-value_debits as value
      FROM debits
      UNION ALL
      SELECT `date`,item,value_credits as value
      FROM credits
     ) AS U2
   WHERE `date` <= U.date) 
   AS balance 
FROM 
  (SELECT `date`,item,-value_debits as value
   FROM debits
   UNION ALL
   SELECT `date`,item,value_credits as value
   FROM credits
  ) AS U
ORDER BY `date` 
```

如果贷方和借方在同一张表中，这会稍微容易一些。

**更好的解决方案**

```
SET @total=0;
SELECT U.`date`, 
       U.item, 
       CASE WHEN U.value<0 
          THEN CONCAT('(', -U.value, ')') 
          ELSE U.value
       END as value, 
       @total:=@total+value AS balance
FROM (SELECT `date`,item,-value_debits as value
      FROM debits
      UNION ALL
      SELECT `date`,item,value_credits as value
      FROM credits
     ) AS U
ORDER BY U.`date`; 
```

# emacs - Lisp：创建一个宏以循环通过每个文档创建的列表

> ID：11802609
> 
> 赞同：4
> 
> 时间：2012-08-03T20:09:56.333
> 
> 标签：emacs, latex, elisp

假设我想创建一个新文档，并快速循环浏览一个列表。如果只是为了一个“词”，我认为应该有一个通用的方法来做到这一点。

例如：

```
"blue orange red yellow black white" 
```

有谁知道我创建时如何循环浏览这些项目：

```
\begin{orange} 
```

...并且我想按一个键循环浏览此列表，用列表中的下一个项目替换橙色（然后在相反方向执行此过程不会很难）？

我用宏尝试了许多不同的想法（将列表放在文档的顶部，并进行了一大堆 i-search），但这并没有削减它。

我愿意将列表放入 elisp 文件中，尽管我不知道如何在 elisp 中使用该变量，比如 LaTeX 文档 (.tex)。

![](../Images/a5e8090869f5c7b21cdd4d2447642d43.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T07:54:41.897

好吧，这可能是可能的，但取决于您愿意付出多少努力来编写 eLisp 代码以使其工作。仅通过一些配置选项是不可能的。我会考虑通过向其添加新源来扩展自动完成功能，例如：

```
(defvar tex-tag-ac-sources
  '((init . tex-tag-ac-init)
    (requires . 0)
    (candidates . tex-tag-ac-candidates)
    (document . tex-tag-ac-documentation)
    (match . tex-tag-completion-filter)
    (prefix . tex-tag-ac-prefix-matcher)
    (symbol . "s"))
  "The source generator for autocompletion needed for interaction 
with auto-complete") 
```

其中`tex-tag-ac-candidates`、`tex-tag-ac-documentation`和是执行自动补全的函数`tex-tag-completion-filter`。`tex-tag-ac-prefix-matcher`即，当自动完成过程针对指定前缀开始时调用一次 init 函数。它被称为无参数。候选者是负责显示过滤后的候选者列表的函数，它被称为无参数，您将在过滤器函数中过滤候选者，它使用到目前为止收集的前缀和到目前为止的候选者列表来调用。最后，在文件的文本上调用 matcher 函数以查看是否需要完成。因此，如果它返回`t`，则调用 init ，然后在您键入时循环通过 filter-candidates。

虽然这有点涉及......你肯定会完成你想要的任何事情。显然，如果源代码中的这些函数是您定义的，那么，如果您愿意，您可以动态读取完成参数或以某种方式动态生成它们。

啊，您可以通过以下方式将源添加到自动完成：

```
(auto-complete (list tex-tag-ac-sources)) 
```

如果在每次通话的基础上进行，或者

```
(setq ac-sources (list tex-tag-ac-sources <other sources>)) 
```

您可以在此处找到更多信息：http: [//cx4a.org/software/auto-complete/manual.html#Using_Source](http://cx4a.org/software/auto-complete/manual.html#Using_Source)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T14:31:41.537

**编辑：**我将宏翻译成一个函数。

这是我做到的一种方式。我创建了一个名为“list.list”的文件，其中保存了我的“列表”。我在那里保存了 Beamer 的 LaTeX 模板。我这样插入它们：

```
Antibes Bergen Berkeley Berlin ..... Antibes 
```

请注意，您应该始终将第一个条目放入两次以允许它循环。

这是代码：

```
(defun cycle-list-word ()
  (interactive)
   (right-word)
   (backward-kill-word 1)
   (find-file "/emacs-24.1/list.list")
   (search-forward (substring-no-properties (car kill-ring)) nil t)
   (right-word)
   (backward-kill-word 1)
   (bury-buffer)
   (yank)
) 
```

# javascript - 在 d3.js 中将鼠标事件分配给 svg:text

> ID：11802615
> 
> 赞同：4
> 
> 时间：2012-08-03T20:10:19.763
> 
> 标签：javascript, svg, d3.js

我正在尝试为`svg:text`元素获取鼠标事件。我注意到这是`.on("click", ...)`有效的，但其他事件如`"mouseover"`,`"mousemove"`和`"mouseout"`don 无效。

查看[Health & Wealth of Nations](http://bost.ocks.org/mike/nations/)示例，我看到所采用的方法是用不可见的文本覆盖文本，`svg:rect`并将其分配给事件。如果有一个简单的盒子，这很好，但如果有几个，它似乎会变得令人厌烦和凌乱。

是否有规范的方法来处理文本的鼠标悬停事件？

为了尽可能具体，我尝试创建一个标签云并为每个标签获取这些悬停事件。我可能只用`div`s 完成它并完成它，但我想知道是否有一种简单的方法可以*在*SVG 容器中完成它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T22:02:43.323

我想将事件分配给文本元素的问题在于它们只在实际文本上触发，即不是边界框。理论上它应该可以工作（至少我不知道在这方面对文本有任何特殊处理）——你能举一个具体的例子吗？

您还可以尝试将每个文本元素放入一个`svg:g`元素中并将事件处理程序附加到该元素中。

# mysql - 大表连接的mysql查询优化

> ID：11802624
> 
> 赞同：4
> 
> 时间：2012-08-03T20:11:15.133
> 
> 标签：mysql, join, query-optimization, subquery

我正在为广播电台创建一个报告，该报告会生成在线听众的日志，以记录 ip、日期、时间、总用户收听等。

听众表

```
client_ip        date        time      date_time            listeners  
---------------  ----------  --------  -------------------  -----------
166.147.81.179   2012-04-30  00:19:46  2012-04-30 00:19:46            1
64.12.243.203    2012-04-30  04:38:37  2012-04-30 04:38:37            1
198.228.211.195  2012-04-30  05:36:33  2012-04-30 05:36:33            1
198.228.211.195  2012-04-30  05:36:34  2012-04-30 05:36:34            2
198.228.211.195  2012-04-30  05:36:35  2012-04-30 05:36:35            2
198.228.211.195  2012-04-30  05:36:35  2012-04-30 05:36:35            3
166.147.81.179   2012-04-30  05:47:13  2012-04-30 05:47:13            2
76.170.251.97    2012-04-30  06:01:37  2012-04-30 06:01:37            2
76.170.251.97    2012-04-30  06:01:39  2012-04-30 06:01:39            2
76.170.251.97    2012-04-30  06:01:39  2012-04-30 06:01:39            2 
```

同时记录歌曲的详细信息（标题、艺术家、专辑、长度、日期、时间）等。

播放列表表

```
title                       artist                           length_in_secs  played_date  played_time  start_date_time      end_date_time        
--------------------------  -------------------------------  --------------  -----------  -----------  -------------------  ---------------------
We Found Love               Rihanna                                     184  2012-04-30   00:00:21     2012-04-30 00:00:21  2012-04-30 00:03:25  
Photograph                  Nickelback                                  216  2012-04-30   00:03:31     2012-04-30 00:03:31  2012-04-30 00:07:07  
Not Over You                Gavin DeGraw                                214  2012-04-30   00:07:18     2012-04-30 00:07:18  2012-04-30 00:10:52  
Stereo Hearts               Gym Class Heroes Ft Adam Levine             210  2012-04-30   00:10:55     2012-04-30 00:10:55  2012-04-30 00:14:25  
I Gotta Feeling             Black  Eyed Peas                            243  2012-04-30   00:15:03     2012-04-30 00:15:03  2012-04-30 00:19:06  
One Thing Leads To Another  Fixx                                        182  2012-04-30   00:19:14     2012-04-30 00:19:14  2012-04-30 00:22:16  
Raise Your Glass            Pink                                        202  2012-04-30   00:22:29     2012-04-30 00:22:29  2012-04-30 00:25:51  
Better In Time              Leona Lewis                                 216  2012-04-30   00:30:13     2012-04-30 00:30:13  2012-04-30 00:33:49  
Tainted Love                Soft Cell                                   153  2012-04-30   00:33:56     2012-04-30 00:33:56  2012-04-30 00:36:29  
Haven't Met You Yet         Michael Buble'                              242  2012-04-30   00:37:14     2012-04-30 00:37:14  2012-04-30 00:41:16 
```

因此，报告要求是“在日期或日期范围内有多少用户收听歌曲”，我这样编写查询。它给出了正确的输出（据我所知），但查询执行所需的时间与数据大小不成比例 - 从 5 秒到 5-10 分钟，具体取决于日期范围。

```
SELECT DATE_FORMAT(p.played_date, "%m/%d/%Y") `played_date`, p.played_time, p.length_in_secs, p.title, p.artist, RTRIM(p.label) `label`, RTRIM(p.album) `album`, IFNULL((SELECT SUM(l.listeners) FROM listeners `l` WHERE l.date_time >= p.start_date_time AND l.date_time <= p.end_date_time LIMIT 1), 0) `listeners` FROM playlists `p` WHERE p.title <> "" AND (p.played_date >= '2012-04-30' AND p.played_date <= '2012-05-30') HAVING listeners > 0 ORDER BY p.title ASC;
// formatted //
SELECT 
    DATE_FORMAT(p.played_date, "%m/%d/%Y") `played_date`,
    p.played_time,
    p.length_in_secs,
    p.title,
    p.artist,
    RTRIM(p.label) `label`,
    RTRIM(p.album) `album`,
    IFNULL(
        (SELECT 
            SUM(l.listeners) 
        FROM
            listeners `l` 
        WHERE l.date_time >= p.start_date_time 
            AND l.date_time <= p.end_date_time 
        LIMIT 1),
        0
    ) `listeners` 
FROM
    playlists `p` 
WHERE p.title <> "" 
    AND (
        p.played_date >= '2012-04-30' 
        AND p.played_date <= '2012-05-30'
    ) 
HAVING listeners > 0 
ORDER BY p.title ASC 
```

输出：

```
played_date  played_time  length_in_secs  title                  artist                    label               album               listeners  
-----------  -----------  --------------  ---------------------  ------------------------  ------------------  ------------------  -----------
04/30/2012   08:06:26                228  Brighter Than The Sun  Colbie Caillat (Cal-Lay)  Universal Republic  All of You                    9

04/30/2012   08:44:16                248  Breakfast At Tiffanys  Deep Blue Something                                                         6

04/30/2012   18:06:40                253  Bizarre Love Triangle  New Order                                                                   2

04/30/2012   17:05:21                183  Animal                 Neon Trees                Mercury             Habits                        5

04/30/2012   08:58:05                253  Always Be My Baby      Mariah Carey                                                                2

04/30/2012   07:25:52                264  Already Gone           Kelly Clarkson            RCA                 All I Ever Wante              3

04/30/2012   16:21:33                236  All The Right Moves    One Republic              Interscope          Waking Up                     7

04/30/2012   11:58:26                199  All That She Wants     Ace Of Base                                                                12

04/30/2012   11:14:17                247  All I Wanna Do         Sheryl Crow                                                                 2

04/30/2012   16:12:59                235  A Thousand Miles       Vanessa Carlton                                                             5 
```

有没有办法优化这个查询以更快地运行，或者编写一个新的、更快的查询？请建议/帮助我。谢谢！！

**使用解释**

```
EXPLAIN playlists;

Field            Type              Null    Key     Default            Extra                        
---------------  ----------------  ------  ------  -----------------  -----------------------------
playlist_id      int(10) unsigned  NO      PRI     (NULL)             auto_increment               
title            varchar(255)      YES             (NULL)                                          
artist           varchar(255)      YES             (NULL)                                          
label            varchar(255)      YES             (NULL)                                          
album            varchar(255)      YES             (NULL)                                          
length_in_secs   int(11)           NO              (NULL)                                          
played_date      date              NO              (NULL)                                          
played_time      time              NO              (NULL)                                          
start_date_time  datetime          NO              (NULL)                                          
end_date_time    datetime          NO              (NULL)                                          
added_date       datetime          NO              (NULL)                                          
modified_date    timestamp         NO              CURRENT_TIMESTAMP  on update CURRENT_TIMESTAMP

EXPLAIN listeners;

Field          Type                 Null    Key     Default            Extra                        
-------------  -------------------  ------  ------  -----------------  -----------------------------
listener_id    bigint(20) unsigned  NO      PRI     (NULL)             auto_increment               
station_id     int(10) unsigned     NO              (NULL)                                          
client_ip      varchar(50)          NO              (NULL)                                          
time           time                 NO              (NULL)                                          
date           date                 NO              (NULL)                                          
date_time      datetime             YES             (NULL)                                          
timestamp      bigint(20) unsigned  NO              (NULL)                                          
listeners      int(10) unsigned     NO              (NULL)                                          
processes      int(10) unsigned     NO              (NULL)                                          
uid            int(10) unsigned     NO              (NULL)                                          
user_agent     varchar(255)         YES             (NULL)                                          
added_date     datetime             NO              (NULL)                                          
modified_date  timestamp            NO              CURRENT_TIMESTAMP  on update CURRENT_TIMESTAMP 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T07:02:44.467

使用`INNER JOIN`而不是`correlated subquery`用作：

```
SELECT DATE_FORMAT(p.played_date, "%m/%d/%Y") played_date,
       p.played_time,
       p.length_in_secs,
       p.title,
       p.artist,
       RTRIM(p.label) label,
       RTRIM(p.album) album,
       SUM(l.listeners) listeners
FROM playlists p
     INNER JOIN listeners l
         ON l.date_time BETWEEN p.start_date_time AND p.end_date_time
WHERE p.title <> "" AND
      p.played_date BETWEEN '2012-04-30' AND  '2012-05-30'
ORDER BY p.title ASC; 
```

考虑在表上添加以下索引可以帮助您提高查询性能。检查以下索引`EXPLAIN`：

```
playlists KEY (played_date, start_date_time, end_date_time, title);

listeners KEY (date_time, listeners); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:21:24.987

正如评论中所讨论的，您的查询实际上并没有按照您的意愿执行。鉴于您拥有的数据，我会在 SQL 之外亲自处理这些数据，以创建一个表来存储每首歌曲有多少人听过，然后您可以在 SQL 中查询该表以获取此信息。但是，如果您绝对希望 SQL 查询来执行此操作，则它需要类似于这种怪物；

```
SELECT 
DATE_FORMAT(p.played_date, "%m/%d/%Y") `played_date`,
p.played_time,
p.length_in_secs,
p.title,
p.artist,
RTRIM(p.label) `label`,
RTRIM(p.album) `album`,
SUM(SMALLEST(prev_listeners,next_listeners,dur_listeners) AS listeners
FROM (
  SELECT
  P.start_date_time,
  SUBSTRING_INDEX(GROUP_CONCAT(l_before.listeners ORDER BY l_before.date_time DESC),',',1) AS prev_listeners, 
  SUBSTRING_INDEX(GROUP_CONCAT(l_after.listeners ORDER BY l_after.date_time ASC),',',1) AS next_listeners, 
  MIN(l_during) AS dur_listeners
  FROM playlists p
  JOIN listeners l_before ON l_before.date_time < p.start_date_time 
  LEFT JOIN listeners l_after ON l_before.client_ip = l_after.client_ip AND l_after.date_time > p.end_date_time 
  LEFT JOIN listeners l_during ON l.client_ip = l_during.client_ip AND l_during.date_time BETWEEN p.start_date_time AND p.end_date_time
  WHERE p.title <> ""
  AND p.played_date BETWEEN '2012-04-30' AND '2012-05-30'
  GROUP BY p.start_date_time, l_before.client_ip
) l
JOIN playlists p USING (start_date_time)
GROUP BY p.start_date_time
ORDER BY p.start_date_time 
```

其中 SMALLEST 是一个返回最小 non_null 参数的函数。

这将比您当前的查询花费更长的时间，但这是我能想到的最有效的方法来获取每首歌曲的实际听众数量。

哦，这是假设当来自 ip 地址的每个人都停止侦听时，日志记录了一行零侦听器，否则真的没有办法做到这一点。

# javascript - 将数据传递到不同域中的 iframe

> ID：11802625
> 
> 赞同：0
> 
> 时间：2012-08-03T20:11:19.687
> 
> 标签：javascript, cross-domain, browser-security

我与 salesforce 合作，我需要注入一个带有一些 javascript 逻辑的 iframe。该逻辑需要从父框架中读取一个变量。

问题是父 html 托管在 force.com，静态 iframe html 托管在 salesforce.com 和 Chrome 给我一个消息“不安全的 Javascript 尝试使用 URL 访问框架......”

我试图将变量放在 iframe 的属性中，并从内部（window.frameElement）到达它，但它不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:14:58.690

如果您的应用程序不需要使用 Internet Explorer 7 或更低版本，请查看[window.postMessage()](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)。

# iphone - 如何在 Xcode 4 上“清除 Info.plist 的文件历史记录”？

> ID：11802626
> 
> 赞同：0
> 
> 时间：2012-08-03T20:11:21.560
> 
> 标签：iphone, ios, xcode, xcode4, ios-simulator

我在模拟器中运行项目时遇到问题，这里[Xcode 错误：无法启动模拟应用程序](https://stackoverflow.com/questions/822972/xcode-error-failed-to-launch-simulated-application)，似乎是解决方案。问题是我在 XCode 4 中找不到“清除文件历史记录”选项。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:13:45.383

`Product>Clean`

或者

`Shift+Command+K`

是我相信你正在寻找的。`Clean`应该是一样的`Clear File History`

# php - 如何访问关联多维数组中的键 => 值

> ID：11802627
> 
> 赞同：-1
> 
> 时间：2012-08-03T20:11:21.427
> 
> 标签：php, arrays

我有一个这样的数组

```
array(
    (int) 0 => array(
        'MenuItemReview' => array(
            'menu_item_id' => '1'
        ),
        (int) 0 => array(
            'avgRating' => '4.0000'
        )
    )
) 
```

我正在尝试访问 avgRating 的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:15:45.073

如果将该多维数组加载到变量 $arr 中，则可以`avgRating`通过键入来访问该值`$arr[0][0]['avgRating']`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T20:16:26.867

以下代码将您的数据加载到`$array`并最终设置`$avgRating`为您想要的。

```
$array = array(
    0 => array(
        'MenuItemReview' => array(
            'menu_item_id' => '1'
        ),
        0 => array(
            'avgRating' => '4.0000'
        )
    )
);
$avgRating = $array[0][0]['avgRating']; 
```

# linux - 在 debian 中更新软件包

> ID：11802629
> 
> 赞同：1
> 
> 时间：2012-08-03T20:11:24.913
> 
> 标签：linux, debian

我在我的 1.2.11 版本的 debian linux 中安装了 tshark。我想将它更新到 1.8.0-1。我正在尝试使用它更新

```
apt-get update 
```

但是，它仍然没有安装最新版本。这是更新软件包的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:21:05.937

`apt-get update`（作为须藤）

```
apt-get dist-upgrade 
```

希望这有帮助。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:21:26.067

打电话

```
apt-get update 
```

仅使用可用软件包更新列表。

你需要跑

```
apt-get upgrade 
```

在“apt-get update”之后安装系统上当前安装的所有软件包的最新版本。

请参阅 apt-get 的手册页（您也可以在线查看，例如[http://linux.die.net/man/8/apt-get](http://linux.die.net/man/8/apt-get)）

# jquery - CSS Sprite 按钮（在锚点中跨度？）

> ID：11802630
> 
> 赞同：1
> 
> 时间：2012-08-03T20:11:30.510
> 
> 标签：jquery, css, inline-styles

所以我有一个链接，它可以是任何东西。

```
<a href="http://www.domain.com/page" class="readMore">
    <span>Read More</span>
<a> 
```

或者

```
<a href="http://www.domain.com/page" class="readMore">
    <span>You should REALLY click this button!</span>
</a> 
```

我想使用我熟悉的 CSS 精灵。但是 - 由于此文本可能变化很大，我不能真正使用“100px 宽”按钮的 2 或 3 次迭代。所以我找到了一种用 A 和 SPAN 分割背景的方法。效果很好！......除非您将鼠标悬停在最右侧，否则只有右上角会激活悬停状态。我在这里设置了一个小提琴给你看。

[http://jsfiddle.net/demchak_alex/qkQQy/](http://jsfiddle.net/demchak_alex/qkQQy/)

将鼠标悬停在中心上，效果很好。将鼠标悬停在最右侧，它看起来并不那么性感。

有没有一种简单的方法可以解决我忽略的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:15:20.237

添加另一个选择器以`span`根据其悬停的父级设置样式：

```
.readMore:hover span,
.readMore span:hover {
    background-position: 0 -48px;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/qkQQy/1/)。

现在，如果它`span`本身悬停，或者只是父`a.readMore`元素悬停，它应该看起来相同。

# php - 来自单一表单的多个值

> ID：11802631
> 
> 赞同：0
> 
> 时间：2012-08-03T20:11:31.760
> 
> 标签：php, forms, get

我在使用 php 表单概念时遇到了一些困难，如下所示：

网站上有一个关键字搜索输入表单，旨在优化网站上图像的外观。`get`这个想法是使用构造 url的方法传递关键字，如下所示：

*   page.php?keyword=tree

数据库查询的构建方式可以处理多个关键字，这些关键字将作为逗号分隔的关键字出现在 url 中：

*   page.php?keyword=tree,green,oak

我将如何构建一个提交表单，该表单将允许用户输入将输出此 page.php?keyword=tree 的关键字，如果他在输入字段中输入另一个关键字，它会将链接更改为

*   page.php?keyword=tree,green

在其末尾添加另一个关键字？

我最初的想法是检索当前 url 并在变量已经存在的情况下提供自定义的，但我不确定表单本身应该如何处理该操作。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:19:29.253

您尝试做的事情可以通过隐藏的`<input>`和一些 javascript 与**最小的**PHP 相结合来完成。

您的表单将如下所示：

```
<form id="myForm" action="">
    <input type="hidden" id="keyword" name="keyword" value="<?= $_GET['keyword'] ?>" />
    <input type="text" id="newKeyword" name="newKeyword" /><br />
    <input id="submit" type="submit" />
</form> 
```

然后使用 jQuery，您可以修改提交按钮的行为：

```
<script language="javascript" type="text/javascript">
    $("#submit).on('click', function() {
        var keyword = $("#keyword").val();
        var newKeyword = $("#newKeyword).val();

        if (keyword != "") {
            keyword = keyword + ",";
        }
        keyword = keyword + newKeyword;

        window.location.href = "?keyword=" + keyword;
    });
</script> 
```

请记住，当您访问数据库时，您不应该使用`mysql_*`函数。它们正在被弃用。而是使用[PDO](http://php.net/manual/en/book.pdo.php)（从 PHP 5.1 开始支持）或[mysqli](http://php.net/manual/en/book.mysqli.php)（从 PHP 4.1 开始支持）。如果您不确定要使用哪一个，[请阅读这篇 SO 文章](https://stackoverflow.com/questions/13569/mysqli-or-pdo-what-are-the-pros-and-cons)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:24:45.580

你甚至可以在服务器端使用多个`input`标签来解决这个问题，所有标签都带有`name`属性 = `keywords[]`。

PHP 会从中创建一个不错的数组：`$_REQUEST['keywords']`. 拿它，例如`implode`。

只是问，以防我不完全清楚......

# java - 循环结束，但没有

> ID：11802634
> 
> 赞同：0
> 
> 时间：2012-08-03T20:11:44.740
> 
> 标签：java, android, while-loop

我有一个 while 循环，它将使用缓冲读取器读取的元素添加到 ArrayList。循环工作正常，除非它完成后，应用程序似乎没有继续前进。相关代码为：

```
 int ctr = 1;
            while((test = bf.readLine()) != null)
            {

                Log.i(TAG, test);
                users.add(test);
                Log.i(TAG, "" + (ctr++));

            }
            Log.i(TAG, "Loop done."); 
```

循环中的两条日志语句各执行 4 次，这是正常行为。但是，循环之后的语句不会执行。就像卡住了一样。我很确定它也不会进入循环，因为里面的两个日志语句也不再执行。

bf 是 BufferedReader，users 是 ArrayList。

LogCat 输出：

```
08-04 01:35:37.472: I/UM(2937):     UserInfo{0:Primary:3}
08-04 01:35:37.472: I/UM(2937): 1
08-04 01:35:37.476: I/UM(2937):     UserInfo{1:Test1:0}
08-04 01:35:37.476: I/UM(2937): 2
08-04 01:35:37.476: I/UM(2937):     UserInfo{2:test2:0}
08-04 01:35:37.480: I/UM(2937): 3
08-04 01:35:37.480: I/UM(2937):     UserInfo{3:testxyz:0}
08-04 01:35:37.480: I/UM(2937): 4 
```

有人知道我的（可能是愚蠢的）错误是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:29:39.517

您的代码在线阻塞：

```
 while((test = bf.readLine()) != null) 
```

这样做是因为向其提供数据的流`bf`永远不会被关闭。

（这个答案不是我的，它只是评论中的一个快速总结。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T20:38:20.827

我希望这是条件：

```
while((test = bf.readLine()) != null) 
```

这样想：

```
Console ("line1\nline2\n")
---->  BufferedReader ("line1\n", "line2\n")
---->  bf.readline() ("line1\n")
---->  bf.readline() ("line2\n") 
```

您的条件是检查 Console 何时完全关闭其连接，此时 BufferedReader 将注意到并返回`null`。

实际发生的是 Console 与 BufferedReader 的连接仍处于打开状态。BufferedReader 正在等待另一个`\n`从控制台传入，然后`readLine()`才会返回“line3\n”。

# algorithm - 深度优先搜索的最坏情况时间复杂度

> ID：11802640
> 
> 赞同：1
> 
> 时间：2012-08-03T20:12:07.167
> 
> 标签：algorithm, data-structures, time-complexity, depth-first-search

我知道这个特定问题的答案是 O(V + E)，对于像树这样的图形，这是有道理的，因为每个顶点只被探索一次。

但是，假设图中有一个循环。

例如，让我们使用一个有四个顶点 ABCD 的无向图。
A 连接到 B 和 C，B 和 C 都连接到 D。所以总共有四个边。A->B、A->C、B->D、C->D，反之亦然。

让我们做 DFS(A)。

它将首先探索 B，然后探索 B 的邻居 D 和 D 的邻居 C。之后，C 将没有任何边，所以它会回到 D 和 B，然后是 A。

然后 A 将遍历它的第二条边并尝试探索 C，因为它已经探索过了，所以它不会做任何事情并且 DFS 将结束。

但是在这里顶点“C”已经被遍历了两次，而不是一次。显然，最坏情况的时间复杂度可以与 V 成正比。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:15:48.847

如果您不维护一个用于**避免重新访问已访问节点的****`visited`集合**，则 DFS 不是。事实上，它不是完整的算法——因此，如果有路径，它甚至可能找不到路径，因为它会陷入无限循环。**`O(V+E)`**

 **请注意，对于无限图，如果您正在寻找从`s`到的路径`t`，即使维护访问集，也不能保证完成，因为您可能会陷入无限分支。

如果您有兴趣保持 DFS 的高效空间消耗优势，同时仍然是完整的 - 您可以使用[迭代深化 DFS](http://en.wikipedia.org/wiki/Iterative_deepening_depth-first_search)，但如果您希望发现整个图，而不是寻找特定路径的路径，它不会轻易解决问题节点。

**编辑**`visited`：带集合的DFS 伪代码。

```
DFS(v,visited):
  for each u such that (v,u) is an edge:
       if (u is not in visited):
            visited.add(u)
            DFS(u,visited) 
```

很容易看出，当且仅当它还没有被访问时，您才在顶点上调用递归，因此答案在顶点和边的数量上确实是线性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:16:00.303

您可以访问图形的每个顶点和边一定次数，并且仍然是 O(V+E)。另一种看待它的方式是，成本计入边缘，而不是顶点。**

# java - GSON - 需要了解自定义序列化程序中的 ExclusionStrategy？

> ID：11802645
> 
> 赞同：1
> 
> 时间：2012-08-03T20:12:35.303
> 
> 标签：java, gson

这是设置。我有两个不同的 GSON 实例，每个实例都有一个自定义排除策略。这允许我根据使用的 GSON 实例以不同的方式表示对象。想想“完整表示”与“简短表示”。如果对象是一个人，那么简短的版本可能只是吐出名字和姓氏，而完整的版本会提供很多细节。

我还注册了自定义序列化器/反序列化器。问题是没有为使用自定义序列化程序的类调用 ExclusionStrategies。我会手动应用排除策略，但在我的自定义序列化程序中，我看不到任何知道什么排除策略应该生效的方法。

有任何想法吗？

# php - 包含文件时出现奇怪的 BOM 字符错误

> ID：11802646
> 
> 赞同：-2
> 
> 时间：2012-08-03T20:12:44.337
> 
> 标签：php

我有一个非常奇怪的问题，当我下载任何 php 脚本并尝试在本地安装它时，我遇到了麻烦。我提到*下载任何 php 脚本*，因为如果我在本地创建一个 php 脚本，无论它有多少个 include 语句，或者它包含多长的 include 语句，它们都可以正常工作。

上次，我的 WP 安装遇到了一些问题，[请参阅我的其他问题](https://stackoverflow.com/questions/9642260/php-strange-characters-in-error)

我为**cake**、**croogo**、**fuel**、**fuel-cms做了 4 次****git clone**并且对它们都有同样的问题：

 *******   奇怪的烦人的**BOM**字符包括使 PHP 抛出致命错误：

    > 遇到 PHP 错误
    > 
    > 严重性：警告
    > 
    > 消息：require_once(base_module_model.php)：打开流失败：没有这样的文件或目录
    > 
    > 文件名：models/users_model.php
    > 
    > 行号：3 致命错误：require_once()：无法打开所需的“base_module_model.php”（include_path='.:/usr/share/php:/usr/share/pear:/usr/share/ZF/library:/usr /share/ZF/extras/library') 在 ª.!ª(!“(! 在第 3 行
    > 
    > 调用堆栈：0.0002 327540 1\. {main}() PATH_TO_FUEL/index.php:0
    > 0.0006 329032 2\. require_once('Ã£å,/PATH_TO_FUEL/fuel/codeigniter/core/CodeIgniter.php') PATH_TO_FUEL/index.php： 236
    > 0.0109 544260 3\. Login->__construct() PATH_TO_FUEL/fuel/application/../modules/user_guide/:267
    > 0.0269 1002572 4\. Fuel_Loader->module_model() PATH_TO_FUEL/fuel/modules/fuel/controllers/login.php: 28
    > 0.0269 1002660 5\. Fuel_Loader->model() PATH_TO_FUEL/fuel/application/third_party/fuel/Loader.php:107
    > 0.0337 1469404 6\. Modules::load_file() PATH_TO_FUEL/fuel/application/third_party/fuel/Loader.php: 237
    > 0.0338 1482504 7.include_once('_ö,/PATH_TO_FUEL/fuel/modules/fuel/models/users_model.php') PATH_TO_FUEL/fuel/application/third_party/MX/Modules.php:142

由于几乎所有文件都发生这种情况，我现在可以确定，问题不在于文件的内容，而在于其他问题，可能是编码不匹配。

我的追求是：

*   上述问题是否表明我的系统编码可能存在问题？（我主要使用**vi**或**Netbeans**作为 IDE。）

*   如果编码有问题（我的机器或文件），是否有永久解决该问题的方法？

已安装扩展列表（使用**php -m 获取**）：

```
[PHP Modules]
apc
bcmath
bz2
calendar
Core
ctype
curl
date
dba
dom
ereg
exif
fileinfo
filter
ftp
gd
gettext
hash
iconv
imagick
json
libxml
mbstring
mcrypt
mhash
mysql
mysqli
openssl
pcntl
pcre
PDO
pdo_mysql
pdo_pgsql
pdo_sqlite
pgsql
Phar
posix
readline
Reflection
session
shmop
SimpleXML
soap
sockets
SPL
SQLite
sqlite3
standard
sysvmsg
sysvsem
sysvshm
tokenizer
wddx
xdebug
xml
xmlreader
xmlwriter
xsl
zip
zlib

[Zend Modules]
Xdebug 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:32:37.057

为了确认问题确实是您的版本控制操作正在添加 BOM 字符，您可以：

1.  检查一小组文件进行测试，并验证您是否发现了问题。
2.  使用 vi 或 vim 手动“清理”每个文件，例如通过`:set nobomb`
3.  验证问题是否消失。

如果这不起作用**，**那么你就知道你找错树了。如果它**确实**有效，那么您就知道确实有问题 - 可能与您的 git 设置有关。******

# php - 批处理脚本在powershell调用后不会返回

> ID：11802647
> 
> 赞同：2
> 
> 时间：2012-08-03T20:12:51.363
> 
> 标签：php, sql, powershell, batch-file

我正在编写一个批处理脚本，它多次调用 powershell 脚本来执行一些操作。
我已经分别测试了这两个脚本，它们都产生了我想要的结果，但是当我将它们结合起来时，powershell 脚本会挂起。我相信问题出在我有一个 php 脚本，它将值传递给批处理文件，然后根据该信息调用不同的 powershell 脚本。

我的批处理脚本进行了此调用：

```
echo Setting Up Database
powershell -noninteractive -File ".\setupDB.ps1 " %1 > nul
echo Done! 
```

我的 powershell 脚本如下所示：

```
$tempname = #$args[0]
$dbname = "cw_" + $tempname

[void][System.Reflection.Assembly]::LoadWithPartialName("MySql.Data")
$dbusername = "username"
$dbpassword = "password"

echo "Creating connection to server"

$connStr ="server="myserver";Persist Security Info=false;user id=" + $dbusername + ";pwd=" + $dbpassword + ";"
$conn = New-Object MySql.Data.MySqlClient.MySqlConnection($connStr)
echo "Done"

$conn.Open()

if($conn.State -eq "Open")
{
echo "Connection open"
}

$cmd = New-Object MySql.Data.MySqlClient.MySqlCommand
$cmd.Connection  = $conn
$cmd.CommandText = "DROP DATABASE IF EXISTS " + $dbname
$cmd.ExecuteNonQuery()

$cmd.CommandText = 'CREATE DATABASE `' + $dbname + '`'
$cmd.ExecuteNonQuery()

$conn.Close()
if($conn.State -eq "closed") {
echo "closed connection"
}
exit 
```

当我将 powershell 脚本的结果通过管道传输到文件时，我可以追踪到整个脚本以我预期的方式运行，但是之后它不会返回到我的批处理脚本以继续运行我的其余脚本。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T07:44:14.173

```
echo Setting Up Database
CALL powershell -noninteractive -File ".\setupDB.ps1 " %1 > nul
echo Done! 
```

试试这个。call 语句将 PowerShell 作为子进程启动，并在完成后将控制权返回给原始脚本。

# javascript - 创建 xml 字符串并使用 xquery 提取数据

> ID：11802651
> 
> 赞同：0
> 
> 时间：2012-08-03T20:13:01.043
> 
> 标签：javascript, jquery, xml

如何使用 jquery 即时创建 XML 字符串，然后使用 Xquery 来查询信息，就像我在服务器端执行的操作一样，例如 php/database

谁能展示我如何做到这一点的可能方法？

谢谢你，我会感谢你的任何意见！！！！！！！

# xml - IE 无法解析 UTF-8

> ID：11802652
> 
> 赞同：0
> 
> 时间：2012-08-03T20:13:03.487
> 
> 标签：xml, internet-explorer, firefox, encoding

我有一个 UTF-8 BOM 编码的文件。它有一个字符 x9F (DEC 159)，即“Ÿ”字符。IE 和 Firefox 都无法解析这个文件。编码元素是 encoding="UTF-8"。我读到一些较旧的浏览器拒绝显示 x80 - x9F，但这是特定于 HTML 的。知道为什么 IE 和 FF 会因此而绊倒吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T09:26:47.773

ASCII 字符都低于 128。Latin-1 有控制码，而不是 x80 - x9F 的字符，同样 Unicode 在码点 U+0080 到 U+009F 有控制码。如果文本中有字符 U+009F，那就错了；它应该是 U+0178, Ÿ ; . 如果文件中有单字节 x9F，那就大错特错了；大于 127 的字符必须以 UTF-8 编码才能工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-04T00:47:59.247

这实际上是一个普遍的问题

根据规范，XML 应该支持 UTF-8 BOM，但实际上只有少数解析器接受它。根据您的评论，至少对于您使用的版本，甚至 IE 和 Firefox 似乎都没有这样做。

你能做什么？没有。只是那些解析器不够好。

# python - 来自数据库模型的谷歌应用引擎渲染复选框

> ID：11802654
> 
> 赞同：0
> 
> 时间：2012-08-03T20:13:08.920
> 
> 标签：python, google-app-engine, django-forms

我正在开发我的第一个 Google App Engine 项目，我认为我误解了有关数据库和表单模型的一些基本知识。我有以下python代码：

```
class RegData(db.Model):
    title = db.StringProperty()
    forename = db.StringProperty()
    surname = db.StringProperty()
    interest = db.StringListProperty(choices=['TV','COMPUTING','SOCCER'])

class RegForm(djangoforms.ModelForm):
    class Meta:
        model = RegData 
```

我想要做的是让表单将“兴趣”属性呈现为一组复选框而不是文本区域。这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:05:54.790

从 django 导入表单作为表单

您必须在 models.py 中添加上述模块

模型.py

```
interest=(
            ('Tv', 'TV'),
            ('Computing', 'COMPUTING'),
            ('Soccer', 'SOCCER'),
                        )
class RegData(db.Model):
    title = db.StringProperty()
    forename = db.StringProperty()
    surname = db.StringProperty()
    interest = db.StringListProperty()

class RegForm(djangoforms.ModelForm):
    interest= form.CheckboxSelectMultiple(choices=interest)
    class Meta:
        model = RegData 
```

RegData 是你数据库中的表（实体），RegForm 是用户会在你的页面上看到这个表格。

主文件

```
class ShowForm(webapp.RequestHandler):
    def get(self):
        show(self)
    def post(self):
        show(self)

 def show(self):
    get = self.request.GET
    post = self.request.POST

    data = models.RegData()

    if post:
        form = models.RegForm(data=post, instance=RegDate)

        if form.is_valid():
            entity = form.save(commit=False)
            entity.put()

    else:
        form = models.RegForm(instance=RegDate) 
```

# ruby-on-rails - Ruby（或 Rails）类型安全的“try”等效

> ID：11802661
> 
> 赞同：2
> 
> 时间：2012-08-03T20:13:50.390
> 
> 标签：ruby-on-rails, ruby, type-safety

我想检查用户输入哈希中的值（传递给 Rails 控制器的参数）。我想保护自己免受虚假用户输入的侵害。Object#try 可以防止我丢失输入，但是格式错误的输入呢？

简单，不安全的情况：

```
 if params[:credentials][:login] … 
```

显然，如果用户没有提供 :credentials 值，那么我尝试获取 :login 将失败……Nil 没有方法 :[]。一个非常好的解决方案是 Object#try：

```
 if params[:credentials].try(:[], :login) … 
```

但是，如果问题是用户提供了格式错误的凭据怎么办？特别是，我的一个用户传递了一个数组，而不是一个哈希。所以我仍然得到一个例外，

```
TypeError: can't convert Symbol into Integer 
```

有没有类似 try() 的东西，可以将任何 bogosity 变成 false/nil？

我能来的最接近的是

```
 if begin params[:credentials][:login]; rescue; false; end … 
```

这有点混乱——不过，我承认，它比明确的偏执狂更紧凑、更笼统：

```
 if (params.has_key? :credentials and params[:credentials].is_a? Hash and params[:credentials].has_key? :login) … 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T20:28:48.590

你不应该`begin/rescue`在这里使用语句，它会影响性能并且你的意图并不明确。与`try`which 相同，只是`rescue nil`变相。

您必须检查所有内容，并且检查正确。混合数据检查和逻辑有点丑陋。

自从看了 Avdi 的 Confident Ruby 之后，我改变了编码方式；我建议您执行类似的操作（我只是稍微简化了您的代码）：

```
def your_action
  checked_params_for_action do
    #safe params here
    #your_controller_code
  end
end

private

def checked_params_for_action(&block)
  if (params[:credentials].is_a?(Hash) && params[:credentials][:login])
    yield
  else
    redirect_to root_path, error: "params malformed"
  end
end 
```

# c# - log4net traceappender 仅在使用 Windows Azure DiagnosticsMonitor 时记录级别为“详细”的消息

> ID：11802663
> 
> 赞同：14
> 
> 时间：2012-08-03T20:13:58.907
> 
> 标签：c#, azure, log4net, azure-diagnostics

我有一个 azure worker 角色，我已将其配置为使用写入 WindowsAzure.Diagnostics 的 log4net Trace Appender。这是通过在辅助角色的 RoleEntryPoint 中进行以下调用来完成的。

```
using System;
using Microsoft.WindowsAzure.Diagnostics;
using log4net.Config;

namespace XXX
{
    public class WorkerRole : RoleEntryPoint
    {
        public override bool OnStart()
        {
            var config = DiagnosticMonitor.GetDefaultInitialConfiguration();

            config.Logs.ScheduledTransferLogLevelFilter = LogLevel.Warning;
            config.Logs.ScheduledTransferPeriod = TimeSpan.FromMinutes(5);

            config.WindowsEventLog.DataSources.Add("System!*");
            config.WindowsEventLog.DataSources.Add("Application!*");
            config.WindowsEventLog.ScheduledTransferLogLevelFilter = LogLevel.Error;
            config.WindowsEventLog.ScheduledTransferPeriod = TimeSpan.FromMinutes(5);

            DiagnosticMonitor.Start("Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString", config);

        XmlConfigurator.Configure();
        }
    }
} 
```

App.config 文件的配置方式如下：

```
<log4net>
    <appender name="TraceAppender" type="log4net.Appender.TraceAppender">
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%logger - %message" />
        </layout>
    </appender>
    <root>
        <level value="ALL" />
        <appender-ref ref="TraceAppender" />
    </root>
</log4net>

<system.diagnostics>
    <trace>
        <listeners>
            <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.7.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" name="AzureDiagnostics">
                <filter type="" />
            </add>
        </listeners>
    </trace>
</system.diagnostics> 
```

这样做的结果是所有消息（甚至错误）都以“详细”级别记录在表存储中。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-03T20:13:58.907

几篇博客文章处理了这个问题：（[这里](http://social.msdn.microsoft.com/Forums/da-DK/windowsazuretroubleshooting/thread/05a82e48-e706-43ca-9364-80aa14784618)和[这里](http://www.dotnetsolutions.co.uk/blog/windows-azure-diagnostics---why-the-trace-writeline-method-only-sends-verbose-messages)）

*   **结果表明，log4net TraceAppender 将所有日志消息转换为 Trace.Write 消息，而 DiagnosticMonitorTraceListener 将所有 Trace.Write 消息转换为详细消息。**

我的答案是使用 Pete McEvoy 的解决方案并以下列方式扩展 TraceAppender：

```
using System.Diagnostics;
using log4net.Appender;
using log4net.Core;
namespace XXX.Logging
{
    public class AzureTraceAppender : TraceAppender
    {
        protected override void Append(LoggingEvent loggingEvent)
        {
            var level = loggingEvent.Level;
            var message = RenderLoggingEvent(loggingEvent);

            if (level >= Level.Error)
              Trace.TraceError(message);
            else if (level >= Level.Warn)
              Trace.TraceWarning(message);
            else if (level >= Level.Info)
              Trace.TraceInformation(message);
            else
              Trace.WriteLine(message);
            if (ImmediateFlush)
              Trace.Flush();
        }
    }
} 
```

然后在我的 App.config 中实现了这个扩展：

```
<log4net>
    <appender name="AzureTraceAppender" type="XXX.Logging.AzureTraceAppender">
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%logger - %message" />
        </layout>
    </appender>
    <root>
        <level value="ALL" />
        <appender-ref ref="AzureTraceAppender" />
    </root>
</log4net> 
```

# xslt - 从 xsl:template 传递字符串参数并在另一个 xsl 文件中使用它

> ID：11802667
> 
> 赞同：5
> 
> 时间：2012-08-03T20:14:21.517
> 
> 标签：xslt

```
<xsl:template match="HtmlCode">
    <xsl:copy-of select="child::*|text()"/>
</xsl:template>

<xsl:call-template name="HappyFriend">
    <xsl:with-param name="text" select="'i am a friggin' RRRRROOOOOOOVVVERRRRR~~'"/>
</xsl:call-template> 

<xsl:template name="HappyFriend">
        <xsl:param name="text"/>
        <HtmlCode>
            &lt;span&gt; &lt;%="text"%&gt;   &lt;/span&gt;
        </HtmlCode>
<xsl:template> 
```

不知何故，我不断遇到 XSLT 问题......我要做的就是让变量“文本”的值，即“我是一个 frigggin RRROVERRR”在“HappyFriend”中出现在 ai am a frigggggin' RRROOOVVVERRRR~~ “ 模板。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T20:27:14.530

几个问题：

-- 字符串文字`'i am a friggin' RRRRROOOOOOOVVVERRRRR~~'`包含不平衡的单引号。你可能想要

```
<xsl:with-param name="text" select='"i am a friggin&#x27; RRRRROOOOOOOVVVERRRRR~~"'/> 
```

--`call-template`不能出现在模板定义之外。

-- 引用您应该使用的参数`value-of-select`，如

```
 &lt;span&gt; &lt;%="<xsl:value-of select="$text"/>"%&gt;   &lt;/span&gt; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T15:56:35.947

**这是一种正确的方法来做我猜你想要的：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="HtmlCode">
        <xsl:copy-of select="child::*|text()"/>
        <xsl:call-template name="HappyFriend">
            <xsl:with-param name="text" select='"i am a friggin&apos; RRRRROOOOOOOVVVERRRRR~~"'/>
        </xsl:call-template>
    </xsl:template>
    <xsl:template name="HappyFriend">
        <xsl:param name="text"/>
        <HtmlCode>
          <span><xsl:value-of select="$text"/></span>
    </HtmlCode>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**（没有提供！！！）：

```
<HtmlCode/> 
```

**产生了想要的正确结果：**

```
<HtmlCode>
   <span>i am a friggin' RRRRROOOOOOOVVVERRRRR~~</span>
</HtmlCode> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T20:29:00.010

参数 见[FAQ](http://www.dpawson.co.uk/xsl/sect2/N5982.html)

```
 <xsl:template name="HappyFriend"> 
         <xsl:param name="text"/> 
         <HtmlCode> 
             <span> 
                <xsl:value-of select="$text"/> 
             </span> 
        </HtmlCode>  
     <xsl:template> 
```

# sql - SQL Server 2008 从 BIGINT 转换为 UNIQUEIDENTIFIER/GUID 并返回

> ID：11802668
> 
> 赞同：1
> 
> 时间：2012-08-03T20:14:25.973
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

我正在尝试解决与[从 UniqueIdentifier 转换为 BigInt 并返回非常相似的问题？](https://stackoverflow.com/questions/10078209/sql-server-2008-convert-from-guid-to-bigint-and-back)不幸的是，该示例没有显示整个过程，它仅显示将 GUID 转换回 BIGINT。

我将此称为假设问题，因为我已经决定将整数存储为 GUID 不是很有用。但是此时，我只是想知道为什么转换过程不起作用。

在第 5 步之前一切看起来都很好......

```
SELECT  1 AS Step
        ,100966116980299

SELECT  2 AS Step
        ,CONVERT(VARBINARY(8), 100966116980299, 1)

SELECT  3 AS Step
        ,CONVERT(UNIQUEIDENTIFIER, 
            CONVERT(VARBINARY(8), 100966116980299, 1)
        )

SELECT  4 AS Step   
        ,CONVERT(VARBINARY(8), 
            CONVERT(UNIQUEIDENTIFIER, 
                CONVERT(VARBINARY(8), 100966116980299, 1)
            ), 1
        )

SELECT  5 AS Step   
        ,CONVERT(BIGINT, 
            CONVERT(VARBINARY(8), 
                CONVERT(UNIQUEIDENTIFIER, 
                    CONVERT(VARBINARY(8), 100966116980299, 1)
                ), 1
            )
        ) 
```

**结果**

```
Step    Value
1       100966116980299
2       0x0F0000014B768901
3       0100000F-764B-0189-0000-000000000000
4       0x0F0000014B768901
5       1080863916129945857 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T20:31:36.310

我认为这里的问题是`100966116980299`您使用的值没有被解释为`BIGINT`首先。看看如果您首先对以下内容进行显式强制转换会发生什么`BIGINT`：

```
SELECT  1 AS Step
        ,CAST(100966116980299 AS BIGINT)

SELECT  2 AS Step
        ,CONVERT(VARBINARY(8), CAST(100966116980299 AS BIGINT), 1)

SELECT  3 AS Step
        ,CONVERT(UNIQUEIDENTIFIER, 
            CONVERT(VARBINARY(8), CAST(100966116980299 AS BIGINT), 1)
        )

SELECT  4 AS Step   
        ,CONVERT(VARBINARY(8), 
            CONVERT(UNIQUEIDENTIFIER, 
                CONVERT(VARBINARY(8), CAST(100966116980299 AS BIGINT), 1)
            ), 1
        )

SELECT  5 AS Step   
        ,CONVERT(BIGINT, 
            CONVERT(VARBINARY(8), 
                CONVERT(UNIQUEIDENTIFIER, 
                    CONVERT(VARBINARY(8), CAST(100966116980299 AS BIGINT), 1)
                ), 1
            )
        ) 
```

**结果**

```
Step    Value
1       100966116980299
2       0x00005BD40189764B
3       D45B0000-8901-4B76-0000-000000000000
4       0x00005BD40189764B
5       100966116980299 
```

# perl - 我可以得到一个句柄 - 来源吗？

> ID：11802672
> 
> 赞同：7
> 
> 时间：2012-08-03T20:14:40.357
> 
> 标签：perl, perl-io

看起来 main 中有一个符号被称为`'_<-'`（不带引号），其方式与其他*看起来*可能是句柄的事物相同：`'_</usr/perl/lib/Carp.pm'`例如。

有什么方法可以使用它吗？

或者如果我希望读取输入源，我是否必须使用源过滤器？

* * *

回复暴民：我不知道调试会在哪里打开。在我转储基表后，%INC 转储显示：

```
$VAR1 = {
      'warnings/register.pm' => 'C:/strawberry/perl/lib/warnings/register.pm',
      'XSLoader.pm' => 'C:/strawberry/perl/lib/XSLoader.pm',
      'English.pm' => 'C:/strawberry/perl/lib/English.pm',
      'Tie/Hash/NamedCapture.pm' => 'C:/strawberry/perl/lib/Tie/Hash/NamedCapture.pm',
      'unicore/lib/Perl/_PerlIDS.pl' => 'C:/strawberry/perl/lib/unicore/lib/Perl/_PerlIDS.pl',
      'unicore/Heavy.pl' => 'C:/strawberry/perl/lib/unicore/Heavy.pl',
      'warnings.pm' => 'C:/strawberry/perl/lib/warnings.pm',
      'utf8.pm' => 'C:/strawberry/perl/lib/utf8.pm',
      'Config.pm' => 'C:/strawberry/perl/lib/Config.pm',
      'overloading.pm' => 'C:/strawberry/perl/lib/overloading.pm',
      'Symbol.pm' => 'C:/strawberry/perl/lib/Symbol.pm',
      'Carp.pm' => 'C:/strawberry/perl/lib/Carp.pm',
      'bytes.pm' => 'C:/strawberry/perl/lib/bytes.pm',
      'Exporter/Heavy.pm' => 'C:/strawberry/perl/lib/Exporter/Heavy.pm',
      'utf8_heavy.pl' => 'C:/strawberry/perl/lib/utf8_heavy.pl',
      'strict.pm' => 'C:/strawberry/perl/lib/strict.pm',
      'Exporter.pm' => 'C:/strawberry/perl/lib/Exporter.pm',
      'vars.pm' => 'C:/strawberry/perl/lib/vars.pm',
      'constant.pm' => 'C:/strawberry/perl/lib/constant.pm',
      'Errno.pm' => 'C:/strawberry/perl/lib/Errno.pm',
      'overload.pm' => 'C:/strawberry/perl/lib/overload.pm',
      'Data/Dumper.pm' => 'C:/strawberry/perl/lib/Data/Dumper.pm'
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T22:48:23.827

您在 perl 调试器中看到了这个？这很可能是这些符号表条目的来源：请参阅[文件](http://search.cpan.org/perldoc?perl5db.pl#DATA_STRUCTURES_MAINTAINED_BY_CORE)[`DATA STRUCTURES MAINTAINED BY CORE`中 perldoc 的部分`perl5db.pl`](http://search.cpan.org/perldoc?perl5db.pl#DATA_STRUCTURES_MAINTAINED_BY_CORE)。

我能看到`_<-`在符号表中获取条目的唯一方法是仅使用`-d`开关启动 perl，然后将 Perl 程序输入到标准输入中，例如：

```
$ perl -d

Loading DB routines from perl5db.pl version 1.32
Editor support available.

Enter h or `h h' for help, or `man perldebug' for more help.

print "Hello world\n";
<Ctrl-D>
main::(-:1):    print "Hello world\n";
  DB<1> 
```

从这里，`@{"_<-"}`（或`@{$main::{"_<-"}}`）包含您的输入，`${"_<-"}`或`${$main::{"_<-"}}`包含文件的“名称”（只是`-`），并且`%{"_<-"}`/`%{$main::{"_<-"}}`包含有关断点和操作的信息，用于从标准输入单步执行代码。

如果没有`strict refs`，您还可以使用类似的方式查看此数据

```
 DB<6> $name="_<-"

  DB<7> p ${$name}
-
  DB<8> p @{$name}
BEGIN { require 'perl5db.pl' };
print "Hello world\n";

  DB<9> p %{$name} 
```

没有与`_<-`（或任何其他`_<...`符号）的符号表条目关联的文件句柄。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T01:21:21.290

> 或者如果我希望读取输入源，我是否必须使用源过滤器？

如果源文件有`__END__`or`__DATA__`标记，则`DATA`文件句柄可用。...这本身就很无聊。有趣的是，您可以`seek`定位 0，这会将您带到源文件的顶部：

```
use Carp;

print "Just another Perl hacker,\n";

eval { 
    no warnings qw/unopened/;
    seek DATA, 0, 0 
      or croak "Script lacking __END__ or __DATA__ tag has no DATA filehandle.";
};
if( !$@ ) {
    while(<DATA>){
        print;
    }
}
else {
    carp $@;
}

__END__ 
```

该脚本将执行（打印“只是另一个 Perl 黑客”），然后通过打印自己的源代码完成。

在上面的代码中，如果`eval`块确实捕获了异常，则回退可能是使用 FindBin 和`$0`，打开源文件，然后读取它。把它们放在一起，它看起来是这样的：

```
BEGIN {
    use Carp;

    sub read_source {
        my $source;
        local $/ = undef;
        eval {
            no warnings qw( unopened );
            my $DATA_position = tell DATA;
            croak "'tell DATA' failed: Probably no __END__ or __DATA__ segment."
              if $DATA_position < 0;
            seek DATA, 0, 0
              or croak
              "'seek DATA' failed: Probably no __END__ or __DATA__ segment.";
            $source = <DATA>;
            seek DATA, $DATA_position, 0 or croak    # Must leave *DATA usable.
              "seek to reset DATA filehandle failed after read.";
        };
        if ($@) {
            croak $@ if $@ =~ /reset/;    # Unstable state: Shouldn't be possible.
            eval {
                require FindBin;
                no warnings 'once';
                open my $source_fh, $FindBin::Bin . '/' . $0 or croak $!;
                $source = <$source_fh>;
            };
            croak "Couldn't read source file from *DATA or \$0: $@" if $@;
        }
        return $source;
    }
};

print read_source(), "\n"; 
```

该片段首先尝试从 读取`DATA`，这消除了加载 FindBin 和打开新文件句柄的需要。如果失败，那么它会尝试 FindBin 方法。如果两者都失败，则会引发异常。最终成功状态将整个源文件转换为`$source_code`. 句柄也将`DATA`恢复到调用此代码段之前的相同状态。

这应该可以有力地处理如何在不使用源过滤器的情况下读取源文件的问题。

# ruby-on-rails - 嵌套表单 (Railscast #196)

> ID：11802678
> 
> 赞同：1
> 
> 时间：2012-08-03T20:15:18.430
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我知道一些 railscasts 可能是旧的，但修订不应该是旧的。我正在努力克服嵌套形式，但我得到的大多数答案是使用插件。所以我尝试从头开始制作铁路广播，但出现异常。我想知道 Railcasts 196 更新版本今天有什么正确的代码。

这是我的代码，也许这是我的一个愚蠢的错误。

调查模型

```
class Survey < ActiveRecord::Base
  has_many :questions, :dependent => :destroy
  accepts_nested_attributes_for :questions , :reject_if => lambda { |a| a[:content].blank? }, :allow_destroy => true
  attr_accessible :name, :questions_attributes
end 
```

问题模型

```
class Question < ActiveRecord::Base
  belongs_to :survey
  attr_accessible :content, :question_id

  accepts_nested_attributes_for :answers , :reject_if => lambda { |a| a[:content].blank? }, :allow_destroy => true
  attr_accessible :name, :answers_attributes
end 
```

答案模型

```
class Answer < ActiveRecord::Base
  belongs_to :questions
  attr_accessible :content, :question_id
end 
```

调查表

```
<p id="notice"><%= notice %></p>

<div>Name:</div>
<div><%=@survey.name%></div>
<% for question in @survey.questions %>
<div><%=h question.content%></div>
<% end %>

<%= link_to 'Edit', edit_survey_path(@survey) %> |
<%= link_to 'Back', surveys_path %> 
```

表单.html.erb

```
<%= form_for(@survey) do |f| %>
  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>

  <%= f.fields_for :questions do |bf|%>
    <% render 'question_fields, :f => bf %>
  <% end %>
  ***<div class="actions">***
    <%= f.submit %>
  </div>
<% end %> 
```

question_field 表格

```
<%= f.label :content, "Question" %><br />
<%= f.text_area :content, :rows=> 3 %><br />
<%= f.check_box :_destroy %>
<%= f.label :_destroy, "Remove Question"%><br />

<%= f.fields_for :answer do |form| %>
  <%= render 'answer_fields', :f => form %>
<% end %> 
```

answer_field 表单

```
<%= f.label :content, "Answer" %>
<%= f.text_field :content %>
<%= f.check_box :_destroy %>
<%= f.label :_destroy, "Remove" %> 
```

调查控制员

```
class SurveysController < ApplicationController
  # GET /surveys
  # GET /surveys.json
  def index
    @surveys = Survey.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @surveys }
    end
  end

  # GET /surveys/1
  # GET /surveys/1.json
  def show
    @survey = Survey.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @survey }
    end
  end

  # GET /surveys/new
  # GET /surveys/new.json
  def new
    @survey = Survey.new
    3.times {@survey.questions.build }

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @survey }
    end
  end

  # GET /surveys/1/edit
  def edit
    @survey = Survey.find(params[:id])
  end

  # POST /surveys
  # POST /surveys.json
  def create
    @survey = Survey.new(params[:survey])

    respond_to do |format|
      if @survey.save
        format.html { redirect_to @survey, notice: 'Survey was successfully created.' }
        format.json { render json: @survey, status: :created, location: @survey }
      else
        format.html { render action: "new" }
        format.json { render json: @survey.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /surveys/1
  # PUT /surveys/1.json
  def update
    @survey = Survey.find(params[:id])

    respond_to do |format|
      if @survey.update_attributes(params[:survey])
        format.html { redirect_to @survey, notice: 'Survey was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @survey.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /surveys/1
  # DELETE /surveys/1.json
  def destroy
    @survey = Survey.find(params[:id])
    @survey.destroy

    respond_to do |format|
      format.html { redirect_to surveys_url }
      format.json { head :no_content }
    end
  end
end 
```

这是我创建新调查时的错误不知道还有什么问题

```
ArgumentError in SurveysController#create    
No association found for name `answers'. Has it been defined yet? 
```

这里是新的错误

```
SyntaxError in Surveys#new

Showing /home/jean/rail/surveysays/app/views/surveys/_form.html.erb where line #22 raised:

/home/jean/rail/surveysays/app/views/surveys/_form.html.erb:22: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
@output_buffer.safe_concat('  <div class="actions">
                                        ^
/home/jean/rail/surveysays/app/views/surveys/_form.html.erb:24: unterminated regexp meets end of file
/home/jean/rail/surveysays/app/views/surveys/_form.html.erb:24: syntax error, unexpected $end, expecting keyword_end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:41:30.633

添加`has_many :answers`到 Question 模型并将 Answer 模型更改为`belongs_to :question`.

# php - 在电子邮件中隐藏 simpleCart 标题

> ID：11802684
> 
> 赞同：0
> 
> 时间：2012-08-03T20:15:48.487
> 
> 标签：php, javascript, email, cart

当我向客户发送电子邮件时，所有购物车标题都如下所示：

> id=c2||名称=信息||价格=()||数量=1

在网站上，我们用 隐藏标题`.cartHeaders{display:none;}`，但许多电子邮件客户端忽略 CSS。我知道它在 simplecart.js 文件中，但我找不到如何简单地将购物车标题隐藏在一起。

有什么建议么？

# javascript - 使用 javascript 签名数据为什么不能使用这些密钥？

> ID：11802690
> 
> 赞同：0
> 
> 时间：2012-08-03T20:15:59.587
> 
> 标签：javascript, encryption, public-key-encryption, encryption-asymmetric

我测试了这里提到的 js 工具[http://shop-js.sourceforge.net/crypto2.htm](http://shop-js.sourceforge.net/crypto2.htm)[在客户端使用私钥签名数据（javascript）](https://stackoverflow.com/questions/5381528/sign-data-using-private-key-on-client-side-javascript)

使用我自己为测试创建的 pfx 证书我转换为 pem 但它不起作用，为什么？似乎它的长度大于网站上的样本：

-----开始私人KEY----- MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCoC+KNsgr9zbje pKex2eyIwCjMJAFDeQXaHUU1e8ivuBhJ1TygvBgw/EjRMvNFjrebngdxpci1mXO/ iBuQ0bs4CE1lowLRO7O/amZ13WZVamPHSW1R5bhs+r7Atk3​​y+8lWc+EpxCPfxmyn nOeyKvX5zykHJMfKojJYdGZ5YYulWHSDuHOHDy1FcKTb4nBSK5rJ0+DpjnU7GlfK BV6MmLGbBsZxbxs5fYVf5pIbGg3CUQ5zAemEWTyXHwmpwRm48ruYsbWAPygdkwkc wIUM+fC/B8M8uKHojWJgEDVaUpY8AYxCFpUTTxY9IJJYOfuvi9ef0PJ0/nh0GdqE LihbjK/1AgMBAAECggEAL94SzqHkl58+Bc2JJxQYWGvEM0IeSgXzMModqLp10/fw kzd2aaKqkWmLpGuK+ElK67z8CddbcL8hRXGTyJC1b6SNx2HDr6396Yx5WyGRwMrp WR8FUMrK2eAi7eoAEjK+iy2++ZKxVVDEKop7RTkPj/ T+jtZfQs0o4iFl/zVV/eba F1k1RNE4KkYRe/EroIp2VbnhyMkfPqUSXSpQtZib9xjEqASHgyq/BElS1iQ8oxOl 8dipTgkR8SBEwU5v9XPrpeyp7V3aypd0dw1Yh0YrGufihNftQlr9u7OXX1qmJyMS sPgypdUFQ7mfnjvz7a5dQvt6wuUifvIqrifpo7kUgQKBgQDaa9ZLh6VKLVbvB5jy TSDADZRX8tsaQx49h0US6wn3tzOoh56kmTrEv/PNLEaC7KB7Fz6JqBvts8xRWEFA zzWD5y1KzFYU1y4oCSgAvBFGkQwey8WCArvEHnEldIxhWYi5U/IRynk4ipRGwcAB 6rS6UvDcB0wjPgm8oWM26P7+SQKBgQDE9VXjWTqlHfBou58fwiXNg1zHS5LTtC6N wD77DYuiCGbXCD3Y30+c7bm747Qu2vOlqK+/puO7r8kfT6U9Z9ktdyYuVh1LHAQ9 omiiwEddGJqkbmSWS2dPuXUcsVyX7NKJ64ZgUK8Y37UddUvQfzM6Poxpm7hK89iV Pfpk3RiUTQKBgAK0y1bsO1QL88PKaE64PeujP29HhwdwRXOltWlimCEFmBJCe+i2 LVA6wJ6OKeF9ZQ+hXhj+iDoNvD5VxZkz+AnGV31Rws9HSz8bve8kZWJmcawAAlZ2 CjWH2wcHxqV+In+JVrp5s77LmMK3q9VaPxr/5BQV0w+suRopNb18bYxhAoGBAKAF K9jg4BLS9kZBWZE17fzBI5oQPqSeGcy1SvYyFSZ6aQOAAK+5DzfStTqAUB5ZaedH 3DJ75z7QHTnBPeFcBEk6Kt0uvfIOOyvQTe8dBV4P5WR/BF5PuQo/BXVgbHhKwuun Xa/XHcu5xa6/Y+9ryTUjKHWNPPg4kdj/V/am45dpAoGAf0FHF4WoTsSDqOH31dNF mdG818Rkk8aFnlki2DYjOIOCRKv2bgscKDqRnKF7OOlMBxY0cYbGcwVTO/ed/hRv nQgXrj07T+yx2IMdF4SFtUQZeSDIpgsWBYlOW3YS+iC71Cl9FyHqj8BaZ5L/PEsc HDI8X3cMH7GMCZmYtduS-----mzI=钥匙 - - -钥匙 - - -钥匙 - - -钥匙 - - -钥匙 - - -钥匙 - - -钥匙 - - -钥匙 - - -钥匙 - - -钥匙 - - -钥匙 - - -钥匙 - - -

- - -开始CERTIFICATE----- MIIDqDCCApCgAwIBAgIRAM5AhzLyP3DHRQSCWdv8TAMwDQYJKoZIhvcNAQEFBQAw aDELMAkGA1UEBhMCZnIxDjAMBgNVBAcMBXBhcmlzMS0wKwYJKoZIhvcNAQkBFh5z aWduYXR1cmVlbGVjdHJvbmlxdWVAeWFob28uZnIxCzAJBgNVBAoMAmxrMQ0wCwYD VQQDDAR0ZXN0MB4XDTEyMDgwMTE1MTIzMVoXDTEzMDgwMTE1MTIzMVowaDELMAkG A1UEBhMCZnIxDjAMBgNVBAcMBXBhcmlzMS0wKwYJKoZIhvcNAQkBFh5zaWduYXR1 cmVlbGVjdHJvbmlxdWVAeWFob28uZnIxCzAJBgNVBAoMAmxrMQ0wCwYDVQQDDAR0 ZXN0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAqAvijbIK/c243qSn sdnsiMAozCQBQ3kF2h1FNXvIr7gYSdU8oLwYMPxI0TLzRY63m54HcaXItZlzv4gb kNG7OAhNZaMC0Tuzv2pmdd1mVWpjx0ltUeW4bPq+wLZN8vvJVnPhKcQj38Zsp5zn sir1+c8pByTHyqIyWHRmeWGLpVh0g7hzhw8tRXCk2+JwUiuaydPg6Y51OxpXygVe jJixmwbGcW8bOX2FX+aSGxoNwlEOcwHphFk8lx8JqcEZuPK7mLG1gD8oHZMJHMCF DPnwvwfDPLih6I1iYBA1WlKWPAGMQhaVE08WPSCSWDn7r4vXn9DydP54dBnahC4o W4yv9QIDAQABo00wSzAdBgNVHQ4EFgQUOq1xir7kKG9Op42730/t5FJzQFMwCwYD VR0PBAQDAgeAMB0GA1UdJQQWMBQGCCsGAQUFBwMCBggrBgEFBQcDBDANBgkqhkiG 9w0BAQUFAAOCAQEAJAWRgsGlqfU4U6N35rZ+Y/ZVab5C9ddAwqKYuMwcl1VPFTxx 70WFaqA8qCg/4sOHsBONuBIYbHYOlMDSA07cHfJi6JCvEqs9UJzPXgJwCZZggqQ4 /oYHFtSF5MX1+FlVNubJ5W6iko8+CqyYWXtT1jE0Ei5kDKW7KZC7wb2e2PT22RA4 +kb+Qr7smiDItc+8eSfkREmuXw/bwU0ThTG3Uc97GhRv03RBgC50ccYJdpcfQwEX paa2KIi5ve06rNpIPiQMFT5z5cTDYuyLks1RvEjqPQGLvIr0GYU07P2wL8s/Bemg pq2FtTsQa8SJz4KSsNSEw6nqJWkdn4zZ8fiXiQ== -----END CERTIFICATE-----证书 - - -证书 - - -

# apache - Apache - 如何在没有 htaccess 的情况下保护虚拟主机指令

> ID：11802695
> 
> 赞同：0
> 
> 时间：2012-08-03T20:16:35.100
> 
> 标签：apache, location, virtualhost, password-protection

我想通过在 apache 配置文件的 virtualhost 指令中嵌入 location 指令来密码保护 Web 服务器的端口 2000。但是它没有按预期提示输入密码。这是我在 apache 配置文件中的内容：

```
<VirtualHost *:2000>
  ServerName www.server.com
  ServerAdmin email
  DocumentRoot /var/www/html
  ErrorLog logs/server.com-error_log

  <Location / >
    AuthType Basic
    AuthName "Security"
    AuthUserFile /var/www/s2/.htpasswd-users
    Require valid-user
  </Location>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T13:45:32.607

我认为它不起作用的几个原因：

1.  我需要一个对应的 NameVirtualHost *:2000 来配合 VirtualHost 指令
2.  我在该端口上使用了反向 ssh 隧道，因此 ssh 在 Web 服务器之前捕获了它。隧道连接的 Web 服务器没有密码保护。

所以现在我的问题是如何在隧道尽头用密码保护服务器。它是一个简单的服务器，不能输入密码。这就是为什么我希望通过 apache 服务器保护对它的访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-28T19:58:32.407

[AuthType](https://httpd.apache.org/docs/current/mod/mod_authn_core.html#authtype)仅适用于 .htaccess 文件中或内部：

你把它放在 a 里面，这就是它不起作用的原因。

# c# - 链式构造函数没有找到任何带两个参数的？

> ID：11802696
> 
> 赞同：2
> 
> 时间：2012-08-03T20:16:43.137
> 
> 标签：c#

我正在尝试创建链式构造函数，但是我不擅长它，需要一些帮助！我在一个构造函数中收到一条消息，告诉我没有接受两个参数的构造函数。?

这是什么意思？我需要它来处理从另一个班级发送的 3 个字符串，这导致我进入第二个问题，那就是我不能从我的另一个班级调用它...我已经尝试了所有方法，但我无法做到:( 我觉得关于构造函数，我缺少一些重要的东西，但我相信有人可以以正确的方式指出我！！请我可以在这里使用任何和所有的帮助！！！我已经阅读了关于这个主题的 C# 书籍，但它们并没有多大帮助我有谷歌，而且有很多例子，但没有一个对我来说真的很有意义，因为我认为我的代码可以工作。

这是我的班级，我有需要向其发送变量的构造函数。

```
 public class Phone
  {
    //Private Phone
    private string m_persPhone;
    //Other Phone
    private string m_otherPhone;
    //Work Phone
    private string m_privatePhone;

    public Phone()            
    {
    }

    public Phone(string personalPhone)
        : this(personalPhone, string.Empty)     //<---Problem is HERE...
    {
    }    

    public Phone(string personalPhone, string otherPhone, string privatePhone)
    {
         m_persPhone = personalPhone;
         m_otherPhone = otherPhone;
         m_privatePhone = privatePhone;
    }

    public string personalPhone
    {
        //Personal Phone
        get { return m_persPhone; }

        set { m_persPhone = value; }
    }

    public string otherPhone
    {
        //Other Phone
        get { return m_otherPhone; }

        set { m_otherPhone = value; }
    }

    public string privatePhone
    {
        //Private Phone
        get { return m_privatePhone; }

        set { m_privatePhone = value; }
    }

    public string GetToStringItemsHeadings
    {
        get { return string.Format("{0,-20} {1, -20} {2, -20}", "Personal Phone", "Other Phone", "Private Phone"); }
    }

    public override string ToString()
    {
        string strOutPhone = string.Format("{0,-20} {1, -20} {2, -20}", m_persPhone, m_otherPhone, m_privatePhone);
        return strOutPhone;
    }

} 
```

}

//问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:18:41.543

这段代码：

```
public Phone(string personalPhone)
    : this(personalPhone, string.Empty) 
```

正在寻找一个带有两个字符串参数的构造函数。

代码部分

```
this(personalPhone, string.Empty) 
```

意思是“为同一个类寻找一个构造函数，它接受我的参数列表中的两个参数（在本例中是两个字符串），然后调用该构造函数”。

但是，您没有定义一个。您可以像这样使用带有三个字符串参数的那个：

```
public Phone(string personalPhone)
    : this(personalPhone, string.Empty, string.Empty) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T20:18:49.153

你有三个构造函数：

```
public Phone()            

public Phone(string personalPhone)
    : this(personalPhone, string.Empty)     //<---Problem is HERE...

public Phone(string personalPhone, string otherPhone, string privatePhone) 
```

这些都没有**两个**字符串，所以你会得到错误。

您可以通过传递第三个字符串来修复它：

```
public Phone(string personalPhone)
    : this(personalPhone, string.Empty, string.Empty) 
```

然后它将链接到您的最后一个构造函数。

请注意，您还可以考虑将[可选参数](http://msdn.microsoft.com/en-us/library/dd264739.aspx)与单个构造函数一起使用：

```
public Phone(string personalPhone, string otherPhone = "", string privatePhone  = "") 
```

这将使您消除“额外的”链式构造函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T20:19:38.857

> 这是什么意思？

正是它所说的。这里：

```
: this(personalPhone, string.Empty) 
```

您正在尝试链接到可以接受两个字符串的构造函数。但这些是您定义的构造函数签名：

```
public Phone()
public Phone(string personalPhone)
public Phone(string personalPhone, string otherPhone, string privatePhone) 
```

您希望链接到哪些？这些都没有两个参数。

我怀疑你想要：

```
: this(personalPhone, string.Empty, string.Empty) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T20:19:09.500

您的类只有 3 个构造函数，并且没有一个带两个参数。我认为您的意思是基类初始化看起来像这样：

```
 : this(personalPhone, string.Empty, string.Empty) 
```

（注意它链接到 3 参数构造函数）。

# c# - 远程调试asp.net

> ID：11802697
> 
> 赞同：4
> 
> 时间：2012-08-03T20:16:44.740
> 
> 标签：c#, asp.net, visual-studio-2010

我有一台服务器通过 IIS 运行我的 Web 应用程序。我在本地有 Visual Studio，我连接到远程 w3wp.exe 进程没有问题，但是我的断点没有被命中，因为我的符号没有加载。

![我错过了什么？](../Images/2338487984f419a61b778ab0851332b2.png)

我错过了什么？

更新：我应该调试原生还是托管？当我执行 Native 时，Modules 窗口会显示大量无法打开 PDB 的 windows dll。我应该担心吗？我没有在列表中看到我的 dll。当我使用托管时，模块窗口完全是空的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T19:27:11.197

发现问题。当我通过 Visual Studio gui 附加到该进程时，w3wp.exe 进程被列为 x86 而不是 Managed 4.0。我在 IIS 中重新创建了我的应用程序站点，并且该过程返回被列为托管，这允许加载符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:17:47.507

确保您在调试模式下构建项目。此外，请确保您对远程服务器拥有足够的权限。

# c# - 如何仅在代码中使用 Web 用户控件（无渲染）？

> ID：11802702
> 
> 赞同：1
> 
> 时间：2012-08-03T20:17:18.437
> 
> 标签：c#, asp.net, user-controls

我有一个用户控件，其中包含面板和其他 gui 控件。它在呈现网页时与任何用户控件一样使用。但是，我需要使用它的新实例并仅在代码中使用它而不渲染它，因为它具有我想要使用的业务逻辑。但是，只要在代码中引用 gui 控件，它就会在运行期间出现对象空引用错误，例如：`pnlSomePanel.Visible = true;`

如何仅在代码中使用用户控件（不渲染）？使用 .NET 4.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:20:28.703

从技术上讲，您应该能够创建代码隐藏类的新实例（假设是 asp.net Web 应用程序而不是网站）。

但是，如果该用户控件中嵌入了业务逻辑，我建议将其移动到单独的类中，或者将业务逻辑公开为具有适当参数集的静态方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T22:12:46.800

这个怎么样...

在页面上添加对您的模块的引用。

```
<%@ Reference Control="~/modules/MyModule.ascx" %> 
```

然后，您可以使用模块的类名在后面的代码中创建该模块的实例。

```
modules_MyModule ctrl = LoadControl("~/modules/MyModule.ascx") as modules_MyModule;
ctrl.SomeMethod(); 
```

下一步是*将*其添加到父容器中，但如果您跳过该步骤，您应该在后面的代码中仍然有一个功能对象。不完全确定它是否会起作用，但理论上应该。

# c++ - 从 OpenGL 开始 - 几个问题

> ID：11802706
> 
> 赞同：1
> 
> 时间：2012-08-03T20:17:47.640
> 
> 标签：c++, opengl

我想开始使用 OpenGL 和 C++ 进行编码，但我有几个问题：

**1.**我应该改用 OpenGL 4.2 还是 3.x？OpenGL 4.x 在 Nvidia GTX 400+ 上运行。这是否意味着它得到了广泛的支持，还是我应该选择 3.x？

**2.**我在 Windows SDK 中找到了一些头文件和库，但不是全部。有什么地方可以找到OpenGL 的*所有*库和头文件吗？我要避免的是从互联网上下载旧版本和不同版本。

**3.** OpenGL 是否覆盖输入，或者这部分是否属于 GDI+/WinAPI？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:28:15.070

1.  你应该去争取你想要支持的东西。主要的 OpenGL 版本 (3,4) 通常用于识别硬件代，而次要版本实际上是针对功能版本的，它应该独立于您的硬件。例如：我现在拥有 4.2 功能，而我购买此 GPU 时甚至不存在。因此，您可以认为最新的驱动程序将支持最新的次要版本。但无论您如何尝试，您的 GPU 都不会通过驱动程序更新获得新的硬件功能。请注意，一个棘手的部分是并非仍然支持所有 GPU。这意味着不再提供驱动程序更新，它们可能会停留在一些次要的 OpenGL 版本。
2.  `gl`有一些包装器可以为你做大部分事情，但不要忘记你仍然需要链接到`glu`库和一些特定于平台的库。我个人喜欢[非官方的 OpenGL SDK](http://glsdk.sourceforge.net/docs/html/index.html)，glload 是你想要的库。其他库也非常有用。
3.  OpenGL 不覆盖输入，它只是用于绘图。另请注意，OpenGL 不会为您创建默认帧缓冲区。默认帧缓冲区是您渲染到的东西（通常在窗口中）。这是由平台特定的功能完成的，对于 Windows，这是[WGL](http://msdn.microsoft.com/en-us/library/dd374394%28v=vs.85%29.aspx)。

# c - 将内存分配 (realloc) 与具有动态数组的结构指针一起使用时出错

> ID：11802707
> 
> 赞同：2
> 
> 时间：2012-08-03T20:17:50.393
> 
> 标签：c, function, memory-management, std

vector_int.h 是一个带有自制动态数组（向量）结构的头文件。

test.c 是一个测试程序。

所有代码如下：

向量int.h：

```
#include <stdio.h>

typedef struct 
{
    long int len; // Length
    int *array;   // Dynamic Array
} IntVector; 

void ResizeIntVector(IntVector *vector, int size) // Resizing of vector
{
    realloc(vector->array, size * sizeof(int));
    vector->len = size; // Changing of length variable
}

void SetIntVectorCell(IntVector *vector, unsigned int cell_number, int cell_value) // Put cell_value in array[cell_number]
{
    if (cell_number >= vector->len)
        ResizeVectorInt(&vector, cell_number); // Grow size of memory if it's not enough

    vector->array[cell_number] = cell_value;
} 
```

测试.c：

```
#include "vector_int.h"
#include <stdio.h>

int main()
{
    IntVector vector;

    int n;
    scanf("%d", &n);

    int i;
    for (i = 0; i < n; i++) // testing
    {
        SetIntVectorCell(&vector, i, i);
        printf("%d ", vector.array[i]);
    }

    return 0;       
} 
```

日志：

```
1   0   D:\Work\Raspberry Pi\test.c In file included from D:\Work\Raspberry Pi\test.c
        D:\Work\Raspberry Pi\vector_int.h   In function 'ResizeIntVector':
11  2   D:\Work\Raspberry Pi\vector_int.h   [Warning] incompatible implicit declaration of built-in function 'realloc' [enabled by default]
            [Linker error] C:\Users\ALEXAN~1\AppData\Local\Temp\cccFKqxs.o:test.c:(.text+0x4a): undefined reference to `ResizeVectorInt'
            collect2: ld returned 1 exit status 
```

我认为使用 realloc 函数有错误，但我认为我做得很好。请帮助我并找出错误或错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T20:22:26.103

你有几个问题：

*   问题是因为`implicit declaration/realloc`您需要包含`stdlib.h`签名`realloc`。如果没有函数签名，编译器将对您的函数参数和返回值做出一些假设，然后在链接期间，如果这些假设与实际函数实现不匹配，则链接器会抱怨这一点。

*   您正在传递`realloc`一个尚未初始化的地址。这是自找麻烦。在使用你的`vector`变量之前，做一些初始化：

    ```
    vector->array = NULL;
    vector->len = 0; 
    ```

*   此外，您的用法`realloc`不正确：它不会更改您给它的实际指针，只会更改指向的内存块的大小。您需要自己重新分配指针。请注意，`realloc`可以`NULL`在失败时返回，因此请执行以下操作：

    ```
    tmp = realloc(vector->array, size * sizeof(int));

    if (tmp != NULL)
    {
        vector->array = tmp;
        vector->len = size; // Changing of length variable
    }
    else handleAllocError(); 
    ```

*   最后，不要在标题中定义您的函数。这会起作用，但最好有一个实现文件`vector_int.c`来定义在头文件中声明的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:23:04.933

你需要一个`+1`在这里：

```
 ResizeVectorInt(&vector, cell_number + 1); // Grow size of memory if it's not enough 
```

# javascript - HTML 和 Android 不能一起工作

> ID：11802711
> 
> 赞同：0
> 
> 时间：2012-08-03T20:18:06.247
> 
> 标签：javascript, android, html, ajax

这是我正在尝试做的事情：

1.  将传感器信息从 Android 平板电脑在线保存到 txt 文件
2.  打开网页以使用 ajax 调用连续读取该数据

注意：网站和安卓应用同时运行

安卓部分：

```
 try
    {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://.../save.php");                            
        httppost.setEntity(new UrlEncodedFormEntity(data));
        HttpResponse response = httpclient.execute(httppost);
        Log.i("postData", response.getStatusLine().toString());
            //Could do something better with response.
    }
    catch(Exception e)
    {
        Log.e("log_tag", "Error1:  " + e.toString());
    } 
```

JS部分

```
 setInterval("DisplayBall()", 500);
 function DisplayBall()
 {
var xmlHttp = getXMLHttp();
xmlHttp.onreadystatechange = function()
{
    if(xmlHttp.readyState == 4)
    {
        document.getElementById("TotalTime").value = 0;
        //alert(xmlHttp.responseText);
        AssignResult(xmlHttp.responseText);
    }
}   
//xmlHttp.open("GET", "TINBCoordinates.txt", true); 
//xmlHttp.send();
xmlHttp.open("GET", "read.php", true); 
xmlHttp.send();
} 
```

为什么这两个会干扰并使我的程序无响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T22:20:08.583

切换到使用PhoneGap.js 它将为您节省大量时间。

# iphone - calloutAccessoryControlTapped 未在情节提要中调用

> ID：11802712
> 
> 赞同：0
> 
> 时间：2012-08-03T20:18:07.060
> 
> 标签：iphone, ios, mkmapview

我有一个包含 MKMapView 的视图，我在其中显示了几个引脚：

```
- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id <MKAnnotation>)annotation
{
  NSLog(@"mapView:viewForAnnotation");

  // if it's the user location, just return nil.
  if ([annotation isKindOfClass:[MKUserLocation class]]){
      return nil;
  }

  static NSString* AnnotationIdentifier = @"AnnotationIdentifier";
  MKPinAnnotationView *pinView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier];
  pinView.canShowCallout = YES;
  pinView.pinColor = MKPinAnnotationColorPurple;
  pinView.annotation = annotation;    

  return pinView;
} 
```

这工作正常，但方法：

```
-(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control 
```

单击 pin 时不调用。似乎点击事件没有传输到引脚，但我不知道为什么。任何的想法 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T21:26:14.693

当图钉本身被点击时，地图视图将调用委托方法`mapView:didSelectAnnotationView:`。

当一个注释视图的或被点击`calloutAccessoryControlTapped`时调用该方法。这些是出现在图钉标注上的控件（通常是按钮）。`leftCalloutAccessoryView``rightCalloutAccessoryView`

听起来您正在寻找`mapView:didSelectAnnotationView:`委托方法。

# sql-server - 用一个月的最后三天检查当前日期

> ID：11802721
> 
> 赞同：0
> 
> 时间：2012-08-03T20:19:01.480
> 
> 标签：sql-server, oracle

我想检查当前日期是否等于一个月的最后三天，不包括周六和周日......

我可以得到一个月的最后一天

```
SELECT DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,0,GETDATE())+1,0)) 
```

我不知道如何检查`getdate()`每月的最后三天，不包括周六和周日..

会有很大帮助..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:28:52.190

```
-- make sure Sunday is the first day of the week:
SET DATEFIRST 7;

DECLARE 
  @today SMALLDATETIME,
  @nextmonth SMALLDATETIME;

-- today at midnight is the number of days since 1900-01-01
-- the first day of nextmonth is one month after the first 
-- day of the current month 
SELECT 
  @today = DATEDIFF(DAY, '19000101', CURRENT_TIMESTAMP),
  @nextmonth = DATEADD(MONTH, 1, @today-DAY(@today)+1);

-- so if today is greater than 3 days prior to the first of next month
-- and today is not a Saturday or a Sunday:
IF @today >= DATEADD(DAY, -3, @nextmonth) 
  AND DATEPART(WEEKDAY, @today) NOT IN (1,7)
BEGIN
  PRINT 'Bazinga!';
END 
```

如果您的真正意思是您想要该月的最后三个非周末，那么：

```
SET DATEFIRST 7;

DECLARE 
  @today SMALLDATETIME,
  @nextmonth SMALLDATETIME;

SELECT 
  @today = DATEDIFF(DAY, 0, GETDATE()),
  @nextmonth = DATEADD(MONTH, 1, @today-DAY(@today)+1);

;WITH x AS
(
  -- get the 5 days prior to the first day of next month:
  SELECT TOP (5) d = DATEADD(DAY, -ROW_NUMBER() OVER 
   (ORDER BY [object_id]), @nextmonth) FROM sys.all_objects
), 
y AS
(
  -- get the last three days that aren't on Sat/Sun:
  SELECT TOP (3) d FROM x 
  WHERE DATEPART(WEEKDAY, d) NOT IN (1,7)
  ORDER BY d DESC
)
-- now find out if today is in those three days:
-- (by definition, today can't be Sat/Sun)
SELECT 'Bazinga!' FROM y WHERE d = @today; 
```

如果今天不在这三天内，这将不会产生任何结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T16:06:18.630

这也给出了一个月的最后三天，不包括周六和周日

选择 LastFriDay,LastFriDay-1 LastThursday,LastFriDay-2 LastWednesday FROM ( SELECT DATEADD(mm,1,GETDATE() - DAY(GETDATE())+1)-1 AS LastFriDay UNION ALL SELECT DATEADD(mm,1,GETDATE() - DAY(GETDATE())+1)-2 AS LastFriDay UNION ALL SELECT DATEADD(mm,1,GETDATE() - DAY(GETDATE())+1)-3 AS LastFriDay UNION ALL SELECT DATEADD(mm,1,GETDATE () - DAY(GETDATE())+1)-4 AS LastFriDay UNION ALL SELECT DATEADD(mm,1,GETDATE() - DAY(GETDATE())+1)-5 AS LastFriDay UNION ALL SELECT DATEADD(mm,1 ,GETDATE() - DAY(GETDATE())+1)-6 AS LastFriDay UNION ALL SELECT DATEADD(mm,1,GETDATE() - DAY(GETDATE())+1)-7 AS LastFriDay ) AS YourFridayTable WHERE DATENAME( WeekDay,LastFriDay) = '星期五'

# ios - Jenkins 无法为我的 iOS 应用找到 RestKit，但它可以交互工作

> ID：11802722
> 
> 赞同：1
> 
> 时间：2012-08-03T20:19:01.407
> 
> 标签：ios, jenkins, restkit

我正在使用 Jenkins 进行持续合规，但我的 iOS 项目无法运行。我的应用程序以交互方式构建和运行得很好。RestKit 是我项目中的一个 git 子模块。

这项工作失败了：

```
CompileC build/testApp.build/Release-iphoneos/testApp.build/Objects-normal/armv7/main.o testApp/main.m normal armv7 objective-c com.apple.compilers.llvm.clang.1_0.compiler
cd /Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp
setenv LANG en_US.US-ASCII
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch armv7 -fmessage-length=0 -std=gnu99 -fobjc-arc -Wno-trigraphs -fpascal-strings -Os -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-sign-compare -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -DCONFIGURATION_Release -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk -Wprotocol -Wdeprecated-declarations -g -fvisibility=hidden -Wno-sign-conversion "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -miphoneos-version-min=5.0 -iquote /Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/build/testApp.build/Release-iphoneos/testApp.build/testApp-generated-files.hmap -I/Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/build/testApp.build/Release-iphoneos/testApp.build/testApp-own-target-headers.hmap -I/Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/build/testApp.build/Release-iphoneos/testApp.build/testApp-all-target-headers.hmap -iquote /Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/build/testApp.build/Release-iphoneos/testApp.build/testApp-project-headers.hmap -iquote../GMGridView/GMGridView -iquote/Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/build/Release-iphoneos/../../Headers "-iquote‚Äù/Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/build/Release-iphoneos/usr/local/lib/include‚Äù" "-iquote‚Äù/Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/build/UninstalledProducts/include‚Äù" -I/Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/build/Release-iphoneos/include -I../GMGridView/GMGridView -I/Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/build/Release-iphoneos/../../Headers -I/Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/build/testApp.build/../UninstalledProducts/include "-I‚Äù/Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/build/UninstalledProducts/include‚Äù" "-I‚Äù/Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/build/Release-iphoneos/usr/local/lib/include‚Äù" -I/Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/build/testApp.build/Release-iphoneos/testApp.build/DerivedSources/armv7 -I/Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/build/testApp.build/Release-iphoneos/testApp.build/DerivedSources -F/Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/build/Release-iphoneos -F/Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/QuincyKit -DNS_BLOCK_ASSERTIONS=1 -include /var/folders/zn/81z3gcmj00xg6rn2mg7qzgvh0000gn/C/com.apple.Xcode.501/SharedPrecompiledHeaders/testApp-Prefix-glmuagpwjeknolcbkgvqhsdakvok/testApp-Prefix.pch -MMD -MT dependencies -MF /Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/build/testApp.build/Release-iphoneos/testApp.build/Objects-normal/armv7/main.d --serialize-diagnostics /Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/build/testApp.build/Release-iphoneos/testApp.build/Objects-normal/armv7/main.dia -c /Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/testApp/main.m -o /Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/build/testApp.build/Release-iphoneos/testApp.build/Objects-normal/armv7/main.o
In file included from /Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/testApp/main.m:11:
/Users/bob/.jenkins/jobs/appNameOut-iOS/workspace/testApp/testApp/AppDelegate.h:14:9: fatal error: 'RestKit/RestKit.h' file not found
#import <RestKit/RestKit.h>
    ^
1 error generated. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:59:01.387

事实证明，RestKit 子模块被正确拉出，并且 RestKit 正在正确构建，但是当通过命令行构建时，标题包含路径没有找到 RestKit 文件，而它确实通过 GUI 工作。我编辑了 pbxproj 文件，每当我找到此类内容的输入时添加所需的标头搜索路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T14:51:11.673

在 xcode 构建步骤之前为 shell 命令添加一个新的构建步骤。把它贴进去：

git 子模块更新 --init --recursive

这个想法是这样的：假设“*以交互方式运行得很好*”意味着“当我在我的机器上使用 Xcode 构建它时它构建得很好，它在本地克隆了项目的 git 存储库”；看来您的本地 git clone 已检查了 restkit git 子模块。你的詹金斯工作没有。它在 git pull 之后永远不会更新子模块。为了在 Jenkins 中构建工作，它需要这样做。

# javascript - 使用 ID调用函数的解决方法

> ID：11802725
> 
> 赞同：1
> 
> 时间：2012-08-03T20:19:12.530
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:57:31.320

您可以使用`$('a[id^="b"]')`，但这非常低效，并且可能会比您想要的更多。或者，您可以过滤正则表达式：

```
$('a').filter(function(){
    var re = /^b[0-9]+$/;
    return re.test($(this).attr('id'));
}).frameWarp(); 
```

如果有的话，它的效率并没有提高多少，但至少它会排除误报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:51:09.827

这是 benalpert 在 reddit 上的回答： $('.b1').each(function() { $(this).frameWarp(); }) 这允许使用类而不是 ID 而不会出错。感谢大家的帮助。

# automake - libtool 不提供库依赖项来链接

> ID：11802727
> 
> 赞同：4
> 
> 时间：2012-08-03T20:19:22.883
> 
> 标签：automake, libtool

我在 ubuntu lucid 上使用 libtool 2.2.6b，在 ubuntu 上使用 libtool 2.4.2。在清醒时，我的项目将正确链接。准确地说，它无法链接。这是演示我的问题的示例代码；

配置.ac

```
AC_INIT([ltp], [0.0.1], [someone])
AM_INIT_AUTOMAKE
AC_CONFIG_HEADERS([config.h])
AC_CONFIG_MACRO_DIR([.m4])
AC_CONFIG_FILES([Makefile foo/Makefile bar/Makefile wah/Makefile])
AC_PROG_CXX
AC_PROG_LIBTOOL
AM_SANITY_CHECK
AC_LANG_CPLUSPLUS
AC_OUTPUT 
```

生成文件.am

```
SUBDIRS = foo bar wah
ACLOCAL_AMFLAGS = -I .m4 
```

富/富.h

```
#ifndef FOO_FOO_H_
#define FOO_FOO_H_
namespace Foo
{
  class Foo
  {
  public:
    Foo(long l);
  private:
    long l;
  };
}
#endif 
```

foo/Foo.cpp

```
#include "foo/Foo.h"
namespace Foo
{
  Foo::Foo(long l) : l(l) {}
} 
```

foo/Makefile.am

```
lib_LTLIBRARIES = libfoo.la
libfoo_la_SOURCES = Foo.cpp
libfoo_la_CPPFLAGS =
libfoo_la_LDFLAGS = -release 0.0.1
libfoo_la_LIBADD = 
```

酒吧/酒吧.h

```
#ifndef BAR_BAR_H_
#define BAR_BAR_H_
#include "foo/Foo.h"
namespace Bar
{
  class Bar
  {
  public:
    Bar(const Foo::Foo & f);
  private:
    Foo::Foo f;
  };
}
#endif 
```

酒吧/酒吧.cpp

```
#include "bar/Bar.h"
namespace Bar
{
  Bar::Bar(const Foo::Foo & f) : f(f) { }
} 
```

酒吧/Makefile.am

```
lib_LTLIBRARIES = libbar.la
libbar_la_SOURCES = Bar.cpp
libbar_la_CPPFLAGS =
libbar_la_LDFLAGS = -release 0.0.1
libbar_la_LIBADD = -L../foo -lfoo 
```

哇/main.cpp

```
#include "bar/Bar.h"
int main(int argc, char * argv[])
{
  Bar::Bar( 5 );
  return 0;
} 
```

哇/Makefile.am

```
bin_PROGRAMS = wah
wah_SOURCES = main.cpp
wah_CPPFLAGS =
wah_LDADD = -L../bar -lbar 
```

在 Lucid、wah 链接上，在 Precise 上，它失败了：

```
wah/main.cpp:5 undefined reference to `Foo::Foo::Foo(long)' 
```

我可以通过添加`-L../foo -lfoo`to来解决这个问题`wah_LDADD`，但实际上，libtool 不应该自动为我做这件事吗？`Linking executables' 的 libtool 手册部分似乎表明这正是它应该做的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T10:07:10.360

在我用于开发的任何 Debian 机器上，我都必须手动编译和安装 Libtool，因为 Debian 提供的版本已打补丁并忽略依赖关系，从而破坏了我的构建。

如果 Ubuntu 的版本相似，您可能也想[从源代码](http://ftp.gnu.org/gnu/libtool/)安装 Libtool 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-15T00:36:48.270

我想你可以说这更像是*哲学*上的不同。Debian 更改的重点是鼓励用户明确他们所依赖的内容，这[减少了当树深处的依赖项升级时不必要的流失量](http://lists.gnu.org/archive/html/libtool/2007-09/msg00011.html)。

当`link_all_deplibs=yes`（未修改的 libtool）时，如果您的程序`wah`依赖`bar`并`bar`依赖于`foo`，则**暗示**也`wah`依赖`foo`于。

当`link_all_deplibs=no`（Debian 修改后的 libtool）时，如果你的程序`wah`依赖于`bar`并且`bar`依赖于`foo`，那么**并不意味着**也`wah`依赖`foo`于。

因此，从 Debian 的角度来看，这在您的程序中是*错误的：*`wah` *确实*依赖于`foo`这一行：

```
 Bar::Bar( 5 ); 
```

在这里，您正在`Foo::Foo`隐式调用 的构造函数。就 C++ 编译器而言，您的程序实际上更像：

```
 Bar::Bar( Foo::Foo( 5 ) ); 
```

因此，不仅间接`wah`依赖，而且*直接*依赖。因此，从 Debian 的角度来看，您*应该*明确链接到via 。`foo`**`foo``-lfoo`**

 **特别是，这*与*libtool 的[Linking Executables](https://www.gnu.org/software/libtool/manual/html_node/Linking-executables.html)示例不同。在该示例中，`main.o`不明确依赖于`libm`，因此`-lm`原则上在链接`main.o`(`main.c`不`cos`直接调用) 时应该是不必要的。也许 libtool 递归链接的原因是为了解决链接器无法处理间接依赖关系的旧系统？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T03:58:28.567

在 Ubuntu 12.04 (Precise Pangolin) 32 位、libtool 2.4.2 上为我工作。

我确实必须将您的 Makefile 更改为`make dist`（更多）正确：

富/Makefile.am：

```
lib_LTLIBRARIES = libfoo.la
libfoo_la_SOURCES = Foo.cpp Foo.h
libfoo_la_CPPFLAGS =
libfoo_la_LDFLAGS = -release 0.0.1
libfoo_la_LIBADD = 
```

酒吧/Makefile.am：

```
lib_LTLIBRARIES = libbar.la
libbar_la_SOURCES = Bar.cpp Bar.h
libbar_la_CPPFLAGS =
libbar_la_LDFLAGS = -release 0.0.1
libbar_la_LIBADD = -L../foo -lfoo 
```

哇/Makefile.am

```
bin_PROGRAMS = wah
wah_SOURCES = main.cpp ../bar/Bar.h
wah_CPPFLAGS =
wah_LDADD = -L../bar -lbar 
```

这是它的链接方式`main.cpp`：

```
make[2]: Entering directory `/xxx/ltp-0.0.1/wah'
g++ -DHAVE_CONFIG_H -I. -I..     -g -O2 -MT wah-main.o -MD -MP -MF .deps/wah-main.Tpo -c -o wah-main.o `test -f 'main.cpp' || echo './'`main.cpp
mv -f .deps/wah-main.Tpo .deps/wah-main.Po
/bin/bash ../libtool --tag=CXX   --mode=link g++  -g -O2   -o wah wah-main.o -L../bar -lbar 
libtool: link: g++ -g -O2 -o .libs/wah wah-main.o  -L../bar /xxx/ltp-0.0.1/bar/.libs/libbar.so -L../foo /xxx/ltp-0.0.1/foo/.libs/libfoo.so 
```

> libtool 不应该自动为我做那件事吗？

是的，至少在非 Ubuntu 发行版上创建发行版 tarball 时确实如此。在 Ubuntu 机器上进行 autoreconf 后，我得到了与您相同的错误。显然（根据 adl）Ubuntu 发行版有一个补丁版本，`libtool`其中设置了 libtool 脚本变量：

```
link_all_deplibs=no 
```

我修补了`configure`生成的 libtool 脚本以将所有这些实例替换为：

```
link_all_deplibs=unknown 
```

一切都按预期链接。我想您可以在调用`autoreconf`. `libtool`或者在 Ubuntu 主机上安装未打补丁的版本。或者在 Ubuntu 主机上打补丁的 libtool。所以有一些关于如何修复它的选项。**

# vb.net - 数据网格视图中数据集上列表属性的详细信息网格

> ID：11802728
> 
> 赞同：0
> 
> 时间：2012-08-03T20:19:23.373
> 
> 标签：vb.net, datagridview, datasource

我有一个 datagridView 填充了我自己的对象，一个表的表示。

我的对象的属性之一是我想显示为 detailGrid 的孩子列表。

所以它有点像： -Main grid = header table -DetailGrids = Details Table

到目前为止，我已经以这种方式绑定数据：

```
dgvHeaders.datasource = lstMyHeaders 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T22:14:20.600

您可以使用该`RowEnter`事件来填充详细信息表。该`DataBoundItem`属性获取该行绑定到的列表项。

```
 Private Sub dgvHeaders_RowEnter(ByVal sender AsObject, ByVal e As DataGridViewCellEventArgs) _
        Handles dgvHeaders.RowEnter
    Dim myHeaderObject As myHeaderClass = dgvHeaders.Rows(e.RowIndex).DataBoundItem, myHeaderClass)
    dgvDetails.DataSource=myHeaderObject.lstMyDetails
  End Sub 
```

# asp.net - 为什么我的函数在 UpdatePanel 加载后运行多次

> ID：11802736
> 
> 赞同：6
> 
> 时间：2012-08-03T20:20:09.083
> 
> 标签：asp.net, ajax, vb.net, updatepanel, pagerequestmanager

所以我想在我的更新面板更新后运行一些 javaScript 函数，所以我有：

```
function pageLoad() { 

    var prm = Sys.WebForms.PageRequestManager.getInstance();
    prm.add_pageLoaded(panelLoaded);
}

function panelLoaded(sender, args) {
        alert("foobar");
} 
```

使用上面的代码，如果我更新一次面板，“foobar”将被警告一次；如果我第二次更新面板，“foobar”会弹出两次；第三次触发面板更新，“foobar”弹出三次……第四次弹出四次，依此类推……

这是什么原因造成的？？

谢谢~~~

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T20:25:34.037

这是因为 pageLoad 也在 updatepanel 回发期间执行。有一个简单的解决方案：

```
function pageLoad(sender, eventArgs) {
    // If this is being executed by ajax
    if (eventArgs) {
        // And this is only a partial load
        if (eventArgs.get_isPartialLoad()) {
            // Don't perform any further processing
            return;
        }
    }
    var prm = Sys.WebForms.PageRequestManager.getInstance();
    prm.add_pageLoaded(panelLoaded);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:41:36.313

谢谢大家，问题似乎是 Sam 提到的 prm 实例太多。我添加了 Sys.WebForms.PageRequestManager.getInstance().remove_pageLoaded(panelLoaded); 在 alert() 之后，一切都很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T20:46:22.147

这就是正在发生的事情。`pageLoad`基本上作为[Application.Init](http://msdn.microsoft.com/en-us/library/bb397532.aspx)和[PageRequestManager.EndRequest](http://msdn.microsoft.com/en-us/library/bb383810.aspx)的组合。这意味着它适用于应用程序初始化（大约 DOM 就绪）和每个`Partial PostBack`

所以 pageLoad 适用于所有 PostBacks；完整的和部分的。

现在，您在每次部分回发时再次在 ScriptManager 的实例上绑定 pageLoaded 事件，并再次导致此行为。

# c# - 在pdf的多页中插入图像

> ID：11802741
> 
> 赞同：2
> 
> 时间：2012-08-03T20:20:41.750
> 
> 标签：c#, pdf-generation, itextsharp

是否可以更改以下代码以便在开始时创建图像并在我要插入特定图像的页面中使用它们的引用？

```
using (Stream inputPdfStream  = new FileStream("sample.pdf", FileMode.Open, 
                                               FileAccess.Read, FileShare.Read))
using (Stream outputPdfStream = new FileStream("result.pdf", FileMode.Create, 
                                               FileAccess.Write, FileShare.None))
{
    var reader = new PdfReader(inputPdfStream);
    var stamper = new PdfStamper(reader, outputPdfStream);
    PdfContentByte pdfContentByte = null;

    int c = reader.NumberOfPages;
    string fnmae = "";
    iTextSharp.text.Image image = null;

    for (int i = 1; i <= c; i++)
    {
        fnmae = (i % 2==0) ? "1.jpg" : "6.jpg";
        image = iTextSharp.text.Image.GetInstance(fnmae);
        pdfContentByte = stamper.GetOverContent(i);
        image.ScaleToFit(100, 100);
        image.SetAbsolutePosition(100, 100);
        pdfContentByte.AddImage(image);
    }

    stamper.Close();
} 
```

# c# - 让事件有效负载成为通用对象

> ID：11802742
> 
> 赞同：1
> 
> 时间：2012-08-03T20:20:47.203
> 
> 标签：c#, .net, generics, prism

我有这样的代码：

```
public class TabActivationRequestEvent<T> : 
             CompositePresentationEvent<TabActivationRequest<T>>{}

public class TabActivationRequest<T>  
{
    public IOMStudioTab OMStudioTab { get; set; }
    public T RegionData { get; set; }
}

public void RequestTabActivation<T>(TabActivationRequest<T> tabActivationRequest)
{
    var prismEvent = eventAggregator.GetEvent<TabActivationRequestEvent<T>>();
    prismEvent.Publish(tabActivationRequest);
} 
```

我用它来发送一个 Prism 事件（通过事件聚合器）。

但是，当我去订阅时，我遇到了问题。这就是我试图做的：

```
void OtherClassCtor()
{    
     var tabFocusEvent = eventAggregator.GetEvent<TabActivationRequest<T>>();
     tabFocusEvent.Subscribe(OnTabFocusRequest, true);                 ^
}                                                                      |
                                                                       |
private void OnTabFocusRequest<T>(TabActivationRequest<T> regionData)  |
{                                                                      |
     // do stuff here                                                  |
}                                                                      |
                                                                       |
This part Fails -------------------------------------------------------+ 
```

编译器说我不能在那里使用类型参数。当我站在后面看它时，它是有道理的。（当前类对任何类型参数一无所知）。

但是定义类型对我来说是一个交易破坏者，所以我只打算使用`object`.

但这让我想知道是否有任何花哨的编码可以让我通过事件系统传递泛型类型。

如果您知道任何事情，请发布它。如果没有，我会对我`object`和我的选角感到满意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:45:11.787

正如您所说，它不起作用，因为它本身`OtherClass`没有泛型类型参数可提供给`TabActivationRequest`.

明显的解决方案是`OtherClass`通用的。否则，您可以使用反射来调用该`GetEvent`方法。签出类型 - MSDN 包含一些有用`MakeGenericMethod`的[提示和示例](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.makegenericmethod%28v=vs.100%29.aspx)。当然，您仍然需要以某种方式获得您想要调用的类型。`MethodInfo``GetEvent`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:49:21.380

您需要将 OtherClassCtor 类设为泛型，或者在 GetEvent 调用中为泛型 TabActivationRequest 提供类型。

# objective-c - 如何将捆绑安装位置设置为其父捆绑目录？

> ID：11802745
> 
> 赞同：2
> 
> 时间：2012-08-03T20:20:59.650
> 
> 标签：objective-c, xcode, plugins, bundle

我有一个主项目`App`，其中包含要安装在`AppBundleDirectory/Contents/PlugIns`.

默认安装目录`plugin.xcodeproj`是`/Library/Bundles`，我想改成`AppBundleDirectory/Contents/PlugIns`. 我不认为`plugin`它知道它的父构建目录，所以我找不到任何环境变量可以放入`Installation Directory`设置中。

把它们加起来：

**项目结构**

```
App.xcodeproj
  Plugins/
    plugin1.xcodeproj
    plugin2.xcodeproj 
```

**想要生成的结构**

```
App.app
  Contents/
    Plugins/
      plugin1.bundle
      plugin2.bundle 
```

我应该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T01:58:19.883

如果您的应用程序目标取决于您的插件目标，那么它相当简单：

*   将 Copy Files 阶段添加到您的应用程序
*   制作目标“插件”（在下拉列表中）
*   使用“+”按钮选择插件。

如果插件依赖于应用程序，那么它只会稍微复杂一些。您必须硬编码应用程序的名称：

*   确保每个人都有相同的 DSTROOT（使用单一方案是获得此功能的最简单方法）
*   使插件 INSTALL_PATH 成为“/App.app/Contents/PlugIns”（注意前导 /）

请注意，它是“插件”而不是“插件”。99.99% 的时间都没有关系。但是每隔一段时间，您就会遇到一个在安装时选择区分大小写的文件系统并且您的插件无法加载的人。我曾经追过那个虫子四个月。从复制文件列表中选择它是确保正确的好方法。

# sencha-touch - sencha touch 成本和许可说明

> ID：11802746
> 
> 赞同：0
> 
> 时间：2012-08-03T20:21:03.007
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我对将 Sencha Touch 用于 Web 移动站点很感兴趣。

我在 Sencha Touch 网站上读到，他们现在免费提供商业软件许可证。

我阅读了许可协议，但我仍然不清楚他们的价格。

就我而言，我的客户会雇用我来构建一个移动网站，该网站将使用 html 等在浏览器中运行，并且可以直接通过 URL 访问。移动网站将托管在客户租用的共享主机上，因此它不是适用于 IOS 或 Android 的应用程序

在这种情况下：

*   我可以免费使用 Sencha Touch 框架吗？
*   我的客户或托管服务提供商是否有义务支付许可证？
*   至于许可证，必须包含煎茶触摸的所有版权，我可以保护我使用框架完成的编码的知识产权吗？
*   万一将来客户需要IOS或Android的应用程序，许可证仍然是免费的吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:21:32.590

在这里查看：[http ://www.sencha.com/support/](http://www.sencha.com/support/)

# gnu-screen - 脚本 GNU 屏幕

> ID：11802755
> 
> 赞同：4
> 
> 时间：2012-08-03T20:21:28.903
> 
> 标签：gnu-screen

我一直在尝试接受 GNU Screen 中的脚本。阅读手册页和其他一些示例后，我了解到我们可以使用`at`命令或`-X`参数将命令发送到屏幕会话。

让我解释一下我的情况。我需要编写一个在现有屏幕会话中运行的脚本。该脚本应创建新窗口、设置标题、浏览到特定目录并在每个窗口中运行程序。

命令的问题`at`是我一次只能发送一个命令。当我使用`at`命令创建一个新窗口时，我将无法获得该新创建窗口的窗口编号。因此，我将无法再向该新窗口发送任何命令。如何检索这个新窗口的窗口号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:34:50.673

在创建新窗口时，您可以使用（例如）`screen`指定名称并使用附加参数（例如）将命令发送到此特定屏幕`-t``-t test``-X``-p``screen -p test -X eval 'yourcommand --yourparameter'`

# jquery - jQuery点击不断添加新元素

> ID：11802758
> 
> 赞同：-1
> 
> 时间：2012-08-03T20:21:41.467
> 
> 标签：jquery, click

我有一些代码可以`<p>`在使用 jquery 单击按钮时显示元素。如果按钮被按下两次，我希望`<p>`出现另一个元素。现在这不会发生（`<p>`只出现一次）。

查询：

```
$(document).ready(function(){

    $("#add").click(function() {
        $(".input").css("display","block");
    });
}); 
```

HTML：

```
<p class='input' style='display: none;'>
    text here
</p>

<input type='button' value='Add class' id='add'> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:23:48.443

动态创建`<p>`元素。就像是：

```
$('#add').before($('<p>').addClass('input').text('text here')); 
```

或者，如果你有一个比这更复杂的模板，你可能想要克隆元素：

```
var lastItem = $('.input').eq(-1);
lastItem.after(lastItem.clone()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:24:04.763

如果你有多个隐藏`p`的类，`input`你可以尝试：

```
$("#add").click(function() {
    $(".input:hidden:first").show()
}); 
```

[演示](http://jsfiddle.net/3PXhn/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T20:26:29.183

使用 jQuery`append`方法将 p 标签添加到 div 或 body。HTML：

```
<div id="pTags"></div> 
```

jQuery：

```
$("#add").click(function(){
    $("#pTags").append('<p>text</p>');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T20:25:11.663

您正在显示一个隐藏元素，而不是创建一个新元素。改用这个：

```
$("#add").click(function() {
    $("<p class='input'></p>").appendTo("body");
}); 
```

# javascript - Jquery 对话框调整大小仅在第一次打开时发生

> ID：11802759
> 
> 赞同：3
> 
> 时间：2012-08-03T20:21:44.770
> 
> 标签：javascript, jquery, asp.net

我有一个 JQuery 的代码，一个包含一个加载任务列表的 gridview 的 div 对话框。对话框适合内容 好的，但是如果加载了数百个任务，对话框会变得太大并且无法手动调整大小，因此我需要编写一种方法以使其以可管理的大小打开。

在任何人建议之前，**我尝试将我的 div 上的 max-height 属性设置为 500px**并且效果很好，除了如果对话框高于 500px，div 不会填满整个对话框，这是我们想要的。**我还尝试直接在对话框上设置 maxHeight 属性，**但这仅在您手动调整对话框大小时生效，而不是在对话框打开时生效。并且当对话框打开时比屏幕大时无法完成。

所以我写了这段代码来声明对话框，然后如果加载了超过 20 个任务，对话框应该被调整为 500px 高。这样，内部的 div 始终完全填充对话框，并且对话框大小保持可管理。

```
function ShowReferedTasks(title, s, taskCount) {

    //On crée le dialog à partir de la même div       
    $('#litReferedTasks').dialog({
        autoOpen: true,
        modal: true,
        resizable: true,
        show: 'drop',
        hide: 'drop',
        width: 800,
        minHeight: 0,
        title: 'Tâche' + s + ' référée' + s + ' de ' + title
    });

    //if more than 20 refered tasks are found
    if (taskCount > 20) {        
        $('#litReferedTasks').dialog('option', 'height', 500);
        $('#litReferedTasks').dialog('option', 'position', 'center');
    }
} 
```

此代码从父 gridview 的每一行中的按钮调用，加载每一行的任务。

这是我刷新页面并刷新缓存 (ctrl+F5)，然后打开一些任务列表时发生的情况。

1.  如果我打开一个包含 20 多个任务的任务列表（需要刷新的对话框），**它可以正常工作**。

2.  如果我打开任何任务列表，即使是一个少于 20 个不需要调整大小的任务列表，然后关闭它，然后打开一个超过 20 个任务**的列表，对话框就会打开，gridview 被完美填充，但调整大小没有工作**，对话框太大而无法在屏幕上显示，并且无法手动调整大小。

基本上，我的代码的调整大小部分仅适用于我在刷新页面并刷新缓存后打开的第一个对话框。我认为在第一次打开对话框后必须将某些内容保存在内存中，但我一般是 JQuery 和 JS 的新手，我找不到答案。

```
<div id="litReferedTasks" style="background-color: White; display: none; overflow:auto; height:95%;">
    <asp:GridView ID="gvReferedTasks" runat="server" OnRowDataBound="gvReferedTasks_RowDataBound" Width="97.5%" Visible="false">        
    </asp:GridView>
    <asp:Label ID="lblNoReferedTasks" runat="server" Visible="false" Width="100%"></asp:Label>
</div> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:35:41.563

好的，所以如果你在对话框打开后设置选项，高度可能没有效果，但是如果你在初始对话框创建代码中放入高度，它应该有一个设置高度就好了：

```
function ShowReferedTasks(title, s, taskCount) {

    var dialogOptions = {
        autoOpen: true,
        modal: true,
        resizable: true,
        show: 'drop',
        hide: 'drop',
        width: 800,
        minHeight: 0,
        title: 'Tâche' + s + ' référée' + s + ' de ' + title
    };

    //if more than 20 refered tasks are found
    if (taskCount > 20) {        
        dialogOptions.height = 500
    }

    //On crée le dialog à partir de la même div       
    $('#litReferedTasks').dialog(dialogOptions);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T20:37:17.993

我认为您使 .dialog 功能过于复杂。最简单的做法是在 autoOpen 设置为 false 的情况下创建一次对话框，而不是每次都尝试重新初始化它。我认为你会遇到这样的事情会更好：

```
// Do this once when the document is ready
$(function() {  
    $('#litReferedTasks').dialog({
    autoOpen: false,
    modal: true,
    resizable: true,
    show: 'drop',
    hide: 'drop',
    width: 800,
    minHeight: 0
  });
});

function ShowReferedTasks(title, s, taskCount) {
    $('#litReferedTasks').dialog('option', 'title', 'Tâche' + s + ' référée' + s + ' de ' + title);
    if (taskCount > 20) {        
        $('#litReferedTasks').dialog('option', {
            height: 500,
            position: 'center'
        });
    }

    $('#litReferedTasks').dialog('open');
} 
```

# javascript - JQuery 图像预览不起作用

> ID：11802770
> 
> 赞同：0
> 
> 时间：2012-08-03T20:22:38.893
> 
> 标签：javascript, jquery, image-processing

我见过几种显示图像预览的方法，但它们似乎都不起作用，或者它们只在 FF/Chrome 中起作用。

尽量保持简单：

标记：

```
<input type="file" id="logo-upload" onchange="changePreview();"/>
<br/>        
<img src='@Url.Image("logo.png")' alt="Preview" id="logo-preview"/> 
```

Javascript：

```
<script type="text/javascript">

    function changePreview() {

        var input = $('#logo-upload').val();

         $('#logo-preview').attr('src', input)
                    .width(150)
                    .height(50);
         }

</script> 
```

当调试`input`显示正确的本地图像路径但预览永远不会出现时。为什么以及如何让它工作（在所有浏览器中）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:26:22.593

尝试设置`$('#logo-upload').change(function(){})`而不是使用 onChange。我认为这是一个好的开始。然后把jQuery放在里面`$(document).ready(function(){})`。如果您在页面上存在元素之前设置脚本，那可能是另一个问题。

如果您可以发布更多代码，那将是有益的。

此外，对于 IE，您将遇到用户无法控制的权限问题（至少在这种情况下）。因此，在这些情况下，您要么必须先上传图像，然后从服务器获取图像，要么他们必须更改其安全设置以允许访问此类内容。

```
<input type="file" id="logo-upload" />
<br/>        
<img src="@Url.Image('logo.png')" alt="Preview" id="logo-preview"/>

<script type="text/javascript">
    $(document).ready(function() {
        $('#logo-upload').change(function() {
            var input = $(this).val();
            $('#logo-preview').attr('src', input).width(150).height(50);
        })
    });
</script> 
```

# javascript - firebug (1.10.1) 建议 javascript 不局限于 firefox (13.0) 中的单个线程

> ID：11802771
> 
> 赞同：2
> 
> 时间：2012-08-03T20:22:55.480
> 
> 标签：javascript, multithreading, firefox, firebug

今天在 Firefox 中调试一些客户端 javascript 时，我遇到了一些我觉得很奇怪且有点令人不安的事情。此外，在使用 IE / VS2010 调试同一脚本时，我无法复制此行为。

我创建了一个简单的示例 html 文档来说明我所看到的异常情况。

```
<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js" type="text/javascript" ></script>
</head>

<body id="main_body">
    <script type="text/javascript">
        $(function () {
            $(".test-trigger").on("click", function () {
                loadStuff();
                console && console.log && console.log("this will probably happen first.");
            });
        });

        function loadStuff() {
            $.get("http://google.com/")
                .fail(function () {
                    console && console.log && console.log("this will probably happen second.");
                });
            }
    </script>
    <button class="test-trigger">test</button>
</body>
</html> 
```

如果您将此文档加载到 Firefox 中（我在 Windows 7 上使用版本 13.0 和 Firebug 版本 1.10.1），单击测试，然后在 Firebug 中查看控制台选项卡，您应该会注意到获取请求失败（跨域冲突，与做我要在这里提出的观点），然后你很可能会看到：

```
this will probably happen first.
this will probably happen second. 
```

现在，在第 13 行和第 20 行放置断点：

```
13: console && console.log && console.log("this will probably happen first.");
20: console && console.log && console.log("this will probably happen second."); 
```

如果再次单击测试，您将按预期中断第 13 行。现在，继续执行。如果你的经验和我一样，你不会在第 20 行中断。此外，如果你切换到控制台选项卡，你将看到以下日志输出序列：

```
this will probably happen second.
this will probably happen first. 
```

对我来说，这表明 ajax 请求的失败处理程序正在一个线程中执行，而不是在执行单击处理程序的线程中执行。我一直被引导相信单个页面的所有 javascript 将由任何浏览器中的单个线程。我在这里错过了一些非常明显的东西吗？感谢您对此观察的任何见解。

哦，如果我使用 Visual Studio 调试在 IE 中运行的同一个页面，两个断点都会像我预期的那样被命中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:37:54.260

我认为可以安全地假设您观察到的异常是由 Firebug 如何实现断点/在幕后工作引起的。不过我无法确认。OS X 上的 FF 14 也会发生这种情况。

除非 jQuery 立即执行您的`fail()`函数并超越整个`XMLHttpRequest`对象，否则*可以*保证语句的顺序将是`this will probably happen first.`then `this will probably happen second.`。

鉴于 JavaScript 的单线程特性，函数本质上是原子的；他们不会被回调打断。

似乎您正在尝试模拟如果`click`函数在调用`loadStuff()`. 该`click`函数*不应该*被正在执行的方法中断`fail`（请注意 == 吹你找到了一种方法来实现它）。

为了消除等式中的断点，这里有一个修改版本。标记的其余部分保持不变。

```
$(function () {
    $(".test-trigger").on("click", function () {
        loadStuff();
        for (var i = 0; i < 1000000000; i++)
        {
            //block for some interesting calculation or something
        }
        console && console.log && console.log("this will probably happen first.");
    });
});

function loadStuff() {
    $.get("http://google.com/")
        .fail(function () {
            console && console.log && console.log("this will probably happen second.");
        });
    } 
```

该`click`函数在调用后显然需要很长时间才能执行，`loadStuff()`但控制台仍然会在此处反映日志语句的正确顺序。另外值得注意的是，如果插入相同的断点，则排序将无效，就像原始示例一样。

我会向 Firebug[提交一个问题](http://code.google.com/p/fbug/issues/list)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:35:03.877

`$.get("http://google.com/")`是异步的，它是先完成什么的竞赛。第一次比较慢，因为它需要进行调用，并且调用发生在代码执行的后期。该调用已与第二个请求一起缓存，因此它执行得更快。

如果您需要在请求发出之前完成某些事情，请使用[beforeSend()](http://api.jquery.com/jQuery.ajax/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T19:46:28.283

根据我的经验，Firebug 在异步代码中放置断点时效果不佳。

即，如果您有一条直线执行并在其中放置断点，那么您会没事的。但是，如果您引入异步性，例如使用`setTimeout`，您将不会在“并行”行中遇到断点（这当然不是真正的并行，JS 引擎会在任务之间切换）。在过去的几个月里，我经历了很多。

在 Chrome 中，它似乎工作正常（它们以某种方式智能地推迟超时）。也许是因为 Chrome 开发工具是内置在浏览器中的，所以更容易操作超时。Firebug “只是”一个附加组件，可能要正确执行它可能会很棘手。

重现问题的简单脚本：

`x`当我为, , 赋值时，`y`在行中放置断点`z`。首先，您将在 line 上遇到一个断点`x = 1`。用于`F10`跨步。只有当您足够快地按下（Firefox 14，Firebug 1.10）时，您才~~不会在行上`z = 3`遇到~~断点。`z = 3``F10`

```
<!DOCTYPE html>
<html>
<body>

<script type="text/javascript">
function foo(){
   var x = 1;
   setTimeout(bar, 2000);
   var y = 2;
}

function bar(){
   var z = 3;
}

foo();
</script>

</body>
</html> 
```

# android - 从字符串数组填充微调器

> ID：11802775
> 
> 赞同：2
> 
> 时间：2012-08-03T20:23:32.163
> 
> 标签：android, android-spinner

我对此很陌生，我有一个可能很简单的问题。

我有 3 个微调器，我想根据用户对先前微调器所做的选择从数组中填充每个微调器。

现在我已经将它设置为显示带有所选数据的吐司，但我想设置一个活动来打开，但那是稍后。现在我需要知道如何从 strings.xml 的数组中填充微调器。

.Java

```
import java.util.ArrayList;
import java.util.List;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.Toast;

/**
 * @author madonk
 *
 */
public class Region extends Activity {

Spinner sp1,sp2,sp3;
ArrayAdapter<String> reg_adp,sw_city_adp,sw_lake_charles_adp;
List<String> regions,sw_cities,sw_lake_charles;
int pos;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_region);

    regions=new ArrayList<String>();

    regions.add("Select a Region");
    regions.add("Southwest");

    sp1= (Spinner) findViewById(R.id.regions_spinner);
    sp2= (Spinner) findViewById(R.id.sw_city_spinner);
    sp3= (Spinner) findViewById(R.id.sw_lake_charles_spinner);

    reg_adp=new ArrayAdapter<String> (this,android.R.layout.simple_dropdown_item_1line,regions);
    reg_adp.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);
    sp1.setAdapter(reg_adp);

    sp1.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            // TODO Auto-generated method stub
            pos=arg2;
            add();

        }

        private void add() {
            // TODO Auto-generated method stub
            Toast.makeText(getBaseContext(), ""+pos, Toast.LENGTH_SHORT).show();

            switch(pos)
            {
            case 0:
                sw_cities= new ArrayList<String>();                    
                sw_cities.add("Select a City");

                sw_city_adp=new ArrayAdapter<String>(Region.this,
                        android.R.layout.simple_dropdown_item_1line,sw_cities);
                sw_city_adp.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);
                sp2.setAdapter(sw_city_adp);

                select();

                break;
            case 1:
                sw_cities= new ArrayList<String>(); 
                sw_cities.add("Select a City");
                sw_cities.add("Lake Charles");
                sw_cities.add("Iowa");
                sw_cities.add("Lake Arthur");

                sw_city_adp=new ArrayAdapter<String>(Region.this,
                        android.R.layout.simple_dropdown_item_1line,sw_cities);
                sw_city_adp.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);
                sp2.setAdapter(sw_city_adp);

                select();

                break;
            }

        }

        private void select() {
            // TODO Auto-generated method stub

            sp2.setOnItemSelectedListener(new OnItemSelectedListener() {

                public void onItemSelectedregions(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {
                    // TODO Auto-generated method stub

                }

                public void onNothingSelected(AdapterView<?> arg0) {
                    // TODO Auto-generated method stub

                }

                public void onItemSelected(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {
                    // TODO Auto-generated method stub

                }

                public void onNothingSelectedregions(AdapterView<?> arg0) {
                    // TODO Auto-generated method stub

                }
            });

        }

        public void onNothingSelectedcities(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }

        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    });
    } 
```

stings.xml

```
<resources>

    <string name="app_name">Louisiana Festivals</string>
    <string name="menu_settings">Settings</string>
    <string name="title_activity_region">Select a Region</string>
    <string-array name="regions_array">
        <item >Southwest</item>
    </string-array>
        <string name="select_a_region">Select a Region</string>
    <string-array name="southwest_cities">
        <item >Lake Charles</item>
        <item >Iowa</item>
    </string-array>
    <string name="sw_select_a_city">Select a City</string>
    <string-array name="lake_charles">
        <item>Contraband days Pirate Festival</item>
        <item>Other festival to be determined</item>
    </string-array>

</resources> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T00:00:53.567

[您可以使用getStringArray()](http://developer.android.com/reference/android/content/res/Resources.html#getStringArray%28int%29)从 strings.xml 获取字符串数组。所以你想要的代码片段是：

```
String[] regionsArray = getResources().getStringArray(R.array.regions_array);
regions = new ArrayList<String>(Arrays.asList(regionsArray)); 
```

现在，无论您输入什么，都`regions_array`将在区域中结束`ArrayList`。

# c# - 从位图图像列表创建 .avi 文件

> ID：11802778
> 
> 赞同：5
> 
> 时间：2012-08-03T20:23:47.523
> 
> 标签：c#, video, bitmap, screenshot, avi

我目前正在尝试制作屏幕录像机。我制作了位图图像列表，并希望将它们放入 .avi 文件中。无论如何在 C# 中可以做到这一点？

注意：我是新手，所以保持简单

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-07T12:12:26.893

试试[SharpAvi](http://sharpavi.codeplex.com)库。它的来源包括一个示例屏幕录制应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:28:17.910

试试这个也有可下载示例的站点：[AviFile Library 的简单 C# 包装器。](http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library)

# magento - 如何在模块的管理端使用 jQuery 而不会破坏其他所有内容？

> ID：11802780
> 
> 赞同：2
> 
> 时间：2012-08-03T20:23:48.500
> 
> 标签：magento

```
<default> 
  <reference name="head">
            <action method="addJs"><js>splurgyjs/jquery-1.7.2.min.js</js></action>
  </reference>
</default> 
```

那在我的布局文件夹中`hello.xml`

所以问题是，我创建了一个新的导航选项卡，其中包含一个使用 jQuery 的页面，它在我的自定义模块页面上完美运行。但是，jQuery 会破坏其他所有页面上的所有内容，例如菜单停止工作并且发生冲突。我怎样才能让布局只显示在我的页面上，或者我怎样才能在没有冲突的情况下包含 jQuery？

更新，我尝试了汤姆的建议：

在 config.xml 中：

```
 <layout>
         <updates handle="index_settings">
            <embeds>
                 <file>justin.xml</file>
            </embeds>
         </updates>
     </layout> 
```

在 justin.xml 中：

```
<justin_index_settings>

        <reference name="head">
            <action method="addItem">
           <type>js_css</type>
           <name>justin/style.css</name>
        </action>
        </reference>
    </justin_index_settings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:56:30.683

您的 XML 应如下所示：

```
<my_own_custom_handle>
    <reference name="head">
        <action method="addJs"><js>splurgyjs/jquery-1.7.2.min.js</js></action>
    </reference>
</my_own_custom_handle> 
```

然后从一个`module_controller_action`句柄。以模块`<catalog_product_view>`为例。`Mage_Catalog`

```
<catalog_product_view>
    <update handle="my_own_custom_handle" />
</catalog_product_view> 
```

这样，您的 Javascript 现在只为由`catalog_product_view`句柄生成的页面加载，因此只有产品详细信息页而不是列表页等。在您的情况下，您只需将此句柄调整为您的模块句柄，可能`justin_index_settings`。

# asp.net-mvc-3 - 无法在 actionLink 中传递参数 id

> ID：11802781
> 
> 赞同：1
> 
> 时间：2012-08-03T20:23:55.963
> 
> 标签：asp.net-mvc-3

无法理解问题出在哪里......我的溃败值是：

```
routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            ); 
```

我尝试传递参数 id ：

```
@Html.ActionLink(app.Name, "SingleAppEdit", "Admin", new { id = app.Id }, null) 
```

对于我在控制器“管理员”中的操作：

```
public ActionResult SingleAppEdit(string appId)
        {
            var positions = new List<SelectListItem>
                                       {
                                           new SelectListItem() {Text = "Top", Value = "Top"},
                                           new SelectListItem() {Text = "Bottom", Value = "Bottom"},
                                           new SelectListItem() {Text = "None", Value = "None"}
                                       };
            ViewData["PositionsList"] = new SelectList(positions, "Value", "Text");

            var app = Apps.FirstOrDefault(a => a.Id == Convert.ToInt32(appId));
            return View(app);
        } 
```

我在控制器中得到空值。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T20:25:31.913

您的方法参数名称是`appId`. 但是您正在尝试传递一个名为`id`.

**解决方案**：更改您的参数名称以匹配方法定义。

```
@Html.ActionLink(app.Name, "SingleAppEdit", "Admin",
                                new { appId= app.Id }, null) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:25:28.837

将控制器中的 appID 更改为 ID，如下所示：

```
public ActionResult SingleAppEdit(string id)
        {
            var positions = new List<SelectListItem>
                                       {
                                           new SelectListItem() {Text = "Top", Value = "Top"},
                                           new SelectListItem() {Text = "Bottom", Value = "Bottom"},
                                           new SelectListItem() {Text = "None", Value = "None"}
                                       };
            ViewData["PositionsList"] = new SelectList(positions, "Value", "Text");

            var app = Apps.FirstOrDefault(a => a.Id == Convert.ToInt32(id));
            return View(app);
        } 
```

# java - 让 JSF 2.0 执行分配给参数的方法，而不是存储对方法的引用？

> ID：11802782
> 
> 赞同：2
> 
> 时间：2012-08-03T20:24:01.267
> 
> 标签：java, jsf, jsf-2

在我开始之前，如果这个问题的标题措辞令人困惑，我深表歉意。我希望我在这里的解释会让它更清楚。

在我的应用程序的 JSF 模板中，我想包含另一个模板并向其传递一个参数，该参数包含应用程序方法的结果。在这个父模板中，我有：

```
<ui:repeat var="loopObject" value="#{ApplicationBean.objectList}">
    <ui:include src="anotherTemplate.xhtml">
        <ui:param name="firstParam" 
            value="#{ApplicationBean.initForOtherTemplate(loopObject)}" />
    </ui:include>
</ui:repeat> 
```

但事实证明，`initForOtherTemplate`此时并没有执行它，并且`firstParam`包含对该方法的引用，而不是它的返回值，正如我预期的那样。

实际上，虽然`initForOtherTemplate`确实有返回值，`anotherTemplate.xhtml`但并不需要它。但是，该方法确实设置了`ApplicationBean`这个新模板将使用的其他一些对象。例如，它设置 和 的值`importantInfo`，`importantInfoToo`这是其他模板需要的。

`anotherTemplate.xhtml`包含：

```
<ui:remove>
    <!-- 
    When a parameter contains a method call, the method isn't executed until
    the parameter is referenced.  So we reference the parameter here and ignore
    the results.  There must be a better way.
    -->
</ui:remove>
<h:outputText value="#{firstParam}" style="display: none;" />
<h:outputText value="#{ApplicationBean.importantInfo}" />
<h:outputText value="#{ApplicationBean.importantInfoToo}" /> 
```

如果此模板未引用`firstParam`，则`importantInfo`and`importantInfoToo`将不会被设置或具有不可预测的值。这很令人失望，因为我期望`initForOtherTemplate`在父模板中执行，而不是在这里，感觉很乱。

如何获得参数的分配以立即实际执行该方法，而不是存储对它的引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:33:58.180

这`<ui:repeat>`是`UIComponent`在视图渲染期间运行的。这`<ui:include>`是`TagHandler`在视图构建期间运行的（如 JSTL）。所以在运行的那一刻`<ui:include>`，`<ui:repeat>`没有运行，因此`#{loopObject}`在 EL 范围内根本不可用。

替换`<ui:repeat>`为`<c:forEach>`应该可以解决这个特定问题。

```
<c:forEach var="loopObject" items="#{ApplicationBean.objectList}">
    <ui:include src="anotherTemplate.xhtml">
        <ui:param name="firstParam" 
            value="#{ApplicationBean.initForOtherTemplate(loopObject)}" />
    </ui:include>
</c:forEach> 
```

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)- 用“ui:include”替换“JSTL”。

# html - 摆脱填充/边距 元素？

> ID：11802788
> 
> 赞同：12
> 
> 时间：2012-08-03T20:24:59.587
> 
> 标签：html, gwt, canvas

我在 div 中有一个画布对象。画布周围似乎有一个填充物。我希望它的边缘接触浏览器屏幕的边缘：

```
// my html file:
<body>
  <div id="canvasholder"></div>
</body>

// my java gwt code
Canvas canvas = Canvas.createIfSupported(); 
canvas.setWidth("100%");
canvas.setHeight("100%");
RootPanel.get("canvasholder").add(canvas); 
```

但是是的，页面仍然在画布元素周围有约 20 像素的边距。除了上面复制的内容之外，页面上没有其他内容。

我不认为这是特定于 GWT 的问题，可能是 html 元素具有默认的填充/边距？

谢谢

- - - 更新 - - - - - -

奇怪的是，我仍然看到填充，萤火虫插件向我展示了 body 元素以某种方式有 10px 的边距：

```
// firebug inspection of the body element:
body {
    background: none repeat scroll 0 0 #FFFFFF;
    border: 0 none;
    color: black;
    direction: ltr;
    margin: 10px; // huh?
    padding: 0;
}

// my css file:
hml, body, div, canvas {
    margin: 0px;
    padding: 0px;
}
div.logParent {
    position: absolute;
    top: 20px; left: 20px;
    color: black;
    z-index: 2;
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-29T10:11:19.753

我遇到了类似的问题，当我将 div 放置在页面底部时，内部带有画布的绝对定位 div（通过 JS 添加，因此周围没有多余的空格）导致页面溢出。

**解决方案是将画布显示属性设置为'block'**（当时不知道它是'inline-block'默认情况下），现在没有添加额外的填充并且滚动条消失了。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-03T20:31:36.900

正如您正确指出的那样，浏览器为各种 HTML 元素实现了默认样式（并且它们不是标准化的，因此*每个*浏览器实现的默认值略有不同）。出于您的目的，鉴于您发布的 HTML，您需要以下内容：

```
html, body, div, canvas {
    margin: 0;
    padding: 0;
} 
```

当然，这确实过度简化了事情，并且可能也值得设置`font-size`和默认值`color`和`background-color`属性（在*许多*其他方面）。

参考：

*   [重载 CSS 重置，作者 Eric Meyer](http://meyerweb.com/eric/thoughts/2007/05/01/reset-reloaded/)。
*   [YUI 重置](http://developer.yahoo.com/yui/reset/)。
*   还有很多其他的，虽然我真的只能想到这两个，但是[css-reset](/questions/tagged/css-reset "显示标记为“css-reset”的问题")可能对你有用。

# vba - 如何使文档在 Visual Basic 中保持 View.ShadeEditableRanges 属性

> ID：11802789
> 
> 赞同：0
> 
> 时间：2012-08-03T20:24:59.133
> 
> 标签：vba

我是 Visual Basic 的新手，但我正在组合一个宏，让我可以快速为组织中的每个部门制作信头，然后保护页眉和页脚，以便用户仅编辑其信件的文本。但这会在他们键入的任何内容后面创建一个黄色背景。

此代码删除黄色背景：

```
ActiveWindow.View.ShadeEditableRanges = False 
```

但是一旦文档关闭并重新打开，黄色阴影就会重新出现。这也不会让它留下来：

```
ActiveDocument.ActiveWindow.View.ShadeEditableRanges = False 
```

我成功创建了每次打开文档时运行的宏：

```
Private Sub Document_Open()
ActiveDocument.ActiveWindow.View.ShadeEditableRanges = False
End Sub 
```

这正确地删除了突出显示，但是，当然，它会导致大多数用户的安全警报。这对于也将分发给外部受众的文档是不可取的。

有没有办法让这个设置与文档保持一致？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:57:49.013

如果该属性在关闭和重新打开时丢失，我会在打开文档时进行设置。

```
Private Sub Document_Open()
    ActiveDocument.ActiveWindow.View.ShadeEditableRanges = False
End Sub 
```

# mysql - mysql_real_escape_string 带有从数组中提取的变量

> ID：11802791
> 
> 赞同：1
> 
> 时间：2012-08-03T20:25:07.500
> 
> 标签：mysql, mysql-real-escape-string

原帖：

我的脚本不工作（它没有记录数据）。在我添加 mysql_real_escape_string 之前它正在工作，所以我想知道我是否没有正确实现它：

```
$array = json_decode($downstream,TRUE);
$name = $array["status"]["name"];
$title = $array["status"]["title"];
$table = "mrTable";
$insert = "INSERT INTO $table (name, title) VALUES ('".mysql_real_escape_string($name)."', '".mysql_real_escape_string($title)."')"; 
```

INSERT 的实现对您来说是否正确？

**更新：**

这是整个代码，希望这会有所帮助。它仍然无法正常工作。当使用 real_escape_string 函数时，没有数据元素被记录在数据库中。一旦我删除了转义功能，数据就写得很好（当然，除非出现撇号）。

开始了：

```
//read contents of this file:

$json_data = file_get_contents('../list.txt');

//json to a php array

$array = json_decode($json_data,TRUE));

//store in mysql table

$table = "table1";
$name = mysql_real_escape_string($array["current"]["name"]);
$code = mysql_real_escape_string($array["current"]["code"]);

$insert="INSERT INTO $table (name, code) VALUES ('$name', '$code')";

$con = mysql_connect($db, $user, $pass);
if (!$con)
    {
    die ('Could not connect: ' . mysql_error());
    };

mysql_select_db($yup, $con);

mysql_query($insert) OR die(mysql_error());

mysql_close($con); 
```

**更新 2**

固定的！在第一次提到 mysql_real_escape_string 之前，您需要连接到数据库。现在一切正常......没有空白数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:38:18.363

您需要连接到数据库才能使用 mysql_real_escape_string。你好像不是。确保 mysql_connect 在您定义的行上`$insert`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:45:46.797

切勿将值直接插入查询字符串！即使他们逃脱了，这也不是一个聪明的主意。相反，请使用参数化语句，这将使像 ' OR 1 = 1 之类的攻击无用。您也不需要转义参数化语句的值......

```
PREPARE statement FROM
'INSERT INTO table (col1, col2)
 VALUES
 (?, ?)'

EXECUTE statement USING ('val1', 'val2')

DEALLOCATE statement 
```

仅在完成后解除分配。您可以使用不同的值重新执行任意多次。如果您无论如何都要重新执行，那么这样做也会提高性能！（因为该语句只为无限次的执行准备一次。）我建议你实现这个方法，如果你仍然有问题，然后再回来。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T21:53:39.073

请不要试图逃避你的参数。使用绑定变量。有关示例，请参见[http://bobby-tables.com/php.html](http://bobby-tables.com/php.html)。

# java - 使用位操作运算符进行位格式转换

> ID：11802799
> 
> 赞同：0
> 
> 时间：2012-08-03T20:25:38.303
> 
> 标签：java, bit-manipulation

我有一点转换问题，我有点挣扎。一些背景知识......研究一些计算生物学问题，因此需要非常快（处理大量数据集）。基本上我有以下 SNP 的位表示，我想写一些掩码/和/xor/等。操作，以便我可以快速从一种表示形式转换为下一种表示形式：

00 -> 100

01 -> 010

11 -> 001

因此，例如 00010111 应该转换为 100010010001。我将这些位存储在一个相当大的 java.util.BitSet 中，并且理想情况下希望能够仅使用位运算符将它们转换为新格式。

非常欢迎任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:54:42.087

我会使用查找表。一次抓取 16 位，并在具有 24 位条目的 64K 表中查找它们。

```
int[] table = new int[65536];
table[0] = 0b100100100100100100100100;
table[1] = 0b100100100100100100100010;
...
table[65535] = 0b001001001001001001001001;
BitSet output = new BitSet();
for (int i = 0; i < length; i += 16) {
    int x = (input.get(i) ? 1 : 0)
          + (input.get(i+1) ? 2 : 0)
          ...
          + (input.get(i+15) ? 32768 : 0);
    int y = table[x];
    output.set(i/16*24, (y & 1) != 0);
    output.set(i/16*24 + 1, ((y>>1) & 1) != 0);
    ...
    output.set(i/16*24 + 23, ((y>>23) & 1) != 0);
} 
```

# python - Python中的冰雹序列

> ID：11802800
> 
> 赞同：0
> 
> 时间：2012-08-03T20:25:50.313
> 
> 标签：python, python-2.7, sequence

```
length = 0
for n in range(1,101):
    print "Sequence #:", n
    while n != 1:
        print n,
        if n % 2 == 0:
           n = n / 2
           length = length + 1
        else:
            n = (n * 3) + 1
            length = length + 1
        if n == 1:
            print n
            length = length + 1
    print "The sequence above contains", length, "numbers"
    length = 0 
```

# 我的问题：

上面的 python 代码计算数字 1 - 100 的冰雹序列，然后显示序列的长度。完成所有计算后，如何显示具有最长序列的数字及其对应的长度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:30:53.393

只需保存每个输入的结果并最终查找最长的。

```
results = []
length = 0
for n in range(1,101):
    print "Sequence #:", n
    while n != 1:
        print n,
        if n % 2 == 0:
            n = n / 2
            length = length + 1
        else:
            n = (n * 3) + 1
            length = length + 1
        if n == 1:
            print n
            length = length + 1
    results.append((n,length))
    print "The sequence above contains", length, "numbers"
    length = 0
print 'Longest sequence of lenght {1} found for number {0}'.format(*max(results, key=lambda x: x[1])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:31:57.073

这将跟踪最大长度和序列并在最后显示它们。标有 a 的行`##`是对原始代码的补充。

```
length = 0
max_length = 0 ##

for n in range(1,101):
    print "Sequence #:", n
    seq = [] ##
    while n != 1:
        print n,
        seq.append(n)  ##
        if n % 2 == 0:
           n = n / 2
           length = length + 1
        else:
            n = (n * 3) + 1
            length = length + 1
        if n == 1:
            print n
            seq.append(n) ##
            length = length + 1
    print "The sequence above contains", length, "numbers"

    if length > max_length:  ##
        max_length = length  ##
        max_seq = seq[:]     ##

    length = 0

print 'max length: ', max_length ## same as len(max_seq)
print 'max seq: ', max_seq       ## 
```

# java - 使用 Mockito，我如何验证一个方法是用某个参数调用的？

> ID：11802801
> 
> 赞同：67
> 
> 时间：2012-08-03T20:25:51.353
> 
> 标签：java, mocking, mockito

我正在使用 Mockito 1.9.0。我将如何验证一个方法是否只被调用了一次，并且传递给它的一个字段是否包含某个值？在我的 JUnit 测试中，我有

```
@Before
public void setupMainProg() { 
    // Initialize m_orderSvc, m_opportunitySvc, m_myprojectOrgSvc
    ...
    m_prog = new ProcessOrdersWorker(m_orderSvc, m_opportunitySvc, m_myprojectOrgSvc);
}   // setupMainProg

@Test
public void testItAll() throws GeneralSecurityException, IOException { 
    m_prog.work();  
} 
```

“work”方法调用“m_orderSvc”方法（传递给对象的参数之一）。“m_orderSvc”又包含一个成员字段“m_contractsDao”。我想验证“m_contractsDao.save”是否被调用了一次，并且传递给它的参数是否包含某个值。

这可能有点令人困惑。让我知道如何澄清我的问题，我很高兴这样做。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-08-03T21:00:41.257

首先，您需要创建一个模拟 m_contractsDao 并进行设置。假设类是 ContractsDao：

```
ContractsDao mock_contractsDao = mock(ContractsDao.class);
when(mock_contractsDao.save(any(String.class))).thenReturn("Some result"); 
```

然后将模拟注入 m_orderSvc 并调用您的方法。

```
m_orderSvc.m_contractsDao = mock_contractsDao;
m_prog = new ProcessOrdersWorker(m_orderSvc, m_opportunitySvc, m_myprojectOrgSvc);
m_prog.work(); 
```

最后，验证 mock 是否被正确调用：

```
verify(mock_contractsDao, times(1)).save("Parameter I'm expecting"); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-03T21:25:19.617

基于 Mamboking 的回答：

```
ContractsDao mock_contractsDao = mock(ContractsDao.class);
when(mock_contractsDao.save(anyString())).thenReturn("Some result");

m_orderSvc.m_contractsDao = mock_contractsDao;
m_prog = new ProcessOrdersWorker(m_orderSvc, m_opportunitySvc, m_myprojectOrgSvc);
m_prog.work(); 
```

*解决您验证参数是否包含*某个值的请求，我可以假设您的意思是参数是一个字符串，并且您想要测试字符串参数是否包含子字符串。为此，您可以这样做：

```
ArgumentCaptor<String> savedCaptor = ArgumentCaptor.forClass(String.class);
verify(mock_contractsDao).save(savedCaptor.capture());
assertTrue(savedCaptor.getValue().contains("substring I want to find"); 
```

如果这个假设是错误的，并且参数`save()`是某种集合，那么它只会略有不同：

```
ArgumentCaptor<Collection<MyType>> savedCaptor = ArgumentCaptor.forClass(Collection.class);
verify(mock_contractsDao).save(savedCaptor.capture());
assertTrue(savedCaptor.getValue().contains(someMyTypeElementToFindInCollection); 
```

如果您知道如何使用 Hamcrest 匹配器，您也可以查看[ArgumentMatchers 。](http://docs.mockito.googlecode.com/hg/latest/org/mockito/ArgumentMatcher.html)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-04-18T07:46:59.563

这是更好的解决方案：

```
verify(mock_contractsDao, times(1)).save(Mockito.eq("Parameter I'm expecting")); 
```

# c++ - 模块会让模板编译更快吗？

> ID：11802807
> 
> 赞同：14
> 
> 时间：2012-08-03T20:26:27.463
> 
> 标签：c++, c++11

模块会让模板编译更快吗？模板（通常）必须只是标题，并且最终驻留在#includer 的翻译单元中。

相关：预编译的头文件是否使模板编译更快？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T20:40:23.623

根据模块提案，从您引用的那篇论文中，它是添加模块的三个主要目标中的第一个：

> **1 简介**
> 
> 模块是一种打包库并封装其实现的机制。它们与翻译单元和头文件的传统方法的不同之处主要在于所有实体都被定义在一个地方（甚至是类、模板等）。本文提出了一种模块机制（有点类似于 Modula-2），它具有三个主要目标：
> 
> *   显着缩短大型项目的构建时间
> *   在接口和实现之间实现更好的分离
> *   为现有库提供可行的过渡路径 虽然这些是驱动目标，但该提案还解决了许多其他长期存在的实际 C++ 问题（初始化排序、运行时性能等）。

那么，他们如何才能实现这些目标呢？好吧，从第 4.1 节开始：

> 由于头文件通常包含在许多其他文件中，因此构建周期的增长相对于源代码的总量通常是超线性的。如果问题没有得到解决，随着模板使用的增加和更强大的声明性工具（如概念、合同编程等）被添加到语言中，它可能会变得更糟。
> 
> 模块通过将文本包含机制（其处理时间大致与包含的代码量成正比）替换为预编译的模块附件机制（其处理时间 - 如果正确实施 - 大致与导入声明的数量成正比）来解决这个问题。可以保留私有模块定义更改时不需要重新编译客户端翻译单元的属性。

换句话说，至少解析这些模板所花费的时间只做了一次，而不是 N 次，这已经是一个巨大的进步。

后面的部分描述了诸如显式实例化之类的改进。正如 5.8 节所承认的，这并没有直接改进的一件事是自动模板实例化。在这里，所有可以保证的好处与您从预编译头文件中获得的好处完全相同：“模块 Set 和 Reset 都必须实例化 Lib::S 并且实际上都在它们的接口文件中公开了这个实例化。” 但该提案随后为 ODR 问题提供了一些可能的技术解决方案，其中至少一些还解决了多实例化问题，在当今世界可能无法实现。例如，建议的查询实例化类型已被反复尝试，通常认为很难与今天的模型相匹配，但模块可能使其可行。没有证据证明它

这符合提案中从未完全说明但在后台存在的一般含义：使编译更简单意味着我们可能会在过程中获得新的优化（直接，因为它更容易推理正在发生的事情，或间接地，因为一旦没有那么大的痛苦，就会有更多的人解决这个问题）。

总之，模块可以而且肯定会使模板编译更快，如果没有其他原因，模板定义本身只需要解析一次。它们可能会带来其他好处，如果没有模块，这些好处要么是不可能的，要么更难做到，但这可能无法保证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T22:22:37.897

> 预编译的头文件会使模板编译更快吗？

不; 它使模板*无法编译*。这是 PCH 和模块的全部要点：停止编译所有内容。

这个想法是将“加载 C++ 文本并编译”变成“加载 C++ 符号”。模块是 PCH 的一种通用形式。

现在，您仍然需要*实例化*模板的成本（除非它们是在 PCH/模块中实例化的）。但是编译 C++ 模板代码的成本被消除了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T21:12:18.240

我不了解模块，但我知道 gcc 甚至现在也提供预编译的头文件，许多其他编译器也是如此。预编译的标头可以包含模板描述的非常有效的机器可读版本，因此当包含标头时可用时，可以跳过许多编译步骤，这通常是纯源文本未编译标头所需的。

模块文件讨论了预编译的接口文件，所以我假设当前的预编译头文件和新的预编译接口文件将提供相当的性能。从纯文本可移植模块描述创建这样的文件可能会更有效，因为由于语言语法的限制，它可以节省时间。而且它会更加标准化，所以更多的头文件会从预编译中受益。当前项目很少预编译多个头文件，而跨项目预编译头文件在我的经验中更为罕见。

# backbone.js - 使用相同的主干关系模型来处理数据的预加载和临时加载

> ID：11802809
> 
> 赞同：0
> 
> 时间：2012-08-03T20:26:29.573
> 
> 标签：backbone.js, backbone-relational

我有一棵模型树，我想让它们预先从一个大的 JSON 请求中加载，然后能够一次更改它们，而无需保存整个树或重新加载整个树，也无需制作每个版本的两个版本模型。

我遇到的问题是，如果每个子模型都有一个 keySource，它们就不会预先加载，但是如果没有 keySource，你就不能单独加载或保存。

我在前期加载中的内容是完全连接的整个对象树（没有 id 列表），因为我没有看到解决方法。那是问题吗？或者如果没有两个以某种方式连接的模型版本，我正在尝试做的事情是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:22:51.910

如果您覆盖 Backbone.Model 的保存方法，则可以进行选择性保存。[我写了一篇关于这个主题的文章](http://goofydawg.net/2012/08/03/backbone-model-selective-saving/)。如果您想创建代表模型部分的小子模型，您可以选择。当这些被更改时，您可以获取它们的 changedAttributes 哈希并将其传递给主模型的保存。使用我在文章中讨论的方法，完全可以在保存期间仅发布模型的一部分。

您是否考虑过为此使用集合？您可以覆盖集合的 parse 方法来创建模型。只是一个想法。

# javascript - 跨不同范围访问函数

> ID：11802813
> 
> 赞同：1
> 
> 时间：2012-08-03T20:26:55.363
> 
> 标签：javascript, scopes

我试图理解以下场景，其中我在一个范围内定义了一个函数并希望在另一个范围内访问它。

我有两个不同的 JavaScript 文件，helper.js 和 main.js，它们都有一个自调用函数：

helper.js：

```
var outerShowData;

(function(){
    var innerShowData = function(param1, param2){
        alert("Data : "+ param1 +" - "+ param2);
    }

    outerShowData = innerShowData;
})(); 
```

主.js：

```
(function(){
    outerShowData("alpha", "beta");
    outerShowData("gamma", "theta");
})(); 
```

如果我首先在我的页面中包含 helper.js，然后是 main.js，这在 Firefox、Safari 和 Google Chrome 中完美运行。但是它在 IE8 中不起作用。

谁能指出我在这里做错了什么？

我编写自调用函数只是为了不弄脏全局范围。在这个方向上的任何帮助都会对我有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:35:05.670

```
// Your code would work identically with or without this variable declaration
var outerShowData;

(function(){
    // This is a local variable, and cannot be accessed outside the containing function()
    var innerShowData = function(param1, param2){
        alert("Data : "+ param1 +" - "+ param2);
    }

    // This assigns a value to a global variable
    outerShowData = innerShowData;
})(); 
```

你的`outerShowData`变量是全局的。它可以被任何未损坏的 JavaScript 环境中的任何其他代码访问。如果此代码给您带来 IE8 问题，则 IE8 似乎已损坏，认为您的问题更有可能出在代码的其他地方。IE8 不能正确支持全局变量将是一个*根本问题。*

您可以尝试设置和调用`window.outerShowData`，这会显式创建一个全局变量。

> 我编写自调用函数只是为了不弄脏全局范围。

这有点傻。无论哪种方式，您都在“弄脏”全局范围，除非现在您正在使用一堆不必要的代码和间接进行操作。

# wpf - 将窗口继承到另一个窗口 xaml

> ID：11802815
> 
> 赞同：1
> 
> 时间：2012-08-03T20:27:01.197
> 
> 标签：wpf, window, base, inheritance

我从 WPF 开始，但我找不到从一个窗口继承到另一个窗口的方法。

现在，我在 WinForm 上启动了一个新应用程序，在其中创建了一个通用窗口来添加/编辑/删除/咨询对象。所以窗口有一些按钮、页眉、页脚、背景颜色等。然后，我将这个窗口继承到每个对象的窗口。

所以什么都不做，我几乎已经准备好了整页。

我的问题是......我可以对 WPF 做同样的事情吗？因为，我想停止使用 Winform 开发应用程序并开始使用 WPF。

我花了很多时间寻找如何在 WPF 中执行此操作，但我找不到方法。我看到WPF不能继承外观。

我看到了自定义控件或用户控件，但我需要将东西放在我继承的控件中以完成屏幕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-24T08:38:26.987

对的，这是可能的。您需要将您的新类声明为公共（实际上这是为了确保两个类具有相同的范围）

```
public class newWindow : Window 
```

然后，从你的新类继承

```
public partial class TestClass : newWindow 
```

然后，修改 TestClass xaml 文件：

```
<base:newWindow>
xmlns:local="clr-namespace:YourNameSpace"
xmlns:base="clr-namespace:YourNameSpace"
</base:newWindow> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T22:58:09.207

WPF 不允许您以这种方式进行视觉继承。

我建议做的是创建一个继承自的自定义类，并为要在所有窗口上显示的不同按钮`Window`添加属性。`RelayCommand`让`RelayCommand`s 调用执行必要逻辑的虚拟方法。

然后，`ControlTemplate`为您的自定义创建一个自定义（将其设为默认值，以便任何自定义窗口都将使用此模板），`Window`其中包括一个页眉或页脚部分，其中包含您要在所有窗口中包含的按钮。然后，您可以将`DataBind`这些按钮添加到`Command`您的自定义窗口类中（可能通过`RelativeSource` `Self`绑定）。

这种方法应该允许您创建具有“共享”页脚但内容不同的窗口。如果您是 WPF 的新手，这可能有点棘手。另一种方法是创建一个`UserControl`实现页眉/页脚功能并引发按钮操作的事件，然后将其放在所有窗口上。但在我看来，这种方法无法利用 WPF 的强大功能，特别是控件的无视特性。

# asp.net - 在浏览器中调试/查看时出现“503 Service Unavailable”

> ID：11802816
> 
> 赞同：2
> 
> 时间：2012-08-03T20:27:03.630
> 
> 标签：asp.net, vb.net

我有几个使用 ASP .NET 4.0 创建的 Web 应用程序/Web 项目，我在家工作。我今天在工作中打开了一个，每当我尝试调试项目或右键单击 ->“在浏览器中查看”单个网页时，我都会收到“无法连接到服务器 localhost”的“503 服务不可用”错误作为完整的错误消息。

现在，我尝试了许多常见的修复方法，包括：

*   重新注册 .NET Framework 4.0
*   重新下载 .NET Framework 4.0
*   确保 localhost 没有指向另一个位置
*   确保在 IIS 功能（IIS -> 万维网服务 -> 应用程序开发功能）下检查了 .NET 可扩展性选项。
*   允许 IIS 管理器中“ISAPI 和 CGI​​ 限制”下的 ASP .NET v4.0.xxxx 设置。

然而，似乎什么都没奏效。这些页面工作的场景的唯一区别是我打开它们的计算机。我想这可能是防火墙设置，但我不太确定是什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:26:35.063

终于找到了解决这个问题的方法，我想我会分享以防万一其他人遇到同样的情况。事实证明这是一个*浏览器代理问题。*

如果在 Visual Studio 中调试 ASP 站点时无法连接到 localhost，请更改以下设置：

**Firefox**：选项 -> 高级 -> 网络 -> 设置

选择“无代理”或“自动检测此网络的代理设置”。当我收到此错误时，它被设置为“使用系统代理设置”（我从未手动更改此设置，必须进行更新）。

**Internet Explorer**：Internet 选项 -> 连接 -> LAN 设置

如果选中，请尝试取消选中“使用自动配置脚本”。这为我解决了这个问题，并且再次使用 ASP .NET 工作，我从未更改此设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-23T10:36:33.350

Internet 选项 -> 连接 -> LAN 设置 通过取消选中代理来禁用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-21T15:49:01.353

在公司网络上的 Windows 10 上存在类似问题。检查 IIS 并查看应用程序池中的复制配置文件是否设置为 true。切换为假。

IIS 在没有新版本号的情况下进行了更新，因为 Microsoft. 因此，重新安装也可能为其他人解决此问题。

# java - Java 泛型成员初始化

> ID：11802819
> 
> 赞同：6
> 
> 时间：2012-08-03T20:27:17.903
> 
> 标签：java, generics

假设我有一个包含私有 T _member 的 Java 类参数化。我想编写一个**默认**构造函数（无参数），它以某种方式将我的 T _member 初始化为一些已知的类型 T 特定值（如整数的 -1，浮点数的 Float.MAX_VALUE ......）。那可能吗？我尝试了 new T()，但编译器不喜欢这样。还是我什么都不做，保证会为我调用默认构造函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T20:29:37.127

由于[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，在运行时“没有 T”。

解决方法是将 的实例传递`Class<T>`给构造函数，如下所示：

```
public class MyClass<T> {

    T _member;

    public MyClass(Class<T> clazz) {
        _member = clazz.newInstance(); // catch or throw exceptions etc
    }

} 
```

顺便说一句，这是一个非常常见的代码模式，用于解决“用 T 做某事”的问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T23:06:59.170

Java 中没有初始化表达式的每个字段都会自动初始化为已知的默认值。是的，在这种情况下，它是类型 T -- 的已知值`null`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T20:28:40.307

这不是直接可能的，因为没有办法保证`T`甚至*有*一个默认的构造函数。但是，您可以想象使用带有 的反射来做到这一点`newInstance`。只要确保捕获任何可能引发的异常。

```
public class MyClass<T> {

    private T _member;

    public MyClass(Class<T> cls) {
        try {
            _member = cls.newInstance();
        } catch (InstantiationException e) {
            // There is no valid no-args constructor.
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T20:44:24.863

事实上有**一种**方法可以做到这一点，这里有一个链接来[回答](https://stackoverflow.com/a/4837336/432259)相关的 SO 问题。

因此，实际上您的主要问题是否有*可能*在运行时获得泛型成员类？是的，有 - 使用反射。

大约一年前，当我得到这个答案时，我对其进行了测试并进一步研究了反射。事实上，有几个情况下它不能按原样工作（注意继承的情况），但总的来说，声称这是不可能的是错误的。

但是，我强烈**不建议**这样做。

**编辑。**令人惊讶的是，我在该答案下方找到了我自己的评论 :) 在下一条评论中，作者提供了关于泛型反射的原始文章的链接。

# iphone - viewWillDisappear 导致应用程序在设备上崩溃，但在模拟器上不崩溃

> ID：11802820
> 
> 赞同：0
> 
> 时间：2012-08-03T20:27:22.850
> 
> 标签：iphone, objective-c, ios, ios-simulator

我正在使用故事板、ARC 和导航控制器在 Xcode 4.4 上为 iOS 5.1 开发一个简单的游戏。该应用程序可以在模拟器上完美运行，但不能在设备（iPhone 4 CDMA）上运行。所以基本上，我有一个带有 3 个 UI 按钮（玩游戏、选项、帮助）的主菜单。当我单击 Play Game 然后尝试通过导航控制器返回按钮返回菜单时，应用程序在设备上崩溃。它在以下线程停止：

```
Thread 1: EXC_BAD_ACCESS (code=1, address=0x70000008) 
```

并指出以下几点：

```
0x35b4df78:  ldr    r3, [r4, #8] 
```

在我的代码中还有一点我正在调用 popToRootViewContoller 方法。它也在这里崩溃（与我想的相同的线程错误）。但是，如果我注释掉 viewWillDisappear 方法，那么我可以毫无问题地来回切换。Options 和 Help 屏幕没有实现 viewWillDisappear 方法，在设备上完美地来回切换。

我在 viewWillDisappear 方法下有以下内容：

```
-(void)viewWillDisappear:(BOOL)animated
{
    [tmrCountdown invalidate];
    [tmrEclapsedTime invalidate];
    [tmrMainEnemyMovement invalidate];
    [tmrMoveSpawnedEnemies invalidate];
    [tmrSpawnEnemies invalidate];
    accInc=currPrefs.accelerometerSensitivity;
    enemySpeedX=5.0;
    enemySpeedY=5.0;
    countdown=4;
    ecMiliseconds=0;
    randTime=0;
    stopped=NO;
    gameStarted=NO;
} 
```

我在这里调用 popToRoot 方法：

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex==0)//cancel
    {
         //called here
        [self.navigationController popToRootViewControllerAnimated:YES];
    }
    else //1 (Play Again)
    {
        [self reInit];
    }
} 
```

谢谢， 梅胡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:44:17.407

正如我从代码中看到的那样，您正在使计时器无效，如果您尝试使无效（非重复计时器）无效，则可能会发生这种情况

```
repeats:NO 
```

或释放定时器。这不是一个例外，所以你不能用 @try 块来捕捉它。这是一个信号。你要做的是：

在您的计时器选择器中，您需要调用

```
[timer release]; // if you have allocated it
timer=nil;
...
Some action 
```

而在你看来WillDisappear

```
If (timer!=nil) { 
    [timer invalidate];
    timer=nil;
} 
```

# iphone - 将录制的url保存在核心数据中，但是当我稍后尝试使用它时不起作用

> ID：11802822
> 
> 赞同：7
> 
> 时间：2012-08-03T20:27:33.753
> 
> 标签：iphone, objective-c, ios, core-data, audio

*编辑：想通了！我正在保存 URL 的 absoluteString，当我尝试初始化音频播放器时，我使用了 [NSURL fileURLWithPath:name]; 当它应该是 [NSURL urlWithString:name] 时。通过创建另一个 fileURLWithPath 它正在更改路径并且不起作用。我想我会把它留给一些示例代码！*

好的，所以我在我的应用程序中录制了来自用户的音频片段。我希望用户能够保存这些录音，所以我想我应该将录音的 url 字符串保存到核心数据中，获取 url，并使用该 url 加载 AVAudioPlayer。但它不起作用。

它给了我：

```
Error in audioPlayer: The operation could not be completed. 
```

这是 URL 的 NSString：

```
 file://localhost/file:/localhost/var/mobile/Applications/E09081DE-434F-46CA-A598-
A2470973C0F1/Documents/Rang%2520De%2520sound.caf 
```

我觉得这与它保存在本地主机中的事实有关，并且在尝试初始化音频播放器时我实际上无法访问该文件。但我不确定。我确实知道该 URL 可以立即访问，因为在我录制后，我可以使用该 URL 播放录音。

我如何保存录音：

```
- (IBAction)saveRecording 
{
    rapAppDelegate *appDelegate = 
    [[UIApplication sharedApplication] delegate];

    NSManagedObjectContext *context = 
    [appDelegate managedObjectContext];
    NSManagedObject *newSong;
    newSong = [NSEntityDescription
                  insertNewObjectForEntityForName:@"URLRecordings"
                  inManagedObjectContext:context];
    NSError *error;

    NSURL *urlOfRecording = audioRecorder.url;
    NSString *urla = [urlOfRecording absoluteString];
    NSLog(@"in saveRecording, the url is: %@",urla);
    [newSong setValue:urla forKey:@"urlOfSong"];
    [context save:&error];
    status.text = @"Song Saved!";
} 
```

当我获取它时，URL 会改变！我不明白为什么！看：

```
2012-08-03 16:31:17.434 Rap To Beats[5054:707] in saveRecording, the url is: file://localhost/var/mobile/Applications/E09081DE-434F-46CA-A598-A2470973C0F1/Documents/Le%20Gayi%20sound.caf

2012-08-03 16:31:24.381 Rap To Beats[5054:707] after fetch, the url is: file://localhost/file:/localhost/var/mobile/Applications/E09081DE-434F-46CA-A598-A2470973C0F1/Documents/Le%2520Gayi%2520sound.caf 
```

它从 Le%20 变为 Le%2520！我没有重新录制或任何东西，我只是将相同的字符串保存在核心数据中并获取它！开始时本地主机也有一些变化。

然后这就是我获取它的方式：

```
rapAppDelegate *appDelegate = 
    [[UIApplication sharedApplication] delegate];

    NSManagedObjectContext *context = 
    [appDelegate managedObjectContext];

    NSEntityDescription *entityDesc = 
    [NSEntityDescription entityForName:@"URLRecordings" 
                inManagedObjectContext:context];

    NSFetchRequest *request = [[NSFetchRequest alloc] init];

    [request setEntity:entityDesc];
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
                                        initWithKey:@"urlOfSong" ascending:NO];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
    [request setSortDescriptors:sortDescriptors];
    NSError *error = nil;
    NSMutableArray *mutableFetchResults = [[context
                                            executeFetchRequest:request error:&error] mutableCopy];
    if (mutableFetchResults == nil) {
        // Handle the error.
    }

    [self setUrlArray:mutableFetchResults]; 
```

有关如何解决这些问题的任何帮助？如果它与本地主机有关，那么我如何将它保存在其他地方？

这是保存位置的代码：

```
NSArray *dirPaths;
    NSString *docsDir;

    dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    docsDir = [dirPaths objectAtIndex:0];
    NSString *name = self.beatName.text;
    NSString *soundFilePath1 = [docsDir
                               stringByAppendingPathComponent:name];
    NSString *soundFilePath = [soundFilePath1
                               stringByAppendingString:@" sound.caf"];
    NSLog(@"in viewDidLoad, the url is: %@",soundFilePath);
    NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];

    NSDictionary *recordSettings = [NSDictionary 
                                    dictionaryWithObjectsAndKeys:
                                    [NSNumber numberWithInt:AVAudioQualityMin],
                                    AVEncoderAudioQualityKey,
                                    [NSNumber numberWithInt:16], 
                                    AVEncoderBitRateKey,
                                    [NSNumber numberWithInt: 2], 
                                    AVNumberOfChannelsKey,
                                    [NSNumber numberWithFloat:44010.0], 
                                    AVSampleRateKey,
                                    nil];

    NSError *error = nil;

    audioRecorder = [[AVAudioRecorder alloc]
                     initWithURL:soundFileURL
                     settings:recordSettings
                     error:&error];

    if (error)
    {
        NSLog(@"error: %@", [error localizedDescription]);

    } else {
        [audioRecorder prepareToRecord];
    } 
```

对不起这个问题的长度，只是想尽可能地提供帮助并放置任何可能有助于解决问题的代码。让我知道是否是我做错的其他事情！多谢你们！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T18:21:00.010

弄清楚了！我正在保存`absoluteString`URL，当我尝试初始化我使用的音频播放器`[NSURL fileURLWithPath:name]`时，它应该是`[NSURL URLWithString:name]`. 通过创建另一个`fileURLWithPath`它正在改变路径并且不起作用。我想我会把它留给一些示例代码！

# android - setNotificationUri 的机制是什么？

> ID：11802823
> 
> 赞同：28
> 
> 时间：2012-08-03T20:27:52.507
> 
> 标签：android, android-cursorloader

我刚刚实现了一个 CursorLoader，效果很好！事实上，我不相信我的 ListView 会在底层数据发生变化时自动更新，直到我测试它。这显然是 setNotificationUri 的魔力。

我的问题是，它如何知道游标中的数据何时发生了变化？假设我悄悄地在某处插入了一行。底层机制是否不断地查询数据库并与过去的数据进行比较？如果数据集很大，那会不会非常低效？

在我使用游标加载器之前，我会在必要时手动刷新。我不必再这样做真是太好了，但是让 CursorLoader 在后台执行此操作是否有效？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-03T21:00:21.237

如果我在某个地方错了，请纠正我。

`ContentProvider`在方法中调用类似这样的东西`query(…)`：

```
// Tell the cursor what uri to watch, so it knows when its source data changes
cursor.setNotificationUri(getContext().getContentResolver(), uri); 
```

`CursorLoader`取回光标并注册一个观察者。

```
/* Runs on a worker thread */
@Override
public Cursor loadInBackground() {
    Cursor cursor = getContext().getContentResolver().query(mUri, mProjection,
            mSelection, mSelectionArgs, mSortOrder);
    if (cursor != null) {
        // Ensure the cursor window is filled
        cursor.getCount();
        registerContentObserver(cursor, mObserver);
    }
    return cursor;
}

/**
 * Registers an observer to get notifications from the content provider
 * when the cursor needs to be refreshed.
 */
void registerContentObserver(Cursor cursor, ContentObserver observer) {
    cursor.registerContentObserver(mObserver);
} 
```

当有人修改数据时，`ContentProvider`通知`ContentResolver`更改：

```
getContext().getContentResolver().notifyChange(uri, null); 
```

`ContentResolver`反过来通知所有注册的观察者。

由 注册的观察者`CursorLoader`强制它加载新数据。

# c# - 'System.Collections.Generic.KeyValuePair '不包含'工作'的定义

> ID：11802828
> 
> 赞同：0
> 
> 时间：2012-08-03T20:28:31.640
> 
> 标签：c#, facebook-c#-sdk

```
 namespace WebApplication1.Site
{
public partial class WebForm1 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

        var accessToken = "" // Token
        var client = new FacebookClient(accessToken);
        dynamic myInfo = client.Get("me/friends", new { fields = "name,id,work" });

        foreach (dynamic friend in myInfo)
        {
            foreach (dynamic work in friend.work ?? new[] { new { employer = new { name = string.Empty }, position = new { name = string.Empty } } })
                {
                    Response.Write("Employer: " + work.employer.name);
                }

        }

    }
}
} 
```

我在第 21 行收到以下错误。我无法弄清楚是什么原因造成的。

“System.Collections.Generic.KeyValuePair”不包含“工作”的定义

来自 Facebook GraphAPI 的示例 JSON 返回。这只是前三个朋友。我正在解析近 4000 个朋友，显然这为数据结构提供了一些上下文：

```
 {
      "data": [
{
  "name": "Mia xxx", 
  "id": "11381", 
  "work": [
    {
      "employer": {
        "id": "100982923276720", 
        "name": "New-York Historical Society"
      }, 
      "location": {
        "id": "108424279189115", 
        "name": "New York, New York"
      }
    }
  ]
}, 
{
  "name": "Leilah xxx", 
  "id": "1133"
}, 
{
  "name": "xxx, 
  "id": "1231", 
  "work": [
    {
      "employer": {
        "id": "104362369673437", 
        "name": "Bye Bye Liver: The Philadelphia Drinking Play"
      }, 
      "location": {
        "id": "101881036520836", 
        "name": "Philadelphia, Pennsylvania"
      }, 
      "position": {
        "id": "121113421241569", 
        "name": "Actress/Bartender"
      }, 
      "description": "A sketch comedy/improv show every Saturday night at Downey's on South & Front. Come thirsty!", 
      "start_date": "2011-09"
    }, 
    {
      "employer": {
        "id": "100952634348", 
        "name": "Act II Playhouse"
      }, 
      "location": {
        "id": "109249869093538", 
        "name": "Ambler, Pennsylvania"
      }, 
      "position": {
        "id": "125578900846788", 
        "name": "My Fair Lady"
      }, 
      "description": "11 actor version of the classic musical.", 
      "start_date": "0000-00"
    }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:49:24.407

依赖的另一种方法`dynamic`是使用 JSON.net 捕获和解析 JSON，它是为查询 json 数据而设计的，并且确实比使用安全得多`dynamic`

[http://json.codeplex.com/](http://json.codeplex.com/)

并反序列化为类：

[http://dotnetbyexample.blogspot.ca/2012/02/json-deserialization-with-jsonnet-class.html](http://dotnetbyexample.blogspot.ca/2012/02/json-deserialization-with-jsonnet-class.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T20:30:14.287

看这个：

```
Response.Write("Employer: " + myInfo.work.employer.name); 
```

我怀疑你的意思是：

```
Response.Write("Employer: " + work.employer.name); 
```

这么说吧——如果这*不是*你的意思，你的`work`变量的目的是什么？

# css - XSL 文档的仅 IE7 样式表

> ID：11802830
> 
> 赞同：6
> 
> 时间：2012-08-03T20:28:35.870
> 
> 标签：css, xslt, internet-explorer-7, conditional-comments

如何将仅限 IE7 及更低版本的样式表添加到 XSL 页面？我尝试将其添加到模板中以获取标题信息，如下所示：

```
<xsl:template name="header">
<!--[if lte IE 7]>
<link rel="stylesheet" type="text/css" href="/rcm/verisign/style/2012/ie7.css"/>
<![endif]-->
</xsl:template> 
```

并且条件永远不会在我的文档中执行，即使我在纯 HTML 文档中使用相同的片段并且它工作正常。是什么赋予了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:46:25.937

该注释将被解析器视为 XSL 中的注释，并将从生成的 HTML 代码中删除。

如果要在 HTML 中生成注释，则需要将其包含在`CDATA`块中，以便 XSL 解析器将其视为纯文本，逐字复制到目标文档。

代码如下所示：

```
<![CDATA[
  <!--[if lte IE 7]>
  <link rel="stylesheet" type="text/css" href="/rcm/verisign/style/2012/ie7.css"/>
  <![endif]-->
]]> 
```

`<![CDATA[`和之间的所有内容都`]]>`将被视为纯文本。

希望这应该回答你的问题。

但是，如果可能的话，我建议最好的解决方案是放弃对 IE7 的支持。在过去六个月左右的时间里，它的使用统计数据已经跌到了最低点——现在几乎和 IE6 一样低；几乎没有人还在使用它。我很感激在某些情况下您可能别无选择，但如果您确实有选择，我的建议是放弃它。

**[编辑]**

好的，经过进一步研究，您似乎是对的：一个普通的`CDATA`块*确实*逃脱了它的输出（尽管在许多地方声称相反）。

相反，您需要使用`<xsl:comment>`在输出中生成 HTML 注释。使用条件注释语法执行此操作会变得非常混乱，您可能仍需要使用 CDATA。

我能找到的最好的例子是：http: [//getsymphony.com/download/xslt-utilities/view/21798/](http://getsymphony.com/download/xslt-utilities/view/21798/)

如您所见，这是相当多的代码。

一个简短的版本（没有灵活性）可能如下所示：

```
<xsl:comment>
    [if lte 7<![CDATA[>]]>
    <link rel="stylesheet" type="text/css" href="/rcm/verisign/style/2012/ie7.css"/>
    <![CDATA[<![endif]]]>
</xsl:comment> 
```

希望有帮助。抱歉，原来的答案不完整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T15:45:56.693

**这是一种行之有效的方法——这是 DOE 有用的罕见情况之一**：

```
<xsl:text disable-output-escaping="yes">
        &lt;!--[if lte IE 7]>
        &lt;link rel="stylesheet" type="text/css" href="/rcm/verisign/style/2012/ie7.css"/>
        &lt;![endif]-->
</xsl:text> 
```

**一个完整的例子**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes"/>

 <xsl:template match="/*">
    <xsl:text disable-output-escaping="yes">
        &lt;!--[if lte IE 7]>
        &lt;link rel="stylesheet" type="text/css" href="/rcm/verisign/style/2012/ie7.css"/>
        &lt;![endif]-->
    </xsl:text>
     <p>
       Done.
     </p>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（未使用）时，将产生所需的正确结果**：

```
<!--[if lte IE 7]>
        <link rel="stylesheet" type="text/css" href="/rcm/verisign/style/2012/ie7.css"/>
        <![endif]-->
<p>
       Done.
     </p> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T21:14:41.457

你有：

```
<!--[if lte IE 7]> 
```

它应该是：

```
<!--[if lt IE 7]> 
```

# facebook-fql - 数组中带有 Null 反馈的 FQL WHERE IN

> ID：11802834
> 
> 赞同：0
> 
> 时间：2012-08-03T20:28:42.150
> 
> 标签：facebook-fql

我正在尝试以下命令：

SELECT * FROM mytable WHERE field IN(1,2,3, NULL, 5) 结果是 {r1,r2,r3} 我想要 {r1,r2,r3,NULL,r4}，我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:58:10.740

你不能。Facebook 会自动从行中过滤掉 NULL 结果。也不能保证结果与您在`IN`标准中传递的参数的顺序相同。

你也不能`SELECT *`在 FQL 中。您必须单独选择要返回的字段。

你需要做这样的事情：

```
 THINGS_TO_FIND = array (1,2,3,NULL,5)
  RESULT = FQL_URL + urlencode('SELECT field1, field2 FROM table WHERE field1 IN ' + THINGS_TO_FIND')
   foreach (THING in THINGS_TO_FIND) {
      foreach (ITEM in RESULT) {
         if THING == ITEM->field1 then OUTPUT->field1 = ITEM->field2
      }
   } 
```

# java - Java(JAXP) 和 XSLT：覆盖 XML 文件

> ID：11802840
> 
> 赞同：1
> 
> 时间：2012-08-03T20:28:53.660
> 
> 标签：java, xml, xslt, jaxp

我通过将 XML/HTML 文件 (temp.xml) 和 XSLT(temp.xsl) 作为输入来生成 XML 文件，并且我的输出生成为具有新名称 (temp_copy.xml) 的单独文件，但我想覆盖输入 XML 文件，而不是创建新文件。我尝试提供与输入文件中相同的路径，但这不起作用。那么实现这一目标的另一种方法是什么？提前致谢。

**我的Java代码：**

```
public class SimpleXSLT {
    public static void main(String[] args) {

        String inXML = "C:/tmp/temp.xml";
        String inXSL = "C:/tmp/temp.xsl";
        String outTXT = "C:/tmp/temp_copy.xml";
        SimpleXSLT st = new SimpleXSLT();
        try {
            st.transform(inXML,inXSL,outTXT);
            } catch(TransformerConfigurationException e) {
            System.err.println("Invalid factory configuration");
            System.err.println(e);
            } catch(TransformerException e) {
            System.err.println("Error during transformation");
            System.err.println(e);
        }
    }
    public void transform(String inXML,String inXSL,String outTXT)
    throws TransformerConfigurationException,
    TransformerException {
        TransformerFactory factory = TransformerFactory.newInstance();
        StreamSource xslStream = new StreamSource(inXSL);
        Transformer transformer = factory.newTransformer(xslStream);
        transformer.setErrorListener(new MyErrorListener());
        StreamSource in = new StreamSource(inXML);
        StreamResult out = new StreamResult(outTXT);
        transformer.transform(in,out);
        System.out.println("The generated XML file is:" + outTXT);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:33:05.970

“但这不起作用”需要更好地定义。你有错误吗？如果有，它说了什么？如果没有，发生了什么事出乎你的意料？

通常，覆盖其输入的进程在完成读取之前就有破坏输入的危险，除非它专门设计为能够处理这种情况。

最简单的解决方案是写入一个单独的输出文件，然后在转换完成后，删除或移动/重命名输入文件，并将输出文件移动/重命名为输入文件以前的样子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T05:39:44.313

如果其他人面临同样的问题，那么看看我按照 LarsH 的建议做了什么，它工作得很好 -

```
public static void main(String[] args) {
    String inXML = "C:/tmp/text.xml";
    String inXSL = "C:/tmp/text.xsl";
    String outTXT = "C:/tmp/text_copy_copy.xml";
    String renamedFile = "C:/tmp/text.xml";
    File oldfile =new File(outTXT);
    File newfile =new File(renamedFile);
    SimpleXSLT st = new SimpleXSLT();
    try {
    //TRANSFORMATION CODE
    }

    try{     
        File file = new File(inXML);
        if(file.delete()){
            System.out.println("Deleted!");
        }else{
            System.out.println("Failed.");
        }

    }catch(Exception e){

        e.printStackTrace();

    }

    if(oldfile.renameTo(newfile)){
        System.out.println("Renamed");
    }else{
        System.out.println("Rename failed");
    }

    } 
```

# regex - 将一个数字的列表转换为 int

> ID：11802843
> 
> 赞同：0
> 
> 时间：2012-08-03T20:29:14.747
> 
> 标签：regex, list, python-2.7, int

我有一个正则表达式，可以从日志中解析 line# 字符串。然后对该 line# 进行另一个正则表达式以提取 line#。

例如：

此正则表达式的一部分：

```
m = re.match(r"^(\d{4}-\d{2}-\d{2}\s*\d{2}:\d{2}:\d{2}),?(\d{3}),?(?:\s+\[(?:[^\]]+)\])+(?<=])(\s+?[A-Z]+\s+?)+(\s?[a-zA-Z0-9\.])+\s?(\((?:\s?\w)+\))\s?(\s?.)+", line) 
```

将匹配这个：

```
(line 206) 
```

然后这个正则表达式：

```
re.findall(r'\b\d+\b', linestr) 
```

给我

```
['206'] 
```

为了进一步处理我的信息，我需要将行号作为整数，并且对于如何做到这一点的解决方案感到迷茫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:35:05.987

你可以试试：

```
line_int = int(re.findall(r'\b\d+\b', linestr)[0]) 
```

或者如果列表中有多个元素：

```
lines_int = [int(i) for i in re.findall(r'\b\d+\b', linestr)] 
```

甚至

```
lines_int = map(int, re.findall(r'(\b\d+\b)+', linestr)) 
```

希望对你有帮助-^.^-

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:42:33.367

使用[int()](http://docs.python.org/library/functions.html#int)将您的一个“字符串数字”列表转换为 int：

```
 myl = ['206']
 int(myl[0])
 206 
```

如果您有这些列表，则可以使用[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)将它们全部转换为整数：

```
[int(i) for i in myl] 
```

产生一个整数列表。

您可以将其挂钩到您的代码中，例如，

`int(re.findall(r'\b\d+\b', linestr)[0])`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T20:31:44.803

```
int(re.findall(r'\b\d+\b', linestr)[0]) 
```

?

# html - 在脚本中使用 sed 将 html 标签添加到文本中

> ID：11802846
> 
> 赞同：0
> 
> 时间：2012-08-03T20:29:26.450
> 
> 标签：html, bash, tags, sed

我正在尝试在 shell 脚本中使用 sed 将 html 超链接标签添加到纯文本文件中的 url。

这是我的 newtext.txt 的内容：

```
www.example.com 
```

这是运行脚本后我想要的 newtext.txt 的所需内容：

```
<a href="http://www.example.com">www.example.com</a> 
```

这是我当前脚本 addhtml.sh 的内容：

```
#!/bin/bash
newtextv='cat newtext.txt'
sed -i.bak 's|\(www.*\)|<a href="$newtextv">\1</a>|' newtext.txt 
```

但不幸的是，运行脚本后，newtext.txt的内容变成了：

```
<a href="$newtextv">www.example.com</a> 
```

我相信我的错误与我的变量如何被引用有关？

我最终希望这个脚本也能够转换完整的 url（包含 http:// ）......我显然需要大量提高我的 sed 知识（我花了几天时间才做到这一点），但我可以不要把我的头绕在这个上面。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:38:56.950

如果要将文件的内容放入变量中：

```
newtextv=$(cat newtext.txt) 
```

但实际上，您可能想要这样的东西（但显然有更好的正则表达式）：

```
sed 's|www\.[^ ]*|<a href="&">&</a>|g' <newtext.txt >newtext.html 
```

Sed 用`&`匹配的字符串替换 every。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T15:00:37.450

你的麻烦是两个小语法错误：

1.  `cat newtext.txt`永远不会执行，您需要使用反引号```或`$()`
2.  使用单引号`'`可防止变量扩展。允许变量扩展使用双引号`"`

这是你想要做的：

```
#!/bin/bash
newtextv=$(cat newtext.txt)
sed -i.bak "s|\(www.*\)|<a href=\"$newtextv\">\1</a>|" newtext.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T20:50:29.110

如果您碰巧在变量中有 URL，您也可以在不使用 sed 的情况下执行此操作：

```
newtextv=www.example.com
echo "<a href=\"http://${newtextv#www.}\">$newtextv</a>" 
```

返回

```
<a href="http://example.com">www.example.com</a> 
```

在 Bash 中，您可以将[变量](http://tldp.org/LDP/abs/html/string-manipulation.html)作为变量替换的子集进行操作。
这里`${newtextv#www.}`基本上意味着采取`$newtextv`和削减“www”。从一开始

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T20:39:36.987

为什么要搞乱一个变量？

```
sed -i 's|\(www.*\)|<a href="\1">\1</a>|' newtext.txt 
```

或者

```
sed -i 's|www.*|<a href="&">&</a>|' newtext.txt 
```

# asp.net - 如何让公共变量（在模块中）不在用户之间共享价值

> ID：11802850
> 
> 赞同：2
> 
> 时间：2012-08-03T20:29:50.880
> 
> 标签：asp.net, .net, vb.net, module, scope

我正在使用 Windows/Active Directory 身份验证的 ASP.NET (VB) Web 应用程序

我正在使用一个模块，这样我就可以调用公共子例程和函数以及引用变量，而不必实例化一个新对象来在每个页面上访问它们。

在该模块中，我在整个 Web 应用程序的多个页面中使用了一些公共变量。我最近意识到模块中这些公共变量的值在所有用户之间共享。

目标：我希望这些全局变量的值特定于单个用户，而不是在所有会话之间共享，并且我不想在每个使用该变量的页面上实例化一个新的对象/类。

问题：我不想将值存储在客户端变量中，例如 cookie 或会话。我希望将值存储在服务器上，但特定于每个客户端/用户。

我唯一能想到的就是设置一个全局集合/字典并使用经过身份验证的用户名存储变量，但是我需要有特定的函数来获取和设置值。虽然这会起作用，但它需要更新应用程序中所有页面上对这些变量的所有引用。

问题示例：下面的代码显示了我如何在模块中创建公共变量，以及如何从一个页面设置值并在另一个页面上使用。我想继续以同样的方式使用这个变量并在页面之间共享它的值，但是变量的值不需要在用户之间共享。

-- 模块.VB --

```
Public Module MyMod  
    Public myVariable as String = ""  
End Module 
```

-- 主页.VB --

```
 Partial Class _Default  
        Sub Page_Load() Handles MyBase.Load()  
           myVariable = "HELLO WORLD"  
        End Sub  
    End Class 
```

-- NEXTPAGE.VB --

```
 Partial Class _Default  
        Sub Page_Load() Handles MyBase.Load()  
           Response.Write(myVariable)  
        End Sub  
    End Class 
```

如果我必须使用我的用户 ID 索引集合解决方案，此应用程序中有很多页面需要手动更新，所以我希望有一种方法可以简单地以不同的方式限定这些变量或禁用共享会话之间。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:41:12.180

您遇到的问题是 Web 编程中非常常见的问题。一个模块的成员是静态的——这意味着在你的应用程序的整个 AppDomain 中有一个它们的实例。每个访问这些的用户都将获得相同的对象 - 您已经了解了这一点。

您的选择正是您所描述的。您可以将模块中的公共变量替换为您编写的 getter 属性以访问字典中的用户特定字段（请在编写此 getter 代码时记住线程安全）。

更简单的解决方案是使用 Session。会话值存储在服务器端并且是用户特定的。客户端发送的唯一内容是会话密钥，如果您使用的是 .Net 身份验证，则可能已经发送。

祝你好运，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T20:44:22.600

您没有说明这些变量是否需要在页面往返过程中保持不变，或者它们是否只是在每个页面的生命周期中使用。

如果它们没有跨页面持久化，那么最简单的解决方案可能是让所有页面都从基于页面的类继承，然后将值从模块移动到基本页面。这样您就不必更改任何变量引用，只需更改页面继承。

如果您确实想保留这些值，完成上述更改会使其更容易实现。然后，您可以将基本页面上的成员变量转换为属性，并将您的用户特定缓存和获取嵌入到 getter 和 setter 中。

例如，而不是：

```
Public MyVariable As String = "" 
```

你会有类似的东西：

```
Public Property MyVariable As String
    Get 
       Return GlobalMyVariableCache(UserNameKey)
    End Get
    Set (Value As String)
       GlobalMyVariableCache(UserNameKey) = Value
    End Set
End Property 
```

# c# - 使用构造函数初始化实体框架对象的新实例？

> ID：11802853
> 
> 赞同：0
> 
> 时间：2012-08-03T20:30:18.343
> 
> 标签：c#, entity-framework

是否可以将构造函数与 EF 实体一起使用？

我想添加一个实体框架实体的新实例并将其添加到 List<>

IE

```
List<MyObject> objectList = new List<MyObject>();
objectList.Add(new MyObject( "property" , 1); 
```

代替

```
List<MyObject> objectList = new List<MyObject>();
MyObject object = new MyObject();
object.Name = "property1";
object.ID = 1;
objectList.Add(object); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:32:56.020

是的，你绝对可以做到这一点。

实体框架代码优先是关于*持久性无知*的。也就是说，您可以按照您一直拥有的方式编写代码，并且持久性部分“正常工作”。实际上，该目标存在一些限制，但在大多数情况下，它的工作原理与宣传的一样。

请注意，还必须有一个无*参数*构造函数（以便 Entity Framework 可以自动实例化对象的实例）。但是您也可以拥有任意数量的参数化构造函数。

# oracle10g - 将数据从 SQL Server 复制到 Oracle

> ID：11802856
> 
> 赞同：1
> 
> 时间：2012-08-03T20:30:40.670
> 
> 标签：oracle10g

我有一个视图，它通过数据库链接从 SQL 服务器中提取数据。

类似 select * from codelkp@sql_link;

由于此表在我的数据库代码中非常频繁地使用（选择），为了消除网络周转时间，我打算将表 codelkp（这是通过 dblink 访问的 SQL server 表）中的所有数据转储到我的 oracle 表中让我们说 codelkp_orcl 并使用它。如何将 codelkp 表中的任何数据更改复制到 codelkp_orcl？我可以编写一个程序来删除 codelkp_orcl 并从 codelkp 重新加载，但同时如果我的应用程序在 codelkp_orcl 表中找不到数据，则会导致功能问题。请提出修复建议。

# gcc - 正确使用英特尔调试寄存器的方法（GCC / 内联汇编）

> ID：11802857
> 
> 赞同：1
> 
> 时间：2012-08-03T20:30:44.680
> 
> 标签：gcc, linux-kernel, x86, x86-64

我一直在尝试使用英特尔调试寄存器，但我似乎做错了什么。我创建了一个非常简单的 Linux LKM，并尝试使用内联汇编来执行寄存器的简单操作。例如：

```
 __asm__ ("movl %eax, %db0"); 
```

我收到的错误消息表明我在做一些根本不正确的事情。例如：

```
Error: unsupported for `mov' 
```

有没有人对如何使用这些寄存器有任何见解？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T20:54:45.250

这是一个语法错误 - gcc 的内联汇编器`%`用作操作数标识符，并且要在 x86 的寄存器名称中显式使用它，您必须编写：

```
__asm__ ("movl %%eax, %%db0\n\t"); 
```

这将使它编译。

**更正：**
这里有多个问题：

1.  `__asm__`没有 clobbers 的语句是非常不寻常的（并且很少做你所期望的，因为在汇编中可以做的事情很少没有副作用）。尽管如此，*当且仅当*指令实际上既没有副作用又没有输入时，看起来可以省略clobber列表。
    其结果之一是`%`不再需要转义。这个简单示例的编译器为`__asm__("movl %eax, %db0\n\t");`完全指定的`__asm__("movl %%eax, %%db0\n\t":::);`. 不过，这不一定是优势，因为...
2.  第二个问题是便携性；x86_64 和 i386 相似但不相同，其中一个区别是调试 reg 的寄存器宽度。仅这一点就是实际*使用内联汇编操作数而不是直接使用寄存器名称*的一个特别好的理由，因为以下代码：
    `__asm__("mov %0, %%db0\n\t" : : "a"((uintptr_t)0) : );`
    在 64 位 ( `gcc -m64 ...`) 和 32 位 ( )上编译`gcc -m32 ...`- 它创建*相同*的指令，但在汇编中编写时使用的寄存器对于 64 位是不同的：
    `208: 0f 23 c0 mov %rax,%db0`
    在 32 位中，它确实如此：
    `269: 0f 23 c0 mov %eax,%db0`
    这里使用输入操作数提供了抽象寄存器宽度的能力（`uintptr_t`来自`<inttypes.h>`并且保证始终是完整的通用寄存器宽度），因此相同的内联汇编可用于 32 位和 64 位编译。

我承认我不知道编译器将 clobber-list-less`__asm__`与“正常”此类语句区别对待。

在任何情况下，实际上您在修改调试寄存器*时*肯定需要一个参数/clobber 列表，因为对这些的访问是序列化指令，编译器应该隐式地知道这些指令是`memory`clobber。此外，您从它们那里读取/写入它们的值必须来自/来自某个地方……因此是输入/输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-28T21:12:13.070

FrankH 的答案在 x64 模式下不起作用。可能使用的是：

```
inline void setDebugReg( long v )
{
   __asm__ __volatile__ ("mov %0, %%db0\n\t" : : "r"(v) : ) ;
} 
```

（对于 db7，您需要一个类似的 asm 来设置观察点的标志）。

但是设置这些寄存器不能在用户空间完成，所以需要其他方法。这是使用 ptrace 执行此操作的示例代码，其中[一个进程被派生到 ptrace attach、更改寄存器、ptrace detach 然后退出](https://stackoverflow.com/a/11788476/189270)。

# asp.net - 使用 aspnet_Users 表触发

> ID：11802859
> 
> 赞同：1
> 
> 时间：2012-08-03T20:30:52.243
> 
> 标签：asp.net

祝你平安

我在 Visual Studio 2008 中的 ASPNETDB 提供的 aspnet_Users 上创建了一个触发器。

```
ALTER TRIGGER UpdateTrigger
ON dbo.aspnet_Users
FOR UPDATE 
AS 

declare @InHisAccount decimal(18,0); 

IF UPDATE( PreCardNo )
set @InHisAccount = 15000;

insert into dbo.aspnet_Users(InHisAccount) values (@InHisAccount); 
```

当我在 aspnet_Users 上创建触发器后尝试登录该站点时，我不能并给出一条消息，告诉我登录时出错，尽管用户名和密码是真实的，当我删除触发，登录返回工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:34:55.680

使用 AFTER UPDATE 触发器，以便可以提交正常的 ASPNETDB 调用。

# iphone - 从什么时候开始我们有这样有用的 NSArray 和 NSDictionary 的创建者

> ID：11802869
> 
> 赞同：2
> 
> 时间：2012-08-03T20:31:47.293
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我今天发现，动态创建数组和字典有一种不那么乏味的方法：

```
NSArray *myArray = @[@"one", @"two", @"three"];

NSDictionary *myDict = @{@"key": @"value", @"key2": @"value2"}; 
```

这是对 Objective-c 语言的一个相当新的补充吗？这些结构的名称是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T20:34:02.033

Xcode 4.4 的新功能。我听说它们被称为集合文字。

编辑添加：

您还可以将 NSArray 和 NSDictionary 的成员引用为`array[1]`和`dictionary[@"key"]`。创建语法向后兼容，因为它在构建时完全扩展。访问器语法不是因为它涉及对运行时的更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T20:39:40.090

是的..还有[其他一些例子](http://clang.llvm.org/docs/ObjectiveCLiterals.html)：

```
// character literals.
  NSNumber *theLetterZ = @'Z';          // equivalent to [NSNumber numberWithChar:'Z']

  // integral literals.
  NSNumber *fortyTwo = @42;             // equivalent to [NSNumber numberWithInt:42]
  NSNumber *fortyTwoUnsigned = @42U;    // equivalent to [NSNumber numberWithUnsignedInt:42U]
  NSNumber *fortyTwoLong = @42L;        // equivalent to [NSNumber numberWithLong:42L]
  NSNumber *fortyTwoLongLong = @42LL;   // equivalent to [NSNumber numberWithLongLong:42LL]

  // floating point literals.
  NSNumber *piFloat = @3.141592654F;    // equivalent to [NSNumber numberWithFloat:3.141592654F]
  NSNumber *piDouble = @3.1415926535;   // equivalent to [NSNumber numberWithDouble:3.1415926535]

  // BOOL literals.
  NSNumber *yesNumber = @YES;           // equivalent to [NSNumber numberWithBool:YES]
  NSNumber *noNumber = @NO;             // equivalent to [NSNumber numberWithBool:NO] 
```

我第一次在java上看到它！有点酷:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T20:35:12.303

它们是 Apple 的 LLVM 4.0 编译器的一部分，该编译器在 XCode 4.4 中提供。

更多信息可以[在](http://clang.llvm.org/docs/ObjectiveCLiterals.html)LLVM 网站的“语法添加”部分下找到。还存在其他新的文字语法，这也记录在网站上。

# java - 我们如何在java中读取文件中的常用词

> ID：11802871
> 
> 赞同：-2
> 
> 时间：2012-08-03T20:32:01.940
> 
> 标签：java

我正在尝试编写一个程序，它将接受 ASCII 文本文件中的一系列名称作为其唯一的命令行参数，这些文件包含英文文本。目标是在所有文件中找到 20 个最常用的单词，其中每个单词必须出现在至少有一次我们在java程序中使用的文件。请建议我

提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:36:42.123

我将创建一个地图，其中键为单词，并在值字段中创建一个计数器。

```
Map<String, Integer> m = new HashMap<String, Integer>() 
```

每次你找到一个词然后检查它是否是地图 (m.containsKey($word))。

如果不存在，则将其添加为 1。如果存在，则增加该键的值。

看起来像家庭作业，所以我想你可以弄清楚其余的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:44:56.813

我个人会从某种`WordCount`课程开始。这将包含单词及其出现的次数。

我会阅读文件，将每个单词放入[Map](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)中，键入单词并与 WordCount 对象相关联。

阅读文件后，我将获取[地图的值](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#values%28%29)并使用能够比较 WordCount 对象的计数属性的[比较](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)器对其进行排序

这会给我一个[Collection](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html)，按计数顺序排序

# wpf - 父子验证规则

> ID：11802872
> 
> 赞同：1
> 
> 时间：2012-08-03T20:32:11.207
> 
> 标签：wpf, validationrule

我有一个使用 ValidationRules 的复杂场景，我需要一些帮助。我有一个大致如下组织的用户控件：

```
Parent (ItemsControl)
    Child 1
        Property 1
        Property 2
    Child 2
        Property 1
        Property 2 
```

当 Child 1.Property 1 更改时，我需要对其执行验证。但是，验证规则需要 Child 1.Property 1 的值及其所有同级（变量编号）的 Property 1 值来执行验证。我可以在 Parent ItemsControl 上放置一个 ValidationRule，但我需要将 Control 绑定到 Child1.Property1 以显示错误。目前，当我将验证放在父母身上时，错误会显示在父母身上，而不是孩子身上。我也考虑过使用 BindingGroups，但我希望在更改属性时自动触发验证。据我所知，没有一种方法可以自动强制 Validation 为 BindingGroup 触发。

有没有办法完成我想做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-12-05T20:53:24.513

这会自动将所有对象的数据注解属性转为`ValidationRule`s，并且可以在所有`TextBox`es上的app中应用一次：

```
using System;
using System.ComponentModel.DataAnnotations;
using System.Globalization;
using System.Linq;
using System.Windows;
using System.Windows.Controls;

using DaValidationResult = System.ComponentModel.DataAnnotations.ValidationResult;
using WinValidationResult = System.Windows.Controls.ValidationResult;

public sealed class DataAnnotationsBehavior
{
  public static bool GetValidateDataAnnotations(DependencyObject obj) =>
    (bool)obj.GetValue(ValidateDataAnnotationsProperty);
  public static void SetValidateDataAnnotations(DependencyObject obj, bool value) =>
    obj.SetValue(ValidateDataAnnotationsProperty, value);

  public static readonly DependencyProperty ValidateDataAnnotationsProperty =
      DependencyProperty.RegisterAttached("ValidateDataAnnotations", typeof(bool), 
        typeof(DataAnnotationsBehavior), new PropertyMetadata(false, OnPropertyChanged));

  private static void OnPropertyChanged(DependencyObject d, 
    DependencyPropertyChangedEventArgs e)
  {
    var boolean = (bool)e.NewValue;
    if (!(d is TextBox textBox))
      throw new NotSupportedException(
        @$"The behavior " +
        "'{typeof(DataAnnotationsBehavior)}' can only be applied " +
        "on elements of type '{typeof(TextBox)}'.");

    var bindingExpression =
      textBox.GetBindingExpression(TextBox.TextProperty);

    if (boolean)
    {
      var dataItem = bindingExpression.DataItem;
      if (bindingExpression.DataItem == null)
        return;

      var type = dataItem.GetType();
      var prop = type.GetProperty(bindingExpression.ResolvedSourcePropertyName);
      if (prop == null)
        return;

      var allAttributes = prop.GetCustomAttributes(typeof(ValidationAttribute), true);
      foreach (var validationAttr in allAttributes.OfType<ValidationAttribute>())
      {
        var context = new ValidationContext(dataItem, null, null) 
        { MemberName = bindingExpression.ResolvedSourcePropertyName };

        bindingExpression
          .ParentBinding
          .ValidationRules
          .Add(new AttributesValidationRule(context, validationAttr));
      }
    }
    else
    {
      var das =
        bindingExpression
          .ParentBinding
          .ValidationRules
          .OfType<AttributesValidationRule>()
          .ToList();

      if (das != null)
        foreach (var da in das)
          bindingExpression.ParentBinding.ValidationRules.Remove(da);
    }
  }

  abstract class DaValidationRule : ValidationRule
  {
    public ValidationContext ValidationContext { get; }

    public DaValidationRule(ValidationContext validationContext)
    {
      ValidationContext = validationContext;
    }
  }

  class AttributesValidationRule : DaValidationRule
  {
    public ValidationAttribute ValidationAttribute { get; }

    public AttributesValidationRule(ValidationContext validationContext, 
      ValidationAttribute attribute)
      : base(validationContext) =>
      ValidationAttribute = attribute;

    public override WinValidationResult Validate(object value, CultureInfo cultureInfo)
    {
      var result = ValidationAttribute.GetValidationResult(value, ValidationContext);

      return result == DaValidationResult.Success
        ? WinValidationResult.ValidResult
        : new WinValidationResult(false, result.ErrorMessage);
    }
  }
} 
```

用法：

```
<Window.DataContext>
  <local:ViewModel />
</Window.DataContext>
<Window.Resources>
  <ResourceDictionary>
    <Style TargetType="TextBox">
      <Setter 
        Property="local:DataAnnotationsBehavior.ValidateDataAnnotations" 
        Value="True"/>
      <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="True">
          <Setter 
            Property="ToolTip" 
            Value="{Binding (Validation.Errors)[0].ErrorContent,
              RelativeSource={RelativeSource Self}}"/>
        </Trigger>
      </Style.Triggers>
    </Style>
  </ResourceDictionary>
</Window.Resources>
<StackPanel DataContext="{Binding Model}">
  <TextBox Text="{Binding Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
</StackPanel> 
```

我把这个`DaValidationRule`类抽象了，因为我想我将来可能想扩展它，所以它也涵盖了`IValidationAttribute`，也许还有其他场景。

对于在编辑模式下涵盖`TextBox`es的版本`DataGridTextColumn`，以及**完整的代码**，请参阅[此](https://gist.github.com/weitzhandler/5a2d39df8ddc31fca23a1d097fa2d6bc)。

# java - Websphere 本地 iiop 端口号和主机名

> ID：11802875
> 
> 赞同：0
> 
> 时间：2012-08-03T20:32:42.103
> 
> 标签：java, ejb, websphere, jndi

我正在使用 Websphere 应用程序服务器通过 RMI/IIOP 协议调用远程方法。如何获取本地 RMI/IIOP 端口（默认为 2809）和 localhost 的主机名或 IP？

将此参数传递给另一个 bean 以通过 JNDI 上下文查找我的 bean。

# vector - 文本徽标作为矢量的 SVG

> ID：11802880
> 
> 赞同：0
> 
> 时间：2012-08-03T20:32:56.667
> 
> 标签：vector, web, svg

我有一个使用 Proxima Nova 的文本徽标，我想将其设为矢量。

如何将 Proxima Nova 文本转换为 SVG 以作为图像包含在网站上？

我不知道是否包含 SVG，但到目前为止我所做的一切都没有给我带来任何运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:51:05.333

使用像 Inkscape 这样生成 SVG 的应用程序。

# jquery - 如何在 jquery 中只清空 div 包装器中的某些元素？

> ID：11802881
> 
> 赞同：0
> 
> 时间：2012-08-03T20:32:56.660
> 
> 标签：jquery

基本上我的代码是

```
<div class='wrapper'>
     <img class='icon'>
     <img class='to be removed'>
     <div class='brkr'></div>
 </div> 
```

我想清空我的 div class='wrapper' 但我不想只删除所有元素。我在这个 div 之外有相同名称和类的元素，所以我不能只删除所有 img 类型的元素。“要删除”但我也不能使用 .empty() 函数，因为它似乎没有让我指定特定的元素。

任何提示或想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:37:38.560

```
$('.wrapper').find('.removeClass').remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:51:43.023

值得注意的是，类中不能有空格。`<img class='to be removed'>`实际上在 img 标签上设置了 3 个类。

将您的代码更改为类似`<img class='removeThis'>`的内容，然后下面的代码将起作用

```
$(".wrapper").find("img.removeThis").remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T20:35:39.227

如果要删除 中的某些元素`div.wrapper`，则可以使用特定的选择器，然后`.remove()`：

```
$("div.wrapper .to-remove").remove(); 
```

这只会删除`.to-remove`内部的元素`div.wrapper`，而不是包装器内部或外部的其他元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T20:35:49.620

而不是纯粹通过 id 选择 $('#divid #elementid') 或类，或者任何你想选择的东西。无论哪种方式，您只需要一个多级选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T20:36:11.963

尝试这个：

```
$('.wrapper img[class="to be removed"]').remove() 
```

[http://jsfiddle.net/rCEEt/](http://jsfiddle.net/rCEEt/)

# c++ - 什么是 ABI，为什么 C++ 没有标准的 ABI，如果有，为什么重要？

> ID：11802883
> 
> 赞同：5
> 
> 时间：2012-08-03T20:33:03.737
> 
> 标签：c++

什么是 ABI，为什么 C++ 没有标准的 ABI，如果有，为什么重要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T20:36:35.607

ABI 是一个[应用程序二进制接口](http://en.wikipedia.org/wiki/Application_binary_interface)。它描述了如何组织和访问应用程序*二进制文件的标准。*

标准化将允许多个编译器构建彼此完全兼容的二进制文件，或者可能允许单个可执行文件在各种平台上运行而无需重新编译等。

# sql - 有条件的 SQL 查询与没有 where 子句的 SQL 查询的性能

> ID：11802884
> 
> 赞同：0
> 
> 时间：2012-08-03T20:33:07.667
> 
> 标签：sql, performance

哪个 SQL 查询将在更短的时间内执行 - 使用 WHERE 子句或不使用 WHERE 子句的查询，当：

1.  WHERE 子句处理**索引**字段（例如主键字段）
2.  WHERE 子句处理**非索引**字段

我想当我们使用索引字段时，查询`WHERE`会更快。我对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:44:41.377

正如已经提到的，对此没有固定的答案。这一切都取决于特定的上下文。但只是为了一个答案。采取这个简单的查询：

```
 SELECT first_name FROM people WHERE last_name = 'Smith'; 
```

要在没有索引的情况下处理此查询，必须检查表中每一行的每一列 last_name（全表扫描）。

使用索引，您可以只遵循 B-tree 数据结构，直到找到“Smith”。

对于非索引，最坏的情况看起来是线性的（n），而对于 B-tree，它会是 log n，因此计算成本更低。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:40:40.457

不确定“使用 WHERE 子句或不使用 WHERE 子句的查询”是什么意思，但大多数情况下，在索引字段上使用 WHERE 子句的查询优于在非索引字段上使用 WHERE 子句的查询，这是正确的。

性能相同的一个实例（即索引无关紧要）是当您在 where 子句中运行基于范围的查询时（即 WHERE col1 > x ）。这会强制扫描表，因此与对非索引列进行范围查询的速度相同。

实际上，这取决于您在 where 子句中引用的列、列中的数据类型、您运行的查询类型等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T22:19:35.060

在某些情况下，主键上的 where 子句会变慢。

最简单的是只有一行的表格。使用索引需要同时加载索引和数据页——两次读取。没有索引可以将工作减半。

这是一个退化的案例，但它指出了问题——所选行的比例。或者，更准确地说，是解析查询所需的页面比例。

当所需的数据在所有页面上时，使用索引会减慢速度。对于非主键，当表大于页面缓存并且访问是随机的时，这可能是灾难性的。

由于页面是按主键排序的，最坏的情况是额外的索引扫描——还不错。

一些数据库使用表的统计信息来决定何时使用索引以及何时进行全表扫描。有些没有。

简而言之，对于低选择性查询，索引会提高性能。对于高选择性查询，使用索引可能会导致性能稍差或性能差，具体取决于各种因素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T20:56:22.210

这可能取决于您正在编写的 where 子句的类型。在一个简单的 where 子句中，通常最好在您正在使用的字段上建立一个索引（并且 uindexes 可以而且应该建立在比 PK 更多的基础上）。但是，您必须为索引编写一个 saragble where 子句才能有所作为。有关 sarability 的一些准则，请参阅此问题：

[是什么让 SQL 语句可搜索？](https://stackoverflow.com/questions/799584/what-makes-a-sql-statement-sargable)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-24T09:14:02.883

我的一些查询非常复杂，并且应用了降低性能的 where 子句。对于解决方法，我使用了临时表，然后在它们上应用了 where 子句。这显着提高了性能。此外，在我加入的地方，尤其是左外加入，提高了性能。

# opengl-es - OpenGL - 我应该存储属性/统一位置吗？

> ID：11802885
> 
> 赞同：8
> 
> 时间：2012-08-03T20:33:12.237
> 
> 标签：opengl-es, opengl-es-2.0

是否`glGetUniformLocation`耗时`glGetAttribLocation`？

哪种方式更好？

1.  打电话`glGetAttribLocation`还是`glGetUniformLocation`每次我需要的时候？
2.  将位置存储在变量中并在需要时使用它们？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T22:17:28.853

> 哪种方式更好？

想想看。无论速度有多快`glGetUniformLocation`，`glGetAttribLocation`它们*都不能*比仅仅获取一个变量更快。因此，如果您担心性能，请使用总是更快的方法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-09-26T07:57:59.650

根据我的测试，获取这些位置所花费的时间大约是单次`glDrawElements`调用所需时间的 100~200 倍。这只是基于 的估计`System.nanoTime()`，但我认为值得在初始化时将它们存储在变量中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-05T15:19:13.107

无论是在 Android 还是 iPhone 上，对于一个 opengl 表面，你都会有类似的方法： **onSurfaceCreated 和 onSurfaceChanged**，养成在这两个方法中获取制服和属性的习惯。

使渲染更快的唯一方法（当您的代码跨越 1000 行代码时，这将很快成为您的优先事项）是在 onDrawFrame 方法中仅使用**gluseprogram、glbindbuffer、纹理绑定和其他绑定，****始终在 onSurfaceCreated 和 onSurfaceChanged 中缓存变量**

# javascript - 了解何时共享 URL

> ID：11802886
> 
> 赞同：0
> 
> 时间：2012-08-03T20:33:15.810
> 
> 标签：javascript, jquery, html

我想知道用户在点击我提供的按钮后何时在 Facebook 或 Tweets 上分享我的网站 - 有没有办法使用 Javascript 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:43:33.083

您可以只使用[AddThis](http://www.addthis.com/)或[ShareThis 之](http://sharethis.com/)类的服务吗？

他们都有报告工具来查看页面被共享了多少次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:42:48.963

您可以将[FB.Event.subscribe](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)用于 facebook。

```
FB.Event.subscribe('edge.create',
    function(response) {
        alert('You liked the URL: ' + response);
        // you can make an ajax request to save this "Like", it's up to you.
    }
); 
```

# java - Nimbus L&F - Change Background color of Progress Bar

> ID：11802887
> 
> 赞同：4
> 
> 时间：2012-08-03T20:33:16.387
> 
> 标签：java, swing, colors, jprogressbar, nimbus

i'm developing a little GUI application with Java using Netbeans Editor. I've put in a JFrame a simple Progress Bar. I'm developing the project with JDK7

I want to change the background Color from default Orange to a personal one. I've already tried all the properties for the color changing but when i run the program the color still the same.

I've already tried using ProgressBar1.setBackground(new java.awt.Color(0, 204, 255));

and

```
UIManager.put("ProgressBar.background", Color.YELLOW);
UIManager.put("ProgressBar.foreground", Color.MAGENTA);
UIManager.put("ProgressBar.selectionBackground", Color.red);
UIManager.put("ProgressBar.selectionForeground", Color.green); 
```

Same result..... The background is always orange

Here the code of my test project

```
public class Frame extends javax.swing.JFrame
{

    public Frame()
    {
        initComponents();
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jProgressBar1 = new javax.swing.JProgressBar();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jProgressBar1.setBackground(new java.awt.Color(0, 204, 255));
        jProgressBar1.setValue(75);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jProgressBar1, javax.swing.GroupLayout.DEFAULT_SIZE, 380, Short.MAX_VALUE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jProgressBar1, javax.swing.GroupLayout.PREFERRED_SIZE, 73, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>

    public static void main(String args[])
    {
        try
        {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Frame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(Frame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(Frame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(Frame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new Frame().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JProgressBar jProgressBar1;
    // End of variables declaration
} 
```

and this is the result when you launch the code [![progress bar](../Images/d3d0ba9554156e50a7613cecb331c29c.png)](https://i.stack.imgur.com/bLyiT.jpg)
[(source: [uploadscreenshot.com](http://img1.uploadscreenshot.com/images/orig/8/21508073887-orig.jpg))]

Orange color....

EDIT With the following code

```
UIManager.getLookAndFeelDefaults().put("ProgressBar[Enabled].backgroundPainter", new FillPainter(Color.MAGENTA)); 
UIManager.getLookAndFeelDefaults().put("ProgressBar[Disabled].backgroundPainter", new FillPainter(Color.MAGENTA)); 
UIManager.getLookAndFeelDefaults().put("ProgressBar[Enabled+Indeterminate].progressPadding", new FillPainter(Color.ORANGE)); 
UIManager.getLookAndFeelDefaults().put("ProgressBar[Enabled].foregroundPainter", new FillPainter(Color.GREEN)); 
UIManager.getLookAndFeelDefaults().put("ProgressBar[Disabled].foregroundPainter", new FillPainter(Color.GREEN)); 
UIManager.getLookAndFeelDefaults().put("ProgressBar[Enabled+Finished].foregroundPainter", new FillPainter(Color.GREEN)); 
UIManager.getLookAndFeelDefaults().put("ProgressBar[Disabled+Finished].foregroundPainter", new FillPainter(Color.GREEN)); 
UIManager.getLookAndFeelDefaults().put("ProgressBar[Disabled+Indeterminate].foregroundPainter", new FillPainter(Color.GREEN)); 
UIManager.getLookAndFeelDefaults().put("ProgressBar[Enabled+Indeterminate].foregroundPainter", new FillPainter(Color.GREEN)); ` 
```

after this line

```
javax.swing.UIManager.setLookAndFeel(info.getClassName()); 
```

I've successfully change the color of background. But now the color is "plain", there is no gradient like the orange color.

[![progress bar](../Images/9a80cf3cd3fdc4aebb2cc95681c85c90.png)](https://i.stack.imgur.com/Fh5Jl.jpg)
[(source: [uploadscreenshot.com](http://img1.uploadscreenshot.com/images/orig/8/21508411677-orig.jpg))]

Is it possible to change color with the same effect of the original color?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T20:43:02.103

1.  maybe (`Color` and `Font`) issue talking about `Nimbus Look and Feel`

2.  have to [check this thread](https://stackoverflow.com/a/10847449/714968)

3.  value for

> ProgressBar[Disabled+Finished].foregroundPainter ProgressBar[Disabled+Indeterminate].foregroundPainter
> ProgressBar[Disabled].backgroundPainter ProgressBar[Disabled].foregroundPainter ProgressBar[Enabled+Finished].foregroundPainter ProgressBar[Enabled+Indeterminate].foregroundPainter ProgressBar[Enabled+Indeterminate].progressPadding ProgressBar[Enabled].backgroundPainter ProgressBar[Enabled].foregroundPainter

. 4\. maybe easiest for you will be to change `nimbusOrange` from the top of `Nimbus default`s, but this change is everywhere,

funny output to the GUI with changed `Control Color`, for example

> UIManager.getLookAndFeelDefaults().put("nimbusOrange", (new Color(127, 255, 191)));

. 5\. for example

![enter image description here](../Images/f5a6797fae0d164e569acd1742c80be7.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.Graphics2D;
import javax.swing.*;

public class MyPopupWithNimbus {

    public MyPopupWithNimbus() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(200, 200);
        JPanel panel = new JPanel(new BorderLayout());
        panel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
        JList list = new JList();
        panel.add(list);
        JProgressBar progress = new JProgressBar();
        progress.setStringPainted(true);
        progress.setString("60 pct");
        progress.setValue(60);
        frame.add(panel);
        frame.add(progress, BorderLayout.SOUTH);
        JPopupMenu menu = new JPopupMenu();
        menu.add(new JMenuItem("A"));
        menu.add(new JMenuItem("B"));
        menu.add(new JMenuItem("C"));
        JMenu jmenu = new JMenu("D");
        jmenu.add(new JMenuItem("E"));
        menu.add(jmenu);
        frame.setVisible(true);
        menu.show(frame, 50, 50);
    }

    public static void main(String[] args) {

        try {
            for (UIManager.LookAndFeelInfo laf : UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(laf.getName())) {
                    UIManager.setLookAndFeel(laf.getClassName());
                    UIManager.getLookAndFeelDefaults().put("nimbusOrange", (new Color(127, 255, 191)));
                    UIManager.getLookAndFeelDefaults().put("PopupMenu[Enabled].backgroundPainter",
                            new FillPainter(Color.ORANGE));
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                MyPopupWithNimbus aa = new MyPopupWithNimbus();
            }
        });
    }
}

class FillPainter implements Painter<JComponent> {

    private final Color color;

    FillPainter(Color c) {
        color = c;
    }

    @Override
    public void paint(Graphics2D g, JComponent object, int width, int height) {
        g.setColor(color);
        g.fillRect(0, 0, width - 1, height - 1);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T12:00:17.450

This is what I have done in the application I currently develop

```
ColorUIResource colorResource = new ColorUIResource(Color.red.darker().darker());
UIManager.put("nimbusOrange",colorResource); 
```

This simply changes the default orange color with something more appealing to the eyes and it changes it everywhere.

# php - php 显示错误信息并清除内容

> ID：11802889
> 
> 赞同：0
> 
> 时间：2012-08-03T20:33:29.340
> 
> 标签：php

我希望代码显示错误消息，同时删除页面内容

例如。

```
<?
echo 'welcome';
if (login==0)
{
    error("you can't access to this page");
}
content, content, content, content, content, content, content, content, content, content
ect.......
?> 
```

输出

```
you can't access to this page 
```

该示例删除了所有内容，但仍保留错误（“您无法访问此页面”）；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:36:51.713

`exit();`在您的 if 语句中添加。使用您的示例：

```
<?
echo 'welcome';
if (login==0)
{
    error("you can't access to this page");
    exit();
}
content, content, content, content, content, content, content, content, content, content
ect.......
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:40:21.807

您也可以使用 Matt 提供的内容，这是另一种选择：

```
<?
echo 'welcome';
if(login==0) {
  error("you can't access to this page");
} else {
?>
content, content, content, content, content, content, content, content, content, content
<?php
}
?> 
```

# c - 声明 C 数组

> ID：11802890
> 
> 赞同：0
> 
> 时间：2012-08-03T20:33:30.553
> 
> 标签：c, xcode, arrays, multidimensional-array

```
int array[5][3]; 
```

（显然）创建了一个 5 x 3 的多维 C 数组。但是，

```
int x = 5;
int array[x][3]; 
```

没有。**_** 我一直以为会。我对 C 数组有什么不了解的地方？如果他们只允许一个常量来定义 C 数组的长度，有没有办法以某种方式解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T20:48:35.703

在 ANSI C（又名 C89）中，所有数组维度都必须是编译时整数常量（这**不包括**声明为 的变量`const`）。`extern`一个例外是，在某些上下文中，例如函数参数、声明和初始化，第一个数组维度可以写为一组空括号。例如：

```
// The first parameter is a pointer to an array of char with 5 columns and an
// unknown number of rows.  It's equivalent to 'char (*array_param)[5]', i.e.
// "pointer to array 5 of char" (this only applies to function parameters).
void some_function(char array_param[][5])
{
    array_param[2][3] = 'c';  // Accesses the (2*5 + 3)rd element
}

// Declare a global 2D array with 5 columns and an unknown number of rows
extern char global_array[][5];

// Declare a 3x2 array.  The first dimension is determined by the number of
// initializer elements
int my_array[][2] = {{1, 2}, {3, 4}, {5, 6}}; 
```

C99 添加了一个新特性，称为*可变长度数组*(VLA)，其中第一个维度允许为非常量，但仅适用于在堆栈上声明的数组（即具有*自动存储*功能的数组）。全局数组（即具有*静态存储*的数组）不能是 VLA。例如：

```
void some_function(int x)
{
    // Declare VLA on the stack with x rows and 5 columns.  If the allocation
    // fails because there's not enough stack space, the behavior is undefined.
    // You'll probably crash with a segmentation fault/access violation, but
    // when and where could be unpredictable.
    int my_vla[x][5];
} 
```

请注意，最新版本的 C 标准 C11 使 VLA 成为可选的。Objective-C 基于 C99 并支持 VLA。C++ 没有**VLA**，尽管许多 C/C++ 编译器（例如 g++）在其 C 实现中支持 VLA，但也支持 C++ 中的 VLA 作为扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:35:03.353

```
 int x = 5;
 int array[x][3]; 
```

是的，它确实。这是一个 C99 可变长度数组。请务必切换到 C99 模式，并确保已`array`在块或函数范围内声明。不能在文件范围内声明可变长度数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T20:39:53.373

尝试：

```
const int x=5;
int array[x][3]; 
```

正如你所说的x必须是一个常数，否则想想如果在程序中间你改变x的值会发生什么，数组的维度是多少：（

但是，如果您更改 x 的值，则通过将其声明为常量，您会收到编译错误。

# android - android API 11 中的空 NumberPicker

> ID：11802892
> 
> 赞同：1
> 
> 时间：2012-08-03T20:33:34.390
> 
> 标签：android, dialog

我创建了 NumberPicker，但它是空的，除了文本字段之外，我无法单击其他任何内容，“0”在哪里，当我这样做时，键盘会弹出。这是图片以澄清我的意思。

图片： ![在此处输入图像描述](../Images/a5bb173b7db00ad8f39b5ca3baf1edfc.png)

这是我用来创建对话框的代码：

```
Dialog dialog = new Dialog(SettingsActivity.this);
dialog.setContentView(R.layout.draws_dialog);
dialog.show(); 
```

`SettingsActivity`是我创建并显示此对话框的活动。

这是我的对话框的 xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="wrap_content" 
 android:layout_height="wrap_content">

    <NumberPicker
        android:id="@+id/numberPicker1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" />

</RelativeLayout> 
```

所以任何想法我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:16:40.717

您应该为 NumberPicker 设置最小值和最大值，例如：

```
int minValue = 5;
int maxValue = 20;
int currentValue = 10;

final NumberPicker uiCapacity = findViewById(R.id.capacity);
uiCapacity.setMinValue(minValue);
uiCapacity.setMaxValue(maxValue);
uiCapacity.setValue(currentValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:57:22.800

你`NumberPicker`的没有`Holo.Light`风格。看到[这个](https://stackoverflow.com/questions/13882707/need-help-by-creating-a-dialog-with-2-numberpickers)问题。

创建`AlertDialog`这样的：

```
 View npView = getLayoutInflater().inflate(R.layout.number_picker_dialog, null);

     NumberPicker mPicker = (NumberPicker)npView.findViewById(R.id.npQuantity);
        mPicker.setMaxValue(100);
        mPicker.setMinValue(0);

     new AlertDialog.Builder(this)
        .setTitle("Quantity:")
        .setView(npView)
        .setPositiveButton("OK",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    //"OK" clicked
                }
            })
        .setNegativeButton("Cancel", null)
        .show(); 
```

# android - 在 ImageButton 中动态更改图像

> ID：11802893
> 
> 赞同：7
> 
> 时间：2012-08-03T20:33:34.893
> 
> 标签：android, imagebutton

```
XML     
<ImageButton
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/imageButton1"
        android:src="@drawable/image1"
        android:onClick="buttonClick"
    />

JAVA
--------------------
public void buttonClick(View v)
{
    Button aButton = (Button)v;
    aButton.setBackgroundResource(R.drawable.image2);
} 
```

这是我到目前为止没有运气的尝试......

我希望能够单击按钮并将图像更改为 image2，还有其他图像我将根据其他变量将其更改为。我真的被卡住了。我会继续研究其他问题，如果我找到答案，我会在这里发布。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-03T20:39:10.623

您的 buttonClick() 需要修复：

```
public void buttonClick(View v) 
{
 ImageButton aButton = (ImageButton)v;
 aButton.setImageResource(R.drawable.image2); 
} 
```

View 是一个 ImageButton，而不是一个 Button。src 属性通过 setImageResource 更新，而不是 setBackgroundResource。

# javascript - 在 JavaScript 中使用 this 和原型定义类的方法有什么区别？

> ID：11802900
> 
> 赞同：3
> 
> 时间：2012-08-03T20:34:13.397
> 
> 标签：javascript, oop, prototypejs, prototype-programming

> **可能重复：**
> [Javascript - 这与。使用原型](https://stackoverflow.com/questions/4386708/javascript-this-vs-prototype)
> [与直接在构造函数中定义方法的优点？](https://stackoverflow.com/questions/4508313/advantages-of-using-prototype-vs-defining-methods-straight-in-the-constructor)
> [原型或内联，有什么区别？](https://stackoverflow.com/questions/6163186/prototype-or-inline-what-is-the-difference)

在 JavaScript 中创建类时，如何使用**this**声明对象内部的方法，然后通过访问**原型**来声明它？在我看来，这也是为了同样的目的。

```
window.onload = function() { 
    tc = new TestClass();
    tc.init(); //logs initting
    tc.reset(); //logs resetting
    tc.doSomething(); //logs doing something
};

var TestClass = function(){

    this.init = function(){
        console.log("initting");
    }

    this.reset = function(){
        console.log("resetting");
    }

    this.destroy = function(){
        console.log("destroying");
    }

}

TestClass.prototype.doSomething = function(){

    console.log("doing something");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:36:35.170

在大多数情况下，您将获得相同的功能结果。但在内部，它完全不同，当您将函数附加到 时`this`，该类型的每个实例都会获得它自己的函数副本。通过将函数附加到`prototype`，所有实例共享相同的函数实例。使用原型可以减少内存使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T21:26:03.517

阅读之前：英语不是我的母语；）

实际上**this**和**prototype**几乎相同，但是**this**和**prototype**在javascript中具有不同的含义。

1) Javascript 基于原型继承。这意味着一个对象可以从另一个对象继承原型模型。使用原型，您可以模拟 javacript 上的继承（有限制），例如：

```
// create a 'class' Vehicle
var Vehicle = function() {};
Vehicle.prototype.wheels = 0;
Vehicle.prototype.maxSpeed = 0;
Vehicle.prototype.displayInfo = function() { 
     alert("hello, I have " + this.wheels + " wheels and max speed of " + this.maxSpeed);
};

var vehicleInstance = new Vehicle();
vehicleInstance.displayInfo(); // displays: Hello, I have 0 wheels and max speed of 0

// create a 'class' Car using the prototype from Vehicle 
// and change some properties.
var Car = function(maxSpeed) { 
    if(maxSpeed)
      this.maxSpeed = maxSpeed;
};
// inherit the prototype from vehicle
Car.prototype = new Vehicle();  
// change some properties
Car.prototype.maxSpeed = 200;
Car.prototype.wheels = 4;

var car = new Car();
car.displayInfo(); // displays: Hello, I have 4 wheels and max speed of 200 
```

2) **this**中的属性优先于**原型**中的属性，例如：

```
var car = new Car(); // car prototype: maxSpeed = 200;
car.displayInfo() // displays: Hello, I have 4 wheels and max speed of 200

//set maxSpeed to 300 on 'this'
var car = new Car(300); // see Car definition above

// call displayInfo() in car instance. The Car 'class' doesn't have displayInfo()
// itself, but its prototype has. The javascript VM will look
// for displayInfo() in the car instance, if it not found in the
// instance it will look in car.prototype and on car.prototype.prototype etc.
// until it founds a property called displayInfo() 
// or reaches the end of the chain (Object.prototype).
car.displayInfo() // displays: Hello, I have 4 wheels and max speed of 300 
```

例如，这也适用于原型的原型。

```
var Class1 = function() { };
Class1.prototype.someValue = 1;

var Class2 = function() { };
Class2.prototype = new Class1();
Class2.prototype.someValue = 2; // this overrides the Class1.prototype.someValue prototype

var class2 = new Class2();
class2.someValue = 3; // this overrides the Class2.prototype.someValue; 
```

3）原型上定义的属性不会为同一对象的每个新实例实例化，例如：

```
// create a new class and inherit the prototype model from Vehicle.
var Motorcycle = function() { };
Motorcycle.prototype = new Vehicle();
// motorcycles has 2 wheels
Motorcycle.prototype.wheels = 2;

var motorcycle = new Motorcycle();
motorcycle.dysplayInfo(); // displays: Hello, I have 2 wheels and max speed of 200

//now, if I change the method dysplayInfo from Vehicle, it will change for every
//object that inherits Vehicle prototype:
Vehicle.prototype.displayInfo = function() { 
    Alert("Wheels: " + this.wheels + ", Max speed: " + this.maxSpeed);
}

//observe that I didn't create another Motorcycle instance ,
//I'm using the same instance that I've created before change
//the Vehicle.dysplayInfo() method
motorcycle.displayInfo() // displays: Wheels: 2, Max speed: 200 
```

如您所见，任何继承其原型的对象都使用在 Vehicle 中使用的相同方法。这使您的代码更加高效，因为您对多个对象使用相同的函数。您可以从胖原型继承数千个对象，但内存占用仍然很低。

简而言之：通过使用原型，您可以创建强大的“类类”对象，具有定义明确的继承树（我们说原型链），它将更有效地运行并使用更少的内存。

我在这里所说的并没有穷尽原型继承/链的主题。以下是您可以阅读的其他资源。我推荐，因为理解 javascript 中的原型对于编写良好且可维护的代码至关重要。

我在这里所说的并没有穷尽原型的主题： [https ://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript?redirectlocale=en-US&redirectslug=Introduction_to_Object-Oriented_JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript?redirectlocale=en-US&redirectslug=Introduction_to_Object-Oriented_JavaScript)

[http://javascript.crockford.com/prototypal.html](http://javascript.crockford.com/prototypal.html)

[http://javascriptweblog.wordpress.com/2010/06/07/understanding-javascript-prototypes/](http://javascriptweblog.wordpress.com/2010/06/07/understanding-javascript-prototypes/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T20:37:21.823

在这种特殊情况下，它们具有相同的*效果*，但它们非常不同。一个（？）主要区别是附加使用`this`的方法是对象本身的属性而不是其原型的属性，因此像这样迭代对象：

```
for(var x in tc) {
    if(tc.hasOwnProperty(x)) {
        console.log('Has property ' + x);
    }
} 
```

将省略使用添加的方法`prototype`。另一个区别是引用。将方法分配给`this`每次都会创建新的函数对象，但是使用原型，它们都是相同的函数。（这可能是也可能不是您想要的，并且在将额外属性附加到方法时最重要。）

# xcode - 如何使用 Xcode Extract 重构功能？

> ID：11802901
> 
> 赞同：1
> 
> 时间：2012-08-03T20:34:23.347
> 
> 标签：xcode, refactoring, extract, automated-refactoring

你如何使用 Xcode 的*[Extract](http://developer.apple.com/library/ios/#recipes/xcode_help-source_editor/RefactorExtracting/RefactorExtracting.html#//apple_ref/doc/uid/TP40009975-CH18-SW1)*重构工具？

无论我选择什么代码，我总是会收到同样无用的错误消息。

> 选择不包含任何可以提取的内容。做出不同的选择，然后重试。

请参阅下面的屏幕截图： ![选择代码，然后使用 Refactor > Extract... 菜单](../Images/c9fd21e61703473c0ae24d9db76c9aef.png)

![选择不包含任何可以提取的内容。](../Images/44d92b6bf0af6f569188a7678fcb9b60.png)

我需要遵循什么才能让它工作？

我在一个简单的 iOS 项目上这样做，没什么特别的，没有 C++。尝试使用最新版本的 Xcode (4.4) 和更新的最新开发人员预览版。

这是一个错误吗？任何解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:13:52.057

出于某种奇怪的原因，如果您有一个不会创建明显的拾取参数返回值的块，如果您包含换行符，XCode 会抱怨。在我看来，这是一个错误，因为应该忽略空格。只要确保你不包括换行符。例如，以下内容适用于“重构 > 提取方法”：

![在此处输入图像描述](../Images/731f379cf28588f3e306f1bb8854731f.png)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-12T09:21:08.133

自动重构工具首先检查某些先决条件是否为真，然后再应用请求的重构。在这种情况下，似乎前提条件失败了。我在 XCode 中做了很多类似的提取方法重构，但我不明白为什么你选择的代码有问题。也许有一些微妙的依赖关系在您显示的代码中并不明显。

我不确定我是否会称其为错误。在开发重构工具时，开发人员总是可以以更复杂的重构逻辑为代价使前提条件更弱一些。

不能解决你的问题，但也许有一些帮助。

# vb.net - 集合类型的内存消耗

> ID：11802902
> 
> 赞同：0
> 
> 时间：2012-08-03T20:34:25.950
> 
> 标签：vb.net, memory, collections

我正在尝试制作一个小型应用程序，它在 List 中使用 List 类型的多个层次结构，有 20-30 个级别。我试过：

`System.Collections.ComponentModel.ObservableCollection`，但在运行时，我得到了一个`OutOfMemoryException`错误。然后，我尝试了List，这次我没有收到这样的错误。

哪种类型的集合占用的空间最少？或者，实现这种层次结构的好方法是什么？我只需要一个集合；我不需要更改通知等。我将 .NET 4 与 VB、Linq 和 WPF 一起使用。`Parallel.ForEach`我用线程实现了代码循环过程。

编辑：该程序用于将文件系统数据串入 Sql CE DB 并将其取回。因此，层次结构也可以是 20-30 级。

编辑：将有大约 80000 个带有 linq 的查询来获取层次结构。我使用的数据类型如下：

```
Public Structure FileRecord
        Property ID As String
        Property Namee As String
        Property Size As String
        Property IsFolder As Boolean
        Property DateModified As Date
        Property FullPath As String
        Property Disk As String
        Property ParentID As String
        Property Items As List(Of FileRecord)
End Structure 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:44:21.320

如上所述，与每个集合相关的开销不会导致 OOM 异常，因为两者都实现了`List<T>`. ObservableCollection 可以与 INotifyCollectionChanged 结合使用，以提醒视图和演示者/视图模型对集合的更改。

更大的问题是，您使用的是哪种类型？如果内存不足，则每种类型都可能分配了不必要的内存量。此外，除非您打算使用绑定，否则我不会使用 ObservableCollection。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:46:30.167

各种 .NET 集合类的性能特征差异很大，您要使用的集合类型也取决于您希望如何访问该集合。像往常一样，需要在性能（时间和内存）与简单性或便利性之间进行权衡。

也就是说，.NET 中最简单、性能最高的集合类型之一可能是[Array](http://msdn.microsoft.com/en-us/library/system.array.aspx)。

# oracle - 为什么我的窗口在表单加载时弹出？

> ID：11802904
> 
> 赞同：0
> 
> 时间：2012-08-03T20:34:37.307
> 
> 标签：oracle, oracle10g, oracleforms

这个问题涉及 Oracle Forms 10g。

我有一个有两个窗口的表格。主窗体有一个主画布和两个堆叠的画布。在其中一个堆叠的画布上有键盘可导航元素。我还有另一个用作日历数据选择的窗口。我的问题是当表单加载时日历窗口是可见的，即使我没有明确告诉它是可见的。我只想在单击按钮时显示此窗口，以便用户可以从日历中选择数据。

我检查了主画布，它确实有可导航的元素，所以我不确定为什么另一个表单在表单加载时不断弹出。

有任何想法吗？我正在使用表格 10g

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T00:06:25.623

为什么不使用内置的来告诉日历窗口明确不显示

```
 SET_WINDOW_PROPERTY('W_CALENDAR', VISIBLE, PROPERTY_FALSE); 
```

在您的第一个窗口上的日历按钮上，您显然有一个`WHEN-BUTTON-PRESSED`触发器。将下面的代码放在触发器的开头以显示日历`W_CALENDAR`窗口。

```
 SET_WINDOW_PROPERTY('W_CALENDAR', VISIBLE, PROPERTY_TRUE); 
```

# android - 用于 Android 中设备到设备通信的 GCM 服务器/发送器设置

> ID：11802906
> 
> 赞同：1
> 
> 时间：2012-08-03T20:34:46.550
> 
> 标签：android, google-cloud-messaging

我一直在阅读 GCM 开发人员页面，但似乎都不太复杂。但是，从概述的角度来看，我对自己想要什么感到困惑。我在一台设备上有一个应用程序，它会将一些信息发送到另一台 Android 设备，然后它会处理这些信息。这只是一对双打。

除了简单的网站/路由器之外，我从来没有做过很多网络通信的经验，所以我意识到这是一个非常缺乏经验的问题——但是当我在我的两台设备上设置 GCM 时，什么设备充当“服务器”哪个是“客户”？客户端和谷歌都是服务器吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:14:05.157

我想你想进行双向沟通。你可以做一个认为将手机的RegistrationID保存到服务器上。无论您想传达什么数据，您都应该首先将其保存到服务器。并且每当服务器发送通知时，它都会使用注册 ID 向特定客户端提供信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:06:16.037

两种 android 设备都被视为客户端。客户端将与可以以多种方式实现的后端服务器通信。Google 提供的示例使用为 Java App Engine 编写的标准 Web 应用程序。您可以在此处找到示例：

[设置服务器](http://developer.android.com/guide/google/gcm/demo.html "设置服务器")

您还可以使用 ASP.NET、PHP 等编写服务器。我通常在后端拥有的也是一个 SQL 数据库，用于管理在我的应用程序中注册的设备。每个设备（客户端）都从 Google 获得一个唯一的 ID，服务器将使用该 ID 进行通信。服务器使用此 ID 是因为它将发送的消息不是直接发送给客户端，而是发送给 GCM 服务。因此，从本质上讲，Google GCM 是后端服务器的服务器，后端服务器是 GCM 的客户端。

希望这能回答您有关客户端/服务器通信的问题。详细实现请看谷歌的demo。祝你好运！

# perl - Vim 代码阅读 - 关闭/最小化括号

> ID：11802916
> 
> 赞同：5
> 
> 时间：2012-08-03T20:35:15.983
> 
> 标签：perl, vim

我必须阅读一些巨大的 Perl 脚本，我想知道你们如何像 GUI 文本编辑器那样在 Vim 中添加“最小化”括号功能。因此，我很难理解代码，如果我能最小化那些巨大的 if、函数等......我的心会非常感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T20:37:27.250

通过*最小化*，我想您指的是代码“折叠”

```
:help fold 
```

`z``C` 递归关闭光标下的所有折叠，`z``c`关闭单个折叠。 `z``o`在光标下打开一个折叠，同时`z``R`递归打开所有折叠。

也可以看看

```
:help :foldmethod 
```

对于 Perl，您需要`:set foldmethod=syntax`.

# javascript - 使用 Google Maps API 路由香港的 2 个地点

> ID：11802917
> 
> 赞同：2
> 
> 时间：2012-08-03T20:35:19.443
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在开发一个项目，该项目使用 google map api v3 来显示从 A 点到 B 点的路线。我注意到香港的某些点没有正确映射。

如果我使用 maps.google.com 站点查找位置，它会查找该位置的地址并正确显示。如果我使用与起点相同的位置，则显示不正确。

请注意，具有“正常”地址和街道编号的位置将正确显示。这是像 maps.google.site 这样的 api 映射的问题吗？

代码：

```
var directionsService = new google.maps.DirectionsService();
var directionsDisplay = new google.maps.DirectionsRenderer();  

var request = {       
    origin: start,        
    destination: end,         
    travelMode: google.maps.TravelMode[travelBy]      
    };           

directionsService.route(request, function(response, status) {       
    if (status == google.maps.DirectionsStatus.OK) {          
        directionsDisplay.setDirections(response);
    }     
}); 
```

注意：“google.maps.TravelMode[travelBy]”从不同旅行模式的下拉列表中填充，如驾驶、步行等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:06:11.787

[香港九龙梳士巴利道香港半岛](https://maps.google.com/maps?q=The+Peninsula+Hong+Kong,+Salisbury+Rd,+Kowloon,+Hong+Kong&hl=en&sll=37.6,-95.665&sspn=34.596091,54.140625&hq=The+Peninsula+Hong+Kong,+Salisbury+Rd,&hnear=Kowloon,+Hong+Kong&t=m&z=14)酒店不是地理编码结果（不是邮政地址）。

请参阅[常见问题解答中的此条目，](https://developers.google.com/maps/faq#geocoder_differences)解释 Google Maps 和 Google Maps API 地理编码器之间的区别。谷歌地图结合了许多不同的数据源（地点、地理编码信息、搜索结果等）来生成结果。

# ruby-on-rails - 错误：在 mac mountian lion os 上安装 rails 时无法构建 gem 原生扩展

> ID：11802918
> 
> 赞同：31
> 
> 时间：2012-08-03T20:35:20.947
> 
> 标签：ruby-on-rails, ruby, ruby-c-extension

我最近更新到 Mountain Lion 并重新安装了 Ruby，但是当我尝试运行测试 Rails 应用程序时，我收到一条错误消息，提示“我的系统上当前未安装 Rails”。我按照它说的做，输入`sudo gem install rails`并获取：

```
cleared faster_require caches due to new gem install...
Successfully installed rails-3.2.7
1 gem installed
Installing ri documentation for rails-3.2.7...
Installing RDoc documentation for rails-3.2.7... 
```

但是当我检查安装了哪个 Rails 版本时，我得到了以下信息：

```
Rails is not currently installed on this system. To get the latest version, simply type:

    $ sudo gem install rails

You can then rerun your "rails" command. 
```

我也试过`gem install rails`并得到：

```
Building native extensions.  This could take a while...
ERROR:  Error installing rails:
    ERROR: Failed to build gem native extension.

        /Users/aileen/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
creating Makefile

make
compiling generator.c
make: /usr/bin/gcc-4.2: No such file or directory
make: *** [generator.o] Error 1

Gem files will remain installed in /Users/aileen/.rvm/gems/ruby-1.9.3-p194@rails327/gems/json-1.7.4 for inspection.
Results logged to /Users/aileen/.rvm/gems/ruby-1.9.3-p194@rails327/gems/json-1.7.4/ext/json/ext/generator/gem_make.out 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-01T11:26:32.057

我看到您在**OS X 10.8.2 (Mountain lion)上使用****ruby​​ 1.9.3**使用**rvm** 轨道引用的某些 gem 可能需要**/usr/bin**中的**gcc-4.2**来构建本机 estension。

 ******在 Mountain Lion 中，即使安装了**Xcode 4.5 CLI 工具**（打开菜单 XCode - Preferences..Download -> Command Line Tools），您也会得到**/usr/bin/gcc**而不是**/usr/bin/gcc-4.2**；不幸**的是，一些原生扩展的构建过程依赖于 /usr/bin/gcc-4.2**

但是，我只是在诸如您的环境中顺利安装了导轨。我之前修复了 Carina C. Zona 的博客文章中讨论的环境：[Fix for “make: /usr/bin/gcc-4.2: No such file or directory”</a>，即：](http://cczona.com/blog/2012/07/fix-for-make-usrbingcc-4-2-no-such-file-or-directory/)

[](http://cczona.com/blog/2012/07/fix-for-make-usrbingcc-4-2-no-such-file-or-directory/)

[](http://cczona.com/blog/2012/07/fix-for-make-usrbingcc-4-2-no-such-file-or-directory/)
*   [确保您已安装 Homebrew

    > 酿造--版本

    应报告 0.9.3 或更高版本](http://cczona.com/blog/2012/07/fix-for-make-usrbingcc-4-2-no-such-file-or-directory/) 
    [](http://cczona.com/blog/2012/07/fix-for-make-usrbingcc-4-2-no-such-file-or-directory/)
    *   [如果您还没有 brew，](http://cczona.com/blog/2012/07/fix-for-make-usrbingcc-4-2-no-such-file-or-directory/)[请按照这些说明进行安装](https://github.com/mxcl/homebrew/wiki/installation)
    *   如果您有旧版本，请更新它：

    > 酿造更新

*   现在您可以安装 gcc-4.2 并在构建系统方面创建一个符号链接

    > brew tap homebrew/dupes
    > 
    > 酿造安装苹果-gcc42
    > 
    > sudo ln -s /usr/local/bin/gcc-4.2 /usr/bin/gcc-4.2

*   现在您已准备好成功安装 rails

    > 宝石安装导轨

你应该得到这样的输出

> ```
> Fetching: i18n-0.6.1.gem (100%)
> Fetching: activesupport-3.2.8.gem (100%)
> Fetching: builder-3.0.4.gem (100%)
> Fetching: activemodel-3.2.8.gem (100%)
> Fetching: rack-cache-1.2.gem (100%)
> Fetching: rack-test-0.6.2.gem (100%)
> Fetching: journey-1.0.4.gem (100%)
> Fetching: hike-1.2.1.gem (100%)
> Fetching: sprockets-2.1.3.gem (100%)
> Fetching: erubis-2.7.0.gem (100%)
> Fetching: actionpack-3.2.8.gem (100%)
> Fetching: arel-3.0.2.gem (100%)
> Fetching: tzinfo-0.3.34.gem (100%)
> Fetching: activerecord-3.2.8.gem (100%)
> Fetching: activeresource-3.2.8.gem (100%)
> Fetching: polyglot-0.3.3.gem (100%)
> Fetching: treetop-1.4.12.gem (100%)
> Fetching: mail-2.4.4.gem (100%)
> Fetching: actionmailer-3.2.8.gem (100%)
> Fetching: rack-ssl-1.3.2.gem (100%)
> Fetching: railties-3.2.8.gem (100%)
> Fetching: rails-3.2.8.gem (100%)
> Successfully installed i18n-0.6.1
> Successfully installed activesupport-3.2.8
> Successfully installed builder-3.0.4
> Successfully installed activemodel-3.2.8
> Successfully installed rack-cache-1.2
> Successfully installed rack-test-0.6.2
> Successfully installed journey-1.0.4
> Successfully installed hike-1.2.1
> Successfully installed sprockets-2.1.3
> Successfully installed erubis-2.7.0
> Successfully installed actionpack-3.2.8
> Successfully installed arel-3.0.2
> Successfully installed tzinfo-0.3.34
> Successfully installed activerecord-3.2.8
> Successfully installed activeresource-3.2.8
> Successfully installed polyglot-0.3.3
> Successfully installed treetop-1.4.12
> Successfully installed mail-2.4.4
> Successfully installed actionmailer-3.2.8
> Successfully installed rack-ssl-1.3.2
> Successfully installed railties-3.2.8
> Successfully installed rails-3.2.8
> 22 gems installed
> Installing ri documentation for i18n-0.6.1...
> Building YARD (yri) index for i18n-0.6.1...
> Installing ri documentation for activesupport-3.2.8...
> Building YARD (yri) index for activesupport-3.2.8...
> Installing ri documentation for builder-3.0.4...
> Building YARD (yri) index for builder-3.0.4...
> Installing ri documentation for activemodel-3.2.8...
> Building YARD (yri) index for activemodel-3.2.8...
> Installing ri documentation for rack-cache-1.2...
> Building YARD (yri) index for rack-cache-1.2...
> Installing ri documentation for rack-test-0.6.2...
> Building YARD (yri) index for rack-test-0.6.2...
> Installing ri documentation for journey-1.0.4...
> Building YARD (yri) index for journey-1.0.4...
> Installing ri documentation for hike-1.2.1...
> Building YARD (yri) index for hike-1.2.1...
> Installing ri documentation for sprockets-2.1.3...
> Building YARD (yri) index for sprockets-2.1.3...
> Installing ri documentation for erubis-2.7.0...
> Building YARD (yri) index for erubis-2.7.0...
> Installing ri documentation for actionpack-3.2.8...
> Building YARD (yri) index for actionpack-3.2.8...
> Installing ri documentation for arel-3.0.2...
> Building YARD (yri) index for arel-3.0.2...
> Installing ri documentation for tzinfo-0.3.34...
> Building YARD (yri) index for tzinfo-0.3.34...
> Installing ri documentation for activerecord-3.2.8...
> Building YARD (yri) index for activerecord-3.2.8...
> Installing ri documentation for activeresource-3.2.8...
> Building YARD (yri) index for activeresource-3.2.8...
> Installing ri documentation for polyglot-0.3.3...
> Building YARD (yri) index for polyglot-0.3.3...
> Installing ri documentation for treetop-1.4.12...
> Building YARD (yri) index for treetop-1.4.12...
> Installing ri documentation for mail-2.4.4...
> Building YARD (yri) index for mail-2.4.4...
> Installing ri documentation for actionmailer-3.2.8...
> Building YARD (yri) index for actionmailer-3.2.8...
> Installing ri documentation for rack-ssl-1.3.2...
> Building YARD (yri) index for rack-ssl-1.3.2...
> Installing ri documentation for railties-3.2.8...
> Building YARD (yri) index for railties-3.2.8...
> Installing ri documentation for rails-3.2.8...
> Building YARD (yri) index for rails-3.2.8...
> Installing RDoc documentation for i18n-0.6.1...
> Installing RDoc documentation for activesupport-3.2.8...
> Installing RDoc documentation for builder-3.0.4...
> Installing RDoc documentation for activemodel-3.2.8...
> Installing RDoc documentation for rack-cache-1.2...
> Installing RDoc documentation for rack-test-0.6.2...
> Installing RDoc documentation for journey-1.0.4...
> Installing RDoc documentation for hike-1.2.1...
> Installing RDoc documentation for sprockets-2.1.3...
> Installing RDoc documentation for erubis-2.7.0...
> Installing RDoc documentation for actionpack-3.2.8...
> Installing RDoc documentation for arel-3.0.2...
> Installing RDoc documentation for tzinfo-0.3.34...
> Installing RDoc documentation for activerecord-3.2.8...
> Installing RDoc documentation for activeresource-3.2.8...
> Installing RDoc documentation for polyglot-0.3.3...
> Installing RDoc documentation for treetop-1.4.12...
> Installing RDoc documentation for mail-2.4.4...
> Installing RDoc documentation for actionmailer-3.2.8...
> Installing RDoc documentation for rack-ssl-1.3.2...
> Installing RDoc documentation for railties-3.2.8...
> Installing RDoc documentation for rails-3.2.8... 
> ```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-09T18:14:05.587

`/usr/bin/gcc-4.2`@Franco 是正确的： OS X Mountain Lion 中不存在“本机扩展”构建脚本 expect 。

*   如果您从以前的 OS X 版本**升级到 Mountain Lion ，那么您可能已经拥有 gcc。**在这种情况下，只需创建一个指向 gcc 的符号链接：`sudo ln -s /usr/bin/gcc /usr/bin/gcc-4.2`
*   如果您有**全新安装的 Mountain Lion**，那么您可能根本没有 gcc。在这种情况下，您需要按照@Franco 的说明[安装 gcc 。](https://stackoverflow.com/a/13176057/152142)

这不是专门的“rails”宝石问题。任何构建“本机扩展”的 gem 都会失败：

> Gem::Installer::ExtensionBuildError: 错误: 无法构建 gem 原生扩展。[...]您必须先安装开发工具。

就我而言，我试图安装[octopress](http://octopress.org/docs/setup/)，这取决于称为 RedCloth 的东西。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-13T17:14:29.183

我也遇到了这个问题，山狮。安装失败的 gem 是`json`. 为了修复它，我安装了 xcode CLI 工具，然后将安装的 gcc (i686-apple-darwin11-llvm-gcc-4.2) 符号链接为`/usr/bin/gcc-4.2`. 一旦完成，它就可以工作了。

在尝试安装另一个 gem 时，我遇到了一个类似的问题，即原生构建步骤抱怨缺少 g++-4.2。我将其符号链接与上面的 gcc-4.2 完全相同，并且它有效。

## 更新：具有最新 RVM 的 OSX Mavericks

使用最新的 OSX 10.9 和最新的 RVM，这些问题似乎已经消失。所以，是时候升级了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-04T09:20:02.950

尝试先解决[这个问题](https://thoughtbot.com/blog/the-hitchhikers-guide-to-riding-a-mountain-lion)

他假设您已经有自制软件。如果你不这样做，你可以从[这里得到它](https://brew.sh/)******

# database - Imagick 使用不同的目录和数据库 PDF 来缩略图 JPG

> ID：11802921
> 
> 赞同：0
> 
> 时间：2012-08-03T20:35:38.040
> 
> 标签：database, pdf, jpeg, imagick, file-location

当我在图像所在的同一文件夹中使用 imagick basics 使用 php 脚本并使用输出完美的文件名时，它会输出 PDF 第一页的图像：

```
// Read page 1 
$im = new imagick( 'Miami_Guide.pdf[0]' );
// Convert to png 
$im->setImageFormat( "png" );
// Send out
header( "Content-Type: image/png" );
echo $im; 
```

这是挑战：如何将此脚本移动到不同的目录并使用从数据库记录中调用的名为 $uploaded 的字段名？我试过了，但没有用：

```
$path: '../../otherplace/';
// $uploaded is the field with the filename value
$fileloc: $path . $uploaded;
// Read page 1 
$im = new imagick( '$fileloc[0]' );
// Convert to png 
$im->setImageFormat( "png" );
// Send out 
header( "Content-Type: image/png" );
echo $im; 
```

我在 /home/user/public_html/dir/folder/script.php:334 中收到“致命错误：未捕获的异常 'ImagickException' 和消息 '无法读取文件：$fileloc' 堆栈跟踪：#0 /home/user /public_html/dir/folder/script.php(334): Imagick->__construct('$fileloc') #1 /home/user/public_html/dir/folder/script.php(226): show_record(Array) #2 {main} 在第 334 行的 /home/user/public_html/dir/folder/script.php 中抛出

还尝试了 pathinfo() 和再次致命错误

我做了一些调整，但现在 Imagick 返回的是乱码而不是图像：

```
$sourcePath = 'dir/folder/'; // Path of original image
$sourceUrl = 'http://www.site.com/';
$thumbPath = $sourcePath; // Writeable thumb path
$thumbUrl = $sourceUrl . $thumbPath . $uploaded ; 
$im = new Imagick($thumbUrl);
$im->setImageFormat( "jpg" );
$im->thumbnailImage(100, 100);
header("Content-type: image/jpg");
echo "$im"; 
```

“没有错误”，但输出乱码而不是图像：

ÿÛCÿÀdd"ÿÄÿÄ9 !1"#A2QVh'•¦Ôä$Waq±ÓÿÄÿÄ)!1Qq"A'Òar'¡áÿÚ?Íkßµ+¾;é=oÕÜŽW#ü–ÙænÝ»ë'çOo´OÒÝr2_^¬ÇiÓFãaR›5$ ò~\'0#Ïn¢—·©ÕuµðGMXÍ«ùÛæÿÃ'g§lfÍ,Ø”Sú*¥Áw“h‡/qk,=Ýržzï–>~Òút ƒÔ«á3žŽÃ‹¶s8yd“4–Ý¤®§ ‚ÇqW¼ºÎ£‹ÁÃŸ~.—´¤ŸÅKn@ «DE ±gÄ©"hm&ã¥°öÔ«b¬....

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:47:07.423

这是解决方案：

代替：

```
echo $img; 
```

你应该回应：

```
echo "<img src='data:image/jpg;base64,".base64_encode($img)."' />"; 
```

这解决了我的 Imagick 问题，希望对其他人有所帮助。

我确定的一件事是测试基础知识：test.pdf > test.jpg，还测试了：test.pdf > test.png, test.pdf > test.tiff - 一旦我确定所有扩展都在代表和工作正常，我移动到不同的目录并从其他地方拉文件。

所有步骤的简要说明：

1-安装了imagick（php）-我相信它是开发的

2-通过http://设置文件路径

3-其余的几乎是 Imagick 基础知识：

```
 $pdfUrl = "http://www.site.com/dir/$file";
 $img = new Imagick($pdfUrl);
 $img->setImageFormat("jpeg");
 echo "<img src='data:image/jpg;base64,".base64_encode($img)."' />"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T16:56:09.447

您的第一个示例不起作用的原因是因为您的变量包含在单引号内，而不是双引号内。

这个：

```
$im = new imagick( '$fileloc[0]' ); 
```

告诉 imagemagick 寻找一个名为 的文件`$fileloc`，该文件当然不存在。

改为这样做：

```
$im = new imagick( "$fileloc[0]" ); 
```

至于您的第二个示例，我相信您遇到了问题，因为出于某种原因，您`$im`在使用引号时已将引号括起来`echo`。您应该像在工作测试中一样回应它：

```
echo $im; 
```

不是

```
echo "$im"; 
```

# php - 将 $_GET 数组转换回原始 URL 查询

> ID：11802924
> 
> 赞同：1
> 
> 时间：2012-08-03T20:35:46.340
> 
> 标签：php

我有一个名为 $new_get 的关联数组，它来自 $_GET 的原始数组。不同之处在于我修改了一些需要回显的键和值以创建新的 URL。

我只是想将此 $new_get 转换回它的原始形式，例如：

```
?something=this&page=2 
```

我的 $new_get 看起来像：

```
$new_get = array (
'something' => 'this',
'page' => '2'
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:35:46.340

只需这样做：

```
$query = "?" .http_build_query($new_get); 
```

如果您的 $new_get 的构建方式与 $_GET 相同。

这是我自己的一项功能，可根据实际情况进行新的 URL 查询：

```
// the array_of_queries_to_change will be numbered, the values in it will replace the old values of the link. example : 'array_of_queries_to_change[0] = "?page=4";'.
// the returned value is a completed query, with the "?", then the query. It includes the current page's one and the new ones added/changed. 
function ChangeQuery($array_of_queries_to_change)
{
    $array_of_queries_to_change_count = count($array_of_queries_to_change); // count how much db we have in total. count the inactives too. 
    $new_get = $_GET;
    $i0 = 0;
//  echo "///" .($get_print = print_r($_GET, true)) ."///<br />";
//  echo "///" .($get_print = print_r($new_get, true)) ."///<br />";

    while ($i0 < $array_of_queries_to_change_count)
    {
        $array_of_keys_of_array_of_queries_to_change = array_keys($array_of_queries_to_change);
        $new_get[$array_of_keys_of_array_of_queries_to_change[$i0]] = $array_of_queries_to_change[$array_of_keys_of_array_of_queries_to_change[$i0]];
        $i0++;
    }

    $query = "?" .http_build_query($new_get);
    return $query;
}

/*// example of use : 

$array_of_queries_to_change = array (
'page' => '2',
'a key' => 'a value' 
);

$new_query = ChangeQuery($array_of_queries_to_change);

echo $new_query;
*/ 
```

# .net - 调用 SOAP ASMX Web 服务时在根元素中强制使用命名空间

> ID：11802927
> 
> 赞同：1
> 
> 时间：2012-08-03T20:35:51.370
> 
> 标签：.net, wcf, web-services, asmx, xml-namespaces

我有一个 .NET 客户端调用 SOAP .asmx Web 服务。我正在开发的客户端本身就是 .NET 4 下的 WCF 服务。目标 .asmx Web 服务是应用程序中的服务引用。我无法控制目的地。

问题在于，在调用 Web 服务时，为调用创建的 XML 不包含正在发送的代理类的序列化 XML 的**根元素中的特定命名空间。**

相反，它将命名空间应用于嵌套在文档中的少数元素。

使用代理类时：

```
 var x = new RemoteService_PortTypeClient();
 x.SomeMethod(somePayload); 
```

使用 hl7 命名空间格式化时，目标服务会返回异常：

> 找不到元素“urn:hl7-org:v3:typeId”的架构信息。

当前序列化的代理对象 ( `somePayload`) 被发送为：

```
<MyRoot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    ....
    <MyNode value="20120801100803" xmlns="urn:hl7-org:v3" /> 
```

我希望它如何发送：

```
<MyRoot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xmlns:xsd="http://www.w3.org/2001/XMLSchema"
        xmlns="urn:hl7-org:v3">
    ....
    <MyNode value="20120801100803"  /> 
```

如何强制我的客户在根中声明命名空间，而不是分散在元素中？

我知道在根目录中有这个命名空间将被服务接受而不会出错，因为它已被证明可以以这种方式工作。

`References.cs`或 web.config 或其他中是否有声明/属性来强制执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:23:56.650

我通过创建 Web 引用而不是服务引用解决了我自己的问题。

![在此处输入图像描述](../Images/12c67a1e7a77ea429f53314b96eb4e2b.png)

# php - 同时打开php脚本

> ID：11802931
> 
> 赞同：1
> 
> 时间：2012-08-03T20:36:30.697
> 
> 标签：php, internet-explorer, firefox, google-chrome

我刚刚遇到了一些问题，需要指导来解决它。我有这个测试脚本：

```
<?php
header('Content-type: text/plain');
$start = microtime(true);
echo 'Start time: '.date('H:i:s')."\n";
sleep(5);
echo 'End time: '.date('H:i:s')."\n";
echo 'Ellapsed time: '.(microtime(true)-$start)."\n";
?> 
```

如果我在 Firefox 或 Chrome 中同时在 2 个选项卡中运行它，我会看到第二个选项卡中的脚本仅在第一个脚本完成其工作后才有效。在 IE9 中它是同时工作的，而不是一个接一个。问题出在哪里？为什么脚本不能在 FF 和 Chrome 中同时工作？

铬的结果

1 个标签：

```
Start time: 22:34:03
End time: 22:34:08
Ellapsed time: 4.9997730255127 
```

2 选项卡：

```
Start time: 22:34:08
End time: 22:34:13
Ellapsed time: 5.0004279613495 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:14:07.843

大多数服务器对单个用户可以拥有的连接数都有限制。您的页面可能会一个接一个地加载的另一个原因可能是会话变量。如果您正在使用的文件打开会话，则必须完全加载第一页，并且必须在第二页开始加载之前关闭会话。

以上两种情况在不同的浏览器中都不会做出不同的响应，这让我相信问题是特定于浏览器的。如果您尝试在两个选项卡上加载同一页面，我最好的猜测是您使用的 chrome 和 firefox 版本按顺序发送请求，并在触发第二个之前等待。

想到的最后一件事是，对于 AJAX 调用，如果您不异步执行它们，它们将按顺序触发，但要等待第一个完成。一个例子是谷歌分析。他们的跟踪代码现在是异步的，因此页面加载时间不会受到影响。[您可以在此处](http://www.html5rocks.com/en/tutorials/async/deferred/)阅读有关异步 JavaScript的更多信息

通常最好结合 AJAX 请求来减少网络拥塞和服务器负载。如果可能的话，我建议您考虑将它们结合起来，因为一旦您的应用程序或网站变得更受欢迎，10000 个请求总是比 20000 个更好......

# ruby-on-rails - 将用户别名设置为消息收件人

> ID：11802935
> 
> 赞同：0
> 
> 时间：2012-08-03T20:36:37.243
> 
> 标签：ruby-on-rails

我有两个模型，用户和处理（您可以将其视为消息）。

用户：

```
class User < ActiveRecord::Base
    attr_accessible :name, :email, :password, :password_confirmation
    has_secure_password

    has_many :sent_treatings, :foreign_key => "requestor_id", :class_name => "Treating", dependent: :destroy
    has_many :received_treatings, :foreign_key => "requestee_id", :class_name => "Treating", dependent: :destroy

end 
```

治疗：

```
class Treating < ActiveRecord::Base
  attr_accessible :intro, :proposed_date, :proposed_location

  validates :intro, presence: true, length: { maximum: 190 }
  validates :requestor_id, presence: true
  validates :requestee_id, presence: true

    belongs_to :requestor, class_name: "User"
    belongs_to :requestee, class_name: "User"

    default_scope order: 'treatings.created_at DESC'

end 
```

我在处理控制器设置“请求者”时遇到问题：

```
class TreatingsController < ApplicationController
    before_filter :signed_in_user

    def create
        requestee = ?
        requestor = current_user
        @received_treating = requestee.received_treatings.build(params[:treating])
        @received_treating.requestor = requestor

        if @received_treating.save
            flash[:success] = "Treating request sent!"
            redirect_to users_path
        else
            render 'static_pages/home'
        end
    end
end 
```

我尝试替换的问号：User.find(params[:id])，希望能找到当前“用户/显示”视图中的用户，但我收到此错误：

找不到没有 ID 的用户

我也试过 User.find(params[:treating][:requestee_id])，但这也没有用。有任何想法吗？

谢谢！

编辑：

views/shared/_treating_form.html.erb（这在用户控制器中引用@received_treating，显示操作）：

```
<div class="field">
    <%= f.text_area :intro, placeholder: "Write your introduction here..." %>
</div>

<%= f.submit "Send", class: "btn btn-large btn-primary" %> 
```

编辑：添加其他用户个人资料页面：

```
<% provide(:title, @user.name) %>
<div class="row">
    <aside class="span4">
        <section>
            <h1>
                <%= gravatar_for @user %>
                <%= @user.name %>
            </h1>
        </section>
        <% if signed_in? %>
            <section>
                    <%= render 'shared/treating_form' %>
            </section>
        <% end %>
    </aside>
    <div class="span8">
        <% if @user.received_treatings.any? %>
        <h3>Treating requests (<%= @user.received_treatings.count %> received)</h3>
        <ol class="treatings">
            <%= render @received_treatings %>
        </ol>
            <%= will_paginate @received_treatings %>
        <% end %>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T22:25:00.760

我认为只需添加`@user.id`一个 hidden_​​field 就可以了。

```
<%= f.hidden_field :requestee_id, :input_html => { :value => @user.id }
<div class="field">
    <%= f.text_area :intro, placeholder: "Write your introduction here..." %>
</div>

<%= f.submit "Send", class: "btn btn-large btn-primary" %> 
```

您还可以填充该字段

```
<%= form_for @user.received_treatings.build do %>
  <%= f.hidden_field :requestee_id %>
  .... 
```

在控制器上做

```
@received_treating = current_user.sent_treatings.build params[:treating] 
```

I have some doubts if this works but I think it should help you out.

# sql - 访问 SQL 查询以在 2 个表中搜索值但只使用一个？

> ID：11802940
> 
> 赞同：1
> 
> 时间：2012-08-03T20:36:51.790
> 
> 标签：sql, database, ms-access

我在 MS Access 中有 2 个表，需要查询它们以查找值。如果值在 A 中，则使用它。如果值在 B 中，则使用它。如果值在两个表中，则仅使用表 A 中的值。

我怎样才能进行查询呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:46:41.053

怎么样：

```
SELECT  IIF(IsNull(AField),(SELECT AField FROM Table2 WHERE ID=16), AField)
FROM Table1
WHERE ID=16 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:28:28.713

如果您想制作整个表格而不是 1 行：-

```
select C1, C2 from TableA where C2 is not null 
union all 
select C1, C2 from TableB where C1 in ( select c1 from TableA where C2 is null ) 
```

# c# - 在线程内设置引用变量

> ID：11802941
> 
> 赞同：2
> 
> 时间：2012-08-03T20:36:53.220
> 
> 标签：c#, multithreading, xna

我在线程内设置引用变量时遇到问题。

> 错误：
> “不能在匿名方法、lambda 表达式或查询表达式中使用 ref 或 out 参数‘输出’”

有没有办法让它工作或达到类似的效果？

```
public static void LoadThreaded<T>(string path, ref T output)
{
    ThreadStart threadStart = delegate
    {
        output = Loader<T>(path);
    };

    new Thread(threadStart).Start();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:38:56.760

`output`问题是该方法在设置变量之前返回（必须），因为它`output`是由不同的线程设置的。

这里最好的选择是使用 TPL 来修改它，即：

```
Task<T> LoadThreaded<T>(string path)
{
    return Task.Factory.StartNew( () => Loader<T>(path) );
} 
```

这允许您启动此异步操作，并*在完成时*通过阻塞（调用`output.Result`）或添加任务延续来获取结果。

# r - 计算预测值时发出警告

> ID：11802943
> 
> 赞同：7
> 
> 时间：2012-08-03T20:37:07.317
> 
> 标签：r, lm, predict

使用数据框

```
x
    Date      Val
    1/1/2012   7
    2/1/2012   9
    3/1/2012   20
    4/1/2012   24
    5/1/2012   50
a <- seq(as.Date(tail(x, 1)$Date), by="month", length=5)
a <- data.frame(a)
x.lm <- lm(x$Val ~ x$Date)

x.pre<-predict(x.lm, newdata=a) 
```

我收到这个错误：

```
Warning message:
'newdata' had 5 rows but variable(s) found have 29 rows 
```

我究竟做错了什么？

这是输入输出：

```
dput(x)
structure(list(Date = structure(c(14610, 14641, 14669, 14700, 
14730, 14761, 14791, 14822, 14853, 14883, 14914, 14944, 14975, 
15006, 15034, 15065, 15095, 15126, 15156, 15187, 15218, 15248, 
15279, 15309, 15340, 15371, 15400, 15431, 15461), class = "Date"), 
    Val = c(45, 51, 56, 56, 59, 60, 60, 60, 64, 65, 75, 73, 74, 
    80, 87, 91, 92, 96, 109, 108, 123, 129, 133, 143, 127, 127, 
    123, 121, 130)), .Names = c("Date", "Val"), row.names = c(NA, 
29L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T21:25:29.180

存储在`x.lm`模型中的变量名称是指`x`数据框。中没有同名变量`a`，因此它将`x`再次使用这 29 个变量，这可能不是您想要的，因此是警告。您可以执行以下操作以始终使用`Date`模型中命名的非限定变量：

```
a <- seq(as.Date(tail(x, 1)$Date), by="month", length=5)
a <- data.frame(Date = a)
x.lm <- lm(Val ~ Date, data=x)
x.pre<-predict(x.lm, newdata=a) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T21:01:25.090

您`data.frame a`有一个名为 的列`a`。您使用命名列创建了模型，`Val`这`Date`就是它要寻找的。

当你把你的`data.frame a`名字命名为那个专栏时`Date`，你很高兴：

```
a <- data.frame(Date=a) 
```

然后它在没有警告的情况下运行。

每条评论：

将您的呼叫编辑`lm`为：

```
lm(Val ~ Date, data=x) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-22T09:41:16.653

如果您无法`predict.lm()`工作，那么您应该尝试使用以下方法编写自己的函数`function()`：

```
yourown_function<- function(predictor1, predictor2,...){intercept+b1*predictor1+b2*predictor2+...} 
```

用于`yourown_function`从任何新数据帧进行预测：

```
newvalues<- yourown_function(predictor1=data.frame$predictor1, predictor2=data.frame$predictor2,....) 
```

使用新值，您可以计算残差、MSE 等...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-14T09:25:04.277

而不是 x.lm <- lm(x$Val ~ x$Date, data = x) 使用 x.lm <- lm(Val ~ Date, data = x)。在 lm 函数中删除变量名称之前的数据集名称应该会有所帮助。

# eclipse - Eclipse 认为它在 PlayFramework 2.0 中找不到第 3 方 JAR

> ID：11802954
> 
> 赞同：0
> 
> 时间：2012-08-03T20:37:48.953
> 
> 标签：eclipse, playframework, playframework-2.0

我一直在为一些小项目使用 PlayFramework，每当我完成这一切时，它都是通过文本编辑器完成的。我现在已经转移到 Eclipse。我按照命令生成 Eclipse 项目设置等。

一切似乎都很好。但是，我添加到引用库并放入 \libs 目录中的一个第 3 方库在 Eclipse 中引发了“无法解析类型”错误。

但是当我运行该项目时，一切正常。所以这个错误只不过是一种烦恼，它是真正困扰我的烦恼类型！所以谁能告诉我如何解决这个问题。

# c# - Linq 如何从 Lambda 推断类型

> ID：11802960
> 
> 赞同：2
> 
> 时间：2012-08-03T20:38:29.527
> 
> 标签：c#, linq, delegates, lambda, extension-methods

这是原始的Linq：

```
 var developersUsingCSharp =
                from d in developers
                    where d.Language == "C#"
                    select d.Name; 
```

这可以写成：

```
 Func<Developer, bool> filteringPredicate = d => d.Language == "C#";
     Func<Developer, string> selectionPredicate = d => d.Name;
     IEnumerable<string> developersUsingCSharp =
                    developers
                         .Where(filteringPredicate)
                         .Select(selectionPredicate); 
```

上面我们已经明确定义了 Func <T,T> 委托。所以在

```
 Func<Developer, bool> filteringPredicate = d => d.Language == "C#"; 
```

已知 d 为 Developer 类型，返回类型为 bool。同样，对于

```
 Func<Developer, string> selectionPredicate = d => d.Name; 
```

已知 d 为 Developer 类型，返回类型为字符串。但是，在相同查询的以下有效形式中，这些类型是如何推断的：

```
IEnumerable<string> developersUsingCSharp =
                      developers
                         .Where(d => d.Language == "C#")
                         .Select(d => d.Name); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:43:27.320

编译器知道`developers`implements `IEnumerable<Developer>`。这意味着任何`IEnumerabler<T>`扩展都`developers`将具有类型的项目`Developer`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:45:33.257

编译器知道其中的元素`developers`是`Developer`s，因此它可以推断出两个 lambda 的第一个类型参数。编译器可以通过检查 lambda 的返回值来推断第二种类型的参数：`bool`对于`Where`，`string`对于`Select`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T20:43:51.143

我真的没有看到任何问题。但是，请查看 C# 规范的第 7.5.2 节。我包含描述如何执行匿名和通用方法解析和类型推断的小节。

# c++ - 在 C++ 中为 unordered_set 声明哈希函数？

> ID：11802961
> 
> 赞同：5
> 
> 时间：2012-08-03T20:38:53.067
> 
> 标签：c++, hash, unordered-set

对于一个相当大的项目，我必须使用 unordered_set，为了确保我正确使用它，我尝试了一个小例子。

```
#include <iostream>
#include <unordered_set>
using namespace std;

class Foo {
  private:
    int x;
  public:
    Foo(int in) {x = in;}
    bool operator==(const Foo& foo) const {return x == foo.x;}
    size_t hash(const Foo& foo) const {return x;}
};

int main() {
  Foo f1(3);
  unordered_set<Foo> s;
  s.insert(f1);
  return 0;
} 
```

当我编译时，我得到：

```
/tmp/cc3KFIf4.o: In function `std::__detail::_Hash_code_base<Foo, Foo, std::_Identity<Foo>, std::equal_to<Foo>, std::hash<Foo>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, false>::_M_hash_code(Foo const&) const':
hashset.cc:(.text._ZNKSt8__detail15_Hash_code_baseI3FooS1_St9_IdentityIS1_ESt8equal_toIS1_ESt4hashIS1_ENS_18_Mod_range_hashingENS_20_Default_ranged_hashELb0EE12_M_hash_codeERKS1_[std::__detail::_Hash_code_base<Foo, Foo, std::_Identity<Foo>, std::equal_to<Foo>, std::hash<Foo>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, false>::_M_hash_code(Foo const&) const]+0x19): undefined reference to `std::hash<Foo>::operator()(Foo) const'
/tmp/cc3KFIf4.o: In function `std::__detail::_Hash_code_base<Foo, Foo, std::_Identity<Foo>, std::equal_to<Foo>, std::hash<Foo>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, false>::_M_bucket_index(std::__detail::_Hash_node<Foo, false> const*, unsigned int) const':
hashset.cc:(.text._ZNKSt8__detail15_Hash_code_baseI3FooS1_St9_IdentityIS1_ESt8equal_toIS1_ESt4hashIS1_ENS_18_Mod_range_hashingENS_20_Default_ranged_hashELb0EE15_M_bucket_indexEPKNS_10_Hash_nodeIS1_Lb0EEEj[std::__detail::_Hash_code_base<Foo, Foo, std::_Identity<Foo>, std::equal_to<Foo>, std::hash<Foo>, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, false>::_M_bucket_index(std::__detail::_Hash_node<Foo, false> const*, unsigned int) const]+0x28): undefined reference to `std::hash<Foo>::operator()(Foo) const'
collect2: ld returned 1 exit status 
```

似乎它没有看到我的哈希函数，但我认为“哈希”是默认函数名称。我是否正确定义了哈希？还是我需要显式声明一个单独的哈希类作为第二个模板参数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T21:04:12.550

作为 Xeo 在评论中建议的替代方案，您可以`std::hash`在实例化`unordered_set`.

```
namespace std {
    template <>
    struct hash<Foo> {
        size_t operator () (const Foo &f) const { return f.hash(f); }
    };
} 
```

您的方法的`foo`参数对`hash`我来说似乎无关紧要，但我实现了您提供的接口的专业化。

# c# - Winform：SplitterContainer 内的 SplitterContainer 行为不端

> ID：11802964
> 
> 赞同：1
> 
> 时间：2012-08-03T20:39:04.990
> 
> 标签：c#, panel, splitter

我在表单上放置了一个拆分容器（垂直）。在右侧面板中，我放置了另一个拆分容器（水平）。

当我运行应用程序时，最上面的 splittercontainer 工作正常，没有问题。问题出在嵌入式拆分器容器上。

调整大小时嵌入的拆分器容器的大小很好，但是面板显示为较小的大小。我什至没有做任何可能的事情。我似乎无法让嵌入式面板始终显示正确的尺寸。

我搜索了一下，找到了这篇文章。

[http://support.microsoft.com/kb/953934](http://support.microsoft.com/kb/953934)

我尝试了推荐的解决方案，并且对于任何 Microsoft 帖子都很常见，但它不起作用。

事实上，如果没有建议的解决方案，事情会变得更好。至少在应用程序显示之后，我可以通过调整任一控件的拆分器容器来正确调整面板的大小。

想法？

提前致谢，

莎拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:59:08.193

在遭受了相当长的一段时间之后，似乎发布我的问题让我想到了一个解决方案。

外部拆分容器必须设置为对接类型填充。将第二个拆分器容器直接嵌入到 Panel 2 中，并将其设置为停靠类型填充。

在调整大小事件中，不要为拆分器容器添加任何 Controls.Add()，因为这是在设计器中完成的。您应该为要显示的任何表单添加 Controls.Add()。

不要调整拆分容器的大小。允许 Windows 这样做。调整表格大小。确保首先将 TopLevel 设置为 false 并在添加到面板控件后显示表单。

我尝试了对接类型 none 和其他一些东西。它要么设置为无，要么设置手动设置大小或导致问题的任何原因。

我希望这篇文章对某人有所帮助。

# git - git克隆到一个分支

> ID：11802967
> 
> 赞同：9
> 
> 时间：2012-08-03T20:39:11.833
> 
> 标签：git

是否可以将项目克隆到新分支中？我已经克隆了主存储库，并希望将另一个作为其分支的存储库克隆到一个分支中。我希望能够使用 git diff 继续比较差异。如何才能做到这一点 ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T20:41:23.740

你可以指定一个新的遥控器，然后调用 git fetch：

```
git remote add fork git://example.com/repo.git
git fetch fork 
```

然后，您可以将分支与

```
git diff origin/master fork/master 
```

# javascript - ExtJS 4.1 或通用 Javascript HTTP_Authorization 函数

> ID：11802970
> 
> 赞同：1
> 
> 时间：2012-08-03T20:39:34.877
> 
> 标签：javascript, http-headers, extjs4, http-authentication

当使用它发出请求时`curl --basic --user someuser:somepass http://someurl/`，会附加这样的标头：`Authorization: Basic Y2FsaWRvZzpmMDBmM2IwMg==`. 这当然是

> 基本访问身份验证是 Web 浏览器或其他客户端程序在发出请求时提供用户名和密码的一种方法。在传输之前，用户名附加一个冒号并与密码连接。生成的字符串使用 Base64 算法编码并在 HTTP 标头中传输并由接收方解码，从而生成以冒号分隔的用户名和密码字符串。基本访问身份验证最初是在 1996 年由 RFC 1945 [http://en.wikipedia.org/wiki/Basic_access_authentication][1] [1] 定义的：[http ://en.wikipedia.org/wiki/Basic_access_authentication](http://en.wikipedia.org/wiki/Basic_access_authentication)

我正在寻找一种方法让我的所有 ExtJS 4.1 Ext.data.proxy.Rest 代理将此添加到所有请求中。这似乎是一项简单的任务，但我找不到任何文档。`headers: {'X_MyHeader':'somevalue'}`顺便说一句，我确实知道如何通过属性向代理添加标头。我只是不知道如何告诉 Ext 为当前的用户名/密码全局执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:15:07.230

我正在寻找一种类似的解决方案，将 OAuth 令牌应用于我的 Ext.data.proxy.Rest 代理，但找不到任何有关它的信息。非常震惊，没有关于如何做到这一点的信息。让我觉得我走错了路。无论如何，这就是我想出的实现这一目标的方法。

覆盖`Ext.data.proxy.Ajax`并保留一个静态变量，使其适用于所有代理。然后将设置的 authHeader 与当前的标头列表合并，以便您仍然可以自定义每个代理。

```
Ext.override(Ext.data.proxy.Ajax, {

    statics: {
        authHeader: undefined,
    },

    /**
     * @cfg {Object} headers
     * Any headers to add to the Ajax request. Defaults to undefined.
     */

    doRequest: function(operation, callback, scope) {
        var writer  = this.getWriter(),
            request = this.buildRequest(operation, callback, scope);

        if (operation.allowWrite()) {
            request = writer.write(request);
        }
        console.log(this.headers);
        Ext.apply(request, {
            headers       : Ext.apply(this.headers, Ext.data.proxy.Ajax.authHeader) || Ext.data.proxy.Ajax.authHeader,
            timeout       : this.timeout,
            scope         : this,
            callback      : this.createRequestCallback(request, operation, callback, scope),
            method        : this.getMethod(request),
            disableCaching: false // explicitly set it to false, ServerProxy handles caching
        });

        Ext.Ajax.request(request);

        return request;
    }
}); 
```

然后我在本地存储中查找我的令牌，如果它在那里全局设置，否则提示登录。

```
MyApp.model.AuthToken.load(1, {
    callback: function(record) {
        // If we don't have anything in local storage for the user, show the login box.
        if (record.get('access_token') == '') {
            var window = Ext.create('MyApp.view.Login');
            window.show();
        } else {
            Ext.data.proxy.Ajax.authHeader = { 'Authorization': 'Bearer ' + record.get('access_token') };
        }
    }
}); 
```

应该有一些额外的逻辑来处理令牌过期和刷新请求，但你明白了！

# android - 无效的 Accountmanager 身份验证令牌

> ID：11802975
> 
> 赞同：0
> 
> 时间：2012-08-03T20:39:48.193
> 
> 标签：android, webserver, accountmanager, auth-token

您好，我正在尝试从我的 php 服务器验证我使用 accountManager 创建的令牌，但我不断从我的 php 服务器上的 google 服务器收到错误“无效令牌”......这是代码：

```
private String updateToken(boolean invalidateToken, int accountref) {
    String authToken = "null";
    try {
        AccountManager am = AccountManager.get(TestAuthActivity.this);
        Account[] accounts = am.getAccountsByType("com.google");
        AccountManagerFuture<Bundle> accountManagerFuture;
        if(TestAuthActivity.this == null){//this is used when calling from an interval thread
            accountManagerFuture = am.getAuthToken(accounts[accountref], SCOPE, false, null, null);
        } else {
            accountManagerFuture = am.getAuthToken(accounts[accountref], SCOPE, null, TestAuthActivity.this, null, null);
        }
        Bundle authTokenBundle = accountManagerFuture.getResult();
        authToken = authTokenBundle.getString(AccountManager.KEY_AUTHTOKEN).toString();
        if(invalidateToken) {
            am.invalidateAuthToken("com.google", authToken);
            authToken = updateToken(false, accountref);
        }
    } catch (Exception e) {
        e.printStackTrace();
    }

    Dialog d = new Dialog(TestAuthActivity.this);
    d.setTitle("Token :" + authToken);
    d.show();

    createSession(TestAuthActivity.this, authToken);

    return authToken;
} 
```

所以我得到一个令牌然后我将它发送到我的 php 服务器：

```
<?php

if( isset($_POST['authToken'])){        

    //pour que la réponse s'affiche comme du texte brut
    header('Content-Type: text/plain');

    /*partie à modifier*/
    $name = 'www.google.com';//nom du site

    $data = $_POST['authToken'];

    $envoi  = "POST /m8/feeds/contacts/default/full HTTP/1.1\r\n";
    $envoi .= "Host: ".$name."\r\n";
    $envoi .= "Authorization: GoogleLogin auth='".$data."'\r\n";
    $envoi .= "Connection: Close\r\n";
    $envoi .= "Content-type: application/x-www-form-urlencoded\r\n";
    $envoi .= "Content-Length: ".strlen($data)."\r\n\r\n";
    $envoi .= $data."\r\n";

    $socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
    if($socket < 0){
            die('FATAL ERROR: socket_create() : " '.socket_strerror($socket).' "');
    }

    if (socket_connect($socket,gethostbyname($name),80) < 0){
            die('FATAL ERROR: socket_connect()');
    }

    if(($int = socket_write($socket, $envoi, strlen($envoi))) === false){
            die('FATAL ERROR: socket_write() failed, '.$int.' characters written');
    }

    $reception = '';
    while($buff = socket_read($socket, 2000)){
       $reception.=$buff;
    }
    echo(json_encode($reception));

    socket_close($socket);  
}
?> 
```

我不断收到错误：401 无效令牌：S

有没有人有解决方案或好的样本（找不到与我想做的匹配的！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:50:16.443

我可以想到您可能遇到的两个可能的问题：

1.  **身份验证令牌已过期。**当您调用您的方法`updateToken()`来获取令牌时，您需要将参数设置`invalidateToken`为 true 以确保您获得一个新的令牌。
2.  **的值`SCOPE`是错误的。**根据您提供的代码，您似乎正在尝试使用 Google Contacts API，因为此 API`SCOPE`的值应为**https://www.google.com/m8/feeds**

# cakephp - 尝试使用 CakePHP 创建简单站点时出现错误消息

> ID：11802978
> 
> 赞同：0
> 
> 时间：2012-08-03T20:40:01.073
> 
> 标签：cakephp

这是产生错误的 add.ctp 文件

```
<?php
echo $form->create('Category');
echo $form->input('name');
echo $form->end('Save Post');
?> 
```

这是与 add.ctp 关联的 CategoriesController.php 文件

```
<?php

class CategoriesController extends AppController {

    var $name = 'Categories';

    function index() {
        $this->set('categories', $this->Category->find('all'));
    }

    function add() {
        if (!empty($this->data)) {
            if ($this->Category->save($this->data)) {
                $this->Session->setFlash('Your category has been saved.');
                $this->redirect(array('action' => 'index'));
            }
        }
    }
}

?> 
```

我不断收到以下错误消息：

> `Call to a member function create() on a non-object`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:55:39.057

假设您使用的是 2.X，您是否`$this->Form`在`$form`使用它之前进行了分配？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:03:43.370

您正在使用与 cakephp 1.x 对应的代码

```
<?php
echo $this->form->create('Category');
echo $this->form->input('name');
echo $this->form->end('Save Post');
?> 
```

是 cakephp 2.x 中的正确方法。

[cakephp 文档](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#formhelper)

# php - 多维数组 - 添加键和值匹配的键和值

> ID：11802979
> 
> 赞同：1
> 
> 时间：2012-08-03T20:40:08.143
> 
> 标签：php, arrays, multidimensional-array, associative-array

我正在尝试将一个键和值（关联）从一个数组添加到另一个数组，其中一个特定的键和值匹配。这是两个数组：

```
$array1 = array(
            1 => array(
                'walgreens' => 'location',
                'apples' => 'product1',
                'oranges' => 'product2'
            ),
            2 => array(
                'walmart' => 'location',
                'apples' => 'product1',
                'oranges' => 'product2',
                'milk' => 'product3'
            )
       );
$array2 = array(
            1 => array(
                'walgreens' => 'location',
                'apples' => 'product1',
                'oranges' => 'product2',
                'bananas' => 'product3',
            )
      ); 
```

这是我在修改`$array1`为具有键“bananas”和值“product3”时所做的尝试：

```
$dataCJ = getCJItem($isbn);
         foreach ($array1 as $subKey => $subArray) {
            foreach($subArray as $dkey => $dval){
                foreach($array2 as $cjk => $cjv){
                    foreach($cjv as $cjkey => $cjval){
                         if($dval['walgreens'] == $cjval['walgreens']){
                              $dval['bananas'] = $cjval['bananas'];
                         }
                    }
                }
            }
         } 
```

这行不通。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:50:17.213

更改`=> $dval`为`=> &$dval`。目前您正在创建和写入一个新变量，并且更新不会就地工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T20:57:43.897

我会看`array_merge()`功能！

这是[PHP 文档的开始](http://php.net/manual/fr/function.array-merge.php)。

* * *

对于您的具体情况，您可以执行以下操作：

```
foreach($array1 as $key1 => $values1){
    foreach($array2 as $key2 => $values2){
        if($values1[0] == $values2[0]){
            $array1[$key1] = array_merge($values1, $values2);
        }
    }
} 
```

请注意，为了简化问题，您应该反转数组的第一个 key=> value 对。

以这种方式拥有一个数组会简单得多：

```
array(
    'location' => "The location (eg:walgreens)",
    //...
); 
```

这样，您可以将比较更改为以下内容：

```
$values1['location'] == $values2['location'] 
```

如果阵列不是以该位置作为第一对来构建的，那么这会更安全。

# windows - 在 Windows 8 WinRT 中访问振动功能？

> ID：11802984
> 
> 赞同：6
> 
> 时间：2012-08-03T20:40:31.307
> 
> 标签：windows, windows-8, windows-runtime, windows-store-apps

Windows 8 或 Windows Phone 8 中是否有 WinRT API 来使用振动功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-16T12:15:40.850

试试这个：（仅适用于 Windows Phone！）

```
var vibrationTime = TimeSpan.FromMilliseconds(100);
Windows.Phone.Devices.Notification.VibrationDevice.GetDefault().Vibrate(vibrationTime); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T07:20:16.733

泄露的文档似乎提到了[Microsoft.Devices.VibrateController](http://msdn.microsoft.com/en-us/library/microsoft.devices.vibratecontroller%28v=vs.92%29.aspx)类在 WP7 和 WP8 中都可用。不过，我认为 WinRT 中没有类似的东西。我认为平板电脑通常没有振动器？似乎更像是手机的一项功能，您可能会在口袋里保持静音。

一些关于[振动的文章](http://blog.xyzzer.me/tag/vibrate/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T19:22:06.150

我们有适用于 Windows Phone 8 和 7 的设备，但我们没有适用于 WinRT 平板电脑的设备

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-27T18:13:37.753

您可以使用 VibrateController 或 VibrationDevice 类在您的 Windows Phone 应用程序中实现振动效果。

有关详细信息，请参阅[http://blogs.msdn.com/b/paraswadehra/archive/2014/06/25/how-to-make-your-windows-phone-app-vibrate.aspx](http://blogs.msdn.com/b/paraswadehra/archive/2014/06/25/how-to-make-your-windows-phone-app-vibrate.aspx)。

# c# - 对特定列求和 c#

> ID：11802985
> 
> 赞同：0
> 
> 时间：2012-08-03T20:40:35.257
> 
> 标签：c#, .net, datagrid

我在这里写了这个公式，但由于某种原因，它将 amt 列中的所有值相加，而不是包含 itemcolumn 字符串的值。有任何想法吗？

```
foreach (DataGridViewRow row in itemGrid.Rows)
{
    if (itemGrid.Rows[e.RowIndex].Cells["itemColumn"].Value.ToString() == itemcolumn)
        total += Convert.ToDecimal(row.Cells["Amt"].Value.ToString());                             
} 
```

这是完整的代码，因此您可以看到这里发生了什么。

```
 private void itemGrid_CellValueChanged(object sender, DataGridViewCellEventArgs e)
            {
                //
                // [This string compares amt and amtvalue on Cell edit]
                //
                if (itemGrid.CurrentCell.ColumnIndex == 5 && isCalled)
                {
                    // Prevents loop.
                    isCalled = false;

                    decimal total = 0;
                    string itemcolumn = String.Empty;

                    {
                        foreach (DataGridViewRow row in itemGrid.Rows)
                        {
                            foreach (DataGridViewCell cell in row.Cells)
                            {
                            if (cell.Selected)
                                {
                                    itemcolumn = Convert.ToString(row.Cells["itemColumn"].Value);

                                    string strName = vendorBox.Text;

                                    string Select = "select sum(case allocated when 'Received' then amt when 'Shipped' then -amt end) as amt from lineitem WHERE item='" + itemcolumn + "';";

                                    MySql.Data.MySqlClient.MySqlConnection conDatabase = new
                                    MySqlConnection(ConnectionString.connString);
                                    MySql.Data.MySqlClient.MySqlCommand cmdDatabase = new
                                    MySql.Data.MySqlClient.MySqlCommand(Select, conDatabase);

                                    try
                                    {
                                        conDatabase.Open();

                                        MySql.Data.MySqlClient.MySqlDataReader rdrRepairOrder;
                                        rdrRepairOrder = cmdDatabase.ExecuteReader();

                                        while (rdrRepairOrder.Read())
                                        {
                                            string rowz5 = string.Format("{0}", rdrRepairOrder.GetString(0));
                                            string wut5 = rowz5.ToString();
                                            itemamt = Convert.ToInt32(wut5);
                                        }

                                        rdrRepairOrder.Close();
                                        conDatabase.Close();
                                    }

                                    catch (MySql.Data.MySqlClient.MySqlException ex)
                                    {
                                        MessageBox.Show("Error " + ex.Number + " has occurred: " + ex.Message,
                                    "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
                                    }
                                }
                            }
                        }
                    }

                        // Converts amt column.
                        // amt = The cell amount.
                        // itemamt = What's on the SQL table.

                        foreach (DataGridViewRow row in itemGrid.Rows)
                        {
                          if (itemGrid.Rows[e.RowIndex].Cells["itemColumn"].Value.ToString() == itemcolumn) total += Convert.ToDecimal(row.Cells["Amt"].Value.ToString());                             
                        }
                        MessageBox.Show("Total is: " + total.ToString());

                            int amt;
                            string amtz = itemGrid.Rows[e.RowIndex].Cells["Amt"].Value.ToString();
                            amt = Convert.ToInt32(amtz);

                            int value;
                            value = itemamt - amt;

                            if (value < 0)
                            {
                                MessageBox.Show("Cannot allocate more than what it is in inventory. You have " + itemamt.ToString() + " in stock.");
                                itemGrid[5, itemGrid.CurrentCell.RowIndex].Value = itemamt;
                            }

                        }

                        isCalled = true;
                    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:43:38.100

而不是`itemGrid.Rows[e.RowIndex]`，请尝试`row`在您的情况下使用。

# unix - 如何使用 execlp 在 unix 中定位命令

> ID：11802988
> 
> 赞同：0
> 
> 时间：2012-08-03T20:41:12.300
> 
> 标签：unix, arguments, exec

在我的程序中，用户将键入命令及其参数，我想找到它。例如，他打印 wc -l -c。由于我不知道他会输入多少参数，我应该如何使用 execlp？execlp 的语法是 `int execlp(const char*file,const char *arg0...,(char*)0);` 假设我将命令及其参数存储在 `char* arguments[]`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-07T12:02:51.103

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

你想要 execvp()。- 致命错误

# java - 正则表达式href解析

> ID：11802993
> 
> 赞同：0
> 
> 时间：2012-08-03T20:41:27.700
> 
> 标签：java, regex

java中的一个正则表达式问题。我正在从元素 href 属性中抓取 ID 编号。我在字符串中有一堆这样的链接：

`<a href="http://www.someplacelol.com/pdf/14669/Whatever/Doesntmatter">Whatever</a>`

在“pdf”和斜杠之后是一个我感兴趣的 ID 号。所以我必须从字符串中多次出现的这种 url 中获取所有 ID。什么是最好的正则表达式？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:44:15.580

如果您知道 url 正是这样，您的正则表达式可以是：

```
someplacelol\\.com/pdf/([0-9]+)/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:20:19.707

我不是正则表达式艺术家，但您应该能够通过以下方式从元素中获取 url：

```
\<a\s.*?href=(?:\"([\w\.:/?=&#%_\-]*)\"|([^\"][\w\.:/?=&#%_\-]*[^\"\>])).*?\> 
```

第一组将包含 URL。

从那里你应该能够毫不费力地提取数字。我在此页面的源代码上测试了该链接，它能够正确识别所有`a`s 中的所有 HREFS。

请不要评论和说`It breaks for <a id="<<<>><><<>>href=" href="<a href=">`，因为 OP 在他对问题的描述中提供了对 HTTP 标准的荒谬滥用，例如这个在他的跟踪案例中不会出现。

此外，如果出于某种奇怪的原因，一个元素有 2 个 href，则只会抓取第一个。如果你关心的话，你可能会解决这个问题。

编辑：在之后添加了空格要求，`<a`因此它不会匹配`<asdffsdfsfg href="lol">`.

# asp.net-mvc - 告诉视图为模型中的特定属性使用另一个字符串

> ID：11802994
> 
> 赞同：1
> 
> 时间：2012-08-03T20:41:30.020
> 
> 标签：asp.net-mvc, model-binding

我有以下课程：

```
public class ViewModel
{
    public List<Dog> Dogs { get; set; }
}

public class Dog
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Type { get; set; }
    public string SuperPowers { get; set; }
} 
```

假设我有以下视图：

```
@model ViewModel
@for(int i = 0; i < Model.Dogs.Count(); i++)
{
    <div class="dog">
        @Html.HiddenFor(m => m.Dogs[i].Id)
        <div>Dog name: @Model.Dogs[i].Name</div>
        <div>Dog type: @Model.Dogs[i].Type</div>
        <div>Dog super powers : @Model.Dogs[i].SuperPowers</div>
    </div>
} 
```

**问题：**如何指定`string "d"`用于`Dog`类，以便 html 输出如下所示：

```
<div class="dog">
    <input type="hidden" id="d_0__Id" name="d[0].Id" value="1" />
    <div>Dog name: Boby</div>
    <div>Dog type: Turbo</div>
    <div>Dog super powers : Extra speed</div>
</div>

<div class="dog">
    <input type="hidden" id="d_1__Id" name="d[1].Id" value="2" />
    <div>Dog name: Lasy</div>
    <div>Dog type: Powered</div>
    <div>Dog super powers : Extra strength</div>
</div> 
```

注意输入有名字`d[1].Id`

代替`Dogs[1].Id`

我知道我以后可以编写一个自定义模型绑定器来处理这样的 html 输出，但如果我不必这样做，那就太好了。

**重要的**

我正在寻找一种可以让我继续使用`@Html.HiddenFor(...)`而不是`@Html.Hidden(...)`因为我讨厌魔术弦的解决方案。如果它不包括编写自定义模型绑定器然后将新的 html 标记解释为模型，我会更欢迎一个解决方案。

在完美的情况下，这将是某种属性，我会打给我的班级。例子：`[BindClassNameTo(Name="d")]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:20:41.193

您可以使用`Html.Hidden(string.format("d[{0}]", i), Model.Dogs[i])`

# objective-c - 如何在目标 C 中计算校验和

> ID：11802999
> 
> 赞同：0
> 
> 时间：2012-08-03T20:41:43.787
> 
> 标签：objective-c, ios, checksum

我正在开发一个处理外部硬件通信的应用程序，但在获取包的校验和时遇到问题。（我在制作这个应用程序时仍在学习目标 C，所以我在这方面还是相当新的。）在另一个用 C 编写的代码中，校验和是这样计算的：

```
byte CalculateCheckSum (byte txcount){
    byte local_cs=0;
    while(txcount>0){
        local_cs+=*x_ptr;
        x_ptr += 1;
        txcount--;
    };
    return (~local_cs+1);
} 
```

我尝试将一些代码用于目标 C：

```
u_int8_t synByteSOH[]= {SYN,SYN,SOH,SETSERIALINFO};
- (Byte)CalcCheckSum:(Byte)i
{   u_int8_t synByteSOH[]= {SYN,SYN,SOH,SETSERIALINFO};
    Byte local_cs = 0;
    int j = 0;
    while (i>0) {
        local_cs += synByteSOH[j];
        i--;
        j++;
    };
    return (~local_cs+1);

} 
```

没有警告或错误，但据说 clang: error: linker command failed with exit code 1 有谁知道这是为什么？我应该如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:49:07.887

所有有效的 C 代码都是有效的 Objective C 代码。不要尝试将其重写为Objective C 方法——它的价值为零。

改编原始函数的诀窍在于它依赖于几件事：`byte`被类型化，以及一个名为`x_ptr`.

关于 x_ptr，它来自哪里以及它是如何在原始中初始化的，我们从粘贴的代码片段中一无所知。所以假设字节数组 synByteSOH 是你需要校验和的数据块，只需引入一个文件静态变量 x_ptr 类型`byte*`并将其初始化为你的数据块：

```
typedef unsigned char byte;
static byte *x_ptr;

byte CalculateCheckSum (byte txcount)
//...Follows as pasted

//...

//And now we call it elsewhere:
byte synByteSOH[]= {SYN,SYN,SOH,SETSERIALINFO};         
x_ptr = synByteSOH
byte Checksum = CalculateCheckSum(4); //4 is the data block size 
```

一般来说，即使在 ObjC 项目中，拥有 C 函数也是完全可以的。没有人说过每一段代码都应该在一个类方法中。