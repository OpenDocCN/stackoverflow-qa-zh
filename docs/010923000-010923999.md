# StackOverflow 问答 10923000-10923999

# javascript - Jquery：扩展对象以修改方法

> ID：10923005
> 
> 赞同：2
> 
> 时间：2012-06-06T22:08:17.793
> 
> 标签：javascript, jquery, oop

我正在尝试扩展一个对象，并且我想修改第一个方法，而不是覆盖它。我不认为这很清楚，所以这里有一个例子：

```
var object1 = {
    whatever : function(){
        console.log('first object method');
    }
}

var object2 = {
    whatever : function(){
        console.log('second object method');
    }
}

var object = $.extend(true, object1, object2);

object.whatever(); 
```

这个例子将输出`second object method`，但我想要的是它输出`first object method`和`second object method`。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T22:23:44.357

Javascript使用**原型继承**，所以你可以让object2继承object1的属性和方法

```
object2.prototype=object1; 
```

这意味着object2将继承object1的所有属性和方法，任何被覆盖的方法都可以在`object2.prototype.method()`

so`parent::whatever();`相当于`this.prototype.whatever();`从 object2 的范围调用时。

* * *

```
var object1 = {
    whatever : function(){
        console.log('first object method');
    }
}

var object2 = {
    whatever : function(){
        console.log('second object method');
        this.prototype.whatever(); // Equivalent to parent::whatever(); 
    }
}

object2.prototype=object1; // Makes object2 inherit object1's properties and methods

object2.whatever(); // "second object method" "first object method" 
```

# image - 为响应式网站居中图像

> ID：10923006
> 
> 赞同：1
> 
> 时间：2012-06-06T22:08:24.130
> 
> 标签：image, html, css, centering

因此，我正在为学校作业进行响应式设计，并且正在尝试将图像宽度居中。

我在 Photoshop 中缩放了图像，所以我不必为图像设置任何宽度或高度

这就是我现在得到的，但这不起作用

`<header> <img src="afb%20/logo3.png" alt="logo3" width="" height="" /> </header>`

`header{ width: 100%; margin-left: auto; margin-right: auto; }`

有人可以帮我吗 ？真的需要这个！

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T22:46:39.203

只需`text-align: center`在标题 CSS 中设置。

您当前正在将标题设为 100% 宽度，因此您的边距将不适用。此外，由于您的容器是 100% 宽并且没有文本对齐，因此 img 将始终在左侧对齐。

这里：

```
header { width: 100%; text-align: center; }​ 
```

[http://jsfiddle.net/xMPZ4/](http://jsfiddle.net/xMPZ4/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T23:04:39.560

```
.center{margin: 0px auto; display: block;}

<header><img src="updates_button.jpg" alt="logo3" class="center"></header> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-01T06:45:17.630

您可以将徽标类添加到图像并将 CSS 设置为：`margin:0px auto; width:200px;`当然替换图像宽度...

# wpf - DragLeave 和 DragEnter 不起作用

> ID：10923010
> 
> 赞同：3
> 
> 时间：2012-06-06T22:08:45.743
> 
> 标签：wpf, xaml

在画布上，我放置了一个，并且在 Dock 内部，一个位于以下位置：

```
<DockPanel DragEnter="DockPanel_DragEnter" DragLeave="DockPanel_DragLeave">
    <Expander Header="Controls" IsExpanded="False"
              Content="{StaticResource CustomControls }"
              DragLeave="Expander_DragLeave"/>
</DockPanel> 
```

目标是将一些控件或形状从停靠栏中拖放到画布上。我已经厌倦了 Expander`DragLeave`和`DragEnter`DockPanl 上的事件，但它们都没有被触发！

我在这里想念什么？

谢谢。阿米特

# php - 需要有关排序要求的帮助

> ID：10923016
> 
> 赞同：0
> 
> 时间：2012-06-06T22:09:16.430
> 
> 标签：php, date, usort

我查看了一些谷歌，实际上也找到了这个堆栈：[How to sort a date array in PHP](https://stackoverflow.com/questions/597863/how-to-sort-a-date-array-in-php)

我的波长相同，但我不确定我是否清楚。我也阅读了 phpnet 文档……正如我所说，我对此感到不安。

我有一个数组：

```
Array
(
    [0] => Array
        (
            [created] => 2012-06-06 21:26:25
        )

    [1] => Array
        (
            [created] => 2012-06-06 21:23:45
        )

) 
```

我基本上需要对这个数组进行排序，以便它们按日期顺序排列。这个回调函数如何为 usort 工作？任何例子都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T22:11:57.423

```
function MySort($a, $b)
{
    if ($a['created'] == $b['created']) return 0;
    return $a['created'] < $b['created'] ? -1 : 1;
} 
```

然后使用...

```
usort($myarray, "MySort"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T22:11:36.877

`usort`只是让您使用自己的标准进行排序。你可以简单地这样做：

```
usort($array, function($a, $b){
    $a = strtotime($a['created']);
    $b = strtotime($b['created']);
    return $a-$b;
}); 
```

# php - 如何通过递归将此数组转换为多维数组？

> ID：10923018
> 
> 赞同：1
> 
> 时间：2012-06-06T22:09:18.477
> 
> 标签：php, recursion, multidimensional-array

所以我的示例输入是

```
$example_1 = Array (
    0 => Array (
        'category'     => 'body',
        'sub-category' => 'intro',
        'id'           => 'header',
        'copy'         => 'Hello',
    ),
    1 => Array (
        'category'     => 'body',
        'sub-category' => 'intro',
        'id'           => 'footer',
        'copy'         => 'Bye',
    ),
);

$example_2 = Array (
    0 => Array (
        'category'     => 'body',
        'sub-category' => 'intro',
        'sub-sub-category' => 'header',
        'sub-sub-child-category' => 'left',
        'id'           => 'title',
        'copy'         => 'Hello',
    ),
    1 => Array (
        'category'     => 'body',
        'sub-category' => 'intro',
        'sub-sub-category' => 'footer',
        'sub-sub-child-category' => 'right',
        'id'           => 'title',
        'copy'         => 'Bye',
    ),
); 
```

我想把它变成

```
$example_output_1 = Array (
    'body' => Array (
        'intro' => Array (
            'header' => Array (
                'title' => 'Hello',
            ),
            'footer' => Array (
                'title' => 'Bye',
            ),
        ),
    ),
);

$example_output_2 = Array (
    'body' => Array (
        'intro' => Array (
            'header' => Array ( 
                'left' => Array (
                    'title' => 'Hello',
                ),
            ),
            'footer' => Array (
                'right' => Array (
                    'title' => 'Bye',
                )
            ),
        ),
    ),
); 
```

**请注意，数组的深度是动态的（它没有设置 - 只有在它点击“复制”时才指示数组的深度）。**

我在尝试正确获取递归时遇到问题。我所拥有的基本但非常粗略的算法是 - 循环遍历行 - 循环遍历行的内容 - 当索引是“复制”时，最终值是当前值。- 然后构建数组

我设法让它只处理阵列的一行，但它非常混乱而且有点不完整，所以我觉得我真的需要从头开始。更新：按要求附上令人尴尬的代码（不要尖叫！;p）

```
function buildArray($row, $start = true) {

    if ($start) {
        $result = array();
    }

    if ( ! is_array($row) ) {
        return $row;
    }

    // Get the first element of the array include its index
    $cellValue = null;
    $colId = null;
    foreach($row AS $index => $value) {
        $cellValue = $value;
        $colId = $index;
        break; 
    }

    // Reduce the array by one
    $tempRow = $row;
    $temp = array_shift($tempRow);

    if ($colId == 'copy') {
        $result[$cell] = buildArray($cellValue, $locale, false);
    } else {
      $result[$cell] = buildArray($tempRow, $locale, false);
    }

    return $result;
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T22:19:09.590

应该很简单：

```
$originalArray = array(); // <-- should contain your values
$newArray = array();

foreach( $originalArray as $item )
{
    $category = $item['category'];
    $subcategory = $item['sub-category'];

    if ( empty( $newArray[$category] ) )
    {
        $newArray[$category] = array();
    }
    if ( empty( $newArray[$category][$subcategory] ) )
    {
        $newArray[$category][$subcategory] = array();
    }

    $newArray[$category][$subcategory][$item['id']] = $item['copy'];
} 
```

在这里查看它的实际操作：[http ://codepad.viper-7.com/9bDiLP](http://codepad.viper-7.com/9bDiLP)

* * *

**更新：**既然你已经指定了你需要无限递归，这里是一个镜头：

```
$originalArray = array(); // <-- Your values go here
$newArray = array();

foreach ( $originalArray as $item )
{
    $inception = &$newArray; // http://www.imdb.com/title/tt1375666/

    foreach ( $item as $key => $val )
    {
        if ( $key != 'id' )
        {
            if ( empty($inception[$val]) )
            {
                $inception[$val] = array();
            }
            $inception = &$inception[$val];
        }
        else
        {
            $inception[ $val ] = $item['copy'];
            break;
        }
    }
} 
```

...这是演示：[http ://codepad.viper-7.com/F9hY7h](http://codepad.viper-7.com/F9hY7h)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T22:31:50.267

这可以迭代解决，因为递归只会发生在函数的末尾。以下代码是简化。它在迭代旧的时构建一个新的分层数组。

在转换每个条目后，它使用`array_merge_recursive`.

```
function transform($a)
{
    // create new array and keep a reference to it
    $b = array(); $cur = &$b;
    foreach ($a as $key => $value) {
        if ('id' === $key) {
            // we're done, add value to the array built so far using id and copy
            $cur[$value] = $a['copy'];
            break;
        } else {
            // create one more level
            $cur[$value] = array();
            // and update the reference
            $cur = &$cur[$value];
        }
    }
    // all done
    return $b;
}

// $example_2 is your multi-dimensional array
$merged = call_user_func_array('array_merge_recursive', 
    array_map('transform', $example_2)
); 
```

# php - 插入行时生成随机数

> ID：10923019
> 
> 赞同：0
> 
> 时间：2012-06-06T22:09:19.277
> 
> 标签：php, sql, sql-server, tsql

我想在一个名为accounts的表中插入数据，其中一个字段必须有一个随机数，从11开始，长度为9位，例如112345673或119876543。这可以通过SQL还是我必须在PHP中做到这一点然后插入那里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T22:13:34.607

如果您一次插入一行...

```
--INSERT dbo.table(column1, random_column)
SELECT 'column1_value', 
   '11' + RIGHT(REPLACE(CONVERT(VARCHAR(12), RAND()), '.', ''), 3)
        + RIGHT(REPLACE(CONVERT(VARCHAR(12), RAND()), '.', ''), 4); 
```

如果这是多行 SELECT 的一部分，您将看到分配给每一行的相同数字，因此您需要根据每行中的其他数据进行随机化（或使用`NEWID()`康拉德指出的），例如

```
--INSERT dbo.table(column1, random_column)
SELECT name, '11' + RIGHT(1000000 + ABS(CONVERT(BIGINT, 
  CONVERT(VARBINARY(16), NEWID()))), 7) 
FROM sys.all_objects; 
```

（我已经注释掉了，`INSERT`所以你可以独立测试结果。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T22:39:56.250

也许这过于简单，但`110000000 + (ABS(CHECKSUM(NEWID())) % 10000000)`会是一种非常轻量级的方式来产生你想要的东西。

所以

```
ALTER TABLE mySchema.myTable ADD CONSTRAINT DF_myColumn
DEFAULT 110000000 + (ABS(CHECKSUM(NEWID())) % 10000000) FOR myColumn 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T22:19:31.727

这会给你一个 11 位的随机数。如果随机数短于 9 位，则以 0 为前缀，因此总长度始终为 11：

```
select '11' + right('11000000000' + 
    cast(abs(convert(bigint,convert(varbinary(8),newid()))) as varchar(20)), 9) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T22:12:38.227

使用 PHP。

`$randnum = "11".rand(1000000, 9999999);`

然后只需将其插入查询中，瞧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T01:23:20.167

我会尝试：

```
SELECT '11'+REPLACE(STR(RAND(),9,7),'0.','') 
```

...或这种轻微的变化...

```
SELECT '11'+RIGHT(STR(RAND(),9,7),7) 
```

...以更快的速度证明。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-06T22:12:01.643

可能但不是很好的表现。尝试这个。

```
insert into table2(randomNumberColumn)
select convert(bigint,'11' + convert(varchar(100),convert(bigint,right(convert(varchar(100),abs(convert(int,convert(varbinary(16),newid())))),7)))) as a
from table1 
```

一个问题是它不能保证 11 位的长度。有时由于数量少，它会是 10。当随机数生成器提出一个小数字时，还没有真正研究如何填写额外的 0。

# java - 当 ResultSet 关闭时，Statement 会发生什么？

> ID：10923027
> 
> 赞同：1
> 
> 时间：2012-06-06T22:10:15.560
> 
> 标签：java, jdbc

当结果集关闭时，语句会发生什么？

```
 Statement stmt = null;
    ResultSet rs = null;

    try {
        stmt = con.createStatement();
        rs = stmt.executeQuery(query.toString());
        ...
    }

    // lots of code

    rs.close() 
```

> 注意：当 Statement 对象关闭、重新执行或用于从多个结果序列中检索下一个结果时，生成它的 Statement 对象会自动关闭 ResultSet 对象。

但是当 ResultSet 首先关闭时会发生什么？

对于什么，首先应该发生什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T22:18:48.567

您应该以与创建对象相反的顺序关闭对象。所以首先是`ResultSet`，然后是`Statement`，最后是`Connection`。

如果您不关闭`Statement`它，它将保持打开状态，您可以使用它执行另一个查询（如果它是 a`PreparedStatement`或者`CallableStatement`您能够更改查询参数）。

另请注意，您引用的是 JDBC 规范，它的实现取决于 JDBC 驱动程序提供程序。通常，您不应该信任它们，并手动关闭这些对象。

另一件事-我认为更重要-如果您使用连接池（例如在 JBoss 上），关闭连接只会将其释放回池中，而不会释放底层对象。因此，建议始终手动释放您创建的所有对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T22:22:06.643

`Statement`实际上可以重复使用。虽然如果您重复相同的查询，您应该使用 a`PreparedStatement`代替，因为查询将被编译一次。

当您完成它们时，它们当然应该关闭，但关闭`ResultSet`并不会自动关闭它们`Statement`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T22:21:52.333

声明没有任何反应——它保持打开状态。您可以根据需要继续使用该语句，但请务必在完成后将其关闭。

# android - 带有进度对话框的 WindowLeaked 异常

> ID：10923032
> 
> 赞同：0
> 
> 时间：2012-06-06T22:10:23.833
> 
> 标签：android

我试着让它简单，即使它不是。我将手机的通话记录查询到数组中。然后我将这些数组放入一个 sql 表中。所以现在我在表格中有一个 calllog。然后我查询最旧和最新的通话记录。这一切都发生在进度对话框中。

我的问题是这个错误：

```
06-06 21:24:34.954: E/AndroidRuntime(973): java.lang.NumberFormatException: Invalid long: ""
06-06 21:24:34.954: E/AndroidRuntime(973):  at java.lang.Long.invalidLong(Long.java:125)
06-06 21:24:34.954: E/AndroidRuntime(973):  at java.lang.Long.parseLong(Long.java:346)
06-06 21:24:34.954: E/AndroidRuntime(973):  at java.lang.Long.parseLong(Long.java:319)
06-06 21:24:34.954: E/AndroidRuntime(973):  at com.b2creative.b2callstats.Calllogs$8.run(Calllogs.java:503)
06-06 21:24:34.954: E/AndroidRuntime(973):  at java.lang.Thread.run(Thread.java:856)
06-06 21:24:37.860: E/WindowManager(973): Activity com.b2creative.b2callstats.Calllogs has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@412e1fb0 that was originally added here
06-06 21:24:37.860: E/WindowManager(973): android.view.WindowLeaked: Activity com.b2creative.b2callstats.Calllogs has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@412e1fb0 that was originally added here
06-06 21:24:37.860: E/WindowManager(973):   at android.view.ViewRootImpl.<init>(ViewRootImpl.java:344)
06-06 21:24:37.860: E/WindowManager(973):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
06-06 21:24:37.860: E/WindowManager(973):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215) 
```

我读到日志中的 WindowLeaked 异常通常发生在当你有某种异步任务在开始它的活动被破坏之后完成时。我还读到真正的问题应该更早一些：那个无效的长错误！

所以我记录了重要的部分，结果发现在进度对话框处于活动状态时没有发生任何事情。我的数组是空的，我的表也是。长问题是由字符串 ="" 引起的，因为没有数据可以为字符串添加值。简而言之：

这一切都发生在我将 targetSdkVersion 更改为 13 (3.2) 时。在 API 级别 7 (2.1) 中没有出现该问题。

**在这里您可以看到有问题的部分：**

```
pd = ProgressDialog.show(Calllogs.this, "Please wait..", "Loading data. This may take a few seconds based on the number of calls.", false, true);

Thread thread = new Thread(new Runnable() {  
    public void run() {
        //query calllog into arrays, populating table, getting date of the last and first added record, but nothing seems to be happening

        //here comes the error:
        String dA = "";
        HotOrNot infod = new HotOrNot(Calllogs.this);
        infod.open();
        Cursor cursorA = infod.getAllTitles_DateLimit1("DESC");
        if (cursorA.moveToFirst()){
            do{
                dA = cursorA.getString(5);
            }while (cursorA.moveToNext());
        }

        Log.i("dA", dA + ""); //null
        d1 = dA;
        infod.close();
        cal1.setTimeInMillis(Long.parseLong(dA));  //this is the first error. it looks like the table is empty.

        handler.sendEmptyMessage(0);

        lv1.post(new Runnable() {
            public void run() {
                lv1.setAdapter(adapter);
            }
        }); 
    }
});

thread.start(); 
```

我添加了

```
@Override
protected void onStop(){
    super.onStop();
    if (pd != null){
    }
    pd.dismiss();
    pd = null;
} 
```

我还将这段代码添加到 onDestroy 和 onPause 方法中，但徒劳无功。

所以基本上对我来说，这意味着 logcat 指向的变量没有值（至少不是可以转换为 Long 类型的值），因为活动由于某些原因而结束，并且由于活动完成而发生泄漏窗口错误但是进度对话框打开。或者活动结束是因为变量的值不正确，但是进度对话框仍然打开，为什么？恶魔圈，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:49:41.437

猜猜：你没有启动填充适配器的 Runnable 接口，所以也许那是因为一切都是空的？

# javascript - 如何从 WebView 内部登录到 Activity（通过 Javascript）？

> ID：10923033
> 
> 赞同：0
> 
> 时间：2012-06-06T22:10:26.490
> 
> 标签：javascript, android, logging, webview

我需要在我的嵌入式 WebView javascript 中执行一些日志记录，理想情况下我可以在封装的 Activity 中调用 Log.d。如果那不可能，下一个/最好的选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T22:25:35.593

您的 WebView 可以拦截您的 javascript 抛出的提示 js 消息。您只需要创建一条消息，如“LOG.Your log message”，当您的应用程序收到它时，解析此消息以了解您的 javascript 想要记录某些内容并且 Log 值为“Your log message”。这就是PhoneGap 的工作原理。

在您的 javascript 中： `prompt('LOG.Your log message');`
在您的 java 代码中：`WebChromeClient`为您`WebView`在此处覆盖`onJsPrompt`方法
方法描述的地方设置一个新的：[link](http://developer.android.com/reference/android/webkit/WebChromeClient.html#onJsPrompt%28android.webkit.WebView,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20android.webkit.JsPromptResult%29)

# android - 无尽的网格视图

> ID：10923034
> 
> 赞同：5
> 
> 时间：2012-06-06T22:10:39.047
> 
> 标签：android, commonsware-cwac

我看过很多无尽列表的实现。其中之一是[https://github.com/commonsguy/cwac-endless](https://github.com/commonsguy/cwac-endless)

他们都在使用列表视图。所有这些都只是在列表中添加另一行。但是当我们考虑 Gridview（如在 Google Play Store 中）并将加载视图添加为网格中的另一个项目时，它看起来很难看。如何在 Play 商店中实现相同的目标？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T18:12:56.793

我写了一个滚动监听器并将这个滚动监听器设置为我的网格视图。如果发现错误，请纠正我。

例如：

```
final GridView g = (GridView) findViewById(R.id.myGrid);
        g.setAdapter(new ImageAdapter(this));
        EndlessScrollListener scrollListener=new EndlessScrollListener(g,new RefreshList() {

            @Override
            public void onRefresh(int pageNumber) {
                System.out.println("On Refresh invoked..");

            }
        });
        g.setOnScrollListener(scrollListener); 
```

///////////////////////////////////////// /////////////////////

```
import android.widget.AbsListView;
import android.widget.AbsListView.OnScrollListener;
import android.widget.GridView;

public class EndlessScrollListener implements OnScrollListener {

    private GridView gridView;
    private boolean isLoading;
    private boolean hasMorePages;
    private int pageNumber=0;
    private RefreshList refreshList;
    private boolean isRefreshing;

    public EndlessScrollListener(GridView gridView,RefreshList refreshList) {
        this.gridView = gridView;
        this.isLoading = false;
        this.hasMorePages = true;
        this.refreshList=refreshList;
    }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
        if (gridView.getLastVisiblePosition() + 1 == totalItemCount && !isLoading) {
            isLoading = true;
            if (hasMorePages&&!isRefreshing) {
                isRefreshing=true;
                refreshList.onRefresh(pageNumber);
            }
        } else {
            isLoading = false;
        }

    }

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {

    }

    public void noMorePages() {
        this.hasMorePages = false;
    }

    public void notifyMorePages(){
        isRefreshing=false;
        pageNumber=pageNumber+1;
    }

    public interface RefreshList {
        public void onRefresh(int pageNumber);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T22:28:55.517

好吧，要从字面上使用与 中使用的相同技术`EndlessAdapter`，您可以将 N 个项目添加到网格中，其中 N 是您的列数。

另一种方法是检测用户何时在底部附近滚动，然后启动后台工作以加载更多内容。我没有方便的链接，但是我所看到的使用 an`OnScrollListener`来检测您的滚动位置，因为它发生了变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T17:41:23.627

使用这样的相对布局并处理 onscroll 侦听器中的可见性

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <GridView
        android:id="@+id/myGrid"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:columnWidth="60dp"
        android:gravity="center"
        android:horizontalSpacing="10dp"
        android:numColumns="auto_fit"
        android:padding="10dp"
        android:stretchMode="columnWidth"
        android:verticalSpacing="10dp" />

    <View
        android:id="@+id/footer"
        android:layout_width="match_parent"
        android:layout_height="20dp"
        android:layout_alignBottom="@+id/myGrid"
        android:background="@android:color/white" />

</RelativeLayout 
```

>

# jquery - blueImp 从现有表单上传

> ID：10923037
> 
> 赞同：0
> 
> 时间：2012-06-06T22:10:59.500
> 
> 标签：jquery, file-upload, blueimp

我正在尝试让 blueimp 从表单中上传。在下面的示例中，当我从文件输入标记调用 FileUpload 时，它按预期工作。当我将它分配给表单标签时，它失败了。

```
<form id="fileupload" method="POST" enctype="multipart/form-data">
  <input id="file_upload" type="file" name="files[]" />
  <input type="text" name="test"/>
  <input type="submit" name="submit" value="submit"/>
</form>

<script language="Javascript">
$(document).ready(function() {
  $('#file_upload').fileupload({
    dataType: 'json',
    url: '/test/'
  }); 
});
</script> 
```

我在这里想念什么？

# java - 了解 Java 集合中的 Java 引用

> ID：10923039
> 
> 赞同：0
> 
> 时间：2012-06-06T22:11:07.030
> 
> 标签：java, list, hashmap

我无法理解一些与列表和地图相关的简单代码。以下面的代码为例：

```
public class test {

private Map<Integer, List<String>> myMap ;

public test(){
    myMap = new HashMap<Integer, List<String>>();
}

public void addToMap(String ss){

    List<String> myTemp = myMap.get(ss);
    Random  r = new Random();
    if(myTemp == null){

        myTemp = new ArrayList<String>();
        myMap.put(r.nextInt(100), myTemp);
    }

    myTemp.add(ss);

}

public Map<Integer, List<String>> getMap1(){
    return myMap;
}

public  static void main(String args[]){

    test myTest = new test();
    myTest.addToMap("abdc");
    myTest.addToMap("eeer");
    System.out.println(myTest.getMap1());

}

} 
```

究竟如何`addToMap()`将新元素添加到 mylist 地图。更具体地说，如何`myTemp.add(ss)`将新元素添加到`myMap`when`myTemp`是局部变量并在执行完成后被删除。而且，`myTemp.add(ss)`从`addToMap()`方法中删除在main方法中打印出一个空的HashMap，这是为什么呢？put 方法在 add 方法之前执行时如何将元素插入到 map 中？谢谢。

编辑：我编辑了代码以使其更有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T22:17:10.467

与 C++ 不同，在 Java 中，所有变量都是对真实对象的**引用。**所以，当你这样做

```
myTemp = new Object(); 
```

您在堆中创建一个对象，该对象的引用被复制到堆栈变量 myTemp。如果将引用添加到列表（或其他变量）中，则会在此处添加引用的副本。

一旦 myTemp 被销毁，该对象将继续存在。例外情况是对对象的所有引用都消失了；然后代码无法访问该对象，垃圾收集可以（但不是强制）将其从内存中删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T22:19:08.760

`myTemp`不是事物——列表——而是对事物的引用。但这不是您要放入地图的特定参考；它是它所指的事物。地图对事物有自己的引用，因此删除`myTemp`引用不会影响地图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T22:18:03.967

myTemp 是对列表的**引用**。该列表分配在堆内存中，而 myTemp 实际上是存储在堆栈上的指针。每当您退出该函数时，它都会被删除，但在堆内存中分配的内存不会被删除。**当垃圾收集器**没有引用它们时，堆内存中分配的内存会被释放。

你说的对。当您离开 addToMap() 方法时，myTemp 将被释放（实际上它会从堆栈中弹出），但在堆内存空间中分配的列表将保留。使用**new**关键字创建的所有内容都将放置在堆内存空间中。

阅读此链接[Java 参考对象](http://www.kdgregory.com/index.php?page=java.refobj)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T22:23:16.017

从最佳实践的角度来看，将 HashMap 称为“mylist”在许多方面存在问题。它不是正交的，“mylist”并没有告诉你很多关于它的用法。

在回答您的问题时，这是一个简单的情况，如果该项目存在于地图中，则检索它并将字符串添加到其中，如果不存在则创建列表并将其添加到地图中。只要映射在范围内，对添加到其中的任何列表的引用（即使它们是在函数范围内创建的）都保留在范围内。

然而，这根本不是一个有用的例子，因为它混合了它的命名并且没有提供真实世界的用例。

# php - 快速找到一个月中每一天的开放连续时间块

> ID：10923040
> 
> 赞同：3
> 
> 时间：2012-06-06T22:11:12.230
> 
> 标签：php, language-agnostic, time, flood-fill

我正在为一组几个场地开发一个预订可用性系统，并且很难生成给定月份中几天的时间块可用性。这发生在 PHP 的服务器端，但这个概念本身与语言无关——我可以在 JS 或其他任何东西中这样做。

给定一个venue_id、月份和年份（例如6/2012），我有一个在该地点范围内发生的所有事件的列表，表示为unix时间戳`start`和`end`. 该数据来自数据库。我需要确定每天存在什么（如果有）最短长度的连续时间段（每个场地不同）。

例如，在 6 月 1 日下午 2:00 到 7:00 之间我有一个活动。最短时间为 5 小时，因此上午 9 点至下午 2 点和晚上 7 点至 12 点之间有一个街区开放。这将在六月的每一天持续到第二、第三等等。有些（大多数）日子根本没有发生任何事情，有些日子有 1 - 3 个事件。

我想出的解决方案有效，但生成数据也需要很长时间。基本上，我在每个月的每一天循环，并为当天的每 15 分钟创建一组时间戳。然后，我将当天事件的时间跨度循环 15 分钟，将任何“已采取”时间段标记为错误。剩下的，我有一个数组，其中包含空闲时间与所用时间的时间戳：

```
//one day's array after processing through loops (not real timestamps)
array(
  12345678=>12345678,   // <--- avail
  12345878=>12345878,
  12346078=>12346078,
  12346278=>false,      // <--- not avail
  12346478=>false,
  12346678=>false,
  12346878=>false,
  12347078=>12347078,   // <--- avail
  12347278=>12347278
) 
```

现在我需要循环这个数组来找到连续的时间块，然后检查它们是否足够长（每个场地都有一个最小值），如果是，那么为它们的开始和结束建立描述性文本（即上午 9 点 - 下午 2 点） . 哇！当所有这些循环完成时，用户已经厌倦了，并徘徊在 Youtube 上观看小狗的视频；这样检查需要很长时间，大约需要 30 天。

**有没有更快的方法来解决这个问题？**总结这个问题，给定 d 天的时间范围*t1*和*t2*，*我*如何确定*d*中剩余的剩余时间比最小时间块*m*长。

 ***当用户在日历月之间移动时，这些数据通过 AJAX 按需组装。结果是按页面加载缓存的，因此如果用户第二次进入 7 月，第一次生成的数据将被重用。

任何其他有帮助的细节，请告诉我。

* * *

**编辑**

根据请求，数据库结构（或此处相关的部分）

```
*events*
id        (bigint)
title     (varchar)

*event_times*
id        (bigint)
event_id  (bigint)
venue_id  (bigint)
start     (bigint)
end       (bigint)

*venues*
id        (bigint)
name      (varchar)
min_block (int)
min_start (varchar)
max_start (varchar) 
```

事件总是在 15 日开始 -- :00, :15, :30, :45

一些实际时间戳的数据转储：http: [//pastebin.com/k1PRkj44](http://pastebin.com/k1PRkj44)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:13:37.940

这应该会让你朝着正确的方向前进（我希望如此）。它遍历一个时期（例如一个月）内的数据库记录。

从该集合中，它将找到预订之间的“空白”并填充一个数组（以日期为键）。

```
$days = array();

$stmt = $db->prepare('SELECT
    DATE(FROM_UNIXTIME(start)) AS sdate,
    GROUP_CONCAT(HOUR(FROM_UNIXTIME(start)),",", MINUTE(FROM_UNIXTIME(start)) ORDER BY start ASC SEPARATOR ",") AS from_hours,
    GROUP_CONCAT(HOUR(FROM_UNIXTIME(end)), ",", MINUTE(FROM_UNIXTIME(end)) ORDER BY start ASC SEPARATOR ",") AS to_hours
    FROM event_time
    WHERE start >= ? AND end < ? AND start < end
    GROUP BY sdate
    ORDER BY sdate');

$stmt->execute(array($from, $to));
foreach ($stmt->fetchAll(PDO::FETCH_ASSOC) as $row) {
    // from and to are formatted as: [hh,mm,hh,mm,hh,mm,...]
    $from = explode(',', $row['from_hours']);
    $to = explode(',', $row['to_hours']);

    // skew the two arrays:
    // - add 00:00 in the front of $to
    // - add 23:59 at the back of $from
    array_unshift($to, 0, 0);
    array_push($from, 23, 59);

    for ($i = 0, $n = count($from); $i != $n; $i += 2) {
        // create time values
        $start = new DateTime("{$to[$i]}:{$to[$i+1]}");
        $end = new DateTime("{$from[$i]}:{$from[$i+1]}");

        // calculate difference
        $diff = $start->diff($end);
        // difference must be positive and at least 5 hours apart (depending on venue)
        if (!$diff->invert && $diff->h >= 5) {
            $days[$row['sdate']][] = array($start->format('H:i'), $end->format('H:i'));
        }
    }
} 
```

最后，$days 将包含：

```
[2012-06-30] => Array
    (
        [0] => Array
            (
                [0] => 00:00
                [1] => 05:30
            )

        [1] => Array
            (
                [0] => 11:30
                [1] => 23:59
            )

    ) 
```

您应该更改一些变量以进行计算：

1.  最短时间（例如从早上多早）
2.  最长时间（例如直到深夜）
3.  最短预订时间（取决于场地）

此外，结果数组中缺少的键在一整天内都可用，因此您应该`$days`在开始循环之前为您查询期间内的所有日期准备数组。

让我知道这是否对您有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:00:26.187

创建可用时间列表。每个条目都有一个开始时间和一个结束时间。从一个从开始到结束的条目开始。从数据库中读取使用时间。如果一个落在现有条目的开头或结尾，请适当缩短它。如果它落在中间，你必须缩短一个并添加一个新的（覆盖相同的时间但中间有一个间隙）。这使您不必在长达数小时的活动中查看 15 分钟的时段。如果您的插槽变为 5 分钟而不是 15 分钟，它仍然可以工作。

一旦您阅读了数据库，您就会在一个按时间顺序排列的列表中找到所有空闲时间。您可能还希望将它们放在按大小排序的单独列表中。

链表可能是最合乎逻辑的选择，因为您将主要按顺序访问它。它允许快速添加和删除。某种数组应该会更慢，但是现在数组非常快，并且还允许二进制搜索。对于真正大量使用，某种基于树的（用于排序顺序访问）的字典或映射将为您提供两全其美的方法（快速添加和删除*以及*随机访问）。我想在这种情况下*，我*会选择某种数组。

这有点工作，但它可以给你一些真正的速度。***

# ios - 当用户将焦点从文本字段更改为另一个时调用方法（RubyMotion）

> ID：10923041
> 
> 赞同：2
> 
> 时间：2012-06-06T22:11:21.187
> 
> 标签：ios, textfield, first-responder, rubymotion

我正在使用 RubyMotion（之前一直在 Xcode 中编写 Obj C，但现在由于 Ruby 中的 bkgd，我正在与想要使用 RubyMotion 的人合作）

我有一个带有 2 个文本字段的 ViewController。我需要它，以便每当用户从 textfield1 切换到 textfield2 时，如果不满足 textfield1 的条件，就会显示错误标签（为此我使用 self.ErrorLabel.show）。我知道如何编写条件语句，但我真的不知道如何知道用户何时切换到下一个文本字段。

我以为我可以使用：

```
if ([textField1 isFirstResponder] && (textField1 != touch.view))
     log( 'left textfield1' )
end

if ([textField2 isFirstResponder] && (textField2 != touch.view))
     log( 'left textfield2' )

end 
```

从这个问题[Detect UITextField Lost Focus](https://stackoverflow.com/q/6369758/1327809)但没有这样的运气。我知道我正在使用 RubyMotion，所以存在一些差异。

我怎样才能让它工作？我认为我没有使用正确的关键字进行搜索，因为它似乎是开发人员一直在使用的东西，但我没有找到任何结果。

感谢您提供的任何帮助。

更新：我想我将使用这种方法：

```
- (void)textFieldDidEndEditing:(UITextField *)textField 
```

在 RubyMotion 中：def textFieldDidEndEditing( textField )

我使用 log() 确定这确实让我知道用户已从一个文本字段更改为下一个文本字段。我只需要做一些调整，以便我可以指定留下哪个文本字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T23:39:37.517

You need to set the `delegate` of each of your text fields to the view controller class, then implement the `textFieldDidEndEditing` method. Here's a working example:

```
class MyViewController < UIViewController
  attr_accessor :textField1, :textField2

  def viewDidLoad

    @textField1 = UITextField.alloc.initWithFrame([[10, 100], [300, 40]])
    # Customize your text field...
    @textField2 = UITextField.alloc.initWithFrame([[10, 150], [300, 40]])
    # Customize your text field...
    view.addSubview(@textField1)
    view.addSubview(@textField2)

    @textField1.delegate = self
    @textField2.delegate = self
  end

  def textFieldDidEndEditing(textField)
    if textField == @textField1
      puts 'left textField1'
    elsif textField == @textField2
      puts 'left textField2'
    end
  end
end 
```

# jboss - MyBatis 与 JBoss 7.1 Web 应用程序的集成

> ID：10923042
> 
> 赞同：3
> 
> 时间：2012-06-06T22:11:21.720
> 
> 标签：jboss, java-ee-6, cdi, mybatis

是否有人尝试使用 MyBatis 作为 JBoss 7.1 /Java EE6 应用程序的持久性库？

我想知道处理连接、事务、回滚等的最佳方法是什么？

CDI 支持如何？网上看了一下，似乎此时 MyBatis 只支持两个依赖注入（JSR-330）框架，Google Guice 和 Spring。我确实遇到了 CDI Extensions，这可能是值得研究的。

我的想法是让容器处理上述所有内容，但可能很难达到这一点。

任何提示，提示，经验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-08T03:33:18.663

有一个新的 mybatis-cdi 模块。它还没有发布，但是你可以试试快照，它在 github：[https ://github.com/mybatis/cdi](https://github.com/mybatis/cdi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T07:51:25.297

我会创建自己的 CDI bean -`@Produces`用于工厂并`@Inject`获取会话。

这是旧的 iBatis Spring 工厂，它可能是生产者，经过一些更改： [SqlMapClientFactoryBean](http://www.docjar.com/html/api/org/springframework/orm/ibatis/SqlMapClientFactoryBean.java.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T15:25:44.733

根本没有 CDI 支持，但正如你所说，如果你想要 DI 去 Spring 或 Guice。

使用 JBoss，您主要有两个机会： - EJB 3 - Spring

如果使用 EJB 3，事务由它们自动处理。MyBatis 只是忽略事务并让容器提交/回滚。

当使用 Spring 时，MyBatis 使用集成模块 MyBatis-Spring 绑定到 Spring 事务。

# java - 使用 ORMLite for Android 存储在内存数据库中

> ID：10923047
> 
> 赞同：0
> 
> 时间：2012-06-06T22:11:55.420
> 
> 标签：java, android, sqlite, ormlite, sqliteopenhelper

我正在为安卓开发一个应用程序。我有一个 Web 服务，我将在其中进行数据库查询和存储。在应用程序的开头，我想通过 REST 调用从 Web 服务加载某些数据并将其存储在本地数据库中，最好是 ORM。我找到了 ORMLite 并且喜欢它的使用方式，但我想知道如何将数据库存储在内存中，以便在应用程序退出时擦除数据。

当我使用

```
public DatabaseHelper(Context context) {
    super(context, null, null, DATABASE_VERSION,R.raw.ormlite_config);
} 
```

如文档中所述，它会引发 runtimeException。任何有关如何完成此操作或其他方式的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T22:16:53.540

我不认为 Android 数据库 API 支持内存数据库——尽管 SQLite 确实支持它。我也不认为将 H2 之类的东西加载到 Android 上只是为了获得一个内存数据库是没有用的。

我建议您保留数据，然后在每次应用程序启动时擦除数据库。是的，它会做不必要的 IO，但应该不会太糟糕。ORMlite 支持一个[`TableUtils.clearTable()`方法](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/table/TableUtils.html#createTable%28com.j256.ormlite.support.ConnectionSource,%20java.lang.Class%29)。

此外，如果重点不是持久化对象，您可能会考虑*不使用 ORM 并将对象存储在集合中。*

# objective-c - CoreData sqllite 文件大小与存储在其中的图像与 iCloud 总空间之间的差异

> ID：10923051
> 
> 赞同：1
> 
> 时间：2012-06-06T22:12:01.923
> 
> 标签：objective-c, core-data, icloud

我决定尝试将图像作为二进制文件保存到 CoreData 中。它们只是从 2k 到最大 90k 的小图像，我可以说我已经破坏了许多代码行，尤其是那些处理 iCloud 问题的代码。

考虑到 CoreData 是我使用 NSPersistentStoreUbiquitousContentNameKey 等属性放入 iCloud 中的唯一存储，我注意到我的 sqlite 文件实际上大小约为 1.6mb。虽然应用程序本身占用的 iCloud 空间总量（如 iOS 设置中所见）接近 34mb，但我周围没有任何其他文档。

我已经将 NSSQLiteManualVacuumOption 作为选项，所以我想知道是什么导致所有这些空间被占用。可能是事务日志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:26:24.353

您应该使用外部数据引用。

每次更改存储图像的实体时，您都会写出所有图像数据。使用外部数据引用，图像数据将存储为单独的文件，一旦不再引用就可以删除。

# vba - 使用 VBA 选择和突出显示 Excel 行

> ID：10923053
> 
> 赞同：4
> 
> 时间：2012-06-06T22:12:11.137
> 
> 标签：vba, excel, rows, highlight

如何告诉 Excel 按行号突出显示行。例如，假设我想要突出显示第 6、10、150、201 行。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T23:25:13.350

这是另一个基于 Mote 的`.EntireRow.Interior.ColorIndex`

这并不限制您输入行号，而是让用户可以灵活地在运行时选择行。

```
Option Explicit

Sub Sample()
    Dim Ret As Range

    On Error Resume Next
    Set Ret = Application.InputBox("Please select the rows that you would like to color", "Color Rows", Type:=8)
    On Error GoTo 0

    If Not Ret Is Nothing Then Ret.EntireRow.Interior.ColorIndex = 6
End Sub 
```

**跟进**

> 有没有办法编写宏来从列表中读取行号并突出显示行？

是的，有办法。假设单元格 A1 到 A10 中的列表，那么您可以使用此代码

```
Option Explicit

Sub Sample()
    Dim i As Long, sh As Worksheet

    On Error GoTo Whoa

    Application.ScreenUpdating = False

    '~~> Set this to the sheet where the rows need to be colored
    Set sh = Sheets("Sheet2")

    '~~> Change Sheet1 to the sheet which has the list
    With Sheets("Sheet1")
        For i = 1 To 10
            If Not Len(Trim(.Range("A" & i).Value)) = 0 And _
            IsNumeric(.Range("A" & i).Value) Then _
            sh.Rows(.Range("A" & i).Value).Interior.ColorIndex = 3 '<~~ Red
        Next i
    End With

LetsContinue:
    Application.ScreenUpdating = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T22:38:01.337

作为 Motes 答案的替代方案，您可以使用条件格式。

例如：选择 A1:J500，条件格式 >> 新规则 >> 使用公式...

对于公式，请输入：`=OR(ROW()=6, ROW()=10, ROW()=150, ROW()=201)`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-06T22:36:25.993

对于基本的 VBA 代码，您始终可以开始录制宏，执行操作，停止录制，查看生成的代码，然后清理以执行您想要的操作。例如，记录突出显示一行的动作（设置 Interior.Color 的值）为您提供：

```
Rows("13:13").Select
Range("C13").Activate
With Selection.Interior
    .Pattern = xlSolid
    .PatternColorIndex = xlAutomatic
    .Color = 65535
    .TintAndShade = 0
    .PatternTintAndShade = 0
End With 
```

可以删除选择命令和无关的内部属性，从而为您提供：

```
Rows("13:13").Interior.Color = 65535 
```

在行中添加多选：

```
Rows("6:6,10:10,150:150,201:201").Interior.Color = 65535 
```

概括：

*   录制宏
*   查看 Excel 的版本
*   使用/编辑您需要的代码

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-06T22:16:15.510

```
objWB.Cells(rowNum,201).EntireRow.Interior.ColorIndex = 6 
```

ETC

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-17T19:56:50.267

更新：没有意识到这个日期，但我想我会添加这个，因为它与选择的答案相关。

除了 Siddharth Rout 的回答之外，由于我还没有足够的代表发表评论，您可以使用这两行动态计算工作表中有多少行。 `xlCellTypeConstants`可以更改为您需要的另一个 XlCellType 常量，并且始终可以更改范围以适应您的电子表格。

```
Dim numRows As Integer
numRows = Range("A2", Range("A1048576").End(xlUp)).SpecialCells(xlCellTypeConstants).Cells.Count 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-28T19:45:56.023

对不起，如果它不像其他答案那样简洁或优雅，但它可以完成工作。当我为自己的应用程序编写代码时，我需要遍历我的代码。此外，我只需要突出显示部分行，而不是突出显示整行。

```
Sub Highlight()
Dim ThisWB As Workbook
Dim ThisWS As Worksheet
Dim rows(0 To 3) As Integer
Dim test As String

Set ThisWB = ActiveWorkbook
Set ThisWS = ThisWB.Sheets("Sheet1")

rows(0) = 6
rows(1) = 10
rows(2) = 150
rows(3) = 201

For i = 0 To 3
    test = "A" & rows(i) & ":H" & rows(i)
    ThisWS.Range(test).Interior.ColorIndex = 15
Next i

End Sub 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-05T14:43:35.113

您也许可以使用条件格式来实现相同的目的

*   将值列表放在一列中（我使用单独的选项卡并为列表命名）
*   在条件格式下-新规则-“使用公式确定要格式化的单元格”
*   阅读这篇文章[http://www.howtogeek.com/howto/45670/how-to-highlight-a-row-in-excel-using-conditional-formatting/](http://www.howtogeek.com/howto/45670/how-to-highlight-a-row-in-excel-using-conditional-formatting/)
*   该规则在公式中使用 vlookup - =$A2=VLOOKUP($A2,list,1,FALSE)

# android - Android ndk-build 命令什么都不做

> ID：10923057
> 
> 赞同：1
> 
> 时间：2012-06-06T22:12:34.733
> 
> 标签：android, android-ndk, cygwin

我有一个与此处发布的类似的问题：

[Android NDK：为什么 ndk-build 不在 Eclipse 中生成 .so 文件和新的 libs 文件夹？](https://stackoverflow.com/questions/9159957/android-ndk-why-ndk-build-doesnt-generate-so-file-and-a-new-libs-folder-in-ec)

...虽然我运行的是 Windows 7，而不是 Mac 操作系统。基本上运行 ndk-build 命令，没有给出错误，但没有创建 .so 文件（另外，因为我在 Windows 上，这应该创建一个 .dll 而不是 .so？）。我尝试从 root、jni、src 文件夹等运行命令，但得到了相同的结果；cmd 几秒钟后才返回提示符。我使用 NDK_LOG=1 参数从 jni 文件夹再次运行它以查看发生了什么。这是在 jni 文件夹中运行 ndk-build 后（成功识别平台后等）后的部分日志结果记录...

Android NDK：在 /workspace/NdkFooActivity/jni 中
寻找 jni/Android.mk Android NDK：在 /workspace/NdkFooActivity 中寻找 jni/Android.mk
Android NDK：找到了！
Android NDK：找到项目路径：/workspace/NdkFooActivity
Android NDK：输出路径：/workspace/NdkFooActivity/obj
Android NDK：解析/cygdrive/c/android-ndk-r8/build/core/default-application.mk
Android NDK：在 /workspace/NdkFooActivity/project.properties 中找到 APP_PLATFORM=android-15
Android NDK：应用程序本地目标未知平台 'android-15'
Android NDK：切换到 android-14
Android NDK：使用构建脚本 /workspace/NdkFooActivity/jni/Android .mk
Android NDK：应用程序“本地”不可调试
Android NDK：选择发布优化模式（应用程序不可调试）
Android NDK：添加导入目录：/cygdrive/c/android-ndk-r8/sources
Android NDK：为 ABI 'armeabi' 构建应用程序'local'
Android NDK：使用目标用于“armeabi”ABI
Android NDK 的工具链“arm-linux-androideabi-4.4.3”：寻找带有标签“cxx-stl/system”的导入模块
Android NDK：探测 /cygdrive/c/android-ndk-r8/sources/ cxx-stl/system/Android.mk
Android NDK：在 /cygdrive/c/android-ndk-r8/sources/cxx-stl/system 中找到
Android NDK：Cygwin 依赖文件转换脚本：

...之后它只运行最后一行中提到的脚本，然后终止。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T22:57:05.250

设置生成器。有关如何执行此操作，请参阅以下文章：

[http://maxters.net/2011/02/android-ndk-builder-for-eclipse-in-windows/](http://maxters.net/2011/02/android-ndk-builder-for-eclipse-in-windows/)

从 NDK r8 开始有一个“小”变化——不再需要 Cygwin，我在使用 Cygwin 和 NDK r8 构建本机库时遇到了麻烦——有一些关于 cxx-stl 的错误消息...

上面链接中的几乎所有内容都可以，但将主选项卡中的参数留空并将位置更改为：

```
${env_var:ANDROID_NDK_ROOT}/ndk-build.cmd 
```

我使用系统变量 path `ANDROID_NDK_ROOT`，但您可以提供 ndk-build.cmd 的完整路径。此外，无需在“环境”选项卡中设置任何变量。

以这种方式设置您的构建器，您会没事的。

请注意，Android 构建在 Linux 操作系统之上，因此即使您使用的是 Windows，您也将获得带有 .so 扩展名的 Linux 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-04T09:40:16.433

以下链接具有指导意义，但如果您在 CDT 已弃用（已于 2017 年夏季）之后在 Eclipse 中配置 NDK 支持，则缺少详细信息。

[http://maxters.net/2011/02/android-ndk-builder-for-eclipse-in-windows/](http://maxters.net/2011/02/android-ndk-builder-for-eclipse-in-windows/)

您需要在哪里配置外部构建器位置，而不是指向 cygwin\bin\bash.exe 并将您的 ndk-build.cmd 位置添加为参数，这对我在 Windows 7 和 10 上有效。

在外部构建器的“编辑配置”对话框中，执行以下操作： - 对于位置 -> 指定“ndk-build.cmd”的位置。即“D:\Android\NDK\ndk-build.cmd” - 用于参数 -> 只需指定“全部”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T22:36:03.210

NDK 构建系统依赖通配符来查找要编译的源。如果您在某处有错误的路径，它将找不到任何来源并且什么也不做。非常仔细地检查 Android.mk。除非您发布 Android.mk 和源代码树的描述，否则无法说更多。

# android - Android-org.xmlpull.v1.XmlPullParserException: Unexpected token (position:TEXT

> ID：10923059
> 
> 赞同：2
> 
> 时间：2012-06-06T22:12:41.030
> 
> 标签：android

大家好，我正在使用 Android 中的 WebService。我试图将数据发送到 WebService。作为回应，我收到了这个警告。

```
06-06 18:50:50.830: W/Response String is=(6930): n--uuid:8787683b-c7db-4abc-abbe-2042ff4877be+id=1nContent-ID: <http://tempuri.org/0>nContent-Transfer-Encoding: 8bitnContent-Type: application/xop+xml;charset=utf-8;type="text/xml"nn<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><CreateNewCaseResponse xmlns="http://www.ci.tenmind.va.us/CORServices/tenmindAuditorHotlineService/2011/08/AuditorHotlineService"><CreateNewCaseResult xmlns:a="http://www.ci.tenmind.va.us/CORServices/2011/08/AuditorHotlineService" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><a:CaseId>be140e83-bd1a-4134-a5e9-097a1d8dd654</a:CaseId><a:CaseNumber>2012060005</a:CaseNumber><a:ErrorMsg/><a:PassCode>Pw2f3MEg9</a:PassCode></CreateNewCaseResult></CreateNewCaseResponse></s:Body></s:Envelope>n--uuid:8787683b-c7db-4abc-abbe-2042ff4877be+id=1—n 
```

当我尝试解析上面的字符串时，我得到了这个异常：

```
06-06 15:43:17.441: W/System.err(13064): org.xmlpull.v1.XmlPullParserException: Unexpected token (position:TEXT 
06-06 15:43:17.445: W/System.err(13064): --uuid:ac00e661...@3:13 in java.io.InputStreamReader@4132afb0) 
06-06 15:43:17.465: W/System.err(13064):    at org.xmlpull.v1.sax2.Driver.parse(Driver.java:331)
06-06 15:43:17.476: W/System.err(13064):    at com.vensi.api.parser.XMLParser.fromXML(XMLParser.java:75)
06-06 15:43:17.484: W/System.err(13064):    at com.vensi.api.parser.XMLParser.fromXML(XMLParser.java:54)
06-06 15:43:17.484: W/System.err(13064):    
at org.tenmind.HttpPostConnection$Communicator.run(HttpPostConnection.java:468) 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2015-09-16T03:35:50.717

Android 的文件格式是“UTF-8 without BOM”

# javascript - 背景位置：固定

> ID：10923063
> 
> 赞同：0
> 
> 时间：2012-06-06T22:13:02.213
> 
> 标签：javascript, jquery, html, css

您好，我在 CSS 中的固定背景有一点问题。我需要把它固定在左下角。

[http://i.imgur.com/Y1gKd.jpg](http://i.imgur.com/Y1gKd.jpg)

```
background: url('./images/coura.png') no-repeat fixed;
width: 451px;
height: 736px;
position: fixed;
background-attachment: left bottom; 
```

有什么办法吗？谢谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T22:13:53.430

您的元素需要位于您希望背景所在的位置。添加`left: 0px; bottom: 0px;`到固定定位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T22:32:45.617

最简单的解决方案是将图像设置`background-image`为您的`body`并将`background-attachment`属性设置为`fixed`：

```
html, body { height: 100%; }
body { background: url('./images/coura.png') 0 100% no-repeat fixed; } 
```

[http://jsfiddle.net/Wexcode/FEskF/](http://jsfiddle.net/Wexcode/FEskF/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T22:43:41.147

另一种方法是将背景位置设置为`bottom left`：

`background: url('./images/coura.png') bottom left no-repeat fixed;`

# iphone - 隐藏 Three20 导航栏返回项

> ID：10923064
> 
> 赞同：0
> 
> 时间：2012-06-06T22:13:07.780
> 
> 标签：iphone, ios, three20

我是 Three20 世界的新手，我试图隐藏导航栏中的后退/左按钮。

下面是我调用隐藏它的方法：

```
[[TTNavigator navigator].topViewController.navigationController.navigationItem setLeftBarButtonItem:nil animated:YES];

[[TTNavigator navigator].topViewController.navigationController.navigationItem setHidesBackButton:YES animated:YES]; 
```

显然，这两种方法都不会隐藏后退按钮。我在这里尝试做的是，按下视图控制器，当新控制器到达时它不显示后退按钮，但我有另一个按钮弹出视图。

我也尝试过不同的路线：

```
[VC.navigationController.navigationItem setHidesBackButton:Yes]; 
```

有趣的是我将标题设置为：

```
[VC.navigationItem setTitle:@"Options"]; 
```

这里的任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T22:38:49.940

在这里试试：[糟糕的 iOS API – UINavigationController](http://rafaelsteil.com/2011/07/23/crappy-ios-apis-uinavigationcontroller/)

请注意，Rafael 在新控制器中执行此操作，**而不是**在执行推送的控制器中。

```
self.navigationItem.hidesBackButton = YES; 
```

这个对我有用。戴夫

# javascript - 在 Array 原型中使用 array.splice

> ID：10923071
> 
> 赞同：0
> 
> 时间：2012-06-06T22:13:52.267
> 
> 标签：javascript

```
Array.prototype.move = function(oldIndex, newIndex) {
    var val = this.splice(oldIndex, 1);
    this.splice(newIndex, 0, val[0]);
}

//Testing - Change array position
var testarray = [1, 2, 3, 4];
testarray.move(3, 0);
console.log(testarray); 
```

这会产生错误“this.splice is not a function”，但它会返回所需的结果。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:52:11.123

```
Array.prototype.move = function(oldIndex, newIndex) {
    if(Object.prototype.toString.call(this) === '[object Array]') {
        if(oldIndex && typeof oldIndex == 'number' && newIndex && typeof newIndex == 'number') {
            if(newIndex > this.length) newIndex = this.length;
            this.splice(newIndex, 0, this.splice(oldIndex, 1)[0]);
        }
    }
}; 
```

出于某种原因，该函数被加载时的文档调用（仍然没有完全弄清楚）。我添加了一些检查来验证 this = 一个数组，然后如果提供的 int 大于总长度，则还将新索引重置为等于总大小。这解决了我遇到的错误问题，对我来说是在数组中移动对象的最简单方法。至于为什么调用onload函数一定是和我的代码有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T00:18:00.937

您不需要占位符变量-

```
Array.prototype.move = function(oldIndex, newIndex) {
       this.splice(newIndex, 0, this.splice(oldIndex, 1)[0]);
}
var a=[1,2,3,4,9,5,6,7,8];
a.move(4,8);

a[8]
/*  returned value: (Number)
9
*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T00:44:02.063

如果您的代码必须在任意环境中工作，那么向内置对象添加属性并不是一个好主意。如果您确实扩展了此类对象，则不应使用其他人可能会使用的属性名称来做相同或类似的事情。

似乎有不止一种方法可以“移动”一个成员，你似乎在做的事情可以更好地命名为“交换”，所以：

```
if (!Array.prototype.swap) {
  Array.prototype.swap = function(a, b) {
    var t = this[a];
    this[a] = this[b];
    this[b] = t; 
  }
} 
```

我希望简单地重新分配值比调用需要创建新数组并多次修改旧数组的方法更有效。但无论如何，这可能没有实际意义。上面的内容当然更容易阅读，并且输入的字符更少。

另请注意，以上是稳定的，`array.swap(4,8)`给出与 相同的结果`array.swap(8,4)`。

如果你想创建一个健壮的函数，你首先需要弄清楚在任何一个索引大于 array.length 或者一个不存在的情况下该怎么做，等等。例如

```
var a = [,,2]; // a has length 3
a.swap(0,2); 
```

在上面，没有成员在 0 或 1，只有在 2。所以结果应该是：

```
a = [2]; // a has length 1 
```

或者应该是（这将是上述结果）：

```
a = [2,,undefined]; // a has length 3 
```

或者

```
a = [2,,,]; // a has length 3 (IE may think it's 4, but that's wrong) 
```

### 编辑

请注意，在 OP 中，结果为：

```
var b = [,,2];
b.move(0,2); 
```

是

```
alert(b); // [,2,]; 
```

这可能不是预期的，并且

```
b.move(2,0);
alert(b); // [2,,]; 
```

所以它也不稳定。

# c++ - C ++二进制操作数无效

> ID：10923079
> 
> 赞同：1
> 
> 时间：2012-06-06T22:14:32.407
> 
> 标签：c++, operands

我是 C++ 的初学者，我遇到了这段代码的问题，它应该在 Superbowl 决赛期间显示分数：

```
#include <iostream>

enum POINTS { EXTRA_POINT = 1, SAFETY = 2, FIELD_GOAL = 3, TOUCHDOWN =6 };

unsigned short giantsScore = 0, patriotsScore = 0;

int main()
{
std::cout << " Giants: " << giantsScore << "\n";
std::cout << " Patriots: " << patriotsScore << "\n\n";

std::cout << " Giants: " << giantsScore = giantsScore + SAFETY << "\n";
std::cout << " Patriots: " << patriotsScore << "\n\n"; 

std::cout << " Giants: " << giantsScore = giantsScore + TOUCHDOWN + EXTRA_POINT << "\n";
std::cout << " Patriots: " << patriotsScore << "\n\n";

std::cout << " Giants: " << giantsScore << "\n";
std::cout << " Patriots: " << patriotsScore = patriotsScore + FIELD_GOAL << "\n\n";

std::cout << " Giants: " << giantsScore << "\n";
std::cout << " Patriots: " << patriotsScore = patriotsScore + TOUCHDOWN + EXTRA_POINT << "\n\n";

std::cout << " Giants: " << giantsScore << "\n";
std::cout << " Patriots: " << patriotsScore = patriotsScore + TOUCHDOWN + EXTRA_POINT  << "\n\n";

std::cout << " Giants: " << giantsScore = giantsScore + FIELD_GOAL << "\n";
std::cout << " Patriots: " << patriotsScore << "\n\n";

std::cout << " Giants: " <<  giantsScore = giantsScore + FIELD_GOAL << "\n";
std::cout << " Patriots: " << patriotsScore << "\n\n";

std::cout << " Giants: " << giantsScore << "\n";
std::cout << " Patriots: " << patriotsScore = patriotsScore + FIELD_GOAL + EXTRA_POINT  << "\n\n";

return 0;
} 
```

忽略这很不优雅，当我通过编译器 G++ 运行它时，我收到错误消息

> 错误：'int'和'const char [2]'类型的无效操作数到二进制'operator<<'

如果我删除常量并将它们添加到 each 之前`std::cout`，那么它运行良好。我只是想知道为什么我不能在每个输出行中添加常量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T22:20:54.603

您的错误消息指出： `int << char`，这当然是一个奇怪的操作。

这是因为运营商的优先级。

每个运算符都有一个优先级，这意味着它将在评估其他运算符之前或之后进行评估。

`+`之前评估`=`

并`<<`应在达到其最初目的后`=`进行评估。`cout<<"stuff"`

`<<`最初是位移运算符（仍然是），所以这就是您遇到这种奇怪行为的原因。添加括号，你会很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T22:24:59.963

查看[http://cs.smu.ca/~porter/csc/ref/cpp_operators.html](http://cs.smu.ca/~porter/csc/ref/cpp_operators.html)以了解运营商优先级规则的概述。当你写这个：

```
std::cout << " Patriots: " << patriotsScore = patriotsScore + FIELD_GOAL + EXTRA_POINT  << "\n\n"; 
```

然后根据优先级规则，+运算符将首先执行，给你这个：

```
std::cout << " Patriots: " << patriotsScore = result  << "\n\n"; 
```

然后执行 << 运算符，这也意味着 `result << "\n\n"。但是这个运算符没有定义在 int 和 char[2] 之间。

要解决您的问题，请在赋值操作周围加上括号，如下所示：

```
std::cout << " Patriots: " << (patriotsScore = patriotsScore + FIELD_GOAL + EXTRA_POINT)  << "\n\n"; 
```

# python - python id3标签unicode

> ID：10923086
> 
> 赞同：1
> 
> 时间：2012-06-06T22:15:04.740
> 
> 标签：python, mp3, metadata, id3

我有一个带有我的艺术家标签的 mp3 俄语。所有英文元数据都正常打印，但俄文显示为问号。如何强制模块使用 unicode 或 utf8 编码？

Python

```
from ID3 import *
import glob
import re
import os
for name in glob.glob('*.mp3'):
  id3info = ID3(name)
  print id3info 
```

我正在使用这个库：http: [//id3-py.sourceforge.net/](http://id3-py.sourceforge.net/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T22:23:02.350

您不能在 ID3v1 中执行 Unicode，并且该模块仅执行 ID3v1（甚至无法正确执行）。

如果您明确尝试为某些仅 ID3v1 的应用程序标记您的文件，那么您确实需要弄清楚如何欺骗该应用程序读取俄语字符。这很可能是不可能的。但如果不是，那么您可以通过手动预处理字符串来欺骗您的 ID3v1 库输出会欺骗您的应用程序的字符串。

但是，如果您尝试为任何现代应用程序标记您的文件，只需使用 Mutagen、Stagger、PyTagLib 或其他不会过时的东西。他们都会在 ID3v2 标签中导出有效的 Unicode，并尽可能使用 ID3v1 标签（这通常不是很好，但通常没关系）。

# javascript - javascript缺少声明问题

> ID：10923091
> 
> 赞同：0
> 
> 时间：2012-06-06T22:15:22.057
> 
> 标签：javascript, jquery

我正在尝试根据提供的值计算表格，我已经编写了脚本，但它说缺少；声明之前

这是我的代码，如果有人可以看到错误，请帮助指出。

```
 <script type="text/javascript">
       function calc(theForm) {
       var myEquip1 = document.Edit.EQup1.value;
       var myEquip2 = document.Edit.EQup2.value;
       Var myFixedPrice = document.Edit.InitialPrice.value;
       Var myEquip1Price = document.Edit.EQup1Price.value;
       Var myEquip2Price = document.Edit.EQup2Price.value;

     if  (myEquip1 > 1)
     {
    var myEquip1Total = (myEquip1*myEquip1Price) - (myEquip1Price);
     }
else
 {
    var myEquip1Total = (myEquip1*myEquip1Price)-(myEquip1Price);
      }
     if  (myEquip2 > 1)
      {
    var myEquip2Total = (myEquip2*myEquip2Price)-(myEquip2Price);
      }
else
      {
    var myEquip2Total = (myEquip2*myEquip2Price)-(myEquip2Price);
}
    theForm.GrandTotal.value = (myEquip2Total+myEquip1Total+myFixedPrice)
    }
    </script> 
```

HTML 在下面我确定我做错了什么，但我可以看到它。

```
 <form name="Edit" method="post" action="mypageprocess">
<p><label for="EQup1">How many Branches?</label><br />
<select name="EQup1" onChange="calc(this.form)" id="EQup1"/>    
        <option value="0">Please select</option> 
        <option value="1" >One</option>
        <option value="2" >Two</option>
        <option value="3" >Three</option>
        <option value="4" >Four</option>
        <option value="5" >Five</option>
        </select> &nbsp;&nbsp; x <strong>$550.00</strong>
</p> 
<p><label for="EQup2">How many Satellits?</label><br />
<select name="EQup2" onChange="calc(this.form)" id="EQup2"/>    
        <option value="0">Please select</option> 
        <option value="1" >One</option>
        <option value="2" >Two</option>
        <option value="3" >Three</option>
        <option value="4" >Four</option>
        <option value="5" >Five</option>
        </select> &nbsp;&nbsp; x <strong>$440.00 </strong>
</p> 

<input type="text" onfocus="this.blur();" name="GrandTotal" size="10" readonly="readonly"/>
        <input type="hidden" name="InitialPrice" value="660" />
        <input type="hidden" name="EQup1Price" value="550" />
        <input type="hidden" name="EQup2Price" value="440" />
    </form> 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T22:17:02.493

JavaScript 区分大小写。`Var`行不通，`var`用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T22:22:16.963

您的两个`<select>`元素都被过早关闭，就好像它们没有内部内容一样。

# c# - VolumeMute KeyPress - 处理后无法取消事件

> ID：10923095
> 
> 赞同：0
> 
> 时间：2012-06-06T22:15:51.650
> 
> 标签：c#, keypress, keydown

我有通过 KeyDown 和 KeyPress 事件监视击键的 C# 应用程序。具体来说，它会监视 VolumeMute 击键（来自手持设备）以进行一些特殊处理。它可以很好地解决一个问题：Windows 似乎拦截了 VolumeMute 击键并使系统音量静音（我不想发生这种情况）。我认为 Windows 在我的应用程序处理按键之前会拦截按键，因为即使我发出按键已处理的信号（e.Handled = true），它仍然会静音系统音量。顺便说一句，相同的代码非常适用于我正在捕捉的其他击键（例如 Backspace 等）。

有没有办法阻止 Windows 执行此音量静音？

系统：WinXP SP3、.Net 4 客户端配置文件、Windows 窗体应用程序

代码片段

```
 bool keyHandled = false;

    private void Form1_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (keyHandled)
        {
            e.Handled = true;
        }
    }
    // =====================================
    private void Form1_KeyDown(object sender, KeyEventArgs e)
    {
        keyHandled = false;

        switch (e.KeyCode)
        {

            case Keys.VolumeMute:
                DoSpecialProcessing(); 
                keyHandled = true;
                break;
            default:

                break;
        }

        e.Handled = keyHandled;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:03:53.073

好的。我最终使用 AutoHotKey 将 VolumeMute 重新映射到另一个键。重要的是，Windows 在重新映射之前从未看到 VolumeMute 击键并且不会静音。所以我可以在需要的时候启动这个 AutoHotKey 重映射脚本。Beats 弄乱了 Windows 注册表。感谢您的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T00:57:23.140

该按钮就像一个切换按钮，它会在第一次按下时静音，在下一次按下时“取消静音”。您只需要再次模拟 VolumeMute 按下即可。

这个[答案](https://stackoverflow.com/questions/4774768/c-sharp-simulate-volumemute-press)解释了如何做到这一点。

注意：如果您从 KeyDown 处理程序内部调用此方法，那么您可能需要使用 BeginInvoke 或 PostMessage 将消息发布到消息队列并立即返回以避免竞争条件。

# javascript - 使用 javascript 或 jQuery 隐藏所有带有与数字“0”或自定义值匹配的文本或 innerHTML 的“a”元素

> ID：10923102
> 
> 赞同：3
> 
> 时间：2012-06-06T22:16:35.720
> 
> 标签：javascript, jquery, html, match, innerhtml

我需要使用 javascript 或 jQuery 隐藏所有`<a>`带有文本或`innerHTML`匹配数字“foo”或自定义值的元素。

```
<li><a href="#" class="dir">foo</a></li> 
```

我努力了

```
jQuery(document).ready(function() {
    if (jquery().text().html("foo"){
        ('li >a').fadeOut()
    }
}); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-06T22:18:40.240

```
$('a:contains(foo)').hide(); 
```

完毕。

或者：

```
var customValue = "foo"
$('a').filter(function(){
    return this.innerHTML === customValue;
}).fadeOut(); 
```

使用后一个选项，您可以自定义更多，例如：

```
var customValue = "foo"
$('a').filter(function(){
    return this.innerHTML === customValue &&
           $(this).closest('div').length;
}).fadeOut(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T22:29:32.993

一种方法，假设您正在搜索的文本*正是*您使用的字符串，[无耻地从向] [Jonathan Sampson](http://sampsonblog.com/279/creating-your-own-custom-jquery-filters)**致敬中** 窃取：

创建`:exactly`选择器：

```
$.extend($.expr[":"], {
    exactly: function( element, index, details, collection ){
        return $(element).text() === details[3];
    }
}); 
```

像这样使用：

```
$('a:exactly("foo")').fadeOut(); 
```

参考：

*   乔纳森·桑普森：
    *   `:exactly()`选择器的博客条目：http: [//sampsonblog.com/279/creating-your-own-custom-jquery-filters](http://sampsonblog.com/279/creating-your-own-custom-jquery-filters)
    *   提示创建的 Stack Overflow 问题`:exactly()`：[是否有任何选择器可以完美匹配文本？](https://stackoverflow.com/q/10821326/82548)

# c# - 在启动画面上加载组件

> ID：10923105
> 
> 赞同：1
> 
> 时间：2012-06-06T22:16:43.700
> 
> 标签：c#, winforms

这可能是一个原始问题，但我真的很想获得更多信息。我见过许多专业程序有一个启动画面，在此期间有一个进度条和一些指示程序正在加载的文本......

我想知道在这段时间内可以或应该加载什么？他们加载类还是什么？我是菜鸟，不知道在程序实际启动之前需要加载什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T22:23:18.007

好吧，这取决于程序。当我的游戏随机生成可能需要 1 秒到 2 分钟的地形时，我会使用加载屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T22:25:42.740

总而言之，是的。他们加载类。

如果程序的设计足够模块化，外壳可以足够小，几乎可以立即在大多数设备上运行（这里想想手机），并在后台加载行为（外部模块提供的功能、C# 中的[程序集](http://msdn.microsoft.com/en-us/library/ms173099.aspx)）时显示进度条.

但是，这并不总是程序加载的最佳方法。如果您的用户界面可以在典型的客户端计算机上启动并运行不到五秒钟，那么它甚至可能不值得一个进度条。

# sqlite - 在 sqlite3 where 子句中使用列别名

> ID：10923107
> 
> 赞同：4
> 
> 时间：2012-06-06T22:16:50.147
> 
> 标签：sqlite, alias, sql

我知道在 oracle/mysql/sqlserver`select`语句中，您无法在`where`子句中引用列别名，因为它在 之前执行`select`，但它在 sqlite3 中有效：

```
sqlite> create table t (c1 text, c2 text);
sqlite> insert into t values ("a1", "a2");
sqlite> insert into t values ("b1", "b2");
sqlite> select c1, c2 from t;
a1|a2
b1|b2
sqlite> select c1, c2 as alias_c2 from t where alias_c2='b2';
b1|b2 
```

为什么这在 sqlite 中是可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T22:25:18.953

所以，从文档

> 标准 SQL 不允许您在 WHERE 子句中引用列别名。施加此限制是因为在执行 WHERE 代码时，可能尚未确定列值。

但电流`SQLite`允许它

> SQL 标准，列别名可以在 ORDER BY、GROUP BY 和 HAVING 子句中引用。作为扩展，SQLite 还允许它们在 WHERE 和 JOIN ON 子句中使用，但同样，这种用法是非标准的（尽管有时非常方便）。标准和 SQLite 实现都不允许在 SELECT 子句中引用别名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T05:45:57.927

使用`SQLITE_DEBUG`启用标志的 sqlite3：

```
sqlite> create table x (x1 integer);
sqlite> insert into x values (1);
sqlite> insert into x values (2);
sqlite> insert into x values (3);
sqlite> insert into x values (4);
sqlite> insert into x values (5);
sqlite> pragma vdbe_listing=1;
VDBE Program Listing:
   0 Expire           0    0    0      00 
   1 Halt             0    0    0      00 
sqlite> select x1*x1 as s from x where s>-10 and s>-9 and s>0 and s>-4 and s>2;
VDBE Program Listing:
   0 Trace            0    0    0      00 
   1 Integer        -10    1    0      00 
   2 Integer         -9    2    0      00 
   3 Integer          0    3    0      00 
   4 Integer         -4    4    0      00 
   5 Integer          2    5    0      00 
   6 Goto             0   26    0      00 
   7 OpenRead         0    3    0 1    00 x
   8 Rewind           0   24    0      00 
   9 Column           0    0    7      00 x.x1
  10 Multiply         7    7    6      00 
  11 Le               1   23    6      6A 
  12 Multiply         7    7    6      00 
  13 Le               2   23    6      6A 
  14 Multiply         7    7    6      00 
  15 Le               3   23    6      6A 
  16 Multiply         7    7    6      00 
  17 Le               4   23    6      6A 
  18 Multiply         7    7    6      00 
  19 Le               5   23    6      6A 
  20 Column           0    0    6      00 x.x1
  21 Multiply         6    6    9      00 
  22 ResultRow        9    1    0      00 
  23 Next             0    9    0      01 
  24 Close            0    0    0      00 
  25 Halt             0    0    0      00 
  26 Transaction      0    0    0      00 
  27 VerifyCookie     0    4    0      00 
  28 TableLock        0    3    0 x    00 
  29 Goto             0    7    0      00 
s   
----
4   
9   
16  
25  
sqlite> 
```

从上面的指令堆栈中可以看出，行上的循环（第 8-23 行）对子句中的每个表达式重复`Multiply`and`Le`命令`where`，对于表中的每一行。

因此，为了回答我自己的问题，sqlite 引擎能够通过`select`在执行时替换它们的定义来使用列别名`where`。

# phpmyadmin - 为 MySQL 表或列添加或更改注释？

> ID：10923111
> 
> 赞同：15
> 
> 时间：2012-06-06T22:17:06.090
> 
> 标签：phpmyadmin

我正在使用 phpMyAdmin `3.5.1`。我完成了所有必要的安装和配置步骤（创建了特殊的`phpmyadmin`数据库和表，设置了`pma`用户等）。我的 phpMyAdmin 似乎表明一切都设置正确。

我的问题是我看不到如何向表格或特定列添加评论。哪里是？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-06T22:42:58.580

表格注释位于“操作”选项卡中；列评论是通过编辑列。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-28T12:33:13.010

快速参考或清单（适用于 phpMyAdmin 版本`4.0.1`）：

a) 表格注释：

*   创建新表时：列下列表、`Table comments`字段、旁边`Storage Engine`、

*   更改现有表的注释时：`Operations > Table options > Table comments`。

b) 列注释：始终作为添加/更改列视图中的最后一列 ( `Comments`)。

请注意，虽然列的评论长度不受限制（无论如何都非常长；设法添加带有`2000`字符的评论），但表格的评论长度仅限于 60 个字符（不是很多）。我不知道，这个限制是从哪里来的（MySQL 或 phpMyAdmin），但它肯定很奇怪，应该被替换——在大多数情况下，你必须为整个表写比一列更多的评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-30T05:54:33.607

@trejder 的答案非常适合 phpMyAdmin。对于在**MySQL Workbench中查找****表注释**的任何人：创建或编辑表时，单击最右上角表名称和架构旁边的向下箭头，您可以在此处查看/编辑注释。

 **[![在此处输入图像描述](../Images/c32117e2722daea02ba32b47eb9a8f32.png)](https://i.stack.imgur.com/xQXUi.png)

您也可以通过右键单击表格 > 表格检查器来查看评论，您会在底部找到它。

[![在此处输入图像描述](../Images/5305136e06892a246124ee26cedf8cbe.png)](https://i.stack.imgur.com/cVTb9.png)**

# macos - IOBluetooth 事件委托仅在不需要的 NSRunLoop 中执行

> ID：10923112
> 
> 赞同：2
> 
> 时间：2012-06-06T22:17:08.963
> 
> 标签：macos, cocoa, bluetooth, osx-lion

我有一个 Cocoa 应用程序，它从内部启动一个新的 NSThread（线程 A） `applicationDidFinishLaunching`。

线程 A 成功创建了一个 RFCOMM 连接，然后生成另一个 NSThread（线程 B），将已建立的 IOBluetoothRFCOMMChannel 传递给线程 B。线程 B 创建一个 IOBluetoothRFCOMMChannelDelegate 并使用它调用 IOBluetoothRFCOMMChannel 上的 setDelegate，然后运行其当前的 NSRunLoop。然后线程 A 等待线程 B 发出同步对象的信号。

目的是，当数据到达时，线程 B 的 NSRunLoop 将执行复制接收到的数据并通知线程 A 读取它的委托。

但是，委托永远不会被调用，因为线程 B 的 NSRunLoop 没有输入源。我想象 setDelegate 会在上面创建一个输入源。我可以调用委托的唯一方法是让线程 A 等待它自己的 NSRunLoop 而不是等待同步对象。在这种情况下，委托会被执行。

但这种安排对我不起作用。最终，我的代码将只是一个库，它公开了一个标准的 C API，并且只适合作为一组程序流动的函数。线程 A 将是其他人的线程（可能是主线程，也可能不是），并且将以程序方式调用我的库。

1）我认为注册委托回调（线程B）的线程/运行循环是获取输入源并在其运行循环中执行回调的线程/运行循环。但是线程 A 的 NSRunLoop 却获取了输入源，为什么？这些东西之间的预期关系是什么？

2) 如何让线程 B 获取输入源并成为执行委托的线程？

感谢您的任何帮助。

我的线程 B 如下：

```
@implementation CBaiHardwareBluetoothEventThread
- (void) runEventThread: (IOBluetoothObjectID)deviceID
{   
    NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];

    NSRunLoop* myRunLoop = [NSRunLoop currentRunLoop];

    CallbackDelegate* cd = [[CallbackDelegate alloc] init];

    IOBluetoothRFCOMMChannel* myOBJCChannel = [IOBluetoothRFCOMMChannel withObjectID:deviceID];

    [myOBJCChannel setDelegate:cd];

    do{
        [myRunLoop runUntilDate:[NSDate distantFuture]];
        cout << __FUNCTION__ << " this should not be returning but it is ???" << endl;
        usleep(1000000);//avoid the unintentional hard loop that happens
    }while(1); //forever for now

    [pool release];
}
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T22:50:23.817

IOBluetooth 和线程很乱。您必须通过反复试验来解决这些问题。如果回调似乎发生在打开连接的线程上，那么您必须在需要回调的线程上打开连接。此外，这种行为经常在操作系统版本之间发生变化......

# php - 将 PHP 数据返回到我当前的网页以供 Javascript 访问

> ID：10923113
> 
> 赞同：0
> 
> 时间：2012-06-06T22:17:09.600
> 
> 标签：php, javascript, ajax

我有一个表单，用户将提交到我的 WordPress 网站，并使用该数据创建一个帖子。表单提交是使用 AJAX 完成的，因此页面不会重新加载。我有我需要传回页面的帖子 ID，以便 Javascript 可以向该特定帖子发布更多数据。

如何将帖子 ID（它只是一个整数）传递回页面，以便我可以继续编辑该帖子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T22:22:58.050

您将不得不使用 AJAX。PHP 代码不可能在没有页面加载的情况下直接将变量传递给 Javascript，因为 PHP 是服务器端的（在页面加载之前解析），而 Javascript 是客户端的（在页面加载之后/期间解析）。

我的建议：制作一个检索帖子 ID 的脚本，例如“pid.php”。然后只需使用 AJAX 获取该页面的内容并使用`parseInt`for Javascript 转换为整数形式。

编辑：正如奥斯汀明智地建议的那样，您也可以使用 json.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T22:26:15.500

ajax 请求成功后，将 post id 保存到全局变量中，以便以后使用。

**例如** 客户端：

```
var post_id = 0; //use the post id later to edit the same post.

$.ajax({
  url: 'somefile.php',
  success: function(data) {
    alert('success, post id is: ' + data.id);
    post_id = data.id;
  }
}); 
```

服务器端：

```
$post_id = 123;

echo json_encode(array('id' => $post_id)); 
```

# php - 操作 PHP 对象数组

> ID：10923114
> 
> 赞同：0
> 
> 时间：2012-06-06T22:17:09.670
> 
> 标签：php, arrays, object

我有一个从 MySQL 检索到的 PHP 对象，它是一个对象数组，如下所示。

```
Array ( 
[0] => stdClass Object ( [question_id] => 1 [question_type] => multiple_choice [question_unit] => 7 [question_difficulty] => 56.5956047853 ) 
[1] => stdClass Object ( [question_id] => 2 [question_type] => multiple_choice [question_unit] => 7 [question_difficulty] => 54.665002232  ) 
[2] => stdClass Object ( [question_id] => 3 [question_type] => multiple_choice [question_unit] => 7 [question_difficulty] => 55.2923002984 ) 
) 
```

我正在尝试解决如何用对象 [2] 替换对象 [0]，或删除对象 [0] 并使其他对象索引减少 1。有没有一种好的/快速的方法来做到这一点，还是我只需要手动迭代并覆盖它吗？

是否有像这样在 PHP 中操作对象的教程（我可以很简单地对数组执行此操作，但找不到对象的类似函数/资源）。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T22:19:45.730

替换一个对象...

```
$a[0] = $a[2]; 
```

要从数组的开头删除，请使用...

```
array_shift($a); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T22:18:12.253

您可以使用 删除数组的第一个元素`array_shift`。

# ajax - 用于获取 JSON 的 Jquery AJAX，受 URL 前缀（www 与无 www）的影响？

> ID：10923115
> 
> 赞同：0
> 
> 时间：2012-06-06T22:17:10.323
> 
> 标签：ajax, json, jquery, mime-types

我遇到了一个特殊的项目`JQuery`，我希望有人可以帮助我理解。

我花了一天的大部分时间试图在从服务器返回时启动`JQUERY's` `AJAX`' ' 函数。`success``JSON`

我检查了`JSON @ JSONLint`以确保有效性，检查编码，尝试了不同的标题，但仍然存在问题。几个小时后，我切换了网址（偶然！）

从

```
http//www.testing.com/_r4444/myfile.php 
```

到完全相同的东西`WITHOUT`......`www`它突然起作用了。

我不知道为什么会这样 - 有什么想法吗？
片段如下

```
$(document).ready(function() {
    $.ajax( {
       type: "POST",
       contentType: "application/json",
       url: "http://testing.com/_r4444/getter.php", 
       beforeSend: function(x) {
         if(x && x.overrideMimeType) x.overrideMimeType("application/json;charset=UTF-8");           
       },
       data: "pass=TEST",
       dataType: "json",           
       error: function (xhr, status) { 
         alert(status); 
       }, 
       success: function (result) { 
         alert(result); 
       }    
    });             
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T22:21:18.693

您是否在浏览器的页面上使用“www”？

尝试将调用切换为不包含域，例如：

“/_r4444/getter.php”而不是完整的域。

# javascript - JSON 值未正确附加到 Html

> ID：10923120
> 
> 赞同：0
> 
> 时间：2012-06-06T22:17:47.120
> 
> 标签：javascript, jquery, json

我有一个 JSON 对象

```
var jsonString =[
    {
        "key": "Monday, June 18, 2012",
        "value": "10 00 AM|_mod,11 00 AM|_mod,12 00 PM|_mod,13 00 PM|_mod"
    },
    {
        "key": "Tuesday, June 19, 2012",
        "value": "13 00 PM|_mod,13 30 PM|_mod,14 00 PM|_mod,14 30 PM|_mod,15 00 PM|_mod"
    }
]; 
```

我有两个下拉菜单，我试图将从第一个下拉列表中选择的键与 JSON 中的键匹配，并使用适当的值填充第二个下拉列表。我希望选项标签看起来像这样

```
<option value="10 00 AM|_mod">10 00 AM</option> 
```

但我看到了这个

![在此处输入图像描述](../Images/3effc4759447d7cb5b3870878a8141ba.png)

我认为 10 00 AM|_mod 中的空格在创建 DOM 时会导致问题。

这是我的 JS 代码。

```
$('#event_date').change(function() {
    var event_date = $("#event_date").val(); // first drop-down val
    var time_type = null;
    var time = null;
    for (var x = 0; x < jsonString.length; x++) {
        if (event_date == jsonString[x].key) {
            var value = jsonString[x].value;
            console.log(value);  // output: 10 00 AM|_mod,11 00 AM|_mod,12 00 PM|_mod,13 00 PM|_mod
            var value_split = value.split(",");
            for (var i = 0; i < value_split.length; i++) {
                console.log(value_split[i]);    // works fine at index 0 I get 10 00 AM|_mod
                time_type = value_split[i].split("|");
                time = time_type[0];
                $('#timeslotIdentifier').append("<option value =" + value_split[i] + ">" + time + "</option>");
            };
        };
    };
}); 
```

有编码问题吗？我尝试添加断点，它看起来不错，但是当我检查元素时，我看到了这个。

![在此处输入图像描述](../Images/bfd56d4960250db39283c7976df3854d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T22:20:13.063

您正在创建一个不带**引号**的属性值。

您应该改用 jQuery：

```
$('<option />').text(time).val(value_split[i]).appendTo('#timeslotIdentifier'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T22:26:29.633

```
$('#event_date').change(function() {
    var event_date = $("#event_date").val(); // first drop-down val
    var time_type = null;
    var time = null;
    for (var x = 0; x < jsonString.length; x++) {
        if (event_date == jsonString[x].key) {
            var value = jsonString[x].value;
            console.log(value);  // output: 10 00 AM|_mod,11 00 AM|_mod,12 00 PM|_mod,13 00 PM|_mod
            var value_split = value.split(",");
            for (var i = 0; i < value_split.length; i++) {
                console.log(value_split[i]);    // works fine at index 0 I get 10 00 AM|_mod
                time_type = value_split[i].split("|");
                time = time_type[0];
                $('#timeslotIdentifier').append($("<option>").attr({value: value_split[i]}).text(time));
            };
        };
    };
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T23:27:49.200

在这种情况下， jQuery`.val()`肯定更好，但如果你不知道错误在哪里，它就在这里：

```
//Nope. (Missing quotes in HTML)
$('#timeslotIdentifier')
    .append("<option value =" + value_split[i] + ">" + time + "</option>");

//Yep.
$('#timeslotIdentifier')
    .append("<option value =\"" + value_split[i] + "\">" + time + "</option>"); 
```

# c# - MonoTouch 向后导航（向右滑动）

> ID：10923129
> 
> 赞同：0
> 
> 时间：2012-06-06T22:18:32.307
> 
> 标签：c#, xamarin.ios

我有这个[Swipe](https://gist.github.com/2884348)扩展方法：

```
View.Swipe(UISwipeGestureRecognizerDirection.Right).Event += (s, r) =>
        View.RemoveFromSuperview(); 
```

使`View.RemoveFromSuperview()`屏幕变为空白。我正在尝试返回上一个视图，我需要为此调用什么命令/方法？

我通过以下方式推送当前视图：

```
AppDelegate.Current.NavController.PushViewController(new SingleIssueController(Item), true); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T01:16:52.283

使用 PopViewController，如果在“SingleIssueController”中发生这种情况，请将“AppDelegate.Current.NavController”作为参数传递，如下所示：

```
var nav = AppDelegate.Current.NavController;
nav.PushViewController (new SingleIssueController (Item, nav)); 
```

然后在您的 SingleIssueController 中，您可以附加到事件并像这样弹出：

```
View.Swipe (....).Event += (s,r) => nav.PopViewControllerAnimated (true); 
```

# iphone - 使用#DEFINE 共享托管对象上下文

> ID：10923132
> 
> 赞同：2
> 
> 时间：2012-06-06T22:18:49.430
> 
> 标签：iphone, objective-c, ios, nsmanagedobjectcontext

只是寻找一些关于这是否是共享托管对象上下文的坏主意的反馈。

在`MyApp-Prefix.pch`文件中，我添加了以下内容：

```
#import "AppDelegate.h"
#define MOC [(AppDelegate*)[UIApplication sharedApplication].delegate managedObjectContext] 
```

然后，当我需要访问上下文时，我会执行以下操作（只是一个示例）：

```
[MOC deleteObject:[self.fetchedResultsController objectAtIndexPath:indexPath]]; 
```

这似乎工作得很好，但似乎也太容易了，特别是因为我没有看到任何地方提到它。这是一个糟糕的设计模式吗？

感谢您的任何反馈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T22:25:31.787

我通常在我的应用程序委托上定义一个类方法，而不是编译器宏（有时会导致意外），如下所示：

```
+ (AppDelegate *)sharedDelegate
{
    return [[UIApplication sharedApplication] delegate];
} 
```

然后，当我需要引用某个全局状态时，我可以这样称呼它：

```
[[[AppDelegate sharedDelegate] managedObjectContext] deleteObject:foo]; 
```

如果您的应用程序足够复杂，那么传递对托管对象上下文的引用而不是使用全局引用可能是值得的。如果这样做，以后重构和使用其他技术会变得更容易，例如子上下文对更改进行分组。

具体来说，这意味着每个视图控制器都有自己的 managedObjectContext 实例变量。当你展示一个新的视图控制器时，你传递了一个引用：可能是在一个自定义的 init 方法中，也可能是通过设置一个属性。您的所有类（可能除了根视图控制器）都没有引用您的全局应用程序委托。这样，如果您有一个复杂的编辑视图，您可以给它一个子上下文，它可以“临时”保存更改（以验证所有对象是否有效）；如果用户点击取消按钮，您只需将整个上下文扔掉。

此外，如果您总是使用全局上下文，您可能会遇到难以追踪的错误。例如，一个在自身之后没有清理的编辑视图会留下一个无效的对象。然后下次你去保存不相关的东西时，你会得到一个错误！发生在我身上，调试起来并不有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T22:24:06.623

这种方法没有错——但除非委托的托管对象上下文在程序的生命周期内发生变化，否则使用全局变量似乎更明智和有效。Cocoa AppKit 框架采用第二种方法，将 NSApp 变量设置为`[NSApplication sharedApplication]`.

# c# - “无效的对象名称'dbo.Memberships'。” 尝试添加新用户时

> ID：10923140
> 
> 赞同：4
> 
> 时间：2012-06-06T22:19:13.877
> 
> 标签：c#, membership-provider

我在最后一两天做了一些事情来破坏我的申请。

我有一种使用会员提供程序在会员数据库中创建新用户的方法。

例如

```
 public void Create(Consumer consumer)
    {

        MembershipCreateStatus status;
        if (consumer.UserId == Guid.Empty)
        {
            consumer.UserId = Guid.NewGuid();
        }
        if (consumer.ConsumerId == Guid.Empty)
        {
            consumer.ConsumerId = Guid.NewGuid();
        }
        try
        {
            var membershipUser = Membership.CreateUser(consumer.UserName, consumer.Password, consumer.Email, null, null, consumer.IsApproved, consumer.UserId, out status);
....
} 
```

内部异常是

> {“无效的对象名称'dbo.Memberships'。”}

堆栈跟踪是

> 在 System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior 行为) 在 System.Data.Objects.Internal.ObjectQueryExecutionPlan.Execute[TResultType](ObjectContext context, ObjectParameterCollection parameterValues) 在 System.Data.Objects.ObjectQuery `1.GetResults(Nullable`1 forMergeOption)在 System.Data.Objects.ObjectQuery `1.System.Collections.Generic.IEnumerable<T>.GetEnumerator() at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 源）在 System.Data.Objects.ELinq.ObjectQueryProvider.b__1[TResult](IEnumerable`1 sequence) at System.Data.Objects.ELinq.ObjectQueryProvider.ExecuteSingle[TResult](IEnumerable`1 个查询，Expression queryRoot) 在 System.Data.Objects.ELinq.ObjectQueryProvider.System.Linq.IQueryProvider.Execute[S](Expression expression) 在 System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source) 在 System .Web.Providers.QueryHelper.GetMembership(MembershipEntities ctx, String applicationName, Guid userId) at System.Web.Providers.DefaultMembershipProvider.Membership_CreateUser(String applicationName, String userName, String password, String salt, String email, String passwordQuestion, String passwordAnswer, Boolean isApproved, DateTime& createDate, Boolean uniqueEmail, Int32 passwordFormat, Object& providerUserKey) at System.Web.Providers.DefaultMembershipProvider.CreateUser(String username, String password, String email, String passwordQuestion, String passwordAnswer, Boolean isApproved,Plenfy.Api.Models.ConsumerRepository 的 System.Web.Security.Membership.CreateUser(String username, String password, String email, String passwordQuestion, String passwordAnswer, Boolean isApproved, Object providerUserKey, MembershipCreateStatus& status) 中的对象 providerUserKey, MembershipCreateStatus& status)。在 c:\@Code\Customers\Api\Repository\ConsumerRepository.cs:line 121 中创建（消费者消费者）

我不知道如何解决这个问题。数据库和连接字符串看起来不错，我可以用 EF 连接到它。

谁能建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-04-25T14:16:31.910

```
try to use 
MembershipCreateStatus status;
        if (consumer.UserId == Guid.Empty)
        {
            consumer.UserId = Guid.NewGuid();
        }
        if (consumer.ConsumerId == Guid.Empty)
        {
            consumer.ConsumerId = Guid.NewGuid();
        }
        try
        {
            var membershipUser = System.Web.Security.Membership.CreateUser(consumer.UserName, consumer.Password, consumer.Email, null, null, consumer.IsApproved, consumer.UserId, out status);
        } 
```

# playframework - 在播放框架 1.2.3（或 1.2.4）中为 @Before 使用多个排除项

> ID：10923141
> 
> 赞同：1
> 
> 时间：2012-06-06T22:19:18.560
> 
> 标签：playframework

我已经在 Play 框架 1.2.3 中使用 @Before 尝试了多个排除项（见下文），但我是否可以这样做，或者我使用的语法不正确，都没有出现。我不希望对多个值使用“仅”，除非没有其他方法。第一个有效，第二个无效。

这有效：

```
@Before(unless="login") 
```

这个不起作用：

```
@Before(unless="login", "signup") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:35:05.637

我需要将值传递到一个数组中，即 {"login","signup"} - 它适用于 play 1.2.3。

# c# - 如何在 C# 中解析来自数据表的这些数据

> ID：10923150
> 
> 赞同：0
> 
> 时间：2012-06-06T22:20:09.540
> 
> 标签：c#, excel, parsing, numbers, decimal

我有以下 C# 代码从数据表中读取数据（最初是从 Excel 电子表格构建的）

```
 private byte GetVal(DataRow dataRow, string caption)
    {
        var val = dataRow.GetValue(caption).ToString().Trim();
        if (!String.IsNullOrEmpty(val))
        {
            return (byte)(Decimal.Parse(val) * 100);
        }
        return (byte)0;
    } 
```

这是爆炸，因为从其中一个单元格（val变量）读取的值为：“5.5555555555555552E-2”

它在这条线上爆炸：

```
 return (byte)(Decimal.Parse(val) * 100); 
```

出现错误：**输入字符串的格式不正确。**

解决此问题的最佳方法是什么，以便我可以读取值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T22:26:21.183

尝试这个：

```
return (byte)(Decimal.Parse(val, System.Globalization.NumberStyles.Float, System.Globalization.CultureInfo.InvariantCulture)); 
```

[`Decimal.Parse Method (String, NumberStyles, IFormatProvider)`](http://msdn.microsoft.com/en-us/library/s84kdbzx)

**NumberStyles.AllowExponent**（`AllowExponent`是 的子集`NumberStyles.Float`）

> 表示数字字符串可以采用指数表示法。AllowExponent 标志允许解析的字符串包含一个以“E”或“e”字符开头的指数，后跟一个可选的正号或负号和一个整数。换句话说，它成功地解析了 nnnExx、nnnE+xx 和 nnnE-xx 形式的字符串。它不允许在有效数或尾数中使用小数分隔符或符号；要允许解析字符串中的这些元素，请使用 AllowDecimalPoint 和 AllowLeadingSign 标志，或使用包含这些单独标志的复合样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T23:08:20.577

```
return (byte)(Decimal.Parse(val, NumberStyles.AllowExponent) * 100); 
```

# c# - 找出文件夹循环引用

> ID：10923152
> 
> 赞同：1
> 
> 时间：2012-06-06T22:20:20.937
> 
> 标签：c#, .net, algorithm, logic

假设我有一个应用程序将放置在主文件夹中的文件传输到其他位置。

例如，用户可以如下配置应用程序：

```
If placed in C:\X\A Transfer to C:\Z\A
If placed in C:\Y\B Transfer to C:\Z\B
. . .
. . . 
```

到现在为止，一切都很好。但是以下配置会创建无限的传输循环：

```
if placed in C:\X\A Transfer to C:\Z\A
if placed in C:\Z\A Transfer to C:\Z\B
if placed in C:\Z\B Transfer to C:\X\A 
```

这样的层次结构会变得相当复杂。首先预测它们并防止此类配置的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T22:39:16.220

假设有这样一个类：

```
class Rule
{
    public string sourceDir; // dir file placed
    public string targetDir; // dir to move to
} 
```

还有一个字典，其中包含由`sourceDir`命名索引的所有规则`rules`。

你可以写一个这样的函数：

```
public bool RuleCausesCycle(Rule rule)
{
    return RuleCausesCycle(rule, new HashSet(CaseInsensitiveComparer.Default));
}

private bool RuleCausesCycle(Rule rule, Set visited)
{
     Rule targetRule;

     if (visited.Contains(rule.sourceDir))
     {
         return true;
     }

     if (rules.TryGetValue(rule.targetDir, out targetRule))
     {
         visited.Add(rule.sourceDir);

         return RuleCausesCycle(targetRule, visited);
     }

     return false;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T22:25:21.180

您基本上是在有向图中寻找循环。我会使用像 QuickGraph 这样的图形库：http: [//quickgraph.codeplex.com/wikipage ?title=Strongly%20Connected%20Components&referringTitle=Documentation](http://quickgraph.codeplex.com/wikipage?title=Strongly%20Connected%20Components&referringTitle=Documentation)

# java - 使用 Canvas 在 ImageView 上绘制文本时出现问题

> ID：10923153
> 
> 赞同：1
> 
> 时间：2012-06-06T22:20:25.533
> 
> 标签：java, android, imageview

我正在尝试为我的 ListView 实现一个页脚，它将充当具有五个元素的菜单类型框架。我希望元素能够（动态地，基于用户输入）显示图像或文本（或可能两者，但我还没有）。最终它将更具交互性，但现在我试图实现它，以便 ImageView（默认显示图像）将擦除图像并显示文本。

我认为实现这一点的最佳方法是在画布上绘制文本并使用[android.view.View.draw(canvas c)](http://developer.android.com/reference/android/view/View.html#draw%28android.graphics.Canvas%29)方法将其绘制到 ImageView 上。但是，我在这样做时遇到了麻烦。具体来说，我几乎可以以任何方式修改视图（设置背景颜色、更改可绘制对象等），并且一切正常，绘制画布的代码可以正确编译，但在运行时不**执行**任何操作。视图保持完全不变。
（**注意：**我试图通过代码消除任何愚蠢的错误（即确保文本不透明/与bg颜色不同，确保文本绘制在视图区域内等）但我不是100％它是没有错误。）

我尝试绘制到传递给 onClick 函数的视图和绘制到从传递的视图构造的新 ImageView - 两者都不起作用。有没有人有什么建议？代码如下：

```
login_button.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View view) {
            Bitmap img = Bitmap.createBitmap( 60, 60, Config.ARGB_8888);
            Canvas c = new Canvas();
            c.setBitmap(img);

            Paint myPaint = new Paint();
            myPaint.setTypeface(mFace);
            myPaint.setColor(android.R.color.black);
            myPaint.setTextSize(2);
            myPaint.setTextAlign(Paint.Align.LEFT);

            String content = "testing";
            c.drawText(content, 0,0, myPaint);
            view.draw(c);//does nothing
            ImageView view2 = (ImageView) view;
            view2.setBackgroundColor(android.R.color.white); //this works perfectly
            view2.draw(c);//does nothing
            Toast.makeText(MainListView.this, ""+c.getHeight(), Toast.LENGTH_SHORT).show(); //making sure c has height - this returns 60 as expected
            Toast.makeText(MainListView.this, "end of method", Toast.LENGTH_SHORT).show();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T22:24:27.763

`View.draw(Canvas)`将视图绘制到画布上，而不是像您期望的那样反之。

如果您想按照已有的方式进行操作，则需要扩展现有的`View`类，可能是`TextView`or`ImageView`和 override `onDraw()`，如[自定义组件开发指南](http://developer.android.com/guide/topics/ui/custom-components.html)中所述。

我想我会做的是使用类似 a 的东西`FrameLayout`并将其设置为包含适当的`TextView`或`ImageView`必要的。这似乎比在 ImageView 中手动渲染文本更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T22:58:24.680

您可以从位图创建画布，并将位图设置为 ImageView 的图像。

```
Bitmap img = Bitmap.createBitmap( 60, 60, Config.ARGB_8888);
Canvas c = new Canvas(img);

Paint myPaint = new Paint();
myPaint.setTypeface(mFace);
myPaint.setColor(android.R.color.black);
myPaint.setTextSize(2);
myPaint.setTextAlign(Paint.Align.LEFT);

String content = "testing";
c.drawText(content, 0,0, myPaint);
ImageView view2 = (ImageView) view;
view2.setImageBitmap(img);
Toast.makeText(MainListView.this, ""+c.getHeight(), Toast.LENGTH_SHORT).show(); //making sure c has height - this returns 60 as expected
Toast.makeText(MainListView.this, "end of method", Toast.LENGTH_SHORT).show(); 
```

虽然，我相信这样做的“正确”方法是使用 View 的扩展并覆盖 onDraw 方法以根据一些局部变量进行不同的绘制：

```
login_button.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View view) {
            ((MyView)view).mContextVariable = true; //or false, etc
            //you might not need this invalidate, because the click event probably causes and invalidate to be called
            view.invalidate();
        }
    }

    class MyView extends View
    {
        Paint myPaint;
        boolean mContextVariable;

        public MyView(Context context) 
        {
            super(context);

             myPaint = new Paint();
             myPaint.setTypeface(mFace);
             myPaint.setColor(android.R.color.black);
             myPaint.setTextSize(2);
             myPaint.setTextAlign(Paint.Align.LEFT);
        }

        @Override
        protected void onDraw(Canvas canvas)
        {
            if(mContextVariable)
            {
                //draw something
            }
            else
            {
                //draw something else
            }
            canvas.drawText("testing", 0,0, myPaint);
        }
    } 
```

# jquery - 如何测试包含 jquery.when 使用 jasmine 的主干代码？

> ID：10923154
> 
> 赞同：1
> 
> 时间：2012-06-06T22:20:28.030
> 
> 标签：jquery, backbone.js, jasmine

我的主干视图的初始化函数之一包含以下代码：

```
$.when(this.broadcasters.fetch(), 
       this.model.fetch(), this.call_types.fetch()).done(
          function(){
              do_important_stuff
          }); 
```

提取的结果与测试无关，但块中的代码对测试很重要。

我最初的想法是使用[jasmine-ajax](https://github.com/pivotal/jasmine-ajax)，但它只支持响应最近的请求，我们实际上有 3 个不同的 AJAX 请求要响应。

我无法真正模拟它们，因为我没有要模拟的对象（因为这是一个初始化函数）。

最后我最终只是手动运行“do_important_stuff”，这似乎并不理想，因为它将代码复制到测试中。

**编辑：**

根据请求，如何创建视图实例：

```
var responder = new EmailResponder({model: email, el: some_element, reply: true}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:53:02.313

您可能应该尝试使用 sinon.js。这是一个很棒的存根和模拟库，包括[模拟 XHR](http://sinonjs.org/docs/#fakeServer)。看一个例子：

```
var Model = Backbone.Model.extend({});
var Collection = Backbone.Collection.extend({
    model: Model,
    url: "/api/models"
});

var server = sinon.fakeServer.create();
server.respondWith("/api/broadcasters", [
    200,
    {"Content-Type": "application/json"},
    JSON.stringify({"data": "foo"})
]);

server.respondWith("/api/models", [
    200,
    {"Content-Type": "application/json"},
    JSON.stringify({"data": "bar"})
]);

server.respondWith("/api/call_types", [
    200,
   {"Content-Type": "application/json"},
    JSON.stringify({"data": "baz"})
]);

$.when($.get('/api/broadcasters'), $.get('/api/call_types'), collection.fetch()).then(function() {
    console.log('here it is!');
});

server.respond(); 
```

[http://jsfiddle.net/theotheo/DxVkr/](http://jsfiddle.net/theotheo/DxVkr/)

# shell - 曾经尝试使用 unix shell find 删除文件吗？使用 -delete 选项

> ID：10923163
> 
> 赞同：9
> 
> 时间：2012-06-06T22:21:48.087
> 
> 标签：shell, unix, find, command

这在帖子中出现了很多次，所以我提到它是为了感谢 stackoverflow 上所有乐于助人的人。

你有没有想过在 Unix 的命令行/终端上做一堆删除操作？也许您使用了类似的构造

```
find . -name '*.pyc' -exec rm {} \; 
```

寻找一个优雅的方式来做到这一点的答案。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-06T22:32:41.913

这是使用该`-delete`选项的方法！

使用 find 命令选项`-delete`：

```
find . -name '*.pyc' -delete 
```

当然，请尝试不带 , 的试运行`-delete`，看看您是否要删除您想要的内容！！！那些电脑跑得真快！;-)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-06T23:07:57.140

+1 采取主动并自己找到解决问题的方法。几个相当小的注释：

我建议`-type f`您在要删除文件时养成使用标志的习惯。这仅限`find`于实际上是文件的文件（即不是目录或链接）。否则您可能会无意中删除一个目录，这可能*不是*您想要做的。（也就是说，除非您有一个名为“something.pyc”的目录，否则对于您的示例命令来说这不是问题。这通常只是一个好习惯。）

另外，只是为了让您知道，如果您决定使用该`-exec rm..`版本，如果您这样做，它会运行得更快：

```
find . -type f -name '*.pyc' -exec rm {} \+ 
```

此版本尽可能多地向单个调用添加参数`rm`，从而减少对`rm`. 它的工作原理非常类似于`xargs`.

# objective-c - UITextView 在崩溃之前可以保存的最大数据量是多少？

> ID：10923165
> 
> 赞同：0
> 
> 时间：2012-06-06T22:22:01.633
> 
> 标签：objective-c, xcode, uitextview

我有一个可以变得非常大的文本文件，我正在尝试加载到 UITextView 中。它每次都会崩溃，所以我猜它与超过 UITextView 可以容纳的数量有关。

这个问题说要分页：[Loading huge Text file in UITextview crashs](https://stackoverflow.com/questions/4131412/loading-huge-text-file-in-uitextview-crashes)

我只想告诉用户它什么时候太大而不能只显示一个对话框来告诉他们从 iTunes 下载它（我的应用程序上启用了文件共享）。但是 UITextView 在崩溃之前可以保存的最大（确切的，或者我猜的）数据量是多少？

# android - Android - 父活动应确定子活动调用它

> ID：10923172
> 
> 赞同：0
> 
> 时间：2012-06-06T22:23:12.227
> 
> 标签：android, android-layout, android-emulator, android-widget, android-ndk

我的项目中有 2 个活动，比如说活动 A 和活动 B。A 和 B 都**扩展**了同一个超类：BaseActivity。
我们知道，在这种情况下，假设如果打开了 Activity A，则调用超类方法 onCreate()，然后是 Activity A 的 onCreate()。

在父 BaseActivity 类的 onCreate() 方法中，如何确定哪个子活动已启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T22:44:13.743

我会建议一种不同的方法。基本上不做继承。改用合成。请记住，您认为需要扩展的大多数操作实际上只需要对上下文的引用。活动从上下文延伸。所以实际上，您可以在任何引用活动上下文的类中提供大多数基本功能。根本不需要继承。

因此，如果您想在 ActivityA 和 ActivityB 之间共享某些功能，只需将其放入 HelperC

HelperC.someOperation(上下文 c, otherParams)

HelperC 可以做一些基本活动可以做的任何事情。最终，基本活动将永远不会存在。它总是一个实例化的版本 A 或 B

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T22:27:29.923

我认为你不应该这样做。据我记得扩展的想法，超类方法应该只包含通用代码。在子类中放入不同的代码会更容易，而且我认为更合适。

您可以在 parent onCreate() 中初始化一些值，然后在 childs' 中重新设置它。

# google-app-engine - playframework 1.2 示例应用程序在部署到 google-appengine 时抛出 505

> ID：10923176
> 
> 赞同：1
> 
> 时间：2012-06-06T22:23:56.670
> 
> 标签：google-app-engine, playframework

我在 playframework 1.2 中创建了一个示例应用程序并尝试将其部署到 google-appengine，部署显示没有问题。但是当我点击我的应用程序时，它会显示 505 错误。

当我检查日志时，我发现它抛出了一个错误，而有趣的是，它显示了一个 servlet 异常，呵呵！play 完全脱离了 servlet/jsp 的世界。怎么会抛出servlet异常？

完整的堆栈跟踪是

> 无法实例化侦听器 play.server.ServletWrapper java.lang.ClassNotFoundException：在 java.lang.ClassLoader.loadClass(ClassLoader. java:266) 在 org.mortbay.jetty.handler.ContextHandler.loadClass(ContextHandler.java:1101) 在 org.mortbay.jetty.webapp.WebXmlConfiguration.initListener(WebXmlConfiguration.java:630) 在 org.mortbay.jetty.webapp .WebXmlConfiguration.initWebXmlElement(WebXmlConfiguration.java:368) 在 org.mortbay.jetty.webapp.WebXmlConfiguration.initialize(WebXmlConfiguration.java:289) 在 org.mortbay.jetty.webapp.WebXmlConfiguration.configure(WebXmlConfiguration.java:222) 在org.mortbay.jetty.webapp.WebXmlConfiguration.configureWebApp(WebXmlConfiguration.java:180) 在 org.mortbay。jetty.webapp.WebAppContext.startContext(WebAppContext.java:1247) 在 org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517) 在 org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java: 467) 在 org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) 在 com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449) 在 com.google.tracing.TraceContext$TraceContextRunnable$1。 run(TraceContext.java:455) 在 com.google.tracing.TraceContext.runInContext(TraceContext.java:695) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333) 在 com.google.tracing .TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325) 在 com.google.tracing。TraceContext$TraceContextRunnable.run(TraceContext.java:453) 在 java.lang.Thread.run(Thread.java:679)
> 
> 2012-06-06 14:32:23.044
> 
> 异常 java.lang.ClassNotFoundException: play.server.ServletWrapper at com.google.appengine.runtime.Request.process-b8b4d374cb7c1344(Request.java) at java.lang.ClassLoader.loadClass(ClassLoader.java:266) at org.mortbay .util.Loader.loadClass(Loader.java:91) 在 org.mortbay.util.Loader.loadClass(Loader.java:71) 在 org.mortbay.jetty.servlet.Holder.doStart(Holder.java:73) 在org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:242) 在 org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) 在 org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler. java:685) 在 org.mortbay.jetty.servlet.Context.startContext(Context.java:140) 在 org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250) 在 org.mortbay.jetty.handler .ContextHandler。doStart(ContextHandler.java:517) 在 org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467) 在 org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) 在 com.google.tracing .TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449) 在 com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455) 在 com.google.tracing.TraceContext.runInContext(TraceContext.java:695)在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325) 在 com.google.tracing.TraceContext$TraceContextRunnable.run (TraceContext.java:453) 在 java.lang.Thread.run(Thread.java:679)517) 在 org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467) 在 org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) 在 com.google.tracing.TraceContext$TraceContextRunnable.runInContext (TraceContext.java:449) 在 com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455) 在 com.google.tracing.TraceContext.runInContext(TraceContext.java:695) 在 com.google.tracing .TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325) 在 com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453) ) 在 java.lang.Thread.run(Thread.java:679)517) 在 org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467) 在 org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) 在 com.google.tracing.TraceContext$TraceContextRunnable.runInContext (TraceContext.java:449) 在 com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455) 在 com.google.tracing.TraceContext.runInContext(TraceContext.java:695) 在 com.google.tracing .TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325) 在 com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453) ) 在 java.lang.Thread.run(Thread.java:679)doStart(WebAppContext.java:467) at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449) at com.google.tracing .TraceContext$TraceContextRunnable$1.run(TraceContext.java:455) 在 com.google.tracing.TraceContext.runInContext(TraceContext.java:695) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325) 在 com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453) 在 java.lang.Thread.run(Thread.java :679)doStart(WebAppContext.java:467) at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449) at com.google.tracing .TraceContext$TraceContextRunnable$1.run(TraceContext.java:455) 在 com.google.tracing.TraceContext.runInContext(TraceContext.java:695) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325) 在 com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453) 在 java.lang.Thread.run(Thread.java :679)50）在 com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449) 在 com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455) 在 com.google.tracing.TraceContext。 runInContext(TraceContext.java:695) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325) 在 com.google .tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453) 在 java.lang.Thread.run(Thread.java:679)50）在 com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449) 在 com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455) 在 com.google.tracing.TraceContext。 runInContext(TraceContext.java:695) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325) 在 com.google .tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453) 在 java.lang.Thread.run(Thread.java:679)TraceContext.runInContext(TraceContext.java:695) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325) 在 com .google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453) 在 java.lang.Thread.run(Thread.java:679)TraceContext.runInContext(TraceContext.java:695) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325) 在 com .google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453) 在 java.lang.Thread.run(Thread.java:679)
> 
> 2012-06-06 14:32:23.045
> 
> javax.servlet.ServletContext 日志：不可用 javax.servlet.UnavailableException: play.server.ServletWrapper at org.mortbay.jetty.servlet.Holder.doStart(Holder.java:79) at org.mortbay.jetty.servlet.ServletHolder.doStart (ServletHolder.java:242) 在 org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) 在 org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685) 在 org.mortbay.jetty。 servlet.Context.startContext(Context.java:140) 在 org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250) 在 org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)在 org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467) 在 org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) 在 com.google.apphosting。runtime.jetty.AppVersionHandlerMap.createHandler(AppVersionHandlerMap.java:202) 在 com.google.apphosting.runtime.jetty.AppVersionHandlerMap.getHandler(AppVersionHandlerMap.java:171) 在 com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest( JettyServletEngineAdapter.java:123) 在 com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:477) 在 com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449) 在 com.google .tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455) 在 com.google.tracing.TraceContext.runInContext(TraceContext.java:695) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java: 333）在 com.google.tracing。TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325) 在 com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453) 在 com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java: 251) 在 java.lang.Thread.run(Thread.java:679)
> 
> 2012-06-06 14:32:23.092
> 
> 上下文 com.google.apphosting.utils.jetty.RuntimeAppEngineWebAppContext@15e00b7{/,/base/data/home/apps/s~play-gae2/1.359439975758049816} java.lang.NullPointerException 在 java.lang.Class.isAssignableFrom 启动失败（本机方法）在 org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:256) 在 org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) 在 org.mortbay.jetty.servlet.ServletHandler .initialize(ServletHandler.java:685) 在 org.mortbay.jetty.servlet.Context.startContext(Context.java:140) 在 org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250) 在 org. mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517) 在 org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467) 在 org.mortbay.component。AbstractLifeCycle.start(AbstractLifeCycle.java:50) 在 com.google.apphosting.runtime.jetty.AppVersionHandlerMap.createHandler(AppVersionHandlerMap.java:202) 在 com.google.apphosting.runtime.jetty.AppVersionHandlerMap.getHandler(AppVersionHandlerMap.java: 171) 在 com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:123) 在 com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:477) 在 com.google.tracing .TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449) 在 com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455) 在 com.google.tracing.TraceContext.runInContext(TraceContext.java:695)在 com.google.tracing.TraceContext$AbstractTraceContextCallback。runInInheritedContextNoUnref(TraceContext.java:333) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325) 在 com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453) 在 com.google .apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251) 在 java.lang.Thread.run(Thread.java:679)
> 
> C 2012-06-06 14:32:23.093
> 
> 来自 servlet javax.servlet.UnavailableException 的未捕获异常：初始化失败。在 com.google.apphosting.runtime.jetty.AppVersionHandlerMap.createHandler(AppVersionHandlerMap.java:211) 在 com.google.apphosting.runtime.jetty.AppVersionHandlerMap.getHandler(AppVersionHandlerMap.java:171) 在 com.google.apphosting.runtime .jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:123) 在 com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:477) 在 com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java :449) 在 com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455) 在 com.google.tracing.TraceContext.runInContext(TraceContext.java:695) 在 com.google.tracing。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:08:02.510

尽管 Play 不使用 Servlet，但为了使 Play 在 J2EE 容器（包括 GAE）中工作，play 使用 Servlet 包装器将来自 J2EE 容器的请求路由到 Play 代码中。

从您得到的异常来看，这个 Play servlet 包装器似乎不可用。您是否使用 Play 中的 GAE 模块部署它？这应该会为您创建一个 WAR 文件并将其直接上传到 GAE。这应确保正确复制所需的所有内容。

# c - 无法初始化联合中的第二项

> ID：10923178
> 
> 赞同：3
> 
> 时间：2012-06-06T22:24:11.227
> 
> 标签：c, initialization, unions

我与声明有一个联合：

```
union test_u
{
    int i;
    char *str;
}; 
```

我正在尝试使用以下代码使用“第二个”字段中的数据初始化变量：

```
union test_u test = {"Sample"};  // char *, not int 
```

在尝试编译它时，我收到错误：

> file.c:72:11：警告：初始化从指针生成整数而不进行强制转换

是否可以以与上面相同的方式初始化变量？编译器（在 C89 下）不应该在初始化中接受一个`int`to吗？`char *`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T22:27:04.610

在 C99 中，这可以使用[指定的初始化程序](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fstrin.htm)：

```
union test_u test = { .str = "Sample" }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T22:33:50.193

使用 C89，只有联合的第一个成员被初始化。所以你可以改变联合中变量的顺序：

```
union test_u
{
    char *str;
    int i;
}; 
```

# architecture - Box2D 碰撞回调

> ID：10923184
> 
> 赞同：2
> 
> 时间：2012-06-06T22:24:48.700
> 
> 标签：architecture, callback, listener, box2d, libgdx

我正在使用 Box2D，使用 Libgdx 进行渲染。我已经实现了一个工作正常的 ContactListener。但是，我看不到如何处理联系人。我得到的唯一参数是联系人（带有它的固定装置等），但我还需要访问像我的 Sprite 之类的东西（基本上是我的整个演员对象）。

我希望我能以某种方式为我的 Actor 对象设置一个回调，这样我就可以在那里处理它。或者也许有一些方法可以有这样的东西，`mBody.setContactListener(...{})`这样我就可以有一个回调，并且能够处理的不仅仅是身体或固定装置。有关如何进行此操作的任何帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T03:29:18.183

您可以在夹具、身体和关节中设置“用户数据”指针。这可以是您认为附加到每个对象有用的任何信息。Box2D 对这些信息不做任何事情，它只是在你询问时告诉你它是什么。查看手册中的 SetUserData/GetUserData。

# asp.net - (ASP.NET) 项目文件必须包含“WindowsBase、PresentationCore、PresentationFramework”

> ID：10923189
> 
> 赞同：3
> 
> 时间：2012-06-06T22:25:11.637
> 
> 标签：asp.net, visual-studio-2010, compiler-errors, build-process

我在我的 ASP.NET 应用程序中看到一个难以理解的编译错误。

> 项目文件必须在参考列表中包含 .NET Framework 程序集“WindowsBase、PresentationCore、PresentationFramework”

这就是 WPF 程序集。我的项目是 ASP.NET。有没有人遇到过这种情况？

更奇怪的是，由于另一个问题，在我开始处理我的 .resx 文件之前，该项目正在编译。然后突然出现了这个无意义的错误。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-06T22:27:20.437

如果您的项目中有一个文件，其 Build Action 设置为`Resource`. （用于 WPF 嵌入）

找到有问题的文件并更改其构建操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-17T07:59:20.093

我在 csproj 文件中有以下内容：

```
<Page Include="BuildProcessTemplates\DefaultTemplate.11.1.xaml">
  <Generator>MSBuild:Compile</Generator>
</Page>
<Page Include="BuildProcessTemplates\LabDefaultTemplate.11.xaml">
  <Generator>MSBuild:Compile</Generator>
</Page>
<Page Include="BuildProcessTemplates\UpgradeTemplate.xaml">
  <Generator>MSBuild:Compile</Generator>
</Page> 
```

将其更改为以下解决了问题：

```
<Content Include="BuildProcessTemplates\DefaultTemplate.11.1.xaml" />
<Content Include="BuildProcessTemplates\LabDefaultTemplate.11.xaml" />
<Content Include="BuildProcessTemplates\UpgradeTemplate.xaml" /> 
```

# magento - Magento 升级流程和基础设施以尽可能减少停机时间

> ID：10923194
> 
> 赞同：0
> 
> 时间：2012-06-06T22:25:28.300
> 
> 标签：magento, upgrade, infrastructure

我有一个客户，他目前有一台带有 Magento 的服务器，他`admin`关闭了整个站点以进行多个小时的更新。我想让它成为即时过程，以便我想就他应该如何设置它提出新的解决方案：

*   Magento 生产服务器 1 (WEB+DB)
*   Magento 生产服务器 2 (WEB+DB)
*   Magento 开发服务器 1

数据库必须以某种方式在这 2 台服务器之间同步（集群？复制？），我认为为了尽可能缩短停机时间，首先应该在开发服务器上测试更新（升级之前从生产服务器同步的数据库/WEB）和之后检查它是否正常工作并知道该过程的外观我将禁用 LoadBalancing 或 RoundRobin DNS 仅对服务器 1 然后在服务器 2 上进行升级/更新，然后切换到服务器 2 作为生产服务器并更新服务器 1。当两者都完成后切换在负载平衡/循环上。

我来自 Windows 环境，所以这就是我在 Windows 上执行此操作的方式（也可能使用单独的数据库和 Web），并且使用 RedGate SqlCompare/Sql Data Compare 等工具应该可以工作。

但我根本不了解 Magento，所以请让我知道有什么可能，如果客户不想让他的商店倒闭，也许应该怎么做……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T01:17:49.997

你肯定需要一个生产服务器，以及某种登台/版本管理系统。我建议查看 Subversion 或 Git 以进行版本管理。可以先将更改提交到存储库，然后在不停机的情况下更新到实时站点。这对于开发环境来说已经绰绰有余了。

对于更大的更改，例如 Magento 版本升级，您可能仍希望/需要在半夜将站点关闭几个小时，因为这是一个更大的过程。

至于多台服务器，作为一个例子，我运行一个负载均衡器，它在主服务器和辅助服务器之间进行平衡。有一个独立的数据库服务器。对开发服务器进行更改，使用 Subversion 提交到主服务器，然后每 60 秒将主服务器和辅助服务器之间的任何更改同步到辅助服务器。

对于此解决方案，会话和缓存数据存储在数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:12:26.893

恕我直言，拥有良好的托管环境，您不需要多台服务器，除非您确实是成千上万的同时访问者。插件是管理相关问题的常见原因。

我们在“云”环境方面取得了巨大成功。实例化一个新的云实例，获取该 IP，然后在您的“主机”文件中，将 dev.yourdomain.com 之类的内容指向它进行测试。唯一真正的停机时间是您应该在数据库转换为新版本时冻结生产站点，这可能需要几个小时。我们的 mySql DB 备份是 3 GB 左右，但幸运的是 tgz 已降至 280 MB。

我们正在使用 nginx 和 php-fpm，它们的速度非常快。

对我来说典型的迁移路径：

1.  备份生产站点
2.  启动新的云实例并将生产站点复制到开发站点（恢复生产数据库）
3.  尝试一次升级开发站点，看看有什么问题
4.  启动新的云实例并全新安装最新的 magento 版本
5.  一旦工作，恢复生产数据库并观察它是否正在转换它，看看有什么问题
6.  在升级与全新安装之间进行选择
7.  备份生产 mySql，将生产站点置于维护模式，而开发站点转换数据库
8.  将域指向新的 IP 地址

# c - C合并两个链表

> ID：10923211
> 
> 赞同：0
> 
> 时间：2012-06-06T22:26:41.547
> 
> 标签：c, linked-list

我正在尝试将两个链接列表的内容复制到一个中，以便一次复制一个元素（来自每个链接列表）。

所以，如果我有：`list1 = [1,2,3]`, 和`list2 = [4,5,6]`, `result = [1,4,2,5,3,6]`。如果一个列表比另一个短，则剩余节点将附加到结果列表的末尾。

这是我的代码，它有一个小错误：它在最后创建了一个额外的节点（我不想要）。

```
node *list_copy(node *list1, node *list2) 
{
    node *mylist = newnode(); 
    node *head = mylist;

    while (list1 != NULL || list2 != NULL) {        

        if (list1 != NULL) {
            mylist->data = list1->data;
            mylist->next = newnode();
            mylist = mylist->next;

            list1 = list1->next;
        } 
        if (list2 != NULL) { 
            mylist->data = list2->data;
                mylist->next = newnode();
            mylist = mylist->next;

            list2 = list2->next;
        }

    }
    return head;
} 
```

如何修改它以使其不创建最后一个节点？

### 示例输入：

```
List1 = [1,2,3], List2 = [1,2,3,4,5,6], Result = [1,1,2,2,3,3,4,5,6,0]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T22:33:06.483

不要在一个 while 块中进行合并，这会使您的代码更难阅读。在功能上将列表副本分解为另一个函数并调用它两次。

您在循环之前执行 newnode ，然后在添加当前项之后执行 newnode 。怎么样...

```
node *mylist; 
node *head;

while (listItem != null) {

    if(head == null) {        
       mylist = newnode();
       head = myList;
    }
    else {
       mylist->next = newnode();
       mylist = mylist->next;
    }

    mylist->data = listItem->data;    
    listItem = listItem->next;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T22:31:57.597

这应该让你继续前进。请注意，在您的示例中，似乎需要对输出进行排序。您可以通过添加一些额外的测试将其作为列表合并操作的一部分来处理，但我将把它作为练习（不确定排序结果是否是您要求的一部分）。

```
#include <iostream>
#include <fstream>
#include <algorithm>
#include <numeric>
#include <iostream>
#include <sstream>
#include <string>
#include <vector>
#include <queue>
#include <deque>
#include <set>
#include <map>
#include <cstdio>
#include <cstdlib>
#include <cctype>
#include <cassert>
#include <cmath>
#include <complex>
#include <stack>
using namespace std;

struct node {
  int data;
  node* next;
};

node *list_copy(node *list1, node *list2) 
{
    node *mylist;
    node *head;

    mylist = NULL;
    while (list1 != NULL || list2 != NULL) {        

        if (mylist == NULL) {
            mylist = new node;
            head = mylist;
        }
        else {
            mylist->next = new node;
            mylist = mylist->next;
        }

        if (list1 != NULL) {
            mylist->data = list1->data;
            list1 = list1->next;
        } 
        else if (list2 != NULL) { 
            mylist->data = list2->data;
            list2 = list2->next;
        }

    }
    return head;
}   

node* addnode(node* list, int val) {
  if (list == NULL)
    list = new node;
  else {
    list->next = new node;
    list = list->next;
  }
  list->data = val;
  return list;
}

int main() {
  node* list1;
  node* head1;
  node* list2;
  node* head2;

  list1 = NULL;
  list2 = NULL;

  list1 = addnode(list1,1);
  head1 = list1;
  list1 = addnode(list1,2);
  list1 = addnode(list1,3);

  list2 = addnode(list2,1);
  head2 = list2;
  list2 = addnode(list2,2);
  list2 = addnode(list2,3);
  list2 = addnode(list2,4);
  list2 = addnode(list2,5);
  list2 = addnode(list2,6);

  node* m = list_copy(head1,head2);
  while(m != NULL) {
    cout<<(m->data)<<endl;
    m = m->next;
  }

  return 0;
} 
```

输出：

```
---------- Capture Output ----------
> "c:\windows\system32\cmd.exe" /c C:\temp\temp.exe
1
2
3
1
2
3
4
5
6

> Terminated with exit code 0. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T01:45:33.703

以下是您的代码，几乎没有修改。希望这对你有帮助

```
node *list_copy(node *list1, node *list2) 
{
    node *mylist = NULL; 
    node *head = NULL;

    while (list1 != NULL || list2 != NULL) {        

        if (head == NULL)
        {
            mylist = newnode();
            head = mylist;
        }  
        else
        {
            mylist->next = newnode();
            mylist = mylist->next;                 
        } 

        if (list1 != NULL) {
            mylist->data = list1->data;   
            list1 = list1->next;
        } 
        if (list2 != NULL) { 
            mylist->data = list2->data;
            list2 = list2->next;
        }
        mylist->next = NULL;
    }
    return head;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-04T21:56:34.013

更新：看来 OP 想要列表的*副本*。

```
#include <stdlib.h>
struct llist * llist_merge_and_dup(struct llist *one, struct llist *two, int (*cmp)(struct llist *l, struct llist *r) );
struct llist *llist_dup(struct llist *org);

struct llist *llist_dup(struct llist *org)
{
struct llist *new;
new = malloc (sizeof *new);
if (!new) return NULL;
memcpy (new, org, sizeof new);
new->next = NULL;
return new;
}

struct llist * llist_merge_and_dup(struct llist *one, struct llist *two, int (*cmp)(struct llist *l, struct llist *r) )
{
struct llist *result, **tail;

for (result=NULL, tail = &result; one && two; tail = &(*tail)->next ) {
        if (cmp(one,two) <=0) { *tail = llist_dup(one); one=one->next; }
        else { *tail = llist_dup(two); two=two->next; }
        }

for( ; one; one = one->next) {
        *tail = llist_dup(one);
        }

for( ; two; two = two->next) {
        *tail = llist_dup(two);
        }
return result;
                                                                                              } 
```

# python - 分配给 NumPy 中的列

> ID：10923212
> 
> 赞同：40
> 
> 时间：2012-06-06T22:26:47.373
> 
> 标签：python, numpy

如何使用 NumPy 编写以下 MATLAB 代码？

```
A = zeros(5, 100);
x = ones(5,1);
A(:,1) = x; 
```

分配给行似乎很容易，但我找不到将数组分配给另一个数组的列的示例。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-06-06T22:32:26.780

使用`a[:,1] = x[:,0]`. 您需要`x[:,0]`将 的列选择`x`为单个 numpy 数组。如果您可以选择如何格式化`x`，最好不要一开始就将其设为二维数组，而仅将其设为常规（行）数组：

```
>>> a
array([[ 0.,  0.,  0.],
       [ 0.,  0.,  0.],
       [ 0.,  0.,  0.],
       [ 0.,  0.,  0.],
       [ 0.,  0.,  0.]])
>>> x = numpy.ones(5)
>>> x
array([ 1.,  1.,  1.,  1.,  1.])
>>> a[:,1] = x
>>> a
array([[ 0.,  1.,  0.],
       [ 0.,  1.,  0.],
       [ 0.,  1.,  0.],
       [ 0.,  1.,  0.],
       [ 0.,  1.,  0.]]) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-06T22:32:21.190

```
>>> A = np.zeros((5,100))
>>> x = np.ones((5,1))
>>> A[:,:1] = x 
```

# postgresql - Postgres ENUM 数据类型还是 CHECK CONSTRAINT？

> ID：10923213
> 
> 赞同：92
> 
> 时间：2012-06-06T22:26:52.800
> 
> 标签：postgresql, postgresql-9.1

我一直在将 MySQL db 迁移到 Pg (9.1)，并通过在 Pg 中创建新的数据类型，然后将其用作列定义来模拟 MySQL ENUM 数据类型。我的问题——我可以使用 CHECK CONSTRAINT 代替吗？实现 MySQL ENUM 类型以强制行中的特定值条目。这可以通过检查约束来完成吗？如果是的话，会更好（或更糟）吗？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-06-11T17:42:16.803

根据这里的评论和答案，以及一些初步的研究，我有以下摘要供 Postgres-erati 评论。非常感谢您的意见。

有三种方法可以限制 Postgres 数据库表列中的条目。考虑一个存储“颜色”的表，您希望仅将“红色”、“绿色”或“蓝色”作为有效条目。

1.  枚举数据类型

    ```
    CREATE TYPE valid_colors AS ENUM ('red', 'green', 'blue');

    CREATE TABLE t (
        color VALID_COLORS
    ); 
    ```

    优点是类型可以定义一次，然后根据需要在尽可能多的表中重用。标准查询可以列出 ENUM 类型的所有值，并可用于制作应用程序表单小部件。

    ```
    SELECT  n.nspname AS enum_schema,  
            t.typname AS enum_name,  
            e.enumlabel AS enum_value
    FROM    pg_type t JOIN 
            pg_enum e ON t.oid = e.enumtypid JOIN 
            pg_catalog.pg_namespace n ON n.oid = t.typnamespace
    WHERE   t.typname = 'valid_colors'

     enum_schema | enum_name     | enum_value 
    -------------+---------------+------------
     public      | valid_colors  | red
     public      | valid_colors  | green
     public      | valid_colors  | blue 
    ```

    缺点是，ENUM 类型存储在系统目录中，因此需要进行上述查询才能查看其定义。查看表定义时，这些值不明显。而且，由于 ENUM 类型实际上是一种独立于内置 NUMERIC 和 TEXT 数据类型的数据类型，因此常规的数字和字符串运算符和函数不适用于它。所以，一个人不能做这样的查询

    ```
    SELECT FROM t WHERE color LIKE 'bl%'; 
    ```

2.  检查约束

    ```
    CREATE TABLE t (
        colors TEXT CHECK (colors IN ('red', 'green', 'blue'))
    ); 
    ```

    两个优点是，第一，“所见即所得”，即列的有效值直接记录在表定义中，第二，所有本机字符串或数字运算符都有效。

3.  外键

    ```
    CREATE TABLE valid_colors (
        id SERIAL PRIMARY KEY NOT NULL,
        color TEXT
    );

    INSERT INTO valid_colors (color) VALUES 
        ('red'),
        ('green'),
        ('blue');

    CREATE TABLE t (
        color_id INTEGER REFERENCES valid_colors (id)
    ); 
    ```

    本质上与创建 ENUM 类型相同，除了本机数字或字符串运算符可以工作，并且不必查询系统目录来发现有效值。需要连接才能将 链接`color_id`到所需的文本值。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2017-01-14T21:39:03.920

正如其他答案指出的那样，检查约束存在灵活性问题，但是在整数 id 上设置外键需要在查找期间加入。为什么不直接使用允许的值作为参考表中的自然键？

从[朋克的回答](https://stackoverflow.com/a/10984951/2624652)中调整架构：

```
CREATE TABLE valid_colors (
    color TEXT PRIMARY KEY
);

INSERT INTO valid_colors (color) VALUES 
    ('red'),
    ('green'),
    ('blue');

CREATE TABLE t (
    color TEXT REFERENCES valid_colors (color) ON UPDATE CASCADE
); 
```

值与检查约束情况一样内联存储，因此没有连接，但可以轻松添加新的有效值选项，并且可以通过更新现有值实例`ON UPDATE CASCADE`（例如，如果确定“红色”实际上应该是“红色”，则更新`valid_colors`因此，更改会自动传播）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-23T18:47:40.697

外键与检查约束的一大缺点是任何报告或 UI 显示都必须执行连接才能将 id 解析为文本。

在一个小型系统中，这没什么大不了的，但是如果您正在使用具有很多小型查找表的 HR 或类似系统，那么这可能是一个非常大的问题，因为为了获取文本而发生了很多连接。

我的建议是，如果值很少且很少更改，则对文本字段使用约束，否则对整数 id 字段使用查找表。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-08T05:01:28.257

PostgreSQL 有[enum types](http://www.postgresql.org/docs/current/interactive/datatype-enum.html)，可以正常工作。我不知道枚举是否比约束“更好”，它们都可以工作。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-09-16T15:07:50.983

从我的角度来看，给定一组相同的值

1.  如果您将在多列上使用枚举，那么它是一个更好的解决方案
2.  如果您想限制应用程序中只有一列的值，检查约束是更好的解决方案。

当然，还有很多其他参数可能会在您的决策过程中蔓延（通常是内置运算符不可用的事实），但我认为这两个是最普遍的参数。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-09T17:54:29.707

我希望有人能从 PostgreSQL 数据库方面给出一个很好的答案，说明为什么一个可能比另一个更可取。

从软件开发人员的角度来看，我稍微倾向于使用检查约束，因为 PostgreSQL 枚举需要在您的 SQL 中进行强制转换才能进行更新/插入，例如：

```
INSERT INTO table1 (colA, colB) VALUES('foo', 'bar'::myenum) 
```

其中“myenum”是您在 PostgreSQL 中指定的枚举类型。

这当然使 SQL 不可移植（这对大多数人来说可能没什么大不了的），但也是您在开发应用程序时必须处理的另一件事，所以我更喜欢使用带有检查的 VARCHAR（或其他典型原语）约束。

作为旁注，我注意到 MySQL 枚举不需要这种类型的强制转换，所以根据我的经验，这是 PostgreSQL 特有的。

# iphone - 是否已选择 UITabBarItem

> ID：10923214
> 
> 赞同：0
> 
> 时间：2012-06-06T22:27:03.160
> 
> 标签：iphone, ios, uitabbar

我正在选择一个 tabbaritem 并从屏幕底部向上加载一个视图，然后我想重新选择相同的 tabbar 项目以关闭此视图。但是我不知道如何处理这个问题。

我查看了 tabbar api，但看不到任何有帮助的东西，我想知道这里是否有人有一个好主意来实现我想要的结果。

# c++ - 我错过了什么吗？我一直在输出“找不到文件！”

> ID：10923216
> 
> 赞同：-1
> 
> 时间：2012-06-06T22:27:05.813
> 
> 标签：c++

```
void getBookData(bookType books[], int& noOfBooks)
{
    ifstream infile;
    string file = "bookData.txt";
    infile.open(file.c_str());
    if (infile.fail()) {
        cout << "No file found!" << endl;
        infile.clear();
    }
    while (true) {
        string line;
        getline(infile, line, '\r');
        if (infile.fail()) {
            break;  
        }
        cout << "Line: " << line << endl;
    }
    infile.close();
} 
```

我已经尝试将文件放在我能想到的每个位置，但不知何故它没有加载。或者，更有可能的是，我做错了其他事情。这不像我的代码的最终结果应该是什么样的，现在我只是想逐行读出我的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T00:28:28.360

我想您确实需要帮助调试为什么会发生这种情况。

尝试在您的例程中添加更多代码，以帮助您确定发生了什么。要尝试的一件事是调用`getcwd`.

```
#include <unistd.h>

...
char buf[PATH_MAX];
std::cout << "cwd: " << getcwd(buf, sizeof(buf)) << std::endl;
... 
```

这应该向您报告您的程序认为它从哪里运行。

首先从那个开始，我猜接下来的步骤对你来说会变得很明显。

# javascript - jquery regex修剪url字符串的开头和结尾

> ID：10923221
> 
> 赞同：1
> 
> 时间：2012-06-06T22:27:43.037
> 
> 标签：javascript, jquery, regex

我有如下所示的 href 属性链接：

[http://company.com/inetucm/groups/public/@enterprise/documents/pagecontent/s_014654.html](http://company.com/inetucm/groups/public/@enterprise/documents/pagecontent/s_014654.html)

我想编写一个 jquery 函数，将**s_014654**设置为一个变量，稍后我将使用它来创建不同的 url 结构。

有人可以帮我解决这个语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T22:30:23.213

```
var url = ....;
var arr = url.split('/');
var value = arr.pop().match(/^(.+)\.html$/)[1];
alert(value); // "s_014654" 
```

[**现场演示**](http://jsfiddle.net/Fjp8E/1)

* * *

更新：（基于评论）

```
<a href="http://company.com/inetucm/groups/public/@enterprise/documents/pagecontent/s_014654.html" />
<a href="http://company.com/inetucm/groups/public/@enterprise/documents/pagecontent/AAAAAAAA.html" />
<a href="http://company.com/inetucm/groups/public/@enterprise/documents/pagecontent/BBB.html" />    
<a href="http://company.com/inetucm/groups/public/@enterprise/documents/pagecontent/fdskl489j.html" /> 
```

**jQuery：** ​</p>

```
var arr = $('a').map(function(){ 
    return this.href.split('/').pop().match(/^(.+)\.html$/)[1]; 
}).get(); 
```

这将返回数组中的所有值。

[**现场演示**](http://jsfiddle.net/Fjp8E/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T22:34:07.680

像这样的东西：

```
var url = "http://company.com/inetucm/groups/public/@enterprise/documents/pagecontent/s_014654.html";

var value = url.match(/([^/]+)\.html$/)[1]; 
```

感谢 gdoron 用我自己的正则表达式更新的小提琴：http: [//jsfiddle.net/Fjp8E/2/](http://jsfiddle.net/Fjp8E/2/)

该模式`([^/]+)\.html$`查找一个或多个非斜线字符，该字符后跟在字符串末尾的“.html”。

# javascript - 用于匹配 \sSTUFF\r 中的内容的正则表达式

> ID：10923223
> 
> 赞同：1
> 
> 时间：2012-06-06T22:28:02.477
> 
> 标签：javascript, regex

我得到了一个可怕的分隔符字符串。每个 id 都被左侧的空格（' '）和右侧的回车（'\r'）包围。我想拆分这个字符串并取回 javascript 中的所有 id。

例如： `' hey\r my\r name\r is\r'`应该返回数组`['hey', 'my', 'name', 'is']`

到目前为止，我尝试过：

```
str.split(/ (.+)\r/g)
str.split(/(?:\s)(.+)(?:\r)/)
str.split(/\s(.+?=\r)/) 
```

一切都无济于事。我得到了最接近的`str.split(/(?:\s)(.+)(?:\r)/)`，但它给了我： `['', 'hey', '', 'my', '', 'name', '', 'is', '']`。什么匹配空字符串？

匹配这个的正则表达式是什么？

编辑：

Id 可以有任何其他空白字符，所以这是一个有效的 id：123\t234\n。' abc\r 123\n456\t\r' 应该返回 ['abc', '123\n456\t' ]

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T22:31:17.340

怎么样：

```
var parts = str.replace(/^\s+|\s+$/g, '').split(/\s+/) 
```

也就是说，删除前导和尾随空白字符，然后只拆分内部空白字符（并将它们全部消耗掉）。

```
> var str = ' hey\r my\r name\r is\r'
  undefined
> str.replace(/^\s+|\s+$/g, '').split(/\s+/)
  ["hey", "my", "name", "is"] 
```

* * *

如果您只想拆分，`\r`则：

```
.split(/\r +/) 
```

您可以将修剪更改为：

```
.replace(/^[\r ]+|[\r ]+$/g, '') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T22:49:10.943

也许我无法理解问题的难度，但你为什么不能简单地使用：

```
str.replace(/^[ ]?|[ ]?$/, "").split("\r "); 
```

它似乎适用于您的所有示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T22:56:58.350

```
\s*(\S*)\s*\r 
```

您的比赛将在第 1 组

在javascript中，您可以遍历所有匹配项并像这样捕获

```
var myregexp = /\s*(\S*)\s*\r/g;
var match = myregexp.exec(subject);
while (match != null) {
    for (var i = 0; i < match.length; i++) {
        // matched text: match[i]
    }
    match = myregexp.exec(subject);
} 
```

# windows-phone-7 - 将图像保存到 Windows Phone 7 图片集线器

> ID：10923225
> 
> 赞同：1
> 
> 时间：2012-06-06T22:28:38.173
> 
> 标签：windows-phone-7, save, image

我正在尝试将列表框中的选定图片保存到手机的内存中，但我不明白为什么我会收到“InvalidOperationException was Unhandled”错误。

```
 var filePath = "Uploads/" + fileListBox.SelectedItem;
        var fileUriSource = new Uri(filePath, UriKind.Relative);

        using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            using (IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile(filePath.ToString(), FileMode.Open))
            {
                MediaLibrary mediaLibrary = new MediaLibrary();
                Picture pic = mediaLibrary.SavePicture("saved" + filePath.ToString(), fileStream);
                fileStream.Close();
            }
        } 
```

我已经在互联网上搜索，但我找不到任何答案。任何帮助都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:54:44.263

根据[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.medialibrary.savepicture.aspx)：

> 无效操作异常
> 
> 如果在用户连接到正在运行的计算机时调用 SavePicture，则会引发异常。

这是因为库在连接到 PC 上的 Zune 时被锁定，以避免在同步期间更改文件出现任何问题。
如果您必须在连接时在设备上执行此操作，您可以[使用 WPConnect 工具](http://msdn.microsoft.com/en-us/library/gg180729%28v=vs.92%29.aspx)而不是 Zune。

# c# - WPF 中的 Metro 风格进度条

> ID：10923226
> 
> 赞同：4
> 
> 时间：2012-06-06T22:28:39.160
> 
> 标签：c#, devexpress, progress-bar, microsoft-metro

有什么方法可以在 WPF 中创建 Windows 8 ProgressBar？

我不是指转弯圈，我是指像那样**动画**的那个（带有蓝点）：

[http://blog.humann.info/image.axd?picture=2012%2f3%2fanimated_loader.gif](http://blog.humann.info/image.axd?picture=2012%2f3%2fanimated_loader.gif)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-27T13:35:29.093

此控件在开源**[MahApps.Metro](https://github.com/MahApps/MahApps.Metro)**控件集合中实现为**MetroProgressBar**控件。

这个库中您可能感兴趣的另一个稍有不同的加载控件是[ProgressRing](http://mahapps.com/MahApps.Metro/#progress_ring)。

# java - 在java中打印出一系列数字

> ID：10923229
> 
> 赞同：1
> 
> 时间：2012-06-06T22:29:17.863
> 
> 标签：java, for-loop

大家好，我只是在为自己做一些阅读以学习 Java，并遇到了这个问题，目前被卡住了。

我需要根据用户给出的输入打印出一系列数字。例如，如果输入 = 5，则输出应如下所示

@1@22@333@4444@55555

```
 import java.util.*;

public class ex5{
        public static void main(String[] args){
                Scanner kb = new Scanner(System.in);
                System.out.println("Please type a #: ");

                int input = kb.nextInt();

                for(int i=0;i<input;i++){
                        if(input==1){
                                System.out.print("@1");
                        }
                        if(input==2){
                                System.out.print("@1@22");
                        }
                }

        }
} 
```

这似乎不起作用，因为这是我得到的输出

请输入 #: 2 @1@22@1@22

我现在不确定要在 for 循环中放什么，而且我认为我在这里也没有很好地使用 for 循环...

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T22:33:22.693

你需要一个嵌套的for循环来解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T22:33:32.590

是的，这不是你想要的方式。您将要在 for 循环中构建字符串。

从一个新字符串开始

`String s = "";`

循环时，添加到该字符串。

```
for(int i=1;i<=input;i++){
     s += @;
     for(int j=0; j<i; j++) {
         s+=i;
     }
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T22:35:15.987

```
 for (int i=1; i<=5; i++){
        System.out.print("@");
        for (int j=1; j<=i; j++) System.out.print(i);
    } 
```

出去

```
@1@22@333@4444@55555 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T22:34:22.930

您需要使用嵌套`for`循环。

```
public static void main(String[] args) {
    Scanner kb = new Scanner(System.in);
    System.out.println("Please type a #: ");

    int input = kb.nextInt();

    for (int i = 1; i <= input; i++) {
        System.out.print("@");
        for (int k = 0; k < i; k++) {
            System.out.print(i);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T22:37:39.410

这是因为您正在检查 if 语句中的数字 1 和 2。它是硬编码的，只检查这两个数字，一旦超过你有 if 语句的值，它就不起作用

您要做的是输出迭代器的值（在您的情况下为 i）i 次（提示，您可以在大循环中使用另一个循环），然后在字符串末尾添加一个 @ 符号。

我会尽量不给你任何代码，这样你就可以自己学习，但请随时提出更多问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-06T22:35:22.547

您正在尝试打印给定的数量 - 给定的次数？然后你需要两个循环 - 用于迭代数字的外部循环和内部 - 用于迭代*-倍给定的数字。*

 *它会是这样的：

```
for(int i = 0; i < input; ++i) {
    System.out.print("@");
    for(int j = 0; j < i; ++j) {
        System.out.print(i);
    }
} 
```*

# drupal-7 - 尝试查看节点时，hook_menu_alter() 访问回调返回 TRUE 导致节点列表

> ID：10923232
> 
> 赞同：1
> 
> 时间：2012-06-06T22:29:36.717
> 
> 标签：drupal-7

我似乎无法弄清楚如何实现 hook_menu_alter() 来控制对节点的访问。我从一个裸 Drupal 7 安装开始，创建了两个节点，并创建了一个只有以下代码的模块：

```
function mymodule_menu_alter(&$items){
    $items['node/2']['access callback'] = TRUE;
} 
```

这应该模拟一个返回 TRUE 的实际回调函数，这是我开始的地方。但我试图在这里展示最简单的情况。

如果我将访问回调设置为“FALSE”，它会按预期工作：我在 node/2 上得到“访问被拒绝”。但是如果我将它设置为 TRUE，我不应该只是正常访问节点吗？相反，当我转到 node/2 时，我得到一个类似于（但不完全相同）默认首页的页面：节点预告片列表（在这种情况下，显示我创建的两个节点）。

我已经清除了缓存（因为我知道 hook_menu_alter() 不会在每个页面视图上调用，而是在缓存被清除时调用）。我也重建了权限，但无济于事。我确定我在这里遗漏了一些愚蠢的东西，但我就是想不出来。

我还尝试了一个实际的回调：

```
function mymodule_menu_alter(&$items){
    $items['node/2']['access callback'] = 'mymodule_access_check';
}
function mymodule_access_check() {
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T07:15:59.883

**node/2**不是菜单项。节点的菜单项实际上是**node/%**，因此要更改它的回调，您必须这样做：

```
/**
 * Implements hook_menu_alter().
 */
function mymodule_menu_alter(&$items) {
  $items['node/%node']['access callback'] = 'mymodule_access_check';
}

function mymodule_access_check($op, $node) {
  if ($node->nid == 2 && $some_condition) {
    return TRUE;
  }
  else {
    return FALSE;
  }
} 
```

注意我在函数 args 中添加了 $op （将是“视图”）和 $node （将加载节点对象），因为它们将通过“访问参数”传递给它，所以在你的 mymodule_access_check 函数中你可以访问节点信息。

# .net - 如何通过（cmd）Process对象调用路径中的exe？

> ID：10923233
> 
> 赞同：0
> 
> 时间：2012-06-06T22:29:44.437
> 
> 标签：.net, cmd

```
 var cmd = new Process();
        cmd.StartInfo.FileName = "cmd.exe";
        cmd.StartInfo.RedirectStandardInput = true;
        cmd.StartInfo.RedirectStandardOutput = true;
        cmd.StartInfo.CreateNoWindow = true;
        cmd.StartInfo.UseShellExecute = false;

        cmd.Start();

        cmd.StandardInput.WriteLine(Input.Text);
        cmd.StandardInput.Flush();
        cmd.StandardInput.Close();
        Output.Text += cmd.StandardOutput.ReadToEnd();
        Output.Text += "\n"; 
```

从路径调用 .exe 时，不显示标准输出。

**编辑：似乎输出进入了标准错误，这给了我这样的感觉，即 .exe 并没有真正被调用。解决了**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T22:39:01.040

在开始该过程之前尝试一下：

```
Environment.SetEnvironmentVariable("path", pathValue); 
```

参考：http: [//msdn.microsoft.com/en-us/library/z46c489x.aspx](http://msdn.microsoft.com/en-us/library/z46c489x.aspx)

但是当你这样做时，我认为你应该连接路径环境值的当前值

# python - python plistlib文件被可可值入侵？

> ID：10923234
> 
> 赞同：3
> 
> 时间：2012-06-06T22:29:49.143
> 
> 标签：python, plist

我正在使用 plistlib 在 OS X 中创建和更新一个简单的 plist 文件。挪威的一名测试人员从 plistlib 收到错误消息：

```
File "../axeomatic2/normal/build/pyi.darwin/aomDSP/out03-PYZ.pyz/plistlib", line 406, in parse
xml.parsers.expat.ExpatError: not well-formed (invalid token): line 1, column 8 
```

查看在他的系统上生成的 plist 文件，我看到这样的字段散布着预期的条目：

```
NSTableView Sort Ordering       Array
...
NSTableView Hidden Columns      Array
...
NSTableView Columns             Array
...
NSNavLastRootDirectory          Array 
```

如果我从我的系统中给他一个 plist，它可以正常工作，但是任何时候程序决定它需要从头开始创建一个它都会出错。

我想这可能是一个编码问题，但我们都在 OS X 10.7 上，并且都使用 UTF-8 的 OS X 版本。

关于可能发生的事情，或者我如何远程解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:23:35.147

我之前遇到过类似的问题，在我尝试[biplist](https://github.com/wooster/biplist)之后，它已经解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-01T04:55:39.403

`plistlib`自 python 3.4 以来 ，已添加二进制 plist 支持。[https://docs.python.org/3.4/library/plistlib.html](https://docs.python.org/3.4/library/plistlib.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-23T08:43:09.050

实际上有两类`plist`格式。一个实际上是简单的 XML 文件（`plistlib`知道如何用 解析`expat`），另一个是`binary property list`.

不幸的是，它们都共享相同的后缀`.plist`，Apple 的所有工具都透明地对待它们（例如，您不知道您使用的是 XML plist 还是二进制 plist，使用类似的工具`defaults`）

就像@northtree 所说，该`biplist`软件包是读取/写入二进制 plist 文件的正确工具。

更新：

您还可以使用`plutil(1)`OSX 自带的将任何`plist`文件转换回 XML 格式，然后由`plistlib`

[https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/plutil.1.html](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/plutil.1.html)

# opengl - GPU 如何同时支持 OpenGL 和 DirectX API 执行？

> ID：10923236
> 
> 赞同：10
> 
> 时间：2012-06-06T22:30:14.020
> 
> 标签：opengl, directx, gpu

我试图了解 OpenGL 和 DirectX 如何与显卡一起工作。

如果我在 OpenGL 中编写一个程序来做一个三角形，而另一个在 DirectX 中做同样的事情，那么 GPU 端到底发生了什么？

当我们运行程序时，每次调用 OpenGL 库和每次调用 DirectX 库都会为 GPU 生成代码，而这两个程序生成的 GPU 机器码是一样的吗？（就像如果 DirectX 和 OpenGL 就像 Java 字节码一样，预编译，那么当它实际运行时，它会产生同样的东西）

或者 GPU 是否有 2 个不同的指令集，每个指令集一个。我的意思是，GPU 的精确 OpenGL 和 DirectX 是什么，它如何区分 2 API？

这仅与程序员的角度不同吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T06:10:56.250

我已经在这里回答了[在 Windows 上，OpenGL 与 DirectX 有何不同？](https://stackoverflow.com/questions/7372458/on-windows-how-does-opengl-differ-from-directx/7372760#7372760)

以下是其中一个答案的完整引用

* * *

这个问题几乎不可能回答，因为 OpenGL 本身只是一个前端 API，只要实现符合规范并且结果符合此规范，就可以按照您喜欢的任何方式完成。

问题可能是：OpenGL 驱动程序如何在最低级别工作。现在这又是不可能的，因为驱动程序与某些硬件密切相关，这可能会再次执行开发人员设计的操作。

所以问题应该是：“它在 OpenGL 和图形系统的幕后平均看起来如何？”。让我们从下往上看：

1.  在最低级别有一些图形设备。现在这些 GPU 提供了一组寄存器来控制它们的操作（这些寄存器完全取决于设备）有一些用于着色器的程序内存、用于输入数据（顶点、纹理等）的大容量内存以及用于其余部分的 I/O 通道它接收/发送数据和命令流的系统。

2.  图形驱动程序跟踪 GPU 状态和使用 GPU 的所有资源应用程序。它还负责转换或任何其他处理应用程序发送的数据（将纹理转换为 GPU 支持的像素格式，在 GPU 的机器代码中编译着色器）。此外，它还为应用程序提供了一些抽象的、依赖于驱动程序的接口。

3.  然后是依赖于驱动程序的 OpenGL 客户端库/驱动程序。在 Windows 上，它由代理通过 opengl32.dll 加载，在 Unix 系统上，它位于两个位置：

    *   X11 GLX 模块和驱动依赖 GLX 驱动
    *   和 /usr/lib/libGL.so 可能包含一些依赖于驱动程序的东西，用于直接渲染

    在 MacOS X 上，这恰好是“OpenGL 框架”。

    正是这部分将 OpenGL 调用转换为对 (2) 中描述的驱动程序部分中的驱动程序特定函数的调用。

4.  最后是实际的 OpenGL API 库，Windows 中的 opengl32.dll 和 Unix 中的 /usr/lib/libGL.so；这主要只是将命令传递给正确的 OpenGL 实现。

实际通信是如何发生的不能一概而论：

在 Unix 中，3<->4 连接可能发生在套接字上（是的，它可能，并且如果你愿意，它确实会通过网络）或通过共享内存。在 Windows 中，接口库和驱动程序客户端都加载到进程地址空间中，因此没有太多的通信，而是简单的函数调用和变量/指针传递。在 MacOS X 中，这类似于 Windows，只是 OpenGL 接口和驱动程序客户端之间没有分离（这就是为什么 MacOS X 跟上新的 OpenGL 版本的速度如此缓慢的原因，它总是需要完整的操作系统升级才能提供新的框架）。

3<->2 之间的通信可以通过 ioctl、读/写，或者通过将一些内存映射到进程地址空间并配置 MMU 以在对该内存进行更改时触发一些驱动程序代码。这在任何操作系统上都非常相似，因为您总是必须跨越内核/用户空间边界：最终您会经历一些系统调用。

系统和 GPU 之间的通信通过外围总线及其定义的访问方法发生，因此 PCI、AGP、PCI-E 等通过端口 I/O、内存映射 I/O、DMA、IRQ 工作。

# javascript - 带有 jQ uery 的 Internet Explorer 上的 Javascript 错误，但在 Firefox 上运行良好

> ID：10923239
> 
> 赞同：2
> 
> 时间：2012-06-06T22:30:27.420
> 
> 标签：javascript, jquery, magento, prototypejs

一个快速的问题，我希望有人可以帮助我。

在 Firefox 上，我们的 jQuery 滑块运行良好，但是在使用 Internet Explorer 查看时，会出现一些 javascript 错误。该网站是[http://foscam-uk.com/index.php](http://foscam-uk.com/index.php)

希望有一个可能的解决方案。

亲切的问候和感谢！

错误：网页错误详情

用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 6.1；WOW64；Trident/4.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；Media Center PC 6.0； .NET4.0C；.NET4.0E；InfoPath.3) 时间戳：2012 年 6 月 6 日星期三 22:36:43 UTC

消息：对象不支持此属性或方法行：5653 字符：9 代码：0 URI： http: [//foscam-uk.com/js/prototype/prototype.js](http://foscam-uk.com/js/prototype/prototype.js)

消息：对象不支持此属性或方法行：5988 字符：5 代码：0 URI： http: [//foscam-uk.com/js/prototype/prototype.js](http://foscam-uk.com/js/prototype/prototype.js)

消息：对象不支持此属性或方法行：2 字符：5 代码：0 URI： http: [//foscam-uk.com/skin/frontend/default/theme316/js/scripts.js](http://foscam-uk.com/skin/frontend/default/theme316/js/scripts.js)

消息：对象不支持此属性或方法行：5736 字符：7 代码：0 URI： http: [//foscam-uk.com/js/prototype/prototype.js](http://foscam-uk.com/js/prototype/prototype.js)

消息：对象不支持此属性或方法行：5988 字符：5 代码：0 URI： http: [//foscam-uk.com/js/prototype/prototype.js](http://foscam-uk.com/js/prototype/prototype.js)

消息：对象不支持此属性或方法行：73 字符：11 代码：0 URI： http: [//foscam-uk.com/index.php](http://foscam-uk.com/index.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T22:45:05.537

IE 对 CSS 和 JS 文件的数量有一些限制。（大约 30 个）。我没数过，但似乎你有大量的 JS 和 css 文件引用。如果超过这个IE基本上停止下载脚本或css文件。您可以使用 Fiddler 自行验证。

尝试使用压缩工具将它们压缩为单个文件（例如：http: [//developer.yahoo.com/yui/compressor/](http://developer.yahoo.com/yui/compressor/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T19:16:14.047

所以看起来你正在加载几个第三方库。您正在加载 PrototypeJS、Scriptaculous、jQuery 和 jQuery 插件*。在我看来，您所拥有的与其说是 JavaScript 问题，不如说是插件组织问题。

现在，您似乎确实在一个地方使用了类似的东西`jQuery.noConflict()`，但在另一个地方却没有。

我的建议是停用您在网站上使用的所有当前注入 JavaScript 的模块，然后一次重新启用它们。每次重新启用插件时，请检查是否该插件以及所有其他插件是否正常工作。

* * *

*实际上，您加载的不仅仅是几个库。您实际上正在加载*两个版本的 jQuery*以及 Prototype。这不是一个好习惯。这是我可以看到的，不包括正在插入的 Magento 生成的代码：

*   原型 1.7
*   信用卡验证Javascript
*   使用 Prototype 进行非常简单的字段验证
*   script.aculo.us builder.js
*   script.aculo.us effects.js
*   script.aculo.us controls.js
*   script.aculo.us 滑块.js
*   jQuery 1.4.2
*   jCarouselLite
*   jQuery 1.7.1
*   TMSlider：基于 jQuery 的图像滑块
*   jQuery 缓动 v1.3

您需要重新考虑如何处理其中一些影响。这些库的作用有很多重叠，您最好看看是否有一种方法可以在您选择的模块中创建一些理智。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T22:36:38.780

prototype.js 似乎在每个浏览器中都会抛出错误，但这些似乎对您的网站没有影响。

您的网站在 IE7 和 IE10 中运行良好。在 IE8 中，您的 jQuery 版本会引发错误，而不是滑块代码。我会将 jQuery 的 1.7.1 版本升级到 1.7.2（最新）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T12:33:14.170

我的客户端脚本也有类似的问题。即使该站点在 IE8 和 IE9 中运行，IE10 F12 开发工具脚本选项卡也会显示 jQuery 语法错误。

我使用的库之一（Telerik Kendo UI）还不兼容 IE10。

为了强制 IE10 显示页面，我必须将此元标记添加到我的 HEAD 标记的最顶部（头中的第一项）：

```
 <meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

然后页面再次工作。

# mysql - 如何嵌套两个 count() 语句？

> ID：10923240
> 
> 赞同：0
> 
> 时间：2012-06-06T22:30:40.267
> 
> 标签：mysql

想象一个三列的表，假设列有它们曾经去过`TRAVELS`的列`NAME`，这样就可以有重复的 NAME+COUNTRY 行。`COUNTRY``DATE`

--> 我不想显示实际`NAME`值，也不想显示实际`COUNTRY`值 - 只是它们的**计数**，仅适用于那些访问过 1 个以上国家的人。

这将是一个这样的列表：

> | 9 | 2 | *意思是 9 人去过 2 个国家，*
> | 4 | 3 | *表示 4 人访问了 3 个国家，*
> | 2 | 4 | *意思是 2 人去过 4 个国家，*
> 等等。

我在 SQL 方面很糟糕，但我想我需要构建某种**嵌套查询：**

```
select count(t1.NAME)
from TRAVELS t1
where (
  select count(distinct COUNTRY) 
  from TRAVELS t2
  where t1.name = t2.name
    and count(t2.COUNTRY) > 1
) 
```

显然这不起作用，但我希望它表明我的总体意图。我还没有找到关于这种嵌套重复计数的任何信息，尽管一旦我看到它可能就足够简单了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T22:46:45.387

在这里试试：[http ://sqlfiddle.com/#!2/b0762/3](http://sqlfiddle.com/#!2/b0762/3)

查询：

```
select
    count(*) as people,
    countries_visited
from (
    select
      name,
      count(distinct country) as countries_visited
    from travels
    group by name
    having count(distinct country) > 1
) s
group by countries_visited
order by people desc, countries_visited desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T22:45:04.010

```
select country_count, count(*) as people_count 
  from (select name, count(distinct country) as country_count 
          from travels 
         group by name 
        having count(distinct country) > 1)
group by country_count 
```

当然，这假设名称是唯一的。如果不是，您可能希望使用 user_id 代替名称。

# python - 使用 python 操作原始二进制图像数据

> ID：10923242
> 
> 赞同：3
> 
> 时间：2012-06-06T22:30:50.210
> 
> 标签：python, image, image-processing, python-imaging-library, rgb

我有一个存储为 .bin 文件的原始二进制图像，上面有一些重要数据。问题是颜色信息有点偏离，所以我需要稍微改变一下。有什么方法可以让我将 R、G 和 B 值乘以一个标量，然后将其保存为原始二进制文件？

我希望使用 python 成像库来做到这一点，因为我已经知道图像模块的基础知识。我需要将每个像素乘以相同的值，但对于 R、G 和 B，它将是不同的值。我有以下代码来打开文件，但是我不知道如何在那里改变 RGB 值.

```
fileName = raw_input("Enter a file name: ")

with open(fileName) as f:
    im = Image.fromstring('RGB', (3032, 2016), f.read()) 
```

如果您需要更多信息，请告诉我。

**更新**：

我编写了以下代码，它以我想要的方式转换图像，但它给了我一个错误。代码如下：

```
with open(C:\Users\name\imagedata\visiblespec.bin, 'rb') as f:
    im = Image.fromstring('RGB', (3032, 2016), f.read())

im = im.convert('RGB')
r, g, b = im.split()
r = r.point(lambda i: i * (255/171))
g = g.point(lambda i: i * (255/107))
b = b.point(lambda i: i * (255/157))
out = Image.merge('RGB', (r, g, b))

out.save(C:\Users\name\imagedata\visiblespecredone.bin) 
```

我的错误是这样的：

```
Traceback (most recent call last):
  File "C:\Users\Patrick\workspace\colorCorrect\src\rawImage.py", line 18, in <module>
    im = Image.fromstring('RGB', (3032, 2016), f.read()) 
  File "C:\Python27\lib\site-packages\PIL\Image.py", line 1797, in fromstring
    im.fromstring(data, decoder_name, args)
  File "C:\Python27\lib\site-packages\PIL\Image.py", line 594, in fromstring
    raise ValueError("not enough image data")
ValueError: not enough image data 
```

这可能是编辑 RGB 值的完全错误的方法，我知道它适用于 JPEG，而 t 可能只适用于 JPEG，但这是我想做的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:59:08.843

```
import numpy as np

shape = (2016, 3032)
im = np.fromfile('visiblespec.bin', 'uint16').reshape(shape)

def tile(pattern, shape):
    return np.tile(np.array(pattern, 'bool'), (shape[0] // 2, shape[1] // 2))

r = tile([[0, 0], [0, 1]], shape)
g = tile([[0, 1], [1, 0]], shape)
b = tile([[1, 0], [0, 0]], shape)

im = im.astype('float32')
im[r] *= 255 / 171.
im[g] *= 255 / 107.
im[b] *= 255 / 157.
np.rint(im, out=im)
np.clip(im, 0, 65535, out=im)
im = im.astype('uint16')

im.tofile('visiblespecredone.bin') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T22:41:49.743

您可能希望使用 Python 绑定或[PIL](http://www.pythonware.com/products/pil/)查看[ImageMagick](http://www.imagemagick.org/script/index.php)。

如果您只需要*读取文件*并操作二进制数据，请执行以下操作：

```
with open(filename, 'rb') as img:
   wrd=img.read(2)
   while wrd:
       # wrd == 2 bytes == your 16 bits... 
```

# c# - C#/XNA 巨大的内存泄漏

> ID：10923246
> 
> 赞同：3
> 
> 时间：2012-06-06T22:31:05.747
> 
> 标签：c#, memory-leaks, xna

这是我在此的头一篇博文。我正在使用 XNA 在 Visual Studio 2010 中制作游戏，但我遇到了巨大的内存泄漏。我的游戏开始使用 17k 内存，然后在十分钟后达到 65k。我运行了一些内存分析器，它们都说正在创建 String 对象的新实例，但它们不是实时的。String 的活动实例的数量根本没有改变。它还创建了 Char[]（我期望它）、Object[] 和 StringBuilder 的实例。我的游戏很新，但是这里发布的代码太多。我不知道如何摆脱不活跃的实例，请帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T02:01:40.170

您没有发布足够的信息来为您提供比有根据的猜测更多的信息。这是我有根据的猜测：

如果你在 Draw 方法中做这样的事情：

```
spriteBatch.DrawString(font, "Score: " + score, location, Color.Black);
spriteBatch.DrawString(font, "Something else: " + foo, overHere, Color.Black);
spriteBatch.DrawString(font, "And also: " + bar, overThere, Color.Black); 
```

然后，这些调用中的每一个都将在每次运行时在您背后创建新对象`string`。`StringBuilder`因为它们在您的`Draw`方法中，所以每个可能每秒运行 60 次。那是分配了很多临时对象！

要验证是否是这种情况 - 使用 CLR Profiler。听起来你已经这样做了。

虽然这并不是真正的“泄漏”——垃圾收集器最终会清理它们——但这种分配模式在游戏中是不可取的。请参阅[此博客文章](http://blogs.msdn.com/b/shawnhar/archive/2007/07/02/twin-paths-to-garbage-collector-nirvana.aspx)，了解在游戏中处理垃圾收集的两种方法。方法 1 通常更容易并提供更好的结果 - 所以我在这里讨论它。

在这一点上值得一提的是，PC 上的 GC 足够快，这样的分配**并不重要**。GC 会以很少的开销清理微小的对象（比如你的临时字符串）。

另一方面，在 Xbox 360 上，即使像这样定期产生少量垃圾也会导致一些严重的性能问题。（我不确定 WP7，但我个人会像 Xbox 一样对待它——小心！）

**我们如何解决这个问题？**

答案很简单：`DrawString`将接受一个`StringBuilder`代替的实例`string`。每次需要将自定义字符串放在一起时，创建一个实例`StringBuilder`然后重用它。

请注意，将数字或其他对象隐式或通过其`ToString()`方法转换为字符串也会导致分配。因此，您可能必须编写自己的自定义代码来追加`StringBuilder`而不导致分配。

这是我以扩展方法的形式使用的一种方法，用于将整数附加到字符串而不分配：

```
public static class StringBuilderExtensions
{
    // 11 characters will fit -4294967296
    static char[] numberBuffer = new char[11];

    /// <summary>Append an integer without generating any garbage.</summary>
    public static StringBuilder AppendNumber(this StringBuilder sb, Int32 number)
    {
        bool negative = (number < 0);
        if(negative)
            number = -number;

        int i = numberBuffer.Length;
        do
        {
            numberBuffer[--i] = (char)('0' + (number % 10));
            number /= 10;
        }
        while(number > 0);

        if(negative)
            numberBuffer[--i] = '-';

        sb.Append(numberBuffer, i, numberBuffer.Length - i);

        return sb;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T22:36:19.023

C# 中没有内存泄漏（或者说，它们*很难*获得）。你所经历的是正常的。垃圾收集器不会“感觉”它需要收集内存，所以它不需要。每当内存不足时，就会发生垃圾收集。如果您*绝对*确定您没有保留对您`string`的 s 的不必要引用，那么一切都很好。

如果要强制 GC 循环，请使用`GC.Collect()`.

# c# - C# 中数组的 Java .length 等价物是多少？

> ID：10923249
> 
> 赞同：0
> 
> 时间：2012-06-06T22:31:18.383
> 
> 标签：c#, java

我是 C# 新手，我正在尝试将此代码从 java 转换为 C#。

```
 static public double euclidean_2(double[] x, double[] y)
    {
        if (x.length != y.length) throw new RuntimeException("Arguments must have same number of dimensions.");

        double cumssq = 0.0;
        for (int i = 0; i < x.length; i++)
            cumssq += (x[i] - y[i]) * (x[i] - y[i]);

        return cumssq;
    } 
```

我知道 java 使用 .length 但 C# 中的等价物是什么，因为我不断收到错误

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T22:33:00.823

在 C# 中，公共成员应大写：

```
for (int i = 0; i < x.Length; i++)
    cumssq += (x[i] - y[i]) * (x[i] - y[i]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T22:34:08.347

对于数组，您需要该`Length`属性。

异常类型也应该改变。

我认为这涵盖了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T22:37:18.070

`length`应该是，`Length`因为公共成员应该大写，所以你在 C# 中的代码应该是这样的：

```
public static double euclidean_2(double[] x, double[] y){
    if (x.Length != y.Length){
        throw new Exception("Arguments must have same number of dimensions.");
    }
    double cumssq = 0.0;
    for (int i = 0; i < x.Length; i++){
        cumssq += (x[i] - y[i]) * (x[i] - y[i]);
    }
    return cumssq;
} 
```

还要记下关键字`Exception`而不是`Runtime Exception`

# java - Mongo Java 在无效的主机/端口上连接，它真的在连接吗？

> ID：10923251
> 
> 赞同：1
> 
> 时间：2012-06-06T22:31:42.597
> 
> 标签：java, mongodb, mongo-java

我有以下代码

```
public class MongoService {

    private final Mongo mongo;
    private static final Logger LOGGER = LoggerFactory.getLogger(MongoService.class);

    public MongoService() throws UnknownHostException {
        mongo = new Mongo("localhot", 2707);
        DB db = mongo.getDB("contract");
        LOGGER.info(db.getCollection("Test").getName());
    }

    public Mongo getMongoInstance() {
        return mongo;
    }

    public void insert() {
        LOGGER.info("will run mongo insert now");
    }

    public void query() {
        LOGGER.info("will run query now");
    }

    public static void main(String args[]) throws UnknownHostException {
        MongoService mongoService = new MongoService();
        mongoService.insert();
        mongoService.query();

    }
} 
```

输出

```
15:26:07.509 [main] INFO  c.s.s.business.persist.MongoService - Test
15:26:07.514 [main] INFO  c.s.s.business.persist.MongoService - will run mongo insert now
15:26:07.514 [main] INFO  c.s.s.business.persist.MongoService - will run query now 
```

*   主机（应该是 localhost）和端口（应该是 27017）显然是错误的，但是当我运行这个程序时，它运行并且没有给出任何异常

*   真的有联系吗？？我确定没有，那么如何处理这种情况呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:41:18.837

mongo.getDB("contract") 只是创建一个 DB 对象并将其放入 mongo-java-driver 内部缓存中。

AFAIK，仅当请求（即，查找、插入等操作）发送到数据库时，才从池中获得连接。

尝试执行 findOne 操作，应该会发生 IOException：

```
java.io.IOException: couldn't connect to [/127.0.0.1:2017] bc:java.net.ConnectException: Connection refused
    at com.mongodb.DBPort._open(DBPort.java:228)
    at com.mongodb.DBPort.go(DBPort.java:112)
    at com.mongodb.DBPort.go(DBPort.java:93)
    at com.mongodb.DBPort.findOne(DBPort.java:146)
    at com.mongodb.DBPort.runCommand(DBPort.java:157)
    at com.mongodb.DBTCPConnector.fetchMaxBsonObjectSize(DBTCPConnector.java:457)
    at com.mongodb.DBTCPConnector.checkMaster(DBTCPConnector.java:444)
    at com.mongodb.DBTCPConnector.call(DBTCPConnector.java:209)
    at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:305)
    at com.mongodb.DBCollection.findOne(DBCollection.java:647)
    at com.mongodb.DBCollection.findOne(DBCollection.java:626)
    at com.mongodb.DBCollection.findOne(DBCollection.java:615) 
```

# html - 当我使用外部样式表时，Firefox SVG 图像被切断

> ID：10923253
> 
> 赞同：3
> 
> 时间：2012-06-06T22:31:54.853
> 
> 标签：html, css, firefox, svg

鉴于[http://dpaste.com/756156/](http://dpaste.com/756156/)上的 SVG 文件，当我在`<object>`or`<embed>`标记中显示它时，它在 Firefox 中加载的大约一半时间，图像的底部被切断。使用内联 CSS 可以很好地呈现它，Chrome 和 IE9 也可以正常呈现。

我已经看到将“100%”的宽度和高度属性添加到 SVG 标记的建议，但这并没有帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-31T10:39:50.933

我自己刚刚遇到这个问题 [svg 被 Firefox 剪辑] 我找到了一个解决方案。这有点随机，没有逻辑，但它为我解决了这个问题。

我的 svg 是使用 Illustrator 使用贝塞尔曲线绘制的简单“云”形状。无论我画了多少次，浏览器都会裁剪右侧（类似于气泡形状）。再多的调整参数（例如 viewBox、x、y、宽度、高度）都无法修复它。- 它仍然被剪辑。事实上，通过调整这些参数，很明显它不是由它们中的任何一个引起的。

解决方案是向曲线添加更多数据。我只是在被剪裁的曲线上添加了另一个锚点，然后在 Firefox 中正确渲染。

随机但真实。希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-26T15:04:57.527

在处理多个图表库之后，这对我有用。

首先，将图表的 SVG 设置为可见性：隐藏；在 CSS 例如（#pie_chart .ct-chart-pie {visibility: hidden;} ）

然后重新渲染图表并将可见性更改为可见。

```
function show_popup(){ 
   Chartist.Pie('#pie_chart', data, options, responsiveOptions); 
   $("#pie_chart .ct-chart-pie").attr("style","visibility:visible !important;");   
}; 
window.setTimeout( show_popup, 1 ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T23:21:46.123

这可能是由于 Firefox 在加载样式表之前渲染了 SVG，然后没有意识到它需要更新它。尝试更改`onload`事件 (JavaScript) 中 SVG 标记的类名，如本页建议的那样：http: [//ajaxian.com/archives/forcing-a-ui-redraw-from-javascript](http://ajaxian.com/archives/forcing-a-ui-redraw-from-javascript)

如果这不起作用？`elm.parentNode.innerHTML += ''`尝试按照此 StackOverflow 问题的评论中的建议完全重新生成元素： [https ://stackoverflow.com/a/2922034/638544](https://stackoverflow.com/a/2922034/638544)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-26T15:17:42.653

这最近由 bug [1063073 修复](https://bugzilla.mozilla.org/show_bug.cgi?id=1063073)。该修复程序将出现在 Firefox 34 中，之后将不再需要解决方法。

# php - 缩略图图像未出现在网站上

> ID：10923254
> 
> 赞同：-2
> 
> 时间：2012-06-06T22:31:57.670
> 
> 标签：php, wordpress

我的 wordpress 主题有问题。缩略图不会出现在每个帖子上。我有一个游戏网站，每个游戏都有一个缩略图（图片）。但是现在图像没有出现。当我尝试查看图像时，我得到了这个：

```
Invalid src mime type: 
```

有问题的代码是：

```
<img src="<?php bloginfo('template_url');?>/thumb.php?src=<?=$thumb;?>&w=183&h=140&zc=1" class="thumb" alt="<?php the_title(); ?>" /> 
```

可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T22:50:46.253

浏览到您的网站，我看到了问题所在。如果您查看您的代码，它会像这样生成：

```
<img src="http://jocuri2k.com/wp-content/themes/Games/thumb.php?src=<?=$thumb?>... ?> 
```

您的 PHP 解析器似乎没有在标签中提取 php。尝试改用这个：

```
<img src="http://jocuri2k.com/wp-content/themes/Games/thumb.php?src=<?php=$thumb?>... ?> 
```

您的 php 配置可能不允许“短标签”

```
<?
  code here
?> 
```

但需要完整的 php 标签，它们是：

```
<?php
  code here
?> 
```

您可能可以在 php.ini 中覆盖它，但如果您无权访问它，只需使用完整的 php 标签，您就可以开始使用了。

```
<?php echo $thumb; ?> 
```

# java - 如何知道没有扩展名的文件类型

> ID：10923258
> 
> 赞同：2
> 
> 时间：2012-06-06T22:32:24.083
> 
> 标签：java, jakarta-ee, file-format, file-conversion

在尝试提出一个基于 servlet 的应用程序来读取文件并操作它们（图像类型转换）时，我想到了一个问题：

1.  是否可以检查文件内容并知道文件类型？
2.  是否有标准规定每个文件必须在其内容中提供某种类型的标记，以便应用程序不必依赖文件扩展名约束？

考虑一个应用场景：

我正在创建一个能够将不同的文件格式转换为一组输出格式的应用程序。假设用户上传 PDF，我的应用程序可以建议可能的转换格式是 microsoft word 或 TIFF 或 JPEG 等。

由于我的应用程序将逐渐支持不同的文件格式（在一段时间内），我希望我的应用程序检查输入文件，而不是让用户指定格式。并向用户建议可能的输出格式。

我知道这是一个开放式的、广泛的问题。如果需要修改，请告诉我。

谢谢，阿尤斯曼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T22:35:40.323

[是的，您可以使用幻数](http://en.wikipedia.org/wiki/File_format#Magic_number)找出没有扩展名的类型。此外，文件命令的计算方式实际上是通过 3 步检查：

1.  检查文件系统属性以识别空文件、文件夹等...
2.  所说的幻数
3.  在文本文件中，检查其中的语言

这是一个可以帮助您使用幻数的库：[jmimemagic](http://sourceforge.net/projects/jmimemagic/)

# css - HTML 电子邮件中的字体颜色 - Gmail

> ID：10923263
> 
> 赞同：19
> 
> 时间：2012-06-06T22:32:50.150
> 
> 标签：css, gmail, html-email

我知道我必须使用内联 CSS 来设置 HTML 电子邮件中的任何内容，但我注意到 gmail 中发生了一个奇怪的覆盖。我正在尝试更改表格行中文本的颜色：

```
<tr style='color: #000; font-size: 14px; font-family: Verdana, serif;'> 
```

但是当我在 gmail 中打开这封电子邮件时，字体系列和黑色被 gmail 样式覆盖。我通过 Firebug 看到了这个：

![在此处输入图像描述](../Images/5db3d380d5585c612fa81b4428c858cd.png)

使用紫色而不是我想要的黑色，字体系列默认为 arial，sans-serif。有谁知道一种安全地覆盖 gmail 强加给我的样式的方法？

**更新**

我将颜色更改为非黑色，即#212a2c，颜色更改正确，但字体系列仍然停留在 arial 上。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-06T22:43:24.290

看起来您正在设计 TR 的样式，但 gmail 已经超越了 TD 的样式。当 TD 和 TR 冲突时，TD 将获胜，因为它是最直接的容器......根据 css3 规则最接近的匹配。我认为如果您在 TD 上使用内联样式，您将能够超越它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T12:48:22.980

1.  `<tr>`不要在, 上`<td>`或`<span>`文本周围使用样式。
2.  如果您写#000、#000000 或黑色作为颜色，则无关紧要:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-17T19:23:52.967

根据经验，我发现使用颜色代码最安全的方法是始终使用 6 位数字代码 - 我曾经遇到过类似的问题，只需将颜色代码从 3 位更改为 6 位即可解决 - 不需要任何毕竟是时候输入 3 个额外的数字了 :)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-21T16:40:49.077

GMail 会将您的链接从黑色 (#000000) 更改为默认的蓝色，大概是作为一种反垃圾邮件功能。

要解决这个问题，只需将字体颜色更改为 (#000001)，例如

```
<a href="#" style="color: #000001;">Click HERE</a> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-09-07T08:27:40.963

*“无论你写#000、#000000 还是黑色作为颜色 :)”*

是的，有时电子邮件会以稍微不同的方式呈现 3 种十六进制颜色。根据经验，最好坚持使用 6 以实现兼容性。

# mysql - 如何仅使用日期从 DATETIME 列中进行选择？

> ID：10923264
> 
> 赞同：4
> 
> 时间：2012-06-06T22:32:52.003
> 
> 标签：mysql, sql, database, datetime

我的表上有一个 DATETIME 列，用于存储创建记录的时间。我只想选择在特定日期创建的记录。如果我尝试：

```
SELECT * 
FROM myTable
WHERE postedOn =  '2012-06-06' 
```

即使表中有许多行`postedOn`设置为 `2012-06-06 21:42:02`、`2012-06-06 07:55:17`等，它也不返回任何行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-06T22:36:12.800

使用[DATE](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date)标量：

```
SELECT * 
FROM myTable
WHERE date(postedOn) =  '2012-06-06' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T22:36:11.267

```
SELECT *
FROM myTable
WHERE DATE(postedOn) = '2012-06-06' 
```

DATE() 返回日期时间字段的日期部分。

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T22:44:37.183

通过在日期中添加一天来创建时间范围：

```
SELECT * 
FROM myTable
WHERE postedOn >= '2012-06-06' and postedOn < '2012-06-07' 
```

这是最有效的方式，因为查询可以使用字段上的索引。

# wordpress - shopify api 创建产品退货 404

> ID：10923265
> 
> 赞同：1
> 
> 时间：2012-06-06T22:32:53.380
> 
> 标签：wordpress, api, shopify

我正在创建一个从 WordPress 调用 Shopify API 的私有应用程序。当我调用创建新的 Shopify 产品时，API 会创建产品但返回 404 Not Found 错误。我相信我的代码是正确的，因为它成功地在运行 apache 和 PHP 5.2.x 的 Windows XP 机器上的本地主机上创建了产品和适当的成功响应。当我从运行的开发服务器运行它时，我遇到了问题，我假设，Linux、apache 和 PHP 5.3.x。什么会导致 Shopify API 创建产品但返回 404？我将在下面包含通话和响应的日志。这篇文章确实成功地创建了一个产品，但由于它返回了一个错误，我无法检索新创建的产品 ID。

谢谢，史蒂夫

2012-06-05 @ 17:47:36：请求发送到 https://xxx:xxx@colab-5.myshopify.com/admin/products.json 参数：数组（[方法] => POST [超时] = > 5 [redirection] => 5 [httpversion] => 1.0 [user-agent] => WordPress/3.3.2; http://xxx.colab.coop [blocking] => 1 [headers] => Array ( )

```
[cookies] => Array
    (
    )

[body] => Array
    (
        [product] => Array
            (
                [title] => Bracelet 7
                [body_html] => Bracelet 7 descr
                [vendor] => xxx
                [product_type] => bracelet
                [published] => 1
                [images] => Array
                    (
                        [src] => http://xxx.colab.coop/xxx/stb-1.png
                    )

                [variants] => Array
                    (
                        [option1] => small
                        [price] => 123
                        [inventory_management] => shopify
                        [sku] => 234
                        [grams] => 226.79618519019
                        [inventory_quantity] => 123
                    )

            )

    )

[compress] => 
[decompress] => 1
[sslverify] => 1
[stream] => 
[filename] => 
```

)

* * *

2012-06-05 @ 17:47:37：从 https://xxx:xxx@colab-5.myshopify.com/admin/products.json 收到响应传输：WP_HTTP_curl 响应：数组（[标题] => 数组（ [server] => nginx [date] => Tue, 05 Jun 2012 17:47:37 GMT [content-type] => text/html; charset=utf-8 [connection] => close [vary] => Accept -Encoding [status] => 404 Not Found [cache-control] => no-cache [x-request-id] => 62c48e7991c1f29cf5917727b160cee9 [x-ua-compatible] => IE=Edge,chrome=1 [x-runtime ] => 0.025681)

```
[body] => <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http 

://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <title>404 - Not Found</title>

    <link href="https://cdn.shopify.com/s/assets/dialog-ef6bd71e99b2c7a469ce6385ab855360.css" media="screen" rel="stylesheet" type="text/css" />

</head>

<body class="netural-dialog">

  <div id="container">
    <div id="dialog">
      <h1>Not Found</h1>

      <p class="c">The page you were looking for does not exist...</p>

    </div> <!-- dialog -->
  </div> <!-- container -->

  <div id="footer">
    <p><a href="http://www.shopify.com">Ecommerce Software by Shopify</a></p>
  </div>

</body>
</html>

[response] => Array
    (
        [code] => 404
        [message] => Not Found
    )

[cookies] => Array
    (
    )

[filename] => 
```

)

更新更多日志。这创建了 Shopify 产品 93781002。

```
*** REQUEST ***
2012-06-08 @ 00:14:20: request sent to 
https://xxx:xxx@colab-5.myshopify.com/admin/products.json
Parameters: Array
(
    [method] => POST
    [timeout] => 5
    [redirection] => 5
    [httpversion] => 1.0
    [user-agent] => WordPress/3.3.2; http://xxx.colab.coop
    [blocking] => 1
    [headers] => Array
        (
            [Content-Type] => application/json; charset=UTF-8
        )

    [cookies] => Array
        (
        )

    [body] => {"product":{"title":"Bracelet 2","body_html":"Bracelet 2 description","vendor":"Steve","product_type":"bracelet","published":true,"images":{"src":"http:\/\/lr.colab.coop\/wordpress\/wp-content\/themes\/lr\/images\/stb-1.png"},"variants":{"option1":"default","price":"123","inventory_management":"shopify","sku":"555","grams":453.59237038038,"inventory_quantity":"22"},"metafields":{"key":"wp_post_id","value":174,"value_type":"string","namespace":"inventory"}}}
    [compress] => 
    [decompress] => 1
    [sslverify] => 
    [stream] => 
    [filename] => 
)

---------------------------------
*** RESPONSE **********
2012-06-08 @ 00:14:21: response received from 
https://xxx:xxx@colab-5.myshopify.com/admin/products.json
Transport: WP_HTTP_curl
Response: Array
(
    [headers] => Array
        (
            [server] => nginx
            [date] => Fri, 08 Jun 2012 00:14:21 GMT
            [content-type] => text/html; charset=utf-8
            [connection] => close
            [vary] => Accept-Encoding
            [status] => 404 Not Found
            [cache-control] => no-cache
            [x-request-id] => ec0ff57554c9deea607c407e00c6c223
            [x-ua-compatible] => IE=Edge,chrome=1
            [x-runtime] => 0.012695
        )

    [body] => <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <title>404 - Not Found</title>

    <link href="https://cdn.shopify.com/s/assets/dialog-ef6bd71e99b2c7a469ce6385ab855360.css" media="screen" rel="stylesheet" type="text/css" />

</head>

<body class="netural-dialog">

  <div id="container">
    <div id="dialog">
      <h1>Not Found</h1>

      <p class="c">The page you were looking for does not exist...</p>

    </div> <!-- dialog -->
  </div> <!-- container -->

  <div id="footer">
    <p><a href="http://www.shopify.com">Ecommerce Software by Shopify</a></p>
  </div>

</body>
</html>

    [response] => Array
        (
            [code] => 404
            [message] => Not Found
        )

    [cookies] => Array
        (
        )

    [filename] => 
)

--------------------------------- 
```

很抱歉在这里转储了这么多内容，但这里是 6 月 13 日的新日志。第一次调用成功创建了 Shopify 产品“Office Ring 1”，但返回了错误消息。然后我手动将 shopify id 添加到我的本地产品中，然后成功添加了一个变体“medium”，但这也返回了一条错误消息。这些来自网络农场 nix 服务器。然后我从我的 Windows 笔记本电脑上的本地 Web 服务器运行相同的一组请求。这些请求还成功创建了产品“Home Ring 1”，但返回了适当的成功消息。

```
*** REQUEST ***
2012-06-13 @ 12:18:38: request sent to 
https://removed_aac8:removed_e2ba@colab-5.myshopify.com/admin/products.json
Parameters: Array
(
    [method] => POST
    [timeout] => 5
    [redirection] => 5
    [httpversion] => 1.0
    [user-agent] => WordPress/3.3.2; http://removed.colab.coop
    [blocking] => 1
    [headers] => Array
        (
            [Content-Type] => application/json; charset=UTF-8
        )

    [cookies] => Array
        (
        )

    [body] => {"product":{"title":"Office Ring 1","body_html":"Office Ring 1 description","vendor":"Steve","product_type":"ring","published":true,"variants":{"option1":"small","price":"123","inventory_management":"shopify","sku":"1234","grams":226.79618519019,"inventory_quantity":"10"},"images":{"position":1,"src":"http:\/\/lr.colab.coop\/wordpress\/wp-content\/themes\/lr\/images\/stb-1.png"}}}
    [compress] => 
    [decompress] => 1
    [sslverify] => 
    [stream] => 
    [filename] => 
)

---------------------------------
*** RESPONSE **********
2012-06-13 @ 12:18:40: response received from 
https://removed_aac8:removed_e2ba@colab-5.myshopify.com/admin/products.json
Transport: WP_HTTP_curl
Response: Array
(
    [headers] => Array
        (
            [server] => nginx
            [date] => Wed, 13 Jun 2012 12:18:40 GMT
            [content-type] => text/html; charset=utf-8
            [connection] => close
            [vary] => Accept-Encoding
            [status] => 404 Not Found
            [cache-control] => no-cache
            [x-request-id] => f5ef52645dc28af4993c1378440ad19a
            [x-ua-compatible] => IE=Edge,chrome=1
            [x-runtime] => 0.019331
        )

    [body] => <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <title>404 - Not Found</title>

    <link href="https://cdn.shopify.com/s/assets/dialog-ef6bd71e99b2c7a469ce6385ab855360.css?351e96af6f2f2a94c178c053ba0d35a46ec146b4" media="screen" rel="stylesheet" type="text/css" />

</head>

<body class="netural-dialog">

  <div id="container">
    <div id="dialog">
      <h1>Not Found</h1>

      <p class="c">The page you were looking for does not exist...</p>

    </div> <!-- dialog -->
  </div> <!-- container -->

  <div id="footer">
    <p><a href="http://www.shopify.com">Ecommerce Software by Shopify</a></p>
  </div>

</body>
</html>

    [response] => Array
        (
            [code] => 404
            [message] => Not Found
        )

    [cookies] => Array
        (
        )

    [filename] => 
)

---------------------------------
*** REQUEST ***
2012-06-13 @ 12:22:26: request sent to 
https://removed_aac8:removed_e2ba@colab-5.myshopify.com/admin/products/94072324/variants.json
Parameters: Array
(
    [method] => POST
    [timeout] => 5
    [redirection] => 5
    [httpversion] => 1.0
    [user-agent] => WordPress/3.3.2; http://removed.colab.coop
    [blocking] => 1
    [headers] => Array
        (
            [Content-Type] => application/json; charset=UTF-8
        )

    [cookies] => Array
        (
        )

    [body] => {"variant":{"option1":"medium","price":"123","inventory_management":"shopify","sku":"1235","grams":226.79618519019,"inventory_quantity":"11"}}
    [compress] => 
    [decompress] => 1
    [sslverify] => 
    [stream] => 
    [filename] => 
)

---------------------------------
*** RESPONSE **********
2012-06-13 @ 12:22:27: response received from 
https://removed_aac8:removed_e2ba@colab-5.myshopify.com/admin/products/94072324/variants.json
Transport: WP_HTTP_curl
Response: Array
(
    [headers] => Array
        (
            [server] => nginx
            [date] => Wed, 13 Jun 2012 12:22:27 GMT
            [content-type] => text/html; charset=utf-8
            [connection] => close
            [vary] => Accept-Encoding
            [status] => 200 OK
            [etag] => "450e16059f610a357485485b091697f7"
            [cache-control] => max-age=0, private, must-revalidate
            [x-request-id] => 2ebbec10eefda01f51e06d9d5ed4004f
            [x-ua-compatible] => IE=Edge,chrome=1
            [set-cookie] => _secure_session_id=8efbf69a284bbc7f3652ac6f34e9a2ba; path=/; secure; HttpOnly
            [x-runtime] => 0.025468
            [p3p] => CP="NOI DSP COR NID ADMa OPTa OUR NOR"
        )

    [body] => <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <script type="text/javascript">var NREUMQ=NREUMQ||[];NREUMQ.push(["mark","firstbyte",new Date().getTime()]);</script>
  <title>Shopify &raquo; Please Log In</title>
  <link href="https://cdn.shopify.com/s/assets/dialog-ef6bd71e99b2c7a469ce6385ab855360.css?351e96af6f2f2a94c178c053ba0d35a46ec146b4" media="screen" rel="stylesheet" type="text/css" />
  <!--[if IE 6]>
  <link href="https://cdn.shopify.com/s/assets/ie-e556ea04e7e58d6a732ca8d5254a1edc.css?351e96af6f2f2a94c178c053ba0d35a46ec146b4" media="screen" rel="stylesheet" type="text/css" />
  <![endif]-->
  <script src="https://cdn.shopify.com/s/assets/admin/auth-0b1f81e1e47d1c2021fc18fe8772a287.js?351e96af6f2f2a94c178c053ba0d35a46ec146b4" type="text/javascript"></script>
  <script type="text/javascript" language="javascript">
  window.onload = function() {
    if ($('login-input')) {
      if ($('login-input').value == '') { 
        Field.activate('login-input');
      }
      else { 
        Field.activate('password');
      }
    }
  }
  </script>

      <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-82702-18' ]);
        _gaq.push(['_setDomainName', '.myshopify.com']);
        _gaq.push(['_setAllowHash', false]); 
        _gaq.push(['_setCustomVar',
            1,                   
            'CustomerType',     
            'prospect',
            2
         ]); 
        _gaq.push(['_trackPageview']);

        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

      </script>

</head>
<body>
  <div id="container">
    <div id="dialog">
      <div id="system_error" class="status system-error"><p>Login or password was invalid.</p></div>

<div class="ssb c">
  <img alt="Shopify-logo-new" src="https://cdn.shopify.com/s/images/admin/shopify-logo-new.jpg?351e96af6f2f2a94c178c053ba0d35a46ec146b4" />  
</div>

<form accept-charset="UTF-8" action="/admin/auth/login" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="RSdZQn6QN2MfWeyb6JwkbYKlxi4wxdvLxKEAEuChE/8=" /></div>
<div id="sign-in-form" class="lform">
  <noscript><p>Please note that in order to use the Shopify administration interface you need to <a href="/documents/javascript.html">enable javascript</a>.</p></noscript>

  <input type="hidden" name="redirect" value="" id="redirect" />

  <div id="login" >
    <div class="ppb clearfix">
      <label id="email_address" for="login-input">Email Address</label>
      <input type="email" name="login" size="30" id="login-input" class="email" value="" class="error" tabindex=1 />
    </div>
    <div class="ppb clearfix">
      <label id="password_label" for="password">Password</label>
      <input type="password" name="password" size="16" id="password" class="error" tabindex=2 />
      <div id="forgot-password">
        <a href="/admin/auth/recover">Forgot your password?</a>  
      </div>
    </div>
    <div class="ppb c">
      <input name="remember" type="checkbox" id="remember_checkbox" value="1" />
      <label for="remember_checkbox" class="normal">Remember me on this computer</label>
    </div>
  </div>

  <div id="open-id" style="display:none">
    <div class="ppb clearfix">
      <label id="open_id" for="openid-input" class="open-id">OpenID</label>  
      <input type="text" name="openid_url" value="" class="url" id="openid-input" class="error" />
    </div>
  </div>

  <div class="actions">
    <input class="btn" name="commit" tabindex="3" type="submit" value="Sign In" />
  </div>

</div>

</form>

<script type="text/javascript" charset="utf-8">
  document.observe("dom:loaded", function() {

    $$('input').each(function(e) {
      e.autocapitalize = false;
    });

  });
</script>

    </div>
  </div>
  <div id="footer">
    <div>
  <span style='padding-left:10px;'>
    <img alt="Google_apps-16" src="https://cdn.shopify.com/s/images/admin/icons/google_apps-16.png?351e96af6f2f2a94c178c053ba0d35a46ec146b4" /> 
    <a href="/admin/auth/login?google_apps=1">Login with Google Apps</a>
  </span>
</div>

  </div>
  <script type="text/javascript">if (!NREUMQ.f) { NREUMQ.f=function() {
NREUMQ.push(["load",new Date().getTime()]);
var e=document.createElement("script");
e.type="text/javascript";e.async=true;e.src="https://d1ros97qkrwjf5.cloudfront.net/38/eum/rum-staging.js";
document.body.appendChild(e);
if(NREUMQ.a)NREUMQ.a();
};
NREUMQ.a=window.onload;window.onload=NREUMQ.f;
};
NREUMQ.push(["nrfj","beacon-1.newrelic.com","fa45dcf839",151,"dl8KQUReDl4AEE1TVVhZChpXRBZaSg4NVVhb",0.0,17,new Date().getTime(),"","","","",""])</script>
</body>
</html>

    [response] => Array
        (
            [code] => 200
            [message] => OK
        )

    [cookies] => Array
        (
            [0] => WP_Http_Cookie Object
                (
                    [name] => _secure_session_id
                    [value] => 8efbf69a284bbc7f3652ac6f34e9a2ba
                    [expires] => 
                    [path] => /
                    [domain] => 
                    [secure] => 
                    [httponly] => 
                )

        )

    [filename] => 
)

--------------------------------- 
```

现在成功的 Home 日志

```
*** REQUEST ***
2012-06-13 @ 12:27:40: request sent to 
https://removed_aac8:removed_e2ba@colab-5.myshopify.com/admin/products.json
Parameters: Array
(
    [method] => POST
    [timeout] => 5
    [redirection] => 5
    [httpversion] => 1.0
    [user-agent] => WordPress/3.3.2; http://localhost/knowledgetown/office/wordpress
    [blocking] => 1
    [headers] => Array
        (
            [Content-Type] => application/json; charset=UTF-8
        )

    [cookies] => Array
        (
        )

    [body] => {"product":{"title":"Home Ring 1","body_html":"Home Ring 1 description","vendor":"Auto Draft","product_type":"ring","published":true,"variants":{"option1":"small","price":"123","inventory_management":"shopify","sku":"1234","grams":226.79618519019,"inventory_quantity":"10"},"images":{"position":1,"src":"http:\/\/lr.colab.coop\/wordpress\/wp-content\/themes\/lr\/images\/stb-1.png"}}}
    [compress] => 
    [decompress] => 1
    [sslverify] => 
    [stream] => 
    [filename] => 
)

---------------------------------
*** RESPONSE **********
2012-06-13 @ 12:27:41: response received from 
https://removed_aac8:removed_e2ba@colab-5.myshopify.com/admin/products.json
Transport: WP_HTTP_curl
Response: Array
(
    [headers] => Array
        (
            [server] => nginx
            [date] => Wed, 13 Jun 2012 12:27:40 GMT
            [content-type] => application/json; charset=utf-8
            [connection] => close
            [status] => 201 Created
            [x-shopify-shop-api-call-limit] => 1/500
            [http_x_shopify_shop_api_call_limit] => 1/500
            [location] => https://colab-5.myshopify.com/admin/products/94072592
            [cache-control] => no-cache
            [x-request-id] => 36b9127191967ed4bf9b2039eb651790
            [x-ua-compatible] => IE=Edge,chrome=1
            [set-cookie] => _secure_session_id=15d92980d403a103a3e8da29a33c8e7f; path=/; secure; HttpOnly
            [x-runtime] => 0.585917
        )

    [body] => {"product":{"body_html":"Home Ring 1 description","created_at":"2012-06-13T08:27:40-04:00","handle":"home-ring-1","id":94072592,"product_type":"ring","published_at":"2012-06-13T08:27:40-04:00","template_suffix":null,"title":"Home Ring 1","updated_at":"2012-06-13T08:27:40-04:00","vendor":"Auto Draft","tags":"","variants":[{"compare_at_price":null,"created_at":"2012-06-13T08:27:40-04:00","fulfillment_service":"manual","grams":226,"id":220076798,"inventory_management":"shopify","inventory_policy":"deny","option1":"small","option2":null,"option3":null,"position":1,"price":"123.00","product_id":94072592,"requires_shipping":true,"sku":"1234","taxable":true,"title":"small","updated_at":"2012-06-13T08:27:40-04:00","inventory_quantity":10}],"images":[{"created_at":"2012-06-13T08:27:40-04:00","id":187968224,"position":1,"product_id":94072592,"updated_at":"2012-06-13T08:27:40-04:00","src":"http://cdn.shopify.com/s/files/1/0157/0142/products/stb-2.png?241"}],"options":[{"name":"Title"}]}}
    [response] => Array
        (
            [code] => 201
            [message] => Created
        )

    [cookies] => Array
        (
            [0] => WP_Http_Cookie Object
                (
                    [name] => _secure_session_id
                    [value] => 15d92980d403a103a3e8da29a33c8e7f
                    [expires] => 
                    [path] => /
                    [domain] => 
                    [secure] => 
                    [httponly] => 
                )

        )

    [filename] => 
)

---------------------------------
*** REQUEST ***
2012-06-13 @ 12:28:13: request sent to 
https://removed_aac8:removed_e2ba@colab-5.myshopify.com/admin/products/94072592/variants.json
Parameters: Array
(
    [method] => POST
    [timeout] => 5
    [redirection] => 5
    [httpversion] => 1.0
    [user-agent] => WordPress/3.3.2; http://localhost/knowledgetown/office/wordpress
    [blocking] => 1
    [headers] => Array
        (
            [Content-Type] => application/json; charset=UTF-8
        )

    [cookies] => Array
        (
        )

    [body] => {"variant":{"option1":"medium","price":"123","inventory_management":"shopify","sku":"1235","grams":226.79618519019,"inventory_quantity":"11"}}
    [compress] => 
    [decompress] => 1
    [sslverify] => 
    [stream] => 
    [filename] => 
)

---------------------------------
*** RESPONSE **********
2012-06-13 @ 12:28:13: response received from 
https://removed_aac8:removed_e2ba@colab-5.myshopify.com/admin/products/94072592/variants.json
Transport: WP_HTTP_curl
Response: Array
(
    [headers] => Array
        (
            [server] => nginx
            [date] => Wed, 13 Jun 2012 12:28:13 GMT
            [content-type] => application/json; charset=utf-8
            [connection] => close
            [status] => 201 Created
            [x-shopify-shop-api-call-limit] => 4/500
            [http_x_shopify_shop_api_call_limit] => 4/500
            [location] => https://colab-5.myshopify.com/admin/products/94072592/variants
            [cache-control] => no-cache
            [x-request-id] => fd0cfb4f0279424a850d6bf100533f1d
            [x-ua-compatible] => IE=Edge,chrome=1
            [set-cookie] => _secure_session_id=63dd9cc4fcd51eacb0a792ffb148de5e; path=/; secure; HttpOnly
            [x-runtime] => 0.069807
        )

    [body] => {"variant":{"compare_at_price":null,"created_at":"2012-06-13T08:28:13-04:00","fulfillment_service":"manual","grams":226,"id":220076802,"inventory_management":"shopify","inventory_policy":"deny","option1":"medium","option2":null,"option3":null,"position":2,"price":"123.00","product_id":94072592,"requires_shipping":true,"sku":"1235","taxable":true,"title":"medium","updated_at":"2012-06-13T08:28:13-04:00","inventory_quantity":11}}
    [response] => Array
        (
            [code] => 201
            [message] => Created
        )

    [cookies] => Array
        (
            [0] => WP_Http_Cookie Object
                (
                    [name] => _secure_session_id
                    [value] => 63dd9cc4fcd51eacb0a792ffb148de5e
                    [expires] => 
                    [path] => /
                    [domain] => 
                    [secure] => 
                    [httponly] => 
                )

        )

    [filename] => 
)

--------------------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T00:27:11.343

该请求的日志显示您正在调用`POST "/admin/products/PRODUCT_ID"`。检查您的代码以确保它正在执行您的想法。请注意，所有 API 调用都应该有一个类型后缀，所以一个有效的 URL 应该是`/admin/products/PRODUCT_ID.json`or`/admin/products/PRODUCT_ID.xml`

# android - 如何在 Android 中调用默认文件选择器选择器？

> ID：10923269
> 
> 赞同：4
> 
> 时间：2012-06-06T22:33:03.570
> 
> 标签：android, file-upload, filechooser

如果您从 Android 设备访问[imgur.com](http://imgur.com)，点击 Upload an Image 然后点击`Touch here to select your images`，Android 会提示您`Choose file for upload`几个选项。这个选择器的好处是，即使没有相机选项（对于旧手机），您也可以从图库应用程序启动相机，拍照并最终从要上传的图库中选择它。

这也适用`<input>`于任何网站上的任何文件。

所以我的问题是：如何调用该文件选择器并最终在本机 Java 应用程序中获取所选图像的路径？

如果可能的话，我想过滤它，以便它只提示图像而不是音频文件，我不想安装任何文件管理器，因为它在浏览器中是可行的。很难相信它仅适用于浏览器。

我不想实现自己的文件浏览器或在我的应用程序中列出相机的文件夹。我也只是从 Android 开始，所以一个完整的例子来最终获得文件路径或图像会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T23:12:49.243

根据出现的选择器，`<input>`似乎正在请求一个`ACTION_GET_CONTENT`活动，其 MIME 类型为`*/*`.

> 如果可能的话，我想过滤它，以便它只提示图像而不是音频文件

使用 MIME 类型的`image/*`.

> 我也只是从 Android 开始，所以一个完整的例子来最终获得文件路径或图像会很棒。

请参阅：[https ://stackoverflow.com/a/10274699/115145](https://stackoverflow.com/a/10274699/115145)

# android - 导入并使用 android wheel 作为数字选择器

> ID：10923275
> 
> 赞同：0
> 
> 时间：2012-06-06T22:33:33.490
> 
> 标签：android, import, numbers, picker

我对这个项目有疑问[https://github.com/sephiroth74/AndroidWheel](https://github.com/sephiroth74/AndroidWheel) .. 我发现了更多这样的问题，但它的答案不是我所期望的。问题是我使用 IMPORT -> Clone GIT 将它克隆到 Eclipse。Then i clicked project properties and ticked "Is Library" checkbox, so I went to my project, click add, and when androidwheel was selected a lot of errors appeared in my projects. 错误是这样说的：

```
 R cannot be resolved to a variable 
```

我设法在我的项目中使用了 devmilcolor 库，所以我不知道我的错误在哪里:(

不得不说 import android.R 没用！

请帮助确定我的问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T00:26:20.180

可能是项目在 bin 文件夹中有一个 wheel.jar 文件。

^^如果你找不到这个文件。点击[这里](http://mfiles.naver.net/158009baaef3f12d04e48fb0886d136dcb9b6a870a/20120615_50_blogfile/kangdaejang_1339719652536_ko49pz_jar/wheel.jar?type=attachment)

这是一个 jar 文件。

# ruby-on-rails - rails_admin 与 rails-api 冲突

> ID：10923280
> 
> 赞同：7
> 
> 时间：2012-06-06T22:33:59.560
> 
> 标签：ruby-on-rails, api, gem, rails-admin

我有一个最近开始的项目，我使用 mongoid 作为数据库并使用 rails_admin 来管理它，现在我想要一个 api 并且我选择 rails-api 来做它，但由于某种原因，因为我刚刚添加了 rails- api到gem文件，我无法访问管理员，我总是收到这个错误

设计中的 NoMethodError::SessionsController#new

nil:NilClass 的未定义方法“[]”

这是痕迹

warden (1.1.1) lib/warden/session_serializer.rb:29:in `fetch' warden (1.1.1) lib/warden/proxy.rb:196:in`user'warden (1.1.1) lib/warden/proxy.rb:293:in `_perform_authentication' warden (1.1.1) lib/warden/proxy.rb:90:in`authenticate'warden (1.1.1) lib/warden/proxy。 rb:100:in `authenticate?' devise (2.1.0) app/controllers/devise_controller.rb:113:in`require_no_authentication' activesupport (3.2.5) lib/active_support/callbacks.rb:407:in `_run__3280997315660744487__process_action__4533000551616940901__callbacks' activesupport (3.2.5) lib/active_support/callbacks.rb:405:in`__run_callback' activesupport (3.2.5) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks' activesupport (3.2.5) lib/active_support/callbacks.rb:81:in`run_callbacks' actionpack (3.2.5 ) lib/abstract_controller/callbacks.rb:17:in `process_action' actionpack (3.2.5) lib/action_controller/metal/rescue.rb:29:in`process_action' actionpack (3.2.5) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action' activesupport (3.2.5) lib/active_support/notifications.rb:123:in`block in instrument' activesupport (3.2.5) lib/active_support/notifications/instrumenter .rb:20:in`instrument' activesupport (3.2.5) lib/active_support/notifications.rb:123:in`仪器动作包 (3.2.5) lib/action_controller/metal/instrumentation.rb:29:in`process_action' actionpack (3.2.5) lib/action_controller/metal/params_wrapper.rb:206:in`process_action' actionpack (3.2.5) lib/abstract_controller/base.rb:121:in `process' actionpack (3.2.5) lib/abstract_controller/rendering.rb:45:in`process' actionpack (3.2.5) lib/action_controller/metal.rb:203:in `dispatch' actionpack (3.2.5) lib/action_controller/metal/rack_delegation.rb:14:in`dispatch' actionpack (3.2.5) lib/action_controller/ metal.rb:246:in `block in action' actionpack (3.2.5) lib/action_dispatch/routing/route_set.rb:73:in`call' actionpack (3.2.5) lib/action_dispatch/routing/route_set.rb:73:in `dispatch' actionpack (3.2.5) lib/action_dispatch/routing/route_set.rb:36:in`call' actionpack (3.2.5) lib/action_dispatch/routing/mapper.rb:42:in`call' journey (1.0.3) lib/journey/router.rb:68:in`块in call' 旅程 (1.0.3) lib/journey/router.rb:56:in `each' journey (1.0.3) lib/journey/router.rb:56:in`call' actionpack (3.2.5) lib/action_dispatch/routing/route_set.rb:600:in `call' rack-pjax (0.5.9) lib/rack/pjax.rb:12:in`call' mongoid (2.4.10) lib /rack/mongoid/middleware/identity_map.rb:33:in `block in call' mongoid (2.4.10) lib/mongoid.rb:133:in`unit_of_work' mongoid (2.4.10) lib/rack/mongoid/middleware/identity_map.rb:33:in `call' warden (1.1.1) lib/warden/manager.rb:35:in`block in call'warden (1.1.1) lib/warden /manager.rb:34:in`catch' warden (1.1.1) lib/warden/manager.rb:34:in`call' rack (1.4.1) lib/rack/etag.rb:23:in `call' rack (1.4.1) lib/rack/conditionalget.rb:25:in`call' actionpack (3.2.5) lib/action_dispatch/middleware/head.rb:14:in `call' remotipart (1.0.2) lib/remotipart/middleware.rb:30:in`call' actionpack (3.2.5) lib/ action_dispatch/middleware/params_parser.rb:21:in `call' actionpack (3.2.5) lib/action_dispatch/middleware/callbacks.rb:28:in`block in call'activesupport (3.2.5) lib/active_support/callbacks.rb:405:in `_run__2911892753477349565__call__1112249857594481255__callbacks' activesupport (3.2.5) lib/active_support/callbacks.rb:405:in`__run_callback' activesupport (3.2.5) lib/active_support/callbacks.rb:385:在`_run_call_callbacks' activesupport (3.2.5) lib/active_support/callbacks.rb:81:in`run_callbacks'actionpack (3.2.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call' actionpack (3.2.5) lib/action_dispatch/middleware/reloader.rb:65:in`call' actionpack (3.2.5) lib/action_dispatch/middleware/remote_ip.rb:31:in `call' actionpack (3.2.5) lib/action_dispatch/middleware/debug_exceptions.rb:16:in`call' actionpack (3.2.5 ) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call' railties (3.2.5) lib/rails/rack/logger.rb:26:in`call_app' railties (3.2.5) lib/rails/rack/logger.rb:16:in `call' actionpack (3.2.5) lib/action_dispatch/middleware/request_id.rb:22:in`call' rack (1.4.1) lib/rack/runtime.rb :17:在`call' activesupport (3.2.5) lib/active_support/cache/strategy/local_cache.rb:72:in`call' rack (1.4.1) lib/rack/lock.rb:15:in `call' actionpack (3.2.5) lib/action_dispatch/middleware/static.rb:62:in`call' railties (3.2.5) lib/rails/engine.rb:479:in `call' railties (3.2.5) lib/rails/application.rb:220:in`call' rack (1.4.1) lib/rack/ content_length.rb:14:in `call' railties (3.2.5) lib/rails/rack/log_tailer.rb:17:in`call' rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'

我真的不知道导致这种情况的那些宝石之间发生了什么，欢迎任何建议或指导；）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T17:11:33.567

我遇到了同样的问题，我发现 Warden 需要两个 API 应用程序中默认没有的中间件：ActionDispatch::Session::CookieStore 和 ActionDispatch::Cookies。

因此，可以通过以下方式添加这些中间件：
`#config/application.rb
config.middleware.use ActionDispatch::Cookies
config.middleware.use ActionDispatch::Session::CookieStore`

# java - 使用 httpclient\kerberos 以编程方式设置用户名，而不是提示

> ID：10923283
> 
> 赞同：0
> 
> 时间：2012-06-06T22:34:19.030
> 
> 标签：java, linux, authentication, sharepoint-2010, kerberos

我有一个 linux\java6 客户端，它将使用 KERBEROS 对 sharepoint2010 进行身份验证，然后使用 Apache Commons HttpClient 4.2 发送 HTTP REST Web 服务

如果我在连接客户端之前从命令行运行，`"kinit myuser@mydomain"`则运行顺畅。

我的问题是，如果我不运行 kinit ，则会提示我输入用户名。

如何在不提示输入用户名且无需运行命令行程序的情况下以编程方式进行身份验证？

（我创建和 keytab 并在 login.conf 中定义它，以便处理密码提示而不是用户提示）

```
public static void main(String[] args) throws Exception {

    System.setProperty("java.security.auth.login.config", "login.conf");
    System.setProperty("java.security.krb5.conf", "krb5.conf");
    System.setProperty("sun.security.krb5.debug", "true");
    System.setProperty("javax.security.auth.useSubjectCredsOnly","false");

    DefaultHttpClient httpclient = new DefaultHttpClient();
    try {
        httpclient.getAuthSchemes().register(AuthPolicy.SPNEGO, new SPNegoSchemeFactory());

        Credentials use_jaas_creds = new Credentials() {

            public String getPassword() {
                return null;
            }

            public Principal getUserPrincipal() {
                return null;
            }

        };

        httpclient.getCredentialsProvider().setCredentials(
                new AuthScope(null, -1, null),
                use_jaas_creds);

        HttpUriRequest request = new HttpGet("http://kerberoshost/");
        HttpResponse response = httpclient.execute(request);
        HttpEntity entity = response.getEntity();

        System.out.println("----------------------------------------");
        System.out.println(response.getStatusLine());
        System.out.println("----------------------------------------");
        if (entity != null) {
            System.out.println(EntityUtils.toString(entity));
        }
        System.out.println("----------------------------------------");

        // This ensures the connection gets released back to the manager
        EntityUtils.consume(entity);

    } finally {
        // When HttpClient instance is no longer needed,
        // shut down the connection manager to ensure
        // immediate deallocation of all system resources
        httpclient.getConnectionManager().shutdown();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:13:51.590

除了 keytab 文件之外，您还必须提供主体名称才能获得完全透明的客户端 Kerberos 身份验证 (kinit)：

```
 client {
   com.sun.security.auth.module.Krb5LoginModule required
     useKeyTab=true
     storeKey=true
     keyTab=/path/to/userKeytab
     principal="userName";
 }; 
```

# c - 在 C 中一次输出一个字母

> ID：10923287
> 
> 赞同：0
> 
> 时间：2012-06-06T22:35:01.587
> 
> 标签：c

如何在不为每个字符使用 Sleep() 的情况下一次输出一个字母，就像它正在打字一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T22:39:19.530

睡眠是最好的选择，因为它不会浪费 CPU 周期。

另一个选项是忙于等待，这意味着您不断旋转执行 NoOps。你可以用任何完全不做任何事情的循环结构来做到这一点。我不确定这是为了什么，但似乎您可能还想随机化您在角色之间等待的时间以使其具有自然的感觉。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T22:50:01.497

我将有一个 Tick() 方法，该方法将遍历字母，并且仅在随机数小于我设置的阈值时才进行。

一些伪代码可能看起来像

```
int escapeIndex = 0;
int escapeMax = 1000000;
boolean exportCharacter = false;
int letterIndex = 0;
float someThresh = 0.000001;    

String typedText = "somethingOrOther...";
int letterMax = typedText.length();
while (letterIndex < letterMax){
escapeIndex++; 
    if(random(1.0) < someThresh){
        exportCharacter = true;
    }
    if(escapeIndex > escapeMax) {
        exportCharacter = true;
    }
    if(exportCharacter) {
        cout << typedText.charAt(letterIndex);
        escapeIndex = 0;   
        exportCharacter = false;
        letterIndex++;
    }
} 
```

如果我在视频游戏中这样做，可以说模拟玩家在终端中输入文本，这就是我的做法。每次都不一样，它的逃生机制为操作提供了最大时间限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T22:57:00.047

睡眠是完成您所描述的事情的最佳方式，作为替代方案，忙于等待只会浪费 CPU 周期。从评论中，听起来你一直在尝试手动硬编码你想用睡眠调用打印的每个字符，而不是使用循环......

由于没有迹象表明这是大约 20 分钟后的作业，我想我会发布这段代码。它使用`usleep`from ，如果您使用的是 Windows try `<unistd.h>`，它会休眠 X*微秒*`Sleep()`。

```
#include <stdio.h>
#include <unistd.h>

void type_text(char *s, unsigned ms_delay)
{
   unsigned usecs = ms_delay * 1000; /* 1000 microseconds per ms */

   for (; *s; s++) {
      putchar(*s);
      fflush(stdout); /* alternatively, do once: setbuf(stdout, NULL); */
      usleep(usecs);
   }
}

int main(void)
{
   type_text("hello world\n", 100);
   return 0;
} 
```

由于`stdout`已缓冲，因此您将不得不在打印每个字符 ( ) 后刷新它，或者通过运行一次`fflush(stdout)`将其设置为根本不缓冲输出。`setbuf(stdout, NULL)`

`"hello world\n"`上面的代码将在每个字符之间延迟 100ms打印；非常基础。

# ios - 使用 NSKeyedArchiver 在 iOS 上归档

> ID：10923288
> 
> 赞同：0
> 
> 时间：2012-06-06T22:35:13.320
> 
> 标签：ios, cocoa-touch, zip, nskeyedarchiver

我希望我的应用程序能够解压缩和处理 zip 文件的内容。

我正在尝试以 Cocoa 的方式做到这一点，而不使用外部库，所以我转向[`NSKeyedUnarchiver`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSKeyedUnarchiver_Class/Reference/Reference.html)这里是我的代码：

```
-(void) unarchive{

    NSString *outputDirectory = [[NSHomeDirectory() stringByAppendingString:@"/Documents/"] stringByAppendingString:@"TheNewFolderName/"];
    NSLog(@"Output Directory: %@", outputDirectory);

    //MyArchive.zip is the filename of the zip file I placed in Xcode
    NSData *theArchive = [NSKeyedUnarchiver unarchiveObjectWithFile:@"MyArchive.zip"];

    NSError *error;
    [theArchive writeToFile:outputDirectory options:NSDataWritingAtomic error:&error];

    NSLog(@"theArchive is %@", theArchive); 
```

这将打印“theArchive 为空”！我究竟做错了什么..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T23:18:29.663

`NSKeyedArchiver`并且`NSKeyedUnarchiver`用于归档和取消归档应用程序中的对象（NSObject 子类，有一定的限制）。恐怕您不能将它与 zip 文件一起使用。

# javascript - 使用纯 JS 动画更改 CSS 值

> ID：10923298
> 
> 赞同：3
> 
> 时间：2012-06-06T22:36:10.993
> 
> 标签：javascript

好的，我正在更改 CSS 'left' 属性的值，如下所示：

```
s_list.style.left = left - amount + 'px'; 
```

s_list 是一个变量，它是一个 UL 元素。此行在单击按钮时执行。但效果是立竿见影的，可以快速看到任何形式的动画。我可以用纯 JS 做些什么来减慢速度或为更改添加可配置的延迟？

要查看我的工作演示：

[http://jsfiddle.net/benhowdle89/RCkPq/](http://jsfiddle.net/benhowdle89/RCkPq/)

并可能提出解决方案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T23:08:45.050

对于基本动画，您可以使用`setTimeout`或`setInterval`。但是，在现代浏览器中，它们已经过时了。一种更有效的动画方法是使用[`requestAnimationFrame`](https://developer.mozilla.org/en/DOM/window.requestAnimationFrame).

```
function animate(things){
    //Do stuff here.
    requestAnimationFrame(animate);
} 
```

你可能会问，`"How is this different?"`好吧，`requestAnimationFrame`只有当用户可以真正看到元素时才会重绘屏幕。如果用户在另一个选项卡上，或者向下滚动页面，它不会重绘它。它可以保存计算机中的*内存*。

不幸的是，直到现在每个浏览器仍然需要一个前缀。这是一个[修复](https://gist.github.com/838785)：

```
if ( !window.requestAnimationFrame ) {
    window.requestAnimationFrame = ( function() {
        return window.webkitRequestAnimationFrame ||  //webkit
        window.mozRequestAnimationFrame ||            //mozilla
        window.oRequestAnimationFrame ||              //opera
        window.msRequestAnimationFrame ||             //IE!
        function(callback, element) {
            window.setTimeout( callback, 1000 / 60 ); //not supported
        };
    } )();
} 
```

# 更新

**现场演示：**

1.  [***`http://jsfiddle.net/DerekL/4wLsC/`***](http://jsfiddle.net/DerekL/4wLsC/)
2.  [***`http://jsfiddle.net/DerekL/4wLsC/4/`***](http://jsfiddle.net/DerekL/4wLsC/4/)- 循环浏览图像[^(***（仍然没有 jQuery！）***)]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T22:43:25.320

您正在做的是立即将值更改为单击时的最终位置。

为了制作动画，您需要迭代更长的时间，将左值更改为每帧数量的一小部分。

尝试使用`setInterval`或链`setTimeout`，其中每一步将元素移动几个像素，以实现动画。

例子：

```
function move(){
   s_list.style.left = s_list.style.left - amount/10 + 'px';
   if (s_list.style.left.slice(0, -2) > desired_offset){
      setTimeout(move,10);
   }
} 
```

这会将元素移动数量/10 像素，并重复该操作，直到您到达所需的位置。金额/10 可以更改为您想要的任何速率/速度。

**编辑：**添加 .slice 用于字符串/数字比较（信用：Wex）

**双重编辑**：在下面的评论中听 Wex。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T22:39:00.677

您需要使用该[`setInterval`函数](https://developer.mozilla.org/en/DOM/window.setInterval)定期运行您的代码。

或者只是[使用 jQuery](http://api.jquery.com/animate/)。

# php - MYSQL 事件调度程序 DELIMITER 使用 PHP

> ID：10923300
> 
> 赞同：0
> 
> 时间：2012-06-06T22:36:12.040
> 
> 标签：php, mysql, events, scheduler, delimiter

我的 PHP 代码尝试在 MySQL 中创建事件时遇到问题。我首先创建一个这样的字符串：

```
<?php
$sql="DELIMITER $$ CREATE EVENT `$test_name` ON SCHEDULE EVERY $time1 $sched2 
STARTS '$start_date $start_time' DO BEGIN ";
$sql .="INSERT INTO blah (foo,bar); ";
$sql .="END$$ DELIMITER ;";

mysql_query($sql,$dbh);
?> 
```

但我不断收到以 . 开头的语法错误`DELIMITER $$ CREATE EVENT`。如果事件后面没有分号`(foo,bar);`，则会触发未执行的有效负载。

关于我哪里出错的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T17:53:52.233

经过一番研究，事实证明是mysql界面不能很好地使用DELIMITER。切换到 mysqli 工作。

由于某种原因，全局调度程序在我没有注意到的情况下也停止运行，所以一旦我用“show processlist”检查它并重新启动它，现在我的工作正在解雇。所以我认为它会在没有 DELIMITER 噪音的情况下运行。

# php - 如果 setUpBeforeClass() 失败，测试失败会隐藏在 PHPUnit 的 JUnit XML 输出中

> ID：10923302
> 
> 赞同：0
> 
> 时间：2012-06-06T22:36:14.177
> 
> 标签：php, phpunit

如果 setUpBeforeClass() 抛出异常，PHPUnit 的 JUnit XML 输出中不会报告失败或错误。为什么？

示例测试类：

```
<?php

class Test extends PHPUnit_Framework_TestCase
{
  public static function setUpBeforeClass() {
    throw new \Exception('masks all failures in xml output');
  }

  public function testFoo() {
    $this->fail('failing');
  }
} 
```

命令行：

```
phpunit --verbose --log-junit out.xml Test.php 
```

控制台输出：

```
PHPUnit 3.6.10 by Sebastian Bergmann.

E

Time: 0 seconds, Memory: 3.25Mb

There was 1 error:

1) Test
Exception: masks all failures in xml output

/tmp/pu/Test.php:6

FAILURES!
Tests: 0, Assertions: 0, Errors: 1. 
```

JUnit XML 输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<testsuites>
  <testsuite name="Test" file="/tmp/phpunit-broken/Test.php"/>
</testsuites> 
```

更多信息：

```
$ php --version
PHP 5.3.10-1ubuntu3.1 with Suhosin-Patch (cli) (built: May  4 2012 02:21:57) 
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies
    with Xdebug v2.1.0, Copyright (c) 2002-2010, by Derick Rethans 
```

可能相关：

*   [有没有办法从 tearDown() 判断我的 PHPUnit 测试用例中是否有故障？](https://stackoverflow.com/questions/8407626/is-there-a-way-to-tell-whether-there-are-failures-in-my-phpunit-test-case-from-t)

# asp.net - 如何在 MVC3 中构建一个与多列共享表的类？

> ID：10923306
> 
> 赞同：0
> 
> 时间：2012-06-06T22:36:28.183
> 
> 标签：asp.net, asp.net-mvc-3

我有一个工作表

```
 public class Job
{
    public int JobId { get; set; }
    public int SalesManagerId { get; set; }
    public int SalesRepId { get; set; }
} 
```

和一个人表

```
 public class Person
{
    public int PersonId { get; set; }
    public int FirstName { get; set; }
    public int LastName { get; set; }
} 
```

我的问题是，如何将 SalesManagerId 链接到 Person（或 PersonId）以及将 SalesRepId 链接到 Person（PersonId）？销售经理和销售代表相互独立。我只是不想制作 2 个不同的列表来支持销售经理和销售代表角色。

我是 MVC3 的新手，但似乎

```
公共虚拟人 Person {get; 放; }
```

将是要走的路，但这不起作用。

任何帮助，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T03:12:38.773

像这样更改您的工作类别

```
public class Job
{
   public int JobId { get; set; }
   public virtual Person SalesManager { set; get; }
   public virtual Person SalesRep { set; get; }
} 
```

这将创建具有 3 列的 Job 表。**JobId** , **SalesManager_PersonID** (ForiegnKey) , **SalesRep_PersonID** (Foriegn key)

# silverlight - 初始加载时未发生 DependencyProperty 绑定

> ID：10923307
> 
> 赞同：2
> 
> 时间：2012-06-06T22:36:38.077
> 
> 标签：silverlight, dependency-properties

我正在尝试做一些简单的事情——创建一个 DependencyProperty 然后绑定到它。但是，当我启动应用程序时，getter 似乎没有触发。（我猜这个解决方案会让我拍脑袋然后说“Doh！”，但仍然。:)）

有任何想法吗？

代码隐藏代码：

```
public static readonly DependencyProperty PriorityProperty = 
        DependencyProperty.Register("Priority", 
        typeof (Priority), typeof (PriorityControl), null);

public Priority Priority
{
    get { return (Priority)GetValue(PriorityProperty); }
    set { SetValue(PriorityProperty, value); }
} 
```

控制 XAML：

```
<ListBox Background="Transparent" 
         BorderThickness="0" 
         ItemsSource="{Binding Path=Priorities}" 
         Name="PriorityList" 
         SelectedItem="{Binding Path=Priority, Mode=TwoWay}">
  <ListBox.ItemTemplate>
    <DataTemplate>
        <Grid Height="16" Width="16">
          <Border BorderBrush="Black"
                  BorderThickness="2"
                  CornerRadius="3"
                  Visibility="{Binding RelativeSource=
                       {RelativeSource Mode=FindAncestor, AncestorType=ListBoxItem}, Path=IsSelected, Converter={StaticResource boolToVisibilityConverter}}" />
          <Border CornerRadius="3" Height="12" Width="12">
            <Border.Background>
              <SolidColorBrush Color="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ListBoxItem}, Path=Content, Converter={StaticResource priorityToColorConverter}}" />
            </Border.Background>
          </Border>
        </Grid>
    </DataTemplate>
   </ListBox.ItemTemplate>
   <ListBox.ItemsPanel>
     <ItemsPanelTemplate>
       <StackPanel Orientation="Horizontal"/>
     </ItemsPanelTemplate>
   </ListBox.ItemsPanel>
 </ListBox> 
```

绑定声明：

```
<UI:PriorityControl Grid.Column="8" 
                    Priority="{Binding Path=Priority}" 
                    VerticalAlignment="Center"/> 
```

其他一些注意事项：

*   绑定在 UserControl 中
*   UserControl 包含 PriorityControl
*   PriorityControl 包含 DependencyProperty
*   我已经检查了 UserControl 的数据是否获得了适当的数据——所有其他绑定都有效。
*   如果我通过鼠标更改 PriorityControl 上的选择，一切都会适当触发。只是值的初始设置不起作用。
*   优先级是一个枚举。

**编辑：**我尝试了另外两件事。首先，我对值进行了双向绑定，但这不起作用。然后，我向依赖属性添加了一个属性更改回调，并使其调用 OnPropertyChanged，如下所示：

```
public static readonly DependencyProperty PriorityProperty =
        DependencyProperty.Register("Priority", typeof (Priority), typeof (PriorityControl), new PropertyMetadata(HandleValueChanged));

private static void HandleValueChanged(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs e)
{
   var npc = dependencyObject as PriorityControl;
   npc.OnPropertyChanged("Priority");
} 
```

那也没有用。我什至尝试在控件上覆盖 ApplyTemplate 以强制属性更改通知，但该值永远不会在初始加载时设置。我可以改变价值观，看到一切都很好，但这是第一次什么都没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:18:34.920

***除了您之外*，任何人都不会调用 DependencyProperty 的 getter 和 setter ！**

它们只是为您的利益而生成的助手（为您节省大量的转换和对 GetValue/SetValue 的调用）。

DP 中的所有工作（动画、绑定等）都直接通过调用 SetValue 和 GetValue 进行。

*如果您需要捕获值的变化，请在 Register 调用中提供更改回调。*

**注意：** *附加*属性（即使用`RegisterAttached`而不是）*在解析 XAML 时*`Register`实际上确实使用了设置器，但这是[另一回事](https://stackoverflow.com/questions/10927854/silverlight-localization/10930232#10930232)，因为普通 DP 不这样做。

 *## 更新：

您尚未在 Register 中设置默认值，因此默认为 0（这是您的枚举值“Normal”）。如果您将其设置为绑定中的第一个值，则不会更改，因此不会触发。

**一个解决方案：**添加一个“none”枚举作为您的第一个 0 值，以便“Normal”（值 1）会导致更改。或者，在寄存器中设置一个非“正常”的默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:14:13.390

我注意到，如果在属性定义期间已经设置了值，则在执行依赖属性时，它将无法正确运行。您说过在应用程序中设置值时没有问题，所以我假设没有管道问题。

考虑下面的例子：

**XAML**

```
<UI:PriorityControl Priority="{Binding Path=Priority, Mode=TwoWay}"/> 
```

**代码**

```
public enum Priority
{
    Normal,
    Low,
    High
}

public class PriorityControl : UserControl
{    
    public static readonly DependencyProperty PriorityProperty =
      DependencyProperty.Register("Priority", typeof(Priority), typeof(PriorityControl), new PropertyMetadata(DependencyProperty.UnsetValue, OnPriorityPropertyChanged);

    public Priority Priority
    {
        get { return (Priority)this.GetValue(PriorityProperty); }
        set { this.SetValue(PriorityProperty, value); }
    }

    private static void OnPriorityPropertyChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        PriorityControl control = sender as PriorityControl;
        if (control != null)
        {
            // Do what you wanted to here.
        }
    }
} 
```

如果您使用的是枚举，并且没有指定默认值（您似乎没有在创建时不向依赖属性提供 PropertyMetadata 对象），则默认值将是枚举的默认值。在我上面的示例中，这将是“正常”。现在，如果您尝试在创建控件时将值设置为 Normal，则不会调用回调，因为该值已经等于该值。

为了使其正常工作，您必须将 DependencyProperty.UnsetValue 传递给 PropertyMetadata 对象，就像我在定义属性时所做的那样。这将允许在最初设置值时调用 OnPriorityPropertyChanged 方法。

希望这有助于解决它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T09:39:30.183

不是 100% 肯定，但它可能就像将 Priority 绑定更改为 TwoWay 一样简单。

```
<UI:PriorityControl Grid.Column="8" 
                    Priority="{Binding Path=Priority, Mode=TwoWay}" 
                    VerticalAlignment="Center"/> 
```*

# python - 如果 poplib 和 email 模块已经阅读过消息，则不会重新循环

> ID：10923310
> 
> 赞同：1
> 
> 时间：2012-06-06T22:37:00.867
> 
> 标签：python, email, poplib

我目前正在尝试编写一个从我的 gmail 帐户获取消息的脚本，但我注意到了一个问题。如果 poplib 遍历我收件箱中的一条消息，它将永远不会再次遍历它。这是我的代码

```
import poplib, string, email

user = "jj@gmail.com"
password = "password"

message = ""
mail = poplib.POP3_SSL('pop.gmail.com')
mail.user(user)
mail.pass_(password)

iMessageCount = len(mail.list()[1])
message = ""
msg = mail.retr(iMessageCount)
str = string.join(msg[1], "\n")
frmMail = email.message_from_string(str)

for part in frmMail.walk():
    if part.get_content_type() == "text/plain":
        print part.get_payload()

mail.quit() 
```

每次我运行此脚本时，它都会转到下一封最新的电子邮件，并跳过上次运行时显示的电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T00:05:33.137

检索消息并`mail.retr()`设置该消息的已*看到*标志，因此在调用`mail.list()`之后将不再可见。`mail.quit()`

如果你不打电话，`mail.quit()`你的消息将保持不可见。

顺便说一句，gmail 支持 IMAP，这通常比 POP3 更好。

# java - JDBC 转到错误的地址

> ID：10923311
> 
> 赞同：0
> 
> 时间：2012-06-06T22:37:10.263
> 
> 标签：java, mysql

当我尝试将我的 mysql 数据库与 java 中的 JDBC 连接时，它不会转到我的 Web 服务器。

这是代码

```
String dbtime;
String dbUrl = "jdbc:mysql://184.172.176.18:3306/dcsoft_dcsoft_balloon";
String dbUser = "myuser";
String dcPass = "mypass";
String dbClass = "com.mysql.jdbc.Driver";
String query = "Select * FROM users";

try {

    Class.forName("com.mysql.jdbc.Driver");
    Connection con = DriverManager.getConnection(dbUrl, dbUser, dcPass);
    Statement stmt = con.createStatement();
    ResultSet rs = stmt.executeQuery(query);

    while (rs.next()) {
        dbtime = rs.getString(1);
        System.out.println(dbtime);
    } 

    con.close();

} catch(ClassNotFoundException e) {
    e.printStackTrace();
} catch(SQLException e) {
    e.printStackTrace();
} 
```

此代码应该转到我的 Web 服务器，但它给出了这个错误 java.sql.SQLException: Access denied for user 'dcsoft_dcsoft_java'@'jamesposse.force9.co.uk' (使用密码: YES)

jamesposse.force9.co.uk 不是我尝试连接的地址 我尝试连接到 184.172.176.18:3306。

谢谢。

* * *

主机文件内容是 -

```
# Copyright (c) 1993-2009 Microsoft Corp.
#
# This is a sample HOSTS file used by Microsoft TCP/IP for Windows.
#
# This file contains the mappings of IP addresses to host names. Each
# entry should be kept on an individual line. The IP address should
# be placed in the first column followed by the corresponding host name.
# The IP address and the host name should be separated by at least one
# space.
#
# Additionally, comments (such as these) may be inserted on individual
# lines or following the machine name denoted by a '#' symbol.
#
# For example:
#
#      102.54.94.97     rhino.acme.com          # source server
#       38.25.63.10     x.acme.com              # x client host

# localhost name resolution is handled within DNS itself.
#    127.0.0.1       localhost
#   ::1             localhost 
```

和 lmhosts 是 -

```
# Copyright (c) 1993-1999 Microsoft Corp.
#
# This is a sample LMHOSTS file used by the Microsoft TCP/IP for Windows.
#
# This file contains the mappings of IP addresses to computernames
# (NetBIOS) names.  Each entry should be kept on an individual line.
# The IP address should be placed in the first column followed by the
# corresponding computername. The address and the computername
# should be separated by at least one space or tab. The "#" character
# is generally used to denote the start of a comment (see the exceptions
# below).
#
# This file is compatible with Microsoft LAN Manager 2.x TCP/IP lmhosts
# files and offers the following extensions:
#
#      #PRE
#      #DOM:<domain>
#      #INCLUDE <filename>
#      #BEGIN_ALTERNATE
#      #END_ALTERNATE
#      \0xnn (non-printing character support)
#
# Following any entry in the file with the characters "#PRE" will cause
# the entry to be preloaded into the name cache. By default, entries are
# not preloaded, but are parsed only after dynamic name resolution fails.
#
# Following an entry with the "#DOM:<domain>" tag will associate the
# entry with the domain specified by <domain>. This affects how the
# browser and logon services behave in TCP/IP environments. To preload
# the host name associated with #DOM entry, it is necessary to also add a
# #PRE to the line. The <domain> is always preloaded although it will not
# be shown when the name cache is viewed.
#
# Specifying "#INCLUDE <filename>" will force the RFC NetBIOS (NBT)
# software to seek the specified <filename> and parse it as if it were
# local. <filename> is generally a UNC-based name, allowing a
# centralized lmhosts file to be maintained on a server.
# It is ALWAYS necessary to provide a mapping for the IP address of the
# server prior to the #INCLUDE. This mapping must use the #PRE directive.
# In addtion the share "public" in the example below must be in the
# LanManServer list of "NullSessionShares" in order for client machines to
# be able to read the lmhosts file successfully. This key is under
# \machine\system\currentcontrolset\services\lanmanserver\parameters\nullsessionshares
# in the registry. Simply add "public" to the list found there.
#
# The #BEGIN_ and #END_ALTERNATE keywords allow multiple #INCLUDE
# statements to be grouped together. Any single successful include
# will cause the group to succeed.
#
# Finally, non-printing characters can be embedded in mappings by
# first surrounding the NetBIOS name in quotations, then using the
# \0xnn notation to specify a hex value for a non-printing character.
#
# The following example illustrates all of these extensions:
#
# 102.54.94.97     rhino         #PRE #DOM:networking  #net group's DC
# 102.54.94.102    "appname  \0x14"                    #special app server
# 102.54.94.123    popular            #PRE             #source server
# 102.54.94.117    localsrv           #PRE             #needed for the include
#
# #BEGIN_ALTERNATE
# #INCLUDE \\localsrv\public\lmhosts
# #INCLUDE \\rhino\public\lmhosts
# #END_ALTERNATE
#
# In the above example, the "appname" server contains a special
# character in its name, the "popular" and "localsrv" server names are
# preloaded, and the "rhino" server name is specified so it can be used
# to later #INCLUDE a centrally maintained lmhosts file if the "localsrv"
# system is unavailable.
#
# Note that the whole file is parsed including comments on each lookup,
# so keeping the number of comments to a minimum will improve performance.
# Therefore it is not advisable to simply add lmhosts file entries onto the
# end of this file. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T23:07:44.623

`jamesposse.force9.co.uk`是您连接的机器。

当 MySQL 抱怨`Access denied for user 'dcsoft_dcsoft_java'@'jamesposse.force9.co.uk'`时，这意味着用户`dcsoft_dcsof_java`没有被授权从主机连接`jamesposse.force9.co.uk`。

在 MySQL 中，您通过您尝试连接的用户名和您尝试连接的主机名进行身份验证。这就是您授予以下用户访问权限的原因：

```
grant access to 'dcsoft_dcsoft_java'@'localhost' identified by 'whatever' 
```

该用户只能从与 MySQL 服务器相同的机器进行连接（例如，从托管在同一台机器上的 webapps，或者当您通过 SSH 连接到机器并`mysql`从那里使用命令行时）。

如果您想授予对特定机器的访问权限，请通过主机名或 IP 地址来识别它。

```
grant access to 'dcsoft_dcsoft_java'@'184.172.176.18' identified by 'whatever' 
```

要从 Internet 上的任何位置授予访问权限，请`'%'`用作主机：

```
grant access to 'dcsoft_dcsoft_java'@'%' identified by 'whatever' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T23:01:42.077

这可能是关于redhat 密码问题的mysql。我不确定为什么它没有使用您提供的用户名，除非您实际上没有使用：

```
String dbUser = "myuser";
String dcPass = "mypass"; 
```

并使用 dcsoft_dcsoft_java 作为您的用户名。你能提供更多关于你的环境的细节吗？在mysql中确保你有whateverUserNameYourUsing@%，否则你会得到这个错误。您也可以将 % 替换为 IP 地址和/或域名，但它必须是您的数据库允许访问的每个域名。

# ios - 在 phonegap 中禁用 iOS 键盘（根本不显示）

> ID：10923313
> 
> 赞同：3
> 
> 时间：2012-06-06T22:37:25.487
> 
> 标签：ios, cordova, keyboard

如果我正在编写一个本机应用程序，我会尝试[这里](https://stackoverflow.com/questions/6957363/how-to-prevent-the-keyboard-from-showing-not-dismissing-on-a-textview)给出的解决方案，它说：

```
"Try to implement the following method in text view's delegate:"

- (BOOL)textViewShouldBeginEditing:(UITextView *)textView{
    return NO;
} 
```

不幸的是，我需要使用 phonegap，所以我没有要操作的文本视图。如果我能在这个应用程序中永久抑制键盘，那就太好了。我们有一些人们应该使用的自定义屏幕键盘。那么，知道如何完全禁用弹出键盘吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T22:42:04.860

只需在输入字段上放置一个透明的 div，因此点击将在该 div 上而不是在输入字段上。现在您可以通过单击激活您自己的键盘并使用 javascript 填写字符。

*   更新：

以下解决方案有效：

键盘直接链接到输入字段上的焦点。当您使用 readonly="true" 时，您可以获得点击事件，然后您应该能够更改该值。在 jQuery 中是这样的： $('myinputfield').click(function(){$(this).val(newinput);});

# ruby-on-rails - 如何处理太阳黑子轨道中缺失的字段？

> ID：10923314
> 
> 赞同：3
> 
> 时间：2012-06-06T22:37:33.147
> 
> 标签：ruby-on-rails, sunspot, sunspot-rails

我正在使用 sunspot/rails 版本 2。它工作得很好，但我不知道如何处理丢失的字段。如果我没有纬度和经度，此代码会将其映射到 0,0（非洲附近）：

```
searchable do
  text      :resume, :stored => true
  text      :city, :boost => 5
  latlon(:geo) { Sunspot::Util::Coordinates.new(latitude, longitude) }
end 
```

我尝试使用两个搜索块，每个搜索块都有不同的条件，但太阳黑子只使用第一个可搜索块。我想要发生的是丢失位置的东西仍然可以搜索，而不是按位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T06:55:36.970

是的，通常我在可选条件之后有一个 if 检查：

```
searchable do
  text      :resume, :stored => true
  text      :city, :boost => 5
  latlon(:geo) { Sunspot::Util::Coordinates.new(latitude, longitude) } if latitude && longitude
  # other conditions if needed
  with(:another_field, condition_var) if condition_var
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T22:41:38.170

我想到了一种解决方法，添加一个名为`has_location`或其他东西的布尔字段，然后在进行地理搜索时始终检查它。Kludgy，但它应该工作。

# javascript - Phonegap - 自动包括正确的cordova

> ID：10923320
> 
> 赞同：20
> 
> 时间：2012-06-06T22:38:10.657
> 
> 标签：javascript, android, ios, git, cordova

我正在 iOS 和 android 上开发一个 phonegap 应用程序，并用 git 控制我的 www 目录版本。我知道我的 HTML 文件需要包含正确的 Cordova.js 文件（取决于我目前正在开发的平台）。

当有人在 android 上工作时，在 iOS 上对 www 进行更改有点烦人。它给了我无尽的 gap_poll 警报。

简单的解决方案是记住更改 Cordova.js src 使其再次指向 iOS 版本。问题在于，如果最新提交是在另一个平台上完成的，其他开发人员将需要不断更改他们的 src。

有没有办法自动检测包含哪个版本的 Cordova？这样它就可以在任何平台上运行，而我们不必进行繁琐的更改。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-07T05:47:53.903

以下代码对我来说很好：

```
 function init() {
        if(isAndroid()){
            $("script").attr("src", "lib/android/cordova-1.7.0.js").appendTo("head");
        }else if(isiOS()){
            $("script").attr("src", "lib/ios/cordova-1.7.0.js").appendTo("head");
        }

         document.addEventListener("deviceready", onDeviceReady, false);
    }

    function isAndroid(){
        return navigator.userAgent.indexOf("Android") > 0;
    }

    function isiOS(){
        return ( navigator.userAgent.indexOf("iPhone") > 0 || navigator.userAgent.indexOf("iPad") > 0 || navigator.userAgent.indexOf("iPod") > 0); 
    }

    function onDeviceReady(){
        console.log("device is ready");
    } 
```

[你可以在这里](https://gist.github.com/2886774)查看完整的源代码

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-07T10:33:49.797

我的共享 HTML/JS 设置与 Git 子模块相同。我的 index.html 位于共享文件夹中，并使用相对路径包含特定于平台的 JS 文件。

有 3 个 Git 项目 - Android、iOS 和 Shared。Shared 在 Android 和 iOS 中被添加为子模块。

文件夹结构

```
www
|-platform
    |-js/libs/cordova.js
|-shared
    |-index.html 
```

在 index.html 中

```
<script type="text/javascript" src="../platform/js/libs/cordova.js"></script> 
```

我使用相同的想法为同样依赖于平台的插件包含 JS 文件。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-03T23:10:33.080

您应该只将您的主 WWW 置于源代码控制之下，其中不应包含任何**cordova**文件。当您进行 phonegap 构建时，这些应该由 phonegap 添加到您的平台文件夹中。所以你常见的 index.html 可以有：

```
<script type="text/javascript" src="cordova.js"></script> 
```

在您的主 WWW 中，您不会有一个 cordova.js 脚本，但是当您执行以下操作时，您将在您的平台/android 文件夹中执行：

```
phonegap build android 
```

如果您确实需要有条件地调整您的平台/xyz 文件夹中的内容，Grunt.JS 是一个不错的选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T13:34:15.220

*就我而言，我只是为www*文件夹创建了一个 zip 文件，没有*cordova.js*或*cordova-1.7.0.js*（或其他版本）。我将该 zip 提交到构建过程，它会生成正确的*cordova.js*文件，以便它可以在 iO 和 Android 上运行。

告诉我它是否有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-21T08:48:09.957

@dhaval 的答案在 iOS 7.1.1 上的 Cordova 应用程序中对我不起作用。尽管脚本标签已添加到标题中，但脚本实际上不会加载，因为我使用 Safari 的远程检查器进行了验证。

相反，我添加了以下脚本，该脚本是从[另一个 SA 答案](https://stackoverflow.com/questions/8556465/whats-the-zepto-equivalent-of-jquery-getscript)中获取的。

```
function getScript(src, func) {
    var script = document.createElement('script');
    script.async = "async";
    script.src = src;
    if (func) {
       script.onload = func;
    }
    document.getElementsByTagName("head")[0].appendChild( script );
} 
```

进而

```
if ( navigator.userAgent.indexOf("iPhone") > 0 || navigator.userAgent.indexOf("iPad") > 0 || navigator.userAgent.indexOf("iPod") > 0) {
  getScript("js/cordova_ios.js");
} else if (navigator.userAgent.indexOf("Android") > 0) {
  getScript("js/cordova_android.js");
}

document.addEventListener("deviceready", onDeviceReady, false); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-15T15:09:01.607

上述解决方案对我不起作用。所以我添加了这个 jquery 解决方案：

```
 var isAndroid = /android/i.test(navigator.userAgent.toLowerCase());

if (isAndroid)
{
var script = document.createElement('script');
script.src = 'cordova/android/cordova.js';
 document.head.appendChild(script);
}
var IOS = /ipad|iphone|ipod/i.test(navigator.userAgent.toLowerCase());
if (IOS)
{
 var script = document.createElement('script');
 script.src = 'cordova/ios/cordova.js';
 document.head.appendChild(script);
} 
```

其他 Phonegap 平台也是如此，对于 windows phone 只需添加 /windows phone/ 等。

如果你有插件，它也可能因平台而异。只需将插件文件夹和 cordova_plugin.js 添加到同一文件夹即可。

# java - 为什么LinearLayout子getWidth方法返回0？

> ID：10923321
> 
> 赞同：2
> 
> 时间：2012-06-06T22:38:17.453
> 
> 标签：java, android, user-interface, android-activity

我有一个 LinearLayout，这个 LinearLayout 将保存动态放置的视图。我需要找出 LinearLayout 子项的宽度，但这必须在 onCreate 方法中完成。通过研究，我发现您不能从此方法中使用 getWidth 。因此，我使用的是 onWindowFocusChanged，它适用于父 LinearLayout（返回实际大小），但不适用于其子级。

我注意到的另一件事是，当屏幕逐渐消失并且屏幕被锁定时，我可以在日志中看到返回的孩子的实际宽度（我认为活动正在暂停）。

我真的被卡住了，这是需要的，因为我需要根据孩子的宽度动态放置这些视图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T23:15:23.253

您可能可以通过以下方式获得。但正如其他人指出的那样，这可能不是一个好主意。

```
LinearLayout.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED);
LinearLayout.getMeasuredWidth(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T23:03:21.253

在onCreate里面，views仍然无法知道附近views和children等的状态……所以只有在所有的准备和布局过程完成之后，你才能得到views的大小。

这是在绘制视图之前获取视图大小的快速代码：

```
private static void runJustBeforeBeingDrawn(final View view, final Runnable runnable)
{
    final ViewTreeObserver vto = view.getViewTreeObserver();
    final OnPreDrawListener preDrawListener = new OnPreDrawListener()
    {
        @Override
        public boolean onPreDraw()
        {
            Log.d(App.APPLICATION_TAG, CLASS_TAG + "onpredraw");
            runnable.run();
            final ViewTreeObserver vto = view.getViewTreeObserver();
            vto.removeOnPreDrawListener(this);
            return true;
        }
    };
    vto.addOnPreDrawListener(preDrawListener);
} 
```

或者，如果您愿意，您可以使用[`addOnGlobalLayoutListener`](http://developer.android.com/reference/android/view/ViewTreeObserver.html#addOnGlobalLayoutListener%28android.view.ViewTreeObserver.OnGlobalLayoutListener%29)而不是。[`addOnPreDrawListener`](http://developer.android.com/reference/android/view/ViewTreeObserver.html#addOnPreDrawListener%28android.view.ViewTreeObserver.OnPreDrawListener%29)

用法示例：

```
runJustBeforeBeingDrawn(view,new Runnable()
{
  @Override
  public void run()
  {
    int width=view.getWidth();
    int height=view.getHeight();
  }
}); 
```

另一种方法是使用 onWindowFocusChanged（并检查 hasFocus==true），但这并不总是最好的方法（仅用于简单的视图创建，而不用于动态创建）

编辑：替代 runJustBeforeBeingDrawn：[https ://stackoverflow.com/a/28136027/878126](https://stackoverflow.com/a/28136027/878126)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T22:49:05.550

[https://stackoverflow.com/a/3594216/1397218](https://stackoverflow.com/a/3594216/1397218)

所以你应该以某种方式改变你的逻辑。

# iphone - 键盘上推阻塞TextView的设计模式

> ID：10923322
> 
> 赞同：0
> 
> 时间：2012-06-06T22:38:28.677
> 
> 标签：iphone, ios, cocoa-touch, design-patterns

我确实了解如何根据以下问题进行`UIKeyboard`推高，`UIView`如果活动`UITextView`被阻止了`UIKeyboard`：[How to make a UITextField move up when keyboard is present?](https://stackoverflow.com/questions/1126726/how-to-make-a-uitextfield-move-up-when-keyboard-is-present) .

我想知道的是，从设计的角度来看，您如何实现`keyboardDidShow`和`keyboardDidHide`方法，以便您的应用程序中的所有视图，无论它们是`UIView`，`UITableView`还是`UIScrollView`全部具有此功能，因此您需要实现这些方法只有一次？

我能想到的唯一方法是将`UIViewController`always 的 view 属性设置为 a `UIView`，如果您有 a`UIViewController`需要 a `UIScrollView`or `UITableView`，只需将其作为子视图附加到 this 上。然后如果`UITextView`被阻止，只需向上移动父`UIView`级，这样它就会移动所有附加到它的视图。

这听起来像是一个好计划，还是值得？还有其他人有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T03:04:35.327

这有点老了，但它是一篇关于使用 firstResponder 方法告诉视图向上滑动的好文章。我个人喜欢将我的 UITextField 放在父容器中并将其全部向上移动。但是，我不建议将所有内容都放在那里并将其全部向上移动，因为 UITextField 在键盘上方“感觉”更好。但我确实喜欢背景或某些项目与 UITextField 一起向上移动。

见下文：[http ://cocoawithlove.com/2008/10/sliding-uitextfields-around-to-avoid.html](http://cocoawithlove.com/2008/10/sliding-uitextfields-around-to-avoid.html)

这是一个很好的实现，它根据它所在的屏幕部分（上、中、下）向上移动字段。效果很好。可能需要更新最新的 SDK，但应该很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T09:47:31.957

在对此进行试验时，我注意到如果您想创建一个实现此功能的 BaseViewController 以适用于从它继承的所有内容，您必须在 UIViewController 的 view 属性之上附加另一个视图才能使其工作。原因是，如果您在键盘出现时向上推 UIViewController 的 view 属性，那么如果应用程序从活动状态恢复并且变得混乱，它会自行重置。

但是，问题在于，现在在您的所有子类中，您必须将子视图附加到这个新视图属性而不是常规视图属性。此外，您可能必须创建一个自定义 UITableViewController ，它将从您的 BaseViewController 类继承，以便它可以继承键盘通知方法。

最终，我发现在 UIViewController 的属性之上为一堆不同的场景设置另一个视图并不是最糟糕的主意。制作自定义 UITableViewController 也没什么大不了的。因此，如果您的应用程序中有很多文本字段，这可能不是最糟糕的方法。

# c# - 琐碎的程序抛出 IndexOutOfRangeException

> ID：10923323
> 
> 赞同：-3
> 
> 时间：2012-06-06T22:38:32.790
> 
> 标签：c#

运行上述代码时出现错误并且不知道确切的问题。解决方案是什么？

```
using System;

class second
{
    static void Main(string[] args)
    {
        Console.WriteLine("Hello, {}!", args[0]);
        Console.WriteLine("Welcome to the C# station tutorial!");

        Console.ReadLine();
    }
} 
```

错误是*“索引超出范围”*。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T22:40:51.143

您缺少参数位置

```
Console.WriteLine("Hello,{0}!", args[0]); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T22:40:54.713

`string[] args`参数是exe的命令行参数。我猜你没有传递任何参数，因此`args[0]`超出*范围*，就像它说的那样。如果您将 exe 运行为：

```
your.exe MyName 
```

那么它至少会通过`IndexOutOfRangeException`- 来提高 a `FormatException`;p 要解决这个问题，请将 更改`{}`为`{0}`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-13T19:52:07.043

这对我有用。检查以确保有参数。如果没有，请在控制台上提供反馈。

```
 if (args.Length == 0)
        {
            Console.WriteLine("No input parameters were received.");
            return;
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-05T15:24:18.147

我相信您在 Visual Studio 上运行了该程序，因此在没有针对`arg[]`.

要传入一个参数`E.g. Scott to arg[]`，

1.  转到解决方案资源管理器（菜单*View* → *Solution Explorer*）

2.  选择*属性*。

3.  *在“开始选项”部分下的**“命令行参数”*文本框中输入“Scott” 。

     *该程序将正常运行。见下图。* 

 *![b](../Images/4dfa919dfd9a881bbaee326e45f1db94.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T22:40:38.527

如果 args 有零项，那么尝试获取它的第一个索引（即 0）将导致索引越界异常。在尝试引用其中的索引之前，您应该检查 args 是否为空或空。如果您使用一些命令行参数运行该示例，它可能会起作用。*

# sql-server - sql 错误：从字符串转换日期和/或时间时转换失败

> ID：10923324
> 
> 赞同：0
> 
> 时间：2012-06-06T22:38:40.430
> 
> 标签：sql-server, sql-server-2008, stored-procedures

我正在尝试编写一个存储过程。但是遇到这个奇怪的错误..如果有人可以帮助我会很好...

这是我的存储过程。

```
ALTER PROCEDURE [dbo].[Usp_search] (@keyword NVARCHAR(500))
AS
  BEGIN
      DECLARE @tab TABLE (
        id          UNIQUEIDENTIFIER,
        Title       NVARCHAR(250),
        Description NVARCHAR(500),
        FilePath    NVARCHAR(500),
        UploadDate  DATETIME,
        FileName    NVARCHAR(250),
        CourseName  NVARCHAR(150),
        FullName    NVARCHAR(250),
        School      NVARCHAR(250))

      INSERT INTO @tab
      SELECT un.Id,
             un.Title,
             un.Description,
             un.FileName,
             un.FilePath,
             uc.CourseName,
             up.Fullname,
             up.School,
             un.UploadDate
      FROM   UserNotes un
             INNER JOIN UserCourse uc
               ON un.CourseId = uc.Id
             INNER JOIN UserProfile up
               ON up.Id = un.UserId
      WHERE  FREETEXT(( un.Title, un.Description, un.Tag ), @keyword)

      SELECT *
      FROM   @tab

      RETURN
  END 

--exec usp_search 'mvc' 
```

这是错误：从字符串转换日期和/或时间时转换失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T22:42:42.800

您在 select 语句中指定列的顺序与它们在表中声明的顺序不同。

所以要么在你的插入中添加一个列子句 - 例如

```
INSERT INTO @tab (ID, Title, Description ...) 
```

或者更改您选择的列的顺序。在我看来，你想要

```
SELECT un.Id,
       un.Title,
       un.Description,
       un.FilePath,
       un.UploadDate,
       un.FileName,
       uc.CourseName,
       up.Fullname,
       up.School
... 
```

# python - 设置 Python 的 collections.defaultdict 的默认字符串值

> ID：10923334
> 
> 赞同：43
> 
> 时间：2012-06-06T22:40:04.253
> 
> 标签：python, collections

我正在使用 Python 3.2.3 并想更改默认返回的字符串值：

```
from collections import defaultdict
d=defaultdict(str)
d["NonExistent"] 
```

返回的值为`''`。如何更改此设置，以便在未找到密钥时`"unknown"`返回而不是空字符串？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-06-06T22:41:33.933

defaultdict 的参数是一个返回默认值的函数（或者更确切地说，一个可调用对象）。所以你可以传入一个返回你想要的默认值的 lambda。

```
>>> from collections import defaultdict
>>> d = defaultdict(lambda: 'My default')
>>> d['junk']
'My default' 
```

编辑解释 lambda：

lambda 只是定义函数而不给它命名的简写。您可以使用显式定义执行相同的操作：

```
>>> def myDefault():
...     return 'My default'
>>>> d = defaultdict(myDefault)
>>> d['junk']
'My default' 
```

有关更多信息，请参阅[文档](http://docs.python.org/reference/expressions.html#lambda)。

# c# - Process.Kill 似乎不适用于 iexplore.exe

> ID：10923336
> 
> 赞同：1
> 
> 时间：2012-06-06T22:40:19.263
> 
> 标签：c#

我正在使用 watin 进行浏览器自动化，并且许多浏览器窗口保持打开状态，最后我使用它来尝试将它们全部关闭：

```
 Process[] ieProcesses = Process.GetProcessesByName("iexplore");

            foreach (Process ie in ieProcesses)
            {
                ie.CloseMainWindow();
                ie.Close();
                ie.Dispose();
            } 
```

出于某种原因，close、closemainwindow 和 dispose，都不会关闭我的 iexplore 进程。如果我使用调试器逐步完成这一部分，ieProcesses 将包含所有进程，通常约为 10 个，它会为每个进程执行 foreach，但在任务管理器中查看，它们都不会关闭。

这可能与它们是在隐藏窗口中启动有关吗？但我不确定关闭它们的正确方法。任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T22:44:16.870

试试`ie.Kill()`方法：

[http://msdn.microsoft.com/en-us/library/system.diagnostics.process.kill.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.kill.aspx)

# java - easymock, mock 返回一个 mock

> ID：10923337
> 
> 赞同：2
> 
> 时间：2012-06-06T22:40:22.443
> 
> 标签：java, easymock

我正在使用 EasyMock 测试我的 Java 代码。

我要模拟的代码如下所示：

```
requestInfo = mupClient.newEnqueueRequestCall().call(requestArgs); 
```

我嘲笑的方式是：

```
expect(mupClient.newEnqueueRequestCall()).andReturn(enqueueRequestCall);
final Capture<EnqueueRequestArgs> captureRequestArgs = 
                         new Capture<EnqueueRequestArgs>();
expect(mupClient.newEnqueueRequestCall().call(capture(captureRequestArgs))).
                         andThrow(new MUPCoralException("an exception")); 
```

但`requestInfo`总是`null`。即使我将`.andThrow()`部分更改为`.andReturn(new RequestInfo())`，它仍然是`null`。

我检查了另一个类似的帖子，但没有奏效。现在我可以对其发表评论并因此提出一个新问题。

答案：添加所有模拟的对象`replay`！例子`replay(mockObj1, mockObj2, ...)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:08:02.573

试试这个：

```
expect(mupClient.newEnqueueRequestCall()).andReturn(enqueueRequestCall);
final Capture<EnqueueRequestArgs> captureRequestArgs = 
                          new Capture<EnqueueRequestArgs>();
expect(enqueueRequestCall.call(capture(captureRequestArgs))).
                          andThrow(new MUPCoralException("an exception")); 
```

问题是你`enqueRequestCall`应该返回`requestInfo`。只有在您从 easymock调用方法后`mupClient`才会返回。`enqueueRequestCall``replay`

# xml - 使用 Scala 将 XML 转换为系统属性

> ID：10923343
> 
> 赞同：2
> 
> 时间：2012-06-06T22:40:56.517
> 
> 标签：xml, scala

使用 Scala，转换的最佳方法是什么

```
<myapp>
  <username>bill</username>
  <password>secret123</password>
  <background>#FFFFFF</background>
</myapp> 
```

进入以下系统属性：

```
myapp.username=bill
myapp.password=secret123
myapp.background=#FFFFFF 
```

假设转换器附加到 sys.props？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:28:55.050

[java.util.Properties](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)支持一种 XML 格式，认为不是您描述的那种。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T01:12:02.527

```
scala> val s = "<myapp><username>bill</username><password>secret123</password><background>#FFFFFF</background></myapp>"
s: java.lang.String = <myapp><username>bill</username><password>secret123</password><background>#FFFFFF</background></myapp>

scala> val e = xml.XML.loadString(s)
e: scala.xml.Elem = <myapp><username>bill</username><password>secret123</password><background>#FFFFFF</background></myapp>

scala> val sp = new sys.SystemProperties
sp: scala.sys.SystemProperties = 
Map(env.emacs -> "", java.runtime.name -> Java(TM) SE Runtime Environment, ....)

scala> sp ++= e.child.map(n => (e.label + "." + n.label, n.text))
res11: sp.type = 
Map(env.emacs -> "", java.runtime.name -> Java(TM) SE Runtime Environment, ...) 
```

完整性检查：

```
scala> val p = java.lang.System.getProperties
p: java.util.Properties = 
{env.emacs=, java.runtime.name=Java(TM) SE Runtime Environment,...}

scala> import collection.JavaConversions._
import collection.JavaConversions._

scala> p filter { case (k, v) => k.startsWith("myapp") } \
          foreach { case (k,v) => println(k + "=" + v) }
myapp.password=secret123
myapp.background=#FFFFFF
myapp.username=bill 
```

# c# - 根据字符串列表获取 SQL LINQ 结果

> ID：10923344
> 
> 赞同：1
> 
> 时间：2012-06-06T22:41:03.200
> 
> 标签：c#, linq-to-sql

让我们从将用于过滤结果的字符串列表开始：

```
 List<String> RadioNames = new List<String>();
 RadioNames.AddRange(new String[] { "abc", "123", "cba", "321" }); 
```

我希望能够过滤一个 LINQ to SQL 数据库表，`RadioNames`但问题是我想要`RadioNames`部分匹配（这意味着它将捕获 Radio123 而不仅仅是 123）。

我需要过滤的来源如下：

```
var ChannelGrants = from cg in sddc.ChannelGrants
                    select new
                    {
                        cg.ID,
                        cg.Timestamp,
                        cg.RadioID,
                        cg.Radio
                    }; 
```

所以我需要执行类似于下面的操作（在原始`ChannelGrants`结果之外，因为这是一个条件搜索）

```
 if(RadioNamesToSearch != null)
 {
      List<String> RadioNames = new List<String>();

      // Here I split all the radio names from RadioNamesToSearch based on a command separator and then populate RadioNames with the results

      ChannelGrants = from cg in ChannelGrants
                      where ???
                      select cg;
 } 
```

我需要帮助在哪里？？？在上面的代码中（或者如果`ChannelGrants = ...`一起无效）。重复以上步骤，我需要过滤`ChannelGrants`以返回任何匹配项，`RadioNames`但它会进行部分匹配（这意味着它将捕获 Radio123 而不仅仅是 123）。

所有代码都包含在这样的方法中......

```
 public static DataTable getBrowseChannelGrants(int Count = 300, String StartDate = null, String StartTime = null, String EndDate = null, String EndTime = null, String RadioIDs = null, String RadioNamesToSearch = null, String TalkgroupIDs = null, String TalkgroupNames = null, bool SortAsc = false) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T23:49:40.380

您将 RadioNames 与 ChannelGrants 中的哪个字段进行比较？

要检索仅在 RadioNames 列表中的条目，您可以使用 contains 方法，如下所示

```
ChannelGrants = from cg in ChannelGrants
                  where RadioNames.Contains(cg.Radio)
                  select cg; 
```

（如果您想在 Radio 属性中查找具有 RadioNames 之一的所有行。将 cg.Radio 替换为您匹配的相应列）

如果你在 SQL 中有这个 where 子句，这会给你类似的结果

```
where cg.Radio in ("abc", "123", "cba", "321") 
```

从此链接[如何在 Linq 中执行 SQL Like %？](https://stackoverflow.com/questions/835790/how-to-do-sql-like-in-linq) 看起来你也可以将它与类似的匹配组合起来，但是添加斜线，这不是我个人做过的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:30:43.963

目前，似乎没有最好的方法，所以我会回答这个问题，直到一个新的答案不重复在这个线程上不起作用的其他答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T23:04:27.177

代替？？？

```
RadioNames.Where(rn=>cg.Radio.ToLower().Contains(rn.ToLower())).Count() > 0 
```

应该这样做...

当然，ToLower() 调用是可选的。

编辑：我刚刚写了这个，它在控制台应用程序中对我来说很好。结果包含一项，WriteLine 吐出“cbaKentucky”。不知道该告诉你什么。

```
class Program
{
    static void Main(string[] args)
    {
        List<String> RadioNames = new List<String>();
        RadioNames.AddRange(new String[] { "abc", "123", "cba", "321" });

        List<ChannelGrants> grants = new List<ChannelGrants>();
        grants.Add(new ChannelGrants() { ID = 1, Radio = "cbaKentucky", RadioID = 1, TimeStamp = DateTime.Now });

        var result = from cg in grants
                  where RadioNames.Where(rn=>cg.Radio.ToLower().Contains(rn.ToLower())).Count() > 0
                  select cg;

        foreach (ChannelGrants s in result)
        {
            Console.WriteLine(s.Radio);
        }
    }
}

class ChannelGrants
{
    public int ID { get; set; }
    public DateTime TimeStamp { get; set; }
    public int RadioID { get; set; }
    public string Radio { get; set; }
} 
```

# php - 如何将 PHP 对象定义为数组中的最后一项？

> ID：10923346
> 
> 赞同：1
> 
> 时间：2012-06-06T22:41:32.680
> 
> 标签：php

在下面的代码中，我想将对象“$activeclass”应用为 DIV 类。我认为我包含的结束指针只会将此应用于数组的最后一次迭代，而是将类应用于所有迭代。

```
<div id="right_bottom">
                <?
                $content = is_array($pagedata->content) ? $pagedata->content : array($pagedata->content);
                foreach($content as $item){
                $activeclass = end($content) ? 'active' : ' ';
                    ?>
                    <div id="right_side">
                           <div id="<?=$item->id?>" class="side_items <?=$activeclass?>">
                             <a class="content" href="<?=$item->id?>"><img src="<?=PROTOCOL?>//<?=DOMAIN?>/img/content/<?=$item->image?>"><br />
                             <strong><?=$item->title?></strong></a><br />
                             <h2><?=date('F j, Y',  strtotime($item->published))?></h2><br />
                         </div>
                    </div>
                    <?
                }
                ?>
</div> 
```

有什么想法我犯了错误吗？如何将类 $activeclass 仅应用于我的“foreach”语句的最后一次迭代？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T22:46:50.200

最简单的方法是保持计数：

```
$i = 0; $size = count( $content);
foreach( $content as $item) {
    $i++;
    $activeclass = ( $i < $size) ? '' : 'active';
} 
```

或者，您可以将最后一个元素与当前元素进行比较（如果您的数组从 0 开始连续数字索引 [感谢 webbiedave 指出此方法所做的假设]）：

```
$last = count( $content) - 1;
foreach( $content as $item) {
    $activeclass = ( $content[$last] === $item) ? 'active' : '';
} 
```

请注意，如果您的数组有重复项，此方法将不起作用。

最后，您可以通过以下方式比较索引：

```
// Numerical or associative
$keys = array_keys($content); 
$key = array_pop($keys); // Assigned to variables thanks to webbiedave

// Consecutive numerically indexed
$key = count( $content) - 1; 

foreach( $content as $current_key => $item) {
    $activeclass = ( $current_key === $key) ? 'active' : '';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T22:48:40.250

```
$activeclass = end($content) ? 'active' : ' '; 
```

该`end()`函数返回数组中的最后一个元素，因此您基本上是在检查数组是否有最后一个元素（它总是会有，除非它是空的）。

这是对您做错了什么的解释-尼克有如何通过使用计数器来解决它的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T22:51:45.133

从以下链接尝试这种方法[http://blog.actsmedia.com/2009/09/php-foreach-last-item-last-loop/](http://blog.actsmedia.com/2009/09/php-foreach-last-item-last-loop/)

```
$last_item = end($array);
$last_item = each($array);
reset($array);
foreach($array as $key => $value)
{
    // code executed during standard iteration
    if($value == $last_item['value'] && $key == $last_item['key'])
    {
    // code executed on the 
            // last iteration of the foreach loop
    }
 } 
```

# php - 将 Facebook 好友列表数组与 MySQL 表进行比较

> ID：10923354
> 
> 赞同：1
> 
> 时间：2012-06-06T22:42:11.623
> 
> 标签：php, mysql, arrays, facebook-graph-api

我使用图形 api 检索一组朋友，并在 MySQL 表上有一个用户列表。我（有点）知道如何使用联接，但我不知道您将如何将 php 中的数组与 mysql 表进行比较。基本上 Facebook ID 是我想要匹配的，然后从行中提取所有数据（如果匹配）。

谢谢，迈克尔·阿米奇

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T22:51:12.587

```
$sql = mysql_query("SELECT * FROM users WHERE fb_id IN (12345,1234,123,12346)");

while($row = mysql_fetch_array($sql)){
  echo $row['username'];
} 
```

注意：确保在包含 facebook id 的列上添加索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T22:54:36.947

```
$array_with_ids = array('123', '124', '125');
$sql_ids = implode(',', $array_with_ids);

// Select friends already added to db
mysql_query("SELECT * FROM fb_users WHERE fb_id IN (".$sql_ids.")");

// Find friends, that are in your db, but not in the array
mysql_query("SELECT * FROM fb_users WHERE fb_id NOT IN (".$sql_ids.")");

foreach($array_with_ids AS $fb_id)
{
    // Add new friends
    mysql_query("INSERT IGNORE INTO fb_users VALUES (".$fb_id.", ".$name.", ".$stuff.")";
} 
```

确保为 fb_id 使用主索引

# android - FLAG_ONLY_ALERT_ONCE 是坏的还是错误的，或者两者兼而有之？

> ID：10923355
> 
> 赞同：5
> 
> 时间：2012-06-06T22:42:24.437
> 
> 标签：android, notifications

[来自关于Notifications](http://developer.android.com/reference/android/app/Notification.html)的 android 文档：

```
FLAG_ONLY_ALERT_ONCE 
```

> 如果您希望每次发送通知时都播放声音和/或振动，即使在此之前尚未取消，也应将位按位或位到标志字段中。

这个描述是不是和它应该的相反？另外，如果我希望通知每次都发出警报，我是否应该将其 OR 到 flags 字段中？我也看到了关于这是否“有效”的相互矛盾的说法......不管这意味着什么！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T18:28:01.093

经过一些测试，似乎 FLAG_ONLY_ALERT_ONCE 做了它所命名的，而不是 API 描述所说的。

要在每次发出通知警报时发出通知，请确保您没有将 FLAG_ONLY_ALERT_ONCE 位或位放入 notification.flags。

我在这里发布了一个错误报告：[https ://code.google.com/p/android/issues/detail?id=33003](https://code.google.com/p/android/issues/detail?id=33003)

# ajax - 使用coldfusion从Cfajaximport / ajax获得响应

> ID：10923361
> 
> 赞同：1
> 
> 时间：2012-06-06T22:43:17.323
> 
> 标签：ajax, coldfusion, response

我已经搜索了许多以前的回复，但没有一个对我有帮助。我实际上是在推断我之前发现的另一个脚本......但我不确定如何在 AJAX 中捕获响应。我猜测 handleResponse 只会捕获 checkdomain.cfm 上输出的任何内容，但我似乎无法做到这一点，所以我可以输出它。所以在下面的例子中，开发这个脚本的人不知何故能够从 checkdomain.cfm 中取回 AVAILABLE，但我不知道该怎么做。

提前致谢！

```
<head>
...
<cfajaximport />
...
    <script>
        function handleResponse(s) {
            if(s == "AVAILABLE") {
                //rewrite span
                var domainspan = document.getElementById('DomainStatus');
                var newcontent = "Available To Register :)";
                domainspan.innerHTML = newcontent;
                var loadingspan = document.getElementById('frmGO');
                var newcontent = "<input name='' value='GO!' class='search_domain_go' type='submit' />";
                loadingspan.innerHTML = newcontent;
            } else {
                //rewrite span
                var domainspan = document.getElementById('DomainStatus');
                var newcontent = "Unavailable To Register :(";
                domainspan.innerHTML = newcontent;
                var loadingspan = document.getElementById('frmGO');
                var newcontent = "<input name='' value='GO!' class='search_domain_go' type='submit' />";
                loadingspan.innerHTML = newcontent;
            }
        }

        function CheckDomain() {
            var loadingspan = document.getElementById('frmGO');
            var newcontent = "<input name='' type='image' class='search_domain_go' src='images/ajax-loader.gif' alt='' />";
            loadingspan.innerHTML = newcontent;
            ColdFusion.Ajax.submitForm('frmDomainCheck','checkdomain.cfm',handleResponse);
        }
    </script>
...
</head>

<body>
...
        <div class="search_domain">
            <div class="search_domain_form">
            Search Your Domain Here<br />
                <form method="post" action="" onSubmit="CheckDomain();return false;" id="frmDomainCheck">
                    <input class="search_domain" name="frmURL" id="frmURL" value="Please enter your domain name here..." onfocus="if(this.value == 'Please enter your domain name here...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Please enter your domain name here...';}" type="text" />
                    <span id="frmGO"><input name="" value="GO!" class="search_domain_go" type="submit" /></span>
                <form>
            </div><!-- /# end search form -->
            <div class="domain_features">
                <ul>
                    <li><span id="DomainStatus">Type in the domain and click 'GO' to check its availability.</span></li>
                </ul>
            </div>
        </div>
...
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:12:41.013

我使用了您的代码，然后为 checkdomain.cfm 添加了以下内容

```
<cfoutput>AVAILABLE</cfoutput> 
```

它工作得很好。在您的 handleResponse 函数中，`alert(s);`在顶部放置一条语句，以查看您从 checkdomain 返回的内容。

# javascript - 如何从Javascript中的一行获取包含WebDataGrid（Infragistics NetAdvantage）控件？

> ID：10923368
> 
> 赞同：0
> 
> 时间：2012-06-06T22:43:35.580
> 
> 标签：javascript, asp.net, infragistics, netadvantage

选择一行后，我成功地获得了选定的行：

```
var currentRow = sender.get_behaviors().get_selection().get_selectedRowsResolved()[0]; 
```

是否有 javascript 函数来获取该行的父 WebDataGrid？像这样的东西：

```
var grid = currentRow.get_parentGrid(); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:06:57.953

和：

```
var grid = currentRow.get_parentGrid(); 
```

您将访问父行对象，但要访问父网格，您需要调用：

```
var grid = currentRow.get_parentGrid().get_grid(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:43:29.593

我找到了解决方案，它非常简单：

```
currentRow.get_grid() 
```

它为您提供父网格。

谢谢大家！

# python - 从字符串中删除序数超出范围的所有字符

> ID：10923375
> 
> 赞同：4
> 
> 时间：2012-06-06T22:44:22.810
> 
> 标签：python, regex, ascii, hashlib, ordinal

什么是删除所有超出范围的字符的好方法：`ordinal(128)`从python中的字符串？

我在 python 2.7 中使用 hashlib.sha256。我得到了例外：

> UnicodeEncodeError：'ascii' 编解码器无法在位置 13 编码字符 u'\u200e'：序数不在范围内（128）

我认为这意味着一些时髦的字符在我试图散列的字符串中找到了它的方式。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T22:47:52.290

```
new_safe_str = some_string.encode('ascii','ignore') 
```

我认为会工作

或者你可以做一个列表理解

```
"".join([ch for ch in orig_string if ord(ch)<= 128]) 
```

[编辑] 然而，正如其他人所说，一般情况下弄清楚如何处理 unicode 可能会更好......除非您出于某种原因确实需要将其编码为 ascii

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T23:08:05.793

与其删除这些字符，不如使用 hashlib 不会阻塞的编码，例如 utf-8：

```
>>> data = u'\u200e'
>>> hashlib.sha256(data.encode('utf-8')).hexdigest()
'e76d0bc0e98b2ad56c38eebda51da277a591043c9bc3f5c5e42cd167abc7393e' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T23:04:15.547

这是 python3 中的更改将进行改进的示例，或者至少会生成更清晰的错误消息

Python2

```
>>> import hashlib
>>> funky_string=u"You owe me £100"
>>> hashlib.sha256(funky_string)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeEncodeError: 'ascii' codec can't encode character u'\xa3' in position 11: ordinal not in range(128)
>>> hashlib.sha256(funky_string.encode("utf-8")).hexdigest()
'81ebd729153b49aea50f4f510972441b350a802fea19d67da4792b025ab6e68e'
>>> 
```

Python3

```
>>> import hashlib
>>> funky_string="You owe me £100"
>>> hashlib.sha256(funky_string)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: Unicode-objects must be encoded before hashing
>>> hashlib.sha256(funky_string.encode("utf-8")).hexdigest()
'81ebd729153b49aea50f4f510972441b350a802fea19d67da4792b025ab6e68e'
>>> 
```

真正的问题是它`sha256`需要一个python2没有明确概念的字节序列。使用`.encode("utf-8")`是我的建议。

# linux-kernel - KVM 如何处理中断

> ID：10923376
> 
> 赞同：7
> 
> 时间：2012-06-06T22:44:35.033
> 
> 标签：linux-kernel, virtualization, qemu, kvm

我一直在做 KVM 的东西，有几个问题想不通。

1>众所周知，通常外部中断会导致VMexit，如果是针对guest，虚拟机管理程序将注入虚拟中断。那么将注入哪个 irq（我的意思是用于索引来宾 IDT 的中断向量）？KVM 如何知道这一点（将主机 IRQ 与来宾虚拟 IRQ 关联）？

2> 如果分配给guest 的设备，hypervisor 会将该IRQ 传递给guest。通过跟踪代码，我发现主机 IRQ 与来宾的不同（我的意思是中断向量）。KVM 如何配置来宾应该使用哪个中断向量？

3> 如果我们通过在 VMCS 中设置一些字段来配置不退出外部中断，那么在物理中断期间会发生什么？CPU会使用guest IDT来响应中断吗？如果是这样，KVM 是否可以重定向 CPU 以使用另一个 IDT 来宾（假设修改 IDTR）？

4> 访客IDT在哪里？这是在初始化 vcpu 和寄存器（包括 IDTR）时由 qemu 配置的吗？

我真的希望有人能回答我的问题。我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:56:20.513

1- 2- 代码在 irq_comm.c 中，非常复杂。对于来宾向量，管理程序捕获并监视来宾的 PCI 配置空间（这实际上是在 QEMU 中完成的 - 例如参见 kvm_msi_update - 但是对 KVM 的系统调用会使用数据更新它）。

3-是的。要设置另一个 IDT - 您需要更改 VMCS 中的 IDTR 字段。

4-访客IDT由访客代码配置。QEMU/KVM 不直接参与其中。您需要配置执行控制以捕获 LIDT 以监控来宾 IDTR 的更改。

听起来您正在尝试从 ASPLOS'12 实施 ELI。离线联系我（论文第二作者-NA）。

# php - ZF2：相当于 Zend 形式的 getServiceLocator

> ID：10923378
> 
> 赞同：2
> 
> 时间：2012-06-06T22:45:01.443
> 
> 标签：php, dependency-injection, zend-framework2

假设：`Event\Service\EventService`是我与`Event\Entity\Event`实体一起使用的个人对象

此代码在 ActionController 中工作：

```
$eventService = $this->getServiceLocator()->get('Event\Service\EventService'); 
```

我怎样才能`$eventService`以`Zend\Form\Form`同样的方式进入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T13:07:45.527

如果你有这样的依赖，你有两个选择。在您的情况下， a`Form`取决于 a `Service`。第一个选项是**注入依赖**项：

```
class Form
{
  protected $service;
  public function setService(Service $service)
  {
    $this->service = $service;
  }
}

$form = new Form;
$form->setService($service); 
```

在这种情况下，`$form`不知道位置`$service`并被普遍接受为一个好主意。为了确保您不需要在每次需要时自己设置所有依赖项`Form`，您可以使用服务管理器创建工厂。

创建工厂的一种方法（还有更多方法）是将`getServiceConfiguration()`方法添加到模块类并使用闭包来实例化`Form`对象。`Service`这是将 a注入a 的示例`Form`：

```
public function getServiceConfiguration()
{
    return array(
        'factories' => array(
            'Event\Form\Event' => function ($sm) {
                $service = $sm->get('Event\Service\EventService');
                $form    = new Form;
                $form->setService($service);

                return $form;
            }
        )
    );
} 
```

然后，您只需`Form`从服务经理那里获得。例如，在您的控制器中：

```
$form = $this->getServiceLocator()->get('Event\Form\Event'); 
```

第二种选择是**拉依赖关系**。尽管不建议将其用于表单之类的类，但您可以注入服务管理器，以便表单可以自己提取依赖项：

```
class Form
{
    protected $sm;

    public function setServiceManager(ServiceManager $sm)
    {
        $this->sm = $sm;
    }

    /**
     * This returns the Service you depend on
     *
     * @return Service
     */
    public function getService ()
    {
        return $this->sm->get('Event\Service\EventService');
    }
} 
```

但是，第二个选项将您的代码与不必要的耦合耦合起来，这使得测试您的代码变得非常困难。所以请使用依赖注入而不是自己拉依赖。只有少数情况下您可能想要自己提取依赖项:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T14:23:16.313

您可以使用 module.php 中的所有选项配置表单。在下面的代码中我：

*   将服务命名为 my_form
*   将新对象 \MyModule\Form\MyForm 与此服务相关联
*   将服务“something1”注入 _construct()
*   将服务“something2”注入到 setSomething()

代码：

```
public function getServiceConfiguration()
{
    return array(
        'factories' => array(
            'my_form' => function ($sm) {
                $model = new \MyModule\Form\MyForm($sm->get('something1'));
                $obj = $sm->get('something2');
                $model->setSomething($obj);
                return $model;
            },
         ),
    );
} 
```

然后在控制器中，以下行将使用所有需要的依赖项填充您的对象

`$form = $this->getServiceLocator()->get('my_form');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-23T09:28:09.920

使用表单元素管理器在控制器中获取表单：

```
 $form = $this->getServiceLocator()->get('FormElementManager')->get('Path\To\Your\Form', $args); 
```

然后在你的表格中会变成这个

```
<?php
    namespace Your\Namespace;
    use Zend\Form\Form;
    use Zend\ServiceManager\ServiceLocatorAwareInterface;
    use Zend\ServiceManager\ ServiceLocatorAwareTrait;

    class MyForm extends Form implements ServiceLocatorAwareInterface {
    use ServiceLocatorAwareTrait;

    public function __construct($class_name, $args)
    {
         /// you cannot get the service locator in construct.
    }
    public function init()
    {
        $this->getServiceLocator()->get('Path\To\Your\Service');
    }
} 
```

# visual-studio-2010 - 在哪里向 Microsoft 报告 VS2010 错误？

> ID：10923381
> 
> 赞同：1
> 
> 时间：2012-06-06T22:45:16.223
> 
> 标签：visual-studio-2010

转到[https://connect.microsoft.com](https://connect.microsoft.com)并浏览到“开发人员工具”->“Visual Studio 和 Dotnet 框架”，唯一的条目是 Visual Studio 2012。

在“搜索产品或程序”搜索框中输入“Visual Studio 2010”，它会返回“没有符合请求条件的记录”。

如何将错误发布到相关产品？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-06T22:49:39.963

Visual Studio 就是 Visual Studio。
所有版本的错误都报告在同一个地方。

如果您按照说明进行操作，您会注意到报告表单中的版本下拉列表。

# iphone - 从 Game Center 发送和接收数据

> ID：10923385
> 
> 赞同：2
> 
> 时间：2012-06-06T22:45:59.267
> 
> 标签：iphone, ios, ios4, game-center, multiplayer

我在从游戏中心多人游戏设备之间发送数据时遇到了很多麻烦。我可以建立匹配并让两个用户都连接，但由于某种原因我无法发送数据。这是我的代码：

```
-(void)sendData {
    NSError *error;
    int myScore = scoreInt;
    NSData *packet = [NSData dataWithBytes:&myScore length:sizeof(myScore)];
    [theMatch sendDataToAllPlayers: packet withDataMode: GKMatchSendDataUnreliable error: &error];
    if (error != nil)
    {
        NSLog(@"ERROR: %@", error);
    }    
}

-(void)match:(GKMatch *)match didReceiveData:(NSData *)data fromPlayer:(NSString *)playerID {

    NSLog(@"called"); 
```

}

我从另一个角度进行比赛，我不知道这是否是问题，但这里是游戏中心找到比赛时的代码：

```
 - (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFindMatch:(GKMatch *)match
{
    MultiplayerView *mpv = [[MultiplayerView alloc] init];

    [self dismissModalViewControllerAnimated:NO];

    mpv.theMatch = match; // Use a retaining property to retain the match.

    match.delegate = self;

    NSLog(@"Matched");
    if (!self.matchStarted && match.expectedPlayerCount == 0)
    {
        self.matchStarted = YES;
        NSLog(@"Lets Go");
        MultiplayerView *mpv = [[MultiplayerView alloc] init];
        [mpv setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
        [self presentModalViewController:mpv animated:YES];
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T07:54:23.003

您必须将当前视图控制器分配给您的匹配委托，否则 match:didReceiveData:fromPlayer: 将不起作用。

# c# - 在 ^ 和 之间加粗文本：

> ID：10923399
> 
> 赞同：-1
> 
> 时间：2012-06-06T22:47:30.333
> 
> 标签：c#, winforms, string, delimiter

我正在用 C# winform 做一个项目，其中我有一个包含多个项目的文本 ^ 和 : 我需要将它们加粗。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T22:55:56.380

使用可以呈现 html 标签的控件，例如`<b></b>`或`<i></i>`。一个示例是 RichTexTBox，您可以在其中在文本中添加 html 标签。

这可能对您有更多帮助：[Loading a HTML file into a RichTextBox](https://stackoverflow.com/questions/1519668/loading-a-html-file-in-to-a-richtextbox)

# sql-server - 如何检查 SQL Server SID 与 Active Directory SID

> ID：10923400
> 
> 赞同：0
> 
> 时间：2012-06-06T22:47:41.917
> 
> 标签：sql-server, sql-server-2000

我在通过 Windows 身份验证登录**SQL Server 2000**数据库时遇到问题，其中已通过 Active Directory 组授予数据库级别的访问权限，相关用户是该组的成员。

我可以通过以下方式检查用户的 AD 组成员身份： whoami /groups 并查看：

```
somedomain\SalesDB-RO                   Group            S-1-5-21-2172273820-3134075794-738947201-31792  Mandatory group, Enabled by default, Enabled group             
somedomain\SalesDB-RO                   Group            S-1-5-21-923798017-1667202166-518595180-7612    Mandatory group, Enabled by default, Enabled group 
```

由于（不知何故）Active Directory SID 历史的性质，有两个条目。

现在，我可以查看数据库（使用 SSMS，使用另一个帐户）并看到“SalesDB-RO”实际上在数据库中具有 db_datareader 权限，但用户仍然无法登录。我想知道“SalesDB-RO”组在文本上是否相同，但在 SQL Server 数据库中可能具有不同的 SID。

如何查看分配给 SQL Server 中“SalesDB-RO”组的 SID？（我个人没有系统管理员权限，但可以找人执行任何必要的命令）。

第二个问题：
在我确实拥有系统管理员权限的另一个 SQL Server (2008) 实例上，我看到 SID 的形式为：

```
0x0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF01234567 
```

....而从 AD 他们是在形式：

```
S-1-5-21-2172273820-3134075794-738947201-31792 
```

有没有办法获得 SID 的可比较版本？

## 更新

事实证明，问题在于用户是 Active Directory 组的成员，该组的数据库读取权限被拒绝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T17:26:58.430

事实证明，在我的情况下，问题是用户是 Active Directory 组的成员，该组的数据库读取权限被拒绝。

更好的（与问题更相关）信息（信用@Kodak）：

[如何从 SQL Server 存储的 SID 获取 Active Directory 组名称？](https://stackoverflow.com/questions/6831933/how-can-i-obtain-an-active-directory-group-name-from-a-sql-server-stored-sid/)

# path - WinSCP 无法访问远程 C:\Windows\Temp 目录

> ID：10923402
> 
> 赞同：-1
> 
> 时间：2012-06-06T22:47:58.347
> 
> 标签：path, winscp

我正在尝试从一个 Windows 7 系统复制到另一个。我希望目标目录是`C:\Windows\Temp`. 如果我省略了目标目录，它会将文件复制到远程计算机的“myuser”主目录。太好了，但我无法将其复制到`C:\Windows\Temp`. 用户“myuser”具有写入权限`C:\Windows\Temp`。我为目标目录尝试了不同的格式：`C:\Windows\Temp\`,`/Windows/Temp/`等。

这是命令：

```
winscp.exe /command "option batch abort" "option confirm off"   
"open myuser:mypassword@myhost" "put myfile /Windows/Temp/" 
```

我也尝试使用`cd`命令设置工作目录，但它仍然不会复制文件：

```
winscp.exe /command "cd C:\Windows\Temp" "option batch abort" "option confirm off"  
"open myuser:mypassword@myhost" "put myfile " 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T07:25:18.810

你真的知道你的服务器使用什么路径语法吗？还是你在猜？

只需连接 WinSCP GUI 并查看初始远程目录。这将使您了解语法是什么。

有很多选项，具体取决于服务器软件：

*   `/cygwin/C/temp/`
*   `/C:/temp/`
*   `/C/temp/`
*   `C:/temp/`
*   `/temp/`
*   和别的。

这适用于要求`/`路径分隔符的 SFTP。使用 FTP，所有变体也都可以使用`\`，尽管这种情况很少见；并且 WinSCP 不能很好地支持此类服务器。

该`C:`驱动器甚至可以在 FTP/SFTP 服务器根目录之外。特别是如果您的帐户是“chrooted”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-08T10:55:43.873

只需按照以下步骤操作：-

1.  右键单击文件（您要编辑的文件）悬停在**编辑**上然后单击**配置**

2.  单击内部编辑器，然后**单击向上按钮**，直到成为**第一个位置**

3.  然后点击**确定**

4.  然后打开文件，它将在默认编辑器上打开（仅编辑一次）

5.  然后将内部编辑器从 WinSCP 设置更改为您想要的编辑器

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-06T22:59:17.053

从安全角度来看，“\windows”文件夹下的任何内容都可以说是一个非常糟糕的选择。

这可能就是问题所在：安全限制。

尝试替换不同的目录。

例如：

1) 打开命令提示符，然后输入“echo %temp%”

2) 您可能会看到类似“c:\Users\xxx\AppData\Local\Temp”的内容

3）尝试复制到该目录，看看你是否有更好的运气

还：

4) 一定要检查潜在的防火墙问题！

# javascript - 从 Ruby 数组到 Rails 中的 JS 数组 - 'quote'？

> ID：10923403
> 
> 赞同：7
> 
> 时间：2012-06-06T22:48:10.540
> 
> 标签：javascript, ruby-on-rails-3, json

我的控制器中有一个这样的 Ruby 数组：

```
 @location_list = [
        ['Mushrooms', 3],
        ['Onions', 1],
        ['Olives', 1], 
        ['Zucchini', 1],
        ['Pepperoni', 2]
      ] 
```

在我看来，我是这样理解的：

```
location_list = "<%= @location_list.to_json %>"; 
```

但是如果我做警报（location_list），我会得到：

```
[[&quot;Mushrooms&quot;,3],[&quot;Onions&quot;,1],[&quot;Olives&quot;,1],[&quot;Zucchini&quot;,1],[&quot;Pepperoni&quot;,2]] 
```

如果没有这些“，我如何获得通讯对象？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-06T22:52:43.700

尝试：

```
<%= raw @location_list.as_json %> 
```

Using`to_json`最终会渲染一个带有嵌入双引号的字符串，并且需要进行 JS 转义。这将是一个字符串，而不是一个数组。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-02-07T15:05:39.950

这对我有用：

```
<%= @location_list.to_s.gsub(''', '') %> 
```

基本上用于`.to_s`将整个数组转换为字符串，然后通过`.gsub(''','')`将引号替换为空来删除引号。

# iphone - 如何检查是否设置了自定义委托？

> ID：10923404
> 
> 赞同：3
> 
> 时间：2012-06-06T22:48:11.120
> 
> 标签：iphone, ios, cocoa-touch, delegates

我已经实现了一个自定义委托，`RandomClassDelegate`， in`RandomClass.m`和`RandomClass.h`。现在我需要实现委托变量，并让它调用协议中的方法，如下所示：

```
[self.delegate randomClassDelegateMethod]; 
```

显然，如果`delegate`从未设置，这将使程序崩溃并导致运行时错误。明显的解决方案是这样做：

```
if (delegate)
{
[self.delegate randomClassDelegateMethod];
} 
```

但我想知道这是否是正确的模式，或者是否有更好的方法来做到这一点，也许在协议或其他地方？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T22:57:46.757

您应该使用`-respondsToSelector:`来检查委托是否有效：

```
if ([delegate respondsToSelector:@selector(myDelegateMethod)])
     [delegate myDelegateMethod]; 
```

不用担心检查`nil`，因为您可以向 nil 对象发送消息，但它什么也不做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T23:07:25.263

检查委托是否不为空并已实现。

```
if(delegate && [delegate respondsToSelector:@selector(randomClassDelegateMethod)]) {
   [delegate randomClassDelegateMethod];
} 
```

# amazon-ec2 - 我的 EBS 支持的 EC2 实例中的 EBS 卷是否会持续存在？

> ID：10923405
> 
> 赞同：2
> 
> 时间：2012-06-06T22:48:18.490
> 
> 标签：amazon-ec2, amazon-web-services, amazon-ebs

所以我在 Amazon Web Services EC2 上设置了一个带有 EBS 支持卷的服务器。它将充当 SVN 服务器，因此我当然希望 EBS 卷是持久的。

我想到的场景是说 EC2 实例因任何原因而死，我可以使用相同的 EBS 启动另一个 EC2 实例，它将拥有它所拥有的所有数据，直到前一个 EC2 实例崩溃

我做了一些阅读，它说当服务器终止时，它也会删除附加到它的 EBS 卷。这是否意味着如果说它崩溃，或者主机出现故障，我会丢失 EBS 卷吗？

如果是，那么我需要做些什么来确保我的 EBS 卷仍然存在，即使它作为根设备附加到的 EC2 实例不再存在？

仅供参考，此时我所做的只是从带有 EBS 的 Amazon Linux AMI 创建一个实例，并根据需要设置该实例

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:58:00.433

您可以更改实例的“终止时删除”设置以保留 EBS 卷，即使您的实例终止。如果您使用的是命令行工具，则可以使用 ec2-modify-instance-attribute --block-device-mapping 命令。这是亚马逊关于此主题的文档的链接。[http://docs.amazonwebservices.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-ModifyInstanceAttribute.html?r=4426](http://docs.amazonwebservices.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-ModifyInstanceAttribute.html?r=4426)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T02:03:03.263

要添加来自@Nikanoru 的正确答案，请确保您*练习*从 EBS 快照恢复一次或两次，并*记下*该过程。

开始整理细节的最糟糕时间是当您的网站出现故障时。

此外，请确保在您不想丢失任何更改后拍摄快照。

# javascript - jQuery - 选定的 DOM 元素和新元素之间的区别

> ID：10923412
> 
> 赞同：2
> 
> 时间：2012-06-06T22:49:14.317
> 
> 标签：javascript, jquery

我开始使用 JavaScript 和 jQuery 不仅仅是为了做一些闪亮的效果，而且我对 jQuery 中的一个基本问题有疑问。我经常不知道我在 jQuery 中*真正使用的是什么。*

例如，如果 a 具有以下标记：

```
<img class="image" src="picture.png" width="100" height="100" /> 
```

在 jQuery 中做

```
var img = $('.image'); 
```

`img`那么和我做的时候不一样

```
var img = $('<img class="image" src="picture.png" width="100" height="100" />'); 
```

但是，例如，如果我想在图像上创建一个新图像并在其上运行一些 jQuery 函数，例如`.css()`，我必须这样做：

```
var img = $('<img class="image" src="picture.png" width="100" height="100" />');
img.appendTo('.myElement');
$('.image').css("border","none"); 
```

哪一种是双重步骤？

**我的问题**：我在这里处理的事情有哪些不同类型？前两个例子有什么区别？我想了解在使用 jQuery/JavaScript 时我正在处理的实际元素是什么。

**我的问题[更新]：**我可能有点不清楚，我不想知道这些示例实际上做了什么，但是当我调用这些函数时我选择/创建了什么（指向 DOM 元素的指针，JavaScript 中的字符串表示 HTML 但仍必须添加到要显示的 DOM 等）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T22:55:20.423

当您将**选择器**（例如`$('.image')`）传递给 jQuery 函数时，它就是这样做的：**选择**。jQuery 对象将包含与该选择器匹配的 DOM 中已经存在的所有元素。

当您将 HTML 字符串传递给 jQuery 函数时，它会创建一个 jQuery 对象，其中包含 HTML 表示的元素。但是，它不会自动将它们添加到 DOM，因此您无法选择它们；您需要使用各种方法之一来添加它们 - `.append()`, `.appendTo()`, `.before()`,`.after()`等。

然而，您的 CSS 操作示例存在缺陷，因为您可以将 jQuery 函数链接在一起。您可以将其组合成一行代码：

```
var img = $('<img class="image" src="picture.png" width="100" height="100" />')
          .css("border","none")
          .appendTo('.myElement'); 
```

如果这就是你想要对元素做的所有事情，那么你甚至不需要将它保存到变量中。但是，如果您以后想再次使用它，那么这样做可能会更快；完全取决于您将要使用它做什么*。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T23:00:16.067

使用选择器查找元素和使用 HTML 代码创建元素之间的区别只是一个元素已经存在于页面中，而另一个元素是创建并与页面分开存在的。

您可以对新创建的对象执行大多数操作，而无需先将其添加到页面中，例如设置 CSS 样式：

```
var img = $('<img class="image" src="picture.png" width="100" height="100" />').css("border","none");
img.appendTo('.myElement'); 
```

在将元素添加到页面之前，您无法对元素执行某些操作。例如，除非元素存在于页面中，否则某些动画将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T22:54:49.213

这会选择`class="image"`页面中的所有 div，并将它们保存在 img 变量中以供将来操作：

```
var img = $('.image'); 
```

所以如果你以后这样做：

```
img.remove(); 
```

此代码将从页面中删除所有先前选择的元素。

虽然我很确定您打算选择页面上的所有图像（而不是 div）：

```
var img = $('img'); 
```

* * *

然而

```
var img = $('<img class="image" src="picture.png" width="100" height="100" />'); 
```

创建一个新元素，该元素仅存在于您的 img 变量中，而不存在于网页中，直到您决定将其附加到 dom 中。

您可以对两种元素类型使用相同的操作，唯一的区别是后一种元素尚未显示在您的网页中，它存在于 dom 的边缘。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T22:56:03.670

jquery 函数做了太多不同的任务，IMO。

如果您向 jquery 函数传递`$()`一些 html，它将为您创建一个包装在 jquery 包装器对象中的 dom 元素。

如果您将选择器传递给它，它将定位与选择器匹配的所有 dom 元素，并在 jquery 包装器中将它们包装器返回。

在您的示例中，如果文档中没有其他内容`class="image"`，则您的变量与（将其插入文档后）`img`完全相同。`$('.image')`访问它`$('.image')`只是返回插入元素的一种更迂回的方式 - 您基本上是在 dom 中搜索刚刚插入的元素，而不是使用代码中已有的对它的引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T22:56:49.910

为了简单起见：

*   `$("<img>")`- 创建新元素，与`document.createElement("img")`.
*   `$(".img")`- 在 DOM 中选择一个元素。

有趣的事实：

*   `$(function(){ /*blah.*/ })`- 当 DOM 完成加载时运行。
*   [`$()`](http://api.jquery.com/jQuery/)实际上可以做很多事情！
*   `$(".img", document.body)`- 这比`$(".img")`因为它是作用域^([（或任何你称之为的）])更快。

# macos - 在 OSX 上安装 OpenSSL 1.0.1c

> ID：10923414
> 
> 赞同：3
> 
> 时间：2012-06-06T22:49:30.607
> 
> 标签：macos, openssl, installation

我下载了 OpenSSL 1.0.1c 并运行了这个

```
sudo ./config --prefix=/usr/
make
make test
sudo make install 
```

一切似乎都很好，没有错误，但是：

```
$ openssl version
OpenSSL 0.9.8k 25 Mar 2009 
```

`OPENSSL_VERSION_TEXT`有同样的问题。是旧版本！奇怪的是，一个不同的旧版本（0.9.8r）。不使用`--prefix=/usr/`会出现同样的问题。如何更新到 1.0.1c？我需要能够使用它来测试我正在制作的库。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:40:58.800

为什么不使用`homebrew`or安装它`macports`？我的 openssl 版本是`1.0.1c`，我想我是使用 macports 作为其他包的依赖项安装它的。

```
☁  ~  openssl version
OpenSSL 1.0.1c 10 May 2012 
```

# jquery - jQuery.动画

> ID：10923418
> 
> 赞同：0
> 
> 时间：2012-06-06T22:49:51.963
> 
> 标签：jquery

我有以下问题：一旦单击一个列表项，一个 div 向上滑动并将不透明度更改为 1。我的目标是在第二次单击时，相同的 div 将获得不透明度 0。

我尝试删除原始类并添加一个新类“已选择”，然后对其应用点击事件。由于某种原因，第二部分不起作用。有任何想法吗？

```
$(document).ready(function () {
    $('li.slide1').click(function () {
        $("div#slidebox1").animate({
            opacity: .8,
            top: -200,

        }, 300);

        $("li.slide1").removeClass("slide1").addClass("selected");

    });

    $("li.selected").click(function () {

        $("div#slidebox1").animate({
            opacity: 0,

        }, 300);

    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T22:52:00.273

```
$("ul").on("click", "li.selected", function () {
   $("div#slidebox1").animate({ opacity:0},300);
}); 
```

用于`on()`委派您处理第二次点击。

您当前的代码正在设置两个`click`处理程序`document.ready()`- 但由于`li`' 没有类`selected`但它们没有应用程序处理程序。Using`on()`将处理程序设置为`ul`，它捕获冒泡的单击事件，并检查它的目标是否是`li.selected`并调用您的函数。

此外，正如 gdoron 在下面建议的那样，您可以在第一个函数中包含绑定处理程序`callback`。

```
$('li.slide1').click(function () {
    $("div#slidebox1").animate({
        opacity: .8,
        top: -200
    }, 300, function(){
         $(this).one("click", function(){
            $("div#slidebox1").animate({opacity:0}, 300);
         });
    });

    $("li.slide1").removeClass("slide1").addClass("selected");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T23:09:39.373

您必须对 jQuery 1.7+ 或 .live() jQuery 1.3+ 使用 .on() ，因为当用户单击 li.slide1 时添加了“selected”类，并且它以前不存在。

```
$(document).ready(function () {
    $('li.slide1').live('click',function () {
        $("div#slidebox1").animate({ opacity: .8, top: -200 }, 300);
        $(this).removeClass("slide1").addClass("selected");
    });

    $("li.selected").live('click', function () {
        $("div#slidebox1").animate({ opacity: 0 }, 300);
    });
}); 
```

# xml - 如何用 Opa 解析 XML？

> ID：10923419
> 
> 赞同：3
> 
> 时间：2012-06-06T22:49:57.313
> 
> 标签：xml, parsing, xml-parsing, opa

如果您想将 Opa Web 客户端与 XML-RPC 服务器连接。发送请求的正确方法可能是

```
xml request_body = @xml(
  <methodCall>
    <methodName>my_rpc_method</methodName>
    <params>some_rpc_params</params>
  </methodCall>
)

request = WebClient.Post.of_xml(
  {WebClient.Post.default_options with
    content: {some: request_body}
  }
)

WebClient.Post.try_post_with_options_async(
  server_uri,
  request,
  callback
)

function callback(response) {
  ...
} 
```

现在，将服务器响应解析回 Opa XML 数据结构的正确方法是什么？我目前为此创建了自己的 XML 解析器，但这肯定不是最佳实践。

该[API](http://doc.opalang.org)显示了几个 XML 解析函数，例如：

*   [xml_parser.try_parse](http://doc.opalang.org/value/stdlib.core.xhtml/Xml_parser/try_parse)
*   [XmlConvert.of_string](http://doc.opalang.org/value/stdlib.core.xhtml/XmlConvert/of_string)
*   [Xmlns.try_parse](http://doc.opalang.org/value/stdlib.core.xhtml/Xmlns/try_parse)（顺便说一句。Opa 中的 Xml 和 Xmlns 数据类型有什么区别？）
*   ...

但其中哪一个是正确的？该文档（还）没有详细说明它们的用法。[或者通过WebClient.Result.as_xml](http://doc.opalang.org/value/stdlib.core.web.client/WebClient/Result/as_xml)直接以 XML 形式转换服务器响应是否正确？

我创建了一个[存储库](https://github.com/J-Hannes/opa-xml-parsing)，其中包含具有给定问题的可运行代码。随意分叉和修复它。

将这样的 XML 服务器响应解析为相应的数据结构的最佳（也是最简单）的方法是什么？

汉尼斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T19:35:59.433

好的，这就是您提到的三个功能的作用：

*   `Xml_parser.try_parse`是一个调用*XML 解析器*的函数。XML 解析器是使用`xml_parser`关键字构建的，有点类似于 Opa 的`parser`，除了它们解析 XML，而不是文本。
*   `XmlConvert.of_string`是将 a 转换为 的函数`string`，`xml`因此它只是构建由文本节点组成的 XML 的简单函数。
*   `Xmlns.try_parse`尝试相反的转换：即它需要 a`string`并尝试将其解析为“xml”。

因此，如果您收到字符串响应并想要处理它，那么您通常会：

1.  将其解析为`xml`使用`Xmlns.try_parse`
2.  建了一个`xml_parser`
3.  调用它`Xml_parser.try_parse`以获取 XML 数据的结构表示。

如果您立即以 XML 格式获取数据，则可以跳过上面的第一步。让我知道这是否有帮助。

# ajax - XHR JSON 响应以 for 开头

> ID：10923430
> 
> 赞同：0
> 
> 时间：2012-06-06T22:51:43.677
> 
> 标签：ajax, json, cross-domain

我正在查看一些 facebook XHR 请求。我看到有一个跨域的请求，响应是一个 JSON，如：

```
for (;;); {/* JSON object */} 
```

为什么该响应以*for*开头？我认为这与某些安全原因有关，有人可以解释一下吗？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T22:54:51.893

这样做是为了防止 XSS。

如果恶意站点在标签中包含该 JSON URL `<script>`，浏览器将冻结。
实际的客户站点可以去掉前缀；由于同源政策，其他网站不能。

# php - 保护 php 包括（使用 htaccess？）

> ID：10923431
> 
> 赞同：3
> 
> 时间：2012-06-06T22:51:43.910
> 
> 标签：php, .htaccess, include, protection

首先，我很确定 Stack Overflow 上也会有类似的问题，但我并没有真正找到它。可能是因为我使用了错误的关键字。所以不要因此而开枪打我。

我的问题基本上是，我想包含 php 文件，但我只希望它们被包含，而不是让人们用他们的浏览器打开。他们应该得到一个错误。

例如，我有一个包含 php 文件的包含目录，其中包含我与数据库的连接（密码等。危险？）。我希望能够包含它，但我不希望人们直接访问该页面。

使用 htaccess 在包含目录上设置密码可以解决我的问题吗？首先我认为它不会，因为可以为无权访问它的用户包含页面会很奇怪。但这似乎有效，这是怎么来的？还有其他更好的选择吗？Web开发人员通常做什么？

我也可以为 javascript 文件做类似的事情吗？我的猜测是不会是这种情况，但我只是在问。js 文件包含对某些页面的 ajax 调用，但我想如果我能保护 php 页面不被访问，我会很高兴。

无论如何提前谢谢:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T23:06:53.253

我认为解释这些部分如何协同工作将有助于消除混乱。

一个请求进来（来自用户的网络浏览器）。您的 Web 服务器（在本例中为 Apache）接收此信息。首先，它检查`<Location>`权限。然后它查看配置的其余部分，并最终将请求 URI 映射到文件系统。现在，最后，它可以检查`<Directory>`权限以及`.htaccess`.

如果这些权限检查中的任何一个失败（例如，`deny from all`），Apache 将停止处理请求，并返回一个错误（或在 HTTP 基本身份验证的情况下请求用户名和密码）。

一旦所有权限检查通过，Apache 就会查看该文件，并注意到它是一个`.php`文件。在您（或您的网络主机）的 Apache 配置中，有一个`AddHandler`指令告诉 Apache 将此请求传递给 PHP 引擎（可以是 mod_php，或通过快速 cgi）。（对于大多数文件，它会将文件的内容发送到浏览器。但脚本文件是特殊的，因此`AddHandler`。）

现在，PHP 读取您的脚本文件。然后它还*直接*读取您的包含文件。这不会通过 Apache 返回，因此`.htaccess`不适用。这也意味着您的 PHP 包含*不需要*在您的文档根目录中。它们可以是 PHP 进程可以访问的任何地方（基于 UNIX 权限和 PHP 配置）。在 php.ini 中设置 include_dir 可以很容易地将它们放在任何地方。

客户端 JavaScript 由用户的浏览器运行。它不是在服务器端解释的（就像 PHP 一样）。所以用户必须能够访问它，就像用户必须能够访问您的 .html 文件一样。

所以，简而言之：

*   您可以在 PHP 包含目录中放置一个`.htaccess`with `Deny from all`。PHP 的`include`指令不通过 Apache，所以它不会在意。理想情况下，您甚至根本不将 PHP 包含目录放在文档根目录下。
*   您不能对 JavaScript 执行此操作，因为 JavaScript 访问通过 Apache（就像 .html、.png 等访问一样）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T23:06:37.667

理想情况下，您的 PHP 包含应位于 Web 无法直接访问的文件夹中。

例如：假设您的网站位于 中`/var/www/htdocs/`，那么您将放入`index.php`其中，但包含应位于 Web 可访问区域之外的单独文件夹中。在此示例中，您可以在旁边有一个`htdocs`名为的文件夹`/var/www/includes/`，PHP 包含将在其中存在。

通过这种方式，他们可以完全免受不需要的直接 Web 访问。

此外，您应该编写 PHP 代码，使包含文件仅包含类或函数。这意味着如果从网络以某种方式访问​​它，什么都不会发生：PHP 将加载所有函数，但不会运行其中任何一个，因此用户只会看到一个空白页面。

如果另一个页面想要包含该文件，则需要包含，然后还调用其中的函数；你不应该有一个立即运行代码的包含。

您应该只编写在旨在供用户直接访问的页面上立即运行的 PHP 代码，例如`index.php`.

希望有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T23:11:47.247

您确实可以选择不使用 .htaccess 来执行此操作（并不是说这是一个更好的解决方案，只是一个不同的解决方案）。

在您希望用户直接访问的文件中，将以下内容放在任何包含之前：

```
@define('IN_APPLICATION', true);
require 'file.class.php'; //sample include 
```

然后在包含（类文件）中，将以下代码放在顶部：

```
if (!defined('IN_APPLICATION')){
    die(header('HTTP/1.0 404 Not Found')); //or just die();
} 
```

这将确保类文件仅在包含在定义`IN_APPLICATION`. `die()`您也可以只用 a本身杀死类文件，而不是伪造 404。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T22:57:35.263

在您的包含目录中创建一个 .htaccess 文件

```
deny from all 
```

不能为客户端脚本完成，因为浏览器必须能够访问它们。你能做的最好的就是[混淆它们](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-07T20:29:34.083

嗯，如前所述，htaccess 不会阻止 php 访问 htpassword 安全文件夹。因此，必须调用 Apache 才能使用它非常安全的安全功能，至少对于 https 恕我直言，例如：

```
header('Location: secret/index.php'); 
```

使用 htaccess 保护文件夹机密的位置。

index.php 可能如下所示：

```
<?php
$a = $_REQUEST['a'] ;
if ($a==secret)  
    header('Location: secret/index.php');    
include_once("index_head.php");
include_once("index_tail.php");
?> 
```

和秘密/index.php

```
<?php 
include_once("../index_head.php");
include_once("./secret.php");
include_once("../index_tail.php");
?> 
```

剩下的主要问题是，secret/index.php 将找不到任何链接，如 ./main.css 等。因此必须定义绝对链接而不是相对链接，但我相信你们现在该怎么做；- )

一个正在运行的示例在[http://promotio.ch/secret.php/](http://promotio.ch/secret.php/)

# javascript - IE: indexOf 导致“对象不支持此属性或方法”

> ID：10923434
> 
> 赞同：26
> 
> 时间：2012-06-06T22:52:37.933
> 
> 标签：javascript, jquery, internet-explorer, indexof

我有以下 if 语句：

```
if (buyArray.indexOf(dealWith,0) != -1){ 
```

哪个在 ie（即 XP 上的 8）中出现“对象不支持此属性或方法”。

有人可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-06T22:55:40.087

是的，IE<9 不支持`indexOf`. 您可以像这里显示的那样实现一个 shim：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)

或者，如果您已经使用 jQuery，则可以使用[inArray](http://api.jquery.com/jQuery.inArray/)。[underscore](http://underscorejs.org/#indexOf)也有一个实现。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-06T22:59:21.367

简单地改为使用jQuery.inArray。感谢 ZER0 的提醒

```
if ($.inArray(dealWith, buyArray) != -1) { 
```

# doctrine - ODM：无法实现双向关系

> ID：10923438
> 
> 赞同：3
> 
> 时间：2012-06-06T22:52:46.140
> 
> 标签：doctrine, doctrine-orm, doctrine-odm

我有两个文件。我正在尝试查找与特定人员相关的所有论文。`Person`文档保存在它们的集合中，并且正在从to创建引用`Paper`，但不是相反。

```
/** @ODM\Document */
class Paper
{
/**
 * @ODM\Id
 */
protected $id;

/** @ODM\ReferenceOne(targetDocument="Person", cascade={"all"}, mappedBy="papers") */
protected $person;

public function __get($property) {
    return $this->$property;
}

public function __set($property, $value) {
    $this->$property = $value;
}

public function toArray() {
    return get_object_vars($this);
}
} 
```

```
/** @ODM\Document */
class Person
{
/**
 * @ODM\Id
 */
protected $id;

/** @ODM\ReferenceMany(targetDocument="Paper", cascade={"all"}, inversedBy="person") */
protected $papers;

public function __get($property) {
    return $this->$property;
}

public function __set($property, $value) {
    $this->$property = $value;
}

public function toArray() {
    return get_object_vars($this);
}
} 
```

**创建一个新的双向参考**

```
$person = $dm->getRespository('Person')->find($person_id);

$paper = new Paper();
$person->papers->add($paper);

$dm->persist($person);
$dm->flush(); 
```

在后面的代码中，这个查询返回 0 个结果；不应该是退回指定人写的论文吗？

```
$papers = $dm->createQueryBuilder('Paper')
    ->field('person.$id')->equals(new \MongoId($person_id_as_string))
    ->getQuery()->execute(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T23:52:01.827

如果 Paper::person 带有“mappedBy”注释，则意味着 Paper 不是“拥有方”，并且原则不会对 Paper::person 进行任何更改。

要使您的查询正常工作，请将 Paper 设为拥有方，以便 Paper 存储对 Person 的引用。

```
/** @ODM\Document */
class Person
{
    /** @ODM\ReferenceMany(targetDocument="Paper", mappedBy="person") */
    protected $papers;
}

/** @ODM\Document */
class Paper
{    
    /** @ODM\ReferenceOne(targetDocument="Person", inversedBy="papers") */
    protected $person;
} 
```

创建论文并保留对人员的引用：

```
$person = $dm->getRespository('Person')->find($person_id);

$paper = new Paper();
$paper->person = $person;

$dm->persist($paper);
$dm->flush(); 
```

$person 查询论文：

```
$papers = $dm->createQueryBuilder('Paper')
    ->field('person')->references($person)
    ->getQuery()->execute(); 
```

# mongodb - MongoDB中应该如何建模以下多对多关系？

> ID：10923440
> 
> 赞同：3
> 
> 时间：2012-06-06T22:53:34.230
> 
> 标签：mongodb, many-to-many, modeling, nosql

假设我有学生和老师的多对多关系。如果我只想找出给定学生的所有老师，反之亦然，我通常使用嵌入式对象 ID 对其进行建模。例如，如果教师有一个属性 studentIds，它是一个学生对象 ID 的数组，那么这足以完成您需要的所有查询。

但是，假设学生可以给老师打分。这个评级应该如何适应模型？目前，我执行以下操作：

1.  在教师内部而不是存储学生数组，我存储了一个 json 对象数组 {studentId: ObjectId, rating: String}
2.  进行查询时，我将 json 对象数组转换为 studentIds 数组并像往常一样提取完整信息
3.  所以现在我有一个学生对象数组和一个带有评分的json对象数组
4.  但是，由于 MongoDB 中的 $in 运算符不保留排序，我需要自己进行排序
5.  在最后一步，一切都井井有条，我可以将学生对象与评级结合起来得到我想要的

它有效，但似乎有点令人费解，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:36:14.600

以下是一些注意事项。最后，这取决于您的要求：

1.  评分是可选的，对吧？

    如果是这样，问问自己是否要将所需的功能（存储教师/学生关联）与一个不错的功能结合起来。实现一个不错的功能的代码现在写入您最重要的集合。我认为您可以使用不同的数据库模式改进**代码中的关注点分离。**

2.  您需要**更多功能**吗？

    假设您想向学生提供他们给出的评分列表、学生对教师的平均评分，并且您想显示评分随时间的变化。这对于嵌入的文档会非常混乱。*嵌入式文档不太灵活*。

3.  如果您需要顶级读取性能，则需要对更多数据进行非规范化

    如果您想坚持嵌入的文档，您可能需要复制更多数据。假设有一个每位教师的评分概览，您可以在其中看到学生的姓名。嵌入对象会很有帮助

    ```
    { studentId : ObjectId, 
      rating: string, 
      studentName: string, 
      created: dateTime } 
    ```

作为替代方案，考虑

```
TeacherRating {
    StudentId: id
    TeacherId: id
    Rating: number
    Created: DateTime
} 
```

教师/学生关联仍将存储在教师对象中，但评分位于不同的集合中。如果找不到教师和学生之间的关联，则无法创建评分。

或者

```
TeacherStudentClass {
    StudentId: id
    TeacherId: id
    Class: id
    ClassName: string // (denormalized, just an example)
    Rating: number // (optional)
    Created: DateTime
} 
```

要查找给定教师的所有学生，您必须先查询链接器文档，然后`$in`对学生进行查询，反之亦然。这又是一个查询，但它带来了极大的灵活性。

# objective-c - 即使我在 shouldAutorotate 上返回 NO，视图也会出现旋转问题

> ID：10923443
> 
> 赞同：1
> 
> 时间：2012-06-06T22:53:47.327
> 
> 标签：objective-c, ios, uiview, uiviewcontroller

我有一个 ViewController，我有这个代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    return NO;

} 
```

但是，如果我改变方向，视图会旋转。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T00:21:04.963

以下是我如何将 iPad 保持在横向模式：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
if (interfaceOrientation==UIInterfaceOrientationLandscapeLeft || interfaceOrientation==UIInterfaceOrientationLandscapeRight)
{
    return YES;
}

else
{
    return NO;
}

} 
```

# java - 生成仅包含指定字符的指定长度的随机字符串（在 Java 中）

> ID：10923445
> 
> 赞同：0
> 
> 时间：2012-06-06T22:53:49.383
> 
> 标签：java, random, password-generator

有谁知道在Java中生成指定长度和字符的随机字符串的好方法。

例如，“length”可以是 5，“possibleChars”可以是“a,b,c,1,2,3,!”。

所以

c!a1b 有效

但

cba16 不是。

我可以尝试从头开始写一些东西，但我觉得这一定是生成密码、生成优惠券代码等事情的常见用例......

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T22:58:52.833

执行此操作的代码非常短。有一个带有 N 个合法字符的 char[] 或字符串，并且，长度时间，选择一个介于 0 和 N-1 之间的随机数 R，使用 R 选择一个字符以附加到您生成的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T23:01:56.323

你想要这样的东西吗？

```
Random r=new Random();

char[] possibleChars="abc123!".toCharArray();
int length=5;

char[] newPassword=new char[length];

for (int i=0; i<length;i++)
    newPassword[i]=possibleChars[r.nextInt(possibleChars.length)];

System.out.println(new String(newPassword)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T23:04:10.037

> 我可以尝试从头开始写一些东西，但我觉得这一定是生成密码、生成优惠券代码等事情的常见用例......

不是很常见，而且每次的详细要求都不一样。此外，代码简单到微不足道。（模数下面的问题......这实际上是关于需求而不是解决方案。）

简而言之，编写自己的方法比寻找执行此操作的现有库方法要快。

* * *

当您使用涉及随机数的方案时，您需要注意可能会发生冲突；即该方法将不止一次生成相同的随机字符串。您可以通过使用更长的字符串来缓解这种情况，但这仅适用于某一点……取决于您的随机数生成器。（典型的随机数生成器实际上是伪随机数生成器，并产生最终循环的数字序列。即使使用完美的随机数生成器，在短序列上重复的概率也是有限的。）

事实上，这也是为什么“一刀切”解决您的问题不是一个好主意的另一个原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T15:44:00.997

如果这是为了真正的安全性，而不是家庭作业或编程练习，那么请使用 SecureRandom，而不是 Random。

阅读[Diceware](http://world.std.com/~reinhold/diceware.html)网站，了解有关随机生成密码和其他内容的许多非常好的想法。

# iphone - UITableView 内的 UIScrollView

> ID：10923446
> 
> 赞同：0
> 
> 时间：2012-06-06T22:54:36.590
> 
> 标签：iphone, uitableview, sdk, uiscrollview

我有一个表格视图，作为标题，我使用了滚动视图。除了当我向下（或向上）滚动表格视图时，滚动视图“丢失”x，y坐标这一事实之外，所有工作都可以滚动。

例如，如果我在 headerview 上从右到左滚动滚动视图（反之亦然），则 scrollOffset.x 会得到一个值。如果我开始滚动表格视图，那么这个值会变回零（尽管滚动视图不会丢失分页）。如果我回到滚动视图并再次开始滚动，scrollOffset.x 将再次获得正确的值。

当我滚动表格视图时，无论如何要“保留”scrollOffset.x 值？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:00:08.297

考虑到 tableView 是 scrollView 的子类，问题似乎在于 scrollOffset.x 是由您当前在其中滚动的任何 scrollView 设置的。尝试将标签添加到您的表格视图和滚动视图，并添加一个变量以跟上 scrollOffset.x 仅适用于标题中的滚动视图。

# php - phpexcel 条件格式图标集

> ID：10923450
> 
> 赞同：1
> 
> 时间：2012-06-06T22:54:51.023
> 
> 标签：php, html, phpexcel, pear

在过去的几天里，我一直在尝试查找如何使用内置图标集，而不是更改条件格式的背景颜色。我希望将绿色勾号和红十字用于我的条件格式，而不是红色和绿色背景。

我正在使用 PHPEXCEL 库来构建当前的电子表格，但如果需要，我会将我的代码更改为 PEAR 库。

目前我在任何网站上都没有找到任何对我有帮助的东西，我希望有人可能已经阅读了有关如何执行此操作的内容？或者有一些已经这样做的代码......非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T23:01:37.403

使用图标集的选项不可用：您只能设置样式/格式信息，例如数字格式、字体、颜色、边框。我什至没有意识到 Excel 提供了带有条件格式的选项。我怀疑 PEAR 也不太可能给你这个选项。

我能想到的最好的替代选择是使用自定义数字格式掩码来设置颜色并添加特殊字符，例如刻度/十字。

**编辑**

例子

使用数字格式掩码：将字体设置为 Wingdings，将格式掩码设置为

```
[Red][=0] "ý";[Green][=1] "þ" 
```

值为 0 的单元格值将在红色中显示为一个十字框，值为 1 的单元格值将在绿色中显示为一个方框中的勾号。

# java - selenium web 驱动和webpagetest.org .HAR 文件的区别

> ID：10923452
> 
> 赞同：2
> 
> 时间：2012-06-06T22:54:53.427
> 
> 标签：java, selenium

我已经使用 Selenium Web 驱动程序和 BrowserMob 代理（SWD+BM）和使用webpagetest.org（WPT）生成了.HAR 文件。我使用 HAR Storage 来查看这些文件。以下是我发现的差异。

一个。与 WPT 相比，SWD+BM 中显示的所有大小和时间（加载时间、DNS 时间、传输时间等）都更少。

湾。与 WPT 相比，SWD+BM 中按请求的资源数量（图像、css、html 等）、按大小划分的资源、按请求划分的域、按大小划分的域数量少于或等于（大部分少于）。

我都使用了 Firefox 浏览器。

为什么会有这些差异？这两者有什么架构差异吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T05:49:44.960

WPT 默认模拟低带宽 DSL 连接。BMP 确实支持流量整形，但默认情况下不支持。

请求的差异可能只是由于页面上的时间问题和动态元素。

# jquery - 单击事件后如何在 jQuery 中找到非直接的“父级”？

> ID：10923454
> 
> 赞同：1
> 
> 时间：2012-06-06T22:55:25.217
> 
> 标签：jquery, html

[LIVE SAMPLE](http://designobvio.us/ie/#) 我正在尝试在 jQuery 中编写一个基本的单击过滤器脚本来查找 3 个类`print, video, web`并打开和关闭它们。我有 1 个单击侦听器引用 4 个 ID：`#printInteract, #webInteract, #videoInteract, #allInteract`

**问题** 单击后，我想切换`.box`包含一个或多个类的父级切换。不幸的是，我的点击事件删除了引用的 id 而不是父级`.box`

*我怎样才能抓住父母（它不是直接父母||检查htmlbox）`.box`并隐藏/显示它？

**jQuery**

```
$(document).ready(function () {

//attach a single click listener on li elements
$('li.navCenter').on('click', function () {

    // get the id of the clicked li
    var id = $(this).attr('id');

    //conditional cases
    if (id == 'printInteract') {
        $(".box").find('.web, .video').hide();
        $(".box").find('.print').show();
    }
    if (id == 'webInteract') {
        $(".box").find('.print, .video').hide();
        $(".box").find('.web').show();
    }
    if (id == 'videoInteract') {
        $(".box").find('.print, .web').hide();
        $(".box").find('.video').show();
    }
    if (id == 'allInteract') {
        $(".box").find('.video, .print, .web').show();
    }
});
}); 
```

**框 HTML**

```
<div class="box">
<h1 title="Light me up"></h1>
<div class="innerbox">
    <figure>
        <img src="#"
        />
    </figure>
    <ul class="categorySelect">
        <li class="print"></li>
        <li class="video"></li>
    </ul>
</div> 
```

**html导航**

```
 <li id="allInteract" class="navCenter">
    <a id="activeAll" class="navBg" href="#"><div class="relativeCenter"><img src="asset/img/logo30px.png" /><h3>all</h3></div></a>
</li>
<li id="printInteract" class="navCenter">
    <a id="activePrint" class="navBg" href="#"><div class="relativeCenter"><img src="asset/img/print.gif" /><h3>print</h3></div></a>
</li>
<li id="videoInteract" class="navCenter">
    <a id="activeVideo" class="navBg" href="#"><div class="relativeCenter"><img src="asset/img/video.gif" /><h3>video</h3></div></a>
</li>
<li id="webInteract" class="navCenter">
    <a id="activeWeb" class="navBg" href="#"><div class="relativeCenter"><img src="asset/img/web.gif"  /><h3>web</h3></div></a>
</li> 
```

PS：有人知道如何为此添加淡出过渡吗？:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T22:58:08.537

也许您正在寻找[.closest()](http://api.jquery.com/closest/)：

```
$(this).closest('.box').hide(); 
```

# dynamics-crm - 覆盖 FIlteredViews 中的 30 天内

> ID：10923460
> 
> 赞同：0
> 
> 时间：2012-06-06T22:56:06.420
> 
> 标签：dynamics-crm, dynamics-crm-2011

我有一个使用 SQL 查询的 SRSS 报告，该查询使用该 FilteredViews 以允许报告使用“在当前记录上运行”。这很好用，但它添加了“最后 X 天”并将其设置为 30。它以某种方式可以改变它，或者更好的是，完全摆脱它？这是我的参考查询：

```
SELECT        CRMAF_Quote.QuoteNumber, CRMAF_Quote.Name, CRMAF_Quote.CreatedOn, CRMAF_Quote.CustomerIdName, CRMAF_Quote.OwnerIdName, 
                         CRMAF_Quote.Name AS Expr1, CRMAF_Quote.BillTo_Line1, CRMAF_Quote.BillTo_Line2, CRMAF_Quote.BillTo_Line3, CRMAF_Quote.BillTo_StateOrProvince, 
                         CRMAF_Quote.BillTo_PostalCode, CRMAF_Quote.BillTo_Telephone, CRMAF_Quote.BillTo_Fax, CRMAF_QuoteDetail.lineitemnumber, CRMAF_QuoteDetail.Quantity,
                         CRMAF_QuoteDetail.productdescription, CRMAF_QuoteDetail.BaseAmount, CRMAF_QuoteDetail.ExtendedAmount, CRMAF_Quote.DiscountAmount, CRMAF_Quote.TotalTax, CRMAF_Quote.TotalAmount, 
                         CRMAF_Quote.RevisionNumber, CRMAF_SystemUser.Address1_Telephone1, 
                         CRMAF_SystemUser.InternalEMailAddress, CRMAF_Product.productnumber, CRMAF_Product.Name AS ProductName
FROM            FilteredQuote as CRMAF_Quote JOIN
                         FilteredQuoteDetail as CRMAF_QuoteDetail ON CRMAF_Quote.QuoteId = CRMAF_QuoteDetail.QuoteId LEFT OUTER JOIN
                         FilteredProduct AS CRMAF_Product ON CRMAF_QuoteDetail.productid =  CRMAF_Product.productid LEFT OUTER JOIN
                         FilteredSystemUser as CRMAF_SystemUser ON CRMAF_Quote.OwnerId = CRMAF_SystemUser.SystemUserId 
```

附件是它添加的 30 天的屏幕截图。 ![在此处输入图像描述](../Images/4e4b8352f106fa73892e1cbcbf85d361.png)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T03:31:35.937

从您的可用报告列表中 - 您应该能够选择您的报告，然后从功能区中选择编辑默认过滤器。您可以在此处更改或消除自动添加的过滤器。

# php - 如何获取 NSString 中携带的 UTF8 编码版本的数据并将其返回给 NSData？

> ID：10923461
> 
> 赞同：1
> 
> 时间：2012-06-06T22:56:21.397
> 
> 标签：php, ios, encoding, zip

我正在尝试在服务器和设备之间传输 zip 存档，并且试图找出我做错了什么。为了让生活更轻松，我目前使用 PHPMyAdmin 的上传功能上传了文件，以减少可能的编码问题。我还通过创建一个将其作为下载提供的快速脚本来确认数据库中的文件是正确的——除了必须将文件重命名为 .zip 文件（因为我没有指定文件名），它完美地工作。

服务器使用以下代码提供压缩数据。（$ad 是一个对象，getZippedHTML() 的作用与听起来完全一样：它恢复实际的二进制数据）我使用 UTF8 编码来避免 json_encode 不会打印未知二进制数据的问题。

```
$response['ad']=utf8_encode($ad->getZippedHTML();
print  json_encode($response); 
```

在 iOS 端，我尝试使用以下方法解码数据：

```
NSString *zipString=[serverResponse valueForKey:@"ad"];
NSData *zipData=[zipString dataUsingEncoding:NSUTF8StringEncoding];
//Test retrieved data
[zipData writeToFile:zipPath atomically:YES]; 
```

但是，写入磁盘的文件似乎不是有效的 zip 存档——解压缩实用程序无法使用它。我已经找到了这个问题，因为我没有使用 dataUsingEncoding 解码数据，而是重新编码。

如何获取 UTF8 编码的字符串并将其反转为 NSData？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T23:32:10.870

你可以试试：

```
- (BOOL)getBytes:(void *)buffer maxLength:(NSUInteger)maxBufferCount 
    usedLength:(NSUInteger *)usedBufferCount encoding:(NSStringEncoding)encoding 
    options:(NSStringEncodingConversionOptions)options range:(NSRange)range 
    remainingRange:(NSRangePointer)leftover 
```

将 C 指针传递给缓冲区。您可以使用以下方法获取给定编码的数据长度：

```
- (NSUInteger)lengthOfBytesUsingEncoding:(NSStringEncoding)enc 
```

然后，您可以使用以下命令创建一个 NSData 对象：

```
+ (id)dataWithBytes:(const void *)bytes length:(NSUInteger)length 
```

可能有更方便的方法来实现这一点，但我相信这些方法会让你到达你想去的地方。

# r - 如何在 R 中转换表格格式

> ID：10923470
> 
> 赞同：0
> 
> 时间：2012-06-06T22:57:45.730
> 
> 标签：r, tapply

具体来说，

我使用了以下设置：

> newdata <- tapply(mydata(#), list(mydata(X), mydata(Y)), sum)

我目前有一张表，目前列出如下：

> X= 州，Y= 州内县，#= 某事物的数字总数
> 
> *   __ Y1 Y2 Y3 Yn
> *   X1 ## ## ## ##
> *   X2 ## ## ## ##
> *   X3 ## ## ## ##
> *   Xn ## ## ## ##

我需要的是一张如下表：

> *   X1 Y1 ##
> *   X1 Y2 ##
> *   X1 Y3 ##
> *   X1 Yn ##
> *   X2 Y1 ##
> *   X2 Y2 ##
> *   X2 Y3 ##
> *   X2 Yn ##
> *   Xn Y1 ##
> *   Xn Y2 ##
> *   Xn Y3 ##
> *   Xn Yn ##

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T23:00:47.567

```
library(reshape2)
new_data <- melt(old_data, id.vars=1) 
```

查看`?melt`有关语法的更多详细信息。

例子：

```
> df <- data.frame(x=1:5, y1=rnorm(5), y2=rnorm(5))
> df
  x         y1         y2
1 1 -1.3417817 -1.1777317
2 2 -0.4014688  1.4653270
3 3  0.4050132  1.5547598
4 4  0.1622901 -1.2976084
5 5 -0.7207541 -0.1203277
> melt(df, id.vars=1)
   x variable      value
1  1       y1 -1.3417817
2  2       y1 -0.4014688
3  3       y1  0.4050132
4  4       y1  0.1622901
5  5       y1 -0.7207541
6  1       y2 -1.1777317
7  2       y2  1.4653270
8  3       y2  1.5547598
9  4       y2 -1.2976084
10 5       y2 -0.1203277 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T00:23:52.590

一些示例数据

```
mydata <- data.frame(num=rnorm(40),
                     gp1=rep(LETTERS[1:2],2),
                     gp2=rep(letters[1:2],each=2)) 
```

并适用`tapply`于它：

```
tmp <- tapply(mydata$num, list(mydata$gp1, mydata$gp2), sum) 
```

的结果`tapply`是一个矩阵，但您可以将其视为一个表格并使用`as.data.frame.table`它来转换它。这不依赖于任何额外的包。

```
as.data.frame.table(tmp) 
```

两种不同的数据结构如下所示：

```
> tmp
         a         b
A 8.381483  6.373657
B 2.379303 -1.189488
> as.data.frame.table(tmp)
  Var1 Var2      Freq
1    A    a  8.381483
2    B    a  2.379303
3    A    b  6.373657
4    B    b -1.189488 
```

# playframework-2.0 - 播放 2 个传递系统属性到测试用例

> ID：10923474
> 
> 赞同：2
> 
> 时间：2012-06-06T22:57:53.800
> 
> 标签：playframework-2.0

执行“播放测试”时，有没有办法传入要在测试用例中使用的系统属性？

```
String testDB = System.getProperties().getProperty("testDB");

Map<String, String> conf = new HashMap<String, String>();
if (testDB.equals("localdb")) {
    conf.put("db.default.driver", "org.postgresql.Driver");
    conf.put("db.default.url", "postgres://postgres:postgres@localhost/db");
} else if (testDB.equals("memorydb")) {
    conf.put("db.default.driver", "org.h2.Driver");
    conf.put("db.default.url", "jdbc:h2:mem:play-test");
} else {
    conf.put("db.default.driver", "org.postgresql.Driver");
    conf.put("db.default.url", "postgres://postgres:postgres@localhost/db");
}

running(fakeApplication(conf), new Runnable() {
    public void run() {
    int preRowCount = Info.find.findRowCount();
        Info info = new Info("key");
        info.save();
        assertThat(Info.find.findRowCount()).isEqualTo(preRowCount+1);
        info.delete();
    }
}); 
```

我尝试了“play test -DtestDB=localdb”，但在 testDB 中得到了空值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T18:24:56.397

### 1.2.4

尝试`play run -DtestDB=localdb --%test`

我发现在[http://www.playframework.org/documentation/1.2.4/ids](http://www.playframework.org/documentation/1.2.4/ids)的底部，它声明`play test`相当于`play run --%test`.

### 2.0

尝试`play -DtestDB=localdb test`

系统属性需要在命令之前。

# java - 使用 javassist 检测方法

> ID：10923475
> 
> 赞同：1
> 
> 时间：2012-06-06T22:58:06.663
> 
> 标签：java, javassist

我试图通过在每个检测方法中添加几行代码来将方法的名称写入文件。我正在使用 Javassist。

这是我的代码：

```
public static void addInstrumentation(CtClass ctClass, CtMethod ctMethod) throws NotFoundException, CannotCompileException {
    if (ctClass.getName().startsWith("com.application.bookstore.entities.test")) {
        String testName = ctClass.getName() + "." + ctMethod.getName();
        String fileToWrite = "C:/profiler/root.txt";
        ctMethod.insertBefore("{ FileWriter fw = new FileWriter(\"" + fileToWrite + "\", true); BufferedWriter out = new BufferedWriter(fw); out.write(\"" + testName + "\"); out.newLine(); out.close(); }");
    }
    else {
        String methodName = ctClass.getName() + "." + ctMethod.getName() + "()";
        String fileToRead = "C:/profiler/root.txt";
        ctMethod.insertBefore("{ FileReader fr = new FileReader(\"" + fileToRead + "\"); BufferedReader in = new BufferedReader(fr); String line; while((line = in.readLine()) != null); in.close();  FileWriter fw = new FileWriter(line, true); BufferedWriter out = new BufferedWriter(fw); out.write(\"" + methodName + "\"); out.newLine(); out.close(); }");
    }
}

/**
 * Get current classname and for each methods inside it, call the addInstrumentation method.
 */
@Override
public void onLoad(ClassPool pool, String classname) throws NotFoundException, CannotCompileException {
    if (classToImplement(classname))
    {
        pool.importPackage("java.io");
        CtClass ctClass = pool.get(classname);          

        for (CtMethod ctMethod : ctClass.getDeclaredMethods()) {
           if (!Modifier.isNative(ctMethod.getModifiers())) {
               addInstrumentation(ctClass, ctMethod);
           }
        }
    }
} 
```

我的问题在其他部分。我无法获得 line 的值，因此打开文件并写入它。

那么，您知道如何检索 line 的值吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:35:25.023

您可以使用 a`static String`并保留 的最后一个值`testName`。对于单个线程，您将获得相同的结果。对于多个线程，这是一个不同的故事，但我想您正在尝试获取测试的堆栈跟踪并且您按顺序运行它，所以您应该是安全的。例如：

假设你有一堂课

```
com.application.bookstore.entities.test.ClassWithTheStaticField 
```

其中有：

```
public static String lastTestMethod; 
```

你可以`addInstrumentation`这样修改：

```
public static void addInstrumentation(CtClass ctClass, CtMethod ctMethod) throws NotFoundException, CannotCompileException {
    if (ctClass.getName().startsWith("com.application.bookstore.entities.test")) {
        String testName = ctClass.getName() + "." + ctMethod.getName();
        String fileToWrite = "C:/profiler/root.txt";
        ctMethod.insertBefore("{ com.application.bookstore.entities.test.ClassWithTheStaticField.lastTestMethod = " + testName + "; FileWriter fw = new FileWriter(\"" + fileToWrite + "\", true); BufferedWriter out = new BufferedWriter(fw); out.write(\"" + testName + "\"); out.newLine(); out.close(); }");
    }
    else {
        String methodName = ctClass.getName() + "." + ctMethod.getName() + "()";
        String fileToRead = "C:/profiler/root.txt";
        ctMethod.insertBefore("{ FileWriter fw = new FileWriter(com.application.bookstore.entities.test.ClassWithTheStaticField.lastTestMethod, true); BufferedWriter out = new BufferedWriter(fw); out.write(\"" + methodName + "\"); out.newLine(); out.close(); }");
    }
} 
```

# macos - 如何为 Cocoa MAC OS 应用程序平移和缩放 NSImage？

> ID：10923477
> 
> 赞同：1
> 
> 时间：2012-06-06T22:58:09.453
> 
> 标签：macos, cocoa, nsimage, pan, zooming

正如标题所说，我希望能够用鼠标光标平移图像（NSImages），并以任何方式缩放图像。我怎么能做到这一点，因为我在网上找不到任何资源，请有人帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T23:58:14.580

你应该看看使用[苹果的 IKImageView](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Reference/IKImageView/IKImageView_Reference.html)。

> IKImageView 类提供了一种在视图中显示图像的有效方式，同时支持许多图像编辑操作，例如旋转、缩放和裁剪。它支持拖放，以便用户可以将图像拖到视图中。如果可能，图像渲染会使用硬件加速来实现最佳性能。IKImageView 类被实现为 NSView 的子类。与 NSImageView 类似，IKImageView 类用于显示单个图像。

IKImageView 有一些缺点，但根据我的经验，缩放效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T23:47:31.123

用于`NSAffineTransform`在绘制图像之前平移和缩放图形上下文的坐标系。这通常在您的`-drawRect:`方法范围内。

# wpf - WPF 将 ICommand 绑定到事件 (FrameworkElement.Unloaded)

> ID：10923481
> 
> 赞同：1
> 
> 时间：2012-06-06T22:58:45.313
> 
> 标签：wpf, mvvm, user-controls, frameworkelement, event-binding

我正在使用 MVVM 模式，因此我的视图模型对视图一无所知，并且视图通过 DataTemplates 显示。

当视图不再显示时，我想对其进行截图（使用实用程序类）。所以我想绑定到 FrameworkElement.Unloaded，当它命中时，截取用户控件的屏幕截图，以便在另一个控件中使用，以选择要转到的视图。

我读了这篇文章，它看起来好像附加属性可以工作（我在 UserControl 对象上使用它） [http://blog.functionalfun.net/2008/09/hooking-up-commands-to-events-在-wpf.html](http://blog.functionalfun.net/2008/09/hooking-up-commands-to-events-in-wpf.html)

我收到绑定只能在 DependencyObject 或 DependencyProperty 上设置的错误。我正确地遵循了他的指示。知道为什么这不起作用或如何在 MVVM 场景中绑定到它吗？

是否无法绑定到该特定事件或根 xaml 节点中的事件？

这是代码（除了上面链接中的 EventBehaviorFactory）

```
public static class FrameworkElementBehavior
{
    public static readonly DependencyProperty UnloadedCommandProperty = EventBehaviourFactory.CreateCommandExecutionEventBehaviour(FrameworkElement.UnloadedEvent, "UnloadedCommand", typeof(FrameworkElementBehavior));

    public static void SetUnloadedCommand(DependencyObject o, ICommand value)
    {
        o.SetValue(UnloadedCommandProperty, value);
    }

    public static ICommand GetUnloadedCommand(DependencyObject o)
    {
        return o.GetValue(UnloadedCommandProperty) as ICommand;
    }
}

    <UserControl x:Class="WTF.BuxComp.Prism.Modules.Win.OrderEntryPos.Views.CustomerView"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                 xmlns:local="clr-namespace:WTF.BuxComp.Prism.Modules.Win.OrderEntryPos.Helpers"
                 mc:Ignorable="d" 
                 d:DesignHeight="510" d:DesignWidth="716" 
local:FrameworkElementBehavior.UnloadedCommand="{Binding UnloadedCommand}"> 
```

确切的错误是

> 不能在“CustomerView”类型的“SetUnloadedCommand”属性上设置“绑定”。只能在 DependencyObject 的 DependencyProperty 上设置“绑定”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T23:32:59.897

我可以建议的最好的事情是映射到常规事件处理程序，然后从您的控件中调用 OutOfViewCommand.Execute 到您的 DataContext。您还需要在控件上映射 UserControl.DataContextChanged 并在本地保存数据上下文。

```
public partial class MainWindow : Window
{
    private object Data { get; set; }

    public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_DataContextChanged(object sender, DependencyPropertyChangedEventArgs e)
    {
        this.Data = e.NewValue;
    }

    private void Window_Unloaded(object sender, RoutedEventArgs e)
    {
        if(this.Data != null)
             this.Data.OutOfViewCommand.Execute(null);
    }
} 
```

XAML：

```
<Window x:Class="WpfApplication3.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" DataContextChanged="Window_DataContextChanged" FrameworkElement.Unloaded="Window_Unloaded">
<Grid>

</Grid> 
```

尽管这并不严格符合 MVVM，这是您在框架调用中经常遇到的折衷方案，但它仍然以可重用的方式与任何视图模型一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:02:34.640

为此，您可能需要正确命名您的附加财产......它声明的名称是`OutOfViewCommand`，但它应该是`UnloadedCommand`

```
 public static class FrameworkElementBehavior
 {
    public static readonly DependencyProperty UnloadedCommandProperty =
         EventBehaviourFactory.CreateCommandExecutionEventBehaviour
           (FrameworkElement.UnloadedEvent,
            "UnloadedCommand",
            typeof(FrameworkElementBehavior));

    public static void SetUnloadedCommand
      (DependencyObject o, ICommand value)
    {  
       o.SetValue(UnloadedCommandProperty, value);
    }

    public static ICommand GetUnloadedCommand
      (DependencyObject o)
    {
      return o.GetValue(UnloadedCommandProperty) as ICommand;
    }
} 
```

# c# - 放入静态构造函数时不会使用 UnityContainer.RegisterType

> ID：10923483
> 
> 赞同：2
> 
> 时间：2012-06-06T22:59:10.440
> 
> 标签：c#, .net, inversion-of-control, unity-container

这是一个示例控制台应用程序（在添加 Unity NugGet 包后它会运行良好），它**似乎在 Unity 中显示了一个错误**：

```
using System;
using Microsoft.Practices.Unity;

class GC { public static UnityContainer Container = new UnityContainer();}

class Program
{
    static void Main(string[] args)
    {
        GC.Container.RegisterType<MyView>();
        var myView = GC.Container.Resolve<MyView>();
        Console.ReadLine();
    }
}

public class MyClassDesign: MyClass{}
public class MyClass: VMBase<MyClass, MyClassDesign>{}
public abstract class VMBase<TViewModel, TDesignVM> where TDesignVM:TViewModel
{
    static VMBase()
    {
        if (!GC.Container.IsRegistered(typeof(TViewModel)))
            GC.Container.RegisterType(typeof (TViewModel), typeof(TDesignVM));
    }
}

public class MyView
{
    public MyView(MyClass myClass)
    {
        Console.WriteLine("Bad: "+myClass.GetType().ToString());
        Console.WriteLine("Good: "+GC.Container.Resolve<MyClass>().GetType());
    }
} 
```

输出是：

> 坏：MyClass
> 好：MyClassDesign

解析的类型是`MyClass`. 但它应该是`MyClassDesign`。（静态构造函数在类中解析 MyClass 之前运行`MyView`。）

**如何让 Unity 允许我在静态构造函数中设置映射？**

注意：当我使用文件（而不是代码）更改此设置时，UnityContainer 一切正常。但我宁愿不依赖外部文件。（我正在制作一个可重用的模板，我不想在其中包含太多依赖项。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:25:09.067

这并不是 Unity 的真正错误。问题是静态ctor在请求实例之前不会运行（此时unity仍然不知道`MyClassDesign`）。这意味着 Unity 已经开始创建一个实例`MyClass`来满足请求。任何后续调用都`GC.Container.Resolve<MyView>();`将产生您期望的输出。正如 Sebastian Weber 所建议的，将所有设置代码放在一个完全独立的位置（这样您的类不依赖于特定的 DI 容器）是最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:04:58.510

为什么要将注册逻辑放在视图模型中？这会将您的应用程序代码耦合到容器，这绝不是一个好主意。看看[Composition 根](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)的概念。

DI 容器的所有设置代码都应该放在那里。

# ruby - HW 不可能？：“在 ruby 中创建一个石头剪刀布程序而不使用条件”

> ID：10923486
> 
> 赞同：9
> 
> 时间：2012-06-06T22:59:32.453
> 
> 标签：ruby

我在一个介绍性的软件开发课程上，我的作业是创建一个石头剪刀布程序，它接受两个参数（石头、纸）等，并返回获胜的 arg。

现在如果我可以使用条件，我会快速解决这个问题，但是作业说我们需要知道的一切都在 ruby​​ 教科书的前三章中，而这些章节不包括条件！没有它们是否有可能创建这个程序？还是他只是希望我们足智多谋并使用条件句？不过，这是一个非常简单的条件分配......我想我可能会在这里遗漏一些东西。

编辑：我正在考虑那个 chmod 数值系统，并认为通过那个加法系统可能有一个解决方案......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T07:59:50.117

这是一个只使用哈希的：

```
RULES = {
  :rock     => {:rock => :draw, :paper => :paper, :scissors => :rock},
  :paper    => {:rock => :paper, :paper => :draw, :scissors => :scissors},
  :scissors => {:rock => :rock, :paper => :scissors, :scissors => :draw}
}

def play(p1, p2)
  RULES[p1][p2]
end

puts play(:rock, :paper)        # :paper
puts play(:scissors, :rock)     # :rock
puts play(:scissors, :scissors) # :draw 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-06T23:14:00.817

```
def winner(p1, p2)
  wins = {rock: :scissors, scissors: :paper, paper: :rock}
  {true => p1, false => p2}[wins[p1] == p2]
end 
```

> 获胜者(:rock, :rock) # => :rock d'oh! – 托克兰

根据@sarnold，将此作为学生的练习:)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T23:18:06.203

我非常怀疑您是否见过数组/集合的交叉点，所以只是为了好玩：

```
def who_wins(p1, p2)
  win_moves = {"rock" => "paper", "paper" => "scissors", "scissors" => "rock"}
  ([p1, p2] & win_moves.values_at(p1, p2)).first
end

who_wins("rock", "paper") # "paper"
who_wins("scissors", "rock") # "rock"
who_wins("scissors", "scissors") # nil 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-06T23:12:06.607

一个简单的哈希来拯救：

```
def tell_me(a1, a2)
  input = [a1 , a2].sort.join('_').to_sym
  rules = { :paper_rock => "paper", :rock_scissor => "rock", :paper_scissor => "scissor"}
  rules[input]
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T00:42:43.953

我只是认为最简单的解决方案必须是这样的：

```
@results = {
  'rock/paper' => 'paper',
  'rock/scissors' => 'rock',
  'paper/scissors' => 'scissors',
  'paper/rock' => 'paper',
  'scissors/paper' => 'scissors',
  'scissors/rock' => 'rock'
}

def winner p1, p2
  @results["#{p1}/#{p2}"]
end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-21T02:40:43.447

```
WINNAHS = [[:rock, :scissors], [:scissors, :paper], [:paper, :rock]]

def winner(p1, p2)
  (WINNAHS.include?([p1,p2]) && p1) || (WINNAHS.include?([p2,p1]) && p2) || :tie
end

winner(:rock, :paper)        #=> :paper 
winner(:scissors, :paper)    #=> :scissors 
winner(:scissors, :scissors) #=> :tie 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-06T23:10:38.630

我对 ruby​​ 了解不多，但我很久以前通过使用每个值（例如，R = 1、P = 2、S=3）解决了这样的问题。

[实际上，我只是在考虑到这一点后用谷歌搜索，有人使用 array](http://answers.yahoo.com/question/index?qid=20110125200007AAx5P0z)解决了 python中的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-16T14:57:14.383

pguardiario 的上述解决方案可以根据以下内容进行修改，以显示 (1) 哪个玩家获胜（而不是选择获胜的对象）和 (2) 平局时的结果：

```
def rps(p1, p2)
   @results = {
   'rock/paper' => "Player 2 won!",
   'rock/scissors' => "Player 1 won!",
   'paper/scissors' => "Player 2 won!",
   'paper/rock' => "Player 1 won!",
   'scissors/paper' => "Player 1 won!",
   'scissors/rock' => "Player 2 won!",
   'rock/rock' => "Draw!",
   'scissors/scissors' => "Draw!",
   'paper/paper' => "Draw!"
   }

   @results["#{p1}/#{p2}"]
end

rps("rock", "rock")     => "Draw!"
rps("rock", "scissors") => "Player 1 won!"
rps("rock", "paper")    => "Player 2 won!" 
```

...ETC

# struct - Vala 中的字节对齐

> ID：10923488
> 
> 赞同：2
> 
> 时间：2012-06-06T22:59:38.743
> 
> 标签：struct, alignment, byte, vala, pack

我在 Vala 向结构值添加填充时遇到问题。是否有等效于 C 的 #pragma pack(1) 或 C# 的 [StructLayout(LayoutKind.Sequential, Pack=1)] 或可能的解决方法？提前致谢。

〜迈克尔K。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T01:24:40.610

不是原生的。`#pragma`您可以使用适当的或在单独的 C 头文件中定义打包结构，`__attribute__`然后为其创建 VAPI 绑定。

可能会滥用 Vala 的代码生成来执行此操作（例如，设置`[CCode(cname)]]`，但我建议不要这样做。

# iphone - 从 iPhone 应用程序进行网页抓取的最佳方法是什么？

> ID：10923496
> 
> 赞同：1
> 
> 时间：2012-06-06T23:00:29.987
> 
> 标签：iphone, mobile, web-scraping

我正在编写一个 iphone 应用程序，我需要抓取大约 50 多个网站以获取数据。
有谁知道我可以使用的任何好的客户端解决方案？我不想为此建立一个后端。

任何指针？

谢谢罗汉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T23:08:01.307

看起来您的主要关注点是移动应用程序，并且您希望将抓取活动卸载到外部服务。

使用 Bobik ( [http://usebobik.com](http://usebobik.com) ) 等服务，该服务提供用于从网站上抓取数据的 API。您甚至可以免费测试您的查询！

API 相当广泛，请查看[http://usebobik.com/api/docs](http://usebobik.com/api/docs)了解更多信息。甚至还有可用的 SDK！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T20:43:03.710

我认为构建一个小型后端 Web 应用程序从您的手机中获取查询并进行抓取是很自然的。这非常容易，不是吗？刮擦可以通过 curl 或其他方式完成。如今，Web 服务器从头开始大约需要 15 行代码。

# java - JavaCompiler API 强制编译时出错？

> ID：10923499
> 
> 赞同：0
> 
> 时间：2012-06-06T23:00:50.067
> 
> 标签：java, class, compiler-construction, compilation

我目前正在制作一个工具，它将根据用户输入输出 Java 类文件以供使用。我输出了一组 .java 文件，其中一些引用了当前上下文中不存在的类和变量。因此，当我编译时，输出文件会记录这些错误并且不会编译该类。我的问题是：有没有办法使用 JavaCompiler 按原样编译类文件？

这是编译代码：

```
public static void compileAll(File file) throws IOException{
    String fileToCompile = "C:/test.java";
    JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
    FileOutputStream errorStream = new FileOutputStream("Errors.txt");
    int compilationResult = compiler.run(null, null, errorStream, "-verbose", fileToCompile );
    if(compilationResult == 0){
        System.out.println("Compilation is successful");
    }else{
        System.out.println("Compilation Failed");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-21T01:24:41.600

你想要的是不可能的，因为 Java 编译器需要在字节码生成时知道类型以及变量和方法的名称。因为 Java 字节码是类型化的，并且 JVM 不知道一些 Java 源代码级别的转换（例如，拆箱转换纯粹是 Java 编译器约定），所以编译器无法摆脱发出“加载字段`f`”或“调用方法”的字节码`foo`"; 编译器必须说“加载`f`类型的字段`double`”或“调用`f`类型的方法`int(double, Object)`”。

考虑读取对象的未知字段并将其分配给`double`局部变量：

```
double d = o.f; 
```

如果类型`f`是`double`，编译器将简单地使用 a`getfield`后跟 a`dstore`进入局部变量 slot for `d`。如果`f`是 类型，编译器将在和之间`int`发出一条`i2d`指令将 转换为。如果是 type ，编译器将在存储加载值之前发出调用以将加载的值拆箱。如果是 type ，则赋值在没有强制转换的 Java 中是非法的（如果它是合法的，这将是一条指令）。如果 的 类没有名为 的字段，则该作业没有可能的翻译。`getfield``dstore``int``double``f``Double``doubleValue()``f``Object``checkcast``x``x`

调用具有未知签名的方法时也需要考虑类似的考虑，这可能需要对其每个参数进行转换和/或为可变参数调用创建数组。此外，在 JVM 级别，允许对返回类型进行重载，因此即使只有一个参数类型列表，也必须指定返回类型。

您能做的最好的事情是提供未知类的虚拟声明，以便编译器知道该怎么做，正如 paulsm4 的回答所建议的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T23:04:59.023

> 问：有没有办法使用 JavaCompiler 来编译类文件？

是的：根据需要创建虚拟方法和/或虚拟类，以便您可以编译:)

# heroku - Heroku Dyno... 在没有 Worker 的情况下运行计划任务

> ID：10923500
> 
> 赞同：5
> 
> 时间：2012-06-06T23:00:53.603
> 
> 标签：heroku, scheduler

我最近在我的 Heroku 应用程序中添加了“Heroku Scheduler”插件......

我目前有一个免费的 heroku 帐户，并拥有标准的 one web dyno....

现在我已经设置了一个预定的评论来运行调度程序......如果我一直有 0 Worker dynos 会发生什么......

我会被收费吗？我的任务不运行吗？或者它会退回到网络测功机并在那个上排队？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T10:24:00.397

当您告诉它时，您使用调度程序的计划任务将运行。它类似于工作进程，但是它运行然后在完成后停止运行，而不是不断地被计费。您需要为其运行的时间付费，但仅限于那个时间。如果您的任务是运行 1 分钟的短任务，按小时计算，那么您将按每天 24 分钟计费。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-08T12:21:19.580

正如对我之前评论的更新一样，最近的测功机和heroku上的计费更改消除了上述所有内容。你现在可以拥有一个免费的 web+workder dyno，只要它每天至少睡 6 个小时。还有其他一些变化使得运行一个小型爱好类型的项目变得更便宜，甚至每天 24 小时。

[https://devcenter.heroku.com/articles/usage-and-billing](https://devcenter.heroku.com/articles/usage-and-billing)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T19:58:18.737

正如克雷格所提到的，调度程序插件将在一段时间内运行任务。它将使用您的网络测功机中的时间，并且不会产生新的测功机来完成任务。结果，您的网络流量将在此期间排队（这是我目前对使用 heroku 调度程序插件的理解）。

# php - strtotime 转换

> ID：10923502
> 
> 赞同：0
> 
> 时间：2012-06-06T23:01:32.187
> 
> 标签：php

如何将来自数据库的这个 str 格式化为更易读的东西。

2012-04-06T10:55:58-07:00

我想要我的格式。我试过了

```
$date = date('m-y',strtotime('2012-04-06T10:55:58-07:00')); 
```

我难住了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:25:37.733

如果时区没有意义，您可以像这样将其删除：

```
$dbDateString = '2012-04-26T10:55:58-07:00';
$dateString = substr($dbDateString, 0, 10);
$date = date('m-y',strtotime($dateString); 
```

或者你可以走便宜的路线：

```
$dbDateString = '2012-04-26T10:55:58-07:00';
$year = substr($dbDateString, 0, 4);
$month = substr($dbDateString, 5, 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T23:14:43.580

查看：[如何在 PHP 中将 ISO8601 日期转换为另一种格式？](https://stackoverflow.com/questions/6458585/using-php-how-convert-an-iso8601-date-to-a-different-format)

他们提供的解决方案是：

```
$date = '2011-09-02T18:00:00';

$time = strtotime($date);

$fixed = date('l, F jS Y \at g:ia', $time); // 'a' is escaped as it's a format char. 
```

# php - 当服务器关闭或变慢时，phpseclib NET_SSH2 挂起

> ID：10923506
> 
> 赞同：1
> 
> 时间：2012-06-06T23:01:41.990
> 
> 标签：php, ssh, timeout, freeze, phpseclib

我正在使用[phpseclib](http://phpseclib.sourceforge.net/)库来执行 SSH。每当服务器关闭或非常慢时，脚本就会卡在这一点上。

```
<?php
$ssh = new Net_SSH2($bind_ip, $port, 10);
?> 
```

当我使用 Putty 时，它不会提示我登录..

如何超时或强制继续？

有什么建议么？

谢谢！！

# c# - 从 HashSet 中获取一个相等的对象 在 O(1)

> ID：10923509
> 
> 赞同：7
> 
> 时间：2012-06-06T23:02:03.893
> 
> 标签：c#, set

A`HashSet<T>`可以在 O(1) 中确定它是否包含某个项目。如果我在我的自定义类上覆盖`Equals()`和`GetHashCode()`，我可以拥有一个对象 A 和另一个对象 A'，它们的身份*不*`Equals()`相等，但返回`true`并`GetHashCode()`返回相同的哈希码。

现在，假设 A 在散列集中，我想在给定 A' 的 O(1) 中检索 A（从散列集的角度来看，它等于 A）。

```
var a = new MyClass("A");
var a_prime = new MyClass("A");
Debug.Assert(a.Equals(a_prime));
Debug.Assert(a.GetHashCode() == a_prime.GetHashCode());

var set = new HashSet<MyClass>();
set.Add(a);
Debug.Assert(set.Contains(a_prime));

// This:    
var retrieved_a = set.Get(a_prime); 
```

这该怎么做？

（请注意，[这](https://stackoverflow.com/q/1494812/146622)不是我要找的答案，而且[根本](https://stackoverflow.com/q/9917662/146622)没有答案。）

* * *

一些背景信息：我想使用该集合来*实习*我自己的对象，就像 C# 实习生字符串一样：相等的对象只需要一个实例。这样，我可以将元数据附加到这样的对象，并确保在没有该元数据的任何地方都没有其他相同的实例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T23:07:17.103

没有任何方法`HashSet`可以满足您的要求。

您可以使用 a`Dictionary`代替：

```
var dict = new Dictionary<MyClass, MyClass>();
dict[a] = a;
Debug.Assert(dict.ContainsKey(a_prime));
var retrieved_a = dict[a_prime]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T22:22:12.757

如果我没记错的话，`Dictionary`没有基本集合操作的恒定时间实现，而`HashSet`有。这是一种使用恒定时间相等查找来实现它的方法，而不会增加 HashSet 的其他复杂性。如果您需要抓取许多随机元素，则使用此方法至关重要。我在下面写的是 Java 语法，因为我不懂 C#，但这个想法是与语言无关的。

```
class MySet<A> {
     ArrayList<A> contents = new ArrayList();
     HashMap<A,Integer> indices = new HashMap<A,Integer>();

     //selects equal element in constant time
     A equalElement(A input) {
         return contents.get(indices.get(input));
     }

     //adds new element in constant time
     void add(A a) {
         indices.put(a,contents.size());
         contents.add(a);
     }

     //removes element in constant time
     void remove(A a) {
         int index = indices.get(a);
         contents.set(index,contents.get(contents.size()-1));
         contents.remove(contents.size()-1);
         indices.set(contents.get(contents.size()-1),index);
         indices.remove(a);
     }

     //all other operations (contains(), ...) are those from indices.keySet()
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-09T14:56:09.787

使用`HashSet.TryGetValue`. （从[.NET Framework 4.7.2](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.hashset-1.trygetvalue?view=netframework-4.7.2)开始可用。）

# android - 为什么drawLine偏移1个像素？

> ID：10923510
> 
> 赞同：4
> 
> 时间：2012-06-06T23:02:17.143
> 
> 标签：android, canvas, bitmap, paint

对于 Android 专家来说，这可能很容易。我正在尝试通过画布绘制位图。我想要精确的颜色，没有抗锯齿，并且线条位于位图中的精确绝对坐标处。有时线条在正确的位置，有时它们偏移 1 个像素。我觉得这与缩放有关。但我不确定。这是代码：

```
 Paint mPaint = new Paint();
    mPaint.setColor(Paint.WHITE);
    mPaint.setStrokeWidth(0);
    mPaint.setAntiAlias(false);
    mPaint.setDither(false);
    mPaint.setStyle(Paint.Style.STROKE);

    drawingContext.mycanvas.drawLine(20, 0, 10, 10, mPaint); 
```

这实际上画了一条从 (19,0) 到 (10,9) 的线。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:55:16.893

我会回答的。我只好放弃这个，写了一个 Bresenham 算法，一个一个地设置像素。这适用于我正在做的事情。我怀疑在从左到右、从下到上绘制线条时存在 drawLine 错误。

# ms-word - 在 J# 错误 VJS1252 中使用 Office 互操作打开 Word 文档

> ID：10923512
> 
> 赞同：0
> 
> 时间：2012-06-06T23:02:41.660
> 
> 标签：ms-word, interop, ms-office, j#

我正在尝试使用 Office 互操作从 J# 中的 Word 文档中打开和读取文本。

第一个参数的智能提示是`/** @ref */Object fileName`. 如果我将一个带有 Object 类型转换的 String 传递给它，我会得到 error `VJS1252: Actual parameter for byref 'Object' must be assignable`。我不确定这意味着什么，我在网上找不到任何有用的关于这个错误的参考资料。

前任：

```
String fileName = "c:\\document.doc";

Microsoft.Office.Interop.Word._Document document = word.getDocuments().Open((object)fileName, ... 
```

抛出错误。我已经用 J# 编写了程序的其余部分，其他一切，包括 Excel 互操作，都进行得很顺利；但我完全被 Word 的这个问题所困扰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:55:22.397

Ahah, figured it out. for anyone else that has this problem, you can't typecast inside the function call. So I had to do

```
Object file = (object)fileName;
Microsoft.Office.Interop.Word._Document document = word.getDocuments().Open(file, ... 
```

# css-float - 元素的盒子（盒子模型）在 Chrome 中相互重叠？

> ID：10923516
> 
> 赞同：0
> 
> 时间：2012-06-06T23:03:49.810
> 
> 标签：css-float, cross-browser, css

我在 Chrome 与 FF 之间存在跨浏览器兼容性问题。

这是从 Chrome 检查的网络，您会看到 DIV #content 的框与 H3 的框重叠。

![](../Images/56a5c2a9dd01f240d7e0bc1ab7a82bf0.png)

在 FF 中，#content DIV 不重叠：

![](../Images/fa0cab756f5a496ebc23d97c0c4c463c.png)

问题是重叠的差异导致医生头部后面的背景（浅蓝色帆布纹理）相对定位 DIV 关闭。在 Chrome 中定位良好，在 FF 中，绿色的“查看所有按钮”超出了背景。

网站链接： http: [//terminalcitymarketing.com/drafts/highgate/](http://terminalcitymarketing.com/drafts/highgate/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T23:11:49.023

在css的第72行，我拿出了

```
 p{
 margin-bottom:12px;
 } 
```

它修复了绿色查看全部按钮的位置。然后，您必须将边距更具体地重新应用于您想要它们的元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T23:15:39.323

我有一种感觉，如果您修复一些[Validation Errors](http://validator.nu/?doc=http%3A%2F%2Fterminalcitymarketing.com%2Fdrafts%2Fhighgate%2F)，问题可能会自行解决。在列出的那些中，我注意到的直接危险信号是你有一堆这些错误：

> 错误：重复 ID

检查`#wrapper`,`#mainBox`等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T23:07:10.630

在我看来，它们似乎都在同一个地方，只是 chrome 在检查器中向您显示的区域与 FF 不同。我认为这根本不是问题。

# php - php。数组值函数。如何从旧键映射到新键？

> ID：10923517
> 
> 赞同：-3
> 
> 时间：2012-06-06T23:03:50.427
> 
> 标签：php, arrays

PHP中有函数[array_values](http://php.net/manual/en/function.array-values.php)这样

```
$array2 = array_values($array1); 
```

`$array2`具有相同的值，`$array1`但键是 from `0`to `sizeof($array1) - 1`。是否可以从旧键映射到新键？
编辑。我将举例说明：

```
$array1 = array( 'a' => 'val1', 'b' => 'val1');
$array2 = array_values( $array1 ); 
```

所以现在 array2 有下一个值

```
$array2[0] = 'val1'
$array2[1] = 'val2' 
```

如何得到 array3 这样：

```
$array3['a'] = 0
$array3['b'] = 1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T23:10:42.350

要生成键映射，您需要首先将键放入常规数组，然后翻转键和值：

```
$array1_keymap = array_flip(array_keys($array1)); 
```

例如：

```
$array1 = array(
    'a' => 123,
    'b' => 567,
);

$array1_values = array_values($array1);
$array1_keymap = array_flip(array_keys($array1)); 
```

的价值`$array1_values`：

```
array(
    0 => 123,
    1 => 567,
); 
```

的价值`$array1_keymap`：

```
array(
    'a' => 0,
    'b' => 1,
); 
```

所以：

```
$array1['a'] == $array1_values[$array1_keymap['a']];
$array1['b'] == $array1_values[$array1_keymap['b']]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T23:09:37.573

是的，很简单

```
$array2 = $array1; 
```

在这种情况下，您将获得值和键，就像它们在原始数组中一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T23:09:11.290

```
$keyMapping = array_combine(array_keys($array1), array_keys($array2)); 
```

这是的键`$array1`并将它们映射到这样的`$array2`键

```
<?php
$array1 = array(
    'a' => '1',
    'b' => '2',
);

$array2 = array_values($array1);

print_r(array_combine(array_keys($array1), array_keys($array2)));

Array
(
    [a] => 0
    [b] => 1
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T23:09:01.700

您可以使用：

```
$array3 = array_keys($array1); 
```

现在`$array3[$n]`是`$array2[$n]`任何值的关键`0 <= $n < count($array1)`。您可以使用它来确定哪些键在哪些位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T23:30:33.167

如果您想保持 array1 的相同值但将键更改为索引号，请尝试以下操作：

```
$array2 = array();
foreach ($array1 as $key => $value){
$array2[] = $value;
// or array_push($array2, $value);
}
var_dump($array2); 
```

# sql - 使用约束将列从一个表插入到另一个表

> ID：10923518
> 
> 赞同：3
> 
> 时间：2012-06-06T23:03:57.087
> 
> 标签：sql, postgresql

我有 2 个表：*legend*和*temp*。temp 有 ID 和 account ID，legend 有adven_id、account_id 等列。temp 中的 ID 和 legend 中的advent_id 相似。account_id 列是空的，我想将相关的 account_id 从 temp 导入到图例。我正在使用 PostgreSQL。

我正在尝试以下查询，但它没有按预期工作。正在创建新行，并且将 account_id 添加到新行中，而不是添加到相应的advent_id。

```
insert into legend(account_id)
select temp.account_id
from legend, temp
where legend.advent_id=temp.id; 
```

它将account_id插入错误的位置，而不是相应的advent_id。

我正在使用以下查询进行检查：

```
select advent_id, account_id from legend where account_id is not null; 
```

我的插入查询中到底有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T23:20:37.443

如果您尝试修改现有行，而不是添加行，那么您需要一个`UPDATE`查询，而不是一个`INSERT`查询。

可以使用连接表作为`UPDATE`;的目标。在你的例子中：

```
UPDATE legend
JOIN temp
SET legend.account_id = temp.account_id
WHERE(temp.id = legend.advent_id); 
```

# c# - 如何避免 RichTextBox 向右增长

> ID：10923527
> 
> 赞同：0
> 
> 时间：2012-06-06T23:04:57.127
> 
> 标签：c#, wpf, richtextbox

我有一个让我发疯的问题，我正在 WPF 中处理一个项目，我正在创建一个视图。

我正在设计一个包含“更多选项”部分的窗口，我什至可以让这个部分显示或隐藏。本节包含一个 tabControl，其中包含一个 TextBox，如下所示：

```
<TabControl Margin="10,156,12,39" Name="moreTabControl" Grid.Column="1">
    <TabItem >
        <Grid>
            <TextBox Margin="6,6,8,28" Name="myTextBox"  />
        </Grid>
    </TabItem>
</TabControl> 
```

因此，在我所做的显示或隐藏“更多部分”的代码中，如下所示：

```
public partial class FilterView : System.Windows.Window
{
    .....
    // Window's height when "more" option are showed
    private const int ShowMoreHeight = 386;

    /// Window's height when "more" option are hidden
    private const int ShowLessHeight = 186;

    private bool showMore = false;

    private void moreButton_Click(object sender, RoutedEventArgs e)
    {
        showMore = !showMore;
        ResizeWindow();
    }

     private void ResizeWindow()
    {
        if (showMore)
        {
            moreTabControl.Visibility = System.Windows.Visibility.Visible;
            moreButton.Content = "<< Less";
            MinHeight = ShowMoreHeight;
            Height = ShowMoreHeight;
        }
        else
        {
            moreTabControl.Visibility = System.Windows.Visibility.Collapsed;
            moreButton.Content = "More >>";
            MinHeight = ShowLessHeight;
            Height = ShowLessHeight;
        }
    }
......
.....
} 
```

一切都很顺利，直到我需要将 TextBox 更改为 RichTextBox :(，当我运行程序并按下“MoreButton”时，“more”部分按预期显示，但容器窗口向右增长了很多！

我只改变了这个：`<TextBox Margin="6,6,8,28" Name="myTextBox" />`为此：`<RichTextBox Margin="6,6,8,28" Name="myRichTextBox" />`

有谁知道发生了什么？？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:38:49.163

我已经解决了我的问题：

事实证明，在我的 XAML 代码中，我的 Window 有一个名为`SizeToContent`set to的属性`"WidthAndHeight"`，因此我将其更改为并手动`"Manual"`为 and 建立了一个值。`Width``Height`

希望这可以帮助其他遇到类似情况的人。

# perl - 从 Perl 中获取子进程

> ID：10923530
> 
> 赞同：11
> 
> 时间：2012-06-06T23:05:11.927
> 
> 标签：perl, fork, parent-child, waitpid

我有一个产生一组孩子的脚本。父母必须等待每个孩子完成。

我的脚本执行类似于以下 perl 脚本：

```
#! /usr/bin/perl
use strict;
use warnings;

print "I am the only process.\n";

my @children_pids;

for my $count (1..10){
        my $child_pid = fork();
        if ($child_pid) {  # If I have a child PID, then I must be the parent
                push @children_pids, $child_pid;
        }
        else { # I am the child
                my $wait_time = int(rand(30));
                sleep $wait_time;
                my $localtime = localtime;
                print "Child: Some child exited at $localtime\n";
                exit 0; # Exit the child
        }
}

foreach my $child (@children_pids) {
        print "Parent: Waiting on $child\n";
        waitpid($child, 0); 
        my $localtime = localtime;
        print "Parent: Child $child was reaped - $localtime.\n";
}

print "All done.\n"; 
```

与我上面提供的代码类似，每个孩子可能需要不同的时间来完成。

问题是当我尝试通过遍历子 PID 来获取子时，在最后一个`foreach`块中，父级按照子级的创建顺序等待子级。

显然，孩子们并没有按照他们产生的顺序完成，所以我留下了一堆僵尸进程，这些孩子碰巧提前完成了。

在我的实际代码中，这些孩子可能会提前几天完成，并且漂浮的僵尸进程的数量可能会增长到数百个。

有没有更好的方法让我收获一组孩子？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-06T23:18:53.293

如果您的父进程不需要知道其子进程的完成状态，那么您可以设置

```
$SIG{CHLD} = 'IGNORE'; 
```

这将在所有孩子完成后自动收割。

如果*确实*需要通知孩子完成，则需要将信号处理程序设置为获取所有可能的进程

```
use POSIX ();

$SIG{CHLD} = sub {
  while () {
    my $child = waitpid -1, POSIX::WNOHANG;
    last if $child <= 0;
    my $localtime = localtime;
    print "Parent: Child $child was reaped - $localtime.\n";
  }
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-06T23:16:46.717

对 pid 使用“-1”，或使用 wait() 函数以便等待任何子进程。获得的 pid 被返回，因此您可以在必要时根据您的列表检查它。如果这是不可接受的，则使用 POSIX::WNOHANG() 作为第二个参数定期等待列表中的每个 pid。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-07T04:52:07.207

[Borodin 的回答](https://stackoverflow.com/a/10923649/132382)对于孩子们终止时的异步收割非常好。

如果，正如您的问题和代码向我建议的那样，您正在寻找所有未完成子节点的*同步**（*阻塞）收获，则父节点可以简单地执行以下操作：

 *```
use feature qw(say);

...

# Block until all children are finished
while (1) {
  my $child = waitpid(-1, 0);
  last if $child == -1;       # No more outstanding children

  say "Parent: Child $child was reaped - ", scalar localtime, ".";
}

say "All done." 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-09T09:52:54.373

永远不要使用这样的循环来等待孩子：

```
while (1) {
    my $child = waitpid(-1, POSIX::WNOHANG);
    last if $child == -1;
    print "Parent: Child $child was reaped\n";
} 
```

父进程在等待子进程死亡时会消耗 100% 的 cpu——尤其是当它们可以运行很长时间时。至少添加一个睡眠（坏主意 - 当他们快速死去时，父母正在等待）。

总是对 TERM/INT/ppid 使用阻塞等待 + 计数，以获得更好的效果！：

```
my $loop = 1;
$SIG{CHLD} = 'DEFAULT';  # turn off auto reaper
$SIG{INT} = $SIG{TERM} = sub {$loop = 0; kill -15 => @children_pids};
while ($loop && getppid() != 1) {
    my $child = waitpid(-1, 0);
    last if $child == -1;
    print "Parent: Child $child was reaped\n";
} 
```

当父进程还必须执行其他操作（例如 getppid() 调用 ;-) 时，这种阻塞等待当然是不可能的。为此，您可以使用 socketpair() 并将其放入执行阻塞调用的 select() 中。甚至循环检查也可以从中受益。*

# c++ - 为什么类中方法的顺序在 C++ 中不重要？

> ID：10923533
> 
> 赞同：3
> 
> 时间：2012-06-06T23:05:28.007
> 
> 标签：c++, compiler-construction

我用 C++ 编程已经有一段时间了，直到今天我才想到这个。

考虑以下代码：

```
struct foo
{
  // compiles fine
  void bar()
  {
    a = 1;
    my_int_type b;
    b = 5;
  }

  // Just a declaration, this fails to compile, which leads me to assume that
  // even though the bar() method is declared and defined all at once, the
  // compiler looks/checks-syntax-of the class interface first, and then compiles
  // the respective definitions...?
  void bar2(my_int_type); // COMPILE ERROR

  my_int_type       b; // COMPILE ERROR because it comes before the typedef declaration
  typedef int       my_int_type;
  my_int_type       a;

  void bar3(my_int_type); // compiles fine
};

int main()
{
  foo a;
  a.bar();
  return 0;
} 
```

我对错误发生原因的理解*（见`bar2()`上面的评论）*是否正确/不正确？无论哪种方式，我都希望能简单地概述一下单程 C++ 编译器如何编译上面给出的代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T23:09:29.603

在大多数情况下，C++ 文件是从上到下解析的，因此必须在使用实体之前声明它们。

在您的班级中，`bar2`并且`b`无效，因为它们都使用`my_int_type`尚未声明的 。

“从上到下”解析规则的一个例外是在其类的定义中定义的成员函数。当解析这样的成员函数定义时，它被解析为好像它出现在类的定义之后。这就是您使用`my_int_type`in`bar`有效的原因。

实际上，这：

```
struct foo
{
    void bar()
    {
        my_int_type b;
    }

    typedef int my_int_type;
}; 
```

是相同的：

```
struct foo
{
    void bar();

    typedef int my_int_type;
};

inline void foo::bar()
{
    my_int_type b;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T23:08:57.983

编译器刚开始在一个块中下降。任何不熟悉的符号都将被视为未定义的新符号。这是函数定义或头文件背后的方案。

您可以假设编译器首先创建了一个定义列表，因此 bar() 方法应该被正确编译，因为之前已经提供了定义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T23:26:05.300

这与能见度有很大关系。我认为您的困惑可能来自假设一次通过。认为类解析分两个阶段完成。

1.  解析类定义。
2.  解析方法实现。

这样做的好处是我们可以从类成员函数中看到整个类。

# windows - 当目标仅包含 NTFS 硬链接时如何同步源文件夹和目标文件夹

> ID：10923534
> 
> 赞同：1
> 
> 时间：2012-06-06T23:05:32.567
> 
> 标签：windows, ntfs, data-synchronization

我们有源“S”文件夹、目标“D”和原始“O”。

D 是对所有文件使用 NTFS 硬链接的 O 的副本。

现在我们需要同步 S 和 D 并且只将更改的文件从 S 复制到 D。

Robocopy.exe 会这样做，但是它会覆盖文件，因此文件在 D 和 O 中都发生了更改，但无论如何我们希望 O 中的文件保持不变。

要正确更新硬链接副本，需要删除 D 中的文件（以断开链接），然后创建具有相同名称的文件而不是覆盖。

robocopy 支持吗？也许有一个特殊的参数，或者是否有任何其他免费实用程序（最好是开源）知道如何正确更新文件，如果它是一个硬链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T00:59:48.913

您可以尝试使用 rsync - 有关详细信息，请参阅此帖子，包括现成的备份脚本：

[如何在 Windows 上使用 VSS 创建类似 rsync 的硬链接备份](http://blog.jay2k1.com/2011/08/13/how-to-create-rsync-like-hard-link-backups-with-vss-on-windows/)

# linux - Shell：将 for ... 在参数中写入变量

> ID：10923538
> 
> 赞同：0
> 
> 时间：2012-06-06T23:06:33.190
> 
> 标签：linux, bash, shell

```
for i in "a" "a b"; do
    echo $i;
done 
```

回声：

```
a
a b 
```

我怎样才能写出类似的东西`for i in $input; do`并分配`"a" "a b"`给`input`？空格很重要。否则`$(echo ...)`会工作。

*编辑*：问题不是关于文件，也不是关于一些输入，可以使用`$@`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T23:11:00.337

由于您使用的是 bash，因此您可以这样做：

```
input=("a" "a b")

for i in "${input[@]}"; do
  echo $i
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T23:22:24.883

这只能通过`"$@"`命令行参数的构造可移植地完成。

但是，如果您不再需要*实际*的命令行参数，则可以使用`set`来替换它们的内容：

```
input='"a" "a b"'
eval set fnord $input
shift
for i in "$@"; do
    echo $i
done 
```

您应该意识到，*仅仅提出这个问题就*表明您正在接近复杂程度，您应该切换到限制较少的脚本语言（Perl 和 Python 是通常的选择）。

# entity-framework - EF 参考查找

> ID：10923539
> 
> 赞同：0
> 
> 时间：2012-06-06T23:06:35.380
> 
> 标签：entity-framework, entity-framework-4, ef-code-first

我使用相同的上下文加载发票列表，还加载了客户列表。如果我想在网格中显示发票，其中一列将包含客户姓名，我需要以某种方式修复发票和客户之间的关系。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:48:46.250

问题是客户列表是使用 MergeOption.NoTracking 检索的，因此它与上下文分离，并且无法查找关系。

# c# - 在 eBay 上按关键字搜索活动列表

> ID：10923541
> 
> 赞同：0
> 
> 时间：2012-06-06T23:06:39.413
> 
> 标签：c#, ebay-api

我不明白如何按关键字获取活动列表（产品）列表。

我能够运行返回时间的 eBay 测试应用程序，但我不知道如何请求产品。我做了一些研究，找到了例子，但它们没有用。例如：

```
FindingServicePortTypeClient client = 
```

它不起作用，但是

```
GeteBayOfficialTimeRequestType request= 
```

工作正常。

我包含了 com.ebay.developer 的网络参考，所以`GeteBayOfficialTimeRequestType`它存在，但`GeteBayOfficialTimeRequestType`缺失了。

谁能给我一个工作的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T14:21:07.200

答案是使用 eBay 查找 API；他们实际上有不同的API，我用错了

# shell - 那些教程壳是什么？

> ID：10923550
> 
> 赞同：2
> 
> 时间：2012-06-06T23:07:46.063
> 
> 标签：shell, terminal

在 codecademy、codeschool、mongo db、try ruby​​ 等各种网站上使用的代码教程 shell 是什么？

是否有构建和维护这些东西的服务？还是你自己建造的东西？

我找到[了 ShellInABox](http://code.google.com/p/shellinabox/downloads/list)，但它看起来不像是唯一一个人在使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T02:39:01.733

这些通俗地称为“web REPLs”（一个[术语，意思是“Read/Eval/Print Loop”](http://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop)）。

它们可以通过将它们描述为“沙盒”来区分用于调试的不受限制的。[尽管您可能会发现repl.it](http://repl.it/)（它使用许多编译为 javascript 的解释器来运行多种语言的客户端 REPL）很有趣，但没有一个单一的通用工具包用于构建这些工具包。

# c# - 使用正则表达式拆分名称

> ID：10923557
> 
> 赞同：2
> 
> 时间：2012-06-06T23:08:28.373
> 
> 标签：c#, regex

我正在尝试提出将拆分全名的正则表达式。

第一部分是验证 - 我想确保名称与模式“名称名称”或“名称 MI 名称”匹配，其中 MI 可以是一个字符，可选地后跟一个句点。这会淘汰像“Jose Jacinto De La Pena”这样的复杂名称 - 这很好。我想出的表达方式是`^([a-zA-Z]+\s)([a-zA-Z](\.?)\s){0,1}([a-zA-Z'-]+)$`，它似乎可以完成这项工作。

但是如何修改它以仅将名称分成两部分？如果出现中间名首字母，我希望它成为第一个“名字”的一部分，换句话说，“James T. Kirk”应该拆分为“James T.”。和“柯克”。TIA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T23:11:13.720

只需添加一些括号

```
^(([a-z]+\s)([a-z](\.?))\s){0,1}([a-z'-]+)$ 
```

您的比赛现在将在第 1 组

```
string resultString = null;
try {
    resultString = Regex.Match(subjectString, @"^(([a-z]+\s)([a-z](\.?))\s){0,1}([a-z'-]+)$", RegexOptions.IgnoreCase).Groups[1].Value;
} catch (ArgumentException ex) {
    // Syntax error in the regular expression
} 
```

另外，我使正则表达式不区分大小写，以便您可以使其更短（没有 a-zA-Z 而是 az）

**更新 1**

数字组不适用于没有首字母的情况，所以我从头开始编写正则表达式

```
^(\w+\s(\w\.\s)?)(\w+)$ 
```

\w 代表任何单词字符，这可能是您需要的（如果效果更好，您可以将其替换为 az）

**更新 2**

C# 中有一个不错的功能，您可以在其中命名您的捕获

```
^(?<First>\w+\s(?:\w\.\s)?)(?<Last>\w+)$ 
```

现在您可以按名称而不是数字来引用组（认为它更具可读性）

```
var subjectString = "James T. Kirk";
Regex regexObj = new Regex(@"^(?<First>\w+\s(?:\w\.\s)?)(?<Last>\w+)$", RegexOptions.IgnoreCase);

var groups = regexObj.Match(subjectString).Groups;
var firstName = groups["First"].Value;
var lastName = groups["Last"].Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T23:13:07.100

您可以通过在左括号之前添加当前的第二个捕获组成为非捕获组`?:`，然后将整个第二组移动到第一组的末尾来完成此操作，因此它将变为以下内容：

```
^([a-zA-Z]+\s(?:[a-zA-Z](\.?)\s)?)([a-zA-Z'-]+) 
```

请注意，我也替换了`{0,1}`with `?`，因为它们是等价的。

这将产生两个捕获组，一个用于名字和中间名首字母（如果存在），一个用于姓氏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T23:13:18.370

我不确定你是否想要这种方式，但有一种方法可以不用正则表达式。

如果名称的形式为`Name Name`then 你可以这样做：

```
// fullName is a string that has the full name, in the form of 'Name Name'
string firstName = fullName.Split(' ')[0];
string lastName = fullName.Split(' ')[1]; 
```

如果名称的形式是`Name MIName`then 你可以这样做：

```
string firstName = fullName.Split('.')[0] + ".";
string lastName = fullName.Split('.')[1].Trim(); 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T23:14:30.973

只需将可选部分放在第一个捕获组中：

```
(?i)^([a-z]+(?:\s[a-z]\.?)?)\s([a-z'-]+)$ 
```

# objective-c - 为什么 Xcode / clang 将我的“-fno-objc-arc”翻译成“-fno_objc_arc”？

> ID：10923558
> 
> 赞同：0
> 
> 时间：2012-06-06T23:08:36.723
> 
> 标签：objective-c, xcode, automatic-ref-counting, clang

我试图遵循 SF 的建议，通过在我的构建阶段的“编译源”部分的文件的编译标志中放置“-fno-objc-arc”来关闭一个文件的每个文件的目标 C 弧对于我的项目。

这对我不起作用，因为仍然会生成与 ARC 相关的错误。

我在日志中看到我尝试执行此操作的文件的以下警告：

“clang：警告：编译期间未使用的参数：'-fno_objc_arc'”

我注意到它显示下划线而不是破折号。当我查看生成的编译行时，它还显示下划线而不是破折号。

```
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c
-arch armv7 -fmessage-length=0 -std=gnu99 -fobjc-arc -Wno-trigraphs -fpascal-strings -O0
-Werror-implicit-function-declaration -Wmissing-field-initializers -Wno-missing-prototypes -Wreturn-type
-Wno-implicit-atomic-properties -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function
-Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wuninitialized -Wno-unknown-pragmas
-Wno-shadow -Wno-four-char-constants -Wno-sign-compare -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof
-Wno-selector -Wno-strict-selector-match -Wundeclared-selector -Wno-deprecated-implementations -DDEBUG=1
-isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk
-Wprotocol -Wdeprecated-declarations -g -Wno-conversion -Wno-sign-conversion -mthumb "-DIBOutlet=__attribute__((iboutlet))"
"-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)"
-miphoneos-version-min=5.1 -iquote /x/xcode/DerivedData/myproj-eqyvffptnyujnsgcmhlqunfmfytp/Build/Intermediates/myproj.build/Debug-iphoneos/myproj.build/myproj-generated-files.hmap
-I/x/xcode/DerivedData/myproj-eqyvffptnyujnsgcmhlqunfmfytp/Build/Intermediates/myproj.build/Debug-iphoneos/myproj.build/myproj-own-target-headers.hmap
-I/x/xcode/DerivedData/myproj-eqyvffptnyujnsgcmhlqunfmfytp/Build/Intermediates/myproj.build/Debug-iphoneos/myproj.build/myproj-all-target-headers.hmap
-iquote /x/xcode/DerivedData/myproj-eqyvffptnyujnsgcmhlqunfmfytp/Build/Intermediates/myproj.build/Debug-iphoneos/Voyeur.build/myproj-project-headers.hmap
-I/x/xcode/DerivedData/myproj-eqyvffptnyujnsgcmhlqunfmfytp/Build/Products/Debug-iphoneos/include
-I/x/xcode/DerivedData/myproj-eqyvffptnyujnsgcmhlqunfmfytp/Build/Intermediates/myproj.build/Debug-iphoneos/myproj.build/DerivedSources/armv7
-I/x/xcode/DerivedData/myproj-eqyvffptnyujnsgcmhlqunfmfytp/Build/Intermediates/myproj.build/Debug-iphoneos/myproj.build/DerivedSources
-F/x/xcode/DerivedData/myproj-eqyvffptnyujnsgcmhlqunfmfytp/Build/Products/Debug-iphoneos -fno_objc_arc
-include /x/xcode/DerivedData/myproj-eqyvffptnyujnsgcmhlqunfmfytp/Build/Intermediates/PrecompiledHeaders/myproj-Prefix-adnhewmpoabuzebrrqoplkebnugj/myproj-Prefix.pch
-MMD -MT dependencies -MF /x/xcode/DerivedData/myproj-eqyvffptnyujnsgcmhlqunfmfytp/Build/Intermediates/myproj.build/Debug-iphoneos/myproj.build/Objects-normal/armv7/mySource.d
--serialize-diagnostics /x/xcode/DerivedData/myproj-eqyvffptnyujnsgcmhlqunfmfytp/Build/Intermediates/myproj.build/Debug-iphoneos/myproj.build/Objects-normal/armv7/mySource.dia
-c /x/git/myproj/subdir/mySource.m
-o /x/xcode/DerivedData/myproj-eqyvffptnyujnsgcmhlqunfmfytp/Build/Intermediates/myproj.build/Debug-iphoneos/myproj.build/Objects-normal/armv7/mySource.o 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T23:08:37.190

为了回答我自己的问题，下划线可能是最初输入错误的残余，忘记了我已经这样做了，但是却被困在派生数据缓存中。

对此的快速解决方法是

1.  在 Xcode 中关闭项目
2.  删除文件夹 /x/xcode/DerivedData/myproj-eqyvffptnyujnsgcmhlqunfmfytp
3.  在 Xcode 中重新打开项目
4.  重新构建并重新运行

在查看进行这些更改后生成的日志时，该值适当地出现在“-fno-objc-arc”之后，出现在“-fobjc-arc”之后，并且根据另一个stackoverflow.com答案，命令中的最后一个线获胜。

# php - 如何为 Magento 多站点设置默认产品图像？

> ID：10923566
> 
> 赞同：1
> 
> 时间：2012-06-06T23:09:14.967
> 
> 标签：php, magento, magento-1.4

我有一个脚本可以加载目录并将每个目录的图像添加到我的产品中。

直到昨天，我只有一个网站，这个脚本将每个产品的第一张图片设置为产品的“默认”图片。

今天我添加了一个包含两个商店视图的新网站，并且脚本不断将每个图像添加到产品中，但不再将每个产品的第一个图像设置为“默认”图像。

我相信问题与这两家商店有关。但是在谷歌搜索了一整天后，我想不出我该如何解决这个问题。

这是我的代码：

```
while (every file in dir) {
   // code to get sku from image filename

   $product = Mage::getModel('catalog/product')->loadByAttribute('sku', $sku);
   if ($posicion == 0) {
      $tipoImages = array('image', 'thumbnail', 'small_image');
   } else {
      $tipoImages = NULL;
   }
   $attributes = $product->getTypeInstance(true)->getSetAttributes($product);
   $mediaGalleryAttribute = $attributes['media_gallery'];
   $file = $mediaGalleryAttribute->getBackend()->addImage($product, $dir . "/" . $f, $tipoImages, false, false);
   $data = array(
                    'label' => '',
                    'position' => $posicion,
                    'disabled' => false,
                    'exclude' => false
                );
   $product->save();
   $posicion++;
} 
```

我需要更改或添加什么以将每个产品的第一张图片设置为默认图片？

# php - Samba 使用的是哪个 CPU 性能？

> ID：10923576
> 
> 赞同：0
> 
> 时间：2012-06-06T23:10:10.213
> 
> 标签：php, linux, soap, samba, smb

我有 2 台服务器，第 1 台运行 PHP 脚本，第 2 台运行 Java 程序来分析图片，这需要更高的性能。

我想让 PHP 脚本使用这个 Java 程序，第一次我决定在两台服务器之间使用 SOAP-Connection，然后我可能会更好更快地使用它，因为它在同一台服务器上并安装这使用 Samba

```
mount cifs -t smb://IP/path/to/java/process 
```

所以现在我想知道在本地运行脚本时将使用哪种 CPU 性能？Java 程序或 PHP 脚本所在的 CPU。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:37:15.460

不，从 CIFS 挂载运行程序不会使程序在挂载它的服务器上运行。正如查尔斯·巴贝奇 (Charles Babbage) 所说：

> 我无法正确理解会引发这样一个问题的那种混乱的想法。

# ruby-on-rails - rails：创建到数据库后，地址栏中的重定向正确但 URL 不正确

> ID：10923589
> 
> 赞同：4
> 
> 时间：2012-06-06T23:11:18.257
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在我的 Rails 应用程序中，我有一个这样的创建按钮

```
 def create
      @client = Client.find(params[:client_id])
      @inventory = @client.inventories.create(params[:inventory])
      redirect_to client_path(@client)
   end 
```

当创建库存时（作为客户端的一部分，例如客户端 has_many 库存，库存属于_to 客户端），库存将添加到数据库中的客户端并重定向到 localhost:3000/client/（无论客户端 ID 是什么)

但是，我的程序有问题，因为尽管它进行了正确的重定向，但我推送创建后地址栏中的地址是 localhost:3000/client/1/inventories/1... 我只希望它是 localhost:3000/client/1/ 。如果我确实尝试访问 localhost:3000/client/1/inventories/1，它会给我一个错误，因为我没有库存节目。

它怎么可能进行正确的重定向，但我的浏览器中显示了错误的 URL？顺便说一句，这是在我的 routes.rb 中，这对我来说似乎不是问题。

```
 resources :clients do
    resources :inventories
 end 
```

为什么我的应用程序会这样？有接盘侠吗？:]

**编辑**

当我输入 rake routes 时，我看到了这一点。 [![这](../Images/3a6514d27e37f3f1167ccaf6ad1cfe76.png)](https://i.stack.imgur.com/f79pv.png) 创建和销毁的路线似乎是错误的。我该如何改变它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:58:56.967

解决此问题的方法是转到库存控制器并添加

```
 def index
     @client = Client.find(params[:client_id])
     redirect_to client_path(@client)
 end 
```

看起来这是处理后退按钮点击这些错误的最佳方法，您似乎无法控制地址栏中显示的地址。至少我们不知道如何.. :P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T01:40:51.177

在这种情况下，请使用：

```
redirect_to client_path(@client.id) 
```

# asp.net - 带有 MySQL 的 ASP.NET GridView 控件 - 参数中带有空格的 UpdateQuery

> ID：10923590
> 
> 赞同：0
> 
> 时间：2012-06-06T23:11:19.133
> 
> 标签：asp.net, webforms

我有一个使用 Visual Studio 2010 和 ASP.NET Web 窗体制作的项目。在其中，我有一个绑定到 MySQL 表的 GridView 控件。它在控件中显示我的表没有问题，但是在我启用控件上的编辑后，我发现当字段中有空格时更新表中的字段时出现问题。

例如，我定义了下表：

```
CREATE TABLE `test_table` (
  `oid` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `first_column` varchar(20) NOT NULL,
  `second_column` varchar(20) NOT NULL,
  `third column` varchar(20) NOT NULL,
  PRIMARY KEY (`oid`)
) 
```

请注意，其中一个字段的名称中有一个空格。这是我遇到问题的地方。在我的页面中，我有以下代码：

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataKeyNames="oid" DataSourceID="SqlDataSource1">
        <Columns>
            <asp:CommandField ShowEditButton="True" />
            <asp:BoundField DataField="oid" HeaderText="oid" ReadOnly="True" 
                SortExpression="oid" />
            <asp:BoundField DataField="first_column" HeaderText="first_column" 
                SortExpression="first_column" />
            <asp:BoundField DataField="second_column" HeaderText="second_column" 
                SortExpression="second_column" />
            <asp:BoundField DataField="third column" HeaderText="third column" 
                SortExpression="third column" />
        </Columns>
    </asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:testcon %>" 
        ProviderName="<%$ ConnectionStrings:testcon.ProviderName %>" 
        SelectCommand="select * from test_table" UpdateCommand="update `test_table` set
    `first_column`   = @first_column,
    `second_column`  = @second_column
where
    `oid` = @oid"></asp:SqlDataSource> 
```

通过 UpdateCommand，我可以很好地更新此表上的 first_column 和 second_column。现在我希望它以`third column`相同的方式更新，但它不起作用。如果我将查询更改为：

```
update `test_table` set
    `first_column`   = @first_column,
    `second_column`  = @second_column,
    `third column`   = @third column
where
    `oid` = @oid 
```

查询运行时它会给我这个错误：

```
Parameter '@third' must be defined. 
```

我也尝试过@third\ column、@{third column}、@[third column]、{@third column} - 显然这些都不起作用。因此我的问题是：我应该为我的更新查询添加什么才能更新其中有空格的 MySQL 字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T00:36:55.407

您应该能够通过更新参数使用任何参数名称

[http://www.asp.net/web-forms/tutorials/data-access/accessing-the-database-directly-from-an-aspnet-page/inserting-updating-and-deleting-data-with-the- sqldatasource-vb](http://www.asp.net/web-forms/tutorials/data-access/accessing-the-database-directly-from-an-aspnet-page/inserting-updating-and-deleting-data-with-the-sqldatasource-vb)

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:testcon %>" 
    ProviderName="<%$ ConnectionStrings:testcon.ProviderName %>" 
    SelectCommand="select * from test_table" UpdateCommand="update `test_table` set
`first_column`   = @first_column,
`second_column`  = @second_column
where `oid` = @oid">

   <UpdateParameters>
    <asp:Parameter Name="first_column" Type="String" />
    <asp:Parameter Name="second_column" Type="String" />
    <asp:Parameter Name="third_column" Type="String" />
   </UpdateParameters>
</asp:SqlDataSource> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-30T23:41:01.373

这种情况的解决方案是为填充 Gridview 的 Select 语句中的列提供别名。例如：

```
SELECT ..., [third column] AS third_column, ...
FROM ... 
```

然后您可以使用@third_column 作为参数名称。由于我预计您可能希望使用空格而不是下划线显示列标题，因此您可以将此字段的 HeaderText 属性设置为您想要的。

使用这种方法，GridView 的更新命令将很容易映射到相应的参数（因为它们具有相同的名称），并且您不必更改数据库中的定义。我还建议使用 SQLServer Profiler 查看在服务器中执行的实际 T-SQL 代码。

祝你好运！

# html - 如何用 CSS 标记平铺布局？

> ID：10923596
> 
> 赞同：2
> 
> 时间：2012-06-06T23:12:12.050
> 
> 标签：html, css

如何在没有 javascript 的情况下标记页面？ ![在此处输入图像描述](../Images/f2695858e45c2eaf031cdb287cd74cd1.png)

两个 HTML 元素（div1、div2）都必须具有固定大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T23:18:57.697

您必须使用 CSS 属性 [`position`](https://developer.mozilla.org/en/CSS/position)、 [`top`](https://developer.mozilla.org/en/CSS/top)、 [`bottom`](https://developer.mozilla.org/en/CSS/bottom)、 [`left`](https://developer.mozilla.org/en/CSS/left)和 。例如[`right`](https://developer.mozilla.org/en/CSS/right)[`height`](https://developer.mozilla.org/en/CSS/height)

```
<div style="position:absolute; left:0; right:0; top:0; bottom:0">
    <div style="position:absolute; left:0; right:0; top:0; height:42px; background:green">div1</div>
    <div style="position:absolute; left:0; right:0; bottom:0; top:42px; background:red">div2</div>
</div> 
```

[http://jsfiddle.net/GPHEx/1/](http://jsfiddle.net/GPHEx/1/)

*   `position:absolute`让您确定以像素和百分比为单位的布局（粗略地说）。
*   `left:0; right:0`使其全角。
*   `top:0`将 div 与上边缘对齐。
*   `bottom:0`将 div 与下边缘对齐。
*   `height:42px`并`top:42px`定义平铺布局。

[垂直示例](http://jsfiddle.net/KggQr/)：

```
<div style="position:absolute; left:0; right:0; top:0; bottom:0">
    <div style="position:absolute; top:0; bottom:0; left:0; width:42px; background:green">d i v 1</div>
    <div style="position:absolute; top:0; bottom:0; right:0; left:42px; background:red">d i v 2</div>
</div> 
```

[四个瓷砖的例子](http://jsfiddle.net/xPsuC/1/)：

```
<div style="position:absolute; left:0; right:0; top:0; bottom:0">
    <div style="position:absolute; top:0; height:80px; left:0; width:42px; background:green">d i v 1</div>
    <div style="position:absolute; top:0; height:80px; right:0; left:42px; background:red">d i v 2</div>
    <div style="position:absolute; top:80px; bottom:0; left:0; width:42px; background:red">d i v 3</div>
    <div style="position:absolute; top:80px; bottom:0; right:0; left:42px; background:green">d i v 4</div>
</div> 
```

注意如何`top`+`height`分别。`left`+`width`一起工作。通过将先前的高度添加到下一个顶部，您也可以拥有更多的瓷砖。

[`overflow`](https://developer.mozilla.org/en/CSS/overflow)您可以定义如果内容过多会发生什么。`overflow:auto`如果需要，将滚动条添加到 div。`overflow:hidden`会裁剪它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T23:20:26.140

虽然我没有尝试过您提到的布局，但您可以尝试这里提到的技术（负边距。）

[http://www.alistapart.com/articles/negativemargins](http://www.alistapart.com/articles/negativemargins)

# java - Java：通过给出数字 N 来生成真假组合；

> ID：10923601
> 
> 赞同：6
> 
> 时间：2012-06-06T23:12:56.430
> 
> 标签：java, recursion, boolean, generator, combinations

我尽可能简化任务，所以我可以将它应用到我的算法中。

这是数学家和程序员面临的挑战：

我需要创建一个传递参数 int n 的方法：

```
public void optionality_generator(int n){
  //some kind of loops, or recursions...to make it workable
  System.out.println("current combination: ...");
} 
```

输出应显示真假的所有可能组合。

这里是 N=1 的例子；N=2；N=3；N=4；N=5，其中 x=false，0=true；请注意，空折线只是为了让您更容易识别模式。希望我包括了所有可能的组合）：

```
Combination of 1:
0
x

Combination of 2:
00
x0
0x
xx

Combination of 3:
000
X00
0X0
00X
XX0
0XX
XXX

Combination of 4:
0000

X000
0X00
00X0
000X

XX00
X0X0
X00X

0XX0
0X0X

00XX

XXX0
XX0X
X0XX
0XXX

XXXX

Combination of 5:
00000
X0000
0X000
00X00
000X0
0000X

XX000
X0X00
X00X0
X000X

X0X00
X00X0
X000X

0XX00
0X0X0
0X00X

00XX0
00X0X

000XX

XXX00
XX0X0
XX00X

X0XX0
X0X0X
X00XX

0XXX0
0XX0X

00XXX

XXXX0
XXX0X
XX0XX
X0XXX
0XXXX

XXXXX 
```

另外，如果您看到输出，这是我识别的模式，所有组合都反转了一半（例如，第一个组合是 00000，最后一个是 XXXXX，第二个是 X0000，最后一个之前的一个是 0XXXX 等等。） . 也许，这种模式将有助于使整个算法更高效，对此不确定。先感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T23:23:04.360

这是仅使用 Java API 的一种非常基本的方法：

```
final int n = 3;
for (int i = 0; i < Math.pow(2, n); i++) {
    String bin = Integer.toBinaryString(i);
    while (bin.length() < n)
        bin = "0" + bin;
    System.out.println(bin);
} 
```

结果：

```
000
001
010
011
100
101
110
111 
```

当然，你可以设置`n`为任何你喜欢的。而且，有了这个结果，您可以`n`从字符串中选择第 th 个字符作为真/假。

如果只需要检查某位是否为真，则不需要将其转换为字符串。这只是为了说明输出值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T23:21:25.700

只是一个线索，但请考虑为最多具有“n”位的数字设置的位。你会看到你是否从 0 到 'n' 位数（在这种情况下为 3）；这些位是 000、001、010、011、100、101、110、111。您可以使用 ((n*n)-1) 公式计算出可以放入“n”位的最大数量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T23:27:47.423

这应该可以解决问题

```
int cols = 3;
int rows = (int) Math.pow(2, cols);
for (int row = 0; row < rows; row++)
    System.out.println(String.format("%" + cols + "s", 
            Integer.toBinaryString(row)).replace(' ', '0').replace('1', 'X')); 
```

出去：

```
000
00X
0X0
0XX
X00
X0X
XX0
XXX 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-07T06:34:31.567

使用递归不像使用 Java Integer.toBinaryString() API 生成二进制字符串那么容易。但是下面的代码使您可以灵活地生成任何基本表示，例如 base 3：“000”“001”“002”“010”“011”“012”

对于 base 2（即二进制）字符串，您可以这样称呼它：

```
getBinaryStrings(2, 3); 
```

对于 base 3 字符串，您可以这样称呼它：

```
getBinaryStrings(3, 3); 
```

这是代码：

```
public static List<String> getBinaryStrings(int base, int n){
    ArrayList<String> result = new ArrayList<>();
    getBinaryStringsCore(base, n, "", result);
    return result;
}

private static void getBinaryStringsCore(int base, int n, String tempString, List<String> result){
    if (tempString.length() == n) {
        result.add(tempString);
        return;
    }

    for (int i = 0; i < base; i++) {
        tempString += i;
        getBinaryStringsCore(base, n, tempString, result);
        tempString = tempString.substring(0, tempString.length() - 1);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T23:25:21.417

这是一个使用递归实现的简单版本

```
public void optionality_generator(int n){
    ArrayList<String> strings = generatorHelper(n); 
    for(String s : strings){
        System.out.println(s);
    }
}

private ArrayList<String> generatorHelper(int n){
    if(n == 1){
        ArrayList<String> returnVal = new ArrayList<String>();
        returnVal.add("0");
        returnVal.add("X");
        return returnVal;
    }
    ArrayList<String> trueStrings = generatorHelper(n-1);
    for(String s : trueStrings){
        s += "0";
    }
    ArrayList<String> falseStrings = generatorHelper(n-1);
    for(String s : falseStrings){
        s += "X";
    }
    trueStrings.addAll(falseStrings);
    return trueStrings;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-06T23:39:59.767

这是一个测试驱动的版本：

```
import static org.junit.Assert.assertEquals;

import java.util.ArrayList;
import java.util.List;

import org.junit.Test;

public class OptionalityTest {

    @Test
    public void testOptionality0() throws Exception {
        assertEquals("[]", optionality(0).toString());
    }

    @Test
    public void testOptionality1() throws Exception {
        assertEquals("[0, x]", optionality(1).toString());
    }

    @Test
    public void testOptionality2() throws Exception {
        assertEquals("[00, x0, 0x, xx]", optionality(2).toString());
    }

    @Test
    public void testOptionality3() throws Exception {
        assertEquals("[000, x00, 0x0, xx0, 00x, x0x, 0xx, xxx]", optionality(3).toString());
    }

    private List<String> optionality(int i) {
        final ArrayList<String> list = new ArrayList<String>();
        if (i == 1) {
            list.add("0");
            list.add("x");
        }
        if (i > 1) {
            List<String> sublist = optionality(i - 1);
            for (String s : sublist) {
                list.add("0" + s);
                list.add("x" + s);
            }
        }
        return list;
    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-07T01:18:51.603

这是上面 Erics 代码的修改，它使用 c# 并允许输入任意数量的布尔变量名称。它将在 c# 代码中输出所有可能的组合，以便插入到 if 语句中。只需使用 var 名称编辑第一行代码，然后在[LINQpad](https://www.linqpad.net/Download.aspx)中运行以获取文本输出。

输出示例...

```
!VariableNameA && !VariableNameB && !VariableNameC 
!VariableNameA && !VariableNameB &&  VariableNameC 
!VariableNameA &&  VariableNameB && !VariableNameC 
!VariableNameA &&  VariableNameB &&  VariableNameC 
 VariableNameA && !VariableNameB && !VariableNameC 
 VariableNameA && !VariableNameB &&  VariableNameC 
 VariableNameA &&  VariableNameB && !VariableNameC 
 VariableNameA &&  VariableNameB &&  VariableNameC 
```

```
 //To setup edit var names below
    string[] varNames = { "VariableNameA", "VariableNameB", "VariableNameC" };

    int n = varNames.Count();        
    for (int i = 0; i < Math.Pow(2, n); i++) {
      String bin = Convert.ToString(i, 2);
      while (bin.Length < n) {
          bin = "0" + bin;
      }        
      string and = " && ";
      string f = "!";
      string t = " ";
      var currentNot = bin[0] == '0' ? f : t;
      //string visual = bin[0].ToString();
      string visual = currentNot + varNames[0];
        for (var j = 1; j < n; j++) {
        currentNot = bin[j] == '0' ? f : t;
        //visual = visual + and + bin[j].ToString();
        visual = visual + and + currentNot + varNames[j];
      }		
      Console.WriteLine(visual);	
    }
```

# python - Python 3 bytes.index：更好的方法？

> ID：10923602
> 
> 赞同：7
> 
> 时间：2012-06-06T23:12:57.573
> 
> 标签：python, python-3.x, indexing, byte

7天刚学会Python 3，感觉对字节串的理解有点坑。在 Python 3 中，假设我有一个 byte string `b'1234'`。它的迭代器返回整数：

```
Python 3.2.3 (default, May 26 2012, 18:49:27) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.

>>> for z in b'1234':
...   print(type(z))
... 
<class 'int'>
<class 'int'>
<class 'int'>
<class 'int'> 
```

我可以在字节字符串中找到一个整数（的定义`in`是它搜索相等）：

```
>>> 0x32 in b'1234'
True 
```

但是，我想在字节字符串中找到给定整数的索引。`bytes.index`需要一个子字符串：

```
>>> b'1234'.index(b'2')
1 
```

现在，如果我有一个我想找到的变量`x`，这是我想出的最好的：

```
>>> x = 0x32
>>> b'1234'.index(bytes([x]))
1 
```

我知道 Python 比这更优雅。我显然遗漏了一些明显的东西。除了创建单个整数的序列之外，还有什么更简单的方法来做到这一点？或者真的是这样吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T23:17:58.073

是的，这就是这样做的方法。

它与根据代码点在字符串中搜索字符的方式没有太大区别：

```
x = 0x32
i ='1234'.index(chr(x)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:42:53.297

另外，请查看 Mark Pilgrim 的*Dive Into Python 3*，第[4 章。字符串](http://getpython3.com/diveintopython3/strings.html)，第[4.6 节。字符串与字节](http://getpython3.com/diveintopython3/strings.html#byte-arrays)。它很好地解释了旧的 Python 2.x 字符串（在 Python 3 中成为*字节*类型）有哪些问题，以及新的 Python 3*字符串*在原则上有何不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-29T05:16:10.463

```
>>>> bytearray(b'12345').index(0x32)
1
>>>> bytearray(b'12345').index(b'2')   
1
>>>> 
```

# html - jQuery隐藏额外边框列表项

> ID：10923605
> 
> 赞同：1
> 
> 时间：2012-06-06T23:13:20.833
> 
> 标签：html, css

我的代码如下所示：http: [//jsfiddle.net/eLyJA/](http://jsfiddle.net/eLyJA/)

我怎样才能计算和删除所有的边界边缘，所以它看起来像这样： ![在此处输入图像描述](../Images/74fa8c6ccc7613e86ba6344de7c35e05.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:38:21.423

**编辑：我还发现了一个相当不错的跨浏览器“hack”，可以让解决方案在旧版本的 IE 中运行。**

**演示：http: [//jsfiddle.net/n1ck/p3SCR/4/](http://jsfiddle.net/n1ck/p3SCR/4/)**

我在之前的解决方案中添加了：

```
table {
    border-color:transparent; 
    border-style:solid; 
}

table td {
    border: 1px solid black;
} 
```

* * *

您可以通过 CSS 实现这两种方式：

[http://jsfiddle.net/eLyJA/3/](http://jsfiddle.net/eLyJA/3/)

```
table {
    border-collapse: collapse;
}
table td {
    padding:80px;
    border: 1px solid black;
}
table tr:first-child td {
    border-top: 0;
}
table tr:last-child td {
    border-bottom: 0;
}
table tr td:first-child{
    border-left: 0;
}
table tr td:last-child,
    border-right: 0;
}​ 
```

在这里，通过设置表`frame="void"`

[http://jsfiddle.net/eLyJA/7/](http://jsfiddle.net/eLyJA/7/)

```
<table border="1" frame="void"> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T05:37:24.127

用于循环来实现这一点：http: [//jsfiddle.net/eLyJA/15/](http://jsfiddle.net/eLyJA/15/)

```
var total = $("ul li").size();

$().ready(function () {
    for( i=2; i < total ; i+=3){
        $('ul li:nth-child(' + i + ')').each(function(n) {
            $(this).css({
                'border-right': '1px solid #000',
                'border-bottom': '1px solid #000',
                'border-left': '1px solid #000'
            });
        });
    }

    j = total;
    k = total - 3;
    for( j=total ; j > total-3; j--){
        $('ul li:nth-child(' + j + ')').each(function(n) {
            $(this).css({
                'border-bottom': 'none'
            });
        });
    }
}); 
```

# php - 使用 Wordpress 的 IF 语句修改 PHP 和 HTML

> ID：10923607
> 
> 赞同：0
> 
> 时间：2012-06-06T23:13:27.000
> 
> 标签：php, html, wordpress, if-statement

我正在尝试修改这个 Wordpress 主题：[http ://www.elegantthemes.com/preview/DailyNotes/](http://www.elegantthemes.com/preview/DailyNotes/)

对于常规的文本帖子，我希望它显示缩略图（如果存在）。否则，只需显示帖子的标题和摘录。这是我坚持的 IF 和 ELSE 语句。当我更改条件语句时，我无法让它工作，它是一个或另一个（总是 IF 或总是 ELSE）。

```
<?php if ($arr[$j]['posttype'] == 'text') { ?>
  <div class="inside" onclick="window.location='<?php echo $arr[$j]["permalink"];?>'">
    <?php if (file_exists($arr[$j]["thumb"])) { ?>
      <span class="photospan">    
        <img src="<?php bloginfo('template_directory'); ?>/images/shadow-overlay.png" alt="thumbnail" class="thumb_overlay" />
        <?php print_thumbnail($arr[$j]["thumb"], $arr[$j]["use_timthumb"], $arr[$j]['title'] , 149, 149, '', $post = $arr[$j]["post"]); ?>
      </span>
    <?php } else { ?>
      <div class="overflow">
        <h2><?php echo($arr[$j]['title']); ?></h2>
        <?php echo $arr[$j]['excerpt']); ?>
      </div>
    <?php } ?>
    <img class="icon" src="<?php bloginfo('template_directory'); ?>/images/icon-photo.gif" alt="article post" />
  </div>
<?php }; ?> 
```

我尝试将 print_thumbnail 函数的不同参数放入 IF 语句中，但它不起作用。以下是 print_thumbnail 函数的参数，以防有帮助：

```
function print_thumbnail($thumbnail = '', $use_timthumb = true, $alttext = '', $width = 100, $height = 100, $class = '', $echoout = true, $forstyle = false, $resize = true, $post='') { 
```

谁能告诉我应该在我的 IF 语句中使用哪个参数？提前致谢，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T00:11:36.603

你需要做 `<?php if ($arr[$j]["thumb"]) { ?>`

接着

```
else if (!$arr[$j]["thumb"]) { 
```

# c++ - 编译器错误？g++ 允许可变大小的静态数组，除非函数是模板化的

> ID：10923615
> 
> 赞同：6
> 
> 时间：2012-06-06T23:14:54.250
> 
> 标签：c++, templates, gcc, dynamic-arrays

下面的代码演示了我无法解释的 gcc 4.6.2 的行为。第一个函数声明了一个 vec_t 类型的静态数组，其中 vec_t 是 unsigned char 的 typedef 别名。第二个函数是相同的，只是 vect_t 的类型是一个模板参数。第二个函数无法编译并诊断为“错误：'bitVec' 的存储大小不是恒定的”。

```
#include <limits>

void bitvec_func()
{
    const std::size_t       nbits = 1e7;
    typedef unsigned char   vec_t;
    const std::size_t       WLEN  = std::numeric_limits<vec_t>::digits;
    const std::size_t       VSIZ  = nbits/WLEN+1;
    static vec_t            bitVec[nbits/VSIZ];    // Compiles fine
}

template <typename T>
void bitvec_func()
{
    const std::size_t       nbits = 1e7;
    typedef T               vec_t;
    const std::size_t       WLEN  = std::numeric_limits<vec_t>::digits;
    const std::size_t       VSIZ  = nbits/WLEN+1;
    static vec_t            bitVec[nbits/VSIZ];    // "error: storage size of ‘bitVec’ isn’t constant"
}

void flarf()
{
    bitvec_func();
    bitvec_func<unsigned char>();
} 
```

在我看来，使用参数 <unsigned char> 实例化模板应该会导致编译器生成与第一个函数相同的代码。任何人都可以提供任何见解，为什么这似乎不是这种情况？

[附录：第二个函数*将*使用“-std=c++0x”或“-std=gnu++0x”编译，但我仍然想了解在早期的语言定义下它是如何/是否是错误的。]

ETA：
如果 nbits 的初始值设定项更改，第二个函数将编译：

```
const std::size_t       nbits = 1e7;              // Error
const std::size_t       nbits = (std::size_t)1e7; // Okay
const std::size_t       nbits = 10000000.0;       // Error
const std::size_t       nbits = 10000000;         // Okay 
```

换句话说，似乎 if`nbits`用整数类型的表达式初始化，然后`nbits`在 的定义中被视为常量`bitVec`。如果`nbits`改为使用浮点表达式初始化，编译器不再将其视为 的 维度表达式中的常量`bitVec`，并且编译失败。

我在 C++ 中调用“编译器错误”比在 C 中要舒服得多，但我想不出任何其他原因使上述 4 种情况在语义上不完全相同。还有人愿意发表意见吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T00:34:54.993

在 gcc 4.7.0 上编译您的代码后`-ansi`，我能够重现此警告：

```
warning: ISO C++ forbids variable length array 'bitVec' [-Wvla] 
```

此警告出现在**两个** `bitVec`，而不仅仅是模板函数中的一个。然后我意识到该行`nbits = 1e7;`正在将 a 分配`double`给`unsigned int`. 我认为正因为如此，由于某种原因导致`nbits`不是一个常量表达式。您的代码为非模板化版本编译的原因是因为 gcc 的可变长度数组扩展。此外，由于某种原因，您的 gcc 版本不允许在函数模板中使用可变长度数组。将您的代码更改`1e7;`为`10000000`.

**编辑**

我问[了另一个](https://stackoverflow.com/questions/10925459/initializing-a-const-with-a-floating-point-literal)关于规则的问题。答案是在 C++03 中代码是无效的，但在 C++11 中是可以的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T23:32:00.880

答案肯定是在产生错误的编译阶段，数组索引的存储大小不是恒定的——即它在模板扩展的上游。动态数组不是 C++ 98/03 的一部分，它们是 gcc 扩展（最初是 C）。所以这个错误实际上是正确的，即使实现看起来很奇怪。据推测，GCC 为模板化数组达到了标准合规性路径，在需要时支持它们，否则会抛出错误，但静态类型的数组会命中“C”路径，从而自动获取 gcc 扩展。

# ajax - Apache 使一些 AJAX 请求同步运行

> ID：10923616
> 
> 赞同：2
> 
> 时间：2012-06-06T23:14:56.240
> 
> 标签：ajax, apache, jquery, apache2

我有一个奇怪的问题，*有时*如果我快速连续地向我的 Apache 2.2 服务器发出两个 AJAX 请求，第二个请求将等待第一个请求完成后再完成。

例如，我有两个请求，一个休眠 10 秒，一个立即返回。如果我运行立即返回的请求，它将始终在 300 毫秒内返回。但是，如果我调用需要 10 秒的请求，然后在大约 50% 的时间内调用立即返回的请求，则第二个请求将等到第一个完成，并且 chrome 会在收到 10 秒前报告该请求太回复。另一半时间，快速请求将立即返回。

我找不到任何模式让它以一种或另一种方式运行，它有时会随机阻止快速 AJAX 请求，而其他时候它会按预期运行。我正在使用只有我正在访问的开发服务器，并且我已将 MaxRequestsPerChild 等几个变量设置为较高的值。

有谁知道为什么 Apache 看似随机地将我的 AJAX 请求转换为同步请求？

这是我正在运行的代码：

```
$.ajax({async:true,dataType:'json',url:'/progressTest',success:function(d){console.log('FINAL',d)}}); // Sleeps for 10 seconds
$.ajax({async:true,dataType:'json',url:'/progressTestStatus',success:function(d){console.log('STATUS',d)}}); // Takes ~300ms 
```

这是两个屏幕截图。第一个按预期运行，第二个等待慢速进程首先完成（在示例中，超时设置为 3 秒）。

![预期的异步行为](../Images/480de25e762a20084896a6fd59017557.png)

![异步行为](../Images/17a044f39b74c789f6514f9125aa4eab.png)

**更新：**根据下面的评论 - 这似乎与 Chrome 一次只执行一个请求有关。任何想法为什么 Chrome 会对异步请求设置如此低的限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:41:26.253

问题不在于 Apache，而在于 Google Chrome 限制了对您的开发服务器的并发请求数。我只能猜测为什么它仅限于一个请求。这里有一对：

1）你有很多标签打开吗？并发连接的总数是有限制的，如果您有许多使用 KeepAlive 发出请求的选项卡，您可能处于该限制，并且只能建立一个与您的服务器的连接。如果是这种情况，您可以通过将 KeepAlive 添加到您自己的输出标头来解​​决此问题。

2）您是否启用了一些扩展。一些扩展对浏览器做了奇怪的事情。尝试禁用所有扩展并发出相同的请求。如果它有效，则一次启用它们以找到罪魁祸首扩展。

# python - Pybrain的网络架构的数据结构是怎样的？

> ID：10923617
> 
> 赞同：1
> 
> 时间：2012-06-06T23:14:58.417
> 
> 标签：python, neural-network, pybrain

`SupervisedDataSet`假设我们已经使用 Pybrain 的和`buildNetwork`函数构建了一个前馈网络。该架构可以是 10、5、2：10 个输入节点，单个隐藏层中的 5 个隐藏节点和 2 个输出节点。

```
>>> our_network = buildNetwork(10,5,2)
>>> for mod in our_network.modules:
...    for conn in our_network.connections[mod]:
...        conn.params

array([-0.82432749, -1.77414037, ... ,  1.96635753]) 
```

在检查具有上述架构的训练网络时，我们如何解释输出数组`conn.params`？检查上述架构的输出将在输入和隐藏层之间产生 50 个连接/权重。我有兴趣知道哪些输入与最强的连接相关联。具体来说，假设返回的前 5 个数组元素与输入层的第一个节点和 5 个隐藏层节点之间的连接相关联是否安全？

在过去的一个小时里，我没有通过逆向工程 Pybrain 获得任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:54:48.407

模块和连接以独特的方式排序（评估顺序，按字母顺序打破平局，请查看[sortModules()](https://github.com/pybrain/pybrain/blob/master/pybrain/structure/networks/network.py#L216)）。全局*.params*数组就是所有这些组件的（扁平化）参数的串联。

另请参阅[此相关问题](https://stackoverflow.com/questions/8150772/pybrain-how-to-print-a-network-nodes-and-weights)。

# spring - STS，pom.xm 错误，在此行发现多个注释

> ID：10923620
> 
> 赞同：2
> 
> 时间：2012-06-06T23:15:11.877
> 
> 标签：spring, pom.xml

我刚刚使用 STS IDE 从 Spring Template 创建了一个简单的项目，但是 pom.xm 显示错误：

```
Multiple annotations found at this line:
    - Plugin execution not covered by lifecycle configuration: org.apache.maven.plugins:maven-resources-plugin:
     2.4.3:resources (execution: default-resources, phase: process-resources)
    - Plugin execution not covered by lifecycle configuration: org.apache.maven.plugins:maven-resources-plugin:
     2.4.3:testResources (execution: default-testResources, phase: process-test-resources) 
```

我花了很长时间寻找问题所在，但找不到解决方案，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T09:48:46.770

尝试在项目的根文件夹上运行 mvn eclipse:eclipse （您需要先下载 maven 并将其添加到类路径中）。

# android - NFC 门禁门锁系统/Nexus 作为 RFID 标签

> ID：10923626
> 
> 赞同：0
> 
> 时间：2012-06-06T23:15:57.287
> 
> 标签：android, nfc, rfid, nexus-s, nfc-p2p

我有一个宠物项目，主要是为我的房子构建一个 NFC 访问控制门锁系统。我最初想在我的 nexus 上复制我的办公室钥匙卡，但在我得知如果没有对安全元件的固件破解是不可能的，卡模拟是不可能的，我就碰壁了。我的问题是，如果我要创建自己的安全生态系统，将自己的 RFID 系统硬件安装到预先存在的电子锁中，即使没有访问安全元件，是否有什么阻止我将手机用作 RFID 标签？

简而言之，手机本身可以成为标签，而信息不在安全元素中吗？

我是否必须与读者建立 P2P 关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:32:16.833

您可以编写一个模拟 NFC 标签的应用程序。

假设你有一部**安卓**手机

```
NdefRecord record = new NdefRecord(...);
NdefMessage message = new NdefMessage(new NdefRecord[] {
    textRecord
});
NfcAdapter nfcAdapter = NfcAdapter.getDefaultAdapter(getContext());

if (nfcAdapter != null) {
    nfcAdapter.setNdefPushMessage(message, activity);
} 
```

[http://developer.android.com/reference/android/nfc/NfcAdapter.html](http://developer.android.com/reference/android/nfc/NfcAdapter.html)

这个[Android Ndef Push Example](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/nfc/ForegroundNdefPush.html)使用了旧版本的 API。

如果你有一个**Blackberry**，他们有一个类似的 API。

```
NDEFMessage message = /* create a message */;
virtualTag = new VirtualNDEFTag(message);
virtualTag.startEmulation(); 
```

[http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/io/nfc/emulation/VirtualNDEFtag.html](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/io/nfc/emulation/VirtualNDEFTag.html)

# jquery - 我尚未解决的与“悬停（或鼠标悬停）时获取元素 ID”帖子相关的问题

> ID：10923631
> 
> 赞同：0
> 
> 时间：2012-06-06T23:17:02.927
> 
> 标签：jquery

基本上这是我的功能：

```
function FillDivLeft(groups, side) {
 var cnt = 1;
 $.each(groups, function (index, groups) {
     $(side)
     .append(
         $(document.createElement('label')).attr({
             id: cnt + 'lbl',
             class: 'myClass'
         })
     );
     $('#' + cnt + 'lbl')
     .append(
         $(document.createElement('input')).attr({
             id: groups.GroupCode,
             type: 'checkbox',
             name: 'testGroup',
             class: 'leftClass'
         })
     );
     $('#' + groups.GroupCode).after
     (
         $(document.createElement('span')).text(groups.GroupName).attr({
             class: 'leftSpan'
         })
     );
     $('#' + cnt + 'lbl').after($(document.createElement('br')));
     cnt = cnt + 1;
 }); 
} 
```

我已经尝试了各种方法，尽管创建了新元素、分配了类等，但页面上的所有 jquery 函数似乎都不起作用，例如：

```
$('.leftSpan').click(function () {
    $('#lblOutput').text(this.id);
}); 
```

即使是父 div 上的悬停功能也不起作用。

我看不到可能的原因，因此将不胜感激任何帮助或指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T23:21:21.830

如果您使用的是 jQuery 1.7+，则需要使用“on”。您可以将“body”替换为元素的任何父 div

```
$('body').on('click','.leftSpan',(function () {
    $('#lblOutput').text(this.id);
}); 
```

仅使用 .click 函数需要在 dom 准备好时创建元素。它不会将事件附加到动态创建的元素上。如果您使用的是 jQuery 1.6 及以下版本，则必须改用 .live

您可以在此处阅读有关“开启”的更多信息[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T23:22:20.410

你试过`$(this)`代替`this`吗？或者使用`.attr('id')`而不是`.id`？

`$('.leftSpan').click(function () { $('#lblOutput').text($(this).attr('id')); });`

# perl - WWW::Mechanize 搜索即键入

> ID：10923634
> 
> 赞同：-1
> 
> 时间：2012-06-06T23:17:43.443
> 
> 标签：perl, forms, web-scraping

我正在尝试自动与具有未嵌入在表单中的“按您键入的搜索”搜索栏的网站进行交互。这是html的一部分：

```
<div id="search-box">
        <div class="form">
            <div class="input-outer">
                <div class="input-inner">
                    <input class="xblur" id="q" name="q" title="type to begin search" type="text" value="" />
                </div>
            </div>
            <div id="cancel" class="activated" title="Clear search">
            </div>
        </div> 
```

我可以处理表单，到目前为止脚本编写工作很好，但现在我似乎遇到了障碍......在这种情况下我如何进行搜索，最好使用`WWW::Mechanize`（但不同的模块左右也可以)?

非常感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:25:04.543

那么你需要在页面中执行JS吗？[Mozilla::Mechanize](http://search.cpan.org/perldoc?Mozilla%3a%3aMechanize) , [Win32::IE::Mechanize](http://search.cpan.org/perldoc?Win32%3a%3aIE%3a%3aMechanize)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T02:01:50.453

就故障排除而言，我建议将 Firebug 插件安装到 Firefox 中。转到搜索表单页面并启用 Firebug。确保控制台选项卡处于活动状态，以便您可以在键入时看到正在发生的事情。通过在与表单交互时观察 GET 或 POST 请求，您应该能够更好地了解 AJAX 正在发生的事情。

Firebug 还有一个箭头图标，您可以单击它然后选择页面元素以查看源代码。这对于获取页面加载*后创建的表单元素的名称非常方便。*

您还可以单击控制台中出现的请求以查看返回的请求和响应。这些信息可能非常有价值。

获得此信息后，您可以决定如何处理通过搜索表单。如果您可以看到哪些参数被发送到搜索表单，您最好发布到搜索目标，而不是填写表单并通过 mech 单击它。

```
$mech->post( $url, { foo => 'bar', name => 'value' } ); 
```

# animation - 如何设置 CATransformLayer 动画旋转中心

> ID：10923636
> 
> 赞同：1
> 
> 时间：2012-06-06T23:17:47.643
> 
> 标签：animation, ios4, rotation, catransformlayer

我有一个带有它的底层**的****视图**，我在视图的层中添加了一个**CATransformLayer**：

 ******[view.layer addSublayer:transformLayer];**

我添加的图层包含代表几个 3 维块的各个侧面的各种子图层。我想将动画应用于图层以旋转块。

```
CATransform3D rotation = CATransform3DMakeRotation(deg * M_PI / 180, x, y, z);
[CATransaction begin];

    [(CATransformLayer *)[pView.layer.sublayers objectAtIndex:0] setSublayerTransform:rotation];
        or (both seem to produce the same result)
    [(CATransformLayer *)[pView.layer.sublayers objectAtIndex:0] setTransform:rotation];

[CATransaction commit]; 
```

问题是图层大致围绕前角而不是立方体的中心旋转（例如，见下文）。

```
 / \                  / \        
   / \            / \ / \              / \ / \      
 / \ / \         |\ / \ /|            |\ / \ /|     
|\ / \ /|        | |\ /| |            | |\ /| |     
| |\ /| |         \| | |/ \    OR    / \| | |/      
|\| | |/|  ==>      \|/ \ / \      / \ / \|/        
|1|\|/|B|            |\ / \ /|    |\ /   /|         
 \|2|A|/             |A|\ /| |    | |\ /|2|         
   \|/                \|B| |/      \| |1|/          
                        \|/          \|/ 
```

A/B 标签应移至 1/2 位置，或 1/2 应移至 A/B，具体取决于旋转方向。相反，它从第一个图形改变，大致围绕前角旋转，导致与其他图形接近。上部未标记的块处于不同的视图中并且是静态的，因此不是旋转的一部分。较低标记的块位于我要设置动画的视图/图层中。

如何更改旋转中心以达到我想要的结果？

我已经为各个层弄乱了**anchorPoint**、**zPosition**、**anchorPointZ**，但没有成功。也尝试过**setSublayerTransform**，**setTransform**。

我应该弄乱块侧子层、变换层、视图层或视图本身的设置来实现我所追求的吗？

任何指导或方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T15:26:10.803

**更新：**

我终于意识到并接受了使用**Core Animation**无法做到这一点的事实。

我已经走上了使用**OpenGL**解决这个问题的道路。

* * *

这个问题随着我一点一点地改进而慢慢演变，但最终的结果是让父层成为**CATransformLayer**，它保留了 3D 透视图，并旋转了它。

至于旋转中心，我使用**CATransform3DMakeTranslation**来改变图层的位置。****

# ios - 核心数据：检索按日期分组的所有项目实体？

> ID：10923641
> 
> 赞同：0
> 
> 时间：2012-06-06T23:18:06.420
> 
> 标签：ios, core-data

我有一个名为 Item 的核心数据实体，它有一个日期字段。我想检索按日期分组的数据库中的所有项目，例如：

```
Item one, date: 1/1/11
Item two, date: 1/1/11
Item three, date: 1/2/11 
```

应该返回：

```
(Item one, Item two), (Item three) 
```

有人能告诉我最好的方法是什么吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:03:27.157

您可以做的最好的事情是订购它们，然后根据相同的日期创建分组。（注意：虽然我适当地使用了真实的函数名称，但这只是伪代码。自己填补空白，或者如果您需要更多帮助，请询问）

```
NSFetchRequest *request=[NSFetchRequest alloc init];
NSSortDescriptor *sort=[NSSortDescriptor sortDescriptorWithKey: @"foo" ascending:YES];
[request setSortDescriptors:[NSArray arrayWithObject:sort]];
//Fetch

NSMutableArray* master=[NSMutableArray array];
NSMutableArray* current=[NSMutableArray array];
NSDate *lastDate=[fetchedObjectsArray objectAtIndex:0].date;
forin(ManagedObjectSubclass *foo in fetchedObjectsArray)
{
//You'll need to figure out an algorithm to determine if two dates are the same.
//This code WILL NOT work as written.
    if(foo.date == lastDate)
    {
        [current addObject:foo];
    }
    else
    {
        [master addObject:current];
        current=[NSMutableArrayArrwayWithObject foo];
    }
}
[master addObject:current]; 
```

这应该足以让你开始。

# elasticsearch - 弹性搜索分析器和构面

> ID：10923642
> 
> 赞同：5
> 
> 时间：2012-06-06T23:18:15.953
> 
> 标签：elasticsearch, facets

我正在为客户评估 Elastic Search。我已经开始使用 API 并成功创建索引并将文档添加到搜索中。使用 Elastic Search 的主要原因是它提供了构面功能。

我无法理解分析器、标记器和过滤器以及它们如何与方面相适应。我希望能够使用关键字、日期、搜索词等作为我的方面。

我将如何将分析器合并到我的搜索中，以及如何将它与构面一起使用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T07:16:03.537

当 Elastic Search 默认索引一个字符串时，通常会将它们分解为标记，例如：“Fox jump over the wall”将被标记为单个单词，如“Fox”、“jump”、“over”、“the”、 “墙”。

那么这有什么作用呢？如果您使用 Lucene Query 搜索文档，您可能无法获得所需的字符串，因为 Elastic Search 会自动搜索标记化的单词而不是整个字符串，因此您的搜索结果将受到严重影响。

例如，如果您搜索“狐狸跳墙”，您将不会得到任何结果。相反，搜索“Fox”将为您提供结果。

分析**API**或分析术语告诉 Elastic Search***不要***对索引字符串进行标记，以便您可以正确搜索确切的字符串，这在您想要对整个字符串进行统计方面特别有用。

**标记器**只是将字符串标记为单个单词并将它们存储在 Elastic Search 中。如前所述，可以使用 Search API 查询这些令牌。

**过滤器**在您指定的特定条件下创建查询结果的子集，从而帮助您在搜索结果中区分您需要的内容和不需要的内容。

# java - 带有图标的溢出菜单项？

> ID：10923644
> 
> 赞同：0
> 
> 时间：2012-06-06T23:18:26.310
> 
> 标签：java, android

如果我单击“溢出”操作栏图标，我只会将我的菜单项视为文本，但不会显示图标！这是默认行为吗？如何强制显示图标？

如果您查看[http://developer.android.com/design/patterns/actionbar.html](http://developer.android.com/design/patterns/actionbar.html) >“共享数据”图像，至少似乎有可能在那里有图标。但是怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T23:24:01.400

> 这是默认行为吗？

是的。

> 如何强制显示图标？

AFAIK，你不能。这些图标用于操作栏项目（工具栏按钮）和经典选项菜单（例如，Android 2.x）。

> 如果您查看[http://developer.android.com/design/patterns/actionbar.html](http://developer.android.com/design/patterns/actionbar.html) >“共享数据”图像，至少似乎有可能在那里有图标。

那不是溢出。那是[一个`ShareActionProvider`](http://developer.android.com/reference/android/widget/ShareActionProvider.html). 您可以通过阅读[链接到的页面来判断](http://developer.android.com/design/patterns/actionbar.html)：

> 每当您的应用程序允许共享数据（例如图像或影片剪辑）时，请在操作栏中使用共享操作提供程序。共享操作提供程序旨在通过在包含其他共享选项的微调器按钮旁边显示最近使用的共享服务来加速共享。

# mongodb - 为什么 mongoCursor->key() 导致 php 崩溃？

> ID：10923646
> 
> 赞同：0
> 
> 时间：2012-06-06T23:18:32.457
> 
> 标签：mongodb, doctrine-orm, phpunit

我正在尝试在我的本地机器上运行学说\mongo-odm 的测试套件。php 在 is test: 上崩溃而没有错误消息（当我说崩溃时，我的意思是崩溃，php 进程终止）`Doctrine\ODM\MongoDB\Test\Functional\FilesTest::testFiles`。

测试内容如下：

```
public function testFiles()
{
    $image = new File();
    $image->setName('Test');
    $image->setFile(__DIR__ . '/file.txt');

    $profile = new Profile();
    $profile->setFirstName('Jon');
    $profile->setLastName('Wage');
    $profile->setImage($image);

    $this->dm->persist($profile);
    $this->dm->flush();

    $this->assertInstanceOf('Doctrine\MongoDB\GridFSFile', $image->getFile());
    $this->assertFalse($image->getFile()->isDirty());
    $this->assertEquals(__DIR__ . '/file.txt', $image->getFile()->getFilename());
    $this->assertTrue(file_exists($image->getFile()->getFilename()));
    $this->assertEquals('These are the bytes...', $image->getFile()->getBytes());

    $image->setName('testing');
    $this->dm->flush();
    $this->dm->clear();

fails here ===>>$image = $this->dm->find('Documents\File', $image->getId());
    $this->assertNotNull($image);
    $this->assertEquals('testing', $image->getName());
    $this->assertEquals('These are the bytes...', $image->getFile()->getBytes());
} 
```

我已经更深入地跟踪了`mongoCursor->key()`失败`Doctrine\MongoDB\Cursor::key()`。

我已经使用 MongoFiles 命令行工具在我的系统上测试了 Mongo Grid FS，它工作正常。

没有错误消息，我不知道在哪里看。有人有建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T11:36:33.807

在 1.2.11-dev 中有几个相关的错误修正。我可以使用 pecl/mongo v1.2.10 重现崩溃，但不能使用当前的 v1.2.11-dev。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:49:04.613

回到 1.2.9 也将解决您的问题

# php - 获取列值作为数组，Zend_Db，Mysql，php

> ID：10923651
> 
> 赞同：0
> 
> 时间：2012-06-06T23:19:02.397
> 
> 标签：php, mysql, zend-db

我有以下数据库表：

1.  **表：** `person` **列：** `id, first_name, age, city, state`
2.  **表：** `study` **列：** `id, name, description, notes`
3.  **表：** `person_studies` **列：** `person_id, study_id, notes`

我需要获取特定人员参与的所有研究名称：

```
person.id, person.first_name, person.city, study.name 
```

这是我为获取 a 的数据而编写的查询`person.id = 14`：

```
select person.id, person.first_name, study.name from person
left join person_studies on person.id = person_studies.person_id
left join study on person_studies.study_id = study.id 
where person.id=14; 
```

由于一个人可能参与多项研究，因此我在结果集中得到了不止一行。我需要使用 Zend_Db api 来实现它。

问题是：

```
    `$result = $this->fetchAll($select);` 

```

```
    [0] => 数组
    (
      [person.id] => 14
      [名字] =>杰米
      [study_names] => 数组
                       (
                          [0] => 生物技术；
                          [1] => 数学；
                          [2] => 航空；
                       )

    )

```

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:56:11.400

我找不到更好的方法来编写查询，但就第二个问题而言，我找到了以下使用**group_concat(** ) 的解决方案。

最终查询现在看起来像这样：

```
select person.id, person.first_name, person.city, person.state, group_concat(study.name separator '|') as studynames from person
left join person_studies on person.id = person_studies.person_id
left join study on person_studies.study_id = study.id 
where person.id=14; 
```

我们还可以在 group_concat 中指定其他子句，例如 distinct 。有关此条款的详细说明，请参阅链接[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T00:06:28.633

查询看起来不错，尽管您似乎错过了其中一列（假设您实际上需要使用 person.city）：

```
select person.id, person.first_name, person.city, study.name from person
left join person_studies on person.id = person_studies.person_id
left join study on person_studies.study_id = study.id 
where person.id=14; 
```

代替：

```
select person.id, person.first_name, study.name from person
left join person_studies on person.id = person_studies.person_id
left join study on person_studies.study_id = study.id 
where person.id=14; 
```

至于结果，我不知道有什么方法可以直接将其格式化为您想要的格式。如果你不介意一点代码，你可以尝试获取你得到的结果并格式化它们。假设您使用的是 PDO（通常与 Zend 一起使用），它看起来像这样：

```
$statement = $db->query(<<query from above goes here>>);
$result = $statement->fetchAll(PDO::FETCH_ASSOC);

$personStudies = array();

foreach($result as $row)
{
    $personId = $row['person.id'];
    $studyName = $row['name'];
    $personStudies[$personId]['first_name'] = $row['first_name'];
    $personStudies[$personId]['study_names'][] = $studyName;
}

foreach($personStudies as $personId=>$person)
{
    $formattedRow = array();
    $formattedRow['person.id'] = $personId;
    $formattedRow['first_name'] = $person['first_name'];
    $formattedRow['study_names'] = $person['study_names'];

    $formattedResults[] = $formattedRow;
} 
```

并且`$formattedResults`应该看起来就像你指定的那样。否则，您可以分两部分进行查询：

```
$statement = $db->query('SELECT person.first_name FROM person WHERE person.id=14 LIMIT 1');
$person = $statement->fetch(PDO::FETCH_ASSOC);
$name = $person['first_name'];

$statement = $db->query('SELECT study.name FROM person_studies, study WHERE person_studies.study_id = study.id AND person_studies.person_id=14'); // Same as a left join
$studyNames = $statement->fetch(PDO::FETCH_COLUMN, 0);

$formattedRow = array();
$formattedRow['person.id'] = 14;
$formattedRow['first_name'] = $name;
$formattedRow['study_names'] = $studyNames;
$formattedResults[] = $formattedRow; 
```

这应该给出相同的结果。我没有测试过代码，但它应该接近你需要的。

# java - Roboguice 和 Sherlock 在一起？

> ID：10923654
> 
> 赞同：1
> 
> 时间：2012-06-06T23:19:55.497
> 
> 标签：java, android, actionbarsherlock, roboguice

我正在尝试将 Roboguice 与 Sherlock 一起使用。但是扩展时甚至无法启动我的Testapp`RoboSherlockFragmentActivity`

我是否必须考虑我可能错过的任何事情？

```
06-06 10:23:59.700: I/dalvikvm(917): Failed resolving Lcom/github/rtyley/android/sherlock/roboguice/activity/RoboSherlockFragmentActivity; interface 1352 'Lroboguice/util/RoboContext;'
06-06 10:23:59.700: W/dalvikvm(917): Link of class 'Lcom/github/rtyley/android/sherlock/roboguice/activity/RoboSherlockFragmentActivity;' failed 
```

# jquery - 如何检查变量是否是Javascript中的超时？

> ID：10923655
> 
> 赞同：2
> 
> 时间：2012-06-06T23:19:59.007
> 
> 标签：jquery, settimeout

我决定将此代码包含在一个对象中，以将其与将应用的区域分开。非常感谢这里的任何建议：

**appConfig.loadElement 和 appConfig.cerrorElement 是这些 HTML 元素：**

```
<div id="loading" style="display:none;">Loading...</div>
<div id="cerror" style="display:none;">Connection Error.</div>

var loadingTimeoutInstance = null, cerrorTimeoutInstance = null,
    requestObj = {
    reset: function() {
        $(appConfig.loadElement).hide();
        $(appConfig.cerrorElement).hide();
        clearTimeout(loadingTimeoutInstance);
        clearTimeout(cerrorTimeoutInstance);
    },
    initiate: function() {
        loadingTimeoutInstance = setTimeout(requestObj.timeout, appConfig.loadingDelayMS);
    },
    timeout: function () {
        clearTimeout(loadingTimeoutInstance);
        $(appConfig.loadElement).show();
        cerrorTimeoutInstance = setTimeout(requestObj.cerror, appConfig.cerrorDelayMS);
    },
    cerror: function () {
        clearTimeout(cerrorTimeoutInstance);
        $(appConfig.loadElement).hide();
        $(appConfig.cerrorElement).show();
    }
} 
```

一个实现是这样的：

发出异步请求时：

```
requestObj.reset();
requestObj.initiate(); 
```

返回响应后：

```
requestObj.reset(); 
```

我发现的问题主要在 requestObj.reset() 中： - 如果元素已经隐藏，为什么还要隐藏它们？- 如果尚未将超时变量（loadingTimeoutInstance 和 cerrorTimeoutInstance）设置为超时，则无法清除它们 - 这会导致它无法工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T23:21:51.877

您实际上不需要检查它是否属于某种类型......只是它是。

`if(cerrorTimeoutInstance) clearTimeout(cerrorTimeoutInstance);`

# android - 具有多个 SurfaceView 的 MediaPlayer

> ID：10923659
> 
> 赞同：1
> 
> 时间：2012-06-06T23:20:15.770
> 
> 标签：android, surfaceview, android-mediaplayer

我有一个充当服务的媒体播放器，并且想更改显示表面视图并让视频在不同的活动中继续播放。

在文档中，它声明我可以在媒体播放器的任何状态下调用 setDisplay，并且在 ICS 上设置显示时，我会得到一个闪烁的视频图像。我看到视频的唯一方法是稍微拉下通知栏或执行一些导致像素被绘制的动作，比如改变音量。

设置很简单... 活动 A | 绑定到服务实例化媒体播放器附加表面并播放视频。单击活动 A 中的链接，打开活动 B... 绑定到服务，确保视频当前正在播放并将显示设置为不同的表面视图。

我尝试将surfaceview的可见性设置为不可见/在以前的活动中消失...首先调用 setDisplay(null) ....暂停然后恢复视频..并关闭绘图缓存。

任何帮助或建议将不胜感激。

编辑： android 上的视频绝对可怕。MediaPlayer 对象应该为可以检查的状态保存一个私有变量。错误代码也非常模糊。VideoView 本身没有帮助，除非您想播放视频，仅此而已。基本上，操纵表面视图绝非易事，我假设这是因为表面视图的绘制方式与常规视图不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-02T13:08:40.523

您应该使用 TextureView 进行显示，并使用 mediaPlayer.setSurface 而不是 mediaPlayer.setDisplay。

从 Activity A 调用简单的 Activity B 并传递视频位置参数。在活动 B 中 - 当表面可用时，将其设置到 MediaPlayer 并点击开始。

我看不出它有任何失败的原因，除非您丢失的媒体播放器发生了一些事情。

是的，Android 很糟糕（不仅在处理视频方面）。

这是我的 VideoFullScreenActivity 代码

```
public class FullScreenVideoActivity extends AppCompatActivity implements TextureView.SurfaceTextureListener {

    private EventBus bus = EventBus.getDefault();
    private CustomVideoView mAdapterVideoPlayer;
    private TextureView mFullScreenTextureView;
    private RelativeLayout container;
    private boolean mIsPortrait;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_full_screen_video);

        container = (RelativeLayout) findViewById(R.id.container);

        mFullScreenTextureView = (TextureView) findViewById(R.id.fullscreen_texture_surface);
        mFullScreenTextureView.setSurfaceTextureListener(this);
    }

    @Override
    protected void onResume() {
        super.onResume();
        if (!bus.isRegistered(this))
            bus.register(this);
    }

    @Override
    protected void onStop() {
        super.onStop();
        if (bus.isRegistered(this))
            bus.unregister(this);
    }

    @Override
    public void onBackPressed() {
        super.onBackPressed();
        if (mAdapterVideoPlayer != null)
            mAdapterVideoPlayer.setSeekPosition(PiplMediaPlayer.getInstance().getCurrentPosition());
    }

    @Subscribe(threadMode = ThreadMode.MAIN)
    public void fullscreen(VideFullscreenParams videFullscreenParams) {
        this.mAdapterVideoPlayer = videFullscreenParams.customVideoView;

        mIsPortrait = videFullscreenParams.customVideoView.getWidth() < videFullscreenParams.customVideoView.getHeight();
        if (mIsPortrait)
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    }

    @Override
    public void onSurfaceTextureAvailable(SurfaceTexture surface, int width, int height) {
        CustomMediaPlayer.getInstance().changeSurface(new Surface(surface));
        CustomMediaPlayer.getInstance().prepareController(container);
        CustomMediaPlayer.getInstance().setControllerTouchView(mFullScreenTextureView);
        CustomMediaPlayer.getInstance().start();
    }

    @Override
    public void onSurfaceTextureSizeChanged(SurfaceTexture surface, int width, int height) {
    }

    @Override
    public boolean onSurfaceTextureDestroyed(SurfaceTexture surface) {
        return false;
    }

    @Override
    public void onSurfaceTextureUpdated(SurfaceTexture surface) {
    }

    public static class VideFullscreenParams {

        private final CustomVideoView customVideoView;

        public VideFullscreenParams(CustomVideoView customVideoView) {
            this.customVideoView = customVideoView;
        }
    }
} 
```

如您所见，我还使用了一个名为 CustomMediaPlayer 的类。这是一个封装 MediaPlayer 并在整个应用程序中管理其生命周期的单例。如果您在 RecyclerView 或 LinearLayout 中加载多个视频，这是必须的。

# google-analytics - 你如何添加谷歌分析

> ID：10923664
> 
> 赞同：-1
> 
> 时间：2012-06-06T23:20:57.850
> 
> 标签：google-analytics

我按照[说明进行操作](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1042508)，但“+ 新网络资产”到底在哪里？

这是我点击管理选项卡并选择帐户后的样子： [![](../Images/4c47f86ce4f9c296c3ac65c6ce4c7cb8.png "由 imgur.com 主办")](https://imgur.com/C5kMI)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:48:32.690

只需转到顶部工具栏中的管理并选择跟踪代码选项卡。我会为你附上一张图片。页面上有更多说明。 ![在此处输入图像描述](../Images/7571d316678a767c0894e6f9602a65c3.png)

编辑：要进入此窗口，您首先必须单击属性并拉起该仪表板。每个配置文件都有不同的跟踪 ID。拉起个人属性后，您可以单击管理员，然后选择跟踪代码选项卡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:32:17.043

你可能没有足够的特权。

# php - 使用 PHP 和 MySQL 管理大量读取和写入

> ID：10923670
> 
> 赞同：1
> 
> 时间：2012-06-06T23:21:38.757
> 
> 标签：php, mysql, database, scale

我有几张桌子：

```
media: id, name, score
media_rating: id, value, media_id, user_id 
```

用户对网站和系统进行评级：

1.  创建新闻 media_rating 记录
2.  通过 media_rating 的值增加适当媒体上的分数

问题：每秒有 500 到 1000 条新记录的媒体收视率。我需要从媒体中阅读以向用户提供媒体以进行评分，但我觉得该表完全被所有正在创建的新 media_rating 的分数更新所轰炸。请求像疯了一样失败。

我怎样才能使这个东西规模化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T23:39:17.493

Your second step is in fact not necessary, as you have the data already available with a simple query (something like `SELECT COUNT(*) FROM media_rating WHERE media_id = x`). Although this saves you from a lot of updates, it *could* create another problem, as every time you want your users to present the rating you'd need a count. A count isn't necessary extensive, so it might save you some (as you have to query the database anyway when retrieving the current rating). If it still gives you problems, you could 'delay' the rating count; update the `score` only once in a while (with either a cronjob or poormans-cron)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T23:28:17.907

也许完全避免使用 MySQL 可能是答案。我在过去使用 Redis (http://redis.io/) 做类似的事情时取得了巨大的成功。阅读文档（http://redis.io/documentation），它可能会引导您朝着正确的方向前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T23:56:19.987

将其视为网络分析问题可能会导致您走上一些有用的道路...例如仅记录实际评级的样本...

[在 PHP/MySQL 中计算页面浏览量的最佳方法是什么？](https://stackoverflow.com/questions/4762527/what-is-the-best-way-to-count-page-views-in-php-mysql)

# php - 将变量传递给 PHP 文件下载脚本

> ID：10923671
> 
> 赞同：1
> 
> 时间：2012-06-06T23:21:41.927
> 
> 标签：php, download

这是我的主要表格和下载脚本。我需要将一些变量传递给download.php。这些变量来自 html 选择列表。如何将这些变量传递给 download.php？这是我的主要形式 -

```
<td align="left"><select name="loc" id="loc" class="select-list">
    <option value="\">Choose</option>                                       
    <option value="aa">AA</br>
    <option value="bb">BB</br>
    </select>   
</td>
<strong>Click below to download:</strong> </br></br>
<span class="button" ><a href="download.php">Download (CSV)</a></span> 
```

这是我的 download.php 代码-

```
header("Content-Disposition: attachment; filename=table.csv");
header("Content-type: text/csv");
$query = "SELECT * FROM table";
echo $out;
exit; 
```

现在我想将选择列表中的选定值传递给 download.php，以便我可以在我的 MYSQL SELECT 查询中使用谓词。

请问有什么输入吗？？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T23:26:10.690

不完全确定这是否是您的意思，但希望它有所帮助。

您需要使用带有服务器端 PHP 的 HTML 表单来处理输入。尝试查看[w3schools 的教程](http://www.w3schools.com/php/php_forms.asp)。这是一个（非常基本的）示例：

在表格中：

```
<form action="download.php" method="post">
<select name="loc" id="loc" class="select-list">
<option value="\">Choose</option>                                       
<option value="aa">AA</br>
<option value="bb">BB</br>
</select>   
<input type="submit" value="Download" />
</form> 
```

在下载.php 中：

```
<?php
$val=$_POST['loc']; //this equals either aa or bb
if($val == 'aa') {
  // do whatever 
} else if($val == 'bb') {
  // do whatever
} else {
  echo "Error";
}
?> 
```

此外，请确保清理数据库查询并初始化数据库。[w3schools 链接](http://www.w3schools.com/php/php_mysql_intro.asp)

# windows-phone-7 - WP7 PanoramaItem 绑定第二个 PanoramaItem

> ID：10923676
> 
> 赞同：1
> 
> 时间：2012-06-06T23:22:11.433
> 
> 标签：windows-phone-7, binding, mvvm

我正在使用 Panorama WP7 项目，我无法将我的视图模型绑定到我的视图。因为我的视图是全景图，所以我想为第一个 PanoramaItem 设置一个视图模型，为第二个 PanoramaItem 设置第二个视图模型。

如果我将 x:Name 属性赋予 PanoramaItems，我可以让它工作，但我尽量不这样做，因为 MVVM 不鼓励使用 x:Name 属性。我尝试过的替代方案没有奏效。将整个全景图的 DataContext 设置为一个视图模型很容易，但是我没有第二个全景图所需的数据。如果我尝试将 DataContext 分配给该项目 Loaded 事件处理程序中的每个 PanoramaItem，我可以通过 Loaded 事件处理程序中的 sender 参数获取对 PanoramaItem 的引用，但编译器会为第二个 Loaded 事件处理程序引发错误 - 显然你无法将 Loaded 事件分配给一个全景图中的两个全景项目。就此而言，我无法将任何事件分配给第二个 PanoramaItem。

任何人都可以帮忙吗？

谢谢，安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T01:28:53.813

好的，我想通了。可以使用 Panorama 的 Loaded 事件中的 sender 对象将 DataContext 分配给 Panorama 中的 PanoramaItems，如下所示：

```
private void HomeViewPanorama_Loaded(object sender, RoutedEventArgs e)
    {
        App.VM1 = new ViewModel1();
        App.VM2 = new ViewModel2();

        if (!App.VM1.IsDataLoaded)
        {
            App.VM1.LoadData();
        }

        if (!App.VM2.IsDataLoaded)
        {
            App.VM2.LoadData();
        }

        Panorama panorama = sender as Panorama;
        PanoramaItem Item1 = panorama.Items[0] as PanoramaItem;
        Item1.DataContext = App.VM1;

        PanoramaItem Item2= panorama.Items[1] as PanoramaItem;
        Item2.DataContext = App.VM2;
    } 
```

在此示例中，您必须知道您的 PanoramaItems 将是什么，它们不是动态的，但此方法可让您避免在 XAML 中对控件进行 x:Name 命名。

# c++ - C++ 方法声明

> ID：10923677
> 
> 赞同：0
> 
> 时间：2012-06-06T23:22:20.270
> 
> 标签：c++

> **可能重复：**
> [初始化列表的好处](https://stackoverflow.com/questions/1598967/benefits-of-initialization-lists)

过去几天我一直在学习 C++，我看到了两种我无法确定两者优缺点的格式。希望有人可以在这里帮助我。

第一个变量被初始化为*`var(value)`*

```
class Foo
{
    public:
        Foo(): itsVar1(2), itsVar2(345){}

    private:
        int itsVar1;
        int itsVar2;      
}; 
```

第二个是用赋值运算符初始化的*`var = value`*。

```
class Foo
{
    public:
        Foo()
        {
            itsVar1 = 2;
            itsVar2 = 345;
        }

    private:
        int itsVar1;
        int itsVar2;
}; 
```

一个比另一个有优势吗？是个人喜好吗？
第一种样式（？）对我来说看起来更令人困惑。看起来您正在调用一个方法并传入该值。看起来很含蓄；而第二种方法非常明确，作为来自 Python 的人“显式优于隐式”，我更喜欢第二种方法。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T23:24:37.133

前一种表示法将在构造函数调用之前初始化成员。在初始化所说的内容之前，不会在构造函数内部执行任何操作。如果存在继承，则在当前构造函数调用之前，将在此处调用父类的构造函数。

同样，我认为构造函数的显式和隐式声明在 c++ 中与 python 不同。当你的构造函数只有一个参数不是类本身的类型时（构造函数不是复制构造函数），它可以用于类型转换。当您将**显式**放在构造函数的名称之前时，您告诉编译器未经我的明确许可不会转换任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T23:44:07.913

尽可能使用初始化列表（第一种样式）。这样做的主要原因是：

1.  *不*使用初始化列表会使保证异常安全变得更加困难。为您的类成员变量使用 RAII 类以及初始化列表，可以轻松保证您的构造函数在面对成员变量的构造函数抛出的异常时不会泄漏资源。

2.  赋值并不比初始化列表更好。如果成员变量类型是非平凡的，那么赋值实际上会执行得更差。使用初始化器，成员变量将在适当的位置构造，并且不会发生默认构造。使用赋值可以让所有成员变量首先成为默认构造。

3.  初始化列表是将值分配给引用和 const 成员变量的唯一方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T23:32:57.720

当构造函数声明为

```
 Foo(): itsVar1(2), itsVar2(345){} 
```

这意味着变量“itsVar1”“和itsVar2”在创建其局部变量成员（即itsVar 和itsVar2）时被初始化。这种初始化方法称为初始化列表。在用户定义类型的情况下，这样的初始化将调用用户定义类型的复制构造函数。更多信息请访问：[http ://en.wikipedia.org/wiki/Initialization_(programming)#Initializer_list](http://en.wikipedia.org/wiki/Initialization_(programming)#Initializer_list)

当构造函数定义为

```
 Foo()
    {
        itsVar1 = 2;
        itsVar2 = 345;
    } 
```

构造函数创建内存并且不初始化成员变量 itsVar1 和 itsVar2。一旦创建成员并且控制流入构造函数的主体，它们就会被分配一个值。

使用初始化列表的优点是成员变量不会被调用两次（一次在创建期间，另一次在赋值期间）。成员变量的创建和初始化同时发生。如果您的初始化程序列表中有许多变量，那么在调用构造函数时您会比其他方法获得轻微的性能优势。

# .net - 任何弱实习集合（对于不可变对象）

> ID：10923682
> 
> 赞同：9
> 
> 时间：2012-06-06T23:22:38.260
> 
> 标签：.net, immutability, weak-references, string-interning

在某些涉及不可变对象的情况下，可能会出现许多语义相同的不同对象。一个简单的例子是将文件中的多行文本读入字符串。从程序的角度来看，两行具有相同的字符序列这一事实是“巧合”，但从程序员的角度来看，可能会出现大量重复。如果许多字符串实例是相同的，则将对这些不同实例的引用更改为对单个实例的引用将节省内存，并且还有助于它们之间的比较（如果两个字符串引用指向同一个字符串，则无需执行字符-逐字符比较以确定它们是否相同）。

对于某些情况，系统提供的字符串实习工具可能很有用。但是，它有几个严重的限制：

1.  一旦一个字符串被实习，这个实习副本将永远存在，无论是否存在对它的任何其他引用
2.  字符串实习工具仅适用于字符串，不适用于任何其他不可变类型。

如果存在一个 true `WeakDictionary<ImmutableClassType, ImmutableClassType>`（对于每个元素，键和值都是相同的），代码可以执行以下操作：

```
if (theDict.TryGetValue(myString, ref internedString))
  myString = internedString;
else
  theDict[myString] = myString; 
```

不幸的是，我不知道.net 中有任何内置`WeakDictionary<keyType, valType>`类。此外，为每个项目的键和值生成弱引用似乎很浪费，因为这两个引用总是指向同一事物。

我已经阅读了一些关于的内容`ConditionalWeakTable`，这听起来像是一个有趣的类，但我认为它在这里不可用，因为目标是能够获取一个实例并找到另一个在语义上等效的独立实例。

对于类的实例将具有明确定义的生命周期的情况，使用常规`Dictionary`来合并相同的实例可能是合理的。然而，在许多情况下，可能很难知道什么时候`Dictionary`应该放弃这样的物品或清理其中的物品。基于实习的`WeakReference`集合将避免此类问题。这样的事情是否存在，或者它是否可以很容易地实施？

**附录** 正如 svick 所指出的，a`Dictionary<WeakReference, WeakReference>`会有些问题，因为没有实用的方法来定义`IEqualityComparer`一个活`WeakReference`的返回`GetHashCode`其目标的值，而死的继续返回该值。可以定义一个结构，该结构将包含一个整数目标哈希码值（在构造函数中设置），并且其自己的`GetHashCode`将返回该整数。一个轻微的改进可能是使用 a`ConditionalWeakTable`将 的目标链接`WeakReference`到可用于将表项排入队列以进行删除的可终结对象。

我不确定在急切地清理字典与采取更被动的方法（例如，如果自上次扫描以来至少有一个 GC，则在添加项目时执行扫描，以及数量自上次扫描以来添加的项目数超过了幸存的项目数）。浏览字典中的所有内容不会是免费的，但 ConditionalWeakTable 可能也不会是免费的。

**PPS** 我正在考虑的另一个概念，但我认为它可能不如弱实习方法有用，它是让一个逻辑上不可变的类型拥有一个可变的“时间戳”值，并有一个接受的比较方法它的论点由`ref`. 如果发现两个不同的实例相等，则将检查它们的时间戳值。如果两者都为零，则将从全局计数器（-1、-2、-3 等）为它们分配连续的负数。具有（或分配）较低时间戳值的参数将被另一个替换。

使用这种方法，如果许多对象实例被重复地相互比较，许多引用将被替换为对“旧”实例的引用。根据使用模式，这可能会导致大多数相同的对象实例在不使用任何类型的实习字典的情况下被合并。然而，对嵌套对象应用这种方法将需要“不可变”对象允许嵌套对象引用被变异以指向其他假定相同的嵌套对象。如果“假定相同”的对象总是存在，这应该没问题，但如果不是，可能会导致相当奇怪的不当行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T18:18:45.453

您可以使用自定义相等比较器创建类似的东西`Dictionary<WeakReference, WeakReference>`，并在适当的时候修剪那些不再存在的东西。一个问题是如何`WeakRefrence`从字典中删除一个死的，因为你不能通过引用相等（记住，你必须使用自定义相等比较器）或索引来删除它。可能的解决方案是创建一个继承自`WeakReference`并具有正确哈希码的类型，即使引用已失效。或者你可以将它包装在一个自定义的`struct`.

但正如你所说，如果每个引用在它死后立即从字典中删除，那就太好了。我认为这样做的唯一方法是以某种方式使用终结器。但是如果您不想（或不能）修改字典中的类型，这将变得相当复杂。

基本思想是您将拥有与上述相同的弱引用字典（关于如何删除项目的警告仍然适用），但您还使用`ConditionalWeakTable`. 在该终结器中，您将从字典中删除该项目。由于`ConditionalWeakTable`工作原理，如果字典中的一个项目被 GCed，附加的对象也会，这意味着它的终结器将被调用，因此该项目将从字典中删除

# php - PHP For循环中的if语句不起作用

> ID：10923686
> 
> 赞同：0
> 
> 时间：2012-06-06T23:23:37.587
> 
> 标签：php

我正在尝试将 CSS 类“选择”添加到创建的第一个手风琴按钮 div。为什么这不起作用？

```
// Create nav from database
                $chapter_array = get_chapter_names();

                for ($i=0; $i < sizeof($chapter_array); $i++) { 
                    if($i == 0) {
                        $selected = 'selected';
                    }
                    echo '<div class="accordionButton '.$selected.'">'.$chapter_array[$i].'</div>';

                    $page_id_array = get_page_ids($i);

                    echo '<div class="accordionContent">';
                    for ($j=0; $j < sizeof($page_id_array); $j++) { 
                        $page_name = get_page_name($page_id_array[$j]);
                        echo '<a href="?page_id='.$page_id_array[$j].'">'.$page_name.'</a><br />';
                    }
                    echo '</div>';
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T23:26:16.497

在第一个 div 之后你永远不会`$selected`退缩，所以这会将那个类添加到每个 div 中，因为`$selected`总是包含 string `'selected'`。

您可以在 if 语句之前将其设置为空字符串：

```
$selected = '';
if($i == 0) {
    $selected = 'selected';
} 
```

如果你更喜欢这个，你也可以把它写成一个很好的三元表达式：

```
$selected = $i == 0 ? 'selected' : ''; 
```

# django - 将 FileField django 验证为有效的 pdf

> ID：10923687
> 
> 赞同：1
> 
> 时间：2012-06-06T23:23:39.390
> 
> 标签：django, django-models

我是 django 的新手，希望你能指导我，我有一个这样的模型定义：

```
class Documents(models.Model): 
    name = models.CharField(max_length=255)
    date = models.DateField()
    path = models.FileField(upload_to='documents/') 
```

但我需要将其验证为有效的 PDF 文件，你能指导我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:57:01.180

您应该在上传时验证文件。这是使用自定义模型字段的简单解决方案：http: [//djangosnippets.org/snippets/2206/](http://djangosnippets.org/snippets/2206/)

所以你的代码是：

```
...
path = ContentTypeRestrictedFileField(
    upload_to='documents/',
    content_types = ['application/pdf'])
.... 
```

即使您想创建更复杂的验证，这也是一个好的开始，因为我猜这个只使用文件扩展名检查。

# python - 成对计算的高效算法

> ID：10923689
> 
> 赞同：1
> 
> 时间：2012-06-06T23:23:51.103
> 
> 标签：python, algorithm, data-structures

我有一个代理列表`a = {a1, a2, a3,..., an}`，其中每个代理可以与零个或多个其他代理配对。例如，对于`n = 6`，我可以有：

```
a1: a2, a3, a5
a2: a1, a3, a4
a3: a1, a2\. a5
a4: a2
a5: a1, a3
a6: 
```

每一对相互交互，并且每个代理作为交互的结果获得一个值（例如，他们可以玩游戏，但交互的细节可以在这里抽象掉）。**我对基于给定的成对结构**（例如上述）计算和存储这些交互的结果感兴趣。

显然，一个简单的算法将遍历每个代理，然后逐个计算与他的每个交互伙伴的成对交互。**然而，同样明显的是，这种方法会重复一些（或可能很多）计算。**使用上面的示例：

当我们完成 agent`a1`时，我们已经获得了、 和的结果`(a1, a2)`，因此当我们对 agent 、和进行计算时，这些对之间的后续计算就变得多余了，`(a1, a3)``(a1, a5)``a2``a3``a5`

一种改进的算法是在两个维度（即沿着代理本身和沿着它们各自的伙伴）按升序对输入结构进行排序，如上例所示，因此对于每个代理（例如`a3`），我们只需要计算该代理 ( `a3`) 与比他“更高”的代理 ( )`a5`之间的交互，因为我们知道他与“下”伙伴 ( `(a1, a3)`, `(a2, a3)`) 之间的交互已经计算过了。

我想知道这个问题是否有不同的更好的算法？更好，我的意思是在时间和空间方面更有效的计算。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T01:12:54.880

是的，这会尝试将每一对添加到集合中两次，但我觉得这可能比条件更有效。有人想尝试为替代方案计时吗？

```
agents = {
    'a1': ['a2', 'a3', 'a5'],
    'a2': ['a1', 'a3', 'a4'],
    'a3': ['a1', 'a2', 'a5'],
    'a4': ['a2'],
    'a5': ['a1', 'a3'],
    'a6': []
}
pairs = {(k,v) for k in agents for v in agents[k]} 
```

这仍然是 O(n)，所以在效率方面胜过任何涉及排序的事情

通过使用，您可能会获得轻微的加速

```
pairs = {(k,v) for k,vs in agents.iteritems() for v in vs} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T23:42:08.333

您可以将代理 ID 与以下内容进行比较：

```
agents = {
    'a1': ['a2', 'a3', 'a5'],
    'a2': ['a1', 'a3', 'a4'],
    'a3': ['a1', 'a2', 'a5'],
    'a4': ['a2'],
    'a5': ['a1', 'a3'],
    'a6': []
}

interactions = []
for agent, connections in agents.iteritems():
    interactions.extend((agent, connection) for connection in connections if agent < connection)

print interactions
# [('a1', 'a2'), ('a1', 'a3'), ('a1', 'a5'), ('a3', 'a5'), ('a2', 'a3'), ('a2', 'a4')] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T23:28:13.673

[itertools](http://docs.python.org/library/itertools.html#itertools.combinations)救援

```
>>> from itertools import combinations
>>> agents=['a1','a2','a3','a4','a5']
>>> list(combinations(agents, 2))
[('a1', 'a2'), ('a1', 'a3'), ('a1', 'a4'), ('a1', 'a5'), 
 ('a2', 'a3'), ('a2', 'a4'), ('a2', 'a5'),
 ('a3', 'a4'), ('a3', 'a5'),
 ('a4', 'a5')]
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T23:41:05.520

据我了解您的问题，您为什么不考虑二维矩阵？在第一阶段，如果两个代理可以相互合作，只需将交叉单元设置为 1。在第二阶段，只需围绕矩阵设置一个循环，并仅在那些具有互连的代理之间计算一些值（即单元格等于 1）。而不是 1 会有一个真正的价值。所以在那种情况下，你不需要做多余的计算。唯一多余的部分是在矩阵中填充计算值两次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T15:38:26.993

基于@gnibbler的回答，我想出了这个：

```
agents = {
    'a1': ['a2', 'a3', 'a5'],
    'a2': ['a1', 'a3', 'a4'],
    'a3': ['a1', 'a2', 'a5'],
    'a4': ['a2'],
    'a5': ['a1', 'a3'],
    'a6': []
}

pairs = {tuple(sorted((k,v))) for k in agents for v in agents[k]} 
```

仍然需要排序，但仅限于一对。

# ios - App Store 上的唯一名称

> ID：10923696
> 
> 赞同：1
> 
> 时间：2012-06-06T23:24:44.520
> 
> 标签：ios, app-store

以 iOS App Store 上的两个应用程序为例：“Witness”和“Witness Remote”。但是，如果您同时下载它们，您会注意到它们实际上在 iPhone 上都仅命名为“Witness”。

那么，当 Apple 说应用程序名称必须是唯一的时，他们只是在谈论应用程序在商店中出现的名称，而不是在设备上安装时的**实际名称吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T23:40:09.657

当它安装在您的 iOS 设备上时，显示在应用程序图标下方的名称实际上是“捆绑显示名称”（在应用程序的 plist 中指定）。这可能与 App Store 中的 App 名称不同 - 如果 App Name 太长而无法放入图标下方的空间，开发人员通常会使用 App Name 的缩短版本。正如您所注意到的，应用程序的名称必须是唯一的，但是捆绑显示名称（即用户在安装应用程序后看到的名称）不需要如此。

# android - 模拟 VolumeDown + 电源按钮以从我的 Android 服务中以编程方式捕获屏幕

> ID：10923697
> 
> 赞同：2
> 
> 时间：2012-06-06T23:24:50.897
> 
> 标签：android

在 Android Ice Cream Sandwich 版本中，组合键 VolumeDown+Power 按钮可以截屏。我试图通过从后台android服务发送关键事件以编程方式做同样的事情。但是有2个问题，

1.  我必须按住 VolumeDown 键，直到按下电源按钮，但我没有找到任何仪器 api sendKeysSync() 等。它只发送按钮\keycode 的 Key down 事件。
2.  发送 KEYCODE_POWER 根本不起作用。

请让我知道这些是否是由于各种原因在 Android ICS（冰淇淋三明治）版本本身中的限制，或者是否有可能？

另外，如果有任何其他方法可以在不植根手机的情况下从后台进行屏幕捕获，请告诉我..

-Thx 进阶 -rahul

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:57:15.283

不允许服务将事件（键、触摸等）注入到活动中。这是系统设计人员做出的选择，以防止软件将设备的“控制权”从用户手中夺走。

如果在后台运行的软件能够做到这一点，那么做令人难以置信的恶意事情就很容易了。

# php - Jquery - 处理来自 PHP 的登录响应

> ID：10923699
> 
> 赞同：0
> 
> 时间：2012-06-06T23:24:59.350
> 
> 标签：php, jquery, login

简单地说，用户可以登录我的网站。

```
$('#login').click(function() {
    var user = $('#username').val();
    var pass = $('#password').val();
    $.ajax({
        type: "POST",
        url: "authorize.php",
        data: { username: user, password: pass },
        success: function(data) {
            $('#data').html(data);
        }
    });
}); 
```

`success:`无论登录是否有效，ajax都会触发，对吗？它不进行服务器端处理。我如何`authorize.php`与用户登录失败的 Jquery 脚本通信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T23:30:26.370

在你的 php 中这样做：

```
// your authentication magic here
if($user->authenticated) {
    $return = array('status' => 'loggedIn');
} else {
    $return = array('status' => 'failed');
}
echo json_encode($return); 
```

然后在您的 ajax 调用中添加设置`dataType: 'json'`：：

```
$.ajax({
    type: "POST",
    url: "authorize.php",
    data: { username: user, password: pass },
    dataType: 'json', // NOTE this line
    success: function(data) {
        alert(data.status); // says 'loggedIn' or 'failed'
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T23:30:10.160

您的返回数据中应该包含某种成功或失败项。例如，如果您使用 JSON，则数据可能是 { "loginResponse" : "failed" } 或类似的。成功事件仅表明您的 ajax 调用成功执行并接收到不是 HTTP 错误的响应。不要将其与程序流程混淆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T23:30:10.727

在行中：

```
success: function(data) { 
```

数据有文本从服务器回显。

# jquery - as3调用jQuery函数

> ID：10923705
> 
> 赞同：0
> 
> 时间：2012-06-06T23:25:43.490
> 
> 标签：jquery, actionscript-3, flash, z-index

我需要 flash 才能与 jQuery 对话。

这是我的 Flash 代码：

```
if (ExternalInterface.available) 
{
 ExternalInterface.call('function(){ MyFunction(); }');
ExternalInterface.call('function(){ alert("Praise Be Jesus Christ!"); }');
} 
```

“警报”效果很好。我的功能没有。

这是我的 jQuery：

```
<script type="text/javascript">

  $(document).ready(function()
  { 
  $("#flashContentABOVE").click(MyFunction);

  function MyFunction()
  {
            $("#flashContentABOVE").css("z-index", 4 );

  }

  });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:31:33.750

将您的`<script>`标签放在 html 文件的底部（在关闭之前`<body>`），然后取出该`document.ready()`功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T23:46:24.043

您应该可以直接从您的 swf 调用 MyFunction。我总是这样称呼 ExternalInterface：

```
ExternalInterface.call("funcName","param1","param2"); 
```

# ruby-on-rails - 开始新的铁路博客时覆盖提示

> ID：10923716
> 
> 赞同：0
> 
> 时间：2012-06-06T23:26:51.890
> 
> 标签：ruby-on-rails

当我进入

```
 rails new blog 
```

它返回

```
 exist  
       identical  README.rdoc
       identical  Rakefile
       identical  config.ru
       identical  .gitignore
       identical  Gemfile
           exist  app
       identical  app/assets/images/rails.png
       identical  app/assets/javascripts/application.js
       identical  app/assets/stylesheets/application.css
       identical  app/controllers/application_controller.rb
       identical  app/helpers/application_helper.rb
           exist  app/mailers
           exist  app/models
       identical  app/views/layouts/application.html.erb
       identical  app/mailers/.gitkeep
       identical  app/models/.gitkeep
           exist  config
       identical  config/routes.rb
       identical  config/application.rb
       identical  config/environment.rb
           exist  config/environments
       identical  config/environments/development.rb
       identical  config/environments/production.rb
       identical  config/environments/test.rb
           exist  config/initializers
       identical  config/initializers/backtrace_silencers.rb
       identical  config/initializers/inflections.rb
       identical  config/initializers/mime_types.rb
        conflict  config/initializers/secret_token.rb
    Overwrite /Users/user/blog/config/initializers/secret_token.rb? (enter "h" for help)    [Ynaqdh] 
```

并且无论我点击 y/yes 还是 n/no 它都会安装捆绑包，并且

```
 cd blog 
```

命令通过-但是当我尝试时

```
 rails server 
```

我明白了

```
 [2012-06-06 19:21:59] WARN  Could not determine content-length of response body. Set     content-length of the response or set Response#chunked = true 
```

[2012-06-06 19:22:00] WARN 无法确定响应正文的内容长度。设置响应的内容长度或设置 Response#chunked = true

我在某个地方找到了你应该安装“瘦”gemfile 来解决这个问题，然后运行

```
 rails server thin 
```

然后返回

```
 /Users/user/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/handler/thin.rb:1:in `require': cannot load such file -- thin (LoadError)
from /Users/user/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/handler/thin.rb:1:in `<top (required)>'
from /Users/user/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/handler.rb:20:in `const_get'
from /Users/user/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/handler.rb:20:in `block in get'
from /Users/user/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/handler.rb:20:in `each'
from /Users/user/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/handler.rb:20:in `inject'
from /Users/user/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/handler.rb:20:in `get'
from /Users/user/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:269:in `server'
from /Users/user/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/railties-3.2.5/lib/rails/commands/server.rb:59:in `start'
from /Users/user/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/railties-3.2.5/lib/rails/commands.rb:55:in `block in <top (required)>'
from /Users/user/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/railties-3.2.5/lib/rails/commands.rb:50:in `tap'
from /Users/user/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/railties-3.2.5/lib/rails/commands.rb:50:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

但是随后“ localhost :3000 ”显示一个糟糕的页面，说它找不到该页面，但是当我输入常规服务器命令时，该页面是完整的，但警告阻止我继续前进。

有任何想法吗？

谢谢Dty-注意n00bs，您需要在单独的窗口中运行服务器和代码（我现在感觉很慢）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T01:37:02.817

您在使用时看到的警告`rails server`是正常的。请注意，它们只是**警告**，因此不应该有任何东西阻止您继续前进。

如果您使用瘦服务器，那么正确的命令应该是`thin start`. 如果您使用的是 rails 3.2rc2，那么[根据这个](https://stackoverflow.com/a/9538244/600953)， `rails server`如果`gem 'thin'`在您的`Gemfile`.

# c# - 在 C++ 中处理 C# COM 事件

> ID：10923717
> 
> 赞同：6
> 
> 时间：2012-06-06T23:27:08.550
> 
> 标签：c#, c++, com

我设法创建了一个带有事件的 C# COM 对象。请在下面找到代码，

```
 [Guid("1212674-38748-45434")]
    public interface ICalculator
    {
        int Add(int Num1, int Num2);
    }

    [InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
    [Guid("3453674234-84444-84784")]
    public interface ICalculatorEvents
    {
        [DispId(1)]
        void Completed(int Result);
    }

    [ClassInterface(ClassInterfaceType.None)]
    [ComSourceInterfaces(typeof(ICalculatorEvents))]
    [Guid("87457845-945u48-4954")]
    public class Calculator : ICalculator
    {
        public delegate void CompletedDelegate(int result);
        public event CompletedDelegate Completed;
        public Add(int Num1, int Num2)
        {
            int Result = Num1 + Num2;
            if(Completed != null)
                Completed(Result);
        }
    } 
```

我已经在 C++ 控制台应用程序中导入了这个 COM 对象，并且能够调用“Add()”方法。我不确定如何在我的 C++ 应用程序中处理“已完成”事件。你能就此提出建议吗？每当发生此事件时，我都希望在控制台中显示结果值。

请在下面找到 C++ 应用程序的代码。事件“已完成”永远不会在这里处理。这进入了一个无限循环。

```
 #import "Calculator.tlb"
    using namespace Calculator;
    int Flag = 0;
    class HandleEvent : public ICalculatorEvent
    {
        public:
            HandleEvent(void);
            ~HandleEvent(void);
            HRESULT __stdcall QueryInterface(const IID &, void **);
            ULONG __stdcall AddRef(void) { return 1; }
            ULONG __stdcall Release(void) { return 1; }
            HRESULT __stdcall Completed(int Result);
    };

    HandleEvent::HandleEvent(void)
    {
    }

    HRESULT HandleEvent::Completed(int Result)
    {
        printf("Addition Completed, Result: %d", Result);
        Flag = 1;
    }

    HRESULT HandleEvent::QueryInterface(const IID & iid,void ** pp)
    {
        if (iid == __uuidof(ICalculatorEvent) || iid == __uuidof(IUnknown))
        {
            *pp = this;
            AddRef();
            return S_OK;
        }
        return E_NOINTERFACE;
    }

    int _tmain(int argc, _TCHAR* argv[])
    {
        CoInitialize(NULL);
        Flag = 0;
        ICalculatorPtr pCalc(__uuidof(Calculator));
        pCalc->Add(5, 6);

        do
        {
        }while(Flag == 0);

        CoUninitialize ();
        return 0;
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T00:13:02.277

如果要使用委托，则无需声明接口。像这样更改 _tmain() 函数：

```
int _tmain(int argc, _TCHAR* argv[])
{
    CoInitialize(NULL);
    Flag = 0;

    EventHandler evh ;
    ICalculatorPtr pCalc(__uuidof(Calculator));
    pCalc->Completed = &evh.Completed() ;
    pCalc->Add(5, 6);

    do
    {
    }while(Flag == 0);

    CoUninitialize ();
    return 0;
} 
```

如果你想使用接口试试这个。

```
 [ClassInterface(ClassInterfaceType.None)]
 [ComSourceInterfaces(typeof(ICalculatorEvents))]
 [Guid("87457845-945u48-4954")]
 public class Calculator : ICalculator
 {
     public ICalculatorEvents callbackObject ;

     public Add(int Num1, int Num2)
     {
         int Result = Num1 + Num2;
         if(callbackObject != null)
             callbackObject.Completed(Result);
     }
 } 
```

并将 _tmain() 方法更改为此。

```
int _tmain(int argc, _TCHAR* argv[])
{
    CoInitialize(NULL);
    Flag = 0;

    EventHandler evh ;
    ICalculatorPtr pCalc(__uuidof(Calculator));
    pCalc->callbackObject = &evh ;
    pCalc->Add(5, 6);

    do
    {
    }while(Flag == 0);

    CoUninitialize ();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:18:57.170

我发现 C++ 客户端中的 COM 初始化应该使用

```
 CoInitializeEx(NULL, COINIT_MULTITHREADED); 
```

用于来自 C# (.NET) COM 服务器的异步事件处理，否则 C++ 客户端仅在 CoUninitialize() 调用后接收事件。

事件处理类：

```
 class EventWrapper : public IDispEventSimpleImpl<1, EventWrapper, &DIID_RumCardCOMEvents >
    {
    public:
        // now you need to declare a sink map - a map of methods handling the events
        BEGIN_SINK_MAP(EventWrapper)
            SINK_ENTRY_INFO(1, DIID_RumCardCOMEvents, 0x1, isCardInserted, &cardInserted)
            SINK_ENTRY_INFO(1, DIID_RumCardCOMEvents, 0x2, isCardRemoved, &cardRemoved)
            // event interface id (can be more than 1)---+      |      |                   |
            // must match dispid of your event -----------------+      |                   |
            // method which handles the event  ------------------------+                   |
            // type information for event, see below --------------------------------------+
        END_SINK_MAP()

    // declare the type info object. You will need one for each method with different signature.
        // it will be defined in the .cpp file, as it is a static member
        static _ATL_FUNC_INFO cardInserted;  // 'placeholder' object to carry event information (see below)
        static _ATL_FUNC_INFO cardRemoved;  // 'placeholder' object to carry event information (see below)

        // method which handles the event
        STDMETHOD (isCardInserted)(unsigned char type)
        { 
            // usually it is defined it in the .cpp file
            cout << "isCardInserted: " << (int)type << endl;
            return 0;
        }

        STDMETHOD (isCardRemoved)()
        { 
            // usually it is defined it in the .cpp file
            cout << "isCardRemoved" << endl;
            return 0;
        }
    }; 
```

主要的：

```
 int main()
    {
        CoInitializeEx(NULL, COINIT_MULTITHREADED);
        try
        {
            EventWrapper ev;
            ev.DispEventAdvise(/*COM interface*/);
            // receiving events
            ev.DispEventUnadvise(/*COM interface*/);
        }
        catch (_com_error& e)
        {
            cout << "Exception: " << e.ErrorMessage() << endl;
        }

        CoUninitialize();
        return 0;
    } 
```

# javascript - 警报后重置输入值 - Javascript

> ID：10923719
> 
> 赞同：5
> 
> 时间：2012-06-06T23:27:18.427
> 
> 标签：javascript, html, reset, html-input

我有一个简单的输入框，如果数字大于 2，则会出现一条弹出消息。

这是我正在使用的代码，但是我已经`onkeyup`在输入中有其他命令，所以我希望这不会成为问题

HTML：

```
<input id="jj_input23" type="text" value='' onkeyup='changeTransform()' /> 
```

Javascript：

```
if(jj_input23 > 2) {
    alert("Making the scale higher than 2 will make the preview too big");
    document.getElementById('jj_input23').value("");
} 
```

在显示警报消息并且用户单击“确定”后，我希望重置输入文本。我怎样才能做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-06T23:29:35.433

```
if(jj_input23 > 2) {
    alert("Making the scale higher than 2 will make the preview too big");
    document.getElementById('jj_input23').value = "";
} 
```

如果您使用的是 jQuery，那么您几乎得到了它：

```
$('#jj_input23').val(""); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-06T23:29:32.927

`.value`是属性，不是函数。

你想要 `.value = "";`。

# tsql - 如何将一行反向旋转成两行？

> ID：10923720
> 
> 赞同：2
> 
> 时间：2012-06-06T23:27:27.640
> 
> 标签：tsql, sql-server-2005

假设我有下表：

```
Row_ID String1 String2    Int1 Int2
1      'James' 'Jiao'     1    2
2      'Jack'  'Ripper'   1    3 
```

我希望它看起来像这样：

```
Row_ID String     Int
1      'James'    1
1      'Jiao'     2
2      'Jack'     1
2      'Ripper'   3 
```

请注意，Int1/Int2 永远不会相同。它们彼此独一无二。

不知道该怎么做。其他一切都准备好了，但卡在了这个上面。我怀疑某种反向旋转会起作用吗？String 列不是有限集，Int 列也不是，所以*unpivot*似乎在这里不起作用。

我试图避免使用游标遍历每一行，将其选择为两行，将它们插入临时表等等。这种方法肯定会奏效，但有没有更好的、基于集合的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T23:47:42.233

`UNION`与仅对输入数据进行单次扫描相比，这具有优势。

```
--2008+
SELECT ROW_ID, String, [Int]
FROM YourTable
    CROSS APPLY(VALUES (String1, Int1), (String2, Int2)) AS A (String, [Int]); 
```

或者按照@MartinSmith 的建议，因为`VALUES`语法是 2008+（仍然是单次扫描）

```
--2005+ compatible
SELECT ROW_ID, String, [Int]
FROM YourTable
    CROSS APPLY(SELECT String1, Int1 
                UNION ALL 
                SELECT String2, Int2) AS A (String, [Int]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T23:44:30.097

制作两个临时表或选择 --- 一个选择 RowID、String1 和 Int1，另一个选择 RowID、String2 和 Int2。然后将 String 列别名或标记为 String，将 Int 列别名为 Int。然后将这两者联合起来得到你的结果。

但我对 T-SQL 并不熟悉，这只是一般 SQL 领域的答案。

我确实注意到您不想使用临时表，但是如果您只是将两个选择 UNIONed 一起进行，那么您的数据库是否会找到一种更快的方法来完成实际上不涉及逐行的工作-行光标？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T23:49:29.823

试试这个：

```
SELECT row_id, string1, int1 from myTable
UNION
SELECT row_id, string2, int2 from myTable 
```

# php - 获取页面 ID 和访问令牌以作为应用程序发布到粉丝页面

> ID：10923724
> 
> 赞同：0
> 
> 时间：2012-06-06T23:28:02.347
> 
> 标签：php, facebook-graph-api, post, facebook-page

经过一天与谷歌和大量测试目前存在的内容后，鉴于 facebook api 中的 offline_access 请求的贬值，我无法找到明确的答案。

我想要实现的是将我的应用程序的粉丝页面墙更新为应用程序本身，并输出我的主站点正在生成的 RSS 提要（在这个阶段我不太担心阅读/解析 RSS 部分，我想我有没有破解）。就目前情况而言，我可以在粉丝专页墙上发帖，但这些帖子似乎来自我的个人资料（这是粉丝专页的管理员）。

我创建的应用程序仅供我使用，并用于写入我的粉丝页面墙。我尝试过使用第三方工具（RSS Graffiti/Twitter Feed），但它们不符合我的要求，所以我尝试自己写一些东西。

到目前为止，我所拥有的 PHP 只是从 fb 开发人员中心示例中删除的，就像我说的那样，我可以成功地发布到墙上，但只能作为我自己。

我计划设置一个 CRON 作业来执行脚本并运行我的 RSS 提要并在有新内容时更新 fb 粉丝页面。鉴于此，我不会从运行它的机器（justhost 服务器）登录到 fb。

此外，我似乎无法调用 http get，因为我认为它在 PHP 配置中被禁用（我无法在共享主机上更改它）。因此，当我试图获取我管理的页面和应用程序数组以找出答案时，当我收到“调用未定义函数 http_get()”时，我停留在 fb 开发中心帮助指南中的这一点，[就像页面一样进行身份验证](https://developers.facebook.com/docs/authentication/pages/)我的“页面访问令牌”。我尝试使用 curl 来返回它，但我无法正确地实现它，因为当我使用以下代码转储响应时，我只得到“resource(4) of type (curl)”：

```
//get user access token
$access_token = $facebook->getAccessToken();

//get page access token
$response  = curl_init("https://graph.facebook.com/me/accounts?access_token=".$access_token);
var_dump($response); 
```

即使我有这个并且可以在这种情况下让它工作，我很困惑当这个令牌过期时会发生什么，以及如何在不需要我每 2 小时或 60 天编辑这个脚本的情况下更新它令牌过期。

任何人都可以在获取此页面访问令牌方面提供任何帮助，然后在通过 CRON 作业从远程服务器上的脚本运行时使其保持活动状态，我们将不胜感激。

这是我到目前为止的代码：

```
<?php

require '../src/facebook.php';

// Create our Application instance (replace this with your appId and secret).
$facebook = new Facebook(array(
'appId'  => 'XXXHIDDENTHISXXX',
'secret' => 'XXXHIDDENTHISXXX',
'cookie' => true
));

// Get User ID
$user = $facebook->getUser();

if ($user) {
try {
// Proceed knowing you have a logged in user who's authenticated.
$user_profile = $facebook->api('/me');
} catch (FacebookApiException $e) {
error_log($e);
$user = null;
}
}

// Login or logout url will be needed depending on current user state.
$params = array(
'scope' => 'publish_stream',
'redirect_uri' => 'http://autos.sevende.com.gt/rss_to_facebook/pages/'
);

if ($user) {
$logoutUrl = $facebook->getLogoutUrl($params);
} else {

$loginUrl = $facebook->getLoginUrl($params);

}

//get user access token
$access_token = $facebook->getAccessToken();

//get page access token
$response  = curl_init("https://graph.facebook.com/me/accounts?access_token=".$access_token);
var_dump($response);

https://graph.facebook.com/me/accounts?access_token=USER_ACCESS_TOKEN

//set fanpage_id
$page_id = '234830586618763';

$attachment = array(

'link' => 'http://autos.sevende.com.gt/listing/565/');

$result = $facebook->api('/'.$page_id.'/feed?access_token='.$access_token, 'post', $attachment);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:38:30.307

不，您不能“作为”应用程序发布。

您可以作为用户或页面发布，但不能作为应用程序发布。执行这两种方法的方法有据可查，尽管您上面的代码接近“作为页面发布”的说明

# java - JPanel 中的 Java 自定义拖放

> ID：10923725
> 
> 赞同：9
> 
> 时间：2012-06-06T23:28:03.007
> 
> 标签：java, swing, drag-and-drop, jpanel

Java 自定义拖放 - 没有对 TransferHandler 的回调。

我想为 JPanel 子类实现自定义拖放功能。我遵循标准 DnD 教程的指导方针：

[拖放和数据传输](http://docs.oracle.com/javase/tutorial/uiswing/dnd/index.html)

从表面上看，事情似乎很简单，但是当我真正尝试它时，我没有得到任何 DnD 行为正在发生的迹象。事实上，我的 TransferHandler 中没有一个方法被调用。

所以，让我们回顾一下我做了什么......

我创建了自己的 Container 类，它声明自己扩展 JPanel：

```
public class DnDUnitPanel extends JPanel
{
    ...
} 
```

我从这个 Demo 复制了 ListTransferHandler：

[掉落演示](http://docs.oracle.com/javase/tutorial/uiswing/dnd/dropmodedemo.html)

将该类重命名为 DndUnitTransferHandler，删除引用 JList 对象的代码，并在其中的 5 个方法中的每一个上安装 System.out.println() 语句。

然后我实例化两个不同的 DnDUnitPanel 实例，如下所示：

```
DnDUnitPanel topPanel = new DnDUnitPanel(new GridLayout(0, 4, 6, 6), true);
// topPanel.setDragEnabled(true);
topPanel.setName("Top Panel");
topPanel.setTransferHandler(new DnDUnitTransferHandler());

DnDUnitPanel bottomPanel = new DnDUnitPanel(new GridLayout(0, 4, 6, 6), true);
// bottomPanel.setDragEnabled(true);
bottomPanel.setName("Bottom Panel");
bottomPanel.setTransferHandler(new DnDUnitTransferHandler()); 
```

（我还创建了一些 JLabel 实例并将它们添加（）到面板（未显示））。

当我尝试将 JLabel 从一个面板拖到另一个面板时，没有任何反应。所以我回去重读了这个页面：

[传输处理程序](http://docs.oracle.com/javase/tutorial/uiswing/dnd/transferhandler.html)

特别是关于 setDragEnabled() 的说明：

```
turns on drag support. (The default is false.) This method is
defined on each component that supports the drag gesture; the link
takes you to the documentation for JList. 
```

JPanel 没有 setDragEnabled() 方法。所以，我问自己，这到底是什么意思：“支持拖动手势的组件”？

我首先想到这一定意味着被声明为实现 MouseListener 和/或 MouseMotionListener 的东西。我修改了 DnDUnitPanel 以声明它实现了两者并提供了所有方法。这样做之后，我可以看到 mousePressed()、mouseClicked()、mouseDragged() 等被调用，但 TransferHandler 中仍然没有被调用，并且仍然没有拖动光标指示某些东西已被拖动或准备好掉了。

然后，我查看了 JList 本身的源代码，并确定“支持拖动手势”实际上只是意味着具有关联 getter 和 setter 的“dragEnabled”属性的东西。

因此，我通过直接从 JList 本身复制代码来声明该属性并在 DnDUnitPanel 上提供 getter 和 setter（想可能我不完全理解的是调用 isDragEnabled() 并寻找一个真正的值来启动 DnD 行为。）

不幸的是，提供这些（并取消注释上面对 DnDUnitPanel.setDragEnabled() 的调用）也没有效果。

所以...... TransferHandler 永远不会被调用（）。显然，这里缺少一些重要的东西，但我没有看到可能是什么。

对于下一步该尝试什么，我陷入了死胡同。

有人看到这里缺少什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T00:01:58.123

基本上你需要一个数据源。

看看另一个[Stackoverflow 问题](https://stackoverflow.com/questions/2990634/how-to-drag-and-drop-on-custom-swing-components)，[这里](http://www.dreamincode.net/forums/topic/209966-java-drag-and-drop-tutorial-part-1-basics-of-dragging/)和[这里](http://www.bryanesmith.com/docs/drag-and-drop-java-5/)（对 DnD 的一个很好的解释）

# php - 使用 simple_html_DOM 从网页显示 div

> ID：10923726
> 
> 赞同：0
> 
> 时间：2012-06-06T23:28:06.017
> 
> 标签：php, curl, simple-html-dom

我正在尝试使用 curl 和[simple_html_DOM](http://simplehtmldom.sourceforge.net/)显示网页中的一些内容，每当我回显内容时它只是一个数组我如何让它实际显示 html 内容？

```
<?php
echo ("hello");

include 'simple_html_dom.php';

$curl = curl_init();
curl_setopt ($curl, CURLOPT_URL, "http://catalog.hastingsfilter.com/startautoapps.html");
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($curl, CURLOPT_USERAGENT, "Mozilla/5.0 (compatible; MSIE 5.01; Windows NT 5.0)");
curl_setopt($curl, CURLOPT_AUTOREFERER, 1);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($curl, CURLOPT_REFERER, "http://catalog.hastingsfilter.com/startautoapps.html");

$result = curl_exec ($curl);
curl_close ($curl);
//write contents of $result to file
$File = "page.txt";
$fh = fopen($File, 'w') or die("can't open file");
fwrite($fh, $result);
fclose($fh);
//turn file into dom object
$page = file_get_html("page.txt");
$div = $page->find('div[id=columnright]');
echo $div;

?> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T00:48:07.077

似乎**内部 < iframe>**正在弄乱查询。我不知道为什么简单的 html dom 表现得那样.. 为什么不将查询更改为：

```
$div = $page->find("iframe[name='main2']");
echo $div[0]->innertext; 
```

**编辑：**

您可以像这样更改**.src**属性：

```
$page = file_get_html("page.txt");
...
$page->find("iframe[name='main2']",0)->src = "foo";
$thehtml = $page->save(); 
```

顺便说一句，我直接调用了**<iframe>**源并且还找到了一个无服务器..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T23:35:25.800

我不确定，但我认为您可能必须使用

```
$div->innertext; 
```

获取 div 的内容。

# .net - 插件 AppDomains 解决方法

> ID：10923727
> 
> 赞同：3
> 
> 时间：2012-06-06T23:28:10.567
> 
> 标签：.net, plugins, appdomain, appdomainsetup

在处理它们自己的子目录中的插件程序集时，有一个众所周知的问题，即这些程序集一旦尝试从它们的子目录加载它们各自的依赖项就无法加载。一种解决方案是在 AppDomains 中加载插件，这些插件在初始化时已`PrivateBinPath`在其对象中设置。`AppDomainSetup`但是，这会导致有关编组/跨 AppDomain 通信的其他困难，特别是如果插件应该提供一些 GUI。

当安全方面的优先级较低时（非关键实用程序应用程序，由于错误插件导致的崩溃没有严重问题），我有以下想法：在应用程序启动时，应搜索所有插件目录，并新建一个应创建 AppDomain，在其 bin 路径中包含这些目录。然后，整个应用程序及其 GUI 与所有插件一起在新的 AppDomain 中运行。

在给定的情况下，是否有任何理由避免该解决方案？或者是否有任何原因导致该解决方案甚至不可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T11:23:07.653

考虑到您描述的场景，我不知道与您的第二个域提案相关的任何问题。但是，您也可以通过在插件子目录中搜索自己并使用[`Assembly.LoadFrom`](http://msdn.microsoft.com/en-us/library/1009fa28.aspx).

一个可能的设置示例，其中`FindAssemblyByName`必须实现搜索所有可能的位置：

```
static void Main(string[] args)
{
    AppDomain.CurrentDomain.AssemblyResolve += CurrentDomain_AssemblyResolve;

    // ...
}

static Assembly CurrentDomain_AssemblyResolve(
    object sender, 
    ResolveEventArgs e)
{
    var assemblyName = new AssemblyName(e.Name);

    string assemblyFilePath = FindAssemblyByName(assemblyName);

    if (string.IsNullOrEmpty(assemblyFilePath))
        return null;

    return Assembly.LoadFrom(assemblyFilePath);
} 
```

# arrays - 有没有办法在 x86 程序集中使用 DUP 定义参数化变量？

> ID：10923730
> 
> 赞同：1
> 
> 时间：2012-06-06T23:28:16.157
> 
> 标签：arrays, string, assembly, macros, x86

使用 x86 程序集，我需要定义一个填充了递增值的数组。目前，我将它定义为一个空数组，并在运行时通过循环它并设置我在每一步递增的值来填充它。这看起来像这样；

```
myArray DB 10 DUP (0)
...
xor ax, ax
xor bx, bx
mov cx, 10
initArray:
  mov myArray[bx], ax
  inc bx
  add ax, 43
loop initArray 
```

数组的增量值和大小在运行前都是已知的，所以我可以通过直接在代码中定义值来做到这一点，就像这样......

```
myArray DB 0, 43, 86, 129, ... 
```

...但这需要一段时间，尤其是长数组。

现在来回答这个问题；我想知道是否有办法在汇编中创建这样的数组，比如 C 中的参数化宏？如果您愿意，等效于“#define myArray(x) (x*43)”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T22:56:59.740

我认为您的模式太先进了，预处理器无法支持。为什么不直接编写一个生成它的脚本并将其包含在您的构建过程中呢？您可以使用 TASM 的包含宏来包含它。

# iphone - iphone NavigationController 清除视图堆栈

> ID：10923732
> 
> 赞同：3
> 
> 时间：2012-06-06T23:28:20.680
> 
> 标签：iphone, view, uinavigationcontroller, stack

我有一个使用导航控制器的 iphone 应用程序。在那个控制器中，我推送了一些视图。在某些情况下，我想“清除”视图堆栈，只在堆栈中保留导航控制器的 rootViewController 并推送我拥有的另一个 viewController。

有人可以给我一个如何做到这一点的例子吗？我没有看到任何清除堆栈的方法。

* * *

答案 1：我尝试在按钮 Action 中输入以下代码：

```
[self.navigationController popToRootViewControllerAnimated:NO]; 

 do some stuff here to prepare for the push.

[self.navigationController pushViewController:self.myOtherController animated:YES]; 
```

但它只会弹出到 roorController。它不会推动我想要的另一个 viewController。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T23:35:51.530

以下代码将允许用户深入查看视图层次结构，并在按下按钮时弹回根视图控制器并推送新视图。

DetailViewController.m ~ 要从中清除导航堆栈的视图控制器：

```
- (IBAction)buttonPressed:(id)sender {
    [[NSNotificationCenter defaultCenter] postNotification:[NSNotification notificationWithName:@"popBack" object:nil]];
} 
```

上面的代码调用`NSNotificationCenter`，发布一个通知，RootViewController 可以在听到时做出反应。但首先，RootViewController 必须注册才能接收通知。

根视图控制器.m

```
- (void)viewDidLoad
{
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(pushViews) name:@"popBack" object:nil];
    [super viewDidLoad];
} 
```

接下来，RootViewController 必须设置引用的选择器`-pushViews`。

```
- (void)pushViews {
     //Pop back to the root view controller
     [self.navigationController popToRootViewControllerAnimated:NO];

     //Allocate and init the new view controller to push to
     NewViewController *newVC = [[NewViewController alloc] init];

     //Push the new view controller
     [self.navigationController pushViewController:newVC animated:YES];
} 
```

确保在调用时`-popToRootViewControllerAnimated:`指定`NO`动画。启用动画会导致导航栏动画出现打嗝并混淆系统。上面的代码，调用时会清空导航栈，只留下RootViewController，然后添加NewViewController。

您的初始代码没有完全执行的原因是因为`-popToRootViewController:`从您的 DetailViewController 调用后，RootViewController 的方法占用了主线程，并且 DetailViewController 被释放。因此，没有从该视图控制器运行更多代码。使用上面的代码，导航堆栈弹回到正在加载的同一个视图控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T23:31:05.670

我想你正在寻找`-popToRootViewControllerAnimated:`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:02:14.617

```
UIViewController* root = [self.navigationController.viewControllers objectAtIndex:0];

self.navigationController.viewControllers = [NSArray arrayWithObjects:root, cal, nil]; 
```

'cal' 视图控制器要去哪里。但是没有动画。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-10T06:58:26.753

除了**海妖的**答案，

在 UIViewController 中添加以下函数，您将要弹出该函数。

```
(void)viewDidDisappear:(BOOL)animated {

    [super viewDidDisappear:YES];

    for(UIView *view in self.view.subviews)
    {
       [view removeFromSuperview];
    }
} 
```

# javascript - 使用 jQuery 触发单击链接时的“未定义”函数

> ID：10923734
> 
> 赞同：1
> 
> 时间：2012-06-06T23:28:48.327
> 
> 标签：javascript, jquery

出于某种原因，这适用于 FF 11、Chrome 甚至 IE，但不适用于 FF 3.6 或 Safari 5。

基本上我触发了一个链接的点击：

```
var $currentItem = $('#' + currentId);
var modalSeriesList = $('.js-modal-series');
var index = modalSeriesList.index($currentItem);
var $nextItem = modalSeriesList[index + 1];

var nextClick = function() {
    $(document).off('keydown.general');
    $nextItem.click();
}

$(document).off('keydown.general');

if ($nextItem) {
    $nextButton.click(nextClick);
}​ 
```

但是当我单击 FF 3.6 或 Safari 5 中的链接时，我收到以下错误：

`TypeError: 'undefined' is not a function (evaluating '$nextItem.click()')`

使用以下方法是否有任何我不知道的特定“陷阱”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T23:38:18.233

试试[`.eq()`](http://api.jquery.com/eq/)这样`$nextItem`是一个`jQuery`集合：

```
var $nextItem = modalSeriesList.eq(index + 1);

// ...

$nextItem.click() 
```

Using`[...]`检索没有`.click()`方法的 DOM 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T23:33:18.173

你可以试试

```
if( typeof $nextItem == 'undefined' ){
    $nextButton.trigger('click');
} 
```

代替

```
if ($nextItem) {
    $nextButton.click(nextClick);
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T23:47:22.663

如果将 if 语句的条件变为

```
if(typeof $nextItem == 'undefined' ) 
```

有用。正如 Porco 所说，可能 $nextItem 不存在....

# android - Android facebook：无效的密钥。Android 密钥不匹配

> ID：10923735
> 
> 赞同：0
> 
> 时间：2012-06-06T23:28:53.723
> 
> 标签：android, facebook-android-sdk

当我使用几天前为Android制作的简单Facebook登录时，我没有这个问题。

现在，当我运行应用程序时，我得到一个“无效密钥”-“Android 密钥不匹配”

```
06-07 02:08:51.104: W/GET_MESSAGE(273): invalid_key:Android key mismatch. Your key     "Es2Fbgrno9htovlX6FcXiex6u0I" does not match the allowed keys specified in your application     settings. Check your application settings at http://www.facebook.com/developers 
```

![api-key] [http://imgur.com/8uTnu](http://imgur.com/8uTnu)

这是我从 Android 应用程序获得的错误密钥：

![错误键] [http://imgur.com/TCD5k](http://imgur.com/TCD5k)

我从应用程序中获得的错误密钥与我在 Facebook 开发人员中声明的密钥不同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T06:21:33.857

错误日志中显示的密钥是 facebook 发送的应用程序签名。您需要做的就是复制此密钥并将其粘贴到您的应用仪表板，android 应用 key_hash 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T23:32:55.617

确保将开发人员网站上的密钥（Native Android App Key Hash）设置为您的签名证书的哈希值。这与 API 密钥不同。

请参阅此处的说明，**第 4 步：将应用签名添加到 Facebook 应用** [https://developers.facebook.com/docs/mobile/android/sso/](https://developers.facebook.com/docs/mobile/android/sso/)

Es2Fbgrno9htovlX6FcXiex6u0I 是您的哈希 - 在网站上将“Android 密钥哈希”设置为该值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T18:18:16.300

生成一个 SHA1，这个链接可以帮助你。 [生成 SHA1](http://mirnauman.wordpress.com/tag/sha1-generation-using-keytool/ "生成 SHA1")

# regex - 从命令行，仅在匹配另一个正则表达式之后进行 perl 替换匹配

> ID：10923737
> 
> 赞同：3
> 
> 时间：2012-06-06T23:29:00.863
> 
> 标签：regex, perl, file

我在每行多个匹配的注释中进行了一些大规模字符替换，这减少了标题中提到的问题。有没有一种简单的方法可以在 perl 单行中做到这一点？到目前为止我想到的最简单的方法是做类似的事情

```
perl -pi e 's/(.*regex1.*)(regex2)/$1replacement/' filename 
```

并简单地运行它，直到文件停止更改。似乎必须有更好的方法来为此做一个单行。

示例输入（列数因文件而异）：

```
 /*
    * name     val1     val2
    * foo      2345     23
    * barbaz   34       23456
    */ 
```

示例输出：

```
 /*
    * name.....val1.....val2
    * foo......2345.....23
    * barbaz...34.......23456
    */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T00:16:51.687

你可以尝试这样的事情：

```
perl -pwe 'if (m#/\*# .. m#\*/#) { 
    s/\w\.*\K( {2,})(?=\S)/ "." x length($1) /eg; }' input.txt > output.txt 
```

但请注意，将评论与正则表达式匹配是一件棘手的事情。只要评论遵循你的简单风格，你应该没问题，但也要注意它与其他评论的匹配。

在这个单行代码中，我使用触发器运算符来匹配打开和关闭注释符号。在内部，它匹配任何`\w`后跟可选句点的字母数字，并将其后的任何空格（2 个或更多）替换为句点。最后的前瞻是为了防止它在最后一个单词之后添加句点，例如`foo....bar.....`

我选择使用`( +)`仅捕获空格，但您可以将其替换为`(\s+)`. 但是，如果您想保留缩进，用句点替换制表符会更加棘手。

**预计到达时间：**

您可能希望使用该`-i`选项对文件执行就地编辑，这在处理多个文件时很方便。安全的方法是使用备份，例如`-i.bak`.

# java - 具有多个 OUT 参数的 Java 存储过程批处理

> ID：10923745
> 
> 赞同：2
> 
> 时间：2012-06-06T23:29:58.787
> 
> 标签：java, stored-procedures, transactions, batch-file

我正在使用 Oracle 数据库。

我需要顺序调用存储过程 1000 次。这个存储过程有几个输入参数和输出参数。目前我正在一项交易下进行。只需使用 java 的 for-each 循环并在其中使用 Spring 的 StoredProcedure。此事务大约需要 4 秒。而且它不是很酷。我需要加快这个交易时间。有没有办法做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:54:32.517

编写一个调用所有其他的包装存储过程，将所有数据作为哈希图或类似的东西输入到包装过程中（参见[http://docs.oracle.com/cd/B19306_01/java.102/b14355/oraarr .htm#g1072333](http://docs.oracle.com/cd/B19306_01/java.102/b14355/oraarr.htm#g1072333)），将输出存储在游标中并将其返回给Java。从 Java 调用包装器。然后让数据库完成所有繁重的工作，整个工作在一个数据库 tx 中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T23:36:22.063

您可以批量查询（如果它是 1000 个不可预测的 ID，则使用“in”）并每次返回一个游标而不是几个 out 参数？当然，如果您的 in 参数每次调用都不同，这将不会那么容易。

# redistributable - 重新分发 dll 文件

> ID：10923758
> 
> 赞同：0
> 
> 时间：2012-06-06T23:31:35.330
> 
> 标签：redistributable

我正在阅读手册并找到以下信息：

> 您的应用程序应该：
> 
> 链接到程序集“StreamSDK_DotNET.dll”。
> 
> 重新分配：
> 
> “StreamSDK_DotNET.dll”</p>
> 
> “StreamSDK_CPP.dll”</p>
> 
> “Microsoft.VC8.CRT”（x86）或“Microsoft.VC9.CRT”（x64）。
> 
> 安装 .NET Framework 2.0 或更高版本。
> 
> 此程序集中的托管代码需要 C++ SDK 中的非托管代码

我不确定如何在我的程序中重新分发 dll 文件。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T23:33:34.080

好吧，您可以将所有文件压缩在一起，然后分发，或者使用程序创建安装程序来为您执行以下操作：http: [//www.advancedinstaller.com/](http://www.advancedinstaller.com/)，然后将 dll 文件作为部分包含在内程序，它将把所有东西安装在一起，你可以只提供一个安装程序 msi 包。

# android - 如何将字符串更改为双精度值？

> ID：10923762
> 
> 赞同：0
> 
> 时间：2012-06-06T23:32:00.083
> 
> 标签：android

我创建了这个小程序，允许用户在 EditText 中输入数值。

*   当他们第一次单击按钮时，应用程序应将其显示在 TextView 中
*   之后，仅当大于先前值时才应保存新值

请帮帮我。

```
public class BidActivity extends Activity implements OnClickListener {
    public TextView tt;
    public EditText textbo;
    public String total;
    public Button btnnn;
    public Double protein;
    double price = 0;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        textbo = (EditText)findViewById(R.id.txtbid);
        tt = (TextView)findViewById(R.id.textView1);

        btnnn = (Button)findViewById(R.id.btnbit);
        btnnn.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        String total = textbo.getText().toString();
        price = Double.parseDouble(textbo.getText().toString());

        //tt.setText("double: "+price);
        if(Double.parseDouble(textbo.getText().toString()) < price){
            tt.setText("double: "+price);
        }else{
            tt.setText("double: "+Double.parseDouble(textbo.getText().toString()));
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:39:01.893

I'm guessing you are trying to do this:

```
double price = 0;
double savedPrice = 0.0;
...

@Override
public void onClick(View v) {
    price = Double.parseDouble(textbo.getText().toString());

    if(savedPrice < price){
        tt.setText("double: "+price);
        savedPrice = price;
    }
    // Otherwise leave tt as it is
} 
```

# performance - 涉及多个变量的程序的时间复杂度

> ID：10923764
> 
> 赞同：3
> 
> 时间：2012-06-06T23:32:10.060
> 
> 标签：performance, time-complexity, computation-theory

我最近被要求创建一个程序来查找文本片段中的最佳匹配。我已经成功编写了这个程序，但我对它的时间复杂度有疑问。

问题定义如下。

给定查询，在文档中查找查询词的出现并突出显示最佳标记。

我的程序花费的时间

> O(m + n + p)

这里

> m = 文档长度（以字符为单位）
> 
> n = 查询的字符长度
> 
> p = 文档中的总匹配数

在这种情况下，最大的术语总是“m”，因为在大多数情况下，文档会比查询本身大。

我可以安全地推断出我的程序的时间复杂度是 O(m) 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T23:46:03.503

不，你不能。根据[Big-O 表示法](http://en.wikipedia.org/wiki/Big_O_notation)，您的函数`m`是算法运行实际时间的上限，如果有一个常数`M`，例如实时时间总是小于或等于`M*m`. 以文档大小为零（一个空文档）但有人用正数字符查询它的情况为例。在这种情况下，上限将是`0`（加上一个常数），但程序运行的实际时间可能会大于这个值。所以你的程序不能说是`O(m)`。

换句话说，“大多数情况”是不够的：您必须证明您的算法在**所有**情况下都将在该上限内执行。

**更新：**同样可以这样说`p`：常识说`p`总是小于`m`，但只有当搜索词不重叠时才会如此。以文档`aaaaaa`(m=6) 和搜索词`a`,`aa`和`aaa`(n=3) 为例。在这种情况下，出现 6 次，出现`a`5次，出现`aa`4 次`aaa`，所以`p = 15`。即使这是一个非常不可能的情况（对于空文档也是如此），您仍然需要`p`在复杂性分析中考虑到这一点。所以你的程序必须真的`O(m + n + p)`像你最初所说的那样描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-20T23:07:36.437

我的程序花费的时间：O(m + n + p) 首先，我完全不相信这是你的程序花费的时间。

您被要求解析查询并在文档中查找单词。这是一个复杂的交叉引用问题，因为您有多个单词中的字符必须以精确的字符序列与随机放置在文档中的相同序列匹配。大多数学生对此进行哈希处理并创建一个 N 平方过程，方法是获取第一个单词并扫描文档以查找该单词的出现，然后对下一个、下一个和下一个执行相同的操作。您需要开发一种交叉引用文档内容和单词的有效方法，否则您将创建一个 N^2 过程。副手，在查询中创建一个单词词典，将文档解析为单词并将它们与要查找的单词词典进行匹配。那将是 mLogn

```
m = number of words the document
n = number of words in the dictionary you create in an nLogn process. 
```

在我写的一篇文章中提到了你，因为它解决了一个类似但更复杂的单词匹配问题：

[http://www.codeproject.com/Tips/882998/Performance-Solving-WonderWord-Puzzle](http://www.codeproject.com/Tips/882998/Performance-Solving-WonderWord-Puzzle)

您的第一个受访者是正确的，同时假设我没有认为您必须在不使用中断的情况下找到字符，但我认为他的 O 表示法是错误的，因为它们是相乘的，而不是相加的，并且 p 是不相关的。

# java - 因为我只能通过 multicasocket 中的以太网接口发送信息

> ID：10923768
> 
> 赞同：0
> 
> 时间：2012-06-06T23:32:27.303
> 
> 标签：java, sockets

我有两个网络接口（无线和以太网）用于连接，但我只想将信息发送到以太网，当我在以太网中没有连接时，多播套接字可以通过无线发送信息，但我不想要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:16:05.337

您可以使用该方法将您的套接字绑定到您要使用的适配器的特定 IP 地址`Socket#bind(SocketAddress endpoint)`。

该类`java.net.NetworkInterface`可用于枚举可用接口并获取它们的 IP 地址。

# openlayers - 使用 Nominatim 进行简单的反向地理编码

> ID：10923769
> 
> 赞同：5
> 
> 时间：2012-06-06T23:32:57.153
> 
> 标签：openlayers, openstreetmap, reverse-geocoding, nominatim

我正在使用 OpenLayers + OpenStreetMaps 开发在线地图应用程序。

我需要帮助在 javascript（或 php）中实现一个简单的反向地理编码函数，该函数接收纬度和经度并返回一个地址。

如果可能的话，我想与 Nominatim 合作。我不想使用 Google、Bing 或 CloudMade 或其他专有解决方案。

这个[链接](http://nominatim.openstreetmap.org/reverse?format=xml&lat=-23.56320001&lon=-46.66140002&zoom=27&addressdetails=1)返回一个合理的响应，我使用 simple_html_dom.php 来分解结果，但它是一种丑陋的解决方案。

```
<?php

include('simple_html_dom.php');

$url = "http://nominatim.openstreetmap.org/reverse?format=xml&lat=-23.56320001&lon=-46.66140002&zoom=27&addressdetails=1";
$html = file_get_html($url);
foreach ($html->find('road') as $element ) {
    echo $element;
}

?> 
```

有什么更优雅的解决方案的建议吗？

**注意：**自 2015 年 10 月起，请求必须包含[有效的电子邮件](http://wiki.openstreetmap.org/wiki/Nominatim#Parameters)，以便“提供您申请的充分身份证明”。

如果没有电子邮件，返回代码将不是 xml 或 json 格式，而是[错误 509 "Bandwidth Exceeded"](https://trac.openstreetmap.org/browser/nominatim/website/509.html)，请尝试使用 html_dom 库进行抓取。

```
$url = "http://nominatim.openstreetmap.org/reverse?email=myemail@myserver.com&format=xml&lat=-23.56320001&lon=-46.66140002&zoom=27&addressdetails=1"; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T10:37:13.133

您可以请求 JSON 格式的 nominatim，并传递一个回调名称，以便响应为：`callback(json)`。

查看文档：[http ://wiki.openstreetmap.org/wiki/Nominatim](http://wiki.openstreetmap.org/wiki/Nominatim)

这是一个最小的使用示例：http: [//jsfiddle.net/GWL7A/14/](http://jsfiddle.net/GWL7A/14/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-06T15:17:58.913

我已经运行[tonio 的解决方案](https://stackoverflow.com/a/10930143/1166727)4 年了。虽然它实现得很好并且我推荐它（即使已被批准为正确答案），但很明显答案是不完整的。

根据查询的实现方式，您可能会遇到服务器问题，甚至可能导致拒绝服务。

请注意，如果您按照他的回答中建议使用社区 Nominatim 服务器，则最佳做法是：

1.  使用您确定的误差范围和/或缓存重复的地理点
2.  运行[您自己的 Nominatim 实例](https://gist.github.com/econandrew/c057b4575d9d17175861)（公开可用，但可大量下载）

# java - 使用包含许多对象的列表对同一对象进程进行线程化

> ID：10923771
> 
> 赞同：1
> 
> 时间：2012-06-06T23:32:58.387
> 
> 标签：java, multithreading, optimization

**我的问题是：**控制对许多“ `RunnableObject`s”列表进行线程化的“最佳”方法是什么？

我有一种方法可以处理多线程，但我认为这不是最佳的。在很多情况下，我都有一个对象列表，它们都需要做同样的事情，但我不希望它们一次只做一个，所以我将它们放在一个列表中，并将其中一些线程放在一次。完成后，它会调用`updateList()`控制器上的一个方法，该方法将删除已完成的项目并调用新项目。我不认为这是一个很好的方法。我想使用类似的东西`.notify()`，但我不确定它在这种情况下是如何工作的（将我引导到一个好的网站来学习可能会有用）。

我在下面有我的控制器类的基本大纲。**我已经尝试使 javadoc 有用**，所以如果您喜欢略读，请继续阅读。谢谢。

**只是一些示例代码**可以让您了解我在说什么。

```
package controller;

import java.util.ArrayList;
import java.util.List;
import model.RunnableObject;

public class RunnableObjectController {

  private static RunnableObjectController instance;
  private List<RunnableObject> runnableObjects = new ArrayList<>();
  private List<RunnableObject> queuedRunnableObjects = new ArrayList<>();
  private List<RunnableObject> currentRunnableObjects = new ArrayList<>();
  private int limit = 10;

  private RunnableObjectController() {
  }

  public static RunnableObjectController getInstance() {
    if (instance == null) {
      instance = new RunnableObjectController();
    }
    return instance;
  }

  /**
  * Updates the list.
  */
  public void begin() {
    updateList();
  }

  /**
   * Called by a runnableObject when it's finished with its process
   */
  public synchronized void updateList() {
    removeFinishedRunnableObjects();
    addNewRunnableObjects();
    if (isFinished()) {
      MainController.getInstance().finish();
    }
  }

  /**
  * Searches the currentRunnableObjects for runnableObjects which are not in progress and removes them from the currentRunnableObjects.
  * It will add them to the queuedRunnableObjects if they are of status WAITING.
  */
  private void removeFinishedRunnableObjects() {
    int i = 0;
    while (i < currentRunnableObjects.size()) {
      RunnableObject runnableObject = currentRunnableObjects.get(i);
      if (runnableObject.getStatus() != RunnableObject.IN_PROGRESS) {
        currentRunnableObjects.remove(runnableObject);
        if (runnableObject.getStatus() == RunnableObject.WAITING) {
          queuedRunnableObjects.add(runnableObject);
        }
      } else {
        i++;
      }
    }
  }

  /**
  * Searches the queuedRunnableObjects and adds them to the currentRunnableObjects while the size of the currentRunnableObjects is less than the limit.
  * Begins the runnableObject in a new thread and sets its status to IN_PROGRESS
  */
  private void addNewRunnableObjects() {
    while (!queuedRunnableObjects.isEmpty() && currentRunnableObjects.size() < limit) {
      RunnableObject runnableObject = queuedRunnableObjects.get(0);
      if (runnableObject.getStatus() == RunnableObject.WAITING) {
        addCurrentRemoveQueued(runnableObject);
        new Thread(runnableObject).start();
        runnableObject.setStatus(RunnableObject.IN_PROGRESS);
      }
    }
  }

  /**
  * Adds the runnableObject to the currentThreadsObjects and removes it from the queuedRunnableObjects
  */
  private synchronized void addCurrentRemoveQueued(RunnableObject runnableObject) {
    currentRunnableObjects.add(runnableObject);
    queuedRunnableObjects.remove(runnableObject);
  }

  /**
   * Checks whether the current and queued notification lists are empty. Returns true if they both are.
   *
   * @return
   */
  private boolean isFinished() {
    if (queuedRunnableObjects.isEmpty() && currentRunnableObjects.isEmpty()) {
      return true;
    }
    return false;
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T23:42:25.777

您刚刚重新发明了[ThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)！

由于您使用的是 java 7，因此很想使用新的 fork join API，但我很确定在您的情况下 ThreadPoolExecutor 就是您所需要的。

# javascript - Javascript - 将整数与整数数组进行比较

> ID：10923778
> 
> 赞同：0
> 
> 时间：2012-06-06T23:33:45.077
> 
> 标签：javascript, arrays

有没有办法将整数与整数数组进行比较？例如，要确定一个 int 是否大于任何数组 int？

```
var array = [1, 2, 3, 4];
if(5 > array){ 
    // do something 
} 
```

更新：我想我的意思是，比数组中的最大数大 5。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T23:38:25.900

您可以使用[Math.max](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/max)并[应用](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)

```
if (5 > Math.max.apply(Math, array)) {
    // do something
} 
```

**更新**：解释它的工作原理。它在我链接的文档中有所描述，但我会在这里尝试更清楚：

`Math.max`返回零个或多个数字中的最大值，因此：

```
Math.max(1, 2, 3, 4) // returns 4 
```

`apply`调用具有给定“this”值（第一个参数）和作为数组提供的参数（第二个）的函数。所以：

```
function sum(a, b) {
    return a + b;
}

console.log(sum.apply(window, [2, 3])); // 5 
```

因此，如果您有一个整数数组并且想要获得最大值，则可以将它们组合为：

```
console.log(Math.max.apply(Math, [1, 2, 3, 4])); // 4 
```

因为它就像有：

```
console.log(Math.max(1, 2, 3, 4)); 
```

不同之处在于您传递了一个数组。

希望现在更清楚了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T23:37:25.150

没有内置的好和可读的方法，但可以简单地通过以下方式完成：

```
var bigger = true;
for (var i =0; i < array.length; i++) {
    if (5 <= array[i]) {
        bigger = false;
        // you can add here : break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T23:38:45.290

当然，你可以对数组进行排序，取最后一个元素，看看你的整数是否大于那个。或者，您可以循环并检查每一个。由你决定。循环是一种更高效的方式。

```
//maybe check the bounds on this if you know it can be a blank array ever
var max = myArray[0];
for(var x = 0; x < myArray.length; x++) {
    max = Math.max(max, myArray[x]);
}

if(500 > max) {
    //do something
} 
```

# jquery - jQuery scrollTop 有点跳

> ID：10923782
> 
> 赞同：2
> 
> 时间：2012-06-06T23:34:21.747
> 
> 标签：jquery, scroll, scrolltop

我正在建立一个垂直滚动的网站。

我已经实现了下面的jquery：

```
<script type="text/javascript">
$("document").ready(function() {            

            $('.homebutton').click(function(){

                $('html, body').animate({
                    scrollTop: $("#home").offset().top
                }, 1500);                  

             });

            $('.aboutbutton').click(function(){

                $('html, body').animate({
                    scrollTop: $("#about").offset().top
                }, 1500);                  

             });

            $('.portfoliobutton').click(function(){

                $('html, body').animate({
                    scrollTop: $("#portfolio").offset().top
                }, 1500);                  

             });

            $('.contactbutton').click(function(){

                $('html, body').animate({
                    scrollTop: $("#contact").offset().top
                }, 1500);                  

             });

});
</script> 
```

使用以下 HTML：

```
<div id="wrapper">

<div id="home" class="tab home">

    <div class="header">

        <div class="logo">

            <img src="images/logo.jpg" />

        </div>

        <div class="menuholder">

            <ul id="homemenu" class="menu">

                <li><a class="active homebutton" href="#home">HOME<br /></a>   </li>
                <li><a class="aboutbutton" href="#about">ABOUT<br /></a>   </li>
                <li><a class="portfoliobutton" href="#portfolio">PORTFOLIO<br /></a>   </li>
                <li><a class="contactbutton" href="#contact">CONTACT<br /></a>   </li>

            </ul>

        </div>

        <div class="clr"></div>

    </div>

    <div class="content">

    </div>

</div>

<div id="about" class="tab">

    <div class="header">

        <div class="logo">

            <img src="images/logo.jpg" />

        </div>

        <div class="menuholder">

            <ul id="aboutmenu" class="menu">

                <li><a href="#home" class="homebutton">HOME</a>   </li>
                <li><a class="active aboutbutton" href="#about">ABOUT<br /><span>All you need to know</span></a>   </li>
                <li><a href="#portfolio" class="portfoliobutton">PORTFOLIO<br /><span>See what we can do!</span></a>   </li>
                <li><a href="#contact" class="contactbutton">CONTACT<br /><span>Get in touch and say HI!</span></a>   </li>

            </ul>

        </div>

    </div>

    <div class="content">

    </div>

</div>

<div id="portfolio" class="tab">

    <div class="header">

        <div class="logo">

            <img src="images/logo.jpg" />

        </div>

        <div class="menuholder">

            <ul id="portfoliomenu" class="menu">

                <li><a href="#home" class="homebutton">HOME</a>   </li>
                <li><a href="#about" class="aboutbutton">ABOUT<br /><span>All you need to know</span></a>   </li>
                <li><a class="active portfoliobutton" href="#portfolio">PORTFOLIO<br /><span>See what we can do!</span></a>   </li>
                <li><a href="#contact" class="contactbutton">CONTACT<br /><span>Get in touch and say HI!</span></a>   </li>

            </ul>

        </div>

    </div>

    <div class="content">

    </div>

</div>

<div id="contact" class="tab">

    <div class="header">

        <div class="logo">

            <img src="images/logo.jpg" />

        </div>

        <div class="menuholder">

            <ul id="contactmenu" class="menu">

                <li><a href="#home" class="homebutton">HOME</a>   </li>
                <li><a href="#about" class="aboutbutton">ABOUT<br /><span>All you need to know</span></a>   </li>
                <li><a href="#portfolio" class="portfoliobutton">PORTFOLIO<br /><span>See what we can do!</span></a>   </li>
                <li><a class="active contactbutton" href="#contact">CONTACT<br /><span>Get in touch and say HI!</span></a>   </li>

            </ul>

        </div>

    </div>

    <div class="content">

    </div>

</div>

</div> 
```

我的问题是在主页和联系人链接之间跳转时滚动可能会有点跳跃。诚然，只有当您在卷轴有时间喘口气之前单击其中一个按钮时，它才会这样做，但是这个特定的客户对事情的工作方式非常具体，我知道他们会接受它（而且我永远不会故意想要发布带有错误的东西，无论多么轻微）。

我的问题是，有没有一种简单的方法可以在 jQuery 中对动作进行排队，以便前一个动作在下一个动作开始之前有时间停下来喘口气？

我在 click 函数和 animate 函数之后尝试了 .stop() 。click 函数之后的那个让情况变得更糟，而 animate 函数之后的那个把它全部破坏了......

提前谢谢了！

凯文

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T00:04:17.943

```
$('.homebutton').click(function(e){
    e.preventDefault(); //This will stop the jumping
    $('html, body').animate({
        scrollTop: $("#home").offset().top
    }, 1500);                  
}); 
```

此外，作为额外的好处，如何将其全部设为一项功能，而不是为每个菜单项设置一项功能？就像是：

```
$("#homemenu a").click(function(e){
    e.preventDefault();
    var section = $(this).attr("href");
    $("html, body").animate({
        scrollTop: $(section).offset().top  
    }, 1500);   
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T07:06:00.310

这就是你所拥有的。

```
$('.homebutton').click(function(){
    $('html, body').animate({
        scrollTop: $("#home").offset().top
    }, 1500);                  
}); 
```

如果你把 return false ，那就行了。它也阻止了默认操作。

```
$('.homebutton').click(function(){
    $('html, body').animate({
        scrollTop: $("#home").offset().top
    }, 1500);

    return false;                  
}); 
```

此外，您可能希望研究向下重构以处理这些滚动到特定点的单击事件。

前任：

```
$('traverse to menu anchor').on('click', function() {
    var target = $(this).attr('href');

    $('html, body').animate({ scrollTop: $(target).offset().top }, 1000 );
        return false;
}); 
```

希望这可以帮助。

# php - Facebook Graph API 会话到期

> ID：10923783
> 
> 赞同：2
> 
> 时间：2012-06-06T23:34:34.077
> 
> 标签：php, facebook, session, facebook-graph-api

我使用以下 PHP 代码将随机消息从我的数据库发布到我的 Facebook 粉丝页面：

```
require_once('src/facebook.php');
$appid = 'MY_APP_ID';
$appsecret = 'APP_SECRET';
$pageid = 'MY_PAGE_ID';
$token = 'MY_ACCESS_TOKEN';

// Create our Application instance (replace this with your appId and secret).
$facebook = new Facebook(array(
  'appId'  => $appid,
  'secret' => $appsecret,
));

$message = 'Hello World';

//Information that makes up the facebook page post
$attachment = array(
        'access_token' => $token,
        'message' => $message
);

//Try to post to the facebook page
try{
$res = $facebook->api('/'.$pageid.'/feed','POST',$attachment);

} catch (Exception $e){

    echo $e->getMessage();
} 
```

这是`src/facebook.php`- [https://github.com/facebook/facebook-php-sdk/blob/master/src/facebook.php](https://github.com/facebook/facebook-php-sdk/blob/master/src/facebook.php)

但它会返回如下错误消息：

```
Error validating access token: Session has expired at unix time 1339020000\. The current unix time is 1339022625. 
```

所以我的问题是我应该在我的代码中做哪些更改？

PS：我还查看了有关会话到期的相关问题，但没有一个对我有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:32:53.157

在这种情况下，我假设您使用的是用户访问令牌，而不是页面访问令牌。

您应该使用`manage_pages`权限对应用程序进行身份验证，这将使您可以访问为您的页面检索访问令牌。这些有更长的有效期。

在授权此权限并检索当前用户的有效访问令牌后，您应该向以下端点发出请求以检索您管理的页面和应用程序的列表：

```
https://graph.facebook.com/me/accounts?access_token=USER_ACCESS_TOKEN 
```

此响应中包含这些页面和应用程序的访问令牌：

```
{
  "data": [
    {
      "name": "PAGE_TITLE", 
      "access_token": "PAGE_ACCESS_TOKEN", 
      "category": "PAGE_CATEGORY", 
      "id": "PAGE_ID"
    }, 
```

您可以在此处查看有关此内容的更多信息：

[https://developers.facebook.com/docs/authentication/pages/](https://developers.facebook.com/docs/authentication/pages/)

**更新**

对于过期的访问令牌，您需要通过浏览器访问您的应用程序并遵循身份验证流程来重新验证您的用户。

有关如何处理此问题的文档在这里：http: [//developers.facebook.com/docs/authentication/access-token-expiration/](http://developers.facebook.com/docs/authentication/access-token-expiration/)

然后，您可以请求一个寿命更长的访问令牌，这些令牌仍然会过期。您可以在方案 4 下查看有关如何在此处请求其中一项的信息： [​​http://developers.facebook.com/roadmap/offline-access-removal/](http://developers.facebook.com/roadmap/offline-access-removal/)

# selenium - 访问 iframe 中的文件对话框

> ID：10923785
> 
> 赞同：1
> 
> 时间：2012-06-06T23:34:48.930
> 
> 标签：selenium, selenium-webdriver

我有一个内联 jsp 页面，其中包含 html 类型的代码：文件。下面显示的 IFRAME 标记位于主 jsp 中。我想传递文件名并使用 Web 驱动程序提交此文件对话框。基本上想做类似的事情：

```
WebElement elem = driver.findElement(By.id("attachmentfile"));        
elem.sendKeys("C:\\Users\\Public\\Pictures\\Sample Pictures\\Koala.jpg"); 
```

但是，我无法获取附件文件 ID。任何帮助，将不胜感激。谢谢。

主要jsp：

```
<IFRAME id=fileupload src="fileupload.jsp?type=uploadbutton"
frameBorder=0></IFRAME></TD></TR></FORM> 
```

fileupload.jsp 如下：

```
 <html> <body>
    <form name="frm_fileUpload" ENCTYPE="multipart/form-data"><%
    <tr>
    <td>
        <input type="file" name="attachmentfile" 
        id="attachmentfile" onChange="uploadFile   ();" />
        <input type="button" name="uploadbutton" id="uploadbutton" 
        value="Upload" class="button" />
    </td>
    </tr>
   </table>
   </form>                
   </body>
   </html> 
```

# php - 用 php 删除 mime 附件

> ID：10923786
> 
> 赞同：2
> 
> 时间：2012-06-06T23:35:22.700
> 
> 标签：php, imap, mime

Google 为我提供了大量关于如何添加附件以及如何使用 PHP 从 imap 消息中提取附件的资源，但我找不到任何东西来演示如何从 imap 电子邮件中删除 mime 附件。

有什么建议么 ？？

我曾尝试使用 imap_mail_copy 和 imap_mail_move 函数，希望它能提供不带附件复制/移动的选项，但不幸的是它没有。

我花了几个小时搜索和试验，但到目前为止还没有提出任何解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-04T13:31:08.450

尝试使用正则表达式切割零件或爆炸：

```
$mimeParts = explode('\r\n\r\n', $mimeMessageContent); 
```

并删除带有文本的部分`Content-Disposition`：：

# wcf - 开放类型实体上的属性的合法字符

> ID：10923789
> 
> 赞同：1
> 
> 时间：2012-06-06T23:35:27.143
> 
> 标签：wcf, wcf-data-services, odata

我已经实现了一个 WCD 数据服务/OData 服务器，将实体设置为开放类型。我正在使用自定义 IMetadataProvider、IQueryProvider 等。我可以创建我的实体、设置打开的属性、检索它们、更新和搜索——主要是。当我尝试搜索名称中带有“破折号”之类的属性时，问题就来了

这有效：

```
GET /Service/Cases?$filter=ABC eq 'ABC' 
```

这不起作用：

```
GET /Service/Cases?$filter=A-BC eq 'ABC' 
```

这也不起作用：

```
GET /Service/Cases?$filter=A%2DBC eq 'ABC' 
```

我收到以下错误：

```
<error xmlns="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
  <code />
  <message xml:lang="en-US">Syntax error at position 7.</message>
</error> 
```

（正如我所说，我可以获得一个名称中带有破折号的开放属性的实体。并更新它等）

我猜想解析 URL 的任何东西都将破折号解释为减法表达式，这是有道理的。除了如果我正确阅读 OData 规范，实体的属性名称由 entitySimpleProperty 定义（规范中没有定义，但我认为是 entityProperty 的拼写错误）...定义为 *pchar，如RFC 3986 第 3.3 节。反过来，评估为...

```
pchar       = unreserved / pct-encoded / sub-delims / ":" / "@"
unreserved  = ALPHA / DIGIT / "-" / "." / "_" / "~"
pct-encoded = "%" HEXDIG HEXDIG
sub-delims  = "!" / "$" / "&" / "'" / "(" / ")"
                  / "*" / "+" / "," / ";" / "=" 
```

其中 ALPHA 是 %41-%5A 和 %61-%7A，DIGIT 是 %30-%39，连字符是 %2D，句点是 %2E，下划线是 %5F，波浪号是 %7E。

这表明破折号是一个合法的字符，绕了一圈。不是我需要它。那么，规范的哪一部分规定了允许的字符是什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:15:50.607

属性必须根据 CSDL (EDM) 规则有效。这允许任何有效的标识符，例如由这段 XSD 定义的：

```
 <xs:simpleType name="TSimpleIdentifier">
    <xs:restriction base="xs:string">
      <xs:maxLength value="480" />
      <!-- The below pattern represents the allowed identifiers in ECMA specification -->
      <xs:pattern value="[\p{L}\p{Nl}][\p{L}\p{Nl}\p{Nd}\p{Mn}\p{Mc}\p{Pc}\p{Cf}]{0,}" />
    </xs:restriction>
  </xs:simpleType> 
```

它基本上是任何有效的编程语言标识符。不幸的是，OData 规范可能有点令人困惑（甚至可能是错误的）。

请注意，WCF DS 在大多数情况下不会对此进行验证，因为验证检查的成本太高了。它依赖于 IDataServiceMetadataProvider 实现来做正确的事情。这就是为什么您会看到它在某些情况下有效，而在某些情况下却无效。

# php - PHP：如何扩展库？

> ID：10923790
> 
> 赞同：2
> 
> 时间：2012-06-06T23:35:30.143
> 
> 标签：php, mysql

对于一个项目，我使用了一个名为 meekrodb 的 mysql 库，我想用我自己的 mysql 函数制作一个扩展类，所以如果更新了库，我只需重新编辑扩展类。

作为一名初级程序员，我尝试按如下方式扩展库：

```
require './libs/meekrodb.2.0.class.php';
class Database_extend extends MeekroDB  {
protected $db;
protected $database='';

function __construct($server=null, $user=null, $pass=null, $database=null)
{   
    // Creating a database object

$this->db= parent::__construct();  
    //$this->db= parent::__construct($server,$user,$pass,$database);  
    $this->database=$database;

} */
 public function table_exists($tableName=null) {
 if(is_null($tableName )){ 
 trigger_error("Error in: ".__METHOD__." Missing table name.",E_USER_ERROR);     
 }
 else{
$sql = "SELECT COUNT(*) AS count FROM information_schema.tables WHERE table_schema = '$this->database' AND table_name = '$tableName'";
$exists=$this->db->query($sql);
if($exists['count']>0)
{  return TRUE;}
else { return FALSE;}
}  
}#-table_exists 
```

如果我测试这个类（test.php）

```
 require './config.inc.php';
 require './libs/Session.php';
 require_once './libs/Ngram.class.php';   
 require_once './libs/Database_extend.class.php';
 /*require_once './libs/meekrodb.2.0.class.php';*/

 DB::$user=DB_USER;
 DB::$password=DB_PASS;
 DB::$dbName=DB_DATABASE;
 $db1=new Database_extend(DB_SERVER, DB_USER, DB_PASS, DB_DATABASE);
 $t=$db1->query("SELECT * FROM temp LIMIT 0,1");
 //var_dump($t); //THIS WORKS
 var_dump($db1->table_exists('tem')); // THIS DOESN'T work 
```

我收到“在非对象上调用成员函数 query()”错误，这意味着 db 变量不是对象。

我怎样才能正确解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T23:39:27.910

The first thing that comes to mind is that you don't pass on the initialization parameters here:

```
$this->db= parent::__construct(); 
```

Your override method receives `$server, $user, $pass, $database`, but you don't make them available to the original code. Hencewhy it won't correctly set up the `$db` property.

Also you overwrite `$this->db`. But the parent constructor would certainly assign it itself.

# javascript - 更改 FusionTablesLayerOptions 样式选项

> ID：10923793
> 
> 赞同：2
> 
> 时间：2012-06-06T23:35:50.597
> 
> 标签：javascript, google-maps, google-maps-api-3, google-fusion-tables

如何更改 FusionLayer 对象的样式？

我正在尝试创建一个 onClick 事件，该事件将突出显示被点击的状态。为了做到这一点，我希望对象 strokeOpacity 增加并且 strokeColor 变为红色。

如果对象是多边形，我可以这样做：

```
var red = "#FF0000"; //red
function LoadStates() {
    var points = [
    new google.maps.LatLng(34.984, -85.605),   
    new google.maps.LatLng(32.864, -85.184) 

    //...etc  
    ];

    var alabama = new google.maps.Polygon({
        paths: points,
        strokeColor: outlineColor,
        strokeOpacity: 0,
        strokeWeight: 2,
        fillColor: invisColor,
        fillOpacity: 0
    });

    //add event listeners to polygon, then add polygon to map
    google.maps.event.addListener(alabama, 'mouseover', function () {
        alabama.setOptions({ strokeColor: red });
        alabama.setOptions({ strokeOpacity: 1 });
    });

   google.maps.event.addListener(alabama, 'mouseout', function () {
        alabama.setOptions({ strokeOpacity: 0 });
    });

    google.maps.event.addListener(alabama, 'click', function () {
        document.getElementById("StateName").innerHTML = "Alabama"; extend();
    });
    alabama.setMap(map);

} 
```

由于对象是一个多边形，我可以简单地使用 .setOptions 来更改 strokeColor 和 Opacity。

如何更改从 kml 文件创建的 FusionLayers 对象的多边形选项？

“亚利桑那州”边界文件。

```
function LoadAZ() {
    arizona = new google.maps.FusionTablesLayer({
        suppressInfoWindows: false,

        query: {
            select: 'col4',
            from: '210217',
            where: "col3 <= 'B' "
        },

        styles: [{
            polygonOptions: {
                strokeColor: outlineColor,
                strokeOpacity: 0.01,
                strokeWeight: 2,
                fillColor: invisColor,
                fillOpacity: .01
            } 
```

这里的样式选项会改变。如何更改事件的选项？我想做这样的事情：

```
google.maps.event.addListener(arizona, 'mouseover', function () {
        arizona.setOptions({ strokeOpacity: 1 });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T17:22:06.187

您可以使用该`setOptions`方法直接更改它。

```
var selectedOptions = {
        styles: [{
            polygonOptions: {
                strokeColor: red,
                strokeOpacity: 1,
                strokeWeight: 2,
                fillColor: invisColor,
                fillOpacity: .01
            }

        }]
    }

google.maps.event.addListener(arizona, 'click', function (clickEvent) {
        document.getElementById("StateName").innerHTML = "Arizona"; extend();
        arizona.setOptions(selectedOptions);
    }); 
```

这将直接更改 kml 文件的多边形选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T01:31:30.970

这是一个使用谷歌可视化 API 更改 FusionTable 中多边形样式的[示例](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_mouseover.html)，以从存储在表中的数据创建原生 v3 多边形并向它们添加鼠标悬停/移出事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T15:28:29.403

目前您无法处理`mouseover`FusionTablesLayer，唯一支持的事件是`click`（如果我错了，请纠正我）。

但是：有一个名为[Fusion Tips](http://gmaps-utility-gis.googlecode.com/svn/trunk/fusiontips/docs/examples.html)的库，可以为 FusionTablesLayer启用`mouseover`and`mouseout`事件。查看这篇关于如何使用库的[好博文。](http://csessig.wordpress.com/2012/02/07/multiple-layers-and-rollover-effects-for-fusion-table-maps/)

# java-me - 为 Asha 303 创建风景游戏画布

> ID：10923801
> 
> 赞同：1
> 
> 时间：2012-06-06T23:36:44.993
> 
> 标签：java-me, midp-2.0, series-40

我搜索了所有论坛打赌从未找到任何答案满足我的问题。

我想为诺基亚 Asha 303 创建一个横向的游戏，有没有办法将游戏画布旋转 90 度使方向变为横向？因为我看这个视频[愤怒的小鸟阿莎 303](http://www.youtube.com/watch?v=yKbo-gFdxgY)。游戏是横向的，所以我很好奇如何在 j2me 中做到这一点。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T10:26:13.280

从 MIDP 2.0 开始，我们可以使用 Sprite 将图像旋转 90 度。我们需要的第一件事是正确大小的图像。以下代码可以在扩展 Canvas 的类的构造函数中 - 考虑 Sprite 和 Image 属性：

```
    int width = Math.max(super.getWidth(), super.getHeight());
    int height = Math.min(super.getWidth(), super.getHeight());
    屏幕 = Image.createImage（宽度，高度）；
    精灵 = 新精灵（屏幕）；
    if (super.getWidth() < super.getHeight()) { // 竖屏
        sprite.setTransform(Sprite.TRANS_ROT90);
        sprite.setPosition(0, 0);
    }

```

绘制内容时，请使用可变图像图形，然后使用如下所示的图像更新精灵。

```
    受保护的空漆（图形g1）{
        图形 g = screen.getGraphics();
        // ... 画图
        this.sprite.setImage(screen, screen.getWidth(), screen.getHeight());
        sprite.paint(g1);
    }

```

如何在手机显示屏上使用尽可能大的区域？
. 不要在 Canvas 上设置标题
。不要将命令添加到您的 Canvas
。在调用 super.getWidth() 和 super.getHeight() 之前调用 setFullScreenMode(true)

来自[http://smallandadaptive.blogspot.com.br/2009/08/fullscreen-landscape.html](http://smallandadaptive.blogspot.com.br/2009/08/fullscreen-landscape.html)

# delphi - Firemonkey 所需的手柄

> ID：10923803
> 
> 赞同：0
> 
> 时间：2012-06-06T23:36:46.333
> 
> 标签：delphi, handle, firemonkey

如何在 firemonkey 中设置表单的句柄所需属性。在正常的 delphi 中，我使用在运行时在其他组件中创建表单。IE：

```
Form1 := TForm1.Create(Panel1);
Form1.Parent := Panel1;
Form1.HandleNeeded; 
```

但是现在在 Firemonkey 中，每个人都没有句柄。那么有没有另一种方法可以做到这一点。它具有父 Panel1 是非常重要的，因为表单必须只显示在 panel1 中，而不能显示在屏幕上的其他位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:09:38.360

在 FMX 中，如果您希望一种形式显示在另一种形式中：

在子窗体上，在容器内添加任何控件（例如 TLayout）。创建子窗体。将 TLayout（等）的 Parent 属性设置为父表单（或者，更可能是父表单上的容器，以便您可以将子 TLayout 的对齐方式设置为 alClient）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:30:30.290

这就是我正在尝试的，但表格仍然作为独立表格出现。不在布局中：

```
TNewLogin:=TFrmLogin.Create(Self);
TNewLogin.Parent:=Layout1;
TNewLogin.Show; 
```

# javascript - jQuery - 在事件上创建新函数

> ID：10923804
> 
> 赞同：1
> 
> 时间：2012-06-06T23:36:58.987
> 
> 标签：javascript, jquery

在 JavaScript/jQuery 中，如果我想要一个可以在已附加到 DOM 的元素上运行的函数，则必须在将元素附加到 DOM*之后*创建它。我怎样才能做到这一点？我听说可以使用 jQuery`.on()`函数来做到这一点，但我不太确定如何。

*HTML：*

```
<span>Hello Stackoverflow</span>​ 
```

*JavaScript：*

```
$("span").click(function () {
   addMyElement();
});

$("p").click(function () {
   removeMyElement(this);
});

function addMyElement() {
    $("<p>Hello World</p>").appendTo("body");
}
function removeMyElement(myElement) {
    $(myElement).remove();
} 
```

[jsFiddle.net](http://jsfiddle.net/wowpatrick/wWXrK/5/)上的示例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T23:44:31.983

这称为[委托事件方法](http://api.jquery.com/on/#direct-and-delegated-events)，它的工作原理如下：

```
$("body").on("click", "p", function () {
    // ...
}); 
```

您`body`可以使用`p`.

**演示：http:** [//jsfiddle.net/wWXrK/6/](http://jsfiddle.net/wWXrK/6/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-06T23:45:56.773

```
function addMyElement() {
    $("<p>Hello World</p>").appendTo("body").click(function () {
       removeMyElement(this);
    });
} 
```

会为你工作，虽然所有这些链接都没有很大的可读性。

# jpa - JPA 2.0 Eclipselink OrderColumn 支持

> ID：10923806
> 
> 赞同：1
> 
> 时间：2012-06-06T23:37:18.827
> 
> 标签：jpa, jpa-2.0, eclipselink

我正在阅读有关 Eclipselink 对[@OrderColumn](http://wiki.eclipse.org/EclipseLink/Examples/JPA/2.0/OrderColumns)的支持的文档。看起来这仅适用于 List 而不是 Set。我问的原因是因为我有一个 ManyToMany 双向关系（使用连接表），它是一个 Set 并用 HashSet 实现，因为集合不能有重复项。

我想使用@OrderColumn 对该集合中的条目进行排序，但似乎我只能将其应用于列表，但是使用列表会打破我的独特要求。这种理解正确吗？

如果是这样，这种情况下推荐的策略是什么？

谢谢，

-诺亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T01:39:56.217

这看起来类似于以下问题：

[为什么 JPA 映射属性不能是 LinkedHashset？](https://stackoverflow.com/questions/3920531/why-cannot-a-jpa-mapping-attribute-be-a-linkedhashset)

该`Set`接口没有定义元素的顺序，因此您的集合需要是一个具体的实现，例如 a `TreeSet`or`LinkedHashSet`实现，而不仅仅是任何旧的`Set`. 但是你的 JPA 提供者通常会使用自己的集合实现和特殊的魔法来处理延迟加载。

上面的答案表明，如果您愿意放弃延迟加载，可能会有一些特定于 EclipseLink 的解决方法。

我可以想到两种选择，但都不是完美的：

*   只需使用`List`并依赖业务逻辑来强制唯一性，并使用 DB UNIQUE 约束作为后盾。老实说，我最终`List`几乎反射性地使用 for 集合，即使在`Set`更合适的时候也是如此；我承认这很草率，但在多年的实践中还没有给我造成任何重大问题。

*   使用 a`Set`并更改`@ManyToMany`为`@OneToMany`，并使您的带有订单列的联接表成为`Comparable`使用订单列实现的实际实体。然后，重载你的getter方法来做类似的事情

    ```
    if (! this.set instanceof TreeSet) 
       this.set = new TreeSet<T>(this.set); 
    return this.set; 
    ```

# awk - Why does awk "not in" array work just like awk "in" array?

> ID：10923812
> 
> 赞同：25
> 
> 时间：2012-06-06T23:37:51.403
> 
> 标签：awk, gawk

Here's an awk script that attempts to set difference of two files based on their first column:

```
BEGIN{
    OFS=FS="\t"
    file = ARGV[1]
    while (getline < file)
        Contained[$1] = $1
    delete ARGV[1]
    }
$1 not in Contained{
    print $0
} 
```

Here is TestFileA:

```
cat
dog
frog 
```

Here is TestFileB:

```
ee
cat
dog
frog 
```

However, when I run the following command:

```
gawk -f Diff.awk TestFileA TestFileB 
```

I get the output just as if the script had contained "in":

```
cat
dog
frog 
```

While I am uncertain about whether "not in" is correct syntax for my intent, I'm very curious about why it behaves exactly the same way as when I wrote "in".

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-06T23:45:48.020

我找不到任何[关于](http://www.gnu.org/software/gawk/manual/html_node/Reference-to-Elements.html#Reference-to-Elements).`element not in array`

试试`!(element in array)`。

* * *

我猜：`awk`视为`not`未初始化的变量，因此`not`被评估为空字符串。

```
$1 not == $1 "" == $1 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-09T22:22:23.263

我想出了这个。( x in array ) 返回一个值，所以要“不在数组中”，你必须这样做：

```
if ( x in array == 0 )
   print "x is not in the array" 
```

或在您的示例中：

```
($1 in Contained == 0){
   print $0
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-27T15:04:26.760

在我解决这个问题的方法中，我使用以下`if-else`语句：

```
if($1 in contained);else{print "Here goes your code for \"not in\""} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T02:00:30.920

不确定这是否像您尝试做的那样。

```
#！/bin/awk
# 将读入第二个 arg 文件并对令牌进行哈希处理
# 在第一列中找到。然后它将读取第一个 arg 文件并打印任何
# 第一列中带有标记的行与已定义的标记不匹配
开始{
    OFS=FS="\t"
    文件 = ARGV[1]
    而（getline <文件）
        包含[$1] = $1
# delete ARGV[1] # 不知道你在想什么
# for(i in Contained) {print Contained[i]} # 调试，不仅仅是虐待狂
    关闭（ARGV[1]）
}
{
   if ($1 in Contained){} else { print $1 }
}

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-05T12:23:34.250

在 awk 命令行中，我使用：

```
 ! ($1 in a)
$1 pattern
a array 
```

例子：

```
awk 'NR==FNR{a[$1];next}! ($1 in a) {print $1}' file1 file2 
```

# php - Loading JS LocalStorage into PHP Variable

> ID：10923813
> 
> 赞同：11
> 
> 时间：2012-06-06T23:38:17.083
> 
> 标签：php, local-storage

In the header of my doc I am defining a email and password. I would like to user local storage. However I am having trouble loading items from localstorage into my php vars.

Here is my code.

```
<script>
localStorage.setItem('email', '<?php echo $_SESSION['email'];?>');  
localStorage.setItem('password', '<?php echo $_SESSION['password'];?>');
</script>

<?php
$user_email = "<script>document.write(localStorage.getItem('email'));</script>";
$password = "<script>document.write(localStorage.getItem('password'));</script>";

define('XOAUTH_USERNAME', $user_email);
define('XOAUTH_PASSWORD', $password);
?>

<html>
<head></head>
<body></body>
</html> 
```

I know that I am setting the localstorage right because I'm checking in chrome and both key and value are correct. I'm just have trouble passing the value of the keys into the define() of my php.

Thanks for the help!

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-27T14:44:12.043

您不能通过 PHP 访问 localstorage。您需要编写一些将本地存储数据发送回脚本的 javascript。

如果您使用的是 jQuery，请执行以下操作。

**set_page.php**

```
<script>
localStorage.setItem('email', '<?php echo $_SESSION['email'];?>');  
localStorage.setItem('password', '<?php echo $_SESSION['password'];?>');
</script> 
```

**登录页面.php**

```
<script>
var email = localStorage.getItem('email'), password = localStorage.getItem('password');
$.POST('login_response.php', {'email':email,'password':password}, function(data){
  alert('Login Successful.  Redirect to a different page or something here.');
}
</script> 
```

**login_response.php**

```
<?
$email = $_POST['email'];
$password = $_POST['password'];
//Handle your login here.  Set session data, etc.  Be sure to sanitize your inputs.
?> 
```

请记住，人们可以编辑本地存储中的内容，因此永远不要相信用户输入。狡猾的入侵者也可以简单地开始将数据发布到您的 login_response.php 页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-13T05:54:57.810

如果您只需要保存电子邮件和密码（小数据），那么您可以为此使用 cookie，您可以通过 PHP 和 JavaScript 访问它们。

如何在 PHP 中设置 cookie：

```
setcookie("TestCookie", $value, time()+3600, "/", "example.com"); 
```

如何删除cookie：

```
setcookie("TestCookie", $value, time()-3600, "/", "example.com"); 
```

如何在 PHP 中获取 cookie：

```
$_COOKIE["TestCookie"] 
```

本例中的最后一个参数：

```
setcookie("TestCookie", $value, time()+3600, "/", "example.com", 1); 
```

表示 cookie 只能通过来自客户端的安全 HTTPS 连接传输。当设置为 TRUE 时，只有存在安全连接时才会设置 cookie。在服务器端，程序员只能在安全连接上发送这种 cookie（例如相对于 $_SERVER["HTTPS"]）。

来源：[https ://secure.php.net/manual/en/function.setcookie.php](https://secure.php.net/manual/en/function.setcookie.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T23:46:41.523

这是错误的，这样做

```
<script>
   localStorage.setItem('email', "<?php echo $_SESSION['email'];?>");
   localStorage.setItem('password', "<?php echo $_SESSION['password'];?>");
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-28T06:30:57.383

您可以通过 PHP 访问本地存储。您需要编写一些在 COOKIE 中存储 localstorage 值的 javascript，您可以使用 PHP 来使用它。

```
<script>
var email = localStorage.getItem("email");
var d = new Date();
d.setTime(d.getTime() + (1*24*60*60*1000));
var expires = "expires="+ d.toUTCString();
document.cookie = 'email' + "=" + email+ ";" + expires + ";path=/";
</script>
<?php 
print_r($_COOKIE['email']);
?> 
```

# iphone - Why is UITextField's window nil?

> ID：10923816
> 
> 赞同：1
> 
> 时间：2012-06-06T23:38:22.797
> 
> 标签：iphone, ios, cocoa-touch, uikit, uitextfield

I am trying to implement "previous," "next," and "done" buttons for a series of `UITextField`s, each of which is contained in a `UITableViewCell` in a grouped `UITableView`. I hold on to the `UITextFields` in an `NSMutableArray`, and keep an integer pointing to the `UITextField` that is currently active. Here are the two selectors that get fired when the Previous and Next buttons are tapped, respectively.

```
-(IBAction)didSelectPreviousButton:(id)sender
{    
    if ((textFieldIndex - 1) >= 0) {
        UITextField *currentField = [self.testTextFields objectAtIndex:(textFieldIndex)];
        UITextField *nextTextField = [self.testTextFields objectAtIndex:(--textFieldIndex)];
        BOOL result = [nextTextField becomeFirstResponder];
        NSLog([NSString stringWithFormat:@"currentField's window: %@", currentField.window]);
        NSLog([NSString stringWithFormat:@"nextTextField's window: %@", nextTextField.window]);
    } else {
        [self dismissKeyboard:sender];
    }
}

-(IBAction)didSelectNextButton:(id)sender
{
    if ((textFieldIndex + 1) < [self.inspectionItemSpec.numberOfTests intValue]) {
        UITextField *currentField = [self.testTextFields objectAtIndex:(textFieldIndex)];
        UITextField *nextTextField = [self.testTextFields objectAtIndex:(++textFieldIndex)];
        BOOL result = [nextTextField becomeFirstResponder];
        NSLog([NSString stringWithFormat:@"currentField's window: %@", currentField.window]);
        NSLog([NSString stringWithFormat:@"nextTextField's window: %@", nextTextField.window]);
    } else {
        [self dismissKeyboard:sender];
    }
} 
```

As you can see, I am logging the window property of the current & next text field, and in the `didSelectNextButton`, everything is correct. However, in `didSelectPreviousButton`, `nextTextField.window` is always `nil`. Why would this be happening?

(Note that the previous button is enabled only after the user has tapped the next button once.)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:59:53.107

这可能是因为每个`UITextField`都在一段`UITableViewCell`时间内也被引用`self.testTextFields`。由于 iOS 中的表格重复使用单元格的方式，您可能（并且可能会）最终遇到数组中的下一个文本字段不是表格中下一个可见行中的文本字段的情况。

如果您发布`tableView:cellForRowAtIndexPath:`代码，这可能会使问题变得明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T23:47:26.140

窗口是视图层次结构的根。如果 window 属性为 nil，则视图尚未通过类似的方式添加到视图层次结构中

```
 [someViewInTheViewHierarchy addSubview:yourView]. 
```

# ruby-on-rails - Evaluating a user-input expression in Rails

> ID：10923818
> 
> 赞同：2
> 
> 时间：2012-06-06T23:38:27.817
> 
> 标签：ruby-on-rails, parsing, algebra

I need to accept an mathematical expression (including one or more unknowns) from the user and substitute values in for the unknowns to get a result.

I could use eval() to do this, but it's far too risky unless there is a way to recognise "safe" expressions.

I'd rather not write my own parser if I can help it.

I searched for a ready-made parser but the only one I found ( [https://www.ruby-toolbox.com/gems/expression_parser](https://www.ruby-toolbox.com/gems/expression_parser) , which seems to be the same as the one discussed at [http://lukaszwrobel.pl/blog/math-parser-part-4-tests](http://lukaszwrobel.pl/blog/math-parser-part-4-tests)) seems to be limited to the "four rules" +-*/. I need to include exponential, log and trig functions at the very least.

Any suggestions?

UPDATE: EXAMPLE

```
include Math

def exp(x)
 Math.exp(x)
end

def cos(x)
 Math.cos(x)
end

pi=Math::PI
t=2
string= '(3*exp(t/2)*cos(3*t-pi/2))'
puts eval(string) 
```

UPDATE - a pre-parsing validation step

I think I will use this regex to check the string has the right kinds of tokens in it:

`/((((cos\(|sin\()|(tan\(|acos\())|((asin\(|atan\()|(exp\(|log\())|ln\()(([+-\/*^\(\)A-Z]|\d)+))*([+-\/*^\(\)A-Z]|\d)+/`

But I will still implement the parsing method during the actual evaluation.

Thanks for the help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-07T17:15:05.703

您可以查看 Dentaku gem - [https://github.com/rubysolo/dentaku](https://github.com/rubysolo/dentaku)

您可以使用它来执行用户给定的公式。

这是此 gem 的示例用法。

```
class FormulaExecutor
  def execute_my_formula(formula, params)
    calc = Dentaku::Calculator.new

    # Param 1 => formula to execute
    # Param 2 => Hash of local variables
    calc.evaluate(formula, params)
  end
end

FormulaExecutor.new.execute_my_formula( "length * breadth", {'length' => 11, 'breadth' => 120} ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T00:05:41.693

首先假设 eval 不存在，除非您对评估的内容有非常严格的控制。即使您不解析，也可以将所有输入拆分为标记并检查每个标记是否是可接受的标记。

这是一种非常粗略的方法来检查输入除了有效标记之外什么都没有。许多重构/改进是可能的。

```
include Math

def exp(x)
 Math.exp(x)
end

def cos(x)
 Math.cos(x)
end

pi=Math::PI
t=2

a = %Q(3*exp(t/2)*cos(3*t-pi/2))  # input string

b = a.tr("/*)([0-9]-",'')  # remove all special single chars
b.gsub!(/(exp|cos|pi|t)/,'')  # remove all good tokens

eval(a) if b == ''  # eval if nothing other than good tokens. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T01:14:00.117

如果 eval 可以工作，那么您可以使用 ruby​​ 解析器（例如`gem install ruby_parser`）解析表达式，然后递归地评估 S 表达式，忽略或引发非算术函数的错误。这可能需要一些工作，但听起来很有趣：

```
require 'ruby_parser'

def evaluate_arithmetic_expression(expr)
  parse_tree = RubyParser.new.parse(expr)  # Sexp < Array
  return evaluate_parse_tree(parse_tree)
end

def evaluate_parse_tree(parse_tree)
  case parse_tree[0]
  when :lit
    return parse_tree[1]
  when :call
    meth = parse_tree[2]
    if [:+, :*, :-, :/, :&, :|, :**].include? meth
      val = evaluate_parse_tree parse_tree[1]
      arglist = evaluate_parse_tree parse_tree[3]
      return val.send(meth, *arglist)
    else
      throw 'Unsafe'
    end
  when :arglist
    args = parse_tree[1..-1].map {|sexp| evaluate_parse_tree(sexp) }
    return args
  end
end 
```

您应该能够很容易地增强它以包含`cos`,`sin`等内容。它适用于我尝试过的一些简单示例，并且包括免费检查格式是否正确（`Racc::ParseError`如果没有，解析会引发异常）。

# javascript - 从其属性名称中获取标签名称

> ID：10923821
> 
> 赞同：1
> 
> 时间：2012-06-06T23:38:49.283
> 
> 标签：javascript, jquery, forms

我有一个这样的数组：

```
["school_name":"My School Name", "school_number":"54546", "note":"", "class":1] 
```

和这样的HTML：

```
<input type="text" name="school_name" />
<input type="text" name="school_number" />
<textarea name="note" ></textarea>
<select name="class">
    <option value="1"> One </option>
    <option value="2"> Two </option>
    <option value="3"> Three </option>
</select> 
```

我想从其属性名称中获取标签的名称：

```
$('*[name=school_name]').attr("tag"); // this is input
$('*[name=class]').attr("tag"); // this is select
$('*[name=note]').attr("tag"); // this is textarea 
```

**请注意**，我已经尝试过：

```
$('*[name=school_name]').attr("tag");
$('*[name=school_name]').prop("tag");
$('*[name=school_name]').get(0).tagName;
$('*[name=school_name]')[0].tagName; 
```

这就是我想要做的：

如果标签名称是输入文本，

```
$("input[name=school_name]").attr("value", "My School Name"); 
```

如果标签名称是一个选择框，

```
$("select[name=class]").children("option[value=2]").attr("selected", "selected"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T23:49:59.380

如果我得到了你要找的东西，那么你需要使用[`filter`](http://api.jquery.com/filter/)

```
$('[name=school_number]').filter("input");
$('[name=class]').filter("select");
$('[name=note]').filter("textarea"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T23:53:30.397

```
var schoolProperties = {
    "school_name": "My School Name",
    "school_number": "54546",
    "note": "",
    "class": 1
};
for (var property in schoolProperties) {
    $('*[name=' + property + ']').attr('value', schoolProperties[property]);
} 
```

这在这个[小提琴](http://jsfiddle.net/vcPRW/)中得到了证明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T23:40:54.043

从 jQuery 1.6 开始，您想使用 $xxxxx.prop("tagName")

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T23:48:47.823

您可以使用该属性[`.nodeName`](https://developer.mozilla.org/en/DOM/Node.nodeName)来确定元素的标签名称

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T23:49:29.823

你有正确的方法来做到这一点。[这两项工作：](http://jsfiddle.net/ecjvC/)

```
$('*[name=school_name]').get(0).tagName;
$('*[name=school_name]')[0].tagName; 
```

您还可以删除`*`并且您可能希望首先将其转换`tagName`为小写或至少是一致的大小写：

```
var $el = $('[name=school_name]');
var tagName;
if($el.length)
    tagName = $el[0].tagName

if(tagName)
    tagName = tagName.toLowerCase(); 
```

# database - Backbone：使用表单保存模型，以及模型关系到数据库

> ID：10923822
> 
> 赞同：0
> 
> 时间：2012-06-06T23:38:50.963
> 
> 标签：database, forms, view, backbone.js, relationship

在我的一个主干视图中，我一直在努力处理一种形式。该表格用于保存项目模型的信息（例如项目名称、项目描述、项目成员）。虽然项目特定信息没有任何问题地保存到相应的数据库表中，但我没有设法将项目-用户关系保存在联合数据库表中（projects_users，包含两个实体的相应 ID）。可以在表单中添加到项目中的用户已经存在于数据库中，因此无需将任何内容添加到用户数据库表中。

谁能在这里让我走上正确的轨道？我尝试了解 Backbone 中的关系。这些是我已经研究过的两个链接，但无法将其内容转化为解决方案：

[骨干关系](https://github.com/PaulUithol/Backbone-relational)

[Rails 和 Backbone 中的模型关系](http://www.skalb.com/2012/04/23/how-to-easily-handle-model-relationships-in-rails-and-backbone-js/)

谢谢你，亚历山德拉

编辑

有人建议我这边的一些代码会很有用。由于我对自己需要做什么没有很好的理解，所以我的代码现在几乎是一团糟……但让我试试。

我的表单视图：

```
App.Views.Projects.Common.Form = Backbone.View.extend({
...

  submitted: function(formElement) {
      var newData = this.serializeFormData(formElement);

      this.model = new App.Models.Project({
        name        : newData.name,
        description : newData.description
        // Somehow put the users array associated with the project here ...
      });

      this.saveFormData(newData);
      return false;
  },

  serializeFormData: function(formElement) {
    var fields = formElement.serializeArray();

    var serializedData = {};
    $.each(fields, function(index, field) {
      serializedData[field.name] = field.value;
    });

    return serializedData;
  },

  saveFormData: function(newData) {
    var project = this.model;

    // placeholder for the users that would be associated with the project
    // parsing of the data from the form is required to get a corresponding array of user models
    var users = App.users;
    project.attributes.users = users;

    // this line should save the project to the database table and the project-users relationships
    // in the projects_users table; it needs the success and error functions
    project.save({}, {});    
  },

...
}) 
```

对于项目和用户模型文件，我是按照以下思路考虑的：

```
App.Models.Project = Backbone.RelationalModel.extend({    
  urlRoot: '/projects',

  // Default attributes for the project.
  defaults: {
    description: "",
    users: []
  },

  relations: [{
    type         : Backbone.HasMany,
    key          : 'users',
    relatedModel : 'App.Models.User'
  }]
});

App.Models.User = Backbone.RelationalModel.extend({

getId: function() {
  return this.get('id');
},

getName: function() {
  return this.get('name');
},

getEmail: function() {
  return this.get('email');
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:48:41.227

尽管可以在我的问题的评论之一中找到相同的信息，但我被要求将其标记为答案，以方便 StackOverflow 上的其他人使用。可以在[这里](https://stackoverflow.com/questions/11130856/saving-entries-to-database-relationship-many-to-many-table-from-a-backbone-pro)找到对我有用的解决方案- 请参阅我自己的答案。

# python - PyQT Signals doesn't works on Windows

> ID：10923823
> 
> 赞同：0
> 
> 时间：2012-06-06T23:38:51.107
> 
> 标签：python, pyqt4

I have a Python application using PyQT4 to build the GUI, on Linux works fine, but on Windows the signals aren't being received :/

My code is:

```
import sys
sys.path.append("..")
from ui import Ui_MainWindow
from dlgContador import Ui_dlgContador
from PyQt4 import QtCore, QtGui
from funciones.archivosOps import archivosOps

class ArchivosGui(QtGui.QMainWindow):
    def __init__(self):
        self.archivo=None
        self.app=QtGui.QApplication(sys.argv)
        QtGui.QMainWindow.__init__(self)
        self.mainWindow=Ui_MainWindow()
        self.mainWindow.setupUi(self)
        self.__connectFunctions()
        self.setWindowTitle("Editor de Texto")
        self.show()
        self.app.exec_()

    pass

   def __connectFunctions(self):
    self.connect(self.mainWindow.actionAbrir,QtCore.SIGNAL("activated()"), self.abrir)
    self.connect(self.mainWindow.actionContar_Palabras,QtCore.SIGNAL("activated()"),self.info)
    self.connect(self.mainWindow.actionGuardar,QtCore.SIGNAL("activated()"),self.guardar)
    self.connect(self.mainWindow.actionGuardarComo,QtCore.SIGNAL("activated()"),self.guardarComo)
    pass 
```

What i'm doing wrong ? :/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T02:08:07.500

在 QTDesigner for linux 上，QTAction 有一个名为“Activated()”的信号，并且仅在 Linux 上有效，我的做法已被废弃。

只需将“激活（）”更改为“触发（）”即可正常工作

# javascript - Fixed Text on a Parallax Website

> ID：10923825
> 
> 赞同：3
> 
> 时间：2012-06-06T23:39:11.857
> 
> 标签：javascript, html, css

I have created [this site](http://www.sfu.ca/~jca41/stuph/parallaxTest/parallax03/parallax03.html) and am trying to implement fixed text on the first slide (the one with the Nike basketball). Currently, I have the text 'The first of its kind' as part of the background image. Is it possible to separate it from the background and place the text in its own div?

I am stumped for ideas as the first slide is created by using three separate `div` - one for the top portion of the ball, the second for the bottom portion of the ball, and the third as the magnification of the ball. I thought of attaching the text within the first and second div, but it causes the text to scroll with the page as oppose to fixing it in place.

Site link: [http://www.sfu.ca/~jca41/stuph/parallaxTest/parallax03/parallax03.html](http://www.sfu.ca/~jca41/stuph/parallaxTest/parallax03/parallax03.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T23:43:23.320

是的，使用`position:fixed`with`left`和`top`css 属性。

例如

```
#fixedText {
  position:fixed;
  left:100px;
  top:50px;
} 
```

编辑：

为了适应幻灯片的重叠，您必须将 a`z-index`应用于幻灯片和文本。

例如，您可以将页面类的 z-index 设为 2（并且 position:relative 或 z-index 不生效），#fixedText 规则的 z-index 为 1，#first 规则的 z-index index 为 0。这将创建您所追求的分层：

```
 #fixedText {
    position: fixed;
    left: 75px;
    top: 120px;
    font-size: 35pt;
    color: white;
    z-index: 1;
    font-family: helvetica;
  }

  #first {
    background: url(images/01.jpg) no-repeat fixed;
    height: 1000px;
    z-index: 0;
  }

  .page {
    margin: 0;
    padding: 0;
    overflow: auto;
    width: 100%;
    z-index: 1;
    position: relative;
  } 
```

# android - 为 Android 构建 FFmpeg 以使用命令行参数

> ID：10923837
> 
> 赞同：5
> 
> 时间：2012-06-06T23:41:09.390
> 
> 标签：android, c++, c, android-ndk, ffmpeg

我正在尝试使用 NDK 构建 FFmpeg 库以在我的 android 应用程序中使用。这样做的原因是因为我在android中使用了本机视频捕获功能，因为我真的不想编写自己的录像机。但是，本机视频捕获仅允许高质量编码或低质量编码。我想要介于两者之间的东西，我相信解决方案是使用 FFmpeg 库重新编码高质量视频以使其更轻。

到目前为止，我已经能够根据本指南构建 FFmpeg 库：[http](http://www.roman10.net/how-to-build-ffmpeg-for-android/) ://www.roman10.net/how-to-build-ffmpeg-for-android/以及我已经能够得到它的一些调整去工作。

然而，我发现的一切似乎都是关于编写自己的编码器，这对我来说似乎有点过头了。我真正想做的就是将命令行格式的字符串发送到 FFmpeg 的 main() 函数并重新编码我的视频。但是，我似乎无法弄清楚如何构建 FFmpeg 以使我能够访问 main 方法。我找到了这篇文章：[编译 ffmpeg.c 并通过 JNI 调用它的 main()，](https://stackoverflow.com/questions/5412722/compile-ffmpeg-c-and-call-its-main-via-jni)它链接到一个项目，做我想做的事，但对于我的生活，我无法弄清楚发生了什么。看起来他编译的东西比我想要的要多，我真的很想让我的应用程序尽可能地轻量级。

一些额外的方向将非常有帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:24:37.150

在 Android NDK 中，您的应用程序中没有典型意义上的 main()，因此您无法直接执行您想要执行的操作。但是，您仍然可以自己调用 FFmpeg 的 main() 并为其提供所有必要的参数。以下是获取参数的两种可能性：

1.  Android Activity 在创建后会收到一个 Intent。您可以在启动活动时通过意图传递参数，然后像这样提取它：

    ```
    Intent CommandLine = this.getIntent();
    Uri uri = CommandLine.getData(); 
    ```

2.  您可以从您在 SD 卡某处创建的文件中读取参数并将其传递给 FFmpeg。

# java - Can I change the compression algorithm used by Java's ImageWriter when creating a JPEG?

> ID：10923842
> 
> 赞同：5
> 
> 时间：2012-06-06T23:41:49.767
> 
> 标签：java, jpeg, image-compression

Or, alternatively, is there a better library to use to handle compression?

Let me preface this with what I already understand: (1) JPEG is lossy--it won't look the same as the input file. (2) I can adjust the compression quality setting to something between 0.0 and 1.0, as I've done in the code below.

I am taking a BufferedImage and converting it to a JPEG and am noticing that Java's ImageWriter's .write() method produces sub-par results for JPEG images (as compared to Photoshop "Save for Web", as an example).

My code looks a bit like this right now:

```
// img is a BufferedImage, here
ImageWriter writer = ImageIO.getImageWritersByFormatName("jpeg").next();
ImageWriteParam iwp = writer.getDefaultWriteParam();
iwp.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);
iwp.setCompressionQuality(.75f);

IIOImage image = new IIOImage(img, null, null);
ByteArrayOutputStream byteArrayOut = new ByteArrayOutputStream();
writer.setOutput(ImageIO.createImageOutputStream(byteArrayOut));
writer.write(null, image, iwp);
writer.dispose(); 
```

Playing with the compression quality setting produces different quality outputs, but even at setting "1.0", they don't look as nice as what I can get with other tools when creating a JPEG.

Since I'm a new user and can't post images yet... [here's a webpage that demos the differences](http://timothyehat.com/downloads/java-png-to-jpeg-sample.html). Hopefully I can get them in here permanently at some point for future users who may have a similar question.

Obviously, this particular image is not the best candidate for JPEG compression (the PNG is much smaller and lossless), but it allows the compression artifacts to be seen more easily. The actual images will be mostly photographic in nature. At the very least, this is more to question the algorithm and quality of Java's JPEG compression versus others out there that produce images that look closer to the original with fewer bytes.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T19:37:53.473

> “Java 的 ImageWriter 的 .write() 方法为 JPEG 图像生成低于标准的结果（例如，与 Photoshop “Save for Web”相比）。”

发生这种情况的原因不止一个，将 Java imageio 生成的图像质量与 Photoshop 等专业图像软件进行比较是不公平的。

无论如何，让我们看看图像中伪影的最可能原因是什么：通常对于将图像保存为 JPEG 的软件，它允许用户指定一个参数作为压缩或质量，一个是另一个的倒数。此参数用于缩放量化过程中使用的量化表，这是 JPEG 损失的最重要贡献者。不同的编码器可能使用不同的量化表，这部分解释了图像质量差异。

但是可能还有其他因素会影响压缩和图像质量，其中包括在量化过程之前实际发生的色度二次采样（或下采样）。色度二次采样是图像中的颜色信息以比原始分辨率低的分辨率进行采样的过程。为了更好的解释阅读**[这篇](http://www.impulseadventure.com/photo/chroma-subsampling.html)**文章。

Calvin Hass 提供了一个出色的 JPEG 阻尼工具，称为 JPEGSnoop，可以从[http://www.impulseadventure.com](http://www.impulseadventure.com)下载。在您提供的 ps75.jpg 图像上使用此工具，我发现以下与色度子采样有关的输出：

```
 Component[1]: ID=0x01, Samp Fac=0x11 (Subsamp 1 x 1), Quant Tbl Sel=0x00 (Lum: Y)
 Component[2]: ID=0x02, Samp Fac=0x11 (Subsamp 1 x 1), Quant Tbl Sel=0x01 (Chrom: Cb)
 Component[3]: ID=0x03, Samp Fac=0x11 (Subsamp 1 x 1), Quant Tbl Sel=0x01 (Chrom: Cr) 
```

这意味着没有对颜色分量进行二次采样。另一方面，来自 100.jpg 和 75.jpg 的子采样部分是相同的：

```
 Component[1]: ID=0x01, Samp Fac=0x22 (Subsamp 1 x 1), Quant Tbl Sel=0x00 (Lum: Y)
 Component[2]: ID=0x02, Samp Fac=0x11 (Subsamp 2 x 2), Quant Tbl Sel=0x01 (Chrom: Cb)
 Component[3]: ID=0x03, Samp Fac=0x11 (Subsamp 2 x 2), Quant Tbl Sel=0x01 (Chrom: Cr) 
```

这意味着通过取两个连续像素的平均值，已经在水平和垂直方向上对颜色分量进行了二次采样。

当原始图像由条形和/或正方形组成时，色度二次采样对图像质量的影响将最为显着，就像您的情况一样，并且您已经注意到在这里更容易看到伪影。

因此，IMO，对于这种特殊情况，问题更多来自色度二次采样，而不是质量因子设置。也许我还没有挖得足够深，但是我找不到为 imageio 或它背后的 ImageWriter（很可能是 com.sun.imageio.plugins.jpeg.JPEGImageWriter）设置采样因子的方法，尽管它似乎可以设置ImageWriter 使用的量化和霍夫曼表。

因此，除非您为 imageio 编写自己的 ImageWriter 插件或作为独立插件，否则您不太可能更改 Java 的 ImageWriter 使用的压缩算法。但鉴于 JEPG 压缩算法的复杂性，两者都不是微不足道的。James R. Weeks 编写了一个相对容易遵循的 Java JpegEncoder 实现，默认情况下不进行色度二次采样。它曾经是免费的，但您可以通过搜索网络找到原始版本。

另一个有趣的事情是：从 JPEGSnoop 的输出来看，photoshop 保存的 75% JPEG 图像的实际质量因子实际上显示为 92% 左右。以下来自 Calvin Hass 网站的引用文本将回答为什么 Photoshop 在您的情况下不使用子采样的问题：

*顺便说一句，请注意 Photoshop CS2 使用不同的色度子采样级别，具体取决于“保存 JPEG 质量”设置：*

```
Photoshop Save As Quality 0-6 - 2x2 Chroma Subsampling
Photoshop Save As Quality 7-12 - 1x1 No Chroma Subsampling
Photoshop Save For Web Quality 0-50 - 2x2 Chroma Subsampling
Photoshop Save For Web Quality 51-100 - 1x1 No Chroma Subsampling 
```

查看[这个](https://github.com/dragon66/icafe)Java 图像库，它也可以编写 JPEG 图像。

# php - Best way to extract text from a 1.3GB text file using PHP?

> ID：10923844
> 
> 赞同：5
> 
> 时间：2012-06-06T23:42:24.443
> 
> 标签：php, file

I have a 1.3GB text file that I need to extract some information from in PHP. I have researched it and have come up with a few various ways to do what I need to do, but as always am after a little clarification on which method would be best or if another better exists that I do not know about?

The information I need in the text file is only the first 40 characters of each line, and there are around 17million lines in the file. The 40 characters from each line will be inserted into a database.

The methods I have are below;

```
// REMOVE TIME LIMIT
set_time_limit(0);
// REMOVE MEMORY LIMIT
ini_set('memory_limit', '-1');
// OPEN FILE
$handle = @fopen('C:\Users\Carl\Downloads\test.txt', 'r');
if($handle) {
    while(($buffer = fgets($handle)) !== false) {
        $insert[] = substr($buffer, 0, 40);
    }
    if(!feof($handle)) {
        // END OF FILE
    }
    fclose($handle);
} 
```

Above is read each line at a time and get the data, I have all the database inserts sorted, doing 50 inserts at a time ten times over in a transaction.

The next method is the same as above really but calling `file()` to store all the lines in an array before doing a `foreach` to get the data? I am not sure about this method though as the array would essentially have over 17 million values.

Another method would be to extract only part of the file, rewrite the file with the unused data, and after that part has been executed recall the script using a `header` call?

What would be the best way in terms of getting this done in the most quick and efficient manner? Or is there a better way to approach this that I have thought of?

Also I plan to use this script with wamp, but running it in a browser while testing has caused problems with timeout even with setting script time out to 0\. Is there a way I can execute the script to run without accessing the page through a browser?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T23:54:44.923

到目前为止你做得很好，不要使用“file()”函数，因为它很可能会达到 RAM 使用限制并终止你的脚本。

我什至不会将东西累积到“插入[]”数组中，因为这也会浪费 RAM。如果可以，请立即插入数据库。

顺便说一句，有一个很好的工具叫做“cut”，你可以用它来处理文件。

```
cut -c1-40 file.txt 
```

您甚至可以将 cut 的标准输出重定向到一些插入数据库的 PHP 脚本。

```
cut -c1-40 file.txt | php -f inserter.php 
```

inserter.php 然后可以从 php://stdin 读取行并插入 DB。

“cut”是所有 Linux 上可用的标准工具，如果您使用 Windows，您可以使用 MinGW shell 获得它，或者作为 msystools 的一部分（如果您使用 git）或使用[gnuWin32](http://gnuwin32.sourceforge.net/packages/coreutils.htm)安装本机 win32 应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T00:05:21.103

当您的 RDBMS 几乎可以肯定内置了批量导入功能时，您为什么要在 PHP 中执行此操作？例如，MySQL 有[`LOAD DATA INFILE`](http://dev.mysql.com/doc/refman/5.6/en/load-data.html)：

```
LOAD DATA INFILE 'data.txt'
INTO TABLE `some_table`
  FIELDS TERMINATED BY ''
  LINES TERMINATED BY '\n';
  ( @line )
SET `some_column` = LEFT( @line, 40 ); 
```

一问。

MySQL 还具有[`mysqlimport`](http://dev.mysql.com/doc/refman/5.6/en/mysqlimport.html)从命令行包装此功能的实用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T00:11:29.927

以上都不是。使用的问题`fgets()`是它不能按您预期的那样工作。当达到最大字符数时，下一次调用`fgets()`将在同一行继续。您已经正确识别了使用`file()`. 第三种方法是一个有趣的想法，您也可以使用其他解决方案来实现它。

也就是说，您的第一个使用想法`fgets()`非常接近，但是我们需要稍微修改它的行为。这是一个自定义版本，可以按您的预期工作：

```
function fgetl($fp, $len) {
    $l = 0;
    $buffer = '';
    while (false !== ($c = fgetc($fp)) && PHP_EOL !== $c) {
        if ($l < $len)
            $buffer .= $c;
        ++$l;
    }
    if (0 === $l && false === $c) {
        return false;
    }
    return $buffer;
} 
```

立即执行插入操作，否则会浪费内存。确保您[`prepared statements`](http://php.net/manual/en/pdo.prepared-statements.php)用于插入这么多行；这将大大减少执行时间。当您只能提交数据时，您不想提交每个插入的完整查询。

# javascript - 如何选择 HTML 表格中一列的所有复选框？

> ID：10923846
> 
> 赞同：0
> 
> 时间：2012-06-06T23:42:43.660
> 
> 标签：javascript, html-table

如果我已经有一个带有复选框的列，有谁知道如何选择表格中的所有复选框？我做了一个，但是当我单击全选时，它会从表中选择所有复选框。我想从单个列中选择复选框，而不是全部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T23:45:04.210

**简单的 jQuery 答案：**

```
$('td.theClass input[type="checkbox"]').prop('checked', true); 
```

如果您使用 jQuery 版本 < 1.6：

```
$('td.theClass input[type="checkbox"]').attr('checked', 'checked'); 
```

`<td>`这将只检查class下的复选框`theClass`。

[**请求的 Live DEMO**](http://jsfiddle.net/jnLQQ/)

或者，如果您想按索引选择第二列：

```
$('td:nth-child(2)').find('input[type="checkbox"]').prop('checked', true);​ 
```

[**现场演示**](http://jsfiddle.net/jnLQQ/1/)

# mysql - 这个 MySQL 语句是如何工作的？

> ID：10923848
> 
> 赞同：0
> 
> 时间：2012-06-06T23:42:52.890
> 
> 标签：mysql

```
CREATE TABLE `myDB`.`usersystem` (
`userid` INT NOT NULL AUTO_INCREMENT , 
`username` VARCHAR( 50 ) NOT NULL , 
`password` VARCHAR( 32 ) NOT NULL , 
`email` VARCHAR( 50 ) NOT NULL , 
PRIMARY KEY ( `userid` )
); 
```

对不起，我会搜索，但我不知道如何搜索这样一个具体的误解。

我开始学习 MySQL，而且我越来越舒服，但我很困惑反引号的作用，以及为什么在创建表时它之间有一个句点。用户系统是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:47:47.293

usersystem 是表名，myDB 是数据库名。

`<database name>`. `<table name>`是引用表的完全限定方法。

反引号用于表示资源的名称。它们并不总是必需的，但使用它们是一个好习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T23:47:21.087

所有你不明白的东西都可以在不改变这句话的意思的情况下被删除！

反引号仅用于引用；它们是可选的，但它们区分关键字和表或列的名称。如果您想要一个名为 的表`SELECT`，请将表名放在引号中，这样您就可以创建一个。

默认情况下，反引号用于引用标识符，但有一个特殊的 ANSI_QUOTES 模式，如果激活，则可以使用双引号字符代替。单引号用于引用字符串。

`myDB.usersystem`指的是名为`usersystem`的数据库中名为的表`myDB`。命名数据库是可选的，因为它默认为连接的。您也可以使用`use`命令设置隐式数据库，如“ `use myDB`”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T23:47:41.607

Backkticks 防止名称被解释为 SQL 关键字，因此您可以创建表名，如`create`or `date`。

点将模式名称与表名称分开。

模式允许您拥有用于不同目的的同名表，例如 N 个不同应用程序中的用户表。

# javascript - 如何在 JMVC/Can.js 中处理应用程序的版本控制？

> ID：10923850
> 
> 赞同：0
> 
> 时间：2012-06-06T23:43:18.350
> 
> 标签：javascript, jquery, javascriptmvc

构建应用程序后，JMVC 会生成 production.js 和 production.css。如果你想设置版本号来避免用户使用缓存文件，你怎么做？例如，生产 production.1.1.js 和 production.1.1.css 或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:15:39.147

这确实是您应该在构建过程中做的事情，而不是窃取。生成文件后重命名文件。

# ruby-on-rails - 如何从 Rake 中的错误中解救出来

> ID：10923854
> 
> 赞同：1
> 
> 时间：2012-06-06T23:43:34.490
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake, ruby-on-rails-3.2

我如何从一个

> 未定义的方法

```
error in this code

for user in @users do
    @customer = Stripe::Customer.retrieve(user.stripe_customer_token)
        if @customer.subscription.nil?
        elsif @customer.subscription.plan.id == 2
          user.silver_reset
        elsif @customer.subscription.plan.id == 3
          user.gold_reset
      end
    end 
```

我试过一个简单的救援电话，但 rake 不喜欢它。

从错误中拯救的方法是什么？

更新：

我这样做的方式

```
 for    user in @users do
            @customer = Stripe::Customer.retrieve(user.stripe_customer_token)
         rescue_from Exception => exception
          # Logic
        end
        if @customer.subscription.nil?
        elsif @customer.subscription.plan.id == 2
          user.silver_reset
        elsif @customer.subscription.plan.id == 3
          user.gold_reset
      end
    end 
```

错误 /home/user/rails_projects/assignitapp/lib/tasks/daily.rake:25：语法错误，意外的关键字救援，期待关键字结束救援异常 => 异常

耙子 0.9.2.2 轨道 3.2.5

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T23:56:12.453

用于[`try`](http://everydayrails.com/2011/04/28/rails-try-method.html)包装问题方法，如果不存在则返回 nil。例如：

```
unless @customer = Stripe::Customer.try(:retrieve, user.stripe_customer_token)
  # Logic
end 
```

或者，这会捕获更多错误：

```
unless @customer = Stripe::Customer.retrieve(user.stripe_customer_token) rescue nil
  # Logic
end 
```

或者这更多是你想要的：

```
@users.each do |user|
  begin
    @customer = Stripe::Customer.retrieve(user.stripe_customer_token)
  rescue StandardError => error
     # handle error
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-01T19:38:23.680

我仍然没有足够的声誉来发表评论，但是关于上述答案的第三个选项：**不要从异常中拯救！**

`Exception`是 Ruby 异常层次结构的根，所以当你从*一切*`rescue Exception`中拯救出来时，包括诸如、和.*`SyntaxError``LoadError``Interrupt`*

 *如果您想了解更多信息，请查看[为什么在 Ruby 中 `rescue Exception => e` 是一种不好的风格？](https://stackoverflow.com/questions/10048173/why-is-it-bad-style-to-rescue-exception-e-in-ruby)*

# php - PDO 结果集如何存储

> ID：10923856
> 
> 赞同：7
> 
> 时间：2012-06-06T23:44:03.857
> 
> 标签：php, pdo

作为我的第一门脚本语言，我已经学习 PHP 2 个月了。对于我的大多数问题，我可以很容易地在网上找到答案，但是我似乎无法理解 PDO 的某些内容。

为了从数据库中检索数据，我实例化了 PDO 类的一个新对象并在其上调用 PDO::query() 方法。这将返回一个 PDOStatement 对象，该对象携带来自 SQL 查询的结果集。这就是问题开始的地方。我似乎无法理解结果集中数据的存储方式和位置。

在 PHP 手册中，我学会了通过使用 foreach 循环**遍历 PDOStatement 对象来显示返回的行。**但是，PHP 手册明确指出，如果将对象转换为数组，则结果是一个数组，其元素是**对象的属性**。PDOStatement 只有**一个属性**- $queryString - 包含发出的查询字符串。那么......查询结果存储在哪里？为什么我可以通过一个带有 foreach 循环的数组来访问它们，而不是在它之外呢？

```
// Instantiate new PDO object to establish a new connection with MySQL database
$db = new PDO('mysql:dbhost=localhost;dbname=world', 'root', 'secret');

// Execute SQL query - Returns a PDOStatement object
$result = $db->query("SELECT Name, Continent, Population FROM Country");

// Result set can be accessed with a foreach loop iterating over the PDOStatement object
foreach ($result as $row) {
    echo "$row[Name] - $row[Continent] - $row[Population] <br />";
}

// Outside the foreach loop, $result cannot be accessed this way.
// This produces 'Cannot use object of type PDOStatement as array'
echo $result[0]['Name']; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T00:04:50.130

PDOStatement 类实现了[Iterator 接口](http://php.net/manual/en/language.oop5.iterations.php)，它允许它的对象被迭代。

```
Iterator extends Traversable {
    /* Methods */
    abstract public mixed current ( void )
    abstract public scalar key ( void )
    abstract public void next ( void )
    abstract public void rewind ( void )
    abstract public boolean valid ( void )
} 
```

* * *

对于实现 Iterator 接口的对象，

```
foreach($result as $row) {
    // Code
} 
```

相当于

```
for ($result->rewind(); $result->valid(); $result->next()) {
    $row = $result->current();
    // Code
} 
```

# iphone - 如何为原生 iphone 应用实现登录功能

> ID：10923868
> 
> 赞同：1
> 
> 时间：2012-06-06T23:46:05.453
> 
> 标签：iphone, web-services, login, web

我正在开发一个应用程序，要求用户登录以访问他的一些信息。我有一个 login.php 文件存储在服务器上，所有用户名和密码都存储在数据库中。

在我的应用程序中，我有 2 个 uitextfields 一个用于用户名，一个用于密码。我知道我可以使用 POST 方法将输入传递到 Web 服务器并检查用户名和密码是否匹配，然后加载其余数据。这是我遇到麻烦的地方，谁能帮我解决这个问题，我如何将输入从 uitextfield 传递到该 Web 服务以运行 long.php 脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T00:44:41.463

Skram 的回答是正确的，尽管您可能在想什么是 ASIHTTPRequest？

您可以在此处获取框架： [ASIHTTPrequest home](http://allseeing-i.com/ASIHTTPRequest/)

这是一个关于如何使用它的简短美丽教程： [Awesome Tutorial](http://www.raywenderlich.com/2965/how-to-write-an-ios-app-that-uses-a-web-service)

这是我前段时间用来登录的一些代码：

```
 -(IBAction)doLogin{

//make sure you have text in the username field, this is optional
if(![[username text] isEqualToString:@""]){
    //URL of your web service 
    NSURL *url = [NSURL URLWithString:@"http://localhost:8888/myservice.php"];
    //instantiate request object with URL
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    //Set post values before you send it off (forcing password to lowercase)
    [request setPostValue:[[self.password text] lowercaseString] forKey:@"password"];
    [request setPostValue:[username text] forKey:@"email"];
    //this is optional, I have switch controlling what methods are called in the web service 
    [request setPostValue:@"2" forKey:@"method"];
    //set the delegate to self for ASIHTTPRequest delegates (things you'll see in the tutorial)
    [request setDelegate:self];
    //send out request
    [request startSynchronous];

    //Now this code handles what happens after the web service call, notice I use a dictionary called user info to hold the response and I check the string to verify pass or fail and act accordingly.

    NSString *verify = [NSString stringWithFormat:@"%@",[userinfo objectForKey:@"verify"]];
    if([verify isEqualToString:@"pass"]){
        UIStoryboard *storyboard = [UIStoryboard storyboardWithName:
                            @"MainStoryboard_iPhone" bundle:[NSBundle mainBundle]];
        UITabBarController *mainMenu = 
        [storyboard instantiateViewControllerWithIdentifier:@"mainMenu"];

        [self.navigationController pushViewController:mainMenu animated:YES];
    }
    else{
        //show login failed Dialog or something...
    }
}} 
```

这里还有一些代码，这是服务器返回响应时发生的情况。

```
- (void)requestFinished:(ASIHTTPRequest *)request{       
if (request.responseStatusCode == 400) {
    NSLog(@"Something is wrong");        
} else if (request.responseStatusCode == 403) {
    NSLog(@"Something is wrong");
} else if (request.responseStatusCode == 200) {
    //the response code is good so proceed.
    NSString *responseString = [request responseString];
    userinfo = [responseString JSONValue];
        NSLog(@"%@", [userinfo objectForKey:@"id"]);
        NSLog(@"%@", [userinfo objectForKey:@"user"]);
        NSLog(@"%@", [userinfo objectForKey:@"verify"]);   
} else {
    //print mystery code.
    NSLog(@"%d",request.responseStatusCode);

} 
```

}

基本上，当您使用`request startSynchronous`它启动请求时，它会执行服务器端代码并​​返回响应字符串（或失败），您在必须从 ASIHttpRequest 实现的委托方法中捕获并处理响应字符串（或失败）`-(void)requestFinished:(ASIHTTPRequest *)request`。在示例代码中，我将响应字符串解析为 JSON，然后将其放入字典以供以后使用。

如果您阅读本教程，这一切都会很快对您有意义。希望对你有帮助，祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T23:53:29.817

您需要在您的服务器上使用对 login.php 脚本发出的 POST 请求，其中包含一个`username`和`password`值。

`NSURLConnection`您可以使用诸如[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)之类的框架来实现此目的`ASIFormDataRequest`。

在您的服务器上，您应该执行类似的操作`$_POST['username']`并`$_POST['password']`检索发送到脚本的值以对数据库进行处理。

**编辑**：来自 iPhone 端的 ASIHTTPRequest 的基本示例。

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:url]];
[request setPostValue:@"some_user" forKey:@"username"];
[request setPostValue:@"some_password" forKey:@"password"];
[request  setDelegate:self];
[request startAsynchronous]; 
```

实现以下方法来捕获响应：

```
-(void)requestFinished:(ASIHTTPRequest *)request {
    NSLog(@"%@", [request responseString]);
} 
```

# c# - 这是正常的xml格式吗？

> ID：10923870
> 
> 赞同：0
> 
> 时间：2012-06-06T23:46:37.443
> 
> 标签：c#, xml, zoho, xml-formatting

```
<?xml version=\"1.0\" encoding=\"UTF-8\" ?> 
 <response uri=\"/crm/private/xml/Potentials/updateRecords\">
   <result>
      <message>***TEST***Record(s) updated successfully</message>
      <recorddetail>
          <FL val=\"Id\">414100000000000000</FL>
          <FL val=\"Created Time\">2012-03-30 16:54:03</FL>
          <FL val=\"Modified Time\">2012-04-11 16:53:48</FL>
          <FL val=\"Created By\"><![CDATA[Bayer]]></FL>
          <FL val=\"Modified By\"><![CDATA[Bayer]]></FL>
      </recorddetail>
  </result>
</response> 
```

这是来自 Zoho 的一般回复，指出我的记录已成功更新（减去测试部分和伪造的 ZohoID。）我一直在尝试让我的 C# 程序能够制作那种风格的 xml 文档，因为当我发布东西到zoho 它实际上在风格上非常相似。但我只是不知道如何使它工作这是他们网站上的一个例子。

```
<Leads>
<row no="1">
<FL val="Lead Source">Web Download</FL>
<FL val="First Name">contacto 1</FL>
<FL val="Last Name">apellido</FL>
<FL val="Email">testing@testing.com</FL>
<FL val="Title">Manager</FL>
<FL val="Phone">1234567890</FL>
<FL val="Home Phone">0987654321</FL>
<FL val="Other Phone">1212211212</FL>
<FL val="Fax">02927272626</FL>
<FL val="Mobile">292827622</FL>
</row>
</Leads> 
```

我正在尝试使用 C# 中的单元测试来复制它，但它给了我各种错误。我已经失去了我尝试过的所有不同方式，但我会发布我目前拥有的内容及其错误正在投掷。

```
 [Test]
    public void TestMethod()
    {
        XmlDocument doc = new XmlDocument();
        XmlDeclaration declare = doc.CreateXmlDeclaration("1.0", null, null);
        doc.AppendChild(declare);
        doc.AppendChild(doc.CreateElement("Potentials"));
        doc.AppendChild(doc.CreateAttribute("FL", "AccountName", "Robert Snyder"));

        doc.Save("C:\\test.xml");
        //doc.WriteContentTo(XmlWriter.Create("C:\\test.xml"));
    } 
```

例外

> System.InvalidOperationException : 指定的节点不能作为该节点的有效子节点插入，因为指定的节点类型错误。- c:\Subversion\ZohoApi\ZohoApi\Tests\XmlDataTests.cs:22

请帮助我更好地理解这一点。我已经尝试了很长时间，只是无法弄清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T23:53:33.980

您正在尝试将属性添加到 Document 本身，而不是根节点。缓存由 CreateElement 创建的根元素并在其上调用 AppendChild。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:18:00.500

In order to make the following output

```
<Leads>
  <row no="1">
    <FL val="Lead Source">Web Download</FL>
    <FL val="First Name">Robert</FL>
    <FL val="Last Name">Snyder</FL>
    <FL val="Email">rob@snyder.com</FL>
    <FL val="Title">Programmer</FL>
    <FL val="Phone">1029384756</FL>
    <FL val="Home Phone">6574839201</FL>
    <FL val="Other Phone">1243567890</FL>
    <FL val="Fax">098776545432</FL>
    <FL val="Mobile">1243098566</FL>
  </row>
</Leads> 
```

copy use this code and run it in a unit test.

```
[TestFixture]
public class XmlDataTests
{
    XmlDocument doc = new XmlDocument();
    [Test]
    public void TestMethod()
    {
        var rootNode = doc.CreateElement("Leads");
        doc.AppendChild(rootNode);

        var rowNode = doc.CreateElement("row");
        var attribute = doc.CreateAttribute("no");
        attribute.Value = "1";
        rowNode.Attributes.Append(attribute);

        rowNode.AppendChild(GenerateNode("Lead Source","Web Download"));
        rowNode.AppendChild(GenerateNode("First Name","Robert"));
        rowNode.AppendChild(GenerateNode("Last Name","Snyder"));
        rowNode.AppendChild(GenerateNode("Email","rob@snyder.com"));
        rowNode.AppendChild(GenerateNode("Title","Programmer"));
        rowNode.AppendChild(GenerateNode("Phone","1029384756"));
        rowNode.AppendChild(GenerateNode("Home Phone","6574839201"));
        rowNode.AppendChild(GenerateNode("Other Phone","1243567890"));
        rowNode.AppendChild(GenerateNode("Fax","098776545432"));
        rowNode.AppendChild(GenerateNode("Mobile","1243098566"));

        rootNode.AppendChild(rowNode);
        doc.Save("C:\\test.xml");
    }

    private XmlNode GenerateNode(string field, string innerValue)
    {
        var xmlNode = doc.CreateElement("FL");
        var xmlAttribute = doc.CreateAttribute("val");
        xmlAttribute.Value = field;
        xmlNode.Attributes.Append(xmlAttribute);
        xmlNode.InnerText = innerValue;

        return xmlNode;
    }
} 
```

# c# - 使用 MD5CryptoServiceProvider 在 webfarm 上进行散列和密钥

> ID：10923885
> 
> 赞同：0
> 
> 时间：2012-06-06T23:48:17.567
> 
> 标签：c#, .net, md5, hash

[MD5CryptoServiceProvider](http://msdn.microsoft.com/en-us/library/system.security.cryptography.md5cryptoserviceprovider.aspx)的散列算法是否使用某种密钥？如果我有一个 webfarm（或 Windows Azure 中的多个 web 角色），在不同服务器上的相同输入的情况下，哈希的结果是否总是相同？还是我必须在所有服务器的 web.config 上设置某种键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T00:04:21.273

加密哈希函数将始终给出相同的结果。他们不拿钥匙。

但是对于大多数应用程序，我会避免使用 MD5 来支持 SHA-2。MD5 已被破坏，特别是发现碰撞很容易。MD5 和普通的 SHA-2 都不适合密码散列，如果那是你正在做的。

有一个相关的概念：Message-Authentication-Codes (MAC)。作为最流行的形式之一，HMAC 基于以某种方式散列消息和密钥。

* * *

为防止参数被篡改，我推荐使用 HMAC-SHA-256，使用 Base64 编码。如果它太长，你可以截断它。你不应该做的是使用`Hash(key + message)`，这很容易受到长度扩展攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T23:58:48.257

据此，[Retrieve ASP.Net AutoGenerated MachineKey](https://stackoverflow.com/questions/2495120/retrieve-asp-net-autogenerated-machinekey)，答案听起来像否（不需要密钥，并且在 webfarm 上一切正常）

# php - 如何使用已弃用的 mysql_* 函数成功重写旧的 mysql-php 代码？第二部分

> ID：10923886
> 
> 赞同：1
> 
> 时间：2012-06-06T23:48:22.877
> 
> 标签：php, mysql, database, deprecated

继续本主题，我们解释了 PDO 的大多数问题[如何使用已弃用的 mysql_* 函数成功重写旧的 mysql-php 代码？](https://stackoverflow.com/questions/10919277/how-to-successfully-rewrite-old-mysql-php-code-with-deprecated-mysql-functions/10920267#10920267)现在关于理解准备好的语句...因此，为了删除 mysql_* 字符串，有一些示例，因此我对所有用户和其他用户的问题可能会有所帮助，哪种解决方案是最好的...所以旧的“组成*代码”示例：

```
in config.php: 
$db = new dbConn('127.0.0.1', 'root', 'pass', 'people', 'login');
in login.php
$db->selectDb("login");
$query = mysql_query("SELECT * FROM account WHERE id='".$_session["id"]."' LIMIT 1");  
$result = mysql_fetch_array($query); 
```

$_session["id"] 是在实际登录时定义的，所以现在我们有几个选项可以这样做：

```
In config.php:
$db_people = new PDO('mysql:host=127.0.0.1;dbname=people;charset=UTF-8', 'root', 'pass');
$db_login = new PDO('mysql:host=127.0.0.1;dbname=login;charset=UTF-8', 'root', 'pass');

And in login.php 1):
$stmt = $db_login->prepare("SELECT * FROM account WHERE id=? LIMIT 1");
$stmt->execute(array($_session["id"]));
$results = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

或者排除查询时这个更好？还是上一个更好？

```
And in login.php 2):    
$query = "SELECT * FROM account WHERE id=? LIMIT 1";
$parameters = array($_session["id"]);
$statement = $db_login->prepare($query);
$statement->execute($parameters);
$results = $statement->fetch(PDO::FETCH_ASSOC); 
```

这个登录表单：

```
 public function login($user, $password)
  {
    global $web, $db;    
    if (!empty($user) && !empty($password))
    {    
      $user = $web->esc($user);
      $password = $web->doHash($user, $password);

      $db->selectDb('login');
      $qw = mysql_query("SELECT * FROM account WHERE username='".$user."' AND pass_hash='".$password."'");

      if (mysql_num_rows($qw) > 0)      
      {    
        $result = mysql_fetch_array($qw); 
        $_session['name'] = $result['username'];
        $_session['id'] = $result['id'];  
        return true;          
      }
      else
        return false;        
    }
    else
      return false;
  } 
```

转入此表格：

```
 public function login($user, $password)
  {
    global $web, $db_login;    
    if (!empty($user) && !empty($password))
    {    
      $user = $web->esc($user);
      $password = $web->doHash($user, $password);

      $stmt = $db_login->prepare("SELECT * FROM account WHERE username=? AND pass_hash=?");
      $stmt->execute(array($user, $password));
      $rows = $stmt->rowCount();

      if ($rows > 0)      
      {    
        $result = $stmt->fetchAll(PDO::FETCH_ASSOC); 
        $_session['name'] = $result['username'];
        $_session['id'] = $result['id'];  
        return true;          
      }
      else
        return false;        
    }
    else
      return false;
  } 
```

可以还是再次进行单独的查询，或者以完全不同的方式进行？谢谢你们。

Also when there is multiple stmt should I use different name for it? For example I use stmt once and make a result1 after I do stmt second with result2 should I choose different name also for stmt variable or only result name is ok to be different?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:15:42.570

OK so solution login.php 1) seems to be ok simple and no rush. Also the login page seems to be working fine and therefore it should be according to every rules and ok :)

# java - 确定点击了三个部分重叠的图像中的哪一个

> ID：10923892
> 
> 赞同：0
> 
> 时间：2012-06-06T23:49:17.227
> 
> 标签：java, swing, user-interface, overlap, imageicon

我有几个 JLabel，每个都有一个 ImageIcon，如下所示：

```
ImageIcon icon = new ImageIcon("path/to/image.jpg");
JLabel label = new JLabel(icon); 
```

这些图像是六边形的 .PNG。六边形“外部”的边缘（存在的冗余部分使用矩形画布）是透明的。JLabel，即图像，[按照本例](http://upload.wikimedia.org/wikipedia/commons/d/dd/Hexagons.jpg)中的顺序排列，因此始终存在三个干扰图像。

由于在另一个之下或之上没有“可见”层，我想将“可点击区域”定义为完全可见层。最聪明的方法是什么，或者是否有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T00:36:17.503

对于这个问题，我可以想到三个解决方案：

1.  如果您的六边形只是“黑线” - 您可以实现`paintComponent`并绘制`Polygon`s. 您将必须参考它们。稍后 - 在鼠标单击时，您将必须在其中获取形状的组件和鼠标点。然后迭代调用`contains`它们中的每一个的形状。使用此解决方案您将失去布局支持。
2.  实现 GlassPane/layer 并将鼠标事件分派到适当的位置`JLabel`- 遍历`JLabel`s
3.  这将是最不可取的（因为紧密耦合） - 扩展`JLabel`并添加对相邻六边形组件的引用。当鼠标点击被触发时，你检查这个组件是否应该“捕捉”这个事件。如果不是 - 您将事件“转发”到适当的组件。

# android - 从单独的 Activity Crash Android 访问的公共变量

> ID：10923896
> 
> 赞同：0
> 
> 时间：2012-06-06T23:49:32.890
> 
> 标签：android, variables, public

我在我的主要活动中设置了一个公共变量，将应用程序声明为免费版本或付费（布尔值）。

当从单独的活动访问它时，我收到很多崩溃错误（空指针异常）。我无法在测试设备上重现此错误，所以我只能假设 Android 在内存不足时会丢失主活动变量？

通常，当我的用户导航到浏览器以下载文件然后导航回我的应用程序时，就会发生这种情况。

我是否应该为 Activity 设置一个本地变量，以便它不再引用单独的 Activity？或者有没有办法将该变量保存在内存中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T23:53:07.080

您应该使用某种持久存储，[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)似乎是手头任务的不错选择。

# c# - 将 .0000 解析为 0 C#

> ID：10923897
> 
> 赞同：2
> 
> 时间：2012-06-06T23:49:35.247
> 
> 标签：c#, c#-4.0

我正在将 CSV 文件解析为数组。数组的一个元素是**.0000**我想将其解析为**0**但是当我尝试使用以下方法解析**.0000**时它返回**1**

```
fields[38].Substring(0,fields[38].IndexOf("."))  // expected 0, return 1

Convert.ToDecimal(fields[38])  // expected 0.00, return Exception

string.Equals(fields[38],".0000")   // expected true, return false

(int)decimal.Parse(fields[38])     // expected 0, return 1 
```

请帮忙 ！！！！！！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T23:51:44.903

这行得通，不确定是否有更简单的方法：

```
(int)(Decimal.Parse(val, System.Globalization.NumberStyles.Float, System.Globalization.CultureInfo.InvariantCulture)); 
```

[`Decimal.Parse Method (String, NumberStyles, IFormatProvider)`](http://msdn.microsoft.com/en-us/library/s84kdbzx)

# macos - Mac 的 Sleepwatcher：如何在 WOL 数据包后让 Mac 再次睡眠

> ID：10923898
> 
> 赞同：1
> 
> 时间：2012-06-06T23:49:39.487
> 
> 标签：macos, ip, sleep, wake-on-lan

这个恼人的问题我已经有一段时间了。基本上，我喜欢让 iMac 处于休眠状态，但让它监听 WOL 数据包以进行远程访问。我知道 Mac 将每 2 小时左右醒来一次以向其基站注册（如果你有的话），但它们会立即返回睡眠状态。

我的问题是，无论出于何种原因（可能是机器人向随机 IP 地址发送魔术数据包并尝试密码以获得访问权限），每当 Mac 收到魔术数据包时，它就会唤醒（显示仍然关闭）但不会返回如果它没有收到进一步的网络活动，则休眠。

我下载了 sleepwatcher，但我不确定如何正确使用它。我想我基本上需要一小段代码等待大约 30 秒，如果没有检测到网络连接，则重新进入睡眠状态。我知道在这里请求代码通常不受欢迎，我通常不会，但在这种情况下，我什至在为从哪里开始而苦苦挣扎。

作为一个附带问题，是否可以记录发送魔术包的 IP 地址？这也很有帮助，如果它来自同一个 IP，我可以简单地阻止它。

我真的很感激这方面的任何帮助。

谢谢，

斯科特

# java - toplink 没有创建一个表

> ID：10923904
> 
> 赞同：0
> 
> 时间：2012-06-06T23:50:54.373
> 
> 标签：java, jpa, persistence, toplink

我觉得问这个真的很愚蠢。但我一直在查看我的代码 4 小时，但无法弄清楚。我已经多次重建我的数据库，但无法让它工作。由于某种原因，我的一张表没有被创建。我有 4 个表游戏、开发人员、游戏映像和用户。用户没有被创建，但另一个正在完美创建并且正在工作。我确定这是一个愚蠢的错误，但我只是不明白。如果有人能告诉我为什么会发生这种情况，那就太好了。我正在使用顶部链接

这是我的代码：

持久性xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
<persistence-unit name="GameDatabasePU" transaction-type="RESOURCE_LOCAL">
<provider>oracle.toplink.essentials.PersistenceProvider</provider>
<class>domainmodel.Game</class>
<class>domainmodel.GameImage</class>
<class>domainmodel.Developer</class>
<class>domainmodel.User</class>
<properties>
  <property name="toplink.jdbc.user" value="app"/>
  <property name="toplink.jdbc.password" value="app"/>
  <property name="toplink.jdbc.url" value="jdbc:derby://localhost:1527/Gamedatabase;create=true"/>
  <property name="toplink.jdbc.driver" value="org.apache.derby.jdbc.ClientDriver"/>
  <property name="toplink.ddl-generation" value="drop-and-create-tables"/>
</properties>
</persistence-unit>
</persistence> 
```

用户：

```
@Entity
public class User {
    @Id
    private String username;
    private String password;
    private String firstName;
    private String surname;

    public User() {
    }

    public User(String naam, String pas){
        setUsername(naam);
        setPassword(pas);
    }

    public User(String naam, String pas, String firstName, String surname){
        setUsername(naam);
        setPassword(pas);
        setFirstName(firstName);
        setSurname(surname);
    }

    public void setUsername(String naam){
        this.username=naam;
    }
    //methods
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T05:59:41.373

不是真正的答案，而是更多一些缩小问题范围的技巧。

1）尝试从您的persistence.xml中删除所有其他类（注释掉其他类的注释）

也许问题出在另一个类中，并且输出具有误导性。

2) 尝试将调试/输出级别设置为另一个级别（DEBUG、FINE、FINEST）并让 JPA 提供程序公开查询。

对于 TopLink，我认为将其添加到您的 presistence 属性部分就可以了：

```
<property name="toplink.logging.level" value="FINEST" /> 
```

3）您使用的是哪个数据库？MySql、PostgreSQL、HSQL、SQL 服务器？

一些数据库不（完全）支持某些东西。

4) 没关系，但无论如何；

使用注释您的 User 类，`@Table(name = "user")`否则`@Table(name = "usera")`这将确保表名不是问题。

# php - MySQL：sum() 并从多个表连接

> ID：10923905
> 
> 赞同：2
> 
> 时间：2012-06-06T23:50:57.943
> 
> 标签：php, mysql, arrays, join, sum

说起来简单，但我找不到语法，甚至找不到一个例子！假设以下表格：

```
Table:'Red'
Fields: id | sm | md | lg
Data:    1 | 3  | 5  | 7
         2 | 9  | 8  | 7
         3 | 2  | 4  | 6

Table:'White'
Fields: id | sm | md | lg
Data:    1 | 0  | 0  | 0
         2 | 0  | 0  | 0
         3 | 0  | 0  | 0

Table:'Blue'
Fields: id | sm | md | lg
Data:    1 | 1  | 1  | 1
         2 | 1  | 1  | 1
         3 | 1  | 1  | 1 
```

我想要的只是将所有内容加起来，但保留如下表所示的行：

```
Table:'Total'
Fields: id | sm | md | lg
Data:    1 |  4 | 6  | 8
         2 | 10 | 9  | 8
         3 |  3 | 5  | 7 
```

然后在 PHP 中创建一个 while 循环来回显结果。像这样的东西：

```
<?php

while($row = mysql_fetch_array($get_totals))
{
echo <td>".$row[sm]."</td><td>".$row[md]."</td><td>".$row[lg]."</td>";
}

?> 
```

我想不通。有什么帮助吗？我只需要一个可以在这里工作的 php select 语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T23:59:47.810

未经测试，但应该可以工作：

```
SELECT id, SUM(sm) as sm, SUM(md) as md, SUM(lg) as lg FROM (
   SELECT * FROM Red
   UNION ALL
   SELECT * FROM White
   UNION ALL
   SELECT * FROM Blue
) AS somealias 
GROUP BY id 
```

# security - 为什么将随机盐与用户密码摘要一起存储在数据库中被认为是安全的？

> ID：10923906
> 
> 赞同：3
> 
> 时间：2012-06-06T23:51:22.997
> 
> 标签：security, hash, passwords, salt

鉴于[LinkedIn 密码泄露事件](http://www.zdnet.com/blog/btl/646-million-linkedin-passwords-leaked-online/79290 "LinkedIn密码泄露")，我一直在考虑密码安全问题。我过去使用的 Web 开发框架通常将主应用程序级 salt 存储为应用程序常量，然后使用该值对所有用户密码进行加盐（基于每个应用程序随机生成）。例如在伪代码中：`password = hash(App::salt + userPassword)`.

我读过很多建议，建议为每个用户生成一个随机盐，然后将其与每个用户的密码一起存储在数据库中。我的问题是，这如何提高安全性？如果攻击者从数据库中获取密码摘要列表，他们很可能也能够获得盐，对吧？或者是否有一些我不知道的攻击向量会在无法访问表的其余部分的情况下获得密码摘要？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T23:55:09.590

为每个用户存储随机盐可以击败[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)攻击。

在“主盐”的情况下，仍然可以预先计算这样的表并在攻击中使用它。对于每个用户的盐，这变得不切实际。

# xml - 在 XSL 中按日期对嵌套注释进行排序

> ID：10923907
> 
> 赞同：1
> 
> 时间：2012-06-06T23:51:23.437
> 
> 标签：xml, xslt

我必须从这个 xml 中的所有评论中获取前 4 条评论，（按 date_add 排序）：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="get7Comments.xsl"?>

<products>
<product id="1">
    <comment id="1">
        <username>admin1</username>
        <text>nice</text>
        <date_added>20.06.2005</date_added>
    </comment>
    <comment id="2">
        <username>admin2</username>
        <text>too nice</text>
        <date_added>11.05.2005</date_added>
    </comment>
</product>
<product id="2">
    <comment id="1">
        <username>admin1</username>
        <text>comment1</text>
        <date_added>19.05.2005</date_added>
    </comment>
    <comment id="2">
        <username>daniel</username>
        <text>comment2</text>
        <date_added>06.05.2005</date_added>
    </comment>
    <comment id="3">
        <username>another</username>
        <text>comment3</text>
        <date_added>15.05.2005</date_added>
    </comment>
</product>
</products> 
```

我想要的最后 4 条评论的输出示例：

```
admin1 : nice : 20.06.2005
admin1 : comment1  : 19.05.2005
another : comment3 : 15.05.2005
admin2 : too nice : 11.05.2005 
```

如果我让它们作为项目列表 - 评论 - 完美工作，但不是在我将它们分隔在新标签下之后

```
<product id=""> comments </product> 
```

我无法将它们全部排序并取第 4 个。如果我没有“产品”标签，它是如何工作的，我的意思是所有评论都作为父“产品”标签：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" encoding="utf-8"/>
<xsl:template match ="products">
<xsl:for-each select="product[position() &lt; 8]">

    <xsl:sort select="normalize-space(substring(date_added,7,4))" order="descending" />
    <xsl:sort select="normalize-space(substring(date_added,4,2))" order="descending" />
    <xsl:sort select="normalize-space(substring(date_added,0,2))" order="descending" />
    <xsl:variable name="commID" select="@id" />

    <a href="index.php?p=comment&amp;id={$commID}">
        <xsl:value-of select="substring(text,0,60)" />
    </a><br/>

</xsl:for-each>

 </xsl:template>
 </xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:56:13.070

不确定您到底要做什么，但请尝试使用 an`xsl:apply-templates`而不是`xsl:for-each`.

例子：

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" encoding="utf-8"/>

    <xsl:template match ="products">
        <xsl:apply-templates select="product/comment">
            <xsl:sort select="concat(
                normalize-space(substring(date_added,7,4)),
                normalize-space(substring(date_added,4,2)),
                normalize-space(substring(date_added,1,2))
                )" data-type="number" order="descending" />
        </xsl:apply-templates>      
    </xsl:template>

    <xsl:template match="comment">
        <!--xsl:if used because it wasn't working on the predicate?-->
        <xsl:if test="4 >= position()">
            <a href="index.php?p=comment&amp;id={@id}">
                <xsl:value-of select="substring(text,1,60)" />
            </a><br/>
            <xsl:text>&#xA;</xsl:text>                  
        </xsl:if>
    </xsl:template>     

</xsl:stylesheet> 
```

使用您的 XML 输入会产生：

```
<a href="index.php?p=comment&amp;id=1">nice</a><br>
<a href="index.php?p=comment&amp;id=1">comment1</a><br>
<a href="index.php?p=comment&amp;id=3">comment3</a><br>
<a href="index.php?p=comment&amp;id=2">too nice</a><br> 
```

如果您在产品之间有重复的评论 ID（就像您在示例 XML 中一样），您的 href 将需要修改。

***（编辑：错过了您试图返回前 4 条评论。已修复。还修复了 3rd 中的错字`substring()`。）***

# c# - 如何对复杂的电子表格行为进行单元测试？

> ID：10923910
> 
> 赞同：1
> 
> 时间：2012-06-06T23:52:10.877
> 
> 标签：c#, unit-testing, spreadsheet

我有一个 C# 项目，它的大部分复杂行为都实现为用户与之交互的电子表格的事件处理程序。

我熟悉测试代码，但我不确定如何测试电子表格的复杂行为（例如在用户更改单元格的值时添加和删除行或调用第 3 方组件）。不仅编码行为与电子表格行为纠缠在一起，而且当以编程方式更改其值时，我也无法触发电子表格事件。我不知道要模拟什么，因为它也没有真正分成不同的类。

是否有用于 WinForms 的 Selenium 或其他方式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:35:51.553

万一其他人遇到这种情况，我最终使用了基本上是[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)或[中介者模式的东西](http://en.wikipedia.org/wiki/Mediator_pattern)取决于你如何看待它。每个电子表格都由一个适配器包装，该适配器格式化电子表格并与代码通信。该代码告诉中介显示一些域对象，它填充适当的单元格并触发适当的事件（CellEndEdit 等）。用户修改电子表格后，中介将生成的域对象提供给代码。单元测试验证它可以正确地读取和写入域对象，并在代码作用于它时触发正确的事件。其他测试验证当用户将正确的数据放入正确的单元格时，生成的域对象具有正确的数据。这是额外的工作，但现在可以让行为依赖于中介而不是电子表格。

# c - C（或嵌入式脚本）函数，它将以可视方式打开 .txt 文件

> ID：10923911
> 
> 赞同：0
> 
> 时间：2012-06-06T23:52:12.073
> 
> 标签：c, file

我正在编写一个写入 .txt 文件但具有单独功能的程序，我想以可视方式打开该文件（在默认文本编辑器中）。

我希望该功能与双击文件相同...

不打开文件只是为了在代码中编辑它（不是用`fopen()`），而是在单独的窗口中实际查看文件！

*如果可能的话，跨平台。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:31:27.037

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{

system("exec programname filename");

return 0;
} 
```

这适用于linux，希望对您有所帮助。我不太确定您如何分辨哪个编辑器是默认编辑器并打开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:09:04.443

没有办法做到这一点*跨平台*。

如果用户双击文件，则操作系统会接管并检查哪个应用程序已与文件类型相关联。由于这是特定于操作系统的活动，因此它在不同操作系统的实现上有所不同。

为此，您需要查询操作系统以使用系统调用启动应用程序。这是特定于操作系统的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T23:54:28.767

如果你在 Windows 上用 C 语言编写这个假设函数，你可以做类似的事情

```
system ("notepad myfile.txt"); 
```

# html - 使用 Shell 脚本更改 CSS 值 - Unix

> ID：10923913
> 
> 赞同：0
> 
> 时间：2012-06-06T23:52:36.347
> 
> 标签：html, css, shell, unix

是否可以通过 unix 中的 sh 脚本更改 CSS 中的元素值？如果是这样，这将如何完成？

目标：我有一个带有多个 div 框的 html 站点，这些 div 框根据警报状态着色，例如……红色、黄色、绿色。

我有一个 HTML 站点的自动刷新，所以我想做的就是能够在我当前的 sh 脚本中添加一行，以根据结果更改 css 以显示令人震惊的状态。

我正在考虑按照下面的方式使用“sed”，但它需要特定于元素，而不仅仅是将所有红色改为蓝色。

```
cat test.css | sed -e 's/RED/BLUE/' > test.css 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:13:08.553

给你的元素一个 id 并在 CSS 中为那个 id 添加一行。然后，使用 sed 更改该行。

在 HTML 中说元素看起来像

```
<element id="box123" ... / > 
```

在 CSS 中，这会得到它的颜色：

```
#box123 { color: #000000; } 
```

然后您通过使用 sed 更改 CSS 来更改颜色：

```
$ sed -i 's/^#box123 { color: #000000; }/^#box123 { color: #0000ff; }/g' cssfile 
```

或更短但使用高级 sed 方法：

```
$ sed -i 's/^#box123\(.*\)#000000/^#box123\1#0000ff/g' cssfile 
```

# java - Android 服务始终为空

> ID：10923916
> 
> 赞同：0
> 
> 时间：2012-06-06T23:53:03.827
> 
> 标签：java, android, android-service

我正在尝试启动一项服务，但总是得到 NPE。我可能做错了什么？甚至该`onServiceConnected()`方法也没有被调用，为什么？

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
       mServiceIntent = new Intent(this, MyService.class);
       bindService(mServiceIntent, mConnection, Context.BIND_AUTO_CREATE);
       //other stuff
    } 
```

用法：

```
private okButton(View v) {
    startService(mServiceIntent);
} 
```

结果：空指针异常！

```
private ServiceConnection mConnection = new ServiceConnection() {
          @Override
          public void onServiceConnected(ComponentName className, IBinder service) {
               Log.v("service", "gets never executed!");
               mDownloadService = ((LocalBinder<MyService>) service).getService();
            }

        @Override
            public void onServiceDisconnected(ComponentName className) {
            }
        };
}

public class LocalBinder<S> extends Binder {
    private String TAG = "LocalBinder";
    private  WeakReference<S> mService;

    public LocalBinder(S service){
        mService = new WeakReference<S>(service);
    }

    public S getService() {
        return mService.get();
    }
} 
```

当然，我也有清单中的服务：

```
<service android:enabled="true" android:name=".service.MyService" /> 
```

日志猫：

```
06-06 23:48:20.411: W/dalvikvm(592): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
06-06 23:48:20.461: E/AndroidRuntime(592): FATAL EXCEPTION: main
06-06 23:48:20.461: E/AndroidRuntime(592): java.lang.RuntimeException: Unable to start activity ComponentInfo{MyActivity}: java.lang.NullPointerException
06-06 23:48:20.461: E/AndroidRuntime(592):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-06 23:48:20.461: E/AndroidRuntime(592):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-06 23:48:20.461: E/AndroidRuntime(592):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-06 23:48:20.461: E/AndroidRuntime(592):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-06 23:48:20.461: E/AndroidRuntime(592):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-06 23:48:20.461: E/AndroidRuntime(592):  at android.os.Looper.loop(Looper.java:137)
06-06 23:48:20.461: E/AndroidRuntime(592):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-06 23:48:20.461: E/AndroidRuntime(592):  at java.lang.reflect.Method.invokeNative(Native Method)
06-06 23:48:20.461: E/AndroidRuntime(592):  at java.lang.reflect.Method.invoke(Method.java:511)
06-06 23:48:20.461: E/AndroidRuntime(592):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-06 23:48:20.461: E/AndroidRuntime(592):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-06 23:48:20.461: E/AndroidRuntime(592):  at dalvik.system.NativeStart.main(Native Method)
06-06 23:48:20.461: E/AndroidRuntime(592): Caused by: java.lang.NullPointerException
06-06 23:48:20.461: E/AndroidRuntime(592):  at MyActivity.okButton(MyActivity.java:217)
06-06 23:48:20.461: E/AndroidRuntime(592):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1939)
06-06 23:48:20.461: E/AndroidRuntime(592):  ... 11 more 
```

意图似乎没问题：

```
Log.v("service", String.valueOf(mServiceIntent == null)); //false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:10:33.083

您的堆栈跟踪清楚地显示了中`NullPointerException`发生的事情`okButton()`，并且根据您发布的代码，该函数中的唯一行是

```
 startService(mServiceIntent); 
```

很明显`mServiceIntent`，此时为 null，尽管设置为`onCreate()`.

你有其他设置的线`mServiceIntent`吗？

或者你有一个你调用的构造函数`okButton()`？构造函数是我能想到的唯一会在之前运行的东西`onCreate()`。这也可以解释为什么`onServiceConnected()`尽管调用了`bindService()`in却从不运行`onCreate()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:11:36.827

此代码不是正确的 Java 语法，因为方法定义没有返回类型：

```
private okButton(View v) {
    startService(mServiceIntent);
} 
```

你需要类似的东西：

```
private void okButton(View v) {
    startService(mServiceIntent);
} 
```

从堆栈跟踪来看，在`okButton()`调用 onCreate() 方法之前，在创建 MyActivity 实例期间调用了该方法，当然那时 mService 将为空。

发布更多代码或更正您发布的代码，使其与您使用的代码真正匹配。

# shopify - 应用程序代理返回 404

> ID：10923918
> 
> 赞同：2
> 
> 时间：2012-06-06T23:53:18.133
> 
> 标签：shopify

我已经为我的应用程序设置了应用程序代理，但是当我尝试访问我的测试商店中的 URL 时，它返回 404 错误。

代理网址：`http://localhost:3000`

小路：`tools/track`

测试店代理网址：`http://harber-inc8996.myshopify.com/tools/track`

当我访问该代理 URL（我相信您可以自己查看）时，它会返回 404 错误。

现在我正在写这个，我想知道......是代理 URL 不能解决的问题`localhost`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T00:16:02.883

您不能使用 localhost 作为代理。

这背后的原因是 Shopify 实际上必须能够向代理位置发送请求。从 Shopify 的角度来看 localhost 是......它本身。

您必须为您的代理提供一个可公开访问的地址。

有几种方法可以做到这一点。最简单/最受欢迎的方法是使用[localtunnel](http://progrium.com/localtunnel/)或[showoff.io](http://showoff.io)。Localtunnel 是免费的，但每次启动时都会为您提供不同的 URL。炫耀会给你一个永久地址，但要花钱。这就是人生。

# html - 使用 html 在 html 中获取所需的布局

> ID：10923921
> 
> 赞同：0
> 
> 时间：2012-06-06T23:53:33.390
> 
> 标签：html, css

我试图有一个 div 然后在该部门内有一些不同的地方可以放置东西。例如。

```
<div blah>

<table blah>
content...
</table>

<table blah>
content...
</table>

<table blah>
content....
</table>

</div> 
```

![http://i.stack.imgur.com/0iprE.jpg](../Images/a02505965ce197cbfc081a7eaf4102e9.png)

我不是真正的网络开发人员，所以我知道这个问题可能看起来很简单，但非常感谢任何帮助。哦，我正在使用 Macromedia Dreamweaver 8。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T23:57:21.740

我建议使用三个不同的 div，然后使用 CSS 来放置 div。查看这篇关于 CSS 定位的 w3 学校文章：http: [//www.w3schools.com/css/css_positioning.asp](http://www.w3schools.com/css/css_positioning.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T00:03:36.837

这可能不是教程和“hello world”的地方，但这里有一些可以帮助您入门的地方：

[http://jsfiddle.net/rBNUy/](http://jsfiddle.net/rBNUy/)

**HTML：**

```
<div class="main">
    <div class="sidebar"></div>
    <div class="top"></div>
    <div class="bottom"></div>
</div>​ 
```

**CSS：**

```
.main{  /* this makes the containing box 200x200  */
   width: 200px;
   height:200px;    
    background: #eee;
}
.sidebar{ /* this makes the sidebar 100x200 and makes it stick to as far left as it can */
    background:blue;
    float:left;
    height:100%;
    width: 100px;
}
.top, .bottom{ /* this makes the boxes 96x96 and makes them stick to as far left as they can , eventually till they hit the sidebar */
   width: 96px;
   height:96px;
    float:left;
    background:red;
    border:solid 2px green;
} 
```

注释显然被过度简化了，但从本质上讲，“浮动”将元素彼此堆叠在一起，就像在单词中堆叠字母一样。

当一个浮动元素用完空间来堆叠在同一行时，它只会跳到下一行，并找到最近的“墙”来堆叠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T00:17:37.753

一般来说，尽量不要将表格用于非表格数据——换句话说，不要尝试使用表格来构建网页。这是一篇可能会让您思考的好文章：[http ://www.alistapart.com/articles/practicalcss/](http://www.alistapart.com/articles/practicalcss/)

另一方面，很多人尝试使用 w3schools 来学习 HTML 和 CSS。w3schools 对于更有经验的程序员来说是一个很好的参考，但我觉得它无法教会新手程序员大局。实际上，您从反复试验以及查看其他人的工作（源代码）中学到了很多东西。[http://www.csszengarden.com/](http://www.csszengarden.com/)有很多网页，它们肯定会帮助您学习一些新的 HTML 和 CSS 技术。

我为您实施了一个粗略的解决方案，如果您要使用表格，您的标记将如何（可怕）看起来。

[http://jsfiddle.net/Wexcode/vMXQe/](http://jsfiddle.net/Wexcode/vMXQe/)

HTML：

```
<table id="container">
    <tr>
        <td id="sidebar"></td>
        <td id="main">
            <table>
                <tr>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                </tr>
            </table>
        </td>
    </tr>
</table>​ 
```

CSS：

```
table { background: #000; }
td { background: #fff; }

#container { 
    width: 600px;
    height: 400px;
    margin: 0 auto; }
#sidebar { width: 35%; }
#main { width: 65%; }
#main table { width: 100%; height: 100%; }
#main table tr { height: 50%; } 
```

# javascript - 动态创建 DropDownList 值作为 Javascript 数组的键

> ID：10923923
> 
> 赞同：0
> 
> 时间：2012-06-06T23:53:35.370
> 
> 标签：javascript, asp.net

我正在使用 ASP.NET 将 REST 请求发送到我无法控制的服务器。一种类型的请求是针对特定产品的。该产品可能有许多不同的变体。一些变化可能是尺寸、颜色、金属（金、银等）。对于某些产品，可能存在年份变化和品牌（福特、道奇等）。这里的重点是变化很多，有时只有一个变化，而有时一个产品可能有 3 或 4 个变化。

此外，没有关于变体可能包含多少选择的设置列表。例如，一种产品可能有粉色、绿色、蓝色的颜色变化，而另一种产品可能只有黑色或白色。尺寸有时可能包含 8、10、12 和 14 用于珠宝物品，或小、中、大用于服装。

产品的变体组合始终在 REST 响应中返回。例如，我总是知道产品变体属性，如“颜色”、“尺寸”等。我发现呈现这些变体选项的最简洁方式是使用 DropDownLists。我可以动态地创建一个“颜色”的 DropDownList 并用粉红色、绿色和红色的选项填充它 - 或其他。

颜色为粉红色且尺寸为小的产品与粉红色和大尺寸的产品具有不同的产品 ID。

因此，如果网络访问者查找产品然后选择所需的变体，我需要客户端脚本逻辑来关联产品 ID（基于选择的变体），以便可以将产品添加到他的购物车中。

REST 响应包含与变体组合相关联的产品 ID 数组。

对于这么长的解释，我感到很抱歉，但我目前没有任何代码可以展示。

我想知道的是，由于 JavaScript 不支持多维数组，我必须使用客户端 Javascript 逻辑根据一个或多个 DropDownLists 的选定值来确定产品 ID 有哪些选项？

在服务器端，无论是在我的 XSLT 模板中还是在 ASP.NET 代码隐藏中，我都可以以某种方式使用“Page.ClientScript.RegisterArrayDeclaration”，但我确实需要一些不知道具体变体名称是什么的逻辑。

因此，例如，我有一个名为“WIDGET”的产品，它具有以下变体（布局为 ProductID、variation1、variation2）：

```
"00001", "Black", "Small"
"00002", "Pink", "Small"
"00003", "Red", "Small"
"00004", "Black", "Medium"
"00005", "Pink", "Medium"
"00006", "Red", "Medium"
"00007", "Black", "Large"
"00008", "Pink", "Large"
"00009", "Red", "Large" 
```

我有 2 个下拉列表：

颜色：黑色、粉色、红色

和

尺寸：小号、中号、大号

如何根据选择的变量 1 和变量 2 的值确定 ProductID？请记住，这些属性是动态创建/填充的。客户端 Javascript 需要是通用的。我可能需要为 Javascript 逻辑创建几个数组。

一种通过可能的变化：

```
Page.ClientScript.RegisterArrayDeclaration("product_variation", "Color")
Page.ClientScript.RegisterArrayDeclaration("product_variation", "Size") 
```

如上所述，另一个包含 ProductID 及其相关变体：

```
Page.ClientScript.RegisterArrayDeclaration("product_1_ID", "00001")
Page.ClientScript.RegisterArrayDeclaration("product_1_Color", "Black")
Page.ClientScript.RegisterArrayDeclaration("product_1_Size", "Small")

Page.ClientScript.RegisterArrayDeclaration("product_2_ID", "00002")
Page.ClientScript.RegisterArrayDeclaration("product_2_Color", "Black")
Page.ClientScript.RegisterArrayDeclaration("product_2_Size", "Medium") 
```

等等等等。但老实说，我不知道 Javascript，我只是不知道如何在没有看到示例的情况下完成此操作。我已经搜索过，但找不到任何接近的东西。如果它有助于客户端脚本，我还可以在 asp 页面中创建一些隐藏的输入。

谁能指出一个可以帮助我解决此问题的示例？有没有更简单/更合适的方式来做我需要的事情？

感谢您阅读所有这些内容。因为太长了，差点没发。。。

**编辑：**

下面由 gilly3 提交的想法与我认为这应该如何工作是正确的。同样，我对任何风格的 Javascript 的经验都非常有限，但我已经尽我所能地遵循了这些说明。不过我在某个地方遇到了问题，所以我想展示我的进度并询问您是否发现出了什么问题。

在 Product.aspx 中，我创建了一个隐藏字段，其中包含正在查看的产品的变体：

```
<input id="hfdatalist" type="hidden" value="[
{"Id": "00001","Color": "Tidal", "Size": "2"},
{"Id": "00002","Color": "Tidal", "Size": "4"},
{"Id": "00003","Color": "Tidal", "Size": "6"}, 
{"Id": "00004","Color": "Tidal", "Size": "8"}, 
{"Id": "00005","Color": "Tidal", "Size": "10"}, 
{"Id": "00006","Color": "Tidal", "Size": "12"}, 
{"Id": "00007","Color": "Tidal", "Size": "14"}, 
{"Id": "00008","Color": "Tidal", "Size": "16"}
]" /> 
```

还有一个包含变化属性（颜色和大小）的隐藏字段：

```
<input id="hfpropctlmap" type="hidden" value=
"{"ddSize": "Size", "ddColor": "Color"}"
/> 
```

我有两个下拉列表。一个用于大小，ID 为 ddSize，另一个用于颜色，ID 为 ddColor。ddColor（在这种情况下）只有一个选项，“潮汐”。ddSize 有多个选项，2、4、6、8、10、12、14 和 16。单击这​​些下拉列表中的任何一个选项都会触发以下 Javascript。

在 Product.aspx 中，我包含了由 gilly3 提供的 Javascript 示例。我对将一些代码放在哪里做了一些假设，但在大多数情况下，我逐字逐句地使用它：

```
<!-- Augment JS files -->
<script type="text/JavaScript" src="../Scripts/augment.min.js"></script>

<!-- Variations Support Script -->
<script type="text/JavaScript">
    $("select").change(function () {

        var data = $.parseJSON($("#[id*='hfdatalist']").val());
        var propertyControlMap = $.parseJSON($("#[id*='hfpropctlmap']").val());
        var filteredData = data;

        var selections = $("select").map(function () {
            return {
                Property: propertyControlMap[this.id],
                Value: $(this).val()
            };
        }).get();

        filteredData = data.filter(function (item) {
            return selections.every(function (selection) {
                return item[selection.Property] == selection.Value;
            });
        });
        var selectedId = filteredData.length == 1 ? filteredData[0].Id : "";
        $("#[id*='SelectedVariationASIN']").val(selectedId)
    }); 
</script> 
```

我意识到这段代码有点乱，因为我有一些调试帮助。有 2 个警报显示保存到变量 test 和 test1 的隐藏字段的内容。这两个都完美地显示了隐藏字段的值（我认为！）。

我设置了一个断点并查看数据变量的内容。数组有 8 个元素 (0-7)，每个元素都包含正确的 Id、Color 和 Size 值。属性名称显示正确，实际数据有效。

与 propertyControlMap 相同。当我查看它的数据时，属性名称和值是正确的。有 2 个元素 (0-1)。

当然，filteredData 也是正确的，因为此时它只是数据 var 的副本。

我看的下一个变量是选择。这是事情不太对劲的第一个迹象。分配选择并查看其值后，我可以看到有 9 个方法和 2 个元素 (0-1)。查看元素后，selections[0].Property 为“未定义”，其值不正确“1036682”。我从存储在页面上另一个名为“hfSearchIndex”的隐藏字段中的值中识别出该值。我不知道为什么会这样。脚本中根本没有引用此字段。它与我的这部分程序逻辑无关。

奇怪的是，selections[1].Property 还包含“未定义”，尽管 Value 包含我在 ddSize 下拉列表中单击的任何大小的实际值。所以，它是部分正确的。

从这一点来看，代码是不可预测的，可能不值得评论，除了说最后一行代码 selectedId 返回 ''。

gilly3 或其他任何人，你能看到我做错了什么吗？

**编辑#2**

gilly3 提到 propertyControlMap 可能不包含下拉列表控件的正确 ID。我不肯定，但我认为它确实包含正确的 ID。但是，涉及到一个母版页和一个 asp:PlaceHolder 控件。所以 Name 属性确实有一些修改。

以下是一些事实：

1.  hfdatalist 看起来很完美（如上所示）。
2.  hfpropctlmap 看起来很完美（如上所示）。
3.  var 数据被正确初始化。数组的每个元素都包含在 hfdatalist 隐藏字段中指定的完美 ID、颜色和大小值。（即：00001，黑色，小号）。
4.  var propertyControlMap 被正确初始化。数组的每个元素都包含下拉列表的完美 ID 和正确的变体名称。（即：ddColor 和 Color）。
5.  问题的第一个迹象是在`var selections =`Javascript 中。这行代码执行后，`selections`不包含有效数据。而不是选择等于：ID=00001，Color=Black，Size=Small 它等于 undefined=1036682，Color=Black，Size=Small。由于某种原因，没有正确设置 ProductID。

页面呈现后，我查看源代码，这里是下拉列表：

```
<select name="ctl00$PageContent$ddSize" id="ddSize">
    <option value="Small">Small</option>
    <option value="Medium">Medium</option>
</select>

<select name="ctl00$PageContent$ddColor" id="ddColor">
    <option value="Black">Black</option>
    <option value="Cobalt">Cobalt</option>
    <option value="Coral">Coral</option>
    <option value="Jade">Jade</option>
    <option value="Yellow">Yellow</option>
</select> 
```

在页面的下方，还有另一个隐藏字段与此问题/答案中讨论的逻辑完全无关：

```
<input type="hidden" name="SearchIndex" value="1036682"> 
```

我无法弄清楚为什么这个字段的值（“1036682”）被用于 ProductID 值`var selections`

我不确定如何进一步记录我的问题。我确实怀疑，就像 gilly3 一样，我引用控件 ID 的方式有些不正确，尽管 propertyControlMap 在其所有元素/属性中确实包含完全有效/正确的数据。

如果这是由于母版页和占位符导致的控件 ID 问题，我该如何解决？

注意：下拉列表控件是使用在收到的 REST 响应上运行的 XSLT 样式表在 XSLT 转换中创建的。隐藏字段是使用反序列化的 REST 响应在页面代码隐藏中创建的。

谢谢你在这个gilly3上帮助我。由于我不了解Javascript，我真的被困住了。在这种情况下，我必须使用 Javascript 才能跨浏览器兼容。在我的项目中包含我真的不太了解的代码让我有点紧张，但我会特别注意它。

希望我没有混淆。:S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T00:43:57.277

将您的数据作为对象数组存储在 JavaScript 中。如果你有一个`List<T>`强类型对象，你可以使用`new JavaScriptSerializer().Serialize(myList);`. 但是，听起来您正在手动解析 XML，因此您可能还必须手动创建 JSON。无论如何，您最终会得到一个格式如下的字符串：

```
[{
    "Id": "00001",
    "Color": "Black",
    "Size": "Small"
},
{
    "Id": "00002",
    "Color": "Pink",
    "Size": "Small"
},
...
{
    "Id": "00009",
    "Color": "Red",
    "Size": "Large"
}] 
```

您需要一种将对象属性名称映射到其相应下拉列表的方法。我会像这样用 JSON 来表达它：

```
{
    "<Color DropDownList.ClientID Goes Here>": "Color",
    "<Size DropDownList.ClientID Goes Here>": "Size",
    ... // etc
} 
```

将这些 JSON 字符串拖放到页面上的隐藏字段中。在您的 JavaScript 中，您将使用以下内容对它们进行反序列化：

```
var data = $.parseJSON($("#<%= DataList.ClientID %>").val());
var propertyControlMap = $.parseJSON($("#<%= PropCtrlMap.ClientID %>").val());
var filteredData = data; 
```

然后将`onchange`处理程序附加到您的下拉列表，以便您可以在选择更改时过滤数据。您需要创建一组属性名称和当前选择的值来测试您的数据。然后，您可以使用`Array.filter()`将数据减少到满足函数指定条件的项目。您可以`Array.every()`在过滤器功能中使用来测试每​​个项目以查看它是否与所有选择匹配。 **编辑：**然后将所选项目的 id 填充到隐藏字段中，以便您可以在按钮的单击处理程序中的服务器上访问它：

```
$("select").change(function () {
    var selections = $("select").map(function () {
        return {
            Property: propertyControlMap[this.id],
            Value: $(this).val()
        };
    }).get();
    filteredData = data.filter(function(item) {
        return selections.every(function(selection) {
            return item[selection.Property] == selection.Value;
        });
    });
    var selectedId = filteredData.length == 1 ? filteredData[0].Id : "";
    $("#<%= SelectedItemId.ClientID %>").val(selectedId)
}); 
```

如果您想支持 IE8 或更早版本，请确保添加对[`Array.filter()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter#Compatibility)和的支持[`Array.every()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/every#Compatibility)，因为在 IE9 之前不原生支持这些。

**编辑：**您如何访问服务器上的 id：

```
void AddToCartButton_Click(object sender, EventArgs e)
{
    ShoppingCart.AddToCart(SelectedItemId.Value);
} 
```

但是，你不能在没有 JavaScript 的情况下也这样做吗？您可以使用选定的值在单击处理程序中过滤服务器上的项目。下面是一个简化 - 您需要迭代下拉列表，而不是对它们进行硬编码 - 但它说明了我的思路。

```
void AddToCartButton_Click(object sender, EventArgs e)
{
    string itemsXml = RestUtility.RequestItems();
    XDocument xItemsDoc = new XDocument(itemsXml);
    IEnumerable<XElement> xItems = xItemsDoc.Descendants("Item");
    XElement xSelected = xItems.SingleOrDefault(e =>
        e.Attribute("Color").Value == ColorSelector.SelectedValue &&
        e.Attribute("Size").Value == SizeSelector.SelectedValue);
    if (xSelected != null)
    {
        ShoppingCart.AddToCart(xSelected.Attribute("Id").Value);
    }
} 
```

# php - 允许上传和浏览但不允许下载

> ID：10923924
> 
> 赞同：0
> 
> 时间：2012-06-06T23:53:57.077
> 
> 标签：php, apache2, chmod, chown

我认为这个问题应该很容易，但是在搜索了整个网络之后我找不到答案，所以我决定在这里问。

我的网站上有一个与 php 配合使用的文件上传器。上传文件的文件夹有 777 chmod。我还有一个 php 脚本来列出该文件夹中的文件。我需要的是允许 php 上传和浏览该文件夹中的文件，但不允许人们这样做。我想象的唯一解决方案是将该文件夹分配给与默认不同的另一个用户，因此我可以稍后在 filezilla 中进行 chmod 并只允许所有者执行此操作，因此人们将通过 php 脚本的输出看到文件，但如果他们不会导航到该文件夹​​。

我正在使用 Debian，apache2。我想知道我能做什么。

简而言之，我的目标是：允许 php 上传、读取、写入和执行该文件夹中的文件，但不允许客户端，除非他们使用我的 php 脚本。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:59:48.283

所有服务（包括 Web 服务器）都在作为操作系统帐户的安全上下文中运行，例如 apache 开始使用 apache 组中的 apache 用户。更改模式并将所有者更改为此用户和组就足够了。永远不要将目录 chmod 到 777，直到有一个很好的解释。使用此技巧，Web 服务进程只能在该目录中读取、写入和执行。

同样，如果您不希望浏览器客户端看到（读取）该目录的内容，您应该拒绝在该目录上列出。我认为它默认是禁用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T23:56:11.857

将您正在谈论的所有文件放在他们自己的目录中。将`.htaccess`文件添加到该目录。的内容`.htaccess`应该是`deny from all`。

这将阻止任何用户手动访问文件，因为访问将被阻止。您的 PHP 脚本仍然可以浏览文件的内容并将其作为具有正确内容类型的附件提供。

有关如何在 PHP 中提供文件以供下载的更多信息，请阅读：[https ://serverfault.com/questions/316814/php-serve-a-file-for-download-without-providing-the-direct-link](https://serverfault.com/questions/316814/php-serve-a-file-for-download-without-providing-the-direct-link)

# asp.net-mvc - 我如何区分asp.net mvc中的正常注销或facebook注销

> ID：10923925
> 
> 赞同：2
> 
> 时间：2012-06-06T23:54:22.813
> 
> 标签：asp.net-mvc, facebook-graph-api, facebook-c#-sdk

我正在尝试使用 Graph Api 将 facebook 与我的 asp.net mvc Web 应用程序集成。我已成功登录 facebook 并获得了 cookie。但是当用户单击注销时，我想执行一个条件以进行 facebook 注销或我的网站注销，例如，

```
if(Facebook Logout)
{
return new RedirectResult("http://www.facebook.com/logout.php?api_key=XXX..");
}

else if(My Webapp logout)
{
Session.RemoveAll();
FormsAuthentication.Signout();
return RedirectToAction("Index","Home");
} 
```

那么用户是否需要从（facebook和应用程序）注销或仅从应用程序注销的条件是什么。我如何确定用户是否连接到 Facebook。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:17:07.303

一种可能的解决方案是在您使用 facebook 登录时创建会话/cookie，在注销时您可以检查 cookie/会话是否存在并根据

# javascript - jquery 行和列突出显示在数据表中不起作用（rails 应用程序）

> ID：10923929
> 
> 赞同：0
> 
> 时间：2012-06-06T23:54:39.973
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, datatables

我的 rails 应用程序的“listings.js”中有以下代码。我使用 gem 数据表来显示一些数据。我想突出显示我的列和行，如本[例](http://datatables.net/examples/api/highlight.html)所示。但是突出显示功能在我的应用程序中不起作用。

```
//Initialize the datatable
$(document).ready(function()
{
  var listingsTable = $('#listings').dataTable(
  {
    "sPaginationType":  "full_numbers",
    "bJQueryUI": true,
    "bSortClasses": false,
    "sScrollX": "90%",
    "bScrollCollapse": true,
    "sDom":  '<"top"iflp<"clear">>rt<"bottom"iflp<"clear">>',
    "bProcessing": true,
    "bServerSide": true,
    "sAjaxSource": $('#listings').data('source')
  });

  $('td', listingsTable.fnGetNodes()).hover(function() 
    {
        var iCol = $('td').index(this) % 5;
        var nTrs = listingsTable.fnGetNodes();
        $('td:nth-child('+(iCol+1)+')', nTrs).addClass( 'datatablerowhighlight' );
    }, 
    function() 
    {
        $('td.datatablerowhighlight',     listingsTable.fnGetNodes()).removeClass('datatablerowhighlight');
    } );

}); 
```

这是我的 Listings.css.scss 文件

```
.datatablerowhighlight 
{
    background-color: #ECFFB3 !important;
} 
```

那么我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T00:24:50.647

从[http://railscasts.com/episodes/340-datatables](http://railscasts.com/episodes/340-datatables)尝试添加：

```
group :assets do
  gem 'jquery-datatables-rails', github: 'rweng/jquery-datatables-rails'
  gem 'jquery-ui-rails'
end 
```

到您的 Gemfile 和

```
//= require dataTables/jquery.dataTables 
```

到 app/assets/javascripts/application.js。

# objective-c - 如何在 RubyMotion 项目中包含 Objective C 类别

> ID：10923930
> 
> 赞同：1
> 
> 时间：2012-06-06T23:54:44.097
> 
> 标签：objective-c, rubymotion

在我的 Xcode 项目中，我有时会使用一个类别来向 MKMapView 添加缩放级别功能。现在我想在我的 RubyMotion 项目中使用该类别。这些文件位于供应商目录中，我已将它们包含在

```
app.vendor_project('vendor', :static) 
```

看起来编译正常，但 ld 抱怨说

```
ld: in /Users/admin/gitrep/bgApp/vendor/build-iPhoneSimulator/libvendor.a, 
archive has no table of contents for architecture i386 
```

有谁知道这种包含类别（也可能是独立类）的方法是否有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T04:19:35.780

1.  使用 Xcode，创建一个名为“Cocoa Touch Static Library”的项目并将您的代码放入该项目中。

2.  将此项目放入您的`vendor/`.

3.  然后在 Rakefile 中这样写以在 RubyMotion 中使用。

耙文件

```
 app.vendor_project('vendor/UIFoo-Bar',
                 :xcode,
                 :headers_dir => 'UIFoo-Bar') 
```

# android - 跨多个活动的 Facebook 对象

> ID：10923932
> 
> 赞同：1
> 
> 时间：2012-06-06T23:54:48.403
> 
> 标签：android, facebook

我有两个活动需要使用我的 Facebook 对象。第一个活动执行登录过程，第二个活动需要 Facebook 对象来获取朋友列表。我正在使用一个扩展 Application 的类来将 Facebook 对象从第一个活动传输到第二个活动。

这很好用，但是当我在第一个活动上注销并登录时，在尝试在第二个活动上使用 Facebook 对象时出现此错误

```
 {"error_code":104,"error_msg":"Requires valid signature","request_args" 
```

当我重新登录时我正在更新 Facebook 对象，并且我正在我的 Application 类中更新 Facebook 对象。知道为什么我可能会收到此错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:25:31.280

您不需要将 Facebook 对象从一个活动传递到另一个活动，而是将访问令牌和过期时间保存到首选项中，然后在另一个活动中获取它们。
如果用户稍后返回应用程序，这也很好。

您可以使用官方 facebook 示例中的[SessionStore](https://github.com/facebook/facebook-android-sdk/blob/master/examples/simple/src/com/facebook/android/SessionStore.java)类，这将更容易保存/获取身份验证信息。

因此，在第一个活动中，您可以：

```
Facebook facebook = new Facebook("APP_ID");

if (!SessionStore.restore(facebook, this)) {
    // start the authentication process
}
else {
    // start the other activity
} 
```

在第二个活动中：

```
Facebook facebook = new Facebook("APP_ID");

if (!SessionStore.restore(facebook, this)) {
    // start the first activity to authenticate the user
}
else {
    // use the facebook object to make graph requests
} 
```

# firefox - Firefox 13 中画布上下文 getImageData 函数出现奇怪错误

> ID：10923937
> 
> 赞同：1
> 
> 时间：2012-06-06T23:55:42.733
> 
> 标签：firefox, canvas, getimagedata

我有一些画布代码在 safari 和 chrome 中运行良好，但在 Firefox 中失败。

Firefox 控制台显示：

> [17:44:13.372] 未捕获的异常：[异常...“不支持操作”代码：“9”nsresult：“0x80530009（NotSupportedError）”位置：“http://REDACTED.js 行：703”]

Firebug 提供了对人类稍微有用的功能：

```
Operation is not supported
var data = ctx.getImageData(x,y,1,1); 
```

我确实`.getImageData`在打 703 线。

我读过关于原产地政策的类似错误报告。该项目托管在网络服务器（非本地）上，我没有从其他域加载任何图像并将它们放在画布上。事实上，即使画布是空白的，我也会收到错误消息。

基于 webkit 的浏览器向我提供了像素数据，我问，firefox 可以做什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T16:02:34.393

不要传递`NaN`给 .getImageData。

# telerik - 为什么关闭按钮链接不适用于 DotNetNuke 上的 telerik:RadNotification 控件？

> ID：10923939
> 
> 赞同：0
> 
> 时间：2012-06-06T23:55:55.843
> 
> 标签：telerik, dotnetnuke

我正在使用 telerik:RadNotification 控件，带有`VisibleTitlebar="true"` `ShowTitleMenu="false"`和`ShowCloseButton="true"`。

当我将鼠标悬停在小 X（关闭按钮）上时，URL 是**"http://localhost/mySite/href"**。当我单击它时，它会将我带到一个`HTTP Error 404.0 - Not Found page`.

任何建议将不胜感激。有没有办法以编程方式修复坏链接？

我尝试`OnClientHiding="OnClientHiding"`在 OnClientHiding 方法中添加和添加 javascript 警报，但它首先进入错误页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:06:25.183

我的问题是我没有进入 OnClientHiding 事件处理程序。看起来 OnClientShown 事件处理程序中的某些代码导致了此问题。

# maven - 使用复制资源目标的 maven-resources-plugin 错误：“resources”、“outputDirectory”丢失或无效

> ID：10923944
> 
> 赞同：20
> 
> 时间：2012-06-06T23:56:55.020
> 
> 标签：maven, maven-resources-plugin

我正在尝试使用 maven-resources-plugin 使用 copy-resources 目标进行一些过滤，并遇到以下错误：

```
Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.5:copy-resources (default-cli) on project bar: The parameters 'resources', 'outputDirectory' for goal org.apache.maven.plugins:maven-resources-plugin:2.5:copy-resources are missing or invalid 
```

[为了隔离问题，我创建了一个非常简单的 pom.xml，从http://maven.apache.org/plugins/maven-resources-plugin/examples/copy-resources.html](http://maven.apache.org/plugins/maven-resources-plugin/examples/copy-resources.html)几乎逐字复制，运行它，得到同样的错误。

我正在调用它

```
mvn resources:copy-resources 
```

有任何想法吗？这是测试 pom.xml。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>foo</groupId>
  <artifactId>bar</artifactId>
  <version>1.0-SNAPSHOT</version>
  <build>
    <plugins>
      <plugin>
        <artifactId>maven-resources-plugin</artifactId>
        <version>2.5</version>
        <executions>
          <execution>
            <id>copy-resources</id>
            <!-- here the phase you need -->
            <phase>validate</phase>
            <goals>
              <goal>copy-resources</goal>
            </goals>
            <configuration>
              <outputDirectory>${basedir}/target/extra-resources</outputDirectory>
              <resources>          
                <resource>
                  <directory>src/non-packaged-resources</directory>
                  <filtering>true</filtering>
                </resource>
              </resources>              
            </configuration>            
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-08T22:10:37.297

您遇到的主要问题是您直接使用调用插件目标

```
mvn resources:copy-resources 
```

这不一定会创建输出目录。而是调用正确的 Maven 生命周期阶段。

```
mvn process-resources 
```

要获得生命周期阶段的完整列表，只需运行 mvn 命令即可。

一般来说，调用生命周期阶段而不是直接调用目标几乎总是更好，因为它保证满足任何先决条件（例如，不能在要测试的类之前编译测试类......）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-07T04:28:37.300

检查@bmargulies 答案是否适合您。你可以参考[这些例子](http://maven.apache.org/plugins/maven-resources-plugin/examples/resource-directory.html)。

在任何情况下，您都不需要使用`<pluginManagement>`来实现这一点。 `<pluginManagement>`用于多模块场景，方便`plugin`配置的继承。

您需要将元素`configuration`移出。`execution`以下代码段有效。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>foo</groupId>
  <artifactId>bar</artifactId>
  <version>1.0-SNAPSHOT</version>
  <build>
    <plugins>
      <plugin>
        <artifactId>maven-resources-plugin</artifactId>
        <version>2.5</version>
        <configuration>
          <outputDirectory>${basedir}/target/extra-resources</outputDirectory>
          <resources>          
        <resource>
          <directory>src/non-packaged-resources</directory>
          <filtering>true</filtering>
        </resource>
          </resources>              
        </configuration>            
        <executions>
          <execution>
            <id>copy-resources</id>
            <!-- here the phase you need -->
            <phase>validate</phase>
            <goals>
              <goal>copy-resources</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-12T15:25:37.093

只需删除执行及其配置。通常，您可能希望使用默认生命周期直接在插件配置中分别定义资源（请`<build> > <resources>`参阅`<build> > <testResources>`http://maven.apache.org/plugins/maven-resources-plugin/examples/resource-directory.html [）](http://maven.apache.org/plugins/maven-resources-plugin/examples/resource-directory.html)`process-(test-)resources`被迷住了`copy-(test-)resources.`。是的，这是他们页面上的一个坏例子！

# java - 在 weka 中添加实例到 Instances

> ID：10923947
> 
> 赞同：2
> 
> 时间：2012-06-06T23:57:16.847
> 
> 标签：java, weka

我有一些 arff 文件。我想按顺序阅读它们并创建一个大型数据集。Instances.add(Instance inst) 不会向实例添加字符串值，因此尝试 setDataset() ...但即使这样也失败了。有没有办法为字符串完成直观正确的事情？

```
 ArffLoader arffLoader = new ArffLoader();
                arffLoader.setFile(new File(fName));
                Instances newData = arffLoader.getDataSet();
                for (int i = 0; i < newData.numInstances(); i++) {
                        Instance one = newData.instance(i);
                        one.setDataset(data);
                        data.add(one);
                } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T10:43:13.117

这是来自邮件列表。我之前保存过

> 如何将两个数据文件 a.arff 和 b.arff 合并到一个数据列表中？

取决于你在谈论什么合并。您只是想附加第二个文件（两者都具有相同的属性）还是要添加合并属性（两者都具有相同数量的实例）？

```
In the first case ("append"): 
java weka.core.Instances append filename1 filename2 > output-file 

and the latter case ("merge"): 
java weka.core.Instances merge filename1 filename2 > output-file 
```

这是相关的 Javadoc：http://weka.sourceforge.net/doc.dev/weka/core/Instances.html#main(java.lang.String[])

使用[mergeInstances](http://weka.sourceforge.net/doc/weka/core/Instances.html#mergeInstances%28weka.core.Instances,%20weka.core.Instances%29)合并两个数据集。

```
 public static Instances mergeInstances(Instances first,
                                   Instances second) 
```

您的代码将如下所示。对于相同的实例编号。

```
ArffLoader arffLoader = new ArffLoader();
arffLoader.setFile(new File(fName1));
Instances newData1 = arffLoader.getDataSet();
arffLoader.setFile(new File(fName2));
Instances newData2 = arffLoader.getDataSet();
Instances mergedData = Instances.mergeInstances( newData1 ,newData2); 
```

您的代码将如下所示。对于相同的属性编号。我在 weka 中没有看到任何 java 方法。如果您阅读代码，则会出现以下内容。

```
// Instances.java
//  public static void main(String[] args) {
// read two files, append them and print result to stdout
  else if ((args.length == 3) && (args[0].toLowerCase().equals("append"))) {
DataSource source1 = new DataSource(args[1]);
DataSource source2 = new DataSource(args[2]);
String msg = source1.getStructure().equalHeadersMsg(source2.getStructure());
if (msg != null)
  throw new Exception("The two datasets have different headers:\n" + msg);
Instances structure = source1.getStructure();
System.out.println(source1.getStructure());
while (source1.hasMoreElements(structure))
  System.out.println(source1.nextElement(structure));
structure = source2.getStructure();
while (source2.hasMoreElements(structure))
  System.out.println(source2.nextElement(structure));
  } 
```

# java - 等价 Java 数组中的怪异：引用与指针

> ID：10923949
> 
> 赞同：4
> 
> 时间：2012-06-06T23:57:24.667
> 
> 标签：java, arrays, pointers

无法理解下面的代码中发生了什么。数组的行为`c`是`d`我所期望的。`a`但是和是怎么回事`b`？（我也用正常的标量变量尝试了这个，在这两种情况下都没有发生令人惊讶的事情。）

输出被复制到 RH 注释。

```
import java.util.Arrays;

public class ArraysParadox {

    public static void main(String[] args) {

        int[] c = {1, 2, 3};
        int[] d = {6, 5, 4, 3};

        System.out.print("c:       ");
        System.out.println(Arrays.toString(c)); // c:       [1, 2, 3]

        System.out.print("d:       ");
        System.out.println(Arrays.toString(d)); // d:       [6, 5, 4, 3]

        System.out.println("--- swap ---");
        int[] tmp = c;
        c = d;
        d = tmp;    // <----- Magic?

        System.out.print("c' (=d): ");
        System.out.println(Arrays.toString(c)); // c' (=d): [6, 5, 4, 3]

        System.out.print("d' (=c): ");
        System.out.println(Arrays.toString(d)); // d' (=c): [1, 2, 3]

        System.out.println("--- c = 0 ---");
        Arrays.fill(c, 0);
        System.out.print("c (=0):  ");
        System.out.println(Arrays.toString(c)); // c (=0):  [0, 0, 0, 0]

        System.out.print("d (=c):  ");
        System.out.println(Arrays.toString(d)); // d (=c):  [1, 2, 3]

        System.out.println("--- d = 1 ---");
        Arrays.fill(d, 1);
        System.out.print("c (=d):  ");
        System.out.println(Arrays.toString(c)); // c (=d):  [0, 0, 0, 0]

        System.out.print("d (=1):  ");
        System.out.println(Arrays.toString(d)); // d (=1):  [1, 1, 1]

        System.out.println("================");

        int[] a = {1, 2, 3};
        int[] b = {6, 5, 4, 3};

        System.out.print("a:       ");
        System.out.println(Arrays.toString(a)); // a:       [1, 2, 3]

        System.out.print("b:       ");
        System.out.println(Arrays.toString(b)); // b:       [6, 5, 4, 3]

        a = b;
        System.out.print("a (=b):  ");
        System.out.println(Arrays.toString(a)); // a (=b):  [6, 5, 4, 3]

        System.out.println("--- α = 0 ---");
        Arrays.fill(a, 0);
        System.out.print("a (=0):  ");
        System.out.println(Arrays.toString(a)); // a (=0):  [0, 0, 0, 0]
        System.out.print("b (=a?): ");
        System.out.println(Arrays.toString(b)); // b (=a?): [0, 0, 0, 0]    ???

        System.out.println("--- b = 1 ---");
        Arrays.fill(b, 1);
        System.out.print("b (=1):  ");
        System.out.println(Arrays.toString(b)); // b (=1):  [1, 1, 1, 1]
        System.out.print("a (=b?): ");
        System.out.println(Arrays.toString(a)); // a (=b?): [1, 1, 1, 1]
    }
} 
```

根据这篇文章的可交换性`c`和`d`表示按值传递：[Java is Pass-by-Value, Dammit！](http://javadude.com/articles/passbyvalue.htm). （我也看了[java array pass by reference does not work?，](https://stackoverflow.com/questions/2831879/java-array-pass-by-reference-does-not-work)但是我看不懂提问者的英文，方法调用遮盖了例子。）

请注意，该行已被`d = tmp;`注释掉，`c`并表现出与和`d`相同的奇怪行为。我仍然不知道该怎么做。`a``b`

***谁能解释如何用传递值来解释`a`和的行为？`b`***

# 编辑：附录

事实证明，我帖子中的主要问题不是按值传递，而是别名。为了清楚按值传递和指针之间的区别，我在我的代码中添加了以下方法，并用它来（尝试）交换`c`和`d`（由上面链接的 JavaDude 的[文章](http://www.cprogramming.com/tutorial/references.html)链接的文章建议）。

```
static <T> void swap (T c, T d) {
    T tmp = c;
    c = d;
    d = tmp;
} 
```

结果就是这样`c`，`d`回来不变。如果 Java（如 C）传递指向`c`和指向`d`方法的指针，这将起作用，但它只是简单地传递它们的值，而原始变量保持不变。

更改`a = b`为`a = b.clone();`或更改为`a = Arrays.copyOf(b, b.length);`我所期望的行为。此代码也适用：

```
 int[] tmp = new int[b.length];
    System.arraycopy( b, 0, tmp, 0, b.length );
    a = tmp; 
```

[此处](http://www.javapractices.com/topic/TopicAction.do?Id=3)描述的相对时间。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T00:02:45.697

这里没有什么“奇怪”的地方：数组变量是对实际数组的*引用*（在其他语言中也称为指针）。当您操作数组变量时，您所做的就是操作指针。

当您将一个数组变量分配给另一个变量时，您会为您分配的变量指向的数组创建一个*别名*，并使之前被分配的变量指向的数组符合垃圾回收的条件。因为赋值`a = b`产生`a`了 的别名`b`，所以填充数据的行为与填充`b`数据的行为完全相同`a`：一旦赋值完成，`a`并且`b`只是同一事物的两个不同名称。

就*按值传递*而言，您的示例中没有发生任何事情：仅当您将对象作为参数传递给您调用的方法时，按值传递的概念才适用。在您的示例中，变量`a`、`b`、`c`和`d`不是方法参数，它们是局部变量。您确实通过对方法的引用传递它们`toString`and `fill`（或者更准确地说，您通过值传递对对象的引用到`toString`and `fill`，因为在 Java 中一切都是按值传递的），这就是为什么对数组所做的修改`fill`在返回时可见从方法上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T00:04:52.270

`a = b;`当您进行像, if`a`和are not 原语之类的赋值时`b`，它们现在引用同一个对象。在您的情况下，它们现在引用相同的数组。您对其中任何一个所做的任何更改也会影响另一个（因为您只更新一件事，并且两者`a`都`b`指向它）。

请注意，此行为与 Java 中的参数传递方式无关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T00:00:55.667

数组初始值设定项在后台调用 new（所以在这种情况下，它是句法 saccharine）。靠近顶部的交换只是交换引用，下面的交换完全按照您期望的引用执行。

链接的文章指的是参数...在Java中，所有参数都是按值传递的，只是引用本身是按值传递的，即对REFERENCE（而不是其取消引用的内容）的更改不会反映在子例程的范围之外。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-16T05:44:53.397

在 Java 课程中，数组有一个重要的点通常不会被教授或遗漏。当数组传递给函数时，会创建另一个指向同一个数组的指针（永远不会传递同一个指针）。您可以使用这两个指针来操作数组，但是一旦您将第二个指针分配给被调用方法中的新数组并通过 void 返回到调用函数，则原始指针仍然保持不变。

您可以在这里直接运行代码：[https ://www.compilejava.net/](https://www.compilejava.net/)

```
import java.util.Arrays;

public class HelloWorld
{
    public static void main(String[] args)
    {
        int Main_Array[] = {20,19,18,4,16,15,14,4,12,11,9};
        Demo1.Demo1(Main_Array);
        // THE POINTER Main_Array IS NOT PASSED TO Demo1
        // A DIFFERENT POINTER TO THE SAME LOCATION OF Main_Array IS PASSED TO Demo1

        System.out.println("Main_Array = "+Arrays.toString(Main_Array));
        // outputs : Main_Array = [20, 19, 18, 4, 16, 15, 14, 4, 12, 11, 9]
        // Since Main_Array points to the original location,
        // I cannot access the results of Demo1 , Demo2 when they are void.
        // I can use array clone method in Demo1 to get the required result,
        // but it would be faster if Demo1 returned the result to main
    }
}

public class Demo1
{
    public static void Demo1(int A[])
    {
        int B[] = new int[A.length];
        System.out.println("B = "+Arrays.toString(B)); // output : B = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        Demo2.Demo2(A,B);
        System.out.println("B = "+Arrays.toString(B)); // output : B = [9999, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        System.out.println("A = "+Arrays.toString(A)); // output : A = [20, 19, 18, 4, 16, 15, 14, 4, 12, 11, 9]

        A = B;
        // A was pointing to location of Main_Array, now it points to location of B
        // Main_Array pointer still keeps pointing to the original location in void main

        System.out.println("A = "+Arrays.toString(A)); // output : A = [9999, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        // Hence to access this result from main, I have to return it to main
    }
}
public class Demo2
{
    public static void Demo2(int AAA[],int BBB[])
    {
        BBB[0] = 9999;
        // BBB points to the same location as B in Demo1, so whatever I do
        // with BBB, I am manipulating the location. Since B points to the
        // same location, I can access the results from B
    }
} 
```

# php - 使限制文本的功能不显示最后一个标点符号

> ID：10923955
> 
> 赞同：0
> 
> 时间：2012-06-06T23:58:22.000
> 
> 标签：php

我有这个限制文本的功能，比如上面的 50 个字符：

```
$bio = limit_text($bio, 50);

function limit_text($text, $length){ // Limit Text
    if(strlen($text) > $length) {
        $text = substr($text, 0, strpos($text, ' ', $length));
    }
    return $text;
} 
```

这应该回显类似：

*您好，这是一个限制为 50 个字符的文本，它是一个很棒的...*

**问题是该功能显示的最后一个标点符号看起来不专业。就像在这个例子中一样：**

*您好，这是一个限制为 50 个字符的文本，最后有一个逗号，...*

有什么办法可以让函数不显示最后一个标点符号？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T00:07:35.187

```
<?php

$text="Hello, this is a text limited to 50 chars and it has a comma at the end.";

//$text = preg_replace("/[^a-zA-Z 0-9]+/", " ", $text); //bad
$text=rtrim($text,",.;:- _!$&#"); // good select what you want to remove

echo $text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T00:08:11.793

这应该可以完成工作，`ctype_punct`检查给定字符串中的所有非字母数字字符。

```
function limit_text($text, $length){ // Limit Text
    if(strlen($text) > $length) {
        $text = substr($text, 0, strpos($text, ' ', $length));
        if(ctype_punct(substr($text,-1))
            $text=substr($text,0,-1);
    }
    return $text;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T00:08:42.557

```
return rtrim($text, ',') . '...'; // That is if you only care about the ',' character 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-07T00:04:30.993

您可以使用这样的函数来解析第`$text`一个：

```
$text = preg_replace("/[^a-zA-Z 0-9]+/", " ", $text); 
```

# javascript - 如何在单个导航页面中更改徽标图像

> ID：10923963
> 
> 赞同：0
> 
> 时间：2012-06-07T00:00:07.857
> 
> 标签：javascript, jquery, css

我在单个导航页面中更改了徽标图像。这意味着，例如，页面中有 2 个选项卡，例如主页和联系人。

这是一个带有垂直对齐选项卡的单页导航，上面会有徽标。当我滚动到底部时，它会移动到联系人选项卡，并且该页面的背景颜色也会发生变化。这时候我也改变了形象。

下面是CSS文件

```
/* ----anchor---- */
a, a:link{
    color:#6db0da;
    text-decoration:none;
}
a:hover, a:active{
    color:#6db0da;
    text-decoration:underline;
}

.story { height: 1000px; padding: 0; margin: 0; width: 100%; max-width: 1920px; position: relative; margin: 0 auto; box-shadow: 0 0 50px rgba(0,0,0,0.8);}

#home { background: #00617b; }
#contact { background: #46AA27; }

#container {
    width: 945px;
    margin: 0 auto;
    display: block;
    overflow: hidden;
    z-index: 55;
    height: 100%;
}

nav{
    width: 250px;
    height: 100%;
    float: left;
    display: block;
    overflow: hidden;
    text-align: center;
    position: fixed;
    z-index:500;
}

nav #nav-logo{
    font-family: "BebasNeueRegular", Arial, Helvetica, sans-serif;
    font-size:43px;
    text-transform:uppercase;
    text-align:center;
    color:#FFF;
    text-decoration:none;
    display:block;
    font-weight:normal;
    text-shadow: #2B0D09 0px 1px 0px;
    background:url(../images/Home.png) no-repeat center;
    height: 250px;
    width: 250px;
} 
```

下面是html页面

```
<!DOCTYPE HTML>
<html class="no-js" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Single Page Navigation</title>
<meta name="description" content="" />
<meta name="keywords" content="" />
<meta name="author" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/style.css">

</head>

<body>
<section id="top"></section>
    <section id="home" class="story">

<div id="container">
        <nav><div class="active" id="nav-logo"></div>
        <ul id="nav">
        <li class="active" id="nav-1"><a href="#home">Home</a></li>
        <li id="nav-2"><a href="#contcat">Contact</a></li>

        </ul>
        <div class="bg_bottom"></div>
    </nav>
    <div id="content">

<div id="loader" class="loader"></div>
    <div id="ps_container" class="ps_container"> <span class="ribbon"></span>
        <div class="ps_image_wrapper"> 
        <img src="images/1.jpg" alt=""/>
        </div>
        <div class="ps_next"></div>
        <div class="ps_prev"></div>
        <ul class="ps_nav">
        <li class="selected"><a href="images/1.jpg" rel="images/thumbs/1.jpg">Image 1</a></li>
        <li><a href="images/2.jpg" rel="images/thumbs/2.jpg">Image 2</a></li>
        <li><a href="images/3.jpg" rel="images/thumbs/3.jpg">Image 3</a></li>
        <li><a href="images/4.jpg" rel="images/thumbs/4.jpg">Image 4</a></li>
        <li><a href="images/5.jpg" rel="images/thumbs/5.jpg">Image 5</a></li>
        <li class="ps_preview">
        <div class="ps_preview_wrapper"> 
        </div>
        <span></span>
        </li>
        </ul>
    </div>

</div>
</div>

    </section>

    <section id="contact" class="story">    
<div id="container">    

    <div id="content">
Test
</div>
</div>
    </section>  

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script src="js/jquery.tweet.js" charset="utf-8"></script>
<script src="js/jquery.slideshow.js"></script>
<script src="js/jquery.nav.js"></script>
<script src="js/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
<script src="js/form.js" type="text/javascript"></script>
</body>
</html> 
```

我必须将 nav-logo CSS 样式设置为通用的，以便在从一张桌子移动到另一张桌子时更改图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T01:08:14.337

```
$("yourtablename").mouseenter(function  (  ) {
    $("#nav-logo").css({"background-image":"url(yourimageurl)"});
}) 
```

像这样的东西

# c# - 'ref' 关键字的内部工作与两个指向同一地址的对象

> ID：10923964
> 
> 赞同：2
> 
> 时间：2012-06-07T00:00:41.107
> 
> 标签：c#, ref

看看下面的代码，告诉我为什么在调用函数 UpdateContext 后，变量 connection2 没有与变量 connection1 相同的哈希码。

当我将变量 connection2 设置为 connection1 时，两个变量都有一个指向相同内存地址的指针。但是在使用'new'指令修改指针的函数UpdateContext中通过ref传递变量connection1之后，connection1有一个新的指针地址，但connection2仍然是旧地址。

```
 class Program
   {
      static void Main(string[] args)
      {
         var connectionInitializer = new ConnectionInitializer();

         connectionInitializer.Initialize();

         Console.ReadLine();
      }
   }

   public class Connection
   {

   }

   public class ConnectionInitializer
   {
      public void Initialize()
      {
         var connection1 = new Connection();
         var connection2 = connection1;

         Console.WriteLine("Connection 1 (Before ref): " + connection1.GetHashCode());
         Console.WriteLine("Connection 2 (Before ref): " + connection2.GetHashCode());

         this.UpdateContext(ref connection1);

         Console.WriteLine("Connection 1 (After ref): " + connection1.GetHashCode());
         Console.WriteLine("Connection 2 (After ref): " + connection2.GetHashCode());
      }

      private void UpdateContext(ref Connection connection)
      {
         connection = new Connection();
      }
   } 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T00:03:53.793

您似乎误解了`ref`要达到的目标。基本上，当您将变量作为`ref`参数传递时，它允许被调用者完全修改（原始）变量的值，就好像它是本地的一样。鉴于此，您为什么期望覆盖变量`connection1`的值也会更改分配给的值`connection2`？

换句话说， using`ref`类似于以下代码：

```
var connection1 = new Connection();
var connection2 = connection1;
connection1 = new Connection() 
```

显然在这种情况下，`connection2`应该是不变的。你的也是如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T00:07:15.127

`connection2`仍然引用原始`Connection`对象。 `connection1`已被修改为引用一个新`Connection`对象。 `connection1`并且`connection2`不是字面上相同的参考。 `connection2`是这些引用的副本，`connection1`并且在一段时间内，这两个引用都引用了同一个对象。

除了它们所指的内容之外，这两个引用没有以任何有意义的方式链接，一个只是另一个的副本。更改原件不会影响副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T01:49:42.460

虽然柯克沃尔的回答是正确的，但我认为当他说您误解了`ref`关键字时，他有点忽略了这一点。这种误解很常见，但更多的是对引用类型本身的性质的误解。

Kirk 的解释（“使用 ref 类似于此代码”）实际上反映了我记得的其他 SO 问题，例如“为什么下面的示例不打印`Goodbye`？”

```
string a = "Hello";
string b = a;
a = "Goodbye";
Console.WriteLine(b); 
```

（抱歉，找不到实际问题的链接。）

*如果您还记得引用类型变量存储对引用*类型实例的引用，而值类型变量直接存储值类型的实例，那么跟踪就容易多了。

我发现这比通常的“引用类型通过引用传递；值类型通过值传递”要好得多。实际上，引用类型的变量（absent `ref`or `out`）是通过*value*传递的，但 value 本身就是一个引用。这很令人困惑。更容易混淆：“引用类型变量持有对该类型实例的引用”。

当然，`ref`关键字使这有点复杂，因为 ref 参数包含对变量的引用。这意味着引用类型`ref`参数存储对该类型实例的引用的引用。同样，如果您考虑到引用类型变量包含引用的事实，您可以停止在 ref 参数处保存对变量的引用。这比“引用对...的引用”要容易得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T00:04:49.927

当您初始化连接对象时，它会分配新的内存并因此分配新的哈希码

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T00:10:51.953

如果您说 C++，则 refs 和 outs 实际上只是指针，并且您正在传递所传递的标识符的地址。相比于：

```
void foo(int** p);

int main()
{
  int* one = new int(4);
  int* two = one;

  cout << "one|two before: " << *one << "|" << *two << endl;

  foo(&one);

  cout << "one|two after: " << *one << "|" << *two << endl;

  return 0;
}

void foo(int** p)
{
  *p = new int(5);
} 
```

输出：

```
one|two before: 4|4
one|two after: 5|4 
```

**注意**我本可以使用 c++ 引用传递，但在引擎盖下，这些也只是指针。

# excel - 跳过 Excel 列中的空行

> ID：10923970
> 
> 赞同：4
> 
> 时间：2012-06-07T00:01:19.427
> 
> 标签：excel, vsto

在用户在 Excel 中选择一整列并且我必须对列内的单元格进行操作的情况下，我如何有效地忽略空行。一整列有超过 100 万个单元格！请帮忙！

范围来自

```
var range = Application.ActiveWindow.RangeSelection; 
```

最终我想用

```
 for (int i = 0; i < range.Rows.Count; i++) 
```

其中 Rows.Count 应该是非空行数......也许有一种方法可以找到最后一个单元格中的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T00:43:58.650

几个选项取决于您的范围内是否有空格（使用方法 1），或者更简单地说，如果您想找到最后使用的单元格（使用方法 3）

这些选项以活动表的 A 列为例

**1.特殊细胞**

如果空单元格确实是空的，那么您可以使用`SpecialCells`公式单元格（以 开头`=`）和/或常量单元格

```
 Sub GetNonEmtpy()
    Dim rng1 As Range
    Dim rng2 As Range
    On Error Resume Next
    Set rng1 = Columns("A").SpecialCells(xlConstants)
    Set rng2 = Columns("A").SpecialCells(xlFormulas)
    On Error GoTo 0
    If Not rng1 Is Nothing Then MsgBox "Constants in " & rng1.Address(0, 0)
    If Not rng2 Is Nothing Then MsgBox "formula in " & rng2.Address(0, 0)
    'then work with these ranges
End Sub 
```

**2.最后一个单元格查找**

```
Sub LastCellLookup()
    Dim rng1 As Range
    Set rng1 = Cells(Rows.Count, "A").End(xlUp)
    If rng1.Row <> 1 Then
        MsgBox "last cell is " & rng1.Address(0, 0)
    Else
    'check first cell is not empty
        If Len(rng1.Value) > 0 Then
            MsgBox "last cell is " & rng1.Address(0, 0)
        Else
            MsgBox "row is blank"
        End If
    End If
End Sub 
```

**3\. 寻找**

```
Sub LastCellFind()
    Dim rng1 As Range
    Set rng1 = Columns("A").Find("*", [a1], xlValues, , xlByRows, xlPrevious)
    If Not rng1 Is Nothing Then MsgBox "Last cell is " & rng1.Address(0, 0)
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T03:32:38.697

在我看来，您想知道行数的上限是多少，这样您就不会一直循环到工作簿的底部。

如果是这种情况，那么您可能正在寻找`Worksheet.UsedRange`属性，其中包含曾经使用过的所有单元格的范围（这包括输入值然后删除的单元格）。

例如，

```
Dim MaxUsedRow As Integer
MaxUsedRows = ActiveSheet.UsedRange.Row + ActiveSheet.UsedRange.Rows.Count - 1
MsgBox MaxUsedRows 
```

将显示整个工作簿中最后使用的行的索引。

# asp.net - ASP.NET CodeFileBaseClass 属性与继承自 System.Web.UI.Page

> ID：10923971
> 
> 赞同：5
> 
> 时间：2012-06-07T00:01:44.093
> 
> 标签：asp.net, inheritance, base-class

我刚刚通过继承为我的页面创建了一个基类`System.Web.UI.Page`：

```
public abstract class PageBase : System.Web.UI.Page
{
    ...
} 
```

当我注意到您还可以在 ASP.NET 视图中声明基页时：

```
<%@ Page Language="C#" CodeFileBaseClass="PageBase.cs" CodeFile="page.aspx.cs"
    Inherits="page" %> 
```

有人可以解释这两种方法的优缺点吗？您什么时候会使用其中一个，或者它们都相同？如果同时使用两者会发生什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T23:25:20.390

`CodeFileBaseClass`, `CodeFile`,`Inherits`与继承一起工作，而不是代替继承。

例如，指定`CodeFile="page.aspx.cs"`不`page.aspx.cs`存在将导致：

```
Parser Error Message: The file '/page.aspx.cs' does not exist. 
```

假设`page.aspx.cs`存在，指定`CodeFileBaseClass="PageBase.cs"`不`PageBase.cs`存在将导致：

```
Parser Error Message: Could not load type 'PageBase.cs'. 
```

另一方面，您可以在`PageBase` **不**指定`CodeFileBaseClass`属性的情况下继承。但是，当从基类引用页面上的控件时，这可能会导致可能的意外行为。

引用[Microsoft 的 @Page MSDN 文档](http://msdn.microsoft.com/en-us/library/ydy4x04a.aspx)：

> ***CodeFileBaseClass***
> *指定页面的基类及其关联的代码隐藏类的类型名称。此属性是可选的，但在使用时， **CodeFile**属性也必须存在。当您想要实现共享场景时使用此属性，您可以在基类中定义公共字段（以及可选的关联事件）以引用网页中声明的控件。由于 ASP.NET 代码生成模型，如果您在基类中定义字段而不使用此属性，则在编译时将为网页中声明的控件生成新的成员定义（在单独的部分类存根中），而你想要的场景将不起作用。但是如果你使用**CodeFileBaseClass**属性将基类与页面相关联，并使您的部分类（其名称分配给**Inherits**属性，其源文件由**CodeFile**属性引用）从基类继承，然后基类中的字段将能够在代码生成后引用页面上的控件。*

# ruby-on-rails - 资源与资源轨道 3

> ID：10923972
> 
> 赞同：6
> 
> 时间：2012-06-07T00:01:45.287
> 
> 标签：ruby-on-rails, resources

有人告诉我，如果我只有一个“东西”，比如家（而不是多个家），我应该在 routes.rb 中使用资源：home，而不是资源：home。但是当我查看路线时，POST 函数似乎需要 home#create。为什么是复数？我想将我的控制器命名为 home_controller，类为 HomeController。我必须将它们命名为复数吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T01:07:31.547

[来自http://guides.rubyonrails.org/routing.html#nested-resources](http://guides.rubyonrails.org/routing.html#nested-resources)的修改引用：

> 因为您可能希望对单数路由 (/home) 和复数路由 (/homes/45) 使用相同的控制器，所以单数资源映射到复数控制器。

# python - 学习 Python else 语法错误

> ID：10923973
> 
> 赞同：2
> 
> 时间：2012-06-07T00:01:47.700
> 
> 标签：python, syntax, if-statement, python-2.7

嗨，我正在通过[MIT 6.00 Intro to Computer Science](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-00-introduction-to-computer-science-and-programming-fall-2008/assignments/pset3.pdf)的开放课程练习题来学习 python 。

我正在尝试做练习题 1 第 2 部分创建一个递归函数来计算目标中键的实例。到目前为止我的代码...

```
from string import *
def countSubStringMatchRecursive (target, key,x,s):
   if (find(target,key)==find(target,key,s)) and (find(target,key)==find(target,key,(find(target,key)))):#if first and last
      return (1)
   elif (find(target,key)==find(target,key,s))and (find(target,key)!=find(target,key,(find(target,key)))):#if first but not last
      x=1
      s= find(target,key)
      return (countSubStringMatchRecursive(target,key,s,x)
   elif (find(target,key,s))==-1 and (find(target,key)!=find(target,key,s)):#if last but not first
      return (x+1)
   elif:(find(target,key,s))!=-1 and (find(target,key)!=find(target,key,s)):#if not last and not first
      x=x+1
      s= find(target,key,s)
      return (countSubStringMatchRecursive(target,key,s,x) 
```

我在第 8 行遇到语法错误。我只想知道我在那里做错了什么。不要担心其他错误，我应该能够解决这些错误。我只是坚持这一点。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T00:11:23.813

您在第 8 行和最后一行缺少右括号。实际上，相应的左括号是不必要的，您不妨将这些行重写为：

```
return countSubStringMatchRecursive(target,key,s,x) 
```

此外，正如@rodion 在评论中指出的那样，最后一个`elif`有一个misplaced `:`，删除左括号之前的那个。

谈论括号：在 Python 中，您不必将`if ... elif ... else`语句的条件放在括号内，您应该删除它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T00:11:39.220

您在第 8 行有一个不匹配的括号。在末尾添加另一个关闭括号

`return (countSubStringMatchRecursive(target,key,s,x))`

同样的事情也适用于您的最终退货声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T00:11:30.133

你有一个不匹配的括号。删除行首`(`附近的或`)`在末尾添加一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T00:12:34.020

有几个问题：

1.  您在第 8 行缺少一个结束括号
2.  你的函数的主体需要缩进。（*更新*：已修复）
3.  此外，您的最后一个后面`elif`有一个`:`权利，需要删除。IE，

    ```
    elif: expression: 
    ```

    应该

    ```
    elif expression: 
    ```

4.  您的最后一条语句也缺少结束括号

    ```
    return (countSubStringMatchRecursive(target,key,s,x) 
    ```

    应该

    ```
    return (countSubStringMatchRecursive(target,key,s,x)) 
    ```

最后，@drewk 关于查看[**PEP 8**](http://www.python.org/dev/peps/pep-0008/)的建议是一个很好的建议。我会定期回过头来自己回顾一下。

此外，您有许多不必要`()`的 s .. 它们不会造成任何伤害，但它们不是必需的，并且可能会降低代码的可读性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T00:14:48.077

```
return (countSubStringMatchRecursive(target,key,s,x) 
```

你错过了一个结束`)`。但是你也不需要开场白。语句的语法`return`是`return <expr>`，因此任何有效表达式都可以直接跟随在`return`. 任何有效的表达式仍然是有效的表达式，如果你用括号括起来，它的含义完全相同，但主要是在不需要时增加噪音。

# java - AndEngine - 获取精灵的中心坐标

> ID：10923975
> 
> 赞同：1
> 
> 时间：2012-06-07T00:02:00.517
> 
> 标签：java, android, opengl-es-2.0, andengine

我的游戏中有一个精灵，我想得到它的中心坐标。虽然精灵可以旋转，所以我不能只得到它的 x/y 坐标然后添加精灵宽度/高度的一半，因为 getWidth 和 getHeight 方法返回原始未旋转精灵的尺寸。

我尝试了 getSceneCenterCoordinates() 但由于某种原因，即使它们彼此相距不远，它也会为所有精灵返回相同的坐标。

这是一个描述我想要的图形，红点是我想要的坐标，右侧图上的宽度/高度标签代表我想要 getWidth/Height 方法返回的内容（但它们没有）： ![在此处输入图像描述](../Images/7c0e1cb35eba8e1b37a7eb214afbaed1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T13:44:03.650

您可以使用坐标转换器

```
final float[] spriteCoordinates = sprite.convertLocalToSceneCoordinates(x,y);
        final float canonX = spriteCoordinates[VERTEX_INDEX_X];
        final float canonY = spriteCoordinates[VERTEX_INDEX_Y];
Sprite sprite_in_fixedpoint_of_the_first_sprite=new Sprite(canonX,canonY,textureregion) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T00:05:16.310

获取所有角的最小值和最大值（对于 - x 和 y 分量）。然后取最大值和最小值的平均值得到中间值：

```
middleX = (maxX + minX) / 2 
```

对 y 分量重复相同的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T13:04:14.643

考虑这样的事情

```
 Rectangle test = new Rectangle(100, 100, 50, 100, vboManager);
    mainScene.attachChild(test);

    System.out.println("Before RotCtrX = " + test.getRotationCenterX());
    System.out.println("Before RotCtrY = " + test.getRotationCenterY());

    test.setRotation(45);
    System.out.println("After RotCtrX = " + test.getRotationCenterX());
    System.out.println("After RotCtrY = " + test.getRotationCenterY()); 
```

结果是

```
System.out(4526): Before RotCtrX = 25.0
System.out(4526): Before RotCtrY = 50.0
System.out(4526): After RotCtrX = 25.0
System.out(4526): After RotCtrY = 50.0 
```

AndEngine 实体围绕中心旋转（除非您更改 RotationCenter 值），因此应用 setRotate() 不会影响“中心”点位置

那些“中心”点是相对于实体的，所以如果你需要实际的屏幕坐标，你需要将它们添加到 getX() 和 getY() 值——顺便说一句，这也不会仅仅基于应用 setRotate 而改变()

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T21:38:00.110

我想出了如何正确使用getSceneCenterCoordinates()，也就是给它一个float[]。这是我的解决方案：

```
float[] objCenterPos = new float[2];
obj.sprite.getSceneCenterCoordinates(objCenterPos);
Log.d(this.toString(),  "Coordinates: ("+objCenterPos[0]+","+objCenterPos[1]+")"); 
```

# php - 在php中发送变量文件名需要来自html

> ID：10923978
> 
> 赞同：-1
> 
> 时间：2012-06-07T00:02:37.563
> 
> 标签：php, javascript, html

我有这个从 html 调用 php 文件。

```
 <div id="readings">
        <?php require("readenglish.php"); ?>
        <?php require("readfrench.php"); ?>
        <?php require("readspanish.php"); ?>

    </div> 
```

从 php 文件中获取日期很容易，但我必须发送客户端日期。我想在文件名中添加一个带有客户端日期的字符串。

```
 <div id="readings" style="position: relative; top: -380px; width:100%; height:100%; overflow:hidden; font: 0.9em arial, sans-serif;">
        <?php require("readenglish.php?date="+datestring); ?>
        <?php require("readfrench.php?date="+datestring); ?>
        <?php require("readspanish.php?date="+datestring); ?>

    </div> 
```

这可以做到吗？我必须用javascript计算日期。如果我不必去 ajax 就好了。这将需要完全改变代码结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:28:43.343

**1/**你不“从 HTML 调用 PHP”，你将 PHP 内容添加到你的文件中，当这个 PHP 被解析时，服务器会将 HTML 发送到客户端：HTML 是 PHP 进程的结果

**2/**获取客户端日期意味着如果您的客户端将其日期更改为 1990 年，您将相信您收到了 90 年代的请求，而您的服务器的日期与它在其日志中写入的其他日期一致

**3/**如果您真的需要客户端的日期，您唯一的选择是使用 Ajax 请求、URL 中的 GET 参数或带有 POST（或 GET）数据的 HTML 表单；在所有这些情况下，您都需要使用 Javascript 的 Date 对象填充数据

**解决方案 A：**在页面开头有一个 JS，如果没有给出日期，它会重新加载。就像是：

```
<?php if(empty($_REQUEST['date'])) { ?>
  <script type='text/javascript'>
    var d=new Date();
    window.location.href+='?date='+d.toISOString();
  </script>
  <?php die('Reloading with parameters...'); ?>
<?php } ?> 
```

如果您喜欢这种方式，您可以调整此解决方案以填写表单并使用 JS 动态提交，但更多的是键入...

**解决方案 B：**使用 Ajax 检索并插入带有日期参数的 readxxx.php，但您不想这样做（尽管我不明白为什么它“需要完全更改代码结构”）

**解决方案C（我最喜欢的）：**如果您使用的是PHP 5.1+，您可以使用`$_SERVER['REQUEST_TIME']`，它会为您提供客户端请求开始的服务器时间（即服务器接收到的时间）

解决方案 D：使用由 JS 构建的 (i) 帧，将日期作为 src 属性中的参数（*这*将需要完全改变代码结构^^）

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T19:03:32.177

答案很简单：饼干！

# facebook - 网站的 Facebook 喜欢不会在新闻提要中显示缩略图或元数据

> ID：10923980
> 
> 赞同：0
> 
> 时间：2012-06-07T00:02:49.500
> 
> 标签：facebook, wordpress, facebook-like, metadata, facebook-opengraph

所以我会是第一个承认我对整个 facebook 按钮之类的东西不是很好的人。

在我的网站[http://vegasonthemic.com](http://vegasonthemic.com)上，我为自动生成的每个帖子（自定义帖子类型“组合”）设置了 Facebook“点赞”按钮。当您单击此“点赞”按钮时，它会在您的 Facebook 个人资料上显示您喜欢带有缩略图和摘录文本的内容。但是，当您查看新闻提要时，它只显示“鲍勃喜欢这位艺术家”，并且没有显示任何元数据。这个功能有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:51:58.940

你可以在这里看到你的问题：http: [//developers.facebook.com/tools/debug/og/object ?q=http%3A%2F%2Fvegasonthemic.com%2F](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fvegasonthemic.com%2F)

修复 linter 显示的问题。然后你的网站就可以正常工作了。

# android - 填充微调器数据

> ID：10923982
> 
> 赞同：1
> 
> 时间：2012-06-07T00:03:00.607
> 
> 标签：android, database, cursor, spinner

我的微调器有问题吗？？我的应用程序没有崩溃，但出现了无法打开的 toast DB。所以我的微调器人口一定有问题..有人可以帮忙找出错误吗？谢谢！

```
// Open the DB, query all subject codes and refresh the listview
// when app resumes
   @Override
   protected void onResume() {
    super.onResume();

   ArrayList<String> menu = new ArrayList<String>();
    Spinner SpinMenu = (Spinner)this.findViewById(R.id.spinner1);
    SpinMenu.setAdapter(new ArrayAdapter<String>(this, 
        android.R.layout.simple_spinner_dropdown_item , menu));

    // Open/create the DB
    try {
        dbopener.createDatabase(); // Create DB if necessary
      dbopener.openDatabase(); // Open the DB

      Cursor menus = dbopener.getFood();
      while (menus.moveToNext()) {
         menu.add(menus.getString(0)); // Get the current subj
                                                  // code, add to list
      }
      menus.close();

      // Update the listview
      ArrayAdapter<String> ad = 
            (ArrayAdapter<String>)SpinMenu.getAdapter();
      ad.notifyDataSetChanged();

     SpinMenu.setOnItemSelectedListener(this);
    } catch (Exception e) {
        Toast.makeText(this, "Could not open DB", 
            Toast.LENGTH_LONG).show();
    }
} 
```

# php - 不显示数据库中的第一条记录？

> ID：10923983
> 
> 赞同：0
> 
> 时间：2012-06-07T00:03:01.157
> 
> 标签：php, mysql, while-loop

尝试在客户网站上工作，我遇到了一些困难。当我在数据库中没有条目时，它会捕获`if(!row)`并显示消息。这部分工作正常。我的问题是当我在数据库中有条目时，它们不显示。我知道 while 循环有效，因为我有几个页面运行类似的循环。事实上，这个循环是从另一个页面复制的，该页面在公共页面上显示该条目的信息。

我知道这个网站主要是用来提问的，但我想我只需要一双新的眼睛来看看我的代码（我已经编码了超过 12 个小时，我有点累了）。下面的很多代码来自以前的网页设计师，如果由我决定，我会重写整个网站，因为代码“过时”，但客户只是希望我改进它。任何帮助将不胜感激。

```
$row = mysql_fetch_array($result);

if (!$row) {
    echo '<tr><td bgcolor="ffffff" colspan="3"><font face="arial,helvetica" size="2" color="000000">There are no entries at this time, check back later.</font></td></tr>';
} else {
    while ($row = mysql_fetch_array($result)) {

        echo '<tr>
                    <td bgcolor="ffffff"><font face="arial,helvetica" size="2" color="000000">$date - $row["theme"]</font></td>
                    <td bgcolor="ffffff" align="center">
                    <form action="dsp_modifyposition.php">
                        <input type="hidden" name="specialID" value="$row["specialID"]">
                        <input type="hidden" name="theme" value="$row["theme"]">
                        <input type="submit" value="  Modify  ">
                    </form>
                    </td>
                    <td bgcolor="ffffff" align="center">
                    <form action="act_deleteposition.php" onsubmit="return confirm(\'Are you sure you want to delete this event: $date \')">
                        <input type="hidden" name="specialID" value="$row["specialID"]">
                        <input type="hidden" name="theme" value="$row["theme"]">
                        <input type="submit" value="  Delete  ">
                    </form>
                    </td>
                </tr>';
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T00:16:52.277

第一次调用 mysql_fetch_array 时，mysql 结果指针移动到下一行。因为没有对这一行做任何事情，所以第一行不会被显示。您想要的是`mysql_num_rows`检查结果集中有多少行。作为旁注，`mysql_fetch_assoc`如果您不使用数字索引，我建议您使用。

```
if (!mysql_num_rows($result)) {
    echo '...';
} else {
    while ($row = mysql_fetch_assoc($result)) {
        echo '...';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T00:13:54.790

将您的第一行更改为：

```
$cnt = mysql_num_rows($result)

if (!$cnt) {
    echo '<tr><td bgcolor="ffffff" colspan="3"><font face="arial,helvetica" size="2" color="000000">There are no entries at this time, check back later.</font></td></tr>';
} else {
.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T00:12:45.103

您的 if() 语句似乎有缺陷。该声明：

```
$row = mysql_fetch_array($result); 
```

将获取一行并将 $result 中的指针移动到下一行，因此您的 while 将从第二行开始。如果您的查询只返回一行，那么您实际上是在调用 mysql_fetch_array() 两次并跳过返回的数据。

您应该找到其他方法来检查是否有结果（可能使用 mysql_num_rows()）。

# c# - 验证最大文本输入大小 MVC

> ID：10923984
> 
> 赞同：0
> 
> 时间：2012-06-07T00:03:03.103
> 
> 标签：c#, asp.net-mvc, validation

我在这里在逻辑上苦苦挣扎-请给我一些想法！:)

基本上我有 ac#MVC3 应用程序，它接受大量文本（100 多个文本区域），修改它，然后输出它。

我想检查组合文本框的长度，如果它们超过 X 长度，则流程验证失败。

我能想到的唯一解决方案是将所有文本组合到一个字符串服务器端并获取长度。我希望我的竞争对手在我上线时完全滥用系统并试图使我的服务器超载，所以如果可能的话，我也想尝试在客户端进行验证。

任何人都可以想到一种有效的方法来做到这一点（客户端或服务器端，如果你有一个好主意）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T00:08:38.683

您可以使用 maxlength css 属性，也可以使用 [StringLength] 数据注释来装饰模型以检查字符串的长度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T00:41:41.450

[使用与 Daron Dimitrov 的答案类似的技术](https://stackoverflow.com/questions/5816313/mvc3-unobtrusive-validation-group-of-inputs/5817958)构建自定义验证器。这将在客户端和服务器端进行检查，您可以使用 ViewModel 来装饰属性以应用于所有输入。

# security - 使用盐和散列的正确方法

> ID：10923985
> 
> 赞同：0
> 
> 时间：2012-06-07T00:03:17.227
> 
> 标签：security, hash, salt, sha

在与其他几个人的讨论中，我读到了以下论点

*   sha512(salt + username + password) 不好，
*   sha512(username + password) 更糟
*   sha512(password) 简直是白痴。

虽然我部分同意，但真正最好的安全性是什么？有什么比使用用户唯一盐和慢速散列方法（如 SHA512）更安全的方法吗？真正的方法是什么？争论吧！

*如果您觉得标题不好，请编辑标题。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T00:13:22.850

在讨论最近的 LinkedIn 泄漏时，有人提出了这个[关于 bcrypt 的链接](http://codahale.com/how-to-safely-store-a-password/)。我想我同意......我们应该使用根据一个因素以指数方式增加计算时间的函数。这是我们击败试图使用集群或 GPU 进行哈希计算的人的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T00:15:26.770

我的理解是，重复散列（为了计算成本）和一个好的随机盐应该可以击败所有坚定的加密攻击者。

在数据库中和通过网络对密码进行哈希处理，可以避免窥探者或攻击者可以恢复（并在其他地方使用）明文。

基本上，这或多或少是 Wordpress 身份验证使用的方案：

```
var SALT = 64 random characters;
var NUM_HASHES = about 1000;    // can be randomized
var hashedResult = inputPassword;
for (int i = 0; i < NUM_HASHES; i++) {
  var dataToHash = SALT + hashedResult;
  hashedResult = secureHash( dataToHash);
}
//... can now store or send. 
```

这种使用随机盐和循环散列，可以击败任何彩虹表或单级“散列冲突”、“散列弱点”攻击。只有暴力破解完整的键空间，每个键通过 1000 次哈希函数迭代，才被认为可以打败它:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T19:35:47.003

1.  为每个密码生成随机盐。
2.  避免使用 MD5，甚至 SHA-1。
3.  使用慢散列算法；SHA-256 目前似乎是一个不错的选择。
4.  密码存储是拥有自己的（整体）算法有一些好处的少数情况之一。考虑一个有彩虹表的攻击者；如果您的密码存储算法与用于生成彩虹表的算法不同，足以更改生成的值，那么该彩虹表就没用了。攻击者需要知道你的算法，然后生成一个新表。如果选择慢速散列算法，生成新表的成本非常高。

“整体”算法是指如何将明文密码转换为存储值的完整定义。例如`SHA-256("mypassword" + "[[" + 40-char-random-alphanum-salt + "]]")`。如果您将其更改为使用尖括号而不是方括号，则您已经更改了利用您存储的密码所需的彩虹表。请注意，我并不是提倡编写您自己的哈希算法。您仍然应该选择加密安全的哈希算法。

见MD5作者的[这篇文章。](http://www.zdnet.com/blog/security/md5-password-scrambler-no-longer-safe/12317)他提出了我在上面重复的两个要点：1）如果你使用快速散列算法，你就错过了重点，2）重用整体算法允许重用彩虹表。

# css - VS 错误：仅在 ECMAScript 3 兼容模式下支持八进制转义序列

> ID：10923987
> 
> 赞同：3
> 
> 时间：2012-06-07T00:03:23.480
> 
> 标签：css, visual-studio-2010, twitter-bootstrap, less

我有 twitter bootstrap 设置来构建一个新项目，但我从 VS2010 收到以下错误。

**致命错误，无法继续：仅在 ECMAScript 3 兼容模式下支持八进制转义序列。**

这似乎与引导程序中的以下 CSS/Less 条目（type.less）有关...

```
blockquote small:before {
  content: '\2014 \00A0';
}
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T04:07:51.443

只是想说我也有这个错误，对我来说问题最终出在 Chirpy 身上。我试图用它制作一个合并的 css 文件，但我使用的是 .min 文件，并且我没有在我的文件节点中使用 chripy Minify="false" 参数。添加了该参数并立即修复了它

# javascript - 在 jQuery Mobile 1.1 中进行繁重处理之前显示加载微调器？

> ID：10923992
> 
> 赞同：3
> 
> 时间：2012-06-07T00:04:03.580
> 
> 标签：javascript, jquery, jquery-mobile

我要疯了，试图让一个微调器出现。我已将繁重的处理功能绑定到一个按钮，因此：

```
$(document).delegate("#clearread", "tap", onClearRead); 
```

所以点击它就会这样调用：

```
var onClearRead = function() {

setTimeout($.mobile.showPageLoadingMsg, 5);  

// Civilised cleaning of saved status
var jStorIndex = $.jStorage.index();
for (var i = 0; i < jStorIndex.length; i++) {
    if( jStorIndex[i] != "version" ) {
        $.jStorage.deleteKey(jStorIndex[i]);
    }
}   

// Load articles afresh
loadArticles();

$.mobile.changePage("#choosearticle");

} //onClearRead 
```

我发现在清除/加载文章（大约 10 秒）期间**不会出现**微调器，而只是在加载 #choosearticle 页面时出现的短暂时间（0.5 秒）。 **我究竟做错了什么？**

我让微调器在应用程序的其他地方工作。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T05:43:05.863

试试这个：

```
$(document).delegate("#clearread", "tap", onClearRead);

var onClearRead = function() {
$.mobile.showPageLoadingMsg();
setTimeout(function(){  
        //Your heavy processing
        $.mobile.changePage("#choosearticle");
    }, 5);
} //onClearRead 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-28T16:01:51.273

[jQuery.show（[持续时间] [，完成]）](http://api.jquery.com/show/#show-duration-complete)

将繁重的处理放在“完整”函数槽中，确保对象（调用了 show）在显示发生之前可见。

相关的答案

[https://stackoverflow.com/a/25207120/999943](https://stackoverflow.com/a/25207120/999943)

[使用微调器加载 jQuery 整个 HTML 页面](https://stackoverflow.com/questions/10742665/jquery-whole-html-page-load-with-spinner)

使用基于 CSS 的微调器的示例

CSS

```
@-moz-keyframes spin {
  0% {
    -moz-transform: rotate(0deg); }

  100% {
    -moz-transform: rotate(359deg); } }

@-webkit-keyframes spin {
  0% {
    -webkit-transform: rotate(0deg); }

  100% {
    -webkit-transform: rotate(359deg); } }

@-o-keyframes spin {
  0% {
    -o-transform: rotate(0deg); }

  100% {
    -o-transform: rotate(359deg); } }

@-ms-keyframes spin {
  0% {
    -ms-transform: rotate(0deg); }

  100% {
    -ms-transform: rotate(359deg); } }

@keyframes spin {
  0% {
    transform: rotate(0deg); }

  100% {
    transform: rotate(359deg); } }

.icon-spin {
  display: inline-block;
  -moz-animation: spin 2s infinite linear;
  -o-animation: spin 2s infinite linear;
  -webkit-animation: spin 2s infinite linear;
  animation: spin 2s infinite linear; } 
```

Html 使用字体真棒

```
<div id="spinner" data-bind="visible: isSpinning" style="padding: 10px; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #cccccc; z-index: 1; filter: alpha(opacity=30);">

    <i class="fa fa-spinner fa-spin fa-5x"></i>
</div> 
```

Javascript

```
$('#spinner').show(100, function() {
  // Once the spinner is visible then run the heavy function.
  heavyProcessingFunction();
}); 
```