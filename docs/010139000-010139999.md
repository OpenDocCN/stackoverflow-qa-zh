# StackOverflow 问答 10139000-10139999

# java - Java中获取数字所具有的因子数量的最快方法是什么

> ID：10139001
> 
> 赞同：11
> 
> 时间：2012-04-13T10:14:32.450
> 
> 标签：java, algorithm, math

我正在尝试用 Java 编写一个函数，该函数将返回特定数字所具有的因子数。

应考虑以下限制。

1.  应该用 BigInteger 来完成
2.  不允许存储以前生成的数字，因此需要更多的处理和更少的内存。（你不能像这样使用“阿特金筛子[”](https://stackoverflow.com/questions/110344/algorithm-to-calculate-the-number-of-divisors-of-a-given-number)）
3.  负数可以忽略。

这是我到目前为止所拥有的，但它非常慢。

```
public static int getNumberOfFactors(BigInteger number) {
    // If the number is 1
    int numberOfFactors = 1;

    if (number.compareTo(BigInteger.ONE) <= 0)  {
        return numberOfFactors;
    }

    BigInteger boundry = number.divide(new BigInteger("2"));
    BigInteger counter = new BigInteger("2");

    while (counter.compareTo(boundry) <= 0) {
        if (number.mod(counter).compareTo(BigInteger.ZERO) == 0) {
            numberOfFactors++;
        }

        counter = counter.add(BigInteger.ONE);
    }

    // For the number it self
    numberOfFactors++;

    return numberOfFactors;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-13T11:10:34.573

我可以提出更快的解决方案，尽管我觉得它还不够快。您的解决方案运行`O(n)`，我的将在`O(sqrt(n))`.

我将使用这样一个事实，如果 n = x [i1] ^(p1) * x [i2] ^(p2) * x [i3] ^(p3) * ... x [ik] ^(pk)是`n`（即 x [i [j]]都是不同的素数）的素数分解，那么 n 有 (p1 + 1) * (p2 + 1) * ... * (pk + 1) 个因子。

现在解决方案如下：

```
BigInteger x = new BigInteger("2");
long totalFactors = 1;
while (x.multiply(x).compareTo(number) <= 0) {
    int power = 0;
    while (number.mod(x).equals(BigInteger.ZERO)) {
        power++;
        number = number.divide(x);
    }
    totalFactors *= (power + 1);
    x = x.add(BigInteger.ONE);
}
if (!number.equals(BigInteger.ONE)) {
    totalFactors *= 2;
}
System.out.println("The total number of factors is: " + totalFactors); 
```

如果您分别考虑 2 的情况，然后将步骤`x`设为等于 2 而不是 1（仅迭代奇数），则可以进一步优化。

另请注意，在我修改的代码中`number`，您可能会发现它更适合保留`number`并具有另一个等于`number`迭代的变量。

我想对于不大于 2 ^(64)的数字，此代码将运行得相当快。

**编辑**为了完整性，我将在答案中添加合理快速的措施。从下面的评论中可以看出，我对Betlista 提出的测试用例 100000007 ^(2的建议算法的性能进行了几次测量：)

*   如果算法按原样使用，我的机器上花费的时间是 57 秒。
*   如果我只考虑奇数时间减少到 28 秒
*   如果我将检查的结束条件更改为与我使用二进制搜索找到`while`的平方根进行比较，则`number`所需时间减少到 22 秒。
*   最后，当我尝试切换所有`BigInteger`s 时`long`，时间减少到 2 秒。`number`由于所提出的算法在大于范围的情况下运行速度不够快，`long`因此将实现切换为`long`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:58:24.443

一些改进：

1.  您只需要检查到 sqrt(n)，而不是 n/2。这使得你的算法 O(sqrt(n)) 而不是 O(n)。
2.  您只需要在检查 2 后检查奇数，这应该会加倍速度。
3.  虽然你不能使用以前的数字，但你可以构造一个已知素数和少量存储的筛子：2、3 是素数，所以只需要检查（例如）11、13、17、19、23 而不是 12， 14,15,16,18。因此，您可以存储 3 的增量模式：[+2,+4]，每 6 次重复：

```
var deltas = [2,4];
var period = 6;
var val = 3;
var i=0;
while(val<sqrt(n)) {
    var idx = i%deltas.length; // i modulo num deltas
    val += deltas[idx];
    count += isFactor(n,val);
    // if reached end of deltas, add period
    if(idx == deltas.length-1) {
        val += period - deltas[idx];
    }
    ++i;
} 
```

一旦你得到这个结果，如果它们是因子，你显然必须添加 2 和/或 3。

当我在学校无聊的时候，我把上面的模式弄出来了。您可以计算出任何素数列表的模式，但有一个收益递减规律；您添加的每个素数都会增加周期，并大大增加增量列表的长度。因此，对于一长串已知素数，您会得到一个非常长的增量列表，并且速度只有很小的提高。但是，请测试加速是否值得。

由于它只是剔除已知分数的一部分（使用所示的 2 值增量的 2/3rds），这仍然是 O(sqrt(n))。

将筛子与 sqrt 界限相结合，您应该得到 4/(3*sqrt(n)) 的加速。

[编辑：将句点添加到最后一个值，而不是句点-lastdelta。谢谢@Betlista]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-05T13:05:35.390

Boris Strandjev 提出的最快解决方案存在一些问题，即在 Java 中生成大量输出。它是在 Java 中查找非常大整数的除数的最快算法。

这是我将成功运行的代码：

```
import java.math.BigInteger;
import java.util.Scanner;

class ProductDivisors {

    public static BigInteger modulo=new BigInteger("1000000007");
    public static BigInteger solve=new BigInteger("1");
    public static BigInteger two=new BigInteger("2");
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        Scanner sc=new Scanner(System.in);
        int N=sc.nextInt();
        BigInteger prod=new BigInteger("1");
        while(N-->0){
            prod=sc.nextBigInteger();
            solve=solve.multiply(prod);
        }
        BigInteger x = new BigInteger("2");
        BigInteger total = new BigInteger("0");
        BigInteger totalFactors =new BigInteger("1");
        while (x.multiply(x).compareTo(solve) <= 0) {
            int power = 0;
            while (solve.mod(x).equals(BigInteger.ZERO)) {
                power++;
                solve = solve.divide(x);
            }
            total = new BigInteger(""+(power + 1));
            totalFactors=totalFactors.multiply(total);
            x = x.add(BigInteger.ONE);
        }
        if (!(solve.equals(BigInteger.ONE))) {
            totalFactors =totalFactors.multiply(two);
        }
        totalFactors=totalFactors.mod(modulo);
        System.out.println(totalFactors);
    }

} 
```

此代码通常将数字数组作为输入，从而相乘将产生大量数字。并且，计算除数的主要代码（包括这里的除数）并给出输出。

我希望这是一种有效的方法，并在需要时提出任何错误或补充。

# mysql - MySQL 如何对结果集进行部分排序？

> ID：10139004
> 
> 赞同：0
> 
> 时间：2012-04-13T10:14:40.847
> 
> 标签：mysql, sql-order-by

如果我有一组结果，例如在可视化时看起来像 [ *status* | *日期*]：

```
[1|2012/01/06],[2|2011/04/23],[3|2012/02/12],[1|2012/11/26],[2|2012/10/13],[3|2010/03/01],[3|2010/06/27] 
```

我将如何对结果进行排序，以便**状态为 1 的行优先**于状态 2 和 3，然后按日期对这些“拆分”结果进行排序？

如果我通过 ASC 订购状态，那么我最终会得到：

```
[1|2012/01/06],[1|2012/11/26],[2|2011/04/23],[2|2012/10/13],[3|2012/02/12],[3|2010/03/01],[3|2010/06/27] 
```

这将状态 2 和 3 分开。我想要一个如下所示的结果集：

```
[1|2012/01/06],[1|2012/11/26],[3|2012/02/12],[3|2010/03/01],[2|2011/04/23],[3|2010/06/27],[2|2012/10/13] 
```

tl;dr 我想按状态 1 或状态 > 1 排序我的结果。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:22:07.910

您可以尝试以下方法 -

```
ORDER BY IF(status = 1, 1, 2) ASC, date ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:21:14.600

我会为此做 2 次查询，因为您要问 2 件事。含义：您要求 status=1 并且您要求除 1 订购之外的所有内容。

这些是 2 个独立的问题，那么为什么将它们保留在一个查询中呢？它在您的查询中创建了更多的复杂性。MySQL 在简单查询方面非常快。这也允许清晰的模型功能，例如：

```
 $Model->getByStatus(1)
 $Model->getByStatus(array(2,3)) 
```

甚至您还可以为它们创建单独的函数，例如：

```
 $Model->getPriorityTickets()
 $Model->getNonPriorityTickets() 
```

这创建了一个更具可读性的选项，它实际上描述了业务，并且不需要控制器了解有关状态 ID 的任何信息。例如，您可以在 getPriorityTickets 中使用另一种方式来定义哪些记录具有优先级，例如：id=1 OR latest_modified > 2 days ago

# r - 如何使用 ggplot2 从 qcc 包中重现 pareto.chart 图？

> ID：10139007
> 
> 赞同：7
> 
> 时间：2012-04-13T10:15:09.330
> 
> 标签：r, plot, ggplot2, qcc

我一直在使用 R 中 qcc 包中的 pareto.chart 函数，我非常喜欢它。现在我想移植我所有的图形来使用 ggplot2 包。然而，尽管有优秀的文档，但我对 ggplot2 的了解非常有限，所以我无法弄清楚所有细节。基本上我想要一个看起来像这样的情节

![qcc包中的pareto.chart函数制作的一个简单的帕累托图](../Images/1d5f5de5c0d5f37ce92db53cd137c804.png)

但用 ggplot2 包代替。下面列出了生成绘图的代码：

```
 library(qcc)
    defect <- c(80, 27, 66, 94, 33)
    names(defect) <- c("price code", "schedule date", "supplier code", "contact num.", "part num.")
    pareto.chart(defect, ylab = "Error frequency", col=heat.colors(length(defect))) 
```

有人对此有解决方案吗？帕累托图之前已在[此处](https://stackoverflow.com/questions/1735540/creating-a-pareto-chart-with-ggplot2-and-r)讨论过，但结果看起来与我想要的并不相似。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T10:51:55.693

干得好：

```
library(ggplot2)

counts  <- c(80, 27, 66, 94, 33)
defects <- c("price code", "schedule date", "supplier code", "contact num.", "part num.")

dat <- data.frame(
  count = counts,
  defect = defects,
  stringsAsFactors=FALSE
)

dat <- dat[order(dat$count, decreasing=TRUE), ]
dat$defect <- factor(dat$defect, levels=dat$defect)
dat$cum <- cumsum(dat$count)
dat

ggplot(dat, aes(x=defect)) +
  geom_bar(aes(y=count), fill="blue", stat="identity") +
  geom_point(aes(y=cum)) +
  geom_path(aes(y=cum, group=1)) 
```

![在此处输入图像描述](../Images/022b740bd50a6dc1a1dd1a608cda7d18.png)

# c++ - 分段错误和吸气剂问题

> ID：10139008
> 
> 赞同：-1
> 
> 时间：2012-04-13T10:15:09.177
> 
> 标签：c++, segmentation-fault, getter

我有一个跟踪人员的任务，现在我需要进行 crud 操作。当我尝试访问动态数组时，人员 id 的 getter 工作，但人员电话的 getter 返回“分段错误”，而人员姓名的 getter 什么也没显示。

```
//the main.cpp test that gives the following error
Controller ctrl(repp,repa,valp,vala);
ctrl.addPerson(1,"Name","0744000000","Adress");     
ctrl.show();

//controller show method, repp - instance of repository in controler
void Controller::show()
{
    repp->show();
}

//repository show method, which doesn't work
void PersonInMemoryRepository::show()
{
    for(int i=0; i < pers.getSize(); i++)
        cout<<pers.get(i)->getName()<<endl;
}

//getById method in repository
const Person* PersonInMemoryRepository::getById(int id)
{
for (int i = 0; i < pers.getSize(); i++) 
    {
    if (pers.get(i)->getId() == id) {
        return pers.get(i);
                                    }
}
return NULL;
}

 //the Person class
 class Person 
 {
 public:
Person(int i, string n, string p, string a);
const string& getName() const {
    return name;
}
const string& getPhone() const {
    return phone;
}
const string& getAdress() const {
    return adress;
    }
int getId() const {
    return id;
}
    ~Person();
 private:
    int id;
string name;
string phone;
string adress;
};
//pers.get(i)
template<typename Element>
Element DynamicArray<Element>::get(int poz) {
return elems[poz];
} 
```

提前致谢。

更新：当它上线时 cout<getName(); . pers.get(i) 效果很好，它是 Person* 类型向量，当我在调试器中取消引用它时，它具有正确的值，但在 ->getName() 处显示“无效的重复次数 0”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-15T09:05:51.110

虽然您没有显示足够的代码来完全理解问题，但假设 pers 是标准库中某种形式的容器，但大多数 size 函数都会给出从 1 开始计数的元素数量的大小结果，而容器的元素访问开始于零。这意味着要正确访问所有元素，您需要从容器的大小中减去 1。

如果这个假设是正确的，那么 for 循环的正确代码是：

```
for (int i = 0; i < pers.getSize()-1; i++) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:25:54.093

您显示的代码不足以找出导致段的原因。过错。我的猜测是你过度索引到`elems`容器中（也许`pers.getSize()`返回错误的值？）

# mysql - 如何从表中获取 2 个字段中的一些字段

> ID：10139009
> 
> 赞同：0
> 
> 时间：2012-04-13T10:15:15.853
> 
> 标签：mysql, database, sum

我有 2 张桌子。

## 表格1：-

```
id     name

1       k
2       a 
```

## 表2：-

```
id    sub1    sub2

1      10      20
2      30      40 
```

我希望输出为 k -> 30 和 a -> 70。

我触发了以下查询....

```
SELECT tbl_1.`name` , SUM(tbl_2.sub1 + tbl_2.sub2) as total 
from tbl_1, tbl_2 WHERE tbl_1.id = tbl_2.id; 
```

**输出 ：-**

k -> 100

但我想喜欢

k->30 a->70

如果有人有任何想法，请帮助....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T10:18:02.107

删除`SUM()`，然后使用`tbl_2.sub1 + tbl_2.sub2`。

`SUM()`通过对所有行的值求和，“垂直”求和。

`+`在这种情况下，通过对列的值求和来“水平”求和。

你这样做的方式是水平和垂直的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T10:18:41.433

试试这个

```
SELECT t1.name, (t2.sub1+t2.sub2) AS total
FROM table1 t1 INNER JOIN table2 t2
    ON t1.id = t2.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T10:22:10.547

```
select name, (sub1+sub2) as total from tbl_1, tbl_2 where tbl_1.id = tbl_2.id; 
```

`SUM`是列级运算符，我们需要尝试执行行级操作。一个简单的`+`应该理想地解决问题。

# asp.net-mvc - EF 属性无法转换 'System.Collections.Generic.List '到'int？

> ID：10139010
> 
> 赞同：-1
> 
> 时间：2012-04-13T10:15:17.210
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework

在我的 mvc3 应用程序中，我在 index() 上收到此错误，其中属性是类型的`Nullable<int>`，我无法将它们更改`List<SelectListItem>` 为我的方法返回类型，因为属性是由 EF 自动生成的，在这种情况下该怎么办请帮忙？

```
INDEX.CSHTML
@model Mapping.Models.SecurityIdentifierMappingViewModel

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@*Partial control for all controls*@

<div>
@Html.Partial("_ControlsPartial",Model.MappingControls)
</div>

<div>
@Html.Partial("_WebGridPartial",Model.MappingWebGridList)
</div>
public ActionResult Index()
    {

        var mappingobj = new SecurityIdentifierMappingViewModel();

        mappingobj.PricingSecurityID = objRepository.GetPricingSecurityID();
        mappingobj.CUSIP = objRepository.GetCUSIP();

        var viewModel = new SecurityIdentifierMappingViewModel
        {
            MappingControls = mappingobj.MappingControls,
            MappingWebGridList = dbContext.SecurityIdentifierMappings.ToList()
        };

        return View(viewModel);

    }

controlpartial.html
@model Mapping.Models.SecurityIdentifierMapping
@using (Html.BeginForm("Mapping", "Home"))
{
    @Html.DropDownList("SecurityID", Model.PricingSecurityID, "-- Select SecurityID --")
    <br />    
    @Html.DropDownList("CUSIPID", Model.PricingSecurityID, "-- Select CUSIPID --")
    <br />
    <button type="submit">Map</button>
}

webgridpartial.cshtml
     @model IEnumerable<Mapping.Models.SecurityIdentifierMappingViewModel>

@{
    ViewBag.Title = "Mapping";
    WebGrid grid = null;
    if (Model.Count() > 0 ){
    grid = new WebGrid(source: Model,
                            defaultSort: "Id",
                            canPage: true,
                            canSort: true,
                            rowsPerPage:20);
    }
}

<h2>Mapping</h2>

@if (grid != null)
{
@grid.GetHtml(
                tableStyle: "grid",
                headerStyle: "head",
                alternatingRowStyle: "alt",
                columns: grid.Columns(
                                            grid.Column("", header: null, format: @<text>@Html.ActionLink("Edit", "Edit", new { id = (int)item.id })  @Html.ActionLink("Delete", "Delete", new { id = (int)item.id })</text>),
                                            grid.Column("PricingSecurityID"),
                                            grid.Column("CUSIP")
                                          )

                )
}
<br />
<p>
    @Html.ActionLink("Back", "Index")
</p>

securityidentifiermapping.cs //auto generated by EF
 public partial class SecurityIdentifierMapping
    {
        public int Id { get; set; }
        public Nullable<int> PricingSecurityID { get; set; }
        public string Calculation { get; set; }
    }

public List<SelectListItem> GetPricingSecurityID()
        {
        var pricingSecurityID = (from m in dbContext.Reporting_DailyNAV_Pricing.AsEnumerable()
                                     select new SelectListItem
                                         {
                                                Text = m.PricingSecurityID.ToString(),
                                                Value = m.PricingSecurityID.ToString()
                                         }).AsEnumerable();

        return pricingSecurityID.ToList();
        }

 public class SecurityIdentifierMappingViewModel
    {
        public IEnumerable<SecurityIdentifierMapping> MappingWebGridList { get; set; }
        public SecurityIdentifierMapping MappingControls { get; set; }

        public List<SelectListItem> PricingSecurityID { get; set; }
        public List<SelectListItem> CUSIP { get; set; }
    } 
```

采取`List<SelectListItem>`是因为想要填充下拉列表。那么在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:53:32.670

您必须在其中创建新属性`ViewModel`并将其设置`List<SelectListItem>`为该属性

```
public class SecurityIdentifierMappingViewModel
{
    public List<SelectListItem> PricingSecurityList{get;set;}

...
...
...
} 
```

* * *

```
public ActionResult Index(){
.....
...
..
            var viewModel = new SecurityIdentifierMappingViewModel
            {
                MappingControls = mappingobj,
                MappingWebGridList = dbContext.SecurityIdentifierMappings.ToList(),
                PricingSecurityList = objRepository.GetPricingSecurityID();

            };
...
.....

} 
```

看法

```
@Html.DropDownListFor(model=>model.MappingControl.PricingSecurityID, Model.PricingSecurityList) 
```

或者

```
@Html.DropDownList("SecurityID", Model.PricingSecurityList, "-- Select SecurityID --") 
```

# scala - 从 Scala 中的一系列表达式构造一个 List

> ID：10139015
> 
> 赞同：9
> 
> 时间：2012-04-13T10:15:31.517
> 
> 标签：scala, dsl

当我尝试在 Scala 中构建内部 DSL 时，我遇到了一个常见问题并且我无法制定解决方案。为了让事情看起来更像一种典型的语言，我希望语法看起来像这样：

```
model 'Foo {
  decl 'Real 'x;
  decl 'Real 'y;
} 
```

在实践中，有几个问题。第一个问题是让一个`model`对象以这种方式接受两个参数。如果有人有任何想法，请告诉我。但我所做的是做一些更像这样的事情：

```
model('Foo) {
  ...
} 
```

其中 model 现在是一个函数，然后返回一个带有`apply`方法的对象，然后使用后面的 lambda。我可以忍受的。我也可以在 lambda 内部遇到类似的问题，所以内部有类似的`decl 'Real 'x`问题`decl('Real,'x)`。但我想要做的是获得波浪花括号内所有这些表达式的结果，以作为列表“返回”。换句话说，我想要的是这样写：

```
model 'Foo {
  decl('Real,'x);
  decl('Real,'y);
} 
```

where`decl(...)`评估为某种类型`Declaration`，`{...}`然后评估为`List[Declaration]`. 我怀疑有一些方法可以使用隐式来做到这一点，但我一直没能找到它。简而言之，我想做：

```
model 'Foo {
  decl('Real,'x);
  decl('Real,'y);
} 
```

...评估为...的等价物

```
model 'Foo {
  decl('Real,'x) ::
  decl('Real,'y) ::
  Nil
} 
```

意见或建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T10:28:18.933

作为第一个想法，您可以尝试变量参数列表，它允许您使用逗号而不是分号：

```
case class Declaration(name: String)

def decl( s: String ) = Declaration(s)

case class Model( sym: Symbol, decls: List[Declaration] )

def model( sym: Symbol)( decls: Declaration* ) =
  Model( sym, decls.toList )

val m = model( 'Foo )(
  decl( "bar" ), 
  decl( "baz" ) 
) 
```

或者，您可以扩展 a`trait`以去掉一些括号和逗号：

```
case class ModelBuilder( sym: Symbol ) {
  def using( decls: Declarations ) = Model( sym, decls.toList )
}

trait Declarations {

  protected var decls = List[Declaration]()

  protected def decl( s: String ) = 
decls ::= Declaration( s )

  def toList = decls
}

def model( sym: Symbol ) = ModelBuilder( sym )

model( 'Foo ) using new Declarations {
  decl( "bar" )
  decl( "baz" )
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T00:22:27.517

天啊，我都做了什么？

```
import scala.collection.mutable.ListBuffer

case class Declaration(t: Symbol, name: Symbol)
case class Model(name: Symbol, declarations: List[Declaration])

object model extends Dynamic {
  val buffer = ListBuffer.empty[Model]

  def applyDynamic(name: String)(args: Any*) {
    buffer += Model(Symbol(name), decl.buffer.toList)
    decl.buffer.clear()
  }
}

object decl extends Dynamic {
  val buffer = ListBuffer.empty[Declaration]

  def applyDynamic(t: String)(args: Any*) {
    args match {
      case Seq(name: Symbol) => buffer += Declaration(Symbol(t), name)
    }
  }
}

model Foo {
  decl Real 'x
  decl Real 'y
}

assert(model.buffer.head == Model('Foo, List(
  Declaration('Real, 'x), Declaration('Real, 'y)))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T15:16:13.673

好的，在意识到`'Foo`应该是模型名称后彻底修改了这个。

```
trait DSL {

  private var currentModel: ModelBuilder = null
  case class Declaration(kind: Symbol, name: Symbol)
  case class Model(name: Symbol, declarations: List[Declaration])
  case class ModelBuilder(name: Symbol, var declarations: Vector[Declaration]) {
    def -(f: => Unit) = { 
      currentModel = this
      f
      Model(name, declarations.toList)
    }
  }

  def decl (s1: Symbol,  s2: Symbol) {
    currentModel.declarations :+= Declaration(s1, s2)
  }

  object model {
    def - (s: Symbol) = ModelBuilder(s, Vector.empty)
  }
} 
```

然后在使用现场：

```
object UseSite extends App with DSL {

  val m =

    model - 'Foo - {
      decl ('Real, 'x)
      decl ('Real, 'y)
    }

  println(m)  
    //Model('Foo,List(Declaration('Real,'x), Declaration('Real,'y)))
} 
```

所以这里的噱头是

1）使用变量来跟踪当前模型

2) 使用符号作为方法名称（如果您喜欢括号`-`，可以使用）`apply`

3）使用构建器，以便返回的类可以是不可变的

虽然，TBH 这可能有点多，只是为了避免一些逗号...... :)

# asp.net - 程序集使我的 asp.net 4.0 崩溃

> ID：10139017
> 
> 赞同：8
> 
> 时间：2012-04-13T10:15:48.037
> 
> 标签：asp.net, iis-7, quartz.net

我收到此错误 **“无法从程序集'mscorlib，Version = 4.0.0.0，Culture = Neutral，PublicKeyToken = b77a5c561934e089'加载类型'System.Runtime.CompilerServices.ExtensionAttribute'。”**

每当我将quartz.net 的dll 包含在我网站的bin 目录中并在代码中引用它时。我确信这与错误的 .net 框架有关。

我的 asp.net 站点正在使用目标框架 4.0 我正在使用 .net 4quartz.net 文件

并且我的 IIS 应用程序池（经典 .net 池）设置为运行 .net 4.0 frework。

我不知道从哪里开始，但我确定的是移除 Quartz，我看起来又好了（减去调度）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T19:38:20.097

在 C# 中使用扩展方法需要[ExtensionAttribute类。](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.extensionattribute(VS.110).aspx)在 .NET Framework 4.0 中，该类位于程序集 System.Core.dll 中，但在 .NET Framework 4.5 中，该类已移至 mscorlib.dll。我猜这个问题是，Quartz.dll（或其他程序集）是在安装了 .NET Framework 4.5 的计算机上编译的，因此在 mscorlib.dll 中期望 ExtensionAttribute，而这在只有 .NET Framework 4.0 的计算机上不存在。

我相信在没有 .NET Framework 4.5 的计算机上重新编译 Quartz 应该可以解决问题。在带有 IIS 的服务器上安装 .NET Framework 4.5 也应该有所帮助，但我不推荐它，因为它仍处于测试阶段。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T20:17:45.430

这是最终版本中引入的一个问题，因为 Quartz.Net 是针对 4.5 框架编译的。看看这个问题被报告的[线程。](http://groups.google.com/group/quartznet/browse_thread/thread/979f36ebe960281e/74a25f0c9e1d898b?lnk=gst&q=4.5#74a25f0c9e1d898b)有一个固定版本的 dll 可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T10:49:32.747

您是否尝试过添加对 mscorlib 程序集的引用并将 Copy Local 设置为*true*？

[在这里](http://connect.microsoft.com/VisualStudio/feedback/details/726702/moving-system-runtime-compilerservices-extensionattribute-to-mscorlib-breaks-structuremap-scans-of-namespaces-containing-extensionmethods-and-possibly-other-ioc-scenarios)阅读：

> 此问题与 ILMerge.exe 的运行方式有关。类型转发（在这种情况下是 ExtensionAttribute 类型）被认为是非破坏性更改，因为它在支持的场景中对运行时以及我们的编译器是透明的。编译器或类似编译器的工具（ILMerge 就是其中之一）应该支持类型转发，就像它们应该支持运行时的其他特性一样。此外，运行编译器的受支持方式是显式且完全地引用适当多目标包的参考程序集。

# python - Python fork 进程不会死

> ID：10139022
> 
> 赞同：3
> 
> 时间：2012-04-13T10:16:14.603
> 
> 标签：python

我见过几个类似这样的问题，但是在尝试了各种检查孩子是否还活着并退出孩子进程的变体之后，我简化了这个问题，但它仍然不起作用。

使用 sys.exit(0) 退出分叉进程我错了吗？有没有其他方法可以杀死它。问题是，我不能让父进程终止进程，因为它不知道它们何时完成工作。

起初我认为这是因为在退出之前执行了系统命令（[Python run system command and then exit... won't exit](https://stackoverflow.com/questions/6807102/python-run-system-command-and-then-exit-wont-exit)），但我什至在简化版本中删除了它，因为给定的解决方案也不起作用.

这是一个例子：

```
import sys
import os
import time

children = []

for i in range(0,3):    
    pid = os.fork()

    if pid == -1:
        continue
    elif pid == 0:
        # Do work...
        print 'Child %d spawned' % os.getpid()
        sys.exit(0)     
    else:
        children.append(pid)

time.sleep(5)
for pid in children:
    proc_path = '/proc/%d' % pid
    if not os.path.exists(proc_path):
        print 'Child %d is dead' % pid
    else:
        print 'Child %d is alive' % pid 
```

这打印：

```
Child 27636 spawned
Child 27637 spawned
Child 27638 spawned
Child 27636 is alive
Child 27637 is alive
Child 27638 is alive 
```

但是子进程应该是死的。

在这种情况下，是什么导致这些进程成为僵尸？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T10:26:42.383

你必须`wait()`为子进程。

请添加以下行以纠正错误：

```
import sys
import os
import time

children = []

for i in range(0,3):    
    pid = os.fork()

    if pid == -1:
        continue
    elif pid == 0:
        # Do work...
        print 'Child %d spawned' % os.getpid()
        sys.exit(0)     
    else:
        children.append(pid)

time.sleep(5)

# ADD NEXT TWO LINES:
for pid in children:
    os.waitpid(pid, 0)

for pid in children:
    proc_path = '/proc/%d' % pid
    if not os.path.exists(proc_path):
        print 'Child %d is dead' % pid
    else:
        print 'Child %d is alive' % pid 
```

父母必须`wait()`为孩子。详情请参阅`man 2 wait`。

`subprocess`在 python 中，您可以使用模块处理这些事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T10:30:52.587

为了让孩子从 PID 表中消失，您需要`wait()`在父母一方。

```
n_still_children_alive = len(children)
while n_still_children_alive > 0:
    pid, status = os.wait()
    print "Child %d died and joined" % pid
    n_still_children_alive -= 1 
```

如果你想在 Python 中使用多处理，你最好使用[`multiprocessing`模块](http://docs.python.org/library/multiprocessing.html)而不是使用`os`模块。

# mysql - MySQL会删除引用吗？

> ID：10139028
> 
> 赞同：0
> 
> 时间：2012-04-13T10:16:51.967
> 
> 标签：mysql, sql-delete

我有一个带有预设值的“查找”表（被告知它比 ENUM 更好）

```
CREATE TABLE tbl_payment_type (
    id INT NOT NULL AUTO_INCREMENT,
    PRIMARY KEY(id),
    description VARCHAR(25)
);
INSERT INTO tbl_payment_type
    (description)
VALUES
    ('PAYPAL'),
    ('DEBIT CARD'),
    ('CREDIT CARD'),
    ('CASH ON DELIVERY'); 
```

现在，我的每个订单都包含一种付款类型。

```
CREATE TABLE tbl_order (
    id INT NOT NULL AUTO_INCREMENT,
    PRIMARY KEY(id),
    ...
    payment_type INT,
    FOREIGN KEY(payment_type) REFERENCES tbl_payment_type(id)
) AUTO_INCREMENT = 1000; 
```

我目前正在使用 MyISAM，但将来可能会尝试 InnoDB（我不确定这是否会影响问题）。

最后，问题是，如果我尝试从 中删除记录`tbl_payment_type`，是否会导致 MySQL 自动删除`tbl_order`包含此付款类型的所有记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T10:22:26.327

MyISAM 不支持外键，因此在使用此存储提供程序时不会发生任何事情。

InnoDB 支持外键，默认情况下它将限制 DELETE 和 UPDATES 没有外匹配。可以通过添加 ON DELETE 和 ON UPDATE 选项来更改此行为。请参阅MySQL 网站上的[FOREIGN KEY Constraints 。](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:26:34.533

`DELETE`如果您尝试输入`payment_type`from ，它会给您一个错误`tbl_payment_type`

```
delete from `test`.`tbl_payment_type` where `id`='2' 
```

> 错误：1451 无法删除或更新父行：外键约束失败 ( `test`. `tbl_order`, CONSTRAINT `tbl_order_ibfk_1` FOREIGN KEY ( `payment_type`) REFERENCES `tbl_payment_type`( `id`))

# java - Selenium WebDriverBackedSelenium Internet Explorer 错误

> ID：10139030
> 
> 赞同：2
> 
> 时间：2012-04-13T10:17:10.083
> 
> 标签：java, internet-explorer, selenium, webdriver

我正在尝试在 IE 上运行我的测试。问题是在 Firefox 上它可以工作，但是当我尝试在 IE 上运行它时，它会打开浏览器，导航到我的网站，但在页面完成后加载以下错误返回：

```
 com.thoughtworks.selenium.SeleniumException: JavaScript error (WARNING: The server did not provide any stacktrace information)
Command duration or timeout: 302 milliseconds
Build info: version: '2.21.0', revision: '16552', time: '2012-04-11 19:08:45'
System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.6.0_25'
Driver info: driver.version: RemoteWebDriver
at org.openqa.selenium.internal.seleniumemulation.SeleneseCommand.apply(SeleneseCommand.java:42)
at org.openqa.selenium.internal.seleniumemulation.Timer.run(Timer.java:39)
at org.openqa.selenium.WebDriverCommandProcessor.execute(WebDriverCommandProcessor.java:145)
at org.openqa.selenium.WebDriverCommandProcessor.doCommand(WebDriverCommandProcessor.java:75)
at com.thoughtworks.selenium.DefaultSelenium.focus(DefaultSelenium.java:221)
at com.extjs.selenium.form.TextField.setValue(TextField.java:127) 
```

我的代码：

```
public void setUp(String server, String browser) throws Exception {
    WebDriver driver = getWebDriver(InputData.BROWSER);
    selenium = new WebDriverBackedSelenium(driver, server);
}
 public WebDriver getWebDriver(String browser) {
    if (browser.equalsIgnoreCase("*firefox")) {
       return new FirefoxDriver(firefoxProfile);
    } else if (browser.equalsIgnoreCase("*iexplore")) {
        return new InternetExplorerDriver();
    } else if (browser.equalsIgnoreCase("*chrome")) {
        return new ChromeDriver();
    }   else if (browser.equalsIgnoreCase("*htmlunit")) {
        return new HtmlUnitDriver(true);
    }   else  {
        logger.error("Browser not supported");
        return null;
    }
} 
```

谁能帮我解决这个问题？我一直试图让它在 IE 上运行。我正在使用可以从 [http://code.google.com/p/selenium/downloads/list下载的最新驱动程序](http://code.google.com/p/selenium/downloads/list)

谢谢

# magento - Magento 删除块仅适用于禁用缓存

> ID：10139031
> 
> 赞同：0
> 
> 时间：2012-04-13T10:17:18.750
> 
> 标签：magento

我有一个静态块，它被添加到每一页的页脚引用中。我的主页是一个 CMS 页面，我已将代码放入页面布局更新 XML 以从该页面中删除块。

这是将其添加到所有页面的页脚的方式：

在page.xml里面

```
<reference name="footer">
  <block type="cms/block" name="page_cta" before="-">
    <action method="setBlockId"><block_id>page_cta</block_id></action>
  </block>
</reference> 
```

我的主页布局中的代码更新 xml 以删除该块：

```
<reference name="footer">
  <remove name="page_cta" />
</reference> 
```

该块不应显示在主页上，而应显示在所有其他页面上。这可以正常工作，但前提是缓存被禁用。似乎发生的情况是启用了缓存，然后我查看了主页并删除了该块，但随后它也在其他所有页面上被删除。

如果启用缓存，任何人都可以解释为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-20T07:00:51.413

禁用特定块的缓存，如下所述：

```
<reference name="footer">
       <action method="unsetData"><key>cache_lifetime</key></action>
       <action method="unsetData"><key>cache_tags</key></action>
       <block type="cms/block" name="page_cta" before="-">
           <action method="setBlockId"><block_id>page_cta</block_id></action>
       </block>
   </reference> 
```

# c# - WPF画布添加到背景

> ID：10139041
> 
> 赞同：1
> 
> 时间：2012-04-13T10:18:39.937
> 
> 标签：c#, .net, wpf, xaml, canvas

我调用了画布`myCanvas`并将`n`他的矩形添加为

```
mycanvas.Children.Add(UIElement u); 
```

稍后，我需要添加`Line`并将其带到背景（在矩形之前的图层上）。

我不知道如何更好地解释：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T10:23:54.200

您可以使用 ZIndex：

```
Canvas.SetZIndex(line, 0); 
```

# mysql - WHERE 子句返回结果而不考虑子查询

> ID：10139044
> 
> 赞同：0
> 
> 时间：2012-04-13T10:19:03.553
> 
> 标签：mysql, subquery

我正在使用子查询从类别及其下的所有子类别中返回产品。这是它的sql查询：

```
SELECT
    ca.categoryid, p.*, FLOOR(prodratingtotal/prodnumratings) AS prodavgrating, 0 AS prodgroupdiscount
FROM
    cart_categoryassociations ca, cart_products p
WHERE
    p.prodvisible=1 AND p.prodfeatured=1 AND (ca.categoryid=47 OR ca.categoryid IN (SELECT categoryid FROM cart_categories WHERE catparentid=47)) 
```

当我运行它时，它只根据`p.prodvisible=1 AND p.prodfeatured=1`部分返回结果，忽略`(ca.categoryid=47 OR ca.categoryid IN (SELECT categoryid FROM cart_categories WHERE catparentid=47))`部分。

（换句话说，它会带回系统中的所有特色产品，即使它们不属于子查询中提到的类别）

PS：我试过单独运行括号中的部分，它返回正确的类别。

MySQL 版本 5.0.8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:37:27.780

```
FROM
cart_categoryassociations ca, cart_products p 
```

我不知道你的数据库结构，但不应该用左连接而不是完全连接来完成。这是故意的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:11:21.063

```
WHERE
    p.prodvisible=1 AND p.prodfeatured=1 AND (ca.categoryid=47 OR ca.categoryid IN (SELECT categoryid FROM cart_categories WHERE catparentid=47)) 
```

我认为这是返回 cart_products 中与子句匹配的`p.prodvisible=1 AND p.prodfeatured=1`每一行匹配的所有行`(ca.categoryid=47 OR ca.categoryid IN (SELECT categoryid FROM cart_categories WHERE catparentid=47))`。

没有`cart_products`某种外键`cart_categories`？那么你可以添加：

`AND p.categoryid=ca.categoryid`

# ruby - ROR + 使用 RUBY 在 Windows 平台上执行 CMD 提示

> ID：10139049
> 
> 赞同：0
> 
> 时间：2012-04-13T10:19:37.673
> 
> 标签：ruby, ruby-on-rails-3

在 Rails 3 中，我想使用 ruby​​ 代码在 windows 平台上运行 cmd 提示符。意味着单击网页上的其中一个 url，它将在带有参数的 Windows 托管服务器上运行命令提示符。

在这里我想通过一些rails命令来执行

> “rails 生成模型用户名：字符串”

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:49:12.773

听起来像是有风险的业务，但在最基本的 Ruby 级别上，您可以使用`system`

```
system "rails generate model User first_name:string" 
```

[内核：系统文档](http://rubydoc.info/stdlib/core/1.9.3/Kernel%3asystem)

# asp.net-mvc-3 - Webapi 上传时出现“MIME 多部分流。MIME 多部分消息不完整”错误

> ID：10139052
> 
> 赞同：3
> 
> 时间：2012-04-13T10:19:43.717
> 
> 标签：asp.net-mvc-3, file-upload, asp.net-web-api

上传到 webapi 控制器时，我仅在某些文件上收到错误消息。

错误是“MIME 多部分流。MIME 多部分消息不完整”

似乎该错误与某种未很好终止的 POST 数据有关，但是当我使用 firebug 检查从浏览器发送的参数时，一切似乎都正常。

[这篇文章](http://forums.asp.net/t/1777847.aspx/1?MVC4%20Beta%20Web%20API%20and%20multipart%20form%20data)提出了一个对我不起作用的解决方法。我也看过[这个](http://www.asp.net/web-api/overview/formats-and-model-binding/html-forms-and-multipart-mime)

我正在利用 MultipartFormDataStreamProvider 进行反序列化。

这是两个类似 pdf 文档的[链接，一个有效，一个无效。](https://www.dropbox.com/sh/sw9foaca1skkl5r/M5Q7BJwGxw)我还包括了来自[strathweb.com](http://www.strathweb.com/2012/04/html5-drag-and-drop-asynchronous-multi-file-upload-with-asp-net-webapi/)的另一个示例 html5 webapi 上传应用程序的 zip 。该应用程序将与一个文档一起工作，而不是另一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T22:37:20.007

根据[这个讨论](http://aspnetwebstack.codeplex.com/discussions/354215)，它应该在下一个 ASP.NET Web API 中修复：

> 我们已经对此进行了调查，虽然它确实使用 beta 位进行了复制，但我们已经确认该问题已在最新位中得到解决。您可以尝试最新的夜间版本（请参阅[此处的说明](http://blogs.msdn.com/b/henrikn/archive/2012/04/29/using-nightly-nuget-packages-with-asp-net-web-stack.aspx)）或等待我们的下一次发布。

# php - 结合几个 mb_ereg_replace() 调用

> ID：10139056
> 
> 赞同：0
> 
> 时间：2012-04-13T10:20:02.253
> 
> 标签：php, regex, multibyte-functions

如何将这些替换组合成一个正则表达式？

```
$style = $node->getAttribute("style");
$style = mb_ereg_replace("(direction:[[:space:]]*(rtl|ltr);)", "", $style) . " direction: {$direction};";  // remove existing direction-attribute and add the new one
$style = mb_ereg_replace("(^[[:space:]]*)|([[:space:]]*$)", "", $style); // trim spaces at the end and beginning
$style = mb_ereg_replace("([[:space:]]){2,}", " ", $style); // limit spaces to one at a time
$node->setAttribute("style", $style); 
```

表达式按预期工作，但我想将它们组合成少于三个替换语句。
我不能只替换现有的方向属性，因为我不知道是否有。

**编辑**
为前两个替换添加了替换：

```
$style = mb_ereg_replace("(direction:[[:space:]]*(rtl|ltr);)|(^[[:space:]]*)|([[:space:]]*$)", "", $style) . " direction: {$direction};";  // remove existing direction-attribute and trim spaces at the end and beginning and add the new one
$style = mb_ereg_replace("([[:space:]]){2,}", " ", $style); // limit spaces to one at a time 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:57:32.157

这就是我这样做的方式： trim() 替换你的第二个正则表达式（除非你想保留换行符，如果会有的话）

我用 preg_replace 做的，你应该用什么来代替 ereg_functions（它略有不同，但并不复杂）

```
$style = trim(preg_replace('~direction:(\\s*?)(rtl|ltr);~','',$style) . " direction: {$direction};");
$style = preg_replace('~(\\s*?){2,}~',' ',$style); 
```

# java - 在 HIbernate 的条件中应用 UPGRADE 锁定时出错

> ID：10139058
> 
> 赞同：0
> 
> 时间：2012-04-13T10:20:17.377
> 
> 标签：java, hibernate

我正在开发一个使用 oracle 数据库的应用程序。要连接数据库，我正在使用 Hibernate。我是 Hibernate 的新手，遇到了一个问题，所以需要一些帮助。我的情况是：

1.  从数据库中选择一些处理状态（我表中的一列）为“N”的行</li>
2.  将这些行的 ProcessingStatus 更新为“U”</li>
3.  对数据应用一些逻辑
4.  将 ProcessingStatus 更改为“Y”</li>

我编写了一个代码，如果我将它作为单个进程运行它会很好，但是如果我运行同一个应用程序的多个实例，就会出现问题，不同的进程可能会选择相同的行来处理我不想要的。所以我想锁定选择行返回的所有行，将它们的 ProcessingStatus 更新为“U”，然后释放锁定。为此，我在 Criteria 中获得了一个 API `criteria.setLockMode(LockMode.UPGRADE)`，我计划在运行选择查询时使用它，这样任何其他行都不会选择这些行，但问题是当我使用此 API 时出现错误错误是：

```
2602 [main] WARN org.hibernate.util.JDBCExceptionReporter  - SQL Error: -11, SQLState: 37000
2602 [main] WARN org.hibernate.util.JDBCExceptionReporter  - SQL Error: -11, SQLState: 37000
2603 [main] ERROR org.hibernate.util.JDBCExceptionReporter  - Unexpected token: FOR in statement [select this_.CUSTOMER_ID as CUSTOMER1_2_0_, this_.MARKETPLACE_ID as MARKETPL2_2_0_, this_.PROCESSING_DATE as PROCESSING3_2_0_, this_.AMOUNT as AMOUNT2_0_, this_.LAST_SHIP_DATE as LAST5_2_0_, this_.ORDER_DATE as ORDER6_2_0_, this_.PROCESSING_STATUS as PROCESSING7_2_0_, this_.PURCHASE_ID as PURCHASE8_2_0_, this_.QUANTITY as QUANTITY2_0_ from CUSTOMERS_FIRST_ORDER this_ where this_.PROCESSING_DATE=? and this_.MARKETPLACE_ID=? and this_.PROCESSING_STATUS=? limit ? for update] 
```

有人可以帮我解决这个问题。我没有得到我做错了什么。如果我使用`LockMode.READ`它，那么它可以工作，但它会在升级/写入模式下出错。

引发错误的代码是：

```
@SuppressWarnings("unchecked")
@Transactional
public List<CustomerFirstOrder> getOrders(final Date processingDate, long marketplaceID, int count) throws Exception {
    final Session session = getSession();
    final Criteria criteria = session.createCriteria(CustomerFirstOrder.class);
    criteria.add(Restrictions.eq(PROCESSING_DATE, processingDate));
    criteria.add(Restrictions.eq(MARKETPLACE_ID, marketplaceID));
    criteria.add(Restrictions.eq(PROCESSING_STATUS, ProcessingStatus.NOTPROCESSED.toString().charAt(0)));                ///Select only unprocessed rows
    criteria.setMaxResults(count); // select multiple rows
    criteria.setLockMode(LockMode.UPGRADE);
    LOGGER.debug("selecting multple row for date " + processingDate + " of marketplace " + marketplaceID + " of status " + ProcessingStatus.NOTPROCESSED);
    final List<CustomerFirstOrder> results;
    try {
            results = (List<CustomerFirstOrder>)criteria.list();
            return results;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:40:26.670

Oracle 不支持子句，因此如果 Hibernate配置为使用 Oracle 方言，则它`limit`无法生成带有子句的查询。`limit`

因此，您需要[配置 Hibernate](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/session-configuration.html#configuration-optional-dialects)以使用正确的 Oracle 方言来使 Hibernate 为 Oracle 生成正确的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:15:01.733

通过 Hibernate 在 Oracle 中使用限制和 for update 子句存在已知问题，至少可以追溯到几年前。请参阅[此错误报告](https://hibernate.onjira.com/browse/HHH-759)。尝试取出以下行：

```
criteria.setMaxResults(count); 
```

并再次运行测试。作为旁注，`LockMode.UPGRADE`在 Hibernate 中已弃用，您应该`PESSIMISTIC_WRITE`改用它。

# .htaccess - htaccess 子域重定向更改地址

> ID：10139059
> 
> 赞同：1
> 
> 时间：2012-04-13T10:20:17.517
> 
> 标签：.htaccess, mod-rewrite, subdomain

我已经在 SO 上阅读了两天的帖子，并尝试了十几个样本，但无法让我的重写工作。

这是我的情况：
我在 Ubuntu 上运行 Apache。
我的根目录中有 2 个文件（file1.php、file2.php）和一个文件夹（网站）
，我想将 www.mydomain.com 和 domain.com 重定向到该文件夹​​。该部分正在使用这组规则：

```
RewriteCond %{HTTP_HOST} ^(www.)?mydomain\.com$
RewriteCond %{REQUEST_URI} !^/website/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /website/$1
RewriteCond %{HTTP_HOST} ^(www.)?mydomain\.com$
RewriteRule ^(/)?$ website/ [L] 
```

现在我正在尝试使用子域。
demo.mydomain.com 应该去 www.mydomain.com/file1.php?v=demo demo.mydomain.com/file2.php 应该去 www.mydomain.com/file2.php?v=demo 和 url浏览器的地址栏不应该改变。

我已经有了这个：

```
RewriteCond %{HTTP_HOST} !^www\.mydomain\.com$ [NC]
RewriteCond %{HTTP_HOST} ^(.*)\.mydomain\.com$ [NC]
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(.*)$   http://www.mydomain.com%{REQUEST_URI}?v=%1 [L]
##
RewriteCond %{HTTP_HOST} !^www\.mydomain\.com$ [NC]
RewriteCond %{HTTP_HOST} ^(.*)\.mydomain\.com$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ file1.php?v=%1 [L] 
```

这会导致 demo.mydomain.com/file2.php 转到 www.mydomain.com/file2.php?v=demo，这没关系，但地址栏中的 URL 也会发生变化。那不行。
demo.mydomain.com 重定向到 www.mydomain.com 进入网站文件夹，这是完全错误的。

如你所见，我快到了。我只是缺少一些小片段。
请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:31:08.957

您在重写规则中使用与当前域不同的域（demo.mydomain.com 与 www.mydomain.com）。Apache 不知道这些指向同一个服务器和 document_root，因此 apache 会进行重定向。只需删除域名部分。

```
RewriteCond %{HTTP_HOST} !^www\.mydomain\.com$ [NC]
RewriteCond %{HTTP_HOST} ^(.*)\.mydomain\.com$ [NC]
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(.*)$   $1?v=%1 [L,QSA]
##
... 
```

# jquery - 将导航栏置于网站内容之上

> ID：10139060
> 
> 赞同：0
> 
> 时间：2012-04-13T10:20:22.950
> 
> 标签：jquery, css

我的网站上的导航栏有问题。导航栏是使用 jquery 和 css 构建的，并且已经取代了我网站上的 wordpress 导航栏。

网站是[http://renocharlton.com/](http://renocharlton.com/)

我知道有些内容是 Flash - 但是导航栏位于页面上的图像下方。

任何人都可以提出解决问题的方法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:23:42.953

可能重叠图像的 z-index 太高。尝试将其设置为 -10

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:24:49.667

将`z-index`菜单的 设置为相当高的值，例如`10000`.

或者，将菜单的标记移动到页面的末尾，尽管这可能并不容易，具体取决于您的布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T10:26:03.633

在你的css中像这样定义你的css

```
.dropmenu li > ul, .dropmenu li > div{
z-index:9;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T10:26:13.040

你可以使用：

```
ul.dropmenu {
  position: relative;
  z-index: 10;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T10:35:48.060

只需更新您的 CSS 并设置**`z-index`**值。

# asp.net - 无法读取我的 Web.config 部分“程序集”的编译

> ID：10139062
> 
> 赞同：1
> 
> 时间：2012-04-13T10:20:32.077
> 
> 标签：asp.net, web-config

我使用 asp.net 4 创建了一个应用程序，它在我的本地服务器上运行良好，但是当我切换到外部服务器时，我的 web.config 出现了一些奇怪的问题，我收到了这个错误

```
[500 - Internal server error.
There is a problem with the resource you are looking for, and it cannot be displayed.
] 
```

.

似乎该`<compilation>`部分内部存在一些问题。只是我不得不说，当我删除该`<compilation>`部分时，我的应用程序可以显示和运行，但无法访问数据库。

网络配置

* * *

```
 <?xml version="1.0" encoding="utf-8"?>
<configuration>

  <configSections></configSections>
  <appSettings />

  <connectionStrings>
    <add name="ImmoEntities" connectionString="metadata=res://*/Model.ImmoModel.csdl|res://*/Model.ImmoModel.ssdl|res://*/Model.ImmoModel.msl;provider=MySql.Data.MySqlClient;provider connection string=&quot;server=XXXXX;Password=XXXXX;User Id=XXXXX;database=XXXXX&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>

  <system.web>

    <globalization culture="auto:fr-FR" uiCulture="auto:fr-FR" />
    <siteMap defaultProvider="XmlSiteMapProvider" enabled="true">
      <providers>
        <clear />
        <add name="XmlSiteMapProvider" type="System.Web.XmlSiteMapProvider" siteMapFile="Web1.siteMap" />
        <add name="web1" type="System.Web.XmlSiteMapProvider" siteMapFile="/Web1.sitemap" />
        <add name="web" type="System.Web.XmlSiteMapProvider" siteMapFile="/Web.sitemap" />
        <add name="web3" type="System.Web.XmlSiteMapProvider" siteMapFile="/Web3.sitemap" />
        <add name="web4" type="System.Web.XmlSiteMapProvider" siteMapFile="/Web4.sitemap" />
      </providers>
    </siteMap>

    <!-- Web.Config Configuration File -->

    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <add assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Web.DynamicData, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.ComponentModel.DataAnnotations, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Web.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
      </assemblies>
    </compilation>

    <!-- 
            Set compilation debug="true" to insert debugging 
            symbols into the compiled page. Because this 
            affects performance, set this value to true only 
            during development.
        -->

    <!--
            The <authentication> section enables configuration 
            of the security authentication mode used by 
            ASP.NET to identify an incoming user. 
        -->

    <authentication mode="Windows" />
    <httpHandlers>
      <add path="CaptchaImage.axd" verb="GET" type="MSCaptcha.CaptchaImageHandler, MSCaptcha" />
    </httpHandlers>

    <!--
            The <customErrors> section enables configuration 
            of what to do if/when an unhandled error occurs 
            during the execution of a request. Specifically, 
            it enables developers to configure html error pages 
            to be displayed in place of a error stack trace.

        <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
            <error statusCode="403" redirect="NoAccess.htm" />
            <error statusCode="404" redirect="FileNotFound.htm" />
        </customErrors>
        -->

    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID">
      <controls>
        <add assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagPrefix="ajaxToolkit"/>

        <add tagPrefix="cc1" assembly="MSCaptcha" namespace="MSCaptcha" />

      </controls>
    </pages>

  </system.web>

  <!-- 
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0\.  It is not necessary for previous version of IIS.
    -->

  <system.webServer>
    <httpErrors errorMode="Detailed" />
    <asp scriptErrorSentToBrowser="true"/>
    <validation validateIntegratedModeConfiguration="false" />
  </system.webServer>
  <system.web>
    <customErrors mode="Off"/>
    <compilation debug="true"/>
  </system.web>

  <system.data>
    <DbProviderFactories>
      <remove invariant="MySql.Data.MySqlClient" />
      <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL" type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.3.6.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
    </DbProviderFactories>
  </system.data>

</configuration> 
```

知道可能是什么吗？我尝试了不同的方式，但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:07:01.537

确保以下所有具有正确版本的程序集都安装在 GAC 中或位于项目的 Bin 文件夹中。

如果 GAC 中缺少任何未从 bin 引用的程序集，则必须在服务器上再次运行 .net framework 4。

如果 bin 中缺少任何内容，则必须确保在项目中包含该程序集时，将其 Copy to.. 属性标记为 true。或直接将该程序集复制并粘贴到 bin。

```
System.Design, Version=4.0.0.0
System.Data.Entity, Version=4.0.0.0
System.Web.Extensions, Version=4.0.0.0
System.Web.Extensions.Design, Version=4.0.0.0
System.Windows.Forms, Version=4.0.0.0
System.Web.DynamicData, Version=4.0.0.0
System.Core, Version=4.0.0.0
System.ComponentModel.DataAnnotations, Version=4.0.0.0
System.Data.Linq, Version=4.0.0.0
System.Web.Entity, Version=4.0.0.0
System.Xml.Linq, Version=4.0.0.0 
```

让我知道我是否遗漏了什么

# ios - 在 iOS 上通过（外部）javascript 启动 YouTube iframe 播放器

> ID：10139065
> 
> 赞同：5
> 
> 时间：2012-04-13T10:20:50.810
> 
> 标签：ios, api, iframe, youtube, playback

iOS 上的 Safari 有一个策略，仅当当前 javascript 执行以用户操作（通常是单击事件）开始时才允许播放媒体。

但是，当我将处理程序附加到触发的按钮`someYoutubePlayer.playVideo()`并且用户**单击此按钮**时，这就是实际发生的情况：

1.  `click`在主页面窗口中触发事件
2.  该方法在 youtube 上`playVideo`触发`postMessage``<iframe />`
3.  在 iframe 内`message`触发了一个事件
4.  `message`事件的处理程序`domVideo.play()` **将失败，因为当前事件不再是`click`，而是`message`**，因为我们在内部`iframe`窗口中。

有谁知道如何克服这个问题并从外部点击事件触发播放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-27T05:02:06.470

为什么不直接从它的 url 加载视频，而不是在`iFrame`?? 这将使您的应用程序的负载减少，并且泄漏将在几分钟内。

**例如** [http://www.youtube.com/watch?v=](http://www.youtube.com/watch?v=) ....

# python - 使用 Gmail API 仅获取姓名、电子邮件和时间戳

> ID：10139067
> 
> 赞同：0
> 
> 时间：2012-04-13T10:21:04.453
> 
> 标签：python, api, gmail

有没有办法只获取我的 Gmail 中所有邮件的姓名、电子邮件和时间戳？是否可以使用任何 Python 库来做到这一点？

另外，我想知道谷歌接受的API请求的日常使用是否有限制？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:11:02.283

我会使用 IMAPClient 库。这是相关功能：http: [//imapclient.readthedocs.org/en/latest/index.html#imapclient.IMAPClient.fetch](http://imapclient.readthedocs.org/en/latest/index.html#imapclient.IMAPClient.fetch)

我认为通过 IMAP 获取电子邮件没有任何限制，只有发送限制。

# c# - 在渲染页面中渲染页面

> ID：10139070
> 
> 赞同：2
> 
> 时间：2012-04-13T10:21:12.950
> 
> 标签：c#, razor

我正在使用 razor 视图引擎和 C# 开发一个网站，并且对 RenderPage() 函数有疑问。

我有一个带有 RenderBody() 的 _PageStart。这工作正常并加载请求的页面。但是，如果我请求例如 www.page.com/products 并且 products.cshtml 包含函数 RenderPage()，则不会执行此函数。

RenderPage() 是否仅适用于第一级执行页面（此处为 _PageStart）？有没有办法在渲染页面中渲染页面？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:01:18.280

根据我从您的问题中了解到的情况（当您说 RenderBody 时，我假设您的意思是 RenderPage），您有一个页面调用 RenderPage() 以包含另一个页面，并且包含的​​页面有另一个对 RenderPage() 的调用以包含另一个页。

这应该有效。请记住，您的路径是相对于您调用 RenderPage() 的页面，而不是您的层次结构中的顶级页面。另请注意，_ViewStart.cshtml 不会针对使用 RenderPage() 呈现的页面进行评估，因此不会使用默认父布局。

如果您仍然遇到任何问题，请发布一些源代码，以便获得更好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:14:54.890

如果我正确理解您的问题，您必须有子控件才能做到这一点..

# php - 为什么不用工厂模式进行排序？

> ID：10139073
> 
> 赞同：2
> 
> 时间：2012-04-13T10:21:29.523
> 
> 标签：php, design-patterns

在运行时，根据用户行为和历史，我需要执行排序操作。在我的情况下，`SortByDate/SortByDemand/SortByConsumption`将只返回字符串，或者我们可以说 order by 子句（这可能很复杂）。

在大多数论坛中，我发现应该使用策略模式进行排序。

![在此处输入图像描述](../Images/00ba0f353355a487ad079da05bf30bcf.png)

我在这里附上了策略模式的图像。Util 类将调用三个类之一的对象，即 SortByDate/SortByDemand/SortByConsumption

所以每次定义新的排序方法时，我都需要更改util类并定义一个新的Strategy。

![在此处输入图像描述](../Images/63dd4778457b01ccf2c6a60b9641dd2f.png)

但是，如果我使用工厂实现它，则 util 类只需要调用工厂，它将负责调用哪个类。所以我认为我应该使用工厂。

但是，我读过该策略是满足此类需求的最佳模式。为什么策略模式在这里更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:33:40.543

你所做的不是工厂模式，而是两者的混合，这不清楚，在我看来是错误的。

在第二个示例中，类名错误且令人困惑。`SortByDateFactory`不像工厂（它不生产任何东西），但它确实像一个策略。因此，它应该符合一个策略接口。

另一方面，在第一个示例中，其`UtilClass`行为类似于您要创建的工厂。因此，我建议保持第一个示例不变，但将其重命名`UtilClass`为`SortStrategyFactory`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:37:10.647

策略是一种模式，旨在允许您在不破坏算法客户端的情况下向您的软件添加新的（在您的情况下排序）算法。这是对设计复杂性的投资，如果您需要在不破坏客户的情况下添加新算法，它将获得回报。Factory 是一种补充 Strategy 的模式，因为算法实现的客户不应该具体知道他们正在使用哪个实现（就软件类而言）。工厂实例化算法的具体实现，因此客户端可以在不知道细节的情况下使用它们。

这是静态结构： ![在此处输入图像描述](../Images/983fd92235427dcc92ccd0b0d6a9a740.png)

这是动态：

![在此处输入图像描述](../Images/9fd2bd56159a068a94286c39da7f61f0.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T12:28:45.727

这两个图表看起来都像策略模式，但底部的图表有点晃动。如果你想要一个工厂，这意味着 utilclass 将是抽象的并且有一个工厂方法，它实例化一个排序器类。由 utilclass 的特定子类定义的特定类型的 sorter。

策略模式的重点是避免被绑定到类层次结构中，这样您就可以将各种排序器与各种其他特性混合和匹配。当您使用 utilclass 的子类和特定的子类（以及它的所有其余功能）将始终需要特定的排序器而不是不同的排序器时，工厂是合适的。根据您的需要选择合适的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T16:16:10.743

您正在有效地使用*factory*和*strategy*。*工厂*决定创建哪种*策略*；该*策略*执行排序逻辑。

您的底部图表令人困惑，因为您从工厂继承了您的策略。工厂应该*制定*正确的策略。

客户只是向工厂询问策略并使用它。

# iphone - NSUserDefaults 不加载字符串数组

> ID：10139074
> 
> 赞同：2
> 
> 时间：2012-04-13T10:21:38.330
> 
> 标签：iphone, nsuserdefaults

在有人说这是一个以前被问过很多次的问题之前，我已经经历了大约 20 个不同的答案并尝试了我发现的所有内容。尽管如此，我大约 5 天前才开始使用目标 c，所以可能有一些非常简单的解决方案。

似乎 NSUserDefaults 不会从默认属性列表中加载数组，尽管以许多不同的方式被调用。在我继续之前，这是我读取数组的代码：

```
 fishArrayMutable = [[NSMutableArray alloc] initWithArray:(NSArray*)[defaults objectForKey:@"fishArray"] copyItems:TRUE];

     if (fishArrayMutable == nil)
     {
       fishArrayMutable =  [[NSMutableArray alloc] init];
       UIAlertView *alert = [[UIAlertView alloc] init];
       [alert setTitle:@"fishArray = nil"];
       [alert addButtonWithTitle:@"Ok"];
       [alert show];
       [alert release];
     } 
```

这是我编写数组的代码：

```
[defaults setObject:fishArrayMutable forKey:@"fishArray"];

[defaults synchronize]; 
```

现在这开始成为一个非常令人沮丧的问题，我已经研究了隔离问题的方法，并得出结论，它在阅读部分。可变数组在头文件中声明。请帮忙，这已经困扰了我大约 6 个小时了......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:03:32.173

我怀疑错误是以下之一：

1.  `defaults`未初始化。
2.  在阅读之前未设置 userDefaults
3.  userDefaults 被覆盖之前的阅读。

分解每一步并在每一步之前和之后编写测试。

1)`NSLog` `fishArrayMutable`写入其中以验证数组内容。
2）在写入`fishArrayMutable`默认值后立即`NSLog`用户默认值。例子：

```
NSLog(@"Before writing fishArray: %@", fishArrayMutable);
[defaults setObject:fishArrayMutable forKey:@"fishArray"];
NSLog(@"After writing fishArray: %@", [[NSUserDefaults standardUserDefaults] objectForKey:@"fishArray"]); 
```

请注意，这些`NSLog`语句*不*使用`defaults`保持它们自包含。

做类似`NSLog`的语句将 read 括起来（并使 read 两个语句）：

```
NSLog(@"Before reading fishArray: %@", [[NSUserDefaults standardUserDefaults] objectForKey:@"fishArray"]);
NSArray *fishArray = [defaults objectForKey:@"fishArray"];
NSLog(@"After reading fishArray: %@", fishArray);
fishArrayMutable = [[NSMutableArray alloc] initWithArray:fishArray copyItems:TRUE];
NSLog(@"After creating fishArrayMutable: %@", fishArrayMutable); 
```

那么问题应该就比较明显了。

注意：由于数组项本身将是不可变的，`NSUserDefaults`而不是：
`fishArrayMutable = [[NSMutableArray alloc] initWithArray:fishArray copyItems:TRUE];`
您应该能够只使用`mutableCopy`：
`fishArrayMutable = [fishArray mutableCopy];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:17:50.860

尝试使用`mutableArrayValueForKey`检查此[链接](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html)

像这样使用它：

```
fishArrayMutable = [[NSMutableArray alloc] initWithArray:[defaults mutableArrayValueForKey:@"fishArray"]]; 
```

这个对我有用

**编辑**：

写作：

```
[defaults setObject:fishArrayMutable forKey:@"fishArray"];
[defaults synchronize]; 
```

加载：

```
NSMutableArray *array = [defaults mutableArrayValueForKey:@"fishArray"]; 
```

# asp.net - IIS 应用程序池在使用 Context.Server.Execute 时崩溃

> ID：10139075
> 
> 赞同：1
> 
> 时间：2012-04-13T10:21:45.163
> 
> 标签：asp.net, vb.net, iis, application-pool

我在编写一个 ASP.Net 页面时遇到问题，我正在努力诊断该页面失败的原因。

我正在尝试这样做：

```
 Dim st As New StringWriter()

  Dim strURL As String = "CourseProgramme.aspx?id=3733"
  Context.Server.Execute(strURL, st)
  txtNotes.Text = st.ToString() 
```

这里的目的是获取在 strURL 中指定的页面的 HTML，然后将其显示在文本框中。但是，当我运行此代码时，它会使 IIS 中的 ApplicationPool 崩溃，当我查看事件查看器时，我会看到以下错误消息：

> 为应用程序池“blueprintdev”提供服务的进程与 Windows 进程激活服务发生了致命的通信错误。进程 ID 为“5284”。数据字段包含错误号。

这里奇怪的是，在另一个页面中，我执行了这个工作正常的代码：

```
 Dim strDutyStartDate As Date
  strDutyStartDate = TextboxDutyStartDate.Text

  Dim st As New StringWriter()
  Dim strURL As String = "rosteroutput.aspx?InstructorID=" & Request.QueryString("InstructorID") & "&Instructor=" & Request.QueryString("Instructor") & "&Start=" & strDutyStartDate

  Context.Server.Execute(strURL, st)
  TextBox1.Text = st.ToString 
```

据我所见，除了我传递的 URL（确实存在）之外，我看不出两者之间的区别。

我正在开发的页面是在带有 .Net 4.0 的 ASP.Net 中，但是在网站上有一些经典的 ASP 页面。IIS 在 Windows Server 2008 R2 64 位上以版本 7.5.7600.16385 运行。

到目前为止，我已尝试将应用程序池设置为在 32 位模式下运行，但这会导致其他区域出现错误，并且该站点将无法加载。我还能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:47:05.933

为了让它成为一个答案，你可能在这里做的是你以某种方式触发了一个不间断的循环。

例如，调用`Context.Server.Execute(strURL, st)`是触发再次调用的东西`Context.Server.Execute(strURL, st)`等等，所以你崩溃了你的池。

第二种情况，在您发表评论之后，如果您从同一页面调用它，在按下按钮并回发之后，那么很可能会从页面陷入死互斥锁，也许是会话，也许是其他东西。

# postgresql - 将 bytea 列转换为 OID，同时保留值

> ID：10139077
> 
> 赞同：5
> 
> 时间：2012-04-13T10:21:46.873
> 
> 标签：postgresql, types, casting, oid, bytea

我正在尝试将`bytea`列更改为具有类型`oid`并仍保留值。

我尝试过使用以下查询：

```
ALTER TABLE mytable ADD COLUMN mycol_tmp oid;
UPDATE mytable SET mycol_tmp = CAST(mycol as oid);
ALTER TABLE mytable DROP COLUMN mycol;
ALTER TABLE mytable RENAME mycol_tmp TO mycol; 
```

但这只是给了我错误：

```
ERROR: cannot cast type bytea to oid 
```

有什么方法可以实现我想要的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T10:51:49.220

Oid 类型的列只是对实际存储在系统的**pg_largeobject**表中的二进制内容的引用。在存储方面，一个 Oid 是一个 4 字节的整数。另一方面，bytea 类型的列*是*实际内容。

要将 bytea 转换为大对象，应使用大对象的类文件 API 创建一个新的大对象：lo_create() 以获取新的 OID，然后 lo_open() 处于写入模式，然后使用 lo_write() 或lowrite()，然后是 lo_close()。

仅靠演员阵容无法合理地做到这一点。

基本上，您需要用您选择的语言（至少一种支持大对象 API，包括 plpgsql）编写约 10 行代码来执行此转换。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-03T17:05:19.000

Postgres **9.4**为此添加了一个[内置函数](http://www.postgresql.org/docs/current/interactive/lo-funcs.html#LO-FUNCS-TABLE)：

```
lo_from_bytea(loid oid, string bytea) 
```

从[发行说明](http://www.postgresql.org/docs/current/interactive/release-9-4.html#AEN119691)：

> *   添加 SQL 函数以允许 [大对象读取/写入][12] 以任意偏移量 (Pavel Stehule)

对于**旧版本**，这比以前[发布](https://stackoverflow.com/a/16367919/939860)的更有效：

```
CREATE OR REPLACE FUNCTION blob_write(bytea)
  RETURNS oid AS
$func$
DECLARE
   loid oid := lo_create(0);
   lfd   int := lo_open(loid, 131072);  -- = 2^17 = x2000
   -- symbolic constant defined in the header file libpq/libpq-fs.h
   -- #define   INV_WRITE   0x00020000
BEGIN
   PERFORM lowrite(lfd, $1);
   PERFORM lo_close(lfd);
   RETURN loid;
END
$func$  LANGUAGE plpgsql VOLATILE STRICT; 
```

`STRICT`修饰符比手动处理 NULL 更智能。

[**SQL小提琴。**](http://sqlfiddle.com/#!15/1489f/1)

更多相关答案：

*   [了解从 bytea 到 oid 的转换](https://stackoverflow.com/questions/29433041/understanding-cast-from-bytea-to-oid/29435148#29435148)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-03T21:38:12.687

我认为最好的答案可以在[Grace Batumbya 的博客](http://gbatumbya.wordpress.com/2011/06/15/create-a-large-object-lo-from-binary-data-bytea-on-server-side/)中找到，*原文*：

> 算法很简单，获取二进制数据，如果为null，则返回null。否则创建一个大对象并在 lowrite 函数中，将二进制值传递给它，而不是文件的路径。
> 
> 该过程的代码如下。请注意，应该安装 lo_manage 软件包才能使其正常工作。

```
create or replace function blob_write(lbytea bytea)
   returns oid
   volatile
   language plpgsql as
$f$
   declare
      loid oid;
      lfd integer;
      lsize integer;
begin
   if(lbytea is null) then
      return null;
   end if;

   loid := lo_create(0);
   lfd := lo_open(loid,131072);
   lsize := lowrite(lfd,lbytea);
   perform lo_close(lfd);
   return loid;
end;
$f$;
CREATE CAST (bytea AS oid) WITH FUNCTION blob_write(bytea) AS ASSIGNMENT; 
```

> 所以现在下面的代码可以工作了： CREATE TABLE bytea_to_lo ( lo largeObj );

```
INSERT INTO bytea_to_lo VALUES ( DECODE('00AB','hex')); 
```

我已经尝试过了，它就像一个魅力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-07T05:25:45.130

我相信它已经晚了，但是对于将来遇到同样问题的任何人。

我也遇到了类似的问题，我在文本列中有旧数据，而不是 OID。当我尝试将这些数据与升级的应用程序一起使用时，我也得到了

我用这个线程的知识来解决这个问题。我强烈觉得任何偶然发现这个问题的人肯定想看看[这里](https://stackoverflow.com/a/29484326/1229355)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-28T08:58:53.710

为了解决这个问题，我成功地使用了 Grace Batumbya 博客中的 blob_write 程序：http: [//gbatumbya.wordpress.com/2011/06/](http://gbatumbya.wordpress.com/2011/06/)。

# salesforce - salesforce - 更新错误 - 工件

> ID：10139078
> 
> 赞同：0
> 
> 时间：2012-04-13T10:21:48.067
> 
> 标签：salesforce

每次打开 Eclipse 时我都会得到这个

找不到工件：http: [//developer.force.com/content.jar](http://developer.force.com/content.jar)。

我已经从 Eclipse 中卸载了 Force.com 插件。

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T17:02:43.417

如果 Force.com 透视图仍然存在（即使在卸载了该透视图的插件之后，Eclipse 似乎仍保留一个透视图列表）并设置为默认打开，我可能会看到这样的错误。尝试删除 Force.com 透视图。

1.  打开首选项
2.  一般->观点
3.  在可用视角列表中查找 Force.com
4.  删除它

您也可以尝试从您的工作区中清除任何 Force.com 项目。

和往常一样，安装新版本的 eclipse 可以治愈大多数疾病。

# android - android语言环境随机更改回默认值

> ID：10139079
> 
> 赞同：16
> 
> 时间：2012-04-13T10:21:48.297
> 
> 标签：android, locale

我有一个活动，在 onCreate 我从首选项加载语言并设置这样的语言环境：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    String lang = PreferenceManager.getDefaultSharedPreferences(this).getString("locale", "en");
    Locale newLocale = new Locale(lang);
    Locale.setDefault(newLocale);

    Configuration config = new Configuration();
    config.locale = newLocale;

    final Resources res = getResources();
    res.updateConfiguration(config, res.getDisplayMetrics());
} 
```

我也覆盖 onConfigurationChanged

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    String lang = PreferenceManager.getDefaultSharedPreferences(this).getString("locale", "en");
    Locale newLocale = new Locale(lang);
    Locale.setDefault(newLocale);

    Configuration config = new Configuration();
    config.locale = newLocale;

    final Resources res = getResources();
    res.updateConfiguration(config, res.getDisplayMetrics());
} 
```

我有一个带有 FragmentPagerAdapter 的 ViewPager 和 android 2.3.7 上的三个选项卡。问题是，有时在切换选项卡时，应用程序的区域设置会恢复为英语，因此从现在开始 UI 会混合使用多种语言。我总是在适配器的 getItem() 方法中为选项卡创建新片段。如果我旋转设备，则区域设置再次正确。

我还尝试将 android:configChanges="locale" 放在清单中，而不是覆盖 onConfigurationChanged()，但结果是一样的。

最糟糕的是，它不是 100% 可重现的，它只会发生几次，而且我也收到了来自用户的报告。一旦应用程序启动并且在切换几个选项卡后它不会更改区域设置，那么它将正确直到退出。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-03T08:58:43.197

一段时间后，我想出了一个办法。唯一对我有用的解决方案是始终在主要 Acitivity 的 onCreate()、每个 Fragment 的 onCreateView()、每个 BroadcastReceiver() 的 onReceive() 中（如果它加载一些资源）和每个服务的开头设置语言环境。为此，我在主要且唯一的活动中创建了一个静态方法 setLocale()。如果您有更多活动，则可以将其放置在自定义应用程序类中。

最后一件事。如果应用程序直接从 IDE 启动以进行调试，即使这有时也不起作用。别担心，如果它在设备上正常运行，它就可以工作（至少对我来说）。

```
public static void setLocale(Context context) {
    final String lang = PreferenceManager.getDefaultSharedPreferences(context).getString("locale", "en");
    final Locale newLocale = new Locale(lang);
    Locale.setDefault(newLocale);
    final Configuration config = new Configuration();
    config.locale = newLocale;

    final Resources res = context.getResources();
    res.updateConfiguration(config, res.getDisplayMetrics());
} 
```

# spring - Weblogic 10.3.3 与 HtmlUnit Spring webservice 冲突

> ID：10139087
> 
> 赞同：1
> 
> 时间：2012-04-13T10:22:32.980
> 
> 标签：spring, exception, weblogic, conflict, htmlunit

在 weblogic 10.3.3 应用服务器上启动和运行屏幕截图 web 服务时遇到了一些问题。我使用 Maven 来管理我的构建，HtmlUnit 用于我的抓取逻辑，一切都通过 spring 框架连接。这是我第一次尝试开发网络服务！

我的 pom.xml 中有 HtmlUnit 作为依赖项，如下所示：

```
 <dependency>
        <groupId>net.sourceforge.htmlunit</groupId>
        <artifactId>htmlunit</artifactId>
        <version>2.9</version>
        <scope>compile</scope>
    </dependency> 
```

...这是我的 spring-ws-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:p="http://www.springframework.org/schema/p" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:sws="http://www.springframework.org/schema/web-services"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/web-services http://www.springframework.org/schema/web-services/web-services-2.0.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <sws:annotation-driven />
        <context:component-scan base-package="com.x.ws"/>

        <bean id="addressLookupConfiguration" class="com.x.ws.z.utils.AddressLookupConfiguration"/>

        <sws:interceptors>
            <bean id="interceptor"
                class="org.springframework.ws.soap.server.endpoint.interceptor.PayloadValidatingInterceptor">
                <property name="schemas">
                    <list>
                        <value>/WEB-INF/AddressLookup.xsd</value>
                    </list>
                </property>
                <property name="validateRequest" value="true" />
                <property name="validateResponse" value="true" />
            </bean>

            <bean class="org.springframework.ws.soap.security.xwss.XwsSecurityInterceptor">
              <property name="policyConfiguration" value="/WEB-INF/securityPolicy.xml"/>
              <property name="callbackHandlers">
                  <list>
                      <ref bean="callbackHandler"/>
                  </list>
              </property>
          </bean>
        </sws:interceptors>

        <bean id="callbackHandler"
                class="com.x.ws.z.security.AddressLookupValidationCallbackHandler">
                <property name="users">
                    <props>
                        <prop key="x">x</prop>
                        <prop key="x">x</prop>
                        <prop key="x">x</prop>
                    </props>
                </property>
        </bean>
        <sws:dynamic-wsdl id="addressLookup" portTypeName="addressLookup"
            locationUri="http://bob/ws/z/x/addressLookup">
            <sws:xsd location="/WEB-INF/AddressLookup.xsd" />
        </sws:dynamic-wsdl>
</beans> 
```

我可以查看生成的 WSDL，一切看起来都很好，但是当我调用我的 web 服务时，我得到：

```
ERROR | 2012-04-12 18:20:01,026 | AddressLookupEndpoint.java:60 | java.lang.NoSuchMethodError: org/apache/commons/lang/StringUtils.startsWithIgnoreCase(Ljava/lang/String;Ljava/lang/String;)Z 
```

当我再次调用它时，以后每次我都会得到：

```
ERROR | 2012-04-12 18:20:25,676 | AddressLookupEndpoint.java:60 | java.lang.NoClassDefFoundError: com/gargoylesoftware/htmlunit/WebClient 
```

不知道为什么我第一次得到那个 NoSuchMethod 异常，但显然 weblogic 没有找到 HtmlUnit jar（我已经在 war 文件的 WEB-INF/lib 中确认了它）。

我认为 weblogic 端的某个 jar 存在冲突，所以我将以下内容添加到我的应用程序 weblogic.xml

```
<wls:container-descriptor>
    <wls:prefer-web-inf-classes>true</wls:prefer-web-inf-classes>
</wls:container-descriptor> 
```

但是，当我部署应用程序时，没有正确创建 WSDL。抛出以下异常：

```
ERROR | 2012-04-12 18:03:46,484 | FrameworkServlet.java:314 | Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping#0': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.ws.soap.server.endpoint.interceptor.DelegatingSmartSoapEndpointInterceptor#0': Cannot create inner bean 'interceptor' of type [org.springframework.ws.soap.server.endpoint.interceptor.PayloadValidatingInterceptor] while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'interceptor' defined in ServletContext resource [/WEB-INF/spring-ws-servlet.xml]: Invocation of init method failed; nested exception is org.springframework.xml.validation.XmlValidationException: Could not create Schema: SAX2 driver class weblogic.xml.jaxp.RegistryXMLReader does not implement XMLReader; nested exception is java.lang.ClassCastException: org.apache.xerces.jaxp.SAXParserFactoryImpl
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
<trunc>
        at weblogic.work.ExecuteThread.run(ExecuteThread.java:173)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.ws.soap.server.endpoint.interceptor.DelegatingSmartSoapEndpointInterceptor#0': Cannot create inner bean 'interceptor' of type [org.springframework.ws.soap.server.endpoint.interceptor.PayloadValidatingInterceptor] while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'interceptor' defined in ServletContext resource [/WEB-INF/spring-ws-servlet.xml]: Invocation of init method failed; nested exception is org.springframework.xml.validation.XmlValidationException: Could not create Schema: SAX2 driver class weblogic.xml.jaxp.RegistryXMLReader does not implement XMLReader; nested exception is java.lang.ClassCastException: org.apache.xerces.jaxp.SAXParserFactoryImpl
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:281)
<trunc>
        at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:183)
        ... 9 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'interceptor' defined in ServletContext resource [/WEB-INF/spring-ws-servlet.xml]: Invocation of init method failed; nested exception is org.springframework.xml.validation.XmlValidationException: Could not create Schema: SAX2 driver class weblogic.xml.jaxp.RegistryXMLReader does not implement XMLReader; nested exception is java.lang.ClassCastException: org.apache.xerces.jaxp.SAXParserFactoryImpl
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:270)
        ... 56 more
Caused by: org.springframework.xml.validation.XmlValidationException: Could not create Schema: SAX2 driver class weblogic.xml.jaxp.RegistryXMLReader does not implement XMLReader; nested exception is java.lang.ClassCastException: org.apache.xerces.jaxp.SAXParserFactoryImpl
        at org.springframework.xml.validation.Jaxp13ValidatorFactory.createValidator(Jaxp13ValidatorFactory.java:45)
        at org.springframework.xml.validation.XmlValidatorFactory.createValidator(XmlValidatorFactory.java:92)
<trunc>
        ... 9 more
Caused by: java.lang.ClassCastException: org.apache.xerces.jaxp.SAXParserFactoryImpl
        at org.xml.sax.helpers.XMLReaderFactory.loadClass(Unknown Source)
        at org.xml.sax.helpers.XMLReaderFactory.createXMLReader(Unknown Source)
        at org.springframework.xml.validation.SchemaLoaderUtils.loadSchema(SchemaLoaderUtils.java:70)
        at org.springframework.xml.validation.Jaxp13ValidatorFactory.createValidator(Jaxp13ValidatorFactory.java:41)
        ... 63 more
<Apr 12, 2012 6:03:46 PM IST> <Error> <HTTP> <BEA-101017> <[ServletContext@135824637[app:nieAddressLookup module:nieAddressLookup.war path:/ws/nieaddresslookup/v1 spec-version:null]] Root cause of ServletException.
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping#0': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.ws.soap.server.endpoint.interceptor.DelegatingSmartSoapEndpointInterceptor#0': Cannot create inner bean 'interceptor' of type [org.springframework.ws.soap.server.endpoint.interceptor.PayloadValidatingInterceptor] while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'interceptor' defined in ServletContext resource [/WEB-INF/spring-ws-servlet.xml]: Invocation of init method failed; nested exception is org.springframework.xml.validation.XmlValidationException: Could not create Schema: SAX2 driver class weblogic.xml.jaxp.RegistryXMLReader does not implement XMLReader; nested exception is java.lang.ClassCastException: org.apache.xerces.jaxp.SAXParserFactoryImpl
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
        Truncated. see log file for complete stacktrace

Caused By: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.ws.soap.server.endpoint.interceptor.DelegatingSmartSoapEndpointInterceptor#0': Cannot create inner bean 'interceptor' of type [org.springframework.ws.soap.server.endpoint.interceptor.PayloadValidatingInterceptor] while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'interceptor' defined in ServletContext resource [/WEB-INF/spring-ws-servlet.xml]: Invocation of init method failed; nested exception is org.springframework.xml.validation.XmlValidationException: Could not create Schema: SAX2 driver class weblogic.xml.jaxp.RegistryXMLReader does not implement XMLReader; nested exception is java.lang.ClassCastException: org.apache.xerces.jaxp.SAXParserFactoryImpl
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:281)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:120)
        at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:616)
        at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:148)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1003)
        Truncated. see log file for complete stacktrace

Caused By: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'interceptor' defined in ServletContext resource [/WEB-INF/spring-ws-servlet.xml]: Invocation of init method failed; nested exception is org.springframework.xml.validation.XmlValidationException: Could not create Schema: SAX2 driver class weblogic.xml.jaxp.RegistryXMLReader does not implement XMLReader; nested exception is java.lang.ClassCastException: org.apache.xerces.jaxp.SAXParserFactoryImpl
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:270)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:120)
        Truncated. see log file for complete stacktrace

Caused By: org.springframework.xml.validation.XmlValidationException: Could not create Schema: SAX2 driver class weblogic.xml.jaxp.RegistryXMLReader does not implement XMLReader; nested exception is java.lang.ClassCastException: org.apache.xerces.jaxp.SAXParserFactoryImpl
        at org.springframework.xml.validation.Jaxp13ValidatorFactory.createValidator(Jaxp13ValidatorFactory.java:45)
        at org.springframework.xml.validation.XmlValidatorFactory.createValidator(XmlValidatorFactory.java:92)
        at org.springframework.ws.server.endpoint.interceptor.AbstractValidatingInterceptor.afterPropertiesSet(AbstractValidatingInterceptor.java:153)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
        Truncated. see log file for complete stacktrace

Caused By: java.lang.ClassCastException: org.apache.xerces.jaxp.SAXParserFactoryImpl
        at org.xml.sax.helpers.XMLReaderFactory.loadClass(Unknown Source)
        at org.xml.sax.helpers.XMLReaderFactory.createXMLReader(Unknown Source)
        at org.springframework.xml.validation.SchemaLoaderUtils.loadSchema(SchemaLoaderUtils.java:70)
        at org.springframework.xml.validation.Jaxp13ValidatorFactory.createValidator(Jaxp13ValidatorFactory.java:41)
        at org.springframework.xml.validation.XmlValidatorFactory.createValidator(XmlValidatorFactory.java:92)
        Truncated. see log file for complete stacktrace
> 
```

我的应用程序中的一个 jar 似乎与 weblogic xml 解析器冲突。我从构建中删除了 xmlParserAPIs jar 并重新部署。现在我得到以下异常：

```
ERROR | 2012-04-13 11:10:51,316 | FrameworkServlet.java:314 | Context initialization failed
org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from ServletContext resource [/WEB-INF/spring-ws-servlet.xml]; nested exception is java.lang.NoClassDefFoundError: javax/xml/namespace/QName
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)
        at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
        at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:468)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
        at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
        at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:129)
        at javax.servlet.GenericServlet.init(GenericServlet.java:242)
        at weblogic.servlet.internal.StubSecurityHelper$ServletInitAction.run(StubSecurityHelper.java:283)
        at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
        at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)
        at weblogic.servlet.internal.StubSecurityHelper.createServlet(StubSecurityHelper.java:64)
        at weblogic.servlet.internal.StubLifecycleHelper.createOneInstance(StubLifecycleHelper.java:58)
        at weblogic.servlet.internal.StubLifecycleHelper.<init>(StubLifecycleHelper.java:48)
        at weblogic.servlet.internal.ServletStubImpl.prepareServlet(ServletStubImpl.java:539)
        at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:243)
        at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:184)
        at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.doIt(WebAppServletContext.java:3686)
        at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3650)
        at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
        at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)
        at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2268)
        at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2174)
        at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1446)
        at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
        at weblogic.work.ExecuteThread.run(ExecuteThread.java:173)
Caused by: java.lang.NoClassDefFoundError: javax/xml/namespace/QName
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:616)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
        at weblogic.utils.classloaders.GenericClassLoader.defineClass(GenericClassLoader.java:328)
        at weblogic.utils.classloaders.GenericClassLoader.findLocalClass(GenericClassLoader.java:285)
        at weblogic.utils.classloaders.GenericClassLoader.findClass(GenericClassLoader.java:253)
        at weblogic.utils.classloaders.ChangeAwareClassLoader.findClass(ChangeAwareClassLoader.java:56)
        at weblogic.utils.classloaders.ChangeAwareClassLoader.loadClass(ChangeAwareClassLoader.java:42)
        at org.apache.xerces.impl.xs.XMLSchemaValidator.reset(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.configurePipeline(Unknown Source)
        at org.apache.xerces.parsers.XIncludeAwareParserConfiguration.configurePipeline(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
        at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
        at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:93)
        at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
        at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
        at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
        at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
        at javax.servlet.GenericServlet.init(GenericServlet.java:241)
        at weblogic.servlet.internal.StubSecurityHelper$ServletInitAction.run(StubSecurityHelper.java:283)
        at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
        at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)
        at weblogic.servlet.internal.StubSecurityHelper.createServlet(StubSecurityHelper.java:64)
        at weblogic.servlet.internal.StubLifecycleHelper.createOneInstance(StubLifecycleHelper.java:58)
        at weblogic.servlet.internal.StubLifecycleHelper.<init>(StubLifecycleHelper.java:48)
        at weblogic.servlet.internal.ServletStubImpl.prepareServlet(ServletStubImpl.java:539)
        at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:243)
        at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:183)
        ... 9 more
<Apr 13, 2012 11:10:51 AM IST> <Error> <HTTP> <BEA-101017> <[ServletContext@135546353[app:nieAddressLookup module:nieAddressLookup.war path:/ws/nieaddresslookup/v1 spec-version:null]] Root cause of ServletException.
org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from ServletContext resource [/WEB-INF/spring-ws-servlet.xml]; nested exception is java.lang.NoClassDefFoundError: javax/xml/namespace/QName
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
        Truncated. see log file for complete stacktrace

Caused By: java.lang.NoClassDefFoundError: javax/xml/namespace/QName
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:616)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
        at weblogic.utils.classloaders.GenericClassLoader.defineClass(GenericClassLoader.java:328)
        at weblogic.utils.classloaders.GenericClassLoader.findLocalClass(GenericClassLoader.java:285)
        Truncated. see log file for complete stacktrace 
```

我看不出 weblogic 如何无法找到 QName。weblogic 盒子是我们生产的镜像，我们有很多其他的 web 服务在它上面运行良好，所以它应该被正确配置。

我会很感激一些关于如何让 weblogic 查看 HtmlUnit jar 的建议，这些问题真的很累。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T03:23:22.310

WL 10.3.3 在 .war 的 weblogic.xml 文件中引入了 prefer-application-packages 的使用，而不仅仅是在 .ear 的 weblogic-application.xml 中。

类似以下内容应该有助于解决未找到方法的问题。

```
<container-descriptor>
  <prefer-application-packages>
    <package-name>org.apache.commons.lang.*</package-name>
  </prefer-application-packages>
</container-descriptor> 
```

# iphone - 如何垂直对齐 UITextView 中的文本？

> ID：10139088
> 
> 赞同：3
> 
> 时间：2012-04-13T10:22:34.273
> 
> 标签：iphone, objective-c, xcode, ios5, uitextview

我有一个自定义单元格`UITextView`。我正在加载的文本长度`UITextView`从非常短变为非常长。所以请**不要说**“*使用标签代替*”。我想将我的单元格保持在相同的高度，但`UITextView`如果文本太长则使用垂直滚动。

我已经尝试过[**这里**](http://imagineric.ericd.net/2011/03/10/ios-vertical-aligning-text-in-a-uitextview/)的方法，但是由于我在我的`cellForRowAtIndexPath`事件中使用自定义单元初始化，所以观察者没有工作。我在`initWithStyle`函数下的单元格类中尝试了相同的方法，也没有工作。

你还有什么建议？或者我应该以不同的方式工作这个功能？任何帮助表示赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:27:33.343

用这个 -

```
CGSize textSize = [myText sizeWithFont:whateverFont constrainedToSize:myTextViewBox.frame.size lineBreakMode:UILineBreakModeWordWrap]; 
```

...然后找出 contentOffset 并在将 UITextView 添加到表时进行设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:35:31.050

在您的 TableView 数据源中 -

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSUInteger row = [indexPath row];

    static NSString *CellIdentifier = @"myCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    } else { // if there is already a subview, remove it
        while ([[cell.contentView subviews] count] > 0) {
            UIView *labelToClear = [[cell.contentView subviews] objectAtIndex:0];
            [labelToClear removeFromSuperview];
        }
    }

    UITextView *myTextView = // initialise your textView here, including setting its contentOffset

    [cell.contentView addSubview:myTextView];

    return cell;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-09T06:53:38.923

[这是](https://gist.github.com/toms972/8330377)我用来展示如何垂直对齐 UITextView的要点

# android - 如何在 android 应用程序中以编程方式启用和禁用 USB

> ID：10139090
> 
> 赞同：4
> 
> 时间：2012-04-13T10:22:41.967
> 
> 标签：android, usb

在我的应用程序中，我想以编程方式启用/禁用手机或标签（基于 Android）中的 USB 连接。我用谷歌搜索，但没有找到任何解决方案。如果可能的话，请给我一些想法。或提供一些有用的代码对于相同的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-04T12:51:50.793

我知道为时已晚，但对其他人有帮助。在 API 12 Android 3.1 或更高版本中，引入了一个 UsbManager 类，

检查此链接。[http://developer.android.com/reference/android/hardware/usb/UsbManager.html](http://developer.android.com/reference/android/hardware/usb/UsbManager.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:18:09.707

这在 Android SDK 中是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-09T18:09:49.740

这是可能的，但是您的应用程序应该拥有该设备，通过拥有该设备，您可以使用[DevicePolicyManager.addUserRestriction](https://developer.android.com/reference/android/app/admin/DevicePolicyManager#addUserRestriction(android.content.ComponentName,%2520java.lang.String))方法，如下所示：

```
DevicePolicyManager devicePolicyManager =
            (DevicePolicyManager) context.getSystemService(Context.DEVICE_POLICY_SERVICE);

if (devicePolicyManager != null && isDeviceOwnerApp(context)) {
   devicePolicyManager.addUserRestriction(componentName, UserManager.DISALLOW_USB_FILE_TRANSFER);
} 
```

# sql - Visual Studio 数据库项目生成的 SQL 文件需要在 SQL Server Management Studio 中启用 SQLCMD 模式

> ID：10139091
> 
> 赞同：2
> 
> 时间：2012-04-13T10:22:42.230
> 
> 标签：sql, sql-server-2008, database-project

Visual Studio 数据库项目生成的 SQL 脚本采用 SQLCMD 脚本形式。我不希望实施团队启用 SQLCMD 模式（或使用 SQLCMD 命令提示符）来运行脚本，但希望它作为简单的 SQL SCripts 运行。

我需要做什么？

感谢和问候

# c# - 我可以反序列化一个 XML 元素，它是 C# 中的数组数组吗？

> ID：10139094
> 
> 赞同：0
> 
> 时间：2012-04-13T10:22:48.860
> 
> 标签：c#, xml, deserialization

> **可能重复：**
> [反序列化 List<ArrayList> 对象](https://stackoverflow.com/questions/5016558/deserialize-listarraylist-object)

我真的很难将以下 XML 反序列化为 C# 对象；

```
<docRoot>
  ...
  <doc-sets>
     <docs>
      <atom:link rel="related" href="http://blah.com/1" title="abc" xmlns:atom="http://www.w3.org/2005/Atom" />
      <atom:link rel="related" href="http://blah.com/2" title="abc2" xmlns:atom="http://www.w3.org/2005/Atom" />
     </docs>
     <docs>
      <atom:link rel="related" href="http://blah.com/1" title="abc" xmlns:atom="http://www.w3.org/2005/Atom" />
      <atom:link rel="related" href="http://blah.com/2" title="abc2" xmlns:atom="http://www.w3.org/2005/Atom" />
     </docs>
    ....
  </doc-sets>
</docRoot 
```

我发现了一个非常相似的先前问题（[Deserialize List<ArrayList> object](https://stackoverflow.com/questions/5016558/deserialize-listarraylist-object)），但我也遇到了与原始海报相同的问题。

我可以创建一个对象，其中包含所有链接的组合列表，但我想保持有 2 个“文档”元素的事实，并为两者保持链接分开。

到目前为止我的代码；

```
 [XmlRoot("docRoot")]
public class DocRoot
{
    [XmlElement("doc-sets")]
    public List<Docs> DocSets;
}
public class Link
{
    [XmlAttribute("href")]
    public string Href;        
}
public class Docs
{
    [XmlArray("docs")]
    [XmlArrayItem("link", typeof(Link), Form = XmlSchemaForm.Qualified, Namespace = "http://www.w3.org/2005/Atom")]
    public List<Link> Links;

    public Docs()
    {
        Links = new List<Link>();
    }
} 
```

任何想法我如何保留包含自己的链接而不是一个组合的链接列表的 2 个“文档”元素？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:46:37.323

据我所知，您有一个文档集列表，其中包含一个文档列表和一个链接列表。然后你错过了类 DocSet：

```
[XmlRoot("docRoot")]
public class DocRoot
{
  [XmlElement("doc-sets")]
  public DocSet DocSets;
}

public class DocSet
{
  [XmlElement("docs")]
  public List<Doc> Docs;
}

public class Doc
{
  [XmlElement("link", Form = XmlSchemaForm.Qualified, Namespace = "http://www.w3.org/2005/Atom")]
  public List<Link> Links;
}

public class Link
{
  [XmlAttribute("href")]
  public string Href;        
} 
```

现在，在反序列化 XML 时，您将拥有一个文档列表，并且每个文档对象都有自己的链接。

**编辑：**
显然它是一个带有文档列表和链接列表的文档集元素。

# python - 在一行中创建和扩展列表

> ID：10139095
> 
> 赞同：3
> 
> 时间：2012-04-13T10:22:49.010
> 
> 标签：python, python-3.x

```
mylist=[]
mylist.append(7)
mylist.extend(range(9,12)) 
```

**这样的事情可以在 python3**的一行中完成吗？

我觉得这应该是微不足道的，但由于某种原因，我不记得也找不到如何做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T10:26:03.677

您可以使用这一衬里：

```
mylist = [7] + list(range(9,12)) 
```

它返回所需的列表：

```
[7, 9, 10, 11] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T10:29:45.707

您可以将任何您想要的内容添加到列表构造函数中。例如：

```
mylist = [7] 
```

或者：

```
mylist = list(range(9,12)) 
```

或者，将两者链接在一起：

```
mylist = [7] + list(range(9,12)) 
```

对于更复杂的结构，列表推导是可行的方法。例如：

```
mylist = [ (irow,icol) for irow in range(1,10) for irow in range(1,10) if i > j ] 
```

有关列表推导的更多信息，请访问：http: [//docs.python.org/tutorial/datastructures.html#list-comprehensions](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)

（**编辑**以反映问题的变化）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T10:46:29.613

如果您使用的是 Python 2.*，正如其他人所说

```
for lid in [7] + range(9,len(row)): 
```

将工作

如果使用 Python 3.*，因为 range 现在返回一个迭代器，您需要显式转换为列表

选项1：

```
for lid in [7] + list(range(9,len(row))): 
```

选项 2：

```
for lid in itertools.chain([7],range(9,len(row))): 
```

# ios5 - 12 月 31 日的 UIDatePicker 问题

> ID：10139096
> 
> 赞同：0
> 
> 时间：2012-04-13T10:22:53.120
> 
> 标签：ios5, nsdate, uidatepicker

这看起来很奇怪......我在 actionSheet 中使用 UidatePicker。单击按钮时，我会显示操作表。当我选择日期为 2012 年 12 月 31 日并单击完成时，我得到的日期是 2013 年 12 月 31 日。所有年份都在发生这种情况，并且仅在 12 月 31 日发生。我做错了什么吗？这是我的代码

```
-(void)dateButtonPressed:(id)sender //Method invoking the action sheet on button press
{
actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:nil cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];

CGRect pickerFrame = CGRectMake(0, 40, 0, 0);

closingdatePicker = [[UIDatePicker alloc] initWithFrame:pickerFrame];
closingdatePicker.tag=10;
closingdatePicker.datePickerMode=UIDatePickerModeDate;

pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
pickerToolbar.barStyle = UIBarStyleBlackTranslucent;
[pickerToolbar sizeToFit];

NSMutableArray *barItems = [[NSMutableArray alloc] init];

UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(DatePickerCancelClick:)];
[barItems addObject:cancelBtn];

UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
[barItems addObject:flexSpace];

UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(DatePickerDoneClick:)];
[barItems addObject:doneBtn];

[pickerToolbar setItems:barItems animated:YES];

[actionSheet addSubview:pickerToolbar];
[actionSheet addSubview:closingdatePicker];
[actionSheet showInView:self.view];
[closingdatePicker release];
[actionSheet setBounds:CGRectMake(0,0,320, 464)];
[actionSheet release];
}

- (void)DatePickerDoneClick:(id)sender{    //doen click and my date is stored in selectedDate
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"MM/dd/YYYY"];

//Gets our picker
UIDatePicker *ourDatePicker = (UIDatePicker *) [actionSheet viewWithTag:10];

NSDate *selectedDate = [ourDatePicker date];

closingDate.text=[NSString stringWithFormat:@"%@",[formatter stringFromDate:selectedDate]];

[actionSheet dismissWithClickedButtonIndex:0 animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T10:29:17.780

只需使用**yyyy**而不是**YYYY**这在 dateformater 中会发生一段时间

# javascript - 纯粹用 Javascript 制作网络爬虫和链接树

> ID：10139100
> 
> 赞同：0
> 
> 时间：2012-04-13T10:23:18.440
> 
> 标签：javascript, web, cross-domain, web-crawler

在我的一项任务中，我必须制作一个纯粹使用 JavaScript 的网络爬虫。这意味着，输入将是一个 URL，输出将是从该页面开始的所有链接的树。我使用了使用 YQL的插件[https://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax/ ，它可以获取网站上的所有链接。](https://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax/)（就像我为 Google 的主页所做的那样，[http://deepakpathak.in/langoor/linkfinder.html](http://deepakpathak.in/langoor/linkfinder.html)）。但是，我无法从中制作树形结构。有没有其他更简单的方法来制作给定网站的链接树，并且在 Javascript 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:33:33.177

你没有提到你想做什么样的树，输出应该是某种网站上的树列表组件还是你想把它放在数据库中？

但是，您可以使用普通的旧 javascript 对象和数组来创建[树](http://en.wikipedia.org/wiki/Tree_%28data_structure%29)（查找树数据结构上的任何注释以了解它们是如何工作的，有很多方法可以表示它们）。为了让你开始，一个基本的树看起来像这样（带有一个`createNode`函数）：

```
var createNode = function(content) {
    return {
        'nodes': [], // children are put here
        'content': content // puts the content here
    };
};

var treeroot = createNode();
    // create the root node of the tree
    // content is undefined

treeroot.nodes.push(createNode(myTreeNode)); 
    // accesses the nodes array and pushes a new node into the root node
    // content in that node will be whatever "myTreeNode" is 
```

您必须自己编写遍历算法，因为 javascript 没有任何函数来处理树。或者使用 DOM 本身创建树（因为它是树数据结构）。

# c# - 如何从json中获取数据？

> ID：10139109
> 
> 赞同：-2
> 
> 时间：2012-04-13T10:24:04.637
> 
> 标签：c#, javascript, jquery, json

我有控制器

```
var subCategories = m_listsRepository.GetSubCategories(id);
var items = subCategories.Select(x=>new MyDataNameAndId(){Id = x.Value, Name = x.Text});
return Json(items); 
```

和阿贾克斯：

```
$.ajax({
        url: urlString,
        type: 'POST',
        data: JSON.stringify({ id: districtId }),
        dataType: 'json',
        contentType: 'application/json',
        cache: 'false',
        success: function (data) {
            alert("success");
            $.each(data, function (key, MyDataNameAndId) {
                alert(key);//== 0
                alert(MyDataNameAndId);// then throws
                $('select#ChangeOnsubCategoryId').append('<option value="0">Select One</option>');

                $.each(MyDataNameAndId, function (index, manager) {
                    $('select#ChangeOnsubCategoryId').append(
                            '<option value="' + manager.Id + '">'
                            + manager.Name +
                            '</option>');
                });
            });
        }
    }); 
```

我究竟做错了什么？

**更新：** 控制器工作。警报（“成功”）；- 是显示警报（键）；- 显示 0 警报（MyDataNameAndId）；- 不显示。我需要在 select#ChangeOnsubCategoryId 的“select#ChangeOnsubCategoryId”选项中生成

这是怎么做的？这个明白吗？

我不知道如何显示通过 json 的内容

**json字符串：**

```
[{"Id":"53","Name":"футбол"}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:04:11.523

从您写出的 JSON 输出中，我会像这样重写它：

```
$.ajax({
    url: urlString,
    type: 'POST',
    data: JSON.stringify({ id: districtId }),
    dataType: 'json',
    contentType: 'application/json',
    cache: 'false',
    success: function (data) {
        if (!data) return; // if data is empty, return

        var $select = $('select#ChangeOnsubCategoryId');
          // put the select element in a variable so you don't need to
          // jquery select it again

        $select.append('<option value="0">Select One</option>');
          // I guess you first want to add a "select one" option

        // data should be an array e.g. [{"Id":"53","Name":"футбол"}]
        $.each(data, function (key, manager) {
           // for each "manager" in the "data" array

           // manager should be an object in the data
           // array e.g. {"Id":"53","Name":"футбол"}
           // no need to for each it

           $select.append(
                    '<option value="' + manager.Id + '">'
                    + manager.Name +
                    '</option>');
             // add the manager in the select box
        });
    }
}); 
```

我假设的东西。使用 javascript 调试器（例如 Chrome 中的开发人员工具或 Firefox 中的 Firebug）来检查您从 ajax 调用中获得的值。将断点放在函数中，然后观察数据变成了什么（在这种情况下，它应该是一个包含 Id 和 Name 的对象数组）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:08:08.107

```
$.each(MyDataNameAndId, function (index, manager) {
                $('select#ChangeOnsubCategoryId').append(
                        '<option value="' + manager.Id + '">'
                        + manager.Name +
                        '</option>');
            }); 
```

应该只是

```
$('select#ChangeOnsubCategoryId').append(
         '<option value="' + MyDataNameAndId.Id + '">'
         + MyDataNameAndId.Name +
         '</option>'); 
```

示例代码毫无例外地对我有用，这让我相信返回的 JSON 有问题。检查它是否实际返回您发布的字符串。

# javascript - 有没有办法从使用 json 从数据库发送到 javascript 的 dateTime 对象中仅获取月份或年份？

> ID：10139112
> 
> 赞同：0
> 
> 时间：2012-04-13T10:24:22.453
> 
> 标签：javascript, .net, json

我有一个包含 2 个 dateTime 列“开始日期”和“结束日期”的表，我已经使用 json 将整个表传递给 javascript，当我访问 json 表中的特定日期时获得的数据格式是 dd/mm/ yyyy（以及默认时间），我只需要从javascript中的这种格式获取日期，即dd和月份，即mm

有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:25:38.933

日期：`the_string.split('/')[0]`

月：`the_string.split('/')[1]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:29:45.597

您可以使用正则表达式来解析数据。如果您在示例内容方面需要帮助，请告诉我。

# django - 如何在 django 的自定义表单集的 clean 方法中将“DELETE”参数重置为 False

> ID：10139114
> 
> 赞同：1
> 
> 时间：2012-04-13T10:24:35.897
> 
> 标签：django, django-forms, inline-formset

我在其中使用自定义清理方法制作了自定义表单集。它看起来像：

```
class MyFormsetBase(forms.models.BaseModelFormSet):
    def __init__(self, *args, **kwargs):
        ....
        super(AdvOrderBidFormsetBase, self).__init__(*args, **kwargs)

    def clean(self):
        ....
        if error:
            raise forms.ValidationError('some validation error') 
```

当我从表单集中删除一些表单（参数错误）并按下提交按钮（表单具有 DELETE 字段值 == True）时，我进入`error = True`了我的干净方法，所以我得到了 ValidationError 并返回到表单窗口。但是表单中的 DELETE 字段值不会重置。下次我提交表单时，我会得到相同的 ValidationError。那么，我可以在我的自定义清理方法中以某种方式更改 DELETE 字段的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-12T14:29:30.727

尽管这个问题很老，但我最近遇到了同样的问题。我可以通过调整 form.data 字典来重置 DELETE 字段。不是一个漂亮的解决方案，但它有效：

```
class MyFormset(BaseModelFormSet):
    def clean(self):
        for form in self.deleted_forms:
            #iterating over only the forms marked for being delete
            if <YOUR_CONDITION>:
                form.data = form.data.copy() # form.data is immutable unless we copy it
                form.data.pop('{prefix}-DELETE'.format(form.prefix)) # Delete the correct 'DELETE' field from the POST data
                form.cleaned_data.pop('DELETE') # Also remove the field from cleaned data as the formset checks this field for deletion 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:43:54.447

你在你的 clean 方法中究竟返回了什么？

如果“DELETE 字段值”属性（或您使用此短语表示的任何内容）仍包含在已清理的数据中，它将持续存在。

要删除它，请将其从已清理的数据中删除。

这里报告了类似的问题，也许这有助于[在表单验证错误中清除 Django 表单字段？](https://stackoverflow.com/questions/2353732/clearing-django-form-fields-on-form-validation-error)

# smartgwt - SmartGWT：复选框树 - 获取选定复选框值的正确方法

> ID：10139129
> 
> 赞同：1
> 
> 时间：2012-04-13T10:26:02.163
> 
> 标签：smartgwt

SmartGWT 具有 TreeGrid 对象的以下属性：

```
employeeTreeGrid.setSelectionAppearance(SelectionAppearance.CHECKBOX); 
```

默认情况下，这会为每个节点（包括根节点）添加复选框。（只是让自己清楚。）

另外，我知道这个类似的已解决问题： [GWT tree with checkbox:How to get all checked tree items?](https://stackoverflow.com/questions/7526725/gwt-tree-with-checkboxhow-to-get-all-checked-tree-items)

但是，我不寻求这种解决方案。我正在寻找的是一种更有效的方法，我不必遍历 1000 个项目。

如果可能的话，有没有办法使用我现在使用的小部件来做到这一点？如果没有，有没有其他方法，使用其他小部件？

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:42:20.613

我认为当您使用`SelectionAppearance.CHECKBOX`时，您会告诉网格所选记录由复选框字段值标记。所以每次你检查一个你选择一个记录。`getSelection()`您可以通过任一方法或`getSelectedRecords(boolean)`由于前一个方法的弃用而获得一组选定的记录。您可以查看[smartgwt 展示的这个示例的](http://www.smartclient.com/smartgwt/showcase/#grid_interaction_checkboxselect)代码。

# client-server - 客户端到服务器连接只发送不接收

> ID：10139133
> 
> 赞同：0
> 
> 时间：2012-04-13T10:26:14.130
> 
> 标签：client-server, send, socks

这是我的情况，我有一个服务器正在监听连接，还有一个我现在正在编程的客户端。客户端没有从服务器接收任何内容，但它必须每 3 分钟发送一次状态更新。

我目前有以下内容：

```
 WSAStartup(0x101,&ws);
    sock = socket(AF_INET,SOCK_STREAM,0);
    sa.sin_family = AF_INET;
    sa.sin_port = htons(PORT_NET);
    sa.sin_addr.s_addr = inet_addr("127.0.0.1"); 
    connect(sock,(SOCKADDR*)&sa,sizeof(sa));
    send(sock,(const char*)buffer,128,NULL); 
```

我的方法应该如何？我可以避免循环recv吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:46:49.670

这取决于您想要的行为和程序结构。默认情况下，套接字将阻止任何读取或写入操作，这意味着如果您尝试让服务器的主线程轮询连接，您最终将“冻结”3分钟或直到客户端关闭联系。

最简单的功能解决方案（无多线程）是将套接字设置为非阻塞，并在主线程中轮询。听起来你想避免这样做。

最明显的解决方法是为每个连接创建一个专用线程，以及主侦听器套接字。您的服务器侦听传入连接并为它创建的每个流套接字生成一个线程。然后每个连接线程在它的套接字上阻塞，直到它接收到数据，然后自己处理它或者将它分流到一个共享队列中。这是一个庞大而复杂的解决方案——需要打开和关闭的多个线程，需要保护的共享资源。

另一种选择是将套接字设置为非阻塞（在 win32 下使用 setsockopt 设置超时，在 *nix 下将 O_NONBLOCK 标志传递给它）。这样，如果没有可读取的数据，它将返回控制权。然而，这意味着您需要以合理的时间间隔轮询套接字（“合理”完全取决于您，以及您需要服务器多快对新数据采取行动。）

就个人而言，对于您所描述的轻量级用途，我将使用上述组合：一个单独的专用线程，每隔几秒轮询一个套接字（或一组非阻塞套接字），在两者之间休眠，然后简单地将数据推送到主线程在其主循环期间执行的队列。

有很多方法可以使异步程序陷入混乱，因此最好保持简单并使其正常工作，直到您对控制流感到满意为止。

# c++ - MySQL 连接器/C++ 示例代码不起作用

> ID：10139140
> 
> 赞同：0
> 
> 时间：2012-04-13T10:26:49.490
> 
> 标签：c++, mysql

您好，我刚刚开始在应用发布|Win3 中使用 C++ MySql 连接器

我的错误：

> 警告 1 警告 C4627: '#include': 查找预编译头时跳过使用 c:\Documents and Settings...
> 
> 警告 2 警告 C4627: '#include': 查找预编译头时跳过使用 c:\Documents and Settings...
> 
> 错误 3 致命错误 C1083：无法打开包含文件：'boost/variant.hpp'：没有这样的文件或目录 C:\Program Files\MySQL\MySQL Connector C++ 1.1.0\include\cppconn\connection.h 29 lacznik

```
#include <cstdlib>
#include <iostream>
#include "stdafx.h"
#include "mysql_connection.h"

#include <cppconn/driver.h>
#include <cppconn/exception.h>
#include <cppconn/resultset.h>
#include <cppconn/statement.h>

using namespace std;

int main(void)
    {

cout << endl;
cout << "Running 'SELECT 'Hello World!' »
   AS _message'..." << endl;

try {
  sql::Driver *driver;
  sql::Connection *con;
  sql::Statement *stmt;
  sql::ResultSet *res;

  /* Create a connection */
  driver = get_driver_instance();
  con = driver->connect("tcp://127.0.0.1:3306", "root", "root");
  /* Connect to the MySQL test database */
  con->setSchema("test");

  stmt = con->createStatement();
  res = stmt->executeQuery("SELECT 'Hello World!' AS _message");
  while (res->next()) {
    cout << "\t... MySQL replies: ";
    /* Access column data by alias or column name */
    cout << res->getString("_message") << endl;
    cout << "\t... MySQL says it again: ";
    /* Access column fata by numeric offset, 1 is the first column */
    cout << res->getString(1) << endl;
  }
  delete res;
  delete stmt;
  delete con;

} catch (sql::SQLException &e) {
  cout << "# ERR: SQLException in " << __FILE__;
  cout << "(" << __FUNCTION__ << ") on line " »
     << __LINE__ << endl;
  cout << "# ERR: " << e.what();
  cout << " (MySQL error code: " << e.getErrorCode();
  cout << ", SQLState: " << e.getSQLState() << " )" << endl;
}

cout << endl;

return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:35:41.010

> 警告 1 警告 C4627: '#include': 查找预编译头时跳过使用 c:\Documents and Settings...

表示“预编译头”包括

```
#include "stdafx.h" 
```

应该是包含的第一个标题。

# android - 对数据库数据进行排序并在列表视图中显示

> ID：10139141
> 
> 赞同：4
> 
> 时间：2012-04-13T10:26:50.810
> 
> 标签：android, sqlite, cursor

我使用从我的数据库中获取数据

```
cursor = db.query("WebLeadMaster", select, "condition1="+conditionVal1+
" and condition2="+ConditionVal2,null, null, null, "RegistrationTime DESC"); 
```

我可以在光标中获取数据。要显示数据，我使用以下代码：

```
 SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this, 
            R.layout.resultleadlookup, cursor, columns, to); 
    mAdapter.notifyDataSetChanged();
    lstResult.setAdapter(mAdapter); 
```

所以，我不能修改游标的内容。排序查询具有条件“RegistrationTime”，它是一个***字符串数据类型。***如下图所示，它的排序格式不正确。（不根据日期时间）。

我应该在我的代码中进行哪些更改，以便它可以根据日期时间正确排序？

![预期产出和实际产出](../Images/c88653cdeb11b6d3fec8760124298d86.png)

如果我改变我的数据库查询，看起来像

```
cursor = db.query("WebLeadMaster", select, "condition1="+conditionVal1+
" and condition2="+ConditionVal2,null, null, null, null); 
```

它给出了一个升序。我只想要它的降序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:47:32.370

最简单的建议是以不同的格式（但仍保存为字符串）将日期保存到数据库中。如果您将数据保存为 SQLite 的默认日期格式（YYYY-MM-DD HH:NN:SS），您可以轻松地对日期进行排序。

要以您的格式显示日期，您只需将日期重新格式化为正确的格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T10:48:23.967

好吧，我改变了我的表结构。我向其中添加了另一个字段“_id”。将属性设置为 **AUTO INCREMENT**，并根据**_id**字段对列表进行排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T10:46:06.600

如果您使用 ORM，则可以按时间戳对数据进行排序。ORM 使从数据库中的数据插入和数据检索更容易。您必须在项目中包含 jar 文件才能使用 ORM ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T11:42:02.500

由于 SQLite 没有日期时间类型，将日期类型存储为 SQLite（EPOCH 时间）中的 LONG/INT/NUMERIC 会更容易排序

然后添加`ViewBinder`到`Adapter`

```
 /*field in activity/fragment*/
        final static SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); //or other format that you wana to show in ListView
        ...
        mAdapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {

            @Override
            public boolean setViewValue(View view, Cursor cursor,
                    int columnIndex) {
                final int id = view.getId();
                switch (id) {
                    case R.id.id_of_textview_with_date_data:
                        final Calendar cal = Calendar.getInstance();
                        cal.setTimeInMillis(cursor.getLong(columnIndex));
                        ((TextView) view).setText(sdf.format(cal.getTime()));
                        return true;
                }
                return false;
            }
        }); 
```

...或作为 dennisg 指出将其存储为 STRING/VARCHAR**编辑**：以“yyyy-MM-dd HH:mm:ss”格式

# iphone - 将图像上传到 iphone 中的 flickr 时出错（Xcode 4.2）

> ID：10139143
> 
> 赞同：1
> 
> 时间：2012-04-13T10:27:10.060
> 
> 标签：iphone, objective-c, ios

在我的应用程序中，我想将图像分享到 flickr。我使用了 flickr 提供的库。授权后我调用以下方法

```
[self.flickrRequest uploadImageStream:[NSInputStream inputStreamWithData:JPEGData] suggestedFilename:@"Pic 2 Print" MIMEType:@"image/jpeg" arguments:[NSDictionary dictionaryWithObjectsAndKeys:@"0", @"is_public", nil]]; 
```

但我得到这个错误

> kUploadImageStep 错误 Domain=org.lukhnos.ObjectiveFlickr 代码=2147418115 “操作无法完成。（org.lukhnos.ObjectiveFlickr 错误 2147418115。）

如果有人知道，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T13:03:14.513

对我来说，解决方案是使用 lib 使用的默认用户代理。似乎 Flickr 正在阻止来自 iOS 的连接。当我放置一个不同的用户代理时，`HTTPRequest.userAgent = @"hehe";`我得到了它的工作。

# javascript - javascript：如何管理没有 ID 的 div

> ID：10139145
> 
> 赞同：1
> 
> 时间：2012-04-13T10:27:11.103
> 
> 标签：javascript, html

我的页面充满了 php 生成的内容，这些内容拆分为具有相同类但没有 id 的 div。我想展示一些允许我管理、更改和删除 div 的按钮；按钮应该能够更改类、删除 div 并选择 div 的内容。我怎样才能做到这一点？有没有办法将按钮的 onclick 操作设置为某种东西，比如 ... onclick="changetheclass(this)" 这实际上会改变包含此按钮的 div 的类？

伙计，我觉得我在这里没有任何意义:(有人明白我在说什么吗？如果是这样，有没有可能这样做？提前谢谢！:)

编辑：这是 div 之一，因此您可以理解我在说什么：

```
 <div class="box"><p>
    this is the content of the div
    <button onclick="change_the_class(this_div_or_something)">click here to change the class of the div</a>
    <button onclick="select_the_content(this_div_or_something)">click here to change the class of the div</a>
    <button onclick="delete_the_whole_div(this_div_or_something)">click here to change the class of the div</a>
</p></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:40:33.940

这是你要找的吗？？

```
<html>
    <head>
        <script type="text/javascript">
           function changeClass(elm) {
               elm.parentNode.className ='newcss';
           }

           function deleteDiv(elm) {
               var par = elm.parentNode;
               var gran = par.parentNode;
               gran.removeChild(par);
           }
        </script>
    </head>
    <body>
        <div class='test'>
            Hello
            <button onclick="javascript:changeClass(this);" value="Change CSS">CSS</button>
            <button onclick="javascript:deleteDiv(this);" value="Change CSS">Delete</button>
        </div>
        <div class='test'>
            Hello
            <button onclick="javascript:changeClass(this);" value="Change CSS">CSS</button>
            <button onclick="javascript:deleteDiv(this);" value="Change CSS">Delete</button>
        </div>
        <div class='test'>
            Hello
            <button onclick="javascript:changeClass(this);" value="Change CSS">CSS</button>
            <button onclick="javascript:deleteDiv(this);" value="Change CSS">Delete</button>
        </div>
        <div class='test'>
            Hello
            <button onclick="javascript:changeClass(this);" value="Change CSS">CSS</button>
            <button onclick="javascript:deleteDiv(this);" value="Change CSS">Delete</button>
        </div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:30:15.737

在 JS 中，您可以使用[querySelectorAll](http://caniuse.com/#search=queryse)：

```
//get all divs with class "myDiv"
var divs = document.querySelectorAll('div.myDiv');

//for each of the gathered divs, do something with it
for(var i=0; i< divs.length;i++){
    var aDiv = divs[i];

    //"aDiv" is a div in the collection of matched divs
    //you can do anything with it: add buttons etc.

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T10:36:10.633

首先远离`onclick="something"`-inline [JavaScript](http://robertnyman.com/2008/11/20/why-inline-css-and-javascript-code-is-such-a-bad-thing/)。那么是的，你仍然可以在没有 id 的情况下做你想做的事情。

```
var divs = document.getElementsByTagName('div'),
    result = [],
    len = divs.length,
    i = 0,
    aLink;

for(; i < len; i++){
    // update the condition if there can be more than one class name as this assume a single class name
    if (divs[i].className == 'myClassName') result.push(divs[i]);
}

len = result.length;
i = 0;

for (; i < len; i++) {
aLink = document.createElement('a');
aLink.innerHTML = 'Edit';
aLink._parent = result[i]; // store a reference to the parent div
aLink.href = '#';
aLink.onclick = function(ev) {
ev.preventDefault();
// do your edit stuff here, ev.target._parent contain the targetted div
};
result[i].appendChild(aLink);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-13T10:30:08.840

```
$('div.my-class').each( function( index, element ){
   var div = $( element ); // not sure if this is needed

   // add the buttons, e.g. via div.html('');

   // add the buttons' click handlers    
}); 
```

# matlab - 使用 cellfun 对脚本进行矢量化

> ID：10139146
> 
> 赞同：0
> 
> 时间：2012-04-13T10:27:13.297
> 
> 标签：matlab, loops, cell

我的目标是将各种文件夹和文本文件中的数据导入matlab。

```
clear all
main_folder = 'E:\data';
    %Directory of data
TopFolder = dir(main_folder);
    %exclude the first two cells as they are just pointers. 
TopFolder = TopFolder(3:end);
TopFolder = struct2cell(TopFolder);
Name1 = TopFolder(1,:);
    %obtain the name of each folder
dirListing = cellfun(@(x)dir(fullfile(main_folder,x,'*.txt')),Name1,'un',0);
Variables = cellfun(@(x)struct2cell(x),dirListing,'un',0);
FilesToRead = cellfun(@(x)x(1,:),Variables,'un',0);
    %obtain the name of each text file in each folder 
```

这提供了“main_folder”中每个文件夹中每个文本文件的名称。我现在尝试在不使用 for 循环的情况下加载数据（我意识到 for 循环有时会更快，但我的目标是紧凑的脚本）。

我将与 for 循环一起使用的方法是：

```
for k = 1:length(FilesToRead);
    filename{k} = cellfun(@(x)fullfile(main_folder,Name{k},x),FilesToRead{k},'un',0);
    fid{k} = cellfun(@(x)fopen(x),filename{k},'un',0);
    C{k} = cellfun(@(x)textscan(x,'%f'),fid{k},'un',0);
end 
```

有没有一种完全不使用循环的方法？像 cellfun 中的 cellfun 之类的东西可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:56:10.857

是的。这将是非常可怕的，因为 C 依赖于 fid 依赖于文件名。基本思想将是：

```
deal(feval(@(filenames_fids){filenames_fids{1}, filenames_fids{2}, ...
  <compute C>}, feval(@(filenames){filenames, <compute fid>}, ...
  <compute filenames>))); 
```

让我们从计算文件名开始：

```
arrayfun(@(x)cellfun(@(x)fullfile(main_folder,Name{k},x),FilesToRead{k},...
  'un',0), 1:length(FilesToRead), 'uniformoutput', 0); 
```

这将为我们提供一个 K×1 的文件名元胞数组。现在我们可以用它来计算fids：

```
{filenames, arrayfun(@(k)cellfun(@(x)fopen(x),filenames{k},'un',0), ...
  1:length(FilesToRead), 'uniformoutput', 0)}; 
```

我们将 fid 与文件名粘贴在一个 K×2 单元数组中，准备传递以计算我们的最终输出：

```
{filenames_fids{1}, filenames_fids{2}, ...
  arrayfun(@(k)cellfun(@(x)textscan(x,'%f'), ...
  filenames_fid{2}{k},'un',0), 1:length(FilesToRead), 'uniformoutput', 0)} 
```

然后我们将最终的单元格数组放入交易中，以便结果以三个不同的变量结束。

```
[filenames fid C] = deal(feval(@(filenames_fids){filenames_fids{1}, ...
  filenames_fids{2}, arrayfun(@(k)cellfun(@(x)textscan(x,'%f'), ...
  filenames_fid{2}{k},'un',0), 1:length(FilesToRead), 'uniformoutput', 0)}, ...
  feval(@(filenames){filenames, arrayfun(@(k)cellfun(@(x)fopen(x), ...
  filenames{k},'un',0), 1:length(FilesToRead), 'uniformoutput', 0)}, ...
  arrayfun(@(x)cellfun(@(x)fullfile(main_folder,Name{k},x),FilesToRead{k}, ...
  'un',0), 1:length(FilesToRead), 'uniformoutput', 0)))); 
```

Errm...如果您不介意保留`filenames`and ，可能有更好的方法来做到这一点`fid`。也许使用 cellfun 代替 arrayfun 也可以使它更简洁，但是我对 cellfun 不是很好，所以这就是我想出的。我认为`for`无论如何循环版本更紧凑！（另外，我还没有实际测试过。它可能需要一些调试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T13:28:13.670

```
folder = 'E:\data';
files = dir(fullfile(folder, '*.txt'));
full_names = strcat(folder, filesep, {files.name});
fids = cellfun(@(x) fopen(x, 'r'), full_names);
c = arrayfun(@(x) textscan(x, '%f'), fids);  % load data here
res = arrayfun(@(x) fclose(x), fids);
assert(all(res == 0), 'error in closing files'); 
```

但如果数据是 csv 格式，它会更容易：

```
folder = 'E:\data';
files = dir(fullfile(folder, '*.txt'));
full_names = strcat(folder, filesep, {files.name});
c = cellfun(@(x) csvread(x), full_names,  'UniformOutput', false); 
```

现在所有数据都存储在`c`

# php - 是否可以更改 ajax 结果的内容/mime 类型？

> ID：10139156
> 
> 赞同：0
> 
> 时间：2012-04-13T10:27:46.847
> 
> 标签：php, jquery, ajax, content-type, output-buffering

我正在使用输出缓冲通过 PHP 使用代理处理程序和 readfile() 从网络共享中获取 pdf 文件。我通过指定内容/mime 类型在新的浏览器选项卡中显示它。（http://stackoverflow.com/questions/10121903/php-scandir-explorer-view-to-display-network-share-files-file-via-wamp-wor）

我在整个应用程序的其余部分都使用 jQuery / Ajax。是否可以使用 ajax 将原始 PDF 内容注入 div 标签但使其正确显示？当前，所需的标头 (header("Content-type: application/pdf")) 似乎已被 ajax 请求剥离，并且显示为乱码。

编辑：谢谢大家的评论和回答。我会更详细地回复并很快审查我的选择。

@ Murtaza - 上面的问题链接显示了我是如何获得原始 PDF 的，此外我还使用 $.ajax 将请求发送到 div 标签并使用了 iframe，当我将其呈现为 src= ，而不是阿贾克斯。

@Brad Christie / Quentin - 也许我可以使用 iFrame 或 Modal 来显示内容？我已经测试了 pdfobject.js，它很好，但需要一个链接文件（例如 /files/file.pdf）。听起来很可怕，但是如果我使用 PHP 将临时文件写入 Web 根目录然后显示呢？如果有人使用过，我认为唯一有用的可能是 jQuery PDF 库？

@ Ignacio - 我确实使用以下代码尝试过这个。它使胡言乱语。我可能做错了，因为我没有使用 iFrame 的经验。// 其中 $filename 是原始 PDF 数据 ">

詹姆士。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:54:52.940

您不能“将原始 PDF 内容注入 div 标签”；PDF 文件不是 HTML，必须通过 PDF 阅读器插件。尝试将其作为 iframe 的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:55:19.803

> 是否可以使用 ajax 将原始 PDF 内容注入 div 标签但使其正确显示？

并不真地。不过，您也许可以制作一些[pdf.js](http://andreasgal.com/2011/06/15/pdf-js/)的东西。

> 目前所需的标头 (header("Content-type: application/pdf")) 似乎被 ajax 请求剥离

无论您使用何种方式插入数据，都明确地将其视为文本或 HTML，而不是 PDF。这是您的代码忽略了内容类型。

# jquery - 两列手风琴菜单的显示问题

> ID：10139157
> 
> 赞同：0
> 
> 时间：2012-04-13T10:27:52.517
> 
> 标签：jquery, html, css, menu

我的代码：[JSFiddle 示例](http://jsfiddle.net/hwzpy/53/)

如您所见，当您单击一列中的父链接时，代码会移动另一列，如果您将“位置”属性设置为“绝对”，则该列不会移动，但底部的红色框不会别动了……

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:31:37.387

您可以通过使用列`float: left`而不是`display: inline-block`. 请注意，这将要求您`clear`在底部浮动。

[小提琴](http://jsfiddle.net/s6c7s/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:43:29.740

这是您的解决方案：http: [//jsfiddle.net/jh5np/16/](http://jsfiddle.net/jh5np/16/)

# css - 如何避免放置在不透明 DIV 中的 img 不透明？

> ID：10139160
> 
> 赞同：1
> 
> 时间：2012-04-13T10:28:04.687
> 
> 标签：css

我有一个带有 CSS 样式背景颜色和不透明度 0.7 的 DIV。完美运行。但是......在那个DIV标签里面有一个IMG标签。我的问题是 IMG 获得与 DIV 相同的不透明度，这是我不想要的。我希望 IMG 不透明，并尝试设置“不透明度：1！重要；” 对于IMG，但它仍然是半透明的DIV。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T10:30:59.150

你不能使用不透明度来做到这一点，因为这总是会影响所有子元素。您可以尝试使用[rgba-color](http://www.css3.info/preview/rgba/)作为 div 的背景（[所有现代浏览器](http://caniuse.com/#feat=css3-colors)都支持）并忽略不透明度。

```
background: rgba(0, 0, 255, 0.7); // 70% opaque blue 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T10:43:21.270

嗨，我提到了可以增加和减少父容器背景的不透明度并且不会影响子容器的属性。很简单，基本上你必须在背景中使用 rgb 颜色和 alpha 来获得不透明度。

```
background:rgba(146,146,146,0.1); 
```

或查看示例：- [http://jsfiddle.net/8LFLd/20/](http://jsfiddle.net/8LFLd/20/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T10:33:50.960

我认为你不能阻止这种情况发生。您可能不得不在 div 之外使用 img 并以一些凌乱的位置放入其中：absolute; CSS。它不干净，但不管用。我更喜欢 oezi 的解决方案，但这可能与您想做的事情不兼容。如果是这样，您应该确定使用 oezi 的解决方案。

```
<div>
    <img src="" alt="">
    <div style="position: absolute;">
    Content
    </div>
</div> 
```

# sqlite - SQLite 数据库文件被锁定

> ID：10139161
> 
> 赞同：1
> 
> 时间：2012-04-13T10:28:17.393
> 
> 标签：sqlite

`SQLITE database file was locked`当我尝试多次打开连接时出现错误，这就是我所写的

```
if (m_oDataSet2.Tables["401k"].Rows.Count != 0)
{
    double maxlimit;
    using (SQLiteConnection conn = new SQLiteConnection("Data Source=" + path + ""))
    {
      conn.Open();   
    }
 } 
```

第一次点击它在第二次循环时执行良好我收到此错误如何解决

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:51:34.900

每次完成后尝试关闭连接。或者，只需在程序启动时打开一次，并在应用程序的整个生命周期内保持连接。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-06T05:48:39.173

只需插入 conn.close(); 在捕获之前（ClassNotFoundException ex）

# xcode - 将 Google 日历添加到 Xcode 中的视图

> ID：10139165
> 
> 赞同：1
> 
> 时间：2012-04-13T10:28:31.850
> 
> 标签：xcode, ios5

我正在学习 iOS 编程，而且我处于非常基础的水平。我希望有人可以帮助我完成我正在尝试做的测试项目。

在我的应用程序视图中，我想显示一个 Google 日历。源日历将始终相同，事件将通过网站添加，因此用户无需修改或添加任何内容。该视图应该只显示从谷歌获取的事件列表（tableview？），触摸每个事件应该推送另一个包含事件详细信息的视图。

我试图查看 Google API 的文档，但老实说，没有帮助我无法实现它。

# php - 多重内爆 (PHP)

> ID：10139167
> 
> 赞同：0
> 
> 时间：2012-04-13T10:28:34.997
> 
> 标签：php, implode

我正在尝试创建一个给定以下数组的内[爆](http://php.net/manual/en/function.implode.php)：

```
<?php

    $conditions = array(
         'username' => array('=', 'nblackburn'),
         'password' => array('=', 'password')
    );

    $output = array();
    foreach($conditions as $key => $values) {
        $output[] = $key.' '.implode(' ', $values);
    }

    echo implode(' AND ', $output);

?> 
```

应返回如下字符串：

```
username = nblackburn AND password = password 
```

但是，我在让它工作时遇到了问题。如您所见，第一部分 ( `username`) 是数组的键，第二部分 ( `=`) 是子数组中的第一个元素，最后一个 ( `nblackburn`) 是它的最后一个元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T10:31:48.750

像这样？

```
$str = array();
foreach($test as $key => $values) {

  // if there are always only 2 values inside
  $str[] = $key .' '.$values[0].' '.$values[1];

  // with more values (taken from nblackburns solution)
  $str[] = $key.' '.implode(' ', $values);
}

echo implode(' AND', $str); 
```

但是正如评论中提到的，如果它带来了漏洞，请不要使用它！

# f# - 为什么 F# 编译器即使在发布版本中也会生成 IL NOP？

> ID：10139168
> 
> 赞同：9
> 
> 时间：2012-04-13T10:28:44.987
> 
> 标签：f#

我刚刚偶然发现了这一点，我有点困惑。

我有一个开箱即用的 VS 2010 F# 项目，具有所有默认设置，面向 .NET 4.0。

F# 代码是这样的：

```
let test(a:int, b:int, c:int) = min a (min b c) 
```

当我编译它以发布时，生成的 IL 包含一些`NOP` 分散的奇怪指令。像这样：

为此生成的 IL（使用所有默认设置）：

```
.method public static int32  test(int32 a,
                                  int32 b,
                                  int32 c) cil managed
{
  // Code size       20 (0x14)
  .maxstack  4
  .locals init ([0] int32 V_0)

  // HERE
  IL_0000:  nop

  IL_0001:  ldarg.1
  IL_0002:  ldarg.2
  IL_0003:  bge.s      IL_0009
  IL_0005:  ldarg.1

  // HERE
  IL_0006:  nop

  IL_0007:  br.s       IL_000b
  IL_0009:  ldarg.2

  // HERE
  IL_000a:  nop

  IL_000b:  stloc.0
  IL_000c:  ldarg.0
  IL_000d:  ldloc.0
  IL_000e:  bge.s      IL_0012
  IL_0010:  ldarg.0
  IL_0011:  ret
  IL_0012:  ldloc.0
  IL_0013:  ret
} // end of method Module1::test 
```

我的`.fsproj`项目配置是：

```
 <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <Tailcalls>true</Tailcalls>
    <OutputPath>bin\Release\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <WarningLevel>3</WarningLevel>
    <DocumentationFile>bin\Release\TestFsIL.XML</DocumentationFile>
  </PropertyGroup> 
```

现在，如果我注释掉 line `<DebugType>pdbonly</DebugType>`，`NOP`说明就会消失。当然，PDB 文件也是如此！

```
.method public static int32  test(int32 a,
                                  int32 b,
                                  int32 c) cil managed
{
  // Code size       17 (0x11)
  .maxstack  4
  .locals init (int32 V_0)
  IL_0000:  ldarg.1
  IL_0001:  ldarg.2
  IL_0002:  bge.s      IL_0007
  IL_0004:  ldarg.1
  IL_0005:  br.s       IL_0008
  IL_0007:  ldarg.2
  IL_0008:  stloc.0
  IL_0009:  ldarg.0
  IL_000a:  ldloc.0
  IL_000b:  bge.s      IL_000f
  IL_000d:  ldarg.0
  IL_000e:  ret
  IL_000f:  ldloc.0
  IL_0010:  ret
} // end of method Module1::test 
```

这条线也有一个微妙的不同`.locals`：

```
.locals init ([0] int32 V_0) 
```

对比

```
.locals init (int32 V_0) 
```

当我尝试 C# 编译器时，它`NOP`仅在调试版本中生成指令，但这些似乎在发布版本中消失了，即使使用`<DebugType>pdbonly</DebugType>`.

**问题：**

1.  当包含 PDB 文件时，为什么在 F# 中在发布版本中生成 NOP 指令，而 C# 似乎能够避免这种情况。

2.  有没有办法摆脱那些 NOP，但仍然有 PDB 文件？

PS。[这里](https://stackoverflow.com/questions/1612543/nop-in-release-build-of-f-code) 和[这里](https://stackoverflow.com/questions/4590382/why-does-generated-il-code-start-with-a-nop)有关于 SO 的相关问题，但那里的所有答案都说

> 您正在调试模式下编译，如果您在发布模式下编译，`NOP`则消失

这与我展示的 F# 编译器的经验相矛盾。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T10:51:19.860

我不完全知道这在 F# 编译器内部是如何工作的（F# 团队的某个人可能有更好的答案），但我的猜测是生成`nop`指令只是生成可以从`pdb`文件。

该`pdb`文件需要在代码中为表达式指定一些 IL 范围，您可以在其中放置断点 - 调试和发布模式都是这种情况。这意味着如果您在某处放置断点，则 IL 中需要有相应的位置。但是，如果没有实际的指令，对应于源代码位置，编译器需要插入一些东西——所以它添加了`nop`.

在 Release 模式下，F# 编译器做了更多的优化，但如果你想要`pdb`文件，它仍然需要提供所有源代码位置的位置。这在 C# 中可能不需要，因为 C# 更接近于源 IL 映射，但在 F# 中可能更难避免这种情况。

# symfony - Symfony2 FOSUserBundle 和组错误

> ID：10139171
> 
> 赞同：0
> 
> 时间：2012-04-13T10:29:06.840
> 
> 标签：symfony, doctrine-orm, acl

申请时出现错误

```
php app/console doctrine:schema:update --force 
```

我得到一堆错误，从

```
PHP Fatal error:  Declaration of Tracker\MembersBundle\Entity\User::addGroup() must be 

compatible with that of FOS\UserBundle\Model\GroupableInterface::addGroup() in C:\Program Files (x86)\Zend\Apache2\htdocs\mysite\src\Tracker\MembersBundle\Entity\User.php on line 14
PHP Stack trace:
PHP   1\. {main}() C:\Program Files (x86)\Zend\Apache2\htdocs\mysite\app\console:0
PHP   2\. Symfony\Component\Console\Application->run() C:\Program Files (x86)\Zend\Apache2\htdocs\mysite\app\console:22
PHP   3\. Symfony\Bundle\FrameworkBundle\Console\Application->doRun() C:\Program Files (x86)\Zend\Apache2\htdocs\mysite\vendor\symfony\src\Symfony\Component\Console\Application.php:118
PHP   4\. Symfony\Component\Console\Application->doRun() C:\Program Files (x86)\Zend\Apache2\htdocs\mysite\vendor\symfony\src\Symfony\Bundle\FrameworkBundle\Console\Application.php:75 
```

我想通了`User::addGroup()`......但我不知道如何最终解决它......这是我的两个`groups`实体`FOSUserBundle`

[用户](http://pastebin.com/vbgypx3K) [组](http://pastebin.com/wejKfGVU)

更新：如果我只是从用户实体中删除 addGroup() 并转到路径 [http://mysite.com/app_dev.php/group/new](http://mysite.com/app_dev.php/group/new) 我得到一个致命错误

```
 Fatal error: Declaration of FOS\UserBundle\Form\Type\GroupFormType::getDefaultOptions() must be compatible with that of Symfony\Component\Form\FormTypeInterface::getDefaultOptions() in C:\Program Files (x86)\Zend\Apache2\htdocs\mysite\vendor\bundles\FOS\UserBundle\Form\Type\GroupFormType.php on line 18 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:41:14.940

您必须`GroupableInterface`在您的`User`班级中添加 FQCN，例如

```
use FOS\UserBundle\Model\GroupableInterface; 
```

**编辑：**

你必须更新 symfony。因为他们改变了`getDefaultOptions`. [在这里](https://github.com/symfony/symfony/commit/b7330456b698f7dd10bd2171c7075fc34c13858e)检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T08:33:33.457

你应该从：

> 供应商\您的捆绑包\实体\用户；

getter setter 组函数因为它已经被声明

> 使用 FOS\UserBundle\Model\User.php；

它可以是重复的功能！

现在生成您的架构，我希望它可以帮助您：D

# iphone - 如何将 NSString 插入 NSMutableString？

> ID：10139174
> 
> 赞同：4
> 
> 时间：2012-04-13T10:29:20.793
> 
> 标签：iphone, objective-c, ios5, nsstring, nsmutablestring

我有一个 NSMutableString，我需要在两个地方插入另一个 NSString。我的 NSMutableString 是

```
NSMutableString *webServiceLinkWithResponses = [[NSMutableString alloc] initWithString:@"http://lmsstaging.2xprime.com/services/ParticipantService.cfc?method=setVideoExamResults&student_id=10082&course_id=VRT_TRA&lesson=904&examtype=r&question_num=&ansValue="]; 
```

我需要在“question_num=”之后插入一个字符串（一个），在“ansValue=”之后插入另一个字符串（一个），所以我的最终字符串应该是

[http://lmsstaging.com/services/ParticipantService.cfc?method=setVideoExamResults&student_id=10082&course_id=VRT_TRA&lesson=904&examtype=r&question_num=One&ansValue=One](http://lmsstaging.2xprime.com/services/ParticipantService.cfc?method=setVideoExamResults&student_id=10082&course_id=VRT_TRA&lesson=904&examtype=r&question_num=One&ansValue=One)

对此有何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T10:38:50.420

以下将创建一个未保留的`NSMutableString`：

```
NSMutableString *webServiceLinkWithResponses = [NSMutableString stringWithFormat:@"http://lmsstaging.2xprime.com/services/ParticipantService.cfc?method=setVideoExamResults&student_id=10082&course_id=VRT_TRA&lesson=904&examtype=r&question_num=%@&ansValue=%@", stringOne, stringTwo]; 
```

如果您需要保留它，只需使用`[[NSMutableString alloc] initWithFormat:@"..."]`：

```
NSMutableString *webServiceLinkWithResponses = [[NSMutableString alloc] initWithFormat:@"http://lmsstaging.2xprime.com/services/ParticipantService.cfc?method=setVideoExamResults&student_id=10082&course_id=VRT_TRA&lesson=904&examtype=r&question_num=%@&ansValue=%@", stringOne, stringTwo]; 
```

你真的需要它是一个可变的字符串，一旦它被创建，你会改变它吗？如果不是简单地将 更改`NSMutableString`为`NSString`，例如（这将返回一个 autoreleased `NSString`，`[NSString alloc] initWithFormat:]`如果需要保留它，请使用）：

```
NSString *webServiceLinkWithResponses = [NSString stringWithFormat:@"http://lmsstaging.2xprime.com/services/ParticipantService.cfc?method=setVideoExamResults&student_id=10082&course_id=VRT_TRA&lesson=904&examtype=r&question_num=%@&ansValue=%@", stringOne, stringTwo]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T10:32:40.647

尝试这个：

```
NSMutableString *webServiceLinkWithResponses = [[NSMutableString alloc] initWithString:[NSString stringWithFormat: @"http://lmsstaging.2xprime.com/services/ParticipantService.cfc?method=setVideoExamResults&student_id=10082&course_id=VRT_TRA&lesson=904&examtype=r&question_num=%@&ansValue=%@",yourFirstString,yourSecondString]; 
```

告诉我它是否有帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T10:37:05.043

我的方式是：

```
NSMutableString *webServiceLinkWithResponses = [[[NSString stringWithFormat: @"http://lmsstaging.2xprime.com/services/ParticipantService.cfc?method=setVideoExamResults&student_id=10082&course_id=VRT_TRA&lesson=904&examtype=r&question_num=%@&ansValue=%@",yourFirstString,yourSecondString] mutableCopy] autorelease]; 
```

根据[dreamlax](https://stackoverflow.com/users/10320/dreamlax)的提示，您还可以使用：

```
NSMutableString *webServiceLinkWithResponses = [NSMutableString stringWithFormat:@"http://lmsstaging.2xprime.com/services/ParticipantService.cfc?method=setVideoExamResults&student_id=10082&course_id=VRT_TRA&lesson=904&examtype=r&question_num=%@&ansValue=%@", stringOne, stringTwo]; 
```

# php - 仅在数据库中不存在时更新表单值

> ID：10139175
> 
> 赞同：0
> 
> 时间：2012-04-13T10:29:26.027
> 
> 标签：php

假设我有这样的表格-

```
<form method="post" action="process.php">    
   Mark Up Name <input type="text" name="mark_up_name">
   Minimum Rate <input type="text" name="mark_up_min">
   Maximum Rate <input type="text" name="mark_up_max">
   <input type="submit" value="Save Mark Up">
</form> 
```

会有很多标记，当用户编辑特定标记并单击“保存标记”时，将进行背景检查以查看数据库中是否已经存在具有该名称的标记。如果有，那么将向用户显示一条消息，该用户已经使用该名称进行了标记并且存在。如果没有，请继续更新。

到这里为止一切顺利。但是当用户尝试更新其他值（例如最小速率或最大速率）时，保持标记值相同，消息仍显示为标记存在。由于数据库检查返回 true。

我想知道我需要在这里应用什么逻辑来解决这个问题..

我试过了

```
if (CheckIfMarkUpExists($_POST['mark_up_name']))
{
   //Dont Update. Show Message MarkUp Exists
}
else
{
   //Update. Show Message MarkUp Saved
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:41:47.023

your comments are misleading, Dont Update should be update and Update should be create new why not just update everything anyway on submit

```
if (CheckIfMarkUpExists($_POST['mark_up_name']))
{
   //Do UPDATE. but just the other fields
$gosql = "UPDATE table SET mark_up_min = POST['mark_up_min'] WHERE (id) or markup_name = markup_name
     // Show Message MarkUp updated
} else {
 // Create new / INSTALL - not an update. Show Message MarkUp Saved
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:13:41.573

```
function CheckIfMarkUpExists($form){
    global $db;
    $st = $db->prepare("SELECT * FROM user WHERE form=?" );
    $st->bindParam(1, $form);
    $st->execute();
    if($st->rowCount() ==1){ return true;
}   else{ return false;
}
} 

if(CheckIfMarkUpExists($_POST['form'])){
    $errors[] = 'MarkUp Exists';
    }

if(empty($errors)){ 

$_POST['form'] 

} 
```

# php - 使用 php 和 mod_rewrite 将 php 搜索 url 更改为短 url

> ID：10139176
> 
> 赞同：0
> 
> 时间：2012-04-13T10:29:27.203
> 
> 标签：php, mod-rewrite, seo

我的搜索 url 很长，如何使用 php 和 mod_rewrite 将其更改为短 url firndly url？

我的网址：

```
mydomain.com/gosearch.php?page=1&random=742&title=test&loc1=ANY&loc2=ANY&loc3=ANY&t=ALL&st=3&app=5&image=ALL 
```

我喜欢：隐藏在页码之后（前为 1）

```
 mydomain.com/search/1/ 
```

或者

```
 mydomain.com/search/1/742/test/ANY/ANY/ANY/ALL/3/5/ALL 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T10:56:24.570

你可以做这样的事情

```
RewriteEngine On
RewriteRule ^search/(.*)/(.*)/ /gosearch.php?page=$1&amp;random=$2 [L] 
```

但它可能会变得非常丑陋，并且最多只能使用 9 个参数

更好的方法是将所有要搜索的流量重定向到 php 脚本 (gosearch.php)，然后在 php 中解析请求和/或查询字符串并进行适当处理，例如

```
RewriteCond %{REQUEST_URI} ^/search(.*)$
RewriteRule . /gosearch.php [L, QSA] 
```

然后在 gosearch.php

```
<?php

    $paramaters = explode( '/', $_SERVER['REQUEST_URI'] );

    print_r( $parameters );
?> 
```

从那里拿走

ps`QSA`将添加来自 /search/1/ 的任何查询字符串，因此可以通过`$_GET`/以通常的方式访问查询参数`$_REQUEST`

# php - 将 PHP 模板文件编译成静态 HTML 页面的 Ant 任务

> ID：10139177
> 
> 赞同：5
> 
> 时间：2012-04-13T10:29:27.967
> 
> 标签：php, ant

我们当前的网站被分解成各种易于使用的 PHP 包括，这些包括使用那些漂亮的 PHP 模板库之一。

我们目前使用 Ant 构建来优化我们的大部分前端代码，包括连接、缩小和图像优化。我们想要做的是添加一个额外的 Ant 任务，它将解析 PHP 模板文件并将静态 HTML 页面输出到我们的构建文件夹中。

谁能指出我正确的方向？

下面是我想要实现的一个非常基本的示例：

构建前的 PHP 模板

```
<?php 
    require_once($_SERVER['DOCUMENT_ROOT'].'/tpl/basic-template.php');

    startblock('title');
        echo 'Test page';
    endblock();

    startblock('content');
        include($_SERVER['DOCUMENT_ROOT'].'/incl/content-fragment.php');
    endblock();
?> 
```

是否可以通过 Ant 任务创建上面的静态 HTML 页面，如下所示：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Test page</title>
    </head>
    <body>
        <p>This paragraph was the contents of content-fragment.php</p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T11:48:08.493

您可以通过在运行[apache](http://httpd.apache.org/download.cgi)的构建服务器中托管文件来使用[Ant Get](http://ant.apache.org/manual/Tasks/get.html)任务：

```
<get src="http://buildserver/index.php" dest="app/index.html"/> 
```

# sql - 使用 SQL 在 Access 中提取具有对象名称的最大值 - 处理相同的值

> ID：10139181
> 
> 赞同：1
> 
> 时间：2012-04-13T10:29:45.970
> 
> 标签：sql, ms-access, group-by

我有一个包含 Access 数据库中客户和产品信息的表：

```
custID product price
--------------------
1   objectA   12,5
1   objectB   54,51
1   objectC   14,85
2   objectE  188,84
2   objectC   14,85
2   objectD  188,84 
```

从该表中，我想获得客户通过 SQL 购买的最昂贵的产品。我试过这个：

```
SELECT a.custID, a.product, max(a.price)
FROM orders AS a INNER JOIN orders AS b ON (a.custID=b.custID) AND (a.price<=b.price)
GROUP BY a.product, a.custID
HAVING count(*)<2; 
```

结果是

```
1   objectB  54,51 
```

它适用于最高价格仅出现一次但当两种产品具有相同（最高）价格时失败的所有情况。如何确保为每个客户获得结果？（我不关心客户 2 的 objectD 或 objectE 是否会这样做）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:40:42.333

```
SELECT a.custID, MAX(a.product), MAX(a.price)
FROM orders AS a 
WHERE a.price = (select MAX(b.price) from orders b where a.custID=b.custID)
GROUP by a.custID 
```

附注：
如果您有更高级的支持窗口功能的 SQL 服务器，例如 SQL Server 2008，您可以改为编写

```
SELECT custID, product, price FROM (
    SELECT custID, product, price,  ROW_NUMBER()
        OVER (partition by custid order by price desc) AS rowNo
    FROM orders 
) AS a
WHERE a.rowNo = 1 
```

# ruby-on-rails-3 - Rails 3 - 如何在 haml 部分中使用特定于环境的配置

> ID：10139183
> 
> 赞同：1
> 
> 时间：2012-04-13T10:30:01.037
> 
> 标签：ruby-on-rails-3, haml

按照[关于如何在 rails 中定义自定义配置变量的答案](https://stackoverflow.com/a/5053882/305019)，我正在尝试为不同环境设置配置设置`config/environments/{env}.rb`

例如在`development.rb`我设置

`config.elvis = 'alive'`

然后在我的haml模板中我可以使用这个变量，例如

`Elvis is #{Rails.configuration.elvis}`.

但是，当我想将其包装在一个条件下时：

```
- if Rails.configuration.elvis
  <p>Elvis is #{Rails.configuration.elvis}</p> 
```

它也有效，但如果未设置配置，则会引发`undefined method`错误。

如果我尝试改为：

```
- if defined? Rails.configuration.elvis
  <p>Elvis is #{Rails.configuration.elvis}</p> 
```

即使定义了配置，它似乎总是评估为假。

对于 rails/ruby 来说还是很新的，如果这是一个非常愚蠢的问题，请道歉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T10:35:29.600

你可以使用[`respond_to?`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-respond_to-3F)：

```
- if Rails.configuration.respond_to?(:elvis)
  <p>Elvis is #{Rails.configuration.elvis}</p> 
```

# process - 乘客进程已经运行？但它不是

> ID：10139185
> 
> 赞同：5
> 
> 时间：2012-04-13T10:30:09.147
> 
> 标签：process, nginx, passenger

尝试独立启动乘客`passenger start -p 80`，它说它已经在运行，但是当我这样做时，`passenger stop -p 80`我得到了`According to the PID file '/var/crm/tmp/pids/passenger.80.pid', Phusion Passenger Standalone doesn't seem to be running.` 但这显然不是因为当我尝试停止它时，它说它没有运行，我无法从网络上访问它

```
[root@technetium crm]# passenger start -p 80
*** ERROR ***
The address 0.0.0.0:80 is already in use by another process, perhaps another
Phusion Passenger Standalone instance.

If you want to run this Phusion Passenger Standalone instance on another port,
use the -p option, like this:

  passenger start -p 81 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T03:30:36.757

尝试运行`lsof`或`netstat -tlnp | grep 80`确定哪个应用程序正在使用端口 80。一旦弄清楚了，就可以执行类似 ps -elf 之类的操作来终止该进程。

# playframework - 玩！框架 1.2.4 根上下文问题

> ID：10139186
> 
> 赞同：2
> 
> 时间：2012-04-13T10:30:13.223
> 
> 标签：playframework, glassfish, playframework-1.x

我遇到了使用播放框架的应用程序的问题。此应用程序在 Glassfish 服务器上部署为 WAR。我被设置为上下文根用于例如。/abc 所以这意味着，我的应用程序在 http://localhost/abc 上可用

当我尝试访问此页面时，它正常打开，但是当我单击某个 URL 时，此页面如下所示。[http://localhost/second-page](http://localhost/second-page)并产生 404 page not found 错误。

如您所见，在移动到另一个页面后，上下文根已经消失。所以我手动将链接更改为[http://localhost/abc/second-page](http://localhost/abc/second-page)并且页面运行良好，因为移动到其他页面是可行的。

有人收到这个问题吗。我听说有人在tomcat上遇到了同样的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:35:16.233

您是否尝试在 中设置以下内容`application.conf`：

```
application.baseUrl=http://localhost/abc/ 
```

（另一个相关的配置选项是`http.path`，尽管我认为这在这里没有帮助，因为[Play 框架文档](http://www.playframework.org/documentation/1.2.4/configuration)指出当应用程序部署为 WAR 时它会被忽略。）

# html - 可以使 CSS3 为多个类动态化吗？

> ID：10139188
> 
> 赞同：1
> 
> 时间：2012-04-13T10:30:16.843
> 
> 标签：html, css

首先，如果以下问题含糊不清，我很抱歉，但这是我最好的解释：

我刚刚开始使用 HTML5 和 CSS3。我正在用 css3 从点 x1y1 到 x2y2 画一条线。

我的问题是，有没有办法动态调用 css3 代码？

例如，假设我在数据库中有 10 个名字，我想将它们放在 HTML 文档中，并从中心画一条线到每个名字。就像太阳（中心）和阳光（名字在最后）。

因此，让我们说从“太阳”中心指向 10 度的 name1，下一个光束可能是 15，下一个光束可能是 20，依此类推..

2 天后，数据库可能包含 20 个名称，我希望 20 个阳光指出这些名称，但无需在我的 CSS3 文档中添加 10 个以上的 .classnames 内容

这甚至可能吗？

谢谢！:)

编辑：错字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:52:25.227

您可以为所有梁使用另一个通用类名，例如“beam_class”并在其中定义它们的属性，因此您不必担心为每个梁创建新类。

# c# - % 在 C# 中是什么意思？

> ID：10139191
> 
> 赞同：3
> 
> 时间：2012-04-13T10:30:43.877
> 
> 标签：c#, .net, operators

抱歉，可能出现重复问题，该`%`符号与可搜索性不一致。

是什么`%`意思？我似乎无法坚持下去。

例子：

```
rotation = value % MathHelper.TwoPi; 
```

是一个具体的例子。

但是我发现了使用`%`频率更高的代码。模数我“认为”它被称为，但我并不积极。

# 上一篇：

[精心设计的遮阳篷](https://stackoverflow.com/questions/3264524/what-does-the-operator-mean)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T10:33:50.463

[% 运算符（C# 参考）](http://msdn.microsoft.com/en-us/library/0w4e0fzs.aspx)

> % 运算符计算第一个操作数除以第二个操作数后的余数。所有数字类型都有预定义的余数运算符。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-13T10:33:19.570

见 MSDN：

*   [C# 运算符](http://msdn.microsoft.com/en-us/library/6a71f45d.aspx)
*   [% 运算符（C# 参考）](http://msdn.microsoft.com/en-us/library/0w4e0fzs.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-13T10:33:03.787

它是[模运算符](http://msdn.microsoft.com/en-us/library/0w4e0fzs.aspx)。它计算第一个操作数除以第二个操作数后的余数，例如

1.  5 % 2 = 1
2.  6 % 2 = 0
3.  5% 3 = 2。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-13T10:33:11.710

在 C# 中，它的意思是`modulus`，这基本上是

例子：

```
int remainder = 10 % 3 //remainder is 1 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-13T10:33:18.337

是的，它是模数。 [http://en.wikipedia.org/wiki/Modulus_(algebraic_number_theory](http://en.wikipedia.org/wiki/Modulus_(algebraic_number_theory) )

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-13T10:36:47.900

它是模运算符。它返回整数的余数。

```
int remainder = 2 % 1; // (remainder variable is assigned to 0) 
int remainder2 = 3 % 2; // (remainder variable is assigned to 1) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-04-13T11:47:23.170

让我们这么说

```
x / y = z,
x, y, z being integers. 
```

不能保证

```
z * y = x, because the "/" operator rounds down. 
```

所以我们必须在等式中加上一个余数：

```
z * y = x + r.

z * y = x + r
z * (-y) = - (z * y) = -(x + r) = -x - r 
```

这意味着“%”运算符的结果可能是负数，这意味着“%”或余数运算符不同于模关系，因为不能保证结果是规范的。

# javascript - 启用禁用按钮 html5/css/javascript

> ID：10139192
> 
> 赞同：0
> 
> 时间：2012-04-13T10:30:43.973
> 
> 标签：javascript, html, css

我做了一个计算器。我已将其上传到以下网页。

www.vipulshree.com

我想在单击它时突出显示一个按钮，并在单击另一个按钮时从中删除突出显示。单击下一个按钮时，它应该更改颜色/禁用/突出显示，并且上一个按钮恢复正常。请帮助我，我在网上搜索了这个，但找不到任何东西。帮助我绝望。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:39:56.447

~~使用`:focus`CSS 伪选择器。它将匹配当前具有焦点的元素。~~ **似乎不适用于按钮**

* * *

使用 JavaScript 在点击时添加一个类`.focused`，并在所有其他元素上删除它。在所有按钮的公共父级上使用事件委托（在此代码中，假定为`#container`）。

```
<script type="text/javascript">
    setFocus = function(e) {
        if (document.getElementsByClassName('focus')[0]) document.getElementsByClassName('focus')[0].className = '';
        if (e.target.tagName.toLowerCase() == 'button') {
            e.target.className = 'focus';
        }
    };
    document
       .getElementById('container')
        .onclick = setFocus;
</script> 
```

我的 HTML 标记如下所示：

```
<div id="container">
    <button>1</button>
    <button>2</button>
    <button>3</button>
    <button>4</button>
    <button>5</button>
</div> 
```

**[工作示例](http://jsfiddle.net/fDLe7/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:43:09.693

你可以为你的按钮定义一个类，然后使用点击事件你可以改变它的颜色，当你点击任何按钮时，将它保存在变量中，比如“previous”。

因此，当您单击任何其他按钮时，您将再次更改已保存按钮变量的颜色并将当前按钮分配给该变量。

```
var previous;
document.getElementsByClassName("className").onclick = function (){
    // change the color of the previous element
    previous = this;
    // change the color of this button
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T10:48:34.153

这是一个小的 jsfiddle 工作示例，它仅将 jQuery 用于 dom 就绪加载器和一个 CSS 类来实现高亮效果。

[http://jsfiddle.net/t6bJ3/](http://jsfiddle.net/t6bJ3/)

```
 var buttons = document.getElementsByTagName('button'),
        buttonsLength = buttons.length,
        selected, 
        i = 0, 
        reset = function() {
            for (i = 0; i < buttonsLength; i++) buttons[i].className = '';
        },
        highlight = function(ev) {
            reset();
            ev.target.className = 'highlight';
        };

    for (; i < buttonsLength; i++) buttons[i].onclick = highlight; 
```

# c# - C# WinForms 将控件显示为下拉列表

> ID：10139193
> 
> 赞同：0
> 
> 时间：2012-04-13T10:30:48.747
> 
> 标签：c#, winforms, drop-down-menu

问候

我需要为我的应用程序提供自定义控件。基本上它是一个表达式编辑 GUI。你有，说，表达：

```
If variable_x is greater than variable_y 
```

您可以单击“大于”并将其更改为其他比较器（例如，等于或小于）。

因此，该控件必须看起来像一个标签，但是当您单击它时，它必须显示一个下拉列表（就像组合框一样），其中包含一个列表视图（或者可能是其他一些控件），以便用户可以选择一些东西。从某种意义上说，我需要一个没有盒子本身的组合框，用其他东西代替（在这种情况下，是一个标签）。

我知道如何制作自定义控件，我知道我必须以某种方式在鼠标单击或输入按键时 DropDown，并挂钩事件，以便当我放下的任何东西都关闭时，做出选择，并且还以某种方式跟踪用户是否点击了其他地方，这样我就可以关闭这个下拉控件。但我不知道这是否容易做到（存在一些内置方法）还是我必须自己做？不想重新开发轮子......

请告诉我是否有简单的方法可以做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:48:57.340

您可以扩展`ComboBox`控件以更新`DropDownStyle`on`Enter`和`LostFocus`事件。

```
public partial class MyComboBox : ComboBox
{
    public MyComboBox()
    {
        InitializeComponent();

        this.Dock = DockStyle.Fill;

        this.SelectionChangeCommitted += this.OnComboBoxSelectionChangeCommitted;
        this.Enter += this.OnControlEnter;
        this.LostFocus += this.OnComboBoxLostFocus;
    }

    private void OnControlEnter(object sender, EventArgs e)
    {
        this.DropDownStyle = ComboBoxStyle.DropDownList;
    }

    private void OnComboBoxLostFocus(object sender, EventArgs e)
    {
        this.DropDownStyle = ComboBoxStyle.Simple;
    }

    private void OnComboBoxSelectionChangeCommitted(object sender, EventArgs e)
    {
        // Notify to update other controls that depend on the combo box value
    }
} 
```

# camera - 如何使用微控制器从照片相机获取单个屏幕截图

> ID：10139194
> 
> 赞同：1
> 
> 时间：2012-04-13T10:30:51.010
> 
> 标签：camera, photo, microcontroller

假设我们在机械平台上安装了任何流行的相机（如佳能或其他）。这个平台使我们能够准确地将相机的镜头方向调整到任何有趣的物体。该平台通过微控制器板从 PC 控制。但是我们需要来自照相机的反馈——当前出现在照相机显示屏上的图像。显然，需要这种反馈来确保相机朝向正确的方向。目前我不知道如何通过微控制器从相机中获取单张图像。

你能推荐我挖掘的方向吗？关于如何选择相机的任何建议（不允许使用网络相机）？有小费吗 ？

提前谢谢你=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:34:29.410

Dwelch 是对的，您需要选择一个“友好”的相机并从那里开始工作 - 谷歌 CHDK 作为初学者。

您可以使用 micro 的 SPI 接口来伪装成 SD 卡，并将来自相机的图像数据直接接收到 micro 中，但您可能需要一个速度相当快且具有相当数量 RAM 的 micro，尤其是如果您想这样做对其进行任何处理。

除此之外，您可以将相机的 AV 输出（如果有的话）采样到微型或通过 USB 捕获棒直接进入 PC（如果您正在炫耀，则可以将 USB 捕获棒插入微型） ，或者可能通过其 USB 或（在此处插入专有端口的名称）IO 端口来询问相机。

变得更加 hacky（是的，甚至更多！）你可以嗅探相机的 LCD 数据总线并从中窃取图像，但这会带来各种痛苦，以及微小的螺丝。

# asp.net - 使用 datapager 的 Listview 自定义分页

> ID：10139198
> 
> 赞同：2
> 
> 时间：2012-04-13T10:31:03.833
> 
> 标签：asp.net, listview, datapager

谁能告诉我如何使用 datapager 实现自定义分页。现在我已经设法用 2 个按钮（用于下一页和上一页）和 LoadListview() 方法来做到这一点，但我想在 datapager 中使用这个方法。有什么建议么？

文件后面的代码：

```
SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["BusinessConnectionString"].ToString());
    SqlDataAdapter adap;
    int startIndex;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            LoadListview();
        }         
    }

    private void LoadListview()
    {
        string FindWhat = Request.QueryString["Find"];
        string FindWhere = Request.QueryString["Where"];
        string TownName = FindWhere;
        string CountyName = FindWhere;
        string PostcodeName = FindWhere;

        //startIndex = int.Parse(ViewState["index"].ToString());
        startIndex = MyDataPager.StartRowIndex * MyDataPager.PageSize;
        int endIndex = startIndex + MyDataPager.PageSize;

        adap = new SqlDataAdapter("SELECT * FROM (SELECT ROW_NUMBER() OVER (ORDER BY id_Business) AS MyRow, id_Business, Name, TownName FROM UbeloView WHERE (Name Like '%" + FindWhat + "%' AND TownName Like '%" + TownName + "%') UNION ALL SELECT ROW_NUMBER() OVER (ORDER BY id_Business) AS MyRow, id_Business, Name, TownName FROM UbeloView WHERE (Name Like '%" + FindWhat + "%' AND CountyName Like '%" + CountyName + "%') UNION ALL SELECT ROW_NUMBER() OVER (ORDER BY id_Business) AS MyRow, id_Business, Name, TownName FROM UbeloView WHERE (Name Like '%" + FindWhat + "%' AND PostcodeName Like '%" + PostcodeName + "%')) AS log WHERE MyRow >=" + startIndex + " AND MyRow <=" + endIndex + " ", conn);

        DataSet ds = new DataSet();

        adap.Fill(ds);

        lstBusiness.DataSource = ds;
        lstBusiness.DataBind();
    }

    protected void MyDataPager_PreRender(object sender, EventArgs e)
    {
        LoadListview();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:25:52.047

这篇文章可以帮助你： http: [//www.codeproject.com/Articles/24065/Paging-ListView-With-DataPager](http://www.codeproject.com/Articles/24065/Paging-ListView-With-DataPager)

在这篇文章中，作者使用了一个`DataPager_PreRender`将他的数据绑定到一个ListView：

```
protected void DataPagerProducts_PreRender(object sender, EventArgs e)
{
    ProductList db = new ProductList();
    this.ListViewProducts.DataSource = db.GellAll();
    this.ListViewProducts.DataBind();
} 
```

你可以尝试类似的东西：

```
protected void MyDataPager_PreRender(object sender, EventArgs e)
{
    LoadListview();    
} 
```

然后您需要做的就是修改您的`LoadListview()`方法以从 DataPager 控件本身获取开始索引。

```
private void LoadListview()
    {
        string FindWhat = Request.QueryString["Find"];
        string FindWhere = Request.QueryString["Where"];
        string TownName = FindWhere;
        string CountyName = FindWhere;
        string PostcodeName = FindWhere;

        startIndex = MyDataPager.StartRowIndex * MyDataPager.PageSize;
        adap = new SqlDataAdapter("<Query removed to save space>", conn);

        DataSet ds = new DataSet();    

        adap.Fill(ds);

        lstBusiness.DataSource = ds;
        lstBusiness.DataBind();
    } 
```

如您所见，我`startIndex`通过获取行索引并将其乘以 DataPager 的页面大小来获得。现在您可以将这部分 SQL 查询从`startIndex * 80`更改为`startIndex`.

如果一切按计划进行，您将不需要您的`btnPrevious`和`btnNext`点击事件。

我希望这能让您对您想要实现的目标有所了解。

# javascript - 在 AJAX 调用中获取 responseText 中的值

> ID：10139203
> 
> 赞同：1
> 
> 时间：2012-04-13T10:31:40.917
> 
> 标签：javascript, ajax, jsp, responsetext

我正在尝试使用 sendxmlRequest() 方法从基于 eqid 的表中获取值：

```
 <select name="eqNAME" onchange="sendxmlRequest('GET','getEquipDetails.jsp',this.value)
 <options> ..... <options>
 </select> 
```

这是我在 ajax.js 文件中添加的

```
//Make the XMLHttpRequest Object
var http = createRequestObject();
function sendxmlRequest(method, url,eqid){
    url = url + "?eqid="+eqid;
     if(method == 'get' || method == 'GET'){
    http.open(method,url,true);
    http.onreadystatechange = handleResponse;
    http.send(null);
    }
}    

function createRequestObject(){
    var req; try {
    // Firefox, Opera, Safari
    req = new XMLHttpRequest();
    } catch (e) {
    // Internet Explorer
    try {
    //For IE 6
    req = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
    try {
    //For IE 5
    req = new ActiveXObject("Microsoft.XMLHTTP");
    }
         catch (e) {
     alert('Your browser is not IE 5 or higher, or Firefox or Safari or Opera');
     }
   }
}
return req; 
```

}

以下用于处理响应（在 ajax.js 中）：

```
function handleResponse(){
if(http.readyState == 4 && http.status == 200){
    var response = http.responseText;
}
} 
```

这是我的“getEquipDetails.jsp”文件：

```
<% 
String planLoc= theResult1.getString(2) == null ? "":theResult1.getString(3);
String changLoc= theResult1.getString(3) == null ? "":theResult1.getString(4)
%> 
<%
response.setHeader("Pragma", "no-cache"); //HTTP 1.0
response.setDateHeader("Expires", 0); //prevents caching at the proxy server
response.setHeader("Cache-Control", "no-cache, private, no-store, max-stale=0"); //  HTTP 1.1
%> 
```

我的问题是，我们如何从 getEquipDetails.jsp 中获取值 planLoc 和 changLoc 并将其设置在 responseText 中，以便可以在我的页面的下拉列表中对其进行更新？

或者还有其他方法可以解决吗？

注意：我没有给出表格检索代码，因为已经处理好了。我只想在我的 JSP 页面中更新 planLoc 和 changLoc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:52:31.793

在`getEquipDetails.jsp`

写入值`response.getWriter()` 对象。

```
<%
response.setHeader("Pragma", "no-cache"); //HTTP 1.0
response.setDateHeader("Expires", 0); //prevents caching at the proxy server
response.setHeader("Cache-Control", "no-cache, private, no-store, max-stale=0"); //  HTTP 1.1
PrintWriter res = response.getWriter();
res.println(planLoc);
res.println(changLoc);
res.close();
%> 
```

然后在

```
function handleResponse(){
  if(http.readyState == 4 && http.status == 200){
    document.getElementById("dataTable").innerHTML = http.responseText;  
    // dataTable will be id of any HTML tag where you want to display the updated value.
  }
} 
```

例如：

```
<div id="dataTable"></div> 
```

因此，来自 AJAX 的响应将在此处设置。

# php - PHP上传文件，保存文件url到MySQL

> ID：10139212
> 
> 赞同：0
> 
> 时间：2012-04-13T10:32:33.800
> 
> 标签：php, mysql

坚持这一点，尝试从 ajax 到 w3schools 版本的上传，但没有成功。

我的 _events.php 脚本包含以下内容以获取文件信息：

```
<input name="event_image" type="file" /> 
```

我的 _eventscreate.php 脚本无法将文件上传到我的 _gallery/ 目录，一旦上传，我想将 url 指向要保存到我的数据库的文件（请参阅 SQL 查询）。

```
<?php   // Get Event ID
    $location=$_GET['location'];

    // Get values from form
    $event_name=$_POST['event_name'];
    $event_description=$_POST['event_description'];
    $event_date=$_POST['event_date'];
    $event_time=$_POST['event_time'];
    $event_cost=$_POST['event_cost'];
    $event_image=$_POST['event_image'];

    // Connection to MySQL Database.
    include ('_includes/_dbconnection.php');
    include ('_includes/_dbopen.php');

    // Update Event using Event ID.

    $sql="INSERT INTO b_events (ename, edescription, edate, etime, ecost, locationid, eimage)VALUES('$event_name', '$event_description', '$event_date', '$event_time', '$event_cost', '$location', '$event_image')";
    $result=mysql_query($sql);

    if($result){
    header('Location: _events.php');
    }

    else {
    header('Location: _home.php');
    }

?> 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:09:19.877

通过 URL，我将假设您指的是文件本地副本的路径，而不是远程源位置。如果我弄错了，答案可能是“不要使用文件上传”。

当你的 php 脚本被执行时（除非你做了什么特别奇怪的事情），这意味着文件上传已经完成并且文件信息（名称、大小等）被存储在 $_FILE 中。在您能够存储或使用其路径（或确实将其移动到 _gallery）之前，您需要设置该路径。上传后，文件将存储在 $_FILES[fileID]["tmp_name"] 中的路径中。但是，您不能直接在此路径上进行操作，例如使用移动或读取操作（至少我不能在 Apache2 中）。

首先，您需要通过 PHP 的 inbuit 方法将该文件写入您选择的位置。例如：

```
move_uploaded_file($_FILES[fileID]["tmp_name"], "_gallery/".$_FILES[fileID]["name"]); 
```

之后，文件就可以随心所欲地处理了，它的地址（上例中的“_gallery/”.$_FILES[fileID][“name”]）只是另一个 PHP 字符串。

如果 URL 是指该文件的外向地址（有人将其放入浏览器以访问该文件），那么您需要自己构建它。在文件位于 webroot 中的最简单情况下，这意味着将相对路径连接到您刚刚编写的文件。如果您不想使用硬编码的基本 url，[$_SERVER](http://www.php.net/manual/en/reserved.variables.server.php)中的值可能对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:48:41.587

你不能使用 $event_image = $_POST['event_image']; 获取上传的文件。

要访问上传的文件，您必须使用 $_FILES[$name]，其中 $name 是以下文件的名称：

```
<input type="file" name="something" /> 
```

还要确保您的表单具有 method="post" 和 enctype="multipart/form-data"。

$_FILES[$name] 本身将是一个数组（关联数组），带有键：

*   姓名
*   类型
*   尺寸
*   tmp_name
*   错误

文件成功上传后（使用 $_FILES[$name]['error'] == UPLOAD_ERR_OK 进行测试），您需要将其移动到您的首选位置。

移动文件后（通过使用 move_uploaded_file()），您可以获得其名称，并将值分配给您的 $event_image。然后将其保存到数据库中。

如需更多信息，[请阅读此内容](http://php.net/manual/en/features.file-upload.php)。

# xpath - 使用 nokogiri 的 xpath 没有输出

> ID：10139217
> 
> 赞同：0
> 
> 时间：2012-04-13T10:32:55.623
> 
> 标签：xpath, nokogiri

```
require 'nokogiri'
require 'open-uri'

page = Nokogiri::HTML(open("http://wwp.greenwichmeantime.com/"))  

puts page.xpath(".//*[@id='offset']/span[1]").text 
```

这应该输出格林威治标准时间但它什么也没输出，可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:38:50.743

您要查找的元素隐藏在`iframe`. 您要打开的网址是`http://wwp.greenwichmeantime.com/time/scripts/clock-8/runner.php?tz=gmt`。您可以从原始页面上元素的`src`属性中获取它。`iframe`

# css - 使用滑动门设置提交按钮样式时处理“死区”

> ID：10139225
> 
> 赞同：0
> 
> 时间：2012-04-13T10:33:22.113
> 
> 标签：css, button, sliding-doors

我有一些看起来像这样的标记：

```
<div class="button">
   <span class="image"></span>
   <input type="submit" value="Test button">
</div> 
```

CSS：

```
.button{
  background: url('http://img33.imageshack.us/img33/4108/leftd.png');
  width: 10px;
  display: inline-block;
  height: 15px;
}

.image{
  display: inline-block;
  position: absolute;
  width: 16px;
  height: 16px;
  background: url('http://img339.imageshack.us/img339/3112/arrow090.png');
  margin-left: 13px;
}

.button input{
  background: url('http://img853.imageshack.us/img853/7212/righthw.png');
  border: 0;
  display: block;
  font: 11px sans-serif;
  margin-left: 10px;
  padding-left: 23px;
  padding-right: 10px;
  color: #FFFFFF;
  width: auto;
  height: 15px;
} 
```

提交按钮的代码由后端生成，我无法更改，但`spans`和`divs`是可编辑的，因为它们是模板的一部分。我用简单的图形做了一个简单的例子来更好地展示这个问题：http: [//jsfiddle.net/UBS3z/](http://jsfiddle.net/UBS3z/)

div 包含滑动门的左侧部分，大约 10 px 宽。span 包含一个要放置在文本左侧的图标。最后我们有提交按钮本身。

问题是，虽然在视觉上看起来不错，但当用户单击左侧滑动门或图像结束的区域时，该按钮不会记录任何单击。这非常糟糕，因为很大一部分按钮无法点击！这通过单击按钮来演示。如果单击已注册，该脚本将记录到控制台。

反正有没有使用CSS使这些区域可点击？我认为这可能可以使用 Javascript 来解决，但我更喜欢 CSS 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:17:15.763

请参阅小提琴的代码和演示

小提琴：http: [//jsfiddle.net/UBS3z/6/](http://jsfiddle.net/UBS3z/6/)

演示：http: [//jsfiddle.net/UBS3z/6/embedded/result/](http://jsfiddle.net/UBS3z/6/embedded/result/)

是的，您是正确的，可以使用 css 仅查看满足您要求的演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T23:47:08.690

我最终使用了 javascript 解决方案。虽然 Dinesh 的解决方案也可以，但背景图像非常复杂，所以我需要使用图像而不是背景颜色。这是问题的根本原因。

本质上，我只是编写了一个简单的脚本来连接到`button`div 并在提交表单上进行任何点击。

# c# - 使用 Kinect 和 Unity 与头像交互

> ID：10139229
> 
> 赞同：25
> 
> 时间：2012-04-13T10:33:41.823
> 
> 标签：c#, unity3d, kinect

我想根据玩家使用 kinect 和 Unity 的移动来移动头像，有什么好的教程吗？

我们正在使用统一和 Kinect 界面来创建一个简单的应用程序。根据玩家的移动，我们需要移动头像。

我们应该使用`Unity`with `GAKUNITY`、No OpenNI 或任何第三方工具。

有什么好的教程`GakUnity with Kinect`吗？

`GAK`方法`Gadget Accelerator Kit`

我们只想`avatar`在 kinect 界面前移动任何有玩家移动的东西。甚至对手部动作的帮助也高度赞赏。

您还可以分享有关统一和 kinect 编程的有用链接或书籍。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T07:45:39.693

> ## [使用 OpenNI 和 Unity3D 自定义 Kinect 手势识别](http://kinect.dashhacks.com/kinect-guides/2011/06/24/custom-kinect-gesture-recognition-using-openni-and-unity3d)
> ^(kinect.dashhacks.com)
> 
> 一位提示者以使用 OpenNI 和 Unity 3D 的 Kinect 自定义手势识别的形式向我推荐了一个小技巧。这允许您创建自己的自定义手势，这些手势可以通过软件界面被 kinect 识别。

> ## [Unity 和 Kinect 教程](http://www.nightmarekitty.com/2011/10/28/unity-and-kinect-tutorial/)
> ^(nightmarekitty.com)
> 
> 在本章中，我们将使用一个非常流行的游戏引擎 Unity。通过将 OpenNI、Nite 和 Sensor Kinect 集成到 Unity 中，我们将控制 3d 角色和多个用户界面。在我们介绍了主要组件之后，我们将从下往上构建每个组件的示例。

> ## [Kinect Wrapper 示例项目](http://wiki.etc.cmu.edu/unity3d/images/f/f4/NewKinect.zip)
> ^(wiki.etc.cmu.edu)
> 
> 这个场景向您展示了如何通过在 Kinect 跟踪的每个骨骼上放置球体来生成/跟踪骨架，以及如何使用 kinect 来控制您的模型。使用它来感受 Kinect 的能力。它还向您展示了如何准备您的游戏对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:36:42.713

我不熟悉 Unity 3d，但您可以尝试将 kinect 与 XNA 一起使用。在最新版本的 Kinect for windows SDK 1.5 和 Developer Tookit 1.5.1 中，有一个示例演示了如何使用 Kinect 和 XNA 与 3d 头像进行交互，您可以在[http://msdn.microsoft.com/en上找到更多信息-我们/图书馆/jj131041](http://msdn.microsoft.com/en-us/library/jj131041)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-23T10:07:01.720

我不知道 GAKUNity，但您可以使用 zigfu 插件进行 unity3d 并完成您的项目。它有示例代码和字符供您参考，示例代码注释很好。

您可以只导入骨骼，将骨骼拖到 zigskeleton 脚本上。只需通读 zig 骨架脚本，您就会了解它们使用的功能和结构。

你甚至可以参考 MEET THE KINECT 这本书，他们解释了如何在统一中使用 zigfu。

# java - Java Scheduler Quartz Cron 触发时间设置

> ID：10139232
> 
> 赞同：3
> 
> 时间：2012-04-13T10:33:50.227
> 
> 标签：java, quartz-scheduler, crontrigger, cronexpression

我正在使用 Quartz 在 Java 中安排我的工作。我使用“CronTrigger”来设置我的时间。我想每天晚上 11:55 解雇我的工作。我应该在 setCronExpression(" ") 中写什么来完成我的工作。.??

我对《守则》的看法是：---

```
CronTrigger trigger = new CronTrigger();
trigger.setName("runMeJob");
trigger.setCronExpression("0 55 23 * * ?"); 
```

上面的代码是正确的还是我应该做一些修改？？？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T10:40:27.103

它将是：**0 55 23 1/1 * ？***

有一个非常适合您的网站：[CronMaker](http://www.cronmaker.com/)

> CronMaker 是一个实用程序，可帮助您构建 cron 表达式。CronMaker 使用 Quartz 开源调度器。生成的表达式基于 Quartz cron 格式。

# java - 运行我的 java 代码可以在调试器中运行，但不能在运行中运行

> ID：10139236
> 
> 赞同：-1
> 
> 时间：2012-04-13T10:33:52.120
> 
> 标签：java, frames

运行我的 java 代码可以在调试器中运行，但不能在运行中运行。在 Eclipse 调试器中，它显示了我的 jframe。

但是，当我运行它时，我的框架不会出现。

我相信我搞砸了我的 EventListener 和所有这些。

```
private class ButtonHandler implements ActionListener{
    JButton button;

    public void actionPerformed(ActionEvent event) {
        find(event.getSource());

        button = buttonHolder[indexK[kCount-1]][indexJ[jCount-1]];

        if((button.getIcon() == red && choice1 == 1) || (button.getIcon() == green && choice1 == 0)){
            JOptionPane.showMessageDialog(null, "You chose the wrong color!");
            return;
        }

        if(turn ==1){
            if(clicks != 1){
                if(button.getIcon() == red){
                    clicks++;
                    temp = button;
                }else if (button.getIcon() == green){
                    clicks++;
                    temp = button;
                }else{
                    kCount=0;
                    jCount=0;
                }
            }else{
                if((button.getIcon() == green) ||  (button.getIcon() == red)){
                    //do nothing
                }else if(temp.getIcon() == green && (grid[indexK[1]][indexJ[1]] == 2 || grid[indexK[1]][indexJ[1]] == 3 || grid[indexK[1]][indexJ[1]] == 4) && button.getIcon() != green && ((indexK[0]+1 ==indexK[1] && indexJ[0] == indexJ[1]) || (indexK[0] ==indexK[1] && indexJ[0]+1 == indexJ[1]) || (indexK[0] ==indexK[1] && indexJ[0]-1 == indexJ[1])) ){
                    temp.setIcon(null);
                    button.setIcon(green);
                    grid[indexK[1]][indexJ[1]] = 2;

                    if(indexK[0] == 0 || indexK[0]== 9){
                        grid[indexK[0]][indexJ[0]] = 4;
                    }else{
                        grid[indexK[0]][indexJ[0]] =3;
                    }
                    found = 2;

                }else if(temp.getIcon() == red && (grid[indexK[1]][indexJ[1]] == 1 || grid[indexK[1]][indexJ[1]] == 3 || grid[indexK[1]][indexJ[1]] == 5) && button.getIcon() != red && ((indexK[0]+1 ==indexK[1] && indexJ[0] == indexJ[1]) || (indexK[0] ==indexK[1] && indexJ[0]+1 == indexJ[1]) || (indexK[0]-1 ==indexK[1] && indexJ[0] == indexJ[1]))){
                    temp.setIcon(null);
                    button.setIcon(red);
                    grid[indexK[1]][indexJ[1]] = 1;

                    if(indexJ[0] == 0 || indexJ[0]== 9){
                        grid[indexK[0]][indexJ[0]] = 5;
                    }else{
                        grid[indexK[0]][indexJ[0]] =3;
                    }
                    found = 2;
                }

                clicks=0;
                kCount=0;
                jCount=0;
            }

        }
    }

} 
```

}

如果你没有看到任何问题，你能想出它可能会搞砸的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:46:45.710

首先，仔细检查您是否以相同的模式运行它。为 Applet 模式制作的程序与 Application 不同。

如果这不起作用：

如果作为 Applet 运行：检查您是否具有 init 函数。

如果作为应用程序运行：检查您是否在运行配置中定义了主类。如果您这样做了，请确保您在其中运行 main() 方法。

# extjs - ExtJS 4 扩展 Ext.data.Connection

> ID：10139240
> 
> 赞同：0
> 
> 时间：2012-04-13T10:34:13.380
> 
> 标签：extjs

我尝试扩展 Connection 类，就像 Ext.Ajax 所做的那样，以获得一个可以设置一些默认值的中心点。

```
 Ext.define( 'App.helper.HttpApi', {
    extend   : 'Ext.data.Connection',
    singleton: true,

    request: function( oConf ) {

      oConf.url = '/index.php';
      oConf.params.vers = '1.1.json';
      oConf.params...

      this.callParent( oConf );
    }
  } ); 
```

我得到：“未捕获的 Ext.Error：未指定 URL” 但是正如您所看到的，指定了 url……不知何故，它在 Ext 代码的深处迷失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:04:00.770

你得到的错误是由`setOptions`方法抛出的`Ext.data.Connection`

所以你需要在`Ext.data.Connection`调用构造函数时提供 url 以便所有进一步的方法都可以使用该 url

```
Ext.define( 'App.helper.HttpApi', {
    extend   : 'Ext.data.Connection',
    singleton: true,

    constructor : function (config)
    {
        config = config || {};
        Ext.applyIf(config, {
            url : '/index.php'
        });

        this.callParent(config);
    },

    request: function( oConf ) {
      oConf.params.vers = '1.1.json';
      oConf.params...

      this.callParent( oConf );
    }
}); 
```

或者如果您要对所有请求使用单个 url，那么您可以直接将其指定为该单例的默认值

```
Ext.define( 'App.helper.HttpApi', {
    extend   : 'Ext.data.Connection',
    singleton: true,
    url : '/index.php',

    request: function( oConf ) {
      oConf.params.vers = '1.1.json';
      oConf.params...

      this.callParent( oConf );
    }
}); 
```

# matlab - MATLAB：将列组提取到子矩阵中？

> ID：10139243
> 
> 赞同：1
> 
> 时间：2012-04-13T10:34:23.613
> 
> 标签：matlab, extraction, data-extraction, submatrix

我有一个数据集，我想在其中提取第 1-3、7-9、13-15 列，一直到矩阵的末尾

例如，我使用了标准的魔法函数来创建一个矩阵

A=魔法(10)

一个=

```
92    99     1     8    15    67    74    51    58    40
98    80     7    14    16    73    55    57    64    41
 4    81    88    20    22    54    56    63    70    47
85    87    19    21     3    60    62    69    71    28
86    93    25     2     9    61    68    75    52    34
17    24    76    83    90    42    49    26    33    65
23     5    82    89    91    48    30    32    39    66
79     6    13    95    97    29    31    38    45    72
10    12    94    96    78    35    37    44    46    53
11    18   100    77    84    36    43    50    27    59 
```

我知道我可以使用以下命令以 3 的间隔从 1 开始提取单列：

Aex=a(:,1 : 3 : 结束)

Aex =

```
92     8    74    40
98    14    55    41
 4    20    56    47
85    21    62    28
86     2    68    34
17    83    49    65
23    89    30    66
79    95    31    72
10    96    37    53
11    77    43    59 
```

假设我想提取列组（例如列 1-3、7-9 等）。

有没有办法做到这一点而不必手动指出所有的列号？

谢谢你的帮助！拉斯穆斯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T10:43:46.053

这是你想要的：

```
 Aex = A(:,[1:3 7:9]) 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:17:20.707

我假设您希望将结果全部连接到另一个大矩阵中？

如果是这种情况，请尝试以下尺寸：

```
result = A(diag(0:2)*ones(3,floor((size(A,2) - 3)/6) + 1) + ...
            ones(3,floor((size(A,2) - 3)/6) + 1)*diag(1:6:(size(A,2)-3))) 
```

这可能会通过一些矩阵数学规则来缩短。您还可以参数化这些值，以便可以对其进行修改以做比这个问题所期望的更多的事情（也可能更有意义），

```
a = 3;           
b = 6;          

result = A(diag(0:a-1)*ones(a,floor((size(A,2) - a)/b) + 1) + ...
            ones(a,floor((size(A,2) - a)/b) + 1)*diag(1:b:(size(A,2)-a))) 
```

其中`a`是“组”的大小（`length([1 2 3]) = length([7 8 9]) = ... = 3`）等，`b`是列间距（`[1...7...13...]`在您的示例中）

如果您想将它们分开，我将它们放在此处的单元格中，但它们可以转到您需要的任何地方：

```
a = 3;
b = 6;
results = {};
for Cols = 1:b:(size(A,2)-a)
    results{end+1} = A(:, Cols:(Cols+2));
end 
```

我没有检查其中任何一个的速度，但我认为第一个可能更快。您可能希望将其拆分为多个术语，以使其更具可读性，我只是将其放在一行中（这并不总是编写代码的最佳方式）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T10:01:17.850

执行此操作的简单方法：

```
M = magic(10);

n = size(M,2)
idx = sort([1:3:n 2:3:n 3:3:n])
M(:,idx) 
```

* * *

但是，如果删除模式比您想要保留的列模式更简单，则可以使用它来代替：

```
A = magic(10);
B = A;
B(:,4:3:end)=[];
B(:,4:3:end)=[]; %Yes 3x the same line of code.
B(:,4:3:end)=[]; 
```

# c# - 自动插入空的基础方法体

> ID：10139244
> 
> 赞同：3
> 
> 时间：2012-04-13T10:34:26.923
> 
> 标签：c#, visual-studio-2010

如果我有一个带有一些抽象方法的基类，有没有办法让 Visual Studio 自动在新的派生类中插入需要为我实现的方法的空主体（就像你可以使用 Eclipse 和 Java 一样）？

像这样：

```
public abstract class foo
{
    public virtual void bar()
    {
       doSomething();
    }
}

public class Derived : foo
{
    //somehow tell VS to insert this without me having to write everything
    public override void bar()
    {
       base.bar();
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T10:54:25.727

是和否，在某种程度上。

1-如果基类是抽象的，那么当 VS 将显示一个智能标签，它为所有抽象方法提供存根实现，但不是虚拟方法。这与实现接口相同。

![在此处输入图像描述](../Images/f3c7eb9ef087dedb409f3127d371e361.png)

2- 对于虚拟方法，您不需要键入所有内容。在派生类中，您只需键入`override`关键字，然后从智能感知列表中选择要覆盖的相关方法。该列表将过滤到类中尚未覆盖的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:38:54.007

不，有一种方法可以生成已实现的方法，但具有不同的主体，其中包含

```
throw new NotImplementedException(); 
```

在界面上的 VisualStudio 中右键单击 -> ImplementInterface

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T10:39:53.617

您可以让 Visual Studio 自动实现接口。但是一次为虚拟方法添加方法存根是不可能的。您必须开始编写*覆盖*才能让 IntelliSense 为您提供可覆盖方法的列表。

我认为没有这样的功能的主要原因是你不需要重写方法。而在实现接口时，您必须实现所有方法来满足接口创建的要求。

# ruby-on-rails - 如何解决“无法批量分配受保护的属性：translations_attributes”错误？

> ID：10139245
> 
> 赞同：2
> 
> 时间：2012-04-13T10:34:27.520
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, translation, globalization

我正在使用 Ruby on Rails (3.2.2)、[globalize3](https://github.com/svenfuchs/globalize3) (0.2.0) 和[batch_translations](https://github.com/fidel/batch_translations) (0.1.2) ruby​​-gems。我想解决使用 batch_translations ruby​​-gem 时产生的以下问题：

```
ActiveModel::MassAssignmentSecurity::Error in Admin::ArticlesController#update

Can't mass-assign protected attributes: translations_attributes 
```

在我的`ROOT_RAILS/Gemfile`文件中，我有：

```
...
gem 'globalize3'
gem 'batch_translations' 
```

在我的`ROOT_RAILS/app/models/admin/article.rb`文件中，我有：

```
class Admin::Article < ActiveRecord::Base
  translates :title

  # This is needed to make the batch_translations to work.
  accepts_nested_attributes_for :translations

  ...
end 
```

在我的`ROOT_RAILS/app/views/admin/articles/_form.html.erb`文件中，我有：

```
<%= form_for(@admin_article, :url => admin_article_path) do |f| %>
    <%= f.label :title %><br />
    English translation:
    <%= f.text_field :title %>

    Italiano translation:
    <%
      # Note: I am using the '<%= f...' instad of '<% f...' otherwise
      # batch_translations doesn't output the input field in the
      # front-end content.
    %>
    <%= f.globalize_fields_for :it do |g| %>
      <%= g.text_field :title %>
    <% end %>
<% end %> 
```

在我的`ROOT_RAILS/app/controllers/admin/articles_controller.html.erb`文件中，我有：

```
class Admin::ArticlesController < ApplicationController

  def update
    @admin_article = Article.find(params[:id])

    respond_to do |format|
      if @admin_article.update_attributes(params[:article])
        format.html { redirect_to admin_article_path(@admin_erticle), notice: 'Article was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @admin_article.errors, status: :unprocessable_entity }
      end
    end
  end

  ...
end 
```

*当我显示编辑表单所有工作时，但是当我提交该表单时，我得到了上面提到的错误。* **如何解决上述错误？**

* * *

**更新**

我通过在文件中使用以下代码找到了解决方案`ROOT_RAILS/app/models/admin/article.rb`：

```
class Admin::Article < ActiveRecord::Base
  translates :title

  attr_accessible :translations_attributes
  accepts_nested_attributes_for :translations

  ...
end 
```

**...但是`:translations_attributes`确定可访问性吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T11:33:49.697

我有同样的问题。我认为这是一个很好的解决方案：

在我的 Gemfile 文件中，我有：

```
gem 'globalize3', '~> 0.2.0'
gem 'batch_translations', '~> 0.1.2' 
```

在我的 application.rb 文件中，我有：

```
config.i18n.available_locales = [:es, :en] 
```

在我的模型（category.rb）中，我有：

```
class Category < ActiveRecord::Base
  attr_accessible :name, :translations_attributes

  translates :name

  accepts_nested_attributes_for :translations, :reject_if => proc { |attributes| attributes['name'].blank? }

  validates :name, :presence => true
end

Category::Translation.class_eval do
  attr_accessible :name
end 
```

在我的助手（application_helper.rb）中，我有：

```
module ApplicationHelper

  def find_available_locales
    locales = {}
    I18n.available_locales.each { |locale| locales[locale] = t("locale_selector.#{locale}") }
    locales
  end

  def available_locales
    @available_locales ||= find_available_locales
  end

end 
```

在我的翻译文件中，我有：

en.yml

```
en:
  locale_selector:
    es: 'Spanish'
    en: 'English' 
```

es.yml

```
en:
  locale_selector:
    es: 'Español'
    en: 'Inglés' 
```

在我的视图文件（_form.html.erb）中，我有：

```
<%= form_for @category, html: { class: 'form-horizontal' } do |f| %>
  <% available_locales.each_pair do |locale, name_locale| -%>
    <% if locale == I18n.locale -%>
      <div class="control-group">
        <%= f.label :name, class: 'control-label' %>
        <div class="controls">
          <%= f.text_field :name, class: 'text_field' %> <i>(<%= name_locale %>)</i>
        </div>
      </div>
    <% else -%>
      <%= f.globalize_fields_for locale do |g| -%>
        <div class="control-group">
          <%= g.label :name, class: 'control-label' %>
          <div class="controls">
            <%= g.text_field :name, class: 'text_field' %> <i>(<%= name_locale %>)</i>
          </div>
        </div>
      <% end -%>
    <% end -%>
  <% end -%>

  <div class="form-actions">
    <%= f.submit nil, class: 'btn btn-primary' %>
    <%= link_to t('.cancel', default: t("helpers.links.cancel")),
                categories_path, class: 'btn' %>
  </div>
<% end %> 
```

如您所见，问题在于 rails 3.2 需要知道哪些属性可以访问，但 globalize 没有指定这一点。所以我在我的模型（类别）中使用 attr_accessible 定义它，但我也需要为翻译添加它，因此我在同一个文件中添加几行来设置此模型中每个翻译可访问的名称（类别::翻译.class_eval）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T11:37:15.003

这将是最新版本的 rails 的问题，因为他们已对其进行了修补。您可以在配置中更改它。有关详细信息，请参阅[http://weblog.rubyonrails.org/2012/3/30/ann-rails-3-2-3-has-been-released/](http://weblog.rubyonrails.org/2012/3/30/ann-rails-3-2-3-has-been-released/)。

我可以确认您的 attr_accessible 解决方案是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T11:52:23.997

是的。Rails 可能被配置为只允许大量分配明确允许的属性。

```
# This is mass assignment
Model.find(params[id]).update_attributes params[:model] 
```

出于安全考虑，强制执行白名单方法。`params[:model]`可以包含任何内容，甚至是表单中不可用的属性。攻击者可以利用这一点并`admin: true`与其他值一起发送。

如果没有`attr_accessible`，攻击者将被授予管理员权限。但是，如果`:admin`没有在白名单上，则`update_attributes`不会更新该特定属性。

宝石可能在引擎盖下进行了质量分配。确保您允许他们写入自己的属性。

# apache-flex - Flex mobile：在条形图中缩放和滚动

> ID：10139249
> 
> 赞同：0
> 
> 时间：2012-04-13T10:34:41.520
> 
> 标签：apache-flex, mobile, charts, scroll, zooming

我正在制作一个带有条形图的移动应用程序。我正在使用 Flash Builder 4.6 和 Flex SDK 4.6.0。

在我的应用程序中，我使用了 Flash Builder 的内置条形图。是否可以使用此图表进行缩放和滚动。请记住，它是一个移动应用程序 (iPad)，因此它需要使用手势。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:54:57.577

将图表添加到 Group 中，并在 Group 上添加gestureZoom。

```
private function onGestureZoom(event:TransformGestureEvent):void{
    if(canvas.scaleY.valueOf() >= 1)
    {
        canvas.scaleX *= event.scaleX;
        canvas.scaleY *= event.scaleY;
    }else
    {
        canvas.scaleX = 1;
        canvas.scaleY = 1;
    }
}

<s:Group id="canvas"  gestureZoom="onGestureZoom(event)" width="100%" height="100%">
   <!-- chart (set width and height to 100%)-->
</s:Group> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:54:43.930

谷歌上关于弹性图表缩放的[第一个](http://blog.ninjacaptain.com/2010/03/flex-chart-zoom-window/)和[第六个结果。](http://www.iwobanas.com/2009/07/scrolling-and-zooming-chart-with-chartscroller/)

这并没有显示在这种情况下如何使用手势，但我还没有看到任何用于 flex 移动的图表引擎，所以恐怕你必须自己编写。但我看不出滚动不起作用的任何原因。虽然不确定捏缩放。不过，不要指望 MX 图表中的黄油般的表现。在具有大型数据集的移动设备上，它们的速度非常慢。

# c++ - C++ 中的共享队列

> ID：10139251
> 
> 赞同：6
> 
> 时间：2012-04-13T10:34:47.263
> 
> 标签：c++, multithreading, boost, queue, boost-thread

我只是简单地从网络获取数据包，并将它们排入一个线程中，然后在另一个线程中使用这些数据包（出列）。

所以我决定使用 boost 库来创建一个基于 [https://www.quantnet.com/cplusplus-multithreading-boost/的共享队列](https://www.quantnet.com/cplusplus-multithreading-boost/)

```
template <typename T>
class SynchronisedQueue
{
private:
    std::queue<T> m_queue;  // Use STL queue to store data
    boost::mutex m_mutex;   // The mutex to synchronise on
    boost::condition_variable m_cond;// The condition to wait for

public:

    // Add data to the queue and notify others
    void Enqueue(const T& data)
    {
        // Acquire lock on the queue
        boost::unique_lock<boost::mutex> lock(m_mutex);

        // Add the data to the queue
        m_queue.push(data);

        // Notify others that data is ready
        m_cond.notify_one();

    } // Lock is automatically released here

    // Get data from the queue. Wait for data if not available
    T Dequeue()
    {

        // Acquire lock on the queue
        boost::unique_lock<boost::mutex> lock(m_mutex);

        // When there is no data, wait till someone fills it.
        // Lock is automatically released in the wait and obtained 
        // again after the wait
        while (m_queue.size()==0) m_cond.wait(lock);

        // Retrieve the data from the queue
        T result=m_queue.front(); m_queue.pop();
        return result;

    } // Lock is automatically released here
}; 
```

> 问题是，虽然没有获取任何数据，但 Dequeue() 方法会阻塞我的消费者线程，当我想终止消费者线程时，有时我无法结束或停止它。

结束 Dequeue() 阻塞的建议方法是什么，以便我可以安全地终止消耗数据包的线程？有什么想法建议吗？

PS：网站 [https://www.quantnet.com/cplusplus-multithreading-boost/](https://www.quantnet.com/cplusplus-multithreading-boost/) 使用“boost::this_thread::interruption_point();” 用于停止消费者线程......由于我的遗留代码结构，这对我来说是不可能的......

**根据答案，我像这样更新共享队列：**

```
#include <queue>
 #include <boost/thread.hpp>  

template <typename T>
class SynchronisedQueue
{
public:

    SynchronisedQueue()
    {
        RequestToEnd = false;  
        EnqueueData = true;
    }
    void Enqueue(const T& data)
    {
        boost::unique_lock<boost::mutex> lock(m_mutex);

        if(EnqueueData)
        {
            m_queue.push(data);
            m_cond.notify_one();
        }

    } 

    bool TryDequeue(T& result)
    {
        boost::unique_lock<boost::mutex> lock(m_mutex);

        while (m_queue.empty() && (! RequestToEnd)) 
        { 
            m_cond.wait(lock);
        }

        if( RequestToEnd )
        {
             DoEndActions();
             return false;
        }

        result= m_queue.front(); m_queue.pop();

        return true;
    }

    void StopQueue()
    {
        RequestToEnd =  true;
        Enqueue(NULL);        
    }

    int Size()
    {
        boost::unique_lock<boost::mutex> lock(m_mutex);
        return m_queue.size();

    }

private:

    void DoEndActions()
    {
        EnqueueData = false;

        while (!m_queue.empty())  
        {
            m_queue.pop();
        }
    }

    std::queue<T> m_queue;              // Use STL queue to store data
    boost::mutex m_mutex;               // The mutex to synchronise on
    boost::condition_variable m_cond;            // The condition to wait for

    bool RequestToEnd;
    bool EnqueueData;
}; 
```

**这是我的试驾：**

```
#include <iostream>
#include <string>

#include "SynchronisedQueue.h"

using namespace std;

SynchronisedQueue<int> MyQueue;

void InsertToQueue()
{
    int i= 0;

    while(true)
    {
        MyQueue.Enqueue(++i);
    }

}

void ConsumeFromQueue()
{
    while(true)
    {
        int number;

        cout << "Now try to dequeue" << endl;

        bool success = MyQueue.TryDequeue(number);

        if(success)
        {

            cout << "value is " << number << endl;

        }

        else
        {
            cout << " queue is stopped" << endl;
            break;

        }
    }

    cout << "Que size is : " << MyQueue.Size() <<  endl;
}

int main()
{

    cout << "Test Started" << endl;

    boost::thread startInsertIntoQueue = boost::thread(InsertToQueue);
    boost::thread consumeFromQueue = boost::thread(ConsumeFromQueue);

    boost::this_thread::sleep(boost::posix_time::seconds(5)); //After 5 seconds

    MyQueue.StopQueue();

    int endMain;

    cin >> endMain;

    return 0;
} 
```

**现在它似乎工作......基于新的建议：**

我将停止方法更改为：

```
void StopQueue()
    {
        boost::unique_lock<boost::mutex> lock(m_mutex);
        RequestToEnd =  true;
        m_cond.notify_one();          
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T10:49:25.960

2个简单的解决方案让线程结束：

1.  在队列上发送结束消息。
2.  向条件变量添加另一个条件以命令结束

    ```
    while(queue.empty() && (! RequestToEnd)) m_cond.wait(lock);
    if (RequestToEnd) { doEndActions(); }
    else { T result=m_queue.front(); m_queue.pop(); return result; } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T10:51:39.440

首先，你真的需要终止线程吗？如果没有，不要。

如果你必须这样做，那就排队买一颗自杀药。我通常向 T 发送一个 NULL 强制转换。线程检查 T，如果为 NULL，则清理，返回，然后死掉。

此外，您可能需要首先通过删除和删除（）所有项目来清除队列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T11:18:34.783

另一个应该考虑的选择是不要在线程中无限阻塞。换句话说，为您的阻塞调用添加一个超时时间，如下所示：

```
 bool TryDequeue(T& result, boost::chrono::milliseconds timeout)
    {
        boost::unique_lock<boost::mutex> lock(m_mutex);
        boost::chrono::system_clock::time_point timeLimit = 
            boost::chrono::system_clock::now() + timeout;

        while (m_queue.empty())
        { 
            if (m_cond.wait_until(lock, timeLimit) == 
                boost::condition_variable::cv_status::timeout)
            {
                return false;
            }
        }

        result = m_queue.front(); m_queue.pop();

        return true;
    } 
```

然后在你的线程中，只有一个变量来指示线程是否仍在运行（我冒昧地让你的消费者进入一个类）：

```
class Consumer
{
public:
    boost::shared_ptr<Consumer> createConsumer()
    {
        boost::shared_ptr<Consumer> ret(new Consumer());
        ret->_consumeFromQueue = boost::thread(&Consumer::ConsumeFromQueue, ret.get());
        return ret;
    }
protected:
    Consumer()
    : _threadRunning(true)
    {
    }

    ~Consumer()
    {
        _threadRunning = false;
        _consumeFromQueue.join();
    }

    void ConsumeFromQueue()
    {
        while(_threadRunning == true)
        {
            int number;

            cout << "Now try to dequeue" << endl;

            bool success = MyQueue.TryDequeue(number);

            if(success)
            {

                cout << "value is " << number << endl;

            }

            else
            {
                cout << " queue is stopped" << endl;
                break;

            }
        }

        cout << "Que size is : " << MyQueue.Size() <<  endl;
    }

    bool _threadRunning;
    boost::thread _consumeFromQueue;
} 
```

无需破解您的队列类，以便它可以在线程中使用，为其提供具有超时的正常接口，然后根据用例以正确的方式使用它。

我在此处详细说明了为什么这是线程遵循的良好模式：

[http://blog.chrisd.info/how-to-run-threads/](http://blog.chrisd.info/how-to-run-threads/)

# delphi - 如何在不重新启动 IDE 的情况下加载更新的组件包？

> ID：10139252
> 
> 赞同：5
> 
> 时间：2012-04-13T10:34:53.987
> 
> 标签：delphi, development-environment, custom-component, c++builder-xe

在 Delphi 中开发新组件时，我遇到了这种低效率。每次我对源代码进行增量更改（例如，错误修复）时，我都会构建新组件并将其安装在 Component Palette 上。还行吧。在 IDE 的另一个实例中，我打开了一个正在使用该组件的项目。它是我的一个表单上的一个视觉组件。要应用新的更改，需要重新启动第二个实例——关闭并重新打开表单或项目是不够的。这个过程可以优化吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:06:11.317

如果您想在不终止 IDE 的情况下重新加载设计时包，您可以：

1.  打开安装包对话框。
2.  取消选中包并重新检查它。

[编辑删除不必要的步骤。]

# ruby-on-rails - 如何在 AR 请求中使用范围和连接？

> ID：10139254
> 
> 赞同：0
> 
> 时间：2012-04-13T10:35:21.573
> 
> 标签：ruby-on-rails, activerecord, arel

就我而言，我有一个模型产品 has_one 位置

我使用地理编码器 gem 来搜索距离较近的位置。

请求 Location.near([0, 0], 100) 如下所示：

> 选择位置。*, 6371.0 * 2 * ASIN(SQRT(POWER(SIN((0 - locations.latitude) * PI() / 180 / 2), 2) + COS(0 * PI() / 180) * COS( location.latitude * PI() / 180) * POWER(SIN((1 - locations.longitude) * PI() / 180 / 2), 2) )) 作为距离，CAST(DEGREES(ATAN2( RADIANS(longitude - 1) ), RADIANS(latitude - 0))) + 360 AS 十进制) % 360 AS 方位来自“位置” WHERE (6371.0 * 2 * ASIN(SQRT(POWER(SIN((0 - locations.latitude) * PI() / 180 / 2), 2) + COS(0 * PI() / 180) * COS(locations.latitude * PI() / 180) * POWER(SIN((1 - locations.longitude) * PI() / 180 / 2), 2) )) <= 20) 按距离排序

我想做这样的事情：

```
Product.where(...).joins(:location).dosomething 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:04:48.013

另一种可能性，因为合并范围似乎不起作用：

```
class Product
  scope :near, lambda { |coord, dist| where(:id => Location.near(coord, dist).all.map(&:locationable_id) }

  ...
end 
```

和其他答案中的用法一样：

```
Product.near([0, 0], 100) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:52:30.720

`Location#near`是命名范围吗？如果是这样，您可以使用运算符将​​其与您的`Product`范围合并`&`。我认为这应该有效：

```
class Product
  scope :near, lambda { |coord, dist| joins(:location) & Location.near(coord, dist) }

  ...
end 
```

然后你可以像这样使用它：

```
Product.near([0, 0], 100) 
```

# sql-server - 使用远程 SQL Server 数据库安装 Team Foundation Server

> ID：10139255
> 
> 赞同：3
> 
> 时间：2012-04-13T10:35:24.220
> 
> 标签：sql-server, tfs

我正在评估 TFS 2010。我正在尝试安装到我们位于域中并运行 Windows 2008 R2 Standard 的应用程序服务器上。

我们已经在一个单独的 Windows 2008 机器上安装了一个 SQL Server，我想使用它——它在同一个域中。

安装 TFS 后，我正在使用高级配置向导来尝试完成设置。有 3 位报告错误：“数据库”和“报告”。

当我输入 SQL Server 详细信息时，TFS 给了我这个错误：

```
TF255049: A connection cannot be made to the server that is running SQL Server. Verify that you have entered the correct name for the server, including the instance name, that the server you attempting to connect to is online, and that you have required permissions to connect... (it goes on a bit more) 
```

我安装 TFS 的服务器是一个运行多个 .Net 网站的 Web 服务器——所有这些网站都可以毫无问题地连接到 SQL Server。

我已经尝试过 IP 地址、机器名称、实例名称 - 都报告相同的错误。

以前有人遇到过这种情况吗？

**编辑：**奇怪的是，如果我进入向导中的“报告服务器”页面并输入 SQL Server 名称，它会正确连接以获取报告服务器 URL 和报告管理器 URL。所以看起来这可能与用户帐户有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:39:02.100

有两件事浮现在脑海：

您需要确保 TFS 服务帐户对数据库服务器具有权限。

如果 Windows 防火墙在 TFS 盒子上打开，请将其关闭一两分钟，然后重试。

如果解决了问题，请重新打开它并打开 SQL 端口。

高温高压

# network-protocols - IPv6 IP 地址的大小为 128 位而不是 256 位的原因？

> ID：10139258
> 
> 赞同：1
> 
> 时间：2012-04-13T10:35:40.443
> 
> 标签：network-protocols, ipv6

我正在和一位朋友讨论 IPv6 的一些内部结构。

众所周知，IPv6 IP 地址的大小为 128 位（对于 IPv4，它是 32 位）。

他问我这个大小设置为 128 位的原因是什么 - 256 位会产生更“全面”的大小，并且两种大小都应该足够大，以避免将来缺少 IP 地址。

我认为它必须在像路由器这样的嵌入式设备上这样做，你必须更加小心内存要求，而 128 是两个中最小的一个，这样你肯定不会在未来用完这种大小的 IP 地址.

但我不得不承认不知道一个明确的答案。

那么，网络奇才们，为什么选择 128 位作为 IPv6 地址的大小而不是 256 位的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T10:37:34.003

我怀疑是因为让它们大于 128 位真的没有意义。

请记住，地址中的每个位/字节都需要包含在标头中。换句话说，地址越大，网络上的开销就越大。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T12:39:15.890

根据[FreeBSD 手册](http://www.freebsd.org/doc/handbook/network-ipv6.html)，128 位将在我们星球上每平方米提供大约 6.67 * 10^27 个 IPv6 地址。很难认为这永远不够。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-05T19:57:15.117

IPv6 在其开发过程中被称为“IPng”（IP Next Generation），并且是 IETF 在 1990 年代中期的努力。实际上有几个提议的 IPv4 继任者，经过一段时间的测试、辩论和分析，最终的候选 IPng 实际上是 64 位解决方案（SIPP）和可变长度（但默认为 128 位）解决方案之间的折衷方案（大号）。折衷方案大致使用了较长的地址格式，但将长度固定为 128 位。

RFC 1752，“IP 下一代协议的建议”对于那些对更多信息感兴趣的人来说是一个很好的参考。

/约翰

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-30T15:34:03.737

原因 #1：使用 256 位地址绝对没有意义。原因#2：这些额外的比特必须与每个通过网络的数据包头一起传输。这至少会在 Internet 上增加几 TB 的额外负载。

我一直想知道为什么他们没有为 64 位地址设计。即使地球上的每台设备和我们的太阳系同时需要一个 IP 地址，这仍然绰绰有余。

2^64 大约是 18,000,000,000,000,000 个地址。对于下一个千年来说，这已经绰绰有余了。更少的比特意味着更高的速度和更低的成本。

# shell - 从包含多个脚本的文件运行特定脚本（shell/perl）

> ID：10139264
> 
> 赞同：0
> 
> 时间：2012-04-13T10:36:31.070
> 
> 标签：shell

假设我有一个文件（.csh）

文件内容

```
Script_1
{
 code of script1
}

Script_2
{
    code of script2
 }
.
.
.

Script_n
{

 code of script_n

} 
```

现在的问题是，如果我们像

```
 ./file.csh -script1 <other arguments> 
```

它应该只执行脚本 1 代码同样，如果我们运行

```
./file.csh  -script2 <other arguments> 
```

它应该只执行脚本 2 代码

任何人都可以告诉这个想法如何实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:42:50.610

这是我的解决方案，希望对您有所帮助。

使用 all_script 文件存储所有内容。我的示例文件内容是：

```
Script_1
{
 echo executing script1
 echo 1st arg = $1
 echo 2nd arg = $2
 echo rest arg = $*
}

Script_2
{
 echo script2  
 echo 1st arg = $1
 echo 2nd arg = $2
 echo rest arg = $*

}

Script_3
{
echo script3
 echo 1st arg = $1
 echo 2nd arg = $2
 echo rest arg = $*
} 
```

我的脚本运行这个：

```
#! /bin/csh -f

set script_name = `echo $argv[1] | sed 's/-s/S/g' | sed 's/t/t_/g'`
set script_arg =  "$argv[2-$#argv]"  

#grep the relevent script
grep -A1000 $script_name all_script | grep -B1000 -m1 "}" | sed 's/Script_[0-9]//g' | sed 's/{//g' | sed 's/}//g' > myscript 
csh ./myscript $script_arg

echo "DONE :)" 
```

根据脚本的最大长度更改数字 1000。另外，请注意您已在文件中使用 Script_1 作为脚本名称。当您尝试使用参数 -script1 访问它时。我的脚本会处理这个问题，但是最好使用其中一种格式，并且大小写也应该是统一的……否则你会带来不必要的复杂性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:40:07.143

`$n`您可以通过where `n`is integer > 0 按传递的参数顺序获取命令行参数

```
#!/bin/csh
if ($#argv < 1) then
    echo "Usage: $0 (-script1|-script2) <args>"
    exit 0
endif

if ($1 == '-script1') then
# run Script_1
else
# run Script_2
endif; 
```

如果您想将除第一个参数之外的所有参数放在一起，您可以使用`shift`：

```
#!/bin/csh

// without argument by default operates on $argv which is all the arguments 
// passed via command line
shift 

echo $argv // now contains all arguments but the first 
```

# android - 来自服务器的 Android Webview index.html 从本地加载 xxx.jpg

> ID：10139266
> 
> 赞同：0
> 
> 时间：2012-04-13T10:36:34.663
> 
> 标签：android, android-webview, local-storage, assets

我必须从服务器加载页面 index.php。我不想从项目中的 assets 文件夹中加载本地文件，但它不起作用。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().requestFeature(Window.FEATURE_PROGRESS);
    final Activity _activity = this;

    setContentView(R.layout.main);

    webview = (WebView) findViewById(R.id.webview);

    webview.setWebViewClient(new myWebViewClient());

    webview.getSettings().setRenderPriority(RenderPriority.HIGH);
    webview.getSettings().setJavaScriptEnabled(true);

    webview.getSettings().setAllowFileAccess(true);
    webview.getSettings().setAppCacheEnabled(false);
    webview.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);

    webview.loadUrl("http://192.168.0.11/mypage.php");

            webview.setWebViewClient(new myWebViewClient() {
        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon)      {
            // TODO Auto-generated method stub
            super.onPageStarted(view, url, favicon);
            progressBar.show();
        }

        @Override
        public void onReceivedError(WebView view, int errorCode,
                String description, String failingUrl) {
            // TODO Auto-generated method stub
            super.onReceivedError(view, errorCode, description, failingUrl);

        }

        @Override
        public void onPageFinished(WebView view, String url) {
            // TODO Auto-generated method stub
            super.onPageFinished(view, url);
            progressBar.dismiss();
        }
    });
    } 
```

在我的 HTML 页面中，一些本地图像是这样加载的：

```
<img src="file:///android_asset/image.jpg" width="200"> 
```

但图像不显示。

你有什么主意吗 ？

谢谢，

安德烈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:58:14.793

无需提供从文件到资产的完整路径。如果要显示的 html 文件和图像都在资产目录的同一目录中，则 jst 给出文件名

```
<img id="loadimage" src="ic_launcher.png" height="100px" width="100px" /> 
```

ic_launcher.png 文件位于 assets 文件夹中

# c# - 使用 WMI 的进程启动事件 - 并非所有进程都开始被检测到

> ID：10139270
> 
> 赞同：8
> 
> 时间：2012-04-13T10:37:05.967
> 
> 标签：c#, events, process, wmi, wql

我在 Windows 服务（运行为`NT_AUTHORITY\SYSTEM`）中使用以下 C# 代码来创建用于接收进程创建事件的事件处理程序（使用 WMI 和 WQL）：

```
string queryString = "SELECT * FROM Win32_ProcessStartTrace";
ManagementEventWatcher watcher = new ManagementEventWatcher(new WqlEventQuery(queryString));
watcher.EventArrived += new EventArrivedEventHandler(ProcessStartEvent);
watcher.Start(); 
```

在`ProcessStartEvent`：

```
int processId = int.Parse(e.NewEvent.Properties["ProcessId"].Value.ToString());
Process proc = Process.GetProcessById(processId);

Out("Received process: " + proc.ProcessName); 
```

* * *

我遇到的问题是（出于某种奇怪的原因）*并非每个进程启动都被*程序捕获和报告。如果我同时启动大约 6 个进程，则其中一个可能不会出现在输出中。

我尝试对使用 WMI 捕获进程创建事件进行一些研究，但可用的信息有限。我已经看到也可以使用类似于以下内容的方法来捕获进程开始：

```
SELECT TargetInstance
FROM __InstanceCreationEvent
WITHIN  2
WHERE TargetInstance ISA 'Win32_Process' 
```

（如[this Stack Overflow answer](https://stackoverflow.com/a/857946/1166205)中所见）

`__InstanceCreationEvent`使用和之间有什么主要区别`Win32_ProcessStartTrace`吗？这可能是我的问题的原因吗？

有没有解释为什么我没有收到***所有***流程开始的事件？我在这里做错了什么更明显的事情吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T15:50:30.267

这两种方法都是有效的，但工作方式不同。

当您使用[`__InstanceCreationEvent`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394649%28v=vs.85%29.aspx)WMI 类时，您使用的是[内部](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390355%28v=vs.85%29.aspx#intrinsic)事件，这意味着您正在监视标准 WMI 数据模型中的更改（这就像表中的触发器一样工作）。

当您使用时，[`Win32_ProcessStartTrace`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394374%28v=vs.85%29.aspx)您正在使用[外部](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390355%28v=vs.85%29.aspx#extrinsic)事件，这意味着您正在使用为特定任务制作的专用事件类，在这种情况下监控流程创建。

现在回到您的问题，避免“丢失”某些事件的最佳方法是创建一个[`permanent event consumer`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393014%28v=vs.85%29.aspx).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-01T20:20:48.077

我发现当您收到一个进程已启动的事件时 - 将该事件传递给一个单独的线程，例如 boost 线程，您可以将进程 ID 传递给一个新线程。

这意味着 WMI COM 不会陷入混乱并停止工作。

请参阅[http://sourceforge.net/p/processhistory/code/HEAD/tree/trunk/PHLogger/](http://sourceforge.net/p/processhistory/code/HEAD/tree/trunk/PHLogger/)并使用 COM_WMI_Consumer/ 查找修订版

对于一些工作 C++ 代码。

# .htaccess - 301重定向两个指向同一个IP的域——需要保留google排名

> ID：10139271
> 
> 赞同：0
> 
> 时间：2012-04-13T10:37:06.027
> 
> 标签：.htaccess, mod-rewrite, redirect, http-status-code-301

我有两个域 example.uk.net 和 example.co.uk - example.uk.net 自网站启动以来一直在使用，但我现在想切换到 .co.uk 版本 - 目前这两个域都是指向相同的 IP/服务器 - 您在两个域上看到相同的网站...

现在我知道我需要从 .uk.net 到 .co.uk 进行 301 重定向，但我已经读到最好逐页执行此操作以保留 google 排名/列表，而且现在我也是最佳实践只是似乎无法使其正常工作，因为两个域都指向同一个站点，我无法在 htaccess 文件中使用重写规则，例如...

```
Redirect 301 /get-a-quote/ http://example.co.uk/get-a-quote/ 
```

我也似乎在这里的这段代码似乎确实有效，但仅适用于主页，而不是任何子页面，它仍然不能在每页的基础上工作，只能重定向整个网站......

```
RewriteCond %{HTTP_HOST} !^example\.co\.uk$ [NC]
RewriteRule ^(.*)$ http://example.co.uk$1 [R=301,L] 
```

如果有人可以帮助我，那将是很棒的，或者如果有人过去处理过类似的事情-任何指针都会很棒...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:33:32.060

你错过了一个`/`：

```
RewriteCond %{HTTP_HOST} !^example\.co\.uk$ [NC]
RewriteRule ^(.*)$ http://example.co.uk/$1 [R=301,L] 
```

# linux - 将 shell 更改为 ksh 后缺少 gem

> ID：10139272
> 
> 赞同：0
> 
> 时间：2012-04-13T10:37:24.910
> 
> 标签：linux, shell, unix, rake

在我将控制台更改为 ksh 并再次将其更改回 /bin/bash 后，我的 MAC 开始连线

1.  无论我在当前目录中，控制台提示现在都是静态 bash-3.2。同时在 .bash_profile 我设置了 # modify console export PS1="\W > "

2.  rake gem 和 Ruby 中的其他少数几个丢失了，虽然在我运行 bundle install 后再次重新安装了它，但随后出现了奇怪的问题，例如 rake 命令没有命中正确的 rake 文件..

任何的想法？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:43:52.010

.bash_profile 仅在您第一次登录时由 bash 运行。（如果您将终端设置为使每个 shell 成为“登录 shell”，它只会由终端运行）。如果您有想要在每次启动 bash 时运行的命令，即使它不是登录 shell，您也应该将它们放在 .bashrc 中。`bash --login`但是你总是可以通过运行而不是仅仅让 shell 成为登录 shell `bash`。

不确定您的 ksh 来自哪里，但请注意它不理解提示字符串中的 '\W' 等，所以我希望您在提示中得到一个文字 '\W' 而不是扩展的工作目录。如果您将 ksh 作为登录 shell 运行，它可能位于 .profile（或 /etc/profile 等）中。ksh 没有完全等效的 .bashrc，但是如果在配置文件运行后将 $ENV 设置为文件名，则该文件也会执行（即使在非登录 shell 上，如果在 shell 启动时已经设置了 ENV） . 当然，Ksh 会忽略 .bash_profile 和 .bashrc。

由于您的问题正文中没有对 gems 的引用（不再？），您可能想要更改问题并删除 Ruby 标记...

# xml - 从 XML 链接到 PDF

> ID：10139275
> 
> 赞同：0
> 
> 时间：2012-04-13T10:37:34.847
> 
> 标签：xml, flash, pdf

我需要从 Flash 使用的 XML 文件中链接到 PDF 文件。

知道怎么做吗？

```
<review link="http://reviews.cnet.com/laptops/hp-folio-13/4505-3121_7-35096620.html">
    <quote><![CDATA[<b></b>]]></quote>
    <author><![CDATA[January 4, 2012]]></author>
</review> 
```

它应该链接到 PDF 文件，而不是链接到 HTML 页面。

# mysql - 我怎样才能使这个查询运行得更快？

> ID：10139279
> 
> 赞同：0
> 
> 时间：2012-04-13T10:37:51.553
> 
> 标签：mysql

我只是想知道是否有什么办法可以让查询运行得更快一点？

我有这个查询：

```
SELECT * FROM posts
WHERE posts.exists = 'n'
ORDER BY posts.ratecount DESC
LIMIT 0,100 
```

*耗时：2.47s @ 0,100 | 6.18s @ 500,100*

这可行，但随着限制的增加（100,100 > 200,100 等），它往往会变得相当缓慢。

使用索引似乎也无济于事：

```
SELECT * FROM posts
USE INDEX(ratecount_ca)
WHERE posts.exists = 'n'
ORDER BY posts.ratecount DESC
LIMIT 0,100 
```

*耗时：8.59s @ 0,100 | 28.98s @ 500,100*

奇怪的是，没有 WHERE 它可以完美运行。

降序索引很可能会解决这个问题，但由于这似乎还没有实现，我需要另一种选择。在订购后执行 WHERE 很可能也会加快速度，但由于我对 SQL 比较陌生，所以我不知道该怎么做：<

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:14:52.217

您使用的是什么版本的 MySQL？v5.0 文档建议有一种方法可以更改索引顺序。

我建议在两列上创建索引。它应该看起来像：

```
CREATE INDEX index_2_cols ON posts(exists, ratecount DESC); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:43:30.250

既然你说省略 where 条件使它运行得很快，我会尝试在表的字段上创建[一个索引](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)：`exists``posts`

```
CREATE INDEX ON posts_exists ON posts (exists(10)); 
```

# javascript - 如何知道点击了哪个复选框？

> ID：10139280
> 
> 赞同：2
> 
> 时间：2012-04-13T10:37:52.583
> 
> 标签：javascript, html, forms, checkbox

我有一个复选框列表。我需要知道哪个被点击了。我不能做一个循环

```
if(form1.news[i].checked) 
```

因为可能有其他人已经检查过了。我试过使用

```
this.form.id
this.from.checkboxname.id 
```

但它没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:48:39.143

事件对象将包含对被单击元素的引用。

例如（[使用](http://jsfiddle.net/hqD4e/)YUI 为事件绑定抽象浏览器差异，其他库做类似的事情，如果你不介意放弃旧的 Internet Explorer，可以使用原始 DOM）：

```
YUI().use('node', 'event', function (Y) {
    Y.one('#container').delegate('click', function (e) {
        alert(e.target.get('value'));
        e.stopPropagation();
    }, 'input[type=checkbox]');
});
​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T10:55:02.327

**更新** [**演示**](http://jsfiddle.net/kvUqt/6/)：

```
 $(function() {
            $('#myButton').click(function() {
                $('input:checkbox:checked').each(function(i) {
                    alert(this.value);
                });
            });
        });​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T10:48:01.310

如果您的 onclick() 函数位于复选框上，`this.id`则应该可以正常工作。

# tridion - Tridion 2009 SP1：是否可以发布 .htaccess 文件？

> ID：10139283
> 
> 赞同：5
> 
> 时间：2012-04-13T10:38:21.200
> 
> 标签：tridion

我在一个项目上使用 ISAPI 重写，想知道是否可以从 Tridion 发布 .htaccess 文件？

我已尝试使用 .htaccess 扩展名创建页面模板，但无法创建没有名称的页面。

有任何想法吗？

我可以使用 C# TBB 来更改页面名称吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:41:23.863

我也会选择使用二进制文件来实现这一点，但是如果您想使用文本而不是多媒体组件来管理 htaccess 文件，您可以使用以下技术将二进制文件推送到您的包中：

1）将Htaccess文件的文本以可访问的名称（即Binary_Text）推送到包中 2）使用类似下面的代码从变量中的文本创建一个文本文件并将其添加到包中

```
class publishStringItemAsBinary : ITemplate
{
    public void Transform(Engine engine, Package package)
    {
        TemplatingLogger log = TemplatingLogger.GetLogger(typeof(publishStringItemAsBinary));
        TemplateUtilities utils = new TemplateUtilities();
        System.IO.Stream inputStream = null;
        try
        {
            string strInputName = package.GetValue("InputItem");
            string strFileName = package.GetValue("strFileName");
            string sg_Destination = package.GetValue("sg_Destination");
            string itemComponent = package.GetValue("mm_Component");

            inputStream = new MemoryStream(Encoding.UTF8.GetBytes(package.GetValue(strInputName)));

            log.Debug("InputObject:" + strInputName);
            log.Debug("Filename for binary:" + strFileName);
            log.Debug("Destination StructureGroup:" + sg_Destination);
            Publication contextPub = utils.getPublicationFromContext(package, engine);
            TcmUri uriLocalSG = TemplateUtilities.getLocalUri(new TcmUri(contextPub.Id), new TcmUri(sg_Destination));
            TcmUri uriLocalMMComp = TemplateUtilities.getLocalUri(new TcmUri(contextPub.Id), new TcmUri(itemComponent));
            StructureGroup sg = (StructureGroup)engine.GetObject(uriLocalSG);
            Component comp = (Component)engine.GetObject(uriLocalMMComp);
            String sBinaryPath = engine.PublishingContext.RenderedItem.AddBinary(inputStream, strFileName, sg, "nav", comp, "text/xml").Url;
            //Put a copy of the path in the package in case you need it
            package.PushItem("BinaryPath", package.CreateStringItem(ContentType.Html, sBinaryPath));
        }
        catch (Exception e)
        {
            log.Error(e.Message);
        }
        finally
        {
            if (inputStream != null)
            {
                inputStream.Close();
            }

        }
    }
} 
```

我认为代码很容易解释。这会发布 text/xml 类型的二进制文件，但将其转换为纯文本文件应该没有问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T11:09:18.807

我认为您可以使用多媒体组件来存储您的 .htaccess。即使您无法上传没有名称的文件（Windows 限制），您也可以稍后通过修改`BinaryContent.Filename`多媒体组件的属性来更改文件名。然后，您可以单独发布此组件，或使用`AddBinary`其中一个模板中的方法。

还有一个用户模式，您可以在其中更改一些其他规则：“\Tridion\bin\cm_xml_usr.xsd”，但您将不能允许空文件名

# r - 在 R 中将 NA 设置为 0

> ID：10139284
> 
> 赞同：32
> 
> 时间：2012-04-13T10:38:24.457
> 
> 标签：r

在将数据帧与另一个 im 合并后，偶尔会出现随机 NA。我想将这些 NA 设置为 0，以便我可以使用它们进行计算。

我试图这样做：

```
 bothbeams.data = within(bothbeams.data, {
      bothbeams.data$x.x = ifelse(is.na(bothbeams.data$x.x) == TRUE, 0, bothbeams.data$x.x)
      bothbeams.data$x.y = ifelse(is.na(bothbeams.data$x.y) == TRUE, 0, bothbeams.data$x.y)
    }) 
```

其中 $xx 是一列， $xy 是另一列，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-04-13T10:43:45.013

您可以只使用的输出`is.na`直接替换为子集：

```
bothbeams.data[is.na(bothbeams.data)] <- 0 
```

或者有一个可重现的例子：

```
dfr <- data.frame(x=c(1:3,NA),y=c(NA,4:6))
dfr[is.na(dfr)] <- 0
dfr
  x y
1 1 0
2 2 4
3 3 5
4 0 6 
```

但是，在包含也有缺失值的因子的数据框中使用此方法时要小心：

```
> d <- data.frame(x = c(NA,2,3),y = c("a",NA,"c"))
> d[is.na(d)] <- 0
Warning message:
In `[<-.factor`(`*tmp*`, thisvar, value = 0) :
  invalid factor level, NA generated 
```

有用”：

```
> d
  x    y
1 0    a
2 2 <NA>
3 3    c 
```

...但在这种情况下，您可能只想专门更改数字列，而不是整个数据框。参见，例如，下面使用的答案`dplyr::mutate_if`。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-09-15T15:29:03.100

如果您想将其添加到管道中，则使用`mutate_all`from的解决方案：`dplyr``dplyr`

```
library(dplyr)
df %>%
  mutate_all(funs(ifelse(is.na(.), 0, .))) 
```

**结果：**

```
 A B C
1  0 0 0
2  1 0 0
3  2 0 2
4  3 0 5
5  0 0 2
6  0 0 1
7  1 0 1
8  2 0 5
9  3 0 2
10 0 0 4
11 0 0 3
12 1 0 5
13 2 0 5
14 3 0 0
15 0 0 1 
```

如果在任何情况下您只想替换数字列中的 NA，我认为这可能是建模中的情况，您可以使用`mutate_if`：

```
library(dplyr)
df %>%
  mutate_if(is.numeric, funs(ifelse(is.na(.), 0, .))) 
```

或在基础 R 中：

```
replace(is.na(df), 0) 
```

**结果：**

```
 A    B C
1  0    0 0
2  1 <NA> 0
3  2    0 2
4  3 <NA> 5
5  0    0 2
6  0 <NA> 1
7  1    0 1
8  2 <NA> 5
9  3    0 2
10 0 <NA> 4
11 0    0 3
12 1 <NA> 5
13 2    0 5
14 3 <NA> 0
15 0    0 1 
```

## 更新

与`dplyr 1.0.0`,`across`介绍：

```
library(dplyr)
# Replace `NA` for all columns
df %>%
  mutate(across(everything(), ~ ifelse(is.na(.), 0, .)))

# Replace `NA` for numeric columns
df %>%
  mutate(across(where(is.numeric), ~ ifelse(is.na(.), 0, .))) 
```

* * *

**数据：**

```
set.seed(123)
df <- data.frame(A=rep(c(0:3, NA), 3), 
                 B=rep(c("0", NA), length.out = 15), 
                 C=sample(c(0:5, NA), 15, replace = TRUE)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-01T14:17:04.863

添加到 James 的示例中，在对包含 NA 的数据帧执行计算时，您似乎总是必须创建一个中间体。

例如，将数据框中的两列（A 和 B）加在一起`dfr`：

```
temp.df <- data.frame(dfr) # copy the original
temp.df[is.na(temp.df)] <- 0
dfr$C <- temp.df$A + temp.df$B # or any other calculation
remove('temp.df') 
```

`remove`当我这样做时，我会用/丢弃中间体`rm`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-19T17:04:20.497

您可以`replace_na()`从`tidyr`包中使用

`df %>% replace_na(list(column1 = 0, column2 = 0)`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-02-04T09:09:21.950

为什么不试试这个

```
 na.zero <- function (x) {
        x[is.na(x)] <- 0
        return(x)
    }
    na.zero(df) 
```

# php - 如何使用 php 和 mysql 创建搜索结果页面？

> ID：10139288
> 
> 赞同：0
> 
> 时间：2012-04-13T10:38:34.723
> 
> 标签：php, mysql, search

我被要求使用电话号码或姓名在我们的数据库中创建公司搜索。问题是它们都在同一个文本框中，如下所示：

```
<input type="text" name = "nameOrPhone" /> 
```

所以我需要使用这个参数来使搜索看起来像这样：

```
SELECT * FROM table WHERE name LIKE '$nameOrPhone%' OR phone LIKE $nameOrPhone% 
```

我从 MySql 收到语法错误。

问题是我想用它来搜索两列。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:42:16.947

查看突出显示它显示您的问题。你忘了在它周围加上引号。这可能是您正在寻找的：

```
SELECT * FROM table WHERE name LIKE '$nameOrPhone%' OR phone LIKE '$nameOrPhone%' 
```

# java - 如何在Android中同时触摸两个按钮

> ID：10139291
> 
> 赞同：2
> 
> 时间：2012-04-13T10:38:51.760
> 
> 标签：java, android

我想为两个按钮实现 OnTouchEvent 并同时获取 MotionEvent.ACTION_MOVE 函数。

我实现了 onTouchEvent 但不起作用

```
 left = (Button)findViewById(R.id.button1);
    right = (Button)findViewById(R.id.button2);
    left.setOnTouchListener(this);
    right.setOnTouchListener(this);

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub

        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            if(v.getId()==R.id.button1){
                Log.i("left", "moved!");
            }
            if(v.getId()==R.id.button2){
                Log.i("right", "move!");
            }
        }
        return false;
    } 
```

在 AndroidManifest.xml 中

```
<uses-feature android:name="android.hardware.touchscreen.multitouch"
           android:required="true" /> 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:44:42.157

[http://www.passsy.de/activity_with_multitouch_for_buttons/](http://www.passsy.de/activity_with_multitouch_for_buttons/)可以帮助你，你用的是什么安卓版本？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:47:38.553

试试这个：

```
 if (event.getAction() == MotionEvent.ACTION_DOWN) {
        if(v==left){
            Log.i("left", "moved!");
        }
        if(v == right){
            Log.i("right", "move!");
        }
    } 
```

你应该让左右按钮成为类成员。

编辑：对不起可能会导致同样的效果。

# objective-c - Cocoa - 更改 XML 节点的值

> ID：10139293
> 
> 赞同：3
> 
> 时间：2012-04-13T10:38:56.877
> 
> 标签：objective-c, xml, cocoa

如果我有一个 XML 文件，我想更改它的值，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<items>
<item>
<object>First Object</object>
<description>Description One</description>
</item>
<item>
<object>Second Object</object>
<description>Description Two</description>
</item>
</items> 
```

是否有任何方法可以将“描述二”更改为“描述二修改”？或者我是否有某种方式，再次重新加载所有数据，更改所需的值，然后再次保存到文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:53:57.303

显然，该问题的解决方案非常简单，通过使用上述任何元素作为元素更改 NSXMLElement，整个文档将自动更改..

# jquery - Umbraco 5 jupiter 中的图像滑块

> ID：10139298
> 
> 赞同：1
> 
> 时间：2012-04-13T10:39:29.700
> 
> 标签：jquery, asp.net-mvc, umbraco, jquery-slider

我必须在 Umbraco 5 中创建一个图像滑块，用户将从管理面板为我提供图像，并且图像数量必须没有限制，用户也可以输入一些关于这些图像的文本，我知道我可以选择所有图像来自媒体部分的特定文件夹，但我不知道用户将如何添加文本，这是最好的方法还是有其他方法。

（如果我可以限制图像的尺寸，那就太好了）

提前致谢，

雪儿

解决方案：

感谢您的回复，此特定问题的解决方案在此链接上

[http://our.umbraco.org/forum/core/umbraco-5-general-discussion/30787-Image-Slider-with-text-in-Umbraco-5-jupiter](http://our.umbraco.org/forum/core/umbraco-5-general-discussion/30787-Image-Slider-with-text-in-Umbraco-5-jupiter)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:20:42.800

我这样做的方法是为幻灯片创建一个文档类型。然后根据需要添加属性，例如图像（媒体选择器）、文本等。使用一些模板创建另一种称为幻灯片的文档类型，没有属性。

然后使用幻灯片文档类型和模板创建一个内容节点来保存您的幻灯片。然后在刚刚创建的节点下创建几个幻灯片文档类型。所以现在你可以遍历幻灯片节点的 .Children 。

为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:44:08.890

我希望在媒体库中添加我所有的图片并创建新页面，这对我（客户）来说不是一个选项，我在这篇文章中找到了最适合我的解决方案，

[Umbraco 5 jupiter 中带有文本的图像滑块](http://our.umbraco.org/forum/core/umbraco-5-general-discussion/30787-Image-Slider-with-text-in-Umbraco-5-jupiter)

# sql - 我可以让这个查询更容易吗？

> ID：10139299
> 
> 赞同：0
> 
> 时间：2012-04-13T10:39:38.873
> 
> 标签：sql, query-optimization

你是什​​么意思？我可以使这个查询更容易并提高性能吗？

```
SELECT DISTINCT tb_Bauteile.ID,
                tb_Bauteile.Name,
                tb_Bauteile.Blatt_nr,
                FehlerCodes_akt_Liste.Fehlerpfad,
                FehlerCodes_akt_Liste.Pfad_Bezeichnung,
                FehlerCodes_akt_Liste.Steuergerät,
                FehlerCodes_akt_Liste.Kommentar
  FROM ((tb_Pinnummern INNER JOIN tb_Bauteile ON
        tb_Pinnummern.Bauteil = tb_Bauteile.ID) INNER JOIN tb_Fahrzeug ON
        tb_Pinnummern.SG = tb_Fahrzeug.Motor_SG)
 INNER JOIN FehlerCodes_akt_Liste
    ON tb_Bauteile.CDT = FehlerCodes_akt_Liste.CDT
 WHERE (((tb_Bauteile.Blatt_nr) LIKE "5*") AND
       ((tb_Fahrzeug.ID) = forms ! frm_fahrzeug ! id))
 ORDER BY FehlerCodes_akt_Liste.Fehlerpfad; 
```

非常感谢您的意见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:48:52.637

重新格式化它，并删除所有不必要的括号，它实际上很容易阅读（请注意，当我写这个答案时，问题中的查询是未格式化的文本！）

```
SELECT DISTINCT 
    tb_Bauteile.ID, tb_Bauteile.Name, tb_Bauteile.Blatt_nr,   
    FehlerCodes_akt_Liste.Fehlerpfad, FehlerCodes_akt_Liste.Pfad_Bezeichnung,
    FehlerCodes_akt_Liste.Steuergerät, FehlerCodes_akt_Liste.Kommentar
FROM 
      tb_Pinnummern INNER JOIN 
      tb_Bauteile 
      ON tb_Pinnummern.Bauteil = tb_Bauteile.ID INNER JOIN 
           tb_Fahrzeug 
           ON tb_Pinnummern.SG = tb_Fahrzeug.Motor_SG INNER JOIN 
               FehlerCodes_akt_Liste 
               ON tb_Bauteile.CDT = FehlerCodes_akt_Liste.CDT 
WHERE tb_Bauteile.Blatt_nr Like "5*" 
AND   tb_Fahrzeug.ID = [forms]![frm_fahrzeug]![id] 
ORDER BY FehlerCodes_akt_Liste.Fehlerpfad; 
```

您还可以为您的表名起别名以使这些更简单，例如

```
SELECT DISTINCT b.ID, b.Name
FROM tb_Bauteile AS b
WHERE b.Blatt_nr LIKE "5*" 
```

在 Join 和 Where 子句中使用的字段上添加索引通常会提高性能。请注意，`tb_Bauteile.Blatt_nr`此处的索引会提高性能，因为您的 LIKE 子句只有一个尾随通配符。但是，如果您的 LIKE 子句是，`LIKE '*5'`那么性能将不会得到改善。

# macos - 从条形码扫描仪捕获输入，写入浏览器窗口

> ID：10139303
> 
> 赞同：4
> 
> 时间：2012-04-13T10:39:53.347
> 
> 标签：macos, applescript, barcode-scanner

我们的接待处有一个插入 Macbook Mini 的条形码扫描仪，由接待员使用。当人们“登记”时，他们使用条形码扫描仪扫描他们的会员卡，然后将其写入浏览器窗口。

如果接待员打开了其他东西，因此相关的浏览器窗口不是焦点，那么输入将被忽略。

到目前为止，我发现输入在 OSX 中看起来像键盘。我的计划是拦截来自“键盘”的输入并使用 AppleScript 始终将其发送到同一个浏览器窗口。

我意识到整个事情都可以改进 - 使用一个专用的微型设备，它只使用 API 发出 CURL 请求。但是，目前没有API，没有微设备，我需要尽快解决。

那么如何截取来自特定键盘的输入呢？还是有其他快速解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T06:02:15.280

我不得不在 Windows 上做类似的事情。在我的情况下，浏览器窗口通常没有打开，我不得不打开它并浏览特定于条形码数据的地方。

我发现许多条码扫描仪可以模拟串行端口，即使它们有 USB 连接，包括我的那个。

在大多数编程语言中，串行端口数据非常容易阅读，因此我采用的解决方案是一个 Java Windows 服务，它接收串行端口扫描并在扫描时打开相应的 URL。前段时间我在[这里](https://stackoverflow.com/a/8621266/1062992)发布了一些基本的扫描阅读器代码。

无论如何，您可以查看您的模型是否可以模拟串行端口数据，然后您可以为您的目的捕获它，我认为它会比键盘挂钩更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-16T15:13:02.683

解决问题的现代方法是将条形码扫描仪配置为使用所谓的 HID POS 或 USB OEM 模式。在该模式下，扫描仪仍然通过 USB 直接连接到计算机，但它不会再发送键盘按键，而是发送类似于您在串行端口模式下获得的代码。

USB HID 规范确实定义了条码扫描仪的代码，并且一些扫描仪，如 GoDEX 制造的扫描仪，遵循此协议。为此，您必须在您的 OS X 应用程序中实现一些 USB 特定代码，使用 IOKit API 进行用户空间处理。但我发现完成起来并不难。

但是，某些扫描仪，例如 Datalogic 制造的扫描仪，不使用扫描仪的官方 HID 协议。相反，他们使用未公开记录的私有协议。不过，通过一些逆向工程和挖掘，我也发现了该协议。

有关详细信息，请参阅[我的问题“在 Datalogic 条码扫描仪中启用 USB-OEM (HID POS) 模式”](https://stackoverflow.com/questions/35526928/)。

但是，如果您不想走这条编写自己的 USB 处理程序的路线，您总是可以获取一个通用的串行到 USB 适配器并在您的 Mac 上安装匹配的串行驱动程序，然后在串行模式下使用扫描仪. 获取串行适配器时，一般有两种类型：一种使用 Prolific 芯片组，另一种使用 FTDI 芯片组。制造商对 Prolific 的支持很差——他们的驱动程序已经过时，甚至不支持全系列的控制线（CTS、RTS 等）。但是，我可以推荐一个独立的驱动程序：[https](https://www.mac-usb-serial.com) ://www.mac-usb-serial.com - 它不是免费的，但它得到了很好的支持，我可以确认它在串行端口上与 Datalogic 条形码扫描仪一起可靠地工作，并且通过基于 Prolific 的适配器连接到 Mac。

# iphone - 使用 glBlendEquationOES(GL_MAX_EXT) 后如何禁用它？

> ID：10139313
> 
> 赞同：0
> 
> 时间：2012-04-13T10:40:45.840
> 
> 标签：iphone, opengl-es, cocos2d-iphone

我试图绘制一个发光的纹理，在阅读了这篇文章之后： [Opengl ES 1.x Glowing effect in iOS](https://stackoverflow.com/questions/9678558/opengl-es-1-x-glowing-effect-in-ios)。我使用了这个 glBlendEquationOES(GL_MAX_EXT) 命令，它产生了我想要的效果，但问题是它使其他一切都损坏了。我想知道如何在使用 glBlendEquationOES(GL_MAX_EXT) 后禁用它？或将其恢复为默认模式？谢谢！家伙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:07:09.127

您是否尝试过保存和恢复图形状态？

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSaveGState(context);

// graphics state corrupting code ...

CGContextRestoreGState(context); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T15:15:23.097

您通过...禁用混合来禁用混合。您通过调用启用了混合`glEnable(GL_BLEND)`。所以关闭它意味着调用`glDisable(GL_BLEND)`.

混合方程/函数可以根据需要保留。您不必将它们设置为默认值或任何特定值。禁用混合意味着它们的值无关紧要。

# sum - 双倍减法opencl教程

> ID：10139314
> 
> 赞同：3
> 
> 时间：2012-04-13T10:40:47.867
> 
> 标签：sum, opencl, reduction

我是 OpenCl 的新手。

我需要对一维双精度数组进行归约（求和运算符）。

我一直在网上徘徊，但我发现的例子很混乱。任何人都可以发布一个易于阅读（并且可能有效）的教程实现吗？

附加信息： - 我可以使用一台 GPU 设备；- 我使用 C 作为内核代码

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T14:01:18.997

您提到您的问题涉及 60k 双打，这不适合您设备的本地内存。我组装了一个内核，它将您的向量减少到 10-30 左右的值，您可以将其与您的主机程序相加。我在我的机器上遇到了双打问题，但是如果你启用双打并将'float'更改为'double'，这个内核应该可以正常工作。我将调试我遇到的双重问题，并发布更新。

参数：

*   global float* inVector - 要求和的浮点数的来源
*   global float* outVector - 浮点数列表，每个工作组一个
*   const int inVectorSize - inVector 持有的浮点数总数
*   local float* resultScratch - 每个工作组使用的本地内存。您需要为组中的每个工作项分配一个浮点数。预期大小 = sizeof(cl_float)*get_local_size(0)。例如，如果每个组使用 64 个工作项，则这将是 64 个浮点数 = 256 个字节。切换到双精度将使其变为 512 字节。openCL 规范定义的最小 LDS 大小为 16kb。[有关传入本地 (NULL) 参数的更多信息，请参阅此问题](https://stackoverflow.com/questions/8888718/how-to-declare-local-memory-in-opencl)。

用法：

1.  为输入和输出缓冲区分配内存。
2.  为设备上的每个计算单元创建一个工作组。
3.  确定最佳工作组大小，并使用它来计算“resultScratch”的大小。
4.  调用内核，将向量读出回主机
5.  循环遍历您的 outVector 副本并添加以得到最终总和。

潜在的优化：

1.  像往常一样，您想用大量数据调用内核。太少的数据不值得传输和设置时间。
2.  使 inVectorSize（和向量）成为（工作组大小）*（工作组数）的最高倍数。仅使用此数据量调用内核。内核均匀地分割数据。在等待回调时计算主机上任何剩余数据的总和（或者，为 cpu 设备构建相同的内核并仅将剩余数据传递给它）。在上面的步骤 #5 中添加 outVector 时，从这个总和开始。这种优化应该使工作组在整个计算过程中保持均匀饱和。

    ```
    __kernel void floatSum(__global float* inVector, __global float* outVector, const int inVectorSize, __local float* resultScratch){
        int gid = get_global_id(0);
        int wid = get_local_id(0);
        int wsize = get_local_size(0);
        int grid = get_group_id(0);
        int grcount = get_num_groups(0);

        int i;
        int workAmount = inVectorSize/grcount;
        int startOffest = workAmount * grid + wid;
        int maxOffest = workAmount * (grid + 1);
        if(maxOffset > inVectorSize){
            maxOffset = inVectorSize;
        }
        resultScratch[wid] = 0.0;
        for(i=startOffest;i<maxOffest;i+=wsize){
                resultScratch[wid] += inVector[i];
        }
        barrier(CLK_LOCAL_MEM_FENCE);

        if(gid == 0){
                for(i=1;i<wsize;i++){
                        resultScratch[0] += resultScratch[i];
                }
                outVector[grid] = resultScratch[0];
        } 
    ```

    }

此外，启用双打：

```
#ifdef cl_khr_fp64
#pragma OPENCL EXTENSION cl_khr_fp64 : enable
#else
#ifdef cl_amd_fp64
#pragma OPENCL EXTENSION cl_amd_fp64 : enable
#endif
#endif 
```

更新：AMD APP KernelAnalyzer 得到了更新（v12），它显示这个内核的双精度版本实际上是 ALU 绑定在 5870 和 6970 卡上。

# asp.net - WCF webHttpBinding out参数支持

> ID：10139321
> 
> 赞同：0
> 
> 时间：2012-04-13T10:41:18.823
> 
> 标签：asp.net, wcf, rest, webhttpbinding

我正在创建我的第一个 wcf 服务`webHttpBinding`。在网上，我读过很多文章，告诉我在 Web 服务中使用参数是不好的做法，如中所述

[在 WCF 服务的方法中使用输出参数是不好的做法吗？](https://stackoverflow.com/questions/4733712/is-it-bad-practice-to-have-an-output-parameter-in-a-method-in-a-wcf-service)
有时如果我们在 SOAP 场景中使用 out 参数。从 wsdl 生成的客户端定义更改了此处讨论的参数顺序 [http://social.msdn.microsoft.com/Forums/en/wcf/thread/48b5992f-f7bd-4b67-8299-514d1780fa9a](http://social.msdn.microsoft.com/Forums/en/wcf/thread/48b5992f-f7bd-4b67-8299-514d1780fa9a)
我相信的是在 REST (webHttpBinding) 中无法使用 out 参数。任何人都可以确认或否认这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:51:22.590

在代码中完全使用 out 参数是一种不好的做法。它使代码的可读性降低并且更容易出错。如果您需要从方法返回多个参数，则应始终考虑创建返回对象。（在 c# 4 中你也可以选择返回一个元组）。

# android - 如何将谷歌分析数据检索到我的 android 应用程序中？

> ID：10139322
> 
> 赞同：1
> 
> 时间：2012-04-13T10:41:20.427
> 
> 标签：android, oauth-2.0

嗨，我尝试检索谷歌分析数据...直到使用此 REDIRECT_URI =“urn:ietf:wg:oauth:2.0:oob”获得访问令牌...我没有收到任何错误但我没有进一步实施...

现在我得到了访问令牌，应用程序说“请复制此代码，切换到您的应用程序并将其粘贴到那里”，然后我现在要做的是检索我的分析数据......

==================================================== ==============

我正在使用这些 jar 文件，

libGoogleAnalytics.jar

commons-codec-1.3.jar

commons-logging-1.1.1.jar

httpclient-4.0.3.jar

httpore-4.0.1.jar

番石榴-r09.jar

google-oauth-client-1.6.0-beta.jar

gson-1.7.1.jar

杰克逊核心asl-1.9.1.jar

google-api-client-1.6.0-beta.jar

google-api-analytics-v3-rev3-java-1.5.0-beta.jar

google-api-java-client-1.6.0-beta.zip

google-http-client-1.6.0-beta.jar

==================================================== =============

```
package com.nasotech.XploreApp;

import java.io.IOException;

import org.apache.http.client.methods.HttpTrace;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.util.Log;
import android.view.View;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Toast;

import com.google.api.client.auth.oauth2.draft10.AccessTokenRequest.RefreshTokenGrant;
import com.google.api.client.auth.oauth2.draft10.AccessTokenResponse;
import com.google.api.client.googleapis.auth.oauth2.draft10.GoogleAccessProtectedResource;
import com.google.api.client.googleapis.auth.oauth2.draft10.GoogleAccessTokenRequest.GoogleAuthorizationCodeGrant;
import com.google.api.client.googleapis.auth.oauth2.draft10.GoogleAuthorizationRequestUrl;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.http.javanet.NetHttpTransport;
import com.google.api.client.json.jackson.JacksonFactory;
import com.google.api.services.analytics.Analytics;
import com.google.api.services.analytics.model.Goal;
import com.google.api.services.analytics.model.Profile;
import com.google.api.services.analytics.model.Webproperty;
import com.nasotech.XploreApp.oauthstore.CredentialStore;
import com.nasotech.XploreApp.oauthstore.SharedPreferencesCredentialStore;

public class OauthGoogleAnalytics extends Activity
{

    final String TAG = getClass().getName();
    private SharedPreferences prefs;

     static HttpTrace TRANSPORT=null;
     static HttpTransport httptransport;
     static com.google.api.client.json.JsonFactory JSON_FACTORY=null;

     String authorizationCode;
     String authorizationUrl;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.i(TAG, "Starting task to retrieve request token.");
        this.prefs = PreferenceManager.getDefaultSharedPreferences(this);
    }

    @Override
    protected void onResume() {
        super.onResume();
        WebView webview = new WebView(this);
        webview.getSettings().setJavaScriptEnabled(true);  
        webview.setVisibility(View.VISIBLE);
        setContentView(webview);
        TRANSPORT = new HttpTrace();

        authorizationUrl = new GoogleAuthorizationRequestUrl(OAuthGACredentials.CLIENT_ID, OAuthGACredentials.REDIRECT_URI, OAuthGACredentials.SCOPE).build();
        Log.i("AuthorizationUrl1", authorizationUrl);
        Toast.makeText(this, "AuthorizationUrl :"+authorizationUrl, Toast.LENGTH_LONG).show();

        webview.setWebViewClient(new WebViewClient() {  

            @Override  
            public void onPageStarted(WebView view, String url,Bitmap bitmap)  {  
                System.out.println("onPageStarted : " + url);
            }
            @Override  
            public void onPageFinished(WebView view, String url)  {  

                Log.i("OnPageFinished: url :", url);
                if (url.startsWith(OAuthGACredentials.REDIRECT_URI)) {
                    Log.i("url.startsWith(OAuthGACredentials.REDIRECT_URI) :", "true");

                    try {

                        if (url.indexOf("code=")!=-1) {
                            String code = extractCodeFromUrl(url);
                            Log.i("Authorisation code:",code );

                              AccessTokenResponse accessTokenResponse = new GoogleAuthorizationCodeGrant(new NetHttpTransport(),
                                      new JacksonFactory(),
                                      OAuthGACredentials.CLIENT_ID,
                                      OAuthGACredentials.CLIENT_SECRET,
                                      code,
                                      OAuthGACredentials.REDIRECT_URI).execute();

                              CredentialStore credentialStore = new SharedPreferencesCredentialStore(prefs);
                              credentialStore.write(accessTokenResponse);
                              view.setVisibility(View.INVISIBLE);
                              Toast.makeText(OauthGoogleAnalytics.this,"Succcessfully got access token :"+accessTokenResponse.accessToken , Toast.LENGTH_SHORT).show();
                              System.out.println("access token:"+accessTokenResponse.accessToken );

            System.out.println("What is the authorization code?");

                                authorizationCode=accessTokenResponse.accessToken ;
                                Toast.makeText(OauthGoogleAnalytics.this, " getting input"+authorizationCode, Toast.LENGTH_SHORT).show();
                                 System.out.println("getting input"+authorizationCode);

        JacksonFactory jsonFactory = new JacksonFactory();
                            HttpTransport transport = new NetHttpTransport();

                            accessTokenResponse = credentialStore.read();

                            GoogleAccessProtectedResource accessProtectedResource = new GoogleAccessProtectedResource(accessTokenResponse.accessToken,
                                    transport,
                                    jsonFactory,
                                    OAuthGACredentials.CLIENT_ID,
                                    OAuthGACredentials.CLIENT_SECRET,
                                    accessTokenResponse.refreshToken);
                            Toast.makeText(OauthGoogleAnalytics.this, "access proteced resource"+accessProtectedResource.toString(),Toast.LENGTH_SHORT).show();
                            System.out.println("Access protected resource:"+accessProtectedResource.toString());

    Analytics analytics = Analytics.builder(httptransport, JSON_FACTORY)
                                    .setHttpRequestInitializer(accessProtectedResource)
                                    .setApplicationName("TRA-Analytics")
                                    .build();
                                Log.i("Analytics","Analytics:management"+analytics.management().toString());

                                com.google.api.services.analytics.model.Accounts accounts=analytics.management().accounts().list().execute();
                                for (com.google.api.services.analytics.model.Account account : accounts.getItems()) {
                                      System.out.println("Account ID: " + account.getId());
                                      System.out.println("Account Name: " + account.getName());
                                      System.out.println("Account Created: " + account.getCreated());
                                      System.out.println("Account Updated: " + account.getUpdated());
                                    }

                            com.google.api.services.analytics.model.Webproperties webproperties = analytics.management().webproperties().list("~all").execute();

                            for (Webproperty webproperty : webproperties.getItems()) {
                                  System.out.println("Account ID: " + webproperty.getAccountId());
                                  System.out.println("Web Property ID: " + webproperty.getId());
                                  System.out.println("Web Property Name: " + webproperty.getName());
                                  System.out.println("Web Property Internal Id: " + webproperty.getInternalWebPropertyId());
                                  System.out.println("Web Property Website URL: " + webproperty.getWebsiteUrl());
                                  System.out.println("Web Property Created: " + webproperty.getCreated());
                                  System.out.println("Web Property Updated: " + webproperty.getUpdated());
                                }

                            com.google.api.services.analytics.model.Profiles profiles = analytics.management().profiles().list("~all", "~all").execute();

                            for (Profile profile : profiles.getItems()) {
                                  System.out.println("Account ID: " + profile.getAccountId());
                                  System.out.println("Web Property ID: " + profile.getWebPropertyId());
                                  System.out.println("Web Property Internal ID: " + profile.getInternalWebPropertyId());
                                  System.out.println("Profile ID: " + profile.getId());
                                  System.out.println("Profile Name: " + profile.getName());

                                  System.out.println("Profile defaultPage: " + profile.getDefaultPage());
                                  System.out.println("Profile Exclude Query Parameters: "
                                      + profile.getExcludeQueryParameters());
                                  System.out.println("Profile Site Search Query Parameters: "
                                      + profile.getSiteSearchQueryParameters());
                                  System.out.println("Profile Site Search Category Parameters: "
                                      + profile.getSiteSearchCategoryParameters());

                                  System.out.println("Profile Currency: " + profile.getCurrency());
                                  System.out.println("Profile Timezone: " + profile.getTimezone());
                                  System.out.println("Profile Updated: " + profile.getUpdated());
                                  System.out.println("Profile Created: " + profile.getCreated());
                                }

                            com.google.api.services.analytics.model.Goals goals = analytics.management().goals().list("~all", "~all", "420").execute();

                            for (Goal goal : goals.getItems()) {
                                  System.out.println("Account ID: " + goal.getAccountId());
                                  System.out.println("Web Property ID: " + goal.getWebPropertyId());
                                  System.out.println("Web Property Internal Id: " + goal.getInternalWebPropertyId());
                                  System.out.println("Profile ID: " + goal.getId());

                                  System.out.println("Goal Number: " + goal.getId());
                                  System.out.println("Goal Name: " + goal.getName());
                                  System.out.println("Is Goal Active: " + goal.getActive());
                                  System.out.println("Goal Value: " + goal.getValue());
                                  System.out.println("Goal Type: " + goal.getType());
                                  System.out.println("Goal Created: " + goal.getCreated());
                                  System.out.println("Goal Updated: " + goal.getUpdated());

                        } else if (url.indexOf("error=")!=-1) {
                            view.setVisibility(View.INVISIBLE);
                            new SharedPreferencesCredentialStore(prefs).clearCredentials();
                            startActivity(new Intent(OauthGoogleAnalytics.this,TabView.class));
                        }

                    } catch (IOException e) {
                        e.printStackTrace();
                    }

                }
                System.out.println("onPageFinished : " + url);

            }

            private String extractCodeFromUrl(String url) {
                return url.substring(OAuthGACredentials.REDIRECT_URI.length()+7,url.length());
            }  
        });  

        webview.loadUrl(authorizationUrl);      
    }

} 
```

==================================================== ===========

请任何人帮助我，我从过去 1 个月开始尝试在此先感谢....

# ruby-on-rails - 如何在 Rails 3 应用程序中为用户创建匿名电子邮件地址（例如 abcd11245@craigslist.org）？

> ID：10139323
> 
> 赞同：3
> 
> 时间：2012-04-13T10:41:27.273
> 
> 标签：ruby-on-rails, ruby-on-rails-3, email

我正在运行一个 Craigs 列表样式的公告板，我需要为此创建匿名电子邮件地址（例如 123fghuii@craigslist.org），并为创建帖子的人转发。

我将如何在 Rails 3 中执行此操作？由于我是 Rails 新手，因此请在您的回复中非常具体并尽可能详细。

非常感谢，

费萨尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T11:27:29.487

您还可以利用第三方服务，例如 Mailgun。这些为您提供了 API，允许您阅读发送到特定域的电子邮件。

请参阅[http://mailgun.net/](http://mailgun.net/)，特别是他们关于接收电子邮件的文档。[http://documentation.mailgun.net/user_manual.html#receiving-messages](http://documentation.mailgun.net/user_manual.html#receiving-messages)。

您还可以使用 EventMachine 之类的东西构建自己的事件 SMTP 服务器，您的 Ruby 代码将在其中侦听所有发送的电子邮件并处理消息中的 TO: 标头。EventMachine 有 SMTP 协议助手（参见[http://eventmachine.rubyforge.org/EventMachine/Protocols/SmtpServer.html](http://eventmachine.rubyforge.org/EventMachine/Protocols/SmtpServer.html)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T11:31:35.240

我已经实现了这一点，并查看了一些解决方案。到目前为止，我发现的最简单的是[http://cloudmailin.com](http://cloudmailin.com)

Cloudmailin 将您的电子邮件转换为 HTTP POST 到您指定的回调 url。从中，您可以选择发件人和消息。

有几件事使它真正有用。首先，您可以指定通配符 MX 条目，它将所有电子邮件发送到您指定的回调 url，这意味着您可以根据电子邮件地址执行不同的操作。我发现真正有用的第二件事是，可以选择剥离附件并将它们存储在 S3 存储桶中。这两者的结合使得处理带有附件的电子邮件比实现自己的邮件服务器要容易得多。

请注意，涉及的费用很小，您可以在[http://cloudmailin.com/plans查看计划](http://cloudmailin.com/plans) **编辑**- 有一个免费计划，但不包括上述内容

这样做的另一个优点是您不会被绑定到 rails 堆栈（不要误会，我喜欢 rails），因为它是一个 HTTP 请求，您可以非常简单地在任何技术堆栈中实现相同的回调 url。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T11:21:07.223

好吧，这不是一个微不足道的问题......你不会只用 rails 来解决它！

我认为你至少需要安装一个 3rd-party ：一个电子邮件服务器，比如 Postfix。

这里有一些我刚刚用谷歌搜索的教程：

*   [http://capturedsparks.com/2008/06/receiving-emails-with-ruby-on-rails/](http://capturedsparks.com/2008/06/receiving-emails-with-ruby-on-rails/)

*   [http://railspikes.com/2007/6/1/rails-email-processing](http://railspikes.com/2007/6/1/rails-email-processing)

*   [http://jasonseifer.com/2009/04/24/receving-email-with-rails](http://jasonseifer.com/2009/04/24/receving-email-with-rails)

*   [http://blog.sosedoff.com/2011/08/10/processing-emails-with-postfix-and-rails/](http://blog.sosedoff.com/2011/08/10/processing-emails-with-postfix-and-rails/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-03-07T10:45:58.727

关于匿名电子邮件地址的最大误解之一是它们仅用于令人讨厌的犯罪活动。实际上，它们是保护在线隐私和保护自己免受垃圾邮件侵害的审慎方法。[Craigslist 电子邮件帐户](http://www.ny-craigslist.com/2013/03/way-to-create-craigslist-email-account.html)

# php - 需要帮助以在按钮单击时加载页面内容

> ID：10139327
> 
> 赞同：0
> 
> 时间：2012-04-13T10:42:13.470
> 
> 标签：php, javascript, ajax

```
<html>
<body>
<a href="samepage.php"><img src="button.png"></a>
<div>
//page content, database queries, calculations etc
</div>
</body>
</html> 
```

我不想在页面打开时加载 DIV 内容，我只想在按下按钮时加载这个 DIV，

有什么技术可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:47:16.240

如果你可以使用 jQuery，它可以很容易地做到：

```
 $(document).ready(function() {
  $("#yourDivId").click(function() {
     //load content from some page
     $("#divIdToLoadContentAt").load("some_page.php");
  });
}); 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:44:19.140

是的，它通俗地称为 AJAX。使用 JavaScript，您可以`samepage.php`对`div`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T10:55:55.503

您应该将 div 中的代码分离到 antorher 文件中。比使用 jQuery ajax 函数更能做到这一点。

[jQuery 阿贾克斯](http://api.jquery.com/category/ajax/)

[jQuery 加载](http://api.jquery.com/load-event/)

如果不是这种情况，您可以在链接中使用标志，例如 (mypage.php?process=true)。例如，如果页面加载如下：

我的页面.php

你的 php 代码应该跳过这段代码直到结束。

```
if(isset($_GET['process'])
{
 //you do page content, database queries, calculations etc
}
else
{
 //skip
} 
```

您在按钮中的链接应该是这样的：

```
a href="samepage.php?process=ture" 
```

# php - PHP：在占位符中读取字符串

> ID：10139328
> 
> 赞同：0
> 
> 时间：2012-04-13T10:42:16.400
> 
> 标签：php, string

我真的很困惑如何措辞这个问题。我需要取一部分用方括号括起来的字符串。请看例子

回复：[115] VFA 1 von 04/11/2012 bis 04/12/2012 mit-1221

这是某人作为邮件主题发送的。我需要从方括号中检索数字 115 。如果有超过方括号，则 this 的位置在任何时候都将是第一个

我怎么能解决这个问题。

**编辑**

我希望我能在字符串 Re: [115] [12] VFA 1 von 04/11/2012 bis 04/12/2012 mit-1221 中获得 [] 的所有实例

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:45:52.857

您可以使用[正则表达式](http://php.net/manual/en/book.pcre.php)执行此操作：

```
preg_match_all('/\[(\w+)\]/', $str, $matches);
$square_brackets = $matches[1]; // array of: "115", "12" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:50:13.027

> 这是某人作为邮件主题发送的。我需要从方括号中检索数字 115 。如果有超过方括号，则 this 的位置在任何时候都将是第一个

如果它总是数字，并且总是第一个被括在括号中：

```
<?php
$line = 'Re: [115]VFA 1 von 04/11/2012 bis 04/12/2012 mit-1221';

if( preg_match( '~\[(\d+)\]~', $line, $matches ) !== 0 ) {
    $number = array_shift( $matches );
}
else { // no match.
} 
```

# java - 无法解析工件。缺少： ---------- 1) org.codehaus.mojo:gwt-maven-plugin:jar:1.3-SNAPSHOT

> ID：10139330
> 
> 赞同：3
> 
> 时间：2012-04-13T10:42:17.040
> 
> 标签：java, vaadin, maven-plugin

我想使用插件 vaadin 时间轴，所以我必须制作`gwt-maven-plugin 3.1`并且我的 pom.xml 如下：

```
<?xml version="1.0"?>

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>life</groupId>
<artifactId>life</artifactId>
<packaging>war</packaging>
<name>life Portlet</name>
<version>0.0.1-SNAPSHOT</version>
<url>http://maven.apache.org</url>
<properties>
    <vaadin-widgets-dir>src/main/webapp/VAADIN/widgetsets</vaadin-widgets-dir>
</properties>
<build>
    <plugins>
        <plugin>
            <groupId>com.liferay.maven.plugins</groupId>
            <artifactId>liferay-maven-plugin</artifactId>
            <version>6.1.0</version>
            <configuration>
                <autoDeployDir>${liferay.auto.deploy.dir}</autoDeployDir>
                <liferayVersion>6.1.0</liferayVersion>
                <pluginType>portlet</pluginType>
            </configuration>
        </plugin>

        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <encoding>UTF-8</encoding>
                <source>1.5</source>
                <target>1.5</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>com.vaadin</groupId>
            <artifactId>vaadin-maven-plugin</artifactId>
            <version>1.0.1</version>
        </plugin>
        <!-- Compiles your custom GWT components with the GWT compiler -->
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>gwt-maven-plugin</artifactId>
            <version>2.1.0-1</version>
            <configuration>
                <!-- if you don't specify any modules, the plugin will find them -->
                <!--modules> .. </modules -->
                <webappDirectory>${project.build.directory}/${project.build.finalName}/VAADIN/widgetsets</webappDirectory>
                <extraJvmArgs>-Xmx512M -Xss1024k</extraJvmArgs>
                <runTarget>clean</runTarget>
                <hostedWebapp>${project.build.directory}/${project.build.finalName}</hostedWebapp>
                <noServer>true</noServer>
                <port>8080</port>
                <soyc>false</soyc>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>resources</goal>
                        <goal>compile</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <!-- Updates Vaadin 6.2+ widgetset definitions based on project dependencies -->
        <plugin>
            <groupId>com.vaadin</groupId>
            <artifactId>vaadin-maven-plugin</artifactId>
            <version>1.0.1</version>
            <executions>
                <execution>
                    <configuration>
                        <!-- if you don't specify any modules, the plugin will find them -->
                        <!-- <modules> <module>${package}.gwt.MyWidgetSet</module> </modules> -->
                    </configuration>
                    <goals>
                        <goal>update-widgetset</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>

    </plugins>

    <pluginManagement>
        <plugins>
            <!--This plugin's configuration is used to store Eclipse m2e settings 
                only. It has no influence on the Maven build itself. -->
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>
                                        org.codehaus.mojo
                                    </groupId>
                                    <artifactId>
                                        gwt-maven-plugin
                                    </artifactId>
                                    <versionRange>
                                        [2.1.0-1,)
                                    </versionRange>
                                    <goals>
                                        <goal>resources</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <ignore></ignore>
                                </action>
                            </pluginExecution>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>com.vaadin</groupId>
                                    <artifactId>
                                        vaadin-maven-plugin
                                    </artifactId>
                                    <versionRange>
                                        [1.0.1,)
                                    </versionRange>
                                    <goals>
                                        <goal>
                                            update-widgetset
                                        </goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <ignore></ignore>
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build>
<dependencies>
    <dependency>
        <groupId>com.liferay.portal</groupId>
        <artifactId>portal-service</artifactId>
        <version>6.1.0</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>com.liferay.portal</groupId>
        <artifactId>util-bridges</artifactId>
        <version>6.1.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.vaadin.addons</groupId>
        <artifactId>vaadin-timeline-agpl-3.0</artifactId>
        <version>1.2.4</version>
    </dependency>

    <dependency>
        <groupId>com.liferay.portal</groupId>
        <artifactId>util-taglib</artifactId>
        <version>6.1.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>com.liferay.portal</groupId>
        <artifactId>util-java</artifactId>
        <version>6.1.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.portlet</groupId>
        <artifactId>portlet-api</artifactId>
        <version>2.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.4</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.0</version>
        <scope>provided</scope>
    </dependency>

    <!-- sqx -->

    <dependency>
        <groupId>javax.activation</groupId>
        <artifactId>activation</artifactId>
        <version>1.1.1</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>antlr</groupId>
        <artifactId>antlr</artifactId>
        <version>2.7.6</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>aopalliance</groupId>
        <artifactId>aopalliance</artifactId>
        <version>1.0</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>asm</groupId>
        <artifactId>asm</artifactId>
        <version>1.5.3</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>asm</groupId>
        <artifactId>asm-attrs</artifactId>
        <version>1.5.3</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>1.6.8</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjweaver</artifactId>
        <version>1.6.8</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>bsh</groupId>
        <artifactId>bsh</artifactId>
        <version>1.3.0</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.1_3</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>commons-collections</groupId>
        <artifactId>commons-collections</artifactId>
        <version>3.1</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.3</version>
    </dependency>

    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.1</version>
    </dependency>

    <dependency>
        <groupId>commons-pool</groupId>
        <artifactId>commons-pool</artifactId>
        <version>1.5.3</version>
    </dependency>

    <dependency>
        <groupId>dom4j</groupId>
        <artifactId>dom4j</artifactId>
        <version>1.6.1</version>
    </dependency>

    <dependency>
        <groupId>net.sf.ehcache</groupId>
        <artifactId>ehcache</artifactId>
        <version>1.2.3</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>3.3.1.GA</version>
    </dependency>

    <dependency>
        <groupId>hsqldb</groupId>
        <artifactId>hsqldb</artifactId>
        <version>1.8.0.10</version>
    </dependency>

    <!-- <dependency> <groupId>jboss</groupId> <artifactId>jboss-backport-concurrent</artifactId> 
        <version>2.1.0.GA</version> </dependency> -->

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-parent</artifactId>
        <version>1.5.0</version>
    </dependency>

    <dependency>
        <groupId>javax.jcr</groupId>
        <artifactId>jcr</artifactId>
        <version>1.0</version>
    </dependency>

    <!-- <dependency> <groupId>javax.sql</groupId> <artifactId>jdbc-stdext</artifactId> 
        <version>2.0</version> </dependency> -->

    <dependency>
        <groupId>jdom</groupId>
        <artifactId>jdom</artifactId>
        <version>1.0</version>
    </dependency>

    <dependency>
        <groupId>javax.transaction</groupId>
        <artifactId>jta</artifactId>
        <version>1.1</version>
    </dependency>

    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.14</version>
    </dependency>

    <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.4.3</version>
    </dependency>

    <dependency>
        <groupId>com.sun.portal.portletcontainer</groupId>
        <artifactId>container</artifactId>
        <version>1.1-m4</version>
    </dependency>

    <dependency>
        <groupId>postgresql</groupId>
        <artifactId>postgresql</artifactId>
        <version>8.4-702.jdbc3</version>
    </dependency>

    <!-- sl4j-api-1.5.0 manquante -->

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-parent</artifactId>
        <version>1.5.0</version>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.5.0</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>2.5.6</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aspects</artifactId>
        <version>3.0.3.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>2.5.6</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>2.5.6</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context-support</artifactId>
        <version>2.5.6</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>2.5.6</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>2.5.6</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jms</artifactId>
        <version>2.5.6</version>
    </dependency>

    <dependency>
        <groupId>javax.jms</groupId>
        <artifactId>jms</artifactId>
        <version>1.1</version>
        <scope>compile</scope>
    </dependency>

    <!-- <dependency> <groupId>org.springmodules</groupId> <artifactId>spring-modules-jbpm31</artifactId> 
        <version>0.9</version> <scope>provided</scope> </dependency> -->

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>2.5.6</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.ws</groupId>
        <artifactId>spring-oxm</artifactId>
        <version>1.5.0</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>2.0.4</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>2.5.6</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>2.5.6</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc-portlet</artifactId>
        <version>2.5</version>
    </dependency>

    <dependency>
        <groupId>com.atomikos</groupId>
        <artifactId>transactions-hibernate3</artifactId>
        <version>3.6.4</version>
    </dependency>

    <dependency>
        <groupId>com.atomikos</groupId>
        <artifactId>transactions-osgi</artifactId>
        <version>3.7.0</version>
    </dependency>

    <dependency>
        <groupId>com.vaadin</groupId>
        <artifactId>vaadin</artifactId>
        <version>6.7.0</version>
    </dependency>

    <dependency>
        <groupId>com.thoughtworks.xstream</groupId>
        <artifactId>xstream</artifactId>
        <version>1.3.1</version>
    </dependency>

    <!-- this is the dependency to the "jar"-subproject -->

    <dependency>
      <groupId>org.codehaus.plexus</groupId>
      <artifactId>plexus-utils</artifactId>
      <version>1.5.9</version>
    </dependency>

    <dependency>
        <groupId>com.google.gwt</groupId>
        <artifactId>gwt-user</artifactId>
        <version>2.1.1</version>
        <scope>provided</scope>
    </dependency>

</dependencies>

<!-- Define our plugin repositories -->
<pluginRepositories>
    <pluginRepository>
        <id>Codehaus</id>
        <name>Codehaus Maven Plugin Repository</name>
        <url>http://repository.codehaus.org/org/codehaus/mojo</url>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </pluginRepository>

    <pluginRepository>
        <id>codehaus-snapshots</id>
        <url>[http://nexus.codehaus.org/snapshots]</url>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
        <releases>
            <enabled>false</enabled>
        </releases>
    </pluginRepository>

</pluginRepositories>

<repositories>
    <repository>
        <id>vaadin-addons</id>
        <url>http://maven.vaadin.com/vaadin-addons</url>
    </repository>

    <repository>
        <id>demoiselle.sourceforge.net</id>
        <name>Demoiselle Maven Repository</name>
        <url>http://demoiselle.sourceforge.net/repository/release</url>
    </repository>

</repositories> 
```

但是当我`mvn clean install`构建我的项目时，控制台向我显示了这个错误：

```
[INFO] Unable to find resource 'org.codehaus.mojo:gwt-maven-plugin:jar:1.3-SNAPSHOT' in repository demoiselle.sourceforge.net (http://demoiselle.sourceforge.net/repository/release)
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Failed to resolve artifact.

Missing:
----------
1) org.codehaus.mojo:gwt-maven-plugin:jar:1.3-SNAPSHOT

 Try downloading the file manually from the project website.

Then, install it using the command: 
  mvn install:install-file -DgroupId=org.codehaus.mojo -DartifactId=gwt-maven-plugin -    Dversion=1.3-SNAPSHOT -Dpackaging=jar -Dfile=/path/to/file

 Alternatively, if you host your own repository you can deploy the file there: 
  mvn deploy:deploy-file -DgroupId=org.codehaus.mojo -DartifactId=gwt-maven-plugin -Dversion=1.3-SNAPSHOT -Dpackaging=jar -Dfile=/path/to/file -Durl=[url] -DrepositoryId=[id]

Path to dependency: 
1) com.vaadin:vaadin-maven-plugin:maven-plugin:1.0.1
2) org.codehaus.mojo:gwt-maven-plugin:jar:1.3-SNAPSHOT

 ----------
1 required artifact is missing.

for artifact: 
 com.vaadin:vaadin-maven-plugin:maven-plugin:1.0.1

from the specified remote repositories:
   demoiselle.sourceforge.net (http://demoiselle.sourceforge.net/repository/release),
   central (http://repo1.maven.org/maven2),
   Codehaus (http://repository.codehaus.org/org/codehaus/mojo),
   codehaus-snapshots ([http://nexus.codehaus.org/snapshots]),
   vaadin-snapshots (http://oss.sonatype.org/content/repositories/vaadin-snapshots/),
   vaadin-releases (http://oss.sonatype.org/content/repositories/vaadin-releases/),
   vaadin-addons (http://maven.vaadin.com/vaadin-addons) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T07:48:42.520

关于以前的答案：除非在您的父 POM 中定义，否则我看不到将`gwt-maven-plugin`依赖项放入其中的原因。`pluginManagement`即使在[Using Vaadin with Maven](https://vaadin.com/wiki/-/wiki/Main/Using%20Vaadin%20with%20Maven)一文中也没有`pluginManagement`.

您显然使用的是最新版本的 Vaadin (6.7.0)，因此旧插件无法使用它。试试这些：

*   最重要的：更改`vaadin-maven-plugin`为 1.0.2
*   将版本更改`gwt-maven-plugin`为 2.3.0-1
*   `gwt-user`将依赖版本更改为 2.3.0

如果上述修复不起作用，请尝试通过调用创建一个新的 Vaadin 项目：

```
mvn archetype:generate -DarchetypeGroupId=com.vaadin -DarchetypeArtifactId=vaadin-archetype-clean -DarchetypeVersion=LATEST -DgroupId=com.example -DartifactId=exampleArtifact -Dversion=1.0 -Dpackaging=war 
```

并将 POM 结构和插件版本与您自己的进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:23:48.533

由于 gwt-maven-plugin 最高版本为 2.4.0，因此该特定快照很可能不再存在...

尝试将依赖版本锁定为类似的版本，即 1.3.1：

```
<dependencyManagement>
  <dependency>
      <artifactId>gwt-maven-plugin</artifactId>
      <groupId>org.codehaus.mojo</groupId>
      <version>1.3.1</version>
  </dependency>
</dependencyManagement> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:21:04.463

您应该在 pluginManagement 块中而不是在构建区域中定义 gwt-maven-plugin。据我了解 gwt-maven-plugin 将被其他人使用，否则我将无法理解您的输出。此外，永远不要依赖插件的 SNAPSHOT 版本。修复您的插件版本，以在您的构建中获得可靠的结果。最后但并非最不重要的一点是开始使用存储库管理器（Artifactory、Archive、Nexus）来摆脱 pom.xml 中的存储库定义。让生活更听话。

# ruby - 嵌入式文档

> ID：10139333
> 
> 赞同：0
> 
> 时间：2012-04-13T10:42:50.457
> 
> 标签：ruby, mongodb, mongoid

我有两个模型：

```
class MenuPosition
  include Mongoid::Document
  field :name, type: String
  field :category, type: String

  field :portion, type: Integer
  field :carbo, type: Float
  field :fat, type: Float
  field :protein, type: Float

  field :colesterol, type: Float
  field :saturated_fats, type: Float
  field :suger, type: Float

  field :omega3, type: Float
  field :omega6, type: Float

  index :name, unique: true
  validates_uniqueness_of :name
end 
```

和

```
class Menu
  include Mongoid::Document
  field :assigned_date, type: Date
  embeds_many :menu_position

  index :assigned_date, unique: true
  validates_uniqueness_of :assigned_date

  def self.test
    position = {
      "name" => "pork",
      "category" => "meal",
      "portion" => 100,
      "carbo" => 4,
      "fat" => 2,
      "protein" => 5,
      "colesterol" => 1,
      "saturated_fats" => 1
    }

    MenuPosition.safely.create!(position)
    position = MenuPosition.find_by_name("pork")
    p position

    Menu.safely.create!(assigned_date: Date.new(2011, 04, 01))
    menu = Menu.where(assigned_date: Date.new(2011, 04, 01)).entries[0]
    p menu

    menu.menu_position = [position]
    menu.save

    menu = Menu.where(assigned_date: Date.new(2011, 04, 01)).entries[0]
    p menu
    p menu.menu_position

    return 0
  end 
```

我使用 self.test 方法来测试嵌入文档：

```
it "test it" do
  Menu.test.should eq(0)
end 
```

当我运行测试时，我插入了 MenuPosition 和 Menu，但未填充 Menu.MenuPosition：

```
#<MenuPosition _id: 4f87f93e83b7e01e4800003e, _type: nil, name: "pork", category: "meal", portion: 100, carbo: 4.0, fat: 2.0, protein: 5.0, colesterol: 1.0, saturated_fats: 1.0, suger: nil, omega3: nil, omega6: nil>
#<Menu _id: 4f87f93e83b7e01e4800003f, _type: nil, assigned_date: 2011-04-01 00:00:00 UTC>
#<Menu _id: 4f87f93e83b7e01e4800003f, _type: nil, assigned_date: 2011-04-01 00:00:00 UTC>
[] // <- here is menu.menu_position 
```

我该如何解决？

**更新：**

我试过这个：

```
Menu.create(assigned_date: Date.new(2011, 04, 01))
menu = Menu.where(assigned_date: Date.new(2011, 04, 01)).entries[0]
menu.menu_position.create(position)
menu.save
menu = Menu.where(assigned_date: Date.new(2011, 04, 01)).entries[0]
p menu
p menu.menu_position 
```

但它返回：

```
<Menu _id: 4f880f0a83b7e0194c00003e, _type: nil, assigned_date: 2011-04-01 00:00:00 UTC>
[] 
```

**更新2：**

如果我添加`embedded_in :menu`到 MenuPosition 中，它会起作用。但在这种情况下，我无法在没有菜单文档的情况下将 MenuPosition 文档存储在 MongoDb 中:(

# git - 如何删除提交

> ID：10139334
> 
> 赞同：1
> 
> 时间：2012-04-13T10:43:07.177
> 
> 标签：git, commit

![在此处输入图像描述](../Images/136ee8d6ce3cad77ff521501e5bd9382.png)

我想删除突出显示的提交 9dfd73。如您所见，它不是一个分支。这是一个分离的头的结果。

我尝试在其上创建一个分支，然后使用 git branch -D 9dfd73 删除该分支，但是删除了该分支，留下了提交。

有任何想法吗？

更新：

由于某种原因，该提交不再在我的树中退出，而且我没有机会尝试您的解决方案。

但是，如果您能解释该命令的真正作用，我会将其标记为正确答案:-)

git rebase --onto <9dfd73>^ <9dfd73> HEAD

我理解它类似于：“将提交 9dfd73 和 HEAD 之间的所有提交（不包括 HEAD 本身）放在提交 9dfd73 之上”

但我不明白 ^ 符号。

另外，我不确定ID是否应该相同。你能进一步解释一下吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:50:38.677

使用以下命令，

```
git rebase --onto <commit-id>^ <commit-id> HEAD 
```

commit-id 将是您的 SHA-1 id

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:36:12.147

您应该尝试 gitk ( `ctrl-F5`) 中的文件 > 重新加载菜单。这可能会使您的提交消失，因为它不再是当前提交并且不在任何分支上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:06:37.193

如果您现在坚持要摆脱它/它们，请按照[这些说明](https://stackoverflow.com/a/4528593/1286639)进行操作。但是，不要担心它；它最终会自行消失。

# jquery - jQuery，通过加载图像更改图像 src

> ID：10139336
> 
> 赞同：1
> 
> 时间：2012-04-13T10:43:14.840
> 
> 标签：jquery, image, loading, src

我有这种情况：

```
<div id="main_image">
<img src="images/big_image.png" alt="big image" width="300" height="300" />
</div>
<div id="thumbnails">
<a href="images/big1.png"><img src="images/thumb1.png" alt="thumb 1" /></a>
<a href="images/big2.png"><img src="images/thumb2.png" alt="thumb 2" /></a>
<a href="images/big3.png"><img src="images/thumb3.png" alt="thumb 3" /></a>
</div> 
```

我像以下代码一样更改大图像src：

```
$("#thumbnails a").hover(function() {
$("#main_image img").attr("src",$(this).attr("href"));
}); 
```

在显示新图像之前，我想在 main_image div 上显示加载图像，因为就像这个脚本一样，如果新图像太大我必须等待渲染。我该如何解决这种情况？

肿瘤坏死因子

* * *

找到了：

```
$('#additionals_image_carousel li a').mouseover(function() {
            var href = $(this).attr("href");

            $("#productMainImage img").fadeOut(function() { 
                $(this).load(function() { $(this).fadeIn(); }); 
                $(this).attr("src", href); 
            }); 
    }); 
```

并且 #productMainImage 有一个加载图像作为居中的背景

[jQuery淡入新图像](https://stackoverflow.com/questions/1977557/jquery-fade-to-new-image)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-15T16:33:41.967

1.  添加加载 gif 图像
2.  每次鼠标悬停肌动触发时不要分配加载肌动

html:

```
<img id="loading" src="/images/loading.gif" style=" display: none;"/> 
```

js：

```
var img = $("#productMainImage img"); 
var loadImg = $("#loading");

$('#additionals_image_carousel li a').mouseover(function() { 
    img.hide(); 
    loadImg.show(); 
    img.attr("src", $(this).attr("href"));
});

img.load(function() { 
    loadImg.hide(); 
    $(this).fadeIn(); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:47:58.943

我还没有测试过，但试一试，把这个 div 放在主图像中

```
<div id="load"><img src="images/loading.gif"/></div>

#load
{
display:none;
} 
```

然后做这样的事情

```
$("#thumbnails a").hover(function() {
$("#load").css('display','inline');
}); 
```

# java - 动态决定在 Guice 中注入哪个类

> ID：10139337
> 
> 赞同：0
> 
> 时间：2012-04-13T10:43:15.560
> 
> 标签：java, guice

我有一个关于 Guice 的问题。我有一个接口 IMyInterface，MyClass 类实现了它。

```
public class MyClass {
   public MyClass(IMyWorker);
} 
```

IMyWorker 接口有两个实现者 MyWorker1 和 MyWorker2。

我得到的绑定是：

```
 bind(IMyInterface.class).to(MyClass.class);
    bind(IMyWorker.class).annotatedWith(W1.class).to(MyWorker1.class);
    bind(IMyWorker.class).annotatedWith(W2.class).to(MyWorker2.class); 
```

W1 和 W2 是定义的注释。

我的问题是：当我创建 MyClass 的实例时，如何指定要注入到 MyClass 的构造函数中的 Worker？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:00:37.683

将注解添加到`MyClass`.

```
@Inject
public MyClass(@W1 IMyWorker worker) 
{
    ....
} 
```

这样一个类的实例`MyWorker1`将被注入。

# javascript - 使用javascript在两个html页面之间传递消息

> ID：10139340
> 
> 赞同：1
> 
> 时间：2012-04-13T10:43:22.783
> 
> 标签：javascript, message

我有两个 HTML 页面：source.html 和 dest.html

*   在 source.html 中，我创建了一些按钮（开始、停止、暂停......）
*   在 dest.html 中，我创建了一个简单的时钟。

每当我单击其中一个按钮时，源都会向 dest 发送一条消息。处理后，结果（基于按下的按钮）将被发送回源。我尝试了 iframe，但它对我不起作用。是否有任何不使用客户端-服务器模型的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:01:50.283

有两种方式发送消息。

1.  在源代码中创建一个提交到 dest.html 的表单，确保方法是“GET”

2.  单击按钮设置消息的值并提交表单

    // 类似 document.getElementById('message').value = 'HELLO'; document.getElementById('form').submit();

2a. 您不需要制作表单，您只需在 source.html 按钮上使用硬编码的 url 进行重定向，点击喜欢

```
window.location = 'dest.html?message=somemessage'; 
```

1.  提交后，dest.html 文件将打开，页面 URL 中包含可用消息

    var url = window.location+"";

    // 如果有多个参数，您将不得不循环并将它们存储在数组中以供单个您使用

    var message = url.substr((url.indexOf('=')+1)); 警报（消息）；

**第二种方法** 未尝试，当单击 source.html 上的按钮时将它们存储在 cookie 中并读取 dest.html 中的 cookie

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:47:58.003

如果窗口是独立的（没有对服务器的请求），则**无法**做到这一点。如果两个窗口都不是任何类型的框架。因为安全原因。

但是如果你从 source.html 创建 dest.html 窗口，你可以使用创建的窗口变量 ( *window.open* ) 来管理它，并使用*OPENER*对象来管理 source.html 窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-06T18:29:34.363

事实上，你可以。尝试使用该`window.postMessage()`方法。另外，如果您想发回一些消息，您将需要创建一个事件侦听器。

请按照[本参考资料中的步骤操作](https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage)

# python - 在 Tornado 中处理未定义的模板变量

> ID：10139341
> 
> 赞同：14
> 
> 时间：2012-04-13T10:43:26.977
> 
> 标签：python, tornado

这是一个龙卷风模板（例如，在文件 logout.html 中）我在注销过程中出现错误时呈现：

```
 {% if logout_error %}
    Oops! The logout failed. Please close all open documents and try again
  {% end %} 
```

这可以使用

```
self.render("logout.html", logout_error=True) 
```

如果注销成功，我必须这样做

```
self.render("logout.html", logout_error=False) 
```

如果我忽略`logout_error=False`，我会得到

```
NameError: global name 'logout_error' is not defined 
```

如果有很多标志（为假），则关键字参数可能会堆积起来。有没有办法让模板认为`logout_error`它`False`不存在？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-13T13:27:27.083

黑客使用`locals().get()`是一种方法。另一个更正统的方法是使用`try`. Tornado 模板支持它，因此您可以：

```
{% try %}
  {% if logout_error %}
    Oops! The logout failed. Please close all open documents and try again
  {% end %}
{% except %}
{% end %} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-13T10:50:11.063

您可以使用

```
{% if locals().get('logout_error', False) %} 
```

`False`如果未设置属性，则替换为所需的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-24T10:30:40.420

{% if locals().get('logout_error', False) %} not works because variables not passed as in **kwargs;

{% if globals().has_key('logout_error') %} works to me because my variables are passed separately, [https://groups.google.com/forum/#!topic/python-tornado/dyl50NO3yzE](https://groups.google.com/forum/#!topic/python-tornado/dyl50NO3yzE) this page has more disscussion on this problem.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-03T13:50:40.863

“龙卷风方式”是没有未声明的变量。显式声明变量更加禅宗。

解决方法：

```
{% if 'grok' in globals() %}
  {{grok}}
{% end %}

{% if globals().get('grok_error', False) %}
  error message
{% end %} 
```

# java - 定义与另一个点进行比较的 isUnder 方法

> ID：10139342
> 
> 赞同：0
> 
> 时间：2012-04-13T10:43:28.647
> 
> 标签：java, methods

我有课点：

```
public class Point
{
    private double _x;
    private double _y;

} 
```

我也有`getX()`，`getY()`方法。我需要定义2个方法：

```
1\. public boolean isAbove(Point other)
2\. public boolean isUnder(Point other) 
```

所以这就是我想出的：

```
public boolean isAbove(Point other)
{
    if (this._y <= other._y)
    {
        return false;
    }
    else
    {
        return true;
    }
}

public boolean isUnder(Point other)
{   

} 
```

我已经尝试了几件事`isUnder`并得到了不同的结果。编写这两种方法的正确方法是什么？

** 重要的 **

我必须使用`isAbove()`方法`isUnder()`！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:57:21.367

如果你不能改变方法的数量并且“isAbove”实际上意味着“isAtSameHeightOrAbove”

```
public boolean isAbove(Point other)
{
    return this._y >= other._y;
}

public boolean isUnder(Point other)
{   
    return this._y != other._y && !isAbove(other);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:56:24.820

`isUnder`可以这样实现

```
public boolean isUnder(Point other)
{   
     return (this._y != other.getY()) && !isAbove(other);
} 
```

并且`isAbove`可以是

```
public boolean isUnder(Point other)
    {   
         return (this._y > other.getY());
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T10:51:51.213

如果您只处理 2 种可能性，那么 isUnder = !isAbove 所以您所要做的就是：

```
return !isAbove(other) 
```

但是，在我看来，两点可以处于同一水平。话虽如此，我不知道上下文，所以我可能是错的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T10:55:56.127

如果您希望能够获得它的价值，您将需要一个吸气剂。然后将该方法与您的比较方法一起使用：

```
public class Point
{
    private double _x;
    private double _y;

public double getY() {
return _y;
   }
public boolean isAbove(Point other)
{
    if (getY() <= other.getY())
    {
        return false;
    }
    else
    {
        return true;
    }
} 
```

}

# android - Lotus Domino 服务器上的 Android HTTP 身份验证

> ID：10139345
> 
> 赞同：3
> 
> 时间：2012-04-13T10:43:32.827
> 
> 标签：android, lotus-domino

我正在开发一个能够从 Lotus Domino 数据库中读取数据的 android 应用程序。我开始创建一个页面来测试 HTTP 身份验证，我遇到了很多困难。这是我的代码片段：

```
 public void GoAuth(View v){
    final String httpsURL = "http://xxx.xxx.xxx.xxx/names.nsf/mypage?openpage";
    final DefaultHttpClient client = new DefaultHttpClient();
    final HttpPost httppost = new HttpPost(httpsURL);

    String userName = "demo";
    String password = "demo";

    try {
        //authentication block:
        final List<BasicNameValuePair> nvps = new ArrayList<BasicNameValuePair>();
        nvps.add(new BasicNameValuePair("Username", userName));
        nvps.add(new BasicNameValuePair("Password", password));
        final UrlEncodedFormEntity p_entity = new UrlEncodedFormEntity(nvps, HTTP.UTF_8);
        httppost.setEntity(p_entity);

        //sending the request and retrieving the response:
        HttpResponse response = client.execute(httppost);
        HttpEntity responseEntity = response.getEntity();

        if (response.getStatusLine().getStatusCode() == HttpURLConnection.HTTP_OK){
            //handling the response 
            final InputSource inputSource = new InputSource(responseEntity.getContent());
            TextView res=(TextView)findViewById(R.id.result);
            res.setText("Server response: "+inputSource.toString());
        }

    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

服务器响应为：org.xml.sax InputSource@40575700

在浏览器中尝试相同的操作，我看到登录页面，然后是“mypage”的内容。我对我必须在 android 上遵循的正确方法和机制有点困惑。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T12:36:35.033

正如 Richard 在评论中提到的，您可能会看到“[基于会话的身份验证](http://www.lotus.com/ldd/doc/domino_notes/7.0/help7_admin.nsf/f4b82fbb75e942a6852566ac0037f284/03a88698ea068ece8525706f0065d96f?OpenDocument)表单”，使用任何类型的代码都相当麻烦。

为了获得可能任何语言都可以轻松处理的“HTTP 基本身份验证”（基于浏览器的用户名/密码提示），您可以/应该在服务器端实现[覆盖会话身份验证规则](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/07282008031247PMKMKQJ3.htm)。

另请参阅[Domino 7.0.2 允许覆盖基于会话的身份验证](http://www.ibm.com/support/docview.wss?uid=swg21250004)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:26:40.110

以下是我在几个与 Lotus Domino 同步的 Android 应用程序中使用的一些代码的核心部分：

```
 private boolean authenticateWithDomino() throws Exception {

    String fullLoginUrl = "";

    if (useSSL) {
        fullLoginUrl = "https://" + hostName + ":" + httpPort + "/names.nsf?Login";
    } else {
        fullLoginUrl = "http://" + hostName + ":" + httpPort + "/names.nsf?Login";
    }

    DominoHttpRequest dominoRequest = DominoHttpClient.getInstance()
            .createRequest();
    dominoRequest.setUrl(fullLoginUrl);
    dominoRequest.setMethod("POST");
    dominoRequest.addParam("username", notesName);
    dominoRequest.addParam("password", notesPassword);
    dominoRequest.addParam("redirectto", "/icons/ecblank.gif");
    dominoRequest.execute();
    } 
```

一些使用注意事项：

*   这适用于基于会话的身份验证，但不适用于基本身份验证。
*   names.nsf 可能不是服务器目录的文件名，但通常是。
*   记下端口号。通常，常规 http 为 80，https 为 443，但它们可以在 Domino 服务器上进行配置。

稍后添加...这是一个使用 Domino 进行“复制”的 Java 类的链接：[DiscussionReplicator.java](http://github.com/OpenNTF/DomDIsc/blob/master/DomDisc/src/org/openntf/domdisc/general/DiscussionReplicator.java)。查找名为**getAuthenticationToken**的方法，该方法返回“DominoAuthSessID=xyz”或“LtpaToken=abc”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-25T08:58:33.967

如前所述，上面的代码将用于将凭据发布到 Domino 服务器，但您需要处理登录失败的任何问题 - 无论是由于身份验证还是授权。

顺便说一句，绕过 Domino 登录表单通常在客户端完成，如此处所示 - [http://www.codestore.net/store.nsf/unid/BLOG-20081008](http://www.codestore.net/store.nsf/unid/BLOG-20081008) 并且具有相同的问题。

在我的博客中，我谈到了在 Domino 配置数据库中的服务器上创建自定义登录表单——这是一个标准的内置配置数据库。此自定义登录表单并非设计为直接打开，而是设计用于第三方系统进行身份验证，然后它将返回带有任何身份验证/授权问题的 JSON 数据。

如果您发现在 Java 代码中更容易使用，您可以使用相同的方法并转换为 XML。

文章链接在这里：[http ://www.markbarton.com/?p=314](http://www.markbarton.com/?p=314)

关于 Domino 配置数据库 (domconfig.nsf) 的信息链接在这里 [http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.help.domino.admin .doc%2FDOC%2FH_CREATING_THE_DOMINO_CONFIGURATION_DATABASE.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.help.domino.admin.doc%2FDOC%2FH_CREATING_THE_DOMINO_CONFIGURATION_DATABASE.html)

# c# - 我应该避免使用静态方法，因为它很难测试吗？

> ID：10139354
> 
> 赞同：-3
> 
> 时间：2012-04-13T10:44:15.087
> 
> 标签：c#, unit-testing, legacy-code

我读了这本书`Working effectivly with Legacy code`。

我了解打破旧代码中的依赖关系的技术

但我想第一次了解如何避免这些依赖：

1-关于静态方法：

我明白`Introduce Instance Delegator`

但这是否意味着我们应该完全避免使用静态方法？

（当它不仅仅是一段代码的宏时。

意味着它有一些真实的逻辑并且它与实例无关？）

2- 全局变量

我明白`Introduce Static Setter`，

但又一次——我们应该完全避免辛格尔顿吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:52:31.173

传统上，单元测试领域对静态方法的批评是难以模拟它们。我从来不同意将其作为避免使用静态方法的理由（并且预料到那些不同意的人，并不是每个人都有使用 IOC 容器的奢侈）。

有一些工具可以模拟静态类，例如[JustMock](http://www.telerik.com/products/mocking/features.aspx)。

模拟单例的另一种更肮脏的方法是让单例返回一个接口并在单元测试期间使用私有访问器或直接反射模拟出单例上的实例。

# java - 图像上的 if 语句

> ID：10139358
> 
> 赞同：0
> 
> 时间：2012-04-13T10:44:39.190
> 
> 标签：java, android

我有一个打勾的图像。目前我知道如何使用 GONE/VISIBLE 设置可见性。

```
 tick.setVisibility(View.VISIBLE); 
```

我希望能够使用 if 语句检测图像是否可见。

```
if (tick is visible){
i++
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:47:11.107

```
if (View.VISIBLE == tick.getVisibility()) {
    i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:48:01.033

试试这个代码，它会帮助你。

```
if (ticket.getVisiblity() == View.VISIBLE) {
   i++;
} 
```

# internet-explorer - IE 总是随时间发送相同的 jsessionid（使用 Java Wicket）

> ID：10139364
> 
> 赞同：1
> 
> 时间：2012-04-13T10:45:02.377
> 
> 标签：internet-explorer, session, wicket, wicket-1.5

我有一个在本地环境中托管的应用程序，并且遇到了一个仅在 IE 中出现的非常奇怪的问题。我测试过的其他浏览器（Chrome 和 Firefox）似乎没有重现该问题。

我正在使用 Wicket 1.5.0 快照。

在应用程序中，我有一个调度页面，它验证初始请求并在验证后采取进一步的行动。在里面我有：

```
setResponsePage(Canvas.class, pageParams);
MyCustomSession.get().bind(); 
```

并且在调用 MyCustomSession.get() 的 Canvas 页面中，它为每个请求返回一个全新的会话，这会导致问题，因为我之前放入会话中的所有数据都消失了。

然后我追查了问题，在我看来，IE 总是在请求标头中发送相同的 jsessionid，无论如何 - 8302844E8BB8FD6D1A617C0E6A2C58C3。

在 setResponsePage(Canvas.class, pageParams) 的响应标头中，状态码为 302，我看到响应标头如下：

```
Set-Cookie JSESSIONID=91474844FC17D16B960A0760BA9DC129; Path=/apppath 
```

无论如何，来自 IE 的所有下一个请求都具有该标头字段（与以前相同的会话 id）：

```
Cookie JSESSIONID=8302844E8BB8FD6D1A617C0E6A2C58C3 
```

请帮助我解决这个问题，因为它真的让我很困扰。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T16:25:56.403

实际上问题是根本没有发送cookie。我进一步检查，结果发现这是第三方内容通信的问题（正如 IE 术语所定义的那样）。

我们的应用程序是一个 FB 应用程序，因此包含在 iframe 中（因为被 FB 嵌入）并且 IE 的安全设置拒绝将 cookie 发送到我们的 - 在这种情况下 - 第三方内容。经过一些研究，我发现将 P3P（Platform for Privacy Preferences Project）标头放在我们的响应中将满足这些策略并使 IE 能够在请求标头中发送 cookie。

为此，我在我们的 Web 项目中创建了一个过滤器，以将该标头放入从我们的应用程序发送的每个响应中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:49:06.053

基本上只是一个疯狂的猜测：`/`浏览器中是否为同一域的路径存储了一个 JSESSIONID cookie，这会产生这种奇怪的行为？也许 IE 发送这个 cookie 而不是为`/apppath`.

在我脑后的某个地方，我似乎记得一个类似的问题，但不幸的是我不记得解决方案......

# iphone - 带有数组和字典的新类

> ID：10139370
> 
> 赞同：0
> 
> 时间：2012-04-13T10:45:28.643
> 
> 标签：iphone, objective-c

我是 Xcode 的新手，我正在尝试用数组和字典创建一个类。我不明白如何正确初始化对象。我究竟做错了什么？

**“主数据.h”**

```
#import <Foundation/Foundation.h>

@interface maindata : NSDictionary
{
    NSDictionary *maindict;
    NSArray      *arrayofallmethods;
    NSArray      *categories;
    NSArray      *methods;
}

@property(nonatomic,retain) NSDictionary *maindict;
@property(nonatomic,retain) NSArray      *categories;
@property(nonatomic,retain) NSArray      *methods;
@property(nonatomic,retain) NSString     *pathtoplist;

+(maindata *) shareddata;

@end 
```

**“主数据.m”**

```
#import "maindata.h"

@implementation maindata

@synthesize maindict;
@synthesize methods;
@synthesize categories;
@synthesize pathtoplist;

static maindata *shareddata_;

-(id)init
{
    if(self == [super init])
    {
        pathtoplist = [[NSBundle mainBundle] pathForResource:@"allData" ofType:@"plist"];
        shareddata_.maindict = [NSMutableDictionary dictionaryWithContentsOfFile:pathtoplist];
        shareddata_.methods = [maindict allValues];
    }

    return shareddata_;
}

+(maindata *) shareddata
{
    if (!shareddata_)
    {
        shareddata_ = [[maindata alloc] init];
    }

    return shareddata_;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:07:24.173

您在这里创建的似乎是单例对象。如果你故意这样做，那很好。但是，要正常初始化一个对象，您应该只使用`-(id)init`没有静态共享内容的方法。

所以基本上你应该遵循吉姆的回答。注意线

```
-(id)init
{
    if(self == [super init]){}
} 
```

不是比较，而是赋值，所以应该是这样的

```
-(id)init
{
    if(self = [super init]){}
} 
```

或者，为避免编译器警告，您可以编写

```
-(id)init
{
    self=[super init];
    if(self){}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:00:36.397

```
//maindata.h
#import <Foundation/Foundation.h>
@interface maindata : NSObject{
         NSDictionary *maindict;
         NSArray      *arrayofallmethods;
         NSArray      *categories;
         NSArray      *methods;
}
@property(nonatomic,retain) NSDictionary *maindict; 
@property(nonatomic,retain) NSArray *categories;
@property(nonatomic,retain) NSArray *methods;
@property(nonatomic,retain) NSArray * arrayofallmethods;
@end

//"maindata.m"

import "maindata.h"
@implementation maindata
@synthesize maindict;
@synthesize methods;
@synthesize categories;
@synthesize arrayofallmethods;

-(id)init {
      if(self = [super init]){
          NSString *pathtoplist = [[NSBundle mainBundle] pathForResource:@"allData" ofType:@"plist"];
          maindict = [NSMutableDictionary dictionaryWithContentsOfFile:pathtoplist];
          methods = [maindict allValues];
    }
    return self;
 }
@end 
```

并从其他类尝试初始化和创建 maindata 类的对象

```
#import <UIKit/UIKit.h>
#import "maindata.h"

int main(int argc, char *argv[]) {
     maindata *objMainData = [[maindata alloc]init];
     // use object here for more operations on your data.
} 
```

# javascript - OpenLayers 保存一个特征

> ID：10139372
> 
> 赞同：0
> 
> 时间：2012-04-13T10:45:43.217
> 
> 标签：javascript, openlayers

我正在创建一个可以使用此代码编辑的行：

```
 var line_points = Array();
    var lineLayer = new OpenLayers.Layer.Vector(label);
    this.map.addLayer(lineLayer);
    this.map.addControl(new OpenLayers.Control.DrawFeature(lineLayer, OpenLayers.Handler.Path));

    for ( x in points ) {
        var point = points[x].split(',');
        var lat = parseFloat( point[0] );
        var lon = parseFloat( point[1] );
        line_points[x] = new OpenLayers.Geometry.Point(this.Lon2Merc(lon), this.Lat2Merc(lat));
    }

    var line = new OpenLayers.Geometry.LineString(line_points);
    var lineFeature = new OpenLayers.Feature.Vector(line, null, style);

    lineLayer.addFeatures([lineFeature]); 
```

每当移动或创建一个点以更新用于保存该数据的 HTML 表单时，我都会尝试从该功能中提取纬度和经度。我听说过协议和东西，但不认为这对我来说是正确的。

有人可以指出我正确的方向吗？

编辑：我尝试直接从 HTML 中获取详细信息：

```
 var x = 0;
    var y = 0;
    $.each(document.getElementById("OpenLayers.Geometry.LineString_195").getAttribute("points").split(','), function(index, value) {
        if(index%2){
            y = value;
            console.log(MercatorToLatLon(x,y).Lat + "," + MercatorToLatLon(x,y).Lon);
        } else {
            x = value;
        }
        //console.log(value);
    }); 
```

但这似乎并没有给出任何有用的价值，而且没有特别的顺序，我觉得很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T13:54:07.440

您可以使用该`getVertices`操作检索要素中所有点的最新纬度和经度。

因此，每当您想更新您的 html 时，请调用以下命令。

```
console.log(lineFeature.geometry.getVertices()); 
```

# 每条评论更新：

```
function report(event) {
    console.log(event.feature.geometry.getVertices());
    console.log(event.type, event.feature ? event.feature.id : event.components);
}
lineLayer.events.on({
    "beforefeaturemodified": report,
    "featuremodified": report,
    "afterfeaturemodified": report,
    "vertexmodified": report,
    "sketchmodified": report,
    "sketchstarted": report,
    "sketchcomplete": report
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T15:08:46.320

直接从 dom 访问几何值可能不是最好的主意。更好更容易使用 OpenLayers API。

您可以订阅图层的`featuremodified`事件，然后访问修改的功能：

```
lineLayer.events.on({"featuremodified": function(feature){
    console.log(feature.geometry.getVertices());
}}); 
```

您也可以收听其他事件，例如“featureadded”、“featureremoved”等。

希望你能明白。

# bash - shell中trap命令的使用

> ID：10139374
> 
> 赞同：2
> 
> 时间：2012-04-13T10:45:59.553
> 
> 标签：bash, shell, signals

我试图在这里捕获退出代码“0”。每当退出代码 0 被捕获时，就会在陷阱中调用检查函数，我正在尝试使用 command 重新启动硬件`hascli -rn /`，但每次都会跳过此命令的执行。

```
#!/bin/bash
source $TCE_COMMON
source commonFunctions.sh
trap "
     check
     " 0
checkRGservices
function check
{
 hascli -rn /
 %SLEEP 300
 %NODE none
 #!/bin/bash
 source $TCE_COMMON
 source commonFunctions.sh
 checkForCoreFiles
} 
```

任何人都可以帮助我摆脱这种情况。

在此先感谢，马希。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:02:54.463

正如*威廉*已经假设的那样：

与编译器在启动之前扫描整个程序的 C 或 Java 语言相比，shell 以自上而下的方式解释。因此，为了能够使用您的函数*check()*，您必须在此之前定义它。错误消息`check: command not found`是此类问题的有力指标。*解决方法：把check()*的函数定义移到*trap*命令上面。

*对陷阱*命令的一般注意事项：如*bobah*所述，在*陷阱*命令中使用关键字（此处：）`EXIT`而不是数字（此处：） 。它使您的代码更具可读性并且更易于移植，因为并非所有 *NIX 变体都使用相同的数字（尽管 '0' 在这里是一个特例）。`0`

# jquery - 在 jQuery datepicker 中设置最小日期

> ID：10139378
> 
> 赞同：53
> 
> 时间：2012-04-13T10:46:08.897
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

嗨，我想将 jQuery datepicker 中的最小日期设置为 (1999-10-25)。所以我尝试了下面的代码它不起作用。

```
$(function () {
    $('#datepicker').datepicker({
        dateFormat: 'yy-mm-dd',
        showButtonPanel: true,
        changeMonth: true,
        changeYear: true,
        showOn: "button",
        buttonImage: "images/calendar.gif",
        buttonImageOnly: true,
        minDate: new Date(1999, 10 - 1, 25),
        maxDate: '+30Y',
        inline: true
    });
}); 
```

如果我将最小年份更改为高于 2002 年，它将正常工作，但如果我指定最小年份小于 2002 年（如上面的示例 1999 年），它将只显示到 2002 年。
我正在使用`jquery-1.7.1.min.js`and `jquery-ui-1.8.18.custom.min.js`。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-04-13T11:13:43.887

```
$(function () {
    $('#datepicker').datepicker({
        dateFormat: 'yy-mm-dd',
        showButtonPanel: true,
        changeMonth: true,
        changeYear: true,
yearRange: '1999:2012',
        showOn: "button",
        buttonImage: "images/calendar.gif",
        buttonImageOnly: true,
        minDate: new Date(1999, 10 - 1, 25),
        maxDate: '+30Y',
        inline: true
    });
}); 
```

刚刚添加了年份范围选项。它应该可以解决问题

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-13T11:11:55.217

问题是“yearRange”的默认选项是 10 年。

所以`2012 - 10 = 2002`。

因此，将 yearRange 更改为`c-20:c`或仅更改为 1999 ( `yearRange: '1999:c'`)，并将其与限制日期 (mindate、maxdate) 结合使用。

欲了解更多信息：[https ://jqueryui.com/demos/datepicker/#option-yearRange](https://jqueryui.com/demos/datepicker/#option-yearRange)

* * *

参见示例：（[JSFiddle](https://jsfiddle.net/kGjdL/)）

你的代码加上：

```
$(function () {
    $('#datepicker').datepicker({
        dateFormat: 'yy-mm-dd',
        showButtonPanel: true,
        changeMonth: true,
        changeYear: true,
        showOn: "button",
        buttonImage: "images/calendar.gif",
        buttonImageOnly: true,
        minDate: new Date(1999, 10 - 1, 25),
        maxDate: '+30Y',
        yearRange: '1999:c',
        inline: true
    });
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-13T11:07:45.763

嗨**工作演示**：http: [//jsfiddle.net/femy8/](http://jsfiddle.net/femy8/)

现在日历只会转到 1999 年 10 月 25 日的最小值。

单击图像，即显示日历的文本框旁边的小图标。您可以尝试选择直到 1999 年，但选择的最短日期是 1999 年 10 月 25 日。这是您想要的。

这会有所帮助，祝你好运！:) 干杯！

**jQuery代码**

```
$(".mypicker").datepicker({
    changeYear: true,
    dateFormat: 'yy-mm-dd',
    showButtonPanel: true,
    changeMonth: true,
    changeYear: true,
    showOn: "button",
        buttonImage: "images/calendar.gif",
        buttonImageOnly: true,
        minDate: new Date('1999/10/25'),
        maxDate: '+30Y',
        inline: true
});

​ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-13T00:58:12.247

只是想为未来的程序员添加这个。

此代码限制日期最小值和最大值。通过将当前年份作为最大年份来完全控制年份。

希望这对任何人都有帮助。

这是代码。

```
var dateToday = new Date();
var yrRange = '2014' + ":" + (dateToday.getFullYear());

$(function () {
    $("[id$=txtDate]").datepicker({
        showOn: 'button',
        changeMonth: true,
        changeYear: true,
        showButtonPanel: true,
        buttonImageOnly: true,
        yearRange: yrRange,
        buttonImage: 'calendar3.png',
        buttonImageOnly: true,
        minDate: new Date(2014,1-1,1),
        maxDate: '+50Y',
        inline:true
    });
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-14T14:12:00.447

以防万一，例如，您需要输入最小日期、最近 3 个月和接下来 3 个月的最大日期

```
$('#id_your_date').datepicker({ 
   maxDate: '+3m',
   minDate: '-3m'
 }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-15T09:37:59.403

像这样试试

```
<script>

  $(document).ready(function(){
          $("#order_ship_date").datepicker({
           changeMonth:true,
           changeYear:true,           
            dateFormat:"yy-mm-dd",
            minDate: +2,
        });
  }); 

</script> 
```

html代码如下

```
<input id="order_ship_date"  type="text" class="input" style="width:80px;"  /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-04T16:45:19.773

基本上，如果您已经指定了年份范围，则无需使用`mindate`，`maxdate`如果只需要年份

# c++ - 如何更改正在运行的程序中的变量？

> ID：10139382
> 
> 赞同：0
> 
> 时间：2012-04-13T10:46:25.290
> 
> 标签：c++, messaging

例如，我的 c++ 程序中有一个向量：

```
vector<string> files; 
```

这个程序已经在运行。

我想调用我的其他程序将字符串动态添加到文件向量（在已经运行的程序中）。

我应该为此在 localhost 上创建一个客户端-服务器应用程序吗？
或者还有其他方法吗？（如何将带有参数的消息发送到正在运行的程序）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:57:33.147

我不能给出一个很好的答案，因为我没有经验，但这些是我打算研究的一些事情：

*   [Boost.ASIO](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio.html)
*   [Boost.interprocess](http://www.boost.org/doc/libs/1_49_0/doc/html/interprocess.html)
*   [雅米](http://www.inspirel.com/yami4/)
*   本地主机上的 TCP 或 Unix 套接字。
*   文件观看

也许里面的东西对你有用。进程间通信是您要搜索的术语（IPC）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:55:43.290

有很多方法可以做到这一点。谷歌进程间通信。 [http://en.wikipedia.org/wiki/Inter-process_communication](http://en.wikipedia.org/wiki/Inter-process_communication)

在 Windows 上，我会使用类似的东西：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa366551 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366551(v=vs.85).aspx)

或者只是一个临时文件，如果我想快速而肮脏地处理它。

# php - 使用空的 php SESSION - 0 案例

> ID：10139383
> 
> 赞同：0
> 
> 时间：2012-04-13T10:46:27.193
> 
> 标签：php, javascript, mysql

早上好！我有一个变量“var”，它可能为 0。我检查变量是否为空，如果不是，我将这个变量保存在 php 会话中，然后调用另一个页面。在这个新页面中，我检查我创建的会话是否为空，但是当它为 0 时，它返回会话为空。听起来没那么疯狂！但即使我使用

```
if($_SESSION['SESS_NUM']!=NULL) 
```

它仍然看不到 0 数字为 0。有什么方法可以检查 0 吗？变量“var”的内容来自一个 sql 查询（带有 sql 查询的函数返回

```
$f_result[thenum]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:59:17.913

你的意思是：

```
if(isset($_SESSION['SESS_NUM'])) {
  echo $_SESSION['SESS_NUM']; //if 0 shows 0
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:06:40.177

使用相同的比较运算符`===`(http://ru2.php.net/manual/en/language.operators.comparison.php)。它检查 $a 是否等于 $b，并且它们是相同的类型。

```
$_SESSION['SESS_NUM0'] = 0;

if($_SESSION['SESS_NUM0'] === 0) {
// Checks if $_SESSION['SESS_NUM0'] IS (int)0
  var_dump($_SESSION['SESS_NUM0']); // prints int(0)
} 
```

# select - 在 select 语句 Cassandra 中的 where 子句之后替代 OR 条件

> ID：10139390
> 
> 赞同：7
> 
> 时间：2012-04-13T10:46:42.763
> 
> 标签：select, cassandra, where, cql

在 Cassandra 中是否可以像在任何 RDBMS 中一样在 select 语句中的 where 子句之后一起使用多个条件 union ed。这是我的代码：

```
SELECT * from TABLE_NAME WHERE COND1= 'something' OR COND2 = 'something'; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T19:55:06.887

假设 COND 是表主键的名称，您可以执行以下操作：

```
SELECT * from TABLE_NAME WHERE COND1 in ('something', 'something'); 
```

因此，没有完全通用的`OR`操作，但看起来这可能等同于您尝试做的事情。

请记住，当您使用 CQL 时，查询计划并不是它的优势之一。Cassandra 代码通常假设您拥有大量数据，因此它会尽量避免执行任何可能最终变得昂贵的查询。在 RMDBS 世界中，您根据内在关系（第三范式等）构建数据，而在 Cassandra 中，您根据预期需要的查询构建数据。非规范化是（原谅双关语）规范。

重点是，与旧的 Thrift RPC 接口相比，CQL 旨在成为一种更熟悉、更友好的 Cassandra 查询语法。它并不像 SQL 那样具有完全的表现力和灵活性。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-16T07:52:21.513

简单的回答：没有等价的**OR**

[http://www.datastax.com/docs/0.8/dml/using_cql](http://www.datastax.com/docs/0.8/dml/using_cql)

这是 v0.8 的命令参考：

[http://www.datastax.com/docs/0.8/references/cql#cql-reference](http://www.datastax.com/docs/0.8/references/cql#cql-reference)

> 选择 [FIRST N] [REVERSED] 从 [USING ] [WHERE ] [LIMIT N]；

..

> WHERE 子句用于过滤出现在结果中的行。该子句可以过滤键名或键范围，如果是索引列，则可以过滤列值。使用 KEY 关键字、关系运算符（=、>、>=、< 和 <= 之一）和术语值指定键过滤器。当术语出现在关系运算符的两侧时，假定过滤器适用于索引列。使用列索引过滤器，运算符左侧的术语是名称，右侧的术语是要过滤的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-06T20:45:46.380

这是 CQL v3 的语法：

```
SELECT * | select_expression | DISTINCT partition 
FROM [keyspace_name.] table_name 
[WHERE partition_value
   [AND clustering_filters 
   [AND static_filters]]] 
[ORDER BY PK_column_name ASC|DESC] 
[LIMIT N]
[ALLOW FILTERING] 
```

那么你不能像 SQL 那样使用 OR 操作。

# php - 通过 3 个页面传递变量 - PHP

> ID：10139391
> 
> 赞同：1
> 
> 时间：2012-04-13T10:46:44.153
> 
> 标签：php, forms, session, get, parameter-passing

所以我在 sampleform.html 有一个表单，它接受用户的值 [这是从下拉菜单中选择的数字。数字是病房id]

这个数字通过 GET 方法传递给 index.php。现在，在 index.php 上，用户可以看到与他选择的数字相关的详细信息（来自 mysql 数据库），并且他有两个链接可供选择：

1.  货车路线
2.  三轮车路线

我想通过超链接 url 传递一个新变量 'route=lor' 或 'route=tri' 以及来自 sampleform.html 的原始病房号到一个新页面 - route.php 通过 index.php

我在 index.php 上尝试了 $_SESSION，其中 $_SESSION['wardno'] 接受来自 sampleform.html 的 $_GET['wno'] 值。但是当我调用 $_SESSION['wardno'] 时，我无法在 route.php 上看到任何输出。

单击 index.php 上的两个超链接之一后，如何从 sampleform.html、index.php 和 route.php 传递这个变量？

我没有看到语法错误。如果你们不明白这个问题，将提出代码。

帮助表示赞赏。提前致谢，

考希克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:48:23.213

`href`在两个超链接的属性中包含要通过 index.php 传递的任何 GET 查询变量的名称和值。

* * *

代码片段#1

```
<?php
    function getparams() {
        foreach ($_GET as $k => $v)
            $r .= htmlspecialchars(urlencode($k)) . '=' .
                  htmlspecialchars(urlencode($v)) . '&';
        return $r;
    }
?>
<a href="route.php?route=lor&<?php echo getparams(); ?>">link 1</a>
<a href="route.php?route=tri&<?php echo getparams(); ?>">link 2</a> 
```

# debian - postinst 中的 db_input 不起作用

> ID：10139395
> 
> 赞同：1
> 
> 时间：2012-04-13T10:47:07.430
> 
> 标签：debian, apt-get, deb, post-install, debconf

我的 postinst 脚本有问题，我必须询问 MySQL 的 root 密码才能为我的应用程序创建一些用户。我知道，在 postinst 中使用 db_input 是不好的做法，但我真的需要它。为什么当我安装我的应用程序表单存储库时此 postinst 不起作用，但当我将其安装为 .deb 包时正常工作？

后勤：

```
#!/bin/bash -e

. /usr/share/debconf/confmodule

db_input high my_app/mysql_root_password || true
db_go 
```

错误：

```
dpkg: error processing my-app (--configure):
 subprocess installed post-installation script returned error exit status 30
configured to not write apport reports
                                      Errors were encountered while processing:
 my-app
E: Sub-process /usr/bin/dpkg returned an error code (1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:09:09.763

差异可能与运行 postinst 时终端的设置方式有关；可能 apt 做的事情与你自己运行 dpkg 时发生的事情不同。也许 apt-wrapped postinst 调用甚至没有分配 TTY；我不确定，随便。

但是我认为`db_input`甚至不支持放入 postinst，因此您可能很难按原样修复它。如果您真的非常需要从 postinst 脚本本身提出问题，您可以通过`$DEBCONF_DEBUG`在运行 debhelper 命令的环境中设置为“开发人员”来进行调试。

但是，我认为更有用的解决方案是：您确实应该按照建议使用`debian/config`脚本`db_input`。是什么阻止了你？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-19T23:41:51.987

如果您将其更改为，您的 postinst 中的问题可能会得到解决

```
#!/bin/sh -e
. /usr/share/debconf/confmodule
db_version 2.0
db_beginblock
db_input high my_app/mysql_root_password || true
db_endblock
db_go 
```

看看我的旧[debian/postinst](http://chalaev.com/f/social/obsolete-postinst "Debian/postinst")文件包含有 db_input。它工作正常，但我更改了它，因为 lintian 不喜欢 postinst 中的 db_input，并告诉我将其移动到 debian/config。

# python - python中的re方法来追加字符串

> ID：10139397
> 
> 赞同：-1
> 
> 时间：2012-04-13T10:47:11.110
> 
> 标签：python

在下面的字符串中，正则表达式将匹配这两个条件，

```
aa="192.168.251.135,henry,thesecond,0"
aa1="192.168.254.35,henry,0"
#The below regular expression would satisfy bot aa and aa1
re.findall(r"(\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b),((?:\w+,\w+|\w+)),(\d+)",aa) 
```

我的问题是在字符串中`ab="192.168.251.135,henry,thesecond,"`如果整数最后不存在，是否可以通过扩展上述 re.findall() 在输出中附加 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:56:29.733

你的问题令人困惑。如果我的理解是正确的，即使字符串不以数字结尾，您也想匹配字符串。这只是意味着您需要更改正则表达式，以便最后一个数字匹配的重复次数为 0 次或更多次，而不是 1 次或更多次

```
>>> re.findall(r"(\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b),((?:\w+,\w+|\w+)),(\d*)",ab)
[('192.168.251.135', 'henry,thesecond', '')]
>>> 
```

有趣的是，您可以在没有正则表达式的情况下轻松做到这一点

```
>>> if not ab.rpartition(",")[-1].isdigit():
    ab+='1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:57:54.793

使用`str.isdigit()`.

```
if not aa[-1].isdigit():
    aa += '1' 
```

# mysql - 建议一个 MySQL 查询

> ID：10139401
> 
> 赞同：0
> 
> 时间：2012-04-13T10:47:18.757
> 
> 标签：mysql, sql

我有一个包含 3 个字段的表。

```
ID    Name     ParentID     Active
1     A        0            1
2     B        0            1
3     C        2            1 
```

现在，我想要一个查询，如果存在`ParentID`> 0 且处于活动状态的行，则跳过其父 id (2) 的行。

请建议一个 MySQL 查询来实现这一点。

谢谢你，胡拉姆

编辑：谢谢大家，终于解决并标记了正确的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:07:52.763

这应该工作：

```
select * from test where id not in ( select parent_id from test where parent_id > 0 and active = 1 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:57:41.867

也许是这样的：

```
SELECT * FROM Table1 WHERE (NOT ParentID > 0 AND Active=1) OR Active=0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T11:01:34.140

我不确定这个问题是否很清楚。您的意思是读取其 ID 不在其行处于活动状态的父列中的所有行吗？如果是这样：

```
SELECT * FROM mytable
WHERE id NOT IN (
    SELECT ParentID FROM mytable WHERE Active = 1
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T11:01:55.417

```
SELECT t1.*
FROM tbl t1
LEFT JOIN tbl t2
    ON t1.ID = t2.ParentID
    AND t2.Active = 1
WHERE t2.id IS NULL 
```

# maven - 更改 cxf-codegen-plugin 的执行目录

> ID：10139402
> 
> 赞同：2
> 
> 时间：2012-04-13T10:47:20.037
> 
> 标签：maven, cxf

我正在构建一些工具来（自动）将大型 ANT 项目转换为 Maven 结构。该项目包含网络服务。因此，我无法更改输入的 wsdl / xsd 文件。这是我的输入 wsdl 文件。它包含对来自项目基目录的类型定义的引用。

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://schemas.test.com/test" name="Test">
    <wsdl:import namespace="http://schemas.test.com/test" location="./src/wsdl/Test.xsd"/>
    <wsdl:types>
    </wsdl:types>
</wsdl:definitions> 
```

这是我的 Maven 插件配置：

```
<plugin>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-codegen-plugin</artifactId>
    <executions>                    
        <execution>                        
            <id>generate-sources</id>
            <phase>generate-sources</phase>
            <goals>
                <goal>wsdl2java</goal>
            </goals>                        
            <configuration>                           
                <sourceRoot>${project.build.directory}/generated-sources/cxf</sourceRoot>
                <wsdlRoot>${project.build.directory}/../src/wsdl/</wsdlRoot>
                <includes>
                    <include>**/*.wsdl</include>
                </includes>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

构建子模块工作正常，因为 cfx-codegen-plugin 似乎将 ${project.basedir} 作为执行根目录。

但是，当我尝试构建完整的多模块项目时，cfx-codegen-plugin 似乎恢复为 project.parent.basedir。我收到以下构建错误：

原因：WSDLException（在 /wsdl:definitions/wsdl:import）：faultCode=PARSER_ERROR：解析“./src/wsdl/Test.xsd”时出现问题。：java.io.FileNotFoundException：C:\Users\test\Desktop\ multimod\src\wsdl\Test.xsd（系统找不到指定的路径）

有谁知道如何：

1.  在特定的 Maven 阶段更改插件的执行根目录？
2.  还是强制 cfx-codegen-plugin 使用替代执行根？

谢谢，sjaak

# c++ - 在 C++ 中使用 Matlab 函数（用于矩阵搜索）

> ID：10139407
> 
> 赞同：1
> 
> 时间：2012-04-13T10:47:40.780
> 
> 标签：c++, matlab, matrix

我想要做的是在更大的二维矩阵中搜索二维矩阵。为此，我找到了 Boyer-Moore 算法的 2d 版本。但是在 matlab 中使用矩阵总是更容易，所以我想知道是否可以在 C++ 编译器中调用 matlab 函数。

我认为这里的人知道如何在matlab中做到这一点。
[http://www.mathworks.com/matlabcentral/newsreader/view_thread/247971](http://www.mathworks.com/matlabcentral/newsreader/view_thread/247971)

有没有为此目的而存在的图书馆或其他东西？它至少包含上面链接中给出的程序使用的功能。

PS：如果有人可以为这个搜索问题提供解决方案，请做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:59:08.897

[这是您在Matlab 文档](http://www.mathworks.co.uk/help/techdoc/matlab_external/f38569.html)中寻找的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:02:48.260

我不知道这方面的任何库，您可能会更幸运地检查 matlab 网站，看看他们是否出售开发库。

至于解决方案，这个问题在概念上似乎与在字符串中查找子字符串的问题非常相似。我在简单搜索时发现[了这个](https://stackoverflow.com/a/1556747/1277769)，我相信它会有所帮助。

至于基本解决方案，可以这样：

您想在`p x q`矩阵中找到一个子`n x m`矩阵。

```
 for each row (up to row n - p):
      search each column (up to column m - q)
        if value in matrix equals first value check the rest of the submatrix
          if submatrix found, exit or store solution and keep looking for more 
```

# c# - C# 跨类枚举可见性 - 可能吗？

> ID：10139414
> 
> 赞同：1
> 
> 时间：2012-04-13T10:48:22.357
> 
> 标签：c#, class, enums

所以我有一个包含枚举MyEnum的类ClassA和一个引用该类（不同项目）的类ClassB，所以在ClassB中我有一个

```
using ClassA; 
```

子句，我可以使用类似的东西访问该枚举

```
MyEnum value = MyEnum.EnumValue; 
```

现在在第三个项目中，我有我的 Windows 表单，它有一个像

```
using ClassB; 
```

现在我可以在 ClassB 中添加什么来访问我的 windows 窗体上的枚举？它甚至可能吗？我想避免仅仅为了访问枚举而将 ClassA 添加到我的表单中。

这个想法是 ClassB 是我的表单和 ClassA 中的功能之间的一种管理器 - 但我想访问该枚举，因为它使许多任务更容易

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T10:50:36.317

在这种情况下，合乎逻辑的事情是使枚举独立于`ClassA`并使其公开，以便它在您的整个解决方案中可用。

## 编辑

阅读评论后，如果您真的想避免更改`ClassA`，可以尝试创建第二个枚举并将一个值转换为另一个值。例如，在扩展方法中：

```
public enum EnumB
{
    // make it equivalent to enum in ClassA
}

public static EnumB ToEnumB(this EnumA enumAValue) 
{
    EnumB newValue = (EnumB)(int)enumAValue;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T10:50:48.457

> 我想避免仅仅为了访问枚举而将 ClassA 添加到我的表单中

你不能。如果它是在所在的程序集中*定义的，则**必须*引用该程序集。`ClassA`

 *如果您不是在谈论存在于不同程序集中的类，则可以将枚举放在自己的文件中并将其声明为`public`- 这将允许从代码中的任何位置访问它（这是枚举的正常做法）。

* * *

更新：

您可以创建一个包含共享对象的附加项目，例如公共枚举和接口，并在您的其他项目中引用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T11:01:02.553

`Using`子句只是避免每次需要引用其中定义的元素时编写命名空间（或在本例中为类）的快捷方式。

如果你不喜欢写作

```
ClassA.MyEnum.. 
```

你必须写

```
using ClassA;
.....
 My Enum.... 
```

这是从表单访问 ClassA.MyEnum 的方式。
无论如何，如果你不喜欢这个解决方案，你不能在另一个地方重新定义 Enum。
您可以创建另一个名为 ClassB.MyEnum 的枚举，然后将 ClassB.MyEnum 的任何值映射到 ClassA.MyEnum。这是该解决方法的示例，我不知道它是否有用。

```
public class ClassB
 {
  public enum MyEnum
    {
     MyValue1,
     MyValue2
     }

   public static MyEnum Convert (ClassA.MyEnum originalValue)
    {
     return (MyEnum)Enum.Parse (typeof (MyEnum), originalValue.ToString());
    }
 } 
```

我建议将 MyEnum 移到 ClassA 之外。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T17:32:27.227

前几天我都对你投了赞成票，因为你的所有评论都帮助我找到了适合我的情况的最佳解决方案。

我最终遵循的解决方案是重构所有内容，以便我设法将需要枚举（或其他任何内容）的所有代码从 ClassA 获取到 ClassB 中，并让 ClassB 通过事件向我的主项目报告操作结果，以便我可以使用结果更新 UI。

我认为这最终是解决这个问题的最佳方法*

# html - 验证网站

> ID：10139418
> 
> 赞同：0
> 
> 时间：2012-04-13T10:48:42.450
> 
> 标签：html, validation, web, cross-browser

我被分配了验证网站的任务。我在网上搜索并找到了 w3schools 的[这篇](http://www.w3schools.com/web/web_validate.asp)文章，它允许验证网站的 HTML、CSS、XHTML、XML、WML。

我的问题是，这就是我们需要做的所有验证吗？我们希望我们的网站能够跨浏览器并在手机上运行良好。

有没有更好的方法来验证我们的网站？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T10:52:27.600

首先，[w3schools 是一个糟糕的网站](http://w3fools.com/)；你最好不要将它用于任何事情。对于标记验证器，试试[this](//validator.w3.org)或[this](//validator.nu)。请记住，验证仅确保您的标记在语法上是正确的，并且在一定程度上在语义上是正确的，但不能确保它在不同的浏览器中呈现或运行您的意图。为此，您必须自己进行测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T10:55:31.417

如果您被告知的只是您需要“验证”该网站，那么您得到的指示非常糟糕，因为它远未达到所需的完整程度。

你应该验证HTML吗？HTML 和 CSS 中的一切都可以完美无缺，但网站在不同的浏览器中可能仍无法以相同的方式运行。HTML/CSS 的解释不同并不一定表明某些东西是“无效的”。

如果可以的话，获得更好（或更精确）的说明。否则，弥补它们，提供你的结果，如果它不是预期的，一旦你有更精确的指示，就收取正常的咨询费以再次做事。

如果您只是在进行 HTML/CSS 验证，那么[w3.org](http://validator.w3.org/)上的验证器就是您应该使用的验证器。[Firefox](https://addons.mozilla.org/en-US/firefox/addon/html-validator/)和[Chrome](https://chrome.google.com/webstore/detail/cgndfbhngibokieehnjhbjkkhbfmhojo)也有验证器插件。

如果您的目标是在多个浏览器中进行等效渲染，那么唯一的解决方案是在对您很重要的浏览器中测试您的站点。请记住，不同版本的浏览器也算作不同的浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T10:53:10.870

拥有 W3 有效结构/标记并不意味着您的网站在每个浏览器上看起来都一样。有很多工具和插件可以模拟不同的分辨率或移动设备，但这些通常都做得不好。

找出答案的唯一真正方法是让人们在他们的设备上进行测试。

# cell - 无效的单元格坐标phpExcel

> ID：10139420
> 
> 赞同：1
> 
> 时间：2012-04-13T10:48:49.660
> 
> 标签：cell, phpexcel, coordinate

我已经测试过，如果使用 vlookup 在自我表中搜索“=vlookup(h2, A2:B2000, 2, False)”并从其他表返回值“=SupplierList!A2”和“=vlookup(SupplierList!H3, A2 :B2000, 2, False)" 也可以。

那么为什么只有 "=vlookup(h3, SupplierList!A2:B2000, 2, False)" 会出错呢？

- - - - - - - - - - - - - - 错误信息 - - - - - - - - - - - ----------

`Fatal error: Uncaught exception 'Exception' with message 'PO!G2 -> Invalid cell coordinate A' in C:\Program Files\EasyPHP-5.3.6.0\www\ExcelImporter\Classes\PHPExcel\Cell.php:288 Stack trace: #0 C:\Program Files\EasyPHP-5.3.6.0\www\ExcelImporter\Classes\PHPExcel\Cell.php(204): PHPExcel_Cell->getCalculatedValue() #1 C:\Program Files\EasyPHP-5.3.6.0\www\ExcelImporter\Documentation\Examples\index.php(36): PHPExcel_Cell->getFormattedValue() #2 {main} thrown in C:\Program Files\EasyPHP-5.3.6.0\www\ExcelImporter\Classes\PHPExcel\Cell.php on line 288`

- - - - - - - - - - - - - - 错误信息 - - - - - - - - - - - ----------

单元格是这样的公式 `**=IF(ISERROR(VLOOKUP(H2349,'Supplier List'!A:B,2,FALSE)),"-",VLOOKUP(H2349,'Supplier List'!A:B,2,FALSE))**`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:32:54.493

太长了，不想评论了……

调试计算错误时，我使用以下内容：

```
function testFormula($sheet,$cell) {
    $formulaValue = $sheet->getCell($cell)->getValue();
    echo '<b>'.$cell.' Value is </b>'.$formulaValue."<br />\n";
    $expectedValue = $sheet->getCell($cell)->getOldCalculatedValue();
    echo '<b>'.$cell.' Expected Value is </b>'.((!is_null($expectedValue)) ? $expectedValue : 'UNKNOWN')."<br />\n";

    $calculate = false;
    try {
        $tokens = PHPExcel_Calculation::getInstance()->parseFormula($formulaValue,$sheet->getCell($cell));
        echo '<b>Parser Stack :-</b><pre>';
        print_r($tokens);
        echo '</pre>';
        $calculate = true;
    } catch (Exception $e) {
        echo "PARSER ERROR: ".$e->getMessage()."<br />\n";

        echo '<b>Parser Stack :-</b><pre>';
        print_r($tokens);
        echo '</pre>';
    }

    if ($calculate) {
        try {
            $cellValue = $sheet->getCell($cell)->getCalculatedValue();
            echo '<b>'.$cell.' Calculated Value is </b>'.$cellValue."<br />\n";

            echo '<h3>Evaluation Log:</h3><pre>';
            print_r(PHPExcel_Calculation::getInstance()->debugLog);
            echo '</pre>';
        } catch (Exception $e) {
            echo "CALCULATION ENGINE ERROR: ".$e->getMessage()."<br />\n";

            echo '<h3>Evaluation Log:</h3><pre>';
            print_r(PHPExcel_Calculation::getInstance()->debugLog);
            echo '</pre>';
        }
    }
}

$sheet = $objPHPExcel->getActiveSheet();
PHPExcel_Calculation::getInstance()->writeDebugLog = true;

testFormula($sheet,'A4'); 
```

这提供了计算引擎正在执行的所有操作的相当详细的日志，从而可以确定问题的原因。

如果您只是想在保存文件时禁用单元格值计算，那么您可以在实例化 yor writer 之后，但在发出 save 命令之前发出以下命令：

```
$objWriter->setPreCalculateFormulas(FALSE); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-03T16:43:09.047

para resolver esse problema "无效的单元格坐标" $this->caracteres = array( ' ', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H '、'I'、'J'、'K'、'L'、'M'、'N'、'O'、'P'、'Q'、'R'、'S'、'T'、 'U'、'V'、'X'、'Y'、'W'、'Z'、'AA'、'AB'、'AC'、'AD'、'AE'、'AF'、'AG '，'AH'，'AI'，'AJ'，'AK'，'AL'，'AM'，'AN'，'AO'，'AP'，'AQ'，'AR'，'AS'， 'AT'、'AU'、'AV'、'AX'、'AY'、'AW'、'AZ'）；

adicione mais caracteres，'AA'，'AB'，'AC'，'AD'，'AE'，'AF'，'AG'，'AH'，'AI'，'AJ'，'AK'，'AL '，'AM'，'AN'，'AO'，'AP'，'AQ'，'AR'，'AS'，'AT'，'AU'，'AV'，'AX'，'AY'， 'AW', 'AZ'); ……

英文解决这个问题“无效单元格坐标”$ this-> characters = array('', 'A', 'B', 'C', 'D', 'E', 'F', 'G', ' H'、'I'、'J'、'K'、'L'、'M'、'N'、'O'、'P'、'Q'、'R'、'S'、'T' , 'U', 'V', 'X', 'Y', 'W', 'Z' 'AA', 'AB', 'AC', 'AD', 'AE', 'AF', 'AG '、'AH'、'AI'、'AJ'、'AK'、'AL'、'AM'、'AN'、'AO'、'AP'、'AQ'、'AR'、'AS'、' AT'、'AU'、'AV'、'AX'、'AY'、'AW'、'AZ');

添加更多字符，'AA'，'AB'，'AC'，'AD'，'AE'，'AF'，'AG'，'AH'，'AI'，'AJ'，'AK'，'AL '、'AM'、'AN'、'AO'、'AP'、'AQ'、'AR'、'AS'、'AT'、'AU'、'AV'、'AX'、'AY'、' AW', 'AZ'); ……

# mysql - MySQL 和 PhpMyAdmin config.inc.php MAMP 上的密码问题

> ID：10139422
> 
> 赞同：1
> 
> 时间：2012-04-13T10:48:56.443
> 
> 标签：mysql, passwords, phpmyadmin, config, mamp

这是一个非常奇怪的问题，类似于 MAMP 中一直存在的一些其他人的问题。我最近升级到 MAMP2 并按照新 phpMyAdmin 的说明进行操作，它可以工作一段时间，但最近每当我尝试连接到 MySQL 时，我总是会收到此错误：

```
 Error: Could not connect to MySQL server!
 /Applications/MAMP/Library/bin/mysqlcheck: Got error: 1045: Access denied for user 'root'@'localhost' (using password: YES) when trying to connect 
```

因此，我将密码更改为正确的密码，并按照该论坛主题的建议更改了所有文件：http: [//forum.mamp.info/viewtopic.php?f=](http://forum.mamp.info/viewtopic.php?f=2&t=11974) 2&t=11974 。

但它根本没有用。我意识到我的 Mac 上有两个 phpMyAdmin 文件夹，其中一个位于

```
 /Applications/MAMP/Library/bin/phpMyAdmin 
```

另一个在

```
 Library/Application Support/appsolute/MAMP PRO/phpMyAdmin 
```

在第一个文件夹中，config.inc.php 作为用户的正确凭证，但第二个文件夹作为用户名和密码的 root。显然我试图改变它但无济于事，该文件总是以某种方式恢复为默认凭据。

有人遇到过这个问题吗？有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:46:54.373

我忘了更新这个，如果有人有兴趣我得到了这个修复（我知道很多人有类似的问题）。在 mamp.pro.global.preferences.plist 中列出了编码的 MySQLRootPassword，如果你像我一样更新了你的 MAMP 并用你的旧密码覆盖了这个密码字段，那么它就可以工作了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-25T07:54:00.923

phpMyAdmin 配置存储未完全配置，部分扩展功能已停用。找出为什么。或者转到任何数据库的“操作”选项卡进行设置。

# java - 从 Android 中的字符串数组的列表视图中获取相同的值问题

> ID：10139423
> 
> 赞同：1
> 
> 时间：2012-04-13T10:49:02.467
> 
> 标签：java, android

***当我从列表视图中的两个或多个字符串数组中获取值时我遇到问题我使用不同的按钮在列表视图中仅获得第一个字符串数组单击列表值来自数组第列表没有在列表中获得不同的值***

//这是我使用switch case的代码

```
import android.app.ListActivity;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class CategoriesList extends ListActivity {
    ListView listView;
    private String[] name1;
    private static int[] name = { R.array.NewArrivals, R.array.Sarees,
            R.array.SalwarKameez, R.array.Lahenga, R.array.Kurti,
            R.array.Jewelry, R.array.Accessories, R.array.ReadyToShip };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.itemlist);

        listView = (ListView) findViewById(android.R.id.list);
        displayList();
    }

    public void displayList() {
        // TODO Auto-generated method stub
        for (int i = 1; i <= name.length; i++) 
        {
                name1 = getResources().getStringArray(name[i]);
                ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, name1);
                setListAdapter(adapter);
                adapter.setNotifyOnChange(true);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:56:24.390

为什么要在下一次迭代中覆盖您在一次迭代中设置的adatper？您将所有适配器设置为同一个列表项，这意味着只有最后一个设置将具有视觉效果（所有其他设置都将被覆盖）。

也许您需要针对不同情况更改列表项的 ID？

`switch`由于您现在已经编写了代码，因此您不需要`for`像这样重写代码：

```
String [] name1;
for (int i = 0; i <= name.length; i++) {
    name1 = getResources().getStringArray(name[i]);
    ArrayAdapter<String> adapter =
       new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, name1);
    setListAdapter(adapter);
    adapter.setNotifyOnChange(true);
} 
```

不过，我想这又不是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:00:12.183

函数`displayList()`总是最终设置列表适配器以显示来自`R.array.ReadyToShip`. 这不是你想要的吗？

# c# - 我应该为具有事件处理程序的用户控件实现 Dispose 吗？

> ID：10139424
> 
> 赞同：0
> 
> 时间：2012-04-13T10:49:02.763
> 
> 标签：c#, custom-controls, dispose

我有一个自定义控件 CustomContainer，其中包含另一系列自定义控件 (CustomButtons)。

所以控件CustomContainer有5个CustomButtons。

每个 CustomButtons 都有和 Click 事件处理程序，它们连接在 CustomContainer 的构造函数中。

我是否需要为 Control CustomContainer 编写重写 Dispose（因为它从 UserControl 继承，所以有一个 Dispose）来取消连接这些 CustomButtons 事件处理程序？标准处理是否足够，或者我会在这里有内存泄漏？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T15:34:41.173

在*大多数*涉及控制事件的情况下，可以放弃事件而不进行处理，也不会遇到麻烦，因为事件发布者和订阅者通常会同时超出范围。在某些方面，这是不幸的，因为如果事件清理被认为是正确性所必需的，那么可能会有语言支持，并且任何写得体面的代码都会理所当然地清理事件。

问题是任何阻止被废弃事件发布者被垃圾收集的东西也会阻止它的任何订阅者被垃圾收集。如果这些订阅者发布了他们自己的任何事件，那么他们的所有订阅者也将不必要地免受垃圾收集等的影响。例如，假设一个人有一个运行良好的程序，但是一个人添加了一个事件来让表单知道当打开或关闭另一个表单时，每个表单都可以有一个“Windows”菜单列出其他打开的表单。不错的功能。但是，如果在未取消订阅提供此类通知的事件的情况下处置表单，则此类失败可能会阻止表单或其任何控件或这些事物所引用的任何其他对象被收集。严重的内存泄漏，

我的建议是使用表单的`Disposed`事件来处理事件清理。可以更改`Dispose`设计器生成的代码，而设计器可能会不理会这些更改，但鉴于`Disposed`事件存在，我认为避免对设计器生成的文件进行任何修补会更干净。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:52:15.553

不，您不需要*仅为*您拥有的事件处理程序取消订阅而实施`IDisposable`和实施。您拥有的事件处理程序的存在（根据帖子，按钮单击）不会导致内存泄漏。`Dispose()`

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T10:57:13.010

IDisposable 用于清理非托管资源。所有托管资源都由垃圾收集器清理。当没有更多对 object 的引用时，下次 GC 运行时，它将释放应用程序无法访问的所有内容。*

# jquery - jQuery-Mobile Meteor 示例集成和/或集成指南

> ID：10139425
> 
> 赞同：15
> 
> 时间：2012-04-13T10:49:13.560
> 
> 标签：jquery, jquery-mobile, integration, sample, meteor

Meteor 给我留下了深刻的印象，并希望将它与 jQuery-Mobile 一起使用。我想知道是否有人已经构建了示例集成应用程序。如果没有，一些指导方针会很棒。

问候，

塞德里克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T20:42:02.000

我也想知道这个，所以我做了一个示例应用程序：

[http://jqmdemo.meteor.com/](http://jqmdemo.meteor.com/)

它似乎运作良好。你可以在这里找到源代码：

[https://github.com/snez/jqm-meteor](https://github.com/snez/jqm-meteor)

两者一起使用时有一些陷阱，请参阅代码中的注释。

**更新**：看起来meteor.com 正在滚动升级meteor 框架，破坏那里的旧代码。仅将此项目用作参考，因为有更好的方法可以使用较新的框架版本来做同样的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T14:02:34.030

当我尝试将框架文件捆绑在客户端目录中时，最初无法让 jQuery Mobile 工作。Meteor 在尝试设置 DOCTYPE 的 JS 文件上抛出错误，甚至是示例文件夹中从未引用过的文件。通过使用 CDN 托管的版本并禁用上面评论中提到的 autoInitializePage，我让它工作而无需访问任何未记录的 API。

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
<script type="text/javascript">
     $( document ).bind( "mobileinit", function( event, data ){
          $.mobile.autoInitializePage = false;
     });    
</script> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T15:49:11.717

我建议查看`/packages/jquery`文件夹中的 jQuery 包。

所有这一切都是将 jquery.js 文件添加到文件堆栈中以发送到客户端。如果您在此之后，您可以添加自己的名为 jquery-mobile 的包并包含它需要的文件。

查看 package.js 文件了解它的工作原理：

```
https://github.com/meteor/meteor/blob/master/packages/jquery/package.js 
```

因此，只需将移动文件添加到您的 jquery-mobile 包中，然后执行以下操作：

```
Package.on_use(function (api) {
  api.add_files('jquery.mobile-1.1.0.min.css', 'client');
  api.add_files('jquery.mobile-1.1.0.min.js', 'client');
}); 
```

# php - 从 MySQL 存储过程返回值

> ID：10139433
> 
> 赞同：0
> 
> 时间：2012-04-13T10:49:50.467
> 
> 标签：php, mysql

我已经创建了一个存储过程并且它运行良好，我现在想要的是存储过程中只有一个返回预期值的 SQL 语句，我可以添加多个 SQL 语句，这将产生多个 vlues。请告诉我。

这是我的存储过程

```
DELIMITER //
CREATE PROCEDURE amazonall(IN client_ids INT(11))
BEGIN
SELECT SUM(total_inserted) into ti from log_amazon_import  where client_id = client_ids and date_format(created_date,'%Y-%m-%d') between DATE_SUB(CURDATE(),INTERVAL 1 WEEK) and CURDATE();
END //
DELIMITER ; 
```

并且请让我知道如何访问这些返回值，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:25:32.117

是的你可以。如果您想返回多条记录 - 只需返回数据集。

*   填充（临时）表并在之后阅读它们。
*   只需运行 SELECT 语句（不带 INTO）并读取应用程序中的数据集，我知道 mysqli 扩展允许它（函数：[more_results](http://php.net/manual/ru/mysqli.more-results.php)，[next_result](http://www.php.net/manual/ru/mysqli.next-result.php)，...）。

# c++ - 构建 Poco C++ 库的静态版本

> ID：10139435
> 
> 赞同：15
> 
> 时间：2012-04-13T10:50:05.290
> 
> 标签：c++, poco-libraries

任何人都可以指导我们如何构建 Poco C++ 库的静态版本吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-13T11:05:29.973

假设您使用自动工具来构建 Poco，请使用`./configure`标志`--static`运行。

```
$ ./configure --static 
```

查看`./configure --help`完整的标志列表。

# objective-c - ios开发内存管理中的怪事

> ID：10139438
> 
> 赞同：1
> 
> 时间：2012-04-13T10:50:13.200
> 
> 标签：objective-c, ios, cocoa

我的 ipod 中有一个应用程序。

1.打开app，查看内存Instruments（Activity monitor），8.95M

2.点击一个按钮，它会在屏幕上添加一个大图的UIImageView，现在内存是17.8M。

3.从屏幕上移除UIImageView，稍等一下，现在内存是9.09M。

我确信 UIImageView 在从屏幕上移除后会被释放。这是非常简单的代码。所以当它被删除时，应用程序的状态应该与添加 UIImageView 添加到屏幕之前一样，对吗？但是为什么内存是9.09M而不是8.95M呢？如果在屏幕上添加更复杂的 View，区别就更明显了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:29:48.967

这个是正常的。这是由于“延迟增长，延迟收缩”算法。这意味着您拥有一个可以针对少量项目或大量项目调整大小的数据结构。少量项目的大小调整使用非常少的内存，但在处理大量项目时效率不高。大数字的大小对于管理大量事物的集合非常有效，但会使用更多内存来索引对象。

“惰性增长，惰性收缩”算法试图避免调整结构索引大小的成本，方法是仅在索引太小时才增加索引，而在索引太大时才收缩它。例如，一个典型的算法可能仅在其理想大小至少是其理想大小的三倍时才会增大索引，而仅当它超过其理想大小的三倍时才可能缩小它。如果应用程序快速分配和释放资源集合，这也是防止大量调整大小操作所必需的——您希望索引大小有点“粘性”。

当您打开大对象并使用 GUI 对象时，您会使索引变得太小，并且它会增长。但是当你关闭大对象时，你只会让索引有点太大，所以它不会缩小。

如果设备受到内存压力，索引将缩小。如果应用程序继续减少其对 UI 资源的使用，则索引将缩小。如果应用程序使用更多的 UI 资源，则索引不需要很快再次增长。

一个很好的类比可能是你桌上的一摞纸。如果您可能需要查找 30 篇论文，则可以将它们分成 4 叠。但是如果你有 5,000 篇论文，4 叠就会使搜索变得乏味。在这种情况下，您将需要更多的堆栈。因此，当论文的数量对于 4 叠来说太大时，您需要重新索引到更多的叠中。但是当数量变小时，你不会费心不断地重新索引，直到你有太多的堆栈，因为搜索仍然很快。

当你处理完所有这些文件后，你的办公桌就会多出几叠。这样可以避免它在下次需要处理大量论文时重新编制索引。

# c++ - 如何创建无铬窗口？

> ID：10139439
> 
> 赞同：1
> 
> 时间：2012-04-13T10:50:15.227
> 
> 标签：c++, windows, user32

目前我通过像这样的命令创建窗口

```
 hWnd = CreateWindow(szWindowClass, szTitle,
                      WS_EX_TRANSPARENT, CW_USEDEFAULT, 0,
                      CW_USEDEFAULT, 0, NULL, NULL, hInstance, NULL); 
```

或者这应该通过一些东西 `wcex.style`而不是我的电流 来定义`wcex.style = CS_HREDRAW | CS_VREDRAW;`？

更新：问题：我下载了适用于 Windows 的[chromeembeded](http://code.google.com/p/chromiumembedded/downloads/detail?name=cef_preview_3.1082.566_windows.zip&can=2&q=)，我尝试摆脱窗口 chrome 和边框，但我所做的往往看起来像这样：

![在此处输入图像描述](../Images/57c7b8fdeab20dd2a6879691d001c5c5.png)

我想知道如何使用 CreateWindow 创建无镶边窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:58:25.843

如果您没有在 WS_EX_TRANSPARENT 样式旁边指定任何其他样式，例如 WS_OVERLAPPED 或 WS_BORDER，那么它应该被创建为没有任何边框或标题。

# jquery - 使用悬停更改 DIV 颜色并单击 JQuery

> ID：10139444
> 
> 赞同：3
> 
> 时间：2012-04-13T10:50:37.363
> 
> 标签：jquery, colors, load, click, hover

有人可以帮忙吗。我有这两个：

我希望文本在悬停时变为浅绿色，不悬停时变为白色，单击时变为红色。

```
$(".music").hover(
    function() {
        $(this).css('color','lightgreen');
    }, 
    function() {
        $(this).css('color', 'white');
    }
);

$(".music").click(function () { 
    $('#result').load('album_list_index.php');
    $(this).css({ 'color': 'red', 'font-size': '100%' });
}); 
```

先感谢您

交流电

注意：好的，对不起，我没有说清楚。

我需要 div 在没有鼠标悬停时是白色的 我需要它在鼠标悬停时是 gree 我需要它在单击时是红色的，并且在单击另一个按钮之前保持红色。

感谢大家的投入，特别是添加类和删除类案例，这是一个很好的课程，一旦我掌握了更多的技术，我就会使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T11:02:36.720

> 问题是当我单击该项目时它变成红色但然后它恢复为白色并且我将鼠标悬停在它上面

如果您希望`click`保持状态，则最好使用类。尝试这个：

```
a { color: white; }
.active { color: red; }
.hover { color: lightgreen; } 
```

```
$(".music").hover(
    function() {
        $(this).addClass("hover");
    }, 
    function() {
        $(this).removeClass("hover");
    }
);

$(".music").click(function () { 
    $('#result').load('album_list_index.php');
    $(".music").removeClass("active");
    $(this).removeClass("hover").addClass("active");
}); 
```

[**示例小提琴**](http://jsfiddle.net/cCAJh/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T10:52:49.347

您可以使用 CSS 伪元素：`:hover`和`:active`.

或者，当使用 jQuery 时，使用`.hover()`and`.click()`方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T10:54:35.430

只需将您的代码包装在 a 中`$(document).ready(function() { // code here });`即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T10:56:10.213

推荐使用 CSS ......但仍然可以使用 jquery

```
 $(document).ready(function(){
        $(".music").mouseover(function() {
           if(!$(this).hasClass('dontchange')){
              $(this).css('color','lightgreen');
           }
        });
        $(".music").mouseout(function() {
               if(!$(this).hasClass('dontchange')){
                $(this).css('color', 'white');
             }
        }

        $(".music").click(function () { 
         $(this).addClass('dontchange');
        $('#result').load('album_list_index.php');
        $(this).css({ 'color': 'red', 'font-size': '100%' });
        });
        }); 
```

# html - 停止在代码的特定部分应用 CSS 样式

> ID：10139447
> 
> 赞同：4
> 
> 时间：2012-04-13T10:51:02.887
> 
> 标签：html, css, coldfusion

这个问题可能听起来有点奇怪/新手/愚蠢。请多多包涵。

下面的代码是我使用 CSS、HTML 和 Coldfusion 创建的网页的一小部分。

```
 <head>
    ---------------------Part 1--------------------------------------
    <CFIF CompareNoCase('#aid#', 0)>   
                <cfinclude template="show.cfm">
        <cfabort>
    </CFIF>
    -----------------------------------------------------------------

    <link rel="stylesheet" href="styles/style.css?1322665623">
        </head>
---------------------------PART 2------------------------------------
<body id="wp-home">
<div id="wrapper">
  <div class="header left">
    <h1><a href="index.cfm" class="right logo">Name Of Client</a></h1>
    <div class="tagline">
      <span class="left blair"><a href="index.cfm" class="homelink">home</a></span>
      <span class="headerline"></span>
      <span class="right blair"><a href="index.cfm" class="homelink">antiques</a></span>
    </div>
  </div>
 -------------------------------------------------------------------- 
```

如您所见，我包含了一个 css 文件 style.css，其中包含正确显示第 2 部分所需的所有样式类。

问题是，只要第 1 部分处于活动状态（为真），相同的 css 也会应用于文件 SHOW.CFM 中的元素。这完全打乱了页面的原始显示。

目前，我在链接下方放置了一个标签，以停止处理页面和加载 css 文件。

我已经多次检查 show.css 并且可以确认其中没有使用来自 styles.css 的类。

因此，我的问题是我是否可以停止 style.css 中的样式应用于从 SHOW.CFM 加载的元素

如果这个问题非常愚蠢，请原谅我；）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T10:55:34.133

如果选择器匹配，**则将**应用规则，直到被级联更下方的规则（设置相同的属性）覆盖。

您可以更改选择器以阻止它们匹配您不希望它们匹配的元素，或者您可以覆盖该部分中的所有规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T10:56:35.267

HTML5 允许[范围样式表](http://dev.w3.org/html5/markup/style.html#style.attrs.scoped)，但目前只有 Firefox[支持它](http://caniuse.com/#feat=style-scoped)。还有一个[polyfill JavaScript](https://github.com/thingsinjars/jQuery-Scoped-CSS-plugin)。

因此，您必须调整您的标记和样式，使其仅匹配第 2 部分，而不是第 1 部分。在紧要关头，您可以在每个选择器前面加上`#wrapper`. 例如，如果规则说 ，则将其`a{color:red}`替换为`#wrapper a {color:red;}`。

顺便说一句，part1 可能应该是 in`<body>`而不是的孩子`<head>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-19T19:46:38.197

使用伪类[`:not()`](https://developer.mozilla.org/en-US/docs/Web/CSS/:not)：

```
.myStyle:not(.classWhereYouDontWantToApplyTheStyle) {
   ...
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-13T11:01:49.490

使用 if else 而不是 if 来确定应该包含哪个 css 文件怎么样？换句话说，仅在第 2 部分显示时才包含 styles.css。这样，您就可以完全避免继承和范围问题。

# html - 除了对编码人员（即：对用户、对 SEO 等）之外，语义 HTML 是否有任何好处？

> ID：10139454
> 
> 赞同：0
> 
> 时间：2012-04-13T10:51:48.613
> 
> 标签：html, semantics

我还没有完全理解语义 HTML 的概念。

除了可读性/标签含义/干净的代码之外，语义 HTML 有什么好处？我已经阅读了[使用语义 HTML 的好处是什么？](https://stackoverflow.com/questions/1729447/what-are-the-benefits-of-using-semantic-html)，但我没有找到任何答案表明它对除编码员/设计师之外的任何人有用。

我听说语义 HTML 对 SEO 也很有用，是真的吗？另外，对用户或浏览器有什么好处吗？

对不起，我的英语不是我的母语...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:56:06.910

> 除了可读性/标签含义/干净的代码

对你来说还不够好吗？这些本身就是巨大的好处。

使用语义网，您可以编写理解*语义*、数据片段*含义的软件。*

这样，您可以从搜索中获得更好的结果（是的，更好的 SEO）、更相关的信息以及更好的信息组织方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T13:49:02.207

可访问性！！就像盲人一样，他们使用软件来阅读网页和导航。良好的语义是可访问性的一部分，对他们有很好的帮助！

加上所有提到的东西：搜索引擎优化，干净的代码......这也很有趣:)

# javascript - 用javascript修改svg图像的描边和填充

> ID：10139460
> 
> 赞同：30
> 
> 时间：2012-04-13T10:52:11.017
> 
> 标签：javascript, html, svg

我正在尝试修改 .svg 图像的描边和填充。我已经从[是否可以使用 JavaScript 操作嵌入在 HTML 文档中的 SVG 文档中获得一些信息？](https://stackoverflow.com/questions/138309/is-it-possible-to-manipulate-an-svg-document-embedded-in-an-html-doc-with-javasc).

我使用javascript来操作它，标题中的javascript：

```
function svgMod(){
    var s = document.getElementById("svg_img");
    s.setAttribute("stroke","0000FF");
} 
```

的HTML：

```
...
<body onload="svgMod();">
<img id="svg_img" src="image.svg">  
... 
```

任何帮助表示赞赏！

编辑：1 我认为这里的主要问题是*如何将 svg 图像显示为 svg 元素*，一个实际的图像，而不是像 .png 或 .jpeg 这样的结尾，使用 .svg 的结尾，以及如何填充和描边然后可以操纵它！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-13T13:15:53.767

如果您使用 img 标签，那么出于安全原因，您将无法访问图像数据的 DOM。就容器而言，图像实际上与动画位图相同。

使用`<iframe>`or`<object>`标记将允许您操作嵌入对象的 DOM。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-13T10:59:29.420

我之前已经回答过类似的问题，将此片段保存为 html 文件。

```
<svg id="svg1" xmlns="http://www.w3.org/2000/svg" style="width: 3.5in; height: 1in">
<circle id="circle1" r="30" cx="34" cy="34" style="fill: red; stroke: blue; stroke-width: 2"/>
</svg>
<button onclick=circle1.style.fill="yellow";>Click to change to yellow</button> 
```

编辑：为了证明这个功能可以在头部设置，这里是一个修改版本：

```
<html>
  <head>
  <script>
    function svgMod(){ 
      var circle1 = document.getElementById("circle1"); 
      circle1.style.fill="blue";
    } 
  </script>
  </head>
  <body>
  <svg id="svg1" xmlns="http://www.w3.org/2000/svg" style="width: 3.5in; height: 1in">
  <circle id="circle1" r="30" cx="34" cy="34" style="fill: red; stroke: blue; stroke-width: 2"/>
  </svg>
  <button onclick=circle1.style.fill="yellow";>Click to change to yellow</button>
  <button onclick=jacascript:svgMod();>Click to change to blue</button>
  </body>

</html> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T11:01:38.553

我认为您将需要修改单个元素的笔画，而不仅仅是 svg 元素本身。svg 将由节点树组成，这些节点具有笔画属性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-14T14:33:25.647

我不确定这是否已经解决。我遇到过类似的情况，最好的方法是将 svg 文件放在`<bject>`标签中并更改笔触属性而不是填充属性。

```
svgItem.style.stroke="lime"; 
```

您也可以参考以下部分：在此[链接中更改 SVG 的 CSS 属性](http://tutorials.jenkov.com/svg/scripting.html)

我已经对此进行了测试，并且可以更改笔画属性。请参考这个[截图](https://ibin.co/35M78Z6Ex0p1.png)，下面是对我有用的示例代码。

```
window.onload=function() {
	// Get the Object by ID
	var a = document.getElementById("svgObject");
	// Get the SVG document inside the Object tag
	var svgDoc = a.contentDocument;
	// Get one of the SVG items by ID;
	var svgItem = svgDoc.getElementById("pin1");
	// Set the colour to something else
	svgItem.style.stroke ="lime";
};
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T17:43:23.750

这是一个**简单**的示例，演示了使用 javascript 修改 SVG HTML 对象的属性：

```
<html>
  <body>
    <svg>
      <rect id="A1" x="10" y="10" width="25" height="25" fill="red" />
    </svg>
  </body>

  <script>
    alert("Acknowledge to modify object color.");
    var object = document.getElementById("A1");
    object.setAttribute("fill", "green");
  </script>
</html> 
```

# php - 谷歌搜索客户在 PHP 中输 入的关键字

> ID：10139463
> 
> 赞同：0
> 
> 时间：2012-04-13T10:52:23.277
> 
> 标签：php, web-crawler, google-search

我有一个用户界面，客户可以在其中输入关键字的组合（产品的关键字描述）。使用这些关键词，我想在我的网站上使用 google 获得结果。简而言之，我使用谷歌搜索我网站的产品结果。在 UI 中，当用户在搜索文本输入框中输入关键字时，我想显示前三个链接。任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:00:26.140

[http://www.google.com/enterprise/search/products_gss.html](http://www.google.com/enterprise/search/products_gss.html)

听起来您需要 Google Site Search。

# c - 读取文件并使用管道将其发送到父进程的程序

> ID：10139470
> 
> 赞同：2
> 
> 时间：2012-04-13T10:52:35.113
> 
> 标签：c, linux, pipe

我需要编写一个程序来创建从命令行到子进程的管道发送文件名。在孩子中读取该文件并使用管道将其发送回。父进程应该打印文件。如果子进程发生错误，则必须将错误发送到父进程。

这是我的代码，它会沿文件文件打印一些垃圾（并且当我运行它时它会禁用终端模拟器中的滚动）。

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

void main(int argc, char *argv[]) {
   int pipefd[2];
   char buff[100];
   int childpid;
   int size;
   FILE *file;

   if (argc != 2) {
      printf("usage:\n%s <filename>\n", argv[0]);
      exit(1);
   }
   if (pipe(pipefd) < 0) {
       perror("can't open pipe\n");
   }
   if ((childpid = fork()) == 0) {
      sleep(1);
      size = read(pipefd[0], buff, sizeof(buff));
      file = fopen(buff, "r");
      if (file == NULL) {
         write(pipefd[1], "Can't open file", 15);
         exit(1);
      }
      while (!feof(file)) {
         if (fgets(buff, sizeof(buff), file) == NULL) {
            write(pipefd[1], "Error reading file", 18);
         } else {
            write(pipefd[1], buff, sizeof(buff));
         }
      }
   } else if (childpid > 0) {
      size = strlen(argv[1]);
      if (write(pipefd[1], argv[1], size) != size) {
         perror("Error writing to pipe\n");
      }
      wait(NULL);
      while ((size = read(pipefd[0], buff, sizeof(buff))) > 0) {
         write(1, buff, size);
      }
   }
   exit(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:05:57.527

如果返回的字节数少于该字节数，则无法写入`sizeof(buf)`有意义的字节。`fgets`其余的将充满垃圾。

此外，将面向字符串`fgets`与二进制混合`read/write`是一种不好的风格。使用`read`或`fread`读取文件。它们返回读取的字节数，将此数字用作`write`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T12:24:38.940

经过多次更改后，您的程序按预期工作。让我们列出所有需要更改的内容以及原因 -

**I）** 在孩子和父母中，一旦你完成它们，就关闭各自的管道。从手册[页](http://linux.die.net/man/3/read)，`read(3)`

> 如果某个进程打开了管道进行写入并且 O_NONBLOCK 已清除，则 read() 将阻塞调用线程，直到写入一些数据或管道被打开管道进行写入的所有进程关闭。

因此，在工作管道结束的任何地方都在代码中执行类似的操作，

```
 size = read(pipefd[0], buff, sizeof(buff));
  close(pipefd[0]);

  write(pipefd[1], buff, strlen(buff));
  close(pipefd[1]);

  if (write(pipefd[1], argv[1], size) != size) {
     perror("Error writing to pipe\n");
  }
  close(pipefd[1]);

  while ((size = read(pipefd[0], buff, sizeof(buff))) > 0) 
  {
     write(1, buff, size);
  }
  close(pipefd[0]); 
```

**您还没有关闭子管道的写入端，而您的父母在`read`**

**II）**您正在使用类似`while(fgets(...))`循环中的内容从文件中读取数据。**当文件中有换行符并`fgets`多次返回时，这将爆炸，`buffer`在此过程中覆盖每次**

我总是使用简单`fgetc`和`feof`组合来读取文件。因此，将您的文件读取机制更改为类似

```
unsigned count=0;
while (!feof(file) && count < sizeof(buff))
    buff[count++]=fgetc(file);
if (feof(file)) 
    buff[--count]=0;
else
    buff[sizeof(buff)-1]=0; 
```

**III）**在从孩子写入文件数据时，**您应该使用`strlen`**（因为我们已经确保缓冲区为空终止，见上文）**，而不是`sizeof`因为缓冲区可能根本没有满，**您最终会写垃圾。所以，改变

```
 write(pipefd[1], buff, sizeof(buff)); 
```

到

```
 write(pipefd[1], buff, strlen(buff)); 
```

**IV)**`exit`在孩子和家长的工作完成后，跟随他们的保险箱。就像是

```
close(pipefd[1]);
_exit(EXIT_SUCCESS);   // in child 
```

和

```
close(pipefd[0]);
exit(EXIT_SUCCESS); // in parent 
```

**PS**：我已经更改了文件读取逻辑，因此您的编译器错误现在消失了，请遵循**nm**给出的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T11:02:46.643

此代码无法编译：

```
 while (fgets(buff, sizeof(buff), file) != NULL) {
        write(pipefd[1], "Error reading file", 18);
     } else {
        write(pipefd[1], buff, sizeof(buff));
     } 
```

你不能在`else`那里有一个子句。

# mysql - 使用 REGEX 的 Mysql 选择查询

> ID：10139471
> 
> 赞同：2
> 
> 时间：2012-04-13T10:52:41.990
> 
> 标签：mysql, regex

我正在使用像这样的正则表达式 im mysql

```
select * from table1 where
table1.name
REGEXP '[[:<:]]1.1[[:>:]]' 
```

查询显示结果，其名称字段的值也为 1.1.1。像这样

```
pk  name
5   1.1
6   1.1.1 
```

但我只需要匹配 1.1

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:58:52.570

```
select * from table1 where
table1.name
REGEXP '^1.1$' 
```

确保 only`1.1`是允许的（但也`1X1`或`111`因为点匹配任何字符 - 如果要匹配文字点，请使用`^1\.1$`）。

当然，现在有一个问题，您为什么要使用正则表达式，因为它只是您要匹配的文字字符串，而不是变量模式。

您的正则表达式失败，因为您使用了在字母数字字符和非字母数字字符（或字符串的开头/结尾）之间匹配的单词开头/结尾锚点，并且由于and`[[:>:]]`之间的匹配，正则表达式至少部分匹配。`1``.``1.1.1`

# c - DMA 上下文中的缓存一致性问题

> ID：10139472
> 
> 赞同：4
> 
> 时间：2012-04-13T10:52:43.613
> 
> 标签：c, linux, memory, memory-management, cache-control

假设 CPU 修改了位置 x+50 中的值并且不将其刷新回主存（回写）。

同时，设备从 x 到 x+100 发起 DMA 读取请求。

在那种情况下，如何通知 CPU 刷新脏缓存行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:32:15.410

DMA 电路通常直接与主存储器一起工作，而不涉及 CPU（这是主要思想，将 CPU 从硬件其他地方可以完成的 I/O 中解放出来，从而节省 CPU 周期）。因此，您可能确实会遇到[缓存一致性问题](http://en.wikipedia.org/wiki/Direct_memory_access#Cache_coherency)。Microsoft 建议[在使用 DMA 时刷新 I/O 缓冲区](http://msdn.microsoft.com/en-us/library/windows/hardware/ff545924%28v=vs.85%29.aspx)。

但有些系统确实支持 CPU 和 DMA 电路之间的高速缓存一致性协议，就像多处理器系统中的 CPU 之间一样。最终答案取决于实际的硬件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:40:47.650

我能想到的方法有以下三种：

1.  内存被标记为不可缓存，
2.  DMA控制器与缓存控制器协调，
3.  操作系统保证这永远不会发生，例如通过确保进程的 CPU 部分没有运行。

这取决于硬件和操作系统的功能。

确保进程没有运行在多任务操作系统上并不太奇怪，因为进程拥有的内存上的 DMA 可能是由进程执行系统调用（例如写入）触发的。该进程可以取消调度，并运行其他进程，直到 DMA 完成。

等待 I/O 设备完成可能会受到太多限制，因此 DMA 控制器可能正在从进程地址空间复制到辅助缓冲区。

因此，如果您遇到这种情况，请概述示例以及您运行的测试。

# linux - 使用命令行/终端下载研究论文

> ID：10139473
> 
> 赞同：4
> 
> 时间：2012-04-13T10:52:46.757
> 
> 标签：linux, download, terminal, wget

有什么方法可以使用命令行下载研究论文。我无法从家里访问，但我可以登录到我部门的服务器，该服务器位于 Intranet 中。所以，理想情况下我应该能够做到，但我不知道如何获得 pdf 的直接链接，然后*wget*或者我们可以在远程服务器中*curl*或*lynx*纸质网页并进行模式匹配或手动搜索链接。

可能有人已经这样做了。示例论文： http: [//www.nature.com/nprot/journal/v7/n3/full/nprot.2012.016.html](http://www.nature.com/nprot/journal/v7/n3/full/nprot.2012.016.html)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T21:23:01.797

似乎一些发布者阻止了 Wget 用户代理。您可以使用[--user-agent 选项](http://www.delorie.com/gnu/docs/wget/wget_9.html)更改此设置。例如

```
wget --user-agent TryToStopMeFromUsingWgetNow publisher.com/paper.pdf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:02:02.707

据我所知，这篇文章仅供订阅者使用，只有经过身份验证的用户才能访问它。

理想情况下，您应该能够在访问后获得该 URL，但这并不意味着您将能够获得`wget`它。对不起，我不能更好地使用，但我没有自然订阅。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T18:17:07.093

我有同样的问题。我尝试了类似的东西（对于您的示例链接）

wget [http://www.nature.com/nprot/journal/v7/n3/pdf/nprot.2012.016.pdf](http://www.nature.com/nprot/journal/v7/n3/pdf/nprot.2012.016.pdf)

它对我有用。

# c# - DependencyProperties：PropertyChangedCallBack 只调用一次

> ID：10139475
> 
> 赞同：3
> 
> 时间：2012-04-13T10:52:49.033
> 
> 标签：c#, silverlight, events, windows-phone-7, data-binding

我创建了一个从 派生的控件，`Canvas`它应该绘制一个实时图表，给定通过绑定传递到 DependencyProperty 的值。简化版是这样的：

```
public class Plotter : Canvas
{
    public float Value { get { return (float)GetValue(ValueProperty); } set { SetValue(ValueProperty, value); } }

    public static readonly DependencyProperty ValueProperty =
        DependencyProperty.Register("Value", typeof(float), typeof(Plotter),
        new PropertyMetadata(0f, new PropertyChangedCallback(ValueChangedCallBack)));

    public static void ValueChangedCallBack(DependencyObject property, DependencyPropertyChangedEventArgs args)
    {
        Plotter plotter = (Plotter)property;
        plotter.Value = (float)args.NewValue; //<-- Removed this line to get it to work

        // Actually draw the value into the canvas geometry
        plotter.PlotValue(plotter.Value);
    }
} 
```

我像这样绑定控件：

```
<mystuff:Plotter Value="{Binding MyViewModelProperty}" Height="50" Width="200" /> 
```

我的 ViewModel 正确实现`INotifyPropertyChanged`和调用`PropertyChanged`。如果我绑定`MyViewModelProperty`到文本框，它每次都会正确更新。只有当我将它绑定到我自己的控件时，我`ValueChangedCallBack`才会在页面加载时被调用一次，然后再也不被调用。

我在这里没有看到什么？谢谢你的帮助！

**已解决：**我不必`Value`在回调中显式设置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T11:01:48.480

您在回调上设置属性值以更改属性值。无论如何，这没有多大意义。但是，本地设置的值是否会覆盖绑定值，导致您的绑定不再在依赖属性上设置？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:55:56.253

您需要将绑定的模式设置为双向吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T10:58:25.867

您不应该使用 DependencyProperty.Register 而不是 DependencyProperty.RegisterAttached 吗？

# java - 从文件中检索单词的正则表达式

> ID：10139477
> 
> 赞同：0
> 
> 时间：2012-04-13T10:52:58.147
> 
> 标签：java, split

我有一组文件特别是目录。

从目录中的所有文件（文本文件）中检索内容后，我有一个字符串列表。

每个字符串元素代表从每个文件中检索到的内容。所以列表中的第一个 String 元素代表第一个文件的内容。

现在我想拆分字符串以获取单词。（稍后将单词存储到字符串数组中）1）单词可以用单个空格/多个空格分隔。2) 句子以“.”结尾，所以可以在“.”之后开始一个新词。3) 新词可以在 '\n' 之后开始

那么任何人都可以建议一个适合 split() 方法的正则表达式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T10:58:17.127

也许该[`StringTokenizer`](http://docs.oracle.com/javase/6/docs/api/java/util/StringTokenizer.html)课程更适合您的需要。构造函数采用要标记的字符串和分隔符列表（在您的情况下：空格、. 和换行符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:19:11.593

```
String[] result = myString.split("[\\.\\s]"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T10:58:05.330

您可能不需要正则表达式，只需从文件中删除每个非字母字符，然后使用 Tokenizer 读取每个单词。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-13T11:03:54.440

我建议为此使用标记……只需遍历每个字符并根据字符是什么来决定要做什么。这是伪代码

```
string word = "";

while ( EOF ){

    char = getNextChar()

    if ( char not space or full-stop ){
        append the char to the word
    }
    else {
        if ( the word is empty ){ continue /* ignore multi space */ }
        else {
            add the word to an array of words
            reset the word to ""
        }
    }
} 
```

这样，您可以完全控制处理数据的方式 - 您不必担心包含在正则表达式规则中的疯狂场景。最重要的是，这是最有效的方式（def 比 regex 更好），并且您只需通过数据一次。

# php - 从 geoio.com 查找位置，然后根据用户所在的国家/地区执行操作

> ID：10139480
> 
> 赞同：0
> 
> 时间：2012-04-13T10:53:01.420
> 
> 标签：php, mysql

好的，我正在使用 geoio.com 查找用户位置，我根据这段代码返回了大量信息

```
<?php $_SESSION['geo'] = file_get_contents("http://api.geoio.com/q.php?key=********=geoip&d=comma&q=" . getenv('REMOTE_ADDR') . ""); ?> 
```

上面的设置是会话变量

Chesterfield,Derbyshire,United Kingdom,Greenfrog Computing Ltd Managed Broadband Adsl Ass,53.2500,-1.4167,GB)

所以我想做的就是如果该会话变量包含 United States ，将用户重定向到另一个名为 /us/ 的 URL

我如何“找到”美国的一点并采取行动。

非常感谢任何帮助！（注意我编辑了 API 密钥）

干杯

富有的 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:58:52.967

使用[strpos()](http://php.net/manual/en/function.strpos.php)如果找不到字符串则返回`false`，如果找到则返回索引。

```
if(strpos($_SESSION['geo'], 'United States') !== false)
{
    header('Location: /us/');
    exit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:14:05.730

试试这个：

假设您的会话变量是位置。

```
<?php
$_SESSION['location'] = 'Chesterfield,Derbyshire,`United States`,Greenfrog Computing Ltd Managed Broadband Adsl Ass,53.2500,-1.4167,GB';

$tmp = explode( ',', $_SESSION['location'] );

$string_to_search = 'United States'
$key = array_search( $string_to_search, $tmp );

if($key !== false) {
     // go to `us` folder
}
?> 
```

希望能帮助到你。

# email - 如何在 Blackberry 中通过电子邮件附加多个图像？

> ID：10139482
> 
> 赞同：0
> 
> 时间：2012-04-13T10:53:12.433
> 
> 标签：email, blackberry

我想在 BB 中附加多个带有电子邮件的图像。我怎样才能做到这一点？有没有人有想法？请帮助我。下面是我的代码，当我只用电子邮件发送一张图片时，它可以正常工作。那么我应该在我的代码中进行哪些修改以附加多个图像。

```
 public static void SendMailAttachment(Bitmap screenshot)
            {            

              String htmlContent = "String" ;     
                  try 
                  {
                       Multipart mp = new Multipart();
                       Message msg = new Message();
                       Address[] addresses = {new Address("","")};

                   for (int i = 0; i<2 ; i++)
                     {
                            PNGEncodedImage img = PNGEncodedImage.encode(screenshot);
                            SupportedAttachmentPart pt = new SupportedAttachmentPart(mp, img.getMIMEType(),
                            "Weed.png", img.getData());
                            mp.addBodyPart(pt);

                      }
                            msg.setContent(mp);
                            msg.setContent(htmlContent);

                       msg.addRecipients(RecipientType.TO, addresses);
                       msg.setSubject("Subject");          
                       Invoke.invokeApplication(Invoke.APP_TYPE_MESSAGES, new MessageArguments(msg));

                  }
                  catch (AddressException ex) 
                  {
                      System.out.println("Exception -->"+ex.getMessage()); 
                  } 
                  catch (MessagingException ex) 
                  {
                      System.out.println("Exception -->"+ex.getMessage()); 
                  }

        } 
```

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:36:18.183

以下代码可用于附加多个图像或文件。

```
public void upload()
    {     
        Multipart mp = new Multipart();
    String fileName = null;

    for (int i = 0; i<2 ; i++)
    {

        //          Dialog.alert(image.);
        byte[] stream = readStream("file:///SDCard/IMG00001-20110404-1119.JPEG");
        SupportedAttachmentPart sap = new SupportedAttachmentPart(mp, MIMETypeAssociations.getMIMEType("IMG00001-20110404-1119.JPEG"),"IMG00001-20110404-1119.JPEG", stream);
        mp.addBodyPart(sap);

    }

    TextBodyPart tbp = new TextBodyPart(mp,"test bodyString");
    mp.addBodyPart(tbp);

    Folder folders[] = Session.getDefaultInstance().getStore().list(Folder.SENT);
    Message message = new Message(folders[0]);
    Address[] toAdds = new Address[1];

    try {
        toAdds[0] = new Address("testmailid", null);
        message.addRecipients(Message.RecipientType.TO,toAdds);
        //          message.setFrom(new InternetAddress(_from)); 

        //          message.addRecipients(Message.RecipientType.FROM,toAdds);
        message.setContent(mp);
        message.setSubject("test subject");
        Transport.send(message);

        Dialog.alert("message send successfully.");

    } catch (AddressException e) {
        // TODO Auto-generated catch block
        //          e.printStackTrace();
        Dialog.alert(e.getMessage());

    } catch (MessagingException e) {
        // TODO Auto-generated catch block
        //          e.printStackTrace();
        Dialog.alert(e.getMessage());
    }
}

private byte[] readStream(String path) 
{

InputStream in = null;
    FileConnection fc = null;
byte[] bytes = null;

try
{
    fc = (FileConnection) Connector.open(path);
    if (fc !=null && fc.exists()) 
    {
        in = fc.openInputStream();
        if (in !=null)
        {
            bytes = IOUtilities.streamToBytes(in);
        }
    }
}
catch(IOException e) 
{

}
finally
{
    try
    {
        if (in != null) 
        {
            in.close();
        }
    }
    catch(IOException e)
    {                
    }
    try
    {
        if (fc !=null)
        {
            fc.close();
        }
    }
    catch(IOException e)
    {                
    }

}       
return bytes; 
```

}

我用过这段代码。它工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:24:48.973

只需为每个图像创建一个新`SupportedAttachmentPart`图像，然后使用该方法将它们添加到消息中`addBodyPart`。

使用正文部分和附件部分填充多部分后，调用`msg.setContent(mp)`.

# php - Doctrine 中的命名查询

> ID：10139484
> 
> 赞同：0
> 
> 时间：2012-04-13T10:53:33.183
> 
> 标签：php, doctrine-orm

学说是否支持命名查询？如何像在 JPA 中那样在实体类中编写命名查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:10:37.057

您可以在 *Table 类的构造函数中定义命名查询，而不是实体类：

```
$this->addNamedQuery('name', 'query or Doctrine_Query object'); 
```

执行这个查询：

```
Doctrine_Core::getTable('Something')
  ->createNamedQuery('name')
  ->execute(array('params')); 
```

官方文档有更深入的例子：[http ://readthedocs.org/docs/doctrine/en/latest/en/manual/dql-doctrine-query-language.html#named-queries](http://readthedocs.org/docs/doctrine/en/latest/en/manual/dql-doctrine-query-language.html#named-queries)

# php - 如何从代码点火器库中调用火花库

> ID：10139486
> 
> 赞同：1
> 
> 时间：2012-04-13T10:53:37.227
> 
> 标签：php, codeigniter

我在 CodeIgniter 中开发了一个库，并想调用 curl sparks 库中存在的函数。如何从我的库中调用该函数？

我努力了

```
$this->load->spark('curl/2.1.2');
$this->curl->simple_get('url'); 
```

似乎没有工作。

我也试过

```
$CI =& get_instance();
$CI->load->spark('curl/1.2.1');
$this->curl->simple_get('url'); 
```

这似乎也不起作用。您能否就我如何实现这一目标提出建议？

我使用 curl sparks 库[http://getsparks.org/packages/curl/versions/HEAD/show](http://getsparks.org/packages/curl/versions/HEAD/show)

**编辑：**这个问题与[Codeigniter 无关：使用 RESTful 服务](https://stackoverflow.com/questions/18115849/codeigniter-consume-restful-service)，因为这主要涉及如何从独立的 Code Igniter 库中调用 Spark 库上的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:41:43.777

我自己想通了。我们必须如下使用它

```
$this->CI->load->spark('library');
$this->CI->library->function(); 
```

这可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T14:20:31.800

在 autoload.php 中，添加

```
$autoload['sparks'] = array('library/version'); 
```

# html - GWT HTML Widget XSS 安全性

> ID：10139491
> 
> 赞同：2
> 
> 时间：2012-04-13T10:54:12.530
> 
> 标签：html, security, gwt, xss

可能是一个愚蠢的问题（很可能），但根据官方开发人员文档，GWT 的 HTML 小部件不是 XSS 安全的，嵌入自定义 HTML/脚本文本时必须小心。

所以我想我的问题是，为什么会这样：

```
HTML testLabel = new HTML("dada<script type='text/javascript'>document.write('<b>Hello World</b>');</script>"); 
```

不显示 javascript 弹出窗口？如果不知何故，GWT 的 HTML 小部件确实可以防止 XSS 攻击，那么在什么类型的情况下它不会（所以我可以知道会发生什么）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:13:19.310

我不特别了解这个小部件，但总的来说，值得知道 XSS 向量*有很多不同*的风格。只有一小部分人实际使用该`script`标签。

一个非常重要的因素是它们取决于位置。例如，在任何标记之外是 xss 安全的字符串，在标记的属性值内或在 javascript 块内的定界字符串内可能不安全。

它们也可能依赖于浏览器，因为文档解析模型中存在许多利用“错误”。

要了解可被滥用以产生恶意 javascript 注入的各种不同向量，请参阅这两个[备忘](http://html5sec.org/) [单](http://ha.ckers.org/xss.html)

我还建议您阅读 [owasp 的预防备忘单](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T11:47:08.677

GWT 文档包含一些关于安全性的[文章（包括使用](https://developers.google.com/web-toolkit/doc/latest/DevGuideSecurity)[SafeHtml](https://developers.google.com/web-toolkit/doc/latest/DevGuideSecuritySafeHtml)处理 XSS ）。

您的示例不起作用，因为通过定义的脚本`innerHTML`不会在 Chrome/Firefox 中执行（我认为 IE 使用`defer`属性有一些解决方法）。

但是你不应该依赖这个浏览器限制。所以最好使用 SafeHtml 并始终验证用户的输入。

# c# - SQLCLR 中的验证功能及其性能

> ID：10139494
> 
> 赞同：0
> 
> 时间：2012-04-13T10:54:26.397
> 
> 标签：c#, .net, sql-server-2008-r2, sqlclr

插入新行后，我必须验证表中的所有数据行。

**DETAILS**：插入到表中的每一行都应该通过一组验证规则，这些规则可能会根据行内的数据而有所不同。用 c# 编写时，它看起来像一个小型应用程序。因此，我没有将其编写为单独的应用程序，而是计划将其编写为 SQLCLR，以便轻松调用这些 SQLCLR 编写的验证规则。

这是我第一次使用/探索 SQLCLR，所以我担心性能是否会因此而下降。我正在做类似将 c# 应用程序转换为 SQLCLR 应用程序的事情。

请就上述场景的 sqlClr 性能向我提出建议。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:15:17.003

如果没有任何具体示例说明需要对数据进行哪些验证，这是一个非常笼统的问题，因此很难给出比笼统的建议更多的内容。至此，这里有一些关于 SQLCLR（或 SQL Server 中的 CLR 功能）与 T-SQL 的一般信息：

*   绝对*不*正确的是，直接 T-SQL*总是*比 CLR 例程更快地执行相同的操作。T-SQL 是一种数据语言，不一定最适合进行字符串操作或它具有的其他功能。我就这个问题发表了关于简单谈话的相当详细的分析： [http ://www.simple-talk.com/sql/t-sql-programming/clr-performance-testing/](http://www.simple-talk.com/sql/t-sql-programming/clr-performance-testing/)

*   数据只能通过 SQL 进行检索或操作，因此如果您不打算在直接 T-SQL 中进行不那么快甚至不可能的计算，那么仅将 SELECT 或 DML 语句包装在 .Net 语言中并没有真正的好处. SQLCLR 例程仍然需要打开数据库连接才能与数据库对象（表、视图等）交互，即使您使用 context_connection，如果代码在 SqlCommand 中只执行直接 T-SQL，那么*这*是 SQLCLR 的糟糕设计/使用。

*   SQLCLR 不应被视为 T-SQL 的替代品。需要将其作为一种工具来处理，该工具可以在某些地方为您提供帮助，这些地方的操作在 T-SQL 中效率较低或什至不可能。有时可以通过使用 sp_OACreate 等来扩展功能，但这有其自身的问题。我发现最好有一个中间地带，其中某些算法在 T-SQL 中不容易或不可能或有效地通过您调用的用户定义函数和存储过程从 .Net 公开到 T-SQL T-SQL 代码。我创建了一个函数和过程库来执行此操作，它称为 SQL# (SQLsharp)，它大部分是免费的，可以在以下位置找到：[http ://www.SQLsharp.com/](http://www.SQLsharp.com/)

考虑到所有这些，您的情况是：

> 插入新行后，我必须验证表中的所有数据行。
> ...
> 插入表中的每一行都应该通过一组验证规则，这些规则可能会根据行内的数据而有所不同。

听起来它最适合在表上使用常规 T-SQL INSERT、UPDATE 触发器，该触发器使用直接 T-SQL 和一些 SQLCLR 例程（取决于正在进行的特定验证）对“插入”表的组合。同样，根据您用于验证的特定算法，对于那些在 CLR 中做得更好的算法，您可能会通过将其中一些算法组合到单个 .Net 例程中来提高效率，从而降低调用外部常规。

当然，触发器是否最好取决于 INSERT 和 UPDATE 的频率、进行了多少验证，以及几年内表中将有多少行。如果 DML 频率非常高和/或有很多行，那么断开连接的方法可能会更好，但这不会改变关于如何实现验证算法的建议。如果验证将花费太长时间（您不想让 DML 操作等待太久并导致阻塞），那么您可以使用触发器将键值存储在单独的队列表中，而不是 SQL job 可以每隔几分钟处理一次并决定是否保留。

正如我在一开始所说的那样，验证示例可以就每个算法的最佳处理位置提供更好的建议，但希望这些信息能够为您提供做出更好决策所需的信息。

请记住，只有通过测试，您才能知道对于任何特定算法哪种方法更快！

# html - 如何将文本放在右侧

> ID：10139498
> 
> 赞同：1
> 
> 时间：2012-04-13T10:54:37.100
> 
> 标签：html, css, jsp

我想像在这个模型中一样将文本“även uppfinnare”放在右侧： ![在此处输入图像描述](../Images/e0f0d780da565acc288014870cfbe58f.png)

当这是动态数据的实际结果时，我可以显示除最右边的文本之外的所有内容： ![在此处输入图像描述](../Images/fb1b42f822618d46ebe2469acbfb992e.png)

执行此操作的 HTML 和 JSP 是：

```
 <div class="clear"></div>

    <div class="fl10"><h3>Sökande</h3></div>
        <% if(apc.hasSokande()) {
        if(sokandeList != null && sokandeList.size() > 0) { %>
        <% for(PersonInfo person : sokandeList) { %>
        <div class="data-box">
            <table border="0">
    <tr><td colspan=3><strong>  <% if (person.getNamn() != null) { %>
                <%= person.getNamn() %>&nbsp;
            <% } %> </strong></td></tr>
        <tr><td></td><td>Telefon</td><td><%= person.getTelefon() %></td></tr>
        <tr><td></td><td>Fax</td><td><%= person.getFax() %></td></tr>
        <tr><td></td><td>E-post</td><td><%= person.getEpost() %></td></tr>
        <tr><td><%= person.getLandKod() %></td><td>Referens</td><td></td></tr>
        </table>    
    </div>  
</div>
    <div class="clear"></div>
    <div class="fl10"></div>

        <% } %>
    <% } %>
    <% } else { %>
        <%= apc.getNyregPerson().getNamn() %>
    <% } %>

        </div> 
```

你能告诉我如何实现右边的文字吗？我尝试使用 div 和 float:right 但它没有用。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:59:17.887

您可以像这样使用绝对定位。

```
<span style='position:absolute; top:10px; right:0px;'>även uppfinnare</span> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T11:42:52.847

使用`HTML` `div`标签会更适合这种设计。为列创建两个 div。

```
 <div id="personName">
      ......
   </div>
    <div id="otherDetails">
       .....
   </div>
   <br style="clear:both;"/> 
```

CSS：

```
 #personName {
    float:left;
    width:300px;
    background:#9c9;
 }
 #otherDetails {
    float:right;
    width:450px;
    background:#c9c;
 } 
```

检查：[示例](http://cssdesk.com/d64uy)

# java - 在 Apache tomcat7 中安装标签库时遇到问题

> ID：10139500
> 
> 赞同：5
> 
> 时间：2012-04-13T10:54:44.667
> 
> 标签：java, tomcat, servlets, jstl

我有应用程序，我想使用`jstl tag lib`.

我有两个罐子`JSTL.jar`和`standard.jar`. 我把两个都放在我的`WEB-INF/lib`文件夹里。

`web.xml`我像这样配置它

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
version="2.4">

    <taglib>
        <taglib-uri>http://java.sun.com/jstl/fmt</taglib-uri>
        <taglib-location>/WEB-INF/fmt.tld</taglib-location>
    </taglib>
    <taglib>
        <taglib-uri>http://java.sun.com/jstl/core</taglib-uri>
        <taglib-location>/WEB-INF/c.tld</taglib-location>
    </taglib>
    <taglib>
        <taglib-uri>http://java.sun.com/jstl/sql</taglib-uri>
        <taglib-location>/WEB-INF/sql.tld</taglib-location>
    </taglib>
    <taglib>
        <taglib-uri>http://java.sun.com/jstl/x</taglib-uri>
        <taglib-location>/WEB-INF/x.tld</taglib-location>
    </taglib>

    <servlet>
        <servlet-name>loadingServlet</servlet-name>
        <servlet-class>loadingServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>loadingServlet</servlet-name>
        <url-pattern>/loadingServlet</url-pattern>
    </servlet-mapping>

     <welcome-file-list>
                <welcome-file>homepage.jsp</welcome-file>
    </welcome-file-list>

</web-app> 
```

在页面上我使用以下代码

```
<%@taglib prefix="k" uri="http://java.sun.com/jsp/jstl/core" %> 
```

我仍然收到错误。像

```
 INFO: Deploying web application directory ServletExample
13 Apr, 2012 4:00:31 PM org.apache.tomcat.util.digester.Digester startElement
SEVERE: Begin event threw exception
java.lang.IllegalArgumentException: taglib definition not consistent with specification version
    at org.apache.catalina.startup.TaglibLocationRule.begin(WebRuleSet.java:1167)
    at org.apache.tomcat.util.digester.Digester.startElement(Digester.java:1282)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:501)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1359)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2747)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:510)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:807)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:107)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
    at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1543)
    at org.apache.catalina.startup.ContextConfig.parseWebXml(ContextConfig.java:1714)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1208)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:881)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:316)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5103)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:812)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:787)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:607)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1055)
    at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:978)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:472)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1322)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:379)
    at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:324)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1041)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:620)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:303)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:431)
13 Apr, 2012 4:00:31 PM org.apache.catalina.startup.ContextConfig parseWebXml
SEVERE: Parse error in application web.xml file at jndi:/localhost/ServletExample/WEB-INF/web.xml
java.lang.IllegalArgumentException: taglib definition not consistent with specification version
    at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2687)
    at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2713)
    at org.apache.tomcat.util.digester.Digester.startElement(Digester.java:1285)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:501)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1359)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2747)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:510)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:807)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:107)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
    at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1543)
    at org.apache.catalina.startup.ContextConfig.parseWebXml(ContextConfig.java:1714)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1208)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:881)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:316) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-13T12:13:58.740

你犯了几个错误：

*   您不应该在`web.xml`. 这是一个神话。
*   您应该使用与`web.xml`Tomcat 7 兼容的 Servlet 3.0。
*   您应该使用 JSTL 1.2，而不是 1.0。

将它们全部删除。`<taglib>`从中删除所有`web.xml`。从`/WEB-INF/lib`. 然后按照以下步骤操作：

1.  下载[jstl-1.2.jar](http://download.java.net/maven/1/jstl/jars/jstl-1.2.jar)并将其放入`/WEB-INF/lib`.
2.  修复你`web.xml`的 Servlet 3.0 兼容。

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <web-app 
        xmlns="http://java.sun.com/xml/ns/javaee"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
        version="3.0">

        <!-- Config here. No taglibs! -->

    </web-app> 
    ```

3.  使用[记录在案](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/tld-summary.html)的taglib 声明：

    ```
    <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %> 
    ```

### 也可以看看：

*   [我们的 JSTL 维基页面](https://stackoverflow.com/tags/jstl/info)

* * *

我隐约怀疑您将 Roseindia.net 用作 Java EE 资源。那里还提到了您的无效方法。你不应该那样做。您应该将该站点放入您的 Internet 黑名单中。这个网站充满了糟糕的答案和糟糕的做法。请改用 Oracle 的官方资源，当然也可以使用 Stackoverflow.com。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-07-30T12:47:26.407

如果您是少数必须支持旧代码的幸运者之一，那么`taglib`在您`web.xml`的代码中删除不是一种选择。你可以`<jsp-config>`像这样把它括起来：

```
<jsp-config>
  <taglib>
    <taglib-uri>/taglibs/custom-taglib</taglib-uri>
    <taglib-location>/WEB-INF/custom-taglib.tld</taglib-location>
  </taglib>
</jsp-config> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T11:06:01.893

您不再需要在 web.xml 中配置标记库。另外，您正在定义不同的 taglib url（iirc web.xml 是正确的）。

在 jsp 中使用 web.xml 中的 uris 并删除 web.xml taglib defs。

# c# - 使用 P/Invoke 时使用带参数的回调函数

> ID：10139501
> 
> 赞同：1
> 
> 时间：2012-04-13T10:54:52.553
> 
> 标签：c#, .net, pinvoke

我正在从我正在编写的 C# 包装器中调用外部 C 库。我正在调用的函数之一是注册回调函数。调用该函数时没有错误，`setCallback`但是稍后调用回调函数时会出现错误，遗憾的是 C 库未指定。

这是C方法（来自头文件）

```
DLLExport int setCallbacks(Client handle, void* context, connectionLost* cl,
messageArrived* ma, deliveryComplete* dc); 
```

这是我对该方法的 C# 声明

```
[DllImport("some.dll", CharSet = CharSet.Auto, ExactSpelling = false, 
CallingConvention = CallingConvention.Cdecl)]
private static extern int setCallbacks(IntPtr client, IntPtr context,
MulticastDelegate connectionLost, MulticastDelegate messageArrived, 
MulticastDelegate messageDelivered); 
```

这些是我的代表

```
private delegate int ConnectionLostDelegate(IntPtr context, [MarshalAs(UnmanagedType.LPStr)] String cause);
private delegate int MessageArrivedDelegate(IntPtr context, [MarshalAs(UnmanagedType.LPStr)] String title, Int32 titleLength, MessageObject message);
private delegate int MessageDeliveredDelegate(IntPtr context, int deliveryToken); 
```

这就是我调用该方法的方式

```
ConnectionLostDelegate conLost = new ConnectionLostDelegate(ConnectionLost);
MessageArrivedDelegate mesArr = new MessageArrivedDelegate(MessageArrived);
MessageDeliveredDelegate mesDel = new MessageDeliveredDelegate(MessageDelivered);

result = setCallbacks(client, IntPtr.Zero, conLost, mesArr, mesDel); 
```

这是其中一个回调使用的结构

```
[StructLayout(LayoutKind.Sequential)]
public class MessageObject
{
    [MarshalAsAttribute(UnmanagedType.ByValArray, SizeConst = 4, ArraySubType = UnmanagedType.U1)]
    public byte[] struct_id;
    Int32 struct_version;
    Int32 payloadlen;
    IntPtr payload;
    Int32 qos;
    Int32 retained;
    Int32 dup;
    Int32 msgid;

    public MessageObject()
    {
        struct_id = Encoding.ASCII.GetBytes("WXYZ");
        struct_version = 0;
        payload = IntPtr.Zero;
    }
} 
```

回调函数的 C 标头如下..

```
typedef int messageArrived(void* context, char* title, int titleLen, MessageObject* message);

typedef void deliveryComplete(void* context, int token);

typedef void connectionLost(void* context, char* cause); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:26:23.147

我在 p/invoke 方面没有很多经验，但看起来你应该更正代表的签名以返回 void，它在 c 中是无效的。并且还将 ref 用于指针参数，例如上下文和消息

# c# - 没有为一个或多个必需参数指定值。()

> ID：10139509
> 
> 赞同：0
> 
> 时间：2012-04-13T10:55:43.200
> 
> 标签：c#, ms-access

我有一个问题，当我登录时发生错误，即没有为一个或多个必需参数提供值。

```
protected void imgbtn_login_Click(object sender, ImageClickEventArgs e)
{
    int UserId = 0;
    string str = ("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=pathto.mdb;Persist Security Info=False;");
    OleDbConnection conn = new OleDbConnection(str);
    conn.Open();
    string query = "select * from Users where LoginName='" + txt_logname.Text + "' and Password='" + txt_pass.Text + "';";
    OleDbDataAdapter da=new OleDbDataAdapter(query,conn);
    DataSet ds = new DataSet();

    da.Fill(ds);
    DataTable dt = new DataTable();

    dt = ds.Tables[0];
    try
    {
        UserId = Int32.Parse(dt.Rows[0]["UserId"].ToString());

        //btn_LogIn.Text = "Login Succeded";
        Response.Redirect("Register.aspx");
    }
    catch (Exception ex)
    {

    }
    txt_logname.Text = " ";
    txt_pass.Text = "";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:02:11.020

密码是保留字。将其放在方括号中 [密码]

请参阅[INSERT INTO 语句中的语法错误](https://stackoverflow.com/questions/10137279/syntax-error-in-insert-into-statement/10137621#10137621)

# java - 将二进制数据插入 MySQL（没有 PreparedStatement）

> ID：10139521
> 
> 赞同：6
> 
> 时间：2012-04-13T10:56:20.697
> 
> 标签：java, mysql, jdbc

我试图在不使用准备好的语句的情况下将一些二进制数据插入 MySQL 数据库。这样做的原因是我将数千个语句连接到一个插入运行一次。（MySQL 转储和导入的具体工作方式）

我尝试了以下语句，但都失败了：

> INSERT INTO my_table VALUES (1,'g=���F|�}X���',2);
> 
> INSERT INTO my_table VALUES (1,CAST('g=���F|�}X���' AS BINARY),2);
> 
> 插入 my_table 值 (1,CONVERT('g=���F|�}X���', BINARY),2);
> 
> 插入 my_table 值 (1,BINARY 'g=���F|�}X���',2)

我得到的错误是：

> **com.mysql.jdbc.MysqlDataTruncation：数据截断：第 1 行的列“binary_data”的数据太长**

我用来执行语句的代码很简单：

> conn.createStatement().executeUpdate(sql);

PreparedStatements 工作正常（但在这种情况下太慢了）

数据库中的实际字符串 I 显示稍有不同：

> g=÷óF|¸}X£ì[
> 
> 二进制视图：67 3d 81 f7 19 f3 46 7c b8 7d 58 8c 10 a3 ec 5b
> 
> Java 字节：103、61、-127、-9、25、-13、70、124、-72、125、88、-116、16、-93、-20、91

这可能与编码有关吗？

非常感谢任何提示，Ro

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-23T15:10:19.390

找到了解决方案....虽然我在任何地方都没有看到记录.....

您可以通过写入转换为 HEX 并以 0x 开头的字节直接插入二进制数据

例如：

```
INSERT INTO my_table VALUES (1,0x19c0300dc90e7cedf64703ed8ae8683b,2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T11:20:22.087

您是否尝试过在批处理模式下使用 PreparedStatement？

```
 PreparedStatement pStmt = ...;
    while(...) { // use for or whatever loop
        pStmt.clearParameters();
        pStmt.setBinaryStream(2, ...);
        pStmt.addBatch();
    }
    pStmt.executeBatch(); 
```

有关如何使用 JDBC 和 MySQL 提高批处理效率的更多详细信息，请查看此处：[MySQL 和 JDBC with rewriteBatchedStatements=true](https://stackoverflow.com/questions/26307760/mysql-and-jdbc-with-rewritebatchedstatements-true)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T11:12:00.390

准备好的语句无疑是最快的方法。您发现它太慢的原因可能是因为您没有在事务中使用它。你也许可以用 base 64 做一些可爱的事情，但它会很慢。

# json - Kendo mobile中的数据绑定

> ID：10139527
> 
> 赞同：0
> 
> 时间：2012-04-13T10:56:32.727
> 
> 标签：json, data-binding, kendo-ui, kendo-mobile

我正在做一个剑道移动应用程序，我正在尝试从数据库中绑定数据以使用 json 调用列出。我尝试使用以下代码，但它不起作用请帮我解决这个问题......提前致谢......

我的代码在这里：

```
 $(document).ready(function () {

            var dataSource = new kendo.data.DataSource({
                transport: {
                    read: {
                        type: "POST",
                        url: "WebService/listing.php",
                        contentType: 'application/json; charset=utf-8',
                        datatype: "json"
                    }
                }
            });

            dataSource.bind("change", function () {
                $("#content").html(kendo.render(template, dataSource.view()));
            });

            dataSource.read();
            console.log(dataSource.view());

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:36:25.923

您可以尝试直接使用`change`dataSource 的功能：

```
var dataSource = new kendo.data.DataSource({
    transport: {
        read: {
            type: "POST",
            url: "WebService/listing.php",
            contentType: 'application/json; charset=utf-8',
            datatype: "json"
        }
    },
    change: function() {
        $("#content").html(kendo.render(template, this.view()));
    }
}); 
```

只是一些需要考虑的事情：

*   我假设你的 JSON 是正确的*   你确定你使用 POST 来获取数据*   您的模板定义正确*   您在`dataSource.read()`加载数据后调用（为确保您正在执行此操作，请先在`read()`内部调用`$(document).ready(function(){dataSource.read();});`并定义 dataSource 本身

    我想最后一点是最关键的；）

    这就是我所做的一切，所以如果它不能以这种方式工作，那么数据格式本身或模板定义中可能会出现一些错误。任何类似控制台错误的东西？

    干杯

# android - 从画廊到图像以字节为单位的图像.. 也以字节为单位的数据.. 用于在 android 中上传的 facebook

> ID：10139532
> 
> 赞同：3
> 
> 时间：2012-04-13T10:56:54.880
> 
> 标签：android

我得到了将图片和视频上传到 Facebook 的代码。但我不知道如何将图片从画廊转换为以字节为单位的图像。还有以字节为单位的数据。任何人都可以帮助我？？？？

```
*Upload picture,
 Bundle params = new Bundle();
 params.putByteArray("picture", <image in bytes>);
 params.putString("message", "Have fun");
 mAsyncRunner.request("me/photos", params, "POST", new SampleUploadListener());* 

this is code for upload images...   
*Upload video,
Bundle params = new Bundle();
param.putString("filename", <dataName>);
param.putByteArray("video", <data in bytes>);
 mAsyncRunner.request("me/videos", param, "POST", new SampleUploadListener());**

this is code for upload images...    
Any one know how code for my question please post..... 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:09:01.990

[从这里获取文件路径](https://stackoverflow.com/questions/2169649/open-an-image-in-androids-built-in-gallery-app-programmatically)

试试看 -

```
FileInputStream is = new FileInputStream(new File(filePath));
ByteArrayOutputStream bs = new ByteArrayOutputStream();
int data;

while((data != is.read()) != -1)
   bs.write(data);

is.close();
byte[] raw = bs.toByteArray();
bs.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:05:28.667

这是将位图转换为字节的一种方式：

```
public static byte[] bitmapToByteArray(Bitmap bitmap){
    ByteArrayOutputStream baos = new ByteArrayOutputStream(); 
    bitmap.compress(CompressFormat.PNG, 0, baos); 
    return baos.toByteArray();
} 
```

# javascript - 纯 JS 的 jQuery ":contains()" 模拟

> ID：10139533
> 
> 赞同：5
> 
> 时间：2012-04-13T10:57:03.337
> 
> 标签：javascript, jquery, html, phantomjs, casperjs

我正在为 CasperJS 编写脚本。我需要单击包含“1”跨度的链接。在 jQuery 中可以使用`:contains('1')`，但纯 Javascript 中的选择器的解决方案是什么？

HTML：`<a class="swchItem"><span>1</span></a><a class="swchItem"><span>2</span></a>`

jQuery 变体：`$('a .swchItem span:contains("1")')`

**UPD** CasperJS 代码：

```
casper.then(function () {
    this.click('a .swchItem *select span with 1*')
}) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T15:56:14.280

从[0.6.8](https://github.com/n1k0/casperjs/blob/master/CHANGELOG.md#2012-05-20-v068)开始，CasperJS 提供了[XPath 支持](http://casperjs.org/#selectors)，所以你可以这样写：

```
var x = require('casper').selectXPath;

casper.then(function() {
    this.click(x('//span[text()="1"]'))
}) 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:00:02.760

```
var spans = document.getElementsByTagName('span'),
    len = spans.length,
    i = 0,
    res = [];

for (; i < len; i++) {
    if (spans.innerHTML == 1) res.push(spans[i]);
} 
```

除非浏览器支持本机 css 查询，否则您必须这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T11:11:11.580

试试下面的。我的答案和 gillesc 的答案之间的区别在于，我只获得了`a`带有您指定的类名的标签，因此如果`a`页面上有更多没有该类的标签，他的回答可能会产生意想不到的结果。这是我的：

```
var aTags = document.getElementsByTagName("a");
var matchingTag;

for (var i = 0; i < aTags.length; i++) {

    if (aTags[i].className == "swchItem") {
        for (var j = 0; j < aTags[i].childNodes.length; j++) {
            if (aTags[i].childNodes[j].innerHTML == "1") {
                matchingTag = aTags[i].childNodes[j];
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T12:33:30.117

jQuery 是 JavaScript。还有许多选择器引擎可供选择。

如果你想从头开始，你可以使用 querySelectorAll 然后寻找合适的内容（假设内容选择器没有实现），如果不可用，实现你自己的。

这意味着通过标签名称获取元素，过滤类，然后寻找具有匹配内容的内部跨度，因此：

```
// Some helper functions
function hasClass(el, className) {
  var re = new RegExp('(^|\\s)' + className + '(\\s|$)');
  return re.test(el.className);
}

function toArray(o) {
  var a = [];
  for (var i=0, iLen=o.length; i<iLen; i++) {
    a[i] = o[i];
  }
  return a;
}

// Main function
function getEls() {

    var result = [], node, nodes;

    // Collect spans inside A elements with class swchItem
    // Test for qsA support
    if (document.querySelectorAll) {
      nodes = document.querySelectorAll('a.swchItem span');

    // Otherwise...
    } else {

      var as = document.getElementsByTagName('a');
      nodes = [];

      for (var i=0, iLen=as.length; i<iLen; i++) {
        a  = as[i];

        if (hasClass(a, 'swchItem')) {
          nodes = nodes.concat(toArray(a.getElementsByTagName('span')));
        }
      }
    }

    // Filter spans on content
    for (var j=0, jLen=nodes.length; j<jLen; j++) {
      node = nodes[j];

      if ((node.textContent || node.innerHTML).match('1')) {
        result.push(node);
      } 
    }
    return result;
} 
```

# c# - 从 Linq2Sql 中的 3 个表中提取记录

> ID：10139534
> 
> 赞同：0
> 
> 时间：2012-04-13T10:57:05.847
> 
> 标签：c#, sql, linq, sql-server-2008, linq-to-sql

我的数据库中有 3 个表。公司、产品和潜在客户。以下是我的领域。

## 线索表：

```
SELECT [Id]
      ,[BuySellTypeId]
      ,[ProductName]
      ,[Keywords]
      ,[CategoryId] // categoryid
      ,[SubCategoryId]
      ,[Description]
      ,[ProductImagePath]
      ,[CreationDate]
      ,[ExpiryDate]
      ,[CompanyId] // company id
      ,[ShortDescription]
      ,[IsExpired]
      ,[IsActive]
  FROM [BuySell] 
```

## 产品表：

```
SELECT   
        Id, 
        Name, 
        Description, 
        ImagePath, 
        CompanyId, //company id
        Keywords, 
        CategoryId,  // categoryid
        SubCategoryId, 
        PostedDate, 
        ExpiryDate, 
        ShortDescription, 
        IsActive,                       
        IsExpired
FROM  Products 
```

我还有一个表“**公司**”，其参考在上面的两个表中显示。我的要求是提取上表中存在的所有公司，Products 和 BuySell 属于同一类别。例如，如果我想查看 CategoryId = 15 的所有公司，那么它将从 buysell 和 products 表中拉出所有 categoryid = 15 的公司。显然会有冗余，所以我将`Distinct()`用来提取不同的项目。

我的 Linq2Sql Biz 层方法

```
 /// <summary>
        /// Returns all companies by category id that exists in Lead and Products
        ///table
        /// </summary>
        /// <param name="categoryId">category id as integer</param>
        /// <param name="take">records to take</param>
        /// <param name="skip">records to skip</param>
        /// <returns>List of companies</returns>
        public static IList GetCompaniesByCategory(int categoryId, int take, int skip)
        {
            return (from c in Context.Companies
                   join bs in Context.BuySells on c.CompanyId equals bs.CompanyId
                   join p in Context.Products on c.CompanyId equals p.CompanyId
                   where bs.CategoryId == categoryId || p.CategoryId==categoryId
                   select new
                              {
                                  c.CompanyId,
                                  c.CompanyName,
                                  c.Country.Flag,
                                  c.Profile,
                                  c.IsUsingSMSNotifications,
                                  c.IsVerified,
                                  c.MembershipType,
                                  c.RegistrationDate, c.ShortProfile,
                              }).Skip(skip).Take(take).Distinct().ToList();
        } 
```

但是上面的代码给我返回了 0 个项目。当我设计它的 sql 时，见下文，

```
SELECT     dbo.Company.CompanyId, dbo.Company.CompanyName, dbo.Company.Name, dbo.Company.IsVerified, dbo.Company.IsUsingSMSNotifications, 
                      dbo.Company.CompanyLogo, dbo.Company.RegistrationDate, dbo.Company.Profile
FROM         dbo.BuySell INNER JOIN
                      dbo.Company ON dbo.BuySell.CompanyId = dbo.Company.CompanyId LEFT OUTER JOIN
                      dbo.Products ON dbo.Company.CompanyId = dbo.Products.CompanyId
WHERE     (dbo.BuySell.CategoryId = 1) AND (dbo.Products.CategoryId = 1) 
```

我可以从 BuySell 获得公司，但不能从 Product 获得。所以请帮助我。`I need the LINQ equivalent statement. To replace the above cs code.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:25:41.747

如果您在这些表之间有任何关系，则查询可能会简单得多

```
return (from c in Context.Companies
where c.BuySells.Any( b=>b.CategoryId == categoryId)
      || c.Products.Any( p=>p.CategoryId == categoryId)
select new
{
  c.CompanyId,
  c.CompanyName,
  c.Country.Flag,
  c.Profile,
  c.IsUsingSMSNotifications,
  c.IsVerified,
  c.MembershipType,
  c.RegistrationDate, c.ShortProfile,
}).Skip(skip).Take(take).ToList(); 
```

*与 SSMS 一起使用的查询检查 CategoryId = 1 并使用 AND 条件，但您的 LINQ 查询使用 OR 条件*

# iphone - 在 Xcode 中如何抑制“不完整的实现”？（继承）

> ID：10139540
> 
> 赞同：0
> 
> 时间：2012-04-13T10:57:32.127
> 
> 标签：iphone, ios, xcode, inheritance

我有一个在其超级方法中实现的方法。当我运行我的程序时。它工作正常。如何抑制此警告？顺便说一句，这两种方法都在“.m”文件中。

代码是这样的：

类A.m

```
@interface ClassA()
- (void)method;
@end 
```

类A.h

```
@interface ClassA : ClassB
@end 
```

B类.m

```
@interface ClassB()
@end
@implementation ClassB
- (void)method
{
} 
```

当我在 ClassA 中调用方法时它工作正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:00:05.923

无论如何，您总是可以实现该方法，并调用超级方法 -

```
-(void)doMyThing {

    [super doMyThing];

    // do nothing

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:50:23.167

听起来您已经在 .h 文件中声明了您不应该声明的方法？或者 .h 文件中可能缺少 @end。

你没有给我们太多的继续。我们可以从 .h 和 .m 中查看您的完整代码吗？

* * *

阅读您的代码示例后，请尝试以下操作：

类A.h

```
@interface ClassA : ClassB  
//ClassB inherits from Class A, so we define 'method' in Class B
//ClassA knows about 'method' by inheritance from class B,
//so 'method' doesn't need to be defined here.

//doStuff will be the method that calls 'method'
- (void)doStuff;
@end 
```

类A.m

```
@interface ClassA
@end

@implementation ClassA
- (void)doStuff
{
   //Call 'Method'       
  [self method];
}
@end 
```

B类.h

```
@interface ClassB  
//Define 'method' which will be inherited by ClassA 
- (void)method;
@end 
```

B类.m

```
@interface ClassB
@end

@implementation ClassB
- (void)method
{
   //'method' does it's thing       
  NSLog(@"Method has been Called");
}
@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:16:44.140

你完全错了。流行的建筑是有：

B类.h

```
@interface ClassB
- (void)method;
@end 
```

B类.m

```
@interface ClassB()
@end
@implementation ClassB
- (void)method
{
    //do nothing or even assert false
}
@end 
```

类A.h

```
@interface ClassA : ClassB
@end 
```

类A.m

```
@interface ClassA()
@end
@implementation ClassA
- (void)method
{
    //do your stuff here
}
@end 
```

这就是所谓的方法覆盖。但是，如果我正确理解您要实现的目标，您应该拥有：

B类.h

```
@interface ClassB
- (void)method;
@end 
```

B类.m

```
@interface ClassB()
@end
@implementation ClassB
- (void)method
{
    //do your stuff here
}
@end 
```

类A.h

```
@interface ClassA : ClassB
@end 
```

而且不用乱搞ClassA，可以调用

```
ClassA *o=[[ClassA alloc ] init];
[o method]; 
```

然后`method`由于从 ClassB 继承，所以在 classA 中可用。

# mapreduce - 在 Hadoop 的 Map/Reduce 程序中执行多个作业

> ID：10139545
> 
> 赞同：1
> 
> 时间：2012-04-13T10:57:40.167
> 
> 标签：mapreduce

```
public int run(String[] args) throws Exception {

    /*****************Job for id-title mapping*******************/      

    JobConf conf_idTitle = new JobConf(PageRank.class);
    conf_idTitle.setJobName("first_idTitleMapping");

    ...

    FileInputFormat.setInputPaths(conf_idTitle, new Path(args[0]));
    FileOutputFormat.setOutputPath(conf_idTitle, new Path(pathforIdTitle));

    JobClient.runJob(conf_idTitle);

    /*****************Job for linkgraph mapping*******************/

    JobConf conf_linkgraph = new JobConf(PageRank.class);

    conf_linkgraph.setJobName("second_linkgraphBuilding");

    ...

    FileInputFormat.setInputPaths(conf_linkgraph, new Path(args[0]));
    FileOutputFormat.setOutputPath(conf_linkgraph, new Path(pathforLinkgraph));

    JobClient.runJob(conf_linkgraph);

    return 0;
}

public static void main(String[] args) throws Exception {
     int res = ToolRunner.run(new Configuration(), new PageRank(), args);
     System.exit(res);
} 
```

此代码用于在 Map/reduce 程序中串行执行两个作业，而不是并行执行。我为每个作业使用不同的映射器和缩减器，所以我定义了两个 JobConf 对象。因为我应该使用第一个作业的输出作为第二个作业的输入，所以我在“JobClient.runJob(conf_idTitle);”之后定义了第二个 JobConf 对象。

但是，我遇到了如下异常：

```
 java.lang.RuntimeException: Error in configuring object
at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:93)
at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:387)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:325)
at org.apache.hadoop.mapred.Child$4.run(Child.java:270)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1157)
at org.apache.hadoop.mapred.Child.main(Child.java:264)
    Caused by: java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.jav 
```

为什么会出现这个错误？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:41:48.173

公共 JobConf（配置 conf）

当您的应用程序已经构建了一个 JobConf 对象并且想要一个副本用于替代作业时，通常使用此构造函数。conf 中的配置被复制到新的 JobConf 对象中。

# php - 动态更新 MySql 表

> ID：10139547
> 
> 赞同：1
> 
> 时间：2012-04-13T10:57:53.927
> 
> 标签：php, mysql

我正在尝试动态更新 MySql 表，`$query`当我回显它时看起来正确，但由于某种原因，当我将代码插入 MySql 查询时它不起作用。

```
$b = 1;
$query_a = array();
$vars = array();
$result = mysql_query("SELECT * FROM my_table");

for ($i = 0; $i < mysql_num_fields($result); $i++) {
    $vars[] = mysql_field_name($result,$b);
    $b++;
}

foreach ($vars as $v)
{
    if (isset($_GET[$v]))
    {
        $isclean =  $_GET[$v];
        $query[] = $v.' = '.$isclean.'';
    }
}
$query = implode(',', $query);

mysql_query("UPDATE my_table SET $query WHERE UIN = '1'"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:11:33.110

在不知道您的数据类型的情况下，我猜这是因为您没有在值周围添加单引号。你可能想要这样的东西：

```
$query[] = $v.' = \''.$isclean.'\''; 
```

# javascript - 用js计算html元素个数

> ID：10139556
> 
> 赞同：1
> 
> 时间：2012-04-13T10:58:36.470
> 
> 标签：javascript, html

我有多个具有相同 id='mydiv' 的 div 元素。我想使用代码计算这些 div 和 Iam

```
document.getElementById('mydiv').length 
```

但它不工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T11:01:49.880

你应该做的是使用类而不是 ID。ID 仅用于一个元素，class 用于多个。

[http://jsfiddle.net/d7AHV/](http://jsfiddle.net/d7AHV/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:13:28.543

它不起作用，因为`getElementById`总是返回具有指定 ID 的元素，如果指定的 ID 不存在，则返回 null

来自[ECMA](http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html)

```
 getElementById(elementId) This method returns a Element. The elementId
    parameter is of type DOMString. 
```

您可以做的是为每个 div 分配类

```
<div class="mydiv"></div>
<div class="mydiv"></div>
<div class="mydiv"></div>
<div class="mydiv"></div>
<div class="mydiv"></div>​​​​​​​​​ 
```

并迭代：

```
var divs = document.getElementsByTagName('div');
var count = 0;
for(var i = 0; i < divs.length; i++) {
    if(divs[i].className == 'mydiv') count++;
}

alert(count); 
```

如果您的客户支持`document.getElementsByClassName()`，那就更简洁了：

```
alert(document.getElementsByClassName('mydiv').length) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:21:38.627

您已被告知具有相同 ID 的多个元素，但在极少数情况下这可能是不可避免的（例如，您无法控制的 XML 文档）。唯一不利的行为是按 ID 选择通常只会返回第一个（但不能保证）。

您可以通过遍历文档中的所有元素并计算具有匹配 id 的元素来计算具有相同 id 的元素，例如

```
function countSameIds(id) {
  var allNodes = document.getElementsByTagName('*');
  for (var i=allNodes.length, count=0; i; ) {
    if (allNodes[--i].id == id) {
      ++count;
    }
  }
  return count;
} 
```

# c# - 从 dataGridView 获取列值并将它们附加到主机文件？

> ID：10139558
> 
> 赞同：0
> 
> 时间：2012-04-13T10:58:45.487
> 
> 标签：c#, .net, datagridview

我正在尝试修改主机文件（所以我在其中添加了行），主机文件位于 c:\windows\system32\drivers\etc\

我在表单中添加了一个带有两列的 dataGridView（ URL 和 RedirectTo ），现在它看起来像这样：

![在此处输入图像描述](../Images/0cb4a041857614f931dec7e7663e0866.png)

我想要做的是读取 dataGrid 的当前值并将它们附加到主机文件中，因此文本文件将如下所示：

![在此处输入图像描述][2]

如何访问列值并读取它们以将它们附加到主机文件（文件结尾），格式如下：

```
www.algerie-actualites.com       www.monde-presse.com
algerie-actudz.com/              www.monde-presse.com 
```

（我没有使用任何 DataSet / Database 来读取数据，用户可以在 DataGridView 中键入这些网址！！）

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:20:39.387

试试这个方法：

```
var lines = grid.Rows.Cast<DataGridViewRow>()
            .Select(r => String.Join("\t", r.Cells.Cast<DataGridViewCell>()
            .Select(c => c.Value)) + Environment.NewLine);
System.IO.File.AppendAllLines(path, lines); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:46:01.267

```
FileStream fs = new FileStream(@"D:\sample.txt", FileMode.Open);

StreamWriter sw = new StreamWriter(fs);

for (int i = 0; i < gvEmp.Rows.Count; i++)
{
    int colCount = gvEmp.Rows[i].Cells.Count;
    for (int j=0; j < colCount; j++)
    {
       sw.Write(gvEmp.Rows[i].Cells[j].Text + " , ");
    }
    sw.WriteLine();
}
sw.Flush();
fs.Close(); 
```

# python - 此列表索引如何超出范围？（斐波那契数列练习）

> ID：10139559
> 
> 赞同：0
> 
> 时间：2012-04-13T10:58:48.637
> 
> 标签：python, list, for-loop, range

此代码应打印斐波那契数列的前十个数字中的偶数之和。

```
#Creates a list with the first ten Fibonacci numbers. 
l = [1,2]
for i in range(10):
    l.append(l[i]+l[i+1])

for i in l:
    #If an element of the Fibonacci list is uneven, replace it with zero.
    if l[i]%2 != 0:
        l[i] = 0

#Print the sum of the list with all even Fibonacci numbers. 
print sum(l) 
```

当我执行此操作时，我得到：

```
 File "pe2m.py", line 6, in <module>
    if l[i]%2 != 0:
IndexError: list index out of range 
```

我不明白它是如何超出范围的，有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:00:26.930

你的问题是`for i in l`：它没有给你索引，它给你列表元素。由于元素是整数，它们可能是有效的（前几个是有效的）但它们没有你想要的值——你必须再次遍历一个范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T11:02:18.437

您不能使用列表中的值对列表进行索引，因为不能保证该值会在列表边界内

看到你的代码，我觉得你打算做如下的事情

```
>>> for i,e in enumerate(l):
    #If an element of the Fibonacci list is uneven, replace it with zero.
    if e%2 != 0:
        l[i] = 0 
```

有趣的是，您可以执行以下相同操作。（看到glglgl的评论后编辑]

```
>>> print sum(e for e in l if e%2) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T11:01:48.757

您正在循环值而不是索引位置！

请改用以下代码：

```
#Creates a list with the first ten Fibonacci numbers. 
l = [1,2]
for i in range(10):
    l.append(l[i]+l[i+1])

for i in range(len(l)):
    #If an element of the Fibonacci list is uneven, replace it with zero.
    if l[i]%2 != 0:
        l[i] = 0

#Print the sum of the list with all even Fibonacci numbers. 
print sum(l) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T11:05:39.907

Python 的`for x in y`构造返回 x 中序列的值/元素，而不是它们的索引。

至于斐波那契数：序列从 1, 1 而不是 1, 2 开始。总和可以像这样更简单地完成：

```
a, b = 1, 1
s = 0
for i in range(10):
    a, b = b, a+b
    if b % 2 = 0:
        s += b

print s 
```

如果您需要获得前 N 个偶数的总和，您可以：

```
a, b = 1, 1
s = 0
count = 0
while count < 10:
    a, b = b, a+b
    if b % 2 = 0:
        s += b
        count += 1

print s 
```

只是为了好玩，带有功能样式的生成器的版本：

```
from itertools import islice
def fib():
    a, b = 1, 1
    yield a
    yield b
    while True:
        a, b = b, a+b
        yield b

even_sum = reduce(lambda x, y: x+y if y % 2 == 0 else x, islice(fib(), 10), 0) 
```

# sql-server - 将 XML 中的不同值插入表中

> ID：10139570
> 
> 赞同：1
> 
> 时间：2012-04-13T10:59:23.270
> 
> 标签：sql-server, xml, tsql, service-broker

我有一个带有复杂主键的表。此外，我还有一个接收 XML 消息的 Service Broker 服务，该消息基本上如下所示：

```
 <TableName>
    <CHANGED key1="1" key2="2" key3="3" timestamp="00:00:01"/>
    <CHANGED key1="1" key2="2" key3="3" timestamp="00:00:02"/>
    <CHANGED key1="1" key2="2" key3="3" timestamp="00:00:03"/>
  </TableName> 
```

我的目标是将这些值插入到表中。

我尝试了以下查询：

```
INSERT INTO TableName (KEY1, KEY2, KEY3, TS)
  SELECT 
      Tbl.Col.value('@*[1]', 'int'),
      Tbl.Col.value('@*[2]', 'int'),
      Tbl.Col.value('@*[3]', 'int'),
      Tbl.Col.value('@*[4]', 'datetime')
  FROM   @MESSAGE.nodes('//CHANGED') Tbl(Col) 
```

但是，如果我们有多个记录具有相同的复杂键（key1、key2、key3）和不同的时间戳（我的 biz 逻辑需要的值），此查询将失败并显示以下错误消息：

> 违反 PRIMARY KEY 约束“TableName”。无法在对象“dbo.TableName”中插入重复键。重复键值为 (1, 2, 3)。

有没有办法只插入具有来自该消息的最新时间戳的不同值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:46:03.797

对键执行 a`group by`并聚合`timestamp`（最小或最大？）。

```
INSERT INTO TableName (KEY1, KEY2, KEY3, TS)
SELECT key1, key2, key3, MIN(ts)
FROM
  (
    SELECT 
      Tbl.Col.value('@key1', 'int') AS key1,
      Tbl.Col.value('@key2', 'int') AS key2,
      Tbl.Col.value('@key3', 'int') AS key3,
      Tbl.Col.value('@timestamp', 'datetime') as ts
    FROM   @MESSAGE.nodes('//CHANGED') Tbl(Col)
  ) AS M
GROUP BY key1, key2, key3 
```

为了真正安全，您应该使用属性名称而不是`position()`. 根据[xml 数据类型的限制，](http://technet.microsoft.com/en-us/library/ms187107%28SQL.90%29.aspx?ppud=4)不能保证属性的顺序。

> 不保留 XML 实例中属性的顺序。当您查询存储在 xml 类型列中的 XML 实例时，生成的 XML 中的属性顺序可能与原始 XML 实例不同。

# eclipse - Eclipse 中的最小库

> ID：10139582
> 
> 赞同：0
> 
> 时间：2012-04-13T11:00:26.987
> 
> 标签：eclipse, processing, minim, processing-ide

我编写了一个使用 Minim 和 Processing IDE 的草图。一切正常。

我现在正计划改进它，并转移到 Eclipse，就像我在许多其他项目中所做的那样。我将构建路径配置为包含 minim.jar。所有的进口似乎都很好。但是我无法编译该项目，因为在初始化 de Minim 实例变量时出现以下错误：

> 构造函数 Minim(PApplet) 未定义

声明没有给出错误，所以我认为库加载正常。完全相同的代码在处理 IDE 中有效，但在 Eclipse 中无效。这是我的代码：

```
import processing.core.*;
import ddf.minim.*;
import ddf.minim.signals.*;
import ddf.minim.analysis.*;
import ddf.minim.effects.*;

public class MinimTest extends PApplet {    
    Minim minim;    
    public void setup() {
        minim = new Minim(this); // error in this line
    }
} 
```

我不知道发生了什么。任何指针将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T13:29:39.157

确保将 Minim 库使用的所有 .jar 文件添加到源路径：

```
jl1.0.jar       minim.jar       tritonus_share.jar
jsminim.jar     mp3spi1.9.4.jar
minim-spi.jar       tritonus_aos.jar 
```

之后应该可以正常编译

# cakephp - 在 CakePHP2.0 上测试调用模型函数的控制器

> ID：10139584
> 
> 赞同：0
> 
> 时间：2012-04-13T11:00:32.743
> 
> 标签：cakephp, testing, model, controller, cakephp-2.0

这是我的测试：

```
public function testIncludeNumComment() {
    $post = array(...stuff.....);
    $result = $this->Comments->includeNumComments($post);
    echo "end"; //this is not printed
    $expected =1;

    $this->assertEquals($result, $expected);
} 
```

然后，我的控制器功能是这个：

```
public function includeNumComments($post){
        echo "printed";
    $comments = $this->Comment->getNumComments($post['Post']['id']);
    echo "not printed";

    return $comments;
} 
```

如您所见，控制器上对模型函数的此调用不起作用

```
$this->Comment->getNumComments($idPost); 
```

更重要的是，当我引入**回声“嗨”时；****在 Comment 模型中的getNumComments**函数的一开始，它也不会被打印出来。这就像它没有找到功能或类似的东西。（但在测试期间它不会通过屏幕显示任何错误）

它停在那里并且不执行更多代码。我完全确定该函数运行良好，它只返回帖子中的评论数。问题是：为什么它不适用于测试用例？

谢谢。

更新：测试设置如下所示：

```
public function setUp() {
    parent::setUp();

    $this->Comments = new TestCommentsController();
    $this->Comments->constructClasses();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:35:34.953

```
$result = $this->Comments->includeNumComments($post); 
```

如果您的模型是“评论”，这没有多大意义

所以将其更改为：

```
$result = $this->Comment->includeNumComments($post); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:07:15.840

检查您是否包括`TestCommentsController`以下内容：

```
App::uses('TestCommentsController', 'Controller'); 
```

然后编写如下`beforeFilter`函数`AppController`：

```
class AppController extends Controller {
    ......
    ...
    public function beforeFilter() {
      // you stuff
    }
} 
```

然后将其添加到包含`test`功能的控制器中：

```
 public function beforeFilter(){
       parent::beforeFilter();
       $this->Comments = new TestCommentsController();
       $this->Comments->constructClasses();
   }

..... 
```

现在继续...

```
 public function testIncludeNumComment() {
      $post = array(...stuff.....);
      $result = $this->Comments->includeNumComments($post);
      echo "end"; //this is not printed
      $expected =1;

      $this->assertEquals($result, $expected);
  } 
```

# javascript - 检查是否为假

> ID：10139588
> 
> 赞同：37
> 
> 时间：2012-04-13T11:00:39.497
> 
> 标签：javascript, ajax, if-statement

有没有更好的方法来做到这一点？

```
if(borrar() !== false)
{
    alert('tatatata bum bum bum prapra');
}
return false; 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-13T11:02:43.860

如果你想检查 false 和 alert，如果没有，那么没有。

如果你使用`if(val)`，那么任何评估为“真实”的东西，比如非空字符串，也会通过。所以这取决于你的标准有多严格。使用`===`and`!==`通常被认为是一种好的做法，以避免通过 JavaScript 的隐式布尔测试意外匹配真假条件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-13T11:02:32.040

如果您想要对 false 进行显式检查（而不是未定义、null 和其他我假设您使用！== 而不是！=），那么是的，您必须使用它。

此外，这在稍小的占用空间中是相同的：

```
if(borrar() !== !1) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-03-23T13:10:48.423

你可以使用更简单的东西：

```
if(!var){
    console.log('var is false'); 
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-13T11:36:09.930

检查某事是不是假的……所以它是真的，只要你在做一些量子物理学的事情。

```
if(!(borrar() === false)) 
```

或者

```
if(borrar() === true) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-09-13T12:16:48.130

如果您希望它明确检查它是否为假（布尔值），您必须使用

```
if(borrar() !== false) 
```

但在 JavaScript 中，我们通常使用 falsy 和 truthy，你可以使用

```
if(!borrar()) 
```

但随后值 0、''、null、undefined、null 和 NaN 不会生成警报。

以下值总是虚假的：

```
false,
,0 (zero)
,'' or "" (empty string)
,null
,undefined
,NaN 
```

其他一切都是真实的。包括：

```
'0' (a string containing a single zero)
,'false' (a string containing the text “false”)
,[] (an empty array)
,{} (an empty object)
,function(){} (an “empty” function) 
```

来源：[https ://www.sitepoint.com/javascript-truthy-falsy/](https://www.sitepoint.com/javascript-truthy-falsy/)

作为将任何值转换为 true 或 false（布尔类型）的额外好处，请使用双感叹号：

```
!![] === true
!!'false' === true
!!false === false
!!undefined === false 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-13T11:02:26.043

像这样：

```
if(borrar())
{
   // Do something
} 
```

如果`borrar()`返回 true 然后做某事（如果它不是 false）。

# mysql - 导入 MySQL InnoDB 转储而不锁定表

> ID：10139589
> 
> 赞同：2
> 
> 时间：2012-04-13T11:00:41.790
> 
> 标签：mysql, import, innodb, mysqldump, restore

我有哪些选项可以使用 InnoDB 引擎导入 MySQL 表，其中表已经存在，而不会失去对现有表的读取访问权限？通常我指的`ALTER TABLE`是非常慢的情况，我想转储表，修改转储，然后导入它。

如果我`mysqldump`用来进行转储，那么当我重新插入它时，它会在插入之前丢弃表，因此在导入完成之前读取访问当然会丢失。

我可以简单地更改转储中的表名，导入它，然后在完成后删除旧表并重命名新表吗？有没有更好的办法？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:03:53.920

如果您的表具有相同的结构，我看不出有任何问题。您只需跳过“DROP TABLE”运算符。几乎所有的转储程序都可以选择不在转储中包含 DROP TABLE/CREATE TABLE。我个人推荐[Sypex Dumper](http://sypex.net/en/)。

如果要更改表结构而不锁定表，我认为最好的方法是使用 [pt-online-schema-change - ALTER 表而不锁定它们](http://www.percona.com/doc/percona-toolkit/2.1/pt-online-schema-change.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:14:14.860

为此[http://www.mysql.com/products/enterprise/backup.html使用 MySQL Enterprise 备份](http://www.mysql.com/products/enterprise/backup.html)

# android - 不再显示警报

> ID：10139592
> 
> 赞同：-2
> 
> 时间：2012-04-13T11:00:46.000
> 
> 标签：android, alert, show

我想知道如何：

每次用户启动应用程序时显示警报。

当用户选择该选项时。“不再显示。” 如何不显示更多？在没有数据库的情况下将这些信息保存在哪里？简单？

我如何？选择该选项时我是否已保存在缓存中？我还不太明白。非常感谢你

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:03:45.890

用第一个屏幕的`onCreate()`方法做...

很好地保持其状态..创建一个类并保留一个变量并为此创建静态吸气剂和吸气剂..当他说不要再给我看时设置它..并在每次显示前检查..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:06:47.290

您可以记录用户何时启动您的应用程序`onCreate()`，然后仅在未设置时才显示警报。所以，像这样的东西。

```
public class MyClass extends Activity {
    boolean alreadyOpened = false;
    boolean doNotShowAgain;

    public void onCreate(Bundle savedInstanceState) {

        doNotShowAgain = loadFromPreferences();

        if(!alreadyOpened || !doNotShowAgain) {
            showDialog(MYDIALOG);
            alreadyOpened = true;
        }

        //your code goes here

    }

} 
```

然后你需要编写代码来加载“不再显示”首选项更多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T11:37:50.460

您可以使用共享首选项以下是在其中存储数据的代码

```
 SharedPreferences prefs;
             prefs= this.getSharedPreferences("yourprefName",0);
        Editor editor = prefs.edit();
                 editor.putString("yourtag", "information");
                 editor.commit();
and Get information like 
String info=prefs.getString("yourtag", null); 
```

了解更多信息 [如何从 Android 中的 PreferenceActivity 获取 SharedPreferences？](https://stackoverflow.com/questions/2614719/how-do-i-get-the-sharedpreferences-from-a-preferenceactivity-in-android) 而[这个](http://saigeethamn.blogspot.in/2009/10/shared-preferences-android-developer.html)_

# html - 用于打印的样式表，背景颜色被忽略

> ID：10139593
> 
> 赞同：4
> 
> 时间：2012-04-13T11:00:56.457
> 
> 标签：html, css

我创建了一个表，在其中循环给每个 tr 类“奇数”和“偶数”。在我的样式表中，我得到了这个：

```
表 tbody tr.odd {
    背景颜色：#cccccc；
}

```

这在浏览器中有效，但在打印时无效。除了这个背景颜色之外，我的媒体样式表中的其他所有内容都有效。

我启用了打印颜色，我可以打印带有颜色的图像......所以？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T11:08:23.593

默认情况下，大多数浏览器在打印时会忽略 CSS 背景颜色和图像。这只能通过更改浏览器中的设置来覆盖，如果浏览器甚至有这样的选项（有些没有，正如 Quentin 指出的那样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-22T10:30:14.183

您可以通过在打印预览中实现 div 的背景颜色。中的边框颜色`divForBgColor:before`将是 的背景颜色`divForBgColor`。

```
.divForBgColor {
    position: relative;
    overflow: hidden;
}

.divForBgColor:before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border: 9999px solid #f1f2f2;
    z-index: -1;
} 
```

# sql - SQL 报错 where

> ID：10139596
> 
> 赞同：1
> 
> 时间：2012-04-13T11:01:15.610
> 
> 标签：sql, tsql, sql-server-2005

我有一份报告要检查重复的“recs”，但有点丢失并出现错误。看一看！

```
Declare @StartDate as  Datetime
Declare  @EndDate as  Datetime

set @StartDate = GetDate()-14
set @EndDate = GetDate()

SELECT *
FROM    (SELECT dupl.machID, dupl.Location, dupl.place, dupl.recNumber, 
 MIN(realdupl.rcTransDate) 

AS Firstrec, MAX(realdupl.rcTransDate) AS Lastrec

FROM    
    (SELECT rc.rcmachID AS machID, ck.ckLocation AS Location,    

    ck.ckLocationplace AS place, rc.rcrecNum AS recNumber, COUNT(*) as   
    NoOfrecs
FROM 

    (SELECT rcmachID, rcrecNum, rcTransDate, rcturnaroundIndicator FROM    
     ProBatchHostDbSec.dbo.vatrecs  (NOLOCK) 
            )
      AS rc
            INNER JOIN machConfig AS ck WITH (NOLOCK)
            ON rc.rcmachID = ck.ckmachID 
            WHERE rc.rcturnaroundIndicator = 0
            AND ck.ckProductionmach = 'Y'
            AND ck.ckLocationplace = 'IN'
            GROUP BY rc.rcmachID, ck.ckLocation,   
                                     ck.ckLocationplace, rc.rcrecNum
            HAVING COUNT(*) > 1
            ) AS dupl
    INNER JOIN 
    (SELECT rcmachID, rcrecNum, rcTransDate, rcturnaroundIndicator FROM   
             ProBatchHostDbSec.dbo.vatrecs 

        AND dupl.recNumber = realdupl.rcrecNum
    GROUP BY dupl.machID, dupl.Location, dupl.place, dupl.recNumber
    ) AS temp

         WHERE temp.Firstrec != temp.Lastrec
         AND temp.Lastrec BETWEEN @StartDate AND @EndDate
          ORDER BY  temp.machID, temp.Lastrecdbo.vatrecs --WITH (NOLOCK) 
    GROUP BY dupl.machID, dupl.Location, dupl.place, dupl.recNumber
    ) AS temp 
```

当我运行它时，我得到一个错误“关键字'WHERE'附近的语法不正确。” 哪里语法不正确？？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T11:08:32.627

```
INNER JOIN 
(SELECT vsTermID, vsVoucherNum, vsTransDate, vsReversalIndicator FROM   
         ProBatchHostDbSec.dbo.vatVouchers 

    AND dupl.VoucherNumber = realdupl.vsVoucherNum
GROUP BY dupl.TerminalID, dupl.Location, dupl.Country, dupl.VoucherNumber
) AS temp

     WHERE temp.FirstVoucher != temp.LastVoucher 
```

加入什么条件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:02:27.917

```
WHERE temp.FirstVoucher != temp.LastVoucher 
```

<> 是这里的标准。不确定使用 != 是否会对性能产生任何轻微影响……但 MSFT 更喜欢 <>。

# php - 将创建的 Joomla 用户分配给当前用户

> ID：10139607
> 
> 赞同：0
> 
> 时间：2012-04-13T11:01:57.450
> 
> 标签：php, joomla

我为 facebook 创建了一个 Joomla 插件，它可以让 facebook 用户登录。另外，当他们第一次通过 faceobok 登录时，我正在创建新用户。

我想将当前用户对象设置为创建的用户。在 Joomla 中可以吗？如何？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:13:08.400

您可以覆盖当前用户：

```
$user = & JFactory::getUser();
$user = $newUser; 
```

# jquery - 全宽轮播/滑块专注于中心项目

> ID：10139610
> 
> 赞同：2
> 
> 时间：2012-04-13T11:02:07.073
> 
> 标签：jquery, slider, carousel

我正在寻找一个全宽滑块或轮播，其中页面中间的两个项目（li）是“主要”项目，而不是最左边的项目。

我知道这可能没有意义，所以我会尝试不同的解释。

我有一个完整的页面宽度滑块，列表中有 10 个图像，您可以在它们之间滑动，假设浏览器宽度让您一次看到 5 个，当您单击时它们会 1 个 1 个滚动。如果我调整浏览器的大小，我希望站点主要区域中的两个或多少图像保持静止，并且该区域左侧或右侧的任何内容都可见但被忽略，甚至可能降低不透明度。

这可能吗？或者有人知道已经这样做的插件吗？

为了更清楚，这里有两张图片：

[http://imgur.com/Y97Mb](http://imgur.com/Y97Mb) [http://imgur.com/o5BTb](http://imgur.com/o5BTb)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-06T01:46:10.293

*   **我相信RoyalSlider**提供了此功能，但价格为 12 美元。
    [http://dimsemenov.com/plugins/royal-slider/visible-nearby/](http://dimsemenov.com/plugins/royal-slider/visible-nearby/)

*   **CarouFredSel**从示例
    [http://caroufredsel.dev7studios.com/](http://caroufredsel.dev7studios.com/)
    [http://coolcarousels.frebsite.nl/c/45/](http://coolcarousels.frebsite.nl/c/45/)中看起来非常灵活（一些很好的示例）

*   您也许可以使用**jCarousel**（免费），并应用一些样式。
    [http://sorgalla.com/jcarousel/](http://sorgalla.com/jcarousel/)

# visual-studio-2010 - 如何根据选择类型在新的自定义字段中添加选择字段的标准设置

> ID：10139617
> 
> 赞同：0
> 
> 时间：2012-04-13T11:02:30.023
> 
> 标签：visual-studio-2010, sharepoint, sharepoint-2010, custom-field-type

我想根据 SharePoint 2010 中的选择字段创建自定义字段类型。我的代码：Fldtypes_OpenChoiceField.xml：

```
<?xml version="1.0" encoding="utf-8" ?>
<FieldTypes>
  <FieldType>
    <Field Name="TypeName">OpenChoice</Field>
    <Field Name="ParentType">Choice</Field>
    <Field Name="TypeDisplayName">OpenChoice</Field>
    <Field Name="TypeShortDescription">Choice with open answers</Field>
    <Field Name="UserCreatable">TRUE</Field>
    <Field Name="AllowBaseTyp eRendering">TRUE</Field>
    <Field Name="ShowOnListAuthoringPages">TRUE</Field>
    <Field Name="ShowOnDocumentLibraryAuthoringPages">TRUE</Field>
    <Field Name="ShowOnSurveyAuthoringPages">TRUE</Field>
    <Field Name="ShowOnSurveyCreate">TRUE</Field>
    <Field Name="ShowOnColumnTemplateAuthoringPages">TRUE</Field>
    <Field Name="FieldTypeClass">FieldTypes.SharePoint.OpenChoiceField,$SharePoint.Project.AssemblyFullName$</Field>
    <Field Name=" ">/_controltemplates/Fields_SharePoint/OpenChoiceFieldEditor.ascx</Field>
  </FieldType>
</FieldTypes> 
```

OpenChoiceField.cs：

```
namespace FieldTypes.SharePoint
{
    public class OpenChoiceField :  SPFieldChoice
    {
        public OpenChoiceField(SPFieldCollection fields, string fieldName)
            : base(fields, fieldName)
        {
        }

        public OpenChoiceField(SPFieldCollection fields, string typeName, string displayName)
            : base(fields, typeName, displayName)
        {
        }
    }
} 
```

当我创建具有自定义字段类型的列时，我在附加列设置部分中看到只有默认设置（描述、要求、强制唯一、添加到默认视图）。但是我需要在选择字段中进行所有设置（键入每个选择...，使用显示选择，允许填写选择，默认值）。如何在我的自定义字段中插入这些属性？可能需要我添加一些标准控件来编辑控件（/_controltemplates/Fields_SharePoint/OpenChoiceFieldEditor.ascx）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:51:45.247

如果您想要一个自定义字段的好示例，请访问 Bernado Nguyen-Hoan 的此[博客](http://bernado-nguyen-hoan.com/2011/11/07/walkthrough-custom-field-type-for-uploading-and-displaying-images-in-sharepoint-2010-lists/)。

您必须将自定义属性添加到您的 xml 中，如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<FieldTypes>
  <FieldType>
    <Field Name="TypeName">ImageUpload</Field>
    ...
    ...
    <PropertySchema>
      <Fields>
        <Field 
            Name="UploadImagesTo"
            DisplayName="UploadImagesTo"
            MaxLength="255"
            DisplaySize="100"
            Type="Text"
            Hidden="TRUE">
          <Default>Images</Default>
        </Field>
      </Fields>
    </PropertySchema>
  </FieldType>
</FieldTypes> 
```

您还必须覆盖`Update`您的方法`OpenChoiceFieldClass`：

```
public override void Update()
{
  base.SetCustomProperty("UploadImagesTo",
  Thread.GetData(Thread.GetNamedDataSlot("UploadImagesTo")));

  base.Update();
} 
```

该博客文章还将向您展示如何为该字段设置自己的自定义控件和编辑器。

# bash - 将查找字数统计结果放入变量中

> ID：10139619
> 
> 赞同：9
> 
> 时间：2012-04-13T11:02:34.843
> 
> 标签：bash, shell, variables, find, word-count

```
#!/bin/bash
find *.txt | wc -l; 
```

这给出了 txt 文件的数量。在我的程序中，如何将此输出放入变量中，例如“count”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T11:04:17.780

```
#!/bin/bash
count=$(find *.txt | wc -l) 
```

# java - 集成要在 vb.net 应用程序中使用的 java 类

> ID：10139620
> 
> 赞同：0
> 
> 时间：2012-04-13T11:02:36.310
> 
> 标签：java, vb.net

我被要求在 vb.net 中创建一个项目，该项目需要集成 Apple 创建的 Java 类（Autoingestion.class）来提取销售记录等。

我在 stackoverflow 上发现了几个问题，但是当我尝试将这个 java 类集成到我的 .net 应用程序中时，没有一个给出的答案对我有用。

例如，[这个问题](https://stackoverflow.com/questions/512124/use-a-jar-java-library-api-in-c)似乎是我真正需要的，但是在尝试编译这个 java 类时（我首先使用 Java Decompiler 对其进行了反编译），它通常会引发一些错误。

我只需要在我的应用程序中使用这个类来调用一个方法。有谁知道如何在没有太多忍者的情况下将其拉出来？

编辑：这是[来自 Autoingestion.class 的反编译代码](http://shrib.com/Ob65MAKa)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:39:57.833

The simplest solution here (other than rewriting the java code in .Net -see above comments) is to simply execute the existing java code from .Net since the class concerned contains a `main method`. i.e. something like this assuming the java class is in the working dir of your .Net app (and java is on your path):

```
Shell("java Autoingestion <options>") 
```

this keeps original functionality and is uses similar commands you currently do.

# google-maps-api-3 - 谷歌地图上的不同颜色标记

> ID：10139622
> 
> 赞同：1
> 
> 时间：2012-04-13T11:02:37.310
> 
> 标签：google-maps-api-3, google-maps-markers

我正在尝试将图像与谷歌地图上的 15 个不同的团队标记相关联，我正在尝试这样做，但它在我的地图上无法正常工作，任何建议将不胜感激。我的想法是 associate: if(location.nombreequipo==AST1){ icon: imagen } 但我对这个想法有很多疑问。

```
function displayLocation(location){
    var content = '<strong><p>Equipo: ' +location.nombreequipo + '</strong>'
        +'</strong></p><strong><p>Hora móvil: ' + location.fecha_movil 
        + '</strong></p><strong><p>Longitud: ' +location.longitud +'</strong></p>'
        + '</strong></p><strong><p>Latitud: ' +location.latitud +'</strong></p>';
    var latLng = new google.maps.LatLng(parseFloat(location.latitud), parseFloat(location.longitud));
    var imagen ='img/blue_MarkerA.png';
    var marker = new google.maps.Marker({
        position: latLng,
        draggable: false,
        map: map,
        draggable: true,
        visible: true,
        title: location.nombreequipo
    });
    arrayMarcadores.push(marker);
    google.maps.event.addListener(marker, 'click', function(){
        infowindow.setContent(content);
        infowindow.open(map, marker);
    });
    return marker;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T13:40:11.027

Can you try adding a `.imagen` property to your `location`?

For example, assign `location.imagen = img/blue.png`, then

```
 var marker = new google.maps.Marker({
                position: latLng,
                draggable: false,
                ...
                icon: location.imagen
            }); 
```

By the way you have two `draggable`, first false, then true.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T21:41:23.027

我最终采用的解决方案是：

```
if(location.nombreequipo=="TEAMNAME"){
    var image='img/blueMarker.png';
}
if(location.nombreequipo=="TEAMNAME2"){
    var image='img/redMarker.png';
}
function displayLocation(location){
            var content = '<strong><p>Equipo: ' +location.nombreequipo + '</strong>'
                +'</strong></p><strong><p>Hora móvil: ' + location.fecha_movil 
                + '</strong></p><strong><p>Longitud: ' +location.longitud +'</strong></p>'
                + '</strong></p><strong><p>Latitud: ' +location.latitud +'</strong></p>';
            var latLng = new google.maps.LatLng(parseFloat(location.latitud), parseFloat(location.longitud));
            var marker = new google.maps.Marker({
                position: latLng,
                map: map,
                draggable: true,
                visible: true,
                title: location.nombreequipo,
                icon: image
            });
            arrayMarcadores.push(marker);
            /*Content window asociated to created markers*/
            google.maps.event.addListener(marker, 'click', function(){
                infowindow.setContent(content);
                infowindow.open(map, marker);
            });
            return marker;
        } 
```

谢谢。

# java - java replaceAll（正则表达式，替换）正则表达式命令

> ID：10139623
> 
> 赞同：0
> 
> 时间：2012-04-13T11:02:40.603
> 
> 标签：java, regex, replaceall

我想知道是否有人知道删除以下内容的正则表达式命令

```
 name = 
```

从以下

```
 name = wlr 
```

只离开

```
 wlr 
```

这些详细信息取自 txt 文件，但 name = part 可以出现多次

所以我在想这样的事情会起作用，但它不能正常工作

```
 String file_name = newLine3.replaceAll("name = ", ""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:07:37.167

```
String newLine3 = "name = wlr";
String fileName = newLine3.replaceAll("name = ", ""); //fileName = "wlr" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:07:38.597

怎么样：

```
String input = "name = wlr";
String file_name = newLine3.substring(input.indexof("=") + 1).trim(); 
```

对于这个问题，正则表达式似乎有点矫枉过正。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T11:09:28.850

```
String file_name = newLine3.replaceAll("name\\s+=\\s+", ""); 
```

# php - 使用 Facebook FQL 返回点赞最多的评论

> ID：10139625
> 
> 赞同：0
> 
> 时间：2012-04-13T11:02:45.297
> 
> 标签：php, facebook, comments, facebook-fql

我在我的网站上使用 FB 评论插件，并希望在主页上展示最喜欢的评论。

我正在使用 FQL 来获取评论。下面是我到目前为止的一个例子

```
SELECT id, fromid, text, likes, time FROM comment WHERE object_id IN (SELECT comments_fbid FROM link_stat WHERE url ="http://developers.facebook.com/blog/post/472") ORDER BY time DESC LIMIT 400 
```

上述查询返回最新的 400 条评论。如何进一步查询并找到最喜欢的一个？如何修改该查询以获得我正在寻找的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:11:38.750

如果它类似于 SQL（我对 FQL 不太熟悉），试试这个：

```
SELECT id, fromid, text, likes, time FROM comment WHERE object_id IN (SELECT comments_fbid FROM link_stat WHERE url ="http://developers.facebook.com/blog/post/472") ORDER BY likes DESC LIMIT 1 
```

# c# - 使用 itextsharp 为 pdf 添加书签

> ID：10139629
> 
> 赞同：0
> 
> 时间：2012-04-13T11:02:54.583
> 
> 标签：c#

我正在尝试合并pdf并向它们添加书签，我找到了一种按章节添加书签的方法，但是页面上的章节不完整，有没有办法只添加书签，或者使章节不可见.

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-24T21:03:19.563

章节号还是章节号？

如果是章号，就改chapter.numberDepth = 0，如果是章标题，就改chapter.Title = " ";

但是离开 chapter.BookMark.Title = "Whatever I want";

# javascript - 纯粹使用 Javascript 构建集成测试并在浏览器中运行是不是一个坏主意？

> ID：10139631
> 
> 赞同：0
> 
> 时间：2012-04-13T11:03:06.947
> 
> 标签：javascript, jquery, integration-testing

我们正在尝试不同的集成测试方法。我们想到的一种选择是纯粹用 Javascript 构建一些东西并在浏览器中运行。这些测试将使用 jQuery 导航和填充 DOM，然后运行简单的比较以返回 true 或 false。

我们快速构建了一些东西来尝试这个想法，并且效果很好。我们在浏览器的控制台中运行脚本。我们使用 Capybara 和 Selenium 创建了几个相同的测试，并且我们的方法运行速度一样快。

我搜索并找不到其他人这样做，并且想知道是否有什么我没有意识到这使得这是一个坏主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:22:08.710

许多库都这样做：[QUnit](http://docs.jquery.com/QUnit)和[JSUNIT](https://github.com/pivotal/jsunit)是两个例子

但是您可以使用[Selenium WebDriver](http://seleniumhq.org/docs/03_webdriver.html)来完成很多工作，而无需 JavaScript。

# php - 将日期时间与php中的字符串串联

> ID：10139632
> 
> 赞同：4
> 
> 时间：2012-04-13T11:03:09.900
> 
> 标签：php

我正在尝试使用文件名附加数据和时间，但它无法正常工作且没有任何错误：

```
$date = date('Y/m/d H:i:s');
$pdf = $date.'order_sheet.pdf'; 
```

通过此代码，文件没有被下载

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T11:05:56.293

您在文件名中使用斜杠和空格，这不是一个好主意。尝试用其他字符替换它们，如下所示：

```
$date = date('Y_m_d-H-i-s'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:06:15.123

这将在文件名中有特殊字符和空格，这是不允许的。这可能是原因。您应该使用时间戳而不是日期和时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T11:08:49.893

您不能在文件名中使用 /

# ef-code-first - ASP.NET MVC 4 WEBAPI Entity Framework 4.3：从集合中保存“多对多”的最佳方法是什么

> ID：10139634
> 
> 赞同：1
> 
> 时间：2012-04-13T11:03:29.413
> 
> 标签：ef-code-first, many-to-many, asp.net-mvc-4, asp.net-web-api, entity-framework-4.3

我有一个带有 Entity Framework 4.3 的 ASP.NET MVC 4 WEBAPI 项目它在我的 MS SQL DB 中有 3 个表：

Meal MealCategory 类别

第二个表是1和3的连接（多对多连接）。这是我的膳食模型：

```
[Table("Meal")]
public class Meal
{
[Key]
public long MealID { get; set; }
public string MealName { get; set; }
...
public virtual ICollection<Category> Categories { get; set; }
} 
```

这是我的类别模型：

```
[Table("Category")]
public class Category
{
[Key]
public long CategoryID { get; set; }
...
public virtual ICollection<Meal> Meals { get; set; }
} 
```

我首先使用代码。并有一个 DbContext：

```
public class DgDbContext : DbContext

{
    public DbSet<Category> Category { get; set; }
    public DbSet<Meal> Meal { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
      modelBuilder.Entity<Meal>().
        HasMany(c => c.Categories).
        WithMany(p => p.Meals).
        Map(
         m =>
         {
           m.MapLeftKey("MealID");
           m.MapRightKey("CategoryID");
           m.ToTable("MealCategory");
         });
    }
} 
```

我也有一个动作：

```
// POST /api/<controller>/<action>
public HttpResponseMessage PostMeals(IEnumerable<Meal> meals)
{
  ...
} 
```

所以问题是：将我所有的饭菜保存到 DB 并与 Category 和 MealCategory 的所有连接的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T23:11:48.297

你有没有尝试过这样的事情：

```
using(var ctx = new DgDbContext())
{
    foreach(var meal in meals)
    {
        ctx.Meal.Add(meal);
    }
    ctx.SaveChanges();
} 
```

?

# c# - 我如何正确地使 observable 超时？

> ID：10139636
> 
> 赞同：1
> 
> 时间：2012-04-13T11:03:34.237
> 
> 标签：c#, windows-phone-7, system.reactive

使用事件的 observable，我从 Web 服务下载最新天气。我在家里的手机和模拟器上对此进行了测试，效果很好。我带着这个项目去工作，并在那里使用模拟器运行它。现在我不确定它是防火墙还是什么，但它似乎没有天气，它只是永远坐在那里，尝试。所以它让我想到，如果这发生在手机上，那么我需要某种暂停，如果它不能在 10 到 15 秒内得到天气，那就放弃吧。

这是到目前为止的示例代码

```
IObservable<IEvent<MyWeather.GetWeatherCompletedEventArgs>> observable =
          Observable.FromEvent<MyWeather.GetWeatherCompletedEventArgs>(Global.WeatherService, "MyWeather.GetWeatherCompleted").Take(1);

        observable.Subscribe(w =>
        {

            if (w.EventArgs.Error == null)
            {
               // Do something with the weather
            }
        });

        Global.WeatherService.GetWeatherAsync(location); 
```

如果什么都没有发生，我怎样才能让这个在给定时间后安全超时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:19:35.627

你应该使用`FromEventPattern`(not `FromEvent`) 所以我将你的 observable 更改为：

```
var observable =
      Observable
        .FromEventPattern<MyWeather.GetWeatherCompletedEventArgs>(
            Global.WeatherService, 
            "MyWeather.GetWeatherCompleted")
        .Take(1); 
```

然后你可以这样做：

```
var timeout =
    Observable
        .Timer(TimeSpan.FromSeconds(10.0))
        .Select(_ => (EventPattern<MyWeather.GetWeatherCompletedEventArgs>)null);

observable
    .Amb(timeout)
    .Subscribe(w =>
    {
        if (w != null && w.EventArgs.Error == null)
        {
           // Do something with the weather
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:17:41.407

怎么样[`Observable.Timeout`](http://msdn.microsoft.com/en-us/library/hh244283.aspx)？它应该做你想做的，或者？

```
observable.Subscribe(w => ...).Timeout(TimeSpan.FromSeconds(10)).Catch<>(...); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-13T13:23:24.780

尝试在 C# 中使用 Latch

[http://www.itdevspace.com/2009/05/c-latch-implementation.html](http://www.itdevspace.com/2009/05/c-latch-implementation.html)

# ios - 将用户添加到 Asterisk pbx

> ID：10139639
> 
> 赞同：0
> 
> 时间：2012-04-13T11:03:46.950
> 
> 标签：ios

我想将用户添加到 Astrisk 中，我可以手动添加，但我需要以编程方式添加诸如发送 Http 请求之类的东西，或者可能是任何东西，但我担心它应该通过编程方式（如果可能，在目标 c 中，因为它是 iOS 应用程序） . 如果您有任何想法，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:08:57.820

也许您可以从 SQL 服务器中提取数据并将它们注入数据库？Asterisk 似乎支持[MySQL 的 SIP peers](http://www.voip-info.org/wiki/view/Asterisk+sip+mysql+peers)

# prolog - Prolog 后继符号产生不完整的结果和无限循环

> ID：10139640
> 
> 赞同：41
> 
> 时间：2012-04-13T11:03:52.470
> 
> 标签：prolog, infinite-loop, failure-slice, successor-arithmetics, non-termination

我开始学习 Prolog 并首先了解了后继符号。

这就是我发现在 Prolog 中编写 Peano 公理的地方。

请参阅[PDF](http://ssdi.di.fct.unl.pt/flcp/foundations/0910/files/class_02.pdf)的第 12 页：

```
sum(0, M, M).
sum(s(N), M, s(K)) :-
    sum(N,M,K).

prod(0,M,0).
prod(s(N), M, P) :-
    prod(N,M,K),
    sum(K,M,P). 
```

我将乘法规则放入 Prolog。然后我进行查询：

```
?- prod(X,Y,s(s(s(s(s(s(0))))))). 
```

这意味着基本上找到了 6 的因数。

这是结果。

```
X = s(0),
Y = s(s(s(s(s(s(0)))))) ? ;
X = s(s(0)),
Y = s(s(s(0))) ? ;
X = s(s(s(0))),
Y = s(s(0)) ? ;
infinite loop 
```

这个结果有两个问题：

1.  并未显示所有结果，请注意结果 X=6,Y=1 缺失。
2.  它不会停止，除非我 Ctrl+C 然后选择中止。

所以......我的问题是：

1.  这是为什么？我尝试切换“prod”和“sum”。结果代码给了我所有的结果。再说一次，为什么会这样？虽然它仍然是死循环。
2.  如何解决？

我读了关于无限循环的另一个答案。但我很感激有人根据这种情况回答。它对我有很大帮助。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-13T12:51:43.237

如果您想深入研究终止属性，使用[后继算法](/questions/tagged/successor-arithmetics "显示标记为“后继算术”的问题")的程序是一个理想的研究对象：您*先验地*知道它们应该描述什么，因此您可以专注于更多技术细节。您将需要了解几个概念。

# 通用端接

解释它的最简单方法是考虑`Goal, false`. 这终止了当且仅当`Goal`普遍终止。那就是：查看跟踪器是最无效的方法 - 它们只会向您显示单个执行路径。但是您需要一次了解所有这些！当您想要通用终止时，也永远不要看答案，它们只会分散您的注意力。你已经在上面看到了：你得到了三个简洁而正确的答案，然后你的程序才循环。所以更好的“关闭”答案`false`。这消除了所有的干扰。

# 故障切片

您需要的下一个概念是[故障切片](http://www.complang.tuwien.ac.at/ulrich/papers/PDF/#1999-ppdp)。取一个纯单调逻辑程序并输入一些目标`false`。如果生成的故障片没有终止（普遍地），那么原始程序也不会终止。在您的示例中，请考虑：

```
产品（0，M，0）：-**假**。
产品（s（N），M，P）：-
    产品（N，M，K），假，
    总和（K，M，P）。

```

这些`false`目标有助于删除程序中不相关的修饰：剩余部分清楚地向您展示，为什么`prod(X,Y,s(s(s(s(s(s(0))))))).`不终止。它不会终止，因为那个片段根本不关心`P`！您希望第三个参数有助于`prod/3`终止，但该片段向您显示这一切都是徒劳的，因为`P`不会出现在任何目标中。不需要健谈的示踪剂。

通常，要找到最小的故障片并不容易。但是一旦你找到了一个，确定它的终止或非终止属性几乎是微不足道的。一段时间后，你可以用你的直觉想象一个切片，然后你可以用你的理由来检查那个切片是否相关。

失败片的概念如此引人注目的地方在于：如果你想改进程序，你**必须**在上面片段中可见的部分修改你的程序！只要你不改变它，问题就会一直存在。因此，故障片是程序中非常相关的部分。

# 终止推断

这是您需要的最后一件事：像[cTI](http://www.complang.tuwien.ac.at/cti)这样的终止推断器（或分析器）将帮助您快速识别终止条件。看看推断的终止条件`prod/3`和改进的`prod2/3` [这里](http://www.complang.tuwien.ac.at/cti/cgi/cti?texta=sum%280,%20M,%20M%29.%0D%0Asum%28s%28N%29,%20M,%20s%28K%29%29%20:-%0D%0A%20%20%20%20sum%28N,M,K%29.%0D%0A%0D%0Aprod%280,M,0%29.%0D%0Aprod%28s%28N%29,%20M,%20P%29%20:-%0D%0A%20%20%20%20prod%28N,M,K%29,%0D%0A%20%20%20%20sum%28K,M,P%29.%0D%0A%0D%0Aprod2%280,_,0%29.%0D%0Aprod2%28s%28N%29,%20M,%20P%29%20:-%0D%0A%20%20%20sum%28M,%20K,%20P%29,%0D%0A%20%20%20prod2%28N,M,K%29.&nti=yes_plus)！

* * *

编辑：由于这是一个家庭作业问题，我没有发布最终解决方案。但为了清楚起见，这里是迄今为止获得的终止条件：

```
    prod(A,B,C)terminates_if b(A),b(B)。
    prod2(A,B,C)terminates_if b(A),b(B); b(A),b(C)。

```

所以新`prod2/3`的严格比原来的程序好！

现在，由您决定最终程序。其终止条件为：

```
   prod3(A,B,C) 终止_如果 b(A),b(B);b(C)。

```

首先，尝试找到`prod2(A,B,s(s(s(s(s(s(0)))))))`! 我们预计它会终止，但它仍然没有。所以采取程序并手动添加`false`目标！剩下的部分会告诉你关键！

最后提示：您需要添加一个额外的目标和一个事实。

* * *

编辑：根据要求，这里是失败切片`prod2(A,B,s(s(s(s(s(s(0)))))))`：

```
prod2(0,_,0) :-**假**。
产品 2（s（N），M，P）：-
   总和（M，K，P），
   产品 2（N，M，K），假。

总和（0，M，M）。
sum(s(N), M, s(K)) :- **false** , 
    sum(N,M,K)。

```

请注意显着简化的定义`sum/3`。它只说：0加上任何东西就是任何东西。不再。因此，即使是更专业的也会在优雅地终止`prod2(A,0,s(s(s(s(s(s(0)))))))`时循环......`prod2(0,X,Y)`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-18T17:20:19.457

第一个问题（为什么）很容易发现，特别是如果知道[左递归](http://en.wikipedia.org/wiki/Left_recursion)。**在绑定 C时**`sum(A,B,C)` **绑定**A 和 B ，但原始程序 prod(A,B,C) 不使用该绑定，而是在 A,B 未绑定的情况下进行递归。

 **如果我们交换 sum,prod，我们会从 sum 中得到 2 个有用的绑定，用于递归调用：

```
sum(M, K, P) 
```

现在 M 已绑定，并将用于终止左递归。我们可以交换 N 和 M，因为我们知道乘积是可交换的。

```
sum(0, M, M).
sum(s(N), M, s(K)) :-
    sum(N, M, K).

prod3(0, _, 0).
prod3(s(N), M, P) :-
    sum(M, K, P),
    prod3(M, N, K). 
```

请注意，如果我们交换 M,K（即 sum(K,M,P)），当使用 P unknown 调用 prod3 时，我们再次有一个非终止循环，但总和。

```
?- prod3(X,Y,s(s(s(s(s(s(0))))))).
X = s(s(s(s(s(s(0)))))),
Y = s(0) ;
X = s(s(s(0))),
Y = s(s(0)) ;
X = s(s(0)),
Y = s(s(s(0))) ;
X = s(0),
Y = s(s(s(s(s(s(0)))))) ;
false. 
```

**OT**我对 cTI 报告感到困惑：prod3(A,B,C)terminates_if b(A),b(B);b(A),b(C)。**

# cocoa-touch - 如何在两个表格视图之间制作阴影？

> ID：10139643
> 
> 赞同：-1
> 
> 时间：2012-04-13T11:03:54.020
> 
> 标签：cocoa-touch, uitableview, shadow

我有两个表视图控制器。我怎样才能制作这样的阴影？

![在此处输入图像描述](../Images/bf8c20c1177a3f99e6b53ffc184d6d85.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:12:30.630

看看 CoreAnimation 框架中的 CALayer 类。这是一个很好的示例教程：http: [//nachbaur.com/blog/fun-shadow-effects-using-custom-calayer-shadowpaths](http://nachbaur.com/blog/fun-shadow-effects-using-custom-calayer-shadowpaths)

然后将阴影应用到正确的 tableview（但是，可能需要将 tableview 嵌入到容器视图中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:07:10.567

如果您不了解核心图形，最简单的方法是制作渐变 png 并将其放置/调整到您的单元格右侧，在其他所有内容下方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:16:48.280

在 UIBuilder 中，选择包含表的视图。您可能需要玩弄您选择的确切级别。检查器的最右侧是视图效果检查器。在那里您可以设置阴影，包括模糊半径和偏移量。如果您只设置阴影而没有模糊半径或偏移量，您将看不到阴影，因为它会直接在您的桌子后面。

![在此处输入图像描述](../Images/3462b9f0bde51314d00fd32f0910a250.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T12:31:40.357

您可以使用 QuartzCore 轻松创建投影。

代码：

```
#import <QuartzCore/QuartzCore.h>

UIView *myView = <your view here>
myView.layer.shadowOffset = CGPointMake(5, 5);
myView.layer.shadowRadius = 5.0f; 
```

那应该这样做。

请注意，在设置 shadowOffset 时，使用正值会下降到右侧和底部，使用负值会相反。

# c# - 将拇指限制在椭圆区域

> ID：10139646
> 
> 赞同：2
> 
> 时间：2012-04-13T11:04:07.447
> 
> 标签：c#, wpf, user-controls, slider, area

我对 WPF 很陌生，所以我正在以艰难（但有趣）的方式学习其中的大部分内容。我正在构建一个类似 HSV 的颜色选择器用户控件，并且希望获得我用作“选择器”的拇指仅限于椭圆区域（实际上是圆形）的行为。当移到外面时，选择器应该粘在一边，根本不动。我相信这是最常见的 GUI 行为，所以它应该是这样的。随意提出更好的行为！

是否有一个常见的、已知的和推荐的解决方案，或者是否每个人每次都重新发明轮子？

关于如何解决这个问题的任何好主意？

代码隐藏：

```
public partial class HSVColorPicker : UserControl
{
    public HSVColorPicker()
    {
        InitializeComponent();
    }

    void onDragDelta(object sender, DragDeltaEventArgs e)
    {
        Canvas.SetLeft(thumb, Canvas.GetLeft(thumb) + e.HorizontalChange);
        Canvas.SetTop(thumb, Canvas.GetTop(thumb) + e.VerticalChange);
    }
} 
```

XAML：

```
<Grid>
    <Canvas x:Name="canvas">
        <Image x:Name="wheel" Source="colorwheel.png" Width="300" Margin="5,5,0,0"/>
        <Thumb Name="thumb" DragDelta="onDragDelta" Canvas.Left="104" Canvas.Top="68" Template="{StaticResource thumbTemplate}" />
    </Canvas>
</Grid> 
```

当我在这里时，拇指总是在光标后面拖动，还有其他方法可以创建它吗？正如我所说，我完全是 WPF 和 GUI 制作的新手，所以也许有一些我没有想到的明显解决方案；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:06:23.863

我做了一些重新思考并完全放弃了拇指，而是使用了一个虚拟圆圈（名为拇指）。现在我在画布上听，mousedown，mouseup 和 mousemove，并确定什么应该是可能的，什么是不可能的。这有一个很好的功能，即当鼠标移出区域时，拇指会粘在色轮边缘，但该区域比色轮稍大，以便于在边界上获得一个点。不完整，但它解决了我的问题，所以我现在发布它。

```
 private bool mousePressed { get; set; }
    private bool mouseWithinArea { get; set; }
    private Point circleMiddlePoint { get; set; }
    private int margin;
    private double mPX;
    private double mPY;
    private double localXpos;
    private double globalXpos
    {
        get
        {
            return localXpos + mPX;
        }
        set
        {
            localXpos = value - mPX;
            Canvas.SetLeft(thumb, value);
        }
    }
    private double localYpos;
    private double globalYpos
    {
        get
        {
            return mPY - localYpos;
        }
        set
        {
            localYpos = mPY - value;
            Canvas.SetTop(thumb, value);
        }
    }

    public HSVColorPicker()
    {
        InitializeComponent();
        wheel.Width = 300;
        margin = 15;
        mPX = 150+margin;
        mPY = 150+margin;
        circleMiddlePoint = new Point(mPX, mPY);
    }

    private void CalcPosition(double X, double Y)
    {
        double radius = wheel.Width / 2.0;
        double vectorX = X - mPX;
        double vectorY = Y - mPY;
        double distance = Math.Sqrt(vectorX * vectorX + vectorY * vectorY);
        if (distance > radius)
        {
            double factor = radius / distance;
            vectorX *= factor;
            vectorY *= factor;
        }
        globalXpos = vectorX + mPX;
        globalYpos = vectorY + mPY;
    }

    private void wheel_MouseDown(object sender, MouseButtonEventArgs e)
    {
        if (mouseWithinArea)
        {
            mousePressed = true;
            Point mousePoint = e.GetPosition(this);
            CalcPosition(mousePoint.X, mousePoint.Y);
        }
    }

    private void wheel_MouseMove(object sender, MouseEventArgs e)
    {
        Point mousePoint = e.GetPosition(this);
        double relX = mousePoint.X - mPX;
        double relY = mPY - mousePoint.Y;
        if (mouseWithinArea)
        {
            if (Math.Sqrt(relX * relX + relY * relY) > 150+margin)
            {
                mouseWithinArea = false;
            }
            else
            {
                if (mousePressed)
                {
                    CalcPosition(mousePoint.X, mousePoint.Y);
                }
            }
        }
        else
        {
            if (Math.Sqrt(relX * relX + relY * relY) < 150+margin)
            {
                mouseWithinArea = true;
                if (mousePressed)
                {
                    CalcPosition(mousePoint.X, mousePoint.Y);
                }
            }
        }
    }

    private void wheel_MouseUp(object sender, MouseButtonEventArgs e)
    {
        mousePressed = false;
    }
}

<Canvas x:Name="canvas" Background="Transparent" MouseDown="wheel_MouseDown" MouseMove="wheel_MouseMove" MouseUp="wheel_MouseUp" Width="330" Height="330">
        <Image x:Name="wheel" Source="colorwheel.png" Width="300" Margin="15,15,0,0"  />
        <Ellipse Margin="0,0,0,0"
                x:Name="outerEll"
                Stroke="Silver"
                StrokeThickness="15" 
                Width="330"
                Height="330"/>
        <Ellipse Name="thumb" Stroke="Black" Fill="Silver" Canvas.Left="150" Canvas.Top="150" Width="15" Height="15" Margin="-12" />
    </Canvas> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:42:14.813

您希望拇指的中心位于色轮内。

所以，你的拇指中心和你的色轮中心（也就是你的画布中心）之间的距离必须小于或等于你的色轮的半径（也就是你的画布边的一半） ）。

未经测试的c#代码：

```
void onDragDelta(object sender, DragDeltaEventArgs e)
{
    double radius = canvas.RenderSize.Width / 2.0;
    double thumbCenterX = Canvas.GetLeft(thumb) - thumb.RenderSize.Width + e.HorizontalChange;
    double thumbCenterY = Canvas.GetTop(thumb) - thumb.RenderSize.Height + e.VerticalChange;
    double colorWheelCenterX = canvas.RenderSize.Width / 2.0;
    double colorWheelCenterY = canvas.RenderSize.Height / 2.0;
    double vectorX = thumbCenterX - colorWheelCenterX;
    double vectorY = thumbCenterY - colorWheelCenterY;
    double distance = Math.Sqrt(vectorX * vectorX + vectorY * vectorY);
    if(distance > radius) {
        double factor = radius / distance;
        vectorX *= factor;
        vectorY *= factor;
    }
    Canvas.SetLeft(thumb, colorWheelCenterX + vectorX - thumb.RenderSize.Width / 2.0);
    Canvas.SetTop(thumb, colorWheelCenterY + vectorY - thumb.RenderSize.Height / 2.0);
} 
```

# doxygen - 组记录一组枚举成员

> ID：10139653
> 
> 赞同：4
> 
> 时间：2012-04-13T11:04:47.097
> 
> 标签：doxygen

是否可以记录一组枚举值，类似于此（此示例不起作用）：

```
enum MyEnum
{
  MYENUM_FIRST,
//@{
//@name These two members' description
  MYENUM_SECOND,
  MYENUM_THIRD,
//@}

  MYENUM_FOURTH, ///third member documentation
  MYENUM_FIFTH
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:43:28.387

突出的两件直接的事情：

*   你没有记录`MYENUM_SECOND`，或者`MYENUM_THIRD`因为你没有用有效的 doxygen 注释包装它们：你应该写`///@{`而不是`//@{`.

*   您的文档`MYENUM_FOURTH`应该是

    ```
    ///< third member documentation 
    ```

    否则你正在记录`MYENUM_FIFTH`而不是`MYENUM_FOURTH`.

我可以使用以下代码获取两者`MYENUM_SECOND`的文档`MYENUM_THIRD`

```
enum MyEnum
{
  MYENUM_FIRST,
  ///@{
  /// These two members' description
  MYENUM_SECOND,
  MYENUM_THIRD,
  ///@}

  MYENUM_FOURTH, ///< third member documentation
  MYENUM_FIFTH
}; 
```

并通过`DISTRIBUTE_GROUP_DOC = YES`在配置文件中进行设置。请注意，我`\name`已从您的示例中删除了该命令。

# objective-c - 如何仅获取我的应用程序的 Twitter 提要？

> ID：10139655
> 
> 赞同：1
> 
> 时间：2012-04-13T11:05:02.710
> 
> 标签：objective-c, ios4, ios5, twitter, twitter-oauth

我想获取我的 iPhone 应用程序的用户发布到**我的 twitter 应用**程序的提要。

我找到了这个网址 - [http://search.twitter.com/search.json?q=serachKeyword&result_type=recent](http://search.twitter.com/search.json?q=serachKeyword&result_type=recent)

这将返回给我们一个字典结果，其中包含与**serachKeyword**匹配的推文数组。

但我只想获取通过我的**twitter 应用**发布的提要。

有没有办法只获取我的 twitter 应用程序提要而不是全部？我可以**过滤**搜索结果或类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:31:36.120

[Twitter API](https://dev.twitter.com/docs/using-search)说是的，您可以按来源过滤。

搜索运算符部分说：

> 新闻来源：tweet_button | 包含“新闻”并通过推文按钮输入

来源部分说：

> • 只能与关键字参数组合。如果您不包含关键字，您将收到带有以下消息的 HTTP 403 错误：{"error":"You must enter a query."}。
> 
> • 通过使用_ 而不是空格来支持多字源。例如，源“Tweet Button”应输入为源：tweet_button

因此，您必须有一个关键字参数，如果您的客户端名称中有空格，请用下划线替换它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T00:58:27.963

没有完整的方法可以做到这一点。正如@JoePasq 回答的那样，您可以搜索来源，但您必须包含关键字，并且 Twitter 搜索会根据质量和相关性进行过滤。

> *   搜索关注的是相关性而不是完整性。这意味着搜索结果中可能会丢失一些推文和用户。
>     
>     
> *   Search API 不是所有推文的完整索引，而是最近推文的索引。

您应该做的是让您的应用程序在每次用户使用`status_id`. 通过这种方式，您可以存储从您的应用发布的所有推文的完整数据库，并根据需要查询数据。

# sql-server-2008 - 加入条件检索不需要的答案

> ID：10139656
> 
> 赞同：0
> 
> 时间：2012-04-13T11:05:08.193
> 
> 标签：sql-server-2008

我有2张桌子，如下

```
select Event_ID,[Gross Salary] from tblEar where Event_ID=14 
```

结果：

```
Event_ID  Gross Salary
14        56128
14        51984
14        42028 
```

和：

```
select EventId, [Order Date],Amount from tblBudget where EventId=14 
```

结果：

```
EventId Order Date Amount
14      10/10/2011 20000
14      10/10/2011 20000
14      20/03/2012 2500
14      02/04/2012 -50000 
```

如果我在这两个表上写一个连接语句来获取它正在检索重复的记录。我使用了 Distinct But no Positive Result。

```
select DISTINCT tba.[Order Date],ISNULL(tba.Amount,0),ISNULL(te.[Gross Salary],0) from tblBudget tba 
                     join
                         tblEar  te on tba.EventId=te.Event_ID  where tba.EventId=14 
```

我得到以下答案：

```
Order Date (No column name) (No column name)
2011-10-10 20000.00         42028.00
2011-10-10 20000.00         51984.00
2011-10-10 20000.00         56128.00
2012-03-20 2500.00          42028.00
2012-03-20 2500.00          51984.00
2012-03-20 2500.00          56128.00
2012-04-02 -50000.00        42028.00
2012-04-02 -50000.00        51984.00
2012-04-02 -50000.00        56128.00 
```

任何人都可以展示获取准确数据的方法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:20:30.877

我猜您想对数据进行分组并汇总金额：

```
SELECT tba.[Order Date], SUM(tba.Amount), SUM(te.[Gross Salary])
FROM tblBudget tba 
JOIN tblEar te on tba.EventId = te.Event_ID
WHERE tba.EventId = 14
GROUP BY tba.[Order Date] 
```

# sql-server - 用于在 SQL Server 中查找顶部行的 SQL 查询

> ID：10139662
> 
> 赞同：1
> 
> 时间：2012-04-13T11:05:39.803
> 
> 标签：sql-server

在 SQL Server 中，我试图获得前 5 名的薪水。

我有薪水

```
5000
5000
4500
4500
3000
2000 
1000
500
400 
```

我想得到

```
5000
5000
4500
4500
3000
2000
1000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:07:00.470

```
SELECT TOP 5 salary FROM your_table
ORDER BY salary DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T11:31:18.450

如果您想获得前 5 名不同的薪水（无论相同金额出现多少次），您需要使用`DENSE_RANK()`排名函数和 CTE 来实现：

```
DECLARE @salaries TABLE (salary DECIMAL(18,4))

INSERT INTO @salaries VALUES(5000)
INSERT INTO @salaries VALUES(5000)
INSERT INTO @salaries VALUES(4500)
INSERT INTO @salaries VALUES(4500)
INSERT INTO @salaries VALUES(3000)
INSERT INTO @salaries VALUES(2000)
INSERT INTO @salaries VALUES(1000)
INSERT INTO @salaries VALUES(500)
INSERT INTO @salaries VALUES(400)

;WITH SalariesRanked AS
(
    SELECT 
        Salary, 
        SalaryNumber = DENSE_RANK() OVER(ORDER BY Salary DESC)
    FROM    
        @salaries
)
SELECT salary
FROM SalariesRanked 
WHERE SalaryNumber <= 5 
```

这会产生如下输出：

```
salary
5000.0000
5000.0000
4500.0000
4500.0000
3000.0000
2000.0000
1000.0000 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T11:30:58.343

```
select salary
from
  (
    select salary,
           dense_rank() over(order by salary desc) as rn
    from YourTable
  ) as T
where rn <= 5 
```

试用[SE-Data](https://data.stackexchange.com/stackoverflow/query/66655)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T11:07:05.257

看看使用[TOP (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms189463.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T14:28:04.510

```
SELECT TOP 5 Salary
FROM [Table]
GROUP BY Salary
ORDER BY Salary DESC 
```

* * *

您需要对查询进行分组以避免重复的薪水。

# c++ - 简单的位级序列化

> ID：10139664
> 
> 赞同：1
> 
> 时间：2012-04-13T11:05:41.677
> 
> 标签：c++, boost, binary-serialization

我正在寻找一个 C++ API，以*方便**地将任意位大小的（用户定义的）类型有效地*序列化/反序列化为包含一组位的某个结构（最好是模板类）。我相信`boost::dynamic_bitset`这是一个好的开始，但它不包含用于附加内置类型等的函数/运算`uint8_t`符`uint16_t`。

我希望它像下面的例子一样工作

```
boost::dynamic_bitset bs;
bs.append((uint8_t)123);
bs.append((uint16_t)12345, big_endian); 
```

流操作符也应该支持与状态相关的字节序行为：

```
bs << (uint8_t)(123);
bs << little_endian;
bs << (uint16_t)(12345); // serialized as little_endian
bs << big_endian; 
```

我也知道 Boost.Serialization 和 Boost.Endian（在 Boost Sandbox 中）。我希望将类似的东西扩展到位级别。

我相信`boost::dynamic_bitset`的成员函数

```
void append(Block block); 
```

和

```
template <typename BlockInputIterator>
void append(BlockInputIterator first, BlockInputIterator last); 
```

对于大多数用户来说，级别太低了。我想它应该在这些新`append`功能中重用。为了优化更多的表达式模板，在将它们附加到`dynamic_bitset`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:29:57.407

我不知道有任何库，但自己编写 BitBufferReader/Writer 并不难，它完全符合您的要求。

# heroku - heroku 部署与 play framework 1.2.4 和自己的安全模块

> ID：10139666
> 
> 赞同：2
> 
> 时间：2012-04-13T11:05:51.320
> 
> 标签：heroku, playframework, playframework-1.x

我有一个播放框架应用程序（v1.2.4）要部署到heroku。

我通过从本地 PLAY_HOME 复制安全模块将安全模块添加到我的游戏应用程序中。这样我就可以更改安全代码以满足我的项目需求。

因此我的文件夹结构看起来像

*   工作根/
    *   /play-project/ -> 包含所有 play、libs 和 conf/application.conf
    *   /secure/ -> 本地安全模块的副本（& 修改，这就是我复制的原因。）

在工作根目录下，我做了以下 git 操作：

```
git init
git add. 
git commit -m 'first commmit with customised secure' 
```

**请注意，我不只是从 play 应用程序文件夹（在 play-project 中）提交，而是从更高级别提交，以便自定义安全应用程序也被提交。**

然后我通过
heroku create -s cedar --buildpack [https://github.com/heroku/heroku-buildpack-pl创建了 heroku 应用程序](https://github.com/heroku/heroku-buildpack-pl)

这一切都奏效了。

推送代码并将其部署在 heroku 我做了
git push heroku master

这没有用，〜哎呀。conf/routes 或 conf/application.conf 丢失。

这是因为它们不存在，而是低于一个级别。我希望能够告诉 Heroku 这是一个播放应用程序，application.conf 位于名为 [play-project] 的“文件夹”中，并且位于当前工作目录中。

有人可以帮帮我吗？非常感谢亲切的问候

——拉纳达斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T12:56:23.043

默认的 Play buildpack 会查找这些文件。您可以分叉构建包以使其满足您的需求，也可以切换到更标准的结构。要做你想做的事，只需使用标准的 Play 项目布局（在根目录中使用 Play 应用程序）。然后对于安全模块，只需将其源代码复制到`modules/secure`目录中。然后 Play 将使用您的模块版本。

# time - 时间校正 Verlet 积分和太大的时间步长

> ID：10139670
> 
> 赞同：4
> 
> 时间：2012-04-13T11:06:03.813
> 
> 标签：time, physics, collision, verlet-integration

我使用在这里找到的时间校正 Verlet 集成：[http ://www.gamedev.net/page/resources/_/technical/math-and-physics/a-simple-time-corrected-verlet-integration-method-r2200](http://www.gamedev.net/page/resources/_/technical/math-and-physics/a-simple-time-corrected-verlet-integration-method-r2200)

但是当我的球在墙上（水平墙，球在上面并且加速度指向下方）一段时间后，我的游戏无法以正确的方式识别碰撞并且球向下。如果我将固定上限设置为 1/60 之类的 deltatime，它似乎可以工作。

我认为问题在于时间步长太大。但是进行时间校正的verlet积分是为了避免太大的时间步长，对吗？如果是，为什么我需要时间上限？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-21T07:04:30.553

文章中给出的等式是错误的。当我推导出它时，我得到了这个：

```
x = x + (x – xl)*h/hl + a*h*(h + hl)/2 
```

而不是他的，就是这样：

```
x = x + (x – xl)*h/hl + a*h^2 
```

这是一个使用他的图表的例子：http: [//i.stack.imgur.com/TL6HT.png](http://i.stack.imgur.com/TL6HT.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T12:16:41.750

据我了解，时间校正的 verlet 集成仅在您的帧率波动时才有帮助，但如果您的基本帧率太低，它将无济于事。

# wcf - 为什么使用 WCF 服务的多个终结点时，以下代码会返回错误？

> ID：10139671
> 
> 赞同：0
> 
> 时间：2012-04-13T11:06:10.720
> 
> 标签：wcf, c#-4.0

我创建了一个多端点 WCF 服务并使用它，它工作正常。

但是当我试图关闭服务客户端时，就会出错。

这就是我创建客户端对象并为单端点 WCF 服务处理其工作正常的方式

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        ICardPrintingService Service = null;
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Service = new CardPrintingServiceClient();
            var response = this.Service.GetCardData(new GetCardDataRequest { NIK = 6666620501740003 });
            try
            {
                ((CardPrintingServiceClient)Service).Close();
            }
            catch (Exception ex)
            {
                MessageBox.Show("error");
            }
        }
    }
} 
```

这将在关闭带有错误消息的连接时进入 catch 块

> 远程端点不再识别此序列。这很可能是由于远程端点上的中止。wsrm:Identifier 的值不是已知的序列标识符。可靠会话出现故障。

有人能告诉我为什么吗？

非常感谢广告

拉加文德拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:52:30.473

这里有什么需要铸造的。

```
((CardPrintingServiceClient)Service).Close(); //pls explain this. 
```

你可以在 finally 块中尝试这个。

```
if (Service.State != System.ServiceModel.CommunicationState.Closed)
  {
     Service.Abort();
  } 
```

# javascript - 在 jquery/javascript 中单击时将项目移动到轮播的中间

> ID：10139677
> 
> 赞同：1
> 
> 时间：2012-04-13T11:06:43.080
> 
> 标签：javascript, jquery, css, carousel

我做了一个运行良好的轮播，但现在我想让我点击的项目移动到轮播的中间，即轮播应该移动直到我点击的项目居中。

在这里查看我的工作：http: [//jsfiddle.net/HkTks/6/](http://jsfiddle.net/HkTks/6/)

我正在使用，`animate()`但不知道是否应该使用`left`,`marginLeft`或`scrollLeft`property。我真的被困住了，因为我不知道该做什么逻辑，我什至不知道从哪里开始。请给我一些启示。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:41:09.510

我以前做过类似的事情，很挑剔，但只是几笔钱。不过，没有时间在您的代码中对其进行测试。

> $('.iconsList li').click(function(){
> 
> // 接下来的两个应该是一行
> 
> var newLeftPos = 0 -(($(this).width() + $(this).css('margin-right')) * ($(this).index + 1)) + ($(this).parents ('.iconsList').width() / 2);
> 
> $('.iconsList li').animate({'left', newLeftPos + 'px'},400);
> 
> })

# javascript - Freemarker、列表索引和计数条件

> ID：10139685
> 
> 赞同：6
> 
> 时间：2012-04-13T11:07:20.843
> 
> 标签：javascript, html, freemarker

我正在 Freemarker 模板中编写一个 JS 对象数组。但我有严重的问题，不包括最后一项后的逗号。

```
<#assign pages = module.pages.page>
wh.pages = [
<#list pages as page>
{"name" : "${page.@name}", "href" : "${page.@href}"}
<#if (index+1) < pages?size>,</#if>
</#list>
] 
```

所以在列表重复期间，当 index + 1 小于 pages 变量的长度/大小时，它应该写一个逗号。所以当它等于大小时，它应该省略逗号。

那么如何实现呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-07-19T23:02:11.697

尝试`item_has_next`

在您的示例中：

```
<#if pages_has_next>,</#if> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-13T11:29:45.223

索引必须以您的项目名称为前缀。例如：

```
<#if (index+1) < pages?size>,</#if> 
```

本来应该：

```
<#if (page_index+1) < pages?size>,</#if> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-08T14:28:04.103

这可能是一个简单的答案

```
<#sep>,</#sep> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-06T10:49:33.770

我有一个项目列表，我将使用它创建一个带有多个参数的函数，并带有逗号。我的代码如下：

```
def ${function.name}(<#list function.params as param> ${param.name}:${param.paramType}<#if function.params?size != (param?index+1)>,</#if> </#list>) 
```

它将生成以下输出：

```
 def func1( input1:String,  input2:String ) 
```

# xcode4 - Lion 中缺少 webkit 框架

> ID：10139694
> 
> 赞同：2
> 
> 时间：2012-04-13T11:07:56.360
> 
> 标签：xcode4, webkit, osx-lion

我正在尝试将 webkit 框架添加到 Xcode，我遵循的步骤是

选择目标，转到“构建阶段”选项卡，打开“将二进制文件与库链接”使用 + 添加库

但在 MacOSX 10.7(Lion) 中，我无法在框架列表中看到 webkit.framework。

任何想法它驻留在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T13:16:18.150

我也在 Lion 上使用 Xcode 4.3.2 并且我的 webkit 框架似乎已经到位，请检查以下目录以确保您的框架没有以一种或另一种方式被删除。如果它不在此路径，您可能需要重新安装 Xcode。

> /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/System/Library/Frameworks/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:12:59.320

当我从 Snowleopard 升级到 Lion 时，我遇到了这个问题。

我必须使用 IosSDK 安装新版本的 Xcode (4.3)。

# asp.net - 使用 DotenetOpenAuth 的跨域 SSO

> ID：10139697
> 
> 赞同：0
> 
> 时间：2012-04-13T11:08:19.457
> 
> 标签：asp.net, openid, dotnetopenauth

我已经集成`DotenetOpenAuth`到使用谷歌帐户登录。
它的工作完美。我可以用它实现这个吗？
一旦用户登录，`site1.com`如果用户浏览到`site2.com`该用户，则会自动登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:12:18.647

DotNetOpenAuth 包括一个`Samples`目录。我相信有些项目可以完全按照您的意愿进行`OpenIdWebRingSsoProvider`。`OpenIdWebRingSsoRelyingParty`但是，您必须实现自己的中央 SSO 提供程序。

# c# - ASP.NET Web Api 作为一个解决方案中的独立项目

> ID：10139699
> 
> 赞同：8
> 
> 时间：2012-04-13T11:08:22.060
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

如果我想使用 WebAPI 作为服务来连接到不同服务器上的多个数据库并检索我的 MVC 应用程序将使用的数据，那么最好的方法是什么？

我不希望 ApiController(s) 与我的 MVC 项目在同一个项目中，所以我需要添加一个新的 WebApi 项目（删除所有除了控制器和模板添加的东西以拥有一个干净的项目），我的 MVC 应用程序会参考吗？

这是我用来学习 WebAPI 的教程/博客文章列表：

**ASP.NET Web API - 带有可下载示例代码的截屏系列** [http://weblogs.asp.net/jgalloway/archive/2012/03/16/asp-net-web-api-screencast-series-with-downloadable-sample-代码部分 1.aspx](http://weblogs.asp.net/jgalloway/archive/2012/03/16/asp-net-web-api-screencast-series-with-downloadable-sample-code-part-1.aspx)

**使用 HttpClient 使用 ASP.NET Web API 服务**

[http://debugmode.net/2012/03/03/creating-first-http-service-using-asp-net-web-api-part1-of-many/](http://debugmode.net/2012/03/03/creating-first-http-service-using-asp-net-web-api-part1-of-many/) [http://debugmode.net/2012/03/ 07/消费-asp-net-web-api-service-using-httpclient-part2-of-many/](http://debugmode.net/2012/03/07/consuming-asp-net-web-api-service-using-httpclient-part2-of-many/)

**使用 ASP.NET Web API 和 MVC4 的 CRUD 操作**

[http://www.dotnetglobe.com/2012/03/crud-operation-using-aspnet-web-api-in.html](http://www.dotnetglobe.com/2012/03/crud-operation-using-aspnet-web-api-in.html) http://www.dotnetglobe.com/2012/03/crud-operation-using-aspnet -web-api-in_28.html

**为 ASP.Net Web API oData 服务创建一个 .Net 可查询客户端** [http://blog.petegoo.com/index.php/2012/03/11/creating-a-net-queryable-client-for-asp-net- web-api-odata-服务/](http://blog.petegoo.com/index.php/2012/03/11/creating-a-net-queryable-client-for-asp-net-web-api-odata-services/)

**使用 HttpClient 使用 ASP.NET Web API REST 服务** [http://www.johnnycode.com/blog/2012/02/23/sumption-your-own-asp-net-web-api-rest-service/](http://www.johnnycode.com/blog/2012/02/23/consuming-your-own-asp-net-web-api-rest-service/)

**ASP.NET Web API 的客户端支持** [https://msmvps.com/blogs/theproblemsolver/archive/2012/03/13/client-side-support-with-the-asp-net-web-api.aspx](https://msmvps.com/blogs/theproblemsolver/archive/2012/03/13/client-side-support-with-the-asp-net-web-api.aspx)

**创建和使用 ASP.Net Web API REST 服务 - MVC4** [http://www.askamoeba.com/Opensource/Opensourcedetail/144/Create-and-Consume-ASP-Net-Web-API-REST-Services-MVC4](http://www.askamoeba.com/Opensource/Opensourcedetail/144/Create-and-Consume-ASP-Net-Web-API-REST-Services-MVC4)

**使用 MediaTypeFormatter 和 OData 支持通过 ASP.NET Web API 构建和使用 REST 服务**

[http://robbincremers.me/2012/02/16/building-and-sumption-rest-services-with-asp-net-web-api-and-odata-support/](http://robbincremers.me/2012/02/16/building-and-consuming-rest-services-with-asp-net-web-api-and-odata-support/)

**将 JSON.NET 与 ASP.NET Web API 结合使用**

[http://blogs.msdn.com/b/henrikn/archive/2012/02/18/using-json-net-with-asp-net-web-api.aspx](http://blogs.msdn.com/b/henrikn/archive/2012/02/18/using-json-net-with-asp-net-web-api.aspx)

**在 ASP.NET Web API 中为逗号分隔值 (CSV) 格式创建自定义 CSVMediaTypeFormatter**

[http://www.tugberkugurlu.com/archive/creating-custom-csvmediatypeformatter-in-asp-net-web-api-for-comma-separated-values-csv-format](http://www.tugberkugurlu.com/archive/creating-custom-csvmediatypeformatter-in-asp-net-web-api-for-comma-separated-values-csv-format)

**在 ASP.NET Web API 中实现 CORS 支持**

[http://blogs.msdn.com/b/carlosfigueira/archive/2012/02/20/implementing-cors-support-in-asp-net-web-apis.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2012/02/20/implementing-cors-support-in-asp-net-web-apis.aspx)

**我如何看待 Web API**

[http://thedatafarm.com/blog/asp-net/how-i-see-web-api/](http://thedatafarm.com/blog/asp-net/how-i-see-web-api/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T11:55:21.843

您可以使用完全不同的项目来托管您的 Web API 控制器。然而在这种情况下，您需要考虑部署。

Web API 只是一个 Web 项目。它将有自己的配置文件。它很可能会在自己的工作进程中运行（取决于您如何部署它）。

因此，如果您将 Web API 划分出来，您将获得更大的灵活性，但最终可能会复制大量配置。

我的建议是，如果您这样做，请确保两个项目都与相同的基础服务项目通信。如果此 Web API 可能被第三方使用，那么分区也是有意义的。

# android - 广播接收器允许的端口号？

> ID：10139703
> 
> 赞同：0
> 
> 时间：2012-04-13T11:08:42.257
> 
> 标签：android, sms, broadcastreceiver

谁能告诉我我的应用程序的广播接收器可以使用**哪些端口号？**

实际上，我的应用程序应该**在自定义端口上接收 SMS**，但问题是我有另一个应用程序也在侦听不同的端口号（**第一个应用程序在****端口 31101**上侦听，**第二个应用程序**在**端口 8905**上侦听）。为了确认收到短信，我在通知面板中创建了一个通知。（对于每个应用程序）。

**现在的问题是，我使用sendDataMessage()**（SMSManager）向我的第二个应用程序发送数据 SMS ，以及我的第二个应用程序的通知，即使我的第一个应用程序的通知显示在通知面板中。

谁能告诉我为什么会发生这种情况以及问题的解决方案（或解决方法）是什么？

提前致谢。

# ejb - 我应该实现自己的 JCA 适配器来访问文件系统吗？还是使用现有的？

> ID：10139706
> 
> 赞同：2
> 
> 时间：2012-04-13T11:08:50.337
> 
> 标签：ejb, weblogic, adapter, jca

我正在 Weblogic 上进行 Java EE 开发，我的 EJB 之一需要处理来自文件的数据。由于不建议直接从 EJB 访问文件系统，我认为需要一个 JCA 适配器。

有一些创建JCA适配器的例子，但我想知道我是否需要自己实现它。如果有一些实现良好的 JCA 适配器，我想我可以通过做一些配置来利用它？

Oracle® 融合中间件似乎提供了一些 JCA 适配器，称为“技术适配器”。我可以通过一些配置来使用它们吗？还是我必须按照 JCA 规范开发自己的适配器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T00:45:27.533

没有必要重新发明轮子。Oracle 现有的文件系统适配器应该可以满足您的需要。

但是，您仍然需要作为 JCA 客户端与其交互。

# realbasic - Realbasic：如何在特定文件夹中创建文件？

> ID：10139715
> 
> 赞同：1
> 
> 时间：2012-04-13T11:09:45.230
> 
> 标签：realbasic

我认为我的问题很简单，但我找不到解决方案。

我想在位于应用程序文件 (MacOS) 附近的文件夹中创建一个文件。

要创建一个新文件夹：

```
dim fi as FolderItem = getFolderItem( "MyFolder" )
fi.CreateAsFolder 
```

现在我需要`FolderItem`为这个文件夹中的文件获取一个。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T13:14:30.680

这会让你非常接近你想要的。

```
dim fi as FolderItem = getFolderItem( "MyFolder" )
if fi.exists = false then
  fi.CreateAsFolder
end

dim fChild as folderitem = fi.child("someFile")
if fChild.exists = false then
  //Do something like create it.
  //Look at TextOutputStream or similar
else
  //Already exists.  Open it?
end 
```

# javascript - 水平自定义滚动条 - 不工作 - 浏览器未设置 div#news1 总宽度

> ID：10139716
> 
> 赞同：0
> 
> 时间：2012-04-13T11:09:47.230
> 
> 标签：javascript, jquery, javascript-events

我正在为我目前正在开发的网站构建水平和垂直滚动条。垂直的效果很好，没有问题，而且我还设法合并 jquery 来控制它的动画。问题在于水平滚动条。为了控制它，我需要一个重要的数据：div#news1 内容的总长度（在函数“mexer”的“comp”变量中使用）。但是浏览器只返回 clientHeight，它与它的容器 (div#cont1) 相同。我需要浏览器自动正确地生成它，因为我的网站将插入动态数据（PHP）。为什么会这样？我做错了什么？我该如何解决？

下面是测试文件的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<script src="JS/jquery-1.7.2.min.js"></script>
<style type="text/css">

.container {
    width:250px;
    height:250px;
    overflow:hidden;
    float:left;
    border:3px solid #666;
}

.container1 {
    width:400px;
    height:125px;
    overflow:hidden;
    border:3px solid #666;
}
.botao {
    border:3px solid #666;
    background-color:#CCC;
    padding:3px 3px 3px 3px;
    color:#FFFFFF;
    font-family:Arial, Helvetica, sans-serif;
    cursor:pointer;
}
</style>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Untitled Document</title>
</head>

<body>
<div class="container" id="cont">
<div id="news" style="position:relative">
<p><img src="a6.jpg" height="125" width="250" /></p>
<p><img src="a6.jpg" height="125" width="250" /></p>
<p><img src="a6.jpg" height="125" width="250" /></p>
<p><img src="a6.jpg" height="125" width="250" /></p>
<p><img src="a6.jpg" height="125" width="250" /></p>
<p><img src="a6.jpg" height="125" width="250" /></p>
</div>
</div>
<p><span id="botao1" onClick="mexe(1)" class="botao">Para cima</span></p>
<p><span id="botao2" onClick="mexe(2)" class="botao">Para baixo</span></p>

<div class="container1" id="cont1" style="float:left">
<div id="news1" style="position:relative">
<div style="float:left"><img src="fotosdojoao/1.png" height="125" width="250"></div>
<div style="float:left"><img src="fotosdojoao/2.png" height="125" width="250"></div>
<div style="float:left"><img src="fotosdojoao/3.png" height="125" width="250"></div>
<div style="float:left"><img src="fotosdojoao/4.png" height="125" width="250"></div>
</div>
</div>
<p><span id="botao3" onClick="mexer(1)" class="botao">Esquerda</span></p>
<p><span id="botao4" onClick="mexer(2)" class="botao">Direita</span></p>
<script type="text/javascript">
var topo;
var baixo;
var avanco;
var altura;

function mexe(direcao)
{
    topo=Number(document.getElementById("news").style.top.substr(0,document.getElementById("news").style.top.length-2));
    baixo=Number(document.getElementById("news").style.top.substr(0,document.getElementById("news").style.bottom.length-2));
    avanco=Number(document.getElementById("cont").clientHeight);
    altura=Number(document.getElementById("news").clientHeight)-avanco+30;

if (direcao==1 && topo<0)
    {
        if((topo+avanco)>=0)
        {
            topo=0;
        }
        else
        {
        topo=topo+avanco;
        }
    //document.getElementById("news").style.top=topo+"px";
    }

if(direcao==2)
    {
        if((topo-avanco)*(-1)>=altura)
        {
            topo=altura*-1;
        }
        else
        {
        topo=topo-avanco;
        }
        //document.getElementById("news").style.top=topo+"px";
    }
}

$(document).ready(function()
  {
  $("#botao1").click(function(){
    $("#news").animate({top:topo+"px"},"normal","swing");
  });
  $("#botao2").click(function(){
    $("#news").animate({top:topo+"px"},"normal","swing");
  });
});

function mexer(direcao)
{
    esq=Number(document.getElementById("news1").style.left.substr(0,document.getElementById("news1").style.left.length-2));
    passagem=Number(document.getElementById("cont1").clientWidth);
    comp=Number(document.getElementById("news1").style.width.substr(0,document.getElementById("news1").style.width.length-2));
    maximo=comp-passagem+20;

if (direcao==1 && esq<0)
    {
        if((esq+passagem)>=0)
        {
            esq=0;
        }
        else
        {
        esq=esq+passagem;
        }
    document.getElementById("news1").style.left=esq+"px";
    }

if(direcao==2)
    {
        if((esq-passagem)*(-1)>=maximo)
        {
            esq=maximo*-1;
        }
        else
        {
        esq=esq-passagem;
        }
        document.getElementById("news1").style.left=esq+"px";
    }
}
</script>
</body>
</html> 
```

提前致谢。

最好的祝福。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:50:14.373

不确定这是您想要的，但是要设置/获取宽度，您可以这样做：

```
//get width of an item
var itemWidth = $('#news1 > div:first').width();
//count number of items
var itemsCount = $('#news1 > div').length;
//width * count = width
var containerWidth = itemWidth * itemsCount;
alert(containerWidth); 
```

你可以直接设置它

```
$('#news1').width(containerWidth); 
```

或者在滚动时使用它。

由于它不是英文的，我很难理解它是如何工作的：/

# forms - 报告正在工作，但无法获得报告的输出

> ID：10139717
> 
> 赞同：0
> 
> 时间：2012-04-13T11:09:49.760
> 
> 标签：forms, oracle, plsql, oracle10g, report

我能够成功调用报告，但我没有得到报告的输出。reoprt 必须生成 PDF。报告无法生成 pdf 。代码是

```
DECLARE 
rept REPORT_OBJECT; 
v_rep VARCHAR2(100); 
rep_status varchar2(200); 
BEGIN 

rept := find_report_object('EMP.RDF'); 

SET_REPORT_OBJECT_PROPERTY(rept ,REPORT_SERVER , 'repsrv'); 
SET_REPORT_OBJECT_PROPERTY(rept,REPORT_DESTYPE,CACHE); 
SET_REPORT_OBJECT_PROPERTY(rept,REPORT_DESFORMAT,' HTML');

v_rep := RUN_REPORT_OBJECT(rept); 
rep_status:=REPORT_OBJECT_STATUS(v_rep); 

WHILE rep_status in ('RUNNING','OPENING_REPORT','ENQUEUED') 
LOOP 
rep_status := report_object_status(v_rep); 
END LOOP; 
IF rep_status='FINISHED' THEN 
message('REPORT WAS CORRECTLY RUN'); 
ELSE 
message('REPORT FAILED WITH STATUS: '||rep_status); 
END IF;  
END; 
```

请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T13:12:53.503

您将要使用`web.show_document`来获取报告的输出。例如：

```
web.show_document('/reports/rwservlet/getjobid' || substr(v_rep,length('repsrv')+2) || '?server=' || 'repsrv','_blank'); 
```

或者，使用内置函数`copy_report_object_output()`将输出复制到文件：

```
copy_report_object_output(v_rep, 'c:\myreport.pdf'); 
```

此外，如果您想要 PDF 输出，您需要将您的 DESFORMAT 参数更改为：

```
SET_REPORT_OBJECT_PROPERTY(rept,REPORT_DESFORMAT,'PDF'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:45:11.253

你需要看的两件事

1) find_report_object 应该具有您在表单生成器中创建的报告名称

2）你需要使用

```
SET_REPORT_OBJECT_PROPERTY(rept, REPORT_FILENAME, 'C:\EMP.RDF'); 
```

其中 C:\EMP.RDF 是生成报告的路径

有关执行此操作和测试的完整示例，请查看以下链接

[https://forums.oracle.com/forums/thread.jspa?threadID=2238519](https://forums.oracle.com/forums/thread.jspa?threadID=2238519)

# c# - 代码分析规则 CA2000 / CA2202

> ID：10139718
> 
> 赞同：6
> 
> 时间：2012-04-13T11:09:58.583
> 
> 标签：c#, code-analysis, stylecop

我试图确保我的编码遵循对象的正确处理，因此我将这些规则作为错误执行。但是我在这段代码中遇到了麻烦

```
using System;
using System.IO;
using System.Runtime.Serialization;
using System.Xml;

class MyClass
{  
    public String ToXml()
    {
        var objSerializer = 
            new DataContractSerializer(GetType());
        var objStream = new MemoryStream();
        StreamReader objReader;

        String strResult;
        try
        {
            // Serialize the object
            objSerializer.WriteObject(objStream, this);

            // Move to start of stream to read out contents
            objStream.Seek(0, SeekOrigin.Begin);

            objReader = new StreamReader(objStream);

            try
            {
                // Read Contents into a string
                strResult = objReader.ReadToEnd();
            }
            finally
            {
                objReader.Dispose();
            }
        }
        finally
        {
            if (objStream != null)
            {
                // objStream.Dispose();
            }
        }

        return strResult;
    }
} 
```

如果我注释掉`objStream.Dispose()`我会得到 CA2000，因为我没有处理该对象，但是如果我删除该注释，它会说我不止一次处理。

还有什么是处理对象？还是我在处理多个流时做错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-20T08:49:29.503

这种情况现在也让我很烦。每隔几年，我决定通过运行 fxcop 或 Visual Studio 中现在内置的代码分析来刷新自己的代码分析“规则”。

我最初编写这段代码，认为我是一个正确使用 usings 来处理的好公民：

```
using (MemoryStream msDecrypt = new MemoryStream())
{
    using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Write))
    {
        csDecrypt.Write(eop.m_Ciphertext, 0, eop.m_Ciphertext.Length);
    }

    decrypted = msDecrypt.ToArray();
} 
```

这段代码导致**CA2202 “不要多次处理对象”**这条规则的最大讽刺之处在于，它实际上并不是关于您的代码的问题，而是在保护您免受其他代码中的问题的影响。Microsoft 一直有大量关于如何实现 Dispose 模式 ( [http://msdn.microsoft.com/en-us/library/b1yfkh5e(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/b1yfkh5e(v=vs.110).aspx) ) 的文档。但是，通过查看此代码分析规则 ( [http://msdn.microsoft.com/en-us/library/ms182334.aspx](http://msdn.microsoft.com/en-us/library/ms182334.aspx) ) 的详细信息，它揭示了此规则的目的

> “可以多次调用正确实现的 Dispose 方法而不会引发异常。但是，这不能保证，并且为避免生成 System.ObjectDisposedException，您不应在对象上多次调用 Dispose。”

简而言之，这条规则是关于保护自己免受不遵守规则的人的伤害。

自然，我将代码修改为如下所示：

```
MemoryStream msDecrypt = new MemoryStream()    
//using (MemoryStream msDecrypt = new MemoryStream())
//{
    using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Write))
    {
        csDecrypt.Write(eop.m_Ciphertext, 0, eop.m_Ciphertext.Length);
    }

    decrypted = msDecrypt.ToArray();
//} 
```

现在这个堆栈溢出帖子上的每个人都痛苦地意识到了新问题，我们的朋友**CA2000 “在失去作用域之前处理对象”** ......所以此时我只是面对手掌一分钟。做了一些谷歌搜索，并找到了这篇文章。那时我突然意识到，要通过这两个 CA 规则，您需要确保所有代码分支的所有内容都处理一次且仅处理一次。所以我开始这样做，一旦你意识到这是你需要做的，这不是一个难题。

自然地，代码演变成这样：

```
MemoryStream msDecrypt = null;
CryptoStream csDecrypt = null;

try
{    
    msDecrypt = new MemoryStream();
    csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Write);

    csDecrypt.Write(eop.m_Ciphertext, 0, eop.m_Ciphertext.Length);
    csDecrypt.FlushFinalBlock();
    decrypted = msDecrypt.ToArray();
}
finally
{
    if (csDecrypt != null)
    {
        csDecrypt.Dispose();
    }
    else if (msDecrypt != null)
    {
        msDecrypt.Dispose();
    }

} 
```

最后，我的代码没有生成 CA2000 或 CA2202。这个故事的寓意是，由于代码分析规则已经以这种方式发展，USING 语句的价值远低于过去。

有几种不同的方法可以编写代码来完成这项工作，我只是选择了一种不将显式调用 dispose 与 using 语句混合的方式，因为我相信这更易于阅读和结构化这将防止某人只是将另一个使用包裹在它周围，从而在不知不觉中导致最初的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:17:28.097

如果您释放 StreamReader，那么您也在释放底层流。

如果您注释掉 objStream.Dispose() ，那么您甚至在到达嵌套的 try 块之前就会遇到抛出异常的机会 - 这将导致您的流没有被释放。

这里有一个很好的解释： [Does disposing streamreader close the stream？](https://stackoverflow.com/questions/1065168/does-disposing-streamreader-close-the-stream)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T11:20:27.270

这不是答案，但您可能会发现此代码更具可读性：

```
public String ToXml()
{
    var objSerializer =
        new DataContractSerializer(GetType());

    using (var objStream = new MemoryStream())
    {
        //  Serialize the object
        objSerializer.WriteObject(objStream, this);

        // Move to start of stream to read 
        // out contents
        objStream.Seek(0, SeekOrigin.Begin);

        using (var objReader =
            new StreamReader(objStream))
        {
            // Read Contents into a string
            retirm objReader.ReadToEnd();
        }
    }
} 
```

# javascript - 尝试重新加载 https 页面的父级时，JS 权限被拒绝

> ID：10139719
> 
> 赞同：0
> 
> 时间：2012-04-13T11:10:09.940
> 
> 标签：javascript

我正在尝试从子窗口重新加载父页面，我使用了 window.opener.location.href = window.opener.location.href。

这在两个页面都在 http 上时有效，但是由于它们在 https 上移动，因此我的属性 href 被拒绝。你知道我怎样才能刷新父母吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:19:33.720

http 和 https 被视为不同的域，因为协议不同。[由于相同的来源策略](https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript)，您无法访问它们。

# .net - 简单的轻量级服务层

> ID：10139726
> 
> 赞同：2
> 
> 时间：2012-04-13T11:10:59.867
> 
> 标签：.net, wcf, web-services, asp.net-web-api, service-layer

我需要在本地公开一些逻辑作为服务......</p>

向/从逻辑发送/接收的对象非常大，信息很敏感，并且逻辑永远不需要暴露在外部，它仅用于本地服务器。

一些 MVC 开发人员争辩说应该使用 WEB Api 服务公开它——是否值得实现这个？

他们的论点是，使用 Web API，它可以更多地集成到 MVC 中，并且更容易显示结果（我对这方面的事情一无所知），我担心我们将不得不实现复杂的授权并牺牲性能。

没有更适合这种场景的轻量级服务层吗？WCF 命名管道对我来说似乎是合乎逻辑的，或者只是将其作为类库引用——是的，配置文件很痛苦，但不是世界末日。基本上我们只想在本地提供一些逻辑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T12:02:32.807

Web API 是微软迄今为止**最好**的高级 HTTP 实现。因此，它以前所未有的方式包含 HTTP，并允许在正常 MVC 下不可能实现的许多灵活性。

内容协商等功能对于任何内部或外部服务都非常重要。

然而，我也会看到 WCF 提供了更好的内聚力，因为它是一个纯 RPC 框架。但它绝对不是轻量级的。我在[这里](http://byterot.blogspot.com/2012/03/aspnet-web-api-series.html)有一个博客，它讨论了这个问题并做了一些比较（无耻的插头！）。

如果您只关心在私有环境中调用方法，那么 WCF 就可以了。但请记住，命名管道/TCP 在某些防火墙条件下可能不起作用。

Web API 丢失的另一件事是**合约**。Web API 领域中没有 WSDL - 这可能是好是坏取决于您如何看待它。如果您的公司对服务合同非常严格，WCF 是一个更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:11:22.853

Aliostad 有一些非常好的观点。除了个人经验，我没有太多要补充的。在 WCF 遇到一些严重的配置问题后，我最近使用 mvc 启动了一个 Web 服务，这非常简单。您的问题要求轻量级、简单的实现——在这些方面，答案肯定是 MVC Web API over WCF。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T14:19:31.197

如果你的服务层是面向休息的，你可以看看[servicestack](http://www.servicestack.net/)。

这个实现起来非常简单，不会牺牲性能，并且允许您通过使用属性（如 ASP.NET mvc 中的操作过滤器）或继承轻松实现安全性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-14T19:37:16.627

MVC 或 Web API 是不错的选择。如果您想要更轻量级的东西，请查看[http://www.nuget.org/packages/DuoVia.Net](http://www.nuget.org/packages/DuoVia.Net)，这是我从事的一个开源项目。

# c# - 如何强制 Internet Explorer 打开它当前正在运行的实例而不是创建一个新实例？

> ID：10139727
> 
> 赞同：3
> 
> 时间：2012-04-13T11:11:00.830
> 
> 标签：c#, c++, delphi, internet-explorer, winapi

如何以编程方式启动 IE ( `iexplore.exe`) 并在当前运行的实例中导航（通过打开新选项卡或替换当前 URL）而不是创建新实例。

我已经搜索了一个命令行开关，并尝试使用`InternetExplorer.Application`，但无济于事。

这是我需要的**伪**代码（IE6-IE9 会很好）：

```
ShellExecute(Handle, 'open', 'iexplore.exe',
    '"http://google.com" -single_instance',
    nil, SW_RESTORE); 
```

* * *

这是一些代码来演示我的尝试。Delphi 中的代码（部分基于[How to get IHTMLDocument2 from a HWND](http://support.microsoft.com/kb/249232)）：

```
implementation

uses ShellApi, ComObj, ActiveX, SHDocVw, MSHTML;        

function GetIEFromHWND(WHandle: HWND; var IE: IWebbrowser2): Boolean;
type
  TObjectFromLResult = function(LRESULT: lResult; const IID: TIID;
    wParam: WPARAM; out pObject): HRESULT; stdcall;
var
  hInst: HMODULE;
  lRes: Cardinal;
  Msg: UINT;
  pDoc: IHTMLDocument2;
  ObjectFromLresult: TObjectFromLresult;
begin
  Result := False;
  hInst := LoadLibrary('oleacc.dll');
  if hInst <> 0 then
  try
    @ObjectFromLresult := GetProcAddress(hInst, 'ObjectFromLresult');
    if @ObjectFromLresult <> nil then
    begin
      Msg := RegisterWindowMessage('WM_HTML_GETOBJECT');
      if SendMessageTimeOut(WHandle, Msg, 0, 0, SMTO_ABORTIFHUNG, 1000, lRes) <> 0 then
        if ObjectFromLresult(lRes, IHTMLDocument2, 0, pDoc) = S_OK then
        begin
          (pDoc.parentWindow as IServiceprovider).QueryService(
            IWebbrowserApp, IWebbrowser2, IE);
          Result := IE <> nil;
        end;
      end;
  finally
    FreeLibrary(hInst);
  end;
end;

function GetActiveIEServerWindow(const Activate: Boolean=True): HWND;
var
  Wnd, WndChild: HWND;
begin
  Result := 0;
  Wnd := FindWindow('IEFrame', nil); // top level IE
  if Wnd <> 0 then
  begin
    WndChild := FindWindowEx(Wnd, 0, 'Shell DocObject View', nil);
    if WndChild <> 0 then
    begin
      WndChild := FindWindowEx(WndChild, 0, 'Internet Explorer_Server', nil);
      if WndChild <> 0 then
      begin
        Result := WndChild;
        if Activate then
        begin
          if IsIconic(Wnd) then
            ShowWindow(Wnd, SW_RESTORE)
          else
            SetForegroundWindow(Wnd);
        end;
      end;
    end;
  end;
end;

// Method 1
procedure TForm1.Button1Click(Sender: TObject);
const
  navOpenInNewTab = $800;
var
  IEServerWnd: HWND;
  IE: IWebBrowser2;
begin
  IEServerWnd := GetActiveIEServerWindow;
  if (IEServerWnd <> 0) and GetIEFromHWnd(IEServerWnd, IE) then
  begin
    // *** this opens the Default browser, e.g Google Chrome 
    // *** if IE is the Default browser, an empty new window is opened.
    OleVariant(IE).Navigate('http://www.yahoo.com', Longint(navOpenInNewTab));
  end
  else
  begin
    ShellExecute(Handle, 'open', 'iexplore.exe',
    '"http://google.com"',
    nil, SW_RESTORE);
  end;
end;

procedure InternetExplorerNavigate(URL: WideString);
const
  navOpenInNewTab = $800;
var
  IE: OleVariant;
begin
  try
    // *** this always fails (security constraints?)
    IE := GetActiveOleObject('InternetExplorer.Application');
  except
    IE := CreateOleObject('InternetExplorer.Application');
  end;
  IE.Visible := True;
  IE.Navigate(URL, Longint(navOpenInNewTab));
end;

// Method 2
procedure TForm1.Button2Click(Sender: TObject);
begin
  InternetExplorerNavigate('http://google.com');
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T14:50:38.570

您的方法“1”实际上有效。至少在这里，问题在于“Shell DocObject View”窗口不是顶级即窗口的直接子级。在 IE8 中，“Internet Explorer_Server”窗口是“Shell DocObject View”的子窗口，它是“TabWindowClass”的子窗口，“TabWindowClass”是“Frame Tab”的子窗口。如果您可以确认“FindWindowEx”在方法 1 中返回 0，这就是它失败的原因。以下是修改为使用的代码`EnumChildWindows`：

```
function EnumChilds(hwnd: HWND; lParam: LPARAM): BOOL; stdcall;
const
  Server = 'Internet Explorer_Server';
var
  ClassName: array[0..24] of Char;
begin
  GetClassName(hwnd, ClassName, Length(ClassName));
  Result := ClassName <> Server;
  if not Result then
    PLongWord(lParam)^ := hwnd;
end;

function GetActiveIEServerWindow(const Activate: Boolean=True): HWND;
var
  Wnd, WndChild: HWND;
begin
  Result := 0;
  Wnd := FindWindow('IEFrame', nil); // top level IE
  if Wnd <> 0 then
  begin

//    WndChild := FindWindowEx(Wnd, 0, 'Shell DocObject View', nil);
//    if WndChild <> 0 then
//    begin
//      WndChild := FindWindowEx(WndChild, 0, 'Internet Explorer_Server', nil);

    WndChild := 0;
    EnumChildWindows(Wnd, @EnumChilds, LongWord(@WndChild));

    if WndChild <> 0 then
    begin
      Result := WndChild;
      if Activate then
      begin
        if IsIconic(Wnd) then
          ShowWindow(Wnd, SW_RESTORE)
        else
          SetForegroundWindow(Wnd);
      end;
    end;
//    end;
  end;
end; 
```

至于方法“2”，我在网上看到一些链接表明 IE 不支持为其活动对象返回引用，但我没有任何官方参考。

# php - 服务器真实路径

> ID：10139729
> 
> 赞同：1
> 
> 时间：2012-04-13T11:11:07.167
> 
> 标签：php

我想知道是否有人可以帮助我。

我正在尝试检索我正在构建的图片库脚本中使用的 xml 文件的文件路径。

我的文件夹结构如下：

> 网站/开发/UploadedFiles/'用户名'文件夹/'位置'文件夹/file.xml

我把这个放在一起，试图让我走上这条路：

```
<?php
chdir('var/www/');
echo realpath('./././file.xml');
?> 
```

但我收到以下错误：

> 警告：chdir() [function.chdir]: 第 2 行 /homepages/2/d333603417/htdocs/development/real.php 中没有这样的文件或目录 (errno 2)

我确定我在这里犯了一个初学者的错误，但我想至少尝试一下。我只是想知道是否有人可以看看这个，让我知道我哪里出错了。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T11:16:06.797

这是因为有两种类型的 Unix 路径：

绝对路径：（`/var/www/`总是以 开头`/`）

相对路径：（`var/www/`相对于你所在的地方。`/`开头没有）

如果你 chdir 到`/var/www/`你得到`/var/www/`.

如果你 chdir 到`var/www/`你 chdir 到`<directory_where_you_are>/var/www/`

你也有一个错误`./././`。

`./`- 表示您的当前目录。使用`./././`会将您留在当前目录中。

如果您想按目录树使用`../`（表示父目录）向上移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:20:08.737

如果你想获得一个文件相对于你的 php 文件的绝对路径，通常更容易做类似`dirname(__FILE__).'/path/to/file'`的事情，因为它比使用 chdir 和相对路径更容易预测。您也可以只回显它以进行调试。

所以在你的情况下，看起来你可能想要这样的东西：

```
$file = dirname(__FILE__)."/UploadedFiles/$username/$location/file.xml"; 
```

如果需要向上遍历目录，可以使用多个目录名：

```
$file = dirname(dirname(__FILE__))."/UploadedFiles/$username/$location/file.xml"; 
```

# php - 从 cron 访问用户配置文件

> ID：10139730
> 
> 赞同：0
> 
> 时间：2012-04-13T11:11:08.417
> 
> 标签：php, facebook, sdk, cron, access-token

我正在构建一个将朋友数据导入本地数据库的应用程序，它运行良好。

我正在尝试创建一个由每日 cron 运行的脚本，该脚本将遍历本地数据库中的用户配置文件并更新朋友数据。

我正在使用 PHP SDK。

我已启用 depreacte_offline_access 标志。

这是否意味着访问令牌将在 60 天后自动过期，还是我需要做其他事情？

如果用户在同一个浏览器中退出应用程序或 Facebook，我还能从 cron 脚本中检索配置文件数据吗？

我是否正确地认为我需要做的就是通过以下方式检索访问令牌：

```
$access_token = $facebook->getAccessToken(); 
```

然后将其存储在数据库中，然后使用以下命令设置访问令牌：

```
$facebook->setAccessToken($new_access_token); 
```

然后用

```
$facebook->getUser('/me'); 
```

?

另外如何查看访问令牌的到期日期？

下面是一个遍历和检索配置文件的脚本，但如果我在浏览器中运行它，它只适用于当前登录的用户，或者我得到异常“OAuthException：验证访问令牌时出错：会话无效，因为用户已注销。 "

```
<?php
require_once(THEME_INCLUDES_PATH . 'facebook.php');

$config = array();
$config['appId'] = APP_ID;
$config['secret'] = APP_SECRET;
$config['fileUpload'] = false; // optional

$facebook = new Facebook($config);

$sql = "SELECT `access_token` FROM `fb_user`";
$result = $db1->db_query($sql);

while($details = $db1->db_fetch_array($result)){

    if($details['access_token']){

        $facebook->setAccessToken($details['access_token']);
        $fb_user = $facebook->getUser('/me');

        if($fb_user){

            try {
                $fb_profile = $facebook->api('/me');        
                print_r( $fb_profile);
            }

            catch (FacebookApiException $e){
                echo $e;
                $fb_user = false;
            }
        }
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:41:30.127

You have no way of doing what you want now that the offline_access got deprecated.

The idea is that your app only has access to the user data when the user actually interacts with your application. The access token is valid for about 60 days (depending on how you get it), but it can get invalidated due to all kind of reasons (such as user removes your app, changes password, and many more).

When that happens, or the expiration dates arrives, there's nothing that you can do in order to get a new token, unless of course the user reengages your app and then you can get a new token or extend the one you have.

You'll have to make all of the data updating when the user actually interacts with your app and not later on.

In the [official post about the deprecation of the offline_access](http://developers.facebook.com/roadmap/offline-access-removal/) it says:

> The user must access your application before you're able to get a valid "authorization code" to be able to make the server-side OAuth call again. Apps will not be able to setup a background/cron job that tries to automatically extend the expiration time, because the "authorization code" is short-lived and will have expired.

* * *

# Edit

The official post: [Removal of offline_access Permission](http://developers.facebook.com/roadmap/offline-access-removal/) describes a new endpoint to extend valid access tokens, in one of two cases: If the app got the token from a [client-side flow](http://developers.facebook.com/docs/authentication/client-side/) or with a signed request:

> Using the new endpoint below, you will be able to extend the expiration time of an existing, valid access_token. If the access_token was originally generated from a client-side OAuth call or through a signed_request, the endpoint will actually return a new access_token.

It also states that:

> If the access_token is generated from a server-side OAuth call, the resulting access_token will have the longer expiration time.

So my advise is simple to use the [server-side flow](http://developers.facebook.com/docs/authentication/server-side/) to generate the access token.

As for a list of token invalidating events, they don't have a complete list, but you can find info about it in the same page:

> **Handling expired tokens, user password changes, uninstalled apps, and user logout**
> 
> Regardless if your app requested the offline_access permission, apps should gracefully handle an expired access tokens in situations where a user changes their password, deauthorizes an app, or logs out. More information on these cases including a simple code solution that leads to a uniform user experience can be found in this [blog post](http://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/).

And you can check this doc: [Handling Invalid and Expired Access Tokens](http://developers.facebook.com/docs/authentication/access-token-expiration/).

# android - Android AVD 安装 chrome 和 firefox

> ID：10139733
> 
> 赞同：5
> 
> 时间：2012-04-13T11:11:17.323
> 
> 标签：android, firefox, google-chrome, sdk, avd

我使用 AVD 管理器创建了几个 AVD。我想知道如何在这些 AVD 上安装 chrome/firefox？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T11:23:58.507

[Chrome 的 .apk](http://www.apkfiles.com/apk-11/google-chrome)

[Firefox 的 .apk](http://www.androiddrawer.com/7745/download-firefox-browser-for-android-17-0-app-apk/#.UUmWtVeFWN0)

下载两个 .apk 文件并使用安装到您的 AVD`adb install apk_name`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T14:21:28.107

要将某些东西安装到设备上，您需要已经让设备运行。

所以首先，使用模拟器命令启动设备。

然后，在不同的终端/命令窗口中，使用 adb 命令安装包。就我而言，我已将 apk 文件复制到 platform-tools 文件夹：

```
./adb install Firefox_17.0.apk 
```

和模拟器的其他部分一样，安装速度很慢，所以请耐心等待。

当然，这只是安装软件包。让它们成功运行完全是另一回事。到目前为止，我无法让 Chrome 或 Firefox 包运行。Chrome 显示“此版本的 Android 不支持。4.0 版是最低支持版本。” 我在模拟器中运行 4.3。Firefox 启动但随后立即终止，并显示“不幸的是，Firefox 已停止”消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T11:12:28.617

获取 apk 文件并通过 adb 安装它们（adb install .apk.

# c# - 创建一个属性来检查异常

> ID：10139735
> 
> 赞同：0
> 
> 时间：2012-04-13T11:11:20.537
> 
> 标签：c#, asp.net-mvc-3

我正在创建一个属性，以便每当我的站点上发生异常时，我都会收到一封详细说明异常的电子邮件。我到目前为止，但如果发生异常，我的属性代码似乎不会触发：

```
public class ReportingAttribute : FilterAttribute, IExceptionFilter
{
    public void OnException(ExceptionContext filterContext)
    {
        // This will generate an email to me
        ErrorReporting.GenerateEmail(filterContext.Exception);
    }
} 
```

然后在我的控制器上方我正在做：

```
[ReportingAttribute]
public class AccountController : Controller 
```

另一种方法当然是放入`ErrorReporting.GenerateEmail(ex)`我的捕获块内？一定有更简单的方法吗？这就是为什么我想创建属性来处理这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:17:52.653

为了记录所有未捕获的异常，您可以在`Global.asax.cs`文件中定义以下方法：

```
private void Application_Error(object sender, EventArgs e)
{
    try
    {
        //
        // Try to be as "defensive" as possible, to ensure gathering of max. amount of info.
        //

        HttpApplication app = (HttpApplication) sender;

        if(null != app.Context)
        {
            HttpContext context = app.Context;

            if(null != context.AllErrors)
            {
                foreach(Exception ex in context.AllErrors)
                {
                    // Log the **ex** or send it via mail.
                }
            }

            context.ClearError();
            context.Server.Transfer("~/YourErrorPage");
        }
    }
    catch
    {
        HttpContext.Current.Response.StatusCode = (int) HttpStatusCode.InternalServerError;
        HttpContext.Current.ApplicationInstance.CompleteRequest();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:18:04.017

`Attribute`仅靠其本身*不能*定义行为，但它用于在您的代码数据上做一些标记。你应该写一个代码，你在哪里

*   得到一个例外
*   检查引发异常的方法中是否存在给定属性
*   如果存在，请收集并发送您需要的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T11:25:15.553

为什么不创建一个基本控制器：

```
public ApplicationBaseController : Controller
{
    public override void OnException(ExceptionContext context)
    {
        //Send your e-mail
    }
} 
```

并从`ApplicationBaseController`

```
public HomeController : ApplicationBaseController
{
    //.....
} 
```

# wpf - 将 WPF 列表框的非活动突出显示颜色设置为活动突出显示颜色

> ID：10139740
> 
> 赞同：3
> 
> 时间：2012-04-13T11:11:41.470
> 
> 标签：wpf, highlight, systemcolors

我正在尝试制作一个 ListBox，无论 ListBox 是否具有焦点，突出显示的项目看起来都相同。

本质上，我想将 SystemColors.ControlBrushKey 颜色属性设置为与 SystemColors.HighlightBrushKey 颜色相同。

我想我可以使用以下内容：

```
<ListBox>
    <ListBox.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" 
                         Color="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
    </ListBox.Resources>
</ListBox> 
```

但这实际上会引发以下错误：

System.Windows.Markup.XamlParseException：设置属性“System.Windows.Media.SolidColorBrush.Color”引发异常。---> System.ArgumentException: '#FF3399FF' 不是属性 'Color' 的有效值

如果我设置`Color="#FF3399FF"`它工作正常。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T11:36:12.023

感谢 Nicholas W 为我指明了正确的方向 - 这是 ListBox 的完整代码：

```
<ListBox Width="200" Height="200">
    <ListBox.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" 
                         Color="{DynamicResource {x:Static SystemColors.HighlightColorKey}}" />
    </ListBox.Resources>
    <ListBox.ItemContainerStyle>
        <Style>
            <Style.Triggers>
                <Trigger Property="Selector.IsSelected" Value="True">
                    <Setter Property="TextElement.Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </ListBox.ItemContainerStyle>
    <ListBoxItem IsSelected="True">Item A</ListBoxItem>
    <ListBoxItem>Item B</ListBoxItem>
    <ListBoxItem>Item C</ListBoxItem>
</ListBox> 
```

# version-control - 推荐用于托管许多独立补丁的 DVCS 机制

> ID：10139746
> 
> 赞同：2
> 
> 时间：2012-04-13T11:12:13.857
> 
> 标签：version-control, mercurial, dvcs, sourceforge

我有一个项目刚刚在[http://sourceforge.net/projects/iotabuildit/](http://sourceforge.net/projects/iotabuildit/)开始（更多细节在[http://sourceforge.net/p/iotabuildit/wiki/Home/](http://sourceforge.net/p/iotabuildit/wiki/Home/)) 目前正在使用 Mercurial 进行修订控制。似乎 Mercurial 和 SourceForge 几乎拥有所有合适的功能或元素来组合我为这个项目考虑的协作机制，但我认为我还没有完全做到。我希望人们能够提交、讨论和投票来自大量个人（比项目通常拥有的更多开发人员）的个人更改。我希望用户能够尽可能轻松地参与其中。现在的想法是人们可以克隆“free4all”分支，它是基本“代码”存储库的克隆，或者他们可以在自己的 SourceForge 用户项目中创建自己的分支（SourceForge 现在为每个用户提供了一个工作区以主持杂项项目相关内容）。然后他们可以将其克隆到他们的本地存储库（在下载 TortoiseHg 或他们喜欢的 Mercurial 客户端之后）。然后他们可以进行修改，提交它们，将它们推送到分支，并请求合并到基本“代码”存储库中，此时我们可以讨论/审查合并请求。这一切仍然是太多的步骤，而且比我想要的更正式。

我看到 Mercurial 中有“搁置”之类的东西，但我看不到 SourceForge 存储库中如何/是否支持它。由于存在合并请求，因此可能无法讨论搁置的更改。

我正在寻找任何可以使这更容易的建议。理想情况下，我希望用户能够：

1.  指定他们想玩的任何版本，并从托管的源代码控制中提取请求的版本，供用户*在*SourceForge 玩（因为由于安全限制，游戏无法在本地玩，Chrome 浏览器正确适用于 javascript 代码访问独立文件中的图像内容）
2.  允许用户下载项目的请求版本进行本地编辑（从相同源构建的 C# 版本也可以在本地播放，或者 Internet Explorer 显然忽略了安全限制，允许在浏览器中本地播放）
3.  以可以与任何其他兼容的“分支”或已提交/发布的游戏版本合并的形式接受提交的修改（理想情况下，这将非常简单——也许只是将整个文件集上传回服务器并在那里执行比较和补丁/差异提取）
4.  其他玩家可以看到可用提交的补丁列表并选择任何要玩/测试的集合，然后讨论和投票更改。

显然，其中一些要求非常具体，如果我想达到理想的目标，我可能需要编写一些服务器端代码。但是，如果我需要的大部分功能已经几乎存在，我想走阻力最小的道路并使用可用的技术。或者我想看看我是否可以在不编写任何服务器代码的情况下比我之前概述的过程更接近。那么哪些部分可以帮助我做到这一点呢？Mercurial 和 SourceForge 是否支持以我想要的方式存储和共享搁置的代码？这个“补丁队列”（我看到了，但还不能理解或开始工作）有什么可能有帮助的吗？与存储库中的特定修订版（在服务器端）相比，有没有一种方法可以从给定的文件集中提取补丁文件，而无需用户下载任何 Mercurial 组件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T13:31:05.773

这听起来像是您可以使用 mercurial queue (mq) 补丁队列来做的事情。补丁队列可以是自己的、独立的版本库，人们可以使用“守卫”来仅应用他们想尝试的补丁。

但实际上，使用 bitbucket 或 github 听起来更容易，两者都内置了出色的补丁提交、审查和验收工作流程。

# javascript - this.setMap() 在自定义叠加层中不起作用

> ID：10139753
> 
> 赞同：0
> 
> 时间：2012-04-13T11:12:33.360
> 
> 标签：javascript, google-maps-api-3

我正在为 Google 地图编写自定义叠加层。我有很多经纬度点，我想用箭头指向和指向它们的图像。我正在关注 Google 的自定义叠加教程（https://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays）。

在我的叠加层的“构造函数”中，这一行失败：'this.setMap(this.map_);'

我需要做什么才能使其工作？

这是我的叠加层的“构造函数”。虚线位于底部。我正在测试时，所有对“警报”的调用都在那里。没有打到最后一个电话，这就是为什么我认为 'this.setMap()' 不起作用。

```
 //This serves as a constructor for a link overlay
 function LinkOverlay(startNodeCoordinates, endNodeCoordinates, map)
 {
    alert("constructor start");
    this.map_ = map;

    //These are the lat-long coordinates of where the link starts and ends
    this.startNodeCoordinates_ = startNodeCoordinates;
    this.endNodeCoordinates_ = endNodeCoordinates;

    alert("constructor coordinates stored");

    // We define a property to hold the image's
    // div. We'll actually create this div
    // upon receipt of the add() method so we'll
    // leave it null for now.
    this.div_ = null;

    alert("constructor div saved");

    //We need to know if we draw the arrow up or down and left or right.
    //We calculate this by finding the bearing between the two nodes. If
    //the bearing is N to NE, then the arrow goes up and to the right,
    //for example. If the bearing is E to SE, then the arrow goes down
    //and to the right, and so on.

    //Calculate bearing
    /*
     * This algorithm determines the bearing (or angle) between two coordinate points.
     * It was adapted from http://www.movable-type.co.uk/scripts/latlong.html
     */
    alert("constructor calculating bearing")
    this.bearing_ = null;
    var lat1 = this.startNodeCoordinates_.lat();
    var lat2 = this.endNodeCoordinates_.lat();
    var dLon = this.startNodeCoordinates_.lng() - this.endNodeCoordinates_.lng();
    var y = Math.sin(dLon) * Math.cos(lat2);
    var x = Math.cos(lat1)*Math.sin(lat2) -
        Math.sin(lat1)*Math.cos(lat2)*Math.cos(dLon);
    this.bearing_ = Math.atan2(y, x);

    alert("constructor bearing found (bearing = " + this.bearing_ + ")");

    this.arrowUp_ = null;
    this.arrowRight_ = null;
    this.image_ = null;

    alert("constructor picking image");

    if((this.bearing_ >= 0 && this.bearing_ < (Math.PI * 0.5)) || this.bearing_ == (Math.PI * 2))
    {
        alert("constructor NE");
        //If bearing is N to NE, the arrow goes up and to the right
        this.arrowUp_ = new Boolean(true);
        this.arrowRight_ = new Boolean(true);
        this.image_ = "../../Content/map_images/link_overlay/up_right_black.png";
    }
    else if(this.bearing_ >= (Math.PI * 0.5) && this.bearing_ < Math.PI)
    {
        alert("constructor SE");
        //If bearing is E to SE, the arrow goes down and to the right
        this.arrowUp_ = new Boolean(false);
        this.arrowRight_ = new Boolean(true);
        this.image_ = "../../Content/map_images/link_overlay/down_right_black.png";
    }
    else if(this.bearing_ >= Math.PI && this.bearing_ < (Math.PI * 1.5))
    {
        alert("constructor SW");
        //If bearing is S to SW, the arrow goes down and to the left
        this.arrowUp_ = new Boolean(false);
        this.arrowRight_ = new Boolean(false);
        this.image_ = "../../Content/map_images/link_overlay/down_left_black.png";
    }
    else
    {
        alert("constructor NW");
        //If bearing is W to NW, the arrow goes up and to the left
        this.arrowUp_ = new Boolean(true);
        this.arrowRight_ = new Boolean(false);
        this.image_ = "../../Content/map_images/link_overlay/up_left_black.png";
    }

    alert("constructor adding to map");

    // Explicitly call setMap() on this overlay
    this.setMap(this.map_);

    alert("constructor end");
 }

 //This "subclasses" a link overlay from Google Map's OverlayView class
 LinkOverlay.prototype = new google.maps.OverlayView(); 
```

这是创建新 LinkOverlays 的代码（在 Razor 语法中）：

```
@:var startNodeCoordinates = new google.maps.LatLng('@startNode.Latitude', '@startNode.Longitude');
@:var endNodeCoordinates = new google.maps.LatLng('@endNode.Latitude', '@endNode.Longitude');
@:var routeLine = new LinkOverlay(startNodeCoordinates, endNodeCoordinates, networkMap); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T20:33:21.790

我有同样的问题。我使用“新”修复它以实例化我的自定义叠加层。在您的情况下，您确定在实例化您的叠加层时，您使用：

> linkOverlay = new LinkOverlay(s, e, map)

# windows - Windows Phone7 开发：选择目标 SDK(OS) 版本

> ID：10139758
> 
> 赞同：0
> 
> 时间：2012-04-13T11:13:02.283
> 
> 标签：windows, windows-phone-7, windows-phone-7.1

在 Windows phone7 应用程序开发中选择目标版本有点混乱。

在我的 Windows phone7 应用程序中，我需要使用一个轻量级的关系数据库，它没有在 7.0 版中引入，而是在 7.1 版中引入了 SQL CE。

问题是如果我选择目标版本为7.1，那么带有windows phone7 OS 7.0的设备将无法安装它。

但是听说windows phone7 OS 7.0自带的所有设备都可以免费升级到windows OS 7.1。如果是这种情况，那么如果我选择开发 SDK 版本为 7.1，那么所有 windows phone7 设备都可以安装吗？

在我开始开发之前，想知道在这种情况下选择哪个最佳 Target 版本。非常感谢任何指导/想法。谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:16:22.390

我认为最好将所有内容都针对 7.1。大多数（如果不是全部）7.0 的早期采用者现在已经升级到 7.1。在过去的 3 个月中，我没有看到我们的任何应用程序使用 7.0 设备的任何证据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T11:20:43.487

所有具有 7.0 OS 的第一代 Windows Phone 设备都有权免费升级到 7.5 OS 版本（代号“Mango”，SDK 为 7.1 版本）

所以，我想不出你应该只使用 7.1 SDK 的理由；此外，大多数用于 Windows Phone 开发的工具包已经过时了它们的 7.0 版本，并且仅适用于 7.1，所以这也是使用 7.1 的另一个理由！

# drupal-7 - 在 drupal7 中，使用分类术语过滤节点的路径应该是什么

> ID：10139759
> 
> 赞同：0
> 
> 时间：2012-04-13T11:13:07.153
> 
> 标签：drupal-7

嗨，获取属于特定分类术语的节点的 url 应该是什么。

就像如果我想要对内容类型 Books 的（比如说）节点 5 进行 json 解析，那么 url 将是 www.websitename/api/node?parameters[type]=Books 或者只是为了获取节点它应该是 www.websitename/api /节点/5

但是如何获取属于特定分类（类别）的节点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:37:13.837

不确定你到底要什么。您只想要特定分类术语的存档吗？您可以在 yoursite.com/taxonomy/term/1 获得该信息（但不是“1”，而是使用您要查找的术语的 ID，ID 与结构中的术语一起列出 - 分类 - 列出术语）

如果您想做更复杂的事情，我认为您会这样做，最好使用 Views 模块按分类术语排序并添加您想要的任何其他排序和过滤器。

# javascript - 自动滚动：停止跳回页面顶部

> ID：10139761
> 
> 赞同：1
> 
> 时间：2012-04-13T11:13:07.887
> 
> 标签：javascript, html, scroll

我有一个页面，用户单击一个链接开始自动向下滚动页面以便于阅读。用户单击另一个链接以停止滚动。前者完美运行，但后者使页面在单击时跳回顶部，而不是在页面上的该位置停止滚动。有任何想法吗？

```
function pageScroll() {
    window.scrollBy(0,1); // horizontal and vertical scroll increments
    scrolldelay = setTimeout('pageScroll()',50); // scrolls every 100 milliseconds
}
function stopScroll() {
    clearTimeout(scrolldelay);
} 
```

我试图`return false;`从我在另一篇文章中读到的东西添加到第二个函数，但它没有帮助。无论如何，我并不完全理解 return 的使用。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T11:17:32.833

我假设你正在做这样的事情：

```
<a href="#" onclick="pageScroll();">start</a>
<a href="#" onclick="stopScroll();">stop</a> 
```

`onclick`最快的解决方法是从事件处理程序返回 false ，如下所示：

```
<a href="#" onclick="pageScroll(); return false;">start</a>
<a href="#" onclick="stopScroll(); return false;">stop</a> 
```

这个想法是阻止浏览器执行事件的默认操作（在这种情况下，转到`#`，滚动到页面顶部）。如今，更现代的方法是绑定一个事件处理函数，然后`e.preventDefault()`在其中使用，但`return false;`仍然适用于旧式事件属性。

# objective-c - 为什么在 Objective-C 中，我们使用 self = [super init] 而不仅仅是 [super init]？

> ID：10139765
> 
> 赞同：13
> 
> 时间：2012-04-13T11:13:27.197
> 
> 标签：objective-c

在书中，我看到如果子类覆盖超类的方法，我们可能有

```
self = [super init]; 
```

首先，这应该在子类的`init`方法中完成吗？

二、不知道为什么调用不只是

```
[super init]; 
```

? 我的意思是，在调用`init`时，内存已经分配了`alloc`（我认为子类的名称`[Foobar alloc]`在哪里`Foobar`。所以我们不能只调用`[super init]`来初始化成员变量吗？为什么我们必须获取的返回值`init`并分配to `self`? 我的意思是，在调用之前`[super init]`，`self`应该指向一个有效的内存分配卡盘......那么为什么要再次为 self 分配一些东西呢？

（如果分配，不会`[super init]`只返回`self`现有值吗？）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T11:24:09.220

> 那么为什么要将[super init]返回的值赋给self呢？看一个典型的初始化方法：

```
 - (id)initWithString:(NSString *)aString {
     self = [super init];
     if (self)
     {
         instanceString = [aString retain];
     }
     return self; } 
```

为什么我们在这里将 [super init] 分配给 self ？

> 教科书的原因是因为 [super init] 被允许做以下三件事之一：
> 
> 1.  返回它自己的接收器（self 指针不变）并初始化继承的实例值。
> 2.  返回具有初始化继承实例值的不同对象。
> 3.  返回 nil，表示失败。
> 
> 在第一种情况下，赋值对 self 没有影响，并且在原始对象中设置了 instanceString（行 instanceString = [aString retain]; 可能是方法的第一行，结果将是相同的）。
> 
> 第三种情况，初始化失败。self 设置为 nil，不采取进一步行动并返回 nil。
> 
> 分配给 self 的基本原理与第二种情况有关：如果返回的对象不同，我们想要：
> 
> ```
> instanceString = [aString retain]; which gets converted to
> 
> self->instanceString = [aString retain]; to act on the correct value, 
> ```
> 
> 所以我们必须改变 self 的值来指向这个新对象。

希望这会有所帮助...

[来自 Cocoa with Love](http://cocoawithlove.com/2009/04/what-does-it-mean-when-you-assign-super.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T11:43:09.347

返回不同对象的一个​​经典示例`-init`是实现类集群 - 一个抽象接口，具有多个提供不同存储或算法的具体实现者。`+[NSString alloc]`返回 的实例`NSPlaceholderString`。占位符实例的初始化器检查它们的参数，释放占位符字符串并返回具体子类的初始化实例`NSString`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T11:23:43.927

超类可能会决定对象无法正确初始化并返回 nil 作为失败。如果您不将 nil 分配给 self 您的 init 方法将在父类已正确初始化对象的假设下继续进行。

如果需要，父类也可以返回完全不同的对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T11:31:07.767

了解**对象已经分配并且 self 指向内存。**

现在 [super init] 执行初始化部分。

1）如果初始化成功，则self在初始化之前指向同一个对象

2) 如果初始化失败，init 函数返回 nil 并且 self = nil。现在我们可以检查对象是否已初始化，如果是，请通过此代码执行我们的魔法

```
 if(self = [super init]){
  // do our magic
 } 
```

它就像我们使用一个imageView，我们通常使用

```
UIImageView imgView = [[UIImageView alloc] init]; 
```

**如果 alloc 和 init 都成功，imgView 将只有非 nil 值。**

# oracle - NHibernate 3.2 和分页 Oracle

> ID：10139766
> 
> 赞同：0
> 
> 时间：2012-04-13T11:13:28.167
> 
> 标签：oracle, nhibernate, pagination, version

我正在将 web 项目 asp.net VS2008 迁移到 VS2010，并将 NH 2.1 迁移到 NH 3.2。

现在，使用 NH 3.2 的分页不起作用。

NHibernate 3.2 SetFirstresult, Setmaxresults 分页问题 oracle
[https://groups.google.com/forum/#!topic/nhusers/1kp0hDfVol0](https://groups.google.com/forum/#!topic/nhusers/1kp0hDfVol0)

代码，vs2008和vs2010相同，但是使用NH 3.2，分页不起作用

```
 var response = new GetComunicacionesXFiltroResponse();

        //Sesion
        using (ISession session = NHibernateHelper.OpenSession(FlushMode.Never))
        {
            IQuery query = GetQueryForGetComunicacionesXFiltro(request, false, session);
            if (request.PagingInfo != null)
            {
                query.SetMaxResults(request.PagingInfo.RowCount);
                query.SetFirstResult((request.PagingInfo.PageNumber - 1) * request.PagingInfo.RowCount);
            }
            response.Comunicaciones = ComunicacionMapper.Map(query.List<Comunicacion>());

        } 
```

NH 3.2 的配置

```
<hibernate-configuration  xmlns="urn:nhibernate-configuration-2.2" >
  <reflection-optimizer use="false"/>
  <session-factory>
    <property name="connection.connection_string_name">XXX.ConnectionStrings.Oracle.XXX</property>
    <property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
    <property name="connection.driver_class">NHibernate.Driver.OracleDataClientDriver</property>
    <property name="connection.isolation">ReadCommitted</property>
    <property name="dialect">NHibernate.Dialect.Oracle9iDialect</property>

    <property name="query.substitutions">true 1, false 0, yes 'Y', no 'N'</property>
    <property name="show_sql">false</property>
    <property name="use_proxy_validator">false</property>
    <!--DEPRECATED<property name="use_outer_join">true</property>-->
    <mapping assembly="XXX.MonitorizacionB2b.DomainModel"/>
  </session-factory>
</hibernate-configuration> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T16:26:18.543

伊朗陷入同样的​​问题。分页在 3.3 中工作。下载源代码并自己编译或从中提取夜间构建

[http://teamcity.codebetter.com/viewType.html?buildTypeId=bt7&tab=buildTypeStatusDiv](http://teamcity.codebetter.com/viewType.html?buildTypeId=bt7&tab=buildTypeStatusDiv)

# jquery - 使用 Django 上传 jquery ajax 文件

> ID：10139770
> 
> 赞同：1
> 
> 时间：2012-04-13T11:13:39.423
> 
> 标签：jquery, python, django, jquery-ui

我正在使用 jquery ajaxfileupload 插件[http://www.phpletter.com/Our-Projects/AjaxFileUpload/](http://www.phpletter.com/Our-Projects/AjaxFileUpload/) 在服务器端使用 Django 上传图像。我还完成了 ajax 设置，我在这里看到[Django CSRF 检查失败并出现 Ajax POST 请求](https://stackoverflow.com/questions/5100539/django-csrf-check-failing-with-an-ajax-post-request) 但我仍然收到 403 Forbidden: csrf 验证失败。

这是客户端脚本：http: [//jsfiddle.net/rkumarnirmal/FSDPH/](http://jsfiddle.net/rkumarnirmal/FSDPH/)

这是Django代码：

```
def backgroundview(request):
    if request.is_ajax():
        b = request.POST.get('fileToUpload')        
        try:
            g = BackgroundModel.objects.get(user=request.user)
        except CoverModel.DoesNotExist:
            bm = BackgroundModel(background=b)
            bm.user = request.user
            bm.save()
        else:
            g.background = b
            g.save()
        return HttpResponse("") 
```

有人可以帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:26:44.583

确保`RequestContext`在您的视图中使用。

请参阅[https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#how-to-use-it](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#how-to-use-it)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T16:45:59.753

`@csrf_protect`在视图方法的顶部附加注释！

# shell - 如何通过解析在 ksh 命令中执行 if-else 操作

> ID：10139774
> 
> 赞同：0
> 
> 时间：2012-04-13T11:13:46.150
> 
> 标签：shell, ksh, daemon

我正在尝试`which`在 ksh shell 脚本中使用以下命令查找守护程序的路径

但是，如果守护程序不存在，它会以格式给出警告..

`no DaemonName .....bla bla bla`

但由于我不能直接显示，我目前这样做

```
tmp=`which daemonName`
tmp2=`which daemonName | grep "no DaemonName"`
if [[ "$tmp2" != "" ]]
tmp=wrong name 
```

我怎样才能在一个简单的单行中做同样的事情？

我真正想要的是，如果守护程序不存在，它应该给出一个默认字符串，而如果存在它应该给出`which`命令输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:48:27.693

这将像你想要的那样设置 tmp 变量：

```
tmp=$(which daemonName) || tmp="wrong name" 
```

编辑：这个建议的一个问题是`which`命令行为没有标准化，正如 AIX 奇数实现所展示的那样。

当您使用`ksh`时，一个简单的解决方法是用内置命令替换`which`命令：`whence`

```
tmp=$(whence -f daemonName) || tmp="wrong name" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:47:41.890

`which`不会在我的发行版中报告该错误，但这可能对您有用：

```
tmp=`which daemonName 2> /dev/null`
... 
```

基本上，您只是丢弃发生的任何错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T13:31:57.627

做这个：

```
tmp=$(which dawmonName 2>/dev/null)
: ${tmp:=wrong name}
echo "$tmp" 
```

如果变量为空或未设置，则该`:=`部分*分配文本。*该`:`命令除了允许参数扩展或其参数之外什么都不做。

# php - 使用 htaccess 处理 GET

> ID：10139779
> 
> 赞同：0
> 
> 时间：2012-04-13T11:14:04.453
> 
> 标签：php, .htaccess, get

我的 .htaccess 文件将所有 URL 重定向到 index.php?url=$1，如下所示：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php?url=$1 [L] 
```

但是当 url 是 authenticate?code=blahblahblah 时 code= 部分没有被拉入，因此意味着我在处理页面 D 时无法访问它：有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T11:34:04.080

那你需要[`[QSA]`](http://www.google.com/search?q=apache+rewriterule+%5BQSA%5D)旗帜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:33:02.307

`RewriteRule ^(.*)$ index.php?url=$1&%{QUERY_STRING} [L]`改为使用

# php - 从数组中获取特定值

> ID：10139782
> 
> 赞同：1
> 
> 时间：2012-04-13T11:14:10.253
> 
> 标签：php, arrays

我有这个数组：

```
 stdClass Object
(
    [nid] =&gt; 218
    [node_title] =&gt; This is my title text
    [field_data_field_slider_image_delta] =&gt; 0
    [field_data_field_slider_image_language] =&gt; und
    [field_data_field_slider_image_bundle] =&gt; slider
    [field_data_field_slider_image_field_slider_image_fid] =&gt; 1278
    [field_data_field_slider_image_field_slider_image_alt] =&gt; 
    [field_data_field_slider_image_field_slider_image_title] =&gt; 
    [field_data_field_slider_image_field_slider_image_width] =&gt; 1180
    [field_data_field_slider_image_field_slider_image_height] =&gt; 352
    [node_created] =&gt; 1334267878
    [field_data_field_slider_link_node_entity_type] =&gt; node
    [field_data_body_node_entity_type] =&gt; node
    [field_data_field_slider_image_node_entity_type] =&gt; node
    [_field_data] =&gt; Array
        (
            [nid] =&gt; Array
                (
                    [entity_type] =&gt; node
                    [entity] =&gt; stdClass Object
                        (
                            [vid] =&gt; 218
                            [uid] =&gt; 1
                            [title] =&gt; This is my title text
                            [log] =&gt; 
                            [status] =&gt; 1
                            [comment] =&gt; 1
                            [promote] =&gt; 1
                            [sticky] =&gt; 0
                            [nid] =&gt; 218
                            [type] =&gt; slider
                            [language] =&gt; en
                            [created] =&gt; 1334267878
                            [changed] =&gt; 1334268388
                            [tnid] =&gt; 0
                            [translate] =&gt; 0
                            [revision_timestamp] =&gt; 1334268388
                            [revision_uid] =&gt; 1
                            [body] =&gt; Array
                                (
                                    [und] =&gt; Array
                                        (
                                            [0] =&gt; Array
                                                (
                                                    [value] =&gt; <p>This is my body text</p>
                                                    [summary] =&gt; 
                                                    [format] =&gt; full_html
                                                    [safe_value] =&gt;  <p>This is my body text</p> 
                                                    [safe_summary] =&gt;   
                                                )

                                        )

                                )

                            [field_slider_image] =&gt; Array
                                (
                                    [und] =&gt; Array
                                        (
                                            [0] =&gt; Array
                                                (
                                                    [fid] =&gt; 1278
                                                    [alt] =&gt; 
                                                    [title] =&gt; 
                                                    [width] =&gt; 1180
                                                    [height] =&gt; 352
                                                    [uid] =&gt; 1
                                                    [filename] =&gt; slider-d.jpg
                                                    [uri] =&gt; public://images/slider-d.jpg
                                                    [filemime] =&gt; image/jpeg
                                                    [filesize] =&gt; 103135
                                                    [status] =&gt; 1
                                                    [timestamp] =&gt; 1334267878
                                                    [type] =&gt; image
                                                )

                                        )

                                )

                            [field_slider_link] =&gt; Array
                                (
                                    [und] =&gt; Array
                                        (
                                            [0] =&gt; Array
                                                (
                                                    [url] =&gt; http://mydomain.com/my/link
                                                    [title] =&gt; 
                                                    [attributes] =&gt; Array
                                                        (
                                                        )

                                                )

                                        )

                                )

                            [cid] =&gt; 0
                            [last_comment_timestamp] =&gt; 1334267878
                            [last_comment_name] =&gt; 
                            [last_comment_uid] =&gt; 1
                            [comment_count] =&gt; 0
                            [name] =&gt; admin
                            [picture] =&gt; 1242
                            [data] =&gt; a:2:{s:7:"contact";i:0;s:7:"overlay";i:1;}
                        )

                )

        )

    [field_field_slider_link] =&gt; Array
        (
            [0] =&gt; Array
                (
                    [rendered] =&gt; Array
                        (
                            [#markup] =&gt; http://mydomain.com/my/link
                            [#access] =&gt; 1
                        )

                    [raw] =&gt; Array
                        (
                            [url] =&gt; http://mydomain.com/my/link
                            [title] =&gt; http://mydomain.com/my/link
                            [attributes] =&gt; Array
                                (
                                )

                            [display_url] =&gt; http://mydomain.com/my/link
                        )

                )

        )

    [field_body] =&gt; Array
        (
            [0] =&gt; Array
                (
                    [rendered] =&gt; Array
                        (
                            [#markup] =&gt;  <p>This is my body text</p> 
                            [#access] =&gt; 1
                            [#type] =&gt; markup
                            [#pre_render] =&gt; Array
                                (
                                    [0] =&gt; drupal_pre_render_markup
                                    [1] =&gt; ctools_dependent_pre_render
                                )

                            [#children] =&gt;  <p>This is my body text</p> 
                            [#printed] =&gt; 1
                        )

                    [raw] =&gt; Array
                        (
                            [value] =&gt; <p>This is my body text</p>
                            [summary] =&gt; 
                            [format] =&gt; full_html
                            [safe_value] =&gt;  <p>This is my body text</p> 
                            [safe_summary] =&gt;   
                            [#children] =&gt; 
                            [#printed] =&gt; 1
                        )

                    [#children] =&gt;  <p>This is my body text</p> 
                    [#printed] =&gt; 1
                )

            [#children] =&gt;  <p>This is my body text</p> 
            [#printed] =&gt; 1
        )

    [field_field_slider_image] =&gt; Array
        (
            [0] =&gt; Array
                (
                    [rendered] =&gt; Array
                        (
                            [#theme] =&gt; image_formatter
                            [#item] =&gt; Array
                                (
                                    [fid] =&gt; 1278
                                    [alt] =&gt; 
                                    [title] =&gt; 
                                    [width] =&gt; 1180
                                    [height] =&gt; 352
                                    [uid] =&gt; 1
                                    [filename] =&gt; slider-d.jpg
                                    [uri] =&gt; public://images/slider-d.jpg
                                    [filemime] =&gt; image/jpeg
                                    [filesize] =&gt; 103135
                                    [status] =&gt; 1
                                    [timestamp] =&gt; 1334267878
                                    [type] =&gt; image
                                )

                            [#image_style] =&gt; featured_slideshow
                            [#path] =&gt; 
                            [#access] =&gt; 1
                        )

                    [raw] =&gt; Array
                        (
                            [fid] =&gt; 1278
                            [alt] =&gt; 
                            [title] =&gt; 
                            [width] =&gt; 1180
                            [height] =&gt; 352
                            [uid] =&gt; 1
                            [filename] =&gt; slider-d.jpg
                            [uri] =&gt; public://images/slider-d.jpg
                            [filemime] =&gt; image/jpeg
                            [filesize] =&gt; 103135
                            [status] =&gt; 1
                            [timestamp] =&gt; 1334267878
                            [type] =&gt; image
                        )

                )

        )

) 
```

我需要获得`[url]`价值（在这个是`http://mydomain.com/my/link`）

我尝试按照教程进行操作，结果如下：

```
print $row->field_field_slider_link[0]['raw']['url'] 
```

但我收到此错误消息：

```
Notice: Undefined offset: 0 in include() (line 57 of /var/www/vhosts/clientname/public_html/sites/all/themes/custom/templates/views/ff-nivo-slider/views-view-fields--ff-nivo-slider.tpl.php). 
```

谁能看到我在这里做错了什么？

谢谢 C

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:17:50.470

您的代码运行的数组不是您期望的数组。检查 的值`$row->field_field_slider_link`。很可能它是一个空数组。

# java - Java 从 6.21 更新到 6.31 后应用程序无法正常工作

> ID：10139788
> 
> 赞同：3
> 
> 时间：2012-04-13T11:14:35.527
> 
> 标签：java, flash

我们有一个应用程序通过套接字与 Flash 客户端通信。消息采用 XML 格式，不会太长，最多 1000 个字符。

更新后，客户端无法正确接收消息 - 最后缺少一个字节。第一条消息是正确的，第二条消息的末尾缺少字节，并且 Flash 由于解析错误而停止。

该应用程序在生产环境中的 Linux 上运行，但我能够在 Windows 的开发环境中复制该错误。

有两个类用于通信：

```
<a href="http://pastebin.com/3dd2Jzsq">WrappedInputStream</a> 
```

和

```
<a href="http://pastebin.com/hwVwNe4A">WrappedOutputStream</a> 
```

我可以修改 Java 源代码，但无法修改 Flash 客户端。

Java更新后有没有其他人遇到过类似的问题？有没有办法解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:33:41.557

我会编写一些单元测试，您使用 ByteArrayInputStream 和 ByteArrayOutputStream 和/或 PipedInputStream + PipedOutputStream 并尝试模拟问题。

即，如果这确实是一个 Java 问题，您应该能够编写一个失败的自包含测试（基于您所看到的 flash 失败）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T13:37:44.757

您可以尝试确保`WrappedOutputStream`正确关闭。由于这个流的目的是在不关闭父流的情况下发送一些数据，所以开发者可能存在一些误解，所以没有关闭流。

# java - 为什么与 jclouds 一起使用的 CloudWatch API getMetricStatisticsInRegion 会引发 UndeclaredThrowableException？

> ID：10139789
> 
> 赞同：1
> 
> 时间：2012-04-13T11:14:37.920
> 
> 标签：java, amazon-ec2, amazon-web-services, jclouds, amazon-cloudwatch

我正在尝试获取 CloudWatch 指标，但出现以下错误：

```
Exception in thread "main" java.lang.reflect.UndeclaredThrowableException
    at $Proxy85.getMetricStatisticsInRegion(Unknown Source)
    at GetStats.main(GetStats.java:73)
Caused by: java.util.concurrent.ExecutionException: task submitted from the following trace
    at org.jclouds.concurrent.config.ExecutorServiceModule$DescribedFuture.ensureCauseHasSubmissionTrace(ExecutorServiceModule.java:272)
    at org.jclouds.concurrent.config.ExecutorServiceModule$DescribedFuture.get(ExecutorServiceModule.java:256)
    at com.google.common.util.concurrent.ForwardingFuture.get(ForwardingFuture.java:69)
    at com.google.common.util.concurrent.Futures$ChainingListenableFuture.get(Futures.java:661)
    at org.jclouds.concurrent.ExceptionParsingListenableFuture.get(ExceptionParsingListenableFuture.java:76)
    at org.jclouds.concurrent.internal.SyncProxy.invoke(SyncProxy.java:159)
    ... 2 more 
```

重要代码片段如下：

```
 ComputeServiceContext EC2context =
            new ComputeServiceContextFactory().createContext("aws-ec2",
            accesskeyid,
            secretkey,
            ImmutableSet.<Module> of(new Log4JLoggingModule(),
            new SshjSshClientModule()));

    ComputeService ec2 = EC2context.getComputeService();

    for (ComputeMetadata c : ec2.listNodes()){
        NodeMetadata w = ec2.getNodeMetadata(c.getId());
        System.out.println(String.format("---node: %s(%s) status: %s---", 
                w.getId(), w.getName(),w.getState()));

        RestContext<CloudWatchClient, CloudWatchAsyncClient> cloudWatchContext =
                       new RestContextFactory().createContext("aws-cloudwatch",
                                                               accesskeyid, 
                                                               secretkey);
        String region = w.getLocation().getParent().getId();

        Date startday = new Date();
        Date today = new Date();
        Calendar calendar;
        calendar = Calendar.getInstance();
        calendar.setTime(today);
        calendar.add(Calendar.DATE, -1);
        startday = calendar.getTime();
        System.out.println("Today : " + today.toString());
        System.out.println("Startday: " + startday.toString());
        System.out.println("--going to fetch Average CPU--");

        CloudWatchClient client = cloudWatchContext.getApi();

        Set<Datapoint> datapoints = client.getMetricStatisticsInRegion(
                    region, 
                    "CPUUtilization",
                    "AWS/EC2",
                    startday, 
                    today, 
                    60, 
                     Statistics.AVERAGE,
                    GetMetricStatisticsOptions.Builder.unit(Unit.PERCENT));
        System.out.println(String.format("---datapoint for %s---",c.getId()));
        System.out.print(datapoints);
        System.out.println("------end------");

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:46:32.523

cloudwatch 的最终版本作为不同的语法。请查看[cloudwatch-basics](https://github.com/jclouds/jclouds-examples/tree/master/cloudwatch-basics)示例并使用 jclouds 1.5.3+ 版本，看看您是否仍然遇到问题。

# android - 以编程方式动态添加图像按钮Android

> ID：10139793
> 
> 赞同：1
> 
> 时间：2012-04-13T11:14:58.490
> 
> 标签：android

我正在获取字符串数组的动态长度，我想在 imagebutton 中显示图像，并且在水平视图中也显示图像，因为我添加了按钮，但它显示在垂直布局中。这是我的代码：

```
for (int i =0;i<adapt_objmenu.image_array.length;i++){
    ImageButton b1 = new ImageButton(myrefmenu);
        b1.setId(100 + i);

       // b1.setText(adapt_objmenu.city_name_array[i]);
        RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
        if (i > 0) {
            lp.addRule(RelativeLayout.BELOW, b1.getId() - 1);
        }   
        b1.setLayoutParams(lp);
        relative.addView(b1);

    //relate.addView(b1, i,  new RelativeLayout.LayoutParams(width,height));

    //height = height+80;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:27:47.970

在您的第三行中使用它为 ImageButton 设置图像。

```
 for (int i =0;i<adapt_objmenu.image_array.length;i++){
     ImageButton b1 = new ImageButton(myrefmenu);
        b1.setId(100 + i);
         b1.setImageResource(R.drawable.imagename);
       // b1.setText(adapt_objmenu.city_name_array[i]);
        RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
        if (i > 0) {
            lp.addRule(RelativeLayout.RIGHT_OF, b1.getId() - 1);
        }   
        b1.setLayoutParams(lp);
        relative.addView(b1);

//relate.addView(b1, i,  new RelativeLayout.LayoutParams(width,height));

//height = height+80;

} 
```

# r - 矩阵乘法的性能因不同的 R 安装而异

> ID：10139797
> 
> 赞同：3
> 
> 时间：2012-04-13T11:15:02.893
> 
> 标签：r

我可以访问已安装 R 的两个集群。一直以来，我一直在对我的东西进行编码和测试。当我将代码移动到新集群时，突然所有矩阵乘法都变得非常慢。以下是一些数字：

```
Cluster-1:
> a <- matrix(0, nrow=2000, ncol=2000)
> b <- matrix(0, nrow=2000, ncol=2000)
> system.time(c <- a %*% b)
   user  system elapsed 
   0.07    0.03    0.10

Cluster-2:
> a <- matrix(0, nrow=2000, ncol=2000)
> b <- matrix(0, nrow=2000, ncol=2000)
> system.time(c <- a%*% b)
   user  system elapsed 
 13.682   0.014  13.695 
```

请注意，我没有使用任何稀疏矩阵。

Cluster-1 使用 R 版本 2.12.1，Cluster-2 使用 R 版本 2.15.0。第二个集群是否缺少任何特殊库？我如何找到哪一个？谢谢。

**编辑：** 添加有关集群的更多详细信息：

集群 1：

```
> sessionInfo()
R version 2.12.1 (2010-12-16)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=C              LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
 [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base 
```

集群 2：

```
> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.iso885915       LC_NUMERIC=C                  
 [3] LC_TIME=en_US.iso885915        LC_COLLATE=en_US.iso885915    
 [5] LC_MONETARY=en_US.iso885915    LC_MESSAGES=en_US.iso885915   
 [7] LC_PAPER=C                     LC_NAME=C                     
 [9] LC_ADDRESS=C                   LC_TELEPHONE=C                
[11] LC_MEASUREMENT=en_US.iso885915 LC_IDENTIFICATION=C           

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:57:57.580

您可能正在使用未优化的 BLAS。见这里的例子： [http ://www.cybaea.net/Blogs/Data/Faster-R-through-better-BLAS.html](http://www.cybaea.net/Blogs/Data/Faster-R-through-better-BLAS.html)

如果是这样，这很容易解决。

您还可以尝试编译和其他技巧： [加快 R 中的循环操作](https://stackoverflow.com/questions/2908822/speed-up-the-loop-operation-in-r/8474941#8474941)

# c# - C# - 捕获要处理的数据库错误代码

> ID：10139799
> 
> 赞同：0
> 
> 时间：2012-04-13T11:15:03.203
> 
> 标签：c#, oracle, error-handling

在我的数据库中，我创建了一个控制 IDTYPE 和 IDNO 对的唯一性的唯一约束。因此，不能有第二行 IDTYPE 为 1，IDNO 为 11232。显然，如果我违反此规定，我的应用程序将因 oracle 唯一约束错误而崩溃。我怎样才能捕捉到这个错误和任何其他错误，因为我不想运行查询来检查是否有任何其他行具有相同的 IDNO 和 IDTYPE 值。如果我能捕捉到这个错误，我可以展示我自己的描述，而不是只有我们程序员才能理解的 Oracle 的描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:21:54.020

所以，如果我没有误解，你正在寻找一个 try-catch 语句，就像这样

```
try { //code to access DB }
catch (Exception e) { //do some stuff } 
```

# sql - 数据库设计：事务设计方法

> ID：10139806
> 
> 赞同：3
> 
> 时间：2012-04-13T11:15:50.680
> 
> 标签：sql, database, database-design

我有一个基本但非常重要的事务数据库设计问题。我正在设计一个模拟四个真实世界实体的事务数据库。这些实体中的每一个都有一个 Owner 属性。当用户创建实体时，他们将指定该实体的所有者是谁。然后，此所有者可以在以后更改。虽然理论上每个所有者可能会根据现实世界的场景而有所不同，但我希望少数所有者拥有许多实体的同一个人。

在当前设计中，所有者存储在一个基本的所有者表中，并且 4 个实体中的每一个都连接到同一个所有者表中，所有者 ID 是实体表中的 FK。所有者表是基本的；它是 OwnerID 和 Name，其中 OwnerID 是 PK，而 OwnerID 是每个实体表中的 FK。

我有一种鬼鬼祟祟的感觉，这对于事务数据库来说是错误的方法，我正在采用的方法就像我正在设计一个报告数据库（星型模式），而所有者是这些实体的一个维度。在当前的设计中，看起来实体属于所有者，而不是相反。

另一种方法是，我要么将所有者存储在每个实体表上，要么为每个实体创建所有者特定的表，即表 EntityOne，然后连接到 EntityOneOwner，其中 EntityID 是 EntityOneOwner 表中的 FK。

希望我在这里有意义。想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T11:19:11.643

实际上，这是 OLTP 数据库的正确方法——听起来像是一个很好的规范化数据库。

报告数据库（例如 OLAP）将被非规范化，所有者名称在不同的表中重复，以便于查询。

# objective-c - 使用Objective-C在pdf中绘制照片

> ID：10139808
> 
> 赞同：0
> 
> 时间：2012-04-13T11:15:55.860
> 
> 标签：objective-c, ios, pdf, drawrect, alassetslibrary

我很难弄清楚这一点，非常感谢一些帮助。

基本上，我正在尝试在用户按下按钮时生成一个 pdf 文档中存储在资产库中的照片。

我可以使用以下代码毫无问题地绘制包含在 pdf 中应用程序资源文件夹中的 .png 图像：

```
- (void) drawImage
{
    UIImage * demoImage = [UIImage imageNamed:@"demo.png"];
    [demoImage drawInRect:CGRectMake( (pageSize.width - demoImage.size.width/2)/2, 350, demoImage.size.width/2, demoImage.size.height/2)];
} 
```

但是，我需要首先使用块将照片从资产库中取出。例如：

```
NSURL *url = [[NSURL alloc] initWithString:image.photo];
        ALAssetsLibrary* library = [[ALAssetsLibrary alloc] init];

        [library assetForURL:url resultBlock:^(ALAsset *asset) {

            ALAssetRepresentation *rep = [asset defaultRepresentation];            
            self.filename = [rep filename];
            NSLog(@"filename for image is: %@", self.filename);

            CGImageRef iref = [rep fullResolutionImage];
            if (iref) 
            {
                self.pdfImage = [UIImage imageWithCGImage:iref];
                NSLog(@"image height %f", self.pdfImage.size.height);

            }

            [self.pdfImage drawInRect:CGRectMake( (pageSize.width - self.pdfImage.size.width/2)/2, 350, self.pdfImage.size.width/2, self.pdfImage.size.height/2)];

        } 
            failureBlock:^(NSError *error) 
        {

            NSLog(@"Couldn't load asset %@ => %@", error, [error localizedDescription]);

        }];

    } 
```

文件名作为 .jpg 文件成功打印到日志中。self.pdfImage.size.height 也打印到日志中，这告诉我它正在查找图像。

但是，在调用 drawInRect 方法时图像为 null 并引发错误：`Invalid Context: 0x0.`

# regex - 使用 htaccess 重写包含句点符号的 URL

> ID：10139813
> 
> 赞同：0
> 
> 时间：2012-04-13T11:16:27.717
> 
> 标签：regex, apache, .htaccess, mod-rewrite

您好我试图将我的网址重写`www.example.com/user.php?user=user.name`为`www.example.com/user.name`

但我收到一条错误消息，我认为这个点把事情搞砸了..这是我的规则

```
RewriteRule ^([a-zA-Z0-9_-]+)$ user.php?user=$1 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T11:53:58.073

使用这个重写规则：

```
# If the request is not for a valid directory
RewriteCond %{REQUEST_FILENAME} !-d
# If the request is not for a valid file
RewriteCond %{REQUEST_FILENAME} !-f
# If the request is not for a valid link
RewriteCond %{REQUEST_FILENAME} !-l
# forward to user.php in a Query parameter user
RewriteRule ^([a-z0-9_.-]+)$ user.php?user=$1 [L,NC,QSA] 
```

如果您不使用这些 RewriteCond 行，那么即使是`style.css`, `site.js`,之类的文件`favicon.ico`也将被转发到`user.php`并且不会在浏览器中呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:23:23.870

请改用此模式：`^([a-zA-Z0-9\_\-\.]+)$`

```
RewriteRule ^([a-zA-Z0-9\_\-\.]+)$ user.php?user=$1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T11:24:55.973

我认为这应该有效：

```
RewriteRule ^([a-zA-Z0-9_\-.]+)$ user.php?user=$1 
```

（只需在可能的字符列表中添加点并转义破折号）

另外，不要忘记`RewriteCond`预先放置一个以避免无限循环。就像是：

```
RewriteCond %{REQUEST_FILENAME} !^user\.php$ 
```

请注意，这假设您没有名为 user.php 的用户；）

# objective-c - 可可中的 NSView 数组？

> ID：10139819
> 
> 赞同：3
> 
> 时间：2012-04-13T11:17:10.587
> 
> 标签：objective-c, macos, cocoa, osx-snow-leopard

我正在开发一个 Mac 应用程序。其中一个窗口可以加载同一个 NIB/XIB 文件中的多个 NSView 对象。

但我的代码如下所示：

```
@interface TheWindowController : NSWindowController {
    //Interface objects
    IBOutlet NSTableView    *detailsTree;
    IBOutlet NSView         *bigView;
    IBOutlet NSView         *subView1;
    IBOutlet NSView         *subView2;
    IBOutlet NSView         *subView3;
    IBOutlet NSView         *subView4;
    IBOutlet NSView         *subView5;
} 
```

我的问题是是否可以将所有这些 IBOutlets 保存在一个数组、字典或类似的东西中。所以将来我可以在我的实现中做这样的事情：

```
- (IBAction)traceTableViewClick:(id)sender {
    //having now a NSArray called subviewsArray
    [[[bigView subviews] objectAtIndex:0] removeFromSuperview];
    [rightView addSubview: [subviewsArray objectAtIndex:[detailsTree selectedRow]]];
} 
```

可能吗？如何？有什么例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:07:41.167

我使用自定义视图做了类似的事情，其中​​包含许多我想整体操作的控件。您需要在`@interface`声明中将它们分开，以便该`IBOutlet` *属性*与 Interface Builder 一起正常工作，但在您的`init`方法中，您可以将它们组织成一个数组或您`NSArray`自己：

```
- (id)init
{
    self = [super init];
    if (self != nil)
    {
        _viewArray = [[NSArray alloc] initWithObjects:subView1, subView2,
                        subView3, subView4, subView5, nil];
    }
    return self;
}

- (void)dealloc
{
    [_viewArray release];
    ...etc...
    [super dealloc];
} 
```

然后，您可以根据需要处理它们：

```
- (void)doThing
{
    for (id view in _viewArray)
    {
        [view doSomething];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T02:34:13.023

只需将您的 NSViews 添加到 NS(Mutable)Array 或 NS(Mutable)Dictionary，就像向它们添加任何其他对象一样。

# wcf - Windows Azure 基本身份验证在云中不起作用？

> ID：10139828
> 
> 赞同：1
> 
> 时间：2012-04-13T11:17:49.037
> 
> 标签：wcf, azure, authorization

我正在使用肥皂（wcf）构建服务。我想用一个密码和用户名让我的端点更加安全。当我尝试添加以下配置时，Windows Azure 会抛出以下错误：

错误：此配置部分不能在此路径中使用。当该部分锁定在父级别时会发生这种情况。锁定是默认情况下 (overrideModeDefault="Deny") 或由具有 overrideMode="Deny" 或旧 allowOverride="false" 的位置标记显式设置的。

Linecode 是：我必须在本地测试时在我的 IIS 中更改它，但显然我无法在 Windows Azure 平台上调整它？

我想做的就是使用自己的密码和用户名进行访问。是个

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.diagnostics>
    <trace>
      <listeners>
        <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" name="AzureDiagnostics">
          <filter type="" />
        </add>
      </listeners>
    </trace>
  </system.diagnostics>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <customErrors mode="Off"/>
  </system.web>

  <system.serviceModel>

    <behaviors>
      <serviceBehaviors>
        <behavior name="credsBehavior">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata externalMetadataLocation="external metadata location" />

          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false" />
          <serviceCredentials>
            <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="WCFServiceWebRole.CustomUserNameValidator, WCFServiceWebRole, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="ServiceEndpointBehavior">
          <schemaValidator validateRequest="True" validateReply="False">
            <schemas>
              <add location="schemalocation" />
            </schemas>
          </schemaValidator>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="false" />

    <extensions>
      <behaviorExtensions>
        <add name="schemaValidator" type="WCFServiceWebRole.Validation.SchemaValidationBehaviorExtensionElement, WCFServiceWebRole, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
      </behaviorExtensions>
    </extensions>

    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpsBinding_CvServiceInterface" maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" receiveTimeout="01:00:00" openTimeout="01:00:00" closeTimeout="01:00:00" sendTimeout="01:00:00">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
                        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />

          <security mode="Transport">
              <transport clientCredentialType="Basic"/>
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>

    <services>
      <service name="WCFServiceWebRole.CvService" behaviorConfiguration="credsBehavior">
        <endpoint address="myendpoint" behaviorConfiguration="ServiceEndpointBehavior" binding="basicHttpBinding" bindingConfiguration="BasicHttpsBinding_CvServiceInterface" contract="ICvService" />
      </service>
    </services>

  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <directoryBrowse enabled="true" />

    <security>
      <authentication>
        <basicAuthentication enabled="true"/>
      </authentication>
    </security>
  </system.webServer>
</configuration>

<!--<system.webServer>
  <security>
    <authentication>
      <anonymousAuthentication enabled="false" />
      <basicAuthentication enabled="true" />
    </authentication>
  </security>
</system.webServer>--> 
```

杰伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:33:40.790

默认情况下，基本身份验证在 Windows Azure Web 角色中不可用。

![在此处输入图像描述](../Images/c6c15f886069ac35694732808145bfc0.png)

您需要创建 2 个启动脚本：

**用于安装基本身份验证的 Powershell 脚本**

```
Import-Module ServerManager
Add-WindowsFeature Web-Basic-Auth 
```

注意：这需要 Windows Server 2008 R2 中包含的 PowerShell 2.0（您需要将**osFamily**设置为 2 以获取 Windows Server 2008 R2：http: [//msdn.microsoft.com/en-us/library/windowsazure/ ee758710.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee758710.aspx) )

**将激活基本身份验证的 Bat 文件**

```
%windir%\system32\inetsrv\appcmd set config /section:basicAuthentication /enabled:true 
```

**问题**

为什么您甚至需要基本身份验证？如果我错了，请纠正我，但是 WCF 中的用户名/密码身份验证应该在没有 IIS 的情况下工作，所以我不明白为什么它需要基本身份验证才能工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:12:04.280

就像 Sandrino 提到的那样，我不需要 basicauth 来获得使用自定义用户名和密码的授权和身份验证。

代替：

```
<security mode="Transport">
<transport clientCredentialType="Basic"/>
</security> 
```

我必须做：

```
 <security mode="TransportWithMessageCredential">
    <transport clientCredentialType="None"/>
    <message clientCredentialType="UserName" />
  </security> 
```

在客户端：

```
 ServiceReference1.CvServiceInterfaceClient cl = new ServiceReference1.CvServiceInterfaceClient();
    ClientCredentials creds = new ClientCredentials();

    creds.UserName.UserName = "username";
    creds.UserName.Password = "password";
    var defaultCredentials = cl.Endpoint.Behaviors.Find<ClientCredentials>();
    cl.Endpoint.Behaviors.Remove(defaultCredentials);
    cl.Endpoint.Behaviors.Add(creds); 
```

杰伦

# c++ - 像油漆一样添加颜色（颜色）（蓝色+黄色=绿色等）

> ID：10139833
> 
> 赞同：6
> 
> 时间：2012-04-13T11:17:54.073
> 
> 标签：c++, objective-c, math, colors, cocos2d-iphone

我正在使用 cocos2d 库制作 iOS 游戏。

假设您有两个具有两种不同颜色的对象 - 在 RGB 中定义为

```
Blue:    0,0,255
Yellow:  255,255,0 
```

我想添加蓝色和黄色来制作绿色。

让事情变得过于复杂，假设蓝色对象比黄色对象大（为了论证，假设比例是 2:1），我添加的蓝色是黄色的两倍 - 我如何计算这个新的（浅绿色）颜色正确。

我了解 LAB * 颜色空间对于这种“自然颜色”之类的东西很有用，但我不确定如何使用它——尤其是在 cocos2d 对象的上下文中，该对象（AFAIK）仅限于在其中使用 RGB配色方案。

我非常感谢有关如何实现这一点的实际帮助。多谢！

**21/4 更新：所以在 LAB* blue+yellow ≠ green 中（当您看到**[它们位于同一通道的两端](http://www.google.co.nz/imgres?q=lab%20channels&um=1&hl=en&client=safari&sa=N&rls=en&authuser=0&biw=1280&bih=738&tbm=isch&tbnid=DVdQ4Pdbkvg5FM:&imgrefurl=http://thegistofit.org/custom-white-balance-using-lab/&docid=9i_uP1MmIzFpBM&imgurl=http://thegistofit.files.wordpress.com/2009/03/lab-channels.jpg%253Fw%253D497%2526h%253D202&w=497&h=202&ei=e9-RT9GNCuuuiQfp-6GHBA&zoom=1&iact=hc&vpx=370&vpy=271&dur=345&hovh=90&hovw=221&tx=212&ty=56&sig=118409044489115021354&page=2&tbnh=83&tbnw=204&start=28&ndsp=20&ved=1t:429,r:11,s:28,i:155)时，这是有道理的）。[稍微](https://stackoverflow.com/questions/1351442/is-there-an-algorithm-for-color-mixing-that-works-like-mixing-real-colors) 讨论一下 SO，[这](https://stackoverflow.com/questions/6130621/algorithm-for-finding-the-color-between-two-others-in-the-colorspace-of-painte)实际上是一个相当棘手的问题。似乎最终的答案是使用一个名为 Krita 的开源软件使用的 Kubelka-Munk 方法。我在任何地方都找不到（公式或代码本身）。

[这个问题](https://stackoverflow.com/q/6130621/459116)有[一个链接](http://go.pastie.org/1976031)，它使用 HSL 以类似的方法进行绘画。我会尝试看看它是否有效，我会在这里反馈结果。

与此同时**[，如果有人知道如何实现 Kubelka-Munk](https://stackoverflow.com/q/10254022/459116)**或者我可以在哪里找到代码来执行此操作，或者其他解决方案，我会非常非常激动！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T14:33:20.113

没有混合蓝色和黄色产生绿色的颜色模型。自己试试水粉画，唯一有效的方法是青色和黄色。这就是为什么您应该尝试从 RGB 切换到 CMYK，并在需要时返回。这是如何完成的

```
void toCMYK(float red, float green, float blue, float* cmyk)
{
  float k = MIN(255-red,MIN(255-green,255-blue));
  float c = 255*(255-red-k)/(255-k); 
  float m = 255*(255-green-k)/(255-k); 
  float y = 255*(255-blue-k)/(255-k); 

  cmyk[0] = c;
  cmyk[1] = m;
  cmyk[2] = y;
  cmyk[3] = k;
}

void toRGB(float c, float m, float y, float k, float *rgb)
{
  rgb[0] = -((c * (255-k)) / 255 + k - 255);
  rgb[1] = -((m * (255-k)) / 255 + k - 255);
  rgb[2] = -((y * (255-k)) / 255 + k - 255);
} 
```

然后在你的代码中，混合青色和黄色

```
float cmyk1[4];
toCMYK(255, 255, 0, cmyk1);  // yellow

float cmyk2[4];
toCMYK(0, 255, 255, cmyk2);  // cyan

// Mixing colors is as simple as adding
float cmykMix[] = { cmyk1[0] + cmyk2[0], cmyk1[1] + cmyk2[1], cmyk1[2] + cmyk2[2], cmyk1[3] + cmyk2[3] };

float rgb[3];
toRGB(cmykMix[0], cmykMix[1], cmykMix[2], cmykMix[3], rgb);  

NSLog(@"RGB mix = (%f, %f, %f)", rgb[0], rgb[1], rgb[2]); 
```

运行代码将产生：`RGB mix = (0.000000, 255.000000, 0.000000)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T13:22:16.530

我认为，值得尝试 HSL 色彩空间。添加颜色时，我们会插入它们的色调值（甚至考虑到物体的权重）。如果颜色为 100% 饱和度，则亮度和饱和度值将相等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T11:47:48.757

查看这个网站上的公式：[http](http://www.easyrgb.com/index.php?X=MATH) ://www.easyrgb.com/index.php? X=MATH 我一直在做类似的事情，可以通过转换RGB->XYZ->Lab来实现。然而，计算非常昂贵（如果你为很多像素做这件事）。

如果您想获得类似于人眼的结果，请在尝试混合颜色时忘记 RGB 数学

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T22:28:19.240

染料在现实世界中不起作用，就像减色模型所暗示的那样。用于 CYMK 印刷的染料非常接近，因为它们是为此目的而配制的，但许多由天然物质制成的染料可能表现得有些奇怪。困难在于，虽然白光被认为是红色、绿色和蓝色的组合，但它实际上由许多不同的波长组成——字面意思是“彩虹的所有颜色”——每一种都会刺激红色、绿色、和眼睛中不同数量的蓝色受体。两种看起来相同的颜色实际上可能包含不同的波长组合；同样，两种染料在白光下可能看起来相同，但吸收不同的波长组合。这些染料单独使用时可能看起来彼此相同，

尽管染料有时会很棘手，但油漆更糟糕。油漆中含有反射粒子，一些照射到油漆表面的光会被它击中的第一个粒子反射回表面；在这方面，它们像加色一样混合。例如，如果油漆含有 20% 的绿色颗粒，那么无论它可能包含什么其他颜色，都会反射大量的绿光。另一方面，一些照射到涂漆表面的光会反弹并击中多个粒子。如果这些粒子中的任何一个吸收了某种颜色的光子，则该光子将不会被反射。在这方面，油漆的行为更像是减色。在实践中，油漆的行为有点像加色，有点像减色，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-14T08:34:33.103

实际上，转换 RGB->XYZ->LAB 似乎与 RGB->LAB 完全一样

# c# - 检索具有 CLSID 错误的组件的 COM 类工厂：8000401a

> ID：10139834
> 
> 赞同：2
> 
> 时间：2012-04-13T11:18:01.550
> 
> 标签：c#, asp.net, com, asp.net-2.0

从上次开始，我收到以下错误。因为我正在使用 Microsoft Word dll 创建进一步附加到邮件的 word 文件。

```
Server Error in '/' Application.
Retrieving the COM class factory for component with CLSID {000209FF-0000-0000-C000-000000000046} failed due to the following error: 8000401a.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.Runtime.InteropServices.COMException: Retrieving the COM class factory for component with CLSID {000209FF-0000-0000-C000-000000000046} failed due to the following error: 8000401a.

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

[COMException (0x8000401a): Retrieving the COM class factory for component with CLSID {000209FF-0000-0000-C000-000000000046} failed due to the following error: 8000401a.]
   iPortal.user.sendRAMail.GetData(Object fileName) in XXX:512
   iPortal.user.sendRAMail.btnSend_Click(Object sender, EventArgs e) in XXX:1300
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +107
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +110
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3436

Version Information: Microsoft .NET Framework Version:2.0.50727.4216; ASP.NET Version:2.0.50727.4223 
```

任何人都可以向我建议任何解决方案。因为我也有一些解决方案说我可以使用更改 Word dll 的访问权限`DCOMCNFG`但仍然出现相同的错误。但有时它可以正常工作......所以我认为代码不是问题。还有`how I will find which account is using my current application.`（例如网络服务、管理员等）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T09:36:06.967

我找到了解决方案，

使用 DCOMCNFG.exe 打开它并转到组件服务->计算机->我的电脑->DCOM 配置->检查 Microsoft Office Word 选项并选择选项卡安全性。在这里您将获得启动和激活权限的选项->选择自定义并单击编辑并添加将以完全访问权限运行您的应用程序的用户。

就是这样，这解决了我的问题，这将有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:17:25.463

如果我能找到更好的解决方案，我的想法是一起摆脱 Com ，我会使用它

看一下这个

[http://docx.codeplex.com/](http://docx.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-16T15:15:09.693

我在服务器上做的一件事是在机器上打开 Microsoft Word，这似乎导致错误消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-20T00:10:13.793

您可以创建另一个用户，然后使用该用户登录并创建远程到 121.0.0.1 和主用户（环回 rpc ！！！）然后从新用户断开连接，您将拥有交互式用户

# iphone - 通过 GameCenter 向多人发送 UIImage

> ID：10139837
> 
> 赞同：0
> 
> 时间：2012-04-13T11:18:13.613
> 
> 标签：iphone, ios4, ios5, xcode4.2, game-center

我有一个来自 CGContext 的 UIImage，现在我需要通过 GameCenter 发送该图像，另一端的其他玩家应该收到该图像

AnyLink 或代码被接受。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T13:01:21.373

您是否有连接玩家的代码，以便他们能够接收和发送 NSData？如果是这样，只需将 UIImage 转换为 NSData 并发送它。如果没有，请查看本教程以了解游戏中心通信： [http ://www.raywenderlich.com/3276/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-12](http://www.raywenderlich.com/3276/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-12)

# java - HQL JOIN QUERY：无法解析属性：

> ID：10139838
> 
> 赞同：0
> 
> 时间：2012-04-13T11:18:34.073
> 
> 标签：java, spring, hibernate, hql

尝试执行联接查询时出现以下错误

```
("could not resolve property: Countries of: com.fexco.helloworld.web.model.Customer [select cus from com.fexco.helloworld.web.model.Customer as cus join cus.Countries as cou where cus.id = cou.id]") 
```

我正在尝试通过一个共同的 ID 将 Customer 和 Country 表连接在一起

客户.hbm.xml

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="com.ccg.db.test">
<class name="Customer" table="Customer">
    <id name="id" column="id" type="bigiint">
        <generator class="native"/>
    </id>
    <property name="firstname" type="string" >
       <column name="firstname" /> 
    </property>
    <property name="surname" type="string" >
        <column name="surname" /> 
    </property>
    <property name="address1" type="string" >
        <column name="address1" /> 
    </property>
    <property name="address2" type="string" >
        <column name="address2" /> 
    </property>
    <many-to-one name="Countries" column="id" class="Countries" /> 
</class>
</hibernate-mapping> 
```

国家.hbm.xml

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"   "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="com.ccg.db.test">
<!-- CLASS NAME MIGHT BE CUSTOMER -->
<class name="Countries" table="Countries">
    <id name="id" column="id">
        <generator class="native" />
    </id>
    <property name="country" column="country" />
</class>
</hibernate-mapping> 
```

这是我试图调用的查询

```
String sql_query = "select cus from Customer as cus join cus.Countries as cou where cus.id = cou.id"; 
```

我是 HQL 的新手，所以不确定它的一切，所以有人知道如何解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:27:38.330

它是 cus.countries，而不是 cus.Countries。属性名称区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:27:43.400

尝试

```
select cus from Customer cus  where cus.id = cus.countries.id 
```

# git - NetBeans 未在右键菜单中显示 GIT

> ID：10139839
> 
> 赞同：2
> 
> 时间：2012-04-13T11:18:39.057
> 
> 标签：git, netbeans

我正在关注这个[http://netbeans.org/kb/docs/ide/git.html](http://netbeans.org/kb/docs/ide/git.html)教程。我经历了第一阶段并让 git 控制台打印“...完成”，如图所示。然后我想添加/提交我的文件，但是当我单击任何文件的右键时，我根本看不到 GIT 菜单。

在 Team 菜单上，GIT 下只有初始化和克隆。我对 GIT（或版本控制）有点陌生，所以我在这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:41:02.983

正如 OP 评论的那样，对于存储库路径，它会在使用默认路径时起作用（即 netbean 项目的路径之一）

![使用 Netbeans 进行 Git 初始化](../Images/6debfa42ff85798a35ed5b0a13d3eafa.png)

* * *

2016 年 8 月更新

注意：对于 NetBeans 8.1（2015 年 10 月发布），如[Darek MST](https://stackoverflow.com/users/5346628/darek-mst)[所述](https://stackoverflow.com/review/suggested-edits/13290974)，该选项也在：`Team / Git / Initialize Repository`

[![主菜单](../Images/cc0d4a93ce9ce0b0352dc63b92ea7362.png)](https://i.stack.imgur.com/ZpXNW.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T13:22:25.717

你需要克隆或创建（初始化）一个新的存储库，否则你没有什么可提交的。

[http://help.github.com/create-a-repo/](http://help.github.com/create-a-repo/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-01T16:08:55.023

就我而言，我也有“.svn”子目录，这就是问题所在。

# rest - 带有 DotNetOpenAuth 的 ASP.NET Web API

> ID：10139840
> 
> 赞同：7
> 
> 时间：2012-04-13T11:18:41.593
> 
> 标签：rest, oauth, dotnetopenauth, asp.net-mvc-4, asp.net-web-api

我正在使用 ASP.NET WebAPI 为我的 ASP.NET MVC4 Web 应用程序构建 RESTful Web API。我想使用 OAuth 1.0 来提供授权。我正在寻找 DotNetOpenAuth 库。谁能帮助我了解如何将此库的服务提供者与 ASP.NET WebAPI 一起使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T12:28:58.657

我和你的情况类似。
我建议您看一下[Thinktecture 的 IdentityModel Authorization 扩展，用于 Web API](https://github.com/thinktecture/Thinktecture.IdentityModel.Http)（和 MVC）。
这是一个托管在 GitHub 上的开源项目，还有一些示例可供查看。

[您还可以从Dominick Baier 的博客](http://www.leastprivilege.com/)中获取很多有用的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T01:22:13.930

您是否查看过 DotNetOpenAuth 附带的 OAuthServiceProvider 示例？它演示了受 OAuth 1.0 保护的 WCF 服务。

# php - PHP日期返回错误时间

> ID：10139843
> 
> 赞同：11
> 
> 时间：2012-04-13T11:18:54.733
> 
> 标签：php, date

以下脚本在我调用后返回错误的时间`date_default_timezone_set("UTC")`

```
<?PHP   
    $timestamp = time();
    echo "<p>Timestamp: $timestamp</p>";

    // This returns the correct time
    echo "<p>". date("Y-m-d H:i:s", $timestamp) ."</p>";

    echo "<p>Now I call 'date_default_timezone_set(\"UTC\")' and echo out the same timestamp.</p>";
    echo "Set timezone = " . date_default_timezone_set("UTC");

    // This returns a time 5 hours in the past
    echo "<p>". date("Y-m-d H:i:s", $timestamp) ."</p>";

?> 
```

服务器上的时区是**BST**。所以应该发生的是，对“日期”的第二次调用应该返回第一次调用后 1 小时的时间。它实际上比第一个晚了 5 个小时。

我应该注意，服务器最初是使用 EDT 时区 (UTC -4) 设置的。更改为 BST (UTC +1) 并重新启动服务器。

我不知道这是 PHP 问题还是服务器问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T11:24:03.353

这几乎可以肯定不是 php 中的错误，而是在您的本地时区配置中。

最有可能的是，您实际上并没有更改系统范围的时区，而只是更改了交互式显示的时区。检查是否`/etc/localtime`符合您的预期。在 debian 系统上，您可以运行 tzselect（具有超级用户权限）来设置系统范围的时区。

设置时区后，您可能需要重新设置时钟。在许多系统上，这应该会随着时间的推移自动发生，但您可以通过运行`ntpdate -u pool.ntp.org`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-14T05:48:02.063

只需使用以下代码设置您的区域

```
 date_default_timezone_set("Asia/Bangkok");//set you countary name from below timezone list
    echo $date = date("Y-m-d H:i:s", time());//now it will show "Asia/Bangkok" or your date time 
```

支持的时区列表 [http://www.php.net/manual/en/timezones.php](http://www.php.net/manual/en/timezones.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-18T01:28:39.333

您应该查看 php 手册以了解您所在国家/地区的正确时区。然后在 date_default_timezone_set() 函数中设置。为了澄清，我在这里解释了它[http://t2techblog.com/php-a-simple-function-for-getting-the-current-nigeria-local-time/](http://t2techblog.com/php-a-simple-function-for-getting-the-current-nigeria-local-time/)

# c++ - GCC 奇怪的链接器错误.. 适用于 Visual Studio 2010

> ID：10139862
> 
> 赞同：0
> 
> 时间：2012-04-13T11:20:50.233
> 
> 标签：c++, visual-studio-2010, gcc, linker

我在使用 gcc 时遇到了这个奇怪的链接器错误，我认为当我使用 Visual Studio 时代码可以正常工作。

```
/tmp/ccfcdCxg.o: In function `global constructors keyed to main':
codechef_permut2.cpp:(.text+0xa): undefined reference to `std::ios_base::Init::Init()'
codechef_permut2.cpp:(.text+0x19): undefined reference to `std::ios_base::Init::~Init()'
/tmp/ccfcdCxg.o: In function `ambig(unsigned long)':
codechef_permut2.cpp:(.text+0x47): undefined reference to `operator new[](unsigned long)'
codechef_permut2.cpp:(.text+0x52): undefined reference to `operator new[](unsigned long)'
/tmp/ccfcdCxg.o:(.eh_frame+0x12): undefined reference to `__gxx_personality_v0'
collect2: ld returned 1 exit status 
```

我尽力发布任何代码，因为我认为它不是必需的，但如果有人觉得我会发布它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T11:23:05.863

我的猜测是您正在使用`gcc`而不是`g++`链接您的程序。`gcc`除非您告诉它，否则不会包含 C++ 库；`g++`将要。

# python - 从另一个函数调用一个函数内部定义的变量

> ID：10139866
> 
> 赞同：37
> 
> 时间：2012-04-13T11:21:23.670
> 
> 标签：python, function, variables

如果我有这个：

```
def oneFunction(lists):
    category=random.choice(list(lists.keys()))
    word=random.choice(lists[category])

def anotherFunction():
    for letter in word:              #problem is here
        print("_",end=" ") 
```

我以前定义过`lists`，所以`oneFunction(lists)`效果很好。

我的问题是`word`在第 6 行调用。我试图`word`在第一个函数之外定义相同的`word=random.choice(lists[category])`定义，但这`word`总是相同的，即使我调用`oneFunction(lists)`.

我希望能够，每次我调用第一个函数然后调用第二个函数时，都有一个不同的`word`.

我可以在不定义`word`之外的情况下做到这一点`oneFunction(lists)`吗？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-04-13T11:26:35.197

一种方法是`oneFunction`返回单词，以便您可以使用`oneFunction`而不是`word`in `anotherFunction`：

```
def oneFunction(lists):
    category = random.choice(list(lists.keys()))
    return random.choice(lists[category])

def anotherFunction():
    for letter in oneFunction(lists):              
        print("_", end=" ") 
```

另一种方法是将`anotherFunction`接受`word`作为参数，您可以从调用结果中传递该参数`oneFunction`：

```
def anotherFunction(words):
    for letter in words:              
        print("_", end=" ")
anotherFunction(oneFunction(lists)) 
```

最后，您可以在一个类中定义两个函数，并创建`word`一个成员：

```
class Spam:
    def oneFunction(self, lists):
        category=random.choice(list(lists.keys()))
        self.word=random.choice(lists[category])

    def anotherFunction(self):
        for letter in self.word:              
            print("_", end=" ") 
```

创建类后，您必须实例化一个实例并访问成员函数：

```
s = Spam()
s.oneFunction(lists)
s.anotherFunction() 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2017-08-21T06:32:34.433

python中的一切都被视为对象，因此函数也是对象。所以你也可以使用这个方法。

```
def fun1():
    fun1.var = 100
    print(fun1.var)

def fun2():
    print(fun1.var)

fun1()
fun2()

print(fun1.var) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-04T16:04:52.573

最简单的选择是使用全局变量。然后创建一个获取当前单词的函数。

```
current_word = ''
def oneFunction(lists):
    global current_word
    word=random.choice(lists[category])
    current_word = word

def anotherFunction():
    for letter in get_word():              
          print("_",end=" ")

 def get_word():
      return current_word 
```

这样做的好处是你的函数可能在不同的模块中并且需要访问变量。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-10T09:12:18.813

```
def anotherFunction(word):
    for letter in word:              
        print("_", end=" ")

def oneFunction(lists):
    category = random.choice(list(lists.keys()))
    word = random.choice(lists[category])
    return anotherFunction(word) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-28T06:56:37.313

```
def oneFunction(lists):
    category=random.choice(list(lists.keys()))
    word=random.choice(lists[category])
    return word

def anotherFunction():
    for letter in word:             
        print("_",end=" ") 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-06-17T19:10:30.560

所以我继续尝试做我想到的事情您可以轻松地使第一个函数**返回**单词，然后在*另一个函数*中使用该函数，同时在新函数中传入相同的对象，如下所示：

```
def oneFunction(lists):
    category=random.choice(list(lists.keys()))
    word=random.choice(lists[category])
    return word

def anotherFunction(sameList):
    for letter in oneFunction(sameList):             
        print(letter) 
```

# stored-procedures - 根据参数在SSRS中隐藏子报告（并且不执行存储过程）

> ID：10139869
> 
> 赞同：4
> 
> 时间：2012-04-13T11:21:28.377
> 
> 标签：stored-procedures, reporting-services, hide, subreport

我有一个问题，我希望根据传递给主报告的参数隐藏/显示子报告。

我可以使用将隐藏/显示子报告的表达式设置隐藏属性，但是我使用 SQL Profiler 发现的是，即使子报告被隐藏，子报告存储过程仍然会被执行。

除了更改存储过程本身之外，是否有人知道避免这种情况的方法。如果没有，即使隐藏子报告，是否有人知道执行存储过程的原因？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T08:43:09.420

SSRS 中的隐藏报表元素仍在处理中 - hidden 属性仅确定它们是否显示在输出中。

确保过程仅有条件地执行的一种方法是将数据集中存储过程的名称更改为表达式 - 例如：

```
=iif(Parameters!RunMyDataset.Value="Y","sp_MyDataSet","sp_Dummy") 
```

- 其中 sp_Dummy 是执行最少处理的存储过程（例如`SELECT NULL`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-07T16:26:01.103

有一种方法可以解决这个问题。根据您对问题的描述。例如，您有 4 个子报表并将它们命名为 page1 到 page4。主报告会将参数“Investor_ID”值传递给所有这 4 个页面。在主报表中，您需要创建 4 个布尔参数并设置子报表的隐藏属性来控制这 4 个子报表是否可见。

例如，使用表达式`=iif(Parameters!Page1.Value = true, false, true)`，以便当您为参数 page1 选择 true 时， page1 将显示，否则将隐藏。

然后您需要在“子报表属性”中为子报表配置参数。

对于子报表需要的参数 Investor_ID，在值中选择表示和使用`=IIF(Parameters!Page1.Value = true, Fields!Investor_ID.Value, nothing)`。这意味着如果您选择隐藏 page1，则 mainreport 不会将任何内容传递给子报表 page1。然后 Page1 将不会运行，并且会显示“错误：无法显示子报表”，因为 Investor_ID 参数为空。但是我们隐藏了那个子报告。所以 page1 不会出现。

通过这种方式，您可以控制隐藏的子报表是否执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-19T06:32:14.890

1.  右键单击主报表中的子报表对象，然后选择“格式化子报表...”。这将打开格式编辑器。

2.  在格式编辑器中选择“子报表”选项卡。

3.  勾选“禁止空白子报表”复选框。

# .htaccess - 用于 swf 文件的 htaccess

> ID：10139875
> 
> 赞同：0
> 
> 时间：2012-04-13T11:21:55.150
> 
> 标签：.htaccess, mod-rewrite

htaccess 是否适用于接受变量的 swf 文件？

我有这个 swf 网址...

`http://subdom.domain.tld/subfolder/live.swf?stream=rtmp://stream.domain.com/application&provider=rtmp&file=streamname&autostart=true`

我希望它被重写为 `http://subdom.domain.tld/subfolder/assignedname/`

到目前为止，这是我在 .htaccess 文件上写的

```
RewriteEngine On

RewriteRule ^kwt/?$ live.swf?stream=rtmp://stream.domain.com/application&provider=rtmp&file=streamname&autostart=true [NC,L] 
```

它似乎确实重写了 swf 文件，因为 swf 正在显示，但由于某种原因无法识别该变量。即使在 RewriteRule 中将自动播放变量设置为 true，它也不会自动播放。

我的代码有问题还是无法在 swf 文件中完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:24:11.120

您不能这样做，因为 Flash 播放器会在“显示的”URL 中查找查询字符串中的变量，而重写的“干净”URL 没有这些变量。

# android - android 4.0 中的应用程序未安装错误

> ID：10139878
> 
> 赞同：0
> 
> 时间：2012-04-13T11:22:30.297
> 
> 标签：android

我在我的应用程序中使用谷歌地图。所以我需要清单文件中的以下共享库。

*android:name="com.google.android.maps"* 并且应用程序运行良好。

由于共享库谷歌地图不可用，这在 android 4.0 中不起作用。

如果我在清单文件中删除上述库，它也可以在 4.0 设备中工作。

所以我的问题是如何让它在 4.0 以及其他设备上运行。

请帮我。提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:36:11.600

为 ICS 准备不同的 APK 文件。Google Play 支持为不同版本安装多个 APK

# windows-phone-7 - 如何捕获数据包

> ID：10139879
> 
> 赞同：0
> 
> 时间：2012-04-13T11:22:39.593
> 
> 标签：windows-phone-7, packet-capture, .net

有什么方法可以用 windows phone 7 捕获和分析数据包？例如，我可以使用 Sharppcap 或 pcap.net 来开发捕获数据包的应用程序吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:53:00.203

数据包捕获需要对网络驱动程序的低级访问。Windows Phone 没有这样的东西，你只能使用你自己打开的套接字。

# sql-server - 从远程计算机运行 SQL Server 查询

> ID：10139880
> 
> 赞同：-2
> 
> 时间：2012-04-13T11:22:40.020
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, sql-server-2008-r2

我也是 SQL Server 和数据库的新手。

我们在服务器上安装了 SQL Server 2008。

我想在位于 SQL Server 2008 中的数据库上从远程计算机运行查询。

我想知道是否有任何工具/实用程序，以便我可以将其安装在本地计算机上并在数据库服务器上运行查询。

任何替代方法都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:18:00.703

如果您想要运行查询的服务器中已经安装了 SQL Server 2008，您只需要 SQL Server Management Studio（查询分析器）。只需创建与服务器的连接，您就可以运行任何查询。

您可以使用 TeamViewer 等其他工具控制服务器，并使用 sqlcmd（从命令提示符）、查询分析器或任何其他工具（如[queryexpress](http://www.albahari.com/queryexpress.aspx)和许多其他工具）运行查询（如果需要）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:33:10.080

使用 SQL Server Management Studio 并连接（通过您的服务器的名称或 IP）到您的远程服务器并运行您的 sql

# iphone - popToRoot时如何传递值

> ID：10139881
> 
> 赞同：1
> 
> 时间：2012-04-13T11:22:43.553
> 
> 标签：iphone, ios, xcode, uinavigationcontroller

想知道当我 popToRoot 时如何将值传递回根视图控制器。

```
introVideoViewController *intro = [introVideoViewController alloc];
    intro.fromReset =1;
    [self.navigationController popToRootViewControllerAnimated:NO]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:31:53.787

对于要从​​中弹出的 VC，您需要给它一个委托属性 -

```
@class MyViewController;

@protocol MyViewControllerDelegate <NSObject>

    -(void)myViewControllerDidDismiss:(MyViewController *)controller withSomeObject:(id)someObject;

@end

@interface MyViewController : UIViewController

@property (nonatomic, assign) id<MyViewControllerDelegate> myViewControllerDelegate;

@end 
```

...并在根VC中使其符合该协议，并实现dismiss方法-

```
-(void)myViewControllerDidDismiss:(MyViewController *)controller withSomeObject:(id)someObject {

    // now I've got the object from the VC I just popped

} 
```

忘了提到你需要调用 myViewControllerDidDismiss:withSomeObject: 当你弹出 VC 时。

编辑 - 还忘了提到你需要在创建它时将 VC 的委托设置为你的根 VC，否则它会在你弹回时尝试调用 nil -

```
[myViewController setMyViewControllerDelegate:self]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T11:32:06.333

只需使用以下代码

```
NSArray *arr = [self.navigationController viewControllers];
CLASS_OF_ROOT_VIEW_CONTROLLER *rvc = (CLASS_OF_ROOT_VIEW_CONTROLLER *)[arr objectAtIndex:0];
rvc.variable = value; 
```

# php - Symfony2中如何防止隐藏基于IP的调试工具栏

> ID：10139883
> 
> 赞同：-2
> 
> 时间：2012-04-13T11:22:59.277
> 
> 标签：php, symfony

在我的 Symfony2 生产环境中，我想从我的开发 IP 中显示调试工具栏。从任何其他 ip 访问时，它应该是不可见的。我怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:49:05.110

您无法在生产模式下获得调试工具栏。一种方法是更改​​目录`.htaccess`中的文件，`web`以便可以在 IP 地址之间`app.php`或`app_dev.php`基于 IP 地址更改前端控制器。但这不是一个好主意。因为每次你都会重新生成缓存。在高峰负载时间可能是一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:41:35.460

一个更好的主意是将您的 IP 添加到`app_dev.php`文件中：

```
if (!in_array(@$_SERVER['REMOTE_ADDR'], array(
    '127.0.0.1',
    'YOUR.IP.RIGHT.HERE',
    '::1',
))) {
    header('HTTP/1.0 403 Forbidden');
    exit('You are not allowed to access this file. Check '.basename(__FILE__).' for more information.');
} 
```

然后您可以使用`/app_dev.php`.

# backbone.js - Backbone JS / Jasmine / Sinon：测试模型是否在事件发生后发生了变化

> ID：10139886
> 
> 赞同：1
> 
> 时间：2012-04-13T11:23:07.057
> 
> 标签：backbone.js, jasmine, sinon, jasmine-jquery

如何测试主干视图是否触发了事件，然后模型已更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T12:56:05.837

如果您的视图正在生成`el`自身，您可以通过视图的`$el`.

```
 describe("my test", function(){

  var MyModel = Backbone.Model.extend({});

  var MyView = Backbone.View.extend({
    events: {
      "click a": "aClicked"
    },

    aClicked: function(e){
      e.preventDefault();
      this.model.set({foo: "bar"});
    },

    render: function(){
      this.$el.html("<a href='#foo' id='fooLink'>foo</a>");
    }
  });

  var myModel;

  beforeEach(function(){
    myModel = new MyModel();
    var myView = new MyView({
      model: myModel
    });

    myView.render();

    // this will "click" the link
    myView.$("#fooLink").trigger("click");
  })

  it("should do that stuff", function(){
    expect(myModel.get("foo")).toBe("bar");
  });

}); 
```

# fortran - C 预处理器宏：连接（Fortan90 的示例）

> ID：10139889
> 
> 赞同：0
> 
> 时间：2012-04-13T11:23:24.260
> 
> 标签：fortran, concatenation, c-preprocessor

我遇到了以下问题：

我有以下两个正确的工作宏（扩展到 Fortran90 代码）：

```
#define ld_dx(A)   (  (A(ixp1)-A(ix  ))/(dx)  )
#define rd_dx(A)   (  (A(ix  )-A(ixm1))/(dx)  ) 
```

（注意：这些宏依赖于以下附加宏：

```
#define ix    2:nx-1
#define ixp1  1+ix+1
#define ixm1 -1+ix-1 
```

它们还取决于声明：

```
integer, parameter :: nx = 100, dx = 1 
```

)

在我的代码中，我可以通过调用来使用这些宏，例如

```
X = X + ld_dx(Y) 
```

或者：

```
X = X + rd_dx(Y) 
```

现在我希望能够通过编写 d_dx(A,l) 来调用 ld_dx(A)，并通过编写 d_dx(A,r) 来调用 rd_dx(A)。因此，该示例将如下所示：

```
X = X + d_dx(Y,l) 
```

或者

```
X = X + d_dx(Y,r) 
```

=> 我正在寻找可以提供这种语法糖的 CPP 宏（以尽可能接近数学符号）。<=

最直接的做法是：

```
#define d_dx(A,s)  s ## d_dx(A) 
```

不幸的是，这不起作用。CPP 转换

```
d_dx(Y,l) 
```

进入：

```
l ## Y) 
```

我通过研究其他与 CPP 连接相关的问题尝试了很多事情，但我无法弄清楚。非常感谢您的帮助！

山姆

PS：请注意，我也可以将宏“ld_dx(A)”和“rd_dx(A)”重命名为“dl_dx(A)”和“dr_dx(A)”，这是最直接的事情将会：

```
#define d_dx(A,s)  d ## s ## _dx(A) 
```

不幸的是，这也不起作用：CPP 转换

```
d_dx(Y,l) 
```

进入：

```
d ## l ## _dx(Y) 
  1 
```

> 错误：在 (1) 处的表达式中应有右括号

即根本不执行连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:52:53.980

```
#define PASTE(x,y) x##y
#define d_dx(A,s) PASTE(s,d_dx)(A) 
```

标记粘贴（## 运算符）和字符串化（# 运算符）抑制相邻参数的替换，因此您必须分两步完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T07:23:25.123

尝试不带空格。一些预处理器会忽略 ## 两侧的空格，而另一些则不会。

```
#define d_dx(A,s)  d##s##_dx(A) 
```

# asp.net-mvc - 无法在多部分帖子中将 JSON 绑定到 ASP.NET 模型

> ID：10139890
> 
> 赞同：3
> 
> 时间：2012-04-13T11:23:24.367
> 
> 标签：asp.net-mvc, json, binding, controller

我正在使用 ASP.NET MVC3 控制器从 WP7 应用程序接收多部分表单帖子。帖子的格式如下：

```
 {User Agent stuff}
    Content-Type: multipart/form-data; boundary=8cdb3c15d07d36a

    --8cdb3c15d07d36a
    Content-Disposition: form-data; name="user"
    Content-Type: application/json

    {"UserName":"ashish","Password":"ashish"}

    --8cdb3c15d07d36a-- 
```

我的控制器看起来像：

```
 public class User
    {
        public string UserName { get; set;}
        public string Password { get; set; }
    }

    [HttpPost]
    public JsonResult CreateFeed(User user)
    {
    } 
```

我所看到的是用户未绑定到 json 并且用户对象始终为空。我尝试制作用户字符串并使用 DataContractJsonSerializer 手动将其绑定到 User 类，它确实创建并分配了一个对象，但我对它为什么不起作用感到困惑。

我尝试使用非多格式帖子，发现它适用于相同的 json。任何帮助，将不胜感激。

我看到了这些帖子：[ASP.NET MVC。如何在提出我的代码时创建接受和 multipart/form-data](https://stackoverflow.com/questions/5357982/asp-net-mvc-how-to-create-action-method-that-accepts-and-multipart-form-data)和 HTTP 规范[http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)的 Action 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T11:53:24.517

你要找的答案在[这里](https://stackoverflow.com/questions/19113384/tell-modelbinding-that-mvc-action-parameter-is-json)

您必须将其作为字符串读入并在内部进行解析。因此，您的操作将如下所示：

```
[HttpPost]
public JsonResult CreateFeed(string jsonResponse)
{
    JavaScriptSerializer jsonSerializer = new JavaScriptSerializer();
    User user = jsonSerializer.Deserialize<User>(jsonResponse);
} 
```

或者，如果您没有与控制器操作方法相关联的名称的有用 Content-Disposition，您可以执行以下操作：

```
[HttpPost]
public JsonResult CreateFeed()
{
    StreamReader reader = new StreamReader(Request.InputStream);
    string jsonResponse = reader.ReadToEnd();

    JavaScriptSerializer jsonSerializer = new JavaScriptSerializer();
    User user = jsonSerializer.Deserialize<User>(jsonResponse);
} 
```

[此处](http://www.hanselman.com/blog/ABackToBasicsCaseStudyImplementingHTTPFileUploadWithASPNETMVCIncludingTestsAndMocks.aspx)进一步概述了此方法

# tomcat - 保护 tomcat 6 apr SSL 免受 BEAST 攻击

> ID：10139891
> 
> 赞同：3
> 
> 时间：2012-04-13T11:23:37.160
> 
> 标签：tomcat, ssl, apr, beast

我们使用本地 Apache Portable Runtime SSL 连接器在 Tomcat 6 上运行 Web 应用程序，以提供 SSL 连接。我们如何配置服务器以防止 BEAST 攻击？建议的解决方案（1）不能在Tomcat配置中配置，因为它不允许设置SSLHonorCipherOrder参数（2）。

我们目前仅使用设置 SSLCipherSuite="ECDHE-RSA-AES256-SHA384:AES256-SHA256:RC4:HIGH:!MD5:!aNULL:!EDH:!AESGCM" 但使用 SSL 服务器测试的扫描显示服务器仍然易受 BEAST 攻击。我知道我们可以通过在 Tomcat 前面加上一个 Apache 代理来解决这个问题，但是这种变化太具有侵略性，无法在短期内实施。我还可以修补 Tomcat 以添加支持，但这会阻止违反策略的 Tomcat 包的自动更新。

1：[https ://community.quallys.com/blogs/securitylabs/2011/10/17/mitigating-the-beast-attack-on-tls](https://community.qualys.com/blogs/securitylabs/2011/10/17/mitigating-the-beast-attack-on-tls)

2：http: [//tomcat.apache.org/tomcat-6.0-doc/apr.html](http://tomcat.apache.org/tomcat-6.0-doc/apr.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:06:54.360

解决这个问题的合乎逻辑的方法是让 Tomcat 实现一个 CipherOrder 指令，正如这个 BugZilla 链接所示，它似乎被合并到 Tomcat 7.0.30 及以后的版本中。我最有兴趣尝试一下，尝试后会反馈。 [https://issues.apache.org/bugzilla/show_bug.cgi?id=53481](https://issues.apache.org/bugzilla/show_bug.cgi?id=53481)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-02T11:12:57.747

我从来没有发布过我的解决方案。这有点像 hack，但您不需要修补/重新编译 JSSE 或 Tomcat。

创建以下类：

```
/*
SSLSettingHelper prevents BEAST SSL attack by setting the appropriate option.
Due to protected variable must be in org.apache.tomcat.util.net package...
Instruction:
1) Compile and place JAR in tomcat /lib
2) Add protocol="org.apache.tomcat.util.net.SSLSettingHelper" to SSL APR connector
*/
package org.apache.tomcat.util.net;

public class SSLSettingHelper extends org.apache.coyote.http11.Http11AprProtocol {
    @Override
    public void init() throws Exception {
        super.init();
        org.apache.tomcat.jni.SSLContext.setOptions(endpoint.sslContext, org.apache.tomcat.jni.SSL.SSL_OP_CIPHER_SERVER_PREFERENCE);
        log.info("SSLSettingHelper set SSL_OP_CIPHER_SERVER_PREFERENCE to prevent BEAST SSL attack");
    }
} 
```

然后将连接器配置为使用此帮助程序类：

```
<Connector server="Server" protocol="org.apache.tomcat.util.net.SSLSettingHelper" port="8443" maxThreads="256" scheme="https" secure="true" SSLEnabled="true" SSLCertificateFile="..." SSLCertificateKeyFile="..." SSLCertificateChainFile="..." SSLCipherSuite="ECDHE-RSA-AES256-SHA384:AES256-SHA256:RC4:HIGH:!MD5:!aNULL:!EDH:!AESGCM" compression="on" compressableMimeType="text/html,text/xml,text/plain,application/json,text/css,text/javascript" maxPostSize="1024000"/> 
```

这修复了 BEAST 攻击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-01T18:02:24.160

我找到了一个解决方案，可以在普通 java 中启用与“SSLHonorCipherOrder”相同的解决方案。通过 (bootclasspath) 修补一些原始 Sun JSSE 行以使服务器服务器顺序正常工作。

类：sun.security.ssl.ServerHandshaker

添加字段

```
public static boolean preferServerOrder = true;
```

替换方法chooseCipherSuite：

```
private void chooseCipherSuite(final HandshakeMessage.ClientHello mesg) throws IOException {
    if(preferServerOrder) {
        final CipherSuiteList clientList = mesg.getCipherSuites();
        for(final CipherSuite serverSuite : getActiveCipherSuites().collection()) {
            if (this.doClientAuth == 2) {
                if (serverSuite.keyExchange == CipherSuite.KeyExchange.K_DH_ANON) continue;
                if (serverSuite.keyExchange == CipherSuite.KeyExchange.K_ECDH_ANON) continue;
            }
            if(!serverSuite.isNegotiable()) continue;
            if(clientList.contains(serverSuite)) {
                if (trySetCipherSuite(serverSuite)) return;
            }
        }
    } else {
        final Collection list = mesg.getCipherSuites().collection();
        for(final CipherSuite suite : list) {
            if (!(isNegotiable(suite))) continue;
            if (this.doClientAuth == 2) {
                if (suite.keyExchange == CipherSuite.KeyExchange.K_DH_ANON) continue;
                if (suite.keyExchange == CipherSuite.KeyExchange.K_ECDH_ANON) continue;
            }
            if (trySetCipherSuite(suite)) return;
        }
    }
    fatalSE(Alerts.alert_handshake_failure, "no cipher suites in common");
}
```

# c - 在 C 代码中发布增量给出意外的答案

> ID：10139892
> 
> 赞同：-3
> 
> 时间：2012-04-13T11:23:38.320
> 
> 标签：c

> **可能重复：**
> [谁能解释这些未定义的行为（i = i++ + ++i，i = i++ 等……）](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)

请解释以下输出的原因。

```
#include <stdio.h>

int main()
{
    int i = 0, j = 0;
    int val1 = 0;
    int val2 = 0;

    val1 = i+++i+++i++ ;
    val2 = ++j+++j+++j ;

    printf("value = %d\n", val1);
    printf("value = %d\n", val2);
    return 0;
} 
```

输出 ：

```
value = 0  
value = 7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:24:40.137

没有中间序列点的变量的多次变化是未定义的行为。

这意味着规范中没有关于应该发生什么的定义。编译器可以自由地做它想做的任何事情——任何事情。

序列点仅出现在`;`, `&&`, `||`,`?`和`:`三元运算符中，and `,`（逗号运算符，不要与函数调用中的逗号分隔参数混淆）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:24:57.763

您多次修改同一个变量而没有中间序列点，这是**Undefined Behavior**。
未定义的行为仅仅意味着对程序的行为可能有也可能没有任何可行的解释。

好读：
[未定义的行为和序列点](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)

# shell - 在循环时跳过一行并在 shell 脚本中读取另一行

> ID：10139897
> 
> 赞同：5
> 
> 时间：2012-04-13T11:23:49.187
> 
> 标签：shell, while-loop

我有一个代码，它使用 while 循环逐行读取文件。在while循环内，我有一定的条件。有没有一种方法可以让我跳过当前行并根据条件读取下一行？让我准确地说：

```
while read Line
do
    //some sample conditions
    a=$Line
    if [ "a" == "b" ]
        //i want to go to the next line from this point. 
done < **inputfile** 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T11:28:57.160

使用`continue` [http://www.cyberciti.biz/faq/unix-linux-bsd-appleosx-continue-in-bash-loop/](http://www.cyberciti.biz/faq/unix-linux-bsd-appleosx-continue-in-bash-loop/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T12:05:06.327

怎么样：

```
while read Line
do
    # some sample conditions
    a=$Line
    if [ "$a" == "$b" ] # I assume this is not "a" == "b"
        # i want to go to the next line from this point. 
        read Line
        a=$Line
done < **inputfile** 
```

# spring - 将选择框绑定到集合（使用 Spring）

> ID：10139904
> 
> 赞同：0
> 
> 时间：2012-04-13T11:24:17.503
> 
> 标签：spring, spring-mvc

我有以下问题。我有一个表单 bean，在这个 bean 中有一个包含对象的列表。

```
List<SomeObjectForm> toDisplay; 
```

现在我想将一个 html 选择映射到这个列表。像这样的东西：

```
<form:select id="inputGroupFields" path="templateKey" multiple="true"...
<form:select id="inputGroupFields" path="templateKey.id" multiple="true"... 
```

这当然有效。现在我尝试添加不同的自定义转换器，例如：

```
myConv implements Converter<SomeObjectForm, String>
myConv extends StringToObject 
```

这也行不通。我不确定这是否是正确的方法，或者是否有更简单的方法来做到这一点。

一些附加信息：-->我正在使用 spring 3.0.5-->所有这些都发生在 Web 流程中

问候和感谢，

威普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T22:17:05.143

在表单选择中，您可以这样做。

```
<form:select items="${toDisplay}" itemLabel="id" itemValue="name"/> 
```

它的作用是将您的“toDisplay”列表放入选择框中。itemLabel="id" 将进入 SomeObjectForm 类并使用 getId 方法获取 id 值，itemValue 也类似。尝试这个。

# c# - Signed_request 在 ASP.NET 会话中丢失，使我的网站感到困惑

> ID：10139905
> 
> 赞同：0
> 
> 时间：2012-04-13T11:24:33.263
> 
> 标签：c#, asp.net, facebook, session

我有一个 ASP.NET MVC 3 网站，它既可以从特定的公共 url 获得，也可以作为 Facebook 应用程序使用。

在我的网站逻辑中，在某些地方我必须确定当前请求是来自 Facebook-app 还是来自公共网站，因为我想根据这个环境显示内容。

所以，例如。如果用户将我的网站用作 facebook 应用程序，那么我想显示图片，如果用户正常使用我的网站，那么我不想显示图片。

为了确定我是否来自 Facebook 应用程序，我检查了 HttpContext.Request 中的“signed_request”，并将其存储在 HttpSession 中以供我的其他操作使用，而不仅仅是为我定义的那个操作 (url)脸书应用程序。

因此，当执行子操作时，我可以根据 Session 确定该网站是否用作 FB 应用程序。

问题发生了，当会话超时时，因为虽然逻辑仍在 Facebook 内部运行，但我的逻辑认为它不在 Facebook 内部。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:09:29.713

如果您不想要它，您可以将来自 signed_request 的重要信息存储在 cookie 中，该信息在浏览器关闭时过期。会话不够可靠，无法存储此内容。

我认为你的方法可能是错误的。如果用户在 Facebook 和单独的 url 上输入您的应用程序怎么办？Facebook 有 Javascript API，如果用户连接到网站，它会放置 cookie。如果用户已连接，您应该显示 Facebook 相关内容，无论这是画布应用程序还是单独页面都无关紧要。特别是如果它使用相同的视图。如果视图不一样，只有 url，你应该有单独的画布应用程序的 url。

最后一个解决方案，但可怕的是检查 Javascript 是否页面在 iframe 中运行，如果它在 iframe 中运行并且 signed_request 不存在，则重新加载 top.location。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:56:23.127

您可以定期从 FB-App 联系服务器吗？如果用户有一段时间没有采取任何行动，也许你可以从中“ping”

# php - 加载简单 XML 时出错

> ID：10139913
> 
> 赞同：1
> 
> 时间：2012-04-13T11:25:21.120
> 
> 标签：php, xml, simplexml

我有一个 xml 文档（从 msword 2010 生成），我正在尝试使用简单的 xml 进行处理。

xml 示例：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<w:document xmlns:wpc="http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:m="http://schemas.openxmlformats.org/officeDocument/2006/math" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:wp14="http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing" xmlns:wp="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing" xmlns:w10="urn:schemas-microsoft-com:office:word" xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" xmlns:w14="http://schemas.microsoft.com/office/word/2010/wordml" xmlns:wpg="http://schemas.microsoft.com/office/word/2010/wordprocessingGroup" xmlns:wpi="http://schemas.microsoft.com/office/word/2010/wordprocessingInk" xmlns:wne="http://schemas.microsoft.com/office/word/2006/wordml" xmlns:wps="http://schemas.microsoft.com/office/word/2010/wordprocessingShape" mc:Ignorable="w14 wp14">
<w:body>
    <w:p w:rsidR="005B1098" w:rsidRDefault="005B1098"/>
    <w:p w:rsidR="00F254A4" w:rsidRDefault="00F254A4"/>
    <w:p w:rsidR="00F254A4" w:rsidRPr="008475A1" w:rsidRDefault="00C15492" w:rsidP="008475A1">
        <w:pPr>
            <w:jc w:val="center"/>
            <w:rPr>
                <w:b/>
                <w:sz w:val="44"/>
                <w:szCs w:val="44"/>
            </w:rPr>
        </w:pPr>
        <w:r w:rsidRPr="008475A1">
            <w:rPr>
                <w:b/>
                <w:sz w:val="44"/>
                <w:szCs w:val="44"/>
            </w:rPr>
            <w:t>Test file</w:t>
        </w:r>
    </w:p>
    <w:p w:rsidR="00C15492" w:rsidRPr="008475A1" w:rsidRDefault="00C15492" w:rsidP="008475A1">
        <w:pPr>
            <w:jc w:val="center"/>
            <w:rPr>
                <w:sz w:val="20"/>
                <w:szCs w:val="20"/>
            </w:rPr>
        </w:pPr>
        <w:r w:rsidRPr="008475A1">
            <w:rPr>
                <w:sz w:val="20"/>
                <w:szCs w:val="20"/>
            </w:rPr>
            <w:t>another paragraph</w:t>
        </w:r>
    </w:p>
</w:body>
</w:document> 
```

我正在尝试使用以下方法打开它：

```
$content = '/reports/docx_templates/testing2.xml';
if(!$simple_xml = simplexml_load_file($content)){
    trigger_error('Error reading XML file',E_USER_ERROR);
} else {
    echo 'loaded';
} 
```

并得到错误：

```
Message: simplexml_load_file(): I/O warning : failed to load external entity " Test file another paragraph " 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T13:22:05.590

我认为 PHP 的 XML 解析器发生了一些不太正确的事情。

[http://schemas.openxmlformats.org](http://schemas.openxmlformats.org)不会去一个有效的网址....但它不必因为 XML 命名空间规则不坚持它。但是，看看这个页面

[https://bugs.php.net/bug.php?id=60416](https://bugs.php.net/bug.php?id=60416)

并且您看到有人设法通过命名空间上的杂乱来解决您的问题。

我怀疑您的原始问题显示的可能是代码成功运行，但您使用 trigger_error 强制显示错误消息。

评论太长了。

这不是一个真正的答案，所以这里有一个弥补它的建议......

将您的 xml 保存为 testing2.xml 后运行此代码，该文件与 php 文件位于同一目录中。

```
<?php

if (file_exists('testing2.xml')) {
    $content = file_get_contents('testing2.xml');
    $xml = new SimpleXMLElement($content );
    echo "<pre>";        
    var_dump($xml );
    echo "</pre>"; 
} else {
    exit('Failed to open testing2.xml.');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:00:23.710

我更喜欢 SimpleXMLElement 类。

```
$xml = new SimpleXMLElement(file_get_contents($content)); 
```

我已经用您的 XML 文件及其工作对其进行了测试。

**编辑：**

这是一个解析 word XML 文件的简短教程：[Word XML](http://social.msdn.microsoft.com/Forums/en-US/oxmlsdk/thread/9d2f43d0-0e94-47e1-990e-0bea9ba780b1/)

# jquery - jQuery中的Grep与过滤器？

> ID：10139916
> 
> 赞同：86
> 
> 时间：2012-04-13T11:25:37.767
> 
> 标签：jquery, filter

我想知道 Grep 和 Filter 之间的区别：

筛选 ：

> 将匹配元素集减少为匹配选择器或通过函数测试的元素。

格雷普：

> 查找满足过滤器函数的数组元素。原始数组不受影响。

**好的。**

所以如果我在 GREP 中这样做：

```
var arr = [ 1, 9, 3, 8, 6, 1, 5, 9, 4, 7, 3, 8, 6, 9, 1 ];

myNewArray= jQuery.grep(arr, function(n, i){
  return (n != 5 && i > 4);
}); 
```

我也可以这样做：

```
 var arr = [ 1, 9, 3, 8, 6, 1, 5, 9, 4, 7, 3, 8, 6, 9, 1 ];

myNewArray= $(arr).filter( function(n, i){
  return (n != 5 && i > 4);
}); 
```

在这两种情况下，我仍然可以访问原始数组...

所以……区别在哪里？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-04-13T11:51:21.453

它们都以相似的方式起作用，但是它们的用法不同。

filter 函数旨在与 html 元素一起使用，这就是为什么它是一个可链接的函数，它返回一个 jQuery 对象并接受像 ":even"、":odd" 或 ":visible" 等过滤器。你可以t 使用 grep 函数来做到这一点，该函数旨在成为数组的实用函数。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-13T11:37:53.193

过滤器是 jQuery.fn 的一部分，因此它的目的是与选择器一起使用，`$('div').filter`其中 grep 是一个 jQuery 工具方法 ( `jQuery.grep`)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-07-02T11:00:23.780

其用法上的区别：

筛选：

> ```
> $(selector).filter(selector/function) 
> ```

格雷普：

> ```
> $.grep(array,function,invert) 
> ```

所以在你的情况下，我宁愿使用`grep()`，因为以这种方式使用数组是不必要的：`$(arr)`。

我还认为该`grep`函数更快，因为它只接受数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-10T08:13:42.183

对于那些`grep`对`filter`我写这个测试的表现感兴趣的人：

**TLDR；**Grep 快很多倍。

我用于测试的脚本：

```
function test(){
var array = [];
for(var i = 0; i<1000000; i++)
{
array.push(i);
}

var filterResult = []
for (var i = 0; i < 1000; i++){
var stime = new Date();
var filter = array.filter(o => o == 99999);
filterResult.push(new Date() - stime);
}

var grepResult = [];
var stime = new Date();
var grep = $.grep(array,function(i,o){
return o == 99999;
});
grepResult.push(new Date() - stime);

$('p').text('average filter - '+(filterResult.reduce((pv,cv)=>{ return pv +cv},0)/1000))
$('div').text('average grep - '+(grepResult.reduce((pv,cv)=>{ return pv + cv},0)/1000))
}
test();
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<p></p>
<div></div>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-23T10:03:39.737

@Matas Vaitkevicius，发布的代码片段出现错误，这是一个更正的错误：

```
function test(){
var array = [];
for(var i = 0; i<1000000; i++)
{
    array.push(i);
}

var filterResult = []
for (var i = 0; i < 1000; i++){
    var stime = new Date();
    var filter = array.filter(o => o == 99999);
    filterResult.push(new Date() - stime);
}

var grepResult = [];
for (var i = 0; i < 1000; i++){
    var stime = new Date();
    var grep = $.grep(array,function(i,o){
        return o == 99999;
    });
    grepResult.push(new Date() - stime);
}

$('p').text('average filter - '+(filterResult.reduce((pv,cv)=>{ return pv +cv},0)/1000))
$('div').text('average grep - '+(grepResult.reduce((pv,cv)=>{ return pv + cv},0)/1000))
}
test();
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<p></p>
<div></div>
```

**TLDR：**在 Firefox 中，过滤器稍快，在 chrome 中，情况正好相反。仅关于表演，您可以使用任何人。

# java - 速记变量赋值

> ID：10139917
> 
> 赞同：1
> 
> 时间：2012-04-13T11:25:38.940
> 
> 标签：java

在 java 中，我尝试使用如下所示的速记变量赋值。目前`owner`被分配在不同的行，但我想把它放在下面的同一行。这不起作用 - 是不可能的还是有其他路线？

```
 if ((User owner = search.getOwner()) instanceof User && owner.getId() != null) {
        searchQuery.append("owner_id = :ownerId AND ");
        queryMap.put("ownerId", owner.getId());
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:30:49.890

不，没有。至少据我所知。

您可以将值分配部分`(owner = search.getOwner())`放入 if 部分，但`User owner`声明必须是单独的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T11:31:36.847

在您的代码所有者在 if 条件范围内本地声明。试试这个代码修改

```
User owner = null;
if ((owner = (User)search.getOwner()) instanceof User && owner.getId() != null) {
        searchQuery.append("owner_id = :ownerId AND ");
        queryMap.put("ownerId", owner.getId());
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T13:24:48.523

Java 中的赋值是一个*ExpressionStatement*，而 if 条件只接受一个*Expression*。有关权威来源，请参阅[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se5.0/html/statements.html#5991)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T11:33:02.770

以下代码有什么问题，在我看来更具可读性？

```
User owner = search.getOwner();
if (owner instanceof User && owner.getId() != null) {
    searchQuery.append("owner_id = :ownerId AND ");
    queryMap.put("ownerId", owner.getId());
} 
```

如评论中所述， getOwner 返回一个 User 并且不需要`instanceof`测试，或者在这种情况下您可以编写：

```
Object owner = search.getOwner();
if (owner instanceof User && (User) owner.getId() != null) {
    searchQuery.append("owner_id = :ownerId AND ");
    queryMap.put("ownerId", (User) owner.getId());
} 
```

# algorithm - 在不使用堆栈/队列的情况下列出目录和子目录中的文件的非递归方式

> ID：10139919
> 
> 赞同：4
> 
> 时间：2012-04-13T11:25:42.403
> 
> 标签：algorithm, recursion, stack, queue

在一次采访中，我被要求在不使用递归、堆栈或队列的情况下列出目录及其子目录中的文件名¹。

由于我知道的唯一非递归方式使用堆栈，因此我无法回答这个问题。

面试官解释了解决方案，但我无法理解。我唯一记得的是它涉及两种方法而不是一种。

这种允许在没有递归、没有堆栈或队列的情况下列出目录及其子目录中的文件的方法是什么？

* * *

^(¹ 解决方案与语言无关。子目录列表由`ListDirectories(string directoryPath)`方法提供，文件由`ListFiles(string directoryPath)`. 我们事先并不知道子目录的深度。)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T13:38:12.617

在深度优先搜索中，当前路径本质上是一个堆栈。以深度优先的方式列出名称，按照您的预期进行，但不要费心记录堆栈...当您在目录中列出文件后，您可以通过注意最后一个目录是什么来“弹出”堆栈您所在的位置，然后从父目录中的那一点继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:16:01.523

尝试这样的事情（伪代码）：

```
baseDirectory = "/usr"
list = [baseDirectory] // list of directories to traversal
files = []
while (list not empty) {
  d = list.getFirst(); // get directory
  directories = ListDirectories(d);
  files.add(ListFiles(d)); // add all files from current directory
  list.add(directories); //add all directories from current directory to traversal
  list.remove(d); // remove traversed dir
} 
```

我们只使用列表 :) 但这种方法与堆栈/队列解决方案非常相似

# c# - Asp.net 2 按钮返回具有不同数据的同一页面

> ID：10139922
> 
> 赞同：-1
> 
> 时间：2012-04-13T11:25:49.340
> 
> 标签：c#, asp.net

在我的 Ascx 页面上，我有 2 个按钮，这些按钮重定向到同一页面 atm。（因为页面应该完全相同）。在 Page_Load() 方法中，发送方参数没有任何参数。我如何告诉 Page_Load 事件单击了哪个按钮？所以我可以加载不同的数据取决于点击了哪个按钮？

有没有办法更动态地做到这一点？还是我必须为每个按钮创建一个单独的页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:31:17.347

我不知道你想做什么，这可能很愚蠢，但你仍然可以通过做这样的事情来实现这一点

```
Button1_Click
Response.Redirect("Default.aspx?id=1")

Button2_Click
Response.Redirect("Default.aspx?id=2") 
```

然后在加载事件上

```
if(Request.QueryString["id"]==1)
button1
else
button2 
```

您还可以将多个参数设置为这样的页面

```
 Response.Redirect("Default.aspx?id=1&name=xyz") 
```

并检索它

```
Request.QueryString["name"]=="xyz" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:40:46.723

按钮单击的回发事件在 Page_Load**之后**立即调用，在那里您可以知道单击了哪个按钮，然后在 OnPreRender 方法上做一些事情

或者也许我误解了，你重定向到另一个页面。在这种情况下，我使用 Ashwini Verma，添加一些查询字符串或通过 Session 传递一些 var。这是你的选择

# exception - Symfony2 & Doctrine2 PDOException 没有描述

> ID：10139925
> 
> 赞同：0
> 
> 时间：2012-04-13T11:26:02.527
> 
> 标签：exception, symfony, pdo, doctrine-orm

我想使用这段代码，它在 flush() 上中断，没有任何异常消息：

```
1\. at PDOStatement ->execute (null) 
in ../vendor/doctrine-dbal/lib/Doctrine/DBAL/Statement.php at line 131    
2\. at Statement ->execute () 
in ../vendor/doctrine/lib/Doctrine/ORM/Persisters/BasicEntityPersister.php at line 237    
3\. at BasicEntityPersister ->executeInserts () 
in ../vendor/doctrine/lib/Doctrine/ORM/UnitOfWork.php at line 726    
4\. at UnitOfWork ->executeInserts (object(ClassMetadata)) 
in ../vendor/doctrine/lib/Doctrine/ORM/UnitOfWork.php at line 292    
5\. at UnitOfWork ->commit () 
in ../vendor/doctrine/lib/Doctrine/ORM/EntityManager.php at line 334    
6\. at EntityManager ->flush () 
in ../src/Tools/TFIBundle/Model/CSVImport.php at line 136    
7\. at CSVImport ->addCategory ('fundusz obligacji') 
in ../src/Tools/TFIBundle/Model/CSVImport.php at line 114 
```

addCategory() 方法看起来：

```
public function addCategory( $categoryName )
{
    $category = new Category();
    $category->setName( $categoryName );

    $this->em->persist( $category );
    $this->em->flush();
    $this->counter['category']++;

    return $category;
} 
```

知道有什么问题吗？或者如何在 symfony2 中获取 PDOException 消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T02:11:13.903

就在几秒钟前，我遇到了同样的问题。当我进入生产模式并关闭会话时，它得到了修复。当您在会话仍然存在的情况下进行大量更改替换整个文件夹等操作时，开发模式似乎存在会话问题。

尝试清除您的会话，它可能会起作用。

# c++ - 计算重复项并将唯一条目放入数组 [c++] 中的新数组中

> ID：10139927
> 
> 赞同：0
> 
> 时间：2012-04-13T11:26:05.083
> 
> 标签：c++, visual-c++

q.编写一个程序，其中包含一个名为“remove_duplicates”的函数，该函数以随机顺序获取一个整数数组，然后消除数组中所有重复的整数。该函数应采用三个参数：

1.  一个整数数组，它是（读取并填充在 main 中）
2.  数组的大小。
3.  通过引用传递的变量将在 main 中打印，以显示数组中有多少值没有重复。该函数不应返回值，但如果消除了任何重复的整数，则该函数应对其进行计数，因此新值会告诉数组中不同整数的数量。假设传递给函数的数组如下图，传递给函数的数组大小为10。

    0 1 2 3 4 5 6 7 8 9 58 | 26 | 91 | 26 | 70 | 70 | 91 | 58 | 58 | 66

该函数应将数组更改为如下所示：

```
0       1       2     3       4      5      6      7     8      9    
58 | 26 | 91 | 70 | 66 | ?? | ?? | ?? | ?? | ?? 
```

并且它应该将不同计数器的值更改为 5。第 5 个单元格之后的单元格中的问号表明，当函数返回时，这些单元格中的数字无关紧要。

我的功能有问题

```
void remove_duplicates ( int h[] ,int n ,int &count ){
count = 0;
int a[100];
for (int i = 0 ; i < n  ; i++ )
        for(int j = i ; j<n ; j++){
            if(h[i]!=h[j])
                        a[i]=h[i];
            else
            count++; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:30:59.623

1.  将整个数组复制到 std::set 中。该集合将消除重复项，这意味着重复项的插入将失败。

2.  将集合复制回数组。

3.  唯一值的数量是集合的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:45:55.963

如果您有定义的范围或可能的无效值（例如，-1），您可以将重复项设置为此无效值，并在遍历数组时找到重复项，将元素移回开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:31:24.647

当函数完成时，你的计数将比它应该的要大，因为你为每个元素增加了不止一次。你应该尝试这样的事情：

```
 void remove_duplicates ( int h[] ,int n ,int &count ){
count = n;
int a[100],ok,p;
for (int i = 0 ; i < count-1  ; i++ ) {
    ok=1;
    for(int j = i+1 ; j<count ; j++)
        if(h[i]==h[j]) {
            ok=0;
            p=j;
        }
    if(!ok) {
        for(int j = p+1; j<count; j++) 
            h[j-1]=h[j];
        count--;
    }
}
count=n-count;
} 
```

"ok" 检查是否可以在数组中的其他位置找到 v[i]，并且 p 是它出现的位置，因此它知道要消除哪个元素。我假设您需要保留数组中元素的首次出现，否则您可以更轻松地消除它。希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T11:52:49.673

这些问题有很多解决方案，我将向您展示一个没有临时数组的解决方案。如果您的要求允许您使用排序算法，则在应用此代码之前对数组进行排序：

```
unsigned int numberOfDuplicates = 0;
for( unsigned int i = 1; i<numberOfElements; i++ )
{
  if( array[i-1] == array[i] ){
    numberOfDuplicates++;
    for( unsigned int j = i; j< numberOfElements-1; j++ )
    {
       array[j] = array[j+1];
    }
  }
} 
```

每次你找到一个新的重复，你就通过将数组的其余部分向左移动一个位置来吃掉它。第二种解决方案是分配一个新数组并仅将其中不存在的值传递给那里，然后将分配的数组复制回来。

如果不排序，算法可能是：

```
unsigned int numberOfDuplicates = 0;
for( unsigned int i = 1; i<numberOfElements; i++ )
{
 for( unsigned int k = i; k < numberOfElements; k++){
   if( array[i-1] == array[k] ){
      numberOfDuplicates++;
      for( unsigned int j = k; j< numberOfElements-1; j++ )
      {
       array[j] = array[j+1];
      }
   }
  }
} 
```

# delphi - 如何将选项卡表中停靠表单的颜色设置为正确的颜色？

> ID：10139928
> 
> 赞同：2
> 
> 时间：2012-04-13T11:26:05.317
> 
> 标签：delphi, colors, themes, delphi-2007, pagecontrol

当我将 a 停靠`TForm`到 a`TTabSheet`时，表单的背景颜色为灰色。另一方面，标签页具有白色背景色。

当主题被禁用（例如经典的 Windows 主题）时，它会变得更加复杂。

使用当前代码，灰色表单有一个非常难看的白色边框。

那么如何将表单背景颜色设置为标签页背景颜色呢？如果这不起作用：如何将标签页背景颜色设置为表单背景颜色？

它应该在启用运行时主题和禁用运行时主题的情况下工作。

```
program Project1;

uses
  Graphics,
  Controls,
  Forms,
  ComCtrls;

{$R *.res}

var
  Main        : TForm;
  Sub         : TForm;
  PageControl : TPageControl;
  TabSheet    : TTabSheet;
begin
  Application.Initialize;
  Application.MainFormOnTaskbar := True;
  Application.CreateForm(TForm, Main);
  Application.CreateForm(TForm, Sub);
  PageControl        := TPageControl.Create(Main);
  PageControl.Parent := Main;
  PageControl.Align  := alClient;
  TabSheet             := TTabSheet.Create(Main);
  TabSheet.PageControl := PageControl;
  Sub.Dock(TabSheet, TabSheet.ClientRect);
  Sub.Align := alClient;
  Sub.Show;
  // Sub.Color := clWhite; // TabSheet.Color;
  Application.Run;
end. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-18T20:32:48.183

我找到了这个解决方法

```
type
  TWinControlAccess = class(TWinControl)
  end;

procedure TMainForm.CreateEmbedded(FormClass: TFormClass; Parent: TWinControl);
var
  form: TForm;
begin
  form := FormClass.Create(Self);
  form.Align := alClient;
  form.BorderIcons := [];
  form.BorderStyle := bsNone;
  form.Parent := Parent;
  TWinControlAccess(form).ParentBackground := True; // <<<-
  form.Show;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:24:52.180

前往*Chris Rolliston*的题为**[主题所有者绘制的标签](http://delphihaven.wordpress.com/ttabcontrolex/)**的*博客文章*。

 ** * *

引号：

> **问题**：假设您想自定义选项卡或页面控件上选项卡的字体颜色。过去，这很简单——将 OwnerDraw 设置为 True 并为 OnDrawTab 提供一个处理程序，该处理程序只设置字体并绘制文本。然而，对于 Windows 主题，事情并不那么简单，因为将 OwnerDraw 设置为 True 会禁用控件的主题。这不是 VCL 限制，这仅反映了底层 API 控件的行为，如果您考虑一下，从向后兼容性的角度来看，它是很有意义的。尽管如此，如果您知道自己想要什么，这仍然是一个问题，这只是自定义选项卡的标题。然后输入*TTabControlEx* 和*TPageControlEx*，它使用主题 API 来提供正确的“外观”，即使 OwnerDraw 设置为 True。

* * *

至少，他可能用他的**TTabControlEx**和/或**TPageControlEx**组件部分解决了你的问题。*

# javascript - ExtJs：多列的一个列标题

> ID：10139931
> 
> 赞同：4
> 
> 时间：2012-04-13T11:26:22.587
> 
> 标签：javascript, extjs4

是否可以在一个标题下创建一个包含多列的网格？

```
+------------------------+------------------------+
| 第 1 栏 | 第 2,3,4 栏 |
+------------------------+------------------------+
| | | | |
+------------------------+------------------------+
| | | | |
+------------------------+------------------------+
| | | | |
+------------------------------------------------+

```

尝试了列标题分组，但无法隐藏子列。它看起来像

```
+------------------------+------------------------+
| 第 1 栏 | 第 2,3,4 栏 |
+ +------------------------+
| | | | |
+------------------------+------------------------+
| | | | |
+------------------------+------------------------+
| | | | |
+------------------------------------------------+

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:14:27.127

这需要一个覆盖。这是您的列配置应如下所示：

```
columns: [
    {
        text: "Column 1",
        // width, other settings
    },
    {
        text: "Columns 2, 3, 4",
        // width is computed as sum of child columns
        columns: [
            {
                text: "",
                columnName: "Column 2",  // custom config
                width: // needed
            },
            {
                text: "",
                columnName: "Column 3",
                width: // needed
            },
            {
                text: "",
                columnName: "Column 4",
                width: // needed
            }
        ]
    }
] 
```

请注意`columnName`不属于 API 的配置。这是我弥补的。

设置`text: ""`隐藏该列的标题。为所有三个子列设置它会隐藏整行，但会在标题所在的位置留下一条 2px 高的细线。不知道如何删除它。也许能够将它的 CSS 去掉。

这将为您提供所需的布局。您可以通过主列的菜单隐藏子列。但是，菜单看起来不正确，因为没有文本。这就是`columnName`进来的地方。

查找源代码`Ext.grid.header.Container#getColumnMenu`。您需要为这个函数创建一个覆盖。事情是这样的：

```
Ext.override(Ext.grid.header.Container, {
    getColumnMenu: function(headerContainer) {
        // stuff 
        for (; i < itemsLn; i++) {
            item = items[i];
            menuItem = Ext.create("Ext.menu.CheckItem", {
                text: item.columnName || item.text  // <--- IMPORTANT LINE
        // rest of the function is the same
    }
}); 
```

如果它存在，这将获取您的`columnName`配置，而不会影响不使用它的现有列。现在，当您单击多列的标题触发器时，您将获得子列的嵌套选项。如果你想变得花哨，你应该能够通过更多的覆盖来展平隐藏选项，但我将把它留给你。

注意：这都是在 Ext JS 4.0.7 上测试的。4.1 候选版本中的标头容器代码发生了一些重大变化，我不能保证这会以相同的方式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-02T06:30:14.247

只需在子标题列配置上添加样式属性，如下所示：

```
columns: [{
    header: 'Header',
    defaults: {
      style: { display: 'none !important' } <--here is the magic
    },
    items: [{
      header: '',
      dataIndex: ''
    },{
      header: '',
      dataIndex: ''
    }]   
}] 
```

# c# - 从 WPF 中的 ViewModel 动态生成简单视图？

> ID：10139934
> 
> 赞同：7
> 
> 时间：2012-04-13T11:26:32.623
> 
> 标签：c#, wpf, mvvm

我正在使用[本文](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090071)和其他资源慢慢学习 WPF。

我专注于应用程序逻辑 - 定义模型 + 视图模型，并创建对它们进行操作的命令。我还没有看过视图和`.xaml`格式。

在处理逻辑时，我想要一个可以呈现我绑定到它的任何 viewModel 的视图。视图应该

*   将任何公共`string`属性呈现为文本框，并将文本框绑定到属性
*   将属性名称呈现为标签。
*   将任何公共“命令”属性呈现为按钮，并将按钮绑定到命令（可能仅当命令不带参数时？）

在维护 MVVM 设计模式的同时，这样的事情可能吗？如果是这样，我将如何实现它？此外，文章建议避免使用`.xaml`代码隐藏——这个视图可以在纯 xaml 中实现吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T11:33:42.520

我认为仅在 XAML 中是不可能的。如果您想在运行时生成视图，那么您只需在 ViewModel 上使用反射并相应地生成控件。如果您想在编译时生成视图，那么您可以在构建时使用一些模板引擎（如 T4 或字符串模板）或 CodeDom 从您的 ViewModel 生成 xaml 文件。或者你可以更进一步，使用一些元数据格式（甚至是 DSL），从中生成模型和视图等等。这取决于您的应用程序需求。

而且在 MVVM 代码隐藏中，对于视觉逻辑和绑定到模型/视图模型，这在 XAML 中是无法完成的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T13:54:03.960

我现在已经实现了一半，我希望下面的代码可以帮助其他尝试这样做的人。变成一个更强大的库可能会很有趣。

`AbstractView.xaml`：

```
<UserControl x:Class="MyApplication.View.AbstractView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <StackPanel Name="container">
    </StackPanel>
</UserControl> 
```

`AbstractView.xaml.cs`：

```
public partial class AbstractView : UserControl
{
    public AbstractView()
    {
        InitializeComponent();

        DataContextChanged += Changed;
    }

    void Changed(object sender, DependencyPropertyChangedEventArgs e)
    {
        object ob = e.NewValue;
        var props = ob.GetType().GetProperties();

        List<UIElement> uies = new List<UIElement>();
        foreach (var prop in props)
        {
            if (prop.PropertyType == typeof(String))
                uies.Add(makeStringProperty(prop));
            else if (prop.PropertyType == typeof(int))
                uies.Add(makeIntProperty(prop));
            else if (prop.PropertyType == typeof(bool))
                uies.Add(makeBoolProperty(prop));
            else if (prop.PropertyType == typeof(ICommand))
                uies.Add(makeCommandProperty(prop));
            else
            {
            }
        }

        StackPanel st = new StackPanel();
        st.Orientation = Orientation.Horizontal;
        st.HorizontalAlignment = HorizontalAlignment.Center;
        st.Margin = new Thickness(0, 20, 0, 0);
        foreach (var uie in uies) {
            if (uie is Button)
                st.Children.Add(uie);
            else
                container.Children.Add(uie);
        }
        if (st.Children.Count > 0)
            container.Children.Add(st);

    }

    UIElement makeCommandProperty(PropertyInfo prop)
    {
        var btn = new Button();
        btn.Content = prop.Name;

        var bn = new Binding(prop.Name);
        btn.SetBinding(Button.CommandProperty, bn);
        return btn;
    }

    UIElement makeBoolProperty(PropertyInfo prop)
    {
        CheckBox bx = new CheckBox();
        bx.SetBinding(CheckBox.IsCheckedProperty, getBinding(prop));
        if (!prop.CanWrite)
            bx.IsEnabled = false;
        return makeUniformGrid(bx, prop);
    }

    UIElement makeStringProperty(PropertyInfo prop)
    {
        TextBox bx = new TextBox();
        bx.SetBinding(TextBox.TextProperty, getBinding(prop));
        if (!prop.CanWrite)
            bx.IsEnabled = false;

        return makeUniformGrid(bx, prop);
    }

    UIElement makeIntProperty(PropertyInfo prop)
    {
        TextBlock bl = new TextBlock();
        bl.SetBinding(TextBlock.TextProperty, getBinding(prop));

        return makeUniformGrid(bl, prop);
    }

    UIElement makeUniformGrid(UIElement ctrl, PropertyInfo prop)
    {
        Label lb = new Label();
        lb.Content = prop.Name;

        UniformGrid u = new UniformGrid();
        u.Rows = 1;
        u.Columns = 2;
        u.Children.Add(lb);
        u.Children.Add(ctrl);

        return u;
    }

    Binding getBinding(PropertyInfo prop)
    {
        var bn = new Binding(prop.Name);
        if (prop.CanRead && prop.CanWrite)
            bn.Mode = BindingMode.TwoWay;
        else if (prop.CanRead)
            bn.Mode = BindingMode.OneWay;
        else if (prop.CanWrite)
            bn.Mode = BindingMode.OneWayToSource;
        return bn;
    }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T11:40:34.827

我不确定这是否适合用于“纯 MVVM”方法，当然并非所有事情都可以通过绑定来实现。而且我只是放弃了避免在此处为您的“视图”使用代码隐藏的想法，这本质上是一项程序化任务。你应该坚持的一件事是让 ViewModel 不了解视图，这样当你用“真实的东西”替换它时，就没有工作要做了。

但是，这似乎是合理的做法；它几乎听起来更像是一个调试可视化器——您可以利用现有的工具来实现这一点。

（如果您确实想在大多数带有标准`ItemsControl`和模板的 XAML 中执行此操作，您可能会编写一个转换器以通过反射以某种可以绑定的形式公开您的 ViewModel 的属性，这是一组具有公开元数据的包装器对象，但我认为确保暴露的属性可以正确绑定会比它的价值更多）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T12:39:17.363

Pointer: Generate a dynamic DataTemplate as a string tied to the specific VM (Target). Parse it via XamlReader. Plonk it into your app resources in code.

Just an idea.. run with it.. Should be done by some type other than the View or the ViewModel.

# seo - robots.txt - 排除任何包含“/node/”的 URL

> ID：10139938
> 
> 赞同：4
> 
> 时间：2012-04-13T11:26:42.743
> 
> 标签：seo, robots.txt

如何告诉爬虫/机器人不要索引任何具有 /node/ 模式的 URL？以下是从第一天开始，但我注意到 Google 仍然索引了很多包含 /node/ 的 URL，例如 www.mywebsite.com/node/123/32

禁止：/node/

是否有任何声明不索引任何具有 /node/ 的 URL 我应该写如下内容： Disallow: /node/*

更新：真正的问题是：Disallow: /node/ in robots.txt，谷歌已在此 URL 下索引页面，例如 www.mywebsite.com/node/123/32

/node/ 不是物理目录，这就是 drupal 6 显示它的内容的方式，我想这是我的问题，节点不是目录，只是 drupal 为内容生成的部分 URL，我该如何处理？这行得通吗？

禁止：/*节点

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T15:48:27.827

`Disallow: /node/``/node/`将禁止任何以（在主机之后）开头的网址。星号不是必需的。

所以它会阻止 www.mysite.com/node/bar.html，但不会阻止 www.mysite.com/foo/node/bar.html。

如果你想阻止任何包含 的东西`/node/`，你必须写`Disallow: */node/`

另请注意，Googlebot 最多可以将 robots.txt 缓存 7 天。因此，如果您今天对 robots.txt 进行更改，Googlebot 可能需要一周时间才能更新您的 robots.txt 副本。在此期间，它将使用其缓存副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:15:50.823

你原来的 Disallow 很好。Jim Mischel 的评论似乎恰到好处，这让我想知道 Googlebot 是否需要时间来获取更新的 robots.txt，然后取消对相关页面的索引。

一些额外的想法：

即使您已将其包含在 robots.txt 中，您的网页网址也可能会出现在 Google 搜索结果中。请参阅： http: [//support.google.com/webmasters/bin/answer.py](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449) ?hl=en&answer=156449 （“...虽然 Google 不会抓取或索引被 robots.txt 阻止的网页的内容，但我们可能会如果我们在网络上的其他页面上找到这些 URL，仍然会将它们编入索引。”）。对许多人来说，这是违反直觉的。

其次，我强烈建议您在 Google 网站管理员工具 ( [https://www.google.com/webmasters/tools/home?hl=en](https://www.google.com/webmasters/tools/home?hl=en) ) 中验证您网站的所有权，然后使用 Health->“Fetch as Google”等工具" 查看与检索您的页面相关的实时诊断信息。（该结果是否表明 robots.txt 阻止了抓取？）

我没用过，但 Bing 有一个类似的工具： http: [//www.bing.com/webmaster/help/fetch-as-bingbot-fe18fa0d](http://www.bing.com/webmaster/help/fetch-as-bingbot-fe18fa0d)。使用 Google、Bing 等提供的诊断工具对站点进行*实时*诊断似乎很值得。

这个问题有点老了，所以我希望你已经解决了原来的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T11:44:40.737

`Disallow: /node/*`正是您想要做的。搜索引擎在 robots.txt 表示法中支持通配符，* 字符表示“任何字符”。有关更多信息，请参阅[Google 关于 robots.txt 的说明](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449)。

**更新**

确保搜索引擎远离目录及其下方所有目录的另一种方法是使用 robots HTTP 标头阻止它们。这可以通过将以下内容放在`node`目录中的 htaccess 文件中来完成：

```
Header set x-robots-tag: noindex 
```

# mysql - 正则表达式到 mysql

> ID：10139945
> 
> 赞同：1
> 
> 时间：2012-04-13T11:27:02.603
> 
> 标签：mysql, regex

需要为此构造正则表达式

2 1231 21231 2312 2123 22 2

只需要找到2，不是1231，不是21231，只有2

所以，我的正则表达式是

```
^[[:digit:]]?{1}[2]{1}^[[:digit:]]? 
```

这样对吗 ？

对不起，如果我问像“为我做”，但我真的不能进入正则表达式。

**UPD**
输入字符串 2 22 1312 123123 22312 21 2
需要匹配 "2"
**2** 22 1312 123123 22312 21 **2**
后\前有或无数字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:36:20.773

听起来很简单...

```
/\b2\b/g 
```

这个怎么样？**[例子](http://regexr.com?30ko7)**

# javascript - 当我只有名称时如何更改选定索引？

> ID：10139946
> 
> 赞同：3
> 
> 时间：2012-04-13T11:27:05.380
> 
> 标签：javascript

我正在将 Postcode 与我的 Web 项目集成到任何地方。我正在为县/州字段使用 drop drop。任何地方的邮政编码都会返回县的名称。当我只有名称时，我可以更改选定索引吗？（我正在使用与数据库字段相关的值字段的数字）。

我尝试了以下方法：

```
var f = document.getElementById("state_dropdown");
f.options.[f.selectedIndex].text = response[0].County; 
```

我试图在此处包含下拉代码 html，但由于某种原因我无法使其正常工作。

但是，这当然只是更改了下拉列表中已选择的项目的文本字段。

我可以查询数据库并找出我分配给县的 ID，但如果有其他方法，我宁愿不这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:44:35.247

循环选项直到你有一个匹配：

```
for (var i = 0; i < f.options.length; i++) {
    if (f.options[i].text == response[0].Country) {
        f.options.selectedIndex = i;
        break;
    }
} 
```

[**演示。**](http://jsfiddle.net/9D89J/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T11:47:58.490

我会创建一个函数并遍历标签：

见：http: [//jsfiddle.net/Y3kYH/](http://jsfiddle.net/Y3kYH/)

```
<select id="country" name="countryselect" size="1">
<option value="1230">A</option>
<option value="1010">B</option>
<option value="1213">C</option>
<option value="1013">D</option>
</select>​ 
```

JavaScript

```
function selectElementByName(id, name) {
    f = document.getElementById(id);
    for(i=0;i<f.options.length;i++){
        if(f.options[i].label == name){
            f.options.selectedIndex = i;
            break;
        }
    }
}
selectElementByName("country","B"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T12:12:10.727

只是其他答案的变体：

```
<script type="text/javascript">

function setValue(el, value) {
  var sel = el.form.sel0;
  var i = sel.options.length;
  while (i--) {
    sel.options[i].selected = sel.options[i].text == value;
  }
}

</script>
<form>
<select name="sel0">
  <option value="0" selected>China
  <option value="1">Russia
</select>
<button type="button" onclick="setValue(this, 'Russia');">Set to Russia</button>
<input type="reset">
</form> 
```

# magento - 如何在magento 1.6.2的管理面板中按顺序向所有业务部门添加过滤器

> ID：10139949
> 
> 赞同：0
> 
> 时间：2012-04-13T11:27:14.557
> 
> 标签：magento

我无法解决这个问题，我想在管理面板的订单网格中的 Bill to Name 部分进行过滤。我可以在哪里选择企业主并过滤他的所有交易。请帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T22:37:24.527

有很多可用的模块可以做到这一点。还有很多教程可以向您展示如何自己做。

[https://www.google.com/search?sourceid=chrome&ie=UTF-8&q=magento+custom+order+grid](https://www.google.com/search?sourceid=chrome&ie=UTF-8&q=magento+custom+order+grid)

# iphone - 带有 UITableView 的 UITabBarController

> ID：10139950
> 
> 赞同：1
> 
> 时间：2012-04-13T11:27:21.590
> 
> 标签：iphone, ios, uitableview, uitabbarcontroller

我试图在我的第一个视图上显示一个列表，所以在 first.h 中添加了这个：

```
 #import <UIKit/UIKit.h>

    @interface argospineFirstViewController : UIViewController
    <UITableViewDelegate,UITableViewDataSource>
   {
NSMutableArray *Journals;
IBOutlet UITableView *myTableView;
    }

   @property (nonatomic,retain) NSMutableArray *Journals;
   @property (nonatomic, retain) UITableView *myTableView;
    @end 
```

然后我在我的 first.m 上添加了这个：

```
 @implementation argospineFirstViewController

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
Journals=[NSMutableArray arrayWithObjects:@"journal1",@"journal2",nil];
}

-(NSInteger) numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}
-(NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return 2;
 }
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {

    cell = [[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier];
}
cell.text=[Journals objectAtIndex:indexPath.row];
return cell;

} 
```

我是新手，所以我真的不知道我必须建立什么样的联系，我也在使用一个故事板，在第一个视图上放置了一个 tableview。我有什么要添加到代表的吗？有什么帮助吗？感谢您的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:01:38.180

右键单击情节提要中的 tableView。您将在 Outlets 下看到“delegate”和“dataSource”。将右侧的气泡拖到视图底部的视图控制器图标上。如果您不想以编程方式执行此操作，这将使您的视图控制器成为表视图的委托和数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:33:21.633

使用 initWithStyle 而不是 initWithFrame 来创建您的单元格。

在您的故事板中，选择您的表格视图并打开 Connections Inspector。确保委托和数据源连接链接到您的 argospineFirstViewController 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T11:34:39.107

在 IBOutlet 中将 tableview 的删除和数据源设置为 filesOwner

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T11:56:58.907

不要为您的表格视图对象设置属性。

还，

在**viewDidLoad**方法中写：

```
myTableView.dataSource = self;
myTableView.delegate = self; 
```

告诉我它是否有帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T07:40:57.290

您使用 cell.text 来显示我认为它在 tableview 中不起作用的数据，只需尝试这一行：-

```
cell.textlabel.text=[yourArrayname objectatindex:index.row]; 
```

无需连接您已经在协议中定义的委托。

# ruby-on-rails - has_secure_password 是否使用任何形式的盐渍？

> ID：10139954
> 
> 赞同：70
> 
> 时间：2012-04-13T11:27:39.530
> 
> 标签：ruby-on-rails, ruby-on-rails-3, encryption, passwords, salt

我想用来`has_secure_password`在数据库中存储加密的密码。`has_secure_password`如果使用任何形式的盐渍，我在互联网上找不到。如果它使用盐渍，它是如何工作的？任何人都可以为我澄清这一点吗？

蒂斯

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-04-13T15:01:38.960

`has_secure_password`使用[bcrypt-ruby](https://github.com/codahale/bcrypt-ruby)。`bcrypt-ruby`自动为您处理盐的存储和生成。一个典型的散列`bcrypt-ruby`看起来像这样：`$2a$10$4wXszTTd7ass8j5ZLpK/7.ywXXgDh7XPNmzfIWeZC1dMGpFghd92e`. 使用以下函数在内部拆分此哈希：

```
def split_hash(h)
  _, v, c, mash = h.split('$')
  return v, c.to_i, h[0, 29].to_str, mash[-31, 31].to_str
end 
```

对于示例哈希，此函数产生：

*   版本：2a
*   费用：10
*   盐：$2a$10$4wXszTTd7ass8j5ZLpK/7。
*   哈希：ywXXgDh7XPNmzfIWeZC1dMGpFghd92e

的`==`-function`BCrypt::Password`提取盐并将其应用于传递的字符串：

```
BCrypt::Password.create('bla') == 'bla' # => true 
```

# c++ - CreateMutex -- “访问被拒绝”

> ID：10139958
> 
> 赞同：3
> 
> 时间：2012-04-13T11:27:57.707
> 
> 标签：c++, winapi

以下代码有时可以正常工作，有时会引发“访问被拒绝”错误。行为不一致。

```
_hMutex = CreateMutex(NULL, FALSE, MutexName);
    if (_hMutex == NULL) 
{
  throw MY_ERROR(GetLastError(), L"Error creating mutex handle");
} 
```

我运行具有此代码的独立可执行文件，执行操作并退出。它不是多线程应用程序。每次运行此程序时，我都使用相同的用户凭据登录。

你能帮我解决这个问题吗？

谢谢， 哼哼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:32:19.717

如果互斥体是命名互斥体，并且该对象在此函数调用之前已存在，则返回值是现有对象的句柄，**GetLastError**返回`ERROR_ALREADY_EXISTS`，bInitialOwner 被忽略，调用线程不被授予所有权。

但是，如果调用者的访问权限有限，则该函数将失败，`ERROR_ACCESS_DENIED`调用者应使用**OpenMutex**函数。

[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682411%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-15T15:49:30.903

今天我有一个类似的问题，但有不同的会话。互斥体被命名并具有前缀`Global\`。当一个应用程序创建命名的全局互斥锁时，不允许不同用户帐户的其他应用程序与同一个互斥锁同步。CreateMutex 总是返回错误`ERROR_ACCESS_DENIED`。OpenMutex 成功，但互斥锁不能用于同步。

解决方案是每个应用程序必须使用`CreateMutexEx`（仅`SYNCHRONIZE`请求）访问全局互斥锁，并且您必须指定 SecurityAttributes。默认的 SecurityAttributes 不允许用户帐户之间的共享。

工作代码如下所示：

```
HANDLE hMutex;
{
    DWORD dwRes, dwDisposition;
    PSID pEveryoneSID = NULL;
    PACL pACL = NULL;
    PSECURITY_DESCRIPTOR pSD = NULL;
    EXPLICIT_ACCESS ea[1];
    SID_IDENTIFIER_AUTHORITY SIDAuthWorld =
            SECURITY_WORLD_SID_AUTHORITY;
    SECURITY_ATTRIBUTES sa;
    LONG lRes;

    // Create a well-known SID for the Everyone group.
    if(!AllocateAndInitializeSid(&SIDAuthWorld, 1,
                     SECURITY_WORLD_RID,
                     0, 0, 0, 0, 0, 0, 0,
                     &pEveryoneSID))
    {
        _tprintf(_T("AllocateAndInitializeSid Error %u\n"), GetLastError());
        goto Cleanup;
    }

    // Initialize an EXPLICIT_ACCESS structure for an ACE.
    // The ACE will allow Everyone read access to the key.
    ZeroMemory(&ea, 1 * sizeof(EXPLICIT_ACCESS));
    ea[0].grfAccessPermissions = SYNCHRONIZE;
    ea[0].grfAccessMode = SET_ACCESS;
    ea[0].grfInheritance= NO_INHERITANCE;
    ea[0].Trustee.TrusteeForm = TRUSTEE_IS_SID;
    ea[0].Trustee.TrusteeType = TRUSTEE_IS_WELL_KNOWN_GROUP;
    ea[0].Trustee.ptstrName  = (LPTSTR) pEveryoneSID;

    // Create a new ACL that contains the new ACEs.
    dwRes = SetEntriesInAcl(1, ea, NULL, &pACL);
    if (ERROR_SUCCESS != dwRes) 
    {
        _tprintf(_T("SetEntriesInAcl Error %u\n"), GetLastError());
        goto Cleanup;
    }

    // Initialize a security descriptor.  
    pSD = (PSECURITY_DESCRIPTOR) LocalAlloc(LPTR, 
                             SECURITY_DESCRIPTOR_MIN_LENGTH); 
    if (NULL == pSD) 
    { 
        _tprintf(_T("LocalAlloc Error %u\n"), GetLastError());
        goto Cleanup; 
    } 

    if (!InitializeSecurityDescriptor(pSD,
            SECURITY_DESCRIPTOR_REVISION)) 
    {  
        _tprintf(_T("InitializeSecurityDescriptor Error %u\n"),
                                GetLastError());
        goto Cleanup; 
    } 

    // Add the ACL to the security descriptor. 
    if (!SetSecurityDescriptorDacl(pSD, 
            TRUE,     // bDaclPresent flag   
            pACL, 
            FALSE))   // not a default DACL 
    {  
        _tprintf(_T("SetSecurityDescriptorDacl Error %u\n"),
                GetLastError());
        goto Cleanup; 
    } 

    // Initialize a security attributes structure.
    sa.nLength = sizeof (SECURITY_ATTRIBUTES);
    sa.lpSecurityDescriptor = pSD;
    sa.bInheritHandle = FALSE;

    hMutex = CreateMutexExW(&sa, L"Global\\MyNamedMutex", 0, SYNCHRONIZE);

Cleanup:

    if (pEveryoneSID) 
        FreeSid(pEveryoneSID);
    if (pAdminSID) 
        FreeSid(pAdminSID);
    if (pACL) 
        LocalFree(pACL);
    if (pSD) 
        LocalFree(pSD);
}

// Do something with hMutex
WaitForSingleObject(hMutex, INFINITE);

CloseHandle(hMutex); 
```

来源链接：

*   [https://docs.microsoft.com/en-us/windows/win32/api/synchapi/nf-synchapi-createmutexexa](https://docs.microsoft.com/en-us/windows/win32/api/synchapi/nf-synchapi-createmutexexa)
*   [https://docs.microsoft.com/de-de/windows/win32/secauthz/creating-a-security-descriptor-for-a-new-object-in-c--?redirectedfrom=MSDN](https://docs.microsoft.com/de-de/windows/win32/secauthz/creating-a-security-descriptor-for-a-new-object-in-c--?redirectedfrom=MSDN)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T11:33:50.713

这可能是因为`MutexName`已经存在一个互斥锁。您正在使用默认安全描述符创建互斥锁，这（取决于您使用此互斥锁的方式）可能不允许其他用途。

有关更多信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682411(v=vs.85).aspx)。一个有用的片段：

> 如果互斥体是命名互斥体并且对象在此函数调用之前存在，[省略]，如果调用者的访问权限有限，则函数将失败， `ERROR_ACCESS_DENIED`调用者应使用 OpenMutex 函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T14:09:30.120

我终于找到了。有一个使用系统帐户运行的服务，它创建互斥锁和一个由用户尝试访问它运行的 exe。这是由于许可。

# hudson - Hudson - Windows 批处理脚本 - 构建

> ID：10139959
> 
> 赞同：0
> 
> 时间：2012-04-13T11:27:58.550
> 
> 标签：hudson

我正在通过 Windows 批处理脚本运行构建。如果构建失败，它不会向破坏构建的开发人员发送邮件。你能帮助我吗。问候阿基兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:06:23.303

让您的批处理脚本设置一个退出代码（错误级别），指示批处理脚本成功或失败。这应该向 hudson 表明批处理文件失败。以零错误级别退出表示成功，非零表示失败。如果您的批处理文件调用其他应用程序（编译器等），您也许可以使用它们各自的退出代码来设置批处理文件的错误级别。

例如

```
@echo off
compiler.exe sourcefile.abc
exit /B %ERRORLEVEL% 
```

最后一行将返回 compiler.exe 的退出代码作为批处理文件的返回代码。如果您的批处理文件中有多次执行，您可以测试每次执行之间的错误级别，`IF ERRORLEVEL`并在检测到非零错误级别时失败。

此外，请记住使用在 hudson/jenkins 配置中配置 smtp 服务器等的测试工具测试电子邮件发送功能。

# c# - asp:panel 中的按钮无法正常工作

> ID：10139960
> 
> 赞同：0
> 
> 时间：2012-04-13T11:28:00.403
> 
> 标签：c#, asp.net, asp.net-ajax, ajaxcontroltoolkit

我的 aspx 页面中有一个 ajax 扩展器。

我想让按钮在按下时在代码中执行某些操作，但面板内的按钮不起作用。我在面板外创建了另一个按钮并编写了相同的操作并且正在工作。

## 这是我在面板内的按钮：

```
<ajax:AccordionPane ID="AccordionPane1" runat="server">
<Header><a href="#" class="href">Adauga titlu</a></Header>
<Content>
<asp:Panel ID="UserReg" runat="server" DefaultButton="but">
    <cc1:Editor ID="Editor1" runat="server" width="500px"/>    
<br /><br />
<asp:Button runat="server" ID="but" Text="Adauga Titlu" />    
</asp:Panel>
</Content>
</ajax:AccordionPane> 
```

这个按钮不工作，但外面的另一个按钮工作，他们都做同样的事情。你能提供一个解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:33:05.067

也许您只是缺少 OnClick 属性，如下所示：

```
 <asp:Button runat="server" ID="but" Text="Adauga Titlu" OnClick="but_Click" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:35:55.787

您是否包含了 Asp ScriptManager？

[http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.aspx)

# android - 如何在不使用 XML 的情况下为 ListActivity 中的列表项（字符串）着色

> ID：10139966
> 
> 赞同：0
> 
> 时间：2012-04-13T11:29:12.480
> 
> 标签：android, colors, listactivity, listitem

我有一个 ListActivity 扩展类，我想显示城市和州的名称。城市应该是蓝色的，州必须是红色的，我正在使用 ListView 和 ArrayAdapter 来显示列表。我搜索了很多，但我所拥有的只是使用 XML。任何人请帮助我..提前谢谢。

我的代码如下所示：

```
String cities[]={"....."};
String stated[]={"....."};
private ArrayList<String> list_places = new ArrayList<String>();
Private ArrayAdapter<String> list_adapter;
list_adapter = new ArrayAdapter<String>(this,android.R.layout.simple_expandable_list_item_1,list_places);
for(int i=0;i<10;i++)
{
 if(isCity())
   /*Text in blue*/
   list_adapter.add(cities[i]);
 else
   /*Text in red*/
   list_adapter.add(states[i]);
}
setListAdapter(list_adapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:39:15.000

试试这个适配器

公共类 ListColor 扩展 BaseAdapter {

```
String[] items = { "Hello ", "hi", " how are you" };
Context mContext;

public ListColor(Context c) {

    mContext = c;

}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return items.length;
}

@Override
public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public long getItemId(int arg0) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public View getView(int arg0, View arg1, ViewGroup arg2) {
    // TODO Auto-generated method stub
    TextView tv = new TextView(mContext);
    tv.setText(items[arg0]);
    tv.setTextColor(Color.RED);

    return tv;
} 
```

}

# sql-server - 使用 Excel VBA 中的 ADO 通过网络连接到 SQL Server

> ID：10139969
> 
> 赞同：4
> 
> 时间：2012-04-13T11:29:25.693
> 
> 标签：sql-server, sql-server-2008, excel, ado, vba

我需要从网络上的另一台计算机连接到在我的笔记本电脑上运行的 SQL Server 数据库。我在 C# 应用程序和 VBA 宏中都这样做。两者都在我的笔记本电脑上完美运行，C# 应用程序在网络上完美运行。但是我无法通过网络使用 VBA 进行连接。这是我的连接字符串：

`ConnectionString = "Driver={SQL Server};Server=MY-LAPTOP; DAtabase=SAFEXlive; UID = MyUsername; PWD=MyPassword"`

除了“Driver={SQL Server}”之外，这与我在 C# 应用程序中使用的连接字符串相同。

然后我使用以下代码（参考 VBE 中的 Microsoft ActiveX 数据对象 6.0 库）打开连接：

```
Dim oConnection As Connection
Set oConnection = New Connection
oConnection.ConnectionString = strConnectionString
oConnection.Open 
```

如果我在笔记本电脑上运行它可以正常工作，但如果我在网络上的另一台计算机上运行它，我会收到错误消息：“运行时错误'-2147217843 (80040e4d) [Microsoft][ODBC 服务器驱动程序][SQL Server]登录用户失败...”和它指定的用户 Windows 登录计算机。

我需要在代码或 excel 中设置一些安全设置吗？还是我错误地构造了连接字符串？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T08:09:37.007

Solved. The answer is rather infuriating. The problem is in fact with the connection string, with the UID. Believe it or not changing `...UID= MyUsername;...` to `..UID=MyUsername;...`, i.e. removing the space character, was all it took! Thanks for suggestions though.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T17:46:56.323

试试这个连接字符串，

```
ConnectionString = "Provider=SQLOLEDB;Data Source=MY-LAPTOP;Initial Catalog=SAFEXlive;User ID=MyUsername;Password=MyPassword" 
```

这是 AD 域登录吗？确保您已将域附加到用户名，例如`domain\user`. 我建议使用集成安全性而不是这个。

# hibernate - 请帮我处理 HQL Join 查询

> ID：10139970
> 
> 赞同：0
> 
> 时间：2012-04-13T11:29:27.113
> 
> 标签：hibernate, join, hql

我是新来的冬眠。

我有以下课程：

```
@Entity
@Table( name = "Users" )
public class User implements Serializable{

private static final long serialVersionUID = -3550174731709532722L;

private String userName;
private String pasportID;
private Company company; 
private String name;
private String email;
private String phone1;
private String phone2;
private String password; //may be null/empty , will be kept hashed
private boolean isAdmin;
private Date lastLogin;

User() {} //not public on purpose!

public User(String userName, String pasportID, Company company,
        String name, String email, String phone1, String phone2,
        String password, boolean isAdmin) {
    this.userName = userName;
    this.pasportID = pasportID;
    this.company = company;
    this.name = name;
    this.email = email;
    this.phone1 = phone1;
    this.phone2 = phone2;
    this.password = password;
    this.isAdmin = isAdmin;
}

@Id
public String getUserName() {
    return userName;
}

public void setUserName(String userName) {
    this.userName = userName;
}

@OneToOne(cascade = CascadeType.ALL)
public Company getCompany() {
    return company;
}

public void setCompany(Company company) {
    this.company = company;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}

public String getEmail() {
    return email;
}
public void setEmail(String email) {
    this.email = email;
}

public String getPhone1() {
    return phone1;
}
public void setPhone1(String phone1) {
    this.phone1 = phone1;
}

public String getPhone2() {
    return phone2;
}
public void setPhone2(String phone2) {
    this.phone2 = phone2;
}

public String getPassword() {
    return password;
}
public void setPassword(String password) {
    this.password = password;
}

public boolean isAdmin() {
    return isAdmin;
}

public void setAdmin(boolean isAdmin) {
    this.isAdmin = isAdmin;
}

@Temporal(TemporalType.TIMESTAMP) 
public Date getLastLogin() {
    return lastLogin;
}

public void setLastLogin(Date lastLogin) {
    this.lastLogin = lastLogin;
}

public String getPasportID() {
    return pasportID;
}

public void setPasportID(String pasportID) {
    this.pasportID = pasportID;
    }
} 
```

和：

```
@Entity
@Table( name = "COMPANIES" )
/**
 * This class is an entity class that represent the company object in the database.
 * This class holds no logic, only getters, setter and constructors.
 */
public class Company implements Serializable {

    private static final long serialVersionUID = -4809404779999217296L;

    private long companyID;
    private CompanyType companyType;
    private String name;

    Company() {} //not public on purpose!

    public Company(String name, CompanyType companyType) {
        this.companyType = companyType;
        this.name = name;
    }

    @Id
    @GeneratedValue(generator="increment")
    @GenericGenerator(name="increment", strategy = "increment")
    public long getCompanyID() {
        return companyID;
    }
    public void setCompanyID(long companyID) {
        this.companyID = companyID;
    }

    @Enumerated(EnumType.STRING)
    public CompanyType getCompanyType() {
        return companyType;
    }
    public void setCompanyType(CompanyType companyType) {
        this.companyType = companyType;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

} 
```

和枚举：

> 公共枚举 CompanyType { A,B,C //TODO }

我想获取在公司“companyName”中工作的所有用户的列表。请注意，用户包含对公司的引用。

我很确定需要连接查询，但我似乎无法确定语法。

我会非常感谢你的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:38:55.303

首先，将用户到公司的映射更改为..因为许多用户可以属于一个公司。

```
<many-to-one name="company>
</many-to-one> 
```

然后您可以使用以下查询。“从用户 u 离开外部加入 u.company，其中 u.company.companyName='XYZ'”

# macos - VIM: has('macunix') 或 has('mac') 不起作用

> ID：10139972
> 
> 赞同：4
> 
> 时间：2012-04-13T11:29:31.387
> 
> 标签：macos, vim

我已经从使用 MacVim 转移到在我的 MacOs Lion 上的终端中使用 vim，并且我已经意识到：

```
has('macunix')
has('mac') 
```

返回 false 而不是 true（它们在 MacVim 中工作正常）。这是一个问题，因为我在 Mac 和 Archlinux linode 上使用相同的 .vimrc，并且需要根据操作系统设置特定选项。

到目前为止，我可以挖掘的唯一解决方案是使用 hostname() 函数来获取机器名称并将其映射到特定的操作系统上，但它不如能够检查操作系统本身那么优雅。

任何人都知道为什么 has('...') 命令不像记录的那样工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T12:18:47.913

我同意 Randy Morris 的观点，使用 MacVim 捆绑的 CLI 可执行文件。

但是，这里有几行来自我的`~/.vimrc`：

```
let os=substitute(system('uname'), '\n', '', '')
if os == 'Darwin' || os == 'Mac'
    set guifont=Inconsolata-dz:h12
    " more...
elseif os == 'Linux'
    set guifont=Inconsolata-dz\ Medium\ 10
    " more...
endif 
```

在 Mac OS X 上，在 X11/XQuartz 中时`$ uname`返回，否则返回。`Darwin``Mac`

# php - jreviews 页面中的 SQL 查询，joomla 2.5

> ID：10139973
> 
> 赞同：-1
> 
> 时间：2012-04-13T11:29:42.073
> 
> 标签：php, mysql, joomla2.5

如何在 Jreviews 页面中“回显”基本 SQL 查询？我正在使用 Joomla 2.5。

查询：

```
SELECT COUNT(product) AS totalcount FROM my_table WHERE productid LIKE = 'sony' 
```

Jreviews 基于 PHP（如 Joomla）。

预期结果，例如：

```
Sony product: 105 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:32:10.917

查询错误

```
SELECT COUNT(product) AS totalcount 
FROM my_table 
WHERE productid LIKE '%sony%' 
```

或者

```
SELECT COUNT(product) AS totalcount 
FROM my_table 
WHERE productid = 'sony' 
```

但不是`LIKE =`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:45:51.283

根据 Joomla 的底层版本，您应该能够使用这样的东西 -

```
$db =& JFactory::getDBO();
$query = "SELECT COUNT(*)
          FROM my_table
          WHERE productid = 'sony'";
$db->setQuery($query);
$count = $db->loadResult();

echo "<p>Sony product: $count</p>"; 
```

[JDatabase 文档](http://docs.joomla.org/Accessing_the_database_using_JDatabase)

# php - 在浏览器中编辑时锁定文件/内容。

> ID：10139975
> 
> 赞同：3
> 
> 时间：2012-04-13T05:53:49.090
> 
> 标签：php

在我的一个项目中，允许用户编辑同一个文件。这是小组工作，组中的最大用户数为 4。他们很少会同时编辑，但有可能。我正在使用显示内容的ckeditor。如何在编辑内容时锁定内容？对于上述情况，如果一个用户打开内容进行编辑，然后从不保存并保持窗口打开，会发生什么情况。是否可以保存内容，释放锁定以供其他用户编辑？如果第一个用户回到办公桌，他们应该会看到“内容已更改，请刷新”的消息。

我正在使用php，mysql。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T06:08:53.407

你需要三个部分来完成这项工作。

1.  您需要在数据库中添加一个字段以指示文件何时被编辑。创建一个名为“LastUsed”之类的字段，并记录打开文件进行编辑的时间戳。当有人试图打开文件时，检查时间戳，如果时间戳是最近的（比如最后 5 分钟），则不允许第二个用户打开它。

2.  在允许编辑文件的页面上，每隔几分钟就会运行一次 ajax 请求。它所需要做的就是将正在编辑的文件的时间戳更新为当前日期和时间。

3.  然后，您可以运行一个计时器，一旦达到某个点，ajax 请求就会停止，这样数据库中的时间戳就会过期。但是，每次用户采取行动时都要重置该计时器。这样只要用户在做某事，定时器就会被重置，并且允许ajax请求继续更新数据库中的时间戳。如果用户在给定的时间内没有做某事，则计时器运行，ajax 请求停止，时间戳过期，其他人可以打开它进行编辑。您还可以使用相同的计时器来显示您的消息，即编辑会话已过期或其他任何内容。

它基本上是这样工作的：

*   当用户编辑文件时，ajax 请求会不断更新“LastUsed”时间戳。

*   只要打开该页面以编辑文件，ajax 请求就会使数据库中的时间戳保持最新。

*   如果该人保持页面打开但没有做任何事情，计时器将运行并停止 ajax 请求，这将允许其他人编辑文件。

*   一旦该人离开页面，ajax 请求将无法再更新时间戳。这样，如果一个人离开该页面，其他人将能够编辑该文件。

*   因此，当第二个用户尝试编辑文件时，如果“LastUsed”时间戳在最后 5 分钟内，您就知道其他人正在编辑该文件。如果时间戳大于 5 分钟，则您知道当前没有人打开文件进行编辑，因此第二个用户可以编辑它。

# c# - 到达内部对象

> ID：10139980
> 
> 赞同：0
> 
> 时间：2012-04-13T11:30:06.940
> 
> 标签：c#, winforms, exception

我有一个循环运行多次并且容易出现异常（它是基于网络的）。但是，我不想直接从方法中抛出任何东西，因为我希望它在下一次迭代中移动，以防出错。所以我所做的是我添加了一个调用者传递的引用参数，所有的异常都放在那里。

我想向用户返回异常以及错误 URL，所以我创建了以下对象：

```
class KeywordException
{
    Exception ex;
    string faultURL;
} 
```

它返回给用户`ref List<KeywordException> exceptions`

好的，到目前为止一切都很好，我发现了这样的异常：

```
catch (ArgumentNullException ane)
{
    exceptions.Add(new KeywordException(ane, URL));
    continue;
} 
```

它可以工作并将异常返回给用户，但是我如何从调用代码中知道异常实际上是什么？我得到的只是在这种情况下`Exception`它实际上是一个`ArgumentNullException`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:32:01.417

您可以查看该[`InnerException`](http://msdn.microsoft.com/en-us/library/system.exception.innerexception.aspx)属性 - 它存在于每个异常中。

此信息也将在异常的堆栈跟踪中。

的构造函数之一`Exception`采用`Exception`- 如果您使用它，`InnerException`则将设置为传入的异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:32:38.250

即使*编译时*类型`KeywordException.ex`是 just `Exception`，当你记录它时，你会看到真实的对象。您*可以*使用以下方法测试特定类型：

```
if (keywordException.ex is ArgumentNullException) 
```

但我怀疑你想这样做。您应该可以无条件地记录异常 - 或以您想要的任何形式将其显示给用户。

编辑：当然，您也可以调用`GetType()`异常来获取其类型：

```
Type exceptionType = keywordException.ex.GetType(); 
```

...但仍不清楚为什么您要以与其他异常不同的方式处理某些异常。

编辑：如果您需要在异常中使用特定于类型的信息，您应该使用以下内容：

```
WebException webException = keywordException.ex as WebException;
if (webException != null)
{
    // Use webException here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T11:39:34.360

问题是您的 KeywordException 类将异常存储为异常（这很有意义并且可能是正确的）。

为什么你想知道异常的确切类型？是向用户显示消息吗？在这种情况下，您可以使用反射来获取 ex 变量的具体类型：

```
string exceptionType = keywordException.ex.GetType().Name; 
```

# php - 如何通过 URL 传递和获取会话？

> ID：10139981
> 
> 赞同：-1
> 
> 时间：2012-04-13T11:30:08.157
> 
> 标签：php, session, authentication

我有一个名为 numbers 的变量，我在会话中使用它来识别用户。链接应该类似于 index.php?number=1234567890，其中 number 是要设置的会话名称，123456789 是用户 ID。你能解释一下如何“通过 URL 和 SET 作为变量”吗？

```
index.php?number=1234567890 
```

得到[？？？]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:33:25.220

`$_GET`您可以在 index.php 中按如下方式获取它

```
$number=$_GET['number']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:31:45.097

该变量可在您的代码中访问为`$_GET['number']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T11:34:45.423

要访问任何 GET 变量，请使用`$_GET['varname']`

与其在每次重定向时都传递 GET 变量，不如考虑使用 cookie（`setcookie`函数和`$_COOKIE`变量）或会话变量（`start_session`函数和`$_SESSION`变量）

# android - 我的应用程序中的条码扫描器 zxing 和 neoreader

> ID：10139984
> 
> 赞同：0
> 
> 时间：2012-04-13T11:30:34.893
> 
> 标签：android, barcode, zxing

我开发了一个 android 应用程序，它可以扫描条形码并用它做一些事情。该应用程序使用 ZXing 扫描代码。但是，我发现这个 zxing 扫描仪非常不可靠！它工作的电话的百分比实际上低于它不工作的电话！它只能扫描我的 Xperia ARC S 上的 5 个线性条码中的 1 个，上面有 8MP！你必须给它一分钟来扫描它：S 虽然它在 HTC 上运行良好。但是，我的应用程序需要更可靠的东西。

我在我的 ARC S 上找到了这个应用程序 NeoReader，哇……它甚至不等条形码出现在屏幕中间……它的速度如此之快，可以在一秒钟内扫描我迄今为止尝试过的每个条形码.

我的问题是：我能以某种方式使用这个 NeoReader 来扫描我的应用程序中的条形码吗？到目前为止，当我需要在我的应用程序中扫描条形码时，我只是调用 ZYing 提供的 IntentIntegrator.java 类，如下所示：

```
 IntentIntegrator.initiateScan(Products.this); 
```

它曾经用他们的算法扫描代码并将条形码返回给我，我得到它是这样的：

```
 public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
            IntentResult scanResult = 
        IntentIntegrator.parseActivityResult(requestCode, resultCode, data);
            if (scanResult != null) {
                // Handle successful scan
                String out = scanResult.getContents();
                            }
             }
    } 
```

我可以用 Neoreader 做这样的事情，或者在我的应用程序中间调用 neoreader 的任何东西，然后让它把条形码发回给我，这样我就可以使用它了吗？

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:29:34.320

自己找到了答案。Neoreader 不是开源应用程序，因此您无法将其集成到您自己的应用程序中，您也找不到源代码。

关于扫描问题，ZXing Barcode Scanner 4.0 版似乎存在一个错误，导致 xperia arc 和 arc S（可能还有其他 8MP 拍照手机）出现问题。我安装了 3.72 版，它扫描条形码的效果和 neoreader 一样好，甚至更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T22:25:53.220

不，这不适用于 NeoReader。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T13:56:26.790

有同样的问题并打电话给支持，无论是否有 API 或类似的东西。它不是免费的，但有一个 SDK 可以在您的应用程序中使用

[http://www.neom.com/solutions/neoreader/SDK](http://www.neom.com/solutions/neoreader/SDK)

工作得很好。

# teamcity - 如何在网络场上进行负载平衡和部署

> ID：10139987
> 
> 赞同：1
> 
> 时间：2012-04-13T11:30:53.757
> 
> 标签：teamcity, load-balancing, webdeploy, web-farm-framework

我正在使用 webdeploy 通过 teamcity 在测试服务器上自动部署应用程序。现在，一旦运行了所有测试脚本，我想将它部署在 Live 服务器上。我已经在 server1（控制器）上安装了一个网络场，并且我有 2 个其他服务器 server2（主）和 server3（辅助）作为网络场代理设置。现在，如何将在 testserver 上完成的发布复制到 server2 和 server3 上的实时站点并进行负载平衡。谁能解释一下我如何使用teamcity自动完成这项任务。或者我走错路了。

请指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:00:37.347

我会做一个不同的工作，部署到生产环境，这样你可以控制它何时部署，但这取决于它是什么，以及多少。

如果您正在使用 /t:package 构建包，则可以通过工件使其可用，并使用`msdeploy -verb:sync -source:package="Path to package" -dest:auto`.

在我的“部署到生产”工作中，我有这个步骤，作为命令行步骤：

```
"c:\Program Files\IIS\Microsoft Web Deploy V2\msdeploy.exe" -verb:sync -source:package="%env.deployPackagePath%" -dest:auto,includeAcls=False,wmsvc="%env.msdeploy.serviceurl%?site=%env.msdeploy.Sitename%",userName="%env.msdeploy.username%",password="%env.msdeploy.password%",authType=basic -allowUntrusted -setParam:name="IIS Web Application Name",value="%env.msdeploy.Sitename%" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T07:14:24.653

我建议查看[Web Farm Framework](http://www.iis.net/download/WebFarmFramework)，它支持部署到多个服务器，甚至从（支持的）负载平衡器中删除它们。

# javascript - 请建议在 ASP.NET mvc 项目中使用简单的 javascript 文件上传

> ID：10139990
> 
> 赞同：-2
> 
> 时间：2012-04-13T11:31:06.393
> 
> 标签：javascript, jquery, asp.net-mvc, file-upload

我需要在我的 ASP.NET mvc 项目中实现异步文件上传。它应该**只使用 javascript**（拒绝使用 flash 和 silverlight）并支持 IE7-9。我已经尝试过 valums 文件上传器，但它不支持 IE9。请指教，急需实现此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:04:46.907

除非您在表单中使用 iframe 和常规 input[type=file]，否则您不能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T15:57:22.557

看起来[AjaxFileUpload](http://www.phpletter.com/Our-Projects/AjaxFileUpload/)足以满足我的需求

# ruby - 如何在 Ruby 正则表达式中匹配韩语字符？

> ID：10139996
> 
> 赞同：8
> 
> 时间：2012-04-13T11:31:25.847
> 
> 标签：ruby, regex, unicode, ruby-1.9, cjk

我使用正则表达式对用户名进行了一些基本验证，例如`[\w-_]+`，我想添加对韩文字母的支持，同时仍然保持验证相同。

我不想允许特殊字符，例如`{}[]!@#$%^&*()`等，我只想`\w`用与给定字母表匹配的东西替换`[a-zA-Z0-9]`.

这意味着 username like`안녕`应该是有效的，但不是`안녕[]`.

我需要在 Ruby 1.9 中执行此操作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-02-21T10:45:45.180

试试这个：

[가-힣]+

这匹配从[U+AC00 到 U+D7A3 的](http://en.wikipedia.org/wiki/Template:Unicode_chart_Hangul_Syllables)每个字符，这可能足以满足您的兴趣。（我认为你不需要旧的韩文字符和东西）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-13T12:47:56.400

您可以像这样测试无效字符：

```
#encoding: utf-8
def valid_name?(name)
  !name.match(/[^a-zA-Z0-9\p{Hangul}]/)
end

ar = %w(안녕 name 안녕[].)
ar.each{|name| puts "#{name} is #{valid_name?(name) ? "valid" : "invalid"}."}
# 안녕 is valid.
# name is valid.
# 안녕[]. is invalid. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T11:45:24.717

我认为你可以替换`\w`为`[:word:]`

`/^[[:word:]\-_]+$/`应该管用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T11:51:06.403

匹配无效字符是您的最佳选择，因为有效的韩语字符太多了 - 从技术上讲，它是一个字母表，但计算机化为每个音节一个字符，此外还有数千个中文借用字符（汉字）也应该是有效的。

# microsoft-fakes - 模拟功能是否可用于 Microsoft Fakes？

> ID：10139998
> 
> 赞同：1
> 
> 时间：2012-04-13T11:31:30.463
> 
> 标签：microsoft-fakes, moles

随着 Visual Studio 11 中包含 Microsoft Fakes，我认为值得再次研究，因为我上次检查时发现 Moles 不够成熟。文档仍然很少，但我找不到任何对模拟的引用，即设置和验证对伪造对象的期望的能力。

有谁知道这当前是否包含（作为库中的一个功能）或将包含？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T01:57:29.563

它目前不包括在内，但我们正在考虑这方面的一些事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:43:44.630

尽管它们不包括在内，但您可以使用存根来破解相同的行为。在您的存根中，您可以捕获是否调用了方法以及调用的参数。当然，当你开始这样做时，你几乎是在手动滚动你自己的模拟。

与此同时，我建议使用 Moq 或 RhinoMocks。我发现语法更简单，而且我不喜欢 Microsoft Fakes 无论如何使用的生成代码。尝试使用重构工具重命名您的一个假货上的方法。这是不可能的，因为你的假是一个生成的类，而不是你正在存根的接口的实例。