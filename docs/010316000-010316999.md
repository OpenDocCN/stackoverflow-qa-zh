# StackOverflow 问答 10316000-10316999

# gwt - 如何在eclipse中制作gwt项目的war文件？

> ID：10316003
> 
> 赞同：5
> 
> 时间：2012-04-25T12:49:56.773
> 
> 标签：gwt

我正在使用 Eclipse 中的 GWT 工具包制作 Web 应用程序，当我们从 Eclipse 运行到右键单击项目并选择作为 Web 项目运行时，我的应用程序运行成功。但是当我从eclipse-ide制作war文件时右键单击项目，选择导出，然后选择WAR文件，所以它不起作用。它给我错误“输入模块名称”它不会自动检测模块名称。仅当我使用 gwt 插件制作 web 应用程序时才会发生，否则在简单的 web 动态应用程序 war 文件中使用 eclipse ide 轻松创建。我想知道如何在 eclipse 中制作 war 文件？以及如何使用 tomcat 服务器部署我的 gwt 应用程序？谢谢拉胡尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:03:14.500

看看另一个问题：[create a .war file from gwt-project](https://stackoverflow.com/questions/5403099/create-a-war-file-from-gwt-project)

事实上，真正的答案将取决于您是想使用 ANT 还是 Maven。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T16:02:10.523

WAR 文件只是您构建的 Web 应用程序项目的压缩版本。制作它们的一种简单方法是在 JDK 包中使用 jar.exe。在 eclipse 中构建项目以将这些文件压缩为 WAR 文件后运行此命令就足够了：

jar -cvf name_of_jar_file.war -C /path-to-app-built-dir /path-to-put-jar-file

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-19T15:42:29.530

最好的方法是使用命令

**导出 > 导出 ... > Web > War 文件**

如果您安装了用于 Web 应用程序的 Java 工具，您将在上下文菜单（项目文件夹上的鼠标右键）上看到此命令。否则，您应该迈出第一步。

可能是您的 GWT 项目没有显示在 Web 项目字段的选择器上，当您执行上面的命令时，对话框中的第一个。如果是这种情况，您必须确保您的项目中有**动态 Web 模块**方面。选择项目根项目导航器，然后执行

**属性 > 项目构面**

如果尚未选中，请选中右侧面板上的**动态 Web 模块。**

您应该确保 GWT 使用的 WAR 目录与动态 Web 模块使用的相同。如果您不确定您的 WAR 目录是什么（可能是名为“war”的目录），您可以访问

**属性 > Google > Web 应用程序**

并阅读右侧面板上字段**WAR 目录的内容。**

然后确保在“Web 部署程序集”中指定了 WAR 目录。你需要去

**属性 > Web 部署程序集**

并检查您的 WAR 目录是否在此处列出。如果您的战争目录是“战争”，那么您应该 `/war`在其中一行具有部署路径`/`。否则

*   按**添加...**
*   选择**文件夹**
*   按**下一步**
*   选择您的 WAR 文件夹（例如`war`）
*   按**完成**

如果您未能使您的 WAR 目录成为 Web 部署程序集的一部分，则**Export > Web > WAR**命令将创建一个 WAR 文件，但它将缺少`web.xml`WebContent 文件夹中的所有静态文件，例如 HTML、图像、等等

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-04T20:42:33.163

1.  打开你的项目。
2.  导航到战争文件夹。
3.  转到文件>导出>存档文件
4.  将您的战争文件夹导出为 zip 文件。
5.  将文件扩展名形式 .zip 更改为 .war
6.  保持冷静，享受你的战争档案。

# deployment - 有什么好的在线部署自动化和管理工具吗？

> ID：10316013
> 
> 赞同：0
> 
> 时间：2012-04-25T12:50:32.813
> 
> 标签：deployment, open-source, automation, cloud

我想为我的客户提供点击安装/点击激活选项，让他们无需根据我的服务器配置模板/自定义虚拟设备手动安装即可在线获取他们的 Magento/自定义 Web 应用程序。我知道这可以通过某些脚本来完成，但我想要的是一个 Web 解决方案，最好用 PHP 编写。

我发现standingcloud.com 提供的正是我想要的，但每月的额外费用与服务器成本相当。将定制的 Web 应用程序推送到客户控制台中也很不方便。

是否有任何类似的开源部署自动化和管理系统支持 amazon ec2/rackspace/linode 和多个自定义 Web 应用程序？

有很多开源 IaaS 产品可用于构建云基础架构的数据中心或托管公司。

但是对于 ISV 或服务提供商构建开发平台的类似开源 PaaS 产品，我没有任何线索。

SaaS 对于某些客户来说已经足够好了。但许多客户只希望托管在其选定服务器上的托管开源 Web 应用程序，以避免供应商锁定。那是一种“私人SaaS”。

有什么建议吗？感谢你的分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:39:02.423

ComodIT (http://comodit.com) 有一项功能，使您可以直接在您的站点上添加一键式部署按钮。他们还为您的用户提供了一个免费的云平台来测试您的应用程序。我不知道任何开源等效项，但如果您只需要一项免费服务，使您的用户能够使用您的配置轻松部署您的应用程序，那么这应该可以解决问题。

这是我的一个开源项目中集成的样子：http: [//storytlr.org/](http://storytlr.org/)

披露：我是 ComodIT 的联合创始人和软件架构师

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:17:24.350

这里对 PaaS 产品进行了很好的比较：[寻找 PaaS 提供商建议](https://stackoverflow.com/questions/9542784/looking-for-paas-providers-recommendations)

免责声明：我为 Cloudify 开源 PaaS 的开发人员 Gigaspaces 工作。Cloudify 是使用 Java 开发的，但允许您运行所需的任何本机进程，并支持多个云。这里有一个 apache httpd 配方： [https ://github.com/CloudifySource/cloudify-recipes/tree/master/services/apache](https://github.com/CloudifySource/cloudify-recipes/tree/master/services/apache)

您可以使用 Cloudify CLI 或 REST API 来部署应用程序。

# sql-server - 实体框架 - 获取文本列中数据的长度

> ID：10316015
> 
> 赞同：0
> 
> 时间：2012-04-25T12:50:35.217
> 
> 标签：sql-server, sql-server-2008, entity-framework, entity-framework-4

我在处理使用文本字段的表格时遇到了错误。

如果我得到一个 varchar 列的长度，我可以做

`var result = (from t in context.tablename select t.fullname.Length)`

但是，如果我在文本字段上运行相同的查询：

`var result = (from t in context.tablename select t.biography.Length)`

我得到错误：

`Argument data type text is invalid for argument 1 of len function`.

对该主题进行了一些[阅读后](http://databases.aspfaq.com/database/why-do-i-get-argument-data-type-text-is-invalid-for-argument.html)，我了解 SQL Server 为何会引发此错误，但我不确定解决它的最佳方法。我知道我可以返回结果，然后得到结果字符串的长度，但肯定有更简单的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T13:40:09.967

我认为您最好的选择是将列数据类型更新为`VARCHAR(MAX)`if it is`TEXT`或`NVARCHAR(MAX)`if it is `NTEXT`。有很多关于如何执行此操作的资源，但通常您创建一个新列，`[N]VARCHAR(MAX)`然后将所有数据更新到新列中，然后删除旧列，最后将新列重命名为旧名称。

如果您无法更改表架构，那么您将需要创建一个`view`并在该视图的选择中进行类型转换..但是您也可能只是如上所述更改了列数据类型（除非您'不是数据库所有者，您在不同的数据库中创建视图）。但请注意，EF 在视图方面的表现并不总是与在表格方面表现得一样好。

# ide - 使用 Google Drive（或任何云存储）作为开发工作区？

> ID：10316016
> 
> 赞同：17
> 
> 时间：2012-04-25T12:50:35.907
> 
> 标签：ide, cloud-storage, google-drive-api

这在某种程度上适用于所有云存储，但我特别想知道：

**使用 Google Drive 作为根开发文件夹是否可行？**

例如像这样的设置：

```
C:\Google Drive
       \Projects\...
       \Photos\...
       \Docs\... 
```

我什至需要有本地副本还是这种类型的服务足够稳定，可以用作“工作区”

我担心的是，如果我使用 IDE 或一次处理很多事情，在我操作文件时会导致明显的延迟或带宽问题吗？

如果这不切实际，那么在云存储被如此广泛使用的情况下，这种类型的基础设施是否有“最佳实践”？

*请注意，从程序员的角度来看，我对答案很感兴趣*

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-29T14:40:21.957

This was my first thought when Google released Drive. I've been running eclipse using a Google Drive folder as the workspace for a few days now. I do mostly JavaScript and PHP.

The beauty of Google Drive is that it does all the work behind the scenes. I've manipulated folders, imported projects, deleted folders and there is no issue client side. It makes no difference whatsoever to eclipse. It just takes a minute or so and the changes are reflected on Google Drive.

That being said I can save a single file as I work and there is no noticeable lag between save and sync. I can't physically see it anyways. I also agree that revision control should be combined with this as Google Drive's revision system is a bit limited, it only works for Docs formats.

Save often and let your computer sync for a few minutes at the end of the day and you should have no trouble using Google Drive as your workspace. The System Tray Icon tells you sync progress so it's easy to see when it's done.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-09T13:47:54.883

Yes, you can safely put your workspace folder in Google Drive and as a bonus you will be able to make quick edits using an online IDE, e.g. [ShiftEdit](http://shiftedit.net), [Drive Notepad](http://drivenotepad.appspot.com/) or [Neutron Drive](https://neutron-drive.appspot.com/).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T15:19:56.580

这会起作用，但你最好的选择可能是[修订控制](http://en.wikipedia.org/wiki/Revision_control)。您当然可以将两者结合起来，在您的 Google Drive 上创建一个修订后的目录，这将非常酷。

# java - 如何在java android中运行进度条时禁用正在运行的活动

> ID：10316023
> 
> 赞同：2
> 
> 时间：2012-04-25T12:50:56.277
> 
> 标签：java, android

我有一个活动或屏幕，其中主要包含 3 个视图（ex.textview1、textview2、textview3）和一个进度条。

在进度条运行或加载时，如果我单击 textview1、textview2、textview3 中的任何一个，相应的下一个活动或屏幕正在打开。

但是我希望在运行相关屏幕的进度条应该禁用（不可点击）或者如果我点击这些视图中的任何一个时不应该移动到下一个屏幕。

请举例回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:58:09.927

只需创建一个布尔值，当您有正在进行的事情时，然后在您的 onClickListener 中检查它。

```
boolean isRunning;

@Override
public void onClick(View v) {

    if(isRunning)
        return;

    //handle code normally

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:58:28.833

您可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)类来执行此操作

仅供参考，AsyncTask在 Android中被称为[无痛线程。](http://developer.android.com/resources/articles/painless-threading.html)

```
onCreate() {
  ...

  MyTask task = new MyTask();
  task.execute();

}

class MyTask extends AsyncTask
{
  onPreExecute() { 
     // disable your views here
  }

  doInBackground() {
     // do your loading here in background
  }

  onPostExecute() {
    // enable your views to start activities
  }
} 
```

# python - cPickle.load() 错误

> ID：10316037
> 
> 赞同：2
> 
> 时间：2012-04-25T12:51:24.313
> 
> 标签：python, linux, pickle

我正在使用 cPickle 将结构数据转换为数据流格式并将其传递给库。我要做的是从手动写入的文件名“targetstrings.txt”中读取文件内容，并将文件内容转换为 Netcdf 库所需的格式，如下所示，

注意：targetstrings.txt 包含拉丁字符

```
op=open("targetstrings.txt",'rb')
targetStrings=cPickle.load(op) 
```

Netcdf 库将内容作为字符串。加载文件时出现以下错误，

```
cPickle.UnpicklingError: invalid load key, 'A'. 
```

请告诉我如何纠正这个错误，我已经用谷歌搜索但没有找到合适的解决方案。

有什么建议么，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:54:19.667

pickle 不是用于读取/写入通用文本文件，而是将 Python 对象序列化/反序列化为文件。如果你想读取文本数据，你应该使用[Python 常用的 IO 函数](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)。

```
with open('targetstrings.txt', 'r') as f:
    fileContent = f.read() 
```

* * *

如果，看起来，库只是想要一个字符串列表，将每一行作为一个列表元素，你只需要这样做：

```
with open('targetstrings.txt', 'r') as f:
    lines=[l for l in f]
# now in lines you have the lines read from the file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:28:55.543

如前所述 - Pickle 不适合以这种方式使用。如果您需要手动编辑复杂的 Python 对象，这些对象将被读取并作为 Python 对象传递给另一个函数，那么还有许多其他格式可供使用 - 例如 XML、JSON、Python 文件本身。Pickle 使用 Python 特定的协议，虽然 note 是二进制的（在协议的版本 0 中），并且不会在 Python 版本之间发生变化，但这并不意味着此，甚至不是记录 Python 对象以进行持久性或通信的推荐方法（尽管它可以用于这些目的）。

# php - 在 WordPress 中检索评论编号（facebook）

> ID：10316040
> 
> 赞同：0
> 
> 时间：2012-04-25T12:51:31.197
> 
> 标签：php, facebook, wordpress

我在我的 WordPress 博客上启用了默认的 WordPress 和 Facebook 评论。

当然，我的主题只显示 WordPress 评论的评论数。

我需要的是一种从 Facebook 评论框中检索每个帖子的评论数量，然后将其添加到 WordPress 评论的评论数量的方法。

我不能使用

```
<fb:comments-count href=http://example.com/></fb:comments-count> 
```

因为它使用javascript。我不精通php，所以任何帮助都会很棒。我知道我可以使用图形 api，但不知道如何获取评论数并将其添加到 WordPress 计数中。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:55:52.340

我不知道 wordpress 的部分内容，但您可以使用[facebook FQL](http://developers.facebook.com/docs/reference/fql)使用[link_stat 表](http://developers.facebook.com/docs/reference/fql/link_stat/)获取评论数量：

```
SELECT commentsbox_count
FROM link_stat
WHERE url="http://example.com" 
```

确保您用于查询的 url 与评论插件中使用的 url**完全匹配。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:29:43.863

或者你可以使用这个

```
<fb:comments-count href=http://example.com/></fb:comments-count> 
```

并在它周围包裹一个“跨度”

或者这个 iframe 版本

```
<iframe src="http://www.facebook.com/plugins/comments.php?href=example.com&permalink=1" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:130px; height:16px;" allowTransparency="true"></iframe> 
```

但您可以在此页面上阅读更多相关信息 - [http://developers.facebook.com/docs/reference/plugins/comments/](http://developers.facebook.com/docs/reference/plugins/comments/)

# asp.net - 将文件发布到不同服务器上的 ashx 页面

> ID：10316052
> 
> 赞同：1
> 
> 时间：2012-04-25T12:52:02.210
> 
> 标签：asp.net, file-upload, ashx

我有一个 asp.net 网站，用户在其中选择一些带有 fileUpload 控件的文件。然后需要将文件发布到**另一台服务器**

我的域名是 [http://www.mydomain.com]

我必须上传文件的地址类似于：[https://www.externaldomain.com/upload.ashx?asd2t423eqwdq]

我尝试了以下方法：

```
Dim uploadedFiles As HttpFileCollection = Request.Files
Dim userPostedFile As HttpPostedFile = uploadedFiles(0)
Dim filePath As String

 filePath = "https://www.externaldomain.com/upload.ashx?asd2t423eqwdq" & "/" & userPostedFile.FileName

userPostedFile.SaveAs(filePath) 
```

但我收到一个错误：SaveAs 方法配置为需要根路径，并且路径“https://www.externaldomain.com/upload.ashx?asd2t423eqwdq/Core CSS 3.pdf”没有根

我搜索了互联网，但我只能找到有关如何上传到页面服务器的示例。

**编辑：** 我使用 HttpWebRequest 访问该链接，它部分有效。我还需要发送 2 个 POST 参数、用户名和密码。

这就是我的代码现在的样子：

```
Dim link As String = "https://www.externaldomain.com/upload.ashx?e9879cc77c764220ae80"

Dim req As HttpWebRequest = WebRequest.Create(link)
Dim boundary As String = "-----"
req.ContentType = "multipart/form-data; boundary=" + boundary
req.Method = "POST"

Dim username As String = "test"
Dim userpass As String = "123456"

Dim credentials() As Byte = Encoding.UTF8.GetBytes("username=" & username & "&password=" & userpass & "--\r\n" & boundary & "--\r\n")

    Dim separators() As Byte = Encoding.UTF8.GetBytes("--" + boundary + "--\r\n")

    Dim uploadedFiles As HttpFileCollection = Request.Files //this is where i take the file that the user wants to upload
    Dim userPostedFile As HttpPostedFile = uploadedFiles(0)

    //i convert the file to a byte array
    Dim binaryReader As IO.BinaryReader
    Dim fileBytes() As Byte
    binaryReader = New BinaryReader(userPostedFile.InputStream)
    fileBytes = binaryReader.ReadBytes(userPostedFile.ContentLength)

    //'get the request length
    req.ContentLength += credentials.Length
    req.ContentLength += userPostedFile.ContentLength
    req.ContentLength += separators.Length
    req.ContentLength += 1

    Dim dataStream As Stream
    dataStream = req.GetRequestStream

    dataStream.Write(credentials, 0, credentials.Length)
    dataStream.Write(separators, 0, separators.Length)
    dataStream.Write(fileBytes, 0, fileBytes.Length)

    dataStream.Close()

    Dim response As HttpWebResponse = req.GetResponse 
```

我得到的错误是“禁止的”。用户名和密码100%正确。我认为问题在于我没有正确创建请求。如果我只发布凭据，我会收到错误消息，说我没有文件......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:43:49.477

最终我使用了这里提供的代码[http://aspnetupload.com/](http://aspnetupload.com/)

我将它编译成一个 dll 并添加了对我的解决方案的引用。有用 ：）

# maven - 鉴于它在 Maven 中的坐标，我如何检查工件源？

> ID：10316055
> 
> 赞同：3
> 
> 时间：2012-04-25T12:52:06.793
> 
> 标签：maven, maven-scm

我即将编写一个工具，我们的开发人员可以使用该工具在给定 maven 坐标的情况下检查工件的来源。该工具还应该能够选择递归地检查所有 SNAPSHOT 依赖项的源。

我的第一个问题是：我需要编写这个工具吗？可以想象这不是一个非常独特的用户场景，但我还没有找到适合实现这一目标的东西。我查看了 scm:checkout 和 scm:bootstrap，两者都需要有关连接 url 的知识，因为我只有一个 artifactID。除了编写自定义工具之外，还有其他方法吗？

如果没有，我的家庭 brew 工具将执行以下操作：

1.  解析 .m2/settings.xml 以确定要使用的存储库 下载工件的 pom。
2.  使用下载的 pom 中的 scm-tag 创建一个临时 bootstrap-pom。
3.  使用 scm:bootstrap 和 bootstrap-pom 来检查源。
4.  [可选] 搜索具有 SNAPSHOT 依赖项的 pom 源并重复该过程。

我的第二个问题是：这听起来对你来说是个好方法吗？有什么需要注意的地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:30:08.913

对于您想以这种方式签出的每个项目，您可以添加一个包含用于 scm 插件引导目标的插件配置的配置文件。插件配置将与 scm URL 在同一个 POM 中，以便处理 #2 和 3; 你不需要单独的 bootstrap-pom。

要获取初始 POM，您可以`dependency:get`从命令行使用：

```
mvn dependency:get -Dartifact=some.group:my.artifact:version:pom -Ddestination=someDirectory 
```

在下载 POM 的目录中，执行引导程序：

```
mvn -Pbootstrap-profile-id scm:bootstrap 
```

这将检查顶级项目。

我不知道你会如何使这个递归。您可能可以使用`dependency:copy-dependencies`请求传递依赖项和复制 POM，然后在其中的每一个上运行引导过程。不知道这将如何工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T06:50:07.720

user944849 的解决方案对我不起作用，但这是一个有效的示例

```
mvn dependency:get -Dartifact=ar.com.hjg:pngj:2.1.0:pom  -Ddest=pom.xml
mvn scm:bootstrap -Dgoals=validate
mv target/checkout ~/projects/pngj 
```

# android - 在模拟器上保存和加载文件

> ID：10316056
> 
> 赞同：0
> 
> 时间：2012-04-25T12:52:15.800
> 
> 标签：android, file

我想保存一个文件，其中包含一个来自edittext的字符串，然后加载它。

不知何故，这不起作用。我认为存储的文件找不到或没有存储（根据日志）。

如何解决这个问题？

这是保存代码：

```
Log.i("Watcher","Saving...");
ProgressDialog dSave = ProgressDialog.show(this, "Saving", "SAving. Please wait...",false);             
String fName = "WatchConf";
EditText servPath = (EditText)findViewById(R.id.ServerPath);
String sServPath = servPath.getText().toString();

try {
    FileOutputStream fos = openFileOutput(fName, Context.MODE_PRIVATE);
        fos.write(sServPath.getBytes());
        fos.flush();
        fos.close();
        Log.d("Watcher","Saved");

        File fCheck = new File(getFilesDir()+fName);
        if(fCheck.exists()){
            Log.i("Watcher","Saved successfully");
        } 
```

加载代码：

```
Log.i("Watcher","Loading...");
        String fName = "WatchConf";
        EditText servPath = (EditText)findViewById(R.id.ServerPath);

        try {           
            InputStreamReader isr = new InputStreamReader(openFileInput(getFilesDir()+"/"+fName));
            char[] cRead = new char[100];
            isr.read(cRead);
            String sRead = new String(cRead);
            servPath.setText(sRead);
            isr.close();
            Log.i("Watcher","Loaded"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:23:09.277

你写过：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:48:06.083

它不起作用的原因是，我想将字符串过早加载到视图中。

`setContentView(R.layout.main);`解决问题后加载。

# image-processing - 填充二进制对象内的孔

> ID：10316057
> 
> 赞同：31
> 
> 时间：2012-04-25T12:52:17.187
> 
> 标签：image-processing, opencv, javacv

我在填充黑色硬币内的白洞时遇到问题，因此我只能使用填充黑色硬币的 0-255 二进制图像。我使用中值滤波器来完成它，但在这种情况下，硬币之间的连接桥会增长，并且不可能在经过几次侵蚀后才能识别它们......所以我需要一个简单的 opencv 中的类似 floodFill 的方法

这是我的带有孔的图像：

![在此处输入图像描述](../Images/a576379f95c34d5b67ccbe4ba4c25914.png)

**编辑：**类似floodfill的功能必须在不提示X，Y坐标作为种子的情况下填充大组件中的孔......

编辑：我尝试使用 cvDrawContours 函数，但我没有在更大的轮廓中填充轮廓。

这是我的代码：

```
 CvMemStorage mem = cvCreateMemStorage(0);
        CvSeq contours = new CvSeq();
        CvSeq ptr = new CvSeq();
        int sizeofCvContour = Loader.sizeof(CvContour.class);

        cvThreshold(gray, gray, 150, 255, CV_THRESH_BINARY_INV);

        int numOfContours = cvFindContours(gray, mem, contours, sizeofCvContour, CV_RETR_CCOMP, CV_CHAIN_APPROX_SIMPLE);
        System.out.println("The num of contours: "+numOfContours); //prints 87, ok

        Random rand = new Random();
        for (ptr = contours; ptr != null; ptr = ptr.h_next()) {
            Color randomColor = new Color(rand.nextFloat(), rand.nextFloat(), rand.nextFloat());
            CvScalar color = CV_RGB( randomColor.getRed(), randomColor.getGreen(), randomColor.getBlue());
            cvDrawContours(gray, ptr, color, color, -1, CV_FILLED, 8);
        }
        CanvasFrame canvas6  = new CanvasFrame("drawContours");
        canvas6.showImage(gray); 
```

结果：（你可以看到每个硬币里面的黑洞）

![在此处输入图像描述](../Images/fd03bc8681ee1fd1db2dda0a3d88f9e7.png)

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-04-25T14:33:10.400

有两种方法可以做到这一点：

**1) 轮廓填充：**

首先反转图像，在图像中找到轮廓，用黑色填充并反转回来。

```
des = cv2.bitwise_not(gray)
contour,hier = cv2.findContours(des,cv2.RETR_CCOMP,cv2.CHAIN_APPROX_SIMPLE)

for cnt in contour:
    cv2.drawContours(des,[cnt],0,255,-1)

gray = cv2.bitwise_not(des) 
```

结果图像：

![在此处输入图像描述](../Images/d4689a383e5ae12e0dca8f15219c7de9.png)

**2）图像打开：**

```
kernel = cv2.getStructuringElement(cv2.MORPH_ELLIPSE,(3,3))
res = cv2.morphologyEx(gray,cv2.MORPH_OPEN,kernel) 
```

生成的图像如下：

![在此处输入图像描述](../Images/74696668988fff6e4fc93408a3991429.png)

您可以看到，这两种情况没有太大区别。

**NB** : gray - 灰度图像，所有代码都在 OpenCV-Python 中

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T14:31:03.693

我想，一个简单的扩张和侵蚀会很好地缩小差距。我想也许这就是你要找的。

更稳健的解决方案是对整个图像进行边缘检测，然后对圆形进行霍夫变换。一个快速的谷歌显示有各种语言的代码示例，用于使用霍夫变换对圆圈进行大小不变检测，所以希望这会给你一些东西。

使用霍夫变换的好处是该算法实际上会为您提供每个圆的大小和位置的估计，因此您可以根据该模型重建理想的图像。重叠也应该非常健壮，尤其是考虑到这里输入图像的质量（即较少担心误报，因此可以降低结果的阈值）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-25T14:39:31.213

您可能正在寻找[Fillhole 变换](https://www.mathworks.com/help/images/ref/imfill.html)，一种形态图像重建的应用。

这种转换将填补你硬币上的洞，尽管代价是也填满了相邻硬币组之间的所有洞。其他发帖者建议的霍夫空间或基于开放的解决方案可能会给您更好的高级识别结果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-27T16:28:21.533

如果有人正在寻找 cpp 实现 -

```
 std::vector<std::vector<cv::Point> > contours_vector;

            cv::findContours(input_image, contours_vector, CV_RETR_LIST, CV_CHAIN_APPROX_NONE);

            cv::Mat contourImage(input_image.size(), CV_8UC1, cv::Scalar(0));
            for ( ushort contour_index = 0; contour_index < contours_vector.size(); contour_index++) {
                cv::drawContours(contourImage, contours_vector, contour_index, cv::Scalar(255), -1);
            }

            cv::imshow("con", contourImage);
            cv::waitKey(0); 
```

[![在此处输入图像描述](../Images/c0ad29b8974bf8837cb68d38d13fbe27.png)](https://i.stack.imgur.com/xcXeC.png)

[![在此处输入图像描述](../Images/08a075573cecf6686a92e2002dae87e6.png)](https://i.stack.imgur.com/C1nYp.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T14:01:28.720

尝试使用[cvFindContours()](http://opencv.willowgarage.com/documentation/structural_analysis_and_shape_descriptors.html#cvFindContours)函数。您可以使用它来查找连接的组件。使用正确的参数，此函数返回一个列表，其中包含每个连接组件的轮廓。

找到代表孔的轮廓。然后使用[cvDrawContours()](http://opencv.willowgarage.com/documentation/drawing_functions.html#drawcontours)用前景色填充选定的轮廓，从而关闭孔。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-04T20:10:42.593

我认为如果物体被触摸或拥挤，使用轮廓和数学形态学开口会出现一些问题。相反，找到并测试了以下简单的解决方案。它工作得很好，不仅适用于这些图像，而且适用于任何其他图像。

这是[http://blogs.mathworks.com/steve/2008/08/05/filling-small-holes/中看到的步骤（优化）](http://blogs.mathworks.com/steve/2008/08/05/filling-small-holes/)

let `I`: 输入图像

```
1\. filled_I = floodfill(I). // fill every hole in the image.
2\. inverted_I = invert(I)`.   
3\. holes_I = filled_I AND inverted_I. // finds all holes 
4\. cc_list = connectedcomponent(holes_I) // list of all connected component in holes_I.
5\. holes_I = remove(cc_list,holes_I, smallholes_threshold_size) // remove all holes from holes_I having size > smallholes_threshold_size.
6\. out_I = I OR holes_I. // fill only the small holes. 
```

简而言之，算法就是找到所有的洞，去掉大的，然后把小的只写在原始图像上。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-15T13:03:28.883

我一直在互联网上寻找合适的**imfill**函数（如 Matlab 中的函数），但在 C 中使用 OpenCV 工作。经过一番研究，我终于想出了一个解决方案：

```
IplImage* imfill(IplImage* src)
{
    CvScalar white = CV_RGB( 255, 255, 255 );

    IplImage* dst = cvCreateImage( cvGetSize(src), 8, 3);
    CvMemStorage* storage = cvCreateMemStorage(0);
    CvSeq* contour = 0;

    cvFindContours(src, storage, &contour, sizeof(CvContour), CV_RETR_CCOMP, CV_CHAIN_APPROX_SIMPLE );
    cvZero( dst );

    for( ; contour != 0; contour = contour->h_next )
    {
        cvDrawContours( dst, contour, white, white, 0, CV_FILLED);
    }

    IplImage* bin_imgFilled = cvCreateImage(cvGetSize(src), 8, 1);
    cvInRangeS(dst, white, white, bin_imgFilled);

    return bin_imgFilled;
} 
```

为此：[原始二进制图像](http://img688.imageshack.us/img688/4715/originalbinaryimage.jpg)

结果是：[最终二值图像](http://img694.imageshack.us/img694/5681/finallbinaryimage.jpg)

诀窍在于 cvDrawContours 函数的参数设置： cvDrawContours(dst, contour, white, white, 0, CV_FILLED);

*   dst = 目标图像
*   轮廓 = 指向第一个轮廓的指针
*   白色 = 用于填充轮廓的颜色
*   0 = 绘制轮廓的最大级别。如果为 0，则仅绘制轮廓
*   CV_FILLED = 绘制轮廓线的粗细。如果它是负数（例如，=CV_FILLED），则绘制轮廓内部。

openCV 文档中的更多信息。

可能有一种方法可以直接将“dst”作为二进制图像获取，但我找不到如何将 cvDrawContours 函数与二进制值一起使用。

# wcf - Visual Studio 服务参考生成器和 DataContracts

> ID：10316063
> 
> 赞同：0
> 
> 时间：2012-04-25T12:52:31.950
> 
> 标签：wcf, visual-studio, serialization, wsdl, datacontract

我正在做一个项目，客户改变了他们生成我们使用的 wsdls 的方式。当我使用原始 wsdl 生成服务引用时，似乎在 reference.cs 类中使用了 DataContract 属性。当我使用新的 wsdl 时，似乎正在使用 XmlSerializer 属性。

这会导致问题，因为元素的顺序是由 XmlElement 属性强制执行的。根据我的阅读，如果 wsdl 中使用的架构元素被忽略或禁止，VS 服务生成器将执行此操作。

是否有任何自动化或其他方式可以突出这些错误可能在哪里？

谢谢

# sql - 进行通用查询，如何？

> ID：10316064
> 
> 赞同：1
> 
> 时间：2012-04-25T12:52:33.610
> 
> 标签：sql, entity-framework-4, entity, entity-sql

这是我的工作代码：

```
var queryString = "SELECT VALUE c " +
                  "FROM EMI_ERPContext.Customer AS c " +
                  "WHERE c.FirstName='Emanuel'";
ObjectQuery<Customer> customers = ((IObjectContextAdapter)context).ObjectContext.CreateQuery<Customer>(queryString); 
```

这段代码工作正常。但我希望能够将其提供给任何类型。目前它仅适用于客户。使**queryString**动态化很容易，但我该如何称呼这条线：？

```
ObjectQuery<ANYTYPE> anytypeObjects = ((IObjectContextAdapter)context).ObjectContext.CreateQuery<ANYTYPE>(queryString); 
```

有没有一种方法可以调用 CreateQuery，而不需要提供特定的类型，或者有没有简单的方法可以使这项工作？感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:29:48.507

我做到了..，使用

```
ObjectQuery<dynamic> anytypeObjects = ((IObjectContextAdapter)context).ObjectContext.CreateQuery<dynamic>(queryString); 
```

工作正常！

# silverlight - Silverlight 工具提示 Silverlight 5 上的 BusyIndi cator 阴影效果

> ID：10316066
> 
> 赞同：1
> 
> 时间：2012-04-25T12:52:38.860
> 
> 标签：silverlight, busyindicator

我在 Silverlight 5 中使用 Silverlight Toolkit Apr 2010 中的 BusyIndi​​cator 在 Silverlight 5 中有一个奇怪的行为。我在 Silverlight 5 上得到一个奇怪的阴影效果，但在 Silverlight 4 中没有阴影。

有没有人遇到过这种奇怪的行为？Silverlight Toolkit Apr 2010 和 Silverlight 5 之间是否存在一些兼容性问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T18:33:23.047

如果您使用的是 Silverlight 5，您应该升级到 2011 年 12 月发布的 Silverlight 5 Toolkit。[http://silverlight.codeplex.com/releases/view/78435](http://silverlight.codeplex.com/releases/view/78435)

# javascript - Htmlunit 选择输入运行 Dojo javascript 包

> ID：10316072
> 
> 赞同：0
> 
> 时间：2012-04-25T12:52:52.560
> 
> 标签：javascript, dojo, selection, htmlunit, textinput

所以我试图访问一个文本框，以便将该框从默认的“选择客户”更改为“PE”。我的问题是元素被 Htmlunit 识别为 HtmlTextInput 而不是 HtmlSelection。我了解到它运行道场，这使事情变得有点复杂。

这是我试图操纵的代码片段。

```
<form action="#" method="GET">
<span class="headlines">Customer:</span>
<select id="orgSelect"
name="orgSelect"
dojoType="dijit.form.FilteringSelect"
labelType="text"
    style="width: 150px;visibility:hidden"
autoComplete="true"

<option value="__select__" selected>Select Customer</option>
<option value="-1">**All Customers**</option>

<option value="2396-1986">PCLP</option>

<option value="3-1987">PE</option>

<option value="8262-1988">PEA</option> 
```

我的代码是

```
List <HtmlForm> f= page.getForms();
HtmlTextInput ba = f.get(0).getInputByName("orgSelect");
ba.setValueAttribute("PE"); 
```

这是文本版本的外观。

客户：选择客户PE

?

报告类别：选择报告类别_*选择*_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:00:13.857

您不能直接设置 HtmlSelect。

您只需要在选择中“选择”好的选项。

例如：

```
 HtmlSelect select = page.getHtmlElementById("myId");
for (HtmlOption o : select.getOptions()) {
    if (o.getValueAttribute().contains("myValue")) { 
        select.setSelectedAttribute(o, true);
    }
} 
```

# javascript - 在动态超链接中隐藏动态电子邮件地址

> ID：10316073
> 
> 赞同：0
> 
> 时间：2012-04-25T12:52:52.887
> 
> 标签：javascript, sharepoint, email, hyperlink

第一次在这里提问，也是一个前卫新手，所以我会尽量清楚地回答我的问题。我有 Sharepoint 2010 Online，我一直在尝试找到一种将某些网站连接到第三方票务网站的方法。我的公司有不同的客户，这些客户在 Sharepoint 中有一个特定的客户站点，以及一个特定的联系人，当提出票证时应该联系该联系人。我现在拥有的是这个；Sharepoint 中的特定客户站点（因此客户 y 的 URL 类似于 CustomerY.aspx 和客户 X CustomerX.aspx）。我还有一个带有票务系统的第三方网站。这个 url 的第一部分是静态的，而第二部分是基于客户试图访问该票务系统的。我也有特定客户的特定联系人。

是否有可能（使用 javascript）在超链接中链接到客户的特定票务系统网站，同时向所选联系人发送电子邮件？-

我希望我已经尽可能清楚地表达了自己。:) 如果您还有其他问题，请提问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:48:59.220

不，这是不可能的。您不能通过在浏览器中执行 javascript 来发送电子邮件。

# vb.net - VB登录会话

> ID：10316078
> 
> 赞同：0
> 
> 时间：2012-04-25T12:53:10.620
> 
> 标签：vb.net, session

嗨，我完全迷失了这段代码（也是非常新的），我试图在 else 语句之后创建一个会话。你如何创建一个会话并让它被另一个文件读取？

```
 Dim conn As MySqlConnection
    'connect to DB
    conn = New MySqlConnection()
    conn.ConnectionString = "server=localhost;Port=3306; user id=****; password=****; database=testtable"
    'see if connection failed.
    Try
        conn.Open()
    Catch myerror As MySqlException
        MessageBox.Show("Error Connection to Database: " & myerror.Message)
    End Try
    'sql query
    Dim myAdapter As New MySqlDataAdapter

    Dim sqlquery = "SELECT * FROM members Where login='" & UsernameTextBox.Text & "' and passwd='" & PasswordTextBox.Text & "'"
    Dim myCommand As New MySqlCommand()
    myCommand.Connection = conn
    myCommand.CommandText = sqlquery
    'start query
    myAdapter.SelectCommand = myCommand
    Dim myData As MySqlDataReader
    myData = myCommand.ExecuteReader()
    'see if user exits.
    If myData.HasRows = 0 Then

        MessageBox.Show("Invalid Username/Password", "Login Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
    Else

      Dim login As String = System.Web.HttpContext.Current.Session("login")
        System.Web.HttpContext.Current.Session("login") = UsernameTextBox.Text

        Dim Form1 = New Form1
        Form1.Show()
        Me.Visible = False
    End If 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:40:23.153

会话只存在于 ASP.Net 中。

您应该在表单类的构造函数参数和/或属性中传递信息。

# dojo - 无法在 IE8、9 中使用 dojox.form.Uploader 选择多个文件

> ID：10316081
> 
> 赞同：0
> 
> 时间：2012-04-25T12:53:21.487
> 
> 标签：dojo

我正在尝试实现 dojox.form.Uploader 以上传多个文件：这是我的做法：

```
<script type="text/javascript">
    dojo.require("dojo.parser");
    dojo.require("dijit.form.Button");
    dojo.require("dojox.form.Uploader");        
    dojo.require("dojox.form.uploader.plugins.IFrame");
</script>
<body>
    <div data-dojo-type="dijit.form.Form" id="myMultipleForm1"
        data-dojo-id="myMultipleForm1" action="documentUpload.do"
        method="post" encType="multipart/form-data">
        <div data-dojo-type="dojox.form.Uploader" id="multipleUploader1"
            multiple="true"
            data-dojo-props="name:'uploadedfile[]',
       showInput:'before',isDebug:true">Browse
        </div>
        <button type="submit" data-dojo-type="dijit.form.Button"
            id="submitMultipe1Button">Submit</button>
    </div>
</body> 
```

它在 FileFox 和 Chrome 上运行良好，浏览时我可以选择多个文件，但在 IE8,9 上只能选择一个。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T15:13:34.467

您可以尝试使用闪光灯。只需添加：

```
dojo.require("dojox.form.uploader.plugins.Flash") 
```

而不是 iframe，但 flash 有一些限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:55:26.767

IE8/9 不支持 HTML5 文件 API，因此不支持 Dojox 中实现的拖放。

IE10 确实支持 API，所以应该可以正常工作。

# delphi - 查询以按不同字段的日期获取数据

> ID：10316082
> 
> 赞同：-1
> 
> 时间：2012-04-25T12:53:28.410
> 
> 标签：delphi, delphi-7

我想使用比较日期（收入、结果日期和另一个字段）从数据库中获取数据我使用这种格式：

```
Form6.ADOTable1.Filter := 'student_name like '+QuotedStr(sEdit1.Text) +
       ' and income_date  >='''+date1+''' and income_date  <= '''+date2+'''+
       ' and outcome_date >='''+date1+''' and outcome_date <= '''+date2+''''; 
```

当我运行程序时出现错误，我不知道为什么。请帮我。 **我正在使用德尔福 7**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:52:04.323

由于错误不清楚，您可以尝试不同的方法来过滤您的记录：添加一个 TADOQuery 组件。在连接属性中建立数据库连接。然后将以下代码应用于您之前使用的任何事件：

```
With ADOQuery1 do 
begin
    close;
    sql.clear;
    sql.add('SELECT * FROM table 
             WHERE student_name like '+QuotedStr(sEdit1.Text)+' 
             AND income_date  >='+date1+'
             AND income_date  <='+date2+' 
             AND outcome_date >='+date1+' 
             AND outcome_date <='+date2);
    open;
end;

If you are using DBCommponents, Make sure you link them with ADOQury1 instead of ADOTable1. 
```

# jquery - jquery数据表中没有出现水平滚动条

> ID：10316084
> 
> 赞同：4
> 
> 时间：2012-04-25T12:53:35.023
> 
> 标签：jquery, html, datatable

我正在使用 jquery 数据表在 html 表中添加水平和垂直滚动条。除了没有出现水平滚动条并且水平内容超出屏幕之外，其他一切工作正常。我正在使用以下代码：

```
jQuery(document).ready(function(){
    var oTable = jQuery('#example').dataTable( {
    "bPaginate": false,
    "bFilter": false,
    "bInfo": false,
    'bSortable': false,
    "aaSorting": [],
    "bAutoWidth": false,
    "sScrollY": "300",
    "sScrollX": "50%",
    "sScrollXInner": "100%",
    "bScrollCollapse": true
    });
    new FixedColumns( oTable );
}); 
```

改变 sScrollX 不会改变任何东西。更改 sScrollXInner 会使表格变形。

以下是 div 中表格的 html 代码：

```
<div id="demo">
   <table id="example" class="display" border="0" width="500px" cellspacing="0"
   cellpadding="10" align="center" style="border: solid 1px #dedfe1;"> 
```

我的要求是有一个固定的表头和固定的最左边的列。这就是我使用 jquery 数据表的原因。表头是固定的，垂直滚动工作正常。没有出现水平滚动。

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:23:23.437

我不确定这是否会帮助您解决这种情况。只是一个疯狂的想法为什么不尝试添加 css 属性溢出-x:scroll

# magento - Magento - 实现自定义产品导入功能

> ID：10316086
> 
> 赞同：0
> 
> 时间：2012-04-25T12:53:44.260
> 
> 标签：magento, magento-1.6

我有一个 Magento 1.6 网站，它必须从供应商提供的几个 CSV 文件中导入产品。我看到有一个导入功能，但它对于我必须做的事情不够灵活。

具体来说，我必须执行以下任务：

*   当产品由多个
    供应商销售时，为产品选择供应商。
*   重新映射产品类别。

以下是上述内容的详细信息。

**选择供应商**
供应商会提供他们的产品清单，不同的清单可能包含相同的产品。导入功能必须比较要导入的产品，并按照某种逻辑将每个产品“分配”给一个或另一个供应商。

**示例**：产品*XYZ*由供应商**A**、供应商**B**和供应商**C**销售。**A**卖的便宜，**B**次便宜，**C**最贵。但是，**A**没有库存，**B**有一些，**C**有很多。然后应该将产品“分配”给**B**，并从此类列表中提取其详细信息。

这种分配的效果应该是，当我们的客户下订单时，它会自动转换成多个订单给我们的供应商（但我仍然需要找出方法）。

**重新映射产品类别**
当我们收到供应商的产品列表时，它们与供应商的类别相关联。例如，平板电视可能在一个供应商的列表中属于“家用电子”类别，而在另一个列表中则属于“电子产品”。因此，我们创建了一个“地图”，它为每个供应商类别指定了我们系统中的目的地类别。我需要做的是检查进口产品并将它们重新分配到适当的类别。

这两个任务的逻辑都很简单，如果不是因为我对 Magento 完全陌生，我可以毫无问题地实现它。在这种情况下，解决它们的最佳方法是什么？我应该实现自定义模块吗？以防万一，最好的起点是什么？

提前感谢您的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:40:28.417

您必须为此创建新的导入配置文件，只需创建新的导入配置文件，将您的 csv 文件放入 var/import 文件夹并为此创建新的 php 文件，查看 magento 默认导入如何工作，然后将您的 php 文件放入 app/code/local /Mage/Catalog/Model/Convert/Adapter/ 并在您创建的导入配置文件中进行一些 xml 更改，您就完成了

# c# - 如何从gridview中具有下拉列表控件的列的dataTable中获取值？行更新事件

> ID：10316087
> 
> 赞同：0
> 
> 时间：2012-04-25T12:53:45.180
> 
> 标签：c#, asp.net, sql, gridview, sqldatasource

如何从 gridview 的数据表中获取控件为下拉列表的特定列的值。所以我不想获取下拉列表值，我想获取在数据表中设置的列的值。

我在行更新事件中需要它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:03:50.317

dbms 中的值只有在用户更改它时才会有所不同，因此要么再次从 dbms 中选择它，要么 - 更好地 - 使用from 。[`OldValues`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewupdateeventargs.oldvalues.aspx) `Dictionary``GridViewUpdateEventArgs`

```
void GridView_RowUpdating(Object sender, GridViewUpdateEventArgs e)
{
    String fieldName = "FooColumn";
    Object oldValue = e.OldValues[fieldName];
} 
```

> OldValues 属性会自动填充行中所有字段名称/值对的原始值。为行中的每个字段将单独的条目添加到 OldValues 属性。

# database - 黑莓 - 在 sd 卡模拟器中看不到总是 db

> ID：10316090
> 
> 赞同：0
> 
> 时间：2012-04-25T12:53:55.533
> 
> 标签：database, sqlite, blackberry, emulation

我不知道发生了什么。

这是我的代码：

```
public class MyApp extends MainScreen {
Database sqliteDB;
URI uri;
String name;
public MyApp()
{
try{
uri = URI.create("file:///SDCard/Databases/sample/" +"prueba.db");

sqliteDB = DatabaseFactory.create(uri);
sqliteDB = DatabaseFactory.open(uri);
Statement st = sqliteDB.createStatement("CREATE TABLE joke(name)");
st.prepare();
st.execute();
st.close();

 Statement st1 = sqliteDB.createStatement("INSERT INTO joke VALUES ('Maxo')");
st1.prepare();
st1.execute();
st1.close();

Statement st2 = sqliteDB.createStatement("INSERT INTO joke VALUES ('Lala')");
st2.prepare();
st2.execute();
st2.close();

/*
Statement st1 = sqliteDB.createStatement("SELECT * from joke");

st1.prepare();
Cursor c = st1.getCursor();

Row r;
while(c.next()) {
    r = c.getRow();
     name =  r.getString(0);

}

st1.execute();
st1.close();*/
sqliteDB.close();

add(new RichTextField("Status: Database was created and inserted the values successfully"));

//add(new RichTextField(""+name));

}
catch (Exception e){
System.out.println(e.getMessage());
e.printStackTrace();
}
}

} 
```

我只是创建一个数据库、一个表并插入两个字段。所以我要做的是首先执行模拟器，为我的 sdcard 设置一个目录。之后我执行我的程序，有时它会在该目录中创建数据库，有时不会，有时它会创建没有表或数据的数据库.. 我不知道为什么，我尝试了 8520 9550 模拟器，但它很少发生数据库和SD卡。任何人都知道会发生什么？编码很烦人，有时它有时不起作用，你不知道为什么..我认为它不是编码问题，因为有时它起作用：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:06:12.937

确保您已安装您的 SD 卡。双击您要保存数据库的文件夹，然后勾选复选框以在下次运行模拟器时重新安装它。

希望能帮助到你。

# asp.net - 使用网站支付标准在 asp.net 网站中集成 Paypal 沙盒

> ID：10316097
> 
> 赞同：3
> 
> 时间：2012-04-25T12:54:06.460
> 
> 标签：asp.net, paypal

我已经使用网站支付标准在我的 asp.net 中集成了 paypal 沙箱，如下所示。

```
<form name="paypal" action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_xclick" />
                            <input type="hidden" name="business" value="abc_131556943_biz@gmail.com" />

                            <input type="hidden" name="item_name" value="MyItem" />

                            <input type="hidden" name="amount" value="0.01" />

                            <input type="hidden" name="return" value="http://stackoverflow.com/questions/ask" />
                            <input type="hidden" name="cancel_return" value="http://stackoverflow.com" />
                            <input type="hidden" name="notify_url" value="http://stackoverflow.com" />
                            <input type="hidden" name="no_shipping" value="1" />
                            <input type="submit" value="Please Wait....." style="visibility: hidden" />
                            </form> 
```

现在的问题是，当我被重定向到贝宝时，它首先要求登录贝宝沙盒帐户。我想问是否有必要登录贝宝沙箱进行付款。是否有任何参数我们可以在隐藏字段中发送，这样它就不会要求沙箱登录。

谢谢，拉杰比尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:12:22.147

我通常在测试时预认证进入沙盒以跳过/保持正常的代码流。除了使用真实帐户之外，我不知道可以通过它做什么。

# mysql - 如何优化这个 MYSQL 查询？

> ID：10316100
> 
> 赞同：1
> 
> 时间：2012-04-25T12:54:08.987
> 
> 标签：mysql, query-optimization

我有两个表结构如下，这些表有很多数据但不能改变表结构

表“售后”

```
CREATE TABLE IF NOT EXISTS `postsale` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `group_id` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `season` varchar(25) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `sale_no` int(5) NOT NULL,
  `auction_date` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `season_time` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `lot_no` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `invoice_no` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `origin` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `tea_type` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `sub_tea_type` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `category` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `mark` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `grade` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `no_of_packages` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `gross_wt` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `net_wt` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `auction_valuation` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `lsp_sp` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `package_type` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `package_no` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `quantity` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `auctioneer` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `auction_price` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `buyer` text CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `area` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `broker_code` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `csv` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `session` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=29623 ; 
```

和表压轴

```
CREATE TABLE IF NOT EXISTS `finalsale` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `group_id` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `season` varchar(25) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `sale_no` int(5) NOT NULL,
  `auction_date` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `season_time` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `lot_no` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `invoice_no` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `origin` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `tea_type` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `sub_tea_type` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `category` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `mark` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `grade` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `no_of_packages` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `gross_wt` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `net_wt` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `auction_valuation` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `lsp_sp` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `package_type` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `package_no` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `quantity` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `auctioneer` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `auction_price` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `buyer` text CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `area` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `broker_code` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `csv` varchar(255) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL,
  `session` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=41365 ; 
```

基于上面两个表，这个查询的执行时间是巨大的，所以我需要优化下面的查询

```
UPDATE `finalsale`,`postsale` 
SET 
  `finalsale`.`auction_price`=`postsale`.`auction_price`,
  `finalsale`.`csv`=`postsale`.`csv`,
  `finalsale`.`session`=`postsale`.`session` 
WHERE `finalsale`.`lot_no`=`postsale`.`lot_no` 
      AND `finalsale`.`group_id`=`postsale`.`group_id` 
      AND `finalsale`.`group_id`='201217CLGuwahatiJT' 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:03:37.223

通过在表定义中选择正确的数据类型，您将获得显着的性能改进。

有几列似乎只包含数字信息，最好将其存储在某些`int`列中。

此外，某些日期的列`auction_date`应转换为日期数据类型。

还要考虑 varchar 列的长度。大多数时候你不需要那里的 255 个字符。

仔细查看[Mysql Docu for datatypes](http://dev.mysql.com/doc/refman/5.5/en/data-types.html)。

如果之后您遇到性能问题，您可能会考虑在某些列上创建索引。但我强烈建议您在重新设计表定义*后*考虑这一点！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:04:11.107

假设您不可能改进架构（正如 OP 评论中提到的那样......臃肿），您可能会通过在每个上添加索引来显着提升**此特定查询**的性能的表。`lot_no``group_id`

由于您使用的是 InnoDB，因此您可能会考虑使用外键约束（这也包括索引），尽管它取决于我不知道的表的语义和生命周期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:54:07.623

添加以下索引：

单列：

```
finalsale: (`group_id`) 
```

多栏：

```
postsale: (`group_id, lot_no`) 
```

这些索引允许 MySQL 首先通过将 WHERE 子句中的常量应用于 finalsale 表来限制结果集，然后使用最小的结果集执行与 postale 表的连接，充分利用索引。

# emacs - 如何在 Emacs 中重新绑定 ctrl ret？

> ID：10316102
> 
> 赞同：2
> 
> 时间：2012-04-25T12:54:10.370
> 
> 标签：emacs

我似乎无法在 Emacs 中重新绑定 ctrl-ret。我广泛搜索了谷歌，但在少数情况下，有一些如何重新绑定它的例子，那个例子不起作用。我想取消当前绑定，并用新绑定替换它。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T13:01:11.317

> 我广泛搜索了谷歌，但在少数情况下，有一些如何重新绑定它的例子，那个例子不起作用。

你试过什么没用？这适用于我在 Windows 7 上的 Emacs 24 中：

```
(global-set-key [(control return)] 'foobar)

```

**更新**： cua-mode uses `define-key`，试试这个：

```
(define-key cua-global-keymap cua-rectangle-mark-key 'foobar)

```

# c++ - 在链表反转中更改一行会导致错误

> ID：10316107
> 
> 赞同：2
> 
> 时间：2012-04-25T12:54:28.727
> 
> 标签：c++, algorithm, data-structures, linked-list

这个问题可能是周围最受欢迎的问题之一，在寻找解决方案时，我发现了很多，但下面的代码最适合我。

它实际上所做的是创建另一个列表并遍历旧列表并将元素始终添加到新列表的**头部**。

```
Node *reverseList(Node *oldList)
{
    Node* newList=NULL;

    while(oldList!=NULL)
    {
        Node *temp=oldList;
        oldList=oldList->next;

        temp->next=newList;
        newList=temp;  
    }
    return newList;
} 
```

然而，当我决定重新实现这个想法而不看这段代码时，我改变了位置`oldList=oldList->next;`并将其放在`newList=temp.`

我的问题是它真的有区别吗？我无法理解原因，因为毕竟您是在遍历 oldList。为什么需要在***temp**声明之后**立即完成？**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:58:16.013

做完之后

```
Node *temp = oldList; 
```

两个指针都指向同一个地方。自从

```
temp->next = newList; 
```

将覆盖 oldList 的 next 指针（因为它在这个阶段指向与 temp 相同的东西），您需要先从它的 next 指针更新 oldList。**

# c# - 发布时的 TransformXml Web.config

> ID：10316108
> 
> 赞同：3
> 
> 时间：2012-04-25T12:54:29.017
> 
> 标签：c#, asp.net, web-config

我正在尝试使用 TransformXml 任务来一次性转换所有配置，而不管在 Visual Studio 中选择的构建配置如何。我可以通过编辑 .csproj 文件来完成它，这就是它。

```
 <UsingTask TaskName="TransformXml" AssemblyFile="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.Tasks.dll"/>
<Target Name="TransformWebConfig"  AfterTargets="AfterPublish">
    <TransformXml Source="$(SolutionDir)WCFServices\Web.config" 
              Transform="$(SolutionDir)WCFServices\Web.Release.config" 
              Destination="$(OutDir)WebRelease.config" 
              StackTrace="true" />
</Target> 
```

这里的问题是，当我进行发布时，转换后的配置文件被放置在输出目录中，但这发生在删除操作之前。我需要在删除操作后转换配置。

请指教？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:59:50.943

当心 MSBuild 和 VSBuild 确实不同。[Afterpublish 非常有限](https://stackoverflow.com/a/1830650/57883)

[尝试让 msbuild 保存发出的 sln](https://stackoverflow.com/questions/8404114/how-make-msbuild-build-custom-target-specified-in-csproj-building-sln) Also [here](https://stackoverflow.com/questions/5556168/msbuild-script-utilizing-solution-information)。

您是否确认文件在预期的时间被转换？在您的 transformxml 调用之前添加一个`<message importance="high" text="Doing Custom Transform" />`，然后在此调用之后添加另一条具有不同文本的消息`Finished Custom Transform`。 [这篇文章](https://stackoverflow.com/a/9059685/57883)直接表达了你想做涉及专业出版目标的事情的愿望。

一般msbuild调试信息：

希望这种行为依赖于 msbuild 而不是 VSBuild，因为这两个构建过程不同。如果你很幸运并且这遵循与 MSBuild 相同的行为将遵循 msbuild 调试过程：

与 msbuild 中的任何神奇行为一样，在您的`CSProj`文件中查找任何`import target=`代码并找到这些文件。遵循这些将引导您进入做出任何决定的部分。

您还可以将 VS 的调试器附加到您的构建过程中 - [http://blogs.msdn.com/b/visualstudio/archive/2010/07/06/debugging-msbuild-script-with-visual-studio.aspx](http://blogs.msdn.com/b/visualstudio/archive/2010/07/06/debugging-msbuild-script-with-visual-studio.aspx) + [http:// /blogs.msdn.com/b/visualstudio/archive/2010/07/09/debugging-msbuild-script-with-visual-studio-2.aspx](http://blogs.msdn.com/b/visualstudio/archive/2010/07/09/debugging-msbuild-script-with-visual-studio-2.aspx)

[确定构建顺序](http://msdn.microsoft.com/en-us/library/ee216359.aspx)

还可以暂时提高构建详细程度[http://blogs.msdn.com/b/msbuild/archive/2005/09/29/475157.aspx](http://blogs.msdn.com/b/msbuild/archive/2005/09/29/475157.aspx)

# java - 修改 Sonar 中的规则

> ID：10316109
> 
> 赞同：3
> 
> 时间：2012-04-25T12:54:30.810
> 
> 标签：java, sonarqube

我正在使用声纳列出代码中的违规行为。虽然很多违规行为是合法的，但它显示的一些违规行为有点牵强。

例如，我希望 Sonar 排除 logger 语句和带注释的 JAXB 类中的违规行为。由于这些类广泛分布在项目中的多个包中，因此我无法排除任何特定包。

有没有合适的方法来解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:02:44.717

您可以使用[关闭违规插件](http://docs.codehaus.org/display/SONAR/Switch+Off+Violations+Plugin)来精确控制不应报告的违规行为。查看文档以获取更多信息。

正如@oers 所说，最好将您的 JAXB 类分组到特定的包中，以使用“sonar.excludes”属性将它们全部排除。

# ajax - jQuery $.ajax 静默失败，没有错误消息，服务器响应 200 OK

> ID：10316111
> 
> 赞同：5
> 
> 时间：2012-04-25T12:54:38.300
> 
> 标签：ajax, json, jquery

我正准备解决这个问题。我正在使用非常简单的 jQuery ajax 调用从数据库中获取值并使用这些值填充一些选择元素，所有这些都以 JSON 形式返回。它在大多数浏览器上对我来说都可以无缝运行，但是客户报告说他们和他们的客户都没有看到结果。

我一路添加了一些 Console.log() 命令以确保代码正在执行，并且确实如此。有时，对相关 URL 的 ajax GET 有效，其他时候仍然返回 200 OK，但代码根本不会进一步执行，并且错误回调中不会显示任何 ajax 错误消息。

这是我正在使用的代码，有人可以发现可能导致某些浏览器阻塞的明显内容吗？如果是这样，如果您能指出，我将不胜感激：

```
 var $j = jQuery.noConflict(true);
        $j(document).ready(function(){
            //console.log("jQuery has loaded");
            //console.log("attempting to load country list via AJAX call now");
            $j.ajax({
                url: 'http://www.topplaces.co.za/templates/seb_one/positions/search_establishments_filter/search/db.php?q=countries&rand='+Math.random(),
                success: function(data){
                    //console.log("Successfully got country list, going to populate the dropdown now");
                    if(data.length){
                        $j("#country").children("option:not(:first)").remove();
                        $j("#country").attr("disabled", false);
                        $j.each(data, function(resultIndex, result){
                            var o = new Option();
                            $j(o).html(result.country).val(result.country);
                            $j("#country").append(o);
                        })
                        //console.log("Country list should be populated now?");
                    }
                },
                error: function (xhr, ajaxOptions, thrownError){
                    //console.log(xhr.responseText);
                    console.log(thrownError);   
                },
                dataType: 'json',
                cache: false
            })

            $j("#country").live('change', function(){
                var id = $j(this).val();
                if(id == ""){
                    $j("#province").attr("disabled", "disabled");
                    $j("#town").attr("disabled", "disabled");
                    return false;
                }
                $j.ajax({
                    url: 'http://www.topplaces.co.za/templates/seb_one/positions/search_establishments_filter/search/db.php?q=provinces&c='+id+'&rand='+Math.random(),
                    success: function(data){
                    if(data.length){
                        $j("#province").children("option:not(:first)").remove();
                        $j("#province").attr("disabled", false);
                        $j.each(data, function(resultIndex, result){
                            var o = new Option();
                            $j(o).html(result.province).val(result.province);
                            $j("#province").append(o);
                        })
                    }
                },
                dataType: 'json',
                cache: false
                })
            });

            $j("#province").live('change', function(){
                var id = $j(this).val();
                if(id == ""){
                    $j("#town").attr("disabled", "disabled");
                    return false;
                }
                $j.ajax({
                    url: 'http://www.topplaces.co.za/templates/seb_one/positions/search_establishments_filter/search/db.php?q=towns&p='+id+'&rand='+Math.random(),
                    success: function(data){
                    if(data.length){
                        $j("#town").children("option:not(:first)").remove();
                        $j("#town").attr("disabled", false);
                        $j.each(data, function(resultIndex, result){
                            var o = new Option();
                            $j(o).html(result.town).val(result.town);
                            $j("#town").append(o);
                        })
                    }
                },
                dataType: 'json',
                cache: false
                })
            });

        }) 
```

我已经注释掉了 Consol.log 命令，因为客户端在 IE 上收到错误消息，因为没有控制台。

**编辑：我没有提到这是一个相同的域请求，因此遵守同源策略**

完整的站点在这里：[http](http://www.topplaces.co.za/) ://www.topplaces.co.za/ 右侧是一个动态选择组，它以国家开头并启动 AJAX 调用，直到选择了一个省。这个问题，很多人说国家对他们来说没有负担......

亲切的问候，西蒙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T13:04:35.993

检查你的服务器应用程序是否总是返回有效的 JSON 对象，否则它不会被接受，因为你设置了`dataType: 'json'`. 在这种情况下，`error`将执行 function 而不是`success`.

删除`dataType`参数，看看会发生什么，尝试解析传入的数据`$.parseJSON()`- 如果 JSON 无效，它将引发异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T13:36:47.393

我尝试了您的网站，但没有加载任何省份。Json 是空的。我尝试直接访问 php，它也返回空。你检查你的脚本了吗？

URL 称为 [http://www.topplaces.co.za/templates/seb_one/positions/search_establishments_filter/search/db.php?q=provinces&c=Zambia&rand=0.12686952343210578&_=1335360594228](http://www.topplaces.co.za/templates/seb_one/positions/search_establishments_filter/search/db.php?q=provinces&c=Zambia&rand=0.12686952343210578&_=1335360594228)

这是参数见：

```
q:provinces
c:Zambia
rand:0.12686952343210578
_:1335360594228 
```

json结果：[]

这真的是随机的，所以我敢打赌这是 php 脚本没有返回 json。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:17:05.950

我还遇到了从 ajax 调用返回的 json 的浏览器问题。问题是，与 IE 相比，我必须在 Firefox 中查看返回数据的不同部分。对于 Firefox，`data.text`我`undefined`不得不使用它`data.documentElement.firstChild`来查找 json：

```
var list = typeof data.text === 'undefined' ? jQuery.parseJSON(jQuery(data.documentElement.firstChild).text()) : jQuery.parseJSON(data.text); 
```

# xtext - 使用自定义终端规则的 Xtext 交叉引用

> ID：10316112
> 
> 赞同：3
> 
> 时间：2012-04-25T12:54:40.903
> 
> 标签：xtext

我正在尝试让交叉引用在我的 DSL 中工作。这是语法的精简版本（标准示例 DSL 的修改版本）：

```
grammar org.xtext.example.mydsl.MyDsl with org.eclipse.xtext.common.Terminals

generate myDsl "http://www.xtext.org/example/mydsl/MyDsl"

Releases:
    releases+=Release*
;

terminal VERSION    : ('0'..'9')+'.'('0'..'9')+('.'('0'..'9'|'x')+)?;

Release:
    'release' version = VERSION ('extends' parent = [Release|VERSION])?
    ; 
```

由于我没有使用标准`name = ID`模式，因此我关注了这篇关于如何创建自己的[博客文章](http://christiandietrich.wordpress.com/2011/07/16/iqualifiednameproviders-in-xtext-2-0/)`IQualifiedNameProvider`：

```
public class MyDslQNP extends DefaultDeclarativeQualifiedNameProvider {
    QualifiedName qualifiedName(Release e) {
        Package p = (Package) e.eContainer();
        return QualifiedName.create(p.getName(), e.getVersion());
    }
} 
```

从关于 SO 的另一个答案中，我收集到我应该实现自己的范围提供程序：

```
public class MyDslScopeProvider extends AbstractDeclarativeScopeProvider {
    IScope scope_Release_parent(Release release, EReference ref) {
        Releases releases = (Releases) release.eContainer();
        return Scopes.scopeFor(releases.getReleases());
    }
} 
```

我还在运行时模块中绑定了这些：

```
public class MyDslRuntimeModule extends
        org.xtext.example.mydsl.AbstractMyDslRuntimeModule {
    @Override
    public Class<? extends IQualifiedNameProvider> bindIQualifiedNameProvider() {
        return MyDslQNP.class;
    }

    @Override
    public Class<? extends IScopeProvider> bindIScopeProvider() {
        return MyDslScopeProvider.class;
    }

} 
```

运行生成的编辑器时，我创建了一个如下所示的文件：

```
release 1.2.3
release 1.2.2 extends 1.2.3 
```

问题是（1）编辑器不会自动完成“扩展”子句，（2）编辑器显示错误消息`Couldn't resolve reference to Release '1.2.3'`。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:03:00.923

您的 QualifiedNameProvider 似乎创建了虚假的限定名称，例如版本 1.2.2 的名称将有两个段 [release][1.2.2]，其中查找将搜索 [release][1][2][2]。

请尝试创建一个适当的限定名称，如下所示：

```
QualifiedName qualifiedName(Release e) {
    Package p = (Package) e.eContainer();
    QualifiedName release = getConverter().toQualifiedName(e.getVersion());
    return QualifiedName.create(pack.getName()).append(releaseSuffix);        
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T18:53:52.950

Scopes.scopeFor 是一个静态方法，因此不使用配置的 IQualifiedNameProvider。您需要使用 Scopes.scopeFor(Iterable, Function, IScope) 显式传递它

但是在您的情况下，您根本不需要在范围提供程序中进行特殊处理，因为具有限定名称提供程序的本地元素会自动放在范围内。

# c# - 是否可以在 .net 框架中执行 javascript 代码？

> ID：10316114
> 
> 赞同：8
> 
> 时间：2012-04-25T12:54:40.977
> 
> 标签：c#, javascript, .net

我希望能够在运行 .net 环境的服务器端执行 JavaScript。
那么怎么可能呢？主要是我需要文本处理函数，我将输入一个字符串并从 JavaScript 代码返回一个字符串。
不需要窗口交互。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-25T12:57:00.203

是的，您可以使用几个 JS 引擎。[Jurassic](https://github.com/paulbartrum/jurassic)、[Jint](https://github.com/sebastienros/jint)和[IronJS](https://github.com/fholm/IronJS)是基于 .NET 的，但您也可以与其他接口连接，例如 Chrome 浏览器中的 V8 或 IE 中的 ActiveScript。

**编辑：**五年后，.NET 原生的 JS 引擎有些落后（尚不支持 ES6，IronJS 似乎已被废弃），但我们现在也有开源的[ChakraCore](https://github.com/Microsoft/ChakraCore)，它在 .NET 中集成和使用并不难使用现成的包装器之一。

此外，[JavaScriptEngineSwitcher](https://github.com/Taritsyn/JavaScriptEngineSwitcher)允许通过通用接口从 .NET 代码中使用几乎任何现有的 JS 引擎，因此切换引擎不需要更改代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T13:00:26.387

您可以编写一个[JScript.Net](http://msdn.microsoft.com/en-us/library/72bd815a%28v=vs.71%29.aspx)文件并将其编译成一个程序集[`jsc`](http://msdn.microsoft.com/en-us/library/7435xtz6%28v=vs.71%29.aspx)，然后像使用其他程序集一样使用该程序集。

例子：

```
package Your.Desired.Package.Name {
    Class SomeClassName {
        public static function doSomething(foo) }
            var bar;

            // Fairly normal JavaScript code here

            if (foo.match(/sometest/)) {
                // Do something
            }
            else {
                // Do something else
            }
        }
    }
} 
```

除了`package`and`class`结构，JScript.Net 中的代码本质上是 JavaScript。`eval`如果你想成为邪恶的，你甚至有。:-)

然后你把它编译成这样的程序集：

```
jsc /target:library TheFileName.js 
```

...它生产和组装在`TheFileName.dll`.

# javascript - 使用javascript单击任何按钮时如何为标签设置焦点

> ID：10316119
> 
> 赞同：0
> 
> 时间：2012-04-25T12:55:11.757
> 
> 标签：javascript, asp.net

我的aspx 页面中有一个asp:Textbox 和一个asp:label 控件。我想在使用 javascript 单击按钮时为标签设置焦点。谁能告诉我该怎么做？

非常感谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T12:57:10.303

您需要通过 id 或调用[**focus()**](https://developer.mozilla.org/en/DOM/element.focus)的类来访问元素：

```
document.getElementById('myTextBox').focus(); 
```

正如 Pointy*指出*的那样：当您的意思是通过单击标签来选择文本框时，您只需将标签上的[**for**](https://developer.mozilla.org/en/HTML/Element/label)属性设置为文本框的 ID。

```
<label for="myTextBox">Label Text</label> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:59:38.490

该`for`属性为您提供开箱即用的功能

```
<label for="{the id you want}"> </label> 
```

[**MDN**](https://developer.mozilla.org/en/HTML/Element/label)

因为它是 asp.net 应用程序，您需要使用`ClientID`：

```
<label for='<%= myTextBox.ClientID %>'> </label> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:59:12.970

```
use `.focus()` it will do the focus part 
```

# java - 如何将指纹添加到密钥库

> ID：10316127
> 
> 赞同：2
> 
> 时间：2012-04-25T12:55:39.673
> 
> 标签：java, ssl, ssl-certificate, keystore

写入 SSL 套接字时出现以下异常

```
javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path validation failed: java.security.cert.CertPathValidatorException: Path does not chain with any of the trust anchors 
```

目标服务器的证书似乎不受信任。我在 Windows 7 机器、jdk7 和 tomcat7 上测试了我的实现，没有问题。使用 openJDK 6 和 tomcat7 在 ubuntu 10 LTS 上引发异常。我得到了套接字目标服务器的 sha1 和 md5 指纹。我尝试流式传输到的服务器的证书在我的 ubuntu 服务器上不是受信任的，这对吗？我可以指纹到 tomcats 密钥库吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T13:11:36.943

您需要添加到信任库的不是指纹，而是实际的证书。

您可以添加服务器证书本身或在链中添加 CA 证书之一（如果您希望信任来自该 CA 的所有证书，而不仅仅是该特定服务器）。

要找出证书是什么，您可以使用 OpenSSL：

```
openssl s_client -showcerts -connect your.host.name:443 
```

（将主机名和 443 替换为您正在使用的实际端口。）

中间的块`--BEGIN/END CERT...--`是 PEM 格式的证书。`openssl x509 -text -noout`您可以使用（并在那里粘贴每个块）检查它们的内容。

将要导入的证书保存到纯文本文件中（例如`certificate.pem`）。您应该只导入您信任的证书。这里有一定的信仰飞跃。（例如，您可能想连接浏览器并检查密钥材料是否匹配。）

要导入您的信任库，请使用：

```
keytool -importcert -keystore truststore.jks -file certificate.pem 
```

（您可能需要指定别名 wit `-alias some_name_you_choose`。）

如果您希望这影响您的默认信任库，请替换`truststore.jks`为 Java 主目录中的路径`lib/security/cacerts`（默认密码应为`changeit`）。

* * *

由于目标服务器似乎来自一个知名的 CA（并且它适用于某些版本的 JRE），最简单的修复当然是`cacerts`手动更新您的文件，从适用的 JRE 获取副本。毕竟，正如[JSSE 参考指南所说](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html#Customization)：

> 重要说明：JDK 在 /lib/security/cacerts 文件中附带了数量有限的受信任根证书。如 keytool 中所述，如果您将此文件用作信任库，则您有责任维护（即添加/删除）此文件中包含的证书。
> 
> 根据您联系的服务器的证书配置，您可能需要添加额外的根证书。从适当的供应商处获取所需的特定根证书。

* * *

事实证明，这肯定是[证书链顺序](https://webmasters.stackexchange.com/a/28074/11628)的问题（在本网站上不正确），如[Qualys SSL Labs tester](https://www.ssllabs.com/ssltest/)所示。

# matlab - MATLAB：复制向量'n'次

> ID：10316128
> 
> 赞同：19
> 
> 时间：2012-04-25T12:55:44.050
> 
> 标签：matlab, vector

我有一个向量，例如

```
vector = [1 2 3] 
```

我想*在自身内*复制它n 次，即如果 n = 3，它最终会变成：

```
vector = [1 2 3 1 2 3 1 2 3] 
```

对于任何 n 值，我怎样才能实现这一点？我知道我可以做到以下几点：

```
newvector = vector;
for i = 1 : n-1
    newvector = [newvector vector];
end 
```

不过这似乎有点麻烦。还有更有效的方法吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-25T12:59:34.417

尝试

```
repmat([1 2 3],1,3) 
```

我会让你检查文档`repmat`。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-26T05:18:51.550

**这是一种比`repmat`或`reshape`一个数量级更快的方法**

做这些事情的最好方法之一是使用[托尼的技巧。](http://www.ee.columbia.edu/~marios/matlab/Matlab%20Tricks.pdf)通常发现 Repmat 和 Reshape 比 Tony 的技巧慢，因为它直接使用 Matlabs 固有索引。回答你的问题，

可以说，您想平铺行向量`r=[1 2 3]` `N`时间，例如`r=[1 2 3 1 2 3 1 2 3...]`，

```
c=r'
cc=c(:,ones(N,1));
r_tiled = cc(:)'; 
```

对于大型's `reshape`，此方法可显着节省时间。`repmat``N`

编辑：回复@Li-aung Yip 的疑问

`repmat`我进行了一个小的 Matlab 测试来检查和之间的速度差异`tony's trick`。使用下面提到的代码，我计算了从基向量构造相同平铺向量的时间`A=[1:N]`。结果表明，是的，Tony's-Trick 的速度快了一个数量级，尤其是对于较大的 N。欢迎大家自己尝试。如果必须在循环中执行这样的操作，那么这么大的时间差可能很关键。这是我使用的小脚本；

```
N= 10 ;% ASLO Try for values N= 10, 100, 1000, 10000

% time for tony_trick
tic;
A=(1:N)';
B=A(:,ones(N,1));
C=B(:)';
t_tony=toc;
clearvars -except t_tony N

% time for repmat
tic;
A=(1:N);
B=repmat(A,1,N);
t_repmat=toc;
clearvars -except t_tony t_repmat N 
```

下面给出了两种方法的时间（以秒为单位）；

*   N=10，time_repmat = 8e-5，time_tony = 3e-5
*   N=100，time_repmat = 2.9e-4，time_tony = 6e-5
*   N=1000，time_repmat = 0.0302，time_tony = 0.0058
*   N=10000，time_repmat = 2.9199，time_tony = 0.5292

我的 RAM 不允许我超过 N=10000。我敢肯定，对于 N=100000，这两种方法之间的时间差异会更加显着。我知道，对于不同的机器，这些时间可能会有所不同，但是时间数量级的相对差异会保持不变。此外，我知道，平均时间可能是一个更好的指标，但我只是想显示两种方法之间时间消耗的数量级差异。我的机器/操作系统详细信息如下：

*相关机器/操作系统/Matlab 详细信息*：Athlon i686 Arch，Ubuntu 11.04 32 位，3gb ram，Matlab 2011b

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-26T18:06:05.677

根据 Abhinav 的回答和一些测试，我编写了一个总是比 repmat() 快的函数！

它使用相同的参数，除了第一个参数必须是向量而不是矩阵。

```
function vec = repvec( vec, rows, cols )
%REPVEC Replicates a vector.
%   Replicates a vector rows times in dim1 and cols times in dim2.
%   Auto optimization included.
%   Faster than repmat()!!!
%   
%   Copyright 2012 by Marcel Schnirring

    if ~isscalar(rows) || ~isscalar(cols)
        error('Rows and cols must be scaler')
    end

    if rows == 1 && cols == 1
        return  % no modification needed
    end

    % check parameters
    if size(vec,1) ~= 1 && size(vec,2) ~= 1
        error('First parameter must be a vector but is a matrix or array')
    end

    % check type of vector (row/column vector)
    if size(vec,1) == 1
        % set flag
        isrowvec = 1;
        % swap rows and cols
        tmp = rows;
        rows = cols;
        cols = tmp;
    else
        % set flag
        isrowvec = 0;
    end

    % optimize code -> choose version
    if rows == 1
        version = 2;
    else
        version = 1;
    end

    % run replication
    if version == 1
        if isrowvec
            % transform vector
            vec = vec';
        end

        % replicate rows
        if rows > 1
            cc = vec(:,ones(1,rows));
            vec = cc(:);
            %indices = 1:length(vec);
            %c = indices';
            %cc = c(:,ones(rows,1));
            %indices = cc(:);
            %vec = vec(indices);
        end

        % replicate columns
        if cols > 1
            %vec = vec(:,ones(1,cols));
            indices = (1:length(vec))';
            indices = indices(:,ones(1,cols));
            vec = vec(indices);
        end

        if isrowvec
            % transform vector back
            vec = vec';
        end
    elseif version == 2
        % calculate indices
        indices = (1:length(vec))';

        % replicate rows
        if rows > 1
            c = indices(:,ones(rows,1));
            indices = c(:);
        end

        % replicate columns
        if cols > 1
            indices = indices(:,ones(1,cols));
        end

        % transform index when row vector
        if isrowvec
            indices = indices';
        end

        % get vector based on indices
        vec = vec(indices);
    end
end 
```

随意使用您的所有数据测试该功能并给我反馈。当你发现一些可以改进的地方时，请告诉我。

# java - 无法调用 com.android.settings.ChooseLockPassword 活动

> ID：10316130
> 
> 赞同：0
> 
> 时间：2012-04-25T12:55:53.240
> 
> 标签：java, android

我试图`ChooseLockPassword`从我自己的应用程序中调用活动，但发生异常。

***Java 代码：***

```
Intent intent = new Intent(Intent.ACTION_RUN);
intent.setComponent(new ComponentName("com.android.settings", "com.android.settings.ChooseLockPassword"));
startActivity(intent); 
```

**安卓清单**

```
<!-- Lock Screen. -->
<activity android:name="ChooseLockPassword"
          android:exported="true">

<action android:name="android.intent.action.RUN" />

</activity> 
```

***例外***

```
04-25 17:54:48.599: E/AndroidRuntime(6739): FATAL EXCEPTION: main
04-25 17:54:48.599: E/AndroidRuntime(6739): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.test.SystemPIN/com.test.SystemPIN.SystemPINTestActivity}: java.lang.SecurityException: Permission Denial: starting Intent { act=android.intent.action.RUN cmp=com.android.settings/.ChooseLockPassword } from ProcessRecord{40652e98 6739:com.test.SystemPIN/10033} (pid=6739, uid=10033) requires null
04-25 17:54:48.599: E/AndroidRuntime(6739):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-25 17:54:48.599: E/AndroidRuntime(6739):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-25 17:54:48.599: E/AndroidRuntime(6739):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-25 17:54:48.599: E/AndroidRuntime(6739):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-25 17:54:48.599: E/AndroidRuntime(6739):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 17:54:48.599: E/AndroidRuntime(6739):     at android.os.Looper.loop(Looper.java:123)
04-25 17:54:48.599: E/AndroidRuntime(6739):     at android.app.ActivityThread.main(ActivityThread.java:3683)

<snip>

04-25 17:54:48.599: E/AndroidRuntime(6739): Caused by: java.lang.SecurityException: Permission Denial: starting Intent { act=android.intent.action.RUN cmp=com.android.settings/.ChooseLockPassword } from ProcessRecord{40652e98 6739:com.test.SystemPIN/10033} (pid=6739, uid=10033) requires null
04-25 17:54:48.599: E/AndroidRuntime(6739):     at android.os.Parcel.readException(Parcel.java:1322)
04-25 17:54:48.599: E/AndroidRuntime(6739):     at android.os.Parcel.readException(Parcel.java:1276)
04-25 17:54:48.599: E/AndroidRuntime(6739):     at android.app.ActivityManagerProxy.startActivity(ActivityManagerNative.java:1351)

<snip> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:11:44.577

You're getting a permission denied exception, which means you need more permissions. That the permission listed as required is `null`, suggests that you might not be allowed to call that activity at all.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:15:31.317

我找到了解决方案并想与您分享。

如果您像我一样拥有 android 资源，您可以在位于***packages\apps\settings\scr\com\android\settings\AndroidManifest.xml***的设置清单文件中进行一些修改，只需修改

```
<activity android:name="ChooseLockPassword" android:exported="false"
            android:windowSoftInputMode="stateVisible|adjustResize"/> 
```

行并设置 android:exported="true" 而不是 "false" 在您可以重新编译源并使用以下行调用该对话框之后

```
Intent intent = new Intent(Intent.ACTION_RUN);
intent.setComponent(new ComponentName("com.android.settings", "com.android.settings.ChooseLockPassword"));
startActivity(intent); 
```

# django - 使用远程存储配置 django-compressor (django-storage - amazon s3)

> ID：10316131
> 
> 赞同：6
> 
> 时间：2012-04-25T12:55:54.187
> 
> 标签：django, django-storage

# 我的场景

我正在使用 django-storage 通过 Amazon S3 提供文件。这意味着当我执行 ./manage.py collectstatic 时，文件将保存在我在亚马逊的存储桶上，而不是本地文件系统上。

要压缩我做的文件：“./manage.py compress”这给出了这个错误：

错误：渲染时出错：[Errno 2] No such file or directory: u'/home/user/project/static/less/bootstrap.less'

由于该文件不在我的本地文件系统上。

“由于 Django Compressor 处理文件的方式，它要求要处理的文件（在 {% compress %} 块中）**在本地文件系统缓存中可用。** ” [http://django_compressor.readthedocs.org/en/最新/远程存储/](http://django_compressor.readthedocs.org/en/latest/remote-storages/)

## 问题

如何使 django-compress 与 django-storage (amazon s3) 一起工作？

## 到目前为止我尝试过的事情

在本地和 S3 上制作 collectstatic 保存文件。由于在 django-compressor 页面的文档中提到了它，应该有一些好的方法来做到这一点。如何？

# 配置

```
STATIC_URL = 'http://mybucket.s3-website-eu-west-1.amazonaws.com/'
STATIC_ROOT = os.path.join(PROJECT_DIR,"static/")
STATICFILES_FINDERS = (
     'django.contrib.staticfiles.finders.FileSystemFinder',
     'django.contrib.staticfiles.finders.AppDirectoriesFinder',
     'compressor.finders.CompressorFinder',
)
STATICFILES_STORAGE = DEFAULT_FILE_STORAGE = 'index.storage.CachedS3BotoStorage' #defined as it is in the documentation

AWS_ACCESS_KEY_ID = "xxx"
AWS_SECRET_ACCESS_KEY = "xxx"
AWS_STORAGE_BUCKET_NAME = "xxxx"

COMPRESS_URL = STATIC_URL
COMPRESS_OFFLINE = True

COMPRESS_PRECOMPILERS = (
    ('text/less', 'lessc {infile} {outfile}'),
) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T23:20:06.867

我认为您缺少的唯一设置是`COMPRESS_ROOT`.

我的 django-compressor 与 S3 配合得非常好。这是我的配置：

```
DEFAULT_FILE_STORAGE = 'g2k_utils.s3storage.S3BotoStorage'
STATICFILES_STORAGE = DEFAULT_FILE_STORAGE
COMPRESS_ROOT = '/home/user/website/static/' # Where my SCSS, JS files are stored
COMPRESS_STORAGE = DEFAULT_FILE_STORAGE 
COMPRESS_OFFLINE = True 
```

# git - 大量静态网站的版本控制

> ID：10316134
> 
> 赞同：0
> 
> 时间：2012-04-25T12:56:03.770
> 
> 标签：git, svn, version-control, github, process

我们是一个由 5-6 人组成的小团队，他们经常访问我们的网站并进行定期维护和更新。我们处理 300 多个网站。

我们刚刚添加了一名新的团队成员，他将于明天开始工作，我们希望在事情开始失控之前更新我们的流程并开始使用版本控制。

现在，我们只是在现场工作并通过 FTP 进行更改。因此，如果两个人打开同一个文件，一个人可能会被覆盖，结果可能会很糟糕。这只是一场等待发生的灾难，所以我想在它变得更糟之前解决它。

* * *

理想情况下，我们希望使用某种版本控制系统，我们可以：

*   不用担心覆盖某人的更改
*   如果出现问题，能够转换回某个版本
*   团队成员能够描述他们正在做的改变
*   有一个测试场所，我们可以在其中提交更改并在另一台服务器上进行测试，一旦看起来不错，我们就可以将其发布到实时网站。

我查看了**github**和**Beanstalk**，我有几个问题：

*   如果我们有 300 多个网站，是否可以将所有这些网站放在**一个**存储库中？还是每个人都需要一个单独的？不知道这将如何工作。
*   你会推荐哪个版本控制系统？

* * *

我真的很想了解其他公司正在使用什么以及当您有几个团队成员在同一个站点上工作时整个过程是如何工作的。

这些网站是静态信息网站，不超过30页，所以它们是小型网站，只是添加/编辑内容或添加一些按钮，这些变化并没有太疯狂，只是基本的变化。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:38:02.467

开始使用版本控制系统来管理您的网站是一个明智的决定。

大多数版本控制工具都可以满足您的要求：获得更好的合作、跟踪历史记录等。

> 如果我们有 300 多个网站，是否可以将所有这些网站放在一个存储库中？还是每个人都需要一个单独的？不知道这将如何工作。

这取决于。如果这 300 多个网站是相关的（例如，某些部分在网站之间共享），建议将它们放在一个存储库下。否则，任何一个都可以。

> 你会推荐哪个版本控制系统？

由于这些是小型网站，我建议您使用托管服务。github 是个不错的选择。您也可以考虑使用 SourceAnywhere Hosted。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:18:56.097

我会推荐由 Atlassian 托管的 BitBucket。 [https://bitbucket.org/plans](https://bitbucket.org/plans)

如果你只需要 5 个用户，其实可以免费获得。

所有计划都包括无限数量的私人存储库；无限的磁盘空间，维基等。

但是，如果您的团队曾经扩展，它可能会开始变得有点贵。因为定价是基于用户的。

就你如何组织这一切而言。为每一个都拥有一个单独的存储库可能是个好主意，这样就不会混淆某个网页的代码可能在哪里。

# java - 使用 Object 进行 Java Gson 编码不起作用

> ID：10316137
> 
> 赞同：0
> 
> 时间：2012-04-25T12:56:16.947
> 
> 标签：java, gson

以下代码正在运行

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import com.google.gson.Gson;

class DataObject<T> {

    private int data1 = 100;
    private String data2 = "hello";
DataObject child;
private List<String> list = new ArrayList<String>() {
  {
    add("String 1");
    add("String 2");
    add("String 3");
      }
    };
    private Map<String, DataObject> data=null;

    public DataObject(int i){
        this.data1 = i;
        this.data = new HashMap<String, DataObject>();
    }

    //getter and setter methods

    @Override
    public String toString() {
       return "DataObject [data1=" + data1 + ", data2=" + data2 + ", list="
    + list + "]";
    }
    public Map<String, DataObject> getData() {
        return data;
    }

    public void addData(final String key, DataObject value, Class<T> t) {
        data.put(key, value);
    }
}

public class test {

    /**
 * @param args
 */
public static void main(String[] args) {    
    DataObject obj = new DataObject(12);
    obj.child = new DataObject(25);
    obj.addData("myOtherData", new DataObject(32), DataObject.class);
        Gson gson = new Gson();
        System.out.println(gson.toJson(obj));
    }

} 
```

输出：

```
{"data1":12,"data2":"hello","child":{"data1":25,"data2":"hello","list":["String 1","String 2","String 3"],"data":{}},"list":["String 1","String 2","String 3"],"data":{"myOtherData":{"data1":32,"data2":"hello","list":["String 1","String 2","String 3"],"data":{}}}} 
```

但我实际上需要用通用来完成工作

```
Map<String, Object> data 
```

所以这段代码：

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import com.google.gson.Gson;

class DataObject<T> {

    private int data1 = 100;
    private String data2 = "hello";
DataObject child;
private List<String> list = new ArrayList<String>() {
  {
    add("String 1");
    add("String 2");
    add("String 3");
      }
    };
    private Map<String, Object> data=null;

    public DataObject(int i){
        this.data1 = i;
        this.data = new HashMap<String, Object>();
    }

    //getter and setter methods

    @Override
    public String toString() {
       return "DataObject [data1=" + data1 + ", data2=" + data2 + ", list="
    + list + "]";
    }
    public Map<String, Object> getData() {
        return data;
    }

    public void addData(final String key, Object value, Class<T> t) {
        data.put(key, value);
    }
}

public class test {

    /**
 * @param args
 */
public static void main(String[] args) {    
    DataObject obj = new DataObject(12);
    obj.child = new DataObject(25);
    obj.addData("myOtherData", new DataObject(32), DataObject.class);
        Gson gson = new Gson();
        System.out.println(gson.toJson(obj));
    }

} 
```

这不起作用：输出：

```
{"data1":12,"data2":"hello","child":{"data1":25,"data2":"hello","list":["String 1","String 2","String 3"],"data":{}},"list":["String 1","String 2","String 3"],"data":{"myOtherData":{}}} 
```

缺少 myOtherData 对象，因为 Gson 无法与通用对象一起使用

这就是为什么我开始把类作为 addData 方法的第三个参数，我需要把

```
Map<String, <T>> data; 
```

我不知道如何在地图中声明可配置类型

感谢任何能够完成这项工作的人

* * *

编辑：它几乎是这样工作的

我在线程“main”java.lang.ClassCastException 中收到错误异常：DataObject 无法在 DataObject.addData(test.java:41) 处转换​​为 java.lang.Class

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import com.google.gson.Gson;

class DataObject<T> {

    private int data1 = 100;
    private String data2 = "hello";
DataObject child;
private List<String> list = new ArrayList<String>() {
  {
    add("String 1");
    add("String 2");
    add("String 3");
      }
    };
    private Map<String, Class<T>> data=null;

    public DataObject(int i){
        this.data1 = i;
        this.data = new HashMap<String, Class<T>>();
    }

    //getter and setter methods

    @Override
    public String toString() {
       return "DataObject [data1=" + data1 + ", data2=" + data2 + ", list="
    + list + "]";
    }
    public Map<String, Class<T>> getData() {
        return data;
    }

    public void addData(final String key, Object value, Class<T> t) {
        data.put(key, (Class<T>) value);
    }
}

public class test {

    /**
 * @param args
 */
public static void main(String[] args) {

    DataObject obj = new DataObject(12);
    obj.child = new DataObject(25);
    obj.addData("myOtherData", new DataObject(32), DataObject.class);
        Gson gson = new Gson();
        System.out.println(gson.toJson(obj));
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:07:03.927

编辑：删除 addData() 方法的类参数，不需要它。只需`T`直接键入值并键入`data`with `Map<String, T>`。使用以下命令初始化地图：`this.data = new HashMap<String, T>();`

* * *

这对我有用（我用 T 输入了您的 Map 值并删除了 addData 的不必要的 Class 参数）。但是您的代码实际上可以在没有这些修改的情况下工作。我在我的机器上运行它，我的输出与你标记为“工作”的输出相同。

有点奇怪的是您键入的 DataObject。这很令人困惑，因为您还有一个属于同一类的内部成员（孩子）。我不知道它是否应该是同一类型的`DataObject<T>`。您应该尝试尽可能正确地键入您的泛型。如果您无法这样做，则可能是一些不正确使用泛型的迹象。

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import com.google.gson.Gson;

class DataObject<T> {

    private List<String> list = new ArrayList<String>() {
        {
            add("String 1");
            add("String 2");
            add("String 3");
        }
    };
    private int data1 = 100;
    private String data2 = "hello";
    DataObject child;
    private Map<String, T> data = null;

    public DataObject(int i) {
        this.data1 = i;
        this.data = new HashMap<String, T>();
    }

    // getter and setter methods

    @Override
    public String toString() {
        return "DataObject [data1=" + data1 + ", data2=" + data2 + ", list=" + list + "]";
    }

    public Map<String, T> getData() {
        return data;
    }

    public void addData(final String key, T value) {
        data.put(key, value);
    }
}

public class test {

    /**
     * @param args
     */
    public static void main(String[] args) {
        DataObject obj = new DataObject(12);
        obj.child = new DataObject(25);
        obj.addData("myOtherData", new DataObject(32));
        Gson gson = new Gson();
        System.out.println(gson.toJson(obj));
    }

} 
```

# php - Joomla 会话自动注销，没有内容

> ID：10316138
> 
> 赞同：0
> 
> 时间：2012-04-25T12:56:17.923
> 
> 标签：php, session, joomla

我正在运行一个 Joomla 1.6 站点，我最近将它移到了一个新服务器上。我使用 rsync 移动了站点文件系统，并使用 MySQL 实用程序复制了 MySQL 数据库。以前的服务器运行的是 Ubuntu Server 10.10，而新的服务器是 Ubuntu Server 11.10。一切似乎都正常工作，除了一件事......

在站点配置中，用户的会话设置为 24 小时后过期。在以前的网站上，它一直在正常工作。在这个新网站上，我发现在用户成功登录并使用该网站一段时间后，该用户会在 24 小时之前间歇性（随机？）注销，然后在重新登录该网站时（甚至在后端）该网站是完全空白的。主菜单不存在，也没有内容。但是，注销按钮和主横幅仍然出现。如果用户注销然后重新登录，通常所有内容都会再次出现，并且站点会继续正常运行，直到下次启动会话。

有没有人有这方面的经验？有没有地方可以开始调试以找出会话突然结束的原因？为什么我可以登录网站却仍然看不到任何内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:27:13.730

我有同样的问题。被注销，然后重新登录，什么也看不到。这是非常随机的，并且会连续发生 10 次，或者永远不会发生两周。

这发生在一个非常复杂（大量扩展）的网站上，并且在 J. 1.7 上有一些流量（5000 次点击/天 + 100 次管理员访问/天）

会话管理显然有问题。

为了使站点更快，我们调整了数据库并将会话表移动到内存中，我相信这可能是这里的关键方面。

一旦我们重复发生错误并清除会话表就解决了它（直到第二天），所以我猜它已连接到内存会话表。

如果您的表在内存中，请尝试将其移至磁盘；如果不是，请尝试清空它，看看它是否再次发生，然后发回！祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:45:38.560

更多新闻。经过长时间的调试后，该问题与未正确处理的核心异常有关（与保存具有重复别名的项目有关，即使用相同的标题/别名将第二篇文章保存在同一类别中）。

对我们来说，迁移到 J 2.5.3 来解决这个问题就足够了。

无论如何，作为一般性评论，这种行为可能与某些 Joomla 文件中的错误有关，这应该在您的 error_log 中留下痕迹（否则启用错误日志记录）。

我的客户花了 3 个月的时间来了解他们在做什么并进行描述，因此发现错误可能会加快诊断速度。

# ruby - 安装 gsl 时出现错误（使用 netbeans）

> ID：10316140
> 
> 赞同：2
> 
> 时间：2012-04-25T12:56:33.220
> 
> 标签：ruby, installation, gsl

我尝试为 Ruby 安装 gsl gem，但它不起作用。我有一个 matrix_complex.o 错误。那么有没有为 netbeans 安装 gsl 的解决方案？或者在其他库中是否有函数分位数？任何帮助，将不胜感激。

```
stagiaire@stagiaire-desktop:~$ sudo gem install -v=1.14.7 gsl
Building native extensions.  This could take a while...
ERROR:  Error installing gsl:
ERROR: Failed to build gem native extension.
    /usr/bin/ruby1.8 extconf.rb
checking gsl version... 1.15
checking gsl cflags... -I/usr/include
checking for main() in -lcblas... no
checking gsl libs... -L/usr/lib -lgsl -lgslcblas -lm
checking for round()... no
checking for rngextra/rngextra.h... no
checking for qrngextra/qrngextra.h... no
checking for ool/ool_version.h... no
checking for tensor/tensor.h... no
checking for jacobi.h... no
checking for gsl/gsl_cqp.h... no
checking for gsl/gsl_multimin_fsdf.h... no
checking for gsl_poly_solve_quartic() in -lgsl... no
checking for gsl_eigen_francis() in -lgsl... yes
checking for ndlinear/gsl_multifit_ndlinear.h... no
checking for alf/alf.h... no
checking rb-gsl version...1.14.7
checking ruby version... 1.8.7
checking for graph... no
checking for narray.h... yes
checking for tamu_anova/tamu_anova.h... no
checking for main() in -ltamuanova... no
creating Makefile
make
gcc -I. -I. -I/usr/lib/ruby/1.8/i686-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems    /narray-0.6.0.1/. -I/usr/local/lib/site_ruby/1.8/i686-linux      -D_FILE_OFFSET_BITS=64  -fPIC      -Wall -I../include  -I/usr/include  -c sf_debye.c
gcc -I. -I. -I/usr/lib/ruby/1.8/i686-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems    /narray-0.6.0.1/. -I/usr/local/lib/site_ruby/1.8/i686-linux  -D_FILE_OFFSET_BITS=64  -fPIC  -Wall -I../include  -I/usr/include  -c histogram.c
histogram.c: In function ‘rb_gsl_histogram_fit_exponential’:
histogram.c:1029:24: attention : variable ‘hh’ set but not used [-Wunused-but-set-variable]
histogram.c: In function ‘rb_gsl_histogram_fit_power’:
histogram.c:1079:24: attention : variable ‘hh’ set but not used [-Wunused-but-set-variable]
gcc -I. -I. -I/usr/lib/ruby/1.8/i686-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.1/. -I/usr/local/lib/site_ruby/1.8/i686-linux  -D_FILE_OFFSET_BITS=64  -fPIC  -Wall -I../include  -I/usr/include  -c eigen.c
gcc -I. -I. -I/usr/lib/ruby/1.8/i686-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.1/. -I/usr/local/lib/site_ruby/1.8/i686-linux  -D_FILE_OFFSET_BITS=64  -fPIC  -Wall -I../include  -I/usr/include  -c histogram_oper.c
gcc -I. -I. -I/usr/lib/ruby/1.8/i686-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.1/. -I/usr/local/lib/site_ruby/1.8/i686-linux  -D_FILE_OFFSET_BITS=64  -fPIC  -Wall -I../include  -I/usr/include  -c signal.c
signal.c: In function ‘rb_gsl_fft_conv_corr’:
signal.c:108:28: attention : variable ‘stride3’ set but not used [-Wunused-but-set-variable]
gcc -I. -I. -I/usr/lib/ruby/1.8/i686-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.1/. -I/usr/local/lib/site_ruby/1.8/i686-linux  -D_FILE_OFFSET_BITS=64  -fPIC  -Wall -I../include  -I/usr/include  -c graph.c
graph.c:974:13: attention : ‘gsl_graph_set_command’ defined but not used [-Wunused-function]
gcc -I. -I. -I/usr/lib/ruby/1.8/i686-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.1/. -I/usr/local/lib/site_ruby/1.8/i686-linux  -D_FILE_OFFSET_BITS=64  -fPIC  -Wall -I../include  -I/usr/include  -c sf_zeta.c
gcc -I. -I. -I/usr/lib/ruby/1.8/i686-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.1/. -I/usr/local/lib/site_ruby/1.8/i686-linux  -D_FILE_OFFSET_BITS=64  -fPIC  -Wall -I../include  -I/usr/include  -c sf_elljac.c
sf_elljac.c: In function ‘rb_gsl_sf_elljac_e’:
sf_elljac.c:18:7: attention : variable ‘status’ set but not used [-Wunused-but-set-variable]
gcc -I. -I. -I/usr/lib/ruby/1.8/i686-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.1/. -I/usr/local/lib/site_ruby/1.8/i686-linux  -D_FILE_OFFSET_BITS=64  -fPIC  -Wall -I../include  -I/usr/include  -c ieee.c
gcc -I. -I. -I/usr/lib/ruby/1.8/i686-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.1/. -I/usr/local/lib/site_ruby/1.8/i686-linux  -D_FILE_OFFSET_BITS=64  -fPIC  -Wall -I../include  -I/usr/include  -c array_complex.c
array_complex.c: In function ‘rb_gsl_complex_arithmetics5’:
array_complex.c:34:9: attention : variable ‘func3’ set but not used [-Wunused-but-set-variable]
array_complex.c:33:9: attention : variable ‘func2’ set but not used [-Wunused-but-set-variable]
gcc -I. -I. -I/usr/lib/ruby/1.8/i686-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.1/. -I/usr/local/lib/site_ruby/1.8/i686-linux  -D_FILE_OFFSET_BITS=64  -fPIC  -Wall -I../include  -I/usr/include  -c histogram3d_source.c
gcc -I. -I. -I/usr/lib/ruby/1.8/i686-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.1/. -I/usr/local/lib/site_ruby/1.8/i686-linux  -D_FILE_OFFSET_BITS=64  -fPIC  -Wall -I../include  -I/usr/include  -c vector_double.c
vector_double.c: In function ‘rb_gsl_vector_normalize_bang’:
vector_double.c:872:10: attention : variable ‘mean’ set but not used [-Wunused-but-set-variable]
vector_double.c: Hors de toute fonction :
vector_double.c:692:13: attention : ‘draw_hist’ defined but not used [-Wunused-function]
vector_double.c:624:13: attention : ‘draw_vector’ defined but not used [-Wunused-function]
vector_double.c:634:13: attention : ‘draw_vector2’ defined but not used [-Wunused-function]
vector_double.c:704:13: attention : ‘draw_vector_array’ defined but not used [-Wunused-function]
vector_double.c:679:13: attention : ‘draw_narray’ defined but not used [-Wunused-function]
gcc -I. -I. -I/usr/lib/ruby/1.8/i686-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.1/. -I/usr/local/lib/site_ruby/1.8/i686-linux  -D_FILE_OFFSET_BITS=64  -fPIC  -Wall -I../include  -I/usr/include  -c const.c
gcc -I. -I. -I/usr/lib/ruby/1.8/i686-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.1/. -I/usr/local/lib/site_ruby/1.8/i686-linux  -D_FILE_OFFSET_BITS=64  -fPIC  -Wall -I../include  -I/usr/include  -c block.c
In file included from block.c:29:0:
block_source.c: In function ‘rb_gsl_block_compare’:
block_source.c:550:7: attention : variable ‘status’ set but not used [-Wunused-but-set-variable]
In file included from block.c:35:0:
block_source.c: In function ‘rb_gsl_block_int_compare’:
block_source.c:550:7: attention : variable ‘status’ set but not used [-Wunused-but-set-variable]
In file included from block.c:41:0:
block_source.c: In function ‘rb_gsl_block_uchar_compare’:
block_source.c:550:7: attention : variable ‘status’ set but not used [-Wunused-but-set-variable]
gcc -I. -I. -I/usr/lib/ruby/1.8/i686-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.1/. -I/usr/local/lib/site_ruby/1.8/i686-linux  -D_FILE_OFFSET_BITS=64  -fPIC  -Wall -I../include  -I/usr/include  -c sf_dawson.c
gcc -I. -I. -I/usr/lib/ruby/1.8/i686-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.1/. -I/usr/local/lib/site_ruby/1.8/i686-linux  -D_FILE_OFFSET_BITS=64  -fPIC  -Wall -I../include  -I/usr/include  -c fcmp.c
gcc -I. -I. -I/usr/lib/ruby/1.8/i686-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.1/. -I/usr/local/lib/site_ruby/1.8/i686-linux  -D_FILE_OFFSET_BITS=64  -fPIC  -Wall -I../include  -I/usr/include  -c matrix_complex.c
matrix_complex.c: In function ‘rb_gsl_matrix_complex_eye’:
matrix_complex.c:202:19: attention : variable ‘p’ set but not used [-Wunused-but-set-variable]
matrix_complex.c: In function ‘rb_gsl_matrix_complex_set_row’:
matrix_complex.c:410:19: attention : variable ‘pz’ set but not used [-Wunused-but-set-variable]
matrix_complex.c: In function ‘rb_gsl_matrix_complex_set_col’:
matrix_complex.c:436:19: attention : variable ‘pz’ set but not used [-Wunused-but-set-variable]
matrix_complex.c: In function ‘rb_gsl_matrix_complex_inspect’:
matrix_complex.c:654:3: attention : format ‘%lu’ expects argument of type ‘long unsigned int’, but argument 4 has type ‘size_t’ [-Wformat]
matrix_complex.c:654:3: attention : format ‘%lu’ expects argument of type ‘long unsigned int’, but argument 5 has type ‘size_t’ [-Wformat]
matrix_complex.c: Hors de toute fonction :
matrix_complex.c:1523:12: erreur: conflicting types for ‘gsl_matrix_complex_equal’
/usr/include/gsl/gsl_matrix_complex_double.h:227:5: note: previous declaration of       ‘gsl_matrix_complex_equal’ was here
make: *** [matrix_complex.o] Erreur 1

Gem files will remain installed in /var/lib/gems/1.8/gems/gsl-1.14.7 for inspection.
Results logged to /var/lib/gems/1.8/gems/gsl-1.14.7/ext/gem_make.out
stagiaire@stagiaire-desktop:~$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T01:11:26.653

[从https://github.com/romanbsd/rb-gsl/issues/2](https://github.com/romanbsd/rb-gsl/issues/2)获得一些线索我在 Ubuntu 上做了以下操作：

卸载了我现有的 gsl：

```
sudo apt-get remove gsl-bin libgsl0-dev libgsl0ldbl 
```

建立了一个新的gsl

```
wget ftp.gnu.org/gnu/gsl/gsl-1.14.tar.gz
tar xf gsl-1.14.tar.gz
cd gsl-1.14
./configure
make
sudo make install 
```

安装了宝石

```
gem install gsl 
```

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:25:49.180

上述答案有效，因为您可以简单地使用 GSL 和 ruby​​ 绑定 (rb-gsl) 的 ~1.14 版本。

但是，如果您已经通过 homebrew ( ) 安装了 GSL或者更喜欢 1.15 版，您也可以在您的 ruby​​ 绑定`brew install gsl`中指定以下 repo ：`Gemfile`

[https://github.com/whistlerbrk/rb-gsl/](https://github.com/whistlerbrk/rb-gsl/)

这是基于：

[https://github.com/30robots/rb-gsl/](https://github.com/30robots/rb-gsl/)

这有补丁，`gsl_matrix`第一个 repo 也有新版本 ruby​​gems 的补丁。

# windows-phone-7 - 当 ItemSource 没有数据时，在 Wp7 列表框中显示“无记录”

> ID：10316141
> 
> 赞同：1
> 
> 时间：2012-04-25T12:56:39.210
> 
> 标签：windows-phone-7, listbox, no-data

当 itemsource 中没有绑定到列表框的数据时，如何显示“未找到记录”。如果我添加一个新的文本框，它会给出一个异常，因为无法将数据添加到只读集合。

谢谢和问候， 金谷

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:21:58.107

您可以在前面有一个带有 TextBox 和 ListBox 的 Grid，如果 ListBox 有内容，它将隐藏 TextBox 和/或使用转换器将 Visbility 绑定到 ObervableCollection 的 Count 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:04:00.353

而不是这样做。如果记录为零，则检查计数并隐藏列表框并显示带有消息的文本块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T13:16:49.093

您如何将数据绑定到列表框的源？如果它通过与视图模型中的属性进行数据绑定，则只需检查该属性是否为 null 或 empty 。这将达到目的。

提供更多您正在使用的信息或代码可以带来更多帮助。

# iphone - 自定义编辑单元格

> ID：10316147
> 
> 赞同：1
> 
> 时间：2012-04-25T12:56:50.243
> 
> 标签：iphone, objective-c, uitableview, edit, cells

请你帮助我好吗。我需要执行编辑单元格。编辑应该是这样的：当我按下 barButtonItem（导航栏上的右侧）时，单元格的内容应该稍微向右移动，并且应该出现复选框。用户应该能够通过单击同一个导航按钮来选择多个单元格并提交编辑。我尝试使用标准编辑，但我不知道如何： - 选择多个单元格，然后才提交编辑 - 如何将提交操作设置为 navButton 而不是出现在每个选定单元格旁边的红色删除按钮

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:07:01.560

多选被视为编辑风格之一。因此，要使单元格多选，请在 UITableViewDelegate 中实现：

```
-(UITableViewCellEditingStyle)tableView:(UITableView*)tableView editingStyleForRowAtIndexPath:(NSIndexPath*)indexPath {
  ...
  return 3;
} 
```

这里的“3”表示多选。结果是这样的：

![在此处输入图像描述](../Images/f99bd029d45dcfdc0cbc1e4f2e75aeae.png)

要获取选定的行，请调用

```
-indexPathsForSelectedRows method on the table view.
NSArray* selectedRows = [tableView indexPathsForSelectedRows]; 
```

如果您不喜欢红色复选标记，可以使用未记录的 multiselectCheckmarkColor 属性来更改它。不幸的是，它必须应用于整个表。

```
tableView.multiselectCheckmarkColor = [UIColor blueColor]; 
```

除非您进行子类化或分类，否则无法更改浅蓝色背景颜色

```
UITableViewCell and override the -_multiselectBackgroundColor method, like this:
-(UIColor*)_multiselectBackgroundColor { return [UIColor yellowColor]; } 
```

希望对你有帮助..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T15:34:31.323

尼特的答案有一个错误。

编码

```
tableView.multiselectCheckmarkColor = [UIColor blueColor]; 
```

应该这样写：

```
[tableView setValue:[UIColor blueColor] forKey:@"multiselectCheckmarkColor"]; 
```

我在 Xcode 4.5 上试过这个，它工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-06T13:32:04.213

如果它仍然相关，请注意在 iOS 7+ 上，您可以简单地使用 UITableView 的 tintColor 属性 - 这会设置复选标记颜色。

# node.js - 用于贝宝身份验证的 Node.JS oauth2 模块

> ID：10316151
> 
> 赞同：0
> 
> 时间：2012-04-25T12:56:58.347
> 
> 标签：node.js, oauth, express, oauth-2.0

是否有任何 node.js 模块可用于 paypal oauth 身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:21:28.357

据我所知，目前没有任何 Node.js 身份验证解决方案支持 PayPal。我是[Passport](http://passportjs.org)的作者，实施 PayPal 身份验证策略在我的待办事项清单上。如果您想在我开始之前开始，请告诉我，我会提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T22:05:48.470

我不知道任何特定于 PayPal 的模块，但如果您最终决定推出自己的模块，因为您使用的是 Express/Connect，我建议您研究使用 EveryAuth 并为其添加一个 PayPal 模块：[https：/ /github.com/bnoguchi/everyauth](https://github.com/bnoguchi/everyauth) - 这将使您的应用程序未来更容易与任何其他身份验证 API 集成。

# php - Php：“静态”的行为像 C 吗？

> ID：10316160
> 
> 赞同：0
> 
> 时间：2012-04-25T12:57:32.077
> 
> 标签：php, optimization

我有一个生成数据库访问的“主类”。就像是：

```
class ObjetBd extends Objet
{
    protected $bd;
    public function __construct()
    {   
        parent::__construct();
        $this->bd = new BD();
        $this->bd->connect();
    }   
} 
```

这对我来说是“干净”的代码（为了简洁起见，我删除了评论）。

现在我的问题是`$this->bd`为每个对象生成的。

我想知道静态对象是否生成+初始化一次。

我想调用一次并且只使用一个连接，而不使用直接调用静态方法（即像以前一样`connect()`继续使用）`$this->bd`

如果是这样，您能否说一下以下代码是否可以完美运行，以及是否应该使用更少的资源：

```
class ObjetBd extends Objet
{
    static private $bd_static;

    protected $bd;

    public function __construct()
    {   
        parent::__construct();
        if (!isset(self::$bd_static)) {
            self::$bd_static = new BD();
            self::$bd_static->connect();
        }
        $this->bd = self::$bd_static;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:27:12.223

是的，你这样做是正确的。忽略单例注释，避免单例是一件好事。

虽然我确实想提一个建议：

我将假设 BD 是某种数据库。OOP 的强大之处在于能够对事物进行子类化，并在不改变行为的情况下替换对象。

所以*最好*只在构造函数中传递你的 $bd 对象。只是要记住的事情。这称为“依赖注入”或“控制反转”。

# eclipse - 当省略“提供”依赖项的导入时，为什么 Eclipse 不抛出错误？

> ID：10316161
> 
> 赞同：0
> 
> 时间：2012-04-25T12:57:32.683
> 
> 标签：eclipse, maven, dependencies

我正在使用 Maven，我的项目中有几个“提供”的依赖项。我一直在使用 eclipse:eclipse 命令为我一直在使用的代码生成 eclipse 项目。就在最近，我收到了 NoClassDefFound 错误，才发现 import 语句被省略了。

我很好奇为什么 Eclipse 没有对我大惊小怪......似乎 maven eclipse:eclipse 目标应该将依赖项链接到我的 eclipse 项目（从而指示何时省略导入语句）。我不明白这是如何工作的吗？

# php - FoxPro 保留字问题？

> ID：10316167
> 
> 赞同：0
> 
> 时间：2012-04-25T12:57:57.700
> 
> 标签：php, html, foxpro

我正在尝试读取名为 SCHEDULE.dbf 的 foxpro 表。数据通过数据连接器在 PHP 中读取，然后通过管道传输到我的网页。如果我重命名 Schedule.dbf，这一切都非常有效。除了 Schedule 之外的任何名称似乎都可以使用。但是，当我运行名为 Schedule 的它时，我收到“SQL 错误：[Microsoft][ODBC dBase Driver] Index file not found., SQL state S0012 in SQLExecDirect”错误消息。我唯一的想法是 Schedule 是某个地方的保留字，但我在任何列表中都找不到它。我完全不知所措。重命名表并不是一个真正的选择，因为它是我不想修改的更大数据输入和管理系统的一部分。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:41:11.730

错误是“未找到索引文件” - 匹配的 .cdx 索引文件与 .dbf 文件不在同一目录中。确保它位于同一目录中，或者您可以使用 FoxPro 从表中删除索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:22:55.467

我不能说 dBASE（如果它是 Foxpro 数据而不是 dBASE，我会专门为 VFP 使用 Microsoft 的 OleDb 提供程序）。在 Foxpro 中，系统可以处理成对（甚至是三个）文件。所有对应的文件名都需要重命名，比如

```
SCHEDULE.DBF (main data)
SCHEDULE.CDX (compound index file for all indexes for given file)
SCHEDULE.FPT (separate file if any memo/general data columns in the file) 
```

如果您尝试仅重命名 .DBF 而不是其余部分（仅当数据列的类型为 memo 或 general 时才找到 .FPT），那么它将阻塞打开文件。

此外。如果表是数据库容器的一部分（通过 VFP），并且您尝试打开它，则该文件具有额外的标头信息以指向它所绑定的数据库。如果它在数据库中找不到它，那也可能会给你一个误导的错误。

VFP 中的数据库容器具有 .DBC、.DCT 和 .DCX 的后缀值。

# mysql - 使用 SQL 计算方差

> ID：10316171
> 
> 赞同：4
> 
> 时间：2012-04-25T12:58:14.390
> 
> 标签：mysql, sql, variance

我有一个财务价格时间序列：

```
日期价格差异_3

2012 年 1 月 1 日 1,1 不适用
2012 年 2 月 1 日 1,2 不适用
2012 年 3 月 1 日 1,3    
2012 年 4 月 1 日 1,3
2012 年 7 月 1 日 1,2
2012 年 8 月 1 日 1.3

```

我打算使用最后 3 个价格及时计算每个日期的差异。您是否看到了仅使用 SQL 来完成此任务的机会？

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:03:25.573

```
select  var_pop(price) as variance
from    (
        select  price
        from    YourTable
        order by
                date desc
        limit   3
        ) as SubQueryAlias 
```

# javascript - CSS 属性更改 OnClick

> ID：10316176
> 
> 赞同：-6
> 
> 时间：2012-04-25T12:58:19.550
> 
> 标签：javascript, jquery, html, css

我通过 CSS 对 's 进行了简单的绝对定位，包括 z-index HTML：

```
<div id="one"> test </div>
<div id="two"> test </div>
<div id="three"> test </div> 
```

CSS：

```
#one{
height: 200px;
width: 150px;
background: #a8d14f;
position: absolute;
left: 10px;
top: 30px;
z-index: 10;
}
#two{
height: 200px;
width: 150px;
background: #f97273;
position: absolute;
left: 150px;
top: 30px;
z-index: 15;
}
#three{
height: 200px;
width: 150px;
background: #43b8b0;
position: absolute;
left: 300px;
top: 30px;
z-index: 12;
} 
```

需要：OnClick 更改一些选定的 CSS 属性，如位置、z-index、背景

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T12:59:56.143

这是元素的 onclick 事件示例`one`，它将更改其`z-index`.

```
$(function(){
  $("#one").click(function(){
     $(this).css("z-index", 2);
  });
}); 
```

从这里你应该能够弄清楚如何做剩下的事情。如果没有，那就多看看jQuery的使用。我们不是来为您工作的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T13:02:55.620

或者没有 jQuery：

```
document.getElementById("one").onclick = function() {
    with (this.style) {
        color = "red";
        position = "relative";
        zIndex = "10";
    }
};​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T13:03:29.137

或者不使用 jQuery

```
var one = document.getElementById("one");
one.addEventListener("click", function() {
    one.style.zIndex = 5;
}, false); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T13:02:37.760

尝试这样的事情。[这是有关如何使用 jQuery 更改 css 属性的更多详细信息](http://api.jquery.com/css/)

```
$("#one").click(function(){
    $(this).css("position", "absolute");
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T13:05:04.947

Try this:

```
$('#one').click(function(){
   $(this).css("background-color","yellow");
   $(this).css("z-index", 1);

}); 
```

alternate you could use plain javascript:

```
document.getElementById('one').style.zIndex = '1' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T13:02:14.827

这是一个有效的 jsFiddle： http: [//jsfiddle.net/qJURY/](http://jsfiddle.net/qJURY/) ，这是使用的代码：

```
$("div").click(function(){
    var z = parseInt($(this).css("z-index"));
    z += 10;
    $(this).css("z-index", z);
})
​ 
```

# algorithm - 如何根据箭头计算箭头的坐标？

> ID：10316180
> 
> 赞同：10
> 
> 时间：2012-04-25T12:58:25.230
> 
> 标签：algorithm

我有一条基于我知道的两个 (x,y) 坐标的线。这条线有起点和终点。现在我想在该行的终点添加一个箭头。

我知道箭头是等边三角形，因此每个角度都有 60 度。另外，我知道一侧的长度，即 20。我也没有三角形的一条边（即线的终点）。

如何计算三角形的其他两个点？我知道我应该使用一些三角函数但是如何？

Ps 线的端点应该是箭头的尖端。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T13:21:09.340

这是一个示例[LINQPad](http://linqpad.net)程序，它展示了如何做到这一点：

```
void Main()
{
    const int imageWidth = 512;
    Bitmap b = new Bitmap(imageWidth , imageWidth , PixelFormat.Format24bppRgb);

    Random r = new Random();
    for (int index = 0; index < 10; index++)
    {
        Point fromPoint = new Point(0, 0);
        Point toPoint = new Point(0, 0);

        // Ensure we actually have a line
        while (fromPoint == toPoint)
        {
            fromPoint = new Point(r.Next(imageWidth ), r.Next(imageWidth ));
            toPoint = new Point(r.Next(imageWidth ), r.Next(imageWidth ));
        }

        // dx,dy = arrow line vector
        var dx = toPoint.X - fromPoint.X;
        var dy = toPoint.Y - fromPoint.Y;

        // normalize
        var length = Math.Sqrt(dx * dx + dy * dy);
        var unitDx = dx / length;
        var unitDy = dy / length;

        // increase this to get a larger arrow head
        const int arrowHeadBoxSize = 10;

        var arrowPoint1 = new Point(
            Convert.ToInt32(toPoint.X - unitDx * arrowHeadBoxSize - unitDy * arrowHeadBoxSize),
            Convert.ToInt32(toPoint.Y - unitDy * arrowHeadBoxSize + unitDx * arrowHeadBoxSize));
        var arrowPoint2 = new Point(
            Convert.ToInt32(toPoint.X - unitDx * arrowHeadBoxSize + unitDy * arrowHeadBoxSize),
            Convert.ToInt32(toPoint.Y - unitDy * arrowHeadBoxSize - unitDx * arrowHeadBoxSize));

        using (Graphics g = Graphics.FromImage(b))
        {
            if (index == 0)
                g.Clear(Color.White);

            g.DrawLine(Pens.Black, fromPoint, toPoint);
            g.DrawLine(Pens.Black, toPoint, arrowPoint1);
            g.DrawLine(Pens.Black, toPoint, arrowPoint2);
        }
    }

    using (var stream = new MemoryStream())
    {
        b.Save(stream, ImageFormat.Png);
        Util.Image(stream.ToArray()).Dump();
    }
} 
```

基本上，你：

1.  计算箭头线的向量
2.  归一化向量，即。使其长度为 1
3.  通过以下方式计算箭头的末端：
    1.  先从头部后退一定距离
    2.  然后垂直出线一段距离

请注意，如果您希望箭头线的角度不同于 45 度，则必须使用不同的方法。

上面的程序每次会随机绘制 10 个箭头，下面是一个例子：

![箭头示例](../Images/52815443de029a517dc56a67e27d6600.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-25T13:22:00.357

你不需要三角函数，只需要一些向量算术......

假设这条线从 A 到 B，箭头的前顶点在 B。箭头的长度是 h = 10(√3)，它的半宽是 w = 10。我们将表示单位向量A 到 B 为 U = (B - A)/|B - A| （即，差除以差的长度），与此垂直的单位向量为 V = [-U [y] , U [x] ]。

根据这些量，您可以将箭头的两个后顶点计算为 B - hU ± wV。

在 C++ 中：

```
struct vec { float x, y; /* … */ };

void arrowhead(vec A, vec B, vec& v1, vec& v2) {
    float h = 10*sqrtf(3), w = 10;
    vec U = (B - A)/(B - A).length();
    vec V = vec(-U.y, U.x);
    v1 = B - h*U + w*V;
    v2 = B - h*U - w*V;
} 
```

如果要指定不同的角度，则需要一些三角函数。`h`计算和的不同值`w`。假设您想要一个长度为 h 且尖角为 θ 的箭头，则 w = h tan(θ/2)。然而，在实践中，直接指定是最简单`h`的`w`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-25T13:12:38.797

让你的线是`(x0,y0)-(x1,y1)`

后向矢量`(dx, dy) = (x0-x1, y0-y1)`

这是常态`Norm = Sqrt(dx*dx+dy*dy)`

规范化它：`(udx, udy) = (dx/Norm, dy/Norm)`

旋转角度`Pi/6`和`-Pi/6`

```
ax = udx * Sqrt(3)/2 - udy * 1/2

ay = udx * 1/2 + udy * Sqrt(3)/2

bx = udx * Sqrt(3)/2 + udy * 1/2

by =  - udx * 1/2 + udy * Sqrt(3)/2 
```

你的观点：`(x1 + 20 * ax, y1 + 20 * ay)`和`(x1 + 20 * bx, y1 + 20 * by)`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-21T19:54:52.877

我想根据 Marcelo Cantos 的回答在 C# 中贡献我的答案，因为该算法运行良好。我编写了一个程序来计算投射在 CCD 阵列上的激光束的质心。找到质心后，绘制方向角线，我需要指向该方向的箭头。由于计算了角度，因此箭头必须在任何方向上跟随角度。

![长度 = 10，半宽度 = 10](../Images/1e591bdc690ddd1bdaa22ccdf226df7a.png)

![长度 = 20，半宽度 = 10](../Images/680aedc98af392338809ae299733e2ed.png)

![在此处输入图像描述](../Images/7fe90e204d68c78462af31525f933936.png)

此代码使您可以灵活地更改箭头大小，如图所示。

首先，您需要具有所有必要运算符重载的向量结构。

```
private struct vec
{
    public float x;
    public float y;

    public vec(float x, float y)
    {
        this.x = x;
        this.y = y;
    }

    public static vec operator -(vec v1, vec v2)
    {
        return new vec(v1.x - v2.x, v1.y - v2.y);
    }

    public static vec operator +(vec v1, vec v2)
    {
        return new vec(v1.x + v2.x, v1.y + v2.y);
    }

    public static vec operator /(vec v1, float number)
    {
        return new vec(v1.x / number, v1.y / number);
    }

    public static vec operator *(vec v1, float number)
    {
        return new vec(v1.x * number, v1.y * number);
    }

    public static vec operator *(float number, vec v1)
    {
        return new vec(v1.x * number, v1.y * number);
    }

    public float length()
    {
        double distance;
        distance = (this.x * this.x) + (this.y * this.y);
        return (float)Math.Sqrt(distance);
    }
} 
```

然后您可以使用 Marcelo Cantos 给出的相同代码，但我制作了箭头变量的长度和半宽度，以便您可以在调用函数时定义它。

```
private void arrowhead(float length, float half_width, 
                       vec A, vec B, ref vec v1, ref vec v2)
{
    float h = length * (float)Math.Sqrt(3);
    float w = half_width;
    vec U = (B - A) / (B - A).length();
    vec V = new vec(-U.y, U.x);
    v1 = B - h * U + w * V;
    v2 = B - h * U - w * V;

} 
```

现在您可以像这样调用该函数：

```
vec leftArrowHead = new vec();
vec rightArrowHead = new vec();
arrowhead(20, 10, new vec(circle_center_x, circle_center_y), 
    new vec(x_centroid_pixel, y_centroid_pixel),
    ref leftArrowHead, ref rightArrowHead); 
```

在我的代码中，圆心是第一个矢量位置（箭头对接），centroid_pixel 是第二个矢量位置（箭头）。

我通过将向量值存储在 System.Drawings 中 graphics.DrawPolygon() 函数的点中来绘制箭头。代码如下所示：

```
Point[] ppts = new Point[3];
ppts[0] = new Point((int)leftArrowHead.x, (int)leftArrowHead.y);
ppts[1] = new Point(x_cm_pixel,y_cm_pixel);
ppts[2] = new Point((int)rightArrowHead.x, (int)rightArrowHead.y);

g2.DrawPolygon(p, ppts); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T13:10:08.953

你可以找到线的角度。

```
Vector ox = Vector(1,0);
Vector line_direction = Vector(line_begin.x - line_end.x, line_begin.y - line_end.y);
line_direction.normalize();
float angle = acos(ox.x * line_direction.x + line_direction.y * ox.y); 
```

然后使用这个函数使用找到的角度来处理所有 3 个点。

```
Point rotate(Point point, float angle)
{
    Point rotated_point;
    rotated_point.x = point.x * cos(angle) - point.y * sin(angle);
    rotated_point.y = point.x * sin(angle) + point.y * cos(angle);
    return rotated_point;
} 
```

假设箭头头的上点是线的末端，它将完美地旋转并适合线。没测试=(

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-28T15:16:02.233

对于任何感兴趣的人，@TomP 想知道一个 js 版本，所以这是我制作的一个 javascript 版本。它基于@Patratacus 和@Marcelo Cantos 的答案。Javascript 不支持运算符重载，因此它不像 C++ 或其他语言那样干净。随时提供改进。

我正在使用 Class.js 创建类。

```
Vector = Class.extend({
NAME: "Vector",

init: function(x, y)
{
    this.x = x;
    this.y = y;
},

subtract: function(v1)
{
    return new Vector(this.x - v1.x, this.y - v1.y);
},

add: function(v1)
{
    return new Vector(this.x + v1.x, this.y + v1.y);
},

divide: function(number)
{
    return new Vector(this.x / number, this.y / number);
},

multiply: function(number)
{
    return new Vector(this.x * number, this.y * number);
},

length: function()
{
    var distance;
    distance = (this.x * this.x) + (this.y * this.y);
    return Math.sqrt(distance);
}
}); 
```

然后是一个执行逻辑的函数：

```
var getArrowhead = function(A, B)
{
    var h = 10 * Math.sqrt(3);
    var w = 5;
    var v1 = B.subtract(A);
    var length = v1.length();
    var U = v1.divide(length);
    var V = new Vector(-U.y, U.x);
    var r1 = B.subtract(U.multiply(h)).add(V.multiply(w));
    var r2 = B.subtract(U.multiply(h)).subtract(V.multiply(w));

    return [r1,r2];
} 
```

并像这样调用函数：

```
var A = new Vector(start.x,start.y);
var B = new Vector(end.x,end.y);    
var vec = getArrowhead(A,B);

console.log(vec[0]);
console.log(vec[1]); 
```

我知道 OP 没有要求任何特定的语言，但我在寻找 JS 实现时遇到了这个问题，所以我想我会发布结果。

# clojure - 在 leiningen eclipse 中找不到 clojure/contrib/duck_streams__init.class 或 clojure/contrib/duck_streams.clj

> ID：10316183
> 
> 赞同：6
> 
> 时间：2012-04-25T12:58:31.140
> 
> 标签：clojure

我创建了一个 lein 项目，而不是使用 eclips 的开发依赖性更新其 project.clj

我跑了“lein deps”

它下载了所有依赖项

但是在 my.m2/repository 目录中没有 clojure 目录。这导致我

leiningen.eclipse 加载问题：java.io.FileNotFoundException：无法在类路径上找到 clojure/contrib/duck_streams__init.class 或 clojure/contrib/duck_streams.clj：（eclipse.clj:1）

当我运行“lein help”时出错，因为我无法运行我的“lein eclipse”命令，所以放弃了我使用 eclipse 进行开发。

有什么解决办法吗？？？提前致谢。

我的 project.clj 在下面给出

```
(

  defproject for_test "1.0.0-SNAPSHOT"

  :description "FIXME: write description"

  :dependencies [[org.clojure/clojure "1.2.1"]]

  :dev-dependencies [[lein-eclipse "1.0.0"]]

) 
```

谢谢你，chirag ghiyad

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T13:30:03.353

clojure.contrib 是一个单独的库，因此需要明确说明它的依赖关系

```
:dependencies [[org.clojure/clojure "1.2.1"]
               [org.clojure/contrib "1.2.0"]] 
```

从 1.3 开始，单体 clojure.contrib 不再存在，库被拆分为[单独的库](http://dev.clojure.org/display/community/Where+Did+Clojure.Contrib+Go)。

这些库应该在 /m2/org/clojure/clojure 和 /m2/org/clojure/clojure/contrib 中找到。请注意，这些不会自动放入您的类路径中，只有在运行`lein eclipse`之后运行`lein deps`，它会编辑您的 Eclipse .classpath 和 .projects 文件。

顺便说一句，我建议使用`lein plugin install lein-ccw "1.2.0"`，与 lein-eclipse 相比，它与 Clojure 1.3 兼容。`lein eclipse`而不是在之后运行`lein deps`，您应该使用`lein ccw`.

我总是通过命令行将 lein-eclipse 或 lein-ccw 插件安装到 leiningen 中，所以我不知道 dev-dependencies 应该如何工作。在 Leiningen 2.0 中，他们分离了插件和开发依赖功能。

（注意：这两个插件都只能在稳定的 Leiningen 1.7.1 中使用）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-16T18:09:23.827

该答案已过时，请注意包名应为 /clojure-contrib 而不是 /contrib，否则

```
lein deps 
```

找不到包裹

```
:dependencies [[org.clojure/clojure "1.5.1"]
              [org.clojure/clojure-contrib "1.2.0"]] 
```

# regex - 正则表达式匹配定义字符串中间的任意数量的字符

> ID：10316185
> 
> 赞同：0
> 
> 时间：2012-04-25T12:58:40.430
> 
> 标签：regex

我试图想出一个正则表达式来匹配特定的模式。

如果一个示例测试字符串如下：

```
/wp-content/themes/sometheme/style.css 
```

正则表达式应该：

1.  完全匹配`/wp-content/themes/`，从一开始，也应该`/style.css`完全匹配，从最后。
2.  NOT MATCH，当余数（第 1 项中的开始和结束字符串之间）为`rwsarbor`
3.  MATCH，当余数为 BUT 时`mythemename`
4.  对于中间的动态部分，它应该匹配任意数量的字符，以及任意字符类型（不仅仅是 az、0-9 等）

例如，它不应该匹配：

```
/wp-content/themes/mythemename/style.css 
```

它应该匹配

```
/wp-content/themes/jfdskjh-ekhb234_sf/style.css
/wp-content/themes/another_theme/style.css
/wp-content/themes/any_other-theme/style.css
/wp-content/themes/!@#$%^&*()_+{}|:"?</style.css 
```

就复杂性而言，这个有点超出我的范围，所以我正在向社区寻求帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:07:12.303

**试试这个 ：**

```
^/wp-content/themes/(?!mythemename).*/style.css$ 
```

**演示：** [http ://regexr.com?30ote](http://regexr.com?30ote)

* * *

***提示：**使用[负前瞻断言](http://www.regular-expressions.info/lookaround.html)。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:09:12.770

只需从中制作两个正则表达式，一个匹配，一个不匹配（这里使用 grep 进行）：

```
 echo /wp-content/themes/sametheme/style.css | egrep "^/wp-content/themes/.*/style.css$" | egrep -v "(simetheme|sametheme)" 
```

而不是 rwsarbor 和 mytheme 我选择了更好的可测试的东西。

一个较短的演示会很好，顺便说一句：/start/middle/end

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:18:53.813

Vim 正则表达式：

```
^\/wp-content\/themes\/\(rwsarbor\|mythemename\)\@!.\{-}\/style\.css$ 
```

重要位：

```
\(__\|__\) - match one or the other pattern
\@! - match if the preceeding atom didn't match
.\{-\} - Like .* but non-greedy, otherwise style.css would get sucked up here 
```

语法和修饰符取决于您要使用的特定正则表达式引擎。

# javascript - 表格排序问题

> ID：10316186
> 
> 赞同：0
> 
> 时间：2012-04-25T12:58:44.667
> 
> 标签：javascript, jquery, asp.net-mvc

这是我的视图代码：

```
 <script type="text/javascript">
    $(document).ready(function () {
        $("#myTable").tablesorter();
    });

</script>
    <table id="myTable" class="tablesorter">
    <thead>
    <tr>
        <th>
            Date Debut
        </th>
        <th>
            Date Fin
        </th>
        <th></th>
    </tr>
    </thead>
    <tbody>
<% foreach (var item in Model) { %>
    <tr>
        <td>
            <%: item.Dd.ToShortDateString() %>
        </td>
        <td>
            <%: item.Df.ToShortDateString() %>
        </td>
        <td>
            <%: Html.ActionLink("Supprime", "DeleteInd", new { id=item.idind }) %>
        </td>
    </tr>
<% } %>
</tbody>
</table> 
```

我还在我的母版页中添加了那些脚本：

```
<script src="../../Scripts/jquery.tablesorter.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-latest.js" type="text/javascript"></script> 
```

我试图允许对表进行排序，所以我使用了[本网站上](http://tablesorter.com/docs/#Introduction)所有准备好的 jquery 脚本，但它不起作用？我想我错过了一些非常简单的事情，但我想不通:(

这是生成的代码：

```
 <script src="../../Scripts/jquery.ui.core.js" type="text/javascript"></script>

    <script src="../../Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>

    <script src="../../Scripts/jquery.ui.datepicker.js" type="text/javascript"></script>

    <script src="../../Scripts/jquery.ui.core.min.js" type="text/javascript"></script>

    <script src="../../Scripts/jquery.ui.widget.js" type="text/javascript"></script>

 <script src="../../Scripts/jquery-latest.js" type="text/javascript"></script>

    <script src="../../Scripts/jquery.tablesorter.js" type="text/javascript"></script>

   <script type="text/javascript">
        $(function () {
            $("#dd").datepicker({ dateFormat: 'dd-mm-yy' });
            $("#df").datepicker({ dateFormat: 'dd-mm-yy' });
            $("#dd1").datepicker({ dateFormat: 'dd-mm-yy' });
            $("#df1").datepicker({ dateFormat: 'dd-mm-yy' });
        });
    </script> 
</head>
  <body>
// html code
<script type="text/javascript">
    $(document).ready(function () {
        $("#myTable").tablesorter();
    });
</script>
<div class="clear">&nbsp;</div>
        <div id="main">
        <h1> List des Vehicule</h1>    
<table id="myTable" class="tablesorter">
    <thead>
    <tr>
        <th>
            Date Debut
        </th>
        <th>
            Date Fin
        </th>
        <th></th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>
            01/04/2012
        </td>
        <td>
            26/04/2012
        </td>
        <td>
            <a href="/Agence/DeleteInd/2">Supprime</a>
        </td>
    </tr>
    <tr>
        <td>
            01/05/2012
        </td>
        <td>
            09/05/2012
        </td>
        <td>
            <a href="/Agence/DeleteInd/3">Supprime</a>
        </td>
    </tr>
</tbody>
</table>
 </div> 
```

当我单击 Js 链接时，它会向我显示文件代码，以便生成它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:01:27.907

假设`jquery-latest.js`是 jQuery 的一个版本，您应该首先将它包含在您的页面中。此外，最好使用 Google 的 CDN 加载 jQuery。尝试这个：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.tablesorter.js" type="text/javascript"></script> 
```

# c# - 从 .NET C# 调用 Mp4Box.exe

> ID：10316191
> 
> 赞同：0
> 
> 时间：2012-04-25T12:59:07.597
> 
> 标签：c#, .net, shell, command-line, mp4

您好，我正在编写代码以使用 mp4box.exe 对 mp4 视频进行一些编辑

我想执行这个命令行：

```
 "D:\Work\Me\CloudContentUpload\trunk\ContentUploading Current\bin\Debug\Mp4Box\Mp4Box.exe" -isma -inter 500 "C:\Users\Abdullah\Desktop\videoo\amr khaled - Asmaa_elmogeb\Asmaa_elmogeb(1).mp4" 
```

当我在命令行上手动运行此命令时成功执行

但我尝试使用以下 C# 代码执行它：

```
 public string ExecuteCommandSync(object command)
    {
        try
        {
            // create the ProcessStartInfo using "cmd" as the program to be run,
            // and "/c " as the parameters.
            // Incidentally, /c tells cmd that we want it to execute the command that follows,
            // and then exit.
            System.Diagnostics.ProcessStartInfo procStartInfo =
                new System.Diagnostics.ProcessStartInfo("cmd", "/c " + command);

            // The following commands are needed to redirect the standard output.
            // This means that it will be redirected to the Process.StandardOutput StreamReader.
            procStartInfo.RedirectStandardOutput = true;
            procStartInfo.UseShellExecute = false;
            // Do not create the black window.
            procStartInfo.CreateNoWindow = true;
            // Now we create a process, assign its ProcessStartInfo and start it
            System.Diagnostics.Process proc = new System.Diagnostics.Process();
            proc.StartInfo = procStartInfo;

            proc.Start();
            // Get the output into a string
            string result = proc.StandardOutput.ReadToEnd();
            // Display the command output.
            return result;
        }
        catch (Exception objException)
        {
            return objException.Message;
        }
    } 
```

返回的结果是空字符串！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:02:18.630

您不需要为此调用 cmd 。

您应该直接调用您的程序并将参数传递`Arguments`给`ProcessStartInfo`.

# visual-studio-2010 - VS2010：从 dll 加载符号非常慢

> ID：10316192
> 
> 赞同：7
> 
> 时间：2012-04-25T12:59:11.920
> 
> 标签：visual-studio-2010, dll, symbols

我有一个正在我的戴尔笔记本电脑 XPS 502X 上工作的程序。在工作中，我通常将另一台显示器插入我的 DVI 端口，一切都很好。当我在家工作时，我只有笔记本电脑的屏幕。当我在 VS2010 中启动程序时，它非常慢，我注意到屏幕底部`Loading symbols for ...\NVIDIA Corporation\coprocmanager\detourel.dll...`每次大约需要 10-20 秒。知道为什么会这样吗？

编辑：

我还以为是驱动的问题，现在又出现了。

我尝试了类似问题中发布的想法

-DeleteAllBreakpoints 的东西，没有用。

- 没有远程符号获取或网络路径

- 启用只是我的代码

看起来像一个由图形驱动程序注入的钩子 DLL……让我发疯！

编辑2：

问题时有发生，今天一切似乎都找到了，昨天，我什至注意到当我启动 CFileDialog 时程序运行时加载 GROOVEEX.dll 很慢。所以它可能不仅仅是与图形驱动程序有关的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:37:20.863

看起来 nVidia 使用了 Microsoft 的 Detours 库。希望这会有所帮助...

[http://forums.nvidia.com/index.php?showtopic=212704](http://forums.nvidia.com/index.php?showtopic=212704)

和

[http://research.microsoft.com/en-us/projects/detours/](http://research.microsoft.com/en-us/projects/detours/)

运行 Windows 内置的 msconfig 工具，查看 nVidia 在启动时启动的一些内容。您可能想尝试暂时禁用某些启动项，但在此之前您需要研究禁用的每个项目是什么，或者您可能必须进入安全模式才能恢复到良好状态。

# mpi - 将 MPI 等级数推广到 MPI 组？

> ID：10316195
> 
> 赞同：3
> 
> 时间：2012-04-25T12:59:27.443
> 
> 标签：mpi

等级编号是否有任何泛化到组编号？对于我的代码，我想创建 MPI::COMM_WORLD 的分层分解。假设我们使用 16 个线程。我使用 MPI::COMM_WORLD.Split 创建 4 个通信器，每个通信器有 4 个等级。现在是否有一个 MPI 函数可以为相应的四个组提供一些唯一的 id？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T13:24:05.493

好吧，您仍然可以按每个进程在`MPI_COMM_WORLD`. 您还可以通过 的`color`和`key`参数完全控制每个进程在其新通信器中获得的等级`MPI_Comm_split()`。这是足够的信息来创建旧等级和新组/等级之间的映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:30:09.417

如果您不喜欢@suszterpatt 的回答（我喜欢），您总是可以滥用笛卡尔通信器并假装通信器中索引 (2,3) 处的进程是层次分解的第 2 组中的进程 3。

但是不要读到这篇文章并带走我推荐这种滥用的印象，这只是一个想法。

# firefox - Selenium：测试用户在不同浏览器上的交互

> ID：10316196
> 
> 赞同：3
> 
> 时间：2012-04-25T12:59:32.297
> 
> 标签：firefox, google-chrome, chat, selenium-rc

我正在实施一个套件来测试聊天的行为。每个用户执行不同的操作以在不同的浏览器上登录聊天。

我已经分别实现了每个测试用例并且工作正常。我还实现了一个套件，其中包括两种情况，先是一个，然后是另一个，它运行但看起来两个浏览器都没有共享信息，因为它没有显示用户登录。这是我正在实现的一个例子在java中：

公共类 connect_facebook 扩展 SeleneseTestCase{

```
Selenium sele1 = null;
Selenium sele2 = null;

@Before
public void setUp() throws Exception {
//Establish the first browser
sele1 = new DefaultSelenium("localhost", 4444, "*firefox", "http://www.google.es/");
//Establish the second browser
sele2 = new DefaultSelenium("localhost", 4444, "*googlechrome " , "http://www.facebook.com");
//Start the first test case
sele1.start();
//Start the second test case
sele2.start();

}

//Send the message to a friend in Facebook
@Test
public void testConnect_facebook_nocookies() throws Exception {
    ...
} 
```

我不会停止 sele1

```
//Open Facebook, check the message and open Zaraproxy to start Connect
@Test
public void testCheck_mail_facebook() throws Exception {
    ... 
```

}

注意：它的作用是在一开始打开 ​​FF 和 Chrome，然后关闭 Chrome 并运行 sele1。之后不会关闭 FF，而是打开另一个 FF 和 Chome 浏览器，关闭 FF，然后使用 Chrome 运行 sele2。

当 sele2 打开聊天面板时，sele1 (FF) 的用户出现离线。

我使用 selenium 服务器作为 HUB 并启动另一台服务器作为节点（不使用 selenium 网格）。在传递给 selenium Grid 之前想先用 selenium RC 解决，因为 Grid 的安装给我带来了一些问题。

欢迎任何帮助！提前致谢！

乙

# php - 西里尔字母在 mysql 中未正确显示

> ID：10316198
> 
> 赞同：0
> 
> 时间：2012-04-25T12:59:37.400
> 
> 标签：php, mysql

当我在数据库中插入西里尔字母时，我得到了类似 Ð£Ñ€Ð¾Ðº 2 - ÐŸÑŠÑ€Ð²Ð°Ñ,Ð° Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð°。我该如何解决？我正在使用 utf8_unicode_ci

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:04:53.823

quick and dirty solution
issue an SQL query

```
SET NAMES utf8 
```

every time you connect to your database.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:05:11.063

Try using sql function SET NAMES 'utf8' right after connection.
Check what is the encoding of the field in the database.
Check MySQL connection collation

# html - 排版：将内容标题与正文分开

> ID：10316199
> 
> 赞同：1
> 
> 时间：2012-04-25T12:59:37.877
> 
> 标签：html, typo3, typoscript

是的，我一直在寻找答案，但找不到任何有效或做我想做的事情。既不是德语也不是英语，所以这是我最后的手段：

我在我正在编程的网站上包含了一个 Javascript。通常的 JQuery 内容滑块。（ [http://jquery.andreaseberhard.de/toggleElements/](http://jquery.andreaseberhard.de/toggleElements/)）。我将它包含在一个 Typo3 站点中。我创建了一个stdWrap，以便“正常”列中的每个条目最终都位于其中一个滑块中。到目前为止一切都很好。
文档说它使用：

```
 <div class="toggler-c" title="Example 1"> 
```

声明每个切换器。我的包装看起来像这样：

```
10.marks.CONTENT = COA
  10.marks.CONTENT.10 = CONTENT
  10.marks.CONTENT.10 {
    renderObj.stdWrap.wrap = <div class="toggler-c" title="" >|</div>
    table = tt_content
    select.orderBy = sorting
    select.where = colPos = 0
    } 
```

问题是这会将包括条目标题在内的所有内容写入切换器，并且不使用标题作为可见标题。我不知道如何抓取内容元素的标题以将其写入包装的“标题”属性。

非常感谢您的建议！

哈雷斯特

编辑：

我一直在尝试不同的事情：这离我有多远？

```
 10.marks.CONTENT = COA
  10.marks.CONTENT.10 = CONTENT
  10.marks.CONTENT.10 {

    renderObj < tt_content
    renderObj.stdWrap.cObject {
      key = CType
      header = |
      default = <div class="toggler-c" title="|" ></div>
      bodytext = |
      default = <div class="toggler-c" title="">|</div>
    }

    table = tt_content
    select.orderBy = sorting
    select.where = colPos = 0
    } 
```

（这没有显示任何内容，但我想知道这是否是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T08:17:09.977

好吧，我让它工作了，无论如何我猜还是谢谢？！

```
10.marks.CONTENT = COA
  10.marks.CONTENT.10 = CONTENT
  10.marks.CONTENT.10 {

table = tt_content
select.orderBy = sorting
select.where = colPos = 0

renderObj < tt_content
   renderObj = COA
    renderObj {
     10 = TEXT
     10.field = header
     10.wrap = title="|"
     20 = TEXT
     20.field = bodytext
     20.wrap = >|
     wrap =  <div class="toggler-c" |</div>
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-11T09:34:35.627

我的版本根据上面的帖子和网上的一些搜索：

我把它放在模板的标记部分：

```
 HEADING = CONTENT
HEADING{
    # find current content from the tt_content table
    table = tt_content
    select.orderBy = sorting
    select.where = colPos = 0

    # render the header as simple text
    renderObj < tt_content
    renderObj = TEXT
    renderObj.field = header
}

CONTENT = CONTENT
CONTENT{
    # same goes here
    table = tt_content
    select.orderBy = sorting
    select.where = colPos = 0

    # trying to render the bodytext as an HTML content
    renderObj < tt_content
    renderObj = TEXT
    renderObj.field = bodytext
    renderObj.parseFunc < lib.parseFunc_RTE   # Remove this line, if you want to remove the <p class="bodytext"> markups
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:44:51.873

您确实希望查看`tt_content`TypoScript 对象浏览器中的部件。

您需要的是`CASE`与`key = CType`标题相同的特殊配置（空包装）和所有其他元素的默认包装。

```
renderObj.stdWrap.cObject = CASE
renderObj.stdWrap.cObject {
  key = CType
  header = |
  default = <div class="toggler-c" title="" >|</div>
} 
```

（未经测试）。

# php - Yii 自定义模型错误

> ID：10316208
> 
> 赞同：5
> 
> 时间：2012-04-25T13:00:14.527
> 
> 标签：php, yii

我正在保存一个模型实例，该实例在“beforeSave”模型函数中执行一些操作。
我想向模型添加一些错误/消息，然后将它们放入控制器并显示给用户。
就如何实现这一点而言，我有两个想法：

*   使用带有 ActiveRecord 函数的虚拟属性`"addError": $this->addError("dummy"=>"my message");` 这不是最好的方法，因为我必须发明新的虚拟属性。
*   向模型和函数“addCustomErrors”添加新属性“custom_errors”

也许有一种内置的方式来做到这一点或扩展？
无论如何我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T18:08:39.440

您可以使用 addError() 但无需编造虚假属性。**如果错误与模型本身的任何内容**无关，那么您做错了什么：p

所以在你的情况下，它会是这样的：

```
 $this->addError('file', 'Something happened I wasn\'t pleased with'); 
```

如果属性上有任何其他错误，`file`它们会累积，因此您无需担心覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T17:18:21.093

我没有看到这里的问题。只需使用 addError() [http://www.yiiframework.com/doc/api/1.1/CModel#addError-detail](http://www.yiiframework.com/doc/api/1.1/CModel#addError-detail)。该模型即使在调用`save()`它之后也会保留，所以你可以做类似的事情

```
yourController()
{
   do_something();
   do_something();
   $model->save();
   $errors[]=do_what_you_have_to_do_to_define_the_errors_which_will_be_added();
   $model->addError(attribute, $errors);
   $this->render(viewWhereTheErrorWillBeDisplayed, $model);
} 
```

# amazon-s3 - 如何在 Amazon EMR/S3 中查看输出？

> ID：10316217
> 
> 赞同：3
> 
> 时间：2012-04-25T13:00:41.740
> 
> 标签：amazon-s3, hive, amazon-emr

我是 Amazon Services 的新手，并尝试在 Amazon EMR 中运行该应用程序。

为此，我已按照以下步骤操作：

1) 创建了包含 --> create table 的 Hive 脚本，在 Hive 中使用一些文件加载​​数据语句并从命令中选择 *。

2) 创建 S3 存储桶。我将对象加载到其中：Hive 脚本，文件加载到表中。

3) 然后创建作业流程（使用示例 Hive 程序）。给定输入、输出和脚本路径（如 s3n://bucketname/script.q、s3n://bucketname/input.txt、s3n://bucketname/out/）。没有创建目录。我认为它会自动创建。

4) 然后 Job Flow 开始运行，一段时间后我看到状态为 STARTING、BOOTSTRAPING、RUNNING 和 SHUT DOWN。

5) 在运行 SHUT DOWN 状态时，它会自动终止，显示 SHUT DOWN 的 FAILES 状态。

然后在 S3 上，我没有看到 out 目录。如何查看输出？我看到了守护进程、节点等目录......

以及如何在 Amazon EMR 中查看来自 HDFS 的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T03:55:02.330

您在步骤 3 中指定的输出路径应包含您的结果（根据您的描述，它是 s3n://bucketname/out/）

如果没有，那么您的 Hive 脚本出了点问题。如果您的 Hive 作业失败，您将在 jobtracker 日志中找到有关失败/异常的信息。jobtracker 日志存在于`<s3 log location>/daemons/<master instance name>/hadoop-hadoop-jobtracker-<some Amazon internal IP>.log`

您的日志目录中只有一个文件具有上述格式的 S3 密钥。该文件将包含任何可能发生的异常。您可能希望专注于文件的底部。

# jquery - 加载页面后显示页面

> ID：10316228
> 
> 赞同：0
> 
> 时间：2012-04-25T13:01:41.483
> 
> 标签：jquery

我尝试在加载页面后显示我的页面。

为了做到这一点，

```
 <div id ="loadingDiv">
        <img src="urltogif">
    </div> 
```

我创建了上面的 div 并使用了下面的 js。

```
 $('#loadingDiv')
    .hide()  // hide it initially
    .ajaxStart(function() {
        $(this).show();
    })
    .ajaxStop(function() {
        $(this).hide();
    }); 
```

但 gif 图像始终显示在页面上。这是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:06:05.163

您需要确保在页面完成加载并且 DOM 准备好之后执行 jQuery 代码，这可以使用[`ready()`jQuery 中的函数](http://api.jquery.com/ready/)来完成：

```
$(document).ready(function() {
    $('#loadingDiv').hide() // hide it initially
    .ajaxStart(function() {
        $(this).show();
    }).ajaxStop(function() {
        $(this).hide();
    });
})​ 
```

[此处的工作示例](http://jsfiddle.net/d2AAu/4/)- 单击按钮以启动 AJAX 请求 - 响应有 5 秒延迟，因此您可以看到“加载”div

## 更新

根据您在下面的评论-我认为您希望`div`在页面加载时显示并隐藏页面：

HTML：

```
<div id ="loadingDiv">
    <img src="urltogif">
</div> 
```

这意味着它默认显示，一旦页面完全加载，以下 jQuery 将隐藏

```
$(document).ready(function() {
    $('#loadingDiv').hide();
}); 
```

我不确定为什么在这种情况下你有 AJAX 方法!!!????!??? 或者我完全想念你的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:11:10.777

You need to include document.ready function at the top , so that the jQuery could be executed once the page is loaded completely.

# android - android：通过链接启动活动

> ID：10316231
> 
> 赞同：0
> 
> 时间：2012-04-25T13:01:58.927
> 
> 标签：android

我有一个链接“openactivity://”，我的应用程序有活动：com.example.MyAct

有没有办法通过点击链接打开活动“com.example.MyAct”？

我试过了：

```
 <activity android:name=".MyAct"
                  android:label="@string/app_name">
      <intent-filter>
          <action android:name="android.intent.action.VIEW" />
          <category android:name="android.intent.category.DEFAULT" />
          <category android:name="android.intent.category.BROWSABLE" />
          <data android:scheme="openactivity"/>
      </intent-filter>
   </activity > 
```

但它并不总是有效，它似乎不适用于高版本的 Android 设备。（它不适用于我的 HTC Sensation 版本 2.3.4 和 HTC One X 版本 4.0.3）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T08:41:52.543

我得到了答案：一些 android 电子邮件应用程序会在启动之前将我的链接更改为 http 格式，这就是我无法捕获自定义 URL 事件的原因。

HTC Sensation 版本的本地邮件应用程序完成了我上面所说的事情。

只需尝试使用其他邮件应用程序，如 K-9 电子邮件，一切都会奏效。

# c# - 修改主线程C#上的变量

> ID：10316232
> 
> 赞同：0
> 
> 时间：2012-04-25T13:01:59.503
> 
> 标签：c#, wpf, multithreading, sockets

当套接字连接终止时，我正在数组中进行删除。我正在开发一个小聊天程序。我正在从用户对象数组中删除一个元素。

```
public class User
{

    private Thread clthread;
    private string name;
    private Socket sock;

    public User(string _name, Thread _thread, Socket _sock)
    {
        sock = socket();
        clthread = _thread;
        name = _name;
        sock = _sock;
    }

    private Socket socket()
    {
        return new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
    }//initiaza socket nou

    public Thread CLThread
    {
        get { return clthread; }
        set { clthread = value; }
    }
    public string Name
    {
        get { return name; }
        set { name = value; }
    }
    public Socket Sock
    {
        get { return sock; }
        set { sock = value; }
    }

} 
```

数组声明如下：

```
 User[] connected = new User[1024]; 
```

这就是我删除的方式

```
 private void Disconnection(int id)
    {
        User client = connected[id];
        for (int i = id; i < no - 1; i++)
        {
            connected[i] = connected[i + 1];
        }
        client.Sock.Close();
        client.CLThread.Abort();

        no--;
        MessageBox.Show(no.ToString());
        //ui clean

    } 
```

问题是用户数组的计数器是在主 wpf 窗口中声明的。但是我正在与每个套接字关联的线程中执行删除方法（断开连接）。

帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:11:03.280

为用户数组使用计数器周围的锁，因为您要从多个线程中递减它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:58:32.050

在我看来，整个方法都需要序列化，因为您也在更改客户端数组：

```
object locker = new object(); // globally visible lock

...

private void Disconnection(int id)
{        
    lock(locker)
    {
        User client = connected[id];
        for (int i = id; i < no - 1; i++)
        {
            connected[i] = connected[i + 1];
        }
        client.Sock.Close();
        client.CLThread.Abort();

        no--;      
        MessageBox.Show(no.ToString());
    }
    //ui clean

} 
```

请看看您是否可以将阵列更改为更有效的东西！您不仅必须手动跟踪计数器，而且从数组中删除是一个 O(n) 操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:48:51.950

这并不能直接回答您的问题，因为我只想提出几点。

首先，为什么不使用自动属性？代替：

```
public Thread CLThread
{
    get { return clthread; }
    set { clthread = value; }
} 
```

尝试

```
public Thread CLThread { get; set; } 
```

您可以为所有属性执行此操作。

此外，您将在外部公开断开连接的详细信息。你的类中应该有一个公共`Close()`方法`User`来处理关闭套接字和中止线程。

也就是说，中止线程是邪恶的。您应该使用一种方法，例如在发出事件信号时让线程优雅地返回，然后调用线程的`Join()`方法`Close()`以等待线程退出。

我同意 Reniuz 的观点——改用 a`List<User>`并避免自己管理柜台。

# android - ScrollView 只能承载一个直接子异常

> ID：10316235
> 
> 赞同：1
> 
> 时间：2012-04-25T13:02:14.777
> 
> 标签：android

我想将图像添加到滚动视图，我尝试使用以下代码：

```
 ScrollView sv = (ScrollView)findViewById( R.id.scrollView2);
        ImageView iv = new ImageView(this);
        iv.setImageDrawable( new BitmapDrawable( "PATH" ) );
        iv.setScaleType( ScaleType.CENTER_INSIDE );
        sv.addView( sv ); 
```

我得到了这个异常：java.lang.IllegalStateException: ScrollView can host only one direct child

那么我应该如何将图像添加到我的滚动视图中？

**添加代码：** xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="#FF0000" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

        </LinearLayout>
    </ScrollView>

    <ScrollView
        android:id="@+id/scrollView2"
        android:layout_width="200dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/scrollView1"
        android:background="#FFFF00" >

        <LinearLayout
            android:id="@+id/filesScrollerLayout"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >
        </LinearLayout>
    </ScrollView>

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="250dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:background="#FFFFFF"
        android:layout_toRightOf="@+id/scrollView2" />

</RelativeLayout> 
```

最后 Activity onCreate 调用此方法：

公共无效addImage（字符串路径）{

```
 LinearLayout sv = (LinearLayout)findViewById( R.id.filesScrollerLayout);
        ImageView iv = new ImageView(this);
        iv.setImageDrawable( new BitmapDrawable( path ) ); 
        iv.setScaleType( ScaleType.CENTER_INSIDE );
        sv.addView( sv ); 

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T13:03:40.860

这可能会有所帮助.. 它告诉我们因为 ScrollView 不能容纳超过 1 个孩子.. 它需要托管所有其他视图的单个孩子..

```
<ScrollView>
<LinearLayout
android:id="@+id/child">
    <ImageView/>
    ...
    ...
</LinearLayout>
</ScrollView> 
```

在你的情况下

```
LinearLayout child = (LinearLayout)findViewById( R.id.child);
        ImageView iv = new ImageView(this);
        iv.setImageDrawable( new BitmapDrawable( "PATH" ) );
        iv.setScaleType( ScaleType.CENTER_INSIDE );
        child.addView( sv ); 
```

# javascript - 将 JavaScript 数组添加到 HTML 页面？

> ID：10316239
> 
> 赞同：3
> 
> 时间：2012-04-25T13:02:21.723
> 
> 标签：javascript, jquery, html, arrays

我正在尝试将数组添加到网页。我尝试了下面显示的一些不同的代码，但它们都不起作用。我希望输出类似于以下列表：

文本1

文本2

文字3 ...

到目前为止我使用的代码是：

```
var i;
var test = new Array();
test[0] = "text1";
test[1] = "text2";
test[2] = "text3";

// first attempt
$('#here').html(test.join(' '));

// second attempt
$(document).ready(function() {
    var testList="";
    for (i=0;i<test.length; i++) {
        testList+=  test[i]  + '<br />';
    }
    $('#here').html('testList');
    songList="";
}); 
```

我对 javaScript 很陌生，所以我不确定我是否只是犯了一个小错误，或者我是否以错误的方式这样做。另外，上面是我的 javaScript 文件中所有代码的副本，网上有些地方说我需要导入一些东西？我不知道！
谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T13:03:38.187

尝试不带引号：

```
$('#here').html(testList); 
```

-或者-

```
$('#here').html(test.join('<br />')); 
```

* * *

另一种方法：

```
var html = '';                                    // string
$.each(test,function(i,val){                      // loop through array
    var newDiv = $('<div/>').html(val);           // build a div around each value
    html += $('<div>').append(newDiv.clone()).remove().html();   
       // get the html by
       //   1\. cloning the object
       //   2\. wrapping it
       //   3\. getting that html
       //   4\. then deleting the wrap
       // courtesy of (http://jquery-howto.blogspot.com/2009/02/how-to-get-full-html-string-including.html)
});

$('#here').html(html); 
```

*后者可能有更多代码，但从长远来看，如果您想添加 ID、类或其他属性，它会更简洁。只需将其粘贴在一个函数中并修改 jQuery。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T13:04:20.520

换行试试

```
$('#here').html('testList') 
```

到

```
$('#here').html(testList) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:04:30.190

这一行：

```
$('#here').html('testList'); 
```

不应该有单引号`testList`- 你想使用变量的内容，而不是字符串文字“testList”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T13:04:54.153

不要将变量作为字符串`$('#here').html('testList');`传递：不带引号传递：`$('#here').html(testList);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T13:06:29.610

这是最简单的版本：

```
$(document).ready(function() {
    var test = ["text1", "text2", "text3"];
    $('#here').html(test.join("<br>"));
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T13:11:11.203

如果您从`testList`. 但是，如果您想要一个实际的无序列表，您可以这样做。（[这是一个 jsFiddle](http://jsfiddle.net/r5nFy/)）

```
var test = new Array();
test[0] = "text1";
test[1] = "text2";
test[2] = "text3";

// first attempt
$('#here').html(test.join(' '));

// second attempt
$(document).ready(function() {
    var testList=$("<ul></ul>");
    for (var i=0;i<test.length; i++) {
        $(testList).append($("<li></li>").text(test[i]));
    }
    $('#here').html(testList);
    songList="";
}); ​ 
```

# mysql - mysql插入-选择语法错误

> ID：10316243
> 
> 赞同：0
> 
> 时间：2012-04-25T13:02:31.383
> 
> 标签：mysql, syntax

这是我的查询 -

```
$q = "CREATE TEMPORARY TABLE tmp SELECT * from category c  WHERE category_id IN (SELECT category_id FROM category_to_store WHERE store_id = '".(int)$from_store_id."');
                ALTER TABLE tmp drop category_id; 
                INSERT INTO category SELECT 0,tmp.* FROM tmp;
                SET @last_id_in_category := LAST_INSERT_ID();
                select @last_id_in_category;
                DROP TABLE tmp;"

mysql_query($q); 
```

我在执行时收到此错误

> 错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'ALTER TABLE tmp drop category_id; 附近使用的正确语法；在第 2 行插入到类别 SELECT 0' 错误编号：1064

但是当我直接在数据库中运行查询时，我没有收到任何错误。请帮我 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:08:30.683

来自`mysql_query' 上的[php 文档](http://php.net/manual/en/function.mysql-query.php)

* * *

mysql_query() 向当前活动的数据库发送一个**唯一查询（不支持多个查询） ...**

* * *

因此，基本上将您的查询拆分为多次调用“mysql_query”，每次调用一次查询，您应该没问题。

# jaxb - XmlJavaTypeAdapter 抛出用户定义的异常

> ID：10316246
> 
> 赞同：3
> 
> 时间：2012-04-25T13:02:38.583
> 
> 标签：jaxb

有没有办法在 XmlAdapter 中抛出用户定义的异常并在 JAXB 编组/解组时捕获它们？我的意思是，我可以抛出自己的异常，但 JAXB 只是忽略此异常并抛出他自己的异常，我无法从中获取异常消息或异常对象。

```
try {
    Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
    jaxbUnmarshaller.unmarshal(inputStream);
}
catch (UserDefinedException e) {
    // Do something.
} 
```

很抱歉没有发布 JAXB 抛出的正确异常而不是我的异常。此刻，我无法获取代码。目前我正在使用 JAXB-RI，但我使用了 EclipseLink MoXY 并遇到了这个问题。

当我能够拿到代码时，我会发布额外的数据。但在那之前，也许有人知道我在说什么。一些正确使用 XmlAdapter 的代码示例也很棒。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:34:49.987

[JAXB (JSR-222)](http://jcp.org/en/jsr/detail?id=222)实现的期望是它抛出一个`JAXBException`. 这意味着在诸如 an 之类的东西中抛出的任何异常`XmlAdapter`最终都会被包裹起来。您可能会使用有状态`XmlAdapter`来处理此用例：

```
Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
MyXmlAdpater myXmlAdapter = new MyXmlAdapter();
jaxbUnmarshaller.setAdatper(myXmlAdapter);
jaxbUnmarshaller.unmarshal(inputStream);
if(myXmlAdapter.hasException() {
    // Do something.
} 
```

有关使用有状态的示例，`XmlAdapter`请参见：

*   [http://blog.bdoughan.com/2011/09/mixing-nesting-and-references-with.html](http://blog.bdoughan.com/2011/09/mixing-nesting-and-references-with.html)

# html - IE9 iframe 内的媒体查询失败

> ID：10316247
> 
> 赞同：18
> 
> 时间：2012-04-25T13:02:39.340
> 
> 标签：html, css, media-queries, responsive-design

我的 CSS 中有以下媒体查询：

```
@media screen and (min-width: 0px) and (max-width: 319px) {
    body {background-color:red;}
}

@media screen and (min-width: 320px) and (max-width: 480px) {
    body {background-color:orange;}
}

@media screen and (min-width: 481px) and (max-width: 980px) {
    body {background-color:yellow;}
}

@media screen and (min-width: 981px) and (max-width: 1200px) {
    body {background-color:green;}
}

@media screen and (min-width: 1201px) {
    body {background-color:blue;}
} 
```

和五个相应大小的 iframe：

```
<iframe frameBorder="0" src="index.html" height="320" width="255" ></iframe> 
```

查询在独立的 html 文件中运行良好，但在 iframe 上下文中查看时，它们在 IE9 中失败。所有其他浏览器都显示 OK。

有谁知道为什么？谢谢

[编辑] 作为记录，父和子 html 具有相同的 docType，并且 CSS 被用作 text/css。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-05T15:29:29.470

这不是一个真正的答案，但可以帮助其他人找到解决 IE 中此错误的方法。

包含 iframe 的页面

```
<link href="style.css" rel="stylesheet"> 
```

iframe 页面

```
<link href="style.css?frameX" rel="stylesheet"> 
```

参数 frameX 阻止 IE 缓存 css 页面，因此 iframe 具有独立于其他页面的响应式布局。这只是一个黑客（可怕的），并帮助其他人找到这个问题的答案。

示例文件

**索引.html**

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="style.css" rel="stylesheet">
</head>
<body>
  <p></p>

  <hr>
  250px frame
  <iframe frameBorder="0" src="frame1.html" height="100" width="250" id='frame_1'></iframe>  

  <hr>
  350px frame
  <iframe frameBorder="0" src="frame2.html" height="100" width="350" id='frame_2'></iframe>  

  <hr>
  390px frame
  <iframe frameBorder="0" src="frame3.html" height="100" width="390" id='frame_3'></iframe>  

</div>
</body> 
```

**框架1.html**

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="style.css?page=frame1" rel="stylesheet">
</head>
<body>
  <p></p>
</body>
</html> 
```

**框架2.html**

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="style.css?page=frame2" rel="stylesheet">
</head>
<body>
  <p></p>
</body>
</html> 
```

**框架3.html**

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="style.css?page=frame3" rel="stylesheet">
</head>
<body>
  <p></p>
</body>
</html> 
```

**样式.css**

```
iframe{display:block;}

@media (max-width: 8000px)
{
  body p:before {content: "bigger than 550px";}
}

@media (max-width: 550px)
{
  body p:before {content: "max550";}
}

@media (max-width: 450px)
{
  body p:before {content: "max450";}
}

@media (max-width: 350px)
{
  body p:before {content: "max350";}
}

@media (max-width: 250px)
{
  body p:before {content: "max250";}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-07T17:35:19.120

这是我所做的：

*   使用 jQuery...
*   获取页面上的所有 iframe
*   每个 iframe 的 onload 找到所有样式表链接
*   对于每个样式表，获取 url 并向其附加一个随机 num 'nocache' 查询字符串
*   创建一个新的样式表链接标签并将其附加到头部
*   完毕。

这是代码：

```
// This forces the media queries to run in IE iframes, by waiting for the iframes to load and then,
// re-getting/applying the stylesheet
(function($){
    // Get each of the iframes on this page
    $('iframe').each(function(index){
        // On load of each iframe:
        $(this).on('load', function(){
            var iframeDoc = $(this).contents();

            // For each stylesheet reference found:
            iframeDoc.find('link[rel="stylesheet"]').each(function(){
                // Get the current stylesheet's url and add a 'nocache' random num query string to it
                var cssURL = $(this).attr('href');
                cssURL += (cssURL.indexOf('?') != -1)? '&':'?';
                cssURL += 'nocache=' + (Math.random() + index);

                // Create a new stylesheet link tag and append it to the head
                $("<link/>", {
                    rel: "stylesheet",
                    type: "text/css",
                    href: cssURL
                }).appendTo(iframeDoc.find('head'));
            });

        });
    });
})(jQuery); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T14:54:19.100

您很可能无法解决此问题。媒体查询基于视口大小，我想 IE 在这种情况下不会将 iFrame 视为完全成熟的视口。

您最好的选择很可能是添加一些 JavaScript 来检测大小并在您用于响应式设计的相同阈值处添加一个类。这也可以让你向后兼容不支持媒体查询的浏览器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T12:04:14.560

有同样的问题。但是我找到了一个简单的解决方法。使用 JS 创建 iframe，我刚刚将 ?nocache=Math.random() 之类的内容附加到 iframe src。那为我修好了:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-12T18:32:58.620

我在 IE9 上遇到了这个问题。父页面没有声明 doctype。
在父页面中添加一个 html5 doctype ( `<!DOCTYPE html>`) 解决了这个问题。

# solr - Solr 3.5 的太阳黑子。手动更新索引以进行实时搜索

> ID：10316249
> 
> 赞同：3
> 
> 时间：2012-04-25T13:02:44.670
> 
> 标签：solr, indexing, full-text-search, real-time, sunspot-rails

我正在使用 Rails 3 和 Sunspot solr 3.5。我的应用程序使用 Solr 来索引用户生成的内容并使其可供其他用户搜索。目标是让用户从用户上传数据的那一刻起就可以尽快搜索到这些数据。我不知道这是否符合实时搜索的条件。

我的应用程序有两个模型

1.  帖子
2.  邮政项目

我通过包含来自帖子项目的数据来索引帖子，以便当用户根据 post_item 记录中提供的特定描述进行搜索时，相应的帖子对象在搜索中可用。

用户经常更新 post_item，所以每次添加新的 post_item 时，我都需要重新索引相应的 post 对象，以便新的 post_item 在搜索期间可用。

所以此刻每当我收到一个新的 post_item 对象时，我都会运行

```
 post_item.post.solr_index! # 

```

根据[本文档](http://outoftime.github.com/sunspot/rails/docs/classes/Sunspot/Rails/Searchable/InstanceMethods.html)，它会立即更新索引并提交。这可行，但这是在这种情况下处理索引的正确方法吗？[我在这里](http://engineering.socialcast.com/2011/05/realtime-search-solr-vs-elasticsearch/)读到，在搜索时调用索引可能会破坏 solr。频繁的手动索引调用也不是要走的路。

关于正确方法的任何建议。除了切换到 ElasticSearch 之外，还有其他选择吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:03:49.497

尝试使用这个 gem [https://github.com/bdurand/sunspot_index_queue](https://github.com/bdurand/sunspot_index_queue)

你将能够批量重新索引，比方说，每分钟，它绝对不会破坏索引

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T19:20:34.127

如果您刚刚开始并有幸在 Solr 和 ElasticSearch 之间进行选择，`go with ElasticSearch`.

我们在生产中使用 Solr，随着索引和搜索量的增长，我们遇到了许多奇怪的问题。结论是 Solr 是为索引大型文档（word/pdf 内容）和大量（数十亿？）而构建/优化的，但每天或几天更新一次索引，而没有人搜索。

对于消费者 Rails 应用程序来说，这是一个错误的选择，因为文档很小，数量很少（以百万计）更新是随机和连续的，并且搜索需要有点实时（延迟 5-10 秒就可以了）。

我们用于调整服务器的一些技巧。

```
removed all commits (i.e., !) from rails code, 
use Solr auto-commit every 5/20 seconds, 
have master/slave configuration, 
run index optimization(on Master) every 1 hour 
and more. 
```

当提交触发时，我们仍然看到从属服务器上的 CPU 使用率很高。因此，一些搜索需要很长时间（有时> 60 秒）。

我也怀疑批处理索引是否`sunspot_index_queue gem`可以解决高 CPU 问题。

# css - CSS 选择器：子（> n）？

> ID：10316252
> 
> 赞同：7
> 
> 时间：2012-04-25T13:02:53.153
> 
> 标签：css, css-selectors

我得到的问题是我得到了可变数量的子元素。我的 :last-child :first-child 规则应该只适用于至少有 3 个孩子的情况

我尝试了 :only-child，当只有 1 个孩子时，它可以覆盖 :last- 和 :first-child，但是当我有 2 个孩子时，我遇到了问题。是否有某种选择器，仅适用于子节点数多于 n 的情况？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-25T13:06:19.450

使用`:nth-child(n+3)`选择器（其中 3 是第*n*个最小子项）。

```
:last-child:nth-child(n+3) {
     /* Selects the last child which is at least the third child */
} 
```

演示：http: [//jsfiddle.net/vCZ9A/](http://jsfiddle.net/vCZ9A/)

# magento - 如何在 magento 的这些链接中添加 rel nofollow？例如“添加到比较”

> ID：10316261
> 
> 赞同：4
> 
> 时间：2012-04-25T13:03:16.680
> 
> 标签：magento, nofollow

如何在 magento 商店的这些链接中添加 rel nofollow？提前致谢。

在产品页面中，“添加到比较”“添加到愿望清单”“发送电子邮件给您的朋友”“评论”“添加您的评论”“注册价格提醒”“社交书签分享”

在结帐页面，“条款和条件”“已经注册？点击这里登录。”

在这种情况下，我们以一个 autoradio 在线商店网站为例。 [http://www.onlyforcars.com/](http://www.onlyforcars.com/)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-25T13:53:45.383

找到生成添加到比较链接的模板文件并将其放入其中。

# c++ - 单线程和多线程代码占用相同的时间

> ID：10316266
> 
> 赞同：1
> 
> 时间：2012-04-25T13:03:32.943
> 
> 标签：c++, pthreads, parallel-processing

我一直在使用 pthreads，但我意识到如果我使用 1 个线程或者我将任务分成 N 个线程的 1/N，我的代码独立地花费相同的时间。为了举例说明，我将我的代码简化为这个例子：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>

#include <boost/progress.hpp>

#define SIZEEXEC 200000000

using namespace boost;
using std::cout;
using std::endl;

typedef struct t_d{
   int  intArg;
} Thread_data;

void* function(void *threadarg)
{
    Thread_data *my_data= (Thread_data *) threadarg; 
    int size= my_data->intArg;

    int i=0;
    unsigned rand_state = 0;
    for(i=0; i<size; i++) rand_r(&rand_state);
    return 0;
}

void withOutThreads(void)
{
    Thread_data* t1= new Thread_data();
    t1->intArg= SIZEEXEC/3;
    function((void *) t1);

    Thread_data* t2= new Thread_data();
    t2->intArg= SIZEEXEC/3;
    function((void *) t2);

    Thread_data* t3= new Thread_data();
    t3->intArg= SIZEEXEC/3;
    function((void *) t3);    
}

void withThreads(void)
{
    pthread_t* h1 = new pthread_t;
    pthread_t* h2 = new pthread_t;
    pthread_t* h3 = new pthread_t;
    pthread_attr_t* atr = new pthread_attr_t;

    pthread_attr_init(atr);    
    pthread_attr_setscope(atr,PTHREAD_SCOPE_SYSTEM);

    Thread_data* t1= new Thread_data();
    t1->intArg= SIZEEXEC/3;
    pthread_create(h1,atr,function,(void *) t1);

    Thread_data* t2= new Thread_data();
    t2->intArg= SIZEEXEC/3;
    pthread_create(h2,atr,function,(void *) t2);

    Thread_data* t3= new Thread_data();
    t3->intArg= SIZEEXEC/3;
    pthread_create(h3,atr,function,(void *) t3);

    pthread_join(*h1,0);
    pthread_join(*h2,0);
    pthread_join(*h3,0);
    pthread_attr_destroy(atr);
    delete h1;
    delete h2;
    delete h3;
    delete atr;
}

int main(int argc, char *argv[])
{
    bool multThread= bool(atoi(argv[1]));

    if(!multThread){
        cout << "NO THREADS" << endl;
        progress_timer timer;
        withOutThreads();
    }
    else {
        cout << "WITH THREADS" << endl;
        progress_timer timer;
        withThreads();
    }

    return 0;
} 
```

要么代码错误，要么我的系统上有一些东西不允许并行处理。我在 Ubuntu 11.10 x86_64-linux-gnu、gcc 4.6、Intel® Xeon(R) CPU E5620 @ 2.40GHz × 4 上运行

感谢您的任何建议！

编辑：鉴于答案，我已经意识到（1）progress_timer 计时器不允许我测量“实时”时间的差异，以及（2）我在“功能”中给出的任务似乎不足以让我的机器用 1 或 3 个线程给出不同的时间（这很奇怪，在这两种情况下我都得到大约 10 秒......）。我试图分配内存并使其更重，是的，我看到了不同。虽然我的其他代码更复杂，但很有可能它仍然运行 +- 同时使用 1 或 3 个线程。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:49:29.820

这是意料之中的。您正在测量 CPU 时间，而不是墙上时间。

```
time ./test 1
WITH THREADS
2.55 s

real    0m1.387s
user    0m2.556s
sys     0m0.008s 
```

实时小于用户时间，这与您测量的时间相同。实时是您的挂钟显示的内容，用户和系统是 *所有 CPU*在用户和内核模式下花费的 CPU 时间。

```
time ./test 0
NO THREADS
2.56 s

real    0m2.578s
user    0m2.560s
sys     0m0.008s 
```

您的测量时间、实时时间和用户时间几乎都相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:44:25.913

罪魁祸首似乎是**progress_timer**或者更确切地说是对它的理解。

尝试用这个替换 main() 。这告诉程序不需要**progress_timer**报告的时间，也许它报告总系统时间？

```
#include <sys/time.h>
void PrintTime() {
    struct timeval tv;

    if(!gettimeofday(&tv,NULL))
        cout << "Sec=" << tv.tv_sec << " usec=" << tv.tv_usec << endl ;

}

int main(int argc, char *argv[])
{
    bool multThread= bool(atoi(argv[1]));

    PrintTime();
    if(!multThread){
        cout << "NO THREADS" << endl;
        progress_timer timer;
        withOutThreads();
    }
    else {
        cout << "WITH THREADS" << endl;
        progress_timer timer;
        withThreads();
    }
    PrintTime();

    return 0;
} 
```

# php - PayPal API 重复付款 - 每 15 个月付款一次

> ID：10316274
> 
> 赞同：0
> 
> 时间：2012-04-25T13:03:56.773
> 
> 标签：php, api, paypal

我如何创建定期付款，使用 PP API 每 15 个月付款一次？我需要使用什么参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:06:00.890

您可以使用 IPN 服务来验证付款，并快速结帐以使用贝宝启动订阅。订阅将在您的客户和贝宝之间进行。**不是**你和你的客户。

即：您的客户将通过 PayPal 取消订阅，这会通知您和您的脚本。

[http://www.micahcarrick.com/php-paypal-ipn-integration-class.html](http://www.micahcarrick.com/php-paypal-ipn-integration-class.html)

一个快速的谷歌搜索返回了那个库。

# jquery - 所见即所得的网页表单编辑器/设计器通过网页 ASP.NET

> ID：10316280
> 
> 赞同：0
> 
> 时间：2012-04-25T13:04:07.523
> 
> 标签：jquery, sql-server-2008, asp.net-ajax

我的客户希望我开发一个系统，用户可以通过网页设计表单，一种所见即所得的表单编辑器，我们将有一个工具箱在可用的可拖动 html 控件中进行选择，并将放置在 NXM 的画布上矩阵（表格或网格）。

放置在单元格内的控件应对齐左边界。将有一种机制将控件的位置保存到数据库中，例如哪个控件放置在哪个行和哪个列中。

在这里，我正在寻找一些解决方案或想法或一些非限制性的开源框架来实现 UI 功能，即，将 html 控件拖到画布上，并且应该能够选择保存到数据库的位置。类似于[http://nettuts.s3.amazonaws.com/127_iNETTUTS/demo/index.html](http://nettuts.s3.amazonaws.com/127_iNETTUTS/demo/index.html)但我们将使用 html 控件代替小部件。

我的项目中使用的技术是 ASP.NET 3.5、VS 2008、jQuery、Sql Server 2008

任何帮助将不胜感激。

谢谢和热烈的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:09:18.463

感谢大家提供支持。使用 jQuery UI，我从头开始实现它。

# php - Doctrine 真的比 PDO 慢吗？

> ID：10316285
> 
> 赞同：13
> 
> 时间：2012-04-25T13:04:28.677
> 
> 标签：php, doctrine, pdo, doctrine-orm

我最近了解了 PDO 和 Doctrine 2.2.2 来构建应用程序。但我将在我的环境中处理一些关键约束（大量数据，连接速度......等）我知道 Doctrine 有一个 PDO 层，所以 PDO 可能更快但我想使用真正的 ORM 框架，如休眠。

阅读这篇文章后， [基准 PDO 与 Doctrine](http://vincent-lecomte.blogspot.com/2011/01/web-php-zend-benchmark-pdo-vs-doctrine.html)

我必须知道 Doctrine 是否 [ 非常 ] 比 PDO 慢。

谢谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-25T13:13:55.547

Doctrine 2 + PHP 5.3+ 大大提高了 Doctrine 的速度。

但是，您永远不会接近 PDO，因为**它不是一回事**：您想查询数据库还是想自动将数据库映射到 PHP 对象，然后在代码中使用对象？

*   对于开发质量、易用性和速度：使用 Doctrine
*   对于运行时速度：不要使用 ORM

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-29T13:39:31.837

使用像 APC 这样的 PHP 缓存将大大提高 Doctrine 的性能。据我所见；3-7次之间。
如果你不能使用缓存，你可以很容易地切换到 Doctrine 的 DBAL 层，而不是在你真正需要你能获得的所有速度的领域中的 ORM。运行时速度将更接近 PDO，但您将失去 ORM 的便利性。

# android - 在 Android 的 TextView 中选择并复制到剪贴板

> ID：10316298
> 
> 赞同：0
> 
> 时间：2012-04-25T13:04:59.003
> 
> 标签：android, textview, clipboard

是否可以允许用户在 TextView 的剪贴板中选择然后复制文本？

我找到[了这个](https://stackoverflow.com/questions/6025818/select-copy-text-in-a-textview)，但没有答案。

我也尝试过设置`android:textIsSelectable="true"`，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:35:10.873

我通过使用 EditText 修复了它，但为了避免我在对“imran khan”的回答中描述的问题，我在 android 代码中找到了关于 setKeyListener 的评论：

> ```
>  * Be warned that if you want a TextView with a key listener or movement
>  * method not to be focusable, or if you want a TextView without a
>  * key listener or movement method to be focusable, you must call
>  * {@link #setFocusable} again after calling this to get the focusability
>  * back the way you want it. 
> ```

所以问题是，当您将可编辑标志设置为 false 时，调用 setKeyListener 并覆盖可聚焦标志。

为了解决这个问题，我在我的活动的 onCreate 中添加了：

```
 tesxtView.setKeyListener(null);
    tesxtView.setFocusable(true); 
```

通过这样做，我也摆脱了拼写错误单词的标记

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-14T11:14:53.690

我认为从 Lollipop 开始，这实际上可以按您的预期工作（在[**我的应用程序**](https://play.google.com/store/apps/details?id=com.lb.app_manager)上进行了测试，在我更改了一些内容之后）：

![在此处输入图像描述](../Images/27b3b699d8213b4eed83c63cc2b69257.png)

我使用[**了这个库**](https://github.com/fengdai/AlertDialogPro)，并将文件“adp_alert_dialog_material.xml”的这个属性更改为只有您询问的属性（在 TextView 上）：

```
android:textIsSelectable="true" 
```

# javascript - Moving text box animation

> ID：10316303
> 
> 赞同：0
> 
> 时间：2012-04-25T13:05:16.243
> 
> 标签：javascript, html, css, textbox

I'm designing a static HTML page. It has two input fields and a change button.

```
<form name="formTextBox" method="post">

    <span id="departImage"> 
        <img src="images/FlightImg.png"> 
    </span>

    <span class="spanInputOne" id="spanInputOneId">
        <input type="text" maxlength="5" 
            class="textBox" id="departTextBox" name="txtDpt" /> 
    </span>

    <input type="image" src="images/SwitchMode.png" 
        class="centerButton" id="changeButton" 
        onclick="change()" value="change" />

    <span id="arrveImage"> 
        <img src="images/FlightImgDown.png"> 
    </span>

    <span class="spanInputTwo" id="spanInputTwoId">
        <input type="text" maxlength="5" 
            class="textBox" id="arrivalTextBox" name="txtArr"/>
    </span>

</form> 
```

What i wanted to do is, when clicking the change button, the value in text field should swap mean while the text box should move visually to another box position. so i've included css3 animation, javascript as follows

css3

```
.animation {
    position: relative;
    animation: swap .5s;
    -moz-animation:swap .5s; /* Firefox */
    -webkit-animation:swap 1s; /* Safari and Chrome */
}

@-moz-keyframes swap /* Firefox */
{
    0%   {left:0%; top:0%;}
    100% {left:50%; top:0%;}
}

@-webkit-keyframes swap /* Chrome and Safari */
{
    0%   {left:0%; top:0%;}
    100% {left:50%; top:0%;}
}

.animationOne {
   position: relative;
   animation: swapOne .5s;
   -moz-animation:swapOne .5s; /* Firefox */
   -webkit-animation:swapOne .5s; /* Safari and Chrome */ 
}

 @-moz-keyframes swapOne /* Firefox */
{
    0%   {right:0%; top:0%;}
    100% {right:48%; top:0%;}
}

 @-webkit-keyframes swapOne  /* Chrome and Safari */
{
    0%   {right:0%; top:0%;}
    100% {right:48%; top:0%;}
} 
```

Javascript

```
function change() {

    var depart=document.getElementById("departTextBox").value;
    var arrive=document.getElementById("arrivalTextBox").value;

    $("span:eq(1)").addClass("animation");
    $("span:eq(3)").addClass("animationOne");

    document.formTextBox.txtDpt.value = arrive;
    document.formTextBox.txtArr.value = depart;   
} 
```

The text boxes are animating well as expected. But text box values are disappeared after the animation is done. Could some one help me...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:23:59.587

上述项目的问题与`<form>, <input type="img">`

由于文本框、图像按钮`<input type="image" src="images/SwitchMode.png">`包含在 中，因此它会发布值。所以页面刷新，数据不可用。

我使用了以下代码而不是`<input type="image" src="images/SwitchMode.png">`它，它可以工作。

```
 <img src="images/SwitchMode.png" alt="Change" 
    class="centerButton" id="changeButton" 
    onclick="change()" value="change" /> 
```

# matlab - 交织向量

> ID：10316304
> 
> 赞同：16
> 
> 时间：2012-04-25T13:05:17.073
> 
> 标签：matlab, vector

我想在 MATLAB 中交织两个向量。事实上，我实际上只是想在每个元素之间添加一个零，但我想我会以这样一种方式提出这个问题，以便学习如何将其应用于其他情况。

我的具体应用：我想取一个向量（例如`[1 2 3]`）和输出`[0 1 0 2 0 3]`。

更广泛的问题：我将如何使用两个不同的向量来做到这一点，例如`[1 2 3]`交织`[9 8 7]`产生`[9 1 8 2 7 3]`.

在上述两个问题中的一个或两个问题中，任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-25T13:10:11.833

我会利用 MATLAB 向量的内部布局：它们以列为主，即列中的值变化最快。要交错两个向量`a`和`b`，只需执行以下操作：

```
ar = a(:).';    % make sure ar is a row vector
br = b(:).';    % make sure br is a row vector
A = [ar;br];   % concatenate them vertically
c = A(:);      % flatten the result 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-25T13:09:34.060

尝试

```
reshape([[9 8 7];[1 2 3]],1,[]) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-25T13:10:01.893

这里有一些代码可以完成你想要的：

```
nums   = rand(1,3)
output = zeros(1,2*numel(nums));
output(2:2:end) = nums 
```

输出如下：

```
nums =

    0.9134    0.6324    0.0975

output =

         0    0.9134         0    0.6324         0    0.0975 
```

按照其他两个答案的风格，您可以使用以下内容获得所需的零输出：

```
nums = rand(1,3);
reshape([zeros(size(nums));nums],1,[]) 
```

显然，`nums`应该替换为您想要使用的向量。如前所述，在调用`reshape`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-09T17:21:31.450

[我在 File Exchange 站点（ Interleave Vectors 或 Matrices](http://www.mathworks.com/matlabcentral/fileexchange/45757-interleave-vectors-or-matrices) ）上编写了一个 MATLAB 函数，它完全可以满足您的需求以及更多功能。只需下载 .m 文件并将该文件放在与其他 .m 文件相同的目录中，或者将该函数复制并粘贴到您的程序中。

此函数按行或列交错任意数量的向量或矩阵。如果输入只是向量，则无需指定方向。额外的元素/行/列附加在输出矩阵的末尾。提供的其他答案对于相等长度的向量非常具体，或者需要确保向量的方向正确。

如何使用该功能的示例：

1) 交错矩阵行

```
A = [1 2; 3 4] B = [5 6;7 8]

C = interleave2(A, B, 'row') 
C = [1 2 
     5 6 
     3 4 
     7 8] 
```

2) 交错矩阵列

```
C = interleave2(A, B, 'col') 
C = [1 5 2 6 
     3 7 4 8] 
```

3）交织向量（注意：输入向量不必是相同的方向）

```
A = [1 2 3 4] B = [5 6 7 8 9]' 
C = interleave2(A, B) 
C = [1 5 2 6 3 7 4 8 9]' 
```

4) 交织 >2 个矩阵

```
A = [1 2;3 4] B = [5 6;7 8] 
C = [9 10;11 12] D = [13 14;15 16]

E = interleave2(A, B, C, D, 'col') 
E = [1 5 9 13 2 6 10 14 
     3 7 11 15 4 8 12 16] 
```

5) 将 2 个矩阵的列与不相等的列交错

```
A = [1 2;3 4] 
B = [5 6 7 8;9 10 11 12] 
C = interleave2(A, B, 'col') 
C = [1 5 2 6 7 8 
     3 9 4 10 11 12] 
```

6) 交织 >2 个长度不等的向量

```
A = [1 2 3 4] B = [5 6 7] 
C = [8 9 10 11 12 13] 
D = interleave2(A, B, C) 
D = [1 5 8 2 6 9 3 7 10 4 11 12 13] 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-12-10T22:24:13.073

对于最简单的情况，有一个非常“优雅”的解决方案，如[this answer](https://stackoverflow.com/a/17766906/1000257 "使用 kron 交错矩阵") to a similar question所述。

```
a = [9 8 7];
b = [1 2 3];
output = kron(a, [1 0]) + kron(b, [0 1]); 
```

如答案中所述，请注意，这**效率较低**，但可能比仅交错**更通用**，因为它使用在两个矩阵之间定义明确的[Kronecker乘积。](http://en.wikipedia.org/wiki/Kronecker_product "克罗内克产品")

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-11T15:06:24.167

Octave 是一个免费的开源 MatLab 逆向工程，其功能和语言在大多数情况下是相同的。但是，如果您发现自己在 Octave 中编码，您可以使用下面的代码来交错两个（实值）行向量`x`和`y`：

```
[x;y](:)' 
```

警告：这是 Octave 代码，在 MatLab 中不起作用。

# paypal - PayPal Permissions API

> ID：10316305
> 
> 赞同：0
> 
> 时间：2012-04-25T13:05:19.053
> 
> 标签：paypal

I am trying to set up permissions so that when clients want to use my PayPal integration service, I take them through the process of giving my software permission to make express checkout payments on their behalf.

So far, I have followed these steps (I am using the PayPal permissions SDK for .Net):

1.  Use requestPermissions to add the "EXPRESS_CHECKOUT" permission to return the access token.
2.  Use getAccessToken (passing the token and verification code) to obtain the token secret
3.  I then store the token and token secret for future payments.
4.  I attempt to test a payment using the sandbox environment using the ProfileFactory.createPermissionAPIProfile() and generating the signature using "com.paypal.sdk.core.OauthSignature.getAuthHeader". One thing I am not completely sure of here is what is passed as the API URL, I am passing "https://api.sandbox.paypal.com/2.0/"

Now, when I do this and call "SetExpressCheckout", I get an error message saying I don't have permission.

So, I wanted to debug this to test what permissions I have, so I call GetPermissions passing the token but the response object is null? This is really odd, I would expect an error if there was a problem, I cannot see any reason why a null value is returned?

Anyone can help point me in the right direction? Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:44:18.547

我们使用 NVP API 并代表第三方执行 API 调用，您必须在 API 请求的主题中发送第三方的 PayPal ID。SOAP API 具有相同的元素。

API 文档说这是 authorizing_account_emailaddress，尽管我们发送了 PayPal ID 并且有效。

# c - 如何理解 C99 标准语法

> ID：10316307
> 
> 赞同：3
> 
> 时间：2012-04-25T13:05:22.343
> 
> 标签：c, c99, iso

我不太明白 C99 中的语法是什么意思。这里所说的 C99 是指 ISO/IEC 9899:1999。好吧，我认为语法语法部分自 ANSI C、C89 以来变化不大。

[以这个问题](https://stackoverflow.com/questions/9408127/c99-associativity-for-operators-where-is-it-specified)为例：

```
6.5.5 Multiplicative operators
  Syntax
    multiplicative-expression:
      cast-expression
      multiplicative-expression * cast-expression
      multiplicative-expression / cast-expression
      multiplicative-expression % cast-expression

  Constraints

Each of the operands shall have arithmetic type. The operands of the % operator
shall have integer type.

  Semantics

The usual arithmetic conversions are performed on the operands.
The result of the binary * operator is the product of the operands.
The result of the / operator is the quotient 
```

我想知道为什么在乘法运算符的语法中我们有一个“cast-expression”？这个语法可以暗示什么语法？在[那个问题](https://stackoverflow.com/questions/9408127/c99-associativity-for-operators-where-is-it-specified)中@Avi 说

```
a*b*c 
```

“c 必须被解析为强制转换表达式”，我不太明白这一点。

再举一个c99 6.6.1的例子，常量表达式的语法

```
Syntax
   constant-expression:
       conditional-expression 
```

为什么这个条件表达式会出现在这里？有人可以告诉我如何解释这些语法吗？谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:15:36.247

> 我想知道为什么在乘法运算符的语法中我们有一个“cast-expression”？

这是上下文无关文法中使用的典型设备，用于指定具有相同优先级的运算符的分组并首先指定优先级（好吧，这并不精确；文法可以表达的不仅仅是为运算符分配优先级，但如果我们只想在 CFG 中表达简单的基于优先级的表达式评估，我们会这样做）。无论如何都与;`cast-expression`无关 `multiplicative-expression`它只是“任何不包含乘法运算或低优先级运算的表达式”。

那么，这将如何工作：

1.  相同优先级运算符的分组：

    ```
    1*2*3*4 
    ```

    在这种情况下，有以下分组可能性（仅限顶级）：

    *   `1*(2*3*4)`
    *   `(1*2)*(3*4)`
    *   `(1*2*3)*4`

    通过查看语法，我们知道左边的任何东西都`*`必须是 a `cast-expression`，也就是说，*不能*包含 (unparenthesized) `*`。因此，只有第三种选择是可行的

2.  优先级。想象一下表情

    ```
    a*b+c 
    ```

    它可以被解析为

    *   `(a*b)+c`
    *   `a*(b+c)`

    但是，我们知道`cast-expression`右侧的 不能包含（未加括号的）`+`（或者如果我们检查它，我们可以从语法中解决它）。这使得第一个选项成为唯一可能的选择。

    另一种表达方式

    ```
    a+b*c 
    ```

    反过来，可以被解析为

    *   `(a+b)*c`
    *   `a+(b*c)`

    但是， `multiplicative-expression`左侧的`*`也不能包含（未加括号）（留作`+`读者练习）。因此，只有第二种选择是可行的。

关于条件表达式的问题：语法规则不允许将任何等效或低于赋值运算符的内容解析为`constant-expression`s。因此，`a=b`, `a,b`,`a+=b`不可能是常量表达式，而`a+b`,`a[b]`也`a(b)`可能是。请注意，它不允许例如。`(a=b)`; 您必须查看指定什么是常量表达式的实际子句，这比语法更限制了常量表达式的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:49:03.400

> 我想知道为什么在乘法运算符的语法中我们有一个“cast-expression”？

让我们从一个更简单的问题和相应更简单的语法开始。我们将定义一个语法来表示一个简单的算术表达式（`1 + 2`、`3 * (4 - 2)`、`42`等）。由于我们希望一个普通的数字常量成为一个合法的表达式，我们必须定义我们的语法，使得有一条从根非终结*表达式*到简单*数字*的路径：

```
*表达式*：
    *术语*  |
    *术语加法表达式*

*术语*：
    *因子*|
    *因子多操作项*

*因素*：
    *数字*|
    （*表达*） 

```

*像number*、*add-op*和*mul-op*这样的非终结符应该是显而易见的。

`42`是 一个*数*, 是*要素*的 产物 , 是*术语的 产物 , 是**表达*的 产物. 因此`42`，根据我们的语法，这是一个合法的算术表达式；*term*和*factor*是这条路径的中间产物。

C 语法中也发生了类似的事情。强制*转换表达式是**表达式*和​​某个终结符（例如标识符或数字常量）之间的中间产生式。我们的简单语法定义了 2 级优先级；C 语法定义了 16 个不同的优先级，并带有更多的运算符，因此沿着这条路径有更多的中间产品。我们希望强制转换*表达式*比*乘法表达式*具有更高级别的优先级，这样我们就可以处理类似的情况

```
x = a * (int) b; 
```

适当地。

# flash - 如何将 Flash 对象包含到 xhtml 页面中

> ID：10316310
> 
> 赞同：1
> 
> 时间：2012-04-25T13:05:26.147
> 
> 标签：flash, xhtml

我正在尝试创建一个项目，我想在其中包含一个 falsh 对象。我有一个名为 movie.swf 的 .swf 文件。
现在在我的 xhtml 页面中，我编写了这段代码

```
<div id="movie">
  here i want flash content
</div> 
```

flash 内容应该写在哪里，
我的脚本是

```
<script type="text/javascript">
   var so = new SWFObject("movie.swf", "movie", "400", "200", "8", "#336699");
   so.write("movie");
</script> 
```

但这不起作用。
请找出代码的错误，或者我还有什么要写的。
谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:45:28.477

您是否已将以下内容包含在您的`<head></head>`?

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script> 
```

您需要允许您的 SWFObject 通过该[Google AJAX 库 API](http://code.google.com/p/swfobject/wiki/hosted_library)或本地访问 swfobject.js 文件。这是进一步的文档：

[如何使用 SWFObject 动态发布嵌入 Flash Player 内容](http://code.google.com/p/swfobject/wiki/documentation)

# php - Responding to and sending asynchronous GET requests

> ID：10316312
> 
> 赞同：0
> 
> 时间：2012-04-25T13:05:34.353
> 
> 标签：php

I want to make an application that will be receiving get requests and respond with xml. Here's the scenario:

User comes to site_a.com?site.phpid=abc, from there I have to make a GET request to site_b.com/checker.php?id=abc.

How to make a GET request without user leaving the page?

Inside checker.php I have to respond with xml depending on that id

```
if(isset($_GET['id'])){
  if($_GET['id']=='abc'){
    // respond with xml
 }
} 
```

and then is site.php I have to receive that xml.

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:09:25.293

最简单的方法，您可以使用[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)：

```
//site.php?id=abc
$xmlResponse = file_get_contents("site_b.com/checker.php?id=abc"); 
```

但确保`allow_url_fopen`可以是真的。
[http://php.net/manual/en/filesystem.configuration.php](http://php.net/manual/en/filesystem.configuration.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T13:11:53.110

You could use `curl`.

```
$ch = curl_init(); 
curl_setopt($ch, CURLOPT_URL, 'http://site_b.com/checker.php?id=' . $id); 
curl_setopt($ch, CURLOPT_HEADER, 1); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
$xml = curl_exec(); 
curl_close($ch); 
```

[curl docs](http://php.net/manual/en/book.curl.php)

# sencha-touch-2 - 如何在 WebKit 浏览器上全屏显示 Sencha Touch 2 页面？

> ID：10316314
> 
> 赞同：4
> 
> 时间：2012-04-25T13:05:41.783
> 
> 标签：sencha-touch-2

当我在我的 Android-WebKit 浏览器上访问[http://www.wikpic.com/](http://www.wikpic.com/)时，页面会全屏呈现，换句话说，显示 URL 的导航栏会消失。我怎样才能做到这一点？

我试过这个选项，但它不起作用：

```
Ext.create('MyApp.view.MyList', {fullscreen: true}); 
```

这是我的 app.js 代码：

```
Ext.Loader.setConfig({
    enabled: true
});

Ext.application({
    models: [
        'Contacto'
    ],
    stores: [
        'Contactos'
    ],
    views: [
        'MyList'
    ],
    name: 'MyApp',

    launch: function() {

    Ext.create('MyApp.view.MyList', {fullscreen: true});
    }

}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T15:26:27.580

您正在寻找视口的[autoMaximize](http://docs.sencha.com/touch/2-0/#!/api/Ext.viewport.Default-cfg-autoMaximize)配置：

```
Ext.application({
    viewport: {
        autoMaximize: true
    },
    ...
}); 
```

请记住，它可能会导致一些问题（取自 Sencha 文档）：

*   启用此功能后，所有设备上的方向更改性能都会大大降低。
*   在某些设备（主要是 Android）上，这有时会在更改默认浏览器缩放设置时导致问题。
*   将手机包裹在原生外壳中时，您可能会看到一个空白屏幕。

# java - Invalid escape sequence for regex to match URL in Java

> ID：10316315
> 
> 赞同：1
> 
> 时间：2012-04-25T13:05:45.883
> 
> 标签：java, regex

I try to write regex to match URL in Java. I found the regex on the internet and it works fine in the online regex editor. When i try to run it on the eclipse, it gives following error : Invalid escape sequence (valid ones are \b \t \n \f \r \" \' \ )

```
(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))? 
```

How can i solve this problem?

Thanks in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T13:08:18.240

请注意，在Java 字符串中，您必须转义反斜杠（即`\`会产生字符串文字`"\\"`）。因此，表达式应如下所示：

```
String expression = "(http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?"; 
```

# perl - Bugzilla throwing error DBD:Pg fail in DynaLoader?

> ID：10316317
> 
> 赞同：2
> 
> 时间：2012-04-25T13:05:53.883
> 
> 标签：perl, bugzilla, dbd

The following error shown when I access bugzilla:

```
pg' is not a valid choice for $db_driver in  localconfig: 
  Can't load 'lib/i386-linux-thread-multi/auto/DBD/Pg/Pg.so' for module DBD::Pg: 
    libpq.so.5: failed to map segment from shared object: 
      Permission denied at /usr/lib/perl5/5.8.8/i386-linux-thread-multi/DynaLoader.pm line 230\. 
  at Bugzilla/DB/Pg.pm line 47

Compilation failed in require at Bugzilla/DB/Pg.pm line 47.
BEGIN failed--compilation aborted at Bugzilla/DB/Pg.pm line 47.
Compilation failed in require at (eval 952) line 3. 
```

What can I do to fix this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:18:21.080

设置正确的 SELinux 上下文，不要忘记设置环境变量 LD_LIBRARY_PATH。通过在 httpd.conf 中设置它修复了我的问题，如下所示： SetEnv LD_LIBRARY_PATH="/var/www/html/bugzilla-4.2.1/lib/i386-linux-thread-multi/auto/DBD/Pg/Pg.so" .

参考： [stackoverflow讨论链接](https://stackoverflow.com/questions/2110435/why-does-installing-dbdpg-fail-in-dynaloader) 和[bugzilla google groups链接](https://groups.google.com/forum/#!searchin/mozilla.support.bugzilla/libpq.so.5/mozilla.support.bugzilla/2TLRSh4f9HU/xrDAstodBmoJ)

# html - 批量，将 wget 下载的未缩进 html 文档转换为带有缩进行的 html

> ID：10316322
> 
> 赞同：0
> 
> 时间：2012-04-25T13:06:05.300
> 
> 标签：html, windows, text, batch-file, wget

也许这是一个罕见的问题......

例如，我使用以下命令下载了一个 html：

```
Wget http://mp3skull.com/mp3/coone_your_dj.html 
```

然后，wget 生成一个没有缩进的 html 文档，如下所示：

![在此处输入图像描述](../Images/d5b237b7483b8d54da537b2d94b6238a.png)

我需要一个带有缩进行和正确sintax的html文档，如下所示：

![在此处输入图像描述](../Images/07267c0977c303ce46a4155d5684df20.png)

由于我的文本编辑器识别语法，我可以进行手动转换，复制第一个文本（第一个图像），然后将其保存到一个新的 html 文件（第二个图像），但我需要一个 APP 或代码之类的东西来做这项工作在 BATCH 中自动完成。

有什么可以帮助我的吗？

PD：我的编辑器（Sublime Text）没有控制台参数。

PD 2：复制图片链接并在新的浏览器窗口中打开以查看图片的最大尺寸。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:25:23.613

[http://jsbeautifier.org/](http://jsbeautifier.org/)在缩进 html 和 xml 标签以及 javascript 方面做得很好。

如果您需要离线进行，那么[这](http://www.arachnoid.com/linux/beautify_bash/bash_beautify.rb.html)看起来很有希望。

# c# - c#正则表达式用动态匹配替换问题？

> ID：10316323
> 
> 赞同：0
> 
> 时间：2012-04-25T13:06:09.177
> 
> 标签：c#, regex, c#-4.0

所以我有一个长字符串，其中有“保留字”，我需要用它们从数据库中的值替换。

```
eg.

string text = "You're salary for the month of ((month)) is ((salary)) 
```

现在我所做的是匹配每个保留字，然后搜索我的数据集，然后用它们的值替换它们

```
Regex ex = new Regex(@"(?<=\(\().*?(?=\)\))");
foreach(Match match in ex.Matches(body)){           
                string valuefromset = values.FirstOrDefault(val => val.Variable == match.Value).Value;
                    var pattern = @"(("+match.Value+"))";
                    body = Regex.Replace(body, pattern, valuefromset, RegexOptions.IgnoreCase);
                }
            } 
```

现在发生的事情是这样的

```
text = "You're salary for the month of ((April)) is (($10000))"; 
```

我不确定为什么模式只会得到单词而不是标签。我应该使用另一个正则表达式但具有特定值吗？拥有特定的保留字在模式中很重要，这就是我使用它的原因，我不确定我在做什么。

任何帮助表示赞赏。谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T13:16:04.077

那是因为你没有逃避替换正则表达式中的斜杠

```
var pattern = @"(("+match.Value+"))";
                ^^               ^^ 
```

你不匹配他们，你创建了两个组。尝试这个：

```
var pattern = @"\(\("+match.Value+"\)\)"; 
```

# parsing - 使用 parser-combinators 解析 Scala 句子

> ID：10316327
> 
> 赞同：0
> 
> 时间：2012-04-25T13:06:34.337
> 
> 标签：parsing, scala, dsl, parser-combinators

如何有效地解析（没有太多代码混乱）语句，如下所示？关键字/分隔符放在 [] 内。

德里经理 [for] The Company Pvt Ltd. [从] 2009 年 1 月 [至] 2012 年 1 月。

将使用解析组合器从文本中提取人名、公司名称和日期范围。（预期输出显示在底部）

以下是为上述内容编写的代码 -

```
 case class CompanyWithMonthDateRange(company:String, position:String, dateRange:List[MonthYear])

    case class MonthYear(month:String, year:Int)

    object CompanyParser1 extends RegexParsers {
      override type Elem = Char
      override def skipWhitespace = false
      def keywords: Parser[String] = "for" | "in" | "with" |"at" | "from" | "pvt"|"ltd" | "company" | "co" | "limited" | "inc" | "corporation" | "jan" |\
     "feb" | "mar" | "apr" | "may" | "jun" | "jul" | "aug" | "sep" | "nov" | "dec" | "to" | "till" | "until" | "upto"

      val date = ("""\d\d\d\d""".r | """\d\d""".r)
      val integer     = ("""(0|[1-9]\d*)""".r) ^^ { _.toInt }
      val comma = ("""\,""".r)
      val quote = ("""[\'\"]+""".r)
      val underscore  = ("""\_""".r)
      val dot = ("""\.""".r)
      val space = ("""\s+""".r) ^^ {case _ => ""}
      val colon = (""":""".r)
      val ampersand = ("""(\&|and)""".r)
      val hyphen = ("""\-""".r)
      val brackets = ("""[\(\)]+""".r)
      val newline = ("""[\n\r]""".r)
      val months = ("""(jan|feb|mar|apr|may|jun|jul|aug|sep|nov|dec)""".r)
      val toTillUntil = ("""(to|till|until|upto)""".r)
      val asWord = ("""(as)""".r)
      val fromWord = ("""from""".r)
      val forWithAt = ("""(in|for|with|at)""".r)
      val companyExt = ("""(pvt|ltd|company|co|limited|inc|corporation)""".r)
      val alphabets = not(keywords)~"""[a-zA-Z]+""".r
      val name = not(keywords)~"""[a-zA-Z][a-zA-Z\,\-\'\&\(\)]+\s+""".r

      def possibleCompanyExts = companyExt <~ (dot *)  ^^ {_.toString.trim}
      def alphabetsExt = ((alphabets ~ ((quote | ampersand | hyphen | brackets | underscore | comma) *) <~ (space *))+) ^^ { case a => a.toString.trim}
      def companyNameExt = (alphabetsExt <~ (space *) <~ (possibleCompanyExts+)) ^^ {_.toString
      }
      def companyName = alphabetsExt *
      def entityName = (alphabetsExt+) ^^ {case l => l.map(s => s.trim).mkString(" ")}
      def dateWithEndingChars = date <~ ((comma | quote | dot | newline) *) <~ (space *) ^^ {_.toInt}
      def monthWithEndingChars = months <~ ((comma | quote | dot | newline) *) <~ (space *) ^^ { _.toString}
      def monthWithDate = monthWithEndingChars ~ dateWithEndingChars ^^ { case a~b => MonthYear(a,b)}
      def monthDateRange = monthWithDate ~ (space *) ~ toTillUntil ~ (space *) ~ monthWithDate ^^ { case a~s1~b~s2~c => List(a,c)}
      def companyWithMonthDateRange = (companyNameExt ~ (space *) ~ monthDateRange) ^^ {
        case a~b~c => CompanyWithMonthDateRange(company = a, dateRange = c, position = "")
      }
      def positionWithCompanyWithMonthDateRange = ((name+) ~ (space *) ~ forWithAt ~ (space *) ~ companyWithMonthDateRange) ^^ {             
        case a~s1~b~s2~c => c.copy(position = a.mkString(","))

      }
    def apply(input:String) =     {
        parseAll(positionWithCompanyWithMonthDateRange,input) match {
        case Success(lup,_) => println(lup)
        case x => println(x)
        }
      }
    } 
```

输出应该类似于

```
 CompanyWithMonthDateRange(List(((()~Company)~List()), ((()~fd)~List()), ((()~India)~List('))),(()~Manager, ),(()~Delhi ),List(MonthYear(mar,2010), MonthYear(jul,2012))) 
```

另外，如何删除上面文本中出现的不需要的“~”。

谢谢，帕万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:46:58.880

我不是想把它写成你真正问题的完整解决方案，只是把句子解析成你提供的数据结构，我不确定它是否有帮助，只是作为参考。

在您的`CompanyWithMonthDateRange`中，我没有看到将提取的名称放在哪里，所以我将其省略，添加它应该是微不足道的。

```
object CompParser extends RegexParsers {
  val For = "[for]"
  val From = "[from]"
  val To = "[to]"
  val Keyword = For | From | To
  val Def = """(?m)(?<=^|\]).*?(?=\[|(\.\s*[\n\r]+))""".r
  val End = """.""".r
  val Construct = opt(Def) ~ Keyword ~ Def ^^ {
    case p ~ `For` ~ s => {
      val arr = p.getOrElse("").split(",")
      val t2 = if (arr.length == 2) arr(0) -> arr(1) else ("", "")
      ("pos&com", (t2._1, s.toString))
    }
    case p ~ `From` ~ s => {
      val arr = s split ","
      val t2 = if (arr.length == 2) arr(0) -> arr(1) else ("", "")
      ("from", (t2._1, t2._2))
    }
    case p ~ `To` ~ s => {
      val arr = s split ","
      val t2 = if (arr.length == 2) arr(0) -> arr(1) else ("", "")
      ("to", (t2._1, t2._2))
    }
  }
  val Statement = rep(Construct) ^^ (Map() ++ _) ^^ { m =>
    if (m.size == 3) {
      val from = new MonthYear(m.get("from").head._1, m.get("from").head._2.trim.toInt)
      val to = new MonthYear(m.get("to").head._1, m.get("to").head._2.trim.toInt)
      val pos = m.get("pos&com").head._1
      val com = m.get("pos&com").head._2
      new Some(CompanyWithMonthDateRange(com, pos, List(from, to)))
    } else None
  }

  val Statements = rep(Statement <~ End)

  def apply(in: String) = {
    parseAll(Statements, in) match {
      case Success(r, i) => println(r)
      case failure => failure
    }
  }
} 
```

并且解析器在换行符处停止，这是解析器的测试：

```
object TestP extends App {
  val inStr1 = """ 
    Manager, Delhi [for] The Company Pvt Ltd. [from] Jan, 2009 [to] Jan, 2012\. 
   """
  val inStr2 = """ 
    Manager, Delhi [for] The Company Pvt Ltd. [from] Jan, 2009 [to] Jan, 2012.
    Employee, Kate [for] The Company Pvt Ltd. [from] Feb, 2010 [to] Jun, 2012\.  
    HR, Jane       [for] The Company Pvt Ltd. [from] May, 2010 [to] July, 2012\. 
    """
  CompParser(inStr1)
  CompParser(inStr2)
} 
```

输出是：inStr1：

> 列表（一些（CompanyWithMonthDateRange（The Company Pvt Ltd.，经理，列表（月年（2009 年 1 月），月年（2012 年 1 月）））））

inStr2:

> List(Some(CompanyWithMonthDateRange(The Company Pvt Ltd. ,Manager,List(MonthYear(Jan,2009), MonthYear(Jan,2012)))), Some(CompanyWithMonthDateRange(The Company Pvt Ltd.,Employee,List(MonthYear(Feb) ,2010), MonthYear(Jun,2012)))), Some(CompanyWithMonthDateRange(The Company Pvt Ltd.,HR,List(MonthYear(May,2010), MonthYear(July,2012)))))

# javascript - JQuery Tablesorter没有对列进行排序

> ID：10316331
> 
> 赞同：0
> 
> 时间：2012-04-25T13:06:51.250
> 
> 标签：javascript, vb.net, model-view-controller, tablesorter

我正在使用 JQuery 表排序器插件，并且在对我的两列进行排序时遇到问题。在源代码中，字段中的列显示 0.00，这很可能是 tablesorter 似乎没有做任何事情的原因。但是，这些列字段是使用 javascript 函数计算的，因此在查看屏幕时这些字段中实际上存在值。关于如何让 tablesorter 对这些列进行排序的任何想法？每次服务的成本和利润率列是我在下面苦苦挣扎的两个：

```
<div id="plate_page_bottom">
    <table cellpadding="0" cellspacing="0" class="tablesorter">
        <thead>
            <tr>
                <th>Item #</th>
                <th>Description</th>
                <th>Brand</th>
                <th>Size</th>
                <th>Portion Per Case</th>
                <th>Case Cost</th>
                <th>Portions Per Serving</th>
                <th>Portion Size</th>
                <th>Cost Per Serving</th>
                <th>Usage %</th>
                <th>Margin</th>
            </tr>
        </thead>
        <tbody>
            @For Each item In Model.Items
                @<tr id="@item.ID">                          
                    <td>@item.ItemID</td>
                    <td>@item.Description</td>
                    <td>@item.Brand</td>
                    <td>@item.Size</td>
                    <td>@item.CasePortion</td>
                    <td>@item.Price</td>
                    <td>@item.ServingPortion</td>
                    <td>@item.PortionSize</td>
                    <td>$0.00</td>
                    <td>@item.Usage</td>
                    <td>0.00</td>
                </tr>
                index = index + 1
            Next
        </tbody>
    </table>
</div> 
```

```
End Using
<script src="@Url.Content("~/Scripts/jquery.tablesorter.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.tablesorter.mb.parsers.js")" type="text/javascript"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.formatCurrency-1.4.0.min.js")"></script>
<script type="text/javascript">
$(function () {
    $('.tablesorter').tablesorter({
        widgets: ['zebra'],
        widgetZebra: { css: ['alt-even-class', 'alt-odd-class'] }
    });

    calculateAll();

});

function calculateAll() {

    $.each($('.tablesorter tbody tr'), function (index, row) {
        calculateRow(row);
    });

    calculateSummary();

    $.each($('.tablesorter tbody tr'), function (index, row) {
        calculateMargin(row);
    });
}

function calculateRow(row) {
    var casePortion = $(row).find('td:nth(4)').html();
    var caseCost = $(row).find('td:nth(5)').html();
    var servingPortion = $(row).find('td:nth(6)').html();
    var usage = $(row).find('td:nth(9)').html();

    casePortion = (isNaN(casePortion) || casePortion.length <= 0) ? 0 : parseFloat(casePortion);
    caseCost = (isNaN(caseCost) || caseCost.length <= 0) ? 0 : parseFloat(caseCost);
    servingPortion = (isNaN(servingPortion) || servingPortion <= 0) ?  0 : parseFloat(servingPortion);
    usage = (isNaN(usage) || usage <= 0) ? 0 : parseFloat(usage);

    if (casePortion == 0 || caseCost == 0 || servingPortion == 0 || usage == 0) {
        $(row).find('td:nth(8)').html('$0.00');
        $(row).find('td:nth(10)').html('0.00');
    } else {
        var costServing = (caseCost / casePortion) * servingPortion * (usage / 100);
        $(row).find('td:nth(8)').html(costServing).formatCurrency();
    }
}

function calculateSummary() {
    var totalCost = 0;
    $.each($('.tablesorter tbody tr'), function (index, row) {
        totalCost = totalCost + parseFloat($(row).find('td:nth(8)').html().replace('$', ''));
    });
    $('#totalCost').html(totalCost).formatCurrency();

    var price = parseFloat($('#platePrice').html().replace('$', ''));
    if (isNaN(price) || price <= 0) {
        $('#foodPercent').html('0%');
        $('#plateProfit').html('$0.00');
    } else {
        var foodPercent = totalCost / price;
        $('#foodPercent').html(roundNumber(foodPercent, 2) + '%');
        var plateProfit = price - totalCost;
        $('#plateProfit').html(plateProfit).formatCurrency();
    }

}

function calculateMargin(row) {

    var costServing = $(row).find('td:nth(8)').html().replace('$', '');
    var totalCost = $('#totalCost').html().replace('$', '');

    costServing = (isNaN(costServing) || costServing.length <= 0) ? 0 : parseFloat(costServing);
    totalCost = (isNaN(totalCost) || totalCost.length <= 0) ? 0 : parseFloat(totalCost);

    if (costServing <= 0 || totalCost <= 0) {
        $(row).find('td:nth(10)').html('0.00');
    } else {
        var margin = ((costServing / totalCost) * 100);

        $(row).find('td:nth(10)').html(roundNumber(margin, 2) + '%');
    }
}

function roundNumber(num, dec) {
    var result = Math.round(num * Math.pow(10, dec)) / Math.pow(10, dec);
    return result.toFixed(dec);
} 
```

谢谢你的帮助！！

# java - 如何从 AsyncTask 中的回调函数访问父类视图？

> ID：10316335
> 
> 赞同：1
> 
> 时间：2012-04-25T13:07:08.960
> 
> 标签：java, android, callback, android-asynctask, parent

这是我的示例代码。

```
public class test extends Activity {
  private TextView tv;

  public class Blap extends AsyncTask<String,String,Boolean>{
    private test parent;
    @Override
    protected Boolean doInBackground(String... options) {
        this.auth(options[0],options[1]);
        parent.aresponse(res);
        return true;
    }
    public Blap(test a){
        this.parent = a;
    }
    public auth(String login, String password){
        //process auth
    }
}

@Override
public void onCreate(Bundle savedInstanceState) {
    //work...
}

public void buttonclick(View v){
    tv = new TextView(this);
    new Blap(this).execute(editText1.getText().toString(),editText2.getText().toString());
    setContentView(tv);
}
public void aresponse(String rs){
    tv.setText(rs);
}
} 
```

但是当调用 aresponse 时，我遇到了一个异常：只有创建视图层次结构的原始线程才能触摸它的视图。如何正确等待异步操作完成并继续处理所需的操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:10:49.107

只需更改您的方法`aresponse`如下：

```
public void aresponse(String rs){
    runOnUiThread(new Runnable() {
        @Override
        public void run() {
            tv.setText(rs);             
        }
    });
} 
```

这样，无论何时何地调用此方法，它都会在 UI 线程上更新您的 TextView。

此外，您还可以考虑从 AsyncTask 的 onPostExecute 方法调用此方法，该方法将毫无问题地运行它，但您可以选择 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T18:11:31.827

`AsyncTask`为您提供两种更新 UI 的可能性：

如果您想在执行任务的同时更新 UI `doInBackground()`（例如更新 a `ProgressBar`），您必须`publishProgress()`在方法内部调用`doInBackground()`。然后你必须在`onProgressUpdate()`方法中更新 UI。

如果要在任务完成时更新 UI，则必须在`onPostExecute()`方法中进行。

```
/** This method runs on another thread than the UI thread */
@Override
protected String doInBackground(String... _params) {
    for (int progressValue = 0; progressValue  < 100; progressValue++) {
        publishProgress(progressValue);
    }
}

/** This method runs on the UI thread */
@Override
protected void onProgressUpdate(Integer... progressValue) {
    // TODO Update your ProgressBar here
}

/**
 * Called after doInBackground() method
 * This method runs on the UI thread
 */
@Override
protected void onPostExecute(Boolean _result) {
   // TODO Update the UI thread with the final result
} 
```

在您的情况下，您应该使用 an`AsyncTask<String, String, String>`因为您需要`doInBackground()`返回一个字符串。然后你只需要处理结果`onPostExecute()`

```
public class test extends Activity {
    private TextView tv;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        //work...
    }

    public void buttonclick(View v){
        tv = new TextView(this);
        new Blap().execute(editText1.getText().toString(), editText2.getText().toString());
        setContentView(tv);
    }

    public class Blap extends AsyncTask<String, String, String> {
        private test parent;

        @Override
        protected String doInBackground(String... options) {
            this.auth(options[0], options[1]);
            String result = "my result";
            return result;
        }

        public auth(String login, String password){
            //process auth
        }

        @Override
        protected void onPostExecute(String _result) {
           tv.setText(_result);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:13:52.493

`AsyncTask`有一些在 UI 线程上自动调用的方法。覆盖`onPostExecute()`并`aresponse()`从那里调用。更多信息在这里：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# c# - DevExpress XtraGrid - 每行中的 ImageButton

> ID：10316337
> 
> 赞同：0
> 
> 时间：2012-04-25T13:07:26.113
> 
> 标签：c#, devexpress, xtragrid

我想为每一行添加一个自定义方法，即一个打开的详细信息表单，显示单击按钮的网格行的详细信息。

有什么简单的解决方案吗？

编辑：

我的代码样式按钮有什么问题？

```
Image img = imageList1.Images[5];
            repositoryItemButtonEdit1.Buttons.Clear();
            repositoryItemButtonEdit1.Buttons.Add(new EditorButton(ButtonPredefines.Left, "View Filter", 16, true, true, true, ImageLocation.Default, img));
            repositoryItemButtonEdit1.ButtonPressed += new ButtonPressedEventHandler(repositoryItemButtonEdit1_ButtonPressed); 
```

答案（使用字形）

```
Image img = imageList1.Images[5];
repositoryItemButtonEdit1.Buttons.Clear();
repositoryItemButtonEdit1.Buttons.Add(
    new EditorButton(
        ButtonPredefines.Glyph, 
        "", 
        16, 
        true, 
        true, 
        true, 
        ImageLocation.Default, 
        img
    )
 );
 repositoryItemButtonEdit1.ButtonPressed += newButtonPressedEventHandler(repositoryItemButtonEdit1_ButtonPressed); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:28:06.270

最简单的方法是添加一个`RepositoryItemButtonEdit`作为`ColumnEdit`列的。

确保`TextEdit`将 RepositoryItemButtonEdit 的属性设置为隐藏，并配置按钮属性，使其具有您的图像按钮。

然后处理`ButtonPressed Event`存储库项的。

一个简单的事件处理程序可能类似于：

C＃

```
private void RepositoryItemButtonEdit1_Click(object sender, System.EventArgs e)
{
    WhateverClass MyData = (WhateverClass)GridView1.GetFocusedRow();
    Form1 frmEdit = new Form1(MyData);
    frmEdit.Show();
} 
```

VB.net

```
Private Sub RepositoryItemButtonEdit1_Click(sender As Object, e As System.EventArgs) Handles RepositoryItemButtonEdit1.Click
    Dim MyData As WhateverClass= CType(GridView1.GetFocusedRow(), WhateverClass)
    Dim frmEdit As New Form1(MyData)
    frmEdit.Show()
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:31:32.787

只是上面答案的一些补充，因为我之前遇到了类似的问题。

1.  如果您想为 RepositoryItemButtonEdit 按钮使用 Image，请不要忘记将 Button 的 Kind 属性设置为 Glyph。
2.  如果您还想显示编辑器按钮的 Caption，则必须将 ImagePosition 设置为 MiddleCenter 以外的位置。
3.  我宁愿使用 ButtonClick 事件，并检查编辑器按钮的 Index 属性。
4.  [这个](http://www.devexpress.com/Support/Center/p/CB49331.aspx)链接描述了关于这个场景的一个有趣的情况。

希望它也会有所帮助。

问候，佐尔坦

# asp.net-mvc - 有没有办法使用实体框架动态查询具有相同表设计的多个表？

> ID：10316338
> 
> 赞同：1
> 
> 时间：2012-04-25T13:07:30.940
> 
> 标签：asp.net-mvc, entity-framework

我正在研究一个不是财产设计的过时数据仓库。不幸的是，由于一些限制，我无法重新设计整个数据库，因此我正在使用多个表来保存特定年份的信息。我需要一次查询 3 个表（每年的今天日期为 3 个不同的年份）。有没有办法在不知道运行时使用的表的情况下创建这个查询？我正在尝试在实体框架中执行此操作，因为应用程序正在移植到 ASP.NET MVC 3，但我只在表是静态的时候使用实体框架。

下面是我正在使用的表结构的示例。

表：

```
INFO2008
INFO2009
INFO2010
INFO2011
INFO2012 
```

所有表格都使用相同的表格设计：

```
ID (INT)
FirstName (VARCHAR)
LastName (VARCHAR)
ZipCode (VARCHAR)
Date (DATETIME) 
```

现在，如果我今天的日期是 2012 年 1 月 1 日，我需要一个查询，该查询将从 INFO2012 中提取 2012 年 1 月 1 日的所有行数，从 INFO2011 中提取 2011 年 1 月 1 日和 2010 年 1 月 1 日从信息 2010。每个表只保存当年的记录列表。所以表名（带年份）需要在运行时动态计算出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:46:29.550

我能够使用以下方法完成此操作：

```
Context.CreateQuery<EntityObject>(String.Format("SELECT VALUE t FROM {0}", "INFO2011")); 
```

这样，我可以将 INFO2011 切换到我需要从中提取结果的任何当前表年份。此外，使用它，我也可以动态地将 ObjectParameters 添加到 SQL 语句中。为了访问视图上的字段，我创建了一个所有实体都继承的接口，这样即使我们不知道视图中使用的表，该接口也允许我从任何表中提取值，因为它们所有共享相同的设计。

# iphone - uilabel 圆形文本

> ID：10316339
> 
> 赞同：1
> 
> 时间：2012-04-25T13:07:38.910
> 
> 标签：iphone, uilabel

*这是我的代码，但没有得到完整的标签*

//代码在这里

```
UILabel * lblWish= [[UILabel alloc] initWithFrame:CGRectMake(x+25,318, 290, 100)];
lblWish.transform = CGAffineTransformMakeRotation( M_PI/90);
lblWish.textColor=[UIColor whiteColor];
[lblWish setFont:[UIFont fontWithName:@"Dadhand" size:38]];
lblWish.lineBreakMode = UILineBreakModeWordWrap;
lblWish.numberOfLines = 2;//Dynamic
lblWish.backgroundColor = [UIColor clearColor];
lblWish.shadowColor = [UIColor colorWithWhite:1.0 alpha:0.4];
lblWish.shadowOffset = CGSizeMake(1, 1);
lblWish.text = [ArylblWish objectAtIndex:i]

[self.view addSubview:lblWish]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:08:40.090

我想你想要圆角。您需要添加`QuartzCore Framework`并在添加此代码后： `lblWish.layer.cornerRadius=50;`

# android - 如何将谷歌地图从卫星视图更改为交通视图

> ID：10316340
> 
> 赞同：2
> 
> 时间：2012-04-25T13:07:41.113
> 
> 标签：android

是否可以将选项菜单添加到谷歌地图？

即通过选择选项菜单将地图从卫星视图更改为交通视图？

任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:22:46.340

您可以通过在选项菜单代码中输入以下代码来完成：

```
mapView.setSatellite(false);
mapView.setTraffic(true); 
```

要创建 OptionMenu，请按照以下步骤操作：

放代码：

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        menu.add(0, 1, 0, "Satelite");
        menu.add(0, 2, 0, "Traffic");
                return true;
    } 
```

并输入以下代码：

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        super.onOptionsItemSelected(item);
        switch (item.getItemId()) {
        case 1:
            mapView.setSatellite(true);
                        mapView.setTraffic(false); 
            return true;

        case 2:
                    mapView.setSatellite(false);
                    mapView.setTraffic(true); 
            return true;

        default:
            return false;
        }
    } 
```

希望它会帮助你。

享受。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:26:46.810

较新版本的 Android 中已弃用选项菜单。查看[Android 操作栏文档](http://developer.android.com/design/patterns/actionbar.html "操作栏")。您需要做的就是设置一个带有按钮的操作栏，用于在卫星和流量之间切换。这些函数调用是微不足道的。

# c# - 动态对象 - 运行时报告字段不存在但可以在调试器中看到它？

> ID：10316344
> 
> 赞同：6
> 
> 时间：2012-04-25T13:07:58.997
> 
> 标签：c#, .net, dynamic

**编辑：重新启动视觉工作室解决了这个问题，没有代码更改。**

* * *

我有一个使用动态类型和 expando 对象的 ConfigSection 处理程序。测试失败，报告**'object' 不包含 'SportName' 的定义**。我试图在控制台中复制，将 ConfigSection 处理程序排除在等式之外，但看起来等效的代码可以正常工作。我难住了。

请参阅下面的测试、ConfigurationSectionHandler 和配置 xml

```
public class SportSection : IConfigurationSectionHandler
{
    public object Create(object parent, object configContext, XmlNode section)
    {
        var doc = XDocument.Parse(section.OuterXml);
        var root = (XElement)doc.FirstNode;

        try
        {
            var sportList = root.Element("sportList").Elements("sport").Select(ToSport);

            dynamic config = new ExpandoObject();
            config.SportList = sportList;

            return config;
        }
        catch (Exception ex)
        {
            throw new ConfigurationErrorsException("Invalid SportSection configuration", ex);
        }
    }

    private static dynamic ToSport(XElement sportElement)
    {
        try
        {
            var getAttrib = new Func<XElement, string, string>((x, atr) => x.Attribute(atr).Value);
            var getDictionary =
                new Func<IEnumerable<XElement>, IDictionary<string, string>>(elems => elems.ToDictionary(x => x.Attribute("name").Value, y => y.Attribute("value").Value));

            return new
            {
                SportName = sportElement.Attribute("name").Value,
                EventProperties = getDictionary(sportElement.Element("eventProperties").Elements("property")),
                CompetitionProperties = getDictionary(sportElement.Element("competitionProperties").Elements("property")),
                MappedMarkets = sportElement.Element("mapping").Elements("market").Select(x => new MappedMarket() { Type = getAttrib(x, "type"), MappedType = getAttrib(x, "mappedType") })
            };
        }
        catch (Exception ex)
        {

            throw ex;
        }

    }
}

[Test]
    public void GoodConfig()
    {
        var document = new XmlDocument();
        document.LoadXml(Resources.ValidSportSectionConfig);

        var config = new SportSection().Create(null, null, document) as dynamic;

        IEnumerable<dynamic> sportList = config.SportList;

        Assert.AreEqual(1, sportList.Count());
        //Microsoft.CSharp.RuntimeBinder.RuntimeBinderException : 'object' does not contain a definition for 'SportName'
        Assert.AreEqual("Baseball", sportList.Select(x => (string) x.SportName).First()); 

        var eventProperties = sportList.First(x => x.SportName == "Baseball").EventProperties as IDictionary<string, string>;

        Assert.AreEqual(2, eventProperties.Count);
        Assert.AreEqual("BSB", eventProperties["SportId"]);
        Assert.AreEqual("THA", eventProperties["CompetitorReferenceId"]);

        var compProps = sportList.First(x => x.SportName == "Baseball").CompetitionProperties as IDictionary<string, string>;
        Assert.AreEqual(2, compProps.Count);
        Assert.AreEqual("BSB", compProps["SportId"]);
        Assert.AreEqual("CUP", compProps["CompetitionOrgMethodId"]);

        var mappedMarkets = (sportList.First(x => x.SportName == "Baseball").MappedMarkets as IEnumerable<MappedMarket>).ToList();
        Assert.AreEqual(2, mappedMarkets.Count());
        Assert.AreEqual("match_winner" , mappedMarkets[0].Type);
        Assert.AreEqual("BSBAO", mappedMarkets[0].MappedType);
        Assert.AreEqual("handicap", mappedMarkets[0].Type);
        Assert.AreEqual("BSBAQ", mappedMarkets[0].MappedType);
    }

<sportSettings>
  <sportList>
    <sport name="Baseball">
    <eventProperties>
      <property name="SportId" value="BSB"></property>
      <property name="CompetitorReferenceId" value="THA"></property>
    </eventProperties>
    <competitionProperties>
      <property name="SportId" value="BSB" />
      <property name="CompetitionOrgMethodId" value="CUP" />
    </competitionProperties>
    <mapping>
      <market type="match_winner" mappedType="BSBAO" />
      <market type="handicap" mappedType="BSBAQ" />
    </mapping>
    </sport>
  </sportList>
</sportSettings> 
```

**更新**- 堆栈跟踪：

```
at CallSite.Target(Closure , CallSite , Object )
at System.Dynamic.UpdateDelegates.UpdateAndExecute1[T0,TRet](CallSite site, T0 arg0)
at SS.Integration.EVenue.WindowsService.UnitTests.Configuration.SportSectionTests.<GoodConfig>b__11(Object x) in C:\_Git\SS.Integration.EVenue\SS.Integration.EVenue.WindowsService.UnitTests\Configuration\SportSectionTests.cs:line 35 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T13:25:18.187

`ToSport`返回匿名类型而不是`ExpandoObject`. 将匿名类型转换为动态时必须小心，因为这些类型的访问修饰符为`internal`. 因此，如果您跨越程序集边界，运行时将看不到任何可访问的属性。尝试：

```
 private static dynamic ToSport(XElement sportElement)
    {
        try
        {
            var getAttrib = new Func<XElement, string, string>((x, atr) => x.Attribute(atr).Value);
            var getDictionary =
                new Func<IEnumerable<XElement>, IDictionary<string, string>>(elems => elems.ToDictionary(x => x.Attribute("name").Value, y => y.Attribute("value").Value));

            dynamic n = new ExpandoObject();
            n.SportName = sportElement.Attribute("name").Value;
            n.EventProperties = getDictionary(sportElement.Element("eventProperties").Elements("property"));
            n.CompetitionProperties = getDictionary(sportElement.Element("competitionProperties").Elements("property"));
            n.MappedMarkets = sportElement.Element("mapping").Elements("market").Select(x => new MappedMarket() { Type = getAttrib(x, "type"), MappedType = getAttrib(x, "mappedType") });

            return n;
        }
        catch (Exception ex)
        {

            throw ex;
        }

    } 
```

# python - 在烧瓶中使用什么库来实现这个异步操作？

> ID：10316346
> 
> 赞同：2
> 
> 时间：2012-04-25T13:08:10.123
> 
> 标签：python, asynchronous, flask

我正在使用烧瓶为应用程序构建后端 api，我需要做的一件事是：

```
1\. get the content the user submited 
2\. send a twitter with that content
3\. save the content to my DB and return the id of the new item 
```

现在的问题是第 2 步花费的时间太长，因此会减慢总请求时间。

更具体地说，第 2 步是： `twitter.send(content)`

我怎样才能使第 2 步异步？PS：我不需要知道第2步是否成功

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T04:22:51.937

我发现 Celery 和其他分布式任务框架对于像您或我这样异步发送电子邮件的简单任务来说太重了。

我最终使用了一个工作进程池来处理我的电子邮件。该方法在此对 Python中的[异步方法调用的](https://stackoverflow.com/questions/1239035/asynchronous-method-call-in-python)[答案中进行了解释？](https://stackoverflow.com/a/5485574/904393)问题。这个问题的公认答案提供了一个使用 Pool 但没有装饰器的解决方案，因此它更简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T13:16:21.743

有一个烧瓶芹菜 pacakge.http://pypi.python.org/pypi/Flask-Celery。 [http://ask.github.com/celery/getting-started/introduction](http://ask.github.com/celery/getting-started/introduction)。

你可以告诉 celery 异步做什么。

1.  获取用户提交的内容
2.  向 celery 发送一条消息，它应该尽快发送一条推文
3.  将内容保存到 db 并返回新项目的 id。

第 2 步可以用这种方式只要它需要，用户永远不会知道。

**更新：**
由于 Celery 3.0，不需要 [烧瓶芹菜，您可以通过以下方式直接使用 celery：](https://github.com/ask/flask-celery/)`pip install -U Celery`

# google-app-engine - 在谷歌应用引擎中执行查询时出现空指针异常

> ID：10316350
> 
> 赞同：0
> 
> 时间：2012-04-25T13:08:29.733
> 
> 标签：google-app-engine, google-cloud-datastore, parent-child, jdo

我正在使用带有 gwt 的谷歌应用引擎。当我通过查询问题访问投票时，我有两个类问题和投票，它给了我空指针异常。

我的课如下问题

```
@PersistenceCapable(identityType=IdentityType.APPLICATION,table="question")
public class Question implements Serializable {

    private static final long serialVersionUID = 6355873282541087204L;

    @PrimaryKey
    @Persistent(valueStrategy=IdGeneratorStrategy.IDENTITY)
    private Long id;

    @Persistent
    private String title;

    @Persistent(dependent="true")
    private Vote vote;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public Vote getVote() {
        return vote;
    }

    public void setVote(Vote vote) {
        this.vote = vote;
    }

} 
```

投票

```
@PersistenceCapable(identityType=IdentityType.APPLICATION,table="vote")
public class Vote implements Serializable{

    private static final long serialVersionUID = -1331159194642997258L;

    @PrimaryKey
    @Persistent(valueStrategy=IdGeneratorStrategy.IDENTITY)
    private Long id;

    @Persistent
    private int like;

    @Persistent
    private int unlike;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public int getLike() {
        return like;
    }

    public void setLike(int like) {
        this.like = like;
    }

    public int getUnlike() {
        return unlike;
    }

    public void setUnlike(int unlike) {
        this.unlike = unlike;
    }

} 
```

我在 serverImpl 类中的代码

```
@Override
public List<QuestionDTO> viewAllQuestion() {

    PersistenceManager pm = PMF.get().getPersistenceManager();
    Query query = pm.newQuery(Question.class);

    List<Question> list=null;
    try{
        list = (List<Question>) query.execute();
    }finally{
        pm.close();
    }

    List<QuestionDTO> questionDtoList = new ArrayList<QuestionDTO>();

    for(Question question : list){
        QuestionDTO questionDTO = new QuestionDTO();
        questionDTO.setId(question.getId());
        questionDTO.setTitle(question.getTitle());

        VoteDTO voteDTO = new VoteDTO();
        voteDTO.setId(question.getVote().getId());
        voteDTO.setLike(question.getVote().getLike());
        voteDTO.setUnlike(question.getVote().getLike());            
        questionDTO.setVoteDTO(voteDTO);            

        questionDtoList.add(questionDTO);
    }

    return questionDtoList;
} 
```

错误是

```
Caused by: java.lang.NullPointerException
    at com.wa.jdocascadedemo.server.impl.QuestionServiceImpl.viewAllQuestion(QuestionServiceImpl.java:86)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    ... 22 more 
```

我哪里错了？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:53:47.407

我弄错了。我没有将 defaultFetchGroup = "true" 分配给 Question 类中的 Vote 类对象。当从数据存储中检索持久对象时，需要 defaultFetchGroup = "true"。

# asp.net - 在asp.net中删除网页打印中的Url

> ID：10316352
> 
> 赞同：0
> 
> 时间：2012-04-25T13:08:36.740
> 
> 标签：asp.net

我正在开发一个网络应用程序......我想要的只是每当候选人尝试打印网页时，我应该能够防止在打印页面的页脚中打印 url。通常每当我们打印网页时。url 是打印在页面的页脚。我知道我们可以通过修改页面设置属性来防止它。但是因为它是一个实时站点..我不能绕过客户端系统。所以我需要一些代码来删除打印中的页脚

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:10:39.203

这是浏览器的一个功能。每个浏览器都略有不同，但大多数浏览器都可以选择在页眉或页脚中显示或隐藏页面 URL。ASP.NET 对此没有控制权。

# html - CSS：始终将页脚放在底部

> ID：10316353
> 
> 赞同：5
> 
> 时间：2012-04-25T13:08:38.990
> 
> 标签：html, css, position

我有以下页面布局：

```
<header></header>
<div id="content"></div>
<aside></aside>
<footer>
 <ul>
  <li></li>
 </ul>
</footer> 
```

现在我想将页脚完全放在左下角：

```
text-align: left;
position: fixed;
bottom: 0;
margin: -16px -8px; 
```

现在负边距不是最好的解决方案。有没有更好的方法将页脚直接定位在角落？

问候

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-25T13:15:37.733

像这样写：

```
text-align: left;
position: fixed;
bottom: 0;
left:0 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-25T13:16:51.597

检查这个网站[粘页脚](http://ryanfait.com/sticky-footer/)

**例子：**

```
* {
    margin: 0;
}
html, body {
    height: 100%;
}
.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -142px; /* the bottom margin is the negative value of the footer's height */
}
.footer, .push {
    height: 142px; /* .push must be the same height as .footer */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-31T02:02:24.840

对我来说，它是这样工作的：

```
height: 58px;
position:relative;
bottom: -58px; 
```

`height`注意和的相同值`bottom`。和`postion`到`relative`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-22T12:27:04.477

**HTML：**

```
<div id="footer"></div> 
```

**CSS：**

```
#footer {
   position:absolute;
   bottom:0;
   width:100%;
   height:60px;   /* Height of the footer */
   background:#6cf;
} 
```

# android - 如何使TextView形状为圆形并根据条件设置不同的背景颜色

> ID：10316354
> 
> 赞同：28
> 
> 时间：2012-04-25T13:08:41.980
> 
> 标签：android, textview

我有一个`TextView`，我想要的是制作`TextView`圆形，然后根据我使用的不同条件设置不同的背景颜色。我可以根据不同的条件设置背景颜色，但无法制作`TextView`圆形。那么如何做到这一点。请帮我解决这个问题。

**我用过的代码：**

```
TextView txt_stage_display = (TextView)findViewById(R.id.txt_stage_display);

if(m_enStage[position] == enSTAGE_START)
{
    txt_stage_display.setBackgroundColor(Color.parseColor("#D48393"));
}
else if(m_enStage[position] == enSTAGE_FLOW)
{
    txt_stage_display.setBackgroundColor(Color.parseColor("#D48393"));
}
    else if(m_enStage[position] == enSTAGE_SAFE)
{
    txt_stage_display.setBackgroundColor(Color.parseColor("#66B0CC"));
}
else if(m_enStage[position] == enSTAGE_UNSAFE)
{
    txt_stage_display.setBackgroundColor(Color.parseColor("#D8C627"));
}
else if(m_enStage[position] == enSTAGE_FERTILE)
{
    txt_stage_display.setBackgroundColor(Color.parseColor("#67A05E"));
}
else
{
    txt_stage_display.setBackgroundColor(Color.parseColor("#808080"));
} 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-25T13:47:27.610

如果您的颜色数量相对较少，您可以为每种颜色创建一个可绘制文件，例如创建一个文件 bg_red.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<item xmlns:android="http://schemas.android.com/apk/res/android">
  <shape>
      <solid android:color="#f00" />
      <corners
          android:topLeftRadius="30dp"
          android:topRightRadius="30dp"
          android:bottomLeftRadius="30dp"
          android:bottomRightRadius="30dp"
          />
  </shape>
</item> 
```

然后分配定义TextView：

```
<TextView 
    android:id="@+id/tv"
    android:layout_height="60dp"
    android:layout_width="60dp" 
    android:text="X" 
    android:textColor="#fff"
    android:textSize="20sp"
    android:background="@drawable/bg_red"
    android:gravity="center_vertical|center_horizontal" 
    /> 
```

请注意，宽度是背景角半径的两倍。

要从代码更改颜色：

```
TextView v = (TextView) findViewById(R.id.my_text_view);
v.setBackgroundResource(R.drawable.bg_blue); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-07-16T10:33:41.323

要添加到接受的答案，在形状内添加尺寸标签并确保高度和宽度足够大将确保背景是圆形，即使 textView 有很多字符！

> ```
> <shape>
>  <solid android:color="#f00" />
>  <corners
>     android:topLeftRadius="30dp"
>    android:topRightRadius="30dp"
>      android:bottomLeftRadius="30dp"
>      android:bottomRightRadius="30dp"
>      />
>  <size 
>   android:height="25dp"
>    android:width="25dp"/>
> </shape> 
> ```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-01-15T14:12:01.887

```
TextView textView = (TextView) findViewById(R.id.my_text_view);             
Drawable drawable = textView.getBackground();
drawable.setColorFilter(getResources().getColor(color), PorterDuff.Mode.SRC_IN); 
```

为我工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-20T14:51:50.730

将 circular_hired.xml 文件添加到您的可绘制对象中，

```
 <?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="oval" >

            <solid android:color="@color/map_hide_bg"/>
            <stroke android:width="1dip" android:color="@color/map_hide_bg" />

    </shape> 
```

但是在您的布局设计 xml 文件中，您必须修复 textview 的宽度和高度。它将给出圆形形式。

```
<TextView
            android:id="@+id/tvMessages"
            android:layout_width="20dp"
            android:layout_height="20dp"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:gravity="center"
            android:background="@drawable/circular_message"
            android:padding="4dp"
            android:text="5"
            android:textColor="@color/white_color"
            android:textSize="@dimen/txt12"
            android:visibility="visible"
             /> 
```

我相信它会帮助你，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-27T22:26:52.020

您也可以通过像这样将颜色设置为背景可绘制来实现这一点

```
TextView textView = (TextView) findViewById(R.id.my_text_view);
((GradientDrawable)textView.getBackground()).setColor(R.color.my_color); 
```

# visual-studio - 使用 Visual Studio 和 Ankhsvn 处理 csproj 文件的频繁更改

> ID：10316357
> 
> 赞同：2
> 
> 时间：2012-04-25T13:08:57.090
> 
> 标签：visual-studio, svn, ankhsvn

我正在使用 ankhsvn 与我的朋友在 Visual Studio 中的一个项目上进行协作。

尽管我们没有对相同的源文件进行更改，但我们俩都经常对同一个项目进行更改。

我很难理解如何告诉颠覆来处理 VS 在`.csproj`和`.sln`文件中所做的自动更改。正如我所看到的，我有两个选择：

1.  在常规版本控制下包含该`.csproj`文件，然后每次我在提交之前更新我都会遇到冲突，因为我的朋友在我之前提交并对`.csproj`文件进行了一些更改。
2.  将`.csproj`文件放在忽略列表中，然后我会遇到问题，因为我的项目不会包含我朋友所做的所有更改。

因此，在这两种方式中，我都必须解决冲突或解决依赖问题等。

有没有更简单的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T13:17:32.770

根据我的经验，#1 是您唯一的选择。由于你们俩都在定期编辑 .csproj，而 .csproj 的性质是您的两个更改都将始终发生在文件的同一区域中，因此您将遇到冲突。

绝对避免＃2。我只能认为你想这样做是因为你担心错误地解决冲突，并且你发现在 VS 中使用“添加引用”会更容易。我不会这样做，因为 .csproj 文件中的大多数冲突解决方案（我假设你们都定期添加依赖项）相当于在 TortoiseMerge 中使用“在他们之前使用我的”，反之亦然。如果您没有使用合并工具，而是在文本编辑器中进行操作，我建议您尝试 TortoiseSVN，这样您就可以轻松地进行合并。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T13:19:16.047

我相信您的问题是设计使然。您不应排除项目文件。

实际上，这样做的聪明方法是将您的代码分成多个项目/模块/库。在这种情况下，您的项目文件可能会更改，但由于您在不同的文件中工作，所以这不是问题。一切都保存在一个解决方案文件中，只有在您添加/删除项目时才会更改。当然，这意味着您需要在实施之前规划您的软件项目并定义模块，但三思而后行很少是一个糟糕的选择。

编辑：您可能还想考虑一个不同的版本控制系统。像 mercurial 或 git 这样的东西应该会有所帮助，因为您只提取/合并您需要的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-06T18:55:49.577

我想对在 svn 下处理 .sln 和 .csproj 文件提出一个快速建议。

首先完全更新您的项目。

寻找一种锁定机制，您可以在其中获得对文件的锁定，并且没有其他人可以提交对它的更改。如果您像我一样使用 TortoiseSVN，请参阅[https://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-locking.html](https://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-locking.html)

现在快速正常添加文件（将它们添加到文件树中并告诉项目包含它）。

然后将新文件连同已编辑的 .sln 和 .csproj 文件一起提交。

如果你的 svn 在提交后没有释放锁，现在释放它。

现在你应该清楚了。您知道解决方案和项目文件适合您。但是，如果您的朋友在更新为新的 .sln 或 .csproj 之前编辑了 .sln 或 .csproj，则它们可能不适用于您的朋友。在这种情况下，他或她可能不得不删除他们的 .sln 或 .csproj，加载您的，然后处理其余的。（我不知道他们是否必须再次将他们的文件添加到解决方案或项目中，或者 Visual Studio 是否会为他们这样做。）

请注意，您可以添加空文件，以便项目知道它们并提交此过程。这将很快，因此其他人不太可能同时进行编辑。之后您始终可以正常编辑文件。如果你还没有写任何东西依赖它，它不应该需要内容。如果文件需要一些内容以免破坏解决方案，请考虑为文件提供一些您稍后将替换的有效内容。

如果有人有其他建议，我很想听听。然而，这篇文章现在已经有 3 年了......

# java - Java中的三重DES加密和解密

> ID：10316358
> 
> 赞同：5
> 
> 时间：2012-04-25T13:09:00.257
> 
> 标签：java, encryption

> **可能重复：**
> [如何在 Java 中使用 3des 加密/解密？](https://stackoverflow.com/questions/20227/how-do-i-use-3des-encryption-decryption-in-java)

我正在寻找 Java 中的 Triple DES 加密和解密的解决方案。我想将在 Triple DES 中加密的密码存储在一个文件中 - 我希望程序解密这个密码并在运行时使用它。

谁能指出我如何实现这一目标的资源/教程甚至完整的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:13:17.797

你试过[弹跳城堡](http://www.bouncycastle.org/specifications.html)库吗？

有很多示例和加密选项。

# security - 获取 SSL 证书与我的 Node.js 应用程序有何关系？

> ID：10316359
> 
> 赞同：2
> 
> 时间：2012-04-25T13:09:00.973
> 
> 标签：security, node.js, ssl, linode

我的 Linode 服务器上运行了一个 Node.js 应用程序，我的服务器需要 SSL。

我知道我需要购买一个，如下所示： http: [//www.namecheap.com/ssl-certificates/comodo/essential-ssl-certificate.aspx](http://www.namecheap.com/ssl-certificates/comodo/essential-ssl-certificate.aspx)

我了解我需要获得一个专用 IP 地址并遵循以下说明： http: [//library.linode.com/security/ssl-certificates/commercial](http://library.linode.com/security/ssl-certificates/commercial)

我不明白的是我的 Node 应用程序如何知道这个 SSL 证书？我的 Node 应用程序关心吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:15:52.447

您应该运行 https 服务器。

如果您正在运行 expressjs，您可以执行类似的操作 - 使用您从 ssl 提供商处获得的证书和密钥。

```
var express = require('express')
  , fs = require("fs");

var privateKey = fs.readFileSync('security/privatekey.pem').toString();
var certificate = fs.readFileSync('security/certificate.pem').toString();  

// to enable https
var app = module.exports = express.createServer({key: privateKey, cert: certificate}); 
```

希望有帮助。

**编辑：**

您可以查看此[链接](http://silas.sewell.org/blog/2010/06/03/node-js-https-ssl-server-example/)- 这个人使用的是标准节点服务器实现而不是 express。但是我不确定安全 api 是否发生了变化——这篇文章已经有将近 2 年的历史了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:22:44.257

您的服务器需要配置证书（及其私钥），因为它向用户证明了自己的身份。在 TLS 握手期间，当 HTTPS 连接开始时，服务器证书将呈现给浏览器。

这只会影响服务器本身的配置。服务器提供的实际应用程序代码不需要知道它（并且可能不应该，以减少通过错误代码泄漏私钥的风险）。

# android - 由于“无法在 Linux 中删除 '/tesseract-android-tools/bin/classes/com'，该项目未构建

> ID：10316360
> 
> 赞同：3
> 
> 时间：2012-04-25T13:09:03.777
> 
> 标签：android, linux, eclipse, tesseract

在此链接中执行这些步骤后：[http ://rmtheis.wordpress.com/2011/08/06/using-tesseract-tools-for-android-to-create-a-basic-ocr-app/](http://rmtheis.wordpress.com/2011/08/06/using-tesseract-tools-for-android-to-create-a-basic-ocr-app/)

并将“Tesseract-android-tools”作为库添加到 Eclipse 中，发现此错误：由于“无法删除 '/tesseract-android-tools/bin/classes/com'.”，该项目未构建。修复问题，然后尝试刷新此项目并构建它，因为它可能不一致。

我无法解决此错误以在我的应用程序中使用该库。如果有人知道该错误，请尽快回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T05:25:37.260

使用 Linux 终端手动删除该目录。下次在 Eclipse 中构建项目时将重新创建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:13:46.100

检查`bin`tesseract-android-tools 项目目录的权限。如有必要，添加写权限。

# php - 在 php 中存储和使用任意方法参数

> ID：10316362
> 
> 赞同：1
> 
> 时间：2012-04-25T13:09:05.973
> 
> 标签：php

我将作业存储在一个进程拾取并稍后执行的表中。我现在（除其他外）存储作业的方式是：

> $className, $method, $params

其中 params 是 JSON 编码的数组。现在我正在执行这样的工作：

```
$params = Zend_Json_Decoder::decode($params);    
$cM = new $clname ();
$result = $cM->$method ( $params ); 
```

问题是不同的方法需要不同格式的参数——一些需要一组标量，一些是数组，一些是混合的。

我应该如何打包和解包参数，以便它们可以作为任何方法的参数？或者我应该以完全不同的方式做到这一点？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:17:17.217

保留您现有的存储方法，并使用以下方法调用例程[`call_user_func_array()`](http://php.net/manual/en/function.call-user-func-array.php)：

```
$params = Zend_Json_Decoder::decode($params);    
$cM = new $clname();
$result = call_user_func_array(array($cM, $method), $params); 
```

唯一的缺点是，当所讨论的方法期望通过引用传递参数时，它确实开始变得复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:16:15.037

尝试代码评估。我认为这应该可以解决您的问题。

```
$params = Zend_Json_Decoder::decode($params);
$params_str = "";
$params_first = true;
foreach (array_keys($params) as $param) {
   $params_str .= (($params_first) ? "" : ",") . " \$params[$param]";
   $params_first = false;
}
$cM = new $clname ();
eval("\$result = \$cM->$method ( $params_str );"); 
```

# android - 访问登录系统，Android

> ID：10316364
> 
> 赞同：0
> 
> 时间：2012-04-25T13:09:13.267
> 
> 标签：android, login, web

我正在尝试制作一个应用程序，该应用程序可以自动从网站下载最新文件并将其放在一个文件夹中，我可以从女巫那里访问它。问题是访问该网站需要登录名/密码。我如何在第一次运行应用程序时获取这些信息，并在我单击更新按钮时自动访问网站以查看是否必须下载新文件？任何材料、教程等都会有所帮助。我不知道在哪里可以找到这些东西。

最好的问候杰斯珀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:28:20.093

这不是一个很*容易*回答的问题，因为它是如此广泛并且涉及多种不同的操作。

**用户凭证**

1.  在启动时，您需要检查某种存储（例如：SharedPreferences、数据库）的用户名/密码。

2.  如果不存在，您需要提示用户输入他们的用户名/密码，以便您可以捕获并将其存储在某处（例如：SharedPreferences、数据库）

[共享首选项教程](http://www.javacodegeeks.com/2011/01/android-quick-preferences-tutorial.html "共享偏好")

[数据库教程](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/ "数据库教程")

**文件更新**

*文件修改日期*- 在决定是否下载文件之前，您需要知道文件的修改时间。这应该会有所帮助：[Android：如何知道位于 Web 服务器中的文件已被修改？](https://stackoverflow.com/questions/6691825/android-how-to-know-file-located-in-web-server-is-modified)

*确定文件是否较新*- 在您获得服务器上文件的最后修改日期后，您需要将其与您当前拥有的文件的修改日期进行比较。我建议无论何时下载文件，都将修改后的日期（上面检索到的）保存在某种持久存储（数据库、SharedPref）中。

*下载文件*- 如果您决定需要在服务器上下载文件，这里的教程应该会有所帮助。 [http://www.hassanpur.com/blog/2011/04/android-development-downloading-a-file-from-the-web/](http://www.hassanpur.com/blog/2011/04/android-development-downloading-a-file-from-the-web/) - 有点复杂，但它也在后台线程上进行下载，即一个好主意。

我知道，答案相当模糊，但这是一个相当广泛的问题。如果您有更具体的问题，我们可以为您提供更好的答案。

# javascript - 面对错误 Microsoft JScript runtime error: 'BBDN' is undefined in asp.net

> ID：10316368
> 
> 赞同：1
> 
> 时间：2012-04-25T13:09:29.733
> 
> 标签：javascript, asp.net

我在运行 dotnet 应用程序时遇到以下错误 Microsoft JScript 运行时错误：“BBDN”未定义 Microsoft JScript 运行时错误：“YAHOO”未定义

我在页面顶部声明如下：

```
<%@ Register TagPrefix="busyboxdotnet" Namespace="BusyBoxDotNet" Assembly="BusyBoxDotNet" %> 
```

在 html 标记中，我在 .aspx 页面中提到了以下代码：

```
<busyboxdotnet:busybox id="BusyBox" runat="server" Width="250px" Height="50px" Text=" " Overlay="False"
            ShowBusyBox="OnLoad" Image="GreenBar"></busyboxdotnet:busybox><busyboxdotnet:busybox id="BusyBox2" runat="server" Width="250px" Height="50px" Text=" " Image="GreenBar"></busyboxdotnet:busybox> 
```

和

```
<script type="text/javascript" src="BusyBoxDotNet.axd?res=BBDN.js$YAHOO.js$dom.js$event.js$animation.js$BrowserSniff.js$Common.js$BusyBox.js"></script> 
```

但我不明白为什么会出现这个错误？有人可以帮助我吗？

# websocket - 瓶子 + WebSocket

> ID：10316374
> 
> 赞同：25
> 
> 时间：2012-04-25T13:09:49.743
> 
> 标签：websocket, bottle

是否可以在同一个应用程序（相同端口）中托管一个普通的 Bottle 应用程序和一个 WebSocket 应用程序（例如：[https ://github.com/defnull/bottle/blob/master/docs/async.rst）？](https://github.com/defnull/bottle/blob/master/docs/async.rst)这样 /ws 将转到 WebSocket 处理程序，而所有其他处理程序通常会被路由到其他瓶子处理程序。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-19T16:53:55.153

确实是。

服务器：

```
#!/usr/bin/python

import json
from bottle import route, run, request, abort, Bottle ,static_file
from pymongo import Connection
from gevent import monkey; monkey.patch_all()
from time import sleep

app = Bottle()

@app.route('/websocket')
def handle_websocket():
    wsock = request.environ.get('wsgi.websocket')
    if not wsock:
        abort(400, 'Expected WebSocket request.')
    while True:
        try:
            message = wsock.receive()
            wsock.send("Your message was: %r" % message)
            sleep(3)
            wsock.send("Your message was: %r" % message)
        except WebSocketError:
            break

@app.route('/<filename:path>')
def send_html(filename):
    return static_file(filename, root='./static', mimetype='text/html')

from gevent.pywsgi import WSGIServer
from geventwebsocket import WebSocketHandler, WebSocketError

host = "127.0.0.1"
port = 8080

server = WSGIServer((host, port), app,
                    handler_class=WebSocketHandler)
print "access @ http://%s:%s/websocket.html" % (host,port)
server.serve_forever() 
```

包含 javascript 的 html 页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <script type="text/javascript">
    var ws = new WebSocket("ws://localhost:8080/websocket");
    ws.onopen = function() {
        ws.send("Hello, world");
    };
    ws.onmessage = function (evt) {
        alert(evt.data);
    };
  </script>
</head>
<body>
</body>
</html> 
```

一个客户：

```
#!/usr/bin/python

from websocket import create_connection
ws = create_connection("ws://localhost:8080/websocket")
print "Sending 'Hello, World'..."
ws.send("Hello, World")
print "Sent"
print "Reeiving..."
result =  ws.recv()
print "Received '%s'" % result
ws.close() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T22:21:41.297

这很可能不是最简单的答案，但我刚刚完成了一个测试环境的设置，该环境在 Pyramid 上使用 Nginx 和 uWSGI 工作，一旦你设置好了，你就可以非常轻松地扩展它，例如，如果你的 /ws 是提取太多资源，使用 Nginx+uWSGI 将 /ws 重新定位到不同的硬件是微不足道的。我的背景是 Pyramid，我的 uWSGI 经验仅用于测试，但在我的阅读中，它似乎是一个很好的解决方案。瓶子说明是快速谷歌搜索的结果。

### 这个概念：

**这个概念是在app.serve_forever()**调用之前 获取您的应用程序，即您的**app = make_wsgi_app.from_config(config)**，而是使用 uwsgi 将您的应用程序“服务”到套接字**app1.sock**。有很多方法可以配置 uWSGI。uWSGI 站点提供了更多配置 uWSGI 以与您的应用程序对话的方法的文档。Nginx 带有配置，至少在当前版本中可以原生使用 uWSGI 套接字。你只需传递**uwsgi_pass unix:///tmp/app1.sock;** 站点配置的路径以及参数。在同一个站点 conf 文件中执行此操作两次，一次用于**location / {**一次用于**location /ws {**指向它们各自的应用程序 sock 文件，你应该很高兴。 **********在我设置测试环境时，将应用程序作为文件提供给套接字的概念对我来说是新的，我希望这会有所帮助。

### 得到什么：

nginx
uWSGI

### 如何：

[从本教程](http://liangsun.org/2012/02/pyramid-nginx-uwsgi-mysql/) 中提取 nginx 和 uwsgi 设置信息，并将其用于您的应用程序，[此处](https://groups.google.com/forum/?fromgroups#!topic/bottlepy/wRfgm4obLXk)用于特定于瓶子的设置或前往 uwsgi 站点并查看其配置说明。每个特定技术的文档都非常好，因此即使缺乏组合示例，让它们一起工作也不难。Nginx 和 uWSGI 都有大量的配置设置，所以一定要看看这些。**********

# javascript - 如何在html中为收音机组列表命名收音机？

> ID：10316376
> 
> 赞同：0
> 
> 时间：2012-04-25T13:10:00.770
> 
> 标签：javascript, jquery, html

我希望它会发出一个颜色列表。在html中，如果输入是列表，它们应该是相同的名称，但无线电输入的名称相同，它们将在同一个组中，所以如何分隔每个无线电组，但所有组仍然具有相同的名称，然后我可以使用循环去在服务器端获取列表的所有值？

此外，在客户端，我需要检查每个组是否被选中，那么如何使用javascript或jquery来选择所有单选组，而不是所有单选按钮。

```
<form method="post">
Car A: <input type="radio" name="color[]"/>red <input type="radio" name="color[]"/>yello<br/>
Car B: <input type="radio" name="color[]"/>red <input type="radio" name="color[]"/>yello<br/>
Car C: <input type="radio" name="color[]"/>red <input type="radio" name="color[]"/>yello<br/>
<input type="submit"/>
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T13:12:41.933

每个组的所有单选按钮都应该有不同的名称。

```
Car A: 
<input type="radio" name="color1"/>red 
<input type="radio" name="color1"/>yello<br/>

Car B: 
<input type="radio" name="color2"/>red 
<input type="radio" name="color2"/>yello<br/>

Car C: 
<input type="radio" name="color3"/>red 
<input type="radio" name="color3"/>yello<br/> 
```

检查是否选择了所有组：

```
if ($('input[type="radio"]:checked').length == 3)
    validAction();
else
    invalidAction(); 
```

您可以将选择器限制为仅其`name`属性以 开头的元素`color`：

```
if ($('input[type="radio"][name^="color"]:checked').length == 3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:14:18.320

组的每个成员必须具有相同的名称。每个组必须有不同的名称。

如果您想迎合 PHP 在循环中呈现数据的命名约定，请使用如下约定：`group[0]`第一组`group[1]`，第二组，依此类推。这为您提供了客户端上的唯一名称，而 PHP 会将它们合并到一个数组中。

在客户端，您可以执行以下操作：

```
var i = 0, myform = /* something */;
while (myform.elements['group[' + i + ']']) {
    var group = myform.elements['group[' + i + ']'];
    /* Loop over HTML Element Collection to make sure one item is `checked`. */
} 
```

# junit - 显然是 Mockito NotAMockException

> ID：10316386
> 
> 赞同：2
> 
> 时间：2012-04-25T13:10:29.150
> 
> 标签：junit, mockito, spring-test

我正在使用 Spring Test 框架和 Junit。我有一个用于测试用例的 spring 上下文文件：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({ "classpath:spring/restTestContext.xml",
        "classpath:spring/webserviceContext.xml" })
@PrepareForTest(User.class)
public class RestTestsIT {

// This is a mock
@Autowired private AWSMailService mailService;
...
} 
```

在 restTestContext.xml 中，我创建了一个 AWSMailService 类型的 bean（实际上是一个模拟）：

```
<bean id="mailService" name="mailService" class="org.mockito.Mockito" factory-method="mock">
    <constructor-arg value="com.acme.utils.email.AWSMailService" />
</bean> 
```

在测试中，我试图验证在 mailService 模拟上调用了 sendEmail() 方法，但是我得到了一个 NotAMockException 虽然在对象上调用 toString() 告诉我它是一个模拟：

```
public void testEmailSent() {
...
// Results in "Mock for AWSMailService, hashCode: 31777764"
System.out.println(mailService.toString());

// Results in NotAMockException
verify(mailService).sendEmail(any(String.class), ...);
} 
```

有没有人有任何想法可能导致这种情况？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:44:06.717

Spring 是否为这个对象创建了一个代理，所以 Mockito 认为它不是一个模拟，因为你得到一个 Proxy$34 类作为调用者和你的模拟对象之间的中间体？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:50:35.867

我遇到了同样的问题，我使用的是 mockito 1.8.1，在 1.9.0 版本中问题已得到修复。

现在 Mockito 的有效模拟算法发生了变化，并且与 spring 代理 bean 没有冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:53:11.640

解决它 ：）

问题是 Mockito 确实在创建一个 Mock，但是 Spring 正在代理它，而 Mockito 不够聪明，无法确定 Mock 周围有一个代理。

我现在在单元测试中手动创建模拟并将它们连接起来：

```
@Mock private AWSMailService mailService;
@Autowired private UserService userService;

@Before
public void setup() {
  ((UserServiceImpl) userService).setMailService(mailService);
} 
```

# database - EF database first role names with foreign keys?

> ID：10316392
> 
> 赞同：3
> 
> 时间：2012-04-25T13:10:49.383
> 
> 标签：database, entity-framework

I'm using EF Database First. In the db we have a lot of fk's from one table to another (same). When generating the model, EF uses the other ends table name as the role name. This is a problem. I have made a small example below, to illustrate the problem.

I would like the generated code to use the fk-name, instead of the table name. The model VS is generating now works like this:

```
aTrip.Location
aTrip.Location1
aTrip.Location2 
```

when I would like to have

```
aTrip.coming_from
aTrip.arrives_to
aTrip.next_dest 
```

Now, I can change the role names in VS. The problem with that is that if I re-import, all my changes are lost. Also, there will be a lot of tedious renaming, since our db contains a lot of fk's like this example.

What I would like to, is to change how VS generates the model, and use the fk's col name, which is much more correct. Can that be done?

```
+----------------+                   +-------------+
|    Trip        |                   |Location     |
+----------------+                   |             |
|                |                   +-------------+
|                |                   |  Name       |
|                |*                 1|             |
|   coming_from  ---------------------             |
|                |                   |             |
|                |                   |             |
|                |*                 1|             |
|   arrives_to   ---------------------             |
|                |                   |             |
|                |                   |             |
|                |*                 1|             |
|    next_dest   ---------------------             |
|                |                   |             |
+----------------+                   +-------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T14:19:02.663

我知道这个问题很老，但我偶然发现了它，并认为我会给出我的意见。

现在，我不知道如何回答有关在将数据库导入模型时更改外键默认命名的具体问题。可能有办法，但我不知道！如果有人这样做，那就去吧，我也想听听。

然而，在这种情况下，我会做的是查看数据库中的更改是如何进行的。这可能不适合您的设置，但如果数据库仅用于这个应用程序，您可以从数据库优先转移到模型优先。

在您从数据库初始导入并生成模型后，我会将模型作为数据库的原始来源，并在那里进行所有更改，并相应地更新数据库。这意味着您可以以任何您想要的方式重命名关系，而不必在每次更改数据库时重复该任务。

我完全理解，如果您的情况比这更复杂，这可能一点也不适用，但它可能是某些人的选择。

当然，您总是可以更进一步，先定义模型代码，我个人更喜欢使用它，但这只是我的意见！

# iphone - YouTube 视频 GData API

> ID：10316397
> 
> 赞同：2
> 
> 时间：2012-04-25T13:11:10.693
> 
> 标签：iphone, objective-c, ios, ipad, gdata-api

我正在尝试让 YouTube 在我的 iOS 应用程序中运行。我正在成功检索特定用户的视频列表，但我正在努力实现 didSelectRowAtIndexPath 以便将所选视频嵌入到单独的 viewController 中。这是我遇到问题的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
DetailViewController *detailController = [self.storyboard instantiateViewControllerWithIdentifier:@"DetailController"];

    GDataEntryBase *entry2 = [[feed entries] objectAtIndex:indexPath.row];
    videoArray = [[(GDataEntryYouTubeVideo *)entry2 mediaGroup] mediaContents];
    NSString *tempUrl = [videoArray objectAtIndex:0];
    NSLog(@"The URL is:%@",tempUrl);
    detailController.videoString = tempUrl;

    [self.navigationController pushViewController:detailController animated:YES];

} 
```

每次我运行它时，我都会在'detailController.videoString = tempUrl;'处得到一个断点

我可以看到 tempUrl 字符串正在通过 NSLog 填充以下内容：

```
The URL is:GDataMediaContent 0x69c76a0: {url:https://www.youtube.com/v/s36krFdPmYQ?version=3&f=user_uploads&app=youtube_gdata type:application/x-shockwave-flash medium:video isDefault:true expression:full duration:1913} 
```

如何从 GData API 中仅提取视频 URL？

提前感谢您的回复。

我进行了以下更改，现在我得到了一个正确的 URL 字符串：

```
GDataEntryBase *entry2 = [[feed entries] objectAtIndex:indexPath.row];
    NSArray *mediaContents = [[(GDataEntryYouTubeVideo *)entry2 mediaGroup] mediaContents];
    GDataMediaContent *flashContent = [GDataUtilities firstObjectFromArray:mediaContents withValue:@"application/x-shockwave-flash" forKeyPath:@"type"];
    NSLog(@"The URL is:%@",[flashContent URLString]);
    detailController.videoString = [flashContent URLString]; 
```

这给了我来自 NSLog 的以下信息：

```
The URL is:https://www.youtube.com/v/s36krFdPmYQ?version=3&f=user_uploads&app=youtube_gdata 
```

但是，我仍然在 'detailController.videoString = [flashContent URLString]; 处获得断点；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T18:36:12.590

我能够解决这个问题。我在两个 ViewController 之间添加了 Modal segue，并稍微修改了我的代码。这是我在添加 segue 后最终使用的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    DetailViewController *detailController = [self.storyboard instantiateViewControllerWithIdentifier:@"DetailController"];
    GDataEntryBase *entry2 = [[feed entries] objectAtIndex:indexPath.row];
    NSString *title = [[entry2 title] stringValue];
    NSArray *contents = [[(GDataEntryYouTubeVideo *)entry2 mediaGroup] mediaContents];
    GDataMediaContent *flashContent = [GDataUtilities firstObjectFromArray:contents withValue:@"application/x-shockwave-flash" forKeyPath:@"type"];
    NSString *tempURL = [flashContent URLString];

    detailController.videoString = tempURL;
    detailController.titleString = title;
    [self.navigationController pushViewController:detailController animated:YES];

} 
```

您可以在此处查看完整的 YouTubeDemo 应用程序代码： [https ://gist.github.com/2501684](https://gist.github.com/2501684)

# java - 休眠分页：ScrollableResult 与 setMaxResult() + setFirstResult()

> ID：10316416
> 
> 赞同：3
> 
> 时间：2012-04-25T13:12:40.413
> 
> 标签：java, hibernate

我使用 ORM 框架已经有一段时间了，不过我对 Hibernate 还是很陌生。

假设您有一个查询（是查询还是标准，无关紧要），它检索到一个很好的结果集，并且您想通过它进行分页。您宁愿使用 setMaxResult() 和 setFirstResult() 方法组合，还是使用 ScrollableResult？

关于性能（执行时间和内存消耗）的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:18:03.753

如果您正在实现一个 Web 应用程序，该应用程序在单独的请求-响应周期中提供单独的结果页面，那么您将无法利用`ScrollableResult`任何优势。使用 setFirst/Max/Result。但是，这可能是一个真正的性能杀手，具体取决于确切的查询和结果的总大小。特别是如果可怜的数据库必须每次都对整个结果集进行排序，这样它就可以计算出第 100-110 条记录是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:17:45.370

前几天我们也有同样的问题，然后解决了`setMaxResult(..)`和`setFirstResult(..)`。问题有两个：

*   `ScrollableResult``next()`如果您的 jdbc 驱动程序或数据库未正确处理它，则可能会为每次调用执行一个查询。我们就是这种情况（MySQL）
*   它是特定于休眠的，而不是 JPA 标准。

# c# - “Dispose”是否应该只用于包含非托管资源的类型？

> ID：10316418
> 
> 赞同：67
> 
> 时间：2012-04-25T13:12:52.763
> 
> 标签：c#, garbage-collection, idisposable, finalizer, finalization

我最近和一位同事讨论了`Dispose`实现`IDisposable`.

我认为实现`IDisposable`应该尽快清理的类型是有价值的，**即使没有要清理的非托管资源**。

我的同事想法不同；`IDisposable`如果您没有任何非托管资源，则无需实施，因为您的类型最终将被垃圾收集。

我的论点是，如果您有一个想要尽快关闭的 ADO.NET 连接，那么实施`IDisposable`并`using new MyThingWithAConnection()`有意义。我的同事回答说，在幕后，ADO.NET 连接是非**托管资源**。我对他的答复是，**一切最终都是非托管资源**。

我知道[推荐的一次性模式](http://msdn.microsoft.com/en-us/library/b1yfkh5e%28v=vs.71%29.aspx)，如果**被调用，****则释放托管和非托管资源，`Dispose`**但**如果通过终结器/析构函数调用，则仅释放非托管资源**（并在不久前发表了关于如何[提醒消费者不当使用 IDisposable 类型的](http://stevedunns.blogspot.co.uk/2009/03/idisposable-alerts.html)博客）

所以，我的问题是，如果你有一个不包含非托管资源的类型，是否值得实现`IDisposable`？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-25T13:14:55.927

有不同的有效用途`IDisposable`。一个简单的例子是持有一个打开的文件，当您不再需要它时，您需要在某个时刻将其关闭。当然，您可以提供一个方法`Close`，但是将它放入`Dispose`并使用类似模式`using (var f = new MyFile(path)) { /*process it*/ }`会更安全。

一个更流行的例子是持有一些其他`IDisposable`资源，这通常意味着您需要提供自己`Dispose`的资源才能处置它们。

一般来说，只要你想对任何东西进行确定性销毁，你就需要实现`IDisposable`.

我的观点和你的不同之处在于，我会`IDisposable`在某些资源需要*确定性*销毁/释放时立即实施，而不是*尽快*实施。在这种情况下，依靠垃圾收集不是一种选择（与您同事的说法相反），因为它发生在不可预知的时刻，实际上可能根本不会发生！

任何资源在后台不受管理的事实并不意味着什么：开发人员应该考虑“何时以及如何处理该对象是正确的”，而不是“它如何在后台工作”。无论如何，底层实现可能会随着时间而改变。

事实上，C# 和 C++ 之间的主要区别之一是没有默认的确定性破坏。来缩小差距：`IDisposable`您可以订购确定性破坏（尽管您无法确保客户端正在调用它；在 C++ 中您无法确定客户端调用`delete`对象的方式相同）。

* * *

*小补充：确定性*释放资源和*尽快*释放它们之间实际上有什么区别？实际上，这些是不同的（尽管不是完全正交的）概念。

如果要*确定性*地释放资源，这意味着客户端代码应该有可能说“现在，我想要释放这个资源”。这实际上可能不是*最早可能*释放资源的时刻：持有资源的对象可能已经从资源中获得了所需的一切，因此它可能已经释放了资源。另一方面，即使在对象`Dispose`运行之后，对象也可能选择保留（通常是非托管的）资源，仅在终结器中清理它（如果持有资源太长时间不会产生任何问题）。

*所以，为了尽快*释放资源，严格来说`Dispose`是没有必要的：对象一旦意识到自己不再需要该资源，就可以释放该资源。`Dispose`然而，作为一个有用的提示，不再需要对象*本身，因此如果合适的话，资源**可能会*在此时被释放。

* * *

另一个必要的补充：不仅非托管资源需要确定性释放！这似乎是这个问题的答案意见分歧的关键点之一。一个人可以有纯粹的想象结构，这可能需要确定性地释放。

示例是：访问某些共享结构的权利（想想[RW-lock](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)），巨大的内存块（假设您正在手动管理程序的某些内存），使用其他程序的许可证（假设您不被允许同时运行多个程序的*X*个副本）等。这里要释放的对象不是非托管资源，而是做/使用某事的*权利，这纯粹是程序逻辑的内部构造。*

* * *

小补充：这里是 [ab] 使用的简洁示例列表：http `IDisposable`: [//www.introtorx.com/Content/v1.0.10621.0/03_LifetimeManagement.html#IDisposable](http://www.introtorx.com/Content/v1.0.10621.0/03_LifetimeManagement.html#IDisposable)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-25T13:45:42.767

我认为`IDisposable`从*责任*的角度考虑是最有帮助的。如果一个对象`IDisposable`知道在不再需要它的时间和宇宙终结之间需要完成的事情（最好尽快），并且它是唯一具有信息和推动力的对象，则它应该实现做。例如，打开文件的对象有责任查看文件是否关闭。如果对象只是在不关闭文件的情况下消失，则文件可能不会在任何合理的时间范围内关闭。

重要的是要注意，即使只与 100% 托管对象交互的对象也可以做需要清理的事情（并且应该使用`IDisposable`）。例如，`IEnumerator`附加到集合的“已修改”事件的 an 将需要在不再需要时将其自身分离。否则，除非枚举器使用一些复杂的技巧，否则只要收集在范围内，枚举器就永远不会被垃圾收集。如果集合被枚举一百万次，一百万个枚举器将附加到它的事件处理程序。

请注意，有时可以使用终结器进行清理，因为无论出于何种原因，一个对象在没有`Dispose`被首先调用的情况下就被放弃了。有时这很好用；有时它工作得非常糟糕。例如，即使 `Microsoft.VisualBasic.Collection`使用终结器从“修改”事件中分离枚举器，尝试在没有干预`Dispose`或垃圾收集的情况下枚举此类对象数千次也会导致它变得非常慢 - 比性能慢许多数量级如果使用`Dispose`得当，就会出现这种情况。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-25T13:18:32.627

> 所以，我的问题是，如果你有一个不包含非托管资源的类型，是否值得实现 IDisposable？

当有人在对象上放置 IDisposable 接口时，这告诉我创建者打算在该方法中做某事，或者将来他们可能打算这样做。为了确定，我总是在这种情况下调用 dispose 。即使它现在不做任何事情，它也可能在将来做任何事情，并且由于他们更新了一个对象而导致内存泄漏很糟糕，而且您在第一次编写代码时没有调用 Dispose。

事实上，这是一个判断电话。你不想过度实现它，因为在那个时候为什么还要麻烦有一个垃圾收集器。为什么不手动处理每个对象。如果您有可能需要处置非托管资源，那么这可能不是一个坏主意。这一切都取决于，如果唯一使用您的对象的人是您团队中的人，您可以随时跟进他们并说，“嘿，现在需要使用非托管资源。我们必须检查代码并确保我们已经收拾好了。” 如果您将其发布以供其他组织使用，那就不同了。没有简单的方法可以告诉可能已经实现该对象的每个人，“嘿，您需要确保它现在已被处置。”

> 我的同事回答说，在幕后，ADO.NET 连接是一种托管资源。我对他的答复是，一切最终都是非托管资源。

他是对的，它现在是一个托管资源。他们会改变它吗？谁知道呢，但打电话给它也无妨。我不会尝试猜测 ADO.NET 团队做了什么，所以如果他们把它放进去但它什么也没做，那很好。我还是会这样称呼它，因为一行代码不会影响我的工作效率。

您还遇到了另一种情况。假设您从一个方法返回一个 ADO.NET 连接。您不知道 ADO 连接是基础对象还是派生类型。您不知道 IDisposable 实现是否突然变得必要。无论如何，我总是这样称呼它，因为在生产服务器每 4 小时崩溃一次时，跟踪内存泄漏是很糟糕的。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-25T18:21:49.100

虽然已经有了很好的答案，但我只是想明确一点。

实现的三种情况`IDisposable`：

1.  您正在直接使用非托管资源。这通常涉及`IntPrt`从 P/Invoke 调用中检索必须由不同的 P/Invoke 调用释放的句柄或其他形式的句柄
2.  您正在使用其他`IDisposable`对象并且需要对它们的处置负责
3.  您还有其他需要或使用它，包括`using`块的便利性。

虽然我可能有点偏见，但您应该真正阅读（并向您的同事展示）[StackOverflow Wiki on`IDisposable`](https://stackoverflow.com/tags/idisposable/info) .

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-04-25T13:16:12.993

不，它**不仅** *适用*于非托管资源。

建议它像框架调用的基本清理内置机制一样，使您可以清理您想要的任何资源，但最适合自然是非托管资源管理。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-04-25T13:18:21.300

请注意，*非托管资源*很可能包括标准 CLR 对象，例如保存在某些静态字段中的对象，它们都在安全模式下运行，根本没有非托管导入。

没有简单的方法来判断一个给定的类实现是否`IDiposable`真的需要清理一些东西。我的经验法则是总是调用`Dispose`我不太了解的对象，比如一些 3rd 方库。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-04-25T13:20:21.797

`Dispose`应该用于任何*生命周期有限*的资源。终结器应该用于任何*非托管资源*。任何非托管资源都应该有一个有限的生命周期，但是有很多托管资源（如锁）也有有限的生命周期。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-04-25T13:17:03.187

如果您聚合`IDisposable`s 那么您应该实现接口以便及时清理这些成员。`myConn.Dispose()`在您引用的 ADO.Net 连接示例中，还会如何调用？

我认为*在这种情况下*说一切都是非托管资源是不正确的。我也不同意你同事的观点。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-04-25T13:17:51.113

你说的对。托管数据库连接、文件、注册表项、套接字等都保留在非托管对象上。这就是他们实施`IDisposable`. 如果您的类型拥有一次性对象，您应该在您的方法中实现`IDisposable`和处置它们。`Dispose`否则，它们可能会一直存活，直到垃圾收集导致锁定文件和其他意外行为。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-05-01T20:55:07.967

> 一切最终都是非托管资源。

不对。除了仅由框架管理（分配和释放）的 CLR 对象使用的内存之外的所有内容。

实现`IDisposable`和调用`Dispose` **不持有任何非托管资源**（直接或间接通过依赖对象）的对象是**没有意义**的。它不会**使**释放该对象具有**确定性**，因为您**不能自己直接释放对象的 CLR 内存，**因为它始终只能`GC`这样做。对象是引用类型，因为值类型在方法级别直接使用时，由堆栈操作分配/释放。

现在，每个人都声称自己的答案是正确的。让我**证明**我的。根据[文件](http://msdn.microsoft.com/en-us/library/system.object.finalize.aspx)：

> **Object.Finalize 方法允许对象在被垃圾回收器回收之前**尝试释放资源并执行其他清理操作。

 **换句话说，对象的 CLR 内存在`Object.Finalize()`被调用后被释放。[注意：如果需要，可以显式跳过此调用]

这是一个没有非托管资源的一次性类：

```
internal class Class1 : IDisposable
{
    public Class1()
    {
        Console.WriteLine("Construct");
    }

    public void Dispose()
    {
        Console.WriteLine("Dispose");
    }

    ~Class1()
    {
        Console.WriteLine("Destruct");
    }
} 
```

请注意，[析构函数](http://msdn.microsoft.com/en-us/library/66x5fx1b%28v=vs.100%29.aspx)隐式调用`Finalize`继承链中的每个`Object.Finalize()`

这是`Main`控制台应用程序的方法：

```
static void Main(string[] args)
{
    for (int i = 0; i < 10; i++)
    {
        Class1 obj = new Class1();
        obj.Dispose();
    }

    Console.ReadKey();
} 
```

如果调用`Dispose`是一种以确定性方式释放**托管**对象的方法，那么每个“Dispose”都会紧跟“Destruct”，对吗？亲眼看看会发生什么。从命令行窗口运行这个应用程序是最有趣的。

*注意：有一种方法可以强制`GC`收集当前应用程序域中等待完成的所有对象，但不收集单个特定对象。不过，您无需调用`Dispose`即可在完成队列中拥有对象。强烈建议不要强制收集，因为它可能会损害整体应用程序性能。*

**编辑**

有一个例外——状态管理。`Dispose`如果您的对象碰巧管理外部状态，则可以处理状态更改。即使状态不是非托管对象，由于特殊处理，使用它也非常方便`IDisposable`。示例是安全上下文或模拟上下文。

```
using (WindowsImpersonationContext context = SomeUserIdentity.Impersonate()))
{
    // do something as SomeUser
}

// back to your user 
```

*这不是最好的例子，因为在`WindowsImpersonationContext`内部使用系统句柄，但你得到了图片。*

底线是，在实施时，`IDisposable`您需要（或计划）在`Dispose`方法中做一些有意义的事情。否则只是浪费时间。`IDisposable`不会改变 GC 管理对象的方式。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-04-25T14:26:44.033

如果你的类型引用了非托管资源或者它持有对实现 IDisposable 的对象的引用，则你的类型应该实现 IDisposable。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-05-18T15:31:12.643

在我的一个项目中，我有一个内部包含托管线程的类，我们将它们称为线程 A 和线程 B，以及一个 IDisposable 对象，我们将其称为 C。

A 用于在退出时处理 C。B 曾经使用 C 来保存异常。

我的班级必须实现 IDisposable 和 decrtuctor 以确保以正确的顺序处理事物。是的，GC 可以清理我的物品，但我的经验是除非我管理好班级的清理工作，否则会出现竞争状况。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-08-31T14:16:28.750

简短的回答：绝对不是。如果您的类型具有托管或非托管成员，则应实现 IDisposable。

现在详细信息：我已经回答了这个问题，并在 StackOverflow 上提供了有关内存管理内部和 GC 问题的更多详细信息。这里仅仅是少数：

*   [依赖 .NET 自动垃圾收集器是不好的做法吗？](https://stackoverflow.com/questions/7520881/is-it-bad-practice-to-depend-on-the-net-automated-garbage-collector/8419359#8419359)
*   [如果我不对笔对象调用 Dispose 会发生什么？](https://stackoverflow.com/questions/4267729/what-happens-if-i-dont-call-dispose-on-the-pen-object/5555243#5555243)
*   [Dispose，什么时候调用？](https://stackoverflow.com/questions/2871888/dispose-when-is-it-called/9432317#9432317)

至于 IDisposable 实现的最佳实践，请参考我的博文：

**[您如何正确实现 IDisposable 模式？](http://dave-black.blogspot.com/2011/03/how-do-you-properly-implement.html)**

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-08-01T03:10:26.037

**`IDisposable`如果对象拥有任何非托管对象*或*任何托管一次性对象，则实施**

如果一个对象使用非托管资源，它应该实现`IDisposable`. 拥有一次性对象的对象应实现`IDisposable`以确保释放底层非托管资源。如果遵循规则/约定，因此可以得出结论，不释放托管一次性对象等于不释放非托管资源是合乎逻辑的。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-10-26T16:08:30.430

根本不需要*资源*（托管或非托管）。通常，`IDisposable`这只是消除 conbersome的一种*方便方法*`try {..} finally {..}`，只需比较：

```
 Cursor savedCursor = Cursor.Current;

  try {
    Cursor.Current = Cursors.WaitCursor;

    SomeLongOperation();
  }
  finally {
    Cursor.Current = savedCursor;
  } 
```

和

```
 using (new WaitCursor()) {
    SomeLongOperation();
  } 
```

哪里适合：`WaitCursor`_`IDisposable``using`

```
 public sealed class WaitCursor: IDisposable {
    private Cursor m_Saved;

    public Boolean Disposed {
      get;
      private set;
    }

    public WaitCursor() {
      Cursor m_Saved = Cursor.Current;
      Cursor.Current = Cursors.WaitCursor;
    }

    public void Dispose() {
      if (!Disposed) {
        Disposed = true;
        Cursor.Current = m_Saved;
      }
    }
  } 
```

您可以轻松地*组合*这些类：

```
 using (new WaitCursor()) {
    using (new RegisterServerLongOperation("My Long DB Operation")) {
      SomeLongRdbmsOperation();  
    }

    SomeLongOperation();
  } 
```**

# jquery - 具有多个ajax调用的同一对象上的jquery blockui？

> ID：10316419
> 
> 赞同：0
> 
> 时间：2012-04-25T13:13:02.730
> 
> 标签：jquery, jquery-blockui

我有 2 个 ajax 调用，可能需要不同的时间才能完成。我称它们为“平行”，即。在代码中触发两个 ajax 请求。

我如何使用 blockUI 在两个调用的开始和完成时出现。我不希望在我试图阻止的同一件事上使用两个面具（这是我现在正在做的黑客行为）。不喜欢使用全局状态等，因为可能会遇到锁定问题？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:30:08.917

使用一些变量来存储块状态

```
 var isBlocked = false;
  //First ajax call.
  $.ajax({type: "POST",
          url: "/some/url1",
          data: {"param1":value1},
          beforeSend: function() {
            if(!isBlocked) {
              $('#my_div').block({message: null});
              isBlocked = true;
            }
          },
          success: function(data) {
            // code
          },
          error: function(request, textStatus, errorThrown) {
            // code
          },
          complete: function(request, textStatus){
            if(isBlocked){
              $('#my_div').unblock();
              isBlocked = false;
            }
          }
  });

  //Second ajax call.
  $.ajax({type: "POST",
          url: "/some/url2",
          data: {"param1":value1},
          beforeSend: function() {
            if(!isBlocked) {
              $('#my_div').block({message: null});
              isBlocked = true;
            }
          },
          success: function(data) {
            // code
          },
          error: function(request, textStatus, errorThrown) {
            // code
          },
          complete: function(request, textStatus){
            if(isBlocked){
              $('#my_div').unblock();
              isBlocked = false;
            }
          }
  }); 
```

# testing - Erlang's Common Test on Windows 的 enoent 错误的解决方法？

> ID：10316420
> 
> 赞同：0
> 
> 时间：2012-04-25T13:13:05.763
> 
> 标签：testing, erlang, tdd

在 Windows 上使用带有 Erlang 的 Common Test 时，我遇到了很多 Common Test 和 Erlang 的错误。一方面，如果项目路径中有任何空格，Common Test 通常会彻底失败。为了解决这个问题，我将项目移动到没有空格的路径（但我真的希望开发人员能够修复这些库，以便它们在 Windows 上更好地工作）。现在，我让 Common Test 大部分时间都在运行，只是它最后不会打印出 HTML 报告。这是我在测试运行后得到的错误：

```
Testing myapp.ebin: EXIT, reason {
{badmatch,{error,enoent}},
              [{test_server_ctrl,start_minor_log_file1,4,
                                 [{file,"test_server_ctrl.erl"},{line,1959}]},
               {test_server_ctrl,run_test_case1,11,
                                 [{file,"test_server_ctrl.erl"},{line,3761}]},
               {test_server_ctrl,run_test_cases_loop,5,
                                 [{file,"test_server_ctrl.erl"},{line,3032}]},
               {test_server_ctrl,run_test_cases,3,
                                 [{file,"test_server_ctrl.erl"},{line,2294}]},
               {test_server_ctrl,ts_tc,3,
                                 [{file,"test_server_ctrl.erl"},{line,1434}]},
               {test_server_ctrl,init_tester,9,
                                 [{file,"test_server_ctrl.erl"},
                                  {line,1401}]}]} 
```

如果测试函数名称太长或名称中有太多下划线（我怀疑这也是一个错误）或太多测试失败（这意味着 Common Test 对我来说毫无用处），有时会在 Erlang R15 和更早版本中发生这种情况对于 TDD）。但现在它发生在 R15B01 中的 Common Test 的每个 ct:run 上。有谁知道我该如何解决这个问题？有没有人在 Windows 上使用 TDD 和 Common Test 取得任何成功？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:16:29.607

鉴于最后一条评论，您可能想要禁用 buildin_hooks。您可以通过将以下内容传递给 ct:run/1 或 ct_run

```
{enable_builtin_hooks,false} 
```

那应该禁用 cth_log_redirect 钩子，并可能在过载期间解决您的问题。

# c# - 在 IE 中提交后清除不需要的 FileUpload 文本框

> ID：10316426
> 
> 赞同：0
> 
> 时间：2012-04-25T13:13:20.900
> 
> 标签：c#, javascript, .net, internet-explorer, file-upload

由于无法更改 FileUpload 按钮文本，因此我隐藏了 FileUpload 控件并使用我自己的假按钮和文本框来做到这一点。

```
<script language="JavaScript" type="text/javascript">
  function HandleFileButtonClick(sender) {
   var parentDiv = $(sender).parent();
   $(parentDiv).children('[id*=fuBoutiqueImage]').click();
  }
  function LoadFakeField(sender) {
   $(sender).parent().find("input[id$='txtFakeText']").val($(sender).val());
  }
</script>

<asp:Panel ID="pnlCommandButtons" runat="server" CssClass="commandButtons">
 <div class="uploader">
  <asp:Label ID="lblUploadFile" EnableViewState="false" runat="server" Text="<%$Resources:Common, BoutiqueGallery_UploadFile %>" />
  <asp:FileUpload ID="fuBoutiqueImage" runat="server" style="" onchange="LoadFakeField(this);" />

  <input ID="txtFakeText" type="text" name="txtFakeText" readonly="true" runat="server" />
  <input ID="btnFakeButton" type="button" onclick="HandleFileButtonClick(this);" value="<% $Resources:Common, ButtonName_Browse %>" runat="server" />
 </div>

 <asp:Panel ID="pnlDeleteButton" class="delete" runat="server">
  <ef:ButtonExt ID="btnDelete" runat="server" Text="<%$Resources:Common, BoutiqueGallery_Delete %>" OnClick="btnDelete_Click" CausesValidation="false" Color="Red" Icon="Delete" Width="60" />
 </asp:Panel>
 <div id="pnlAddButton" class="add">
   <ef:ButtonExt ID="btnAdd" runat="server" Text="<%$Resources:Common, UploadImage %>" OnClick="btnAdd_Click" ValidationGroup="emailSend" Width="104" />
   <asp:CustomValidator ID="CustomValidator1" runat="server" ControlToValidate="fuBoutiqueImage" ErrorMessage="<%$Resources:Common, Attachment_FileToLarge %>" Text="<%$Resources:Common, Attachment_FileToLargeTextBox %>"  Display="Dynamic" OnServerValidate="CustomValidator1_ServerValidate" ValidationGroup="emailSend"></asp:CustomValidator>
<asp:RegularExpressionValidator ID="FileUpLoadValidator" runat="server" ErrorMessage="<%$Resources:Common, Attachment_FileFormat %>" Text="<%$Resources:Common, Attachment_FileFormatTextbox %>" ValidationExpression=".*(\.jpg|\.png|\.gif|\.tif|\.jpeg|\.JPG|\.JPEG|\.PNG|\.GIF|\.TIF)$" ControlToValidate="fuBoutiqueImage" Display="Dynamic" ValidationGroup="emailSend" />
 </div>
 <div class="isActiveCheckbox">
 <asp:CheckBox ID="cbImageIsActive" class="chkItem" OnCheckedChanged="cbImageIsActive_CheckedChanged" Checked='<%# Eval("IsActive") %>' AutoPostBack="true" runat="server" Text="<%$Resources:Common, BoutiqueGallery_IsImageActive %>" />
 </div>
</asp:Panel> 
```

我的 btnFakeButton 触发 FileUpload 点击操作，然后路径/文件名被复制到假文本框。然后我可以单击 btnAdd 并且在 ff 中一切正常，但在 IE 中却不行。

在 IE 中选择文件并关闭对话框后，路径/文件名被复制，但是当我按下 btnAdd（或单击复选框）时，FileUpload 文本框被清除并且没有任何反应。第二次按下 btnAdd 后，btnAdd_Click 启动，但 FileUpload 为空，并以错误结束。由于我无法从 txtFakeText 恢复 FileUpload 文本框，有什么方法可以防止 FileUpload 清除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T21:59:39.517

我就是这样做的，虽然我只需要为 IE 设计，所以我没有在其他浏览器中测试过。此外，我使用标签而不是文本框来显示选定的文件名。

我必须感谢这个网站让我走上了正确的道路： http: [//www.codeproject.com/Tips/296593/To-trigger-Choose-file-to-Upload-dialogue-box-with](http://www.codeproject.com/Tips/296593/To-trigger-Choose-file-to-Upload-dialogue-box-with)

本质上，我所做的是创建两个按钮，就像您所做的那样。我使用 CSS 使文件上传控制按钮与我的“假”按钮大小相同。然后，我将“假”按钮的 z-index 设置为 -1，并将其直接放在文件上传控制按钮的后面。然后，我将文件上传控制按钮的不透明度设置为0。这样，“假”按钮没有被使用，也不会遇到点击提交时真实文件上传框被清除的问题。最后一步（链接文章中没有详细说明）是将文件上传按钮的“onchange”更改为更新文件名标签值的功能。

这是代码：

```
function updateUploadLabel() {
        document.getElementById("<%= FileUpload1.ClientID %>").click();
        document.getElementById("<%= lblFileName.ClientID %>").innerHTML = document.getElementById("<%= FileUpload1.ClientID %>").value;
        document.getElementById("txtInstructions").disabled = "true";
        document.getElementById("removeUpload").style.display = 'inline';
    }
<asp:FileUpload id="FileUpload1" onchange="updateUploadLabel()" runat="server" style="position: relative; opacity: 0; filter: alpha(opacity = 0);left:0px;font-size:24px; z-index:50; width:100px;/*display:none;*/"/>
<input type="button" id="btnChooseDoc" value="Choose File..." onclick="updateUploadLabel()" style="height:30px; width:100px; z-index: -1; position:relative; left: -105px; top: -10px;" />
<asp:Label id="lblFileName" runat="server" text='No File Chosen' style="position:relative; left: -105px; top: -10px;"></asp:Label> 
```

# c - {0} 和“”有什么区别？

> ID：10316436
> 
> 赞同：7
> 
> 时间：2012-04-25T13:14:08.610
> 
> 标签：c

我想知道两者之间是否有区别：

```
char s[32] = ""; 
```

和：

```
char s[32] = {0}; 
```

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-25T13:16:22.730

不，两种声明之间没有区别：

```
char bla[32] = {0};

and

char bla[32] = ""; 
```

请参阅 C 标准的相关段落（强调我的）：

> (C99, 6.7.8p21) “如果大括号括起来的列表中的初始化程序少于聚合的元素或成员，或者用于初始化已知大小数组的**字符串文字中的字符少于**数组，聚合的其余部分应隐式初始化，与具有静态存储持续时间的对象相同。”

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-25T13:16:11.520

在这种情况下，没有区别，两者都将数组的所有槽初始化为 0。通常，`""`仅适用于`char` 数组（有或没有类似`const`or的修改`unsigned`），但`{0}`适用于所有数字类型的数组。

在标准 (n1570) 的第 6.7.9 节中，第 21 点为

> 如果大括号括起来的列表中的初始值设定项少于聚合的元素或成员，或者用于初始化已知大小数组的字符串文字中的字符少于数组中的元素，则聚合的其余部分应隐式初始化与具有静态存储持续时间的对象相同。

所以甚至`""`初始化完整的数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T13:16:58.080

两个表达式的结果是一样的：一个空字符串。但是，第一个更明确，因此更具可读性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-25T13:18:49.367

没有区别。你也可以亲眼看看！这是你能得到的最可靠的答案。只需使用调试器。执行这两行并比较结果。但是你应该重命名数组。我使用 gcc/gdb 并编译以下代码

```
int main(int argc, char* argv[])
{
    char s[5] = {0};
    char t[5] = "";
    return 0;
} 
```

通过 gcc -g test.c 然后调用 gdb a.out。在 gdb 我输入

```
break 5
run
print s 
```

最后一条语句由 gdb 回答，输出如下：

```
$1 = "\000\000\000\000" 
```

我继续并输入“print t”并得到相应的

```
$2 = "\000\000\000\000" 
```

这告诉我，使用我选择的编译器，两个语句都会产生相同的结果。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-25T13:27:20.750

除了已经说过的：

```
char s[32] = ""; 
```

=

```
char s[32] = {'\0'}; 
```

=

```
char s[32] = {0}; 
```

=

```
char s[32] = {0, 0, 0, /* ...32 zeroes here*/ ,0 }; 
```

所有这些都将产生*完全相同*的机器代码：一个全零填充的 32 字节数组。

# tridion2009 - Tridion 2009 在代理中嵌入元数据存储格式

> ID：10316439
> 
> 赞同：9
> 
> 时间：2012-04-25T13:14:18.803
> 
> 标签：tridion2009, tridion

我对 Tridion 还很陌生，我必须实现允许内容编辑器创建组件并为其分配多个日期范围（可用日期）的功能。这些将需要从代理查询以提供搜索功能。

最初，这只需要一个开始和结束日期，因此被实现为单独的元数据字段。

我建议在架构的“可用日期”元数据字段中使用嵌入式架构，以允许分配多个开始和结束日期。

但是，由于该字段现在允许多个值，因此数据在代理中存储为“KEY_STRING_VALUE”列中的逗号分隔值，而不是“KEY_DATE_VALUE”列中的日期值，因为它只允许单个开始值和结束值。

例如。
KEY_NAME | KEY_STRING_VALUE
结束日期 | 2012-04-30T13:41:00、2012-06-30T13:41:00
开始日期 | 2012-04-21T13:41:00, 2012-06-01T13:41:00

这现在导致我的代理查询出现问题，因为我不能再使用简单的查询逻辑来检索基于日期进行搜索所需的项目。

在我开始编写 C# 逻辑来解析这些逗号分隔的日期并根据这些日期进行搜索之前，我想知道是否有人过去有类似的要求/经验并以不同的方式实现了这一点，以减少所需的代码解析量和使用代理查询来完成搜索。

我正在 Tridion 2009 上开发它，但使用 5.3 Broker（出于遗留原因），因此查询当前看起来像这样（对于单个开始/结束日期）：

```
query.SetCustomMetaQuery((KEY_NAME='end_date' AND KEY_DATE_VALUE>'" + startDateStr + "') AND (ITEM_ID IN(SELECT ITEM_ID FROM CUSTOM_META WHERE KEY_NAME='start_date' AND KEY_DATE_VALUE<'" + endDateStr + "')))"; 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T13:34:34.490

只是想回来并详细说明如果其他人面临同样的情况，我最终是如何解决这个问题的。

我向客户提出了设定数量的字段（如 Miguel 所建议的那样），但客户对这种级别的限制不满意。

因此，我最终实现了包含开始和结束日期的可嵌入模式，它提供了最大的灵活性。但是，Broker API 的限制意味着我必须直接访问 Broker DB - 这并不理想，但客户端已同意获取所需功能的方法。显然，如果将来进行任何升级，则需要重新考虑这一点。

所有日期和可用期间的处理都是在 C# 中完成的，这意味着该解决方案的性能实际上相当不错。

我确实发现导致一些问题的一件事是，如果您有多个使用嵌入式架构的字段值（即在这种情况下，多个开始和结束日期），则元数据存储在*CUSTOM_META*表的*KEY_STRING_VALUE*列中. 但是，如果您在字段中只有一个值（即一个开始和结束日期），那么这些值将作为日期存储在*KEY_DATE_VALUE*列中，就像您只使用单个字段而不是可嵌入模式一样。对于 Tridion 来说，这似乎是一种明智的做法，但它在编写查询和解析代码时会稍微复杂一些！

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T15:31:38.097

这是一个复杂的场景，因为您必须遍历所有 DCP 并解析这些字符串以确定是否匹配搜索条件

有一种方法可以将元数据（逗号分隔）转换为代理中的单个值，但字段的名称需要不同 Range1、Range2、....、RangeN 您可以使用部署程序扩展来执行此操作更改包的 XML 结构并将每个字符串转换为不同的值（1,2，..，n）。如果您不熟悉部署程序扩展并且不能 100% 解决您的方案，则此扩展可能需要一些时间。

这样做的问题是您仍然必须应用几个条件来检索这些值，并且您必须设置一个限制（与可以根据需要添加任意值的用户相比）

样本：

```
query.SetCustomMetaQuery((KEY_NAME='end_date1'
query.SetCustomMetaQuery((KEY_NAME='end_date2'
query.SetCustomMetaQuery((KEY_NAME='end_date3'
query.SetCustomMetaQuery((KEY_NAME='end_date4' 
```

实现这一目标的最快和最简单的方法可能是使用多值字段，使用不同的字段。我知道这不是最通用的场景，并且存在业务需求影响，但可以简化开发。

我之前的评论是在仅使用 Broker API 的上下文中，但如果它是您架构的一部分，您可以利用搜索引擎。您可以索引代理数据库并处理数据。使用搜索引擎 API，您可以提取组件/组件模板的 id，并使用代理 API 来检索正确的信息**

# macos - 调用 dylib 方法时将无法识别的选择器发送到实例

> ID：10316440
> 
> 赞同：3
> 
> 时间：2012-04-25T13:14:18.883
> 
> 标签：macos, cocoa, dylib

我有以下代码来加载 dylib：

```
void* lib_handle = dlopen("./newCocoaLib.dylib", RTLD_LOCAL);
if (!lib_handle) {
    exit(EXIT_FAILURE);
}

// Get the Person class from newCocoaLib.dylib.
Class Person_class = NSClassFromString(@"newCocoaLib");
if (!Person_class) {
    exit(EXIT_FAILURE);
}

id personObj = [Person_class new];
//calling the method of newCocoaLib of newCocoaLib.dylib
[personObj displayNameFromNewCocoaLib];//unrecognized selector sent to instance 
```

可能是什么问题？有任何想法吗？

# javascript - 删除并检测 Tinyscrollbar

> ID：10316442
> 
> 赞同：1
> 
> 时间：2012-04-25T13:14:22.753
> 
> 标签：javascript, jquery

我正在使用[Tinyscrollbar](http://www.baijs.nl/tinyscrollbar/) jquery 插件，但有两个小问题我自己无法解决。除此之外，一切都很好。

首先，有什么方法可以检测是否将 tinyscrollbar 添加到元素中？我正在动态添加 tinyscrollbar，我需要一种方法来检测它是否已经添加。如果它已经添加，我想最好使用更新方法。

我的第二个问题是是否可以从我的元素中删除 tinyscrollbar。我正在“关闭”元素（宽度设置得非常小），并且我不希望我的用户能够再在该元素上滚动。我可以将类禁用添加到我的 tinyscrollbar 元素中，但这只会隐藏滚动条。仍然可以使用鼠标滚轮滚动。

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:04:50.423

您可以通过检查 $( "#your-scrollbar-container-id" ).data('tsb') 是否为空来检查是否加载了 tinyscrollbar。

嗯，没有删除方法。您可能可以取消绑定滚动事件。

# javascript - qooxdoo 销毁, 处置

> ID：10316443
> 
> 赞同：1
> 
> 时间：2012-04-25T13:14:23.897
> 
> 标签：javascript, qooxdoo

谁能给出一个完整的例子来说明 dispose 和 destruct 在 qooxdoo 1.6 中是如何工作的？，我在 qooxdoo 演示或文档中找不到任何好的示例。

感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T08:12:53.487

处置和销毁实际上是同一枚硬币的两个方面：处置是销毁对象的行为。通过将 __destruct() 视为 onDispose() 方法，您可能会更清楚它们的区别。

根据经验，任何创建 QX 对象的类都应负责正确销毁它们。通常这是由类的析构函数完成的，但根据您的业务逻辑可能随时发生。

处置是通过（例如）

```
this._disposeObjects("_buttonOk", "_buttonCancel");
this._disposeArray("_children");
this._disposeMap("_registry"); 
```

来电。一些类可能会为它们的销毁提供exploit方法，如qx.ui.core.Widget

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T21:18:46.800

如果您使用对象，则不需要实现 dispose。只需要 destruct，而不是所有内容（请参阅上文以了解您应该删除哪个，不需要删除哪个）

它看起来像这样：

```
qx.Class.define("q.view.Home"),{
    extend : qx.ui.core.Widget,
    construct:function(){
        this.base(arguments);
    },
    members:{
        __qooxdoo_object:null
    },
    destruct:function(){
        this._disposeObjects("__qooxdoo_object");
    }
}); 
```

就这么简单。关于内存管理链接：这非常重要：“qx.disposerDebugLevel”：“2”

它会自动报告（例如在萤火虫上）没有正确销毁的对象。

因此，您将能够确切地知道应该删除什么，以适当的方式删除什么。

另外，想象一下，你有一个包含 5 个孩子的容器（例如，复合容器或任何东西），你想清空内容而不是容器，你应该这样做：

（根据容器是所有子元素的父元素）

```
var childrenList = container.removeAll();
for(var i=0; i<childrenList.length; ++i){
  childrenList[i].dispose();
} 
```

如果您仅出于某种原因处置对象，我不知道 Widget 类（在 qooxdoo 框架中）有时会引发错误。如果您只删除所有，它不会处理孩子，而只会删除它们。如果您同时执行（dispose 和 removeAll），您将没有问题，并且孩子会得到妥善处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T06:07:09.437

也许 qooxdoo 手册中有关内存管理的文档可能会有所帮助： http: [//manual.qooxdoo.org/devel/pages/development/memory_management.html](http://manual.qooxdoo.org/devel/pages/development/memory_management.html)

# c# - 使用 lambda 函数的列表中对象属性值的总和

> ID：10316444
> 
> 赞同：12
> 
> 时间：2012-04-25T13:14:25.780
> 
> 标签：c#, list, properties, lambda

我有以下内容：`List<OutputRow>`其中包含许多`OutputRow`对象。

我想知道是否有办法让我在列表中使用 lambda 函数来返回列表中每个 OutputRow 对象上某个 propertyX 的值的总和。

示例列表：

```
OutputRow.propertyX = 4  
OutputRow.propertyX = 6  
OutputRow.propertyX = 5 
```

返回 15

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-25T13:15:51.287

**测试数据**

```
var ls=new List<OutputRow>();
ls.Add(new OutputRow(){propertyX=4});
ls.Add(new OutputRow(){propertyX=6});
ls.Add(new OutputRow(){propertyX=5}); 
```

**拉姆达**

```
var total= ls.Sum(x=>x.propertyX); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T13:17:03.467

像这样的东西：

```
var yourSum = yourOutputRowList.Sum(x => x.propertyX); 
```

# asp.net - 如何通过调用 ASP.NET 中的服务器端函数来应用客户端验证

> ID：10316446
> 
> 赞同：0
> 
> 时间：2012-04-25T13:14:36.497
> 
> 标签：asp.net, validation, serverside-javascript

我有一个 ASP.NET Web 窗体应用程序。

我有一个`Form`不同的`TextBox`，现在我有几个`asp:RequiredFieldValidator`链接到它们属于同一个`ValidationGroup`。

现在我必须申请一些`TextBox`带有相关错误消息的附加验证。具体来说，我要检查里面的文字是否`TextBox`是a `Guid`。此外，此检查必须即时完成，这意味着只要用户将光标从`TextBox`验证中移动，就必须执行验证，而无需按下提交。

1.  如何`IsGuid(string guid)`从 Javascript 调用函数？

2.  如何附加两个不同的错误消息作为验证（例如，如果`TextBox.Text`不允许使用字符并且长度 < N，我想显示一条消息）

3.  **使用jQuery**还是使用**ASP.NET 验证器**更容易实现此验证？

如果其他人对其实施有任何其他想法，请随时提出。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:18:35.313

您可以使用[RequalExpressionValidator](http://msdn.microsoft.com/en-us/library/eahwtc9e%28v=vs.71%29.aspx)控件。

[这](https://stackoverflow.com/a/856339/782754)是一个正则表达式

```
^(\{){0,1}[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}(\}){0,1}$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:21:31.657

您可以根据需要将任意数量的验证器应用于同一控件，在本例中为您的 TextBox。

在这种情况下，自定义验证器是可行的方法，因为它使您能够使用您开发的任何功能进行验证以满足您的需求。请看一下这个简单的[教程](http://www.4guysfromrolla.com/articles/073102-1.aspx)。

**更新 1**：服务器端验证

这是它在 CustomValidator 的声明中调用服务器端函数的方式：

```
<asp:CustomValidator runat="server" id="custPrimeCheck"
    ControlToValidate="txtPrimeNumber"
    OnServerValidate="PrimeNumberCheck"
    ErrorMessage="Invalid Prime Number" /> 
```

“PrimeNumberCheck”VB 函数示例：

```
Sub PrimeNumberCheck(sender as Object, args as ServerValidateEventArgs)
Dim iPrime as Integer = Cint(args.Value), iLoop as Integer, _
    iSqrt as Integer = CInt(Math.Sqrt(iPrime))

For iLoop = 2 to iSqrt
  If iPrime mod iLoop = 0 then
    args.IsValid = False
    Exit Sub
  End If
Next

args.IsValid = True
End Sub 
```

**更新 2**：客户端验证

这是它在 CustomValidator 的声明中调用服务器端函数的方式：

```
<asp:CustomValidator runat="server" id="custPrimeCheck"
    ControlToValidate="txtPrimeNumber"
    ClientValidationFunction="CheckPrime"
    ErrorMessage="Invalid Prime Number" /> 
```

“CheckPrime”JavaScript 函数的示例：

```
function CheckPrime(sender, args)
{
    var iPrime = parseInt(args.Value);
    var iSqrt = parseInt(Math.sqrt(iPrime));

    for (var iLoop=2; iLoop<=iSqrt; iLoop++)
      if (iPrime % iLoop == 0) 
      {
          args.IsValid = false;
         return;
      }

    args.IsValid = true;
} 
```

感谢@AdrianIftode 让我意识到这一点。

# php - 阻止 " 和 ' 在输入字段中输入

> ID：10316450
> 
> 赞同：-1
> 
> 时间：2012-04-25T13:14:54.330
> 
> 标签：php, string

我得到了这样简单的代码：

```
 private function edit_keywords($text)
{
    $tresc = str_replace("\n","",$text);
    $tresc = str_replace("\r","",$text);
    if(strpos($text,'"')!==FALSE)
    {
        array_push($this->warnings,"Not allowed character found in keywords \".");
        return;
    } 
```

目前这将阻止**“**进入我也想阻止**”**。如何做到这一点？

替换 ' 也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:17:07.027

**试试这个 ：**

```
<?php

private function edit_keywords($text)
{
    $tresc = str_replace("\n","",$text);
    $tresc = str_replace("\r","",$text);

    if ((strpos($text,'"')!==FALSE)||(strpos($text,"'")!==FALSE))
    {
        array_push($this->warnings,"Not allowed character found in keywords \".");
        return;
    }

?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-25T13:16:45.847

`strpos`您可以使用双引号 ( `"'"`) 或转义单引号：为单引号编写第二次检查`'\''`。

```
if(strpos($text,'\'')!==FALSE)
{
    array_push($this->warnings,"Not allowed character found in keywords \".");
    return;
} 
```

最终，您可能会达到一个复杂程度，您希望将要测试的所有字符存储在一个数组中，并对其进行迭代，而不是不断地追加新`if`语句：

```
$bad_chars = array('"', '\'');

foreach ($bad_chars as $bad_char) {
  if (strpos($text, $bad_char) !== false) {
    array_push($this->warnings,"Not allowed character found in keywords \".");
    return; # or break, to stop after the first disallowed characte
  }
} 
```

# android - 3 个类 A 打开 C 和 B 打开 C 其中一个触发了 C android

> ID：10316454
> 
> 赞同：-2
> 
> 时间：2012-04-25T13:15:01.053
> 
> 标签：android

android 我有 3 个班级，第一个和第二个班级通过 startactivityforresult 进入第三个班级，每个班级做不同的处理我想知道如何从第三个班级知道哪个班级（第一个或第二个）打开了第三个班级换句话说 A=>C 和 B=>C 哪一个打开 C 对不起英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:34:15.660

启动活动时是否使用 startActivityForResult？看看[getCallingActivity](http://developer.android.com/reference/android/app/Activity.html#getCallingActivity%28%29 "获取呼叫活动")。如果您只是以基本意图开始其他活动，则必须添加额外内容并获取额外内容以识别调用活动 C 的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:20:50.487

在说开始活动以获得结果之前说..

```
intent.put("className" , "A"); // A is your class name 
```

在其他班级说。

```
getIntent.getExtra("className"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:17:25.990

在`Intent`启动`Activity`.

```
Intent myIntent = new Intent(this, C.class);
myIntent.putExtra("activityThatStartedMe", getClass().getName()); 
```

在您的另一个`Activity`中，您应该可以通过“activityThatStartedMe”键将其拉出。

```
String activityName = intent.getExtras().getString("activityThatStartedMe"); 
```

# wcf - 无法从 WCF 测试客户端访问网络 TCP 服务

> ID：10316457
> 
> 赞同：2
> 
> 时间：2012-04-25T13:15:09.803
> 
> 标签：wcf, nettcpbinding

我正在尝试从 IIS 中运行两个 WCF 服务，一个是 Web 服务，一个是 Net TCP 绑定服务。

这是我的 Web.config 的同义词（我已经匿名化了服务名称）：

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="ServerService">
        <endpoint address="ServerService" 
                  binding="netTcpBinding" 
                  bindingConfiguration="" 
                  name="NetTcpEndPoint" 
                  contract="IServerService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex"
                  binding="mexHttpBinding"
                  contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:8523/"/>
            <add baseAddress="htt://localhost:8523/"/>
          </baseAddresses>
        </host>
      </service>

      <service name="MyWebService">
        <endpoint address=""
                  binding="wsHttpBinding"
                  bindingConfiguration=""
                  name="AACCWSEndPoint"
                  contract="IMyWebService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8523/IMyWebService"/>
          </baseAddresses>
        </host>
      </service>

    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

当我在 IDE 中运行它时，它会打开一个在端口 51953 上运行的页面，我可以通过浏览[http://localhost:51953/WebService.svc?wsdl](http://localhost:51953/WebService.svc?wsdl)来获取 Web 服务的 WSDL （注意端口不同）。我似乎无法通过将端口更改为我在 webconfig 文件 (8523) 中指定的端口来获取 WSDL。

当我将 WcfTestClient 应用程序指向“net.tcp://localhost:8523/ServerService”时，它给了我一个错误，说它无法访问元数据，据我所知，我已经配置了（第二个服务的终点）。

我在这里做错了什么？

**更新：**

我尝试按照建议将项目属性上的端口号更改为 8523，但这似乎不起作用，我还尝试将 mex 端点的地址更改为“ServerService\mex”，测试客户端花了一些时间搅动但是然后它抛出了以下错误：

> 错误：无法从 net.tcp://localhost:8523/ServerService 获取元数据 如果这是您有权访问的 Windows (R) Communication Foundation 服务，请检查您是否已在指定地址启用元数据发布。有关启用元数据发布的帮助，请参阅位于 [http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata](http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata) Exchange 错误 URI：net.tcp://localhost:8523/ServerService 元数据包含的 MSDN 文档无法解析的引用：'net.tcp://localhost:8523/ServerService'。您尝试为不支持 .Net 框架的服务创建通道。您可能会遇到 HTTP 端点。预期的记录类型“PreambleAck”，发现“72”。

我会继续挖掘，但我会很感激任何帮助。

**更新 2：**

我已将 mex 端点更改为 mexTcpBinding：这是服务标签：

```
 <endpoint address="ServerServiceWS"
              binding="wsHttpBinding"
              bindingConfiguration=""
              name="WSEndPoint"
              contract="IServerService">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="mex"
              binding="mexTcpBinding"
              contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://localhost:8523/"/>
        <add baseAddress="http://localhost:8523/"/>
      </baseAddresses>
    </host>
  </service> 
```

仍然没有运气。为了确保我在测试仪中输入了正确的 url，我使用的 Url 是：

```
net.tcp://localhost:8523/ServerService 
```

我也试过：

```
net.tcp://localhost:8523/mex 
```

和

```
net.tcp://localhost:8523/ 
```

所有这些都给了我以下错误的一些变化：

> 错误：无法从 net.tcp://localhost:8523/ServerService 获取元数据 如果这是您有权访问的 Windows (R) Communication Foundation 服务，请检查您是否已在指定地址启用元数据发布。有关启用元数据发布的帮助，请参阅位于 [http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata](http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata) Exchange 错误 URI：net.tcp://localhost:8523/ServerService 元数据包含的 MSDN 文档无法解析的引用：'net.tcp://localhost:8523/ServerService'。您尝试为不支持 .Net 框架的服务创建通道。您可能会遇到 HTTP 端点。预期的记录类型“PreambleAck”，发现“72”。

**更新 3**

FWIW 我认为我的 WEb.config 可能存在更大的问题这是它目前的样子：

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="ServerService">
        <endpoint address="" 
                  binding="netTcpBinding" 
                  bindingConfiguration="DefaultBindingConfig" 
                  name="NetTcpEndPoint" 
                  contract="IServerService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>

        <endpoint address="mex"
                  binding="mexTcpBinding"
                  contract="IMetadataExchange" 
                  bindingConfiguration="mexBinding"/>
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:8523/"/>
          </baseAddresses>
        </host>
      </service>

      <service name="MyWebService">
        <endpoint address=""
                  binding="wsHttpBinding"
                  bindingConfiguration=""
                  name="MyWSEndPoint"
                  contract="IMyWebService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex"
                  binding="mexHttpBinding"
                  contract="IMetadataExchange"
                  bindingConfiguration="mexHttpBinding"/>
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8523/MyWebService"/>
          </baseAddresses>
        </host>
      </service>

    </services>
    <bindings>
      <netTcpBinding>
        <binding name="DefaultBindingConfig"
                 maxConnections="5"
                 portSharingEnabled="true" >
        </binding>
        <binding name="mexBinding"
                 portSharingEnabled="true">
          <security mode="None"></security>
        </binding>
      </netTcpBinding>
      <mexTcpBinding>
        <binding name="mexTcpBinding"/>
      </mexTcpBinding>
      <mexHttpBinding>
        <binding name="mexHttpBinding"/>
      </mexHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServerServiceBehaviour">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
        <behavior name="MexBehaviour">
          <serviceMetadata httpGetEnabled="true" policyVersion="Policy15"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

我可以浏览到 Web 服务，这允许我使用 ?wsdl 获取 WSDL，但是如果我将地址[http://localhost:8523/MyWebService](http://localhost:8523/MyWebService)放入 WCF 测试器，它也会引发错误。

> 错误：无法从[http://localhost:8523/MyWebService](http://localhost:8523/MyWebService)获取元数据 如果这是您有权访问的 Windows (R) Communication Foundation 服务，请检查您是否已在指定地址启用元数据发布。有关启用元数据发布的帮助，请参阅位于 [http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata](http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata) Exchange Error URI: [http://localhost:8523/MyWebService](http://localhost:8523/MyWebService) Metadata contains a reference的 MSDN 文档无法解决：'http://localhost:8523/MyWebService'。[接收对http://localhost:8523/MyWebService](http://localhost:8523/MyWebService)的 HTTP 响应时出错. 这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关更多详细信息，请参阅服务器日志。底层连接已关闭：接收时发生意外错误。无法从传输连接读取数据：现有连接被远程主机强行关闭。远程主机强制关闭现有连接HTTP GET 错误 URI: [http://localhost:8523/MyWebService](http://localhost:8523/MyWebService) 下载“http://localhost:8523/MyWebService”时出错。请求失败，HTTP 状态为 404：未找到。

我认为这个问题要么与路径有关，要么我只是将错误的 URL 放入测试应用程序中。要么，要么我还没有正确配置元数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T13:36:43.700

对于 HTTP 端点，如果使用 IIS Express 托管，您需要[重新配置项目属性](http://msdn.microsoft.com/en-us/library/ms178108.aspx)，以便它在端口 8523 处启动 web.config 定义的端点。使用特定端口 (8523) 而不是自动分配的端口 (51953)。

对于 TCP 元数据，您需要支持启用 TCP 的 mex 端点 ( [`mexTcpBinding`](http://msdn.microsoft.com/en-us/library/aa967279.aspx))。

```
<endpoint address="mex" binding="mexTcpBinding" contract="IMetadataExchange" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-11T08:58:55.610

必须在 IIS 上的不同端口上设置 net.tcp 和 HTTP 绑定。它可以用相同的端口或不同的端口进行测试。它会在第一种情况下崩溃。此外，您可以使用任何您想要的端口号。在这种情况下，可以将 TCP 端口更改为 8524。只是不能在同一个端口上使用两个单独的协议。另一方面，基地址仅对自托管服务有意义。这里的基地址由来自 IIS 的 URL 确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-04T12:21:57.667

只需尝试保持原样，并更改您的服务并将其粘贴到您的配置文件中，它应该可以完美运行。要测试 net.tcp，您可以使用 SvcUtil.exe

```
 <system.serviceModel>
<services>
  <service name="MyWCFServices.HelloWorldService">
    <endpoint
         binding="netTcpBinding"
         bindingConfiguration="ultra"
         contract="MyWCFServices.IHelloWorldService"/>
    <endpoint address="mex" binding="mexTcpBinding" contract="IMetadataExchange"  />
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://localhost:8086/HelloWorldService.svc" />
        <add baseAddress="http://localhost:8081/HelloWorldService.svc" />
      </baseAddresses>
    </host>
  </service>
</services>
<bindings>
  <netTcpBinding>
    <binding name="ultra"
         maxBufferPoolSize="2147483647"
         maxBufferSize="2147483647"
         maxReceivedMessageSize="2147483647"
         portSharingEnabled="false"
         transactionFlow="false"
         listenBacklog="2147483647" >
      <security mode="None">
        <message clientCredentialType="None"/>
        <transport protectionLevel="None" clientCredentialType="None"/>
      </security>
      <reliableSession enabled="false"/>
    </binding>
  </netTcpBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

# c++ - 列和行交换的最佳稀疏矩阵表示

> ID：10316458
> 
> 赞同：4
> 
> 时间：2012-04-25T13:15:10.053
> 
> 标签：c++, data-structures, matrix, sparse-matrix

我正在寻找允许有效行和列交换的稀疏矩阵表示。经典表示（通过压缩行、压缩列或三元组）似乎只允许执行其中一个，但从不允许执行。任何人都知道一个好的数据结构吗？

--编辑--澄清一下，我希望能够交换行，如交换第 5 行和第 7 行，以及交换列，如交换第 6 列和第 8 列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:48:48.843

您可能只想添加另一个间接级别来处理交换效率不高的情况。例如，如果您有一个可以有效交换行但不能交换列的稀疏表示，则有一个从真实列映射到有效列的数组。当您访问一个元素时，请使用该数组来查找正确的底层元素。

```
class SparseMatrix {
  public:
    Element& operator()(Index row,Index col)
    {
      return matrix(row,col_map[col]);
    }

    void swapRows(Index row1,Index row2)
    {
      matrix.swapRows(row1,row2);
    }

    void swapCols(Index col1,Index col2)
    {
      swap(col_map[col1],col_map[col2]);
    }

  private:
    FastRowSwapSparseMatrix matrix;
    vector<Index> col_map;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:00:35.807

我的建议是

Eigen：线性代数运算非常快速高效 [http://eigen.tuxfamily.org/](http://eigen.tuxfamily.org/)

或者

boost中的映射矩阵->更灵活，但线性代数运算速度较慢 [http://www.boost.org/doc/libs/1_39_0/libs/numeric/ublas/doc/matrix_sparse.htm](http://www.boost.org/doc/libs/1_39_0/libs/numeric/ublas/doc/matrix_sparse.htm)

对于您的情况，这两个库都允许您有效地操作行和列

# django - 使用自定义模型用户进行 Django 身份验证

> ID：10316460
> 
> 赞同：2
> 
> 时间：2012-04-25T13:15:13.223
> 
> 标签：django, django-models, django-forms, django-admin, django-views

对于我的需求，内置模型 User 是不够的......所以我有自己的模型 UserProfile ，我想通过这个模型在现场进行身份验证（UserProfile 不继承自 User 模型并且根本不相关）。

我的模型：

```
class UserProfile(models.Model):
    password = models.CharField(max_length = 40)
    email = models.EmailField(max_length = 72, unique = True)

    ## Add this so that you can use request.user.is_authenticated
    def is_authenticated(self): 
        return True 
```

但内置身份验证使用模型用户。

**所以我想了解如何更改它，所以身份验证使用我的模型 UserProfile 和所有身份验证功能？**?

一个好的教程会很棒！

（逐步在视图、模型和身份验证中）

PS：我知道我可以在其他模型中存储额外的数据，但我不希望那样

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:01:02.627

这是一个更极端的例子，但说明了你想做的事情是可以做到的。作者不仅替换了身份验证后端使用的 User 模型，而且使用 SQLAlchemy 代替了 Django ORM。[http://tomforb.es/using-a-custom-sqlalchemy-users-model-with-django](http://tomforb.es/using-a-custom-sqlalchemy-users-model-with-django)

要点是您需要编写后端`authenticate`和`get_user`方法来检索您的自定义用户模型。如果您还想支持权限，则需要编写`has_perm`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:22:59.900

我使用[了这篇](http://scottbarnham.com/blog/2008/08/21/extending-the-django-user-model-with-inheritance/)文章，它对我来说已经足够好了，希望它对你有用。

苏丹

# python - python Tk接口：NameError：未定义全局名称'box1'

> ID：10316464
> 
> 赞同：0
> 
> 时间：2012-04-25T13:15:24.297
> 
> 标签：python, tkinter, tk

```
from Tkinter import *
import MySQLdb

def tran() :
 first= Tk()

 label1 = Label(first ,text="From")
 label1.pack()

 box1=Entry(first )
 box1.pack()

 label2=Label(first ,text="To")
 label2.pack()

 box2=Entry(first )
 box2.pack()

 label3=Label(first ,text="Amt")
 label3.pack()

 box3=Entry(first )
 box3.pack()

 Button1 = Button(first , text="Next", command=func3).pack() 

def func3() :
 conn = MySQLdb.connect (host = "localhost", user = "root", passwd = "natty", db = "dbms")
 cursor=conn.cursor()

 From=int(box1.get().strip())
 To=int(box2.get().strip())
 Amt=int(box3.get().strip())

 cursor.execute ("select bal from account where acc="+str(From)+"")

 a=cursor.fetchone()
 fromval=int(a[0])

 cursor.execute ("select bal from account where acc="+str(To)+"")

 b=cursor.fetchone()
 toval=int(b[0])

 fromval=fromval-Amt
 toval=toval+Amt

 cursor.execute("update account set bal="+str(fromval)+" where acc="+str(From)+"")
 cursor.execute("update account set bal="+str(toval)+" where acc="+str(To)+"")

 cursor.close ()
 conn.close ()

master = Tk()
Button3 = Button(master, text="Transaction", command=tran).pack()
mainloop() 
```

[截屏](http://3.bp.blogspot.com/-dYueKcukDV4/T5f4hB7oiXI/AAAAAAAAAOs/LXkTa6wqIfg/s1600/Screenshot-1.png)

下一步按钮不起作用。当我单击“下一步”按钮时，我收到以下错误：

```
func3 中的文件“disp.py”，第 24 行
    从 = int (box1.get().strip())
NameError：未定义全局名称“box1”

```

我是否必须将按钮放在 func3 内

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:33:37.603

将您的代码更改为：

```
from Tkinter import *

import MySQLdb

class App:

    def __init__(self, master):
        Button3 = Button(master, text="Transaction", command=self.tran).pack()

    def tran(self) :

        first = Tk()

        label1 = Label(first ,text="From")

        label1.pack()

        self.box1=Entry(first )

        self.box1.pack()

        label2=Label(first ,text="To")

        label2.pack()

        self.box2=Entry(first )

        self.box2.pack()

        label3=Label(first ,text="Amt")

        label3.pack()

        self.box3=Entry(first )

        self.box3.pack()

        Button1 = Button(first , text="Next", command=self.func3).pack() 

    def func3(self) :

        conn = MySQLdb.connect (host = "localhost", user = "root", passwd = "natty", db = "dbms")

        cursor=conn.cursor()

        From=int(self.box1.get().strip())

        To=int(self.box2.get().strip())

        Amt=int(self.box3.get().strip())
        cursor.execute ("select bal from account where acc="+str(From)+"")

        a=cursor.fetchone()

        fromval=int(a[0])

        cursor.execute ("select bal from account where acc="+str(To)+"")

        b=cursor.fetchone()

        toval=int(b[0])

        fromval=fromval-Amt

        toval=toval+Amt

        cursor.execute("update account set bal="+str(fromval)+" where acc="+str(From)+"")

        cursor.execute("update account set bal="+str(toval)+" where acc="+str(To)+"")

        cursor.close ()

        conn.close ()

master = Tk()

app = App(master)

master.mainloop() 
```

我认为这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:19:50.960

box1 是在 tran() 函数内部定义的，因此（如错误消息所述）不是全局定义的。

# jsf-2 - 如何在验证消息中显示输入 ID 或标签？

> ID：10316468
> 
> 赞同：1
> 
> 时间：2012-04-25T13:15:49.267
> 
> 标签：jsf-2, bean-validation

我正在使用 Spring 3.1.0.RELEASE、JSF 2.x、JPA 2 和 Hibernate Provider 做一个 Web 应用程序。该应用程序在 Tomcat 6.X 上运行。

网络应用程序可以用不同的语言显示：en、es、fr。

我在我的实体中使用 bean 验证。Hibernate Validator 是提供者，版本 4.2.0.Final。

```
<h:form id="SiteCreationForm">
            <pou:messages />
            <pou:fieldset legend="#{messages['siteCreation.detail']}">
                <h:panelGrid columns="2">
                    <h:outputLabel for="siteVisualId" value="#{messages['siteCreation.url']} :" /> 
```

pou 是素面

在我的实体中，我有这个：

```
@Size(max = 20)
    @NotBlank
    @Basic(optional = false)
    @Column(name = "visual_id", length = 20, unique = true)
    private String visualId; 
```

我不知道为什么，但错误消息只显示“可能不是空的”，它不显示输入 id 或 label 。为什么，我该如何解决这个问题？

输入的 required 属性也是如此。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:36:49.280

在您指定（或需要指定）的 JSF 验证消息包中`<message-bundle>`，`faces-config.xml`添加以下条目：

```
javax.faces.validator.BeanValidator.MESSAGE = {1}: {0} 
```

`{0}`是 bean 验证器的消息，是`{1}`JSF 组件的标签。

# java - 可扩展的文件上传/下载权限

> ID：10316472
> 
> 赞同：0
> 
> 时间：2012-04-25T13:15:58.017
> 
> 标签：java, file, upload, download, scalability

什么是可扩展的文件上传/下载系统/数据库？

我正在建立一个网站，用户可以在其中登录，上传私密但真正私密的图像。我无法将它们上传到服务器硬盘上的地图，因为这不会扩展（如果我们添加更多服务器会发生什么？）而且它不会是私人的，因为每个人都可以去：

[http://127.372.171.33/images/private_picture.png](http://127.372.171.33/images/private_picture.png)

并下载文件。

我正在 Play Framework (scala/java) 中构建项目

像 flickr 这样的网站是如何处理这些事情的？他们是否将它们放入数据库中？什么样的数据库适合这种情况？

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:21:57.653

我无法告诉你那些大网站是如何处理它的，但将这些图像放入数据库可能是一种方法。

另一种方法是将文件放入跨越服务器集群的虚拟文件系统中，或者将它们分发到不同的服务器上，只是不要让包含图像的目录对网络服务器可见。因此，没有人应该能够仅使用服务器和该服务器上的路径打开图像。

要实际交付图像，您可以让他们实现一些流服务，将字节流发送到浏览器进行显示（就像网络服务器一样）。该服务可以首先检查所请求图像的下载权限。

# php - 用两个参数重定向？

> ID：10316473
> 
> 赞同：1
> 
> 时间：2012-04-25T13:15:59.530
> 
> 标签：php, symfony1, symfony-1.4

为什么我不能在 Symfony 1.4 中使用两个参数进行重定向？

```
$this->redirect('news/edit?id='.$news->getId() . '&test='.$news->getTest()); 
```

这会将我重定向到**http://mysite.com/news/edit/id/3**而不是：

**http://mysite.com/news/edit/id/3/test/4**

如何使用两个参数进行重定向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:19:56.610

您的解决方案应该可以正常工作。

但检查是否`$news->getTest()`不为空，并检查您是否没有导致问题的路由。

或者，您可以尝试一下：

```
$this->getRequest()->setParameter('id', $news->getId());
$this->getRequest()->setParameter('test', $news->getTest());
$this->forward('news', 'edit'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:04:25.993

重定向期望一个 url，您可以使用 url 帮助器方法构建此 url，例如

```
url_for2($routeName, $params = array()); 
```

其中 params 是一个关联数组。

# sql - 如何本地化 sql server 数据？

> ID：10316476
> 
> 赞同：0
> 
> 时间：2012-04-25T13:16:12.647
> 
> 标签：sql, localization, globalization

我们需要开发一个支持多种语言（英语、德语、法语、俄语）的应用程序，我们知道，我们可以使用 ASP.NET 本地化来本地化 Web 表单的静态文本，但是数据本地化的方法是什么？ SQL server 中的数据库。

例如我的数据库架构是这样的：

表 -**问题**

QID-PK

问题

由...制作

表-**答案**

援助PK

QID-FK

回答

添加者

在上述模式中，我希望 Question 表中的“question”列和 Answer 表中的“Answer”列应保持本地化值。

我如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:20:28.863

添加语言表：

*   语言ID-PK
*   LanguageIdentifier（CultureInfo 的构造函数接受的名称，例如德语的“de”）

添加 TranslatedQuestion 表：

*   TQID-PK
*   QID-FK
*   语言ID
*   翻译

同样，添加一个 TranslatedAnswer 表：

*   TAID-PK
*   AID-FK
*   语言ID
*   翻译

这样，数据模型中当然没有任何东西可以保证每个问题/答案都有针对给定语言的翻译。但是您总是可以退回到未翻译的问题/答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:45:39.123

在表格中添加一个文化列，然后以文化特定格式重复问题和答案。

# android - Robotium Button 不见了，但仍从 searchtext 返回 true？

> ID：10316482
> 
> 赞同：0
> 
> 时间：2012-04-25T13:16:23.913
> 
> 标签：android, junit, robotium

标题是我的问题。这是我的代码：

```
private void logout() {
        GridIconsView view = (GridIconsView) getActivity().findViewById(
                dk.lector.ao.mobile.R.id.GIV_settings);
        dragLeft();
        solo.clickOnView(view);
        solo.clearEditText(0);
        solo.clearEditText(1);
        boolean loggedIn = solo.searchText("Log ud");
        if (loggedIn){
            solo.clickOnButton("Log ud");
        }
        solo.finishOpenedActivities();

    } 
```

系统：ubuntu 11.10

Eclipse IDE 靛蓝

Robotium 3.2.1（目前最新）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:45:23.497

使用 searchText() 并将 onlyVisible 参数设置为 true。有关更多信息，请参阅 javadoc。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:47:19.457

您还可以使用 searchView 并在其上应用函数 isVisible ...

# c# - 在我的应用程序中如何关闭 Winword.exe

> ID：10316485
> 
> 赞同：3
> 
> 时间：2012-04-25T13:16:36.263
> 
> 标签：c#, ms-word

1.  当我启动我的应用程序并打开 word 文件时，我在任务管理器中看到 3 个进程 winword.exe。
    在我调用“关闭”功能后，1 进程 winword.exe 关闭。

2.  当我在析构函数中调用 worddoc.close() 或 wordapp.quit() 时，出现异常“无法使用已与其底层 RCW 分离的 COM 对象”。

```
public class WordHelper
{
    private object nullobj = System.Reflection.Missing.Value;

    public string context = "";

    Microsoft.Office.Interop.Word.Document doc = new Document();
    Microsoft.Office.Interop.Word.Application wordApp = new Application();

    public WordHelper(string FileName)
    {
           //Open word file
    }

    //somefunction fo work with file

    public void CloseWord()
    {
        doc.Close();
        wordApp.Quit();
        System.Runtime.InteropServices.Marshal.FinalReleaseComObject(wordApp);
    }

    ~WordHelper()
    {
        //i got exception
        doc.Close();
        wordApp.Quit();
        System.Runtime.InteropServices.Marshal.FinalReleaseComObject(wordApp);
    }
} 
```

我如何称呼我的班级

```
 WordHelper wddoc = new WordHelper("C:\\Test Word\\Test.docx");
        wddoc.CloseWord(); //this line i use and can close 1 process not 3
        //One process close after i close application 
```

最后我想关闭我的应用程序打开的所有 winword.exe，我想在析构函数中关闭它们。最后，我需要关闭我的应用程序打开的所有“winword.exe”，我需要在析构函数中关闭它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T13:25:38.123

您在终结器（[不同于析构函数](http://msdn.microsoft.com/en-us/library/0s71x931%28v=vs.80%29.aspx)）中执行此操作。终结器是非确定性的，这意味着在它们运行时类成员可能已经终结，因此不再有效。

我将实现[Dispose 模式](http://msdn.microsoft.com/en-us/library/b1yfkh5e.aspx)并明确控制您的单词 COM 对象的生命周期。[这个答案](https://stackoverflow.com/questions/2085972/release-excel-object-in-my-destructor)有很多很好的链接可以帮助你。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-08-20T06:30:48.607

//查找WINWORD.exe进程并将RealTime Priority设置为WINWORD.exe //这个用于快速进程

```
Process[] proces = Process.GetProcessesByName("WINWORD");

foreach (Process proc in proces)

{

   proc.PriorityClass = ProcessPriorityClass.RealTime;
} 
```

# wordpress - 使用不同的模板通过 ajax 和 Wordpress 加载页面

> ID：10316486
> 
> 赞同：0
> 
> 时间：2012-04-25T13:16:36.647
> 
> 标签：wordpress

用户单击链接后，我想在当前页面中加载相应的页面。这个 ajaxpage 的主题应该不同于它的非 ajax 页面。

这些页面将由客户以不同的语言添加。所以没有固定的 id，客户不应该两次添加同一篇文章（1 次用于普通，1 次用于 ajax）。这规则手动覆盖模板。

第一部分，内容的ajax加载很容易做到，但是我不知道如何以不同的方式显示内容。

所以

domain.com/product/car 直接访问显示使用 single-product.php 作为模板的产品（汽车），其中包括页眉和页脚。

ajax 加载 domain.com/product/car 将显示一个产品（汽车），但没有页眉和页脚，可能还有一些小的布局更改。

我最初的想法是动态设置一些模板（template-product-ajax.php），但我不确定这是否可能或如何。

简而言之，如何在 wordpress 中使用 ajax 加载页面时创建不同的模板/布局/视图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:49:37.947

您必须传入一系列变量，包括您要加载的页面/帖子 ID、您尝试加载的对象类型（“页面”或“帖子”）和一个布尔值以确保标准未加载 get_header() 函数（因为您只想要页面的内容，而不是标题）。

在模板中的某处，您可以使用该布尔值来确定模板的行为。例如：

```
<?php
/*Template Name: AJAX Content*/
if(!isset($_POST['bool']))
    get_header();
?>
<div id="body">
    <div class="page_content">
    <?php
        if(isset($_POST['bool']))
        {
            $object = $_POST['ob_type'] == 'page' ? get_page($_POST['PID']) : get_post($_POST['PID']);
            echo $object->post_content;
            /*echo '<pre>';var_dump($object);echo '</pre>';//Uncomment this section if you want to know what you can access with variable $object*/
        {
        else
        {
            //STANDARD LOOP
        }
    ?>
    </div>
</div> 
```

这是未经测试的，但如果您已经熟悉 AJAX 调用并将 POST 数据发送到单独的页面，它应该可以帮助您入门。

# .net - 为什么执行 DrawItem 事件时 ListBox 会闪烁？

> ID：10316492
> 
> 赞同：0
> 
> 时间：2012-04-25T13:16:53.297
> 
> 标签：.net, winforms, listbox, flicker, delphi-prism

我有一个 ListBox，它有一个 DrawItem 事件，定义如下。ListBox 的以下属性设置为 - DrawMode = OwnerDrawFixed 和 FormattingEnabled = ture。

当我运行程序并将多个项目或对象添加到 ListBox 时，它会闪烁非常糟糕。我不确定到底是什么问题。我在其他 winform 上的设置非常相似的 ListBoxes 不会闪烁。我尝试使用闪烁的 ListBox 捕获 Winform 的图像，但捕获的图像并未显示 ListBox 每次都闪烁。

```
method HTrendFrm.AGroupList_DrawItem(sender: System.Object; e: System.Windows.Forms.DrawItemEventArgs);
    var
      lb:ListBox;
      tg:TTrendGroup;
    begin
      if e.Index = -1 then exit;
      lb := (sender as ListBox);
      tg := TTrendGroup(LoggingGroup.Item[e.Index]);
      if tg.Enabled then
      begin
        if ((e.State and DrawItemState.Selected) = DrawItemState.Selected) then
        begin
          lb.ForeColor:=Color.White;
          e.Graphics.FillRectangle(SystemBrushes.Highlight, e.Bounds);
        end
        else
         lb.ForeColor := Color.Black;
      end
      else
         lb.ForeColor := Color.LightGray;

      lb.CreateGraphics.DrawString(tg.name,new Font('Arial',9,FontStyle.Bold),new SolidBrush(lb.ForeColor),e.Bounds.Left+5,e.Bounds.Top);

        if ((e.State and DrawItemState.Focus) <> DrawItemState.Checked) then
            e.DrawFocusRectangle();
    end; 
```

那么，是什么导致了我的 ListBox 闪烁？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:58:40.623

我遵循了 LarsTech 的建议，它按预期工作。

我完全删除了 lb 列表框并将其替换为 e.Graphics。现在，它不再闪烁了。

# ruby - 从命令行调用 ruby 函数

> ID：10316495
> 
> 赞同：53
> 
> 时间：2012-04-25T13:17:02.297
> 
> 标签：ruby, command-line

如何从命令行直接调用 ruby​​ 函数？

想象一下，我会有这个脚本*test.rb*：

```
class TestClass
    def self.test_function(some_var)
        puts "I got the following variable: #{some_var}"
    end
end 
```

如果从命令行 ( `ruby test.rb`) 运行此脚本，则不会发生任何事情（如预期的那样）。

有没有类似的东西`ruby test.rb TestClass.test_function('someTextString')`？我想得到以下输出：`I got the following variable: someTextString`.

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-04-25T13:28:22.897

首先类的名称需要以大写字母开头，并且由于您确实要使用静态方法，因此函数名称定义需要以.开头`self.`。

```
class TestClass
    def self.test_function(someVar)
        puts "I got the following variable: " + someVar
    end
end 
```

然后从命令行调用它，你可以这样做：

```
ruby -r "./test.rb" -e "TestClass.test_function 'hi'" 
```

如果您改为`test_function`使用实例方法，您将拥有：

```
class TestClass
    def test_function(someVar)
        puts "I got the following variable: " + someVar
    end
end 
```

然后你会调用它：

```
ruby -r "./test.rb" -e "TestClass.new.test_function 'hi'" 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-25T13:59:26.240

这是另一种变体，如果您发现在命令行输入 ruby​​ 语法很尴尬，并且您真的只想将 args 传递给 ruby​​。这是test.rb：

```
#!/usr/bin/env ruby

class TestClass
  def self.test_function(some_var)
    puts "I got the following variable: #{some_var}"
  end
end

TestClass.test_function(ARGV[0]) 
```

使 test.rb 可执行并像这样运行它：

```
./test.rb "Some Value" 
```

或者像这样运行它：

```
ruby test.rb "Some Value" 
```

这是因为 ruby​​ 自动将`ARGV`数组设置为传递给脚本的参数。您可以使用`ARGV[0]`or`ARGV.first`来获取第一个参数，或者您可以将 args 组合成一个字符串，用空格分隔，使用`ARGV.join(' ')`.

如果您正在执行大量命令行操作，您最终可能会使用标准 ruby​​ 库中的[Shellwords 。](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/shellwords/rdoc/Shellwords.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-21T15:13:56.297

如果您在这样的示例中有多个参数要调用：

```
class TestClass
  def self.test_function(some_var1, some_var2)
    puts "I got the following variables: #{some_var1}, #{some_var2}"
  end
end 
```

像这样运行它（在这种情况下，参数需要用逗号分隔）

```
ruby -r "./test.rb" -e "TestClass.new.test_function 'hi','Mike'" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-25T16:01:34.253

```
#!/usr/bin/env ruby

class A
  def run
    p :Hello_world
  end
  self
end.new.run 
```

编写 Ruby 脚本的常用方法是使用名为*main的**顶级执行环境。*您可以开始定义您在类之外编写的方法和代码，这些将直接执行。（顺便说一句，类内但任何方法外的代码也将“自行”运行。）

 *无论如何，我和你在一起......我喜欢在一个命名类中编写所有代码并实例化那个类，所以你可以结合这些技术..让类返回它自己的对象..然后只使用那个顶部的一小部分级别代码分配，初始化，然后点到类中。

有了这个，你只需输入`$ ruby test.rb`，它就会做你想做的事。或者你可以`chmod +x test.rb; ./test.rb`，因为我们确实[添加了一个 shebang。](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-25T13:44:23.800

如果您正在使用命令行界面，那么我建议您看看[thor](https://github.com/wycats/thor)。

Thor 直接将您的命令映射到已定义类中的方法，有关示例，请参见[thor wiki 。](https://github.com/wycats/thor/wiki/Getting-Started)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-25T21:19:30.050

只是对 Ingenu 对函数不打印出某些内容但确实返回某些内容的回答的扩展。

我们将有以下*test.rb*

```
class TestClass
    def self.test_function(some_var)
        return "I got the following variable: " + some_var
    end
end 
```

然后从命令行调用它并获取返回值：

```
ruby -r "./test.rb" -e "puts TestClass.test_function('hi')" 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-10-31T12:42:43.703

如果您知道如何从命令行调用 rb 文件

`ruby yourfile.rb`

这可以为您解决所有问题。

你所做的是，只是在类中定义了你的方法。现在您可以在定义下方调用它。如果你还想看书，请睁大眼睛

```
class TestClass
  def self.test_function(some_var)
    puts "I got the following variable: #{some_var}"
  end
  test_function(var)
end 
```*

# json - 使用 Spring MVC 在“Json”中返回“View”

> ID：10316501
> 
> 赞同：1
> 
> 时间：2012-04-25T13:17:08.213
> 
> 标签：json, spring, spring-mvc, controller, modelandview

我正在使用 Spring MVC，我需要在 Controller 中返回一个包含视图的 Json 对象，例如相关的 jsp 页面。

返回：{名称：“片段形式”，其他信息：“其他信息”，视图：视图}

其中“view”应该是链接到您的 ModelAndView 的 JSP 页面

我阅读了其他帖子，但我没有找到解决方案，因为如果可能的话，我需要那个控制器来工作。

建议？

编辑：

我有一个包含您的值的表单，并从 javascript 提交执行以下代码：

```
@RequestMapping(method = RequestMethod.POST)
public Object create(@Valid @RequestBody PatientForm form, HttpServletResponse response) {
  ModelMap map = new ModelMap();
  map.put("form", form);

return new ModelAndView("addPatientForm", map);
} 
```

我需要返回一个 Json，其中在返回的 json 中处理了“ModelAndView("addPatientForm", map)"。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:08:35.883

像这样的东西对你有用吗：

```
@RequestMapping(value="/somepage", method=RequestMethod.POST)
    public ResponseEntity<String> generateViewasJSON(){
        JSONObject json = new JSONObject();
json.put("name","fragment-form");
        ...
        HttpHeaders headers = new HttpHeaders();
        headers.set(  "Content-Type", "application/json" );
        return new ResponseEntity<String>( json.toString(), headers, HttpStatus.OK );
    } 
```

# iphone - CVPixelBuffer 泄漏

> ID：10316504
> 
> 赞同：1
> 
> 时间：2012-04-25T13:17:11.167
> 
> 标签：iphone, ios, ipad, memory-leaks, avassetwriter

我像这样创建和使用 CVPixelBuffer 缓冲区：

```
 //Create buffer
            CVPixelBufferRef conversionBuffer = nil;
            if (indx < [self.sideImageList count] - 1)
            {
                UIImageView *tempImageView = [self.sideImageList objectAtIndex:indx + 1];
                CGRect originalBackgroundFrame = [tempImageView frame];
                UIView *tempView = [tempImageView.subviews objectAtIndex:0];
                [tempView removeFromSuperview];
                tempImageView.layer.borderColor = [UIColor clearColor].CGColor;
                [tempImageView setFrame:CGRectMake(0, 0, kVideoWidth, kVideoHeight)];

                UIImage *backgroundImage = [UIImage imageFromView:tempImageView];

                [tempImageView addSubview:tempView];
                tempImageView.layer.borderColor = [UIColor yellowColor].CGColor;
                [tempImageView setFrame:originalBackgroundFrame];

                UIImage *resizedBackground = [ICVideoViewController imageWithImage:backgroundImage 
                                                                      scaledToSize:CGSizeMake(kVideoWidth, kVideoHeight)];
                UIImage *appendedImage = [ICVideoViewController appendImage:resizedBackground
                                                                         to:conversionImage 
                                                                    atPoint:CGPointMake((kVideoWidth - conversionImage.size.width)/2,
                                                                                        (kVideoHeight - conversionImage.size.height)/2)
                                                                 otherPoint:CGPointZero];

                //Fill Buffer
                conversionBuffer = [ICVideoViewController pixelBufferFromCGImage:[appendedImage CGImage] size:CGSizeMake(kVideoWidth, kVideoHeight)];
            }
            else
            {
                //Fill buffer
                conversionBuffer = [ICVideoViewController pixelBufferFromCGImage:[conversionImage CGImage] size:CGSizeMake(kVideoWidth, kVideoHeight)];
            }
            while (adaptor.assetWriterInput.readyForMoreMediaData==NO)
            {
                [NSThread sleepForTimeInterval:0.1];
            }
            if (indx == [self.sideImageList count] - 1)
            {
                break;
            }
            [adaptor appendPixelBuffer:conversionBuffer withPresentationTime:CMTimeMake((frameRate*i)+frames-1, frameRate)];

            while (adaptor.assetWriterInput.readyForMoreMediaData==NO)
            {}
            //release buffer
            CVPixelBufferRelease(conversionBuffer); 
```

并且用于填充缓冲区的方法是..我从某个地方得到了这个方法，但它似乎没有任何问题..

```
 + (CVPixelBufferRef) pixelBufferFromCGImage:(CGImageRef)image size:(CGSize)size
 {
 NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                         [NSNumber numberWithBool:YES],     kCVPixelBufferCGImageCompatibilityKey,
                         [NSNumber numberWithBool:YES],  kCVPixelBufferCGBitmapContextCompatibilityKey,
                         nil];
 CVPixelBufferRef pxbuffer = NULL;
 CVReturn status = CVPixelBufferCreate(kCFAllocatorDefault, size.width,
                                      size.height, kCVPixelFormatType_32ARGB, (CFDictionaryRef) options, 
                                      &pxbuffer);

 NSParameterAssert(status == kCVReturnSuccess && pxbuffer != NULL);

CVPixelBufferLockBaseAddress(pxbuffer, 0);
void *pxdata = CVPixelBufferGetBaseAddress(pxbuffer);
NSParameterAssert(pxdata != NULL);

CGColorSpaceRef rgbColorSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef context = CGBitmapContextCreate(pxdata, size.width,
                                             size.height, 8, 4*size.width, rgbColorSpace, 
                                             kCGImageAlphaNoneSkipFirst);
NSParameterAssert(context);

CGContextDrawImage(context, CGRectMake(0, 0, CGImageGetWidth(image), 
                                       CGImageGetHeight(image)), image);
CGColorSpaceRelease(rgbColorSpace);
CGContextRelease(context);

CVPixelBufferUnlockBaseAddress(pxbuffer, 0);
return pxbuffer;
 } 
```

我似乎在这种方法中遇到了泄漏（礼貌的泄漏工具），我仍然不知道我做错了什么。

# silverlight - Windows Phone Navigation - 回传到之前的页面

> ID：10316511
> 
> 赞同：3
> 
> 时间：2012-04-25T13:17:32.790
> 
> 标签：silverlight, windows-phone-7, navigation

我想单击一个按钮将我带到一个页面，然后单击一个列表框项，单击新页面上的一个按钮并将其传递回之前的页面，而无需创建第一页的新 URI。

```
 **First Page**
        private void btnAddExistingMember_Click(object sender, RoutedEventArgs e)
        {
              NavigationService.Navigate(new Uri("/ChooseMember.xaml", UriKind.Relative));
        }

        **Second page after choosing listbox value**
        private void btnAddSelected_Click(object sender, RoutedEventArgs e)
        {
              Member currMember = (Member)lstMembers.SelectedItem;
              string memberID = currMember.ID.ToString();
              //navigate back to first page here passing memberID
        } 
```

可以吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:27:57.467

您可以将成员存储在 App.xaml.cs 文件中。这是应用程序中所有文件均可访问的通用文件。这就像一个全局变量。

```
//App.xaml.cs
int datafield ;

//Page1xaml.cs
(App.Current as App).dataField =10;

//Page2.xaml.cs
int x =  (App.Current as App).dataField 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T13:20:38.370

您可以创建一个包含成员 ID 的管理器类。然后可以从您的第一页和 ChooseMember 页面访问此管理器类。

单例管理器类的示例：-

```
public class MyManager
{
    private static MyManager _instance;

    public static MyManager Instance
    {
        get
        {
            if (_instance == null)
            {
                _instance = new MyManager();
            }
            return _instance;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-15T04:58:54.253

我在 codeproject 找到了一个对我非常有用的解决方案。

从第二种形式移动时，将数据保存在`PhoneApplicationService.Current.State`

```
protected override void OnNavigatedFrom(System.Windows.Navigation.NavigationEventArgs e)
{
    // Called when a page becomes the active page in a frame
    base.OnNavigatedFrom(e);
    // Text is param, you can define anything instead of Text 
    // but remember you need to further use same param.
    PhoneApplicationService.Current.State["Text"] = txtboxvalue.Text;
} 
```

使用相同`NavigationService.GoBack();`的`OnNavigatedTo`方法返回，获取以下代码。

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    base.OnNavigatedTo(e);
    if (PhoneApplicationService.Current.State.ContainsKey("Text"))
    txtvalue.Text = (string)PhoneApplicationService.Current.State["Text"];
} 
```

参考：

MSDN：[电话应用服务类](http://msdn.microsoft.com/library/windows/apps/microsoft.phone.shell.phoneapplicationservice(v=vs.105).aspx)

原始解决方案：[如何在 windows phone 中的页面之间传递值](http://www.codeproject.com/Articles/724883/How-to-Pass-Values-Between-Pages-in-Windows-Phone)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T00:38:27.163

在我看来，您想将某个对象设置为另一个页面的上下文。MVVM Light 中的消息传递听起来是一个很好的解决方案。看起来您没有使用 MVVM，因此这可能不会立即适用。[这篇文章](http://chriskoenig.net/2010/07/05/mvvm-light-messaging/)几乎阐述了我在这里所说的内容。

**第二页**
创建您的 SelectedObject 属性并确保调用

```
RaisePropertyChanged(SelectedObjectPropertyName, oldValue, value, true); 
```

最后一个参数`true`表示将这个值的变化广播给任何收听的人。您需要为列表框选定项目和按钮单击等连接一些其他命令，但我不会在这里讨论，因为它与您的问题没有直接关系。选择 Listbox 项将简单地设置第一页的数据项，就像您想要完成的那样。按钮点击可以处理导航。

**第一页**
在您的视图模型构造函数中，注册以接收从第二页广播的更改

```
Messenger.Default.Register<PropertyChangedMessage<MyObject>>(this, (action) => UpdateObject(action.NewValue)); 
```

然后定义 UpdateObject

```
private void UpdateObject(MyObject newObject)
{
    LocalObjectProperty = newObject;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T05:59:18.970

你可以简单地使用

```
//first page
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    string value = string.Empty;
    IDictionary<string, string> queryString = this.NavigationContext.QueryString;
    if (queryString.ContainsKey("memberID"))
    {
        memberID = queryString["memberID"];
        if (memberID != "-1")
            //your code here
    }
    base.OnNavigatedTo(e);
}

//second page
private void btnAddSelected_Click(object sender, RoutedEventArgs e)
{
    Member currMember = (Member)lstMembers.SelectedItem;
    string memberID = currMember.ID.ToString();

    string target = "/FirstPage.xaml";
    target += string.Format("?memberID={0}", memberID);
    NavigationService.Navigate(new Uri(target, UriKind.Relative));
} 
```

# eclipse - 开发 JSP 项目需要什么 IDE（Eclipse 或 Aptana）以及我需要什么工具

> ID：10316518
> 
> 赞同：0
> 
> 时间：2012-04-25T13:17:51.867
> 
> 标签：eclipse, jsp, aptana, eclipse-wtp

我需要创建一个基于 Web 的项目，我将在其中使用 java 代码进行后端处理和数据库连接。所以我需要用 JSP 编写我的代码。我已经安装了tomcat。

但在 Aptana 中，我没有获得“新动态 Web 项目”选项。我以前创建过 JSP 项目。任何人都知道如何添加它或我需要安装什么工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:38:50.263

我不是 Aptana 的粉丝。以我的经验，它是一个臃肿的工具，它试图做太多事情而没有做得特别好。我会从[http://www.eclipse/downloads获取](http://www.eclipse/downloads)**Eclipse IDE for Java EE Developers**包并使用它。

# php - 使用 ajax 计算按钮的点击次数

> ID：10316519
> 
> 赞同：0
> 
> 时间：2012-04-25T13:17:57.843
> 
> 标签：php, jquery

我正在计算按钮的点击次数。使用 php 一切正常。添加 ajax 时，我的页面在单击按钮后崩溃。我做错了什么？我插入了我的 html、class 和 ajax 代码。

```
<script type="text/javascript">
$(document).ready(function(){
    $("#btn_like").click(function()
    {
        var counter;
        counter+=1;

        var counts={btn_like:like};

        $.ajax({
              type: "POST",
              url: "ajax/count_likes.php",
              data: counts
            }).done(function( msg ) {
              alert( "Data Saved: " + msg );

            });
    });
    });
</script>
</head>
<body>

    <form action="" method="post">
    <div id="like">
            <img id="aap" name="aap" src="images/aap.jpg" />
            <input type="submit" name="btn_like" id="btn_like" value="I like"/>  
            <?php if (isset($likes)) {$numLikes=$likes->fetch_assoc();
 echo "<span>"; echo $numLikes['likes_num']; echo "</span>"; }?>

        </div>
    </form> 
```

这是课

```
<?php
    class User
    {
    private $m_sLike;

    public function __set($p_sProperty, $p_vValue)
    {
        switch($p_sProperty)
        {
            case "Like";
                $this->m_sLike = $p_vValue;
        }      
    }

    public function __get($p_sProperty)
    {
        $vResult = null;
        switch($p_sProperty)
        {
        case "Like";
            $vResult = $this->m_sLike;
            break;
        }
        return $vResult;
    }
    public function getLikes()
    {
        include("Connection.php");
        $sSql = "select * from tbllikes";   
        $result = $link->query($sSql);
        return($result);
    }
    public function updateLikes()
    {
        include("Connection.php");
        $sql = "UPDATE tbllikes SET likes_num=likes_num+1 WHERE likes_id=1";
        $vResult = $link->query($sql);
    }
    }
    ?> 
```

AJAX - 文件

```
<?php
    include ('../classes/User.class.php');

    if(isset($_POST['btn_like']))
        {
            $val=new User();
            $val->Likes=$_POST['btn_like'];
            $val->updateLikes();

            //echo $val;
            $likes=$val->getLikes();
        }
    header('Content-type: application/json');
    echo json_encode($likes);
 ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:20:22.943

您不会阻止默认的提交按钮行为，因此它将执行正常的表单提交。

你可以用它`preventDefault`来做到这一点

```
$("#btn_like").click(function(e)
{
  e.preventDefault();    
   //Your rest of the code

}); 
```

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

使用 firebug 并查看您是否遇到任何其他脚本错误。

# javascript - 社交媒体分享

> ID：10316520
> 
> 赞同：1
> 
> 时间：2012-04-25T13:17:59.120
> 
> 标签：javascript, jquery, append, query-string, sharing

我想创建一组将共享到各种社交媒体网站（Twitter、Facebook、Tumblr 等）的按钮。

我目前正在使用 Twitter 共享器，我一直在环顾四周，找不到任何自定义代码可以获取当前 URL 并将其附加到网址而不强迫我使用 Twitter 共享图标而不是我自己的自定义图标。

这是我正在处理的网站（链接在右侧）：[http ://www2.hull.ac.uk/files/tfa/index/content2.html](http://www2.hull.ac.uk/files/tfa/index/content2.html)

这是我当前的代码：

```
<a href="javascript:popup_share('http://twitter.com/share?text=Check%20out%20this%20page#tfa&url=')" class="twitter-share-button">
                                    Twitter
                                    <b></b>
                                </a>

<script>
    var pageName = window.location.toString();
    alert('http://twitter.com/share?text=Check%20out%20this%20page#tfa&url=' + pageName);
</script> 
```

我不知道如何将警告框中的字符串添加到已经存在的标签中！

URL 需要动态创建，因为我希望它是站点范围的，并且不会每次都知道 URL - 这是要共享到任何平台的 URL。我已经在 Twitter 网站上查看过，但如果不知道网站地址，我找不到任何可以做到这一点的东西。

任何人都可以为此提供任何帮助吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:23:20.387

链接应该只是

```
<a href="#" class="twitter-share-button">Twitter</a> 
```

JavaScript 应该添加点击事件

```
$( function(){
    $(".twitter-share-button").click( function(e){
        popup_share('http://twitter.com/share?text=Check%20out%20this%20page#tfa&url=' + encodeURIComponent(window.location.href) );
        e.preventDefault();
    });
}); 
```

# android - 如何限制特定 IP 的 WIFI 访问

> ID：10316521
> 
> 赞同：0
> 
> 时间：2012-04-25T13:17:59.683
> 
> 标签：android

我想创建一个应用程序来限制来自特定 IP（或地址）的 WIFI 访问互联网。

是否可以为此创建Android应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:27:36.940

不，您不能告诉 android wifi 服务阻止互联网。

您可以做的是，在启用 WiFi 时创建一个检查 IP 地址的服务，当它是特定 IP 地址时，禁用 WiFi。

```
wifiManager = (WifiManager) this.getSystemService(Context.WIFI_SERVICE); 
wifiManager.setWifiEnabled(false);

<uses-permission android:name="android.permission.CHANGE_WIFI_STATE"></uses-permission> 
```

# scala - Scala Streams：自引用、函数调用和惰性求值

> ID：10316522
> 
> 赞同：1
> 
> 时间：2012-04-25T13:18:01.393
> 
> 标签：scala, stream, lazy-evaluation

我试图理解为什么以下使用 Scala Streams 的代码不起作用：

```
def main(args: Array[String]): Unit = {
  lazy val y : SimNumericStream = y.shift
  y.scalstream.take(10).print
}

class SimNumericStream( ss : Stream[Double] )  {  
  lazy val scalstream = ss
  lazy val shift = new SimNumericStream( 0 #:: scalstream )
} 
```

并替换

```
lazy val y : SimNumericStream = y.shift 
```

经过

```
lazy val y : SimNumericStream = new SimNumericStream( 0 #:: y.scalstream ) 
```

工作得很好。

我正在寻找一种解决方案，当流是自引用的时，它允许我在函数内部封装 Streams 上的操作，而不会破坏惰性求值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T13:26:31.253

在您的第一个版本中，您对实例化的调用`SimNumericStream`在 的实例中`SimNumericStream`，因此除非您已经拥有一个，否则您永远无法实际实例化一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:08:31.993

我通过以下实现了我想要的效果：

```
 class SimNumericStream(str: =>Stream[Double]) {
    def ::(hd: Double) = Stream.cons(hd, str)
    def shift = 0.0 :: this
  }
  implicit def streamToSimNumericStream(str: =>Stream[Double]) = new SimNumericStream(str)

  lazy val y: Stream[Double] = y.shift 
```

# sql - 这是什么样的密码哈希/加密？

> ID：10316524
> 
> 赞同：10
> 
> 时间：2012-04-25T13:18:09.617
> 
> 标签：sql, encryption, hash, passwords

试图找出 SQL 数据库中的哈希/加密类型。我们想创建一个应用程序来重置密码，但我一辈子都找不到他们是如何产生这个价值的。

这里有多个例子

```
{enc:1}gdyb21LQTcIANtvYMT7QVQ==
{enc:1}ZEImYhrd/Ot/LcewJCFdMw==
{enc:1}+IOSBzegAx7nSytO1J3GEw==
{enc:1}6ULa1IFMxavY7SE66K3UDg==
{enc:1}UEFeGim2M8d0Iee7ejFRUw==
{enc:1}RjqL5rXOBpqJAKPjYkwLtw==
{enc:1}V/PEslecyYxFki03H4ctAQ==
{enc:1}VDEm9QmD+L7tsqcPz/S9XQ==
{enc:1}YkQuEPpL6dRfDLwKMEVMMg==
{enc:1}86rG96EP7T3tx9e8C7513g==
{enc:1}xvSwvsmkgwtXwVISvg7mJQ==
{enc:1}KjCF0RD4tcUGEP4Bpafw5A==
{enc:1}z9pGrdm4QAoomrFCJCXQIQ==
{enc:1}yhLv0HeW90FENKJjV9Nb+g==
{enc:1}EtYMl5FOW+zdpVvWsIj3Rw== 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-25T13:26:50.380

让我们把它拆开：

```
{enc:1}gdyb21LQTcIANtvYMT7QVQ== 
```

该`{enc:1}`部分可能是某种形式的版本控制。这是相当普遍的，因此您可以随着时间的推移升级您使用的任何散列/加密算法。每个值都标识了用于生成哈希的算法 - 如果实现决定使用不同的方法，它会知道使用第一个版本来*验证*密码，但随后可以`{enc:1}`用`{enc:2}`新形式的哈希替换.

其余的是 base64 - 它是 24 个以 == 结尾的字符，这意味着原始值是 16 个字节。

所以它是某种 16 字节（128 位）的散列，带有版本控制前缀。这几乎是我们所能知道的一切......它可以是*任何*128 位散列，或者可能是 128 位更长的散列（尽管你不得不想知道他们为什么在那时丢弃数据）。

如果您可以使用密码创建自己的用户，则可以执行进一步的测试。例如，两个具有相同密码的用户最终会得到相同的哈希吗？如果不是，如果您从密码 X 更改为密码 Y，然后为单个用户返回密码 X，是否*会*得到相同的哈希值？（值中没有明显的盐，尽管用户名可以用作盐。）

# sharepoint-2010 - Sharepoint Timer Job 调试无法设置断点

> ID：10316526
> 
> 赞同：0
> 
> 时间：2012-04-25T13:18:25.107
> 
> 标签：sharepoint-2010, breakpoints, timer-jobs

我有一个小问题。我正在尝试按照本教程添加一个计时器作业：http: [//dotnetfinder.wordpress.com/2010/07/24/creatingcustomsharepointtimerjob2010/](http://dotnetfinder.wordpress.com/2010/07/24/creatingcustomsharepointtimerjob2010/)

我到了启用计时器作业并且每五分钟启动一次的地步。问题是它没有执行所有的 Execute 方法。

```
 public override void Execute(Guid contentDbId)
    {

        // get a reference to the current site collection's content database

        SPWebApplication webApplication = this.Parent as SPWebApplication;

        SPContentDatabase contentDb = webApplication.ContentDatabases[contentDbId];

        // get a reference to the "ListTimerJob" list in the RootWeb of the first site collection in the content database

        SPList Listjob = contentDb.Sites[0].RootWeb.Lists["Liens"];

        // create a new list Item, set the Title to the current day/time, and update the item

        SPListItem newList = Listjob.Items.Add();

        //newList["URL"] = "http://"+DateTime.Now.ToString()+".fr";

        //newList.Update();

    } 
```

我将调试器附加到 OWSTIMER.EXE。如果我尝试在以下行添加断点：SPList ListJob = ...，没关系，但是如果我尝试在下一行添加新断点（SPListItem newList = ...），那么我会收到以下消息：“无法设置以下断点：... CLR 无法设置断点”。

有谁知道我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T13:52:10.713

您似乎正在附加到正确的服务。请参阅[如何：调试计时器作业](http://msdn.microsoft.com/en-us/library/ff798310.aspx)以仔细检查您的步骤。

此外，正如此评论中所指出的，您应该在部署计时器作业时重新启动计时器服务：

> 标记
> 
> 2011 年 2 月 11 日凌晨 4:41
> 
> 任何计时器项目都需要完成一个非常重要的步骤。您必须在部署之间回收 SharPoint 计时器服务。最好的方法是添加
> 
> net stop SPTimerV4 – 预构建
> 
> net start SPTimerV4 – 构建后
> 
> 到您的共享点项目。如果您不执行上述操作 - 您会疑惑为什么您的代码似乎不是最新的。原因是计时器服务将程序集与您的类一起缓存。这可能会花费您数小时的故障排除时间，以尝试确定您的代码未部署的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:33:14.987

确保您的项目配置处于调试模式（在发布模式下编译器设置为启用优化代码）。参考这篇[博文](http://blogs.msdn.com/b/habibh/archive/2009/09/01/troubleshooting-common-breakpoint-problems-in-the-visual-studio-debugger-part-i.aspx)

# android - DailogFragment - getArguments/setArguments - 为什么要在包中传递参数？

> ID：10316527
> 
> 赞同：5
> 
> 时间：2012-04-25T13:18:25.113
> 
> 标签：android, android-fragments, android-dialog, android-dialogfragment

在官方示例[http://developer.android.com/reference/android/app/DialogFragment.html#BasicDialog](http://developer.android.com/reference/android/app/DialogFragment.html#BasicDialog)中，片段是使用静态工厂方法创建的，该方法将参数包装在 Bundle 中并调用传递参数的无参数构造函数使用 setArguments(bundle)- 所以我的问题是 - 为什么不简单地使用这些参数创建公共构造函数？使用 getArguments/setArguments 片段的方法的原因是什么 - 也许 Dialog 不能保证每次都重新创建，而是重复使用？如果是这样，那么它什么时候发生？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T14:02:05.380

强制执行无参数的默认构造函数模式允许系统在必要时动态地重新创建片段。从文档：

> Fragment 的所有子类都必须包含一个公共的空构造函数。框架通常会在需要时重新实例化一个片段类，特别是在状态恢复期间，并且需要能够找到这个构造函数来实例化它。如果空构造函数不可用，在状态恢复过程中某些情况下会出现运行时异常。

“将经常”和“在某些情况下”使其含糊不清。但是满足不了你的好奇心……它是争论！

# c# - 如何使用 Skype4COM 在 Skype 群聊中发送消息？

> ID：10316533
> 
> 赞同：11
> 
> 时间：2012-04-25T13:18:48.017
> 
> 标签：c#, skype, bots, skype4com

我一直在尝试用 C# 制作一个“Skype Bot”。到目前为止，我已经成功地让它在一对一的聊天中工作。我无法让它在群聊中工作。这是我的来源：

```
using System;
using System.Windows.Forms;
using SKYPE4COMLib;

namespace SkypeBot
{
    public partial class Form1 : Form
    {
        private Skype skype;
        private const string trigger = "!"; // Say !help
        private const string nick = "Bot";

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            skype = new Skype();
            // Use skype protocol version 7 
            skype.Attach(7, false);
            // Listen 
            skype.MessageStatus += new _ISkypeEvents_MessageStatusEventHandler(skype_MessageStatus);
        }
        private void skype_MessageStatus(ChatMessage msg, TChatMessageStatus status)
        {
            if (TChatMessageStatus.cmsRead == status)
            {
                return;
            }

            if (msg.Body.IndexOf(trigger) == 0 && TChatMessageStatus.cmsReceived == status)
            {
                // Remove trigger string and make lower case
                string command = msg.Body.Remove(0, trigger.Length).ToLower();

                // Send processed message back to skype chat window
                skype.SendMessage(msg.Sender.Handle, nick + " Says: " + ProcessCommand(command));
                IChat ichat = skype.get_Chat(msg.Chat.Name);
                ichat.SendMessage(msg.Sender.Handle, nick + " Says: " + ProcessCommand(command));
            }
        }

        private string ProcessCommand(string str)
        {
            string result;
            switch (str)
            {
                case "help":
                    result = "Sorry no help available";
                    break;
                case "date":
                    result = "Current Date is: " + DateTime.Now.ToLongDateString();
                    break;
                case "time":
                    result = "Current Time is: " + DateTime.Now.ToLongTimeString();
                    break;
                case "who":
                    result = "I am Bot, a magical Skype robot!";
                    break;
                case "moon":
                    result = "(moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) (moon) ";
                    break;
                default:
                    result = "Sorry, I do not recognize your command";
                    break;
            }

            return result;
        }
    }
} 
```

在它发送处理后的消息的地方，我收到错误“方法'SendMessage'没有重载需要2个参数”。

但是，当我使用：

```
skype.SendMessage(msg.Sender.Handle, nick + " Says: " + 
      ProcessCommand(command)); 
```

它工作得很好，但不能在群聊中。你有什么建议吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-25T21:08:35.217

尝试使用

```
msg.Chat.SendMessage("your message") 
```

反而。

最好的

# apache-flex - 在运行时将图像嵌入到动作脚本中

> ID：10316536
> 
> 赞同：0
> 
> 时间：2012-04-25T13:18:54.327
> 
> 标签：apache-flex, actionscript, embed

我必须使用这样的东西创建图像对象

```
[Embed("/assets/images/Header.png")]  
public static var HeaderIcon:Class; 
```

但现在 embedd 中的字符串是从我`xmlObject.child("icon");`尝试过 的一些 xml 动态带来的

```
[Embed(xmlObject.child('icon').toString())]  
public static var HeaderIcon:Class; 
```

但是它会给出错误，例如

> 无效元数据

我在动作脚本中使用上面的代码（很明显）
有什么办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:01:26.203

您需要使用 Loader 类：[http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html)

它比嵌入式资源要复杂一些，但文档中有很好的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:27:46.703

类名：-HeaderIconClass

//////////

```
package
{
    import spark.components.Image;

    internal dynamic class HeaderIconClass extends Image
    {
        public function HeaderIconClass()
        {
            super();
        }
    }
} 
```

在您的组件或应用程序级别内：-

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               creationComplete="application1_creationCompleteHandler(event)">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            [Bindable]
            public var headerIcon:HeaderIconClass = new HeaderIconClass();

            //For your testing
            protected function button1_clickHandler(event:MouseEvent):void
            {
                // TODO Auto-generated method stub
                imageID.source = headerIcon.source
            }

            protected function application1_creationCompleteHandler(event:FlexEvent):void
            {
                // TODO Auto-generated method stub
                headerIcon.source = "@Embed('/assets/images/Header.png')";
            }

        ]]>
    </fx:Script>

    <mx:VBox x="100" y="100">
        <s:Button label="Show Image" click="button1_clickHandler(event)"/>
        <s:Image id="imageID" width="50" height="50"/>
    </mx:VBox>
</s:Application> 
```

如果要使用它，可以将其保存在变量中：-

```
private var imagePath:String = xmlObject.child('icon').toString(); 
```

并将以下功能更改为：-

```
protected function application1_creationCompleteHandler(event:FlexEvent):void
{
    // TODO Auto-generated method stub
    headerIcon.source = "@Embed('"+imagePath+"')";
} 
```

希望这可能会有所帮助......

# javascript - javascript - 设置速度/配速

> ID：10316537
> 
> 赞同：-1
> 
> 时间：2012-04-25T13:18:55.157
> 
> 标签：javascript

我有一个循环遍历单词数组的脚本，但是如何向其中添加速度元素？

```
words = ["Doe", "Ray", "Mee"]; 
count = words.length;
currentWord = random(0, parseInt(count)); 
words[parseInt(currentWord)]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:21:34.673

如果您想延迟循环的每个交互的执行，请查看`setInterval`( [MDN](https://developer.mozilla.org/en/window.setInterval) ) 和`setTimeout`( [MDN](https://developer.mozilla.org/en/window.setTimeout) )。

# windows - 将文件从 Ubuntu 远程复制到 Windows 7

> ID：10316539
> 
> 赞同：2
> 
> 时间：2012-04-25T13:19:01.837
> 
> 标签：windows, ubuntu, windows-7, command-line, ubuntu-11.10

我对命令行 Ubuntu 不是很熟悉（别管远程复制文件），所以如果这个问题有点太常见了，我深表歉意。

我的设置有点不寻常，所以我无法通过在线研究找到很多东西。

我正在使用 Win7 机器，并通过 Putty SSH 进入 Ubuntu (11.10) 服务器。我尝试了以下命令，

```
scp textFile.txt user@ipaddress: 
```

`textFile.txt`是在 Ubuntu 机器上，是`user`我在 Win7 机器上的帐户，`ipaddress`是 Win 机器的 IPv4 地址。我什至选择了这个`-4`选项，但每次它都在说`Connection timed out`。

我有什么办法可以将此文件复制到我的机器上？

两者都在同一个网络上。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T13:23:30.927

我建议您在 Windows 服务器上安装一个名为 WinSCP 的应用程序。这是免费的，非常易于使用。

它就像一个 FTP 应用程序，使用您的 Linux 用户名和密码（以及 SSH 端口）。这样，这些操作系统之间的所有未来副本都将变得容易。

我希望这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:33:42.087

您可以安装 samba 或 FTP 来共享文件。

在 Windows 机器上使用 samba 共享，您可以按照[本指南进行操作](http://www.giannistsakiris.com/index.php/2007/11/12/accessing-an-smb-remote-folder-from-ubuntu-s-command-line/)

使用 FTP 你可以试试[这个](http://www.cyberciti.biz/faq/ubuntu-vsftpd-ftp-service-server/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T08:17:55.743

你可以使用filezilla。我也遇到了同样的问题，但是我发现 Filezilla 是传输文件的最简单方法之一。检查图像并输入主机 ID sftp://ipaddress .. 哎呀，我意识到我无法发布图像，直到我有 10 个声望... :( 因此，删除图像。但它很容易。只需将主机名输入为上面建议。

希望这会有所帮助

# sql - 从表 JOIN 中获取所有字段上不完全匹配的所有记录

> ID：10316540
> 
> 赞同：2
> 
> 时间：2012-04-25T13:19:03.520
> 
> 标签：sql, database, tsql

我有一种情况，我用一些 3rd 方实用程序更新了一个表，我想将它与原始表进行比较，并确保它进行了正确的更新和插入。

所以，我想做这样的事情，但我不太了解语法：

```
SELECT * FROM table1 AS a RIGHT OUTER JOIN table2 AS b WHERE 
    <there is some difference between the row from a and the row from b,
    regardless of which column it's in> 
```

我怎样才能比较所有字段而不必一一明确地写出来？

**编辑：**我还应该提到我在*table 的副本中进行*了更新，所以假设是原始的并且是更新的副本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T13:25:17.030

你应该使用的是一个 MINUS 查询

```
select field1, field2, field3, field4
  from table1
 except 
select field1, field2, field3, field4
  from table2 
```

这将返回 table1 中无法在 table2 上找到其数据（field1、field2、field3、field4）的所有行。警告：反之亦然，因此如果您还需要 table2 中而不是 table1 中的数据，那么您必须执行第二个查询，执行 table2 MINUS table1。

# php - 将带有html实体的字符串以相同的顺序转换为数组

> ID：10316545
> 
> 赞同：0
> 
> 时间：2012-04-25T13:19:14.873
> 
> 标签：php, regex

我有一个这种形式的字符串：

```
<strong>dsds </strong><em>sdqsd </em><span style='text-decoration: underline;'>test</span> 
```

我想把它放在一个关联数组中：

```
array('strong' => 'dsds' , 'em' => 'sdqsd' , 'underline' => 'test'); 
```

在某种程度上，这个数组中元素的顺序必须与它们在字符串中的顺序相同。

这意味着如果我有例如：

```
<span style='text-decoration: underline;'>test</span><strong>dsds </strong><em>sdqsd </em> 
```

我得到：

```
 array( 'underline' => 'test', 'strong' => 'dsds' , 'em' => 'sdqsd'); 
```

我尝试通过在循环中使用 strpos 来做到这一点，但如果我有一个大字符串，那将是很多迭代，那么有没有更简单的使用正则表达式的方法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:30:30.397

1，只有在每个已解析的 HTML 语句中每种类型只有一个标签时，才能使用标签名称作为数组索引。

2，也许这个库会有所帮助：[http ://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

3，或者使用正则表达式创建自定义解析器。由于对 CPU 性能的要求很高，我真的不会建议这种解决方案。

# c - 从 C 转换为 MIPS

> ID：10316551
> 
> 赞同：-5
> 
> 时间：2012-04-25T13:19:41.667
> 
> 标签：c, assembly, mips

我需要把它翻译成 MIPS 汇编（在火星汇编器上工作）

```
void mm ( double x[][], double y[][], double z[][], int n)
{
    int i,j;
    for (i=0; i !=n; i++)
        for (j=0; j !=n; j++)
            z[i][j] = 0.0;
    for (k=0; k !=n; k++)
        z[i][j] = z[i][j] + x[i][k] * y[k][j];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T13:23:25.073

这似乎有点像“做我的作业”问题，但我会给你一个提示。

将开关传递[`-S`给 gcc](http://gcc.gnu.org/onlinedocs/gcc/Overall-Options.html#Overall-Options)将导致它发出汇编代码。请注意，此代码可能需要针对 mars 汇编程序进行调整。

祝你好运！

# annotations - IBM Websphere 中的 ConnectionWaitTimeoutException

> ID：10316552
> 
> 赞同：0
> 
> 时间：2012-04-25T13:19:47.247
> 
> 标签：annotations, timeout, websphere, database-connection, connection-pooling

我们运行的应用程序基于 Struts 2.0。我们中的许多人同时访问此应用程序。每天晚上大约在同一时间，应用程序都会大量出现。如果我们在浏览器上重新加载应用程序，它永远不会移动到登录页面之前。查看服务器的日志，我可以看到最后一条消息是“线程睡眠”。

在做一些研究时，我遇到了 Spring 框架注释的使用。Struts2 也一样吗？如果可能的话，你能否在struts文件中说明用途？

```
[4/25/12 15:20:19:595 GMT+05:30] 00000029 SystemOut     O 25 Apr 2012 15:20:19,595 DEBUG [Thread-64][GreeceSynchronizer] thread sleep
action [cape.base.lbxoutclearing.ui.action.LoginAction@1f601f6]
[4/25/12 15:20:26:293 GMT+05:30] 00000030 SystemOut     O 25 Apr 2012 15:20:26,293 DEBUG [WebContainer : 5][I18nInterceptor] intercept '//doLogin' { 
[4/25/12 15:20:26:293 GMT+05:30] 00000030 SystemOut     O 25 Apr 2012 15:20:26,293 DEBUG [WebContainer : 5][I18nInterceptor] requested_locale=null
[4/25/12 15:20:26:293 GMT+05:30] 00000030 SystemOut     O 25 Apr 2012 15:20:26,293 DEBUG [WebContainer : 5][I18nInterceptor] before Locale=en_US
[4/25/12 15:20:26:293 GMT+05:30] 00000030 SystemOut     O 25 Apr 2012 15:20:26,293 DEBUG [WebContainer : 5][InstantiatingNullHandler] Entering nullPropertyValue [target=[cape.base.lbxoutclearing.ui.action.LoginAction@1f601f6, com.opensymphony.xwork2.DefaultTextProvider@58605860], property=struts]
[4/25/12 15:20:26:294 GMT+05:30] 00000030 SystemOut     O 25 Apr 2012 15:20:26,294 DEBUG [WebContainer : 5][FileUploadInterceptor] Bypassing // doLogin
[4/25/12 15:20:26:294 GMT+05:30] 00000030 SystemOut     O 25 Apr 2012 15:20:26,294 DEBUG [WebContainer : 5][StaticParametersInterceptor] Setting static parameters {}
[4/25/12 15:20:26:294 GMT+05:30] 00000030 SystemOut     O 25 Apr 2012 15:20:26,294 DEBUG [WebContainer : 5][ParametersInterceptor] Setting params password => [ DEMO9 ] changePassword => [ false ] forgotPassword => [  ] username => [ DEMO9 ] 
[4/25/12 15:20:26:294 GMT+05:30] 00000030 SystemOut     O 25 Apr 2012 15:20:26,294 DEBUG [WebContainer : 5][XWorkConverter] Property: changePassword
[4/25/12 15:20:26:294 GMT+05:30] 00000030 SystemOut     O 25 Apr 2012 15:20:26,294 DEBUG [WebContainer : 5][XWorkConverter] Class: cape.base.lbxoutclearing.ui.action.LoginAction
[4/25/12 15:20:26:294 GMT+05:30] 00000030 SystemOut     O 25 Apr 2012 15:20:26,294 DEBUG [WebContainer : 5][XWorkConverter] field-level type converter for property [changePassword] = none found
[4/25/12 15:20:26:294 GMT+05:30] 00000030 SystemOut     O 25 Apr 2012 15:20:26,294 DEBUG [WebContainer : 5][XWorkConverter] global-level type converter for property [changePassword] = none found
[4/25/12 15:20:26:294 GMT+05:30] 00000030 SystemOut     O 25 Apr 2012 15:20:26,294 DEBUG [WebContainer : 5][XWorkConverter] falling back to default type converter [com.opensymphony.xwork2.util.XWorkBasicConverter@48c648c6]
[4/25/12 15:20:26:294 GMT+05:30] 00000030 SystemOut     O 25 Apr 2012 15:20:26,294 DEBUG [WebContainer : 5][CompoundRootAccessor] No object in the CompoundRoot has a publicly accessible property named 'forgotPassword' (no setter could be found).
[4/25/12 15:20:26:294 GMT+05:30] 00000030 SystemOut     O 25 Apr 2012 15:20:26,294 DEBUG [WebContainer : 5][CompoundRootAccessor] No object in the CompoundRoot has a publicly accessible property named 'password' (no setter could be found).
[4/25/12 15:20:26:294 GMT+05:30] 00000030 SystemOut     O 25 Apr 2012 15:20:26,294 DEBUG [WebContainer : 5][CompoundRootAccessor] No object in the CompoundRoot has a publicly accessible property named 'username' (no setter could be found).
[4/25/12 15:20:26:294 GMT+05:30] 00000030 SystemOut     O 25 Apr 2012 15:20:26,294 DEBUG [WebContainer : 5][LoginAction] Validating login
[4/25/12 15:20:26:295 GMT+05:30] 00000030 SystemOut     O 25 Apr 2012 15:20:26,295 DEBUG [WebContainer : 5][LoginAction] 1
[4/25/12 15:20:31:256 GMT+05:30] 00000036 FreePool      E   J2CA0045E: Connection not available while invoking method createOrWaitForConnection for resource lockBoxDSJNDI.
[4/25/12 15:20:31:292 GMT+05:30] 00000036 SystemOut     O 25 Apr 2012 15:20:31,289 ERROR [WebContainer : 8][BaseDAO] Exception in getConnection()
com.ibm.websphere.ce.cm.ConnectionWaitTimeoutException: Connection not available, Timed out waiting for 180007
    at com.ibm.ws.rsadapter.AdapterUtil.toSQLException(AdapterUtil.java:1252)
    at com.ibm.ws.rsadapter.jdbc.WSJdbcDataSource.getConnection(WSJdbcDataSource.java:444)
    at com.ibm.ws.rsadapter.jdbc.WSJdbcDataSource.getConnection(WSJdbcDataSource.java:400)
    at cape.base.lbxoutclearing.ui.dao.BaseDAO.getConnection(BaseDAO.java:49)
Caused by: com.ibm.websphere.ce.j2c.ConnectionWaitTimeoutException: Connection not available, Timed out waiting for 180007
    at com.ibm.ejs.j2c.FreePool.createOrWaitForConnection(FreePool.java:1496)
    at com.ibm.ejs.j2c.PoolManager.reserve(PoolManager.java:2273)
    at com.ibm.ejs.j2c.ConnectionManager.allocateMCWrapper(ConnectionManager.java:903)
    at com.ibm.ejs.j2c.ConnectionManager.allocateConnection(ConnectionManager.java:603)
    at com.ibm.ws.rsadapter.jdbc.WSJdbcDataSource.getConnection(WSJdbcDataSource.java:431)
    ... 130 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T00:39:13.437

这与 Struts/Spring 无关。

容器 WAS 说它无法从连接池中获取连接。

在数据源上指定了 Connectiontimeout 时间段。如果在等待那段时间之后，如果 WAS 运行时无法为您的应用程序提供来自池的连接，那么它会抛出此异常。

您必须找出谁在持有池中的连接并确保释放连接。

使用此跟踪字符串 ConnLeakLogic=finest 打开跟踪。发生此异常时，它将转储列出当时正在使用连接的所有线程的状态。这应该是你的起点。

高温高压

芒鲁

# grails - grails中重复的错误消息

> ID：10316553
> 
> 赞同：4
> 
> 时间：2012-04-25T13:19:49.350
> 
> 标签：grails

请解释这个片段。如何`g:eachError`工作？

```
<g:eachError>
   <dt>
      <a href=""
         onclick="javascript:document.getElementById('${it.getProperties().get("field")}').focus();
           return false;">
         <g:message error="${it}"/>
      </a>
   </dt>
</g:eachError> 
```

在此之后，我收到了重复的错误消息。似乎是因为这个错误（下面的链接），但我使用的是 SortedSet。
[http://jira.grails.org/browse/GRAILS-8924](http://jira.grails.org/browse/GRAILS-8924)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:31:07.207

您需要指定 bean 和字段：

```
<g:eachError var="err" bean="${idQuery}" field="idStr">
      <span class="help-inline">${err.defaultMessage}</span>
    </g:eachError> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:31:28.137

它不显示重复的错误消息，但显示多个错误消息。意味着您必须在错误标记中定义模型属性和字段属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T19:18:20.393

您是否阅读过[http://grails.org/doc/latest/ref/Tags/eachError.html](http://grails.org/doc/latest/ref/Tags/eachError.html)上的文档？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T15:01:59.893

[在github](https://github.com/grails/grails-core/blob/master/grails-plugin-gsp/src/main/groovy/org/codehaus/groovy/grails/plugins/web/taglib/ValidationTagLib.groovy#L180)`ValidationTagLib`上查看类的源代码。

# objective-c - 如何在表格视图单元格中显示数据

> ID：10316562
> 
> 赞同：-1
> 
> 时间：2012-04-25T13:20:14.750
> 
> 标签：objective-c, ios, cocoa-touch

我想将数据显示到表格视图单元格中，我该如何实现这一点。请帮我

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *feedsTableIdentifier = @"FeedsTableIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:feedsTableIdentifier];
    if (cell==nil) {
        [[NSBundle mainBundle] loadNibNamed:@"FeedsTableViewCell" owner:self options:nil];
        cell=tableViewCell;
        self.tableViewCell=nil;
    }
    title=(UILabel *)[cell viewWithTag:1];
    title.text=[NSString stringWithFormat:@"%d",indexPath.row];

    postedBy=(UILabel*)[cell viewWithTag:2];
    postedBy.text=[NSString stringWithFormat:@"%d",indexPath.row];

    onDate = (UILabel *)[cell viewWithTag:3];
    onDate.text=[NSString stringWithFormat:@"%d",indexPath.row];

    return cell;
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:30:17.360

我认为您是新的 Iphone 开发人员 .. 在您的代码中有很多错误/Bug ...

我想你想要

[“如何创建自定义单元格”`请参考此链接....为您提供帮助](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:46:26.440

除了阅读这个：http: [//developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7)

尝试研究界面构建器/故事板如何帮助您，设置 IBOutlets 而不是尝试使用`[cell viewWithTag:3]`. 使用 IBOutlets 你可以通过名字来引用它们，比如：

```
postedByLabel.text = @"Some user";
titleLabel.text = @"A title!"; 
```

现在是您最好阅读的日期`NSDate`和`NSDateFormatter`:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:33:20.093

您是否正在寻找这样的东西：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    CellController *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
    cell = [[CellController alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.menuLabel.text = [self.homeList objectAtIndex:indexPath.row];

    // Configure the cell...

    return cell;
} 
```

您需要有一个自定义的 CellController 设置并与情节提要中的单元格相关联。然后，您需要在自定义单元格中设置所需的三个标签（标题、postedBy、onDate），以便将数据插入标签中。

本教程可能会对您有所帮助：http: [//ijoshsmith.com/2011/07/16/creating-a-custom-uitableviewcell-in-ios-4/](http://ijoshsmith.com/2011/07/16/creating-a-custom-uitableviewcell-in-ios-4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T15:34:11.787

您可以使用：

```
cell.textLabel.text = @"Some text"; 
```

如果您不想创建自定义 UITableViewCell 类。

# c# - 如何在 Windows 窗体中创建没有选项卡标题的选项卡控件？

> ID：10316567
> 
> 赞同：38
> 
> 时间：2012-04-25T13:20:28.093
> 
> 标签：c#, .net, winforms

我已经使用选项卡控件创建了一个 Windows 窗体，但它有一个标题。我想隐藏它。我无法使用选项卡控件的任何属性来做到这一点。是否定义了任何属性来隐藏选项卡控件的选项卡标题而不通过代码？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-04-27T07:29:12.297

使用以下代码隐藏选项卡或在设计中设置这些属性。

```
 tabControl.Appearance = TabAppearance.FlatButtons;
    tabControl.ItemSize = new Size(0, 1);
    tabControl.SizeMode = TabSizeMode.Fixed; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T18:57:30.890

您希望选项卡面板没有允许用户在它们之间切换的功能，所以我想您想创建几组单独的控件，一次向用户显示一个。您可以通过多种方式实现此目的（如果您认为适合您的情况，您可以选择其中一种）：

*   在 中使用多个`Panel`控件而不是多个选项卡`TabControl`，但是，在设计器中很难工作，因为所有控件都是可见的
*   使用不同`Form`的 s 而不是制表符来保持布局部分分开。可以，但你可能不想使用多个`Form`s，所以这取决于具体情况。

最后，**建议的解决方案**：

*   将每组控件封装在一个`UserControl`. 这使您可以单独保留每个布局，因此您可以轻松地设计每个布局，而不会妨碍其他控件;)。处理每个布局的代码也将分开。然后只需在表单中拖动这些控件并使用适当地设置它们的可见性来显示您想要的。

如果这些建议都不适合您，请告诉我，以便我寻找其他可能的解决方案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-12-16T08:32:00.860

就像你想的那样简单，你只需将面板的窗口拖到上面，这样就会在表单之外。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-11-27T00:38:32.813

使用 DrawMode: OwnerDrawFixed 将隐藏 TabPage 标题文本[DrawMode : OwnerDrawFixed](https://i.stack.imgur.com/QgF6U.png)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-03-11T14:56:27.627

实现相同（或类似）的另一种方法是：您可以从 TabControl.TabPages 集合中删除选项卡，然后添加要显示的选项卡。

在表单初始化期间，我删除了选项卡（因此在设计器中我可以轻松地管理它们）并在一些控制事件中（作为按钮单击）我显示用户必须看到的选项卡。

像这样的东西：

```
// During form load:
ctrTab.TabPages.Clear();

// ...... 

// During button click or some other event:
if(rbSend.Checked)
    ctrTab.TabPages.Add(pgSend);
else
    ctrTab.TabPages.Add(pgReceive); 
```

这样，用户仍然可以看到标题选项卡，但就像控件组的标题一样，他无法更改/切换当前活动选项卡。

# vba - 将特定数据从 Excel 导出到 Word

> ID：10316570
> 
> 赞同：-1
> 
> 时间：2012-04-25T13:20:36.347
> 
> 标签：vba, excel, ms-word

我正在尝试找到一个宏，它将在一个相当大的 Excel 文件中查找特定列，并将它们各自导出/复制到一个新的 Microsoft Word 文件中。

例如，假设我想要 Excel 文件中的列`H`、`I`、`J`和`O`，每个都有自己的 Microsoft Word 文档（希望文档被命名为每列的第一个单元格数据）。

我通常使用 Microsoft Word 宏，但 Excel 似乎有点棘手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:13:39.420

如果您愿意编写宏，则需要使用 Reference `Microsoft Word x.x Object Library`。然后您可以使用`Word.Application`类型来控制 Word。

例如，这将打开和关闭 Word 的一个实例：

```
Dim w As Word.Application
Set w = CreateObject("Word.Application")
w.Visible = True ' if you want the user to see the window
w.Quit 
```

要从所需列中的单元格访问数据，您需要使用`Worksheet.Cells`表格。例如，要读取 H 列（H 是第 8 列）：

```
Dim i As Integer
Dim s As String
i = 1

Do
    s = ActiveSheet.Cells(i, 8)
    If s = "" Then Exit Do
    MsgBox s
    i = i + 1
Loop 
```

我相信你可以从这里开始。

# calendar - 如何在 jsf Primefaces 中删除 TimePicker（日历）按钮（现在和完成）

> ID：10316575
> 
> 赞同：1
> 
> 时间：2012-04-25T13:20:52.047
> 
> 标签：calendar, primefaces, timepicker

我正在处理 JSF 日历，我想用土耳其语做我的工作。但是，当我将 TimePicker 添加到我的日历中时，会显示“现在”和“完成”按钮，并且它们是英文的（例如[http://www.primefaces.org/showcase-labs/ui/calendarTime.jsf](http://www.primefaces.org/showcase-labs/ui/calendarTime.jsf)上的 DateTime 示例）。我想更改按钮的语言或删除它们。知道怎么做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:32:46.843

您可以通过提供语言环境和本地化 javascript 来自定义标签。

[您可以从primefaces wiki](http://wiki.primefaces.org/display/Components/PrimeFaces+Locales)获取本地化 javascript 之一。之后尝试以下操作：

```
<h:outputScript name=”path_to_your_translations.js” />
<p:calendar value="#{calendarBean.date1}" pattern="MM/dd/yyyy HH:mm" locale="tr" /> 
```

# oop - 重载函数返回指向基类型的指针以及fortran 2003中的抽象接口？

> ID：10316579
> 
> 赞同：0
> 
> 时间：2012-04-25T13:21:07.907
> 
> 标签：oop, fortran, fortran2003

我正在用 Fortran2003 编写一个链表结构。此链表中的节点有两种交替出现。该列表表示边的拓扑环，每条边由两个顶点界定，每个顶点连接到两条边。这些结构被声明为抽象 NODE_T 类型，并由两个子类 VN_T 和 EN_T 实现。一个 VN_T 指向两个 EN_T，反之亦然。由于列表在类型之间交替，因此指针存储在子类中。我的问题是将类型绑定函数（方法？）添加到称为 NEXT() 和 PREV() 的 VN_T 和 EN_T，并通过多态性做正确的事情。VN_T%NEXT() 应该跳过*两个*步骤，并获得下一个 VN_T（与开始的 VN_T 相隔一个 EN_T）。

我的类型/类定义如下：

```
TYPE, ABSTRACT :: NODE_T
  INTEGER :: IENT
  INTEGER :: ISIDE
  INTEGER :: ISUBTYPE
  INTEGER :: IPAD
CONTAINS
  PROCEDURE(NEXTA), DEFERRED :: NEXT
  PROCEDURE(PREVA), DEFERRED :: PREV
  END TYPE NODE_T

ABSTRACT INTERFACE
FUNCTION NEXTA(PENT)
IMPORT NODE_T
CLASS(NODE_T), POINTER :: NEXTA
CLASS(NODE_T) :: PENT
END FUNCTION

FUNCTION PREVA(PENT)
IMPORT NODE_T
CLASS(NODE_T), POINTER :: PREVA
CLASS(NODE_T) :: PENT
END FUNCTION
END INTERFACE

  TYPE, EXTENDS(NODE_T) :: VN_T
     DOUBLE PRECISION DT
     CLASS(EN_T), POINTER :: N
     CLASS(EN_T), POINTER :: P
     CONTAINS
      PROCEDURE :: NEXT => NEXTV
      PROCEDURE :: PREV => PREVV
  END TYPE

  TYPE, EXTENDS(NODE_T) :: EN_T
     CLASS(VN_T), POINTER :: N
     CLASS(VN_T), POINTER :: P
     CONTAINS
      PROCEDURE :: NEXT => NEXTE
      PROCEDURE :: PREV => PREVE
  END TYPE 
```

next/prev 例程的实现都大同小异，next/prev 和 EN/VN 的四种组合：

```
FUNCTION NEXTE(PENT)
CLASS(NODE_T), POINTER :: NEXTE
CLASS(EN_T) PENT
NEXTE => PENT%N%N
END FUNCTION 
```

当我调用这些函数时：

```
CLASS(NODE_T), POINTER :: NODE1, NODE2
NODE2 => NODE1%NEXT() 
```

然后我的编译器（Intel FORTRAN XE Composer 2011，即 v12.0）抱怨消息

```
error #8314: If the rightmost part-name is of abstract type, data-ref shall be polymorphic   [NEXT]
            NODE2 => NODE1%NEXT()
---------------------------^ 
```

基于[此文档](http://software.intel.com/en-us/articles/abstract-type-usage-with-intelr-fortran-compiler/)似乎表明它正在尝试在*基*类上调用 procdure NEXT 而不是选择其中一个子类实现（它应该能够根据右侧的 NODE1 的具体类型来执行此操作手边，对吧？）。

我是 F2​​003 的 OOP 功能的新手，所以我在 JAVA 中制作了这个模式的模型，我对它的工作感到满意。任何人都可以阐明这是否是a）F2003的OOP行为的差异，2）编译器错误或3）只是我脑残......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T23:26:19.600

您可能需要更新编译器。正如在这个线程中所讨论的

```
http://software.intel.com/en-us/forums/showthread.php?t=78855 
```

Fortran 标准最初不允许直接调用抽象类型的类型绑定过程，而您正在尝试这样做。但是，标准已更改，现在应该已将其纳入英特尔 Fortran。

另一种方法是将基类修改为：

```
TYPE :: NODE_T
  INTEGER :: IENT
  INTEGER :: ISIDE
  INTEGER :: ISUBTYPE
  INTEGER :: IPAD
CONTAINS
  PROCEDURE :: NEXT
  PROCEDURE :: PREV
  END TYPE NODE_T 
```

# javascript - 可以枚举或访问 NodeJs 中的模块级函数声明吗？

> ID：10316582
> 
> 赞同：1
> 
> 时间：2012-04-25T13:21:10.477
> 
> 标签：javascript, node.js, module

在 Node.js 中，如果我加载一个包含模块范围内代码的模块，例如：

```
this["foo"] = function() { console.log("foo"); } 
```

...然后我似乎得到了一个全局可用的函数，我可以通过`foo()`使用该模块的任何代码来调用它。它可以看作是带有 的印刷品之一`Object.getOwnPropertyNames(this)`。

但是，如果我将以下内容放在模块范围内：

```
function foo() { console.log("foo"); } 
```

...然后它会生成一个函数，该函数可以在该模块中以类似方式调用`foo()`，但在其外部是不可见的（例如，不显示为带有 的项目之一`Object.getOwnPropertyNames(this)`）。

我认为这是在浏览器中所做的运行时行为的变化。默认情况下，浏览器似乎将所有内容都放入全局范围（多年来，人们不得不通过将事物包装在匿名函数/等中来有意识地避免这种情况）

我的问题是 NodeJs 是否有一些秘密的方式来与模块之外的这些声明进行交互，在这些声明中它们被声明为**BESIDES using`exports.(...) = (...)`** . 是否可以以某种方式枚举它们，或者如果它们没有被模块导出调用，它们是否会在声明它们时立即被垃圾收集？如果我在加载模块之前知道这样一个函数的名称......我可以告诉 Node.js 在定义它时“捕获它”吗？

我不希望有任何此类功能得到充分记录……但也许有调试器功能或其他系统调用。最好的指针之一是指向处理这种声明的 Node.js 项目中的特定代码，以查看是否存在任何漏洞。

* * *

*注意：在对 V8 进行一些研究时，我发现“函数定义”没有被添加到上下文中。它被放入“执行上下文”的“激活对象”中，不能以编程方式访问。如果您想要一些“轻松阅读”，我发现：*

[http://coachwei.sys-con.com/node/676031/mobile](http://coachwei.sys-con.com/node/676031/mobile)

[http://perfectkills.com/understanding-delete/](http://perfectionkills.com/understanding-delete/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:37:19.273

如果你填写exports.foo = foo; 在文件的末尾，它将在节点中的其他文件中可用，假设您使用文件名执行 var myFile = require('myFile.js') 并通过 myFile.foo(); 调用该函数；您甚至可以在导出中重命名函数以供外部使用，并在使用 require 时设置您想要调用包的任何内容。

顺便说一句，您可以像在任何 JSON 对象上一样枚举这些函数（即 for k in ...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:11:47.860

*如果没有像调试器*这样更高级的反射工具，这在节点中是不可能的。

这样做的唯一方法是使用[`__parent__`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/Parent)由于安全问题和其他原因而被删除的内容（难以优化，一开始就不是标准的）。当您运行脚本时，这些变量会在模块下关闭。如果不明确导出它们，您将无法在其他地方访问它们。

这不是错误，这是设计使然。这就是节点的工作方式。[看到这个密切相关的问题](https://stackoverflow.com/questions/10465423/how-can-i-list-all-the-functions-in-my-node-js-script/15741008#15741008)。

如果这种反射在没有调试器之类的工具的情况下可用，那么优化源代码将*非常*困难（至少 v8 的工作方式），这意味着您的问题的答案是否定的。对不起。

# javascript - Ajax 跨域变量

> ID：10316583
> 
> 赞同：0
> 
> 时间：2012-04-25T13:21:12.617
> 
> 标签：javascript, jquery, ajax

我正在尝试使用 ajax 从外部域获取变量，然后使用数据创建预填充的表单字段，但我似乎无法让它工作。

我对 JavaScript 有点陌生，它可能有点愚蠢，但我就是不知道为什么它不起作用。

```
 <html>
<head>
<script type="text/javascript">
    function xss_ajax(url) {
        var script_id = null;
        var script = document.createElement('script');
        script.setAttribute('type', 'text/javascript');
        script.setAttribute('src', url);
        script.setAttribute('id', 'script_id');

        script_id = document.getElementById('script_id');
        if(script_id){
            document.getElementsByTagName('head')[0].removeChild(script_id);
        }

        // Insert <script> into DOM
        document.getElementsByTagName('head')[0].appendChild(script);
    }

    function callback(data) {

    var counter = 1;
    var limit = 3;
    var txt = '';

    for(var key in data) {

          var newdiv = document.createElement('div');
          newdiv.innerHTML = "Entry " + (counter + 1) + " <br><input type='text' name='myInputs[]' value=" + data[key] +">";
          document.getElementById(divName).appendChild(newdiv);
          counter++;
;
        }
    }

    var url = "http://myserver.com/test.php";

</script>
<title></title>
</head>
<body>
<button onclick="xss_ajax(url);">Get Data</button>
</body>
</html> 
```

外部域上的脚本。

```
callback({"firstname":"John", "lastname":"Smith", "email":"john.smith@johnsmith.com"}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:23:19.217

您需要研究 JSONP。使用库来处理请求也会成倍增加，检查 jQuery 或 Extjs。这是一篇[博客文章](http://devlog.info/2010/03/10/cross-domain-ajax/)，应该可以帮助您。

# sql - 选择特定值的计数

> ID：10316584
> 
> 赞同：1
> 
> 时间：2012-04-25T13:21:13.373
> 
> 标签：sql, sqlite

我有一个带有一些值的 SQL 表。

```
名称元素
122601:1ZIN:AP5|N
122601:1ZIN:AP5|N
122601:1ZIN:AP5|C
122601:1ZIN:AP5|N
122601:1ZIN:AP5|N
122601:1ZIN:AP5|N
123440:1ZPD:CIT|C
123440:1ZPD:CIT|O
123440:1ZPD:CIT|O
123440:1ZPD:CIT|C
123440:1ZPD:CIT|C
123440:1ZPD:CIT|O
123440:1ZPD:CIT|O
123440:1ZPD:CIT|C

```

例如，如何仅选择 C ​​和 O 的计数大于 2 的名称？哪里除了 C 和 O 什么都没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:23:59.680

```
SELECT T.NAME
FROM TABLE_NAME T
WHERE T.ELEMENT IN (SELECT TT.ELEMENT
                    FROM TABLE_NAME TT
                    WHERE TT.ELEMENT IN ('C', 'O')
                    GROUP BY TT.ELEMENT
                    HAVING COUNT(TT.ELEMENT) > 2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:31:18.680

不确定这些是否是最优化的，但......

超过 2 个 C 的地方

```
SELECT NAME, LENGTH(ELEMENT) - LENGTH(REPLACE(ELEMENT, 'C', '')) as countC FROM table HAVING countC > 2; 
```

元素中只有 C 和 O

```
SELECT NAME, ELEMENT REGEXP "^[CO]+$" AS hasCO FROM table having hasCO = 1; 
```

没有测试他们，但我认为他们是对的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:32:06.980

这应该为你做：

```
SELECT NAME FROM TABLE WHERE ELEMENT IN (SELECT ELEMENT                  
FROM TABLE WHERE ELEMENT IN('C', 'O') GROUP BY ELEMENT                  
HAVING COUNT(ELEMENT) > 2) 
```

# lua - D Lua 不能被元化

> ID：10316585
> 
> 赞同：3
> 
> 时间：2012-04-25T13:21:20.213
> 
> 标签：lua, d

我试图让 Lua 使用新的编程语言 D。一切正常（库、lua52.dll 等）但`luaL_getmetatable`崩溃。*本来dlua*中没有定义该函数，但我添加了它：

```
 //C     #define luaL_getmetatable(L,n)  (lua_getfield(L, LUA_REGISTRYINDEX, (n)))
    void luaL_getmetatable(lua_State* L, const(char)* s) {
        lua_getfield(L, LUA_REGISTRYINDEX, s);
    } 
```

但是当我运行时：

```
 L = lua_open();
    luaL_openlibs(L);
    // prevent script kiddies
    luaL_dostring(L, "os = nil; io = nil");
    // reprogram 'print'
    luaL_newmetatable(L, "vector");
    luaL_getmetatable(L, "vector"); // CRASH 
```

它崩溃了。任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T23:20:04.363

听起来您使用的是古老的[dlua](http://code.google.com/p/dlua/)绑定，而不是一直使用的[LuaD](https://github.com/JakobOvrum/LuaD)[`luaL_getmetatable`](https://github.com/JakobOvrum/LuaD/blob/master/luad/c/lauxlib.d#L167)。

但是，这些绑定以及您的代码都适用于 Lua 5.1，而不是 5.2；确保链接到正确版本的 Lua。Lua 5.2中没有`lua_open`（并且在 5.1 中已弃用）。

如果在链接到正确的库后遇到同样的问题，我建议使用宏`LUA_USE_APICHECK`集编译 Lua 并再次尝试查看到底出了什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:30:27.250

也许你应该看看现有的 Lua-Bindings for D, [LuaD](https://github.com/JakobOvrum/LuaD)。

# c# - 如何编写符合特定 SOAP 架构的 WCF 服务？

> ID：10316586
> 
> 赞同：1
> 
> 时间：2012-04-25T13:21:24.877
> 
> 标签：c#, wcf, .net-4.0

我的组织对 SOAP 信封的外观有特定的指导方针。它们具有生成的 SOAP 消息应符合的特定模式 (XSD)。如何设计我的 WCF 接口以符合此架构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:21:38.477

这里有一个类似的问题： [Generate DataContract from XSD](https://stackoverflow.com/questions/2188909/generate-datacontract-from-xsd)

看看它，我想这就是你要找的。底线是您应该从 XSD 生成合同，而不是手工制作它以使其符合 WCF 生成 WSDL 时的要求。

# android - 如何在 Eclipse 中从我的 Android 项目中删除依赖项

> ID：10316587
> 
> 赞同：15
> 
> 时间：2012-04-25T13:21:25.437
> 
> 标签：android, eclipse, dependencies, libraries

当我突出显示我的项目时，转到属性，选择 java 构建路径，然后尝试从我的 Android 依赖项列表中删除一个 Android 依赖项，删除按钮是灰色的。如何删除该特定依赖项？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-09T18:06:33.267

JFTR：

在 Eclipse 上的两个项目分支的混乱合并后，我遇到了类似的问题。我可以恢复合并，因为我还没有提交，但是我没有存储在我的存储库中的 Eclipse 项目文件被弄乱了。

我的解决方案是：

1.  从“问题”视图中删除错误消息。
2.  清理项目（项目/清理...）

解决了！

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-25T13:34:05.560

从 libs 文件夹中删除依赖项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-30T17:02:13.607

好吧，上面的解决方案对我不起作用，所以我只需输入 project.properties 文件并删除依赖项（作为参考写在那里）。
这些是在 Ubuntu 上的步骤：

1.  在项目根文件夹类型上使用控制台`sudo vi project.properties`
2.  转到您要删除的行并将其删除（您可以键入 double d 删除一行 --> `dd`）
3.  关闭并保存文件（按 ESC，然后按`wq`）
4.  清理项目并重建。

**注意**：在您手动更改 project.properties 之前，强烈建议您备份您的项目，因为此操作不安全！！！

很抱歉为那些说流利 Linux 的人详细说明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-08T04:23:41.327

到目前为止，我可以在 Android Dependencies 下找到 2 种类型的依赖项：

1.  构建工作区 libs 文件夹的路径
2.  构建通过 Android 工具安装并在 Eclipse 下创建为另一个项目的其他项目的路径，例如 GridLayout for android(android-support-v7-gridlayout.jar)

要删除第一个，很容易。只需删除 libs 文件夹下的 jars。要删除第二个，也很容易。直接进入项目的Build Path，选择Android，去掉*Library*面板下的reference项

# c# - 如何以编程方式打开word文档选择和打印保护

> ID：10316588
> 
> 赞同：0
> 
> 时间：2012-04-25T13:21:28.510
> 
> 标签：c#, ms-office, protection

我的文件服务器上有一些共享文档。我想对这些 ms office 文档应用某种保护。我希望将用户放在不同的组中并授权他们使用文件。授权在这里意味着一些用户不应该能够选择文件的一部分来复制文件。他们应该能够以只读方式查看文件。

这是单独处理办公文档的解决方法。服务器权限系统不提供任何选择保护等。

底线，我需要像打印预览这样的东西，排除了编辑和打印选项。

有没有办法以编程方式做到这一点？它可以通过 C# 或其他一些第三方工具。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:50:05.103

我用 WPF 和 XPS 做到了。检查此以获取更多信息： http: [//www.codeproject.com/Articles/22849/Integrating-WPF-with-Windows-Forms](http://www.codeproject.com/Articles/22849/Integrating-WPF-with-Windows-Forms)

# iphone - XIB 不加载...只是显示黑屏

> ID：10316590
> 
> 赞同：2
> 
> 时间：2012-04-25T13:21:33.097
> 
> 标签：iphone, ios, xib

我正在 iOS 4.2 及更高版本中创建一个通用应用程序。

我有一个叫`DataInputViewController_iPhone.xib`. 在出现的第一个视图控制器上，我有一个应该启动类的按钮`DataInputViewController`。它可以，但它不显示 XIB 文件的内容。它只是显示一个黑屏。

任何想法为什么会发生这种情况？

我有这段代码调用新的视图控制器：

```
-(IBAction)clickedButton:(id)sender {
    if((UIButton *)sender == (UIButton *)startButton){
        NSString *nibName;
        if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
            nibName = @"DataInputViewController_iPhone";
        } else {
            nibName = @"DataInputViewController_iPad";
        }

        DataInputViewController *nextVC = [[DataInputViewController alloc] initWithNibName:nibName bundle:nil];
        [self.navigationController pushViewController:nextVC animated:YES];
    }
    else if((UIButton *)sender == (UIButton *)otherButton){
        NSLog(@"clicked the other button");
    }
} 
```

NSLogging 在这个方法和`init`新视图控制器的方法中告诉我`nibNameOrNil`变量被正确拉出。

这就是（标准）init 方法的样子`DataInputViewController.m`：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
} 
```

任何想法为什么会发生这种情况？或者如何修复？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:33:24.607

您不必手动设置笔尖名称。只需将它们命名为`DataInputViewController~iphone.xib`，`DataInputViewController~ipad.xib`然后调用`[[DataInputViewController alloc] init]`。

有关更多信息，请参阅[iOS 支持设备特定资源](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/LoadingResources/Introduction/Introduction.html#//apple_ref/doc/uid/10000051i-CH1-SW2)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T12:50:21.390

我有同样的问题。只需清理您的项目，关闭 XCode，重新启动您的 Mac 并再次打开项目。并且不要忘记之前在模拟器或设备上删除应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-08T16:08:37.643

我遇到了同样的问题，我需要为实用程序视图控制器加载 iPad 或 iPhone .xib 文件。它是一个表单，因此它有很多作为 IBOutlets 链接的 UILabel 和 UITextField 元素。我会构建整个布局，链接所有元素，它工作正常，直到我构建并运行它。我什至接受了发布在该线程上的建议并重新创建了 .xib 和类文件（大量链接 IBOutlets），但没有成功。

问题是这样的。在类的实现中不能@synthesized 根视图。一旦我合成了基础视图，一切都变黑了。通过简单地删除“@synthesize 视图；” 行，一切都像一个魅力。当我展示我的视图控制器时，一切都再次出现了。

这是包含所有 IBOutlets 的类的头文件：

```
 #import <UIKit/UIKit.h>

@interface SignUpFormViewController : UIViewController <UITextFieldDelegate, NSXMLParserDelegate>

@property (strong, nonatomic) IBOutlet UIView *rootView;
@property (weak, nonatomic) IBOutlet UILabel *signUpFormLabel;
@property (weak, nonatomic) IBOutlet UIButton *infoButton;
@property (weak, nonatomic) IBOutlet UILabel *enterEmailLabel;
@property (weak, nonatomic) IBOutlet UITextField *enterEmailTextField;
@property (weak, nonatomic) IBOutlet UILabel *enterPasswordLabel;
@property (weak, nonatomic) IBOutlet UITextField *enterPasswordTextField;
@property (weak, nonatomic) IBOutlet UILabel *reEnterPasswordLabel;
@property (weak, nonatomic) IBOutlet UITextField *reEnterPasswordTextField;
@property (weak, nonatomic) IBOutlet UILabel *enterFirstNameLabel;
@property (weak, nonatomic) IBOutlet UITextField *enterFirstNameTextField;
@property (weak, nonatomic) IBOutlet UILabel *enterLastNameLabel;
@property (weak, nonatomic) IBOutlet UITextField *enterLastNameTextField;
@property (weak, nonatomic) IBOutlet UILabel *enterPhoneNumberLabel;
@property (weak, nonatomic) IBOutlet UITextField *enterPhoneNumberTextField;
@property (weak, nonatomic) IBOutlet UILabel *enterStreetAddressLabel;
@property (weak, nonatomic) IBOutlet UITextField *enterStreetAddressTextField;
@property (weak, nonatomic) IBOutlet UILabel *enterStreetAddress2Label;
@property (weak, nonatomic) IBOutlet UITextField *enterStreetAddress2TextField;
@property (weak, nonatomic) IBOutlet UILabel *enterCityLabel;
@property (weak, nonatomic) IBOutlet UITextField *enterCityTextField;
@property (weak, nonatomic) IBOutlet UILabel *enterStateLabel;
@property (weak, nonatomic) IBOutlet UITextField *enterStateTextField;
@property (weak, nonatomic) IBOutlet UILabel *enterZipLabel;
@property (weak, nonatomic) IBOutlet UITextField *enterZipTextField;
@property (weak, nonatomic) IBOutlet UIButton *backButton;
@property (weak, nonatomic) IBOutlet UIButton *signUpNowButton;

- (IBAction)infoButtonPressed:(id)sender;
- (IBAction)backButtonPressed:(id)sender;
- (IBAction)signUpNowButtonPressed:(id)sender;

@end 
```

这是正在合成根视图的实现文件：

```
#import "SignUpFormViewController.h"

@implementation SignUpFormViewController
@synthesize rootView,signUpFormLabel,infoButton,enterEmailLabel,enterEmailTextField,enterPasswordLabel,enterPasswordTextField,reEnterPasswordLabel,reEnterPasswordTextField,enterFirstNameLabel,enterFirstNameTextField,enterLastNameLabel,enterLastNameTextField,enterPhoneNumberLabel,enterPhoneNumberTextField,enterStreetAddressLabel,enterStreetAddressTextField,enterStreetAddress2Label,enterStreetAddress2TextField,enterCityLabel,enterCityTextField,enterStateLabel,enterStateTextField,enterZipLabel,enterZipTextField,backButton,signUpNowButton,btnDone,btnPrev,btnNext,inputAccView,activeTextField,currentString; 
```

只需从正在合成的属性列表中删除“rootView”，这应该可以解决问题。比删除 iPad 和 iPhone 布局的 .xib 文件并重新创建它们要容易得多。

仅供参考，我正在使用目标 SDK = 6.1 的 xCode 4.6.3

我希望这可以帮助其他遇到这个耗时且非常令人沮丧的问题的人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T08:44:02.413

我发现解决此问题的唯一方法是删除笔尖和类，然后重新创建它们。不是特别优雅，但它有效......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T15:31:21.867

这可能会对您有所帮助：删除模拟器或设备上的应用程序并再次运行。我发现如果我过多地使用笔尖，尤其是在名称或本地化方面，似乎一切正常（我没有错误），但 Xcode 实际上忽略了这些更改。

所以执行清洁（**Product->Clean**），从模拟器或设备中删除，再次运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-04T03:24:59.947

我发现不将出口从文件所有者拖到您的自定义子类 UITableViewCell.h 或 .m 文件也会导致变黑。确保将插座拖到与 UITableViewCell 的子类关联的两个文件之一。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-18T05:35:38.643

您必须确保在 DataInputViewController.m 中实现 loadView 方法，并在方法内添加 [super loadView] 行，如下所示：

```
 - (void)loadView {
    [super loadView];
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-27T08:41:49.500

就我而言，我从同事那里收到了 xib 文件。加载良好的xib，但没有显示。因为选中了隐藏复选框，所以我一天都花光了

检查xib中的隐藏复选框。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-01T20:21:00.127

简单修复！！导航到版本编辑器并返回标准编辑器为我解决了这个问题

# windows-phone-7 - 使用 PhoneGap 在 Windows Phone 中访问文件系统

> ID：10316597
> 
> 赞同：3
> 
> 时间：2012-04-25T13:21:55.353
> 
> 标签：windows-phone-7, jquery-mobile, cordova

我是 Windows Phone 新手（使用 PhoneGap）。当我们使用 PhoneGap 进行文件写入时，创建的文件存储在哪里？我还需要检索手机上的存储路径。

```
 document.addEventListener("deviceready",onDeviceReady,false);    
    function onDeviceReady() {
        navigator.notification.alert("Device Ready");
        window.requestFileSystem(LocalFileSystem.APPLICATION, 0, gotFS, fail);
    }
    function gotFS(fileSystem) {
        fileSystem.root.getFile("TextFile3.txt", {create: true, exclusive: false}, gotFileEntry, fail);
        navigator.notification.alert("gotFS");
    }
    function gotFileEntry(fileEntry) {
        fileEntry.createWriter(gotFileWriter, fail);
        navigator.notification.alert("gotFileEntry");
    }
    function gotFileWriter(writer) {
        navigator.notification.alert("gotFileWriter");
        writer.onwriteend = function (evt) {
            console.log("contents of file now 'some sample text'");
            writer.truncate(11);
            writer.onwriteend = function (evt) {
                console.log("contents of file now 'some sample'");
                writer.seek(4);
                writer.write(" different text");
                writer.onwriteend = function (evt) {
                    console.log("contents of file now 'some different text'");
                    navigator.notification.alert("gotFileWriterEnd");
                }
            };
        };
        writer.write("some sample text");

    }
    function fail(error) {
        console.log(error.code);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:23:51.003

我不相信任何 Windows Phone 7 设备都可以访问 SD 卡，所以这是不可能的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T15:55:45.080

没有设备可以直接访问 SD 卡，用于保存/加载持久数据的机制是通过 IsolatedStorage API 的。

您可以在此处找到详细说明：[MSDN - 隔离存储](http://msdn.microsoft.com/en-us/library/3ak841sy.aspx)

有关示例，请参阅 Jeff Blankenburg 在 31 天的 Windows Phone 系列中的帖子，它简要概述了一般概念并提供了用于实现的代码示例。: [31 天的 Windows Phone - 独立存储。](http://www.jeffblankenburg.com/2010/10/15/31-days-of-windows-phone-day-15-isolated-storage/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:28:25.170

在我看来，您可能会使用其中一种[PhoneGap Storage API](http://docs.phonegap.com/en/1.6.1/cordova_storage_storage.md.html#Storage)。最有可能[`localStorage`](http://docs.phonegap.com/en/1.6.1/cordova_storage_storage.md.html#localStorage)的是，文档状态“提供了一个到 W3C 存储接口的接口”并表明它在 Windows Phone 7 上受支持。

现在这并不是说它会保存到某个特定的“SD 卡”（我的手机甚至没有），但我认为它会保存到独立存储。

# asp.net-mvc-3 - 使用多层架构时，方法调用的正确顺序是什么？

> ID：10316600
> 
> 赞同：1
> 
> 时间：2012-04-25T13:22:00.413
> 
> 标签：asp.net-mvc-3, design-patterns, separation-of-concerns

我使用只有一层 (MVC) 的 MVC 3 构建了一个简单的调查工具。我现在很后悔。我所有的数据库访问和映射都在控制器和其他一些映射类中处理。

我想切换到使用三层：

**演示 (MVC)
业务逻辑
数据/持久性 (EF)**

我正在使用实体框架来处理数据库的所有内容。实体框架创建它自己的领域类。MVC 使用的模型和 EF 创建的模型之间的映射应该放在哪里？

如果映射在业务层，是否需要MVC项目中的Models文件夹？

调查问题由问题本身、行和列组成。Theese 是我使用的模型：

```
public class Question {

        public int Question_ID { get; set; }

        public Boolean Condition_Fullfilled;

        [Required(ErrorMessage = "Dette felt er påkrævet")]
        public String Question_Wording { get; set; }

        public String Question_Type { get; set; }

        [Required(ErrorMessage = "Dette felt er påkrævet")]
        public String Question_Order { get; set; }

        public String Left_scale { get; set; }
        public String Right_scale { get; set; }
        public int Scale_Length { get; set; }
        public String Left_Scale_HelpText { get; set; }
        public String Right_Scale_HelpText { get; set; }

        public Boolean Visible { get; set; }
        public Boolean IsAnswered { get; set; }
        public String Question_HelpText { get; set; }
        public int Category_ID { get; set; }

}
public class MatrixColumns
    {
        public int Column_ID { get; set; }
        public int Column_Number { get; set; }
        public String Column_Description { get; set; }
        public Boolean IsAnswer { get; set; }
        public int? Procent { get; set; }
        public bool Delete { get; set; }
        public bool Visible { get; set; }
        public int? Numbers { get; set; }
        public String Help_Text { get; set; }

    }

    public class MatrixRows
    {
        public bool Delete { get; set; }
        public bool Visible { get; set; }
        public int Row_Id { get; set; }
        public String Row_Number { get; set; }
        public String Row_Description { get; set; }
        public String Special_Row_CSS { get; set; }
        public String Help_Text { get; set; }
        // Dette er summen af procenterne af alle kolonner i rækken
        public int RowSum { get; set; }
    } 
```

这些模型的所有数据都在控制器中检索，基于 QuestionID，并映射到如下所示的 ViewModel：

```
 public class ShowMatrixQuestionViewModel : Question
    {
        public Dictionary<MatrixRows, List<MatrixColumns>> columnrow { get; set; }
        public List<MatrixColumns> columns { get; set; }
        public List<MatrixRows> rows { get; set; }

        public ShowMatrixQuestionViewModel()
        {
            columns = new List<MatrixColumns>();
            rows = new List<MatrixRows>();
            columnrow = new Dictionary<MatrixRows, List<MatrixColumns>>();
        }
    } 
```

所以当我想`ShowMatrixQuestionViewModel`从我的控制器发送一个视图时，我应该采取什么路线？

这是我的建议：

-> 控制器调用业务层中的一个方法称为

```
public ShowMatrixViewModel GetQuestion(int QuestionID) {} 
```

-> GetQuestion 在数据层调用以下方法：

```
public Question GetQuestion(int QuestionId) {}
public MatrixRows GetRows(int QuestionId) {}
public MatrixColumns GetColumns(int id) {} 
```

-> 实体框架返回“纯”对象，我想将其映射到我在上面发布的那些
-> GetQuestion 调用方法将 EF 模型映射到我自己的模型
-> 最后 GetQuestion 调用一个映射问题、行和列：

```
 ShowMatrixQuestionViewModel model = MapShowMatrixQuestionViewModel(Question, MatrixRows, MatrixColumns)
return model; 
```

这个对吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:00:56.293

要回答您问题的第一部分：

“MVC 使用的模型和 EF 创建的模型之间的映射应该去哪里？”

答案是 MVC 使用*的*模型是 EF 创建的模型。ASP.NET MVC 项目中的 EF 工具是 Linq to SQL 类或 ADO.NET 实体框架模型。您应该在项目的 Models 文件夹中创建这些，它们提供您的数据/持久性 (EF)。

# java - 从飞碟生成的pdf中的servlet渲染图像

> ID：10316607
> 
> 赞同：12
> 
> 时间：2012-04-25T13:22:23.043
> 
> 标签：java, pdf-generation, itext, flying-saucer, xhtmlrenderer

我正在使用 flysaucer 通过返回生成的 pdf 文档的 servlet 将 xhtml 文档呈现为 pdf。xhtml 文档具有从另一个 servlet 请求的图像。图像 servlet 在返回适当的图像之前检查谁已登录。下面的代码显示了如何请求图像：

```
<img height="140" width="140" src="http://localhost:8080/myapp/servlet/DisplayPic" /> 
```

我的问题是图像的 http 请求来自 pdf 渲染器而不是登录用户，因此图像 servlet 不知道谁登录，因此不会返回所需的图像。

我目前正在使用下面的代码来呈现 xhtml 文档：

```
ITextRenderer renderer = new ITextRenderer();
renderer.setDocumentFromString(xhtmlDocumentAsString);
renderer.layout();
os = response.getOutputStream();
renderer.createPDF(os); 
```

我需要在请求图像 servlet 时维护用户会话，或者为渲染器提供用于该特定 xhtml 元素的图像。我认为后者可以使用 a 来完成，`ReplacedElementFactory`但我无法挖掘出任何可以帮助我的示例代码。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-26T15:04:55.637

我现在做得很好。这是代码。

在我的 xhtml 文档中，我有：

```
<div class="profile_picture" style="display:block;width:140px;height:140px;" /> 
```

（我使用的是`div`元素而不是`img`工厂仅用于块级元素）

我使用以下方法渲染我的文档：

```
ITextRenderer renderer = new ITextRenderer();
renderer.getSharedContext().setReplacedElementFactory(new ProfileImageReplacedElementFactory(renderer.getSharedContext().getReplacedElementFactory()));
renderer.setDocumentFromString(xhtmlDocumentAsString);
renderer.layout();
os = response.getOutputStream();
renderer.createPDF(os); 
```

我有自己`ReplacedElementFactory`的如下：

```
public class ProfileImageReplacedElementFactory implements ReplacedElementFactory {

    private final ReplacedElementFactory superFactory;

    public ProfileImageReplacedElementFactory(ReplacedElementFactory superFactory) {
        this.superFactory = superFactory;
    }

    @Override
    public ReplacedElement createReplacedElement(LayoutContext layoutContext, BlockBox blockBox,
            UserAgentCallback userAgentCallback, int cssWidth, int cssHeight) {

        Element element = blockBox.getElement();
        if (element == null) {
            return null;
        }

        String nodeName = element.getNodeName();
        String className = element.getAttribute("class");
        if ("div".equals(nodeName) && className.contains("profile_picture")) {

            InputStream input = null;
            try {
                input = ...;
                byte[] bytes = IOUtils.toByteArray(input);
                Image image = Image.getInstance(bytes);
                FSImage fsImage = new ITextFSImage(image);

                if (fsImage != null) {
                    if ((cssWidth != -1) || (cssHeight != -1)) {
                        fsImage.scale(cssWidth, cssHeight);
                    }
                    return new ITextImageElement(fsImage);
                }
            } catch (IOException e) {
                getLogger().error(ExceptionUtils.getStackTrace(e));
            } catch (BadElementException e) {
                getLogger().error(ExceptionUtils.getStackTrace(e));
            } finally {
                IOUtils.closeQuietly(input);
            }
        }

        return superFactory.createReplacedElement(layoutContext, blockBox, userAgentCallback, cssWidth, cssHeight);
    }

    @Override
    public void reset() {
        superFactory.reset();
    }

    @Override
    public void remove(Element e) {
        superFactory.remove(e);
    }

    @Override
    public void setFormSubmissionListener(FormSubmissionListener listener) {
        superFactory.setFormSubmissionListener(listener);
    }
} 
```

# c++ - 使用特定 MFC 版本构建 C++ DLL

> ID：10316608
> 
> 赞同：1
> 
> 时间：2012-04-25T13:22:29.237
> 
> 标签：c++, build

我在 VStudio2008+SP 中有一个 DLL 项目。我运行的 MFC 版本是 9.0.3070，我还在 C:\Windows\WinSxS\ 中安装了 9.0.21xxx 当我构建我的 DLL 时它引用 9.0.3070，当它在客户端 PC 中使用时我们无法加载这是因为客户端工作站上只有 9.0.21。我想知道是否可以使用特定的 MFC 版本强制构建 DLL。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:34:41.353

恐怕这是不可能的。安装 VS2008 Service Pack 后，MFC 版本 9.0.3070 会在 MFC 源代码中硬编码，除非卸载 SP，否则无法更改它。

您应该使应用程序的安装程序在客户端计算机上安装所需版本的 MFC。

# java - 无法使用 PropertyPlaceholderConfigurer 在 JNDI 上下文中找到属性

> ID：10316610
> 
> 赞同：1
> 
> 时间：2012-04-25T13:22:31.193
> 
> 标签：java, spring, properties, jndi

我想从 WEB.XML 中删除 env-entry

```
<env-entry>
    <description>String used in masking process</description>
    <env-entry-name>default_mask</env-entry-name>
    <env-entry-value>*</env-entry-value>
    <env-entry-type>java.lang.String</env-entry-type>
</env-entry> 
```

所以我创建了一个具有 (c:/my.properties) 的属性文件

```
default_mask=9999 
```

所以我尝试使用现有的解决方案，如 JndiPropertyPlaceholderConfigurer （来自[Spring Jndi Context 和 PropertyPlaceholderConfigurer](https://stackoverflow.com/questions/8998704/spring-jndi-context-and-propertyplaceholderconfigurer) ）并在spring的 applicationcontext.xml 中配置为

```
<bean  
class="com.test.webappl.JndiPropertyPlaceholderConfigurer">  
<property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE"/> 
<property name="ignoreResourceNotFound" value="true"/> 
<property name="location" value="file:c:\my.properties"/> 
```

启动 Tomcat 服务器读取属性文件，如

```
.......com.test.webappl.JndiPropertyPlaceholderConfigurer] Loading properties file from URL [file:c:/my.properties] 
```

当我阅读时，现在在java中

```
Context context = new InitialContext(); 
String resource = context.lookup("java:comp/env/default_mask"); 
```

应用程序抛出以下错误

```
**javax.naming.NameNotFoundException: Name default_mask is not bound in this Context** 
```

我在 web.xml 中的 spring 设置也是

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:applicationcontext.xml</param-value>
</context-param> 
```

有人知道我是否使用正确的方法吗？我知道这已经在[Spring Jndi Context 和 PropertyPlaceholderConfigurer](https://stackoverflow.com/questions/8998704/spring-jndi-context-and-propertyplaceholderconfigurer)中得到了回答，但不知何故不适用于我的情况

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:19:57.403

如果您将任何内容部署到任何应用程序服务器，最好将所有相关资源打包到部署单元（在您的情况下为战争）。

要回答您的问题 - 如果您使用 spring 向 JNDI 容器注入任何内容，您还应该让 spring 为您定位所有内容。

所以你不能使用

```
new InitialContext(); // this has nothing to do with spring. 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:32:17.903

您正在尝试（或期望）做的是“将名称值对从您的`my.properties`到 JNDI 上下文绑定”。

**但**

您提到的示例并没有这样做。只是做以下事情

1.  如果上下文文件中引用了一个属性占位符（如`${my.name}`），那么它将从 JNDI 中解析它（假设它已经存在）
2.  如果 JNDI 不提供它，则将其解析为从属性文件中读取的一些默认值。
3.  没有关于将变量绑定到 JNDI 的详细信息。方法没有参考`bind()`。

现在， **为了解决您的问题**，即获取某种读取属性文件并将其绑定到 JNDI 树的方法，一种方法如下

1.  您可以创建一个类`JndiPropertyBinder`并注入`jndiTemplate`其中。
2.  在此类中注入您的属性文件
3.  现在在 bean 上编写一个[init 钩子](http://www.mkyong.com/spring/spring-init-method-and-destroy-method-example/)，它将读取文件中的所有属性并将它们绑定到 jndi 树。
4.  使这个 bean 尽早加载，以便在所有其他使用它的 bean 之前加载它。

# ios - 如何检查复选框已被单击

> ID：10316619
> 
> 赞同：1
> 
> 时间：2012-04-25T13:23:05.010
> 
> 标签：ios, cocoa-touch, checkbox, uibutton

我正在尝试使用我以编程方式创建的复选框制作菜单。下面是我如何制作我的复选框：

```
UIButton* checkBox = [[UIButton alloc] initWithFrame:CGRectMake(60,60,300, 44)]; 
[checkBox setImage:[UIImage imageNamed:@"unmarked.png"] forState:UIControlStateNormal];
[checkBox addTarget:self action:@selector(toggleButton:) forControlEvents: UIControlEventTouchUpInside];
[checkBox setContentHorizontalAlignment:UIControlContentHorizontalAlignmentLeft];
[self.view addSubview:checkBox]; 
```

和目标：

```
- (void)toggleButton: (id) sender
{
    checkboxSelected = !checkboxSelected;
    UIButton* check = (UIButton*) sender;
    if (checkboxSelected == NO)
        [check setImage:[UIImage imageNamed:@"unmarked.png"] forState:UIControlStateNormal];
    else
        [check setImage:[UIImage imageNamed:@"marked.png"] forState:UIControlStateNormal];

} 
```

现在我正在做一个简单的自定义`UIButton`，我想检查复选框是否被选中，或者不使用这个自定义`UIButton`和 NSLog 相同，即如果选中了复选框，那么在按钮上单击它应该 NSLog 复选框被选中..！

谁能帮我这个..？

任何帮助将不胜感激。

谢谢你的时间

谢莱什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:43:48.330

您应该考虑使用`UISwitch`，因为复选框在苹果移动设备上不是很好。您可以参考教程，例如： [http ://www.xprogress.com/post-30-uiswitch-tutorial-example-how-to-use-the-switch-in-xcode-for-iphone-sample-包括/](http://www.xprogress.com/post-30-uiswitch-tutorial-example-how-to-use-the-switch-in-xcode-for-iphone-sample-included/)

或在这里以编程方式进行： [Creating a UISwitch Programmatically](https://stackoverflow.com/questions/2025842/creating-a-uiswitch-programmatically)

不过，如果您坚持使用复选框，请看这里： [如何在 iOS 中创建一个简单的复选框？](https://stackoverflow.com/questions/5368196/how-create-simple-checkbox)

# javascript - 是否可以用我自己的方法扩展 UIAElementArray ？

> ID：10316621
> 
> 赞同：1
> 
> 时间：2012-04-25T13:23:09.160
> 
> 标签：javascript, iphone, ios, ui-automation, ios-ui-automation

我执行以下操作：

```
function extend(destination, source) {
  for (var property in source) {
    destination[property] = source[property];
  }
  return destination;
};

extend( UIAElementArray.prototype, 
{
       each: function(f) 
       {
        for (i = 0; i < this.length; i++) 
        {
          f(i, this[i]);
        }
       },

       findFirst: function(f) 
       {
         for (i = 0; i < this.length; i++) 
         {
           if (f(this[i])) return this[i];
         }
         return null;
       },

       findLast: function(f) 
       {
         for (i = this.length - 1; i >= 0; i--) 
         {
          if (f(this[i])) return this[i];
         }
         return null;
       }
} ); 
```

但是，当我尝试对从 mainWindow.tableViews()[0].cells() 获得的对象使用“每个”函数时，会发生“[object UIAElementNil] 不是函数”。为什么我添加到 UIAElementArray.prototype 的每个属性都设置为 [object UIAElementNil]？这样的事情发生了，当我在真实设备上运行 UIAutomation 测试时，它在模拟器上工作，令人惊讶。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T19:49:23.620

绝对可以扩展 UIAElementArray （不是，顺便说一句，objective-c）。tuneup.js 使用您在上面使用的相同方法并且工作正常，并且我使用相同的方法来扩展 UIAElementArray。我无法解释为什么您的脚本报告您正在点击 UIAElementNil，但您对 UIAElementArray 的扩展似乎是正确的。

这里真正的问题可能是“为什么这在模拟器上有效，但在设备上无效？”。设备是否运行 iOS 5 或更高版本？我已经看到 iOS 4.3 设备（大部分情况下）在使用 5 录制或编写的脚本时运行良好，但我也看到更复杂的脚本在 4.3 设备上变得不稳定。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-25T14:07:21.130

在 Objective-C 中，您可以扩展任何类并使用类别向它们添加自定义方法。

# c# - Contains()，如何使用 lambda 反转

> ID：10316627
> 
> 赞同：6
> 
> 时间：2012-04-25T13:23:21.473
> 
> 标签：c#, model-view-controller, linq-to-sql, lambda

我有这 4 个复选框，它们构成了字符串变量 saljes、kopes、bytes、erbjudes。当它们被检查时，它们会得到“on”的值。

由此我将一个字符串变量 (p) 放在一起，其中包含我想要包含在 LINQ 语句中的所有数字。假设如果所有复选框都被选中，我会得到一个字符串“1234”，如果只选中复选框 2 和 4，它将导致“24”。

在我的数据库中，我有一个名为“Type”的字段，其类型为 int。我想告诉数据库包含可以在字符串 p 中找到的具有“类型”值的所有行。

像这样的东西（当然我的代码不起作用，因此我需要你们）：

```
 var searchResult = from s in db.Ads select s;
        string p = "1";

        if (saljes != "on")
            p = p.Replace("1", "");
        if (kopes == "on")
            p += "2";
        if (bytes == "on")
            p += "3";
        if (erbjudes == "on")
            p += "4";

        searchResult = searchResult.Where(s => p.Contains(s => s.Type.ToString()); 
```

我需要做的是一个反向的 Contains()，但是怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:42:00.263

不清楚问题是什么，但这应该有效：

```
searchResult = searchResult.Where(s => p.Contains(s.Type.ToString()); 
```

`p`是字符串，[包含（字符串值）](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)需要字符串作为参数，所以你不需要 lambda 表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:34:31.813

`Contains()`已经是“反向输入”，如此[处](http://wekeroad.com/2008/02/27/creating-in-queries-with-linq-to-sql)所述：

```
int[] productList = new int[] { 1, 2, 3, 4 };

var myProducts = from p in db.Products
                 where productList.Contains(p.ProductID)
                select p; 
```

所以只需填写一个列表：

```
var list = new List<int>();

if (saljes == "on")
    list.Add(1);
if (kopes == "on")
    list.Add(2);
if (bytes == "on")
    list.Add(3);
if (erbjudes == "on")
    list.Add(4);

var searchResult = db.Ads.Where(s => list.Contains(s.Type)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T13:43:58.917

这个表情能做到吗？

```
s => s.Type.ToString().ToCharArray().Except(p.ToCharArray()).Count() == 0 
```

例如 if `s.Type`is`24`和`p`is `"234"`then`s.Type`包含在字符串中。如果我们将 转换`int`为 char-array 我们得到

```
{'2', '4'} 
```

转换为字符数组的字符串是

```
{'2', '3', '4'} 
```

这意味着 的数字`int`都包含在 中`string`。所以`int`除了数字之外的`string`数字会产生一个我们用 测试的空集`Count() == 0`。

```
{'2', '4'}.Except({'2', '3', '4'}) ==> { } 
```

* * *

而不是创建一个`string`，我会创建一个`List<char>`

```
var p = new List<char>();               

if (saljes == "on") p.Add('1');               
if (kopes == "on") p.Add('2');               
if (bytes == "on") p.Add('3');               
if (erbjudes == "on") p.Add('4'); 
```

那么表达式就变成了

```
s => s.Type.ToString().ToCharArray().Except(p).Count() == 0 
```

* * *

但是，请注意不能将其转换为适当的 SQL-where 子句这一事实。因此，必须扫描整个表。

# mercurial - Mercurial 意外需要手动合并

> ID：10316628
> 
> 赞同：1
> 
> 时间：2012-04-25T13:23:21.953
> 
> 标签：mercurial, merge

我有一个在 Mercurial 下运行的项目，我发现很多情况下文件需要手动合并，而我认为它应该能够自动合并。我想知道是否可以为 Mercurial 提供任何选项来帮助解决这些问题。

该项目有一个底层平台，其中包含数百个无法在项目上编辑的文件。当平台更新时，项目会在 Mercurial 之外获取这些核心文件的更新版本。我反复看到的顺序是：

在中央开发系统上（链接到核心平台更新机制）：

*   获取新版本的核心平台。
*   提交这些更改，例如`hg commit -m "New platform release"`
*   推送到中央 Mercurial 服务器

在我的 Linux 机器上：

*   提交本地更改
*   从中央 Mercurial 服务器拉取，并尝试合并
*   查找核心文件的合并冲突

我必须合并的最后两个核心文件在基本版本和本地版本之间没有变化（访问时间在构建期间更新，但内容相同）。唯一的变化是我正在合并的远程版本。

我知道的唯一非标准配置是中央 mercurial 实例在 Rhodecode 下运行，并带有一个提交挂钩设置来更新 Redmine 存储库。

还有什么可以在 mercurial 中配置来帮助它找出合并的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:17:52.760

您可以重做合并`--debug`以获取有关合并的更多信息。也就是说，获取您的存储库并执行

```
$ cd ..
$ hg clone my-project -r 123 -r 456 merge-test 
```

其中 123 和 456 是您要仔细检查的合并的两个父级。然后运行

```
$ hg merge --debug 
```

看看 Mercurial 怎么说。`foo`如果文件仅在您要合并的分支中更改，它应该如下所示：

```
$ hg merge --debug
  searching for copies back to rev 2
resolving manifests
 overwrite: False, partial: False
 ancestor: 932f5550d0ce, local: b0c286a4a76d+, remote: c491d1593652
 foo: remote is newer -> g
updating: foo 1/1 files (100.00%)
getting foo
1 files updated, 0 files merged, 0 files removed, 0 files unresolved
(branch merge, don't forget to commit) 
```

在这里，我正在修订`b0c286a4a76d`并与`c491d1593652`.

你也可以使用

```
$ hg status --rev "ancestor(b0c286a4a76d, c491d1593652)" --rev "c491d1593652"
M foo
$ hg status --rev "ancestor(b0c286a4a76d, c491d1593652)" --rev "b0c286a4a76d"
M bar 
```

仔细检查在祖先修订版和您要合并的两个变更集之间哪些文件已更改。在上面你看到我`foo`在一个分支和另一个分支`bar`上发生了变化。

如果您看到一个平台文件出现在两个状态列表中，那么您的程序中出现了问题，这可以解释合并冲突。

如果这还不足以找出问题所在，那么我建议在 Mercurial 邮件列表上提出这个问题。这是一个讨论和*寻找 bug*的好地方——比 Stack Overflow 好得多。

# asp.net-mvc - 如何在 MVC3 中创建动态图片库弹出窗口？

> ID：10316630
> 
> 赞同：0
> 
> 时间：2012-04-25T13:23:23.923
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我需要创建一个弹出式图片库。本质上，用户单击一个图像文件夹，它会弹出第一个完整大小的图像文件和一组可滚动的缩略图。用户将单击缩略图以在弹出窗口中显示图像。在用户单击图像文件夹之前，我不想加载图像。

是否有已经可以执行此操作的 jquery 库或商业控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:32:35.940

问题是我不知道要搜索什么。动态图片库弹出窗口称为灯箱。在 google 上使用的查询是 jquery lightbox。在所有可用的工具中，PrettyPhoto 是唯一一个在弹出窗口中有缩略图和一个在弹出窗口期间动态加载图像的 API。

以下是可用的：

[http://www.designyourway.net/blog/resources/30-efficient-jquery-lightbox-plugins/](http://www.designyourway.net/blog/resources/30-efficient-jquery-lightbox-plugins/)

[http://line25.com/articles/rounding-up-the-top-10-jquery-lightbox-scripts](http://line25.com/articles/rounding-up-the-top-10-jquery-lightbox-scripts)

这是唯一一个可以用作带有 API 和缩略图的动态弹出窗口：

[http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)

这是激活 PrettyPhoto 所需的脚本：

```
<script type="text/javascript" charset="utf-8">
  $(document).ready(function(){
    $("a[rel^='prettyPhoto']").prettyPhoto();
  });
</script> 
```

这是定义照片的脚本：

```
<script type="text/javascript" charset="utf-8">
    api_images = ['images/fullscreen/image1.jpg','images/fullscreen/image2.jpg','images/fullscreen/image3.jpg'];
    api_titles = ['Title 1','Title 2','Title 3'];
    api_descriptions = ['Description 1','Description 2','Description 3']
</script> 
```

这是我过去使用内容处理程序单击文件夹图像的内容。# 的 href 很重要：

```
<a href='#' onclick="  $.prettyPhoto.open(api_images,api_titles,api_descriptions);" title='@item.Folder.Title'>         
    <img style="max-height: 160px; max-width: 260px;" id='Img@(item.Folder.Id)' alt='@item.Folder.Title' title='@item.Folder.Title' src='@Url.Content("~/img.ashx")?mediaId=@item.Folder.Id' style='padding: 10px' />
</a> 
```

# c++ - luabind：无法从由非内置类索引的表中检索值

> ID：10316632
> 
> 赞同：7
> 
> 时间：2012-04-25T13:23:25.953
> 
> 标签：c++, lua, luabind

我正在使用 Ryan Pavlik 的主发行版中的 luabind 0.9.1 和 Lua 5.1、Win XP SP3 上的 cygwin + 最新补丁 x86、boost 1.48、gcc 4.3.4。Lua 和 boost 是 cygwin 预编译的版本。

我已经成功地在静态和共享版本中构建了 luabind。

两个版本都通过了所有测试，除了在两个版本中都失败的 test_object_identity.cpp 测试。

我已将问题追查到以下问题：如果表中的条目是为 NON 内置类（即不是 int、string 等）创建的，则无法检索该值。

这是一个演示这一点的代码片段：

```
#include "test.hpp"
#include <luabind/luabind.hpp>
#include <luabind/detail/debug.hpp>

using namespace luabind;

struct test_param
{
    int obj;
};

void test_main(lua_State* L)
{
    using namespace luabind;

    module(L)
    [
        class_<test_param>("test_param")
            .def_readwrite("obj", &test_param::obj)
    ];

    test_param temp_object;
    object tabc = newtable(L);
    tabc[1] = 10;
    tabc[temp_object] = 30;

    TEST_CHECK( tabc[1] == 10 );              // passes
    TEST_CHECK( tabc[temp_object] == 30 );    // FAILS!!!

} 
```

tabc[1] 确实是 10 而 tabc[temp_object] 不是 30！（实际上，它似乎是零）

但是，如果我使用 iterate 遍历 tabc 条目，则有两个条目具有正确的键/值对。

有任何想法吗？

顺便说一句，像这样重载 == 运算符：

```
#include <luabind/operator.hpp>

struct test_param
{
    int obj;
    bool operator==(test_param const& rhs) const
    {
        return obj == rhs.obj;
    }
}; 
```

和

```
module(L)
    [
        class_<test_param>("test_param")
            .def_readwrite("obj", &test_param::obj)
            .def(const_self == const_self)
    ]; 
```

不改变结果。

我还尝试从 [] 运算符切换到 settable() 和 gettable()。结果是一样的。我可以通过调试器看到调用了密钥的默认转换，所以我猜错误来自其中的某个地方，但我无法弄清楚究竟是什么问题。

正如以下简单的测试用例所示，Luabind 对复杂类型的转换肯定存在错误：

```
struct test_param : wrap_base 
{ 
    int obj; 
    bool operator==(test_param const& rhs) const 
    { return obj == rhs.obj ; } 
}; 

void test_main(lua_State* L) 
{ 
    using namespace luabind; 
    module(L) 
    [ 
        class_<test_param>("test_param") 
                .def(constructor<>()) 
                .def_readwrite("obj", &test_param::obj) 
                .def(const_self == const_self) 
    ]; 

    object tabc, zzk, zzv; 
    test_param tp, tp1; 
    tp.obj = 123456; 
    // create new table 
    tabc = newtable(L); 
    // set tabc[tp] = 5; 
    //         o     k   v 
    settable( tabc,  tp, 5); 
    // get access to entry through iterator() API 
    iterator zzi(tabc); 
    // get the key object 
    zzk = zzi.key(); 
    // read back the value through gettable() API 
    //              o     k 
    zzv = gettable(tabc, zzk);   
    // check the entry has the same value 
    // irrespective of access method 
    TEST_CHECK ( *zzi == 5 && 
                 object_cast<int>(zzv) == 5 ); 
    // convert key to its REAL type (test_param) 
    tp1 = object_cast<test_param>(zzk); 
    // check two keys are the same 
    TEST_CHECK( tp == tp1 ); 
    // read the value back from table using REAL key type 
    zzv = gettable(tabc, tp1); 
    // check the value 
    TEST_CHECK( object_cast<int>(zzv) == 5 ); 
    // the previous call FAILS with 
    // Terminated with exception: "unable to make cast" 
    // this is because gettable() doesn't return 
    // a TRUE value, but nil instead 
} 
```

希望比我聪明的人能解决这个问题，谢谢

我已经将问题追溯到这样一个事实，即 Luabind 每次使用复杂值作为键时都会创建一个 NEW DISTINCT 对象（但如果您使用原始值或对象则不会）。

这是一个小测试用例来证明这一点：

```
struct test_param : wrap_base
{
    int obj;
    bool operator==(test_param const& rhs) const
    { return obj == rhs.obj ; }
};

void test_main(lua_State* L)
{
    using namespace luabind;

    module(L)
    [
        class_<test_param>("test_param")
            .def(constructor<>())
            .def_readwrite("obj", &test_param::obj)
            .def(const_self == const_self)
    ];

    object tabc, zzk, zzv;
    test_param tp;
    tp.obj = 123456;
    tabc = newtable(L);
    //         o     k   v
    settable( tabc,  tp, 5);
    iterator zzi(tabc), end;
    std::cerr << "value = " << *zzi << "\n";
    zzk = zzi.key();
    //         o     k    v
    settable( tabc,  tp,  6);
    settable( tabc,  zzk, 7);
    for (zzi = iterator(tabc); zzi != end; ++zzi)
    {
        std::cerr << "value = " << *zzi << "\n";
    }
} 
```

注意 tabc[tp] 首先是值 5，然后在通过 key 对象访问时被 7 覆盖。但是，当通过 tp 再次访问时，会创建一个新条目。这就是 gettable() 随后失败的原因。

谢谢，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-24T06:55:00.200

免责声明：我不是 luabind 方面的专家。我完全有可能错过了一些关于 luabind 的功能。

首先，将 test_param 转换为 Lua 键时，luabind 是做什么的？默认策略是复制。引用 luabind 文档：

> 这将制作参数的副本。这是按值传递参数时的默认行为。请注意，这只能在从 C++ 传递到 Lua 时使用。此策略要求参数类型具有可访问的复制构造函数。

实际上，这意味着 luabind 将创建一个由 Lua 垃圾收集器拥有的新对象（称为“完整用户数据”）并将您的结构复制到其中。这是一件非常安全的事情，因为你用 c++ 对象做什么已经不再重要了。Lua 对象会在没有任何开销的情况下一直存在。这是对按值类型的对象进行绑定的好方法。

为什么每次传递给 Lua 时 luabind 都会创建一个新对象？好吧，它还能做什么？传递的对象的地址是否相同并不重要，因为原始的 c++ 对象自从第一次传递给 Lua 以来可能已经更改或被销毁。（记住，它是按值复制到 Lua 的，而不是通过引用。）所以，只有 ==，luabind 必须维护一个列表，列出曾经传递给 Lua 的每个类型的对象（可能是弱传递）并比较你的反对每一个，看看它是否匹配。luabind 不这样做（我也不认为应该这样做）。

现在，让我们看看 Lua 方面。即使 luabind 创建了两个不同的对象，它们仍然是相等的，对吧？嗯，第一个问题是，除了某些内置类型之外，Lua 只能通过引用来保存对象。我之前提到的每个“完整用户数据”实际上都是一个指针。这意味着它们并不相同。

但如果我们定义一个 __eq 元操作，它们是相等的。不幸的是，Lua 本身根本不支持这种情况。无论如何，用作表键的用户数据总是按身份进行比较。这实际上对于用户数据并不特别；表格也是如此。（请注意，为了正确支持这种情况，Lua 需要覆盖除了 __eq 之外的对象上的哈希码操作。Lua 也不支持覆盖哈希码操作。）我不能代表 Lua 的作者为什么他们不这样做允许这样做（之前已经建议过），但它确实存在。

那么，有哪些选择呢？

*   最简单的方法是将 test_param 转换为一个对象（显式地），然后两次都使用该对象来索引表。但是，我怀疑虽然这修复了您的玩具示例，但在实践中并没有太大帮助。
*   另一种选择是根本不使用键等类型。其实我觉得这是一个很好的建议，因为这种轻量级的绑定还是很有用的，唯一的选择就是放弃它。
*   看起来您可以在您的类型上定义自定义转换。在您的示例中，将您的类型转换为 Lua 数字可能是合理的，该数字将作为表索引表现良好。
*   使用不同类型的绑定。会有一些开销，但如果你想要身份，你就必须忍受它。听起来 luabind 对包装器有一些支持，您可能需要使用它来保留身份：

    > 当一个带有包装器的注册类的指针或引用被传递给 Lua 时，luabind 将查询它的动态类型。如果动态类型继承自 wrap_base，则保留对象标识。

# subversive - 如何解决访问 CollabNet Subversion 控制台的 503 错误？

> ID：10316634
> 
> 赞同：9
> 
> 时间：2012-04-25T13:23:32.113
> 
> 标签：subversive, subversion-edge

我正在使用 Collabnate Subversion Edge。
尝试访问 URL [http://localhost:3343/csvn](http://localhost:3343/csvn)时出现以下错误。Collbnate 在 Windows Server 2008 上设置。

`HTTP ERROR: 503`
`Problem accessing /csvn/. Reason:`
`Service Unavailable`
`Powered by Jetty://`

如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-09T15:46:45.387

我花了两天时间解决同样的问题。原来，CollabNet Subversion Edge 4.0.11 不支持 Java 8。

以下过程帮助我使 CN Subverion Edge 4.0.11 在 Windows 7 上再次运行：

1) 卸载 CollabNet Subversion

2）卸载Java 8（我有Java 7和6并排，所以卸载8后，我将它添加到PATH变量后选择了7。重要的是在路径的最开始添加它，否则Windows\ System32\java.exe 将被占用，这对我也不好）

3) 安装 CollabNet Subverion（重要的是取消选中最终屏幕中的“运行 CollabNet ...”复选框。看起来安装程序最后仍在创建文件，只有在我在最终屏幕中单击“确定”后所需的配置文件已在 data/conf 文件夹中创建。

4) 确保创建了 data/conf/httpd.conf 文件。如果它在那里，进入服务（services.msc）并手动启动服务器

现在启动浏览器并导航到 localhost:3343/csvn。祝你好运。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-24T09:41:54.937

1) 安装 Java 7

2) 在文件 \csvn\svcwrapper\conf\wrapper.conf 从 #wrapper.java.command.maxVersion=1.6 更改为 wrapper.java.command.maxVersion=1.7

3) 运行 \csvn\svcwrapper\bat\runConsole.bat

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T11:00:51.463

签入 c:/csvn/data/logs 以获取以“控制台”开头的日志。然后找到错误并检查问题所在。

您是否尝试重新启动服务？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-17T09:25:28.080

我遇到了同样的问题，CollabNet Subversion Edge 版本 4.0.4。就我而言，问题是将 JAVA_HOME 从 JDK 1.6 更新到 JDK 1.7。

我终于解决了更改文件： C:\PROGRA~1\csvn\svcwrapper\conf\wrapper.conf

我更改了属性的值： wrapper.java.command:java wrapper.java.command=C:/PROGRA~1/Java/jdk1.6.0_45/bin/java

所以 csvn 现在像以前一样以 1.6 运行。它会自动作为服务再次运行。

祝你好运！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-02T08:27:54.393

还有一个导致相同错误的替代问题：数据库可能已损坏。这就是我刚刚发生的事情。以上答案在这种情况下不起作用。由于 Subversion Edge 5.0.1与 jre8*捆绑在一起*，如果它不能运行它会很奇怪。

为了解决这个问题，我不得不修补数据库（幸运的是，用户数据库 c:\csvn\data\csvn-production-hsqldb.script 是一个纯文本 sql 文件）。

*   c:\csvn\data 中的备份文件
*   删除 csvn-production-hsqldb.script 并启动服务（现在应该出现）
*   退出服务
*   保存现在自动重新创建的文件
*   比较您的旧文件和新的工作文件
*   `INSERT INTO QRTZ`用工作副本中的相应行替换数据库中以开头的每一行
*   将新文件复制到正确的位置
*   启动服务
*   希望它有效

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-22T11:26:19.520

我也有这个问题。升级到 SubversionEdge 5.1.4 解决了这个问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-28T13:05:27.973

每次我们修补 JDK 6 安装（例如 IAVM 更新）时，都会遇到 CollabNet Subversion Edge 3.3.1 的这个问题。我们还需要在这台机器上安装 JDK 7 和 8，所以安装程序会混淆 Windows 注册表中的版本信息（这并不奇怪）。即使我们最后更新 JDK 6，它也会变得很奇怪。

然而，事实证明 Subversion 控制台使用 Windows 注册表来定位 Java 安装以启动控制台服务。更新注册表项`HKLM\SOFTWARE\JavaSoft\Java Development Kit\CurrentVersion`并`1.6`正确安装 JDK 1.6 将恢复控制台操作。

# java - Android SDK r18 似乎破坏了 ORMLite

> ID：10316635
> 
> 赞同：3
> 
> 时间：2012-04-25T13:23:35.610
> 
> 标签：java, android, sdk, ormlite

我正在使用 ormlite v4.35，我只需要在 Eclipse 中将我的 android 工具更新为 r18，因为在我升级工具之前 IDE 不会构建我的项目。升级后，以下行会引发错误：

```
mDbHelper = OpenHelperManager.getHelper(this, DatabaseHelper.class); 
```

一个例外是`NoClassDefFoundError`

我去了 ormlite 网站，看到下载了一个较新的版本（4.40）并将参考替换为较新的版本，不幸的是，这并没有解决问题。有没有人遇到过这个问题并解决了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T13:26:52.190

> 例外是 NoClassDefFoundError

[我认为您的问题与Android r17 tools](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)`libs`文件夹的新行为有关。文件夹中*必须*有[ORMLite](http://ormlite.com/) jar 。这只是和类 jars——而不是我刚刚放在项目根目录的 javadoc 或源 jars。*`libs``-android``-core`*

 *将 jar 移到那里后，Android 构建器应该会看到您的类。*

# android - Android API Level 10 及以下列出指标的替代方案

> ID：10316636
> 
> 赞同：3
> 
> 时间：2012-04-25T13:23:41.147
> 
> 标签：android, android-support-library

我正在使用 Android 兼容性库使我的应用程序与早期版本的 android 兼容。我的应用程序的组成部分之一是能够在列表片段中永久突出显示用户的选择。我可以使用 API 级别 11 及更高级别的可绘制选择器使用该**`android:state_activated`**属性方便地做到这一点。但事实证明，该属性仅在 API 级别 11 中引入。

现在我计划在早期的 API 级别中实现相同的目标，但我没有想法。有没有人有什么建议？

我相信我需要为旧 API 版本创建一个单独的布局 - res/layout-v10/

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T10:42:08.773

`View.setSelected(boolean)`（自 api 级别 1 起）为我成功了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:41:59.730

在这里找到了一个很好的解决方案：http: [//udinic.wordpress.com/2011/07/01/selectablelistview-make-selection-work/](http://udinic.wordpress.com/2011/07/01/selectablelistview-make-selection-work/)

# actionscript-3 - Flex 4 图像对象作为 MovieClip 对象返回

> ID：10316638
> 
> 赞同：0
> 
> 时间：2012-04-25T13:23:49.767
> 
> 标签：actionscript-3, flex4

我正在开发 Flex4 中的自定义上下文菜单。上下文菜单本身工作正常，但我正在寻找一种方法来判断 ContextMenuEvent mouseTarget 是否是图像。就目前而言，mouseTarget 显示它是一个“[object MovieClip]”。这很奇怪，因为我的应用程序中没有影片剪辑，只有图像容器。知道发生了什么吗？

```
private function openContextMenu(e:ContextMenuEvent):void {
    Alert.show(e.mouseTarget.toString());// shows [object MovieClip] when it should show [Object Image]
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T21:46:17.723

因此，经过几个小时的研究，我想出了以下附加到 contextMenu 的项目选择事件侦听器的内容。我确信必须有更好的方法来做到这一点，但在那之前......

```
for(var i:int = 0; i < getObjectsUnderPoint(new Point(this.mouseX, this.mouseY)).length; i++)
{
    if(getObjectsUnderPoint(new Point(this.mouseX, this.mouseY))[i].parent.parent is Image)
    {
        //do what I need to do
    }
} 
```

感谢 NHubben 的意见。它让我走上了看孩子的正确道路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T23:49:36.750

组件名称`Image`与它的组成无关。flex 继承是：Image -- SWFLoader -- UIComponent -- FlexSprite -- [...]（来自[mx.controls.Image docs](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/Image.html)）。

因此，您需要做的是了解将其带入 AS3 环境时实际拥有的内容。似乎它被包裹在一个 MovieClip 中以允许它出现在 Flash 的显示列表中。看起来您还必须通过装载机，但我不确定。

运行一两个测试以找出对象的实际组成：

```
// not foolproof, and will break on some stuff, 
// so you will have to fix this as needed:
private function loopDisplay(obj:Sprite):void
{
    trace(obj.name + ": " + obj);
    if (obj.numChildren > 0)
    {
        for (var i:int = 0; i < this.numChildren; i++)
        {
            loopDisplay(obj.getChildAt(i));
        }
    }
} 
```

如果你把它放在鼠标按下处理程序中，那么你可以看到实际存在的内容。

但是，`event.target`or`event.currentTarget`也应该包含菜单项对象，因此您也可以循环进入这些对象并查看其中的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T00:31:04.123

您需要将 Image 上的 mouseChildren 设置为 false，然后 MouseEvent 将引用 Image：

```
if (event.target is Image) {
   //do stuff
} 
```

# entity-framework - 实体框架中的 GROUP 和 SUM

> ID：10316648
> 
> 赞同：15
> 
> 时间：2012-04-25T13:24:38.363
> 
> 标签：entity-framework, select, group-by, sum, linq-to-entities

我想为每个客户选择一个订单项目的所有（付费）价格的总和。这是SQL命令：

```
SELECT c.name,SUM(oi.price * oi.count) from customer c
JOIN order o ON c.id=o.customer_id
JOIN order_item oi ON o.id=oi.order_id
JOIN bill b ON b.id=oi.bill_id
WHERE b.payment_id is NOT null
GROUP by c.name; 
```

我不知道如何在 EF 中执行此操作。示例结果：

```
John Smith  1500,2  
Allan Babel 202,0  
Tina Crown  3500,78 
```

（逗号用作小数点..因为价格是十进制值）

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-25T13:40:46.110

您的示例结果似乎与您的 SQL 命令不匹配，但我认为您正在寻找这样的东西：

```
var query = from c in context.Customers
            join o in context.Orders on c.id equals o.customer_id
            join oi in context.OrderItems on o.id equals oi.order_id
            join b in context.bill on oi.bill_id equals b.id
            where b.payment_id != null
            group oi by c.name into g
            select new
            {
              Name = g.Key,
              Sum = g.Sum(oi => oi.price * oi.count),
            } 
```

# c# - 如何将现有表单添加到新项目？

> ID：10316650
> 
> 赞同：48
> 
> 时间：2012-04-25T13:24:43.293
> 
> 标签：c#, winforms, visual-studio-2010

我从来没有能够成功地将`Form`现有文件中的一个添加到一个新项目中。

我在博客上读到，您只添加了 *.cs 文件并且依赖项进来了。好吧，我尝试了这个，文件确实拖动并关联了 *.designer 和 *.resx 文件。 *但是，表单图标不显示*。相反，该文件看起来像一个普通的 *.cs 文件图像。而且，当我双击文件时，我得到的是后面的代码而不是表单对象。

**是否可以添加现有表单并正确识别它们？**

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2015-08-21T18:59:56.423

这是一种**不涉及关闭项目并重新打开它**的方法：

1.  添加 3 个现有的表单文件（cs、Designer.cs 和 resx）。
2.  现在，排除您刚刚从项目中添加的 3 个文件。
3.  打开 Add existing item explorer 窗口并转到您的项目目录。
4.  选择cs文件并添加。
5.  多田。都好

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-04-25T13:58:39.610

经过更多研究，我发现了问题的根源。正确的是，只需导入`*.cs`文件即可。需要注意的是项目类型。如果在类库项目中工作，则必须执行另一个步骤。

1.  `System.Windows.Forms.dll`添加对和的引用`System.Drawing`。
2.  导入`*.cs`文件

笔记：

A. 只有在我执行了这些步骤并尝试打开文件后才能正确识别这些文件。突然VS“醒来”并修复了文件。

B. *步骤的顺序无关紧要*。如果您已经导入 *.cs 文件，只需修复引用。

C. 如果缺少其他引用，例如 DevExpress 或其他 3rd 方控件导入），*.cs 文件将无法正确显示，直到此问题得到解决。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-01-24T15:24:29.087

抱歉 P.Brian.Mackey，您的解决方案对我不起作用。它确实通过让 VS 识别它是一个表单而不是一个代码文件来改进它，即给它是图标（想象它添加了表单）

但我设法完全解决问题的唯一方法是在文本编辑器中手动编辑 csproj 文件。我不太相信这是一个很好的解决方案并且可能非常危险，特别是考虑到我犯了两个打字错误并完全破坏了项目，但一旦我做对了它就可以工作。也很难找到诸如未正确关闭标签或忘记文件扩展名之类的错误。

因此，在通过“添加->现有项目”添加文件后，该项目从这些条目开始：(Ps我确定您不必先将文件复制到项目文件夹中，只需导航到它们的存储位置在项目之外，VS会将它们复制到您右键单击的文件夹中。当然也可以提前复制。）

```
<Compile Include="Reports\GBudget1Report.cs">
  <SubType>Form</SubType>
</Compile>
<Compile Include="Reports\GBudget1Report.Designer.cs" />
<Compile Include="Reports\GBudget2Report.cs">
  <SubType>Form</SubType>
</Compile>
<Compile Include="Reports\GBudget2Report.Designer.cs" />
<Compile Include="Reports\LASHForm.cs">
  <SubType>Form</SubType>
</Compile> 
```

并进一步在文件中：

```
<EmbeddedResource Include="Reports\GBudget1Report.resx" />
<EmbeddedResource Include="Reports\GBudget2Report.resx" /> 
```

将这些与项目中正常工作的现有表单进行比较（另一个选项是如果您没有，则在 Visual Studio 中创建一个新表单，它会为您提供正确的标记以进行复制）我发现DependentUpon 标记没有将子文件关联到主表单代码文件。

所以我手动编辑它以匹配：

```
<Compile Include="Reports\GBudget1Report.cs">
  <SubType>Form</SubType>
</Compile>
<Compile Include="Reports\GBudget1Report.Designer.cs">
   <DependentUpon>GBudget1Report.cs</DependentUpon>
</Compile>
<Compile Include="Reports\GBudget2Report.cs">
  <SubType>Form</SubType>
</Compile>
<Compile Include="Reports\GBudget2Report.Designer.cs">
   <DependentUpon>GBudget2Report.cs</DependentUpon>
</Compile> 
```

再次在文件下方：

```
<EmbeddedResource Include="Reports\GBudget1Report.resx">
  <DependentUpon>GBudget1Report.cs</DependentUpon>
</EmbeddedResource>
<EmbeddedResource Include="Reports\GBudget2Report.resx">
  <DependentUpon>GBudget2Report.cs</DependentUpon>
</EmbeddedResource> 
```

这不是我喜欢的解决方案，但它有效。如果有人有更好的解决方案，我很乐意倾听。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-25T13:48:21.923

您可以将现有表单导入到项目中。需要导入的文件取决于用于创建表单的 Visual Studio 版本。

我将假设您在不同的解决方案中有两个独立的项目 Foo 和 Bar：

```
C:\
    Projects\
        Foo\
            Foo.sln
            Foo.vcproj
            Program.cs
            Foo.cs
            Foo.Designer.cs
            Foo.Designer.resx 
```

和

```
C:\
    Projects\
        Bar\
            Bar.sln
            Bar.vcproj
            Program.cs
            Bar.cs
            Bar.Designer.cs
            Bar.Designer.resx 
```

现在，假设您需要将表单 Foo 导入到项目 Bar 中。首先，您需要将 Foo 附带的所有文件复制到 Bar 项目文件夹中：

```
C:\
    Projects\
        Bar\
            Bar.sln
            Bar.vcproj
            Program.cs
            Bar.cs
            Bar.Designer.cs
            Bar.Designer.resx
            Foo.cs
            Foo.Designer.cs
            Foo.Designer.resx 
```

然后，在 Visual Studio 中打开 Bar.sln 并在解决方案资源管理器中右键单击 Bar 项目。选择 [添加现有项目] 并在打开的对话框中选择您为 Foo 表单复制的所有文件。确认后，您应该可以在解决方案资源管理器中正确看到新导入的表单。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-05-27T20:07:53.953

我刚刚在升级 VisualBasic 表单时遇到了类似的问题，从 VisualStudio 2010 升级到 VisualStudio 2013。似乎有两种方法可以添加现有项目。

问题：如果我选择 Main Window->Project->Add Existing Item 并仅拉入文件 formname.vb，结果似乎被解释为仅代码（无设计器），指向原始文件（而不是复制到新项目）并有其他问题。

解决方案：如果相反，我转到解决方案资源管理器窗口，单击以选择项目（而不是树中的较低级别对象），然后在窗口中单击鼠标右键，结果菜单提供添加->现有项目。使用此版本按预期工作，只需要我找到 formname.vb 文件。没有手动复制文件，没有指向多个文件，没有编辑脚本等。我猜这同样适用于用 C 编写的表单。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-25T13:36:38.300

您实际上需要 2 个文件： - Form1.cs - Form1.Designer.cs

复制 - 将它们粘贴到您的新项目中（只需确保新项目中不存在同名的此类表单）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-24T15:07:11.247

转到解决方案资源管理器并右键单击它然后添加现有项目，这里选择现有表单路径。现在，这很重要，在您要使用现有表单的页面上，您必须添加头文件：

```
using "your existing project name"; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-27T17:38:10.250

如果您想创建一个 Windows 窗体库，最好创建一个 Windows 窗体应用程序项目。然后删除默认窗体（Form1），进入项目属性，将输出类型（或项目类型）从 Windows 窗体应用程序更改为类库。

这样，输出将是一个 DLL，但它将包含 Windows 窗体项目所需的引用。正如您所指出的，在添加现有项目时，不要添加它们对应的 .Designer 和 .resx 文件，只需添加它们的顶级/主文件。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-11-27T16:18:05.400

也许是因为使用了 Visual Studio 2012，但所有这些解决方案都不起作用。AtConway 提示编辑 csproj 文件。这个提示奏效了。

1.  打开包含要添加三个文件的项目的解决方案。
2.  假设您要添加 MyForm.cs / MyForm.Designer.cs 和 MyForm.resX。确保它们在您项目的文件夹中
3.  添加一个具有虚拟名称的虚拟表单（或用户控件）：MyTempForm。
4.  保存解决方案并在 Developer Studio 中将其关闭
5.  在 Windows 资源管理器中删除三个 MyTempForm 文件
6.  使用相同的扩展名重命名 MyTempForm 中的三个 MyForm 文件。
7.  在 Developer Studio 2012 中再次打开您的解决方案
8.  看到您的 MyForm 现在完全可以用作 MyTempForm
9.  在解决方案资源管理器中将 MyTempForm 重命名为 MyForm

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-05-11T19:30:55.223

假设您要导入名为 YourFormName 的表单。然后您应该只将 YourFormName.cs 添加到项目中 - 其余部分（YourFormName.designer.cs 和 YourFormName.resx）将自动添加。

脚步：

在 VS2013 中创建 WinForms 项目（在我的情况下 .Net Framework 是 4.5.1）右键单击项目 -> 添加 -> 现有项...将您要导入的 winform 复制到项目的文件夹中。如果要将其添加到新文件夹，请先创建一个文件夹然后添加。搜索任何带有控件的 WinForm（我在 VS2010 中为 .NET 框架 4 添加了两个表单）在不到 10 秒的时间内 Visual Studio 添加了所有剩余的文件，我可以在设计模式下打开它。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-02-24T13:12:23.143

在尝试了几种方法后，我发现使用现有 WinForm 的最简单方法是：（类似于 HaraldDuch 的答案）并且仅在 VS2013 上进行了测试：

1) 在将现有 WinForm 移动到目标项目的源文件夹之前，使用与源 WinForm 相同的名称创建一个虚拟 WinForm。

2）保存时关闭您的VS解决方案。

3) 从 Windows 资源管理器（关闭 VS IDE）中删除/替换新创建的 WinForm 虚拟文件集（*.cs、*.Designer.cs 和 *.resx），并使用您要使用的现有 WinForm 文件。

4) 打开 VS 找到您现有的 WinForm，如果您愿意，可以从 VS IDE 重命名它，您需要更改旧 WinForm 的命名空间以匹配您的新项目。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-11-17T01:32:40.017

在进行了大量测试并且在添加时未能正确识别表单后，即使在导入 .vb 时 .designer 和 .resx 正在复制，我发现[Vidar 的解决方案](https://stackoverflow.com/a/863698/2027535)是最好的，最少的 hacky 修复。

看来，如果项目中还没有这些引用（如果还没有表单），则该表单不会被识别为表单，而是作为代码模块导入。

*   系统绘图
*   System.Windows.Forms

这些可以根据上面的解决方案手动添加，也可以简单地

1.  向项目添加一个新的空白表单（这会自动添加上面的引用）
2.  添加要导入的现有表单 .vb/.cs（它现在将在解决方案资源管理器中显示表单图标，并且可以从上下文中使用“视图设计器”）
3.  删除空白表格或将其用于其他用途

这不需要编辑任何 VS 配置文件，如问题的其他答案所示。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-11-07T05:22:26.323

就我而言，我还注意到我一次只能广告一种形式。如果您尝试同时添加多个表单，您将看到这些表单是单独的项目。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-05-13T17:03:57.280

Visual Studio 2012 中所需的一切如下：

1.  将表单的三个文件复制到项目文件夹中（.cs、.designer.cs 和 .resx）
2.  转到项目并添加现有对象。
3.  选择 .CS 文件
4.  它将导入并看起来像一个标准代码文件。如上所述，双击它不会打开设计器。但是，只需单击保存所有文件，然后关闭并重新打开项目，现在它被识别为表单并且可以正常工作。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-08-13T02:45:13.383

您仍然可以使用“添加现有 iTem”

1.  “添加现有iTem”，选择三个文件（.cs .resx .Designer.cs）

2.  确保 .cs 文件中的“命名空间应用程序”与项目相同

3.  现在您可以使用自动完成刚刚添加的表格。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-09-03T09:04:46.713

这刚刚对我有用（我和你有同样的问题）。1.创建新的同名winform，添加一些东西（因此创建resx文件），保存并关闭。2\. 用您原来的表格替换新创建的文件。3\. 完成

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-11-20T07:16:01.823

将 .cs 文件从文件系统拖放到解决方案资源管理器中的项目树（例如）：

*   主窗体.cs
*   mainForm.Designer.cs

如果它不是 Windows 窗体项目，请不要忘记引用。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-12-18T20:59:25.190

尽管这是一篇旧帖子，但我遇到了与@MatthewRadford 上面描述的完全相同的问题。我的解决方法是只添加 .CS 文件（不要添加 .resx 文件），并允许 Visual Studio 在添加 .cs 文件后立即自动生成 .resx 文件。

但是，我找到了一个**永久的解决方案**。如果您在升级到新版本的 Visual Studio 后立即开始遇到此问题，则可能是在升级过程中，Active Reports 没有正确注册。解决方案是停用您的 Active Reports（使用 GrapeCity License Manager），卸载 Active Reports，从头开始重新安装 Active Reports，然后重新激活您的许可证。您现在应该能够同时添加 ReportName.cs 和 ReportName.resx 以及 Designer.cs 文件，同时让 Visual Studio 正确处理它们的依赖关系。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-03-24T09:21:15.390

只需添加表单文件（form.vb 或 form.cs），其他文件将自动创建。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-02-15T12:49:40.197

对我有用的最简单的解决方案是，

1.  如果它打开，请关闭视觉工作室

2.  将所有 3 个文件（.cs、.designer.cs、.resx）复制到所有其他表单所在的项目文件夹中。

3.  现在使用 Visual Studio 打开项目。

4.  构建项目

5.  通过右键单击它并选择视图设计器打开表单，这将为表单生成正确的 Designer.cs。如果您有时不这样做，可能会出现错误提示

> 当前上下文中不存在 InitializeComponent。

6.  现在您可以打开并编辑 .cs 代码文件

之后，新表单将在解决方案资源管理器中显示为正常表单。

* * *

## 回答 #21

> 赞同：-2
> 
> 时间：2014-02-13T01:29:12.317

您所要做的就是传递 .cs 文件。（代码文件）

# php - 使用 CDBCriteria 进行联接查询

> ID：10316652
> 
> 赞同：2
> 
> 时间：2012-04-25T13:24:50.437
> 
> 标签：php, inner-join, criteria, yii

我正在尝试在 Yii 框架中使用 CDBCriteria 进行 Join 查询。问题是连接查询成功运行，但它不显示其他表中的列。

我正在按照以下方式进行

```
$criteria = new CDbCriteria;

$criteria->order = 't.id desc';

$criteria->select = '*';

$criteria->join = ' INNER JOIN table2 INNER JOIN table3 INNER JOIN table4'; 
```

当我运行它时，我只能看到显示的邮件 table1 列。其他列未显示。

在我的模型类中，我的关系有

```
public function relations()
{
  // NOTE: you may need to adjust the relation name and the related
  // class name for the relations automatically generated below.
    return array(
      'user' => array(self::BELONGS_TO, 'DmPhoneUser', 'user_id'),
      'command' => array(self::BELONGS_TO, 'DmOtaCommand', 'command_id'),
      'partner' => array(self::BELONGS_TO, 'DmPartner', 'partner_id'),
    );
} 
```

# ****** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ******

 **```
public function actionGetHistory($start, $per_page)
{
    $partner_id = '10';
    $criteria = new CDbCriteria;
    $criteria->order = 't.history_id desc';
    $criteria->select = 't.*, table2.*';
    $criteria->join = ' INNER JOIN table2 ON t.command_id = table2.command_id';
    $result = Table_1_class::model()->with('command')->findAll();
    $history_data = CJSON::encode($result);
    echo $history_data;
} 
```

这里command_id在table1和table2中很常见。

这就是我使用标准代码的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T05:37:57.247

正如我所说，Yii 的 Active Record 实现将只使用在表本身或您通过链接到的表中定义的列`with`，而不是您在结果集中返回的任意列。

解决方案 1：定义与 的关系`table2`，将该关系添加到`with`，然后删除`join`。然后您可能需要将每个返回的对象转换为一个数组 -`CJSON::encode`不能很好地处理具有关系的模型。

解决方案 2：使用`Yii::app()->db->createCommand("SQL query")->queryAll();`而不是 Active Record。这将产生一个数组数组，这`CJSON::encode`将没有问题。**

# java - TitlePageIndicator 选择行页脚到页眉

> ID：10316653
> 
> 赞同：3
> 
> 时间：2012-04-25T13:24:50.540
> 
> 标签：java, android

我正在使用来自 Jake Wharton 的 TabPageIndicator 我的问题：有没有办法将制表符页脚行转换为“页眉行”？我正在使用 ViewPager 下方的指示器，如果在我的选项卡标题顶部有“选定行”会很好。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:35:57.867

好吧，我猜这个组件不支持这个选项，但是，那个页脚是一个图像，所以如果你垂直旋转这个图像，它就会变成一个页眉！哈哈！

# javascript - JS/CSS 幻灯片无法按预期工作

> ID：10316655
> 
> 赞同：2
> 
> 时间：2012-04-25T13:24:57.077
> 
> 标签：javascript, css, slideshow

我在这里使用这个滑块：http: [//css-tricks.com/examples/FeaturedContentSlider/](http://css-tricks.com/examples/FeaturedContentSlider/)

当我把它放在我的网站上时：http: [//www.cozinhatur.com/cozinhas/copyofportas.html](http://www.cozinhatur.com/cozinhas/copyofportas.html)

下面的缩略图不是它们应该在的地方，我看不到全文。我尝试使用 Firefox（Inspecting Element），但无能为力。

PS：嗯，基本上我正在寻找可以显示一些图像的幻灯片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:33:30.710

问题是您的样式表中有一个通用规则正在搞砸

```
.body img {  padding:0; margin:10px auto;} 
```

删除它并且它工作正常，这意味着您需要在幻灯片的样式表中覆盖它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:34:05.047

添加

```
#movers-row {
    margin: -64px 0 0 62px; 
}

.slider-wrap .cross-link {
    margin: 0px auto; 
} 
```

在其他 CSS 样式下方。

# c# - 如何在 WCF 操作中创建异步/后台进程？

> ID：10316656
> 
> 赞同：2
> 
> 时间：2012-04-25T13:25:03.773
> 
> 标签：c#, wcf, logging, background-process, performance

在我的 WCF 操作中，我将执行操作所需的逻辑：保存记录、获取数据集等，在某些情况下，我还需要记录活动。但是，在这些情况下，我觉得让客户端应用程序等待 WCF 操作来记录活动是没有意义的。我想启动记录过程，然后立即将任何必要的内容返回给客户端，而无需等待记录过程完成。

我不在乎知道日志记录过程何时完成，只需触发并忘记即可。

我也更喜欢使用 BasicHttpBinding 来保持最大的互操作性。

这可能吗？有人愿意分享编码示例或带有编码示例的网站链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:00:44.977

这可以很容易地使用任意数量的线程技术来完成。

对于一个非常简单的示例，请尝试修改：

```
// Log something going on.
System.Threading.ThreadPool.QueueUserWorkItem((args) =>
{
   System.Diagnostics.EventLog.WriteEntry("my source", "my logging message");
}); 
```

在该 lambda 方法中，您可以使用您喜欢的任何日志记录类，如果您想记录某些当前状态，可以将局部变量包含到记录器中。

# php - 回声下拉选择

> ID：10316657
> 
> 赞同：1
> 
> 时间：2012-04-25T13:25:03.817
> 
> 标签：php

我有一个编辑部分来编辑状态和其他各种信息。我希望状态是一个下拉列表，然后回显。使用代码时，它只是回显未定义。文本框（我没有包括在内）工作正常，所以我认为这只是因为它是下拉而不是文本框。回声在代码的第一行：

```
<?php echo $rrows['status']; ?>
<a href="javascript:void(0);" onclick='$("#edit<?php echo $rrows['id'];?
>").show("slow");'>Edit</a>

<div style="display:none;font: normal 11px arial; padding:10px; background: #e6f3f9" 
id="edit<?php echo $rrows['id']; ?>">
Application Status: <select id="status<?php echo $rrows['id']; ?>" name="status<?php 
echo $rrows['id']; ?>" value="<?php echo $rrows['status']; ?>" >
<option value="<?php echo $rrows['status'];?>"></option>
<option value="Successful">Successful</option>
<option value="Not Successful">Not Successful</option>
<option value="Pending">Pending</option>
</select>
<input name="doSave" type="button" id="doSave" value="Save"

onclick='$.get("do.php",{ cmd: "edit", status:$("input#status<?php echo
$rrows['id']; ?>").val() ,user_level:$("input#user_level<?php echo $rrows['id']; ? 
>").val(),user_email:$("input#user_email<?php echo $rrows['id']; ?>").val(),user_name: 
$("input#user_name<?php echo $rrows['id']; ?>").val(),id: $("input#id<?php echo 
$rrows['id']; ?>").val() } ,function(data){ $("#msg<?php echo $rrows['id']; ?
>").html(data); });'>
 <a  onclick='$("#edit<?php echo $rrows['id'];?>").hide();'  
href="javascript:void(0);">close</a>

<div style="color:blue" id="msg<?php echo $rrows['id']; ?>" name="msg<?
php echo $rrows['id']; ?>"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:29:15.940

尝试： var_dump($rrows) 而不是 echo 在第一行查看实际存在的内容。我经常用它来调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:29:32.237

该选择框的名称是“status”，后跟 $rrows['id']，而您只是将其称为“status”

# delicious-api - Delicious - 通过 API 获取堆栈中的链接

> ID：10316664
> 
> 赞同：2
> 
> 时间：2012-04-25T13:25:23.877
> 
> 标签：delicious-api

我有一个美味的用户，我创建了一个新堆栈。我正在尝试通过 API 获取该堆栈中的链接。最好作为 xml 提要。我还没有找到任何记录的方法来做到这一点。这完全支持吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:48:51.960

根据 Delicious 的 Paul 所说：

> 嗨，伊泰！目前没有对堆栈的 RSS 提要或 API 支持。这些是我们将来可能会考虑添加的功能。- 保罗

来源：[https ://www.facebook.com/delicious/posts/10150714852032205?notif_t=feed_comment](https://www.facebook.com/delicious/posts/10150714852032205?notif_t=feed_comment)

# colors - 找到最接近给定 CIEL*a*b* 颜色的 sRGB 可表示颜色

> ID：10316666
> 
> 赞同：3
> 
> 时间：2012-04-25T13:25:25.823
> 
> 标签：colors

我在[CIE L *a* b*](http://en.wikipedia.org/wiki/Lab_color_space)颜色空间中指定了一种颜色，该颜色超出了标准[sRGB](http://en.wikipedia.org/wiki/SRGB_color_space)显示器可以显示的范围。我想显示给定颜色的近似值（与指定的亮度/L 值相同），但数学相当粗糙，涉及寻找分段函数之间的交点等。

是否有任何参考代码，或者我应该继续进行数学运算？

澄清一下：给定一个`a,b`不在下面形状内的点，我想找到最接近`a,b`形状内的 IS。

![实验室色彩空间](../Images/e56619b0ce6020a5a782e8b8a3cbd9bf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:33:48.687

下面是一个使用 mat lab 的例子：

[http://www.mathworks.com/matlabcentral/fileexchange/24009](http://www.mathworks.com/matlabcentral/fileexchange/24009)

[这里](https://stackoverflow.com/questions/4205908/rgb-to-cielab-conversion)还有一个关于反向函数的线程，它提到了一个[有许多转换编程示例的站点](http://www.easyrgb.com/index.php?X=MATH)。

您可以结合“CIE-L*ab —> XYZ”和“XYZ —> RGB”转换。

* * *

**更新：**

我刚刚发现这个： [http ://www.cs.washington.edu/research/imagedatabase/summerproject/2004/eye/src/yi/iu/processor/color/CIELab.java](http://www.cs.washington.edu/research/imagedatabase/summerproject/2004/eye/src/yi/iu/processor/color/CIELab.java)

但是我找不到它使用什么许可证，所以如果你正在使用它，也许你应该联系作者。

# java - 在 Eclipse Indigo 中绘制带有圆角的视图

> ID：10316668
> 
> 赞同：1
> 
> 时间：2012-04-25T13:25:32.247
> 
> 标签：java, eclipse, eclipse-plugin

在我的 Eclipse RCP 应用程序中，编辑器的顶部带有圆角。然而，我的视图在视图框架的顶部有尖角。如果您查看 Eclipse IDE 中的视图，您会注意到它们的顶部都有圆角。如果视图标题可见，则绘制圆角。我不想显示视图标题。所以我想知道是否可以绘制一个带圆角的无标题视图。

PS：我也考虑过在视图的背景中画一个圆角矩形。该解决方案的问题在于，每个视图都被 1px 深灰色边界线包围，并且该边界线仍然会有尖角。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:37:51.780

put the following line to your ApplicationWorkbenchAdvisor (eg. to public void initialize(IWorkbenchConfigurer configurer))

```
PlatformUI.getPreferenceStore().setValue(IWorkbenchPreferenceConstants.SHOW_TRADITIONAL_STYLE_TABS, false); 
```

# android - Android中的人脸检测

> ID：10316672
> 
> 赞同：1
> 
> 时间：2012-04-25T13:25:58.377
> 
> 标签：android, face-detection

我正在尝试在 Android 中开发示例人脸检测应用程序。我已经尝试过使用`FaceDetecor`Android SDK 本身提供的类，但它没有提供正确的结果。我有一个位图。库应该分析并说明在位图中是否可以使用人脸。请给我一些建议。期待更好的结果。我已经为此图像尝试了以下[参考图像](http://www.google.co.in/imgres?q=men%20group%20images&um=1&hl=en&sa=N&tbm=isch&tbnid=tkfZ0kvTmIG9xM%3a&imgrefurl=http://greenfyre.wordpress.com/2009/11/21/cru-hack-time-to-hit-back-hard/&docid=nSXV_GprtGSX1M&imgurl=http://www.sosolid.co.uk/photos/So_Sold_Crew_men_group.jpg&w=471&h=360&ei=H_uXT4zhOoKJrAfC34DEAQ&zoom=1&iact=rc&dur=449&sig=102755378228027067517&page=2&tbnh=136&tbnw=178&start=15&ndsp=17&ved=1t:429,r:2,s:15,i:109&tx=91&ty=87&biw=1024&bih=639)图像，它说没有面孔。

**主类：**

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.ImageView;

public class DetectFace1Activity extends Activity {
    /** Called when the activity is first created. */

    ImageView image;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        image=(ImageView)findViewById(R.id.image);
        FaceView faceView = new FaceView(this);
        setContentView(faceView);
    }
} 
```

**人脸检测类：**

```
 import android.content.Context;
 import android.graphics.Bitmap;
 import android.graphics.BitmapFactory;
 import android.graphics.Canvas;
 import android.graphics.Color;
 import android.graphics.Paint;
 import android.graphics.PointF;
 import android.graphics.Rect;
 import android.media.FaceDetector;
 import android.util.Log;
 import android.view.View;

 public class FaceView extends View {
 private static final int NUM_FACES = 10; // max is 64
 private static final boolean DEBUG = true;

 private FaceDetector arrayFaces;
 private FaceDetector.Face getAllFaces[] = new FaceDetector.Face[NUM_FACES];
 private FaceDetector.Face getFace = null;

 private PointF eyesMidPts[] = new PointF[NUM_FACES];
 private float  eyesDistance[] = new float[NUM_FACES];

 private Bitmap sourceImage;

 private Paint tmpPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
 private Paint pOuterBullsEye = new Paint(Paint.ANTI_ALIAS_FLAG);
 private Paint pInnerBullsEye = new Paint(Paint.ANTI_ALIAS_FLAG);

 private int picWidth, picHeight;
 private float xRatio, yRatio;

 public FaceView(Context context) {
      super(context);

      pInnerBullsEye.setStyle(Paint.Style.FILL);
      pInnerBullsEye.setColor(Color.RED);

      pOuterBullsEye.setStyle(Paint.Style.STROKE);
      pOuterBullsEye.setColor(Color.RED);

      tmpPaint.setStyle(Paint.Style.STROKE);
      tmpPaint.setTextAlign(Paint.Align.CENTER);

      BitmapFactory.Options bfo = new BitmapFactory.Options();
      bfo.inPreferredConfig = Bitmap.Config.RGB_565;

      sourceImage = BitmapFactory.decodeResource( getResources() ,R.drawable.black, bfo);

      picWidth = sourceImage.getWidth();
      picHeight = sourceImage.getHeight();

      arrayFaces = new FaceDetector( picWidth, picHeight, NUM_FACES );
      arrayFaces.findFaces(sourceImage, getAllFaces);

      for (int i = 0; i < getAllFaces.length; i++)
      {
           getFace = getAllFaces[i];
           try {
                PointF eyesMP = new PointF();
                getFace.getMidPoint(eyesMP);
                eyesDistance[i] = getFace.eyesDistance();
                eyesMidPts[i] = eyesMP;

                if (DEBUG)
                {
                     Log.i("Face", i +  " " + getFace.confidence() + " " +     getFace.eyesDistance() + " " + "Pose: ("+ getFace.pose(FaceDetector.Face.EULER_X) + ","
+ getFace.pose(FaceDetector.Face.EULER_Y) + "," +     getFace.pose(FaceDetector.Face.EULER_Z) + ")" + "Eyes Midpoint: ("+eyesMidPts[i].x + "," + eyesMidPts[i].y +")");
                }
           } catch (Exception e) {
                if (DEBUG) Log.e("Face", i + " is null");
           }

      }
 }

 @Override
 protected void onDraw(Canvas canvas)
 {
      xRatio = getWidth()*1.0f / picWidth;
      yRatio = getHeight()*1.0f / picHeight;
      canvas.drawBitmap( sourceImage, null , new Rect(0,0,getWidth(),getHeight()),tmpPaint);
      for (int i = 0; i < eyesMidPts.length; i++)
      {
           if (eyesMidPts[i] != null)
           {
                pOuterBullsEye.setStrokeWidth(eyesDistance[i] /6);
                canvas.drawCircle(eyesMidPts[i].x*xRatio, eyesMidPts[i].y*yRatio, eyesDistance[i] / 2 , pOuterBullsEye);
                canvas.drawCircle(eyesMidPts[i].x*xRatio, eyesMidPts[i].y*yRatio, eyesDistance[i] / 6 , pInnerBullsEye);
           }
      }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T17:38:14.527

`getFace.confidence()`是你需要的。

> 公众持股量信心 ()
> 
> 自：API 级别 1 返回介于 0 和 1 之间的置信度因子。这表明所找到的实际上是一张脸的确定程度。高于 0.3 的置信系数通常就足够了。

请参阅[Android 开发人员的参考资料](http://developer.android.com/reference/android/media/FaceDetector.Face.html#confidence())

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T17:16:31.310

FaceDetector 实际上只是不能很好地工作。我有一个需要使用它的应用程序，我花了一两天时间在它上面，但它不能一致或准确地识别人脸。不值得使用，不要浪费你的时间。它根本不符合任何人期望的标准。我尝试了几十张照片，也许它应该识别的面孔中有一半能够被识别出来。

# ruby-on-rails-3 - 异常通知器 - 如何显示自己的错误页面？

> ID：10316675
> 
> 赞同：3
> 
> 时间：2012-04-25T13:26:04.087
> 
> 标签：ruby-on-rails-3, exception, error-handling, custom-error-pages

我使用**exception_notification** gem 来处理应用程序中的错误。我的**ApplicationController**看起来像这样：

```
unless Rails.application.config.consider_all_requests_local
    rescue_from Exception,
                :with => :render_error
    rescue_from ActiveRecord::RecordNotFound,
                :with => :render_not_found
    rescue_from ActionController::RoutingError,
                :with => :render_not_found
    rescue_from ActionController::UnknownController,
                :with => :render_not_found
    rescue_from ActionController::UnknownAction,
                :with => :render_not_found
  end

  def render_not_found(exception)
    ExceptionNotifier::Notifier
      .exception_notification(request.env, exception)
      .deliver
    render :template => "/errors/404.html.erb",
      :layout => 'errors.html.erb'
    return     
  end

  def render_error(exception)
    ExceptionNotifier::Notifier
      .exception_notification(request.env, exception)
      .deliver
    render :template => "/errors/500.html.erb",
           :layout => 'errors.html.erb'
    return
  end 
```

在文件末尾的**/config/enviroments/productions.rg**中，我有：

```
config.middleware.use ExceptionNotifier,
  :email_prefix => "[MY APP| Error Report] ",
  :sender_address => %{"MY APP" <err@my-app.com>},
  :exception_recipients => 'my_email@gmail.com'
end 
```

当我在应用程序上收到错误时 - 例如。`Article.find(not-existing-ID)`，我将从`/public/500.html`应用程序控制器中指定的文件而不是从应用程序控制器中指定的文件中获取标准错误页面（ERROR 500）...这怎么可能？过去几个小时我试图找到问题，但我仍然不知道问题所在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:07:50.660

这对我有用 - 来自 application_controller.rb：

```
unless Rails.application.config.consider_all_requests_local
  rescue_from Exception, with: :render_500
  rescue_from ActionController::RoutingError, with: :render_404
  rescue_from ActionController::UnknownController, with: :render_404
  rescue_from ActionController::UnknownAction, with: :render_404
  rescue_from ActiveRecord::RecordNotFound, with: :render_404
end 
```

和

```
 private
  def render_404(exception)
    ExceptionNotifier::Notifier.exception_notification(request.env, exception,
      :data => {:User => current_user.full_name, :Email => current_user.email, :UserID => current_user.id}).deliver
    @not_found_path = exception.message
    respond_to do |format|
      format.html { render template: 'pages/404', layout: 'layouts/application', status: 404 }
      format.all { render nothing: true, status: 404}
    end
  end
  def render_500(exception)
    ExceptionNotifier::Notifier.exception_notification(request.env, exception,
      :data => {:User => current_user.full_name, :Email => current_user.email, :UserID => current_user.id}).deliver
    @error = exception
    respond_to do |format|
      format.html { render template: 'pages/500', layout: 'layouts/application', status: 500 }
      format.all { render nothing: true, status: 500}
    end
  end 
```

注意：我在 /app/views/pages 中有我的自定义错误页面。称为 500.html.haml 和 404.html.haml

我的 routes.rb 中也有这个（注意 'pages 后面的*哈希*而不是正斜杠）：

```
 unless Rails.application.config.consider_all_requests_local
    match '*not_found', to: 'pages#404'
  end 
```

PS。在此处查看更新说明：[http ://ramblinglabs.com/blog/2012/01/rails-3-1-adding-custom-404-and-500-error-pages](http://ramblinglabs.com/blog/2012/01/rails-3-1-adding-custom-404-and-500-error-pages)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:18:17.387

嗨，这对我有用，试试吧！

在 application_controller.rb 中，您可以添加以下代码：

```
 if Rails.env.production?
  unless Rails.application.config.consider_all_requests_local
    rescue_from Exception, with: :render_500
    rescue_from ActionController::RoutingError, with: :render_404
    rescue_from ActionController::UnknownController, with: :render_404
    rescue_from ActionController::UnknownAction, with: :render_404
    rescue_from ActiveRecord::RecordNotFound, with: :render_404
  end
 end 
```

此代码检查您是否使用生产模式运行您的 Rails 应用程序并捕获不同的救援错误。

在同一控制器“application_controller.rb”中添加以下代码：

```
def render_404(exception)
    @not_found_path = exception.message
    respond_to do |format|
      format.html { render template: 'errors/not_found', layout: 'layouts/application', status: 404 }
      format.all { render nothing: true, status: 404 }
    end
  end

  def render_500(exception)
    logger.info exception.backtrace.join("\n")
    respond_to do |format|
      format.html { render template: 'errors/internal_server_error', layout:      'layouts/application', status: 500 }
      format.all { render nothing: true, status: 500}
    end
  end 
```

这些方法将指定您的应用程序捕获错误时要显示的页面，然后创建一个名为：errors_controller.rb 的控制器，然后在您的**app/view/errors 中** 创建一个名为：

*   internal_server_error.html.erb 和
*   not_found.html.erb

并在您的**routes.rb**中 添加以下代码：

```
 match '/internal_server_error', :to => 'errors#internal_server_error'
 match '/not_found', :to => 'errors#not_found' 
```

# php - 如何在 php 页面中包含 plist 文件？

> ID：10316676
> 
> 赞同：2
> 
> 时间：2012-04-25T13:26:04.037
> 
> 标签：php, plist, ota

我正在使用以下代码

`<?xml version="1.0"?> <?php include('app.plist'); ?>`

但 ITMS 服务无法处理此文件。

我希望 ITMS 服务的行为与我们使用 plist 时通常一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:24:30.440

您需要强制网络服务器将 .plist 作为 PHP 脚本处理。我建议通过将名称为 .htaccess 的文件写入包含这些文件的文件夹来使用 RewriteMod。请注意，该网络服务器必须支持 .htaccess 处理 - 大多数服务器都支持。尝试咨询谷歌有关 mod_rewrite 的信息，这是您将放入 .htaccess 文件的示例配置：

```
RewriteEngine On
RewriteRule ^(.*)\.plist$ /plistgen.php [L,QSA] 
```

要文件 plistgen.php 写入：

```
<?xml version="1.0"?> <?php include('app.plist'); ?> 
```

然后，当您调用例如[http://yourweb.tld/Random.plist](http://yourweb.tld/Random.plist)时，它会自动调用 plistgen.php 并且正在处理您的脚本。

# java - 每次打开 Android 虚拟设备时，Android SQLite 数据库都不会保留它的值

> ID：10316679
> 
> 赞同：3
> 
> 时间：2012-04-25T13:26:26.717
> 
> 标签：java, android, database, sqlite

我可以很好地创建数据库，我可以插入和查看值，但是每当我在 eclipse 中关闭 android 虚拟设备并重新打开它时，数据库值就消失了！:O 请帮帮我！

有 3 个类：（1 个处理数据库和 2 个活动）

**这对我来说意味着整个世界！！！:O 如果可以的话，我会 +rep 非常感谢你们！@!!!**

这是我的代码

数据库管理器：`

```
package com.jeux;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class Database2 {

private static final String DATABASE_NAME = "JeuxMotActivity";

private static final int DATABASE_VERSION = 1;

public static final String TABLE_CATEGORIE = "Categorie";
public static final String KEY_CATEGORIE_ID_CATEGORIE = "IDCategorie";
public static final String KEY_CATEGORIE_NOM_CATEGORIE = "NomCategorie";

public static final String TABLE_MOT = "Mot";
public static final String KEY_MOT_ID_MOT = "IDMot";
public static final String KEY_MOT_MOT = "Mot";
public static final String KEY_MOT_EMAIL = "Email";
public static final String KEY_MOT_ID_CATEGORIE = "IDCategorie";

public static final String TABLE_ADMINISTRATEUR = "Administrateur";
public static final String KEY_ADMINISTRATEUR_EMAIL = "Email";
public static final String KEY_ADMINISTRATEUR_PASSWORD = "Password";

public static final String TABLE_SCORE = "Score";
public static final String KEY_SCORE_ID_JEU = "IDJeu";
public static final String KEY_SCORE_USERNAME = "Username";
public static final String KEY_SCORE_SCORE = "Score";
public static final String KEY_SCORE_INITIALES = "Initiales";

public static final String TABLE_UTILISATEUR = "Utilisateur";
public static final String KEY_UTILISATEUR_USERNAME = "Username";
public static final String KEY_UTILISATEUR_PASSWORD = "Password";

public static final String TABLE_JEU = "jeu";
public static final String KEY_JEU_ID_JEU = "IDJeu";
public static final String KEY_JEU_NOM_JEU = "NomJeu";
public static final String KEY_JEU_COMMENTAIRES = "Commentaires";

private DBHelper ourHelper;
private final Context ourContext;
private SQLiteDatabase ourDatabase;

private static class DBHelper extends SQLiteOpenHelper {

    public DBHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(android.database.sqlite.SQLiteDatabase nb) {
        //TODO check teh constraints and the relations
        nb.execSQL("CREATE TABLE " + TABLE_CATEGORIE + " (" +
                KEY_CATEGORIE_ID_CATEGORIE + " INTEGER PRIMARY KEY    AUTOINCREMENT, " +
                KEY_CATEGORIE_NOM_CATEGORIE + " TEXT NOT NULL" +     ");"
                );

        nb.execSQL("CREATE TABLE " + TABLE_MOT + " (" +
                KEY_MOT_ID_MOT + " INTEGER PRIMARY KEY     AUTOINCREMENT, " +
                KEY_MOT_MOT + " TEXT NOT NULL," + 
                KEY_MOT_EMAIL + " TEXT NOT NULL," + 
                KEY_MOT_ID_CATEGORIE + " TEXT NOT NULL," + 
                "FOREIGN KEY(" + KEY_MOT_ID_CATEGORIE + ") REFERENCES " + TABLE_CATEGORIE + "(" + KEY_CATEGORIE_ID_CATEGORIE  + ")," +
                "FOREIGN KEY(" + KEY_MOT_EMAIL + ") REFERENCES " + TABLE_ADMINISTRATEUR + "(" + KEY_ADMINISTRATEUR_EMAIL  + ")" +
                ");"
                );

        nb.execSQL("CREATE TABLE " + TABLE_ADMINISTRATEUR + " (" +
                KEY_ADMINISTRATEUR_EMAIL + " TEXT PRIMARY KEY , " +
                KEY_ADMINISTRATEUR_PASSWORD + " TEXT NOT NULL" +     ");"
                );

        nb.execSQL("CREATE TABLE " + TABLE_SCORE + " (" +
                KEY_SCORE_ID_JEU + " TEXT NOT NULL, " +
                KEY_SCORE_USERNAME + " TEXT NOT NULL," + 
                KEY_SCORE_SCORE + " INTEGER NOT NULL," + 
                KEY_SCORE_INITIALES + " TEXT NOT NULL," + 
                "FOREIGN KEY(" + KEY_SCORE_ID_JEU + ") REFERENCES "      + TABLE_JEU + "(" + KEY_JEU_ID_JEU  + ")," +
                "FOREIGN KEY(" + KEY_SCORE_USERNAME + ") REFERENCES      " + TABLE_UTILISATEUR + "(" + KEY_UTILISATEUR_USERNAME  + ")" +
                ");"
                );

        nb.execSQL("CREATE TABLE " + TABLE_UTILISATEUR + " (" +
                KEY_UTILISATEUR_USERNAME + " TEXT PRIMARY KEY , " +
                KEY_UTILISATEUR_PASSWORD + " TEXT NOT NULL" + ");"
                );
        nb.execSQL("CREATE TABLE " + TABLE_JEU + " (" +
                KEY_JEU_ID_JEU + " INTEGER PRIMARY KEY     AUTOINCREMENT, " +
                KEY_JEU_NOM_JEU + " TEXT NOT NULL UNIQUE," + 
                KEY_JEU_COMMENTAIRES + " TEXT" + 
                ");"
                ); 
    }

    @Override
    public void onUpgrade(android.database.sqlite.SQLiteDatabase db,
            int oldversion, int newversion) {
    //  db.execSQL("DROP TABLE IF EXISTS " + TABLE_CATEGORIE);
    //  onCreate(db);
    }

}

    public Database2(Context c){
        ourContext = c;
    }

    public Database2 open() throws SQLException {
        ourHelper = new DBHelper(ourContext);
        ourDatabase = ourHelper.getWritableDatabase();
        return this;
    }

    public void close() throws SQLException{
        ourHelper.close();
    }       

    public long createCategorie(String name) {
        ContentValues cv = new ContentValues();
        cv.put(KEY_CATEGORIE_NOM_CATEGORIE, name);
        return ourDatabase.insert(TABLE_CATEGORIE, null, cv);   
    }

    public String getCategorieData(){
        String result = "";
        String[] columns = new String[] {KEY_CATEGORIE_ID_CATEGORIE,     KEY_CATEGORIE_NOM_CATEGORIE};
        Cursor c = ourDatabase.query(TABLE_CATEGORIE, columns,null, null,     null, null, null);

        int id = c.getColumnIndex(KEY_CATEGORIE_ID_CATEGORIE);
        int name = c.getColumnIndex(KEY_CATEGORIE_NOM_CATEGORIE);

        for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
            result += c.getString(id) + " " + c.getString(name) + "\n";
        }

        return result;
    }

    } 
```

`

```
Event Manager :

package com.jeux;

import android.app.Activity;
import android.app.Dialog;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class Jeuxdemots2Activity extends Activity implements OnClickListener {

  Button sqlUpdate, sqlView;
  EditText nameText;

  @Override
  public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);
  sqlUpdate = (Button) findViewById(R.id.updatebutton);
  sqlView = (Button) findViewById(R.id.afficherbutton);
  nameText = (EditText) findViewById(R.id.nametext);

  sqlUpdate.setOnClickListener(this);
  sqlView.setOnClickListener(this);    
  }

@Override
public void onClick(View arg0) {
    // TODO Auto-generated method stub

    switch (arg0.getId()){
    case R.id.updatebutton:
        try{
    String name = nameText.getText().toString();
    Database2 entry = new Database2(Jeuxdemots2Activity.this);
    entry.open();
    entry.createCategorie(name);
    entry.close();
        }catch (Exception e){
            String error = e.toString();

            Dialog d = new Dialog(this);
            d.setTitle("Dang it!");
            TextView tv = new TextView(this);
            tv.setText(error);
            d.setContentView(tv);
            d.show();
        }finally{

        }

    break;

    case R.id.afficherbutton:
        Intent i = new Intent("android.intent.action.SQLVIEW");
        startActivity(i);
    break;

    }

}
} 
```

`

视图#3：

```
package com.jeux;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class SQLview extends Activity {

protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.afficherlayout);
    TextView tv = (TextView) findViewById(R.id.affichertextview);
    Database2 info = new Database2(this);
    info.open();
    String data = info.getCategorieData();
    info.close();
    tv.setText(data);
}
} 
```

![一张照片来说明我的情况](../Images/e267751038d73cd46606cfdc90b007a7.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T13:41:47.730

当您关闭/重新打开您的虚拟设备时，它看起来是否每次都在进行完全启动（闪亮的 Android 字词、滑动解锁屏幕等）？如果是这样，它可能会在您每次运行应用程序时重新初始化*所有内容。*如果是这样，您的应用程序和数据库不再在设备上，因此数据不会持久存在。

当你创建你的模拟器时，你是否检查了“快照”选项？我相信这会将您的设备状态保存到一个文件中，以便当您关闭/重新打开模拟器时，它能够从同一点恢复。

# ssis - 从 SQL TASK SSIS 重定向异常

> ID：10316682
> 
> 赞同：1
> 
> 时间：2012-04-25T13:26:34.703
> 
> 标签：ssis

我在我的 SSIS 中作为“OLE DB COMMAND”运行 Oracle 存储过程。此存储过程的输入来自“OLE DB SOURCE”（输入是来自 SQL 服务器表的 id）。现在，在我的 oracle 存储过程中，当我收到“未找到数据”异常时，我想重定向输入 id 并将异常记录到 SQL 服务器表中。您能告诉我如何实现这一目标吗？

谢谢，纳迦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:08:36.850

“未找到数据”可能意味着 proc 在 Oracle 上失败，因此您无法重定向它。如果是行级错误，您可以重定向。

为了跟踪产生故障的 ID，假设它存储在一个变量中，我会将一个红色箭头从数据流组件拖到一个执行脚本任务，然后在这个任务上运行类似 insert into myLogTable values... 并传递标识变量

# iphone - 当应用程序的其余部分处于纵向模式时，在 viewController 上强制界面方向横向

> ID：10316683
> 
> 赞同：1
> 
> 时间：2012-04-25T13:26:36.997
> 
> 标签：iphone, ios5, interface-builder, orientation

大家晚上好！我正在开发一个 Portait 方向的应用程序，如果有一种方法可以让我将仅一个视图的方向更改为剩余的陆地空间，而不会弄乱应用程序的其余部分，那么我正在徘徊。

我试着回来

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
  //return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

但没有运气......在IB中，视图控制器的方向设置为横向但是当我运行应用程序时，它一直以纵向模式出现......还尝试设置

```
[[UIApplication sharedApplication]setStatusBarOrientation:UIInterfaceOrientationLandscapeLeft animated:NO]; 
```

没有运气...

任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:48:21.640

您可以手动设置视图的变换以旋转它。例如，旋转 90 度：

```
view.transform = CGAffineTransformMakeRotation( M_PI / 2 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T14:08:29.317

唯一对我有用的是使用

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

***在我的 ViewController 中并用presentModalViewController***呈现它。这迫使视图保持在横向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T08:42:22.347

```
 [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight]; 
```

写在你的活动中。

# c# - ColorConverter 解析 ScRGB 失败

> ID：10316688
> 
> 赞同：0
> 
> 时间：2012-04-25T13:27:02.217
> 
> 标签：c#, colors, string-conversion

我正在尝试从 Xaml 字符串解析 LinearGradientBrush，没有任何问题我使用[`ColorConverter.ConvertFromString`](http://msdn.microsoft.com/en-us/library/system.windows.media.colorconverter.convertfromstring.aspx)普通文本或 html 颜色转换。

最近我遇到了一些使用 ScRGB 格式["sc#scA, scR, scG, scB"](http://msdn.microsoft.com/en-us/library/ms653055.aspx)从 Adob​​e Illustrator 解析为 Expression Blend 的颜色。这似乎破坏了 ColorConverter，因为结构中的`ScA`值`Color`似乎解析了错误的值；例如 0.2 变成 2 和 0.5 变成 5。

我的代码相当简单：

```
string colorStr = "sc#0.117647059, 0, 0, 0";
Color color = (Color)ColorConverter.ConvertFromString(colorStr);
Console.WriteLine(color.ScA); 
```

输出：1,176471E+08，预期：0,1176471

这是 .NET Framework 中的错误（我在 4）吗？有解决方法吗？有没有人有一个干净的修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:10:19.463

你有文化问题。显然，您生活在世界的某个地方，浮点值中的小数点是逗号而不是句点。但是你的颜色字符串是用句号格式化的。因此，当值转换为浮点数时，它将字符串中的句点视为千位分隔符，而不是小数点。而“0117647059”确实是1,176471e8。

您需要使用 ColorConverter.ConvertFrom() 重载，它接受 CultureInfo 引用。通过 CultureInfo.InvariantCulture。或者以某种方式敲击 Adob​​e 工具，使其生成正确本地化的字符串。

# java - 如何使用 ksoap2 对 sap Web 服务进行身份验证

> ID：10316689
> 
> 赞同：4
> 
> 时间：2012-04-25T13:27:03.233
> 
> 标签：java, android, web-services, sap, ksoap2

我必须连接 SAP Web 服务。这是我的代码，但它警告：

> org.xmlpull.v1.XmlPullParserException：预期：START_TAG { [http://schemas.xmlsoap.org/soap/envelope/](http://schemas.xmlsoap.org/soap/envelope/) }信封（位置：START_TAG @1:7 in java.io.InputStreamReader@40e3fe98）

这是我连接用户名和密码的完整代码。

```
final static String NAMESPACE = "urn:sap-com:document:sap:soap:functions:mc-style";
final static String METHOD_NAME = "ZmblHucremalzemelistesi";
final static String SOAP_ACTION = "";
final static String URL = "http://xxx.xxx.xxx.xxx:1080/sap/bc/srt/wsdl/bndg_4F969242EA785040E10080008D0B0B03/wsdl11/allinone/ws_policy/document?sap-client=010";

private void testWS() {
    // TODO Auto-generated method stub

    SoapObject reSoapObject = new SoapObject(NAMESPACE, METHOD_NAME);
    SoapSerializationEnvelope soaSerializationEnvelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);

    reSoapObject.addProperty("ILgort", "H12");

    soaSerializationEnvelope.setOutputSoapObject(reSoapObject);
    soaSerializationEnvelope.headerOut = new Element[1]; 
    soaSerializationEnvelope.headerOut[0] = buildAuthHeader(); 

    HttpTransportSE httpTransportSE = new HttpTransportSE(URL);

    try {

        httpTransportSE.call(SOAP_ACTION, soaSerializationEnvelope);

        Object response = soaSerializationEnvelope.getResponse();

        tv.setText(response.toString());

    } catch (IOException e) {
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        e.printStackTrace();
    }

}

private Element buildAuthHeader() { 

    Element h = new Element().createElement(NAMESPACE, "AuthHeader"); 
    Element username = new Element().createElement(NAMESPACE, "user"); 
    username.addChild(Node.TEXT, "testuser"); 
    h.addChild(Node.ELEMENT, username); 
    Element pass = new Element().createElement(NAMESPACE, "pass"); 
    pass.addChild(Node.TEXT, "testpwd"); 
    h.addChild(Node.ELEMENT, pass); 

    return h; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:25:25.907

试试这个：

```
final static String NAMESPACE = "urn:sap-com:document:sap:soap:functions:mc-style";
    final static String METHOD_NAME = "ZmblHucremalzemelistesi";
    final static String SOAP_ACTION = "";
    final static String URL = "http://xxx.xxx.xxx.xxx:1080/sap/bc/srt/wsdl/bndg_4F969242EA785040E10080008D0B0B03/wsdl11/allinone/ws_policy/document?sap-client=010";

    private static final String USERNAME = "YOUR_USERNAME";
    private static final String PASSWORD = "YOUR_PASSWORD";

    private void testWS() {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("ILgort", "H12");

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.setOutputSoapObject(request);

        AuthTransportSE androidHttpTransport = new AuthTransportSE(URL, USERNAME, PASSWORD);
        androidHttpTransport.debug = true;

        try {
            androidHttpTransport.call(SOAP_ACTION, envelope);
            SoapObject response = (SoapObject) envelope.getResponse();
            // if it did not work, try this:
            // SoapObject response = (SoapObject) envelope.bodyIn;

            tv.setText(response.toString());

        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

AuthTransportSE 类是：

```
import java.io.IOException;

import org.ksoap2.transport.HttpTransportSE;
import org.ksoap2.transport.ServiceConnection;
import org.ksoap2.transport.ServiceConnectionSE;

public class AuthTransportSE extends HttpTransportSE{
    private String username;
    private String password;

    public AuthTransportSE(String url, String username, String password) {
        super(url);
        this.username = username;
        this.password = password;       
    }

    protected ServiceConnection getServiceConnection() throws IOException {
        ServiceConnection midpConnection = new ServiceConnectionSE(url);
        addBasicAuthentication(midpConnection);
        return midpConnection;
    }

    protected void addBasicAuthentication(ServiceConnection midpConnection) throws IOException {
        if (username != null && password != null) {
            StringBuffer buf = new StringBuffer(username);
            buf.append(':').append(password);
            byte[] raw = buf.toString().getBytes();
            buf.setLength(0);
            buf.append("Basic ");
            org.kobjects.base64.Base64.encode(raw, 0, raw.length, buf);
            midpConnection.setRequestProperty("Authorization", buf.toString());
        }
    }
} 
```

# c++ - 通过 python ctypes 使用时共享库段错误中的 opencv 调用

> ID：10316692
> 
> 赞同：3
> 
> 时间：2012-04-25T13:27:23.640
> 
> 标签：c++, python, gcc, opencv, ctypes

每当我使用 ctypes 将共享库 (.so) 加载到 Python 中并调用其中一个使用 OpenCV 过滤引擎的程序（如 cvErode 或 cvDilate）时，解释器就会在 OpenCV 代码深处发生段错误。如果我在 C 程序中使用 dlopen 加载相同的库并调用相同的过程，一切正常。

我在另一篇文章中读到它可能与 gcc 使用的 ABI 有关，并且 python 必须使用与 python 解释器编译的相同版本的 gcc 编译才能工作。但是在我的情况下，它都是 4.4.5，所以这不应该是一个问题。OpenCV 库也使用相同版本的 gcc 编译。

共享库是如何构建的：

```
g++ -g -shared -lopencv_core -lopencv_imgproc -lopencv_calib3d -lopencv_video -lopencv_features2d -lopencv_ml -lopencv_highgui -lopencv_objdetect -lopencv_contrib -lopencv_legacy -o thumbsplit.so thumbsplit.cpp 
```

共享库的包装方式：

```
extern "C" {

int is_thumbsheet(char * image_path){
    Image image;
    image.read(image_path);
    int width = image.columns();
    int height = image.rows();
    int BOUND_CHANGE = 7000;
    int test_height = 0;

    if( width > height ){
        return 0;
    }else{
        test_height = width;
    }
    vector<int> test_rows = getRows(image, width, test_height, BOUND_CHANGE);
    vector<int> test_cols = getCols(image, width, test_height, BOUND_CHANGE);

    vector<Box> test_boxes = createBoxes(test_rows,test_cols,width,height);
    if( test_boxes.size() > 6 ){
        return 1;
    }else{
        return 0;
    }
}

int cut_thumbs(char * image_path, char * thumb_path){
    Image image;
    image.read(image_path);
    int width = image.columns();
    int height = image.rows();
    int BOUND_CHANGE = 7000;
    vector<int> rows = getRows(image, width, height, BOUND_CHANGE);
    vector<int> cols = getCols(image, width, height, BOUND_CHANGE);

    //drawDebugLines(rows, cols, width, height);

    vector<Box> boxes = createBoxes(rows,cols,width,height);
    //printBoxes(boxes);
    char path[0x100];
    for( int i=0 ; i < boxes.size() ; i++ ){
        sprintf(path, "%s%d.jpg", thumb_path, i);
        boxes[i].saveBox(image, path);
    }

    return 0;
}

} // C 
```

如何在 python 中加载共享库过程：

```
import ctypes, os

def load_lib():
lib_path = "%s/%s"%(os.path.realpath(os.path.dirname(__file__)), "thumbsplit.so")
lib = ctypes.CDLL(lib_path)
return lib

def is_thumbsheet(image_path):

lib = load_lib()
if lib.is_thumbsheet(image_path):
    return True
else:
    return False

def cut_thumbs(image_path, thumbs_path):

lib = load_lib()
lib.cut_thumbs(image_path, thumbs_path)

is_thumbsheet("/home/rolf/test/imageproc/full9.jpg") # this segfaults 
```

GDB 输出：

```
$ gdb python
GNU gdb (GDB) 7.0.1-debian
Copyright (C) 2009 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i486-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /usr/bin/python...(no debugging symbols found)...done.
(gdb) run thumbsheet.py
Starting program: /usr/bin/python thumbsheet.py
[Thread debugging using libthread_db enabled]
0xb6330a12

Program received signal SIGSEGV, Segmentation fault.
0xb76fe2dc in cv::FilterEngine::start(cv::Size_<int>, cv::Rect_<int>, int) () from /usr/local/lib/libopencv_imgproc.so.2.3
(gdb) info stack
#0  0xb76fe2dc in cv::FilterEngine::start(cv::Size_<int>, cv::Rect_<int>, int) () from /usr/local/lib/libopencv_imgproc.so.2.3
#1  0xb76feb41 in cv::FilterEngine::start(cv::Mat const&, cv::Rect_<int> const&, bool, int) ()
   from /usr/local/lib/libopencv_imgproc.so.2.3
#2  0xb770a52b in cv::FilterEngine::apply(cv::Mat const&, cv::Mat&, cv::Rect_<int> const&, cv::Point_<int>, bool) ()
   from /usr/local/lib/libopencv_imgproc.so.2.3
#3  0xb764bf8a in cv::morphOp(int, cv::_InputArray const&, cv::_OutputArray const&, cv::_InputArray const&, cv::Point_<int>, int, int, cv::Scalar_<double> const&) () from /usr/local/lib/libopencv_imgproc.so.2.3
#4  0xb764d2ce in cv::erode(cv::_InputArray const&, cv::_OutputArray const&, cv::_InputArray const&, cv::Point_<int>, int, int, cv::Scalar_<double> const&) () from /usr/local/lib/libopencv_imgproc.so.2.3
#5  0xb764d62e in cvErode () from /usr/local/lib/libopencv_imgproc.so.2.3
#6  0xb7fd7adb in seperate::findSeperatedBoxes (img=0x8351d70) at seperate.cpp:189
#7  0xb7fd7fcf in seperate::trySeperatedBoxes (img=0x8351d70, percentage_boxed=0xbfffefec) at seperate.cpp:202
#8  0xb7fda00c in is_thumbsheet (image_path=0xb7c1bf74 "/home/rolf/test/imageproc/full9.jpg") at thumbsplit.cpp:39
#9  0xb7a047df in ffi_call_SYSV () from /usr/lib/python2.6/lib-dynload/_ctypes.so
#10 0xb7a0461e in ffi_call () from /usr/lib/python2.6/lib-dynload/_ctypes.so
#11 0xb79ff27d in _CallProc () from /usr/lib/python2.6/lib-dynload/_ctypes.so
#12 0xb79f6d7e in ?? () from /usr/lib/python2.6/lib-dynload/_ctypes.so
#13 0x0806232a in PyObject_Call ()
#14 0x080e016b in PyEval_EvalFrameEx ()
#15 0x080e18b0 in PyEval_EvalFrameEx ()
#16 0x080e2507 in PyEval_EvalCodeEx ()
#17 0x080e2607 in PyEval_EvalCode ()
#18 0x080ffcbd in PyRun_FileExFlags ()
#19 0x080fff22 in PyRun_SimpleFileExFlags ()
#20 0x0805dd81 in Py_Main ()
#21 0x0805cf6b in main ()
(gdb) x/i 0xb76fe2dc
0xb76fe2dc <_ZN2cv12FilterEngine5startENS_5Size_IiEENS_5Rect_IiEEi+1212>:   movdqa %xmm3,0x30(%esp)
(gdb) 
```

GCC/G++ 版本：

```
$ python
Python 2.6.6 (r266:84292, Dec 27 2010, 00:02:40) 
[GCC 4.4.5] on linux2

$ gcc --version
gcc (Debian 4.4.5-8) 4.4.5

$ g++ --version
g++ (Debian 4.4.5-8) 4.4.5 
```

OpenCV 是 2.3.1 版本，是使用这个版本的 gcc (4.4.5-8) 从源代码构建的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:32:45.520

我找到了解决方案。对于 SSE 指令，堆栈需要重新对齐为 16 字节。如果我使用 -mstackrealign 构建共享库，它可以完美地加载并从 python 调用。

[Qt、GCC、SSE 和堆栈对齐](https://stackoverflow.com/questions/2386408/qt-gcc-sse-and-stack-alignment)

# fxcop - 带有 maven 的 Sonar fxcop 插件失败

> ID：10316695
> 
> 赞同：0
> 
> 时间：2012-04-25T13:27:29.480
> 
> 标签：fxcop, sonarqube

我尝试运行 mvn sonar:sonar 并得到以下信息：

[错误] 无法在项目 YamarinArtifactId 上执行目标 org.codehaus.mojo:sonar-maven-plugin:2.0:sonar (default-cli)：无法执行 Sonar：FxCop 执行失败。FxCop 执行失败，返回代码“521”。查看 FxCop 文档以获取更多信息。-> [帮助 1]

有什么想法该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:29:59.910

Thanks, "mvn sonar:sonar -X" showed the location of fxcop log file, which then contained an error (missing .dll)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T05:49:45.010

错误 521 是因为缺少 DLL。您必须 在 sonar-runner（客户端）中设置***sonar.fxcop.assemblyDependencyDirectories属性的值。***

this 的值应该是以逗号分隔的路径模式列表，以定位可以找到依赖程序集的目录。这些路径可以是绝对路径或相对路径，起点是 csproj 文件所在的文件夹。此外，特殊键“$(SolutionDir)”可用于构建相对于解决方案根文件夹的路径（即 sln 文件所在的位置）。查看本页底部的注释以获取更多详细信息。例如：“ `$(SolutionDir)/**/libs" (and not "$(SolutionDir)/**/libs/*.dll`”）

例如：我将值设置为

```
sonar.fxcop.assemblyDependencyDirectories=$(SolutionDir)/**/libs,$(SolutionDir)/**/Debug 
```

事情开始对我有用。:)

# sql - 如何从印度尼西亚字符串中获取日期时间值

> ID：10316699
> 
> 赞同：0
> 
> 时间：2012-04-25T13:27:37.613
> 
> 标签：sql, sql-server

我需要导入从印度尼西亚文件中获得的一些数据，其中一部分是“01OKT2011”形式的日期。我需要能够自动将这些转换为 T-SQL 日期时间，例如 10-01-2011 00:00:00。

我能想到的最简单的方法是创建一个查找表，其中包含一个用于外国短名称的列和一个用于月份编号的列，但由于我目前拥有的唯一源文件这一事实使得这变得更加困难仅涵盖 10 月和 11 月，我不完全确定其他月份将如何缩写。

有没有更简单的方法来做到这一点？SQL Server 中的一种内置语言是否使用相同的月份短名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T21:27:42.243

查看您的`syslanguages`表格以了解您的 SQL Server 安装是否支持印度尼西亚语。

假设 SQL Server 支持印度尼西亚语，请将您的语言设置为它。另外，`SET DATEFORMAT ymd`. 然后直接使用日期时间。

如果不支持/安装印尼语，您应该努力解决数据库之外的本地化问题（即使数据库服务器愿意理解您的月份名称，我实际上还是建议您这样做，但我将该建议保存为完全不同的问题）。

在这种情况下，以下方法可能会帮助您，如果不是实际使用，至少可以帮助您转换数据。

```
DATETIMEFROMPARTS(
    SUBSTRING(x, 6, 4), 
    REPLACE(...(REPLACE(SUBSTRING(x, 3, 3), 'JAN', 'Jan')...,'OKT', 'Oct'),...,'DEC', 'Dec')...),
    SUBSTRING(x, 1, 2)
) 
```

# asp.net - 如何在asp.net mvc3中突出显示母版页的选定选项卡

> ID：10316701
> 
> 赞同：0
> 
> 时间：2012-04-25T13:27:43.380
> 
> 标签：asp.net, asp.net-mvc-3, c#-4.0

我付出了很多努力创建了一个母版页，但我无法弄清楚如何根据用户点击来选择我的选项卡。我使用了一种方法来做到这一点，但发现非常复杂，因为我从每个我不喜欢的控制器传递了一个视图数据，下面是我如何在控制器中完成代码

```
ViewData["ActiveMenu"] = "Inbox"; 
```

在我的母版页中，我编写了一个如下所示的 jquery 来突出显示该选项卡。

```
$('#lnkInbox').mouseout(function () {
            $('#aInbox').removeClass('aInbox-Hover');
            $('#aInbox').addClass('aInbox');

            //put hover effect on the selected menu
            var activeMenu = '<%:ViewData["ActiveMenu"] %>';
            if (activeMenu == "Account") {
                $('#aAccount').removeClass('aAccount');
                $('#aAccount').addClass('aAccount-Hover');

            }}); 
```

这就是我正在做的事情，但有没有其他方法可以做到这一点......

请建议我找到了一个很好的链接[活动菜单项-asp.net mvc3 母版页](https://stackoverflow.com/questions/4728777/active-menu-item-asp-net-mvc3-master-page) ，但是那里显示的答案我无法理解如何在我的代码中使用以及在我的项目中编写代码的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:43:51.090

使用[您找到的答案](https://stackoverflow.com/questions/4728777/active-menu-item-asp-net-mvc3-master-page)。要创建帮助类，请向您的项目添加新类，即像这样

```
public static class LinkHelpers
{
//copy here the first block of code from the answer
} 
```

添加到您的 HomeController 方法（可能您已经拥有它们）：

```
public class HomeController : Controller
{
   public ActionResult About()
   {
     return View()
   }
   public ActionResult Index()
   {
     return View()
   }
} 
```

创建各自的视图并添加到您的母版页

```
<ul>
    <li>@Html.MenuLink("Main", "Index", "Home")</li>
    <li>@Html.MenuLink("About us", "About", "Home")</li>
</ul> 
```

最后在你的css文件中声明

```
.current{background-color:red;} 
```

# java - 在一个文件中索引多个文件

> ID：10316702
> 
> 赞同：1
> 
> 时间：2012-04-25T13:27:44.077
> 
> 标签：java, file

我有一个从纯文本文件中读取的程序。这些文件的数量可以超过500万！

当我阅读它们时，我找到了它们的名字！名称基本上保存为矩阵的 x 和 y，例如 440x300.txt

现在我想把它们都放在一个大文件中并索引它们

我的意思是我现在想将例如 440x300.txt 保存在文件中的哪个字节并以哪个字节结束！

我的第一个想法是创建一个单独的文件并将此信息保存在其中，就像每行包含 440 x 300 150883 173553

但是找到这些信息也需要很多时间！

我想知道这是否是找出它们从哪里开始和结束的更好方法！

以某种方式索引文件

请帮忙

顺便说一句，我正在用 Java 编程。

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:33:49.207

如果您只需要阅读这些文件，我会将它们分批归档。例如使用 ZIP 或 Jar 格式。这支持文件的命名和索引，您可以使用标准工具构建、更新和检查它们。

可以在一个存档中放置 500 万个文件，但使用少量存档可能更易于管理。

顺便说一句：由于文件是文本，因此压缩它们也会使它们变小。您可以自己尝试创建一个包含 1000 个的 ZIP 或 JAR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:35:28.140

如果您希望能够在文件中进行直接寻址，那么您有两种选择：

1.  在文件的开头有一个索引，以便您可以根据 (x, y) 查找开始/结束地址
2.  使所有记录的大小完全相同（以字节为单位），以便您可以轻松计算文件中记录的位置。

应根据以下标准选择正确的选项：

1.  您的矩阵中的每个单元格都有记录吗？
2.  矩阵值会改变吗？
3.  矩阵维度是否改变？
4.  矩阵中的值能否具有固定的字节长度（即它们是数字还是字符串）？

# apache - Apache POI + Jython，Excel 自动调整列大小

> ID：10316703
> 
> 赞同：0
> 
> 时间：2012-04-25T13:27:54.213
> 
> 标签：apache, excel, jython, apache-poi

我尝试过使用 Jython + Apache POI 制作的自动调整 Excel 列的大小。我找到了这个线程：[Apache POI Excel - 如何配置要扩展的列？](https://stackoverflow.com/questions/4611018/apache-poi-excel-how-to-configure-columns-to-be-expanded)，但我还是想不通。

我试过添加'sheet1.autoSizeColumn（1）'，但它没有改变任何东西。在每个可用列上调用它不是更好吗，因为您为什么不希望每列都具有良好的格式？

也许这在 Jython 中是不可能的？

亲切的问候，克里斯托夫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:13:55.227

你什么时候调用 autoSizeColumn 方法？设置数据之前还是之后？

只有在为相关列设置了所有值之后，您才应该调用“sheet.autoSizeColumn(1)”方法。

如果你在它没有任何效果之前调用它，因为它没有任何数据来调整大小。

# c# - 奇怪的 SQL 错误：将 varchar 转换为日期时间导致值超出范围

> ID：10316706
> 
> 赞同：1
> 
> 时间：2012-04-25T13:28:04.987
> 
> 标签：c#, sql-server, datetime, windows-server-2008

在新服务器中安装应用程序后，它会抛出错误：

```
The conversion of a varchar data type to a datetime data type resulted in an 
out-of-range value. 
```

该应用程序在其他服务器上正常工作，所以我对这个问题感到困惑。保存的值是

```
25/4/2012 1:18:01 PM 
```

这是一个 DateTime 类型，已经被保存到 datetime 列中，所以我确信数据库和代码本身没有问题。问题可能完全是因为服务器的设置吗？任何具体原因和解决方案/解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:58:30.400

**您可以为每个连接设置日期时间格式，例如**

设置日期格式 dmy

此方法允许您使用日期格式发送到 d/m/y 的 SQL Server 的日期，但它取决于连接。如果与 SQL Server 建立了新连接，或者如果服务器停止并重新启动，则日期格式将恢复为 m/d/y。

**永久设置格式**

要在服务器上设置语言，您必须使用 sp_addlanguage 添加一种语言。下面的示例设置英国英语的语言并以 DD/MM/YY 格式给出日期。该示例也可以应用于其他国家/地区，但您可能需要修改 sp_addlanguage 的参数。

exec sp_addlanguage 'British', 'English', '一月、二月、三月、四月、五月、六月、七月、八月、九月、十月、十一月、十二月'、'一月、二月、三月、四月、五月、六月、七月,Aug,Sep,Oct,Nov,Dec', 'Monday,Tuesday,Wednesday,Thursday,Friday,Saturday,Sunday', dmy,1 sp_configure 'default language', 1 reconfigure with override

了解更多信息

[http://support.microsoft.com/kb/173907](http://support.microsoft.com/kb/173907)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:55:36.093

防止问题的一种方法。

如果您对包含日期的提要的内容有任何影响，“Day# MonthName 4digityear”就是您想要的格式。无论区域设置如何，sql server 中的启发式算法都不会对“25APR2012”感到困惑。这是一种更健壮的格式。它将毫无困难地穿越海洋。

否则，您必须使用 convert(datetime, TheDateString, CorrectFormatNumber)

我认为 131 可能对你有用。

哦，为了回应一些评论，如果你可以防止这些数据采用字符串的形式，你应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T04:27:05.480

很好的建议，但就我而言，我懒得浏览数千行代码。在安装过程中重新安装sql并设置区域设置是最快且最耗时的方法。

在将日期时间字符串保存到数据库之前解析应用程序上的日期时间字符串是给定的。

设置语言和日期格式仅适用于当前查询，而不适用于每个查询。当然，更新代码上的 sql 查询是浪费时间，imo 和我的情况。

# ios - iOS GLSL。有没有办法使用 GLSL 着色器创建图像直方图？

> ID：10316708
> 
> 赞同：13
> 
> 时间：2012-04-25T13:28:12.693
> 
> 标签：ios, image-processing, glsl, histogram

在 StackOverflow 的其他地方，有人问了一个关于 depthbuffer histogram - [Create depth buffer histogram texture with GLSL](https://stackoverflow.com/questions/5647727/create-depth-buffer-histogram-texture-with-glsl)的问题。

我正在编写一个 iOS 图像处理应用程序，对这个问题很感兴趣，但对提供的答案不清楚。那么，是否可以通过 GLSL 使用 GPU 创建图像直方图？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-27T23:58:56.260

是的，有，尽管它在 iOS 上比你想象的更具挑战性。这是一个完全在 GPU 上生成和绘制的红色直方图，针对实时视频源运行：

![GPU红色直方图](../Images/f1c890267cb1764dfcccbf0c0034b43d.png)

[汤米](https://stackoverflow.com/a/5647931/19679)在您链接的问题中的建议是一个很好的起点，[Scheuermann 和 Hensley 的这篇论文](http://www.shaderwrangler.com/publications/histogram/histogram_cameraready.pdf)也是如此。建议使用散射为图像中的颜色通道建立直方图。散射是一个过程，您将点网格传递给顶点着色器，然后让该着色器读取该点的颜色。然后将该点所需颜色通道的值写为 X 坐标（Y 和 Z 坐标为 0）。然后，您的片段着色器在目标中的该坐标处绘制一个半透明的 1 像素宽的点。

该目标是一个 1 像素高、256 像素宽的图像，每个宽度位置代表一个颜色箱。通过写出具有低 Alpha 通道（或低 RGB 值）的点，然后使用加法混合，您可以根据特定颜色值在图像中出现的次数为每个 bin 累积更高的值。然后可以读取这些直方图像素以供以后处理。

在 iOS 上的着色器中执行此操作的主要问题是，尽管[有相反的报道](https://stackoverflow.com/a/6754705/19679)，Apple 明确指出顶点着色器中的纹理读取在 iOS 上不起作用。我在我所有的 iOS 5.0 设备上都试过这个，但没有一个能够在顶点着色器中执行纹理读取（屏幕只是变黑，没有抛出 GL 错误）。

为了解决这个问题，我发现我可以读取输入图像的原始像素（通过`glReadPixels()`或[更快的纹理缓存](https://stackoverflow.com/a/9704392/19679)）并将这些字节作为 GL_UNSIGNED_BYTE 类型的顶点数据传递。下面的代码实现了这一点：

```
glReadPixels(0, 0, inputTextureSize.width, inputTextureSize.height, GL_RGBA, GL_UNSIGNED_BYTE, vertexSamplingCoordinates);

[self setFilterFBO];

[filterProgram use];

glClearColor(0.0, 0.0, 0.0, 1.0);
glClear(GL_COLOR_BUFFER_BIT);

glBlendEquation(GL_FUNC_ADD);
glBlendFunc(GL_ONE, GL_ONE);
glEnable(GL_BLEND);

glVertexAttribPointer(filterPositionAttribute, 4, GL_UNSIGNED_BYTE, 0, (_downsamplingFactor - 1) * 4, vertexSamplingCoordinates);
glDrawArrays(GL_POINTS, 0, inputTextureSize.width * inputTextureSize.height / (CGFloat)_downsamplingFactor);

glDisable(GL_BLEND); 
```

在上面的代码中，您会注意到我使用一个步幅仅对图像像素的一小部分进行采样。这是因为您可以写出的最低不透明度或灰度级别是 1/256，这意味着一旦该图像中超过 255 个像素具有该颜色值，每个 bin 就会被最大化。因此，我不得不减少处理的像素数，以便将直方图的范围带入这个有限的窗口。我正在寻找一种方法来扩展这个动态范围。

用于执行此操作的着色器如下，从顶点着色器开始：

```
 attribute vec4 position;

 void main()
 {
     gl_Position = vec4(-1.0 + (position.x * 0.0078125), 0.0, 0.0, 1.0);
     gl_PointSize = 1.0;
 } 
```

并使用片段着色器完成：

```
 uniform highp float scalingFactor;

 void main()
 {
     gl_FragColor = vec4(scalingFactor);
 } 
```

可以在我的开源[GPUImage](https://github.com/BradLarson/GPUImage)框架中找到它的工作实现。抓取并运行 FilterShowcase 示例以查看直方图分析和自己的绘图。

此实现存在一些性能问题，但这是我能想到的在 iOS 上在 GPU 上执行此操作的唯一方法。我愿意接受其他建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:38:11.777

是的。这显然不是最好的方法，但它确实是 iOS 中最好的方法，因为不支持 OpenCL。您将失去优雅，您的代码可能不会那么简单，但几乎所有 OpenCL 功能都可以通过着色器实现。

如果有帮助，DirectX11 附带了一个用于计算着色器的 FFT 示例。请参阅 DX11 八月 SDK 发行说明。

# .net - RDLC我怎样才能使文本证明？

> ID：10316713
> 
> 赞同：6
> 
> 时间：2012-04-25T13:28:32.770
> 
> 标签：.net, rdlc

我在一个 Windows 应用程序中工作，我希望在我的 RDLC 报告中的文本是合理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-07T00:06:50.700

我做了一个函数来转换字符串列表中的文本。您可以使用不带标题的表格将其显示为合理的段落。

```
 public static List<string> GetText(string text, int width)
    {
        string[] palabras = text.Split(' ');
        StringBuilder sb1 = new StringBuilder();
        StringBuilder sb2 = new StringBuilder();
        int length = palabras.Length;
        List<string> resultado = new List<string>();
        for (int i = 0; i < length; i++)
        {
            sb1.AppendFormat("{0} ", palabras[i]);
            if (sb1.ToString().Length > width)
            {
                resultado.Add(sb2.ToString());
                sb1 = new StringBuilder();
                sb2 = new StringBuilder();
                i--;
            }
            else
            {
                sb2.AppendFormat("{0} ", palabras[i]);
            }
        }
        resultado.Add(sb2.ToString());

        List<string> resultado2 = new List<string>();
        string temp;

        int index1, index2, salto;
        string target;
        int limite = resultado.Count;
        foreach (var item in resultado)
        {
            target = " ";
            temp = item.ToString().Trim();
            index1 = 0; index2 = 0; salto = 2;

            if (limite <= 1)
            {
                resultado2.Add(temp);
                break;
            }
            while (temp.Length <= width)
            {
                if (temp.IndexOf(target, index2) < 0)
                {
                    index1 = 0; index2 = 0;
                    target = target + " ";
                    salto++;
                }
                index1 = temp.IndexOf(target, index2);
                temp = temp.Insert(temp.IndexOf(target, index2), " ");
                index2 = index1 + salto;

            }
            limite--;
            resultado2.Add(temp);
        }
        return resultado2;
    } 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:45:05.257

抱歉不行。请参阅下面的讨论。

[http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/28edb302-da0c-4097-a100-8f74dfbd7366](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/28edb302-da0c-4097-a100-8f74dfbd7366)

[http://social.msdn.microsoft.com/Forums/is/sqlreportingservices/thread/ecf375d1-7991-4e07-9180-ddbcc2bffd55](http://social.msdn.microsoft.com/Forums/is/sqlreportingservices/thread/ecf375d1-7991-4e07-9180-ddbcc2bffd55)

# html - 电子邮件中的 HTML 格式

> ID：10316715
> 
> 赞同：4
> 
> 时间：2012-04-25T13:28:47.823
> 
> 标签：html, email

我创建了一个带有文本框和单选按钮等的 html 表单。我可以将表格通过电子邮件发送到电子邮件地址。

现在的问题是，当我填写表格并单击回复时，我只得到我的空白 html 表单，文本框内没有留下任何值。

请帮忙

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T05:35:16.300

我们为我们的一个客户对电子邮件中的 HTML 表单做了一些相当广泛的研究。最重要的是它几乎无法正常工作，因此最好在浏览器中链接到表单。这是包含我们结果的文章（和图表）：

[http://www.flitehaus.com/blog/2011-06-20-can-i-include-form-email](http://www.flitehaus.com/blog/2011-06-20-can-i-include-form-email)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T13:54:52.100

Quentin 所说的站得住脚，许多电子邮件客户端（咳嗽、Outlook）在支持 HTML 电子邮件方面非常具体。事实上，大多数甚至不支持 div 或嵌入`<style>`块。更不用说 HTML 表单了。

最好的办法是使用他们点击的 URL，然后打开一个表格供他们填写。如果您需要自动捕获他们的一些信息（例如电子邮件）。您可以生成查询字符串并在您的邮件中动态添加信息。

IE;`<a href="http://awesomeform.com/form.php?email=$client_email">`

在电子邮件中，它看起来像：`http://awesomeform.com/form.php?email=myemail@email.com`

### 无论哪种方式

如果您坚持尝试这样做，请使用电子邮件样板来帮助您入门。它有大量的“最佳实践”和内置的提示/技巧。

[http://htmlemailboilerplate.com/](http://htmlemailboilerplate.com/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-25T13:31:03.960

复杂的 HTML 不会与许多电子邮件客户端混合使用。表单的支持尤其差。

而是链接到通过 HTTP 可用的 HTML 文档。人们可以单击链接并在常规网络浏览器中打开它。

# sql - 在接下来的 14 天内具有 1 天或多天长度的事件列表

> ID：10316718
> 
> 赞同：0
> 
> 时间：2012-04-25T13:28:52.957
> 
> 标签：sql, date

我有一个使用 php/mysql 创建的事件列表，它显示未来 14 天内即将发生的事件。数据库有 8 个字段

```
event_ID,
date_1,
date_2,
eventTitle,
eventDetails,
location,
publish,
updated. 
```

我已经使用这个 sql 语句创建了一个列表

```
SELECT gpe.*, gpr.name 
FROM growl_presevents gpe, growl_presrail gpr 
WHERE gpe.location LIKE gpr.railID AND (date_1 >= '$today' AND date_1 <= '$week') 
AND gpe.publish = 'y' 
ORDER BY date_1 ASC 
```

数组由这些语句填充

```
$today = date('Y-m-d');                     /// Todays date

$week = date('Y-m-d', time() + (86400*14)); /// Todays date + 14 days 
```

该列表很好，但我需要进行调整，以便在事件持续超过一天时显示事件，并且 date_1 在 14 天期限之外。

例如（只是示例数据不是实际的）

如果今天是 2012-02-01

```
date_1      date_2      location   Title         details

2012-02-07  NULL        Loc001     Show          Stage show

2012-02-13  2012-02-18  Loc002     Open Air      Festival

2012-02-17  NULL        Loc001     Comedy        Comedy Show 
```

使用我上面的 SQL 查询，前两个日期将显示 '$today'，在 '3rd' 将显示所有三个日期，然后在 '8th' 第一行将消失。到目前为止一切正常，但这是我需要帮助的地方。在第 14 行第 2 行使用此查询会消失，但该事件一直持续到 18 日，因此我希望它仍然显示到 18 日。

可能有一种简单的方法可以做到这一点，但我无法理解它，所以任何帮助将不胜感激。

谢谢

菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:46:18.160

试试这个

```
SELECT gpe.*, gpr.name  
FROM growl_presevents gpe, growl_presrail gpr  
WHERE gpe.location LIKE gpr.railID 
AND (
    (date_1 >= '$today' AND date_1 <= '$week')
    OR (ISNULL(date_2,0) >= '$today' AND ISNULL(date_2,0) <= '$week')
    )  
AND gpe.publish = 'y'  
ORDER BY date_1 ASC 
```

因此，基本上对 date_2 进行与对 date_1 相同的检查作为 OR。如果找到 NULL 日期，则使用 ISNULL 提供 0。

# ajax - 将 ajax 请求的结果作为变量检索

> ID：10316720
> 
> 赞同：0
> 
> 时间：2012-04-25T13:29:03.727
> 
> 标签：ajax, variables

如何将 ajax 发布的结果放入变量中：

```
function decode_original(hshdecode) {   
    var decode_original = 'decode=1&hashvalue=kjh4k5hq35l&hashkey=12345';
    $.ajax({
            type: "POST",
            async: false,
            contentType: "application/x-www-form-urlencoded; charset=utf-8",
            url: 'decode_function.php',
            data: decode_original,
            cache: false,
            success: function(return_value) {
                    var decoded_value = return_value;
                    console.log("Decoded Value:" +decoded_value);   
                    return decoded_value;
            },
            error: function(data){
                    return data;
            }
        });     
} 
```

上面实际上成功获取了返回值，但是我无法将结果传递给变量：

```
var decode_value = decode_original(encoded_value);
        alert(decode_value); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:32:15.550

使用**responseText**像：

```
success: function(return_value) {
                    var decoded_value = return_value.responseText;
                    console.log("Decoded Value:" +decoded_value);   
                    return decoded_value;
            } 
```

# unit-testing - RavenDb：在单元测试时强制索引等到不陈旧

> ID：10316721
> 
> 赞同：25
> 
> 时间：2012-04-25T13:29:06.310
> 
> 标签：unit-testing, ravendb

使用 RavenDb 进行单元测试时，通常会检索或处理*新添加的数据。*这可能导致“过时索引”异常，例如

```
Bulk operation cancelled because the index is stale and allowStale is false 
```

根据许多答案

*   [在测试过程中应该如何处理陈旧的索引？](https://stackoverflow.com/questions/9058910/how-should-stale-indexes-be-handled-during-testing)
*   [每个 DocumentStore 的 WaitForNonStaleResults](https://stackoverflow.com/questions/8554650/waitfornonstaleresults-per-documentstore)
*   [RavenDb ：更新非规范化引用属性值](https://stackoverflow.com/questions/10298390/ravendb-update-a-denormalized-reference-property-value)

在处理查询或批处理操作之前强制数据库（`IDocumentStore`实例）等到其索引不陈旧的方法是`DefaultQueryingConsistency = ConsistencyOptions.QueryYourWrites`在`IDocumentStore`初始化期间使用，如下所示：

```
public class InMemoryRavenSessionProvider : IRavenSessionProvider
{
    private static IDocumentStore documentStore;

    public static IDocumentStore DocumentStore
    {
        get { return (documentStore ?? (documentStore = CreateDocumentStore())); }
    }

    private static IDocumentStore CreateDocumentStore()
    {
        var store = new EmbeddableDocumentStore
        {
            RunInMemory = true,
            Conventions = new DocumentConvention
            {
                DefaultQueryingConsistency = ConsistencyOptions.QueryYourWrites,
                IdentityPartsSeparator = "-"
            }
        };
        store.Initialize();
        IndexCreation.CreateIndexes(typeof (RavenIndexes).Assembly, store);
        return store;
    }

    public IDocumentSession GetSession()
    {
        return DocumentStore.OpenSession();
    }
} 
```

不幸的是，上面的代码不起作用。我仍然收到有关过时索引的例外情况。这些可以通过放入包含`.Customize(x => x.WaitForNonStaleResultsAsOfLastWrite())`.

这很好，只要这些可以包含在单元测试中，但如果不能呢？我发现这些`WaitForNonStaleResults*`调用正在潜入生产代码，只是为了让单元测试通过。

那么，是否有一种可靠的方法，使用最新版本的 RavenDb，在允许处理命令之前强制索引更新 - 仅用于单元测试的目的？

**编辑 1**

这是基于下面给出的答案的解决方案，该解决方案强制等待索引不陈旧。为了单元测试的方便，我把它写成一个扩展方法；

```
public static class IDocumentSessionExt
{
    public static void ClearStaleIndexes(this IDocumentSession db)
    {
        while (db.Advanced.DatabaseCommands.GetStatistics().StaleIndexes.Length != 0)
        {
            Thread.Sleep(10);
        }
    }
} 
```

这是一个使用详细`WaitForNonStaleResultsAsOfLastWrite`技术但现在使用更整洁的扩展方法的单元测试。

```
[Fact]
public void Should_return_list_of_Relationships_for_given_mentor()
{
    using (var db = Fake.Db())
    {
        var mentorId = Fake.Mentor(db).Id;
        Fake.Relationship(db, mentorId, Fake.Mentee(db).Id);
        Fake.Relationship(db, mentorId, Fake.Mentee(db).Id);
        Fake.Relationship(db, Fake.Mentor(db).Id, Fake.Mentee(db).Id);

        //db.Query<Relationship>()
        //  .Customize(x => x.WaitForNonStaleResultsAsOfLastWrite())
        //  .Count()
        //  .ShouldBe(3);

        db.ClearStaleIndexes();
        db.Query<Relationship>().Count().ShouldBe(3);
        MentorService.GetRelationships(db, mentorId).Count.ShouldBe(2);
    }
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-25T13:57:07.837

如果您有 Map/Reduce 索引，`DefaultQueryingConsistency = ConsistencyOptions.QueryYourWrites`则无法使用。您需要使用另一种方法。

在您的单元测试中，在您插入任何数据之后立即调用这样的代码，这将强制**所有**索引在您执行任何其他操作之前更新：

```
while (documentStore.DatabaseCommands.GetStatistics().StaleIndexes.Length != 0)
{
    Thread.Sleep(10);
} 
```

**更新**如果您愿意，您当然可以将其放入扩展方法中：

```
public static class IDocumentSessionExt
{
    public static void ClearStaleIndexes(this IDocumentSession db)
    {
        while (db.Advanced.DatabaseCommands.GetStatistics().StaleIndexes.Length != 0)
        {
            Thread.Sleep(10);
        }
    }
} 
```

然后你可以说：

```
db.ClearStaleIndexes(); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-25T14:27:57.063

您实际上可以在 DocumentStore 上添加一个查询侦听器来等待非陈旧的结果。这可以仅用于单元测试，因为它在文档存储中，而不是每个操作。

```
// Initialise the Store.
var documentStore = new EmbeddableDocumentStore
                {
                    RunInMemory = true
                };
documentStore.Initialize();

// Force queries to wait for indexes to catch up. Unit Testing only :P
documentStore.RegisterListener(new NoStaleQueriesListener());

....

#region Nested type: NoStaleQueriesListener

public class NoStaleQueriesListener : IDocumentQueryListener
{
    #region Implementation of IDocumentQueryListener

    public void BeforeQueryExecuted(IDocumentQueryCustomization queryCustomization)
    {
        queryCustomization.WaitForNonStaleResults();
    }

    #endregion
}

#endregion 
```

（无耻从[RavenDB偷来的怎么刷机？](https://stackoverflow.com/questions/9181204/ravendb-how-to-flush)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-31T11:02:00.883

请注意，StaleIndexes 还包括废弃和禁用的索引——它们永远不会更新。

因此，为避免无限等待，请改用此属性：

```
 var staleIndices = store.DatabaseCommands.GetStatistics().CountOfStaleIndexesExcludingDisabledAndAbandoned; 
```

# php - 在 mysql 表显示中显示是或否值的图像

> ID：10316723
> 
> 赞同：0
> 
> 时间：2012-04-25T13:29:10.693
> 
> 标签：php, mysql

我有一个表，其中一个值为是或否。我希望根据该值由图像表示的值。表格也使用分页，并且正在使用代码来交替行颜色。代码：

```
<?php 

$sql = "SELECT * FROM txmit ORDER BY id ASC LIMIT $start_from, 25";

$rs_result = mysql_query ($sql);
$num_rows = mysql_num_rows($rs_result);
$query = mysql_query("SELECT * FROM txmit"); 
$number=mysql_num_rows($query);

`while($rows=mysql_fetch_array($rs_result)){

// If $color==1 table row color = #747E80
if($color==1){
echo "<tr bgcolor='#DBDBDB'>
<td>.$rows['pid']."</td><td>".$rows['sent']."</td></tr> 
?> 
```

$rows['sent'] 是 Yes 或 No 值...我如何让它根据 Yes 或 No 值显示图像。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:32:29.943

你可以这样做：

```
echo "<img src=img/" . $rows['sent'] == 'Yes' ? 'yes.png' : 'no.png' . ">"; 
```

如果他们真的很公正`Yes`，`No`你也可以使用：

```
echo "<img src=img/" . $rows['sent'] . ".png>"; // Yes.png or No.png 
```

如果图像路径变得更长一点，我会同意 Blazemonger 的评论并使其更具可读性：

```
echo '<img src=very/long/image/path/';

if($rows['sent'] == 'Yes') {
    echo 'yes.png >';
} else {
    echo 'no.png >';
} 
```

# css - div 仅在一侧溢出？

> ID：10316727
> 
> 赞同：3
> 
> 时间：2012-04-25T13:29:22.023
> 
> 标签：css, html, overflow

是否可以仅在一侧使 div 溢出？

因此，图像可以从父 div 的右侧流出，但不能从下方、上方或右侧流出。

或者我是否必须在我不想显示内容的区域上方浮动 div？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:32:09.990

据我了解，您可能必须使用`overflow-x`&`overflow-y`您想要的属性：

```
div{
 overflow-x:hidden;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:33:53.700

CSS3 有`overflow-x`and `overflow-y`，所以你可以分别指定水平和垂直方向的溢出，但不能只指定右边。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:34:59.263

如果将图像向左对齐，则它永远不会溢出到那一侧。那么你所要做的就是

```
div{
 overflow-y:hidden;
} 
```

这将防止在顶部和底部方向上溢出。

# oauth - 在客户端存储 accessToken 是一种好习惯吗？

> ID：10316729
> 
> 赞同：1
> 
> 时间：2012-04-25T13:29:26.027
> 
> 标签：oauth, access-token

对于通过后端 API 为每个数据调用后端的网站

后端首先通过其身份验证处理程序传递一个 accessToken，或者也可以使用 OAuth 传递 accesstoken

我想知道将 accessToken 存储为简单的 Javascript var 并且只对后端进行 Ajax 调用是否安全或不好的做法

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:23:37.870

您可以这样做，但要确保 accessToken 是短暂的。几个小时最好。

# django - ModelChoiceField：仅获取在另一个对象中用作外键的对象

> ID：10316735
> 
> 赞同：0
> 
> 时间：2012-04-25T13:29:36.437
> 
> 标签：django, django-queryset

我有两节课：

```
class Nationality(Model):
    name = models.Charfield()

class Person(Model):
    name = models.Charfield()
    nationality = ForeignKey("Nationality") 
```

我想以`ModelChoiceField`完全不同的形式仅显示那些在表中用作外键的国籍`Person`。实际上还有更多，但我只对那些用作现有`Person`.

这*不起作用*，因为它返回一个带有字段名和引用主键的字典。

```
Person.objects.values('nationality') 
```

我希望`Nationality`返回对象，以便能够引用它的`name`属性。

我不想使用原始 SQL，因为我的模型因多语言模块而更加复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:36:15.247

您可以使用注释来过滤那些至少有一个人的国籍。

```
from django.db.models import Count
Nationality.objects.annotate(person_count=Count('person')).filter(person_count__gte=1) 
```

# macos - 带有弹出框的 NSStatusItem

> ID：10316736
> 
> 赞同：1
> 
> 时间：2012-04-25T13:29:36.937
> 
> 标签：macos, view, statusbar, popover, nsstatusitem

我正在尝试制作一个状态栏应用程序，但我遇到了一些问题。单击状态项后，如何显示带有自定义视图的弹出框？示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:58:40.013

查看[弹出窗口](https://github.com/shpakovski/Popup)。这是一个开源项目，您可以在其中通过运行和剖析它来了解如何做到这一点。

# android - 检测 ScrollView 的结束

> ID：10316743
> 
> 赞同：88
> 
> 时间：2012-04-25T13:30:04.857
> 
> 标签：android, android-scrollview

我有一个应用程序，它有一个使用`ScrollView`. 我需要检测用户何时到达`ScrollView`. 我做了一些谷歌搜索，发现[这个页面](http://marteinn.se/blog/android-determinate-when-scrollview-has-reached-the-bottom/)有解释。但是，在示例中，那些家伙扩展了`ScrollView`. 正如我所说，我需要扩展 Activity。

所以，我说“好吧，让我们尝试做一个自定义类扩展`ScrollView`，重写`onScrollChanged()`方法，检测滚动的结束，并采取相应的行动”。

我做到了，但在这一行：

```
scroll = (ScrollViewExt) findViewById(R.id.scrollView1); 
```

它抛出一个 `java.lang.ClassCastException`. 我更改了`<ScrollView>`XML 中的标签，但显然它不起作用。我的问题是：如果`ScrollViewExt`extends `ScrollView`，为什么会扔到我脸上`ClassCastException`？有什么方法可以检测滚动结束而不会弄乱太多？

谢谢大家。

编辑：正如所承诺的，这是我的 XML 的一部分：

```
<ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <WebView
            android:id="@+id/textterms"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:gravity="center_horizontal"
            android:textColor="@android:color/black" />

    </ScrollView> 
```

我将其从 更改`TextView`为`WebView`能够证明里面的文字是正确的。我想要实现的是“在完全阅读合同条款之前不会激活接受按钮”的事情。我的扩展类称为`ScrollViewEx`t。如果我更改它的标签`ScrollView`，`ScrollViewExt`它会抛出一个

```
android.view.InflateException: Binary XML file line #44: Error inflating class ScrollViewExt 
```

因为它不理解标签`ScrollViewEx`。我不认为它有解决方案...

感谢您的回答！

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-04-26T13:23:06.200

做到了！

除了 Alexandre 为我提供的修复之外，我还必须创建一个接口：

```
public interface ScrollViewListener {
    void onScrollChanged(ScrollViewExt scrollView, 
                         int x, int y, int oldx, int oldy);
} 
```

然后，我必须在 ScrollViewExt 中覆盖 ScrollView 的 OnScrollChanged 方法：

```
public class ScrollViewExt extends ScrollView {
    private ScrollViewListener scrollViewListener = null;
    public ScrollViewExt(Context context) {
        super(context);
    }

    public ScrollViewExt(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public ScrollViewExt(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public void setScrollViewListener(ScrollViewListener scrollViewListener) {
        this.scrollViewListener = scrollViewListener;
    }

    @Override
    protected void onScrollChanged(int l, int t, int oldl, int oldt) {
        super.onScrollChanged(l, t, oldl, oldt);
        if (scrollViewListener != null) {
            scrollViewListener.onScrollChanged(this, l, t, oldl, oldt);
        }
    }
} 
```

现在，正如 Alexandre 所说，将包名放在 XML 标签中（我的错），让我的 Activity 类实现之前创建的接口，然后，将它们放在一起：

```
scroll = (ScrollViewExt) findViewById(R.id.scrollView1);
scroll.setScrollViewListener(this); 
```

而在 OnScrollChanged 方法中，从界面...

```
@Override
public void onScrollChanged(ScrollViewExt scrollView, int x, int y, int oldx, int oldy) {
    // We take the last son in the scrollview
    View view = (View) scrollView.getChildAt(scrollView.getChildCount() - 1);
    int diff = (view.getBottom() - (scrollView.getHeight() + scrollView.getScrollY()));

    // if diff is zero, then the bottom has been reached
    if (diff == 0) {
        // do stuff
    }
} 
```

它奏效了！

非常感谢您的帮助，亚历山大！

* * *

## 回答 #2

> 赞同：96
> 
> 时间：2016-12-14T10:00:50.550

我找到了一种简单的检测方法：

```
 scrollView.getViewTreeObserver()
       .addOnScrollChangedListener(new ViewTreeObserver.OnScrollChangedListener() {
            @Override
            public void onScrollChanged() {
                if (scrollView.getChildAt(0).getBottom()
                     <= (scrollView.getHeight() + scrollView.getScrollY())) {
                    //scroll view is at bottom
                } else {
                    //scroll view is not at bottom
                }
            }
        }); 
```

*   不需要自定义 ScrollView。
*   Scrollview 只能承载一个直接子级，所以**scrollView.getChildAt(0)**是可以的。
*   即使滚动视图的直接子项的高度为**match_parent**或**wrap_content** ，此解决方案也是正确的。

* * *

## 回答 #3

> 赞同：79
> 
> 时间：2018-02-08T19:58:30.090

所有这些答案都非常复杂，但是有一个简单的内置方法可以做到这一点：[`canScrollVertically(int)`](https://developer.android.com/reference/android/view/View.html#canScrollVertically(int))

例如：

```
@Override
public void onScrollChanged() {
    if (!scrollView.canScrollVertically(1)) {
        // bottom of scroll view
    }
    if (!scrollView.canScrollVertically(-1)) {
        // top of scroll view
    }
} 
```

这也适用于 RecyclerView、ListView 以及实际上任何其他视图，因为该方法是在`View`.

如果你有一个水平的 ScrollView，同样可以用[`canScrollHorizontally(int)`](https://developer.android.com/reference/android/view/View.html#canScrollHorizontally(int))

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2015-09-17T04:08:20.140

Fustigador 的回答很好，但我发现某些设备（如三星 Galaxy Note V）无法达到 0，计算后还剩 2 分。我建议添加一个小缓冲区，如下所示：

```
@Override
public void onScrollChanged(ScrollViewExt scrollView, int x, int y, int oldx, int oldy) {
    // We take the last son in the scrollview
    View view = (View) scrollView.getChildAt(scrollView.getChildCount() - 1);
    int diff = (view.getBottom() - (scrollView.getHeight() + scrollView.getScrollY()));

    // if diff is zero, then the bottom has been reached
    if (diff <= 10) {
        // do stuff
    }
} 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2018-10-12T08:25:35.073

```
scrollView = (ScrollView) findViewById(R.id.scrollView);

    scrollView.getViewTreeObserver()
            .addOnScrollChangedListener(new 
            ViewTreeObserver.OnScrollChangedListener() {
                @Override
                public void onScrollChanged() {

                    if (!scrollView.canScrollVertically(1)) {
                        // bottom of scroll view
                    }
                    if (!scrollView.canScrollVertically(-1)) {
                        // top of scroll view

                    }
                }
            }); 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2012-04-25T13:41:03.010

**编辑**

通过您的 XML 内容，我可以看到您使用的是 ScrollView。如果您想使用自定义视图，您必须编写 com.your.packagename.ScrollViewExt 并且您将能够在您的代码中使用它。

```
<com.your.packagename.ScrollViewExt
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <WebView
        android:id="@+id/textterms"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center_horizontal"
        android:textColor="@android:color/black" />

</com.your.packagename.ScrollViewExt> 
```

**编辑结束**

你能发布xml内容吗？

我认为您可以简单地添加一个滚动侦听器并检查显示的最后一项是否是列表视图中的最新一项，例如：

```
mListView.setOnScrollListener(new OnScrollListener() {      
    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {
        // TODO Auto-generated method stub      
    }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem,
            int visibleItemCount, int totalItemCount) {
        // TODO Auto-generated method stub
        if(view.getLastVisiblePosition()==(totalItemCount-1)){
            //dosomething
        }
    }
}); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-10-07T02:35:05.003

您可以使用支持库`NestedScrollView`及其`NestedScrollView.OnScrollChangeListener`界面。

[https://developer.android.com/reference/android/support/v4/widget/NestedScrollView.html](https://developer.android.com/reference/android/support/v4/widget/NestedScrollView.html)

或者，如果您的应用程序面向 API 23 或更高版本，您可以在 上使用以下方法`ScrollView`：

```
View.setOnScrollChangeListener(OnScrollChangeListener listener) 
```

然后按照@Fustigador 在他的回答中描述的示例进行操作。但是请注意，正如@Will 所述，您应该考虑添加一个小缓冲区，以防用户或系统由于任何原因无法到达列表的完整底部。

另外值得注意的是，滚动更改侦听器有时会以负值或大于视图高度的值调用。大概这些值代表了滚动动作的“动量”。但是，除非处理得当（地板/绝对），否则当视图滚动到范围的顶部或底部时，它们可能会导致检测滚动方向的问题。

[https://developer.android.com/reference/android/view/View.html#setOnScrollChangeListener(android.view.View.OnScrollChangeListener)](https://developer.android.com/reference/android/view/View.html#setOnScrollChangeListener(android.view.View.OnScrollChangeListener))

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-12-20T17:33:30.733

我们应该始终添加`scrollView.getPaddingBottom()`以匹配完整的滚动视图高度，因为有时滚动视图在 xml 文件中有填充，因此这种情况下它不起作用。

```
scrollView.getViewTreeObserver().addOnScrollChangedListener(new ViewTreeObserver.OnScrollChangedListener() {
        @Override
        public void onScrollChanged() {
            if (scrollView != null) {
               View view = scrollView.getChildAt(scrollView.getChildCount()-1);
               int diff = (view.getBottom()+scrollView.getPaddingBottom()-(scrollView.getHeight()+scrollView.getScrollY()));

          // if diff is zero, then the bottom has been reached
               if (diff == 0) {
               // do stuff
                }
            }
        }
    }); 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-07-07T04:53:33.920

我浏览了互联网上的解决方案。大多数解决方案在我正在从事的项目中不起作用。以下解决方案对我来说很好。

使用 onScrollChangeListener（适用于 API 23）：

```
 if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
        scrollView.setOnScrollChangeListener(new View.OnScrollChangeListener() {
            @Override
            public void onScrollChange(View v, int scrollX, int scrollY, int oldScrollX, int oldScrollY) {

                int bottom =   (scrollView.getChildAt(scrollView.getChildCount() - 1)).getHeight()-scrollView.getHeight()-scrollY;

                if(scrollY==0){
                    //top detected
                }
                if(bottom==0){
                    //bottom detected
                }
            }
        });
    } 
```

在 TreeObserver 上使用 scrollChangeListener

```
 scrollView.getViewTreeObserver().addOnScrollChangedListener(new ViewTreeObserver.OnScrollChangedListener() {
        @Override
        public void onScrollChanged() {
            int bottom =   (scrollView.getChildAt(scrollView.getChildCount() - 1)).getHeight()-scrollView.getHeight()-scrollView.getScrollY();

            if(scrollView.getScrollY()==0){
                //top detected
            }
            if(bottom==0) {
                //bottom detected
            }
        }
    }); 
```

希望这个解决方案有帮助:)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-07-03T13:58:55.240

要确定您是否处于自定义的末尾，您`ScrollView`还可以使用成员变量并存储最后一个 y 位置。然后您可以将最后一个 y 位置与当前滚动位置进行比较。

```
private int scrollViewPos;

...

@Override
public void onScrollChanged(ScrollViewExt scrollView, int x, int y, int oldx, int oldy) {

   //reached end of scrollview
   if (y > 0 && scrollViewPos == y){
      //do something
   }

   scrollViewPos = y;
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-09-22T12:24:57.683

除了一个事实之外，大多数答案都有效**，即当您滚动到底部时，会触发几次侦听器**，这在我的情况下是**不可取**的。为了避免这种行为，我添加了标志*scrollPositionChanged* 来检查滚动位置是否在再次调用方法之前发生了变化。

```
public class EndDetectingScrollView extends ScrollView {
    private boolean scrollPositionChanged = true;

    private ScrollEndingListener scrollEndingListener;

    public interface ScrollEndingListener {
        void onScrolledToEnd();
    }

    @Override
    protected void onScrollChanged(int l, int t, int oldl, int oldt) {
        super.onScrollChanged(l, t, oldl, oldt);

        View view = this.getChildAt(this.getChildCount() - 1);
        int diff = (view.getBottom() - (this.getHeight() + this.getScrollY()));
        if (diff <= 0) {
            if (scrollPositionChanged) {
                scrollPositionChanged = false;
                if (scrollEndingListener != null) {
                    scrollEndingListener.onScrolledToEnd();
                }
            }
        } else {
            scrollPositionChanged = true;
        }
    }

    public void setScrollEndingListener(ScrollEndingListener scrollEndingListener) {
        this.scrollEndingListener = scrollEndingListener;
    }
} 
```

然后只需设置监听器

```
scrollView.setScrollEndingListener(new EndDetectingScrollView.ScrollEndingListener() {
    @Override
    public void onScrolledToEnd() {
        //do your stuff here    
    }
}); 
```

如果你喜欢，你可能会做同样的事情

```
scrollView.getViewTreeObserver().addOnScrollChangedListener(...) 
```

但是您必须从添加此侦听器的类中提供标志。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-07-03T13:50:52.403

我想在滚动视图的最底部显示/隐藏带有偏移量的 FAB。这是我提出的解决方案（Kotlin）：

```
scrollview.viewTreeObserver.addOnScrollChangedListener {
    if (scrollview.scrollY < scrollview.getChildAt(0).bottom - scrollview.height - offset) {
        // fab.hide()
    } else {
        // fab.show()
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-09-08T12:07:46.057

答案很简单：

只需将**OnScrollChangedListener**添加到您的滚动视图（RecyclerView 或 NestedScrollBar 等）并实现**onScrollChanged**方法。例如，如果您使用 NestedScrollView：

```
val nestedScrollView = view.findViewById<NestedScrollView>(R.id.nested_scroll_view_id)
nestedScrollView.viewTreeObserver?.addOnScrollChangedListener {
    if (!nestedScrollView.canScrollVertically(1)) {
        button.isEnabled = true
    }
} 
```

如果您对此有任何问题，请立即告诉我。

# jquery - jQuery datepicker - 如何使用 API 更改月份？

> ID：10316746
> 
> 赞同：1
> 
> 时间：2012-04-25T13:30:10.387
> 
> 标签：jquery, datepicker

我有一个 jquery datepicker 设置。我已经对此进行了自定义，以便在 datepicker div 中，我创建了一个自定义菜单，其中包含几个月的时间，如下所示：

```
 <div class="custom_menu">
    <div class="month">January 2012</div>
    <div class="month">February 2012</div>
    <div class="month">March 2012</div>
    </div> 
```

我想要做的是当用户点击一个月时，我希望日期选择器用该月更新它的视图，例如一些伪代码

```
$('.month').live('click', function(){

var newmonth = $(this).text(); //get the month in a suitable format

$('#current_datpicker').update('month', newmonth); //update the datepicker to show this month

}); 
```

我可以做这样的事情吗，查看 API 文档没有显示任何内容...

**编辑**

我面临的问题是当我在页面上有超过 1 个 datepicker 实例时如何获取 #current_datepicker（即正确的 datepicker id）？当前的日期选择器触发器输入 ID 是否存储在某处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:34:09.223

```
$('#current_datpicker').datepicker("setDate", newmonth + 'm'); 
```

[**资源**](http://jqueryui.com/demos/datepicker/#method-setDate)

虽然`$(this).text()`不会只给你月份，但你需要删除年份：

```
var newmonth = $(this).text().split(" ")[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:35:12.950

您将不得不使用该`.datepicker( "setDate" , date )`方法。我建议当用户点击一个月时，您将日期设置为该月的第一天。

您可以使用`$.data()`jQuery 机制来存储每个日期信息。`div.`例如，您可以`$('#').data('data', new Date('1/1/2012')`按照这些方式做一些事情。

查看[API](http://jqueryui.com/demos/datepicker/#method-setDate)。

# objective-c - 既然同步服务已经过时，那么在 OSX 上同步联系人的可靠替代方案是什么？

> ID：10316748
> 
> 赞同：5
> 
> 时间：2012-04-25T13:30:13.473
> 
> 标签：objective-c, macos, cocoa, contacts, syncservices

自 OSX Lion 以来，同步服务不再更新。也许很快他们就不会再出现了。现在可以使用哪些替代方法来同步联系人？

编辑 - 更多说明：我问这个的上下文是构建一个能够连接到同步服务器（使用 SyncML）的同步应用程序。此同步应用程序（客户端）将安装在 OSX 系统上，并负责查看客户端上哪些联系人已更改（并因此通知服务器）并将更改从服务器应用到客户端。

到目前为止，我们一直在使用同步服务来跟踪更改并将联系人同步到一个集中的位置，但由于 SS 已经过时，我们正在寻找替代方案。希望补充有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T02:45:25.953

我不太确定你在这里追求什么。例如，您是否想在系统范围的通讯录中编辑联系人并将这些编辑传播到其他设备？如果是这样，请使用[地址簿框架](https://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html)并将传播留给 iCloud 的地址簿支持。

您是否要存储（联系）您的应用程序独有的数据并将*其*传播到其他设备？当然听起来[iCloud](https://developer.apple.com/icloud/index.php)也是你所追求的。确实，iCloud 没有让您“跟踪更改”的 API。但是，如果这对您来说很重要，为什么不将它包含在通过 iCloud 传播的数据中呢？还是我误解了您所说的“跟踪更改”是什么意思？

# html - CSS HTML如何使比div更大的图像在div中完整显示

> ID：10316750
> 
> 赞同：1
> 
> 时间：2012-04-25T13:30:18.237
> 
> 标签：html, css

所以我有一个带有背景图像的 div；这个 div 的高度和宽度可以根据 div 的内容/空间大小而增长。

但无论我是否希望背景图像的大小显示为 100%，这是因为背景图像周围有边框，我需要显示这些边框以获得类似按钮的效果。

```
div.leadgen {
  background: url(/Website6/Styles/leadgen_center.png) repeat-x;
  color: #FFF;
  cursor: pointer;
  display: inline-block;
}

<div class="leadgen">
 <h3>
  This is the title
 </h3>        
 This is the description
</div> 
```

编辑

```
#solutionsNav div.leadgen {
background:url(/images/leadGen_bg2.png) no-repeat;
background-size: 100% 100%;  
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/images/leadGen_bg2.png', sizingMethod='scale');
-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/images/leadGen_bg2.png', sizingMethod='scale')";
behavior: url(/scripts/PIE.htc);
padding: 10px;
color: #FFF;
cursor: pointer; 
```

}

这适用于所有浏览器！我唯一需要弄清楚的是在 IE 7 和 8 中我不想使用 background:url(/images/leadGen_bg2.png) no-repeat; 因为它似乎在翻倍。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T13:32:50.003

[`background-size`](https://developer.mozilla.org/en/CSS/background-size)您可以使用自 CSS3 以来可用的 CSS 属性：

```
background-size: 100% 100%; 
```

有关 IE 支持，请参阅[此 StackOverflow 线程](https://stackoverflow.com/questions/2991623/make-background-size-work-in-ie)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:32:45.927

检查一下：[在背景中拉伸和缩放 CSS 图像 - 仅使用 CSS](https://stackoverflow.com/questions/1150163/stretch-and-scale-a-css-image-background-with-css-only)

如果您希望此技术适用于 div 而不是 body，请添加`position: relative;`到 div 的 css。

# c# - 将 Access 数据库添加到 C# dataGridView（仅使用代码）

> ID：10316751
> 
> 赞同：1
> 
> 时间：2012-04-25T13:30:19.647
> 
> 标签：c#, ms-access, datagridview, dataset

我在一个表单上有 2 个 dataGridView，当我运行应用程序时，什么也没有显示。我相信在代码中添加dataGridView信息，如下所示，我不需要使用Visual Studio的“服务器资源管理器”添加数据库。那将是多余的和/或更改 dataGridView 的填充结果，对吗？我的代码中是否缺少某些内容？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.OleDb;

namespace WindowsFormsApplication1
{
  public partial class Form1 : Form
  {
    public Form1()
    {
      InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
      DataSet ds = new DataSet();
      OleDbDataAdapter daOrders = new OleDbDataAdapter();
      OleDbDataAdapter daReceived = new OleDbDataAdapter();
      OleDbConnection vcon = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;data source=C:\Query Form\Database.accdb");    

      OleDbCommand slctOrders = new OleDbCommand("SELECT * FROM script_Orders ORDER BY script");
      daOrders.SelectCommand = slctOrders;
      daOrders.Fill(ds, "tblOrders");

      OleDbCommand slctReceived = new OleDbCommand("SELECT * FROM script_Received");
      daOrders.SelectCommand = slctReceived;
      daOrders.Fill(ds, "tblReceived");

      dgOrders.DataSource = ds.Tables ["tblOrders"];
      dgReceived.DataSource = ds.Tables ["tblReceived"];
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:38:20.317

尝试将连接传递到数据适配器...

```
OleDbCommand slctOrders = new OleDbCommand("SELECT * FROM script_Orders ORDER BY script", vcon); 
```

我不确定这是否就是你所缺少的（你可能还需要打开连接，vcon.Open()），但连接对象和适配器之间必须有一些链接。

# wordpress - 与 codeigniter 应用程序一起使用的功能丰富的 CMS/博客

> ID：10316752
> 
> 赞同：0
> 
> 时间：2012-04-25T13:30:23.017
> 
> 标签：wordpress, codeigniter, drupal, content-management-system

我正在建立一个主要内容是新闻/文章的网站。但它也有其他模块，如工作、列表、用 codeigniter 编写的用户配置文件。

如果只是文章，我会为我的网站选择 wordpress/joomla。所以我的问题是，哪个功能丰富的 CMS/博客系统（Wordpress、Drupal、Joomla 等）易于与 codeigniter 应用程序集成。CMS 将仅用于文章/新闻。

我不想通过在 codeigniter 中编写自己的 CMS 来重新发明整个轮子。想要使用已经可用并随处使用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:59:59.730

您可以使用内置于 codeigniter 的[PyroCMS](http://pyrocms.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:39:32.747

WordPress 将是其中的佼佼者。

可以参考

[http://philpalmieri.com/2009/06/codeigniter-and-wordpress-play-well-together/](http://philpalmieri.com/2009/06/codeigniter-and-wordpress-play-well-together/)

# c# - 使用 c# for asp.net web application 将任何图像大小的图像调整为 400Wx264H

> ID：10316756
> 
> 赞同：1
> 
> 时间：2012-04-25T13:30:41.713
> 
> 标签：c#, asp.net, jcrop, resize-image

我正在设计一个网站，需要将大图像的大小重新调整为 400Wx264H 的尺寸，而不会丢失纵横比。

我研究过不同版本的代码，但都遇到了一个或另一个问题。

现在我将大图像的大小调整为 400W，同时保持纵横比，然后我允许用户使用 jCrop 选择图像的一部分，可选区域为 350Wx230H。

问题是有时如果图像调整高度或宽度小于 400W 或 264H 像素，它会在图像中添加黑色部分。

如果有人能指出我必须做的类似事情，我将不胜感激。

上传和调整图像大小的代码如下

```
public void ResizeImageFreeSize(string OriginalFile, string NewFile, int NewWidth, int MaxHeight, bool OnlyResizeIfWider, string fileExtension)
    {
        System.Drawing.Image FullsizeImage = System.Drawing.Image.FromFile(OriginalFile);
        // Prevent using images internal thumbnail
        //FullsizeImage.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipNone);
        //FullsizeImage.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipNone);
        //if (OnlyResizeIfWider)
        //{
        //    if (FullsizeImage.Width <= NewWidth)
        //    {
        //        NewWidth = FullsizeImage.Width;
        //    }
        //}
        //int NewHeight = FullsizeImage.Height * NewWidth / FullsizeImage.Width;
        //if (NewHeight > MaxHeight)
        //{
        //    // Resize with height instead
        //    NewWidth = FullsizeImage.Width * MaxHeight / FullsizeImage.Height;
        //    NewHeight = MaxHeight;
        //}
        System.Drawing.Image NewImage = FullsizeImage.GetThumbnailImage(NewWidth, MaxHeight, null, IntPtr.Zero);
        // Clear handle to original file so that we can overwrite it if necessary
        FullsizeImage.Dispose();
        // Save resized picture

        if (fileExtension.ToLower() == ".jpg" || fileExtension.ToLower() == ".jpeg")
        {
            //NewImage.Save(NewFile, System.Drawing.Imaging.ImageFormat.Jpeg);

            Encoder quality = Encoder.Quality;
            var ratio = new EncoderParameter(quality, 100L);
            var codecParams = new EncoderParameters(1);
            codecParams.Param[0] = ratio;
            NewImage.Save(NewFile, GetEncoder(ImageFormat.Jpeg), codecParams);
        }

        if (fileExtension.ToLower() == ".png")
        {
            NewImage.Save(NewFile, System.Drawing.Imaging.ImageFormat.Png);
        }

        if (fileExtension.ToLower() == ".gif")
        {
            NewImage.Save(NewFile, System.Drawing.Imaging.ImageFormat.Gif);
        }
    } 
```

上面的代码上传大图像并将其调整为 400x264 像素的固定大小。但是这种方法会拉伸图像，因为我评论了保持纵横比的代码。

上传调整大小的图像后，我允许用户使用 jCrop 从该图像中选择区域，可选择的区域为 350x230 像素。

这工作没有任何问题，但图像被拉伸

```
protected void btnCrop_Command(object sender, CommandEventArgs e)
{
    cropImage();
    // pnlImageDetails.Visible = true;
}

protected void cropImage()
{
    var x = int.Parse(_xField.Value);
    var y = int.Parse(_yField.Value);
    var width = int.Parse(_widthField.Value);
    var height = int.Parse(_heightField.Value);
    string _CropImagePath = Session["_CropImagePath"].ToString();
    using (var photo = System.Drawing.Image.FromFile(_CropImagePath))
    using (var result =
          new Bitmap(width, height, photo.PixelFormat))
    {
        result.SetResolution(photo.HorizontalResolution, photo.VerticalResolution);
        using (var g = Graphics.FromImage(result))
        {
            // g.InterpolationMode = InterpolationMode.HighQualityBicubic;
            g.InterpolationMode = InterpolationMode.HighQualityBicubic;
            g.DrawImage(photo, new Rectangle(0, 0, width, height),
                               new Rectangle(x, y, width, height),
                                             GraphicsUnit.Pixel);
            photo.Dispose();
            result.Save(_CropImagePath);
            string filePath = _CropImagePath.ToString();
            System.IO.FileInfo f = new System.IO.FileInfo(filePath);
            string fileExtension = f.Extension;
            string fileName = f.Name;
            string[] fNameArray = fileName.Split('.');
            string fileNewName = fNameArray[0] + "TN" + f.Extension;
            Session["ArticleThumbnailImage"] = fileNewName;
            string fileNewPath = Server.MapPath("../ImagesArticles/") + fileNewName;
            ResizeImageFreeSize(filePath, fileNewPath, 170, 112, true, fileExtension);
        }

    }
} 
```

HTML 代码的一部分

```
 <div id="ImageEditorFrame" style="width:800px; height:350px; float:left; ">

    <div style="width:404px; height:268px; margin-left:160px; margin-top:10px; padding-top:1px;  background-image:url('images/Scale.png'); background-repeat:no-repeat;">
        <div style="width:400px; height:264px; margin-left:3px; margin-top:2px; padding-top:1px; background-color:#f5f5f5;">
            <asp:Image runat="server" ID="_imageEditor" ImageUrl="" Visible="true" />   

        </div>
        <div style="margin-top:10px;"> 
         <asp:Button ID="btnCrop" runat="server" style="float:left;"  Text=" Crop Image " Visible="False" oncommand="btnCrop_Command"  />
        <input id="w" type="text" name="w" size="4" disabled="disabled">
        <input id="h" type="text" name="h" size="4" disabled="disabled">(350x230)<br /><br />
        <asp:Label ID="lblUplodedImgInfo" runat="server" Text=""></asp:Label>
        </div>
    </div>

    <input type="hidden" runat="server" id="_xField" />
    <input type="hidden" runat="server" id="_yField" />
    <input type="hidden" runat="server" id="_widthField" />
    <input type="hidden" runat="server" id="_heightField" />

</div>

var editorID = '<%= _imageEditor.ClientID %>';
jQuery(function () {
    jQuery('#' + editorID).Jcrop({
        onChange: showCoords,
        onSelect: showCoords,
        setSelect: [0, 0, 350, 230],
        allowResize: false
    });
});

function showCoords(c) {

    var xField = document.getElementById('<%= _xField.ClientID %>');
    var yField = document.getElementById('<%= _yField.ClientID %>');
    var widthField = document.getElementById('<%= _widthField.ClientID %>');
    var heightField = document.getElementById('<%= _heightField.ClientID %>');

    xField.value = c.x;
    yField.value = c.y;
    widthField.value = 350;
    heightField.value = 230;
    $('#w').val(c.w);
    $('#h').val(c.h);
} 
```

想法的屏幕截图 ![想法的屏幕截图](../Images/654b12bc95793b5a2a403b514a871ff9.png)

我很想把它做好，我可以给用户一个功能来选择一个图像的区域，并从中创建一个调整大小的图像。现在代码没有给出完美的结果。

如果有人可以帮助我使用此代码指向一个完整的工作示例，我将不胜感激。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:57:07.667

****@MyItchyChin**我正在使用他的逻辑进行一些更改，所以我也会将他的答案标记为正确****

 **我编辑了这段代码以添加两件事，一是由于锁定而出错，所以我使用 MemoryStream 来解决锁定问题。代码的另一个问题是它正在为 JPG 生成低分辨率图像，因为我添加了一些代码。其余的逻辑是相同的，我没有改变

```
public static void ResizeImageFreeSize(string OriginalFile, string NewFile, int MinWidth, int MinHeight, string FileExtension)
{
    var NewHeight = MinHeight;
    var NewWidth = MinWidth;
    // var OriginalImage = System.Drawing.Image.FromFile(OriginalFile); // THis statlement alon with generate error as file is locked so -->//GDI+ keeps a lock on files from which an image was contructed.  To avoid the lock, construct the image from a MemorySteam:

    MemoryStream ms = new MemoryStream(File.ReadAllBytes(OriginalFile));
    var OriginalImage = System.Drawing.Image.FromStream(ms);

    if (OriginalImage.Width < MinWidth || OriginalImage.Height < MinHeight)
        throw new Exception(String.Format("Invalid Image Dimensions, please upload an image with minmum dimensions of {0}x{1}px", MinWidth.ToString(), MinHeight.ToString()));

    // If the image dimensions are the same then make the new dimensions the largest of the two mins.
    if (OriginalImage.Height == OriginalImage.Width)
        NewWidth = NewHeight = (MinWidth > MinHeight) ? MinWidth : MinHeight;
    else
    {
        if (MinWidth > MinHeight)
            NewHeight = (int)(OriginalImage.Height * ((float)MinWidth / (float)OriginalImage.Width));
        else
            NewWidth = (int)(OriginalImage.Width * ((float)MinHeight / (float)OriginalImage.Height));
    }

    // Just resample the Original Image into a new Bitmap
    var ResizedBitmap = new System.Drawing.Bitmap(OriginalImage, NewWidth, NewHeight);

    // Saves the new bitmap in the same format as it's source image
    FileExtension = FileExtension.ToLower().Replace(".", "");

    ImageFormat Format = null;
    switch (FileExtension)
    {
        case "jpg":
            Format = ImageFormat.Jpeg;

            Encoder quality = Encoder.Quality;
            var ratio = new EncoderParameter(quality, 100L);
            var codecParams = new EncoderParameters(1);
            codecParams.Param[0] = ratio;
            // NewImage.Save(NewFile, GetEncoder(ImageFormat.Jpeg), codecParams);
            ResizedBitmap.Save(NewFile, GetEncoder(ImageFormat.Jpeg), codecParams);
            break;
        case "gif":
            Format = ImageFormat.Gif;
            ResizedBitmap.Save(NewFile, Format);
            break;
        case "png":
            Format = ImageFormat.Png;
            ResizedBitmap.Save(NewFile, Format);
            break;
        default:
            Format = ImageFormat.Png;
            ResizedBitmap.Save(NewFile, Format);
            break;
    }

    //  ResizedBitmap.Save(NewFile, Format);

    // Clear handle to original file so that we can overwrite it if necessary
    OriginalImage.Dispose();
    ResizedBitmap.Dispose();
}

private static ImageCodecInfo GetEncoder(ImageFormat format)
{
    ImageCodecInfo[] codecs = ImageCodecInfo.GetImageDecoders();
    foreach (ImageCodecInfo codec in codecs)
        if (codec.FormatID == format.Guid)
            return codec;
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:37:36.613

您可以保持纵横比或对图像尺寸的硬限制，即 400x264 如果要保持纵横比，则调整后的图像应缩小 `min(finalWidth/orignalWidth, finalHeight/orignalHeight)`

看

*   [调整图像大小以适合边界框](https://stackoverflow.com/questions/1106339/resize-image-to-fit-in-bounding-box)
*   [我如何... 使用 GDI+ 调整图像大小，同时保持其纵横比？](http://www.techrepublic.com/blog/howdoi/how-do-i-resize-images-using-gdi-while-preserving-their-aspect-ratio/124)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T22:43:14.777

如果我理解正确，您的最终目标是最终获得 350x230 像素的缩略图，但您希望用户能够根据 400x264 像素的预览选择裁剪。不幸的是，您在预览中强制使用纵横比，这就是您得到失真的原因。如果您改为将 400x264px 尺寸视为最小值，那么您可以根据不会失真的那些最小值生成缩略图。

```
public static void ResizeImageFreeSize(string OriginalFile, string NewFile, int MinWidth, int MinHeight, string FileExtension)
{
    var NewHeight = MinHeight;
    var NewWidth = MinWidth;        
    var OriginalImage = Image.FromFile(OriginalFile);

    if (OriginalImage.Width < MinWidth || OriginalImage.Height < MinHeight)
        throw new Exception(String.Format("Invalid Image Dimensions, please upload an image with minmum dimensions of {0}x{1}px", MinWidth.ToString(), MinHeight.ToString()));

    // If the image dimensions are the same then make the new dimensions the largest of the two mins.
    if (OriginalImage.Height == OriginalImage.Width)
        NewWidth = NewHeight = (MinWidth > MinHeight) ? MinWidth : MinHeight;
    else
    {
        if (MinWidth > MinHeight)
            NewHeight = (int)(OriginalImage.Height * ((float)MinWidth / (float)OriginalImage.Width));
        else
            NewWidth  = (int)(OriginalImage.Width * ((float)MinHeight / (float)OriginalImage.Height));
    }

    // Just resample the Original Image into a new Bitmap
    var ResizedBitmap = new System.Drawing.Bitmap(OriginalImage, NewWidth, NewHeight);

    // Saves the new bitmap in the same format as it's source image
    FileExtension = FileExtension.ToLower().Replace(".","");

    ImageFormat Format = null;
    switch (FileExtension)
    {
        case "jpg":
            Format = ImageFormat.Jpeg;
            break;
        case "gif":
            Format = ImageFormat.Gif;
            break;
        case "png":
            Format = ImageFormat.Png;
            break;
        default:
            Format = ImageFormat.Png;
            break;
    }

    ResizedBitmap.Save(NewFile, Format);

    // Clear handle to original file so that we can overwrite it if necessary
    OriginalImage.Dispose();
    ResizedBitmap.Dispose();
} 
```**

# c# - 需要有关 .Net 程序执行流程和基本 oops 相关的非常基本问题的帮助

> ID：10316757
> 
> 赞同：-4
> 
> 时间：2012-04-25T13:30:45.097
> 
> 标签：c#, .net, oop

怀疑.net程序执行流程

几年来，我一直从事开发工作，但我对 C# win 或 Web 应用程序的运行方式缺乏了解。当我们从 IDE 运行应用程序时，编译器如何进入场景以编译我们的程序，然后程序如何启动...... CLR 如何进入场景以及 JIT 如何进入场景。谁控制程序的入口点。谁从外部调用程序入口点，即所谓的静态 void Main()。CLR 如何参与执行程序以及谁参与 CLR。JIT 如何参与以及谁参与了 JIT。为什么入口点是 static void main() ？

很多书帮助我们用 C# 编写代码，但从不谈论程序执行流程…….net 程序是如何运行的。当我们单击任何 .net exe 时，exe 是如何运行的。所以我有一些疑问....如果可能的话，请详细讨论上述问题或将我指向正确的文章。

怀疑 OOPS

1）我看到一个类是私有的，但构造函数是公共的......为什么......这是什么意思。是否有任何特殊目的是这样设计课程的原因。

2）我看到了公共类，但它有三个构造函数，一个是私有的，一个是静态的，最后一个是公共的……以这种方式设计一个类有什么特殊目的吗？

3）静态类总是有静态构造函数？

4）如果公共类具有普通构造函数和静态构造函数，那么目的是什么。

如果可能的话，请详细讨论上述 OOPS 问题........谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:35:51.853

> 当我们从 IDE 运行应用程序时，编译器如何进入场景来编译我们的程序

IDE 启动编译器并将其传递给您的程序。编译器是另一个程序。它不需要特殊调用。您可以在没有 IDE 的情况下自己完成，只需`csc.exe`直接调用即可。

> 然后程序如何启动......CLR如何进入现场以及JIT如何进入现场。谁控制程序的入口点。谁从外部调用程序入口点，即所谓的静态 void Main()。CLR 如何参与执行程序以及谁参与 CLR。JIT 如何参与以及谁参与了 JIT。

JIT 是动态的 IL-to-native 编译器。这就是将 .NET 语言编译成的 IL 的翻译，以便程序可以实际运行。

就您使用 JIT 的方式而言，CLR 几乎是另一个世界。我不打算在这里详细介绍，但您可以在 MSDN 上找到更多信息。

> 为什么入口点是 static void main() ？

习俗。为什么语言叫C#？

> 我看到一个类是私有的，但构造函数是公共的......为什么......这是什么意思。是否有任何特殊目的是这样设计课程的原因。

这样就可以从外部类实例化私有类。例如：

```
public class A {
    private something = new B();

    private class B {
        public B() {
            // ...
        }
    }
} 
```

如果构造函数不是`public`，`private`则外部类无法实例化该类。

> 我看到了公共类，但它有三个构造函数，一个是私有的，一个是静态的，最后一个是公共的……以这种方式设计一个类有什么特殊目的吗？

当然。他们都做不同的事情。这不是那么不寻常。

> 静态类总是有静态构造函数？

不，静态构造函数实际上非常罕见。当然，静态类不能有普通的构造函数。

> 如果公共类具有普通构造函数和静态构造函数，那么目的是什么。

调用普通构造函数来初始化对象。第一次使用该类时调用静态构造函数。仅仅因为一个类同时具有这两者并不能使它特别，您可以将该功能用于几乎任何事情。

# cygwin - 使用 Cygwin 监控 Windows 服务

> ID：10316758
> 
> 赞同：6
> 
> 时间：2012-04-25T13:30:45.147
> 
> 标签：cygwin

我正在尝试将我的一些常规 shell 操作从 PowerShell 转移到 Cygwin，主要是作为一种教育练习，但也因为我真的开始喜欢一些 Linux 风格的工具。我仍在尝试如何列出/操作 Windows 服务。PowerShell为此提供了一些非常方便的工具，例如：

```
stop-service [pattern]
start-service [pattern]
gsv (or get-service) [pattern] 
```

我最近使用了很多自定义服务，并且希望在我的常规工作流程中不必切换到 PowerShell 来执行此操作。有没有人解决这个问题？谷歌的几次尝试都被很多关于如何处理 Cygwin 作为服务运行的东西所阻碍。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T13:36:40.963

从 Cygwin 中调用 PowerShell 命令：

```
cmd /c '%SystemRoot%\\system32\\WindowsPowerShell\\v1.0\\powershell.exe' -Command "gsv" 
```

更通用的解决方案是创建一个脚本`powershell.sh`，其中包含：

```
#!/bin/bash
set -e
set -u
cmd /c '%SystemRoot%\\system32\\WindowsPowerShell\\v1.0\\powershell.exe' -Command "$@" 
```

之后您可以运行：`./powershell.sh gsv`或您需要的任何命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T06:37:35.567

从 Cygwin 中调用 PowerShell，而不调用 CMD.exe。

使用 PowerShell 6.x Core 的`pwsh`命令，我们终于在 perl、ruby、python 等的脚本库中拥有了 powershell 作为另一个工具。

当前版本的 powershell 可以用作 shebang，而不会出现 ```#!pwsh` 问题。PS2 的旧 Win7 版本与 DOS 控制台绑定在一起，因此您必须制作一个包装器并在 she-bang 行中调用该包装器。

# android - Android 复合视图初始化

> ID：10316760
> 
> 赞同：0
> 
> 时间：2012-04-25T13:30:52.090
> 
> 标签：android

我正在通过覆盖 a 来编写复合视图`ViewGroup`，如下所示：

```
public class CompositeView extends RelativeLayout 
```

我需要在设置测量值后执行一些一次性初始化（即 onMeasure 已被调用），因为我需要知道高度。

我正在考虑覆盖[onAttachedToWindow](http://developer.android.com/reference/android/view/View.html#onAttachedToWindow%28%29)，但文档提到：

> 它可以在第一个 onDraw 之前的任何时间被调用——包括在 onMeasure(int, int) 之前或之后。

我还有什么其他选择？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:35:14.490

我更喜欢在我的 CustomViews 中使用 onSizeChanged：

```
@Override
protected void onSizeChanged(final int w, final int h, final int oldw, final int oldh) {
    boolean changed = false;
    changed |= w != oldw;
    changed |= h != oldh;
    changed &= w > 0;
    changed &= h > 0;
    if (changed) {
            //do initialization stuff here
            ... 
```

此方法在布局完成后调用一次。这个[问题](https://stackoverflow.com/questions/3526148/when-is-onsizechanged-called)提供了一些额外的细节。

# sed - sed 首次出现的文本替换

> ID：10316762
> 
> 赞同：0
> 
> 时间：2012-04-25T13:31:11.977
> 
> 标签：sed

我想删除每个 .x 文件中两个单词之间的文本，我已经尝试过：

```
find temp -type d | while read DIRNAME
do
    sed -i '/abcd1/,/abcd2/d' ~/Desktop/$DIRNAME/.x
done 
```

问题是我只想删除第一次出现的这种情况，但是

```
sed -i '0,/abcd1/,/abcd2/d' ~/Desktop/$DIRNAME/.x 
```

不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:43:53.117

```
sed -ie 'bb; :a q; :b s/from/into/; ta' test.txt 
```

*   `bb;`— 分支到`b`标记（跳过`q`uit 命令）；
*   `:a q;`—用uit 命令`a`标记；`q`
*   `:b s/from/into`——`b`用替换标记；
*   `ta``a`—如果替换成功，跳转到标记；
*   `;`— sed 中的命令分隔符。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:47:57.317

单程：

```
sed -e '/3/,/6/ { /6/ ba ; d }; b ; :a ; $! { N ; ba }; s/[^\n]*\n//' 
```

**编辑**解释它：

```
/3/,/6/         # Range between line that matches '3' and other line that matches '6'.
{
  /6/ ba        # When matches last line of the range, goto label 'a'.
  d             # Delete each line in the range.
}
b               # This command will be executed in lines until first match in the 
                # range. It prints the line and begin loop reading next one.
:a              # Label 'a'.
$!              # While not found last line ...
{ 
  N             # Append next line to current pattern space.
  ba            # Go to label 'a'. Enter a loop reading each line until last one.
}
s/[^\n]*\n//    # Remove until first '\n' (content of last line of the range) and print 
                # the rest. 
```

一个**测试**：

内容`infile`：

```
1
2
3
4
5
6
7
1
2
3
4
5
6
7 
```

像这样运行它：

```
sed -e '/3/,/6/ { /6/ ba ; d }; b ; :a ; $! { N ; ba }; s/[^\n]*\n//' infile 
```

输出（只删除 '3' 和 '6' 之间的行一次）：

```
1
2
7
1
2
3
4
5
6
7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T06:45:41.150

这可能对您有用：

```
sed '/word1/!b;:a;/word1.*word2/{s///;tb};$!{N;ba};:b;$!{n;bb}' file 
```

以上适用于单词，对于行块使用：

```
sed '/block1/,$!b;x;/./{x;b};x;/block1/,/block2/{/block2/h;d}' file 
```

编辑：

要删除`first occurence, only if there are more than one occurrences`：

```
 sed '/word1/!b;:a;/\(word1\).*\(word2\)\(.*\1.*\2\)/{s//\3/;tb};$!{N;ba};:b;$!{n;bb}' file 
```

# jquery - jQuery YouTube Popup Player Plugin 显示滚动条，即使它们不需要

> ID：10316763
> 
> 赞同：0
> 
> 时间：2012-04-25T13:31:18.317
> 
> 标签：jquery, jquery-ui, youtube, jquery-ui-dialog

我从这里使用 jQuery YouTube 弹出播放器插件：

[http://lab.abhinayrathore.com/jquery_youtube/](http://lab.abhinayrathore.com/jquery_youtube/)

在大多数浏览器中它可以工作，但有时在某些情况下不能。然后滚动条显示在 jquery 对话框中，即使它们不需要。

我怎样才能停用它们？

干杯，斯特凡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:34:01.043

```
$("#id").css('overflow','hidden'); 
```

用你的元素替换#id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:33:58.037

一种方法是对获得滚动条的 div 使用 CSS 规则：

```
overflow: hidden; 
```

# android - 为什么Android的某些权限没有在原始Android Developers页面中列出？

> ID：10316765
> 
> 赞同：1
> 
> 时间：2012-04-25T13:31:27.497
> 
> 标签：android, permissions, android-manifest, apk, deprecated

**ACCESS_COARSE_LOCATION**和**ACCESS_COARSE** Android 权限有什么区别？

ACCESS_COARSE_LOCATION可以在[Android 开发者页面](http://developer.android.com/reference/android/Manifest.permission.html)中找到，无论**ACCESS_COARSE是否****不在**此列表中。

 **我发现了许多使用它的应用程序，例如[3D Compass](http://m.slideme.org/application/3d-compass)。我运行[androguard](http://code.google.com/p/androguard/)来检查这个应用程序的权限，我在里面找到了这个：

```
<uses-permission android:name="android.permission.ACCESS_COARSE"> 
```

它是**ACCESS_COARSE_LOCATION**的缩写吗？为什么它不在具有[此处](http://developer.android.com/reference/android/Manifest.permission.html)权限的官方Android页面中？

此外，我还看到了其他几个不在此列表中的权限，例如： **WRITE_OWNER_DATA**，**READ_OWNER_DATA**，...

为什么会这样？这些许可是被弃用的，还是不是官方的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T13:59:27.367

> ACCESS_COARSE_LOCATION 和 ACCESS_COARSE Android 权限有什么区别？

Android中没有`ACCESS_COARSE`权限。您可以通过查看[源代码](https://github.com/android/platform_frameworks_base/blob/master/core/res/AndroidManifest.xml)来判断这一点。

> ACCESS_COARSE_LOCATION 可以在 Android 开发者页面中找到，无论 ACCESS_COARSE 是否不在此列表中。

因为`ACCESS_COARSE`不存在。

> 我发现了许多使用它的应用程序，例如 3D Compass。

他们可能会要求。他们不使用它，因为它不存在。

> 我运行 androguard 来检查这个应用程序的权限，我在里面找到了这个：

据推测，该应用程序的作者犯了一个错误。

> 它是 ACCESS_COARSE_LOCATION 的缩写吗？

不。

> 为什么它不在具有此处权限的官方Android页面中？

因为它不存在。

> 此外，我还看到了其他几个不在此列表中的权限，例如：WRITE_OWNER_DATA、READ_OWNER_DATA

[这些已从 API 级别 9 的 SDK 中删除。](http://developer.android.com/sdk/api_diff/9/changes.html)

> 为什么会这样？

你可以拥有任何`<uses-permission>`你想要的元素。如果您请求的内容不存在，则您不会得到它。

> 好的，那么为什么提到的应用程序无法使用它时会请求此权限？

大概是因为他们用来编写应用程序的百万只猴子把它放在那里。这是不使用猴子（特别准备的测试猴子和猴子跑步者除外）进行 Android 应用程序开发的众多原因之一。**

# wcf - 从头到尾的活动 WCF STS

> ID：10316772
> 
> 赞同：0
> 
> 时间：2012-04-25T13:32:27.743
> 
> 标签：wcf, single-sign-on, token, wif

我在使用 WIF 保护 WCF 服务时遇到问题。我就是不能让它工作。我在很多地方读过很多关于它的东西，但这不是官方文档也不完整，我开始感到困惑，不知道在哪里寻找真正的信息......

我想要实现的目标是为多个 asp.Net 应用程序和 WCF 服务制定 SSO 策略。我知道我必须对 Webapp 使用被动 STS，对 WCF 客户端使用主动 STS，但我无法让它工作。

我想要工作的场景是这样的：

为应用程序和 WCF 使用通用 STS，然后

1.  在 webapp1 上登录
2.  转到 app2 并已登录（直到这里没问题）
3.  从托管在 webapp2 上的 app1 调用 web 服务而不再次签名（从这里我遇到了麻烦）
4.  通过登录到 STS，从客户端（例如 WPF）调用 Web 服务。

那么有没有人知道或有一个示例、文档或演示来展示如何从头开始执行此操作？因为所有的身份实验室等等都是预先配置好的，和/或没有很好的记录。

感谢阅读，希望在这里有一些答案:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:25:11.847

看看[http://code.msdn.microsoft.com/windowsazure/Federate-Windows-Live-ID-556ad976](http://code.msdn.microsoft.com/windowsazure/Federate-Windows-Live-ID-556ad976)

只有一件事无法解决：它在命名网站上无法正常工作。它在 localhost 和 ip（127.0.0.x 或 192.168.1.x）上完全运行

# objective-c - Mac OS：在最新版本的 OS 上使用旧的基础 SDK 运行应用程序

> ID：10316774
> 
> 赞同：-1
> 
> 时间：2012-04-25T13:32:41.760
> 
> 标签：objective-c, xcode, macos, osx-snow-leopard

这听起来可能是一个新手问题，但是我是 Mac OS 的新手，

在这里，我有一个使用旧 Base SDK 编译的应用程序，比如说 10.5 版本，它在 Mac OS 10.5 版本上运行没有任何问题。

在最新版本的 Mac OS 10.6、10.7 上，它在某些情况下无法正常工作。

旧应用程序应该在新版本的操作系统中保持兼容，基本上我想知道苹果如何在新版本的 Mac OS 中保持与旧应用程序的兼容性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:35:02.297

Apple 通常会非常小心地确保其 API 的向后兼容性，以便在升级操作系统时旧应用程序不会中断。他们不会删除 APIS，只是将它们标记为已弃用。

很可能您的应用程序正在做一些不受支持的事情，或者由于 Apple 更改了其 API 的实现而暴露了其中的错误。

一些可能的原因在我脑海中浮现

*   您的应用使用已更改的 Apple 私有 API。
*   您的应用程序将一些无效参数传递给其实现已更改的 API（一个示例可能是使用`int`API 需要 NSInteger 的地方）。
*   您的应用无意中利用了一个现已解决的错误（例如，垃圾收集和 NSOperationQueues 存在于 10.5 中，但在很大程度上是 beta 版）。

尝试使用当前 Xcode 针对最新 API 重新编译您的应用程序，打开`-Wall`警告标志并启用静态分析器。这将告诉您在哪里使用了已弃用的 API、关于参数和返回类型的错误假设以及许多其他问题。

# php - 如何在 joomla 2.5 中使用标准字段类型文件

> ID：10316776
> 
> 赞同：1
> 
> 时间：2012-04-25T13:32:44.800
> 
> 标签：php, joomla, joomla-extensions, joomla2.5

我正在尝试上传文件，并且我在 joomla 2.5 版本中使用了 joomla xml 表单。此表单在数据库中插入图像名称。但文件未上传。是否有使用 joomla 形式的标准字段类型文件的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:45:49.890

是的，您应该使用[媒体表单字段类型](http://docs.joomla.org/Media_form_field_type)示例：

```
<field name="myimage" type="media" directory="stories" /> 
```

您可能使用了[imagelist 表单字段类型](http://docs.joomla.org/Imagelist_form_field_type)示例：

```
<field name="myimage" type="imagelist" default="" label="Select an image" description="" directory="" exclude="" stripext="" /> 
```

这听起来像是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T17:58:07.090

显然，在 Joomla 2.5 中使用 File 上传的图像存储在 temp 文件夹中。使用“媒体”上传图像似乎有效，但有限制：

*   用户必须有足够的权限才能这样做。
*   如果用户有权限，他实际上可以查看文件夹中的所有内容，这是不感兴趣的情况

使用 File 是更好的解决方案，但您需要编写一些 php 代码来检索上传的图像。

我知道这不是答案，只是为了指明方向。我有同样的问题，将很快编写 php 代码来管理上传。我会更新你的结果。

雅克

# c# - 为什么CheckList Box的ItemCheck事件总是落后一个？

> ID：10316781
> 
> 赞同：1
> 
> 时间：2012-04-25T13:32:52.383
> 
> 标签：c#, winforms

我正在制作一个带有清单框的winform。我想将检查列表框的选中项目存储在数组列表中。我的检查列表框中有 5 个项目，我想处理`itemcheck`事件。

如果我检查一个项目`itemcheck`事件触发但项目计数再次保持为 0 如果我检查事件处理程序中的 2 个项目，如果我在下次计数变为 2 时重复此过程，则项目计数变为 1（但现在我检查了 3 个项目）。

请帮助我下面的代码是我正在使用的代码片段：

```
 private void CLB_Course_ItemCheck(object sender, ItemCheckEventArgs e)
        {            
            List<string> items = new List<string>();            
            foreach (string ItemsChecked in CLB_Course.CheckedItems)
            {
                items.Add(ItemsChecked);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:48:34.207

正如 Mitja 链接到的问题中所解释的那样，CheckedListBox 并不是那么好。

如果你想要一个检查项目的列表，你可以考虑使用 a`ListView`代替，它有一个[CheckBoxes](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.checkboxes.aspx)属性，你可以设置它`true`以获得与 a 相同的行为`CheckedListBox`，但具有[ItemChecked](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.itemchecked.aspx)的附加功能，因为该事件实际上存在于 ListView 控件中。

在您的事件侦听器中，您可以使用`e.Item`属性（从 ItemCheckedEventArgs）获取选中的项目，或者使用 ListView`CheckedIndices`或`CheckedItems`属性获取所有选中的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T16:54:51.977

发生这种情况是因为当项目即将更改其检查状态时引发该事件。直到事件发生后该值才会更新

# css - 如何让列表元素覆盖整个高度 - CSS IE8 列表元素高度

> ID：10316782
> 
> 赞同：0
> 
> 时间：2012-04-25T13:32:54.490
> 
> 标签：css

我正在尝试在菜单周围制作边框。边框有圆角，我必须支持各种浏览器（ie7 / ie8 ..），所以我尝试使用图片在菜单周围绘制整个边框。

如何让 leftBorder 和 rightBorder 覆盖整个高度（示例中为 2 个黑点）？看看下面的前任。

[http://jsfiddle.net/3367E/14/](http://jsfiddle.net/3367E/14/)

菜单具有动态高度，所以我不能只设置一个静态高度！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:34:48.367

你不能只使用标准的 CSS`border`属性吗？

# c# - 将地图贴图加载到 BingMap silverlight 控件中

> ID：10316784
> 
> 赞同：1
> 
> 时间：2012-04-25T13:33:09.123
> 
> 标签：c#, silverlight, bing-maps, windows-phone

我是 Windows Phone 开发的新手，我目前正在为一家公司构建一个应用程序，该公司想要使用自己的地图（构建地图块）。我想在解决方案中使用 BingMap silverlight 控件。我的问题是：这真的可能吗？我试图通过像这样从 MapTiles 类继承来覆盖“GetUri”方法；

```
public class MyTiles : Microsoft.Phone.Controls.Maps.TileSource
{
    public override Uri GetUri(int x, int y, int zoomLevel)
    {
        if (zoomLevel > 0)
        {
            var Url = string.Format(UriFormat, Server, MapMode, zoomLevel, x, y);
            return new Uri(Url);
        }
        return null;
    }
} 
```

是否可以在没有 HTTP 请求的情况下加载地图？

提前谢谢了

Nroblex

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-23T13:36:56.163

Unfortunately the only way is to host the tiles over the internet: [http://social.msdn.microsoft.com/Forums/en-US/94c2d9bc-f1a7-4201-9e5a-4d6a47d285cb/maptilelayer-with-local-tiles?forum=bingmapswindows8](http://social.msdn.microsoft.com/Forums/en-US/94c2d9bc-f1a7-4201-9e5a-4d6a47d285cb/maptilelayer-with-local-tiles?forum=bingmapswindows8)

Whilst in development you could try WAMP ([http://www.wampserver.com/en/](http://www.wampserver.com/en/)) and then serve the tiles from localhost:

```
MapTileLayer tileLayer = new MapTileLayer();
tileLayer.GetTileUri += tileLayer_GetTileUri;

private void tileLayer_GetTileUri(object sender, GetTileUriEventArgs e)
{
    string quadkey = TileToQuadkey(e.X, e.Y, e.LevelOfDetail);
    e.Uri = new Uri(String.Format("http://localhost/tiles/{0}.png", quadkey));
} 
```

The TileToQuadkey method is described here: [http://msdn.microsoft.com/en-us/library/bb259689.aspx](http://msdn.microsoft.com/en-us/library/bb259689.aspx)

But for production you will need to replace WAMP with your own web server.

# android - 我该如何实现？（listfragment，喜欢在 Honeycomb 中设置屏幕截图）

> ID：10316794
> 
> 赞同：0
> 
> 时间：2012-04-25T13:33:44.967
> 
> 标签：android, listview, android-listfragment

这是Honeycomb的设置截图（不允许新用户发布图片......）我认为它是通过使用ListFragment实现的，但它只是使用Selector吗？

因为在我看来它是 Honeycomb 中的一个基本应用程序，我认为 android 将支持该特定布局......我需要如何实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:25:32.417

您发布的是使用片段实现的设置显示。在您的 SDK 目录中查找 /android-13/ApiDemos/src/com/example/android/apis/preference。请注意，根据您使用的 Honeycomb 版本，“13”可能是“11”、“12”、“13”。具体来说，您正在寻找的是 PreferenceWithHeaders.java 文件。标题是您在左侧看到的列表，其他所有内容都是片段首选项。

[编辑] 根据下面的评论，也许您应该检查 PreferenceActivity 如何构建其列表。应该没有理由不能从这个源文件（/android-sdks/sources/android-13/android/preference/PreferenceActivity）中提取所需的信息来查看它是如何构建列表的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T18:45:38.140

我想我现在明白你了。关于 UI 设计没有硬性标准，但是有明确的建议，如果不是全部，大多数建议都是通过确保不同的软件行为相似来改善用户体验，这样用户就不必处理学习新 UI 的问题每个新应用程序的怪癖。有关详细信息，请参阅[此处的 Android UI 指南](http://developer.android.com/guide/practices/ui_guidelines/index.html)。如果我仍然误解你的问题，我很抱歉。

# emacs - Emacs：如何从当前焦点位置自动选择双引号中的所有文本？

> ID：10316796
> 
> 赞同：5
> 
> 时间：2012-04-25T13:33:46.243
> 
> 标签：emacs

找了半天，参考这里。

如果当前位置在 2 个双引号之间，是否有任何命令可以标记 2 个双引号中的所有文本？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T13:49:05.110

如果您使用鼠标，双击会选择包含双引号的文本。

[expand-region](https://github.com/magnars/expand-region.el)允许您选择文本的扩展词法单元，其中一个停止点是不带引号的字符串，然后是包含引号的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:20:40.093

您可以为其创建一个宏并保存该宏以供以后使用。宏会做：

1.  向后搜索“
2.  设置标记
3.  向前搜索“

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T00:51:36.157

[http://emacsrocks.com/e09.html](http://emacsrocks.com/e09.html)

# coldfusion - 使用 imageCFC 如何创建图像对象？

> ID：10316797
> 
> 赞同：1
> 
> 时间：2012-04-25T13:33:47.797
> 
> 标签：coldfusion, coldfusion-9

我需要使用 CF 函数 imageNew() 的替代方法。我开始使用 ImageCFC。但是我找不到使用 imageCFC 读取图像和创建图像对象的方法。它似乎只从此处找到的 API 文档写入文件 (http://www.opensourcecf.com/imagecfc/docs/imageCFC.cfm)。

我的问题是使用 imageCFC 如何在不写入文件的情况下创建图像对象？

```
imageCFC = createObject("component","imagecfc.image" );
local.img1 = imageCFC.readImage("D:\#arguments.directory#\#arguments.imageName#");

// turn this into an image object here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:59:52.073

我相信，使用 ImageCFC，您需要降级到 Java 才能创建图像。有一个 Image.cfc 是 MangoBlog 的资产管理器的一部分，它有一个非常好的使用 Java 的 BufferedImage 对象的 createImage 函数示例。

[芒果博客图片.cfc](http://code.google.com/p/mangoblog/source/browse/trunk/src/coldfusion/application/components/plugins/system/AssetManager/Image.cfc?r=566)

# css - 如何扩展css类

> ID：10316802
> 
> 赞同：7
> 
> 时间：2012-04-25T13:33:57.777
> 
> 标签：css

我需要扩展特定的 CSS 样式。例如，我正在使用第 3 方 DLL，它将 CSS 类样式动态分配给特定控件。我想在我的 asp.net 项目中创建一个具有相同名称的 css 类，其中来自第 3 方 DLL 的样式和我的项目 CSS 类样式都应用于控件。

例如，第 3 方按名称上课

```
.VerticalAlign
{
   vertical-alignment:center;
} 
```

现在我按名称创建类`.VerticalAlign { color : #f3f3f3 }`

当我将上述类应用于控件时，我需要将垂直对齐和颜色应用于我的控件。

如果不可能使用相同的名称，是否有可能创建具有不同类名的 CSS 样式，该样式继承自 3rd 方 dll 中定义的 CSS 类的属性。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-25T13:38:19.407

CSS 中的“C”代表 Cascading，这意味着样式可以添加或取代之前的 CSS 规则。因此，使用您希望在原始声明上扩展的样式再次声明类名称的示例是执行此操作的正确方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T13:40:21.347

你说得对；保留相同的名称，添加新属性，它们应该被应用。

```
/* From DLL */
.foo { color: blue; }

/* Your Style */
.foo { text-align: center; }

/* --- Final outcome --- */
.foo {
  color: blue;
  text-align: center;
} 
```

您可能会遇到优先考虑的问题（如果它们都有颜色，则颜色样式会获胜）。例如

```
/* From DLL */
.foo { color: red; }

/* Your code */
.foo { color: blue; } 
```

您将不得不使用`!important`（hack-ish）或指定更大的[特异性](http://www.w3.org/TR/CSS2/cascade.html#specificity)（即包括标记名或其他类名或 ID）。

# node.js - 如何在 node.js 中测试字节顺序

> ID：10316803
> 
> 赞同：10
> 
> 时间：2012-04-25T13:33:58.883
> 
> 标签：node.js, endianness

当您读取一大块字节并需要将它们转换为数字时，node.js 具有类似`buffer.readInt32BE()`和的功能`buffer.readInt32LE()`。

如果我只知道一个文件的前4个字节是一个整数，如果我不知道系统的字节序，我应该使用什么函数？大端还是小端？

在 C 中进行快速谷歌搜索（[stackoverflow](https://stackoverflow.com/questions/1001307/detecting-endianness-programmatically-in-a-c-program)），我们可以测试字节顺序：

```
if ( htonl(47) == 47 ) {
  // Big endian
} else {
  // Little endian.
} 
```

我们如何测试 node.js 中的字节序以正确使用 readInt32BE 和 readInt32Le？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-22T00:08:50.090

`os.endianness()`返回 CPU 的字节顺序。可能的值为“BE”或“LE”。

它是在 Node.js v0.10.0 中添加的，它不包含在 <= v0.8.25 中。

来源：[http ://nodejs.org/api/os.html#os_os_endianness](http://nodejs.org/api/os.html#os_os_endianness)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T19:01:07.130

如果您使用类型化数组，这完全有可能，甚至是合理的做法。我写了一个快速模块来检查你的系统是否是 node.js 上的小端：

[https://npmjs.org/package/is-little-endian](https://npmjs.org/package/is-little-endian)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-25T13:48:54.587

您不需要测试主机系统的字节顺序。

您需要调查使用哪个字节顺序格式化缓冲区，并使用正确的变体再次将其读出。

# c# - 比较一个对象的两个实例

> ID：10316806
> 
> 赞同：1
> 
> 时间：2012-04-25T13:34:02.967
> 
> 标签：c#, object, comparison

我不确定我要找的东西是否存在，但它就是这样，

```
 public class OptionType : IComp
    {
        public static readonly FIXTag Tag = 201;

        public enum Types
        {
            Put = 'P',
            Call = 'C'
        }

        private abstract class CharValues
        {
            public const char Put  = '0';
            public const char Call = '1';
        }

        public abstract class ByteValues
        {
            public const byte Put = (byte)CharValues.Put;
            public const byte Call = (byte)CharValues.Call;
        }

        #region Instances
        public readonly Types Type;
        public readonly DataOptionType DataType;
        public readonly OptionType InverseType;
        public readonly char CharValue;
        public readonly byte ByteValue;

        private OptionType(Types Type, DataOptionType DataType, FIX.OptionType InverseType, char CharValue, byte ByteValue)
        {
            this.Type        = Type;
            this.DataType    = DataType;
            this.InverseType = InverseType;
            this.CharValue   = CharValue;
            this.ByteValue   = ByteValue;

            if (InverseType == null)
            {
                this.InverseType = (Type == Types.Call)
                    ? new OptionType(Types.Put, DataOptionType.Put, this, CharValues.Put, ByteValues.Put)
                    : new OptionType(Types.Call, DataOptionType.Call, this, CharValues.Call, ByteValues.Call);
            }
        }

        public static OptionType Put = new OptionType(Types.Put, DataOptionType.Put, FIX.OptionType.Call, CharValues.Put, ByteValues.Put);
        public static OptionType Call = new OptionType(Types.Call, DataOptionType.Call, FIX.OptionType.Put, CharValues.Call, ByteValues.Call);
        #endregion 
```

我基本上希望能够让以下代码返回true，

```
 if (FIX.OptionType.Call == FIX.OptionType.Put.InverseType)
    {
        // Do Something
    } 
```

是否有一些接口或我可以实现的东西？在这种情况下，做 == 是否与做`.Equals`or相同`.CompareTo`？

先谢谢了！

威廉

## 更新

我想确保我正确实现了所有重载/运算符 - 所以让我知道你的想法 -

```
 public static bool operator== (FIX.OptionType ValueA, FIX.OptionType ValueB)
        {
            return (ValueA.Type != ValueB.Type) ? true : false;
        }

        public static bool operator!= (FIX.OptionType ValueA, FIX.OptionType ValueB)
        {
            return (ValueA.Type != ValueB.Type) ? true : false;
        }

        public override bool Equals(object obj)
        {
            return (obj != null && obj is FIX.OptionType && (obj as FIX.OptionType).Type == Type)
                ? true
                : false;
        }

        public override int GetHashCode()
        {
            return (int)Type;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:42:34.117

您可以这样做：在您测试返回值的每种方法上

```
public class myClass
    {
        public static bool operator== (myClass a, myClass b)
        {
            bool _bResult = false;

            // your code..

            return _bResult;
        }

        public static bool operator !=(myClass a, myClass b)
        {
            bool _bResult = false;

            // your code..

            return _bResult;
        }

    } 
```

[您可以在此处](http://msdn.microsoft.com/fr-fr/library/s53ehcz3%28v=vs.80%29.aspx)查看其他示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:38:53.760

您可以使用泛型。看一下 tgis 示例：

```
public bool IsDataChanged<T>()
{           
    T value1 = GetValue2;
    T value2 = GetValue1();

    return !EqualityComparer<T>.Default.Equals(valueInDB, valueFromView);
} 
```

并阅读[此处](https://stackoverflow.com/questions/390900/cant-operator-be-applied-to-generic-types-in-c)了解更多信息。

# c# - 如何在 C# 上调用带参数的 JavaScript 函数

> ID：10316810
> 
> 赞同：0
> 
> 时间：2012-04-25T13:34:08.973
> 
> 标签：c#, javascript, httpwebrequest

我想在 C# 中使用 HttpWebRequest 或 WebRequest 调用 JavaScript 函数。我不想使用可以调用invokemember 的网络浏览器。

这是我的代码：

```
public void MyWebRequest(string url, string method, string data)
{  

       request = WebRequest.Create(url);

        if (method.Equals("GET") || method.Equals("POST"))
        {
            // Set the Method property of the request to POST.
            request.Method = method;
        }
        else
        {
            throw new Exception("Invalid Method Type");
        }
       string postData = data;

        byte[] byteArray = Encoding.UTF8.GetBytes(postData);

        request.ContentType = "application/x-www-form-urlencoded";

        request.ContentLength = byteArray.Length;

        dataStream = request.GetRequestStream();

        dataStream.Write(byteArray, 0, byteArray.Length);

        dataStream.Close();
} 
```

```
MyWebRequest("http://example.com", "POST", "javascript:onclick=\"try(1,3)\""); 
```

`try`是一个 JS 函数，它有两个 int 参数。我想调用 onclick 方法，但是如何将参数传递给函数。

```
onclick="try(1,3);" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:59:18.280

所以这不是一个开放式的问题......

`WebRequest`本质上是一个“美化”的套接字库，它建立与 Web 服务器的连接。它只是在客户端（使用 的应用程序`WebRequest`）和托管站点的服务器之间传输数据的一种方式。

出于同样的原因，如果您查看`dataStream`（引用您的代码），您只会看到 HTML 标记，而不是实际的布局元素和颜色、样式等，javasript 也将不起作用。HTML 需要渲染代理，JavaScript 需要引擎。

因此，如果您需要使用页面中包含的 JavaScript 的能力，`WebBrowser`是您最好的选择。它将加载运行页面上找到的任何 JavaScript 所需的任何库/插件。它可能会更慢，是的，但那是因为它为您提供的不仅仅是传输数据（它还呈现 HTML，执行任何初始化脚本，并绑定到页面定义为美学所必需的任何元素。）

# javascript - 在服务器端日志文件中捕获用户名

> ID：10316813
> 
> 赞同：0
> 
> 时间：2012-04-25T13:34:17.713
> 
> 标签：javascript, logging

我有一个内部 javascript 应用程序，我正在尝试找到一种将用户的用户名记录到服务器端日志文件的方法，以便我们可以跟踪哪些员工正在使用该 Web 应用程序。谢谢你的帮助。

最好的祝福，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:37:26.377

唯一的方法是对服务器上的脚本进行 AJAX 调用，该脚本可以将传递给日志文件的数据写入。

除非您在此处使用[nodejs](http://nodejs.org)和[nowjs 之](http://nowjs.com/)类的技术，否则您可以直接从客户端调用服务器端函数。但同样需要一些服务器端脚本。

# ios - iOS GLSL 球面谐波着色器。如何使用 iOS GPU 进行光线投射

> ID：10316815
> 
> 赞同：0
> 
> 时间：2012-04-25T13:34:23.860
> 
> 标签：ios, opengl-es, glsl, raycasting, pixel-shading

我正在为我正在编写的 iOS 应用程序开始一个 Spherical Harmonics 着色器项目。我首先阅读了这篇关于该主题的优秀深入论文 (PDF) - [http://bit.ly/aQmax3](http://bit.ly/aQmax3)。

该论文描述了涉及光线投射的场景预处理步骤。有人可以描述如何在 iOS 上使用 GLSL 执行光线投射吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T18:38:09.240

如果您指的是该过程中用于确定哪些表面被环境光照射（用于环境光遮蔽着色）的光线投射，我已经在[Molecules](http://www.sunsetlakesoftware.com/molecules) iOS 应用程序中完成了该操作。[我在这篇博](http://www.sunsetlakesoftware.com/2011/05/08/enhancing-molecules-using-opengl-es-20)文和我提交给纳米技术会议的[这篇论文](http://sunsetlakesoftware.com/sites/default/files/NanotechMoleculesPaper-Submitted.pdf)中稍微谈到了这个过程，但我可以对此进行扩展。

在我的例子中，我使用深度测试来确定表面上被不同方向的环境光照射的区域。我拿我的模型并以一系列方向渲染它，这些方向对应于从对象周围球体上均匀分布的一组点看它的人。对于对象表面上的每个点，我通过测试其转换后的 Z 位置与为该点的可见表面计算的深度来确定该点是否从该方向可见。

我通过使用环境光遮蔽强度纹理来跟踪对象的许多方向上的这种可见性。我使用自定义着色器在此纹理上的位置和对象表面上的位置之间进行映射。如果该位置在该旋转中可见，我写出一个灰度值（值为 1 /（方向数）），如果隐藏，我写出黑色。然后我使用加法混合模式来累积这些值，以确定哪些表面被环境光照射的次数最多。

我的环境遮挡纹理如下所示：

![环境遮挡纹理](../Images/f83839e1f89f3cca5825bbc2752bce94.png)

在这种情况下，我将一系列球体映射为分子模型的一部分，因此该纹理中的每个矩形都是球体的表面积，使用映射函数将其展平。当包裹在实际模型中时，这些值如下所示：

![映射的环境光遮挡值](../Images/4cdb3ba6b48e31ffe7b3ce19459dd123.png)

此外，为了确定我的对象在不同方向的深度值，我必须创建自己的深度写入函数来计算每个像素的深度值并将其存储到自定义深度纹理中。然后，在确定环境光是否在某个方向上击中某个点时，我会从该纹理中读取。如果我没记错的话，您不能直接在 iOS 设备上从深度缓冲区中读取数据，因此您可能还需要为您的模型做类似的事情。

这不包括反射漫反射照明的情况，但它至少描述了我进行环境光遮蔽着色的方法。此应用程序的源代码可在上面的链接中找到，如果您想深入了解它并了解这一切在实践中是如何工作的。

# vbscript - 是否可以使用 Outlook 表单模板但没有表单脚本发送电子邮件？

> ID：10316818
> 
> 赞同：1
> 
> 时间：2012-04-25T13:34:39.607
> 
> 标签：vbscript, outlook, outlook-form

如果我使用 Outlook 表单发送电子邮件，则发送的表单将嵌入所有脚本。我可以删除它们还是只发送电子邮件部分？

收件人在预览窗格中看到：“该项目包含无法在阅读窗格中显示的活动内容。打开该项目以阅读其内容。” 但我只想发送内容而不是脚本，我想在发送方运行脚本。

我正在逃避附加解决方案，因为它们需要额外的软件安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T18:37:29.297

将 MAPI 属性 UseTNEF 设置为 false 是解决方案。如果您查看“已发送邮件”文件夹，它将显示警告消息，但收到的消息不显示。

添加了有关此解决方案的文章：[从通过 Outlook 表单发送的电子邮件中删除活动内容](http://blog.nektra.com/main/2012/05/16/removing-active-content-from-e-mails-sent-via-outlook-forms/)它会删除 winmail.dat 附件。

# google-drive-api - 如何在本地下载 Google Drive SDK 的示例？

> ID：10316821
> 
> 赞同：0
> 
> 时间：2012-04-25T13:34:43.887
> 
> 标签：google-drive-api

有人能告诉我如何在本地下载 Google Drive SDK 的示例吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:16:46.360

您可以在此处查看示例存储库：[https ://code.google.com/p/google-drive-sdk-samples/source/checkout](https://code.google.com/p/google-drive-sdk-samples/source/checkout)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:39:05.120

它们可在此处获得：[https ://developers.google.com/drive/downloads](https://developers.google.com/drive/downloads)

# iphone - 如何在 iphone 中编辑通讯录中的联系人？

> ID：10316825
> 
> 赞同：2
> 
> 时间：2012-04-25T13:35:06.023
> 
> 标签：iphone, abaddressbook

我创建了一个新的应用程序。我从通讯录添加联系人请参阅下面的代码，但如何从通讯录中编辑此添加联系人我不知道。

任何人都可以知道然后给出示例代码或想法。

thanx 提前给我你宝贵的时间。

```
//code for add contact in contact list 

ABRecordRef aRecord = ABPersonCreate(); 
CFErrorRef  anError = NULL; 
ABRecordSetValue(aRecord, kABPersonFirstNameProperty, 
                 txtfirstname.text, &anError); 
ABRecordSetValue(aRecord, kABPersonLastNameProperty, 
                 txtlastName.text, &anError); 
ABRecordSetValue(aRecord, kABPersonBirthdayProperty, 
                 [datepick date], &anError); 
ABRecordSetValue(aRecord, kABPersonPhoneProperty, 
                 txtMobileNo, &anError); 
ABRecordSetValue(aRecord, kABPersonEmailProperty, 
                 txtEmailID, &anError); 
if (anError != NULL) 
{ 
    NSLog(@"error while creating..");
} 
CFStringRef firstName, lastName,birthDay; 
firstName = ABRecordCopyValue(aRecord, kABPersonFirstNameProperty); 
lastName  = ABRecordCopyValue(aRecord, kABPersonLastNameProperty); 
birthDay  = ABRecordCopyValue(aRecord, kABPersonBirthdayProperty); 

ABMutableMultiValueRef email = ABMultiValueCreateMutable(kABMultiStringPropertyType);
ABMultiValueAddValueAndLabel(email, txtEmailID.text, CFSTR("email"), NULL);
ABRecordSetValue(aRecord, kABPersonEmailProperty, email, &anError);
CFRelease(email);

ABMutableMultiValueRef multiPhone =  ABMultiValueCreateMutable(kABMultiStringPropertyType);
ABMultiValueAddValueAndLabel(multiPhone,txtMobileNo.text, kABPersonPhoneMainLabel, NULL);
ABRecordSetValue(aRecord, kABPersonPhoneProperty, multiPhone,nil);
CFRelease(multiPhone);

UIImage *personImage;   
personImage = tempimage;
NSData *dataRef = UIImagePNGRepresentation(personImage); 
CFDataRef dr = CFDataCreate(NULL, [dataRef bytes], [dataRef length]);
CFErrorRef error = NULL; 

ABPersonSetImageData(aRecord, dr, &error);  

ABAddressBookRef addressBook; 
addressBook = ABAddressBookCreate(); 

BOOL isAdded = ABAddressBookAddRecord (addressBook,aRecord,&error);

if(isAdded)
{
    NSLog(@"added..");
}
if (error != NULL) {
    NSLog(@"ABAddressBookAddRecord %@", error);
} 
error = NULL;

BOOL isSaved = ABAddressBookSave (addressBook,&error);

if(isSaved)
{
    UIAlertView* alertView = [[UIAlertView alloc] initWithTitle:@"Contact Save"
                                                        message:nil delegate:self 
                                              cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
    [alertView show];
    [alertView release];
    NSLog(@"saved..");
}

if (error != NULL) 
{
    NSLog(@"ABAddressBookSave %@", error);
} 

CFRelease(aRecord); 
CFRelease(firstName); 
CFRelease(lastName);
    CFRelease(birthDay); 
CFRelease(addressBook); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T10:25:30.400

Apple 的示例项目 QuickContacts 涵盖以下内容：http: [//developer.apple.com/library/ios/#samplecode/QuickContacts/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/QuickContacts/Introduction/Intro.html)。

我希望它对你有帮助。

# android - 将日期时间转换为“2012 年 4 月 6 日”格式

> ID：10316827
> 
> 赞同：12
> 
> 时间：2012-04-25T13:35:11.843
> 
> 标签：android

我想在**“6th 7th..等”度过这****一天。**日期字符串。

 **我已经尝试过[SimpleDateFormater](https://developer.android.com/reference/java/text/SimpleDateFormat.html)并且也尝试过[DateFormatSymbols](https://developer.android.com/reference/java/text/DateFormatSymbols.html)。我没有得到必需的字符串。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-25T13:54:30.167

```
SimpleDateFormat format = new SimpleDateFormat("d");
String date = format.format(new Date());

if(date.endsWith("1") && !date.endsWith("11"))
    format = new SimpleDateFormat("EE MMM d'st', yyyy");
else if(date.endsWith("2") && !date.endsWith("12"))
    format = new SimpleDateFormat("EE MMM d'nd', yyyy");
else if(date.endsWith("3") && !date.endsWith("13"))
    format = new SimpleDateFormat("EE MMM d'rd', yyyy");
else 
    format = new SimpleDateFormat("EE MMM d'th', yyyy");

String yourDate = format.format(new Date()); 
```

试试这个，这看起来像一些静态的，但工作正常......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-25T13:59:39.300

干得好：

```
/**
 * Converts Date object into string format as for e.g. <b>April 25th, 2012</b>
 * @param date date object
 * @return string format of provided date object
 */
public static String getCustomDateString(Date date){
    SimpleDateFormat tmp = new SimpleDateFormat("MMMM d");

    String str = tmp.format(date);
    str = str.substring(0, 1).toUpperCase() + str.substring(1);

    if(date.getDate()>10 && date.getDate()<14)
        str = str + "th, ";
    else{
        if(str.endsWith("1")) str = str + "st, ";
        else if(str.endsWith("2")) str = str + "nd, ";
        else if(str.endsWith("3")) str = str + "rd, ";
        else str = str + "th, ";
    }

    tmp = new SimpleDateFormat("yyyy");
    str = str + tmp.format(date);

    return str;
} 
```

**样品**：

```
Log.i("myDate", getCustomDateString(new Date())); 
```

> 2012 年 4 月 25 日

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-02T04:09:08.843

以下方法可用于获取传递给它的日期的格式化字符串。它会使用 Java 中的 SimpleDateFormat 将日期格式化为 1st、2nd、3rd、4th ..。例如：- 2015 年 9 月 1 日

```
public String getFormattedDate(Date date){
        Calendar cal=Calendar.getInstance();
        cal.setTime(date);
        //2nd of march 2015
        int day=cal.get(Calendar.DATE);

        switch (day % 10) {
        case 1:  
            return new SimpleDateFormat("MMMM d'st', yyyy").format(date);
        case 2:  
            return new SimpleDateFormat("MMMM d'nd', yyyy").format(date);
        case 3:  
            return new SimpleDateFormat("MMMM d'rd', yyyy").format(date);
        default: 
            return new SimpleDateFormat("MMMM d'th', yyyy").format(date);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T13:46:25.280

您可以[继承 SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)并覆盖格式，并使用一个简单的实用程序函数，该函数接受一个字符串或整数并返回一个带有“nd”或“st”附加的字符串......类似于：

```
if (initialDate.equals("2") || initialDate.equals("22"){
    return initialDate += "nd";
}else if {initialDate.equals("3") || initialDate.equals("23"){
    return initialDate += "rd";
}else{
    return initialDate += "th";
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-01T09:41:52.787

对于任何想要使用[SimpleDateFormat的干净静态](https://developer.android.com/reference/java/text/SimpleDateFormat)[Kotlin](https://kotlinlang.org/)版本的人：

```
class Utils {

    companion object {
        private val dateFormat = SimpleDateFormat("MMM d, yyyy", Locale.getDefault())

       fun formatDate(date: Date): String {
            val oi = getOrdinalIndicator(date)
            return dateFormat.apply {
                applyPattern("MMM d'$oi', yyyy")
            }.format(date)
        }

        private fun getOrdinalIndicator(date: Date): String {
            val day = newCalendar(date).get(Calendar.DAY_OF_MONTH)

            if (day == 11 || day == 12 || day == 13) {
                return "th"
            }

            return when (day % 10) {
                1 -> "st"
                2 -> "nd"
                3 -> "rd"
                else -> "th"
            }
        }

        private fun newCalendar(date: Date): Calendar {
            return Calendar.getInstance().apply {
                time = date
            }
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-06T06:00:35.337

下面的代码可能很有用；

```
 SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd");
  Date date1 = format.parse("2018-06-06");
  String date = format.format(date1);

  if(date.endsWith("01") && !date.endsWith("11"))
    format = new SimpleDateFormat("d'st' MMM, yyyy");

  else if(date.endsWith("02") && !date.endsWith("12"))
    format = new SimpleDateFormat("d'nd' MMM, yyyy");

  else if(date.endsWith("03") && !date.endsWith("13"))
    format = new SimpleDateFormat("d'rd' MMM, yyyy");

  else
    format = new SimpleDateFormat("d'th' MMM, yyyy");

String yourDate = format.format(date1); 
```

您将获得 2018 年 6 月 6 日。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-10T12:50:05.047

```
 public static String getDateText(String day){
      if(day.equalsIgnoreCase("1") || day.equalsIgnoreCase("21") || 
        day.equalsIgnoreCase("31")){
        return "st";
      }else if(day.equalsIgnoreCase("2") || day.equalsIgnoreCase("22")){
        return "nd";
      }else if(day.equalsIgnoreCase("3") || day.equalsIgnoreCase("23")){
        return "rd";
      }else {
        return "th";
      }
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-16T05:01:31.787

所以这是用**kotlin**编写的工作代码。

```
 /**
         * Format the given date like Today, Tomorrow, Yesterday, 11th Nov, 2nd Dec etc.
         */
        fun getFormattedDay(context: Context, strFromDate: String, strFromDateFormat: String) : String
        {
            var formattedDay = ""
            val fromDateFormatter = SimpleDateFormat(strFromDateFormat, Locale.UK)
            val fromDate = fromDateFormatter.parse(strFromDate)

            val tty = getTTYDay(context, strFromDate, strFromDateFormat)
            if (!tty.isEmpty()) {
                return tty
            }

            val dayFormatter = Constants.SIMPLE_DATE_FORMAT_D
            val monthAndYearFormatter = Constants.SIMPLE_DATE_FORMAT_MMM_YYYY

            formattedDay = dayFormatter.format(fromDate)
            val dayOfMonth = formattedDay.toInt()

            if (dayOfMonth in 11..13) {
                formattedDay += "th, "
            }
            else {
                if (formattedDay.endsWith("1")) {
                    formattedDay += "st, "
                }
                else if (formattedDay.endsWith("2")) {
                    formattedDay += "nd, "
                }
                else if (formattedDay.endsWith("3")) {
                    formattedDay += "rd, "
                }
                else {
                    formattedDay += "th, "
                }
            }

            formattedDay += monthAndYearFormatter.format(fromDate)

            return formattedDay
        }

        /**
         * This method returns today, tomorrow or yesterday or else empty string.
         */
        fun getTTYDay(context: Context, strFromDate: String, strFromDateFormat: String) : String
        {
            val fromDateFormatter = SimpleDateFormat(strFromDateFormat, Locale.UK)
            return if (strFromDate == fromDateFormatter.format(Date())) {
                context.getString(R.string.today)
            }
            else if (strFromDate == fromDateFormatter.format(getYesterdayDate())) {
                context.getString(R.string.yesterday)
            }
            else if (strFromDate == fromDateFormatter.format(getTomorrowDate())) {
                context.getString(R.string.tomorrow)
            }
            else {
                ""
            }
        }

        fun getYesterdayDate(): Date {
            val cal = Calendar.getInstance()
            cal.add(Calendar.DATE, -1)
            return cal.time
        }

        fun getTomorrowDate(): Date {
            val cal = Calendar.getInstance()
            cal.add(Calendar.DATE, 1)
            return cal.time
        } 
```

此方法也可以作为静态方法调用。如何使用 ？

像这样调用这个方法

> getFormattedDay（上下文！！，“2018 年 11 月 16 日”，“dd/MM/yyyy”）

你会得到如下结果：

> 今天或明天或昨天或 2018 年 11 月 16 日

希望这对您有所帮助。如果今天不想，明天再删除`getTTYDay`方法调用。

使用的不同类型的日期格式：

```
 val DATE_FORMAT_DD_MM_YYYY_1 = "dd/MM/yyyy"
        val DATE_FORMAT_DD_MM_YYYY_2 = "dd MM yyyy"
        val DATE_FORMAT_DD_MMM_YYYY_1 = "dd MMM yyyy"
        val DATE_FORMAT_MMM_YYYY_1 = "MMM yyyy"
        val DATE_FORMAT_D_1 = "d"

        val SIMPLE_DATE_FORMAT_DD_MM_YYYY = SimpleDateFormat(DATE_FORMAT_DD_MM_YYYY_2, Locale.UK)
        val SIMPLE_DATE_FORMAT_DD_MMM_YYYY = SimpleDateFormat(DATE_FORMAT_DD_MMM_YYYY_1, Locale.UK)
        val SIMPLE_DATE_FORMAT_MMM_YYYY = SimpleDateFormat(DATE_FORMAT_MMM_YYYY_1, Locale.UK)
        val SIMPLE_DATE_FORMAT_D = SimpleDateFormat(DATE_FORMAT_D_1, Locale.UK) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-09-18T09:24:52.393

Kotlin 版本 - 更新代码

```
 fun getFormattedDate(dateStr: String):String{
        try {
            var format = SimpleDateFormat("MM/dd/yyyy")//change your timeformat
            val date1 = format.parse(dateStr)
            var date = format.format(date1)

            if (date.startsWith("1") && !date.startsWith("11"))
                format = SimpleDateFormat("d'st' MMM, yyyy")
            else if (date.startsWith("2") && !date.startsWith("12"))
                format = SimpleDateFormat("d'nd' MMM, yyyy")
            else if (date.startsWith("3") && !date.startsWith("13"))
                format = SimpleDateFormat("d'rd' MMM, yyyy")
            else
                format = SimpleDateFormat("d'th' MMM, yyyy")

            val yourDate = format.format(date1)
            return yourDate
        }
        catch (ex: Exception){
            return dateStr
        }
    } 
```**

# javascript - 在不离开页面的情况下根据用户表单条目填充隐藏的表单值

> ID：10316830
> 
> 赞同：1
> 
> 时间：2012-04-25T13:35:16.040
> 
> 标签：javascript

有点卡在这里......基本上，我有一个调用 REST 服务的 PHP 脚本，解释结果。我们决定我想在不刷新页面的情况下调用所述服务，以填充表单而不需要刷新。因此，我尝试在 Javascript 中做我需要的事情。以下是初始尝试，请记住，这会使页面当前停止加载，并且在 Firefox 控制台中没有呈现任何错误。我希望有任何提示或推动正确的方向！

1.  项目清单

    ```
     var url = "http://urltoquery"; 

        function getleademail() { 

        var idValue = document.getElementById("sublabel_postal").value; 

        http.open("GET", url + escape(idValue), true); 

        http.onreadystatechange = handleHttpResponse; 

        http.send(null); }

        function handleHttpResponse() { 

        var results = http.responseText; 

                          } 
    ```

# c++ - 来自 QObject 继承类中的 winsock 的连接函数

> ID：10316836
> 
> 赞同：3
> 
> 时间：2012-04-25T13:35:30.497
> 
> 标签：c++, qt, sockets, winsock

我想在我的课堂上使用 winsock 函数（而不是 QTcpSocket 或 QUdpSocket）。但是我的类继承了QObject，所以来自QObject的connect（）与来自winsock2.h的connect（）冲突我怎么能绕过这个冲突，我正在搜索“Winsock2 :: connect（）”或类似的东西，但我找不到。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T14:24:34.690

尝试使用`::connect`（用于 winsock 连接）和`this->connect`或`QObject::connect`用于 Qt 的连接（）。

# c# - 访问 PC 音频输入流

> ID：10316838
> 
> 赞同：3
> 
> 时间：2012-04-25T13:35:48.050
> 
> 标签：c#, java, c++, audio, hardware

我希望能够访问连接到无线电接收器的计算机传入音频输入流。我想连续读取传入的频率。我真的不知道从哪里开始。非常感谢对主题的任何帮助。我如何才能访问计算机硬件，例如 C# 或 C++？有没有为此目的提供 API 的语言？我知道使用 C、C++、Java 和 C# 进行编程，但如果有其他更容易完成的语言，那就更可取了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:32:03.797

我发现[JUCE](http://www.rawmaterialsoftware.com/juce.php)库最适合此目的。它是非常跨平台的 C++，让您可以轻松地从各种音频设备获取实时流，而无需大惊小怪。下载包含一个带有音频演示的演示应用程序。您可以复制此代码作为起点。

该库可在开源软件中免费使用，并且具有价格适中的商业许可证。

# javascript - 循环遍历 DOM 时如何检查是否到达了 body 元素？

> ID：10316839
> 
> 赞同：0
> 
> 时间：2012-04-25T13:35:49.527
> 
> 标签：javascript, jquery, compare

我正在通过 DOM 从链接元素循环到具有类*.ui-mobile-viewport*的最近元素。这可以是**DIV**或**BODY**元素。

我需要检查它是哪个元素并且无处可去......这就是我正在尝试的：

```
var targetViewport; 
```

// 循环将 targetViewport 设置为 $('div.ui-mobile-viewport') 或 $('body.ui-mobile-viewport')

```
if ( targetViewport === $('body') ) {
   console.log("found a body");
   } 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T13:42:05.553

`.closest()`您可以尝试使用jQuery的方法，而不是自己进行遍历。所以我认为你可以这样做：

```
var x = $('thing-that-was-clicked').closest('.ui-mobile-viewport');
alert(x.is('body'));
alert(x.is('div')); 
```

现在您将该`.ui-mobile-viewport`元素作为一个 jQuery 对象，您可以在其上运行任何您想要的测试，例如检查`body`或`div`如上面的代码所示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T13:37:28.083

您无法比较 jQuery 集合...您必须实际比较它们的节点，因此假设 targetViewport 还包含您可以执行的 jQuery 集合

```
if ( targetViewport[0] === document.body ) {
  console.log("found a body");
} 
```

应该管用...

编辑：如果你喜欢 jQuery 方式（带有额外的函数调用）

```
if (targetViewport.is('body')) {
  console.log("found a body");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T13:44:43.550

您可以简单地访问元素的 nodeName。

```
if (targetViewport[0].nodeName.toUpperCase() === 'BODY') {

} 
```

这样就不需要为你的检查做任何 CSS 查询，调用 jQuery 并且它不依赖于任何库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T13:41:52.463

```
if(targetViewport[0] === document.body)
if(targetViewport[0].nodeName === 'BODY') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T13:37:20.487

您正在寻找[`.is()`方法](http://api.jquery.com/is/)，它检查元素是否与选择器匹配。

```
if (targetViewport.is('body')) 
```

# castle-windsor - 如何扩展 Castle Windsor LoggingFacility/ILogger

> ID：10316841
> 
> 赞同：1
> 
> 时间：2012-04-25T13:35:57.867
> 
> 标签：castle-windsor, log4net

我一直在使用 log4net 和 Castle Windsor LoggingFacility 将 ILogger 实例注入到需要记录的类中。记录器的注册方式如下：-

```
container.AddFacility<LoggingFacility>(f => f.UseLog4Net()); 
```

在需要记录的类中，我创建了 Windsor 注入的以下属性：

```
public ILogger Logger { get; set; } 
```

一切正常，但我想以某种方式扩展此日志记录以允许我跟踪方法进入和退出。在 Castle Windsor 之前，我会围绕 log4net 编写一个包装器并添加诸如 TraceEnter() 和 TraceExit() 之类的方法。这些将从 StackTrace 类中获取当前方法名称并执行*Log.Debug("Entered method Foo");*

我不确定扩展温莎城堡伐木资料以实现这一目标的最佳方式。有任何想法吗？

**编辑：**

我现在创建了自己的自定义记录器工厂（从 Log4netFactory 继承）和自定义记录器（从 Log4netLogger 继承，并包含我的 Trace... 方法），然后像这样在 Windsor 中注册它：-

```
container.AddFacility<LoggingFacility>(f => f.LogUsing<CustomLoggerFactory>()); 
```

不幸的是，我仍然必须在我的类中公开 ILogger 类型的公共属性，否则 Windsor 不会注入记录器。我可以将它转换为我的自定义记录器，但它不是很优雅：

```
(Logger as CustomLog4NetLogger).TraceEnter(); 
```

# opengl - 编写 OpenGL 和 OpenGL ES 兼容代码的指南？

> ID：10316842
> 
> 赞同：9
> 
> 时间：2012-04-25T13:35:58.437
> 
> 标签：opengl, opengl-es, cross-platform, compatibility

我熟悉 OpenGL 和 OpenGL ES 之间的基本区别，例如没有 glBegin、glEnd、没有四边形等等。

因此，我的问题不是关于这两个 API 之间的差异，而是关于编写可以在这两个 API 及其各种实现上实际工作的代码，特别是关于 ES，其中实现似乎变化更大。

自然，这意味着要符合两个 API 中都存在的功能和相同的语法，没有什么太花哨和最前沿的，OpenGL ES 2 是最低的公分母。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T02:37:08.233

您可能对新的 OpenGL ES 兼容性扩展[ARB_ES2_compatibility 感兴趣](http://www.opengl.org/registry/specs/ARB/ES2_compatibility.txt)（在 OpenGL 4.1 中添加到核心）

当然，实际使用该扩展需要支持较新的 4.1 桌面 OpenGL，但您可以通读它们并查看在桌面上获得 ES 支持所需的内容，并在您的 ES 代码中尽可能避免这种情况。不过，可能有些东西与旧的桌面 OpenGL 版本不兼容，主要是一些着色器的东西，比如浮点精度。

还有[ARB_ES3_compatibility](http://www.opengl.org/registry/specs/ARB/ES3_compatibility.txt)（OpenGL 4.3 中的核心），但它可能是安全的，因为它是针对 OpenGL ES 3.0 的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T18:45:02.813

根据 Khronos OpenGL ES 是桌面 OpenGL 的一个子集，因此要编写兼容代码，您只需要使用 OpenGL ES 文档。

引自[http://www.khronos.org/opengles/](http://www.khronos.org/opengles/)

> OpenGL® ES 是一种免版税的跨平台 API，用于嵌入式系统（包括控制台、电话、电器和车辆）上的全功能 2D 和 3D 图形。它由定义良好的桌面 OpenGL 子集组成

编辑：正如贾斯汀迈纳斯在评论中指出的那样，在细节方面实际上存在一些差异。David C. Bishop 的回答对此有更多信息。

# c# - WebBrowser.Document.Cookie 不接受我的 CookieContainer cookie

> ID：10316847
> 
> 赞同：1
> 
> 时间：2012-04-25T13:36:16.137
> 
> 标签：c#, cookies, browser, cookiecontainer

我正在尝试显示一个需要先登录的网页。我正在使用 HttpWebRequest/Response 对象通过在后台收集会话和授权 cookie 来部分完成日志记录。

登录后，HttpWebResponse 对象返回给我我想通过 WebBrowser 控件向用户显示的 HTML 页面，因此我知道我有正确的会话/授权 cookie 集来访问所需的网页。

使用相关 cookie 正确填充 CookieContainer 后，我将 WebBrowser.DocumentText 属性设置为准备好的 HTML，其中包含对我要显示的网址的 GET 命令。浏览器弹出尝试呈现准备好的 HTML，我假设我收到与丢失 cookie 相关的服务器错误。

当我在调用 DocumentText 属性之前尝试设置 WebBrowser.Document.Cookie 时，在我看到的调试器中，Cookie 属性在尝试将其设置为“cookName=cookValue;cookName=”形式的字符串后始终保持为空烹饪价值；”。

为什么 Cookie 属性拒绝我传递的 cookie 字符串？这与 HttpOnly cookie 有关吗？我的 cookie 字符串格式不正确吗？我是否试图在错误的时间设置 Cookie 属性？

我进行了 WebBrowser.Navigate("about:blank") 调用，这似乎是正确初始化 WebBrowser 对象所必需的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T22:17:30.917

这对我有用：

```
 using System.Runtime.InteropServices;

  [DllImport("wininet.dll",CharSet = CharSet.Auto, SetLastError = true)]
  public static extern bool InternetSetCookie(string lpszUrlName, string lbszCookieName, string lpszCookieData);

  //'CookieCollection' was populated using HttpWebRequest/Response calls
  int i=0;
  InternetSetCookie("https://www.myurl.com/", null, CookieCollection[i++].ToString() + "; expires = Sun, 01-Jan-2013 00:00:00 GMT");
  //repeat for however many cookies you've got

  browser.Navigate("https://www.myurl.com/tools/..../Index.aspx?t=someValue", true);
  //or
  browser.DocumentText = someHtml; 
```

笔记：

1) 不包括“过期”值，尽管返回“真”，但 InternetSetCookie 调用不起作用。"expires" 值将 cookie 转换为持久 cookie，而不是仅会话 cookie。

2) 'browser.Navigate("about:blank");' 似乎不需要。无论有没有这个声明，我都能访问我的页面。

3) browser.Document.Cookie 从来没有为我工作过（总是为空），不管我扔了什么。而且我尝试了很多不同的字符串，包括传递给 InternetSetCookie 的第三个参数的字符串。

# c++ - 如何在没有嵌套作业对象的情况下可靠地控制子进程生命周期？

> ID：10316848
> 
> 赞同：5
> 
> 时间：2012-04-25T13:36:16.757
> 
> 标签：c++, c, winapi

Job Objects 上的[MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684161(v=vs.85).aspx)解释说：

> 一个进程只能与一个作业相关联。作业不能嵌套。Windows 8 Consumer Preview 和 Windows Server 8 Beta 中添加了嵌套作业的功能。

不幸的是，这似乎正是我所需要的。我正在处理这样的进程树：

```
server.exe
  |
  +--+ utility.exe
  |
  +--+ launcherA.exe
  |      |
  |      +--+ programA.exe
  |             |
  |             +--+ subProcessA.exe
  |
  +--+ launcherB.exe
         |
         +--+ programB.exe 
```

我尝试实现以下行为：

1.  如果`server.exe`以某种方式终止（因为它崩溃，或者因为用户决定使用任务管理器终止它，或者仅仅因为它完成执行），它会删除它下面的所有进程。我为此使用了一个工作对象。

2.  如果`launcherA.exe`或`launchedB.exe`因某种原因终止，它们会删除它们下面的所有进程。不幸的是，我不能在这里使用作业对象，因为作业对象不嵌套。

事实上，我经常通过杀死上述树中的任意进程来创建“悬空”进程。我尽量避免留下任何陈旧的进程，但到目前为止我提出的所有解决方案都依赖于某种监视其他进程的看门狗进程——但如果看门狗本身被杀死，所有希望都将落空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:32:45.953

我认为人们误解了Windows 8 将支持的新功能[Nested Jobs是什么。](http://msdn.microsoft.com/en-us/library/windows/desktop/hh448388.aspx)

如果您使用启动进程`server.exe`启动进程`launcherA.exe`启动进程`subProcessA.exe`等等，您只需要开始`server.exe`工作即可。这样一来，所有其他孩子（`launcherA.exe`等`subProcessA.exe`）*将*在与他的父母相同的工作中自动启动。因此，您可以一次监控所有进程集合。例如，您甚至可以在每次启动新进程时收到通知，以创建详细的日志文件。我在一些应用程序上做了这个，效果很好。

您可以收到的唯一问题是子 exe 中的一些是否也“足够现代”并使用乔布斯来控制*他的*孩子。只有在您必须使用新的嵌套作业的情况下。

如果我理解正确您的问题，您当前的问题可以通过`server.exe`只安排一份新工作来简单地解决。

# ruby - 使用 Active Admin [RoR] 创建自定义表单和自定义操作

> ID：10316849
> 
> 赞同：1
> 
> 时间：2012-04-25T13:36:19.190
> 
> 标签：ruby, ruby-on-rails-3, activeadmin

我正在开发一个应用程序，用户可以在该应用程序中创建来自公司的汽车维修服务请求。用户登录并创建请求。该请求包含将发送的汽车的详细信息以及客户对问题可能是什么的假设。

请求可以包含一辆或无限辆汽车的详细信息。会有一个请求表和一个汽车表，最重要的是一个表格的汽车故障表：

```
CAR
ID | DETAILS

REQUEST
ID|CUSTOMERID|DETAILS

CAR_TROUBLE_REQUEST
ID|CARID|REQUEST_ID|TROUBLE_DETAILS|PICKUPDATE|PICKUPPOINT 
```

我需要使用 activeadmin 构建一个自定义表单和处理程序，它可以执行以下操作：

了解汽车的基本细节（检查是否存在注册号的汽车，然后使用该汽车，否则进入并使用它）

详细了解汽车面临的问题。

为此，它必须在三个表中进行条目 - 现在我已经为所有三个表设置了基本模型，甚至创建了表单但是使用 activeadmin 如何处理提交的表单？

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T21:37:27.313

在文档[http://activeadmin.info/docs/8-custom-actions.html#rendering_in_custom_actions](http://activeadmin.info/docs/8-custom-actions.html#rendering_in_custom_actions)中，您可以找到以下示例：

```
 ActiveAdmin.register Post do

    # /admin/posts/:id/comments
    member_action :comments do
      @post = Post.find(params[:id])

      # This will render app/views/admin/posts/comments.html.erb
    end

  end 
```

在`app/views/admin/posts/comments.html.erb`文件内部，您可以定义自己的表单。

使用另一个代码片段 - [http://activeadmin.info/docs/8-custom-actions.html#member_actions](http://activeadmin.info/docs/8-custom-actions.html#member_actions)您可以定义相应表单的操作。

# c# - 从另一个解决方案动态加载 dll

> ID：10316850
> 
> 赞同：1
> 
> 时间：2012-04-25T13:36:24.880
> 
> 标签：c#, visual-studio-2010, dll

您好，我有这段代码可以从我的解决方案中的项目加载 dll。Dll 现在处于另一个解决方案中。

```
public void LoadCalculationExpert(string pathToExpert)
{
    var assembly = Assembly.LoadFrom(pathToExpert);
    var type = assembly.GetType("Expert.CalculationExpert");
    var calculationExpert = (ICalculationExpert)Activator.CreateInstance(type);
    this._container.RegisterInstance(calculationExpert, new ContainerControlledLifetimeManager());
} 
```

Dll 实现了一个与`ICalculationExpert`. 事实上，我将界面复制到了另一个解决方案。所以我知道强制转换应该起作用，因为它是一个实现相同接口的对象。

问题是它抛出了无效的演员表异常。

我的猜测是位于另一个名称空间中的接口会导致演员表出现问题。

和在另一个解决方案中`CalculationExpert`。在我的解决方案中`ICalculationExpert``namespace Expert``ICalculationExpert``namespace GSoft.Sons.Bll.ScoreExpert`

我可以阅读任何想法或资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:49:19.033

根据 OOP 原则，将接口复制到您的解决方案不会使其完全相同。如果您有权访问 dll（具有 ICalculationExpert 接口的命名空间专家），为什么不在您的解决方案中添加 dll 引用，通过它您可以从命名空间专家实现相同的接口。

# javascript - 使用 Knockoutjs 动态调整页面内容以适应用户的语言选择？

> ID：10316863
> 
> 赞同：2
> 
> 时间：2012-04-25T13:36:58.243
> 
> 标签：javascript, knockout.js, localization

我正在尝试使用 Knockoutjs 根据用户在下拉菜单中所做的语言选择来动态更改网页上标签的语言/内容。

目前我正在为语法而苦苦挣扎。我在[jsFiddle中提供了我的情况示例](http://jsfiddle.net/dWw7F/13/)

**我可以做什么：**

*   检索选择的值 (id)。
*   通过手动输入如下索引，从语言数组中检索/显示“选择的”标签内容：

    ```
    self.chosenLang = languages[0]; 
    ```

**我不能做的：**

*   通过使用选择的值 (id) 从语言数组中检索/显示“选择的”标签内容。像这样的东西：

    ```
    self.chosenLang = languages[self.selectedChoice]; 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:03:40.927

我已经更新了你的小提琴：http: [//jsfiddle.net/dWw7F/14/](http://jsfiddle.net/dWw7F/14/)

我所做的是我在`selectedChoice`observable 上添加了一个订阅，以便我可以检测到它何时发生变化。订阅的一个方便之处是它们在订阅者被调用时包含发布者的值，因此是函数`choice`中的参数。

```
self.selectedChoice.subscribe(function(choice) {
   self.chosenLang(languages[choice]);        
}); 
```

然后我将其提升`chosenLang`为可观察对象，以使 DOM 检测到其上的更改。此更改还使我更改了 html 中的绑定，我必须在其中使用它：

```
<p data-bind="text: chosenLang().q3"></p> 
```

请注意`chosenLang()`使用括号。这是因为我们想要访问 observables 数据，而不是直接访问 observable。

# c# - 正则表达式删除由空格分隔的连续 1-2 个字符集

> ID：10316867
> 
> 赞同：2
> 
> 时间：2012-04-25T13:37:06.230
> 
> 标签：c#, regex

我的正则表达式受损，所以我为此道歉，并想提前感谢任何可以帮助我的人。

我的文字如下：

```
real text that i want to keep i e 2 2 1 i h i i i E h i L h R 9 more real text
i e 1 i tr L h R 1 i L ? i j 1 more real text that i want to keep d i j 0 etc... 
```

您可以看到出现的“垃圾”文本部分 - 这些是我要删除的内容。我不一定要寻找 100% 的准确度，但我想要一个可以摆脱大部分这些部分的正则表达式。我认为垃圾文本是任何有四个或更多连续出现的一个或两个字符，后跟一个空格的部分。

如标签中所述，我正在使用 c#。再次感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:41:06.007

像这样的东西？

```
\b(.{1,2}\s){4,} 
```

如果您知道允许使用哪些字符，您显然可以将句号/句点替换为更精确的匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T13:48:55.580

只是另一个正则表达式解决方案：`(\s+(\S{1,2}(?=\s))){2,}`

# r - 在 R 中使用 PSO 进行神经网络训练

> ID：10316869
> 
> 赞同：6
> 
> 时间：2012-04-25T13:37:16.067
> 
> 标签：r, neural-network, particle-swarm

我需要在 R 环境中使用 PSO 算法训练神经网络。我已经知道所有关于神经网络的 R 包（neuralnet、AMORE 等），但其中没有一个包含 PSO 训练（只有反向传播）。

想法？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-14T11:22:09.973

过去我使用 PSO 来优化 R 中 XGBoost 模型的超参数。

这篇文章见[这个链接](https://rpubs.com/jeandsantos88/search_methods_for_hyperparameter_tuning_in_r)

希望这可以帮助！

# model - 当不应该返回结果时，OneToMany 返回 1 个结果？

> ID：10316871
> 
> 赞同：0
> 
> 时间：2012-04-25T13:37:23.210
> 
> 标签：model, playframework-2.0, ebean

我有两个模型，第二个是映射到相同的第一个模型两次，具有特定值（它具有带有附加值的 ManyToMany 表的作用）：

```
public class ModelB extend Model {
    public ModelA parent;
    public ModelA child;
    public String value;
    public boolean verified = true;
} 
```

在模型 A 中：

```
@OneToMany(mappedBy="child")
List<ModelB> items; 
```

如果 ModelB 的数据库中没有条目，我会执行`modelA.items.size()`=> 1！

为什么是 1？它应该是 0。

这会导致有关布尔值和其他一些无法解释的错误。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T19:57:28.303

[http://www.avaje.org/ebean/introquery_joinquery.html](http://www.avaje.org/ebean/introquery_joinquery.html)

看起来，当使用上面链接中描述的“获取连接”加入时，大概这是 Ebean 当前的行为。但是，您可以通过对 OneToMany 关系执行“查询连接”来解决这个问题，如下所示：

```
List<Order> orders =   
Ebean.find(Order.class)  
    .fetch("customer", new FetchConfig().query())  
    .findList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T07:35:59.210

我遇到了同样的问题，并且能够通过向辅助表（ModelB）添加标识列来解决它。我没有调查原因，但我认为 Ebean 在这种情况下需要表上的主键。

# asp.net - 将参数传递给 jqueryui 对话框

> ID：10316873
> 
> 赞同：1
> 
> 时间：2012-04-25T13:37:25.473
> 
> 标签：asp.net, json, jquery, jquery-ui-dialog

嗨，我需要将选定的下拉列表值传递给 jqueryui 对话框，当用户单击链接时，例如，如果用户选择产品一并单击链接，则对话框应弹出显示产品 1 已选择，我可以显示对话框：

```
<script>
    $(document).ready({
     $('a.login').click(function(){

        $( "#dialog:ui-dialog" ).dialog( "destroy" );

        $( "#product" ).dialog({
            height: 140,
            modal: true
        });
    });
    </script>

 <div class="login-homepage">
    <asp:DropDownList ID="DropDownList1" runat="server">
    <asp:ListItem Text="product1" Value="product1">Camera</asp:ListItem>
    <asp:ListItem Text="product2" Value="product2">DVD</asp:ListItem>
    <asp:ListItem Text="product3" Value="product3">LCD</asp:ListItem>
    </asp:DropDownList>
 <a href="#" id="login">login</a>
<div id="product" title="product-container">
    //show the selected dropdownlist
</div> 
```

问题是我无法传递下拉列表的选定值，由于缺乏知识，我尝试使用 ajax json 传递它但没有成功，任何人都可以帮助我或就如何解决这个问题提供任何建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:49:25.550

我猜您想使用 ajax 将下拉列表中的选定值传递到另一个服务器页面并获取响应并在对话框中显示。我将这样做。

```
$(function(){

 $('a.login').click(function(){

     var selectedVal=$("#DropDownList1").val();
     var url="myserverpage.aspx?product="+selectedVal;

        var dialog = $("#dialog");
        if ($("#dialog").length == 0) {
            dialog = $('<div id="dialog" style="display:hidden"></div>').appendTo('body');
        }
        dialog.load(
            url,
            {}, // omit this param object to issue a GET request instead a POST request, otherwise you may provide post parameters within the object
            function (responseText, textStatus, XMLHttpRequest) {
                dialog.dialog({                       
                    close: function (event, ui) {                            
                        dialog.remove();
                    },
                    modal: true,
                    width: 460
                });
            }
        );
    }); 

}); 
```

并且在 myserverpage.aspx 中，从 querystring 产品中读取值并返回要在对话框中显示给用户的相关 HTML 标记。如果您将 jQuery 和 jQuery UI 正确加载到您的页面，它将起作用。

该脚本将即时为弹出窗口本身创建一个 div。您不需要为此添加一页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:41:46.093

无论是否显示，您的下拉菜单都是页面的一部分。因此，您可以像操作任何下拉框一样操作它。就像是：

像这样设置值：

```
$("#DropDownList1").val("product2"); 
```

`#product`根据从下拉列表中选择的值填充这样的文本：

```
$("#product").text( $("#DropDownList1").val() ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T13:42:30.560

您是否尝试过使用该[`.html()`](http://api.jquery.com/html/)方法？您可以执行以下操作：

```
$(document).ready({

    $("a#login").click(function(e) {

        $("#dialog:ui-dialog").dialog("destroy");

        $("#product").dialog({

            height: 140,
            modal: true

        }).html($("#DropDownList1 option:selected").attr("Text"));

        e.preventDefault();

    });

}); 
```

***[见 jsFiddle 演示](http://jsfiddle.net/DotNetScott/8N4RX/)***

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T13:46:07.223

由于您在同一页面上，因此无需 Ajax 即可访问 DOM。

```
$(document).ready({
     $('a.login').click(function(){

        $( "#dialog:ui-dialog" ).dialog( "destroy" );
        $( "#product .product-info" ).html('You have selected product ' +  $("#DropDownList1").val() + ' from the list.');
        $( "#product" ).dialog({
            height: 140,
            modal: true
     });
});

<div id="product" title="product-container">
    <div class="product-info"></div>
</div> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T14:54:06.003

首先，您的问题中的脚本存在问题。

*   准备好的文件格式不正确。
*   登录选择器使用一个类，它应该是一个 id “a#login”，但更好的是简单的“#login”，因为 id 选择器将比标签更快。
*   我看不出您为什么要销毁对话框，而且该 id 甚至不在您的标记中。
*   我认为您首先不需要自动打开对话框，然后在注入新的选择值后打开它。

您希望从列表中选择，然后在对话框内动态填充另一个列表。

这一切都不是太难，但需要一些返工才能让它如你所愿。因此，我以您陈述的愿望呈现这个样本。

您将希望增强它以满足您的最终产品，可能是一些 ajax 东西来填充对话框中的产品列表等，但它应该让您开始。

在此处查看以下内容的工作副本：http: [//jsfiddle.net/MarkSchultheiss/u8TMh/1/](http://jsfiddle.net/MarkSchultheiss/u8TMh/1/)

```
$(document).ready(function() {
    $("#productdialog").dialog({
        height: 140,
        modal: true,
        autoOpen: false
    });

    $('a#login').click(function() {
        var pick = $('#DropDownList1 option:selected').text();
        var pickVal = $('#DropDownList1 option:selected').val()
        $('#showem').text($('#DropDownList1 option:selected').text());
        var insertCount = 4;
        var optionList = '';
        while (insertCount--) {
            optionList = optionList + '<option value="' + pickVal + insertCount + '">' + pick + insertCount + '</option>';
        };
        $('#DialogList').html(optionList);
        $("#productdialog").dialog("open");
    });
}); 
```

以及我的“样本”的标记：

```
<select id="DropDownList1">
     <option value="product1">Camera</option>
     <option value="product2">DVD</option> 
     <option value="product3">LCD</option> 
 </select> 
 <a href="#" id="login">login</a> 
 <div id="product" title="product-container">show the selected dropdownlist </div>  
</div>
<div title='showproducts' id='productdialog' style="display:none"><div id='showem'></div>
 <select id="DialogList">
 </select> 
</div> 
```

# java - 无法运行 EMMA 代码覆盖率

> ID：10316876
> 
> 赞同：3
> 
> 时间：2012-04-25T13:37:31.417
> 
> 标签：java, code-coverage, emma

我安装了 Java SE Development Kit 7u3

我经历过一些与此类似的主题（例如[“java”成功，java emmarun“失败](https://stackoverflow.com/questions/7549362/java-succeeds-java-emmarun-fails)），但我的问题是 EMMA 根本不适合我。我运行后：

```
java -cp emma.jar emmarun -cp . Main 
```

它总是说：

```
[EMMA v2.0, build 5312]
emmarun: [MAIN_METHOD_NOT_FOUND] application class [Main] does not have a runnable public main() method
Exception in thread "main" com.vladium.emma.EMMARuntimeException: [MAIN_METHOD_NOT_FOUND] application class [Main] does not have a runnable public main() method
        at com.vladium.emma.rt.AppRunner._run(AppRunner.java:497)
        at com.vladium.emma.rt.AppRunner.run(AppRunner.java:97)
        at com.vladium.emma.runCommand.run(runCommand.java:247)
        at emmarun.main(emmarun.java:27)
Caused by: java.lang.VerifyError: Expecting a stackmap frame at branch target 11 in method Main.<init>()V at offset 4
        at java.lang.Class.getDeclaredMethods0(Native Method)
        at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
        at java.lang.Class.getMethod0(Unknown Source)
        at java.lang.Class.getMethod(Unknown Source)
        at com.vladium.emma.rt.AppRunner._run(AppRunner.java:493) 
```

编译运行良好（“javac Main.java”）并且应用程序正在运行（我从“java Main”获得预期的输出）。Main.java 的代码是简单的 HelloWorld 应用程序。

```
public class Main{

public static void main(String[] args) {
    System.out.println("Hello, World");
} 
```

我只是想在任何示例代码上运行 emmarun 以查看它是否正常工作。好吧，事实并非如此。关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T19:20:49.863

这似乎在一些地方突然出现。到目前为止，我发现的解决方案是：

*   由于您使用的是 Java 7，因此您的 emma 插件可能存在问题（如果使用 eclipse）。显然，为这个插件安装测试版允许使用 Java 7：链接：[Testng、Emma、Cobertura、coverage 和 JDK 7 导致 ClassFormatError 和 VerifyError](https://stackoverflow.com/questions/7010665/testng-emma-cobertura-coverage-and-jdk-7-result-in-classformaterror-and-verif)

*   来自同一链接的评论也谈到了使用 Java JVM 选项“-X:+UseSplitVerifier”来解决它。

# ruby - em-http-request - 我应该把 EventMachine.stop 放在哪里？

> ID：10316882
> 
> 赞同：4
> 
> 时间：2012-04-25T13:37:48.313
> 
> 标签：ruby, http, eventmachine

我想每 10 秒迭代一次 JSON-API，如果在 JSON 数据中找到某个密钥，则使用相同的连接（保持连接）执行第二个 HTTP 请求。如果我没有放入 `EM.stop`我的代码，程序在 req1.callback 中完成处理后停止等待。

如果我把它`EM.stop`放进去，`req2.callback`它就可以工作并且按预期进行迭代。

但是如果 JSON 文档中没有包含 key `foobar`，则程序在 req1.callback 中完成处理后停止等待。

如果我`EM.stop`在 req1.callback 中的最后一行添加，如果 JSON 文档具有 key ，则 req2.callback 将中止`foobar`。

如果 JSON 文档有我想要的，我应该如何正确放置`EM.stop`以使其迭代？

```
require 'eventmachine'
require 'em-http'

loop do    
  EM.run do
    c = EM::HttpRequest.new 'http://api.example.com/'

    req1 = c.get :keepalive => true
    req1.callback do
      document = JSON.parse req1.response
      if document.has_key? foobar   
        req2 = c.get :path => '/data/'
        req2.callback do
          puts [:success, 2, req2]
          puts "\n\n\n"
          EM.stop
        end
      end
    end
  end

  sleep 10
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:07:27.613

如果要使用计时器，则应使用 EM 提供的实际计时器支持：http: [//eventmachine.rubyforge.org/EventMachine.html#M000467](http://eventmachine.rubyforge.org/EventMachine.html#M000467)

例如：

```
require 'eventmachine'
require 'em-http'

EM.run do
  c = EM::HttpRequest.new 'http://google.com/'
  EM.add_periodic_timer(10) do
    # Your logic to be run every 10 seconds goes here!
  end
end 
```

这样，您可以让 EventMachine 一直运行，而不必每 10 秒启动/停止它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:58:56.267

```
require 'eventmachine'
require 'em-http'

loop do    
  EM.run do
    c = EM::HttpRequest.new 'http://google.com/'

    req1 = c.get :keepalive => true
    req1.callback do
      begin
        document = JSON.parse req1.response
        if document.has_key? foobar   
          req2 = c.get :path => '/data/'
          req2.callback do
            puts [:success, 2, req2]
            puts "\n\n\n"
            EM.stop
          end
        end
      rescue => e
        EM.stop
        raise e
      end
    end
    req1.errback do
      print "ERROR"
      EM.stop
    end
  end

  sleep 10
end 
```

# bash - 重击 ${!variable}

> ID：10316888
> 
> 赞同：8
> 
> 时间：2012-04-25T13:38:02.540
> 
> 标签：bash

我在这个问题上摸不着头脑，找不到关于它的 bash 参考资料。

在下面的代码中

```
host_color=${uphost}_host_color
host_color=${!host_color} 
```

第二行在做什么？在这种情况下 !operator 做了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T13:47:32.487

这是[间接引用](http://tldp.org/LDP/abs/html/ivr.html)的缩写形式。

```
$ foo=bar
$ bar=bas
$ echo ${!foo}
bas 
```

看似相似的构造[${!foo*}](http://tldp.org/LDP/abs/html/parameter-substitution.html#VARPREFIXM)扩展为*名称以 foo 开头的所有变量的名称*：

```
$ foo1=x
$ foo2=y
$ echo ${!foo*}
foo1 foo2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:45:49.067

来自 b [ash 手册](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)：

> 如果参数的第一个字符是感叹号（！），则引入了变量间接级别。Bash 使用由其余参数形成的变量的值作为变量的名称；然后扩展此变量，并将该值用于替换的其余部分，而不是参数本身的值。这称为间接扩展。例外情况是下面描述的 ${!prefix*} 和 ${!name[@]} 的扩展。

# javascript - 在父div的css子容器前面定位z-index问题？

> ID：10316891
> 
> 赞同：0
> 
> 时间：2012-04-25T13:38:18.870
> 
> 标签：javascript, html, css

有人可以看看[http://goo.gl/X5Dzp](http://goo.gl/X5Dzp)，你会看到一个带有 div css 的数据列表。

在他们的右侧是三个图标。我希望第一个图标的悬停隐藏我悬停时显示的弹出窗口的顶部边框。

当有人悬停时，我可以隐藏pop div顶部的边框。我已经尝试过[https://stackoverflow.com/a/7490193/1252580](https://stackoverflow.com/a/7490193/1252580) 但这对我不起作用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:33:50.730

您需要**将**以下样式添加到现有样式中：

```
/* any manually stacked elements need a 'position' with another value than 'static' */
div.row {
    position: relative;
    z-index: 1; /* greater than zero */
}

div.icon.win_pop.bubbleInfo {
    z-index: auto; /* no z-index for the icon! */
}

div.popup {
    z-index: -1; /* a negative z-index for the popup */
} 
```

现在弹出窗口出现在图标和行上方……</p>

# macos - 在我的 GUI 外部单击时，JPopUpMenu 不会隐藏/关闭

> ID：10316896
> 
> 赞同：0
> 
> 时间：2012-04-25T13:38:33.727
> 
> 标签：macos, swing, jpopupmenu

我在 Mac OSX 上有一个 swing GUI，其中有一个[JTable](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html)，当我单击 JTable 时，会出现一个[JPopupMenu](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JPopupMenu.html)，它有不同的选项。

问题是当我右键单击并出现 JPopupMenu 时。突然我在我的 GUI 外部单击我的 JPopupMenu 仍然打开，并且在其他窗口上重叠，即使我的 Macbook 注销 JPopupMenu 仍然打开。

在 JPopupMenu 外部单击时如何关闭所有打开的弹出窗口。

# java - 需要在 Java Web 应用程序中转义特殊字符

> ID：10316898
> 
> 赞同：4
> 
> 时间：2012-04-25T13:38:41.823
> 
> 标签：java, html, jakarta-ee, encoding

我正在使用 Oracle DB 开发 Java EE 应用程序。现在网页上的一些内容有一些特殊字符，我需要转义它们。字符如下图所示：

```
€˜Tâ€™ ! â€œOne Chase.â€ $ % & ( ) ' / : ? ` â€” â€“ _ â€š " Test 
```

有谁知道这是什么字符编码，我该如何逃避它们？我需要逃避它们并用空白替换它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:16:13.943

这些字符是无法正确处理编码的代码的副作用（假设 UTF-8 是 ISO-8859-1，反之亦然）——它们目前是垃圾。您需要修复您的应用程序才能正确呈现它们。无需用空白替换它们或进行任何过滤。

阅读这篇文章[http://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)然后检查您的数据库交互，以及您的 JSP 和应用程序服务器设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:45:26.847

您可以对字符串进行模式匹配，并构建无效字符的黑名单或有效字符的白名单......类似于以下内容

```
 Pattern p = Pattern.compile(blackList); // or reverse with a white list
 Matcher m = p.matcher(unsafeInputString);
 if (m.matches())
{
    // Invalid input: reject it, or remove/change the offending characters.
}
else
{
   // Valid input.
} 
```

# iphone - 如果对象在其方法执行完成之前被释放怎么办

> ID：10316900
> 
> 赞同：1
> 
> 时间：2012-04-25T13:38:50.930
> 
> 标签：iphone, core-data, release, popviewcontroller, performselector

我有一个视图控制器，它触发一个 Web 服务获取一些数据并将结果存储在核心数据中，然后在不同的线程中解析..

我有很多数据，所以解析需要一些时间，并且不确定在导航中弹出 viewController 是否会停止我的解析方法的执行，

如果它在两者之间停止执行，那么我的核心数据数据库将被损坏，所以它会在释放我的 viewController 对象之前停止执行或执行选择器

```
MyViewController *vc = [[MyViewController alloc] init];
[self.navigationController pushViewController:vc animated:YES];
[vc performSelectorInBackground:aSelector withObject:arg]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:47:27.673

您可能会考虑将 Web 服务器交互移动到不同的对象。该对象可以处理请求/响应并将结果存储到 Core Data。这个对象也可能是一个全局对象，它有一个队列来处理请求。如果没有，那么您将需要在视图控制器释放期间处理取消请求。

你的视图控制器可以监听 Co​​re Data 的变化并采取适当的行动。

# objective-c - 仅在 UIView 顶部的圆角

> ID：10316902
> 
> 赞同：54
> 
> 时间：2012-04-25T13:38:54.400
> 
> 标签：objective-c, uiview, core-graphics, rounded-corners

嗨，我正在寻找一个干净的解决方案，而不会覆盖`drawRect`或类似的东西来在**视图**`UIView`顶部创建一个圆角。我的主要问题是如果视图正在调整大小或类似的东西，则创建可变解决方案。有干净的解决方案吗？**苹果**在第一个表项上也是这样做的。做到这一点并不难。

 ***** * *

## 回答 #1

> 赞同：176
> 
> 时间：2012-04-25T13:55:35.390

您可以通过`mask`在视图层上设置 a 来做到这一点：

```
CAShapeLayer * maskLayer = [CAShapeLayer layer];
maskLayer.path = [UIBezierPath bezierPathWithRoundedRect: self.bounds byRoundingCorners: UIRectCornerTopLeft | UIRectCornerTopRight cornerRadii: (CGSize){10.0, 10.}].CGPath;

self.layer.mask = maskLayer; 
```

**重要提示：**您应该在视图的`layoutSubviews()`方法中执行此操作，因此视图已经从情节提要中调整了大小

* * *

*在斯威夫特 <= 1.2*

```
let maskLayer = CAShapeLayer()
maskLayer.path = UIBezierPath(roundedRect: bounds, byRoundingCorners: .TopLeft | .TopRight, cornerRadii: CGSize(width: 10.0, height: 10.0)).CGPath

layer.mask = maskLayer 
```

* * *

*斯威夫特 2.x*

```
let maskLayer = CAShapeLayer()
maskLayer.path = UIBezierPath(roundedRect: bounds, byRoundingCorners: UIRectCorner.TopLeft.union(.TopRight), cornerRadii: CGSizeMake(10, 10)).CGPath
layer.mask = maskLayer 
```

* * *

*斯威夫特 3.x*

```
let maskLayer = CAShapeLayer()
maskLayer.path = UIBezierPath(roundedRect: view.bounds, byRoundingCorners: [.topLeft, .topRight], cornerRadii: CGSize(width: 10, height: 10)).cgPath
layer.mask = maskLayer 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-10-24T15:50:11.450

刚刚尝试过`Swift 3.0`，`Xcode 8.0`：

**请记住**将您的按钮设置为`viewDidLayoutSubviews()`或按[此处](https://stackoverflow.com/a/33050709/2594699)`layoutSubViews`所述的@rob设置。

当你想改变你的按钮背景时，你只需要调用：

```
yourButton.backgroundColor = UIColor.someColour 
```

资源：

```
override func viewDidLayoutSubviews() {
    super.viewDidLayoutSubviews()

    yourButton.layer.masksToBounds = true
    yourButton.roundCorners(corners: [.topLeft,.topRight], radius: 5)
}

extension UIButton
{
    func roundCorners(corners:UIRectCorner, radius: CGFloat)
    {
        let maskLayer = CAShapeLayer()
        maskLayer.path = UIBezierPath(roundedRect: self.bounds, byRoundingCorners: corners, cornerRadii: CGSize(width: radius, height: radius)).cgPath
        self.layer.mask = maskLayer
    }
} 
```

*   结果如下：

默认状态：

[![在此处输入图像描述](../Images/dbe26d67d5d767341bd8bd44dd635048.png)](https://i.stack.imgur.com/H6iMv.png)

选中状态：

[![在此处输入图像描述](../Images/515b19b7eff8032a9f3a394c9e7bae31.png)](https://i.stack.imgur.com/cA5Mp.png)

希望这有帮助！！

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2019-08-14T16:52:03.917

**现代简单的解决方案**

**iOS 11+**

现在我们`maskedCorners`在视图层上拥有了这个属性，它让生活变得更加轻松。

只需设置所需的拐角半径并指定应遮蔽的拐角。最好的部分是这与边框很好 - 图层边框将跟随图层的边缘，无论它是否是圆形的！在操场上尝试以下代码（记得按打开实时视图，`command+option+return`这样您就可以看到它的样子）

```
import UIKit
import PlaygroundSupport

let wrapperView = UIView(frame: CGRect(x: 0, y: 0, width: 400, height: 160))
wrapperView.backgroundColor = .lightGray

let roundedCornerView = UIView(frame: CGRect(x: 50, y: 50, width: 300, height: 60))
roundedCornerView.backgroundColor = .white

wrapperView.addSubview(roundedCornerView)

roundedCornerView.layer.cornerRadius = 10
roundedCornerView.layer.borderColor = UIColor.red.cgColor
roundedCornerView.layer.borderWidth = 1

// this is the key part - try out different corner combinations to achieve what you need
roundedCornerView.layer.maskedCorners = [.layerMinXMinYCorner, .layerMaxXMinYCorner]

PlaygroundPage.current.liveView = wrapperView 
```

这是它的样子：

[![在此处输入图像描述](../Images/1ea03bb82a6f3d81ea3da438b8c8ce3b.png)](https://i.stack.imgur.com/Al1nS.png)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-11-22T16:45:51.660

对于 iOS11 及更高版本，您可以使用视图的 layer 属性：

```
@property CACornerMask maskedCorners 
```

**这定义了使用cornerRadius**属性时四个角中的哪个角接收掩蔽。默认为所有四个角。（苹果文档）

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-10-03T10:55:48.980

UIView 的扩展，可将选定的角圆化（Swift 4）：

```
extension UIView {

    /// Round UIView selected corners
    ///
    /// - Parameters:
    ///   - corners: selected corners to round
    ///   - radius: round amount
    func roundCorners(_ corners: UIRectCorner, radius: CGFloat) {
        let path = UIBezierPath(roundedRect: self.bounds, byRoundingCorners: corners, cornerRadii: CGSize(width: radius, height: radius))
        let mask = CAShapeLayer()
        mask.path = path.cgPath
        self.layer.mask = mask
    }
} 
```

例子：

```
ratingView.roundCorners([.topLeft, .topRight, .bottomRight], radius: 6) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-02T06:37:18.987

我在 Ashley 的帮助下解决了这个问题。

首先，我继承了 UIView。为我的类创建一个自己的构造函数，名为`- (id)initWithContentView:(UIView *)aView forTableView:(UITableView *)table andIndex:(NSIndexPath *)indexPath;`. 在这个构造函数中，我确定我想要样式的表格单元格类型。

然后我覆盖 l`- (void)layoutSubviews`以创建`CAShapeLayer`并应用图层蒙版。

.h 文件代码

```
typedef enum {
    tableCellMiddle,
    tableCellTop,
    tableCellBottom,
    tableCellSingle
} tableCellPositionValue;

@interface TableCellBackgrounds : UIView
{
    tableCellPositionValue position;
}

- (id)initWithContentView:(UIView *)aView forTableView:(UITableView *)table andIndex:(NSIndexPath *)indexPath;

@end 
```

.m 文件代码

```
- (id)initWithContentView:(UIView *)aView forTableView:(UITableView *)table andIndex:(NSIndexPath *)indexPath
{
    self = [super initWithFrame:aView.frame];

    [self setAutoresizingMask:UIViewAutoresizingFlexibleWidth];

    if(self)
    {
        [self setBackgroundColor:[UIColor colorWithRed:(float)230/255 green:(float)80/255 blue:(float)70/255 alpha:1]];

        if(table.style == UITableViewStyleGrouped)
        {
            int rows = [table numberOfRowsInSection:indexPath.section];

            if(indexPath.row == 0 && rows == 1)
            {
                self.layer.cornerRadius = 11;
                position = tableCellSingle;
            }
            else if (indexPath.row == 0)
                position = tableCellTop;
            else if (indexPath.row != rows - 1) 
                position = tableCellMiddle;
            else 
                position = tableCellBottom;
        }
    }
    return self;
}

- (void)layoutSubviews
{
    [super layoutSubviews];

    if(position == tableCellTop)
    {
        CAShapeLayer *maskLayer = [CAShapeLayer layer];
        maskLayer.path = [UIBezierPath bezierPathWithRoundedRect:self.bounds byRoundingCorners:UIRectCornerTopLeft|UIRectCornerTopRight cornerRadii:(CGSize){10.0, 10.0}].CGPath;
        self.layer.mask = maskLayer;
    }
    else if (position == tableCellBottom)
    {
        CAShapeLayer *maskLayer = [CAShapeLayer layer];
        maskLayer.path = [UIBezierPath bezierPathWithRoundedRect:self.bounds byRoundingCorners:UIRectCornerBottomLeft|UIRectCornerBottomRight cornerRadii:(CGSize){10.0, 10.0}].CGPath;
        self.layer.mask = maskLayer;
    } 
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-10-26T20:12:32.930

使用 swift 3.0，以下内容对我有用

```
let maskLayer = CAShapeLayer()
maskLayer.path = UIBezierPath(roundedRect: view.bounds, byRoundingCorners: [.topLeft, .topRight], cornerRadii: CGSize(width: 10, height: 10)).cgPath
(imageView.)layer.mask = maskLayer 
```

重要提示：确保这是在 'layoutSubviews' 而不是 'awakeFromNib'（如果您使用 TableViewCell）或 UIView 类似的，或者只有左上角是圆角的！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-06-04T08:46:09.237

在 Objective-C 中它看起来像：

```
[oCollectionViewCell.layer setMasksToBounds:YES];
[oCollectionViewCell.layer setCornerRadius:5.0];
[oCollectionViewCell.layer setMaskedCorners:kCALayerMinXMinYCorner|kCALayerMaxXMinYCorner]; 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-12-16T09:26:05.557

```
 CAShapeLayer * maskLayer = [CAShapeLayer layer];
    maskLayer.path = [UIBezierPath bezierPathWithRoundedRect: registerbtn.bounds byRoundingCorners: UIRectCornerBottomLeft | UIRectCornerBottomRight cornerRadii: (CGSize){9.0, 12.0}].CGPath;

    registerbtn.layer.mask = maskLayer; 
```

这只会做一个圆角

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2012-04-25T13:46:13.053

执行此操作的直接方法是在您想要的形状中定义一个路径，并用您想要用于背景的任何颜色填充它。您可以使用其中一个`UIBezierPath`或`CGPath`为此。`CGPath`例如，您可以使用`CGMoveToPoint()`、和`CGAddLineToPoint()`等方法构造路径`CGAddArc()`。然后你会用`CGContextFillPath()`. 查看[*Quartz 2D Programming Guide*](https://developer.apple.com/library/mac/documentation/graphicsimaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007533-SW1)以获得完整的讨论。

另一种方法是添加一个带圆角的子视图（您可以设置子视图的图层的cornerRadius 属性），但让子视图的一侧被父视图裁剪。

第三种方法是添加具有所需形状的背景图像。您可以使角落透明并使视图的背景透明，您将获得所需的效果。但是，这对于调整大小不会那么好。

你在哪里卡住？****

# c - #define 中使用 0x1 是什么意思？

> ID：10316907
> 
> 赞同：3
> 
> 时间：2012-04-25T13:39:18.187
> 
> 标签：c

我遇到了一行代码，如下所示

```
#define IM 0x1 
```

我确实知道 IM 代表什么，但我很想知道`0x1`它代表什么，它的用途是什么，以及它在定义语句中的使用意义。

我是 C 的新手，我确实搜索过这个特定的项目，但找不到它。提前感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T13:40:31.450

它只是十六进制（以 16 为基数）中数字一的定义。这可能用于避免代码中出现幻数。幻数是程序员在代码中使用直接数字而没有解释的情况。例如

```
int x = 32;
x -= 8; 
```

这段代码几乎没有任何意义，但如果我这样做

```
#define TOTAL_BITS 32
#define BITS_PER_BYTE 8

int x = TOTAL_BITS;
x -= BITS_PER_BYTE; 
```

代码明显更清晰。无论如何，宏（即`#define`）直接将它们的内容替换为它们在代码中出现的位置。因此，如果您要使用表达式或类似的表达式，最好用括号括起来。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T13:43:16.827

它是十六进制数 1，通常在做二进制标志时这样定义。所以你会有

```
0x1
0x2
0x4
0x8
0x10 
```

所以你可以看到你正在设置的位。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-25T13:40:33.153

它是以十六进制（以 16 为基数）形式表示的第一。

[http://en.wikipedia.org/wiki/十六进制](http://en.wikipedia.org/wiki/Hexadecimal)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-25T13:43:36.723

```
#define IM    0x1 
```

这是另一种位置数字系统：十六进制。在这里，它是数字 « 1 » 的十六进制形式。

# windows - 一个简单的dos批处理脚本...！按预期工作

> ID：10316910
> 
> 赞同：0
> 
> 时间：2012-04-25T13:39:22.863
> 
> 标签：windows, batch-file

```
@echo off
set /p ipAddress="enter Ip address"

:startOfScript

set i=
for /l %%i in (1,1,255) do (
ping -n 1 %ipAddress%.%%i | find "TTL"
if errorlevel 0 (
deploy_this.bat %ipAddress%.%%i
)
) 
```

此脚本将 ping 给定 xxxx/24 中的所有 IP 地址。如果该地址的 ping 成功，它只应该执行 deploy_this.bat %ipAddress%.%%i 。但是，发生的事情是脚本只是简单地 ping 特定 /24 中的每个地址，无论它是否启动，都在执行 deploy_this.bat %ipAddress%.%%i。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:54:31.987

`if errorlevel 0`总是正确的，除非你得到一个否定的返回码（因为它检查错误级别是否为 0*或更高*）。你可能想要

```
if not errorlevel 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:07:53.110

对于您的代码，它应该如下所示：

```
@echo off

for /L %%i in (1,1,255) do call :findit %%i
pause
goto :eof

:findit
    PING -n 1 192.168.0.%1 | FIND "TTL" > nul
    IF %errorlevel% == 0 (
        echo up
    ) ELSE (
        echo down
    )
goto :eof 
```

我怀疑它`errorlevel`不起作用，因为代码在 的代码块中`for`，在提取它并将其`method`正确放入`errorlevel`触发器之后。

在该方法中，有一个简单`ping`的输出重定向到`find`.
如果 find 没有找到它正在搜索的字符串，它将返回一个非零值`errorlevel`，然后触发该`if`语句。

对于批处理文件，`if`后跟 an 的语句`else`必须采用以下形式：

```
if <condition> (
) else (
) 
```

否则将无法正常工作。

# svn - Tortoise SVN 无法验证密码

> ID：10316913
> 
> 赞同：0
> 
> 时间：2012-04-25T13:39:34.417
> 
> 标签：svn, passwords, tortoisesvn, visualsvn-server

自从我更改密码后，Tortoise SVN 将不会进行身份验证。即使我可以使用新密码通过 Web 界面浏览存储库，TSVN 也不会对其进行身份验证。我们使用 VisualSVN Server 和 TSVN 1.7.6 的“免费”版本。

我尝试清除存储的密码缓存但没有运气。其他用户登录我的机器似乎没有问题，但我无法登录其他任何人。

有谁熟悉这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:07:21.710

从我的新密码中删除“£”字符允许 Tortoise SVN 正确验证。

# c# - 对象引用未设置为对象的实例 - OracleDataReader

> ID：10316915
> 
> 赞同：-1
> 
> 时间：2012-04-25T13:39:40.390
> 
> 标签：c#, asp.net, visual-studio-2010, oracle10g

尝试使用`OracleDataReader`，获取 返回数据

```
"Object reference not set to an instance of an object " at the line "odr = 
ocmd.ExecuteReader();", 
```

谁能建议我错过/做错了什么？

谢谢

吨

```
 OracleConnection cn = null;
            OracleDataReader odr = null;
            OracleCommand ocmd = null;

            String con1 = System.Configuration.ConfigurationManager.ConnectionStrings["HousingDBConnectionString"].ConnectionString;
            cn = new OracleConnection(con1);
            cn.Open();

            string mysql = "SELECT stuff from tables";
            OracleCommand cmd = new OracleCommand(mysql, cn);
            odr = ocmd.ExecuteReader();
            Label2.Text = "connection success";

            ListBox1.Items.Clear();
            while (odr.Read()) 
            {
                ListBox1.Items.Add(odr["TCY_CORRESPOND_NAME"].ToString());
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:41:29.457

`ocmd``cmd`是两个不同的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T13:42:29.773

您将 ocmd 声明为 null，但随后您将另一个 OracleCommand 对象创建为 cmd。ocmd 从未实例化。

这部分是错误的：

```
OracleCommand cmd = new OracleCommand(mysql, cn); 
odr = ocmd.ExecuteReader(); 
```

它应该是：

```
OracleCommand cmd = new OracleCommand(mysql, cn); 
odr = cmd.ExecuteReader(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T13:45:34.087

```
OracleCommand cmd = new OracleCommand(mysql, cn); 
```

应该

```
OracleCommand ocmd = new OracleCommand(mysql, cn); 
```

# ubuntu - 如何使用 iptables 制定 IP 转发规则

> ID：10316922
> 
> 赞同：0
> 
> 时间：2012-04-25T13:40:09.220
> 
> 标签：ubuntu, network-programming, tcpclient, iptables, tcpserver

我有两个系统 A 和 B。A 是 TCP Client，向 B 上的 TCP Server 发送消息。

```
------------------                --------------------------

  System A                        System B
  192.168.0.5 wlan0               192.168.0.3 wlan0
  127.0.0.1   lo                  127.0.0.1 lo
  TCP Client    <------------>    TCP Server on 127.0.0.1
------------------                ---------------------------- 
```

TCP 客户端向 192.168.0.3 发送消息。

这应该重定向到 B 的本地接口，因为 TCP 服务器在系统 B 的端口 8000 的 127.0.0.1 上运行。

因此，我编写了以下 ip table 规则，但是我在 B 的服务器没有收到任何消息。哦，顺便说一句，这两个系统是 Ubuntu linux 系统。

这是我在系统 B 上所做的：

```
#Enable IP Forwarding for NAT
echo "1" < /proc/sys/net/ipv4/ip_forward

#Flush all iptable chains and start afresh
sudo iptables -F

#Forward incoming packets on 192.168.0.3 at wlan0 interface to 127.0.0.1
sudo iptables -t nat -A PREROUTING -p tcp -i wlan0 -d 192.168.0.3 --dport 8000 -j DNAT --to 127.0.0.1:8000

#Explicitly allow incoming connections on port 8000 
sudo iptables -A INPUT -i wlan0 -p tcp --dport 8000 -m state --state NEW,ESTABLISHED -j ACCEPT

#Explicitly allow outgoing messages from port 8000
sudo iptables -A OUTPUT -o wlan0 -p tcp --sport 8000 -m state --state ESTABLISHED -j ACCEPT 
```

然后我在 B 上启动服务器并从 A 上的 TCP 客户端发送一条消息。我可以在 wlan0 上看到来自 192.168.0.5 的wireshark 上的数据包，但它们永远不会被转发:(

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:52:22.913

它应该是“>”而不是“<”：

```
echo "1" > /proc/sys/net/ipv4/ip_forward 
```

# java - 在 Java 中对地图进行排序不起作用

> ID：10316928
> 
> 赞同：2
> 
> 时间：2012-04-25T13:40:28.940
> 
> 标签：java, sorting, map

我正在尝试使用 Comparator 接口对 TreeMap（将 Double 作为值，将 Integer 值作为键）进行排序，但它不起作用。

```
// Create a tree map
        TreeMap tm = new TreeMap();
        // Put elements to the map
        tm.put(1, new Double(3434.34));
        tm.put(0, new Double(123.22));
        tm.put(4, new Double(1378.00));
        tm.put(2, new Double(99.22));
        tm.put(3, new Double(-19.08));
        List<Map.Entry> valueList = new ArrayList(tm.entrySet());

        // Collections.sort(valueList, new Sort());

        Collections.sort(valueList, new Sort());

        HashMap sortedMap = new HashMap();

        // Get an iterator
        Iterator<Map.Entry> i = valueList.iterator();

        // Display elements
        while (i.hasNext()) {
            Map.Entry object = i.next();
            sortedMap.put(object.getKey(), object.getValue());
        }
        List sortedList = new ArrayList(sortedMap.entrySet());
        Iterator<Map.Entry> iterator = sortedList.iterator();
        while (iterator.hasNext()) {
            Map.Entry entry = iterator.next();
            System.out.println("Value " + entry.getValue() + "\n");
        } 
```

以下是我的比较器类

```
public class Sort implements Comparator<Map.Entry> {

    @Override
    public int compare(Map.Entry o1, Map.Entry o2) {
        // TODO Auto-generated method stub
        double valueOne = (Double) o1.getValue();
        double valueTwo = (Double) o2.getValue();

        int returnValue =
            valueOne > valueTwo ? -1 : (valueOne == valueTwo ? 0 : 1);

        return (valueOne > valueTwo ? -1 : (valueOne == valueTwo ? 0 : 1));
    }

} 
```

但我得到以下输出

```
Value 123.22

Value 3434.34

Value 99.22

Value -19.08

Value 1378.0

Edited Part

public int compare(Map.Entry o1, Map.Entry o2) {
        // TODO Auto-generated method stub
        double valueOne = ((Double) o1.getValue()).doubleValue();
        double valueTwo = ((Double) o2.getValue()).doubleValue();

        int returnValue =
            valueOne > valueTwo ? -1 : (valueOne == valueTwo ? 0 : 1);

        return (valueOne > valueTwo ? -1 : (valueOne == valueTwo ? 0 : 1));
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T13:43:38.643

`HashMap`本质上是无序的。

相反，您可以`TreeMap`首先使用您的比较器创建一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:46:17.080

当您将它们放入时，`HashMap`它们将不会保留它们的顺序，因为 a`HashMap`不是有序映射。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T13:57:03.377

添加其他人已经建议的内容，试试这个：

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;
import java.util.TreeMap;

public class SortDemo
{
  public class Sort implements Comparator<Map.Entry>
  {
    public int compare(Entry o1, Entry o2)
    {
      Double valueOne = (Double) o1.getValue();
      Double valueTwo = (Double) o2.getValue();
      return (int) Math.signum(valueOne.compareTo(valueTwo));
    }
  }

  public static void main(String[] args)
  {
    new SortDemo().foo();
  }

  void foo()
  {
    TreeMap tm = new TreeMap();
    tm.put(1, new Double(3434.34));
    tm.put(0, new Double(123.22));
    tm.put(4, new Double(1378.00));
    tm.put(2, new Double(99.22));
    tm.put(3, new Double(-19.08));

    List<Map.Entry> valueList = new ArrayList(tm.entrySet());
    Collections.sort(valueList, new Sort());

    Iterator<Map.Entry> iterator = valueList.iterator();
    while (iterator.hasNext())
    {
      Map.Entry entry = iterator.next();
      System.out.println("Value: " + entry.getValue());
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T13:58:47.233

仅适用于您的`Comparator`密钥，而不是条目。您需要一个`Comparator<Integer>`, 并将此 Comparator 的实例传递给`TreeMap`构造函数。

```
TreeMap<Integer,Double> tm = new TreeMap<Integer,Double>(myIntegerComparator); 
```

在您的示例中，您看到的行为是由于`TreeMap`using`Integer`的标准比较（这有效，因为`Integer`is `Comparable<Integer>`）。

（顺便说一句，您还应该阅读泛型并在您的集合类以及任何其他参数化类中使用它们。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T13:50:07.513

使用 HashMap 进行排序将不起作用，因为它不是列表。您需要查看 ArrayList 和 sort 方法。

```
ArrayList<double> arr = new ArrayList<double>();
sort(arr) //sort ascending 
```

# java - 集合 API 的选择

> ID：10316934
> 
> 赞同：1
> 
> 时间：2012-04-25T13:40:38.747
> 
> 标签：java, collections

我需要一个来源，我可以从中阅读何时使用哪个集合，即哪个集合最适合这个特定目的，并提供详细说明。

有人请在这方面帮助我。我感谢您的支持。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:57:17.260

我一直发现[这个](http://initbinder.com/bunker/wp-content/uploads/2011/03/collections.png)决策树非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:43:53.320

查看[此](http://docs.oracle.com/javase/tutorial/collections/implementations/index.html)Java 集合教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:50:03.540

书籍：[Java 泛型和集合](http://shop.oreilly.com/product/9780596527754.do)

# javascript - 在单击事件上从父窗口调用子窗口的功能在 safari 和 chrome 上不起作用

> ID：10316936
> 
> 赞同：1
> 
> 时间：2012-04-25T13:40:43.170
> 
> 标签：javascript, javascript-events

我正在尝试在单击事件时从父窗口调用子窗口的功能。它不适用于 Safari 和 Chrome，但适用于 Firefox。我使用此代码从父窗口按钮事件调用子窗口的功能

```
var iframeElem = document.getElementById("iframe");
iframeElem.contentWindow.muteVideoSound(); 
```

静音窗口是在 iframe 中加载的子窗口上的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:13:54.940

您是否尝试从父窗口调用 iframe 内的函数？

可以这样做：

**main_window.html**

```
<!DOCTYPE html>
<html>
<head>
<title>main window</title>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script>
$(document).ready(function() {
    $("a#update_text_link").click(function(event) {
        event.preventDefault();
        $("iframe#iframe_id")[0].contentWindow.update_text(); // run the function
    });
});
</script>
</head>
<body>
<p><a href="#" id="update_text_link">Update iframe text</a></p>
<iframe src="iframe.html" id="iframe_id"></iframe>
</body>
</html> 
```

**iframe.html**

```
<!DOCTYPE html>
<html>
<head>
<title>iframe</title>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script>
function update_text() {
    $("h1").fadeOut(function () {
        $(this).text("Some updated text.").fadeIn();
    });
}
</script>
</head>
<body>
<h1>Some text.</h1>
</body>
</html> 
```

但是，如果您从本地文件系统加载网页，这在某些浏览器（如 Chrome）中将不起作用。所以你需要把这个例子放在一个网络服务器上，然后尝试在这样的浏览器中打开它。

此外，如果您需要有关此主题的更多信息（包括对旧浏览器的支持），您可以在此处阅读类似问题的一些答案：

[从父页面调用 iframe 中的 JavaScript 代码](https://stackoverflow.com/questions/251420/invoking-javascript-in-iframe-from-parent-page)

# c# - 在 C# 中裁剪图像

> ID：10316941
> 
> 赞同：4
> 
> 时间：2012-04-25T13:41:03.727
> 
> 标签：c#, winforms, screenshot, crop

当我按下表单上的按钮时，我有一张想要裁剪的图像。我有以下代码在按下按钮时运行，但它对图像没有任何作用：

```
try
{
  Image image = Image.FromFile("test.jpg");
  Bitmap bmp = new Bitmap(200, 200, PixelFormat.Format24bppRgb);
  bmp.SetResolution(80, 60);

  Graphics gfx = Graphics.FromImage(bmp);
  gfx.SmoothingMode = SmoothingMode.AntiAlias;
  gfx.InterpolationMode = InterpolationMode.HighQualityBicubic;
  gfx.PixelOffsetMode = PixelOffsetMode.HighQuality;
  gfx.DrawImage(image, new Rectangle(0, 0, 200, 200), 10, 10, 200, 200, GraphicsUnit.Pixel);
  // Dispose to free up resources
  image.Dispose();
  bmp.Dispose();
  gfx.Dispose();
}
catch (Exception ex)
{
  MessageBox.Show(ex.Message);
} 
```

我的图像实际上是带有以下代码的表单活动窗口的屏幕截图：

```
Rectangle bounds = this.Bounds;
using (Bitmap bitmap = new Bitmap(bounds.Width, bounds.Height))
{
  using (Graphics g = Graphics.FromImage(bitmap))
  {
    g.CopyFromScreen(new Point(bounds.Left, bounds.Top), Point.Empty, bounds.Size);
  }
  bitmap.Save("test.jpg", ImageFormat.Jpeg);
} 
```

要完成此操作，请按下同一个按钮，首先我要截取表单的屏幕截图，然后裁剪该图像，但裁剪不起作用。这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:42:18.927

您的代码与我用来保存裁剪图像的代码很接近。您缺少保存裁剪图像的部分。您需要将裁剪后的图像写入字节流，然后将其保存到磁盘。我修改了你的代码，它未经测试，但试一试。

```
try
{
    Image image = Image.FromFile("test.jpg");
    Bitmap bmp = new Bitmap(200, 200, PixelFormat.Format24bppRgb);
    bmp.SetResolution(80, 60);

    Graphics gfx = Graphics.FromImage(bmp);
    gfx.SmoothingMode = SmoothingMode.AntiAlias;
    gfx.InterpolationMode = InterpolationMode.HighQualityBicubic;
    gfx.PixelOffsetMode = PixelOffsetMode.HighQuality;
    gfx.DrawImage(image, new Rectangle(0, 0, 200, 200), 10, 10, 200, 200, GraphicsUnit.Pixel);

    //Need to write the file to memory then save it
    MemorySteam ms = new MemoryStream();
    bmp.Save(ms, image.RawFormat); 
    byte[] buffer = ms.GetBuffer();

    var stream = new MemorySteam((buffer), 0, buffer.Length); 
    var croppedImage = SD.Image.FromStream(steam, true);
    croppedImage.Save("/your/path/image.jpg", croppedImage.RawFormat);

    // Dispose to free up resources
    image.Dispose();
    bmp.Dispose();
    gfx.Dispose();
    stream.Dispose();
    croppedImage.Dispose();

}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:44:00.417

您可以使用 Bitmap 类的 Clone 方法 ( [http://msdn.microsoft.com/en-us/library/ms141944.aspx](http://msdn.microsoft.com/en-us/library/ms141944.aspx) ) 来获取目标 Bitmap 的子矩形。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:44:05.723

您将在变量 bmp 中得到结果。你可以继续努力。如果您处置该对象，您的更改当然会丢失。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-25T13:46:27.307

我为我的一个项目创建了一个方法，这是尝试使用它并查看它是否有效的方法：

```
 public void ResizeImage(string sImageFile, decimal dWidth, decimal dHeight, string sOutputFile)
    {
        Image oImg = Bitmap.FromFile(sImageFile);
        Bitmap oBMP = new Bitmap(decimal.ToInt16(dWidth), decimal.ToInt16(dHeight));

        Graphics g = Graphics.FromImage(oBMP);
        g.PageUnit = pgUnits;
        g.SmoothingMode = psMode;
        g.InterpolationMode = piMode;
        g.PixelOffsetMode = ppOffsetMode;

        g.DrawImage(oImg, 0, 0, decimal.ToInt16(dWidth), decimal.ToInt16(dHeight));

        ImageCodecInfo oEncoder = GetEncoder();
        EncoderParameters oENC = new EncoderParameters(1);

        oENC.Param[0] = new EncoderParameter(System.Drawing.Imaging.Encoder.Quality, plEncoderQuality);

        oImg.Dispose();

        oBMP.Save(sOutputFile, oEncoder, oENC);
        g.Dispose();

    } 
```

# c# - 重构 C# 代码（帮助改进）

> ID：10316943
> 
> 赞同：0
> 
> 时间：2012-04-25T13:41:08.397
> 
> 标签：c#, refactoring

我需要帮助来重构此代码示例的某些部分，`if (_obj is Application)`因此这将是通用的。

```
public override void Body(object _obj, object _objInPreviousState)
        {

            if (_obj != null)
            {
                string Message = "";
                string Subject = "";
                if (_objInPreviousState == null)
                {
                    var emailParams = this.Param as Dictionary<string, string>;
                    if (emailParams != null)
                    {
                        Message = emailParams["Message"];
                        Subject = emailParams["Subject"];
                    }
                }
                var emails = userRepository().GetForRoles("RM").Select(c => c.Email);
                if (_obj is Application)
                {
                    var app = (Application)_obj;
                    var appInPreviousState = _objInPreviousState as Application;
                    if (appInPreviousState == null)
                    {
                        emailService().SendEmails("aps@somedomain.com", emails.ToArray(), Message, Subject);
                    }
                    else if (app.ApplicationStatus != appInPreviousState.ApplicationStatus)
                    {
                        emailService().SendEmails("aps@somedomain.com", emails.ToArray(), "Application: " + app.ID + " changed decision status: " + Enum.GetName(typeof(AppStatus), app.ApplicationStatus), "Check following application: " + app.ID);
                    }
                }
                else if (_obj is Product)
                {
                    var product = (Product)_obj;
                    var prodInPreviousState = _objInPreviousState as Product;
                    if (prodInPreviousState == null)
                    {
                        emailService().SendEmails("aps@somedomain.com", emails.ToArray(), Message, Subject);
                    }
                    else if (product.ProductStatusType != prodInPreviousState.ProductStatusType)
                    {
                        emailService().SendEmails("aps@somedomain.com", emails.ToArray(), "Product: " + product.ID + " for application " + product.ApplicationID + " changed decision status: " + Enum.GetName(typeof(AppStatus), product.ProductStatusType), "Check following application: " + product.ApplicationID);
                    }
                }

                else if (_obj is CES)
                {
                    var ces = (CES)_obj;
                    var cesInPreviousState = _objInPreviousState as CES;
                    if (cesInPreviousState == null)
                    {
                        emailService().SendEmails("aps@somedomain.com", emails.ToArray(), Message, Subject);
                    }
                    else if (ces.Status != cesInPreviousState.Status)
                    {
                        emailService().SendEmails("aps@somedomain.com", emails.ToArray(), "CES for application " + ces.ApplicationID + " changed decision status: " + Enum.GetName(typeof(CesStatuses), ces.Status), "Check following application: " + ces.ApplicationID);
                    }
                }
                else if (_obj is Comment)
                {
                    var comment = (Comment)_obj;
                    emailService().SendEmails("aps@somedomain.com", emails.ToArray(), "Comment for the following application: " + comment.ApplicationID + " with message: " + comment.Message + " on date: " + comment.CreatedDate, "Comment for the following application: " + comment.ApplicationID);
                }
                mLog.InfoLine("Sendet Email");
            }

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T13:44:37.550

你可能应该使用一些接口，我没有给你完整的代码，而是一个要遵循的模式。

```
interface IStatusItem
{
   void SendEmails(EmailService service);
}

public class Product : IStatusItem
{
   public void SendEmails(EmailService service)
   {
      // Send Email
   }
}

public class Application : IStatusItem
{
   public void SendEmails(EmailService service)
   {
      // Send Email
   }
} 
```

那么你的主代码不需要所有的 if 块。它只是调用 IStatusItem 实例上的实现。显然，您需要在其中添加先前的状态。

```
override void Body(object _obj, object _objInPreviousState)
{
   IStatusItem sItem = obj as IStatusItem;
   if(sItem != null)
      sItem.SendEmails(emailService());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:46:40.687

您可以轻松改进两件事：

首先，反转一些`if`s 以减少嵌套。尤其：

```
if (_obj != null) { ... the entire function ... } 
```

可

```
if (null == _obj) { return; }
... the rest ... 
```

此外，将每个 if/else 主体提取到单独的方法中（您可以简单地选择主体并从菜单中选择 Refactor...Extract Method。

最后，您应该能够将所有这些方法概括为一个需要更多参数的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T13:49:47.540

在这种情况下，您可以创建一个生产对象的工厂。

这就是我将如何重构：

SomethingFactory 产生 AbstractSomething 派生类（ConcreteSomethingA、ConcreteSomethingB 等）。工厂根据“_obj”和

```
public override void Body(object _obj, object _objInPreviousState) 
```

将在具体类中实现，因此系统可以轻松扩展

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T14:17:29.747

1.  逆 _obj 成`if ( _obj == null ) return;`
2.  将`""`声明替换为`string.Empty`
3.  使用 string.Format 格式化具有大量连接的字符串
4.  将电子邮件地址提取到配置文件
5.  创建项目的界面

    ```
    public interface IEmail{
      string GetMessage();
      string GetSubject();
    } 
    ```

6.  创建工厂以生成`IEmail`实例

7.  在一个电话中发送电子邮件

    ```
     public void Body(object obj, object objInPreviousState)
        {
          const string Address= "aps@somedomain.com"; //extract to configuration
          IEmail item = GetEmailItem(_obj, _objInPreviousState);
          if(item != null) emailService().SendEmails( Address, emails.ToArray(), item.GetMessage(), item.GetSubject() );
        } 
    ```

# android - 通过意图进行准确的市场搜索

> ID：10316944
> 
> 赞同：0
> 
> 时间：2012-04-25T13:41:09.807
> 
> 标签：android, android-intent, google-play

我有一个按钮，单击该按钮将在市场上搜索应用程序。我有两个例子。在第一个示例中，用户被带到市场应用程序中的搜索结果页面。在第二个示例中，用户被带到了正确的页面，但使用了浏览器。如何更改此代码以达到预期的结果？

让我提供代码（不要介意应用名称不同）：

示例 A：

```
 Intent i = new Intent(Intent.ACTION_VIEW);
   i.setData(Uri.parse("market://search?q=com.amazon.kindle"));
   startActivity(i); 
```

实施例 A 的结果：

![在此处输入图像描述](../Images/4482d85785329081b00b2940c3c0cf08.png)

示例 B：

```
 Intent i = new Intent(Intent.ACTION_VIEW);
  i.setData(Uri.parse("https://play.google.com/store/apps/details?id=com.netflix.mediaclient"));
  startActivity(i); 
```

示例 B 的结果：

![在此处输入图像描述](../Images/02f461dd202a8d9a1b336e597e5387c2.png)

预期结果：

![在此处输入图像描述](../Images/e7a3ba931922a67821658c8290f9c028.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:57:18.273

```
market://details?id=com.amazon.kindle 
```

更多信息：http: [//developer.android.com/guide/publishing/publishing.html#marketintent](http://developer.android.com/guide/publishing/publishing.html#marketintent)

# scala - Redis 队列顺序不正确

> ID：10316954
> 
> 赞同：2
> 
> 时间：2012-04-25T13:41:36.997
> 
> 标签：scala, redis, jedis

我正在使用 redis 存储一组有序的项目。这是一个示例代码：

```
object Producer{
  def main(args:Array[String]){
    val jedis = new Jedis("localhost")
    for (i<-1 to 10){
      println("publishing:"+(i))
      jedis.lpush("q1",i.toString)
    }
  }
}
object Consumer {
  def main(args:Array[String]){
    val jedis = new Jedis("localhost")
    while(true){
      while(jedis.llen("q1")>0){
        val msg=jedis.lpop("q1")
        println("processing:"+msg)
      }
    }

  }
} 
```

当我运行生产者时，我得到

```
publishing:1
publishing:2
publishing:3
publishing:4
publishing:5
publishing:6
publishing:7
publishing:8
publishing:9
publishing:10 
```

当我运行消费者时，我得到

```
processing:1
processing:2
processing:4
processing:5
processing:6
processing:7
processing:9
processing:10
processing:8
processing:3 
```

为什么项目顺序不正确，这不是真正的先进先出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T16:13:40.290

这不是真正的先进先出，因为代码是错误的。

如果您使用 lpush 对项目进行排队，则应使用 rpop 而不是 lpop 以 FIFO 顺序将它们出列。

```
redis 127.0.0.1:6379> lpush x 10
(integer) 1
redis 127.0.0.1:6379> lpush x 20
(integer) 2
redis 127.0.0.1:6379> lpush x 30
(integer) 3
redis 127.0.0.1:6379> lpop x
"30"
redis 127.0.0.1:6379> lpop x
"20"
redis 127.0.0.1:6379> lpop x
"10" 
```

通常，您应该以相反的顺序 (LIFO) 检索项目。但是您的两个代理可能同时运行，因此您使用 lpop 获得的顺序不是确定性的。

请注意，您的出队代理执行得很差，因为它占用了 100% 的 CPU（没有等待状态），并且会在队列为空时使用 llen 命令使 Redis 饱和。考虑改用阻塞调用，例如 brpop。

# javascript - 敲除导致 IE 中的“运行缓慢的脚本”警告

> ID：10316957
> 
> 赞同：3
> 
> 时间：2012-04-25T13:41:42.843
> 
> 标签：javascript, internet-explorer, knockout.js

我有一个可观察的网格和计算的可观察的网格。第一行包含用作乘数对下面所有行中的值的百分比。用户可以编辑百分比值，并且 Knockout 会处理所有级联更新。我还需要一个单独的文本框，用户可以在其中输入一个新的百分比率，该百分比率将应用于网格中的每个百分比率。

初始绑定工作正常，更新 1 百分比率工作也很好。

当用户在文本框中输入一个值并且我循环通过视图模型更新每个百分比以匹配时，会发生 javascript 警告。网格列实际上是每月值，因此更新百分比的循环仅执行 12 次。

我试过油门延长器，但没有解决问题。有任何想法吗？

**更新：**不确定它会有所帮助，但我添加了一些代码

```
$("#NewRate").change(function (e) {
    var newRate = parseFloat($(this).val());
    for (var i = 0; i < 12; i++) {
        viewModel.resourceCategory.monthAmounts[i].amount(newRate);
    }
});

function ConvertToDate(jsonDateString) {
    var re = /-?\d+/;
    var m = re.exec(jsonDateString);
    return new Date(parseInt(m[0]));
}

function MonthAmount(amount, dateKey) {
    var self = this;
    self.amount = ko.observable(amount).extend({ throttle: 1 }); //using the throttle to avoid "long running script" warning in IE
    self.dateKey = ConvertToDate(dateKey);
    self.monthIndex = self.dateKey.getMonth();
}

function ResourceCategory(name, monthAmounts) {
    var self = this;
    self.name = name;

    self.monthAmounts = ko.utils.arrayMap(monthAmounts, function (monthAmount) {
        return new MonthAmount(monthAmount.Amount, monthAmount.DateKey);
    });

    self.totalAmount = ko.computed(function () {
        var sum = 0;
        for (var i = 0; i < self.monthAmounts.length; i++) {
            sum += parseFloat(self.monthAmounts[i].amount());
        }
        return sum.toFixed(2);
    }).extend({ throttle: 1 }); //using the throttle to avoid "long running script" warning in IE

    self.averageAmount = ko.computed(function () {
        return (self.totalAmount() / self.monthAmounts.length).toFixed(2);
    }).extend({ throttle: 1 }); //using the throttle to avoid "long running script" warning in IE

}
function ResourceCategoriesMonthTotal(monthIndex, resourceCategories) {
    var self = this;
    self.monthIndex = monthIndex;
    self.dateKey = new Date(new Date().getFullYear(), monthIndex, 1);
    self.amount = ko.computed(function () {
        var val = 0;
        for (var i = 0; i < resourceCategories.length; i++) {
            val += parseFloat(resourceCategories[i].monthAmounts[self.monthIndex].amount());
        }
        return (val).toFixed(2);
    }).extend({ throttle: 1 }); //using the throttle to avoid "long running script" warning in IE
}

self.resourceCategoriesMonthTotals = new Array();
for (var monthIndex = 0; monthIndex < 12; monthIndex++) {
    self.resourceCategoriesMonthTotals.push(new ResourceCategoriesMonthTotal(monthIndex, self.resourceCategories));
}

self.resourceCategoriesTotal = ko.computed(function () {
    var val = 0;
    for (var i = 0; i < self.resourceCategoriesMonthTotals.length; i++) {
        val += parseFloat(self.resourceCategoriesMonthTotals[i].amount());
    }
    return (val / self.resourceCategoriesMonthTotals.length).toFixed(2);
}).extend({ throttle: 1 }); //using the throttle to avoid "long running script" warning in IE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:06:55.997

听起来问题是当你

> > 循环通过视图模型更新每个百分比以匹配

如果是这样，那么 IE 的一个答案是通过使用 timeout(0) 调用向浏览器让步。当您的 JS 在超时后恢复时，执行循环的下一次迭代，然后再次超时。

完成此操作后，如果我嗅到它是 IE 浏览器，我只会执行超时。否则，不需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T16:28:02.983

好的，这很臭，但我认为问题在于我的页面上有这个：

```
<div data-bind="text: ko.toJSON($root)"></div> 
```

在我删除它后，它没有给我“运行缓慢的脚本”警告。

# user-interface - GTK+ 应用程序中的模态循环

> ID：10316969
> 
> 赞同：0
> 
> 时间：2012-04-25T13:42:28.550
> 
> 标签：user-interface, gtk, modal-dialog, event-loop

我正在尝试编写一个函数，该函数将等到用户单击 GTK+ 小部件（类似于绘图区域）中的某个位置并返回鼠标坐标。该函数的行为应该是模态的，因为它一直等到接收到输入。熟悉 Windows API 的人可能会发现该[`TrackPopupMenu`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648002%28v=vs.85%29.aspx)功能与等待菜单项被选中的功能有些相似。

我在这里尝试做的类似于使用 Windows API 运行“辅助消息循环”。在 GTK+ 中它是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:09:00.087

您可以调用`[gtk_main_iteration_do(FALSE);](http://developer.gnome.org/gtk3/stable/gtk3-General.html#gtk-main-iteration-do)`以“泵送”GTK+ 事件系统，而不用 ( `FALSE`) 阻塞应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:11:32.853

对于 GtkWindow，使用[gtk_window_set_modal](http://developer.gnome.org/gtk/stable/GtkWindow.html#gtk-window-set-modal)可以成为模态，而不是 GtkWidget。这是有道理的，否则如果没有弹出窗口，用户将不知道要与什么进行交互。

# android - 如何动态地将图像添加到 ScrollView？

> ID：10316976
> 
> 赞同：1
> 
> 时间：2012-04-25T13:42:44.757
> 
> 标签：android

我正在尝试将图像动态添加到滚动视图。要将图像添加到滚动视图，我正在使用以下代码：

```
 LinearLayout sv = (LinearLayout)findViewById( R.id.filesScrollerLayout);
        ImageView iv = new ImageView(this);
        iv.setImageDrawable( new BitmapDrawable( pub.FirstPicture ) ); // same happens with ScaleDrawable.
        iv.setScaleType( ScaleType.CENTER_INSIDE );
        sv.addView( iv ); 

<ScrollView
    android:id="@+id/scrollView2"
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/scrollView1"
    android:background="#FFFF00" >

    <LinearLayout
        android:id="@+id/filesScrollerLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </LinearLayout>
</ScrollView> 
```

所以我需要像这样向这个滚动视图添加图像：

```
|-------------
|
|Image 1
|-------------
|
|Image 2
|-------------
|
|Image 3
|------------- 
```

为此，我需要以某种方式更改 Scrollview 的内容大小？

这是如何在 Android 中完成的？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:45:12.840

```
<LinearLayout
        android:id="@+id/filesScrollerLayout"
        android:orientation="vertical"     << this line
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </LinearLayout>

LinearLayout layout = (LinearLayout)findViewById(R.id.linearLayout);
layout .addView(imageView); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:55:53.607

你能告诉我们现在发生了什么吗？它正在运行并且没有任何显示吗？

我有一种预感，您必须设置布局参数才能显示内容。在添加到线性布局之前，尝试将以下内容添加到您的图像视图中。

```
LinearLayout.LayoutParams layoutParameters = new LinearLayout.LayoutParams(
    LinearLayout.WRAP_CONTENT, 
    LinearLayout.WRAP_CONTENT); 

iv.setLayoutParams(layoutParams);
sv.addView( iv ); 
```

# .net - 循环遍历 .NET 中的文本框

> ID：10316978
> 
> 赞同：0
> 
> 时间：2012-04-25T13:42:50.420
> 
> 标签：.net

我在#C 中有一个非常基本的问题。我在 web 表单上有一些名为 TextBox1,TextBox2,....,TextBox10 的文本框，我希望它们循环访问，例如

```
For(var count=1;count<10;count++) {
    TextBox+count.tostring().text="something"
} 
```

我们可以像 JavaScript 那样做 eval() 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:54:02.623

如果您打算在服务器端执行此操作，则可以使用 Page.Controls （或文本框对象所在的其他容器）。例如：

```
foreach(var ctrl in Page.Controls)
{
    if (ctrl is TextBox)
    {
        var myTxtControl = ctrl as TextBox;
        myTxtControl.Text = "Some text goes here";
    }
} 
```

但是，如果您可以在客户端执行此操作，那将比将数据发送回服务器并在那里处理它更好，更具交互性。

使用 jQuery 的 Javascript 解决方案可能如下所示：

```
$(document).ready(function() {
    $("#myButtonText").click(function() {
        $("input[type='text']").val("something");
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:47:00.863

由于它是 Web 表单，您可以将它们设置为相同的类，然后使用 JavaScript 选择该类。至少这是最常用的方法。

# c# - C# & WPF - 使用矩形对象裁剪图像

> ID：10316979
> 
> 赞同：4
> 
> 时间：2012-04-25T13:42:56.103
> 
> 标签：c#, wpf, image, crop, imaging

我目前在我的项目中有一个图像，我在其上放置了一个矩形（当你按下箭头键时它会移动）。我的目标是让用户移动这个矩形来显示图像的哪个区域是裁剪后的结果。请参阅下面的屏幕截图。矩形为 W:60;H:150;

![庄稼](../Images/9c3b4618f3f8eedcfd7dce3bd1cba890.png)

接下来我想要单击一个按钮，并将矩形覆盖的区域转移到另一个与矩形大小相同的图像容器中。

到目前为止，在搜索谷歌之后我无法实现这一点......你们中的任何人都可以提供帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:46:18.283

您需要使用 CroppedBitmap 类

```
 <CroppedBitmap x:Key="croppedImage" 
      Source="{StaticResource masterImage}" SourceRect="30 20 105 50"/> 
```

用矩形的矩形坐标替换 sourcerect

# asp.net-mvc - ASP.NET MVC 3 使用实体框架代码优先方法在表中存储其他用户信息

> ID：10316981
> 
> 赞同：1
> 
> 时间：2012-04-25T13:43:04.727
> 
> 标签：asp.net-mvc, entity-framework, asp.net-membership, membership-provider

我是 ASP.NET MVC 的新手，所以如果有人能提供以下场景的指导，那就太好了。

看一个场景，其中将有两种类型的成员可以注册到站点，客户和供应商。

每种类型都是一个成员，附加信息存储在单独的模型/表（即客户模型/表、供应商模型/表）中，以及默认的成员凭据（用户名、电子邮件、密码）。不确定最好的方法。欢迎任何建议？

每种类型都有一个单独的注册页面，成功注册后，他们将被添加到各自的角色（即客户、供应商）。

这是我正在使用的客户端模型。

```
public class Client
{
  // Will set this manually when creating a Client member
  [DatabaseGenerated(DatabaseGeneratedOption.None)]
  public int ClientId { get; set; }
  public string FirstName { get; set; }
  public string LastName { get; set; }
} 
```

目前我已经创建了一个 ViewModel 如下来处理客户端的注册

```
public class RegisterClient
{
  // Default ASP.NET MVC RegisterModel
  public RegisterModel RegisterModel { get; set; }
  public Client Client { get; set; }
} 
```

以下是 ClientController 中的 Register 方法

```
public ActionResult Register()
{
  return View();
}

[HttpPost]
public ActionResult Register(RegisterClient model)
{
  if (ModelState.IsValid)
  {
    // Attempt to register the user
    MembershipCreateStatus createStatus;
    Membership.CreateUser(model.RegisterModel.UserName, model.RegisterModel.Password, model.RegisterModel.Email, null, null, true, null, out createStatus);

    if (createStatus == MembershipCreateStatus.Success)
    {
      FormsAuthentication.SetAuthCookie(model.RegisterModel.UserName, false /* createPersistentCookie */);
      Roles.AddUserToRole(model.RegisterModel.UserName, "Client");
      // Get UserId for Client <-> User relationship
      int id = int.Parse(Membership.GetUser(model.RegisterModel.UserName).ProviderUserKey.ToString());
      model.Client.UserProfileId = id;
      db.Clients.Add(model.Client);
      db.SaveChanges();
      return RedirectToAction("Index", "Home");
    }
    else
    {
      ModelState.AddModelError("", createStatus.ToString());
    }
  }
  // If we got this far, something failed, redisplay form
  return View(model);
} 
```

这是一个合适的方法吗？我正在考虑让 Client 模型继承 MembershipUser。

然后，我如何创建客户页面列表以及他们的会员详细信息（即用户名和电子邮件）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:31:38.060

我开发了一个具有两个用户级别的系统，存储类型特定信息的最简单方法是拥有单独的表，然后为它们分配链接信息，过去我为所有用户分配了一个客户 ID，然后将其记录在类型特定的表也是如此。当我想查找他们的信息时，我会检查用户的客户 ID，然后将其与要访问的记录的 ID 进行检查。

在您的情况下，我会在客户和供应商模型中添加一个关联 ID 列。关联 ID 可以是用户名，但我发现最好的方法是有一个单独的用户表，将 asp.net 成员资格中的用户名链接到关联 ID。然后，您可以通过在两个表中查找当前用户关联 ID 来轻松检查用户是客户还是供应商。这种方法意味着后者如果您的供应商或客户有许多用户帐户，他们都可以访问同一组数据。您仍然可以使用 ASP.Net 成员角色来执行部分授权，但您应该在向用户显示记录之前检查关联 ID。

2012 年 2 月 5 日更新：

您可以为您的用户和客户创建模型，如下所示。

```
public class User
{
    public int UserId{ get; set; }
    //This is from ASP.Net Membership
    public string Username { get; set; }
    public int AssosiateId { get; set; }
}

public class Client
{
    [DatabaseGenerated(DatabaseGeneratedOption.None)]
    public int ClientId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }

    //This is the ID of the Assosiate - the same as the user's assosiate id
    public int AssosiateId { get; set; }
} 
```

您将为供应商创建一个类似于上述客户的类。

# c# - 在 C# 中仅使用 XSD 文件的一部分验证 XML 文件

> ID：10316985
> 
> 赞同：1
> 
> 时间：2012-04-25T13:43:22.650
> 
> 标签：c#, xml, xsd

我有一个包含很多元素的 XSD 文件。仅使用该 XSD 文件的一部分，我需要验证传入的 XML 文件。

**例如：**

这是有效的 XML

```
<in attr1="9" attr2="0" attr3="0" /> 
```

这是 XSD 文件。只有元素“FindPerson”下名为“In”的元素是验证 XML 文件所必需的。

```
<xs:element name="WS">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="ELEMENT1">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="FindPerson">
                                <xs:complexType>
                                    <xs:sequence>
                                        <xs:element name="In">
                                            <xs:complexType>
                                                <xs:attribute name="attr1" type="xs:int"/>
                                                <xs:attribute name="attr2" type="xs:boolean" use="optional" default="0"/>
                                                <xs:attribute name="attr3" type="xs:boolean" use="optional" default="0"/>
                                            </xs:complexType>
                                        </xs:element>

... 
```

有没有办法用 C# 中的 XSD 文件的一部分来验证 XML 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:40:47.410

这实际上可以通过您的一些工作来实现，并假设您的 XSD 确实是使用俄罗斯娃娃风格（所有内容嵌套）创作的，正如您截断的 XSD 所暗示的那样。

一个简单的方法是按照以下步骤操作：

*   将原始 XSD 读取为纯 XML 文件；使用 XPath 找到您要使用的节点，然后抓住它。
*   创建一个新的 XML 文档；使用适当的命名空间创建文档元素作为**模式**；为 targetNamespace 创建（或不）具有适当值的属性；elementFormDefault 相同；
*   深度克隆并复制您在上面创建的**架构**元素下的**In**节点定义
***   从新创建的文档元素节点创建一个 XmlNodeReader。*   使用 XmlSchema.Read(nodeReader) 读取架构*   使用 XmlSchemaSet 编译；如果成功，则使用该模式集进行验证。**

 **这里的想法是在飞行中在内存中创建您需要的模式。如果内容模型更复杂（不是俄罗斯娃娃），那么事情很容易复杂到不可行的地步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:46:21.683

您将需要重组您的 XSD。使所有元素成为兄弟姐妹（在顶层）。用于`element ref=...`在定义它们的关系时从另一个引用。然后您的 XSD 将能够验证任何顶级元素。**

# xpath - Watir：识别图像按钮

> ID：10316991
> 
> 赞同：1
> 
> 时间：2012-04-25T13:43:40.953
> 
> 标签：xpath, watir, watir-webdriver

我正在尝试使用 Watir 完成重复性任务，但我遇到了困难，需要您的帮助。我有以下按钮代码：

```
<button class="ppm_button " onclick="submitForm('page','more=1');" type="button">
  <img border="0" align="absmiddle" title="Add and Select More" alt="Add and Select More" style="width: 11px; height: 8px; background: url("ui/uitk/images/nde.png") no-repeat scroll 0px 0px transparent;" src="ui/uitk/images/s.gif" >
  &nbsp;Add and Select More
</button> 
```

我尝试使用firebug获取xpath并使用相同的xpath在ff上运行脚本，它失败了。我很难给出适当的 xpath 来识别对象。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T14:23:29.043

你应该能够避免xpath。

尝试使用 Watir 选择器，例如：

```
b.img(:src => "ui/uitk/images/s.gif") 
```

然后，您应该能够将您想要对元素执行的任何操作附加到末尾，例如`.click`

这超出了[https://github.com/watir/watir/wiki/HTML-Elements-Supported-by-Watir](https://github.com/watir/watir/wiki/HTML-Elements-Supported-by-Watir)上的可用属性，但我不确定您使用的是什么版本的 Watir，或者如何迄今为止，该列表是。

根据它，您还可以使用：

```
b.img(:alt => "Add and Select More") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T19:28:28.020

我会避免使用 xpath，除非其他方法都不起作用，与其他识别所需元素的方法相比，它往往会生成丑陋且难以阅读的代码。

我认为@anonygoose 应该可以工作，但是如果没有其他尝试的方法是单击按钮本身，可以按如下方式完成（注意我假设您要单击按钮，否则将 .click 替换为一些其他适当的方法）

```
browser.button(:class => 'ppm_button ').click 
```

或者

```
browser.button(:text => /Add and Select More/).click 
```

或者如果出于某种奇怪的原因，这些都不起作用，您可以使用其中之一

```
browser.img(:src => "ui/uitk/images/s.gif").parent.click

browser.img(:alt => "Add and Select More").parent.click 
```

如果这些都不适合您，请编辑您的问题并包括您尝试过的问题以及您得到的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-19T16:04:59.087

这个应该工作！

`browser.img(:src => "url of the base image").parent.click`. 只需提及缩略图使用的图像的 url（在检查元素中）。

# c# - Nitpicky ReSharper 行为，对 Request.Cookies 的空引用

> ID：10316992
> 
> 赞同：3
> 
> 时间：2012-04-25T13:43:47.130
> 
> 标签：c#, asp.net-mvc, cookies, resharper, nullreferenceexception

这确实是一件愚蠢的小事，但我很固执，当 R# (6.1) 强调某些内容时，我通常想“修复”它。我正在开发一个 MVC4 项目，并使用 cookie 将 ID 值从一个控制器传递到另一个控制器。我还是一个 MVC 新手，所以也许有更好的方法来做到这一点。无论哪种方式，我都在检查 cookie 的存在，然后检索它的值，如下所示：

```
var idCookieString = string.Empty;
if(Request.Cookies.AllKeys.Contains("id"))
{
    idCookieString = Request.Cookies["id"].Value;
} 
```

`Request.Cookies["id"]`令人烦恼的是，尽管我正在检查`if`语句中是否存在 cookie，但R# 正在调用可能的空引用异常。有没有更好的方法可以在尝试检索 cookie 之前检查它是否存在，或者我应该在其上放置一个 R# 忽略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:48:55.103

R# 不知道 Request.Cookies.AllKeys.Contains("id") 实际上是检查 Request.Cookies["id"].Value 是否会返回任何内容。所以是的，您必须添加 R# 忽略或添加额外的无用代码行：

```
if (Request.Cookies["id"] != null) 
```

afaik没有其他办法。

# c# - 如何使用 Json.NET 阅读带有评论的 JSON 内容？

> ID：10316997
> 
> 赞同：44
> 
> 时间：2012-04-25T13:43:54.243
> 
> 标签：c#, json.net

为了将外部扩展安装到 Google Chrome 浏览器中，我尝试更新 Chrome 外部扩展 JSON 文件。使用`Json.NET`它似乎很容易：

```
string fileName = "..."; // Path to a Chrome external extension JSON file

string externalExtensionsJson = File.ReadAllText(fileName);

JObject externalExtensions = JObject.Parse(externalExtensionsJson); 
```

但我有`Newtonsoft.Json.JsonReaderException`一句话：

```
"Error parsing comment. Expected: *, got /. Path '', line 1, position 1." 
```

调用时，`JObject.Parse`因为此文件包含：

```
// This JSON file will contain a list of extensions that will be included
// in the installer.

{
} 
```

并且注释不是 JSON 的一部分（如*[如何向 Json.NET 输出添加注释？](https://stackoverflow.com/questions/9495718/how-do-i-add-comments-to-json-net-output)*）。

我知道我可以使用正则表达式删除评论（*[Regular expression to remove JavaScript double slash (//) style comments](https://stackoverflow.com/questions/1569295/regular-expression-to-remove-javascript-double-slash-style-comments)*），但我需要在修改后将 JSON 重写到文件中，保留评论可能是一件好事。

有没有办法在不删除评论的情况下读取带有评论的 JSON 内容并能够重写它们？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-25T23:54:18.800

Json.NET 只支持读取多行 JavaScript 注释，即 /* 注释 */

**更新：** Json.NET 6.0 支持单行注释

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-28T15:36:40.933

如果您坚持使用 JavaScriptSerializer（来自 System.Web.Script.Serialization 命名空间），我发现这已经足够好用了......

```
private static string StripComments(string input)
{
    // JavaScriptSerializer doesn't accept commented-out JSON,
    // so we'll strip them out ourselves;
    // NOTE: for safety and simplicity, we only support comments on their own lines,
    // not sharing lines with real JSON

    input = Regex.Replace(input, @"^\s*//.*$", "", RegexOptions.Multiline);  // removes comments like this
    input = Regex.Replace(input, @"^\s*/\*(\s|\S)*?\*/\s*$", "", RegexOptions.Multiline); /* comments like this */

    return input;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-13T00:12:22.000

在解析之前，您始终可以将单行注释转换为多行注释语法......

类似换...

```
.*//.*\n 
```

和

```
$1/*$2*/ 
```

...

```
Regex.Replace(subjectString, ".*//.*$", "$1/*$2*/"); 
```