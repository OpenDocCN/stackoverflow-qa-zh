# StackOverflow 问答 11999000-11999999

# javascript - javascript中变量范围的问题

> ID：11999001
> 
> 赞同：0
> 
> 时间：2012-08-17T02:19:08.877
> 
> 标签：javascript

> **可能重复：**
> [循环内的 Javascript 闭包 - 简单的实际示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

我似乎很难理解 javascript 中变量的范围。

我有以下代码：

```
for (var i =2; i< 5;i++){
    var k = (i+1).toString()
    window['graph.point'+i].onMove = function(x,y){
        return [min(x,window['graph.point'+k].coord[0]],f(min(x,window['graph.point'+k].coord[0]))]}
    }
} 
```

这段代码应该对我在图表上的一些可移动点的可能位置施加一些限制。问题似乎是，当 graph.point 对象检查是否满足约束时，它们使用 k 的最后一个值，即 6。我如何确保这些对象使用它们应该使用的 k 值?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T02:25:52.940

`for`块没有自己的变量范围，因此您需要使用立即函数创建一个新范围：

```
for (var i =2; i< 5;i++){
    var k = (i+1).toString();
    (function(k, i) {
        window['graph.point'+i].onMove = function(x,y){
            return [min(x,window['graph.point'+k].coord[0]],f(min(x,window['graph.point'+k].coord[0]))]}
        }
    })(k, i);
} 
```

# java - 在默认的 android 日历中创建日历事件

> ID：11999004
> 
> 赞同：2
> 
> 时间：2012-08-17T02:19:21.297
> 
> 标签：java, android, events, date, calendar

当按下按钮时，我有以下代码可以执行某些操作。我希望能够让按钮为 2013 年 3 月 3 日上午 10:00 创建一个日历事件。感谢所有帮助。

代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //Button button = (Button)findViewById(R.id.button1);
   // button.setOnClickListener(this);
    final CheckBox checkBox = (CheckBox) findViewById(R.id.checkBox1);
    final CheckBox checkBox2 = (CheckBox) findViewById(R.id.checkBox2);

    final Button button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View v) {

             if (checkBox.isChecked()) { 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T02:36:11.803

您可以在 Intent 的帮助下打开日历。

下面是在日历应用程序中设置事件的代码。您只能打开填充了默认事件字段的日历活动。

```
Intent intent = new Intent(Intent.ACTION_EDIT);
intent.setType("vnd.android.cursor.item/event");
intent.putExtra("title", "Some title");
intent.putExtra("description", "Some description");
intent.putExtra("beginTime", eventStartInMillis);
intent.putExtra("endTime", eventEndInMillis);
startActivity(intent); 
```

将上面的代码放在按钮的 onclick 监听器中。

此外，您必须在 manifest.xml 中添加这些日历权限：

```
android:name="android.permission.READ_CALENDAR"
android:name="android.permission.WRITE_CALENDAR" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T02:44:06.277

Android Coder 提供了一种简单的方法来完成此任务

此外，您必须在 manifest.xml 中添加使用日历事件的权限

android:name="android.permission.READ_CALENDAR"

android:name="android.permission.WRITE_CALENDAR"

# ruby-on-rails - 视图中的 Rails Helpers - rails 中未定义的局部变量或方法

> ID：11999006
> 
> 赞同：2
> 
> 时间：2012-08-17T02:20:14.203
> 
> 标签：ruby-on-rails, ruby, erb

我的**ApplicationHelper中有这个助手**

```
module ApplicationHelper
  def sort_url
    controller_name = params[:controller] 
    url = controller_name + '/sort' 
  end
end 
```

在**application.js.erb**

```
url: "<%= sort_url %>", 
```

错误：

```
undefined local variable or method `sort_url' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:48:22.850

这是因为 ApplicationHelper 默认只包含在视图中。

javascript 文件不是视图。

如果你真的想在视图中使用助手，你可以使用

```
<% environment.context_class.instance_eval { include MyHelper } %> 
```

有关相关问题的更多信息，请参阅：[在 javascript 资产中使用 Rails 辅助方法](https://stackoverflow.com/questions/7451517/using-a-rails-helper-method-within-a-javascript-asset)

# firefox - Firefox 中的 CSSMatrix 等价物？

> ID：11999008
> 
> 赞同：2
> 
> 时间：2012-08-17T02:20:30.993
> 
> 标签：firefox, draggable, jquery-ui-draggable, css-transforms

我目前正在开发一个微小的“可拖动的移动小部件”，基本上它只实现了 jQUery UI Draggable 小部件的部分界面（我的项目需要的部分）。

我知道我可以模拟鼠标事件并使 jQuery UI Draggable 在移动/平板电脑平台上正常工作，但这种方法的主要问题是它感觉不够流畅，并且由于 CSS3 转换是硬件加速的，使用translate3d 没有改变 top，left 属性产生了巨大的差异，如您在此处看到的：

[http://dl.dropbox.com/u/16252882/royws/td/demo/touchdraggable.html](http://dl.dropbox.com/u/16252882/royws/td/demo/touchdraggable.html)

我打算让它也适用于 IE10 和最新的 Firefox，所以在代码中我使用 WebkitCSSMatrix 来解析矩阵。我用谷歌搜索，发现对于 IE10，我可以使用 MSCSSMatrix 来解析矩阵，但我在 Firefox 中找不到类似的类。

我现在只使用矩阵的 Me 和 Mf 属性，如您在此处看到的，

[https://github.com/royriojas/touch-draggable/blob/master/src/touch-draggable.js](https://github.com/royriojas/touch-draggable/blob/master/src/touch-draggable.js)

所以我知道我可以手动解析它。如果没有其他选择，我将不得不这样做，我只是想知道是否有人知道如何做到这一点，Firefox 中的简单方法:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T00:39:35.823

我知道这已经晚了几个月，但如果您仍然感兴趣，我为我从事的项目找到（并帮助修复）了一个[CSSMatrix shim 。](https://github.com/arian/CSSMatrix)链接的版本不是立即浏览器准备好的（并且稍微落后于[我的 fork](https://github.com/camupod/CSSMatrix)），所以如果你只是想复制代码并继续，请随时查看浏览器[版本](https://github.com/camupod/CSSMatrix/blob/browserified/CSSMatrix.js)（它更接近于 WebKitCSSMatrix 对象）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T08:22:03.737

这对游戏来说来得相当晚，但也许这会对未来的读者有所帮助。我刚刚建立[了一个完全做到这一点的类](https://github.com/jonbrennecke/CSSMatrix/blob/master/cssmatrix.js)。它提供了一个名为“CSSMatrix”的对象，它完全匹配 WebKitCSSMatrix 的每个方法。这是一个并排比较它们的[现场演示。](http://cdpn.io/mvqab)希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T01:41:14.027

所以我找不到等效的类，但这是我用来填补空白的，顺便回答我自己的问题感觉很奇怪！

```
var isMoz = $.browser.mozilla; //TODO: check for a property detection instead of a browser sniffing

 var reMatrix = /matrix\(\s*-?\d+(?:\.\d+)?\s*,\s*-?\d+(?:\.\d+)?\s*,\s*-?\d+(?:\.\d+)?\s*,\s*-?\d+(?:\.\d+)?\s*\,\s*(-?\d+(?:\.\d+)?)\s*,\s*(-?\d+(?:\.\d+)?)\s*\)/;

$.getMatrix = function (transformString) {

  if (isMoz) {
    //TODO: I couldn't find the equivalent for WebKitCSSMatrix class in firefox

    //Other values are being ignored for now cause I don't really need them now
    var dummyMatrix = {
      e : 0,
      f : 0
    };

    var match = transformString.match(reMatrix);
    if (match) {
      dummyMatrix.e = match[1];
      dummyMatrix.f = match[2];
    }
    return dummyMatrix;
  }
  if (pEnabled) {
    return new MSCSSMatrix(transformString);
  }
  return new WebKitCSSMatrix(transformString);
}; 
```

我现在只关心 Me 和 Mf 属性。

正则表达式也是从[TouchScroll](https://github.com/davidaurelio/TouchScroll)源代码“借来的”！

# excel - 隐藏列 excel 中的空单元格（不昂贵 - 计算时间）

> ID：11999013
> 
> 赞同：1
> 
> 时间：2012-08-17T02:21:30.067
> 
> 标签：excel, excel-formula

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T02:48:44.737

A couple of suggestions:

1.  Using this array formula from [Pearson](http://www.cpearson.com/excel/NoBlanks.aspx) - screenshot below
2.  A manual (non-VBA) SpecialCells method which is easier

**SpecialCells method**

*   copy the column with gaps to the right
*   select the new column, Press F5, `Special` and check *blanks*
*   right click, select `Delete` and then checlk `shift cells up`

The first two steps of this 3 step process (selecting the blanks) are shown here at [Debra Dalgleish's site](http://www.contextures.com/xlDataEntry02.html#Fill)

**Array Formula method**

![enter image description here](../Images/150affaa66ea4051da7cb447d8f1e0a1.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T03:24:04.877

Give this a shot, entered as an array formula with `Ctrl+Shift+Enter`):

Quickly paste-able version (**note**: you will need to change these references to those in your sheet - I used data in `A1:A7` in mine [see image]):

```
=IFERROR(INDEX($A$1:$A$7, SMALL(--(IF($A$1:$A$7<>"",ROW($A$1:$A$7),100000)),ROW())), "") 
```

Longer-form (to better see what is going on):

```
=IFERROR(
        INDEX(
              $A$1:$A$7,
              SMALL(
                  --(IF($A$1:$A$7<>"",ROW($A$1:$A$7),100000)),ROW())),
   "") 
```

Basically, we use an index formula on the column. The `row` argument uses the `SMALL()` formula to find all instances where the column contains empty values, and then assigns an arbitrarily high number that hopefully won't ever be matched (this may be bad practice :) ). The `k` argument to `SMALL()` (the kth element in the array you want to match) is just the row number, meaning that as you go down the list, you won't match items above the current one.

![enter image description here](../Images/4188e61cf099e0613176d75f89ca03ee.png)

# html - 流氓 html 代码被插入到我的 html 中

> ID：11999015
> 
> 赞同：-1
> 
> 时间：2012-08-17T02:21:51.950
> 
> 标签：html

嗨，我看到我的 html 文件顶部出现了一些流氓代码。我以前从未见过这个，也不知道从哪里开始调试它。它出现在每个浏览器中。以下是在我的原始 doctype 语句开始之前在我的 html 页面上方自动生成的内容。有没有人见过这种代码，并且知道可能导致这种情况的原因吗？非常感谢。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
</head><body style="font-family: -moz-fixed; white-space: -moz-pre-wrap; width: 72ch;">   <br>
<br>
<br>
</body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:51:36.673

我想到了。我在 php 中的一个包含文件有一些多余的 html 代码被插入到我的 html 中。啊。我花了2个小时才弄明白。感谢您的宝贵时间，很抱歉给您带来麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T02:28:30.393

这个html完全没问题。你用什么工具来开发网页？似乎添加这些代码是为了使代码在 Internet Explorer 和 Mozilla Firefox 中可移植。

# asp.net - asp.net 长时间运行的任务

> ID：11999017
> 
> 赞同：0
> 
> 时间：2012-08-17T02:22:07.677
> 
> 标签：asp.net, long-running-processes

我已经实现了这个解决方案来在asp.net [http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-中运行一个长时间运行的任务网络.aspx](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)

但是我一直收到这个错误：“服务应用程序池'DefaultAppPool'的进程在关闭期间超出了时间限制。进程ID是'1111'。”以前有没有人遇到过这个问题并且知道什么，如果有的话，我'我做错了。

asp.net 等待的时间是否有限制，因为我的任务可能需要至少几个小时才能运行。

请不要回答说我不应该使用 asp.net。我必须在这一点上。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:46:43.063

Asp.net 不适合长时间运行的任务。（如果你提到的博客也注意到了。）

长时间运行的任务的最佳解决方案是一些适用于长时间运行的作业的框架。

您应该考虑使用 Windows 服务。您可以有一个表格来跟踪此类长时间运行的作业的状态，并且您的页面可以向用户显示这些表格中的作业状态。

# javascript - Backbone - 遍历数组属性中的对象

> ID：11999018
> 
> 赞同：1
> 
> 时间：2012-08-17T02:22:09.960
> 
> 标签：javascript, arrays, backbone.js, reference, get

我有一个带有两个阵列的模型，明亮的和正常的。每个数组都包含表示颜色的对象。我想在模型中实现一种方法，允许设置这种颜色的一些属性（例如色调）。所以我写了这个：

```
setHue: function(hue) {
    _.each([this.get('brigth'), this.get('normal')], function(colors) {
        _.each(colors, function(color) {
            color.setHue(hue + this.getHue());
        });
    });
}, 
```

我认为这很清楚 - 我尝试遍历`bright`和`normal`数组中的每种颜色。它不会更新这些数组中的颜色。里面的这个颜色`_.each`似乎有了新的价值，但看起来只是颜色的副本，而不是参考。有谁知道如何做我想做的事？我的意思是`_.each`循环，我不想搞砸`for`,`length`和索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T01:59:34.610

明亮的拼写错误。你进入了光明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:11:42.553

嗯，我认为你在这里有一个普遍的问题。让我们尝试一个例子：

```
this.get('brigth') 
```

将返回一个数组，而不是一个模型，对吗？

如果是这样的话，

```
_.each([this.get('brigth'), this.get('normal')], function(colors) { ... 
```

将遍历数组数组，即颜色将得到一个数组，而不是模型或集合。因此，颜色将是数组的一项（我假设是一个字符串）。因此颜色没有方法 setHue。

此外，Paul 也是正确的 this.getHue() this 不是指模型，因为您要切换上下文两次（每个循环一次）。我希望我在这里没有完全弄错。

# javascript - 如何在 HTML 或 javascript 中绘制渐变背景？

> ID：11999022
> 
> 赞同：1
> 
> 时间：2012-08-17T02:23:01.157
> 
> 标签：javascript, html, drawing

有没有一种简单的方法来绘制如图所示的渐变？还是最好创建一个图像？

![在此处输入图像描述](../Images/c2c994acf3fc4a7fa1ba7c8b5d1f47df.png)

我希望它是正方形或矩形，如图所示。

我想创建多个与此类似的渐变背景，但在每个中使用不同的颜色。

此外，我发现[了这个网站](http://gradients.glrzad.com/)，它确实很有帮助，但不是我正在寻找的控件。我想要一种径向类型的渐变，再次如图所示。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:33:00.640

[该站点](http://www.colorzilla.com/gradient-editor/)生成 CSS 渐变，包括径向渐变。

# .net - 包括 .Net 4 库以在具有 .Net 2 的机器上运行

> ID：11999023
> 
> 赞同：0
> 
> 时间：2012-08-17T02:23:09.687
> 
> 标签：.net, deployment

如果我包含项目引用的所有库，编译后的应用程序是否能够在没有安装所需 .NET Framework 的环境中运行？

更准确地说，如果我使用 .Net 4.0 功能进行开发，如果我包含引用的库（即，将它们复制到可执行文件旁边），应用程序是否能够在仅安装了 .Net 2.0 的系统上运行？

我确实读过这个问题[在 .net 2 机器上部署 .net 4 应用程序](https://stackoverflow.com/questions/4128871/deploying-net-4-apps-on-net-2-machines)，但我不确定答案，因为其他用户说您也可以使用您的应用程序重新分发 .NET 运行时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T02:26:07.947

不，.NET 4 适用于新的运行时。这是 .NET 4 带来的重大变化之一

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T02:30:13.077

实际上，如果您使用第三方工具静态链接应用程序所需的 .NET 4 运行时部分，则*可以在未安装 .NET 4 的机器上运行。*

[RustemSoft .NET Linker](http://www.rustemsoft.com/net_link_dll.htm)就是这样一个应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T02:29:46.397

曾经有一个名为 Xenocode PostBuild 的产品，它可以将托管应用程序及其所有依赖项封装为原生 EXE。Xenocode 现在是 Spoon，他们有一个名为[Virtual Application Studio](http://spoon.net/studio/)的产品。我没有使用它，但我认为这是关于你需要做的事情。

# html - 在中显示名称属性菜单顶部的标签 我正在用标签编写一个下拉菜单。有没有办法使用 HTML 或 CSS 将标签的 name 属性放在菜单的顶部？因此，当它折叠时，会显示名称。所以： <select name="animals"><option>Dogs</option> <option>Cats</option></select> 菜单是折叠的“动物”在窗口中，还是展开的“动物” “在顶部。 <optgroup&g< h1="">> ID：11999025
> 
> 赞同：0
> 
> 时间：2012-08-17T02:23:16.190
> 
> 标签：html, css, select, drop-down-menu

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T02:27:22.667

这不能没有：

1）js保留下拉的值，将options替换为“animals”onchange。

或者

2）进行自定义下拉。

选择元素是那些没有样式的“本机”控件之一。除了他们被要求做的事情之外，你不能用他们做很多事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:41:53.197

您可以`details`按照 HTML5 使用该元素：

```
<details>
<summary>animals</summary>
<select name="animals">
   <option>Dogs</option>
   <option>Cats</option>
</select>
</details> 
```

浏览器支持仍然有限（虽然在 Chrome 上看起来不错），所以您可以考虑 JavaScript 技术（在不同的库中可能有几十种替代方法）。但是，如果后备（文本“动物”出现在下拉菜单之前）是可以接受的，或者如果您认为可以轻松地将其样式或脚本设置为可接受的内容，那么这是一种简单的方法。</optgroup&g<>

# python - 协助安装 libbitcoin

> ID：11999026
> 
> 赞同：1
> 
> 时间：2012-08-17T02:23:19.860
> 
> 标签：python, macos, module, installation, bitcoin

我知道这可能是一个愚蠢的问题，这也可能是问它的错误地方。基本上，我想知道如何在 Mac OSX *(Lion)*上安装 libbitcoin 。在我对我没有发布任何代码等感到非常悲伤之前，我会让你知道我已经尝试过`easy_install`（`pip` *我知道的唯一方法）*。我研究了我的问题，但没有找到答案。这似乎是问这个问题的最佳场所。

# php - 如何使用 PHP 的 str_replace() 从多个字符串生成多个表单复选框？

> ID：11999029
> 
> 赞同：0
> 
> 时间：2012-08-17T02:24:10.040
> 
> 标签：php, html, str-replace

我知道如何使用 str_replace()，但这超出了我的范围。这是输入（来自 MySQL 查询）：

```
[%] This is a checkbox
[%] I have seen "Star Trek VI: The Voyage Home"
[%] I'm a geek 
```

这是我希望输出的呈现方式：

```
<label><input type="checkbox" name="requirement[1]" value="1">This is a checkbox</label>
<label><input type="checkbox" name="requirement[2]" value="1">I have seen "Star Trek VI: The Voyage Home"</label>
<label><input type="checkbox" name="requirement[3]" value="1">I'm a geek</label> 
```

显然，将 [%] 放在行首将表示它成为一个复选框，就像在单独的行上一样（除非有更好的、用户友好的方式）。**如果有比使用 str_replace() 更好的方法，我很想知道。**

*提前致谢！*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T02:26:56.317

```
$lines = explode("\n", $mysql_result_string);
$n = 0;
foreach ($lines as $line) {
    echo str_replace('[%]', '<label><input type="checkbox" name="requirement[' . $n . ']" value="1">', $line) . "</label>";
    $n++;
} 
```

编辑：是的：[这里的例子](http://lucb1e.com/rp/crapware/replacething.php)。

# email - com.sun.mail.util.DecodingException：BASE64Decoder：编码流从雅虎检索邮件时出错

> ID：11999030
> 
> 赞同：1
> 
> 时间：2012-08-17T02:24:17.243
> 
> 标签：email, base64, jakarta-mail, yahoo, ioexception

StackOverflow 帮助了我很多，所以想发布这个来节省我调试它的时间：

我正在使用 Java 应用程序通过 IMAP/SSL 检索邮件。好几个月。现在来自雅虎的特定消息出现问题。该消息是多部分/替代的，带有一个 base64 编码的 text/plain 部分和一个 base64 编码的 text/html 部分。

检索失败：

```
IOException: com.sun.mail.util.DecodingException: BASE64Decoder: Error in encoded stream: needed 4 valid base64 characters but only got 3 before EOF, the 10 most recent characters were: "IPONREPLY>" :[com.sun.mail.util.BASE64DecoderStream.decode(BASE64DecoderStream.java:256), com.sun.mail.util.BASE64DecoderStream.read(BASE64DecoderStream.java:110)... 
```

使用 Yahoo 的 webmail 客户端，内容本身看起来很正常。查看我的应用程序在 HTML 部分中检索到的内容，我在 base64 编码的 text/html 部分的末尾看到：

```
[...]
YWdlcy9iank1LzQ5NjViOGUyLTQxYjEtNGFhNi1iOGFhLTEzNGQwYjYxMWM5My5naWZ4IiAvPg0K
DQo8L2JvZHk+PC9odG1sPg==
<XHTML-STRIPONREPLY>                                                                               

                 </XHTML-STRIPONREPLY> 
```

这是雅虎最近开始添加到消息中的文本。它适用于未编码或使用带引号的可打印编码的文本，但会破坏 base64 编码的部分。

我向雅虎提交了一份报告，所以希望他们能尽快解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T18:29:10.773

尝试设置您的属性：

```
properties.setProperty("mail.imaps.partialfetch", "false"); 
```

# javascript - 取消 FB.api(...) 请求

> ID：11999032
> 
> 赞同：0
> 
> 时间：2012-08-17T02:25:29.343
> 
> 标签：javascript, facebook, facebook-fql

每当触发*input*的**keyup**事件时，我都会使用 FQL 查询调用 FB.api(...) 。是否可以取消先前查询（更新的）更新查询的请求，还是我必须等待它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:30:09.177

如果请求已发送，则无法取消。

您可以做的是使用 延迟发送请求`setTimeout`，并在下一个 keyup 事件触发时取消先前的延迟。

# c++ - int&& 在模板实例化中有效吗？

> ID：11999037
> 
> 赞同：3
> 
> 时间：2012-08-17T02:27:39.210
> 
> 标签：c++, templates

考虑下面的代码。那里发生了什么？

```
#include <iostream>
#include <stdio.h>

using namespace std;

template<class T>
void test(T &t)  // but why  int&& is valid here,when  instantiated with test<int&>??
{
  puts("T&");
}

int tref(int&& param)    //compile  error
{
  puts("tref&");
}

int main()
{
  int i;
  test<int&>(i);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T02:39:05.100

我不确定我是否遵循，如果你的意思是`int&&`第一个，因为你错了。什么时候，签名中的那个还在。此外，与使用*额外*的. 具有特定含义：*rvalue-reference*。`T``int&``T``int&``T&``int&``int&&`*`int&``&``&&`*

 **§8.3.2[dcl.ref]/5

> 不应有对引用的引用，没有引用数组，也没有指向引用的指针。[...]

§8.3.2[dcl.ref]/6

> 如果 typedef (7.1.3)、类型模板参数 (14.3.1) 或 decltype-specifier (7.1.6.2) 表示类型 TR 是对类型 T 的引用，则尝试创建类型“ lvalue reference to cv TR”创建类型“lvalue reference to T”，而尝试创建类型“rvalue reference to cv TR”创建类型TR。**

# jquery - jQuery验证表单 - 确保名字和姓氏中没有数字只输入字母

> ID：11999039
> 
> 赞同：1
> 
> 时间：2012-08-17T02:28:15.857
> 
> 标签：jquery, validation

我正在使用 jQuery 来验证表单（名字、姓氏和电子邮件）。我已成功验证表单的电子邮件部分，但是我想知道如何验证 firstName 和 lastName 输入字段？

jQuery 验证脚本：

电子邮件验证（工作）：

```
var patt =  /^.+@.+[.].{2,}$/i;

    if(!patt.test(ele.val())) {
        jVal.errors = true;
                    emailInfo.removeClass('correct').addClass('error').html('X').show();
        ele.removeClass('normal').addClass('wrong');
            }else{
                    emailInfo.removeClass('error').addClass('correct').html('&radic;').show();
                    ele.removeClass('wrong').addClass('normal');
            }

        }, 
```

名字验证（不工作）：

```
var patt =  /^[a-zA-Z'-]+$/;

        if(!patt.test(ele.val()).length < 2) {
            jVal.errors = true;
                firstNameInfo.removeClass('correct').addClass('error').html('X').show();
                ele.removeClass('normal').addClass('wrong');
        } else {
                firstNameInfo.removeClass('error').addClass('correct').html('&radic;').show()
                ele.removeClass('wrong').addClass('normal');
            }
        }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-01T08:55:47.580

在 html 代码的最后调用[https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.15.0/jquery.validate.min.js](https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.15.0/jquery.validate.min.js)

```
$('#formId').validate({
            rules: {
                firstname: {
                    minlength: 3,
                    maxlength: 30,
                    pattern: "^[a-zA-Z_]*$",
                    required: true
                },
                 lastname: {
                    minlength: 3,
                    maxlength: 30, 
                    pattern: "^[a-zA-Z_]*$",
                    required:true
                }
     },
            highlight: function(element) {
                $(element).closest('.form-group').addClass('has-error');
            },
            unhighlight: function(element) {
                $(element).closest('.form-group').removeClass('has-error');
            },
            errorElement: 'span',
            errorClass: 'help-block',
            errorPlacement: function(error, element) {
                if(element.parent('.input-group').length) {
                    error.insertAfter(element.parent());
                } else {
                    error.insertAfter(element);
                }
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:49:09.317

我们一定找到了相同的 jquery 表单验证页面......任何我也在用它编写表单并找到你问题的答案的人 - 如果不能帮助其他人，希望你仍然需要它......

```
 var regex = new RegExp("[0-9]");
   var match = regex.exec($('#firstname').val());
   if(ele.val().length < 2 || match) {
//do stuff 
```

所以 if 的第一部分不相关，但 Match 部分是，检查字符串中是否有任何数字，如果有的话......在我的情况下，我让它显示错误 div ...我不想复制所有代码。

希望这对 Joe CustomWebsites4Less.com 有所帮助

如果您需要一个示例，我应该在一周内将其放在实时站点上...

# javascript - jquery load() 没有加载内容

> ID：11999042
> 
> 赞同：0
> 
> 时间：2012-08-17T02:28:55.323
> 
> 标签：javascript, jquery

我有一个带有超链接的页面，单击该超链接时，我希望它从另一个文件加载内容，这样页面就不必刷新。当前“.container”的内容应替换为来自外部 html 文件的“.container”的内容。

这是我的html

```
 <li> <a href="#" class="loader" id="indexLink">Chris Lebeau</a> 
```

这是页面底部的我的 jQuery。

```
 <script type="text/javascript">
     jQuery(document).ready(function() {
     jQuery("#indexLink").click(function(event) {
     jQuery("div.container").html(ajax_load).load("index.html");
    event.preventDefault();
}); 
```

});

当您单击 ORG 图表中的第一个人 @ [http://frommesetc.com/test/org.html](http://frommesetc.com/test/org.html)时， .container 应该淡出，而 index.html 中的 .container 应该淡入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T02:31:44.567

您的代码中缺少`javascript:`一些内容：

`<a href="javascript:load()">Chris Lebeau</a>`

**编辑**

您还需要定义`load()`函数：

```
<script type="text/javascript">
...

var loadUrl = "/index.html";
function load() {
    $("div.container").html(ajax_load).load(loadUrl);
}
</script> 
```

这假设您在页面上有一些带有`class="container"`.

**编辑 2**

最后，建议现在使用[Unobtrusive JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)。要使用这种方法，请执行以下操作：

```
<a href="index.html" id="chris_lebeau">Chris Lebeau</a>

<script type="text/javascript">
jQuery(document).ready(function() {
    jQuery("#chris_lebeau").click(function(event) {
        jQuery("div.container").html(ajax_load).load("index.html");
        event.preventDefault();
    });
});
</script> 
```

这是目前做事的“最佳”方式，但如果该`javascript:load()`方法有效，那就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T02:45:16.547

你在这里有几个问题。

首先，您没有“容器”类的元素 - 因此您的点击处理程序实际上什么也没做。

此外，如果你有一个点击监听器，那么就不需要从锚链接到 JS 函数。

这是一个例子：

```
HTML:
<a class="button" href="#">Hello</a>
<div class="newcontent"></div>

JAVASCRIPT:
var loadingAnim = "<img src='img/ajax-loader.gif' alt='loading...' />";
var dataToLoad = "/index.html";
$("a.button").click(function(){
    $("div.newcontent")
        .html(loadingAnim)
        .load(dataToLoad);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:04:47.623

采用

```
jQuery("div.container").load("index.html"); 
```

# qt - QTextBrowser 的右键单击上下文菜单

> ID：11999045
> 
> 赞同：0
> 
> 时间：2012-08-17T02:29:38.870
> 
> 标签：qt, contextmenu, qtextbrowser

我正在尝试为我的 Qt 应用程序中的 QTextBrowser 添加一个自定义 contextMenu，但它似乎不起作用。

我正在使用为 Element QLineEdit 定义的以下链接中解释的步骤，但是它不起作用。

[扩展 qtextedit 的标准上下文菜单](http://www.qtcentre.org/threads/35166-extend-the-standard-context-menu-of-qtextedit)

**编辑：**

我在 MainWindow 的构造函数中编写了以下代码：

```
QDockWidget *dock = new QDockWidget(tr("Text View"), this);
txtBrwsr = new QTextBrowser(this);
dock->setWidget(txtBrwsr);

txtBrwsr->setContextMenuPolicy(Qt::CustomContextMenu);
connect(txtBrwsr,SIGNAL(customContextMenuRequested(const QPoint&)), this,SLOT(showContextMenu(const QPoint&)));
setCentralWidget(txtBrwsr); 
```

下面是showContextMenu函数的实现：

```
void AMTMainWindow::showContextMenu(const QPoint &pt) {

    QMenu * menu = txtBrwsr->createStandardContextMenu();
    QMenu * tags;
    tags = menu->addMenu(tr("&Tag"));
    for(int i=0; i<_atagger->tagTypeVector->count(); i++) {
        QAction * taginstance;
        char * tagValue = (_atagger->tagTypeVector->at(i)).tag.toLocal8Bit().data();
        taginstance = new QAction(tr(tagValue), this);
        connect(taginstance, SIGNAL(triggered()), this, SLOT(tag(tagValue)));
        tags->addAction(taginstance);
    }
    menu->addAction(untagAct);
    menu->addAction(addtagAct);
    menu->exec(txtBrwsr->mapToGlobal(pt));
    delete menu;
} 
```

经过一些调试，我发现当我按下右键应该打开上下文菜单时，甚至没有触发 showContextMenu 函数。所以我认为主要问题在于连接功能。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T20:56:35.690

您在此处创建菜单后删除菜单：

```
[...]
menu->addAction(addtagAct);
menu->exec(txtBrwsr->mapToGlobal(pt)); 
```

**`delete menu;`**

# .htaccess - htaccess如何重定向所有页面，但不是根目录

> ID：11999047
> 
> 赞同：3
> 
> 时间：2012-08-17T02:29:50.250
> 
> 标签：.htaccess, redirect

我需要一个 htaccess 301 重定向的帮助。

我有一个网站 www.site.com 但我需要将所有页面更改为 www.newsite.com 但我不想移动 www.site.com（获取页面信息）

例子：

```
www.site.com (not move) index of to put then a template or message

www.site.com/2012/08/page.html move to www.newsite.com/2012/08/page.html
www.site.com/tag/keyword/ move to www.newsite.com/tag/keyword/
www.site.com/category/general/ move to www.newite.com/category/general/ 
```

我怎么能这样做？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T02:35:09.847

您可以尝试使用 mod_alias'`RedirectMatch`来强制 URI 中的某些内容进行重定向。在 site.com 的文档根目录的 htaccess 文件中，添加：

```
RedirectMatch 301 ^/(.+)$ http://www.newsite.com/$1 
```

这将使它之后的任何内容都`http://www.site.com/`将被重定向，但`http://www.site.com/`不会。但是，`http://www.site.com/index.html` *将*被重定向。如果这是一个问题，您可以使用 mod_rewrite：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/$
RewriteCond %{REQUEST_URI} !^/index.html$
# and whatever else you don't want redirected
RewriteRule ^(.*)$ http://www.newsite.com/$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T02:34:38.273

在`www.site.com`主机上启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^(www\.)?site\.com$ [NC]
RewriteRule ^.+$ http://www.newsite.com%{REQUEST_URI} [L,R=301] 
```

# jquery - 使 jquery 对话框大小和位置不持久

> ID：11999055
> 
> 赞同：2
> 
> 时间：2012-08-17T02:31:04.600
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

好的，这就是我想要实现的目标以及我面临的问题。要遵循的步骤是：

1.  打开一个对话框
2.  拖动它和/或重新调整对话框的大小
3.  关闭对话框
4.  再次打开对话框。

对话框从上次关闭的位置打开，大小是上次调整大小的位置。我不希望对话框以这种方式运行。我希望它每次打开时都以自动宽度从中心定位。我在对话框的初始化中提供了 position: 'center' 和 width: 'auto' 但它似乎没有帮助。

jQuery 版本：1.7.1 jQuery UI 版本：1.8.17 浏览器：IE9/IE8

下面是 HTML：

```
<div class='mydialog'></div>
<a href='#' id='one'>test1</a> 
```

这是对话框本身的代码：

```
$(function(){
   var theDialog = $(".mydialog").dialog({
        autoOpen: false,            
        modal: true,
        width: 'auto',
        position: 'center',            
    });

    $('#one').click(function(){
        theDialog.html('some random text').dialog( "option", "title", "Dynamic Title").dialog('open');
    }); 
}); 
```

我尝试寻找解决方案，但找不到任何解决方案。我知道这可能违反直觉，但这是必需的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T02:45:05.563

您是否尝试过使用此处文档中列出的关闭事件：

[http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

您可以执行以下操作：

```
$( ".mydialog" ).dialog({
   close: function(event, ui) {
       $(this).dialog( "destroy" );

   }
}); 
```

根据文档`destroy`，完全删除了对话框功能。这将使元素返回到它的预初始化状态。

您可能需要在单击事件上初始化对话框，以便在每次单击链接时重新初始化。

或者，您可以只使用`return false;`click 事件来防止不需要的行为。

# perl - Perl - 创建一个蛮力列表

> ID：11999056
> 
> 赞同：0
> 
> 时间：2012-08-17T02:31:22.410
> 
> 标签：perl

Perl 新手，我试图定义一个字符子集，然后在文本文件中输出它们的所有可能组合（最多 8 个字符）。

我真的对 Perl 的“默认变量”或其他方面不太满意，所以我从伪代码开始，希望有人可以帮助我了解具体细节（我从示例中学到了最好的东西）。

```
#Define output file
$filename=output.dat
$standard_output->$filename

#Define list
$list[]=regex/a..z 0..9/

#Cycle through iterations
foreach $letter1 in $list{
 print $list[$letter]
}

foreach $letter1 in $list{
 foreach $letter2 in $list{
  print $list[$letter1] $list[$letter2]
 }
}

...

foreach letter1 in list{
 foreach letter2 in list{
  foreach letter3 in list{
   foreach letter4 in list{
    foreach letter5 in list{
     foreach letter6 in list{
      foreach letter7 in list{
       foreach letter8 in list{
        print list[letter1] list[letter2] list[letter3] list[letter4] list[letter5] list[letter6] list[letter7] list[letter8]
       }
      }     
     }
    }
   }
  }
 }
} 
```

如您所见，我对此很陌生。有人可以帮助我了解 Perl 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T04:17:33.407

我的[Set::CrossProduct](https://www.metacpan.org/module/Set%3a%3aCrossProduct)模块使这很容易，并且它没有堆栈或内存破坏递归：

```
use v5.10;

use Set::CrossProduct;

my $min = 2;
my $max = 4;
my $set = [ qw( a b 1 2 ) ];

foreach my $length ( $min .. $max ) {
    say "Getting combinations of length $length";

    my $cross = Set::CrossProduct->new(
        [ ( $set ) x $length ]
        );

    while( my $tuple = $cross->get ) {
        say join '', @$tuple;
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T02:49:53.927

函数式编程*来救援！下面的代码不会太高效，但更干净。

我们将定义一个以数字和列表作为参数的函数。数字表示我们必须递归多少次，列表包含来自外层的字母。

```
#!/usr/bin/perl
use strict; use warnings;
my @list = 'a' .. 'z'; # lowercase letters
sub combinations {
   my ($recursions, @letters) = @_; # unpack the arguments
   if ($recursions == 0) {
       print @letters, "\n"; # print the letters, append newline
   } else {
      # do a loop
      $recursions--; # reduce level
      for my $letter (@list) {
         combinations($recursions, @letters, $letter);
      }
   }
} 
```

我们可以调用那个 sub`combinations(8);`来获得预期的结果。

是`..`范围运算符并生成一个列表。它也适用于字母字符。你会想要`'a' .. 'z', 0 .. 9`的。

它可以工作，尽管您可能希望使用较小`@list`的进行测试。

这会产生所有固定长度的字符串。要使所有字符串*达到给*定长度，只需执行

```
combinations($length) foreach my $length (1 .. 8); 
```

（广度优先），或包括

```
print @list, "\n"; 
```

就在深度优先的 -branch 中的`for`-loop之前。`else`

脚注：

(*) 不，不是真的，但这很接近。函数式编程根本不需要*任何*循环。

# mysql - 一行中的最后一个条目不为空

> ID：11999060
> 
> 赞同：1
> 
> 时间：2012-08-17T02:31:48.130
> 
> 标签：mysql, sql, phpmyadmin

嘿，我正在尝试为此找出 sql 代码：

假设我有 4 列：

```
ID  NAME  EMAIL
1   Mike  mike@mike.com
2   Bob   bob@bob.com
3   Chris
4   Matt 
```

我想从电子邮件中选择最后一个不为空的条目，因此在这种情况下，它将寻找 bob@bob.com 我尝试了 Coalesce，但这似乎给了我列中的值，但不是最后一个输入的值。MAX我认为只用于ID。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T02:34:56.977

通过加入仅返回`MAX(ID)`. 这在 MySQL 中不是必需的，但许多其他 RDBMS 不允许您包含聚合以外的列，如果它们不在`GROUP BY`子句中。

```
SELECT yourtable.*
FROM
  yourtable
  JOIN (SELECT MAX(ID) AS ID FROM yourtable WHERE EMAIL IS NOT NULL) maxid ON yourtable.ID = maxid.ID 
```

注意：在这两种情况下，只有当您`ID`是一个自动递增的列并且您没有通过插入先前 id 已被删除的行来干预它时，这才可靠地工作。

# java - 使用 FileWriter 记录 servlet 的进度

> ID：11999064
> 
> 赞同：0
> 
> 时间：2012-08-17T02:34:37.070
> 
> 标签：java, servlets, logging

我正在尝试创建一个文本文件，我将在其中记录 servlet 执行的操作，因为它是远程运行的，这是我调试它的最佳机会。

在它的构造函数中，我做

```
logFile = new FileWriter("/absolutePath/WEB-INF/classes/a.txt");
fout = new BufferedWriter(logFile);
fout.write("Server is up and awaiting connections on port: " + PORT+"\n"); 
```

但是，该文件永远不会被创建。我使用错误的路径吗？为什么我什么都没看到？调试 servlet 的任何其他简单建议？请帮帮我，我什至无法开始调试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T02:39:31.597

您应该使用日志框架，例如 log4j 用于日志记录目的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T02:47:25.320

1.  检查服务器上的错误日志。它可能对写入失败的原因有所了解。
2.  如果没有任何帮助，请尝试更改日志记录级别并重新启动服务器。
3.  另外，请查看 java.util.logging。你应该可以使用`Logger.getLogger("custom-logger");`（约定是使用类名`this.class.getName()`：）

资料来源：我去过那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T03:26:10.847

你听说过远程调试吗？请使用[远程](http://ihategeek.wordpress.com/2007/06/25/remote-debugging-with-eclipse-and-tomcat/)调试对其进行调试，如果有错误，您将了解该错误。还可以尝试使用 System.getProperty("user.dir") 这将为您提供程序正在运行的当前目录。

另请参阅[Java：写入文件，输出文件在哪里？](https://stackoverflow.com/questions/3515745/java-writing-to-a-file-where-is-the-output-file)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T03:31:45.093

您可以尝试如下代码。此日志文件是使用 log4j 创建的

```
public class Logger
{

protected static FileHandler m_FileHandler;

protected static Logger m_logger = null;

public static void startAppLog()
{
    try {
        m_FileHandler = new FileHandler("D:\\test" + "\\" + "LogFile.log", true);
        final LogManager logMngr = LogManager.getLogManager();
        m_logger = Logger.getLogger(NmsLogger.class.getName());
        }
     catch (final SecurityException e) {
        e.printStackTrace();
    }
    catch (final IOException e) {
        e.printStackTrace();
    }
} 
```

# javascript - $('input') 返回空

> ID：11999073
> 
> 赞同：-1
> 
> 时间：2012-08-17T02:36:14.767
> 
> 标签：javascript, jquery

奇怪的问题，在 chrome 和 mozilla 上对此进行了测试，它在 safari $('input') 中以某种方式工作，返回为空。?? 我在这里做错了吗？我的代码如下

Javascript：

```
function prepare_publisher_profile_input_fields(){
    var inputs = document.getElementsByTagName("INPUT");
    for (var i = 0; i < inputs.length; i++) {
        if (inputs[i].type === 'submit') {
            inputs[i].disabled = true;
        }
    }

    var element = this;

    $('input').click(function () {
        $(this).removeAttr('readonly');
        $('input').removeAttr('disabled');
        $("#publisher_profile_save").removeAttr('disabled');
        $("#publisher_profile_save").bind('click', function () {
            publisher_profile_save();
        });

        $("#publisher_profile_cancel").removeAttr('disabled');

        $("#publisher_profile_cancel").bind('click', function () {
            publisher_profile_cancel();
        });
    });
} 
```

HTML：

```
<input type="text" name="company_name" value="" class="input-xlarge form-required" readonly="readonly" id="company_name">
<input type="text" name="username" value="" class="input-xlarge form-required" readonly="readonly" id="username">
<a href="#" id="publisher_profile_save" class="btn btn-primary pull-left" disabled="disabled">Save</a>
<a href="#" id="publisher_profile_cancel" class="btn btn-primary pull-right" disabled="disabled">Cancel</a> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T02:38:26.977

这些是锚标签，而不是输入标签。`$("input")`将选择器更改为`$("a")`.

# javascript - 由于 adblock，Chrome 中的 Javascript Ajax 请求失败，我有什么选择？

> ID：11999074
> 
> 赞同：2
> 
> 时间：2012-08-17T02:36:16.540
> 
> 标签：javascript, jquery, ajax, json

我正在尝试运行 ajax 函数

```
$.ajax({ url: etsyURL, dataType: 'jsonp', success: function(data) { 
```

不幸的是，在 chrome on live 中它因为 adblock 而失败

我正在使用 javascript/jquery，因为这就是我知道如何使用的全部内容，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T19:14:22.943

您可以将 ajax 函数上的“超时”参数设置为“5000”之类的值。如果 url 在 5 秒内没有响应，则调用错误处理程序。

# c++ - 代码块中缺少“mspdb100.dll”

> ID：11999075
> 
> 赞同：0
> 
> 时间：2012-08-17T02:36:28.177
> 
> 标签：c++, codeblocks

无法让 Codeblocks 10.05 工作。当我尝试构建和编译时，不断收到“mspdb100.dll is missing”。

我已将“选定编译器”设置为 VS 2005/2008。在我的 PC 上，我安装了 VS Express 2010 C++ 并且工作正常。在 Codeblocks 中，我将工具链可执行文件设置为“编译器安装目录”的“C:\Program Files\Microsoft Visual Studio 10.0\VC\”。我还将源文件的位置添加到“其他路径”中。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:46:47.823

当我遇到这个问题时，重新安装 MSVC2010 并没有帮助，但安装 MSVC2010 SP1 可以解决问题。我希望这有帮助。

# python - Scrapy SgmlLinkExtractor 规则和回调让人头疼

> ID：11999077
> 
> 赞同：0
> 
> 时间：2012-08-17T02:36:45.010
> 
> 标签：python, scrapy

我正在尝试做：

```
class SpiderSpider(CrawlSpider):
    name = "lolies"
    allowed_domains = ["domain.com"]
    start_urls = ['http://www.domain.com/directory/lol2']
    rules = (Rule(SgmlLinkExtractor(allow=[r'directory/lol2/\w+$']), follow=True), Rule(SgmlLinkExtractor(allow=[r'directory/lol2/\w+/\d+$']), follow=True),Rule(SgmlLinkExtractor(allow=[r'directory/lol2/\d+$']), callback=self.parse_loly))

def parse_loly(self, response):
    print 'Hi this is the loly page %s' % response.url
    return 
```

这让我回想起：

```
NameError: name 'self' is not defined 
```

如果我将回调更改为`callback="self.parse_loly"`似乎永远不会被调用并打印 URL。

但似乎可以毫无问题地抓取网站，因为我收到了许多针对该规则的 Crawled 200 调试消息。

我可能做错了什么？

提前谢谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T03:20:46.477

看起来空格`parse_loly`没有正确对齐。Python 对空格敏感，因此对于解释器来说，它看起来像是 SpiderSpider 之外的方法。

您可能还希望根据[PEP8](http://www.python.org/dev/peps/pep-0008/#maximum-line-length)将规则行拆分为较短的行。

试试这个：

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor

class SpiderSpider(CrawlSpider):
    name = "lolies"
    allowed_domains = ["domain.com"]
    start_urls = ['http://www.domain.com/directory/lol2/']
    rules = (
        Rule(SgmlLinkExtractor(allow=('\w+$', ))), 
        Rule(SgmlLinkExtractor(allow=('\w+/\d+$', ))),
        Rule(SgmlLinkExtractor(allow=('\d+$',)), callback='parse_loly'),
    )

    def parse_loly(self, response):
        print 'Hi this is the loly page %s' % response.url
        return None 
```

# ruby-on-rails - 使用rubyzip在Heroku（Cedar）上的tmp中压缩mp3文件组时Rails Zipfile损坏

> ID：11999078
> 
> 赞同：1
> 
> 时间：2012-08-17T02:36:51.400
> 
> 标签：ruby-on-rails, heroku, amazon-s3, cedar, rubyzip

我已经为此工作了一段时间。尝试了很多不同的东西，我完全被难住了。

我正在尝试从 Amazon s3 下载一系列 mp3 文件，然后将它们存储在 Heroku 的 tmp 目录中，压缩它们，然后下载文件。

它在本地工作，但是当它被推送到 Heroku 时，zip 文件被创建但已损坏/为空（0 字节）。Heroku 不会抛出任何错误（请参阅下面的日志文件）。各个文件似乎写得很好。我可以将它们写到 tmp 然后发送。所以它似乎与创建zipfile有关？

我对heroku真的很陌生，所以即使是关于如何调试的提示也会有所帮助。

任何帮助将非常感激！我似乎无法为我的生活解决这个问题。

代码：

```
def download_album
    require 'rubygems'
    require 'zip/zip'

   if(params.has_key?(:album_url_slug))

     @artist = Artist.find_by_url_slug(params[:url_slug])
     find_album(@artist,params[:album_url_slug])
   else
      @album = album
      @artist = artist

   end

     #Sets Directory Path
    directory_path = "#{Rails.root}/tmp/#{Process.pid}_mp3"
    directory_artist_path = directory_path+"/"+@artist.url_slug
    directory = directory_artist_path+"/"+@album.album_url_slug
    zipfile = @album.al_name+".zip"
    zipfile_name = directory_artist_path+"/"+zipfile

    FileUtils.mkdir_p directory

    #zips files
    Zip::ZipFile.open(zipfile_name, Zip::ZipFile::CREATE) do |zipfile|

          #gets mp3's from S3 and writes them into the zip directory

          @album.songs.uniq.each do |songs|

          #sets the name of the file to be loaded
              name =  songs.song_name+".mp3"

               @song_file = AWS::S3::S3Object.value(songs.s3_id, BUCKET)
                # create the file path
                path = File.join(directory,name)

             File.open(path, 'wb') { |f| f.write(@song_file) }
             zipfile.add(name, path)
        end
     end

   send_file(directory_artist_path+"/"+zipfile,
             :filename  =>  @album.al_name+".zip") 
```

日志文件：

```
2012-08-17T02:32:03+00:00 heroku[web.1]: State changed from starting to up
2012-08-17T02:32:04+00:00 app[web.1]: => Booting WEBrick
2012-08-17T02:32:04+00:00 app[web.1]: => Rails 3.0.7 application starting in production on http://0.0.0.0:40764
2012-08-17T02:32:04+00:00 app[web.1]: => Call with -d to detach
2012-08-17T02:32:04+00:00 app[web.1]:
2012-08-17T02:32:04+00:00 app[web.1]: Started GET "/tedkennedy/album/download/testalbum6" for 216.58.66.202 at 2012-08-17 02:32:04 +0000
2012-08-17T02:32:04+00:00 app[web.1]:
2012-08-17T02:32:04+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-08-17T02:32:05+00:00 app[web.1]: Zipping files!
2012-08-17T02:32:06+00:00 app[web.1]:   Parameters: {"url_slug"=>"tedkennedy", "album_url_slug"=>"testalbum6"}
2012-08-17T02:32:06+00:00 app[web.1]:   Processing by AlbumsController#download_album as HTML
2012-08-17T02:32:06+00:00 app[web.1]: Sent file /app/tmp/tedkennedy/Test album 6.zip (0.1ms)
2012-08-17T02:32:06+00:00 app[web.1]: Completed 200 OK in 1809ms
2012-08-17T02:32:06+00:00 heroku[router]: GET mighty-refuge-6115.herokuapp.com/tedkennedy/album/download/testalbum6 dyno=web.1 queue=0 wait=0ms service=1922ms status=200 bytes=0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:39:51.230

所以经过多次调试。原来 sendfile 是问题...不确定详细信息，但可以在[此处](https://groups.google.com/forum/?fromgroups=#!topic/heroku/xr71eYDFgo4)找到更多信息。

我的解决方案是压缩文件，然后将 zip 文件存储在 s3 上，然后从 s3 下载 zip 文件。诚然不是最优雅的，但在我的情况下，文件只需压缩一次，然后我就从 s3 下载。

# c++ - 在基类和派生类中使用相同的函数名时改进 crtp 错误消息

> ID：11999079
> 
> 赞同：0
> 
> 时间：2012-08-17T02:36:57.660
> 
> 标签：c++, c++11, crtp

使用 crtp 时，当您在基类和派生类中都有同名的成员函数时，是否有一种很好的方法来改进编译器生成的错误消息（可能以某种方式使用 static_assert）？

这是我的意思的一个例子：

```
#include <iostream>

using namespace std;

template<class T, class Ignore> 
struct ignore { typedef T type; };

template<class T, class I>
using Ignore = typename ignore<T, I>::type;

template<class T> 
struct A 
{
    template<class IgnoredParam = void>
    auto foo() -> decltype(declval<Ignore<T*, IgnoredParam>>()->foo()) 
    {
        return static_cast<T*>(this)->foo();
    }     
};

struct B : public A<B> 
{
    //int foo() { return 42; };
};

int main()
{
    B b;
    auto i = b.foo();
    cout << i << '\n';
} 
```

在 gcc 4.7.1 上，对于上面的示例，错误消息并不是特别糟糕，您只需跳过超出最大模板递归限制的部分，但在与更深层嵌套的层次结构交互时可能会更糟。

这比问题更令人烦恼，通常我委托给 foo_impl，但我想知道是否有人有办法改进您在编译上述内容时收到的错误消息。

# c++ - c++ 通过调用 system() 获取变量集

> ID：11999081
> 
> 赞同：2
> 
> 时间：2012-08-17T02:37:07.460
> 
> 标签：c++, input, system, getenv

我正在编写一个程序，我决定输入/输出最好允许自定义命令。我已经编写了一个配置文件并定义了一系列命令（只是 echo 等）并使用 system() 在程序中调用这些命令。问题是我需要从这些命令中获取输入。我尝试使用“read ANSWER”，然后使用 getenv("ANSWER) 但这会返回一个空字符串。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T02:41:36.120

由于您不提供任何代码，因此我必须发挥我的想象力。如果我弄错了，请告诉我。你正在做这样的事情：

```
system("command"); 
```

并且，您希望能够读取该命令生成的输出。如果我错了，请提供您在问题中使用的代码。

如果我是对的，那么，你想`popen`改用。它打开一个 C 风格的 I/O 流。您可以指定读取或写入（但不能同时指定两者）。您想`"r"`用于阅读。完成后关闭流`pclose`。

```
char buf[512];
FILE *cmd = popen("command", "r");
while (fgets(buf, sizeof(buf), cmd) != 0) {
    //...
}
pclose(cmd); 
```

# php - 如何绑定两个数组结果并在正确的输出PHP中打印

> ID：11999083
> 
> 赞同：0
> 
> 时间：2012-08-17T02:37:40.697
> 
> 标签：php, arrays, printing, array-merge

我这里有两个数据：

第一个函数的结果：

```
Array
(
[2] => Array
    (
        [SiteID] => 2
        [Balance] => 19000.00
        [MinBalance] => 100000.00
        [MaxBalance] => 1000000.00
        [OwnerAID] => 83
        [GroupID] => 1
    )

 [3] => Array
    (
        [SiteID] => 3
        [Balance] => 94000.99
        [MinBalance] => 100000.00
        [MaxBalance] => 500000.00
        [OwnerAID] => 17
        [GroupID] => 1
    )

[4] => Array
    (
        [SiteID] => 4
        [Balance] => 1000000.00
        [MinBalance] => 100000.00
        [MaxBalance] => 1000000.00
        [OwnerAID] => 12
        [GroupID] => 1
    ) 
```

)

第二个函数的结果：

```
 Array
(
 [3] => Array
    (
        [Deposit] => 459000
        [Reload] => 169100
        [Redemption] => 703576
    )

[2] => Array
    (
        [Deposit] => 1500
        [Reload] => 1000
        [Redemption] => 1000
    )
 ) 
```

现在，我需要绑定两个函数的结果，我尝试使用以下代码：

```
 public function bindGHComponentsToSites()
    {
   error_reporting (E_ALL^ E_NOTICE);  
   $combine = array();

     foreach ($this->arrays as $keys => $data) {

       foreach($this->result as $keyss => $value){

            if($data['SiteID'] == $keyss){

                $merged = array_merge((array)$data, (array)$value);

            }
             else if ($data['SiteID'] != $keyss){

                 $val = array('Deposit'=>0, 'Reload'=>0, 'Redemption'=>0);

                 $merged = array_merge((array)$data, (array)$val);
             }

        }

              $this->combined[$data['SiteID']] = $merged;

     } 

      print_r($this->combined);
  } 
```

但是，我得到了错误的输出，条件是，如果 bindownertosites 的 SiteID 与 Computeghcomponents 的 SiteID 不匹配，那么只需打印 Deposit、Reload 和 Redemption 的值应该为零。

存款、充值和赎回都为零，这是错误的。这应该是正确的结果：

```
Array
(
[2] => Array
    (
        [SiteID] => 2
        [Balance] => 19000.00
        [MinBalance] => 100000.00
        [MaxBalance] => 1000000.00
        [OwnerAID] => 83
        [GroupID] => 1
        [Deposit] => 1500
        [Reload] => 1000
        [Redemption] => 1000
    )

[3] => Array
    (
        [SiteID] => 3
        [Balance] => 94000.99
        [MinBalance] => 100000.00
        [MaxBalance] => 500000.00
        [OwnerAID] => 17
        [GroupID] => 1
        [Deposit] => 459000
        [Reload] => 169100
        [Redemption] => 703576
    )

[4] => Array
    (
        [SiteID] => 3
        [Balance] => 94000.99
        [MinBalance] => 100000.00
        [MaxBalance] => 500000.00
        [OwnerAID] => 17
        [GroupID] => 1
        [Deposit] => 0
        [Reload] => 0
        [Redemption] => 0
    )
  ) 
```

有可能得到这样的结果吗？请帮帮我，我已经处理了将近一个星期，但我总是得到错误的输出。感谢您的回复。我把所有东西都放在这里是为了澄清这些事情。请在回答之前查看我的问题。请帮助我并以正确的方式指导我。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:08:52.083

这将达到您的预期，如此简单

尝试

```
foreach (array_keys($this->arrays) as $value) {
    $default = array('Deposit' => 0, 'Reload' => 0, 'Redemption' => 0);
    if (array_key_exists($value, $this->result)) {
        $temp = array_merge($this->arrays[$value], $this->result[$value]);
        $this->arrays[$value] = $temp;
    } else {
        $temp = array_merge($this->arrays[$value], $default);
        $this->arrays[$value] = $temp;
    }
}
print_r($this->arrays); 
```

# pdfsharp - 在 MigraDoc / PDFSharp 中包含 EMF 文件

> ID：11999091
> 
> 赞同：0
> 
> 时间：2012-08-17T02:38:36.713
> 
> 标签：pdfsharp, migradoc

如何在 MigraDoc 或 PDFSharp 生成的 PDF 中包含 EMF 图像？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:50:02.630

我自己没有尝试过，但我认为你加载 EMF 图像就像 BMP 图像一样。（顺便说一句：您也可以像使用 BMP 图像一样使用 PDF 文件中的页面）。
GDI+ 构建可能不支持这一点，但 WPF 构建应该能够处理 EMF 文件。

# image - 对图像进行块操作的最快方法

> ID：11999092
> 
> 赞同：1
> 
> 时间：2012-08-17T02:38:41.293
> 
> 标签：image, matlab, image-processing, block

将图像处理成多种尺寸的重叠块的最有效方法是什么？

我在 MATLAB 上检查了 nlfilter、blockproc，它们需要很长时间才能执行。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-27T15:55:59.000

The Matlab Parallel Computing Toolbox will allow you to do processing on the GPU:

[http://www.mathworks.co.uk/discovery/matlab-gpu.html](http://www.mathworks.co.uk/discovery/matlab-gpu.html)

I've not used this myself, but it should be fast particularly if you are using commands which are GPU-enabled.

# php - 与 PHP 断开链接

> ID：11999093
> 
> 赞同：-2
> 
> 时间：2012-08-17T02:38:51.700
> 
> 标签：php, arrays, url, explode

我想将此 URL 分解为变量。

```
http://example.com/user.php?u=38456 
```

我想要`u=`;之后的值 例如，`38456`或`36491`或其他一些数值。

当我得到那个值时，我会把它放在这里：

```
$url = /* that value */;

function gameStats($url)
{
    $result = file_get_contents('http://www.popre.net/game.php?u='.$url.'');
    $expl = explode('"',$result);
    print_r($expl);
}
gameStats($url); 
```

如果我把 URL 值放在那里，它会给我用来显示游戏报告的数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T02:42:31.840

您正在寻找[`parse_url()`](http://php.net/parse_url)和[`parse_str()`](http://php.net/parse_str)。像这样的东西应该工作：

```
$url = 'http://popre.net/user.php?u=38456';
parse_str( parse_url( $url, PHP_URL_QUERY), $params);
echo $params['u']; // Outputs 38456 
```

[您可以在此演示](http://viper-7.com/I1tsTK)中看到它的工作原理。

要在函数中获取它，请将其作为参数传递并将其连接到字符串中：

```
function gameStats( $u)
{
    $result = file_get_contents('http://popre.net/game.php?u="' . $u . '"');
    $expl = explode('"',$result);
    print_r($expl);
}
gameStats( 38456); // Or gameStats( $params['u']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T02:45:17.310

可以得到`$_GET`：

```
$url = isset($_GET['u']) ? $_GET['u'] : 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T02:42:26.957

您可以使用[`parse_url`](http://www.php.net/manual/en/function.parse-url.php)和[`parse_str`](http://php.net/manual/en/function.parse-str.php)

# javascript - 来自 as3 的 enter_frame 的 javascript 版本

> ID：11999094
> 
> 赞同：0
> 
> 时间：2012-08-17T02:38:59.873
> 
> 标签：javascript

在动作脚本 3 中，我知道如何使用输入帧事件将图形从屏幕的一侧移动到另一侧。我正在尝试使用 div 标签投掷 javascript 做同样的事情。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:14:01.660

你想在 as3 中使用`setInterval`或`setTimeout`模仿 enterframe，你可以在这里看到如何做到这一点[JavaScript 版本的 ActionScript 的 Event.ENTER_FRAME 事件？](https://stackoverflow.com/questions/6615064/javascripts-version-of-actionscripts-event-enter-frame-event)

# android - IllegalStateException - 使用 AutocompleteTextView 支持 LoaderManager

> ID：11999098
> 
> 赞同：6
> 
> 时间：2012-08-17T02:39:20.487
> 
> 标签：android, autocompletetextview, android-loadermanager, android-cursorloader

我认为使用 CursorLoaders 和 Loadermanagers 的好处之一是您不需要手动管理光标的生命周期。因此，我使用 loadermanager 将适配器绑定到使用支持包的 AutoCompleteTextView。

它工作得很好，只是它随机抛出一个错误说“IllegalStateException - 尝试重新打开一个已经关闭的对象”。如果我们使用加载器管理器，这肯定不应该发生吗？

这是代码：

```
package com.bhagwad.tennis;

import android.appwidget.AppWidgetManager;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.LoaderManager.LoaderCallbacks;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.support.v4.widget.SimpleCursorAdapter;
import android.support.v4.widget.SimpleCursorAdapter.CursorToStringConverter;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AutoCompleteTextView;
import android.widget.Button;

import com.bhagwad.tennis.TennisSchedule.TennisScheduleColumns;

public class WidgetConfiguration extends FragmentActivity implements OnClickListener, LoaderCallbacks<Cursor> {

    Button mSaveWidget;
    AutoCompleteTextView mPlayerName;
    int mAppWidgetId = AppWidgetManager.INVALID_APPWIDGET_ID;
    String mSelection ="";
    SimpleCursorAdapter mAdapter;

    public static String PREFS = "com.bhagwad.tennis.appwidget";
    public static final String PREFS_PREFIX_KEY = "prefix_";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.widget_configuration);

        mPlayerName = (AutoCompleteTextView) findViewById(R.id.edit_filter);

        mPlayerName.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {

                if (!s.equals(""))
                    mSelection = s.toString();
                else
                    mSelection = "";

                getSupportLoaderManager().restartLoader(0, null, WidgetConfiguration.this);

            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub

            }
        });

        // Set up the adapter

        mAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, null, new String[] {TennisScheduleColumns.PLAYER_NAME}, new int[] {android.R.id.text1}, 0);
        mAdapter.setCursorToStringConverter(new CursorToStringConverter() {

            @Override
            public CharSequence convertToString(Cursor c) {

                return c.getString(c.getColumnIndexOrThrow(TennisScheduleColumns.PLAYER_NAME)); 

            }
        });

        mPlayerName.setAdapter(mAdapter);

        getSupportLoaderManager().initLoader(0, null, this);

    }

    @Override
    public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {

        return new CursorLoader(this, TennisScheduleColumns.CONTENT_URI_PLAYERS, new String[] {TennisScheduleColumns._ID, TennisScheduleColumns.PLAYER_NAME}, TennisScheduleColumns.PLAYER_NAME + " LIKE ?", new String[] {"%"+mSelection+"%"}, null);

    }

    @Override
    public void onLoaderReset(Loader<Cursor> arg0) {
        mAdapter.swapCursor(null);

    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
        mAdapter.swapCursor(data);

    }

} 
```

这是错误堆栈：

```
08-16 22:21:23.244: E/AndroidRuntime(25475): java.lang.IllegalStateException: attempt to re-open an already-closed object: android.database.sqlite.SQLiteQuery (mSql = SELECT _id, player_name FROM players WHERE (player_name LIKE ?)) 
08-16 22:21:23.244: E/AndroidRuntime(25475):    at android.database.sqlite.SQLiteClosable.acquireReference(SQLiteClosable.java:33)
08-16 22:21:23.244: E/AndroidRuntime(25475):    at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:82)
08-16 22:21:23.244: E/AndroidRuntime(25475):    at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:164)
08-16 22:21:23.244: E/AndroidRuntime(25475):    at android.database.sqlite.SQLiteCursor.onMove(SQLiteCursor.java:147)
08-16 22:21:23.244: E/AndroidRuntime(25475):    at android.database.AbstractCursor.moveToPosition(AbstractCursor.java:178)
08-16 22:21:23.244: E/AndroidRuntime(25475):    at android.database.CursorWrapper.moveToPosition(CursorWrapper.java:162)
08-16 22:21:23.244: E/AndroidRuntime(25475):    at android.support.v4.widget.CursorAdapter.getItem(CursorAdapter.java:213)
08-16 22:21:23.244: E/AndroidRuntime(25475):    at android.widget.AutoCompleteTextView.buildImeCompletions(AutoCompleteTextView.java:1113)
08-16 22:21:23.244: E/AndroidRuntime(25475):    at android.widget.AutoCompleteTextView.showDropDown(AutoCompleteTextView.java:1072)
08-16 22:21:23.244: E/AndroidRuntime(25475):    at android.widget.AutoCompleteTextView.updateDropDownForFilter(AutoCompleteTextView.java:950)
08-16 22:21:23.244: E/AndroidRuntime(25475):    at android.widget.AutoCompleteTextView.onFilterComplete(AutoCompleteTextView.java:932)
08-16 22:21:23.244: E/AndroidRuntime(25475):    at android.widget.Filter$ResultsHandler.handleMessage(Filter.java:285)
08-16 22:21:23.244: E/AndroidRuntime(25475):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-16 22:21:23.244: E/AndroidRuntime(25475):    at android.os.Looper.loop(Looper.java:137)
08-16 22:21:23.244: E/AndroidRuntime(25475):    at android.app.ActivityThread.main(ActivityThread.java:4507) 
```

关于什么可能是错误的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T18:56:48.917

OnLoadFinished 似乎有时会被一个死游标调用 - 如果你在你通过的游标上对 isClosed() 进行测试，你会发现它在一次（大量）尝试中关闭。

不幸的是，要立即放入 OnLoadFinished 的“标准”代码会在适配器上执行 changeCursor()，然后接下来是混乱、堆栈转储、瘟疫等。

我的解决方案并不比你的 try/catch 更漂亮。忽略虚假的 OnLoadFinished 并冒最终用户获得空白 UI 的风险。

# html - 显示：内联表在 iPhone4 中不起作用

> ID：11999103
> 
> 赞同：0
> 
> 时间：2012-08-17T02:40:21.137
> 
> 标签：html, iphone-4

在我的一个网页中，我需要显示两列。我正在使用 UL 来显示列表。将样式 display:inline-table 与 li 一起使用时，它在 iPhone4 中不起作用。在 iphone3 中它运行良好。

```
Expected output
Test1      Test2
Test3      Test4
Test5      Test6 
```

但是，在 iPhone 4 中它看起来像

```
Test1
Test2
Test3
Test4
Test5
Test6 
```

我的 HTML 是这样的

```
<div class="AccordinDiv" ><ul class="list-product-01">
<li>
<a href="/instant/114_117/114_117-1041.html/">
Test1</a>
</li>
<li>
<a href="/instant/114_117/114_117-1042.html/">
Test2</a>
</li>
<li>
<a href="/instant/114_117/114_117-1043.html/">
Test3</a>
</li>
<li>
<a href="/instant/114_117/114_117-1044.html/">
Test4</a>
</li>
<li>
<a href="/instant/114_117/114_117-1045.html/">
Test5</a>
</li>
<li>
<a href="/instant/114_117/114_117-1046.html/">
Test6</a>
</li>
</ul></div> 
```

我使用了下面的样式

```
ul.list-product-01
{
width: 100%;
text-align: center;
display: inline;
}

.list-product-01 li
{
text-align: center;
display: inline-table;
padding: 5px 0px 5px 3px;
width: 30%;
vertical-align: top;
font-size: 10px;
margin: 0px;
} 
```

任何帮助是极大的赞赏。

问候， 普拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T02:50:03.447

这是在黑暗中拍摄的，但我敢打赌 iPhone 有很好的 CSS3 支持：

```
ul.list-product-01
{
    width: 100%;
    -webkit-column-count: 2;
    column-count: 2;
}

.list-product-01 li
{
    display: block;
}​ 
```

# asp.net - 如何从具有外键 Asp.Net 的连接表中删除记录

> ID：11999109
> 
> 赞同：1
> 
> 时间：2012-08-17T02:41:51.287
> 
> 标签：asp.net, sql-server-2008, foreign-key-relationship, delete-row, jointable

我正在尝试从连接其他两个表的表中删除一条记录，似乎外键关系可能会阻止此操作的发生。

请记住，在数据库中没有强制执行外键约束，并且没有抛出足够奇怪的错误。它根本不会删除记录。此外，我可以轻松地从不是连接表的表中删除其他记录。

我使用的当前框架是 Asp.Net MVC2，但由于我也尝试使用 SqlCommand 对象删除它，但它没有工作，我没有将其归因于框架。需要注意的一点是，如果我通过存储过程执行此操作，或者如果我在 SQL Management Studio 中执行查询，它确实有效。此外，该应用程序当前与数据库不在同一台服务器上。

这里有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T21:13:45.543

如果你有两张桌子

```
DataTable1
ID[PK]
Name

DataTable2
ID[FK] 
LastName 
```

假设你有这两张桌子。如果您从**Datatable1**中删除记录，则会出现错误，因为您在表**Datatable2中使用****ID** 外键

 **您必须首先从外键表中删除记录，即**Datatable2**。**

# objective-c - 我想帮助 Finder Overlay FullPath！（列表叠加）

> ID：11999113
> 
> 赞同：0
> 
> 时间：2012-08-17T02:42:28.537
> 
> 标签：objective-c, overlay, finder

```
class_addMethod(finder_class, @selector(FO_drawIconWithFrame:),
                    class_getMethodImplementation(self_class, @selector(FO_drawIconWithFrame:)),"v@:{CGRect={CGPoint=dd}{CGSize=dd}}");

    old = class_getInstanceMethod(finder_class, @selector(drawIconWithFrame:));
    new = class_getInstanceMethod(finder_class, @selector(FO_drawIconWithFrame:));
    method_exchangeImplementations(old, new);

// AND//

FO_drawIconWithFrame
{
...
NSString *path = [self objectValue];
...
} 
```

我想要全路径。但是 [自身节点] <- 错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:55:45.950

这行得通吗？

```
NSURL *url = [[NSClassFromString(@"FINode") nodeFromNodeRef:[(TNodeIconAndNameCell *)self node ]->fNodeRef] previewItemURL];

NSString *path = [url path]; 
```

# python - Python 与 argv 或 *arg 一起使用？

> ID：11999116
> 
> 赞同：0
> 
> 时间：2012-08-17T02:43:15.133
> 
> 标签：python, arguments, argv

如果使用`sys.argv`，是否有任何理由使用`*arg`或`sys.argv`能够做任何事情`*arg`？

例如：

```
>>>def test(*arg):
>>>    return arg
>>>
>>>print test('hello','salut','hola')
>>>('hello','salut','hola') 
```

当我`sys.argv`在一个名为的文件中使用时`trial.py`，我从命令行调用：

```
import sys
def test(argument):
    return argument

print test(sys.argv[1])

python trial.py 'hello','salut','hola'
hello,salut,hola 
```

或者`argv`真的只接受一个论点并且 argv 有可能超过 2 `items(argv[0],argv[1])`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T02:45:40.387

[sys.argv](http://docs.python.org/library/sys.html)是一个字符串列表，其中包含提供给脚本的任何可能的命令行参数。

第一个元素将是脚本本身的名称，其余条目将对应于通过命令行调用命令时指定的项目。所以回答你最后一个问题，`argv`可以包含2个以上的项目。

例如，如果您有一个名为`testme.py`并启动它的脚本

```
testme.py this is a test 
```

然后

```
sys.argv[0] would contain "test.me"
sys.argv[1] would contain "this"
sys.argv[2] would contain "is"
sys.argv[3] would contain "a"
sys.argv[4] would contain "test" 
```

shell 将确定分配给哪些条目`sys.argv`- 在您的情况下，因为它是*一个*没有空格分隔部分的连续字符串，所以它被认为是一个参数（因此似乎已被连接）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T03:16:10.407

`sys.argv`是一个列表，其中包含在命令行上调用您的 python 脚本的所有参数，脚本本身被认为是“参数 0”。

它是一个普通变量，与恰好包含列表的任何其他变量相同。`sys.argv`所以和之间没有“选择” `*arg`。`*arg`是用于解包列表（或其他序列）以作为多个参数传递给调用的语法。传递时可以使用此语法`sys.argv`，就像使用包含列表的任何其他变量一样。或者您可以省略`*`并将整个列表作为一个参数传递。同样，列表是否碰巧与发生的`sys.argv`事情无关。

我认为您感到困惑的根源在于，您从中调用 python 脚本的 shell 不会像 Python 那样考虑将多个参数分开。在 Python 中，您使用逗号分隔多个参数，因此`'hello','salut','hola'`3 个参数也是如此（尽管在逗号后放置空格会更常见）。

在大多数 shell OTOH 中，参数由空格分隔。`'hello','salut','hola'`不包含任何空格，所以它只是**一个**参数。`sys.argv`因此它作为一项显示在 Python 列表中。没有什么神奇的事情可以为您将多个参数连接成一个。只是曾经只有一个论点。让 Python 级别`sys.argv`拥有 3 个项目的方法是调用您的脚本，如下所示：

```
python trial.py 'hello' 'salut' 'hola' 
```

看起来您在 shell 命令行中使用引号的方式就像在 Python 中一样。在大多数 shell 中，您并不总是需要引用字符串，因为一切都是字符串。相反，引号用于告诉 shell 包含空格的字符串实际上是一个包含空格的参数，而不是多个参数，或者禁用 shell 默认情况下在任何地方执行的某些特殊处理。

在 Python`'hello'`中，必须使字符串“hello”，以便 Python 不会尝试将其读取为 variable `hello`。但在 shell 中，`'hello'`两者`hello`都是相同的，只是表示字符串“hello”。但是也可以`he'll'o`只用引用的字符串的一部分来编写。这只是改变了 shell 如何处理引号内的空格和其他特殊字符，但仍然产生相同的字符串“hello”。这就是为什么 shell 将您的表单解释`'hello','salut','hola'`为字符串“hello,salut,hola”。引号之外没有空格，因此这 3 个单词不会被视为单独的参数，并且在完成告诉 shell 如何处理特殊字符的工作后，引号就会消失。

# sql - SQL - 获取跨日期范围的平均值

> ID：11999118
> 
> 赞同：5
> 
> 时间：2012-08-17T02:43:29.397
> 
> 标签：sql

我有一个格式如下的 SQL 表：

```
8/1/2012   0.111
8/2/2012   0.222
8/5/2012   0.333
.
.
. 
```

我想运行一个查询，该查询将在指定日期范围内获取第二列中的平均值。对于不存在的日期（上表中的 8/3/2012 和 8/4/2012），我想使用最后一个已知值 (0.222) 作为缺失日期。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T03:34:45.247

**编辑：**对不起，我想我第一次认为这确实有效时我想念这个问题**（已测试）**

我做的事情：

1.  创建了一个临时表进行测试（包括在内以便您进行测试）
2.  创建了一个递归公用表表达式，该表达式创建了一个名为 Dates 的表（这样我就可以拥有从给定日期到另一个日期的所有日期）
3.  该查询有一个子查询，它返回一个表，其中包含范围内的所有日期，并且对于每个日期，表中的最大日期以及给定日期之前的值
4.  该表与具有值的表连接，然后计算平均值

    ```
    CREATE TABLE #Table1 (date_column  DateTime, Value Decimal(5,4))
    INSERT INTO #Table1 VALUES ('20120804', 0.1234)
    INSERT INTO #Table1 VALUES ('20120808', 0.2222)
    INSERT INTO #Table1 VALUES ('20120809', 0.9876)
    INSERT INTO #Table1 VALUES ('20120812', 0.0505);

    WITH Dates(date_column , row )
    AS (SELECT Cast('20120804' as datetime) date_column, 0 as row
    UNION ALL
    SELECT DateAdd(Day, 1, date_column), row + 1
    FROM Dates
    WHERE date_column < '20120830'
    ) 
    SELECT AVG(Value) FROM (
    SELECT Dates.date_column, (SELECT  MAX(date_column)
    FROM #Table1 WHERE #Table1.date_column <= Dates.date_column) maxDateWithValue 
    FROM Dates
    ) AllDatesWithLastDateWithValue
    LEFT JOIN #Table1 ON AllDatesWithLastDateWithValue.maxDateWithValue = #Table1.date_column 
    WHERE AllDatesWithLastDateWithValue.date_column >= '20120804'
    AND AllDatesWithLastDateWithValue.date_column <= '20120815' 
    ```

希望这会有所帮助...好问题...

# c++ - 包含数据的全局静态类

> ID：11999124
> 
> 赞同：3
> 
> 时间：2012-08-17T02:44:32.497
> 
> 标签：c++, oop, class

我想要一个静态类来保存不同类型的数据（如目录、值等）。我试过使用`namespace`s 但`namespace`s 不允许成员变量，我需要保存数据（如果我错了，请纠正我）。

我要做的是保存一些常量供整个程序使用 -`scalingFactor`并`screenSize`仅举几例。然后，我希望程序的所有部分共享这些数据。像这样的东西：

在 Foo.cpp 中：

```
void doSomething( float p_Float ) {
   printf( "Scaled Float is %.2f", p_Float * Globals.scalingFactor );
} 
```

在 Goo.cpp 中：

```
void doSomethingElse( ) {
   printf( "Scaling Factor is %.2f", Globals.scalingFactor );
} 
```

应该引用相同的`scalingFactor`值，`scalingFactor`即全局静态类中的值`Globals`。

提前致谢。

**编辑：**我还需要使用全局函数，它与这个问题中的变量一样吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T02:47:15.820

因此，只需将其作为`static`会员：

```
//Globals.h
class Globals
{ 
public:
   static float scalingFactor;
} 
```

在单个实现文件中初始化它：

```
//Globals.cpp
#include "Globals.h"
float Globals::scalingFactor = 42.0; 
```

并使用*范围解析运算符*来访问它：

```
float x = Globals::scalingFactor; 
```

> 我试过使用命名空间，但命名空间不允许成员变量

您没有正确使用命名空间。以下应该有效：

标题中的声明：

```
namespace Globals
{
    extern float scalingFactor;
} 
```

和定义：

```
//Globals.cpp
namespace Globals
{
    float scalingFactor = 42.0;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-18T18:28:00.763

C++ 没有静态类。只是上课。但这听起来像是命名空间的完美工作。是的，您可以将数据放在命名空间中。在头文件中编写声明，数据为 extern；

```
// program_data.h:
namespace program_data {
extern float scalingFactor;
extern int screenSize;
} // namespace program_data 
```

在一个源文件中，提供共享数据的定义：

```
// program_data.cpp:
#include "program_data.h"
namespace program_data {
float scalingFactor = 13.765; // whatever...
int screenSize = 640;
} // namespace program_data 
```

在任何需要使用这些东西的地方，只需使用它们的命名空间限定名称来引用它们：

```
// foo.cpp:
#include "program_data.h"
void doSomething( float p_Float ) {
   printf( "Scaled Float is %.2f", p_Float * program_data::scalingFactor );
} 
```

而且，是的，严格的 OOP 不会做这种事情。但是将全局数据传递给每个函数，无论它是否需要，都会产生大量开销。这被称为“非法数据”，通常反映了设计错误。如果这些东西真的是全球性的，那么它们就是全球性的，为了让你的代码“OOP”而假装它们不是，是一个设计错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T03:15:55.913

由于您已经标记了您的问题[oop](/questions/tagged/oop "显示标记为“oop”的问题")，我假设您正在设计一个面向对象的系统。如果是这样，我建议不要使用全局变量。考虑为您尝试传递的数据创建有意义的类，然后传递对象而不是访问全局变量。

例如：

```
class Bar {
private:
  float scalingFactor;

public:
  float getScalingFactor() {
    return scalingFactor;
  }
}

class Foo {
private:
  Bar &bar;

public:
  Foo(Bar &bar) : bar(bar) {
  }

  void doSomething( float p_Float ) {
    printf( "Scaled Float is %.2f", p_Float * bar.getScalingFactor() );
  }
}

class Goo {
private:
  Bar &bar;

public:
  Goo(Bar &bar) : bar(bar) {
  }

  void doSomethingElse( ) {
    printf( "Scaling Factor is %.2f", bar.getScalingFactor() );
  }
} 
```

`Foo`在您创建和的地方`Goo`，您可以将相同的实例传递`Bar`给两者：

```
Bar bar;

Foo foo(bar);
foo.doSomething(10);

Goo goo(bar);
goo.doSomethingElse(); 
```

# c++ - 找到全局非常量变量？

> ID：11999126
> 
> 赞同：3
> 
> 时间：2012-08-17T02:44:44.677
> 
> 标签：c++, constants, scope, llvm

我正在开发一个 C++ 项目，并且必须确保它可以在几个不同的编译器上编译。我正在使用 VC++ 并使用 Visual 编译器，它编译得很好。但是使用 LLVM，我收到了这个错误：

```
EXEC : error : Global non-const variable found '_ZN7complex1iE. This is not permitted.' 
```

我不知道那是什么意思。我确实有一个创建复数数据类型的包含，所以我假设错误意味着在我的代码中的某个地方我引用了一个应该是 const 或非全局的复杂变量。在我的 main 函数中，我只创建了一个复杂的 var，它在 main func 本身中初始化，虽然我的意思是它是一个本地 var，所以，我不明白这个 var 是如何被视为全局的。如果它有任何用处，这里是一行：

```
complex *signal = new complex[100]; 
```

这是我正在使用的复数：
头文件：[http](http://www.librow.com/articles/article-10/appendix-b-1)
://www.librow.com/articles/article-10/appendix-b-1 实现：[http ://www.librow.com/articles/第 10 条/附录-b-2](http://www.librow.com/articles/article-10/appendix-b-2)

我是否走错了路，因为它是复数变量的问题？我用谷歌搜索了这个错误，我没有看到任何似乎匹配的东西。

任何想法，将不胜感激。

谢谢！

# android - 读取空的 NFC 标签

> ID：11999127
> 
> 赞同：0
> 
> 时间：2012-08-17T02:44:58.963
> 
> 标签：android, nfc

有谁知道如何编写代码来读取空的 NFC 标签？我需要使用什么类型的意图过滤器来读取空标签？如果有人可以提供一些示例代码，我将不胜感激。我正在使用 Ultralight C 标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:09:54.317

可以使用[`MifareUltralight`](http://developer.android.com/reference/android/nfc/tech/MifareUltralight.html)该类访问 MIFARE Ultralight 标签。更具体地使用该方法，请参阅[http://developer.android.com/guide/topics/connectivity/nfc/advanced-nfc.html#read-write](http://developer.android.com/guide/topics/connectivity/nfc/advanced-nfc.html#read-write)`readPages()`处的示例代码

向您的清单添加技术列表引用，如[http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#tech-disc中所述](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#tech-disc)

在您输入的`nfc_tech_filter.xml`文件（存储在子目录中`res/xml`）中：

```
<resources xmlns:xliff="urn:oasis:names:tc:xliff:document:1.2">
  <tech-list>
    <tech>android.nfc.tech.MifareUltralight</tech>
</tech-list> 
```

# mysql - 通过 SSH 将 SQL DB 备份到 Mac 桌面

> ID：11999136
> 
> 赞同：1
> 
> 时间：2012-08-17T02:46:44.740
> 
> 标签：mysql, sql, ssh, terminal, mysqldump

如何在终端内设置路径/保存位置以通过 SSH 备份远程 SQL 数据库？我想将备份保存到我的桌面。我是 SSH 新手，但已成功登录并与数据库交互。

我试过这个，但它说没有这样的文件或目录。

```
mysqldump -u user -p database > /Users/Me/Desktop/backup.sql 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T02:56:05.297

创建备份后，使用[SCP](http://linux.die.net/man/1/scp)获取文件。

因此，对于 SSH：

```
ssh user@example.com 
```

然后，在 SSH 中：

```
mysqldump -u user -p database > /path/to/backup.sql
exit 
```

然后，执行 SCP（复制到本地目录）：

```
scp user@example.com:/path/to/backup.sql ./ 
```

把 SSH 想象成远程桌面；SSH的重点是登录另一台计算机。在终端中使用 SSH 的目的不是为了文件传输；它是在服务器上做一些事情。SCP 用于从远程位置复制文件。所以使用 SSH 来做你需要做的事情（这里，备份数据库），然后使用 SCP 来复制文件。

# jsp - 在jsp中获取访问者操作系统

> ID：11999141
> 
> 赞同：0
> 
> 时间：2012-08-17T02:47:29.023
> 
> 标签：jsp, operating-system

我很好奇在我的网站（jsp）中获取访问者的操作系统信息。

我知道如何获取 IP 地址、纬度、经度等，

但我想知道诸如 Lion 或 windows xp、7 等操作系统信息

有人有想法么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:08:52.890

使用`HttpServletRequest.getHeader(key)`方法。

```
 ${header["user-agent"]} 
```

# html - HTML5 Canvas 分层，居中？

> ID：11999143
> 
> 赞同：1
> 
> 时间：2012-08-17T02:48:12.980
> 
> 标签：html, css, canvas

我将如何使用*HTML5*的*画布*在彼此之上制作多个*画布层，同时在页面上正确居中（通过**CSS3*）？我似乎在正确完成这两个步骤时遇到了问题。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:34:56.993

我的建议是将您的所有`canvas`标签都包含在这样的单个标签中`div`：

```
<div id="canvasHold">
    <canvas id="canvas1"></canvas>
    <canvas id="canvas2"></canvas>
    <canvas id="canvas3"></canvas>
</div> 
```

以及相应的 CSS 居中：

```
#canvasHold {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 800px;
    height: 600px;
    margin-left: -400px; /* Negative half of the width */
    margin-top: -300px; /* Negative half of the height */
}

#canvasHold canvas {
    width: 100%;
    height: 100%;
} 
```

当然，在 CSS 中设置 canvas 元素的高度与将高度和宽度设置为每个 canvas 标签的 HTML 属性是**不**一样的。在 CSS中设置它们不会有什么坏处`100%`，但您绝对应该将它们设置为 HTML 属性。

# javascript - 如何在谷歌分析中设置多个跟踪器

> ID：11999145
> 
> 赞同：1
> 
> 时间：2012-08-17T02:48:16.217
> 
> 标签：javascript, google-analytics, google-analytics-api

[https://developers.google.com/analytics/devguides/collection/gajs/?hl=pl#MultipleCommands](https://developers.google.com/analytics/devguides/collection/gajs/?hl=pl#MultipleCommands)

```
_gaq.push(
  ['_setAccount', 'UA-XXXXX-1'],
  ['_trackPageview'],
  ['b._setAccount', 'UA-XXXXX-2'],
  ['b._trackPageview']
); 
```

在此代码段中，有一个“.b”。“.b”来自哪里？我应该如何使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T03:26:58.887

如果您只有一个帐户，则无需使用任何东西：

```
_gaq.push(["_setAccount", ......]); 
```

从那里，如果您使用更多帐户，则为每个帐户指定一个名称（在 JS 中有效的任何名称），并将其指令称为`name._doThing`.

如果需要，您可以跟踪 8 个帐户 - 它们只需要 8 个唯一名称，并且您需要将`_setAccount`每个名称分配到不同的 Google 帐户。

我们公司选择使用`primary`-`secondary`我们甚至给第一个帐户起一个名字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T03:01:51.230

Google 简单地将`b`其指定为指示如何对命令进行分组的一种方式。我想你可以在那里使用任何字符串。你不需要担心它......只是在你使用的东西上保持一致。

# python - 是否可以在 scikit learn 中使用复数作为目标标签？

> ID：11999147
> 
> 赞同：7
> 
> 时间：2012-08-17T02:48:36.830
> 
> 标签：python, numpy, scipy, scikit-learn

我正在尝试使用 sklearn 来预测代表旋转的变量。由于在旋转极端情况下从 -pi 到 pi 的不幸跳跃，我认为更好的方法是使用复数作为目标。这样，从 1+0.01j 到 1-0.01j 的错误就不会那么具有破坏性了。

我找不到任何描述 sklearn 是否支持复数作为分类器目标的文档。从理论上讲，距离度量应该可以正常工作，因此它至少应该适用于一些回归算法。

谁能建议我如何让回归算法以复数为目标进行操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T11:17:09.167

几个回归器支持多维回归目标。只需将复数视为二维点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T18:11:13.947

到目前为止，我发现大多数分类器，如线性回归器，会自动将复数转换为实部。

然而，kNN 和 RadiusNN 回归器运行良好——因为它们对相邻标签进行加权平均，因此可以优雅地处理复数。

使用多目标分类器是另一种选择，但是我不想解耦 x 和 y 方向，因为当两个结果都接近 0 时，这可能会导致不稳定的解决方案，正如 Panic 上校提到的那样。

我将尝试其他具有复杂目标的分类器并在此处更新结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T09:55:37.993

好问题。如何将角度转换为一对标签，即。x 和 y 坐标。这些是角度的连续函数（cos 和 sin）。您可以将单独的 x 和 y 分类器的结果组合成一个角度吗？$\theta = \sign(x) \arctan(y/x)$。但是，如果两个分类器都返回接近零的数字，则该结果将不稳定。

# javascript - 在 IE 中将 Javascript 函数作为参数传递

> ID：11999148
> 
> 赞同：1
> 
> 时间：2012-08-17T02:48:39.217
> 
> 标签：javascript, internet-explorer

我正在使用 Javascript 函数`do_when`来继续评估另一个函数并在它返回 true 时执行操作。我在这里找到了函数：[javascript，等待某事为真，然后运行操作](https://stackoverflow.com/questions/2296583/javascript-wait-for-something-to-be-true-then-run-action)

这是`do_when`功能：

```
function do_when(predicate, action, timeout_step) {
    if (predicate()) {
        action();
    } else {
        setTimeout(do_when, timeout_step, predicate, action, timeout_step);
    }
} 
```

我用它来调用一个jQuery函数：

```
do_when(function() {return tabledrawn;},
    function() {$("#mytable tbody tr td").first().click();}, 
    100); 
```

在 Firefox 和 Chrome 中一切正常，但 IE9（及更早版本）失败。`do_when`具体来说，从`setTimeout`函数 调用时出现“预期对象”错误。

当我进行调试时，谓词和动作参数在`do_when`最初调用时正确显示为函数对象，但是当从函数再次调用它时，`setTimeout`它们都显示为未定义。看来我没有提供`setTimeout`IE 希望看到它们的方式的论点。IE 中是否有适当的方法将函数对象及其参数作为参数传递？

编辑：
根据 SLaks 的建议，我更改`do_when`为以下内容：

```
function do_when(predicate, action, timeout_step) {
    if (predicate()) {
        action();
    } else {
        setTimeout(function () {
                       do_when(predicate, action, timeout_step);
                   }, 
                   timeout_step);
    }
} 
```

这解决了我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T02:50:09.110

您正在将其他参数传递给`setTimeout`，并且您希望将它们传递给您的函数。

这是 Mozilla 独有的非标准功能。

相反，您需要将匿名函数传递给`setTimeout`，并使用您想要的任何参数调用您的函数。

# c# - 为什么 c# 切换到不同的情况

> ID：11999152
> 
> 赞同：2
> 
> 时间：2012-08-17T02:49:26.133
> 
> 标签：c#, .net, visual-studio-2010

我有一个像 (a,b,c,d) 这样的枚举。

```
public enum BeatSession 
{
    on_ended,
    on_new,
    on_hold,
    on_paused,
    on_accepted,
    on_answered,
    on_timed_out,
    on_hanged_up,
    on_initiated,
    unknown
} 
```

以及一种对枚举进行切换的方法。

```
public static string GetStatusMessage(BeatSession status, string custom_message="")
        {
            string msg = "";
            try
            {
                switch (status)
                {
                    case BeatSession.on_answered:
                        // msg will be here
                        break;
                    case BeatSession.on_ended:
                        // msg will be here
                        break;
                    case BeatSession .on_hanged_up:
                        // msg will be here
                        break;
                    case BeatSession.on_hold:
                        // msg will be here
                        break;
                    case BeatSession.on_new:
                        break;
                    case BeatSession.on_paused:
                        // msg will be here
                        break;
                    case BeatSession.on_timed_out:
                        // msg will be here
                        break;
                    case BeatSession.on_accepted:
                        // msg will be here
                        break;
                    default:
                        msg = "Unknown";
                        break;
                }

            }
            catch (Exception ex)
            {

                throw ex;
            }
            // Override message
            if (!String.IsNullOrEmpty(custom_message))
            {
                msg = custom_message;
            }

            return msg;
        } 
```

**更新**

但是，每次我调用我的方法 GetStatusMessage(BeatSession.on_ended)。即使我通过“on_ended”，它也会转到“on_answered”。

我尝试重新安排“公共枚举 BeatSession”。当我通过“on_ended”时，它现在转到“on_accepted”。

**截屏**

注意 session_status 变量的监视。 ![在此处输入图像描述](../Images/fc35ad96693c7b166663c94ffcc983f3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T03:10:00.453

我有一些代码可以做这样的事情

```
public enum Letters
    {
        A = 1,
        B = 2,
        ...
    }

public void someFunction(int value)
    {
      switch(value)
        {
           case (int)Letters.A: {/* Code */ break;}
           case (int)Letters.B: {/* Code */ break;}
           ...
        }
    } 
```

它可以工作，但我认为您要做的是发送枚举并在交换机中的交换机中使用它，也许这样的事情会起作用

```
public void someFunction(Letters l)
    {
      switch(l)
        {
           case Letters.A: {/* Code */ break;}
           case Letters.B: {/* Code */ break;}
           ...
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T03:33:29.850

您当前的代码不应该编译，以下是主要问题。

首先，方法定义包含一个参数`enum status`，你不能那样做，看来你需要一个类型的参数`BeatSession`，你应该修改函数为：

```
public static string GetStatusMessage(BeatSession status, string custom_message="")
{
...
} 
```

在您的案例陈述中，您正在使用`enum.on_answered`，这应该是`BeatSession.on_answered`。所以你的完整功能应该是：

```
 public static string GetStatusMessage(BeatSession status, string custom_message = "")
        {
            string msg = "";
            try
            {
                switch (status)
                {
                    case BeatSession.on_answered:
                        // msg will be here
                        break;
                    case BeatSession.on_ended:
                        // msg will be here
                        break;
                    case BeatSession.on_hanged_up:
                        // msg will be here
                        break;
                    case BeatSession.on_hold:
                        // msg will be here
                        break;
                    case BeatSession.on_new:
                        break;
                    case BeatSession.on_paused:
                        // msg will be here
                        break;
                    case BeatSession.on_timed_out:
                        // msg will be here
                        break;
                    case BeatSession.on_accepted:
                        // msg will be here
                        break;
                    default:
                        msg = "Unknown";
                        break;
                }

            }
            catch (Exception ex)
            {

                throw ex;
            }
            // Override message
            if (!String.IsNullOrEmpty(custom_message))
            {
                msg = custom_message;
            }

            return msg;
        } 
```

编辑：由于您使用答案代码编辑了问题，因此您的 switch 语句应该有任何问题，请查看以下屏幕截图。 ![在此处输入图像描述](../Images/04adecea177c9b1bd6237e49092081bf.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T03:03:47.170

如果 enum 实际上是一个 enum case a: 将不会通过编译。

这对我有用

```
enum myEnum {A, B, C};

public MainWindow()
{
    InitializeComponent();

    myEnum thisEnum = myEnum.B;

    switch(thisEnum)
    {
      case myEnum.A:
        // do something
        break;
      case myEnum.B:
       // do something
        break;
      default:
        break;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T04:46:53.740

修复了问题。这就是我所做的。我将我的枚举修改为这样。

```
public enum BeatSession 
{
    on_ended=0,
    on_new=1,
    on_hold=2,
    on_paused=3,
    on_accepted=4,
    on_answered=5,
    on_timed_out=6,
    on_hanged_up=7,
    on_initiated=8,
    unknown=9
} 
```

所以我认为发生的事情是在运行时或编译时的某个时刻，我的 Enum 上的值被打乱了。所以我尝试手动设置该值，并且成功了。

谢谢大家的回复。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-17T03:18:20.007

也许你的代码是这样的：

```
 public static string GetStatusMessage(BeatSession status, string custom_message = "")
    {
        string msg = "";
        try
        {
            switch (status)
            {
                case BeatSession.on_answered:
                    // msg will be here

                case BeatSession.on_ended:
                    // msg will be here
                    break;
 ..... 
```

如果您通过 BeatSession.on_answered 然后在 swith 中（认为您错过了“break;”）转到 BeatSession.on_ended。

# emacs - 当 irc 消息匹配 ERC 中的关键字时，为什么不发送通知？

> ID：11999153
> 
> 赞同：1
> 
> 时间：2012-08-17T02:49:28.410
> 
> 标签：emacs, irc

我在 emacs 24 中使用 ERC，并在我的`.emacs`. 该`erc-global-notify`函数改编自[http://www.emacswiki.org/emacs/ErcPageMe](http://www.emacswiki.org/emacs/ErcPageMe)。不幸的是，当最小化带有 erc windows 的 emacs 时，我无法从 dbus 收到任何通知。它有什么问题？

```
(require 'erc-match)
(erc-match-mode t)
(setq erc-keywords '("c++" "python" "emacs" "i")
      erc-pals '("ij"  "yy" "xx"))

(require 'notifications)
(defun erc-global-notify (match-type nick message)
  "Notify when someone sends a message that matches a regexp in `erc-keywords'."
  (when (and (eq match-type 'keyword)
             ;; I don't want to see anything from the erc server
             (null (string-match "^[sS]erver" nick))
             ;; or bots
             (null (string-match "\\(bot\\|serv\\)!" nick)))
    (notifications-notify
     :title nick
     :body message
     :urgency 'normal)))

(add-hook 'erc-text-matched-hook 'erc-global-notify) 
```

# objective-c - 在 Core Graphics 中绘制三角形

> ID：11999162
> 
> 赞同：3
> 
> 时间：2012-08-17T02:50:42.163
> 
> 标签：objective-c, ios, drawing, core-graphics

一段时间以来，我一直试图在 Core Graphics 中绘制一个三角形。我已经弄清楚了如何通过我不太确定这是否是最好的方法。

我也无法弄清楚如何将其居中`UIView`

这是我的代码

```
CGMutablePathRef path = CGPathCreateMutable();
CGPathMoveToPoint(path, NULL,10, 100);
CGPathAddLineToPoint(path, NULL,100,10);
CGPathAddLineToPoint(path, NULL,200,100);
CGPathAddLineToPoint(path, NULL,100,100);
CGPathCloseSubpath(path);

CGContextSetFillColorWithColor(context, white);
CGContextAddPath(context, path);
CGContextFillPath(context); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:04:58.327

为了让你的三角形居中，你必须做一些数学运算——实际上有几个三角形的“中心”，但是你从每个顶点画一条线到另一条线的中心的那个，将中心定义为这些线交叉。这个中心很容易找到，通过平均 x 值和 y 值 - 所以在你有 (10,100)、(100,10) 和 (200,100) 作为顶点的情况下，中心将是 (10+100 +200/3 , 100+10+100/3) 或 (103.3,70)。iPhone 的全屏宽 320 x 高 460，其中心位于 (160,230)。所以基本上，您需要将三角形中心和屏幕中心之间的差异添加到每个点 - 每个 x 值添加 160-103.3，每个 y 点添加 230-70，这将绘制相同的三角形，但居中屏幕。

# java - 在 Java 中操作数组。坚持艰巨的家庭作业

> ID：11999163
> 
> 赞同：0
> 
> 时间：2012-08-17T02:50:46.537
> 
> 标签：java, arrays

我是 Java 的新手，本学期在编程课程中学习它。我们有一个家庭作业到期，我很挣扎。我很欣赏这对有经验的程序员来说很容易，但对我来说，这很让人头疼。这是第一个问题。

> > 公共 int countInRange（int[] 数据，int lo，int hi）
> > 
> > 为此，您必须计算数组元素的数量，即 data 位于 >>lo 到 hi 范围内的元素数，并返回计数。例如，如果 data 是数组 {1, 3, 2, 5, 8} >> 那么调用
> > 
> > countInRange(数据, 2, 5)
> > 
> > 应该返回 3，因为在 2 .. 5 范围内有 3、2 和 5 这三个元素。

这是我到目前为止所做的：

```
/**
 * Count the number of occurrences of values in an array, R, that is
 * greater than or equal to lo and less than or equal to hi.
 *
 * @param  data  the array of integers
 * @param  lo   the lowest value of the range
 * @param  hi   the highest value of the range
 * @return      the count of numbers that lie in the range lo .. hi
 */
public int countInRange(int[] array, int lo, int hi) {
    int counter = 0; 
    int occurrences = 0;
    while(counter < array.length) {
        if(array[counter] >= lo) {
            occurrences++; 
        }
        counter++;
    }
    return occurrences;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T02:52:44.253

```
if(array[counter] >= lo && conditionforhighcheck)
{
//Then only update occurence count
} 
```

因为作业，我没有输入代码。我给了一个指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T02:54:27.847

您在 if 语句中缺少上限检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T02:59:50.243

```
for ( int i = 0; i < array.length; i++ ) {
    if ( array[i] >= lo && array[i] <= hi ) {
        occurrences++;
    }
} 
```

使用 for 语句迭代数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T03:00:53.410

使用 java 中的数组和集合，您可以使用[foreach 循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)，尤其是在您学习时，“更少的代码”（通常）更容易理解，因为剩下的代码只是重要的东西。

另一方面，如果您想构建自己的循环，请始终使用`for`循环 - 在循环中更新循环变量`while`（当不必要时）被认为是糟糕的风格，因为它可能导致令人讨厌的错误。

答案是如此简单，几乎不值得让你从神秘的提示中解决它：

```
public int countInRange(int[] array, int lo, int hi) {
    int occurrences = 0;
    for (int element : array) {
        if (element >= lo && element <= hi) {
            occurrences++;
        }
    }
    return occurrences;
} 
```

# asp.net-web-api - 无法使 MVC4 WebApi 在 JSON 中包含空字段

> ID：11999165
> 
> 赞同：6
> 
> 时间：2012-08-17T02:51:20.307
> 
> 标签：asp.net-web-api, json.net

我正在尝试使用 MVC4 WebAPI 将对象序列化为 JSON（RTM - 今天刚刚安装了 VS2012 RTM，但昨天在 RC 中遇到了这个问题），我希望在 JSON 输出中呈现所有空值。像这样：

```
[{"Id": 1, "PropertyThatMightBeNull": null},{"Id":2, "PropertyThatMightBeNull": null}] 
```

但我得到的是

```
[{"Id":1},{"Id":2}] 
```

我发现这个 Q/A [WebApi 不会序列化空字段](https://stackoverflow.com/questions/11996314/webapi-doesnt-serialize-null-fields)，但答案要么对我不起作用，要么我无法掌握将答案放在哪里。

这是我尝试过的：

1.  在 Global.asax.cs 的 Application_Start 中，我添加了：

    ```
    var json = GlobalConfiguration.Configuration.Formatters.JsonFormatter;
    json.SerializerSettings.NullValueHandling = Newtonsoft.Json.NullValueHandling.Include;
    json.SerializerSettings.DefaultValueHandling = Newtonsoft.Json.DefaultValueHandling.Include; 
    ```

    这并没有（似乎）错误，并且似乎实际上是基于查看我尝试的下一件事来执行的。

2.  在控制器方法中（在 ApiController 的子类中），添加：

    ```
    base.Configuration.Formatters.JsonFormatter.SerializerSettings.NullValueHandling = Newtonsoft.Json.NullValueHandling.Include;
    base.Configuration.Formatters.JsonFormatter.SerializerSettings.DefaultValueHandling = Newtonsoft.Json.DefaultValueHandling.Include; 
    ```

    我说 #1 已执行，因为 #2 中的两个值在我逐步执行这些行之前已经设置。

3.  在绝望的举动中（因为我真的不想装饰每个对象的每个属性）我尝试将此属性添加到一个为空且不存在的属性中：

    ```
    [JsonProperty(DefaultValueHandling = DefaultValueHandling.Include,
        NullValueHandling = NullValueHandling.Include)] 
    ```

这三个都生成相同的 JSON，但省略了 null 属性。

补充笔记：

*   在 IIS（也尝试内置）、Windows 7、VS2012 RTM 中本地运行。
*   控制器方法返回列表——也尝试过 IEnumerable
*   我试图序列化的对象是 pocos。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T08:05:57.477

这不起作用：

```
var json = GlobalConfiguration.Configuration.Formatters.JsonFormatter;
json.SerializerSettings.NullValueHandling = Newtonsoft.Json.NullValueHandling.Include; 
```

但这确实：

```
 GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings = new Newtonsoft.Json.JsonSerializerSettings() 
{ 
NullValueHandling = Newtonsoft.Json.NullValueHandling.Include
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-02T19:40:29.473

由于某些奇怪的原因，Newtonsoft.Json.JsonFormatter 忽略了对属性 os SerializerSettings 的分配。

为了使您的设置正常工作，请创建 .SerializerSettings 的新实例，如下所示：

```
config.Formatters.JsonFormatter.SerializerSettings = new Newtonsoft.Json.JsonSerializerSettings
        {

            DefaultValueHandling =   Newtonsoft.Json.DefaultValueHandling.Include,
            NullValueHandling = Newtonsoft.Json.NullValueHandling.Include,

        }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T13:07:24.090

我终于遇到了这个[http://forums.asp.net/t/1824580.aspx/1?Serializing+to+JSON+Nullable+Date+gets+ommitted+using+Json+NET+and+Web+API+尽管+specifying+NullValueHandling](http://forums.asp.net/t/1824580.aspx/1?Serializing+to+JSON+Nullable+Date+gets+ommitted+using+Json+NET+and+Web+API+despite+specifying+NullValueHandling)描述了我在为 RTM 修复的测试版中遇到的错误。

虽然我已经安装了 VS2012 RTM，但我的项目仍在使用 beta 附带的所有 nuget 包。因此，我对所有内容进行了更新（nugot？），现在一切都很好（使用我的问题中的＃1）。虽然我觉得烧了半天很傻。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-26T13:40:09.780

当我看到这个答案时，我很沮丧，因为我已经这样做了，但我的问题仍然存在。我的问题源于我的对象实现了一个包含可空类型的接口这一事实，所以，我有一个合同说明如果你想实现我，你必须拥有其中一个，以及一个序列化程序说明其中一个是否为 null不要包括它。繁荣！

# jquery - 如何划分所有边距但最后均匀空间？

> ID：11999166
> 
> 赞同：3
> 
> 时间：2012-08-17T02:51:20.407
> 
> 标签：jquery, css, width, margin

问题是我们的网站上会有很多不同的语言，动态文本长度未知。我需要将所有内容都居中，但无需像这样手动为每个区域添加右边距。如果它可以进行某种类型的 jQuery 计算并使其每次看起来都像这样但自动完成，那就太好了： [单击此处查看我的 CSS 示例](http://vt.mu/geoff/centerfilters/)

我尝试修改[我找到的这个 jQuery 脚本，](http://jsfiddle.net/UTaSg/)但我失败了，因为你可以在这里看到 jsfiddle.net/UTaSg/86/
如果它没有为最后一个孩子添加额外的宽度（“类型：所有独奏乐队”）。

我不确定如何做到这一点，任何帮助将不胜感激。提前感谢您的帮助！如果可能，请使用示例。

990px​​ 容器中总是会有这 4 个过滤器，我想在所有不同语言的末端保留 25px 的空间。所以它们的文本长度会略有变化，我希望 3 个过滤器空间之间的空间相等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:29:28.320

这可能不是您所希望的，但如果您真的不知道每列过滤器的宽度或数量，那么我认为您应该考虑其他可能的设计。

这是过滤器下拉列表的主要候选者。是的，它没有那么酷，但它很实用。

另一种选择是在每列上设置固定宽度，然后用于`text-overflow: ellipsis;`处理文本溢出。这将帮助访问者了解有更多可用的过滤器，并且您可以使用一个小箭头图形来达成交易，单击该箭头图形会滑过以显示其他过滤器。像这样的东西：

![在此处输入图像描述](../Images/a6615f887a0119021cb0590c7702cba6.png)

我知道你要一把锤子，我给了你一根香蕉，所以我很抱歉，这没有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T04:54:05.593

如果要使整个事物居中，则应`width: 100%; margin: 0 auto;`在正在执行的过滤器容器上使用。如果你想有相同的填充，你不需要`.leftpositive, .leftnegative, .spacingforlanguage1`. 你可以简单地做

```
.filter { padding-right: 2%; }
.filter:last-child { padding-right: 0; } 
```

这样，它与您剩余的空间量有关，并且间距将相对相等。您还可以创建一个网格并设置任何给定过滤器可以容纳在容器中的最大宽度（例如，第一个过滤器的宽度为 33%，第二个过滤器的宽度为 25%，等等）。这是保持平衡的最佳方式，尤其是对于不同的浏览器宽度和设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T03:09:24.717

您可以尝试简单地对每个文本的宽度求和，然后从整体的宽度中减去它，再乘以 3，并将其作为除最后一个元素之外的每个元素的右边距。

您可以创建通用插件，因为这将适用于任何数量的项目在具有长度的 jQuery 对象内，并且您可以使用 parent() 获取容器。

你可以试试这个：http: [//jsfiddle.net/UTaSg/104/](http://jsfiddle.net/UTaSg/104/)

# android - 使用微调器值搜索数据库

> ID：11999167
> 
> 赞同：0
> 
> 时间：2012-08-17T02:51:28.420
> 
> 标签：android, sql, database

我是 Android 编程新手，我正在尝试创建一个应用程序，用户可以在其中从 2 个微调器中选择一些选项，点击搜索按钮后，应用程序将根据所选选项搜索数据库，结果将显示. 问题是我不确定将哪些参数放入 db.rawQuery 以使用所选微调器选项的值进行搜索。我试图在下面进行粗略的猜测，但它不起作用，我不确定如何使用这两个条件进行搜索。

这是微调器的编码：

```
public class First extends Activity {

private Spinner foodSpinner, locationSpinner;
private Button btnSubmit;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.first);
    addListenerOnButton();
}
public void addListenerOnButton() {

    foodSpinner = (Spinner) findViewById(R.id.foodSpinner);
    locationSpinner = (Spinner) findViewById(R.id.locationSpinner);
    btnSubmit = (Button) findViewById(R.id.btnSubmit);

    btnSubmit.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            Intent intent = new Intent(First.this.getApplicationContext(), MainActivity.class);
            intent.putExtra("FOODSPINNER", foodSpinner.getSelectedItem().toString());
            intent.putExtra("LOCATIONSPINNER", locationSpinner.getSelectedItem().toString());
            First.this.startActivity(intent);

        }

    });

} 
```

这是搜索的编码：

```
public class MainActivity extends ListActivity {

    protected SQLiteDatabase db;
    protected Cursor cursor;
    protected ListAdapter adapter;
    protected String foodItemChosen;
    protected String locationItemChosen;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Bundle extras = getIntent().getExtras();
        foodItemChosen = getIntent().getExtras().getString("FOODSPINNER");
        locationItemChosen = extras.getString("LOCATIONSPINNER");
        db = (new DatabaseHelper(this)).getWritableDatabase();
    }

    public void onListItemClick(ListView parent, View view, int position, long id) {
        Intent intent = new Intent(this, ResultDetails.class);
        Cursor cursor = (Cursor) adapter.getItem(position);
        intent.putExtra("FOOD_ID", cursor.getInt(cursor.getColumnIndex("_id")));
        startActivity(intent);
    }

    public void search(View view) {
        cursor = db.rawQuery("SELECT _id, name, address FROM database WHERE food LIKE ?", 
                new String[]{"%" '+foodItemChosen+' "%"});
        adapter = new SimpleCursorAdapter(
                this, 
                R.layout.result_list_item, 
                cursor, 
                new String[] {"name", "address"}, 
                new int[] {R.id.name, R.id.address});
        setListAdapter(adapter);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:45:07.283

那么最好使用[`query`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)method 而不是`rawQuery`. 它提供了从数据库中选择项目的灵活方式。

一些有用的文章

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

[http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android](http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android)

# javascript - 混淆 node.js 中的数组和对象

> ID：11999169
> 
> 赞同：0
> 
> 时间：2012-08-17T02:52:01.493
> 
> 标签：javascript, arrays, node.js, object

我有一个存储对象的数组，其中已经有一个对象：

```
var obj = [{
    name: 'json',
    lang: 'en'
}];

console,.log(obj) //the result is OK; 
```

然后我想将另一个对象推入其中，就像：

```
var newObj = {
    name: 'lee',
    lang: 'zh'
}

obj.push(newObj) 
```

但在此之后我打印`obj`数组，`console.log(obj)`结果是`2`！

为什么会这样？我该如何解决这个问题？正确地将对象存储在数组中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T02:56:39.493

确保你没有做`obj = obj.push(newObj);`，因为`.push`方法返回推送后的元素数量；相反，该行应该简单地读取`obj.push(newObj)`.

# java - 使用 Morena 处理扫描仪卡纸

> ID：11999171
> 
> 赞同：0
> 
> 时间：2012-08-17T02:52:18.490
> 
> 标签：java, netbeans, applet, twain, image-scanner

我一直在使用 Morena 库通过使用 Morenas TWAIN 实施的 ADF 扫描来扫描文档。但是，当扫描仪卡住时，我发现了一个问题，我的程序会崩溃并烧毁。我试过寻找一些方法来处理这个问题，但我只是想不出一种实用的方法。如果有人可以提出一种处理方法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:15:12.893

Twain 驱动程序应向条件代码状态报告卡纸。如果发生卡纸，它应该返回 TWCC_PAPERJAM=20。许多驱动程序不支持此功能。您可以在特定硬件上试验 getConditionCode、getResultCode 方法。

ImageConsumer 常量在检测出现某种问题时很有用。（但是，您将无法检测到是否发生了卡纸。）有三种可能的状态值：

IMAGEABORTED = 图像创建过程被故意中止。

IMAGEERROR = 生成图像时遇到错误。

STATICIMAGEDONE = 图像已完成，没有更多像素或帧要传送。您还可以使用 MorenaImage 类的 getStatus 方法接收这些值。

# python - 在 re.findall 中使用任何 - Python

> ID：11999174
> 
> 赞同：-2
> 
> 时间：2012-08-17T02:52:59.483
> 
> 标签：python, regex, list, variables, numbers

我在 python 中编写了一个脚本来告诉 new 中的哪些数字在 new 的前 10 个数字中。我知道它看起来比它更复杂，这与我稍后尝试对脚本执行的操作有关。现在，虽然我试图弄清楚为什么它为“新”列表中的每个数字打印“每个”，而不仅仅是第十个之前的数字。

这是我的代码：

```
i = 10
new = ['A lot of numbers'] 

for each in re.findall(r'[0-9]+', new):
    if any(each for x in (re.findall(r'[0-9]+', new)[0:i])):
        print each
    else:
        pass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T02:55:50.757

如果您要查找 中的前 10 个字母`new`，您的意思是

```
if any(each for x in (re.findall(r'[0-9]+', new[0:i]))): 
```

而不是：

```
if any(each for x in (re.findall(r'[0-9]+', new)[0:i])): 
```

另外，你的意思是`new`要成为一个列表吗？无法将列表传递给`findall`.

最后，请注意，您永远不需要`else: pass`声明，`if`它本身就可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T03:05:47.493

您需要在您的生成器表达式中以某种方式引用 x ，否则您只是在检查`any([each, each, each, ....])`，如果每个都评估为 true （对于您的正则表达式，它将始终评估为 true ）。我怀疑你想要这样的东西，它测试前 i 项中的任何一项是否等于每个：

`if any(x==each for x in (re.findall(r'[0-9]+', new)[0:i])):`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T03:40:48.460

如果 new 是一个字符串列表，其中一些是像“123”这样的数字，并且您想要这些数字中的前 10 个：

```
allnumbers = [x for x in new if re.match("[0-9]+", x)]
first10numbers = allnumbers[:10] 
```

（对于 Python 2.x）

如果 new 是一个字符串，你会有

```
allnumbers = [x for x in re.findall("[0-9]+", x)] 
```

我不确定你稍后会用这个做什么，但如果你只是想打印后面的数​​字，只有当它们出现在前 10 个数字中时，你可能会这样：

```
for number in [x for x in allnumbers if x in first10numbers]:
    print number 
```

# google-sites - 你可以在谷歌网站的文本中有“变量”吗？

> ID：11999184
> 
> 赞同：1
> 
> 时间：2012-08-17T02:55:12.073
> 
> 标签：google-sites

抱歉，这是一个不好的问题。我什至不知道标题应该是什么。我完全不擅长制作网站，所以这可能很容易找到，但我只是不知道要搜索的术语。我找不到有关如何执行此操作的任何信息...

我想要做的是有一些我可以在文本块中使用的引用/变量之类的东西，它会自动被替换为应该存在的任何值。我能想到的描述它的最佳方式是，如果我将该网站用作游戏或其他东西的设计文档，我将能够在任何页面上输入 [Title] 或类似内容，并且当它加载该文本时替换为我的标题。那样的话，如果我改变了头衔、名字、班级、种族、地点、物品等……它们只需要在一个地方改变，改变就会无处不在。

我注意到如果我向页面添加链接，它将自动使用该页面的标题作为链接的文本。这几乎正​​是我想要的。除非我更改其他页面的标题，否则链接的文本将保持为原始文本。它没有更新到新的标题，这根本不是我想要的。

此外，我想在 Google 协作平台中尽可能简单地执行此操作。我真的不想使用数据库。我希望 Google 协作平台能为此提供某种功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T02:59:45.623

我不相信这是可能的（在 Google 网站上），您可能需要考虑托管解决方案。

引用[此相关帖子](https://stackoverflow.com/questions/4577435/is-web-development-possible-using-google-sites)的答案：

> 您应该考虑使用 Google 的 App Engine 而不是 Google 协作平台来托管您的解决方案。您可以将其设置为使用 PHP（请参阅下面的链接），您可以将其配置为使用您的域名，并且您可以获得足够的 CPU、磁盘和带宽配额，以每月免费提供大约 500 万页浏览量（如果您正在服务）不仅如此，它们的价格极具竞争力。
> 
> Google App Engine： [http](http://code.google.com/appengine/docs/whatisgoogleappengine.html) ://code.google.com/appengine/docs/whatisgoogleappengine.html如何使用 Google App Engine 设置 PHP：http: [//blog.caucho.com/ ?p=187](http://blog.caucho.com/?p=187)

此外，我不确定您的 PHP 技能如何，但如果您不熟悉它，[那么这](http://www.w3schools.com/php/default.asp)应该有助于您入门。

# google-places-api - 谷歌地方类型来寻找极限运动

> ID：11999194
> 
> 赞同：0
> 
> 时间：2012-08-17T02:57:11.943
> 
> 标签：google-places-api

为什么 google 地方类型如此有限？，我在寻找可以练习极限运动（即漂流、滑翔伞、冲浪）的地方，并且没有显示在两个允许的列表中，而且我也无法将其添加到列表中，有人可以帮忙我？，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T04:29:59.323

`keyword`您可以尝试使用参数而不是参数执行 Places API 搜索请求`types`。当搜索不在类型列表中的地点类型时，这通常是成功的。

例如

> [https://maps.googleapis.com/maps/api/place/search/json?key=YOUR_API_KEY_HERE&sensor=false&keyword=paragliding&location=37.3943,-122.151&radius=50000](https://maps.googleapis.com/maps/api/place/search/json?key=YOUR_API_KEY_HERE&sensor=false&keyword=paragliding&location=37.3943,-122.151&radius=50000)

根据[文档](https://developers.google.com/places/documentation/)：

> 该`keyword`参数与 Google 已为此地点编制索引的所有内容相匹配，包括但不限于名称、类型和地址，以及客户评论和其他第三方内容。

# python - 如何在两个不同的 http 请求之间共享一个字典

> ID：11999198
> 
> 赞同：1
> 
> 时间：2012-08-17T02:58:14.860
> 
> 标签：python, django, shared-memory

Django 应用程序将数据从文件加载到 Python 字典，对其进行处理并将其作为 http 响应发送。现在说在 Web 服务器上收到 n 个请求，然后这个 Django 应用程序将运行`n`时间并将数据从文件加载到 Python 字典`n`时间。我想知道是否可以以某种方式将这些数据仅加载到字典一次，同时`n`可以提供 http 响应。

问题情况的示例`view.py`文件如下：

```
from django.http import HttpResponse
from django.http import HttpRequest

def hello(request):
    data = open("abc").readlines()
    return HttpResponse(data[0]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T03:02:03.427

将字典绑定到全局名称将使其在 Django 项目运行期间持续存在。请注意，每个 Django 进程（一些 WSGI 容器，例如 mod_wsgi，可以为一个应用程序运行多个进程）将拥有自己独立的字典副本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T03:02:43.320

如果数据与用户相关，您可以使用 djanog 的[会话框架](https://docs.djangoproject.com/en/dev/topics/http/sessions/)跨请求持久化数据。如果需要在众多用户之间共享数据，可以使用[缓存](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T03:50:36.583

这是[Django Middleware](https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs/)的工作。将其添加到您的设置中，它将在您的请求中持续存在。它是一个比持久性更好的选择，而且绝对比使用全局对象好得多。

*中间件是 Django 请求/响应处理的挂钩框架。这是一个轻量级的低级“插件”系统，用于全局更改 Django 的输入和/或输出。每个中间件组件负责做一些特定的功能。例如，Django 包含一个中间件组件 XViewMiddleware，它为 HEAD 请求的每个响应添加一个“X-View”HTTP 标头。*

# java - Tomcat 7 类加载首选项顺序

> ID：11999199
> 
> 赞同：0
> 
> 时间：2012-08-17T02:58:23.597
> 
> 标签：java, tomcat, classloader

我有以下情况：

一方面，我有一个 tomcat 实例，其中有很多需要包含 slf4j 库的 activemq-all.jar 的应用程序，所以我已经将它部署到 lib 目录中，包含这个对我来说不是可选的每个应用程序上的 jar 文件。

另一方面，我需要安装一个我无法控制的监视器应用程序，并附带不同版本的 slf4j。

在另一个 tomcat 实例上运行最后一个应用程序也不是一种选择。

我想配置 tomcat 的 ClassLoader 以尝试先加载 webapps 上的 jars，然后再加载 lib/ 目录上的 jars。

这可能吗？怎样才能实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:41:00.123

默认情况下，tomcat 首先加载 web 应用程序类，并为它们提供比其自己的 lib 目录中的类更高的优先级。您可以将提到的 jar 保留为 lb 文件夹。通常我会推荐 catalina_base 目录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T03:08:31.470

[在Common 类加载器](http://tomcat.apache.org/tomcat-7.0-doc/class-loader-howto.html#Class_Loader_Definitions)下加载公共 jar 。默认情况下，通用类加载器会在以下位置查找 jar：

*   `$CATALINA_BASE/lib`
*   `$CATALINA_HOME/lib`

与您的 Web 应用程序一起打包的任何 jar 都应该优先于 Common 类加载器中的那些。

# firefox - 为什么Firefox加载不在其插件目录中的插件？

> ID：11999201
> 
> 赞同：0
> 
> 时间：2012-08-17T02:58:51.487
> 
> 标签：firefox, plugins, browser-plugin

案例：在我的页面，我需要下载一个插件，我知道firefox插件目录是c:\program files(x86)\mozilla firefox\plugins。但是我找了一个案例，这个下载的插件位于C:\documents&settings[username]\plugins（我不知道怎么弄的，可能是用户提前下载了插件）。并且firefox尝试将插件加载到错误的目录中，但是我在firefox附加组件中找不到该插件。

那么为什么firefox会加载不在其插件目录中的插件呢？任何人都可以告诉我firefox插件加载规则吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:33:48.907

> 那么为什么firefox会加载不在其插件目录中的插件呢？

Windows 上的插件主要[通过注册表](https://developer.mozilla.org/en-US/docs/Gecko_Plugin_API_Reference/Plug-in_Development_Overview#Windows_Installation_Using_the_Registry)找到- 插件安装程序在一个特殊的注册表节点下注册插件支持的 mimetypes 及其路径等。

此外，还扫描了一些目录（例如，用于公共文件和特定目录），但这在这里无关紧要，并且不应安装插件`FirefoxDir\plugins`（除其他外，它们不会被其他也支持[NPAPI](http://en.wikipedia.org/wiki/NPAPI)的浏览器拾取） .

# scala - Play 2.0-scala中的自定义约束？

> ID：11999202
> 
> 赞同：2
> 
> 时间：2012-08-17T02:58:53.780
> 
> 标签：scala, playframework, playframework-2.0

我想编写一个自定义约束以在我的表单中使用它进行验证。Form 中的映射具有验证功能：`verifying (constraints: Constraint[T]*): Mapping[T]`.

我显然可以使用内置约束，例如`"name" -> text.verifying(nonEmpty)`.

现在我需要我自己的约束。约束案例类如下所示：`case class Constraint [-T] (name: Option[String], args: Seq[Any], f: (T) ⇒ ValidationResult) extends Product with Serializable`

但是当我查看 ValidationResult 时，我只看到一个空特征，请参见此处 - [http://www.playframework.org/documentation/api/2.0.2/scala/index.html#play.api.data.validation.ValidationResult](http://www.playframework.org/documentation/api/2.0.2/scala/index.html#play.api.data.validation.ValidationResult) . 那么如何定义自己的约束呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T03:17:02.167

您的问题是您不知道如何创建类型的函数`T => ValidationResult`吗？如果单击“已知子类”，它有两个：（`Invalid`一个类）和`Valid`（一个单例）。

例如：

```
import play.api.data.validation._

val f = (_: Int) match {
  case 0 | 1 | 2 => Valid
  case _ => Invalid("Number over 2")
}

val c = Constraint("my constraint")(f) 
```

# java - Android USB 主机异步批量传输示例

> ID：11999203
> 
> 赞同：1
> 
> 时间：2012-08-17T02:59:02.067
> 
> 标签：java, android, asynchronous, usb, android-usb

我正在使用[Android USB 主机模式](http://developer.android.com/guide/topics/connectivity/usb/host.html)并希望执行异步批量传输。到目前为止，我已经成功地使用了同步批量传输，但是在掌握异步传输的各个部分是如何组合在一起时遇到了一些麻烦。从[UsbRequest](http://developer.android.com/reference/android/hardware/usb/UsbRequest.html)文档（我的粗体）：

> 批量端点上的请求可以通过 bulkTransfer(UsbEndpoint, byte[], int, int) 同步发送，也可以通过[queue(ByteBuffer, int)](http://developer.android.com/reference/android/hardware/usb/UsbRequest.html#queue%28java.nio.ByteBuffer,%20int%29)和[requestWait()](http://developer.android.com/reference/android/hardware/usb/UsbDeviceConnection.html#requestWait%28%29) **[a UsbDeviceConnection 方法]**异步发送。

好的，这是否意味着我从现有的执行线程调用 queue()，然后在另一个线程的其他地方调用 requestWait()？当请求完成时，requestWait() 从哪里获取我的逻辑来执行？我所做的大部分异步工作都是使用 Javascript 和 Python 等语言进行的，通常通过将回调函数作为参数传递。在 Java 中，我可能会传递一个实现特定方法的对象作为回调，但我看不到任何地方发生这种情况。也许我对整个事情的心理模型是错误的。

*有人可以提供一个发送异步批量传输的孤立示例吗？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:27:15.447

基本上，一旦排队完成，该`requestWait()`方法就会返回。`UsbRequest`您可以在同一个线程或另一个线程上执行此操作。假设您有多个未完成的请求，请使用`setClientData()`AND方法确定哪个请求刚刚完成！`getClientData()`

您可以跨多个端点排队多个 UsbRequest，并通过重复调用来消耗它们的完成状态，`requestWait()`直到您没有更多未完成的请求。

# javascript - 修复如何在容器中查找和替换字符串的功能

> ID：11999208
> 
> 赞同：0
> 
> 时间：2012-08-17T02:59:28.963
> 
> 标签：javascript, jquery, html, string

我在这里做了一个函数：

```
function locationOfVideo(){//Outputs video location div according to post text
    var ytVideoDiv = '<div class="youtube-video"><div id="<?php echo $divName; ?>-video"></div></div>';

    $j('#main .content:contains("<--video-->")').replace('<--video-->', ytVideoDiv);
} 
```

我认为这会起作用，但我大错特错并且有点累。无论如何，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T03:02:23.897

replace 是一个普通的 js 函数，用于替换部分字符串或类似内容，而不是替换 jQuery 对象的内容。

如果目标是替换所选元素中的所有内容，并且使用正确的选择器，则可以使用`html()`并执行以下操作：

```
$j('#main .content:contains("<--video-->")').html(ytVideoDiv); 
```

或仅替换字符串`<--video-->`：

```
$j('#main .content:contains("<--video-->")').html(function(i,html) {
    return html.replace('&lt;--video--&gt;', ytVideoDiv)
});​ 
```

[**小提琴**](http://jsfiddle.net/LuWRs/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T03:04:32.737

```
$j('#main .content:contains("<!--video-->")').replace('<--video-->', ytVideoDiv); 
```

应该：

```
var videoNode = $j('#main .content:contains("<!--video-->")');
videoNode.html(videonode.html().replace('<!--video-->', ytVideoDiv)); 
```

或者：

```
$j('#main .content:contains("<!--video-->")').html(function(index, oldhtml) { return oldhtml.replace('<--video-->', ytVideoDiv); }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T03:14:37.457

不要`<--video-->`在您的 html 中使用，更改为其他类似`{video}`.

然后这样做：

```
$('#main .content:contains("{video}")').replaceWith(function() {
  return $(this).text().replace('{video}', ytVideoDiv);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T03:28:19.690

最好输出带有特殊标签的元素，如 abbr，查看 javascript 模板 usabe，如[jquery-timeago](https://github.com/rmm5t/jquery-timeago)：

```
<abbr class="timeago" title="2011-12-17T09:24:17Z">December 17, 2011</abbr> 
```

代替：

```
$('abbr.timeago').timeago() 
```

# php - 是否可以在 Symfony 2 中保护整个控制器？

> ID：11999210
> 
> 赞同：2
> 
> 时间：2012-08-17T02:59:39.160
> 
> 标签：php, symfony, jms

我正在使用 JMSSecurityExtra 包来保护我的控制器中的方法。但是有什么方法可以保护整个控制器`@Secure`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T06:54:56.343

这可以按照[Documentaion完成](http://jmsyst.com/bundles/JMSSecurityExtraBundle/master/annotations)

[https://github.com/schmittjoh/JMSSecurityExtraBundle/issues/50](https://github.com/schmittjoh/JMSSecurityExtraBundle/issues/50)

> 提示：如果您希望使用相同的规则保护控制器的所有操作，您还可以在类本身上指定 @PreAuthorize。但请注意，此规则仅适用于在类中声明的方法。

```
use JMS\SecurityExtraBundle\Annotation\PreAuthorize;

 /** @PreAuthorize("hasRole('A') or (hasRole('B') and hasRole('C'))") */
class MyService
{

    public function secureMethod()
    {
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:31:46.227

此注解只能应用于方法。

你可以这样做（它是一个正则表达式）：

```
jms_security_extra:
    method_access_control:
        'AcmeDemoBundle:AdminController:.*Action': 'hasRole("ROLE_ADMIN")' 
```

阅读文档：http: [//jmsyst.com/bundles/JMSSecurityExtraBundle/master/method_security_authorization](http://jmsyst.com/bundles/JMSSecurityExtraBundle/master/method_security_authorization)

# php - _GET 在 PHP 中用于具有多个值的变量

> ID：11999214
> 
> 赞同：1
> 
> 时间：2012-08-17T03:00:24.393
> 
> 标签：php, variables, get

我正在发送一个具有多个值的变量，如下所示：

查询：

```
 $(".indexMain").load('indexMain.php?color=' + colors.join("+"), function() 
```

--> indexMain.php?colors=blue+red+brown

我想 _GET 这些值，然后在 while 循环中使用它们将它们放入像这样的 SQL 查询中：

```
$items = $con -> prepare("SELECT * FROM item_descr WHERE color_base1 = :colorbase1");
$items -> bindValue(":colorbase1", $color); 
```

谢谢！

编辑：这是我当前的代码，但它不起作用，它只显示与第一种颜色对应的项目。

```
foreach (explode(' ', $_GET['color']) as $color) 
    {
        $items = $con -> prepare("SELECT * FROM item_descr WHERE color_base1 = :colorbase1");
        $items -> bindValue(":colorbase1", $color);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T03:11:32.793

```
indexMain.php?color=blue+red+brown 
```

应该

```
indexMain.php?colors%5B%5D=blue&colors%5B%5D=red&colors%5B%5D=brown 
```

这相当于

```
indexMain.php?colors[]=blue&colors[]=red&colors[]=brown 
```

这将创建一个可通过`$_GET['colors']`. 之后使用这个 PHP：

```
foreach ($_GET['colors'] as $color) {
    $query = $con->prepare("SELECT * FROM item_descr WHERE color_base1 = :colorbase1");
    if ($query->execute(":colorbase1", $color)) {
        // use results from query
    } else {
        // handle failed query
    }
} 
```

如果您不想更改查询字符串，也可以这样做：

```
foreach (explode(' ', $_GET['colors']) as $color) {
    $query = $con->prepare("SELECT * FROM item_descr WHERE color_base1 = :colorbase1");
    if ($query->execute(":colorbase1", $color)) {
        // use results from query
    } else {
        // handle failed query
    }
} 
```

请注意，唯一的变化是在第一行，我们用空格分割字符串（因为“+”被转换为空格字符）。

Also note that both examples assume that `$_GET['colors']` is defined. You can use `isset()` to check if it is defined.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T03:04:10.973

我认为这应该有效：

```
$colors = explode(' ', $_GET['color']);
foreach($colors as $color) {
    // your code here...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T03:06:18.833

试试这个

```
$colors = explode("+", $_GET['color']);
foreach($colors as $color){
$items = $con -> prepare("SELECT * FROM item_descr WHERE color_base1 = :colorbase1");
$items -> bindValue(":colorbase1", $color);
} 
```

这个怎么样

```
$colors = explode(" ", $_GET['color']);
foreach($colors as $color){
$items = $con -> prepare("SELECT * FROM item_descr WHERE color_base1 = :colorbase1");
$items -> bindValue(":colorbase1", $color);
} 
```

# android - 进度下载对话框

> ID：11999218
> 
> 赞同：1
> 
> 时间：2012-08-17T03:01:14.733
> 
> 标签：android, dialog, progress

您如何根据以下代码实现进度下载对话框？我的代码从特定 URL 下载图像，然后将图像文件保存到 SD 卡中并将图像设置为墙纸。当用户触摸选项菜单按钮 setwallpaper() 时，我想显示一个进度下载对话框。

```
public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.set_wallpaper:
                SetWallpaper(image_url);
                return true;
            default:
                return false;
        }
    }

public void SetWallpaper(String image_url)
        {   
        URL myFileUrl = null;
            try
        {   
                myFileUrl = new URL(image_url); 
        }
            catch (MalformedURLException e)
            {      
                e.printStackTrace();  
            }   
            Bitmap bmImg = null;
            try {  
                HttpURLConnection conn = (HttpURLConnection) myFileUrl.openConnection();   
                conn.setDoInput(true);   
                conn.connect();     
                //int length = conn.getContentLength(); 
            InputStream is = conn.getInputStream();
            bmImg = BitmapFactory.decodeStream(is); 
            }
                catch (IOException e)
                {       
                    e.printStackTrace();  
                }   
        try {       

            String path = myFileUrl.getPath();
            String idStr = path.substring(path.lastIndexOf('/') + 1);
            File filepath = Environment.getExternalStorageDirectory();
            File dir = new File (filepath.getAbsolutePath() + "/Wallpaper/");
                dir.mkdirs();
                String fileName = idStr;
                File file = new File(dir, fileName);
                FileOutputStream fos = new FileOutputStream(file);

                bmImg.compress(CompressFormat.JPEG, 75, fos);   
                fos.flush();    
                fos.close();       

                WallpaperManager wpm = WallpaperManager.getInstance(getBaseContext());
                wpm.setBitmap(bmImg);

        }
        catch (Exception e){

            e.printStackTrace();  
        }
        } 
```

我的尝试：捕获异常。请参考以下代码

```
 public class SingleMenuItemActivity  extends Activity {

    // XML node keys
static final String KEY_TITLE = "title";
static final String KEY_ARTIST = "artist";  
static final String KEY_THUMB_URL = "thumb_url";
ProgressBar progressbar;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.single_list_item);

        ImageView image = (ImageView) findViewById(R.id.single_image);
        Intent in = getIntent();

        String image_url = in.getStringExtra(KEY_THUMB_URL);

        ImageLoader imgLoader = new ImageLoader(getApplicationContext());

        imgLoader.DisplayImage(image_url, image);

        String title = in.getStringExtra(KEY_TITLE);
        String artist = in.getStringExtra(KEY_ARTIST);

        TextView lblName = (TextView) findViewById(R.id.name_title);
        TextView lblCost = (TextView) findViewById(R.id.name_artist);
        progressbar = (ProgressBar) findViewById(R.id.loadingBar);

        lblName.setText(title);
        lblCost.setText(artist);

    }

    public class loadImageTask extends AsyncTask<String, Void, Void>
    {
        //Drawable imgLoad;
        URL myFileUrl = null;
        Bitmap bmImg = null;
        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            Intent in = getIntent();
        String image_url = in.getStringExtra(KEY_THUMB_URL);
        try {
            myFileUrl = new URL(image_url);
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
        super.onPreExecute();

        progressbar.setVisibility(View.VISIBLE);
    }

        @Override
        protected Void doInBackground(String... params) {
            // TODO Auto-generated method stub

            try {  
                HttpURLConnection conn = (HttpURLConnection) myFileUrl.openConnection();   
                conn.setDoInput(true);   
                conn.connect();     
                InputStream is = conn.getInputStream();
                bmImg = BitmapFactory.decodeStream(is); 
            }
            catch (IOException e)
            {       
                e.printStackTrace();  
            }
            try {       

                String path = myFileUrl.getPath();
                String idStr = path.substring(path.lastIndexOf('/') + 1);
            File filepath = Environment.getExternalStorageDirectory();
            File dir = new File (filepath.getAbsolutePath() + "/Wallpaper/");
                dir.mkdirs();
                String fileName = idStr;
                File file = new File(dir, fileName);
                FileOutputStream fos = new FileOutputStream(file);
                bmImg.compress(CompressFormat.JPEG, 75, fos);   
                fos.flush();    
                fos.close();       
            }
            catch (Exception e)
                    {
                        e.printStackTrace();  
                    }
            return null;   
        }
        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);

            if(progressbar.isShown())
            {
                progressbar.setVisibility(View.GONE);

            }
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main_menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        Intent in = getIntent();
        String image_url = in.getStringExtra(KEY_THUMB_URL);
        switch (item.getItemId()) {
            case R.id.save_image:
                new loadImageTask().execute(image_url);

                return true;
            default:
                return false;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:10:39.140

在这里，您可以使用 AsyncTask 来显示进度条/对话框。

Show the progress bar visible inside the onPreExecute() method. And performs the image loading operations inside the doInBackground() method. Once this operation is done, we will make progress bar invisible and make imageview visible with that loaded image inside the onPostExecute() method.

For more information check this [LINK](http://www.technotalkative.com/loading-remote-images/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T03:17:17.620

尝试使用这个

```
final ProgressDialog dialog = ProgressDialog.show(
            YourACtivity.this, "", "Loading...please wait");

    new Thread(new Runnable() {
        @Override
        public void run() {
        SetWallpaper(image_url);
                  if (dialog != null && dialog.isShowing()) {
                        dialog.dismiss();
                    }
        }
    }).start();

} 
```

代替

```
SetWallpaper(image_url); 
```

在 onOptionsItemSelected(MenuItem 项)

然后使用 Handlers 处理[http://developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

# jquery - 在代码 HTML 中用于 ajax 中的 GET

> ID：11999222
> 
> 赞同：0
> 
> 时间：2012-08-17T03:01:45.883
> 
> 标签：jquery, ajax, get

我试图找出一种方法，只使用我的内联 HTML 作为 ajax GET 方法的 URL，而不是从单独的网页获取数据。这可能吗？

这是我的ajax代码：

```
 $.ajax({
          type: "GET",
          url: $(elm).attr("href"),
          success: function(data){
            $("#pageslide-content").html(data)
              .queue(function(){
                $(this).dequeue();

                // restore working order to all anchors
                $("#pageslide-slide-wrap a").unbind('click').click(function(elm){
                  document.location.href = elm.target.href;
                });

                // add hook for a close button
                $(this).find('.pageslide-close').unbind('click').click(function(elm){
                  _closeSlide(elm);
                  $(this).find('pageslide-close').unbind('click');
                });
                settings.complete();
              });
          }
        });
      }); 
```

任何帮助都会很棒！

**更新**

```
SOLVED:

             $("#pageslide-content").html('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title></title></head?<body><strong style="color:#C63; font-size:28px; font-weight:bold;">TEST</strong></body></html>')
              .queue(function(){
                $(this).dequeue();

                // restore working order to all anchors
                $("#pageslide-slide-wrap a").unbind('click').click(function(elm){
                  document.location.href = elm.target.href;
                });

                // add hook for a close button
                $(this).find('.pageslide-close').unbind('click').click(function(elm){
                  _closeSlide(elm);
                  $(this).find('pageslide-close').unbind('click');
                });
                settings.complete();
              }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T03:03:46.673

是的，当然有可能。您可以从任何地方获取字符串，并将其用于您的 URL 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T03:42:34.880

```
 $("#pageslide-content").html('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title></title></head?<body><strong style="color:#C63; font-size:28px; font-weight:bold;">TEST</strong></body></html>')
              .queue(function(){
                $(this).dequeue();

                // restore working order to all anchors
                $("#pageslide-slide-wrap a").unbind('click').click(function(elm){
                  document.location.href = elm.target.href;
                });

                // add hook for a close button
                $(this).find('.pageslide-close').unbind('click').click(function(elm){
                  _closeSlide(elm);
                  $(this).find('pageslide-close').unbind('click');
                });
                settings.complete();
              }); 
```

# css - CSS 图像位置

> ID：11999226
> 
> 赞同：1
> 
> 时间：2012-08-17T03:02:17.583
> 
> 标签：css

我试图让一个带有图像背景的 div 出现在文本框的右侧。我试过 Float = none, left, right，我试过位置，甚至玩过边距，但似乎没有什么能让它留下来。

```
<div id="status" style="background-image:url(menubar/ajax-loader.gif); width:16px; height:16px; background-repeat:no-repeat; margin-left: 245px; margin-top: 2px;"></div>

<input name="strsearch" style="color:#333" type="text" id="strsearch" onKeyUp="Search(this.form)" value="Please enter your search criteria..." size="35" maxlength="75" onFocus="clearfield();" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T03:11:13.463

这对你有什么作用？

```
<input name="strsearch" style="color:#333" type="text" id="strsearch" onKeyUp="Search(this.form)" value="Please enter your search criteria..." size="35" maxlength="75" onFocus="clearfield();" />

<div id="status" style="display:inline;background-image:url(menubar/ajax-loader.gif); width:16px; height:16px; background-repeat:no-repeat;padding-right:16px;"></div>​ 
```

左右浮动尝试将元素尽可能地扔到容器的一侧。如果您希望该元素位于第二个元素的右侧，请将其放在 HTML 中的第二个元素之后。此外，`div`s 是块元素。块元素希望在自己的行上。使用内联元素（如 a `span`），或将`display`css 属性设置为`inline`您不希望在新行上的块元素。

编辑：这是你的跨度

```
<input name="strsearch" style="color:#333" type="text" id="strsearch" onKeyUp="Search(this.form)" value="Please enter your search criteria..." size="35" maxlength="75" onFocus="clearfield();" />

<span id="status" style="background-image:url(menubar/ajax-loader.gif); width:16px; height:16px; background-repeat:no-repeat;padding-right:16px;"></span>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T03:13:35.833

只是`float:right`div 并删除 245px 左边距，这样您就不会将输入推得太远。

# python - python将数字添加到字符串

> ID：11999228
> 
> 赞同：8
> 
> 时间：2012-08-17T03:02:40.993
> 
> 标签：python

尝试将 count int 添加到字符串*（网站 url）*的末尾：

代码：

```
 count = 0
  while count < 20:
    Url = "http://www.ihiphopmusic.com/music/page/" 
    Url = (Url) + (count)
    #Url = Url.append(count)
    print Url 
```

我想：

```
http://www.ihiphopmusic.com/music/page/2
http://www.ihiphopmusic.com/music/page/3
http://www.ihiphopmusic.com/music/page/4
http://www.ihiphopmusic.com/music/page/5 
```

结果：

```
Traceback (most recent call last):
  File "grub.py", line 7, in <module>
    Url = Url + (count)
TypeError: cannot concatenate 'str' and 'int' objects 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-17T03:06:56.307

问题正是回溯状态。Python 不知道该怎么办`"hello" + 12345`

您必须`count`先将整数转换为字符串。

此外，您永远不会增加`count`变量，因此您的 while 循环将永远持续下去。

尝试这样的事情：

```
count = 0
url = "http://example.com/"
while count < 20:
    print(url + str(count))
    count += 1 
```

甚至更好：

```
url = "http://example.com/"
for count in range(1, 21):
    print(url + str(count)) 
```

正如 Just_another_dunce 所指出的，在 Python 2.x 中，您也可以这样做

```
print url + str(count) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T03:04:34.673

尝试

```
 Url = (Url) + str(count) 
```

反而。问题是您试图连接一个*字符串*和一个*数字*，而不是两个字符串。[str()](http://docs.python.org/library/functions.html#str)将为您解决此问题。

`str()`将提供`count`适合连接的字符串版本，而无需实际`count`从 int 转换为字符串。看这个例子：

```
>>> n = 55

>>> str(n)
>>> '55'

>>> n
>>> 55 
```

最后，格式化字符串被认为比连接它更有效。IE，

```
 Url = '%s%d' % (Url, count) 
```

或者

```
 Url = '{}{}'.format(Url, count) 
```

此外，你有一个*无限*循环，因为循环`count`内的值永远不会改变。要修复此添加

`count += 1`

在循环的底部。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T03:05:31.443

尝试将 count 转换为字符串，如

```
Url = "http://www.ihiphopmusic.com/music/page/" + str(count) 
```

或使用格式

```
Url = "http://www.ihiphopmusic.com/music/page/%s" % count 
```

甚至可能

```
Url = "http://www.ihiphopmusic.com/music/page/{count}".format(count=count) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-17T19:23:53.800

用这个：

`url = "http://www.ihiphopmusic.com/music/page/" while count < 20: '''You can redefine the variable Also, you have to convert count to a string as url is also a string''' url = url + str(count) print url`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T03:05:41.287

```
Url = "http://www.ihiphopmusic.com/music/page/%d" % (count,) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T03:05:45.687

您必须将 int 更改为字符串。

```
Url = (Url) + str(count) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-17T03:06:02.253

您需要将整数转换为字符串

```
count = 0
while count < 20:
    Url = "http://www.ihiphopmusic.com/music/page/"
    Url = (Url) + str(count)     
    #Url = Url.append(count)     
    print Url 
```

# php - reCaptcha 显示“输入错误：无效的推荐人”

> ID：11999231
> 
> 赞同：23
> 
> 时间：2012-08-17T03:02:52.033
> 
> 标签：php, recaptcha

我已经在 mydomain.com 在 recaptcha.net 上注册了一个帐户。

虽然我正在开发`localhost`它，但它工作正常，但每当我尝试从本地网络中的另一台机器打开页面时，它都会显示`"input error: invalid referer"`错误消息！

我没有使用recaptcha 插件。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-17T03:09:03.327

reCaptcha 密钥绑定到某个域 + 本地主机（当您从他们那里获得您的私钥/公钥时）。您可以通过请求新的私钥/公钥或使用全局密钥在另一个域上使用它。

从他们的[网站](https://www.google.com/recaptcha/admin/create)：

> *   默认情况下，您的 reCAPTCHA 密钥仅限于指定域和任何子域，以提高安全性。foo.com 的密钥在 test.foo.com 上工作。
>     
>     
> *   如果您希望在大量域中使用您的密钥（例如，如果您是托管服务提供商、OEM 等），请选择全局密钥选项。您可能需要使用描述性域名，例如“global-key.mycompany.com”
>     
>     
> *   **如果您拥有多个域名（foocars.com 和 footrucks.com），您可以注册多个密钥，或使用全局密钥。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-23T17:03:56.523

[如您在此处](https://forum.myroundcube.com/topic/19-google-removed-global-keys-from-their-free-recaptcha-service/)看到的，Google 似乎已删除了 reCaptcha 的全局密钥。

在您的本地主机中它工作正常，因为您正在使用提供给您的域的密钥。但是，当您将代码上传到您的生产服务器时，您似乎正在对多个域使用相同的密钥（即使 localhost 可能不被视为域）。所以你得到了那个错误。我修复了为我的另一个域创建新密钥并将它们添加到我的本地主机脚本的问题。对于生产脚本，我保留了该域的密钥。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-11T16:47:48.820

我有同样的问题，我解决它从recaptcha[管理屏幕](https://www.google.com/recaptcha/admin#list)添加我的服务器IP地址；

单击标题下列出的域名， `Your reCAPTCHA sites`然后添加您的 ip，`Key Settings -> Domain`这样问题就解决了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-19T08:40:28.040

正如 Andre 之前提到的 - 为 reCaptcha 删除了全局密钥。但是你可以使用[安全令牌](https://developers.google.com/recaptcha/docs/secure_token) 你会[在这里找到我的 PHP 解决方案](https://stackoverflow.com/a/35500514/1600193)

# emulation - 对于 6502 Cpu，当 X 和 Y 为 0 时递减（DEX/DEY 操作码）

> ID：11999232
> 
> 赞同：2
> 
> 时间：2012-08-17T03:03:07.387
> 
> 标签：emulation, opcode, nintendo, 6502

我目前正在尝试通过 .NET 编写 NES 模拟器，并且我对执行递减和递增的特定操作码有疑问......

由于 X 和 Y 寄存器都是 8 位，在实现方面，它是无符号字节还是有符号字节？即X和Y寄存器的取值范围是-128到127还是0-255？

我对此感到困惑，因为如果 X 和 Y 寄存器初始化为 0，那么执行 DEX 时会发生什么？还是由程序员来真正担心这一点？

提前感谢大家的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T03:20:13.727

有趣的是，使用二进制补码有符号数在执行算术时没有区别，因此 DEX 不知道寄存器是否包含有符号数或无符号数。例如，表示 -1 的位与表示 255 的位相同。因此 0 - 1 = 255 或 -1 取决于您的解释。减量无关紧要。

# mysql - Apache James 给出：ClassNotFoundException: com.mysql.jdbc.Driver

> ID：11999233
> 
> 赞同：0
> 
> 时间：2012-08-17T03:03:12.740
> 
> 标签：mysql, apache, ubuntu, jdbc, james

我已经按照[wiki配置了](http://wiki.apache.org/james/V3ConfigTutorial)[Apache James](http://james.apache.org/server/3/config.html)：

```
thufir@dur:~/apache-james-3.0-beta4$ 
thufir@dur:~/apache-james-3.0-beta4$ tail bin/setenv.sh 
# limitations under the License.
# ----------------------------------------------------------------------------
#
# Add every needed extra jar to this
CLASSPATH_PREFIX=../conf/lib/*
export CLASSPATH_PREFIX

CLASSPATH_PREFIX=../conf/lib/mysql-connector-java-5.1.21-bin.jar
thufir@dur:~/apache-james-3.0-beta4$ 
thufir@dur:~/apache-james-3.0-beta4$ ll conf/lib/
total 824
drwxr-xr-x 2 thufir thufir   4096 Aug 16 19:40 ./
drwxr-xr-x 4 thufir thufir   4096 Aug 16 18:56 ../
-rw-r--r-- 1 thufir thufir 827942 Jun 21 06:41 mysql-connector-java-5.1.21-bin.jar
-rw------- 1 thufir thufir     66 Mar 21 03:33 README.txt
thufir@dur:~/apache-james-3.0-beta4$ 
thufir@dur:~/apache-james-3.0-beta4$ cat conf/james-database.properties 
# MySQL JDBC database properties
database.driverClassName=com.mysql.jdbc.Driver
database.url=jdbc:mysql://localhost/james
database.username=james
database.password=password
vendorAdapter.database=MYSQL
openjpa.streaming=false

thufir@dur:~/apache-james-3.0-beta4$ 
```

但我得到：

```
jvm 1    |  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
jvm 1    |  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
jvm 1    |  at java.lang.reflect.Method.invoke(Method.java:616)
jvm 1    |  at org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:240)
jvm 1    |  at java.lang.Thread.run(Thread.java:679)
jvm 1    | Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot load JDBC driver class 'com.mysql.jdbc.Driver'
jvm 1    |  at org.apache.commons.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1429)
jvm 1    |  at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1371)
jvm 1    |  at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)
jvm 1    |  at org.apache.openjpa.lib.jdbc.DelegatingDataSource.getConnection(DelegatingDataSource.java:137)
jvm 1    |  at org.apache.openjpa.lib.jdbc.DecoratingDataSource.getConnection(DecoratingDataSource.java:112)
jvm 1    |  at org.apache.openjpa.jdbc.schema.DataSourceFactory.installDBDictionary(DataSourceFactory.java:239)
jvm 1    |  ... 98 more
jvm 1    | Caused by: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
jvm 1    |  at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
jvm 1    |  at java.security.AccessController.doPrivileged(Native Method)
jvm 1    |  at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
jvm 1    |  at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
jvm 1    |  at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
jvm 1    |  at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
jvm 1    |  at org.apache.commons.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1420)
jvm 1    |  ... 103 more
jvm 1    | 
jvm 1    |  at org.apache.openjpa.lib.conf.ConfigurationImpl.instantiateAll(ConfigurationImpl.java:309)
jvm 1    |  at org.apache.openjpa.conf.OpenJPAConfigurationImpl.instantiateAll(OpenJPAConfigurationImpl.java:1652)
jvm 1    |  at org.apache.openjpa.kernel.AbstractBrokerFactory.makeReadOnly(AbstractBrokerFactory.java:645)
jvm 1    |  at org.apache.openjpa.kernel.AbstractBrokerFactory.newBroker(AbstractBrokerFactory.java:204)
jvm 1    |  ... 80 more
wrapper  | <-- Wrapper Stopped
thufir@dur:~/apache-james-3.0-beta4$ 
thufir@dur:~/apache-james-3.0-beta4$ 
thufir@dur:~/apache-james-3.0-beta4$ java -version
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.1) (6b24-1.11.1-4ubuntu2)
OpenJDK Client VM (build 20.0-b12, mixed mode, sharing)
thufir@dur:~/apache-james-3.0-beta4$ 
```

完整的[控制台输出](https://gist.github.com/3375571)太大，无法粘贴到此处。

我究竟做错了什么？JDBC JAR 在那里，它在脚本中，并且配置了 MySql。

哦，我使用 OpenJDK 6 是因为[JDK 7 和 James 存在问题](http://article.gmane.org/gmane.comp.jakarta.james.user/18800)，尽管我希望这仅适用于您使用 JDK 而不仅仅是像我这样的 JRE 的情况。

我可以看到[这可能不是第一次](https://stackoverflow.com/questions/10848285/)讨论这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:05:47.827

[由](http://article.gmane.org/gmane.comp.jakarta.james.user/18802)埃里克查尔斯提供：

```
From: Eric Charles <eric <at> apache.org>
Subject: Re: mysql driver
Newsgroups: gmane.comp.jakarta.james.user
Date: 2012-08-17 10:48:28 GMT (13 minutes ago)

The conf/lib/*.jar loading in beta4 is buggy.

Can you edit the conf/wrapper.conf and change 
'wrapper.java.classpath...=../conf/lib' to 
'wrapper.java.classpath...=../conf/lib/*' (add a /* after lib).

Thx, Eric 
```

虽然我需要测试一下。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-17T14:27:27.130

我通过添加行“ `wrapper.java.classpath.133=%REPO_DIR%/mysql-connector-java-5.1.36.jar`”解决了这个问题`wrapper.conf`

# c# - 实体框架：将 varchar 映射到 DateTime 属性

> ID：11999235
> 
> 赞同：0
> 
> 时间：2012-08-17T03:03:20.950
> 
> 标签：c#, .net, mysql, entity-framework, orm

实体框架 4。MySQL

我正在尝试将**varchar 列**映射到类的**DateTime**属性

我的课：

```
[Table("webnews_in")]
public class WEBNews_in : AbsNews
{
    private DateTime _inDateTimeAdded = DateTime.MinValue;

    public DateTime InDateTimeAdded
    {
        get { return _inDateTimeAdded; }
        set { _inDateTimeAdded = value; }
    }

    private DateTime _inDateTimeUpdated = DateTime.MinValue;

    public DateTime InDateTimeUpdated
    {
        get { return _inDateTimeUpdated; }
        set { _inDateTimeUpdated = value; }
    }
} 
```

* * *

```
CREATE TABLE webnews_in
    (
    Id                INT NOT NULL auto_increment,
    VPN_AC              VARCHAR (20) NULL,
    InDateTimeAdded   VARCHAR (50) NULL,
    InDateTimeUpdated VARCHAR (50) NULL

    PRIMARY KEY (Id)
    ); 
```

* * *

我收到了这个错误：

```
 Input string was not in a correct format. 
    Message Input string was not in a correct format. 
    Data IDictionary (0 items) 

StackTrace    at System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   at System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info)
   at MySql.Data.Types.MySqlDateTime.ParseMySql(String s)
   at MySql.Data.MySqlClient.MySqlDataReader.GetDateTime(Int32 i)
   at MySql.Data.Entity.EFMySqlDataReader.GetDateTime(Int32 ordinal) 
HelpLink null  
Source mscorlib 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T03:53:35.893

每次在模型中设置与表不同的类型时，EF都会抛出错误，即，如果您在模型中将字段设置为整数，但该字段在表中具有字符串类型，则在加载数据时它会给你一个错误。为避免这种情况，您必须采取一种解决方法，声明一个具有等效表类型的公共属性并将其转换为模型所需的类型，请尝试以下操作：

```
[Table("webnews_in")]
public class WEBNews_in : AbsNews {

   private DateTime _inDateTimeAdded = DateTime.MinValue;

   public string InDateTimeAdded {
       get {
           return Format(_inDateTimeAdded, " dd/MM/yyyy hh:mm:ss tt");
       }
       set {
           _inDateTimeAdded = DateTime.Parse(value);
       }
   }

   private DateTime _inDateTimeUpdated = DateTime.MinValue;

   public string InDateTimeUpdated {
       get {
           return Format(_inDateTimeUpdated, " dd/MM/yyyy hh:mm:ss tt");
       }
       set {
           _inDateTimeUpdated = DateTime.Parse(value);
       }
   }
} 
```

# exception-handling - 温莎城堡的 UsingFactoryMethod 中处理异常的正确方法是什么？

> ID：11999242
> 
> 赞同：2
> 
> 时间：2012-08-17T03:04:43.867
> 
> 标签：exception-handling, castle-windsor

我正在使用 Windor 教程中的 Nhibernate 持久性工具：

```
Kernel.Register(
    Component.For<ISessionFactory>()
        .UsingFactoryMethod(config.BuildSessionFactory)
        .LifeStyle.Singleton,
    Component.For<ISession>()
        .UsingFactoryMethod(k => k.Resolve<ISessionFactory>().OpenSession())
        .LifeStyle.PerWebRequest); 
```

有时我对 config.BuildSessionFactory 的调用会失败（可能是我的映射错误，或者我的连接字符串无效等等）。在调试器中，我可以看到 Nhibernate 异常被抛出。现在 Windsor 无法再解决我`ISession`的问题，因为工厂本身无法实例化。

问题是它似乎没有抱怨它。如果没有调试器，异常会被默默地丢弃，我的应用程序中唯一的症状是我所有的`ISession`依赖项都是突然的`null`. 处理异常的正确方法是`UsingFactoryMethod`什么？有什么方法可以告诉温莎在我的应用程序中冒泡这个例外吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:18:04.850

我可以看到 Castle 吃异常的唯一原因是会话是否作为属性注入，这使得 Castle 认为它是可选的。

这是我修复它的方法......我创建了一个激活器，当它无法设置属性的值时会引发异常：

```
public class StrictComponentActivator : DefaultComponentActivator
{
    public StrictComponentActivator(ComponentModel model, IKernelInternal kernel,
        ComponentInstanceDelegate onCreation,
        ComponentInstanceDelegate onDestruction)
        : base(model, kernel, onCreation, onDestruction) { }

    protected override void SetUpProperties(object instance, CreationContext context)
    {
        instance = ProxyUtil.GetUnproxiedInstance(instance);
        var resolver = Kernel.Resolver;
        foreach(var property in Model.Properties)
        {
            var value = ObtainPropertyValue(context, property, resolver);

            if(value != null)
            {
                var setMethod = property.Property.GetSetMethod();
                try
                {
                    setMethod.Invoke(instance, new[] { value });
                }
                catch(Exception ex)
                {
                    throw new ComponentActivatorException(
                        string.Format(
                            "Error setting property {1}.{0} " +
                            "in component {2}. " +
                            "See inner exception for more information. " +
                            "If you don't want Windsor to set this property " +
                            "you can do it by either decorating it with " +
                            "DoNotWireAttribute or via registration API.",
                            property.Property.Name,
                            instance.GetType().Name,
                            Model.Name),
                        ex, Model);
                }
            }
        }
    }

    private object ObtainPropertyValue(CreationContext context, PropertySet property, IDependencyResolver resolver)
    {
        if(property.Dependency.IsOptional == false ||
            resolver.CanResolve(context, context.Handler, Model, property.Dependency))
        {
            try
            {
                return resolver.Resolve(context, context.Handler, Model, property.Dependency);
            }
            catch(Exception e)
            {
                if(property.Dependency.IsOptional == false)
                {
                    throw;
                }
                Kernel.Logger.Warn(
                    string.Format("Exception when resolving optional dependency {0} on component {1}.",
                        property.Dependency, Model.Name), e);
            }
        }
        return null;
    }
} 
```

然后我配置了我的大部分组件`.Activator<StrictComponentActivator>()`

# mysql - MYSQL 解释使用 SELECT Count(x) 查询给出“不可能的 WHERE”

> ID：11999243
> 
> 赞同：0
> 
> 时间：2012-08-17T03:04:49.440
> 
> 标签：mysql, database, select, where

看来我在 SELECT 查询上得到了“不可能的 WHERE”。我在下面发布了两个查询，它们在子查询中有所不同。这些查询所做的是在更新计数之前检查用户之前是否保存过一次内容。我将 SELECT 用于测试目的，但实际查询将使用 UPDATE：

```
UPDATE articles SET article_count = article_count+1 
WHERE id = 2343243 AND (
    SELECT COUNT(*) 
    FROM posts as p
    WHERE p.post_id = 2343243 AND p.user_id = 3
) = 1; 
```

以下两个查询是我用来测试数据是否在表中的查询（仅用于测试）：

```
EXPLAIN 
SELECT a.id 
FROM articles as a 
WHERE a.id = 2343243 AND (
    SELECT COUNT(*) 
    FROM posts as p
    WHERE p.post_id = a.id AND p.user_id = 3
) = 1; 
```

*查询 1*`Impossible WHERE`在 EXPLAIN 中返回。查询 #2 的 select_type 是 SUBQUERY。

```
EXPLAIN 
SELECT a.id 
FROM articles as a 
WHERE a.id = 2343243 AND (
    SELECT COUNT(*) 
    FROM posts as p
    WHERE p.post_id = 2343243 AND p.user_id = 3
) = 1; 
```

*查询 2*`Impossible WHERE noticed after reading const tables`在 EXPLAIN 中返回。*Query 2*的select_type是 DEPENDENT SUBQUERY。

**问题：**关于如何使这不是不可能的 WHERE 查询的任何想法？而且，哪个会更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:00:37.177

在 Mysql.com 上阅读有关 Impossible WHERE 的信息后，在查询中使用 WHERE 1 = 1 这样的约束并不是一个好主意：

> 因为这个条件永远不可能为真，所以 EXPLAIN 语句将显示单词 Impossible WHERE。非正式地，我们 MySQL 说 WHERE 已经被优化掉了。

Mysql.com：http://dev.mysql.com/doc/internals/en/optimizer-eliminating-dead-code.html [_](http://dev.mysql.com/doc/internals/en/optimizer-eliminating-dead-code.html)

我决定放弃该查询，转而使用我编写的新查询，该查询利用主查询和子查询的索引，这是一种更快的解决方案，而且似乎不太复杂：

```
UPDATE articles 
SET article_count = IF (
    (SELECT count(*) FROM posts WHERE post_id = 2343243 AND user_id = 3) = 1, article_count+1, article_count) 
WHERE id = 2343243; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T03:08:16.410

不使用实际常量的准备好的语句可能会有所帮助（如果 mysql 使用您正在测试的实际常量来根据数据声明不可能）

# asp.net - 奇怪的 wcf 休息错误

> ID：11999244
> 
> 赞同：0
> 
> 时间：2012-08-17T03:05:07.710
> 
> 标签：asp.net, wcf, rest

我将首先说我是 wcf 的新手并休息。这是我创建了一个 wcf 服务的情况，该服务返回一个包含字段和订单对象集合的对象（人员）。当我创建一个实例时，对象和订单集合按预期填充

当我通过返回 json 的 rest 调用调用相同的服务时，代码失败。如果我删除填充对象的代码，它就可以工作。json 显示和空的订单集。

```
<OperationContract()> _
<WebGet(UriTemplate:="GetPerson/{user}", ResponseFormat:=WebMessageFormat.Json)> _
Function GetPerson(ByVal User As String) As Budget 
```

失败的行看起来像这样

```
lobjPerson.OrderList.Add(order) 
```

订单列表已实例化，并且可以工作，但在通过返回 json 的 rest 调用时不起作用

我在浏览器中得到的错误是“错误是 kcferrorDomainWinsock:10054”。如果我用网络检查器查看，我似乎看不到错误。希望这能为某人敲响警钟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:35:54.343

我解决了我的问题，从我的收藏从 arraylist 切换到 list(of t)。我仍在思考为什么会这样，有人可以解释一下吗？剩下的第二个问题是如何调试对 wcf 的休息调用？任何人？

# boost - Boost 的 bjam 正在构建完成之前运行测试

> ID：11999249
> 
> 赞同：3
> 
> 时间：2012-08-17T03:05:44.403
> 
> 标签：boost, boost-python, bjam, boost-build

我正在使用 bjam 构建一个相当简单的 Boost.Python 扩展。问题是事情发生的顺序对我来说没有意义，我不知道如何解决它。

我的项目由一个带有 Jamroot 的根目录和一个带有 Jamfile、C++ 文件、头文件和 Python 脚本的项目子目录组成。

在根目录中，我有一个看起来像这样的 Jamroot 文件，主要是从示例和文档中拼凑而成的。它与项目的 Jamfile 是分开的，因为我实际上想在其他子目录中存在的几个项目中共享它。

```
import python ;

if ! [ python.configured ]
{
    ECHO "notice: no Python configured in user-config.jam" ;
    ECHO "notice: will use default configuration" ;
    using python ;
}

use-project boost
  : ./boost ;

project
  : requirements <library>/boost/python//boost_python ;

# A little "rule" (function) to clean up the syntax of declaring tests
# of these extension modules.
rule run-test ( test-name : sources + )
{
    import testing ;
    testing.make-test run-pyd : $(sources) : : $(test-name) ;
}

build-project hello_world ;
# build-project [[other projects]]... ; 
```

然后我有一个包含我的“hello_world”项目的子目录（更改名称以保护无辜者），其中包含一个 Jamfile：

```
PROJECT_NAME = hello_world ;

import python ;

python-extension interpolation_ext :
  $(PROJECT_NAME).cpp
:
  <define>FOO
;

# Put the extension and Boost.Python DLL in the current directory, so that running script by hand works.
install convenient_copy
  : $(PROJECT_NAME)_ext
  : <install-dependencies>on <install-type>SHARED_LIB <install-type>PYTHON_EXTENSION
    <location>.
  ;

# Declare test targets
run-test $(PROJECT_NAME) : $(PROJECT_NAME)_ext test_$(PROJECT_NAME)_ext.py ; 
```

'convenient_copy' 确实很方便，但不幸的是，我没有找到太多关于它的文档。

无论如何，我的想法是，当我在“hello_world”项目目录中时，我会更改代码并定期输入“bjam”。这具有构建 Python 扩展然后运行 ​​test_hello_world_ext.py 文件的效果，该文件执行“导入 hello_world_ext”以测试扩展是否正确构建，然后是一堆相当琐碎的单元测试。如果它们都通过，则 bjam 报告成功。

*问题*似乎是有时 bjam 在运行“convenient_copy”规则**之前**运行 Python 测试，这意味着它在扩展的先前版本上执行测试，然后用新版本覆盖它。这意味着我经常不得不运行 bjam 两次。事实上，bjam 第二次知道某事已过时，因为它确实做了某事。第三次和随后的时间它什么都不做，直到我进行进一步的源更改。当依赖项不正确时，这就像经典的双重问题。

这样做的主要问题是它通常会导致成功构建失败（因为现有的扩展很糟糕），而其他时候它会显示错误的构建成功。实际上，我花了好几个星期才注意到这种行为，大约在同一时间我以为我要疯了，也许不是巧合……

它似乎在 Linux 上比在 OS X 上更频繁地执行此操作，但我并不完全确定。虽然感觉是这样，但我在两种环境之间分配的时间相当平等。

另外，我是唯一一个发现 bjam 的“jamfile”语法完全混乱的人吗？引擎盖下发生了很多我根本不理解的事情，或者可以找到足够的文档。我很乐意改用 make 或 SCons，但由于这里和那里的示例损坏，我无法让它们工作。真正让我感到困惑的是，bjam 在处理我的文件之前如何构建许多其他目标，我认为这会使编写 makefile 变得非常棘手？由于我对 GNU Make 和 SCons 非常熟悉，*因此值得我花时间放弃 bjam 来使用其中之一吗？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:35:24.350

在 jamfile 中声明目标的顺序并不能确定构建目标的顺序。使用依赖项来控制构建顺序。它会在这里完成：

更改`run-test`规则以接受需求参数：

```
rule run-test ( test-name : sources + : requirements * )
{
    import testing ;
    testing.make-test run-pyd : $(sources) : $(requirements) : $(test-name) ;
} 
```

修改`$(PROJECT_NAME)`目标声明以添加对 的依赖项要求`convenient_copy`：

```
run-test $(PROJECT_NAME) : $(PROJECT_NAME)_ext test_$(PROJECT_NAME)_ext.py : <dependency>convenient_copy ; 
```

关于 jamfile 语法等部分：

如果你对 Boost.Build 做任何事情，除了一些非常琐碎的事情，你绝对应该阅读它的[用户手册](http://www.boost.org/doc/display_build.php/boost-build/boost-build/doc/userman.pdf)。我个人的经验是，在从头到尾读完之后，我每天都会选择 Boost.Build 而不是其他构建系统。YMMV

# ruby-on-rails - Rails 3：Mongoid 验证问题

> ID：11999254
> 
> 赞同：0
> 
> 时间：2012-08-17T03:06:06.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, activerecord, activemodel

使用 Mongoid，我正在尝试验证提交表单上的 :code 输入，以确保他们使用的是已存储在数据库中的正确代码。大约有 2000 多个代码，因此辅助方法数组集合不可行。

**做这个的最好方式是什么？**

我正在考虑进行包含验证，如下所示：

```
class Request
include Mongoid::Document 
field :code, type: String      
validates :code, :presence => true, 
                 :inclusion => { :in => proc { Listing.all_codes } }
end 
```

然后是具有所有存储代码的模型，如下所示：

```
class Listing
include Mongoid::Document
field :code, type: String 

  def self.all_codes
    where(:code => exists?) # <--- this is broken
  end
end 
```

但我似乎无法让它以我想要的方式运行。任何反馈将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T03:36:48.323

您的请求模型看起来不错。但是 Listing.all_codes 需要返回一个只有代码的数组。所以：

```
class Listing
  include Mongoid::Document
  field :code, type: String 

  def self.all_codes
    only(:code).map(&:code)
  end
end 
```

# javascript - HTML5 将外部内容加载到 div 中并使用 pushState()？

> ID：11999259
> 
> 赞同：1
> 
> 时间：2012-08-17T03:07:08.040
> 
> 标签：javascript, jquery, html

我有一个主页“index.html”。这个主页是网站的入口，它是用 HTML5 完成的。该网站还有其他页面：

“about.html”、“work.html”、“portfolio.html”、“contact.html”

所以所有这些页面都有一个名为“contentDiv”的div，它有相应的副本/文本。用户通过“index.html”进入网站，如果用户点击以下导航链接之一：

关于 | 工作 | 投资组合 | 接触

“index.html”页面使用 JQuery 的 load() 调用加载点击页面的“contentDiv”的内容，然后使用动画在加载的 div 中滑动。

站点是向后兼容的，因此如果禁用 Javascript，则用户将被带到点击的页面，而不是让“index.html”通过 load() 调用加载内容。

顺便说一句，导航链接的编码如下：

```
<a href="about.html" title='About'>About</a> 
```

一旦“index.html”加载了请求的内容，通过使用 pushState()，URL 就会更新。因此，如果用户单击“关于”链接，则 pushState() 会将 URL 更新为：

“http://www.abc.com/about.html”

我没有在 href 标签中插入任何哈希的原因是，我希望网站有一个后备，以防万一 Javascript 被禁用。这样，用户可以被引导到请求的页面（'about.html'）而不是“index.html”。

到目前为止，一切都按预期运行，但问题就在这里。当用户在“index.html”上并单击任何部分（例如“about.html”）时，将加载内容并通过 pushState() 更新 URL。所以现在 URL 是“http://www.abc.com/about.html”。现在，如果用户刷新页面（“index.html”），加载“about.html”而不是“index.html”执行 load() 调用。

假设我像这样编写导航 href 标签：

```
<a href="#about" title="about">About</a> 
```

然后 URL 最终会在其中包含一个哈希值。如果我将链接“http://www.abc.com/#about”复制并通过电子邮件发送给用户，并且如果用户尝试通过禁用 javascript 的浏览器打开链接，则用户将无法访问“关于.html”，因为链接只有“#about”而不是“about.html”。

我正在尝试做的确实是可行的，我只是不知道如何处理它。如果有人能在这方面帮助我，那就太好了。

原谅我，这么长的描述。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T20:57:51.210

我最终将所有导航 href 设置为“”。然后在 document.ready() 函数上设置 hrefs 值。

```
$('a[rel=nav]').attr('href', ''); 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T03:29:59.490

此代码将实现您需要做的事情并支持禁用 javascript 的用户。

```
$('a').click(function() {
  window.location.hash = $(this).attr('src');
  return false;
} 
```

如果您单击关于链接，您的网址将类似于[http://www.yoursite.com/#about.html ，并且在您刷新时它们会起作用。](http://www.yoursite.com/#about.html)如果您想了解有关制作 ajax 网站的更多信息，我建议您访问此博客[Css-Tricks.com](http://css-tricks.com/video-screencasts/85-best-practices-dynamic-content/)

# android - 检查 MenuItem 是否在 ActionBar 中溢出

> ID：11999260
> 
> 赞同：4
> 
> 时间：2012-08-17T03:07:28.767
> 
> 标签：android, overflow, actionbarsherlock, menuitem

问题：如果 MenuItem（或哪些 MenuItems）在 ActionBar 的溢出菜单中，有没有办法检查代码？我正在使用 ActionBarSherlock

我需要这个的原因是，如果有空间，我有一堆图标会显示在 ActionBar 中。我有一个全息黑暗主题，所以图标是为了适应它。

当菜单项被放入溢出菜单时，我的问题就出现了。在 Pre-Honeycomb 设备上，这意味着它们将在用户按下菜单按钮时显示。这个菜单的背景与我的 ActionBar 完全相反，我想要一组不同的图标来适应它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:37:47.920

我可能已经找到了解决这个问题的方法：在设计指南（[此处](http://developer.android.com/design/patterns/actionbar.html#elements)）中，有一个表格显示了根据 dip 的宽度显示了多少操作栏项。

基于该表，我编写了以下代码：

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    MenuItem search = menu.findItem(R.id.menu_search);

    // Get width in dp
    DisplayMetrics metrics = new DisplayMetrics();
    Display display = getWindowManager().getDefaultDisplay();
    display.getMetrics(metrics);
    float logicalDensity = metrics.density;
    int dp = (int) (display.getWidth() / logicalDensity + 0.5);

    if (dp < 360) { // only two icons
        search.setIcon(R.drawable.ic_menu_search);  // Show menu icon for pre-3.0 menu
    } else {
        search.setIcon(R.drawable.ic_action_search); // Show action bar icon for action bar
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T01:24:25.547

我发布了一个类似问题的答案，可以解决您的问题，请参阅：

[https://stackoverflow.com/a/18884872/1299562](https://stackoverflow.com/a/18884872/1299562)

基本上您可以使用 onPrepareOptionsMenu 删除非操作项图标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-23T10:56:00.290

您可以使用反射。将以下代码放在一个类中，然后调用`Foo.isInOverflow(yourMenuItem);`

```
protected static final String SUPPORTCLASS = "android.support.v7.internal.view.menu.MenuItemImpl";

protected static final String NATIVECLASS = "com.android.internal.view.menu.MenuItemImpl";

protected static Method sSupportIsActionButton;

protected static Method sNativeIsActionButton;

static {
    try {
        Class<?> MenuItemImpl = Class.forName(NATIVECLASS);
        sNativeIsActionButton = MenuItemImpl.getDeclaredMethod("isActionButton");
        sNativeIsActionButton.setAccessible(true);
    } catch (Exception ignored) {
    }
    try {
        Class<?> MenuItemImpl = Class.forName(SUPPORTCLASS);
        sSupportIsActionButton = MenuItemImpl.getDeclaredMethod("isActionButton");
        sSupportIsActionButton.setAccessible(true);
    } catch (Exception ignored) {
    }
}

// --------------------------------------------------------------------------------------------

/**
 * Check if an item is showing (not in the overflow menu).
 * 
 * @param item
 *            the MenuItem.
 * @return {@code true} if the MenuItem is visible on the ActionBar.
 */
public static boolean isActionButton(MenuItem item) {
    switch (item.getClass().getName()) {
    case SUPPORTCLASS:
        try {
            return (boolean) sSupportIsActionButton.invoke(item, (Object[]) null);
        } catch (Exception e) {
            // fall through
        }
    case NATIVECLASS:
        try {
            return (boolean) sNativeIsActionButton.invoke(item, (Object[]) null);
        } catch (Exception e) {
            // fall through
        }
    default:
        return true;
    }
}

/**
 * Check if an item is in the overflow menu.
 * 
 * @param item
 *            the MenuItem
 * @return {@code true} if the MenuItem is in the overflow menu.
 * @see #isActionButton(MenuItem)
 */
public static boolean isInOverflow(MenuItem item) {
    return !isActionButton(item);
} 
```

注意：您需要将以下行添加到您的 proguard 配置文件中，以便反射在生产构建中起作用：

```
-keep public class android.support.v7.internal.view.menu.** { *; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-29T06:39:01.423

如果您使用的是，`Toolbar`那么您可以在其中创建一个简单的扩展`Kotlin`或静态函数，`Java`以查找工具栏菜单项是在工具栏上可见还是隐藏在溢出选项菜单中。

这是一个示例函数，它的用途：

```
fun Toolbar.isMenuItemOverflowing(@IdRes id: Int): Boolean {
    return this.findViewById<View>(id) == null
} 
```

使用工具栏实例的功能： -

```
toolbar.isMenuItemOverflowing(R.id.action_search) 
```

# php - Wordpress 页面模板未呈现

> ID：11999262
> 
> 赞同：1
> 
> 时间：2012-08-17T03:08:28.210
> 
> 标签：php, wordpress

我们的博客页面应该是这样的：[http ://livedemo00.template-help.com/wordpress_33821/?page_id=174](http://livedemo00.template-help.com/wordpress_33821/?page_id=174)

然而它最终看起来像这样 - 完全是空的！

尽管页面主题设置正确并且模板文件包含以下代码，但还是会出现这种情况：

```
 <?php
/**
 * Template Name: Blog
 */

get_header(); ?>
<div class="box clearfix color2">
    <div id="content" class="three_fourth">

  <?php
  $temp = $wp_query;
  $wp_query= null;
  $wp_query = new WP_Query();
  $wp_query->query('showposts=5'.'&paged='.$paged);
  ?>
    <?php while ($wp_query->have_posts()) : $wp_query->the_post(); ?>
    <article id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
      <header>
        <h2><a href="<?php the_permalink() ?>" title="<?php the_title(); ?>" rel="bookmark"><?php the_title(); ?></a></h2>
        <div class="post-meta">
          <div class="fleft">Posted in: <?php the_category(', ') ?> | <time datetime="<?php the_time('Y-m-d\TH:i'); ?>"><?php the_time('F j, Y'); ?> at <?php the_time() ?></time> , by <?php the_author_posts_link() ?></div>
          <div class="fright"><?php comments_popup_link('No comments', 'One comment', '% comments', 'comments-link', 'Comments are closed'); ?></div>
        </div><!--.post-meta-->
      </header>
      <?php echo '<div class="featured-thumbnail">'; the_post_thumbnail(); echo '</div>'; ?>
      <div class="post-content">
        <div class="excerpt"><?php $excerpt = get_the_excerpt(); echo my_string_limit_words($excerpt,50);?><a href="<?php the_permalink() ?>" class="link-more">Read more</a></div>
      </div>
    </article>

  <?php endwhile; ?>

  <?php if ( $wp_query->max_num_pages > 1 ) : ?>
    <nav class="oldernewer">
      <div class="older">
        <?php next_posts_link('&laquo; Older Entries') ?>
      </div><!--.older-->
      <div class="newer">
        <?php previous_posts_link('Newer Entries &raquo;') ?>
      </div><!--.newer-->
    </nav><!--.oldernewer-->
  <?php endif; ?>

  <?php $wp_query = null; $wp_query = $temp;?>

</div><!--#content-->
<?php get_sidebar(); ?>
</div>
<?php get_footer(); ?> 
```

不幸的是，这个主题没有任何文档，所以我不得不找到自己的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:38:00.970

实际上我已经在 WordPress 中遇到过这种情况。这不是你的代码的错。可能是 WordPress 错误。

尝试更改您的页面名称一次。喜欢

```
 <?php
/**
 * Template Name: Blog_new
 */
?> 
```

并再次登录并检查它是否显示新的自定义页面选项。

# hadoop - 如何处理猪的溢出内存

> ID：11999268
> 
> 赞同：2
> 
> 时间：2012-08-17T03:09:20.003
> 
> 标签：hadoop, apache-pig

我的代码是这样的：

```
pymt = LOAD 'pymt' USING PigStorage('|') AS ($pymt_schema);

pymt_grp = GROUP pymt BY key

results = FOREACH pymt_grp {

      /*
       *   some kind of logic, filter, count, distinct, sum, etc.
       */
} 
```

但现在我发现很多这样的日志：

```
org.apache.pig.impl.util.SpillableMemoryManager: Spilled an estimate of 207012796 bytes from 1 objects. init = 5439488(5312K) used = 424200488(414258K) committed = 559284224(546176K) max = 559284224(546176K) 
```

实际上我找到了原因，主要是因为有一个“热”键，比如 key=0 作为 ip 地址，但我不想过滤这个键。有什么解决办法吗？我在我的 UDF 中实现了代数和累加器接口。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T10:03:43.700

对于严重偏斜的数据或嵌套在 FOREACH 中的 DISTINCT，我遇到了类似的问题（因为 PIG 会在内存中区分）。解决方案是以 FOREACH 中的 DISTINCT 为例，请参阅我对[如何在 PIG latin 中优化分组语句的回答？](https://stackoverflow.com/questions/10732456/how-to-optimize-a-group-by-statement-in-pig-latin/11265842#11265842)

如果您不想在 SUM 和 COUNT 之前执行 DISTINCT，我建议您使用 2 GROUP BY。Key 列上的第一个组加上另一列或随机数 mod 100，它充当 Salt（将单个 key 的数据传播到多个 Reducer）。比仅在 Key 列上的第二个 GROUP BY 并计算组 1 COUNT 或 Sum 的最终 SUM。

前任：

```
inpt = load '/data.csv' using PigStorage(',') as (Key, Value);
view = foreach inpt generate Key, Value, ((int)(RANDOM() * 100)) as Salt;

group_1 = group view by (Key, Salt);
group_1_count = foreach group_1 generate group_1.Key as Key, COUNT(view) as count;

group_2 = group group_1_count by Key;
final_count = foreach group_2 generate flatten(group) as Key, SUM(group_1_count.count) as count; 
```

# php - Netbeans 切换只读

> ID：11999270
> 
> 赞同：4
> 
> 时间：2012-08-17T03:09:23.280
> 
> 标签：php, netbeans, netbeans-7

我正在工作，并以某种方式将其中一个文件切换为只读模式。我似乎可以找到的唯一迹象是我无法保存文件（手动或通过 Subversion 提交更新时。）

我相当确定我调整了一些设置并且没有修改 Netbeans 之外的文件设置。

我可能遗漏了一些相当明显的东西，但是我该如何改回来呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-03-07T16:18:41.790

如果 @CODE 的解决方案不起作用，请尝试更改文件夹/文件的访问权限。在我的mac中，我做了同样的事情来修复它。

```
chmod -R 777 <folder/file path> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T12:31:54.123

关闭并重新打开 Netbeans，我之前遇到过这个特定问题，重新启动 IDE 为我解决了这个问题。

Netbeans 有时会出问题。当您遇到一个您认为不是您造成的奇怪问题时，请始终关闭并重新打开。我遇到了一些不同的问题，这实际上为我解决了问题。

# django - 为 Django 模型指定新模板

> ID：11999275
> 
> 赞同：0
> 
> 时间：2012-08-17T03:11:05.593
> 
> 标签：django, django-models, django-admin, django-templates, django-views

我一直在网上寻找解决方案，但似乎找不到有效的解决方案。

我正在尝试覆盖特定模型的默认“索引”页面。我知道您可以像这样更改项目的 url.py 文件夹中的 URL 设置：

```
url(r'^items/(?P<itemId>\d+)/$', 'items.views.itemDetail') 
```

虽然上面的 URL 映射工作正常并且 itemDetail(request) 方法被正确调用，但像这样：

```
url(r'^admin/homepage/$', 'homepage.views.index'), 
```

似乎不起作用。我知道这行不通，因为这条线：

```
url(r'^admin/', include(admin.site.urls)) 
```

除非我直接转到管理员/主页，否则每次尝试更改上述行的模式都会导致错误。所以默认的管理页面消失了。我只是想将默认索引模板更改为不同的东西。没有将 URL 从 XXX/admin/homepage 完全更改为其他内容，我不知道如何解决这个问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:42:01.250

我认为只要您的自定义 url 定义出现在 urlconf (urls.py) 中实际管理员的定义之前，它就应该起作用：

```
urlpatterns = patterns('',      
    ...    
    url(r'^admin/homepage/$', 'homepage.views.index'),
    ...
    url(r'^admin/', include(admin.site.urls)),
    ...
) 
```

# javascript - 仅当条件为真时才向 asp.net 按钮添加 onclientclick 确认？

> ID：11999278
> 
> 赞同：0
> 
> 时间：2012-08-17T03:11:22.300
> 
> 标签：javascript, jquery, asp.net, confirm

当对可编辑 GridView 中的文本框进行更改时，我有一个 jQuery 函数设置隐藏字段值。表格上有两个按钮；一个保存更改，另一个使用新值执行不同的过程。如果首先按下第二个按钮，我希望出现确认，告诉用户更改未保存。单击“是”将保存更改并运行该按钮的过程。单击“否”不执行任何操作。我不能使用“return confirm('')”，因为这会一直显示确认，即使没有检测到更改。仅当隐藏字段具有值（在本例中为“已更改”）时，才应显示确认。我尝试了各种解决方案，但收到有关函数不存在或其他空对象的错误。

**以下检测更改并将隐藏字段值设置为“已更改”：**

```
$(function () {
    $(".gv input.CAIFormat").bind('blur', function (e) {
         $(this).val(CommaFormatted($(this).val()));
         var change = $get('ctl00_BodyContentPlaceHolder_TabContainer1_tabSpaceDriver_hidSummaryTableChanged');
         change.value = "changed";
    });
}); 
```

**如果隐藏字段有值，asp.net 按钮应显示确认：**

```
<asp:Button ID="btnSaveSDDepartmet" runat="server" Text="Update Departments" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:34:37.413

使用 jQuery 将事件绑定到按钮，检查值，然后检查输入的值。

仅供参考 - 开始使用`on`绑定事件，`bind`从 jQuery 1.7 开始已弃用（请参阅[http://api.jquery.com/bind/](http://api.jquery.com/bind/)）

```
$("btnSaveSDDepartmet").on('click', function (e) {
     var change = $get('ctl00_BodyContentPlaceHolder_TabContainer1_tabSpaceDriver_hidSummaryTableChanged');
     if (change.value == "changed") {
         if (!window.confirm("Changes not saved -- continue?")){
             e.preventDefault();
             return false;
         }
     }
}); 
```

**文档** * `jQuery.on`- [http://api.jquery.com/on/](http://api.jquery.com/on/) * `window.confirm`- [https://developer.mozilla.org/en-US/docs/DOM/window.confirm](https://developer.mozilla.org/en-US/docs/DOM/window.confirm)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T14:27:07.280

**以下工作：**

```
<asp:Button ID="btnSaveSDDepartmet" runat="server" Text="Update Departments" CssClass="CAIButton" OnClick="btnSaveSDDepartmet_Click" OnClientClick="if (!ConfirmMsg()) { return false; }" />

        function ConfirmMsg() {
        var obj = $get('ctl00_BodyContentPlaceHolder_TabContainer1_tabSpaceDriver_hidSummaryTableChanged');
        if (obj.value == "changed")
            return confirm("Data has been changed, but not saved. Do you want to save and continue?");
        else
            return false;
    } 
```

# php - 如何删除文本中的 iframe src？

> ID：11999281
> 
> 赞同：-1
> 
> 时间：2012-08-17T03:11:34.983
> 
> 标签：php

> **可能重复：**
> [删除 iframe 但无法删除标签 p 时出错](https://stackoverflow.com/questions/11999584/error-when-remove-a-iframe-but-cant-remove-tag-p)

我有一个示例代码：

```
$content = '<p><iframe width="640" scrolling="no" height="150" frameborder="1" marginheight="0" marginwidth="0" src="http://test.html"></iframe></p><p>Hello world</p>';
$text = preg_replace('/<p>\s*(<iframe src="http://test.html" .*>*.<\/iframe>)\s*<\/p>/iU', '', $content);
echo $text; 
```

如何修复以删除此 iframe 结果是：`<p>Hello world</p>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:36:52.253

```
$text = preg_replace('|<iframe [^>]*(src="http://test.html")[^>]*|', '', $content); 
```

# php - PHP 即时消息更新

> ID：11999283
> 
> 赞同：0
> 
> 时间：2012-08-17T03:12:47.140
> 
> 标签：php, javascript, ajax

我正在创建一个包含以下部分的消息传递系统：

1.  一个发送用户消息的表单，在提交表单后，PHP 将数据插入到名为 userMessages 的 MySQL 表中。

2.  执行 MySQL 查询的 PHP 页面从 userMessages 中选择所有并显示所有消息。

我遇到的问题是使这个消息传递系统具有*即时*消息功能。即我从一个表单提交数据，它会立即出现在用户消息页面上，而*无需*手动刷新页面。

我确实有每 20 秒刷新一次页面的临时解决方案。但是有没有办法只在提交新消息时更新消息页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:12:31.020

将数据推送到网页非常困难，正如 Dan Grossman 所说，您会想阅读那篇 wiki 文章。如果您不介意相当高的服务器和数据库负载，那么每隔几秒进行一次 AJAX 轮询将是一个好主意。ama2 也是正确的——PHP 本身并不是最好的系统，使用 node.js 等持续运行的应用程序服务器可能会更有效。

# amazon-s3 - AWS s3 标准与减少冗余存储？

> ID：11999285
> 
> 赞同：2
> 
> 时间：2012-08-17T03:13:04.417
> 
> 标签：amazon-s3, amazon-web-services, storage, redundancy

有谁知道使用这两个 AWS s3 存储选项对数据丢失进行的任何实际分析？我从 AWS 文档（通过[Quora](http://www.quora.com/Amazon-S3/Whats-the-exact-difference-between-Amazon-S3s-99-99-and-99-99999-reliability-options#)）知道一个是 99.9999999% 的保证，另一个是 99.99% 的保证，但我正在寻找来自非 AWS 来源的数据。

轶事或更彻底的东西都会很棒。如果这不是此问题的正确 SE 站点，我深表歉意。随意建议一个迁移它的地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T10:00:45.150

我想这取决于你存储的数据是否真的需要 99.999999999% 的持久性……</p>

如果您将数据副本保存在本地，并且只是将 S3 用作存储 AWS 基础设施中的服务正在积极访问的数据的便利位置，那么 RRS 可能是您的正确选择：)

就我而言，我将新文件保持在正常的持久性级别，直到我创建本地备份然后将它们移动到 RRS，这可以为您节省不少钱。

# select - jqgrid editGridRow 每个单元格的选择列表

> ID：11999288
> 
> 赞同：0
> 
> 时间：2012-08-17T03:13:37.400
> 
> 标签：select, dynamic, jqgrid, modal-dialog

就我而言，我希望用户通过单击单元格末尾的“>”类型图像来获取值，然后打开一个模式窗口。在模态窗口中，一种将选定值传递回单元格的动态方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:57:57.963

您应该查看此[答案](https://stackoverflow.com/questions/3810579/jqgrid-custom-edit-dialog)..而不是自定义按钮，您可以在每个单元格中使用图像按钮，在此答案中，他在寻呼机中添加了自定义按钮，但是您可以像[这样](https://stackoverflow.com/questions/11743983/adding-a-custom-button-in-row-in-jqgrid/11744722#11744722)在每个单元格中使用自定义按钮。

现在添加图像按钮后，在单击功能上，您可以使用 getCol 获取列的值并使用 jQuery 像[这样](https://stackoverflow.com/questions/3587480/jquery-modal-dialog-and-jqgrid)打开一个对话框，然后您可以使用 jqGrid 的 setCol 属性来设置列的值。

现在尝试使用这种方法编写代码。如果您遇到任何困难，请告诉我们。

# objective-c - 如何为代码添加保护，使免费版和完整版不会轻易被黑客入侵？

> ID：11999289
> 
> 赞同：0
> 
> 时间：2012-08-17T03:13:58.487
> 
> 标签：objective-c, ios

在 iOS 上，如果有完整版和免费版的应用，但它只是由一个简单的控制

```
isFullVersion = YES;   // or NO 
```

在代码中，似乎将程序从免费版转换为完整版，黑客可能只更改一个字节。（并且可以通过定位该字节在应用程序的未来更新中轻松被黑客入侵）。有没有一种已知的方法可以降低代码被黑客入侵的可能性？例如，如果一`ViewController.m`开始就添加了一个虚拟方法定义，那么免费版会返回数字 1，而完整版会循环 1 到 10，然后将数字相加返回，现在我们的代码将编译成几乎相同，但完整版将在文件开头有“额外字节” `.app`，所以至少完整版和免费版不会仅仅相差一个字节？

这个问题旨在将编码视为相关的，这样代码就不会那么容易被黑客入侵。

# php - jQuery AJAX POST 到 PHP 文件以更新数据库未更新

> ID：11999290
> 
> 赞同：0
> 
> 时间：2012-08-17T03:14:00.093
> 
> 标签：php, jquery, mysql, ajax, post

我正在尝试构建一个小型 CMS 系统，我想使用 AJAX 和 jQuery 来实现。

如果我不使用 AJAX 代码可以工作，我不知道为什么数据没有被正确传递。AJAX 成功返回“成功”

任何帮助表示赞赏。

这是我的Javascript：

```
$(document).ready(function(){
    var aboutContent = $('#aboutContent').attr('value');
    $('#aboutUpdate').submit(function() {
        $.ajax({
            type: "POST",
            url: "scripts/update.php",
            data: "aboutUpdate="+aboutContent,
            beforeSend: function(){ $('#aboutStatus').fadeIn(250).css('color', '#017c04').html('processing...'); },
            success: function(){ $('#aboutStatus').fadeIn(250).css('color', '#017c04').html('Saved Successfully!').delay(500).fadeOut(250); },
            error: function(){ $('#aboutStatus').fadeIn(250).css('color', '#ff464a').html('An error occurred!').delay(500).fadeOut(250); }
        });
        return false;
    });
}); 
```

这是我的 HTML：

```
<?
$query = "SELECT * FROM pageContent WHERE page = 'about'";
$result = mysql_query($query);
while($rows = mysql_fetch_array($result)){
?>
    <div class="pageContent">
        <h2>About</h2>
        <form id="aboutUpdate" method="post">
        <textarea class="editor" id="aboutContent" cols="50" rows="20"><? echo $rows['content']; ?></textarea>
        <input type="submit" value="Save Now"><span class="updateStatus" id="aboutStatus"></span>
        </form>
    </div>
<?
}
?> 
```

这是 PHP (scripts/update.php)：

```
$aboutContent = mysql_real_escape_string($_POST['aboutUpdate']);
if(isset($_POST['aboutUpdate'])){
    $query="UPDATE pageContent SET content='$aboutContent' WHERE page='about'";
    $result=mysql_query($query)or die(mysql_error());
    if($result){
        echo "Success";
    }
    else{
        echo "Update Error";
    }
}
else{
    header("location:http://google.com");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:41:27.097

修复了问题。方法如下：

首先在 TEXTAREA 我需要指定属性

```
name="aboutUpdate" 
```

所以 PHP isset 可以提取数据。

其次，我注意到提交时有一个变量“未定义”。

```
var aboutContent = $('#aboutContent').attr('value'); 
```

这是工作的Javascript：

```
$('#aboutUpdate').submit(function() {
    $.ajax({
        type: "POST",
        url: "scripts/update.php",
        data: { aboutUpdate: $('#aboutContent').attr('value') },
        beforeSend: function(){
            $('#aboutStatus').fadeIn(250).css('color', '#017c04').html('processing...');
        },
        success: function(){
            $('#aboutStatus').fadeIn(250).css('color', '#017c04').html('Saved Successfully!').delay(2500).fadeOut(250);
        },
        error: function(){
            $('#aboutStatus').fadeIn(250).css('color', '#ff464a').html('An error occurred!').delay(2500).fadeOut(250);
        }
    });
    return false;
}); 
```

HTML：

```
<?
$query = "SELECT * FROM pageContent WHERE page = 'about'";
$result = mysql_query($query);
while($rows = mysql_fetch_array($result)){
?>
    <div class="pageContent">
        <h2>About</h2>
        <form id="aboutUpdate" method="post">
        <textarea class="editor" id="aboutContent" name="aboutUpdate" cols="50" rows="20"><? echo $rows['content']; ?></textarea>
        <input type="submit" value="Save Now"><span class="updateStatus" id="aboutStatus"></span>
        </form>
    </div>
<?
}
?> 
```

PHP更新.php：

```
$aboutContent = mysql_real_escape_string($_POST['aboutUpdate']);
if(isset($_POST['aboutUpdate'])){
    $query="UPDATE pageContent SET content='".$aboutContent."' WHERE page='about'";
    $result=mysql_query($query)or die(mysql_error());
    if($result){
        echo "Success";
    }
    else{
        echo "Update Error";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T03:25:04.563

试试你的 Ajax 函数，如下所示：

```
 $.ajax({
        type: "POST",
        url: "scripts/update.php",
        data: { aboutUpdate: aboutContent },
        beforeSend: function(){ $('#aboutStatus').fadeIn(250).css('color', '#017c04').html('processing...'); },
        success: function(){ $('#aboutStatus').fadeIn(250).css('color', '#017c04').html('Saved Successfully!').delay(500).fadeOut(250); },
        error: function(){ $('#aboutStatus').fadeIn(250).css('color', '#ff464a').html('An error occurred!').delay(500).fadeOut(250); }
    }); 
```

注意 POST 数据行的变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T10:32:01.453

绝对可以肯定，这样`data: "aboutUpdate="+aboutContent`你发送的东西是完全错误的。

它应该是`data: {aboutUpdate: aboutContent}`

另外我不确定，那个 textarea 实际上有属性值。尝试

```
$('#aboutContent').val() 
```

或者

```
$('#aboutContent').text() 
```

# java - Java字符串搜索期间突然变慢和java.lang.OutOfMemoryError

> ID：11999292
> 
> 赞同：1
> 
> 时间：2012-08-17T03:14:16.000
> 
> 标签：java, string, search, memory, java.util.scanner

我正在编写一个用于在 RNA 序列中发现模式的程序，该程序最有效。为了在序列中找到“模式”，我正在生成一些可能的模式并扫描它们的所有序列的输入文件（算法还有更多内容，但这是正在破坏的位）。生成的可能模式具有用户给定的指定长度。

这适用于最长 8 个字符的所有序列长度。然后在9点，程序运行了很长时间，然后报了java.lang.OutOfMemoryError。经过一番调试，我发现弱点是模式生成方法：

```
/* Get elementary pattern (ep) substrings, to later combine into full patterns */
public static void init_ep_subs(int length) {

ep_subs = new ArrayList<Substring>(); // clear static ep_subs data field

/* ep subs are of the form C1...C2...C3 where C1, C2, C3 are characters in the
   alphabet and the whole length of the string is equal to the input parameter
   'length'. The number of dots varies for different lengths.
The middle character C2 can occur instead of any dot, or not at all.*/

for (int i = 1; i < length-1; i++) { // for each potential position of C2

    // for each alphabet character to be C1
    for (int first = 0; first < alphabet.length; first++) { 

    // for each alphabet character to be C3
    for (int last = 0; last < alphabet.length; last++) {

        // make blank pattern, i.e. no C2
        Substring s_blank = new Substring(-1, alphabet[first],
                          '0', alphabet[last]);

        // get its frequency in the input string
        s_blank.occurrences = search_sequences(s_blank.toString());

        // if blank ep is found frequently enough in the input string, store it
        if (s_blank.frequency()>=nP) ep_subs.add(s_blank);

        // when C2 is present, for each character it could be
        for (int mid = 0; mid < alphabet.length; mid++) {

        // make pattern C1,C2,C3
        Substring s = new Substring(i, alphabet[first],
                        alphabet[mid],
                        alphabet[last]);

        // search input string for pattern s
        s.occurrences = search_sequences(s.toString());

        // if s is frequent enough, store it
        if (s.frequency()>=nP) ep_subs.add(s);
        }
    }
    }
}
} 
```

以下是发生的情况：当我对 search_sequences 的调用进行计时时，它们从每个大约 40-100 毫秒开始，并在第一个模式中继续这种方式。然后在几百个模式（围绕'C.....GC'）之后，这些调用突然开始花费大约十倍的时间，1000-2000ms。之后，时间稳步增加，直到大约 12000 毫秒（'C......TA'）它给出了这个错误：

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOfRange(Arrays.java:3209)
    at java.lang.String.<init>(String.java:215)
    at java.nio.HeapCharBuffer.toString(HeapCharBuffer.java:542)
    at java.nio.CharBuffer.toString(CharBuffer.java:1157)
    at java.util.regex.Matcher.toMatchResult(Matcher.java:232)
    at java.util.Scanner.match(Scanner.java:1270)
    at java.util.Scanner.hasNextLine(Scanner.java:1478)
    at PatternFinder4.search_sequences(PatternFinder4.java:217)
    at PatternFinder4.init_ep_subs(PatternFinder4.java:256)
    at PatternFinder4.main(PatternFinder4.java:62) 
```

这是 search_sequences 方法：

```
/* Searches the input string 'sequences' for occurrences of the parameter string 'sub' */
public static ArrayList<int[]> search_sequences(String sub) {

/* arraylist returned holding int arrays with coordinates of the places where 'sub'
 was found, i.e. {l,i} l = lines number, i = index within line */
ArrayList<int[]> occurrences = new ArrayList<int[]>();
s = new Scanner(sequences);
int line_index = 0;

String line = "";
while (s.hasNextLine()) {
    line = s.nextLine();
    pattern = Pattern.compile(sub);
    matcher = pattern.matcher(line);
    pattern = null; // all the =nulls were intended to help memory management, had no effect

    int index = 0;

    // for each occurrence of 'sub' in the line being scanned
    while (matcher.find(index)) {
    int start = matcher.start(); // get the index of the next occurrence
    int[] occurrence = {line_index, start}; // make up the coordinate array
    occurrences.add(occurrence); // store that occurrence
    index = start+1; // start looking from after the last occurence found
    }
    matcher=null;
    line=null;
    line_index++;

}
s=null;

return occurrences;
} 
```

我已经在几台不同速度的计算机上尝试了该程序，虽然在更快的计算机上完成 search_sequence 的实际时间更小，但相对时间是相同的；在大约相同的迭代次数下，search_sequence 开始需要十倍的时间才能完成。

我试过用谷歌搜索不同输入流（如 BufferedReader 等）的内存效率和速度，但普遍的共识似乎是它们都大致相当于 Scanner。你们中的任何人对这个错误是什么或我如何尝试自己解决这个问题有什么建议吗？

如果有人想查看更多代码，请询问。

编辑：

1 - 输入文件“序列”是 1000 个蛋白质序列（每个在一行上），长度不同，大约几百个字符。我还应该提到这个程序将/只需要工作/最多长度为九的模式。

2 - 这是上述代码中使用的 Substring 类方法

```
static class Substring {
int residue; // position of the middle character C2
char front, mid, end; // alphabet characters for C1, C2 and C3
ArrayList<int[]> occurrences; // list of positions the substring occurs in 'sequences'
String string; // string representation of the substring

public Substring(int inresidue, char infront, char inmid, char inend) {
    occurrences = new ArrayList<int[]>();
    residue = inresidue;
    front = infront;
    mid = inmid;
    end = inend;
    setString(); // makes the string representation using characters and their positions
}

/* gets the frequency of the substring given the places it occurs in 'sequences'. 
   This only counts the substring /once per line ist occurs in/. */
public int frequency() {
    return PatternFinder.frequency(occurrences);
}

public String toString() {
    return string;
}

/* makes the string representation using the substring's characters and their positions */
private void setString() {
    if (residue>-1) {
    String left_mid = "";
    for (int j = 0; j < residue-1; j++) left_mid += ".";
    String right_mid = "";
    for (int j = residue+1; j < length-1; j++) right_mid += ".";
    string = front + left_mid + mid + right_mid + end;
    } else {
    String mid = "";
    for (int i = 0; i < length-2; i++) mid += ".";
    string = front + mid + end;
    }
}
 } 
```

...和 ​​PatternFinder.frequency 方法（在 Substring.frequency() 中调用）：

```
public static int frequency(ArrayList<int[]> occurrences) {
    HashSet<String> lines_present = new HashSet<String>();
    for (int[] occurrence : occurrences) {
        lines_present.add(new String(occurrence[0]+""));
    }
    return lines_present.size();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:19:31.317

什么是字母？你给它什么样的正则表达式？您是否检查过要存储的出现次数？有可能仅仅存储事件就足以使其内存不足，因为您正在进行指数级的搜索。

听起来您的算法具有隐藏的指数资源使用情况。你需要重新考虑你想要做什么。

此外，将局部变量设置为 null 也无济于事，因为 JVM 已经进行了数据流和活跃度分析。

编辑：[这是一个页面，它解释了即使是短的正则表达式也可能需要指数级的时间来运行。](http://www.regular-expressions.info/catastrophic.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:45:46.540

我无法发现明显的内存泄漏，但您的程序确实有许多低效之处。以下是一些建议：

1.  正确缩进你的代码。它将使您和其他人的阅读变得更加容易。目前的形式很难阅读。
2.  如果您指的是成员变量，请在其前面加上`this.`，否则代码片段的读者将无法确定您指的是什么。
3.  *除非绝对*必要，否则避免使用静态成员和方法。`Classname.membername`出于同样的原因，在提及它们时，请使用表格。
4.  的代码`frequency()`与 just 有何不同`return occurrences.size()`？
5.  在`search_sequences()`中，正则表达式字符串`sub`是一个常数。您只需要编译一次，但您要为每一行重新编译它。
6.  将输入字符串 ( `sequences`) 拆分为几行，然后将它们存储在数组或`ArrayList`. 不要在内部重新拆分`search_sequences()`，将拆分集合传入。

可能还有更多需要解决的问题，但这是跳出来的列表。

解决所有这些问题，如果您仍然有问题，您可能需要使用分析器来找出正在发生的事情。

# c# - 在两台计算机上同步程序数据

> ID：11999296
> 
> 赞同：0
> 
> 时间：2012-08-17T03:15:15.553
> 
> 标签：c#, php, database, synchronization

我有一个客户要求一个**非常**简单的程序来存储他要输入的基本信息。这些信息需要在同一网络上的两台计算机之间共享，并且根据我的理解，计算机同时访问信息的可能性微乎其微。

我不确定设置一个完整的 DBMS 来处理两台计算机上的最少数据的实用性。我在想也许通过网络共享到两台计算机的本地（精简版）数据库可以处理这种情况，这将由 C# 应用程序操作。数据库可能最多需要 2-3 个表。

我的另一个选择是在预先配置的服务器（可能是 WAMP 或 XAMPP）上运行基于 Web 的应用程序（很可能是 PHP），但我不确定网络是如何配置的，将在哪里使用该程序，我不确定我是否可以设法仅在本地网络中保持端口打开，因为我可能无法触摸任何网络设置。

Windows 应用程序或 Web 应用程序很可能需要我 2-3 天的时间来编写，无论我选择哪个选项，但我不想写其中一个并发现我选择了错误的选项以适应应用程序的需求.

在我建议的两个选项中，哪个是更实际的解决方案？如果有任何其他似乎适合这种情况的选择，我绝对愿意接受任何建议。谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:19:20.583

真的很简单吗？Excel（共享文件，如果您想更进一步，可以在 VBA 中编程）和 Google Docs（也有表单引擎）具有此功能。无需在任何计算机上进行任何设置。

# eclipse - 如何清除 Eclipse 中的搜索历史记录？

> ID：11999298
> 
> 赞同：7
> 
> 时间：2012-08-17T03:15:26.287
> 
> 标签：eclipse, search, history

我正在使用 Eclipse Ganymede 3.4.2。搜索和查找/替换中的搜索栏因之前的搜索而变得杂乱无章。有没有办法清除它们？

我尝试清除其中的缓存文件，`$workspace/.metadata/.plugins/org.eclipse.core.resources/.history/`但没有帮助。

编辑：
要清除文件搜索历史记录，请转到`.metadata\.plugins\org.eclipse.search\dialog_settings.xml`TextSearchPage 部分并在其下方，清除历史记录部分（例如`<section name="HISTORY0">`）并将 HISTORY_SIZE 值更改为 0。

要清除 Java 搜索历史记录，请转到`.metadata\.plugins\org.eclipse.jdt.ui\dialog_settings.xml`JavaSearchPage 部分并执行相同的操作。

要清除远程搜索历史记录，请转到`.metadata\.plugins\org.eclipse.rse.ui\dialog_settings.xml`RemoteSearchPage 部分下执行相同的操作。

仍然不知道如何清除查找/替换历史记录。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T03:31:42.493

请在您的工作空间中打开文件 .metadata.plugins\org.eclipse.search\dialog_settings.xml。

搜索栏目`TextSearchPage`。清除部分历史记录。在这个标签中，注意`HISTORY_SIZE`和部分`History`

我的意思是如果`<item value="2" key="HISTORY_SIZE"/>` `<section name="HISTORY0">`并且`<section name="HISTORY1">`有效。

开始日食。

对于查找/替换

```
.metadata\.plugins\org.eclipse.ui.workbench.texteditor\dialog_settings.xml 
```

搜索`findhistory`. 您将看到 findHistory 和 replaceHistory。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-12-27T01:06:43.400

只需删除您的 .metadata 文件，您的所有历史记录都会消失！

# java - Hibernate 公式与一对多关系

> ID：11999302
> 
> 赞同：2
> 
> 时间：2012-08-17T03:16:29.337
> 
> 标签：java, oracle, hibernate

我有很多颜色的产品。

我曾经使用一对多关系（列表）来映射它，并用分隔符（“，”）将它们连接在一起

示例：绿色，红色，蓝色

当我尝试使用 JOIN Fetch 检索 5000 条记录时，这非常慢。

我想知道我应该改用公式吗？我知道公式将使用子选择语句检索它。

oO

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:41:23.400

确保在 where 子句和 orderby 子句中用作主键和外键的所有字段（数据库列）在数据库中都有索引。除此之外，您应该粘贴您的代码和 sql，以便提供更详细的帮助/建议

# ruby - 如何使用 Ruby 数组的元素作为哈希键？

> ID：11999304
> 
> 赞同：0
> 
> 时间：2012-08-17T03:16:33.290
> 
> 标签：ruby

## 所以让我改一下这个问题：

我有两个要比较的哈希值。在我的代码中的某个时刻，我得到了一个响应，例如..

```
@moves = {:wm01 => {:a1=>"O", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "} 
```

这对应于一个答案键哈希...

```
@anskey={
    :wm01=>":c3",:wm02=>":c2",:wm03=>":c1",:wm04=>":b3",:wm05=>":b1",:wm06=>":a3",:wm07=>":a2",:wm08=>":a1",
    :wm09=>":a3",:wm10=>":c1",:wm11=>":a1",:wm12=>":c3",:wm13=>":c3",:wm14=>":c1",:wm15=>":c3",:wm16=>":a1",
    :wm17=>":b1",:wm18=>":b2",:wm19=>":b3",:wm20=>":a2",:wm21=>":b2",:wm22=>":b2",:wm23=>":c2",:wm24=>":b2"
  } 
```

在这种情况下，我需要迭代 @anskey where @moves.keys == @anskey.keys

（嗯。我可能刚刚回答了我自己的问题）

然后设置....

```
my_answer_is = @anskey.value 
```

希望这更清楚。

## 原始“问题”如下：

辛苦了一天，屏幕有点疲劳……

我有这个...

```
str = [:wm24] 
```

想说...

```
@anskey[:wm24] 
```

这是错误的..

```
@anskey[str] 
```

什么是正确的？

```
@anskey[?] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T03:29:13.613

您可以将数组中的第一个元素传递给它，如下所示：

```
@anskey[str.first] 
```

或者，如果您想根据其索引（数组中的位置）访问元素，则从零开始计数。所以在这种情况下：

```
@anskey[str[0]] 
```

# php - 无法将 CSV 文件提交给上传者

> ID：11999305
> 
> 赞同：0
> 
> 时间：2012-08-17T03:16:35.257
> 
> 标签：php, csv

我已经上传了一个 CSV，用户必须告诉程序 CSV 文件中某些列的确切名称，以便它可以访问和抓取数据以存储在数据库中。我有一些错误消息，当他们没有填写必要的内容时，它会将他们带回表单以修复他们所犯的错误。问题是它总是把我带回来，我真的不知道为什么。

上传者代码 ------------------------------------------------------------ ----------------------

```
try {  
  # MySQL with PDO_MYSQL  
  $DBH = new PDO("mysql:host=$hostname;dbname=$database", $username, $password);  
  $DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

}  
catch(PDOException $e) { 
    echo "I'm sorry, I'm afraid I can't do that.";  
    file_put_contents('PDOErrors.txt', $e->getMessage(), FILE_APPEND);   
}

function returnBack(){

    header("Location:csvuploader/csvuploaderform.php?seterror=1");
    exit;

}

if (isset($_POST['submit'])){

    /*******************************GET NAME OF COLUMNS IN CSV FILE *********************************************************/
    if (empty($_POST['files'])){
        returnBack();
    }
    if (empty($_POST['firstname'])){
        returnBack();
    }
    if (empty($_POST['lastname'])){
        returnBack();
    }if (empty($_POST['email'])){
        returnBack();
    }
    if (empty($_POST['phone'])){
        returnBack();
    }
    $file = $_FILES['files']['tmp_name'];   

    $handle = fopen($file , "r");

    $fileop = fgetcsv($handle,1000,",");

    $firstname_index = array_search($_POST['firstname'],$fileop);
    if (empty($firstname_index)){
        returnBack();
    }
    $lastname_index = array_search($_POST['lastname'],$fileop);
    if (empty($lastname_index)){
        returnBack();
    }
    $email_index = array_search($_POST['email'],$fileop);
    if (empty($email_index)){
        returnBack();
    }
    $phone_index = array_search($_POST['phone'],$fileop);
    if (empty($phone_index)){
        returnBack();
    }

    /***********************ASSIGN COLUMN VALUES TO ACCORDING VARIABLES AND INSERT THEN INTO CSV TABLE IN DB *************************************/

    while (($fileop = fgetcsv($handle,1000,",")) !== false)
    {
        $firstname = $fileop[$firstname_index];
        $lastname = $fileop[$lastname_index];
        $email = $fileop[$email_index];
        $phone = $fileop[$phone_index];

        $insertdata = $DBH->prepare("INSERT INTO csv (firtname, lastname, email, phone) VALUES ('$firstname','$lastname','$email','$phone')");
        $insertdata->execute();
    }
    if ($insetdata){
        echo "Successfully Uploaded. Thank you.";   
    }
} 
```

感谢您的时间！

更新 - - - - - - - - - - - - - -

表格代码

```
<table width="300" border="0" align="center" cellpadding="0" cellspacing="1" bgcolor="#CCCCCC">
<tr>
<form method="post" action="csvuploader.php" enctype="multipart/form-data">
<td>
<table width="100%" border="0" cellpadding="3" cellspacing="1" bgcolor="#FFFFFF">
<tr>
<td colspan="3"><strong>CSV Uploader </strong></td>
</tr>
<tr>
<td>Enter Name of First Name Column </td>
<td>:</td>
<td><input name="fisrtname" type="text" ><?php 
    $setError=$_GET['seterror']; 
    if($setError == 1){
    echo "<span class='errorMsg'>Need Exact Name</span>";
    }
        ?> </td>
</tr>
<tr>
<td>Enter Name of Last Name Column </td>
<td>:</td>
<td><input name="lastname" type="text" ><?php 
    $setError=$_GET['seterror']; 
    if($setError == 1){
    echo "<span class='errorMsg'>Need Exact Name</span>";
    }
        ?></td>
</tr>
<tr>
<td>Enter Name of Email Column </td>
<td>:</td>
<td><input name="email" type="text" ><?php 
    $setError=$_GET['seterror']; 
    if($setError == 1){
    echo "<span class='errorMsg'>Need Exact Name</span>";
    }
        ?></td>
</tr>
<tr>
<td>Enter Name of Phone Number Column </td>
<td>:</td>
<td><input name="phone" type="text" ><?php 
    $setError=$_GET['seterror']; 
    if($setError == 1){
    echo "<span class='errorMsg'>Need Exact Name</span>";
    }
        ?></td>
</tr>
<tr>
<td width="294"><input type="file" name="files" /><?php 
    $setError=$_GET['seterror']; 
    if($setError == 1){
    echo "<span class='errorMsg'>Select a File</span>";
    }
        ?></td>
</tr>
<br />
<tr>
<td><input type="submit" name="submit" value="Submit" /></td>
</tr>
</table>
</td>
</form>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T03:31:41.510

我不确定您的数据文件的外观，但您可能希望`trim`在`fgetcsv`ed 数组值上使用，因为最后一个值很可能包含行尾：

```
$fileop=fgetcsv($handle);
$fileop=array_map("trim",$fileop);
/*recognize index*/
while (($fileop=fgetcsv($handle))!==false)
{
    $fileop=array_map("trim",$fileop);
    $firstname=$fileop[$firstname_index];
    /*insert into DB*/
} 
```

**编辑**：

哎呀，好像我错过了什么......你正在使用

```
if(empty($firstname_index)) 
```

在你的代码中，但是如果，例如，`array_search($_POST["firstname"],$fileop)`返回 0（这是数组中的第一个索引），你`empty($firstname_index)`会是`TRUE`，你会被踢回来。

你应该使用

```
if($firstname_index===false) 
```

相反（在所有四个索引中）。[PHP 文档](http://www.php.net/manual/en/function.array-search.php).

**编辑#2**：

此外，最好让您的标题匹配不区分大小写：

```
$fileop=fgetcsv($handle);
$fileop=array_map("strtoupper",array_map("trim",$fileop));
$firstname_index=array_search(strtoupper($_POST["firstname"]),$fileop);
if($firstname_index===false) returnBack();
/*and all four indexes*/ 
```

# jquery - jQuery find() 选择选项在 IE9 中不起作用

> ID：11999306
> 
> 赞同：1
> 
> 时间：2012-08-17T03:16:46.653
> 
> 标签：jquery, internet-explorer-9

以下代码在非 IE 浏览器中完美运行。

```
<select id="mySelect" name="mySelect">
  <option value="1">MyVal1</option>
  <option value="2">MyVal2</option>
  <option value="3">MyVal3</option>
</select> 
```

我正在尝试清除选项，以便添加新选项：

```
var mySelect = $("#mySelect");
mySelect.find("option").remove(); 
```

它在我第一次尝试填充它时起作用，但此后的每一次，它都会忽略我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T03:31:18.930

要从选择中删除选项，请使用`.empty()`. 效果更好，跨浏览器明智。

```
mySelect.empty(); 
```

[**jsFiddle 演示**](http://jsfiddle.net/d9tb2/2/)

# sharepoint - 在 sharepoint 2010 中使用事件接收器的弹出警报消息

> ID：11999312
> 
> 赞同：1
> 
> 时间：2012-08-17T03:18:02.157
> 
> 标签：sharepoint, sharepoint-2010

我已经在 SharePoint 中使用 C# 编码创建了事件接收器。当项目应该匹配时已经有了。它显示这样的按摩是我的代码..

```
 public override void ItemAdding(SPItemEventProperties properties)
    {
            base.ItemAdding(properties);  
            SPList oList = null;
            string strCarName = string.Empty;
            using (SPWeb web = properties.Web)
            {
                oList = web.Lists["Cars"];
                string dropdwnvalue = web.Lists[properties.ListId].Fields["CarName"].InternalName;
                String lookupFieldStringValue = Convert.ToString(properties.AfterProperties[dropdwnvalue]);
                SPListItem item = oList.Items[Convert.ToInt32(lookupFieldStringValue) - 1];
                strCarName = Convert.ToString(item["LinkTitle"]);
            }
            string strStartdate = Convert.ToString(properties.AfterProperties["EventDate"]);
            SPQuery existingItemsQuery = new SPQuery();
            existingItemsQuery.Query = "<Where><And><Eq><FieldRef Name='EventDate'/><Value Type='DateTime'>" + strStartdate + "</Value></Eq><Eq><FieldRef Name='Car_x0020_Name'/><Value Type='Lookup'>" + strCarName + "</Value></Eq></And></Where>";
            SPListItemCollection existingItems = properties.List.GetItems(existingItemsQuery);

                if (existingItems.Count >= 1)
                {

                    properties.Cancel = true;
                    properties.ErrorMessage = "Item is already exists";
                    properties.Status = SPEventReceiverStatus.CancelWithError;
                    // ClientScript.RegisterStartupScript(typeof(Page), "test", "<script>alert('Hello');return false;</script>"); 
                } 
```

输出：-

项目已存在。该项目一天只添加一次。我不能再添加另一个项目。但我想在一天的更改时间添加另一个项目

任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:06:56.910

正如我所看到的，您的查询字符串有问题，您应该使用这个：

```
existingItemsQuery.Query = "<Where><And><Eq><FieldRef Name='EventDate'/><Value Type='DateTime' IncludeTimeValue='TRUE'>" + strStartdate + "</Value></Eq><Eq><FieldRef Name='Car_x0020_Name'/><Value Type='Lookup'>" + strCarName + "</Value></Eq></And></Where>"; 
```

你应该有 strStartdate 格式像这样 '1971-01-01T00:00:00Z'

你可以使用这个方法：

```
SPUtility.CreateISO8601DateTimeFromSystemDateTime(properties.AfterProperties["EventDate"]) 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:20:00.867

不确定您是否可以注册脚本，因为页面将被重定向。但是您可以使用`properties.Status = SPEventReceiverStatus.CancelWithRedirectUrl`自定义参数并将其添加到查询字符串。脚本也必须始终在页面上。因此，您只需检查 QS 中的必要参数并在存在时显示警报。

# python - 为什么我的 python newt/snack 程序有奇怪的字符？

> ID：11999316
> 
> 赞同：2
> 
> 时间：2012-08-17T03:18:46.103
> 
> 标签：python, linux, character

我有一个使用 newt/snack 模块的 Python 程序，它在 Fedora 17 官方版本中运行良好。

我需要将程序移植到**initrd ram disk**中，即仅使用**initrd/vmlinuz**运行的 Linux ，但没有任何其他文件系统或**squashfs**映像。我选择 Fedora 17 的**initrd.img**内存盘，因为它内置了 Python 2.7.3。我需要做的是添加 newt/snack 模块及其依赖项。

我从 Fedora 17 官方版本中添加了 newt/newt-python。该程序确实运行，但它的边框中有奇怪的字符。我认为它与蝾螈/零食有关。请帮忙！任何建议表示赞赏。

                 ![带有奇怪字符的 Python 蝾螈/小吃](../Images/74b6c83fed621b7eb56a2442f9446ba4.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T05:22:40.703

谢谢大家的关心。

我已经解决了这个问题。它与语言环境有关。

当我键入“/usr/bin/locale”命令时，它显示语言环境是 POSIX，它的字符集较少。

我为解决这个问题所做的工作包括：

1.  复制`/usr/share/i18n/*` *（在 Fedora 17 官方版本中）*到 initrd ram 磁盘中的相应位置。
2.  `usr/lib/locale`在 initrd ram 磁盘中创建目录。
3.  添加 ：

> /usr/bin/localedef -i en_US -f UTF-8 en_US.UTF-8 && export LC_ALL=en_US.UTF-8 && export LANG=en_US.UTF-8

命令进入 initrd ram 磁盘中的 init 脚本。此命令会将系统区域设置为`en_US.UTF-8`.

通过执行这些步骤，蝾螈/小吃边界显示得很好:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T08:26:10.663

我在边框中遇到类似奇数字符的类似问题。我使用的是 PuTTY 终端。我通过更改 PuTTY 设置解决了这个问题：设置 > 窗口 > 翻译选择字符集 UTF-8 和画线字符“使用 Unicode...”

# joomla - 如何找到 Joomla 根目录

> ID：11999317
> 
> 赞同：6
> 
> 时间：2012-08-17T03:18:57.450
> 
> 标签：joomla, path

如何找出要在文件中使用的 Joomla 根目录？我尝试了以下没有运气：

```
 $path = JPATH_COMPONENT; 
    //Gives component root

    $path = JURI::root();
    //Gives absolute path, can't be used for some reason (http://www.site.com)

    $path = $_SERVER['DOCUMENT_ROOT'];
    //Gives public_html folder, but if someone installs joomla in a directory and not in root, it wrecks the whole thing 
```

有没有办法只找到网站的 joomla 根目录？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T04:02:53.827

可能这可以帮助你 [http://docs.joomla.org/Constants](http://docs.joomla.org/Constants)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-17T13:09:23.820

假设您想包含图像文件夹中的图像，您可以简单地使用它：

```
$image = JUri::root() . 'images/image_name.png'; 
```

`JUri::root()`并且都`JUri::site()`始终定义根目录

# objective-c - xcode 模拟器适用于 iPad 按钮图像消失

> ID：11999318
> 
> 赞同：0
> 
> 时间：2012-08-17T03:19:03.730
> 
> 标签：objective-c, xcode, ipad

我的应用程序在模拟器上运行得很好，但是当我在 iPad 上安装它时，我的 2 组按钮按钮图像消失了，这是代码，

```
-(IBAction)ButtonNot1:(id)sender{
UIImage *btnImage1 = [UIImage imageNamed:@"button_Not_At_all_R.png"];
[sender setImage:btnImage1 forState:UIControlStateNormal];

UIImage *btnImage2 = [UIImage imageNamed:@"Button_Unsure.png"];
UIImage *btnImage3 = [UIImage imageNamed:@"Button_Definitely.png"];

UIButton* ButtonUn1 = (UIButton*)[self.view viewWithTag:2];
UIButton* ButtonDef1 = (UIButton*)[self.view viewWithTag:3];

[ButtonUn1 setImage:btnImage2 forState:UIControlStateNormal];
[ButtonDef1 setImage:btnImage3 forState:UIControlStateNormal];
sResults1 = @"1";
} 
```

因此，当您选择第一个按钮时，btnImage2 和 3 只显示空白按钮没有图像，这在模拟器中工作正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:57:21.567

好像是区分大小写的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T04:03:11.733

首先要检查您用来引用资源的图像名称是否区分大小写。iPhone 区分大小写，但模拟器不区分大小写。

# android - 查询文本文件到数据库

> ID：11999319
> 
> 赞同：2
> 
> 时间：2012-08-17T03:19:15.747
> 
> 标签：android, sql, database, text, gtfs

我的程序需要能够扫描文本文件，并将文本文件的值存储到数据库中。假设我读过一行代码，看起来像这样

```
3,95003,"ALLENDALE",,41.030902,-74.130957,2893 
```

我希望能够调用字符串的一部分并将其存储为数据库值。我该怎么做呢？我已经知道如何读取文本文件，但我需要知道如何过滤并只抓取其中的一部分。

在数据库中，我通常会通过这样做来添加一个值。

```
values.put("A", "B"); 
```

我怎样才能从文本文件的一部分中读取一个值到 B 中？

假设我希望它显示 values.put("A", "ALLENDALE")。

回答：

```
AgencyString = readText();
        tv = (TextView) findViewById(R.id.letter);

        tv.setText(readText());

        StringTokenizer st = new StringTokenizer(AgencyString, ",");
        while (st.hasMoreElements()) {
            tv.setText(st.nextToken());
        }
    }

    private String readText() {
        InputStream inputStream = getResources().openRawResource(R.raw.agency);

        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

        int i;
        try {
            i = inputStream.read();
            while (i != -1) {
                byteArrayOutputStream.write(i);
                i = inputStream.read();
            }
            inputStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return byteArrayOutputStream.toString();

    } 
```

我的下一步是将这些值存储到一个数组中，并将它们读入我的数据库。通过使用 StringTokenizer 方法并将“逗号”设置为分隔符，我能够过滤我的机构.txt 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T03:30:09.710

看着。使用分隔符“，”。 [http://developer.android.com/reference/java/util/StringTokenizer.html](http://developer.android.com/reference/java/util/StringTokenizer.html) [http://developer.android.com/reference/java/lang/String.html#split(java.lang.String)](http://developer.android.com/reference/java/lang/String.html#split(java.lang.String))

[http://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html](http://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html) [http://docs.oracle.com/javase/7/docs/api/java/lang/String.html #split(java.lang.String](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split(java.lang.String) , int)

# python - 什么是分布式锁，为什么要使用它？

> ID：11999324
> 
> 赞同：5
> 
> 时间：2012-08-17T03:19:52.793
> 
> 标签：python, database, web-services, web-applications, memcached

为什么人们需要分布式锁？

当共享资源被它的本地机器保护时，这是否意味着我们不需要分布式锁？

我的意思是当**共享资源通过使用某种 api 或服务暴露给其他人时，并且这个 api 或服务使用它的本地锁来保护**；那么我们就不需要这种分布式锁了；我对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T08:56:19.783

在[quora](http://www.quora.com/Distributed-Systems/Why-do-people-need-a-distributed-lock/answer/Sean-Owen?__snids__=52301574)上询问人们之后。我想我得到了答案。

假设 N 个工作服务器访问数据库服务器。这里有两个部分：

1.  数据库有自己的锁定方法来保护数据不被其他客户端（N个工作服务器）的并发访问破坏。这是数据库中的本地锁出现的地方。

2.  N 个工作服务器可能需要一些加冕礼，以确保它们在做正确的事情，这是特定于应用程序的。这就是分布式锁出现的地方。比如说，如果两个工作服务器运行相同的进程，删除数据库的一个表并向表中添加一些记录。数据库服务器可以确保其内部数据是正确的，但是这两个进程需要一个分布式锁来相互协调，否则，一个进程会丢弃另一个进程的表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T07:47:52.343

是和否，如果您通过锁从本地 API 公开您的信息以防止互斥，这取决于锁的设置方式，您的实现可能正是分布式锁试图完成的实现，但如果您没有如果开发了 API，那么您必须深入研究 API 的源代码，以确定它是本地化的还是分布式的锁定系统。老实说，锁就是锁，它无论如何都试图做同样的事情。与本地化锁相比，分布式锁的好处是您已经考虑了排队，以防止客户端在昂贵的缓存点上过度访问。

# java - Java - 客户端如何从 HttpServlet 获得响应

> ID：11999331
> 
> 赞同：0
> 
> 时间：2012-08-17T03:21:17.933
> 
> 标签：java, servlets, client

我的客户端没有实现 HttpServlet 接口。它连接到远程运行的 HttpServlet

```
 url = new URL("http://tomcat-location:8180/myContext"); 
```

这就是它用来向 servlet 发送消息的方法。但它怎么能得到回应呢？当我尝试从这个位置读取时，我正在读取指定页面的内容。也许我的整个方法是错误的，这不是客户端和 servlet 应该如何相互交谈的方式？我怎样才能让他们用简单的方式说话？似乎使用 URL，他们通过在该页面上发布和阅读来进行交流。有没有其他方法可以让他们不用在页面上写字就可以说话？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:49:09.573

试试这个：

```
public static String getURLData( String url ) {

    // creates a StringBuilder to store the data
    StringBuilder out = new StringBuilder();

    try {

        // creating the URL
        URL u = new URL( url );

        // openning a connection
        URLConnection uCon = u.openConnection();

        // getting the connection's input stream
        InputStream in = uCon.getInputStream();

        // a buffer to store the data
        byte[] buffer = new byte[2048];

        // try to insert data in the buffer until there is data to be read
        while ( in.read( buffer ) != -1 ) {

            // storing data...
            out.append( new String( buffer ) );

        }

        // closing the input stream
        in.close();            

        // exceptions...  
    } catch ( MalformedURLException exc )  {

        exc.printStackTrace();

    } catch ( IOException exc ) {

        exc.printStackTrace();

    } catch ( SecurityException exc ) {

        exc.printStackTrace();

    } catch ( IllegalArgumentException exc ) {

        exc.printStackTrace();

    } catch ( UnsupportedOperationException exc ) {

        exc.printStackTrace();

    }

    // returning data
    return out.toString();

} 
```

如果您需要使用代理，则需要做更多的工作，因为您需要进行身份验证。在这里您可以阅读有关它的内容：[如何使 HttpURLConnection 使用代理？](https://stackoverflow.com/questions/1432961/how-do-i-make-httpurlconnection-use-a-proxy)

如果你想要一个像浏览器一样工作的客户端，你可以试试[Apache HttpComponentes的 HttpClient](http://hc.apache.org/httpcomponents-client-ga/)

现在，如果您需要服务器通知客户端的行为，那么您将需要使用其他方法，例如创建自己的服务器和使用套接字。如果您使用常规浏览器，则可以使用 websockets，但似乎不是您的情况。

# c# - C# 中带有 FileSystemWatcher 的 Windows 服务

> ID：11999335
> 
> 赞同：9
> 
> 时间：2012-08-17T03:21:45.623
> 
> 标签：c#, windows-services, filesystemwatcher

我必须创建一个程序来监视文件大小的变化。我已经制作了一个简单的 Windows 服务和文件系统观察器，所以我现在熟悉这个概念。我还制作了一个检查文件大小的代码（在表单按钮中制作），但尚未在我的文件系统观察器中实现。如何创建具有监视文件大小的文件监视器的 Windows 服务？我是否必须在 Windows 服务中放置一个文件系统观察程序并通过 OnStart 方法调用观察程序？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-17T03:39:52.643

如果您正在制作 Window 的服务，那么您将希望以编程方式进行。我通常将表单排除在我的服务之外，并为它们创建一个单独的界面进行通信。现在 FileSystemWatcher 没有单独监视大小的事件，因此您需要创建一个与 FileSystemWatcher.Changed 相关联的方法来检查对现有文件的修改。在您的 OnStart 方法中声明并初始化控件，并将事件绑定在一起。在 OnStop 方法中执行任何清理代码。它应该看起来像这样：

```
protected override void OnStart(string[] args)
{
FileSystemWatcher Watcher = new FileSystemWatcher("PATH HERE");
Watcher.EnableRaisingEvents = true;
Watcher.Changed += new FileSystemEventHandler(Watcher_Changed);
} 

// This event is raised when a file is changed
private void Watcher_Changed(object sender, FileSystemEventArgs e)
{
// your code here
} 
```

另请注意，FileSystemWatcher 将为单个文件触发多个事件，因此当您调试时请注意模式以解决它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T03:40:07.277

您可以通过设置在 OnStart 方法中简单地启用您的文件系统观察器对象

```
EnableRaisingEvents = true; 
```

然后处理事件。那应该这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T03:42:00.190

您可以创建一个委托来处理已更改的内容

```
myWatcher.Changed += new FileSystemHandler(FSWatcherTest_Changed);

private void FSWatcherTest_Changed(object sender, 
                System.IO.FileSystemEventArgs e)
{
    //code here for newly changed file or directory
} 
```

等等

我建议您阅读这篇文章[http://www.codeproject.com/Articles/18521/How-to-implement-a-simple-filewatcher-Windows-serv](http://www.codeproject.com/Articles/18521/How-to-implement-a-simple-filewatcher-Windows-serv)

`on_start`在 Windows 服务中也有这个委托

# c# - 目录搜索功能 C++

> ID：11999338
> 
> 赞同：2
> 
> 时间：2012-08-17T03:22:03.703
> 
> 标签：c#, .net, c++-cli

我正在尝试将一段 C# 代码转换为 C++/CLI。

C#代码：

```
DirectoryInfo dir = new DirectoryInfo(path);
DirectoryInfo [] subdirs;
foreach (DirectoryInfo subdir in dir.GetDirectories())
    Search(subdir.Fullname); 
```

我已经完成了，直到最后一行；

C++ 代码：

```
System::IO::DirectoryInfo^ dir = gcnew DirectoryInfo(dirbxSearch->Path);
array <System::IO::DirectoryInfo^>^ subdirs;
for each (System::IO::DirectoryInfo^ subdir in dir->GetDirectories())
     Search(subdir->FullName); 
```

问题是我不知道搜索来自哪里。作为一个模棱两可的词，我也无法在任何参考文献中找到它。没有正确的继承，它无法编译，所以我有点卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:50:57.607

C# 不允许使用全局函数（范围在类之外）；您可以拥有的最接近的是类型上的静态函数。由于该函数的范围不限于特定类（即`MyType.Search(subdir.Fullname)`），因此它必须位于您的代码片段所在的类层次结构中。

在 Visual Studio 中，右键单击`Search()`标识符并选择“转到定义”（默认快捷方式为 F12）。如果您不使用 Visual Studio，您至少可以在包含继承结构的类中进行搜索。

# sql-server - 如何在 SSRS 的列组“下”有一个行组？

> ID：11999340
> 
> 赞同：0
> 
> 时间：2012-08-17T03:22:14.427
> 
> 标签：sql-server, reporting-services, grouping

我有一些与一些生产投入和产出相关的数据。我想做的是，对于每次生产运行，显示输入和输出的内容。

在这一点上，我有一些看起来像这样的东西：

```
Run#   Item   Input    Output
1      X          1         
       Y                    1

2      A          2         
       B          3         2
       C                    3 
```

其中输入/输出是从“方向”列组派生的，并且在 Run# 和 Item 上有行组。我想要的是这样的：

```
Run#   Item   Input    Item    Output
1         X       1       Y         1

2         A       2       B         2
          B       3       C         3 
```

这甚至可能吗？我觉得应该是，但正如您可能从标题中看到的那样，我什至不知道从什么开始搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:21:43.490

这样做的方法是在查询上添加一个 rank() ，如下所示：

```
dense_rank() OVER (Run#, Direction Order By ItemCode) as rank 
```

然后，您可以按字段执行行分组`rank`（您不必显示列），并`ItemCode`在列分组中添加为列。

# php - PDO 将引号与数组一起使用

> ID：11999343
> 
> 赞同：0
> 
> 时间：2012-08-17T03:22:38.983
> 
> 标签：php, pdo

我是 PDO 的新手

```
$sFields = "'".implode("', '", $fields)."'";
$sColumns = implode(", ", $columns);
$sql = "INSERT INTO $table ($sColumns) VALUES ($sFields)"; 
```

在我要插入的每个值上使用 PDO::quote 的最短方法是什么。

我试过

```
$fields = array_map('$bdd->quote', $fields); 
```

但它返回：

> 警告：array_map() 期望参数 1 是有效的回调，未找到函数 '$bdd->quote' 或无效的函数名

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-20T08:45:30.097

尝试

```
$fields = array_map(array($bdd, 'quote'), $fields); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T03:31:17.543

除了 concat sql 字符串之外，还有其他方法。

```
$sColumns = implode(", ", $columns);
$sFields = implode(',', array_fill(0, count($fields), '?'));
$sql = "INSERT INTO $table ($sColumns) VALUES ($sFields)";

$stmt = $pdo->prepare($sql);
$stmt->execute($fields); 
```

# button - 更改推文内容

> ID：11999348
> 
> 赞同：0
> 
> 时间：2012-08-17T03:24:04.113
> 
> 标签：button, twitter

```
<a href="https://twitter.com/share" class="twitter-share-button" data-via="ivo_sanz">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

我在 twitter.com 上得到了这个，我想改变将要发布的内容。

例如我想发推文

```
"tweet me please" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:36:19.273

试试这个

```
 <a href="https://twitter.com/intent/tweet?text=Tweet%20me%20please" class="twitter-hashtag-button" data-size="large" data-via="ivo_sanz">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

# mysql - 在第 300 条记录后删除消息

> ID：11999352
> 
> 赞同：1
> 
> 时间：2012-08-17T03:24:26.453
> 
> 标签：mysql, sql

我有两张桌子：

表`groupMessage`用于记录组用户消息

表`groupMessageNum`用于消息数超过 300 的记录。

```
 -------------------
 | groupMessage    |
 |-----------------|
 |     id          |
 |    hostId       |
 |    roomId       |
 ===================

 ---------------------
 | groupMessageNum   |
 |-------------------|
 |     id            |
 |    hostId         |
 |    roomId         |
 ===================== 
```

我正在尝试删除其中的记录`groupMessage`并`groupMessageNum`删除`groupMessageNum`.

如果`groupMessage`要删除的记录超过300条，我会删除第300条之后的记录。

我的 sql 是：

```
delete group, groupNum from groupMessage group, groupMessageNum
groupNum where group.hostId = groupNum.hostId and group.roomId =
groupNum.roomId; 
```

这将删除 groupMessage 中的所有记录。

那么，我怎样才能只删除第 300 条之后的记录呢？

例子：

有 100 个用户，60 个用户有 300 多条消息。所有用户消息都在 groupMessage 表中。groupMessageNum 中有 60 个用户的 id，因为他们的消息超过 300 条。

现在我正在尝试删除第 300 条消息之后的用户消息。所以我首先在 groupMessageNum 表中找到用户 ID，然后在 groupMessage 表中删除这些消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T04:52:28.377

你可以尝试这样的事情：

```
DELETE group, groupNum
FROM groupMessage group
     INNER JOIN (SELECT hostId 
                 FROM group 
                 ORDER BY msgTime ASC 
                 LIMIT 300, 9999999999
                ) group2
         ON group.hostId = group2.hostId
     INNER JOIN groupMessageNum groupNum
         ON group.hostId = groupNum.hostId AND
            group.roomId = groupNum.roomId; 
```

或者您可以尝试其他方式：

```
DELETE group, groupNum
FROM groupMessage group
     INNER JOIN (SELECT hostId, (@rank := @rank + 1) AS rank
                 FROM group, (SELECT @rank:= 0) a
                 ORDER BY msgTime ASC 
                ) group2
         ON group.hostId = group2.hostId AND
            rank > 300
     INNER JOIN groupMessageNum groupNum
         ON group.hostId = groupNum.hostId AND
            group.roomId = groupNum.roomId; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T04:43:08.197

```
DELETE A, B
FROM groupMessage A
INNER JOIN groupMessageNum B on A.hostId = B.hostId and A.roomId=B.roomId
INNER JOIN (SELECT id FROM groupMessage LIMIT 300,999999) C
ON A.id = B.id 
```

# asp.net - 更新时如何检查电子邮件地址是否未被使用

> ID：11999356
> 
> 赞同：1
> 
> 时间：2012-08-17T03:25:05.233
> 
> 标签：asp.net, sql-server

在我的网站上，我允许我的用户更新他们的电子邮件地址。但是，我要求每个电子邮件地址都是唯一的。如何确保在更新表格中输入的电子邮件地址在数据库中更新之前是唯一的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T03:34:53.423

对存储您的电子邮件地址的列具有[唯一约束](http://msdn.microsoft.com/en-us/library/ms191166%28v=sql.105%29.aspx)。

> 您可以使用 UNIQUE 约束来确保在不参与主键的特定列中没有输入重复值。

盲目地插入具有唯一约束的表中会引发异常。为避免这种情况，请在 where 子句中运行选择查询检查此电子邮件地址。

如果您拥有庞大的用户群，请务必为您的电子邮件列编制索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T03:45:01.767

假设您在桌子上有一些钥匙，并且您最初的陈述是：

```
UPDATE dbo.foo SET Email = @Email WHERE Key = @key; 
```

然后您可以先检查值：

```
IF EXISTS (SELECT 1 FROM dbo.foo WHERE Email = @Email AND Key <> @Key)
BEGIN
  RAISERROR('Sorry, that e-mail is already in use.', 11, 1);
END
ELSE
BEGIN 
  UPDATE dbo.foo SET Email = @Email WHERE Key = @key;
END 
```

现在，无论如何你都应该对表有一个约束，例如

```
ALTER TABLE dbo.foo ADD CONSTRAINT UQ_Email
 UNIQUE(Email); 
```

但是，首先检查违规仍然是有益的，即使有约束，[正如我在这里演示的那样](http://www.mssqltips.com/sqlservertip/2632/checking-for-potential-constraint-violations-before-entering-sql-server-try-and-catch-logic/?utm_source=AaronBertrand)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-17T03:31:45.967

我的第一个建议是将其定义为表中的唯一列，[请参阅this](http://www.w3schools.com/sql/sql_unique.asp)。或者，我认为这不是一个很好的方法（但也许由于某种原因你不控制表）你可以在你的插入语句中检查它。如果您能提供更多信息（表结构/插入语句）我将能够为您提供更好的答案。

# java - 演员表 列出

> ID：11999364
> 
> 赞同：3
> 
> 时间：2012-08-17T03:26:31.273
> 
> 标签：java, generics

我有一个扩展 Animal.Class 的 Animal.Class 和 Dog 类

我可以知道是否有一种快速简便的方法可以做到这一点？

```
List<Dog> dogList = getAnimalList();

public List<Animal> getAnimalList(){
     List<Animal> animalList = new LinkedList<Animal>();
     return animalList;
} 
```

除非绝对必要，否则我不想再查看整个动物列表。

dog 类只包含一个额外的布尔值用于其他检查目的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T03:28:27.917

[泛型继承](http://docs.oracle.com/javase/tutorial/java/generics/inheritance.html)与 java 继承原理略有不同。您需要使用`?`（通配符）

```
List<? extends Animal> dogList = getAnimalList(); 
```

编辑：

[通配符指南：](http://docs.oracle.com/javase/tutorial/java/generics/wildcardGuidelines.html)

1.  使用 extends 关键字，使用上限通配符定义“in”变量。
2.  使用 super 关键字，使用下界通配符定义“out”变量。
3.  如果可以使用 Object 类中定义的方法访问“in”变量，请使用无界通配符。
4.  如果代码需要以“in”和“out”变量的形式访问变量，请不要使用通配符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T03:46:25.790

您的问题并不完全清楚，所以我将解决您*可能*遇到的问题。

如果您有一个动物列表，其中包含多种动物：

```
List<Animal> animals = new ArrayList<>();
animals.add(new Dog());
animals.add(new Cat());
animals.add(new Hippo()); 
```

并且您想将该列表的元素过滤到特定的子类型，然后您需要迭代该列表并检查/转换为子类型：

```
List<Dog> dogs = new ArrayList<>();

for (Animal animal : animals) {
    if (animal instanceof Dog) {
        dogs.add((Dog)animal);
    }
} 
```

使用[Guava](https://code.google.com/p/guava-libraries/)更容易做到这一点：

```
List<Dog> dogs = Lists.newArrayList(Iterables.filter(animals, Dog.class)); 
```

# bash - Bash：使用字典模板替换文件中的多个单词？

> ID：11999370
> 
> 赞同：0
> 
> 时间：2012-08-17T03:27:19.497
> 
> 标签：bash, dictionary, sed, translation, substitution

我想编写一个脚本，对其输入执行以下操作：匹配模板中的单词并将它们替换为相应的等价物（或“翻译”）。

我用于`case esac`字典模板，我尝试在调用 sed 进行替换之前将其放入循环中，但我不确定从哪里开始以及如何去做。如何用 bash 脚本中的模板字典的定义替换文件内容的一部分？

输入（包含以下内容的文件）：

```
Sliced bread is the best thing since bread slicers. 
```

字典模板：

```
case "$@" in
sliced) Peanut butter ;;
bread) sandwiches ;; 
is) are ;;
"the best thing") even better. ;;
since bread slicers) "";;
*) "$@" ;; esac 
```

期望的输出：

```
Peanut butter sandwiches are even better. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:48:10.850

由于您的字典已经用 bash 编写，因此您可以标记输入流并将每个单词独立地传递给您的字典。但是，由于您坚持在单词中允许空格（例如 in `"the best thing"`），因此标记化方法不会起作用。所以你必须解析你的字典并`sed`从中构造表达式。

现在，假设唯一的非字母数字/空白字符`*`在最后一行，你可以这样做：

```
s="$(cat "dict.bash" | sed -n 's/^[ \t]*\("\?\)\([^*")]\+\)\("\?\))[ \t]*"\?\([^\/"]*[^ \t]\)"\?[ \t]*;;.*$/\2)\4/p' | while IFS=")" read pat subst; do

  echo -n "s/$pat/$subst/gi;"

done)"

sed -e "$s" 
```

但是，由于您的字典必须以增量方式应用，因此您最终会生成与字典中的规则不匹配的中间字符串。

# phpmyadmin - 只能从本地网络 phpmyadmin 访问请求的对象

> ID：11999371
> 
> 赞同：42
> 
> 时间：2012-08-17T03:27:30.040
> 
> 标签：phpmyadmin, xampp

我刚刚为 linux 安装了 xampp 1.8.0，当我打开 phpmyadmin 时出现此错误 Access Forbidden!!

```
新的 XAMPP 安全概念：

只能从本地网络访问请求的对象。

可以在文件“httpd-xampp.conf”中配置此设置。

```

我试过[这篇](https://stackoverflow.com/questions/6083323/new-xampp-security-concept)文章，但没有运气。请帮忙。我是从我自己的 PC 上打开它，而不是从任何其他网络。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-21T07:34:30.560

打开你的 http.conf 文件

```
vim /opt/lampp/etc/extra/httpd-xampp.conf 
```

在以下部分中评论“**拒绝所有人”，**

```
#
# New XAMPP security concept
#
<LocationMatch "^/(?i:(?:xampp|security|licenses|phpmyadmin|webalizer|server-status|server-info))">
        Order deny,allow
       #Deny from all
        Allow from ::1 127.0.0.0/8 \
                fc00::/7 10.0.0.0/8 172.16.0.0/12 192.168.0.0/16 \
                fe80::/10 169.254.0.0/16

        ErrorDocument 403 /error/XAMPP_FORBIDDEN.html.var
</LocationMatch> 
```

**编辑：**
尝试在“ErrorDocument”行之前添加“Allow from all”。希望能帮助到你。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2016-04-01T14:33:50.893

如果您看到以下错误消息，请尝试进入`phpyAdmin`：

```
New XAMPP security concept:
Access to the requested directory is only available from the local network.
This setting can be configured in the file "httpd-xampp.conf". 
```

您可以执行下一步（对于 XAMPP，部署在 UNIX 系统上）：您可以尝试更改配置`<Directory "/opt/lampp/phpmyadmin">`

```
# vi /opt/lampp/etc/extra/httpd-xampp.conf 
```

并将安全设置更改为

```
#LoadModule perl_module        modules/mod_perl.so

<Directory "/opt/lampp/phpmyadmin">
    AllowOverride AuthConfig Limit
    Order allow,deny
    Allow from all
    Require all granted
    ErrorDocument 403 /error/XAMPP_FORBIDDEN.html.var
</Directory> 
```

第一个 - 评论 pl 模块，第二个 - 更改节点目录的配置。之后，您应该重新启动`httpd`守护程序

```
# /opt/lampp/xampp restart 
```

现在您可以访问[http://[server_ip]/phpmyadmin/](http://[server_ip]/phpmyadmin/)

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2017-12-19T08:09:04.717

没有什么对我有用，但以下事情很棒：

1) 打开

> httpd-xampp.conf

这是在

> /opt/lampp/等/额外/

2) 查找`<Directory "/opt/lampp/phpmyadmin">`

3）现在只需添加 Require all grant before

4）所以代码看起来像这样
`<Directory "/opt/lampp/phpmyadmin"> AllowOverride AuthConfig Limit Order allow,deny Allow from all Require all granted </Directory>`

5）现在终于用这个命令重新启动xampp /opt/lampp/lampp restart

就是这样，你就完成了！

它也适用于 xampp。:)

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2014-01-27T00:22:37.367

添加到 Sekar 答案

**不要忘记重启你的 XAMPP 服务器**

更新接受的答案：

现在你需要评论 Require local

```
#
# New XAMPP security concept
#
<LocationMatch "^/(?i:(?:xampp|security|licenses|phpmyadmin|webalizer|server-status|server-info))">
        #Require local
    ErrorDocument 403 /error/XAMPP_FORBIDDEN.html.var 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2019-11-25T11:24:15.567

在 osx 上登录到您的终端并执行

```
sudo nano /opt/lampp/etc/extra/httpd-xampp.conf 
```

并更换

```
<Directory "/opt/lampp/phpmyadmin">
    AllowOverride AuthConfig Limit
    Require local
    ErrorDocument 403 /error/XAMPP_FORBIDDEN.html.var
</Directory> 
```

有了这个

```
<Directory "/opt/lampp/phpmyadmin">
    AllowOverride AuthConfig Limit
    Order allow,deny
    Allow from all
    Require all granted
    ErrorDocument 403 /error/XAMPP_FORBIDDEN.html.var
</Directory> 
```

然后重启apache和mysql

或使用此命令

```
 /opt/lampp/xampp restart 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-01-07T07:00:31.853

> 嘿，使用这部分代码。
> 
> xampp 的路径是：apache\conf\extra\httpd-xampp.conf

```
 <LocationMatch "^/(?i:(?:xampp|security|licenses|phpmyadmin|webalizer|server-status|server-info))">
        Order deny,allow
        Allow from all
        #Allow from ::1 127.0.0.0/8 \
             #      fc00::/7 10.0.0.0/8 172.16.0.0/12 192.168.0.0/16 \
               #    fe80::/10 169.254.0.0/16

        ErrorDocument 403 /error/HTTP_XAMPP_FORBIDDEN.html.var
    </LocationMatch> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-06-10T05:29:48.650

我是较新版本的 xampp，您可以使用另一种方法首先打开您的 httpd-xampp.conf 文件并使用 ctrl+F 命令（Windows）找到字符串“phpmyadmin”。然后替换此代码

```
Alias /phpmyadmin "D:/server/phpMyAdmin/"
<Directory "D:/server/phpMyAdmin">
    AllowOverride AuthConfig
    Require local
    ErrorDocument 403 /error/XAMPP_FORBIDDEN.html.var
</Directory> 
```

有了这个

```
Alias /phpmyadmin "D:/server/phpMyAdmin/"
<Directory "D:/server/phpMyAdmin">
    AllowOverride AuthConfig
    Require all granted
    ErrorDocument 403 /error/XAMPP_FORBIDDEN.html.var
</Directory> 
```

**不要忘记重新启动 Xampp。**

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-07-16T05:25:58.627

上面的解决方案是正确的，但挑战在于找到特定的文件。

访问 mac [https://www.youtube.com/watch?v=OVGCXYZ-BoI](https://www.youtube.com/watch?v=OVGCXYZ-BoI)

访问 Windows [https://www.youtube.com/watch?v=MvYyEPaNNhE](https://www.youtube.com/watch?v=MvYyEPaNNhE)

说明（如果对视频不感兴趣）

> > 苹果电脑

脚步

1.  启动您的 xampp 应用程序
2.  启动服务

[![在此处输入图像描述](../Images/a71d748771a19461c9ce0cce25271bcc.png)](https://i.stack.imgur.com/Yk72J.png)

3.  单击卷菜单
4.  点击挂载
5.  点击探索

[![在此处输入图像描述](../Images/be8ed747e8324ab92c459f07bc8125e5.png)](https://i.stack.imgur.com/WvMMf.png)

> > *注意*它会打开 opt/lampp/ 窗口 [![在此处输入图像描述](../Images/c693a93e4c99046e21c0d87d5c9376b1.png)](https://i.stack.imgur.com/pcQuI.png)

6.  打开以下目录找到文件lamp/etc/extra/httpd-xampp-conf
7.  使用您选择的任何 IDE 打开文件，例如 Visual Studio 或 PhpStorm 或文本编辑器
8.  找到下面的代码并将其替换`Require local`为`Require all granted`.

> > > `Alias /phpmyadmin "D:/server/phpMyAdmin/" <Directory "D:/server/phpMyAdmin"> AllowOverride AuthConfig Require local ErrorDocument 403 /error/XAMPP_FORBIDDEN.html.var </Directory>`

9.  确保重新启动所有服务

10.  重新加载您的页面和 Whuala .....它的工作原理

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-01-14T16:47:21.313

放置“全部允许”后，您需要重新启动 xampp 以应用设置。谢谢

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-04-02T20:18:08.490

在 Xampp 5.6.3 Windows 路径 C:\xampp\apache\conf\extra\httpd-xampp.conf 在此注释：#Require local

> 新的 XAMPP 安全概念 ... #Require local ...

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-12T19:49:40.610

不需要更改文件中`/opt/lampp/etc/extra/httpd-xampp.conf.` 的所有配置您唯一需要更改的是`Require local` Require local 的意思很明显，所以只需更改为`Require all granted` Require all grant

***解决方案***

从`Require local` 到`Require all granted`

# python - Python - 返回一个比另一个大的值？

> ID：11999374
> 
> 赞同：0
> 
> 时间：2012-08-17T03:28:01.207
> 
> 标签：python

```
def all_gt(nums, n):
    i = []
    for c in nums:
        if c > n:
            i += c
    return i 
```

这是我使用的代码，“i”应该返回大于 n 的 nums 值。但我的括号内没有返回任何内容。例如，

`all_gt([1,2,3,4], 2) => [3,4]`

任何人都知道如何修复？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T03:30:43.500

您声明`i`为*list*，因此您需要`append`添加而不是添加。

```
def all_gt(nums, n):
    i = []
    for c in nums:
        if c > n:
            i.append(c)  ## <----- note this
    return i 
```

或者，您可以这样做：

```
 i += [c] 
```

代替追加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T03:29:33.157

突出您的 return 语句，使其不作为循环的一部分执行。

# java - 没有参数的继承构造函数

> ID：11999375
> 
> 赞同：3
> 
> 时间：2012-08-17T03:28:08.467
> 
> 标签：java, inheritance, arguments

我正在尝试创建一个无参数构造函数，它将从用户（通过 Scanner 类）获取所有实例变量的输入，但它是从另一个类继承的。

我该怎么做呢？

这是我所做的：

```
 public class Manager extends Super_Employee{
     String  manager ;

     /* String GetManger  (){
         return manager ;
     }*/

     Manager (){
        Scanner manager = new Scanner(System.in);
     }

     @Override
     String Print() {
         return ("the manager is : " +manager);
     } 
```

这是超级类：

```
 public  class Super_Employee extends abstract_Employee {

     String Fname ;
     String Lname;
     String address;
     int number;
     Super_Employee(String Fname,String Lname, String address, int number)
    {
        System.out.println("Constructing an Employee");
        this.Fname = Fname ;
        this.Lname = Lname;
        this.address = address;
        this.number = number;
    }  

 @Override
    String Print (){
    return ("the employee name is : "+Fname+ " "+ Lname+ " ,the Employee address is  : "
            + address + " ,the employee Phone # : "+number);   
} 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T03:35:59.070

当您需要在子类中定义一个不会调用超类中的非默认构造函数的默认构造函数时，您必须在子类中提供一个默认构造函数。令人困惑？看看这个例子。

```
public class Foo {
    public Foo( String x ) {
    }
}

public class Bar extends Foo {
    public Bar() {
        super(); // this is called implicitly even if this line is not provided! compilation error here
    } 
} 
```

在上面的示例中，子类构造函数将调用子类的默认构造函数 super()，因此您必须在超类中提供默认构造函数或这样编写子类：

```
public class Bar extends Foo {
    public Bar() {
        super( "hadoken!" ); // now it works, since it calls a constructor that exists
    } 
} 
```

现在，如果您没有在 Foo 类中提供任何构造函数，它将有一个默认构造函数（由编译器提供）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T03:37:15.897

在中添加一个无参数构造函数`Super_Employee`

```
Super_Employee() { } 
```

既然，你有

```
Super_Employee(String Fname,String Lname, String address, int number) {
    //... 
```

编译器不提供默认构造函数（这是构造函数本身提供的无参数构造函数）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T03:37:38.947

根据您的错误，听起来您的超类需要 3 个参数，但您正在尝试使用默认构造函数，因为您还没有这三个值的值。在这种情况下，我建议使用[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern#Encapsulation)来构造您的对象。

例子：

```
public class Manager extends Super_Employee{

    /** Factory method, reading constructor arguments from System.in */
    public static Manager make() {
        Scanner s = new Scanner(System.in);
        new Manager(s.next(), s.next(), s.next(), s.nextInt());
    }

    public Manager(String fName, String lName, String address, int number) {
        super(fName, lName, address, number);
    }

     // . . . 
```

使用工厂方法`Manager.make()`构造您的对象允许您在调用超级构造函数之前读取您需要的所有值`System.in`，这在构造函数中是不可能的`Manager`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T03:46:55.180

一些可能的选项：

1）使用静态构建器

```
public static Manager newManager() {

 .....

return new Manager(.....); 
```

2）创建无参数超级构造函数：

```
Super_Employee() {
   ...
}} 
```

3）可以使用“二等舱” - 相当丑陋，我不建议

```
public Manager() {
  this(new MyTemp());
}

public Manager(MyTemp temp) {
  super(temp.fname, temp.lname,....);
} 
```

# actionscript-3 - 将带有循环的鼠标事件侦听器分配给 10 个影片剪辑

> ID：11999376
> 
> 赞同：0
> 
> 时间：2012-08-17T03:28:08.820
> 
> 标签：actionscript-3, flash, event-listener

我正在尝试遍历我的 10 个“炸弹”电影剪辑并分配一个调用相同函数但传递当前电影剪辑名称的事件监听器。“炸弹”电影剪辑名称递增。

下面是我的尝试

```
 var i:number;
    i=0;
    while (i <= 10){
    var current_bomb:Movieclip = (movingbomb_+i);

       current_bomb.addEventListener(MouseEvent.ROLL_OVER, function updateBomb(current_bomb));

    i++
    }

    function updateBomb(currentBomb):void{

        currentBomb.gotoAndPlay(2);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:01:26.383

关闭，但不完全。此外，在这里使用`for`循环是一个更好的主意。通过这些更改，代码应如下所示：

```
for (var i:int = 0; i < 10; i++) {
    var currentBomb:MovieClip = this["movingbomb_" + i];
    currentBomb.addEventListener(MouseEvent.ROLL_OVER, function (evt:MouseEvent):void { updateBomb(currentBomb); });
}

function updateBomb(currentBomb:MovieClip):void {
    currentBomb.gotoAndPlay(2);
} 
```

这是它的工作原理。

1.  循环将`for`所有循环代码简化`while`为一条语句以提高效率。
2.  然后我们使用数组括号选择语法选择当前炸弹。为此，您使用`this[name]`, where`name`是一个字符串。我们使用的字符串将是“movingbomb_”，并附`i`加到末尾。
3.  最后，我们为每个新的事件监听器创建一个唯一的匿名函数，它将鼠标事件重定向到您的`updateBomb`函数并传递`currentBomb`对象。

# c# - 如何使用按钮更新gridview中选定行的单列？

> ID：11999379
> 
> 赞同：0
> 
> 时间：2012-08-17T03:28:21.873
> 
> 标签：c#, asp.net, gridview, checkbox

我在gridview的每一行末尾都有一个选择按钮。我还有一个单独的按钮，我想用它来更新所选行的一列。此列包含一个复选框，我想在单击按钮时将其选中。

我不想在 gridview 中使用更新按钮，因为我不希望用户能够更改任何其他列。

任何人都可以帮忙吗？我已经研究了一段时间了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:43:42.883

关于您的问题，您有很多选择。您可以使用 Gridview 的 RowCreated 或 RowDataBound 事件，甚至可以使用按钮 onclick 事件，如果该按钮位于 gridview 的同一行（只需获取发送者等//基于您的逻辑）。

这是一些代码片段

```
If

e.Row.RowType = DataControlRowType.DataRow Then
e.Row.Attributes.Add("onclick", Page.ClientScript.GetPostBackEventReference(sender,   
"Select$" & e.Row.RowIndex.ToString))

End If 
```

# ruby-on-rails - Rails 3.2 ApplicationController如何继承模块ApplicationController

> ID：11999382
> 
> 赞同：0
> 
> 时间：2012-08-17T03:28:41.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的 rails 3.2 项目中，我有一些这样的控制器：

```
/app/controllers/application_controller.rb
/app/controllers/college/application_controller.rb
/app/controllers/college/actors_controller.rb 
```

/app/controllers/college/actors_controller.rb 的内容如下：

```
class College::ActorsController < College::ApplicationController
end 
```

/app/controllers/college/application_controller.rb 的内容如下：

```
class College::ApplicationController < ApplicationController
  before_filter do
    puts "welcome"
  end
end 
```

如果我修改控制器，请重新加载 Web 浏览器。控制台可以输出字符串“welcome”。但是当我关闭 webrick，重新启动 webrick，然后重新加载网络浏览器时，控制台没有输出“欢迎”

看起来 College::ApplicationController 没有被加载？

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T11:53:14.250

我们遇到了类似的东西，完全定义的类定义解决了我们的问题。

值得尝试改变

```
class College::ActorsController < College::ApplicationController 
```

到

```
class College::ActorsController < ::College::ApplicationController 
```

和

```
class College::ApplicationController < ApplicationController 
```

到

```
class College::ApplicationController < ::ApplicationController 
```

# c# - 为什么在检查 FB 连接时 HttpContext.Current.Request.Cookies[fullCookie] 始终为 NULL？

> ID：11999383
> 
> 赞同：0
> 
> 时间：2012-08-17T03:28:58.837
> 
> 标签：c#, asp.net, .net, facebook, facebook-graph-api

我在使用 FB API 方面是全新的，我正在尝试从我的 Asp.net 应用程序发布到 facebook 墙上。

我从 FB 获得了 Appkey 和密钥，只是试图按照代码在 FB 墙上发布。

链接： http: [//kennetham.com/2010/07/21/facebook-api-asp-net/](http://kennetham.com/2010/07/21/facebook-api-asp-net/)

我现在面临的问题是，在我的 ConnectAuthentication 类中，HttpContext.Current.Request.Cookies[fullCookie] 始终为 NULL。因此，当我在我的页面加载中通过“if (ConnectAuthentication.isConnected())”检查 FB 连接时，它总是返回 false 并且它不会在条件内运行代码。

这是为什么？我错过了什么吗？

**ConnectAuthentication 类**

```
public class ConnectAuthentication
{
    public ConnectAuthentication()
    {

    }

    public static bool isConnected()
    {
        return (SessionKey != null && UserID != -1);
    }

    public static string ApiKey
    {
        get
        {
            return ConfigurationManager.AppSettings["APIKey"];
        }
    }

    public static string SecretKey
    {
        get
        {
            return ConfigurationManager.AppSettings["Secret"];
        }
    }

    public static string SessionKey
    {
        get
        {
            return GetFacebookCookie("session_key");
        }
    }

    public static long UserID
    {
        get
        {
            long userID = -1;
            long.TryParse(GetFacebookCookie("user"), out userID);
            return userID;
        }
    } 
    private static string GetFacebookCookie(string cookieName)
    {
        string retString = null;
        string fullCookie = ApiKey + "_" + cookieName; 

        if (HttpContext.Current.Request.Cookies[fullCookie] != null)
            retString = HttpContext.Current.Request.Cookies[fullCookie].Value;

        return retString;
    }
} 
```

**以下是在我的页面加载中使用 ConnectAuthentication 类的方式：**

```
 if (ConnectAuthentication.isConnected())
                {
                    Facebook.Session.ConnectSession session = new Facebook.Session.ConnectSession(ConnectAuthentication.ApiKey, ConnectAuthentication.SecretKey);

                    _connectSession = new ConnectSession(ConnectAuthentication.ApiKey, ConnectAuthentication.SecretKey);

                    Api _facebookAPI = new Api(_connectSession);

                    _connectSession.UserId = ConnectAuthentication.UserID;
                    Facebook.Rest.Api api = new Facebook.Rest.Api(_connectSession);

                    //Display user data captured from the Facebook API.

                    Facebook.Schema.user user = api.Users.GetInfo();
                    string fullName = user.first_name + " " + user.last_name;
                    Panel1.Visible = true;
                    Label1.Text = fullName;

                }
                else
                {
                    //Facebook Connect not authenticated, proceed as usual.
                }
           } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T03:36:54.320

该代码完美运行...

```
<input type="button" id="fblogin" value="Login to Facebook" disabled="disabled" style="display:none"/>
        <fb:login-button v="2" length="long" onlogin="window.location = 'Default.aspx'">Login to Facebook</fb:login-button>

<div id="fb-root"></div>
<script>
    window.fbAsyncInit = function () {
        FB.init({
            appId: '<%: Facebook.FacebookApplication.Current.AppId %>',
            cookie: true,
            xfbml: true,
            oauth: true
        });

        function facebooklogin() {
            FB.login(function (response) {
                if (response.authResponse) {
                    // user authorized
                    // make sure to set the top.location instead of using window.location.reload()
                    top.location = '<%= this.ResolveCanvasPageUrl("~/") %>';
                } else {
                    // user cancelled
                }
            }, { scope: '<%: string.Join(",", ExtendedPermissions) %>' });
        };

        $(function () {
            // make the button is only enabled after the facebook js sdk has been loaded.
            $('#fblogin').attr('disabled', false).click(facebooklogin);
        });
    };
    (function () {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
    } ());
</script> 
```

# c# - 从安装程序打开时，主程序窗口有时会隐藏在前一个窗口后面

> ID：11999385
> 
> 赞同：0
> 
> 时间：2012-08-17T03:29:11.677
> 
> 标签：c#, winforms, installation, window, modal-dialog

我尝试了两个安装程序——Setup2go 和 Installmate Builder，我也遇到了同样的问题。在安装的最后一个窗口，我选择“安装完成后打开程序”选项，有时（大约 10% 的时间？），我的（Winforms）应用程序的主窗口会在我使用的 Windows Explorer 目录窗口后面打开从中打开安装 exe。

令人沮丧的是 - 我无法可靠地重现问题（问题似乎发生在大约 10-20% 的时间）。如果这有什么不同，我正在使用 Windows 7。为了澄清，如果我直接打开可执行文件（而不是从安装 exe），问题永远不会发生。

我对这类事情的了解是有限的 - 我记得[这个问题的 MessageBox 发生了类似的挫败感](https://stackoverflow.com/questions/3467403/dialog-messagebox-sometimes-hidden-behind-the-main-form)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T17:23:59.240

当您直接从安装程序启动应用程序时不会发生这种情况，因为 shell 允许它“窃取”焦点。当您从安装程序启动它时，最后一次交互发生在安装程序应用程序中。系统会阻止新窗口从您的安装程序中窃取焦点。如果安装程序窗口关闭，则用于启动安装程序的资源管理器窗口将被激活。由于最近发生了前台窗口的切换，系统不允许更改前台窗口。

另一方面，如果您的应用程序窗口在安装程序窗口从屏幕上消失之前显示，则该应用程序将按 Z 顺序放置在安装程序的下方；当安装程序窗口最终被隐藏时，应用程序窗口被激活。

所以这都与显示和隐藏窗口之间的时间有关。
[虽然我不是这方面的专家。您可以使用消息跟踪器和 WinAPI 调用跟踪器（如 Spyxx），它们可以为您提供有关系统中发生的情况以及为什么应用程序的新窗口位于资源管理器窗口下方的更多详细信息。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-03T07:04:41.283

确保窗口的标题没有改变，直到最后一刻。我将`Text = "blahblah"`行移出 Form_load 事件，进入 Form1_Shown 事件，现在隐藏的任务栏图标问题已经消失。此外，窗口在加载时不会闪烁。

# ruby - FileUtils 更新了吗？Ruby 中的问题

> ID：11999396
> 
> 赞同：0
> 
> 时间：2012-08-17T03:30:11.693
> 
> 标签：ruby, linux, file-io, filesystems, rake

我用的是最新的？Ruby 中的方法来确定是否必须重新编译/重新链接/重新生成文件等。有时我使用的构建框架在这些步骤中非常快，以至于输出文件和先决条件文件具有完全相同的文件修改时间戳. 这会导致构建框架不必要地重新编译/重新链接文件。

我比较像这样构建的时间戳 -

```
compile_file(file) unless uptodate?(file, %W(#{dependencies})) 
```

我查找了最新的来源？从[这里开始](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/fileutils/rdoc/FileUtils.html#method-c-uptodate-3F)，它看起来像这样 -

```
def uptodate?(new, old_list, options = nil)
  raise ArgumentError, 'uptodate? does not accept any option' if options
  return false unless File.exist?(new)
  new_time = File.mtime(new)
  old_list.each do |old|
    if File.exist?(old)
      return false unless new_time > File.mtime(old)
    end
  end
  true
end 
```

正如所怀疑的，如果时间戳相等，它会返回 false。解决这个问题的最优雅的方法是什么？我曾尝试在 Linux 和 Windows 上运行该框架，但我遇到了同样的问题。从我[在这里](https://github.com/joeyates/rake-builder#file-modification-time-resolutions)阅读的内容来看，这不太可能是文件系统特定的文件修改时间分辨率问题（因为 ext4 的分辨率为 1 微秒）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T04:21:10.843

看起来 Ruby 的`File`对象不支持文件修改时间戳的亚秒级分辨率，即使底层文件系统支持。一种解决方案是`ls --full-time`使用 Ruby 解析并解析结果`DateTime`，它确实支持几分之一秒：

```
module FileUtilsPlus
  def self.uptodate?(new, old_list, options = nil)
    return true if FileUtils.uptodate?(new, old_list, options)
    return false unless File.exist?(new)
    new_time = filemtime(new)
    old_list.each do |old|
      if File.exist?(old)
        return false unless new_time > filemtime(old)
      end
    end
  end

  def self.filemtime(path)
    DateTime.parse(`ls --full-time foo | awk '{ print $6 " " $7 }'`)
  end
end 
```

请注意，这将比 Ruby 的本机文件操作要慢得多，所以我们只会在`FileUtils::uptodate?`返回 false 时使用这个魔法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T04:17:56.033

`uptodate?`似乎是正确的。如果时间戳相等，则文件可能是最新的，也可能不是。因此，它在安全方面犯了错误并宣布它已过时。

在构建文件的步骤中，添加逻辑以将构建文件的时间提前一秒（如果它等于其依赖项的时间）。是的，这是一个 hack，但在这种情况下可能是你能做的最好的。

一些文件系统（ext4 等）可以存储具有亚秒级分辨率的时间戳，可能值得一看。

除非上述任何一项，您都可以更新猴子补丁？或者只是在时间戳相等时创建自己的错误而不是构建。

# javascript - 多个JS事件调用同一个函数时如何处理

> ID：11999398
> 
> 赞同：2
> 
> 时间：2012-08-17T03:30:39.103
> 
> 标签：javascript, javascript-events

如何处理多个JS事件来调用同一个函数..请看代码..

我的要求是检查在文本框中输入的客户代码的唯一性。所以我使用这样的东西。

我的代码：

```
<input type="text" 
onblur="function1(arg1,arg2)" 
onclick="function1(arg1,arg2)"
onfocus="function1(arg1,arg2)"> 
```

那么，有没有其他更好的方法来重写这段代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T03:44:55.820

纯JS：

```
window.onload=function() {
  var fld = document.getElementById("yourfieldid");
  fld.onblur=fld.onfocus=fld.onclick=function() {
    function1(arg1,arg2);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T03:36:36.200

如果您可以使用 jquery，您可以执行以下示例：

```
$('#foo').on('mouseenter mouseleave', function() {
  $(this).toggleClass('entered');
}); 
```

参考：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

根据您的目标，您可能希望绑定到更清楚地识别您的用例需求的不同事件。也许 onChange？

# php - 发送电子邮件的简单脚本？

> ID：11999400
> 
> 赞同：1
> 
> 时间：2012-08-17T03:30:47.557
> 
> 标签：php, sendmail, content-type

我使用代码发送电子邮件：

```
<?php
$to = "someone@example.com";
$subject = "Test mail";
$message = "Hello! This is a simple email message.";
$from = "someonelse@example.com";
$headers = "From:" . $from;
mail($to,$subject,$message,$headers);
echo "Mail Sent.";
?> 
```

但我得到了：

sendmail：致命：chdir /Library/Server/Mail/Data/spool：没有这样的文件或目录

而且我不知道如何添加附件，重要的是我需要为附件指定 Content-Type，有人可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:55:17.313

```
<?php 

$to = "someone@example.com";
$subject = "Test mail";
$from = "someonelse@example.com <someonelse@example.com>";
$message = "Hello! This is a simple email message.";

// let's say you want to email a comma-separated-values
$tofile = "col1,col2,col3\n";
$tofile .= "val1,val1,val1\n";

$filename  = "filename.csv";
$random_hash = md5(date('r', time())); 
$attachment = chunk_split(base64_encode($tofile)); 

$headers = "From: " . $from . "\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: multipart/mixed; boundary=\"PHP-mixed-".$random_hash."\"\r\n"; 
$headers .= "X-Priority: 3\r\n";
$headers .= "X-MSMail-Priority: Normal\r\n";    
$headers .= "X-Mailer: PHP/" . phpversion();

$body = "--PHP-mixed-".$random_hash."\r\n";
$body .= "Content-Type: text/plain; charset=\"UTF-8\"\r\n";
$body .= "Content-Transfer-Encoding: 8bit\r\n";
$body .= $message;
$body .= "\r\n\r\n";
$body .= "\r\n--PHP-mixed-" . $random_hash . "\r\n\r\n";

$body .= "--PHP-mixed-".$random_hash."\r\n";
$body .= "Content-Transfer-Encoding: base64\r\n";
$body .= "Content-Type: text/comma-separated-values; name=\"" . $filename . "\" charset=\"UTF-8\"\r\n"; 
$body .= "Content-Disposition: attachment; filename=\"" . $filename . "\"\r\n\r\n";
$body .= $attachment;
$body .= "\r\n--PHP-mixed-".$random_hash."--";

mail($to, $subject, $body, $headers);

?> 
```

# php - 将html表单值传递给php文件

> ID：11999401
> 
> 赞同：1
> 
> 时间：2012-08-17T03:31:01.163
> 
> 标签：php, html

无论我是否输入错误 ID 的值..在这两种情况下，php 标记之间的代码都会显示为输出。有人可以帮我找出原因。代码如下：

html文件------------------------------------------------ -------------

```
<!DOCTYPE html PUBLIC"-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Bug Report</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
</head>
 <body>
<h2>Bug Report</h2>
<form action="test.php"  method="post"  >
<p>Bug ID:<input type="text" name="bugid" size="20" /></p>      
<p><input type="submit" value="Record Bug" /></p> 
</form>  
</body> 
</html> 
```

php文件------------------------------------------------ --

```
<!DOCTYPE html PUBLIC"-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Record Bug</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
</head>
<body>

<?php
                $bugid=$_POST["bugid"];
                echo $bugid;
if (empty($bugid))
    {
            echo "<p>You must enter the Bug ID to record the bug.</p>";
    }     
else
    {
    echo"<p>good</p>";          
                    }
?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T03:34:42.830

如果您在输出中获得 PHP 代码，那么您的网络服务器没有通过 PHP 解释器运行该页面/脚本。通常，这是因为您已将代码放入 .html 文件中，默认情况下不会将其视为 PHP。

将文件重命名为`whatever.php`，或重新配置您的网络服务器以将 .html 文件视为 PHP 脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T03:41:39.273

检查 php 是否在您的机器上运行。将以下代码另存为 test.php 并运行它

```
<?php

   phpinfo();

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T03:51:34.227

1.  检查 php 是否正常工作以编写代码`<?php phpinfo(); ?>`，如果手动安装了 php apache 并遇到问题，请尝试[wamp 服务器](http://www.wampserver.com/en/)

2.  您的代码对 sql-injunction 广泛开放，以使其安全使用

* * *

```
public function mysql_prep( $value ) {
        $magic_quotes_active = get_magic_quotes_gpc();
        $new_enough_php = function_exists( "mysql_real_escape_string" ); // i.e. PHP >= v4.3.0
        if( $new_enough_php ) { // PHP v4.3.0 or higher
            // undo any magic quote effects so mysql_real_escape_string can do the work
            if( $magic_quotes_active ) { $value = stripslashes( $value ); }
            $value = mysql_real_escape_string( $value );
        } else { // before PHP v4.3.0
            // if magic quotes aren't already on then add slashes manually
            if( !$magic_quotes_active ) { $value = addslashes( $value ); }
            // if magic quotes are active, then the slashes already exist
        }
        return $value;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T03:37:49.160

在这种情况下，您必须在支持 Xampp 或 Wamp 等 PHP 的服务器上运行，并且文件的扩展名应该是 .php

# xml - 使用 FLEX 删除不需要的 XML 节点

> ID：11999411
> 
> 赞同：0
> 
> 时间：2012-08-17T03:31:48.640
> 
> 标签：xml, apache-flex, xml-parsing

我有一个 FLEX 应用程序，它当前正在接收下面的 XML。我需要通过摆脱不需要的节点来清理它，但保留他们的孩子。我尝试了各种删除组合，但我最终也总是删除孩子。

我得到了什么：

```
<cmisObject folder="true" name="documentLibrary">
  <children>
    <cmisObject folder="true" name="Test Folder">
      <children>
        <cmisObject folder="false" name="Test Word Doc.doc">
          <children/>
        </cmisObject>
        <cmisObject folder="false" name="Test Excel.xls">
          <children/>
        </cmisObject>
        <cmisObject folder="true" name="Test SubFolder">
          <children>
            <cmisObject folder="false" name="TestSubFolderDoc.doc">
              <children/>
            </cmisObject>
          </children>
        </cmisObject>
      </children>
    </cmisObject>
    <cmisObject folder="false" name="TestMainDoc.doc">
      <children/>
    </cmisObject>
  </children>
</cmisObject> 
```

我想将其更改为：

```
<cmisObject folder="true" name="documentLibrary">
    <cmisObject folder="true" name="Test Folder">
        <cmisObject folder="false" name="Test Word Doc.doc">
        </cmisObject>
        <cmisObject folder="false" name="Test Excel.xls">
        </cmisObject>
        <cmisObject folder="true" name="Test SubFolder">
            <cmisObject folder="false" name="TestSubFolderDoc.doc">
            </cmisObject>
        </cmisObject>
    </cmisObject>
    <cmisObject folder="false" name="TestMainDoc.doc">
    </cmisObject>
</cmisObject> 
```

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:41:35.627

嗨下面的代码可以帮助你： -

我尝试了一些解决方法来实现您正在寻找的东西：-

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
        <fx:XML id="sampleXML" format="e4x" >
            <cmisObject folder="true" name="documentLibrary">
                <children>
                    <cmisObject folder="true" name="Test Folder">
                        <children>
                            <cmisObject folder="false" name="Test Word Doc.doc">
                                <children/>
                            </cmisObject>
                            <cmisObject folder="false" name="Test Excel.xls">
                                <children/>
                            </cmisObject>
                            <cmisObject folder="true" name="Test SubFolder">
                                <children>
                                    <cmisObject folder="false" name="TestSubFolderDoc.doc">
                                        <children/>
                                    </cmisObject>
                                </children>
                            </cmisObject>
                        </children>
                    </cmisObject>
                    <cmisObject folder="false" name="TestMainDoc.doc">
                        <children/>
                    </cmisObject>
                </children>
            </cmisObject>
        </fx:XML>
    </fx:Declarations>

    <fx:Script>
        <![CDATA[

            private function parseHandler():void
            {
                var newXMLString:String = removeElements(String(sampleXML));
                var responseXML:XML = new XML(newXMLString);
                trace(responseXML)
            }

            private function removeElements(inputXml:String):String
            {
                inputXml = inputXml.split('<children>').join('');
                inputXml = inputXml.split('</children>').join('');
                inputXml = inputXml.split('<children/>').join('');
                return inputXml;
            }

        ]]>
    </fx:Script>

    <s:Button id="btnID" label="Parse XML" click="parseHandler()"/>

</s:Application> 
```

输出： -

```
<cmisObject folder="true" name="documentLibrary">
  <cmisObject folder="true" name="Test Folder">
    <cmisObject folder="false" name="Test Word Doc.doc"/>
    <cmisObject folder="false" name="Test Excel.xls"/>
    <cmisObject folder="true" name="Test SubFolder">
      <cmisObject folder="false" name="TestSubFolderDoc.doc"/>
    </cmisObject>
  </cmisObject>
  <cmisObject folder="false" name="TestMainDoc.doc"/>
</cmisObject> 
```

# rest - GlassFish 错误：JAX-RS EJB 支持已禁用

> ID：11999413
> 
> 赞同：19
> 
> 时间：2012-08-17T03:32:11.380
> 
> 标签：rest, glassfish, ejb, jersey

我正在尝试在 GlassFish 3.1.2.2 上使用 Jersey JAX-RS + EJB 3.1 的简​​单应用程序。在我添加 EJB 之前，GlassFish 上的 Jersey REST 似乎一切都很好。部署war文件时，出现此错误。

`SEVERE: Error when configuring to use the EJB interceptor binding API. JAX-RS EJB support is disabled.`

有谁遇到过这种情况？GlassFish 中是否有解决此问题的配置？

我的 EJB 是一个带有注释`@Singleton`的简单 pojo。`@PostConstruct`

```
@Singleton
public class PurchaseBean {
    private String name;

    @PostConstruct
    public void init() {
        System.out.println("Initializing PurchaseBean");
        setName("Purchase Singleton EJB");
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-17T05:53:24.083

看起来这是一个 Eclipse 问题。我使用带有 GlassFish 适配器的 Eclipse 进行了部署。重启 Eclipse 解决了。

`Solution: Shutdown GlassFish, inside Eclipse go to Project->Clean(select project) and then start GlassFish again.`

我不知道为什么，但它奏效了。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-29T22:17:43.177

工作解决方案或独立运行 Glassfish 的解决方案：重新启动 Glassfish。Glassfish 版本号 4.1.2

# java - 我应该使用什么方法来保持列表中带有键的项目的顺序（Java）？

> ID：11999415
> 
> 赞同：0
> 
> 时间：2012-08-17T03:32:20.947
> 
> 标签：java, list

如果出现以下情况，我应该使用什么方法将项目保存在列表中：

1.  我有一个包含项目列表的对象，可以对这些项目执行操作
2.  这些项目在列表中排序
3.  我需要能够更改列表中项目的位置，并根据其 id 添加或删除项目。
4.  该列表最终将保存到数据库中（并且项目需要在此列表中保持其顺序）
5.  在已订购的项目上拥有属性“order”是没有意义的（这些对象可以在多种列表中）。

我有的选择（还有其他选择吗？）：

1.  使用 List 对象，这样它就会自动保持顺序。但是我必须遍历所有对象（更糟糕的是）才能通过 Id 找到对象。
2.  使用带有键/值（对象 ID / 对象）的映射，因此很容易检索对象（并且快速）并保留另一个仅保持对象顺序的映射（对象 ID / 对象顺序）

**解决方案 #1）**这似乎是最简单的解决方案，但存在性能缺陷。

**解决方案#2）**这似乎是最快的解决方案，但在重新排序列表时代码更多。

是否有一个我不知道的对象将被订购，具有键/值对并具有像 object.add(index, key, value) 或 object.getByIndex(index) 或 object.getByKey(key) 这样的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:01:18.827

正如`Roni`建议的那样，您需要使用自己的数据结构。我相信这是满足您要求的唯一可行选择。

我已经做了一个示例来填写您的要求`starting point`，您可以在此基础上进行构建。

```
public class MapAndList {

    private List<String> keys = new ArrayList<String>();
    private Map<String, Object> keyValuePair = new HashMap<String, Object>();

    public void addItem(String key, Object item) {
        // TODO if the key is already present in the list throw exception
        keys.add(key);
        keyValuePair.put(key, item);
    }

    public void removeItem(String key) {
        keys.remove(key);
        keyValuePair.remove(key);
    }

    public void removteItem(int index) {
        removeItem(keys.get(index));
    }

    public void addItem(String key, Object item, int index) {
        keys.add(index, key);
        keyValuePair.put(key, item);
    }

} 
```

希望这可以帮助你....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T03:50:23.937

如果您的项目不会重复，则使用 indexOf() 方法获取对象的索引，然后您可以使用 get(int Index) 直接访问对象

还覆盖 Item 对象的 equals 方法以返回基于 ID 的比较，因此您将获得基于 Id 的重试。

刚刚检查了 indexOf 方法的源代码，它只遍历整个列表:(

# python - Python argparse：metavar 和 action=store_true 一起

> ID：11999416
> 
> 赞同：11
> 
> 时间：2012-08-17T03:32:49.477
> 
> 标签：python, argparse

我在 Python 中使用 argparse 模块来解析在命令行界面中键入的参数。我对子解析器对象进行了以下 add_argument 调用：

```
submit_parser.add_argument('-pv','--provision',metavar='PROVISION', dest='PROVISION',
                                 help='provision system',
                                 action='store_true', default=False, required=False) 
```

我收到此错误：

```
Traceback (most recent call last):
  File "./scripts/tp4", line 94, in <module> 
    main()
  File "./scripts/tp4", line 74, in main 
    modloader.loadModules(sub_parsers)
  File "/usr/lib/python2.6/site-packages/tp4/cli/Moduleloader.py", line 66, in loadModules 
    registered_modules[module_name].setSubparserArgs(module_sub_parser)
  File "/usr/lib/python2.6/site-packages/tp4/cli/modules/AutotestModule.py", line 135, in setSubparserArgs
    action='store_true', default=False, required=False)
  File "/usr/share/tp4/cli/zip/argparse.zip/argparse.py", line 1302, in add_argument
    TypeError: __init__() got an unexpected keyword argument 'metavar' 
```

如果我删除 action 或 metavar 参数，它会起作用。为什么两个人不能在一起？[http://docs.python.org/dev/library/argparse.html](http://docs.python.org/dev/library/argparse.html)的 argparse 文档中没有关于此限制的内容。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-17T04:01:48.487

元变量仅对位置参数有意义（想想命令行末尾的文件名）或当参数接受自己的参数时（如`--input-files foo.txt bar.txt`）。

您的`--provision`论点是一个标志，因为您将 设置`action`为`store_true`。它不接受任何参数（即`nargs`未设置）。因此，拥有元变量是没有意义的。

从[文档](http://docs.python.org/dev/library/argparse.html#metavar)[中`argparse`](http://docs.python.org/dev/library/argparse.html#metavar)：

> 当`ArgumentParser`生成帮助消息时，它需要某种方式来引用每个预期的参数。默认情况下，`ArgumentParser`对象使用 dest 值作为每个对象的“名称”。默认情况下，对于位置参数动作，直接使用 dest 值，对于可选参数动作，dest 值是大写的。因此，单个位置参数 with`dest='bar'`将被称为 bar。`--foo`应跟随单个命令行参数的单个可选参数将被称为 FOO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-04T19:24:37.113

要从@pwc 中提取答案，您需要使用`dest`而不是`metavar`.

# security - 有没有类似 Fortify 的开源软件？

> ID：11999418
> 
> 赞同：7
> 
> 时间：2012-08-17T03:32:57.950
> 
> 标签：security, open-source, findbugs, pmd, fortify

我一直在为我的应用程序使用 PMD 和 Findbug，但 fortify 设法检测到我的应用程序中的一些安全漏洞。我想知道是否有其他开源软件可以完成与 Fortify 类似的工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T18:55:03.070

如果您的重点是安全，您可以从其他安全规则中受益。[Find Security Bugs](http://h3xstream.github.io/find-sec-bugs/)是一组 FindBugs 检测器。

**免责声明**：我是工具提及的作者

以下是 nist 维护的静态分析器的详尽列表：http: [//samate.nist.gov/index.php/Source_Code_Security_Analyzers.html](http://samate.nist.gov/index.php/Source_Code_Security_Analyzers.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T19:21:27.240

[Sonar](http://www.sonarsource.com/products/features/)与 Fortify 非常相似。但是，它更多地关注代码质量/指标而不是安全性。信息上有一些重叠。此外，还有一些 Sonar 插件，例如[安全规则](http://docs.codehaus.org/display/SONAR/Security+Rules+Plugin)，可让您添加更多安全指标。

# configuration - 在 emacs org-mode 中归档到文件底部

> ID：11999419
> 
> 赞同：0
> 
> 时间：2012-08-17T03:33:16.467
> 
> 标签：configuration, org-mode

我希望我的存档位于当前文件的底部，而不是单独的 .org_archive 文件。我该如何配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:16:15.397

您需要配置`org-archive-location`，您可以在文件中设置标题以进行归档：

> "::* Archived Tasks" 存档在当前文件的顶级标题“* Archived Tasks”下。

完整文档在这里： http: [//orgmode.org/worg/doc.html#org-archive-location](http://orgmode.org/worg/doc.html#org-archive-location)

# iphone - 有什么方法可以将 iPhoneDriver 连接到嵌入在本机应用程序中的现有 UIWebView？

> ID：11999423
> 
> 赞同：1
> 
> 时间：2012-08-17T03:34:05.700
> 
> 标签：iphone, ipad, selenium, webdriver

我的项目是一个混合项目，一个具有嵌入式 UIWebView 的本机应用程序，因此为了对其运行自动化测试，我需要同时处理本机控件和 Web 元素。

对于原生控件，我可以使用 Apple 的自动化类，但对于嵌入式 UIWebView，我想使用 Selenium iPhoneDriver。无论如何要将 iPhoneDriver 连接到嵌入在本机应用程序中的现有 UIWebView？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:50:10.457

我们处于同样的情况，正在积极调查此事。 [http://code.google.com/p/selenium-uiwebview/](http://code.google.com/p/selenium-uiwebview/)看起来对我们很有希望。

# mysql - 连接 JSP 和 MYSQL 的异常

> ID：11999426
> 
> 赞同：0
> 
> 时间：2012-08-17T03:34:47.277
> 
> 标签：mysql, jsp

我通过 WAMP 服务器在 Tomcat 和 MySQL 上运行 JSP。我无法将 JSP 连接到 MySQL。这是代码

```
<% 
try {
/* Create string of connection url within specified format with machine name, 
port number and database name. Here machine name id localhost and 
database name is usermaster. */ 
String connectionURL = "jdbc:mysql://localhost:3306/database"; 

// declare a connection by using Connection interface 
Connection connection = null; 

// Load JBBC driver "com.mysql.jdbc.Driver" 
Class.forName("com.mysql.jdbc.Driver").newInstance(); 

/* Create a connection by using getConnection() method that takes parameters of 
string type connection url, user name and password to connect to database. */ 
connection = DriverManager.getConnection(connectionURL, "root", "");

// check weather connection is established or not by isClosed() method 
if(!connection.isClosed())
%>
<% 
out.println("Successfully connected to " + "MySQL server using TCP/IP...");
connection.close();
}
catch(Exception ex){
%>
<%
out.println("Unable to connect to database."+ex.toString());
}
%> 
```

我什至放在`mysql-connector-java-5.0.8.jar`文件`/lib`夹中。谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T03:50:05.327

您必须将文件复制到webapp的`mysql-connector-java-5.0.8.jar`文件夹中。`WEB-INF/lib``context`

Java EE Web 应用的文件夹结构必须是：

```
/webapp   <--- This is known as `context` folder
|
|-------/WEB-INF
|       |
|       |-----------/classes
|       | 
|       |-----------/lib
|                    mysql-connector-java-5.0.8.jar
| sample.jsp 
```

要请求 sample.jsp，

```
http://localhost:here_is_port_number/webapp/sample.jsp 
```

我建议您在 tomcat[自动部署文件夹中创建您的网络应用程序 - C:\apache-tomcat-7.0.29\webapps\](http://tomcat.apache.org/tomcat-7.0-doc/appdev/deployment.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T03:45:54.077

编辑：通过讨论，确定没有找到该类，因为需要重新启动服务器。

如果您能告诉我们异常实际上是什么，那将非常有帮助。

根据您提供的信息，可能有以下几点：

*   您的 jdbc 资源未在 server.xml 中定义（或任何其他可以定义的位置）
*   您的连接恢复为空，但您正在调用它的方法。

我也从来没有以这种方式访问​​过资源。通常，我将 JNDI 查找与来自 InitialContext 的数据源一起使用。

# c++ - 尺寸，长度转换？

> ID：11999430
> 
> 赞同：0
> 
> 时间：2012-08-17T03:35:14.113
> 
> 标签：c++, matlab

（我知道我问了很多关于这个的问题！）

基本上，我正在尝试将一些代码从 Matlab 转换为 C++，我遇到了这个问题：

```
n = sum(size(blocks)) - len; 
```

现在我已经计算了向量的总和，我有了长度，但我不知道“大小”是做什么的？因为在 C++ 中 .size() 将返回向量的大小。

有任何想法吗？（不要求代码）！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T03:42:12.670

在 MatLab 中，`size`返回一个向量（或矩阵）的所有维度的向量。所以如果`blocks`是一个 4x2 矩阵，那么`sum(size(blocks))`将返回`6`. 如果维数为 2 或更少，则结果始终包含 2 个元素。 *即*长度为 5 的列向量将返回`[5 1]`，而相同长度的行向量将返回`[1 5]`。

看到有点奇怪`sum(size(?))`。您经常看到`prod`代替`sum`，它将所有维度相乘。

无论如何，希望能满意地回答您的问题=）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T03:41:33.047

```
d = size(X) return the sizes of each dimension of array X in a vector d. 
```

以免说你有`d = size(rand(2,3,4))`那么这将返回 d = 2 3 4 。基本上，它为您提供了该数组中每个块的大小

# python - Python 的 argv 和 bash？

> ID：11999431
> 
> 赞同：1
> 
> 时间：2012-08-17T03:35:18.663
> 
> 标签：python, bash, argv

我一直在学习和消除对 pythons 的一些误解`sys.argv`。当我在 bash 中从命令行传递不同的字符时，我注意到：

```
script.py

import sys
def test(x):
    return x

print test(sys.argv)

>>>python script.py [first, second, third] 
```

将打印：

```
['script.py', '[first,', 'second,', 'third]'] 
```

和

```
>>>python script.py {first, second, third}

['script.py', '{first,','second,','third}'] 
```

但：

```
>>>python script.py (first,second,third)

bash: syntax error near unexpected token `(' 
```

这是python还是bash，也许两者兼而有之？有什么理由吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T03:36:45.373

这是重击；parens 在子 shell 中运行命令链。

```
pwd ; ( cd /tmp ; pwd ) ; pwd 
```

如果要在参数中使用括号，则需要引用它们。

```
echo '(foo)' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T03:36:50.210

这是`bash`错误消息显示的外壳：

```
bash: syntax error near unexpected token `(' 
```

`bash`为自己的目的使用括号（对命令进行分组）

尝试像这样转义括号：

```
 python script.py "(first,second,third)" 
```

这也可能有效：

```
 python script.py \(first,second,third\) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T04:00:10.577

正如@Ignacio 所说，尝试在 bash 命令行中引用每个参数。

但是，您似乎将 bash 视为 Python 方式。它们是不同的东西。

这里有一个很好的（和基本的）shell 脚本教程：[http ://www.freeos.com/guides/lsst/](http://www.freeos.com/guides/lsst/)

你只需要阅读第 2 章就知道你的问题的答案。

# javascript - 从框架内获取浏览器高度

> ID：11999433
> 
> 赞同：1
> 
> 时间：2012-08-17T03:35:48.303
> 
> 标签：javascript, jquery, height

我正在使用 Moodle：![模块](../Images/e53bbbd9e72e52c709c433311db01d5d.png)

我正在尝试从框架内运行一些 Javascript 来获取浏览器窗口的高度，因此如果他们使用的浏览器尺寸不够理想，我可以提醒用户。

我试过这样的事情：

```
window.top.document.body.offsetHeight
document.documentElement.clientHeight
$(document).height()
$(window).height() 
```

但是它们都给出了静态高度，当我调整浏览器大小时这些高度永远不会改变。

哦，它必须在 IE8 中工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T04:10:58.000

您必须使用`parent`iFrame 窗口的属性：

从 iFrame 中运行此代码，它将返回父窗口的高度：

```
$(window.parent).height(); 
```

但是，如果您使用的是 jQuery 1.8.0，如果您的浏览器处于[quirks 模式](http://en.wikipedia.org/wiki/Quirks_mode)，这可能无法正常工作。从 jQuery 1.8.0 开始，该命令`$(window).height()`在 quirks 模式下停止对 Internet Explorer 工作，并且他们[不打算修复它](http://bugs.jquery.com/ticket/12310)。

如果您使用的是 jQuery 1.8.0，请改用这个细微的变化：

```
$(window.parent.document).height(); 
```

这将确保跨浏览器支持，即使在 IE 怪癖模式下也是如此；）

[http://www.w3schools.com/jsref/prop_win_parent.asp](http://www.w3schools.com/jsref/prop_win_parent.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T04:09:06.303

一个简单的解决方案是从 iframe 返回文档高度调用父文档函数

**iframe Javascript**：

```
alert(top.getDocHeight()); 
```

**主文档 Javascript**：

```
function getDocHeight()
{
    return $(window).height();

} 
```

# facebook - 显示活动参与者：Eventbrite / Eventful 实施

> ID：11999434
> 
> 赞同：0
> 
> 时间：2012-08-17T03:35:55.330
> 
> 标签：facebook, facebook-graph-api, eventbrite

我正在创建一个事件列表网站，例如**eventbrite.com**。有可以创建活动的组织者和可以注册活动的用户。

用户需要通过 Facebook 登录系统。在这种情况下，我可以存储他们的 facebook_id。

我的问题是，如何获取特定用户的好友列表（参加活动的好友）并显示在活动下方？

实际上我对此有一个想法：

**解决方案 I**
当一个登录的用户参加一个活动时，我可以用活动 ID 保存他的 facebook_id。

**活动参加者表**
facebook_id | ---- 事件_id
42343453424 | ---- 08
34534534544 | ---- 08
23424243224 | ---- 10

当另一个用户登录时，我可以获取他的朋友 facebook_ids 并尝试与 Event Attenders 表匹配。

示例：
user_friend_list = [ 42343453424 , 23424243224 , 4345345345 , 245345433 ,...等 ]

我必须从 user_friend_list 数组 (42343453424) 中获取第一个用户并在**Event Attenders 表**中搜索，第二个用户 (23424243224) 和第三个用户以此类推。

此方法需要运行大量循环和查询。这将导致网站的巨大延迟。

谁能建议我这样做的更好解决方案？

提前致谢！

-PS

1.  在 eventbrite.com 和 eventful.com 中，有一个 Facebook 应用程序可以完成这项工作。如何创建这样的 Facebook 图书应用程序来完成这项工作。

2.  如果我的主页上有多个活动，并且我想在用户登录后在每个活动下方显示参加者列表。这可以顺利进行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:33:57.047

与其运行所有这些单独的数据库命中，不如在 1 个查询中带回一个事件的所有参与者并将它们存储在一个数组中。然后获取所有用户的朋友并将它们存储在另一个数组中。最后遍历参加者列表并使用 in_array 方法检查当前参加者是否在朋友数组中。然后你可以将它们存储在第三个数组中，即所有匹配的朋友

例如

```
 $matching = array();
 $attending = array(); // This is populated from your database
 $friends = array(); // This would be populated from their facebook friendlist

 $foreach($attending as $attendee){
       if(in_array($attendee, $friends)){
            // This attendee is present in their friends list so add them to matching
            $matching[] = $attendee;
       }
 }

 //Loop through matching to show all the friends who are attending. 
```

# ruby - 用 Ruby 编写一系列单行方法的更简洁的方法？

> ID：11999439
> 
> 赞同：1
> 
> 时间：2012-08-17T03:36:41.847
> 
> 标签：ruby

有时我们最终会编写几种方法，例如：

```
module XyzGateway
  module Defaults
    def pull_sample asynch=true
      'N/A'
    end

    def is_pull_available?
      false
    end

    def is_push_available?
      true
    end

    def connect params
      logger.debug "Invalid gateway(#{self.id}), could not resolve its type. #{ap self}"
    end

    def gateway_init
    end

    def disconnect
    end
  end
end 
```

我只是在寻找一种在这种情况下避免这些`def`和`end`关键字的方法，有什么办法吗？在我上面的例子中，这些是默认行为，如果我能避免这些`def`，我会很高兴的`end`。

编辑：是的，实际上我确实有一个模块 XyzGateway::Defaults 用于所有这些。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T04:14:19.303

您无法避免它们，除非使用`define_method`：

```
define_method :is_pull_available? { false } 
```

如果你的目标只是缩短你的代码，你可以把整个方法放在一行，这对于极短的方法来说还不错（这里的第四种方法可能有点太长了，像这样压缩它会损害可读性，海事组织）：

```
def pull_sample(asynch = true); 'N/A'; end
def is_pull_available?; false; end
def is_push_available?; true; end
def connect params; logger.debug "Invalid gateway(#{self.id}), could not resolve its type. #{ap self}"; end
def gateway_init; end
def disconnect; end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T04:22:30.187

对于静态方法，您可以定义哈希并使用它来定义方法：

```
methods_to_define = { 'pull_sample' => 'N/A', 'is_pull_available?' => false,
  'is_push_available?' => true, 'gateway_init' => nil, 'disconnect' => nil }

methods_to_define.each_pair do |key, value|
  define_method(key) { value }
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T04:48:54.903

我有时也有这个问题。它甚至可以让我觉得我对 Ruby 来说太聪明了。我知道事实并非如此。实际上，我认为我只是以一种不理想的方式使用该语言。

当我有一系列单行方法时，我发现这是几乎所有面向对象重构的最终结论，我想我也锁定了设计。如果代码已经围绕问题成熟，这可能是一件好事，但过早地做这件事可能是一件坏事。出于这个原因，我尽量让这些方法更加随意，并在骨头上加些肉。

我还发现，当我拥有一系列单行方法时，我可能更接近于实现 lisp 之美的一个方面。但我认为，简单的 Ruby 似乎并不适合这样做。

所以相反，我更喜欢像 Ruby 一样。嗯，那是什么意思？

我见过很多人这样做。

```
def is_pull_available?; false end 
```

知道省略第二个`;`是一个至少熟悉 Ruby 语法方面的人的标志。

这既快速又容易做到，但仍然有点令人讨厌。

那么 Ruby 程序要做什么呢？一个也许有一点额外的空闲时间？好吧，也许他们可以创建一个 DSL。无论如何，这就是他们迄今为止所做的一切，还不如更优雅地呈现它。

所以也许我们转

```
def is_pull_available?
  false
end 
```

进入

```
pull_available false 
```

要做到这一点，您真正需要做的就是...

```
def self.pull_available(value)
  define_method(:is_pull_available?) { value }
end 
```

要么将其放入基类中，要么将其从模块中混合。

我认为当你真的想锁定域逻辑并强调它时，这确实是你想要保留的一步。你越打磨它，当它发生变化时，你就越会感觉很糟糕。

[如果您对这类东西感兴趣，Ruby](http://pragprog.com/book/ppmetr/metaprogramming-ruby)中的元编程可能是一本很棒的书。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T19:48:05.560

这个怎么样？

```
class Module
  def simple_method meth, value
    define_method(meth){value}
  end
end

class A
  simple_method :is_pull_available?, false
end 
```

或者

```
class Module
  def simple_method hash
    hash.each do |key, value|
      define_method(key){value}
    end
  end
end

class A
  # Ruby 1.9 only
  simple_method is_pull_available?: false
end 
```

# php - XML中特殊字符的解码/编码

> ID：11999446
> 
> 赞同：1
> 
> 时间：2012-08-17T03:37:10.567
> 
> 标签：php, xml, encoding

我想在 php 中生成一个 xml 页面，但我在解码/编码特殊字符时发现了问题，例如`""&eacute;""`

我的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.google.com/schemas/sitemap/0.84">
 <url>
    <loc> &eacute; test &egrave; </loc>
    <priority>1.000</priority>
    <changefreq>always</changefreq>
 </url>
</urlset> 
```

但我收到了这条消息

```
This page contains the following errors:

error on line 4 at column 19: Entity 'eacute' not defined
Below is a rendering of the page up to the first error. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T03:41:43.747

> & 符号 (&) 和左尖括号 (<) 不得以其文字形式出现，除非用作标记分隔符，或者在注释、处理指令或 CDATA 部分中。

**[（参考）](http://www.w3.org/TR/REC-xml/#syntax)**

改用这个

```
<loc>&amp;eacute; test &amp;egrave;</loc> 
```

`&`必须编码为`&amp;`

* * *

**或在**[CData](http://www.w3.org/TR/REC-xml/#sec-cdata-sect)部分中使用它。它说以下文本不是标记，而是字符数据。

```
<loc><![CDATA[&eacute; test &egrave;]]></loc> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T03:50:25.683

您的意思是要将 HTML 实体放入 XML 中还是将文字字符放入 XML 中？

XML 定义的唯一实体是：

*   &
*   <
*   >
*   ”
*   ’

没有其他的。并且只有前两个对于表示 XML 文档中的任何 Unicode 文本是绝对必要的。在 XML 文本中包含 literal 和 是完全可以的`>`。`'``"`

要在 XML 文档中包含文字字符，只需将它们放入其中，并确保用于生成字节格式文档的编码与声明中的相同。在元素和属性名称中必须尊重某些字符类，并且您仍然必须记住使用 & 和 < 实体而不是文字。

[http://www.w3schools.com/xml/xml_encoding.asp](http://www.w3schools.com/xml/xml_encoding.asp)

# html - 如何根据条件设置单选按钮选中属性

> ID：11999451
> 
> 赞同：0
> 
> 时间：2012-08-17T03:38:35.990
> 
> 标签：html

我想要两个单选按钮 IsCool 和 NotSoCool：

我希望它们链接在一起，因此不能同时检查它们。

我认为这段代码将是让它工作的简单起点：

```
<input type="radio" value="True" checked="true ? checked : null">
<input type="radio" value="False" checked="true ? null : checked"> 
```

所以我在想第一个单选按钮会被选中，而第二个不会。

他们都被检查了。

谁能告诉我我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T03:41:03.773

给他们两个相同的名称属性：

```
<input type="radio" value="True" name="cb" />
<input type="radio" value="False" name="cb" /> 
```

单选按钮必须共享相同的名称属性才能正常工作。这允许您在任何时候都只有一个处于活动状态。

简单**[的 jsFiddle 示例](http://jsfiddle.net/j08691/M5cGh/)**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T03:41:47.447

这是单选按钮的默认行为，您只需为它们指定相同的名称

# pentaho - 汇总子报表数据并显示在主报表中

> ID：11999455
> 
> 赞同：1
> 
> 时间：2012-08-17T03:39:54.283
> 
> 标签：pentaho

我正在使用 Pentaho 报表设计器。我想总结子报告数据并将其显示到我的主报告中。有可能吗？如果可能，如何制作。

示例：total0 是 month1,month2,month3...month12 的总和

主要报告：总计0

子报告：月1月2月3...月12

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T04:54:47.130

是的，但是您的子报表必须首先执行和显示。诀窍只是在子报表中添加 itemSumFunction，然后通过参数将其传递回主报表（单击子报表中的参数并确保将其添加到“导出”参数列表中。

# cordova - 如何在 Mobile Safari 中打开 PhoneGap 应用程序中的链接之前显示确认消息

> ID：11999460
> 
> 赞同：0
> 
> 时间：2012-08-17T03:40:42.507
> 
> 标签：cordova, mobile-safari, sencha-touch-2

我正在为 iPhone 开发应用程序，我的应用程序中有一些超链接。

我希望用户通过选择是或否来确认他/她是否确定打开链接。如果是，那么链接应该在移动 safari 中打开。

我知道如何在移动 Safari 中打开链接，但无法显示确认消息。对于打开链接，我使用以下代码：

```
 document.addEventListener('click', function(e) {
      if (e.srcElement.target === "_blank" &&   
       e.srcElement.href.indexOf("#phonegap=external") === -1) {
        e.srcElement.href = e.srcElement.href + "#phonegap=external";
      }
    }, true); 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:13:49.670

在此处查看[Cordova 文档](http://docs.phonegap.com/en/2.0.0/cordova_notification_notification.md.html#notification.confirm)

```
if(confirm("Do you really want to do this?"))
{
   dosomething();
}   
else
{
   doSomethingElse();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T02:39:10.640

我的问题解决了： 1\. 我创建了自定义确认弹窗。2.然后在关闭弹出窗口后我打开链接使用

```
 window.open(link+#phonegap=external,"_blank"); 
```

# java - 如何制作任意数量的变量（Java）

> ID：11999462
> 
> 赞同：-3
> 
> 时间：2012-08-17T03:41:02.063
> 
> 标签：java, variables

在我的程序中，我想让变量的数量等于一个单词中的字母数。这是我尝试过的：

```
import java.util.*;
public class CountString {
public static void main(String args[]){
    String w;
    Scanner raj = new Scanner(System.in);
    System.out.print("Word? ");
    w=raj.next();
    for(int i=0; i<w.length(); i++){
        int k_i=1;
    }
    for(int i=0; i<w.length(); i++){
        System.out.print(k_i);
    }

}

} 
```

我得到的错误是 k_i 无法解析为变量。我将如何以指定的方式制作变量？并说我想打印所有 k_i 的最大值......我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T03:46:22.050

使用 an`ArrayList<Integer>`来保存值。使用 for 循环遍历它以打印扫描的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T03:46:53.417

您可以创建一个`Map`来存储`key-value`对。

```
Map<String,Integer> map=new HashMap<String,Integer>(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T03:52:59.217

您的问题的核心是您正在尝试动态定义变量。虽然有些语言支持这种东西，但 Java 不支持。它从来没有，也永远不会。

所以你需要找到一种替代方法来做你想做的事情。例如，以下是您的示例到真实 Java 的直译：

```
w = raj.next();
int k[] = new int[w.length()];
for(int i = 0; i < k.length; i++){
    k[i] = 1;
}
for(int i = 0; i < l.length; i++){
    System.out.print(k[i]);
} 
```

* * *

> 并说我想打印所有 k_i 的最大值......我该怎么做？

通过迭代 k[i] 寻找最大的。

* * *

我的印象是，您通常是编程新手，尤其是 Java 编程新手。我建议你去当地的书店买一本关于 Java 编程的介绍性教科书。您也可以访问 Oracle 网站并学习 Java 教程……但它们更多地针对已经知道如何编程的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T03:46:24.450

我会将每个整数推到一个`ArrayList`而不是。然后，您可以使用 for 循环遍历列表，并使用该`Collections.max`方法查找存储值的最大值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T03:47:03.983

> 我得到的错误是 k_i 无法解析为变量。我将如何以指定的方式制作变量？

k_i 的生命周期以循环结束，在循环之外声明它，以便定义在主范围内保持有效。

> 并说我想打印所有 k_i 的最大值......我该怎么做？

```
int k_i=0;
for(int i=0; i<w.length(); i++)
{ 
       k_i= k_i<i?i:k_i;     
} 
```

我不明白你的其余要求！！！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T03:54:07.013

你想要字母，它们是`chars`在 java 中的。

尝试这个：

```
char[] letters = new char[w.length()];
for (int i = 0; i < w.length(); i++){
    letters[i] = w.charAt(i);
} 
```

# marionette - 骨干木偶路由

> ID：11999466
> 
> 赞同：2
> 
> 时间：2012-08-17T03:41:37.460
> 
> 标签：marionette

我正在准备使用 Backbone Marionette 迁移我的应用程序，但路由中出现错误：

```
window.App = new Backbone.Marionette.Application
    Models: {}
    Collections: {}
    Views: 
        Layouts: {}
    Routers: {}
    layouts: {}
    Helpers: {}

    init: ->        
        App.start()
        App.main.show(App.layouts.main)

App.addRegions
    main: '#container'

App.addInitializer (options) ->
    new App.Routers.Profiles()
    Backbone.history.start()

$(document).ready ->
     App.init() 
```

**这是我的路由器**

```
class App.Routers.Profiles extends Backbone.Marionette.AppRouter
    routes:
            'profiles/:id': 'show'

    show: (id) ->
            @profile = new App.Models.Profile(id: id)
            view = new App.Views.ProfilesShow(model: @profile)
            @profiles = new App.Collections.Profiles(@profile)
            @profile.fetch()
            App.layout.content.show(view) 
```

**这是我的观点**

```
class App.Views.ProfilesShow extends Backbone.Marionette.ItemView
    template: JST['profiles/show']

    initialize: ->
        @model.on('change', @render, @)

    render: ->
            $(@el).html(@template(profile: @model))
            @ 
```

**这是我的主要布局**

```
class App.Views.Layouts.Main extends Backbone.Marionette.Layout
    template: JST['layouts/main']

    regions:
            content: '#content'

App.addInitializer ->
    App.layouts.main = new App.Views.Layouts.Main() 
```

当我尝试在 App.layout.content.show(view) 行中的布局中显示视图时，出现消息错误：“TypeError: App.layout is undefined”。我不知道我是否做得很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T21:54:30.863

我找到了解决方案。我希望是更好的

主要的变化在路由器，我不得不添加一个控制器，所以新的路由器是

```
class App.Routers.Profiles extends Backbone.Marionette.AppRouter
    appRoutes:
    'profiles': 'index'
    'profiles/new': 'new'
    'profiles/:id': 'show'

class App.Controllers.Profiles
    constructor: ->
        @collection = new App.Collections.Profiles()
        @collection.fetch()
        App.layouts.main = new App.Views.Layouts.Main()

    show: (id) ->
            profile = @collection.get(id)
            view = new App.Views.ProfilesShow(model: profile)
            App.main.show(App.layouts.main)
            App.layouts.main.content.show(view) 
```

新的 App Init 是：

```
window.App = new Backbone.Marionette.Application
    Models: {}
    Collections: {}
    Views: 
            Layouts: {}
    Routers: {}
    layouts: {}
    Helpers: {}
    Controllers: {}

    init: ->
            App.start()

App.addInitializer (options) ->
    App.addRegions(main: '#container')
    controller = new App.Controllers.Profiles
    new App.Routers.Profiles(controller: controller)
    Backbone.history.start()

$(document).ready ->
    App.init() 
```

# php - 在 joomla 中添加新文章

> ID：11999469
> 
> 赞同：0
> 
> 时间：2012-08-17T03:41:47.017
> 
> 标签：php, joomla

我有 2 个页面（比如 A 和 B）如果我在页面 BI 上添加一篇文章想在页面 A 中显示一个简短的 href 项目，它会将我带到页面 B 上刚刚添加的文章。我正在使用 Zoomla（和 php - 还没有php）

感谢您的任何想法和指导

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:51:18.617

您可以通过以下步骤手动添加它..

只需将页面 B 的 url 复制`index.php?xxxxxxx`到最后，以便在启用重写后保持工作..

然后将链接粘贴到A文章页面..

# ms-access - Microsoft Access 的数据绑定 CheckBoxList

> ID：11999473
> 
> 赞同：1
> 
> 时间：2012-08-17T03:41:59.600
> 
> 标签：ms-access, ms-access-2003

在 ASP.NET 中，我可以选择从数据源构建 CheckBoxList 控件，其中项目的值可以是“Id”列（例如），而复选框旁边显示的文本来自“Name”列。

是否可以使用 VBA 为 Access 2003 做类似的事情？如果可能的话，我试图避免对项目列表进行硬编码，但不知道如何做类似的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T16:46:24.447

只需使用列表框。Access 中的列表框很棒，因为它允许多列，但会根据您的要求隐藏第一列。而且您可以将列表框设置为允许多项选择（在列表框属性表的另一个选项卡中，将多选设置为“简单”

更好的是，您不需要任何代码来填写列表框，而是可以输入 sql 或简单地将列表框基于 SQL 查询。

所以一个列表框可以是这样的：

![在此处输入图像描述](../Images/8e5c94e5430aa9b3a80cf083685bdd7b.png)

将所选项目转换为有用的 PK id 列表的按钮后面的代码如下所示：

```
Private Sub cmdFax_Click()

  Dim strIDList     As String
  Dim vID           As Variant
  Dim strSQLWhere   As String

  For Each vID In Me.lstFaxList.ItemsSelected

     If strIDList <> "" Then strIDList = strIDList & ","

     strIDList = strIDList & lstFaxList.ItemData(vID)

  Next

  If strIDList <> "" Then
     strSQLWhere = " ID in (" & strIDList & ")"
  End If

  DoCmd.OpenReport "rptFax", acViewPreview, , strSQLWhere

End Sub 
```

如果需要，您可以在代码中提供或设置列表框的 SQL，如下所示：

```
Sub mytest()

   Dim strSql        As String

   strSql = "Select ID, firstName, LastName, City " & _
            "where city = 'Edmonton'"

   Me.lstFaxList.RowSource = strSql

End Sub 
```

因此，您无需在此处输入任何类型的列表。不清楚你是否“必须”在这里有一个实际的复选框 - 如果你愿意，你可以使用继续表单，但我认为上面的内容要简单得多，你根本不需要太多代码来设置它.

# mysql - MySql - 为什么 ENUM 占用的空间比预期的要多？

> ID：11999475
> 
> 赞同：1
> 
> 时间：2012-08-17T03:42:03.397
> 
> 标签：mysql, enums

我做了一个测试，以确保我知道 ENUM 是如何工作的以及它如何处理存储空间......并且得到了与预期不同的结果。

一张表，其中一个类型的字段`VARCHAR(100)`填充了 1,000,000 行。每行都有一个从 6 个字符串中随机选择一个的值，长度为 100。

然后，转换为`ENUM`，然后返回`VARCHAR(100)`。这是结果（数据大小）。

**1\. 1,000,000 行 = 99.2 MiB，VARCHAR(100)**

**2\. 行 1,000,000 = 6,835.9 KiB，枚举 ('blah100Characters1','blah100Characters2',...,'blah100Characters6')**

**3\. 行 1,000,000 99.2 MiB，VARCHAR(100)**

按预期报告的`VARCHAR(100)`类型并匹配手册中的 MySQL 规范 ("L + 1 bytes, 0 <= L <= 255") 1,000,000 x 100 = 100,000,000 = 99.2 MiB

---编辑：嗯，加上一个额外的字节，但这与这个讨论无关：o）

但是，根据 ENUM 的 MySQL 规范（“1 或 2 个字节，取决于枚举值的数量（最大 65,535 个值）”），有 6 种可能的组合，我希望每行需要 1 个字节的数据. 1,000,000 x 1 = 1,000,000 = 976.5 KiB

谁能向我解释为什么转换后的表需要 6,835.9 KiB，奇怪的是，这几乎是预期的 7 倍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:09:41.983

它加起来最多 7 个字节（我得到相同的结果）；有些空间是填充，有些是删除标志。

要证明存在填充，请添加额外的枚举（或微小整数）。表的大小不会改变。

为了证明有删除标志，删除中间的一行。表的大小不会改变。

根据[此页面](http://www.mysqlperformanceblog.com/2008/04/23/efficient-boolean-value-storage-for-innodb-tables/)，它与`myisam_data_pointer_size`默认值 6 字节（加上 1 字节用于删除）有关。

他似乎是正确的，好像我这样做：

```
alter table foo MAX_ROWS=10; 
```

表的大小减小。

此外，从[这个“错误”报告](http://bugs.mysql.com/bug.php?id=42481)中，听起来好像一条已删除的记录被存储为指向下一条记录的指针。如果是这样，这意味着任何行的最小空间将是指针大小（默认为 6 个字节）加上一个删除字节。这是因为如果一条记录被删除，则设置删除字节，然后其他 6 个字节用于指向下一条记录。

如果您想了解更多信息，我会阅读 MyISAM 表的“删除链接链”（使用固定记录计数时）。

# linux - Linux 和终端：如何在终端约会中运行命令？

> ID：11999483
> 
> 赞同：0
> 
> 时间：2012-08-17T03:43:47.877
> 
> 标签：linux, time, terminal

我想要以下内容，通过 linux 终端中的 shell 脚本：

```
myhour = 15:00
if hour_actual <myhour; then
command
else
echo "message" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T03:46:17.390

您是在谈论计划/日常任务吗？如果是这样，请查看[cron jobs](http://www.cyberciti.biz/faq/how-do-i-add-jobs-to-cron-under-linux-or-unix-oses/)。

如果您谈论的是在一定时间后运行的脚本，那么只需使用该`sleep`命令。你所要做的就是说

```
sleep [Number-Of-Seconds] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T03:47:18.223

考虑安排一份`cron`工作。看到[这个](http://troy.jdmz.net/cron/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T05:16:10.480

回答你的问题

```
myhour=15:00
if [ $(date +%H:%M) < $myhour ]; then
  Command
 else
   echo ...
 fi 
```

（<执行字典比较）

# android - 自定义列表中的复选框

> ID：11999484
> 
> 赞同：1
> 
> 时间：2012-08-17T03:44:31.787
> 
> 标签：android, listview, custom-adapter

我正在尝试`CheckBox`. 但是当我点击复选框然后我滚动我的列表时，我看到在下一个项目列表中有一些复选框被选中。

这是图像

![在此处输入图像描述](../Images/0331f679c65d3dc2fb07dabe65ea99ce.png)

这是代码：

```
package com.tsdv.wds.GUI.Server;

import java.io.File;
import java.util.ArrayList;

import com.tsdv.wds.R;
import com.tsdv.wds.manager.FileItems;
import com.tsdv.wds.manager.FileManager;

import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.widget.BaseAdapter;
import android.widget.CheckBox;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;

public class ItemFileAdapter2 extends BaseAdapter implements OnClickListener{

    private static final String TAG = "ItemFileAdapter";
    Context context;
    FileManager fileManager;
    ArrayList<FileItems> arrayList;
    LayoutInflater inflater;
    ViewHolder holder;
    int mPosition;

    public ItemFileAdapter2(Context context, ArrayList<FileItems> arrayList, FileManager fileManager) {
        super();
        inflater = LayoutInflater.from(context);
        this.context = context;
        this.fileManager = fileManager;
        this.arrayList = arrayList;
        Log.d(TAG, "create " + this.arrayList.size());
        //holder = new ViewHolder();

    }

    @Override
    public int getCount() {
        return arrayList.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return arrayList.get(position);
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        mPosition = position;
        holder = new ViewHolder();
        if (null == convertView){
            convertView = inflater.inflate(R.layout.item_custom_lv_serverfile, null);
            convertView.setTag(holder);
            Log.d(TAG, "Position: " + position);
        } else{
            holder = (ViewHolder) convertView.getTag();
        }

        holder.llFilenameAndInfo = (LinearLayout) convertView.findViewById(R.id.llFilenameAndInfo);
        holder.llFilenameAndInfo.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                File path = new File(arrayList.get(position).getParent()
                        .toString()
                        + File.separator
                        + arrayList.get(position).getName().toString());
                ServerMainActivity.setPath(path);
                arrayList = fileManager.displayDirectory(
                        arrayList.get(position).getParent(),
                        arrayList.get(position).getName());
                ItemFileAdapter2.this.notifyDataSetChanged();

            }
        });
        holder.imvThumbnail = (ImageView) convertView.findViewById(R.id.imvThumbnail);
        holder.imvThumbnail.setImageBitmap(arrayList.get(position).getThumnail());
        holder.tvName = (TextView) convertView.findViewById(R.id.tvName);
        holder.tvName.setText(arrayList.get(position).getName());
        holder.tvInfo = (TextView) convertView.findViewById(R.id.tvInfo);
        holder.tvInfo.setText("Info");
        holder.cbRead = (CheckBox) convertView.findViewById(R.id.cbRead);
        holder.cbRead.setVisibility(View.VISIBLE);
        holder.cbWrite = (CheckBox) convertView.findViewById(R.id.cbWrite);
        holder.cbWrite.setVisibility(View.VISIBLE);
        if (!arrayList.get(position).isDirectory()){
            Log.d(TAG, "invisible: " + position);
            holder.cbRead.setVisibility(View.INVISIBLE);
            holder.cbWrite.setVisibility(View.INVISIBLE);
        }

        return convertView;
    }
    private class ViewHolder {
        LinearLayout llFilenameAndInfo;
        TextView tvName;
        TextView tvInfo;
        ImageView imvThumbnail;
        CheckBox cbRead;
        CheckBox cbWrite;
    }
    @Override
    public void onClick(View v) {
        if (arrayList.get(mPosition).isDirectory()) {
            File path = new File(arrayList.get(mPosition).getParent().toString() + File.separator + arrayList.get(mPosition).getName().toString());
            ServerMainActivity.setPath(path);
            arrayList = fileManager.displayDirectory(arrayList.get(mPosition).getParent(), arrayList.get(mPosition).getName());
            ItemFileAdapter2.this.notifyDataSetChanged();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T04:36:24.053

当您使用 convertView（它是一个正在重用/回收的视图）时，convertView 中已经存在一个检查，因为之前已经检查过。

使用此代码将解决您的问题。

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    mPosition = position;
    holder = new ViewHolder();
    if (null == convertView){
        convertView = inflater.inflate(R.layout.item_custom_lv_serverfile, null);
        convertView.setTag(holder);
        Log.d(TAG, "Position: " + position);
    } else{
        holder = (ViewHolder) convertView.getTag();
    }

    holder.llFilenameAndInfo = (LinearLayout) convertView.findViewById(R.id.llFilenameAndInfo);
    holder.llFilenameAndInfo.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            File path = new File(arrayList.get(position).getParent()
                    .toString()
                    + File.separator
                    + arrayList.get(position).getName().toString());
            ServerMainActivity.setPath(path);
            arrayList = fileManager.displayDirectory(
                    arrayList.get(position).getParent(),
                    arrayList.get(position).getName());
            ItemFileAdapter2.this.notifyDataSetChanged();

        }
    });
    holder.imvThumbnail = (ImageView) convertView.findViewById(R.id.imvThumbnail);
    holder.imvThumbnail.setImageBitmap(arrayList.get(position).getThumnail());
    holder.tvName = (TextView) convertView.findViewById(R.id.tvName);
    holder.tvName.setText(arrayList.get(position).getName());
    holder.tvInfo = (TextView) convertView.findViewById(R.id.tvInfo);
    holder.tvInfo.setText("Info");
    holder.cbRead = (CheckBox) convertView.findViewById(R.id.cbRead);
    holder.cbRead.setVisibility(View.VISIBLE);
    holder.cbRead.setChecked(false);
    holder.cbWrite = (CheckBox) convertView.findViewById(R.id.cbWrite);
    holder.cbWrite.setVisibility(View.VISIBLE);
    holder.cbWrite.setChecked(false);
    if (!arrayList.get(position).isDirectory()){
        Log.d(TAG, "invisible: " + position);
        holder.cbRead.setVisibility(View.INVISIBLE);
        holder.cbWrite.setVisibility(View.INVISIBLE);
    }

    // check it based on value in List.

    return convertView;
} 
```

要存储检查的值，请添加一个 CheckChangedListener 并将检查状态存储在布尔列表中并在 getView 上检索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T04:15:44.153

请注意，当您向上/向下滚动时，ListAdapter 概念正在重用隐藏的视图。这使得另一个 Item View 与之前隐藏的 Item View 具有相同的状态。

尝试将保存 cbRead 和 cbWrite 值的布尔类变量添加到您的 FileItems 类，并在 getView 内部根据“位置”参数获取 FileItems 对象，在返回 convertView 对象之前，设置 cbRead 和 cbWrite 对象的值。

让我知道这是否解决了您的问题。

# java - 在 JTable 中添加最后一行 ID 的自动增量行

> ID：11999485
> 
> 赞同：0
> 
> 时间：2012-08-17T03:44:33.643
> 
> 标签：java, swing, jdbc, jtable, auto-increment

我的问题是：如何实现一个“添加行”按钮，该按钮创建一个 JTable 的新行（从 SQLite 数据库获取数据），最后一行 ID 的自动增量++。id 列已经自动递增了数据，现在我只知道创建一个所有字段为空白的新行（没有最新行的增量++）。请问，有人可以帮忙吗？

```
private void cmd_newrowActionPerformed(java.awt.event.ActionEvent evt) {
     ((DefaultTableModel) PrimaryTable.getModel()).addRow(new Vector());
} 
```

我想要的是：

```
==================
id  |  data      |
==================
1   | some_data  |
2   | some_data  |
3   | some_data  |
==================

After I press addRow button:

==================
id  |  data      |
==================
1   | some_data  |
2   | some_data  |
3   | some_data  |
4   | blank      |        /// blank row data with an autoincrement of the row id
================== 
```

**更新：**

好的，现在我知道如何将新行插入数据库，但我不知道如何更新 JXTable。因此，它可以工作的波纹管代码，以及在我重新启动应用程序后更新的新空白行。有人可以帮助我吗？

```
private void cmd_newrowActionPerformed(java.awt.event.ActionEvent evt) {
    try {
        String sql = "Insert into RDSSPrimaryTable (sample_no,mineral_name,chemical_formula,main_peaks,other_peaks,reference,link,comments,spectrum) values (?,?,?,?,?,?,?,?,?)";

        pst = conn.prepareStatement(sql);
        // no pst.setString for id - it takes automatically

        pst.setString(1, txt_sample_pt.getText());
        pst.setString(2, txt_mineral_pt.getText());
        pst.setString(3, txt_chemical_pt.getText());
        pst.setString(4, txt_main_pt.getText());
        pst.setString(5, txt_other_pt.getText());
        pst.setString(6, txt_reference_pt.getText());
        pst.setString(7, txt_link_pt.getText());
        pst.setString(8, txt_comments_pt.getText());
        pst.setBytes(9, person_image);

        JOptionPane.showMessageDialog(null, "Inserted");
    } catch (Exception e) {
        JOptionPane.showMessageDialog(null, e);

    }

    ((DefaultTableModel) PrimaryTable.getModel()).fireTableDataChanged(); // I tried this method even if the DefaultTableModel fire table automatically.

    PrimaryTable.repaint(); //tried also repaint, revalidate - nothing happens

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:23:56.667

使用以下代码在您的数据库中创建一个序列

```
CREATE SEQUENCE sample_number
  START WITH     1
  INCREMENT BY   1; 
```

之后在您的代码中进行以下更改：

```
String sql = "Insert into RDSSPrimaryTable (sample_no,mineral_name,chemical_formula,main_peaks,other_peaks,reference,link,comments,spectrum) values (sample_number.nextval(),?,?,?,?,?,?,?,?)";

pst = conn.prepareStatement(sql);

pst.setString(1, txt_mineral_pt.getText());
pst.setString(2, txt_chemical_pt.getText());
pst.setString(3, txt_main_pt.getText());
pst.setString(4, txt_other_pt.getText());
pst.setString(5, txt_reference_pt.getText());
pst.setString(6, txt_link_pt.getText());
pst.setString(7, txt_comments_pt.getText());
pst.setBytes(8, person_image); 
```

# php - 有什么方法可以让我的所有控制器始终在 symfony2 中包含特定文件

> ID：11999487
> 
> 赞同：2
> 
> 时间：2012-08-17T03:44:45.513
> 
> 标签：php, symfony, doctrine-orm

`use statements`当我必须在所有文件中使用一些类似的东西时，我觉得很烦人 。

时不时地，我必须在所有控制器上复制非常常见的行，例如

```
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Method;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template; 
```

有什么方法可以将它们定义在一个文件中，并且它们将被我的整个应用程序中的所有控制器使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T03:59:24.103

命名空间的存在是为了防止跨文件的命名冲突，这就是为什么按照您的要求去做可能是不明智的。它可能会导致您无法解释的幻影错误，因为您忘记了为类名起别名。更糟糕的是，如果其他人必须维护您的代码，他们可能真的会陷入困境，试图找出他们的`Controller`类无法正确加载的原因。

*但是*，如果您真的想要，您可以使用[`class_alias`^(*docs*)](http://php.net/manual/en/function.class-alias.php)来完成此操作。我建议坚持使用良好的老式命名空间和`use`语句，但如果您想忽略我的建议，可以执行以下操作：

```
<?php // namespace_aliases.php

class_alias(
    'Symfony\Bundle\FrameworkBundle\Controller\Controller',
    'Controller'
);
class_alias(
    'Sensio\Bundle\FrameworkExtraBundle\Configuration\Method',
    'Method'
);

// etc. 
```

然后在其他地方只包含该`namespace_aliases.php`文件。重要的是要注意，如果传递给的第一个类名`class_alias`尚未定义或加载，则将调用任何已注册的类自动加载器以加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:46:54.210

好吧，如果您使用 IDE，则可以最大程度地减少这种烦恼。例如，NetBeans 自动完成类的完整 FQCN。然后，您可以使用其[修复导入](https://blogs.oracle.com/netbeansphp/entry/how_to_fix_your_use)功能将定义移动到使用部分。PHPStorm 和 Eclipse PDT 也有类似的特性。

# ruby-on-rails - RSpec 控制器测试：创建时缺少模板

> ID：11999488
> 
> 赞同：6
> 
> 时间：2012-08-17T03:44:48.930
> 
> 标签：ruby-on-rails, ruby, rspec

我有一个有趣的情况。我正在测试以下简单的创建操作：

```
# will only be accessed via Ajax 
def create
 click = Click.new(params[:click])
 click.save # don't really care whether its success or failure
end 
```

然后我有以下非常简单的控制器规范：

```
require 'spec_helper'

describe ClicksController, "creating a click" do
  it "should create a click for event" do
    xhr :post, :create, :click => {:event_id => 1}
    # more test to come...
  end
end 
```

似乎微不足道，但我得到以下信息：

**缺少模板点击/创建**

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T03:58:33.400

添加到控制器动作：

```
render :nothing => true 
```

这将自动创建适当的服务器响应。更多[在这里](http://guides.rubyonrails.org/layouts_and_rendering.html#rendering-nothing)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-01T20:32:56.933

如果您的控制器仅呈现 JSON 或 XML，但您未在规范中指定格式，您将收到此错误；然后，您的请求默认为不受支持的 HTML。在这种情况下，只需在您从规范中调用控制器方法时指定支持的格式。例如，改变这个：

```
post :create, registration: @user_hash 
```

对此：

```
post :create, registration: @user_hash, format: :json 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T03:51:28.887

如果您没有在控制器操作中渲染任何内容，rails 将尝试默认渲染模板（在这种情况下`clicks/create`）。我建议至少返回一条成功消息，如下所示：

`render :json => {:success => true}`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-26T21:30:57.863

基于[megas 的回答](https://stackoverflow.com/questions/11999488/rspec-controller-testing-missing-template-on-create/11999571#11999571)，如果您要测试只能通过 UJS 链接访问并且只有 .js.erb 模板的控制器操作，我会将其放入控制器中以避免破坏您的 UJS 功能：

```
respond_to do |f|
  f.html { render nothing: true } # prevents rendering a nonexistent template file
  f.js # still renders the JavaScript template
end 
```

这将使您能够通过简单地调用[`ActionController::TestCase::Behavior`](http://api.rubyonrails.org/classes/ActionController/TestCase/Behavior.html)'s `get`///方法而不需要调用来调用控制器操作`post`，因为它将成功调用该方法，不渲染任何内容并继续，同时保持您的 UJS 行为不变`put`。`delete``xhr`

# iphone - 模态转场后如何保留标签栏？

> ID：11999492
> 
> 赞同：2
> 
> 时间：2012-08-17T03:45:00.680
> 
> 标签：iphone, ios, ios4, storyboard

我在标签栏中有 3 个视图控制器。（我的 3 图标）。我有另一个视图控制器，可以通过按钮从 3 个中的一个访问。我不希望这个额外的视图控制器显示在标签栏上。

单击带有 push segue 的按钮时，没有任何反应，使用模式 segue 它会打开新页面，但标签栏会消失。（即使我创建了从这个新视图控制器到标签栏的关系）。

如何让标签栏保留？我真的不想在我的一个视图和另一个视图之间（不在标签栏上）设置导航控制器，因为它不是真正的分层内容。

modal 真的是正确的使用方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T04:02:52.243

您的视图（3 个视图控制器的视图）是否包含标签栏？如果没有，您可以尝试从视图转换到额外视图控制器的视图。

见[+[UIView transitionFromView:toView:duration:options:completion:]](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/clm/UIView/transitionFromView%3atoView%3aduration%3aoptions%3acompletion%3a)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T23:01:22.473

当您选择 Modal segue 时，新视图不会添加为当前 TabController 堆栈的一部分。这就是为什么当您转到此视图时选项卡栏不可见，这就是为什么 Push segue 对您不起作用（您不能推送不属于堆栈的 VC）。

从它的声音来看，如果您希望标签栏保持可见/有用但不想将此 VC 添加到标签栏，那么您真正要说的是此 VC 是其中一个的子视图标签栏中的原始3个VC。

在这种情况下，您可以从这些原始 VC 之一中管理“自定义”VC 的实例化，并将其添加为子视图？

例如，如果你有：`Tab1, Tab2, Tab3`和`ExtraView`

在`Tab2 VC`您将 init/alloc`SubView`并执行以下操作：`[self addSubView:ExtraView.view];`

不幸的是，这样你当然会失去 Segues，但除非你想继续`Tab2`在 Storyboard 中设置为嵌套 NavigationController，否则我认为这是你最好的选择。

# bash - bash - `read` 无法从重定向中读取，`cat` 工作正常吗？

> ID：11999496
> 
> 赞同：2
> 
> 时间：2012-08-17T03:45:13.787
> 
> 标签：bash, exec, at-command

我一直在尝试向我的调制解调器发送一些 AT 命令，并希望将响应捕获到变量中。这是我的代码：

```
exec 3<>/dev/ttyUSB3

echo -e "AT+CGSN\n" >&3

cat <&3
#read -r RESPONSE <&3
#echo "Response was $RESPONSE"

exec 3<&-
exec 3>&- 
```

结果：

```
$ ./imei_checker.sh 
AT+CGSN

356538041935676

OK

AT+CGSN

356538041935676

OK 
```

但是，如果我更改`cat`为`read`，它将不起作用：

```
$ ./imei_checker.sh 
Response was AT+CGSN 
```

还有2个问题：

1.  为什么它显示重复的输出？
2.  如何正确关闭文件句柄？`exec 3<&-`并且`exec 3>&-` 似乎不起作用。我必须按`Ctrl`+`C`才能重新控制终端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T04:07:07.100

`read`只会读取一行，不像`cat`它基本上会读取并回显直到文件结束。

对于一个`read`版本，您最好不要阅读超时，直到您获得`OK`（并存储任何包含大量数字的行）。

我想你会发现不是关闭 3 号文件句柄会阻止事情——它更有可能是`cat`继续*读取*/回显直到文件结束事件没有发生。

如果您只输入以下内容，您可以确定这一点：

```
echo XYZZY 
```

紧接在闭幕词之前`exec`。如果它还在`cat`，你将永远看不到它。

因此，使用循环`read`版本也可能会解决这个问题。

* * *

例如，以下是您可以使用`read`标准输入执行此操作的方法：

```
#!/bin/bash

NUM=
while true ; do
    read -p "> " -t 10 -r RESP <&0
    if [[ $? -ge 128 ]] ; then RESP=OK ; fi
    echo "Entered: $RESP"
    if [[ $RESP = OK ]] ; then break ; fi

    if [[ $RESP =~ ^[0-9] ]] ; then NUM=$RESP ; fi
done

echo "Finished, numerics were: '$NUM'" 
```

它使用 的超时功能`read`来检测是否没有更多输入（将输入设置`OK`为以强制循环退出）。如果你*在*那之前得到一个`OK`，它无论如何都会正常退出，超时只是为了迎合调制解调器没有按预期应答的可能性。

该数字最初设置为空，但被“调制解调器”中以数字开头的任何行覆盖。

两个示例运行，有和没有`OK`来自“调制解调器”的响应：

```
pax> ./testprog.sh
> hello
Entered: hello
> 12345
Entered: 12345
> OK
Entered: OK
Finished, numerics were: '12345'

pax> ./testprog.sh
> hello
Entered: hello
> now we wait 10 secs
Entered: now we wait 10 secs
> Entered: OK
Finished, numerics were: '' 
```

将其转换为与您的调制解调器设备类似的东西并不难（`read <&3`或者`read -u3`可以正常工作）。

* * *

这基本上会转化为您的环境：

```
exec 3<>/dev/ttyUSB3
echo -e "AT+CGSN\n" >&3
NUM=
while true ; do
    read -t 10 -r RESP <&3
    if [[ $? -ge 128 ]] ; then RESP=OK ; fi
    echo "Entered: $RESP"
    if [[ $RESP = OK ]] ; then break ; fi
    if [[ $RESP =~ ^[0-9] ]] ; then NUM=$RESP ; fi
done
echo "Finished, numerics were: '$NUM'"
exec 3<&-
exec 3>&- 
```

现在我还没有*测试过*，因为我没有连接调制解调器（已经使用宽带很长一段时间了），但它应该*接近*你需要的，如果不准确的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T03:47:27.493

`read`将要读取的描述符作为`-u`. 详情请参阅`help read`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T04:13:55.290

如果您想将各个行放入变量中，我建议您将其包装`read`成`while`：

```
while read -r RESPONSE <&3; do
  echo "Response was $RESPONSE"
  ## e.g.:
  [ "$RESPONSE" = "OK" ] && break
done 
```

但是，如果您希望发送回给您的“所有内容”都驻留在其中，`$RESPONSE`您可以这样做：

```
RESPONSE="$(cat <&3)" 
```

# jquery - 水平滚动后不应用主题

> ID：11999498
> 
> 赞同：2
> 
> 时间：2012-08-17T03:45:51.617
> 
> 标签：jquery, jquery-ui, jquery-mobile

在我的移动应用程序中，我的主题为：`<div data-role="page" id="myPage" data-theme="b" >` . 我在内部 div 中有一张桌子。主题 b 已正确应用，但如果假设我水平滚动，则主题在滚动后不适用。意味着主题仅应用于滚动前的可见屏幕，滚动后没有主题。此问题仅适用于水平滚动，对于垂直滚动它可以完美运行。

任何建议将不胜感激。

这是我的屏幕截图！

提前致谢。

![在此处输入图像描述](../Images/8e115381df0ff2b94da138dd04bd825b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T06:58:08.540

这是解决问题的一种方法，也解决了代码的其他一些方面。

这是以下更改的结果 -> [http://jsfiddle.net/X8yXe/17/](http://jsfiddle.net/X8yXe/17/)。

首先，我将使用`data-role="content"`参数包装您的内容，以保持这种语义与在 jQuery Mobile[中完成的方式相同。](http://jquerymobile.com/demos/1.1.1/docs/pages/page-anatomy.html)

```
<div data-role="page" id="orderbookpage" data-theme="b" >
    <div data-role="header" align="center" data-theme="b">
        <a href="#" data-rel="back" data-icon="arrow-l">Back</a>
        <h1>MyPage </h1>
        <a href="MainMenu.html"  data-icon="grid">Menu</a>
    </div>
    <div data-role="content" data-theme="b">
        <div id="portfoliowrapper" align="center"  data-theme="b"></div>
        <p>Some random content, so we can see the scroll in relation to other content. </p>
    </div>       
</div> 
```

其次，您可以将以下 CSS 应用于 #protfoliowrapper 以实现包含的水平滚动 div。

```
#portfoliowrapper {
    width:93%;  
    white-space: nowrap;
    height:40px;
    padding: 20px;
    overflow: auto;
    overflow-x: hidden; /* hide scrollbar */

    /* make it stand out */
    border: 1px solid #ccc;
    margin: 0px auto;
    background-color: #eef1f1;
    background-image: -webkit-gradient(linear,0 0, 0 100%, from(#f3f3f3), to(#e2e2e2));
    -webkit-border-radius: 2px;
    -webkit-box-shadow: 1px 0 0 #fff inset, 0 1px 0 #fff inset;
} 
```

第三也是最后一个小费。您使用 jQuery Mobile，为什么不使用它呢？为什么在加载 jQuery 时使用标准 JavaScript？

而不是这样做：

```
document.getElementById('portfoliowrapper').innerHTML = theader + tbody + tfooter; 
```

你可以这样做：

```
$('#portfoliowrapper').append(theader + tbody + tfooter);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:32:21.067

[http://jsfiddle.net/X8yXe/7/](http://jsfiddle.net/X8yXe/7/)通过添加位置：固定到标题和宽度 100% 你可以让它坚持。固定将使 div 浮动，因此表格不会出现在下方，而是在其下方。为了解决这个问题，我添加了第二个高度 div 来将桌子向下推。

position:fixed 适用于 Android 和 iOS 5，但早期的 iO​​S 版本不支持 position:fixed。

# python - 将绑定方法转换为十进制

> ID：11999511
> 
> 赞同：0
> 
> 时间：2012-08-17T03:46:59.587
> 
> 标签：python, django

（编辑添加更多代码）

在这里不断出现错误，要求我将绑定方法转换为十进制。我认为问题在于这一行：

```
order_item = OrderItem(item=item.item_id, quantity=item.quantity, price=item.price, order=order) 
```

我认为 Django 希望我将 item.price 转换为小数，但我一直无法弄清楚如何。我尝试了 decimal.Decimal(str(item.price)) 不起作用，而 float(item.price) 也不起作用。与往常一样，提前致谢。

```
#cart.get_cart_items
def get_cart_items(request):
    return Cart.objects.filter(cart_id=_cart_id(request))

#models
class Cart(models.Model):
    cart_id = models.CharField(max_length=50)
    item_id = models.ForeignKey('store.Item', unique=False)
    date_added = models.DateTimeField(auto_now_add=True)
    quantity = models.IntegerField(default=1)

class Item(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=75)
    slug = models.SlugField(max_length=50, unique=True)
    is_active = models.BooleanField(default=True, blank=True)
    image1 =  models.ImageField(upload_to='img')
    image2 =  models.ImageField(upload_to='img', blank=True)
    image3 =  models.ImageField(upload_to='img', blank=True)
    image_caption1 = models.CharField(max_length=200, blank=True)
    image_caption2 = models.CharField(max_length=200, blank=True)
    image_caption3 = models.CharField(max_length=200, blank=True)
    price = models.DecimalField(max_digits=8, decimal_places=2)
    quantity = models.IntegerField(default=1)
    description = models.TextField()
    created = models.DateTimeField(auto_now_add=True)
    shipping_price = models.DecimalField(decimal_places=2, max_digits=6)
    categories = models.ManyToManyField(Category)

#views    
    def express_payment(request):
            user = request.user
            cart_subtotal = cart.cart_subtotal(request)

            if request.method == "POST":
                form = PaymentForm(request.POST)
                if form.is_valid():
                    order = form.save(commit=False)
                    order.buyer = request.user
                    order.transaction_id = "12345678901234567890"
                    order.save()
                    if order.pk:
                        cart_items = cart.get_cart_items(request)
                        for item in cart_items:
                            order_item = OrderItem(item=item.item_id, quantity=item.quantity, price=item.price, order=order)
                            order_item.save() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T04:19:53.947

请提供更多错误信息，否则我们无法提供任何有意义的帮助..

编辑：

假设`class Item`and`OrderItem`是同一件事，那么我认为`user`,`name`是保存`OrderItem`实例所必需的。

# sql - 如何使用单个查询列出单个字段的聚合枚举值？

> ID：11999518
> 
> 赞同：1
> 
> 时间：2012-08-17T03:48:02.820
> 
> 标签：sql, aggregate-functions, enumeration

标题有点绕。这是一个具体的例子。我有两张桌子：

```
+-------------+--------------------------------+------+-----+---------+-------+
| Field       | Type                           | Null | Key | Default | Extra |
+-------------+--------------------------------+------+-----+---------+-------+
| event       | varchar(100)                   | NO   | MUL | NULL    |       |
| sport       | varchar(100)                   | NO   |     | NULL    |       |
| athleteCode | char(10)                       | NO   | MUL | NULL    |       |
| medal       | enum('GOLD','SILVER','BRONZE') | NO   |     | NULL    |       |
+-------------+--------------------------------+------+-----+---------+-------+

+---------+--------------+------+-----+---------+-------+
| Field   | Type         | Null | Key | Default | Extra |
+---------+--------------+------+-----+---------+-------+
| name    | varchar(100) | NO   |     | NULL    |       |
| code    | char(10)     | NO   | PRI | NULL    |       |
| country | varchar(100) | NO   | MUL | NULL    |       |
+---------+--------------+------+-----+---------+-------+ 
```

第一桌是奖牌桌。第二张桌子是运动员桌。这两个表通过`medals.athleteCode`和关联`athlete.code`。我希望能够列出显示以下信息的查询：

`COUNTRY | GOLD | SILVER | BRONZE | TOTAL`

到目前为止，我能够做到的唯一方法是使用此查询：

```
SELECT country, medal, COUNT(medal) as count  
    FROM athletes, medals  
    WHERE athletes.code=medals.athleteCode  
    GROUP BY country, medal  
    ORDER BY country, medal; 
```

但是在我完成这个查询之后，我仍然需要处理这个查询（通过 PHP），因为这只会让我得到每个国家的每种奖牌类型（即所有中国的金牌、所有中国的银牌、所有中国的铜牌等）。有没有办法创建一个查询，其中查询的每条记录（即行）是：`COUNTRY | GOLDS | SILVERS | BRONZES | TOTAL`？我看了看，`COUNT()`但我不确定如何使用它。

* * *

### 2012.08.17

@"habib zare" 的解决方案非常接近。这是我的调整：

```
SELECT country, 
(SELECT count(*) FROM medals WHERE a.code=m.athleteCode AND medal='Gold') AS Gold,
(SELECT count(*) FROM medals WHERE a.code=m.athleteCode AND medal='Silver') AS Silver,
(SELECT count(*) FROM medals WHERE a.code=m.athleteCode AND medal='Bronze') AS Bronze,
(SELECT count(*) FROM medals WHERE a.code=m.athleteCode) AS Total
FROM medals m JOIN athletes a
ON m.athleteCode=a.code
GROUP BY country
ORDER BY country, Gold DESC, Silver DESC, Bronze DESC 
```

问题是二级`SELECT`报表需要根据国家来选择；那就是我需要类似的东西：

```
SELECT country AS Country,
(SELECT count(*) FROM medals WHERE a.code=m.athleteCode AND medal='Gold' AND a.country=Country) AS Gold, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:07:36.577

我不明白你想要什么，但我认为你想要这个：

奖牌：奖牌活动体育运动员代码金牌 jh 游泳 1

青铜 dfg ert 2

黄金 fg 错误 1

银作为 erf 4

铜牌 erf 5

金 df dfg 6

黄金 sdds tekvando 3

青铜 df jh 1

青铜 yy jh 1

银 ik 为 1

银 shj jsg 3

银 shj jsg 5

银 sjdk hgj 5

银 wuytu wopow 5

银 wuytu wopow 6

银 wuytu wopow 6

和

运动员：

名称代码国家

哈比卜 1 伊朗

艾哈迈德 2 阿塞拜疆

穆罕默德 3 火鸡

所以 4 伊朗

ghg 5 阿塞拜疆

yewtuuy 6 阿塞拜疆

我的查询：

```
SELECT country,name,
(select count(*) from medals where athleteCode=m.athleteCode and medal='Gold') as Gold,
(select count(*) from medals where athleteCode=m.athleteCode and medal='Silver') as Silver,
(select count(*) from medals where athleteCode=m.athleteCode and medal='Bronze') as Bronze,
(select count(*) from medals where athleteCode=m.athleteCode) as Total
FROM medals m join athletes a
on m.athleteCode=a.code
group by country,code
order by country,Gold desc,Silver desc,Bronze desc 
```

结果 ：

国名 金银铜 合计

阿塞拜疆 yewtuuy 1 2 0 3

阿塞拜疆 GHG 0 3 1 4

阿塞拜疆艾哈迈德 0 0 1 1

伊朗哈比卜 2 1 2 5

伊朗所以 0 1 0 1

土耳其穆罕默德 1 1 0 2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T04:09:58.717

在 MS SQL Server`SUM(CASE WHEN medal = 'GOLD' THEN 1 ELSE 0 END) AS GOLDS`中可以与`GROUP BY country`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T04:16:27.720

如果你使用 MSSQL，你也可以使用 OUTER APPLY：

样本：

```
SELECT Country
  ,Gold = ISNULL(GoldMedals.MedalCount,0)
  ,Total = ISNULL(TotalMedals.MedalCount,0) 
FROM athletes
  OUTER APPLY (
     SELECT MedalCount = COUNT(*)
     FROM medals
     WHERE medals.athletescode = atheletes.medalsathleteCode
       AND medals.Type = 'Gold'
   ) GoldMedals
   OUTER APPLY (
     SELECT MedalCount = COUNT(*)
     FROM medals
     WHERE medals.athletescode = atheletes.medalsathleteCode
    ) TotalMedals   
GROUP BY country 
```

您可能需要添加 SUM 而不是 ISNULL 但我并没有真正测试此代码，所以按原样使用它......

# svn - 解锁工作副本

> ID：11999519
> 
> 赞同：1
> 
> 时间：2012-08-17T03:48:25.533
> 
> 标签：svn

不知何故，我弄乱了我的工作副本并 svn 锁定了它。我认为它是从移动一个子目录然后将它移回而不告诉 SVN 发生的。每当我尝试做某事时，SVN 都会告诉我我的工作副本已锁定，我需要运行`svn cleanup`以将其删除。当我尝试这样做时，SVN 给了我这个错误：

```
 svn: In directory '.'
svn: Error processing command 'modify-entry' in '.'
svn: Error modifying entry for 'bcrypt'
svn: 'bcrypt' is not under version control 
```

（在我的情况下，子目录是`bcrypt`）
我查看了其他 SO 问题，但似乎无法弄清楚。我尝试删除`.svn/lock`文件但没有任何结果。我尝试删除`bcrypt`和清理，但它仍然显示相同的错误消息！这是我的基本工作副本结构：

```
Root (.)
    files...
    ...
    bcrypt
    .svn 
```

我将非常感谢某人的帮助。

PS 我已经对我的工作副本进行了大量编辑，所以如果可能的话，我*宁愿*不丢失这些。

PSS 我在 Mac 上使用命令行 svn

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:56:40.470

在这种情况下，当您担心您的工作文件时，最好的办法是将它们复制到其他地方并删除它们附带的 .svn 元数据。然后，签出一个新副本并用您编辑的文件覆盖它。然后签到。

请注意您从工作副本中删除的文件，否则这始终有效 - 适用于所有 SCM。这也是最安全的尝试找到修复 wc 的选项，最坏的情况是您最终删除或覆盖了所有工作。

# ember.js - 在emberjs中绑定属性类

> ID：11999521
> 
> 赞同：0
> 
> 时间：2012-08-17T03:49:20.087
> 
> 标签：ember.js

我`{{bindAttr class="isEnabled:enabled:disabled"}}`在 emberjs.com 上看到。它将为 true 应用启用的类，否则使用属性类禁用。但是当我在 jsfiddle.net 中尝试它时，它不起作用。

[http://jsfiddle.net/Ember/59/](http://jsfiddle.net/Ember/59/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:01:29.773

您正在使用 Ember.js`v0.9.5`中引入了此功能的`v1.0.0pre`. 这是使用此最新版本的工作示例：http: [//jsfiddle.net/pangratz666/E69Gv/](http://jsfiddle.net/pangratz666/E69Gv/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T05:03:00.590

因为那个 jsfiddle 使用的是旧版本的 emberjs 0.9.5。将其更新到最新版本，代码将起作用。

[http://jsfiddle.net/Ember/61/](http://jsfiddle.net/Ember/61/)

# c++ - “int”之前的 C++ 预期主表达式

> ID：11999532
> 
> 赞同：3
> 
> 时间：2012-08-17T03:51:13.180
> 
> 标签：c++, dev-c++

本周的家庭作业是创建一个基本的 c++ 程序，要求用户输入以英尺和英寸为单位的长度，然后以厘米为单位输出；关键是我们要创建一个异常并让它处理用户输入负数或字符的情况。我已经编写了代码，但是当它编译时出现错误：

在函数 'int main()' 中：第 19 行的“int”之前的预期主表达式在“int”之前预期的 ')'。

这是我的代码：

```
#include <iostream>

using namespace std;

const double centimetersPerInch = 2.54; //named constant
const int inchesPerFoot = 12; //named constant

int main ()
{
    int feet;
    int inches; //declared variables    
    int totalInches;
    double centimeters;
    //statements
cout << "Enter two integers one for feet and " << "one for inches: ";
cin >> feet >> inches;
try
{
     if ( int feet, int inches < 0.0 )
        throw "Please provide a positive number";
cout << endl;

cout << "The numbers you entered are " << feet << " for feet and " << inches << " for inches. " << endl;               
    totalInches = inchesPerFoot * feet + inches;     

cout << "The total number of inches = " << totalInches << endl;                   
    centimeters = centimetersPerInch * totalInches;

cout << "The number of centimeters = " << centimeters << endl;   
}
catch (char* strException)
{
      cerr << "Error: " << strException << endl;
}

    return 0;
} 
```

我认为这是我忽略的简单事情，但我无法弄清楚我的问题是什么。任何帮助深表感谢。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T03:54:03.430

在

```
if ( int feet, int inches < 0.0 ) 
```

您隐式地重新声明了您之前声明的两个整数变量。你不应该那样做。相反，只需使用它们：

```
if (feet, inches < 0.0 ) 
```

现在，这可能不是你的意思。你可能想说这样的话：

```
if (feet < 0.0 || inches < 0.0 ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T03:54:58.157

您需要在`int`开始您的 try 块的 if 语句中剪切单词。

您需要使用 a`||`而不是逗号。IE`feet < 0.0 && inches < 0.0`

# css - 引入文本并显示块与内联

> ID：11999533
> 
> 赞同：-2
> 
> 时间：2012-08-17T03:51:13.437
> 
> 标签：css

我有一个 while 循环，它会回显几个图像。我的下一步是在图像上添加文字。但是，一旦我将该文本添加到 while 循环中，我的图像就会从内联变为块。我已经尝试了几乎所有的方法，从将显示更改为内联，再到使用图像和文本的不同位置。我该如何解决。代码如下。

脚本部分

```
<script type="text/javascript" >
$(function() {

$("h2")
    .wrapInner("<span>")

$("h2 br")
    .before("<span class='spacer'>")
    .after("<span class='spacer'>");

});
</script> 
```

样式部分

```
<style type="text/css">

body {height: 1100px;}
html {height:1200px; }

h2 { 
   top: 200px; 
   left: 25px; 
   width: 100px; 
  position: relative;
}

div #image_box {width: 700px; display:inline;}

img {border: 1px solid grey; padding: 0; margin:15px; display:inline;}

#viewers_pleasure { padding: 15px; height: 1200px; width: 4800px; }

h2 span { 
   color: white; 
   font: bold 24px/45px Helvetica, Sans-Serif; 
   letter-spacing: -1px;  
   background: rgb(0, 0, 0); /* fallback color */
   background: rgba(0, 0, 0, 0.7);
   padding: 10px; 
}

h2 span.spacer {
padding:0 5px;
}
</style> 
```

身体部分

```
<div id="viewers_pleasure">

<div id="image_box">
<img src="images/89c246298be2b6113fb10ba80f3c6956_8" width="560" height="420"/>    
<h2><br>$</h2>
</div>

<div id="image_box">
<img src="images/8e73b27568cb3be29e2da74d42eab6dd_9" width="560" height="420"/>
<h2><br>$</h2>
</div>

<div id="image_box">
<img src="images/216e77337cdef3bd1bede845d1aba608_3" width="560" height="420"/>
<h2>weezer<br>$0</h2>
</div>

<div id="image_box">
<img src="images/452ff601eb791947cd76a2119f1db973_2" width="560" height="420"/>    
<h2><br>$</h2>
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:28:16.463

尝试对 image_box 使用 float left

```
div #image_box {width: 700px; display:inline; float:left } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T03:55:27.800

我认为问题在于`<h2>`标签是`display:block`默认的。尝试从流程中删除它们，看看是否修复了图像显示问题。

# c++ - QPlainTextEdit dragEnterEvent 不接受文本/uri-list mime 类型

> ID：11999536
> 
> 赞同：0
> 
> 时间：2012-08-17T03:51:29.560
> 
> 标签：c++, windows, qt4

我有继承 QPlainTextEdit 的类 codeEditor。我已经像这样重新实现了 dragEnterEvent：

```
void CodeEditor::dragEnterEvent(QDragEnterEvent *event)
{
    if (event->mimeData()->hasFormat("text/uri-list") || event->mimeData()->hasFormat("text/plain"))
        event->acceptProposedAction();
} 
```

它适用于 text/plain mime 类型，但适用于 text/uri-list，例如将文件拖入其中。它会更改光标以指示它无效，如果我删除一个文件，它就不起作用。

另一个奇怪的事情，它在 linux 中效果很好。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T04:04:22.513

有人已经将其报告为[qt 的错误，](https://bugreports.qt-project.org/browse/QTBUG-20457)
我不确定它是否已修复。

请检查，它可能有用。:)

# xml - 当您拥有可能具有自己的属性的属性时，最好的数据库设计？

> ID：11999537
> 
> 赞同：0
> 
> 时间：2012-08-17T03:51:31.153
> 
> 标签：xml, database-design

我正在尝试基于一些 XML 脚本创建数据库设计。我想知道我应该怎么做才能存储 XML 标记。我真的无法理解的部分是如何将特定数据库对象的每个属性与其标签相关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T05:34:02.550

您需要在数据库中搜索这些标签/属性，还是只存储它们？

如果不需要进行搜索，也可以直接将 XML 存储在 BLOB 中。

否则，您需要在数据库中“重新创建”分层 XML 结构。在最基本的层面上，您将拥有一个标签和属性表，标签能够包含其他标签，例如：

![在此处输入图像描述](../Images/b692e64175ba32956a55690b15c019ff.png)

# c# - 发送Authorization crud授权

> ID：11999541
> 
> 赞同：0
> 
> 时间：2012-08-17T03:51:56.767
> 
> 标签：c#, microsoft-metro, crud

我正在编写（尝试编写一个 crud 应用程序！）我需要先向服务器发送一个密钥，然后才能开始使用该服务。

```
 this.InitializeComponent();
        client = new HttpClient();
        client.BaseAddress = new Uri("http://dignity-network.org/api/"); 
```

我努力了

```
client.BaseAddress = new Uri("NO3ID81WJECJXZI83A3YYPGJKJLNEJMQ@dignity-network.org/api/") 
```

但这不起作用，向服务器发送授权的正确请求是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T04:04:49.207

一切都取决于服务器如何接受和实施授权代码。如果您必须在开始使用之前发送验证码，您只需要：

```
HttpContent content = HttpContent.Create(yourAuthCode, Encoding.UTF8);
HttpResponseMessage response = client.Post(new Uri ("http://dignity-network.org/api/"), content); 
```

# entity-framework - EF 5.0 的通用存储库不起作用

> ID：11999542
> 
> 赞同：3
> 
> 时间：2012-08-17T03:52:16.813
> 
> 标签：entity-framework, repository, entity-framework-5

我的实体有一个通用存储库，我的所有实体（由代码生成项生成）都有一个实现 IID 接口的个性化部分，此时我的所有实体都必须具有 Int32 Id 属性。

所以，我的问题在于更新，这是我的代码

```
public class RepositorioPersistencia<T> where T : class
{
    public static bool Update(T entity)
    {
        try
        {
            using (var ctx = new FisioKinectEntities())
            {
                // here a get the Entity from the actual context 
                var currentEntity = ctx.Set<T>().Find(((BLL.Interfaces.IID)entity).Id);

                var propertiesFromNewEntity = entity.GetType().GetProperties();
                var propertiesFromCurrentEntity = currentEntity.GetType().GetProperties();

                for (int i = 0; i < propertiesFromCurrentEntity.Length; i++)
                {
                    //I'am trying to update my current entity with the values of the new entity
                    //but this code causes an exception
                    propertiesFromCurrentEntity[i].SetValue(currentEntity, propertiesFromNewEntity[i].GetValue(entity, null), null);
                }
                ctx.SaveChanges();
                return true;
            }

        }
        catch
        {

            return false;
        }
    }
 } 
```

有人可以帮助我吗？这让我发疯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T04:42:16.780

您可以使用 EF API 来更新实体的值，如下所示。

```
public static bool Update(T entity)
{
    try
    {
        using (var ctx = new FisioKinectEntities())
        {
            var currentEntity = ctx.Set<T>().Find(((BLL.Interfaces.IID)entity).Id);

            var entry = ctx.Entry(currentEntity);
            entry.CurrentValues.SetValues(entity);

            ctx.SaveChanges();
            return true;
        }
    }
    catch
    {

        return false;
    }
} 
```

# thinking-sphinx - 增量索引 - 延迟的作业不起作用

> ID：11999544
> 
> 赞同：5
> 
> 时间：2012-08-17T03:53:22.383
> 
> 标签：thinking-sphinx

该代码在延迟作业及其在delayed_jobs 表中的制作队列和工作人员正在处理它们时工作正常，但我们仍然在销毁对象时遇到异常

这是痕迹

```
vendor/bundle/ruby/1.9.1/gems/riddle-1.5.1/lib/riddle/client.rb:639:in `recv'
vendor/bundle/ruby/1.9.1/gems/riddle-1.5.1/lib/riddle/client.rb:639:in `block in request'
vendor/bundle/ruby/1.9.1/gems/riddle-1.5.1/lib/riddle/client.rb:538:in `connect'
vendor/bundle/ruby/1.9.1/gems/riddle-1.5.1/lib/riddle/client.rb:623:in `request'
vendor/bundle/ruby/1.9.1/gems/riddle-1.5.1/lib/riddle/client.rb:226:in `run'
vendor/bundle/ruby/1.9.1/gems/riddle-1.5.1/lib/riddle/client.rb:338:in `query'
vendor/bundle/ruby/1.9.1/gems/thinking-sphinx-2.0.10/lib/thinking_sphinx/search.rb:414:in `block (2 levels) in populate'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/notifications.rb:123:in `block in instrument'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/notifications.rb:123:in `instrument'
vendor/bundle/ruby/1.9.1/gems/thinking-sphinx-2.0.10/lib/thinking_sphinx/search.rb:518:in `log'
vendor/bundle/ruby/1.9.1/gems/thinking-sphinx-2.0.10/lib/thinking_sphinx/search.rb:527:in `log'
vendor/bundle/ruby/1.9.1/gems/thinking-sphinx-2.0.10/lib/thinking_sphinx/search.rb:413:in `block in populate'
vendor/bundle/ruby/1.9.1/gems/thinking-sphinx-2.0.10/lib/thinking_sphinx/search.rb:568:in `call'
vendor/bundle/ruby/1.9.1/gems/thinking-sphinx-2.0.10/lib/thinking_sphinx/search.rb:568:in `retry_on_stale_index'
vendor/bundle/ruby/1.9.1/gems/thinking-sphinx-2.0.10/lib/thinking_sphinx/search.rb:411:in `populate'
vendor/bundle/ruby/1.9.1/gems/thinking-sphinx-2.0.10/lib/thinking_sphinx/search.rb:176:in `method_missing'
vendor/bundle/ruby/1.9.1/gems/thinking-sphinx-2.0.10/lib/thinking_sphinx/search_methods.rb:395:in `search_for_id'
vendor/bundle/ruby/1.9.1/gems/thinking-sphinx-2.0.10/lib/thinking_sphinx/active_record.rb:268:in `delete_in_index'
vendor/bundle/ruby/1.9.1/gems/thinking-sphinx-2.0.10/lib/thinking_sphinx/active_record.rb:348:in `block in toggle_deleted'
vendor/bundle/ruby/1.9.1/gems/thinking-sphinx-2.0.10/lib/thinking_sphinx/active_record.rb:34
.
.
.
app/controllers/received_messages_controller.rb:142:in `destroy' 
```

添加了延迟工作增量时的问题，那么为什么它试图直接打击思考狮身人面像？

这是定义索引块

```
 define_index do
    if Rails.env.production?
      set_property :delta => FlyingSphinx::DelayedDelta
    else
      set_property :delta => true
    end

    indexes message.subject

    has user_id, read, created_at

    where "users_user_messages.is_active = 'Y'"

  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T16:43:56.480

这里发生的事情是 Thinking Sphinx 在将其标记为已删除之前检查对象是否存在于 Sphinx 中 - 唯一的方法是搜索它。不过，Thinking Sphinx 中内置了一些错误处理，应该从 Sphinx 捕获（并忽略）错误，所以我有点不确定为什么你会看到引发异常。

您可以分享堆栈跟踪之前出现的错误描述吗？

此外，这与延迟作业无关。

# jquery - jQuery动态滚动条作为数据附加

> ID：11999550
> 
> 赞同：0
> 
> 时间：2012-08-17T03:54:09.167
> 
> 标签：jquery, scrollbar

我正在开发一个聊天工具的界面，非常需要你的帮助。所以我的聊天工具有一个自定义的垂直滚动条，我使用[niceScroll](http://areaaperta.com/nicescroll/demo.html)并且我认为它在添加动态数据时存在一些小问题，在这种情况下，当用户与代理聊天并且列表很长时。我有这个滚动条的问题，因为：

1.  它首先会被禁用，直到它达到一定的高度，然后显示滚动条。

2.  滚动条不知道是否附加了聊天，因此它不会自动调整高度。

我正在寻找一种解决方法，或者可以解决这个问题的垂直滚动插件。

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:59:25.040

[Jscrollpane](http://jscrollpane.kelvinluck.com)是一个非常好的自定义滚动条插件（在我看来）。

如果您查看[此示例](http://jscrollpane.kelvinluck.com/dynamic_content.html)，我相信这正是您所需要的。

这个[ajax 示例](http://jscrollpane.kelvinluck.com/ajax.html)也可能对您有用！

# css - 不规则的 CSS 角落？

> ID：11999559
> 
> 赞同：3
> 
> 时间：2012-08-17T03:55:57.577
> 
> 标签：css

有一个客户要求 CSS 中的不规则角。这甚至是一回事吗？到目前为止，我已经尝试过 CSS 三角形（[http://css-tricks.com/snippets/css/css-triangle/](http://css-tricks.com/snippets/css/css-triangle/)），但没有尝试过。

[https://dl.dropbox.com/u/4031469/irreg.png](https://dl.dropbox.com/u/4031469/irreg.png)

我想我可能不得不遗憾地用图像来做这件事……除非你们都知道有什么方法可以把它拉下来。

主要参数： 至少需要高度灵活，最好宽度也灵活，但不是必需的。当前的解决方案：顶部封盖器可能延伸到盒子上方，足以使角效果在辅助盒子上起作用……下部下降块完全对齐，推到下面。

到目前为止我最接近的尝试（使用图像作为顶部）：[https ://dl.dropbox.com/u/4031469/fs.html](https://dl.dropbox.com/u/4031469/fs.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T04:46:08.380

[从http://nicolasgallagher.com/pure-css-speech-bubbles/](http://nicolasgallagher.com/pure-css-speech-bubbles/)窃取

![chrome中jsfiddle的屏幕截图](../Images/83642cd395825bfdfeddc6c52a400fda.png)

~~[http://jsfiddle.net/aBYHX/](http://jsfiddle.net/aBYHX/)~~

**编辑：-**第二次尝试。更简单，更少的 css 并且与您的示例图片在同一侧。[http://jsfiddle.net/aBYHX/1/](http://jsfiddle.net/aBYHX/1/)

```
<div class="content">
    <p class="triangle-isosceles">This only needs one HTML element.</p>
    <p class="irregular-corner"> ---- </p>
</div>​ 
```

CSS：

```
.content
{
    padding: 15px;
}
.triangle-isosceles, .irregular-corner 
{
    position:relative;
    padding:15px;
    margin:1em 0 3em;
    color:#000;
    background:#f3961c;
}

.triangle-isosceles:after {
    content:"";
    position:absolute;
    bottom: 0; 
    right: 0; 
    border-width: 25px 50px 0 0; 
    border-style: solid;
    border-color: transparent white;
    /* reduce the damage in FF3.0 */
    display:block; 
}

.irregular-corner:before
{
    content:"";
    position:absolute;
    top: -25px; 
    right: 0px; 
    border-width: 25px 50px 0 0;
    border-style:solid;
    border-color:transparent #f3961c;
    /* reduce the damage in FF3.0 */
    display:block; 
}
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:36:46.237

~~根据我的研究，在 CSS3 下，这种外观的细节使它成为不可能。~~

这种外观有一个微妙的渐变和内部发光，我们已经使用`inset`盒子阴影完成了......这似乎不适用于之前的 css 三角形效果。

~~CSS 掩码看起来可能在许多情况下都能提供帮助，但在需要的情况下`box-shadow: inset`，图像是唯一的选择。~~

今天我使用 -webkit-clip-path 属性来完成这项工作，该属性具有不同的浏览器支持。

```
.entry{
  background-color: blue;
  width: 500px;
  height: 200px;
  -webkit-clip-path: polygon(0% 0%, 90% 0%, 100% 40%, 100% 100%, 0 100%);
  -webkit-transform: translateY(-30px);
  top: 10px;
  left: 0;

}

body{
  background-color: green; 
} 
```

[http://codepen.io/randallb/pen/tmlAH](http://codepen.io/randallb/pen/tmlAH)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T04:29:59.203

[Nora Brown 写了一篇关于CSS3 边框图像属性](http://css-tricks.com/understanding-border-image/)的可爱文章。值得快速阅读...

如果你担心跨浏览器的支持（你应该担心），那么提供一个优雅的后备。也许只是有一个没有“疯狂角落”的边界就可以作为一种后备情况，也许不是。

这种方法不是跨浏览器的，但有些人觉得“[渐进式](http://www.youtube.com/watch?v=eLsAim3FQr8)”很好。

# java - 在Java swing中获取组合框值

> ID：11999560
> 
> 赞同：12
> 
> 时间：2012-08-17T03:55:59.637
> 
> 标签：java, swing

我需要在 Swing 中获取组合框的整数值。

我已经为组合框设置了一个整数值作为 id。我尝试了 combobox.getSelectedItem() 和 combobox.getSelectedIndex() 但它无法获得 int 值。

下面是我的代码：

```
CommonBean commonBean[]=new CommonBean[commonResponse.getCommonBean().length+1];         
         for(int i=0;i<commonResponse.getCommonBean().length;i++)
         {
             commonBean[i] = new CommonBean("--Please select a project--", 0);
             commonBean[i+1] = new CommonBean(commonResponse.getCommonBean()[i].getProjectName(), commonResponse.getCommonBean()[i].getProjectId());
         }

JComboBox combobox= new JComboBox(commonBean);

public CommonBean(String projectName,int projectId) {       
        this.projectName = projectName;
        this.projectId = projectId;

    } 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-17T04:04:15.073

方法`Object JComboBox.getSelectedItem()`返回一个按类型包装的值，`Object`因此您必须相应地对其进行转换。

句法：

```
YourType varName = (YourType)comboBox.getSelectedItem();`
String value = comboBox.getSelectedItem().toString(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-24T19:36:36.293

如果字符串为空，`comboBox.getSelectedItem().toString()`将给出一个`NullPointerException`. 所以最好用`(String)`.

# jquery - CSS选择隐藏元素

> ID：11999561
> 
> 赞同：2
> 
> 时间：2012-08-17T03:56:04.280
> 
> 标签：jquery, css, selector, hidden

我试图弄清楚如何解决这个烦人的问题，据我所知，CSS 中没有 :hidden 选择器，但您可以在 jQuery 中使用它。我在 css 中知道的唯一其他选择器是 :empty，但是我的元素可能并不总是空的，但仍然是隐藏的。

所以这就是我想要做的。

```
 <div class="wrapper">
     <div class="one"></div>
     <div class="two"></div>
 </div> 
```

我希望能够选择“一个”或“两个”，如果它当前被隐藏，我想对另一个不是的元素做一些事情。

喜欢：

```
.wrapper .one:hidden .wrapper .two 
```

我知道我可以用 jQuery 做到这一点，但是我想找出一种方法，可以根据隐藏元素是否变为可见元素自动调整，反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:02:17.383

我不知道是否有隐藏的 CSS 选择器，但与此同时，您可以添加一个可能隐藏的类？

`.wrapper .one.hidden`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T04:31:32.577

原则上在纯 CSS 中是不可能的。如果 CSS 允许这样做，那么[“出现的第一只啄木鸟将摧毁文明”](http://www.murphys-laws.com/murphy/murphy-technology.html)。

考虑类似的事情：

```
.wrapper .one:not(:hidden) .wrapper .one { display:none; } 
```

这创造了完美的无限循环。你的浏览器会在试图解决它时死掉。

如果有趣，您可以[阅读我](http://www.terrainformatica.com/2008/07/css-selectors-and-computational-complexity/)关于该主题的文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T04:07:39.160

[您可以在此处](http://www.w3.org/TR/CSS2/selector.html)查看 CSS 选择器的完整列表。不幸的是，没有适用于可见性或按当前 CSS 样式选择的内容。

涉及最少代码的方法是为它们都提供一个`visible`类，您可以在 CSS 中设置它的样式。然后在元素被隐藏时使用 jQuery 删除`visible`该类，并在它再次可见时添加它。不是很精简，但它似乎是最好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T04:07:47.210

[这个jsfiddle](http://jsfiddle.net/UZpAa/)怎么样

与其寻找隐藏的那个并对另一个做些什么，为什么不只搜索可见的那个呢？

```
$(document).ready(function() {

    $('.wrapper div').each(function() {
        if ($(this).is(':visible')) {
          //do something special
        }
    })

}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T04:20:55.763

我想你正在寻找这样的东西：

## [看演示](http://jsfiddle.net/DgqaL/)

**jQuery：**

```
if($('.one').is(":hidden")) {
   $(".two").css("color","red")    
}​ 
```

# c# - 编写 Windows 服务时，我将大部分代码放在哪里？

> ID：11999564
> 
> 赞同：5
> 
> 时间：2012-08-17T03:57:12.773
> 
> 标签：c#, windows-services, onstart

我正在进入 Windows 服务并查看一些教程，但它们都非常愚蠢。它们通常涉及在重写的 OnStart 方法中打印一些内容。这听起来像它被调用一次。现在我应该把需要连续运行的代码放在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T05:26:38.030

服务类中的所有 On... 方法都应尽快返回。每当 Windows 服务控制器与您的服务交互时，它们最终都会被调用，并且服务控制器将等待成功返回。每当您使用服务控制面板小程序并启动或停止服务时，您看到的进度条就是在等待该服务的等效 OnStart 或 OnStop 返回时显示的内容。

所以在 OnStart 中要做的典型事情是以下一项或多项：

*   启动一个单独的线程来执行您的服务将执行的恒定任务
*   设置一个计时器（`System.Threading.Timer`各种），它将定期执行您的服务定期执行的任何操作（可能轮询某些状态）
*   开始在网络端口上异步侦听，可能使用 TcpListener 或 UdpClient
*   订阅一些系统事件

在任何这些情况下，您的服务任务都是异步执行的，并且您会立即从 OnStart 退出。但请记住跟踪您的线程、计时器、TcpListener 或其他任何东西，以便您可以在 OnStop（以及可选的 OnPause 和 OnContinue）中与其交互。通常要做的事情是处理任何计时器（因此它们不会再触发），关闭所有套接字或侦听器，然后设置 ManualResetEvent。您正在运行的任何线程都应定期检查此事件并在收到信号后退出。如果您想确保成功关闭服务并冒可能丢失数据的风险，您可以加入具有合理超时（通常为 30 秒）的任何​​正在运行的线程，然后中止在超时到期后仍在运行的任何线程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T04:02:00.500

与具有多个类的任何其他项目相同 - 您将其放在单独的项目中。

“Windows 服务”项目应该只包含启动服务的样板文件、作为服务一部分的任何计时器等等。将其余部分放在另一个项目中允许您稍后在桌面应用程序、Web 应用程序、WCF 服务等中使用您的业务逻辑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T04:17:02.047

为了以正确的方式创建任何 Windows 服务，我坚持使用[TopShelf](http://topshelf-project.com/)库。它是 IoC 友好的，您可以将 Windows 服务基础结构代码与服务逻辑完全分开。您还可以将该服务作为控制台应用程序运行，然后将其转换为生产环境中的 Windows 服务。我认为这是创建 Windows 服务的“THE”方式，并且永不回头。

# sql - Rails 发布日期排序问题

> ID：11999569
> 
> 赞同：1
> 
> 时间：2012-08-17T03:57:54.333
> 
> 标签：sql, ruby-on-rails, sorting, activerecord

我在使用 ActiveRecord 按日期对帖子进行排序时遇到问题......它没有达到我的预期。

```
1.9.3p194 :019 > Post.all(:select => [:id, :updated_at], :order => "updated_at DESC")
  Post Load (0.7ms)  SELECT id, updated_at FROM "posts" ORDER BY published_at DESC, updated_at DESC
+----+---------------------------+
| id | updated_at                |
+----+---------------------------+
| 22 | 2012-08-16 18:59:28 -0600 |
| 9  | 2012-08-16 18:58:16 -0600 |
| 11 | 2012-08-15 20:18:53 -0600 |
| 1  | 2012-08-15 20:18:52 -0600 |
| 12 | 2012-08-15 20:18:53 -0600 |
| 6  | 2012-08-15 20:18:52 -0600 |
| 13 | 2012-08-15 20:18:53 -0600 |
| 2  | 2012-08-15 20:18:52 -0600 |
| 15 | 2012-08-15 20:18:53 -0600 |
| 5  | 2012-08-16 21:49:14 -0600 |
| 17 | 2012-08-15 20:18:53 -0600 |
| 4  | 2012-08-15 20:18:52 -0600 |
| 20 | 2012-08-15 20:18:53 -0600 |
| 7  | 2012-08-15 20:18:52 -0600 |
| 21 | 2012-08-15 20:18:53 -0600 |
| 14 | 2012-08-15 20:18:53 -0600 |
| 10 | 2012-08-15 20:18:53 -0600 |
| 8  | 2012-08-15 20:18:53 -0600 |
| 19 | 2012-08-15 20:18:53 -0600 |
| 18 | 2012-08-15 20:18:53 -0600 |
| 16 | 2012-08-15 20:18:53 -0600 |
| 3  | 2012-08-15 20:18:52 -0600 |
+----+---------------------------+ 
```

请注意，帖子 #5 的更新日期为 8 月 16 日，但它不会到达顶部！请注意，Rails 似乎对其进行了正确排序....

```
1.9.3p194 :020 > Post.all(:select => [:id, :updated_at], :order => "updated_at DESC").sort_by &:updated_at
  Post Load (0.6ms)  SELECT id, updated_at FROM "posts" ORDER BY published_at DESC, updated_at DESC
+----+---------------------------+
| id | updated_at                |
+----+---------------------------+
| 1  | 2012-08-15 20:18:52 -0600 |
| 2  | 2012-08-15 20:18:52 -0600 |
| 3  | 2012-08-15 20:18:52 -0600 |
| 4  | 2012-08-15 20:18:52 -0600 |
| 6  | 2012-08-15 20:18:52 -0600 |
| 7  | 2012-08-15 20:18:52 -0600 |
| 8  | 2012-08-15 20:18:53 -0600 |
| 10 | 2012-08-15 20:18:53 -0600 |
| 11 | 2012-08-15 20:18:53 -0600 |
| 12 | 2012-08-15 20:18:53 -0600 |
| 13 | 2012-08-15 20:18:53 -0600 |
| 14 | 2012-08-15 20:18:53 -0600 |
| 15 | 2012-08-15 20:18:53 -0600 |
| 16 | 2012-08-15 20:18:53 -0600 |
| 17 | 2012-08-15 20:18:53 -0600 |
| 18 | 2012-08-15 20:18:53 -0600 |
| 19 | 2012-08-15 20:18:53 -0600 |
| 20 | 2012-08-15 20:18:53 -0600 |
| 21 | 2012-08-15 20:18:53 -0600 |
| 9  | 2012-08-16 18:58:16 -0600 |
| 22 | 2012-08-16 18:59:28 -0600 |
| 5  | 2012-08-16 21:49:14 -0600 |
+----+---------------------------+ 
```

我敢肯定这很简单...您可以提供的任何帮助将不胜感激。

我试过这些无济于事：

```
Post.all(:order => "updated_at DESC")
Post.all(:order => "updated_at DESC").limit(1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:10:33.740

想我已经弄清楚了....我在“created_at”上有一个默认范围，我认为这让我搞砸了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T04:11:36.533

那么，SQL 肯定是不正确的。

```
SELECT id, updated_at FROM "posts" ORDER BY published_at DESC, updated_at DESC 
```

应该

```
SELECT id, updated_at FROM "posts" ORDER BY updated_at DESC 
```

编辑：

是的，默认范围意味着它将按published_at 和updated_at 排序。如果您想在模型中保留默认范围，但不使用此查询的范围，您可以使用：

```
Post.unscoped.all(:select => [:id, :updated_at], :order => "updated_at DESC") 
```

# shell - 错误：CakePHP 1.3 将组件导入外壳

> ID：11999572
> 
> 赞同：0
> 
> 时间：2012-08-17T03:58:33.087
> 
> 标签：shell, cakephp, cron, cakephp-1.3

嗨，目前我正在尝试将组件导入 shell，这是我的代码

```
<?php
App::import('Component', 'OptimalPayment');

class PushEftShell extends Shell {
    var $uses = array('User' , 'Payment');

    function main() {
        $OptimalPayment = OptimalPaymentComponent();
        $Organsation = $this->Organisation->find('all', array(
            'fields' => array('id', 'name'),
            'contain' => array(
                'ContactPerson', 'BankDetail', 'Address', 'Phone'
            )
        ));
    }
}
?> 
```

我有这个错误信息

```
Fatal error: Class 'Component' not found in C:\web\appName\app\controllers\components\optimal_payment.php on line 24 
```

我的导入有什么问题？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:13:48.763

在 CakePHP 1.3 中，您应该将组件类扩展为`Object`. 这意味着您应该编写如下：

```
class OptimalPaymentComponent extends Object{
.............
} 
```

# perl - 使用 XML::Twig 将 XML 记录添加到现有 XML 文件中

> ID：11999574
> 
> 赞同：0
> 
> 时间：2012-08-17T03:59:04.723
> 
> 标签：perl, xml-twig

我试图在现有 XML 文件的某个 xpath 下添加一个内容块。我不熟悉使用 Perl 进行这种 XML 解析。但我应该使用这个[XML::Twig](https://www.metacpan.org/module/XML%3a%3aTwig)。

输入 ：

```
 <model name="MDL_#USER#" oid="#LOOP#">
<appli name="ERETAIL" oid="2">
    <schema desc="Parameters schema" enab="YES" name="Parameters" oid="1" prio="1">
        <bean enab="YES" labl="Parameters" name="ERETAILPARA" oid="3" vers="1.0" xpos="0" ypos="0">
            <para>
                <root>
                    <row desc="password encryption mode" name="OISENCRYPT" value="BASE64"/>
                </root>
            </para>         
        </bean>
    </schema>
</appli> 
```

输出：

```
 <model name="MDL_#USER#" oid="#LOOP#">
<appli name="ERETAIL" oid="2">
    <schema desc="Parameters schema" enab="YES" name="Parameters" oid="1" prio="1">
        <bean enab="YES" labl="Parameters" name="ERETAILPARA" oid="3" vers="1.0" xpos="0" ypos="0">
            <para>
                <root>
                    <row desc="password encryption mode" name="OISENCRYPT" value="BASE64"/>
                    <row name="INTERNAL" desc="" value="">
                        <row name="PATH" desc="Path" value="#PATH#" />
                        <row name="EXT" desc="Adresse" value="#GAIAIP#" />
                    </row>  
                </root>
            </para>         
        </bean>
    </schema>
</appli> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:34:57.127

对于[XML::Twig](http://www.metacpan.org/module/XML%3a%3aTwig)，创建一个处理程序来修改要更改的元素。在该处理程序中，创建所需的新元素，然后将它们作为子元素粘贴到元素中：

```
use XML::Twig;

my $xml = <<'HERE';
<model name="MDL_#USER#" oid="#LOOP#">
<appli name="ERETAIL" oid="2">
    <schema desc="Parameters schema" enab="YES" name="Parameters" oid="1" prio="1">
        <bean enab="YES" labl="Parameters" name="ERETAILPARA" oid="3" vers="1.0" xpos="0" ypos="0">
            <para>
                <root>
                    <row desc="password encryption mode" name="OISENCRYPT" value="BASE64"/>
                </root>
            </para>         
        </bean>
    </schema>
</appli>
</model>
HERE

my $twig = XML::Twig->new(
    twig_handlers => {
        'bean/para/root' => \&add_rows,
        },
    pretty_print => 'indented',
    );
$twig->parse( $xml );
$twig->print; 
```

请记住，在处理程序中，您将当前元素获取为`$_`：

```
sub add_rows {
    XML::Twig::Elt->new( row => {
        name  => 'PATH',
        desc  => 'Path',
        value => '#PATH#'
        } )->paste( last_child => $_ );

    XML::Twig::Elt->new( row => {
        name  => 'EXT',
        desc  => 'Adresse',
        value => '#GAIAIP#'
        } )->paste( last_child => $_ );
    } 
```

# xcode - 我怎么知道谁调用了 Xcode 中的方法？

> ID：11999577
> 
> 赞同：5
> 
> 时间：2012-08-17T03:59:27.970
> 
> 标签：xcode

Xcode 有办法显示方法的调用者函数吗？我想知道类中方法的所有调用函数。一个解决方案是在项目中找到方法，但有时不同的类有同名的方法 - 这可能会找到我们不想要的方法..

许多其他 IDE 都具有此功能，例如 Visual C++ 2003/2005/2008、Eclipse ...

你能在 XCode 中做到这一点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T08:33:34.313

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T04:31:20.027

是的。在你的方法中设置一个断点，然后当它中断时，有两个点可以看到堆栈。首先是在 Xcode 的“控制台”区域（通常是底部中间），有一个顶栏，它可能不会立即显示为可导航，但它是一个选择样式的 UI 控件，其中包含整个堆栈。选择不同的级别会向您显示该范围的变量等 *，并将*您的编辑器弹出到该确切文件（您可以将鼠标悬停在变量上以查看它们在内存中的实时值）。第二个在左侧区域（您通常浏览文件的地方）。那里有另一个选项卡（除了文件浏览器）正是为了这个目的。底部有一个滑块，用于控制您看到的堆栈中有多少“步骤”；单击一个具有类似的效果。

![Xcode 在断点处显示完整的堆栈访问](../Images/802404df3a1f3388ca46fa2105131e9f.png)

对于简单的重构，例如方法重命名，您可以在右键单击选定的方法名称时使用上下文菜单，Xcode 将替换您项目中所有相同的选择器。但是，这并没有解决您提到的关于具有相同签名的方法的不同类的问题。但是，它确实为您提供了一个非常好的界面，用于在上下文中查看更改并轻松地一次接受或拒绝它们。

然而，可能需要注意的是，更改方法签名通常可能是设计不佳的标志，特别是如果您必须使用在不同类上具有相同签名的方法（它们不是“兄弟”，因此都应该得到重命名）

# django - Git - 在 ec2 上设置远程存储库并进行初始推送

> ID：11999578
> 
> 赞同：0
> 
> 时间：2012-08-17T04:00:04.600
> 
> 标签：django, linux, ubuntu, amazon-ec2, bitnami

我正在按照[本](http://thelucid.com/2008/12/02/git-setting-up-a-remote-repository-and-doing-an-initial-push/)教程在 Amazon EC2 上设置远程存储库。

说到做： git push -u origin master 我得到这些错误：

1.  src refspec master 不匹配任何内容。
2.  未能将一些参考资料推送到 'bitnami@xxxxxxxx.com:project.git'

我正在使用 bitnami djangostack 图像，我相信问题出在此处。我遵循了完全相同的说明，并在使用标准 Amazon Linux 映像时使其正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:54:06.390

这意味着您没有正确配置远程存储库位置。

需要更多信息来解决这个问题。

# php - 将 PHP 中的 Javascript 变量回显到另一个页面

> ID：11999580
> 
> 赞同：0
> 
> 时间：2012-08-17T04:00:13.400
> 
> 标签：php, javascript

我有将 php 变量传递到我网站上另一个页面的代码：

```
echo'<a class="btn btn-danger" style="margin-left:10px;width:120px;float:left;"  href="fullsizemarket.php?imageid=',$imageid,'&action=removed">Remove from Cart</a>'; 
```

我可以通过以下方式检索 php 变量 $imageid：

```
$imageid = htmlentities($_GET['imageid']); 
```

我还想在这段代码中传递一个 javascript 变量的值。该变量在代码的前面部分设置如下：

```
 var rowcount 
```

我不知道如何在传递 $imageid 的相同回显代码中传递 var rowcount。执行此操作的代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:38:07.780

怎么样以下：

```
echo 
"<a class='btn btn-danger' 
    style='margin-left:10px;width:120px;float:left;' 
    href='fullsizemarket.php?imageid=$imageid&action=removed&rowcount='
    onclick = \" this.setAttribute('href', this.getAttribute('href')+rowcount) \"
 >Remove from Cart</a>"; 
```

# java - 如何在文件路径中使用字符串或字符串的子字符串

> ID：11999581
> 
> 赞同：0
> 
> 时间：2012-08-17T04:00:23.183
> 
> 标签：java, file

我正在编写一个程序来从 xml 文件中获取存储的过程。我让程序在一个文件上运行。但我需要在多个文件上运行它。问题是我在一个大目录中找到了正确的 xml 文件。

例如，路径可以是

C:\DevStore\com\dev\Store\sql\store.xml

或者

C:\Store\com\dev\DevStore\sql\store.xml

很快....

因此，对于上面的示例，我可以在三个可能的地方拥有 DevStore 或存储。

如何让文件路径在这三个地方使用 DevStore 或 DevStore 的任何子字符串？

如果问题不清楚，我很抱歉，我不知道如何措辞。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T04:09:06.490

不，你不能在`File`路径中使用通配符，但是这个“轮子”已经被发明了......

使用[Apache commons-io library](http://commons.apache.org/io/)的[`FileUtils.listFiles()`](http://commons.apache.org/io/apidocs/org/apache/commons/io/FileUtils.html#listFiles%28java.io.File,%20java.lang.String%5B%5D,%20boolean%29)方法，它将递归地从目录中获取所有匹配的文件，在这种情况下`C:\`（即`new File("/")`.

你必须做一些过滤，运行它会说明为什么你不应该将项目直接存储在你的根驱动器下 - 总是把它们放在`C:\Projects`或类似的地方，然后你就不必在寻找时扫描大量的 windows 文件某些项目文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T04:11:22.743

这是一些可以开始工作的代码。

```
import java.io.*;

public class Foo {

    public static void traverseAndProcess( File startDir ) {
        for ( File f : startDir.listFiles() ) {
            // this file is a directory?
            if ( f.isDirectory() ) {
                // yes, it is, so we need to go inside this directory
                // calling the method again
                traverseAndProcess( f );
            } else {
                // no, it is not a directory
                // verifies if the file name finishes with ".xml"
                if ( f.getName().lastIndexOf( ".xml" ) != -1 ) {
                    // it is a xml (just verifying the extension)
                    // so, process this file!
                    process( f );
                }
            }
        }
    }

    private static void process( File f ) {
        // here you will process the xml
        System.out.println( "Processing " + f + " file..." );
    }

    public static void main( String[] args ) {
        // processing the current directory... change it
        traverseAndProcess( new File( "./" ) );
    }

} 
```

我的类设计不是最好的，但正如我所说，你可以从上面的代码开始。

# hadoop - 为什么现实世界的 MapReduce 作业往往具有非常小的数据集大小？

> ID：11999587
> 
> 赞同：0
> 
> 时间：2012-08-17T04:01:35.620
> 
> 标签：hadoop, mapreduce

我读过的所有论文都表明，现实世界的 mapreduce 作业倾向于在相对较小的数据集大小上运行（主要是 map，绝大多数作业倾向于在 KB-16GB 上运行）。如果在生产领域工作的任何人都可以谈论较小的数据集如何以及为什么会出现这种情况，我会理解得更好。对于小型数据集（<128MB），文件是否倾向于碎片化或连续，因为它对拆分和生成的地图任务数量有一定影响？如果 hadoop 让 mapreduce 只对文件的一部分进行操作？

任何指针都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T07:02:49.827

通常使用小数据来快速检查逻辑/代码是否足够好。评估必须一次又一次地进行，直到获得一个好的解决方案。

我在生产中工作，我们使用小数据进行单元测试（MB 的顺序），我们有大小为 10-30 gig 的样本数据集，用于在开发端进行集成测试。但考虑到产品服务器上处理的实际数据（以 TB 为单位），这太小了。与 prod 环境相比，开发环境的容量较低，因此我们不能指望 TB 级的数据在其上平稳运行……而且由于每次发布都必须执行它，因此它非常耗时。

转向技术论文：作者想要真实数据：也倾向于他们试图解决的特定用例。很难获得专注于他们的问题的大量数据集（10-100 gigs）。我见过很少有论文使用大量数据集，但那些属于大公司的研究人员可以轻松获取这些数据。

# mysql - 我怎么知道查询 MYSQL 表中的项目需要多少时间？

> ID：11999591
> 
> 赞同：0
> 
> 时间：2012-08-17T04:02:07.540
> 
> 标签：mysql, performance

我们的网站有一个问题：一个页面的访问时间太长。我们发现它在那个页面中有一个*n 矩阵；并且对于矩阵中的每个项目，它从 MYSQL 数据库中查询三个表。该矩阵中的每个项目都以同样的方式进行查询。

所以我想知道也许是大量的 MYSQL 查询导致了这个问题。我想尝试修复它。这是我在下面列出的困惑之一：

1.

```
m = store.execute('SELECT X FROM TABLE1 WHERE I=1')
result = store.execute('SELECT Y FROM TABLE2 WHERE X in m') 
```

2.

```
r = store.execute('SELECT X, Y FROM TABLE2');
result = []
for each in r:
    i = store.execute('SELECT I FROM TABLE1 WHERE X=%s', each[0])
    if i[0][0]=1:
        result.append(each) 
```

它在 TABLE1 中有大约 200 个项目，在 TABLE2 中有超过 400 个项目。我不知道女巫部分花费的时间最多，所以我无法更好地决定如何编写我的 sql 语句。

我怎么知道在 MYSQL 中做一些操作需要多少时间？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:29:16.730

而不是安装一堆特殊的工具，你可以采取这样一种非常简单的方法（请原谅我的 Ruby）：

```
start = Time.new
# DB query here
puts "Query XYZ took #{Time.now - start} sec" 
```

希望你能把它翻译成 Python。或者......再次原谅我的Ruby......

```
QUERY_TIMES = {}
def query(sql)
  start = Time.new
  connection.execute(sql)
  elapsed = Time.new - start
  QUERY_TIMES[sql] ||= []
  QUERY_TIMES[sql] << elapsed
end 
```

然后通过此自定义方法运行所有查询。进行测试运行后，您可以让它打印出每个查询运行的次数，以及平均/总执行时间。

对于未来，计划花一些时间学习“分析器”（如果你还没有的话）。为您选择的平台买一个好的，花一点时间学习如何使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T04:18:15.507

我使用 MySQL Workbench 进行 SQL 开发。它提供响应时间，并且可以远程连接到授予您权限的 MySQL 服务器（在这种情况下，这将为您提供更准确的读数）。

[http://www.mysql.com/products/workbench/](http://www.mysql.com/products/workbench/)

此外，正如您所意识到的，您似乎在 for 循环中有一条 SQL 语句。这可能会极大地影响性能。您需要采用不同的方式来检索该数据。

# java - PDFBox / Java：打印到纸上：java.lang.NoClassDefFoundError：org/apache/commons/logging/LogFactory

> ID：11999593
> 
> 赞同：2
> 
> 时间：2012-08-17T04:02:24.150
> 
> 标签：java, pdfbox

我有一种方法可以创建 PDF 并将其保存在用户的 Documents 文件夹（当然是 Windows）中，文件名为“temp.pdf”。该方法的最后一行调用了另一个方法，该方法旨在将 pdf 文件打印到纸上。不幸的是，我收到以下错误：

> 线程“AWT-EventQueue-0”中的异常 java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory

我正在使用 PDFBox 进行打印。代码并没有太多涉及，但我无法弄清楚我做错了什么。一切都编译得很好。这是一个运行时错误。谁能看到我的错误？谢谢。

```
public static void printToPaper(String fPath) throws Exception {
        System.out.println("1");  //outputs correctly
        PDDocument document = new PDDocument();   //error occurs right here
        System.out.println("2");  //never appears in output queue
        document = PDDocument.load(fPath);  
        PrinterJob printJob = PrinterJob.getPrinterJob();
        PrintService[] printService = PrinterJob.lookupPrintServices();
        printJob.setPrintService(printService[0]);
        document.silentPrint( printJob );
        document.close();
    } 
```

这是完整的错误日志：

> org.apache.pdfbox.cos.COSDocument.(COSDocument.java:49) at org.apache.pdfbox 的线程“AWT-EventQueue-0”java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory 中的异常。 pdmodel.PDDocument.(PDDocument.java:125) 在kidmath.PrintPDF.printToPaper(PrintPDF.java:12) 在kidmath.Print.printPaper(Print.java:83) 在kidmath.JDlgPrintSettings.btnPrintMouseClicked(JDlgPrintSettings.java:271)在kidmath.JDlgPrintSettings.access$600(JDlgPrintSettings.java:10) 在kidmath.JDlgPrintSettings$7.mouseClicked(JDlgPrintSettings.java:170) 在java.awt.AWTEventMulticaster.mouseClicked(AWTEventMulticaster.java:270) 在java.awt.Component。 java.awt.Component 的 javax.swing.JComponent.processMouseEvent(JComponent.java:3321) 的 processMouseEvent(Component.java:6508)。processEvent(Component.java:6270) at java.awt.Container.processEvent(Container.java:2229) at java.awt.Component.dispatchEventImpl(Component.java:4861) at java.awt.Container.dispatchEventImpl(Container.java :2287) 在 java.awt.Component.dispatchEvent(Component.java:4687) 在 java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832) 在 java.awt.LightweightDispatcher.processMouseEvent(Container.java:4501) 在 java .awt.LightweightDispatcher.dispatchEvent(Container.java:4422) 在 java.awt.Container.dispatchEventImpl(Container.java:2273) 在 java.awt.Window.dispatchEventImpl(Window.java:2719) 在 java.awt.Component。 dispatchEvent(Component.java:4687) at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:703) at java.awt.EventQueue.access$000(EventQueue.java:102) 在 java.awt.EventQueue$3.run(EventQueue.java:662) 在 java.awt.EventQueue$3.run(EventQueue.java:660) 在 java.security.AccessController.doPrivileged(Native Method) 在 java.security .ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87) at java.awt.EventQueue$4.run(EventQueue.java:676) at java.awt.EventQueue $4.run(EventQueue.java:674) 在 java.security.ProtectionDomain 的 java.security.AccessController.doPrivileged(Native Method) $1.doIntersectionPrivilege(ProtectionDomain.java:76) 在 java.awt.EventQueue.dispatchEvent(EventQueue.java :673) 在 java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244) 在 java.awt.EventDispatchThread。pumpEventsForFilter(EventDispatchThread.java:163) at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java :139) 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 引起：java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory at java.net.URLClassLoader$1.run(URLClassLoader.java: 366) 在 java.net.URLClassLoader.findClass(URLClassLoader.java:354) 在 java.lang 的 java.security.AccessController.doPrivileged(Native Method) 的 java.net.URLClassLoader$1.run(URLClassLoader.java:355)。在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java: 的 ClassLoader.loadClass(ClassLoader.java:423)308) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:356) ... 39 更多

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T05:27:52.460

将公共日志记录到您的类路径中，这应该可以解决它。下载链接在这里[http://commons.apache.org/logging/](http://commons.apache.org/logging/)

并且您所指的类是 [http://commons.apache.org/logging/commons-logging-1.0.3/docs/api/org/apache/commons/logging/LogFactory.html](http://commons.apache.org/logging/commons-logging-1.0.3/docs/api/org/apache/commons/logging/LogFactory.html)可能是在内部被引用来自 PDFBox API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T04:30:13.763

`PDDocument`在加载文件路径之前先尝试初始化类。

```
PDDocument document = new PDDocument();
document = PDDocument.load(fPath); 
```

那应该解决它。

# cakephp - CakePHP 2.0 AclExtras 在 shell 中打印 HTML 代码

> ID：11999594
> 
> 赞同：0
> 
> 时间：2012-08-17T04:02:28.533
> 
> 标签：cakephp, cakephp-2.0, acl

我正在尝试根据 2.0 书中的教程设置 ACL，但是当我运行时我得到了 HTML 脚本

```
./Console/cake AclExtras.AclExtras aco_sync 
```

在这里发帖真的很长。在我的 bootstrap.php 文件中，我有

```
CakePlugin::load('AclExtras'); 
```

在我的 AppController 我有

```
App::uses('Controller', 'Controller'); 
```

我也尝试在不输入插件的情况下查看会发生什么，以及当我执行以下操作时：

```
$this->Acl->allow($group, 'controllers'); 
```

我收到此错误：

```
Warning (512): DbAcl::allow() - Invalid node [CORE\Cake\Model\Permission.php, line 176] 
```

关于如何使这项工作的任何建议？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:41:32.420

1.  确保您的 ACO 表填充了至少一个条目“控制器”，没有 parent_id。
2.  确保 allow 的第一个参数是一个有效参数，在您的情况下，`$group`应该是一个 Group 对象，并使用正确的组 ID 设置。例如

    ```
    $group = $this->User->Group;
    $group->id = 1; 
    ```

（如果你只设置`$group`为一个整数，你肯定会得到你得到的错误，所以一定要检查这个！）

1.  确保第二个参数是有效参数（例如有效别名）。

# iphone - 如何在没有数据库的情况下将数据保存到数组中

> ID：11999595
> 
> 赞同：-3
> 
> 时间：2012-08-17T04:02:42.433
> 
> 标签：iphone, ios, uitableview, uibutton

如何将新添加的值保存到 NSMuttable 数组中，我想通过单击按钮重置新添加的项数组？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:15:57.207

通过执行以下操作添加它

```
array = [nsmutablearray arraywithcontentsoffile:path];
nsstring *item= @"string";
        [array addObject:item];
        [array writeToFile:path atomically:YES]; 
```

以不同的方法将其删除：

```
 [array removeObjectAtIndex:1]; 
```

或者

```
[[NSFileManager defaultManager]removeItemAtPath:Path error:nil]; 
```

# node.js - node.js 可以做并行计算吗

> ID：11999603
> 
> 赞同：2
> 
> 时间：2012-08-17T04:03:47.443
> 
> 标签：node.js

我知道 node.js 可以做并行 IO，但它可以自己做，也可以通过多核处理器的插件并行计算来做。就像我想做大矩阵乘法一样。

我在 stackflow 上遇到了较早的问题，该节点正在开发这样的功能。任何人都知道它有多远。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T04:04:42.613

官方集群模块是您正在寻找的：
[http ://nodejs.org/api/all.html#all_cluster](http://nodejs.org/api/all.html#all_cluster)

# javascript - 上一个和下一个 div 始终为空

> ID：11999605
> 
> 赞同：1
> 
> 时间：2012-08-17T04:04:10.347
> 
> 标签：javascript, jquery, slider

我有这个 HTML 结构：

```
<body>
<div id="content" class="clearfix">
    <!-- Page 1 -->
    <div>
        <div class="description"><h2>Apolonija, zubarska ordinacija</h2><p>Nesto u vezi Apolonija zubarske ordinacije ce biti detaljno ispisano na ovom mjestu razlicito za svaki tab. Takodje moguce je dodati sliku kao sto je na slici dizajna.</p></div>
        <img src="content/images/ordinacija1.jpg" />
    </div>

    <!-- Page 2 -->
    <div>
        <div class="description"><h2>Apolonija, zubarska ordinacija</h2><p>Nesto u vezi Apolonija zubarske ordinacije ce biti detaljno ispisano na ovom mjestu razlicito za svaki tab. Takodje moguce je dodati sliku kao sto je na slici dizajna.</p></div>
        <img src="content/images/ordinacija2.jpg" />
    </div>

    <!-- Page 3 -->
    <div>
        <div class="description"><h2>Apolonija, zubarska ordinacija</h2><p>Nesto u vezi Apolonija zubarske ordinacije ce biti detaljno ispisano na ovom mjestu razlicito za svaki tab. Takodje moguce je dodati sliku kao sto je na slici dizajna.</p></div>
        <img src="content/images/ordinacija3.jpg" />
    </div>

    <!-- Page 4 -->
    <div>
        <div class="description"><h2>Apolonija, zubarska ordinacija</h2><p>Nesto u vezi Apolonija zubarske ordinacije ce biti detaljno ispisano na ovom mjestu razlicito za svaki tab. Takodje moguce je dodati sliku kao sto je na slici dizajna.</p></div>
        <img src="content/images/ordinacija4.jpg" />
    </div>
</div>
<div id="navigation" class="clarfix">
    <div id="accordion">
        <!-- 1st header and pane -->
        <img src="horisontalTabsAccordion/images/button1.jpg" />
        <div style="width: 250px; display:block"><h3>Apolonija, zubarska ordinacija</h3><p>Nesto pise malo vise malo manje :)</p></div>

        <!-- 2nd header and pane -->
        <img src="horisontalTabsAccordion/images/button2.jpg" />
        <div><h3>Apolonija, zubarska ordinacija</h3><p>Nesto pise malo vise malo manje :)</p></div>

        <!-- 3rd header and pane -->
        <img src="horisontalTabsAccordion/images/button3.jpg" />
        <div><h3>Apolonija, zubarska ordinacija</h3><p>Nesto pise malo vise malo manje :)</p></div>

        <!-- 4th header and pane -->
        <img src="horisontalTabsAccordion/images/button4.jpg" />
        <div><h3>Apolonija, zubarska ordinacija</h3><p>Nesto pise malo vise malo manje :)</p></div>
    </div>
    <div id="buttons">
        <a href="#" class="btn-prev"><div class="previous-icon"></div></a>
        <a href="#" class="btn-next"><div class="next-icon"></div></a>
    </div>
</div>

<script type="text/javascript">
    $("#accordion").tabs("#accordion div", {
      tabs: 'img',
      effect: 'horizontal'
    });
</script> 
```

我使用这个 JavaScript 的： **buttons.js：**

```
var currentTab = null;
var choosenTab = null;

function bindTabs() {
// Set current tab variable when image is clicked
$('#accordion img').each(function() {
    $(this).bind('click', function() {
        currentTab = $(this);
    });
    });
}

function bindNext() {
$('.btn-next').bind('click', function(){ 
     choosenTab = currentTab.nextUntil('img').next();

     if (choosenTab.length != 0) { // Next image tag found
         choosenTab.get(0).click();
         currentTab = choosenTab;
     }
     return false;
});
}

function bindPrevious() {
$('.btn-prev').bind('click', function(){
    choosenTab = currentTab.prevUntil('img').prev();

    if (choosenTab.length != 0) { // Previous image tag found
        choosenTab.get(0).click();
        currentTab = choosenTab;
    }

    return false;
});
}

$(document).ready(function(e) {
currentTab = $('#accordion').find('img.current');

bindTabs();
bindPrevious();
bindNext();
}); 
```

和**pager.js：**

```
var currentPageIndex = 0;
var currentPage = null;
var choosenPage = null;

function setCurrentPage() {
currentPage = $('#content > div:first-child');
}

function setInitialCurrentPage() {
$('#content > div:first-child').addClass("currentPage");
setCurrentPage();
choosenPage = currentPage;
}

function addRemoveCurrentPageClass() {
choosenPage.addClass('currentPage');
currentPage.removeClass('currentPage');
}

function preparePrevButton() {
$('.btn-prev').bind('click', function() {
    setCurrentPage();
    choosenPage = currentPage.prevUntil('div').prev();
    console.log(choosenPage); // Always is null

    if (choosenPage.length != 0) {
        addRemoveCurrentPageClass();
        currentPage = choosenPage;
    }
    return false;
});
}

function prepareNextButton() {
$('.btn-next').bind('click', function() {
    setCurrentPage();
    choosenPage = currentPage.nextUntil('div').next();
    console.log(choosenPage); // Always is null

    if (choosenPage.length != 0) {
        addRemoveCurrentPageClass();
        currentPage = choosenPage;
    }
    return false;
});
}

function prepareNavButtons() {
preparePrevButton();
prepareNextButton();
}

function prepareAcordionTabs() {

}

$(document).ready(function(e) {
    setInitialCurrentPage();
prepareNavButtons();
prepareAcordionTabs();
}); 
```

当我想查找当前 div 的下一个或上一个 div 时，就会出现问题。当前 div 是具有“currentPage”类的 div。

如果有人想拥有所有源代码，可以使用 Mercurial 并从 Google 代码中提取数据。谷歌代码项目网站是：[https ://code.google.com/p/apolonia-slide-pager/](https://code.google.com/p/apolonia-slide-pager/)

# c++ - 错误 luaL_doString “'/' 附近出现意外符号”

> ID：11999606
> 
> 赞同：0
> 
> 时间：2012-08-17T04:04:11.623
> 
> 标签：c++, lua

当我的代码大约是：

```
 const char* file = "/app_home/data/minigames/mg_hint_machine_2.lua";
        PRINTF("File : %s\n", file);
        luaL_dostring(LS, file);
PRINTF("RET(File) : %s\n", lua_tostring(LS,-1)); 
```

输出是：

**文件：/app_home/data/minigames/mg_hint_machine_2.lua**

**RET（文件）：[字符串“/app_home/data/minigames/mg_hint_machine_2.lua”]：1：'/'附近的意外符号**

我很确定我的道路。另外我不知道是什么符号出乎意料或

我想念一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T04:09:52.910

你想要`luaL_dofile`而不是`luaL_dostring`.

`luaL_dostring`- 尝试将字符串作为 lua 代码执行。

`luaL_dofile`- 尝试将字符串指向的文件作为 lua 代码执行。

# c# - NAudio流式语音聊天c#

> ID：11999615
> 
> 赞同：0
> 
> 时间：2012-08-17T04:05:05.673
> 
> 标签：c#, streaming, chat, voice, naudio

我是语音流的初学者
我尝试构建一个**语音聊天应用程序**我得出结论：

*   我应该在套接字中使用 UPD 作为 ProtocolType
*   我应该使用 NAudio 流媒体

发送机制（伪代码）：

```
 private void but_Click(object sender, EventArgs e)
    {
        if (sourceList.SelectedItems.Count == 0) return;
        int deviceNumber = sourceList.SelectedItems[0].Index;

        NAudio.Wave.WaveIn sourceStream = new NAudio.Wave.WaveIn();
        sourceStream.DeviceNumber = deviceNumber;
        sourceStream.WaveFormat = new NAudio.Wave.WaveFormat(44100, NAudio.Wave.WaveIn.GetCapabilities(deviceNumber).Channels);

        sourceStream.DataAvailable += new EventHandler<NAudio.Wave.WaveInEventArgs>(sourceStream_DataAvailable);
        sourceStream.StartRecording();
    }

    private void sourceStream_DataAvailable(object sender, NAudio.Wave.WaveInEventArgs e)
    {
        if (sourceStream== null) return;

        send_UPD(e.Buffer, e.BytesRecorded);//sending data UPD
    } 
```

我认为发送将成功，接收者将恢复字节数组

发送机制（伪代码）：

```
 NAudio.Wave.DirectSoundOut waveOut = new NAudio.Wave.DirectSoundOut();
        NAudio.Wave.WaveInProvider waveIn = new NAudio.Wave.WaveInProvider(/*my recived array of byte*/);
        waveOut.Init(waveIn);
        waveOut.Play(); 
```

**我的问题**
是上述是否属实，我可以用接收器中的字节数组做什么（我怎么玩它）？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:55:54.230

接收器应该使用 a `BufferedWaveProvider`，它允许您在音频数据到达时排队播放。

# javascript - 根据浏览器位置将输入的日期转换为 JavaScript 中的 UTC

> ID：11999616
> 
> 赞同：1
> 
> 时间：2012-08-17T04:05:16.117
> 
> 标签：javascript, utc, datetime-format

我的应用程序将在墨西哥和澳大利亚运行。

当用户选择日期时，我将其格式化为；“2012 年 8 月 17 日星期五”

现在，如何将该字符串值转换为 UTC 日期？

到目前为止，我有这个；

```
var enteredDate = $('.CreateDateRange').val() + " 07:00:00";
var thisDate = new Date(enteredDate);
var utcDate = new Date(thisDate.getUTCFullYear(), thisDate.getUTCMonth(), thisDate.getUTCDay(), thisDate.getUTCHours(), 0, 0); 
```

但在上述日期，返回日期是；2012 7 4 21:0:0 这是不正确的。

来自澳大利亚，我预计 UTC 日期将类似于“2012 8 17”或“2012 8 16”，具体取决于一天中的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:19:54.277

在 Date 对象中查找 UTC 特定方法

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

[getUTCDate](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getUTCDate)， [getUTCDay](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getUTCDay)， [getUTCFullYear](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getUTCFullYear)， [getUTCHours](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getUTCHours)， [getUTCMilliseconds](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getUTCMilliseconds)， [getUTCMinutes](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getUTCMinutes)， [getUTCMonth](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getUTCMonth)， [getUTCSeconds](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getUTCSeconds)， [toUTCString](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toUTCString)

编辑：

toUTCString 会给你你所需要的

```
var enteredDate = $('.CreateDateRange').val() + " 07:00:00";
var thisDate = new Date(enteredDate);
console.log(thisDate.toUTCString()); 
```

# javascript - XSS 406 Not Acceptable 试图获取多页信息

> ID：11999619
> 
> 赞同：1
> 
> 时间：2012-08-17T04:05:25.240
> 
> 标签：javascript, google-chrome-extension, xss, http-status-code-406

我的学校目前有一个网站，上面有我们的课程。我一直在尝试通过请求其他页面上的其他信息并通过 chrome 扩展将它们放在侧栏上来改进它在主页上显示的一些信息。尝试查看此信息时，我必须登录，它是 HTTPS。但是我可以从另一个页面中提取成绩。但是当我尝试提取作业时，它最终会发回**GET 406 Not Acceptable Error**。

```
function removeElements(){
    $("aside#right-side").children('div').remove();
    $("aside#right-side").children('h2').remove();
    $("aside#right-side").children('ul').remove();
}

function addDivs(){
    $("aside#right-side").prepend('<div class="events_list"><h2>Upcoming Assignments</h2><div class="assignment-summary-div"></div></div>');
    $("aside#right-side").prepend('<div class="events_list"><h2>Grade Summary</h2><div class="grade-summary-div"></div></div>');
}
function getInfo(){
    $(".grade-summary-div").load("grades .course_details");
    $(".assignment-summary-div").load("assignments .assignment_list");
} 
```

现在根据我的理解，如果我已经登录，我不需要进行身份验证或使用 api。我可能错了，但这就是我在这里的原因。为什么我会收到 406 错误？

# ruby-on-rails - 当 id 是字符串时，Backbone toJson 不返回属性

> ID：11999621
> 
> 赞同：0
> 
> 时间：2012-08-17T04:06:22.287
> 
> 标签：ruby-on-rails, backbone.js

我正在运行一些 rails 代码来生成 json 供骨干网使用。当我将 id 视为字符串并在主干中使用它时，toJSON() 函数不会返回属性。当我在 id 上调用 to_i 时， toJSON() 可以正常工作。（但这会破坏我的应用程序，因为“012345”与 12345 不同。

我的骨干观点：

```
 serialize: ->
      console.log @model.toJSON()
      info: @model.toJSON().info 
```

非工作 json 响应：

```
{"id":"123456","info":[{"label":"Hire Date","text":"06-NOV-00"},{"label":"User ID","text":"YADDA"},{"label":"Employee Number","text":"123456"}] } 
```

非工作 toJSON 结果：

```
data_partition: DataPartition
id: "123456"
__proto__: Object 
```

工作的json：

```
{"id":123456,"info":[{"label":"Hire Date","text":"06-NOV-00"},{"label":"User ID","text":"YADDA"},{"label":"Employee Number","text":123456}] } 
```

工作到JSON（）：

```
data_partition: DataPartition
id: 123456
info: Array[3]
__proto__: Object 
```

但是，当我切断前导 0 时，这会破坏我的 Rails 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:02:03.410

运行此代码我没有发现任何问题：

```
var responseJSON_1 = {"id":"123456","info":[{"label":"Hire Date","text":"06-NOV-00"},{"label":"User ID","text":"YADDA"},{"label":"Employee Number","text":"123456"}] };
var responseJSON_2 = {"id":123456,"info":[{"label":"Hire Date","text":"06-NOV-00"},{"label":"User ID","text":"YADDA"},{"label":"Employee Number","text":"123456"}] };

var MyModel = Backbone.Model.extend({});
var myModel_1 = new MyModel( responseJSON_1 );
var myModel_2 = new MyModel( responseJSON_2 );

console.log( myModel_1.toJSON() );
console.log( myModel_2.toJSON() );​ 
```

检查[工作的 jsFiddle](http://jsfiddle.net/fguillen/WDWUm/)

你确定你在回复中没有改变比`id`格式更多的东西吗？

# java - for循环的范围

> ID：11999624
> 
> 赞同：0
> 
> 时间：2012-08-17T04:06:31.710
> 
> 标签：java, for-loop

据我所知，for 循环的范围，后面没有一组括号，只是一个语句。对？那么这段代码是怎么来的：

```
 for(int x = 0; x < 3; x++)
        if(x < 2) 
            System.out.println("hello");
            System.out.println("world"); 
```

给出输出：

```
hello
hello
world 
```

中的语句`if`是否也被视为 for 循环的一部分？当然是，我的问题是为什么？实际上，范围是 for 语句之后的一个块，因为上面的代码在修改时是这样的：

```
 for(int x = 0; x < 3; x++)
        if(x < 2) { 
            System.out.println("hello");
            System.out.println("world");
        } 
```

给出输出：

```
hello
world
hello
world 
```

编辑：下面的大多数答案都是关于解释上述代码中的流控制，我已经知道了。我的问题是关于 for 循环范围的规则。

规则是否实际上是：*无括号循环的范围是紧随其后`for`的下一个语句块？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T04:08:24.487

```
First x=0
 Then if (x < 2) condition satisfies (again no braces, so only one statement executes)
   Prints "hello"
for loop continues
x=1
 Then if (x < 2) condition satisfies (again no braces, so only one statement executes)
   Prints "hello"
  for loop continues
x=2
 Then if (x < 2) condition NOT satisfies, so if statement won' execute, moves to print "world"
   Prints "world" 
```

第一个片段将被视为：

```
for(int x = 0; x < 3; x++){
        if(x < 2) {
            System.out.println("hello");
        }
}
            System.out.println("world"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T04:12:53.203

如果认为有害，您应该阅读[Braceless](http://cafe.elharo.com/blogroll/braceless-if-considered-harmful/)。这篇文章是专门因为这样的例子而写的；无大括号的控制流语句可能会让您摸不着头脑，尤其是带有误导性缩进的混淆（例如在您的示例中）。

您粘贴的代码相当于以下内容，

```
for (int x = 0; x < 3; x++) {
  if (x < 2) {
    System.out.println("hello");
  }
}
/* outside of the for */
System.out.println("world"); 
```

如您所见，循环迭代了 3 次；前两个，它将打印`"hello"`. 循环完成后，它将打印`"world"`.

* * *

[阅读Java 语言规范的第 14 章](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html)可以清楚地看到这样做的原因。事实上，根据[§14.5将](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.5)*块*视为语句是有意义的。

> ```
> for (int x = 0; x < 3; x++)
>    if (x < 2) 
>       System.out.println("hello");
>       System.out.println("world"); 
> ```

查看[`if`(§14.9)](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.9)和[**basic** `for` (§14.14.1)](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.1)的描述，我们看到两者都只是一个陈述；在这种情况下，我们可以看到我们的`for`语句包含`if`语句，它本身封装了您的`println("hello")`语句。在`for`声明之后，你就有了你的`println("world")`声明。

> ```
> for (int x = 0; x < 3; x++)
>     if (x < 2) { 
>       System.out.println("hello");
>       System.out.println("world");
>     } 
> ```

Here, we see the `for` statement body is the `if` statement, which encapsulates a *block* that contains **2** statements, namely both your `println` statements. Note that this is indeed not the same as the former.

Hopefully this clears things up for you.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T04:08:32.847

循环后的一行，条件被考虑在循环体中，条件你没有使用`{}`所以唯一`if`的考虑在 for 体中

```
 for(int x = 0; x < 3; x++)
        if(x < 2) 
            System.out.println("hello");
            System.out.println("world"); 
```

给出输出`hello hello world`，因为

当循环结束`world`打印时，在 for 循环中考虑 if 语句之后的唯一 1 行

就像是

```
for(int x = 0; x < 3; x++)
      {  if(x < 2) 
            System.out.println("hello");
       }
     System.out.println("world"); 
```

并且在

```
 for(int x = 0; x < 3; x++)
        if(x < 2) { 
            System.out.println("hello");
            System.out.println("world");
        } 
```

两者都 `System.out.println("hello"); System.out.println("world");`在 for 循环中考虑

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T04:08:44.643

看到这样...

`for`并**控制包含在 . 中的下一条语句**`if`或下**一个块**。****`{...}`****

 **如果`{}`缺少，则仅将下一条语句视为正文。

在第一种情况下，我已经更正了缩进，以便身体部位清晰可见。

```
for(int x = 0; x < 3; x++)  
    if(x < 2)   
        System.out.println("hello");
System.out.println("world"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T04:09:53.283

如果您不只`{}`在循环或条件语句之后放置下一行，则将其视为其范围的一部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T04:10:00.113

它在做正确的事。它为 i = 0 和 1 打印“hello”，然后 for 循环结束并打印“world”。

我认为您对对齐感到困惑，以下是第一个的外观 -

```
for(int x = 0; x < 3; x++) {
    if(x < 2) {
        System.out.println("hello");
    }
}
System.out.println("world"); 
```

而第二个——

```
for(int x = 0; x < 3; x++) {
    if(x < 2) { 
        System.out.println("hello");
        System.out.println("world");
    }
} 
```

更具可读性和易于理解的逻辑。**

# android - 滚动视图在框架布局后面滚动

> ID：11999625
> 
> 赞同：0
> 
> 时间：2012-08-17T04:06:46.953
> 
> 标签：android, android-layout

我正在与滚动视图和框架布局进行一些战斗。尽管无论我做什么都尝试了很多事情，但滚动视图似乎填充了父级并将我的一些内容粘贴在框架布局后面。我想要的是底部的框架布局和填充顶部的滚动视图。谁能指出我在这里犯的愚蠢错误？我尝试了这里建议的[Layout issue on Android with FrameLayout 和 ScrollView](https://stackoverflow.com/questions/8693648/layout-issue-on-android-with-framelayout-and-scrollview)但没有这样做。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/quizresultlayout"
style="@style/Activity"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ScrollView
    android:id="@+id/resultscroll"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/frameLayout1"
    android:fillViewport="true" >

    <LinearLayout
        android:id="@+id/sublayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <TextView
            android:id="@+id/tvResultMsg"
            style="tvtemplatemedium"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:tag="@string/quizresults_CongratsMsg"
            android:text="@string/quizresults_CongratsMsg" />

        <TableLayout
            android:id="@+id/resultable"
            android:layout_width="wrap_content"
            android:layout_height="match_parent" >
        </TableLayout>
    </LinearLayout>
</ScrollView>

<FrameLayout
    style="@style/bottomframe"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="92dp" >

        <ImageButton
            android:id="@+id/btnstartquiz"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:src="@drawable/play" />

        <ImageButton
            android:id="@+id/btnRptCard"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:src="@drawable/chart" />

        <ImageButton
            android:id="@+id/btnTrunk"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:src="@drawable/play" />
    </RelativeLayout>
</FrameLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T04:20:46.820

做这个：

将根 RelativeLayout 更改为 LinearLayout。

设置 ScrollView android:layout_height="0dp"

添加到 ScrollView android:layout_weight="1" <-- 这将使您的滚动视图填充剩余空间并将框架布局推到底部。

# ant - 由于“无法删除文件 xxx.jarSAVE”，ant 构建失败

> ID：11999627
> 
> 赞同：0
> 
> 时间：2012-08-17T04:07:25.900
> 
> 标签：ant, build, whitespace, manifest.mf

当我在做 ant build 时，每次构建都因无法删除文件 xxxx.jarSAVE 而失败。但是该文件不在该文件夹中。我在这里附加构建跟踪。任何人都可以帮助我。

```
BUILD FAILED
D:\2.4_BV_BuildArea\aiRES-Comp\Build.xml:162: The following error occurred while executing this line:
D:\2.4_BV_BuildArea\aiRES-Comp\Java\Build.xml:225: The following error occurred while executing this line:
D:\2.4_BV_BuildArea\aiRES-Comp\Java\src\com\ibsplc\iRes\tax\build.xml:127: Unable to delete file D:\2.4_BV_BuildArea\aiRES-Comp\Java\src\com\ibsplc\iRes\tax\dist\iRes_Tax_ejb.jarSAVE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:34:27.193

ANT 认为它应该删除的文件的名称是`iRes_Tax_ejbSAVE`. 但是真正存在并且 ANT 应该删除的文件的实际名称是`iRes_Tax_ejb.jar`

这意味着它是一个空间问题。在某些配置或属性文件中，有一个空格，`iRes_Tax_ejb.jar`并且`SAVE`没有被拾取。

`<delete>`在你所有的标签中搜索标签，`build.xmls`你就会知道它是从哪个文件中选择`iRes_Tax_ejb.jar`要删除的名称。

也搜索`SAVE`你所有的单词`build.xmls`

然后去修复空间。有时这很棘手，因为当您看到文本文件时，可能会看到空格，但由于编码问题，ANT 无法获取它。所以你必须使用正确的编辑器。

# perl - perl : 使用换行符分割字符串

> ID：11999631
> 
> 赞同：3
> 
> 时间：2012-08-17T04:07:49.540
> 
> 标签：perl, split

我想用换行符分割字符串的单词。

我试过了 ：

```
 $string = 'One Two Three';
 my @array3 = split("\n",$string); 
```

我想要这样的输出：

```
One
Two 
Three 
```

如果不使用 for 循环，这可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T04:11:07.393

您想使用该[`split`](http://p3rl.org/split)功能，拆分`$string`空间区域（`" "`特殊情况）。然后获取生成的列表并[`join`](http://p3rl.org/join)使用换行符`"\n"`。

```
my $string = 'One Two Three';
my $output = join "\n", split " ", $string; 
```

[（在http://ideone.com/Sd0Wp](http://ideone.com/Sd0Wp)查看执行）

在您的代码中，您将字符串拆分为换行符。自然，这只会返回一个值，因为没有换行符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T04:26:05.617

您不需要为此任务使用拆分连接。
只需使用正则表达式将所有空格替换为换行符。

```
$string = 'One Two Three';
$string =~ s/\s/\n/g;
print $string; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T04:11:12.090

试试这个：

```
$string = 'One Two Three';
my @array3 = split (' ', $string);

print join ("\n", @array3); 
```

这将拆分空格上的字符串并在打印时将它们与换行符连接起来。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T04:13:48.437

您的字符串不包含换行符。可能你需要用空格字符分割它。所以试试这个代码：

```
$string = 'One Two Three';
my @array3 = split(/\s+/,$string); 
```

# android - 自动回答：传统智慧似乎不正确

> ID：11999632
> 
> 赞同：1
> 
> 时间：2012-08-17T04:08:06.157
> 
> 标签：android, headset

我一直在研究一种使用“KeyEvent”方法自动接听电话的方法，许多人似乎都信誓旦旦。

此方法适用于模拟器，但*不适*用于实际设备。

我正在使用的代码如下：

```
 Intent buttonDown = new Intent(Intent.ACTION_MEDIA_BUTTON);
  buttonDown.putExtra(Intent.EXTRA_KEY_EVENT, new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_HEADSETHOOK));
  ctx.sendOrderedBroadcast(buttonDown, "android.permission.CALL_PRIVILEGED");

  Intent buttonUp = new Intent(Intent.ACTION_MEDIA_BUTTON);
  buttonUp.putExtra(Intent.EXTRA_KEY_EVENT, new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_HEADSETHOOK));
  ctx.sendOrderedBroadcast(buttonUp, "android.permission.CALL_PRIVILEGED");

  Intent headSetUnPluggedintent = new Intent(Intent.ACTION_HEADSET_PLUG);
  headSetUnPluggedintent.addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY);
  headSetUnPluggedintent.putExtra("state", 1); // 0 = unplugged  1 = Headset with microphone 2 = Headset without microphone
  headSetUnPluggedintent.putExtra("name", "Headset");
  // TODO: Should we require a permission?
  ctx.sendOrderedBroadcast(headSetUnPluggedintent, "android.permission.CALL_PRIVILEGED"); 
```

发生的情况是，在模拟器上，答案“按钮”似乎起作用。不幸的是，在实际的手机上，看起来正在发送的 KeyEvent 被完全忽略了。

有没有人找到在 Android 2.3.* 上执行此操作的可靠方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-09T16:54:15.263

您在耳机按钮事件之后发送假耳机连接事件。尚未连接的耳机如何接听电话？首先连接假耳机，然后发送假按钮按下。这个对我有用。

# php - 使用 mail chimp api 发送电子邮件

> ID：11999633
> 
> 赞同：5
> 
> 时间：2012-08-17T04:08:16.203
> 
> 标签：php, api, mailchimp

我正在尝试使用 mail chimp api 发送电子邮件，但出现以下错误

```
{"aws_type":null,"aws_code":null,"http_code":500,"message":"Invalid Mailchimp API Key: <snip>-us5 . You are accessing the wrong datacenter - your client library may not properly support our datacenter mapping scheme."} 
```

我检查了我的 mailchimp api 密钥及其正确性。如果有人知道，请回复下面是我的代码

```
 $apikey = 'api_key';

$to_emails = array('rohith038@gmail.com');
$to_names = array('You', 'Your Mom');

$message = array(
    'html'=>'Yo, this is the <b>html</b> portion',
    'text'=>'Yo, this is the *text* portion',
    'subject'=>'This is the subject',
    'from_name'=>'Me!',
    'from_email'=>'verifed@example.com',
    'to_email'=>$to_emails,
    'to_name'=>$to_names
);

$tags = array('WelcomeEmail');

$params = array(
    'apikey'=>$apikey,
    'message'=>$message,
    'track_opens'=>true,
    'track_clicks'=>false,
    'tags'=>$tags
);

$url = "http://us1.sts.mailchimp.com/1.0/SendEmail";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url.'?'.http_build_query($params));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$result = curl_exec($ch);
echo $result;
curl_close ($ch);

$data = json_decode($result);
echo "Status = ".$data->status."\n"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T04:11:40.607

在没有做更多研究的情况下，我会尝试更改`$url`为，`http://us5.sts.mailchimp.com/1.0/SendEmail`因为您的 API 密钥以 -us5 结尾，并且它抱怨您访问了错误的数据中心。

# node.js - 如何使用 node-tds 从 uniqueidentifier 字段返回字符串？

> ID：11999643
> 
> 赞同：0
> 
> 时间：2012-08-17T04:09:49.517
> 
> 标签：node.js, sql-server-2008-r2

我正在使用 nodejs + node-tds 连接到 SqlServer 2008r2 express 数据库。我正在检索具有唯一标识符的对象并将整个对象作为 json 返回。

我可以很好地检索该行，但是当我尝试序列化对 json 的响应时，它会变得很时髦：

```
{
  "Id": "�&lt;�E�ԃM��\u0000ؚ��J",
  "RealName": "Zachary Yates"
} 
```

这是我正在使用的代码：

```
var q = conn.createStatement("select u.Id, u.RealName from [User] u where u.Id = @id;", 
{
    id: { type: "uniqueidentifier" }
});
q.on("row", function(row) 
{
    var user = 
    {
          Id: row.getValue("Id").toString()
        , RealName: row.getValue("RealName")
    };
    res.json(user);
});
q.execute({id: uid}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:37:32.980

您可能遇到了一些字符编码不匹配的问题。尝试`id`在 SQL 本身中转换为字符串；这应该强制正确的编码。

# java - isAnonymous() 和 isAuthenticated() 在错误页面上都返回 false

> ID：11999656
> 
> 赞同：4
> 
> 时间：2012-08-17T04:11:19.093
> 
> 标签：java, spring, jsp, spring-security

我有一个错误页面，当返回 404 响应状态时会显示该页面。这个页面是通过模板机制生成的（我使用瓷砖）；在这个模板中，我有一个包含类似内容的标题：

```
 <sec:authorize access="isAnonymous()">
        blabla
    </sec:authorize>
    <sec:authorize access="isAuthenticated()">
        blibli
    </sec:authorize> 
```

因此，根据用户是否通过身份验证，它会显示 blibli 或 blabla。此代码适用于使用此模板的所有页面，但我的 404 页面除外！它什么都不显示！

任何的想法？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T20:27:37.960

我敢打赌，问题在于您如何定义`filter-mapping`. `web.xml`最常见的配置是：

```
<filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
</filter-mapping> 
```

这会将过滤器映射到所有 URL，但仅当它们通过`REQUEST`方法访问时。此过滤器未捕获的所有其他情况（如`INCLUDE`和）。所以要将过滤器绑定到请求，将其定义为`FORWARD``ERROR``ERROR`

```
<filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>REQUEST</dispatcher>

        <!-- apply Spring Security authentication to error-pages -->
        <dispatcher>ERROR</dispatcher>
</filter-mapping> 
```

尝试一下。如果不起作用，则添加`<dispatcher>INCLUDE</dispatcher>`因为 Tiles，可能通过这种方式包含页面。

也可以看看：

*   [过滤器映射调度程序](https://stackoverflow.com/questions/2968621/dispatcher-for-filter-mapping)

*   [指定过滤器映射](http://docs.oracle.com/javaee/5/tutorial/doc/bnagb.html#bnagf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-15T05:18:37.493

对于那些寻找 java 配置的人：

```
private void registerSpringSecurityFilterChain(ServletContext servletContext) {
  FilterRegistration.Dynamic springSecurityFilterChain = servletContext.addFilter(
        BeanIds.SPRING_SECURITY_FILTER_CHAIN, new DelegatingFilterProxy());
  springSecurityFilterChain.addMappingForUrlPatterns(null, false, "/*");
  springSecurityFilterChain.addMappingForUrlPatterns(EnumSet.of(DispatcherType.ERROR), false, "/*");

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T04:28:41.173

如果这个 404 页面不在您的安全 URL 中，那么 isAnonymous() 和 isAuthenticated() 都将返回 false 并且不会呈现任何内容。

# database - 数据库事务是管理操作系统内存的好方法吗？

> ID：11999663
> 
> 赞同：3
> 
> 时间：2012-08-17T04:12:25.287
> 
> 标签：database, memory-management, transactions, operating-system

我正在考虑做一些低级编程，编写一个基本的操作系统。我熟悉关系数据库，所以我想知道复制存储在 web aps（MySql、SQL Server 等）中的方法数据是否是将数据存储在操作系统内存中的好方法。这一切都只适用于操作系统任务等。我所说的“好方法”主要是指速度，但当然优雅和良好的架构也是因素。我假设大多数操作系统都偏爱速度而不是设计模式？我没有使用低级 Linux 的经验，所以我想知道关系数据库是否是编写内存管理器的良好起点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:02:09.463

不。

操作系统中的内存管理是管理内存的整体服务。这包括应用程序的接口、管理裸机内存区域的方式、内存保护控制、虚拟内存映射管理等等。

另一方面，数据库事务是 ACID（原子性、一致性、隔离性、持久性）的概念。它是为需要 ACID 属性的用户提供接口。但是，如果您的操作系统为应用程序提供类似数据库事务的*接口*（如果适用的话），这可能会很有趣。

大多数（如果不是全部）操作系统偏爱速度的原因是所有现有的 CPU 能力都是为了运行*应用程序*。如果有任何应用程序要运行，则没有理由管理硬件或提供服务。但这并不总是正确的。有时，操作系统设计人员更喜欢设计或清晰度，而不是速度，以实现可管理性。因此，一如既往，答案是“视情况而定”。

# objective-c - 当它不是初始视图时如何访问 UITabBarController？

> ID：11999666
> 
> 赞同：0
> 
> 时间：2012-08-17T04:13:10.037
> 
> 标签：objective-c, ios5, storyboard

当不是初始视图时，我在故事板中访问我的 tabbarcontroller 时遇到问题。所以基本上故事板中有一个初始视图，它通向标签栏控制器。我想更改标签的颜色，但我无权访问它！我知道如果它是初始视图，它可以添加到委托中，但在这种情况下，它不是情节提要中的初始视图！我在某处读到我必须在第一个视图中覆盖一个方法，但没有关于它的细节！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:25:24.210

如果您在故事板中的视图控制器中，则此代码： UIStoryboard *storyboard = self.storyboard; UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"OtherViewController"];

将获得您想要的其他视图控制器，您可以执行以下操作：将自己设置为它的委托：[(OtherViewController *)vc setDelegate:self]; 显示它：[self presentViewController：vc 动画：YES 完成：nil]；

我认为您可以使用它来获取另一个视图控制器，然后从中访问选项卡栏。

抱歉，如果我误解了您要执行的操作。

# iphone - 如何获得第二个 mov 播放时间

> ID：11999667
> 
> 赞同：0
> 
> 时间：2012-08-17T04:13:31.910
> 
> 标签：iphone, ios, cocos2d-iphone

为什么在底部进程中获得第二个数字是 0.00000

```
 NSURL    *movieURL = [NSURL URLWithString:@"s26a.mov"];

NSDictionary *opts = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:NO]
                                                                   forKey:AVURLAssetPreferPreciseDurationAndTimingKey];                    
 AVURLAsset *urlAsset = [AVURLAsset URLAssetWithURL:movieURL options:opts]; 
 float minute = 0;
 float second = 0; 
 second = urlAsset.duration.value / urlAsset.duration.timescale; 
 NSLog(@"movie duration : %f", second); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:29:49.043

您可以像这样获得电影时长：

```
 Float64 durationSeconds = CMTimeGetSeconds([urlAsset duration]); // any AVURLAsset 
```

# objective-c - iOS - 如何调用 C 函数？

> ID：11999669
> 
> 赞同：1
> 
> 时间：2012-08-17T04:13:37.127
> 
> 标签：objective-c, ios, c, memory-management

我想用这个函数来帮助监控内存：

```
void print_free_memory ()
{
mach_port_t host_port;
mach_msg_type_number_t host_size;
vm_size_t pagesize;

host_port = mach_host_self();
host_size = sizeof(vm_statistics_data_t) / sizeof(integer_t);
host_page_size(host_port, &pagesize);

vm_statistics_data_t vm_stat;

if (host_statistics(host_port, HOST_VM_INFO, (host_info_t)&vm_stat, &host_size) != KERN_SUCCESS)
    NSLog(@"Failed to fetch vm statistics");

/* Stats in bytes */
natural_t mem_used = (vm_stat.active_count +
                      vm_stat.inactive_count +
                      vm_stat.wire_count) * pagesize;
natural_t mem_free = vm_stat.free_count * pagesize;
natural_t mem_total = mem_used + mem_free;
NSLog(@"used: %u free: %u total: %u", mem_used, mem_free, mem_total);
} 
```

A. 我应该把这个函数放在我的 Xcode 项目的什么地方？

B. 我怎么称呼它？显然我想设置为持续监控内存。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T04:23:42.060

> A. 我应该把这个函数放在我的 Xcode 项目的什么地方？

将定义放在单独的 .c 文件中，将声明放在单独的头文件中。

PrintFreeMem.h

```
extern void print_free_memory(); 
```

PrintFreeMem.c

```
#include "PrintFreeMem.h"
void print_free_memory() {
    // Your implementation
} 
```

> B. 我怎么称呼它？

在包含其头文件后，您可以像调用常规 C 函数一样调用它：

```
#include "PrintFreeMem.h"

-(void)myMethod {
    ...
    print_free_memory();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T04:18:08.560

您可以在头文件中进行声明并将此函数写入实现文件中，或者您可以简单地将函数放在实现文件中，但只能从下面的行中调用函数

```
print_free_memory (); 
```

希望这有效

# github - Jenkins 从 GitHub 私有仓库拉取源代码

> ID：11999670
> 
> 赞同：4
> 
> 时间：2012-08-17T04:13:42.820
> 
> 标签：github, continuous-integration, jenkins

我正在尝试在我的服务器中为我的项目设置 Jenkins。

我在 GitHub 私人仓库中上传了我的构建脚本。我已经建立了一个 SSH 密钥，并通过 GitHub 部署了它。

但是当我尝试构建时，Jenkins 无法从我的私人仓库中成功提取

这是控制台输出：

```
Started by user anonymous
Building in workspace /Users/Shared/Jenkins/Home/jobs/moai-test/workspace
Checkout:workspace / /Users/Shared/Jenkins/Home/jobs/moai-test/workspace - hudson.remoting.LocalChannel@15e6e48b
Using strategy: Default
Fetching changes from 1 remote Git repository
Fetching upstream changes from https://github.com/****/****.git
ERROR: Problem fetching from origin / origin - could be unavailable. Continuing anyway
hudson.plugins.git.GitException: Error performing command: git fetch -t https://github.com/****/****.git +refs/heads/*:refs/remotes/origin/*
    at hudson.plugins.git.GitAPI.launchCommandIn(GitAPI.java:862)
    at hudson.plugins.git.GitAPI.launchCommand(GitAPI.java:817)
    at hudson.plugins.git.GitAPI.fetch(GitAPI.java:197)
    at hudson.plugins.git.GitAPI.fetch(GitAPI.java:1063)
    at hudson.plugins.git.GitSCM.fetchFrom(GitSCM.java:812)
    at hudson.plugins.git.GitSCM.access$100(GitSCM.java:90)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1096)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1064)
    at hudson.FilePath.act(FilePath.java:842)
    at hudson.FilePath.act(FilePath.java:824)
    at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1064)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1256)
    at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:589)
    at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:88)
    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:494)
    at hudson.model.Run.execute(Run.java:1502)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:236)
Caused by: java.lang.InterruptedException
    at java.lang.Object.wait(Native Method)
    at java.lang.Object.wait(Object.java:485)
    at java.lang.UNIXProcess.waitFor(UNIXProcess.java:115)
    at hudson.Proc$LocalProc.join(Proc.java:319)
    at hudson.Launcher$ProcStarter.join(Launcher.java:345)
    at hudson.plugins.git.GitAPI.launchCommandIn(GitAPI.java:843)
    ... 18 more
ERROR: Could not fetch from any repository
FATAL: Could not fetch from any repository
hudson.plugins.git.GitException: Could not fetch from any repository
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1103)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1064)
    at hudson.FilePath.act(FilePath.java:842)
    at hudson.FilePath.act(FilePath.java:824)
    at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1064)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1256)
    at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:589)
    at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:88)
    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:494)
    at hudson.model.Run.execute(Run.java:1502)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:236) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T09:55:17.600

查看您的构建日志

```
Using strategy: Default
Fetching changes from 1 remote Git repository
Fetching upstream changes from https://github.com/****/****.git
ERROR: Problem fetching from origin / origin - could be unavailable. Continuing anyway 
```

您正在为 github 存储库使用 HTTPS URI。

HTTPS URI 使用用户名/密码而不是 SSH 密钥进行身份验证。

要使用 SSH 密钥，您需要检查 SSH URI，例如

```
git@github.com:****/****.git 
```

这应该可以解决您的问题。

或者，您可以为 Jenkins 提供用户名/密码（尽管这是一个更大的安全风险）

# ios - 如何使用 MonoTouch AudioConverter 将 LinearPCM 转换为压缩格式？

> ID：11999675
> 
> 赞同：1
> 
> 时间：2012-08-17T04:13:55.383
> 
> 标签：ios, xamarin.ios, audio-converter

我正在使用 MonoTouch.AudioToolbox.InputAudioQueue 录制 LinearPCM，需要在上传到 Web 服务之前对其进行转换。我想继续重新编码为 LinearPCM，以便我可以处理中断（电话）、播放音频（播放、倒带、快进等）。

Apple 确实支持使用其[音频转换服务](http://developer.apple.com/library/ios/#documentation/MusicAudio/Reference/AudioConverterServicesReference/Reference/reference.html "音频转换服务")进行音频转换，并且看到 MonoTouch 包含 MonoTouch.AudioUnitWrapper._AudioConverter 中的功能。但是，我找不到关于它的单个 MonoTouch 示例或 StackOverflow 问题。:(

有谁知道如何使用 MonoTouch 转换音频？我已经研究过[NSpeex](http://nspeex.codeplex.com "NSpeex")等 3rd 方库，但希望尽可能保持原生库。

任何帮助或指示都会很棒！多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:07:04.403

通过使用 MonoTouch 示例 AudioQueueOfflineRenderDemo 转换为 .m4a 解决了我的问题。

[AudioQueueOfflineRenderDemo @ GitHub](https://github.com/xamarin/monotouch-samples/tree/master/AudioQueueOfflineRenderDemo)

# php - php 超时 - set_time_limit(0); - 不工作

> ID：11999678
> 
> 赞同：32
> 
> 时间：2012-08-17T04:14:48.800
> 
> 标签：php, timeout, execution

我的 PHP 文件有问题，执行时间超过 30 秒。

搜索后，我`set_time_limit(0);`在代码开头添加了，但是文件仍然超时，`500 error`30秒后。

```
log: PHP Fatal error:  Maximum execution time of 30 seconds exceeded in /xxx/xx/xxx.php

safe-mode : off 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-17T04:18:30.157

检查 php.ini

```
ini_set('max_execution_time', 300); //300 seconds = 5 minutes

ini_set('max_execution_time', 0); //0=NOLIMIT 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-07-10T01:36:12.663

这是一个旧线程，但我想我会发布这个[链接](http://www.binarytides.com/php-set-time-limit/)，因为它在这个问题上帮助了我很多。本质上它的意思是服务器配置可以覆盖 php 配置。来自文章：

> 例如 mod_fastcgi 有一个名为“-idle-timeout”的选项，它控制脚本的空闲时间。因此，如果脚本在这么多秒内没有向 fastcgi 处理程序输出任何内容，那么 fastcgi 将终止它。设置有点像这样：

```
Apache <-> mod_fastcgi <-> php processes 
```

文章还有其他例子和进一步的解释。希望这对其他人有帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-07T14:58:54.587

我通常在主循环中使用 set_time_limit(30) （因此每次循环迭代限制为 30 秒，而不是整个脚本）。

我在多个数据库更新脚本中执行此操作，通常需要几分钟才能完成，但每次迭代不到一秒 - 保持 30 秒的限制意味着如果我足够愚蠢地创建一个脚本，脚本将不会陷入无限循环.

我必须承认，我选择 30 秒作为限制有点武断——我的脚本实际上可以用 2 秒代替，但考虑到实际应用，我觉得 30 秒更舒服——当然你可以使用你觉得的任何值合适的。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-17T04:19:13.220

```
ini_set('max_execution_time', 300); 
```

用这个

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T04:24:09.830

签出这个，这是来自[PHP MANUAL](http://php.net/manual/en/function.set-time-limit.php)，这可能会对你有所帮助。

如果您使用 PHP_CLI SAPI 并收到错误“超过 N 秒的最大执行时间”，其中 N 是整数值，请尝试每 M 秒或每次迭代调用 set_time_limit(0)。例如：

```
<?php

require_once('db.php');

$stmt = $db->query($sql);

while ($row = $stmt->fetchRow()) {
    set_time_limit(0);
    // your code here
}

?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-06T14:14:57.683

我想你必须说限制执行时间到 php ，试试这个。

```
ini_set('max_execution_time', 0); 
```

# web-services - “外部化网址”是什么意思？（关于 Web 应用程序编程。）

> ID：11999679
> 
> 赞同：1
> 
> 时间：2012-08-17T04:14:52.487
> 
> 标签：web-services, web-applications

“外部化网址”是什么意思？（关于 Web 应用程序编程。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:26:15.227

通常，如果您更改代码中的内容，则必须先编译、测试和部署，然后才能看到更改。外部化是将这些信息放在一个可以更改的地方，无需重新编译和重新安装（有时无需重新启动服务器/应用程序）。

通常，您在某处创建一个文本文件或 xml，然后在代码中读取该文件。每当我这样做时，我都会编写一个服务来为我做这件事。这样，相同的服务可以被应用程序的其他部分重用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T04:20:43.290

不应该将网址移动到外部来源。对您的网页来说是陌生的？我不能发誓，但在阅读您的问题后会想到它。

# asp.net - 在程序集中发现重复类型“主”

> ID：11999684
> 
> 赞同：2
> 
> 时间：2012-08-17T04:15:23.383
> 
> 标签：asp.net, .net, visual-studio-2010, .net-4.0, aspnet-merge

以前，我们在 .net 2.0 上，并且 aspnet_merge 构建工作正常。现在升级到 .net 4.0 后，当我们尝试使用 aspnet_merge 构建代码时，它会引发以下错误

在程序集中发现重复类型“主”。

这是一个母版页，我已经彻底检查了重复性，但没有..

请建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:07:22.983

从这里寻求帮助 -
[http://dreamlusion.wordpress.com/2008/07/06/an-error-occurred-when-merging-assemblies-access-to-the-path-is-denied/](http://dreamlusion.wordpress.com/2008/07/06/an-error-occurred-when-merging-assemblies-access-to-the-path-is-denied/)

[http://www.codeproject.com/Articles/9364/Merging-NET-assemblies-using-ILMerge](http://www.codeproject.com/Articles/9364/Merging-NET-assemblies-using-ILMerge)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T21:26:44.063

我在 VS 2012 中遇到了类似的问题，有 2 个 aspx 文件：

*   Foo_Bar.aspx
*   Foo/Bar.aspx

为我解决的问题是检查`Precompile during publishing`。如屏幕截图所示，设置为不合并：

![高级预编译设置](../Images/208615ca016da8846de07d649c6eecd5.png)

**如果您仍然有问题**，请尝试在代码隐藏中重命名类（例如，从`Foo_Bar`to`Foo_Bar_Old`并更新 aspx 页面标记以匹配`<%@ Page ... Inherits="Foo_Bar_Old" %>`：）

# css - float:left 在创建水平导航栏时在无序列表上的目的是什么？

> ID：11999686
> 
> 赞同：1
> 
> 时间：2012-08-17T04:15:31.513
> 
> 标签：css, css-float

如果我包含或删除“float:left”行，下面的代码示例几乎相同。唯一的区别是左浮动版本将其下方的块向上移动了一点，但不超过换行符。我不明白您为什么要将浮动添加到设置为 100% 宽度的元素。据我了解，这可以防止它下面的所有东西在它周围流动。这不就是漂浮的目的吗？

```
ul
{
    list-style-type: none;
    float: left;
    width:100%;
    padding:0;
    margin:0;
}

li
{
    display: inline;    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:23:37.240

之所以可行，是因为您的`<li>`显示设置为`inline`. 这意味着带有此 HTML 标记的所有元素都将显示在与所有其他元素相同的行上。换句话说，不会有换行符。我建议改为：

```
ul {
    list-style-type: none;
    width: 100%;
    padding: 0px;
    margin: 0px;
    overflow: hidden; /* This will ensure there's a line break after using float for the list items */
}

li {
    float: left;
} 
```

通过这种方式，您可以确保每个列表项也可以正确使用`margin`，`padding`而不是像通常用作文本字符串中的字符的内联元素一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T04:32:09.937

float 属性旨在允许对象与将其指向一侧的文本内联显示。因此，向左浮动很像内联，但浮动的元素是向左或向右对齐的。没有必要使用 float:left; 标记您要执行的操作，通常最好将 ul 放置在您想要的位置，使用 position, margin, padding, left , top , right , bottom 代替。这通常会给出更可控的结果。

这是一个在 no float 和 float left 之间切换时会发生什么的示例小提琴。 [http://jsfiddle.net/um9LV/](http://jsfiddle.net/um9LV/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T04:33:23.567

[**float**](https://developer.mozilla.org/en-US/docs/CSS/float) CSS 属性指定一个元素应该从正常流中取出并放置在其容器的左侧或右侧，文本和内联元素将环绕它。

当一个元素浮动时，它会脱离文档的正常流程。它向左或向右移动，直到它接触到它的包含框或另一个浮动元素的边缘。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T05:09:00.430

`float:left`- 使用浮动让块元素彼此相邻滑动

`display:block`- 将链接显示为块元素使整个链接区域可点击（不仅仅是文本），它允许我们指定宽度

# java - Java：为什么我的外部程序在 Java 中调用时会冻结？

> ID：11999694
> 
> 赞同：1
> 
> 时间：2012-08-17T04:16:39.720
> 
> 标签：java

我正在从我的 Java GUI 调用一个外部应用程序。当用户点击 GUI 中的“RUN”按钮时，Java 代码如下：

```
Runtime runme = Runtime.getRuntime();
runme.exec("MyApp.bin"); 
```

MyApp.bin 做了一些数学计算，里面有一些循环——没什么大不了的。发生的事情是 MyApp.bin 卡住了！当我关闭我的 Java GUI 时，MyApp.bin 会继续运行并完成。如果我直接从终端运行 MyApp.bin，那么它运行良好而不会冻结。为什么我的应用程序在从 Java GUI 运行时冻结，但在我关闭 Java GUI 时恢复？阻止我的应用程序成功运行的 Java GUI 或 Java 代码是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T04:20:31.907

我将做出一个疯狂的猜测，`MyApp.bin`即输出一些东西到它的标准输出，而你没有阅读它。这会导致缓冲区被填满，并阻止您的进程。

`Runtime.exec()`返回一个`Process`对象。如果您为此阅读 javadoc，您会发现：

> 创建的子进程没有自己的终端或控制台。它所有的标准io（即stdin、stdout、stderr）操作都会通过三个流（getOutputStream()、getInputStream()、getErrorStream()）重定向到父进程。父进程使用这些流向子进程提供输入并从子进程获取输出。由于一些原生平台只为标准输入输出流提供有限的缓冲区大小，未能及时写入子进程的输入流或读取输出流可能会导致子进程阻塞，甚至死锁。

[http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html)

# android - 为 Android 日历添加或更新监听器

> ID：11999700
> 
> 赞同：3
> 
> 时间：2012-08-17T04:17:36.767
> 
> 标签：android, android-calendar

我已经阅读了这篇文章： http: [//developer.android.com/reference/android/provider/CalendarContract.html](http://developer.android.com/reference/android/provider/CalendarContract.html)，但这只是关于以编程方式插入、删除和更新事件。但是，我找不到手动插入日历的监听器。你能帮我解决这个问题吗？

提前致谢。

# android - 如何在android中使用MifareClassic API“增量”和“减量”？

> ID：11999710
> 
> 赞同：2
> 
> 时间：2012-08-17T04:18:34.413
> 
> 标签：android, nfc, increment, mifare

我的问题是当我调用 MifareClassic 函数“增量”时，它会返回“增量成功”，但是当我检查值块时，它的值没有任何增量，在我的代码中使用有什么错误吗？

我的代码如下：

```
 try {
     mfc.increment(0x14,increvalue);
     metaInfo =  "Increment Success !";
     mfc.close();
   } catch (IOException e) {
     e.printStackTrace();
     metaInfo = "Increment Fail!";
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:55:05.997

mifare`increment`和`decrement`函数对标签进行计算，但不将结果写回持久内存。

相反，结果将存储在标签上的临时寄存器中。

要将结果写回标签，请使用以下`transfer`函数：

[http://developer.android.com/reference/android/nfc/tech/MifareClassic.html#transfer%28int%29](http://developer.android.com/reference/android/nfc/tech/MifareClassic.html#transfer%28int%29)

请注意，您可以传递不同的块索引以进行增量和传输，以实现从块 X 加/减并将结果写入块 Y 的函数。

# c# - 如何避免 csv 导出中的特殊字符？

> ID：11999711
> 
> 赞同：0
> 
> 时间：2012-08-17T04:18:51.817
> 
> 标签：c#, asp.net

在我的 [http://nridubai.com](http://nridubai.com)网站中，有一个功能 - 以 csv 格式导出所有数据。这仅对管理员可用。

但在我的数据库中有一些公司包含非英文字符，如**Äž**。

当我将其导出为 csv 格式时，这些字符会替换为奇怪的字符。但是当我尝试用记事本打开该 csv 文件时，它显示正确。

请帮我解决问题提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:49:16.033

这是您可以在 CSV 中解决的问题。将包含特殊字符，但是当您在记事本或 Excel 中打开该 CSV 时，这些特殊字符将转换为正确的字符。

在流式传输 CSV 时尝试使用 UTF8 编码。

# c++ - C++ Linux 异步 HTTP POST (Boost::asio)

> ID：11999717
> 
> 赞同：0
> 
> 时间：2012-08-17T04:19:32.840
> 
> 标签：c++, linux, http, boost-asio

在过去的两天里，我一直在尝试使用 libcurl 进行异步 http POST，但我想我放弃了。`curl_multi_fdset`给我 -1 的文件描述符 arg 的数量，文档只是说“这意味着你的应用程序有错误”。进行同步调用非常简单，但这当然毫无价值。

Boost::asio 似乎很有希望，但我找不到任何关于如何进行 http POST 的示例。

如果有人好心给我看一个例子，我就可以停止拔头发了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:17:22.347

[这](http://cpp-netlib.github.com/latest/index.html)是我认为您可能会发现有用的东西。它是一个 C++ 简单易用的基于 boost 的 HTTP 库。

# delphi - 如何将按下的键盘虚拟按钮发送到 TDBLookupComboBox 或类似的？

> ID：11999721
> 
> 赞同：0
> 
> 时间：2012-08-17T04:20:04.547
> 
> 标签：delphi, csv, firebird, foreign-key-relationship, delphi-2006

我必须将许多`Excell`文件（转换为`CSV`）转换为我的应用程序的数据库布局。

在我的表中，有一些字段使用其他表列表的外键，当我的转换代码找到这样的字段时，它没有外来 id，而是在`Excell`.

我发现目前最好的方法是插入一个新行，聚焦该`TDBLookupComboBox`字段，然后通过 SO 发送消息以模拟我正在输入文本。然后该`ComboBox` `autocomplete`功能将在外国列表中选择正确的项目。

**如果这是最好的方法，我该怎么做？要使用 Delphi 2006 和 Firebird 发送这些键盘消息？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:38:21.227

与其“模拟”用户，不如执行组件通过代码执行的操作。它使用 TDataSet.Locate 方法查找部分字符串并将 DataSet 游标设置为找到的记录。然后它使用查找源来获取值。

```
var
  SearchString: string;
begin
  SearchString := 'Dat';
  if LookupDataSet.Locate('MySearchField', SearchString, [loCaseInsensitive, loPartialKey]) then
  begin
    DestDataSet.Edit;
    DestDataSet.FieldByName('FLD_ID').AsInteger := LookupDataSet.FieldByName('FLD_ID').AsInteger;
    // DestDataSet.Post;
  end
  else
    raise Exception.CreateFmt('Lookup value not found for "%s"', [SearchString]);
end; 
```

# android - 无需触摸即可获取纬度，经度

> ID：11999727
> 
> 赞同：1
> 
> 时间：2012-08-17T04:20:34.417
> 
> 标签：android, google-maps, gps

如何在没有触摸事件的情况下查找用户当前位置的纬度、经度？我在互联网上搜索但我得到纬度、经度只有触摸事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T04:27:35.593

我在[这里](https://stackoverflow.com/a/11946224/940096)回答了你的类似问题。看看那个。**它不需要谷歌地图。**

```
public class LocationSampleActivity extends Activity implements OnInitListener 
{
    TextView tv;

    @Override 
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);         
        tv = (TextView)this.findViewById(R.id.txtLocation);
        tts = new TextToSpeech(this, this);
        LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        LocationListener ll = new mylocationlistener();
        lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, ll);    
    }

    private class mylocationlistener implements LocationListener 
    {
        @Override 
        public void onLocationChanged(Location location) {    
            if (location != null) {
            Log.d("LOCATION CHANGED", location.getLatitude() + "");
            Log.d("LOCATION CHANGED", location.getLongitude() + "");
            String str = "\n CurrentLocation: "+
                "\n Latitude: "+ location.getLatitude() + 
                "\n Longitude: " + location.getLongitude();       
              tv.append(str);  
              speak(location);
            } 
        }

        @Override
        public void onProviderDisabled(String provider) {
            Toast.makeText(LocationSampleActivity.this,"Error onProviderDisabled",Toast.LENGTH_LONG).show();
        }    
        @Override
        public void onProviderEnabled(String provider) {
            Toast.makeText(LocationSampleActivity.this,"onProviderEnabled",Toast.LENGTH_LONG).show();
        }
        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            Toast.makeText(LocationSampleActivity.this,"onStatusChanged",Toast.LENGTH_LONG).show();
        }
    }
} 
```

它将您当前位置的纬度和经度更新为`TextView`无需触摸即可。请将重要权限添加到您的清单文件中。

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />       
<uses-permission android:name="android.permission.INTERNET" />     
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T04:31:27.483

使用 MyLocationOverlay 获取当前位置。

```
 MyLocationOverlay whereAmI  = new MyLocationOverlay(this,mapview); 

   GeoPoint myLocationGeoPoint = whereAmI.getMyLocation();

   float latitude = myLocationGeoPoint.getLatitudeE6() / 1E6;

   float longitude = myLocationGeoPoint.getLongitudeE6() / 1E6; 
```

# c# - 如何为不同的 MVC 3 区域指定不同的 AddController 代码模板？

> ID：11999730
> 
> 赞同：0
> 
> 时间：2012-08-17T04:20:48.917
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-3-areas, code-templates

我知道如何[为 MVC 项目自定义控制器/视图模板](http://www.hanselman.com/blog/ModifyingTheDefaultCodeGenerationscaffoldingTemplatesInASPNETMVC.aspx)。但是，我的项目中有几个不同的 MVC 3 区域，每个区域都有自己的模型、视图和控制器。有没有办法为每个区域指定不同的代码模板？我试图将 CodeTemplates 文件夹放在我的 Area 子文件夹之一中，但它不起作用。

这个想法是，当我右键单击区域中的任何控制器文件夹并选择添加 -> 控制器时，我希望它使用该区域控制器模板。

**更新：** 我很高兴能够[选择我想要使用的控制器模板](https://stackoverflow.com/questions/10913824/new-t4-controller-template-in-mvc3)，但仍然想知道是否可以为不同的区域指定 CodeTemplates。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T20:59:43.750

看起来[MVC 脚手架](http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/)可能是我唯一的选择。当我开始工作时，我会展示具体的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:21:07.390

重读你的问题，我意识到我的答案可能不是你想要做的。您不希望视图中的自动生成代码使用不同的模板吗？还是您不希望页面看起来有所不同，例如`css`更改等？我的回答适用于后者。如果您想使用不同的代码模板，似乎（根据[this](http://blogs.msdn.com/b/joecar/archive/2011/01/06/add-the-asp-net-mvc-3-code-templates-to-your-application-with-nuget.aspx)）只要您给它们不同的名称，您应该能够选择您不想使用的那个。您也可以只从项目中删除您不想要的那些，然后再将它们添加回来。

在要应用模板的文件夹中创建 2 个文件，一个命名`_ViewStart.cshtml`，另一个`_Layout.cshtml`

在`_ViewStart`文件中，添加以下内容：

```
@{
    Layout = "~/Views/Reports/_Layout.cshtml";
} 
```

这将指向`_Layout`根据需要更改路径。在`_Layout`文件中添加您想要的任何内容，就像`Shared`目录中的布局一样。对于您想要使用此布局的任何其他文件夹，只需将`_ViewStart`文件添加到该目录并将其指向`_Layout`您想要的文件。

# expandablelistview - 如何在不阻塞整个应用程序的情况下从微调器更新列表视图

> ID：11999732
> 
> 赞同：0
> 
> 时间：2012-08-17T04:20:57.397
> 
> 标签：expandablelistview, notify

我正在编写一个依赖可扩展列表视图的订餐应用程序。当用户从子视图内的微调器中选择一个数量时，组视图中的一个按钮应该更新（从灰色变为绿色）以表示用户已经在组中选择了一个数量。

我的问题是在用户单击微调器后立即刷新 expandablistview。如果我使用 notifydatasetchanged 或 listview.notifyallviews，这会阻止整个程序，因为微调器的 onitemselectedlistener 会不断调用该行。请注意，这不会返回错误，它是合法程序运行，但在 onitemclicklistener 之后调用 notifyallviews 的事实会导致程序卡在无休止的视图更新中。

我没有附加任何代码，因为我认为我写的任何东西都不会帮助你。上面的描述应该为您提供了问题的所有要素。

期待帮助！

# java - 检测 JTextArea 中的换行

> ID：11999735
> 
> 赞同：1
> 
> 时间：2012-08-17T04:21:30.413
> 
> 标签：java, swing, jtextarea, linefeed, word-wrap

我正在制作一个程序，该程序涉及将输入的文本`JTextArea`保存到文件中。问题是，当我使用`setWrapStyleWord()`时，文本换行时不会创建换行符。因此，打印到文件中的文本是一行非常长的行。

有什么方法可以检测换行的时间以便我可以插入换行，或者有没有办法在发生换行的地方简单地添加换行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T06:11:10.987

利用`javax.swing.text.Utilities`

```
public static final int getRowStart(JTextComponent c, int offs)
public static final int getRowEnd(JTextComponent c, int offs) 
```

通过你`JTextArea`和上一行的偏移量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T06:02:19.700

这个上下文敏感。也就是说`JTextArea`，正如 BrianRoach 已经说过的，根据 的大小，单词 break 会发生变化。

但是，如果您真的下定决心，您也许可以通过使用`LineBreakMeasurer`.

看看这个[例子](http://docs.oracle.com/javase/tutorial/2d/text/drawmulstring.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T04:45:25.600

如果您使用字符而不是单词来换行，您可以：

如果您在 中使用等宽字体，则可以在之后处理字符串以在每个字符数`JTextArea`之后添加一个，其中是填充文本区域中一行的字符数。`\n``x``x`

将此想法应用于自动换行将只涉及遍历您的字符串，并且按照此答案的评论中的建议，添加换行符以使其出现在空格上。

# html - Limejs 中的自定义形状

> ID：11999736
> 
> 赞同：1
> 
> 时间：2012-08-17T04:21:40.303
> 
> 标签：html, limejs

我想知道使用 LimeJS 在 html5 中创建自定义形状。谁能告诉我如何在使用 LimeJS for html5 的游戏中创建自定义形状，如评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:32:29.860

图像

```
 var gameMap = new lime.Sprite().setSize(400,300).setFill('images/bk.jpg').setPosition(0,0).setAnchorPoint(0,0); 
```

对于自定义形状，我们必须填充不同的点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T01:24:48.737

您基本上创建了一个自定义精灵，并适当地呈现 UI，这可能是元素的组合。外壳必须是：

```
test.board = function() {
    goog.base(this);

}
goog.inherits(test.board, lime.Sprite); 
```

文本输入不是直接的；这是一篇关于文本输入的文章：[https](https://groups.google.com/forum/?fromgroups=#!topic/limejs/txaxgK3eXQg) ://groups.google.com/forum/?fromgroups=#!topic/limejs/txaxgK3eXQg 。您可以使用标签，并附加到按键事件。我不知道这是否适用于画布渲染......

# node.js - child_process 模块不返回目录

> ID：11999740
> 
> 赞同：0
> 
> 时间：2012-08-17T04:22:00.220
> 
> 标签：node.js

我正在做这个关于 NodeJS 的教程：[http](http://www.nodebeginner.org) ://www.nodebeginner.org 。

这是我觉得令人困惑的代码：

```
var exec = require("child_process").exec;

    function start(response) {
        console.log("Request handler 'start' was called.");
        var content = "empty";

        exec("ls -lah", function(error, stdout, stderr) {
            response.writeHead(200, {"Content-type":"text/plain"});
            response.write(stdout);
            console.log(stdout);
            response.end();
        });

    } 
```

我有一个将 http 响应传递给调用该`start`函数的请求处理程序的路由器。这是毫无问题的。但是，该`stdout`参数不会在浏览器或控制台中返回任何内容。我知道这`ls -lah`应该给出当前目录中的文件列表。我的目录中有 5 个其他文件，但没有返回任何内容。关于这里发生的事情有什么想法吗？

# facebook - 在群组上发帖时替代 message_tags

> ID：11999741
> 
> 赞同：1
> 
> 时间：2012-08-17T04:22:07.067
> 
> 标签：facebook, facebook-group

[http://developers.facebook.com/docs/reference/api/post/](http://developers.facebook.com/docs/reference/api/post/)

我看到我们在向群组发布帖子时不能使用 html，并且标签 message_tags 只是一个只读值。

错误状态是设计使然！ [http://developers.facebook.com/bugs/247911678652789](http://developers.facebook.com/bugs/247911678652789)

我需要在我正在发布的帖子中标记用户，需要询问是否有可用的替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:10:08.660

不，就像我在那个错误报告中所说的那样，目前无法通过 API 为帖子添加标签

# php - 如何在 symfony2 选择框中使用数据库中的数据设置默认值

> ID：11999745
> 
> 赞同：1
> 
> 时间：2012-08-17T04:22:31.033
> 
> 标签：php, forms, symfony, doctrine-orm, repository

我有这个代码

```
->add('user', 'entity', array(
                            'class' => 'Acme\Entity\User',
                            'query_builder' => function(EntityRepository $er) use ($options)
     {                        return $er->createQueryBuilder('u')
                               ->orderBy('u.name', 'ASC');
                            },
            'data' => $option['id']
            )) 
```

它不工作

```
public function buildForm(FormBuilderInterface $builder, array $options)

    {
            $builder
              ->add('description')

              ->add('user', 'entity', array(
                'class' => 'Acme\Entity\User',
                'query_builder' => function(EntityRepository $er) use ($options) {
                    return $er->createQueryBuilder('u');

                },
              'preferred_choices' => array('2')
              ))
        ;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T05:33:07.057

您可以使用以下方法之一：

1.  在对象中设置默认值

    ```
    $cl->setUser($this->getDoctrine()->getEntityManager()->getReference('Acme:User',2)); 
    ```

2.  在表单构建器中使用首选选项：

    ```
    'preferred_choices' => array('2') 
    ```

3.  或设置`'property_path' => false`并使用`'data' => YourDefaultEnity`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T03:35:15.550

表单应自动将 user->id 值映射到选定的实体选择字段。例如，如果您的计算机实体与名为“computer_users”的联接表中的用户实体具有 OnetoOne 关系：

```
class Computer{

    private $user;

    /**
    * @ORM\OneToOne(targetEntity="ComputerUser", mappedBy="computer")
    */
    private $computerUsers;

    public function getUser(){
       return $computerUsers->getUser();
    }

    private function getComputerUser(){
       return $this->$computerUsers;
    }
} 
```

表单类中的字段“用户”应该从传递给表单的计算机类中的“用户”属性对象中获取用户-> id 值。

或者，您可以通过使用 SetData() 将用户实体显式传递到表单中来显式设置值：

```
 $computerForm = $this->createForm( new ComputerForm(), $computer );
    $user         = $computer->getComputerUser()->getUser();

    $computerForm->get('user')->setData( $user );

    return $this->render( 'AcmeBundle:Computer:edit.html.twig'
                        , array( 'computer' => $computer
                        , 'computerForm'    => $computerForm->createView()
            )
    ); 
```

# asp.net-mvc - 通过显示另存为对话框保存 HTML 报告

> ID：11999746
> 
> 赞同：0
> 
> 时间：2012-08-17T04:22:45.647
> 
> 标签：asp.net-mvc, save

我想在我的 MVC 应用程序中向用户显示一个另存为对话框，并允许他以 pdf 或 word 格式保存一些 HTML 报告。为此，我是否需要在服务器端使用文件流和 IO 功能？还是在 JQuery 级别本身有可能？

我在网上找到了一些参考资料，例如添加响应标头 Content-Disposition，但不知道如何应用它。你能建议一些选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T04:45:08.640

您必须创建一个后代`ActionResult`，并以所需的方式输出。

这是我为实现“另存为 Excel”功能而创建的一类：

```
 public class ExcelResult : ActionResult
            {
                private string _fileName;
                private IQueryable _rows;
                private string[] _headers = null;
                private string _data;

                private TableStyle _tableStyle;
                private TableItemStyle _headerStyle;
                private TableItemStyle _itemStyle;

                public string FileName
                {
                    get { return _fileName; }
                }

                public IQueryable Rows
                {
                    get { return _rows; }
                }

                public ExcelResult(string data, string fileName)
                {
                    _fileName = fileName;
                    _data = data;
                }

                public override void ExecuteResult(ControllerContext context)
                {
                    WriteFile(_fileName, "application/ms-excel", _data);            
                }

                private string ReplaceSpecialCharacters(string value)
                {
                    value = value.Replace("’", "'");
                    value = value.Replace("“", "\"");
                    value = value.Replace("”", "\"");
                    value = value.Replace("–", "-");
                    value = value.Replace("…", "...");
                    return value;
                }

                private void WriteFile(string fileName, string contentType, string content)
                {
                    HttpContext context = HttpContext.Current;
                    context.Response.Clear();
                    context.Response.AddHeader("content-disposition", "attachment;filename=" + fileName);
                    context.Response.Charset = "";
                    context.Response.Cache.SetCacheability(HttpCacheability.NoCache);
                    context.Response.ContentType = contentType;
                    context.Response.Write(content);
                    context.Response.End();
                }
            } 
```

您可以使用此示例为 word 生成 HTML。PDF 是另一回事。

# c# - 基本登录页面仅用于检索用户信息

> ID：11999753
> 
> 赞同：-1
> 
> 时间：2012-08-17T04:23:51.640
> 
> 标签：c#, asp.net

我正在使用 ASP.NET 成员资格，因为这不是具有这种身份验证的典型网站。我有管理员使用 Uname 和密码（加密）分配的表。

单击登录按钮时，我有一个登录页面，我需要在我的数据库表中搜索用户。

```
public void getuserinfo()
{
    String var = System.Configuration.ConfigurationManager
        .ConnectionStrings["KKSTechConnectionString"].ConnectionString;

    SqlConnection conn = new SqlConnection(var);
    SqlCommand myCmd = new SqlCommand("SELECT Username, Pass FROM Users", conn);
    conn.Open();

    if(TextBox1== Username) && (TextBox2== Password) <- I am not able to get this right :( 
    {
        //How do I get his info?? 
    }
} 

*Database table for dbo.users:*

Uname(PK) | Pass | EmpID (FK) 
```

我想先解密密码，然后将其与 TextBoxPassword 进行比较。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T04:51:42.180

另一种方法是对在用户屏幕上输入的密码进行哈希处理，并将其与存储在数据库中的哈希密码进行比较。

现在，像这样使用你的函数。

```
public void ValidateUser()
{
    var connectionString = System.Configuration.ConfigurationManager
        .ConnectionStrings["KKSTechConnectionString"].ConnectionString;
    var userName = txtUserName.Text;
    var hashedPassword = Helper.ComputeHash(txtPassword.Text, "SHA512", null);
    // this query should be parameterised when used in production to avoid SQL injection attacks
    var query = String.Format("SELECT Username, Pass FROM Users WHERE Username='{0}' AND Pass='{1}'",
                    userName,
                    hashedPassword);

    using(var connection = new SqlConnection( connectionString ))
    using(var command = new SqlCommand(query, connection ))
    {
        conn.Open();
        SqlDataReader reader=command.ExecuteReader();
        if(reader.Read())
        {

        }
        reader.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T04:41:40.357

在我们得到解决方案之前有几个问题：

1.  您如何将用户名和密码从客户端发送到服务器端？是纯文本吗？
2.  加密发生在哪里？
3.  您是否编写了加密代码或使用了可用的标准之一？

在您的代码中，我可以注意到以下问题：

1.  尽管您从未在数据库上执行过查询，但您已经创建了连接对象和命令对象。
2.  您正在使用的查询返回整个用户表，这绝对不是必需的。您已经拥有用户名和密码的用户输入，因此只需查找它们是否正确。
3.  使您的查询参数化并将输入发送到数据库。在那里，检查用户名和密码是否匹配。如果他们这样做，请发回用户详细信息（我想您将需要在应用程序的某个地方），否则，抛出异常或返回 null。

在匹配用户名和密码之前，请务必注意加密/解密。

# google-chrome-extension - 创建 Chrome 扩展选项页面时如何使用 Javascript？

> ID：11999754
> 
> 赞同：13
> 
> 时间：2012-08-17T04:24:06.850
> 
> 标签：google-chrome-extension

我试着按照谷歌的例子：[https ://developer.chrome.com/extensions/options.html](https://developer.chrome.com/extensions/options.html)

我立即遇到了按钮和主体尝试执行功能的问题，因此我附加了侦听器。然后，它告诉我选项页面不允许执行JS。

要么我没有正确理解如何做到这一点，要么 Chrome 的文档完全错误。

你如何在那里使用JS？或者：你能指出我正确教程的方向吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-17T11:37:40.560

看看这个答案：[Chrome 教程 - 选项页面](https://stackoverflow.com/questions/10322276/chrome-tutorials-options-page)

> "manifest_version": 2 禁止嵌入脚本。将所有 JavaScript 移至 options.js 并以这种方式加载。”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T11:57:09.730

您不能将内联 JS 与新扩展所需的 manifest v2.0 一起使用。清单 v1 可以做到这一点，但现在不行。您必须将脚本文件引用到页面。如果所有扩展页面上都存在此问题。

```
<script type="text/javascript">JS CODE</script> 
```

不再允许。改用这个。

```
<script type="text/javascript" src="FILENAME.js"></script> 
```

看看[谷歌代码文档 - 清单](http://developer.chrome.com/extensions/manifestVersion.html)

# sql - 如何旋转下表的列值？

> ID：11999758
> 
> 赞同：0
> 
> 时间：2012-08-17T04:24:49.407
> 
> 标签：sql, sql-server, sql-server-2008

表A：

```
Brand     Product
------------------
A            X
A            XX
A            XXX
B            Y
B            YY
C            Z 
```

我需要如下表所示的数据：

```
A      B      C
-------------------
X      Y      Z
XX     YY     NULL   
XXX    NULL   NULL 
```

如何在 Sql Server 2008 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T04:34:19.063

我不相信 PIVOT 是您在这里寻找的。

从我可以看到您正在查看使用条目来生成行？

此外，PIVOT 使用聚合函数，所以我看不到这种情况发生。

你可以尝试的，就像

```
DECLARE @Table TABLE(
        Brand VARCHAR(10),
        Product VARCHAR(10)
)

INSERT INTO @Table SELECT 'A','X '
INSERT INTO @Table SELECT 'A','XX' 
INSERT INTO @Table SELECT 'A','XXX'
INSERT INTO @Table SELECT 'B','Y' 
INSERT INTO @Table SELECT 'B','YY' 
INSERT INTO @Table SELECT 'C','Z' 

;WITH Vals AS (
        SELECT  *,
                ROW_NUMBER() OVER(PARTITION BY Brand ORDER BY (SELECT NULL)) RID
        FROM    @Table
)
, RIDs AS (
        SELECT  DISTINCT
                RID
        FROM    Vals
)
SELECT  vA.Product [A],
        vB.Product [B],
        vC.Product [C]
FROM    RIDs r LEFT JOIN
        Vals vA ON  r.RID = vA.RID
                AND vA.Brand = 'A' LEFT JOIN
        Vals vB ON  r.RID = vB.RID
                AND vB.Brand = 'B' LEFT JOIN
        Vals vC ON  r.RID = vC.RID
                AND vC.Brand = 'C' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:25:21.150

我知道这是一个较晚的条目，但这里有一种不同的方法来解决它：

```
DECLARE @Table TABLE(Brand VARCHAR(10), Product VARCHAR(10)) 
INSERT INTO @Table SELECT 'A','X ' 
INSERT INTO @Table SELECT 'A','XX'  
INSERT INTO @Table SELECT 'A','XXX' 
INSERT INTO @Table SELECT 'B','Y'  
INSERT INTO @Table SELECT 'B','YY'  
INSERT INTO @Table SELECT 'C','Z'  

SELECT [A],[B],[C] FROM (
SELECT row_number() over (partition by brand order by product) rn,  
Product, brand FROM @table
) as p
PIVOT(
  MAX(product) for Brand in ([A],[B],[C])
)as pvt 
```

# android - 如何更快地获取 Android 联系人

> ID：11999760
> 
> 赞同：1
> 
> 时间：2012-08-17T04:24:58.203
> 
> 标签：android, contact, contactscontract

我需要在手机上找到联系人。这是我的代码：

```
Uri uri = ContactsContract.CommonDataKinds.Phone.CONTENT_URI;
    Cursor cursor = context.getContentResolver().query(
            uri,
            new String[] { ContactsContract.CommonDataKinds.Phone.NUMBER,
                    ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
                    ContactsContract.CommonDataKinds.Phone._ID }, null,
            null,
            ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME + " ASC");
    cursor.moveToFirst();
    while (cursor.isAfterLast() == false) {
        String contactNumber = cursor
                .getString(cursor
                        .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
        String contactName = cursor
                .getString(cursor
                        .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
        int phoneContactID = cursor
                .getInt(cursor
                        .getColumnIndex(ContactsContract.CommonDataKinds.Phone._ID));
        phoneContactInfo = new PhoneContactInfo();
        phoneContactInfo.setPhoneContactID(phoneContactID);
        phoneContactInfo.setContactName(contactName);
        phoneContactInfo.setContactNumber(contactNumber);
        if (phoneContactInfo != null) {
            arrContacts.add(phoneContactInfo);
        }
        phoneContactInfo = null;
        cursor.moveToNext();
    } 
```

有没有更快的方法来获取联系人？

# php - 如何在标题中使用标题

> ID：11999762
> 
> 赞同：-3
> 
> 时间：2012-08-17T04:25:13.087
> 
> 标签：php, image, gd

我正在使用这段代码：

```
<?php
   header("Content-type:image/gif");
   And some PHP gd code below to generate the image
?> 
```

问题是页面标题设置为宽 x 高的图像。有没有办法在不使用以下内容的情况下更改页面标题？

```
<img src='link'/> 
```

注意：我不需要使用任何 JavaScript 代码或外部文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:30:25.683

将图像的新窗口包裹在`html`. 我从问题的糟糕措辞中假设您正在打开一个以“仅图像”为内容的新窗口？

如果是这样，只需通过 HTML 包装它。除非浏览器不使用结果，在这种情况下，您需要更具体地了解过程/目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T03:50:57.227

您可以使用 iframe（大小 = 100%）创建一个嵌入图像的 html 页面。然后您可以在 HTML 页面中设置标题。

例子：

```
<html>
<head>
<title>YOUR TITLE</title>
<style type="text/css">
        html, body { margin: 0; padding: 0; height: 100%; }
        iframe {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            border: none; padding-top: 32px;
            box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;
        }
</style>
</head>
<body>
    <iframe src="http://www.nbc.com/"></iframe>
<body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T04:30:22.673

您在这样的页面标题中看到的文本是由浏览器决定的。您无法通过 PHP 更改它。在呈现 HTML 页面时，浏览器会查找`title`元素，但是，在其他所有内容中，它会根据您正在查看的页面的属性来选择标题。正如您猜到的那样，唯一的选择是创建一个 HTML 页面并通过标签引用图像并通过`img`标签更改标题`title`。

# zend-framework - 在 ZF 项目中将 memcache 放在哪里？

> ID：11999763
> 
> 赞同：0
> 
> 时间：2012-08-17T04:25:17.123
> 
> 标签：zend-framework, memcached, convention

我正在尝试在 ZendFrame 下构建的项目中采用 memcached。

首先，我在库中创建了一个 Memcached 类（这似乎有点不必要，因为它几乎只是封装了 memcache 提供的功能）

然后我想知道我应该在哪里使用它？

控制器还是映射器？

我可以看到两种方式都有其意义，这样做的传统方式是什么。

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:45:26.707

在 bootstrap.php 下，您需要使用返回 void 的 _initCache() 函数定义配置。

定义前端驱动程序、后端驱动程序（您将在其中物理保存数据）并加载工厂！

有两种类型的缓存，服务器和压缩。

如果选择服务器，则需要定义外部扩展（memcached是一个扩展）

我推荐的一个片段是：

```
function _initCache() {

        $frontendDriver = 'Core';
        $frontendOptions = array(
            'lifetime' => 7200, // cache lifetime of 2 hours
            'automatic_serialization' => true
        );

        $backendDriver = extension_loaded('memcache') ? 'Memcached' : 'File';
        $backendOptions = array();

        // getting a Zend_Cache_Core object
        $cache = Zend_Cache::factory($frontendDriver, $backendDriver, $frontendOptions, $backendOptions);

        Zend_Registry::set('Zend_Cache', $cache);
    } 
```

从缓存中获取数据：

```
$date = $cache->load($cacheKey); 
```

将数据保存到缓存中：

```
$cache->save($data, $cacheKey); 
```

你可以在哪里使用它？

在您的应用程序中的任何地方！

浏览这篇[好文章](http://zendcoding.com/how-to-use-memcached-in-the-zend-framework)。

任何问题？:)

# java - Quartz 作业没有更新数据库

> ID：11999765
> 
> 赞同：0
> 
> 时间：2012-08-17T04:25:36.893
> 
> 标签：java, scheduling, quartz-scheduler, crontrigger

我已经务实地触发了 Quartz 工作。但它不打算更新数据库。我的意思是，“ **PREV_FIRE_TIME** ”列没有得到更新。我已经运行了以下代码。

```
stdScheduler.triggerJob(jobName,jobGroupName); 
```

虽然，在正常的计划执行期间数据库正在更新，但如果我进行 Ad hoc 运行，它不会更新数据库。任何人都可以建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:15:09.930

我怀疑你的工作类没有在事务下运行。当石英接手工作并运行执行方法时，它位于不同的线程中。您需要将其包装在事务下。在春天，我会围绕执行方法设置事务建议。或者，您可以在应该为您完成工作的石英中将以下属性设置为 true：

```
org.quartz.scheduler.wrapJobExecutionInUserTransaction=true 
```

# php - 如何从特定目录回显指向 wp 页面的链接？

> ID：11999766
> 
> 赞同：0
> 
> 时间：2012-08-17T04:25:36.363
> 
> 标签：php, wordpress

这是我正在使用的代码：

`echo '<a href="' . bloginfo('template_directory') . $slug['slug'] . '">' . $post_type->labels->singular_name . '</a>' .$markup;`

它当前正确链接，但在链接之前显示整个 http 字符串。示例： http: [//www.blah.com/blah/blahPortfolio](http://www.blah.com/blah/blahPortfolio)。当它应该只是“投资组合”时。对此有新的看法会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:46:50.170

我可以看到两个错误：

1.  `<?php bloginfo('template_directory'); ?>`如果您正在使用`echo`它意味着`<?php`标签已经打开，所以只能使用`bloginfo('template_directory')`
2.  一个标签有两个结束标签 (ie `/>`) 你只使用一个 (ie `>`)

所以代码将是这样的：

```
echo '<a href="' . bloginfo('template_directory') . '/thepage.php' . $slug['slug'] . '">' . $post_type->labels->singular_name . '</a>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T04:32:50.607

试试这个代码块，让我知道——

```
echo '<a href="' . '<?php bloginfo('template_directory'); ?>'.'thepage.php />' . $slug['slug'] . '/">' . $post_type->labels->singular_name . '</a>'; 
```

# c++ - PID控制器，用于以速度行驶精确距离

> ID：11999776
> 
> 赞同：3
> 
> 时间：2012-08-17T04:28:05.760
> 
> 标签：c++, distance, ros

我试图通过以线速度发送消息来使模拟中的机器人移动精确的距离。现在我的实现并没有让机器人移动一个精确的距离。这是一些示例代码：

```
void Robot::travel(double x, double y)
{
    // px and py are the current positions (constantly gets updated as the robot moves in the simulation)
    // x and y is the target position that I want to go to
    double startx = px;
    double starty = py;
    double distanceTravelled = 0;

    align(x, y);
    // This gets the distance from the robot's current position to the target position
    double distance = calculateDistance(px, py, x, y);

    // Message with velocity
    geometry_msgs::Twist msg;
    msg.linear.x = 1;
    msg.angular.z = 0;

    ros::Rate loop_rate(10);
    while (distanceTravelled < distance)
    {
        distanceTravelled = calculateDistance(startx, starty, px, py);
        // Publishes message telling the robot to move with the linear.x velocity
        RobotVelocity_pub.publish(msg);
        ros::spinOnce();
        loop_rate.sleep();
    }
} 
```

我四处询问，有人建议使用 PID 控制器进行反馈循环可以解决这个问题，但是在阅读了 Wikipedia 页面后，我真的不明白在这种情况下我会如何使用它。维基百科页面有 PID 算法的伪代码，但我不知道什么对应于什么。

```
previous_error = setpoint - process_feedback
integral = 0
start:
  wait(dt)
  error = setpoint - process_feedback
  integral = integral + (error*dt)
  derivative = (error - previous_error)/dt
  output = (Kp*error) + (Ki*integral) + (Kd*derivative)
  previous_error = error
  goto start 
```

我将如何在速度和距离的背景下实现这一点？是距离误差吗？还是速度？有人可以帮忙吗？什么是积分？衍生物？克普？基？KD？ETC

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T04:45:37.783

对于您的问题，设定点将是 (x,y)。process_feedback 将是 (px,py)。输出将是您需要行驶的速度。Kp、Ki 和 Kd 是您可以调整以获得所需行为类型的参数。例如，如果 Kd 太低，您可以通过在接近目标时没有充分减速来射过目标。

PID 控制器需要考虑三件事：

## 错误：你想在哪里与你在哪里

这当然是一个很大的因素。如果您在 A 点并且您的目标在 B 点，那么从 A 到 B 的向量会告诉您很多关于您需要如何驾驶的信息，但这不是唯一的因素。

## 导数：你接近的速度有多快

如果你正在快速接近目标并且你已经接近它，你实际上需要放慢速度。导数有助于考虑到这一点。

## 积分：对齐错误

您的机器人实际上可能不会完全按照您的指示去做。积分有助于确定您需要补偿多少。

# emacs - Emacs 的 LESS 语法高亮显示

> ID：11999778
> 
> 赞同：2
> 
> 时间：2012-08-17T04:28:10.213
> 
> 标签：emacs, syntax-highlighting, less

有谁知道让LESS在emacs中工作的语法文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:04:28.117

您可能正在寻找一种[less-css emacs 模式](http://jdhuntington.com/emacs/less-css-mode.el)，这是一个`elisp`可以在您的`emacs`环境中加载的文件。另一个版本也可以在[github](https://github.com/purcell/less-css-mode/)中找到。

# exchange-server - 如何使用 Exchange Web 服务 CalendarView 进行分页

> ID：11999781
> 
> 赞同：14
> 
> 时间：2012-08-17T04:28:20.420
> 
> 标签：exchange-server, exchangewebservices

如果我这样做：

```
_calendar = (CalendarFolder)Folder.Bind(_service, WellKnownFolderName.Calendar);

var findResults = _calendar.FindAppointments(
    new CalendarView(startDate.Date, endDate.Date)
); 
```

我有时会收到一个异常，即找到了太多项目。

“您已超出查找操作可以返回的最大对象数。使用分页减小结果大小，然后重试您的请求。”

`CalendarView`支持一个让我指定的构造函数`MaxItemsReturned`，但我不知道如何再次调用它，指定`offset`for 分页。`ItemView`有这个构造函数：

```
 public ItemView(int pageSize, int offset) 
```

它的用法很明显。

怎么样`CalendarView`？如何使用 a 进行分页`CalendarView`？

我可以将日期范围缩短为更短的跨度，但仍然无法确定它是否会起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T19:21:59.460

[CalendarView](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.calendarview%28v=exchg.80%29)实际上并不是从[PagedView](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.pagedview%28v=exchg.80%29)派生的，因此您期望的所有分页逻辑都是不可能的。MaxItemsReturned 更多的是一个上限而不是页面大小。返回的错误与 PagedView 派生的视图类型更相关。

我玩弄了一些 PowerShell，通过根据返回的最后一个项目滚动 CalendarView 窗口来模拟分页，但不幸的是，CalendarView 和 Appointment 扩展背后的逻辑使得无法准确获得所需的内容。基本上，就像它进行扩展一样，它会在“N”个项目上停止，但您可能有不止一个在同一时间开始的约会，它可能会给您一个，而不是其余的。此外，任何与窗口重叠的约会都将被包括在内，因此如果日历上有 50 个约会的开始时间相同，则下面的代码将进入无限循环。

```
Add-Type -Path "C:\Program Files\Microsoft\Exchange\Web Services\1.2\Microsoft.Exchange.WebServices.dll"

$service = New-Object Microsoft.Exchange.WebServices.Data.ExchangeService
$cred = New-Object Microsoft.Exchange.WebServices.Data.WebCredentials ($user , $passwd)
$service.UseDefaultCredentials = $false
$service.Credentials = $cred
$service.AutodiscoverUrl($user)

$num=50
$total=0
$propsetfc = [Microsoft.Exchange.WebServices.Data.BasePropertySet]::FirstClassProperties
$calfolder = [Microsoft.Exchange.WebServices.Data.WellKnownFolderName]::Calendar

$service.UserAgent = "EWSCalViewTest"
$calview = New-Object Microsoft.Exchange.WebServices.Data.CalendarView("1/1/2012","12/31/2012", $num)
$calview.PropertySet = $propsetfc

do {
    $findresults = $service.FindAppointments($calfolder,$calview)
    write-host  "Found:" $findresults.Items.Count "of" $findresults.TotalCount
    $calview.StartDate = $findresults.Items[$findresults.Items.Count-1].Start
    $total+=$findresults.Items.Count
} while($findresults.MoreAvailable)
write-host $total "total found (including dups)" 
```

不幸的是，扩展和重叠逻辑意味着您将以这种方式得到重复，除了第一个调用之外，每个调用至少有一个重复。

如果我必须使用 CalendarView 编写代码，我可能会使用 1000 的 MaxItemsReturned（如果您不指定 MaxItemsReturned，这也是使您陷入错误状态的限制）。如果您在一个电话中获得所有信息，那您就很好。如果您必须进行第二次调用，那么您将不得不做一些额外的工作来对结果集进行重复数据删除。我还尝试通过在 CalendarView 中使用尽可能窄的日期窗口来限制服务器的负担，因为您要求 Exchange 计算整个时间跨度内定期约会的扩展。对于服务器来说，这可能是一项相当昂贵的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-28T19:21:47.907

您可以使用`ItemView`和`SearchFilter`查询约会：

```
var itemView = new ItemView(100, 0);
itemView.PropertySet = new PropertySet(BasePropertySet.IdOnly,
    ItemSchema.Subject, AppointmentSchema.Start, AppointmentSchema.End);

var filter = new SearchFilter.SearchFilterCollection(LogicalOperator.And,
    new SearchFilter.IsEqualTo(ItemSchema.ItemClass, "IPM.Appointment"),
    new SearchFilter.IsGreaterThanOrEqualTo(AppointmentSchema.Start, startDate),
    new SearchFilter.IsLessThan(AppointmentSchema.Start, endDate));

bool moreAvailable = true;
while (moreAvailable)
{
    var result = _service.FindItems(WellKnownFolderName.Calendar, filter, itemView);

    foreach (var appointment in result.OfType<Appointment>())
    {
        DateTime start = appointment.Start;
        DateTime end = appointment.End;
        string subject = appointment.Subject;

        // ...
    }

    itemView.Offset += itemView.PageSize;
    moreAvailable = result.MoreAvailable;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-02T19:49:18.533

您仍然可以对操纵 CalendarView 开始日期的 FindAppointments 函数进行分页。

```
var cal = CalendarFolder.Bind(_service, WellKnownFolderName.Calendar);
var cv = new CalendarView(start, end, 1000);

var appointments = new List<Appointment>();

var result = cal.FindAppointments(cv);

appointments.AddRange(result);

while (result.MoreAvailable)
{
     cv.StartDate = appointments.Last().Start;

     result = cal.FindAppointments(cv);

     appointments.AddRange(result);
} 
```

虽然我不知道他们是否按顺序排列。如果他们不这样做，您可能必须使用最后一个活动开始日期并删除重复项。

# jquery - 使用单个前进/后退控件从头开始制作简单的 jQuery 幻灯片

> ID：11999783
> 
> 赞同：0
> 
> 时间：2012-08-17T04:28:30.880
> 
> 标签：jquery, slider, slideshow, show-hide, carousel

我真的希望你们中的一些 jQuery 专家可以帮我解决这个问题。

我有一些看起来像这样的标记：

```
 <section id="carousel">
      <div>
        <ul>
          <li><a href=""><img src="img/placeholder.png" alt=""/></a></li>
          <li><a href=""><img src="img/placeholder.png" alt=""/></a></li>
          <li><a href=""><img src="img/placeholder.png" alt=""/></a></li>
          <li><a href=""><img src="img/placeholder.png" alt=""/></a></li>
        </ul>
      </div>
      <div>
        <ul>
          <li><a href=""><img src="img/placeholder.png" alt=""/></a></li>
          <li><a href=""><img src="img/placeholder.png" alt=""/></a></li>
          <li><a href=""><img src="img/placeholder.png" alt=""/></a></li>
          <li><a href=""><img src="img/placeholder.png" alt=""/></a></li>
        </ul>
      </div>
      <div>
        <ul>
          <li><a href=""><img src="img/placeholder.png" alt=""/></a></li>
          <li><a href=""><img src="img/placeholder.png" alt=""/></a></li>
          <li><a href=""><img src="img/placeholder.png" alt=""/></a></li>
          <li><a href=""><img src="img/placeholder.png" alt=""/></a></li>
        </ul>
      </div>
      <ul class="dots">
        <li class="active">•&lt;/li>
        <li>•&lt;/li>
        <li>•&lt;/li>
      </ul>

      <button>Previous</button>
      <button>Next</button>
    </section> 
```

我基本上只是想使用上一个/下一个按钮在任意数量的 div 之间无限循环，并将 .dots 上的 .active 类移动到相应的 li。只是不确定如何去做。我不想使用现成的解决方案，因为 A.) 我想保留标记*，* B.) 如果你们中的一个人有适合我的解决方案，我想对其进行逆向工程并扩展模型到我想到的更复杂的东西。

如果你们有想法，真的很感激一些例子。感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:42:02.307

*   要在 div 之间无限循环，您可以使用[`setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval?redirectlocale=en-US&redirectslug=window.setInterval)重复调用更改活动 div 的函数。或者，您可以[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)在该函数中使用，使其递归。

*   要移动`.active`类，您可以使用 jQuery[`.addClass()`](http://api.jquery.com/addClass/)和[`.removeClass()`](http://api.jquery.com/removeClass/)函数。

*   要通过按钮更改活动`<div>`，您可以将事件侦听器附加到它们，例如`$("#before").click()`和`$("#after").click()`。

# python - 如何通过金字塔显示多行文本

> ID：11999784
> 
> 赞同：0
> 
> 时间：2012-08-17T04:28:32.037
> 
> 标签：python, render, pyramid

我正在使用金字塔显示多行文本。如：

```
txt="""
abc
def
""" 
```

html 渲染（如 jinja2）没有段落标签，所以我将段落标签添加到 txt，但最后，它用转义渲染

```
&lt;p&gt; abc &lt;/p&gt; ... 
```

那么如何正确显示多行呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T04:35:56.507

是否将自动转义设置为 true 是不明确的，但如果是这种情况，那么在渲染时，请确保添加“|safe”。

即：{{post.render | 安全的 }}

更多关于转义的信息可以在这里找到：http: [//jinja.pocoo.org/docs/templates/#html-escaping](http://jinja.pocoo.org/docs/templates/#html-escaping)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T04:36:17.873

[`Working with automatic escaping`](http://jinja.pocoo.org/docs/templates/#working-with-automatic-escaping)in`jinja2`很容易 - 您可以在模板内应用`|safe`过滤器，或者传递给模板的变量应该是类型[`Markup`](http://jinja.pocoo.org/docs/api/#jinja2.Markup)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T04:33:02.670

\r\n 或 \n 不够？如果我理解您的问题，您只是想添加换行符。根据您的操作系统使用这些特殊字符序列

# sql - 简单的数据库表设计

> ID：11999786
> 
> 赞同：1
> 
> 时间：2012-08-17T04:28:47.087
> 
> 标签：sql, database-design

我正在尝试使用最佳实践来设计数据库结构，但我无法理解一些我确信是基本的东西。数据库供用户（100+）订阅他们阅读的杂志（100+）。

我有一个包含用户名、用户信息和杂志标题的表格，但我不确定在哪里列出每个用户关注的杂志。我是在用户表中添加一列并将其链接到杂志表，还是每个用户都设置有自己的“关注”表，其中列出了杂志？我让自己感到困惑，我认为任何帮助都会很棒。

问候

瑞安

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T04:31:40.957

您正在努力解决的问题称为[多对多](http://en.wikipedia.org/wiki/Many-to-many_%28data_model%29)关系。

为了解决这个问题，你需要第三个表——也许叫做`user_magazines`. 第三个表应该有两个关键字段，一个来自用户表，另一个来自杂志表。例如，`user_id`列和`magazine_id`列。这称为[复合键](http://en.wikipedia.org/wiki/Compound_key)。通过这两个列，您现在可以辨别哪个用户已经阅读了哪些书籍。

最好从视觉上理解：

![在此处输入图像描述](../Images/bad013acf3057987bc0809e676bf5811.png)

在上图中，您可以看到第三个表（中间表，`stock_category`）使我们能够知道哪些库存项目属于哪些类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T04:31:52.163

一个`User_To_Magazine`表，它有两列 -`UserId`和`MagazineId`，并且键是包含两列的组合

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T04:34:22.103

您应该有一个`users`表，其中包含自动递增的主键、用户名以及您想要存储的有关该用户的任何其他内容。

接下来，一个`magazines`包含另一个自动递增主键的表、杂志的名称以及您需要存储的关于该杂志的任何其他内容。

最后，一张`subscriptions`桌子。这应该有一个自动递增的主键（实际上这在这张表上并不是真正需要的，但我个人会添加它）、一个 user_ID 列和一个 magazine_ID 列。

要添加订阅，只需在订阅表中添加一条新记录，其中包含用户 ID 和相关杂志的 ID。这允许用户订阅多个杂志。

如果你想变得花哨，你可以给`subscriptions`表添加引用完整性约束——这告诉数据库管理系统一个特定的列是对另一个表的引用，并且可以指定修改它时要做什么（例如，你可以有 DBMS如果特定用户被删除，则自动删除该用户拥有的订阅）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T04:37:14.350

您应该创建一个名为`UserMagazineSubs`. 将`UserID`+ `MagazineTile`ID 设为复合键。

此表将捕获所有 `User`和`Magazine`关系详细信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T04:51:31.910

您绝对不想在用户表中添加一列并让它引用杂志表。用户只能关注或订阅一本不反映现实世界的杂志。

您将需要一个包含 userId 和 magazineId 的连接表。对于用户订阅的每本杂志，连接表中都会有一个条目。

我在推断您的表结构，但如果您有：

```
User (id, login)
Magazine (id, name)
User_Magazine (userId, magazineId) 
```

也许最后一个表应该称为订阅，因为可能还有其他信息，例如您想要跟踪的订阅结束日期，而这正是它在现实世界中所代表的。

您可以在 User_Magazine 表中为每个订阅添加一个条目。

如果您想查看登录 jdoe 的用户的所有杂志，您会这样做：

```
SELECT name 
  FROM User, Magazine, User_Magazine 
  WHERE login = 'jdoe'
    AND User.id = User_Magazine.userId
    AND Magazine.id = User_Magazine.magazineId 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T05:57:27.013

首先，您必须了解多对多关系，例如以用户和杂志为例。先了解一下场景：一个用户可以关注很多杂志，一个杂志可以关注很多用户，所以用户和杂志之间存在多对多的关系。

每当两个实体之间存在多对多关系时，我们必须在它们之间引入第三个实体，称为关联实体！

因此您必须根据您的选择引入第三个实体，它将包含有关哪个用户正在关注哪个杂志的信息

您可以访问[http://sqlrelationship.com/many-to-many-relationship/](http://sqlrelationship.com/many-to-many-relationship/)使用图表更好地理解

# iphone - 控件在调用 NSURLConnection 的委托方法之前返回

> ID：11999787
> 
> 赞同：0
> 
> 时间：2012-08-17T04:29:08.023
> 
> 标签：iphone, objective-c, ios

我必须上课 A 和 B 。我的 B 类具有与服务器连接的方法。我从类 AI 调用此方法已实现 NSURLConnection.class A 的委托，该委托具有检查连接功能，其返回类型为 BOOL 。我从这个方法调用B类的ping方法如下：A类：

```
-(BOOL)checkConnectivity:(Server *)newServer
{
    [b ping];
    return FALSE;
} 
```

B类：

```
-(void)ping
{

    NSURL *url=[[NSURL alloc]initWithString:@"my url"];
    request=[NSMutableURLRequest requestWithURL:url];
    connection=[[NSURLConnection alloc]initWithRequest:request delegate:self];

    if(connection)
    {
        webData=[NSMutableData data];
    }
}

-(void) connection:(NSURLConnection *)connection didReceiveData:(NSData *) data
{
    [webData appendData:data];
}

-(void) connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"Finished loading");   
} 
```

网址没有问题。那怎么了？为什么委托方法没有调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T04:50:10.593

检查你是否添加了这个：

```
@interface yourViewController : UIViewController <NSURLConnectionDelegate> 
```

现在在您的 ping 方法中执行此操作：

```
 NSURLConnection * connection = [[NSURLConnection alloc] 
                            initWithRequest:request
                                   delegate:self startImmediately:NO];

[connection scheduleInRunLoop:[NSRunLoop mainRunLoop] 
                  forMode:NSDefaultRunLoopMode];
 [connection start] 
```

# javascript - 根据条件执行函数

> ID：11999789
> 
> 赞同：0
> 
> 时间：2012-08-17T04:29:33.107
> 
> 标签：javascript

我想写这样的东西：

```
function MyFunction () { .... return SomeString; }
function SomeFunction () { ... return SomeOtherString; }

function SomeCode() {

  var TheFunction;

  if (SomeCondition) {

    TheFunction = SomeFunction;

  } else {

    TheFunction = SomeCode;
  }

  var MyVar = TheFunction(); // bugs here
} 
```

基本上，我想在评估某些条件后执行一个函数，以便 MyVar 包含的变量包含已调用函数的结果。

我缺少什么来完成这项工作？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T04:31:40.170

如果您只是在谈论有条件地执行一个函数并存储结果......

```
var result;

if( condition ){
   result = foo();
}else{
   result = bar();
}

var myVar = result; 
```

如果要确定*要*调用的函数，但要等到下次再调用它，请使用：

```
// define some functions
function foo(){ return "foo"; }
function bar(){ return "bar"; }

// define a condition
var condition = false;

// this will store the function we want to call
var functionToCall;

// evaluate
if( condition ){
   functionToCall = foo; // assign, but don't call
}else{
   functionToCall = bar; // ditto
}

// call the function we picked, and alert the results
alert( functionToCall() ); 
```

回调在 JS 中可能非常有用......它们基本上告诉消费者“当你认为合适时调用它”。

`ajax()`这是传递给 jQuery方法的回调示例。

```
function mySuccessFunction( data ){
    // here inside the callback we can do whatever we want
    alert( data ); 
}

$.ajax( {
    url: options.actionUrl,
    type: "POST",

    // here, we pass a callback function to be executed in a "success" case.
    // It won't be called immediately; in fact, it might not be called at all
    // if the operation fails.
    success: mySuccessFunction
 } ); 
```

# ios - 扩展背景 Objective-C

> ID：11999790
> 
> 赞同：0
> 
> 时间：2012-08-17T04:29:40.047
> 
> 标签：ios, multitasking

我正在进行越狱调整，涉及多任务切换器托盘打开比正常高一点...这导致亚麻背景图像上方有一个黑条...如何扩展亚麻图像，或以某种方式重复它让它看起来无缝？

亚麻布在 SBAppSwitcherBarView 类中

它被称为 SBLinenView

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T19:26:46.883

您需要创建一个新的`SBLinenView`并将其放置在您想要扩展它的位置。您可以使用`SBLinenView`'s来执行此操作，`+(id)squareImageForBounds:(CGRect)bounds`它返回您传递的边界的平方`UIImag`e。

# .net - .NET 中的消息框架方法优缺点

> ID：11999792
> 
> 赞同：5
> 
> 时间：2012-08-17T04:29:56.533
> 
> 标签：.net, sockets

我正在研究我所知道的两种不同 TCP 消息成帧方法的优缺点。

1.  Delimited：通过使用分隔符字节将 TCP 流分成非固定长度的消息。发送数据时，例程必须检查消息数据的分隔符并将其转义以确保消息帧的安全传输。接收数据时，例程必须通读流，寻找分隔符字节以将帧分解为消息。

EG: 用户 [用户名]\n密码 [密码]\n

1.  Length-Prefixed：通过使用 4 个字节的前缀来说明消息的长度，将 TCP 流分成预定大小的消息。接收数据时，例程将首先读取前缀以确定消息帧的长度。发送数据时，例程必须在传输前为消息添加长度前缀。

EG: [MessageLength]User [Username][MessageLength]Password [Password]

这两种方法都允许传输大小不同并包含要解释的字节流的消息帧。更高级别的消息结构或协议是不相关的。

* * *

因此，我将注意力集中在可扩展性和性能效率上。我发现自己需要运行基准测试，看看哪种方法可以在不涉及任何消息处理的情况下获得最大的效率吞吐量。

* * *

我目前的想法，无论如何我都不是专家。

定界消息帧在接收例程期间效率较低，因为需要检查流中的每个字节是否有消息帧定界符。长度前缀消息帧将始终读取前缀字节，并且消息帧流的其余部分将直接进入缓冲区而不进行处理，直到接收到整个消息帧。

其中长度前缀消息帧在发送例程期间作为消息前缀在消息本身之前传输的效率较低。

* * *

我能想到的其他因素可能包括：

*   大量小消息帧将导致为长度前缀结构传输更多数据包。
*   使用 Length-Prefixed 结构可以更有效地处理大量较大的消息帧，因为不会读取每个字节来检查分隔符。

* * *

这个主题的任何亮点都会很棒。我发现很难找到关于 TCP 消息帧结构之间差异的好的资源。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T04:51:58.553

根据我的经验，首选长度前缀，消息的解析代码往往更容易编写。

此外，对于消息分隔符，如果消息有效负载可能包含分隔符，您需要找出转义方案。

我遇到了与有效负载无关的第三种方案。它定义了具有已知格式的不同消息类型，消息的不同部分可以是固定长度或可变长度。（固定为简单类型和变量是数组和字符串）。该结构预先在客户端和服务器之间共享。发送消息时，消息以消息类型编号为前缀。从消息类型号接收部分可以推断出如何解析消息。LysKOM 消息系统的[协议](http://www.lysator.liu.se/lyskom/protocol/11.1/)
就是一个例子。 该协议具有可用于生成解析器代码的正式规范。

# iphone - 如何在 iPhone 中分享照片

> ID：11999796
> 
> 赞同：0
> 
> 时间：2012-08-17T04:30:09.063
> 
> 标签：iphone, objective-c, photo-gallery

使用下面的代码，我们可以通过 android 上的可用服务共享照片。谁能告诉我在 iPhone 上分享照片的等效方法？提前致谢。

```
 Intent share = new Intent(Intent.ACTION_SEND);
            share.setType("image/*");
            share.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://"+photoPath));
            startActivityForResult(Intent.createChooser(share, "Share Image"), SHARE_CONSTANT); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:39:06.553

我认为在您的情况下用于共享文本、图片等内容的最佳方法是[Sharekit](http://getsharekit.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:34:25.040

如果你想在 Facebook 上做，只需在你的项目中导入 Facebook SDK 并实现 API。

对于 twitter，iOS 中有深度集成。您可以简单地导入 Twitter 框架并调用所需的方法。您将能够执行以下操作：

```
TWTweetComposeViewController *twitter = [[TWTweetComposeViewController alloc] init];
[twitter addImage:[UIImage imageNamed:@"someImage.png"]]; 
```

**这不是完整的代码。**关于如何添加 Twitter 集成，请查看此视频：[http ://www.youtube.com/watch?v=PtCtcx6CgOA](http://www.youtube.com/watch?v=PtCtcx6CgOA)

# validation - 验证失败时如何跳过 PreRenderView 事件？

> ID：11999802
> 
> 赞同：1
> 
> 时间：2012-08-17T04:30:50.987
> 
> 标签：validation, jsf, jsf-2

我有一个用例，我想验证一堆 viewParams，如果我发现验证错误，跳过 preRenderView 事件并只显示错误消息。这可能吗？

例如

```
<f:metadata>
            <f:viewParam id="param1" name="p1" value="#{someBean.param1}" />
            <f:viewParam id="param2" name="p2" value="#{someBean.param2}" />
            <f:event type="javax.faces.event.PostValidateEvent" listener="#{someBean.validateParams}" />
            <f:event type="javax.faces.event.PreRenderViewEvent" listener="#{someBean.viewAction}" />
        </f:metadata> 
```

方法 validateParams() 用于进行多字段验证，可能会像这样：

```
 public void validateParams(ComponentSystemEvent event) {
       UIComponent source = event.getComponent();

       Integer value1 = (Integer) ((UIInput) source.findComponent("param1")).getLocalValue();
       Integer value2 = (Integer) ((UIInput) source.findComponent("param2")).getLocalValue();

       boolean valid1 = validOneField(value1);
       boolean valid2 = validOneField(value2);
       boolean valid12 = validBothFields(valid1, valid2);

       if(!valid1);//add facesMessage
       if(!valid2);//add facesMessage
       if(!valid12);//add facesMessage

       if (!valid1 || !valid2 || !valid12)
          FacesContext.getCurrentInstance().renderResponse();
    } 
```

我的理解是，无论强制渲染响应如何，仍会调用 viewAction() 。我可以轻松修改 viewAction() 以将验证考虑在内，但由于其他原因（该方法中有一些我宁愿不接触的杂乱代码等），我想完全跳过它。有没有办法可以完全绕过 viewAction() 并显示验证错误消息？

**编辑：使用 FacesContext.getCurrentInstance().ValidationFailed() 的 BalusC 建议**

我已将 validateParams() 修改为：

```
 public void validateParams(ComponentSystemEvent event) {
       UIComponent source = event.getComponent();

       Integer value1 = (Integer) ((UIInput) source.findComponent("param1")).getLocalValue();
       Integer value2 = (Integer) ((UIInput) source.findComponent("param2")).getLocalValue();

       boolean valid1 = validOneField(value1);
       boolean valid2 = validOneField(value2);
       boolean valid12 = validBothFields(valid1, valid2);

       if(!valid1);//add facesMessage
       if(!valid2);//add facesMessage
       if(!valid12);//add facesMessage

       if (!valid1 || !valid2 || !valid12)
          FacesContext.getCurrentInstance().ValidationFailed();
          FacesContext.getCurrentInstance().renderResponse();
    } 
```

和修改后的 viewAction() 如下：

```
public void viewAction(ComponentSystemEvent cse) {
    if(!FacesContext.getCurrentInstance().isValidationFailed()) {
        // viewAction() code
    }
} 
```

这似乎现在对我有用。希望 JSF 2.2 中的视图操作不需要我检查验证是否失败，因为我相信它们根本不会被调用（FacesContext.renderResponce() 将跳过调用应用程序步骤，这是调用视图操作的地方） .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:38:46.107

你可以检查[`FacesContext#isValidationFailed()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#isValidationFailed%28%29)一下。

```
public void viewAction() {
    if (!FacesContext.getCurrentInstance().isValidationFailed()) {
        // ...
    }
} 
```

由于您`Validator`出于某种不清楚的原因手动执行验证而不是使用 JSF 标准（您是否清楚可以指定 a`validator`和on ？） `<f:validator>`，您需要 在验证失败时手动调用。`<f:validateXxx>``<f:viewParam>``FacesContext#validationFailed()`

# excel - 查找工作簿是使用 VBA 打开还是由用户打开

> ID：11999806
> 
> 赞同：0
> 
> 时间：2012-08-17T04:31:24.293
> 
> 标签：excel, excel-2007, vba

我有一个带有工作簿打开事件的宏工作簿 Excel 2007。在工作簿打开事件中，我可以找到用户是否从 Windows 或使用 vba 的另一个工作簿打开工作簿...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:14:29.537

我不确定它是否符合您的需求，但您可以在 VBA 代码中打开工作簿而不触发事件：

```
'Disable Events.
Application.EnableEvents = False

'Open your book.
Workbooks.open(Filename)

'Enable Events.
Application.EnableEvents = True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T00:10:16.437

如果这适合您的目的：

使用vba打开时，打开前更改工作簿的名称。然后在完成后将其更改回来。Workbook_Open 过程只需要检查它所在的工作簿的名称。

更改工作簿的名称

您可以打开它，然后使用 SaveAs 方法以新名称再次关闭它

使用外壳函数

使用 Microsoft 脚本运行时对象。

# android - 滚动 ListView 时抛出 OutofMemoryException

> ID：11999813
> 
> 赞同：1
> 
> 时间：2012-08-17T04:31:52.037
> 
> 标签：android, android-listview, out-of-memory, fatal-error

如果我们`Listview`快速滚动，应用程序会抛出一个致命异常`OutofMemoryError`。

滚动时它总是给出相同的错误。如何处理？

```
public class UpcomingAdapter extends BaseAdapter{
    Typeface typeFace;
    private ArrayList<String> mEventName,mDate,mTime;
    private LayoutInflater mInflater;

    public UpcomingAdapter(LayoutInflater mInflater,
                           ArrayList<String> mDEventName,
                           ArrayList<String> mDdate,
                           ArrayList<String> mDtime,
                           Typeface typeface)
    {
        this.mEventName=mDEventName;
        this.mDate=mDdate;
        this.mTime=mDtime;       
        this.mInflater=mInflater;
        this.typeFace=typeface;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int arg0, View view, ViewGroup parent) {
        ViewHolder holder = null;

        if(view==null) {
            holder=new ViewHolder();
            view=mInflater.inflate(R.layout.upcomingevent_list,null);
            view.setTag(holder);
            holder=(ViewHolder) view.getTag();
            holder.holderDate=(TextView)view.findViewById(R.id.xTvUpcomingEvents_DateList);
            holder.holderEventName=(TextView)view.findViewById(R.id.xTvUpcomingEvents_Events);
            holder.holderEventName.setTypeface(typeFace);
            holder.holderDate.setTypeface(typeFace);
        } else {
            holder=(ViewHolder) view.getTag();  
        }

        //holder.employeeName.setTag(mEmpIds.get(arg0));
        setText(mEventName.get(arg0), holder.holderEventName);
        setText(mDate.get(arg0), holder.holderDate);
        setText(mTime.get(arg0), holder.holderEventName);

        holder.holderEventName.setTag(mEventName.get(arg0));
        holder.holderEventName.setTypeface(typeFace);

        //holder.holderArtistId.setTypeface(typeFace);

        return view;
    }

    public static class ViewHolder{
        TextView holderEventName;
        TextView holderDate;

        //TextView holderArtistId;
    }

    private void setText(String data,TextView view){
        if(data.equals(StaticUtils.sNullString)){
            view.setText(StaticUtils.sEmptyString);
        } else {
            view.setText(data);
        }
    }
} 
```

这是错误：

```
08-17 15:08:22.950: E/AndroidRuntime(25423): FATAL EXCEPTION: main
08-17 15:08:22.950: E/AndroidRuntime(25423): java.lang.OutOfMemoryError: [memory exhausted]
08-17 15:08:22.950: E/AndroidRuntime(25423):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T05:04:54.420

在您的 getView 方法中尝试：

```
@Override
    public View getView(int arg0, View view, ViewGroup parent) {

        if(view==null) {
            LayoutInflater layoutInflater=LayoutInflater.from(getContext());
            view=layoutInflater.inflate(R.layout.upcomingevent_list, parent, false);
            holder=new ViewHolder();
            holder.holderDate=(TextView)view.findViewById(R.id.xTvUpcomingEvents_DateList);
            holder.holderEventName=(TextView)view.findViewById(R.id.xTvUpcomingEvents_Events);
            holder.holderEventName.setTypeface(typeFace);
            holder.holderDate.setTypeface(typeFace);
            view.setTag(holder);
        } else {
            holder=(ViewHolder) view.getTag();  
        }

        //holder.employeeName.setTag(mEmpIds.get(arg0));
        setText(mEventName.get(arg0), holder.holderEventName);
        setText(mDate.get(arg0), holder.holderDate);
        setText(mTime.get(arg0), holder.holderEventName);

        holder.holderEventName.setTag(mEventName.get(arg0));
        holder.holderEventName.setTypeface(typeFace);

        //holder.holderArtistId.setTypeface(typeFace);

        return view;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:25:41.203

您还可以覆盖活动的 onLowMemory() 方法，并在活动检测到内存不足时运行垃圾收集器。您可以使用 System.gc()。还要取消此方法中不需要的变量。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-17T04:36:32.773

**用您现有的代码替换以下方法。**

```
 @Override
        public int getItem(int position) {
            return <Return Particular int variable from Data>;
        }

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return <Return Particular int variable from Data>;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return <Return Particular int variable from Data>;
} 
```

# binary-search-tree - “编程珍珠”：搜索

> ID：11999817
> 
> 赞同：3
> 
> 时间：2012-08-17T04:32:20.610
> 
> 标签：binary-search-tree, programming-pearls

我们可以通过将可用节点的集合保存在自己的结构中来避免对存储分配器的多次调用。

这个思想可以应用于二叉搜索树数据结构。

作者说：“**一次分配所有节点可以大大减少树的空间需求，从而减少大约三分之一的运行时间。** ”

我很好奇这个技巧如何减少空间需求。我的意思是如果我们要构建一个有四个节点的二叉搜索树，我们需要为这四个节点分配内存，无论我们是一个一个分配节点还是一次性分配所有节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T04:51:05.283

众所周知，内存分配器不擅长分配非常小的对象。在过去十年中，情况有所改善，但书中的技巧仍然适用。

大多数分配器在分配给您的块中保留附加信息，以便它们可以正确释放内存。例如C的/对或`malloc`C ++的/对需要将实际内存块的长度信息保存在某处；通常，这些数据在返回给您的地址之前的四个字节中结束。`free``new[]``delete[]`

这意味着每次分配至少会浪费四个额外的字节。如果您的树节点占用 12 个字节（两个指针各占 4 个字节，数字占 4 个字节），则将为每个节点分配 16 个字节 - 增加 33.3%。

内存分配器还需要执行额外的簿记。每次从堆中取出一个块时，分配器都必须考虑它。

最后，你的树使用的内存越多，在处理当前节点时，相邻节点在缓存中被获取的机会就越小，因为内存中到下一个节点的距离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T04:37:52.160

这与 Java 如何处理字符串有关。而当你连接到一个字符串时，你实际上是在使用 3 个字符串对象：旧字符串、新段和新结果。最终垃圾收集器清理干净，但在这种情况下（我的字符串示例和您的程序二进制搜索） - 您正在以一种浪费的方式增加内存空间。至少我是这么理解的。

# iphone - 我如何使用 UISlider 在 iphone 中更改 MKMapView zoomIn 和 ZoomOut？

> ID：11999818
> 
> 赞同：0
> 
> 时间：2012-08-17T04:32:31.667
> 
> 标签：iphone, mkmapview, uislider

我如何使用 UISlider 更改 MKMapView 的缩放值。

我试过这段代码，但工作不完美，

```
- (IBAction)slideAction:(id)sender 
   {

    span.latitudeDelta = 125*(1-slideValue.value)+0.01;
    span.longitudeDelta = 0.001;
    region.span = span;
    region.center=map.centerCoordinate;
    [map setRegion:region animated:TRUE];

   } 
```

有什么建议么？我认为他们不是 MKMap 的默认缩放控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T04:46:54.887

请注意，您的 longitudeDelta 需要更改，否则它可能不会缩放。

您可能会发现这很有用：[https ://github.com/calabash/calabash-ios-server/blob/master/calabash/Classes/MapKit/MKMapView%2BZoomLevel.m](https://github.com/calabash/calabash-ios-server/blob/master/calabash/Classes/MapKit/MKMapView%2BZoomLevel.m)

[（我从http://troybrant.net/blog/2010/01/set-the-zoom-level-of-an-mkmapview/](http://troybrant.net/blog/2010/01/set-the-zoom-level-of-an-mkmapview/)复制了大部分内容）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T08:07:12.320

```
//
//  ViewController.m
//  MapKitRegion

#import "ViewController.h"
#import <MapKit/MapKit.h>
#import <CoreLocation/CoreLocation.h>
#import <AddressBook/AddressBook.h>

@interface ViewController () <MKMapViewDelegate>

@property (strong, nonatomic) IBOutlet UITextView *txtAddress;
@property (strong, nonatomic) IBOutlet UIButton *btnGetMap;
@property (strong, nonatomic) IBOutlet UISegmentedControl *segType;
@property (strong, nonatomic) IBOutlet UISlider *slideZoom;
@property (strong, nonatomic) IBOutlet MKMapView *mapView;

@property CLLocationCoordinate2D coord;

- (IBAction)btnGetMapTouched:(id)sender;
- (IBAction)segTypeChanged:(id)sender;
- (IBAction)slideZoomChanged:(id)sender;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    _mapView.delegate = self;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

- (IBAction)btnGetMapTouched:(id)sender {
    CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    [geocoder geocodeAddressString:self.txtAddress.text
                 completionHandler:^(NSArray *placemarks, NSError *error) {
                     if (error) {
                         NSLog(@"Geocode failed with error: %@", error);
                         return;
                     }
                     if(placemarks && placemarks.count > 0) {
                         CLPlacemark *placemark = placemarks[0];
                         _coord = placemark.location.coordinate;
                         _mapView.centerCoordinate = _coord;

                        [self SetZoom];
                     }
                 }];
}

- (IBAction)segTypeChanged:(id)sender {
    if (self.segType.selectedSegmentIndex == 0)
        _mapView.mapType = MKMapTypeStandard;
    else
        _mapView.mapType = MKMapTypeSatellite;
}

- (IBAction)slideZoomChanged:(id)sender {
    [self SetZoom];
}

- (void) SetZoom {
    int meters = self.slideZoom.value * 30000;
    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance (_coord, meters, meters);

    [_mapView setRegion:region animated:NO];
}

@end 
```

# java - 单元测试中的@Transactional 阻止调用@PostLoad

> ID：11999825
> 
> 赞同：9
> 
> 时间：2012-08-17T04:33:28.177
> 
> 标签：java, spring, hibernate, unit-testing, jpa

我有以下测试：

```
public class Book
{
     public boolean postLoadInvoked;
     @PostLoad
     private void onPostLoad()
     {
         postLoadInvoked = true;
     }
}

public class MyIntegrationTest extends AbstractIntegrationTest
{
     @Autowired
     private BookDAO bookDAO;

     @Test
     public void loadBooks()
     {
          Book book = bookDAO.findOne(...);
          assertTrue(book.postLoadInvoked);
     }  
} 
```

此测试按原样通过，但如果我将`@Transactional`注释添加到测试类，它会失败：

```
@Transactional
@TransactionConfiguration(defaultRollback=true)
public class MyIntegrationTest extends AbstractIntegrationTest 
```

为什么配置测试`@Transactional`会影响 JPA 回调方法？

***编辑***

DAO 只是一个 Spring Data 存储库，因此没有逻辑：

```
public interface BookDAO extends
   JpaRepository<Book, Long>, 
   QueryDslPredicateExecutor<Book> {} 
```

事务管理器还有一个标准配置：

```
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
    <property name="dataSource" ref="dataSource" />
</bean>

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan">
        <list>
            <value>com.mangofactory.example</value>
        </list>
    </property>
    <property name="persistenceUnitName" value="spring-test" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true" />
            <property name="generateDdl" value="true" />
            <property name="databasePlatform" value="org.hibernate.dialect.H2Dialect" />
        </bean>
    </property>
</bean>

<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="org.h2.Driver" />
    <property name="url" value="jdbc:h2:mem:test;DB_CLOSE_DELAY=-1" />
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T06:15:33.220

我不确定您正在使用什么 Spring 版本，或者 AbstractIntegrationTest 是否正在扩展某些东西，但要检查的一件事是，在您的层次结构中，您的测试应该扩展一些抽象事务上下文感知弹簧测试类。

我正在考虑的课程：

```
org.springframework.test.AbstractTransactionalSpringContextTests
org.springframework.test.AbstractTransactionalDataSourceSpringContextTests 
```

或一些 jUnit 风格（取决于您使用的版本）：

```
org.springframework.test.context.junit4.AbstractTransactionalJUnit4SpringContextTests
org.springframework.test.context.junit38.AbstractTransactionalJUnit38SpringContextTests 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:22:28.137

我可以想到两个原因：

1.  `@PostLoad`仅在事务提交后执行。不太可能。

2.  你是如何启用交易的？你指定了`proxyTargetClass = true`吗？否则，你会得到奇怪的行为。

# php - 在具有列名的关联数组中循环

> ID：11999834
> 
> 赞同：0
> 
> 时间：2012-08-17T04:34:59.560
> 
> 标签：php, mysql

我创建了如下关联数组

```
$query = "SELECT word,meaning1,meaning2 FROM dictionary";   
$results = $db->exeQuery($query);
$arrDictionary = array();
while($line = mysql_fetch_array($results, MYSQL_ASSOC))
{
$arrDictionary[] = $results;
} 
```

然后我遍历另一个单词数组列表

```
foreach ($file_array as $value) 
{

} 
```

在这个循环中，对于每个单词，我需要找到meaning1 和meaning2。尝试了很多方法，但没有成功。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T04:40:20.763

我认为

```
while($line = mysql_fetch_array($results, MYSQL_ASSOC))
{
$arrDictionary[] = $results;
} 
```

应该替换为

```
while($line = mysql_fetch_assoc($results))
{
$arrDictionary[] = $line;
} 
```

和

```
foreach ($arrDictionary as $value) 
{
     echo $value['field_name'];
} 
```

# javascript - 强制 window.open() 在 chrome 中创建新标签

> ID：11999837
> 
> 赞同：26
> 
> 时间：2012-08-17T04:35:27.690
> 
> 标签：javascript, google-chrome, tabs

我使用 window.open 来填充具有不同内容的新窗口。主要是来自自动化流程的报告和存储的 HTML。

我注意到 Chrome 在 window.open() 方面的一些非常不一致的行为。

我的一些调用将创建一个新选项卡（首选行为）和一些导致弹出窗口。

```
var w = window.open('','_new');
w.document.write(page_content); 
```

page_content 只是来自 AJAX 调用的常规 HTML。报告在标题中包含一些信息，如标题、网站图标和一些样式表。

在 IE9 中，代码确实会导致新标签页而不是弹出窗口，而 Chrome 则断然拒绝在新标签页中显示相关内容。由于内容是敏感的业务数据，我无法在此处发布。如果可以，我会回答问题。

我知道有些人会说这是用户的行为，但这是一个内部业务平台。我们没有时间培训所有用户如何管理弹出窗口，我们只需要将它放在新标签中即可。哎呀，即使是新窗口也比弹出窗口更可取，因为您无法在 Chrome 中停靠弹出窗口。更不用说任何弹出窗口阻止代码都会影响它。

欣赏任何见解。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-31T17:48:46.580

window.open 必须在由用户操作（例如 onclick）触发的回调中调用，以便页面在新选项卡而不是窗口中打开。

例子：

```
$("a.runReport").click(function(evt) {
    // open a popup within the click handler
    // this should open in a new tab
    var popup = window.open("about:blank", "myPopup");

    //do some ajax calls
    $.get("/run/the/report", function(result) {
        // now write to the popup
        popup.document.write(result.page_content);

        // or change the location
        // popup.location = 'someOtherPage.html';
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T03:27:57.367

你可以试试这个：

```
<a href="javascript:openWindow();">open a new tab please</a>

<script>
    function openWindow(){
        var w = window.open("about:blank");
        w.document.write("heheh new page opened");
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-10T17:50:55.847

很简单，为了强制 Chrome 在新标签页中打开，使用 onmouseup 事件

`onmouseup="switchMenu(event);"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-04T15:33:03.357

我已经尝试过了，它在 chrome 中运行良好。如果在用户操作（例如鼠标单击）上打开新选项卡，这将正常工作，没有任何问题。但如果代码在另一个脚本块中执行，您可能需要在 chrome 中启用弹出窗口。看起来这是处理所有点击诱饵网站。

```
let newTab = window.open('', '_blank');
if (this.viewerTab == null) {
  console.log("opening in new tab to work, pop-ups should be enabled.");
  return;
}

................

newTab.location.href = viewerUrl; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-17T04:39:22.013

```
window.open('page.html', '_newtab'); 
```

指定“_newtab”。这适用于 IE 和 FF，并且应该适用于 Chrome。但是，如果用户将内容配置为不在新选项卡中打开，那么您无能为力。

# python - 在 Django 中创建了一个新模型。但它没有出现在数据库中

> ID：11999840
> 
> 赞同：1
> 
> 时间：2012-08-17T04:35:59.637
> 
> 标签：python, django, django-models

我将 Django 1.1.4 与 python 2.6 一起使用。我刚刚在模型列表中添加了一个新模型并使用了 syncdb 命令，但它没有显示在数据库中。我已经确保在 Meta 类中使用“my_app”名称作为应用标签。我还尝试创建一个新数据库并再次同步所有模型，但奇怪的是我的模型是唯一没有同步的模型。下面我已经包含了代码：

```
from django.db import models
from coredump.analyzer.models.model import ExtendedModel

class Netpath(ExtendedModel):

 buildno=models.IntegerField()
 path = models.CharField(max_length=300)

 class Meta:
  app_label = 'analyzer'
  ordering = ['buildno']

 def __unicode__(self):
  return '%d' % self.buildno 
```

扩展模型是我制作的另一个模型，它与框架中的其他模型完美配合。添加它的代码也不会那么有用。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:48:37.297

`syncdb`只会为在`<app>.models`. 如有必要，将模型类导入那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:06:54.040

你的新模型是在一个新的应用程序上吗？在这种情况下，不要忘记在 INSTALLED_APPS 设置中添加新应用...

事实上，django 绝对不神秘也不神奇。

# node.js - 使用身份验证的 MongoDB / Mongoose 3.x 的副本集故障转移/重新连接代码的一个很好的例子是什么？

> ID：11999845
> 
> 赞同：2
> 
> 时间：2012-08-17T04:36:59.090
> 
> 标签：node.js, mongodb, replication, mongoose

我正在模拟 MongoDB 副本集降级并尝试让我的应用程序和驱动程序自动使用新的主要成员，而无需重新启动我的应用程序。现在，一旦发生降级，查询就会挂起并最终超时。

有人可以分享一些与 Mongoose 3.x 和最新版本的 mongodb-node-native 驱动程序（1.1.2）一起使用的正确配置的副本集连接字符串的示例代码吗？

**请注意**：我正在使用身份验证。这是一个 2 Node + 1 Arbiter 设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T05:06:43.793

请升级到 mongoose 3.0.2，其中包含 3.x 版本的修复程序。

# java - 如何修复动画（Java）需要帮助=]

> ID：11999847
> 
> 赞同：0
> 
> 时间：2012-08-17T04:37:22.257
> 
> 标签：java, animation, graphics, acm-java-libraries

该程序检测左右箭头键。如果按下这些键中的任何一个，作为 GImage 类实例的 Knight 对象将通过字符串数组（这些字符串是 Knight 对象动画的目录路径。

我的代码的问题是我似乎无法使用我想出的 java 代码找到合适的流畅动画。当我按下箭头键时，动画快速循环，然后变慢，但是当我抬起箭头键并再次按下时，动画仍然快速循环，然后变慢。

每个动作动画有 4 帧动画。

这是对我正在使用的库的引用 [http://jtf.acm.org/javadoc/student/acm/graphics/GObject.html#pause%28double%29](http://jtf.acm.org/javadoc/student/acm/graphics/GObject.html#pause%28double%29)

任何提示表示赞赏。

```
import java.awt.event.KeyEvent;

import acm.graphics.GImage;

import acm.program.GraphicsProgram;

public class Castlevania extends GraphicsProgram {

    public void init(){
        setGameBackground();
        knight = new Knight("knight anim/knightFaceLeft/knight1.png", 500, 500);
        add(knight);
        setSize(APPLICATION_WIDTH, APPLICATION_HEIGHT);
        addKeyListeners();

    }

    private void setGameBackground() {
        // TODO Auto-generated method stub
        gameBackgroundImage = new GImage("link sprites/zelda_background.png");
        add(gameBackgroundImage);
    }

    public void keyPressed(KeyEvent e){ 

        /* Knight's Movement
         * 
         */
        int knightMovementKey = e.getKeyCode();
        if(knightMovementKey == KeyEvent.VK_LEFT)
        {

            this.xSpeed = 10;
            ySpeed = 0;

            knight.setImage(KnightFaceLeft[knightFrame]);
            knight.move(-xSpeed, ySpeed);

            knightFrame ++; 

            if(knightFrame >= KnightFaceLeft.length)
            {
                knightFrame = 0;
            }

        }

        else if(knightMovementKey == KeyEvent.VK_RIGHT){

            knight.setImage(KnightFaceRight[knightFrame]);
            knight.move(xSpeed,ySpeed);
            knightFrame++;

            this.xSpeed = 10;
            ySpeed = 0;

            if(knightFrame>=KnightFaceRight.length){

                knightFrame = 0;
            }

        }
        knight.pause(DELAY);
    }

    private String[] KnightFaceLeft = {"knight anim/knightFaceLeft/knight1.png","knight anim/knightFaceLeft/knight2.png","knight anim/knightFaceLeft/knight3.png","knight anim/knightFaceLeft/knight4.png"}; //Add in as many images as you want for your animation
    private String[] KnightFaceRight = {"knight anim/knightFaceRight/knight1.png","knight anim/knightFaceRight/knight2.png","knight anim/knightFaceRight/knight3.png","knight anim/knightFaceRight/knight4.png"}; 
    private GImage gameBackgroundImage;
    private Knight knight;
    private final int APPLICATION_WIDTH = 1200;
    private final int APPLICATION_HEIGHT = 800;
    private int knightFrame = 0;
    private int xSpeed ; //the number of pixels to move in x
    private int ySpeed = 0; //0 so you only move horiontally
    private double DELAY = 35;
}

import acm.graphics.GImage.*;

public class Knight extends GImage {

                public Knight(String imageDirectory, double knight_Location_XCoord, double knight_Location_YCoord) {
                    super(imageDirectory,knight_Location_XCoord, knight_Location_YCoord);
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T04:51:15.923

您的调用`pause()`正在阻塞[事件调度线程](http://docs.oracle.com/javase/7/docs/api/java/awt/EventQueue.html)。在这种情况下，用于 `acm.util.SwingTimer`在计时器的`ActionListener`.

# django - 在 Django-Admin 中按字母顺序排列显示项目

> ID：11999848
> 
> 赞同：9
> 
> 时间：2012-08-17T04:37:30.573
> 
> 标签：django, django-admin

我现在可以显示我想要使用的项目，`list_display[]`但我希望它们按字母顺序显示。你如何使它`list_display`按字母顺序排列？

Django-admin 中的示例：

```
class PersonAdmin(admin.ModelAdmin):
    list_display = ('upper_case_name',)

    def upper_case_name(self, obj):
      return ("%s %s" % (obj.first_name, obj.last_name)).upper()
    upper_case_name.short_description = 'Name' 
```

如何更改它以按字母顺序显示？在这方面需要一些帮助...

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-17T04:49:00.903

设置`ModelAdmin.ordering = ('foo', )`订购您的管理员。

**例子**

```
class TeamRoleAdmin(admin.ModelAdmin):
   """ Team Role admin view with modifications """
   model = TeamRole
   ordering = ('team', 'role', 'user')
   list_display = ['id', 'user', 'team', 'role'] 
```

[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.ordering](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.ordering)

修改全局模型元类，覆盖 ModelAdmin.queryset，有很多方法，但您最有可能需要 Admin 排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T04:40:20.587

在您的模型`Meta`中，您可以指定`ordering = ['first_name', 'last_name']`.

# node.js - 一个简单的 Express.js 应用程序中的所有内容都充当指向单个视图的链接。这是怎么回事？

> ID：11999851
> 
> 赞同：0
> 
> 时间：2012-08-17T04:38:00.670
> 
> 标签：node.js, routing, views, express, rendering

我为具有某些表单的客户端构建了一个非常简单的多页 Express.js 应用程序。但是现在在我应用了一堆 CSS 并准备好交付之后，我在 localhost 上遇到了一些奇怪的行为。当我向上推网站时，所有内容都充当“关于我们”视图的链接。当我单击图像时，当我单击“联系我们”表单中的输入字段时，甚至是标记的文本，都会将我重定向到“关于我们”视图。

这是我的配置设置：

```
app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser());
  app.use(express.session({ secret: 'botheredbybronies' }));
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
  app.use(express.favicon(__dirname + '/public/images/aquifavicon1.svg'));
});

app.configure('development', function(){
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('production', function(){
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
}); 
```

这是有问题的路线，没什么特别的：

```
app.get('/about', function (req, res, next) {
res.render('about', {title: 'About Aqui'});
}); 
```

我只是想了解是什么原因造成的。如果您有任何想法，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:54:08.560

显然问题出在您所服务的页面上（即一切都变成了链接）。

要么您的页面上有一些全局`onClick`处理程序，或者（更有可能）某些`<a href="...">`标签没有关闭（将所有内容转换到页面末尾或下一个`<a href="...">`链接变成链接）。

您可以通过从意外充当链接的文本中选择“检查元素”并在 DOM 树中检查`onClick`事件侦听器或元素来在 Chrome 中检查它。`<a href="...">`

如果不查看呈现的页面，很难说更多。

# cs-cart - 我正在尝试向 CS-cart 添加一个新网关，当我从网关发回时似乎遇到了麻烦

> ID：11999852
> 
> 赞同：2
> 
> 时间：2012-08-17T04:38:01.640
> 
> 标签：cs-cart

到目前为止，基本上我的脚本将值发送到网关，然后重定向到 CS 购物车 .. 在该页面中，我获取返回的值并对其进行操作。

我使用 fn 完成和 fn 更改订单状态来完成订单，但无论我做什么，我都找不到 404 页面。我已经尝试重定向到订单页面，但它会产生问题。

这是我从网关返回时使用的代码。

```
$StaTus_message = "<br>Thank you for shopping with us. Your credit card has been charged and your transaction is successful. We will be shipping your order to you soon.";
$pp_response['customer_email'] = $_REQUEST['billing_cust_email'];   
$pp_response['client_id'] = $_REQUEST['billing_cust_name'];
$pp_response['order_status'] = 'C';
$pp_response['reason_text'] = $StaTus_message;
fn_finish_payment($_REQUEST['Order_Id'], $pp_response);
fn_change_order_status($_REQUEST['Order_Id'], $pp_response['order_status']); 
```

我知道这不是一个受欢迎的主题，但我想我会试一试。

此外，我还在 CS-cart 的论坛和互联网上到处搜索文档，但找不到太多。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T00:05:12.787

好的。因此，解决方案是在脚本将客户端发送到网关后退出脚本，然后在重新输入时使用`fn_change_order_status`- 到您需要的任何内容，然后使用`fn_order_placement_routines`实际完成订单并向客户/商家发送电子邮件。

希望能帮助人们，因为我花了将近 4 天的时间来尝试理解这一点。

# php - 将 Codeigniter 站点从 http 更改为 https 站点 - 不起作用

> ID：11999860
> 
> 赞同：0
> 
> 时间：2012-08-17T04:39:34.390
> 
> 标签：php, codeigniter, https

我有一个 codeigniter 网站，它在`http`.

`https`然后我们的客户将站点移动到具有安全性的新服务器上。

这意味着现在网站 url 是`http://mysite.com`.

但是现在我的网站无法正常工作...

这是什么原因？

那是我的 codeigniter 站点无法在`https`.

它只是显示主页，没有 jquery 效果等不起作用..

我已经将`base_url`config.php 中的`https://mysite.com`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T04:54:11.803

试试这个

```
function redirectToHTTPS()
{
  if($_SERVER['HTTPS']!="on")
  {
     $redirect= "https://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
     header("Location:$redirect");
  }
} 
```

# objective-c - 如何避免 XML 解析器转到嵌套标签，或者只允许在 Objective C 中使用外部标签？

> ID：11999861
> 
> 赞同：0
> 
> 时间：2012-08-17T04:39:43.390
> 
> 标签：objective-c, xml-parsing, nsxmlparser

这是一个简单的 XML：

```
<MSG>
    <ID>123<ID>
    <Node>
       <ID>456<ID>
    </Node>
</MSG> 
```

我有一个解析器，它是子类`ParentParser`并实现`NSXMLParserDelegate`

`ParentParser`是这样的：

```
- (id)initWithXmlString:(NSString *)xmlString
{
    if ( (self = [super init]) ) {
        NSString *str = [[NSString alloc] initWithString:xmlString];
        self.xml = str;
        [str release];

        self.storingData     = NO;
        self.receiveString   = [NSMutableString string];
        self.elementsToParse = [NSArray array];
    }

    return self;
} 
```

这就是我解析 XML 的方式：

```
- (void)parser:(NSXMLParser *)parser 
 didEndElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI 
 qualifiedName:(NSString *)qName{

   if (self.m_oMyObject) {
      if (self.storingData) {
         NSString *tempStr = [self.receiveString stringByTrimmingCharactersInSet:
                              [NSCharacterSet whitespaceAndNewlineCharacterSet]];
         [self.receiveString setString:@""];

         if ([elementName isEqualToString:kID]) {
             //Go in twice
         }
     //============ Code skips =================== 
```

如您所见，`kID`, String`ID`已被解析两次。但我想拥有标签内的`123`唯一，而不是，我该如何解决？谢谢。`456``<Node>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:57:59.267

我不认为您可以跳过嵌套元素，但您可以通过增加实例变量in并减少它 in`NSXMLParser`来跟踪当前级别。`level``parser:didStartElement:...``parser:didEndElement:...`

# objective-c - Objective-C：编译期间预期的标识符或“（”和3个未知错误

> ID：11999866
> 
> 赞同：2
> 
> 时间：2012-08-17T04:40:06.533
> 
> 标签：objective-c, compiler-errors

我在一个正常运行了一个月的项目的 AppDelegate.h 文件中突然在编译过程中遇到 3 个未知错误。哪个是！

> 解析问题 - 预期标识符或“（”
> 
> 解析问题 - 预期的 ')'
> 
> 语义问题 - 未知类型名称“ViewController”；你的意思是“UIViewController”吗？

我逐行检查了我的代码，没有语法错误或语义问题（我的项目中有 ViewController.h 、 ViewController.m 和 ViewController.xib ）。这些只是未知错误，xcode 仅在 AppDelegate.h 文件中显示错误

**AppDelegate.h**

```
#import <UIKit/UIKit.h>

@class ViewController;
@class SignInViewController; 

@class StagesViewController;
@class ResultViewController;
@class myFacebook;

@interface AppDelegate : UIResponder <UIApplicationDelegate>{
    myFacebook *myFB;
    NSString *appVer;

}

+ (NSString*)Username;
+ (void)setUsername:(NSString*)newUser;
+ (NSString*)UserID;
+ (void)setUserID:(NSString*)newId;

@property (nonatomic, retain) myFacebook *myFB;

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) UINavigationController *theNavigationController;
@property (strong, nonatomic) ViewController *viewController;
@property (strong, nonatomic) SignInViewController *signInViewController;
@property (strong, nonatomic) StagesViewController *stagesViewController;

@property (strong, nonatomic) ResultViewController *resultViewController;

@end 
```

任何形式的帮助都将不胜感激，因为自上周以来我一直在寻找这些错误，但无法解决。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-17T05:43:44.610

问题不`AppDelegate.h`在于您发布的内容。该文件编译得很好。

您需要弄清楚`.m`Xcode 在发出错误时试图编译哪个文件。转到日志导航器（视图 > 导航器 > 显示日志导航器）。选择您的最新版本。由于错误，它旁边应该有一个红色圆圈。单击它以显示该构建的日志。

您应该在列表中找到一行，如“Compile AppDelegate.m”或“Compile ViewController.m”，其中列出了其下的错误。这就是 Xcode 试图编译的文件。

现在转到该文件。查看文件顶部，您的`#import`语句所在的位置。检查您可能不小心输入的杂散字符。

如果在那里没有找到任何杂散字符，请检查每个导入的文件。查看文件末尾是否有杂散字符、缺少`@end`语句、缺少分号、缺少大括号或缺少括号。这些问题中的任何一个都将导致编译器错误出现在下一个导入的文件或`.m`文件中。

如果您使用的是修订控制系统（如 git 或 svn），请使用它来区分您的文件。`.h`在文件的顶部或末尾或文件的顶部查找没有意义的更改`.m`。如果您在构建损坏时签入了文件，则需要与较旧的工作版本进行比较。

如果您没有使用修订控制系统，现在您知道为什么需要尽快开始使用一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T05:31:54.067

有关真正的问题，请参见上面 Rob Mayoff 的回答：.m 或 .h 文件中的错误字符。

只需在他的回复中添加一件事：如果您不使用版本控制，请打开您最喜欢的文件浏览器，导航到您的源文件树，然后按日期对文件进行排序。开始查看您最近更改的文件。

# objective-c - 从 iPad 重新选择图像

> ID：11999873
> 
> 赞同：1
> 
> 时间：2012-08-17T04:40:55.740
> 
> 标签：objective-c, uiimagepickercontroller

我有一个选择器，允许用户从他们的 iPad 中选择图像。我想存储他们选择的图像的一些唯一标识符（例如 [图像描述] 或其他内容？然后我想将其保存到文本文件（我知道该怎么做），然后从手机中获取该图像稍后再显示。将此图像保存为文本以便我以后获取的最佳格式是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:34:26.847

文件名，因为在发布 ALAssetsLibrary 之后，其他所有内容都被破坏了。

# javascript - 使用 Eval 函数作为 Asp.net 文本框的参数调用 javascript 函数

> ID：11999876
> 
> 赞同：0
> 
> 时间：2012-08-17T04:41:07.740
> 
> 标签：javascript, asp.net

我正在尝试做类似的事情

```
<asp:TextBox runat="server" Text='<%#Eval("data")>' onblur="jsMethod('<%#Eval("data")>')"/> 
```

但无法正确处理。有什么帮助吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:52:46.750

`onblur`当用户输入失去焦点时，将在客户端调用。

该`this`对象可用于在调用`jsMethod`.

```
<asp:TextBox runat="server" Text='<%#Eval("data")%>' onblur="jsMethod(this)"/>

function jsMethod(input)
{
    var currentText = input.value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T05:42:35.823

你需要这样写：

```
 <asp:TextBox runat="server" Text='<%#Eval("data") %>' onblur="jsMethod('<%#Eval("data")%>')" /> 
```

你最后缺少 % 符号，这就是我所相信的

**更新：**

```
 <asp:TextBox ID="TextBox1" runat="server" Text='<%#Eval("data") %>' onblur='<%# @"jsMethod(""" + Eval("data")  + @""");" %>' /> 
```

# javascript - Javascript：表单验证 getElementById 仅返回第一个 id 元素

> ID：11999880
> 
> 赞同：1
> 
> 时间：2012-08-17T04:41:55.070
> 
> 标签：javascript, forms, validation, tags, getelementbyid

我的表单验证脚本似乎正在运行，但 getElementById 仅读取第一个 Id 并出于某种原因跳过其余部分。是因为封闭标签问题吗？如果是这样，我应该把它们放在哪里？还是我以某种方式忽略的另一个原因。请帮忙 ：（

感谢您的帮助，我已经盯着这个看了好几天了。这是代码。

JS 代码。

```
<script type='text/javascript'>

        function formValidator(){
            // Make quick references to our fields
            var name = document.getElementById('name');
            var addr = document.getElementById('addr');
            var phone = document.getElementById('phone');
            var state = document.getElementById('state');
            var username = document.getElementById('username');
            var email = document.getElementById('email');

            // Check each input in the order that it appears in the form!
            if(isAlphabet(name, "Please enter only letters for your name")){
                if(isAlphanumeric(addr, "Numbers and Letters Only for Address")){
                    if(isNumeric(phone, "Please enter only numeric values without any dashes")){
                        if(madeSelection(state, "Please Choose a State")){
                            if(lengthRestriction(username, 6, 8)){
                                if(emailValidator(email, "Please enter a valid email address")){
                                    return true;
                                }
                            }
                        }
                    }
                }
            }

            return false;

        }

        function notEmpty(elem, helperMsg){
            if(elem.value.length == 0){
                alert(helperMsg);
                elem.focus(); // set the focus to this input
                return false;
            }
            return true;
        }

        function isNumeric(elem, helperMsg){
            var numericExpression = /^[0-9]+$/;
            if(elem.value.match(numericExpression)){
                return true;
            }else{
                alert(helperMsg);
                elem.focus();
                return false;
            }
        }

        function isAlphabet(elem, helperMsg){
            var alphaExp = /^[a-zA-Z]+$/;
            if(elem.value.match(alphaExp)){
                return true;
            }else{
                alert(helperMsg);
                elem.focus();
                return false;
            }
        }

        function isAlphanumeric(elem, helperMsg){
            var alphaExp = /^[0-9a-zA-Z]+$/;
            if(elem.value.match(alphaExp)){
                return true;
            }else{
                alert(helperMsg);
                elem.focus();
                return false;
            }
        }

        function lengthRestriction(elem, min, max){
            var uInput = elem.value;
            if(uInput.length >= min && uInput.length <= max){
                return true;
            }else{
                alert("Please enter between " +min+ " and " +max+ " characters");
                elem.focus();
                return false;
            }
        }

        function madeSelection(elem, helperMsg){
            if(elem.value == "Select State..."){

    alert(helperMsg);
            elem.focus();
            return false;
        }else{
            return true;
        }
    }

    function emailValidator(elem, helperMsg){
        var emailExp = /^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/;
        if(elem.value.match(emailExp)){
            return true;
        }else{
            alert(helperMsg);
            elem.focus();
            return false;
        }
    }
    </script> 
```

这是表单代码。

```
<?php

// Will not show if submitted once so client cant resubmit over and over again.
if ($submitted==2)
{
    echo "<a href=\"../\"><h2>[ Return to main menu ]</h2></a>";

    // sets variables to a Null string
    $new_name='';
    $new_phone='';
    $new_email='';
    $new_city='';
    $new_state='';
    $new_cost='';
    $new_info ='';
}
else
{

  echo "<div class=\"container\" >";
    echo "<div class=\"form_container\" align=\"left\" >";
    echo "<h2>Get Listed</h2>";
    echo "<i>All required fields are marked with a red asteriks (<font color=\"red\"> * </font>)</i><br/><br/>";

    echo "<form action=\"#\" onsubmit=\"return formValidator()\" method=\"post\" >";
          echo "<font color=\"red\">*</font>&nbsp;<input type=\"checkbox\" name=\"terms\" value=\"yes\" > 
          Yes, I agree to our <a href=\"../legal/index.php\" target=\"_blank\" >
          <i>Terms and Conditions</i></a><br/><br/>";

          echo "<h2>Limo Service Details</h2>";

            echo "<font color=\"red\"/>*</font> Service Name: <br/>";
            echo "<input type=\"text\" name=\"in_name\" maxlength=\"60\" size=\"26\" id=\"name\" value='$new_name' >";
            echo "<br/>";

            echo "<font color=\"red\"/>*</font> Phone: <br/>";
            echo "<input type=\"text\" name=\"in_phone\" maxlength=\"60\" size=\"26\" id=\"phone\" value='$new_phone' >";           
            echo "<br/>";

            echo "<font color=\"red\"/>*</font> Email: <br/>";
            echo "<input type=\"text\" name=\"in_email\" maxlength=\"60\" size=\"26\" id=\"email\" value='$new_email' >";           
            echo "<br/>";

            echo "<font color=\"red\">*</font> Cost: <br/>";
            echo "<input type=\"text\" name=\"in_cost\" maxlength=\"30\" size=\"11\" value='$new_cost' >";          
            echo "&nbsp;&nbsp;";

            echo "<select style=\"width: 120px\" name=\"in_rate\" >";
                echo "<option value=\"daily\" selected>Daily</option>";
                echo "<option value=\"hourly\">Hourly</option>";
                echo "</select>";

            echo "<br/>";                           

            echo "<font color=\"red\">*</font> City: <select name=\"in_city\" style=\"width: 245px\" >";
                echo "<option value=\"\">Select City...</option>";
                echo "<option value=\"Atlanta\">Atlanta</option>";
                echo "<option value=\"Atlantic City\">Atlantic City</option>";
                echo "<option value=\"Austin\">Austin</option>";
                echo "<option value=\"Baltimore\">Baltimore</option>";
                echo "<option value=\"Boston\">Boston</option>";
                echo "<option value=\"Charlotte\">Charlotte</option>";
                echo "<option value=\"Chicago\">Chicago</option>";
                echo "<option value=\"Cincinnati\">Cincinnati</option>";
                echo "<option value=\"Columbus\">Columbus</option>";
                echo "<option value=\"Dallas\">Dallas</option>";
                echo "<option value=\"Denver\">Denver</option>";
                echo "<option value=\"Detroit\">Detroit</option>";
                echo "<option value=\"Fort Lauderdale\">Fort Lauderdale</option>";
                echo "<option value=\"Honolulu\">Honolulu</option>";
                echo "<option value=\"Houston\">Houston</option>";
                echo "<option value=\"Indianapolis\">Indianapolis</option>";
                echo "<option value=\"Irvine\">Irvine</option>";
                echo "<option value=\"Las Vegas\">Las Vegas</option>";
                echo "<option value=\"Los Angeles\">Los Angeles</option>";
                echo "<option value=\"Miami\">Miami</option>";
                echo "<option value=\"Minneapolis\">Minneapolis</option>";
                echo "<option value=\"Nashville\">Nashville</option>";
                echo "<option value=\"Newark\">Newark</option>";
                echo "<option value=\"New York\">New York</option>";
                echo "<option value=\"Oklahoma\">Oklahoma City</option>";
                echo "<option value=\"Orlando\">Orlando</option>";
                echo "<option value=\"Portland\">Portland</option>";
                echo "<option value=\"Philadelphia\">Philadelphia</option>";
                echo "<option value=\"Phoenix\">Phoenix</option>";
                echo "<option value=\"Raleigh\">Raleigh</option>";
                echo "<option value=\"Sacramento\">Sacramento</option>";
                echo "<option value=\"Salt Lake City\">Salt Lake City</option>";
                echo "<option value=\"San Antonio\">San Antonio</option>";
                echo "<option value=\"San Diego\">San Diego</option>";
                echo "<option value=\"San Francisco\">San Francisco</option>";
                echo "<option value=\"Tampa\">Tampa</option>";
                echo "</select>";

            echo "<br/>";

            // City2
            echo "&nbsp;&nbsp;&nbsp;City 2: <select name=\"in_city2\" style=\"width: 245px\" >";
                echo "<option value=\"\">Select City...</option>";
                echo "<option value=\"Atlanta\">Atlanta</option>";
                echo "<option value=\"Atlantic City\">Atlantic City</option>";
                echo "<option value=\"Austin\">Austin</option>";
                echo "<option value=\"Baltimore\">Baltimore</option>";
                echo "<option value=\"Boston\">Boston</option>";
                echo "<option value=\"Charlotte\">Charlotte</option>";
                echo "<option value=\"Chicago\">Chicago</option>";
                echo "<option value=\"Cincinnati\">Cincinnati</option>";
                echo "<option value=\"Columbus\">Columbus</option>";
                echo "<option value=\"Dallas\">Dallas</option>";
                echo "<option value=\"Denver\">Denver</option>";
                echo "<option value=\"Detroit\">Detroit</option>";
                echo "<option value=\"Fort Lauderdale\">Fort Lauderdale</option>";
                echo "<option value=\"Honolulu\">Honolulu</option>";
                echo "<option value=\"Houston\">Houston</option>";
                echo "<option value=\"Indianapolis\">Indianapolis</option>";
                echo "<option value=\"Irvine\">Irvine</option>";
                echo "<option value=\"Las Vegas\">Las Vegas</option>";
                echo "<option value=\"Los Angeles\">Los Angeles</option>";
                echo "<option value=\"Miami\">Miami</option>";
                echo "<option value=\"Minneapolis\">Minneapolis</option>";
                echo "<option value=\"Nashville\">Nashville</option>";
                echo "<option value=\"Newark\">Newark</option>";
                echo "<option value=\"New York\">New York</option>";
                echo "<option value=\"Oklahoma\">Oklahoma City</option>";
                echo "<option value=\"Orlando\">Orlando</option>";
                echo "<option value=\"Portland\">Portland</option>";
                echo "<option value=\"Philadelphia\">Philadelphia</option>";
                echo "<option value=\"Phoenix\">Phoenix</option>";
                echo "<option value=\"Raleigh\">Raleigh</option>";
                echo "<option value=\"Sacramento\">Sacramento</option>";
                echo "<option value=\"Salt Lake City\">Salt Lake City</option>";
                echo "<option value=\"San Antonio\">San Antonio</option>";
                echo "<option value=\"San Diego\">San Diego</option>";
                echo "<option value=\"San Francisco\">San Francisco</option>";
                echo "<option value=\"Tampa\">Tampa</option>";
                echo "</select>";

            echo "<br/>";           

            // City3
            echo "&nbsp;&nbsp;&nbsp;City 3: <select name=\"in_city3\" style=\"width: 245px\" >";
                echo "<option value=\"\">Select City...</option>";
                echo "<option value=\"Atlanta\">Atlanta</option>";
                echo "<option value=\"Atlantic City\">Atlantic City</option>";
                echo "<option value=\"Austin\">Austin</option>";
                echo "<option value=\"Baltimore\">Baltimore</option>";
                echo "<option value=\"Boston\">Boston</option>";
                echo "<option value=\"Charlotte\">Charlotte</option>";
                echo "<option value=\"Chicago\">Chicago</option>";
                echo "<option value=\"Cincinnati\">Cincinnati</option>";
                echo "<option value=\"Columbus\">Columbus</option>";
                echo "<option value=\"Dallas\">Dallas</option>";
                echo "<option value=\"Denver\">Denver</option>";
                echo "<option value=\"Detroit\">Detroit</option>";
                echo "<option value=\"Fort Lauderdale\">Fort Lauderdale</option>";
                echo "<option value=\"Honolulu\">Honolulu</option>";
                echo "<option value=\"Houston\">Houston</option>";
                echo "<option value=\"Indianapolis\">Indianapolis</option>";
                echo "<option value=\"Irvine\">Irvine</option>";
                echo "<option value=\"Las Vegas\">Las Vegas</option>";
                echo "<option value=\"Los Angeles\">Los Angeles</option>";
                echo "<option value=\"Miami\">Miami</option>";
                echo "<option value=\"Minneapolis\">Minneapolis</option>";
                echo "<option value=\"Nashville\">Nashville</option>";
                echo "<option value=\"Newark\">Newark</option>";
                echo "<option value=\"New York\">New York</option>";
                echo "<option value=\"Oklahoma\">Oklahoma City</option>";
                echo "<option value=\"Orlando\">Orlando</option>";
                echo "<option value=\"Portland\">Portland</option>";
                echo "<option value=\"Philadelphia\">Philadelphia</option>";
                echo "<option value=\"Phoenix\">Phoenix</option>";
                echo "<option value=\"Raleigh\">Raleigh</option>";
                echo "<option value=\"Sacramento\">Sacramento</option>";
                echo "<option value=\"Salt Lake City\">Salt Lake City</option>";
                echo "<option value=\"San Antonio\">San Antonio</option>";
                echo "<option value=\"San Diego\">San Diego</option>";
                echo "<option value=\"San Francisco\">San Francisco</option>";
                echo "<option value=\"Tampa\">Tampa</option>";
                echo "</select>";

            echo "<br/>";

            // State
            echo "<font color=\"red\">*</font> State: <select name=\"in_state\" id=\"state\" style=\"width: 245px\" >";
                echo "<option>Select State...</option>";
                echo "<option value=\"Alabama\">Alabama</option>";
                echo "<option value=\"Alaska\">Alaska</option>";
                echo "<option value=\"Arizona\">Arizona</option>";
                echo "<option value=\"Arkansas\">Arkansas</option>";
                echo "<option value=\"California\">California</option>";
                echo "<option value=\"Colorado\">Colorado</option>";
                echo "<option value=\"Connecticut\">Connecticut</option>";
                echo "<option value=\"Delaware\">Delaware</option>";
                echo "<option value=\"Florida\">Florida</option>";
                echo "<option value=\"Georgia\">Georgia</option>";
                echo "<option value=\"Hawaii\">Hawaii</option>";
                echo "<option value=\"Idaho\">Idaho</option>";
                echo "<option value=\"Illinois\">Illinois</option>";
                echo "<option value=\"Indiana\">Indiana</option>";
                echo "<option value=\"Iowa\">Iowa</option>";
                echo "<option value=\"Kansas\">Kansas</option>";
                echo "<option value=\"Kentucky\">Kentucky</option>";
                echo "<option value=\"Louisiana\">Louisiana</option>";
                echo "<option value=\"Maine\">Maine</option>";
                echo "<option value=\"Maryland\">Maryland</option>";
                echo "<option value=\"Massachusetts\">Massachusetts</option>";
                echo "<option value=\"Michigan\">Michigan</option>";
                echo "<option value=\"Minnesota\">Minnesota</option>";
                echo "<option value=\"Mississippi\">Mississippi</option>";
                echo "<option value=\"Missouri\">Missouri</option>";
                echo "<option value=\"Montana\">Montana</option>";
                echo "<option value=\"Nebraska\">Nebraska</option>";
                echo "<option value=\"Nevada\">Nevada</option>";
                echo "<option value=\"New Hampshire\">New Hampshire</option>";
                echo "<option value=\"New Jersey\">New Jersey</option>";
                echo "<option value=\"New Mexico\">New Mexico</option>";
                echo "<option value=\"New York\">New York</option>";
                echo "<option value=\"North Carolina\">North Carolina</option>";
                echo "<option value=\"North Dakota\">North Dakota</option>";
                echo "<option value=\"Ohio\">Ohio</option>";
                echo "<option value=\"Oklahoma\">Oklahoma</option>";
                echo "<option value=\"Oregon\">Oregon</option>";
                echo "<option value=\"Pennsylvania\">Pennsylvania</option>";
                echo "<option value=\"Rhode Island\">Rhode Island</option>";
                echo "<option value=\"South Carolina\">South Carolina</option>";
                echo "<option value=\"South Dakota\">South Dakota</option>";
                echo "<option value=\"Tennessee\">Tennessee</option>";
                echo "<option value=\"Texas\">Texas</option>";
                echo "<option value=\"Utah\">Utah</option>";
                echo "<option value=\"Vermont\">Vermont</option>";
                echo "<option value=\"Virginia\">Virginia</option>";
                echo "<option value=\"Washington\">Washington</option>";
                echo "<option value=\"West Virginia\">West Virginia</option>";
                echo "<option value=\"Wisconsin\">Wisconsin</option>";
                echo "<option value=\"Wyoming\">Wyoming</option>";
                echo "</select>";

            echo "<br/><br/>";

            //Additional Info
            echo "&nbsp;&nbsp;Additional Info: ";
            echo "<br/>";           
            echo "<textarea rows=\"5\" cols=\"26\" name=\"in_info\" >$new_info";
            echo "</textarea>";
            echo "<font size=\"1\">&nbsp;&nbsp;(Maximum characters: 500)</font>";
            echo "<br/>";

            //Submit Button
            echo "<input type=\"hidden\" name=\"submission\" value=\"1\">"; 
            echo "<center><input type=\"submit\" value=\"LIST ME\" class=\"button2\" /></center>";          

    echo "</form>";
    echo "</div>";
  echo "</div>";
}
?> 
```

一旦经过验证，它就会被发送到一个 php mysql 文件，该文件将它输入到我的数据库中。再次感谢任何帮助。

~尼古拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:07:21.677

您的代码没有按照您的想法执行。

```
var name = document.getElementById('name'); 
```

返回：

```
<input type="text" name="in_name" maxlength="60" size="26" id="name" value='$new_name' > 
```

相反，要获得价值，您需要执行以下操作：

```
var name = document.getElementById('name').value; 
```

那应该可以解决您当前的问题。

另一方面，您可能应该考虑关闭该 php 标记，而不是将所有内容包装在 echo 语句中。为您的样式使用 CSS 也会在将来为您省去很多麻烦。

# c - 在 C 中选择作为 char 的 while 循环

> ID：11999884
> 
> 赞同：0
> 
> 时间：2012-08-17T04:42:02.977
> 
> 标签：c

在下面给出的代码中，如果我按'y'一次它会重复，但它并没有要求下一个书重复（或按'y'）。有人可以帮助为什么这个代码在一个循环后终止？

```
 main()
{
 char choice;

 do
 {
  printf("Press y to continue the loop : ");
  scanf("%c",&choice);
 }while(choice=='y');

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T04:45:50.450

您应该在 scanf() 调用之后读出换行符。否则，下一次就会选择它，所以 while 循环就会出现。

```
#include<stdio.h>

int main()
{
    char choice;

    do
    {
        printf("Press y to continue the loop : ");
        choice = getchar(); 
        getchar();
    }
    while(choice=='y');
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T04:47:25.037

那是因为标准输入被缓冲了。因此，您可能正在输入 a 的字符串，`y`后跟一个`\n`（换行符）。

因此，第一次迭代采用`y`，但下一次迭代不需要您的任何输入，因为`\n`是标准输入缓冲区中的下一个。但是您可以通过让 scanf 使用尾随空格来轻松解决此问题。

```
scanf("%c ",&choice); 
```

注意：c 后面的空格`"%c "`

但是，如果输入以`y`. 因此，您还应该检查`scanf`. 例如

```
if( scanf("%c ",&choice) <= 0 )
    choice = 'n'; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T06:55:18.937

在 scanf 格式字符串的第一个字符处，插入一个空格。这将在读取数据之前清除标准输入中的所有空白字符。

```
#include <stdio.h>

int main (void)
{
  char choice;

  do
  {
    printf("Press y to continue the loop : ");
    scanf(" %c",&choice); // note the space
  }while(choice=='y');

  return 0;
} 
```

# c++ - 获取 MAC OS X 的机器 ID

> ID：11999886
> 
> 赞同：2
> 
> 时间：2012-08-17T04:42:12.287
> 
> 标签：c++, macos

我想要通过 c++ 程序获得 MAC PC 的机器唯一 ID，例如处理器 ID、硬盘 ID、uuid。谁能告诉我它是如何实现的？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-13T06:38:33.503

仅在大约 7 年后，但这是我们一直在使用的那些偶然发现的答案。

1.  它使用 IOPlatformExpertDevice 类来访问 Mac 序列号/硬件 uuid
2.  有两种方法可以做到这一点，第一种使用 C++，第二种使用 python。我个人使用了第二种方式，并且可以验证它是否获取系统信息给出的硬件 uuid。

第一种方法，未​​经我自己测试，但使用相同的类，因此至少有可能工作，请参阅[https://gist.github.com/tmiz/1294978](https://gist.github.com/tmiz/1294978) ，了解 C++ 中有关如何检索“序列号”的例程这与系统信息中的硬件uuid不同，但通过一些调整，您应该能够获得硬件uuid。

第二种方法（参见下面的python代码），在python中使用ioreg命令，该命令通过单独的进程执行，然后使用正则表达式处理结果以获取uuid。此方法肯定会检索硬件 uuid，因为我已经使用 macos 10.14 和以前版本的 10.13 和 10.12 中的系统信息应用程序进行了检查。

愿这些方法为您服务，它们不返回 mac 地址，因此应该作为机器的 uuid 正常工作，而不仅仅是网络接口。

最后，您可以在此处阅读有关 ioreg 的信息 -> [http://www.manpagez.com/man/8/ioreg/](http://www.manpagez.com/man/8/ioreg/)和更一般的 I/O 工具包 -> [https://developer.apple.com/library/archive/文档/DeviceDrivers/Conceptual/IOKitFundamentals/Families_Ref/Families_Ref.html#//apple_ref/doc/uid/TP0000021-BABHIGFE](https://developer.apple.com/library/archive/documentation/DeviceDrivers/Conceptual/IOKitFundamentals/Families_Ref/Families_Ref.html#//apple_ref/doc/uid/TP0000021-BABHIGFE)

```
import platform, re, os

os_type = platform.system()

if os_type == 'Darwin':

    machine_uuid_str = ''

    p = os.popen('ioreg -rd1 -c IOPlatformExpertDevice | grep -E \'(UUID)\'', "r")

    while 1:
        line = p.readline()
        if not line: break
        machine_uuid_str += line

    match_obj = re.compile('[A-Z,0-9]{8,8}-' +\
                       '[A-Z,0-9]{4,4}-' +\
                       '[A-Z,0-9]{4,4}-' +\
                       '[A-Z,0-9]{4,4}-' +\
                       '[A-Z,0-9]{12,12}')

    results = match_obj.findall(machine_uuid_str)

    return results[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:47:17.637

除了一些古老的处理器之外，x86 CPU 没有软件可见的序列号。

Apple 建议您使用计算机主网络接口的 MAC 地址（即板载以太网控制器（如果存在）或无线接口）作为系统的唯一标识符。[Apple 的Validating Mac App Store Receipts](http://developer.apple.com/library/mac/#releasenotes/General/ValidateAppStoreReceipt/_index.html)文档中提供了执行此操作的示例代码（在“获取计算机的 GUID”下）。

# cuda - CPU作为主机，intel HD 4000作为设备1，离散gpu作为opencl中的设备2

> ID：11999889
> 
> 赞同：4
> 
> 时间：2012-08-17T04:42:19.030
> 
> 标签：cuda, cpu, opencl, gpu

是否可以同时使用 Intel HD 4000 集成显卡和独立 GPU，将 OpenCL（或 CUDA）作为设备，将 CPU 作为主机？我希望一些代码在集成显卡上运行，而其他代码同时在我的 GPU 上运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T05:34:03.437

可以使用英特尔最新的 Windows OpenCL SDK（可[在此处](http://software.intel.com/en-us/articles/vcsource-tools-opencl-sdk/)获得）在某些 Ivy Bridge 集成 GPU 上运行 OpenCL。英特尔 ICD 会将主机 CPU 和集成 GPU 都枚举为支持 OpenCL 的设备。然后，您将需要使用离散 GPU 供应商的 SDK 和 ICD 将其识别为 OpenCL 设备并将其枚举。一旦完成，就可以在 GPU 上建立上下文，并使用标准 OpenCL 多 GPU 设计模式让代码在两个设备上运行。这在实践中是否真的有效将取决于两家供应商的 SDK 的支持和稳定性。

我有一个 Ivy-Bridge + 独立 GPU 系统，并确认英特尔 ICD 将 HD4000 枚举为计算设备。我还没有在两个设备上同时尝试过 OpenCL。

除了自己的 GPU，NVIDIA 不支持任何其他设备上的 CUDA。

# javascript - {} + [] 和 [] + {} 结果如何不同

> ID：11999892
> 
> 赞同：7
> 
> 时间：2012-08-17T04:42:42.573
> 
> 标签：javascript

> **可能重复：**
> [CodeMash 2012 的“Wat”演讲中提到的这些奇怪的 JavaScript 行为的解释是什么？](https://stackoverflow.com/questions/9032856/what-is-the-explanation-for-these-bizarre-javascript-behaviours-mentioned-in-the)

有人可以向我解释一下他们返回的结果在 javascript 中如何不同：

```
› {} + []
» 0
› [] + {}
» "[object Object]" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T04:47:51.400

这是因为`{}`代码中的**不是**对象字面量，而是一个空块。

它被解析为：

```
{};   // empty block
+ []; // this result is shown in the console 
```

与which 产生与;`({}) + []`相同的结果进行比较 `[] + {}`在这种情况下，括号强制`{}`“在表达式上下文中”被处理/解析。

SO上有很多关于这种特殊双重性质的重复*（*`{}`作为表达式或块？）但是，找到它们可能有点棘手..

* * *

我在 Meta 上找到了[https://meta.stackexchange.com/questions/83911/how-do-i-search-stackoverflow-for-at-keywords-like-private-or-synthesize](https://meta.stackexchange.com/questions/83911/how-do-i-search-stackoverflow-for-at-keywords-like-private-or-synthesize)，并使用 Symbolhound “最接近”的重复项我可以找到解决[这样](https://stackoverflow.com/questions/3731802/what-is-the-behavior-of-typing-a1-giving-1-and-a1-b2-giving-an-error-in?lq=1)的问题（与“评估 JSON”时需要添加括号有关）或[这个](https://stackoverflow.com/questions/1509535/javascript-false-is-a-syntaxerror?lq=1)（使用“{} == false”之类的结构是语法错误）。

如果有人知道更好的方法来搜索此类问题，或者有指向此类重复的方便的链接..

# iphone - 安装临时分发但配置文件给出错误

> ID：11999898
> 
> 赞同：0
> 
> 时间：2012-08-17T04:43:27.550
> 
> 标签：iphone, xcode, distribution, provisioning

配置文件与应用程序捆绑标识符不匹配。

com..BayerCropSciences 这是我的应用程序标识符，我的证书有

com.celeritas.Cerenia

如何解决此问题并使证书正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T04:52:28.027

为应用程序 com.celeritas.cerenia 制作捆绑标识符或从供应门户下载正确的证书

# jquery - Express 3.X 和 JQTPL

> ID：11999907
> 
> 赞同：-1
> 
> 时间：2012-08-17T04:44:39.390
> 
> 标签：jquery, node.js

我有以下代码作为 app.js 的一部分，今天我将 Express 从 2.x 升级到 3.x，之后我更改了文件中的一些代码。我的部分代码仍然无法正常工作。我使用 JQTPL 作为模板引擎。

```
 var express    = require ('express');
    var login   = require ('./modules/login');
    var config      = require ('config');

    var app = module.exports = express();
    var server = require('http').createServer(app) ;

    app.configure(function(){

        app.set("view engine", "html");
        app.register(".html", require("jqtpl").express);
        app.use(express.bodyParser());
        app.use(express.methodOverride());
        app.use(app.router);

    });

    server.listen (config.server.port , function ()
    {
        console.log ('Server started and listening ' + config.server.port);
    }); 
```

我得到的错误是

```
 app.register(".html", require("jqtpl").express);
        ^
TypeError: Object function app(req, res){ app.handle(req, res); } has no method 'register'
    at Function.<anonymous> (/home/siva/Work/Applications/TestApp/Explore/TestJQ/app.js:11:9)
    at Function.app.configure (/home/siva/node_modules/express/lib/application.js:399:61)
    at Object.<anonymous> (/home/siva/Work/Applications/TestApp/Explore/TestJQ/app.js:8:5)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-17T04:50:12.987

JQTPL 的所有者不想马上更新......伤心。

[https://github.com/coolony/kiwi#express-3x-compatibility](https://github.com/coolony/kiwi#express-3x-compatibility) Kiwi 似乎使用了相同的语法。

否则你可以试试这个：[https ://github.com/visionmedia/consolidate.js#express-3x-example](https://github.com/visionmedia/consolidate.js#express-3x-example)

# drupal - Drupal WebForm with PinPointe--避免确认页面

> ID：11999910
> 
> 赞同：0
> 
> 时间：2012-08-17T04:45:32.633
> 
> 标签：drupal, drupal-6

我们公司使用 PinPointe 进行电子邮件营销，并且我们有一个 Drupal 6 站点，其中包含多个语言域。我创建了一个 Web 表单，但我没有在 Drupal 中创建任何字段。相反，在节点编辑而**不是节点网络表单编辑**....在正文部分的节点编辑中，我添加了 HTML 和表单的 javascript。一切正常，数据被捕获以精确定位。问题在于页面..单击提交时..实际上重定向到 PinPointe，在那里我收到一条友好的消息。感谢您的加入。好吧，我不想要这个。我只想弹出一个警报说谢谢，然后让用户留在他们所在的页面上。我尝试使用 jquery 来发布此代码，但它没有加载，我怀疑这是因为我需要它在标题而不是正文中。

所以我想要的只是将数据提交给 pinpointe 而不是重定向用户。所以这里是我有限的 Drupal 知识用完的地方：

1.  如果我在节点 webform 中创建输入字段，那么如何让表单发布到 pinpointe？

2.  如果我在节点正文（不是节点>>webform）中动态创建字段，我可以将提交定向到 PinPointe，但是如何停止重定向？

FWIW 这里是我试图使用的 jquery，但怀疑必须进入标题[http://jsfiddle.net/4xDFK/4/](http://jsfiddle.net/4xDFK/4/)

FWIW 这里是动态创建的代码：

```
<form action="http://na04.mypinpointe.com/...." id="webform-client-form-1375" method="post" onsubmit="return CheckForm257(this);">
    <div>
        <div id="webform-component-UsrEmail">
            <div id="edit-submitted-UsrEmail-wrapper">
                <input id="edit-submitted-UsrEmail" name="email" size="30" type="email" />
            </div>
        </div>
        <div class="form-actions form-wrapper" id="edit-actions">
            <input class="form-submit" id="edit-submit" name="op" type="submit" value=" " />
        </div>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:22:16.373

在 Drupal 中创建您的自定义确认页面。然后设置 PinPointe 以重定向到此确认页面。

在 PinPointe 表单管理器中，“感谢页面选项”下有一个选项可将注册用户发送到自定义 URL。

# c# - DateTime.TryParseExact() 拒绝有效格式

> ID：11999912
> 
> 赞同：77
> 
> 时间：2012-08-17T04:45:42.553
> 
> 标签：c#, .net, cultureinfo

我正在解析`ASP.NET WebForms`页面中的 DateTime 值，并且日期字符串一直被该`DateTime.TryParseExact()`方法拒绝，即使它明显匹配提供的格式字符串之一。

它似乎在我在家的开发机器上失败但在生产服务器上工作，所以我正在考虑涉及本地日期设置，但即使我提供`IFormatProvider (CultureInfo)`对象作为参数也会发生此错误

这是代码：

```
DateTime startDate;
string[] formats = { "dd/MM/yyyy", "dd/M/yyyy", "d/M/yyyy", "d/MM/yyyy",
                    "dd/MM/yy", "dd/M/yy", "d/M/yy", "d/MM/yy"};

var errStart = row.FindControl("errStartDate"); //my date format error message
if (!DateTime.TryParseExact(txtStartDate.Text, formats, null, DateTimeStyles.None, out startDate))
{
    errStart.Visible = true; //we get here even with a string like "20/08/2012"
    return false;
}
else
{
    errStart.Visible = false;
} 
```

注意我`null FormatProvider`在上面给出了一个，**但是**当我提供一个`CultureInfo`对象作为 `(CultureInfo provider = new CultureInfo("en-US"))`这个参数时会出现同样的问题。

我错过了什么？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-08-17T04:49:19.210

尝试：

```
 DateTime.TryParseExact(txtStartDate.Text, formats, 
        System.Globalization.CultureInfo.InvariantCulture,
        System.Globalization.DateTimeStyles.None, out startDate) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-09-19T14:33:16.963

在这里你可以检查几件事。

1.  您正确使用的日期格式。您可以为`DateTime.TryParseExact`. 查看完整的格式列表，可[在此处](https://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)获取。
2.  `CultureInfo.InvariantCulture`这更有可能增加问题。因此，您可以这样写，而不是传递一个`NULL`值**或**将其设置为。`CultureInfo provider = new CultureInfo("en-US")`.

    ```
    if (!DateTime.TryParseExact(txtStartDate.Text, formats, 
                    System.Globalization.CultureInfo.InvariantCulture,
                    System.Globalization.DateTimeStyles.None, out startDate))
    {
        //your condition fail code goes here
        return false;
    }
    else
    {
        //success code
    } 
    ```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-08T04:52:29.173

这是简单的方法，使用 ParseExact

```
CultureInfo provider = CultureInfo.InvariantCulture;
DateTime result;
String dateString = "Sun 08 Jun 2013 8:30 AM -06:00";
String format = "ddd dd MMM yyyy h:mm tt zzz";
result = DateTime.ParseExact(dateString, format, provider); 
```

这应该适合你。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-04-20T22:11:52.907

尝试 C# 7.0

```
var Dob= DateTime.TryParseExact(s: YourDateString,format: "yyyyMMdd",provider: null,style: 0,out var dt)
 ? dt : DateTime.Parse("1800-01-01"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-05T17:52:00.590

```
string DemoLimit = "02/28/2018";
 string pattern = "MM/dd/yyyy";
 CultureInfo enUS = new CultureInfo("en-US"); 
 DateTime.TryParseExact(DemoLimit, pattern, enUS, 
                     DateTimeStyles.AdjustToUniversal, out datelimit); 
```

更多[https://msdn.microsoft.com/en-us/library/ms131044(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/ms131044(v=vs.110).aspx)

# version-control - git svn 中断，然后我丢失了所有标签，如何修复它？

> ID：11999914
> 
> 赞同：2
> 
> 时间：2012-08-17T04:45:53.447
> 
> 标签：version-control, nginx, centos, git-svn

我即将使用 git svn clone -s svn://xxx 从 svn repo（在 centos 上）克隆代码，然后它因奇怪的问题而中断，错误消息如下：

```
Following parent with do_switch
Successfully followed parent
Use of uninitialized value in concatenation (.) or string at /usr/lib/perl5/vendor_perl/5.8.8/i386-linux-thread-multi/SVN/Core.pm line 584.
Network connection closed unexpectedly:  at /usr/libexec/git-core/git-svn line 2693 
```

然后我继续使用这个克隆过程

```
 time git svn fetch -r HEAD 
```

一切似乎都很顺利，最后成功克隆了那个 svn repo：

```
W: -empty_dir: trunk/src/os/win32/ngx_gui.c
W: -empty_dir: trunk/src/os/win32/ngx_gui.h
W: -empty_dir: trunk/src/os/win32/ngx_gui_resources.h
W: -empty_dir: trunk/src/os/win32/ngx_shared.h
W: -empty_dir: trunk/src/os/win32/ngx_types.h
r4817 = 7b58fc00b5b8ebb0544053ecf63e53b28935f15b (refs/remotes/trunk)
Auto packing the repository for optimum performance. You may also
run "git gc" manually. See "git help gc" for more information.
Counting objects: 12449, done.
Compressing objects: 100% (12177/12177), done.
Writing objects: 100% (12449/12449), done.
Total 12449 (delta 9475), reused 0 (delta 0)
Checked out HEAD:
  svn://svn.nginx.org/nginx/trunk r4817

real    0m9.630s
user    0m6.015s
sys     0m1.870s 
```

奇怪的问题是我的本地 git repo 中没有标签，它是从 svn repo 克隆的：

```
[root@home nginx]# git branch
* master
[root@home nginx]# git tag   // no tags at all:(

[root@home nginx]# svn ls svn://svn.nginx.org/nginx/branches | wc -l
7
[root@home nginx]# svn ls svn://svn.nginx.org/nginx/tags | wc -l
388 
```

实际上svn repo中有388个标签，那么如何修复我的本地.git repo？

我应该从远程 svn 服务器重新启动到 git clone 吗？

我试过很多次，同样的问题:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T10:46:58.010

基本上 git-svn 不支持将标签作为 Git 标签。为了将 SVN 标签转换为 Git 标签，您可以使用：

*   [SubGit](http://subgit.com)（如果您无权访问具有 SVN 存储库的服务器，则可能是[svnsync ）](http://svnbook.red-bean.com/en/1.4/svn.ref.svnsync.html)
*   git-svn + 参考更新命令：“git [update-ref](http://www.kernel.org/pub/software/scm/git/docs/git-update-ref.html) refs/tags/TAGNAME refs/remotes/tags/TAGNAME”
*   [SmartGit](http://www.syntevo.com/smartgit/index.html)，如果你想要一些 UI 而不是编写脚本

但请注意：只有第 1 和第 3 解决方案允许您将标签推送到服务器以与 SVN 标签相关联。使用 git-svn 你应该使用额外的“git svn branch”命令。

# c++ - 在 ipv6 链接范围单播 udp 客户端-服务器守护程序中应用 boost::asio::ip::udp，有时有效，但有时无效

> ID：11999922
> 
> 赞同：1
> 
> 时间：2012-08-17T04:47:21.867
> 
> 标签：c++, boost, boost-asio, ipv6

我在使用 boost::asio::ip::udp 实现一个简单的 udp 客户端服务器时遇到了一个问题。如果我用 ipv6 链接范围单播地址绑定服务器，它在某些 PC 中有效，但在其他 PC 中无效个人电脑。

```
//main.cpp
#include <iostream>
#include <string>
#include <vector>
#include <cstring>

#include <boost/asio.hpp>
#include <boost/format.hpp>

void test_udp_server(std::string const& host_, std::string const& port_)
{
    boost::asio::io_service io_service;
    boost::asio::ip::udp::socket socket(io_service);
    boost::asio::ip::udp::resolver resolver(io_service);
    boost::asio::ip::udp::endpoint endpoint= *resolver.resolve(boost::asio::ip::udp::resolver::query(host_, port_));
    socket.open(endpoint.protocol());

    std::cout << "address:" << endpoint.address().to_string() << " port:" << port_ << std::endl; 

    boost::system::error_code e;
    socket.bind(endpoint, e);
    if (e)
    {
        std::cerr << "bind error:" << e.message() << std::endl;
        return;
    }

    //recieve from
    boost::asio::ip::udp::endpoint remote_endpoint;
    char buffer[4096];
    unsigned int size;

    while (1)
    {
        memset(buffer, 0, 4096);
        size = 0;
        size = socket.receive_from(boost::asio::buffer(buffer, 4096), remote_endpoint);

        std::cout << "receive: " << std::string(buffer) << std::endl;
    }
}

void test_udp_client(std::string const& host_, std::string const& port_)
{
    boost::asio::io_service io_service;
    boost::asio::ip::udp::socket socket(io_service);
    boost::asio::ip::udp::resolver resolver(io_service);
    boost::asio::ip::udp::endpoint dest_endpoint= *resolver.resolve(boost::asio::ip::udp::resolver::query(host_, port_));
    socket.open(dest_endpoint.protocol());

    int i = 0;
    boost::system::error_code e;

    while (i < 10)
    {
        std::string msg = boost::str(boost::format("udp message %d") % i);

        socket.send_to(boost::asio::buffer(msg.c_str(), msg.size()), dest_endpoint, boost::asio::detail::message_do_not_route, e);
        if (!e)
        {
            std::cout << "send: " << msg << std::endl;
        }
        else 
        {
            std::cerr << "send error: " << e.message() << std::endl;
        }

        i ++;
    }
}

int main(int ac, char* av[])
{
    if (ac != 4)
    {
        std::cout << "ac != 4" << std::endl;
        return -1;
    }

    if (std::string(av[1]) == "c")
    {
        test_udp_client(std::string(av[2]), std::string(av[3]));
    }
    else if (std::string(av[1]) == "s")
    {
        test_udp_server(std::string(av[2]), std::string(av[3]));
    }
    else
    {
        std::cout << "av[1] != \"c\" and av[1] != \"s\"" << std::endl;
        return -1;
    }
} 
```

编译它，并像这样运行：

```
./main s fe80::211:85ff:fe6c:44ac%eth0 100  #server, "s" means server,  
                                            #"fe80::211:85ff:fe6c:44ac%eth0" means your ipv6 address
                                            #and 100 is port
./main c fe80::211:85ff:fe6c:44ac 100       #run it in another ssh or shell 
```

但结果是：

**- 1 个 udp 服务器永远不会收到客户端发送的 msg**

```
[root@wangsu Tmp2]# ls<br>
main  main.cpp  main.o  Makefile<br>
[root@wangsu Tmp2]# ./main s fe80::211:85ff:fe6c:44ac%eth0 100<br>
address:fe80::211:85ff:fe6c:44ac%eth0 port:100<br> 
```

**2 udp 客户端，已成功发送消息**

```
[root@wangsu Tmp2]# ./main c fe80::211:85ff:fe6c:44ac 100<br>
send: udp message 0<br>
send: udp message 1<br>
send: udp message 2<br>
send: udp message 3<br>
send: udp message 4<br>
send: udp message 5<br>
send: udp message 6<br>
send: udp message 7<br>
send: udp message 8<br>
send: udp message 9<br> 
```

**3 当我打开tcpdum时，它真的捕获了客户端发送的msg**

```
[root@wangsu Tmp2]# tcpdump -i lo udp and host fe80::211:85ff:fe6c:44ac<br>
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode<br>
listening on lo, link-type EN10MB (Ethernet), capture size 96 bytes<br>
10:55:41.215110 IP6 fe80::211:85ff:fe6c:44ac.59007 > fe80::211:85ff:fe6c:44ac.100: UDP, length 13<br>
10:55:41.215295 IP6 fe80::211:85ff:fe6c:44ac.59007 > fe80::211:85ff:fe6c:44ac.100: UDP, length 13<br>
10:55:41.215360 IP6 fe80::211:85ff:fe6c:44ac.59007 > fe80::211:85ff:fe6c:44ac.100: UDP, length 13<br>
10:55:41.215431 IP6 fe80::211:85ff:fe6c:44ac.59007 > fe80::211:85ff:fe6c:44ac.100: UDP, length 13<br>
10:55:41.215516 IP6 fe80::211:85ff:fe6c:44ac.59007 > fe80::211:85ff:fe6c:44ac.100: UDP, length 13<br>
10:55:41.215585 IP6 fe80::211:85ff:fe6c:44ac.59007 > fe80::211:85ff:fe6c:44ac.100: UDP, length 13<br>
10:55:41.215790 IP6 fe80::211:85ff:fe6c:44ac.59007 > fe80::211:85ff:fe6c:44ac.100: UDP, length 13<br>
10:55:41.215926 IP6 fe80::211:85ff:fe6c:44ac.59007 > fe80::211:85ff:fe6c:44ac.100: UDP, length 13<br>
10:55:41.216069 IP6 fe80::211:85ff:fe6c:44ac.59007 > fe80::211:85ff:fe6c:44ac.100: UDP, length 13<br>
10:55:41.216130 IP6 fe80::211:85ff:fe6c:44ac.59007 > fe80::211:85ff:fe6c:44ac.100: UDP, length 13<br> 
```

**4这是我的ifconfig：**

```
[root@wangsu Tmp2]# ifconfig<br>
eth0      Link encap:Ethernet  HWaddr 00:11:85:6C:44:AC  
          inet addr:192.168.23.38  Bcast:192.168.23.255  Mask:255.255.255.0<br>
          inet6 addr: fe80::211:85ff:fe6c:44ac/64 Scope:Link<br>
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1<br>
          RX packets:1174940938 errors:0 dropped:0 overruns:0 frame:0<br>
          TX packets:626463551 errors:0 dropped:0 overruns:0 carrier:0<br>
          collisions:0 txqueuelen:100<br> 
          RX bytes:378565405153 (352.5 GiB)  TX bytes:126427805747 (117.7 GiB)<br>
          Base address:0x3400 Memory:fd000000-fd020000<br> 

lo        Link encap:Local Loopback 
          inet addr:127.0.0.1  Mask:255.0.0.0<br>
          inet6 addr: ::1/128 Scope:Host<br>
          inet6 addr: ::127.0.0.1/0 Scope:Compat<br>
          UP LOOPBACK RUNNING  MTU:16436  Metric:1<br>
          RX packets:188781410 errors:0 dropped:0 overruns:0 frame:0<br>
          TX packets:188781410 errors:0 dropped:0 overruns:0 carrier:0<br>
          collisions:0 txqueuelen:0<br> 
          RX bytes:582726106596 (542.7 GiB)  TX bytes:582726106596 (542.7 GiB)<br> 
```

顺便说一句，在运行服务器和客户端之前，我已经停止了 iptables。更奇怪的是，在我的另一台电脑上它运行正常。

所以为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:41:54.843

除了我评论中提供的解决方案之外，也许您应该尝试一个类似的解决方案，允许您绑定到特定的界面。

我认为问题在于您对主机和端口进行了 DNS 查询，而您应该直接绑定到主机地址和端口。

像这样的东西：

```
// First convert the address string to its binary form
boost::asio::ip::address_v6 address =
    boost::asio::ip::address_v6::from_string(host_);

// Create the endpoint
boost::asio::ip::udp::endpoint endpoint(address, atoi(port_.c_str()));

// And finally create a bound socket
boost::asio::ip::udp::socket socket(io_service, endpoint); 
```

# javascript - 从 javascript 获取 MVC 控制器中的操作参数时出错

> ID：11999926
> 
> 赞同：0
> 
> 时间：2012-08-17T04:47:44.173
> 
> 标签：javascript, jquery, asp.net-mvc, model-view-controller

我需要将值从 javascript 传递到我的控制器操作。

```
 $.getJSON('/gallery/PublishImage', { imageid: itemsarray }, function (mydata) {

    }); 
```

在 javascript 中，它有一个值。在控制器上，它为空

```
 public ActionResult PublishImage(string imageid)
    {
        var mydata = imageid;
        return Json(mydata,JsonRequestBehavior.AllowGet);

    } 
```

如何解决这个问题。

我的整个代码是：

```
function publish() {
    debugger;

    var $trash = $("#trash li");
    var itemsarray = [];

    var lis = document.getElementById("trash").getElementsByTagName("li");
    for (var i = 0; i < lis.length; i++) {
        var item = lis[i].children[0].id;
        itemsarray.push(item);
    }

    $.getJSON('@Url.Action("PublishImage")', { imageids: itemsarray }, function (mydata) {

    }); 
```

在控制器中

```
public ActionResult PublishImage(string[] imageids)
    {
        var mydata = imageids;
        return Json(mydata,JsonRequestBehavior.AllowGet);

    } 
```

对于 testig 使用的字符串。但在上面的代码中也返回 null。有什么遗漏的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:02:41.027

鉴于这个 javascript 变量的名称，我强烈怀疑它`itemsarray`不是字符串，而是某种 javascript 对象（数组？）。它必须是字符串才能工作：

```
var itemsarray = 'foo bar';
$.getJSON('/gallery/PublishImage', { imageid: itemsarray }, function (mydata) {

}); 
```

如果你想发送一个数组，那么你可以这样做：

```
var itemsarray = ['foo', 'bar', 'baz'];
$.getJSON('/gallery/PublishImage', { imageids: itemsarray }, function (mydata) {

}); 
```

和你的控制器动作：

```
public ActionResult PublishImage(string[] imageids)
{
    var mydata = imageids;
    return Json(mydata, JsonRequestBehavior.AllowGet);
} 
```

# jquery - 如何使用 jQuery 获取表格中的当前单元格？

> ID：11999930
> 
> 赞同：0
> 
> 时间：2012-08-17T04:47:54.853
> 
> 标签：jquery, cells

所以我正在尝试使用 HTML 和 jQuery 创建一个实时更新表。每行都包含费用，并且行中的每个单元格都附加了一个特定的公式。如果用户编辑一行中的任何单元格，那么该行中的其他单元格将反映更改。

例子：

```
[Cell 1] [Cell 2] [Cell 3]

[Cell 1] = 1;
[Cell 2] = [Cell 1] * 2
[Cell 3] = [Cell 1] * 12 
```

如果表格在模糊或 keyup 上更新，我会喜欢它，但我不知道如何获取当前单元格，并更新该特定行中的其他单元格。基本上，我会检查行中的哪个单元格被编辑，并相应地更新其他单元格。

```
if(cell1 was updated) { update cell2, cell3 }

else if(cell2 was updated) { update cell1, cell3 }

else if(cell3 was updated) { update cell1, cell2 } 
```

我尝试这个来获取当前单元格的 ID，并使用它来获取该行中另一个单元格的值。没用：

```
var id;

$(".moneyTable input").focus(function () {
             id = this;
        });

$('.moneyTable input').blur(function() {
            calculateRow(id);
        });

function calculateRow(id) {
        var a = $(id).closest('tr').children('td:eq(2)').text();
        alert(a);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:17:56.613

> *“我不知道如何获取当前单元格，并更新该特定行中的其他单元格”*

当您的事件处理程序被调用`this`时，将引用相关元素，因此您可以从那里找出它属于哪一行：

```
$('.moneyTable input').blur(function() {
    var $thisInput = $(this),
        $thisTD = $thisInput.parent(), // or $thisInput.closest("td")
        $thisTR = $thisInput.closest("tr"),
        $otherCells = $thisTR.find("input").not(this); // and so forth
}); 
```

至于检查单击的单元格是单元格 1、2 还是 3，有几种方法可以做到这一点。一个是给他们上课`class="cell1"`等等，然后做：

```
if($thisInput.hasClass("cell1")) {
    // do something 
```

或检查`.index()`行内父 td 的：

```
if($thisTD.index() === 1) {
    // second cell (zero-based indexes) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:03:53.437

我认为您正在寻找的是类似 exel 的插件，它可以让您的表格像电子表格一样工作

试试这个插件我想这就是你想要的

[http://www.pengoworks.com/workshop/jquery/calculation/calculation.plugin.htm](http://www.pengoworks.com/workshop/jquery/calculation/calculation.plugin.htm)

# email - 在java中发送电子邮件

> ID：11999935
> 
> 赞同：0
> 
> 时间：2012-08-17T04:48:23.007
> 
> 标签：email, java

我正在创建一个应用程序，我想在其中向我的客户发送电子邮件。当我编译下面的代码时它可以，但是当我运行它时它给了我如下错误

```
java code:
import java.util.*;
import javax.mail.*;
import javax.mail.internet.*;
import javax.activation.*;

public class SendEmail
{
   public static void main(String [] args)
   {   

     String to = "prakash_d22@rediffmail.com";    
      String from = "web@gmail.com";    
      String host = "localhost";    
      Properties properties = System.getProperties();    
      properties.setProperty("smtp.gmail.com", host);   
          Session session = Session.getDefaultInstance(properties); 
      try{         
         MimeMessage message = new MimeMessage(session);     
         message.setFrom(new InternetAddress(from));        
         message.addRecipient(Message.RecipientType.TO,new InternetAddress(to));      
         message.setSubject("This is the Subject Line!");        
         message.setText("This is actual message");       
         Transport.send(message);
         System.out.println("Sent message successfully....");
      }catch (MessagingException mex) {
         mex.printStackTrace();
      }
   }
} 
```

错误： ![在此处输入图像描述](../Images/08d1b5d35f396a4bc8f11ef02f58bb80.png)

请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T04:54:46.350

```
 String host = "smtp.gmail.com";

            Properties properties = new Properties(); 
```

设置以下属性

```
 properties .put("mail.smtp.starttls.enable", "true");
        properties .put("mail.smtp.host", host);
        properties .put("mail.smtp.user", username);
        properties .put("mail.smtp.password", password);
        properties .put("mail.smtp.port", "587");
        properties .put("mail.smtp.auth", "true"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:04:11.313

您是否阅读过[JavaMail API 的基础知识](http://java.sun.com/developer/onlineTraining/JavaMail/contents.html)？

无论如何，据我所知，问题是您使用的配置无效。

> ```
> properties.setProperty("smtp.gmail.com", host); 
> ```

[正如您在 JavaMail API 文档](http://javamail.kenai.com/nonav/javadocs/overview-summary.html)中所见，JavaMail 不支持名为`smtp.gmail.com`. 你可能想要的实际上是......

```
properties.setProperty("mail.smtps.host", host); 
```

我怀疑您希望使用[Gmail 的 SMTPS 服务器](http://email.about.com/od/accessinggmail/f/Gmail_SMTP_Settings.htm)，而不是`localhost`您现在拥有的托管服务器，因此我建议您更改代码，以便...

```
final String host = "smtp.gmail.com"; 
```

您还希望使用身份验证，这`JavaMail`表明您可以[在 Gmail 上的常见问题解答](http://www.oracle.com/technetwork/java/javamail/faq/index.html#gmail)中执行以下操作：

```
properties.setProperty("mail.smtps.auth", "true"); 
```

* * *

请注意，Gmail 需要进行身份验证才能发送邮件。似乎另一个答案建议您可以使用会话属性配置用户名/密码；不幸的是，这是不正确的。

你想要做的是使用一个[`Authenticator`](http://javamail.kenai.com/nonav/javadocs/javax/mail/Authenticator.html).

```
final Session session = Session.getInstance(properties, new Authenticator() {

  static final PasswordAuthentication AUTH = new PasswordAuthentication(USER, PASS);

  protected PasswordAuthentication getPasswordAuthentication() {
    return AUTH;
  }
}); 
```

# string - perl : 基于模式匹配的字符串提取

> ID：11999942
> 
> 赞同：-3
> 
> 时间：2012-08-17T04:48:50.607
> 
> 标签：string, perl, pattern-matching

文件 FILE1 有数千行，其终止模式为 _Pattern1。

第二个文件也有数千行具有相同的终止模式_Pattern1。

我现在必须：

*   逐行读取 FILE1

*   找出该行是否有任何以 _Pattern1 结尾的字符串

*   提取字符串并将其存储到变量中

*   打开 FILE2 并逐行读取

*   找出刚刚从 FILE2 读取的行是否包含存储在上述变量中​​的字符串

这是如何在 perl 中完成的？

编辑2：

好吧，通过谷歌搜索并参考下面列出的链接，我解决了我的问题。这是代码片段。

```
#!/usr/bin/perl
use strict;
use warnings;

my $OriginalHeader=$ARGV[0]; ## Source file
my $GeneratedHeader=$ARGV[1];## File to compare against
my $DeltaHeader=$ARGV[2];    ## File to store misses

my $MatchingPattern="_Pos";
my $FoundPattern;

open FILE1, $OriginalHeader or die $!;
open FILE2, $GeneratedHeader or die $!;
open (FILE3, ">$DeltaHeader") or die $!;

my $lineFromOriginalHeader;
my $lineFromGeneratedHeader;
my $TotalMacrosExamined = 0;
my $TotalMacrosMissed = 0;

while($lineFromOriginalHeader=<FILE1>)
{
 if($lineFromOriginalHeader =~ /$MatchingPattern/)
  {
    my $index = index($lineFromOriginalHeader,$MatchingPattern);

    my $BackIndex = $index;
    my $BackIndexStart = $index;

    $BackIndex = $BackIndex - 1;

    ## Use this while loop to extract the substring. 
    while (1)
    {
      my $ExtractedChar = substr($lineFromOriginalHeader,$BackIndex,1);
      if ($ExtractedChar =~ / /)
      {
        $FoundPattern = substr($lineFromOriginalHeader,$BackIndex + 1,$BackIndexStart + 3 - 
                                                                                $BackIndex); 
        print "Identified $FoundPattern \n";
        $TotalMacrosExamined = $TotalMacrosExamined + 1;
        ##Skip the next line
        $lineFromOriginalHeader = <FILE1>;
        last;       
      }
     else
     {
      $BackIndex = $BackIndex - 1;
     }

   } ##while(1)

 ## We now look for $FoundPattern in FILE2
 while ($lineFromGeneratedHeader = <FILE2>)
 {
  if (index($lineFromGeneratedHeader,$FoundPattern)!= -1)
   {
     ##Pattern found. Reset file pointer and break out of while loop
     seek FILE2,0,0;
     last;
   }
   else
   {
     if (eof(FILE2) == 1)
      {         
        print FILE3 "Generated header misses $FoundPattern\n";
        $TotalMacrosMissed = $TotalMacrosMissed + 1;
        seek FILE2,0,0; 
        last;       
      }
   }
} ##while(1)

}
else
{
  ##NOP
}
} ##while (linefromoriginalheader)

close FILE1;
close FILE2;
close FILE3;
print "Total number of bitfields examined = $TotalMacrosExamined\n";
print "Number of macros obsolete = $TotalMacrosMissed\n"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:03:48.483

我一生都在用 C 编程，我用谷歌搜索了下面 perl 结构的用法，并编写了一个类似 C 的程序。这对我来说完美无缺。:-)

编辑：这是为了澄清为什么我必须在下面的算法中跳过一行。在第二个文件中检索并随后搜索的模式出现在两个连续的行上。因此，可靠地检测到它的第一次出现就足够了。也是一个挑剔，始终保证包含模式的子字符串始终是该行的第二个子字符串。

例如#define Something_Pos（一些值）

```
#!/usr/bin/perl
use strict;
use warnings;

my $OriginalHeader=$ARGV[0];
my $GeneratedHeader=$ARGV[1];
my $DeltaHeader=$ARGV[2];

my $MatchingPattern="_Pos";
my $FoundPattern;

open FILE1, $OriginalHeader or die $!;
open FILE2, $GeneratedHeader or die $!;
open (FILE3, ">$DeltaHeader") or die $!;

my $lineFromOriginalHeader;
my $lineFromGeneratedHeader;
my $TotalMacrosExamined = 0;
my $TotalMacrosMissed = 0;

while($lineFromOriginalHeader=<FILE1>)
{
 if($lineFromOriginalHeader =~ /$MatchingPattern/)
 {
  my $index = index($lineFromOriginalHeader,$MatchingPattern);

  my $BackIndex = $index;
  my $BackIndexStart = $index;

  $BackIndex = $BackIndex - 1;

  ## Use this while loop to extract the substring. 
  while (1)
  {
   my $ExtractedChar = substr($lineFromOriginalHeader,$BackIndex,1);
   if ($ExtractedChar =~ / /)
    {
     $FoundPattern = substr($lineFromOriginalHeader,$BackIndex + 1,$BackIndexStart + 3 - 
                                                                                $BackIndex); 
     print "Identified $FoundPattern \n";
     $TotalMacrosExamined = $TotalMacrosExamined + 1;
     ##Skip the next line
     $lineFromOriginalHeader = <FILE1>;
     last;       
    }
   else
    {
     $BackIndex = $BackIndex - 1;
    }

} ##while(1)

 ## We now look for $FoundPattern in FILE2
while ($lineFromGeneratedHeader = <FILE2>)
{
 ##print "Read the following line from FILE2: $lineFromGeneratedHeader\n";

  if (index($lineFromGeneratedHeader,$FoundPattern)!= -1)
   {
     ##Pattern found. Close the file and break out of while loop
     seek FILE2,0,0;
     last;
   }
   else
   {
     if (eof(FILE2) == 1)
      {         
        print FILE3 "Generated header misses $FoundPattern\n";
        $TotalMacrosMissed = $TotalMacrosMissed + 1;
        seek FILE2,0,0; 
        last;       
      }
   }
 } ##while(1)

}
else
{

}
} ##while (linefromoriginalheader)

close FILE1;
close FILE2;
close FILE3;
print "Total number of bitfields examined = $TotalMacrosExamined\n";
print "Number of macros obsolete = $TotalMacrosMissed\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:45:14.743

只是让你的代码更加 Perly 的第一步。实际上还可以做更多的事情，包括`$some_var`通常`$SomeVar`在 Perl 中使用的方法，但我没有做到这一点。

```
#!/usr/bin/perl
use strict;
use warnings;

my ($OriginalHeader, $GeneratedHeader, $DeltaHeader) = @ARGV;
my $MatchingPattern=qr/(\S*_Pos)/; # all non-whitespace terminated by _Pos

open my $file1, '<', $OriginalHeader  or die $!;
open my $file2, '<', $GeneratedHeader or die $!;
open my $file3, '>', $DeltaHeader     or die $!;

my $TotalMacrosExamined = 0;
my $TotalMacrosMissed = 0;

while(my $lineFromOriginalHeader=<$file1>) {
  next unless $lineFromOriginalHeader =~ $MatchingPattern;
  my $FoundPattern = $1; # matched string

  print "Identified $FoundPattern \n";
  $TotalMacrosExamined++;

  ##Skip the next line
  <$file1>;

  ## We now look for $FoundPattern in FILE2
  my $match_found = 0;
  while (my $lineFromGeneratedHeader = <$file2>) {
    if (index($lineFromGeneratedHeader,$FoundPattern)!= -1) {
      ##Pattern found. Close the file and break out of while loop
      $match_found++;
      last;
    } 
  }

  unless ($match_found) {
    print $file3 "Generated header misses $FoundPattern\n";
    $TotalMacrosMissed++;
  }

  seek $file2,0,0;

}

print "Total number of bitfields examined = $TotalMacrosExamined\n";
print "Number of macros obsolete = $TotalMacrosMissed\n"; 
```

# java - 值包含多个枚举值

> ID：11999944
> 
> 赞同：1
> 
> 时间：2012-08-17T04:48:55.390
> 
> 标签：java, enums

我有这个枚举：

```
public enum Direction {
    LEFT,
    RIGHT,
    ABOVE,
    BELOW
} 
```

我可以获取并设置一个`Direction`包含 2 个或更多值的变量吗，例如：

```
Direction fromDirection = Direction.LEFT + Direction.ABOVE 
```

如果可能，请告诉我如何实现它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T05:01:24.780

您可以使用`java.util.EnumSet`：

```
final Set<Direction> northEast = EnumSet<Direction>.of(Direction.NORTH, Direction.EAST); 
```

当然，您可以使用任何其他集合实现，但`EnumSet`类型被实现为位向量，非常节省空间和时间，并且可能是实现您目标的最佳内置工具。

您可能还想在检查有效组合的枚举类型中定义一个静态方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T05:50:51.510

你也可以使用

```
private static EnumSet<Direction> someDirection = EnumSet.of(Direction.LEFT,Direction.RIGHT) ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-13T04:51:06.150

你可以通过一些**位**黑客来实现这一点。没有比这更快的过程了。在这种情况下，EnumSet 较慢。

它基本上将**枚举**转换为数字，然后存储在一个**整数**中。**整数**的每个**字节**表示**枚举**是打开还是关闭。但是它有一个缺点，你不能使用大于 32 个值的**枚举。**实际上，如果您将其重新设计为使用**长**值，您可以使用多达 64 个值**枚举**。

 ******这是我用来将多个布尔数据以单个整数大小存储到数据库中的巧妙技巧。我可以用 1 列表示所有布尔值的总和，而不是让 32 列每列代表一个布尔值。唯一的缺陷是您无法一眼就知道哪些布尔值是开/关的。

```
public enum ENUM
{
    AAA, SSS, DDD, FFF, GGG, HHH, JJJ, KKK, LLL, ZZZ, XXX, CCC;

    public static int add(int addTo, ENUM val)
    {
        return addTo | (1 << val.ordinal());
    }

    public static int remove(int removeFrom, ENUM val)
    {
        return removeFrom & ~(1 << val.ordinal());
    }

    public static boolean contains(int in, ENUM val)
    {
        return (in & (1 << val.ordinal())) != 0;
    }
}

public static void main(String[] args)
{
    int enums = 0;
    enums = ENUM.add(enums, ENUM.AAA);
    enums = ENUM.add(enums, ENUM.SSS);

    for (ENUM enu : ENUM.values())
        if (ENUM.contains(enums, enu))
            System.out.println(enu);
    System.out.println("Operation 2.");

    enums = ENUM.remove(enums, ENUM.AAA);
    enums = ENUM.remove(enums, ENUM.KKK);
    enums = ENUM.add(enums, ENUM.DDD);

    for (ENUM enu : ENUM.values())
        if (ENUM.contains(enums, enu))
            System.out.println(enu);
} 
```

打印了以下结果：

```
AAA
SSS
Operation 2.
SSS
DDD 
```

我将尝试以最简单的方式解释这一点。

**val.ordinal()**是枚举的序号。

**1 << val.ordinal()**将带有 X 个空格的位向左移动。（因为 1 = 00000000 00000000 00000000 00000001 在二进制中，您最多可以移动它 31 次）基本上枚举顺序是整数中的位顺序。如果枚举的顺序是 5，那么它将是 1 << 5，这意味着我们将二进制中的 1 向左移动 5 次。结果为 00000000 00000000 00000000 00100000。

结果 =**添加到 | enumNum**这将检查枚举位的位置并将其设置为结果整数中的 1。因此，如果 enumNum 为 00000000 00000000 00000000 00100000 并且结果（addTo）当前为 00000000 00000000 00000000 00000001，它将变为 00000000 00000000 00000000 0010。

result = **removeFrom & ~enumNum**首先，' **~** ' 反转位状态。“ **＆** ”检查所有位并将其设置为0，除非两个整数的当前位为1.所以让我们参见0000000000000000 00000000 00000000000000000000000000000000000000 00000001，因为唯一的一对 1 是最右边的一对。

**result & enumNum**正如我上面所说，所有位都变为 0，除非有一对 1。00000000 00000000 00000000 00000001 & 00000000 00000000 00000000 00100000\. 这里没有一对 1，所以看起来结果是**=0**。如果我们将当前结果设置为 00000000 00000000 00000000 00100001 那么我们 & 00000000 00000000 00000000 00100000 我们将得到 00000000 00000000 00000000 00100000 作为最终结果。第 5 位对是一对 1，这就是它保留的原因。返回的数字是 2^5=32，即**!= 0**。

有关按位运算如何工作的更多详细信息，请查看[此处](http://www.roseindia.net/java/master-java/bitwise-bitshift-operators.shtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T04:53:49.750

不，您不能将值设置为枚举。它们是常量，每个常量都是[Enum 类型](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)的实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T04:54:13.850

> 我可以获取并设置包含 2 个或更多值的方向变量吗

您已经将类型声明`Direction`为枚举，如果您再次尝试将其声明为某个变量，则会导致变量重定义错误。

枚举也是常数，以后不能重置那里的值。******

# javascript - 在 Jquery 和 css 中切换到两种不同的状态

> ID：11999946
> 
> 赞同：2
> 
> 时间：2012-08-17T04:49:10.793
> 
> 标签：javascript, jquery, css

我有一个 Jquery 函数，它执行如下图所示的事情

1.我有一个div，在一页中列出所有产品，有兴趣的人可以选择打勾或打叉。

2.单击 Image1 中的十字会更改 div，如图 2 所示（即）将显示不感兴趣，并且仅在符号中出现勾号

3.单击 Image2 中的勾号 它应该使 div 与 Image 1 中的一样（即）我感兴趣的将显示出来，并且交叉只会出现在符号中

![](../Images/e85999524d77915ea9283056df7acc6b.png)

我创建了 4 个单独的图像并编写了如下的类

```
.CrossMe
    {
        background : url(CrossMe.gif) no-repeat;
        cursor     : pointer;
        float      : left;
        height     : 44px;
        width      : 51px;
    }

    .TickMe
    {
        background : url(TickMe.gif) no-repeat;
        cursor     : pointer;
        float      : left;
        height     : 44px;
        width      : 49px;
    }

    .NotInterested
    {
        background : url(NotInterested.gif) no-repeat;
        cursor     : pointer;
        float      : left;
        height     : 44px;
        width      : 241px;
    }

    .Interested
    {
        background : url(IamInterested.gif) no-repeat;
        cursor     : pointer;
        float      : left;
        height     : 44px;
        width      : 243px;
    } 
```

和 Jquery 改变类如下

```
$('document').ready(function(){             
        $('.CrossMe').click(function(){
            $(this).prev().attr('class', 'TickMe');             
            $(this).toggleClass('NotInterested');

            $(this).prev().click(function(){
                $(this).next().attr('class', 'CrossMe');
                $(this).toggleClass('Interested');
            });
        });

        $('.TickMe').click(function(){
            $(this).next().attr('class', 'CrossMe');
            $(this).toggleClass('Interested');

            $(this).next().click(function(){
                $(this).next().attr('class', 'TickMe');
                $(this).toggleClass('NotInterested');
            });
        });
    }); 
```

和 HTML 如下

```
<pre>
<div class="Interested"></div>
<div class="CrossMe"></div>
</pre> 
```

现在我的代码只工作一次，之后它工作但不像我预期的那样工作。

有人可以帮我解决这个问题吗

请不要使用 ID，因为我将在同一页面上显示多个包含产品的 div

提前致谢

我在下面粘贴了整个 HTML 代码

```
<pre>
       <style>
        .CrossMe
        {
            background : url(CrossMe.gif) no-repeat;
            cursor       :  pointer;
            float            : left;
            height       : 44px;
            width            : 51px;
        }

        .TickMe
        {
            background : url(TickMe.gif) no-repeat;
            cursor       :  pointer;
            float            : left;
            height       : 44px;
            width            : 49px;
        }

        .NotInterested
        {
            background : url(NotInterested.gif) no-repeat;
            cursor       :  pointer;
            float            : left;
            height       : 44px;
            width            : 241px;
        }

        .Interested
        {
            background : url(IamInterested.gif) no-repeat;
            cursor       :  pointer;
            float            : left;
            height       : 44px;
            width            : 243px;
        }

        .Button
        {
        cursor  :   pointer;
        }
        </style>
        <script>

        $('document').ready(function(){             
            $('.CrossMe').click(function(){
                    $(this).prev().attr('class', 'TickMe');             
                    $(this).toggleClass('NotInterested');

                    $(this).prev().click(function(){
                        $(this).next().attr('class', 'CrossMe');
                        $(this).toggleClass('Interested');
                    });
            });

            $('.TickMe').click(function(){
                    $(this).next().attr('class', 'CrossMe');
                    $(this).toggleClass('Interested');

                    $(this).next().click(function(){
                        $(this).prev().attr('class', 'TickMe');
                        $(this).toggleClass('NotInterested');
                    });
            });
        });     

        </script>

      <div class="Interested"></div>
      <div class="CrossMe"></div>
</pre> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:19:44.797

抱歉没有检查解决方案，但如果它不起作用，我会尝试改进，试试这个

```
$('document').ready(function(){
    var $pre = $('pre');
    $pre.delegate('div.CrossMe', 'click', function(){
        $(this).attr('class', 'TickMe') 
             .prev().attr('class', 'NotInterested');
    });

    $pre.delegate('div.TickMe', 'click', function(){
        $(this).attr('class', 'CrossMe')
             .prev().attr('class', 'Interested');
    });
}); 
```

我使用`var $pre = $('pre');`因为它是某种优化。您需要将处理程序附加到`<pre>`DOM 对象 2 次。你可以这样做：

```
$('pre').someMethod();
$('pre').someMethod(); 
```

但是为什么要调用`jQuery`两次构造函数最终得到相同的对象呢？最好只调用一次，将其保存到变量中并进一步使用它。

我经常看到类似的东西：

```
$('div').click(function() {
    $(this).methodcall();
    $(this).anotherMethodcall();
    $(this).yetAnotherMethodcall();
}); 
```

这不是一个好方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T05:19:03.370

不确定这是否能解决您的问题，但通过 CSS 更多地处理这些状态可能会更紧凑。我在这里整理了一个简单的例子：http: [//jsfiddle.net/u7336/](http://jsfiddle.net/u7336/)。我添加了一些注释，您可以在其中定义每个状态的图像，尽管我可能弄错了顺序。你明白了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T05:24:18.840

由于每次点击都会操作 DOM 对象，因此点击事件需要在运行时重新绑定；您可以尝试使用以下`.on()`方法：

```
$('document').ready(function(){             
    $('body').on('click', '.CrossMe', function(){
        $(this).prev().attr('class', 'TickMe');             
        $(this).toggleClass('NotInterested');

        $(this).prev().click(function(){
            $(this).next().attr('class', 'CrossMe');
            $(this).toggleClass('Interested');
        });
    });

    $('body').on('click', '.TickMe', function(){
        $(this).next().attr('class', 'CrossMe');
        $(this).toggleClass('Interested');

        $(this).next().click(function(){
            $(this).next().attr('class', 'TickMe');
            $(this).toggleClass('NotInterested');
        });
    });
}); 
```

没有检查，但应该工作！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T05:27:52.467

**使用下面的 jQuery 脚本：**

```
$('document').ready(function(){             
    $('.CrossMe').click(function(){
    $(this).toggleClass('TickMe');
    var prevClass = $(this).prev().attr('class');
        if(prevClass=='Interested'){
        $(this).prev().removeClass('Interested').addClass('NotInterested');
        } 
        else{
        $(this).prev().removeClass('NotInterested').addClass('Interested');
        }
    });
    }); ​ 
```

# reporting-services - 如何全局启用 SQL Server 2008 R2 Reporting Services 数据缓存

> ID：11999947
> 
> 赞同：0
> 
> 时间：2012-08-17T04:49:13.143
> 
> 标签：reporting-services, sql-server-2008-r2

我是这个版本的报告服务的新手。我做了一些研究，发现了微软的网站：

**设置报告缓存选项**

1.  指向库中的一份报告。

2.  单击向下箭头，然后选择管理处理选项。

3.  在数据刷新选项中，单击使用缓存数据。如果您看到“无法缓存此报表，因为未存储一个或多个数据源凭据”，则该报表未配置为无人值守运行，您必须在设置此选项之前修改数据源以使用存储的凭据。有关说明，请参阅如何：计划报表和订阅处理（SharePoint 集成模式下的 Reporting Services）。

4.  在缓存选项中，指定缓存的过期方式：

5.  输入缓存将过期的分钟数。

6.  使用共享计划在计划中指定的时间清除缓存。

7.  创建自定义计划以在您指定的时间清除缓存。

如果我只有一小手报告来单独执行此操作，那就太好了，但我至少有 20 个报告将安装到多个系统，因此每次手动执行此操作是不可行的。

我想知道的是有一种方法可以通过脚本或其他方式设置多个报告，其中缓存选项设置为不缓存，而不是默认缓存报告 10080 分钟。这将允许它们按需运行。是的，我意识到 Microsoft 的目的是减轻数据库的负载，但是我需要运行的报告的性质要求它们使用数据库中的当前数据按需运行，而不是以前缓存的报告版本.

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T06:12:35.707

我们遇到了同样的问题，结果证明是我们使用的报告部署工具 (RSBuild) 为每个报告设置缓存。我们从部署配置文件中删除了缓存并重新部署了报告，问题就消失了。

# javascript - 为什么我的 JavaScript 会导致 HTML 验证错误？

> ID：11999949
> 
> 赞同：1
> 
> 时间：2012-08-17T04:49:18.587
> 
> 标签：javascript, html, validation, w3c

所以，我基本上得到了这个页面，当我通过 W3C Validator 运行它时，它没有进行验证。有谁知道为什么？

[http://jsfiddle.net/BcrW9/1/](http://jsfiddle.net/BcrW9/1/)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T05:04:59.860

这是你的 jquery 包含。可能是某种编码问题。从另一个站点复制代码（如脚本块）时偶尔会发生这种情况。我认为 OSX 保留了原始编码，而 Windows 将剪贴板文本转换为某种标准编码。无论如何，这行得通。我只是复制了第二个脚本标签，粘贴了它，更改了 src 值，然后删除了您从其他地方复制的那个。[http://jsfiddle.net/BcrW9/2/](http://jsfiddle.net/BcrW9/2/)

PS——请在评论中确认或否认您使用 OSX。这在 OSX 中一直发生在我身上。在 Windows 中从来没有遇到过这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T07:06:26.153

真的只是扩展了 MicronXD 的答案。紧跟在`<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">`文本之后但在换行符之前的字符是**U+200C ZERO WIDTH NON-JOINER**。（我需要一个十六进制编辑器才能看到这个）。

对于 HTML5 解析器来说，这是一个普通的文本字符，所以它假定`head`元素已经完成并且`body`元素已经开始（记住结束头和开始正文标签都是可选的）所以它推断这些标签，创建正文元素和将杂散字符添加到其中。

然后验证器解析器看到结束头标记和开始主体标记并将它们报告为错误，因为解析器已经处于“In body”状态。

要消除杂散字符，只需选择并删除两个脚本行之间的字符，包括`>`第一个脚本行末尾的 和`<`第二个脚本行开头的 ，然后重新键入您需要的字符。

# android - 如何在Android上关闭父线程

> ID：11999951
> 
> 赞同：0
> 
> 时间：2012-08-17T04:49:25.077
> 
> 标签：android, multithreading

我想逐步将日期上传到网络服务。我的代码：

```
private Thread WebServiceThread;

public void onCreate(Bundle savedInstanceState) {
    //...
    WebServiceThread = new WebService();
    WebServiceThread.start();
}

private class WebService extends Thread {
    public void run() {
        try {
            new WebServiceUpload().execute("");
        } catch (Exception e) {
            Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT)
                .show();
        }
    }
} 

private class WebServiceUpload extends AsyncTask<String, Void, String> {
        protected String doInBackground(String... data) {
            // upload part
        }

        protected void onPostExecute(String result) {
            //...
            WebServiceThread = new WebService();
            WebServiceThread.start();
            //<Tab>__what to do here__</Tab>
            //...
        }
} 
```

现在可以运行了，但是会导致设备变慢。请告诉我如何关闭父线程或重新启动父线程的方式来解决这个问题。（或针对同一目标的其他练习。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:36:09.480

您不必像那样链接线程。只需创建一个`AsyncTask`分步上传数据的扩展`doInBackground`。如果您想发布进度报告，您可以通过调用`publishProgress`.

您从工作线程创建一个的方法`WebServiceUpload`真的很奇怪，很可能不起作用。`AsyncTask`设计为从 UI 线程开始。`new WebServiceUpload().execute()`当您想开始上传步骤时，只需从主线程调用您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:31:03.497

在你的 onPostExecute 检查线程是否正在运行然后强制它停止。

```
protected void onPostExecute(String result) {
            //...
            **if (WebServiceThread.isAlive())
                 WebServiceThread.stop();**
            WebServiceThread = new WebService();
            WebServiceThread.start();
            //<Tab>__what to do here__</Tab>
            //...
        } 
```

# php - Cake PHP 电子邮件 - 包括电子邮件中的链接

> ID：11999953
> 
> 赞同：0
> 
> 时间：2012-08-17T04:49:45.183
> 
> 标签：php, javascript, cakephp

我正在使用 cakephp 框架。我正在尝试发送我想要一个链接的电子邮件，该链接将打开一个新的弹出窗口。但是当我尝试点击 url 时，它显示 url 为 nojavascript:newPopup(url); 请帮帮我。

```
<script type="text/javascript">
// Popup window code
function newPopup(url) {
popupWindow = window.open(url,'popUpWindow','height=600,width=900,left=10,top=10,resizable=yes,
scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no,status=yes');
}
</script>

<a href="javascript:newPopup('<?php echo $this->Html->url(Configure::read('Config.URL'));?>data/CouponOffer/<?php echo $data['CouponCode']['code']; ?>.jpg');">Please print out this coupon to redeem offer.</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:48:48.947

尝试这个 ：

```
<script type="text/javascript">
// Popup window code
function newPopup(url){
popupWindow = window.open(url,'popUpWindow',(height=600,width=800,left=10,top=10,resizable=1,scrollbars=1,toolbar=0,menubar=0,directories=0,status=0));
}
</script>

<a href="javascript:newPopup('<?php echo $this->Html->url(Configure::read('Config.URL'));?>data/CouponOffer/<?php echo $data['CouponCode']['code']; ?>.jpg');">Please print out this coupon to redeem offer.</a> 
```

# http - 使用 Node.js 将 HTTP 响应从 GET 请求传递到 PUT 请求

> ID：11999956
> 
> 赞同：0
> 
> 时间：2012-08-17T04:50:06.773
> 
> 标签：http, node.js, request

我想获取一个 GET 响应，并将其内容类型、长度和正文作为 HTTP 正文中的原始数据作为 PUT 请求发送。我尝试了请求（npm）和节点的 http.request 的各种组合，并且 PUT 请求中的数据总是损坏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:04:43.530

事实证明，问题是我运行其中一个请求的伪代理正在剥离一些必需的标头。唉，使用 Mikeal 的请求模块，您可以相当优雅地进行管道传输，即使是短视频等中等资源。

```
app.post '/pipeline', (req, res) ->
  request.get(req.body.url).pipe(request.put(req.body.couchURL)).pipe res 
```

# java - JList 边框在滚动时消失

> ID：11999960
> 
> 赞同：1
> 
> 时间：2012-08-17T04:50:17.007
> 
> 标签：java, swing, jscrollpane, jlist

![在此处输入图像描述](../Images/55727eb531773270ce41630b26a48277.png)

我有五个列表（包含在 a 中`jscrollpane`）添加到组布局中的 jpanel 中。列表的问题是当滚动条自动出现时，底部/顶部的边框会消失（列表 2、3、4）。如何确保所有列表看起来与第一个/最后一个列表一样的 wrt 边框？

我已经尝试使用 设置 viewportborder `setViewPortBroder`，但它并没有改变太多。2,3,4 显示为浅色边框，而其余列表具有双边框。

**编辑**

添加代码示例：

您看到的每个列表都是使用以下代码创建的：

```
 MyJList jList = new MyJList(value);
        jList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        jList.setModel(listModel);
        jList.setMinimumSize(new Dimension(135, 300));
        jList.setMaximumSize(new Dimension(135, 300));
        jList.clearSelection();
        jList.setSelectionBackground(Color.darkGray);
        jList.setSelectionForeground(Color.white);
        jList.setBorder(new LineBorder(Color.darkGray, 1));
        jList.setFixedCellHeight(30);
        jList.setFixedCellWidth(100);
        Font font = jList.getFont();
        jList.addListSelectionListener(new ListListener());
        return jList; 
```

MyList 是 JList 的扩展。除了存储一些与域相关的元数据之外，它没有什么特别的。然后，将列表添加到中间面板，如下所示：

```
private void layoutLists(JLabel[] labels, JList[] lists) {

        panel.removeAll();
        panel.setLayout(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.fill = GridBagConstraints.NONE;

        JScrollPane[] jScrollPanes = new JScrollPane[lists.length];
        for (int index = 0; index < lists.length; index++) {
            jScrollPanes[index] = new JScrollPane(lists[index]);
            jScrollPanes[index].setBorder(BorderFactory.createEmptyBorder());
            jScrollPanes[index].setMinimumSize(new Dimension(135, 300));
            jScrollPanes[index].setMaximumSize(new Dimension(135, 300));
            jScrollPanes[index].setPreferredSize(new Dimension(135, 300));
        }

        for (int index = 0; index < labels.length; index++) {
            gbc.gridx = index;
            gbc.gridy = 0;
            gbc.insets = new Insets(8, 8, 8, 8);
            panel.add(labels[index], gbc);
            gbc.gridy = 1;
            if (index == labels.length - 1) {
                gbc.insets = new Insets(8, 8, 8, 13);
            }
            panel.add(jScrollPanes[index], gbc);
        }} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T08:22:53.527

内部（JList）边框的顶部/底部部分不可见的解释是......如果出现垂直滚动条（列表滚动关闭）它们不可见

如果你坚持，要么：

*   切换边框 - 列表本身为空，滚动窗格上为 lineBorder 或
*   将 scrollPane 的 viewportBorderProperty 设置为 lineBorder

注意：不建议摆弄默认的 LAF 设置 - 组件是否有边框应留给 ui，以确保整个应用程序的视觉效果一致。将左边框线放在 scrollPane 的垂直滚动条旁边（无论是外部还是内部）看起来也不太好。

**编辑**

刚刚注意到您已经尝试了第二个选项（并且对结果不满意:-) 但是：如果滚动条可见，您*希望垂直边框线在哪里？*无论如何，回到当心：结果高度依赖 LAF ......

# backbone.js - 视图中选项卡的主干子路由

> ID：11999961
> 
> 赞同：1
> 
> 时间：2012-08-17T04:50:52.753
> 
> 标签：backbone.js, tabs, backbone-views, backbone-routing

我有两个选项卡的视图。单击选项卡时，我想：

1.  显示选项卡
2.  将哈希更改为`#view/tabName`

`#view/tab1`如果和之间的哈希值发生变化`#view/tab2`，则不会触发路由，但视图会显示**tab2**。如果哈希值从`#anotherView`变为`#view/tabName`，则路由将触发，并使用初始选项卡**tabName**呈现视图。

总而言之，当哈希在具有相同前缀的哈希之间发生变化时`#view`，**视图**将处理该事件，否则由**路由器**处理。

这是我当前的代码。

```
// router.js
define('router', [
    'jquery'
    , 'underscore'
    , 'backbone'
    , 'SomeView'

], function (
    $, _, backbone, SomeView
) {
    var router;

    router = backbone.Router.extend({
        routes: {
            'some-view': someView
            , 'some-view/:tab': someView
        }
        , initialize: function () {

        }
        , someView: function (tab) {
            var view; 
            view = new SomeView(tab);
            view.on('router:changeTab', function (tab) {
                that.navigate('some-view/' + tab);
            });

        }
    });
    return router;
});

// someView.js
define('SomeView', [
    'jquery'
    , 'underscore'
    , 'backbone'
], function (
    $, _, backbone
) {
    var SomeView;

    SomeView = backbone.View.extend({

        initialize: function (options) {
            this.tab = options.tab;

        }
        , render: function (callback) {

            // show the initial tab if given
            if (this.tab) {
                setTimeout(function () {
                    that.$el.find('[href="#' + that.tab + '-tab"]').click();
                }, 0);
            }

            return this;
        }
        , events: {
            , 'click .nav-tabs>li>a': 'showTab' // enable tabs
        }

        , showTab: function (e) {
            var that, tab, tabs;
            that = this;
            e.preventDefault();
            $(this).tab('show');  // I'm using bootstrap tab plugin
            // update hash
            tab = $(e.currentTarget).attr('href').split('-')[0].split('#')[1];
            that.trigger('router:changeTab', tab);
            // What I didn't know is how to prevent the handler from being 
            // invoked when the user press backward/forward button on the browser,
            // and let this view handle it (show the corresponding tab). 
        }
    return SomeView;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:09:16.797

您可以使用动态路由，您可以在其中指定以下路由：

```
routes : {
  "view/:tab_name" : "show_tab",
  "otherRoutes" : "other_methods"
},

show_tab : function(tab_name) {
  // render tab based on the parameter you receive
} 
```

因此，如果地址栏包含 url #view/tab1，那么您将在 show_tab 方法中收到 'tab1' 作为 tab_name 参数，对于 #view/tab2 也是如此。

您可以参考[Thomas Davis的](http://thomasdavis.github.com/)[此链接](http://backbonetutorials.com/what-is-a-router/)以了解有关骨干路由器的更多信息。

# python - gunicorn gevent worker 修补了哪些功能？

> ID：11999962
> 
> 赞同：14
> 
> 时间：2012-08-17T04:50:54.637
> 
> 标签：python, gevent, gunicorn

我正在使用 gunicorn 运行一些烧瓶和 django 应用程序，使用 gevent 工作者，并且有一些问题......

首先，我假设因为 gunicorn fork 和实例化我的进程，它会猴子修补标准模块，我不必自己调用 monkey.patch_all，它已经为我完成了，每个请求都作为 greenlet 运行，是吗正确的？

其次，这是重要的部分，哪些功能真的是被 gunicorn-gevent 修补的？当您使用 gevent 时，您总是可以选择要修补哪个功能（socket、patch、urllib）...所以，问题是，这些功能中的哪些真的是猴子修补了 bu gunicorn-gevent？如何更改此列表？

例如，对 monkey.patch_all() 的标准调用不会修补 urllib？我怎么知道它是否被修补？以及如何强制 gunicorn-gevent 修补它？

谢谢

乔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T20:37:16.440

看起来 gevent 工作人员在初始化时调用了 monkey.patch_all() 。

[https://github.com/benoitc/gunicorn/blob/master/gunicorn/workers/ggevent.py#L45](https://github.com/benoitc/gunicorn/blob/master/gunicorn/workers/ggevent.py#L45)

当您的应用启动时，您仍然可以调用自己的初始化代码。

对于烧瓶，我使用 gunicorn 贴纸。

my_app.ini：

```
[app:main]
use = egg:mypackage#myapp
# app config goes here

[server:main]
use = egg:gunicorn#main
# you can put gunicorn config options here 
```

setup.py 在你的包中：

```
entry_points={
    'paste.app_factory': [
        'myapp = mypackage.module:app_factory'
    ] 
```

例如 mypackage/module.py：

```
def app_factory(global_config, **config):
    # initialization code / gevent monkey patch goes here
    # also you can assemble your wsgi stack.
    # then return your flask app
    return app 
```

现在你可以运行它了：

```
gunicorn_paster my_app.ini 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-07T02:06:09.233

我已经回答了一个类似的问题，这可能会解决您的问题。
参考这个问题：[Do I need call monkey.patch_all() in Django+Gunicorn+GEvent+Boto structure？](https://stackoverflow.com/questions/20425165/do-i-need-call-monkey-patch-all-in-djangogunicorngeventboto-structure/20436644#20436644)

首先，gunicorn 默认使用**SyncWorkers**，如果您不更改配置，则服务器不会使用 greenlets。即使您全部修补，我认为它也没有太大帮助，因为 gunicorn 默认一次处理一个请求。

其次，看看[GeventWorker](https://github.com/benoitc/gunicorn/blob/master/gunicorn/workers/ggevent.py#L63)的源代码，它实际上是猴子补丁。

# ruby-on-rails - 如何在 Rails active_admin 资源的编辑视图中自定义表单？

> ID：11999964
> 
> 赞同：0
> 
> 时间：2012-08-17T04:51:02.867
> 
> 标签：ruby-on-rails, ruby, activeadmin, formtastic

我的 rails 应用程序的编辑视图中有一个表单，这个编辑视图是 active_admin 目录中的资源。

我知道活动管理员使用了 formtastic 我找不到编辑视图的视图模板。

如果我想更改表单以使字段具有下拉菜单而不是输入字段。我可以在哪里以及如何设置它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:55:33.090

**例子：**

代替`app/admin/model_name.rb`

```
ActiveAdmin.register ModelName do
  form do |f|
    f.inputs "ModelName" do
      f.input :title, :required => true
      f.input :name
      #
      # ... other inputs ...
      #
      f.input :foo, :as => :select, :collection => ModelName.all.map{ |x| [x.title, x.id] }
    end
    f.buttons
  end
end 
```

它是如何完成的：

```
:as => :select 
```

创建一个选择输入

```
:collection => [ [text, value], [text, value] ...] 
```

表示选择输入中的选项。

# nsdate - NSDateFormatter 和 NSDate 问题

> ID：11999974
> 
> 赞同：1
> 
> 时间：2012-08-17T04:52:42.587
> 
> 标签：nsdate, nsdateformatter

我有一个需要转换为 NSDate 的日期字符串，这里是字符串“Fri Aug 17 12:23:40 +0800 2012”，

这是我的秘密代码，

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
//formatter.timeZone = [NSTimeZone localTimeZone];
formatter.dateFormat = @"EEE MMM dd H:mm:ss ZZZ yyyy";

NSDate *date = [formatter dateFromString:dateStr];
NSLog(@"%@", date); 
```

我认为我的代码很好，但日期为空。我不知道为什么，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:20:02.403

您的代码`2012-08-17 04:23:40 +0000`在我的系统上产生了输出，因此问题可能与您的区域设置有关。[此答案](https://stackoverflow.com/a/1396138/335858)提供了有关如何制作独立于系统本地区域设置的日期格式化程序的信息。

# mysql - 连接两个表并获取两个表中的最新条目取决于 MySQL 中两个表的更新日期

> ID：11999977
> 
> 赞同：0
> 
> 时间：2012-08-17T04:53:13.910
> 
> 标签：mysql

我有`fixedassets`和`fixedassets_history`桌子。

表中`fixedassets`有`id`, `purchase_date`, `purchase_price`, `updated_date`。

在`fixedassets_history`表中，有`fixedassets_id`, `description`, `updated_date`。

我将这些表与`id`. 我想根据MySQL 中`fixedassets`的 '`update_date`字段和`fixedassets_history`'从这些表中检索最近更新的记录。`updated_date`

这是我的 SQL 脚本：

```
SELECT fa.*,fh.text,fh.date  
FROM fixedassets fa 
JOIN fa_history fh ON fa.id=fh.fixedassets_id 
ORDER BY fa.updated_date desc,fh.date desc  limit 5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:07:08.913

```
select 
fa.id,
max(fa.updated_date) , 
fa.other_column
from fixedassets fa 
left join (
            select 
                fixedassets_id , 
                max(updated_date) , 
                other_columns 
                from fixedassets_history
            ) as fah on fah.fixedassets_id = fa.id
group by fa.id 
```

# java - Java 反射不起作用并获得 java.lang.NoSuchMethodException

> ID：11999982
> 
> 赞同：0
> 
> 时间：2012-08-17T04:53:56.297
> 
> 标签：java, tomcat, reflection, tomcat7

我有一个 Servlet 类，它使用反射进行一些动态类初始化和方法调用。它有以下代码来做到这一点。

```
@Override
protected void doGet( HttpServletRequest request, HttpServletResponse response ) throws ServletException, IOException {
    try {
        String reqActionContext = PageContextHelper.getFunctionName( "login" );
         // Trace reqActionContext
        System.out .println("reqActionContext : " + reqActionContext );
        // Get the page context related class object
        Object contextClass = PageContextHelper.getContextBoundedClass( "authentication");
        Class < ? >[ ] paramTypes = new Class < ? >[2];

        paramTypes[0] = HttpServletRequest.class ;
        paramTypes[1] = HttpServletResponse.class ;

        // Is there a class associated with the current context
        if ( contextClass != null ) {
            // Trace contextClassSystem. out .println("Contextclass : " + contextClass);
            // get the Class
            Class < ? > thisClass = contextClass.getClass();
            // Trace thisClass
            System.out .println("thisClass : " + thisClass );
            // get the method
            Method contextMethod = thisClass.getDeclaredMethod( reqActionContext, paramTypes );

            if ( contextMethod != null ) {
                contextMethod.invoke ( contextClass, request, response );
            }
        }
    }  catch ( IllegalArgumentException e ) {
        e.printStackTrace();
    } catch ( IllegalAccessException e ) {
        e.printStackTrace();
    } catch ( InvocationTargetException e ) {
        e.printStackTrace();
    } catch ( Exception e ) {
        e.printStackTrace();
    }
} 
```

获取上下文有界类的类具有以下代码：
**PageContextHelper.java**

```
public class PageContextHelper {

    private static final String CONTEXT_CLASS_SUFFIX = "ContextHelper" ;

    private static final String CONTEXT_CLASS_PACKAGE = "com.proj.context." ;

    /**
    * Get the base path related context class object.
    *
    *@param basePath
    *@return
    */
    public static Object getContextBoundedClass ( String basePath ) {
        Class < ? > classOBJ = null ;

        try{

            if(basePath != null && !basePath.isEmpty() && basePath.length() > 1 ) {
                basePath = basePath .substring( 0,1 ).toUpperCase() + basePath.substring( 1 ).toLowerCase();
            }
            // Get the class object
            classOBJ = Class.forName( CONTEXT_CLASS_PACKAGE + basePath + CONTEXT_CLASS_SUFFIX);
        } catch ( ClassNotFoundException e ) {
            // Do nothing and return null object
        }
        return classOBJ;
    }

    .....

} 
```

正在寻找的类是`com.proj.context.AuthenticationContextHelper`，它具有以下内容：
**com.proj.context.AuthenticationContextHelper**

```
package com.proj.context;

    public class AuthenticationContextHelper{

    public void loginProcess (HttpServletRequest request, HttpServletResponse response) throws Exception {
        try {
            // Do some processing here
        } catch ( Exception e ) {
            // TODO : Remove this trace line and do something meaningful
            e.printStackTrace();
        }
    }
} 
```

当我运行代码时，得到以下跟踪： Trace

```
reqActionContext :loginProcess 
Contextclass : class com.proj.context.AuthenticationContextHelper
thisClass : class java.lang.Class
java.lang.NoSuchMethodException: java.lang.Class.loginProcess(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)
        at java.lang.Class.getDeclaredMethod(Class.java:1937)
        at com.proj.servlet.ContentServlet.doGet(ContentServlet.java:81)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
... 
```

它说**NoSuchMethod**但该方法在类中`com.proj.context.AuthenticationContextHelper`。

我在这里遗漏了任何基本内容还是代码中有问题？

我使用的环境是**Java 1.6.0_32**和**Tomcat 7**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:00:21.557

在您的`doGet()`方法中，您有：

```
contextMethod.invoke ( contextClass, request, response ); 
```

您正在传递一个`contextClass`Class 类型。您需要向它传递一个您希望调用该方法的*类的实例，而不是该类的 Class 对象。*不知道你在哪里有一个实例`AuthenticationContextHelper`，我在你的 Servlet 类的任何地方都看不到它。如果这不可能，您*可以*将`loginProcess()`方法设为静态，然后将一个空对象传递给`invoke(null, request, response)`.

* * *

> PageContextHelper.getContextBoundedClass 方法通过调用 Class.forName 返回类 AuthenticationContextHelper

看起来它返回一个`Class`对象：

```
classOBJ = Class.forName( CONTEXT_CLASS_PACKAGE + basePath + CONTEXT_CLASS_SUFFIX); 
```

当你尝试创建一个方法时，你是在类上创建一个方法`Class`，因为你调用了`Class.getClass()`. 这就是为什么你得到你的例外。看看你的输出：

```
Contextclass : class com.proj.context.AuthenticationContextHelper
thisClass : class java.lang.Class 
```

它们都是 Class 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T05:15:42.790

您正在`Class`从这里返回一个对象`getContextBoundedClass()`并将其放入`Object`：

```
Object contextClass = PageContextHelper.getContextBoundedClass( "authentication"); 
```

而是这样说：

```
 Class contextClass = PageContextHelper.getContextBoundedClass( "authentication"); 
```

你不要再打电话`contextClass.getClass()`了。而不是获取您调用的类`contextClass.newInstance()`的实例来创建该对象的实例并在调用方法时使用它。阅读本教程：

[http://docs.oracle.com/javase/tutorial/reflect/index.html](http://docs.oracle.com/javase/tutorial/reflect/index.html)

# php - 访问mysql数据库中的多个表

> ID：11999988
> 
> 赞同：1
> 
> 时间：2012-08-17T04:54:25.813
> 
> 标签：php, mysql, database, pdo, relational-database

我有

```
$mySQL = $db -> prepare("SELECT table1.users,table1.name,table2.img,table2.name,table2.users FROM table1,table2 WHERE table1.users = table2.users");

$row = $mySQL->fetch(PDO::FETCH_ASSOC); 
```

我可以回声：

```
echo $row['name']; 
```

但是它怎么知道从 table1 或 table2 中获取名称？我可以做类似的事情吗

```
echo $row['table1.name']; 
```

谢谢

另外，这是从多个表中获取数据的最佳方式吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T04:56:40.767

使用[SQL 别名](http://www.w3schools.com/sql/sql_alias.asp)。

例如：`SELECT column_name AS alias_name FROM table_name`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T04:56:59.613

尝试命名字段：

```
SELECT table1.name AS table1name 
```

然后它将在结果集中显示为`table1name`，因此不可能发生冲突。

连接是从多个表中获取数据的一种非常有效的方式——它在很大程度上取决于数据库的结构、要检索的数据等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T04:57:13.963

您需要为列提供不同的别名：

```
SELECT table1.users AS users_1, table2.users AS users_2,
       table1.name AS name_1, table2.name AS name_2, table2.img
FROM table1,table2 
WHERE table1.users = table2.users 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T04:57:35.223

添加别名

```
$mySQL = $db -> prepare("SELECT table1.users AS tbl1users , table1.name AS tbl1name , table2.img AS tbl2img, table2.name as tbl2name, table2.users as tbl2users FROM table1,table2 WHERE table1.users = table2.users"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T04:58:44.567

添加别名以标识您的表。

```
SELECT table1.users as tab1user,table1.name,table2.img,table2.name,table2.users as tab2user
 FROM table1 JOIN table2 in table1.users = table2.users 
```

加入表的最佳方式。它会提高性能。您必须根据自己的要求选择合适的连接方式。按照此链接加入

[http://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

**编辑：** **加入 3 个表**

```
 select ......
 FROM table1 JOIN table2 in table1.users = table2.users
 JOIN Table3 in table2.id=table3.id 
```

# javascript - 我如何使用 javascript 写入 xml

> ID：11999989
> 
> 赞同：1
> 
> 时间：2012-08-17T04:54:32.053
> 
> 标签：javascript, html, xml

我对写入 XML 文件的问题感到震惊。我知道如何读取 xml 文件。让我解释清楚。我必须从 xml 文件中读取值并将其传递给标签或列表框，然后将值写入另一个 xml 文件。我完成了阅读的第一部分，我对写作感到震惊。我在stackoverflow中经历了几个查询。但它不适合我。帮帮我这是我用来编写的代码

```
var v = new  XMLWriter();
   v.writeStartDocument(true);
   v.writeElementString('option','Hello World');
   v.writeAttributeString('foo','bar');
   v.writeEndDocument();
   console.log( v.flush() ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T05:08:26.647

从[这里](https://stackoverflow.com/questions/1192286/create-and-modify-xml-file-using-javascript)

```
function test(){    
 var v = new  XMLWriter();
 v.writeStartDocument(true);
 v.writeElementString('test','Hello World');
 v.writeAttributeString('foo','bar');
 v.writeEndDocument();
 console.log( v.flush() );
} 
```

这将产生

```
<?xml version="1.0" encoding="ISO-8859-1" standalone="true" ?>
 <test foo="bar">Hello World</test> 
```

# sql - 在 Oracle 11gR2 上使用 Union ALL 的大视图

> ID：11999990
> 
> 赞同：1
> 
> 时间：2012-08-17T04:54:33.917
> 
> 标签：sql, database, performance, oracle

我想使用 Union ALL 创建一个视图。视图本身将相当大。5 亿到 8 亿条记录。

也就是说，基础数据每年将被分区 4 次，并具有适当的索引。对各个范围本身的查询应该具有相当低的成本。

我是否需要担心视图的大小（就行数而言）？我最好使用一个单独的表，该表由视图生成的数据和通过 ETL 过程加载的数据组成。我不熟悉视图在内部是如何运作的，所以我担心如果说拥有 30 多个工会会是一个问题。

感谢您的输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T06:43:14.530

视图只是一个您“隐藏”起来的 SQL 语句。因此，当您引用视图时，每次都会运行 SQL 语句，所以我会说这取决于您将如何使用视图。在使用视图时，您可能会使用哪些谓词（where 子句）？如果这些谓词使 oracle 能够从结果中快速消除大量行/连接，那么它会很快。

你需要测试一下！也许使用物化视图可能是一种选择？这会给你一个自动维护的表。

我的第一个选择是至少使用和测试视图，因为您不必以任何方式维护它。使用某种类型的 ETL 听起来有点工作:)

# cakephp - 与 cakephp 相关

> ID：11999992
> 
> 赞同：1
> 
> 时间：2012-08-17T04:54:37.263
> 
> 标签：cakephp

**http://localhost/cakephp/users**使用此网址时 出现**错误**

**错误**：找不到用户控制器。

**错误**：在以下文件中创建类 UsersController：app/Controller/UsersController.php

**http://localhost/cakephp/app/users/view/register.html** 当我使用它时出现**错误**

**错误**：控制器 AppController 中未定义操作用户

**错误**：在文件 app/Controller/AppController.php 中创建 AppController::users()。

所以我该怎么做 ？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:55:49.277

您需要在 app/Controller 中创建一个名为 UsersController.php 的文件。

并在 UsersController.php 中创建方法注册，并`.ctp`在 app/View/Users/register.ctp 中创建扩展名文件。

您可以使用以下方式访问此文件：**http://localhost/cakephp/users/register**

[此文档链接](http://book.cakephp.org/2.0/en/controllers.html#controller-actions)肯定会帮助您全面了解创建操作及其各自的视图文件。

# facebook - Facebook FQL：比较 ISO-8601 时间戳？

> ID：11999998
> 
> 赞同：0
> 
> 时间：2012-08-17T04:55:40.797
> 
> 标签：facebook, facebook-graph-api, facebook-fql

Facebook 最近将它们表示时间戳的方式从 unix 时间更改为 ISO-8601。见[这里](http://developers.facebook.com/blog/post/2012/08/01/platform-migration--events-timezone-support/)。在可以编写如下 fql 语句之前：

```
SELECT eid FROM event WHERE start_time < 1345178483 
```

其中 1345178483 是 unix 时间。ISO-8601 仍然可以进行这样的查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:06:46.657

是的，但您必须用 ISO-8601 格式的字符串替换您的时间戳：

```
SELECT eid FROM event WHERE start_time < "2012-08-17T00:41:23-04:00" 
```

请注意，`now()`FQL 中的旧方法不起作用。[错误报告](https://developers.facebook.com/bugs/271667989601814)

# android - 列表视图过滤器如何在android中工作

> ID：11999999
> 
> 赞同：0
> 
> 时间：2012-08-17T04:55:43.067
> 
> 标签：android, list

我是android中的新手。我需要为json数组创建过滤器。我需要知道custome getfilter的工作流程。意味着它的变化。**1.它改变采用者或调用**后内部发生的事情

 **```
getfilter.filter(s) 
```

我需要知道这样我才能创建我的自定义过滤器。

还有一件事我没有找到关于列表过滤和列表自定义过滤的合理完整教程，如果有人能找到它或任何人都能做到，那么它真的会帮助我和其他初学者

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T05:00:11.343

ListView 中的过滤适用于实现`Filterable`您的 Adapter 类和覆盖`getFilter()`方法，该方法进一步覆盖`publishResults()`和`performFiltering()`. 你可以[`here`](https://stackoverflow.com/a/8678198/726863)用一个完整的演示代码来检查我的答案，它是如何工作的。**