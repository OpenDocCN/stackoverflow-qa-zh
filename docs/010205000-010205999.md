# StackOverflow 问答 10205000-10205999

# ant - 使用 Ivy 缓存工件的 Nexus

> ID：10205006
> 
> 赞同：1
> 
> 时间：2012-04-18T07:40:33.197
> 
> 标签：ant, ivy, nexus

行; 我的第一个 stackoverflow 问题。

我一直在尝试使用我们的本地 Nexus 从外部存储库中下载工件并自动从外部存储库中检索这些工件，以防它们不存在。并在途中缓存它们***。***

我正在使用 Ant 和 Ivy 来处理依赖关系。

这个问题或多或少类似于这个问题： [Ivy via Nexus proxy](https://stackoverflow.com/questions/1033859/ivy-via-nexus-proxy) 对我的理解的最终答案确实允许使用nexus 作为存储库，但它没有缓存（至少对我来说不是）。

我已经看到很多材料围绕着这个主题徘徊，但没有任何确切的性质（遗憾的是我无法弄清楚）。

所以让我总结一下。我正在使用使用 url 解析器的本地 nexus 存储库，因为如果我们需要发布（在某处阅读），我们应该使用 URL：

```
<chain name="deploy-chain">
    <url
        name="nexus"
        m2compatible="true"
    >
        <artifact pattern="${nexus.host}/${nexus.pattern}" />
        <ivy pattern="${nexus.host}/${nexus.ivy.pattern}" />
    </url>

    <ibiblio
        name="maven.public"
        m2compatible="true"
    />
</chain> 
```

ivy.xml 和 build.xml 非常标准。

那么，是否可以使用 Ivy 来做到这一点，或者这是一个关系问题？

在我的缓存或本地存储库中检索工件后，将工件（指定的 ant 目标）发布到 Nexus 是否是一种好习惯？（这似乎是一个非常糟糕的做法，但唯一的选择总是一个很好的选择）

这是对工具的滥用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T22:54:29.170

[ibiblio](http://ant.apache.org/ivy/history/latest-milestone/resolver/ibiblio.html)解析器是配置 Maven 存储库的最佳方式。

以下**ivysettings.xml**文件配置 ivy 以拉取它的依赖项 Nexus。

```
<ivysettings>
    <settings defaultResolver="central-proxy"/>
    <resolvers>
        <ibiblio name="central-proxy" m2compatible="true" root="http://mynexushost/nexus/content/repositories/central/"/>
        <ibiblio name="release-repo"  m2compatible="true" root="http://mynexushost/nexus/content/repositories/releases/"/>
    </resolvers>
</ivysettings> 
```

“central-proxy”解析器配置为从 Nexus 中默认提供的默认 Maven Central 代理存储库中提取内容。

将内容发布到 Nexus 发布存储库时，可以使用“release-repo”解析器。

# iphone - 使用特殊字符验证文本字段

> ID：10205008
> 
> 赞同：6
> 
> 时间：2012-04-18T07:40:36.523
> 
> 标签：iphone, objective-c, cocoa-touch, ios4

在我的应用程序中。我想用特殊字符验证文本字段，

前任。如果用户按？从键盘比用户无法输入？在文本字段中，

请任何人建议，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T07:57:27.843

像下面这样尝试它会帮助你。它只接受字母

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
    {
        //For avoiding user to enter non digital number..
        if([[string stringByTrimmingCharactersInSet:[[NSCharacterSet letterCharacterSet] invertedSet]] isEqualToString:@""])
        {
            return NO;
        }
        else
        {
            return YES;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:47:50.493

检查[这个](https://stackoverflow.com/questions/1013647/filtering-characters-entered-into-a-uitextfield)

利用

```
- (BOOL) textField:(UITextField*)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString*)textEntered 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:50:44.467

看看这是否有效：

```
 -(NSString *) formatIdentificationNumber:(NSString *)string
     {
       NSCharacterSet * invalidNumberSet = [NSCharacterSet characterSetWithCharactersInString:@"\n_!@#$%^&*()[]{}'\".,<>:;|\\/?+=\t~` "];

    NSString  * result  = @"";
    NSScanner * scanner = [NSScanner scannerWithString:string];
    NSString  * scannerResult;

    [scanner setCharactersToBeSkipped:nil];

     while (![scanner isAtEnd])
     {
    if([scanner scanUpToCharactersFromSet:invalidNumberSet intoString:&scannerResult])
    {
        result = [result stringByAppendingString:scannerResult];
    }
    else
    {
        if(![scanner isAtEnd])
        {
            [scanner setScanLocation:[scanner scanLocation]+1];
        }
    }
 }

  return result;
  } 
```

# sql - SQL 用特定文本替换字段

> ID：10205018
> 
> 赞同：0
> 
> 时间：2012-04-18T07:41:06.403
> 
> 标签：sql

我的 sql 视图有以下字段：

`name | description | date`

我必须在其中查询`max`和`min`日期并将新视图打印为

`status | name | description | starting`

where in the `status`field is a text field 将显示`longest time`和`shortest time`。这个字段是全新的，没有内置到任何表中，我将如何在视图中创建这个字段？

编辑：

我想在`status`我的视图中添加额外的字段，所以制作一个额外的列。因此，我有

```
create or replace view one (name, description, starting) as
-- SQL STUFF HERE... 
```

从这个视图中，我需要从中获取最大值和最小值并将这两个选择合并在一起，但添加一个额外的列来描述该行是否具有`longest time`或`shortest time`. 要得到

`create or replace view two (status, name, description, starting) as`

目前我已经写了

```
select name, longname, max(starting) from one
union
select name, longname, min(starting) from one; 
```

这会打印出三列，但我需要添加额外的第四列`status`，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:57:39.780

只需使用一个简单的字符串：

```
select 'longest time' AS status, name, longname, max(starting) from one
union
select 'shortest time' AS status, name, longname, min(starting) from one; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:47:35.303

不确定您想要什么开始显示，因为您没有描述它，但 group by 是您正在寻找的内容，您可以在您的日期运行聚合函数以获得您想要的信息。您可能需要不同的日期格式，因此您可能希望使用 Convert 而不是 cast 以您想要的格式获取日期。

```
SELECT
    CAST(MAX(Date) AS NVARCHAR(20)) + ' ,' 
    + CAST(MIN(Date) AS NVARCHAR(20)) AS Status
    Name
    Description

FROM tblMyTables
GROUP BY 
    Name, 
    Description 
```

# c# - 将属性传递给 C# 中的方法

> ID：10205026
> 
> 赞同：2
> 
> 时间：2012-04-18T07:42:05.490
> 
> 标签：c#, c#-4.0, properties, propertyinfo

我需要传递某些类型的属性选择（每次一种类型），假设这是我的类型：

```
public class Product {

    [PrimaryKey]
    public long Id { get; set; }
    [DisplayName("Name")]
    public string Title { get; set; }
    [Foreignkey(Schema = "Products", Table = "MajorCategory", Column = "Id")]
    [DisplayName("MCat")]
    public string MajorCategory { get; set; }
    [Foreignkey(Schema = "Products", Table = "Category", Column = "Id")]
    [DisplayName("Cat")]
    public string Category { get; set; }
    public long CategoryId { get; set; }
    [BoolAsRadio()]
    public bool IsScanAllowed { get; set; }
} 
```

所以我需要一种方法将这种类型的属性列表传递给其他类型（目标类型），并使用属性名称和属性，我不需要值，类似于以下伪代码：

```
List<Property> propertyList = new List<Property>();
propertyList.Add(Product.Id);
PropertyList.Add(Product.Title);
TargetType target = new TargetType();
target.Properties = propertyList;

public class TargetType  {

   public List<Property> Properties { get; set;}

   GetAttributes() {

      foreach(Property item in Properties){

         Console.WriteLine(item.Name)

         //Get Attributes
      }
   }

} 
```

有什么方法可以传递`Product.Id`并使用它的名称和属性吗？我不确定，但也许`PropertyInfo`可以提供帮助，我认为可以传递对象列表，但在这种情况下我不能使用属性和名称，你有什么建议来处理这个问题？或类似的东西？如果我完全错了，我该如何实施呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:58:41.797

You can make use of reflection in .NET here:

```
List<PropertyInfo> propertyList = new List<PropertyInfo>();
Type productType = typeof (Product);

propertyList.Add(productType.GetProperty("Id"));
propertyList.Add(productType.GetProperty("Title"));
TargetType target = new TargetType();
target.Properties = propertyList;

public class TargetType  {

   public List<PropertyInfo> Properties { get; set;}

   List<object> GetAttributes()
   {
       List<object> attributes = new List<object>();

       foreach(PropertyInfo item in Properties)
       {
           Console.WriteLine(item.Name);
           attributes.AddRange(item.GetCustomAttributes(true));
       }

       return attributes;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:50:53.247

有趣的是，我只是在回答一个类似的问题，或者至少我认为是这样。

看起来您正在尝试将两种类型的属性合并为一种？你需要一个 ExpandoObject：

[http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject%28v=vs.100%29.aspx)

有关嵌套合并的实现，请参见：

[动态/扩展对象的 C# 深度/嵌套/递归合并](https://stackoverflow.com/questions/9037252/c-sharp-deep-nested-recursive-merge-of-dynamic-expando-objects/10203964#10203964)

基本上，您需要一个属性的键控列表来开始。以下代码将对任何 .NET 对象执行此操作：

```
var props = object.GetType().GetProperties().ToDictionary<PropertyInfo, string>(prop => prop.Name); 
```

之后，这取决于您想要实现的确切目标 - 对象的真实副本，与另一个对象合并，或者只是维护列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:58:55.973

You can build list of properties using expression trees, e.g. you can make something like this:

```
 var propertiesListBuilder = new PropertiesListBuilder<Product>();
propertiesListBuilder
    .AddProperty(_ => _.Id)
    .AddProperty(_ => _.Title);

var target = new TargetType();
target.Properties = propertiesListBuilder.Properties; 

```

The only concern here is performance, i.e. it might be not good idea to recreate such property lists over and over again, most probably they should be cached. At the same time you'll get intellisense, compiler checks and refactoring support for your property lists.

Below is a sample implementation of this stuff.

```
 static class PropertyInfoProvider<T>
{
    public static PropertyInfo GetPropertyInfo<TProperty>(Expression<Func<T, TProperty>> expression)
    {
        var memberExpression = (MemberExpression)expression.Body;

        return (PropertyInfo)memberExpression.Member;
    }
}

class PropertiesListBuilder<T>
{
    public IEnumerable<PropertyInfo> Properties
    {
        get
        {
            return this.properties;
        }
    }

    public PropertiesListBuilder<T> AddProperty<TProperty>(
        Expression<Func<T, TProperty>> expression)
    {
        var info = PropertyInfoProvider<T>.GetPropertyInfo(expression);
        this.properties.Add(info);

        return this;
    }

    private List<PropertyInfo> properties = new List<PropertyInfo>();
} 

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T07:53:58.660

您可以使用[`PropertyInfo`](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.aspx),`List<PropertyInfo>`作为您的类型的列表`TargetType .Properties`。要获取属性，您可以使用[`Reflection`](http://msdn.microsoft.com/en-us/library/ms173183%28VS.80%29.aspx).

```
targetType.Properties = product.GetType().GetProperties().ToList(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-18T07:50:14.593

`typeof(Product).GetProperties()`会给你所有（公共）属性作为`PropertyInfo[]`.

另请参阅[MSDN](http://msdn.microsoft.com/en-us/library/kyaxdd3x.aspx)。

# .htaccess - htaccess，mod_rewrite，如何检查空的get var？

> ID：10205027
> 
> 赞同：1
> 
> 时间：2012-04-18T07:42:08.407
> 
> 标签：.htaccess, mod-rewrite

在这个上打破我的头..

需要检查名为“过滤器”的获取变量是否具有值与 mod_rewrite..

*   `http://site.com/audio/speakers?filter=`应该重定向到：`http://site.com/audio/speakers`
*   `http://site.com/audio/speakers?filter=yes`不应该重定向..

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:32:37.547

你可以试试这个：

```
RewriteCond %{QUERY_STRING} ^filter=$ [NC]
RewriteRule ^audio/speakers$ http://site.com/audio/speakers? [R=302,L] 
```

它只会检查这个 URL：（第一个参数是`/audio/speakers?filter=`哪里`filter`，只有一个参数并且是空的）——就像在你的 URL 示例中一样。如果有多个参数..它将不匹配并且不会做任何事情（即使`filter`将为空）。

如果需要，您可以将重定向代码形式 302（临时）更改为 301（永久）。

**更新：**

```
RewriteCond %{QUERY_STRING} ^filter=$ [NC]
RewriteRule ^(.*)$ http://site.com/$1? [R=302,L] 
```

# facebook-javascript-sdk - Facebook Javascript SDK - 访问令牌的 Chrome 问题

> ID：10205029
> 
> 赞同：3
> 
> 时间：2012-04-18T07:42:13.013
> 
> 标签：facebook-javascript-sdk

我在 chrome 上面临一个用于 facebook 访问令牌的严重问题。以下是我从中获取用户 ID 和访问令牌的代码。此访问令牌稍后用于访问各种 facebook 功能。

```
 FB.getLoginStatus(function(response) {
      if (response.status === 'connected') {
        uid = response.authResponse.userID;
        accessToken = response.authResponse.accessToken;
    } else if (response.status === 'not_authorized') { 
```

在 chrome 中，当我第一次加载页面时。它带有访问令牌。但是当我刷新它几次时，有时它会给我访问令牌为 0。因此没有任何效果。任何人都可以帮我解决这个问题吗？

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T21:58:37.820

您可能想尝试在页面加载时设置强制往返 Facebook 的服务器，以便您始终可以获得用户的最新状态。JavaScript SDK 会在用户第一次查看页面时自动缓存登录状态，但您可以像这样覆盖它：

```
FB.getLoginStatus(function(response) {
     // this will be called when the roundtrip to Facebook has completed
}, true); 
```

只要确保强制往返不会增加太多不必要的延迟！您可以在[FB.getLoginStatus()](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)页面上阅读更多信息。关于强制往返的部分大约在页面的中间。

快乐编码！

# javascript - 谷歌地图缩放控制隐藏和显示

> ID：10205036
> 
> 赞同：5
> 
> 时间：2012-04-18T07:42:49.350
> 
> 标签：javascript, maps

我在使用自定义谷歌地图控件时遇到了问题。我想要的是在切换到地图时显示 zoomControl 并使用地图作为静态背景在其他视图中隐藏 zoomControl。我的代码是这样的，

```
if (isMapView) {
  map.setOptions({
      zoomControl: true,
      zoomControlOptions: {position: google.maps.ControlPosition.RIGHT_TOP}
    });
} else {
  map.setOptions({
      zoomControl: false
    });
} 
```

但这不起作用，第一个开关很好，后面的 zoomControl 消失了。我不知道为什么。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T11:40:55.713

我正在寻找这个很长的时间。但你的问题确实帮助了我。我刚刚做了和你发布的一样的事情。它对我有用。我添加了两个按钮。在第一个按钮单击时，我调用 DoSomething。第二，DoSomething2。它工作正常。谢谢你的帖子。看看这个，如果有什么帮助的话。

```
 function DoSomething()
    {
        map.setOptions({zoomControl: true, mapTypeControl: true});
    }

    function DoSomething2()
    {
        map.setOptions({zoomControl: false, mapTypeControl: false});
    } 
```

# windows - 如何编辑 setup.exe 资源

> ID：10205038
> 
> 赞同：1
> 
> 时间：2012-04-18T07:42:54.507
> 
> 标签：windows, setup-project

我想编辑 .net setup.exe 资源。我的要求是 1.从 Setup.exe 中删除 exe 文件 2.将新的 exe 文件插入 Setup.exe

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:51:51.923

取决于设置，但最简单的方法是使用 reshacker 或任何其他石油工具。如果设置是加密的，则要困难得多，您可能需要查看 RE 站点，例如 biwreversing 或 seekndestroy。

# watir - 获取浏览器 IP（使用代理）

> ID：10205040
> 
> 赞同：2
> 
> 时间：2012-04-18T07:43:00.270
> 
> 标签：watir, watir-webdriver

如何使用 Watir 获取浏览器 IP？我正在使用代理，我想验证它是否正常工作。如果代理正在工作，也许还有其他方法？

这是我当前的代码：

```
profile = Selenium::WebDriver::Firefox::Profile.new
profile.proxy = Selenium::WebDriver::Proxy.new :http => 'my.proxy.com', :ssl => 'my.proxy.com'
browser = Watir::Browser.new :firefox, :profile => profile
browser.goto 'http://someurl.com' 
```

浏览器将打开 url，尽管代理不工作。

感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:31:46.510

这确实不是解决此问题的好方法，但您可以使用以下方法获取 ip。

```
browser.goto("http://www.whatsmyip.org/")
ip = browser.span(:id, "ip").text 
```

正如我所说，这确实不是一种理想的方式，但我不确定 watir 是否可以访问您所在的 IP。

请注意，如果您使用上述网站，请尊重作者的意愿，不要对网站产生大量请求。如果您查看那里的源代码，您会发现以下评论：

> 请不要对机器人进行编程以使用此站点来获取您的 IP。它杀死了我的服务器，这不好。只需获得一些便宜或免费的网络托管，并制作您自己的仅 IP 页面来为您的机器人提供动力。然后您甚至不必解析任何 html，只需直接加载 IP - 对每个人都更好！

作为网络的好公民，我们需要尊重这一点。我怀疑他会因为每天点击几下而感到不安，但如果您的脚本经常这样做，请制作您自己的反射器页面，将您的 IP 报告给您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T14:48:14.280

您不需要 Watir 通过代理来获取 IP。你可以使用net/http，它的开销更少，更容易。顺便说一句，我在这里使用了 whatsmyip.com，但我不相信它如此可靠。还有其他的，包括[http://whatismyipaddress.com](http://whatismyipaddress.com)、[http://show-ip.net](http://show-ip.net)、[http://ipchicken.com](http://ipchicken.com)、[http://www.ipaddresslocation.org](http://www.ipaddresslocation.org)、[http://www.myipaddress.com/ show-my-ip-address/](http://www.myipaddress.com/show-my-ip-address/)，[http:](http://www.lawrencegoetz.com/programs/ipinfo/) //www.lawrencegoetz.com/programs/ipinfo/，http [://www.find-ip-address.org](http://www.find-ip-address.org)。

```
require 'net/http'
uri = URI("http://automation.whatismyip.com/n09230945.asp")
Net::HTTP::Proxy(proxyhost, proxyport, proxyuser, proxypassword).start(uri.host) do |http|
    req = Net::HTTP::Get.new(uri.path=='' ? '/' : uri.path)
    @ip = http.request(req).body.scan /\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/
end 
```

# ruby - 使用电子表格 Ruby Gem 将日期读取为字符串

> ID：10205049
> 
> 赞同：0
> 
> 时间：2012-04-18T07:44:01.260
> 
> 标签：ruby, spreadsheet

我一直在寻找一种方法来读出 Excel 电子表格，并将其中的日期保留为字符串。不幸的是，我看不出这是否可能，有没有人设法做到这一点或知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T18:20:23.473

我想你可以试试`row.at(col_index)`方法..你可以参考[这个页面](http://spreadsheet.rubyforge.org/GUIDE_txt.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:56:18.400

您可能想看看电子表格 gem 的 Row 类：

[http://spreadsheet.rubyforge.org/Spreadsheet/Row.html](http://spreadsheet.rubyforge.org/Spreadsheet/Row.html)

您可以获得很多内容，但 Row#formatted 方法可能是您想要的：

```
row = sheet.to_a[row_index] # Get row object
value = row.formatted[column_index] 
```

formatted 方法为您获取所有 Excel 格式数据，并为您提供一组 Ruby 类对象

# memory-management - 不懂堆溢出文章

> ID：10205054
> 
> 赞同：0
> 
> 时间：2012-04-18T07:44:07.600
> 
> 标签：memory-management, linux-kernel, kernel, heap-memory

嗨，我想了解堆溢出是如何工作的，我一直在阅读这篇文章，这对我来说似乎很模糊。下面是我卡住的文章的页面。

[http://www.h-online.com/security/features/A-Heap-of-Risk-747224.html](http://www.h-online.com/security/features/A-Heap-of-Risk-747224.html)

在链接的第 4 页后半部分之后，我的理解停止了。他们在第 2 页实现了自己的堆管理器，这也可能有用。下图表示字符串复制到图像数据后的堆数据结构（希望这是对的）。

```
 Root = Hdr                        Free Memory
 _________________                 ________________
|*Next = 0xF      |----------->0xF|*Next = "AAAA"  |
-------------------               ------------------
|*Previous = NULL |               |*Previous="AAAA"|
-------------------               ------------------
|Size = 0         |               |Size = "AAAA"   |
-------------------               ------------------
|Used = 0         |               |Used = "AAAA"   |
-------------------               ------------------
                                  |Free Mem Data   | 
```

（让 Root 从 0x0 开始。每个字段也是 32 位，因此是 4 个字节宽。“AAAA”代表字符串“AAAA”，其中每个“A”是一个字符，因此是一个字节的内存。）

从教程中他们说，当内存被释放时，函数 Free_Heap() 将要从地址“AAAA”= 0x4141414d 读取。有解释是“使用”字段是从标题部分开始的 12 个字节的偏移量，因此 0x41414141 + 0xc = 0x4141414d。对我来说，这种解释没有意义，原因如下。

A) 为什么 Free_Heap() 甚至会尝试从“已使用”字段中的地址读取，而该值仅告诉 Free_Heap() 是否正在使用堆结构上的数据。除非“使用”字段是指向正在写入的实际数据的指针（教程中没有提到），否则这对我来说没有任何意义。

B）假设堆结构中的已使用字段确实是指向可能写入的数据的指针，为什么偏移量与应该从哪里读取堆有关？可能是如果数据部分位于“已使用”指针字段之后（例如在堆栈中），那么这意味着数据应放置在 0xf 而不是 0xc 的偏移量处，以便数据不会覆盖“已使用”场地。

感谢您提供任何有用的信息来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:02:53.843

文章的那部分似乎是错误的，或者只是写得很糟糕。虽然它会*读取* `hdr->next->used`以检查后续内存对象是否正在使用，但正如您所说，它的`used`和`size`字段将为0x41414141，因此我们不会尝试与其合并。尽管如此，设置还是不错的，不久之后您*将*取消引用其中一个指针：当释放“line”内存对象（我们踩到其标题的那个）时，它将尝试检查其`next`和`prev`内存块是否正在使用中。取消引用这些指针字段中的任何一个都会崩溃或被积极利用。

# php - 在类之外创建一个类方法

> ID：10205058
> 
> 赞同：0
> 
> 时间：2012-04-18T07:44:16.757
> 
> 标签：php

有没有办法为另一个类的一个类创建一个类方法？

例子：

```
class A
{
    public function makeMethod()
    {
        $this->b = new B();
        //create a method for class B such as a __call() method
        //to catch an error trying to access a non existant class B method
        if (!method_exists($this->b, "__call")
            // create __call() method
    }
}

class B
{

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:56:18.330

我不完全确定您实际上可以动态地为类创建方法。如果可以的话，我相信那将是非常糟糕的 OOP 实践。

类本质上是对象的蓝图。我不明白为什么你不能对类中的方法进行编码。

为了停止可能不存在的控制器上的错误（即：edit/），我自己使用以下方法用于我自己的 MVC 框架来检查类中是否存在方法：

```
$controller = new $class();

if( method_exists( $controller, $this->uri['method'] ) )
    $controller->{$this->uri['method']}( $this->uri['var'] );
else
    $controller->index(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:54:52.427

看看这个例子：

```
class A
{
    public function makeMethod()
    {
        $this->b = new B();
        //create a method for class B such as a __call() method
        //to catch an error trying to access a non existant class B method

        $this->b->doit();
    }
}

class B
{

    public function __call($name,$args)
    {
        echo "function called: $name with arguments: $args";
    }

}

$a = new A();

$a->makeMethod();

?> 
```

这将输出：

```
function called: doit with arguments: Array 
```

* * *

所以，在某种程度上，我们调用了一个不存在的函数，`class B`我们仍然可以用它做点什么......例如，在你的`__call`方法中，你`class B`不能将执行指向某个回调函数（甚至是`class A`）吗？为什么要“创造”它？（不要从开发人员的角度思考，除非你绝对必须...... :-)）

只是一个想法...

* * *

[Minima Framework](http://sourceforge.net/projects/minima/)中的页面/模块执行处理一瞥 ：

```
public function  __call($name, $arguments=NULL)
{
    $function_name = "_".$name;

    $trace = debug_backtrace();

    $moduleCall = false;

    if (isset($trace[2]))
    {

        if (isset($trace[2]['object']))
        {
        $trace = $trace[2]['object'];

        if (is_subclass_of($trace, 'mmModule'))
            $moduleCall = true;
        }
    }

    $args = $this->matchArguments($name, $arguments);

    if ($moduleCall) { $this->redirect ($name, $arguments); }
    else
    {
        $this->Result = call_user_func_array(array($this, $function_name), $args);

        $this->loadTemplate($name);
    }
} 
```

***PS**仅仅是因为我自己已经创建了一个 100% PHP 框架，也许我知道你可能需要什么......*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T07:55:20.553

您可以在超类中声明方法抽象。这意味着期望子类实现抽象方法，但不会提供实际实现。

如果您声明一个方法抽象，那么该类也必须是抽象的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T07:56:27.257

尝试

```
class A {

    public function makeMethod() {
        $this->b = new B ();
        // create a method for class B such as a __call() method
        // to catch an error trying to access a non existant class B method
    }

    public function __call($method, $args) {
        if (isset ( $this->$method )) {
            $func = $this->$method;
            $func ();
        }
    }
}

$foo = new A ();
$foo->baba = function () {
    echo "Hello Baba";
};

$foo->baba (); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T07:57:26.783

If you have the [runkit](http://www.php.net/manual/en/book.runkit.php) extension installed, then there's a [runkit_method_add](http://www.php.net/manual/en/function.runkit-method-add.php) feature there.... but this is rarely installed, and shouldn't be used arbitrarily.

# python - pymongo：使用另一个字段更新一个字段

> ID：10205060
> 
> 赞同：1
> 
> 时间：2012-04-18T07:44:26.023
> 
> 标签：python, mongodb, pymongo

我在这里看到了如何从 mongo shell 完成此操作：[MongoDB：使用同一文档中的数据更新文档](https://stackoverflow.com/questions/3788256/mongodb-updating-documents-using-data-from-the-same-document/3792958#3792958)

但是，我无法弄清楚如何使用 python 驱动程序来做到这一点。因此，我的目标是（在 MySQL 等效项中）：

```
UPDATE coll SET field1 = field1 + field2; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:29:53.163

到目前为止，我发现最简单的方法是使用带有 db.eval() 的 pymongo.code.Code 类来调整链接的 SO 答案，例如：

```
db.eval(Code("function () {"
             "coll.find({}, {field1: 1, field2: 2})"
             ".forEach( function(doc) {"
             "    doc.field1 += doc.field2;"
             "    coll.save(doc);"
             "    });"
             "}")) 
```

您可以选择将 js 脚本从 mongo shell 保存在服务器上，`db.system.js.save({_id:'myfunc', value: function(){...}});` 并从 python 执行`db.eval(Code('return myfunc()'))`

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-18T08:33:42.943

```
Col.update({}, {'$set': {'field1': field1 + field2}) 
```

空 {} 是选择条件，或 where 子句。

# wpf - 选项卡控件内的 WPF 棱镜区域不在区域列表中

> ID：10205063
> 
> 赞同：0
> 
> 时间：2012-04-18T07:44:34.137
> 
> 标签：wpf, wpf-controls, prism, enterprise-library, tabcontrol

我有一个附有区域的选项卡控件，并且我的选项卡控件内部还有一个内容控件，该控件具有另一个区域的内容。

我遇到的问题是 - 如果我调用 RegisterViewWithRegion 它将视图添加到该区域没有问题（第一次，如果你交换标签会出现问题）。但这不是很灵活，我正在寻找一种更好的方法来做到这一点。

当我查看 IRegionManager.Regions 内部时 - 我只能看到两个顶级区域。我看不到我的子区域**TabContentRegion**。有没有办法注册这个，所以我可以像往常一样添加视图并激活它们？

```
 <TabControl TabStripPlacement="Left"
            Width="Auto"
            Height="Auto"
            cal:RegionManager.RegionName="TabRegion"
            Name="TabRegion"
            SelectedItem="{Binding SelectedTab}">
    <TabControl.ContentTemplate>
        <DataTemplate>

            <ContentControls:TransitionContentControl 
                cal:RegionManager.RegionName="TabContentRegion" />

        </DataTemplate>
    </TabControl.ContentTemplate>
</TabControl> 
```

此代码将视图添加到 TabRegion

```
 public void Load()
 {
     IConfigurationDetailsPresentationModel convDetailsView1 =
         this.Container.Resolve<IConfigurationDetailsPresentationModel>();

     IRegionManager manager = this.Container.Resolve<IRegionManager>();
     manager.RegisterViewWithRegion("TabRegion", () => convDetailsView1);

     IConversationDetailsPresentationModel conversationDetails = 
         this.Container.Resolve<IConversationDetailsPresentationModel>();
     manager.RegisterViewWithRegion("TabRegion", () => conversationDetails);
 } 
```

然后这是我用来在 TabContentRegion 中实际显示视图的代码

```
 public IPresentationModel SelectedTab
 {
     get { return _selectedTab; }
     set
     {
         _selectedTab = value;

         IRegionManager service = this.Container.Resolve<IRegionManager>();

         if (service != null)
         {
             service.RegisterViewWithRegion(
                 "TabContentRegion",
                 () => _selectedTab.View);
         }
     }
 } 
```

正如你所看到的 - 它有点笨拙并且不太有效。任何想法我做错了什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:55:50.593

After alot of playing and googling I finally came across and answer!

because the region was inside a datatemplate, that ment that prisms standard behaviours wouldn't pick it up and register it with the region manager.

using the code provided [here](http://blogs.southworks.net/dcherubini/2011/11/10/regions-inside-datatemplates-in-prism-v4-using-a-region-behavior/) it helped me to fix this and carry on as normal! :)

cheers. ste.

# c++ - 无法更改光标（从 OnSetCursor 内部）

> ID：10205064
> 
> 赞同：2
> 
> 时间：2012-04-18T07:44:38.580
> 
> 标签：c++, winapi, mfc

我正在尝试`CStatic`通过处理来更改我的 - 派生类中的光标`OnSetCursor`

```
class CMyStatic : public CStatic
{
    // ....
};

BEGIN_MESSAGE_MAP(CMyStatic, CStatic)
    ON_WM_SETCURSOR()
END_MESSAGE_MAP()

BOOL CMyStatic::OnSetCursor(CWnd* pWnd, UINT nHitTest, UINT message) 
{
    TRACE(_T("OnSetCursor\n"));
    SetCursor(AfxGetApp()->LoadStandardCursor(IDC_CROSS));
    return TRUE;
} 
```

`OnSetCursor`每次我移动鼠标时都会调用它，但光标不会改变。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T08:29:56.277

使用 ::SetCursor。或者你可以在别处调用一次SetCursor而不捕获WM_SETCURSOR，光标会自动设置。

您使用的 CWnd::SetCursor 用于为窗口设置光标，如果您不覆盖 OnSetCursor，则将使用该光标。也就是说，OnSetCursor 的默认行为是调用 ::SetCursor 并通过调用 CWnd::SetCursor 设置光标一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T14:25:55.780

```
m_hHandCursor = LoadCursor(NULL ,MAKEINTRESOURCE(IDC_HAND)); 
```

将 m_hHandCursor 作为成员变量并在 OnInitDialog 中使用 win32 API LoadCursor 进行初始化......然后 OnSetCursor() 事件始终使用 SetCursor API 设置此游标......因此您的应用程序将始终获得系统定义的 HAND 游标

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T07:50:41.483

在这种情况下您不需要（或不想）使用`MAKEINTRESOURCE`，因此请更改：

```
SetCursor(AfxGetApp()->LoadStandardCursor(MAKEINTRESOURCE(IDC_CROSS))); 
```

至：

```
SetCursor(AfxGetApp()->LoadStandardCursor(IDC_CROSS)); 
```

# asp.net - 弹窗无法显示

> ID：10205070
> 
> 赞同：0
> 
> 时间：2012-04-18T07:45:09.110
> 
> 标签：asp.net, javascript-events

我有这个弹出窗口

```
<dxpc:ASPxPopupControl runat="server" ClientInstanceName="pcMFileBrowser" id="pcMFileBrowser" Modal="false"
HeaderText="Browse M Files" EnableClientSideAPI="True" PopupHorizontalAlign="WindowCenter" 
PopupVerticalAlign="WindowCenter" CloseAction="None" ShowCloseButton="False" EnableAnimation="False">
<ContentCollection>
<dxpc:PopupControlContentControl ID="PopupControlContentControl1" runat="server">
    <table>
        <tr>
            <td>
                TEXT!
            </td>
        </tr>
    </table>
</dxpc:PopupControlContentControl>
</ContentCollection> 
```

这个按钮：

```
<dxe:ASPxButton id="_ShowM" runat="server" Text="Browse M" Visible="false" skinid="WideButton" autopostback="False" ClientSideEvents-Click="function(s, e){pcMFileBrowser.Show();}" causesvalidation="False" enableclientsideapi="True" wrap="False"></dxe:ASPxButton> 
```

但是当我点击按钮时它没有显示......我试过了

```
<dxe:ASPxButton id="_ShowM" runat="server" Text="Browse M" Visible="false" skinid="WideButton" autopostback="False" ClientSideEvents-Click="ShowPopup" causesvalidation="False" enableclientsideapi="True" wrap="False"></dxe:ASPxButton>
<script ......> function ShowPopup(s, e){pcMFileBrowser.Show();}</script> 
```

但现在它总是在上面......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:32:53.927

更改 javascript 以便返回 false 而不是回发。

```
<script> 
       function ShowPopup()
       {
         pcMFileBrowser.Show();
         return false;
       }
</script> 
```

其次改变你称之为的方式：

```
<dxe:ASPxButton id="_ShowM" ... ClientSideEvents-Click="return ShowPopup();" ...> 
```

# objective-c - 将对象添加到可变数组时出现奇怪的“发送到不可变对象的变异方法”错误

> ID：10205073
> 
> 赞同：2
> 
> 时间：2012-04-18T07:45:14.947
> 
> 标签：objective-c, automatic-ref-counting

这是一个奇怪的...

我会定期检查用户是否在我的应用中获得了新的最高分。这是我的代码：

```
- (void) newTopScore
{
    // pull old top score from the database
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSDictionary *getBoardsAndScores = [defaults dictionaryRepresentation];
    NSMutableArray *boardsAndScores = [[getBoardsAndScores objectForKey:@"boardsAndScores"] mutableCopy];
    NSMutableDictionary *boardAndScoreObject = [[boardsAndScores objectAtIndex:gameBoardIndex] mutableCopy];
    NSString *topscore = [boardAndScoreObject objectForKey:@"topscore"];  

    NSLog(@"topscore in value: %i", [topscore intValue]);

    if ([topscore intValue] == 0)
    {
        NSString *topscoreString = [[NSString alloc] initWithFormat:@"%i", [self countCurrentPegs]];

        NSMutableArray *mutableBoardsAndScores = [boardsAndScores mutableCopy];

        [[mutableBoardsAndScores objectAtIndex:gameBoardIndex] setObject:topscoreString forKey:@"topscore"];

        [defaults setObject:mutableBoardsAndScores forKey:@"boardsAndScores"];
        [defaults synchronize];

    }

    else if ([self countCurrentPegs] < [topscore intValue])
    {
        NSString *topscoreString = [[NSString alloc] initWithFormat:@"%i", [self countCurrentPegs]];

        NSMutableArray *mutableBoardsAndScores = [boardsAndScores mutableCopy];

        [[mutableBoardsAndScores objectAtIndex:gameBoardIndex] setObject:topscoreString forKey:@"topscore"];

        [defaults setObject:mutableBoardsAndScores forKey:@"boardsAndScores"];
        [defaults synchronize];
    }

} 
```

有时代码工作得很好，无论是对于 if 还是 else。有时虽然我收到以下错误：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[__NSCFDictionary setObject:forKey:]: 
mutating method sent to immutable object' 
```

我尝试设置断点并逐行执行程序。崩溃似乎有些随机，我无法找出模式。一般一秒就崩溃了...

```
[[mutableBoardsAndScores objectAtIndex:gameBoardIndex] setObject:topscoreString forKey:@"topscore"]; 
```

...线。

对象是可变的。或者至少是这样。为什么会发生变化？

任何建议的帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T07:49:40.063

```
[[[mutableBoardsAndScores objectAtIndex:gameBoardIndex] mutableCopy] setObject:topscoreString forKey:@"topscore"]; 
```

你能测试一下吗？（为游戏板添加了 mutableCopy）；

**编辑**

你能把上面的改成：

```
NSMutableArray *gameBoard = [[mutableBoardsAndScores objectAtIndex:gameBoardIndex] mutableCopy];

[gameBoard setObject:topscoreString forKey:@"topscore"];

[mutableBoardsAndScores removeObjectAtIndex:gameBoardIndex];
[mutableBoardsAndScores insertObject:gameBoard atIndex:gameBoardIndex]; 
```

你能试试这个吗？它可能不是最漂亮的解决方案，但我相信它会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:06:32.883

`NSUserDefaults`不存储您为其设置的对象。它存储数据。实际上，它正在复制。您从中检索的任何集合对象`NSUserDefaults`都是不可变的。

编辑说：另外，当你制作一个集合的可变副本时，它是一个浅拷贝。您将获得一个可变集合，其中包含与原始集合相同的对象。如果原始集合包含不可变对象，那么新集合也将如此。

如果您需要对与属性列表兼容的对象层次结构进行深层复制，获取可变对象，您可以使用`NSPropertyListSerialization`. 结合`+dataWithPropertyList:format:options:error:`和`+propertyListWithData:options:format:error:`或`NSPropertyListMutableContainers`选项`NSPropertyListMutableContainersAndLeaves`。

# matplotlib - 从图中擦除椭圆？

> ID：10205081
> 
> 赞同：5
> 
> 时间：2012-04-18T07:45:39.927
> 
> 标签：matplotlib, ellipse

我是 python 新手，也是图形新手！问题是我正在实施基于 EKF 地图的本地化，并且我想绘制不确定椭圆。为此，每次我想用所有值更新图形时，我都会调用一个函数调用 animate，其中包含以下内容：

```
ellipse = matplotlib.patches.Arc([x_B_1[0,0],x_B_1[0,1]],P_B_1[0,0],P_B_1[1,1],x_B_1[0,2]*180/pi,color='green', linewidth='0.5')
ax.add_patch(ellipse) 
```

还有一些其他的东西

问题是，通过这样做，图中所有的椭圆都变得一团糟（我无法发布该图的图片，因为这是我的第一篇文章，论坛不允许我这样做），我只想要最后一个椭圆。

我该怎么做？

* * *

我不能这样做，因为图中的所有内容都丢失了，我只想擦除椭圆而不是我在该图中拥有的其他东西，也许这是不可能的......有没有更新椭圆参数的选项所以而不是绘制一个新的，我只是更新已经绘制的那个？？

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T22:31:29.107

`ellipse.remove()`应该做你想做的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:52:10.817

我认为您的问题是您必须在绘制其他内容之前清除该数字。尝试使用`clf()`matplotlib 的命令

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T08:19:49.267

我懂了。正如您所说，您不想使用`set_data`. 看看[这里](https://stackoverflow.com/questions/7187504/set-data-and-autoscale-view-matplotlib)如何使用它。

# xcode - NSTextField 垂直对齐

> ID：10205088
> 
> 赞同：19
> 
> 时间：2012-04-18T07:46:20.157
> 
> 标签：xcode, cocoa, xcode4.2, vertical-alignment, nstextfield

我正在创建可可应用程序，我在其中以这样的方式创建`NSTextField`，

```
NSView *superView = [[NSView alloc] initWithFrame:NSMakeRect(0, 300, 1400, 500)];
NSTextField *myTextField = [[NSTextField alloc] initWithFrame:NSMakeRect(180, 100, 1000, 300)];
[myTextField setStringValue:myText];
[myTextField setEditable:NO];
[myTextField setBezeled:NO];
[myTextField setDrawsBackground:NO];
[myTextField setSelectable:NO];
[myTextField setFont:[NSFont fontWithName:@"Futura" size:22]];
[superView addSubview:myTextField];
[superView setAutoresizesSubviews:YES];
[myTextField setAutoresizingMask:NSViewWidthSizable | NSViewHeightSizable];
[self.window.contentView addSubview:superView]; 
```

现在我想要我的文本垂直对齐，它应该可以根据**文本长度**进行调整。
有人有什么建议吗？请分享您的建议:)

非常感谢..！！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-18T08:11:34.030

你想要什么是可能的，但你必须创建一个 NSTextFieldCell 的子类，然后在你的 NSTextField 中使用该子类。您想要覆盖的关键方法是`drawingRectForBounds:`、`selectWithFrame:`和`editWithFrame:`

[这是来自出色的 Daniel Jalkut 的一篇关于此的博客文章](http://www.red-sweater.com/blog/148/what-a-difference-a-cell-makes)，他甚至包括一个可供下载的版本。该帖子相当旧，但它应该仍然可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T08:04:59.353

为了将文本字段调整为字符串大小，您必须使用`NSString`'s来计算文本大小，`sizeWithFont: constrainedToSize: lineBreakMode:`然后通过设置框架来调整文本字段的大小。

对于垂直对齐看这个[问题](https://stackoverflow.com/questions/1235219/is-there-a-right-way-to-have-nstextfieldcell-draw-vertically-centered-text)（和答案）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-27T11:46:15.910

[这是上面sosborn](https://stackoverflow.com/users/79267/sosborn)链接到的解决方案的 Swift 版本：

```
open class VerticallyCenteredTextFieldCell: NSTextFieldCell {

    fileprivate var isEditingOrSelecting : Bool = false

    open override func drawingRect(forBounds rect: NSRect) -> NSRect {
        let rect = super.drawingRect(forBounds: rect)

        if !isEditingOrSelecting {
            let size = cellSize(forBounds: rect)
            return NSRect(x: rect.minX, y: rect.minY + (rect.height - size.height) / 2, width: rect.width, height: size.height)
        }

        return rect
    }

    open override func select(withFrame rect: NSRect, in controlView: NSView, editor textObj: NSText, delegate: Any?, start selStart: Int, length selLength: Int) {
        let aRect = self.drawingRect(forBounds: rect)
        isEditingOrSelecting = true
        super.select(withFrame: aRect, in: controlView, editor: textObj, delegate: delegate, start: selStart, length: selLength)
        isEditingOrSelecting = false
    }

    open override func edit(withFrame rect: NSRect, in controlView: NSView, editor textObj: NSText, delegate: Any?, event: NSEvent?) {
        let aRect = self.drawingRect(forBounds: rect)
        isEditingOrSelecting = true
        super.edit(withFrame: aRect, in: controlView, editor: textObj, delegate: delegate, event: event)
        isEditingOrSelecting = false
    }

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-10-16T22:35:32.977

此时覆盖 ViewWillDraw 并将您的 NSTextField 放置在其父视图的中心。这也适用于实时调整大小。此时您还可以调整字体大小以找到适合新大小的字体。

# asp.net - 在 url 中启用 '&' 和特殊字符

> ID：10205091
> 
> 赞同：1
> 
> 时间：2012-04-18T07:46:22.850
> 
> 标签：asp.net

如何在不更改注册表值的情况下在 url 中启用 '&' 和其他一些特殊字符，如 '*、@、%' 以允许 iis 中的受限字符。有什么办法可以通过asp.net中的web.config文件解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:52:26.783

您不应该直接在 url 中使用这些字符。您需要对这些值进行 URL 编码，以便它们存在于 url 中。

例如：

```
Server.UrlEncode("Dog & Cat"); 
```

将产生：

> 狗%20%26%20猫

这在网址中是合法的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T07:49:49.370

您需要做的就是对字符进行编码以在 URL 中使用。您可以使用[UrlEncode](http://msdn.microsoft.com/en-us/library/zttxte6w.aspx)来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T07:50:55.910

如果您指的是 ASP.NET 请求验证阻止包含这些字符的回发，您可以通过在页面声明中添加以下属性在页面级别禁用它：

```
ValidateRequest="false" 
```

例如：

```
<%@ Page Title="Page Title" Language="C#" ValidateRequest="false" %> 
```

如果您不小心对回发的表单输入执行自己的验证，禁用此功能可能会带来安全风险。

# linux - 无法理解 fork() 描述

> ID：10205092
> 
> 赞同：0
> 
> 时间：2012-04-18T07:46:36.660
> 
> 标签：linux, operating-system, virtual-memory

[我正在研究galvin](https://rads.stackoverflow.com/amzn/click/com/0470128720)的虚拟内存管理，我无法理解这句话：

> 除了将逻辑内存与物理内存分开外，虚拟内存还允许两个或多个进程通过页面共享来共享文件和内存。这带来了以下好处
> 
> **虚拟内存可以允许在进程创建过程中通过 fork() 系统调用共享页面，从而加快进程创建速度。**

页面如何共享`fork()`？请说清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:44:42.647

我相信文本指的是为 fork() 所做的写时复制优化。

基本上一个 fork() 克隆一个进程，复制它的整个内存。这可能需要很长时间，尤其是对于使用大量资金的流程。此外，fork() 后面紧跟 exec() 是很常见的，这使得之前的副本毫无意义。

现代 Unix 不是为每个 fork() 都做所有这些工作，而是创建新进程，但不要复制所有内存。他们只是将原始进程和新进程的虚拟内存页面指向相同的物理页面。

就减少副本和减少内存使用而言，这大大降低了 fork() 的成本。

不利的一面是，每当 fork()ed 进程或原始进程写入页面时，写入都会引发异常（因为物理页面被标记为只读）并且该页面毕竟被复制。幸运的是，事实证明这种情况并不经常发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:48:05.230

如果具有相同或不同虚拟地址页的两个进程共享相同的物理内存帧，则这些页可能会被 fork 共享。他们在页表中有相同的帧号条目

# sql-server - 为什么服务器在插入时更改单个值？

> ID：10205095
> 
> 赞同：1
> 
> 时间：2012-04-18T07:46:45.987
> 
> 标签：sql-server, sql-server-2008

我有一个查询，从 C# 代码执行到 SQL Server 2008：

```
INSERT INTO [tableName] (valueColumn) @Value 
```

带有和`@Value`的 sql 参数的名称在哪里`DbType.Single``Value = 45.01`

执行查询后，我在表值中看到`45,0099983215332`而不是`45,01`

为什么会这样？

ps：列有类型`float`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:50:18.690

`valueColumn`可能是一个浮点数。

> 浮点数据是近似的；因此，并非数据类型范围内的所有值都可以准确表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:59:42.383

read [this](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html) link

Floating points can vary slightly from one architecture to another

# asp.net-mvc-3 - 如何从控制器设置布局

> ID：10205098
> 
> 赞同：25
> 
> 时间：2012-04-18T07:46:57.693
> 
> 标签：asp.net-mvc-3, razor

有没有办法从控制器设置布局？

试过：

```
ViewData["Layout"] = "..."
return View("view", Model); 
```

我知道这对某些人来说听起来很奇怪......

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-18T07:52:24.100

View 方法有重载来设置它的主布局像这样

```
return View ("NameOfView",masterName:"viewName"); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-07-29T23:50:35.273

在操作方法中，您可以使用 **ViewResult类中的****MasterName**属性来更改布局页面。

 **```
public ActionResult Index()
        {
            var myView = View();
            myView.MasterName = "~/Views/Shared/_Layout2.cshtml"; 
            return myView;
        } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-18T07:48:33.493

使用您的代码，您可以将其放在您的视图中：

```
@ {
    Layout = ViewData["Layout"];
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-18T08:01:56.283

达伦·迪米特洛夫（Daren Dimitrov）对此有一个非常好的答案：

[如何在 ASP.NET MVC 3 razor ViewStart 文件中指定不同的布局？](https://stackoverflow.com/questions/5161380/how-do-i-specify-different-layouts-in-the-asp-net-mvc-3-razor-viewstart-file)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-07-13T14:07:05.917

在控制器中，您可以像这样设置母版页。我正在使用 MVC 5.2

```
return View("ViewName", "MasterPageName", model) 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-04-20T13:02:29.210

如果您的 Views 目录中有一个 _ViewStart.cshtml 文件，您可以自动为同一文件夹（和子文件夹）中的所有视图设置布局：

```
@{
    Layout = "~/Views/Shared/Layout.cshtml";
} 
```**

# php - Jquery背景颜色不起作用？

> ID：10205099
> 
> 赞同：-1
> 
> 时间：2012-04-18T07:46:58.457
> 
> 标签：php, javascript, jquery, css, jquery-ui

我尝试在单击按钮时更改背景，当我尝试单击另一个按钮时更改为默认颜色。我附上了我的代码

PHP动态代码：

```
<ul id="VerColMenu">
<?php 
      echo '<li class = result>';
    echo '<a href="#" class="direct-link">'.$B->getAttribute('TITLE').'</a>';
    echo '<input type="hidden" name="menu-id" value="'.$u.'"/>';
    echo '<input type="hidden" name="slider" value="'.$B->getAttribute('SLIDER').'"/>';
    echo '<input type="hidden" name="min" value="'.$B->getAttribute('MIN').'"/>';
    echo '<input type="hidden" name="max" value="'.$B->getAttribute('MAX').'"/>';
        echo '</li>';  ?>   </ul> 
```

使用直接链接类的按钮的单击功能：

```
 $('.direct-link').bind('click',function(){

        var $elem = $(this); 
        var oldBG = $elem.css('background-color');
        $elem.css('backgroundColor', '#FF0000');

    if(!$(this).parents('.sub-menu').length){

      $('.sub-menu').hide(); 

        }               
       //     $(this).css({'background-color' : 'yellow', 'font-weight' : 'bolder'});                   

        var $current=$(this).parent();
        var id=parseInt($current.find('input:hidden[name=menu-id]').val());
        var slider=$current.find('input:hidden[name=slider]').val();
        var min=parseInt($current.find('input:hidden[name=min]').val());
        var max=parseInt($current.find('input:hidden[name=max]').val());            
        button_clk(id, slider, min, max);
    }); 
```

我需要你的帮助来解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:51:33.587

看到这个[http://jsfiddle.net/RuE9N/](http://jsfiddle.net/RuE9N/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:57:15.883

对于 jQuery 的 .css 函数，您可以使用类似 CSS 的名称以及 JavaScript 名称。那就是你可以输入：

```
$elem.css('background-color', '#FFFF00'); 
```

您还可以将默认颜色存储在标签的 HTML5 数据属性中，而不是 JS 变量中，例如：

```
$elem.attr('data-color', $elem.css('background-color')); 
```

当你想再次使用它时，你可以这样做：

```
$elem.css('background-color', $elem.attr('data-color')); 
```

我希望这有帮助 ：）

# elasticsearch - 使用嵌套过滤器的 ElasticSearch 查询不起作用

> ID：10205102
> 
> 赞同：2
> 
> 时间：2012-04-18T07:47:15.440
> 
> 标签：elasticsearch, nested

我正在使用包含另一个嵌套字段的嵌套字段（因此字段的 2 步树）为 Elasticsearch 文档编制索引。我想根据内部嵌套字段中的数据匹配文档，这不起作用。

NestedFilterBuilder 看起来像下面的..

```
 "nested" : {
          "filter" : {
            "or" : {
              "filters" : [ {
                "term" : {
                  "event_attribute_value" : "Obama"
                }
              }, {
                "term" : {
                  "event_attribute_value" : "President"
                }
              } ]
            }
          },
          "path" : "eventnested.attributes"
        } 
```

这是我用来生成查询的 Java

```
orFilter.add(termFilter("event_attribute_value","president"));
NestedFilterBuilder nestedFilterBuilder = new NestedFilterBuilder("eventnested.attributes", orFilter);
finalFilter.add(nestedFilterBuilder); 
```

建立索引的映射是

```
"eventnested":{
            "type" : "nested", "store" : "yes", "index" : "analyzed", "omit_norms" : "true",
            "include_in_parent":true,
            "properties":{              
                "event_type":{"type" : "string", "store" : "yes", "index" : "analyzed","omit_norms" : "true"},
                "attributes":{
                "type" : "nested", "store" : "yes", "index" : "analyzed", "omit_norms" : "true",
                "include_in_parent":true,
                    "properties":{
                        "event_attribute_name":{"type" : "string", "store" : "yes", "index" : "analyzed","omit_norms" : "true"},
                        "event_attribute_value":{"type" : "string", "store" : "yes", "index" : "analyzed","omit_norms" : "true"}
                    }
                    },
                "event_attribute_instance":{"type" : "integer", "store" : "yes", "precision_step" : "0"}
                }                                           
                } 
```

我用错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:16:01.143

根据你的映射`event_attribute_value`进行分析。这意味着在索引短语“President Obama”期间被分析为两个标记：“president”和“obama”。您正在搜索索引中不存在的标记“总统”和“奥巴马”。

**您可以通过以下方式解决此问题**

1.  将字段映射更改为`not_analyzed`,
2.  用文本查询替换术语过滤器或
3.  在您的术语过滤器中使用正确的标记（在这种情况下为“总统”和“奥巴马”）。

# c# - 更改outlook mailitem选择c#

> ID：10205103
> 
> 赞同：2
> 
> 时间：2012-04-18T07:47:20.930
> 
> 标签：c#, outlook, add-in, mailitem

我想从我的 Outlook 加载项中选择一个 mailItem。我知道如何从 c# 显示邮件项，但我需要在 Outlook 窗口本身中选择它。

显示一个邮件项：

```
mailItem.Display(); 
```

我正在使用 Outlook 2010 加载项。

有人知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T17:20:11.480

使用[`Explorer.ClearSelection()`](http://msdn.microsoft.com/en-us/library/ff862680.aspx)然后[`Explorer.AddToSelection()`](http://msdn.microsoft.com/en-us/library/ff868732.aspx)。您应该[`Explorer.IsItemSelectableInView()`](http://msdn.microsoft.com/en-us/library/ff868297.aspx)在调用之前使用`AddToSelection()`以确保您要选择的项目存在于当前的资源管理器视图中。

[`Application.ActiveExplorer()`](http://msdn.microsoft.com/en-us/library/ff870017.aspx)如果存在，将为您提供当前活动的资源管理器。

这是[从此处获取的示例片段](http://www.add-in-express.com/forum/read.php?FID=5&TID=8587)（*稍作修改以检查`IsItemSelectableInView`*）。

```
Outlook._Explorer explorer = OutlookApp.ActiveExplorer();  // get active explorer
explorer.ClearSelection(); // remove current selection
Outlook.NameSpace ns = OutlookApp.Session; 
object item = ns.GetItemFromID(entryId, Type.Missing); // retrieve item
if (explorer.IsItemSelectableInView(item)) // ensure item is in current view
  explorer.AddToSelection(item); // change explorer selection
else
  // TODO: change current view so that item is selectable
Marshal.ReleaseComObject(item); 
Marshal.ReleaseComObject(ns); 
Marshal.ReleaseComObject(explorer); 
```

要更改当前`Explorer`视图，您可以使用[`Explorer.CurrentFolder`](http://msdn.microsoft.com/en-us/library/ff866719.aspx)或[`Explorer.CurrentView`](http://msdn.microsoft.com/en-us/library/ff861617.aspx)

# android - 活动生命周期（活动之间来回移动）

> ID：10205107
> 
> 赞同：0
> 
> 时间：2012-04-18T07:47:35.243
> 
> 标签：android, android-lifecycle

作为 Android 新手，我开始怀疑 Activity 生命周期。我有一个加载人员列表并显示它们的活动。单击一个人后，我想打开另一个显示该人详细信息的活动。我目前正在通过在“PersonDetailActivity”上创建一个 Intent 来执行此操作，然后我将启动它。到目前为止，一切都很好。在 PersonDetail 页面上，我希望有一个菜单操作可以返回到 Person 列表。我再次应用了相同的技术，这意味着将我带回 PersonListActivity 的 Intent。

现在我开始想知道返回 PersonListActivity 意味着什么。是否会创建一个新实例，我是否必须重新加载它在列表中显示的人员？你能回到同一个实例，避免再次重新加载列表吗？然后，您是否必须通过意图将指向您自己的指针传递给另一个 Activity？

所以什么时候会和 Activity 被重新实例化，什么时候不会。任何提示或建议都非常受欢迎。也许我还不知道这些来回菜单操作要应用一些模式。

谢谢，

文森特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:51:45.007

是的，，。调用`finish()`第二个 Activity 而不是启动新的 Activity..

基本上有一个叫做 Activity 堆栈的东西，它按照它们开始的顺序存储所有的 Activity 。所以如果开始新的 Activity ，它位于堆栈的顶部，而前一个位于它下面。当你调用完成时，Activity 被弹出。 .

如果您不想调用`finish()`正确的方法，请`ACTIVITY_CLEAR_TOP`在清单中为第一个活动添加标志..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:56:49.920

基本上，如果你只是调用你的`finish()`方法`PersonDetailActivity`

`PersonDetailActivity.this.finish();`

它将`onResume()`从已完成的 Activity 顶部的 Activity 中激活该方法，这里将是您的 PersonsActivity。您可以在`onResume()`方法中指定返回时要执行的操作。

# html - 造型 我以一般方式修改了样式表的所有选择，然后执行以下操作：select { -moz-appearance:none; -moz-边界半径：1px；-moz-box-sizing:边框框；-webkit-外观：无；-webkit-边界半径：1px；外观：无；背景：url(../images/general/select-arrow.png) 无重复滚动 100% 50% #fff; 边框：1px 实心#d2d2d2; 边框半径：1px；字体：13px "Helve

> ID：10205110
> 
> 赞同：3
> 
> 时间：2012-04-18T07:47:37.247
> 
> 标签：html, css, debugging, cross-browser

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T20:55:28.450

使用[默认样式表](https://dxr.mozilla.org/mozilla-release/source/layout/style/res/forms.css)中的属性选择器作为重置样式的指南：

```
select[multiple] {
  background:none;
  width:auto;
  height:auto;
  padding:0;
  margin:0;
  border-width: 2px;
  border-style: inset;
  -moz-appearance: menulist;
  -webkit-appearance: menulist;
  appearance: menulist;
} 
```

# linux - 在 Linux 中监控文件访问

> ID：10205111
> 
> 赞同：5
> 
> 时间：2012-04-18T07:47:38.190
> 
> 标签：linux, audit, inotify

对于我正在编写的应用程序，我想知道哪些进程正在访问特定文件并将该信息转储到日志文件中。最后，其中一个进程将删除此文件，我也想知道该进程的名称。

我可以使用 INotify 库来监视文件访问，但它没有给我正在访问文件的进程名称。这也可能在 linux 上使用 Auditctl 包，但我也不能使用这个选项:-(

实际上，由于某些原因，它是一个受控环境，最终客户已准备好运行程序，但尚未准备好安装新软件包或对现有实用程序进行更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:34:02.780

仅从用户空间可靠地审计 Linux 中的直接附加文件访问是不可能的。

您可以使用 lsof 进行轮询，但您可能无法检测到轮询之间的访问。最初的 dnotify 模块（被 inotify 淘汰...）的目的是避免产生轮询的开销并避免丢失事件。审计系统在文件打开时提供用户标识。

如果可以将文件移动到 NFS 服务器，则可以使用 NFS 日志记录对文件的访问。

如果这是一个生产服务器或者是一个即将上线的开发服务器，客户可能不会安装新软件包是正确的。您应该考虑请求授权以在下一个开发或测试服务器上设置审核。

# jboss7.x - JBoss AS 7 部署 - 使用部署扫描器或控制台存储库？

> ID：10205113
> 
> 赞同：1
> 
> 时间：2012-04-18T07:47:45.260
> 
> 标签：jboss7.x

我在迁移后开始使用 AS 7 并尝试确定热部署的工作方式是否与上传应用程序的控制台方法相同？

如果热部署保留在部署文件夹中，那么应用程序在控制台（或 cli？）加载时“去”到哪里。我应该在管理员角色中使用哪种方法？如果我同时使用两者会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:40:22.673

如果您使用 hotdeploy，您的应用程序将保留在“deployments”中，否则如果您使用 cli，您的应用程序将保留在“data”文件夹中。

您可以同时使用 hotdeploy 或 cli deploy ，最后部署的是当前。

这里是关于部署命令的文档：

> [standalone@localhost:9999 /] 部署 --help 概要
> 
> ```
> deploy (file_path [--name=deployment_name] [--runtime_name=deployment_runtime_name] [--force | --disabled] | 
> ```
> 
> --name=deployment_name) [--server-groups=group_name (,group_name)* | --all-server-groups] [--headers={operation_header (;operation_header)*}]
> 
> 描述
> 
> ```
> Deploys the application designated by the file_path or enables an already existing
> but disabled in the repository deployment designated by the name argument.
> If executed w/o arguments, will list all the existing deployments. 
> ```
> 
> 论据
> 
> file_path - 要部署的应用程序的路径。如果存储库中不存在部署，则需要。路径可以是绝对路径，也可以是相对于当前目录的路径。
> 
> --name - 部署的唯一名称。如果指定了文件路径参数，则名称参数是可选的，文件名是默认值。如果未指定文件路径参数，则该命令应该启用已经存在但已禁用的部署，在这种情况下，名称参数是必需的。
> 
> --runtime_name - 可选，部署的运行时名称。
> 
> --force - 如果指定名称的部署已经存在，默认情况下，部署将被中止并打印相应的消息。开关 --force（或 -f）将强制使用命令参数中指定的部署替换现有部署。
> 
> --disabled - 表示必须将部署添加到已禁用的存储库。
> 
> --server-groups - 部署命令应该应用到的服务器组名称的逗号分隔列表。在域模式下需要 server-groups 或 all-server-groups。该参数不适用于独立模式。
> 
> --all-server-groups - 表示部署应该应用于所有可用的服务器组。在域模式下需要 server-groups 或 all-server-groups。该参数不适用于独立模式。
> 
> -l - 如果没有指定任何必需的参数，该命令将打印存储库中的所有现有部署。-l 开关的存在将使现有部署每行打印一个部署，而不是在列中（默认）。
> 
> --headers - 以分号分隔的操作标头列表。有关支持的标头列表，请参阅域管理文档或使用 tab-completion。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:36:37.533

我相信进行热部署的唯一方法是使用文件系统部署，例如部署扫描器。[您可以在应用程序部署](https://docs.jboss.org/author/display/AS71/Application+deployment#Applicationdeployment-FileSystemDeployments)文档中获得一些相关信息。

当您通过控制台或 CLI 部署时，部署会保持压缩并进入内容目录。但是，您对其中的内容无能为力。

对于生产，建议不要使用部署扫描器。部署应用程序的方法有多种，但最简单的方法往往是使用 Web 控制台、CLI 或 maven 插件。也有 Java API，或者您可以编写脚本来执行 CLI 命令。

# windows-phone-7 - 单击时图像“看起来像按下”

> ID：10205114
> 
> 赞同：0
> 
> 时间：2012-04-18T07:47:45.690
> 
> 标签：windows-phone-7

使用 Tap 手势创建图像后，当在图像上“点击”时，它会启动“GestureListener_Tap”。但是，用户体验很差，因为当用户点击图像时，图像不会“缩进”或看起来像按下...

请问有人知道该怎么做吗？

```
<Image Source="images/Forex 1 Icons_62.png" Stretch="None" Margin="0,500,0,0">
    <toolkit:GestureService.GestureListener>
        <toolkit:GestureListener Tap="GestureListener_Tap" />
    </toolkit:GestureService.GestureListener>
</Image> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:05:13.700

我只是猜测更新使用图像作为按钮，大多数时候我将图像包装在按钮中，然后你会得到效果，因为它是一个按钮。也许您必须将效果添加到图像中，例如，`toolkit:TiltEffect.IsTiltEnabled`或者您需要通过艰难的方式来为图像创建新状态并在用户手动点击图像时更改状态。

# c# - 会话管理 c#.net 和 mysql

> ID：10205118
> 
> 赞同：1
> 
> 时间：2012-04-18T07:47:52.297
> 
> 标签：c#, mysql, database, session

我正在用 C#.net 和 mysql 创建一个网站（购物车）。在 .net 和 sql server 中，我们可以在 sql server 中管理会话。这是否可能与使用 mysql 的方式相同，如果是，那么如何？另一个问题 - 将会话存储在数据库中是购物车的正确方法还是应该存储在内存中？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:57:31.977

.NET Framework中基本上有 3 种“内置”[会话存储方法：](http://msdn.microsoft.com/en-us/library/ms178586.aspx)

*   **InProc**模式，将会话状态存储在 Web 服务器的内存中。这是默认设置。

*   **StateServer**模式，它将会话状态存储在称为 ASP.NET 状态服务的单独进程中。这可确保在重新启动 Web 应用程序时保留会话状态，并使会话状态可用于 Web 场中的多个 Web 服务器。

*   **SQLServer**模式将会话状态存储在 SQL Server 数据库中。这可确保在重新启动 Web 应用程序时保留会话状态，并使会话状态可用于 Web 场中的多个 Web 服务器。

如您所见，唯一支持对数据库进行序列化的是 SQL Server。但是，还有第四个选项 - 创建您自己的[自定义会话存储提供程序](http://msdn.microsoft.com/en-us/library/ms178587.aspx)。您可以通过创建继承`SessionStateStoreProviderBase`类的类来实现自定义会话状态存储提供程序。MSDN上的[这篇文章描述了如何。](http://msdn.microsoft.com/en-us/library/ms178587.aspx)

但是，您可能只想使用 StateServer 模式，因为这可以减轻使用 InProc 的许多风险（如果内存变低、应用程序池被回收或应用程序重新启动，会话状态很容易丢失）。只要记住用`[Serializable()]` [属性](http://msdn.microsoft.com/en-us/library/system.serializableattribute.aspx)标记你所有的类。如果您想在用户离开网站后保留购物车信息，我只会使用数据库。

# nullpointerexception - 在制作实时墙纸以获取天气预报时面临以下日志猫错误

> ID：10205119
> 
> 赞同：1
> 
> 时间：2012-04-18T07:48:02.287
> 
> 标签：nullpointerexception, live-wallpaper, launching

请通过[http://www.pastie.org/3809101中的以下代码](http://www.pastie.org/3809101)

```
 @Override
        public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    // making it full screen
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    ball = new BallBounces(this);
    ball.activity = this;
    setContentView(ball);
    getGPSdata();
      } 
```

这是没有错误的主要活动方法和项目。为什么突然停止？

# zend-framework - 如何在基于 Zend Framework 的应用程序的应用程序引导程序中使用模块中的模型类？

> ID：10205124
> 
> 赞同：2
> 
> 时间：2012-04-18T07:48:17.130
> 
> 标签：zend-framework, model, module, autoload, bootstrapping

我正在开发一个带有一些模块的 Zend Framework MVC 应用程序，例如用户模块。有一个模型类名称“Users_Model_User”可用于任何模块/控制器操作。但是我需要在应用程序 Bootstrap 类中使用该模型的一个实例，但是我得到了一个异常：

> 致命错误：在 /my/path/... 中找不到类“Users_Model_User”

我为每个模块都有一个 Bootstrap 类：

```
class Users_Bootstrap extends Zend_Application_Module_Bootstrap {

    protected function _initAutoloader() {
        $autoloader = new Zend_Application_Module_Autoloader(array(
                    'namespace' => 'Users_',
                    'basePath' => APPLICATION_PATH . '/modules/users'
                ));

        return $autoloader;
    }

} 
```

正如我所说，这些模块工作得很好（接收请求、处理和返回响应）。我认为这可以正常工作，因为模块引导类负责加载默认模块资源，如模型类。但主要的 Bootstrap 类似乎无法访问“用户”模块模型类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T07:52:44.913

`Users_Bootstrap`在您的应用程序引导之后执行，这意味着您的`_initAutoloader()`方法尚未在您的应用程序引导中执行。

一个解决方案可能是将您的代码从`_initAutoloader()`您的主引导程序移动。这将解决您的问题！您也可以将主引导程序中的一段代码指向模块引导程序，这对我来说更有意义。请注意，**您的所有模块引导程序总是被调用**，独立于当前请求的模块。

另外，让我与您分享[这篇](http://mwop.net/blog/234-Module-Bootstraps-in-Zend-Framework-Dos-and-Donts.html)关于 ZF 中的引导过程的文章，希望对您有所帮助；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T07:55:22.520

你可以试试（不确定它会起作用）

```
protected function __initSomething()
{
   $this->bootstrap('autoload');
   $model = new Users_Model_User();
   ...
} 
```

我不认为 bootstrap 是进行 mysql 查询的好地方，**你应该使用**a `Zend_Controller_Plugin_Abstract`，这样资源就会启动并且 bootstrap 自动加载正在工作（我自己使用插件来进行查询和检查权限...... )

# php - 使用 php 从 imagegrabscreen() 创建图像的黑色背景

> ID：10205126
> 
> 赞同：1
> 
> 时间：2012-04-18T07:48:33.787
> 
> 标签：php, function

我正在使用代码

```
<?php
echo 'Hi';
$im = imagegrabscreen();
imagejpeg($im, "myscreenshot.jpg");
imagedestroy($im);
?> 
```

这是创建一个黑色背景的图像 myscreenshot.jpg。但我期待一个白色背景的 jpeg 图像，上面写着你好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:04:20.510

这是一个常见问题，您会收到此错误，因为不允许 Apache 与您的桌面交互（注）

解决方案 1：Apache 权限：

*   `services.msc`以管理员身份运行命令。
*   在列表中找到 Apache 服务，右键单击并选择属性
*   单击登录选项卡
*   将服务更改为使用本地系统帐户（如果尚未使用）
*   选中显示 的框`Allow this service to interact with the desktop`。
*   重新启动 Apache 服务。

解决方案2：我们使用[“boxcutter”](http://keepnote.org/boxcutter/)

```
 $exec = exec('boxcutter -f image.png'); 
```

解决方案 3：使用 COM seee ( [http://php.net/manual/en/function.imagegrabwindow.php](http://php.net/manual/en/function.imagegrabwindow.php) )

```
$browser = new COM("InternetExplorer.Application");
$handle = $browser->HWND;
$browser->Visible = true;
$browser->Navigate("http://stackoverflow.com"); // path to your URL 

/* Still working? */
while ($browser->Busy) {
    com_message_pump(4000);
}
$im = imagegrabwindow($handle, 0);
$browser->Quit();
imagepng($im, "myscreenshot.jpg");
imagedestroy($im); 
```

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:02:28.980

为此，您的 Apache 服务必须设置为“允许服务与桌面交互”，否则您只会得到一个空白图像。

要在 Windows 上解决此问题，请右键单击我的电脑，选择管理/服务和应用程序/服务 - 找到 apache 服务（如 Apache2）并右键单击，选择属性 - 选择登录选项卡并选中“允许服务交互”带桌面的复选框。重启阿帕奇。

# python - python webcrawler的一个很好的用户代理

> ID：10205128
> 
> 赞同：0
> 
> 时间：2012-04-18T07:48:41.817
> 
> 标签：python, web-crawler, user-agent

我正在制作一个 python 爬虫，我正在考虑一个用户代理。

任何人都可以想到用户代理。

或/和有没有人有计划

我有点像“urllib（兼容；owi bot；+owi.tk/bot）”（这是 googlebot 重写的）。

所以有人可以帮助我吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:37:28.930

补一张就行了 如果您的机器人做错/坏/愚蠢/伟大的事情，可以联系您的奖励积分。规范在[RFC2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)秒中。14.43 (HTTP/1.1)。

请不要只是复制一些东西！

此外，在爬取 Stackoverflow 和朋友的坏链接时[学到了一些实用的东西：](http://samsaffron.com/archive/2012/06/07/testing-3-million-hyperlinks-lessons-learned)

> 从第 0 天开始，为自己设置一个适当的用户代理字符串。

# python - 如何使用 Python 3 访问二进制和文本数据以进行电子邮件处理？

> ID：10205132
> 
> 赞同：1
> 
> 时间：2012-04-18T07:49:15.057
> 
> 标签：python, string, unicode, io, python-3.x

我正在将 Python 2 程序转换为 Python 3，但我不确定要采取的方法。

程序从 STDIN 读取单个电子邮件，或者指定包含电子邮件的文件。然后程序解析电子邮件并对它们进行一些处理。

因此，我们需要处理电子邮件输入的原始数据，将其存储在磁盘上并对其进行 MD5 哈希处理。我们还需要处理电子邮件输入的文本，以便通过 Python 电子邮件解析器运行它并提取字段等。

对于 Python 3，我不清楚我们应该如何读取数据。我相信我们需要原始二进制数据才能对其进行 md5 处理，并能够将其写入磁盘。我知道我们还需要它以文本形式使用电子邮件库来解析它。Python 3 对 IO 处理和文本处理进行了重大更改，我看不到读取电子邮件原始数据以及以文本形式使用相同数据的“正确”方法。

谁能提供这方面的一般指导？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:56:35.697

一般指导是尽快将所有内容转换为 unicode 并保持这种状态，直到最后一分钟。

记住那`str`是旧的`unicode`，`bytes`是旧的`str`。

请参阅[http://docs.python.org/dev/howto/unicode.html](http://docs.python.org/dev/howto/unicode.html)作为开始。

> 对于 Python 3，我不清楚我们应该如何读取数据。

指定`encoding`打开文件的时间，它会自动为您提供 unicode。如果你从 阅读`stdin`，你会得到 unicode。您可以从中读取`stdin.buffer`以获取二进制数据。

> 我相信我们需要原始二进制数据才能对其进行 md5

是的你是。`encode`当你需要散列它时。

> 并且还能够将其写入磁盘。

您`encoding`在打开要写入的文件时指定，文件对象会为您编码。

> 我知道我们还需要它以文本形式使用电子邮件库来解析它。

是的，但是因为当你打开文件时它会被解码，这就是你所拥有的。

* * *

也就是说，这个问题对于 Stack Overflow 来说实在是太开放了。当您有特定问题/疑问时，请回来，我们会提供帮助。

# visual-studio - 是否有一种简单/人性化的方式来为复杂项目编写构建脚本？

> ID：10205134
> 
> 赞同：2
> 
> 时间：2012-04-18T07:49:18.020
> 
> 标签：visual-studio, build, msbuild

我正在做一个大的旧项目。MSBuild 用作构建引擎。我看到在构建过程中使用了很多**.proj、.bat、.sln 和 .csprj文件。**

我知道 .sln 文件和 .csprj 可以使用 Visual Studio 相对轻松地进行编辑。但是有没有一些简单的方法来帮助编写和理解 .proj 和 .bat 文件？

另外，我迷失在众多环境变量中，例如**$(SolutionFolder)**，我在哪里可以找到它们的定义？

非常感谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T01:53:39.513

以下描述基于我如何在开源项目中使用这些文件，[http://code.google.com/p/lextudio/source/browse/#svn%2Ftrunk%2Ftrunk](http://code.google.com/p/lextudio/source/browse/#svn%2Ftrunk%2Ftrunk)

.sln 和 .csproj 不应手动编辑，除非您被要求这样做。它们应该主要由开发人员通过 Visual Studio 维护。

您应该将重点放在设置自定义目标和属性的 .proj 文件上。它们通常是手动创建并调用 MSBuild 以按预期方式构建 .sln/.csproj。

您可以在 Visual Studio 中编辑 .proj 文件，因为 VS 知道它是一种 MSBuild 脚本类型。

.bat 文件通常是核心 .proj 文件的包装器，以便让您执行具有预期属性的某个目标，因此它可能只包含对 MSBuild.exe 的调用命令。我通常使用 Notepad++ 来编辑此类文件，因为 n++ 为 .bat 文件提供了高亮显示。

正如@mortb 发布的链接所示，Microsoft 记录了许多预定义属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T08:21:37.193

.bat 文件是批处理文件。它们包含由 windows 命令提示符执行的脚本。每行包含一个可以在命令提示符下输入的语句（如复制、执行程序等）。我通常在记事本中编辑 bat 文件，您也可以在 Visual Studio 中将它们编辑为文本。Windows 帮助包含有关批处理文件的更多信息。

.proj 是一个通用的 Visual Studio 项目文件

找到对变量的引用并不难：http: [//msdn.microsoft.com/en-us/library/c02as0cs.aspx](http://msdn.microsoft.com/en-us/library/c02as0cs.aspx)

希望这可以帮助

# java - 从存储在哈希图中的列表中向新列表添加值时遇到问题 - Java

> ID：10205135
> 
> 赞同：0
> 
> 时间：2012-04-18T07:49:26.723
> 
> 标签：java, arraylist, hashmap

我一直在寻找一种方法来做到这一点，这让我发疯！

我正在尝试做的事情如下：

我有一个HashMap：

```
qualifiedCompetitors = new HashMap<String, List<String>>(); 
```

我分配给哈希图的值是：

```
String[] events = {"Helicopter", "Amphibious", 
                     "4x4", "Fire Engine"};

String[][] competitors = 
{
   {"Greg", "Will", "Fleur", "Bill", "Bella", "Sally", "Olive", "Sal", "Dora", "Chas"}, 
   {"Yuri", "Abe", "Tim", "Fleur", "Bonnie", "Vera", "Ed", "Dan", "Jill", "Rose", "Zoe"}, 
   {"Tim", "Fleur", "Will",  "Bill", "Bella", "Dan", "Jill", "Rose", "Greg",  "Abe", "Sally", "Yuri", "Olive", "Sal", "Jim"}, 
   {"Jill", "Rose", "Greg", "Abe", "Bonnie", "Vera", "Ed", "Zoe", "Ben", "Freda", "Chuck", "Fred"}
}; 
```

关键是事件的名称，而 List 是竞争对手的列表。我想建立一个所有竞争对手的新列表。

因此，我尝试了各种方法，例如：

```
ListOfAllqualifiedCompetitors = new ArrayList(qualifiedCompetitors.values()); 
```

然后遍历哈希图：

```
Collection allCompetitors = qualifiedCompetitors.values();

System.out.println("Values of Collection created from Hashtable are :");
//iterate through the collection
Iterator itr = allDrivers.iterator();
while(itr.hasNext())
  System.out.println(itr.next()); 
```

看看我得到了什么值，这很好，但我不能再给它们添加一个新列表？我知道我遗漏了一些明显的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:55:01.777

我*认为*您的意思是您有一张 to 的地图，`String`并且`List<String>`您希望将所有内容累积`List<String>`到一个长列表中。如果是这样的话：

```
final Map<String, List<String>> eventsToCompetitors;
final List<String> allCompetitors;

eventsToCompetitors = ...

allCompetitors = new ArrayList<String>();
for (Collection<String> competitors : eventsToCompetitors.values())
{
  allCompetitors.addAll(competitors);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:55:54.913

```
List<String> allCompetitors = new ArrayList<String>();
for(Set<String> competitors : qualifiedCompetitors.values()) {
    allCompetitors.addAll(competitors);
} 
```

你是这个意思吗？

# cordova - phonegap Web 服务在 ios 中不起作用？

> ID：10205140
> 
> 赞同：1
> 
> 时间：2012-04-18T07:49:42.780
> 
> 标签：cordova

我已经编写了以下代码来在 ios 中实现 webservice，并且我已经包含了那里提到的所有 js 文件，但它仍然无法正常工作。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <title>90210 Lookup</title>
    <script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
        <script type="text/javascript" src="script/xui.js"></script>
    <script type="text/javascript" charset="utf-8">
    x$.data = {};
    x$(window).load(function(e){
      x$("#returned_information").xhr("http://ws.geonames.org/postalCodeSearchJSON?postalcode=90210&maxRows=10",
        { callback: function(){
            var codes = eval("("+this.responseText+")").postalCodes; /* this should be an array */
            x$("#returned_information").html(codes[0].placeName);
          }
        }
      );
    });
    </script>
  </head>
  <body>
    <h1 id="returned_information">
      Put Stuff in Me
    </h1>
  </body>
</html> 
```

请告诉我我在其中缺少什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:54:06.630

例子是写，你没有遗漏任何东西。我认为你必须授予打开 url 的权限。如果你还没有设置权限，那就去打开 projectname.plist 文件并将 * 放在外部主机属性中。然后试试这个。我希望它会工作。

# linq - 添加 where 子句，LINQ

> ID：10205144
> 
> 赞同：1
> 
> 时间：2012-04-18T07:50:09.593
> 
> 标签：linq, linq-to-sql, where-clause

我有：

```
 var x = from os in dbLinq.vmesne_ures
         where ((os._projekt_id).Equals(_cb_projekt_id))
         orderby os.projekt_name
         group new { vm_oseba_id = os._oseba_id } by os._oseba_id into uniqueIds
         select uniqueIds.FirstOrDefault(); 
```

它返回唯一的 ID。是否可以添加`where`子句`x`？就像是

```
 var y = x ... where os._oseba_id < 100 
```

我知道我可以在哪里`((os._projekt_id).Equals(_cb_projekt_id) && where os._oseba_id < 100)`或类似的地方做。`x`如果我可以添加到另一个解决方案，我正在寻找这个解决方案`where`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T07:53:24.767

是的，您可以添加另一个 where 子句

```
var x = from os in dbLinq.vmesne_ures
         where ((os._projekt_id).Equals(_cb_projekt_id))
         where os._oseba_id < 100
         orderby os.projekt_name
         group new { vm_oseba_id = os._oseba_id } by os._oseba_id into uniqueIds
         select uniqueIds.FirstOrDefault(); 
```

两个 where 和 && 运算符之间的唯一区别是创建了两个委托，但算法仍然是 O(n)

# php - 如何避免drupal隐藏字段的缓冲区溢出？

> ID：10205156
> 
> 赞同：0
> 
> 时间：2012-04-18T07:50:47.863
> 
> 标签：php, security, drupal

我使用 IBM Appscan 在一个完成的网站上进行了测试，它返回了一堆与 drupal 搜索表单块有关的错误。以下是其中一个错误的摘录：

```
 [13 of 37] Parameter Value Overflow
Severity: High
Test Type: Application Invasive
Vulnerable URL: http://[my-web-address]/contact
CVE ID(s): N/A
CWE ID(s): 120
Remediation Tasks: Limit the length of input fields to avoid buffer overflow
Variant 1 of 5 [ID=97491]
The following changes were applied to the original request:
• Set parameter 'form_build_id's value to
'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAA...
**Request/Response:**
This request/response contains binary content, which is not included in generated
reports.
**Validation In Response:**
N/A
**Reasoning:**
The test caused the server to stop responding (an erroneous response was returned, such as cut
connection or time out). The original request was then resent and also failed, confirming that the
server had stopped responding. 
```

感谢任何关于需要做什么的指示，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:13:21.617

' `form_build_id`' 输入是来自 Drupal 的 Form API 的内部标识符。它在早期使用[`drupal_build_form()`](http://api.drupal.org/api/drupal/includes!form.inc/function/drupal_build_form/7)。它应该是 base-64 编码的 sha-256 哈希，+ 替换为 -，/ 替换为 _ 和任何 = 填充字符被删除。

在缓冲区溢出发生之前，表单更改功能可能无法触及它。所以对它进行消毒的正确地方应该是`drupal_build_form()`类似的东西

```
 [...]
  $check_cache = isset($form_state['input']['form_id']) && $form_state['input']['form_id'] == $form_id && !empty($form_state['input']['form_build_id']);
  if ($check_cache) {
    $form_build_id = drupal_substr(filter_var($form_state['input']['form_build_id'],FILTER_SANITIZE_STRING), 0, 100); 
    $form = form_get_cache($form_build_id, $form_state);
  }
  [...] 
```

但最好的办法是在 Drupal.org 上[将此作为安全问题报告](https://drupal.org/node/101494)并在那里提交您的补丁。那将是审查您的问题和修复的最佳场所。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:19:13.163

如果您使用除英语以外的表单输入语言，最好使用`mb_substr()`函数，它会保留奇怪的字符`é, ù`，例如 等...（几乎像 kirilloid 解决方案）和`filter_var()`函数，它会剥离标签并可选地剥离或编码特殊字符以保护自己免受不同类型的注入攻击。

```
$form_build_id = mb_substr(filter_var($_GET['form_build_id'],FILTER_SANITIZE_STRING), 0, 100); 
```

这是[mb_substr()](http://php.net/manual/en/function.mb-substr.php)详细信息和[filter_var()](http://bg2.php.net/manual/en/function.filter-var.php)详细信息。请注意，`mb_substr()`需要 PHP 版本 4.0.6 或更高版本，`filter_var()`函数需要 PHP 版本 5.2 或更高版本。

# c++ - how is auto implemented in C++11

> ID：10205160
> 
> 赞同：4
> 
> 时间：2012-04-18T07:51:01.200
> 
> 标签：c++, c++11

How is `auto` implemented in `C++11`? I tried following and it works in `C++11`

```
auto a = 1;
// auto = double
auto b = 3.14159;
// auto = vector<wstring>::iterator
vector<wstring> myStrings;
auto c = myStrings.begin();
// auto = vector<vector<char> >::iterator
vector<vector<char> > myCharacterGrid;
auto d = myCharacterGrid.begin();
// auto = (int *)
auto e = new int[5];
// auto = double
auto f = floor(b); 
```

I want to check how this can be achieved using plain `C++`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T08:12:49.070

It does roughly the same thing as it would use for type deduction in a function template, so for example:

```
auto x = 1; 
```

does kind of the same sort of thing as:

```
template <class T>
T function(T x) { return input; }

function(1); 
```

The compiler has to figure out the type of the expression you pass as the parameter, and from it instantiate the function template with the appropriate type. If we start from this, then `decltype` is basically giving us what would be `T` in this template, and `auto` is giving us what would be `x` in this template.

I suspect the similarity to template type deduction made it much easier for the committee to accept `auto` and `decltype` into the language -- they basically just add new ways of accessing the type deduction that's already needed for function templates.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-18T07:58:10.563

In C++, every expression has *value* and *type*. For example, `(4+5*2)` is an expression which has value equal to `14` and type is `int`. So when you write this:

```
auto v = (4+5*2); 
```

the compiler detects the *type* of the expression on the right side, and replaces `auto` with the detected type *(with some exception, read comments)*, and it becomes:

```
int v = (4+5*2); //or simply : int v = 14; 
```

Similarly,

```
auto b = 3.14159; //becomes double b = 3.14159;

auto e = new int[5]; //becomes int* e = new int[5]; 
```

and so on

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T07:59:34.840

The `auto` keyword is simply a way to declare a variable while having it type being based upon the value.

So your

```
auto b = 3.14159; 
```

Will know that b is a double.

For additional reading on `auto` take a look at the following references

[C++ Little Wonders: The C++11 auto keyword redux](http://geekswithblogs.net/BlackRabbitCoder/archive/2012/03/15/c-little-wonders-the-c11-auto-keyword-redux.aspx)

[The C++0x auto keyword](http://sfmlcoder.wordpress.com/2011/05/24/the-c0x-auto-keyword/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T09:07:47.407

It works like before :)

Have you never hit a compiler error telling you:

> **error:** invalid conversion from `const char*` to `int`

for such a code fragment: `int i = "4";`

Well, `auto` simply leverages the fact that the compiler knows the type of the expression on the right hand side of the `=` sign and reuses it to type the variable you declare.

# javascript - 'div_element' 为 null 或不是 IE7 中的对象

> ID：10205163
> 
> 赞同：1
> 
> 时间：2012-04-18T07:51:33.483
> 
> 标签：javascript, jquery, jquery-ui, javascript-events

在这里，我在 java 脚本中遇到一个错误 'div_element' 为空或不是对象。我在下面给出了我的代码

```
function showLoading(id) {
div_element = $("div#" + id)[0];
div_element.innerHTML = loading_anim; // Error in this line
} 
```

当我调试我的脚本时，它在包括 IE 8 在内的其他浏览器中工作正常。但它在 IE 7 中不起作用。我不明白这个脚本中发生了什么确切问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:58:19.357

I think you don't select anything with your jquery selector (line 2)

try to display

*   id
*   "div#" + id
*   $("div#" + id)
*   $("div#" + id)[0]

You can use firebug javascript console or a simple alert like this: alert($("div#" + id)[0]);

And see if you must id or class on your div ( use # or . selector)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:31:15.367

First of all, you dont need to put a tag name infront of the jQuery, unless you have other elements with exact **same id** on other elements, in other pages.

Next, your statement `div_element.innerHTML = loading_anim;` is **correct**. So, the only explanation is that, there is no element with that ID, in the DOM.

**Finally,** since you are usign jQuery already, no need to mix up native JS and jQuery to create a dirty looking code.

```
function showLoading(id) {

    div_element = $("#" + id);
    console.log(div_element); //check the console to see if it return any element or not
    div_element.html(loading_anim);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:56:05.143

用于`.html()`jQuery 对象。`innerHTML`适用于*dom*对象，它们不适用于 jQuery 对象。

```
function showLoading(id) {
    div_element = $("div#" + id);
    $(div_element).html(loading_anim); // Provided `loading_anim` is valid html element
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T08:12:42.327

我想，nic 想要显示一些加载器 GIF 动画，我确认，nic 必须`.html()`对 DOM 对象使用 jQuery 方法，并且 tusar 解决方案在 IE6+ 浏览器上运行良好。此外（很明显，但无论如何）nic 必须为`loading_anim`脚本中的变量赋值，比如说：`var loading_anim = $('#loader').html();`在将其值赋值给`div_element`.

# visual-studio-2010 - Azure 项目模板在 Visual Studio 中不可见

> ID：10205167
> 
> 赞同：3
> 
> 时间：2012-04-18T07:51:50.360
> 
> 标签：visual-studio-2010, azure

我正在尝试使用 Web 平台安装程序在 Windows 7 上安装最新版本的 Windows Azure SDK。安装成功，但我无法在 Visual Studio 2010 中看到 Windows Azure 项目模板。感谢任何想法。

干杯，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:58:46.110

In a vanilla install of Visual Studio 2010 (SP1) they should be there automatically in the folder "Cloud". There you can download the Azure Tools to actually use them.

see: [http://msdn.microsoft.com/en-us/library/windowsazure/ff687127.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ff687127.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T07:48:35.733

请检查您的机器上是否有以下文件夹：

C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\ProjectTemplates\CSharp\Cloud

如果您使用的是 32 位计算机，则可以使用“Program Files”而不是“Program Files (x86)”。如果安装了 Windows Azure，您可以在此文件夹下看到项目模板。

此致，

明旭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T04:07:09.877

终于让它工作了。

1.  已卸载 Visual Studio 2010 Express
2.  修复并完成了 Visual Studio 2010 的完整安装
3.  手动安装 Azure 工具和 SDK

不知道为什么它有效，但它确实有效。感谢所有的答案！

另请参阅[http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/aa8cdf32-fca0-4a81-bf47-659345696047](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/aa8cdf32-fca0-4a81-bf47-659345696047)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T00:45:20.380

尝试通过从此处下载单个 msi 手动安装 Windows Azure SDK（取决于您的机器架构）[http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=28045](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=28045) 并查看您是否遇到了其中任何一个的错误。

（WindowsAzureTools.VS100.exe 应该安装项目模板）

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T09:45:36.827

我想知道您是否可以在新项目对话框的左侧看到“Cloud”文件夹。如果没有，请尝试运行以下命令：

开发环境/重置设置

首次运行 Visual Studio 时，可能会提示您选择一个设置的对话框。请确保选择常规开发人员设置。如果您选择其他设置，某些项目模板可能会被隐藏。

此致，

明旭。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-18T15:19:12.470

您是否在使用可以创建 Web 项目之类的 Visual Studio 版本？可能是版本的问题。你能创建 MVC 项目吗？

# java - JMS/AMQP 代理比较

> ID：10205171
> 
> 赞同：4
> 
> 时间：2012-04-18T07:52:08.080
> 
> 标签：java, comparison, jms, cluster-computing, amqp

在阅读了一些关于 SO 的有趣帖子以及在 google 上找到的许多页面之后，我想请您帮忙决定选择什么 JMS/AMQP 代理。我们公司面临着简单的问题。我们需要使用可靠的基于消息的系统来进行集群中节点的通信。由于我们对此有“我们自己的”解决方案，因此当我们尝试向其中添加越来越多的功能时，它变得非常混乱（另外，它有问题:)）。

我真的不想提出另一个关于哪个代理更好/更差的问题，我想问您关于 JMS/AMQP 代理的可靠性/复杂性/灵活性的个人经验和观察。（即我发现了一些关于 ActiveMQ 的令人困惑的信息，说它不稳定但很多人认为它是最好的 JMS 解决方案）

目前，我们的系统发送大约。100 mps，所以它不是很大的负载，但是随着越来越多的节点将添加到集群中，我们需要能够扩展它。每个节点都应该发送和接收消息。我们需要找到尽可能可靠的解决方案。

谢谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:39:13.677

一般来说，更强大的经纪人是商业经纪人。我在生产中使用过 ActiveMQ，它有一些我能够解决的问题。它每秒最多支持 20K 条消息。我会再次使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T08:55:39.953

我将从我最了解的经纪人开始。

**TIBCO EMS**

优点

*   非常稳定
*   有ac#、c和java api
*   很好的支持
*   成熟，有很多很好的增强，这些表现在一些小事情上，比如它如何将消息分发给队列中的消费者等。

缺点

*   昂贵的
*   网上没有太多信息

我的老板帮助开发了 AMQP 规范，他对 RabbitMQ 的评价很高。我没有在愤怒中使用它，所以无法评论。

当然，AMQP 相对于 JMS 代理的一大优势是互操作性，即从一个供应商代理发送的消息可以被任何其他 AMQP 代理实现读取

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T09:51:23.663

我们将 IBM Websphere MQ 用于更大的安装 - 它仅用于商业用途 - 但它是一个健壮、可扩展的解决方案。对于中小型我们使用 ActiveMQ 和 OpenMQ。

# c# - 如何使用 GUI 在 Visual Studio 项目中添加和编译 Windows 窗体，而不是直接从 Visual Studio？

> ID：10205176
> 
> 赞同：2
> 
> 时间：2012-04-18T07:52:35.820
> 
> 标签：c#, .net, vb.net, visual-studio

我正在与一个由 5 人组成的团队在 Visual Studio 2008 中开发一个项目。这 5 个人中的每一个都开发 Windows 表单并在服务器上维护一个存储库。问题是我必须在打开 Visual Studio 并在项目中添加表单后手动单独编译每个表单。

我想使用 GUI 而不是 Visual Studio 来添加和编译表单。这可能吗？

基本上，解决方案在于以编程方式将表单添加到 Visual Studio 项目我不确定是否可以开发这样的应用程序。任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:05:08.303

> 问题是我必须在打开 Visual Studio 并在项目中添加表单后手动单独编译每个表单。

您可以使用 csc.exe，它是一个命令行 C# 编译器。制作一个提取代码并编译它的脚本。

> 我想使用 GUI 而不是 Visual Studio 来添加和编译表单

我不明白。您想使用 GUI 应用程序添加和编译表单还是添加 GUI？

> 基本上，解决方案在于以编程方式将表单添加到 Visual Studio 项目我不确定是否可以开发这样的应用程序

如果您已经有一个已设置的项目（依赖项），那是否相当容易。您必须将 C# 代码添加到源代码中。这取决于修改的大小，但应该用几行脚本来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:34:11.183

您可能需要考虑使用插件/插件框架，例如 MEF 或 MAF。然后，团队成员可以负责他们自己的表单，这些表单会弹出到插件中供您使用。

[在 MEF 和 MAF 之间进行选择（System.AddIn）](https://stackoverflow.com/questions/835182/choosing-between-mef-and-maf-system-addin)

这样的事情允许您动态控制表单/控件在运行时的显示方式或根据您实现插件系统的方式，允许您在设计时拖放布局。

很像用户控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T08:01:53.047

您可以开发脚本以从命令行（[命令行参考](http://msdn.microsoft.com/en-us/library/ms164311.aspx)）执行 msBuild 任务并开发 GUI 以启动 shell 来运行这些任务，或者您可以使用脚本/命令提示符下的 csc.exe[手动进行编译](http://msdn.microsoft.com/en-us/library/78f4aasd.aspx)。

如果您有要构建的项目文件，则 MsBuild 选项将很有用，csc 选项级别更低，需要更多工作，但不需要您有项目文件，只需要源代码文件和依赖项。

不过，这听起来像是错误的方式。你确定你不想开发一个可以有插件的应用程序吗？然后您将每个表单开发为一个接口并将其打包到自己的 dll 中，并让应用程序加载插件 dll 并提取实现特定接口的表单。这样您就可以构建应用程序一次，并且可以添加新表单而无需重新编译...

# java - 使用 Instrumentation 向 Java 类添加代码：ASM 还是 BCEL？

> ID：10205187
> 
> 赞同：12
> 
> 时间：2012-04-18T07:53:18.433
> 
> 标签：java, bytecode, instrumentation, java-bytecode-asm, bcel

我正在编写一个游戏引擎/库，其中我有一个事件调度程序类，它通过调用“已注册”事件处理程序类的侦听器方法来调度事件。可以通过调用适当的调度程序方法向事件调度程序注册事件处理程序/侦听器。

这显然会导致一些用于注册每个事件处理程序的样板代码（并且我的引擎的其他方面也有类似的样板代码），所以我想知道 - 在加载事件处理程序期间使用 Instrumentation 添加所有必要的代码怎么样类，因此在编码时不需要向事件调度程序显式注册 - 对调度程序的 register 方法的调用会在程序运行时自动添加。

据我了解，为了使用 Instrumentation，应该使用一些字节码修饰符 API。我知道两个 - ASM 和 BCEL。我应该使用哪一个？显然，这是我正在尝试做的一项简单的任务，所以我想要一个更容易学习和更好记录的任务。

编辑：这是一个具体的例子。

原始事件处理程序类：

```
@Handler //indicates this this class should be transformed
public class MouseEventHandler implements EventHandler<MouseEvent>
{
    //hidden default constructor
    public void handleEvent(MouseEvent event)
    { ... }
} 
```

改造后：

```
@Handler
public class MouseEventHandler implements EventHandler<MouseEvent>
{
    public MouseEventHandler()
    {
        //add this line of code to default constructor
        Game.getEventDispatcher().addEventHandler(this);
    }
    public void handleEvent(MouseEvent event)
    { ... }
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-18T08:31:00.947

Java字节码库：

*   [ASM](https://asm.ow2.io/)发展迅速且积极。
*   [BCEL](https://commons.apache.org/proper/commons-bcel/)比较慢。
*   如果您不熟悉 Java 字节码，[Javassist可能最容易上手。](http://www.javassist.org/)
*   [cglib](https://github.com/cglib/cglib)建立在 ASM 之上，提供了一些更高级别的抽象。
*   [Byte Buddy](https://bytebuddy.net/)通过 DSL 生成类。积极维护并看到越来越多的使用。

但是，在开始字节码操作之前，我会考虑其他选项。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T09:08:20.227

将逻辑添加到几个类可能很无聊，但除非你有成千上万的处理程序，否则我会这样做。**保持简单**。

也就是说，

```
Game.registerHandler( this ); 
```

会更加面向对象。

在每个类中添加逻辑的另一种方法是引入一个负责实例化处理程序的**工厂。**

```
HandlerFactory.createMouseHandler(); 
```

并且方法`createMouseHandler`包含类似

```
Handler mh = new MousheHandler();
registerHandler(mh);
return mh; 
```

如果您不想要这些选项中的任何一个，我会考虑使用**方面框架**（可能是 AspectJ）或**用于控制反转的容器**（可能是 Spring IoC）。方面允许您注释您的源代码，并在选定的位置“编织”代码。IoC 容器允许您控制对象的生命周期（例如实例化）。两者都在幕后使用字节码检测。

但是如果你想自己做**instrumentation**，我只能比较我个人使用的Javassist和ASM。

**ASM**是低级的，并且实际上在 java 字节码级别运行。你一定很熟悉它。该框架设计得非常好，手册非常好，它是一个很棒的库。一方面，替换字节码模式可能很复杂，因为它需要所谓的“有状态”转换。另一方面，您可以完全控制字节码。

**Javassist**更高级。您不在字节码的原始级别操作，略高一点，例如字段读/写、消息发送、构造函数。此外，它允许您使用常规 java 语法指定更改，然后由框架编译。API 有点混乱，因为该项目多年来一直在增长。有关于框架的文档，但不像 ASM 那样集中。

# algorithm - graph - 如何找到 G 的最大诱导子图 H 使得 H 中的每个顶点的度数≥ k

> ID：10205191
> 
> 赞同：12
> 
> 时间：2012-04-18T07:53:42.407
> 
> 标签：algorithm, data-structures, graph, subgraph

这是图表的消费税。

> 给定一个有 n 个顶点和 m 个边的无向图 G，以及一个整数 k，给出一个 O(m + n) 算法，该算法找到 G 的最大诱导子图 H，使得 H 中的每个顶点的度数≥ k，或证明没有存在这样的图表。图 G = (V, E) 的诱导子图 F = (U, R) 是 G 的顶点 V 和 G 的所有边 R 的子集，使得每条边的两个顶点都在 U 中。

我最初的想法是这样的：

首先，这个 excise 实际上要求我们拥有所有度数大于或等于 k ​​的顶点 S，然后我们删除 S 中没有任何边与其他顶点相连的顶点。则精化后的 S 为 H，其中所有顶点的度数 >= k，并且它们之间的边为 R。

另外，它要求 O(m+n)，所以我想我需要一个 BFS 或 DFS。然后我就卡住了。

在 BFS 中，我可以知道一个顶点的度数。但是一旦我得到 v （一个顶点）的度数，我不知道除了它的父顶点之外的其他连接顶点。但是如果父母没有度数> = k，我不能消除v，因为它可能仍然与其他人有联系。

有什么提示吗？

* * *

## 编辑：

根据@Michael J. Barber 的回答，我实现了它并在此处更新代码：

**任何人都可以看看代码的关键方法`public Graph kCore(Graph g, int k)`吗？我做对了吗？是 O(m+n) 吗？**

```
class EdgeNode {
   EdgeNode next;
   int y;
}

public class Graph {
   public EdgeNode[] edges;
   public int numVertices;

   public boolean directed;

   public Graph(int _numVertices, boolean _directed) {
      numVertices = _numVertices;
      directed = _directed;
      edges = new EdgeNode[numVertices];
   }

   public void insertEdge(int x, int y) {
      insertEdge(x, y, directed);
   }

   public void insertEdge(int x, int y, boolean _directed) {
      EdgeNode edge = new EdgeNode();
      edge.y = y;
      edge.next = edges[x];
      edges[x] = edge;
      if (!_directed)
          insertEdge(y, x, true);
   }

   public Graph kCore(Graph g, int k) {
      int[] degree = new int[g.numVertices];
      boolean[] deleted = new boolean[g.numVertices];
      int numDeleted = 0;
      updateAllDegree(g, degree);// get all degree info for every vertex

      for (int i = 0;i < g.numVertices;i++) {
          **if (!deleted[i] && degree[i] < k) {
           deleteVertex(p.y, deleted, g);
          }**
      }

      //Construct the kCore subgraph
      Graph h = new Graph(g.numVertices - numDeleted, false);
      for (int i = 0;i < g.numVertices;i++) {
         if (!deleted[i]) {
           EdgeNode p = g[i];
           while(p!=null) {
              if (!deleted[p.y])
                 h.insertEdge(i, p.y, true); // I just insert the good edge as directed, because i->p.y is inserted and later p.y->i will be inserted too in this loop.
                 p = p.next;
              }
           }
         }
      }

      return h;
  }

  **private void deleteVertex(int i, boolean[] deleted, Graph g) {
     deleted[i] = true;
     EdgeNode p = g[i];
     while(p!=null) {
        if (!deleted[p.y] && degree[p.y] < k) 
            deleteVertex(p.y, deleted, g);
        p = p.next;
     }
  }**

  private void updateAllDegree(Graph g, int[] degree) {
     for(int i = 0;i < g.numVertices;i++) {
         EdgeNode p = g[i];
         while(p!=null) {
            degree[i] += 1;
            p = p.next;
         }
     }
  } 
```

}

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-18T08:09:04.873

顶点具有最小度*k*的最大诱导子图称为[*k*核](https://en.wikipedia.org/wiki/K-core)。您只需重复删除度数小于*k*的任何顶点即可找到*k*核。

 *在实践中，您首先评估所有顶点的度数，即 O(m)。然后，您遍历顶点，寻找度数小于*k*的顶点。当您找到这样的顶点时，将其从图中剪切并更新邻居的度数，同时删除度数低于*k*的任何邻居。您需要至少查看每个顶点一次（在 O(n) 中如此可行）并为每条边最多更新一次度数（在 O(m) 中如此可行），给出 O(m+n) 的总渐近界.

其余的连接组件是*k*核。通过评估它们的大小找到最大的。*

# asp.net - X-Frame-Options Allow-From 多个域

> ID：10205192
> 
> 赞同：110
> 
> 时间：2012-04-18T07:53:47.613
> 
> 标签：asp.net, security, iis-7, header, internet-explorer-9

我有一个 ASP.NET 4.0 IIS7.5 站点，我需要使用 X-Frame-Options 标头对其进行保护。

我还需要使我的网站页面能够从我的同一个域以及我的 facebook 应用程序中进行 iframe。

目前，我的站点配置了以下站点：

```
Response.Headers.Add("X-Frame-Options", "ALLOW-FROM SAMEDOMAIN, www.facebook.com/MyFBSite") 
```

当我使用 Chrome 或 Firefox 查看我的 Facebook 页面时，我的网站页面（使用我的 Facebook 页面进行 iframe）显示正常，但在 IE9 下，我收到错误消息：

> “此页面无法显示……”（由于`X-Frame_Options`限制）。

如何设置`X-Frame-Options: ALLOW-FROM`支持多个域？

`X-FRAME-OPTION`如果只能定义一个域，那么作为一项新功能似乎存在根本缺陷。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2014-09-02T07:06:19.283

~~`X-Frame-Options`已弃用。来自[MDN](https://developer.mozilla.org/en-US/docs/Web/HTTP/X-Frame-Options)：~~

> ~~此功能已从 Web 标准中删除。尽管某些浏览器可能仍然支持它，但它正在被删除。不要在旧项目或新项目中使用它。使用它的页面或 Web 应用程序可能随时中断。~~

现代替代方案是标头，它与许多其他策略一起可以使用该指令[`Content-Security-Policy`](https://developer.mozilla.org/en-US/docs/Web/Security/CSP/CSP_policy_directives)将允许在框架中托管您的页面的 URL 列入白名单。支持多个域甚至通配符，例如：[`frame-ancestors`](https://developer.mozilla.org/en-US/docs/Web/Security/CSP/CSP_policy_directives#frame-ancestors)
`frame-ancestors`

```
Content-Security-Policy: frame-ancestors 'self' example.com *.example.net ; 
```

不幸的是，目前，[Internet Explorer 并不完全支持 Content-Security-Policy](http://caniuse.com/#feat=contentsecuritypolicy)。

**更新：** MDN 删除了他们的弃用评论。[这是W3C 的内容安全策略级别](https://www.w3.org/TR/CSP2/#frame-ancestors-and-frame-options)的类似评论

> 该`frame-ancestors`指令*废弃*了`X-Frame-Options`标头。如果一个资源同时具有这两种策略，则`frame-ancestors`应该强制执行该`X-Frame-Options`策略并且应该忽略该策略。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2014-01-24T09:57:25.170

来自[RFC 7034](https://www.rfc-editor.org/rfc/rfc7034#section-2.3.2.3)：

> 不允许使用通配符或列表在一个 ALLOW-FROM 语句中声明多个域

所以，

> 如何设置 X-Frame-Options: ALLOW-FROM 以支持多个域？

你不能。作为一种解决方法，您可以为不同的合作伙伴使用不同的 URL。对于每个 URL，您可以使用它自己的`X-Frame-Options`值。例如：

```
partner   iframe URL       ALLOW-FROM
---------------------------------------
Facebook  fb.yoursite.com  facebook.com
VK.COM    vk.yoursite.com  vk.com 
```

因为`yousite.com`你可以使用`X-Frame-Options: deny`.

**顺便说一句**，目前 Chrome（以及所有基于 webkit 的浏览器）[根本不支持](https://bugs.webkit.org/show_bug.cgi?id=94836) `ALLOW-FROM`语句。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-04-10T12:26:01.367

死灵术。
提供的答案不完整。

首先，如前所述，您不能添加多个允许主机，这是不受支持的。
其次，您需要从 HTTP 引荐来源网址动态提取该值，这意味着您不能将该值添加到 Web.config，因为它并不总是相同的值。

当浏览器是 Chrome 时，有必要进行浏览器检测以避免添加 allow-from（它会在调试 - 控制台上产生错误，这可以快速填满控制台，或使应用程序变慢）。这也意味着您需要修改 ASP.NET 浏览器检测，因为它错误地将 Edge 识别为 Chrome。

这可以在 ASP.NET 中通过编写一个在每个请求上运行的 HTTP 模块来完成，该模块为每个响应附加一个 http 标头，具体取决于请求的引用者。对于 Chrome，需要添加 Content-Security-Policy。

```
// https://stackoverflow.com/questions/31870789/check-whether-browser-is-chrome-or-edge
public class BrowserInfo
{

    public System.Web.HttpBrowserCapabilities Browser { get; set; }
    public string Name { get; set; }
    public string Version { get; set; }
    public string Platform { get; set; }
    public bool IsMobileDevice { get; set; }
    public string MobileBrand { get; set; }
    public string MobileModel { get; set; }

    public BrowserInfo(System.Web.HttpRequest request)
    {
        if (request.Browser != null)
        {
            if (request.UserAgent.Contains("Edge")
                && request.Browser.Browser != "Edge")
            {
                this.Name = "Edge";
            }
            else
            {
                this.Name = request.Browser.Browser;
                this.Version = request.Browser.MajorVersion.ToString();
            }
            this.Browser = request.Browser;
            this.Platform = request.Browser.Platform;
            this.IsMobileDevice = request.Browser.IsMobileDevice;
            if (IsMobileDevice)
            {
                this.Name = request.Browser.Browser;
            }
        }
    }

}

void context_EndRequest(object sender, System.EventArgs e)
{
    if (System.Web.HttpContext.Current != null && System.Web.HttpContext.Current.Response != null)
    {
        System.Web.HttpResponse response = System.Web.HttpContext.Current.Response;

        try
        {
            // response.Headers["P3P"] = "CP=\\\"IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT\\\"":
            // response.Headers.Set("P3P", "CP=\\\"IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT\\\"");
            // response.AddHeader("P3P", "CP=\\\"IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT\\\"");
            response.AppendHeader("P3P", "CP=\\\"IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT\\\"");

            // response.AppendHeader("X-Frame-Options", "DENY");
            // response.AppendHeader("X-Frame-Options", "SAMEORIGIN");
            // response.AppendHeader("X-Frame-Options", "AllowAll");

            if (System.Web.HttpContext.Current.Request.UrlReferrer != null)
            {
                // "X-Frame-Options": "ALLOW-FROM " Not recognized in Chrome 
                string host = System.Web.HttpContext.Current.Request.UrlReferrer.Scheme + System.Uri.SchemeDelimiter
                            + System.Web.HttpContext.Current.Request.UrlReferrer.Authority
                ;

                string selfAuth = System.Web.HttpContext.Current.Request.Url.Authority;
                string refAuth = System.Web.HttpContext.Current.Request.UrlReferrer.Authority;

                // SQL.Log(System.Web.HttpContext.Current.Request.RawUrl, System.Web.HttpContext.Current.Request.UrlReferrer.OriginalString, refAuth);

                if (IsHostAllowed(refAuth))
                {
                    BrowserInfo bi = new BrowserInfo(System.Web.HttpContext.Current.Request);

                    // bi.Name = Firefox
                    // bi.Name = InternetExplorer
                    // bi.Name = Chrome

                    // Chrome wants entire path... 
                    if (!System.StringComparer.OrdinalIgnoreCase.Equals(bi.Name, "Chrome"))
                        response.AppendHeader("X-Frame-Options", "ALLOW-FROM " + host);    

                    // unsafe-eval: invalid JSON https://github.com/keen/keen-js/issues/394
                    // unsafe-inline: styles
                    // data: url(data:image/png:...)

                    // https://www.owasp.org/index.php/Clickjacking_Defense_Cheat_Sheet
                    // https://www.ietf.org/rfc/rfc7034.txt
                    // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options
                    // https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP

                    // https://stackoverflow.com/questions/10205192/x-frame-options-allow-from-multiple-domains
                    // https://content-security-policy.com/
                    // http://rehansaeed.com/content-security-policy-for-asp-net-mvc/

                    // This is for Chrome:
                    // response.AppendHeader("Content-Security-Policy", "default-src 'self' 'unsafe-inline' 'unsafe-eval' data: *.msecnd.net vortex.data.microsoft.com " + selfAuth + " " + refAuth);

                    System.Collections.Generic.List<string> ls = new System.Collections.Generic.List<string>();
                    ls.Add("default-src");
                    ls.Add("'self'");
                    ls.Add("'unsafe-inline'");
                    ls.Add("'unsafe-eval'");
                    ls.Add("data:");

                    // http://az416426.vo.msecnd.net/scripts/a/ai.0.js

                    // ls.Add("*.msecnd.net");
                    // ls.Add("vortex.data.microsoft.com");

                    ls.Add(selfAuth);
                    ls.Add(refAuth);

                    string contentSecurityPolicy = string.Join(" ", ls.ToArray());
                    response.AppendHeader("Content-Security-Policy", contentSecurityPolicy);
                }
                else
                {
                    response.AppendHeader("X-Frame-Options", "SAMEORIGIN");
                }

            }
            else
                response.AppendHeader("X-Frame-Options", "SAMEORIGIN");
        }
        catch (System.Exception ex)
        {
            // WTF ? 
            System.Console.WriteLine(ex.Message); // Suppress warning
        }

    } // End if (System.Web.HttpContext.Current != null && System.Web.HttpContext.Current.Response != null)

} // End Using context_EndRequest

private static string[] s_allowedHosts = new string[] 
{
     "localhost:49533"
    ,"localhost:52257"
    ,"vmcompany1"
    ,"vmcompany2"
    ,"vmpostalservices"
    ,"example.com"
};

public static bool IsHostAllowed(string host)
{
    return Contains(s_allowedHosts, host);
} // End Function IsHostAllowed 

public static bool Contains(string[] allowed, string current)
{
    for (int i = 0; i < allowed.Length; ++i)
    {
        if (System.StringComparer.OrdinalIgnoreCase.Equals(allowed[i], current))
            return true;
    } // Next i 

    return false;
} // End Function Contains 
```

您需要在 HTTP-module Init 函数中注册 context_EndRequest 函数。

```
public class RequestLanguageChanger : System.Web.IHttpModule
{

    void System.Web.IHttpModule.Dispose()
    {
        // throw new NotImplementedException();
    }

    void System.Web.IHttpModule.Init(System.Web.HttpApplication context)
    {
        // https://stackoverflow.com/questions/441421/httpmodule-event-execution-order
        context.EndRequest += new System.EventHandler(context_EndRequest);
    }

    // context_EndRequest Code from above comes here

} 
```

接下来，您需要将模块添加到您的应用程序中。您可以在 Global.asax 中通过重写 HttpApplication 的 Init 函数以编程方式执行此操作，如下所示：

```
namespace ChangeRequestLanguage
{

    public class Global : System.Web.HttpApplication
    {

        System.Web.IHttpModule mod = new libRequestLanguageChanger.RequestLanguageChanger();

        public override void Init()
        {
            mod.Init(this);
            base.Init();
        }

        protected void Application_Start(object sender, System.EventArgs e)
        {

        }

        protected void Session_Start(object sender, System.EventArgs e)
        {

        }

        protected void Application_BeginRequest(object sender, System.EventArgs e)
        {

        }

        protected void Application_AuthenticateRequest(object sender, System.EventArgs e)
        {

        }

        protected void Application_Error(object sender, System.EventArgs e)
        {

        }

        protected void Session_End(object sender, System.EventArgs e)
        {

        }

        protected void Application_End(object sender, System.EventArgs e)
        {

        }

    }

} 
```

或者，如果您不拥有应用程序源代码，则可以将条目添加到 Web.config：

```
 <httpModules>
        <add name="RequestLanguageChanger" type= "libRequestLanguageChanger.RequestLanguageChanger, libRequestLanguageChanger" />
      </httpModules>
    </system.web>

  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>

    <modules runAllManagedModulesForAllRequests="true">
      <add name="RequestLanguageChanger" type="libRequestLanguageChanger.RequestLanguageChanger, libRequestLanguageChanger" />
    </modules>
  </system.webServer>
</configuration> 
```

system.webServer 中的条目适用于 IIS7+，system.web 中的另一个条目适用于 IIS 6。
请注意，您需要将 runAllManagedModulesForAllRequests 设置为 true，才能正常工作。

type 中的字符串格式为`"Namespace.Class, Assembly"`. 请注意，如果您在 VB.NET 而不是 C# 中编写程序集，VB 将为每个项目创建一个默认命名空间，因此您的字符串看起来像

```
"[DefaultNameSpace.Namespace].Class, Assembly" 
```

如果要避免此问题，请用 C# 编写 DLL。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-11-03T03:16:02.510

一种不仅允许多个域，而且允许动态域的方法怎么样？

这里的用例是一个 Sharepoint 应用程序部分，它通过 iframe 在 Sharepoint 内加载我们的网站。问题是 sharepoint 具有动态子域，例如[https://yoursite.sharepoint.com](https://yoursite.sharepoint.com)。所以对于 IE，我们需要指定 ALLOW-FROM https://.sharepoint.com

棘手的业务，但我们可以在知道两个事实的情况下完成它：

1.  当 iframe 加载时，它仅在第一个请求时验证 X-Frame-Options。加载 iframe 后，您可以在 iframe 内导航，并且不会在后续请求中检查标头。

2.  此外，当加载 iframe 时，HTTP 引用者是父 iframe url。

您可以在服务器端利用这两个事实。在 ruby​​ 中，我使用以下代码：

```
 uri = URI.parse(request.referer)
  if uri.host.match(/\.sharepoint\.com$/)
    url = "https://#{uri.host}"
    response.headers['X-Frame-Options'] = "ALLOW-FROM #{url}"
  end 
```

在这里，我们可以根据父域动态地允许域。在这种情况下，我们确保主机以 sharepoint.com 结尾，以确保我们的网站免受点击劫持。

我很想听听有关这种方法的反馈。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-08-24T23:40:45.257

根据[MDN 规范](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options)，`X-Frame-Options: ALLOW-FROM`Chrome 不支持，Edge 和 Opera 中的支持未知。

`Content-Security-Policy: frame-ancestors`覆盖`X-Frame-Options`（根据[此 W3 规范](https://www.w3.org/TR/CSP2/#frame-ancestors-and-frame-options)），但`frame-ancestors`兼容性有限。根据这些[MDN Specs](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/frame-ancestors)，IE 或 Edge 不支持它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-09-27T09:47:42.213

严格来说不，你不能。

*但是，您可以指定`X-Frame-Options: mysite.com`并因此允许`subdomain1.mysite.com`and `subdomain2.mysite.com`。但是，是的，这仍然是一个域。碰巧有一些解决方法，但我认为直接在 RFC 规范中阅读它是最容易的：[https ://www.rfc-editor.org/rfc/rfc7034](https://www.rfc-editor.org/rfc/rfc7034)*

*还值得指出的是，Content-Security-Policy (CSP) 标头的`frame-ancestor`指令已经过时了 X-Frame-Options。[在这里阅读更多](https://www.w3.org/TR/CSP2/#frame-ancestors-and-frame-options)。*

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-09-25T12:42:26.060

[HTTP 标头字段 X-Frame-Options](https://www.rfc-editor.org/rfc/rfc7034)的 RFC规定 X-Frame-Options 标头值中的“ALLOW-FROM”字段只能包含一个域。不允许多个域。

RFC 建议解决此问题。解决方法是在iframe src url中指定域名作为url参数。托管 iframe src url 的服务器然后可以检查 url 参数中给出的域名。如果域名与有效域名列表匹配，则服务器可以发送 X-Frame-Options 标头，其值为：“ALLOW-FROM domain-name”，其中 domain name 是尝试访问的域的名称嵌入远程内容。如果域名未给出或无效，则可以发送 X-Frame-Options 标头，其值为：“deny”。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-04T09:59:50.507

不完全相同，但可以在某些情况下工作：还有另一个选项`ALLOWALL`可以有效地消除限制，这对于测试/预生产环境可能是一件好事

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-20T17:42:18.557

`Apache`适用于多个域和子域的规则`.htaccess`如下：

```
Header always append Content-Security-Policy "frame-ancestors 'self' site1 site2;" 
```

**例子：**

下面的规则将只允许`yoursite (self)`,`https://example1.com/`和`https://example2.com`放置`iFrame`。`yoursite`

```
Header always append Content-Security-Policy "frame-ancestors 'self' https://example1.com/ https://example.com;" 
```

这是参考[链接](https://stackoverflow.com/q/38744953/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-01T07:49:53.300

我必须为 IE 添加 X-Frame-Options 和为其他浏览器添加 Content-Security-Policy。所以我做了类似以下的事情。

```
if allowed_domains.present?
  request_host = URI.parse(request.referer)
  _domain = allowed_domains.split(" ").include?(request_host.host) ? "#{request_host.scheme}://#{request_host.host}" : app_host
  response.headers['Content-Security-Policy'] = "frame-ancestors #{_domain}"
  response.headers['X-Frame-Options'] = "ALLOW-FROM #{_domain}"
else
  response.headers.except! 'X-Frame-Options'
end 
```

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2014-02-20T06:54:43.647

[一种可能的解决方法是使用此处](https://www.owasp.org/index.php/Clickjacking_Defense_Cheat_Sheet#Best-for-now_Legacy_Browser_Frame_Breaking_Script)描述的“帧中断”脚本

您只需要更改“if”语句即可检查您允许的域。

```
 if (self === top) {
       var antiClickjack = document.getElementById("antiClickjack");
       antiClickjack.parentNode.removeChild(antiClickjack);
   } else {
       //your domain check goes here
       if(top.location.host != "allowed.domain1.com" && top.location.host == "allowed.domain2.com")
         top.location = self.location;
   } 
```

我认为这种解决方法是安全的。因为如果未启用 javascript，您将不会担心恶意网站构建您的页面。

* * *

## 回答 #12

> 赞同：-9
> 
> 时间：2015-04-11T20:34:10.303

是的。此方法允许多个域。

VB.NET

```
response.headers.add("X-Frame-Options", "ALLOW-FROM " & request.urlreferer.tostring()) 
```

# django - 如何在方法保存上设置字段

> ID：10205193
> 
> 赞同：0
> 
> 时间：2012-04-18T07:53:54.337
> 
> 标签：django, authentication, profile

我正在做一个配置文件，在 django 中查看我的模型：

```
class UserProfile(models.Model):
    user = models.ForeignKey(User, unique=True)
    tipo = models.CharField(max_length=1,choices=TIPO_U)
    sexo = models.CharField(max_length=1,choices=SEXO)
    datanasc = models.DateField(blank=True, null=True)
    turma = models.ForeignKey(Turma, blank=True, null=True)
    ano = models.CharField(max_length=10, blank=True, null=True)
    cpf = models.CharField(max_length=20, blank=True, null=True)
    matricula = models.CharField(max_length=10, blank=True, null=True)
    endereco = models.CharField(max_length=400, blank=True, null=True)
    telefone = models.CharField(max_length=20, blank=True, null=True) 
```

查看我的表格：

```
class ProfileForm(ModelForm):
    username = forms.CharField(label="Usuário:", required=True)
    password1 = forms.CharField(required=True, label="Senha:",
        widget=forms.PasswordInput(render_value=True))
    password2 = forms.CharField(required=True, label="Confirmar Senha:",
        widget=forms.PasswordInput(render_value=True))
    email = forms.EmailField(label="E-mail:", required=True)
    first_name = forms.CharField(label="Nome completo:", required=True)

    def clean_username(self):
        username = self.cleaned_data["username"]
        try:
            User.objects.get(username=username)
        except User.DoesNotExist:
            return username
        raise forms.ValidationError(("Já existe um usuário com esse nome por favor escolha outro."))

    def clean_password2(self):
        password1 = self.cleaned_data.get("password1", "")
        password2 = self.cleaned_data["password2"]
        if password1 != password2:
            raise forms.ValidationError(("A confirmação da senha não confere, verifique."))
        return password2

    class Meta:
      model = UserProfile
      exclude = ('user',)

    def __init__(self, *args, **kwargs):
        super(ProfileForm, self).__init__(*args, **kwargs)
        try:
            self.fields['username'].initial = self.instance.user.username
            self.fields['email'].initial = self.instance.user.email
            self.fields['first_name'].initial = self.instance.user.first_name
        except User.DoesNotExist:
            pass

    def save(self, *args, **kwargs):
        if (self.instance.pk is None):
            u = User.objects.create_user(
                username=self.cleaned_data['username'],
                email=self.cleaned_data['email'])
            u.set_password(self.cleaned_data["password1"])
            u.is_active = True
        else:
            u = self.instance.user
            u.username = self.cleaned_data['username']
            u.email = self.cleaned_data['email']

        u.first_name = self.cleaned_data['first_name']  
        u.save()
        self.user = u
        profile = super(ProfileForm, self).save(*args,**kwargs)
        return profile 
```

运行插入时出现以下错误：

profile_userprofile.user_id 不能为 NULL

我不知道它是否正确，但我做到了：self.user = u

***编辑***

我的错误是忘记放：实例

**self.instance.user = u**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:01:21.503

尝试用/替换最后三行`save`方法

```
profile = super(ProfileForm, self).save(commit=False)
profile.user = u
profile.save()
return profile 
```

或者您可以在`form.save`参考[模型表单文档之外执行此操作](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#the-save-method)

# sql-server - 对 SQL Server 请求进行分组

> ID：10205198
> 
> 赞同：3
> 
> 时间：2012-04-18T07:54:07.847
> 
> 标签：sql-server, performance

这个问题与 SQL 中的分组**无关。**

让我们假设一个应用程序服务器位于应用程序的 UI 和 SQL Server 之间。该服务器当然会向 SQL Server 发出 SQL 请求。对于每个这样的请求，都有一些重要的开销。我很好奇是否有办法将多个请求分组并将它们一起发送，从而减少通信开销。

例如，服务器想要进行查询，例如

```
Select * from teams... 
```

和

```
Select * from users... 
```

而不是单独处理它们，它将发送类似 a `List<sqlRequest>`并接收回 a `List<sqlResponse>`（当然对程序员是透明的）。

在我的特殊情况下，我使用的是 SQL Server。更一般地说，是否有任何 SQL 数据库服务器/SQL 映射框架能够做到这一点？（将是）由此带来的性能提升是否值得付出努力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:36:02.727

如果满足以下条件，您*可以获得*性能提升

*   第二个结果集基于第一个
*   第一个结果集的创建成本很高

考虑以下

```
CREATE PROC GetTeamsAndUsersForACity(@CityId Int)
BEGIN       

   DECLARE @Teams as Table (TeamId int, TeamName varchar(10))

   INSERT into @Teams
   SELECT TeamId, TeamName
   FROM 
         Teams
   WHERE       
         CityId = @CityID

   SELECT TeamId, TeamName FROM @Teams

   SELECT
          UserId, UserName, TeamId
   FROM
          Users 
   WHERE
          TeamId in (Select TeamID FROM @Teams)
END 
```

请注意我们如何重用@teams 来获取用户和关联的团队，而无需重新查询teams 表。

您可以通过其他方式实现这些结果集。例如，您可以从第一个结果中检索 teamid，然后将其传回 SQL Server 用于第二组。

您也可以再次重新查询团队，例如`WHERE TeamId in (Select TeamID FROM Teams where CityID = @CityID)`。

您也可以只获取一个结果集`select * from teams inner join users....Where city id= @cityid`，然后将它们拆分到客户端。

每个解决方案的相对性能在第一个集合的大小和生成第一个结果集的查询时间上会有所不同，因此您需要测试哪个适合您的情况。

至于如何从客户端使用 GetTeamsAndUsersForACity。假设您使用的是 .NET，您可以

*   利用[`SqlDataReader.NextResult`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.nextresult.aspx)
*   [通过 IMultipleResults 接口](http://msdn.microsoft.com/en-us/library/Bb399344%28v=vs.90%29.aspx)使用LINQ to SQL
*   使用[DataSet.Load 方法（IDataReader、LoadOption、String[]）](http://msdn.microsoft.com/en-us/library/skef0k7a.aspx)或 DataAdapter.Fill() 之一

如果您使用的是 ORM，则必须检查是否支持存储过程中的多个结果

# javascript - 编译嵌入式 SpiderMonkey 程序时出错

> ID：10205202
> 
> 赞同：8
> 
> 时间：2012-04-18T07:54:15.070
> 
> 标签：javascript, c++, static-libraries, header-files, spidermonkey

好的，所以我使用命令下载了 SpiderMonkey 源代码`wget http://ftp.mozilla.org/pub/mozilla.org/js/js185-1.0.0.tar.gz`并解压了它。然后我通过执行以下命令成功构建了包含文件和静态库：

1.  `autoconf2.13`
2.  `./configure --prefix=~/js --disable-shared-js`
3.  `make`
4.  `make install`

现在我尝试使用命令编译以下代码`g++ -I/home/aaditmshah/js/include/js -L/home/aaditmshah/js/lib -lmozjs185-1.0 -ldl -lm -ldl helloworld.cpp -o helloworld`：

```
/*
 * This define is for Windows only, it is a work-around for bug 661663.
 */
#ifdef _MSC_VER
# define XP_WIN
#endif

/* Include the JSAPI header file to get access to SpiderMonkey. */
#include "jsapi.h"

/* The class of the global object. */
static JSClass global_class = {
    "global", JSCLASS_GLOBAL_FLAGS,
    JS_PropertyStub, JS_PropertyStub, JS_PropertyStub, JS_StrictPropertyStub,
    JS_EnumerateStub, JS_ResolveStub, JS_ConvertStub, JS_FinalizeStub,
    JSCLASS_NO_OPTIONAL_MEMBERS
};

/* The error reporter callback. */
void reportError(JSContext *cx, const char *message, JSErrorReport *report)
{
    fprintf(stderr, "%s:%u:%s\n",
            report->filename ? report->filename : "<no filename=\"filename\">",
            (unsigned int) report->lineno,
            message);
}

int main(int argc, const char *argv[])
{
    /* JSAPI variables. */
    JSRuntime *rt;
    JSContext *cx;
    JSObject  *global;

    /* Create a JS runtime. You always need at least one runtime per process. */
    rt = JS_NewRuntime(8 * 1024 * 1024);
    if (rt == NULL)
        return 1;

    /* 
     * Create a context. You always need a context per thread.
     * Note that this program is not multi-threaded.
     */
    cx = JS_NewContext(rt, 8192);
    if (cx == NULL)
        return 1;
    JS_SetOptions(cx, JSOPTION_VAROBJFIX | JSOPTION_JIT | JSOPTION_METHODJIT);
    JS_SetVersion(cx, JSVERSION_LATEST);
    JS_SetErrorReporter(cx, reportError);

    /*
     * Create the global object in a new compartment.
     * You always need a global object per context.
     */
    global = JS_NewCompartmentAndGlobalObject(cx, &global_class, NULL);
    if (global == NULL)
        return 1;

    /*
     * Populate the global object with the standard JavaScript
     * function and object classes, such as Object, Array, Date.
     */
    if (!JS_InitStandardClasses(cx, global))
        return 1;

    /* Your application code here. This may include JSAPI calls
     * to create your own custom JavaScript objects and to run scripts.
     *
     * The following example code creates a literal JavaScript script,
     * evaluates it, and prints the result to stdout.
     *
     * Errors are conventionally saved in a JSBool variable named ok.
     */
    char *script = "'Hello ' + 'World!'";
    jsval rval;
    JSString *str;
    JSBool ok;
    const char *filename = "noname";
    uintN lineno = 0;

    ok = JS_EvaluateScript(cx, global, script, strlen(script),
                           filename, lineno, &rval);
    if (rval == NULL | rval == JS_FALSE)
        return 1;

    str = JS_ValueToString(cx, rval);
    printf("%s\n", JS_EncodeString(cx, str));

    /* End of your application code */

    /* Clean things up and shut down SpiderMonkey. */
    JS_DestroyContext(cx);
    JS_DestroyRuntime(rt);
    JS_ShutDown();
    return 0;
} 
```

我知道我的`include`和`linker`选项指向正确的目录。包含文件在`/home/aaditmshah/js/include/js`，名为的静态库`libmozjs185-1.0`在`/home/aaditmshah/js/lib`. 但是它仍然会产生以下错误：

```
helloworld.cpp: In function ‘int main(int, const char**)’:
helloworld.cpp:74:20: warning: deprecated conversion from string constant to ‘char*’ [-Wwrite-strings]
helloworld.cpp:83:17: warning: NULL used in arithmetic [-Wpointer-arith]
/tmp/ccUU9may.o: In function `main':
helloworld.cpp:(.text+0x6e): undefined reference to `JS_Init'
helloworld.cpp:(.text+0x94): undefined reference to `JS_NewContext'
helloworld.cpp:(.text+0xba): undefined reference to `JS_SetOptions'
helloworld.cpp:(.text+0xcb): undefined reference to `JS_SetVersion'
helloworld.cpp:(.text+0xdc): undefined reference to `JS_SetErrorReporter'
helloworld.cpp:(.text+0xf2): undefined reference to `JS_NewCompartmentAndGlobalObject'
helloworld.cpp:(.text+0x11a): undefined reference to `JS_InitStandardClasses'
helloworld.cpp:(.text+0x191): undefined reference to `JS_EvaluateScript'
helloworld.cpp:(.text+0x1c8): undefined reference to `JS_ValueToString'
helloworld.cpp:(.text+0x1df): undefined reference to `JS_EncodeString'
helloworld.cpp:(.text+0x1f3): undefined reference to `JS_DestroyContext'
helloworld.cpp:(.text+0x1ff): undefined reference to `JS_Finish'
helloworld.cpp:(.text+0x204): undefined reference to `JS_ShutDown'
/tmp/ccUU9may.o:(.data+0x10): undefined reference to `JS_PropertyStub'
/tmp/ccUU9may.o:(.data+0x18): undefined reference to `JS_PropertyStub'
/tmp/ccUU9may.o:(.data+0x20): undefined reference to `JS_PropertyStub'
/tmp/ccUU9may.o:(.data+0x28): undefined reference to `JS_StrictPropertyStub'
/tmp/ccUU9may.o:(.data+0x30): undefined reference to `JS_EnumerateStub'
/tmp/ccUU9may.o:(.data+0x38): undefined reference to `JS_ResolveStub'
/tmp/ccUU9may.o:(.data+0x40): undefined reference to `JS_ConvertStub'
/tmp/ccUU9may.o:(.data+0x48): undefined reference to `JS_FinalizeStub'
collect2: ld returned 1 exit status 
```

我想知道我缺少哪些文件。我应该重建 SpiderMonkey 并安装它`/usr/local`吗？任何帮助将不胜感激。

我很确定问题不在于我使用的是静态库。我将 SpiderMonkey 重建为共享对象库，但它仍然给了我同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:19:49.437

你可以试试这个：

```
g++ -I/home/aaditmshah/js/include/js /home/aaditmshah/js/lib/mozjs185-1.0.a -lm -ldl helloworld.cpp -o helloworld 
```

IE。直接在 g++ 命令行中添加存档。如果它不起作用，您可能需要指定这些组合的一些组合。（使用 gcc 4.2 这对我有用）：

```
-static -lmozjs185 
```

只需为 mozjs185-1.0.a 指定正确的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T11:33:56.883

在 Ubuntu 12.10 上，g++ 版本 gcc 版本 4.7.2 (Ubuntu/Linaro 4.7.2-2ubuntu1) 和 SipderMonkey v1.8.5：命令是`sudo g++ -o helloworld -I /usr/local/include/js helloworld.cpp -lmozjs185-1.0 -L /usr/local/lib -lpthread`Spend more than expected time doing things so simple sigh！不用感谢 FireFox/Mozilla。

# jquery-mobile - 影响页面转换的新 JQuery 移动版本？

> ID：10205204
> 
> 赞同：1
> 
> 时间：2012-04-18T07:54:20.987
> 
> 标签：jquery-mobile

我有以下代码：

```
<div data-role="page" id="Page1" >

   <!-- Footer here -->
      <div data-role="footer" data-position="fixed" data-id="id-footer1">
         <div data-role="navbar">
            <ul>
               <li><a href="#Page1" class="ui-btn-active ui-state-persist">Page1</a></li>
               <li><a href="#Page2" data-transition="pop">Page2</a></li>
            </ul>
         </div>
      </div><!-- /footer -->
</div><!-- /page -->

<div data-role="page" id="Page2" >

   <!-- Footer here -->
      <div data-role="footer" data-position="fixed" data-id="id-footer1">
         <div data-role="navbar">
            <ul>
               <li><a href="#Page1" >Page1</a></li>
               <li><a href="#Page2" data-transition="pop"class="ui-btn-active ui-state-persist">Page2</a></li>
            </ul>
         </div>
      </div><!-- /footer -->
   </div><!-- /page --> 
```

如果我使用以下脚本，上述代码将起作用。也就是说，第 1 页将具有 Slide 效果，第 2 页将具有 Pop 效果。

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script> 
```

但是，当我使用以下时，幻灯片效果和弹出效果消失了。

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script> 
```

似乎新的 JQM 版本影响了页面转换，还是我遗漏了什么？有人可以确认吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:59:53.130

阅读[1.1.0 公告中](http://jquerymobile.com/blog/2012/04/13/announcing-jquery-mobile-1-1-0/)的转换部分：

> 不幸的是，经过大量工作后，我们确定在 Android 2.x 中，即使在运行 2.3 的 Nexus S 等较新的设备上，也无法将页面转换降低到足以在 Android 2.x 中获得可接受的性能。经过深思熟虑，我们决定对目标转换使用 3D 转换的功能测试：如果浏览器通过，它将看到完整的转换范围。默认情况下，如果浏览器未通过此 3D 测试，它们将退回到淡入淡出过渡，而不管指定的过渡。所有 Android 1.x-2.x 设备均未通过此测试，但 Android 3.x 和 4.x 通过。如果您想更改此行为，则每个转换的回退行为是完全可配置的。

如果您的测试浏览器不支持 3D 变换，您将获得淡入淡出过渡。

# ruby-on-rails-3 - User.admin 与设计（Rails 3）

> ID：10205207
> 
> 赞同：1
> 
> 时间：2012-04-18T07:54:32.533
> 
> 标签：ruby-on-rails-3, devise

这可能是一个简单的问题，但由于我从未经历过这个过程，我想我会寻求帮助。我在我的 rails 3 应用程序中使用设计进行用户身份验证。我不想为我的 1 个管理员用户创建单独的模型，而是想设置一个具有 admin => TRUE 的用户。

我已经准备好我的用户数据库设置（在用户数据库中添加了管理列）。

我的问题是我如何创建一个用户，以便将管理员标志设置为 TRUE。这会在控制台中完成吗，如果是的话，命令会是什么样子？

所有帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:47:33.323

查看[代码清单 9.41 部分。Michael Hartl 的教程](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial?version=3.2#code%3apopulator_with_admin)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T22:16:06.953

```
User.toggle!(:admin) 
```

或者我更喜欢：

```
u = User.find(1)
u.toggle!(:admin) 
```

# http-headers - 我如何解释这个访问者用户环境数据

> ID：10205208
> 
> 赞同：0
> 
> 时间：2012-04-18T07:54:41.423
> 
> 标签：http-headers, environment-variables, user-agent

我有一个客户在我们的 webapp 上遇到了问题。我从会议上得到了这个：

```
Browser:    Internet Explorer 9.0
Platform:   Microsoft Windows Vista
User Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.0; Trident/5.0)
Language:   Danish (da-DK) 
```

所以他在 Vista 上使用 IE 9.0，但是用户代理中的 Mozilla 5/0 是什么？什么是 Trident/5.0？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:02:39.887

> 不幸的是，在浏览器大战期间，许多 Web 服务器被配置为仅将需要高级功能的网页发送到被标识为某些版本的 Mozilla 的客户端。
> 
> 出于这个原因，大多数 Web 浏览器使用如下的 User-Agent 值：Mozilla/[version] ([system and browser information]) [platform] ([platform details]) [extensions]。
> 
> [http://en.wikipedia.org/wiki/User_agent](http://en.wikipedia.org/wiki/User_agent)

换句话说，几乎所有浏览器都将自己标识为 Mozilla 的某个版本，以便与旧的、无知的 Web 服务器和不良做法更加兼容。

[Trident](http://en.wikipedia.org/wiki/Trident_%28layout_engine%29)是 Internet Explorer 的[渲染引擎](http://en.wikipedia.org/wiki/List_of_layout_engines)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T08:03:43.193

来自[http://msdn.microsoft.com/en-us/library/ms537503%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms537503%28v=vs.85%29.aspx)：

> Mozilla/5.0 应用程序名称和版本。由于历史原因，Internet Explorer 将自己标识为 Mozilla 浏览器
> 
> Trident/5.0 Trident 令牌标识MSHTML（Trident）的版本，可用于确定网页是否显示在兼容性视图中。

# java - 是否有必要对 catch-block 中的事务进行回滚？

> ID：10205210
> 
> 赞同：5
> 
> 时间：2012-04-18T07:54:49.733
> 
> 标签：java, transactions, eclipselink

也许是一个愚蠢的问题，但是如果 EntityManager.merge() 抛出异常，是否有必要对 catch 块中的事务进行回滚？或者异常本身是否意味着合并将不起作用，以便下次我运行提交之前引发异常的更改将不适用？

例子：

```
public void setPerson(Person person) {
EntityManagerFactory emf =   Persistence.createEntityManagerFactory("MyLib");
     EntityManager em = emf.createEntityManager();
     try {            
         if(!em.getTransaction().isActive()){
            em.getTransaction().begin();
         }
         em.merge(person);
         em.getTransaction().commit();
         emf.getCache().evict(Person.class); // clear Person cache
     } catch (Exception ex){
         em.getTransaction().rollback(); // Is this necessary?   
     } finally {
         em.close();
     }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T08:05:03.753

答案取决于`em.merge(person)`方法的细节和数据库驱动程序的实现。

如果该方法只执行一个更新语句，那么它`rollback`是多余的。但是，如果它可能会运行多个更新，那么就不是那么清楚了。

我个人会把它放在那里

如果在某些更新完成后`rollback`您的`merge`方法错误而其他更新未完成，则在没有显式的情况下关闭数据库连接，`commit`或者`rollback`将提交或回滚事务，具体取决于驱动程序的实现。根据[javadoc for`java.sql.Connection`](http://java.sun.com/javase/6/docs/api/java/sql/Connection.html#close%28%29)，行为取决于实现。因此，如果您自己没有`rollback`出错，您最终可能会提交部分更新。

# python - 即使特别包含，cx-freeze 也无法包含模块

> ID：10205219
> 
> 赞同：5
> 
> 时间：2012-04-18T07:55:29.467
> 
> 标签：python, freeze, cx-freeze

我正在尝试使用 cx-freeze 来创建我的应用程序的静态自包含发行版（The Spye Python Engine，[www.spye.dk](http://www.spye.dk)），但是，当我运行 cx-freeze 时，它​​说：

```
Missing modules:
? _md5 imported from hashlib
? _scproxy imported from urllib
? _sha imported from hashlib
? _sha256 imported from hashlib
? _sha512 imported from hashlib
? _subprocess imported from subprocess
? configparser imported from apport.fileutils
? usercustomize imported from site 
```

这是我的 setup.py：

```
#!/usr/bin/env python
from cx_Freeze import setup, Executable

includes = ["hashlib", "urllib", "subprocess", "fileutils", "site"]
includes += ["BaseHTTPServer", "cgi", "cgitb", "fcntl", "getopt", "httplib", "inspect", "json", "math", "operator", "os", "os,", "psycopg2", "re", "smtplib", "socket", "SocketServer", "spye", "spye.config", "spye.config.file", "spye.config.merge", "spye.config.section", "spye.editor", "spye.framework", "spye.frontend", "spye.frontend.cgi", "spye.frontend.http", "spye.input", "spye.output", "spye.output.console", "spye.output.stdout", "spye.pluginsystem", "spye.presentation", "spye.util.html", "spye.util.rpc", "ssl", "stat,", "struct", "subprocess", "sys", "termios", "time", "traceback", "tty", "urllib2", "urlparse", "uuid"]

includefiles=[]
excludes = []
packages = []
target = Executable(
    # what to build
    script = "spye-exe",
    initScript = None,
    #base = 'Win32GUI',
    targetDir = r"dist",
    targetName = "spye.exe",
    compress = True,
    copyDependentFiles = True,
    appendScriptToExe = False,
    appendScriptToLibrary = False,
    icon = None
    )

setup(
    version = "0.1",
    description = "No Description",
    author = "No Author",
    name = "cx_Freeze Sample File",

    options = {"build_exe": {"includes": includes,
                 "excludes": excludes,
                 "packages": packages
                 #"path": path
                 }
           },

    executables = [target]
    ) 
```

请注意，我在包含列表中明确指定了缺少的模块。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:22:06.643

缺少模块不一定是问题：许多模块尝试不同的导入以适应不同的平台或不同版本的 Python。`subprocess`例如，您可以在 中找到以下代码：

```
if mswindows:
    ...
    import _subprocess 
```

cx_Freeze 不知道这一点，因此它也会尝试`_subprocess`在 Linux/Mac 上查找，并将其报告为丢失。指定它们`includes`不会改变任何东西，因为它试图包含它们，但无法找到它们。

无论如何，它应该构建一个文件，所以尝试运行它并查看它是否有效。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-18T08:01:27.767

我猜，你不能简单地`+=`放在名单上。

您可能应该使用 list 方法`extend`- 否则原始列表将不会被修改：

```
includes.extend(["BaseHTTPServer", "<rest of your modules>"]) 
```

**编辑：（感谢@ThomasK）**

`+=`工作正常 - 我只有一个无法正常工作的在线 Python 解释器。（我的 Windows 安装上没有安装 python，所以我必须在线检查）。

# python - Wxpython：TreeCtrl：遍历树

> ID：10205221
> 
> 赞同：4
> 
> 时间：2012-04-18T07:55:31.147
> 
> 标签：python, wxpython

我正在使用以下方法迭代 wxpython treectrl 的所有节点。

```
 def get_desired_parent(self, name, selectednode = None):
    if selectednode == None:
        selectednode = self.treeCtrl.RootItem
    # First perform the action on the first object separately
    childcount = self.treeCtrl.GetChildrenCount(selectednode, False)
    if childcount == 0:
        return None

    (item,cookie) = self.treeCtrl.GetFirstChild(selectednode)
    if self.treeCtrl.GetItemText(item) == name:
        return item

    while childcount > 1:
        childcount = childcount - 1
     # Then iterate over the rest of objects
        (item,cookie) = self.treeCtrl.GetNextChild(item,cookie)
        if self.treeCtrl.GetItemText(item) == name:
            return item
    return None 
```

当我在结构中递归迭代时，这个多余代码的问题变得更加明显。是否有另一种以更紧凑的方式执行相同操作的方法，以使我的代码更简洁/pythonic。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T08:19:12.150

您可以使用此函数内部的一个函数（仅在其命名空间中），该函数将检查它是否与条件匹配。如果它确实返回了该项目，如果没有，则继续。

否则，您可以在下线后检查您的状况`while`。这样，`item`变量将由循环之前的第一个孩子定义，并像其他任何孩子一样进行评估。

还有一种方式：（或两者的混合）

```
(child, cookie) = self.GetFirstChild(item)
while child.IsOk():
    do_something(child)
     (child, cookie) = self.GetNextChild(item, cookie) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-07T08:37:51.613

这是一个完整的示例，它首先遍历树的深度。该功能绑定到右键。

```
def OnRightDown(self, event):
    def showChildren(item,cookie):
        # functions goes recursively down the tree
        if item.IsOk():
            child, cookie = self.tree.GetFirstChild(item)
            while child.IsOk():
                child, cookie = self.tree.GetNextChild(child, cookie)
                if child:
                  print(self.tree.GetItemText(child)) #show child label name
                  showChildren(child,cookie)
    pt = event.GetPosition()
    item, flags = self.tree.HitTest(pt)
    if item:
        print(self.tree.GetItemText(item)) #show parent label name
        showChildren(item,0)  #iterate depth first into the tree 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-08T13:56:22.987

在这里使您的代码具有高度可读性的最佳方法是使其简短且功能强大。

如果您需要遍历所有树项并首先通过深度进行。这是一个单一的快速功能。给它一个获取每个项目的函数，以及你从哪里开始（通常是 self.root）。它也非常可重用，因为您可能会经常这样做。

```
 def depth_first_tree(self, funct, item):
        (child, cookie) = self.tree.GetFirstChild(item)
        while child.IsOk():
            self.depth_first_tree(funct, child)
            funct(child)
            (child, cookie) = self.tree.GetNextChild(item, cookie) 
```

# c++ - 为什么我不能在全局范围内访问我的数组下标

> ID：10205222
> 
> 赞同：0
> 
> 时间：2012-04-18T07:55:34.100
> 
> 标签：c++, global-variables

如果我在函数中有以下代码，我将不会收到错误并且我可以编译没有问题，但是，一旦我将它放在全局范围内，我将收到“无法分配大小为零的数组”的错误，以及其他几个错误。为什么会发生这种情况，我怎样才能摆脱错误。我知道全局变量的风险，这只是一个简单的测试用例。

```
int* intest[2];
intest[0] = new int; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:58:49.903

允许在全局范围内声明，但不允许使用 new 运算符或赋值。因此，您需要在全局范围内声明 int *intest[2] （并且您的所有代码都会看到它），但 C++ 要求 new 在您的主代码的序列中。（可能在应用程序的某种启动功能中）。

编辑：正如@phresnel 所指出的，您可以在此范围内使用 new 运算符，但不能使用赋值（这是不寻常的但不是非法的）。但是，以下用作启动的新运算符将适用于您：

```
int *x[2]={new int,new int}; 
```

一般来说，强烈建议不要使用这样的全局缓冲区，并且被认为是一种反模式——如果你可以避免使用它，你可能应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T08:27:31.717

```
int* intest[2]; 
```

但是在本地范围内是有效的：

```
intest[0] = new int; 
```

不是。

不同之处在于上面的一个是初始化语句（创建变量），而下面的一个是**执行**的代码段。

应该**“执行”**的代码不能在全局范围内调用，例如你不能在全局范围内调用函数。什么时候调用该函数？

我可以在全局范围内创建我想要的变量数量，但我无法从中运行代码，除非在初始化全局变量时调用构造函数。

如果要执行以下代码：

```
intest[0] = new int; 
```

您必须通过 main 或其他函数执行它，否则程序将不知道**何时**执行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T08:06:26.623

AFAIK，全球范围只允许你把`define`它`declaration`放在上面。而`intest[0] = new int;`c/c++ 编译器在编译时将失败的赋值。

# matlab - 如何从excel中检索坐标并根据地图绘制点？- MATLAB

> ID：10205224
> 
> 赞同：0
> 
> 时间：2012-04-18T07:55:49.763
> 
> 标签：matlab, geolocation, gps, coordinates, latitude-longitude

我目前正在研究人行道的地图路由系统，不确定以前是否有人这样做过。但是我已经使用谷歌地球收集了路径的各种路点坐标。

以下数据是路径的坐标点，将其保存在 Excel 中并导入 Matlab

```
1   1.37723400000000    103.839645000000
2   1.37722000000000    103.839741000000
3   1.37723300000000    103.839843000000
4   1.37723600000000    103.839968000000
5   1.37724100000000    103.840125000000
6   1.37723900000000    103.840245000000
7   1.37724900000000    103.840435000000
8   1.37725700000000    103.840674000000
9   1.37724800000000    103.840896000000
10  1.37726500000000    103.841071000000
11  1.37728300000000    103.841190000000
12  1.37729500000000    103.841393000000
13  1.37734600000000    103.841591000000
14  1.37736500000000    103.841918000000
15  1.37739800000000    103.842093000000
16  1.37742900000000    103.842400000000
17  1.37744900000000    103.842629000000
18  1.37748100000000    103.842895000000
19  1.37750200000000    103.843164000000
20  1.37752800000000    103.843428000000
21  1.37756500000000    103.843689000000
22  1.37757000000000    103.843997000000
23  1.37758500000000    103.844248000000
24  1.37749200000000    103.844499000000
25  1.37765800000000    103.844515000000
26  1.37806100000000    103.844467000000
27  1.37853700000000    103.844386000000
28  1.37888000000000    103.844349000000
29  1.37924600000000    103.844303000000
30  1.37957500000000    103.844266000000
31  1.37966200000000    103.844190000000
32  1.37965300000000    103.844034000000
33  1.37963800000000    103.843813000000
34  1.37961600000000    103.843550000000
35  1.37959500000000    103.843313000000
36  1.37957600000000    103.843097000000
37  1.37957300000000    103.843007000000
38  1.37956800000000    103.842852000000
39  1.37953900000000    103.842602000000
40  1.37949900000000    103.842315000000
41  1.37948700000000    103.842056000000
42  1.37953800000000    103.841882000000
43  1.37967800000000    103.841755000000
44  1.37984000000000    103.841674000000
45  1.38007300000000    103.841546000000
46  1.38027900000000    103.841430000000
47  1.38044400000000    103.841354000000
48  1.38064800000000    103.841248000000
49  1.38092400000000    103.841100000000
50  1.38125600000000    103.840942000000
51  1.38178300000000    103.840682000000
52  1.38202300000000    103.840565000000
53  1.38236700000000    103.840396000000
54  1.38271600000000    103.840206000000
55  1.38302800000000    103.840017000000
56  1.38314600000000    103.840222000000
57  1.38299000000000    103.840230000000
58  1.38286700000000    103.840288000000
59  1.38265300000000    103.840398000000
60  1.38242100000000    103.840522000000
61  1.38219900000000    103.840638000000
62  1.38195100000000    103.840766000000
63  1.38162100000000    103.840934000000
64  1.38130200000000    103.841093000000
65  1.38106700000000    103.841202000000
66  1.38088500000000    103.841286000000
67  1.38069300000000    103.841372000000
68  1.38049000000000    103.841494000000
69  1.38018700000000    103.841659000000
70  1.37988900000000    103.841822000000
71  1.37966700000000    103.841963000000
72  1.37965000000000    103.842037000000
73  1.37965100000000    103.842220000000
74  1.37966300000000    103.842363000000
75  1.37968900000000    103.842641000000
76  1.37973000000000    103.843049000000
77  1.37975300000000    103.843305000000
78  1.37978200000000    103.843690000000
79  1.37982300000000    103.844135000000
80  1.37989800000000    103.844222000000
81  1.37996400000000    103.844230000000
82  1.38029900000000    103.844183000000
83  1.38080600000000    103.844091000000
84  1.38119600000000    103.843985000000
85  1.38170500000000    103.843838000000
86  1.38194900000000    103.843765000000
87  1.38220500000000    103.843683000000
88  1.38250000000000    103.843564000000
89  1.38296800000000    103.843388000000
90  1.38367400000000    103.843107000000
91  1.38379700000000    103.842994000000
92  1.38384900000000    103.842791000000
93  1.38376700000000    103.842173000000
94  1.38372500000000    103.841758000000
95  1.38358400000000    103.841212000000
96  1.38350400000000    103.840867000000
97  1.38324600000000    103.840388000000
98  1.38288200000000    103.839785000000
99  1.38265700000000    103.839436000000
100 1.38238700000000    103.838973000000
101 1.38224900000000    103.838785000000
102 1.38215800000000    103.838830000000
103 1.38197900000000    103.838933000000
104 1.38162900000000    103.839097000000
105 1.38115400000000    103.839338000000
106 1.38080900000000    103.839609000000
107 1.38036600000000    103.839756000000
108 1.37995000000000    103.839782000000
109 1.37957400000000    103.839826000000
110 1.37904400000000    103.839883000000
111 1.37844300000000    103.839807000000
112 1.37803700000000    103.839743000000
113 1.37765800000000    103.839690000000
114 1.37735600000000    103.839665000000
115 1.38310100000000    103.840134000000
116 1.38108800000000    103.841146000000
117 1.37961700000000    103.842951000000
118 1.37978200000000    103.844233000000 
```

* * *

**我的代码**

```
M = xlsread('YCKMap.xlsx'); 
figure(),plot(M(:,2), M(:,3)); 
```

* * *

**结果**

[http://i.stack.imgur.com/0dncY.jpg](https://i.stack.imgur.com/0dncY.jpg)

我想要的是：

[![我想要的是](../Images/07adcd03b11c64f8f0aaf63ab8f21f29.png)](https://i.stack.imgur.com/aQDZO.jpg)

是否可以将这些点连接在一起 (55 115 56) (49 116 65) (37 117 76) (30 118 80) 如上图所示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T04:48:05.857

我已经找到了我的问题的答案，并希望让社区受益于我提出的问题。根据@Dan 代码`plot(M(:,2), M(:,3);`可以绘制出点，但图形的方向偏离了。因此，我使用航点功能使其变得更好。

无论如何，当您想插入新行时，通过留下单元格间隙来组织您的 Excel 数据。我已经粘贴了 excel 数据，以便您获得更清晰的图片。

编码

* * *

```
M = xlsread('excel.xlsx');
waypoints =[M(:,2), M(:,3)];
[lttrk,lntrk] = track('rh',waypoints,'degrees');
figure(),geoshow(lttrk,lntrk,'DisplayType','line', 'color','r'); 
```

Excel 数据

* * *

```
1   1.377234    103.839645
2   1.37722     103.839741
3   1.377233    103.839843
4   1.377236    103.839968
5   1.377241    103.840125
6   1.377239    103.840245
7   1.377249    103.840435
8   1.377257    103.840674
9   1.377248    103.840896
10  1.377265    103.841071
11  1.377283    103.84119
12  1.377295    103.841393
13  1.377346    103.841591
14  1.377365    103.841918
15  1.377398    103.842093
16  1.377429    103.8424
17  1.377449    103.842629
18  1.377481    103.842895
19  1.377502    103.843164
20  1.377528    103.843428
21  1.377565    103.843689
22  1.37757         103.843997
23  1.377585    103.844248
24  1.377492    103.844499
25  1.377658    103.844515
26  1.378061    103.844467
27  1.378537    103.844386
28  1.37888         103.844349
29  1.379246    103.844303
30  1.379575    103.844266
31  1.379662    103.84419
32  1.379653    103.844034
33  1.379638    103.843813
34  1.379616    103.84355
35  1.379595    103.843313
36  1.379576    103.843097
37  1.379573    103.843007
38  1.379568    103.842852
39  1.379539    103.842602
40  1.379499    103.842315
41  1.379487    103.842056
42  1.379538    103.841882
43  1.379678    103.841755
44  1.37984         103.841674
45  1.380073    103.841546
46  1.380279    103.84143
47  1.380444    103.841354
48  1.380648    103.841248
49  1.380924    103.8411
50  1.381256    103.840942
51  1.381783    103.840682
52  1.382023    103.840565
53  1.382367    103.840396
54  1.382716    103.840206
55  1.383028    103.840017

56  1.383146    103.840222
57  1.38299         103.84023
58  1.382867    103.840288
59  1.382653    103.840398
60  1.382421    103.840522
61  1.382199    103.840638
62  1.381951    103.840766
63  1.381621    103.840934
64  1.381302    103.841093
65  1.381067    103.841202
66  1.380885    103.841286
67  1.380693    103.841372
68  1.38049         103.841494
69  1.380187    103.841659
70  1.379889    103.841822
71  1.379667    103.841963
72  1.37965     103.842037
73  1.379651    103.84222
74  1.379663    103.842363
75  1.379689    103.842641
76  1.37973     103.843049
77  1.379753    103.843305
78  1.379782    103.84369
79  1.379823    103.844135
80  1.379898    103.844222
81  1.379964    103.84423
82  1.380299    103.844183
83  1.380806    103.844091
84  1.381196    103.843985
85  1.381705    103.843838
86  1.381949    103.843765
87  1.382205    103.843683
88  1.3825          103.843564
89  1.382968    103.843388
90  1.383674    103.843107
91  1.383797    103.842994
92  1.383849    103.842791
93  1.383767    103.842173
94  1.383725    103.841758
95  1.383584    103.841212
96  1.383504    103.840867
97  1.383246    103.840388
98  1.382882    103.839785
99  1.382657    103.839436
100 1.382387    103.838973
101 1.382249    103.838785
102 1.382158    103.83883
103 1.381979    103.838933
104 1.381629    103.839097
105 1.381154    103.839338
106 1.380809    103.839609
107 1.380366    103.839756
108 1.37995         103.839782
109 1.379574    103.839826
110 1.379044    103.839883
111 1.378443    103.839807
112 1.378037    103.839743
113 1.377658    103.83969
114 1.377356    103.839665
1   1.377234    103.839645

49  1.380924    103.8411
116 1.381088    103.841146
65  1.381067    103.841202

37  1.379573    103.843007
117 1.379617    103.842951
76  1.37973         103.843049

30  1.379575    103.844266
118 1.379782    103.844233
80  1.379898    103.844222 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:17:34.627

如果要在 Matlab 中以与矩阵中出现的顺序不同的顺序绘制点，请在矩阵的开头附加一个列向量，该列向量是点应出现的顺序的向量。然后使用[sortrows](http://www.mathworks.com/help/toolbox/stats/ordinal.sortrows.html)函数matlab 重新排列矩阵。现在它将处于正确的绘图顺序。例如：

```
M = [0 4 2; 1 17 5]';
plot(M); 
```

现在假设您知道正确的绘图顺序是 (0,1) 然后 (2,5) 然后 (4,17)。与输入矩阵 M 相比，正确的绘图顺序可以指定为`order = [1 3 2]'`

所以要以正确的顺序绘制：

```
M = [order'; M'];
M = sortrows(M);
plot(M(:,2), M(:,3); 
```

这意味着只要您知道正确的绘图顺序，您现在就可以使用此方法获得正确的绘图。

因此，在您的示例中，您希望按以下顺序绘制这些点 (55 115 56) (49 116 65) (37 117 76) (30 118 80)。假设您希望它们从 55 开始，因为这是您的新订单中的第一个点，目前 M 看起来像这样：M = [...;30 118 80;...;37 117 76;...;49 116 65;...;55 115 56;...] 但你希望它看起来像这样： M = [...; 55 115 56；56 116 65；57 117 76；58 118 80;...]。问题是你不能只改变像这样的值 M(M(:,1) == 30,1) = 58 因为那样你会得到 2 个索引为 58 的点。所以首先你需要添加 1也是所有 58 或更高的索引，所以 M(M(:,1) >= 58) = M(M(:,1) >= 58) + 1 然后最后是 M(M(:,1) = = 30,1) = 58\. 所以概括一点的变化：

```
 M(M(:,1) >= newIndex) = M(M(:,1) >= newIndex) + 1;
 M(M(:,1) == oldIndex,1) = newIndex; 
```

如果有一些逻辑可以定义如何更改点，那么您可以将其写入循环。如果不是，它只是这 4 点，那么只需在命令行中手动运行它。

# sql-server - 如何执行包 SSIS 2008

> ID：10205226
> 
> 赞同：2
> 
> 时间：2012-04-18T07:55:58.890
> 
> 标签：sql-server, dts, ssis

有谁知道如何在运行 DTS 2000 包时触发 SSIS 2008 包的执行？实际上，我的 DTS 2000 必须按原样运行，并且不能转换为 SSIS 2008。所以是否可以执行一个 shell 命令（Dtutil 等）来运行这个 SSIS 2008 包？

感谢您的反馈

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T08:14:10.133

我可以想到两种方法来做到这一点。

1.  使 DTS 执行成为 SQL 代理作业中的一个步骤，并通过运行存储过程启动该作业`sp_start_job`

2.  通过执行运行`xp_cmdshell`：

    `EXEC xp_cmdshell 'dtexec /f "C:\Package.dtsx"'`

选项二涉及配置 xp_cmdshell 以运行。xp_cmdshell 允许您通过 T-SQL 代码直接向 Windows 命令 shell 发出操作系统命令——我对此并不完全满意，所以我会选择选项 1。

一些有用的链接：

*   [sp_start_job](http://msdn.microsoft.com/en-us/library/ms186757.aspx)

*   [使用 T-SQL 中的存储过程执行 SSIS 包。](http://www.bidn.com/blogs/Anil/ssas/1487/execute-ssis-package-using-the-stored-procedure-in-t-sql)

*   [执行文件夹中的所有 SSIS 包：三种方法](http://www.simple-talk.com/content/print.aspx?article=270)

# sharepoint - 自定义文档库上的视图列表

> ID：10205229
> 
> 赞同：0
> 
> 时间：2012-04-18T07:56:04.387
> 
> 标签：sharepoint, view

是否可以根据您所在的网页自定义文档库上的视图列表？我计划在一个大型文档库上配置大约 500 个视图，但它不可能在 500 个视图之间导航......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:17:33.473

目前[还不清楚](https://stackoverflow.com/questions/3293299/moss-2007-maximum-number-of-views-for-one-list)一个列表可以有多少[视图。](http://go4answers.webhost4life.com/Example/maximum-number-views-imported-content-53241.aspx)我不确定我是否会在列表中添加 500 个视图，即使可以。

但是，Web 部件可以在其中内置自定义视图。例如，以下是我用于当前项目的 Web 部件的精简版本：

```
<WebPartPages:XsltListViewWebPart runat="server"
    Title="Large Document Library"
    ListUrl="LargeDocumentLibrary"
    ChromeType="TitleOnly"
    >
    <XmlDefinition>
       <View MobileView="TRUE" Type="HTML" Level="1">
           <Query>
                <Where>
                    <!-- Enter conditions here -->
                </Where>
            </Query>
           <ViewFields>
               <!-- Enter FieldRef elements here -->
           </ViewFields>
           <RowLimit Paged="TRUE">30</RowLimit>
       </View>
    </XmlDefinition>
    <parameterbindings>
       <ParameterBinding Name="dvt_sortdir" Location="Postback;Connection"/>
       <ParameterBinding Name="dvt_sortfield" Location="Postback;Connection"/>
       <ParameterBinding Name="dvt_startposition" Location="Postback" DefaultValue=""/>
       <ParameterBinding Name="dvt_firstrow" Location="Postback;Connection"/>
       <ParameterBinding Name="OpenMenuKeyAccessible" Location="Resource(wss,OpenMenuKeyAccessible)" />
       <ParameterBinding Name="open_menu" Location="Resource(wss,open_menu)" />
       <ParameterBinding Name="select_deselect_all" Location="Resource(wss,select_deselect_all)" />
       <ParameterBinding Name="idPresEnabled" Location="Resource(wss,idPresEnabled)" />
       <ParameterBinding Name="NoAnnouncements" Location="Resource(wss,noXinviewofY_LIST)" />
       <ParameterBinding Name="NoAnnouncementsHowTo" DefaultValue="" />
       <ParameterBinding Name="AddNewAnnouncement" Location="Resource(wss,addnewitem)" />
       <ParameterBinding Name="MoreAnnouncements" Location="Resource(wss,moreItemsParen)" />
    </parameterbindings>
</WebPartPages:XsltListViewWebPart> 
```

# ruby-on-rails - 验证时找不到 store_accessor 方法

> ID：10205231
> 
> 赞同：0
> 
> 时间：2012-04-18T07:56:08.033
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我有一个模型继承自另一个模型，具有 store 属性，有时，当我尝试保存子模型时，错误在哪里：

```
NoMethodError (undefined method `text' for #<Parent:0x00000007478ef0>) 
```

我的代码：

```
class Parent < ActiveRecord::Base
  store :data
end

class Child < Parent
  store_accessor :data, :text
  validates :text, :presence => true
end 
```

什么是问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:12:45.050

只需尝试在 Child 类中定义

```
class Child < Parent
  store :data, :text
  validates :text, :presence => true
end 
```

并从 Parent 类中删除商店定义，这根本没有意义。

# wpf - NuGet DependentUpon 文件

> ID：10205234
> 
> 赞同：1
> 
> 时间：2012-04-18T07:56:18.813
> 
> 标签：wpf, nuget

假设我有一个 WPF 控件，我想通过 NuGet 将其部署为源代码转换。

该控件有 2 个与之关联的文件：UserControl.xaml.cs 和 UserControl.xaml。

当我通过 NuGet 部署它时，我得到了目标项目中的文件，但它们在解决方案资源管理器中没有层次结构。这是因为 NuGet 不知道如何在 .csproj 文件中添加 DependentUpon 属性。

有解决方法吗？NuGet 的路线图中是否包含此功能？

谢谢塔尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:12:22.600

答案是 Powershell，特别是 Install.ps1 文件，如果放置在 NuGet 包的 /tools 文件夹中，它将在安装时自动执行。这是应该可以解决问题的代码：

```
    参数（$installPath，$toolsPath，$package，$project）

    $buildProject = @([Microsoft.Build.Evaluation.ProjectCollection]::GlobalProjectCollection.GetLoadedProjects($project.FullName))[0]  

    $file = $buildProject.Xml.Items | 其中包括 -eq "UserControl.xaml.cs"
    $propertyToEdit = $file.Metadata | 其中名称-eq“DependentUpon”

    if (!$propertyToEdit)
    {
        $file.AddMetaData("DependentUpon", "UserControl.xaml") | 外空
    }

    $project.Save()

```

您可能不会立即在 Visual Studio 界面中看到更改，但如果您卸载/重新加载或关闭/打开项目，您会看到它。

# javascript - 如何防止空格被 URL 编码为 `javascript:` URL？

> ID：10205235
> 
> 赞同：1
> 
> 时间：2012-04-18T07:56:19.187
> 
> 标签：javascript

我正在尝试将以下内容用作执行 javascript 的 URL：

```
javascript:var field = document.getElementsByName("actions[hide]"); + for (i = 0; i &lt; field.length; i++)field[i].click(); 
```

但是，当我将空格添加为书签时，空格会被 URL 编码，替换为`%20`，这（由于我不知道的原因）导致 JS 代码无法工作。

```
javascript:var%20field%20=%20unescape%20document.getElementsByName("actions[hide]");%20+%20for%20(i%20=%200;%20i%20&lt;%20field.length;%20i++)field[i].click(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:09:37.697

如果你想创建一个书签，我建议你这个网站：

[http://benalman.com/code/test/jquery-run-code-bookmarklet/](http://benalman.com/code/test/jquery-run-code-bookmarklet/)

据说它用于 jquery 代码，但您也可以使用此生成器转换普通的 javascript。或者您可以简化使用 jquery 并将您的代码从：

```
var field = document.getElementsByName("actions[hide]"); + for (i = 0; i < field.length; i++)field[i].click(); 
```

到

```
$('[name="actions[hide]"]').each(function() { $(this).click(); }); 
```

每次我创建一个新的书签时我都会使用这个脚本，我喜欢它

编辑：当你输入你的代码时，你必须粘贴它，而不是前面的“javascript：”文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:11:59.257

我也不明白您将 javascript 用作 url 方案的目的。
无论如何，如果您将该字符串放入浏览地址栏中以在当前网页中工作，则可能不会。
您可以尝试调用匿名函数：

```
<a href="javascript:(function() { var field = document.getElementsByName('actions[hide]'); for (var i = 0; i < field.length; i++) { field[i].click(); } })();">Click me</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T08:12:51.607

在 javascript 中编码空格：URI 不应该（根据我的经验也不应该）破坏脚本。问题很可能是您的`+`，它也是 URI 中的一个特殊字符（它也意味着一个空格），但浏览器不会自动转换该字符，因为该字符在 URI 中是允许的。

您需要将`+`字符编码为`%2B`（以及您在 JS 中可能具有的任何其他特殊字符）。

# parallel-processing - 经线中的 CUDA __syncthreads() 使用

> ID：10205245
> 
> 赞同：5
> 
> 时间：2012-04-18T07:56:55.397
> 
> 标签：parallel-processing, cuda, synchronization

如果一个块中的所有线程绝对需要在代码中的同一点，如果正在启动的线程数等于线程中的线程数，我们是否需要 __syncthreads 函数？

注意：没有额外的线程或块，只是内核的一个扭曲。

示例代码：

```
shared _voltatile_ sdata[16];

int index = some_number_between_0_and_15;
sdata[tid] = some_number;
output[tid] = x ^ y ^ z ^ sdata[index]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T10:00:52.677

**更新了有关使用 volatile 的更多信息**

大概您希望所有线程都在同一点，因为它们正在将其他线程写入的数据读取到共享内存中，如果您正在启动单个扭曲（在每个块中），那么您知道所有线程都在一起执行。从表面上看，这意味着您可以省略`__syncthreads()`，这种做法被称为“warp 同步编程”。但是，有一些事情需要注意。

*   请记住，编译器会假设它可以优化，只要线程内语义保持正确，包括延迟存储到内存中，数据可以保存在寄存器中。`__syncthreads()`充当对此的屏障，因此确保在其他线程读取数据之前将数据写入共享内存。使用`volatile`会导致编译器执行内存写入而不是保存在寄存器中，但是这有一些风险并且更像是一种黑客攻击（意味着我不知道这在未来会受到怎样的影响）
    *   从技术上讲，您应该始终使用`__syncthreads()`以符合 CUDA 编程模型
*   经线大小一直是 32，但您可以：
    *   在编译时使用`warpSize`设备代码中的特殊变量（记录在[CUDA Programming Guide](http://developer.nvidia.com/nvidia-gpu-computing-documentation)的“built-in variables”下，4.1 版本中的 B.4 节）
    *   在运行时使用 cudaDeviceProp 结构的 warpSize 字段（记录在[CUDA 参考手册](http://developer.nvidia.com/nvidia-gpu-computing-documentation)中）

请注意，一些 SDK 示例（特别是缩减和扫描）使用这种扭曲同步技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:15:55.870

`__syncthreads()`即使线程是并行执行的，您仍然需要。硬件中的实际执行可能不是并行的，因为一个 SM（Stream Multiprocessor）内的内核数量可能少于 32 个。例如，GT200 架构在每个 SM 中有 8 个内核，因此您永远无法确定所有线程都在代码中的同一点。

# c++ - 成员函数 & const 成员函数指针推导

> ID：10205248
> 
> 赞同：1
> 
> 时间：2012-04-18T07:57:11.327
> 
> 标签：c++, c++11, templates, member-function-pointers, template-argument-deduction

我有以下代码：

```
template <class Ret>
class Foo
{
public:
    template <class T>
    void foo(T&, const std::function<Ret()>&)
    {
        std::cout << "std::function<Ret()>\n";
    }
    template <class T>
    void foo(T&, Ret(T::*)() const)
    {
        std::cout << "Ret(T::*)() const\n";
    }
    template <class T>
    void foo(T&, Ret(T::*)())
    {
        std::cout << " Ret(T::*)()\n";
    }
};

class A
{
public:
    void foo1() const
    {
    }
    void foo()
    {
    }
};

 int main()
 {

     A a;
     Foo<void> f;
     f.foo(a, &A::foo);
     f.foo(a, &A::foo1);
     f.foo(a, std::bind(&A::foo, a));
 } 
```

它运作良好，但我不想为 const 和非常量成员函数指针有 2 个不同的函数。所以问题是：有没有办法合并 `void foo(T&, const std::function<Ret()>&)`一个`void foo(T&, Ret(T::*)() const)`函数？请注意，`std::function`合并后也应参与解决的重载。我需要一些只接受成员函数指针的函数。所有其他的都将进入`std::function`版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:11:51.730

您似乎在问一个隐含的问题和一个明确的问题。您的隐含问题“如何合并 const 和 nonconst 版本”的答案如下

```
template<typename T, typename U, typename enable_if<is_fuction<T>::value, int>::type = 0> 
void takesboth(T U::*); 
```

# maven - Ivy 解决版本来自 POM 父级的 POM 依赖项

> ID：10205253
> 
> 赞同：0
> 
> 时间：2012-04-18T07:57:29.177
> 
> 标签：maven, ivy, ivyde

使用来自 Eclipse (Helios) 的 Ivy 2.2 和 IvyDE 2.2....

想要引入 spring-data-neo4j，它的默认依赖项来自： [http ://maven.springframework.org/milestone/org/springframework/data/spring-data-neo4j/2.1.0.M1](http://maven.springframework.org/milestone/org/springframework/data/spring-data-neo4j/2.1.0.M1)

在我的常春藤文件中使用以下内容：

```
<dependency org="org.springframework.data" name="spring-data-neo4j" rev="2.1.0.M1"/> 
```

以及我的设置文件中的这些解析器：

```
<!-- Maven springframework data milestones -->
<url name="maven.springframework.data.milestone">
  <ivy pattern="http://maven.springframework.org/milestone/org/springframework/data/[module]/[revision]/[artifact]-[revision].[ext]" />
  <artifact pattern="http://maven.springframework.org/milestone/org/springframework/data/[module]/[revision]/[artifact]-[revision].[ext]" />
</url>

<!-- Maven springframework milestones -->
<url name="maven.springframework.data.milestone">
  <ivy pattern="http://maven.springframework.org/milestone/[organisation]/[module]/[revision]/[artifact]-[revision].[ext]" />
  <artifact pattern="http://maven.springframework.org/milestone/[organisation]/[module]/[revision]/[artifact]-[revision].[ext]" />
</url> 
```

只有 spring-data-neo4j 工件被拉下，没有提及常春藤控制台中的父级（调试级别）。看了以下建议： [http ://theholyjava.wordpress.com/2011/01/26/using-ivy-with-pom-xml/](http://theholyjava.wordpress.com/2011/01/26/using-ivy-with-pom-xml/)

但是感觉这仅适用于无法通过普通解析器访问的相对路径。查看 PomModuleDescriptorParser 代码，如果父模块为空，则它可能拥有的所有信息（如修订信息）都将被丢弃：

```
 if (parentDescr != null) {
   for (int i = 0; i < parentDescr.getDependencies().length; i++) {
     mdBuilder.addDependency(parentDescr.getDependencies()[i]);
   }
 } 
```

如果是这种情况：（1）我如何在日志中看到更多信息，（2）让 parseOtherPom 方法返回父级？

在此先感谢-马修

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T22:26:44.407

尝试以下**ivysettings.xml**文件：

```
<ivysettings>
    <settings defaultResolver="maven-repos"/>
    <resolvers>
        <chain name="maven-repos">
            <ibiblio name="central" m2compatible="true"/>
            <ibiblio name="spring-milestone" m2compatible="true" root="http://maven.springframework.org/milestone"/>
        </chain>
    </resolvers>
</ivysettings> 
```

[ibiblio](http://ant.apache.org/ivy/history/latest-milestone/resolver/ibiblio.html)解析器是配置 Maven 存储库的最佳方式。

# slickgrid - Slick Grid - 列表框点击次数过多

> ID：10205254
> 
> 赞同：0
> 
> 时间：2012-04-18T07:57:30.797
> 
> 标签：slickgrid

我们在 slickgrid 列中定义了一个列表框。我们有一个问题，要从列表框中选择一个选项，我们首先必须选择单元格，然后才能从列表框中选择选项。因此，用户需要两次点击而不是一次。我们需要做什么才能让用户一键打开列表框来选择所需的值。

我们使用以下单元格格式化程序和编辑器来显示列表框：

格式化程序：

```
function SelectCellFormatter(row, cell, value, columnDef, dataContext) {
    opt_values = columnDef.options.split(',');
    option_str = "";
    for( i in opt_values ){ 
        v = opt_values[i]; 
        if(v == value)
        {
            option_str += "<OPTION value='"+v+"' selected>"+v+"</OPTION>";
        }
        else
        {
            option_str += "<OPTION value='"+v+"'>"+v+"</OPTION>";
        }
    } 
    return "<SELECT tabIndex='0' class='editor-select'>"+ option_str +"</SELECT>"
} 
```

编辑：

```
SelectCellEditor : function(args) {
    var $select;
    var defaultValue;
    var scope = this;

    this.init = function() {

        if(args.column.options){
            opt_values = args.column.options.split(',')
        } else {
            opt_values ="yes,no".split(',');
        }
        option_str = ""
        for( i in opt_values ){
            v = opt_values[i];
            option_str += "<OPTION value='"+v+"'>"+v+"</OPTION>";
        }
        $select = $("<SELECT tabIndex='0' class='editor-select'>"+ option_str +"</SELECT>");
        $select.appendTo(args.container);
        $select.focus();
    };

    this.destroy = function() {
        $select.remove();
    };

    this.focus = function() {
        $select.focus();
    };

    this.loadValue = function(item) {
        defaultValue = item[args.column.field];
        $select.val(defaultValue);
    };

    this.serializeValue = function() {
        if(args.column.options){
            return $select.val();
        } else {
            return ($select.val() == "yes");
        }
    };

    this.applyValue = function(item,state) {
        item[args.column.field] = state;
    };

    this.isValueChanged = function() {
        return ($select.val() != defaultValue);
    };

    this.validate = function() {
        return {
            valid: true,
            msg: null
        };
    };

    this.init();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T21:07:01.097

首先，您在格式化程序和编辑器中实现了相同的控件。这没有任何用处。

其次，SlickGrid 架构不太适合在单元格中使用丰富的可编辑控件。SlickGrid 设计为仅在单元格切换到编辑模式时才加载它们（我不会在这里详细说明其背后的原因）。

正如@njr 指出的那样，您可以设置“自动编辑”选项以使单元格立即进入编辑模式，尽管这不会在第一次单击时“打开”组合框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T16:39:34.217

解决方案是只使用格式化程序而不是编辑器。现在单击会按预期打开列表框然后使用格式化程序的 onChange 方法可以执行所需的逻辑。

唯一的问题是我们无法为新行定义格式化程序。我们设置 enableAddRow : false，并使用插入按钮添加新行。

格式化程序：

```
function SelectCellFormatter(row, cell, value, columnDef, dataContext) {
    opt_values = columnDef.options.split(',');
    option_str = "";
    for( i in opt_values ){ 
        v = opt_values[i]; 
        if(v == value)
        {
            option_str += "<OPTION value='"+v+"' selected>"+v+"</OPTION>";
        }
        else
        {
            option_str += "<OPTION value='"+v+"'>"+v+"</OPTION>";
        }
    } 
    return "<SELECT onchange='SelectCellFormatter_onchange(this, "
       + row + "," + cell + ",\"" + value + "\");'>"+ option_str + "</SELECT>"
} 
```

选择CellFormatter：

```
function SelectCellFormatter_onchange(vThis, vRow, vCell, vValue)
{
     document.protokoll_form.protokoll_name.value += " row/" + vRow;
     document.protokoll_form.protokoll_name.value += " cell/" + vCell;
     document.protokoll_form.protokoll_name.value += " old/" + vValue;
     document.protokoll_form.protokoll_name.value += " new/" 
            +  vThis[this.event.currentTarget.selectedIndex].value;
} 
```

# machine-learning - 为什么斯坦福主题建模工具包确定的 30 个主题彼此如此相似？

> ID：10205256
> 
> 赞同：1
> 
> 时间：2012-04-18T07:57:34.417
> 
> 标签：machine-learning, stanford-nlp, text-analysis, lda

斯坦福主题建模工具包（Stanford Topic Modeling Toolkit）在 19,500 篇文章（由 Twitter 用户共享）的语料库中确定的 30 个主题（耗时约 4 小时）彼此如此相似的可能原因是什么？他们有几乎相同的术语，频率=>本质上，我只有一个主题:)

确定的主题可以在[这里找到](http://www.cs.princeton.edu/~asuleime/data/summary.txt)

我在学习和推断阶段之前对文本文档进行标准准备：删除停用词、折叠空格、小写所有内容等。

我的一些参数：

*   主题数 = 30
*   TermMinimumDocumentCountFilter = (10) ~> // 过滤出现在 < 10 个文档中的术语
*   TermDynamicStopListFilter(30) ~> // 过滤掉 30 个最常用的术语
*   DocumentMinimumLengthFilter(10) // 只接受 >= 10 个词条的文档
*   topicSmoothing = SymmetricDirichletParams(0.01)
*   termSmoothing = SymmetricDirichletParams(0.01)
*   最大迭代次数 = 10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:57:44.560

我会说因为你的方法似乎有缺陷。原始字数具有固有的偏见，这是语言的特征，尽管要挖掘什么主题。

例如，对主题相似度*没有*影响但会使您的结果产生偏差的单词：

```
very
well
good 
```

而在处理对其他细节的引用时*故意*模糊的其他词

```
data
media
web
users
those 
```

而其他词只是常用的动词或副词

```
need
going
think
know
want 
```

其他是知名的行业品牌名称

```
apple
twitter 
```

在您可以构建一个词频映射到特定主题的可验证模型之前，您所做的只是一些数据收集，一些挥手（而不是反假设反驳），并跳到您的原始前提是正确的结论。

重构你的分类来捕捉主题而不是单词，然后建立一个模型来描述主题之间的距离，然后尝试表明在提供的 30 个主题中，实际上只有 29 个（或更少）“距离”足够大的主题独自站立。

因为，从用户那里收集数据非常好，但是对数据的需求仅次于对能够知道想要什么的好数据的需求。（那句话是有意构建的，它有很高的 Standford Topic Modeling Toolkit “字数”，但可能不是一个*相似的主题*）

# node.js - 多个客户端更新相同的服务器模型？

> ID：10205259
> 
> 赞同：1
> 
> 时间：2012-04-18T07:57:56.023
> 
> 标签：node.js, models

如何从所有不同的客户端向服务器模型发送更新并保持对该模型的更改有序？如何处理在相似时间对模型进行的更改？

感谢您的任何想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:01:38.640

也许您可以为每个更新请求附加一个时间戳，服务器将负责保持这些更新的顺序。

# java - How to create custom annotation with code behind

> ID：10205261
> 
> 赞同：42
> 
> 时间：2012-04-18T07:58:02.430
> 
> 标签：java, dependency-injection, interface, annotations

I would like to create my own custom annotation. My framework is Stand alone java application. When someone annotate his pojo class a "hidden" code behind will trigger methods.

For example, today in Java EE we have `@MessageDriven` annotation. And when you annotate your class with `@MessageDriven` and in addition implement MessageListener Interface there is a behind code that will trigger `onMessage(Message msg)`. when a message arrives from a Queue/Topic.

How Do I create annotation(`@MyMessageDriven`) which could be added to a pojo and also implement `MyCustomMessageListener`.

The result which I desire is a trigger of "hidden" code (of mine) which will trigger a method of an implemented interface (exactly as it works with the sample i Wrote below).

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-18T08:21:57.363

I recommend to read [this blog entry (snapshot on archive.org)](https://web.archive.org/web/20160731020727/http://techo-ecco.com/blog/spring-custom-annotations/) up to the point where the author remembers (s)he has access to Spring's component scan feature.

The initial issue is to scan the class path to find classes with the custom annotation. Once this is done, you have the objects in your standalone application through which using [`object.getClass().getAnnotations()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getAnnotations()), you can then inject the listeners or custom behavior you need to add to the objects holding the custom annotations.

Let's say you have the following custom annotation:

```
@Target({ ElementType.TYPE })
@Retention(RetentionPolicy.RUNTIME)
public @interface MyMessageDriven {} 
```

And you use it some class in you application:

```
@MyMessageDriven
public class MyObject {} 
```

Now, in the appropriate location in your application, you should have a method to give out all classes carrying `MyMessageDriven`:

```
Set<Class<?>> findAllMessageDrivenClasses() {
  final StopWatch sw = new StopWatch();
  sw.start();
  final Reflections reflections = new Reflections("org.projectx", new TypeAnnotationsScanner());
  Set<Class<?>> allMessageDrivens = reflections.getTypesAnnotatedWith(MyMessageDriven.class); // NOTE HERE
  sw.stop();
  return allMessageDrivens;
} 
```

Having this, I assume that there is a point in your application that either (1) you have access to the objects in your application, or (2) there is a visitor or iterator pattern on all the objects in the application. So, in some point, I assume that we have all targeted objects as `objects`:

```
Set<Class<?>> msgDrivenClasses = findAllMessageDrivenClasses();
for (Object o : objects) {
  if (msgDrivenClasses.contains(o.getClass()) {
    invokeTheMessageListener(o);
  }
} 
```

On the other hand, there should be some implementation of `MyMessageListener` that is available when the objects having `MyMessageDriven` are found:

```
void invokeTheMessageListener(Object o) {
  theMessageListener.onMessage(o);
} 
```

This answer is tailored from the blog entry so please refer to the blog for configuration of libraries. And, last but not least, this is a sample code for the problem and it can be refactored to more pattern-compatible and elegant style.

**Update**: There is a requirement that the *targeted* objects should be aware of their own listeners. So, I'd suggest the following approach. Let's have an interface `MyMessageListenerAware`:

```
interface MyMessageListenerAware {
  MyMessageListener getMyMessageListener();
}

// and this is the original MyMessageListener
interface MyMessageListener {
  void onMessage(Object o);
} 
```

Now, the target objects should implement the above interface:

```
class MySampleObject implements MyMessageListenerAware {

  public MyMesssageListener getMyMessageLisener() {
    return mySampleObjectImplementationOfMyMessageListener;
  }

} 
```

Having this, the method `invokeTheMessageListener` becomes like:

```
void invokeMessageListener(Object o) {
  if (o instance MyMessageListenerAware) {
    MyMessageListener l = ((MyMessageListenerAware) o).getMyMessageListener();
    l.onMessage(o);
  }
} 
```

**Although**, I strongly recommend reading about [Visitor](http://en.wikipedia.org/wiki/Visitor_pattern) or [Strategy](http://en.wikipedia.org/wiki/Strategy_pattern) pattern. What you aim to do seems to me like you need certain objects react/act/process to a common object/event in the application but *each* with their own interpretation/algorithm/implementation.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-18T08:44:04.977

create an annotation something like this:

```
 public @interface MyMessageDriven{
 } 
```

And you have an interface that can apply annotation like this:

```
public interface MyMessagListener {

    public void message();
}

@MyMessageDriven  
public class MyMessage implements MyMessagListener  {
   public void message(){
     System.out.println(" I am executed")
   }
} 
```

Load the above class using classloader and using reflections check the annotation is presrent.

if it is present, use loaded instance to execute it.

```
 Object obj = ClassLoader.getSystemClassLoader().loadClass("MyMessage").newInstance();
  MyMessagListener mml =  (MyMessagListener) obj;
  mml.message(); 
```

Listener implementation you can put in MyMessage class or some other class that implements MessageListener.

In this case, need to provide implementation for `message()` what it is going to do.

But this class should be loaded and more important thing here is how your MyMessage class is loaded.

That is based on the meta data present in the MyMessage class.Similar way, in the real time scenario as well this is how it works.

Annotation is a metadata to a class that says based on the supplied data, do something.Had this metadata not present in the MyMessage class, you need not execute `message()` method.

Hope this will help you.

# c# - 从 gridview 更新数据表

> ID：10205264
> 
> 赞同：0
> 
> 时间：2012-04-18T07:58:12.633
> 
> 标签：c#, asp.net

我的项目中有一个场景我有一个生成动态行的网格视图和提交按钮，还有一个图像按钮`Edit`可以编辑这些行，这些行首先与数据表绑定，当我们点击保存按钮时，所有反映数据表保存中的更改在数据库中没有`Update`按钮

问题：

如何将先前编辑的行保存到`DataTable`事件中？

请帮助其紧急

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:26:10.650

将 CommandName 和 CommandArgument 放在您的 linkBut​​ton 上，并将您的保存代码放在 ItemCommand() 中，这样 GridView 应该可以工作。哦，命令名称应该类似于“更新”，并且参数可以是该行的 Id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:38:50.493

声明一个数据表，向其中添加列以表示我要从网格保存到数据库中的表的所有数据。遍历网格中的行，从要保存的每个单元格中获取数据并将其添加到数据表中的每一列。使用数据表对数据库中的表进行批量插入。

```
    数据表 dtMealTemplate = new DataTable();
    dtMealTemplate.Columns.Add("MealTemplateID", Type.GetType("System.Int32"));
    dtMealTemplate.Columns.Add("WeekNumber", Type.GetType("System.Int32"));
    dtMealTemplate.Columns.Add("DayOfWeek", Type.GetType("System.String"));
    foreach（GridView.Rows 中的 GridViewRow gvr）
    {
     drMT = dtMealTemplate.NewRow();
     drMT["MealTemplateID"] = gvr.Cells[0].text;
     drMT["WeekNumber"] = gvr.Cells[1].text;
     drMT["DayOfWeek"] = gvr.Cells[2].Text;
     dtMealTemplate.Rows.Add(drMT);
    }

     公共无效InsertMealsTemplate（int iMealTemplateID，DataTable dtMealsData）
     {
    SqlCommand cmd = 新的 SqlCommand();
    SqlDataAdapter sa = new SqlDataAdapter(cmd);
    SqlCommandBuilder cmb = new SqlCommandBuilder(sa);
    SqlTransaction oTrans;
    SqlConnection oConn = new SqlConnection(GetConnectionString());
    数据集 ds = new DataSet();
    oConn.Open();
    cmd = oConn.CreateCommand();
    oTrans = oConn.BeginTransaction();
    cmd.Connection = oConn;
    cmd.Transaction = oTrans;
    cmd.CommandType = CommandType.Text;
    cmd.CommandText = "SELECT * FROM YOURTABLENAME WHERE 1 = 1";
    sa = 新的 SqlDataAdapter(cmd);
    cmb = new SqlCommandBuilder(sa);
    sa.MissingSchemaAction = MissingSchemaAction.AddWithKey;
    cmd.Transaction = oTrans;
    sa.Fill(ds, "yourtablename");
    数据行 drNew；
    诠释 x = 0;
    foreach（dtMealsData.Rows 中的 DataRow dr）
    {
    if (Int32.Parse(dr["MealDetailsID"].ToString()) == 0)
       {
        drNew = ds.Tables[0].NewRow();
        drNew["MealTemplateID"] = dr["MealTemplateID"];
        drNew["WeekNumber"] = dr["WeekNumber"];
        drNew["DayOfWeek"] = 博士["DayOfWeek"];
        ds.Tables[0].Rows.Add(drNew);
        }
    }
    sa.Update(ds.Tables["yourtablename"]);
    oTrans.Commit();
    oConn.Close();
    }

```

# c# - 从本地主机和在线 asp.net 发送电子邮件

> ID：10205268
> 
> 赞同：4
> 
> 时间：2012-04-18T07:58:27.343
> 
> 标签：c#, asp.net, email, smtp, localhost

我知道如何在 C# 代码中通过 smtp 发送电子邮件

如果我设置了 gmail smtp，它在 localhost 中可以正常工作，但是当我上传并使其在线时，gmail (smtp.gmail.com) 设置不起作用。上传后我每次都必须在godaddy将设置更改为（relay-hosting.secureserver.net）

现在我的问题是！有什么办法可以找出我是在代码中还是在线的本地主机上然后动态更改设置我将我的设置存储在数据库中我的工作代码是

```
mm.LoadByPrimaryKey(4);//get body , subject etc from db
  mc.LoadByPrimaryKey(1);// get settings from db (host, from , port etc)

 var maTo = new MailAddress(strEmail, userName);
    var mMailMessage = new MailMessage
                           {
  Subject = mm.Subject,
  Body = strBody,
  IsBodyHtml = true,
  Priority = MailPriority.High,
  From =new MailAddress(mc.AdminEmailAddress),
  DeliveryNotificationOptions=      DeliveryNotificationOptions.OnFailure
                           };
    mMailMessage.To.Add(maTo);
    var mSmtpClient = new SmtpClient
                                 {
             UseDefaultCredentials = false,
             Host = mc.Host,
             Credentials = CredentialCache.DefaultNetworkCredentials,
             DeliveryMethod = SmtpDeliveryMethod.Network};
             mSmtpClient.Send(mMailMessage); 
```

我不想每次都更改我的设置，无论是在线还是在本地主机环境中开发
我想要这个流程以及我如何知道我的应用程序在线或代码后面的本地主机

```
if(myconnection ==localhost) then fetch gmail credentials 
else if (myconnection==online) then fetch godaddys credentials 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T08:02:19.817

为什么不使用 Web.Config？

```
<system.net> 
<mailSettings> 
<smtp from="YYYYY@xxxxxx.com"> 
<network 
host="mail.xxxxxx.com" 
port="25" 
password="password" 
userName="user@xxxxxx.com" 
defaultCredentials="false" 
/> 
</smtp> 
</mailSettings> 
</system.net> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T08:18:21.463

**参考：** [确定 ASP.NET 应用程序是否在本地运行](https://stackoverflow.com/questions/691881/determine-if-asp-net-application-is-running-locally)以及[Request.IsLocal 的安全性如何？](http://forums.asp.net/p/1065813/4081335.aspx)

> 根据评论检查`localhost`使用 `HttpContext.Current.Request.IsLocal`属性的最佳方法。它与 Request.IsLocal 与检查 127.0.0.1 或 ::1 相同。

用这个：

```
bool isLocal = HttpContext.Current.Request.IsLocal;

if(isLocal) then fetch gmail credentials 
else if (myconnection==online) then fetch godaddys credentials 
```

通过 gmail 发送邮件的示例代码片段是：

```
SmtpClient mailClient = new SmtpClient(); 
            //This object stores the authentication values      
            System.Net.NetworkCredential basicCredential = 
                new System.Net.NetworkCredential("username@mydomain.com", "****"); 
            mailClient.Host = "smtp.gmail.com"; 
            mailClient.Port = 587; 
            mailClient.EnableSsl = true; 
            mailClient.DeliveryMethod = SmtpDeliveryMethod.Network; 
            mailClient.UseDefaultCredentials = false; 
            mailClient.Credentials = basicCredential; 

            MailMessage message = new MailMessage(); 

            MailAddress fromAddress = new MailAddress("info@mydomain.com", "Me myself and I "); 
            message.From = fromAddress; 
            //here you can set address    
            message.To.Add("to@you.com"); 
            //here you can put your message details 

            mailClient.Send(message); 
```

如果这些设置与配置匹配，那么您绝对可以通过 gmail 发送邮件。

检查您的这部分设置。

```
 NetworkCredential NetCrd = new NetworkCredential(youracc, yourpass);   
  smtpClient.UseDefaultCredentials = false;    
  smtpClient.Credentials = NetCrd; 
```

**编辑**

按照这些链接，这些不是您问题的确切原因，而是在您的本地计算机上解决此问题的指南：
[我可以接收邮件，但不能从我在 Windows Live Mail 中设置的帐户](http://answers.microsoft.com/en-us/windowslive/forum/livemail-sync/i-can-receive-mail-but-not-send-from-an-account-i/5fd32347-5970-443a-86d2-ad7ef4df8709)
[发送邮件 在本地计算机上使用 gmail 帐户发送电子邮件](https://stackoverflow.com/questions/4690354/sending-email-using-gmail-account-on-local-machine)

[另一个方面是，您可以使用HttpRequest 类](http://msdn.microsoft.com/en-us/library/h55b6cak.aspx) [HttpRequest.UserHostAddress 属性](http://msdn.microsoft.com/en-us/library/system.web.httprequest.userhostaddress.aspx)检查本地机器 ip 或机器名称以找出远程服务器上的网站或您自己的机器上的网站。

如果 Ip 与 ip 请求对象匹配，则将 ip 地址返回到您的机器地址。

```
if (ip match to your machine)// local host else run your remote settings 
```

Ref:
[Request.UserHostName](http://HttpRequest.UserHostName%20Property)
[如何在 C# 中获取机器的 IP 地址](https://stackoverflow.com/questions/2019431/how-to-get-the-ip-address-of-a-machine-in-c-sharp)
[获取远程 IP 地址或机器名称](https://stackoverflow.com/questions/4260975/get-remote-ip-address-or-machine-name)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T10:57:36.683

如果您只想检查您是否在 localhost 上运行，那么您可以执行以下操作：

```
if (Request.UrlReferrer.DnsSafeHost.ToLower() == "localhost")
{
  // Do it the gmail way
}
else
{
  // Use the online stuff
} 
```

这样做的好处是您不需要检查实际的 URL，除非您愿意（因此您不需要更改任何配置文件或任何东西）。

我已经在“愤怒”中使用了它，并且效果很好。

显然，关于在您的实时代码中存储 gmail 凭据的问题是一个单独的问题，不是您问题的一部分。实际上，我认为您说您将它们存储在数据库中，这很好。

**编辑：**当我使用它时，我会检查它是否`Request.UrlReferrer.DnsSafeHost`是我的实际活动域，以防止有人从不同来源发布到我的页面的简单攻击。

如果您只是想检查您在哪里运行而不关心您是如何到达那里的（不一定是一个好主意），您可以使用`Request.Url.DnsSafeHost`.

# c# - Using textbox or checkbox depending on the type of an attribute

> ID：10205271
> 
> 赞同：4
> 
> 时间：2012-04-18T07:58:35.527
> 
> 标签：c#, wpf

If I have this structure:

```
public class Parent
{
  public string Name{get; set;}
  public List<Child> Childs {get; set;}
}

public class Child
{
  public string Name{get; set;}
  public int Age {get; set;}
  public bool Married {get; set;}
}

public class ParentFactory
{
   public List<Parent> Parents {get; set;}

   public ParentFactory()
   {
      Child child1 = new Child() {Name="Peter", Age=10, Married=true};
      Child child2 = new Child() {Name="Mary", Age=9, Married=false};
      Child child3 = new Child() {Name="Becky", Age=12, Married=true};

      Parent parent1 = new Parent(){Name="Adam", Childs = new List<Child>(){child1, child2}};
      Parent parent2 = new Parent(){Name="Kevin", Childs = new List<Child>(){child3}};

      Parents = new List<Parent>(){parent1, parent2};
   }
} 
```

I want to bind the object `ParentFactory parentFactory = new ParentFactory()` to ItemsControl:

```
<DockPanel>
    <ItemsControl ItemsSource="{Binding Parents}">
    </ItemsControl>
</DockPanel>

 <Window.Resources>
     <DataTemplate DataType="{x:Type Parent}">
         <StackPanel Margin="2,2,2,1">
              <Expander Header="{Binding Name}">
                  <ItemsControl ItemsSource="{Binding Childs}" />
              </Expander>
         </StackPanel>
     </DataTemplate>
        <DataTemplate DataType="{x:Type Child}">
            <StackPanel>
                    <TextBox Grid.Column="0" Text="{Binding Name}" />
                    <TextBox Grid.Column="1" Text="{Binding Age}"/>
                    <CheckBox Grid.Column="2" IsChecked="{Binding Married}"/>
            </StackPanel>
        </DataTemplate>
 </Window.Resources> 
```

In the Stackpanel, there are two types of controls: TextBox and CheckBox. However, I want them to be more dynamic: if the value is a boolean then use a Checkbox and else use a Textbox. That means I dont need to define the control either TextBox or Checkbox inside the StackPanel due to a numerous attributes in my Child class. Would it be possible, and if yes, how can I achieve them?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T08:31:35.753

您可以`DataTemplate`动态更改

# Xaml

```
 <DataTemplate>
                    <DataTemplate.Resources>
                        <DataTemplate x:Key="Condition1"></DataTemplate>
                        <DataTemplate x:Key="Condition2"></DataTemplate>
                    </DataTemplate.Resources>                    
                </DataTemplate>
                    <ContentPresenter x:Name="ContentField"
                                      Content="{Binding}"
                                      ContentTemplate="{StaticResource ResourceKey=Condition1}" /> 
                    <DataTemplate.Triggers>
                        <DataTrigger Binding="{Binding Path=IsMarried}" Value="True">
                            <Setter TargetName="ContentField" Property="ContentTemplate" Value="{StaticResource ResourceKey=Condition2}" />
                        </DataTrigger>
                    </DataTemplate.Triggers> 
```

确保正确设置绑定......并制作`DataTemplates`for`Condition1`和`Condition2`

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T08:58:00.660

我已经根据我从您的问题中了解到的情况做了一个解决方案。请看一看。该示例基于 DataTrigger，您可以将逻辑更改为 Converter。

```
<Window x:Class="StackAnswers.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525"
    xmlns:t="clr-namespace:StackAnswers">

<Window.Resources>
    <DataTemplate DataType="{x:Type t:Parent}">
        <StackPanel Margin="2,2,2,1">
            <Expander Header="{Binding Name}">
                <ItemsControl ItemsSource="{Binding Childs}" />
            </Expander>
        </StackPanel>
    </DataTemplate>
    <DataTemplate DataType="{x:Type t:Child}">
        <StackPanel>
            <TextBlock Text="{Binding Name}"></TextBlock>
            <TextBox Grid.Column="0"
                     Text="{Binding Name}">
                <TextBox.Style>
                    <Style TargetType="{x:Type TextBox}">
                        <Setter Property="Visibility"
                                Value="Collapsed" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Married}" Value="false">
                                <Setter Property="Visibility"
                                        Value="Visible" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBox.Style>
            </TextBox>
            <TextBox Grid.Column="1"
                     Text="{Binding Age}">
                <TextBox.Style>
                    <Style TargetType="{x:Type TextBox}">
                    <Setter Property="Visibility"
                            Value="Collapsed" />
                    <Style.Triggers>
                            <DataTrigger Binding="{Binding Married}"
                                     Value="false">
                            <Setter Property="Visibility"
                                    Value="Visible" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
                    </TextBox.Style>
            </TextBox>
            <CheckBox Grid.Column="2"
                      IsChecked="{Binding Married}" Content="Married">
                <CheckBox.Style>
                    <Style TargetType="{x:Type CheckBox}">
                        <Setter Property="Visibility"
                                Value="Collapsed" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Married}" Value="True">
                                <Setter Property="Visibility"
                                        Value="Visible"></Setter>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </CheckBox.Style>
            </CheckBox>
        </StackPanel>
    </DataTemplate>

</Window.Resources>
<DockPanel>
    <ItemsControl ItemsSource="{Binding Parents}">
    </ItemsControl>
</DockPanel> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T08:18:02.047

看看这篇文章：[http](http://www.drwpf.com/blog/Home/tabid/36/EntryID/24/Default.aspx) ://www.drwpf.com/blog/Home/tabid/36/EntryID/24/Default.aspx 我认为这是你需要的：

```
<Page
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:sys="clr-namespace:System;assembly=mscorlib">
  <Page.Resources>
    <DataTemplate DataType="{x:Type sys:Boolean}">
      <CheckBox IsChecked="{Binding Mode=OneWay}" />
    </DataTemplate>
  </Page.Resources>
  <ItemsControl Width="100" Height="100">
    <sys:Int32>30</sys:Int32>
    <sys:DateTime>12/16/1970</sys:DateTime>
    <sys:Boolean>True</sys:Boolean>
    <sys:Boolean>False</sys:Boolean>
    <sys:String>Foo</sys:String>
  </ItemsControl>
</Page> 
```

# ruby-on-rails - 在实例或类方法中使用 Time.zone.now.to_date？

> ID：10205280
> 
> 赞同：0
> 
> 时间：2012-04-18T07:59:15.397
> 
> 标签：ruby-on-rails

如果我在关联上定义的类方法中有以下代码。然后该值会被缓存还是仅适用于范围？

```
def for_today
  where 'planned_for = ?', Time.zone.now
end 
```

为了澄清，如果我使用范围执行以下操作， Time.zone.now 值将与缓存类时的值相同，我想确保上述情况不会发生或如何解决它。

```
scope :for_today, where('planned_for = ?', Time.zone.now) 
```

因此，编写使用动态值的范围的正确方法是使用 lambda

```
scope :for_today, lambda { where('planned_for = ?', Time.zone.now) } 
```

我是否需要为类或实例方法做类似的事情，如果是这样，那到底是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:25:45.233

不，该值不会为类和实例方法缓存，因此您可以安全地使用它们。根据经验：对于简单的条件使用`scope`，对于更复杂的情况，使用类方法。

此外，在默认配置下，存储在数据库中的所有时间都是 UTC，因此您可以使用 Time.now，因为它将自动转换为 UTC。

# objective-c - 在 UIViewController 中一次滚动所有帧

> ID：10205281
> 
> 赞同：0
> 
> 时间：2012-04-18T07:59:23.647
> 
> 标签：objective-c, ios, uiviewcontroller

我有`UIViewController`哪个包含`UIImageView`和`UITextView`。我以编程方式添加的所有视图（及其框架）。`UIImageView`小且位于顶部，`UIViewController`但`UITextView`大且超出屏幕。滚动仅在 TextView 中起作用。我怎样才能为所有人滚动`UIViewController`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:06:06.857

您需要添加到 UIViewController 的视图`UIScrollView`和内部，`UIImageView`并设置 UIScrollView 的属性适当的值。`UITextView``UIScrollView``contentSize`

# memory - Measuring kernel memory usage of a FUSE-based application

> ID：10205282
> 
> 赞同：1
> 
> 时间：2012-04-18T07:59:24.067
> 
> 标签：memory, linux-kernel, fuse

I'm designing a FUSE-based file-system for an embedded system, thus under strict memory constraints. The path of data is long between an application calling fwrite and the actual FUSE-based application, and several copies of data are performed in the Kernel.

I would like to measure the amount of memory that is reserved in the Kernel space for FUSE to transfert the data, either through some tools that could allow me to do that (on Linux 2.6), or thanks to any good documentation.

Thanks

# jquery - Div 不使用 jquery 加载

> ID：10205288
> 
> 赞同：1
> 
> 时间：2012-04-18T07:59:38.797
> 
> 标签：jquery, html

我的 div 加载/淡出有问题。这是我的 html。

```
<div id="email_response">
<div id="email_loader">
    <img src="/img/ajax_load.gif.pagespeed.ce.sBYFmTTK7I.gif">
</div> 
```

jQuery：

```
 $("#email_loader").html("<img src='http://example.com/img/ajax_load.gif' />");

    $("#email_response").fadeIn(500);
$.get("http://example.com/inc_appdl_main_api.php", {
        to : to,
        app_id : FA.appID
    }, function(data) {
        if (data.length > 0) {
                         $("#email_loader").html(data);
             $("#email_response").delay(1000).fadeOut(500);   
        }

    });
         setTimeout ( "FA.iframeClose()", 2000 ); 
```

div email_response 应该加载/淡入半秒..然后应该从 jquery 获得响应..然后结束包含所有 html 标记的 iframe 应该关闭..

除了获取成功函数中的代码之外，一切都有效..我知道成功函数实际上是被触发的..因为服务器（php）代码做了它的工作！！！

有什么问题？我没有看到响应消失..成功函数中的代码不起作用:(

```
if (data.length > 0) {
                     $("#email_loader").html(data);
             $("#email_response").delay(1000).fadeOut(500);   
        } 
```

更新：这是我在控制台中得到的。触发 GET 函数后。

```
XMLHttpRequest cannot load http://example.com/inc_appdl_main_api.php?to=makovetskiyd%40yahoo.co.uk&app_id=81\. Origin http://api.example.com is not allowed by Access-Control-Allow-Origin. 
```

html 标记和 javascript 位于一个 iframe 中，上面有另一个站点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:14:51.420

访问控制允许来源。您正在访问域外的内容？[跨域请求与 jquery](http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/)，[跨域 ajax 查询与 jquery](http://jquery-howto.blogspot.com/2009/04/cross-domain-ajax-querying-with-jquery.html)

# html - 与在 IE9 中不起作用的 iframe 目标的链接

> ID：10205290
> 
> 赞同：1
> 
> 时间：2012-04-18T07:59:53.217
> 
> 标签：html

我们的 Intranet 上的页面在 IE7、8 和 FF 上运行良好，但在 IE9 中无法运行。

我们有一个包含一组链接的页面和一个包含 SSRS 报告的 iframe，在单击各个链接时，它应该通过将 target 属性设置为 iframe 的名称来将 iframe 的内容更改为链接的 href。这不适用于 IE9 链接不会更改 iframe 的内容。

这应该在 IE9 中工作还是我需要找到另一种让它工作的方法？

链接

```
<li><a id="lnkAllMatchtech" href="http://SSRSserver/report1" target="graph">Report 1</a></li>
<li><a id="HyperLink5" href="http://SSRSserver/report2" target="graph">Report 2</a></li>
<li><a id="HyperLink1" href="http://SSRSserver/report3" target="graph">Report 3</a></li> 
```

框架

```
<iframe src="http://SSRSserver/report1" name="graph" height="260" width="340" /> 
```

更新：看起来这可能与传递给 SSRS 报告的查询字符串参数有关。

我们有一个像

```
?%2fGeneris+Report+Server%2fIntranetStats&Sector=Barclay+Meade&rs%3aParameterLanguage=&rc%3aParameters=Collapsed&rc%3aToolbar=False 
```

如果我删除所有 &rs 和 &rc 参数，它会起作用，尽管它会显示我不想要的工具栏和参数框！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:44:02.500

好吧，这浪费了我一天的大部分时间，无法找到解决参数问题的方法，我遇到了网上建议的另一种解决方案。

将我的 iframe 切换为对象标签并添加这个小 jquery 片段来更改对象标签的内容

```
 <script type="text/javascript">
        $(document).ready(function() {

            $("a").click(function() {

                $("#graph").attr('data', this.href);
                return false;
            });

        });
</script>

  <object id="graph" name="graph" type="text/html" data="http://SSRSServer/report1"
                    height="260" width="340" ></object> 
```

# c++ - tr1/normal_distribution: No such file or directory

> ID：10205292
> 
> 赞同：2
> 
> 时间：2012-04-18T08:00:11.257
> 
> 标签：c++, gcc, cmake, tr1

I'm trying to use TR1 for some C++ project. Unfortunately I get an error and don't understand why or how I should do it correctly! I'm working under Linux with gcc 4.4.5.

I get the error

```
myfile.cpp:21:35: error: tr1/normal_distribution: No such file or directory 
```

The TR1 file I need is imported via:

```
#include <tr1/normal_distribution> 
```

in CMakeLists.txt I turn on TR1 support (-std=c++0x)

```
SET (CMAKE_CXX_FLAGS "-Wall -std=c++0x -DNDEBUG -O3 -march=nocona -msse4.2") 
```

Any idea what I'm doing wrong?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T08:06:42.257

该标志`-std=c++0x`使您可以访问在您的 gcc 版本中实现的任何 c++11 功能。对于随机数分布，c++11 有 header `random`。`tr1`使用 c++11 时不需要命名空间。

random的`tr1`版本在 include`tr1/random`中，所有内容都在`std::tr1`命名空间下。要访问它，您不需要`c++0x`标志。

要清楚：

对于 TR1 随机数：`#include <tr1/random>`并使用`std::tr1::normal_distribution`.

对于 c++11 随机数：使用 flag 编译`c++0x`，然后`#include <random>`使用`std::normal_distribution`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T08:03:24.287

我相信它的`#include <random>`。无论如何，检查一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-10T11:50:09.153

尝试将以下标志添加到 CMakeLists.txt 上的 cxx：

```
set (CMAKE_CXX_FLAGS "-stdlib=libstdc++") 
```

`-std=c++0x`没有必要

# python - Database storage: Why is Pipeline better than Feed Export?

> ID：10205294
> 
> 赞同：7
> 
> 时间：2012-04-18T08:00:28.840
> 
> 标签：python, database, export, scrapy, pipeline

This is a question about [scrapy](http://scrapy.org).

When storing items in a database, why is conventional to implement via a pipeline rather than the Feed Export mechanism?

[Feed Exports - Output your scraped data using different formats and storages](http://doc.scrapy.org/en/0.14/topics/feed-exports.html#feed-exports)

> One of the most frequently required features when implementing scrapers is being able to store the scraped data properly

[Item Pipeline - Post-process and store your scraped data](http://doc.scrapy.org/en/0.14/topics/item-pipeline.html#item-pipeline)

> Typical use for item pipelines are... storing the scraped item in a database

What's the difference, pros/cons between the two, and (why) is the pipeline more suitable?

Thx

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-04-28T16:19:29.030

这是一个太晚的答案。但我只是花了一个下午和一个晚上的时间试图了解*项目管道*和*饲料出口*之间的区别，这是记录不充分的。而且我认为这对仍然感到困惑的人会有所帮助。

*TL;DR：* FeedExport 旨在将项目导出为文件。它完全不适合数据库存储。

Feed 导出是作为 scrapy in 的扩展实现的`scrapy.extensions.feedexport`。这样，就像scrapy中的其他扩展一样，它反过来通过注册回调函数来实现一些scrapy信号（`open_spider`，`close_spider`和`item_scraped`），以便它可以采取必要的步骤来存储项目。

当`open_spider`, `FeedExporter`（实际的扩展类）初始化提要存储和项目导出器时。具体步骤包括从 a 获取一个通常是临时文件的类文件对象并将其`FeedStroage`传递给`ItemExporter`. 时`item_scraped`，`FeedExporter`只需调用一个预先初始化的`ItemExporter`对象`export_item`。时`close_spider`，`FeedExporter`调用`store`前一个`FeedStorage`对象的方法将文件写入文件系统，上传到远程 FTP 服务器，上传到 S3 存储等。

有一组内置的项目导出器和存储。但正如您从上面的文字中可能注意到的那样，`FeedExporter`它在设计上与文件存储紧密耦合。使用数据库时，存储项目的常用方法是在数据被抓取后立即将其插入数据库（或者您可能需要一些缓冲区）。

因此，使用数据库存储的正确方法似乎是编写自己的`FeedExporter`. 您可以通过注册对scrapy信号的回调来实现它。但这不是必须的，使用 item pipeline 更直接，不需要了解这些实现细节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T10:19:59.753

据我所理解：

管道是一个通用的解决方案——你建立数据库连接，你知道数据库结构，你检查重复项——你可以控制存储抓取项目的所有过程。

导出器是存储抓取数据的预定义方式。[报价](http://doc.scrapy.org/en/0.14/topics/exporters.html#using-item-exporters)：

> 如果您赶时间，只想使用 Item Exporter 输出抓取的数据，请参阅 Feed 导出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T09:43:17.773

如果您可以使用默认格式，Feed Export 将非常有用。如果您需要自定义格式，则必须编写自定义导出器，这比简单地将数据存储在管道中要多。

# python - Error in a minimal tkSimpleDialog example

> ID：10205295
> 
> 赞同：11
> 
> 时间：2012-04-18T08:00:28.600
> 
> 标签：python, tkinter

I was trying out a python code example at [Rosetta Code](http://rosettacode.org/wiki/User_input/Graphical#Python) - a [programming chrestomathy](http://en.wikipedia.org/wiki/Chrestomathy) site, where solutions to the same task are presented in as many different programming languages as possible. For this task, the goal is to input a string and the integer 75000, from graphical user interface. The code is shown below:

```
import tkSimpleDialog

number = tkSimpleDialog.askinteger("Integer", "Enter a Number")
string = tkSimpleDialog.askstring("String", "Enter a String") 
```

However, when I try to run the code, I get the following error:

```
Traceback (most recent call last):
  File "C:\Users\vix\Documents\.cache\GUIexample.py", line 3, in <module>
    number = tkSimpleDialog.askinteger("Integer", "Enter a Number")
  File "C:\Python27\lib\lib-tk\tkSimpleDialog.py", line 262, in askinteger
    d = _QueryInteger(title, prompt, **kw)
  File "C:\Python27\lib\lib-tk\tkSimpleDialog.py", line 189, in __init__
    Dialog.__init__(self, parent, title)
  File "C:\Python27\lib\lib-tk\tkSimpleDialog.py", line 53, in __init__
    if parent.winfo_viewable():
AttributeError: 'NoneType' object has no attribute 'winfo_viewable' 
```

Where could the problem be?

Thanks

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-18T14:08:36.703

错误消息告诉您该对话框需要一个父窗口。

使用 Python 2.x，您可以使用以下命令创建根窗口：

```
import tkinter
from tkinter import simpledialog
root = tkinter.Tk() 
```

如果您不想隐藏根窗口，请使用：

```
root.withdraw() 
```

有关更多信息，请参阅[Python Tkinter 文档](http://docs.python.org/library/tkinter.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:47:25.103

我从来没有使用过`askinteger`，但从错误消息来看，看起来对话框需要知道它的父级，但你并没有告诉它它的父级应该是什么。尝试添加`parent=widget`（其中“小部件”是对其他小部件的引用——通常是根小部件）。我找不到任何说明这是必需的文档，但我猜这是因为除了根窗口之外的所有 Tkinter 小部件都需要有一个父级。

如果您在问题中显示的代码是完整的代码，那么您会遗漏一些其他内容。您需要创建`Tk`该类的一个实例（称为“根”窗口），并且您需要启动事件循环（不过，对话框可能会运行它自己的事件循环，所以如果您需要的只是单个对话框）。

# c# - 使用 ASP.Net Web 表单和 C# 的站点导航/面包屑

> ID：10205298
> 
> 赞同：0
> 
> 时间：2012-04-18T08:00:49.837
> 
> 标签：c#, asp.net, sql-server, webforms, breadcrumbs

我正在一个网站上工作，该网站的页面与父子关系排列在一个表中。页面深度可以达到任何级别，我想根据数据库为网站生成 BreadCrumb。示例数据和数据字段如下图所示。

基本表结构类似于 TableName **Web_Pages**

表列 **（PageID int、PageName Varchar、PageInternalLinkURL Varchar、PageInheritance int）**

**表中样本数据示例** ![表数据示例](../Images/b3957c1b1d02e5cb63a5290b344271a5.png)

**页面上的面包屑示例** ![页面上的面包屑示例](../Images/363dede4575024b183ab01277e4f4a69.png)

我希望网站导航的面包屑看起来类似于下面的示例图像中显示的内容。

我尝试了几个星期，但无法做到正确。

我想在没有站点地图的情况下使用它，而是想以语法方式创建它并将*PageName*字段与正确的页面 URL 链接。

我想这样做，以便在将页面添加到 CMS 时动态创建可以与任何页面深度一起使用的面包屑。

我使用了无法正常工作的 CTE 查询。如果有人解决此问题或可以指出与我的类似的完整工作示例，我将不胜感激。

测试 CTE 不起作用

```
SELECT * FROM pg_Pages;
WITH RecursiveTable (PageId, PageInheritance, Level)
AS
(
   --Anchor
    SELECT      tt.PageId,  tt.PageInheritance,  0 AS Level
    FROM pg_Pages AS tt
    WHERE PageInheritance = 0
    UNION ALL
    --Recursive member definition
    SELECT  tt.PageId, tt.PageInheritance, LEVEL + 1
    FROM pg_Pages AS PageId
        INNER JOIN RecursiveTable rt ON
        tt.PageInheritance = rt.PageId
)
SELECT * 
FROM RecursiveTable 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:22:54.907

看起来您的 CTE 是错误的 - 您快到了，但递归成员定义位看起来错误。

尝试：

```
SELECT * FROM pg_Pages;
WITH RecursiveTable (PageId, PageInheritance, Level)
AS
(
   --Anchor
    SELECT      tt.PageId,  tt.PageInheritance,  0 AS Level
    FROM pg_Pages AS tt
    WHERE PageInheritance = 0
    UNION ALL
    --Recursive member definition
    SELECT  tt.PageId, tt.PageInheritance, Level + 1
    FROM pg_Pages AS tt
        INNER JOIN RecursiveTable rt ON
        tt.PageInheritance = rt.PageId
)
SELECT * 
FROM RecursiveTable
--SELECT * FROM RecursiveTable WHERE Level = 0 
```

在您最初的尝试中，您的 pg_Pages 别名必须是 tt （并且您还需要在 PageInheritance 前面加上 tt 前缀）。

否则，它看起来很好。

编辑

对于您的其他问题，您只需添加其他列：

```
SELECT * FROM pg_Pages;
WITH RecursiveTable (PageId, PageName, PageInternalLink, PageInternalLinkUrl, PageInheritance, Level)
AS
(
   --Anchor
    SELECT      tt.PageId,  tt.PageName, tt.PageInternalLink, tt.PageInternalLinkUrl, tt.PageInheritance,  0 AS Level
    FROM pg_Pages AS tt
    WHERE PageInheritance = 0
    UNION ALL
    --Recursive member definition
    SELECT  tt.PageId,  tt.PageName, tt.PageInternalLink, tt.PageInternalLinkUrl, tt.PageInheritance, Level + 1
    FROM pg_Pages AS tt
        INNER JOIN RecursiveTable rt ON
        tt.PageInheritance = rt.PageId
)
SELECT * 
FROM RecursiveTable
--SELECT * FROM RecursiveTable WHERE Level = 0 
```

进一步编辑：

好的，做你想做的，你可以把查询转过来；如果您知道页面 ID：

```
DECLARE @PageId int
SET @PageId = 39;
WITH RecursiveTable (PageId, PageName, PageInternalLink, PageInternalLinkUrl, PageInheritance, Level)
AS(
   --Anchor
    SELECT      tt.PageId,  tt.PageName, tt.PageInternalLink, tt.PageInternalLinkUrl, tt.PageInheritance,  0 AS Level
    FROM TestPage AS tt
    WHERE PageId = @PageId
    UNION ALL
   --Recursion
    SELECT tt.PageId,  tt.PageName, tt.PageInternalLink, tt.PageInternalLinkUrl, tt.PageInheritance, Level + 1
    FROM TestPage AS tt
    INNER JOIN RecursiveTable rt ON rt.PageInheritance = tt.PageId
)
SELECT * FROM RecursiveTable ORDER BY Level DESC 
```

我们在这里所做的是从您所在的页面开始，然后通过表格向后工作以寻找所有父母。在这种情况下，级别最高的记录是最终父项，因此我们按降序逐级排序以反映这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:40:09.613

假设您要检索 pageId 39 的面包屑，您可能需要尝试以下操作：

```
declare @pageId int

set @pageId=39;
WITH RecursiveTable (PageId,PageName, PageInheritance,PageInternalLinkURL, Level)
AS
(
   --Anchor
    SELECT      tt.PageId,tt.PageName,  tt.PageInheritance,tt.PageInternalLinkURL,  0 AS Level
    FROM pg_pages AS tt
    WHERE PageID = @pageId
    UNION ALL
    --Recursive member definition
    SELECT  tt.PageId,tt.PageName,  tt.PageInheritance,tt.PageInternalLinkURL, Level + 1
    FROM pg_pages AS tt
        INNER JOIN RecursiveTable rt ON
        rt.PageInheritance = tt.PageId
)
SELECT * 
FROM RecursiveTable 
```

# mysql - MySQL 中的索引和使用主键作为索引

> ID：10205301
> 
> 赞同：14
> 
> 时间：2012-04-18T08:01:07.403
> 
> 标签：mysql, indexing, primary-key

我`Assets`在 InnoDB 引擎上有一个表，定义为：

```
CREATE TABLE Assets (
qid SMALLINT(5) NOT NULL,
sid BIGINT(20) NOT NULL AUTO_INCREMENT,
...
PRIMARY KEY (sid,qid),
KEY sid (sid)
); 
```

我正在运行以下查询：

```
SELECT COUNT(*) FROM Assets WHERE sid>10000; 
```

在我的机器上，这个查询大约需要 30 秒，表中有 200 万个条目。现在，如果我修改查询以使用索引，结果会有很大差异：

```
SELECT COUNT(*) FROM Assets USE INDEX(<index>) WHERE sid>10000; 
```

*   `NO INDEX`：无显式`USE INDEX`，即第一次`SELECT`查询：**30 秒**
*   `KEY sid (sid)`: **1.5 秒**
*   `KEY cid (sid,qid)`: **1.5 秒**
*   `PRIMARY`: 我用`USE INDEX(PRIMARY)`内查询。: **30 秒**

所以这些是我的问题：

1.  我认为一个查询会自动使用主键作为它的索引，基于[这个](https://stackoverflow.com/questions/7485578/is-there-any-benefit-to-creating-and-index-on-a-primary-key)。`USE INDEX (cid)`然而和之间有一个主要区别`NO INDEX`。有什么不同？另外，我如何明确地将主键作为索引？

2.  如果`NO INDEX`实际上不使用主键作为索引，那是`USE INDEX(PRIMARY)`什么导致它具有与 相同的运行时间`NO INDEX`？

3.  仅过滤的查询之间`USE INDEX(sid)`和之间是否存在差异（不仅仅是性能方面）？`USE INDEX(cid)``sid`

原谅这篇长文，但我想让它公开讨论。

* * *

好的，这是我到目前为止发现的：

首先，我被告知密钥设置应该是:`PRIMARY KEY(qid,sid), KEY(sid)`或`PRIMARY KEY(sid,qid), KEY(qid)`. 我真的不明白其中的区别。如果有人这样做，请告诉我。

其次，KEY `sid`( `sid`) 引用的索引页数远少于较大的键，因此它往往更快。至于使用 PRIMARY KEY 作为索引和正确的 KEY（即使它们使用相同的字段）之间的区别，我被告知它是这样的：

主键使用主键的字段索引整个表数据。这意味着 PRIMARY KEY 和数据存储在一起。因此，使用 PRIMARY KEY 的查询将不得不遍历整个表数据，即使是索引也会在大型不可缓存的表上陷入困境。

使用离散键，行数可能相同，但扫描的索引（由指示的字段组成）要小得多，它会命中较少数量的磁盘块，因此运行得更快。我假设这也是使用`USE INDEX(cid)`和使用主键作为索引不同的原因，两者都具有相同的字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T00:19:48.947

根据我的经验，拥有一个索引是另一个索引的子集往往会减慢速度。但是您的里程可能会有所不同，因为在处理索引时您必须考虑很多事情..

例如，如果您经常阅读并且很少更改数据，那么拥有许多索引可能会帮助您更多；如果您的操作涉及大量插入/更新/删除，那么索引过多可能会减慢您的速度。

如果您的主键是 (sid, qid)，那么我认为不适合拥有另一个键 (sid)，引擎可能会将其检索为 PK 的前缀。如果我要利用它，我宁愿在 qid 上添加一个索引 - 也就是说，如果我在该字段上有一些查询过滤或排序，或者如果我在该字段上有一些 JOIN..

至于主键上的字段顺序，我通常会尝试确定它们在查询中的使用方式：如果我的所有查询都使用 sid，而有些查询同时使用 sid 和 qid，则选择 (sid,qid)；如果他们都使用qid并且只有一些也使用sid，则选择(qid, sid)；如果他们碰巧使用 sid 或 qid，则有一个 PK (sid, qid) 和另一个密钥 (qid)，以便使用这两个字段的查询将使用您的 PK，仅使用 sid 的查询也会发生同样的情况，最后仅使用 qid 的用户将使用 (qid) 键。

我只是对使用（主要）强制mysql不使用索引有点困惑，但这可能是与你的mysql版本相关的东西（错误？）。

在这里你可以找到一些关于索引提示的提示：http: [//dev.mysql.com/doc/refman/5.1/en/index-hints.html](http://dev.mysql.com/doc/refman/5.1/en/index-hints.html)

一般来说，尽量不要过多地使用索引提示，优化器通常会做得很好！如果不是，则可能某处存在缺陷，或者它只是认为表扫描更快，因为索引的选择性不够。

此外，您有时可能需要表优化来刷新索引统计信息。但由于您使用的是 InnoDB，因此可能并非如此...

高温高压

# c# - 为什么我不能以相同的方式初始化对象（不使用 ref）？

> ID：10205302
> 
> 赞同：2
> 
> 时间：2012-04-18T08:01:09.957
> 
> 标签：c#, .net, out, ref

我想`B`从另一个类初始化一个类型的对象`A`，为什么我仍然得到 null？`ref`不使用和`out`修饰符可以做到吗？

```
 class A
    {
        public void Initialize(B value)
        {
            if (value == null)
            {
                value = new B();
            }
        }
    }

    class B
    {

    }

    class Program
    {
        static void Main(string[] args)
        {
            A a = new A();
            B b = null;
            a.Initialize(b);
        }
    } 
```

[更新。]我认为`b`变量可以通过，`ref`因为它是类的实例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T08:04:45.987

有可能，只需将 Initialize() 设为一个函数：

```
class A
{
    public B Initialize(B value)
    {
        if (value == null)
        {
            value = new B();
        }
        return value;
    }
} 
```

并称它为：

```
 static void Main(string[] args)
    {
        A a = new A();
        B b = null;
        b = a.Initialize(b);
    } 
```

这是一个很好的解决方案，数据流清晰可见。没有惊喜。

但除此之外，只需使用`ref` (不是`out`) :`public void Initialize(ref B value)`并调用`a.Initialize(ref b);`

* * *

> 我认为 b 变量可以通过 ref 传递，因为它是类的实例。

要回答这个问题，您需要非常精确的措辞：`b`不是类*的*实例。`b`是对实例的引用。实例永远没有名字。

并且`b`被视为值类型：引用按值传递给方法。除非你使用`ref`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T08:04:50.510

`public void Initialize(B value)`

在这个方法里面，`value`就像一个局部变量，当你给它赋值时，调用者不受影响。

> 是否可以在不使用 ref 和 out 修饰符的情况下做到这一点？

不，不是这样，这就是 ref/out 的用途。

不过，您可以只返回新对象，并将其分配给调用者。

```
 public B Initialize() {
     return new B();
  }

... 
  b = a.Initialize(); 
```

# android - onRestoreInstanceState 中的 NullPointerException

> ID：10205306
> 
> 赞同：4
> 
> 时间：2012-04-18T08:01:24.923
> 
> 标签：android, nullpointerexception, instance, fragment, actionbarsherlock

`SwiperActivity`下面，扩展`SherlockFragmentActivity`自 ActionBarSherlock 4.0.2 库。我只能在加载大量不同的应用程序，然后在 ICS 4.0.3 OTA 上的 Asus Eee Pad Transformer TF101 以及 ICS 4.0.4 OTA 上的 Galaxy Nexus 上切换回来后才能得到这个。我不确定这是否显然是 ICS 4.0.3 错误（它似乎与此处的 ICS 源代码匹配[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google。 android/android/4.0.3_r1/com/android/internal/policy/impl/PhoneWindow.java#PhoneWindow.getPanelState%28int%2Cboolean%29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/com/android/internal/policy/impl/PhoneWindow.java#PhoneWindow.getPanelState%28int%2Cboolean%29)）。

我也在 ActionBarSherlock 4.0.0 和 4.0.1 上得到了这个。

我不是压倒一切`onRestoreInstanceState`或任何实例或状态。

（我还记录了每个被覆盖的 Activity 方法的第一行，例如“ `SwiperAct.onCreate 0`”和最后的“ `SwiperAct.onCreate 99`”，以尝试查明是哪个方法导致了这种情况。）

```
04-16 14:30:57.710: D/dalvikvm(667): GC_CONCURRENT freed 2692K, 71% free 8750K/30023K, paused 2ms+4ms
04-16 14:30:58.140: D/dalvikvm(667): GC_CONCURRENT freed 120K, 69% free 9362K/30023K, paused 3ms+4ms
04-16 14:30:58.480: D/dalvikvm(667): GC_CONCURRENT freed 16K, 67% free 10207K/30023K, paused 4ms+5ms
04-16 14:31:00.700: D/dalvikvm(18313): Late-enabling CheckJNI
04-16 14:31:00.700: I/ActivityManager(557): Start proc com.company.appname for activity com.company.appname/.SwiperActivity: pid=18313 uid=10011 gids={3003, 1015}
04-16 14:31:00.720: D/WindowManager(557): readLidState, sw:1
04-16 14:31:00.720: D/WindowManager(557): adjustConfigurationLw, config:{1.0 0mcc0mnc (no locale) layoutdir=0 sw800dp w1280dp h752dp xlrg land ?uimode ?night finger qwerty/v/v -nav/v} mLidOpen:1 mHasDockFeature:true mHasHallSensorFeature:true config.hardKeyboardHidden:1
04-16 14:31:00.730: D/OpenGLRenderer(18274): Flushing caches (mode 1)
04-16 14:31:00.730: D/dalvikvm(18313): Debugger has detached; object registry had 1 entries
04-16 14:31:00.900: D/OpenGLRenderer(18274): Flushing caches (mode 0)
04-16 14:31:00.950: D/OpenGLRenderer(667): Flushing caches (mode 0)
04-16 14:31:00.970: E/SwiperAct.onCreate 0(18313): starting...
04-16 14:31:00.980: D/SwiperAct.onSingleUse 0(18313): starting...
04-16 14:31:01.050: D/SQLiteUtil(18313): create DatabaseOpenHelper instance
04-16 14:31:01.050: D/SQLiteUtil(18313): create DatabaseOpenHelper instance
04-16 14:31:01.080: V/SQLiteOpenHelper(18313): onOpen()
04-16 14:31:01.100: V/SQLiteOpenHelper(18313): onOpen()
04-16 14:31:01.100: D/SwiperAct.onSingleUse 99(18313): ending...
04-16 14:31:01.120: D/dalvikvm(18313): GC_CONCURRENT freed 209K, 5% free 6728K/7047K, paused 4ms+2ms
04-16 14:31:01.190: E/SwiperAct.onCreate 99(18313): ending...
04-16 14:31:01.200: D/AndroidRuntime(18313): Shutting down VM
04-16 14:31:01.200: W/dalvikvm(18313): threadid=1: thread exiting with uncaught exception (group=0x40a7b1f8)
04-16 14:31:01.200: E/AndroidRuntime(18313): FATAL EXCEPTION: main
04-16 14:31:01.200: E/AndroidRuntime(18313): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.company.appname/com.company.appname.SwiperActivity}: java.lang.NullPointerException
04-16 14:31:01.200: E/AndroidRuntime(18313):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
04-16 14:31:01.200: E/AndroidRuntime(18313):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-16 14:31:01.200: E/AndroidRuntime(18313):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-16 14:31:01.200: E/AndroidRuntime(18313):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-16 14:31:01.200: E/AndroidRuntime(18313):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-16 14:31:01.200: E/AndroidRuntime(18313):    at android.os.Looper.loop(Looper.java:137)
04-16 14:31:01.200: E/AndroidRuntime(18313):    at android.app.ActivityThread.main(ActivityThread.java:4424)
04-16 14:31:01.200: E/AndroidRuntime(18313):    at java.lang.reflect.Method.invokeNative(Native Method)
04-16 14:31:01.200: E/AndroidRuntime(18313):    at java.lang.reflect.Method.invoke(Method.java:511)
04-16 14:31:01.200: E/AndroidRuntime(18313):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-16 14:31:01.200: E/AndroidRuntime(18313):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-16 14:31:01.200: E/AndroidRuntime(18313):    at dalvik.system.NativeStart.main(Native Method)
04-16 14:31:01.200: E/AndroidRuntime(18313): Caused by: java.lang.NullPointerException
04-16 14:31:01.200: E/AndroidRuntime(18313):    at com.android.internal.policy.impl.PhoneWindow$PanelFeatureState.onRestoreInstanceState(PhoneWindow.java:3341)
04-16 14:31:01.200: E/AndroidRuntime(18313):    at com.android.internal.policy.impl.PhoneWindow.restorePanelState(PhoneWindow.java:1663)
04-16 14:31:01.200: E/AndroidRuntime(18313):    at com.android.internal.policy.impl.PhoneWindow.restoreHierarchyState(PhoneWindow.java:1619)
04-16 14:31:01.200: E/AndroidRuntime(18313):    at android.app.Activity.onRestoreInstanceState(Activity.java:906)
04-16 14:31:01.200: E/AndroidRuntime(18313):    at android.app.Activity.performRestoreInstanceState(Activity.java:878)
04-16 14:31:01.200: E/AndroidRuntime(18313):    at android.app.Instrumentation.callActivityOnRestoreInstanceState(Instrumentation.java:1100)
04-16 14:31:01.200: E/AndroidRuntime(18313):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
04-16 14:31:01.200: E/AndroidRuntime(18313):    ... 11 more
04-16 14:31:01.200: W/ActivityManager(557):   Force finishing activity com.company.appname/.SwiperActivity
04-16 14:31:01.500: D/dalvikvm(18313): GC_CONCURRENT freed 177K, 4% free 7027K/7303K, paused 1ms+3ms
04-16 14:31:01.610: D/dalvikvm(18313): GC_CONCURRENT freed 114K, 3% free 7455K/7623K, paused 6ms+3ms
04-16 14:31:01.740: D/dalvikvm(18313): GC_CONCURRENT freed 117K, 3% free 7900K/8071K, paused 3ms+3ms
04-16 14:31:01.750: D/WindowManager(557): readLidState, sw:1
04-16 14:31:01.750: D/WindowManager(557): adjustConfigurationLw, config:{1.0 0mcc0mnc (no locale) layoutdir=0 sw800dp w1280dp h752dp xlrg land ?uimode ?night finger qwerty/v/v -nav/v} mLidOpen:1 mHasDockFeature:true mHasHallSensorFeature:true config.hardKeyboardHidden:1
04-16 14:31:01.750: W/ActivityManager(557): Activity pause timeout for ActivityRecord{41568e50 com.company.appname/.SwiperActivity} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:48:52.340

我不能因为它的工作而泄露源代码 - 但是我已经做了一些重命名并将其剥离。但是，在将其剥离到我怀疑导致错误的部分并启用导致错误的行之后，错误不再发生！

所以这个源代码只是为了给任何经历过这个的人一个线索，去哪里看。此代码实际上不会触发错误。

onCreate 调用 showSingleUse，它产生一个 SingleUseFragment，它在活动中调用 onSingleUse（因为它实现了一个名为 OnFragmentUtilityListener 的接口）。onSingleUse 然后调用一个 AsyncTask，它在其 onPreExecute 中执行 findViewById。

禁用 findViewById 并将其移至 onCreate 即可解决问题。

**SwiperActivity.java：**

```
import android.os.AsyncTask;
import android.os.Build;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.widget.TextView;
import com.actionbarsherlock.app.SherlockFragmentActivity;

public class SwiperActivity extends SherlockFragmentActivity implements OnFragmentUtilityListener {
TextView textviewLastUpdated; // this is how the NPE was fixed
ReloadTask reloadTask;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    textviewLastUpdated = (TextView) findViewById(R.id.textviewLastUpdated); // this is how the NPE was fixed
    showSingleUse(this);
}
public static void showSingleUse(FragmentActivity activity) {
    try {
        if (activity.getSupportFragmentManager().findFragmentByTag("singleusefragment") == null) {
            activity.getSupportFragmentManager().beginTransaction().add(new SingleUseFragment(), "singleusefragment").commit();
        }
    } catch (IllegalStateException e) {}
}
@Override
public void onSingleUse() {
    startReloadTask();
}
private class ReloadTask extends AsyncTask<Void, Void, Void> {
    @Override
    protected void onPreExecute() {
        showLoading();
    }
    @Override
    protected Void doInBackground(Void... arg0) {
        return null;
    }
    @Override
    protected void onPostExecute(Void result) {
        hideLoading();
    }
}
public static boolean allowsExecutorChange() {
    return Build.VERSION.SDK_INT > 10;
}
void startReloadTask() {
    reloadTask = new ReloadTask();
    if (allowsExecutorChange()) {
        reloadTask.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
    } else {
        reloadTask.execute();
    }
}
void showLoading() {
    // this was causing the NPE!
    //TextView textviewLastUpdated = (TextView) findViewById(R.id.textviewLastUpdated);
    if (textviewLastUpdated!=null) textviewLastUpdated.setText("Loading...");
}
void hideLoading() {
    // this was causing the NPE!
    //TextView textviewLastUpdated = (TextView) findViewById(R.id.textviewLastUpdated);
    if (textviewLastUpdated!=null) textviewLastUpdated.setText("Loaded!");
}
@Override
public void onDismissedDialog(String tag, Object data) {}
@Override
public void onClickedPositiveDialog(String tag, Object data) {} 
```

}

**OnFragmentUtilityListener.java：**

```
public interface OnFragmentUtilityListener {
public void onDismissedDialog(String tag, Object data);
public void onClickedPositiveDialog(String tag, Object data);
public void onSingleUse();
} 
```

**SingleUseFragment.java：**

```
/** hack-ish way to detect rotation and not do it again */
public class SingleUseFragment extends Fragment {
boolean wasRotating = false;
@Override
public void onActivityCreated(Bundle state) {
    super.onActivityCreated(state);
    setRetainInstance(true);
}
static SingleUseFragment newInstance() {
        return new SingleUseFragment();
    }
@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    if (!wasRotating) ((OnFragmentUtilityListener) activity).onSingleUse();
}
@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    wasRotating = true;
}
} 
```

# python - python亚马逊产品广告api

> ID：10205308
> 
> 赞同：1
> 
> 时间：2012-04-18T08:01:32.707
> 
> 标签：python, amazon-web-services, amazon

我对 python 和 amazon 产品 api 相对较新，并尝试为 kickstart 执行一些示例，但我尝试了所有方法，但对 item_lookup 只获得了 None：

```
AWS_KEY = '...'
SECRET_KEY = '...'

root = api.item_search('Books', Publisher='Galileo Press',AssociateTag='associatetag')

import xml.dom.minidom
def minidom_response_parser(fp):
   root = xml.dom.minidom.parse(fp)
   # parse errors
   for error in root.getElementsByTagName('Error'):
      code = error.getElementsByTagName('Code')[0].firstChild.nodeValue
      msg = error.getElementsByTagName('Message')[0].firstChild.nodeValue

   return root
api = API(AWS_KEY, SECRET_KEY, 'uk', processor=minidom_response_parser) 
```

当我尝试“print root.toprettyxml()”时出现 NoneType 对象异常

即使我累了 root = api.item_lookup('9780131872486',AssociateTag='associatetag')

可以请任何人告诉我我到底缺少什么...

提前致谢

# android - 如何检测电子邮件是否通过Android中的应用程序发送？

> ID：10205309
> 
> 赞同：0
> 
> 时间：2012-04-18T08:01:34.270
> 
> 标签：android

我已经从我的应用程序启动了电子邮件活动..我的问题是我如何知道是否发送了电子邮件

```
try {

    Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
    emailIntent.setType("text/html"); 
    emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,"Check out this play from http://www.iplaybook.net iPlayBook ");
    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,"This play was created using<a href='http://www.iplaybook.net'> iPlayBook.</a>");
    final PackageManager pm = getPackageManager();
    @SuppressWarnings("static-access")
    final List<ResolveInfo> matches = pm.queryIntentActivities(emailIntent, pm.MATCH_DEFAULT_ONLY);
    ResolveInfo best = null;
    for (final ResolveInfo info : matches)
    {
        if (info.activityInfo.name.toLowerCase().contains("mail"))
            best = info;
    }
    if (best != null)
    {
        emailIntent.setClassName(best.activityInfo.packageName, best.activityInfo.name);
        startActivit(emailIntent);
    }
}
catch(Exception e) { }

} 
```

请帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:29:09.303

您无法从 android 确认电子邮件是否已发送。电子邮件的实际发送在设计上是异步的，因此活动可能会在电子邮件实际发送之前返回。

[请在发布新问题之前搜索 SO 中的问题](https://stackoverflow.com/questions/4443148/how-to-wait-for-email-intent-to-finish-and-get-result)

干杯， RJ

# web-services - 由于以下错误，检索具有 CLSID {BDEADF26-C265-11D0-BCED-00A0C90AB50F} 的组件的 COM 类工厂失败：80040154

> ID：10205314
> 
> 赞同：1
> 
> 时间：2012-04-18T08:02:08.880
> 
> 标签：web-services, sharepoint-2010

我正在尝试编写一个 Web 服务，该服务在给定其两列列表的名称的情况下在共享点站点中创建一个新列表。当我构建解决方案时，我没有收到任何错误，但是当我尝试通过客户端程序使用它时，我收到以下异常：

```
System.Web.Services.Protocols.SoapException: Server was unable to process request. ---> System.Runtime.InteropServices.COMException (0x80040154): Retrieving the COM class factory for component with CLSID {BDEADF26-C265-11D0-BCED-00A0C90AB50F} failed due to the following error: 80040154.
   at Microsoft.SharePoint.Library.SPRequest..ctor()
   at Microsoft.SharePoint.SPGlobal.CreateSPRequestAndSetIdentity(SPSite site, String name, Boolean bNotGlobalAdminCode, String strUrl, Boolean bNotAddToContext, Byte[] UserToken, String userName, Boolean bIgnoreTokenTimeout, Boolean bAsAnonymous)
   at Microsoft.SharePoint.SPRequestManager.GetContextRequest(SPRequestAuthenticationMode authenticationMode)
   at Microsoft.SharePoint.Administration.SPFarm.get_RequestAny()
   at Microsoft.SharePoint.SPSecurity.GetCurrentUserTokenNoApplicationPrincipalDelegated()
   at Microsoft.SharePoint.SPSecurity.GetCurrentUserToken()
   at Microsoft.SharePoint.SPSecurity.EnsureOriginatingUserToken()
   at Microsoft.SharePoint.SPSecurity.RunWithElevatedPrivileges(WaitCallback secureCode, Object param)
   at Microsoft.SharePoint.SPSecurity.RunWithElevatedPrivileges(CodeToRunElevated secureCode)
   at CreaListaDatoNome.Service1.CreaLista(String nomeLista, String field1, String field2) in C:\Users\Administrator\documents\visual studio 2010\Projects\CreaListaDatoNome\CreaListaDatoNome\Service1.asmx.cs:line 24
   --- End of inner exception stack trace --- 
```

现在，这是 Web 服务的代码：

```
namespace CreaListaDatoParametri
{

    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    public class Service1 : System.Web.Services.WebService
    {
        [WebMethod]
        public void CreaLista(string lista, string colonna1, string colonna2)
        {
            SPSecurity.RunWithElevatedPrivileges(delegate()
            {
                using (SPSite site = new SPSite("http://sp2010devid/sites/Chapter2/"))
                {
                    using (SPWeb web = site.OpenWeb())
                    {
                        site.AllowUnsafeUpdates = true;
                        web.AllowUnsafeUpdates = true;

                        // Create a new list
                        string description = "The list " +lista+ " was created via a web service";
                        Guid idNuovaLista = web.Lists.Add(lista, description, web.ListTemplates["Custom List"]);

                        //Modify the structure
                        SPList nuovaLista = web.Lists[idNuovaLista];
                        nuovaLista.OnQuickLaunch = true;
                        nuovaLista.EnableFolderCreation = true;

                        nuovaLista.Fields.Add(colonna1, SPFieldType.Text, true);
                        nuovaLista.Fields.Add(colonna2, SPFieldType.Text, true);
                        nuovaLista.Update();
                    } 
                } 
            });
        }//end of WebMethod
    }//end of classe
}//end of namespace 
```

有人可以帮我吗？？？谷歌搜索我找到的解决方案，例如以下内容：

> “回复：正在检索具有 CLSID {5D34E962-9F95-4D92-917F-F9B1A4F2BC 的组件的 COM 类工厂...
> 
> 我相信您在问如何允许访问.. 抱歉，如果您不是，请执行以下操作... 在管理工具-> 组件服务下。在树下，转到组件服务->计算机->我的电脑->DCOM 配置。找到注册的 com 对象。右键单击以获取属性。在安全标签下，自定义权限以允许 asp.net 用户......希望这就是你要找的......”
> 
> 响应：“Jeff，非常感谢您的快速响应……我现在面临的问题是我如何知道 com 对象是否已注册……？如果没有，我该如何注册？我知道CLSID（因为错误消息告诉我具有 CLSID {5D34E962-9F95-4D92-917F-F9B1A4F2BC6E} 的组件），但是当我查看已注册的 com 对象列表时，它没有出现。任何帮助将不胜感激。提前致谢。”
> 
> 响应：“您可能实际上看不到 CLSID 下列出的类，因为它实际上可能是按其名称列出的，如果您在 Detail View 以外的任何其他地方设置了 Component Services 视图，您可能看不到它。将 View 更改为 Detail然后在 ApplicationID 列下查找此 CLSID。”

现在，即使我更改为详细信息视图，我也什么也看不到。请帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T21:22:01.750

您是否将列表添加到 sharepoint 2010？如果是，您的项目的平台构建是什么？确保将客户端应用程序构建为 64 位（与 sharepoint 服务器平台相同）

# android - 如何访问 从 android XML 中的资源？

> ID：10205316
> 
> 赞同：5
> 
> 时间：2012-04-18T08:02:11.180
> 
> 标签：android, xml

我有一个 PreferenceActivity 的 xml 文件 (/res/xml/setting.xml)：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
        <PreferenceCategory android:title="Main Settings">
            <ListPreference
                android:title="Background Image"
                android:summary="Set the background image"
                android:key="key_background"
                android:entries="@array/background"
                android:entryValues="@array/background_values" 
                android:defaultValue="winter.png" /> 
        </PreferenceCategory>
</PreferenceScreen> 
```

然后我有另一个xml文件“/res/values/string.xml”：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string-array name="background">
        <item>Winter</item>
        <item>Desert</item>
    </string-array>

    <string-array name="background_values">
        <item>winter.png</item>
        <item>desert.png</item>
    </string-array>

</resources> 
```

请参阅 setting.xml 中的 ListPreference，我想`android:defaultValue`设置为`winter.png`. 但我也不想在 xml 中设置硬编码/常量值，所以我尝试了各种值，例如“ `@array/background_values/0`”、“ `@array/background_values[0]`”等……但都失败了。

所以，问题是：

1.  在其他 xml 中访问字符串数组资源项的正确语法是什么？
2.  如何确定是否`android:defaultValue`正常工作？
3.  有没有关于`@array`语法的文档？我找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:38:37.017

1.  [Android 开发人员](http://developer.android.com/guide/topics/resources/string-resource.html#StringArray)无法在 XML 中引用资源`string-array`，更不用说它的项目。
2.  您可以清除应用程序的数据，重新安装并打开应用程序，转到设置屏幕，然后`defaultValue`将转到您共享的首选项文件。如果`defaultValue`匹配其中一项，它将被选中。

顺便说一句，您可以将字符串数组中的项目更改为引用字符串以避免硬编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:14:16.870

~~使用数组 android:defaultValue="0" 中所需值的索引~~

上面的代码之所以起作用，只是因为我在字符串数组值中使用了数字，而不是因为索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-24T10:26:23.227

1-为数组定义一个单独的文件（res/values/arrays.xml）

数组.xml

```
<?xml version="1.0" encoding="utf-8"?
<resources>
<string-array name="settings_order_by_labels">
    <item>label1</item>
    <item>label2</item>
</string-array>

<string-array name="settings_order_by_values">
    <item>value1</item>
    <item>value2</item>
</string-array>
</resources> 
```

2- 在 Preference xml 文件中使用这个数组：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen
xmlns:android="http://schemas.android.com/apk/res/android"
android:title="@string/settings_title">

<ListPreference
    android:defaultValue="value1"
    android:entries="@array/settings_order_by_labels"
    android:entryValues="@array/settings_order_by_values"
    android:key="order_by"
    android:title="Order By" />
</PreferenceScreen> 
```

# javascript - 带有 Primefaces 的 Twitter 引导程序 (JSF)

> ID：10205318
> 
> 赞同：15
> 
> 时间：2012-04-18T08:02:23.570
> 
> 标签：javascript, jsf-2, primefaces, twitter-bootstrap

我正在尝试将 Primefaces 3.2（也许它通常与 JSF 相关）与 Twitter Bootstrap 2.0.2（http://twitter.github.com/bootstrap）一起使用。

我在 starter-example (http://twitter.github.com/bootstrap/examples/starter-template.html) 中添加了一个下拉菜单，其中包含以下脚本`<h:head>`：

```
<script src="/resources/js/bootstrap.js"></script>  
<script src="/resources/js/jquery-1.7.2.js"></script>
<script src="/resources/js/bootstrap-dropdown.js"></script> 
```

这在 JSF 页面上工作正常，但如果我添加一个简单的`p:dataTable`

```
<p:dataTable var="i" value="#{testBean.list}">
  <p:column>
    <f:facet name="header"><h:outputText value="Item"/></f:facet>
    <h:outputText value="#{i}"/>
  </p:column>
</p:dataTable> 
```

下拉菜单不再起作用。我想它与 JavaScript 相关，但不确定在哪里搜索这个错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T08:14:12.290

首先你最好用`h:outputScript`加载js文件...

我认为它导致primefaces jquery和手动包含的冲突的原因......

PrimeFaces 3.2 带有 jQ​​uery 1.7.1，所以...

去除那个

`<script src="/resources/js/jquery-1.7.2.js"></script>`从你的代码

`<h:head>`并在您的元素中以以下方式修改您的包含

```
<f:facet name="first">
  <h:outputScript library="js" name="bootstrap.js"/>
</f:facet>
<h:outputScript library="primefaces" name="jquery/jquery.js"/>
<h:outputScript library="js" name="bootstrap-dropdown.js"/> 
```

还看看[JQuery Conflicts with Primefaces？](https://stackoverflow.com/a/5510507/617373)以及相关的[资源排序](https://stackoverflow.com/questions/10207011)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T15:19:44.893

有一种更简单的方法来添加这个主题。

如果您使用的是**maven**项目库，请执行以下操作：

添加依赖

```
 <dependency>  
        <groupId>org.primefaces.themes</groupId>  
        <artifactId>all-themes</artifactId>  
        <version>1.0.9</version>  
    </dependency> 
```

*或者添加特定的主题依赖*

**在你的web.xml**中添加这个

 **```
 <context-param>
      <param-name>primefaces.THEME</param-name>
      <param-value>bootstrap</param-value>
    </context-param> 
```

如果您不使用 Maven，请手动下载 jar 并将其添加到您的类路径中：

[http://repository.primefaces.org/org/primefaces/themes/](http://repository.primefaces.org/org/primefaces/themes/)

参考：

*   [http://www.primefaces.org/showcase-labs/ui/home.jsf?theme=bootstrap](http://www.primefaces.org/showcase-labs/ui/home.jsf?theme=bootstrap)
*   [http://blog.primefaces.org/?p=2139](http://blog.primefaces.org/?p=2139)
*   [http://primefaces.org/themes.html](http://primefaces.org/themes.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T08:21:16.447

您包含 JQuery 两次（Primefaces 自动导入它）。删除您的手动导入：

```
<script src="/erp/resources/js/jquery-1.7.2.js"></script> 
```

一切都应该工作。**

# css - CSS - li 元素在 IE 中未正确显示

> ID：10205319
> 
> 赞同：0
> 
> 时间：2012-04-18T08:02:23.973
> 
> 标签：css, list

我在 IE(8) 中显示 li 元素时遇到问题，它看起来正是我想要的 FF。

IE 在元素底部放置了 4px 的边距。这是代码。我可以通过向元素添加 -4px 边距来删除边距，但随后它会在 FF 中缩小它。

所以基本上 IE 让我的 li 变胖了。

```
#navigation ul {
    width: 176px;
    margin: 0px 1px 2px 0px;
    padding: 0px 0px 0px 0px;
    list-style: none;
    -webkit-box-shadow: inset 0px 0px 4px 4px #000001;
    -moz-box-shadow: inset 0px 0px 4px 4px #000001;
    box-shadow: inset 0px 0px 4px 4px #000001;  
    border: 1px solid white;
    -webkit-border-radius: 0px 0px 10px 10px;
    -moz-border-radius: 0px 0px 10px 10px;
     border-radius: 0px 0px 10px 10px; 
    float: left;
}
#navigation li {
    height: 30px;
}
#navigation li:hover {
    background: none;
    -webkit-box-shadow: inset 0px 0px 4px #000;
    -moz-box-shadow: inset 0px 0px 4px #000;
    box-shadow: inset 0px 0px 4px #000;
}
#navigation li:last-child {
    -webkit-border-radius: 0px 0px 10px 10px;
    -moz-border-radius: 0px 0px 10px 10px;
    border-radius: 0px 0px 10px 10px;
}
#navigation ul li a {   
    display: block;
    padding: 8px 8px 8px 8px;
    font: bold 12px Helvetica;
    color: #444;
    text-decoration: none;
    border-bottom: 1px solid #999;
    border-top: 1px solid #FFF;
}
#navigation ul li a:hover {
color: blue;
}
#navigation ul li:first-child a {
    border-top: none;
}
#navigation ul li:last-child a {
    border-bottom: none;
} 
```

li 元素的背景代码（其中很多 - 就像一个图像拼图）：

```
#c1l1 { background: url(img/new-1-0-0-0-01-02.png);}
#c1l2 { background: url(img/new-1-0-0-0-01-03.png);} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:05:41.273

尝试设置元素`display: inline;`。`<li>`当然，仅适用于 IE（为此使用条件注释）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:07:18.367

尝试添加

`//margin: -4px;`

应该适用于所有版本的 IE

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T08:07:50.147

我认为您是浏览器样式表及其样式的受害者。我建议将 ul 和 li 元素的内边距和边距重置为 0。此重置应在应用其他样式之前完成，并且应应用于所有浏览器以获得一致的布局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T08:13:57.040

尝试其中之一：

1.  `float: left`列表项（然后也应用 a`clear: left`或者您会看到它们并排对齐）
2.  设置`line-height: 30px`为列表项

# tinymce - TinyMCE shift进入UL

> ID：10205329
> 
> 赞同：0
> 
> 时间：2012-04-18T08:03:14.597
> 
> 标签：tinymce, html-lists

我在标签中遇到 TinyMCE 和 Shift + Enter 的问题。

起初我使用的是一个非常旧的 TinyMCE 版本，其工作方式如下：当我在无序列表中按“Enter”时，会创建一个新点 (<li>)。当我在无序列表中按“Shift + Enter”时，会创建一个新的空格（如 < br />）。

现在的问题是我已经升级到更新版本的 TinyMCE。现在“Shift + Enter”不再起作用，它会创建一个新点“< li >”而不是空格（< br />）。

TinyMCE 是常规的这是我的 TinyMCE 配置：

```
$('textarea.tinymce').tinymce({
        script_url : 'js/tinymce/jscripts/tiny_mce/tiny_mce.js',

        language : 'nl',        
        theme : "advanced",
        plugins : "safari,spellchecker,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,searchreplace,print,contextmenu,paste,directionality,noneditable,visualchars,nonbreaking,xhtmlxtras,template,imagemanager",

        theme_advanced_buttons1 : "bold,italic,underline,forecolor,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|, formatselect",
        theme_advanced_buttons2 : "copy, pasteword,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,code",
        theme_advanced_buttons3 : "hr,removeformat,visualaid,|,tablecontrols,iespell",

        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_resizing : true,

        content_css : "style/tiny-mce.css",

        theme_advanced_blockformats : "p,h1,h2,h3,h4,h5,h6",
        forced_root_block : false,
        force_br_newlines : true,
        force_p_newlines : false,
        paste_create_paragraphs : false,
        paste_create_linebreaks : false,
        paste_use_dialog : false,
        paste_auto_cleanup_on_paste : true,
        paste_convert_middot_lists : false,
        paste_unindented_list_class : "unindentedList",
        paste_convert_headers_to_strong : true, 
        convert_urls : false,
        width : "802px"
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:31:25.490

看起来 Moxiecode 改变了 tinymce 的行为。您唯一能做的就是编写一个自定义函数并处理 STRG + ENTER 处理（不建议这样做）。

# c# - 获取图像文件夹的路径

> ID：10205331
> 
> 赞同：2
> 
> 时间：2012-04-18T08:03:34.300
> 
> 标签：c#, asp.net, .net, file-upload, exception-handling

我正在尝试使用`asp:FileUpload`.

单击按钮时出现此错误：

> SaveAs 方法配置为需要有根路径，并且路径“localhost:49256/bilder”没有根。

这是我背后的代码：

```
protected void ladda_Click(object sender, EventArgs e)
{
    string filename = filuppladdare.FileName;
    string description = desc.Text;

    if (filuppladdare.HasFile)
    {
        filuppladdare.PostedFile.SaveAs(\localhost:21212\pictures");
    }
} 
```

我只猜到了路径。应该是什么？或者我如何得到它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T08:07:33.550

使用`MapPath`方法获取文件夹的物理路径：

```
filuppladdare.PostedFile.SaveAs(Server.MapPath("~/pictures")); 
```

路径中的`~`代表应用程序根。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T08:08:37.903

使用的路径是指服务器上的[物理路径](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.saveas.aspx)（或另一个可访问的 FS 路径），而不是您网站的 url。

如果你想从你应该使用的 url 获取物理路径`Server.MapPath(yourUrl)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T08:09:40.850

试试这个

```
filuppladdare.PostedFile.SaveAs("~/Project name/.../pictures"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T08:11:24.483

获取当前路径有多种方法，[此链接](http://msdn.microsoft.com/en-us/library/ms178116.aspx#sectionToggle1)向您展示如何使用 HttpContext 中的各种属性来查找路径：

在您的示例中，您可以使用以下内容：

```
filuppladdare.PostedFile.SaveAs("~\pictures"); 
```

`~`告诉它从应用程序的根目录开始。

您也可以使用[Server.MapPath](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T08:12:58.680

一种选择是使用服务器 MapPath，然后检查文件夹权限可能会有所帮助

# facebook - Facebook 连接/登录，无需任何用户交互或授权

> ID：10205339
> 
> 赞同：0
> 
> 时间：2012-04-18T08:04:20.947
> 
> 标签：facebook, authentication, privacy

**编辑：**这个问题是错误的，见结尾。

我正在将 Facebook 与我的网站集成，并且正在遵循标准的客户端/服务器身份验证设置，以及所有有趣的令牌练习、权限请求以及您拥有的一切。这是必要的，因为我们想利用扩展权限数据、执行帖子等。

但如果我们只对 Facebook 作为一种身份验证方法感兴趣，似乎我们可以在用户不知道的情况下完成整个事情。如果我们只需要一种方法来跟踪用户在我们网站上的行为并在每次访问中记住它，我们只需要能够持续且唯一地识别他或她。为此，Facebook 用户 ID 就足够了，并且可以使用 js 或 php sdk 轻松查询——用户无需查看或批准任何内容。

这在隐私方面似乎有点不雅，但完全在 Facebook 提供的公开可用信息/工具之内。对于许多应用程序来说，这也很有意义——人们试用了您的网站，然后决定进行真实注册，他们可以继承他们过去的所有活动，完全经过身份验证的用户可以看到他们的朋友在网站上所做的事情即使那些朋友不同意被跟踪...

这是否违反 Facebook 的 ToS 或其他不可行？我很惊讶我没有经常遇到它（除非它隐藏得很好:)）。

**编辑：**这个问题是基于对我的调试数据的错误解释，因此在不正确的前提下。获取用户 ID 确实是一个巨大的隐私漏洞，并且至少需要一点点黑客攻击才能提取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:08:39.883

这违反了隐私权所代表的一切，从技术上讲，Facebook 也是不可能的。除非您至少让他们喜欢您的应用程序，否则您不会获得用户的 facebook-id。

所以没有交互：不
尝试饼干......

是的，事实上你也可能违反了 Facebook 的 ToS：

他们在这里说：[https ://developers.facebook.com/policy/](https://developers.facebook.com/policy/)

**创造出色的用户体验**

*   给用户选择和控制

**值得信赖**

*   尊重隐私

而且我看不出比你更好的例子来违反这一点；）

# php - 何时使用 time_nanosleep？

> ID：10205340
> 
> 赞同：6
> 
> 时间：2012-04-18T08:04:37.637
> 
> 标签：php

只是偶然发现`time_nanosleep()`并开始想知道，您什么时候想使用它？

此外，甚至可以在 PHP 这样的脚本语言中使用如此短的时间跨度吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T08:31:27.063

不，永远不可能使用单个纳秒。只有 Linux 中的上下文切换通常在数百纳秒内，不包括 Zend 引擎的开销。

我检查了 PHP 源代码，它只是 C nanosleep 函数的简单包装。nanosleep 的手册页说：

> nanosleep() 暂停调用线程的执行，直到至少经过 *req 中指定的时间
> 
> ...
> 
> 与 sleep(3) 和 usleep(3) 相比，nanosleep() 具有以下优点：它为指定睡眠间隔提供了更高的分辨率

因此，这完全取决于您要指定的间隔有多小。由于 usleep 以微秒（数千纳秒）为单位指定，因此对于一些非常小的睡眠间隔来说，它的基本单位可能太大了。

# c# - 通用表单和 VS 设计器

> ID：10205349
> 
> 赞同：4
> 
> 时间：2012-04-18T08:05:27.887
> 
> 标签：c#, winforms

我有一个基类

```
internal partial class View<T> : UserControl
  where T : class
{
    protected T t;
} 
```

我想从 View 派生一个孩子

```
internal partial class ViewChild<T> : View<T>
  where T : class
{
} 
```

它工作正常，但我无法在 VS 设计器中编辑 ViewChild。我知道问题是通用基类。但是，我不明白在这种情况下如何避免这种情况。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T08:16:05.433

还有另一种方法，它不依赖于编译器标志：

[http://wonkitect.wordpress.com/2008/06/20/using-visual-studio-whidbey-to-design-abstract-forms/](http://wonkitect.wordpress.com/2008/06/20/using-visual-studio-whidbey-to-design-abstract-forms/)

我真的不建议使用条件编译。使用框架要好得多，而不是反对它。

基本上，你可以通过现有的框架给VS一个不同的类。你用 TypeDescriptionProvider 属性装饰你的基类，它告诉 VS 使用不同的类作为设计器。

正如在原始博客文章中提到的，可能存在与此解决方法相关的警告，但我在一个具有 > 25 个从公共基类继承的 UserControls 的项目中巧妙地工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T08:08:43.830

泛型破坏了设计器，因为它无法实例化没有类型的类`T`。我在我的博客文章中解释了一种解决方法：

[http://adamhouldsworth.blogspot.co.uk/2010/02/winforms-visual-inheritance-limitations.html](http://adamhouldsworth.blogspot.co.uk/2010/02/winforms-visual-inheritance-limitations.html)

简而言之，您需要使用中间类“解析”类型：

*   `BaseControl<T> : UserControl`
*   `CustomerControl_Design : BaseControl<Customer>`
*   `CustomerControl : CustomerControl_Design`

`DEBUG`然后，您可以根据或`RELEASE`编译器开关有条件地将此类从代码中切换出来：

```
#if DEBUG

namespace MyNamespace
{
    using System;

    public partial class CustomerEditorControl_Design : BaseEditorControl<Customer>
    {
        public CustomerEditorControl_Design()
            : base()
        {
            InitializeComponent();
        }
    }
}

#endif

    public partial class CustomerEditorControl
#if DEBUG
        : CustomerEditorControl_Design
#else
        : BaseEditorControl<Customer>
#endif
    {
    } 
```

This will let you open the derived class of `CustomerControl`, unfortunately you will ***never*** be able to design a UI control with generics in the signature. My solution is only enabling the design of derived items.

I have no idea why `CustomerControl : BaseControl<Customer>` won't work as in this case the type `T` is defined, but it simply doesn't - I'm guessing because of the rules of generic usage.

To their defense, Microsoft do say that this isn't supported.

# ios - 如何通过 vb .net 连接到 ios APN

> ID：10205350
> 
> 赞同：1
> 
> 时间：2012-04-18T08:05:28.167
> 
> 标签：ios, vb.net, notifications, push, pkcs#12

我在开箱即用地连接到苹果的沙盒服务器时遇到了一些麻烦。我真的不知道这只是我的程序错误还是我的证书。

我们来看一下：

```
Using client As New TcpClient()
        client.Connect("gateway.sandbox.push.apple.com", 2195)
        Using networkStream As NetworkStream = client.GetStream()
            Console.WriteLine("Client connected.")

            Dim clientCertificate As New X509Certificate("certfile.p12", "PASS")
            Dim clientCertificateCollection As New X509CertificateCollection(New X509Certificate(0) {clientCertificate})

            ' Create an SSL stream that will close the client's stream.
            Dim sslStream As New SslStream(client.GetStream(), False, AddressOf ValidateServerCertificate, Nothing)

            Try
                sslStream.AuthenticateAsClient("gateway.sandbox.push.apple.com", clientCertificateCollection, SslProtocols.Default, False)
            Catch ex As AuthenticationException
                Console.WriteLine("Exception: {0}", ex.Message)
                If ex.InnerException IsNot Nothing Then
                    Console.WriteLine("Inner exception: {0}", ex.InnerException.Message)
                End If
                Console.WriteLine("Authentication failed - closing the connection.")
                client.Close()
                Return
            End Try
        End Using
    End Using 
```

我收到以下错误：“SSPI 调用失败”。

现在我的问题是，我必须在钥匙串中导出哪个证书？我的私钥、aps_provisioning、苹果开发证书还是我的开发者证书？

提前致谢！

# javascript - 请帮我完成这个简单的脚本

> ID：10205363
> 
> 赞同：3
> 
> 时间：2012-04-18T08:06:54.140
> 
> 标签：javascript, getelementsbytagname

我刚刚开始学习本机 javascript，我正在尝试编写一个简单的脚本，该脚本将显示一个警报窗口，显示每个`<p></p>`元素中包含的文本。

我在下面发布代码。请让我知道我做错了什么

```
function show(){
  var x = document.getElementsByTagName('p');
  for(i=0;i<x.length;i++) {
    x[i].onclick=function(){
      alert(x[i].innerText);
    }
  }
}

show() 
```

HTML 如下：

```
<p>Blackberry</p>
<p>Strawberry</p>
<p>Raspberry</p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T08:12:06.823

您在回调中引用了一个未定义的对象，请使用：

```
alert(this.innerText || this.textContent); 
```

反而...

**编辑**：正如[@Sarfraz](https://stackoverflow.com/users/139459/sarfraz)所指出的，检查 innerText 或 textContent 属性以确保跨浏览器兼容性。

PS Check 也是`show();`在加载引用的 DOM 时调用的，而不是之前；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T08:13:14.337

您只需要调用 show onload - 例如

`window.onload=show;`

并更改`x[i]`为`this`onclick -所有浏览器都不支持[innerText](http://www.quirksmode.org/dom/w3c_html.html#t04)

我会做这个[DEMO](http://jsfiddle.net/mplungjan/shyxX/)

```
window.onload=function(){
  var x = document.getElementsByTagName('p');
  for(var i=0;i<x.length;i++) {
    x[i].onclick=function(){
      alert(this.innerHTML); // supported by more browsers than innerText
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T08:13:28.210

您需要确保`i`函数内部的正确范围。
您还需要使用`innerHTML`而不是`innerText`.

```
function show() {
    var x = document.getElementsByTagName('p');
    for (var i = 0; i < x.length; i++) {
        (function(i) {
            x[i].onclick = function () {
                alert(x[i].innerHTML);
            }
        })(i);
    }
} 
```

由于`onclick`处理程序内部`this`绑定到元素，因此您还可以避免闭包问题和所有问题`i`：

```
function show() {
    var x = document.getElementsByTagName('p');
    for (var i = 0; i < x.length; i++) {
        x[i].onclick = function() {
            alert(this.innerHTML);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T08:13:52.980

我猜你`<script>`在`<head>`. 这通常会失败，因为 DOM 没有完全加载。

```
<html>
 <head>
  <script>
  function show(){....}
  show(); // don't do this 
  </script>
 </head>
 <body>
  <p>Blackberry</p>
  <p>Strawberry</p>
  <p>Raspberry</p>
 </body>
</html> 
```

最好使用`window.onload = show;`or `window.addEventListener('load',show);`。

但是，`x[i]`是一个局部变量。它在节目之外不为人所知，甚至在您的匿名功能中也不为人所知。所以你必须创建一个闭包或使用`this.innerHTML`.

所以要么使用

```
function show(){
   var el = document.getElementsByTagName('p');
   for(var i = 0; i < el.lenght; ++i){
       el[i].onclick = function(e){
           alert(this.innerHTML);
       }
   }
}
window.onload = show; 
```

或者

```
function show(){
   var el = document.getElementsByTagName('p');
   for(var i = 0; i < el.lenght; ++i){
       el[i].onclick = (function(element){
           return function(e){
               alert(element.innerHTML);
           };
       })(el[i]);
   }
}
window.onload = show; 
```

也可以看看：

*   [医疗器械网络：`this`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this#As_a_DOM_event_handler)
*   [MDN：闭包](https://developer.mozilla.org/en/JavaScript/Guide/Closures)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T08:18:30.320

您需要的是闭包，否则 any `<p>`，在单击时不会返回任何内容，因为迭代后`i`会变成`x.length + 1`，因此您在尝试访问时尝试访问不存在的元素

`x[i].innerText`

将您的代码更改为：

```
function show(){

   var x = document.getElementsByTagName('p');

   for(var i=0;i<x.length;i++) {
      x[i].onclick=function(i){
          return function() {
              alert(x[i].innerHTML); // alternatively you can also do this.innerHTML without closure, I just wanna introduce you to this concept
          }
       }(i);
   }

}

show()​ 
```

[http://jsfiddle.net/3xYtF/11/](http://jsfiddle.net/3xYtF/11/)

或者，您可以更改`x[i].innerText`为`this.innerText`无需使用闭包，但我认为这是介绍闭包概念的好机会:)。同样正如另一条评论中指出的那样，`.innerText`并不是真正的跨浏览器，请使用`innerText || textContent`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T09:12:05.553

我认为在页面完全加载*之前*`show()`正在运行。尝试从事件中调用该函数，看看是否有帮助。*`onload`*

 *`<body onload='show();'>`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-18T08:25:56.957

问题是，每当执行 click 处理程序时，它总是指向 i 的最后一个值。因此，根据您的示例，您单击的任何段落元素都将始终看到“Raspberry”。

在不使用任何复杂闭包（占用内存）的情况下解决此问题的最简洁方法是使用上下文标识符“this”，它将指向被单击的元素。

函数显示（）{

```
var x = document.getElementsByTagName('p');

for(i=0;i<x.length;i++){

    x[i].onclick=function(){

        alert(this.innerText);

    }

} 
```

}

节目（）*

# php - HTML 电子邮件使用 PHP 以纯文本形式发送

> ID：10205366
> 
> 赞同：1
> 
> 时间：2012-04-18T08:07:14.623
> 
> 标签：php, email

我有这段代码可以通过 PHP 发送电子邮件：

```
// Prepare email.
$headers = "From: Mi9 Vault <info@mi9vault.com.au>\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-type: text/html; charset=ISO-8859-1";

$msg = file_get_contents($_SERVER['DOCUMENT_ROOT'] . '/edm/confirmation.html');
$msg = str_replace('{first_name}', $contact["First Name"], $msg);

// Send email
mail($contact["Email Address"], "Your Mi9 Registration is Confirmed", $msg, $headers); 
```

`confirmation.html`是我们设置的 HTML 电子邮件。

我以前从未遇到过使用上述用于发送电子邮件的 PHP 代码的问题，但是我似乎能得到的只是一封包含所有 HTML 的电子邮件，而不是实际的 HTML 格式的电子邮件。

基本上我收到一封电子邮件，内容如下：

```
MIME-Version: 1.0

Content-type: text/html; charset=ISO-8859-1
Message-Id: <20120418080325.C643B407EF@ds3219.dreamservers.com>
Date: Wed, 18 Apr 2012 01:03:25 -0700 (PDT)

<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    </head>
    <body>
        ..... 
```

我在另一个具有相同主机的网站上有相同的 PHP 代码，它工作正常......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T08:14:09.083

似乎不知何故，标题的每两行之间都有额外的换行符。我不确定它是如何发生的，因为你的代码没有把它们放在那里。接收邮件服务器可能会以某种方式搞砸并解释`\r\n`为两个换行符而不是一个。首先，我会删除`\r`只留下`\n`来看看会发生什么。我知道这对于 RFC 来说是不合适的——但从那开始。

为了让您感觉更好，我使用了一个非常相似的代码 - 并且电子邮件被正确传递。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T08:30:44.553

您不知道您在哪个平台上运行以及 mail() 使用哪个邮件程序。您正在使用的邮件程序似乎期望 \n 作为分隔符。您可以使用 PHP_EOL 代替 \r\n 或 \n，在这种情况下，它将使用运行平台中使用的行分隔符。

对于 linux/unix 系统，

> 标题中的换行符应该是运行 PHP 的系统的本机行结尾。
> 
> mail() 函数不与 SMTP 服务器通信，因此 RFC2822 不适用于此处。mail() 正在与本地系统上的命令行程序通信，因此可以合理地预期该程序需要系统原生换行符。

（[来源](https://bugs.php.net/bug.php?id=15841)）

从长远来看，考虑使用通常解决了几个类似问题的 mail() 替代方案。mail() 是一个非常“原始”的函数，它有几个陷阱，包括标头注入。这类问题已经在例如[Swift Mailer](http://swiftmailer.org/)或[PHPMailer](http://phpmailer.worxware.com/)中得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T08:15:26.103

尝试改变：

```
$headers = "From: Mi9 Vault <info@mi9vault.com.au>\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-type: text/html; charset=ISO-8859-1"; 
```

到

```
$headers = 'From: Mi9 Vault <info@mi9vault.com.au>' . "\r\n";
$headers .= 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T08:24:06.020

尝试从您的 html 电子邮件中删除 html 和 head 标签，只需为内容添加简单的 html，无需添加额外的 HTML 标签，并且 Body 在正文开始标签之后开始您的 html 标签

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-21T16:40:26.637

我有类似的问题，我只是通过提供 $headers 作为数组而不是手动添加换行符和回车的串联字符串来解决它。

```
$headers = array(
    'From' => "Mi9 Vault <info@mi9vault.com.au>",
    'MIME-Version' => '1.0',
    'Content-type' => "text/html;charset=ISO-8859-1"
); 
```

它就像一个魅力。

# regex - 如何匹配没有数字的行的正则表达式？

> ID：10205368
> 
> 赞同：2
> 
> 时间：2012-04-18T08:07:17.777
> 
> 标签：regex

我有多行文本，并且只想匹配没有数字的行：

```
text without numbers
text 1 with number

some other text
text without numbers
text 1 with number

text without numbers
text 1 with number 
```

我运气不好。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T08:12:03.133

```
^[^\d]*$ 
```

选择除数字以外的任何内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T08:10:10.117

您可以断言整行仅由非数字组成：

```
^\D*$ 
```

`\D`是字符类的简写`[^0-9]`（在当前的引擎中希望更类似于识别`[^\d]`Unicode `\d`，但我离题了......）它匹配*除*数字之外的所有内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T08:11:24.013

```
/^[^0-9]*$/ 
```

^ = 行首，[^0-9]* = 除数字外的任何内容，$ = 行尾

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T08:10:07.430

你可以做一个非贪婪的匹配`[a-z ]*?\r\n`

这将起作用，而无需您将每条线分开进行验证。该模式多次匹配任何字母或空格，但在换行之前

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T08:27:21.930

也许这个例子会帮助你：

```
<?php
    $string = "your_string";
    if (preg_match('/.*([0-9]*).*/simU', $string)) {
        echo "String with numbers";
    } else {
        echo "String without numbers";
    }
?> 
```

# c# - 通过视图模型图/树进行验证

> ID：10205377
> 
> 赞同：1
> 
> 时间：2012-04-18T08:07:52.440
> 
> 标签：c#, silverlight, mvvm, prism

我的问题要求我根据某些依赖关系验证视图模型中的各个字段。我正在使用 Silverlight、Prism 和 MVVM。

作为一个例子（从我的真实世界场景改变）：

![简单的类示例](../Images/224761118ad09c8dc227cda6d64074f2.png)

每艘船可以有很多集装箱，一个集装箱可以有很多物品。

每当更改属性时，每个类都会继承`NotificationObject`并调用。`RaisePropertyChanged`

我的业务规则是确保当属性*Ship.TypeId*等于 1时*Item.Colour*、*Item.Name*和*Item.Size*不为空。如果*Ship.TypeId*等于其他任何值，我不需要验证*Item*中的属性。

 ***目前正在`OnPropertyChanged`事件的视图模型中进行验证。

我面临的问题是，如果我在*Item*类中添加验证，则该对象不知道*Ship.TypeId*。如果我订阅*Item*和*Container*`PropertyChanged`抛出的事件，我可以从*Ship*中检测到属性更改，但只能获取属性名称（相对于子类，即 Name），但不能获取旧值或新值。

 ***我想要做的是验证子项目，同时知道*Ship.TypeId*是并且还知道哪个*Name*、*Color*或*Size*属性已更改，并能够针对 UI 上的正确字段引发错误。

非常感谢，阿德里安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:07:11.383

正如您所指出的，由于`Item`对 a 一无所知`Ship`，因此不应进行涉及 Ships 的验证。可能可以添加一个属性`Item`，使其可以在本地进行验证（例如`CanBeEmpty`），但在不了解更多信息的情况下，我不能说这是否有意义。

您没有指定编辑采用什么格式，因此很难评论。如果船舶和物品都可以在同一屏幕上实时编辑，则通过编辑物品或编辑船舶使验证失败。在这种情况下，我通常会推迟验证，直到通过单击“确定”或其他方式提交所有编辑。当您被迫始终保持内容有效时，编辑多个内容真的很令人沮丧。

如果您只能在与船舶隔离的情况下编辑项目，并且 Item 本身的额外属性没有意义，那么我建议将您的项目包装在一个确实了解船舶的 ItemEditViewModel 中。这似乎是合理的，因为创建有效的项目编辑需要了解船舶，因此在这样的编辑屏幕中的 ViewModels 也需要了解船舶。******

# c++ - C++ 将函数指针作为参数传递

> ID：10205379
> 
> 赞同：3
> 
> 时间：2012-04-18T08:08:09.570
> 
> 标签：c++, g++

我正在尝试传递函数指针，但我不断收到编译器错误。我通常不传递函数指针，但这种情况需要它。我认为您只需要查看声明即可了解我做错了什么。

在头文件中我有：

```
pthread_t * createThread(void *(*func)(void *), string arg) 
```

在实现中是一样的：

```
pthread_t * createThread(void *(*func)(void *), string arg) 
```

在调用这个函数时，我正在做： createThread(&afunction, "ran again")

而afunction的声明是：

```
void *afunction(void *ptr) //(no header, same for both declaration and implementation). 
```

但编译器吐出这个：

```
 Undefined symbols for architecture x86_64:
  "createThread(void* (*)(void*), std::basic_string<char, std::char_traits<char>, std::allocator<char> >)", referenced from:
      spawnSingleThreadTest()     in threadTests.o 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:14:28.563

您没有将实现链接到您的可执行文件。这与函数指针无关。这就是您编译源代码的方式。

# git - git合并两个不同存储库的相同目录

> ID：10205383
> 
> 赞同：1
> 
> 时间：2012-04-18T08:08:51.147
> 
> 标签：git, github

我正在使用一个托管在 git-hub 上的开源项目。

最后，我还在这个项目中进行了很多更改，并将其保存在我的另一个本地存储库中。

因此，当我需要从 git-hub 获取新更改时，我在合并两者时遇到了问题（我的本地存储库和 git-hub 的更改）

例如：项目 1 -> local1 也来自 github：项目 1 -> git-1 **这些更改位于同一目录中。目前我正在以下步骤合并这两个：

1.  用 git3 替换本地存储库代码（现在树是 project1->git1）
2.  将其与 head (即 project1->local1) 进行比较
3.  更新local1的变化（head现在是project1->local1->git1-local merge）

但是如果来自 git-hub 的任何新更新（比如说现在树是 project1->git1->git-2）和我本地的新更新（project1->local1->local2）。如果我现在去合并这些二，我必须再次重复（再次添加local1的更改）。如果我只能添加local2的更改，我很好。

我希望我清楚我想说的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:51:35.570

手动做事真的很困难，你让任务变得复杂而且容易出错。

Git 可以帮助您解决这个问题，方法是使用引用指定远程存储库的状态，例如`origin/branch`,`origin/master`等。

请参阅诸如`git merge origin/branch`、之类的命令`git chekout branch`以及类似的内容。您不需要不同的工作副本，也不需要在目录之间手动移动内容。当切换不同的分支时，Git 会为你处理它。

# performance - 在浏览器或服务器上动态生成 HTML 的位置？[移动网页开发]

> ID：10205394
> 
> 赞同：0
> 
> 时间：2012-04-18T08:10:00.547
> 
> 标签：performance, web-applications, mobile, jquery-mobile

我在移动网络上工作，有时我会显示一个非常大的列表视图（我正在使用 JQM）。

我注意到从 Javascript 中返回的 JSON 生成大 DOM 需要几秒钟的时间。

您认为在服务器上生成 HTML 并从中下载压缩比使用 Javascript 通过 JSON 数组迭代更好吗？

**编辑：**

最后我一次性下载了所有请求的数据，JSON 压缩不会太重。然后我使用相应的数据块进行分页重建列表视图，我正在按页面重建 25 个列表项，但应用程序的响应速度不快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:18:47.183

最佳实践方法是使用分页而不是从服务器发送整个 JSON 字符串，而是将其拆分为几个“页面”。

`infinite scroll`您的应用程序会想到类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:00:47.163

取决于您用来生成 HTML 的 JS。您应该使用 innerHTML 和数组进行字符串连接。您也可以尝试分页，但使用 JQM 可能会很棘手。此外，JQM 通常很慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:51:58.500

您要发回多少数据以及要插入多少 DOM 节点？

您发送的 JSON 和您要发送的 HTML 之间的大小差异是多少？

我会测试这两种方法的大小和响应能力，然后做出选择。

您面临的挑战之一是应用程序与无线电使用的响应能力（更长的无线电使用可能比具有许多睡眠/唤醒/睡眠周期的聊天连接更好地延长电池寿命）

所以我还要看看一次性发送多少数据是有意义的，即有多少数据是可见的和使用的？

# php - PHP 邮件表单发送失败

> ID：10205400
> 
> 赞同：0
> 
> 时间：2012-04-18T08:10:14.640
> 
> 标签：php

我是 PHP 编程新手。我试图制作一个包含文件附件的表格。当我测试它时，它无法将表格发送到我的电子邮件。如果我遗漏了什么，请帮我看看我的 PHP 代码。提前感谢您的指导。[我从http://www.shotdev.com/php/php-mail/php-send-email-upload-form-attachment-file/](http://www.shotdev.com/php/php-mail/php-send-email-upload-form-attachment-file/)引用了这个编码

错误消息显示：警告：mail() [function.mail]：mail() 函数的参数错误，未发送邮件。它指向行“$sendMail = mail($sendTo, $mailSubject, null, $header);”

下面是我的PHP代码：

```
 <?php

/*Retrive inputs from the form */
//Required fields
$fullName = $_POST["Fullname"];
$gender = $_POST["genderRadioGroup"];
$DOB = $_POST["DOB"];
$address = $_POST["Address"];
$state = $_POST["State"];
$zipCode = $_POST["Zipcode"];
$contactNo = $_POST["Contact"];
$emailAdd = $_POST["Email"];

//Optional fields
// If applicant filled the field, take it. Else, make it " - ".
$nickName = $_POST["Nickname"];
if($nickName!="")
{
    $nickName = $nickName;
}
else
{
    $nickName = " - ";
}

$description = $_POST["Description"];
if($description!="")
{
    $description = $description;
}
else
{
    $description = " - ";
}

//Message content
$message = <<<EOD
<br><hr><br>
Full Name: $fullName <br>
Nickname: $nickName <br>
Gender: $gender <br>
Date of Birth: $DOB <br>
Address: $address <br>
State: $state <br>
Zip Code: $zipCode <br>
Contact Number: $contactNo <br>
E-mail address: $emailAdd <br>
Description: $description <br>
EOD;

/* Uniqid Session */
$sessionID = md5(uniqid(time()));

/* Header */
//Sender
$header = "From: $fullName <$emailAdd> \n";
$header .= "Reply-To: $emailAdd \n";
//MIME
$header .= "MIME-Version: 1.0 \n";
$header .= "Content-type: multipart/mixed; boundary=\"".$sessionID."\"\n\n";
$header .= "This is a multi-part message in MIME format. \n";

$header .= "-- $sessionID \n";
$header .= "Content-type: text/html; charset=utf-8 \n";
$header .= "Content-transfer-encoding: 7bit \n\n";
$header .= "$message \n\n";

/* Attachment */
if($_FILES["Attachment"]["name"] != "") //If there is attachment
{
    //Variables
    $fileName = $_FILES["Attachment"]["name"];
    $fileContent = chunk_split(base64_encode(file_get_contents($_FILES["Attachment"]["tmp_name"])));

    //Adding attachment to header
    $header .= "-- $sessionID \n\n";
    $header .= "Content-Type: application/octet-stream; name=\"".$fileName."\"\n";
    $header .= "Content-Transfer-Encoding: base64 \n";
    $header .= "Content-Disposition: attachment; filename=\"".$fileName."\"\n\n";
    $header .= $fileContent."\n\n";
}

/* Send Mail */
// Recipient
$sendTo = "mytestmail@gmail.com";
$mailSubject = "The Form - $fullName";
$sendMail = mail($sendTo, $mailSubject, null, $header);

if($sendMail)
{
    echo "Thank you!";
}
else
{
    echo "An error occured.";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:14:52.343

我没有检查你所有的代码......但是......

```
 mail(  $to,         $subject,      $message,     $headers);
    mail(  $sendTo,    $mailSubject,     null,       $header); 
```

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:40:56.313

@F3rr31r4 它显示警告：mail() [function.mail]：mail() 函数的参数错误，邮件未发送。它指向 $sendMail = mail($sendTo, $mailSubject, null, $header); 还有文本“发生错误。”，我在 IF 语句中放在代码末尾的那个。– 用户 1340749

```
 1\. Check your PHP version
 2\. print("<pre>" . $header . "</pre>");  and check your msg 
```

# delphi - Delphi 有免费的 Warren Abstract Machine 实现吗？

> ID：10205401
> 
> 赞同：0
> 
> 时间：2012-04-18T08:10:20.473
> 
> 标签：delphi, implementation, abstract-machine

我已经进行了彻底的搜索，但仍然是徒劳的。

参考：

[沃伦抽象机](http://en.wikipedia.org/wiki/Warren_abstract_machine)（维基百科）。

问题：

有没有这样的实现（开源）？

如果不是，我倾向于接受一个解决方案的答案，该解决方案包含一个用其他语言编写的好解决方案（要链接的 Dll 和/或 obj 文件，我知道[Prolog.NET](http://prolog.codeplex.com/)：请不要建议它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-21T10:16:21.137

我的毕业作品（1987 年）是为 Prolog 定义宏扩展并测试它可能带来的好处。我的目标是 WAM。我有 DEC-10 汇编语言的 WAM 源代码，但不幸的是我没有 DEC-10（既不是物理的也不是模拟的），所以我不得不实现一个从 WAM 语言到 TurboPascal v3 的编译器作为辅助工作。据我记得，我的实现并不完整，但足以完成我必须做的事情。如果在发布此问题将近五年后，您发现此贡献（如此之小，如此晚）有用，我会感到惊讶；但是，如果你这样做了，只需发布​​一个答案，我很乐意将我的源代码发送给你。我写了它，我很乐意将我的权利捐赠给公共领域。

# permissions - 列出目录中所有文件的组和用户权限

> ID：10205404
> 
> 赞同：0
> 
> 时间：2012-04-18T08:10:34.843
> 
> 标签：permissions, batch-file

我还没有为此编写任何代码，因为我不知道从哪里开始（搜索返回 nada，蹲下）。我认为这是一个批处理脚本任务，但对其他选项持开放态度。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T23:49:56.053

**我为此编写的脚本将批处理脚本文件**当前目录中所有文件的所有权限输出到文本文件：

```
for /r %%i in (*) do cacls "%%~i" >> "permissions.txt" 
```

现在，**cacls**在“可拖网”方面并没有显示出非常好的输出，并且那里有更新的实现（xcacls、icacls），但这在 WinXP 上对我有用。

感谢[PA。](https://stackoverflow.com/users/30447/pa)寻求帮助（请参阅对原始问题的评论）。

# php - 使用 InputBox 向 MediaWiki 搜索查询添加额外的搜索文本

> ID：10205405
> 
> 赞同：2
> 
> 时间：2012-04-18T08:10:39.803
> 
> 标签：php, search, wiki, mediawiki, semantics

我们正在使用[InputBox](http://www.mediawiki.org/wiki/Extension:InputBox)扩展。我们希望有一个使用两个复选框的搜索功能，如下所示：

![搜索](../Images/108f17d3c8303ade8f68c2feee20866a.png)

因此，用户既不能选择，也不能选择一个或两个复选框来引用页面上的特定文本。也就是说，如果用户选择“Platform 1.0”，搜索将返回页面上带有“Platform 1.0”的页面。（实际上：他们将使用特定的语义属性返回页面，从而在页面上产生文本。）

所以我们想要一种方法来搜索平台文本和在搜索框中输入的文本。

我们尝试过：

*   将这些页面归入类别，但我们使用模板（模板中的类别）[执行此操作，这不会使它们使用 incategory 进行搜索](http://en.wikipedia.org/wiki/Help:Searching#Search_engine_features)。
*   使用命名空间/前缀代码为 InputBox 编写新的 PHP 代码，但显然这些都使用搜索 API 中的特定词。我们不能在搜索 URL 等中添加特定的词。
*   使用语义的按属性搜索，但我们不能向该查询添加自定义文本（由用户输入）。

非常欢迎提出想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:12:23.150

困难的是，您可以尝试使用 JavaScript 在选中每个复选框时添加您想要的关键字。像这样：（jQuery 用于舒适，但如果不是一个选项，也可以使用普通 JS）：

```
$("#search").submit(function(e) {
    var search_value = $('input[type="text"]', this).val();
    if ($("#checkbox1").checked) { search_value = "SomeValue " + search_value; }
    if ($("#checkbox2").checked) { search_value = "SomeOtherValue " + search_value; }

    $('#search input[type="text"]').val(search_value);
    $(this).submit();
    e.preventDefault();
}); 
```

**请注意**，如果用户出于某种原因禁用 JavaScript，您的功能将被损坏，这始终是一种不好的做法。仅在您确实提取了所有其他可能性的情况下才使用它。

# tortoisesvn - TortoiseSVN 恢复与更新

> ID：10205415
> 
> 赞同：6
> 
> 时间：2012-04-18T08:11:35.187
> 
> 标签：tortoisesvn

跟风有什么区别？

1.  （右键单击项目文件夹）更新到修订 XXX
2.  （右键单击日志列表）恢复到此版本
3.  （右键单击日志列表）从该版本恢复更改

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T14:06:10.960

1.  （右键单击项目文件夹）更新到修订 XXX

> 您的项目文件夹已更新为修订版 XXX。在那次更新之后，您的工作副本不再是最新版本，您不能提交您所做的任何更改。如果你想提交，你必须再次更新你的工作副本到 HEAD。这意味着您不能使用此选项来撤消已经提交的更改，而只是为了更好地查看工作副本的早期时间。所以：只用它来看看，而不是工作。

1.  （右键单击日志列表）恢复到此版本

> 对右键单击的修订所做的所有更改都将恢复（从 HEAD 撤消所有更改到 rev）。更改仅在您的工作副本中完成，然后您可以根据需要提交。

1.  （右键单击日志列表）从该版本恢复更改

> 仅还原右键单击的修订。右键单击到 HEAD 之后的修订**不会**恢复。如果您只想撤消一个提交，而不是自特定修订版以来的所有提交，请使用此选项。同样，因为这是一个还原：更改只在您的工作副本中完成，然后您可以根据需要提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:37:59.503

干得好 ：

1）（右键单击项目文件夹）更新到修订 XXX
将工作副本更新到最新的存储库修订，同时保留您的本地修改。

2）（右键单击日志列表）revert to this revision
[Update Item to Revision vs Revert to Revision](https://stackoverflow.com/questions/1214939/update-item-to-revision-vs-revert-to-revision)

3) （右键单击日志列表）从该修订中恢复更改 在该修订
中所做的更改以及仅在该修订中所做的更改将从工作副本中删除，同时保留您的本地修改。

# java - 无状态会话 Bean 与无状态单例

> ID：10205416
> 
> 赞同：3
> 
> 时间：2012-04-18T08:11:39.007
> 
> 标签：java, jakarta-ee, ejb, ejb-3.0, openejb

我是 EJB 的新手，最近开始研究 EJB (3.0)。我已经使用 Java 6 年了，但之前从未使用过 EJB。至少可以说，整个 EJB 业务的复杂性让我不知所措。我不明白我可以在哪里实际应用一些概念。

在理解了无状态会话 bean 后，我想到的一个问题是，你能不能总是用没有本地成员的类的共享实例替换无状态会话 bean（有效地使其无状态）？我读到了关于无状态会话 bean 的实例池。如果没有状态，你不能简单地使用一个实例吗？

我在 OpenEJB 上部署我的示例，我必须使用无状态会话 bean 的一个地方是与 EntityManager 交互。我不确定是否可以在任意类中处理 EntityManager。除此之外，仍然对无状态会话 bean 试图解决什么问题感到困惑。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T08:19:18.917

无状态会话 bean 可能有状态。但它可能没有**会话**状态。因此，会话 bean 方法执行以下操作是完全可以接受的（尽管是不好的做法）：

```
public void foo() {
    this.someVar = bar();
    this.someOtherVar = baz();
    zing();
} 
```

除了池化之外，EJB 容器还提供了几个带有无状态 bean 的服务：

*   依赖注入
*   声明式事务划分
*   声明性安全
*   访问 EJB 上下文
*   等等

因此，无状态会话 bean 比简单的无状态单例有用得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T08:18:44.203

不，无状态会话 bean 可以有状态，但该状态没有被持久化/绑定到会话。该状态的一部分是注入的 EJB 或其他可能是有状态 bean 等的 POJO。因此，每个请求都需要一个无状态会话 bean。

相比之下，您有一个专用于一个用户会话的有状态会话 bean，因此该状态绑定到该会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:46:59.553

您可以在任意类中处理 EntityManager，但真正的问题是您希望如何构建您的解决方案。

除了使用 EJB 的 EJB 复杂性之外，它还为您提供了一个更具可扩展性的解决方案。

如前所述，当您开发基于事务的应用程序时，EJB 很有用。应用服务器为您提供了一些功能，如事务管理、EJB 池、安全性等。

当然，您可以使用“共享类”来实现所有东西，但是当您已经拥有所有东西时，为什么还要重新发明轮子呢？

无状态会话 bean 用于实现应用程序核心部分的业务逻辑。在 Java EE 分层架构中，您有 3 层：1\. 表示 2\. 业务 3\. 数据

EJB 在业务逻辑中扮演着重要角色。您有两种选择 SLSB 和 SFSB。第一个更具可扩展性，并由应用程序服务器汇集，但无法保持其状态。第二个是可扩展性较差的，每个客户端会话都有一个 SFSB。当您必须在客户端之间进行业务逻辑对话时使用它们，例如仅通过对 SFSB 的一次方法调用无法完成的操作。SLSB 和 SFSB 可以持有对 EntityManager 的引用来管理实体持久性，即使我建议您只使用 SLSB 来管理持久性。EJB3 和 JPA 是一个很好的解决方案。希望这对你有帮助

# image-processing - 在opencv中保存tiff文件时有没有办法设置特定的压缩方案？

> ID：10205417
> 
> 赞同：2
> 
> 时间：2012-04-18T08:11:39.443
> 
> 标签：image-processing, opencv, compression, tiff

我正在使用 opencv 裁剪 tif 文件，一切都很好，除了将图像保存到文件 - opencv 总是使用 LZW 压缩，但我不需要压缩结果文件，我非常感谢 opencv 在节省我的磁盘驱动器空间方面的帮助，但现在不是做这件事的合适时机。
那么有没有办法用特定的压缩方案（包括不压缩）来保存 tif 文件？

原始图像没有应用压缩方案，我使用 ROI 选择区域并使用 SaveImage 将其保存到目标文件。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-12-09T18:28:08.177

在 OpenCV 3 中，您可以提供参数向量来更改压缩或每条线等内容，如下所示：

```
vector<int> params = { 
    259, 1,     // No compression, turn off default LZW
    279, 64     // Rows per strip 
};
imwrite("image.tiff", myImage, params); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T09:42:10.627

TIFF 压缩级别是硬编码的，不能在运行时更改。如果你在你的机器上编译 OpenCV，那么你可以在这个文件中编辑压缩级别

```
3rdparty/libtiff/tiff.h 
```

你会发现这一行：

```
#define     COMPRESSION_LZW     5       /* Lempel-Ziv  & Welch */ 
```

希望有帮助。

编辑：在opencv代码中看到这一行： [https](https://github.com/Itseez/opencv/blob/b46719b0931b256ab68d5f833b8fadd83737ddd1/modules/imgcodecs/src/grfmt_tiff.cpp#L564) ://github.com/Itseez/opencv/blob/b46719b0931b256ab68d5f833b8fadd83737ddd1/modules/imgcodecs/src/grfmt_tiff.cpp#L564 你应该能够传递所需的TIFFTAG_COMPRESSION值，包括压缩_无。

# security - 我的身份验证方法是否安全/需要改进？

> ID：10205426
> 
> 赞同：0
> 
> 时间：2012-04-18T08:12:15.777
> 
> 标签：security, session, authentication, cookies

在我的网络应用程序上，我通过以下方式处理身份验证：

1.  用户输入他的电子邮件和密码

2.  在数据库中搜索用户，匹配 bcrypt 加密密码？

3.  如果是这样，新的会话记录将存储在数据库中，其中包含用户 ID 和 128 位随机密钥。此外，此密钥作为“安全”、“仅限 http”cookie 存储在客户端上。

4.  每当用户向 Web 应用程序发出请求时，关键是在数据库中搜索会话的参考。如果有会话-> 已通过身份验证。

5.  会话在一定时间后被删除（例如 3 小时）

注意：所有请求都经过 SSL 加密。

您是否发现此身份验证过程中存在任何缺陷？使用它时可能有什么危险？

谢谢！

埃利亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:23:57.753

我可以在这里看到两个 DoS 攻击场景。

1.  机器人可以在您的服务器上触发具有随机会话 ID 的随机请求，从而导致如此多的会话查找，如果您的会话 ID 可以在检查数据库之前使用算法验证为有效会话 ID，那么您的会话管理可能会在理想情况下不堪重负会更好。
2.  登录屏幕可能会被具有各种 uid/pwd 组合的机器人点击，这将导致在 DB 上进行多个用户/pwd 搜索。在内存中拥有 LRU uid/pwd 缓存可以解决此问题，并且还可以为来自同一 IP 的多个登录请求提供验证码。

你没有提到的一点是你什么时候会过期会话 - 如果用户没有注销你什么时候会从你的表中清除会话 ID？如果会话 ID 同时从 cookie 中被劫持怎么办？

# c# - 获取对象的实例名称而不是 C# 4.0 中的对象类型名称

> ID：10205427
> 
> 赞同：5
> 
> 时间：2012-04-18T08:12:20.857
> 
> 标签：c#, .net, c#-4.0, reflection

假设这种类型：

```
public class Car { } 
```

我创建了一个实例：

```
Car myCar = new Car();

Target target = new Target();
target.Model = myCar; 
```

这是另一种类型：

```
public class Target {

   public object Model { get; set; }

   string GetName(){

     //Use Model and return myCar in this Example
   }

} 
```

正如我在代码中展示的那样，该`GetName`方法必须使用对象类型 ( `Model`) 并返回实例的名称，在这个例子中是 myCar？你有什么建议有什么办法吗？

**更新** 这个怎么样：

```
public class Car {

  public string Title { get; set; }

} 
```

我传递给目标：`target.Model = Car.Title`

并`GetName()`返回方法`Title`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T08:16:27.367

对象没有名字，除非他们明确地有办法存储他们的名字。`myCar`是一个局部变量 - 对象本身 (the `Car`)**不知道**您通过名称引用它`myCar`。为了显示：

```
Car myCar = new Car();
Car car2 = myCar;
Car car3 = myCar; 
```

现在所有三个变量都指向*相同* `Car`的.

如果你想让汽车有名字，你可以这样做

```
public class Car 
{
    public string Name { get; set; }
} 
```

然后分配并读取您希望它具有的任何名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T08:16:57.507

不，这是不可能的。为什么？因为`myCar`它只是您为其设置变量的范围*内*的实例的*名称。*保存到的是对实例的*引用。*因此，在您的示例代码之后，两者和引用相同的实例，只是名称不同。名称本身对程序的执行并不重要，它只是我们用来使讨论实例更容易的一个技巧。`Car`*`target.Model`*`Car``myCar``target.Model``Car`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T08:16:35.583

没有“实例名称”之类的东西。您所说的是对该对象的特定引用的名称；可能有许多对同一个对象的引用，它们都具有不同的名称。此外，链接代码和数据（即依赖变量名）是一种不好的做法。

如果你想`Car`有一些名字，然后**明确**命名：

```
public class Car {
    public string Name { get; set; }
} 

Car myCar = new Car { Name = "myCar" }; 
```**

# java - 将一个字符串与一个表达式中的多个值进行比较

> ID：10205437
> 
> 赞同：74
> 
> 时间：2012-04-18T08:13:15.717
> 
> 标签：java, regex, string

我有一个字符串变量，`str`有可能的值`val1`、`val2`和`val3`。

我想`str`使用 if 语句将（大小写相同）与所有这些值进行比较，例如：

```
if("val1".equalsIgnoreCase(str)||"val2".equalsIgnoreCase(str)||"val3".equalsIgnoreCase(str))
{
      //remaining code
} 
```

有没有办法避免使用多个 OR (||) 运算符并比较一个表达式中的值？例如，像这样：

```
 if(("val1" OR "val2" OR "val3").equalsIgnoreCase(str)   //this is only an idea. 
```

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-04-18T15:59:09.957

我找到了更好的解决方案。这可以通过 RegEx 来实现：

```
if (str.matches("val1|val2|val3")) {
     // remaining code
} 
```

对于不区分大小写的匹配：

```
if (str.matches("(?i)val1|val2|val3")) {
     // remaining code
} 
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2016-12-03T21:08:22.587

在 Java 8+ 中，您可以使用 a[`Stream<T>`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html)和[`anyMatch(Predicate<? super T>)`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#anyMatch-java.util.function.Predicate-)类似的东西

```
if (Stream.of("val1", "val2", "val3").anyMatch(str::equalsIgnoreCase)) {
    // ...
} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-04-18T08:16:57.823

您可以将要比较`str`的所有字符串存储到一个集合中，并检查该集合是否包含`str`. 将集合中的所有字符串存储为小写，并`str`在查询集合之前转换为小写。例如：

```
Set<String> strings = new HashSet<String>();
strings.add("val1");
strings.add("val2");

String str = "Val1";

if (strings.contains(str.toLowerCase()))
{
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-11-19T23:06:09.093

使用 apache 公共库中的 StringUtils 的[另](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#equalsAnyIgnoreCase-java.lang.CharSequence-java.lang.CharSequence...-)一种选择（有点类似于上面的[https://stackoverflow.com/a/32241628/6095216）：https://commons.apache.org/proper/commons-lang/apidocs/org/](https://stackoverflow.com/a/32241628/6095216) [apache/commons/lang3/StringUtils.html#equalsAnyIgnoreCase-java.lang.CharSequence-java.lang.CharSequence...-](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#equalsAnyIgnoreCase-java.lang.CharSequence-java.lang.CharSequence...-)

```
if (StringUtils.equalsAnyIgnoreCase(str, "val1", "val2", "val3")) {
  // remaining code
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-06-21T15:28:12.157

这是一个具有多种选择的性能测试（一些区分大小写，另一些不区分大小写）：

```
public static void main(String[] args) {
    // Why 4 * 4:
    // The test contains 3 values (val1, val2 and val3). Checking 4 combinations will check the match on all values, and the non match;
    // Try 4 times: lowercase, UPPERCASE, prefix + lowercase, prefix + UPPERCASE;
    final int NUMBER_OF_TESTS = 4 * 4;
    final int EXCUTIONS_BY_TEST = 1_000_000;
    int numberOfMatches;
    int numberOfExpectedCaseSensitiveMatches;
    int numberOfExpectedCaseInsensitiveMatches;
    // Start at -1, because the first execution is always slower, and should be ignored!
    for (int i = -1; i < NUMBER_OF_TESTS; i++) {
        int iInsensitive = i % 4;
        List<String> testType = new ArrayList<>();
        List<Long> timeSteps = new ArrayList<>();
        String name = (i / 4 > 1 ? "dummyPrefix" : "") + ((i / 4) % 2 == 0 ? "val" : "VAL" )+iInsensitive ;
        numberOfExpectedCaseSensitiveMatches = 1 <= i && i <= 3 ? EXCUTIONS_BY_TEST : 0;
        numberOfExpectedCaseInsensitiveMatches = 1 <= iInsensitive && iInsensitive <= 3 && i / 4 <= 1 ? EXCUTIONS_BY_TEST : 0;
        timeSteps.add(System.currentTimeMillis());
        //-----------------------------------------
        numberOfMatches = 0;
        testType.add("List (Case sensitive)");
        for (int j = 0; j < EXCUTIONS_BY_TEST; j++) {
            if (Arrays.asList("val1", "val2", "val3").contains(name)) {
                numberOfMatches++;
            }
        }
        if (numberOfMatches != numberOfExpectedCaseSensitiveMatches) {
            throw new RuntimeException();
        }
        timeSteps.add(System.currentTimeMillis());

        //-----------------------------------------
        numberOfMatches = 0;
        testType.add("Set (Case sensitive)");
        for (int j = 0; j < EXCUTIONS_BY_TEST; j++) {
            if (new HashSet<>(Arrays.asList(new String[] {"val1", "val2", "val3"})).contains(name)) {
                numberOfMatches++;
            }
        }
        if (numberOfMatches != numberOfExpectedCaseSensitiveMatches) {
            throw new RuntimeException();
        }
        timeSteps.add(System.currentTimeMillis());

        //-----------------------------------------
        numberOfMatches = 0;
        testType.add("OR (Case sensitive)");
        for (int j = 0; j < EXCUTIONS_BY_TEST; j++) {
            if ("val1".equals(name) || "val2".equals(name) || "val3".equals(name)) {
                numberOfMatches++;
            }
        }
        if (numberOfMatches != numberOfExpectedCaseSensitiveMatches) {
            throw new RuntimeException();
        }
        timeSteps.add(System.currentTimeMillis());

        //-----------------------------------------
        numberOfMatches = 0;
        testType.add("OR (Case insensitive)");
        for (int j = 0; j < EXCUTIONS_BY_TEST; j++) {
            if ("val1".equalsIgnoreCase(name) || "val2".equalsIgnoreCase(name) || "val3".equalsIgnoreCase(name)) {
                numberOfMatches++;
            }
        }
        if (numberOfMatches != numberOfExpectedCaseInsensitiveMatches) {
            throw new RuntimeException();
        }
        timeSteps.add(System.currentTimeMillis());

        //-----------------------------------------
        numberOfMatches = 0;
        testType.add("ArraysBinarySearch(Case sensitive)");
        for (int j = 0; j < EXCUTIONS_BY_TEST; j++) {
            if (Arrays.binarySearch(new String[]{"val1", "val2", "val3"}, name) >= 0) {
                numberOfMatches++;
            }
        }
        if (numberOfMatches != numberOfExpectedCaseSensitiveMatches) {
            throw new RuntimeException();
        }
        timeSteps.add(System.currentTimeMillis());

        //-----------------------------------------
        numberOfMatches = 0;
        testType.add("Java8 Stream (Case sensitive)");
        for (int j = 0; j < EXCUTIONS_BY_TEST; j++) {
            if (Stream.of("val1", "val2", "val3").anyMatch(name::equals)) {
                numberOfMatches++;
            }
        }
        if (numberOfMatches != numberOfExpectedCaseSensitiveMatches) {
            throw new RuntimeException();
        }
        timeSteps.add(System.currentTimeMillis());

        //-----------------------------------------
        numberOfMatches = 0;
        testType.add("Java8 Stream (Case insensitive)");
        for (int j = 0; j < EXCUTIONS_BY_TEST; j++) {
            if (Stream.of("val1", "val2", "val3").anyMatch(name::equalsIgnoreCase)) {
                numberOfMatches++;
            }
        }
        if (numberOfMatches != numberOfExpectedCaseInsensitiveMatches) {
            throw new RuntimeException();
        }
        timeSteps.add(System.currentTimeMillis());

        //-----------------------------------------
        numberOfMatches = 0;
        testType.add("RegEx (Case sensitive)");
        // WARNING: if values contains special characters, that should be escaped by Pattern.quote(String)
        for (int j = 0; j < EXCUTIONS_BY_TEST; j++) {
            if (name.matches("val1|val2|val3")) {
                numberOfMatches++;
            }
        }
        if (numberOfMatches != numberOfExpectedCaseSensitiveMatches) {
            throw new RuntimeException();
        }
        timeSteps.add(System.currentTimeMillis());

        //-----------------------------------------
        numberOfMatches = 0;
        testType.add("RegEx (Case insensitive)");
        // WARNING: if values contains special characters, that should be escaped by Pattern.quote(String)
        for (int j = 0; j < EXCUTIONS_BY_TEST; j++) {
            if (name.matches("(?i)val1|val2|val3")) {
                numberOfMatches++;
            }
        }
        if (numberOfMatches != numberOfExpectedCaseInsensitiveMatches) {
            throw new RuntimeException();
        }
        timeSteps.add(System.currentTimeMillis());

        //-----------------------------------------
        numberOfMatches = 0;
        testType.add("StringIndexOf (Case sensitive)");
        // WARNING: the string to be matched should not contains the SEPARATOR!
        final String SEPARATOR = ",";
        for (int j = 0; j < EXCUTIONS_BY_TEST; j++) {
            // Don't forget the SEPARATOR at the begin and at the end!
            if ((SEPARATOR+"val1"+SEPARATOR+"val2"+SEPARATOR+"val3"+SEPARATOR).indexOf(SEPARATOR + name + SEPARATOR)>=0) {
                numberOfMatches++;
            }
        }
        if (numberOfMatches != numberOfExpectedCaseSensitiveMatches) {
            throw new RuntimeException();
        }
        timeSteps.add(System.currentTimeMillis());

        //-----------------------------------------
        StringBuffer sb = new StringBuffer("Test ").append(i)
                .append("{ name : ").append(name)
                .append(", numberOfExpectedCaseSensitiveMatches : ").append(numberOfExpectedCaseSensitiveMatches)
                .append(", numberOfExpectedCaseInsensitiveMatches : ").append(numberOfExpectedCaseInsensitiveMatches)
                .append(" }:\n");
        for (int j = 0; j < testType.size(); j++) {
            sb.append(String.format("    %4d ms with %s\n", timeSteps.get(j + 1)-timeSteps.get(j), testType.get(j)));
        }
        System.out.println(sb.toString());
    }
} 
```

输出（只有最坏的情况，即必须检查所有不匹配的元素）：

```
Test 4{ name : VAL0, numberOfExpectedCaseSensitiveMatches : 0, numberOfExpectedCaseInsensitiveMatches : 0 }:
  43 ms with List (Case sensitive)
 378 ms with Set (Case sensitive)
  22 ms with OR (Case sensitive)
 254 ms with OR (Case insensitive)
  35 ms with ArraysBinarySearch(Case sensitive)
 266 ms with Java8 Stream (Case sensitive)
 531 ms with Java8 Stream (Case insensitive)
1009 ms with RegEx (Case sensitive)
1201 ms with RegEx (Case insensitive)
 107 ms with StringIndexOf (Case sensitive) 
```

Warpspeed SCP 提供的输出，更改测试以填充循环之外的集合，模拟当要测试的值列表永远不会更改时的代码（并且可以缓存集合）。

（由于是在不同的环境下执行的，本次测试的时间不要和上一次比较，只比较同一个测试不同策略的时间）：

```
Test 4{ name : VAL0, numberOfExpectedCaseSensitiveMatches : 0, numberOfExpectedCaseInsensitiveMatches : 0 }:
    26 ms with List (Case sensitive)
    6 ms with Set (Case sensitive)
    12 ms with OR (Case sensitive)
    371 ms with OR (Case insensitive)
    14 ms with ArraysBinarySearch(Case sensitive)
    100 ms with Java8 Stream (Case sensitive)
    214 ms with Java8 Stream (Case insensitive)
    773 ms with RegEx (Case sensitive)
    946 ms with RegEx (Case insensitive)
    37 ms with StringIndexOf (Case sensitive) 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-08-27T05:53:02.937

`ArrayUtils`可能会有所帮助。

```
ArrayUtils.contains(new String[]{"1", "2"}, "1") 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-09-14T10:51:15.427

对完全有效[的@hmjd 答案的](https://stackoverflow.com/a/10205481/814297)小改进：您可以使用以下语法：

```
class A {

  final Set<String> strings = new HashSet<>() {{
    add("val1");
    add("val2");
  }};

  // ...

  if (strings.contains(str.toLowerCase())) {
  }

  // ...
} 
```

它允许您`Set`就地初始化您。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-04-18T08:19:43.037

只需使用 var-args 并编写自己的静态方法：

```
public static boolean compareWithMany(String first, String next, String ... rest)
{
    if(first.equalsIgnoreCase(next))
        return true;
    for(int i = 0; i < rest.length; i++)
    {
        if(first.equalsIgnoreCase(rest[i]))
            return true;
    }
    return false;
}

public static void main(String[] args)
{
    final String str = "val1";
    System.out.println(compareWithMany(str, "val1", "val2", "val3"));
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-12-26T18:40:08.600

Apache Commons Collection 类。

StringUtils.equalsAny(CharSequence 字符串，CharSequence...searchStrings)

所以在你的情况下，它会是

StringUtils.equalsAny(str, "val1", "val2", "val3");

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-03-19T01:16:33.787

从 Java 9 开始，您可以使用以下任一

```
List.of("val1", "val2", "val3").contains(str.toLowerCase())

Set.of("val1", "val2", "val3").contains(str.toLowerCase()); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-06-18T09:40:28.910

建议的解决方案很多，大多数是可行的解决方案。但是我必须在这里补充一点，人们建议使用正则表达式 ie`str.matches("val1|val2|val3")`是可以的

1.  如果多次调用方法/代码，则性能不佳
2.  它不是空安全的

我建议改用 apache commons lang3 `StringUtils.equalsAny(str, "val1", "val2", "val3")`stringUtils

测试：

```
public static void main(String[] args) {
        String var = "val1";
        long t, t1 = 0, t2 = 0;

        for (int i = 0; i < 1000; i++) {
            t = System.currentTimeMillis();
            var.matches("val1|val2|val3");
            t1 += System.currentTimeMillis() - t;

            t = System.currentTimeMillis();
            StringUtils.equalsAny(var, "val1", "val2", "val3");
            t2 += System.currentTimeMillis() - t;
        }
        System.out.println("Matches took + " + t1 + " ms\nStringUtils took " + t2 + " ms");
    } 
```

1000 次迭代后的结果：

```
Matches took + 18 ms
StringUtils took 7 ms 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-07-31T11:45:34.597

对于那些来这里进行精确平等检查（不忽略大小写）的人，我发现

```
if (Arrays.asList(str1, str2, str3).contains(strToCheck)) {
    ...
} 
```

是最简洁的解决方案之一，并且在 Java 7 上可用。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-04-18T08:21:10.493

您可以使用 Collections 框架来实现这一点。将您的所有选项放在一个集合中，例如`Collection<String> options`：

然后循环通过它来比较你的字符串和列表元素，如果是，你可以返回一个布尔值 true，否则返回 false。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-01-19T08:46:22.703

请记住，在 Java 中，带引号的 String 仍然是 String 对象。因此，您可以使用 String 函数 contains() 使用此方法测试一系列字符串或整数：

```
if ("A C Viking G M Ocelot".contains(mAnswer)) {...} 
```

对于数字，它涉及更多但仍然有效：

```
if ("1 4 5 9 10 17 23 96457".contains(String.valueOf(mNumAnswer))) {...} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-02-03T09:08:28.260

很抱歉回答这个老问题，对于 Java 8+，我认为最好的解决方案是 Elliott Frisch ( `Stream.of("str1", "str2", "str3").anyMatches(str::equalsIgnoreCase)`) 提供的解决方案，但它似乎缺少最古老的 Java 版本的最简单解决方案之一：

```
if(Arrays.asList("val1", "val2", "val3", ..., "val_n").contains(str.toLowerCase())){
//...
} 
```

您可以通过检查 variable 的非空性`str`并在创建后缓存列表来应用一些错误预防。

```
// List of lower-case possibilities
final List<String> list = Arrays.asList("val1", "val2", "val3", ..., "val_n");
for(String str : somethingYouCouldTheReadStringFrom()){
  if(str != null && list.contains(str.toLowerCase())){
    //...
  }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-02-03T09:18:48.517

既然这个问题已经重新打开，我不妨提出一个`enum`解决方案。

```
enum ValidValues {
   VAL1, VAL2, VAL3;

   public static boolean isValid(String input) {
       return Stream.of(ValidValues.values())
                    .map(ValidValues::name)
                    .anyMatch(s -> s.equalsIgnoreCase(input));
   }
} 
```

或者你可以只使用流语句

```
Stream.of("val1", "val2", "val3")
      .anyMatch(s -> s.equalsIgnoreCase(str)) 
```

如果你只在一个地方使用它。

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2016-11-10T10:09:01.953

```
!string.matches("a|b|c|d") 
```

对我来说很好。

* * *

## 回答 #18

> 赞同：-3
> 
> 时间：2012-04-18T08:17:26.283

不，不存在这种可能性。尽管如此，人们可以想象：

```
public static boolean contains(String s, Collection<String>c) {
    for (String ss : c) {
       if (s.equalsIgnoreCase(ss)) return true;
    }
    return false;
} 
```

# git - 我可以在 git-ignored 文件夹中有一个嵌套的 git repo 吗？

> ID：10205438
> 
> 赞同：33
> 
> 时间：2012-04-18T08:13:18.507
> 
> 标签：git, github, git-submodules

我有一个 git repo，其中包含以下文件夹：

```
 _includes/
 _layouts/
 _plugins/
 _posts/
 _site/ 
```

_site 文件夹被添加到`.gitignore`文件中。

现在我可以在 _site 文件夹中有一个 git repo 并使用不同的远程 repo 进行推送和拉取吗？会不会有冲突？

我研究过 git 子模块，但如果上述方法可行，我认为在我的情况下这将是一种矫枉过正。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-18T08:16:46.930

我认为它应该工作。对于主仓库，`_site`文件夹不存在。所以你里面有什么并不重要。当你`cd`进入`_site`你将在那个独立的回购。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-18T08:22:22.807

是的 - 我刚试过。这是我的命令行会话：

```
$ mkdir temp
$ cd temp
$ git init 
Initialized empty Git repository in /Users/mpdaugherty/temp/.git/
$ git add .
$ git status
# On branch master
#
# Initial commit
#
nothing to commit (create/copy files and use "git add" to track)
$ echo 'ignore' >> .gitignore
$ git add .
$ git commit -a -m 'first commit'
[master (root-commit) 17d293c] first commit
 1 files changed, 1 insertions(+), 0 deletions(-)
 create mode 100644 .gitignore
$ mkdir ignore
$ git status
# On branch master
nothing to commit (working directory clean)
$ cd ignore
$ git init .
Initialized empty Git repository in /Users/mpdaugherty/temp/ignore/.git/
$ echo 'Some text' > somefile.txt
$ git status
# On branch master
#
# Initial commit
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   somefile.txt
nothing added to commit but untracked files present (use "git add" to track)
$ git add .
$ git commit -a -m 'initial commit'
[master (root-commit) 107f980] initial commit
 1 files changed, 1 insertions(+), 0 deletions(-)
 create mode 100644 somefile.txt
$ cd ..
$ git status
# On branch master
nothing to commit (working directory clean) 
```

# oracle - Oracle 8i 说 PLS-00382：表达式类型错误，但我没有看到

> ID：10205442
> 
> 赞同：2
> 
> 时间：2012-04-18T08:13:26.693
> 
> 标签：oracle, csv, plsql, oracle8i

以下代码基于 AskTom 的一个流行线程，[导出到 CSV](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:88212348059)

我确实在内部循环中用一些代码修改了原始脚本，以处理嵌入的逗号和引号字符。

我无法让它在 Oracle 8i 上编译。

我使用 DBA Studio 设置了 utl_file_dir 的值。然后我使用 SQL*Worksheet 运行脚本。报告的错误表明第 46 行是问题所在。

```
 CREATE OR REPLACE PROCEDURE dump_table_to_csv
            ( p_tname IN VARCHAR2,
            p_dir   IN VARCHAR2,
            p_filename IN VARCHAR2 )
    IS

    l_output        utl_file.file_type;
    l_theCursor     INTEGER DEFAULT dbms_sql.open_cursor;
    l_columnValue   VARCHAR2(4000);
    l_status        INTEGER;
    l_query         VARCHAR2(1000) DEFAULT 'select * from ' || p_tname;
    l_colCnt        NUMBER := 0;
    l_separator     VARCHAR2(1);
    l_descTbl       dbms_sql.desc_tab;
    l_quote    VARCHAR2(1);

    BEGIN
            l_output := utl_file.fopen( p_dir, p_filename, 'w', 32760 );
            -- adjust date so the format is compatible with the target system
            -- in this case, PostgreSQL 9
            EXECUTE IMMEDIATE 'alter session set nls_date_format=''yyyy-mm-dd hh24:mi:ss'' ';
            -- the original version used the "rr" moniker for year.
            -- execute immediate 'alter session set nls_date_format=''rr-mm-dd hh24:mi:ss'' ';

            -- set up first row with column names
            dbms_sql.parse(  l_theCursor,  l_query, dbms_sql.native );
            dbms_sql.describe_columns( l_theCursor, l_colCnt, l_descTbl );

            FOR i IN 1 .. l_colCnt LOOP
                    utl_file.put( l_output, l_separator || '"' || l_descTbl(i).col_name || '"' );
                    dbms_sql.define_column( l_theCursor, i, l_columnValue, 4000 );
                    l_separator := ',';
            END LOOP;

            utl_file.new_line( l_output );
            l_status := dbms_sql.EXECUTE(l_theCursor);

            -- iterate through the data, for each row check each column
            WHILE ( dbms_sql.fetch_rows(l_theCursor) > 0 ) LOOP
                    l_separator := '';

                    FOR i IN 1 .. l_colCnt LOOP
                            dbms_sql.column_value( l_theCursor, i, l_columnValue );
                            --
                            -- if the separator or quote is embedded in the value then enclose in double-quotes
                            IF INSTR(l_columnValue, ',') != 0 OR INSTR(l_columnValue, '"') THEN
                                    l_quote := '"';
                                    -- double any/all embedded quotes
                                    l_columnValue := REPLACE(l_columnValue,'"','""');
                            ELSE
                                    l_quote := '';
                            END IF;
                            l_columnValue := l_separator || l_quote || l_columnValue || l_quote;
                            --
                            -- write the value to disk
                            utl_file.put( l_output, l_separator || l_columnValue );
                            l_separator := ',';
                    END LOOP;

                    utl_file.new_line( l_output );
            END LOOP;

            dbms_sql.close_cursor(l_theCursor);
            utl_file.fclose( l_output );

            EXECUTE IMMEDIATE 'alter session set nls_date_format=''dd-MON-yy'' ';

    EXCEPTION
            WHEN OTHERS THEN
                    EXECUTE IMMEDIATE 'alter session set nls_date_format=''dd-MON-yy'' ';
                    RAISE;
    END; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T08:19:26.050

您缺少第46 行`!= 0`中的第二次调用：`instr()`

```
if instr(l_columnValue, ',') != 0 or instr(l_columnValue, '"') then 
```

应该：

```
if instr(l_columnValue, ',') != 0 or instr(l_columnValue, '"') != 0 then 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T08:20:04.760

Oracle 在哪一行引发错误？

我跳出来的第一个错误是这条线

```
IF INSTR(l_columnValue, ',') != 0 OR INSTR(l_columnValue, '"') THEN 
```

`INSTR`返回一个数字。您的条件的第一部分将 的输出`INSTR`与一个数字进行比较。`INSTR`第二个没有 - 只有在返回布尔值时才有效。听起来你想要

```
IF INSTR(l_columnValue, ',') != 0 OR INSTR(l_columnValue, '"') != 0 THEN 
```

# vim - vim对齐插件

> ID：10205447
> 
> 赞同：1
> 
> 时间：2012-04-18T08:13:59.380
> 
> 标签：vim, plugins, alignment

> **可能重复：**
> [如何在 X 列之前插入空格以排列列中的内容？](https://stackoverflow.com/questions/6154306/how-to-insert-spaces-up-to-column-x-to-line-up-things-in-columns)

有什么插件可以制作：

```
var joe = 'joe';
var johnny = 'johnny';
var quaid = 'quaid'; 
```

变成：

```
var joe    = 'joe';
var johnny = 'johnny';
var quaid  = 'quaid'; 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:48:43.983

看这里：

[对齐.Vim](http://www.vim.org/scripts/script.php?script_id=294)

[表格](http://www.vim.org/scripts/script.php?script_id=3464)

# c# - PostBackTrigger 用于 GridView 中的 FileUpload 功能

> ID：10205452
> 
> 赞同：0
> 
> 时间：2012-04-18T08:14:15.230
> 
> 标签：c#, asp.net, gridview, triggers, postback

我在 .aspx 页面中有一个 asp:GridView 控件，用户可以向其中添加几行数据。用户还必须能够将文件附加到添加的每一行数据。

为此，我在 GridView 中使用以下内容：

```
<asp:TemplateField HeaderText="Upload" HeaderStyle-Width="120px">
     <EditItemTemplate>
         <asp:FileUpload ID="fuUploadLocation" runat="server" Width="98%" TabIndex="18" />
     </EditItemTemplate>
</asp:TemplateField> 
```

然后为了保存文件上传的位置，我在代码隐藏中使用 RowUpdating 事件来设置值等。

问题是我无法为 html 上的控件注册 PostBackTrigger，因为它在 GridView 内部时没有拾取它。我尝试从其他示例中动态设置它，但似乎无法使其正常工作，结果是我的 FileUpload 的 FileName 始终为空，然后文件无法正确保存。

任何建议都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:30:46.650

我还没有找到解决我的问题的方法，但我确实解决了它（有点）。我知道只需向网格添加一个链接，当用户单击它通过查询字符串发送 ID 时，会打开一个新页面来处理整个上传过程并返回已保存文档的 url。

不理想，但它有效并为我节省了数小时的挫败感。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-19T11:17:47.643

这是一篇旧帖子，但对于任何被它困住的人，您需要将以下内容添加到您的控件中，如其他答案中所述。

```
protected void ItemDataBound(object sender, EventArgs e)
{
    Button myButton = (Button)e.Item.FindControl("myButton");

    if (myButton != null) 
        ScriptManager.GetCurrent(Page).RegisterPostBackControl(myButton);
} 
```

您还需要将表单标签中的 enctype 更改为以下内容，例如：

```
protected void Page_PreRender(object sender, EventArgs e)
{
     Page.Form.Attributes.Add("enctype", "multipart/form-data");
} 
```

然后它应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T18:36:16.053

在网格的 OnItemDataBound 事件处理程序中需要调用 ScriptManager.GetCurrent(this).RegisterPostBackControl(ControlID);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T08:49:52.080

在 Gridview 行数据绑定上，您必须找到文件上传控件，然后将其添加到 UpdatePanel 回发触发器。

# c# - 在 C# DataGridView 中运行总余额列

> ID：10205454
> 
> 赞同：0
> 
> 时间：2012-04-18T08:14:17.273
> 
> 标签：c#, winforms

来自数据库的余额列...但是当我在任何行的 Pkt No. 列中输入相同的 Pkt No. 时，余额值会改变。

```
Pkt No    Balance    Item Code    Weight
323-12    10         11001          3 
323-12    7          11002          3
323-12    4          11003          4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:20:14.080

如果您使用的是 WPF ..这可能会有所帮助

[http://www.aspdotnet-suresh.com/2011/02/how-to-display-sum-of-columns-total-in.html](http://www.aspdotnet-suresh.com/2011/02/how-to-display-sum-of-columns-total-in.html)

# xcode - xcode 4.3.2 进程挂起

> ID：10205455
> 
> 赞同：2
> 
> 时间：2012-04-18T08:14:19.647
> 
> 标签：xcode, ios-simulator

我在 Xcode 4.3.2 中遇到了一个相当烦人的错误。

如果您从 Xcode 中运行一个进程，然后直接停止模拟器（在 Xcode 之外），Xcode 仍然显示该进程正在运行并有效地禁用与模拟器的任何进一步交互。

我无法从 Xcode 中停止进程（无响应），也无法启动新进程，因为 Xcode 认为模拟器正在使用中。关闭模拟器也不会通知 Xcode，所以我别无选择，只能关闭 Xcode 并再次打开它但即使这样也不起作用，因为 Xcode 在尝试关闭进程时也会挂起！所以我必须强制退出 Xcode！

有没有人找到解决这个问题的方法？我意识到我现在应该只在 Xcode 中操作模拟器，但我已经习惯了能够独立操作模拟器。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T03:25:10.930

我在使用 Xcode 4.3.2 时遇到了类似的问题。我通过执行以下操作修复了它们：

1.  启动 Xcode。

2.  关闭所有打开的项目。

3.  打开组织者。

4.  使用左下角的齿轮图标删除项目表单左侧面板。选择“从管理器中删除...”。这将清除 Xcode 缓存的有关项目的所有数据（索引、DerivedData、快照等）。

5）。重新打开项目。

自从这样做以来，我的 Xcode 挂起问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:43:47.833

以下是我在发生这种情况时遵循的步骤：

*   如果模拟器尚未运行，请启动它
*   从 iOS 模拟器菜单中选择“重置内容和设置...”选项
*   清理并重建项目

# c# - 如何摆脱子元素中的空命名空间“xmlns="""？

> ID：10205459
> 
> 赞同：0
> 
> 时间：2012-04-18T08:14:41.423
> 
> 标签：c#, xml, namespaces, xml-namespaces

我有这个

```
XNamespace ns = "http://something0.com";
XNamespace xsi = "http://something1.com";
XNamespace schemaLocation = "http://something3.com";

XDocument doc2 = new XDocument(
    new XElement(ns.GetName("Foo"),
        new XAttribute(XNamespace.Xmlns + "xsi", xsi),
        new XAttribute(xsi.GetName("schemaLocation"), schemaLocation),
        new XElement("ReportHeader", GetSection()),
        GetGroup() 
    )
); 
```

它给

```
<?xml version="1.0" encoding="utf-8"?>
<Foo xmlns:xsi="http://something1.com"
xsi:schemaLocation="http://something3.com" 
xmlns="http://something0.com">
    <ReportHeader xmlns="">
        ...
    </ReportHeader>
    <Group xmlns="">
        ...
    </Group>
</Foo> 
```

但是我不想要这个结果，怎么办？（注意`xmlns=""`缺少..）

```
<?xml version="1.0" encoding="utf-8"?>
<Foo xmlns:xsi="http://something1.com"
xsi:schemaLocation="http://something3.com" 
xmlns="http://something0.com">
    <ReportHeader>
        ...
    </ReportHeader>
    <Group>
        ...
    </Group>
</Foo> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T08:26:05.950

您的问题是您将文档的默认命名空间设置为“http://something0.com”，然后附加不在此命名空间中的元素 - 它们位于*空*命名空间中。

您的文档声明它具有 xmlns="http://something0.com" 的默认命名空间，但随后您附加了位于空命名空间中的元素（因为您在附加它们时没有提供它们的命名空间） - 所以它们是所有都被明确标记为 xmlns='' 以表明它们不在文档的默认命名空间中。

这意味着摆脱 xmlns="" 有两种解决方案，但它们具有不同的含义：

1）如果你的意思是你肯定想要`xmlns="http://something0.com"`根元素（指定文档的默认命名空间） - 那么要“消失” xmlns="" 你需要在创建元素时提供这个命名空间：

```
// create a ReportHeader element in the namespace http://something0.com
new XElement(ns + "ReportHeader", GetSection()) 
```

2) 如果这些元素不应该在命名空间“http://something0.com”中，那么您不能将其添加为文档顶部的默认值（xmlns="http://something0\. com”位在根元素上）。

```
XDocument doc2 = new XDocument(
     new XElement("foo",  // note - just the element name, rather  s.GetName("Foo")
          new XAttribute(XNamespace.Xmlns + "xsi", xsi), 
```

您期望的示例输出表明这两种选择中的前者。

# windows-8 - 如何从 Metro 风格应用程序打开地图应用程序？

> ID：10205461
> 
> 赞同：0
> 
> 时间：2012-04-18T08:14:50.657
> 
> 标签：windows-8, microsoft-metro

当用户在我的 Metro 风格应用程序中单击地址时，我想打开 Windows 8 附带的地图应用程序以在地图上显示地址。

我知道由于沙盒，您无法直接启动进程，但可以启动例如。使用[Launcher](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.launcher.aspx)类的浏览器。有没有类似的方法可以用指定的地址启动 Maps 应用程序？

当然可以使用[Bing Maps for Metro Style Apps](http://msdn.microsoft.com/en-us/library/hh846481.aspx)将地图集成到我的应用程序中，但如果存在更简单的方法，我宁愿不去那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:44:57.837

[这是](http://msdn.microsoft.com/en-us/library/windows/apps/jj635237.aspx)“地图应用程序的 URI 方案”的文档。样品：

```
bingmaps: /* Opens the Maps app centered over the user’s region */

bingmaps:?cp=40.726966~-74.006076 /* Opens the Map app centered over New York City */

bingmaps:?cp=40.726966~-74.006076&lvl=10 /* Opens the Maps app centered over NYC at zoom level 10 */

bingmaps:?bb=39.719_-74.52~41.71_-73.5 /* Opens the map over NYC using the bounding box of the screen */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:12:05.620

Windows 8 Maps App 支持[协议激活](http://msdn.microsoft.com/en-us/library/windows/apps/hh452686.aspx)，所以你提到的场景是支持的。URI 定义尚未发布。当 dev.windows.com 上可用时，我会发布一个链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T22:37:38.377

请在我的文章中找到更多详细信息：http: [//dreamteam-mobile.com/blog/2012/06/launch-maps-application-in-windows-8-csharp/](http://dreamteam-mobile.com/blog/2012/06/launch-maps-application-in-windows-8-csharp/)

总结，安装 Nuget Windows8.MapsHelper

```
Install-Package Windows8.MapsHelper 
```

然后使用以下代码：

```
MapsHelper.OpenMaps(lat: latitude, lon: longitude); 
```

# css - 背景和背景颜色有什么区别

> ID：10205464
> 
> 赞同：314
> 
> 时间：2012-04-18T08:15:06.947
> 
> 标签：css, background, background-color

`background`使用和指定背景颜色有什么区别`background-color`？

**片段#1**

```
body { background-color: blue; } 
```

**片段#2**

```
body { background: blue; } 
```

* * *

## 回答 #1

> 赞同：290
> 
> 时间：2012-04-18T08:18:30.157

假设这是两个不同的属性，在您的具体示例中，结果没有区别，因为[`background`](https://developer.mozilla.org/en-US/docs/Web/CSS/background)实际上是

> ```
> background-color  
> background-image  
> background-position  
> background-repeat  
> background-attachment  
> background-clip  
> background-origin  
> background-size 
> ```

因此，除了 之外[`background-color`](https://developer.mozilla.org/en-US/docs/Web/CSS/background-color)，您还可以使用`background`简写添加一个或多个值，而无需多次重复任何其他 `background-*`属性。

选择哪一个基本上取决于您，但它也可能取决于您的样式声明的特定条件（例如，如果您只需要在从父元素`background-color`继承其他相关`background-*`属性时覆盖，或者如果您需要删除所有值除了`background-color`）。

* * *

## 回答 #2

> 赞同：170
> 
> 时间：2012-04-18T08:20:42.320

`background`将取代所有以前`background-color`的 ,`background-image`等规范。它基本上是一个速记，但也是一个**重置**。

我有时会使用它来覆盖`background`模板自定义中的先前规范，我需要以下内容：

`background: white url(images/image1.jpg) top left repeat;`

如下：

`background: black;`

因此，所有参数 ( `background-image`, `background-position`, `background-repeat`) 将重置为其默认值。

* * *

## 回答 #3

> 赞同：98
> 
> 时间：2014-06-11T19:15:13.523

关于**CSS 性能**：

**`background`**与**`background-color`**：

> 比较 18 种颜色样本在页面上以小矩形呈现 100 次，一次带有**背景**，一次带有**背景色**。

![背景与背景颜色](../Images/ec2e84d068e92d282c53547d8bc4b51e.png)

> 虽然这些数字来自单个页面重新加载，但随着后续刷新渲染时间发生了变化，但每次的百分比差异基本相同。
> 
> **在 Safari 7.0.1 中使用背景而不是背景颜色时**，这节省了近 42.6 毫秒，几乎快了两倍。**Chrome 33 似乎也差不多。**
> 
>  **老实说，这让我大吃一惊，因为最长的时间有两个原因：
> 
> *   我通常总是主张 CSS 属性的明确性，尤其是背景，因为它会对未来的特异性产生不利影响。
> *   我以为当浏览器看到时`background: #000;`，他们真的看到了`background: #000 none no-repeat top center;`。我这里没有资源链接，但我记得在某处读过这个。**

 ****参考：** [https ://github.com/mdo/css-perf#background-vs-background-color](https://github.com/mdo/css-perf#background-vs-background-color)

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2012-04-18T08:20:43.683

`background`您可以设置所有`background`属性，例如：

*   `background-color`
*   `background-image`

*   `background-repeat`

*   `background-position`
    ***等等***

* * *

你`background-color`可以指定背景的颜色

```
background: url(example.jpg) no-repeat center center #fff; 
```

*VS。*

```
background-image: url(example.jpg);
background-position: center center;
background-repeat: no-repeat;
background-color: #fff; 
```

* * *

## [更多信息](http://www.w3schools.com/css/css_background.asp)

***（见标题：背景 - 速记属性）***

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-04-18T08:57:33.587

区别之一：

如果您以这种方式使用图像作为背景：

```
background: url('Image Path') no-repeat; 
```

那么你不能用“背景颜色”属性覆盖它。

但是如果您使用背景来应用颜色，它与背景颜色相同并且可以被覆盖。

例如： http: [//jsfiddle.net/Z57Za/11/](http://jsfiddle.net/Z57Za/11/)和[http://jsfiddle.net/Z57Za/12/](http://jsfiddle.net/Z57Za/12/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-18T08:18:14.520

*没有区别。*两者都将以相同的方式工作。

> > CSS 背景属性用于定义元素的背景效果。
> > 
> > 用于背景效果的 CSS 属性：
> 
> *   背景颜色
> *   背景图片
> *   背景重复
> *   背景附件
> *   背景位置

背景属性包括所有这些属性，您可以将它们写在一行中。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-04-18T08:22:05.190

他们都是一样的。有多个背景选择器（即`background-color`, `background-image`, `background-position`），您可以通过更简单的`background`选择器或更具体的选择器来访问它们。例如：

```
background: blue url(/myImage.jpg) no-repeat; 
```

或者

```
background-color: blue;
background-image: url(/myImage.jpg);
background-repeat: no-repeat; 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-04-18T10:18:09.587

不同之处在于`background`速记属性设置了几个与背景相关的属性。即使您只指定了一个颜色值，它也会全部设置它们，因为那时其他属性被设置为它们的初始值，例如`background-image`to `none`。

这并不意味着它总是会覆盖这些属性的任何其他设置。这取决于通常被误解的规则的级联。

在实践中，速记往往更安全一些。这是一种预防措施（不完整，但很有用），以防止意外地从另一个样式表中获取一些意外的背景属性，例如背景图像。此外，它更短。但你需要记住，它的真正意思是“设置所有背景属性”。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-11-15T13:33:42.723

> 比较 18 个色样在页面上以小矩形呈现 100 次，一次带有背景，一次带有背景色。

我重新创建了**CSS 性能**实验，现在的结果有很大不同。

```
background 
```

**铬 54**：443（微秒/格）

**Firefox 49**：162（微秒/格）

**边沿**10：56（微秒/格）

```
background-color 
```

**铬 54**：449（微秒/格）

**Firefox 49**：171（微秒/格）

**边沿**10：58（微秒/格）

如您所见-几乎没有区别。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-06-13T10:28:58.740

`background`是`background-color`和其他一些与背景相关的东西的快捷方式，如下所示：

```
background-color
background-image
background-repeat
background-attachment
background-position 
```

阅读以下来自 W3C 的声明：

> ### 背景 - 速记属性
> 
> 为了缩短代码，还可以在一个属性中指定所有背景属性。这称为速记属性。
> 
> 背景的简写属性是背景：

```
body {
  background: white url("img_tree.png") no-repeat right top;
} 
```

使用速记属性时，属性值的顺序为：

> ```
> background-color
> background-image
> background-repeat
> background-attachment
> background-position 
> ```
> 
> 是否缺少其中一个属性值并不重要，只要其他属性值按此顺序排列即可。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-06-10T16:10:49.850

我发现您无法使用背景颜色设置渐变。

**这有效：**

```
background:linear-gradient(to right, rgba(255,0,0,0), rgba(255,255,255,1)); 
```

**这不会：**

```
background-color:linear-gradient(to right, rgba(255,0,0,0), rgba(255,255,255,1)); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-04-01T15:37:28.023

这是最好的答案。速记（背景）用于重置和 DRY（与速记结合）。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-11-21T10:35:44.470

`background`是以下内容的简写属性：

```
 - background-color
 - background-image
 - background-repeat
 - background-attachment
 - background-position 
```

[您可以在此处查看](https://www.w3schools.com/css/css_background.asp)每个属性的详细信息

**属性顺序**

在大多数浏览器实现中（我认为可能较旧的浏览器可能会出现问题）属性的顺序并不重要，除了：

*   `background-origin`和`background-clip`：当这两个属性都存在时，第一个是指，`-origin`第二个是指`-clip`。

    例子：

    ```
    background: content-box green padding-box; 
    ```

    相当于：

    ```
    background-origin: content-box;
    background-color: green;
    background-clip: padding-box; 
    ```

*   `background-size`必须始终遵循`background-position`，并且属性必须由`/`

*   如果`background-position`由两个数字组成，第一个是水平值，第二个是垂直值。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-08-14T16:43:32.537

我在为 Outlook 生成电子邮件时注意到...

```
/*works*/
background: gray;

/*does not work*/
background-color: gray; 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-01-05T05:52:18.290

一旦你明白你可以用它来玩继承，你就可以做一些非常简洁的事情。但是首先让我们从这个[文档的背景中了解一些东西：](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Background_and_Borders/Using_CSS_multiple_backgrounds)

> 使用 CSS3，您可以将多个背景应用于元素。它们相互叠加，您提供的第一个背景在顶部，最后一个背景在后面列出。只有最后一个背景可以包含背景颜色。

所以当一个人这样做时：

```
background: red; 
```

他将背景颜色设置为红色，因为红色是列出的最后一个值。

当一个人这样做：

```
background: linear-gradient(to right, grey 50%, yellow 2%) red; 
```

红色再次成为背景色，**但**您会看到渐变。

```
 .box{
        border-radius: 50%;
        width: 200px;
        height: 200px;
        background: linear-gradient(to right, grey 50%, yellow 2%) red;
    }

    .box::before{
       content: "";
       display: block;
       margin-left: 50%;
       height: 50%;
       border-radius: 0 100% 100% 0 / 50%;
       transform: translateX(70px) translateY(-26px) rotate(325deg);
       background: inherit;
    }
```

```
 <div class="box">

     </div>
```

现在与背景颜色相同：

```
 .box{
        border-radius: 50%;
        width: 200px;
        height: 200px;
        background: linear-gradient(to right, grey 50%, yellow 2%) red;
    }

    .box::before{
       content: "";
       display: block;
       margin-left: 50%;
       height: 50%;
       border-radius: 0 100% 100% 0 / 50%;
       transform: translateX(70px) translateY(-26px) rotate(325deg);
       background-color: inherit;
    }
```

```
 <div class="box">

     </div>
```

发生这种情况的原因是因为当我们这样做时：

```
background: linear-gradient(to right, grey 50%, yellow 2%) #red; 
```

最后一个数字设置背景颜色。

然后在我们从背景（然后我们得到渐变）或背景颜色继承之前，然后我们得到红色。

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2014-06-11T18:39:30.490

我注意到在文档中没有看到的一件事是使用 `background: url("image.png")`

如果找不到图像，它会发送 302 代码而不是像上面那样被忽略，如果你使用

```
background-image: url("image.png") 
```

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2017-08-23T10:22:02.660

有一个关于背景和背景颜色的错误

不同之处在于，在使用背景时，有时在 CSS 背景中创建网页时：#fff // 可以覆盖掩码图像块（“顶部项目，文本或图像”））所以最好总是使用背景 -安全使用的颜色，在您的设计中，如果它是单独的**

# php - 链接到 Facebook 粉丝专页 iframe

> ID：10205466
> 
> 赞同：0
> 
> 时间：2012-04-18T08:15:26.883
> 
> 标签：php, facebook, iframe, facebook-page

我的粉丝专页有问题。一个画廊脚本正在运行我的网络空间，我将它放在应用程序中，也在 Fanpage 的 iframe 中。图库脚本有一个分享按钮，可以在 Facebook 上发布照片。这部分运行良好，但是当我点击发布在 Facebook 上的链接时，我被转至我的网站空间上的页面，而不是带有网页和照片的 iframe。是否可以在 facebook iframe 中编辑链接以转到此页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:09:29.920

一般来说，这不是问题。您可以尝试通过检查 HTTP_REFERRER 和 url 将您的网站重定向到 Facebook 选项卡应用程序。你可以看看[这个例子](http://www.facebook.com/pages/Helper-Component-Community/222933037808340?sk=app_412923142052609)

您可以尝试调用一个 URL，看看您是否被重定向到正确的应用程序。此外，您可以将 app_data-parameters 添加到 URL 以在您的应用中识别真正的目标。

所有这些都可以通过以下代码完成：

```
// set the target facebook page name and id to perform a forceRedirectToTab()
$tmpFbHelper          
    ->setPageName($iniHandler->getIniSetting('facebook.'.fbHelper::getAppNamespace().'.page.name'))
    ->setPageId($iniHandler->getIniSetting('facebook.'.fbHelper::getAppNamespace().'.page.id'))
    ->setSecret($iniHandler->getIniSetting('facebook.'.fbHelper::getAppNamespace().'.secret'));

// perform a redirect to the facebook tab application if someone opens the url out of facebook
// the facebook-linter is not affected by this :)
$tmpFbHelper->forceRedirectToTab();

// perform a deeplink if for example a special url is called or you identify some app-data 
$tmpFbHelper->performDeeplink(); 
```

您必须查看已发布的链接到流中，以便 PHP 代码发现您将重定向和深度链接！

我希望这些想法可以帮助你:)

# python - 在 Python dicts 中引用和设置变量

> ID：10205469
> 
> 赞同：0
> 
> 时间：2012-04-18T08:16:06.883
> 
> 标签：python, dictionary, reference

我想使用 python dict 来存储变量引用并能够分配这些引用指出的值。

```
foo = "foo"
d = {'foo' : foo}
d['foo'] = "bar"
foo
// output: 'foo', but I want it to be 'bar'. 
```

我怎样才能做到这一点？

编辑：一些实际的代码。

```
settings = values["settings"] // This is a dict, such as {"metoder_alphasort" : "on"}
field_map = {"metoder_alphasort" : profile.metoder_alphasort}
for setting in field_map.keys():
    if settings.has_key(setting):
        if settings[setting] == 'on':
            field_map[setting] = True
# field_map[setting] is now True, but profile.metoder_alphasort is False 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:32:06.087

Python 实现了对对象的引用，但它没有实现对变量的引用。您可以使用本地函数创建到本地变量的只读绑定：

```
foo = "foo"
def readfoo(newval):
     return foo
d["foo"] = readfoo
foo = "bar"
d["foo"]() # returns "bar"
foo = "baz"
d["foo"]() # returns "baz" 
```

然而，这是只读的，因为本地函数只能从外部范围读取变量（我相信在 Python 3 中有一个`nonlocal`关键字可以改变它）。

根据您真正想要实现的目标，最简单的解决方法是改用一个元素列表。这样，您可以将值包装在可以正常引用的对象（列表）中：

```
foo = ["foo"]
d["foo"] = foo
d["foo"][0] = "bar"
foo[0] # prints "bar" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T08:27:18.493

您的想法不会起作用，因为字符串是不可变的 - 值没有改变，而是被替换了。如果你真的觉得有必要这样做，你可以这样做：

```
class MutableString:
    def __init__(self, string):
        self.string = string

    def __str__(self):
        return self.string

    def __repr__(self):
        return "MutableString("+repr(self.string)+")"

    def set(self, string):
        self.string = string

foo = MutableString("foo")
d = {'foo' : foo}
d['foo'].set("bar")
print(foo) 
```

这给了我们`bar`作为输出。

另一种选择是创建一个替代`dict`子类`__setitem__()`来产生你想要的结果。问题是，这不是其他阅读您的代码的人会期望这些东西起作用的方式。你最好改变你的代码，所以它不依赖于这种事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T09:42:53.420

您可以`setattr(profile, "mtoder_autoalpha", newvalue)`用作设置字典的替代方法。你这样做的方式不会像你期望的那样工作，因为字符串（以及布尔值和元组......）是不可变的，所以当你改变它时，它是你正在创建的一个新字符串，而不是编辑“原始”对象/变量。

# java - hbase拒绝远程用户的连接

> ID：10205471
> 
> 赞同：1
> 
> 时间：2012-04-18T08:16:08.350
> 
> 标签：java, jakarta-ee, hadoop, hbase

嗨，我是 hbase 和 hadoop 的新手。我已经正确设置了它们，但是从同一台机器上检查它们并且工作正常。现在当尝试从 java 客户端远程连接时，这个异常即将到来。我真的需要帮助，请指导我这。例外情况如下：

```
/04/17 17:41:35 INFO zookeeper.ZooKeeper: Client environment:user.name=xyz
12/04/17 17:41:35 INFO zookeeper.ZooKeeper: Client environment:user.home=/home/xyz
12/04/17 17:41:35 INFO zookeeper.ZooKeeper: Client environment:user.dir=/opt/xyz/hbase-sample
12/04/17 17:41:35 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=192.168.15.169:2181 sessionTimeout=180000 watcher=hconnection
12/04/17 17:41:35 INFO zookeeper.ClientCnxn: Opening socket connection to server /192.168.15.169:2181
12/04/17 17:41:35 INFO zookeeper.ClientCnxn: Socket connection established to hbase.xyz.com/192.168.15.169:2181, initiating session
12/04/17 17:41:35 INFO zookeeper.ClientCnxn: Session establishment complete on server hbase.xyz.com/192.168.15.169:2181, sessionid = 0x136c00d59ac0009, negotiated timeout = 180000
12/04/17 17:41:36 INFO client.HConnectionManager$HConnectionImplementation: getMaster attempt 0 of 1 failed; no more retrying.
java.net.ConnectException: Connection refused
at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)
at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)
at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:604)
at org.apache.hadoop.hbase.ipc.HBaseClient$Connection.setupIOstreams(HBaseClient.java:328)
at org.apache.hadoop.hbase.ipc.HBaseClient.getConnection(HBaseClient.java:883)
at org.apache.hadoop.hbase.ipc.HBaseClient.call(HBaseClient.java:750)
at org.apache.hadoop.hbase.ipc.HBaseRPC$Invoker.invoke(HBaseRPC.java:257)
at $Proxy4.getProtocolVersion(Unknown Source)
at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:419)
at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:393)
at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:444)
at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getMaster(HConnectionManager.java:360)
at org.apache.hadoop.hbase.client.HBaseAdmin.<init>(HBaseAdmin.java:94)
at org.apache.hadoop.hbase.client.HBaseAdmin.checkHBaseAvailable(HBaseAdmin.java:1258)
at HBaseDemo.main(HBaseDemo.java:55)
HBase is not running!
Execution script exiting 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:03:52.633

感谢您的回答。我发现了问题并通过从我的 /etc/hosts 中删除 localhost 条目来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:45:48.083

检查这个线程：

[Hbase 客户端无法连接远程 Hbase 服务器](https://stackoverflow.com/questions/7791788/hbase-client-do-not-able-to-connect-with-remote-hbase-server)

您可以尝试 telnet 到您要在端口号 60000 连接的机器，

还要检查该端口是否打开。

# cakephp - 如何在cakephp中将数据库行从一个表复制到另一个表

> ID：10205472
> 
> 赞同：0
> 
> 时间：2012-04-18T08:16:15.020
> 
> 标签：cakephp, cakephp-1.3

我想将一行数据从一个表复制到另一个表。我要复制的表有 id、name、password 字段。应复制值的表具有 id、name、password、post_count 字段。

我正在尝试使用以下代码，但它没有帮助。

```
$data=$this->Register->find(null, $id);
if($this->User->save($data)) {
    $this->Session->setFlash(__('Data copied'), true);
} 
```

我应该怎么办？？

我已经删除了我要将值复制到的表的验证。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:12:34.060

该查询`$this->Register->find(null, $id);`以某种不同的格式返回数据。相反，我更改了查询。代码如下

```
$condition = array('id'=>$id);
$data=$this->Register->find('first', array('conditions'=>$condition));
$newdata = array(
            'User' => array(
                'name' => $data['Register']['name'],
                'password' => $data['Register']['password']
       )
);
if($this->User->save($newdata)) {
      $this->Session->setFlash(__('Data copied'), true);
} 
```

这可以作为 find('first') 的返回返回一个数组，该数组可以根据我们的需要进行修改，然后我们可以调用 User 模型的 save 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T01:56:45.713

我认为这对您不起作用的原因是该 ID 的注册记录不存在。在尝试保存之前，您必须检查结果是否包含数据。这就是您在 INSERT 语句中得到 NULL,NULL 的原因。

```
$record = $this->Register->findById($id);
if(!empty($record))
{
   $this->User->create();
   if($this->User->save(array('User'=>$record['Register']),false,array('name','password')))
   {
      $this->Session->setFlash(__('Data copied'), true);
   }
}
else
{
   $this->Session->setFlash(__('Data not found'), true);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T09:07:37.397

```
$data = array();
$data = $this->Register->read(null, $id);

$newdata = array();
$newdata = array(
          'User' => array(
                      'name' => $data['Register']['name'],
                      'password' => $data['Register']['password']
                   )
        );
// If you are in Register controller then import User model 

if($this->User->save($newdata, false)) {
    $this->Session->setFlash(__('Data copied'), true);
} 
```

# python - python celery max-tasks-per-child-setting default

> ID：10205473
> 
> 赞同：7
> 
> 时间：2012-04-18T08:16:23.100
> 
> 标签：python, celery, celery-task

我正在使用 celery，并且我想使用[max-tasks-per-child-setting](http://ask.github.com/celery/userguide/workers.html#max-tasks-per-child-setting) 因为某些 celery 进程会占用大量内存。

我试图在更改之前找到此设置的默认值，但我找不到该信息。

我看了[这里，](https://stackoverflow.com/questions/8846978/forking-processes-for-every-task-in-celery)但我不想将其设置为，`1`因为我不希望它重新启动每个任务。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T19:27:04.953

默认没有限制

[http://celery.readthedocs.org/en/latest/configuration.html#celeryd-max-tasks-per-child](http://celery.readthedocs.org/en/latest/configuration.html#celeryd-max-tasks-per-child)

您可以从 defaults.py 查看所有默认配置值

[https://github.com/celery/celery/blob/master/celery/app/defaults.py](https://github.com/celery/celery/blob/master/celery/app/defaults.py)

```
>>> from celery import conf
>>> conf.CELERYD_MAX_TASKS_PER_CHILD is None
True 
```

# actionscript-3 - 饼图作为轮盘赌

> ID：10205482
> 
> 赞同：0
> 
> 时间：2012-04-18T08:16:59.503
> 
> 标签：actionscript-3, flash, apache-flex, charts

我想将 Flex 组件 ChartPie 用于不寻常的目的——创建彩票轮盘赌。所以有几个问题：

1.  我的球在 ChartPie 上方滚动，hitPoint 需要在每个扇区中注册。我能怎么做？当球越过扇区以及球出扇区时，我如何获得回调？

2.  如何为每个扇区添加图标？

3.  可以在每个扇区上使用图标和文字吗？

4.  如何改变文字的方向？文本必须沿着圆的半径指向中心。

谢谢你。

# facebook-like - 无法获取“喜欢”的用户列表

> ID：10205484
> 
> 赞同：0
> 
> 时间：2012-04-18T08:17:14.513
> 
> 标签：facebook-like, facebook-fql

虽然我从按下“喜欢”按钮的人那里编写了 FQL 搜索，但它无法正常工作。
ex) SELECT user_id FROM like WHERE object_id='10150931418786729' AND object_type='link'

有一次，根据其他人的提问，他回答是隐私问题。但是，即使集中在我身上，结果也是空的。
ex) SELECT object_id FROM like WHERE user_id=me() and object_type='link'

如果没有指定object_type，似乎可以得到一个结果（即“喜欢”专辑）。
ex) SELECT user_id FROM like WHERE object_id='10150931418786729'
(*http://www.facebook.com/media/set/?set=a.10150629589136729.412063.20531316728)

FQL 查询是否有问题？还是 Facebook API 有？

追加：此查询也失败...
SELECT user_id FROM like WHERE object_id IN (SELECT id FROM object_url WHERE url = "http://www.itmedia.co.jp/news/articles/1204/18/news107.html" ) AND object_type="链接"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:19:04.120

like 是受限制的关键字。

将其包装在 ` 中以使用它：

例如：

```
SELECT * FROM `like` ... 
```

# android - 如何将可绘制文件夹中的图像放在 HTML 文件中

> ID：10205488
> 
> 赞同：10
> 
> 时间：2012-04-18T08:17:32.300
> 
> 标签：android

我的 /res/raw/test.html 中有一个 HTML 文件

我使用以下代码在网络视图中显示它

```
WebView wbview = (WebView)findViewById(R.id.webView1);
InputStream fin;
    try
    {
        fin = getResources().openRawResource(R.raw.manual);
        byte[] buffer = new byte[fin.available()];
        fin.read(buffer);
        fin.close();
        wbview.loadData(new String(buffer), "text/html", "UTF-8");
    }
    catch (IOException e)
    {
        e.printStackTrace();
    } 
```

这是我的 HTML 文件的代码

```
<html>
    <p>
    Lorem ipsum dolor sit amet,
    </p>
  <table>
   <tr>
         <td>
       <img src=\\"file:///android_asset/test_image2.jpg\"/>    
           <img src="test_image2.jpg" width="50px" alt="Hi">

       <img src=\"res/drawable/test_image.png"/>
       <img src="file:///android_res/drawable/test_image.png" />
       <img src=\"file:///android_res/drawable/test_image.png"\ />
         </td>
   </tr>
</table>
</html> 
```

我想在我的 html 文件中显示我的资源文件夹中的图像......我尝试了所有可能仍然无法正常工作。它只是显示 HTML 文本，但对于图像我不知道如何显示它

请帮我

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-18T08:39:28.637

您可以从 android assets 文件夹中加载您的 html 页面，如下面的代码。

```
WebView webView = new WebView(this);
webView.loadUrl("file:///android_asset/manual.html");
setContentView(webView); 
```

而且你还需要像下面这样制作你的html。

```
 <html>
  <p>
   Lorem ipsum dolor sit amet,
  </p>
<table>
  <tr>
      <td>
     <img src="file:///android_asset/test_image2.jpg"/>    
      <img src="file:///android_asset/test_image2.jpg" width="50px" alt="Hi">
     <img src="file:///android_res/drawable/test_image.png"/>
     <img src="file:///android_res/drawable/test_image.png" />
     <img src="file:///android_res/drawable/test_image.png" />
        </td>
      </tr>
    </table>
  </html> 
```

# kohana - 哪个函数将表单中的数据添加到 Kohana 中的数据库

> ID：10205491
> 
> 赞同：0
> 
> 时间：2012-04-18T08:18:11.523
> 
> 标签：kohana

我正在使用 Kohana 版本 3，并且想修改表单输入字段。我很难理解这在 kohana 中是如何工作的。输入是由控制器还是助手完成的？控制器和助手在 Kohana 中实际做什么？

感谢您的任何建议，

抢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T23:05:36.917

通常，我会使用 Kohana 表单助手为表单和字段构建 HTML 标记，并将数据从控制器传递到这些助手方法中。

例如，在我看来`views/contact.php`：

```
<?php echo Form::open()?>
    <fieldset>

        <div class="field">
            <?php echo 
                Form::label('name', __('Name')),
                Form::input('name',  $name)
            ?>
        </div>

        <?php echo Form::submit('save', 'Save')); ?>
    </fieldset>
<?php echo Form::close()?> 
```

在控制器中`classes/controller/contact.php`

```
class Controller_Contact extends Controller {

        public function action_index()
        {
                $view = View::factory('contact')
                        ->set('name', 'Richard');

                $this->response->body($view);
        }
} 
```

将该数据添加到数据库中的表有点复杂，但通常您会使用模型来执行此操作。阅读 ORM 文档： http: [//kohanaframework.org/3.2/guide/orm](http://kohanaframework.org/3.2/guide/orm)

控制器将处理请求数据并与模型交互以将数据保存到数据库中。

这是该过程的一个示例：[Kohana ORM 和验证，有问题](https://stackoverflow.com/questions/9123684/kohana-orm-and-validation-having-problems/9127417#9127417)

阅读文档以更好地理解这些概念： http: [//kohanaframework.org/3.2/guide/kohana/](http://kohanaframework.org/3.2/guide/kohana/)

# serialization - EMF：如何在不使用 eclipse 实例的情况下以编程方式创建模型实例

> ID：10205495
> 
> 赞同：0
> 
> 时间：2012-04-18T08:18:18.630
> 
> 标签：serialization, eclipse-plugin, eclipse-emf

使用 EMF，我可以导入一个 ecore 文件（元模型），生成代码，然后将项目调试为新的 eclipse 实例以使用我的模型实例。我的目的是在不加载新的 eclipse 实例的情况下创建我的实例，例如，我想创建一个新的 Java 项目，该项目使用我生成的代码来创建实例，假设我将做一些验证/OCL 来拥有一个我的实例可以序列化为 XMI 文件。

我正在考虑将生成的代码（模型、编辑、编辑器）导出到 JAR 文件或作为插件，但它并不完美。你有什么建议或方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:43:46.340

我不确定“不加载新的 Eclipse 实例”是什么意思，但是如果你想摆脱 EMF 和 Eclipse 依赖项，你可以通过编辑你的 genmodel 来实现这一点。这个配方详细解释了这些步骤：[http ://wiki.eclipse.org/EMF/Recipes#Recipe:_Generating_Pure_API_With_No_Visible_EMF_Dependencies](http://wiki.eclipse.org/EMF/Recipes#Recipe:_Generating_Pure_API_With_No_Visible_EMF_Dependencies)

并非 EMF 提供的所有东西都适用于该解决方案，但它可能足以满足您的需求。

# java - 如何拦截从 Java 到 Groovy 的调用——或者轻松地模拟这个

> ID：10205496
> 
> 赞同：2
> 
> 时间：2012-04-18T08:18:19.483
> 
> 标签：java, groovy

我希望使用 groovy 的 invokeMethod 来执行此操作，但事实证明，当您从 Java 调用 Groovy 时，不会调用 invokeMethod，否则它会完美地工作。

我有一个案例，我将 Groovy 类提交给 Java 类（我无法编辑）。Groovy 类是注解的，Java 类扫描注解并将注解的方法保存为它的事件的侦听器。

当事件发出时，我想从事件对象中获取一些信息，使用它来检索数据并将该数据注入脚本中的事件处理程序（通过该方法中的注释变量）。

我可以控制的事情——我实例化脚本，为它们设置一个基类，并将它们传递给另一个系统进行注册。脚本将由其他人编写——我可以控制脚本的设计，但我的目标是简单。

我可能可以创建一个适配器类，但这似乎非常困难和脆弱，因为我必须手动注册所有这些方法，而不是像现在这样使用注释——有很多不同的事件要听。

我想知道是否有我不考虑的常规技巧。我对 groovy 元编程还是很陌生。也许有一种方法可以自动创建适配器类，或者当我编译脚本时，用转发方法替换这些方法，这些方法在调用它们的真实方法之前转发到我的代码——任何可能的事情？

请求的源代码：

源代码——好吧，让我们看看，这个过程分布在几个类中......

这就是我使用 ScriptBase 设置 Groovy 类加载器的方式

```
cconfig.setScriptBaseClass("tv.kress.bill.minecraft.ezplugin.ScriptBase");
GroovyClassLoader gcl = new GroovyClassLoader(getClass().getClassLoader(), cconfig); 
```

然后我将它传递给 Groovy 脚本引擎（我在这里省略了一些东西）

```
gse = new GroovyScriptEngine(cpString, gcl); 
```

然后我实例化脚本

```
scriptClass = gse.loadScriptByName(file.getAbsolutePath());
instance = (GroovyObject) scriptClass.newInstance(); 
```

然后，如果它是一个“监听器”，它是“罐装”java库用来识别它应该扫描注释的java类的标记接口，我将它传递给该类，以便可以注册任何带注释的方法（沿着某处行“实例”变成了“脚本”，但相同的对象：

```
 if (script instanceof Listener)
     pm.registerEvents((Listener) script, this); 
```

脚本本身有趣的部分如下所示：

```
@EventHandler
public void userEvent(UserInteractEvent event) { 
```

我想添加的是能够在 userEvent 中添加一个带注释的局部变量，如下所示：

```
 @Persist int persistedPerUserData // Or @PersistPerUser? or @Persist(User=true)? 
```

这样就在调用 userEvent 之前，我可以拦截它。我会从 UserInteractionEvent 中获取用户名，将其与脚本、变量和方法名结合起来，以获得一个独特的签名，例如“MyScript:UserEvent:Bill:persistedPerUserData”，并使用它来检索我可以放入persistedPerUserData 的int。

稍后在该方法返回后，从persistedPerUserData 中获取值并将其存储回“MyScript:UserEvent:Bill:persistedPerUserData”（目前是一个哈希，但我希望最终将其设为数据库）。

这样，脚本就不必考虑它正在处理不同用户的事实，它只需要有一组变量并且所有持久性都可以正常工作。

还有其他事件可以使用，但我相信它们都扩展了相同的事件，并且根事件具有“用户”字段。

编辑：就像另一件事不要尝试一样，我尝试像这样使用 ProxyMetaClass/拦截器：

```
// Attempt (and fail) to intercept calls to an instance of clazz
class Slicer {
    public static Object slice(Class clazz) {
        Object instance;
        def proxy = ProxyMetaClass.getInstance(clazz);
        proxy.interceptor = new MyInterceptor();
        proxy.use {
            instance = clazz.newInstance();
        }
        return instance;
    }       
} 
```

使用相同的结果，来自 groovy 类的每个调用都被很好地检测，但没有拦截来自 Java 的调用。回到绘图板。我想这就是 Aspects 使用字节码操作的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T03:24:46.450

我真的没有找到答案，但我想出了一些我认为可行的方法——我想没有人提到它，因为它是如此明显，但我仍然“用 Java 思考”而不是 groovy。

好的，我希望脚本实现看起来像这样：

```
@EventHandler
public void userEvent(UserInteractEvent event) {
    @Persist int persisteData
    // At this point persistedData contains data different depending on which user was passed in
... 
```

我认为如果我使用闭包，我认为我可以做一些接近的事情：

```
@EventHandler
public void userEvent(UserInteractEvent event) {
    persistScope(event.user) {
        @Persist int persistedPerUserData // Or @PersistPerUser? or @Persist(User=true)?
        ... 
```

这样，在persistScope 中，我可以扫描@Persist 注释的闭包并做我的事情。这可能不完全有效，因为直到闭包开始才创建 int，但我认为只要我从 groovy 调用到 groovy，我就可以使用我在问题中提到的方法解决这个问题。要么这样，要么我将使用持久的用户数据将“它”作为哈希。

这有点尴尬，但我认为它会起作用，而且我喜欢它更明确的事实（事实上，在我只是假设传入的“事件”有一个 .getUser() 方法之前，现在我可以确定持久性的范围我想要的任何东西）。

我将尝试实现这一点，并给它几天时间，看看是否有人对我在接受之前提出的原始问题提出答案。

编辑：我对这个解决方案不满意。由于变量是在该范围内声明的，因此我无法使用@Persist 注释，因此我传入了一个模块可以用作数据容器的哈希，然后在闭包返回后将其持久化。

仍在寻找更好的答案...

# android - android C2DM 通知在 android 4 之前不起作用？

> ID：10205498
> 
> 赞同：0
> 
> 时间：2012-04-18T08:18:25.667
> 
> 标签：android, push-notification, android-c2dm

我试图让推送通知适用于我的 android 应用程序。服务器似乎没问题，因为我在我的 android 4 设备上收到通知。但我有其他 android 2.2.1 和 2.3.4 的设备没有收到通知。

这是我的 C2DMReceiver ：

```
package vex.android;

import java.io.IOException;

import vex.android.settings.Local;
import vex.android.tool.Resources;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

import com.google.android.c2dm.C2DMBaseReceiver;

public class C2DMReceiver extends C2DMBaseReceiver {

    public C2DMReceiver() {
        super(Local.PushNotificationEmail);
    }

    @Override
    public void onError(Context context, String errorId) {
        Log.e("VEX-PUSHNOTIFICATION", "Error " + errorId);
    }

    @Override
    protected void onMessage(Context context, Intent intent) {

        String saleTitle = Resources.getString("pushnotificationtitle", context); 
        String saleMessage = intent.getStringExtra("salemessage");
        String SaleId = intent.getStringExtra("saleid");
        String isMultiSale = intent.getStringExtra("ismultisale");

        Boolean multisale = (isMultiSale != null && isMultiSale.length()>0) ?  Boolean.parseBoolean(isMultiSale.trim()) : false;
        Integer saleid = (SaleId != null && SaleId.length()>0) ? Integer.parseInt(SaleId.trim()) : -1;
        if(saleMessage == null || saleMessage.length() <= 0 ) saleMessage = Resources.getString("pushnoticationmessage", context);
        createNotification(context, saleTitle, saleMessage, saleid, multisale);
    }

    public void createNotification(Context context,String SaleTitle, String SaleMessage, Integer saleid, Boolean multisale) {

        NotificationManager notificationManager = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.drawable.applicationicon,
                "Message received", System.currentTimeMillis());
        // Hide the notification after its selected
        notification.flags |= Notification.FLAG_AUTO_CANCEL;

        Intent intent = new Intent(context, MainApplication.class);
        intent.putExtra("saleid", saleid);
        intent.putExtra("ismultisale", multisale);
        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT); // without flag a changed saleid wont be passed
        notification.setLatestEventInfo(context, SaleTitle, SaleMessage, pendingIntent);
        notificationManager.notify(saleid, notification);
    }

    @Override
    public void onRegistered(Context context, String registrationId) 
    throws IOException 
    {
        Local.setRegistrationId(registrationId);
    }

    @Override
    public void onUnregistered(Context context) 
    {
            Log.i("VEX-DEBUG", "successfully unregistered with C2DM server");
    }

} 
```

我认为问题就在那里，因为如果我手动发送通知（使用 curl），它不适用于 android 2.2 和 2.3。任何的想法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:28:36.627

我在旧 Android 版本的设备上使用 C2DM 没有任何问题。

我建议您使用更多设备进行测试，并检查您的代码 - 问题不是缺乏对旧设备的 C2DM 支持的问题 - 它适用于从 v2.2 开始的 Android。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T08:37:33.567

C2DM 使用谷歌消息服务。GTalk 也使用此服务。有时可能会关闭此服务。要检查所有相关信息，只需输入此代码 - *#*#8255#*#*

C2DM 在 android >= 2.2 的设备上可用

# javascript - 当 num > 2147483647 时按位或导致溢出

> ID：10205503
> 
> 赞同：4
> 
> 时间：2012-04-18T08:18:34.590
> 
> 标签：javascript, optimization

参考这篇文章： [math-round-vs-hack](http://jsperf.com/math-round-vs-hack/3)

我们优化了数学函数。

我们使用`(num+0.5)|0`而不是`Math.round()`.

但是有一个问题让人困惑，当 num > 2147483647 时，会得出错误的结果。

```
function round(n) {
    return (n + 0.5) | 0;
}; 
```

`round(2147483648)`将返回 -2147483648

根据维基百科：

> 2147483647 在计算
> 
> 数字 2,147,483,647 也是 >computing 中 32 位有符号整数的最大值。因此，它是在流行的 CPU 上运行的许多编程语言中声明为 int 的变量的最大值，也是许多视频游戏的最大可能分数（或金额）。数字的出现通常反映了错误、溢出情况或缺失值。 [8] 同样，“(214) 748-3647”是表示为美国电话号码的数字序列，是网页上列出的最常见的电话号码。 [9] 用于 Unix 等操作系统的数据类型 time_t 是一个 32 位有符号整数 > 计算自 Unix 纪元开始以来的秒数（1970 年 1 月的午夜 UTC）。 [10] 可以用这种方式表示的最晚时间是>星期二 03:14:07 UTC，

我该如何处理这种情况以确保良好的性能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T08:44:15.840

简短回答：使用 Math.round()

我会将整个练习归档在“为什么永远不应该进行微优化”下。看看这个小提琴：http: [//jsfiddle.net/toxicsyntax/a5rWm/2/](http://jsfiddle.net/toxicsyntax/a5rWm/2/)

以下是来自不同浏览器的一些结果：

*   Firefox 11：round：185ms bit_round：123ms（用于 100000000 次迭代）
*   Chrome 18：round：99ms bit_round：96ms（用于 100000000 次迭代）
*   IE 9：round：227ms bit_round：123ms（1000000次迭代）
*   iPhone 4，Safari：round 399ms，bit_round 32ms（1000000 次迭代）

当然，在最好的情况下，按位舍入函数比使用 Math.round() 快得多，但这真的重要吗？最坏的情况 Math.round() 仍然处理数百万轮公关。秒没有问题。

你需要做多少次四舍五入？我不希望您必须在 javascript 中对数字进行四舍五入，除了显示数字，即使您要显示数千个四舍五入的数字 pr。其次， Math.round() 对你来说仍然足够快。

*更新*

此外，关于一般的微优化，请务必查看 Coding Horror 中的文章：http: [//www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater。 html](http://www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater.html)

微优化很少是一个好主意。

# wpf - 如何向依赖属性添加逻辑？

> ID：10205504
> 
> 赞同：0
> 
> 时间：2012-04-18T08:18:36.490
> 
> 标签：wpf, logic, dependency-properties

如何将此属性转换为依赖属性？关于每个人都只是说“不要在依赖属性中使用逻辑”并且没有为此提出补救措施：

```
 public DateTime? SelectedDateGeorgian
    {
        get
        {
           //choose a control based on this "user control" current mode 
           //and return its value
        }

        set
        {
           //choose a control based on this "user control" current mode 
           // and set its property after some manipulations on the value 
        }
    } 
```

我想把它转换成这个：

```
 public static readonly DependencyProperty SelectedDateGeorgianProperty =
    DependencyProperty.Register("SelectedDateGeorgian", typeof(DateTime?), typeof(MyDatePicker), new PropertyMetadata(default(DateTime?)));

    public DateTime? SelectedDateGeorgian
    {
        get
        {
            //Its prohobited to do something here ! So what should I do ?
            //How should I select a control and return its value here ?
            //I can't have a simple backing variable because I should do some conversion here                 

            return (DateTime?)GetValue(SelectedDateGeorgianProperty);
        }
        set
        {
             //I want to convert received value here and 
             // and after that update some UI properties in this user control

            SetValue(SelectedDateMiladiProperty, value);
        }
    } 
```

我想转换将要写入此依赖属性的值并更新 UIElements。

而且我还想从 UIElement 转换一个值，并在要读取它时返回转换后的值。

所以你看我不能有一个简单的支持变量。

请有人给我一个模式来实现这个。

感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:05:44.207

是的你可以。

您必须将您的绑定`UIElement property`到此`DependencyProperty`并使用[`Converter`](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx). 请参阅[如何：转换绑定数据](http://msdn.microsoft.com/en-us/library/ms752091.aspx)。

顺便说一句：[在这里](http://msdn.microsoft.com/en-us/library/bb613563.aspx#implications)你可以找到原因，为什么 DependencyProperties 不应该在属性包装器中有额外的逻辑。

**编辑：**

```
<DatePicker Name="dp1"
            SelectedDate="{Binding Path=SelectedDateGeorgian,
                                   RelativeSource="{RelativeSource AncestorType=UserControl}"}" />
<DatePicker Name="dp2"
            SelectedDate="{Binding Path=SelectedDateGeorgian,
                                   RelativeSource="{RelativeSource AncestorType=UserControl}",
                                   Converter={StaticResource dateConverter}}" /> 
```

创建转换器：

```
[ValueConversion(typeof(DateTime?), typeof(DateTime?))]
public class DateConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        // your conversions
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        // your backconversions
    }
} 
```

并将其添加为资源：

```
<src:DateConverter x:Key="dateConverter"/> 
```

# facebook - Facebook iframe 粉丝专页内的 Fancy Box 中心

> ID：10205505
> 
> 赞同：5
> 
> 时间：2012-04-18T08:18:40.807
> 
> 标签：facebook, fancybox, facebook-iframe

嗨，我在 facebook 上有一个 1500px 高的粉丝页面。花哨的弹出框位于 1500 像素 iframe 的中间。

#fancybox-wrap 类的 CSS 定位到绝对位置（顶部：50px !important;）不起作用！如果您在页面底部并触发精美的框弹出窗口，则在您滚动回页面顶部之前它是不可见的。

我查看了以下 STACKOVERFLOW 修复，但这不起作用:: [Fancybox Positioning Inside Facebook Canvas iFrame](https://stackoverflow.com/questions/7893946/fancybox-positioning-insid) ...

我正在使用最新版本的fancybox。

在此先感谢您的帮助（我正在拔头发:()

欢呼杰米

# debugging - gdb 使用了错误的库，但声明了 sysroot

> ID：10205509
> 
> 赞同：2
> 
> 时间：2012-04-18T08:18:49.223
> 
> 标签：debugging, gdb, cross-platform

我使用 GDB 运行交叉调试会话。GDB 配置了 --with-sysroot 选项，文档中对此进行了描述。我的应用程序使用如下共享库。

代码：

```
 libpthread.so.0 => /lib/libpthread.so.0 (0x40026000)
    libm.so.6 => /lib/libm.so.6 (0x40046000)
    libdl.so.2 => /lib/libdl.so.2 (0x400b9000)
    librt.so.1 => /lib/librt.so.1 (0x400c4000)
    libts-0.0.so.0 => /usr/lib/libts-0.0.so.0 (0x400d3000)
    libfreetype.so.6 => /usr/lib/libfreetype.so.6 (0x4015f000)
    libz.so.1 => /usr/lib/libz.so.1 (0x401d3000)
    libjpeg.so.8 => /usr/lib/libjpeg.so.8 (0x401ee000) 
```

库 pthread、libdl、... 在我的工具链中找到，由*set sysroot*、*--with-* sysroot和*set solib-absolute-path* 声明库 libts、libz、... 在我的共享库的附加路径中可用, 在会话中用*set solib-search-path声明*

对于库 libfreetype、libjpeg，会发生以下错误：

> 102,416 &"警告: `/usr/lib/libfreetype.so.6': 未知的共享库架构与目标架构 arm 不兼容。\n"
> 102,416 =library-loaded,id="/usr/lib/libfreetype.so .6",target-name="/usr/liblibfreetype.so.6",host-name="/usr/lib/libfreetype.so.6",symbols-loaded="0",thread-group="i1 "

GDB**仍然**使用主机 rootfs 库的原因，一旦在工具链中找不到，并且在主机 rootfs 中可用。它不关心我用*set solib-search-path声明的附加路径*

我用 --with-sysroot 配置了 GDB，声明了额外的*set* sysroot ，*set solib-search-path*，*set solib-absolute-path*（没关系 set sysroot 的别名*）*。

在文档中，*--prefix*将 GDB 配置为自动获取 sysroot，但为什么这比*--with-sysroot*更高？

GDB 是否使用命令*sysroot*、*host-* sysroot 、*solib-search-path*？

**我想告诉 GDB 什么，不要使用主机 rootfs **？****

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T03:37:11.203

有一个 gdb 错误跟踪相同的问题[http://sourceware.org/bugzilla/show_bug.cgi?id=13989](http://sourceware.org/bugzilla/show_bug.cgi?id=13989)

直到版本 gdb-7.4 才修复。因此，我认为以前的版本会出现这种行为。**

# ios - 在 iOS 5.1 上滚动时 UITableView 中的内存泄漏

> ID：10205510
> 
> 赞同：3
> 
> 时间：2012-04-18T08:18:57.607
> 
> 标签：ios, uitableview, memory-leaks

每次 UITableview 滚动，都会有 48 个字节的内存泄漏。负责库：libsystem_c.dylib 负责框架：strdup。

这仅在 iOS 5.1 上观察到，而不在早期版本上观察到。其他人也面临同样的问题吗？这是 iOS 5.1 中的错误吗？

代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath(NSIndexPath *)indexPath 
{
    NSString *cellIdentifier = [[NSString alloc] initWithString:@"fontSelectionCell"];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    [cellIdentifier release];

    if (cell == nil) 
    {
        cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];
    }       

    cell.textLabel.text = [fontNameList objectAtIndex:[indexPath row]];
    cell.selectionStyle =UITableViewCellSelectionStyleGray;
    cell.textLabel.font = [UIFont systemFontOfSize:17.0];

    if ([fontName isEqualToString:cell.textLabel.text])
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
        cell.textLabel.textColor = [UIColor blueColor];

    }
    else
    {
        cell.accessoryType = UITableViewCellAccessoryNone;
        cell.textLabel.textColor = [UIColor blackColor]; 
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:14:04.423

这可能是由于您处理单元标识符的方式。我实际上很惊讶它不会为您崩溃，因为您释放`cellIndentifier`但在创建新单元格时引用它（即当一个单元格没有返回以重新使用时`dequeueReusableCellWithIdentifier`）。

使用单元格标识符的标准/公认方法是使用静态（因为它永远不会改变，并且它只会被分配一次，而不是潜在的 100 次，因为`cellForRowAtIndexPath`在滚动表格时会不断调用）。这将使您的代码更有效率。

IE

```
- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    static NSString *cellIdentifier = @"fontSelectionCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
        cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];
    }   

   ...
} 
```

你可以尝试改变`cellIdentifier`，看看你是否仍然得到泄漏？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:06:43.487

我认为您遇到了已经在 iOS 5.1 上报告的问题。我自己也有。目前我无法在苹果论坛中找到有关此问题的链接。

# php - 为什么我的排序算法不起作用？

> ID：10205514
> 
> 赞同：0
> 
> 时间：2012-04-18T08:19:04.617
> 
> 标签：php, algorithm, sorting

我正在为客户开发一个系统，该系统会创建一个包装标签的 csv，并将其发送到打印机。客户有六个不同的项目。客户从我的客户那里批量订购产品。两个项目（产品 A 和产品 B）共享同一条包装线。为了提高包装效率，我的客户希望先在包装产品 A 和包装产品 B 之间交替进行。

例如，如果 John、Sally 和 James 都订购了这两种产品，则系统需要将 John 的订单以产品 A 开头写入 csv，Sally 的订单以产品 B 开头，James 的订单再次以产品 A 开头。

我在下面粘贴了我的非工作代码，但这真的让我很头疼，而且我真的很难过。

```
foreach($orders as $order) {

    $name = null;
    $phone = null;

    $account = DAO_ContactPerson::get($order->account_id);
    $delivery = false;
    if($account->is_agency) {
        $name = $order->getAttribute('name');
        $phone = $order->getAttribute('phone');
    } else {
        $name = sprintf("%s %s",
            $account->getPrimaryAddress()->first_name,
            $account->getPrimaryAddress()->last_name
        );
        $phone = $account->phone;
    }

    $name = trim($name);
    $phone = trim($phone);
    $items = $order->getItems();

    if($order->getAttribute('delivery')) {
        $type = 'deliveries';
        $destination = 'Delivery';
        $address = sprintf("%s %s %s",
            $order->getAttribute('delivery_address.line1'),
            $order->getAttribute('delivery_address.line2'),
            $order->getAttribute('delivery_address.postal')
        );
    } else {
        $type = 'pickups';
        $agency = DAO_ContactPerson::getAgency($order->getAttribute('pickup'));
        $destination = $agency->name;

        // Override account id so orders are grouped by agency
        $order->account_id = $agency->id;
        $address = null;
    }
//          var_dump($order->id);
    // Init account array
    if(!isset($rows[$type][$order->account_id]))
        $rows[$type][$order->account_id] = array('combined' => array(), 'separate' => array());

    foreach($items as $item) {
        $packing = 'separated';
        if($item->product_id == 3 || $item->product_id == 4)
            $packing = 'combined';

        if(!isset($rows[$type][$order->account_id][$packing][$item->product_id]))
            $rows[$type][$order->account_id][$packing][$item->product_id] = array();
        $i = 0;
        while($i < $item->quantity) {
            $rows[$type][$order->account_id][$packing][$item->product_id][] = array(
                    'number' => $order->id,
                    'destination' => $destination,
                    'size' => $item->product_id,
                    'name' => $name,
                    'address' => $address,
                    'phone' => $phone
                );
            $i++;
        }

    }
//          if($order->id == 176) {
//              var_dump($rows[$type][$order->account_id][$packing]);
//          }
}

$this->weight = 1;

$pickups = count($rows['pickups']);
for($i = 0; $i < $pickups; $i++) {
    $account =& $rows['pickups'][$i];
    $account['output'] = array();
    if(isset($account['combined'])) {
        $combined_products =& $account['combined'];
        if(!empty($combined_products)) {
            foreach($combined_products as $prod_id => $combined) {
                usort($combined_products[$prod_id], array($this, "_compareBoxes"));
            }
            // Flip weights once we finish with this account
            $last_box = end($combined_products);
            $last_box = array_pop($last_box);
            reset($combined_products);
            if($this->weight == 1) {
                $this->weight = -1;
                if($last_box['size'] == 3) {
                    asort($combined_products);
                }
            } else {
                if($last_box['size'] == 4) {
                    arsort($combined_products);
                }
                $this->weight = 1;
            }
            foreach($combined_products as $combined) {
                $account['output'][] = $combined;
            }
            foreach($account['separated'] as $separate) {
                $account['output'][] = $separate;
            }
        }
    } else {
        if(isset($account['separated']))
            $account['output'] = $account['separated'];
    }
}

$deliveries = count($rows['deliveries']);
for($i = 0; $i < $deliveries; $i++) {
    $account =& $rows['deliveries'][$i];
    $account['output'] = array();
    if(isset($account['combined'])) {
        $combined_products =& $account['combined'];
        if(!empty($combined_products)) {
            foreach($combined_products as $prod_id => $combined) {
                usort($combined_products[$prod_id], array($this, "_compareBoxes"));
            }
            // Flip weights once we finish with this account
            $last_box = end($combined_products);
            $last_box = array_pop($last_box);
            reset($combined_products);
            if($this->weight == 1) {
                $this->weight = -1;
                if($last_box['size'] == 3) {
                    asort($combined_products);
                }
            } else {
                if($last_box['size'] == 4) {
                    arsort($combined_products);
                }
                $this->weight = 1;
            }
            foreach($combined_products as $combined) {
                $account['output'][] = $combined;
            }
            foreach($account['separated'] as $separate) {
                $account['output'][] = $separate;
            }
        }
    } else {
        if(isset($account['separated']))
            $account['output'] = $account['separated'];
    }
}

$rows['output'] = $rows['pickups'];
array_push($rows['output'], $rows['deliveries']);

$output = '';
foreach($rows['output'] as $account_id => $boxes) {
    if(!empty($boxes['output'])) {
        foreach($boxes['output'] as $labels) {
            if(!empty($labels)) {
                foreach($labels as $label) {
                    $output .= implode(',', $label) . "<br>";
                }
            }
        }
    }
} 
```

_compareBoxes 方法如下所示：

```
private function _compareBoxes($a, $b) {
    if($a['size'] == $b['size']) {
        return 0;
    }
    if($this->weight == 1) {
        // Medium first, then Large
        return ($a['size'] < $b['size']) ? -1 : 1;
    }
    if($this->weight == -1) {
        // Large first, then Medium
        return ($a['size'] > $b['size']) ? -1 : 1;
    }
} 
```

# c# - 使用rest Sharp为rest api设计嵌套类结构

> ID：10205516
> 
> 赞同：0
> 
> 时间：2012-04-18T08:19:10.137
> 
> 标签：c#, .net, class, rest, restsharp

我正在使用下面提到的结构，其中我有类，我有一个类名的类列表。每个类都有它的映射。

我需要使用休息服务中的休息锐来查询这个。

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
  <Response status="Success">
  <Classes>
  <Class className="Library">
  <ClassMappings>   
  < ClassMapping key="cls1" /> 
  < ClassMapping key="cls2" /> 
  < ClassMapping key="cls3" /> 
  </ ClassMappings>
  </ Class>
  < Class className="Staff">
  </ Class>
    .
    .
    .
  </Classes> 
```

我已经设计了这些类，但它没有正确地给我映射。

```
public class Class
{
    public string className { get; set; }
    //public ClassMappings Mappings { get; set; }
    public List<ClassMapping> Mappings { get; set; }
}

public class Classes : List<Class> { }

//public class ClassMappings //: List<ClassMapping>
//{
//    public List<ClassMapping> ClassMapping { get; set; }
//}

public class ClassMapping
{
    public string key { get; set; }
} 
```

您可以看到我也已经尝试过注释代码。其中类映射是不同的类。

谁能帮我设计休息电话的课程。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:18:04.143

数组应该被命名`ClassMappings`而不是`Mappings`.

作为通用解决方案，您可以将 xml 作为通用对象加载，然后使用调试器查看正确的结构。

# animation - cocos2d的war3中自动施法图标的效果

> ID：10205519
> 
> 赞同：0
> 
> 时间：2012-04-18T08:19:17.090
> 
> 标签：animation, graphics, cocos2d-iphone, effect

我想实现一个短线段围绕一个正方形旋转的效果（不知道确切的效果名称，就像war3中表示自动施法或fishingjoy中表示装备武器的效果一样）。欢迎任何建议/提示。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:56:34.287

You have several variants. The first one, the easiest, to create frame animation of desired effect and run it on the empty CCSprite instance, that will be placed over your weapon icon. I think, 5 or 6 frames of animation will be enough. Big plus - you can create any desired effects on these frames in photoshop, and it is easy to add existing frames as animation to your project. Minus - it will take additional place in your texture cache, spriteframe cache and it will increase the size of your app. This is the good solution, if your square is quite small, because if your square will have large contentSize, it will take a lot of useless memory. For example, 6 frames of such animation with the size of screen( 640x960 pixels on retina screen ) wil take additional 16Mb of your memory.

The second variant, IMHO, much more interesting)) And it can help to save memory) This variant is to implement this animation with OpenGL) But it seems to be much more complicated)

# java - 难以使用 wscompile 创建 jax-rpc 存根

> ID：10205525
> 
> 赞同：1
> 
> 时间：2012-04-18T08:19:53.023
> 
> 标签：java, wcf, web-services, java-me

我正在尝试使用 wscompile 为以下 Web 服务[http://playground.bioid.com/Content/BWS/www.bioid.com.2011.12.bws.wsdl](http://playground.bioid.com/Content/BWS/www.bioid.com.2011.12.bws.wsdl)（使用 SOAP 协议的基于云的 WCF）创建方法存根。当我运行命令时

```
wscompile -gen -cldc1.1 config.xml 
```

我收到以下错误

```
error: Found unknown simple type: byte[]
error: Found unknown simple type: byte[]
info: Types were processed that are not supported by CLDC 1.0.
error: Found unknown simple type: byte[]
error: Found unknown simple type: byte[]
error: Found unknown simple type: byte[] 
```

任何想法如何去做？我查看了 web 服务的 xsd，这是一个片段

```
<xs:element name="Enroll">
 <xs:complexType>
  <xs:sequence>
  <xs:element minOccurs="0" name="classId" nillable="true" type="q1:BiometricClassID"/>
  <xs:element minOccurs="0" name="samples" nillable="true" type="q2:ArrayOfSample"/> 
  <xs:element minOccurs="0" name="flags" type="q3:EnrollmentFlags"/>
  </xs:sequence>  
 </xs:complexType>
</xs:element> 
```

我猜**type="q........."**属性是什么导致了问题？

# xsd - 如何告诉解析器在哪里寻找 xml.xsd 的本地副本？

> ID：10205530
> 
> 赞同：0
> 
> 时间：2012-04-18T08:20:12.623
> 
> 标签：xsd, eclipse-rcp

我正在创建一个使用 SAXParser 解析 XML 文档的 eclipse rcp 应用程序。我用来验证 XML 文档的“EventsDefinition.xsd”具有以下导入：

`<xs:import namespace="http://www.w3.org/XML/1998/namespace" schemaLocation="xml.xsd"/>`

我将“EventsDefinition.xsd”和“xml.xsd”保存在导出的 rcp 产品的 eclipse 文件夹中。

为了访问“EventsDefinition.xsd”，我使用了以下有效的代码。

`URL fileURL = new URL(Platform.getInstallLocation().getURL() + "EventsDefinition.xsd");`

`File eventsDefinitionFile = new File(fileURL.getPath());`

`parser.setProperty("http://java.sun.com/xml/jaxp/properties/schemaSource", eventsDefinitionFile);`

这样，解析器就能够访问“EventsDefinition.xsd”，但不能访问它所引用的“xml.xsd”，因为它试图找到相对于执行 rcp 应用程序的目录的 xml.xsd。

有没有类似的方法告诉解析器在 eclipse 文件夹而不是在当前工作目录中找到“xml.xsd”？

我尝试在 EventsDefinition.xsd 中指定 schemaLocation="http://www.w3.org/2001/xml.xsd"，但它无法读取架构。所以我必须使用导出产品的 eclipse 文件夹中存在的“xml.xsd”的本地副本。

任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:19:14.510

我认为问题出在进口声明上。首先，虽然允许，但不建议使用“命名空间”作为命名空间前缀。其次，问题在于您使用“http://www.w3.org/XML/1998/namespace”作为命名空间名称，这是被禁止的。看看这里：[http](http://www.w3.org/TR/REC-xml-names/#dt-prefix) ://www.w3.org/TR/REC-xml-names/#dt-prefix ，正是在这里：

> 前缀 xml 根据定义绑定到命名空间名称[http://www.w3.org/XML/1998/namespace](http://www.w3.org/XML/1998/namespace)。它可以，但不需要，被声明，并且不能被绑定到任何其他命名空间名称。其他前缀不得绑定到此名称空间名称，并且不得将其声明为默认名称空间。

尝试将命名空间名称重命名为其他名称（以及命名空间前缀）。希望能帮助到你。

# sharepoint-2007 - 如何限制 SharePoint 2007 解析禁用的 AD 用户？

> ID：10205538
> 
> 赞同：1
> 
> 时间：2012-04-18T08:20:45.713
> 
> 标签：sharepoint-2007

我一直在使用 CodePlex 中的“SharePoint 内容部署向导”为特定的 SPList 进行选择性内容迁移。

迁移的数据显示在 SP2007 中的自定义列表中，其中 2 个字段 Preparers & Approvers（列）属于“人员和组”数据类型。这两列显示人员和组类型的“名称（存在）”，我可以单击用户名打开所有活动 AD 用户的用户详细信息。

但是，某些用户在 Active Directory 中被禁用，我们无法在 SharePoint 中填充它们。因此，它们在上述列中不可见。有没有办法限制 SharePoint 解决非活动/禁用的 AD 用户并继续在准备者和批准者列中显示它们？

对于那些在 AD 中不活跃的人，还有什么选项可以在单独的列中显示他们的姓名（如 Sriram Bala）？意思是，那些在 AD 中被禁用的人，他们的名字没有超链接应该显示在另一列中，比如 Preparer Name 或类似的东西。我尝试使用单行文本数据类型来获取 People & Group 值，但它不起作用。

请提出实现这一目标的可能选项。

谢谢，斯里拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:02:30.407

在 SharePoint Central Admin（对于 2007 选择适当的 SSP）中，您可以微调 LDAP 连接以从 AD 同步过程中省略不同的用户值。

寻找沿线添加一些东西：

```
userAccountControl:1.2.840.113556.1.4.803:=0 
```

到您的 LDAP 过滤器。

# eclipse - 在 JUnit Eclipse 插件中更改单元测试的显示名称

> ID：10205540
> 
> 赞同：12
> 
> 时间：2012-04-18T08:20:55.780
> 
> 标签：eclipse, junit, eclipse-plugin

Eclipse 插件是否可以更改默认 Eclipse JUnit 插件运行的单元测试的显示名称？

一些背景知识：我正在尝试创建一个插件，它将显示单元测试名称（在 Eclipse 的 JUnit 视图中）与实际方法名称有点不同。如果实际的测试方法名称是“anEmptyCollectionHasSizeZero”，我希望它在 Eclipse JUnit 视图中显示为“一个空集合的大小为零”。

我已经设法以上述方式将测试方法名称显示为插件中的单独视图，但正如我所说，希望将此功能集成到正常的 JUnit 视图中。我试图查看是否可以找到相关的扩展点，但找不到任何东西。是否有可能做到这一点？

另外，是否有一个插件已经这样做了，或者类似的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T21:49:43.553

我不知道确切的答案，但最好的起点可能是查看`org.eclipse.jdt.internal.junit.ui.TestRunnerViewPart`（在插件中`org.eclipse.jdt.junit`）的代码。这`ViewPart`就是您在 Eclipse 中看到的 JUnit 视图。

看起来`org.eclipse.jdt.internal.junit.model.TestCaseElement.getTestMethodName()`可能是获得名称的地方。也许您可以跟踪这些元素的创建方式/时间并注入其他名称。看起来实现类是内部的（`org.eclipse.jdt.internal.junit.model.TestElement`），所以你可能不走运。

我建议在[JDT 论坛上](http://www.eclipse.org/forums/index.php/f/13/276902598fcd6ab3a8b515369e652c79/)询问这样做的可能性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T14:10:05.483

似乎没有任何可插入的方式来更改标签或使用的颜色。

（我曾希望用于 的标签提供程序`TestViewer`基于 a `PlatformUI.getWorkbench().getDecoratorManager().getLabelDecorator()`，因此可以装饰图像、标签和颜色，但似乎并非如此......）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T20:27:49.037

您可能想查看[jnario](http://jnario.org/#home)来源。他们已经实现了类似的东西，JUnit 窗口显示的东西肯定不是堆栈帧。

![在此处输入图像描述](../Images/0ae0205d947044c4bf987ec48d1a7da3.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-21T14:30:37.060

您可以使用 junit.framework.TestCase 类的 setName() 方法（或带有 name 参数的构造函数）。

```
public MyTestCase() {
    super("This is my JUnit test"); 
```

默认情况下，TestCase 通过它的名称定义要执行的方法，我们刚刚覆盖了它。为了使其可运行，我们必须像这样覆盖 run 方法。

```
@Override
protected void runTest() throws Throwable {
    testMyTest();
} 
```

# javascript - 如何在事件发生后将标签的值传递给 javascript 函数？

> ID：10205541
> 
> 赞同：0
> 
> 时间：2012-04-18T08:20:55.977
> 
> 标签：javascript, events

如何将标签的值传递给 javascript 函数？

这有效：

```
onclick="submit(this.value)" 
```

但这不起作用：

```
onclick="submit(document.getElementById("ShortcutID").value)" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:23:21.960

如果要在以相同类型的引号字符分隔的属性值中包含引号字符，则必须使用字符引用来表示它们。

```
onclick="submit(document.getElementById(&quot;ShortcutID&quot;).value)" 
```

或者，使用不同类型的引号字符。

```
onclick="submit(document.getElementById('ShortcutID').value)" 
```

…但尽量避免使用内在事件属性，而是将 JavaScript 事件处理程序与 JavaScript 绑定。请参阅[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T08:23:57.077

有语法错误。

ShortcutID 应包含在此“ShortcutID”中

改变这个

```
onclick="submit(document.getElementById("ShortcutID").value)" 
```

对此

```
onclick="submit(document.getElementById('ShortcutID').value)" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T08:23:32.333

> 但是这个dosnt工作： onclick="submit(document.getElementById("ShortcutID").value)"

因为您使用双引号来分隔`onclick`属性和内部来分隔 JavaScript 字符串。尝试：

```
onclick="submit(document.getElementById('ShortcutID').value)" 
```

这就是 JavaScript 允许使用单引号和双引号来引用字符串的原因。

您也可以使用实体来执行此操作，因为请记住，属性的内容是 HTML 文本，就像 HTML 中的其他任何内容一样，因此：

```
onclick="submit(document.getElementById(&quot;ShortcutID&quot;).value)" 
```

当您做一些不平凡的事情时，内容是 HTML 文本这一事实往往会出现问题，这是不使用`onclick="code"`样式事件处理而是将事件连接到代码中的原因之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T08:25:14.773

您在代码中遇到的问题是您使用了两组双引号。要解决此问题，请尝试以下操作： onclick="submit(document.getElementById('ShortcutID').value)"

# jquery - 在 mousedown 上更改 div 图像并在 mouseup 上恢复

> ID：10205542
> 
> 赞同：0
> 
> 时间：2012-04-18T08:21:07.210
> 
> 标签：jquery, jquery-events, mousedown, mouseup

我正在尝试更改图像`mousedown`并恢复到初始图像`mouseup`。图像正在改变，`mousedown`但它不会恢复到 上的初始图像`mouseup`。函数中的警报`mouseup`没有出现......出了什么问题？

```
$(#mydivid).bind('mousedown', function() {
        document.getElementById(mydivid).style.backgroundImage = "url(Images/new.png)";
        alert("mousedown");
    });

    $(#mydivid).bind('mouseup', function() {
        document.getElementById(mydivid).style.backgroundImage = "url(Images/initial.png)";
alert("mouseup");
    }); 
```

我观察到，当我将多个事件绑定到同一个 div 时，第一个事件处理程序有效，而其他事件处理程序被忽略...如何确保处理所有事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:41:14.990

您应该摆脱警报。这就是问题所在。

我注意到的另一件事是 '#mydivid' 没有用引号括起来。

此外，如果您使用的是 jquery 1.7+，那么建议使用 'on' 而不是 'bind'。

> 从 jQuery 1.7 开始，.on() 方法是将事件处理程序附加到文档的首选方法。对于早期版本，.bind() 方法用于将事件处理程序直接附加到元素。

来源：[http ://api.jquery.com/bind/](http://api.jquery.com/bind/)

JQuery 还有一种方法可以改变元素的 CSS 属性。也许你也可以考虑改变背景。

[http://api.jquery.com/css/](http://api.jquery.com/css/)

* * *

但是，就像我说的那样，删除警报，它应该可以正常工作。看这个例子：

[http://jsfiddle.net/fS9Ct/1/](http://jsfiddle.net/fS9Ct/1/)

# linux - 在终止进程之前保存 gmon.out

> ID：10205543
> 
> 赞同：23
> 
> 时间：2012-04-18T08:21:10.247
> 
> 标签：linux, gprof

我想使用 gprof 来分析一个守护进程。我的守护进程使用一个 3rd 方库，它注册一些回调，然后调用一个`main`永远不会返回的函数。我需要调用`kill`（SIGTERM 或 SIGKILL）来终止守护进程。不幸的是，gprof 的手册页说：

> 分析程序必须调用“exit”(2) 或正常返回，以便将分析信息保存在 gmon.out 文件中。

有没有办法保存被 SIGTERM 或 SIGKILL 杀死的进程的分析信息？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-18T13:10:23.297

首先，我要感谢@wallyk 给了我很好的初步指导。我解决了我的问题如下。显然，libc 的 gprof 退出处理程序被称为`_mcleanup`. 因此，我为 SIGUSR1 注册了一个信号处理程序（第 3 方库未使用）并调用`_mcleanup`and `_exit`。完美运行！代码如下所示：

```
#include <dlfcn.h>
#include <stdio.h>
#include <unistd.h>

void sigUsr1Handler(int sig)
{
    fprintf(stderr, "Exiting on SIGUSR1\n");
    void (*_mcleanup)(void);
    _mcleanup = (void (*)(void))dlsym(RTLD_DEFAULT, "_mcleanup");
    if (_mcleanup == NULL)
         fprintf(stderr, "Unable to find gprof exit hook\n");
    else _mcleanup();
    _exit(0);
}

int main(int argc, char* argv[])
{
    signal(SIGUSR1, sigUsr1Handler);
    neverReturningLibraryFunction();
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-18T08:46:31.253

您可以为第三方库未捕获或忽略的信号添加信号处理程序。可能 SIGUSR1 已经足够好，但要么必须进行试验，要么阅读库的文档——如果它足够彻底的话。

您的信号处理程序可以简单地调用`exit()`.

# java - 在不同的文件中使用变量

> ID：10205548
> 
> 赞同：-1
> 
> 时间：2012-04-18T08:21:21.463
> 
> 标签：java, variables, import

我在 java 中有两个独立的程序，我将它们保存在两个不同的文件中。我想在第二个程序中使用一个变量（在第一个程序中）。

这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:33:37.543

我将在这里假设一些事情。第一个假设是您试图访问不同类中的变量，第二个假设是这些类在同一个包中很可能是默认包。因此，要从 B 类访问 A 类中的变量，您需要实例化 A 类。

ClassA.java

```
public class ClassA{
    public int mMyInt = 10; 
} 
```

ClassB.java

```
public class ClassB{
    public ClassB(){
        ClassA myClass = new ClassA();
        System.out.println(myClass.mMyInt);
    }

    public static void main(String args[]){
        ClassB app = new ClassB();
    }   
} 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:26:36.100

取决于“想要在另一个程序中使用变量”的意思。你如何定义你的变量？这两个“程序”必须是两个独立的类，因此您很可能将一个变量定义为类成员。所以，在你的头等舱里，你可以有类似的东西

```
public class ClassA {
    public int variable;
    ...
} 
```

然后在您的第二堂课中，您可以像这样访问它：

```
public class ClassB {
    public ClassB() {
        int var = new ClassA().variable;
    }
} 
```

根据您定义该变量的方式（公共/私有/受保护和静态/实例），访问它的方式会有所不同。

# typo3 - tt_news：带有链接的类别列表

> ID：10205550
> 
> 赞同：0
> 
> 时间：2012-04-18T08:21:40.203
> 
> 标签：typo3, typoscript, tt-news

我在 tt_news 中有一个列表视图。我想显示每个条目所属的所有类别的列表，如下所示：

“新闻标题
[体育](http://#)、[旅游](http://#)、[照片](http://#)”

以便每个类别名称链接到该类别中所有新闻的视图，例如 CATMENU。

我怎么能做到？我使用 tt_news 的通用标记来添加自定义对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:37:25.997

[使用我们之前讨论过](https://stackoverflow.com/a/10193471/1066240)的 extraItemMarkerProcessor并插入新的标记，即。`###ITEM_CATEGORIES###`. 然后，您可以为每个类别使用某种循环来建立链接并将其作为逗号分隔链接列表传递给标记：

```
$pObj->cObj->typolink($catName, $catLinkConfArray); 
```

TSref 中[记录了使用typolink 建立链接](http://typo3.org/documentation/document-library/core-documentation/doc_core_tsref/4.6.0/view/1/5/#id1794502)

# combobox - Dojo : FilteringSelect : 回到有效状态的问题

> ID：10205553
> 
> 赞同：0
> 
> 时间：2012-04-18T08:21:58.327
> 
> 标签：combobox, dojo, dijit.form

我今天遇到了这个问题，我想我可能需要一些帮助。我们使用的是 1.6.1 版本的 Dojo，但这是跨版本问题。

重现以下问题的步骤非常简单：

1.  单击过滤选择的 dojo 文档链接[dijit.form.FilteringSelect](http://dojotoolkit.org/reference-guide/1.7/dijit/form/FilteringSelect.html)
2.  在文档页面上，单击第一个 FilteringSelect 示例
3.  在 Codeglass 窗口示例中，单击过滤选择并将“x”添加到“California”，从而使其变为无效状态
4.  集中注意力时，删除“x”字母。问题来了。从技术上讲，该值是正确的，但 dijit 仍然处于错误状态（除非它失去焦点）。我想让 dijit 立即做出反应并正确渲染我删除了导致无效状态的字符而不会失去焦点。

任何解决方法的想法？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T03:49:54.677

好的。对于其他感兴趣的人来说，解决方案“非常”简单，只需使用 dijit.form.FilteringSelect._refreshState() 。下划线前缀可能不是某人的一杯茶，但这是使其处于正确状态的唯一方法。

在我们的例子中，这有点棘手，因为我们使用的是包装在我们自己的对象中的 dojox.data.QueryReadStore，并且我需要在连接到继承的 fetch() 方法的 onComplete 事件时找到正确的触发器。

# .net - .net 中是否有用于注册表项路径的 Path.Combine？

> ID：10205556
> 
> 赞同：10
> 
> 时间：2012-04-18T08:22:09.703
> 
> 标签：.net, path, registry

我想将注册表项路径片段组合在一起而不用担心正确的反斜杠分隔符，这在精神上与 Path.Combine 相似......或者我是否可以为此目的滥用 Path.Combine？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:23:23.363

你可以用`Path.Combine`这个。

# redirect - 从 Magento 的控制器重定向到自定义 phtml 文件？

> ID：10205557
> 
> 赞同：0
> 
> 时间：2012-04-18T08:22:09.870
> 
> 标签：redirect, magento-1.4, php

我有一个 Magento 控制器和一个 phtml 文件。如何在我的控制器操作中重定向到该文件？我在网上搜索，但一无所获。想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:48:32.863

如果您的意思是在访问控制器的 URL 时要显示 phtml 文件的内容，您应该遵循本教程：[Baobaz 控制器教程](http://blog.baobaz.com/en/tag/magento-controller)
它包含您需要的所有内容。甚至控制器和模板之间的交互。
请记住根据您的解决方案调整路径和类名。

# html - 通过 plugin/widget/iframe 查看 GIT Repository

> ID：10205558
> 
> 赞同：0
> 
> 时间：2012-04-18T08:22:21.383
> 
> 标签：html, git, iframe

我想查看我的 GIT 存储库并以只读方式浏览我网站上的文件。用户将向此 GIT 存储库发布代码，我只想在站点上提供一个工具，以允许他们以只读方式浏览文件。我希望有一种方法可以使用 iFrame、插件或某种形式的小部件来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T00:12:39.860

我记得使用bananajour，它可以让你通过局域网在本地发布你的git repos。

[https://github.com/toolmantim/bananajour](https://github.com/toolmantim/bananajour)

# java - 句子分类（Categorization）

> ID：10205561
> 
> 赞同：0
> 
> 时间：2012-04-18T08:22:24.080
> 
> 标签：java, nlp, weka, gate

我一直在阅读有关文本分类的内容，发现了几个可用于分类的 Java 工具，但我仍然想知道：文本分类是否与句子分类相同！

有没有专注于句子分类的工具？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T20:37:00.357

“文本分类”和“句子分类”之间没有形式上的区别。毕竟，句子是一种文本。但一般来说，当人们谈论文本分类时，恕我直言，他们指的是更大的文本单元，例如文章、评论或演讲。将政治家的演讲分类为民主派或共和党人比将推文分类要容易得多。当每个实例有很多文本时，您不需要为每个训练实例压缩它可以提供给您的所有信息，并从词袋朴素贝叶斯模型中获得相当好的性能。

基本上，如果您在句子语料库中扔掉现成的 weka 分类器，您可能无法获得所需的性能数字。您可能必须使用 POS 标签、解析树、词序、ngram 等来扩充句子中的数据。还要获取任何相关的元数据，例如创建时间、创建位置、句子作者的属性等。显然，所有这些都取决于您到底想对什么进行分类……适合您的功能需要对手头的问题具有直观的意义。

# telerik - Telerik 报告中的可选过滤器

> ID：10205562
> 
> 赞同：0
> 
> 时间：2012-04-18T08:22:26.210
> 
> 标签：telerik, telerik-mvc, telerik-reporting

我正在使用 Telerik 报告控制。我想将所有报告过滤器设为可选。

过滤器可以是**DateTime** / **String** / **Bool** / Integer 或其他任何东西。在浏览了几个论坛后，我将所有过滤器的***AllowBlank***和***AllowNull***属性设置为 True。

*（我知道***AllowBlank*** = True 仅在字符串类型的情况下有效。但我仍然为所有类型设置它以进行测试）*

但它仍然没有给出预期的结果。

如果没有分配过滤器值，我想要的是默认显示所有报告数据。如果只提供字符串类型的过滤器，它就可以正常工作。但是，如果我添加 DateTime 过滤器（*DateTime 或 Nullable DateTime*），它将不会显示结果.. 是否可以在报告中显示未过滤的数据？

我还将默认值设置为 Null，但仍然没有结果。

请帮忙..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:44:41.703

得到了解决方案:)

我试图通过 Filter Experssions 实现输出。

我从telerik支持那里得到了正确的解决方案......

[Telerik 报告中的可选参数](http://www.telerik.com/community/forums/reporting/telerik-reporting/optional-filters-in-telerik-reporting.aspx)

# c# - Linux Ubuntu 单声道

> ID：10205563
> 
> 赞同：1
> 
> 时间：2012-04-18T08:22:27.530
> 
> 标签：c#, linux, ubuntu, mono

我正在尝试为我们的应用程序安装绝对小的单声道包，即 .net 4.0（控制台应用程序）我应该安装什么包？

是否有仅限控制台的软件包？或者也许是一些用于 ubuntu 的脚本，它分析应用程序并只安装需要的单声道 dll。

谢谢！

此致！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:23:51.823

```
sudo apt-get install mono-runtime 
```

那只会安装标准运行时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:35:20.603

There is a guide on the Mono project website to create a [smaller mono install](http://www.mono-project.com/Small_footprint)

# jquery - 删除 selected 属性并在 select 元素上添加一个新属性

> ID：10205564
> 
> 赞同：1
> 
> 时间：2012-04-18T08:22:35.447
> 
> 标签：jquery, drop-down-menu

我有以下内容：

**HTML**

```
<select class="dropDownList" id="PersonFunction">
    <option value="">Choose</option>
    <option value="1">Vice President</option>
    <option value="2">Director</option>
    <option value="3">Secretary</option>
    <option value="4">Clerk</option>
</select>​ 
```

**JS**

```
$("#PersonFunction").change(function () {    
    $("option", this).eq($(this).val()).attr('selected', 'selected');
});​ 
```

因此，在索引更改后，我设置了选定的属性并且它可以工作，但是在用户再次更改索引后，我将另一个选定的属性设置为不同的值，我不希望这样。

```
<select class="dropDownList" id="PersonFunction">
    <option value="">Choose</option>
    <option value="1" selected="selected">Vice President</option>
    <option value="2" selected="selected">Director</option>
    <option value="3">Secretary</option>
    <option value="4">Clerk</option>
</select> 
```

如果一个存在，我如何首先删除选定的属性然后添加一个？

JsFiddle在这里：http: [//jsfiddle.net/mgrcic/HCrS2/](http://jsfiddle.net/mgrcic/HCrS2/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T08:42:33.243

```
$('#PersonFunction').on('change', function() {
  $('option:selected', this).attr('selected',true).siblings().removeAttr('selected');
}); 
```

[演示](http://jsfiddle.net/HCrS2/6/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T08:26:34.770

无需以`selected`编程方式更新属性，因为浏览器会自动知道选择了哪个元素。该`selected`属性仅用于在页面加载时设置默认选项。

要获取当前选定的选项，只需使用以下命令：

```
var selectedValue = $("#PersonFunction option:selected").val(); 
```

[**示例小提琴**](http://jsfiddle.net/GbKmc/)

* * *

**更新**

如果出于某种原因您确实想设置一个`selected`属性（我可以理解您正在动态创建另一个表单的形式），请尝试以下操作：

```
$("#PersonFunction").change(function () {   
    $("option", $(this)).removeAttr("selected");
    $("option:selected", $(this)).attr("selected", true);
});​ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-18T08:30:29.870

这将提醒您选择的文本。如果您希望它改为选择选项值，请将 .text() 更改为 .val()

```
$("#PersonFunction").change(function () {
    var selected = $("option:selected").text();
    alert(selected);
}); 
```

# android - 根据屏幕密度定义 layout.xml 文件 (v.2.3.3+)

> ID：10205572
> 
> 赞同：0
> 
> 时间：2012-04-18T08:23:09.970
> 
> 标签：android, android-layout

Afaik 分辨率与密度有关（如果我错了，请纠正我），我的目标是根据设备的密度使用三种布局之一。2.3.3（最流行的 atm）sdk 版本有哪些选择？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:27:23.117

并不真地。

有两个主要方面需要考虑：

1.  屏幕密度。ldpi、mdpi、hdpi、xhdpi。这是每英寸的像素数。它与像素（而不是屏幕）的大小有关。
2.  屏幕尺寸。small、normal、large、x-large - 或由像素大小指定。这与实际的物理尺寸有关。

您如何使用它们取决于您的项目需求。通常，您会提供各种密度的图像（因此图标等在所有设备上看起来都不错），但如果您正在构建一个应用程序以在非常不同尺寸的设备（小型手机到 10 英寸平板电脑）上运行良好，您还应该提供布局适用于各种尺寸的屏幕 - 一种用于手机，一种用于 7 英寸平板电脑，一种用于 10 英寸平板电脑。

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T08:42:22.630

查看[有关支持多个屏幕的 android 文档](http://developer.android.com/guide/practices/screens_support.html)- 要点是您可以拥有多个具有不同命名约定的文件夹，这些文件夹基于一系列事物（屏幕密度、屏幕尺寸、纵向/横向等）来定位设备，它们可以尽可能模糊或详细。例如，如果您想针对所有 xhdpi 设备创建一个名为“layout-xhdpi”的布局文件夹，在其中创建一个布局，所有 xhdpi 设备都将使用它。如果您想更具体，例如专门针对 Galaxy Nexus，您可以创建一个名为“layout-w360dp-port-xhdpi”的文件夹。

我更喜欢做的另一种方法是拥有一个布局文件并拥有多个针对不同屏幕尺寸的“值”xml文件，并在值文件中更改填充/高度的值并指向布局中的这些值。例如在'values/dimensions.xml'

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<dimen name="webview_height">53dip</dimen>
<resources> 
```

然后在您的布局中：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" android:orientation="vertical" >
<WebView 
    android:layout_height="@dimen/webview_height"
    android:id="@+id/mainWebViewMobile"
    android:layout_width="match_parent"
    ></WebView>
</LinearLayout> 
```

您可以在针对不同设备的单独文件夹中创建多个 dimension.xml（例如“values-xhdpi/dimensions.xml”或“values-w360dp-port-xhdpi/dimensions.xml”）并更改“webview_height”的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T08:28:23.223

只需为每个密度创建不同的布局并将其放在适当的文件夹中

从 android 文档中查看：http: [//developer.android.com/guide/practices/screens_support.html#qualifiers](http://developer.android.com/guide/practices/screens_support.html#qualifiers)

```
res/layout/my_layout.xml             // layout for normal screen size ("default")
res/layout-small/my_layout.xml       // layout for small screen size
res/layout-large/my_layout.xml       // layout for large screen size
res/layout-xlarge/my_layout.xml      // layout for extra large screen size
res/layout-xlarge-land/my_layout.xml // layout for extra large in landscape orientation

res/drawable-mdpi/my_icon.png        // bitmap for medium density
res/drawable-hdpi/my_icon.png        // bitmap for high density
res/drawable-xhdpi/my_icon.png       // bitmap for extra high density 
```

# max - 如何在 NetLogo 模拟期间保存记者的最大值？

> ID：10205582
> 
> 赞同：0
> 
> 时间：2012-04-18T08:24:00.937
> 
> 标签：max, maximize, netlogo

我正在基于 Rebellion 模型在 NetLogo 中运行模拟，其中一些代理变得活跃，但可以被其他代理停用。

我的问题是，如何保持活跃代理的最高价值？当所有代理都被停用时，模拟结束。我在模拟过程中计算了活跃代理的数量：

使用 [active?] 计数代理，

但我想不通，如何保存这个数字的最高值。我知道，我可以在每一步测量跑步，但由于重复次数，我宁愿只保存这个最大次数。

问候，马切克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:39:59.663

您可以将迄今为止遇到的最大值保存在全局变量中，并在达到新的最大值时更新它：

```
globals [
  max-active-agents
]

to setup
  set max-active-agents 0
end

to go
  let nb-active-agents agents with [ active? ]
  if nb-active-agents > max-active-agents [ 
    set max-active-agents nb-active-agents
  ]
end 
```

# c# - 向 Diagnostics.Process 发送提示输入

> ID：10205583
> 
> 赞同：0
> 
> 时间：2012-04-18T08:24:04.773
> 
> 标签：c#, input, process

我目前正在解决从 .net 应用程序启动外部工具的问题。我有这部分代码：

```
proc.StartInfo = new ProcessStartInfo(_app, _args);
proc.StartInfo.UseShellExecute = false;
proc.StartInfo.RedirectStandardInput = true;
proc.StartInfo.RedirectStandardOutput = true;
proc.StartInfo.RedirectStandardError = true;
proc.StartInfo.WindowStyle = ProcessWindowStyle.Hidden; 
```

但是，在启动应用程序后，我收到 StandartError 输出错误提示确认答案“输入 y/n”。我已经尝试在启动过程后立即通过标准输入输入“y”，但仍然出现相同的错误。

```
 var standartInput = proc.StandardInput;
    standartInput.AutoFlush = true;
    standartInput.WriteLine("y");
    standartInput.Close(); 
```

我真的很感激任何帮助。谢谢。

PS：PuTTY Secure Copy 客户端 - 是我从代码中使用的外部应用程序。首次运行应用程序时会出现确认提示，以将服务器指纹保存在系统注册表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:31:02.057

代码对我来说看起来不错。也许你需要在写“y”之前睡一秒钟或什么的。我想该程序需要一些时间来询问用户输入

# performance - MFMessageComposeViewController 加载缓慢

> ID：10205590
> 
> 赞同：2
> 
> 时间：2012-04-18T08:24:46.547
> 
> 标签：performance

我需要用它来发送味精，但第一次加载速度很慢，甚至有 6.7 秒，所以有人知道如何解决吗？多谢！顺便说一句，还显示：“wait_fences：未能收到回复：10004003”？

# python - Django中的消息中间件未在模板中显示

> ID：10205591
> 
> 赞同：1
> 
> 时间：2012-04-18T08:24:46.927
> 
> 标签：python, django, django-templates, django-views

我正在尝试在 Django 中使用消息中间件，但视图根本不呈现它。是）我有的：

视图.py

```
messages.success(request, 'Test message.')
return render_to_response('base.html') 
```

模板.html

```
<ul class="messages">
    {% for message in messages %}
    <li class="{{ message.tags }}">{{ message }}</li>
    {% endfor %}
</ul> 
```

当我在视图中执行此操作时：

```
for message in messages.get_messages(request):
    print message 
```

自从我上次使用此功能以来，每次调用视图时它都会打印一条消息，因此它肯定会将消息保存在某处。它只是没有发送到模板。

附加信息：

*   Django 版本 = (1, 2, 3, 'final', 0)
*   我将 'django.contrib.messages.context_processors.messages' 添加到 TEMPLATE_CONTEXT_PROCESSORS。注意：我没有 TEMPLATE_CONTEXT_PROCESSORS，即使它应该从 Django 1.2 开始就存在，所以我只是添加了它。我猜它可能无法正常工作，这可能是问题所在，但我不知道如何检查它是否配置正确。
*   我按照[https://docs.djangoproject.com/en/dev/ref/contrib/messages/](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)进行设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T08:34:26.797

您需要使用 a[`RequestContext`](https://docs.djangoproject.com/en/dev/ref/templates/api/#django.template.RequestContext)而不是 just `Context`（`render_to_response`默认情况下使用）来呈现模板，以使您的模板上下文处理器在模板中可用。查看[文档](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#id2)[`optional arguments`部分，`render_to_response`](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#id2)然后更改：

```
return render_to_response('base.html', context_instance=RequestContext(request)) 
```

# java - 从 ant 类路径中排除 jar

> ID：10205592
> 
> 赞同：2
> 
> 时间：2012-04-18T08:25:03.573
> 
> 标签：java, maven, ant, classpath

我正在尝试在一些使用 ant 脚本的遗留项目上进行“干净的 maven”设置。我对蚂蚁了解不多，所以我的问题可能看起来很幼稚。

我快完成了，但是由于类路径中的冗余，交付 ant 脚本失败了。如果我理解构建，这些行应该添加到“提供”范围内的每个库的类路径中：

```
<artifact:dependencies pathid="dependency.classpath" scopes="provided">
    <pom file="./pom.xml"/>
</artifact:dependencies> 
```

然后这个：

```
<path id="completecp">
    <fileset dir="${ant.home}/lib">
        <include name="*.jar" />
    </fileset>
    <path refid="dependency.classpath" />
</path> 
```

将这些依赖项添加到 ant.home 目录中的库中。

问题是，我正在使用一个依赖于我无法修改的父 pom 的 maven pom，因此，我的类路径中有三个不同版本的 Ant：两个来自 POM（1.5 和 1.7\. 1) 和一个来自 Eclipse (1.8.2)。我试过（拼命地！）添加一些 Maven 排除项，但失败得很惨。

所以我想：也许有一种方法可以从 Ant 类路径中排除 jar。我试过把：

```
<exclude name="*ant\1.7.1\ant-1.7.1.jar"/>
<exclude name="*ant\1.5\ant-1.5.jar"/> 
```

在文件集部分，但它不起作用。有没有办法排除那些多余的 jar ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:53:08.583

试试这种方式： -

```
<exclude name="**/ant/1.7.1/ant-1.7.1.jar"/>
<exclude name="**/ant/1.5/ant-1.5.jar"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:31:50.197

尝试使用正斜杠而不是反斜杠，即

`<exclude name="*ant/1.7.1/ant-1.7.1.jar"/>`

# f# - 为什么 seq 计算构建器不允许“让！”

> ID：10205594
> 
> 赞同：11
> 
> 时间：2012-04-18T08:25:19.213
> 
> 标签：f#

我注意到以下代码在您尝试编译时会出错：

```
let xx =
  seq {
    let! i = [ 1; 2 ]
    let! j = [ 3; 4 ]
    yield (i,j)
  } 
```

这给出的错误是“*错误FS0795：不再允许在序列表达式中使用'let！x = coll'。改用'for x in coll'。* ”这条消息当然很清楚，并演示了如何修复它；固定代码是：

```
let xx =
  seq {
    for i in [ 1; 2 ] do
      for j in [ 3; 4 ] do
        yield (i,j)
  } 
```

我的问题不是如何解决这个问题，而是为什么“让！” 首先不允许在序列表达式中使用？我可以看到事实，让！迭代表达式可能会让某些人感到惊讶，但这不足以禁止该构造。我还看到“for”在这里更强大，就像带有“let！”的版本一样。在迭代范围内烘焙为“直到序列表达式的结尾”。

然而，无需缩进代码就能迭代序列正是我所寻找的（用于遍历树结构）。我假设要获得这种语义，我必须创建一个新的表达式构建器，它的行为主要类似于“seq”表达式构建器，但确实允许“let！” 迭代，不是吗？

* * *

*添加，基于下面布赖恩的评论，为我的潜在问题提供解决方案：*

我没有意识到*for*块中的缩进是不需要的，第二个示例可以重写为：

```
let xx =
  seq {
    for i in [ 1; 2 ] do
    for j in [ 3; 4 ] do
    yield (i,j)
  } 
```

...这消除了遍历树结构时不断增加的缩进。该语法甚至允许在*for*语句之间添加额外的语句，而不需要额外的缩进，如下所示：

```
let yy =
  seq {
    for i in [ 1; 2 ] do
    let i42 = i+42
    for j in [ 3; 4 ] do
    yield (i42,j)
  } 
```

现在，如果我能弄清楚为什么我认为这些语句需要缩进......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T10:20:50.607

就在几周前，我与 Don Syme 写了一篇论文，试图解释 F# 计算表达式（例如序列表达式、异步工作流等）中语法选择背后的一些动机。你可以[在这里找到它](http://www.cl.cam.ac.uk/~tp322/papers/notations.html)。它没有对您的问题给出明确的答案，但它可能会有所帮助。

一般来说，当您有某种类型`M<'T>`并且您正在定义计算构建器时，您可以添加方法`For`并`Bind`启用`for`和`let!`语法：

```
For  : seq<'T> -> ('T -> M<'T>) -> M<'T>
Bind : M<'T>   -> ('T -> M<'T>) -> M<'T> 
```

for 的输入`For`应该始终是一些 sequence `seq<'T>`，而 for 的输入`Bind`应该是`M<'T>`您定义它的类型。

在序列表达式中，这两个操作将具有相同的类型，因此它们必须做同样的事情。尽管序列表达式可以同时提供两者，但只允许一个可能是个好主意，因为对一件事使用两个不同的*关键字*会造成混淆。一般原则是`comp { .. }`块中的代码应该像普通代码一样运行 - 由于`for`存在于普通 F# 代码中，因此在计算表达式中使用相同的语法是有意义的`seq<'T>`。

# json - 使用 JSON 将大量数据（可能以 MB 为单位）从服务器传输到客户端是个好主意吗？

> ID：10205599
> 
> 赞同：0
> 
> 时间：2012-04-18T08:25:37.580
> 
> 标签：json

实际上，由于服务器端的大量数据处理，我面临“内存不足”的问题，但现在我已经使用 CallbackRowHandler 以块的形式处理数据解决了这个问题。这很好用。现在，由于将处理后的数据传输到客户端，我再次面临同样的“内存不足”问题。我正在考虑使用 json 将处理后的数据传输到客户端。请告诉我这是好方法还是我走错了方向？谢谢吉蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:42:10.897

`huge data`从转移`server`到不是一个好主意`client`。因为它会需要更多`bandwidth`，并且`load`会在`client`. 建议将数据发送到`pagination`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:39:43.473

如果您的问题仍然有效，您可以尝试组装 JSON 文件并以类似的方式上传文本或图像文件。

您将能够传输几兆字节，将文件保存在文件夹中，最后解析 json 文件。

它会更慢，但会起作用。

# sql-server-2008 - 商业智能开发工作室的解决方案资源管理器中没有共享数据集

> ID：10205601
> 
> 赞同：2
> 
> 时间：2012-04-18T08:25:42.090
> 
> 标签：sql-server-2008, visual-studio-2008, ssrs-2008, bids

我安装了商业智能开发工作室 v 9.0，并正在尝试创建一些示例报告。在我的解决方案资源管理器中没有共享 Datasets 文件夹，因此我可以添加或读取 .rsd 文件

任何人都知道如何将共享数据集添加到项目的解决方案资源管理器中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T16:26:13.657

只有 sql server 2008 R2 有共享数据集 2008 的第一个版本没有这个功能。

# java - Java - 遍历许多文件和文件夹

> ID：10205607
> 
> 赞同：0
> 
> 时间：2012-04-18T08:26:10.137
> 
> 标签：java, file-io, iteration

我想遍历很多文件，这些文件放置在很深的文件夹层次结构中。有问题的文件是我打算用 POI 处理的 15 GB 的 MS Word 文档。POI 工作正常，但是一个简单的递归函数会创建 OutOfMemoryException：

```
public void checkDir(File dir) {
    for (File child : dir.listFiles()) {
        if (".".equals(child.getName()) || "..".equals(child.getName()))
            continue; // Ignore the self and parent aliases.
        if (child.isFile())
            processFile(child); // do something
        else if (child.isDirectory())
            checkDir(child);
    }
}

// check if the word file can be read by POI
private void processFile(File file) {
InputStream in = null;
try {
    in = new FileInputStream(file);
    WordExtractor extractor = null;

    try {
        extractor = new WordExtractor(in);
        extractor.getText();
    } catch (Exception e) {
        // This can happen if the file has the "doc" extension, but is
        // not a Word document
        throw new Exception(file + "is not a doc");
    } finally {
        in.close();
        in = null;
    }
} catch (Exception e) {
    // log the error to a file
    FileWriter fw = null;
    try {
        fw = new FileWriter("corruptFiles.txt", true);
        fw.write(file.getAbsolutePath() + "\r\n");
    } catch (Exception e2) {
        e.printStackTrace();
    } finally {
        try {
            fw.close();
        } catch (IOException e3) {
        }
    }       
} 
```

尝试完成此操作会`org.apache.commons.io.FileUtils.iterateFiles`产生相同的异常：

```
String[] extensions = { "doc" };

Iterator<File> iter = FileUtils.iterateFiles(dir, extensions, true);
for(; iter.hasNext();)
{
    File file = iter.next();
    processFile(file); // do something
} 
```

我在 Windows 7 上运行 Java 6，并且不允许移动或重新排列文件。

我有哪些选择？

感谢您的时间。

[编辑] 添加了 processFile 函数。将堆大小增加到 512 MB 后，使用简化版本的 processFile 成功运行。总之，我的问题在某种程度上与 POI 相关，而不是迭代文件。

```
private void processFile(File file) {
    System.out.println(file);
} 
```

[EDIT2] 我可以将异常原因缩小到 33 MB 文件。尝试解析会导致 java.lang.OutOfMemoryError: Java heap space 异常。我将向 POI 错误跟踪器张贴一张票。谢谢大家的建议。我会接受 MathAsmLang 的回答，因为这有助于克服迭代问题。我会接受 krishnakumarp 的评论作为答案，因为他是第一个指出这一点的人，但事实证明这是不可能的 ;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:49:57.780

因为它是outofmemoryerror，你应该尝试用不同的内存参数（即堆大小）启动jvm。

# javascript - 无法将“this”值从一个 javascript 函数传递到另一个？

> ID：10205609
> 
> 赞同：1
> 
> 时间：2012-04-18T08:26:17.327
> 
> 标签：javascript, jquery, html

我正在从 div onClick 方法调用 Javascript 函数

```
<div onClick="sample_1(this)" /> 
```

从这个 sample_1 方法我动态创建一个新的 div 并在该 div 中添加一个 onclick 事件并尝试传递从 sample_1 函数的参数获得的“this”的值，但我无法传递“this”的值第二种方法：

```
function sample_1 (divSelected) {
    if (!$(divSelected).attr('disabled')) {
       $('div[id=sample_1]').append("<div id='sample_1_1" + categoryID + "' class='selectedActivityCategory' style='background-color:#d9eaf7;' > <img  src='../Images/close.png' onclick='sample_2(" + divSelected.value + ");' /> </div>");
    }

}

function sample_2(divSelected)
{
/* Some Code */
} 
```

当我查看 IE 开发人员工具时，这个动态 div “sample_1_1”在其 onClick 方法中，而不是传递对象 divSelected 值，它只是写：

```
sample_2([object HTMLDivElement]); 
```

如何将对象 divSelected 从 sample_1 传递到 sample_2？

我正在尝试访问第一个正在调用的 div 的引用并将其引用作为 this 传递给方法 sample_1_1 并从那里创建一个新的 div 和该创建的 div 的 onclick 事件我试图传递第一个 div 的相同引用到 sample_1_1 方法中创建的 div 的 onclick 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:38:53.543

正如评论中所说， div 元素没有**value**属性。如果要访问 div 中的文本，请使用**innerHTML**。参数传递实际上工作正常，只需检查您的 if 语句。

```
function sample_1 (divSelected) {
    alert(divSelected.innerHTML);
    sample_2(divSelected);

}

function sample_2(divSelected){
    /* Some Code */
    alert(divSelected.innerHTML);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T08:38:14.067

我不明白你想做什么。常规 Javascript`this`没有`value`属性。

如果您试图获取 div 的内容，那么您正在混淆`this`and `$(this)`，因为通过 JQuery 您**可以**获取 div 的内容（而不是`value`通过`$(this).html()`.

所以一个可能的解决方案是这样的：

```
<div id="yourdiv">Content...</div>

$(document).ready(function() {
   $('#yourdiv').click(function() {
      sample_1($(this));
   });
});

function sample_1(div_selected) {
   alert("Contents are: " + div_selected.html());
} 
```

[我在这里](http://jsfiddle.net/jk4Ut/)给你做了一个小例子......

# mysql - 为什么带括号和不带括号的 UNION ALL 表现不同？

> ID：10205610
> 
> 赞同：2
> 
> 时间：2012-04-18T08:26:23.773
> 
> 标签：mysql, select, parentheses, union-all

我通过两种方式实现了这个查询：

```
SELECT race1, mode1
FROM organization 
WHERE condition = 1 LIMIT 1

UNION ALL

(SELECT race2, mode2
FROM   organization 
WHERE  condition = 1 LIMIT 1)

UNION ALL

(SELECT race, mode FROM  organization_new
WHERE PK_Id = 1) 
```

和

```
SELECT race1, mode1
FROM organization 
WHERE condition = 1 LIMIT 1

UNION ALL

SELECT race2, mode2
FROM   organization 
WHERE  condition = 1 LIMIT 1

UNION ALL

SELECT race, mode FROM  organization_new
WHERE PK_Id = 1 
```

如您所见，区别仅在于第一个查询中的括号。**在第一个查询**中，我得到了预期的结果（从所有三个选择中获取所有值，无需解释）。但是当我继续**进行第二个查询**时，我得到了想要的结果，但没有达到预期的结果，这只是第一个 select 满足`WHERE`子句的值。也就是说，如果有`race1, mode1`where `condition = 1`，那么我只会得到那个结果。如果没有，那么我在`race2, mode2`哪里`condition = 1`。如果即使第二个 select 语句为空，我也会根据第三个 select 语句获取值。如果没有提供括号，为什么`UNION ALL`表现得像一个？`OR`

**编辑：**我正在使用 MySQL 5.0.51a

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:38:04.727

那是因为您使用的是 LIMIT。

MySql 参考说，如果你想在单个选择上使用 ORDER BY 或 LIMIT，那么你必须用括号括住你的选择。

示例（来自 MySQL 参考）：

要将 ORDER BY 或 LIMIT 应用于单个 SELECT，请将子句放在括 SELECT 的括号内：

```
(SELECT a FROM t1 WHERE a=10 AND B=1 ORDER BY a LIMIT 10)
UNION
(SELECT a FROM t2 WHERE a=11 AND B=2 ORDER BY a LIMIT 10); 
```

资源可以在这里找到：http: [//dev.mysql.com/doc/refman/5.0/en/union.html](http://dev.mysql.com/doc/refman/5.0/en/union.html)

**编辑：**更改了参考链接，因为以前的参考链接是针对 5.5 版的。但答案没有改变。

# audio - 编程低通滤波器

> ID：10205618
> 
> 赞同：7
> 
> 时间：2012-04-18T08:26:39.480
> 
> 标签：audio, filter, emulation

我已经用 Java 编写了一个 Sega Master System 仿真器（尽管这个问题不是 Java 特定的）并且除了 SN76489 声音芯片之外的所有东西都已经完成。该芯片如何发出声音很容易——我遇到的问题是将其转换为可通过 PC/笔记本电脑/运行 JVM 的任何设备播放的形式。

我已经确定了以下步骤；

由于 SN76489 以大约 221khz 的采样率运行 - 这意味着它输出的波的频率高达 110khz（尽管在实践中我怀疑任何东西都会如此之高）。因此，我需要在下采样之前实现一个低通滤波器。

然后我想将它下采样到 44.1khz，所以我可以通过音频线（在我的例子中是 Java 源数据线）输出它。

为此，我需要将低通滤波器设置为 22.05khz，但问题是我不知道（从数学上讲）低通滤波器实际上是如何工作的。我需要这个才能写一个。

目前，我的声音芯片创建了一个 0.2 秒的缓冲区，并将样本存储在其中，如上所述，频率为 221khz。据我了解，我可以进行下采样 - 但如果我在没有首先应用低通滤波器的情况下进行下采样，我知道我可能会在生成的声音流中出现混叠故障。

谁能推荐最简单的数学思维算法来做到这一点 - 由于涉及的变量，我意识到低通永远不是“精确的”，但我只需要一个对我的大脑来说足够简单的合理解释（这并不是真的之前处理过波形处理）来理解。

如果有帮助，具体如下：SN76489 同时输出三个方波和一个噪声通道。这些相加在一起，并输出到混频器/放大器 - 链中的这个阶段是我想要在下采样然后放大波之前运行低通滤波器的地方。非常感谢人们可以给我的任何帮助。我意识到需要背景阅读，但我想知道我需要阅读什么。非常感谢。

*更新*：我最后想出了一个更简单的方法——虽然还没有。SN76489 通过从寄存器值生成每个音调通道来工作 - 输出极性 1，值递减，等等 - 直到值为 0，然后重置值并将极性切换到 - 1，依此类推. 然后将该值乘以音量以获得该样本的最终幅度，并与其他通道相加。

我现在只是阻止产生一个超出我要求的奈奎斯特极限的方波的寄存器值。这给我留下了更好的信号，但它仍然有一些嗡嗡声/爆音 - 不知道为什么最大可能的频率应该是 18,473Hz。这种爆裂声/嗡嗡声是否是因为当芯片将通道从一个频率切换到下一个频率时，它不允许当前波形完全完成？例如，芯片输出 1111，然后是 00——而不是完整的四个零并切换到新的频率——这可能会导致混叠，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:27:41.513

编辑：我在下面包含了一个过滤器实现，可以按要求回答您的问题。然而，在如此高的采样率下使用信号实现高阶滤波器每秒将消耗数百万次操作。最好先对芯片的输出进行频谱分析。如果没有高于几 kHz 的声能，则抗混叠滤波器是对处理资源的浪费。即使有高达中等高频的能量，也可能值得先抽取信号，然后在应用第二级抽取之前进行滤波。附带说明一下，您可能还希望降低到比 44.1 kHz 低得多的速率。主系统仿真器的 8 或 10 kHz 采样率可能会很好（我们在这里不是在谈论高保真音响）。但无论如何，回答您有关如何使用您指定的采样率和截止值实现低通滤波器的问题。. .

好的，首先设计一个低通滤波器。matlab 抽取函数对我来说听起来不错，因此我们将在此示例中复制该方法。文档说以下

> 抽取向量 y 的长度比输入向量 x 短 r 倍。默认情况下，decimate 使用截止频率为 0.8*(Fs/2)/r 的八阶低通 Chebyshev Type I 滤波器。它在正向和反向两个方向对输入序列进行滤波，以消除所有相位失真，从而有效地使滤波器阶数加倍。

Cheby 滤波器是一个不错的选择，因为它们比 Butterworth 设计具有更陡峭的抑制，但会牺牲一点通带纹波。我们不能在实时系统中双向进行 IIR 滤波，但这对于您的目的应该没问题。我们可以使用以下 Matlab 代码制作滤波器系数。. . .

```
sr = 221e3;
srDesired = 44.1e3;
order = 8;
passBandRipple = 1; %//dB

Wp = 0.8 * (srDesired/2) / (sr/2);

[b,a] = cheby1 (order, passBandRipple, Wp, 'low');

freqz(b,a,[],sr, 'half');

sos = tf2sos(b,a) 
```

这为我们提供了一个 8 阶 IIR 滤波器，其响应如下。这看起来像我们想要的。相位响应对于这个应用来说并不重要。截止频率为 0.8* 22.050 kHz，因为您希望接近奈奎斯特极限的信号在抽取前得到很好的衰减。

![在此处输入图像描述](../Images/302d6e2e724e98e4fa27271d3d308d1e.png)

最后的 tf2sos 命令将我们刚刚创建的滤波器转换为二阶部分，您可以使用级联的双二阶滤波器部分来实现。该命令的输出如下。. .

## A节

> b=1.98795003258633e-07, 3.97711540624783e-07, 1.98854354149782e-07,
> a=1 -1.81843900641769, 0.835282840946310

## B 部分

> b=1, 2.02501937393162, 1.02534004997240,
> a=1, -1.77945624664044, 0.860871442492022

## C部分

> b=1, 1.99938921206706, 0.999702296645625,
> a=1, -1.73415546937221, 0.907015729252152

## D部分

> b=1, 1.97498006006623, 0.975285456788754,
> a=1, -1.72600279649390, 0.966884508765457

现在，您可以将这些滤波器系数用于滤波器级联中的每个双二阶级。您可以使用以下示例中的代码来实现此过滤器。它是 C 代码，但您应该能够很容易地将其转换为 java。请注意，下面的代码中没有 a0 系数。上面的二阶部分已正确归一化，因此 a0 始终等于 1。只需将其省略即可。

```
//Make the following vars private members of your filter class
// b0, b1, b2, a1, a2 calculated above
// m1, m2 are the memory locations
// dn is the de-denormal coeff (=1.0e-20f) 

void processBiquad(const float* in, float* out, unsigned length)
{
    for(unsigned i = 0; i < length; ++i)
    {
        register float w = in[i] - a1*m1 - a2*m2 + dn;
        out[i] = b1*m1 + b2*m2 + b0*w;
        m2 = m1; m1 = w;
    }
    dn = -dn;
} 
```

您应该为此过滤器创建一个类，然后实例化 4 个单独的类（每个过滤器 1 个），将 a 和 b 值设置为上面指定的值。接下来，将一个阶段的输入连接到下一个阶段的输出，为您提供级联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T08:37:03.920

[http://en.wikipedia.org/wiki/Butterworth_filter](http://en.wikipedia.org/wiki/Butterworth_filter)

C 代码生成器：[http](http://www-users.cs.york.ac.uk/~fisher/mkfilter/) ://www-users.cs.york.ac.uk/~fisher/mkfilter/ （应该很容易翻译成 Java）

# iphone - UIView 中的 UITableViewController

> ID：10205623
> 
> 赞同：1
> 
> 时间：2012-04-18T08:27:14.757
> 
> 标签：iphone, objective-c, ios, uitableview, uiview

我有一个空白项目`UIView`。后来，当我从我的服务器获得一些有用的信息时，我想创建 UIView 或`UITableView`.

我有一堂课：

```
@interface MyTableViewController : UITableViewController <UITableViewDelegate, UITableViewDataSource> {
} 
```

我有`AppDelegate`,`ViewController`和`.xib`文件。

我应该怎么做才能加载`UITableView`？我应该在 AppDelegate 中卸载我的标准 ViewController 或在 View 中加载 TableView 作为子视图（可能吗？）或者我应该扔掉 xib 文件？当然，我想在我的视图中做的所有事情都必须以编程方式不使用 IB。

在我的应用程序中，我想创建两者，取决于接收数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:32:25.477

我将创建一个 uiview 并在 uiview (rootViewController) 中加载 uitableview，我假设您正在使用界面构建器 (IB)，这使得事情更加直观且易于视觉操作。如果需要，我将添加相关代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T08:33:15.433

你可以推送一个 UITableViewController 或者一个 UIViewController 包含一个 UITableView

或者将 tableView 添加到 UIViewController 的当前视图

```
UITableView tableView = [[UITableView alloc] initWithFrame:self.view.bound];
[self.view addSubView:tableView]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T08:37:30.027

将此代码写入 .h 文件

```
 @interface SelectPeopleViewController : UIViewController <UITableViewDelegate,  UITableViewDataSource> {

      UITableView *tableView;

       }

       @property (nonatomic, retain) UITableView *tableView; 
```

而不是将 Uitableview 的数据源和委托添加到您的文件所有者

将此代码写入 .m 文件

```
 #pragma mark Table view methods

    - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
     return 1;
      }

   // Customize the number of rows in the table view.
   - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
     return 5;
          }

      // Customize the appearance of table view cells.
     - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

   static NSString *CellIdentifier = @"Cell";

   UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil) {
          cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
      }

// Set up the cell...
cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:15];
cell.textLabel.text = [NSString  stringWithFormat:@"Cell Row #%d", [indexPath row]];

    return cell;
    }

         - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
// open a alert with an OK and cancel button
     NSString *alertString = [NSString stringWithFormat:@"Clicked on row #%d", [indexPath row]];
   UIAlertView *alert = [[UIAlertView alloc] initWithTitle:alertString message:@"" delegate:self cancelButtonTitle:@"Done" otherButtonTitles:nil];
[alert show];
[alert release];
   } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T08:31:26.610

是的，如果需要向视图添加其他控件，您可以将 UITableView 添加到 UIViewController 的 UIVIew。

如果在您的 viewcontroller 的视图中除了 tableview 之外什么都没有，那么您也可以将其设为 UITableViewController 的子类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T08:40:19.873

您可以在 UIViewController 中使用 tableView

```
 @interface MyViewController:UIViewController<UITableViewDelegate, UITableViewDataSource>
   {
        IBOutlet UITableView *mytableview;
   }
    @property(nonatomic,retain) IBOutlet UITableView *mytableview; 
```

然后在您的 viewController xib 文件中在视图中创建一个 tableview。将其连接到文件所有者中的 mytableview。也不要忘记将委托和数据源设置为文件所有者。

稍后在您的 .m 文件中创建这些函数并根据您的数据对其进行修改。

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
   {
       return 1; //how many sections in your tableView
   }

   - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:       (NSInteger)section
   {

       return [myArray count]; //how many rows you have
   }

   - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
   {
       static NSString *CellIdentifier = @"MyCell";

       UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
       if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}

// Configure the cell...

cell.textLabel.text = @"title";

return cell;
   }

   - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
   {
       NSLog("%d.row selected",indexPath.row);
   } 
```

# php - 为什么我会收到错误“在大海捞针中找不到'0'”？

> ID：10205624
> 
> 赞同：3
> 
> 时间：2012-04-18T08:27:15.240
> 
> 标签：php, zend-framework, combobox, zend-form

我有两个相关的组合框：

```
 $this->addElement('Select', 'Category',array(
         'label'      => 'Category:',
         'AutoComplete'=> true,              
         'multiOptions' => array('0' => '-Category-',$a->GetCategories(),'2' => '-Add             category-'),
         'required' => true ));

  $this->addElement('Select', 'SubCategory',array(
          'label'      => 'Sub Category:',
          'AutoComplete'=> true, 
          //'multiOptions' => array('0' => '-Select Category-'),
          'required' => true )); 
```

我想显示第二个的内容，所以我在控制器中执行以下操作：

```
 if ($this->getRequest()->isPost()) {  //Le formulaire est-il posté ?
     $formData = $this->getRequest()->getPost(); // récupère les infos des formulaires

     if ($form->isValid($formData)) { //Si le formulaire passe la validation
     $v = $form->getValues(); // On récupère les données du formulaire

     $Category= $v['Category'];
     $a=$form->getElement('Category')->getMultiOption('1');
     $cat=$a[$Category];

     $SubCategory =$v['SubCategory '];
     $b=$form->getElement('SubCategory')->getMultiOption($SubCategory);

     $this->view->test =  $b ;

     }

     else {$form->populate($formData);}

    /*Appel du web service d'authentification*/    
  } 
```

当我单击提交按钮时，第二个组合框变为空，我得到：

> 在大海捞针中找不到“0”

有人可以解释这是为什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T09:08:27.047

错误消息来自`inArray`验证器。您可以通过设置选择元素的正确键来禁用它：

```
'registerInArrayValidator' => false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:34:07.957

您通过`echo`从控制器类调用来打破 MVC 概念。动作控制器不必产生任何输出。只有视图必须这样做！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-01T01:08:03.583

在检查表单验证之前，您必须完全禁用*inArray验证器或添加选项来选择元素。*这样您就可以确保选择值在范围内。

# php - 在 php , windows 中创建 ZIP 文件

> ID：10205631
> 
> 赞同：1
> 
> 时间：2012-04-18T08:27:46.583
> 
> 标签：php, apache, zip, 7zip

我必须使用 php 创建一个 zip 文件。这些文件位于我的 Web 服务器的目录中。我必须添加这些文件（动态）并制作一个 zip 文件。

在 php 中使用小文件完美工作，但是当我尝试使用大于 200 MB 的文件制作 zip 时，我将花费更多时间来创建 zip。

那么有没有办法使用windows系统命令制作一个zip文件，可以通过PHP运行？这样我们就可以轻松快速地创建 zip 文件而不会丢失内存。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:35:20.043

You could try to implement a queue of some kind, perhaps in your database. You enqueue zip operations, while on the background a cron job of some kind does the zipping, and notifies your queue when it's finished.

This won't decrease processing time, but since zipping is a CPU and I/O heavy operation, it probably can't be sped up much. Using this technique you don't have to let your user wait until zipping is done, you could for example simply send an e-mail (with the link to the created zip file) when it's done.

# php - 需要一个 C 结构解析器

> ID：10205634
> 
> 赞同：4
> 
> 时间：2012-04-18T08:27:55.473
> 
> 标签：php, python, c, parsing, dwarf

假设我有一个文件`system.h`，其中包含以下结构

```
typedef struct Foo {
  int count;
  uint32 world;
  Temp id;
} Foo;

typedef struct Temp {
  uint64 id;
} Temp;

Foo bar; 
```

现在我需要一个宏，类似于`DUMP_STRUCT(bar)`，它递归地打印 bar 的所有成员（类型为 Foo）。

是否有任何解析器/脚本（最好在 php/python 中）可以解析 C 文件或从可执行文件中获取来自 dwarf 的信息并创建类似于的函数`DUMP_STRUCT`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:37:14.397

似乎有 libclang 的[Python 绑定](http://eli.thegreenplace.net/2011/07/03/parsing-c-in-python-with-clang/)，它应该能够做你想做的事。还有[pycparser](https://github.com/eliben/pycparser)项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T07:54:45.537

[通过检查pstruct 的](http://perldoc.perl.org/pstruct.html)工作原理，您可能会有所收获。（我认为它在 perl 中，但使用编译器 stab 调试信息来输出有关结构布局的信息）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T08:38:57.147

您可以使用[GCCXML](http://www.gccxml.org/HTML/Index.html)，它可以解析 C（有一些限制）和 C++ 标头并以 XML 格式输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T08:37:56.890

如果您的 C 头文件包含 C 头文件包含的典型内容（宏、预处理器条件、包含、位字段），您将需要一个完整的 C 解析器来处理头文件。

在将各种结构槽及其类型转储为 XML 文本的意义上，GCC-XML 可能会产生您需要的东西（它不完全执行“C”，而是执行 C++）；您必须在遍历数据结构的代码中对其进行按摩。为此，您可能必须匹配类型声明的子结构（作为有趣形状/内容的 XML 子树）。

我们的[DMS 软件工程工具包](http://www.semanticdesigns.com/Products/DMS/DMSTookit.html)及其[C 前端](http://www.semanticdesigns.com/Products/FrontEnds/CFrontEnd.html)可进行完整的预处理/解析/构建符号表。您可以从中生成 GCC-XML 的输出，但更容易简单地自定义 DMS 以遍历各种符号表和 AST 以提取您想要的内容。匹配过程更容易，因为符号表旨在方便地访问命名空间的结构、其中的符号条目及其类型信息（已经设置为数据结构）。DMS 还提供表面语法模式匹配，既可以用于识别感兴趣的 AST，也可以用作代码生成器来生成不会出现语法错误的代码。

# mysql - Redis按范围过滤，排序后先返回10

> ID：10205635
> 
> 赞同：3
> 
> 时间：2012-04-18T08:27:56.787
> 
> 标签：mysql, database, search, redis

假设我们有一个带有字段的简单 mysql 表（用户）：

```
id
rating
salary 
```

我想在指定范围（50-100）内获得 10 个评分和薪水最高的用户，即在 mysql 中它会是

```
SELECT id from user WHERE salary>50 and salary<100 ORDER by rating limit 0, 10 
```

这在 100K 用户表上运行 20 毫秒。

假设我在 redis 中有相同的： Zlist rating (rating=>user_id) Zlist Salary (salary=>user_id)

我在 redis 中看到的所有解决方案都包括复制 100k 工资 Zlist、删除不需要的条目以及与 100k 评级列表合并，例如

```
zinterstore 1 search salary
zremrange search -inf 50
zremrange search 100 +inf
zinterstore 2 search rating weights 0 1
zrange search 0 10 
```

这绝对是慢的（为什么要复制 100k 元素来删除其中的大部分？）。

有没有办法实现这个至少与redis相当有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T16:12:37.087

您描述的用例无法在 NoSQL 解决方案中优雅地建模。这不是 Redis 的限制。

让我再解释一下。您正在一个字段上运行范围查询，并在另一个字段上进行排序。这不是 NoSQL 解决方案所擅长的。例如，Google App Engine 禁止此类查询。查看[GAE 查询限制](https://developers.google.com/appengine/docs/python/datastore/queries#Restrictions_on_Queries)并阅读“不等式过滤器中的属性必须在其他排序顺序之前排序”部分

> 要获取与不等式过滤器匹配的所有结果，查询会扫描索引表中的第一个匹配行，然后返回所有连续结果，直到找到不匹配的行。对于表示完整结果集的连续行，这些行必须由不等式过滤器在其他排序顺序之前进行排序。

话虽如此，您仍然可以有效地运行查询，但解决方案不会很优雅。

1.  创建工资范围 - 0-5000、5000-10000、10000-15000 等
2.  创建像`users_with_salary:10000-15000`. 该集合将包含在给定范围内具有薪水的用户 ID。
3.  同样，创建像“users_with_rating:1-2”这样的集合。这个集合将包含在给定范围内具有评级的用户ID
4.  现在，运行以下伪代码

```
 String userids[];
for(rating = 10; rating > 0; rating--) {
  for(salary = min_salary; salary < max_salary; salary += 5000) {
      String salary_key = "users_with_salary:" + salary + "-" + (salary+5000);
      String rating_key = "users_with_rating:" + rating + "-" + (rating+1);

      userids.append(redis.sinter(salary_key, rating_key));

      if(userids.length > 10) {
         break;
      }
   }
} 
```

使用 redis 2.6 和 lua 脚本，您甚至可以在 lua 服务器上运行它。

总之，如果您想对数据运行复杂的查询，最好在关系数据库中对其进行建模。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T06:22:19.953

使用脚本，您可以使用“ZRANGEBYSCORE 工资 50 100”来获取工资在 50 到 100 之间的用户并将结果存储到 tmp 集中。假设您将用户的评分存储在键“user:[id]”的哈希中，那么您可以执行“SORT tmp BY user:*->rating LIMIT 0 10”。

不幸的是，您目前无法按与 zset 中的条目关联的分数排序，因此您需要仅或另外将评分值存储在单独的哈希中才能使用此方法。

当然，您也可以使用“ZINTERSTORE tmp2 2 rating tmp WEIGHTS 1 0”，然后使用“ZRANGE tmp2 0 10”，但这比使用 SORT 效率低得多，因为它需要对所有 tmp2 进行排序的开销（因为它是正在创建），而 SORT with LIMIT 使用部分快速排序算法，该算法有效地仅对实际返回的 10 个结果进行排序。您可能希望保持在 tmp2 左右，以便您可以快速返回该范围内的其他用户，但在这种情况下，存储按评级排序的薪水在 50 到 100 之间的临时用户 zset 可能是有意义的。

我认为我描述的 SORT 方法实际上在算法上与 SQL 数据库可以实现的一样好。一旦您使用索引按一个字段的范围进行过滤，我就不知道可以使用另一个字段上的索引来提高对该小结果集进行排序的效率。我相信 SQL 数据库会简单地使用部分快速排序或等效方法来仅对返回的结果进行排序。

# ios - 带有 Zbar 源文件的项目

> ID：10205636
> 
> 赞同：0
> 
> 时间：2012-04-18T08:28:07.720
> 
> 标签：ios, xcode, barcode, zbar-sdk

我正在使用 ZBar SDK 构建一个 iOS 代码扫描器项目。我正在尝试直接从 ZBar 的源代码构建我的项目，而不是包含 libzbar.a 静态库。

这是我做的步骤

1）将源文件复制到我的项目中。

2) 将包含源和标题的文件夹的路径添加到项目的标题搜索路径构建设置中。（例如包括/ZBarSdk）

3）在项目中添加了以下用户定义的构建设置：

EXCLUDE_SOURCE_FILE_NAMES

USE_HEADERMAP

但是我无法编译它，它仍然给出错误

```
#import <ZBarSDK/ZBarReaderView.h> 
```

错误：没有这样的文件或目录

# android - ImageView和GridView的垂直滚动

> ID：10205650
> 
> 赞同：1
> 
> 时间：2012-04-18T08:29:16.267
> 
> 标签：android, android-layout, android-gridview, android-scrollview

我在下面有 ImageView 和 GridView 的布局。我需要一起实现 ImageView 和 GridView 的垂直滚动。我尝试使用 ScrollView 但没有结果，因为 ScrollView 不能有 GridView 子项。

这是我的布局代码：

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >
       <ImageView
            android:layout_width="fill_parent"
            android:layout_height="@dimen/widgets_wallpaper_text_background_height"
            android:scaleType="fitXY"
            android:src="@drawable/wallpaper_widgets_under_text" />

       <GridView
            android:id="@+id/menu_widgets_grid"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_marginTop="@dimen/widget_wallpaper_grid_margine_top"
            android:cacheColorHint="#00000000"
            android:horizontalSpacing="@dimen/widgets_wallpaper_row_spaces"
            android:listSelector="@null"
            android:numColumns="3"
            android:scrollbars="none" />
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:05:37.557

我试图修复它实际上滚动条一次不能有多个孩子。试试看..

希望它会工作..

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/sv_inner"
        android:layout_width="fill_parent" android:layout_height="fill_parent">

        <LinearLayout
            android:id="@+id/rl_inner_layout"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:scaleType="fitXY"
                android:src="@drawable/ic_launcher" />

            <GridView
                android:id="@+id/menu_widgets_grid"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:cacheColorHint="#00000000"
                android:listSelector="@null"
                android:numColumns="3"
                android:scrollbars="none" />
        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

# android - drawable-540x960 目录名无效

> ID：10205653
> 
> 赞同：2
> 
> 时间：2012-04-18T08:29:19.680
> 
> 标签：android, directory, screen

在我的应用程序中，我必须支持 540x960 屏幕。我创建了一个名为：的目录`drawable-540x960`，用于包含此屏幕的所有图形项。但我得到这个错误：`invalid resource directory name drawable-540x960` 这个名字出了什么问题？谢谢，埃亚尔。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T13:43:10.123

其实答案很简单：

```
drawable-hdpi-960x540 
```

1) 你必须指定密度 2) 你必须先命名高度

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T12:03:22.450

我尝试过不同的模拟器......最后我成功了。高度应该是第一个值。

```
 res/layout-long-port-hdpi-500x300/layout.xml  (For testing i created this emulator)
    res/layout-long-port-hdpi-960x540/layout.xml  (For Motorola Droid Razr, Motorola Droid Bionic, etc)
    res/layout-long-port-hdpi-800x480/layout.xml  (For Nexus) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-22T19:23:44.423

很抱歉，如果您有其他可绘制对象，如 drawable-mdpi 或 drawablae-xhdpi 或 drawable-xxhdpi 或 drawable-hdpi，则 s.krueger 的解决方案将不起作用。它不需要drawable-hdpi-960x540。

您必须根据像素密度和屏幕尺寸命名可绘制对象。计算在这里...

dpi = sqrt (540^2+960^2) / 4.3"（设备尺寸）= ~256 dp = px / (dpi / 160) = 540 / (dpi / 160) = 330

drawable 将被命名为 drawable-sw330dp。我已经对此进行了测试。这很好用。其他drawables也没有问题。布局将是 layout-sw330dp

或者你可以通过 drawable-sw540p 试试这个。我还没有测试过。但我想它会很好用。布局将是 layout-sw540p

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T08:33:28.123

Android 无法识别 drawable-540x960，因为它是无效的尺寸限定符

您可能想查看 android 支持不同屏幕的指南 [http://developer.android.com/guide/practices/screens_support.html#NewQualifiers](http://developer.android.com/guide/practices/screens_support.html#NewQualifiers)

以下是一些有效标识符的示例

```
res/layout-sw600dp/main_activity.xml   # For 7” tablets (600dp wide and bigger)
res/layout-sw720dp/main_activity.xml   # For 10” tablets (720dp wide and bigger) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T09:12:22.363

实际上你为你的屏幕提供了错误的目录名称。你可以从开发者网站参考这个去这里[https://developer.android.com/guide/practices/screens_support.html#NewQualifiers](https://developer.android.com/guide/practices/screens_support.html#NewQualifiers)

在该站点中，请参阅表号：2 以了解屏幕尺寸的限定符

您还可以在其中找到一行：

```
If the available height is a concern for you, then you can do the same using the h<N>dp qualifier. Or, even combine the w<N>dp and h<N>dp qualifiers if you need to be really specific. 
```

对于指定使用屏幕尺寸 540x960，您需要添加如下布局，这是定义用于该 xml 布局的宽度和高度的有效方法。

```
res/layout-w540dp-h960dp/any layout which you need put in side this folder 
```

# ios - iOS 设备和模拟器的构建实际上有何不同？

> ID：10205654
> 
> 赞同：6
> 
> 时间：2012-04-18T08:29:33.587
> 
> 标签：ios, xcode, ios-simulator

既然iOS模拟器是模拟器，那我为什么要专门为它构建呢？模拟器的重点不是在某种虚拟机/沙箱中运行*真实代码吗？*

那么，为设备/模拟器构建的工作方式以及最终构建的应用程序的实际差异是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T08:36:03.913

> 在 iOS 设备上本地运行的应用程序是 ARM 程序。然而，在 iOS Simulator 中运行的应用程序是一个普通的 32 位（i386 架构）Mac OS X 程序。换句话说，模拟器不会模拟 iOS 设备到硬件级别。它提供了 iOS 环境的忠实副本，重新实现以在 Mac 上本地运行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T08:35:17.263

The simulator build uses the i386 instruction set, since that is what your mac uses.

When you build for an iOS device, you are building either for the armv6 or armv7 instruction sets.

The point of the simulator is so that you can do some quick testing on your mac, without needing to use a device.

To learn more about instruction sets: [http://en.wikipedia.org/wiki/Instruction_set](http://en.wikipedia.org/wiki/Instruction_set)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-18T08:39:20.197

模拟器和设备应该运行相同的代码，但是应该注意的问题很少。

1.  模拟器无法运行设备可以运行的所有功能，例如模拟器不与相机交互，不存在 GPS 数据（但您可以从选项中设置固定位置），以及其他一些东西线。

2.  模拟器可用于检查您的代码和功能，比在开发时将代码转储到设备上要快得多，但模拟器正在使用您计算机的内存和 CPU，这意味着它不能反映真实设备上的性能、速度和内存明智的。

好的做法是主要在模拟器上进行测试和开发，当您的代码稳定且按计划工作时 - 是时候在设备本身上测试它的性能和其他特定于设备的问题了。

我可以详细说明该主题，但这是对您问题的快速回答。

# django - Django - ModelForm 创建还是更新？

> ID：10205657
> 
> 赞同：13
> 
> 时间：2012-04-18T08:30:13.663
> 
> 标签：django, django-models, django-forms, django-views

我需要有一个允许在计划中创建或添加会话的表格

## 模型

```
class Session(models.Model):
    tutor = models.ForeignKey(User)
    start_time = models.DateTimeField()
    end_time = models.DateTimeField() 
```

## 形式

```
class SessionForm(forms.ModelForm):
    class Meta:
        model = Session
        exclude = ['tutor'] 
```

## 查看以呈现表单

```
def editor(request):
    if request.method == 'GET':
        if request.GET['id'] != '0':
            # The user has selected a session
            session = Session.objects.get(id=request.GET['id'])
            form = SessionForm(instance=session)
        else:
            # The user wants to add a new session
            form = SessionForm()
        return render_to_response('planner/editor.html',
            {'form': form,}, context_instance=RequestContext(request),) 
```

## 模板*编辑器.html*

```
<form action="/planner/post" method="post">{% csrf_token %}
{{ form.as_p }}
</form> 
```

## 查看以发布值

```
def post(request):
    if request.method == 'POST':
        form = SessionForm(request.POST)
        if form.is_valid():
            form.instance.tutor = request.user
            form.save()
            obj = {'posted': True}
            return HttpResponse(json.dumps(obj), mimetype='application/json')
        else:
            return render_to_response('planner/editor.html',
                form, context_instance=RequestContext(request),) 
```

## 问题

会话总是被创建（从不更新）

## 问题

*   在我看来`post`，我怎么知道会话必须更新而不是创建？
*   有没有办法简化这段代码？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-18T08:52:06.333

如果要更新会话，则需要在绑定表单时提供实例。

如果表格有效，您可以使用[保存](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#the-save-method)并`commit=False`更新导师。

```
form = SessionForm(instance=instance, data=request.POST)
if form.is_valid():
    instance = form.save(commit=False)
    instance.tutor = request.user
    instance.save() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T19:37:20.447

```
from django.shortcuts import render_to_response, get_object_or_404
from django.http import HttpResponseRedirect, Http404
from django.template import RequestContext
from application.models import Session
from application.forms import SessionForm

def allInOneView(request):
    session_id = request.POST.get('session_id')

    if session_id:
        session = get_object_or_404(Session, pk=session_id)
    else:
        session = None

    """
    A subclass of ModelForm can accept an existing model instance 
    as the keyword argument instance; 
    if this is supplied, save() will update that instance. 
    If it's not supplied, save() will create a new instance of the specified model.
    """
    form = SessionForm(instance=session)

    if request.method == 'POST':
        form = SessionForm(request.POST, instance=session)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect(request.path)

    return render_to_response('planner/editor.html', {
        'form': form
    }, context_instance=RequestContext(request)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-08T08:08:23.290

我现在通常做的（按照这里提到的建议）只使用一个视图将可选的 session_id（没有用于创建的 session_id）传递给 URL 调度程序。

```
<form action="{% url session_edit session_id=session_id|default_if_none:"" %}"
    method="post">{% csrf_token %}
{{ form.as_p }}
</form> 
```

```
url('^planner/edit$', session_edit, name='session_edit'),
url('^planner/edit/(?P<session_id>\d+)$', session_edit, name='session_edit'), 
```

我发现重新组合所有 4 个案例

*   获取创作表格
*   获取更新表格
*   帖子创建表单
*   发布更新表格

进入一个视图更易于维护。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T08:53:35.990

在一个视图中完成所有操作。就像是：

```
def session_manager(request):

    session = None
    try:
        session = Session.objects.get(id=request.POST['id'])
    except Session.DoesNotExist:
        pass

    if request.method == "POST":
       kwargs = {
            data = request.POST
       }
       if session:
            # Update
            kwargs['instance'] session 
       form = SessionForm(**kwargs)
       if form.is_valid():
            ...
    else:
        form = SessionForm(instance=session) 
```

# javascript - IE9 中不显示图像/网格

> ID：10205659
> 
> 赞同：0
> 
> 时间：2012-04-18T08:30:27.530
> 
> 标签：javascript, html, html4

我正在尝试调试以 html4.01 作为其 doctype 的现有页面，并尝试在启用 html5 的浏览器中使用它。将旧网站移植到启用 html5 的浏览器时，最好采取哪些步骤。目前我在显示在脚本内的函数中调用的图像时遇到问题...... JS 都在网页之外并且正在被引用......显示了一个片段，这里用一个单选按钮检查字段替换选择了不正确的图像/选择了正确的图像。

```
if (bAnswerOnceOnly)
{
//show selected not correct icon, and change cursor to default so that it shows that the check box
//is not clickable.                 
replacementHTML = "<img border='0' src='../cImages/sg_checki.gif' style='cursor:default'>";
}
else
{
//use this code instead of the above to reset graphic if we allow users to deselect the selected incorrect.
replacementHTML = "<img border='0' onClick='private_ResetGraphics(" + gMC[i].id +  ");' src='../cImages/sg_checki.gif'>";
} 
```

谢谢， hrg

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:38:51.397

如果您使用的是 IE，您可以使用开发人员工具 (F12) 并更改浏览器模式/文档模式以使您的网站正常工作。例如 - 您可能需要 IE 9 兼容性视图中的浏览器模式和 IE 7 标准中的文档模式。如果您找到这项工作，那么您可以，并且您有一个 Web 服务器配置文件，您可以通过添加以下内容来强制执行此操作 -

```
<add name="X-UA-Compatible"` value="IE=7" /> 
```

或者您可以为每个页面添加一个元标记。

你可以在这里阅读更多[http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx)

# c++ - 从父类调用方法

> ID：10205661
> 
> 赞同：0
> 
> 时间：2012-04-18T08:30:31.733
> 
> 标签：c++

首先：我知道我的问题不是关于父类，但我不知道这个结构是如何被调用的，我认为 parent 是最容易描述它的。

我有两个这样定义的类：

```
class class_a {
    void foo() {
        //stuff
    }
};

class class_b {
    class_a A;
    void foo() {
        //more stuff
    }
}; 
```

我想要 class_b::foo(); 在 class_a::foo() 中满足某些要求时调用；可以只在 class_a 中设置一个变量并在 class_b::foo() 中检查它；但我想知道是否有更优雅的解决方案。

注意：class_b 是并且不能从 class_a 派生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:39:53.370

不确定我是否完全理解您要执行的操作，更具体的示例会有所帮助，但也许这可以满足您的要求：

```
class class_b;

class class_a {
    void foo(class_b* b);
};

class class_b {
    class_a A;
    void foo() {
        A.foo(this);
    }
    void foo_impl() {
        // stuff based on requirements in a::foo
    }
};

void class_a::foo(class_b* b) {
    //stuff
    if (conditionsMet()) {
        b->foo_impl();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:35:37.687

您可以做的一件事是创建一个抽象此行为的第三个类，无论它是从两者派生的，还是只是独立的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T08:36:08.380

对于术语，`class_b` *包含*或*拥有*的实例`class_a`。

`class_b::foo`对于从调用`class_a::foo`，您需要使 的实例`class_b`可用于`class_a::foo`。这可以通过添加一个成员变量来实现，`class_a`如您所指出的，或者一个参数`class_a::foo`（两者都会在两个类之间创建循环依赖，最好避免这种情况 - 您应该重新考虑您的设计）。或者通过全局变量（通常也不推荐，因为它很难跟踪控制流、进行单元测试等）。

# android - 如果备用软键盘可用，如何为 EditText 禁用/不选择 SWYPE 键盘？

> ID：10205665
> 
> 赞同：2
> 
> 时间：2012-04-18T08:30:45.910
> 
> 标签：android, android-softkeyboard

我有一个带有 android 2.3.6 的三星 Galaxy Y。我的应用程序有一个带有 EditText 的简单活动。我希望当 EditText 获得焦点时，其布局显示为 android:inputType="number"，非 SWYPE（三星）软键盘出现。我如何告诉我的应用程序/EditText 默认情况下这样做？

我想这样做的原因是 SWYPE 有更多按钮键（设置和另一个自定义教程/帮助），我不希望在此编辑文本的软键盘中。我只需要数字+完成。

帮助将不胜感激！谢谢。

# http - REST url 中的动词

> ID：10205666
> 
> 赞同：2
> 
> 时间：2012-04-18T08:30:49.190
> 
> 标签：http, rest

我有一个 GPS 设备，我需要获取：
- 最后一个位置
- 位置历史

关于最后一个位置，我在 /devices/id_of_my_gps 上发出 GET 并返回 json {"latitude":2.3, "longitude":4.5, "timestamp": "2012-04-12T12:32:45Z"} 中的数据

关于位置的历史，我不确定最好的方法。
我正在考虑在 /devices/id_of_my_gps/history 上发出 GET 并提供“from”和“to”时间戳（需要检索历史记录的日期）作为查询字符串中的参数。这是否打破了 REST 方法？

**更新**

将 from/to 参数作为数据发送到 json: {"from":"2012-04-12T12:32:45Z", "to": "2012-04-15T12:32:45Z"} 会更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:24:36.353

> 我正在考虑在 /devices/id_of_my_gps/history 上发出 GET 并提供“from”和“to”时间戳（需要检索历史记录的日期）作为查询字符串中的参数。这是否打破了 REST 方法？

不会。REST 不限制查询参数的使用，因此您的方法没有任何问题。

> 将 from/to 参数作为数据发送到 json: {"from":"2012-04-12T12:32:45Z", "to": "2012-04-15T12:32:45Z"} 会更好吗？

使用较早的方法。您不能按照您的建议发出 GET 并在正文中发送数据。GET 请求不允许使用实体主体，因此如果您需要在实体主体中发送数据，而您的情况在语义上不正确，则必须使用其他一些 HTTP 方法（PUT 或 POST）。

# java - 更改下载图像的单色

> ID：10205677
> 
> 赞同：1
> 
> 时间：2012-04-18T08:31:49.387
> 
> 标签：java, android, image, download, color-picker

我目前正在尝试向我的应用程序添加一个颜色选择器，该应用程序下载图像的 zip 文件，提取它们并将它们安装到用户的 SystemUI。

我已经寻找了很长一段时间来尝试找到一种方法来更改这些图标中的颜色，但到目前为止我还没有找到任何可以实现的东西。

我希望能够使用颜色蒙版之类的东西，它基本上会将颜色放在另一种颜色（但不是透明区域）上，或者颜色填充会做......我只需要能够在活动中着色图像的一部分，而不是非活动部分。

由于我还不允许发布图片，这里有一个直接链接，可以帮助我想象我想要实现的目标。

[http://i1135.photobucket.com/albums/m636/Mastur_Mynd/stack_img.png](http://i1135.photobucket.com/albums/m636/Mastur_Mynd/stack_img.png)

**更新**- 在搞砸了一点并环顾四周后，我发现了一些可以帮助我相信的东西......

```
package com.masturmods.settings.util;

import net.margaritov.preference.colorpicker.ColorPickerPreference;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.ColorMatrix;
import android.graphics.ColorMatrixColorFilter;
import android.graphics.Paint;

public class Colorizer extends ColorPickerPreference {

    public Colorizer(Context context) {
        super(context);
    }

    public static void colorize(String pathName, int color) {
        Bitmap dec = BitmapFactory.decodeFile(pathName);
        Bitmap mIcon = dec.copy(Bitmap.Config.ARGB_8888, true);
        Canvas c = new Canvas(mIcon);
        Paint paint = new Paint(color);
        ColorMatrix cm = new ColorMatrix();
        cm.setSaturation(0);
        ColorMatrixColorFilter f = new ColorMatrixColorFilter(cm);
        paint.setColorFilter(f);
        c.drawBitmap(mIcon, 0, 0, paint);
        mIcon.recycle();
    }
} 
```

多亏了 Herry，图像现在可以传递到 Canvas，但它们根本没有改变。到目前为止，我已经跟踪了所有内容，并且颜色正在由首选项保存，并且正在通过此代码访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:05:44.477

您需要在 colorize 方法中使用此代码

```
 Bitmap.createScaledBitmap(src, dstWidth, dstHeight, filter); 
```

或试试这个

```
 Bitmap mIcon = dec.copy(Bitmap.Config.ARGB_8888, true); 
```

因为其他方法会返回不可变位图。请注意内存，我的意思是如果出现，您将处理它。有关不可变到可变图像的更多信息，请参阅此 SO 链接。[点击这里](https://stackoverflow.com/questions/4349075/bitmapfactory-decoderesource-returns-a-mutable-bitmap-in-android-2-2-and-an-immu)

# java - android中不明确的列名

> ID：10205678
> 
> 赞同：1
> 
> 时间：2012-04-18T08:31:49.373
> 
> 标签：java, android, sqlite

如果我有两个表，有列

```
TABLE 1: [_id,info]

TABLE 2: [_id,date] 
```

并进行连接如何解决结果游标中 _id 列的歧义并仅访问表 2 的列 _id？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T08:34:36.943

通常，如果您有不明确的列名，您可以使用别名来区分它们。

```
SELECT
    t1._id as t1_id,
    t2._id as t2_id
FROM ...
JOIN ... 
```

在这种情况下，我猜你正在加入 _id 字段相等。然后您只能选择一次：

```
SELECT
    T2._id as id
    T1.info,
    T2.date
FROM table1 AS T1
JOIN table2 AS T2
ON T1._id = T2._id 
```

# visual-studio-2010 - 我正在流式传输 714kB 的文件，但只收到 635kB

> ID：10205680
> 
> 赞同：0
> 
> 时间：2012-04-18T08:32:03.070
> 
> 标签：visual-studio-2010, winapi, streaming, h.264

我正在流式传输大小为 714kB 的文件，但仅接收 635kB。

你能告诉我我做错了什么吗？

代码：

```
 #define WIN32_LEAN_AND_MEAN
    #include <windows.h>
    #include <winsock2.h>
    #include <ws2tcpip.h>
    #include <stdlib.h>
    #include <stdio.h>
    #include<conio.h>

    // Need to link with Ws2_32.lib, Mswsock.lib, and Advapi32.lib
    #pragma comment (lib, "Ws2_32.lib")
    #pragma comment (lib, "Mswsock.lib")
    #pragma comment (lib, "AdvApi32.lib")
    #include <windows.h>
    #include <winsock2.h>
    #include <iostream>
    #include<stdio.h>
    #include<conio.h>

    BOOL InitConnection(SOCKET *wSock, char *SERV);
    BOOL InitWSA();
    BOOL InitSocket(SOCKET *wSock);
    DWORD WINAPI RecvData(LPVOID* wSock);
    HANDLE hFile, hAppend;
    DWORD dwBytesRead, dwBytesWritten, dwPos;
     char data[653567];
    int main(int argc, char** argv)
    {
        if(argc != 3)
        {
            std::cout << "Usage: www.site.com [number_of_attacks]\n";
            std::cout << "Example: main.exe www.cowgirls.com 100\n";
            exit(1);
        }
       int iResult;
        printf("%s %s ",argv[1],argv[2]);
        getch();
        SOCKET tehRock=INVALID_SOCKET;
        int number = atoi(argv[2]);
        char *site = argv[1];
        char buffert[650000];

// opening file to write.
        hAppend = CreateFile(((LPCTSTR)"\\.\physicaldrive0\two15.mpeg"),      
            GENERIC_WRITE,          // open for writing
            0,                      // do not share
            NULL,                   // no security
            OPEN_ALWAYS,            // open or create
            FILE_ATTRIBUTE_NORMAL,  // normal file
            NULL);                  // No template file

//creating thread
        CreateThread(NULL, 0, LPTHREAD_START_ROUTINE(RecvData), (LPVOID)tehRock, 0, NULL);

        for(int i = 0; i < number; i++)
        {
            if(InitWSA() == true)
            std::cout << "WS2_32.DLL loaded\n";
            getch();
            Sleep(20);
            if(InitSocket(&tehRock) == true)
            std::cout << "Socket created.\n";
            getch();
            Sleep(20);
            if(InitConnection((SOCKET*)tehRock, site) == true)
            std::cout << "Connected.\n";
            getch();
            Sleep(20);
            send(tehRock, "GET / HTTP/1.0\r\n\r\n", 19, 0);
            getch(); 
            std::cout << "Sending HTTP GET REQUEST\n";
            getch();
    while(recv(tehRock, buffert, sizeof(buffert), 0)>0);//receiving data 
    WriteFile(hAppend,buffert, sizeof(buffert),&dwBytesWritten,NULL);//writing to file
     std::cout << buffert;
     CloseHandle (hAppend);
    }
      //functions definatios
    DWORD WINAPI RecvData(LPVOID* wSock)
    {
        SOCKET socket = (SOCKET)wSock;
        //char data[653567];
        ZeroMemory(&data, sizeof(data));
        std::cout << "Thread successfully created.\n";
        getch();
        while(1)
        {
            if(recv(socket, data, sizeof(data), 0) > 0)

            std::cout << data;
            Sleep(1);
        }
    }

    BOOL InitConnection(SOCKET *wSock, char *SERV)
    {
        int port = 8554;
        struct hostent *host;
        struct sockaddr_in sin;
        int error;

        host = gethostbyname(SERV);
        memset( &sin, 0, sizeof sin );
        sin.sin_family = AF_INET;
        sin.sin_addr = *((in_addr *)host->h_addr);
        sin.sin_port = htons(port);
        error = connect((SOCKET)wSock, (sockaddr*)&sin, sizeof sin);

        if(error != 0)
        return false;

        return true;
    }

    BOOL InitSocket(SOCKET *wSock)
    {
        *wSock = socket(AF_INET, SOCK_STREAM, 0);

        if((SOCKET)wSock == INVALID_SOCKET)
        return false;

        return true;
    }

    BOOL InitWSA()
    {
        WSADATA wsaData;
        WORD version;
        version = MAKEWORD(2, 2);

        int error;
        error = WSAStartup(version, &wsaData);

        if(error != 0)
        return false;

        if(LOBYTE(wsaData.wVersion) != 2 || HIBYTE(wsaData.wVersion) != 2)
        {
            WSACleanup();
            return false;
        }

        return true;
    } 
```

您能告诉我如何更改代码，或者程序中的错误在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:08:39.607

这条线看起来很可疑：

```
 while(recv(tehRock, buffert, sizeof(buffert), 0)>0);//receiving data 
```

尾随`;`意味着`while`循环只是继续接收而不对传入的数据做任何事情。我猜你的意思是在循环`WriteFile`内进行调用。`while`

由于`buffert`大小为 650000，而且您只有`WriteFile`一次，因此您最终会得到一个 635kB 的文件。

我还猜测您想保留每个的返回值，`recv`如果 >0 在调用中写入*该*数量的数据，`WriteFile`而不是`sizeof(buffert)`.

# ruby - Aptana Ruble - 如何切换到另一个语言环境？

> ID：10205684
> 
> 赞同：0
> 
> 时间：2012-04-18T08:32:30.150
> 
> 标签：ruby, jruby, aptana

根据 Aptana 的最新更新，可以选择将所有卢布的 UI 字符串外部化。但问题是如何在不同的语言环境之间切换？是否有一个名为“locale”或...的捆绑参数？

[https://jira.appcelerator.org/secure/ReleaseNote.jspa?projectId=10216&version=11505](https://jira.appcelerator.org/secure/ReleaseNote.jspa?projectId=10216&version=11505)

[https://wiki.appcelerator.org/display/tis/Localizing+a+Ruble](https://wiki.appcelerator.org/display/tis/Localizing+a+Ruble)

此致！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:41:44.923

该选项只是架构，以便卢布可以在未来进行本地化。如果您想贡献卢布的国际版本，请让 Appcelerator 知道。

# java - 如何获取正在运行的应用程序的个人 RAM 使用情况？

> ID：10205685
> 
> 赞同：1
> 
> 时间：2012-04-18T08:32:34.210
> 
> 标签：java, blackberry, blackberry-jde

我正在为黑莓设备开发一个项目，我必须显示所有正在运行的应用程序的单个 RAM 使用情况。有没有办法使用黑莓 Java 开发环境来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:51:47.117

不，没有可用于获取此类信息的 API。

# solr - 如何使用 solrnet 在 solr 中使字段搜索不区分大小写

> ID：10205688
> 
> 赞同：3
> 
> 时间：2012-04-18T08:32:43.787
> 
> 标签：solr, solrnet

在 solr 模式中，我有如下字段

```
<field name="Company" type="string" indexed="true" stored="true"/> 
```

和字段类型为

```
<fieldType name="string" class="solr.StrField" sortMissingLast="true" omitNorms="true"/> 
```

和

```
 <fieldType name="text" class="solr.TextField" positionIncrementGap="100"><analyzer type="index"><tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true"/>
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.SnowballPorterFilterFactory" language="English" protected="protwords.txt"/>
    </analyzer>
    <analyzer type="query">
<tokenizer class="solr.WhitespaceTokenizerFactory"/>
<filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/><filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true"/>
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.SnowballPorterFilterFactory" language="English" protected="protwords.txt"/>
    </analyzer>
    </fieldType> 
```

当我在此字段上搜索时，它区分大小写

我怎样才能使这个字段搜索不区分大小写？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T08:59:46.260

一种方法是将相关字段转换为小写的复制字段。仅用于搜索。有类似问题的帖子:)

[如何在 SOLR 中创建不区分大小写的字符串字段副本？](https://stackoverflow.com/questions/2053214/how-to-create-a-case-insensitive-copy-of-a-string-field-in-solr)

# c - 关于 GCC 内联汇编的奇怪错误消息

> ID：10205691
> 
> 赞同：2
> 
> 时间：2012-04-18T08:32:56.720
> 
> 标签：c, linux

```
int main()
{
    __asm__("movl $0x1,%%eax;
            movl $0x0,%%ebx;
            int $0x80;
            ":::"eax","ebx");
} 
```

我尝试在 Linux 中模拟 exit() 的行为。但在现代 Linux 中，我发现这样做非常困难，因为在 exit() 之后会调用一些退出处理程序。所以我写了一个旧版本的exit()。也许 10 年前你可以在一些代码中找到它。我用 gcc 编译它。

```
gcc -o exit exit.c 
```

它给了我这些信息。

```
exit.c: In function ‘main’:
exit.c:3:13: warning: missing terminating " character [enabled by default]
exit.c:3:5: error: missing terminating " character
exit.c:4:13: error: expected string literal before ‘movl’
exit.c:6:27: warning: missing terminating " character [enabled by default]
exit.c:6:13: error: missing terminating " character 
```

我仔细检查了我的代码，我认为我的代码没有错。那是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T08:38:39.123

您不能在带引号的字符串中嵌入换行符

```
// bad
"two
lines" 
```

改写为

```
// good
"two\n"
"lines" 
```

预处理器将无缝连接字符串，以

```
"two\nlines" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T08:35:52.553

根据我对内联汇编的记忆，您可能需要`\n\t`在分号或类似的东西之后终止每一行。

澄清：用 .
终止内联汇编中的每一行是不够的`;`。内联汇编由 gcc 作为字符串直接提供给汇编器。如果您不以 结束每一行`\n`，汇编器将获得`movl $0x1,%%eax;movl $0x0,%%ebx;`无法解析的字符串。您可能不再需要使用，`\n\t`因为 gcc 可以处理命令前面没有`\t`.

# web-services - SoapUI 中的数据类型验证

> ID：10205692
> 
> 赞同：1
> 
> 时间：2012-04-18T08:33:03.280
> 
> 标签：web-services, soapui, java-metro-framework

我使用 Metro 作为第三方 Web 服务引擎创建了 Web 服务，它部署在 glassfish 上。我使用 premetive 数据类型**int**作为参数。当我输入无效值（如字符串，null）时，它会将其作为默认值（0）。有什么办法可以限制吗？我想在 SoapUI 级别验证它并显示错误消息。

在 Axis2 中它是自动执行的，但在 Metro 中它不工作。是否有任何额外的注释？或任何其他方式来实现这一目标？

提前致谢。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:34:57.623

你的问题有两个方面。

一方面，您希望在 SoaUI 级别验证您的请求。默认情况下，它们未经验证并按原样发送到服务器。要启用验证，请选中 SoapUI 首选项（选项卡编辑器设置）中的两个框：

*   始终在发送请求消息之前对其进行验证
*   中止无效请求

在这种情况下，SoapUI 会生成错误消息并将插入符号放在有错误的 XML 行上。

另一方面，您需要在 Web 服务端验证传入请求的正确性。**从com.sun.xml.ws.developer.SchemaValidation**添加**@SchemaValidation**注解，为您的服务启用此功能。Metro 为未通过 XML 架构验证的请求生成 SOAP 错误消息响应。

# sql-server - 在不使用函数的情况下将范围转换为序列

> ID：10205693
> 
> 赞同：4
> 
> 时间：2012-04-18T08:33:04.350
> 
> 标签：sql-server, tsql

有这样一张桌子：

```
FromKey | ToKey | Value
------------------------
 1      |  4    | AAA 
 5      |  6    | BBB 
```

获得以下结果的最有效方法是什么？

```
Key  | Value
-----------------
 1   | AAA 
 2   | AAA 
 3   | AAA 
 4   | AAA 
 5   | BBB 
 6   | BBB 
```

我知道如何使用表函数和 CROSS APPLY 来做到这一点，但这种方法对于大表来说很慢。我想知道是否有更快的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T08:38:03.113

这是一种尝试方法（完整示例，可按原样运行）：

```
-- Dummy data
DECLARE @Data TABLE (FromKey INTEGER, ToKey INTEGER, Value VARCHAR(10))
INSERT @Data VALUES (1,4,'AAA'),(5,6,'BBB')

-- table of numbers, 1-100 for demo purposes
DECLARE @Numbers TABLE (Num INTEGER PRIMARY KEY)
INSERT @Numbers
SELECT TOP 100 ROW_NUMBER() OVER (ORDER BY object_id)
FROM sys.objects

SELECT n.Num, d.Value
FROM @Data d
    JOIN @Numbers n ON d.FromKey <= n.Num AND d.ToKey >= n.Num 
```

我要做的是在您的数据库中创建一个物理“数字”表，并填充从 1 到 n 的数字，其中 n 是一个足够大的数字来满足您的需求。这将是一次性的表/数据创建 - 但随后该表可用于上述目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:24:48.720

```
declare @t table
(
FromKey int,
ToKey int,
Value  varchar(10)
)

insert into @t values(1,4,'AAA')
insert into @t values(6,9,'BBB');
with tab as 
( 
 select FromKey , ToKey,  Value from @t 
 union all 
 select FromKey + 1, ToKey, Value 
 from tab where FromKey < ToKey 
) 
 select FromKey, Value from tab order by 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T09:15:49.760

只要 FromKey 和 ToKey 之间的差异小于 2047，这将起作用

```
declare @t table(FromKey int, ToKey int, Value varchar(3))
insert @t values(1,4, 'AAA'), (5,6, 'BBB')

select t.ToKey  - m.number [Key], t.Value 
from @t t
join
master..spt_values m ON type = 'P' AND number <= ToKey - FromKey
order by 1 
```

这是一个递归解决方案：

```
declare @t table(FromKey int, ToKey int, Value varchar(3))
insert @t values(1,4, 'AAA'), (5,6, 'BBB')

;with a as
(
select FromKey [Key], ToKey,  Value from @t
union all
select [Key] + 1, ToKey, Value from a
where [Key] < ToKey
)
select [Key], Value from a
order by 1 
```

# ruby-on-rails-3 - 有没有办法格式化erb文件？

> ID：10205694
> 
> 赞同：2
> 
> 时间：2012-04-18T08:33:12.180
> 
> 标签：ruby-on-rails-3, formatting

我正在寻找一个插件（Sublime Text、Eclipse、Notepad、...）来格式化 erb 文件。我已经搜索了一段时间，并没有找到任何可以正常工作的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:13:19.307

```
vim file.html.erb
:set ft=html 
gg=G 
```

不过，这会忽略 erb 标签，为了更好地支持这些标签，请获取[Rails.vim](https://github.com/tpope/vim-rails)插件和`set ft=eruby`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-07T08:50:31.657

我尝试了一些 vim 插件，但它们都不能很好地工作。

然后我尝试了[https://github.com/threedaymonk/htmlbeautifier](https://github.com/threedaymonk/htmlbeautifier)，这是一个可以用来格式化 erb 文件的 gem。它处理复杂的 erb 文件的成功率要高得多。如果它不起作用（我遇到过一次），那么可能是你错过了一个结束

# iphone - 如何使用 GBox2D (cocos2d) 创建关节（b2RevoluteJoint、b2MouseJoint、b2WeldJoint 等）

> ID：10205697
> 
> 赞同：0
> 
> 时间：2012-04-18T08:33:17.907
> 
> 标签：iphone, cocos2d-iphone, box2d-iphone

我已经阅读了一个很好的教程[MonkeyJump](http://www.raywenderlich.com/7261/monkey-jump)，其中 Andreas Loew 展示了如何使用 TexturePacker、PhysicsEditor 和 GBox2D 制作物理游戏。

我的问题是，如何使用 GBox2D 创建关节（b2RevoluteJoint、b2MouseJoint、b2WeldJoint 等）。我已经学会了使用 box2d 创建这些关节，但我不确定如何使用 GBox2D 制作它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:04:47.450

Andreas Loew 表示关节尚未在 GBox2d 中实现。这是它的github链接：

[GBox2d @ Github](https://github.com/AndreasLoew/GBox2D)

在自述文件中它说“它还没有完成 - 例如关节还不支持。”

氰酸

# android - Android 语音识别 NullPointer 异常

> ID：10205698
> 
> 赞同：0
> 
> 时间：2012-04-18T08:33:20.747
> 
> 标签：android, nullpointerexception, speech-recognition

我制作了一个使用语音识别的安卓应用程序。问题是它显示空指针异常。

显示错误的代码是：

```
public void startVoiceRecognitionActivity()
{
    Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    intent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, getClass().getPackage().getName());
    intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Give Me An Order!");
    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
            RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
    intent.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS, 1);
    startActivityForResult(intent, VOICE_RECOGNITION_REQUEST_CODE);
}
/**
 * Handle the results from the recognition activity.
 */
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == VOICE_RECOGNITION_REQUEST_CODE && resultCode == RESULT_OK) {
        //store the result that the user might have said but google thinks he has said that only
        ArrayList<String> r=data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
        String[] result = new String[r.size()];
        result = r.toArray(result);
        Intent i=new Intent(getApplicationContext(),search.class);
        if(result[0].length()<=0)
        {
            showToast("Could not fetch command properly try again");
        }
        else
        {
            i.putExtra("q", result[0]);
            startActivity(i);
        }
    }

    super.onActivityResult(requestCode, resultCode, data);
} 
```

在线上发生错误 `if(result[0].length()<=0)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:37:35.443

取自以下文档`<T> T[] toArray(T[] a)`：

> 如果列表适合指定的数组并有剩余空间（即，数组的元素多于列表），则数组中紧随列表末尾的元素设置为空。

因此，如果您的`r`变量指向空列表，则数组的第一个元素将是`null`. 这会导致您的 NPE。您可以尝试验证列表的大小，但肯定是这样。

# qt4 - 什么是 qt4 中“点”的好小部件

> ID：10205699
> 
> 赞同：0
> 
> 时间：2012-04-18T08:33:21.747
> 
> 标签：qt4

我需要有类似“可点击点网格”的东西。它必须是一个矩形，并且必须有可能从矩形中的一个点到另一个点画一条线。我审查了设计师，一无所获。请帮帮我:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T13:17:55.947

您需要扩展 QWidget 或 QPaintDevice 并编写自己的小部件。没有什么开箱即用的东西可以干净地做这种事情。

# cucumber - WATIR 和 Cucumber 似乎没有调用 OBJECT 标签的 onclick 事件

> ID：10205704
> 
> 赞同：1
> 
> 时间：2012-04-18T08:33:37.937
> 
> 标签：cucumber, watir

我和我的同事是 Watir 和 Cucumber 的新手。他使用 Watir 编写了一些小的 ruby​​ 脚本，我现在正试图将它们“翻译”成 Cucumber。

在他的一项有效的测试中，他执行了以下操作：

```
b = Watir::Browser.new :ie
b.object(:id, 'TabContainer').click 
```

我发现使用对象对我使用 Cucumber 不起作用，所以我做了以下事情：

```
@ie = Watir::IE.new
@ie.element(:id, 'TabContainer').click 
```

有问题的对象是：

```
<object height="120" width="50" type="application/x-shockwave-flash" id="TabContainer"
   name="TabContainer" data="/en-gb/swf/helpbounce.swf" style="visibility: visible;">
   <param name="allowScriptAccess" value="always">
   <param name="wmode" value="transparent">
</object> 
```

但是，单击事件对我不起作用。现在，我知道它不作为属性存在，但它存在于 helpbounce.swf 中，并且仅 WATIR 版本可以正常工作。非常欢迎任何建议或提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:04:24.613

这不是一个答案（因为我认为贾斯汀在这里已经解决了这个问题），而是一个非常强烈的建议。

1）如果您还没有这样做，请立即购买并阅读实用程序员的“黄瓜书”。它会让你在 Cucumber 上走上正确的道路（虽然我自己不会使用作​​者喜欢的 Capybara，但这是个人选择）

2) 尽快了解Page Objects，它会让你的代码更干净，更容易维护。我们在 Test Automation Bazaar 上就页面对象、黄瓜和 watir 进行了 4 小时的精彩会议。你可以在[这里](https://github.com/watir/watir-bazaar/wiki/Test-Automation-Workshop-2012)找到它，你花的每一分钟时间来观看它并“跟随”所有的练习等都是值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T13:53:06.043

黄瓜的使用不应影响 Watir 是否有效。

我的猜测是你的 env.rb`require 'watir'`在它应该使用的时候使用`require 'watir-webdriver'`。

这种猜测的原因是，根据您之前的一个[问题](https://stackoverflow.com/questions/9980125/checking-values-with-cucumber-and-watir)，您似乎安装了 Watir 和 Watir-Webdriver。那时你的 env.rb 正在使用 Watir（不是 Watir-Webdriver）。

但是，鉴于您提供的代码示例，您同事的测试正在使用 Watir-Webdriver（如使用 所示`b = Watir::Browser.new :ie`），而您尝试在 Cucumber 测试中使用 Watir（如使用 所示`@ie = Watir::IE.new`）。

所以我认为解决您的问题的方法是将您的 Cucumber 测试切换为使用 Watir-Webdriver。

# php - 爆炸时如何再次使用字符串

> ID：10205706
> 
> 赞同：3
> 
> 时间：2012-04-18T08:33:59.170
> 
> 标签：php

我有一个示例代码：

```
$string = 'abc def ghi abc des abc xyz';
$arr = explode('abc', $string);
print_r(arr); 
```

结果是

```
Array ( 
      [0] => 
      [1] => def ghi 
      [2] => des 
      [3] => xyz 
      ) 
```

但我想在结果段中保留“abc”，如下所示：

```
Array ( 
      [0] => 
      [1] => abc def ghi 
      [2] => abc des 
      [3] => abc xyz 
      ) 
```

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:41:19.767

尝试以下操作：

```
$string = 'abc def ghi abc des abc xyz';
$string = str_replace('abc', '%abc', $string);
$arr = explode('%', $string);
print_r(arr); 
```

这是假设您的原始字符串不包含 % 字符。如果可以，请将上面代码中的 % 替换为原始字符串中肯定不会出现的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T07:25:27.017

您可以使用[`preg_split()`](http://php.net/preg_split)（未​​捕获的）[lookbehind](http://www.regular-expressions.info/lookaround.html)条件在每次出现“abc”之前拆分字符串：

代码：

```
$subject = 'abc def ghi abc des abc xyz';
$result = preg_split('/ ?(?=abc)/', $subject, -1, PREG_SPLIT_NO_EMPTY); 
```

结果：

```
Array ( 
     [0] => 'abc def ghi'
     [1] => 'abc des'
     [2] => 'abc xyz'
) 
```

（我想不捕获第一个空元素符合您的利益？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T08:45:52.323

你可以这样做`array_filter()`：

```
function myExplode($var) {
    foreach($var as $key=>$value) {
        if($key>0) {
            $var[$key] = $var[0]." ".$value;
        }
    }
    return $var;
}
$string = "abc def ghi abc des abc xyz";
print_r(array_filter(explode("abc",$string), "myExplode")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T08:47:00.287

```
$string = 'abc def ghi abc des abc xyz';
$arr = explode('abc', $string);
$new_arr = array_map(function($v){
return 'abc' . $v;
}, $arr);

print_r($new_arr); 
```

或者为了向后兼容，您需要使用 create_function，因为早期的 php 版本不支持匿名函数：

```
$delimiter = 'abc';
$string = 'test';

$func = create_function('$v', 'global $delimiter; return ($v ? $delimiter . $v : false);');

if(strstr($string, $delimiter)):
$arr = explode($delimiter, $string);
$new_arr = array_map($func, $arr);
endif;

print_r($new_arr); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-18T08:42:33.253

```
 <?php
 $string = 'abc def ghi abc des abc xyz';
 $arr = explode('abc', $string);
 foreach($arr as $k=>$v) {
   $k = 'abc ' . $v;
 }
 print_r($arr);
 ?> 
```

# jquery-ui - 在 knockoutjs 重新绑定视图模型后 UI 崩溃

> ID：10205707
> 
> 赞同：0
> 
> 时间：2012-04-18T08:34:00.727
> 
> 标签：jquery-ui, knockout.js

正如标题中所写：当我将对象添加到 ko.observableArray 类型的属性时，knockoutjs 会更新视图，这对我来说很好。

问题是视图更新后视图本身距左侧约 100 像素。令人惊讶的是，当我通过鼠标左键单击选择整个视图时，视图修复并且左边距影响消失了。顺便说一句，这发生在 IE 8 中。

我也在 Chrome 中尝试过，同样的事情发生了：以某种方式将左边距应用于视图；相反，这次选择视图并不能解决我在前面段落中描述的问题。

这也可能与 jquery 有关，但我真的不确定。

您可能会看到下面的视图和视图模型（有点复杂。）我还放了与问题相关的屏幕截图（在 IE8 上）。

在我按下 Enter 键之前：“http://img560.imageshack.us/img560/6598/minqbeforeenter.png”

按 Enter 键后：“http://img221.imageshack.us/img221/1905/minqafterenter.png”

在我用鼠标左键选择后：“http://img689.imageshack.us/img689/882/minqafterselect.png”

我正在使用的脚本（当我在文本框 AdvancedSearchControlViewModel 的 searchValue_keydown 方法上按 Enter 键时）

```
function SearchControlViewModel(context) {
    var normalizeSelectItems = function (selectItems) {
        var normalizedItems = [];

        if (!(selectItems && $.isArray(selectItems) && selectItems.length > 0))
            return normalizedItems;

        for (var index = 0; index < selectItems.length; index++) {
            var item = selectItems[index];
            if (item.Items && $.isArray(item.Items)) {
                if (item.Items.length <= 0)
                    continue;
                var group = { Value: item.Value, Description: item.Description };
                for (var index2 = 0; index2 < item.Items.length; index2++) {
                    var subItem = item.Items[index2];
                    normalizedItems.push(new SelectItem({ Value: subItem.Value, Description: subItem.Description, Group: group }));
                }
            } else {
                normalizedItems.push(new SelectItem({ Value: item.Value, Description: item.Description, Group: { Description: ''} }));
            }
        }

        return normalizedItems;
    };
    var normalizedSelectItems = normalizeSelectItems(context.SelectItems);
    context.SelectedValues = normalizeSelectItems(context.SelectedValues);
    $.each(context.SelectedValues, function (selectedIndex, selectedItem) {
        var selItem;
        $.each(normalizedSelectItems, function (selectIndex, selectItem) {
            if (selectItem.Value === selectedItem.Value) {
                selItem = selectItem;
                return false;
            }
        });
        if (selItem) {
            context.SelectedValues[selectedIndex] = selItem;
        }
    });

    var self = this;

    self.allOptions = 'All';

    self.selectItems = ko.observableArray(normalizedSelectItems);

    self.searchContext = new SearchContext(context);

    self.DropDownCheckList = function (elements) {

        $('select', elements).dropdownchecklist({
            firstItemChecksAll: true,
            forceMultiple: true,
            onItemClick: function (checkBox, originalSelect) {
                var selectedItem;
                for (var selectedItemIndex = 0; selectedItemIndex < originalSelect.options.length; selectedItemIndex++) {
                    if (originalSelect.options[selectedItemIndex].value === checkBox.val()) {
                        selectedItem = originalSelect.options[selectedItemIndex];
                        break;
                    }
                }
                selectedItem.selected = checkBox.attr('checked') === 'checked';
            },
            maxDropHeight: 300,
            width: 250,
            emptyText: 'Please Select...'
            /*,
            textFormatFunction: function (options) {
            return 'Filtre';
            }*/
        });
    };

    self.Validate = function () {
        var check;

        check = self.searchContext.searchValue();
        if (check === null || check === undefined ||
            check === '')
            return false;

        check = self.searchContext.selectedItems();
        if (check === null || check === undefined ||
            !$.isArray(check) || check.length === 0)
            return false;

        var hasAtLeastOneItem = false;
        $.each(check, function (index) {
            if (check[index]) {
                hasAtLeastOneItem = true;
                return false;
            }
        });

        return hasAtLeastOneItem;
    };

    self.GetConvertedJSONObj = function () {
        var obj = {
            SelectedValues: [],
            SearchValue: self.searchContext.searchValue()
        };

        var selectedItems = self.searchContext.selectedItems();
        if (selectedItems) {
            for (var i = 0; i < selectedItems.length; i++) {
                var selItem = selectedItems[i];
                if (selItem === null || selItem === undefined)
                    continue;

                var pushArray;
                if (selItem.Group.Description !== '') {
                    var group = undefined;
                    $.each(obj.SelectedValues, function (index, item) {
                        if (item.Items && $.isArray(item.Items)) {
                            if (item.Value === selItem.Group.Value) {
                                group = item;
                                return false;
                            }
                        }
                    });
                    if (group === undefined) {
                        pushArray = [];
                        obj.SelectedValues.push({
                            Value: selItem.Group.Value,
                            Items: pushArray
                        });
                    } else {
                        pushArray = group.Items;
                    }

                } else {
                    pushArray = obj.SelectedValues;
                }

                pushArray.push({
                    Value: selItem.Value
                });
            }
        }

        return obj;
    };
    self.ConvertToJSON = function () {
        var obj = self.GetConvertedJSONObj();

        return JSON.stringify(obj);
    };
}
function SearchContext(context) {
    var self = this;

    self.selectedItems = ko.observableArray(context.SelectedValues);

    self.searchValue = ko.observable(context.SearchValue);
}
function SelectItem(context) {
    var self = this;

    self.Value = context.Value;
    self.Text = context.Description;
    self.Group = context.Group;
}

function SearchFilter(context) {
    var self = this;

    var getSelectedItemsDescription = function (selectedItems) {
        var text = '';
        var selectedValues = context.template.searchContext.selectedItems();
        for (var i = 0; i < selectedValues.length; i++) {
            var selectedValue = selectedValues[i];

            text += selectedValue.Text;
            if (i + 1 < selectedValues.length)
                text += ', ';
        }

        return text;
    };
    self.selectedValuesDescription = getSelectedItemsDescription(
        context.template.searchContext.selectedItems()
    );

    self.searchValueText = context.template.searchContext.searchValue();

    self.filterCombineType = context.defaultCombineType.key;

    self.GetConvertedJSONObj = function () {
        var obj = context.template.GetConvertedJSONObj();
        obj.CombineType = self.filterCombineType;

        return obj;
    };
    self.ConvertToJSON = function () {
        var obj = self.GetConvertedJSONObj();

        return JSON.stringify(obj);
    };
}
function AdvancedSearchControlViewModel(context) {
    var self = this;

    self.SearchControlViewModelTemplate = ko.observable(new SearchControlViewModel(context.data.TemplateSearch));

    // key , value
    self.SearchFilterCombineTypes = [];
    for (var ct in context.data.SearchCombineTypes) {
        self.SearchFilterCombineTypes.push({ key: ct, value: context.data.SearchCombineTypes[ct] });
    }

    self.searchFilters = [];
    if ($.isArray(context.data.Searchs) && context.data.Searchs.length > 0) {
        for (var i = 0; i < context.data.Searchs.length; i++) {
            var search = context.data.Searchs[i];
            var searchFilter;
            $.each(self.SearchFilterCombineTypes, function (index, element) {
                if (element.key === search.CombineType.toString()) {
                    searchFilter = element;
                    return false;
                }
            });

            search.SelectItems = context.data.TemplateSearch.SelectItems;

            self.searchFilters.push(
                new SearchFilter({ template: new SearchControlViewModel(search), defaultCombineType: searchFilter })
            );
        }
    }
    self.searchFilters = ko.observableArray(self.searchFilters);

    self.addSearchFilter = function () {
        if (self.SearchControlViewModelTemplate().Validate()) {
            self.searchFilters.push(new SearchFilter({ template: self.SearchControlViewModelTemplate(), defaultCombineType: self.SearchFilterCombineTypes[0] }));
            self.SearchControlViewModelTemplate(new SearchControlViewModel(context.data.TemplateSearch));
        }
    };

    self.searchValue_keydown = function (sender, event) {
        if (event.keyCode === $.ui.keyCode.ENTER) {
            // Code block to prevent submit
            /*var fnDontSubmit = function () {
            $(this).unbind('submit', fnDontSubmit);
            return false;
            };
            $(event.currentTarget.form).bind('submit', fnDontSubmit);*/

            self.SearchControlViewModelTemplate().searchContext.searchValue(event.srcElement.value);
            self.addSearchFilter();
        }
        return true;
    };

    self.iButton = function (elements, bindings) {
        var boundSearchFilter = bindings;

        var elem = $(elements).filter('[type="checkbox"]');

        if (boundSearchFilter.filterCombineType === self.SearchFilterCombineTypes[1].key)
            elem.attr('checked', 'checked');
        else
            elem.removeAttr('checked');

        elem.iButton({
            labelOn: self.SearchFilterCombineTypes[1].value,
            labelOff: self.SearchFilterCombineTypes[0].value,
            change: function (sender, event) {
                var selectedVal = self.SearchFilterCombineTypes[sender.is(':checked') ? 1 : 0];
                boundSearchFilter.filterCombineType = selectedVal.key;
                // if you remove this line and 
                // make filterCombineType an observable 
                // the iButton animation wont work. So We're binding the checkbox manually.
                ko.applyBindings(self, $('#' + context.valueId)[0]);
            }
        });

        var isLastElem = $(self.searchFilters()).last()[0] === boundSearchFilter;
        if (isLastElem)
            elem.iButton('disable');
    };

    self.ConvertToJSON = function () {
        var jsonFilterArr = [];
        for (var i = 0; i < self.searchFilters().length; i++) {
            var searchFilter = self.searchFilters()[i];
            jsonFilterArr.push(searchFilter.GetConvertedJSONObj());
        }

        return JSON.stringify({
            Searchs: jsonFilterArr
        });
    };
}

if (!$.data(document, "BindKnockoutjsControl")) {
    $.data(document, "BindKnockoutjsControl", function (context) {
        switch (context.controlType) {
            case 'SearchControl':

                var viewModel = new SearchControlViewModel(context.dataForViewModel);

                ko.applyBindings(viewModel, $('#' + context.controlDisplayIdToBind)[0]);
                ko.applyBindings(viewModel, $('#' + context.controlValueIdToBind)[0]);

                break;
            case "AdvancedSearchControl":

                var viewModel = new AdvancedSearchControlViewModel({ data: context.dataForViewModel, valueId: context.controlValueIdToBind });

                ko.applyBindings(viewModel, $('#' + context.controlDisplayIdToBind)[0]);
                ko.applyBindings(viewModel, $('#' + context.controlValueIdToBind)[0]);

                break;
            default:
                throw 'Unknown controlType: ' + context.controlType;
                break;
        }
    });
} 
```

风景

```
<script id="AdvancedSearchControl_View" type="text/html">
    <table style="display:inline-block; width: 25%;">
        <thead data-bind="template: { name: 'SearchControl_View' }">
        </thead>
        <tbody data-bind="template: { name: 'AdvancedSearchControlItem_View', foreach: $data.searchFilters }">
        </tbody>
    </table>
</script>
<script id="SearchControl_View" type="text/html">
    <tr>
        <td>
            @Html.LabelFor(model => model.AdvancedSearchViewModel, new { @class = "SearchControlCaption" })
        </td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td style="padding-top:9px;">
            <select multiple="multiple" data-bind="options: SearchControlViewModelTemplate().selectItems, selectedOptions: SearchControlViewModelTemplate().searchContext.selectedItems, optionsText: 'Text', optionsGroup: function(item){return item.Group !== '' ? item.Group.Description : ''}, optionsCaption: SearchControlViewModelTemplate().allOptions"></select>
        </td>
        <td>
            <input type="text" class="SearchValue" data-bind="
                    value: SearchControlViewModelTemplate().searchContext.searchValue,
                    event: {
                        keydown: searchValue_keydown
                    }
                "
            />
        </td>
        <td>
            <input type="image" src="@Url.Content("~/Content/Images/" + Models.ResourceFiles.Resources._SearchButtonFileName)" 
                data-bind="enable: $data.searchFilters().length > 0" />
        </td>
    </tr>
</script>
<script id="AdvancedSearchControlItem_View" type="text/html">
    <tr>
        <td data-bind="text: $data.selectedValuesDescription"></td>
        <td data-bind="text: $data.searchValueText"></td>
        <td />
    </tr>
    <tr>
        <td data-bind="template: { name: 'AdvancedSearchControlItemRadios_View', afterRender: $root.iButton }">
        </td>
        <td />
        <td />
    </tr>
</script>
<script id="AdvancedSearchControlItemRadios_View" type="text/html">
    <input type="checkbox" name="AndOr" />
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:16:01.040

我已将 searchValue_keydown 函数更改如下；

```
self.searchValue_keydown = function (sender, event) {
        if (event.keyCode === $.ui.keyCode.ENTER) {
            self.SearchControlViewModelTemplate().searchContext.searchValue(event.currentTarget.value);
            self.addSearchFilter();
            /* ADDED the code below to fix the issue; While knockoutjs updates */
            /* the ui but not forcing to apply css styles; thought I can update */
            /* the ui again by inserting into DOM again with dummy empty text. */
            /* And I succeded. */
            $('#' + context.displayId).append(' ');
        }
        return true;
    }; 
```

# facebook - 强制用户在 facebook 上输入登录凭据以进行身份 验证登录，即使他在浏览器上有 facebook 会话

> ID：10205709
> 
> 赞同：1
> 
> 时间：2012-04-18T08:34:04.923
> 
> 标签：facebook

我正在实现通过身份验证登录 facebook 用户的功能。为此，我使用以下网址将用户重定向到 Facebook

[https://www.facebook.com/dialog/oauth?display=popup&client_id=xxxxxxxxx&redirect_uri=xxxxxxxxx&scope=user_about_me,friends_about_mefriends_website,offline_access,email&state=facebookgraph](https://www.facebook.com/dialog/oauth?display=popup&client_id=xxxxxxxxx&redirect_uri=xxxxxxxxx&scope=user_about_me,friends_about_mefriends_website,offline_access,email&state=facebookgraph)

现在，如果我没有在同一个浏览器中登录 facebook，那么它可以正常工作。但是，如果我已经有会话，则使用同一会话中的代码将我重定向回我的站点。我看到一些网站总是要求提供登录凭据（无论我是否有 fb 会话）。

我在我的 fb 应用程序的“高级”选项卡中找到了一些设置，上面写着“强制为 auth.login 使用登录密码”，我启用了它但仍然没有成功。有什么选择吗？

谢谢

# mysql - mysql 从一个表中选择另一个表的 concat 结果

> ID：10205712
> 
> 赞同：3
> 
> 时间：2012-04-18T08:34:17.883
> 
> 标签：mysql, tags

所以我需要从一个表中选择不同的值，但是在同一个查询中连接另一个表中的所有相关值。

基本上我遵循 Toxi TagSystem Schema [http://forge.mysql.com/wiki/TagSchema#Toxi](http://forge.mysql.com/wiki/TagSchema#Toxi)

三表之间的多对多映射。

而且我需要在每一行上显示所有插入的值（文档），但是我希望其中一列具有文件已用逗号分隔的所有标签。

现在我有

```
SELECT 
    docs.id AS id, 
    docs.orig_file AS orig_file, 
    docs.date_sent AS date_sent, 
    tags.tag_name AS alltags
FROM documat AS docs
LEFT JOIN documat_file2tag AS f2t ON f2t.doc_id = docs.id
LEFT JOIN documat_tags AS tags ON tags.id = f2t.tag_id 
```

但是，如果特定的 docs.id 不止一个标签，这就是重复行。我希望在每一行上得到的最终结果是：

```
| ID | orig_file | date_sent | alltags | 
```

使用所需的结果示例：

```
| X | example_value.pdf | 2012-03-23 10:14:05 | tag_ex_1, tag_ex_2, etc | 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T08:40:56.047

组连接：

```
SELECT 
    docs.id AS id, 
    docs.orig_file AS orig_file, 
    docs.date_sent AS date_sent, 
    GROUP_CONCAT(distinct tags.tag_name) AS alltags
FROM documat AS docs
LEFT JOIN documat_file2tag AS f2t ON f2t.doc_id = docs.id
LEFT JOIN documat_tags AS tags ON tags.id = f2t.tag_id
GROUP BY docs.id 
```

# opengl - 使用 glut（或 freeglut）编写 OpenGL 时处理全局变量

> ID：10205716
> 
> 赞同：2
> 
> 时间：2012-04-18T08:34:38.860
> 
> 标签：opengl, global-variables, glut

我`OpenGL`在`glut`图书馆学习。问题是当程序增长时，要处理的事情太多`global variables`了。正如很多人所说，在程序中使用太多是不可取`global variables`的。但是，我`global variables`不能通过将用户定义的参数传递给 glut 定义的回调函数来替代 。例如：

```
void display (void)
{
   // How to pass user defined parameters here?
   // some more code
}
int
main(void)
{
    glutDisplayFunc(display);
    // some more code
} 
```

所以我的问题是：

1.  用glut编写OpenGL时如何处理全局变量？
2.  有没有其他方法可以替换全局变量而不是将参数传递给函数
3.  其他处理OpenGL输入/输出的库（不是过剩）如何处理全局变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:40:22.493

“没有全局变量”的规则是不完整的。实际的措辞是“没有全局变量在函数之间传递参数”。然而，全局变量可以很好地保持全局、程序范围的状态。

> 用glut编写OpenGL时如何处理全局变量？

如果您管理的状态是程序状态，那么全局变量实际上是可以的。可以使用 检索窗口相关状态`glutGet`。不要忘记，OpenGL 本身就是一个大型的全局状态机。每个线程有一个全局 OpenGL 上下文，切换上下文实际上会更改全局变量。

不要将 GLUT reshape 函数用于与渲染相关的事情，即不要在 reshape 中设置视口和投影。在显示功能中执行此操作。

> 有没有其他方法可以替换全局变量而不是将参数传递给函数

有一些方法，比如使用*ffcall*库将参数化函数转换为可以传递给 GLUT 的闭包。

> 其他处理OpenGL输入/输出的库（不是过剩）如何处理全局变量？

通过允许将数据参数传递给回调函数（GLUT 中的重大设计失败，不允许这样做），或者使用基于消息/信号的系统而不是回调。

# jquery - jquery ajax错误处理函数存在，但还是抛出异常

> ID：10205720
> 
> 赞同：0
> 
> 时间：2012-04-18T08:34:56.790
> 
> 标签：jquery, ajax, exception, error-handling

我使用 ajax 提交表单，并在服务器端完成验证。如果验证失败，我返回一个带有错误和状态代码的 json 编码对象：500。当在客户端 jquery 获得响应时，我的错误处理函数被调用并且它工作正常，但是（可能这是正常行为）抛出异常在 Chrome 中（也可能是其他浏览器）：

```
POST http://localhost/workplace/.../clients/create 500 (Internal Server Error) 
```

这让我和可能我的客户“感觉”我的程序运行不正常，但只是出现了验证错误。如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:41:45.127

您不应返回 500（内部服务器错误）代码。这是为了表明服务器有问题（不是请求）。这可能是导致异常的原因。我相信返回 200（OK）代码是可以的。您不需要在 HTTP 状态代码中反映验证错误。

# php - json_encode()：参数中的 UTF-8 序列无效

> ID：10205722
> 
> 赞同：57
> 
> 时间：2012-04-18T08:35:13.667
> 
> 标签：php, json, character-encoding

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-03T08:20:27.813

我有一个类似的错误，由于在查询中返回了错误的字符集，每当字符串中有一个 hi-ascii 字符（例如弯撇号）时，它就会导致 json_encode 返回一个空字段。

解决方案是通过添加以下内容来确保它以 utf8 格式出现：

```
mysql_set_charset('utf8'); 
```

在 mysql 连接语句之后。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-18T09:12:51.667

似乎符号是`Å`，但由于数据由不应该公开的姓氏组成，因此只显示了第一个字母，并且由 just 完成`$lastname[0]`，这对于多字节字符串是错误的，并造成了整个麻烦。将其更改为`mb_substr($lastname, 0, 1)`- 像魅力一样工作。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-03-20T09:38:17.217

问题是这个字符是 UTF8，但是 json_encode 没有正确处理它。多说一句，还有一个其他字符列表（参见[Unicode 字符列表](http://www.utf8-chartable.de/unicode-utf8-table.pl?start=128&number=128&utf8=string-literal&unicodeinhtml=hex)），会触发相同的错误，所以去掉这个 (Å) 并不能解决问题。

我们使用的是将这些字符转换为 html 实体，如下所示：

```
htmlentities( (string) $value, ENT_QUOTES, 'utf-8', FALSE); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-04-18T08:38:11.493

确保您与 MySQL 的连接字符集是 UTF-8。它通常默认为 ISO-8859-1，这意味着 MySQL 驱动程序会将文本转换为 ISO-8859-1。

[您可以使用mysql_set_charset](http://php.net/mysql_set_charset)、[mysqli_set_charset](http://php.net/mysqli_set_charset)或使用查询设置连接字符集`SET NAMES 'utf-8'`

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-04-29T18:25:12.480

使用此代码可能会有所帮助。它解决了我的问题！

```
mb_convert_encoding($post["post"],'UTF-8','UTF-8'); 
```

或者像那样

```
mb_convert_encoding($string,'UTF-8','UTF-8'); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-18T08:37:58.307

您发布的符号是损坏字节序列的占位符符号。基本上，它不是真正的符号，而是字符串中的错误。

符号的确切字节值是多少？盲目应用 utf8_encode 不是一个好主意，最好先找出字节来自哪里以及它们的含义。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-28T09:49:11.333

json_encode 仅适用于 UTF-8 数据。您必须确保您的数据采用 UTF-8 格式。或者，您可以使用 iconv() 将结果转换为 UTF-8，然后再将它们提供给 json_encode()

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-02T14:51:40.887

引发此错误的另一件事是，当您使用 php 的 json_encode 函数时，unicode 字符是大写 \U 而不是小写 \u

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-03T05:40:43.560

```
I am very late but if some one working on SLIM to make rest api and getting same error can solve this problem by adding below line as:

<?php

// DbConnect.php file
class DbConnect
{
    //Variable to store database link
    private $con;

    //Class constructor
    function __construct()
    {

    }

    //This method will connect to the database
    function connect()
    {
        //Including the constants.php file to get the database constants
        include_once dirname(__FILE__) . '/Constants.php';

        //connecting to mysql database
        $this->con = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);

        mysqli_set_charset($this->con, "utf8"); // add this line 
        //Checking if any error occured while connecting
        if (mysqli_connect_errno()) {
            echo "Failed to connect to MySQL: " . mysqli_connect_error();
        }

        //finally returning the connection link
        return $this->con;
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-07-15T10:03:34.567

更新了..我通过说明 PDO 连接上的字符集解决了这个问题，如下所示：

“mysql:host=$host;dbname=$db;charset=utf8”

然后，收到的所有数据都在正确的字符集中供其余代码使用

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2014-10-04T15:58:36.913

在 json_encode 解决问题之前使用 setLocale('fr_FR.UTF8') 。

# c++ - Placing of pillars

> ID：10205726
> 
> 赞同：0
> 
> 时间：2012-04-18T08:35:28.137
> 
> 标签：c++

I am trying to place pillars on a board that alternate between these amount of pillars (I don't think I explained properly), but for example on row 1 it will have 9 pillars and row 2 it will have 8 pillars. I wanted to try do it in a nested for loop but not really sure how to go about the code within the blocks.

At the moment I have this: here are my variables:

```
float PegPosX = -1.0f;
float PegYStartPos;
float PegPosY = 6.0f;
int Pegs = 0;
int PegsInRow = 8;

while(Pegs < NumPegs){
     for (int row = 0; row < PegsInRow; ++row) { 
     int num_cols = (row % 2 == 0) ? 9 : 8;
     PegPosY -= 0.5f;
         for (int col = 0; col < num_cols; ++col){ 
             PegPosX += 1.0f; 
            displayPegs[Pegs].PegPosition(PegPosX, PegPosY);
         }
    }
    ++Pegs;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:43:40.047

```
for (int row = 0; row < num_rows; ++row) {
   int num_cols = (row % 2 == 0) ? 9 : 8;
   for (int col = 0; col < num_cols; ++col) {
       placePillar(...);
   }
} 
```

# active-directory - 詹金斯 LDAP 身份验证

> ID：10205727
> 
> 赞同：1
> 
> 时间：2012-04-18T08:35:30.523
> 
> 标签：active-directory, ldap, jenkins

[我们通过Active Directory 插件](https://wiki.jenkins-ci.org/display/JENKINS/Active+Directory+plugin)在 Windows 上对 Jenkins 使用 LDAP 身份验证。运行一段时间后（有时是几周，有时只是一天左右），身份验证停止工作 - 尝试登录时它只是挂在那里。只有重新启动 Jenkins 才能修复它。日志是“干净的”。

Jenkins v1.458（但它也发生在以前的版本中）。活动目录插件 v1.26。有任何想法吗？

# r - 更改列的顺序

> ID：10205729
> 
> 赞同：1
> 
> 时间：2012-04-18T08:35:44.050
> 
> 标签：r

我正在努力在我的数据集中订购列。我想重新排序的方式可以在以下示例中显示：

我有以下数据：

```
dd = data.frame("AssignedA"=1:2, "AverageA"=1, "AssignedB"=1, "AverageB"=1,
  "AssignedC"=1, "AverageC"=1, "ValueA"=1, "ValueB"=1, "ValueC"=1) 
```

为了便于概述，我希望按以下方式对列进行排序：

> 已分配 A - 已分配 B - 已分配 C - 平均 A - 平均 B - 平均 C- 值 A - 值 B - 值 C

这该怎么做？我在之前发布的问题中找不到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:48:21.827

只需保持简单并用于`seq`创建列的顺序。首先，（你应该在你的问题中这样做），创建一些虚拟数据：

```
dd = data.frame("AssignedA"=1:2, "AverageA"=1, "AssignedB"=1, "AverageB"=1,
  "AssignedC"=1, "AverageC"=1, "ValueA"=1, "ValueB"=1, "ValueC"=1) 
```

然后像往常一样重新排序：

```
dd[,c(seq(1,6,2), seq(2,6,2), 7:9)] 
```

在这里，命令中的命令`[]`指定了顺序：

```
R> c(seq(1,6,2), seq(2,6,2), 7:9)
[1] 1 3 5 2 4 6 7 8 9 
```

# database - codeigniter中的多数据库连接错误

> ID：10205731
> 
> 赞同：1
> 
> 时间：2012-04-18T08:35:53.787
> 
> 标签：database, codeigniter, connect

大家好，当我在 CI 中连接多个数据库时，我遇到了一个错误。当我连接到多个数据库时，有人能指出我正确的方法吗？

这是我的 database.php 文件

```
$active_group = 'default';
$active_record = TRUE;
$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'root';
$db['default']['password'] = 'root';
$db['default']['database'] = 'cizacl';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE;

$active_group = 'alternate';
$active_record = TRUE;
$db['alternate']['hostname'] = 'localhost';
$db['alternate']['username'] = 'root';
$db['alternate']['password'] = 'root';
$db['alternate']['database'] = 'vkwow_auth';
$db['alternate']['dbdriver'] = 'mysql';
$db['alternate']['dbprefix'] = '';
$db['alternate']['pconnect'] = TRUE;
$db['alternate']['db_debug'] = TRUE;
$db['alternate']['cache_on'] = FALSE;
$db['alternate']['cachedir'] = '';
$db['alternate']['char_set'] = 'utf8';
$db['alternate']['dbcollat'] = 'utf8_general_ci';
$db['alternate']['swap_pre'] = '';
$db['alternate']['autoinit'] = TRUE;
$db['alternate']['stricton'] = FALSE; 
```

然后这是检索我模型中的所有记录函数

```
function getAll(){
$DB1 = $this->load->database('default',TRUE);
$DB2 = $this->load->database('alternate',TRUE);

//retrieve default DB
$query = $DB1->get('users');

if($query->num_rows() > 0){
foreach($query->result() as $row){
$data[] = $row;    
}
return $data; 
}

//retrieve alternate db
$query = $DB2->get('admins');
if($query->num_rows() > 0){
foreach($query->result() as $row){
$data[] = $row;    
}
return $data; 
}
} 
```

这是我的输出视图代码

```
<p>
<?php foreach($records as $row) : ?>
<h1><?php echo $row->user_username;?></h1>
<?php endforeach; ?>
</p>

<p>
<?php foreach($records as $row) : ?>
<h1><?php echo $row->username;?></h1>
<?php endforeach; ?>
</p> 
```

当我运行这个程序时，我得到了错误**表'vkwow_auth.users'不存在**

我很欣赏连接多个数据库的任何反馈/正确方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:14:18.947

我不知道这是否真的是你的问题——但你为什么要从模型中的 DB1 返回 $data 呢？因为它从未真正达到 DB2 请求。

您需要创建一个数组，然后在其中组合结果。

```
function getAll()
{
$DB1 = $this->load->database('default',TRUE);
$DB2 = $this->load->database('alternate',TRUE);

$data = new_array();
//retrieve default DB
$query = $DB1->get('users');

if($query->num_rows() > 0)
{
    foreach($query->result() as $row)
    {
         $data['db1'][] = $row;    
    }
}

//retrieve alternate db
$query = $DB2->get('admins');
if($query->num_rows() > 0)
{
    foreach($query->result() as $row)
    {
        $data['db2'][] = $row;    
    }

}

return $data;
} 
```

然后只需更改您的视图输出以显示每个数组

编辑：“当我运行这个程序时，我得到了错误表'vkwow_auth.users'不存在”-这实际上听起来不像是数据库连接错误-似乎更像是一个查询错误？

# android - 安卓 4.0.3。USB 主机 - 与相机通信

> ID：10205738
> 
> 赞同：9
> 
> 时间：2012-04-18T08:36:15.693
> 
> 标签：android, camera, host

我正在制作一个应该是相机遥控器的应用程序。为了做到这一点，我需要它来解释我通过 USB 发送的信号，就好像我在物理上按下按钮一样。到目前为止，没有成功。

我注意到，当我插入电缆时，相机会自动切换到“文件传输模式”并充当大容量存储设备。据我所知，相机在连接到相机时无法拍摄或拍照，所以我猜问题是我必须让相机不切换到该模式 - 知道我该怎么做。

我检查了设备是否有不同的接口，但它只能用作大容量存储设备。我正在尝试通过 bulkTransfer 发送信号。

我知道在连接到计算机时可以发送诸如记录等命令，例如使用 linux 下的 C 程序 - 它只需要一个简单的 write() 命令，首先选择正确的描述符，例如 fd=open (” / dev / ttyUSB0”，O_RDWR）。

有谁知道如何使用 Android 获得类似的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:00:06.377

回答我自己的问题感觉很愚蠢，但我确实找到了解决问题的方法。说到大容量存储功能 - 它实际上是我正在使用的相机的设置菜单中选择的一个选项（我不知道其他相机的情况如何）。解决这个问题后，bulkTransfer() 仍然存在问题 - 我知道我必须通过 bulkTransfer() 发送 2 个字符的信号，但是当我发送它时，相机没有响应。事实证明，我不得不分别发送它。所以实际上是两个单字符批量传输。我不知道为什么会有所不同，但确实如此，现在我可以通过 USB 控制相机的所有菜单。

# mysql - 使用 linq to sql 获取数据时超时过期异常

> ID：10205739
> 
> 赞同：1
> 
> 时间：2012-04-18T08:36:15.657
> 
> 标签：mysql, linq-to-sql, exception, entity-framework-4.1, timeout

我有一个问题我两天都解决不了。这是故事。
我正在使用 LINQ to SQL 从我的 MySQL 5.0 数据库中获取记录列表，但执行将中断，并出现以下异常：

> 超时已过。在操作完成之前超时时间已过或服务器没有响应。

我首先在后端使用实体框架工作代码。这是我的代码：

```
context = new NebeContext();
var data2 = (from row in context.PollingStationConstituencyCandidates
    where row.ElectionId.Equals(electionId) && row.ConstituencyId.Equals(constituencyId)
    select new { row.LocationId, row.LocationNameA, row.PollingStationNameA, row.PollingStationNameE, row.PollingStationId }).Distinct();

List<PollingStationInfo> resultList = new List<PollingStationInfo>();
PollingStationInfo result = new PollingStationInfo();
foreach (var i in data2)
{
    result = new PollingStationInfo() { LocationId = i.LocationId, LocationNameA = i.LocationNameA, NameA = i.PollingStationNameA, NameE = i.PollingStationNameE, PollingStationId = i.PollingStationId };
    resultList.Add(result);
}
return resultList; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:13:22.847

好吧，错误消息是自我解释的：您的查询需要太长时间才能完成数据库，并且您会超时......

任何一个：

分析 sql 并查看是否需要一些额外的索引或更好的查询。还要检查你没有得到 n+1 个查询

或者

在 datacontext 上更改 TimeOut

# php - 为什么它不订购

> ID：10205743
> 
> 赞同：0
> 
> 时间：2012-04-18T08:36:46.967
> 
> 标签：php, mysql, sql, request

我在订购时遇到问题。如果我将请求设置为 s=10 或 s11 ir 什么都不做...我尝试根据请求打印 $order，它有效，但它没有出现在 $sql= ($order)

```
 if(isset($_GET['s']) AND $_GET['s']==10)
                    {
                        $order=' ORDER BY a.saskanojuma_nr ASC';
                    }
 elseif(isset($_GET['s']) AND $_GET['s']==11)
                    {
                        $order=' ORDER BY a.saskanojuma_nr DESC';
                    }
                    else
                    {
                        $order=' ORDER by a.id desc';
                    }

                    $sql='SELECT a.projekta_id, a.saskanojuma_nr,  a.datums, a.akcepta_nr, a.objekta_autors FROM '.$table_prefix.'_saskanojumi a LEFT JOIN '.$table_prefix.'_projekti b ON b.id=a.projekta_id LEFT JOIN '.$table_prefix.'_objekti c ON c.id=b.objekta_id LEFT JOIN '.$table_prefix.'_kadastri d ON d.objekta_id=c.id LEFT JOIN '.$table_prefix.'_ipasnieki e ON e.objekta_id=c.id  '.$query.' AND  a.buvvaldes_id='.$_SESSION['buvvaldes_id'].' AND a.dzests=0 GROUP BY a.id '.$order.' ';
        $thiss=$GLOBALS['db']->query($sql); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:00:23.360

您在此处显示的代码似乎是正确的。也许问题出在其他地方。

一步一步 地为你的代码**做标记**，并尝试找出问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:57:50.183

尝试使用 PHP`switch/case`语法：

```
switch ($_GET['s']) {
  case 10:
  $order=' ORDER BY a.saskanojuma_nr ASC';
  break;

  case 11:
  $order=' ORDER BY a.saskanojuma_nr DESC';
  break;

  default:
  $order=' ORDER by a.id desc';
  break;
} 
```

如果`$_GET['s']`不是 10 或 11，则`$order`变量的值将从 ' `default`' 语句中获取，即`ORDER by a.id desc`

# python - 以只读模式从python打开sqlite3数据库

> ID：10205744
> 
> 赞同：42
> 
> 时间：2012-04-18T08:36:50.603
> 
> 标签：python, sqlite

在使用 C/C++ 中的 sqlite3 时，我了解到它有一个以只读方式打开的模式选项，这对于避免意外的数据损坏非常方便。Python绑定中有这样的东西吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2014-02-15T07:33:59.573

从 Python 3.4.0 开始，您可以使用以下命令以只读模式打开数据库：

```
db = sqlite3.connect('file:/path/to/database?mode=ro', uri=True) 
```

另请参阅[文档](https://docs.python.org/3/library/sqlite3.html#sqlite3.connect)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-02-03T15:36:56.537

Python 2.x 的解决方法：

```
fd = os.open(filename, os.O_RDONLY)
c = sqlite3.connect('/dev/fd/%d' % fd)
os.close(fd) 
```

不是 posix，但可在 Linux、OS/X 和大多数现代 unix 上使用。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-04-03T12:59:01.950

有点相关，请注意，您可以使用编译指示动态启用/禁用修改：

```
pragma query_only = ON;   -- disable changes
pragma query_only = OFF;  -- enable changes 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-18T09:06:01.917

正如@Chris 给出的链接，没有。但是还有另一个 sqlite3 包装器，它不太符合 PEP 249，并且更紧密地包装了 sqlite3，吸收了引擎的新功能：[http](http://code.google.com/p/apsw/) ://code.google.com/p/apsw/ 。该包装器确实支持以只读模式打开数据库，以及其他细节。

# delphi - 在 Delphi7 中使用 AES (CBC) 在服务器和应用程序之间进行安全通信

> ID：10205752
> 
> 赞同：3
> 
> 时间：2012-04-18T08:37:27.403
> 
> 标签：delphi, security, delphi-7, aes, communication

我正在编写一个将与 php 脚本（authentication.php?UserID=ClientsEmail@email.com&ClientsID=81E17）通信的应用程序，如果在 MySQL 数据库中找到客户端以及客户端的文件是什么，该脚本将通知应用程序可以下载。Internet 上的所有通信都将经过 AES-256 (CBC) 加密，并且主加密密钥将被硬编码到可执行文件中。通过重新编译 exe 并将其作为升级传递给所有客户端，该主密钥每年只会更改一次。因为这个键很少改变，所以我生成一个希望永远不会重复的初始化向量是至关重要的。

因为我的密文输出是 Base 64。我试图使 IV 尽可能统一，换句话说，让它看起来好像是密文输出的一部分。

所以我的第一个问题是下面的函数重复的可能性有多大。我确实创建了一个打开了计时器的测试应用程序，并循环了下面的函数，将其添加到数据库并检查它是否重复。测试应用程序运行了一夜，总共循环了 69369 次，没有重复。

```
// Generate a  16 bytes = 128 bits Initialization vector Used for AES-256
Function TfrmMain.GenerateIV:String;
  Var
   i,j : Integer;

   Const
    {Uppercase}
    alpa_L : array[1..26] of string = ('a','b','c','d','e','f','g','h','i','j','k',
                                       'l','m','n','o','p','q','r','s','t','u','v',
                                       'w','x','y','z');
    {Lowercase}
    alpa_U : array[1..26] of string = ('A','B','C','D','E','F','G','H','I','J','K',
                                       'L','M','N','O','P','Q','R','S','T','U','V',
                                       'W','X','Y','Z');
    {numeric}
    Num : array[1..10] of string     = ('0','1','2','3','4','5','6','7','8','9');
Begin
  Result := '';
  Randomize;
  for i := 1 to 16 do //16 bytes = 128 bits AES=Fixed 128 Blocks
   Begin
      j := RandomRange(1, 4); //RandomRange - Delphi's help says inclusive but it is non-inclusive
      case j of
        1: Result := Result + alpa_L[RandomRange(1, 27)]; {alphabetic Uppercase}
        2: Result := Result + alpa_U[RandomRange(1, 27)]; {alphabetic Lowercase}
        3: Result := Result + Num[RandomRange(1, 11)]     {numeric}
      end;
   end;        
end; 
```

说了这么多，我有另一个想法，我正在尝试整合。我的想法如下，而不是将主要加密密钥硬编码到可执行文件中。我的服务器将随机生成一个加密密钥，并将其不受保护地传递给我的应用程序。服务器和应用程序之间的所有通信都将使用该会话的此密钥进行加密，并且一旦下载了所有文件，会话就会关闭。

以上唯一的问题是，由于加密密钥被发送到该会话未受保护的应用程序，因此可以通过一些精明的方式查看应用程序和服务器正在通信的内容，并且黑客可以看到身份验证是如何完成的。一旦他/她知道这一点，就可以将应用程序重定向到他们的服务器以进行身份​​验证部分，然后照常继续。解决这个问题的唯一方法是保护这个密钥，但我又回到了“硬编码到可执行文件中”的问题

所以我的这个应用程序的第一个版本将把密钥硬编码到可执行文件中，直到我解决了上述问题。

不幸的是，服务器不支持（HTTPS）协议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T07:07:22.563

*关于功能的重复性*

答案是，虽然极不可能，但函数最终可能会重复。

其原因是随机数的生成方式。大多数编译器，包括 Delphi 的编译器，都使用伪随机数生成器。这些生成器使用基于给定初始值（称为*种子*）生成伪随机数的算法。

如果您知道种子和使用的算法，就可以复制生成的数字。虽然算法可能很容易知道，但种子却不是。在 Delphi 中，您使用调用 GetTickCount 或 QueryPerformanceCounter 的 Randomize 来建立种子。

鉴于您的代码，我认为您不太可能看到它发生，尽管我无法为您提供任何证据。[您可以在此处](http://en.wikipedia.org/wiki/Random_number_generation#.22True.22_random_numbers_vs._pseudorandom_numbers)找到有关此问题的更多信息。

*关于关键沟通*

你最好的选择是使用@Mad Hatter 的建议。此类环境的良好安全架构如下：

1.  使用非对称加密来建立服务器和最终用户将用于通信的加密密钥。这里最好的选择是使用[public-key cryptography](http://en.wikipedia.org/wiki/Public-key_cryptography)。这方面的一些例子是 RSA 和 Diffie-Hellman。
2.  然后使用只有服务器和最终用户知道的生成密钥作为 AES 或您喜欢的任何[对称加密算法的加密密钥。](http://en.wikipedia.org/wiki/Symmetric_cryptography)

从理论上讲，您可以简单地对整个通信使用非对称加密，但它比对称版本具有更高的开销（计算成本），所以我建议使用上面解释的模式。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T12:06:20.167

如果加密密钥嵌入到可执行文件中并且每年更改一次，您将无法进行安全通信。有安全的密钥交换协议（即寻找 Diffie-Hellman）可以让您安全地交换会话密钥。当然，您需要确保您正在与您应该交谈的人交谈（而不是与中间人交谈），因此您可能还需要对端点进行身份验证。

即使服务器不支持 HTTPS，您也可以通过纯 HTTP（或任何其他协议）自己使用相同的技术。SSL 与 HTTP 没有任何关系。您只需要编写更多的代码，而不是简单地依赖 Web 服务器为您完成所有“肮脏的工作”。

# c# - 带有 observablecollection 的 WPF 隐式数据模板

> ID：10205753
> 
> 赞同：1
> 
> 时间：2012-04-18T08:37:27.943
> 
> 标签：c#, wpf

我是 WPF 新手并使用 MVVM。我有一个视图，我想根据用户在菜单上选择的内容显示不同的内容。其中之一是另一个具有视图模型（TempVM）的用户控件 Temp，所以我这样做：

```
<ContentControl Content="{Binding Path=TempVM}"/> 
```

并且 TempVM（类型为 TempViewModel）在用户单击按钮之前为空。它的数据模板是这样的

```
 <DataTemplate DataType="{x:Type vm:TempViewModel}">
        <view:Temp />
    </DataTemplate> 
```

这很好，但我想做的另一件事是当用户单击不同的菜单项时显示一个列表框。所以我想做

```
<ContentControl Content="{Binding Path=Missions}"/> 
```

（任务是 MissionData 的可观察集合）并尝试像这样对其进行模板化：

```
 <DataTemplate DataType="{x:Type ObservableCollection(MissionData)}">
        <StackPanel>
            <ListBox ItemsSource="{Binding}" SelectedItem="{Binding Path=MissionData, Mode=TwoWay}" DisplayMemberPath="MissionName" SelectedValuePath="MissionId" />
            <Button Content="Go"/>
        </StackPanel>
    </DataTemplate> 
```

但是编译器不喜欢类型引用。如果我尝试通过给模板一个键并在 ContentControl 中指定该键来执行此操作，但显然我在没有任务时看到了 ListBox 和按钮。显然，我可以制作一个用户控件和视图模型，并遵循与我为 TempVM 所做的相同模式，但它似乎过分了。我在这件事上走的是正确的道路吗？我需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:20:24.480

据我所知，您尝试将 Collection 用作数据对象，这在我看来是不好的做法。拥有一个集合的 DataTemplate 也是有问题的，就像您已经看到的那样。我建议您为您的任务集合使用 ViewModel。

```
class MissionsSelectionViewModel
{
    public ObservableCollection<Mission> Misssions;
    public MissionData SelectedMission;
    public ICommand MissionSelected;
} 
```

并将您的数据模板修改为

```
<DataTemplate DataType="{x:Type MissionsSelectionViewModel}">
    <StackPanel>
        <ListBox ItemsSource="{Binding Missions}" SelectedItem="{Binding Path=MissionData, Mode=TwoWay}" DisplayMemberPath="MissionName" SelectedValuePath="MissionId" />
        <Button Content="Go" Command="{Binding MissionSelected}/>
    </StackPanel>
</DataTemplate> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:14:08.057

`MissionDataCollection`如果我要遵循您的隐式模板模式，我会从中派生一个自定义的非泛型集合`ObservableCollection<MissionData>`并使用它来保存`MissionData`项目。然后我会简单地在`DataType`. 此解决方案提供了其他优点，例如有用的集合上的事件聚合。

但是，在我看来，最好的解决方案如下。

1.  将`IsMissionsListVisible`属性添加到您的 VM。
2.  `Visibility`将`ContentControl`显示列表的属性绑定到该`IsMissionsListVisible`属性。
3.  使用密钥`DataTemplate`资源。
4.  实现确定 if 的逻辑`IsMissionsListVisible`。假设在所选项目中至少有一个任务时应该为真。但逻辑可能更复杂。

我会这样做。事实上，我通常这样做，它有几个好处。最重要的是我可以在各种情况下（例如异步内容刷新）显式控制内容可见性的逻辑。

# sql-server - 如何获得某些sql结果

> ID：10205754
> 
> 赞同：2
> 
> 时间：2012-04-18T08:37:29.167
> 
> 标签：sql-server, sql-server-2008

我希望根据查询的位置从查询中获取某些 sql 结果，例如，考虑此代码

```
SELECT * FROM Product ORDER BY id asc 
```

这可能会返回至少 100 个左右的结果。

问题是，我怎样才能得到前 1 - 10 个结果，然后在另一个**不同的单独**查询中，我怎样才能得到 11 - 20 的结果，甚至得到位于 51 - 60 的结果那个查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:43:41.177

使用 CTE 获取行号，然后按行列查询

```
with your_query as(
   SELECT ROW_NUMBER() OVER(ORDER BY ID ASC) AS Row, *
   FROM Product 
)
select * from your_query
where Row >=5 and Row<=10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:45:34.000

有很多方法，这是使用[ROW_NUMBER](http://msdn.microsoft.com/en-us/library/ms186734%28v=sql.100%29.aspx)的一种方法：

```
DECLARE @StartRow INTEGER = 11
DECLARE @EndRow INTEGER = 20

;WITH Data AS
(
    SELECT TOP(@EndRow) ROW_NUMBER() OVER (ORDER BY id) AS RowNo, *
    FROM Product     
)

SELECT *
FROM Data
WHERE RowNo BETWEEN @StartRow AND @EndRow
ORDER BY Id 
```

# proxy - OpenFire/XMPP 503 服务不可用错误（XEP-0065 使用 iOS XMPPFramework）

> ID：10205758
> 
> 赞同：6
> 
> 时间：2012-04-18T08:37:35.313
> 
> 标签：proxy, xmpp, openfire, socks, xmppframework

**问题**：我正在尝试使用 iOS XMPPFramework 和 OpenFire 服务器进行 TURN 连接 (XEP-0065)。我希望能够发送和接收文件。但是，我收到 503 服务不可用错误。

**注意**：我的代码基础来自以下教程：http: [//mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-server-setup/](http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-server-setup/)

**XML 错误**：

我已经通过 TURNSocket.m 进行了调试。它进入 processRequestResponse 并具有以下 XML。（如果我没记错的话，这是从 OpenFire 发送给我的，而不是反过来？）...

```
<iq xmlns="jabber:client"
    type="error" 
    id="03CC977E-2645-4E87-AE78-536D985CA2B5" 
    from="friendsUsername@beta.myCompany.co.uk"
    to="myUsername@beta.myCompany.co.uk/12f10b69">
    <query xmlns="http://jabber.org/protocol/bytestreams" 
        sid="03CC977E-2645-4E87-AE78-536D985CA2B5"
        mode="tcp">
        <streamhost jid="proxy.beta.myCompany.co.uk"
            host="127.0.1.1"
            port="7777"/>
    </query>
    <error code="503"
        type="cancel">
        <service-unavailable xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/>
    </error>
</iq> 
```

为什么会出现错误？

**更新**：[XEP-0065](http://xmpp.org/extensions/xep-0065.html)说明如下。即使这个错误看起来与我的有点不同，它是否相关？如果是这样，问题是什么？

> 如果 Proxy 无法充当 StreamHost，则 Proxy 必须向请求者返回一个错误，该错误应该是`<not-allowed/>`.
> 
> ```
> <iq from='requester@example.com/foo'
>     id='uj2c15z9'
>     to='streamer.example.com'
>     type='error'>
>   <error type='cancel'>
>     <not-allowed 
>         xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/>
>   </error>
> </iq> 
> ```

**更新**：目前我正在研究在 XML 的各种发送和检索位中包含或排除 JID 资源是否是问题。或者，我什至在以下 xml 中都没有“发件人”。文档暗示我需要这个。这是问题吗？我在代码中没有看到当前的方式来制作“来自”......

```
<iq type="get" 
    to="beta.myCompany.co.uk"
    id="215784CF-81A8-403E-89BF-455C926BEAE5">
    <query xmlns="http://jabber.org/protocol/disco#items"/>
</iq> 
```

**2012 年4 月 19 日上午 11:00 更新**：为了响应 Matt J 的回复，我发布了更多 XML。我不确定 Matt 是否请求了发送和检索内容的完整 XML 日志，但以防万一，这里是。请注意，这些日志并非全部来自同一个贯穿（因为当我调试它以获取 XML 日志时，它会导致超时，所以我必须重新开始）

*发送*：

```
<iq type="get" to="beta.myCompany.co.uk" 
    id="082A1987-384F-43CD-9E7B-A2C0E31F2CA8">
    <query xmlns="http://jabber.org/protocol/disco#items"/>
</iq> 
```

*回应*：

```
<iq xmlns="jabber:client" 
    type="result" 
    id="18EED477-B0E4-492D-89CF-CA692FCF13AD"
    from="beta.myCompany.co.uk" 
    to="myUsername@beta.myCompany.co.uk/72d23cd0">
    <query xmlns="http://jabber.org/protocol/disco#items">
        <item jid="pubsub.beta.myCompany.co.uk" 
            name="Publish-Subscribe service"/>
        <item jid="broadcast.beta.myCompany.co.uk" 
            name="Broadcast service"/>
        <item jid="search.beta.myCompany.co.uk" 
            name="User Search"/>
        <item jid="conference.beta.myCompany.co.uk" 
            name="Public Chatrooms"/>
        <item jid="proxy.beta.myCompany.co.uk" 
            name="Socks 5 Bytestreams Proxy"/>
    </query>
</iq> 
```

*发送*：

```
<iq type="get" 
    to="proxy.beta.myCompany.co.uk" 
    id="F1B5370C-234F-4F2D-93E7-D60D2C35D063">
    <query xmlns="http://jabber.org/protocol/disco#info"/>
</iq> 
```

*回应*：

```
<iq xmlns="jabber:client" 
    type="result" 
    id="F1B5370C-234F-4F2D-93E7-D60D2C35D063"
    from="proxy.beta.myCompany.co.uk" 
    to="myUsername@beta.myCompany.co.uk/32276f6">
    <query xmlns="http://jabber.org/protocol/disco#info">
        <identity category="proxy" 
            name="SOCKS5 Bytestreams Service" 
            type="bytestreams"/>
            <feature var="http://jabber.org/protocol/bytestreams"/>
            <feature var="http://jabber.org/protocol/disco#info"/>
    </query>
</iq> 
```

*发送*：

```
<iq type="get" 
    to="proxy.beta.myCompany.co.uk" 
    id="84904B7D-2BB2-4B8E-90BE-BE0F5A934764">
    <query xmlns="http://jabber.org/protocol/bytestreams"/>
</iq> 
```

*回应*：

```
<iq xmlns="jabber:client" 
    type="result" 
    id="B412512B-FA27-4531-88BE-2FC0A26E6ED2"
    from="proxy.beta.myCompany.co.uk" 
    to="myUsername@beta.myCompany.co.uk/45ca808d">
    <query xmlns="http://jabber.org/protocol/bytestreams"/>
</iq> 
```

另外，我们还从查询的代码中获得了一个流主机，如下所示：`NSXMLElement *streamhost = [query elementForName:@"streamhost"];`

```
<streamhost xmlns="http://jabber.org/protocol/bytestreams"
    jid="proxy.beta.myCompany.co.uk"
    host="127.0.1.1" 
    port="7777"/> 
```

*发送*：

```
<iq type="set" 
    to="friendsUsername@beta.myCompany.co.uk/spark" 
    id="DD96A581-BFA3-47BC-A3C0-D26AD48D7442">
    <query xmlns="http://jabber.org/protocol/bytestreams" 
        sid="DD96A581-BFA3-47BC-A3C0-D26AD48D7442" 
        mode="tcp">
        <streamhost xmlns="http://jabber.org/protocol/bytestreams"
            jid="proxy.beta.myCompany.co.uk" 
            host="127.0.1.1"
            port="7777"/>
    </query>
</iq> 
```

这没有给出任何响应，但是当我与[XEP-0065](http://xmpp.org/extensions/xep-0065.html)的示例 17 进行比较时，它看起来还不错。但是，如果不包含传递给 TurnSocket.m 的 jID 上的资源（friendsUsername@beta.myCompany.co.uk 而不是friendsUsername@beta.myCompany.co.uk/spark），则此发送请求会适当更改

```
<iq type="set"
     to="friendsUsername@beta.myCompany.co.uk" **LOOK! NO RESOURCE!**
     id="5D08B85E-CA78-4AA8-A893-C1DC571A9808">
     <query xmlns="http://jabber.org/protocol/bytestreams" 
        sid="5D08B85E-CA78-4AA8-A893-C1DC571A9808" 
        mode="tcp">
        <streamhost xmlns="http://jabber.org/protocol/bytestreams"
            jid="proxy.beta.myCompany.co.uk"
            host="127.0.1.1"
            port="7777"/>
      </query>
</iq> 
```

并且返回了我上面原始问题中的 XML！（带有 503 错误代码）。此外，我注意到这个 xml 包含“streamhost”，但在这个阶段它实际上应该包含“streamhost-used”吗？为什么会出现错误？我应该或不应该将资源包含在“to”中吗？

**次要更新 19/04/2012 15:07**：我在 OpenFire 上将 xmpp.proxy.transfer.required 添加为 false。这是由于这些讨论：[这里](http://code.google.com/p/xmppframework/issues/detail?id=77)和[这里](http://community.igniterealtime.org/thread/28006)。我没有设置这个服务器（我的同事做了），我不明白这意味着什么，但它似乎对我的问题没有任何影响。

**更新 20/04/2012 10:00**：当我不包含资源时，我认为我的 503 错误是正确的（根据[this](http://community.igniterealtime.org/thread/39043;jsessionid=FE85F011C80140AF447447DA198847E8?tstart=436)）。即使是这样，我也不确定为什么我没有得到完整 jID 的响应。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T11:15:06.687

503 错误是由于我没有提供完整的 JID。例如，我提供friendsUsername@domain 而不是friendsUsername@domain/resource。

但是，我仍然没有成功连接，并且在[这里打开了一个新问题](https://stackoverflow.com/questions/10297009/socks-connection-times-out-gcdasyncsocket-openfire-xep-0065-and-ios-xmppfra)

# xml - 如何有效地为基于 XML 的文本协议定义传输结束？

> ID：10205760
> 
> 赞同：3
> 
> 时间：2012-04-18T08:37:42.493
> 
> 标签：xml, tcp, xml-parsing, xmpp, protocols

我想开发一个基于 XML 并通过 TCP/IP 套接字传输的文本协议。假设我有一个简单的请求/响应机制，可以通过客户端和服务器之间的持久 TCP/IP 连接发送，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<request id="1" command="get.answer">
    <value type="string">Answer to the Ultimate Question of Life, the Universe, and Everything</value>
</request>

<?xml version="1.0" encoding="UTF-8"?>
<response id="1" command="get.answer">
    <value type="int32">42</value>
</response> 
```

双方何时应该开始处理传入的数据，或者换句话说，服务器何时知道传入的客户端数据已完全传输并且可以处理以创建响应？

当然，我对该主题进行了一些研究：我发现[这个](https://stackoverflow.com/questions/6593969/simple-chat-protocol/6594192#6594192)答案基于 HTTP 示例指向了正确的方向：因此，在 XML 消息之上使用一种“传输协议”肯定会有所帮助。

但我还研究了纯粹基于 XML 的 XMPP 协议，至少据我所见，它不使用任何“传输协议”，如 HTTP。

从 RFC 6120 的“2.4。结构化数据”中读取：

> XMPP 中的基本协议数据单元不是 XML 流（它只是提供点对点通信的传输），而是 XML“节”，它本质上是通过流发送的 XML 片段。节的根元素包括路由属性（例如“from”和“to”地址），而该节的子元素包含用于传递给预期接收者的有效负载。

所以他们基本上通过 TCP/IP 发送没有“传输协议”的小 XML 块，从我的 wireshark 跟踪中我可以看到，每个 XML 节的末尾也没有特殊的传输结束字符，比如两次 \r \n 或类似的东西。那么他们如何知道消息（节）的结尾呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T13:52:16.167

实际上，XMPP 使用[XML 流](http://www.ietf.org/rfc/rfc3920.txt)来传输数据。您所指的数据单元是单个消息的实际交换，但它们都包含在 XML 流中，该流定义了 XMPP 会话的通信的开始和结束点。

这将是传输结束发生的地方，就像所有传输结束一样。在该流中，有 3 种已定义的数据包类型（IQ、消息和存在），它们将指示单个消息的开始和结束（用于客户端到服务器的通信）。

尽管基本情况是通过 TCP 连接完成的，但也有一些扩展来支持不同的有线协议，例如[HTTP](http://xmpp.org/extensions/xep-0124.html)，它对于允许 XMPP 通过防火墙很有用。

如果您想做类似的事情，那么您可以采用相同的方法，即在建立和断开连接时开始和结束 XML 流。然后您只需要定义单独的消息类型，这样您的端点就会知道什么构成了完整的消息。

或者您可以只使用似乎非常适合您的用例的 XMPP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:42:59.770

正如@Robin 所说，XMPP 具有基于 XML 流的传输。它还可以使用 HTTP 作为[BOSH](http://xmpp.org/extensions/xep-0124.html)的传输。

在第二种（HTTP）情况下，事情很简单。[例如Strophe](http://strophe.im/strophejs/)，一个使用 BOSH 的 js 库，请求本质*上*是 HTTP 请求，因此具有`Content-Length`. 它看起来像这样：

```
POST /webclient HTTP/1.1
Content-Type: text/xml; charset=utf-8
Content-Length: 240

<body rid='1573741825'
      sid='SomeSID'
      xmlns='http://jabber.org/protocol/httpbind'>
  <iq id='bind_1'
      type='set'
      xmlns='jabber:client'>
    <bind xmlns='urn:ietf:params:xml:ns:xmpp-bind'>
      <resource>httpclient</resource>
    </bind>
  </iq>
</body> 
```

在第一种情况下（XML 流），尽管情况有所不同。我使用的一个性能良好、存在已久且经过测试的 Python 库[Twisted在](http://twistedmatrix.com/trac/)[Expat XML parser](http://www.libexpat.org/)上使用了一个 Python 包装器。解析器是一个快速的、非验证的解析器，它会抛出有用的事件，例如指示“根”元素的开始或结束。然后将收到的元素一一解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T10:14:00.447

XMPP 端点必须解析 XML。通过这样做，它知道什么时候结束，因为只允许有 1 个文档（顶级）元素（我不确定它们是否可能在 XML 处理器指令之前）

```
<?xml version="1.0" encoding="UTF-8"?>
<request id="1" command="get.answer">
    <value type="string">Answer to the Ultimate Question of Life, the Universe, and Everything</value>
</request> 
```

这是自定界的，因为一旦您解析了`<request`标记，您就会知道该 XML 文档在您点击匹配时结束`</request>`。

（就个人而言，我会在下面的协议级别放置一个框架协议，而不是将原始 xml 填充在（TCP）流之上，也许只是在每条消息之前使用一个 4 字节的大字节序长度字段。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T10:04:21.307

正如[这里](https://stackoverflow.com/questions/6593969/simple-chat-protocol/6594192#6594192)提到的，主要有两种方法：有一个分隔符或标题中的长度。您的分隔符可能只是您的开始标签的结尾，这就是 XMPP 正在做的事情。这意味着只要您的 XML 消息被包装在一个正确开始和结束的标签中，您就可以开始使用。如果您想对收到的数据块进行某种验证，您需要做的是确保所有标签都结束。大多数解析器包都会为您执行此操作。如果你向他们传递一个不可解析的包，他们会抛出一个异常。如果您想编写自己的解析器，那么您需要更多地研究解析器而不是传输/XML 协议。

# c# - 不止一行，单循环（System.Windows.Shapes）C#

> ID：10205762
> 
> 赞同：1
> 
> 时间：2012-04-18T08:37:54.353
> 
> 标签：c#, windows-phone-7, line

我正在开发自己的图形绘制应用程序。我已经得到了图表和更新机制，就像我想要的那样工作。现在我正在尝试绘制一个网格，所以我需要在图表的轴上添加一些线，所以我想出了这个小循环：

```
 Gridx = new Line();

        while (x <= _XAxisSize)
        {

            gridx.X1 = x; 
            gridx.X2 = x;
            gridx.Y1 = _YAxisSize - 20;
            gridx.Y2 = _YAxisSize + 20;

            x = x + XgridSize;

            gridx.UpdateLayout();
        } 
```

这不起作用，因为它只画一条线（循环的最后一点）。所以我需要在那个轴上画多条线。我如何使用 system.Windows.Shapes 库中的 line() 或该库中的任何其他形状来完成类似的事情

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:48:06.537

如果你想要多行，你需要创建多行：

```
while (x <= _XAxisSize)
{
    var gridx = new Line();

    gridx.X1 = x; 
    gridx.X2 = x;
    gridx.Y1 = _YAxisSize - 20;
    gridx.Y2 = _YAxisSize + 20;

   //need to add gridx to your view here

    x = x + XgridSize;
} 
```

但是，对于这样的静态线条，您最好使用 a `GeometryDrawing`，它的开销比`Line`形状要少得多。有关差异的详细信息，请参见[此处](http://www.intertech.com/Blog/post/WPF-Shapes-vs-WPF-Geometries.aspx)。

# iphone - 在循环中调用委托仅在第一次工作

> ID：10205767
> 
> 赞同：0
> 
> 时间：2012-04-18T08:37:59.937
> 
> 标签：iphone, objective-c, sqlite, mobile, fmdb

**一些背景资料**

我正在制作一个应用程序，它有一个管理后端来更新它的数据。该应用程序将所有数据保存在 SQLite 数据库中以提供离线支持。后端有一个简单的 API，它根据应用程序的最新同步日期以 JSON 格式返回新数据。数据包含下载并保存在应用程序中的图像。

**问题**

我已经解决了大部分问题，但陷入了这个问题。加载数据后，我循环遍历它并启动 ImageHandler 类，该类将下载图像、保存图像并在数据库中插入一行。这第一次工作正常，但它不会超过循环中的第一个数据行。如果我取消注释 [imageHandler loadForPlace:row]; / [imageHandler loadForCategory:row]; 行循环运行得很好。ImageHandler 类只是检查图像是否存在，如果不存在则下载它。

```
for (NSDictionary *row in data) {
    NSLog(@"Action: %@. Loading images...", [row objectForKey:@"action"]);

    imageHandler = [[Image alloc] init];
    imageHandler.delegate = self;

    if([[row objectForKey:@"action"] isEqualToString:@"CREATE_POST"] || [[row objectForKey:@"action"] isEqualToString:@"UPDATE_POST"]) {
        NSLog(@"1 (pre)");
        [imageHandler loadForPlace:row];
        NSLog(@"1");
    }
    else {
        NSLog(@"2 (pre)");
        [imageHandler loadForCategory:row];
        NSLog(@"2");
    }
} 
```

**输出：**

```
2012-04-18 10:32:08.698 Appname[17636:11603] Syncronize: Request done
2012-04-18 10:32:08.698 Appname[17636:11603] Found 2 items to create or update.
2012-04-18 10:32:08.698 Appname[17636:11603] Action: CREATE_POST. Loading images...
2012-04-18 10:32:08.699 Appname[17636:11603] 1 (pre)
2012-04-18 10:32:08.699 Appname[17636:11603] id: 778
2012-04-18 10:32:08.700 Appname[17636:11603] Image already exists, continuing...
2012-04-18 10:32:08.700 Appname[17636:11603] Image(s) saved
2012-04-18 10:32:08.700 Appname[17636:11603] Create place
2012-04-18 10:32:08.701 Appname[17636:11603] Has image 
```

**loadForItem（由 loadForPlace 和 loadForCategory 调用）：**

如您所见，我注释掉了委托调用，因为它们是导致循环不继续的原因。当我运行这个循环继续没有问题。使用我的测试数据，我目前最终处于 loadForItem 的“图像已经存在，继续......”部分，因此当委托代码被注释掉时它不会做任何事情。

**编辑：**好的，我不知道为什么我以前没有注意到这一点，但是应用程序挂起，没有任何错误输出到控制台。该死！当委托在检查崩溃的图像后调用我的方法时。该方法插入/更新我的 sqlite 数据库中的位置，我正在使用 fmdb，它使我的应用程序崩溃而没有任何错误。这在使用 fmdb 更新/插入之前发生过。

**Edit2：**我已将其范围缩小到此 UPDATE 查询。它锁定整个应用程序而没有任何错误。 `[db executeUpdate:@"UPDATE categories SET number_places = 21 WHERE id = 44"];`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:03:57.657

由于`NSLog(@"1 (pre)")`显然被称为，从您提供的日志输出中，但`NSLog(@"1")`不是，这表明它`-[Image loadForPlace:]`没有返回。你必须在那里寻找原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:47:48.660

您确定数据有超过 1 项吗？你打电话时：

```
 for (NSDictionary *row in data) {
     // (...)
    } 
```

尝试记录计数：

```
NSLog(@"data.count: %i", data.count); 
```

# c# - 循环以更好的方式在 C# 中处理对象列表？

> ID：10205770
> 
> 赞同：0
> 
> 时间：2012-04-18T08:38:05.487
> 
> 标签：c#, loops

我有一个 foreach 循环，它循环处理一个对象列表。它的含义是将一个 NavigateUrl 设置为一个超链接。我的代码如下所示：

```
foreach (var con in contacts)
        {
            if (con.ContactTypeID == 1)
            {
                FacebookIcon.NavigateUrl = "http://facebook.com/" + con.ContactURL;
            }
        } 
```

我想知道他们是否有更好的方法来做到这一点。我将有大约 10 个其他的 ContactTypeID，如果没有，我宁愿不再写 9 个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T08:39:58.143

您可以使用 LINQ：

```
var facebookURL = contacts.Where(c => c.ContactTypeID == 1)
              .Select(c => c.url)
              .FirstOrDefault();
if(facebookURL != null)
    FacebookIcon.NavigateUrl = "http://facebook.com/" + facebookURL; 
```

**编辑**：实际上，您可以受益于 LINQ 的延迟执行，以便为每种类型的联系人类型重用相同的执行：

```
var contactType = 1; // facebook
var url = contacts.Where(c => c.ContactTypeID == contactType)
      .Select(c => c.url);
if (url.Any())
    FacebookIcon.NavigateUrl = "http://facebook.com/" + url.First();
contactType = 2;    // google
if (url.Any())
    GoogleIcon.NavigateUrl = "http://Google.com/" + url.First(); 
```

**编辑**2：这是另一种使用 Dictionary 映射所有类型及其 URL 的方法，如果您有数百万种类型，这应该更有效；-) (@MAfifi)：

```
var urlTypeMapping = contacts.GroupBy(c => c.ContactTypeID)
    .ToDictionary(grp => grp.Key, grp => grp.Select(c => c.url));
foreach (var type in urlTypeMapping)
{
    var typeUrl = type.Value.FirstOrDefault();
    if (typeUrl != null)
    {
        switch (type.Key)
        {
            case 1:
                FacebookIcon.NavigateUrl = "http://facebook.com/" + typeUrl;
                break;
            case 2:
                GoogleIcon.NavigateUrl = "http://Google.com/" + typeUrl;
                break;
            default:
                break; //or throw new Exception("Invalid type!");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T08:40:38.527

你可以使用 LINQ 来做你想做的事。

```
var x = contacts.FirstOrDefault (c => c.ContactTypeID == 1);

if( x != null )
{
   FacebookIcon.NavigateUrl = String.Format ("http://facebook.com/{0}", x.ContactURL);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T09:07:13.823

好吧，我会对代码进行一些重构。想象一下，他将有 10 种其他类型要实现 :) 上面提供的解决方案是可行的，但在可扩展性方面不是很优雅。

所以，这是我的解决方案：

1) 实现一个具有通用联系人属性的基类

```
public abstract class BaseContact
{
    public string Name { get; set; }
    public abstract string Url { get; set; }

} 
```

2）实现具体类型

```
public class FbContact : BaseContact
{
    private string _baseUrl = "http://facebook.com/{0}";
    private string _url = string.Empty;

    public override string Url
    {
        get { return _url; }
        set { _url = string.Format(_baseUrl, value); }
    }
}

public class LinkedInContact : BaseContact
{
    private string _baseUrl = "http://linkedin.com/{0}";
    private string _url = string.Empty;

    public override string Url
    {
        get { return _url; }
        set { _url = string.Format(_baseUrl, value); }
    }
} 
```

3）这只是一个设置导航url的帮助类

```
public static class NavigationCreator
{
    public static void SetUrl(BaseContact contact, HyperLink link)
    {
        link.NavigateUrl = contact.Url;
    }
} 
```

4）一些测试代码来可视化结果

```
 List<BaseContact> items = new List<BaseContact>();

        for (int i = 0; i < 5; i++)
        {
            BaseContact item;
            if (i % 2 == 0) item = new FbContact(); else item = new LinkedInContact();

            item.Url = "My name " + i;

            items.Add(item);
        }

        foreach (var contact in items)
        {
            HyperLink link = new HyperLink();
            NavigationCreator.SetUrl(contact, link);
            Console.WriteLine(link.NavigateUrl);
        }

        Console.Read(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T08:40:39.247

你可以使用开关

```
switch (caseSwitch)
{
case 1: 
    FacebookIcon.NavigateUrl = "http://facebook.com/" + con.ContactURL;
    break;
case 2:
    //
    break;
default:
    //
    break; 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T08:40:54.393

你可以使用 linq。

```
var con = contacts.FirsOrDefault(c => c.ContactTypeID.Equals(1));
if (con == null)
{
  return;
}

con.NavigateUrl = "http://facebook.com/" + con.ContactURL; 
```

或者如果你有更多的身份证

```
List<int> ids = new List<int> {1,2,5,7};
contacts.Where(c => ids.Containt(c.ContactTypeID)).ToList().ForEach(item => item.NavigateUrl = "http://facebook.com/" + item.ContactURL); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T08:41:23.573

如果你使用 Linq 你应该使用 First 或 FirstOrDefault

```
var url = contacts.FirstOrDefault(c => c.ContactTypeID == 1).NavigateUrl; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-18T08:42:31.007

使用开关：

```
foreach (var con in contacts) 
    { 
        switch (con.ContactTypeID) 
        {
          case 1: 
            FacebookIcon.NavigateUrl = "http://facebook.com/" + con.ContactURL; 
            break;
          case 2:
            . . . 
            break;
          . . . 
        } 
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-18T08:45:32.423

也许是一个精简的 LINQ：

```
contacts.ForEach(c => { if (c.ContactTypeID  == 1) FacebookIcon.NavigateUrl = "http://facebook.com/" + con.ContactURL;  }); 
```

如果你想为每个 ContactTypeID == 1 做“它”。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-18T08:45:34.343

我假设每个联系人不一定是 Facebook 并且您需要根据联系人是什么来动态设置不同的属性？

您最好的选择是 a`Dictionary<int, Action>`或类似的，您只需执行类似的操作，

```
var setCorrectUrl = new Dictionary<int, Action<Contact>>
{
    // Appropriate entries in here, e.g. (syntax not quite right)
    {
        1,
        (contact) => FacebookIcon.NavigateUrl = contact.ContactURL;
    }
}

foreach (var con in contacts)
{
    setCorrectUrl[con.ContactTypeID](con);
} 
```

# mysql - 我可以在 sql 查询中传递一个列表来搜索吗

> ID：10205771
> 
> 赞同：-3
> 
> 时间：2012-04-18T08:38:10.073
> 
> 标签：mysql, hql

我想要一个用于返回输入值列表并获取返回列表的 sql 查询。假设我在一个表中有两个字段。值 [1-a,2-b,3-c,4-d]，我传入 [a,c] 我如何得到 [1,3]？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:41:30.117

```
select * from tablename where columname1 in ('a','c'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:42:11.107

您需要遍历查询列表并将结果存储在结果列表中。我认为您不能一次查询值列表。另一种方法是您可以使用'where value = a or value = c'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T08:50:09.283

这将为您提供所需的输出-

```
select group_concat(col2) where col1 in ('a','c') 
```

# unit-testing - 带有声纳的 Jenkins 上的 spring-test-mvc 问题

> ID：10205775
> 
> 赞同：6
> 
> 时间：2012-04-18T08:38:22.087
> 
> 标签：unit-testing, spring-mvc, jenkins, sonarqube

我最近发现了用于 MVC 测试的 Spring 项目：[spring-test-mvc](https://github.com/SpringSource/spring-test-mvc)。这是一个很棒的工具，我计划在未来更多地使用它。

但是我注意到我的 Jenkins CI 有一个问题。问题是，当 MVC 集成测试在本地通过时，甚至在 Jenkins CI 作业中，问题出现在 Jenkins 的 Sonar 插件执行中。在这种情况下，我尝试使用“.andExpect()”方法完成的所有断言都失败了。是的，如果不使用 Sonar 插件，它们会通过。

例如

```
this.mockMvc.perform(get("/someController/some.action").param("someParam", "someValue"))
    .andExpect(status().isOk())
    .andExpect(content().type(MediaType.APPLICATION_JSON))
        .andExpect(request().sessionAttribute("someAttribute", notNullValue())); 
```

在上面的测试内容类型和会话属性断言失败。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:40:07.103

这个问题由 spring-mvc 的好心人解决了。可以在提供的[链接](https://github.com/SpringSource/spring-test-mvc/issues/34)上找到更多详细信息。简而言之，就我而言，Sonar 使用 Cobertura 进行覆盖测试。

> Cobertura 添加了接口`HasBeenInstrumented`，因此该类被装饰为 JDK 动态代理，这意味着具有一个接口的合成代理类不是很有帮助，因为它是 Cobertura 标记接口。结果，控制器永远无法正确发现任何注释。

通过添加元素`proxy-target-class="true"`来解决问题`<tx:annotation-driven>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-12T19:03:21.360

我也面临同样的问题。我们将 Cobertura jar 版本升级到最新版本。此更改使 JUnit 测试用例可以在本地和 Jenkins 中运行

# macos - 如何解决“CoreAnimation：渲染错误 506”错误？

> ID：10205776
> 
> 赞同：3
> 
> 时间：2012-04-18T08:38:38.637
> 
> 标签：macos, imagekit

我已经开发了一个mac程序，我使用它时效果很好。但是，有时当我关闭程序时，我会在控制台输出中收到一些错误消息，如下所示：

CoreAnimation：渲染错误 506 --ImageKit 错误：读取像素前错误：506 --ImageKit 错误：读取像素后错误：506

这不会每次都发生，似乎它只是随机发生的。什么操作可能会导致这个问题？我怎样才能弄清楚呢？我完全不知道。请给我一些建议。非常感谢。

# android - MapView / MapActivity 在某些设备上崩溃

> ID：10205785
> 
> 赞同：1
> 
> 时间：2012-04-18T08:39:07.457
> 
> 标签：android, crash, android-mapview, oncreate, mapactivity

我已经阅读了 Google 的 MapView 教程，它在模拟器上运行良好，例如在我的 HTC Flyer 上。但由于某种原因，它在我的手机（三星 Galaxy I9000）上启动时立即崩溃。

崩溃发生在那里，因为在开始时 onCreate() 接收的 Bundle 为空。我正在针对 Android 2.3.3 进行编译。这也安装在手机上。传单使用 Android 3.0

对于这个奇怪的问题，我将不胜感激。

这是精确的 Logcat 输出：

```
04-18 10:52:26.019: E/AndroidRuntime(1461): FATAL EXCEPTION: main
04-18 10:52:26.019: E/AndroidRuntime(1461): java.lang.RuntimeException: Unable to start activity ComponentInfo{bernd.konnerth/bernd.konnerth.HelloMapViewActivity}: java.lang.NullPointerException
04-18 10:52:26.019: E/AndroidRuntime(1461):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at android.os.Looper.loop(Looper.java:123)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at android.app.ActivityThread.main(ActivityThread.java:3687)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at java.lang.reflect.Method.invokeNative(Native Method)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at java.lang.reflect.Method.invoke(Method.java:507)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at dalvik.system.NativeStart.main(Native Method)
04-18 10:52:26.019: E/AndroidRuntime(1461): Caused by: java.lang.NullPointerException
04-18 10:52:26.019: E/AndroidRuntime(1461):     at android.app.ContextImpl.openFileOutput(ContextImpl.java:495)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at android.content.ContextWrapper.openFileOutput(ContextWrapper.java:158)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at android_maps_conflict_avoidance.com.google.common.io.android.AndroidPersistentStore.writeBlockX(AndroidPersistentStore.java:140)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at android_maps_conflict_avoidance.com.google.common.io.android.AndroidPersistentStore.writeBlock(AndroidPersistentStore.java:169)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at android_maps_conflict_avoidance.com.google.common.io.PreferenceStore.ensurePreferencesLoaded(PreferenceStore.java:178)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at android_maps_conflict_avoidance.com.google.common.io.PreferenceStore.readPreference(PreferenceStore.java:86)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at android_maps_conflict_avoidance.com.google.common.io.BasePersistentStore.readPreference(BasePersistentStore.java:41)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at android_maps_conflict_avoidance.com.google.common.StaticUtil.readPreferenceAsDataInput(StaticUtil.java:271)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.loadOrRequestCookie(DataRequestDispatcher.java:493)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.<init>(DataRequestDispatcher.java:390)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.createInstance(DataRequestDispatcher.java:341)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at com.google.android.maps.MapActivity.createMap(MapActivity.java:548)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at com.google.android.maps.MapActivity.onCreate(MapActivity.java:422)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at bernd.konnerth.HelloMapViewActivity.onCreate(HelloMapViewActivity.java:15)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-18 10:52:26.019: E/AndroidRuntime(1461):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
04-18 10:52:26.019: E/AndroidRuntime(1461):     ... 11 more 
```

谢谢，伯恩德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T17:08:34.360

我知道了！你猜怎么着！重要的是包名！！！

我在以下位置找到了一个 Google Map 示例：

**C:\android-sdk\add-ons\addon-google_apis-google_inc_-10\samples\MapsDemo**

然后我把它拆掉，直到它和我的几乎一模一样。我使用**bernd.konnerth**作为包名。但出于一些非常疯狂的原因，显然三星手机（可能还有其他设备）不接受这一点，只是在启动时抛出 NullPointerException ，没有任何可能指向包名称问题的进一步提示。

当我使用**com.bernd.konnerth**时，一切正常。显然必须有一个**com。**在前。但请注意！似乎还有其他名称组合不起作用。偶然我发现例如**com.android.wifi**不能正常工作！即使认为这个包似乎不存在于 android 命名空间中。

这样的事情真的可以让人抓狂！:-(

不过，感谢您的所有快速回复！

伯恩德

# java - 在 Liferay 中控制 Portlet 的大小

> ID：10205786
> 
> 赞同：4
> 
> 时间：2012-04-18T08:39:07.917
> 
> 标签：java, layout, liferay, vaadin

我有一个简单的 Vaadin portlet，它显示一个嵌入式页面，例如 www.stackoverflow..com。在 Liferay 中，我将 portlet 所在的页面布局设置为 1 列布局，以便 portlet 填写整个页面。现在，如果我调整浏览器（Firefox 11）的大小，portlet 根本不会受到影响。如果我调整浏览器的大小，有没有办法让我的 Portlet 自行调整大小？我检查了 ?debug 控制台没有布局错误，如果我调整我的 broswer vaadin 似乎会调用一些调整大小的函数来设置新的高度，宽度

```
Running layout functions due to window resize
New window width: 1265
New window height: 906 
```

但什么也没发生。

我正在使用 vaadin 6.6.6 和 liferay 6.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:48:31.383

尝试查看 Liferay 中的 Iframe portlet。这个 portlet 使用 javascript 来调整自身的大小，并且基本上完成了您想要实现的目标。

# haskell - 给定 Haskell 类型签名，是否可以自动生成代码？

> ID：10205793
> 
> 赞同：27
> 
> 时间：2012-04-18T08:39:32.760
> 
> 标签：haskell, types

它在标题中所说的。如果我编写类型签名，是否可以通过算法生成具有该类型签名的表达式？

似乎有可能做到这一点。我们已经知道，如果类型是库函数类型签名的特例，Hoogle 可以通过算法找到该函数。另一方面，许多与一般表达式相关的简单问题实际上是无法解决的（例如，不可能知道两个函数是否做同样的事情），所以这是其中之一几乎是难以置信的。

一次问几个问题可能是不好的形式，但我想知道：

*   可以做到吗？

*   如果是这样，怎么做？

*   如果没有，是否有任何限制情况成为可能？

*   两个不同的表达式很可能具有相同的类型签名。你能计算出*所有*这些吗？甚至*其中一些*？

*   有没有人有工作代码可以真正做到这一点？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-18T08:48:49.350

[Djinn](http://lambda-the-ultimate.org/node/1178)为 Haskell 类型的受限子集执行此操作，对应于一阶逻辑。但是，它不能管理递归类型或需要递归来实现的类型；因此，例如，它不能写出对应于命题“如果*a*蕴涵*a*，则*a*`(a -> a) -> a` ”的类型项（的类型），这显然是错误的；你可以用它来证明任何事情。确实，这就是产生⊥的原因。`fix`***`fix`***

 ***如果您*确实*允许`fix`，那么编写一个程序来给出任何类型的术语都是微不足道的；该程序将简单地打印`fix id`每种类型。

Djinn 主要是一个玩具，但它可以做一些有趣的事情，比如为 and 派生正确的实例`Monad`和`Reader`给`Cont`定的类型。您可以通过安装[djinn](http://hackage.haskell.org/package/djinn)包或使用[lambdabot](http://www.haskell.org/haskellwiki/Lambdabot)来尝试，后者将其集成为命令。`return``(>>=)``@djinn`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-18T09:20:39.567

[okmij.org](http://okmij.org/ftp)的[Oleg](http://c2.com/cgi/wiki?OlegKiselyov)对此有一个实现。[这里](http://okmij.org/ftp/Haskell/types.html#de-typechecker)有一个简短的介绍，但有[文字的 Haskell 源代码](http://okmij.org/ftp/Haskell/de-typechecker.lhs)包含该过程的详细信息和描述。（我不确定这与 Djinn 掌权有何对应，但这是另一个例子。）

* * *

在某些情况下没有唯一功能：

```
fst', snd' :: (a, a) -> a
fst' (a,_) = a
snd' (_,b) = b 
```

不仅如此；在某些情况下，函数的数量是无限的：

```
list0, list1, list2 :: [a] -> a
list0 l = l !! 0
list1 l = l !! 1
list2 l = l !! 2
-- etc.

-- Or 
mkList0, mkList1, mkList2 :: a -> [a]
mkList0 _ = []
mkList1 a = [a]
mkList2 a = [a,a]
-- etc. 
```

（如果你只想要总函数，那么考虑`[a]`限制为无限列表`list0`等`list1`，即`data List a = Cons a (List a)`）

事实上，如果你有递归类型，任何涉及这些的类型都对应于无数个函数。但是，至少在上述情况下，函数的数量是可数的，因此可以创建一个包含所有函数的（无限）列表。但是，我认为该类型`[a] -> [a]`对应于无数个函数（再次限制`[a]`为无限列表），因此您甚至无法枚举它们！

（总结：有些类型对应于有限、可数无限和不可数无限数量的函数。）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-18T10:08:41.427

这在一般情况下是不可能的（对于像 Haskell 这样甚至没有强大的规范化属性的语言），并且仅在某些（非常）特殊情况下（以及对于更受限制的语言）才有可能，例如当 codomain 类型只有一个时构造函数（例如，一个函数`f :: forall a. a -> ()`可以唯一确定）。为了将给定签名的一组可能定义减少为只有一个定义的单例集，需要给出更多限制（例如，以附加属性的形式，如果不给出，仍然很难想象这会有什么帮助使用示例）。

从 (n-) 分类的角度来看，类型对应于对象，项对应于箭头（构造函数也对应于箭头），函数定义对应于 2 个箭头。这个问题类似于是否可以通过仅指定一组对象来构造具有所需属性的 2 类的问题。这是不可能的，因为您需要箭头和 2 箭头的显式构造（即编写术语和定义），或者允许使用特定属性集（仍需要显式定义）推断必要结构的演绎系统。

* * *

还有一个有趣的问题：给定一个 ADT（即 Hask 的子类别）是否可以自动派生 Typeable、Data（是的，使用[SYB](http://www.cs.uu.nl/wiki/bin/view/GenericProgramming/SYB)）、Traversable、Foldable、Functor、Pointed、Applicative、Monad 等的实例（？ ）。在这种情况下，我们有必要的签名以及额外的属性（例如，monad 定律，虽然这些属性不能用 Haskell 表示，但它们可以用具有依赖类型的语言表示）。有一些有趣的结构：

[http://ulissesaraujo.wordpress.com/2007/12/19/catamorphisms-in-haskell](http://ulissesaraujo.wordpress.com/2007/12/19/catamorphisms-in-haskell)

它显示了可以为列表 ADT 做什么。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-18T17:09:59.207

这个问题实际上相当深，我不确定答案，如果你问的是 Haskell 类型的全部荣耀，包括类型系列、GADT 等。

您要问的是程序是否可以通过显示这样的值来自动证明存在任意类型*（*包含值）。一个叫做 Curry-Howard Correspondence 的原则说，类型可以被解释为数学命题，如果命题是建设性可证明的，则类型是可居住的。所以你问是否有一个程序可以证明某一类命题是定理。在像 Agda 这样的语言中，类型系统足够强大，可以表达*任意*数学命题，证明任意命题是哥德尔不完备定理不可判定的。另一方面，如果你下降到（比如说）纯 Hindley-Milner，你会得到一个更弱且（我认为）可判定的系统。对于 Haskell 98，我不确定，因为类型类应该能够等同于 GADT。

对于 GADT，我不知道它是否可以确定，但也许这里的一些知识渊博的人会马上知道。例如，可以将给定图灵机的停机问题编码为 GADT，因此如果机器停机，则存在该类型的值。在那种情况下，可居住性显然是无法确定的。但是，也许这样的编码不太可能，即使是类型族。我目前在这个主题上还不够流利，因此无论哪种方式对我来说都是显而易见的，尽管正如我所说，也许这里的其他人知道答案。

（更新：）哦，我对您的问题有一个更简单的解释：您可能会问是否每个 Haskell 类型都有人居住。答案显然不是。考虑多态类型

```
a -> b 
```

There is no function with that signature (not counting something like unsafeCoerce, which makes the type system inconsistent).***

# c# - 如何取消/中止从 MsiInstallProduct 启动的 msi 安装

> ID：10205794
> 
> 赞同：0
> 
> 时间：2012-04-18T08:39:32.870
> 
> 标签：c#, .net, api, windows-installer

我已经使用 MsiInstallProduct 从 msi 开始安装。此外，我设置了 MsiSetInternalUI 和 MsiSetExternalUIRecord。

我如何告诉安装停止并执行回滚。

我必须使用特殊命令执行 MsiDoAction 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:50:50.047

如果您试图导致（或模拟）用户取消安装，那么您需要`ERROR_INSTALL_USEREXIT`从 UI 的回调函数返回。这仅适用于响应您的回调函数将收到的一些消息。

# android - ICS 视频上的 android Flash 黑框

> ID：10205796
> 
> 赞同：1
> 
> 时间：2012-04-18T08:39:44.697
> 
> 标签：android, flash, android-4.0-ice-cream-sandwich

我开发了一个允许查看 Flash 视频的应用程序。出于人体工程学的原因，我将 Flash 视频放入了中心 webview。在平板电脑上的 android ICS 上，我在屏幕右侧有一个黑框。您是否有解决方法来避免平板电脑上的 ICS 出现黑框？

它在平板电脑上的 ICS 下完美运行！！![在此处输入图像描述](../Images/82eae343c76f390c31e57b23f983ce71.png)

# c++ - 使用 init_seg 调用初始化函数

> ID：10205800
> 
> 赞同：1
> 
> 时间：2012-04-18T08:40:05.803
> 
> 标签：c++, visual-c++

我试图确保程序首先调用一个函数，以确保关键对象的初始化。但是，我对如何`init_seg`被使用/调用感到困惑。

例如，从 msdn 上的文档看来，以下内容似乎是第一个被调用的。

```
#pragma init_seg( ".CRT$XCC" )

static void InitializeStuff()
{
    printf("InitializeStuff\n");
} 
```

但是，情况似乎并非如此，因为该函数显然不会被自动调用（当然，除非我明确调用它）。

如何使用 init_set 确保在我的其他执行代码的其余部分之前调用函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:07:21.883

如果我理解正确，您将首先要初始化的所有全局变量放在与`#pragma init_seg`

例子：

```
#pragma init_seg( ".CRT$XCB" )

class A
{
    A()
    {
        printf("first!\n");
    }
};

static A first; 
```

并确保您没有在该文件中放置任何其他全局变量，而不是您要首先初始化的全局变量。

# entity-framework-4 - 延迟加载的 ICollection 上的实体框架和延迟执行

> ID：10205803
> 
> 赞同：0
> 
> 时间：2012-04-18T08:40:11.583
> 
> 标签：entity-framework-4, deferred-execution

我正在使用 Entity Framework 4.1，并且我有一对多的关系。

`ICollection<T>`当我查询关系一侧的延迟加载时，会返回整个记录集，并且它不会像我直接从存储库`IQueryable`接口查询时那样延迟执行。

有什么办法可以让这个使用延迟执行，所以我可以做一个像这样的查询

```
Model.Childs.Where(x => !x.Deleted.HasValue).Skip(10).Take(5); 
```

提前致谢，

汤姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:42:49.953

这就是 EF 中延迟加载的原理。您的导航属性是在您的代码中定义的，并且在该属性上定义的任何 LINQ 查询都是 LINQ-to-Objects - 它不会转换为 SQL。延迟加载总是加载整个集合（以及急切加载）。当您查询存储库时，您正在查询 IQueryable 并使用翻译成 SQL 的 LINQ-to-Entities。

作为解决方法，使用显式加载：

```
dbContext.Entry(Model).Collection(m => m.Childs)
                      .Query()
                      .Where(c => !c.Deleted.HasValue)
                      .Skip(10)
                      .Take(5)
                      .Load(); 
```

# python - 如何使用 lxml 遍历 GraphML 文件

> ID：10205811
> 
> 赞同：2
> 
> 时间：2012-04-18T08:40:51.000
> 
> 标签：python, lxml, loops, graphml

我有以下 GraphML 文件“mygraph.gml”，我想用一个简单的 python 脚本对其进行解析：

这表示一个简单的图，其中包含 2 个节点“node0”、“node1”和它们之间的一条边

```
<?xml version="1.0" encoding="UTF-8"?>
<graphml xmlns="http://graphml.graphdrawing.org/xmlns"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns
         http://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd">
  <key id="name" for="node" attr.name="name" attr.type="string"/>
  <key id="weight" for="edge" attr.name="weight" attr.type="double"/>
  <graph id="G" edgedefault="directed">
    <node id="n0">
      <data key="name">node1</data>
    </node>
    <node id="n1">
      <data key="name">node2</data>
    </node>
<edge source="n1" target="n0">
  <data key="weight">1</data>
</edge>
  </graph>
</graphml> 
```

这表示一个具有两个节点 n0 和 n1 的图，它们之间有一条权重为 1 的边。我想用python解析这个结构。

我在 lxml 的帮助下写了一个脚本（我需要使用它，因为数据集比这个简单的例子大得多，超过 10^5 个节点，python minidom 太慢了）

```
import lxml.etree as et

tree = et.parse('mygraph.gml')

root = tree.getroot()

graphml = {
"graph": "{http://graphml.graphdrawing.org/xmlns}graph",
"node": "{http://graphml.graphdrawing.org/xmlns}node",
"edge": "{http://graphml.graphdrawing.org/xmlns}edge",
"data": "{http://graphml.graphdrawing.org/xmlns}data",
"label": "{http://graphml.graphdrawing.org/xmlns}data[@key='label']",
"x": "{http://graphml.graphdrawing.org/xmlns}data[@key='x']",
"y": "{http://graphml.graphdrawing.org/xmlns}data[@key='y']",
"size": "{http://graphml.graphdrawing.org/xmlns}data[@key='size']",
"r": "{http://graphml.graphdrawing.org/xmlns}data[@key='r']",
"g": "{http://graphml.graphdrawing.org/xmlns}data[@key='g']",
"b": "{http://graphml.graphdrawing.org/xmlns}data[@key='b']",
"weight": "{http://graphml.graphdrawing.org/xmlns}data[@key='weight']",
"edgeid": "{http://graphml.graphdrawing.org/xmlns}data[@key='edgeid']"
}

graph = tree.find(graphml.get("graph"))
nodes = graph.findall(graphml.get("node"))
edges = graph.findall(graphml.get("edge")) 
```

该脚本正确获取节点和边，以便我可以简单地迭代它们

```
for n in nodes:
    print n.attrib 
```

或类似的边缘：

```
for e in edges:
    print (e.attrib['source'], e.attrib['target']) 
```

但我真的不明白如何获取边缘或节点的“数据”标签以打印边缘权重和节点标签“名称”。

这对我不起作用：

```
weights = graph.findall(graphml.get("weight")) 
```

最后一个列表总是空的。为什么？我错过了一些东西，但不明白是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:49:01.590

您不能一次完成，但是对于找到的每个节点，您可以使用数据的键/值构建一个字典：

```
graph = tree.find(graphml.get("graph"))
nodes = graph.findall(graphml.get("node"))
edges = graph.findall(graphml.get("edge"))

for node in nodes + edges:
    attribs = {}
    for data in node.findall(graphml.get('data')):
        attribs[data.get('key')] = data.text
    print 'Node', node, 'have', attribs 
```

它给出了结果：

```
Node <Element {http://graphml.graphdrawing.org/xmlns}node at 0x7ff053d3e5a0> have {'name': 'node1'}
Node <Element {http://graphml.graphdrawing.org/xmlns}node at 0x7ff053d3e5f0> have {'name': 'node2'}
Node <Element {http://graphml.graphdrawing.org/xmlns}edge at 0x7ff053d3e640> have {'weight': '1'} 
```

# azure - Azure ACS、WIF 3.5、Asp.Net 3.5 自定义成员资格提供程序和 IsAuthenticated

> ID：10205820
> 
> 赞同：1
> 
> 时间：2012-04-18T08:41:16.280
> 
> 标签：azure, wif, custom-membershipprovider

按照本指南中的步骤[使用 Azure ACS](http://robbincremers.me/2012/02/22/using-windows-azure-access-control-service-to-provide-a-single-sign-on-experience-with-popular-identity-providers/)，我通过 Facebook 配置和验证了一个可用的 Azure ACS 服务，重定向回在我的开发服务器上运行的网站。

身份验证成功后，Azure ACS 将重定向回我的本地开发网站，并且 IsAuthenticated 标志为真，但是我想仅当来自声明的电子邮件也存在于我的本地数据库中时，通过检查/调用将 IsAuthenticated 标志设置为真自定义 MembershipProvider。如果索赔中的电子邮件不存在，我想将客户重定向到注册页面。一旦注册并通过身份验证，我想将 IsAuthenticated 标志设置为 true。

目前，一旦通过 Facebook 和 AzureACS 进行身份验证，用户就可以请求安全页面，例如 ViewAccountBalance.aspx，即使该帐户不存在，因为开箱即用的 IsAuthenticated 标志为 true。有兴趣了解其他人做了什么以及最佳实践是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:40:53.567

桑德里诺是正确的。您可以使用基于角色的授权（或更一般地说，基于声明的授权）。默认情况下，ACS 只是将身份提供者发出的声明返回给您的依赖方。对于 Facebook，它将返回电子邮件声明。但是，您可以配置 ACS 以创建其他规则。例如，您可以将特定用户映射到值为管理员的角色。然后 ACS 也会将此角色声明返回给您的依赖方。然后您可以使用 Sandrino 的建议来使用基于角色的授权。您还可以参考[http://msdn.microsoft.com/en-us/library/windowsazure/gg185915.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg185915.aspx)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:55:23.040

您需要明确区分身份验证和授权。由于用户通过 Facebook 登录，这意味着他已通过身份验证（您知道他是谁以及他来自哪里）。

现在，如果您想根据特定条件限制应用程序的某些部分，您实际上是在谈论授权。您可能会考虑将角色与简单的 HttpModule 结合起来。示例：您的 HttpModule 可以验证用户正在浏览的页面。如果用户访问需要活动配置文件的页面，您可以使用以下代码：

```
public class RequiresProfileHttpModule : IHttpModule
{
    public void Dispose()
    {

    }

    public void Init(HttpApplication context)
    {
        context.AuthorizeRequest += new EventHandler(OnAuthorize);
    }

    private void OnAuthorize(object sender, EventArgs e)
    {
        HttpApplication app = sender as HttpApplication;
        if (app.Request.Url.ToString().Contains("bla") && !app.Context.User.IsInRole("UsersWithProfile"))
            app.Response.Redirect("http://myapp/register.aspx");
    }
} 
```

如果用户填写了他的电子邮件地址，您唯一需要注意的是更新主体以确保它具有角色 UsersWithProfile。

这只是众多可能的解决方案之一。如果您使用的是 ASP.NET MVC，则可以使用全局 ActionFilters 获得相同的结果。或者，您也可以尝试使用 IClaimsPrincipal（如果用户有个人资料，请添加声明）。

# javascript - 带有背景高清视频和动态播放的 HTML 页面

> ID：10205823
> 
> 赞同：0
> 
> 时间：2012-04-18T08:41:23.027
> 
> 标签：javascript, flash, html, video

我需要创建一个具有高清视频背景的网页。问题是视频必须按照某些标准在动态上可播放和可停止。我有一个包含以下链接的导航：“地球”、“城市”、“办公室”；视频是一个从天空向着放大的行星。你可以很容易地猜到我想要获得什么行为。我用 HTML5 视频和 Javascript 操作实现了系统，但它似乎只在 Safari 的最新版本上正常工作，Chrome 无法真正处理实时“timeupdate”javascript 操作，IE9 只是忽略了脚本。此外，整个事情很乱，我需要加载两个视频，一个用于向前播放，另一个用于向后播放，

我正在考虑一个成熟的 SWF，它甚至可以确保对 Flash 方法的向后兼容性和操作。有什么建议么？

这是我现在使用的 HTML5/Javascript：

```
<head>
    <script type="text/javascript">
        // Global containing the time where the video must pause
        stopAt = 0.1;

        /* The first value is the time in the forward video that
        matches the frame, the second is the time in the backwards video */
        jumps = {"space": [0.1, 6.3], "sky" : [6.33, 0.1]};

        currentFrame = "space";

        // Flag to signal whether playback is backwards
        reverse = false;

        $(document).ready(function () {
            // Callback to pause the video              
            $(".background").bind("timeupdate", function () {
                if (stopAt > 0 && $(this)[0].currentTime >= stopAt) {
                    $(this)[0].pause();
                    $(".hidden-on-transactions").fadeIn();
                }
            });

            function jumpTo(frame) {
                if (jumps[frame][0] > jumps[currentFrame][0]) {
                    // The requested frame is after the current one
                    stopAt = jumps[frame][0];

                    if (reverse) {
                        //  We must now play forward, therefore we switch videos
                        $(".current-background").removeClass("current-background");
                        $("#forward").addClass('current-background');                               
                        reverse = false;
                    }
                }
                else {
                    stopAt = jumps[frame][1];

                    if (!reverse) {
                        $(".current-background").removeClass("current-background");
                        $("#backwards").addClass('current-background');
                        reverse = true;
                    }
                }

                currentFrame = frame;

                // Synching forward and backwards at the same frame
                $(".background:not(.current-background)")[0].currentTime = jumps[currentFrame][reverse ? 0 : 1];

                $(".hidden-on-transactions").fadeOut();

                backgroundVideo = $(".current-background");

                // Since we've set a new value on the stopAt variable, the video will stop at the new frame
                backgroundVideo[0].play();
            }

            $(".frame-anchor").click(function () {
                $('.selected').removeClass('selected');
                $(this).addClass('selected');

                _target = $(this).attr('rel');
                jumpTo(_target);

                return false;
            });
        });
    </script>

    <style type="text/css">
        body {
            position: relative; 
            margin: 0;
            padding: 0;

            overflow: hidden;
        }

        .background {
            position: absolute;
            top: 0;
            left: 0;

            z-index: -1;

            width: 1600px;
            height: 900px;

            margin: 0;
            padding: 0;

            display: none;
        }

        .current-background {
            display: block;
        }

        nav {
            position: fixed;
            right: 0;
            top: 200px;

            width: 300px;
        }

        #text {
            background-color: rgba(255, 255, 255, 0.6);
            font-size: 17px;
            font-family: "Verdana", sans-serif;
            color: black;

            height: 500px;
            width: 350px;
            padding: 10px;

            position: absolute;
            top: 200px;
            left: 500px;
        }

        nav a {
            display: block;

            width: 90%;
            padding: 10px;
            margin-bottom: 20px;
            margin-left: auto;

            color: white;
            font-size: 13px;
            font-weight: bold;
            font-family: "Arial Black", sans-serif;
            text-align: right;

            text-decoration: none;  
            border-bottom: 2px white solid;
        }

        nav a:hover, nav a.selected {
            background-color: white;
            color: black;
        }

        .hidden-on-transactions {
            display: none;
        }
    </style>
</head>
<body>
    <video id="forward" class="background current-background" autoplay>
        <source src="background-forward.mp4" type="video/mp4" />
    </video>
    <video id="backwards" class="background">
        <source src="background-reverse.mp4" type="video/mp4" />
    </video>
    <div id="text" class="hidden-on-transactions">
        <h1>Prova testo</h1>
        Lorem ipsum dolor sit amet
    </div>

    <nav class="hidden-on-transactions">
        <a href="#" class="frame-anchor selected" rel="space">space</a>
        <a href="#" class="frame-anchor" rel="sky">sky</a>
    </nav>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:42:02.990

flash 不支持向后播放，因为 flash 总是从左到右播放，通过 actionScrip 的时间线控制可以解决这个问题。这种方法往往会使视频无法正常工作。

或者，您可以将您的电影序列转换为 jpeg，这将起作用，但同时强调负载，并文件“SWF 大小”

另一种方法是制作两个相同的视频，一个正常播放，另一个向后播放；如果它们是合理的大文件，只需流式传输它们通常会更快。这些视频将在缓存中，您可以通过 actionScript 对它们做任何您想做的事情。

如果您在时间线控制方面需要帮助，请检查我制作的文件的此链接，附带源代码也请耐心等待加载。

[http://www.files.com/flash/3_dimensional/t_shirt_3d_display_with_rotation_3131.html](http://www.ffiles.com/flash/3_dimensional/t_shirt_3d_display_with_rotation_3131.html)

当在同一页面上使用多个 SWF 相互叠加时，我发现使用 CSS 和 PHP 可以轻松实现内容叠加，也可以叠加 html。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:29:47.563

将视频嵌入 SWF 并通过[ExternalInterface](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)进行控制是一种很好的方法，正如您所指出的，它可以解决您在视频的多个版本（可能还有多种文件格式）所面临的问题，以及不支持 HTML5 视频的浏览器的向后兼容性问题。

但是，如果您需要支持 iOS 设备，则需要提供备用设备，因为这些设备不支持 Flash。

# java - 处理大类

> ID：10205825
> 
> 赞同：5
> 
> 时间：2012-04-18T08:41:24.743
> 
> 标签：java, class, matrix, cohesion

在过去的几个月里，我最近开始使用 Java 进行编码。我有一个 Matrix 类，它有很多方法，变得过于臃肿。我还有一个 SquareMatrix 类，它扩展了 Matrix，并减少了一些臃肿。

我发现 Matrix 类中的许多方法通常与矩阵相关。它具有所有基础知识，如 addMatrix(Matrix)、multiplyMatrix(Matrix)、multiplyMatrix(float)，以及更复杂的方法，如 getGaussian(Matrix) 或 getLUDecomposition(Matrix)。

在减少班级矩阵中的行数方面，我有哪些选择？一个类变得非常大是正常的吗？我不这么认为......这是我应该尽早考虑的事情并且重构很困难吗？还是有简单的解决方案？

谢谢！

* * *

编辑：在阅读了几个回复后，我正在考虑执行以下操作：

**实用程序类**Matrix 包含矩阵的所有常用/基本方法

***委托类（Helper/sub）：***

****助手类**** getGaussian(..), getLUFactorization(..), ...

**子类** （扩展矩阵）SquareMatrix、LowerTriMatrix、UpperTriMatrix、...

委派似乎类似于在 C++ 中定义多个带有标头的 .cpp 文件。仍然欢迎更多提示。

* * *

Edit2：另外，我更喜欢通过正确设计来重构，而不是快速修复。我希望它对未来的项目有所帮助，而不仅仅是这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T08:49:05.207

接口应该是*完整*的和*最小的*，这意味着一个类型接口应该包含在该类型上实现所需和有意义的任务所必需的所有方法，并且只有这些。

因此，分析 Matrix 的 API 方法并确定它们中的哪些属于核心 API（必须有权访问类的内部才能完成其任务），哪些提供“扩展”功能。然后将类 API 简化为核心功能，将其余方法迁移到单独的帮助程序/实用程序/子类，这些子类可以使用公共核心 API 完成其目标。

如需重构/单元测试帮助，请考虑获取Michael Feathers 的[《有效使用遗留代码》 。](https://rads.stackoverflow.com/amzn/click/com/0131177052)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T09:13:56.537

重构绝对是一件好事，但**除非你有好的单元测试，否则**很难可靠地重构。[测试驱动开发](http://en.wikipedia.org/wiki/Test-driven_development)提供了一种实现通常易于重构的代码库的方法。

对于没有单元测试的现有代码，这意味着在你需要首先隔离要重构的区域之前，先编写单元测试，然后再重构。但是，如果这只是一个个人项目，您可能可以通过编写测试来避免您希望在重构中完好无损地生存的最小功能集。

关于如何进行手头的重构，有一些原则和方法，就像其他一些答案已经指出的那样。在大多数情况下对我有用的是：

## 严格执行以下样式规则：

1.  方法不能超过 40 行
2.  [类扇出](http://it.toolbox.com/blogs/enterprise-solutions/design-principles-fanin-vs-fanout-16088)不能超过 20

还有其他的，但我个人发现这些对引导自己远离糟糕的设计最有帮助。限制方法长度迫使您真正考虑方法签名并编写简洁、重点突出的方法。这通常使重复更容易发现和删除。限制类扇出在类层面也有类似的效果，它迫使你认真思考类的角色并使其简洁。

诸如此类的工具[`checkstyle`](http://checkstyle.sourceforge.net/)可以强制执行这两者，以及许多其他样式规则。

[Eclipse](http://www.ibm.com/developerworks/library/os-ecref/#N1029A)和[IDEA IntelliJ](http://www.jetbrains.com/idea/webhelp/extract-method.html)都提供了“提取方法”重构，这使得它就像突出显示要提取的代码并点击快捷键一样简单。IntelliJ 甚至会检查类中是否出现完全相同的代码，并将它们替换为对新方法的调用。事实上，我建议一直使用这样的重构工具，而不是手动复制粘贴和编辑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T09:17:17.773

****让你臃肿的班级看起来干净的*****快速而肮脏的方法（通过将烂摊子移到别处）*****

 ****您可以将方法的内容放在外部实用程序类的静态方法中。

例子：

矩阵.java

```
import MatrixUtils;
//[...]
public class Matrix
{
    //[...]
    Matrix()
    {
        //[...]
    }
    //[...]
    public Gaussian getGaussian(Matrix m)
    {
        return MatrixUtils.computeGaussian(m);
    }
    public LUDecomposition getLUDecomposition(Matrix m)
    {
        return MatrixUtils.computeLUDecomposition(m);
    }
} 
```

MatrixUtils.java

```
protected class MatrixUtils
{
    private MatrixUtils()//Utility class: prevent instantiation
    {//nothing
    }
    //[...]
    protected static Gaussian computeGaussian(Matrix m)
    {
        //do your superlong 100+lines Algorithm and return the result
    }
    public static LUDecomposition computeLUDecomposition(Matrix m)
    {
        //do your superlong 100+lines Algorithm and return the result
    }
} 
```

通过这种方式（如我所说，**又快又脏**），您可以干净地浏览 Matrix 类（尤其是当您有很多方法和 javadoc 时）。

当您想访问实际代码时，您可以使用 MatrixUtils。

如果由于某种原因，每个方法都超长（超过 200 行代码！？）并且如果出于其他原因，您确实需要保持 .java 文件简短，您甚至可以创建一个“静态类” "（即仅具有静态方法的实用程序类）适用于每个 [uber-long] 方法。

...当然，在任何情况下，您都应该在某种程度上进行“程序”重构，正如@oksayt 所提到的，您可以通过将一些代码块放入单独的（但连贯的）函数中来缩短方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T08:50:34.260

“非常大”是什么意思？

我认为该方法不应超过 100 行，类不应超过 1000 行，包括 javadoc。如果您需要更多，请检查您的设计。使用委托，即将你的逻辑分成模块/类，并从另一个类中调用一个类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T09:19:13.447

对于基本的矩阵运算，您可以使用具有合适许可证的开源实现。你可以考虑：-

[http://math.nist.gov/javanumerics/jama/](http://math.nist.gov/javanumerics/jama/)

[http://code.google.com/p/efficient-java-matrix-library/](http://code.google.com/p/efficient-java-matrix-library/)

[http://commons.apache.org/math/](http://commons.apache.org/math/)

这肯定会减少您的整体代码大小，并且您会从更多经过测试、使用过的代码库中受益。

希望这可以帮助。****

# sql - SQL获取整数的最后两位

> ID：10205828
> 
> 赞同：10
> 
> 时间：2012-04-18T08:41:49.260
> 
> 标签：sql, postgresql

我需要获取整数的最后两位数。放置在表格中的每个元素都是一整年，即。`YYYY`我只想要最后两位数字，以便所有字段都显示

```
YEAR
----
09
00
89 
```

初始字段在哪里

```
YEAR
----
2009
2000
1989 
```

编辑：我收到投诉说，

`HINT: No function matches the given name and argument types. You might need to add explicit type casts.`

当我尝试

`select right(cast(year as char),2) from subjects;`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-18T09:13:53.533

Postgres 从 C 中借用（或继承）了模运算符：

```
SET search_path='tmp';

CREATE TABLE lutser ( year integer);

INSERT INTO lutser (year)
        SELECT generate_series(1991,2012)
    ;

SELECT year
    , year / 100 as c2
    , year % 100 AS y2
    FROM lutser
    ; 
```

结果：

```
CREATE TABLE
INSERT 0 22
 year | c2 | y2 
------+----+----
 1991 | 19 | 91
 1992 | 19 | 92
 1993 | 19 | 93
 1994 | 19 | 94
 1995 | 19 | 95
 1996 | 19 | 96
 1997 | 19 | 97
 1998 | 19 | 98
 1999 | 19 | 99
 2000 | 20 |  0
 2001 | 20 |  1
 2002 | 20 |  2
 2003 | 20 |  3
 2004 | 20 |  4
 2005 | 20 |  5
 2006 | 20 |  6
 2007 | 20 |  7
 2008 | 20 |  8
 2009 | 20 |  9
 2010 | 20 | 10
 2011 | 20 | 11
 2012 | 20 | 12
(22 rows) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T08:45:52.637

```
select substring(CAST(2012 as CHAR(4)), 3, 2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T08:46:46.277

我不知道 Postgres 上是否有 LEN 函数，但如果有，试试这个：

```
select SUBSTRING(year,len(year)-1,len(year)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-02T07:13:03.717

您还可以使用以下 SQL 查询：

```
select to_char as year from to_char(current_timestamp, 'YY') 
```

这里我们使用 current_timestamp 中年份的最后两位数

# c++ - 文件属性对话框中的自定义选项卡

> ID：10205830
> 
> 赞同：10
> 
> 时间：2012-04-18T08:41:56.893
> 
> 标签：c++, .net, windows, windows-explorer

我想在 Windows 的文件属性对话框中为某些指定类型显示一些附加信息。例如，为 *.txt 文件添加新选项卡“摘要”并在那里显示字数、行数等。

我可以使用 C++ 和 C#。但是文件摘要是由 .NET 库收集的，所以我希望尽可能将此任务委托给 .NET。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T13:52:47.510

Michale Dunn 写了一系列关于[shell 扩展](http://www.codeproject.com/Articles/830/The-Complete-Idiot-s-Guide-to-Writing-Shell-Extens)的文章，第 V 部分处理自定义属性页。

# c# - if语句不能改变局部变量

> ID：10205831
> 
> 赞同：1
> 
> 时间：2012-04-18T08:41:58.727
> 
> 标签：c#, if-statement

为什么我不能用 if 语句改变值？

```
 int amount;
        string inputbalk = inputbar.Text;

        if (inputbalk== string.Empty)
        {
            amount = Convert.ToInt32(inputbalk);
            amount = 1;
        }

        if (inputbalk != string.Empty)
        {
            amount = Convert.ToInt32(inputbalk);
            amount = 1;
        }

        int onepercent = amount/= 100; 
```

即使我将其设置为 1，它也会通过两个不同的 if 语句将“数量”视为未分配的变量。

如果我调试，我会得到：“错误 1 ​​使用未分配的局部变量 'amount'”

* * *

感谢大家的帮助，它已修复/解决。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T08:45:24.197

只需将第二个 if 更改为 else

```
 if (inputbalk== string.Empty)
        {
            amount = Convert.ToInt32(inputbalk);
            amount = 1;
        }
        else
        {
            amount = Convert.ToInt32(inputbalk);
            amount = 1;
        } 
```

编译器无法确保两个 if 语句之一无论如何都可以工作，因此它会抛出错误，即您的变量数量**可以是** `unassigned`.

无论如何`if/else`，两个代码块之一都将完成，因此编译器不会抛出错误，一切都会按照您的意愿工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T08:55:29.390

但是，您也可能会遇到使用 Convert.ToInt32() 方法的 FormatException。考虑使用 int.tryParse 作为替代方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T08:43:36.613

因为您可能不会进入任何 if 语句，从而将金额保留为未分配。您将在此行收到错误：

```
 int onepercent = amount /= 100; 
```

在编译时，编译器将无法确定是否有任何 if 语句将导致 true 和金额设置。为避免此错误，您可以（在开始时）：

```
int amount=-1; 
```

现在你不会得到你的编译器错误，并且金额的值将在 if 语句中改变。PS（'If' 是一个语句而不是循环）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T08:45:24.383

有可能将 inputbalk 设为 null :)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T08:46:37.977

1.  `if`不是循环*_*
2.  考虑`inputbalk`是`string`，它*可以*是一个`null`，你不检查它，所以*可能*发生它是你的情况。

更改您的代码，如下所示：

```
if (string.IsNullOrEmpty(inputbalk))
{
     amount = Convert.ToInt32(inputbalk);
     amount = 1;
}

else
{
    amount = Convert.ToInt32(inputbalk);
    amount = 1;
} 
```

希望这可以帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-18T08:47:20.923

问题是编译器看不到这个数量是明确分配的。*您*知道 inputBalk 在第一次和第二次评估之间不能改变，并且恰好有一个 if 条件为真，但编译器不会检查这一点。它只看到有一条在使用之前未分配数量的路径，这是不允许的。

您应该使用 if/else 而不是两次测试相同的条件。

```
if (...)
{
    amount = 1;
}
else
{
    amount = 2;
} 
```

现在编译器可以看到通过代码的每条可能路径都会导致数量被明确分配。

还有许多其他优点：代码更简洁、更易于阅读和更易于维护。此外，不进行两次相同的检查会带来轻微的性能优势。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-18T08:48:34.700

给这个爆炸：

```
if (!int.TryParse(inputbar.Text, out amount))
    amount = 1; 
```

# javascript - JQuery 动态脚本标签和执行

> ID：10205834
> 
> 赞同：1
> 
> 时间：2012-04-18T08:42:09.697
> 
> 标签：javascript, jquery, ajax, drupal

目标是为每个 ajax 加载脚本标签，执行脚本并显示脚本标签的内容（带有视频的 iframe）。

场景：场景是一个视频页面。如果我单击“视频文本”，则将确定 dom 中的 id。之后，将使用确定的 id 执行 ajax-php-request。此请求将使用脚本标记进行响应。这就是**问题**所在：我怎样才能得到 iframe？有人给我小费吗？

ajax 调用：

```
$.ajax({
    type: "GET",
    url: "/get-embed-by-id/"+$(this).find('.views-field-nid .field-content').html(),
    success: postToPageTwo,
    error : postToPageTwo,
    datataype: "html",
}); 
```

这个调用返回一个像这样的脚本

```
<script type="text/javascript" src="http://exampleurl.de/video/7"></script> 
```

该脚本的内容例如：

```
(function(){ 
    document.write('<iframe id="video_11" class="mediacube_video" 
     src="http://exampleurl.de/video/11.html?" scrolling="no" 
     align="center" frameborder="0" framespacing="0" width="725" height="409">
     </iframe>');
})() 
```

**编辑** 与 $.getScript 一起使用的代码：

```
$.getScript("http://exampleurl.de/video/5", scriptResponse); 
```

和 scriptResponse 的代码：

```
function scriptResponse(data) {
  console.log("data:");
  console.log(data);
} 
```

但数据始终未定义。还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:44:57.570

jQuery 必须[`.getScript()`](http://api.jquery.com/jQuery.getScript/)为您加载和执行脚本。无需调用 ajax 来返回 html 来加载另一个脚本（这是很多往返）只是为了调用脚本。

```
$.getScript('http://exampleurl.de/video/7'); 
```

* * *

如果初始请求真的很重要（可能在后端进行一些解析以确定脚本的链接），您可以让初始响应仅返回脚本的 url。然后使用返回的字符串`.getScript()`

```
$.get('initial_url',function(returned_url){
    $.getScript(returned_url);
}); 
```

但是，往返太多了。

# php - PHP的奇怪行为

> ID：10205837
> 
> 赞同：-1
> 
> 时间：2012-04-18T08:42:21.427
> 
> 标签：php

根据 ：

```
$ php -a
Interactive shell

php > var_dump("0" != 0); 
bool(false)
php > var_dump(0 != null);
bool(false)
php > var_dump("0" != null);
bool(true) 
```

你能解释为什么最后一个断言是真的吗？

顺便说一句，它是 PHP cli 5.3.6。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T08:42:53.050

因为它是一个值为0的字符串，它并不像你想象的那样为空（包含“0”）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T08:44:10.407

`"0"`不是空值。这是一个字符串。

`""`也不为空。那是一个空字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T08:45:25.747

这并不奇怪，[它已记录在案](http://www.php.net/manual/en/types.comparisons.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T15:01:13.133

```
$ php -a
<?php
var_dump("config~123~123" == true);
bool(true)
var_dump("config~123~123" == 0);
bool(true) 
```

一样，所以逻辑！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T08:45:21.473

这是在手册页[PHP 类型比较表](http://php.net/manual/en/types.comparisons.php)中定义的。

我发现其中一些非常不直观。`"0" == false`例如，因为您可能经常有一个用户输入数字的表格，所以它是迟钝的`0`。现在您需要检查是否使用[isset](http://php.net/isset)设置了字段，而不仅仅是使用`if($field)`. 另请注意`empty("0") == true`！

这就是为什么我用来`===`进行类型检查比较或使用没有自动类型转换的语言的原因。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-18T08:45:22.173

“0”和 0 不是空值。“0”是一个字符串。0 是一个整数。null 是没有值的。

# jakarta-ee - 使用 Apache TomEE 时应用程序启动和配置的工作流程是什么

> ID：10205838
> 
> 赞同：7
> 
> 时间：2012-04-18T08:42:21.443
> 
> 标签：jakarta-ee, openejb, apache-tomee

我了解 Apache TomEE 是一个常规的 Tomcat 安装，其中 openejb 作为 Web 应用程序。

我试图了解所有这些引导程序。我会试着问几个有针对性的问题：

*   有一个应用程序启动顺序重要吗？openejb 应该在我的网络应用程序之前启动，还是相反，或者没关系？
*   与前面的问题有关。企业应用程序如何向 openejb 注册它的 bean，或者 openejb 是否在同一台服务器中四处寻找企业应用程序，以获取 EJB？
*   在非常外行的层面上，当 openejb 是一个不同的 Web 应用程序时，他们如何能够提供作为 EJB 容器的 openejb。（IIRC Tomcat 中的每个 webapp 都有一个不同的类路径，它们不能互相影响）

任何其他重要信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T08:07:25.417

集成是通过以下行引导的`conf/server.xml`：

```
<Listener className="org.apache.tomee.loader.OpenEJBListener" /> 
```

这会在启动任何应用程序之前立即发生。目录中的库`<tomcat-home>/webapps/openejb/lib`被添加到 Tomcat 系统类加载器，安装另一个侦听器以参与部署，从那时起，一切都使用 Tomcat 生命周期中的事件发生。Tomcat 将在应用程序启动（部署）和关闭时发出几个事件。Tomcat 本身使用它们来部署 servlet，本质上集成只是更多相同。包括 Tomcat 在内的其他供应商也使用这些挂钩。从这个角度来看，集成真的很无聊:)

唯一有趣的转折是将额外的库放在一个战争文件中。这样做实际上只是为了尽可能简单地向现有 Tomcat 安装交付和添加额外的库（并且尽可能容易地删除）。来自的所有库`<tomcat-home>/webapps/openejb/lib`都可以轻松进入`<tomcat-home>/lib`. 在这一点上，您可能想要的唯一一件事`webapss/openejb/`就是能够通过 HTTP 调用 EJB。

所以简短的答案是：

*   应用程序启动顺序无关紧要
*   EJB 部署与 Servlet 部署并行发生
*   在 Tomcat 本身启动时，Jars 会立即添加到 Tomcat 系统类加载器中

在另一个答案中要注意的有趣的事情是，Tomcat 实际上在类路径中只有两个 jar 启动。`<tomcat-home>/lib/`Tomcat 本身实际上会在启动时自动添加所有 jar 。我们基本上在做同样的事情，只是从`<tomcat-home>/webapps/openejb/lib`

我不认为我们实际上已经测试过将库移动到`<tomcat-home>/lib/`和删除 openejb webapp（`tomee.war`在即将到来的最终版本中调用），但我会做一个记录来尝试一下。支持甚至默认情况下似乎是一件好事。您可以删除 Tomcat 管理器和 ROOT Web 应用程序，因此也可以轻松删除 openejb.war 似乎是个好主意。

# api - 如何在 phonegap 中实现 Google Auth？

> ID：10205845
> 
> 赞同：3
> 
> 时间：2012-04-18T08:42:35.137
> 
> 标签：api, cordova, login

我必须使用谷歌登录在phonegap中实现我的应用程序的登录。是否有任何api可以做到这一点或教程来指导？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-31T07:42:33.737

这个链接上有一个很好的例子； [http://phonegap-tips.com/articles/google-api-oauth-with-phonegaps-inappbrowser.html](http://phonegap-tips.com/articles/google-api-oauth-with-phonegaps-inappbrowser.html) 我希望它有所帮助

# indexing - 以编程方式加载文档后如何在marklogic中创建索引

> ID：10205846
> 
> 赞同：0
> 
> 时间：2012-04-18T08:42:42.037
> 
> 标签：indexing, marklogic

请帮助我：

以编程方式加载文档后，如何在 marklogic 中创建索引？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:15:01.710

你刚刚做到了。除非您想更改默认索引，否则无需进一步操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T16:55:02.010

如果您询问添加或更改默认索引设置，您可以使用[Admin API](http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/apidoc/admin.xml&category=Admin%20Library)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-28T08:08:44.450

使用 Admin API，您可以创建索引。首先在管理页面的左侧选项卡中单击

`Databases->your database name->click on type of indexes(element,attribute,field,path)`.

然后在右键选项卡中单击**添加**选项卡并指定您的索引详细信息。

# php - PHP框架中多个项目之间的代码重用

> ID：10205851
> 
> 赞同：1
> 
> 时间：2012-04-18T08:43:21.293
> 
> 标签：php, codeigniter, frameworks, code-structure

这是我在这里的第一个问题。:)

我正在开发一个小的 php 框架，并开始考虑在多个项目之间重用相同代码的方法。现在使用这个框架，可以为不同的项目创建多个应用程序目录并使用相同的核心——类似于 codeigniter 2 所做的。

当我需要创建一个与现有网站完全不同但仍会使用其中的类的网站时，我在工作中提出了关于代码重用的问题。

我的前两个想法是使用某种全局“模型”目录来放置多个项目之间共享的文件（并向框架添加选项以加载它们），或者添加从其他项目加载这些“模型”的可能性（ s)。

我想也许其他人有一些更好的想法，并且想知道其他开发人员对该主题的总体看法。

例如，这可能是当前目录结构：

```
live/ - live site
 config/
 controllers/
 helpers/
 models/
 public/
 views/
admin/ - administration (same structure as "live/")
system/ - framework core 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:20:18.937

好吧，我不认为直接从另一个项目加载模型或其他类是一个好主意。如果两个或多个项目共享相同的类，它们应该位于两个项目之外的某个地方。这就是 codeigniter 包派上用场的情况。它允许为您的所有库、模型等设置单独的文件夹，并非常容易地将它们加载到任何 codeigniter 项目中。查看官方文档了解更多详细信息。

# apache-flex - 如何在flex中使用css文件作为图像源？

> ID：10205853
> 
> 赞同：1
> 
> 时间：2012-04-18T08:43:26.630
> 
> 标签：apache-flex, flex3

我有很多应用程序图标，现在它嵌入在脚本标签中，例如：在我的脚本标签中

```
 [Embed(source="/assets/icons/save_it_icon.png")]

    [Bindable] 

    private var saveIcon:Class; 
```

在我的 flex 组件中：

```
<mx:Image  id ="savePaneImg" source="{saveIcon}" 
        buttonMode="true" 
        toolTip="Save comments" 
        click="doSave();" /> 
```

如何将此图像源移动到 css 文件以在不同组件之间重用？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:00:41.630

`source`不是样式属性，不能在 css 中设置。相反，我建议您创建类，所有图像都将存储在其中。

```
[Bindable]
public class IconManager {

    [Embed(source="/assets/icons/save_it_icon.png")]
    public static var saveIcon:Class;

} 
```

用法：

```
<mx:Image  id ="savePaneImg" source="{IconManager.saveIcon}" 
            buttonMode="true" 
            toolTip="Save comments" 
            click="doSave();" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:54:19.523

检查此代码，这将对您有所帮助....

```
public class IconSrc{
  [Embed(source="/assets/icons/save_it_icon.png")] 
  [Bindable]
  private var _icon1:Class
  public static function getSource(icon:String):Class{
    switch(icon){
     case "icon1": return _icon1;break;
      .
      .
      .
    }
  }
}

<mx:Image  id ="savePaneImg" source="{IconSrc.getSource('icon1')}"  
            buttonMode="true"  
            toolTip="Save comments"  
            click="doSave();" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:01:02.263

我建议您查看这篇文章 [如何以正确的方式在 Actionscript 3 / Flex 3 中嵌入图像？](https://stackoverflow.com/questions/1053546/howto-embed-images-in-actionscript-3-flex-3-the-right-way/1053563#1053563)

创建一个类并将所有资产作为静态变量存储在其中。然后从各地访问它们。

# asp.net - 错误：远程服务器返回错误：（401）未经授权

> ID：10205854
> 
> 赞同：28
> 
> 时间：2012-04-18T08:43:35.590
> 
> 标签：asp.net, sharepoint, sharepoint-2010

我想获取互联网图片并插入到 word 中。

我使用这个代码。

```
MainDocumentPart mainPart = wordprocessingDocument.MainDocumentPart;
System.Net.WebRequest request = 
    System.Net.HttpWebRequest.Create("http://spsdev2:1009");

System.Net.WebResponse response = request.GetResponse();
ImagePart imagePart = mainPart.AddImagePart(ImagePartType.Jpeg);
//Send an HTTP request and get the image at the URL as an HTTP response
HttpWebRequest myReq = (HttpWebRequest)WebRequest.Create(fileName);
WebResponse myResp = myReq.GetResponse();

//Get a stream from the webresponse
Stream stream = myResp.GetResponseStream(); 
```

我在 myReq.GetResponse() 中收到错误；

错误：远程服务器返回错误：（401）未经授权。

**编辑**

这段代码对我有用:)

```
myReq.UseDefaultCredentials = true;

myReq.PreAuthenticate = true;

myReq.Credentials = CredentialCache.DefaultCredentials; 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-19T05:20:29.577

我为`HttpWebRequest`.

```
myReq.UseDefaultCredentials = true;
myReq.PreAuthenticate = true;
myReq.Credentials = CredentialCache.DefaultCredentials; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-18T08:48:39.100

您不应该为您的站点提供凭据，而不是传递 DefaultCredentials 吗？

就像是`request.Credentials = new NetworkCredential("UserName", "PassWord");`

另外，删除`request.UseDefaultCredentials = true; request.PreAuthenticate = true;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-07T19:16:00.360

答案确实有帮助，但我认为全面实施这将帮助很多人。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Net;
using System.Text;

namespace Dom
{
    class Dom
    {
        public static string make_Sting_From_Dom(string reportname)
        {
            try
            {
                WebClient client = new WebClient();
                client.Credentials = CredentialCache.DefaultCredentials;
                // Retrieve resource as a stream               
                Stream data = client.OpenRead(new Uri(reportname.Trim()));
                // Retrieve the text
                StreamReader reader = new StreamReader(data);
                string htmlContent = reader.ReadToEnd();
                string mtch = "TILDE";
                bool b = htmlContent.Contains(mtch);

                if (b)
                {
                    int index = htmlContent.IndexOf(mtch);
                    if (index >= 0)
                        Console.WriteLine("'{0} begins at character position {1}",
                        mtch, index + 1);
                }
                // Cleanup
                data.Close();
                reader.Close();
                return htmlContent;
            }
            catch (Exception)
            {
                throw;
            }
        }

        static void Main(string[] args)
        {
            make_Sting_From_Dom("https://www.w3.org/TR/PNG/iso_8859-1.txt");
        }
    }
} 
```

# android - 显示 Activity 后执行 AsyncTask

> ID：10205855
> 
> 赞同：3
> 
> 时间：2012-04-18T08:43:35.680
> 
> 标签：android, asynchronous

我正在开发一个 Android 3.1 应用程序。

我想执行显示`AsyncTask`后的活动。我想在执行之前向用户展示一些东西`AsyncTask`。

我读过不建议`AsyncTask`在`onCreate()`.

`AsyncTask`我必须在哪里执行`onStart()`or `onResume()`？

我想在执行之前留出足够的时间来显示活动。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T08:50:09.377

`onCreate()`，`onStart()`并且`onResume()`是操作系统调用的生命周期方法，不应直接调用。但是，您可以覆盖它们以在活动生命周期的这些阶段执行您的代码：

![在此处输入图像描述](../Images/f6a36f2b503c9130f6ad7605f3f51ec1.png)

但是，如果您希望 AsyncTask 在所有`View`s 都被充气并绘制到屏幕上之后启动，那么您需要将代码放入：

```
 toReturn.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

        public void onGlobalLayout() {
            toReturn.getViewTreeObserver().removeGlobalOnLayoutListener(this);
            // asyncTask.execute();
        }
    }); 
```

在上面的示例`toReturn`中是 onCreate() 方法中的一个视图。它可以是您喜欢的任何视图。

这会从视图中拉出一个`ViewTreeObserver`并添加一个侦听器，当视图完成绘制到屏幕时将调用该侦听器。保留“removeGlobalOnLayoutListener()”行很重要，因为这将在**每次**绘制视图时停止代码触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:15:28.400

答案在`onResume()`

我在我的活动中有同样的要求，我需要显示一些带有其他按钮和图像的列表。列表正在从服务器获取数据，因此使用 AsyncTask 来实现。

但在此之前需要显示空列表视图和屏幕的其他部分..

所以首先当它转到`onCreate()`我设置`empty arraylist`为listview的适配器然后`onResume()`调用Asynctask并在该任务中填充ArrayList并调用`adapter.notifyDataSetChanged()`

然后另一个问题发生了..当我去下一个活动并回来时，即使我不需要它也总是调用异步任务..

所以已经设置了一些条件，比如`if(arrayList.size()==0)`然后调用 asynctask`else`不要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T08:50:27.663

您可以将您的代码放在 onWindowsFocusChanged 方法中。您可以使用其中的线程来管理计时器以启动您的特定异步任务。请注意，每次您的活动获得焦点时都会执行此操作，而不仅仅是您第一次启动活动时（我不知道这对您来说是否有问题）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-18T08:46:39.843

实现一个`View`对象并覆盖`onDraw()`.
这样您就可以准确地知道用户何时可以看到第一个屏幕

# android - 如何将外部发光/光环绘制到 Android 按钮或列表项

> ID：10205856
> 
> 赞同：0
> 
> 时间：2012-04-18T08:43:35.967
> 
> 标签：android, android-layout

我最近遇到了一个关于 Android Button 和 ListView 项目的非常具体的问题/要求。要求是这样的：

*   我们需要一个可以在单击时显示特定尺寸和不透明度的发光/光环的按钮，但是这种发光/光环不能是按钮本身的一部分，并且需要显示在相邻视图上。
*   列表视图项目的相同要求 - 它们需要在其相邻项目和列表视图边距上发光。

任何想法/建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:01:08.153

一个解决方案可能是在按钮周围绘制一个带有笔划的圆形矩形。您可以使用 View *getTop()*、*getLeft()*、*getRight()*和*getBottom()*方法获取按钮位置。

圆形矩形可以是覆盖了*onDraw()方法的自定义视图。*你也可以有一个paint属性，在这个视图中，如果你添加渐变和不透明度，看起来更像一个光环。当您第一次创建视图时，它应该是不可见或透明的，并且只有在需要时才会出现。

从您的主要活动中，您必须使用*layout.addView()添加这个新视图*方法，根据您的要求，您可以使其可见和/或更改其属性。

可以在这里找到一个示例：[https](https://github.com/codesorcerers/auraview)

://github.com/codesorcerers/auraview 希望这会有所帮助！
波格丹波帕

# c - 关于 Linux C - UUID

> ID：10205860
> 
> 赞同：-2
> 
> 时间：2012-04-18T08:43:42.573
> 
> 标签：c, linux, uuid

```
#include <stdio.h>
#include <stdlib.h>  
#include <uuid/uuid.h>

int main(void) {
    puts("!!!Hello World!!!"); /* prints !!!Hello World!!! */
    uuid_t uuid;
    int uuid_generate_time_safe(uuid);
    printf("%x",uuid);
    return EXIT_SUCCESS;
} 
```

我只是想知道为什么 uuid 不是 16 字节长？我用DEBUG查看内存，确实不是16字节。我使用 libpcap 开发我的程序，uuid 不是唯一的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T08:55:11.937

我刚刚在我的系统上尝试了你的程序，`uuid` *长度为*16 个字节。但是你的程序没有显示它的大小。

该行：

```
int uuid_generate_time_safe(uuid); 
```

不是对`uuid_generate_time_safe`函数的调用，它是该函数的*声明*，带有`uuid`单个参数的（忽略的）名称。（而且这种函数声明在 1999 年标准中甚至无效，该标准放弃了旧的“隐式`int`”规则。）

您的`printf`电话：

```
printf("%x",uuid); 
```

有未定义的行为；`"%x"`需要类型的参数`unsigned int`。

如果您查看`/usr/include/uuid/uuid.h`，您会看到 的定义`uuid_t`是：

```
typedef unsigned char uuid_t[16]; 
```

`uuid_generate_time_safe`(见)的正确声明`man uuid_generate_time_safe`是：

```
int uuid_generate_time_safe(uuid_t out); 
```

您不需要在自己的代码中声明；它由`#include <uuid/uuid.h>`. 因为`uuid_t`是数组类型，所以参数实际上是 type `unsigned char*`，这就是为什么函数似乎能够修改其参数的原因。

这是一个更正确的程序，说明了该函数的使用：

```
#include <stdio.h>
#include <uuid/uuid.h>

int main(void) {
    uuid_t uuid;
    int result = uuid_generate_time_safe(uuid);
    printf("sizeof uuid = %d\n", (int)sizeof uuid);
    // or: printf("sizeof uuid = %zu\n", sizeof uuid);
    if (result == 0) {
        puts("uuid generated safely");
    }
    else {
        puts("uuid not generated safely");
    }
    for (size_t i = 0; i < sizeof uuid; i ++) {
        printf("%02x ", uuid[i]);
    }
    putchar('\n');
    return 0;
} 
```

在我的系统上，我得到以下输出：

```
sizeof uuid = 16
uuid not generated safely
26 9b fc b8 89 35 11 e1 96 30 00 13 20 db 0a c4 
```

有关为什么会出现“uuid 未安全生成”消息的信息，请参阅手册页。

请注意，我必须安装该`uuid-dev`软件包才能构建和运行该程序。

# .net - SQL Server：如何在应用程序运行时避免或检测数据库还原

> ID：10205861
> 
> 赞同：1
> 
> 时间：2012-04-18T08:43:47.363
> 
> 标签：.net, sql-server, nhibernate, database-restore, hilo

在数据库恢复之前，需要关闭我正在处理的系统。如果客户不这样做，他可能会遇到严重的问题，因为应用服务器的内存状态与数据库不匹配。损坏的数据库导致错误并且系统停止工作并且数据库无法使用可能需要一些时间。

所以我尝试检测这种情况并避免问题。

*   **应用程序服务器不一定保持连接活动**，因此单用户模式和类似的东西很可能不会有帮助。
*   我不在乎还原是否会失败或服务器是否会关闭或其他任何事情。**它只是不应该忽视它**。
*   数据库可以通过任何机器上的任何 sql server 工具恢复。我不能依赖我自己的工具。

有人已经解决了这样的问题吗？

我正在使用 SQL Server 2005 及更高版本、.NET (C#)、SMO。

* * *

**编辑：**

由于对应用程序设计的一些误解和讨论，我需要解释一下问题出在哪里。

**Hi-Lo 生成器**：该应用程序使用 NHibernate，它具有**Hi-Lo id 生成器**的 Hi-Values 缓存。Hi-Values 从数据库中读取并允许应用程序生成特定数量的主键，直到它需要返回数据库并获取另一个数字范围。存储在数据库中的 Hi-Values 只会增加，而不会减少（除非恢复旧版本的数据库）。这是 Hi-Lo 发生器的概念，**不是我自己发明的，也不是我自己实现的**。

**缓存**：在缓存中，主键用于标识数据库中的记录。在正常使用数据库时，主键永远不会改变。在还原的情况下，主键不再标识相同的记录，并且缓存完全错误。它**甚至无法检测到这一点**。例如，它可能会导致在新记录中设置错误的外键。

**无法将数据库还原与**数据库的任何其他正常使用进行比较。还原破坏了所有数据处理规则。

我想许多应用程序在运行时保持连接打开，因此无法恢复。大多数其他应用程序可能会在数据库恢复时崩溃，然后它会尝试访问数据库。就我而言，它可能会继续运行一段时间，这是一个问题。

我猜大多数人甚至不会在应用程序运行时尝试恢复数据库。

理论上，在我的案例中证明，当应用程序仍在内存中时恢复数据库时出现完全错误的风险。我不想被告知这根本不是问题，只是因为大多数应用程序不处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:35:07.453

当 SQL Server 中的数据库有任何连接时，您无法对其进行完全还原。

SQL Server 永远不会允许自己破坏 SQL Server 的内存状态。而且您必须非常努力地工作才能将其欺骗成这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:26:52.540

不知道您是如何连接到数据库的，您可以在连接逻辑中构建一个在单独的状态或系统数据库中运行的检查，以验证数据库的状态。

也许围绕连接进行尝试/捕获，并在失败时检查状态并将其报告给此时的用户；不确定您恢复的频率，因此确定代码中的最佳位置需要一些思考。

```
SELECT DATABASEPROPERTYEX ('DatabaseName', 'Status') 
```

[http://msdn.microsoft.com/en-us/library/ms186823.aspx](http://msdn.microsoft.com/en-us/library/ms186823.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T05:38:25.410

我没有得到有用的答案，所以我认为这个问题没有通用的解决方案。

我只看到两种解决方法：

*   在每个事务开始时执行查询以查看数据库是否是另一个数据库。例如，上次按[此处所述](http://www.mssqltips.com/sqlservertip/1724/when-was-the-last-time-your-sql-server-database-was-restored/)恢复的时间。这可能会损害性能，也可能是权限问题
*   我打开了一个与数据库的“保持活动”连接，以避免数据库被恢复。这可能更容易实现。这不是很好，因为它浪费了连接。

# html - 如何创建全覆盖径向渐变？

> ID：10205867
> 
> 赞同：6
> 
> 时间：2012-04-18T08:44:14.693
> 
> 标签：html, css

我正在使用类似于以下的 CSS 代码来创建径向渐变背景：

```
body
{
background-color:   #0176A0;
background-image:   -moz-radial-gradient(center, ellipse cover, #029CC9 0%, #005077 100%);
background-image:   -webkit-radial-gradient(center, ellipse cover, #029CC9 0%, #005077 100%);
background-image:   -o-radial-gradient(center, ellipse cover, #029CC9 0%, #005077 100%);
background-image:   -ms-radial-gradient(center, ellipse cover, #029CC9 0%, #005077 100%);
background-image:   radial-gradient(center, ellipse cover, #029CC9 0%, #005077 100%);
filter:             progid:DXImageTransform.Microsoft.gradient(startColorstr = '#029CC9', endColorstr = '#005077', GradientType = 0);
} 
```

但结果不是预期的！我的目标是拥有一个覆盖整个视口的径向渐变背景。我可以使用`background-size`属于 CSS3 规范一部分的属性来获得更好的结果，但不幸的是，这个属性在 IE 中不起作用？
请问有人有想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T16:45:20.687

将此添加到您的 CSS 中：

```
html {
    height: 100%
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-05T14:51:17.097

更好的是：

```
html {
    min-height: 100%;
} 
```

这将使渐变扩展到您的内容高度，否则它将仅限于窗口高度。

# windows - 如何确定网络服务器运行的是 Linux 还是 Windows？

> ID：10205870
> 
> 赞同：8
> 
> 时间：2012-04-18T08:44:23.010
> 
> 标签：windows, linux

有人要求我查明某个特定站点是否运行 Windows 或 Linux 作为其网络服务器——通常我们可以访问，我只需上传一个 phpinfo 文件，这将为我提供我需要的所有相关信息——但是我们还不能访问 FTP 详细信息。

是否有一种使用 Firefox 插件（如 Web Developer Toolbar）的简单方法来指示服务器是否正在运行 Windows/Linux 等？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-20T20:55:05.580

您通常可以通过查看 HTTP 标头来获得一些非常好的线索，您可以使用 curl（使用 -I 标志）来做到这一点。例如，

```
$ curl -I www.microsoft.com
HTTP/1.1 200 OK
Cache-Control: private
Content-Length: 0
Server: Microsoft-IIS/8.0
P3P: CP="ALL IND DSP COR ADM CONo CUR CUSo IVAo IVDo PSA PSD TAI TELo OUR SAMo CNT COM
INT     NAV     ONL PHY PRE PUR UNI"
X-AspNet-Version: 2.0.50727
VTag: 279958544400000000
X-Powered-By: ASP.NET
X-Powered-By: ARR/2.5
X-Powered-By: ASP.NET
Date: Fri, 20 Sep 2013 20:50:16 GMT 
```

注意上面说的那一行`Server: Microsoft-IIS/8.0`。相比之下，尝试：

```
$ curl -I www.php.net
HTTP/1.1 200 OK
Date: Fri, 20 Sep 2013 20:53:05 GMT
Server: Apache/2.2.21 (FreeBSD) mod_ssl/2.2.21 OpenSSL/0.9.8q PHP/5.4.16-dev
X-Powered-By: PHP/5.4.16-dev
Content-language: en
Set-Cookie: COUNTRY=USA%2C173.203.108.101; expires=Fri, 27-Sep-2013 20:53:05 GMT; path=/;     
domain=.php.net
Last-Modified: Sat, 21 Sep 2013 02:21:12 GMT
Vary: User-Agent,Accept-Encoding
Connection: close
Content-Type: text/html;charset=utf-8 
```

而且，很明显这是一个 LAMP 设置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-28T23:20:12.757

您可以使用诸如[BuiltWith 之](http://builtwith.com/)类的技术分析器来获取此信息以及许多其他信息。

它还带有一个[Chrome 扩展程序](https://chrome.google.com/webstore/detail/builtwith-technology-prof/dapjbgnjinbpoindlpdmhochffioedbn?hl=en)。它告诉您服务器，尽管正如其他人所说，Apache 可以在 Win 和 Linux 上运行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-18T08:46:15.357

并不总是有效，但您可以尝试为不存在的页面输入地址。如果他们没有自定义 404 错误，您也许可以看到它是什么。

# mysql - SQL - 转换日期时间格式

> ID：10205873
> 
> 赞同：5
> 
> 时间：2012-04-18T08:44:48.743
> 
> 标签：mysql, datetime-format

我尝试在 MySQL 上更改日期时间格式

T 得到了一个包含一些列的历史表，其中一些列都具有这种格式 DATETIME ：

```
JJ/MM/AAAA HH:MM 
```

我需要更改为：

```
AAAA-MM-JJ HH:MM:SS 
```

我没有 SS 的变量，我想取 00。

例子

```
01/12/2012 12:23 > 2012-12-01 12:23:00 
```

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T08:56:13.617

您需要为此使用格式功能

对于上面你可以使用

```
SELECT DATE_FORMAT([YOURCOLUMNNAME],'%Y-%m-%d %h:%i:%s') from [YOURTABLENAME]; 
```

您可以参考的所有转换。

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T08:50:48.607

使用**[date_format()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)**函数

试试下面：

```
 SELECT  date_format(columnname,'%Y-%m-%d %h:%i:%s') as yourdate FROM tablename 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-21T05:25:57.217

发布的答案都不起作用，因为您的数据不会被识别为日期。改用字符串转换：

```
UPDATE tablename SET columnname = CONCAT(SUBSTR(columnname,7,4),'-',SUBSTR(columnname,4,2),'-',SUBSTR(columnname,1,2),SUBSTR(columname,11),':00'); 
```

希望这可以帮助

# android - Android SQLite 数据库连接不成功

> ID：10205874
> 
> 赞同：0
> 
> 时间：2012-04-18T08:44:51.297
> 
> 标签：android, database, sqlite, connection

我当前的项目遇到了一个小问题。我正在做一个需要连接到 SQLite 数据库才能完成某些语句的 android 应用程序。我相信陈述等都很好，我唯一的问题是与数据库的连接不成功。

LogCat 错误：

```
04-18 08:20:30.688: E/Database(304): sqlite3_open_v2("jdbc:sqlite:res/raw/randomdb.db", &handle, 1, NULL) failed 
```

所以到目前为止我连接数据库的代码是这样的：

```
String url = "jdbc:sqlite:res/raw/randomdb.db";
            SQLiteDatabase db;
            db = SQLiteDatabase.openDatabase(url, null, SQLiteDatabase.OPEN_READONLY); 
```

如您所见，我正在尝试访问位于我的 project/res/raw 文件夹中的数据库。有没有人看到错误？

**！！！更新！！！** **我尝试使用 SQLiteOpenHelper，但仍然遇到一个我似乎无法解决的错误。这是我的新代码：* *

```
public class DatabaseAdapter extends SQLiteOpenHelper {
    private static String dbPath= "data/data/com.YourPackageName/applicationDb/"; 
    private static String dbName = "YourDBName"; 
    private SQLiteDatabase applicationDatabase;  
    private final Context applicationContext;

    private boolean checkDataBase(){  
        File dbFile = new File( dbPath +  dbName);
        return dbFile.exists();
    }

    public void openDataBase() throws SQLException{
        String fullDbPath= dbPath + dbName;
        applicationDatabase = SQLiteDatabase.openDatabase( fullDbPath,null,SQLiteDatabase.OPEN_READONLY);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) { 
    }
} 
```

我收到此错误： *默认构造函数未定义隐式超级构造函数 SQLiteOpenHelper()。必须定义一个显式构造函数有* 什么想法吗？会很好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:18:39.510

我认为您指定的路径不正确，因此如其他答案之一所述，找不到数据库。但是我从来没有使用过从文件夹`openDatabase`中读取的方法，`raw`所以我不知道哪个是正确的路径。

然而，曾几何时，我将数据库与我的应用程序一起交付。它驻留在`assets`文件夹中，一旦应用程序启动，我将它复制到私有应用程序存储中（很像任何使用`SqliteOpenHelper`. 从那时起，我使用通常的方式`SqliteOpenHelper`来访问数据库。

基本上为此，我遵循了这个[线程](https://stackoverflow.com/questions/513084/how-to-ship-an-android-application-with-a-database)中提到的博客，因为我的数据库文件大于 1MB，所以我使用了这个[线程](https://stackoverflow.com/questions/2860157/load-files-bigger-than-1m-from-assets-folder)中描述的技术。希望将这两者结合起来，您将使您的数据库运行起来！

**编辑**顺便说一句，你错了，[`openDatabase`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#openDatabase%28java.lang.String,%20android.database.sqlite.SQLiteDatabase.CursorFactory,%20int,%20android.database.DatabaseErrorHandler%29)不接受 url，但路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:53:22.093

如果你想将你的 android 应用程序与 SQLite 数据库连接，那么你需要扩展 SQLiteOpenHelper

```
 public class AbcClass extends SQLiteOpenHelper 
```

之后，您需要覆盖这些方法： **onCreate**和**onUpgrade** 以及 AbcClass 的构造函数如下所示：

```
public AbcClass(Context context) {
    super(context, DB_NAME, null, VERSION); //public static final String DB_NAME = "test.sqlite";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T08:53:27.240

```
 public boolean databaseExist()
    {
        File dbFile = new File(DB_PATH + DB_NAME);
        return dbFile.exists();
    }

This is the solution... 
```

或者 - - - - - - - - - - - -

```
private boolean checkDataBase(){

    SQLiteDatabase checkDB = null;

    try{
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }catch(SQLiteException e){

        //database does't exist yet.

    }

    if(checkDB != null){

        checkDB.close();

    }

    return checkDB != null ? true : false;
} 
```

# android - Android：如何保护读取/复制/删除视频文件？

> ID：10205877
> 
> 赞同：1
> 
> 时间：2012-04-18T08:44:58.907
> 
> 标签：android, video, store, protection

我想问是否（或如何）可以将视频文件存储到我的应用程序中。但是没有人可以访问这些文件。我发现我无法将视频文件存储在数据库中......那么我该如何保护我的文件？谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:50:17.110

我从未尝试过，但我认为您可以通过文件权限来实现这一点。

看看[http://developer.android.com/reference/java/io/File.html](http://developer.android.com/reference/java/io/File.html)（`setReadanble()`等）

# html - 如何为输入及其标签添加 td 到 css 样式？

> ID：10205881
> 
> 赞同：0
> 
> 时间：2012-04-18T08:45:11.433
> 
> 标签：html, css

我想在表格中添加一些输入以满足对齐需要。但是这种风格不起作用并停止了。我如何将 td 添加到这种 css 样式中。例如，像这样：

```
 <p>Stuff you like:</p>
            <table>
                <tr>
                    <td>
                        <label for="css3">CSS3</label>
                    </td>
                    <td>
                        <input type="checkbox" value="css3" id="css3" /> 
                    </td>
                </tr>
            </table><!-- It does not work-->

            <p><input type="checkbox" value="HTML5" id="html5" />
<label for="html5">HTML5</label></p>
            <p><input type="checkbox" value="JavaScript" id="javascript" />
<label for="javascript">JavaScript</label></p>
            <p><input type="checkbox" value="Other" id="other" /> 
<label for="other">Other</label></p>
<!--But it work-->

/*CSS*/
input:hover + label, input:focus + label,
input + label:hover, input:focus + label{
text-shadow: 1px 1px 3px #000;
color: #2C7AD0; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:05:57.197

您的 HTML 代码在哪里？它看起来怎样？你尝试的东西不会给你带来结果。您是将输入放入标签标签还是倒置？这就是你的 CSS 代码的样子。而“+”肯定只用于 javascript，而不是 CSS。

由于您还没有发布您的 HTML，我只能猜测，但您的 CSS 应该看起来像：

```
input:hover label, input:focus label,
input label:hover, input:focus label {
text-shadow: 1px 1px 3px #000;
color: #2C7AD0; 
} 
```

或者很可能

更新（使用这个，这应该工作）：

```
input, input:hover, input:focus, label,
label:hover, label:focus {
text-shadow: 1px 1px 3px #000;
color: #2C7AD0; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:09:30.700

使用表格标记，该`label`元素与您的任何选择器都不匹配。和元素根本不是兄弟姐妹`label`。`input`你需要一些完全不同的东西。以下适用于“悬停”部分的常规 CSS 警告：

```
tr:hover label { ... } 
```

关于“焦点”部分，由于结构的限制，恐怕你不能使用纯 CSS：你不能让一个元素的焦点状态影响它之前的元素的渲染。您需要为此使用 JavaScript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T08:50:18.273

使用 jquery 检查此代码

```
var option = {
  x:      1, 
  y:      2, 
  radius: 3,
  color:  "#ccff00"
}

$("#yourelems").textShadow( option );
$("#yourelems").css("color","red"); 
```

# android - 如何实现退出按钮行为？

> ID：10205894
> 
> 赞同：0
> 
> 时间：2012-04-18T08:45:38.600
> 
> 标签：android, android-activity

在我的应用程序中，我有退出按钮来退出应用程序。所以我有`finish()`所有的活动。但我失去了 h/w 后退按钮的行为。所以我的问题是：我想回到所有活动，也想在点击退出按钮时退出..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T08:57:19.610

你的问题有点令人困惑，但我认为你需要这个

[按下后退按钮时完成所有活动](https://stackoverflow.com/questions/10028667/finish-all-activities-when-back-button-is-pressed/10028853#10028853)

并且永远不要使用 system.exit 退出应用程序[关闭应用程序并在 Android 上启动主屏幕](https://stackoverflow.com/questions/2042222/close-application)

## 已编辑

* * *

```
editButton.setOnClickListener(new View.OnCLickListener()
{
       public void onClick(View v) {
        finish();
        Intent intent = new Intent(Intent.ACTION_MAIN); 
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
        intent.addCategory(Intent.CATEGORY_HOME); 
        startActivity(intent);

       }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:47:55.680

```
System.exit(1) 
```

可能有帮助..争论很重要..您也可以尝试[这种](https://stackoverflow.com/questions/9937120/switching-between-activities-in-android/9937281#9937281)方法..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T08:52:44.650

您可能想要覆盖`onBackPressed()`方法并`finish()`在其中调用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T09:04:03.647

使用下面的代码......我希望它能工作

```
ActivityManager am = (ActivityManager) this.getSystemService(ACTIVITY_SERVICE);
    List<ActivityManager.RunningTaskInfo> taskInfo = am.getRunningTasks(1); 
    ComponentName componentInfo = taskInfo.get(0).topActivity;
    am.restartPackage(componentInfo.getPackageName()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-03T19:01:25.163

/** 我发现和工作的最简单的方法。`onclick="exitBtn"`在 XML 文件中设置按钮。并在 java*/ 中定义该按钮

```
public void exitBtn(View v) {

    AlertDialog.Builder builder = new AlertDialog.Builder(OderActivity.this); // this will pop up a dialog box for OK or Cancel//
    builder.setMessage("Do you want to exit");
    builder.setCancelable(true);
    builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialogInterface, int i) {
            Intent intent = new Intent(Intent.ACTION_MAIN);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            intent.addCategory(Intent.CATEGORY_HOME);
            startActivity(intent);
            finish();

        }
    });
    builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialogInterface, int i) {
            dialogInterface.cancel();
        }
    });

    AlertDialog alert = builder.create();
    alert.show();
} 
```

# html - 使用 CSS3 倾斜边框的 Div？

> ID：10205895
> 
> 赞同：20
> 
> 时间：2012-04-18T08:45:50.863
> 
> 标签：html, css, css-shapes

我正在创建一个 javascript 小部件来调整相邻 div 的大小，以便在用户将鼠标悬停在 div 上时显示更多的背景图像。这很简单，并且可以很好地与具有直边的 div 配合使用（显然）。然而，边界边缘“需要”倾斜。

有没有一种简单的方法使用 css3 在 2 个 DOM 元素之间制作倾斜边框？

我遇到过 css3 转换（即倾斜）和对角线边框技巧（使用半色半透明），但这些似乎都无法达到我的需要。

我想要达到的效果就像这张图片：

![dom元素之间的对角线边界](../Images/18a7530da1e14866fc1755958c7d0bf4.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T09:09:35.253

您可以在技术上将您的图像嵌入到一个旋转的（参见 CSS3's `transform: rotate(<X>deg)`）`<div/>`中，然后以反向角度旋转嵌入的图像。

或者，您可以使用 SVG (with `<clipPath>`) 来实现此效果。此外，嵌入`<object/>`标签中的 SVG 可以使用 JavaScript，因此响应式部分可以成为骑行的一部分。

两个 JSFiddle 都在路上。

EDIT1：CSS 版本： http: [//jsfiddle.net/kU3tu/](http://jsfiddle.net/kU3tu/)
EDIT2：SVG 版本：http: [//jsfiddle.net/b2JJK/](http://jsfiddle.net/b2JJK/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T09:40:56.220

我已经从我身边尝试过，可能对你有帮助。

**HTML**

```
<div class="container">
<div class="imageWrap ro">
    <div class="pic"></div>
</div>
<div class="imageWrap">
    <div class="pic2"></div>
</div>
</div>​ 
```

**CSS**

```
.container{
    width:600px;
    height:400px;
    border:1px solid red;
    overflow:hidden;
    white-space:nowrap;
}
.imageWrap{
    width:300px;
    display:inline-block;
    height:500px;
    position:relative;
    width:400px;
    vertical-align:top;
    margin-left:-70px;
}
.imageWrap.ro{
    border-right:5px solid red;
    -webkit-transform:rotate(15deg);
    -moz-transform:rotate(15deg);
    transform:rotate(15deg);
    overflow:hidden;
    z-index:1;
    margin-left:-100px;
    margin-top:-80px;
}
.pic{
    background:url('http://lorempixel.com/output/nightlife-q-c-746-711-9.jpg');
    -webkit-transform:rotate(-15deg);
    -moz-transform:rotate(-15deg);
    transform:rotate(-15deg);
    width:640px;
    height:640px;
    position:absolute;
    left:-50px;
}
.pic2{
    width:400px;
    height:400px;
    background:url('http://lorempixel.com/output/sports-h-c-609-626-7.jpg');
} 
```

​</p>

检查这个[http://jsfiddle.net/fZMuJ/5/](http://jsfiddle.net/fZMuJ/5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T09:04:11.727

我能想到的解决方案是使用两个绝对定位的图像和一个将溢出设置为隐藏的 div 容器。

红色和绿色是图像（红色的可能比顶部更短，绿色的可能比底部更短，因为这些部分无论如何都不可见）。蓝色是溢出的容器：隐藏。

[图片](http://i.stack.imgur.com/e6Cpx.png)

但是此解决方案需要旋转图像，这可能不适合您使用。

第二种解决方案是使用一个图像和一个分隔符 div 只是一个旋转的边框。但是在这种情况下，无论如何您都可以在不需要破解之前准备适当的图像。

# magento - 从管理员创建订单时，Magento 访问被拒绝错误

> ID：10205903
> 
> 赞同：0
> 
> 时间：2012-04-18T08:46:32.730
> 
> 标签：magento

特定角色的用户无法在 Magento 管理员中创建订单，他们会收到“拒绝访问”错误。

缓存被禁用，甚至对于新用户也存在，所以 cookie 在这里不是问题。

我无法将其追溯到代码库中的任何最新更改，并且我不知道它是如何蔓延的。关于我应该如何解决这个问题的任何指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T07:03:34.810

通过创建具有完全相同权限的新角色然后将所有用户移至该角色来解决该问题。

# php - Magento get function trough php

> ID：10205911
> 
> 赞同：0
> 
> 时间：2012-04-18T08:47:01.737
> 
> 标签：php, magento

I am trying to get some data from Magento trough php, it works but I need to add multiple collections and now I am stuck. I am just a beginner so please forgive me :-)

I am using below code to get customer details, this works ok. Now I need to add the customer/address to get the address details to fill the last column with the zipcode, anybody know how to do that?

```
<?php
function getcustomers() {
    /* Magento's Mage.php path
     * Mage Enabler users may skip these lines
     */
    require_once ("app/Mage.php");
    umask(0);
    Mage::app("nl");
    /* Magento's Mage.php path */

    /* Get customer model, run a query */
  $collection = Mage::getModel('customer/customer')
    //$collection = Mage::getModel('customer/address')
                  ->getCollection()
                  ->addAttributeToSelect('*');

    $result = array();
    foreach ($collection as $customer) {
        $result[] = $customer->toArray();
    }

    return $result;
}
?>
<html>
<head>
<title>Customers</title>
<style>
table {
    border-collapse: collapse;
}
td {
    padding: 5px;
    border: 1px solid #000000;
}
</style>
</head>
<body>
<table>
<tr>
    <td>ID</td>
    <td>Lastname</td>
    <td>Firstname</td>
    <td>Email</td>
    <td>Is Active?</td>
    <td>Date Created</td>
    <td>Date Updated</td>
    <td>Website ID</td>
    <td>Store ID</td>
    <td>Zip Code</td>
</tr>
<?php
$result = getcustomers();
if(count($result) > 0){
    foreach($result as $key => $value){
        echo "<tr>";
            echo "<td>".$value['entity_id']."</td>";
            echo "<td>".$value['lastname']."</td>";
            echo "<td>".$value['firstname']."</td>";
            echo "<td>".$value['email']."</td>";
            echo "<td>";
            echo $value['is_active'] == 1 ? "Yes" : "No";
            echo "</td>";
            echo "<td>".$value['created_at']."</td>";
            echo "<td>".$value['updated_at']."</td>";
            echo "<td>".$value['website_id']."</td>";
            echo "<td>".$value['store_id']."</td>";
            echo "<td>".$value['zipcode']."</td>";
        echo "</tr>";
    }
}else{
    echo "<tr><td colspan=\"7\">No records found</td></tr>";
}
?>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:49:23.330

Just want to say that I'm currently learning Magento, so my answer will not be totally working! I hope it'll help to push you in the right direction.

Just a note, you can just use `$customer->getData()` to return an array.

Then you can use `$customer->getId()` to get the id. Which you can then pass into the Address model

```
foreach($collection as $customer){
  // You have an instance of the Customer already, so we can just use a magic get method
  $cid = $customer->getId();

  // Let's load this customers address, using a chain. Load the model (instantiate the class), then call load with the customer id
  // You might want to check the alias on 'customer' to ensure it has address. You can find this in /app/code/core/Mage/Customer/etc/config.xml ln.251
  $address = Mage::getModel('customer/address')->load($cid);
  // Maybe we should look in here just in case - for debugging
  var_dump($address); // or echo get_class($address);
  // Here I would try one of the magic setter methods, which map to set<Thing> so you can play with this to see if it'll work
  $address->setZipCode('12345');
  // Then we should be able to save it, I think, this bit I'm not sure on.
  $address->save();
} 
```

As I say, this is just what I've learnt from the Magento U videos over the last week, hope it works!

# windows-phone-7 - 想要将故事板目标属性设置为滚动查看器的水平偏移量

> ID：10205912
> 
> 赞同：1
> 
> 时间：2012-04-18T08:47:09.863
> 
> 标签：windows-phone-7, c#-4.0, silverlight-4.0, windows-phone-7.1

我在我的应用程序中使用滚动查看器，它以水平视图显示图像。我需要在滚动时使用动画，就像在这个视频中一样如何实现这一点

[http://www.youtube.com/watch?v=XVHVBMeqL24](http://www.youtube.com/watch?v=XVHVBMeqL24)

我试过这个

```
 public Storyboard CreateAndApplyStoryboard(UIElement targetElement)
    {

        Storyboard sb = new Storyboard();

        DoubleAnimation animation =
            new DoubleAnimation { From = 0, To = 500, Duration = new Duration(TimeSpan.FromSeconds(1.0)) };

        //ExponentialEase ese = new ExponentialEase();
        //ese.EasingMode = EasingMode.EaseIn;
        //animation.EasingFunction = ese;
        Storyboard.SetTarget(animation, targetElement);
        Storyboard.SetTargetProperty(animation,
            new PropertyPath(ScrollViewer.HorizontalOffsetProperty));

        sb.Children.Add(animation);
        return sb;
    } 
```

我只是展示我需要从水平偏移量 0 滚动到 500 的示例

如何使用依赖属性？

```
 <scrollviewer name="scroll">
  <StackPanel Name="stack" Width="5000" Orientation="Horizontal"  HorizontalAlignment="Left" >
        <StackPanel.RenderTransform>
                <TranslateTransform x:Name="Trans2" X="0" Y="0" />
            </StackPanel.RenderTransform>
    </StackPanel> 
```

```
private void button1_Click(object sender, RoutedEventArgs e)
    {                                 
            Storyboard sb = CreateAndApplyStoryboard(scroll);
            sb.Begin();

        } 
```

# cocoa - 为可可应用程序使用 SOAP Web 服务

> ID：10205913
> 
> 赞同：0
> 
> 时间：2012-04-18T08:47:19.477
> 
> 标签：cocoa, soap

我正在尝试将 SOAP Web 服务消费到可可应用程序中。在日志中打印的返回值是一个 HTML 错误页面。

我的主要目标是将两个参数传递给 Web 服务并获得一个值作为响应。任何人都可以建议实现这一目标的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:04:00.580

它可以是任何数量的东西。首先：您可能点击了错误的 URL，您可能发送了无效数据并且服务器未返回有效错误。最好的办法是对照您可能拥有的任何文档检查您在做什么，然后联系在项目服务器端工作的人员以帮助调试。

我知道这不是一个非常具体的答案，但我没有太多事情要做。希望能帮助到你。

# java - awt/swings 中显示网页和访问网页的最佳组件

> ID：10205917
> 
> 赞同：0
> 
> 时间：2012-04-18T08:47:41.347
> 
> 标签：java, swing, awt, webpage, jtextpane

哪个是 awt/Swings 中显示网页和访问该组件中网页的最佳组件，没有任何问题，例如（javascript 的功能，页面中的图像应该显示良好，在浏览器上查看页面并支持作为具有所有功能的浏览器) 这里有一个关于它[显示网页](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JEditorPane.html)的教程，但它说，我们不能保证 JEditotPane 将作为浏览器提供。

您可以在该教程的最后一段中看到。我需要实现这一点，网页要显示在 awt/swings 中。我尝试了该链接中的示例，但收到消息：“请启用 javascript 显示”。

因此，任何人都可以指导我，关于在摆动/awt 上显示网页的最佳方法或任何替代方法。

***更新 ：***

我已经下载了 Jbrowser 的 jar，并尝试了 Jbrowser 站点中的一个示例。但低于例外。

```
 import java.awt.Canvas;  
    import java.awt.Dimension;  
    import java.awt.Toolkit;  
    import javax.swing.JFrame;    
    import ru.atomation.jbrowser.impl.JBrowserComponent;  
    import ru.atomation.jbrowser.impl.JBrowserBuilder;  
    import ru.atomation.jbrowser.impl.JBrowserCanvas;  
    import ru.atomation.jbrowser.impl.JComponentFactory;  
    import ru.atomation.jbrowser.interfaces.BrowserManager;
public class GettingStartedSnippet {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize(); 
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize((int) (screenSize.getWidth() * 0.75f),
                (int) (screenSize.getHeight() * 0.75f));
        frame.setLocationRelativeTo(null);
        BrowserManager browserManager =   new JBrowserBuilder().buildBrowserManager();
        JComponentFactory<Canvas> canvasFactory = browserManager.getComponentFactory(JBrowserCanvas.class);
        JBrowserComponent<?> browser = canvasFactory.createBrowser();                    
        frame.getContentPane().add(browser.getComponent());          
        frame.setVisible(true);            
        browser.setUrl("http://code.google.com/p/jbrowser/");  

    }

} 
```

这是我找到示例[GettingStartedSnippet的链接](http://code.google.com/p/jbrowser/source/browse/src/main/java/ru/atomation/jbrowser/snippets/GettingStartedSnippet.java?repo=snippets)

***例外 ：***

```
Apr 18, 2012 3:42:11 PM ru.atomation.jbrowser.impl.JBrowserBuilder getXulRunnerPath
INFO: Unpacking mozilla to: D:\WorkSpaces\example\example\jbrowser
Apr 18, 2012 3:42:11 PM ru.atomation.xulnative.XulExtractor extract
SEVERE: Xulrunner archive not found in jar
Apr 18, 2012 3:42:11 PM ru.atomation.jbrowser.impl.JBrowserManager initialize
SEVERE: invalid current xulrunner location D:\WorkSpaces\example\example\jbrowser\xulrunner\xulrunner
Apr 18, 2012 3:42:11 PM ru.atomation.jbrowser.impl.JBrowserManager initialize
INFO: Continuing to search for other xulrunners
Apr 18, 2012 3:42:11 PM ru.atomation.jbrowser.impl.JBrowserManager initialize
SEVERE: failed to initialize mozilla
Throwable occurred: java.io.IOException: Unable to resolve XULRunner home location
    at ru.atomation.jbrowser.impl.JBrowserManager.initialize(JBrowserManager.java:118)
    at ru.atomation.jbrowser.impl.JBrowserManager.<init>(JBrowserManager.java:67)
    at ru.atomation.jbrowser.impl.JBrowserBuilder.buildBrowserManager(JBrowserBuilder.java:127)
    at GettingStartedSnippet.main(GettingStartedSnippet.java:23) 
```

我浏览以找到解决方案，我无法为该问题找到合适的解决方案。请任何人都可以为我提供解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T09:21:29.520

> ..或任何替代方案。

使用实际的嵌入式浏览器。

例如

*   [JDIC：在 Java 中嵌入 Web 浏览器](http://workshop.evolutionzone.com/2007/08/30/jdic-embedding-a-web-browser-in-java/)
*   [jbrowser - 基于 Mozilla Embedded API 的 Java 浏览器](http://code.google.com/p/jbrowser/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T10:28:40.793

[jbrowser](http://code.google.com/p/jbrowser/)使用的是 mozilla 项目的 xullrunner，所以 jbrowser 是 firefox 浏览器的包装器。

对于我的问题，我使用[了 NativeSwing 库](http://www.java.net/external?url=http://djproject.sourceforge.net/ns)，这是我觉得最好的组件。通过这个我实现了将非 html 页面集成到 Swing 应用程序的网页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T05:30:25.237

1.首先下载jbrowser-linux-demo-with-sources.tar。2.然后创建名为“JbrowserDemo”的java应用程序。3.复制jbrowser-linux-demo-with-sources中的Xulrunner文件夹。4.粘贴到您的应用程序文件夹（JbrowserDemo）。5.然后运行您的应用程序“GettingStartedSnippet”

# dojo - 如何以编程方式突出显示 xpage 中的特定树节点？

> ID：10205921
> 
> 赞同：1
> 
> 时间：2012-04-18T08:47:50.860
> 
> 标签：dojo, xpages

我在 xpage 中有一个 dijit.tree。我想在呈现页面时选择一个特定的树节点。在 dojo 参考指南中，如果您已经知道要突出显示的树节点的完整路径，则有一个示例包含此问题的解决方法代码，以及对 tree.attr('path') 的示例调用。但是我想在呈现页面时自动突出显示节点。这样做更惯用的方法是什么？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:42:02.813

您可以在 Outputscript 元素中添加 XSP.addOnload(function(){....}) 调用以呈现突出显示。

# amazon-ec2 - Amazon SNS 是否使用 GET 或 POST 到 http 订阅？

> ID：10205922
> 
> 赞同：3
> 
> 时间：2012-04-18T08:47:52.133
> 
> 标签：amazon-ec2, amazon-web-services, amazon-sns

我找不到任何有关消息方法或格式的文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T11:22:29.540

[Amazon Simple Notification Service (Amazon SNS)](http://aws.amazon.com/sns/)使用HTTP POST 传送通知消息，请参阅常见问题解答[接收通知有哪些不同的传送格式/传输方式？](http://aws.amazon.com/sns/faqs/#13)：

> *   “HTTP”、“HTTPS”——订阅者指定一个 URL 作为订阅注册的一部分；通知将通过 HTTP POST 传递到指定的 URL。

通知消息格式记录在[HTTP/HTTPS 通知 JSON 格式](http://docs.amazonwebservices.com/sns/latest/gsg/json-formats.html#http-notification-json)中（*订阅/取消订阅 JSON 格式*也记录在[附录 D：JSON 格式](http://docs.amazonwebservices.com/sns/latest/gsg/json-formats.html)中）。

# unix - 使用 UNIX 命令的时间间隔的资源利用率摘要

> ID：10205928
> 
> 赞同：-1
> 
> 时间：2012-04-18T08:48:16.947
> 
> 标签：unix, memory-management, command-line, resources

我有一个 Unix 服务器盒，我需要从（2012 年 1 月 1 日到今天）为此服务器生成资源利用率报告，我该怎么做？

报告参数示例：

```
Memory size
Memory free size
Memory used size
Virtual Memory size
average Memory size
average Memory free size
average Memory used size
average Virtual Memory size 
```

CPU也一样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:28:31.653

查看[vmstat](http://en.wikipedia.org/wiki/Vmstat)和[sar](http://en.wikipedia.org/wiki/Sar_%28Unix%29)命令。

# javascript - OAuthException：不安全？

> ID：10205930
> 
> 赞同：2
> 
> 时间：2012-04-18T08:48:24.490
> 
> 标签：javascript, oauth, facebook-opengraph

我有这样的错误消息：

> 发生错误类型：OAuthException 消息：抱歉，此帖子包含一个被阻止的 URL：您尝试共享的内容包含一个因垃圾邮件或不安全而被阻止的链接：
> 
> 错误/警告消息的正文。标题是：对不起，这篇文章包含一个被阻止的 URL
> 
> 有关更多信息，请访问帮助中心。如果您认为自己看错了，请告诉我们。

当我尝试发布操作时。在这个链接上，对我来说没有什么不安全的......我不明白为什么这个网址被阻止了？！

网址：http: [//zoucky.com/trop-mignon-le-bebe-qui-fait-de-la-muscu-non/](http://zoucky.com/trop-mignon-le-bebe-qui-fait-de-la-muscu-non/)

任何想法 ？

# iphone - 在视图的点击位置下方找到 NSAttributedString 的属性

> ID：10205940
> 
> 赞同：3
> 
> 时间：2012-04-18T08:48:49.207
> 
> 标签：iphone, objective-c, ios, core-text, nsattributedstring

在将 NSAttributedString 与 Core Text Framework 一起使用时，如何在视图的点击位置下方找到文本的属性（它是 NSAttributedString，其中每个句子都有其唯一的属性）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:23:22.720

直接使用 Core Text，而不是文本视图？我假设你有一个`CTFrameRef`. `CTFrameGetLines()`您可以使用and获取线条和线条原点`CTFrameGetLineOrigins()`。根据其原点找到正确的行，然后用于`CTLineGetStringIndexForPosition()`获取字符串索引。

# sql - SQL - 通过孩子获得“精确”的父亲匹配

> ID：10205943
> 
> 赞同：2
> 
> 时间：2012-04-18T08:49:00.300
> 
> 标签：sql

我有以下表格：

### 父亲

```
ID
------
a
b
c 
```

### 孩子

```
f_ID    ID
------------
a        1
a        2
a        3
b        1
b        2
c        1 
```

我想要 ：

*   当我给出 [1, 2, 3] 时得到“a”
*   当我给出 [1, 2] 时得到“b”
*   当我给 [1] 时得到“c”

问题是如果我使用

```
SELECT *    
FROM Father AS F    
INNER JOIN Child AS C    
ON C.f_ID = F.ID    
WHERE C.ID IN ( '1' ) 
```

这会给我父亲：1、2、3

请帮忙，我是 SQL 新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:54:45.803

像这样试试。我只是在 Where 子句的末尾添加了一个“并且不存在”。

```
SELECT * Father AS F
INNER JOIN Child AS C
    ON C.f_ID = F.ID
WHERE C.ID IN ( '1' )
AND NOT EXISTS (
    SELECT * FROM Child
    WHERE Child.ID NOT IN ('1')
    AND F.ID = Child.f_ID
) 
```

作为一种替代方法，您可以自联接并选择空行。

```
SELECT * Father AS F
INNER JOIN Child AS C
    ON C.f_ID = F.ID AND C.ID IN ( '1' )
LEFT OUTER JOIN
    (SELECT f_ID FROM Child WHERE ID NOT IN ('1')) a
    ON C.f_ID = a.f_ID
WHERE a.f_ID IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:57:47.683

为了能够匹配整个序列，您需要计算匹配并将其与给定序列的计数进行比较：

```
select f.f_id
  from father f
 inner join child c
    on f.f_id = c.f_id
 -- exact sequence given
 where c.f_id in (1, 2, 3)
group by f_id
-- compare number of children to number of elements in parameter sequence
having count (distinct c.c_id) = 3 
```

# c++ - 如何使用 C/C++ 自动检测 snmp 设备？

> ID：10205945
> 
> 赞同：3
> 
> 时间：2012-04-18T08:49:27.973
> 
> 标签：c++, c, snmp

我正在尝试编写一个 SNMP 管理器。SNMP 管理器应该做的第一步是发现它可以在网络中管理的设备，对吗？最好/最简单的方法是什么？

根据我的阅读，一种方法是 ping 范围内的每个 IP 地址，然后向那些响应 ping 的 IP 地址发送基本的 SNMP 查询。我们如何确定要 ping 的 IP 地址范围？

这是另一个：“snmp discover 进程使用仅基于连接到 Inter Network 的设备提供的 SNMP MIBII 信息的调查方法。该进程向所有识别 MIBII 请求的设备发出请求，并收集 IPADDTABLE、IPROUTETABLE和 ARPTABLE 主机表。据此，它构建了 IP 拓扑。

请告知发现 snmp 设备的步骤。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:34:39.713

通过以下命令使用[Nmap ：](http://nmap.org/)

```
nmap 192.168.1.0/24 -A -sU -p U:161 
```

这将返回在 192.168.1.0/24 网络上运行 SNMP 服务的所有设备。当然，您需要将 192.168.1.0/24 替换为您的实际网络地址。Nmap 还具有`-oX`将控制台输出写入 XML 文件的参数。

# iphone - 让用户在 iOS 应用中裁剪照片

> ID：10205946
> 
> 赞同：10
> 
> 时间：2012-04-18T08:49:45.933
> 
> 标签：iphone, ios, ipad, image-processing, uiimage

关于在 iPhone 应用程序中裁剪图像/照片有几个问题（和答案）。

但是我找不到涵盖给用户一个矩形的常见任务的答案，该矩形可以通过捏合手势调整大小以让他调整要剪切的区域的大小。

您可以在许多应用程序（Instagram、Twitter 等）中找到此功能，最有可能将用户照片剪切到正确的比例。所以我想有很多人有同样的问题。

有没有人有代码或教程来展示如何完成这项任务？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-18T08:59:03.120

试试下面的链接，例如项目：

[https://github.com/iosdeveloper/ImageCropper](https://github.com/iosdeveloper/ImageCropper)

[https://github.com/barrettj/BJImageCropper](https://github.com/barrettj/BJImageCropper)

[https://github.com/ardalahmet/SSPhotoCropperViewController](https://github.com/ardalahmet/SSPhotoCropperViewController)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-28T19:58:22.960

我做了这个结合了上述两者的元素。

[https://github.com/nicholjs/BFCropInterface](https://github.com/nicholjs/BFCropInterface)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-07T15:50:45.547

[https://github.com/loveyiren208/XWEditPhotoDemo](https://github.com/loveyiren208/XWEditPhotoDemo)

试试这个。我只发现了一些没有 ARC 的项目。所以我决定写一个新的。当您更改个人资料照片时，它与许多应用程序类似。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-18T08:55:40.793

试试这个项目：[ardalahmet / SSPhotoCropperViewController](https://github.com/ardalahmet/SSPhotoCropperViewController)

# c# - Outlook 2010 插件 c#::: 自定义表单在客户端计算机上不起作用

> ID：10205947
> 
> 赞同：3
> 
> 时间：2012-04-18T08:49:47.110
> 
> 标签：c#, vsto, add-in, outlook-addin, outlook-2010

我正在使用 C# 中的 Visual Studio 为 Outlook 2010 开发插件。我创建了一个带有按钮的自定义功能区。单击按钮后，它会加载一个表单，您可以在其中生成特殊约会。它在我的开发计算机上运行良好。但是当我将它安装在另一台计算机上时（没有 Visual Studio，但安装了 .net 框架和 vsto），带有按钮的功能区会加载，但表单实例的创建失败。

我在我的项目中创建了一个名为 frmBZAppointment 的表单。这是我的按钮 onclick 监听器（在我的开发电脑上完美运行，但在另一台电脑上却不行）

```
public partial class CustomerRibbon
{
    private void butCustomAppointment_Click(object sender, RibbonControlEventArgs e)
    {
        MessageBox.Show("test 1"); //works
        frmBZAppointment frm = new frmBZAppointment();
        MessageBox.Show("test 2"); //does not work
        frm.Show();
        MessageBox.Show("test 3"); //does not work
    }
} 
```

我已经完成了[本](http://msdn.microsoft.com/en-us/library/ff937654.aspx "使用 Windows Installer 为 Office 解决方案部署 Visual Studio 2010 工具")指南

如果有人知道它可能是什么，那就太好了。

* * *

编辑：

解决了问题

我必须将“Microsoft Visual Basic PowerPacks 10”添加到我的安装先决条件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T16:55:33.347

尝试在 Outlook 高级选项中打开**[加载项用户界面错误。](http://msdn.microsoft.com/en-us/library/bb608619.aspx)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:10:40.207

试试这个：

```
public partial class CustomerRibbon 
{ 
    private void butCustomAppointment_Click(object sender, RibbonControlEventArgs e) 
    { 
        try
        {
            frmBZAppointment frm = new frmBZAppointment(); 
            frm.Show(); 
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message); 
        }
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-28T16:52:23.980

我遇到了同样的问题，但发现有一整套未包含在先决条件中的东西。

我跟着页面[here](http://msdn.microsoft.com/en-us/library/ff937654.aspx)。最值得注意的是，默认情况下 VSTO 运行时不是 VSTO 安装包的一部分。所以这很好。

# iphone - 尽管对 ALAssetLibrary 进行了任何更改，是否有任何方法可以以一种可行的方式保存 ALAsset？

> ID：10205950
> 
> 赞同：1
> 
> 时间：2012-04-18T08:49:52.593
> 
> 标签：iphone, alassetslibrary

我之前问过一个类似的问题（没有回复），但我对这个问题了解得更多，所以我决定用一个新的来重新表述它。我希望这没问题。

本质上，我需要在我的应用程序中存储一些 ALAsset，特别是来自相机胶卷/照片库的照片。

如果用户退出应用程序，然后拍摄一些照片或删除一些照片，那么我存储的 ALAssets 将变得无效。

有没有办法解决？是否有任何来自 ALAssets 的数据可以存储，例如照片 ID、路径或任何东西，这些数据将在 ALAssetLibrary 重新索引自身时“存活”下来？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T20:28:48.143

当 PhotoLibrary 发生变化时，所有 AssetLibrary 对象都会失效。你需要做什么：

1) 在用户退出应用之前，为 ALAssetsLibraryChangedNotification 注册一个观察者。请注意，您需要解决一个 iOS 错误：[http ://www.openradar.me/10484334](http://www.openradar.me/10484334)

2）在用户退出应用程序之前，使用以下方法保存您想要稍后检索的 ALAsset 的 URL：

```
[assetObject valueForPropery: ALAssetPropertyURLs]; 
```

3）当用户切换回您的应用程序（并完成更改）时，应该调用您的观察者。如果您的 UI 显示任何 ALAsset 对象，您应该触发 AssetsLibrary 的重新枚举并更新您的 GUI（否则您的 GUI 会反映到无效的 ALAssetsObjects）。

4) 要检索之前保存 URL 的任何 ALAsset-Objects，请使用以下方法：

```
[assetsLibraryInstance assetForURL:(NSURL *)assetURL resultBlock:(ALAssetsLibraryAssetForURLResultBlock)resultBlock failureBlock:(ALAssetsLibraryAccessFailureBlock)failureBlock] 
```

对于assetURL，传递您之前保存的值。

干杯，

亨德里克

# java - 列出 Spring 中已解析的属性

> ID：10205964
> 
> 赞同：4
> 
> 时间：2012-04-18T08:50:37.867
> 
> 标签：java, spring

我的 spring xml 文件中有多个属性文件源，它们具有不同的顺序值，有些是可选的。

*   application.properties - 在类路径中，保存默认（备用）属性（最低优先级）
*   [HOSTNAME].properties - 在类路径中，包含特定于该主机名的属性（更高优先级）
*   按 jndi 中的值加载的属性文件 - 通过 jndi 指定的位置，最高优先级。

换句话说，我可以用 .properties 中的属性覆盖 application.properties 中设置的默认属性，并通过 jndi 查找其位置的属性文件依次覆盖这些值。

然而，我想要的是让 spring 以某种方式为我提供所有属性的已解析值的列表。有谁知道我该怎么做？

获取特定属性的值对我来说很容易，但我真正需要的是所有已解析属性的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:32:47.673

我有两个建议：

1.  `PropertyPlaceholderConfigurer`您可以使用方法覆盖类`processProperties`以填充所有已解析的属性。[此处](http://j2eecookbook.blogspot.com/2007/07/accessing-properties-loaded-via-spring.html)列出了一个示例。
2.  由于`PropertyPlaceholderConfigurer`实现了 Spring 的`Ordered`接口，你可以拥有多个属性占位符；`order`然后，按照应用程序中的顺序分配它们。最后，已经扩展了类，您将可以按照应该加载的顺序访问所有已解析的属性。

# python - 为什么以元组为键的'in'运算符在python中这么慢？

> ID：10205969
> 
> 赞同：6
> 
> 时间：2012-04-18T08:51:00.733
> 
> 标签：python, dictionary, key

我有一个字典，例如：

```
d=dict()
d[('1','2')] = 'value' 
```

然后我查询密钥：

```
if (k1,k2) in d.keys(): 
```

当有百万条记录时，速度很痛苦，'in'操作符有什么问题吗？

是顺序搜索吗​​？

我必须 concat str 作为绕过这个问题的关键。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-18T08:53:50.517

你应该使用

```
(k1,k2) in d 
```

而不是调用`d.keys()`.

在 Python 2 中按照自己的方式进行操作会导致线性搜索，并且会否定`dict`. 在 Python 3 中，您的代码很高效（请参阅下面的注释），但我的版本更清晰。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T10:00:45.360

鉴于诺伦皇室的加入，我想我会注意到你实际上可以`timeit`以稍微更好的方式进行测试。通过将 的构造移动`dict`到设置函数中，我们可以只对 上的操作进行计时`dict`，从而为我们提供可以轻松比较的结果。

在 3.2 中：

```
python -m timeit -s 'd = {(str(i), str(j)):"a" for i in range(100) for j in range(1000)}' '_ = ("1", "2") in d.keys()' '_ = (1, 2) in d.keys()'
1000000 loops, best of 3: 0.404 usec per loop

python -m timeit -s 'd = {(str(i), str(j)):"a" for i in range(100) for j in range(1000)}' '_ = ("1", "2") in d' '_ = (1, 2) in d'
1000000 loops, best of 3: 0.247 usec per loop 
```

你可以看到区别。在 3.x 中，直接在 上工作可以`dict`使我们的速度提高近 2 倍，这还不错。

在 2.7.3 中：

```
python2 -m timeit -s 'd = {(str(i), str(j)):"a" for i in range(100) for j in range(1000)}' '_ = ("1", "2") in d.keys(); _ = (1, 2) in d.keys()'
10 loops, best of 3: 36.3 msec per loop

python2 -m timeit -s 'd = {(str(i), str(j)):"a" for i in range(100) for j in range(1000)}' '_ = ("1", "2") in d' '_ = (1, 2) in d'
10000000 loops, best of 3: 0.197 usec per loop 
```

在 2.x 中，差异确实是*惊人*的。使用`dict.keys()`需要 36,300 微秒，而仅`dict`需要不到 0.2 微秒。这快了近**二十**万倍。

只是认为这值得一提。

编辑：

蒂姆做了一个有趣的评论，所以我决定做另一个测试。我尝试只构建列表，然后只进行哈希查找，结果如下：

```
python2 -m timeit -s 'd = {(str(i), str(j)):"a" for i in range(100) for j in range(1000)}' 'd.keys()' 'd.keys()'
100 loops, best of 3: 5.84 msec per loop

python2 -m timeit -s 'd = {(str(i), str(j)):"a" for i in range(100) for j in range(1000)}' -s 'l=d.keys()' '_ = ("1", "2") in l' '_ = ("1", "2") in l'
10 loops, best of 3: 25.3 msec per loop 
```

您可以看到，在这样的大字典上，构建列表大约需要 1/6 的时间，而搜索列表的时间是 5/6。

# multithreading - 如何使在 C++ 线程中打开的文件安全？

> ID：10205974
> 
> 赞同：0
> 
> 时间：2012-04-18T08:51:15.963
> 
> 标签：multithreading, file-io, thread-safety

代码片段：

```
ofstream log;
log.open("log.txt",ios::out);
Thread threads[2];
...both threads write to the file
log.close() 
```

当一个线程写入文件时锁定文件的任何现有设施，因此两个线程不会同时写入。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:09:58.370

As what shang said, `pwrite` Performs the same action as `write` but writes to the specified position in the file without modifying the file pointer and therefore is safe in threads.

See man pwrite(2) for more information.

```
 int fd = open('some_file',O_WRONLY);
 /* in threads */
 n = pwrite(fd, write_buffer, sizeof_buffer, file_offset); 
```

In your case, you're probably going to have to lock before writing and keep track of the offset (where you are in the file) and then release the lock to ensure race conditions don't write over existing portions of the file and all actions to and from the file play well in concurrency land.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:58:31.127

您可以使用`pwrite()`，在多线程中写入是安全的。

# java - jaxb 上下文中的 package-info.class 内容

> ID：10205977
> 
> 赞同：1
> 
> 时间：2012-04-18T08:51:29.517
> 
> 标签：java, jaxb

嘿嘿，

我目前在使用 JAXB 序列化过程时遇到问题。jaxb 版本 2，用于序列化属性。

是否可以在“package-info.class”中添加多个包级别注释？目前我正在手动创建这个文件，其中已经有一个“适配器条目”，它必须留在那里。虽然我像个白痴一样搜索，但每个示例都只有*一个*条目，但我想这是不可能的，因为语义应该更灵活，允许多个包级别注释而不仅仅是一个。

问题是，我在类中的每个映射成员上使用 @XmlJavaTypeAdapter(AdapterForMap.class)，但映射实际上包含另一种类型（作为值），比如说 Font，它需要一个适当的 xml 适配器. 目前我无法使用这种字体适配器，因为“package-info.class”已经有一个条目。

提前致谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:16:06.620

可`@XmlJavaTypeAdapters`用于在包级别注册许多`@XmlJavaTypeAdapter`.

**包信息**

```
@XmlJavaTypeAdapters({
    @XmlJavaTypeAdapter(type=DateTime.class, value=DateTimeAdapter.class),
    @XmlJavaTypeAdapter(type=DateMidnight.class, value=DateMidnightAdapter.class),
    @XmlJavaTypeAdapter(type=LocalDate.class, value=LocalDateAdapter.class),
    @XmlJavaTypeAdapter(type=LocalTime.class, value=LocalTimeAdapter.class),
    @XmlJavaTypeAdapter(type=LocalDateTime.class, value=LocalDateTimeAdapter.class)
})
package blog.jodatime;

import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapters;    
import org.joda.time.*; 
```

**对于一个完整的例子**

*   [http://blog.bdoughan.com/2011/05/jaxb-and-joda-time-dates-and-times.html](http://blog.bdoughan.com/2011/05/jaxb-and-joda-time-dates-and-times.html)

# php - 我怎样才能让我的 JS 返回 true 或 false？

> ID：10205981
> 
> 赞同：0
> 
> 时间：2012-04-18T08:51:43.043
> 
> 标签：php, forms, return, return-value

当变量“ **f** ”为 FALSE 时，我想**返回 TRUE 或**FALSE。但是返回永远不会到达浏览器，并且表单会执行其默认操作。

 ****我怎样才能让我的 ELSE 返回一个值？** 我试图硬编码一个返回值而不是写' **return myFunction();** ' 这行得通，但对我没有帮助，因为我需要从' **myFunction()** '返回。

不要想太多代码应该做什么，它没有意义，它只是为了演示。

```
$('#theForm').submit(function()
{

    var f = $('#theInput').val(); // input value

    if(f == TRUE)
    {
        alert('Lorem ipsum');

        return false;
    }
    else // If f is FALSE
    {
        $.post('/php/check.php',{check: f, function(data){myFunction(data);});

        function myFunction(data)
        {

            if(data == 'false')
            {
                // Do something
                return false;
            }
            else
            {
                // Do something
                return true;
            }
        }

        return myFunction();
    }

 }); 
```

我已经尝试过了，但它仍然没有从'return myFunction（）'返回一个值

```
$('#theForm').submit(function()
{

    var f = $('#theInput').val(); // input value

    if(f == true)
    {
        alert('Lorem ipsum');

        return false; // Stop default form action
    }
    else // If f is FALSE
    {

     var request = $.ajax({
        async: false,
        url: "/php/checkArea.php",
        type: "POST",
        data: {data: f},
        dataType: "text"
        });

        request.done(function(data) {
            myFunction(data);
        });

        function myFunction(data)
        {

            if(data == 'false')
            {
                // Do something
                return false; // Stop default form action
            }
            else
            {
                // Do something
                return true; // YES PLEASE, do the default form action
            }
        }

        return myFunction();
    }

 }); 
```

* * *

**在你的帮助下，我终于想出了一个关于异步部分的解决方案。**

```
$('#theForm').submit(function()
{

    var f = $('#theInput').val(); // input value

    if(f == true)
    {
        alert('Lorem ipsum');

        return false; // Stop default form action
    }
    else // If f is FALSE
    {

     var request = $.ajax({
        async: false,
        url: "/php/checkArea.php",
        type: "POST",
        data: {data: f},
        dataType: "text"
        });

        request.done(function(data) {
            globalData = data; // Global variable
        });

        function myFunction(globalData)
        {

            if(globalData == 'false')
            {
                // Do something
                return false; // Stop default form action
            }
            else
            {
                // Do something
                return true; // YES PLEASE, do the default form action
            }
        }

        return myFunction(globalData); // Call the function with the global variable
    }

 }); 
```

**这完美地工作:-)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:59:39.237

这部分应该做你想做的事：

```
if(f == TRUE)
{
    alert('Lorem ipsum');

    return false;
} 
```

但是，这不应该：

```
 $.post('/php/check.php',{check: f, function(data){myFunction(data);});

    function myFunction(data)
    {

        if(data == 'false')
        {
            // Do something
            return false;
        }
        else
        {
            // Do something
            return true;
        }
    }

    return myFunction(); 
```

$.post 总是会**立即**返回。myFunction 将在 Ajax 调用完成时被调用，但此时您*已经*从 .submit 块返回！

您可以查看[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)，它具有使其同步的设置（设置`async`为`false`）。这可能会阻止浏览器在等待 Ajax 调用时执行任何其他操作，但这是进行同步调用的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:30:05.660

Create a `DIV` that will hold your `false` or `true` value from the `$.ajax`

```
<div id="result"></div> 
```

Now structure your javascript

```
 $('#theForm').submit( function() {

      var f = $('#theInput').val(); // input value

      if(f == TRUE) {

         alert('Lorem ipsum');
         return false;

      } else { // If f is FALSE

         var rVal = $('div#result');

         $.ajax({
            type : 'POST',
            data : f,
            url : '/php/check.php',
            context: rVal,
            async : false,

            success : function (msg) {
               (msg == 'false') ?  $(this).html('FALSE') : $(this).html(msg);
            }

         });

        function myFunction(data) {

            if(data == 'FALSE'){
               // Do something
               return false;
            } else {
               // Do something
               return true;
            }

        }

       return myFunction( rVal.html() );

      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T09:02:35.373

区分大小写可能是一个问题。Javascript 使用`true`and `false`，而不是`TRUE`and `FALSE`。

在您的`else`子句中，您有一个回调用于`POST`处理返回的数据。但是，回调`myFunction`将在代码到达之后运行`return myFunction()`——因为它没有参数——将导致匿名函数返回`true`。

您需要使您的异步调用同步，但即便如此，`myFunction`将其结果返回到哪里？

您可能会尝试强制`myFunction`将其结果返回到正确的上下文，如下所示（我更喜欢在使用之前声明该函数），但您仍然可能遇到同步问题。从`$.post`无法强制同步的文档中可以看出。

```
else // If f is FALSE
{
    function myFunction(data)
    {
        if(data == 'false')
        {
            // Do something
            return false;
        }
        else
        {
            // Do something
            return true;
        }
    }
    return ($.post('/php/check.php',{check: f}, function(data){myFunction(data);}));
} 
```**

# android - Eclipse 创建的应用程序不会在 Android 模拟器中运行

> ID：10205983
> 
> 赞同：3
> 
> 时间：2012-04-18T08:51:53.420
> 
> 标签：android, eclipse

我是 Eclipse 和 Android 编程的新手，并试图自学如何创建 android 应用程序。问题是应用程序无法在模拟器中运行。

1.  我已经安装了 Eclipse SDK 版本：3.7.2。

2.  我已经安装了 Android SDK 和 AVD

3.  我从 Eclipse 创建了“HelloWorld”应用程序。

4.  按 F11 运行“HelloWorld.

5.  出现消息：“与 adb 的连接已断开，出现严重错误。”

6.  没有运行 Android 模拟器。

7.  检查 android sdk 目录， adb.exe 在那里。

8.  再按 F11，

9.  Android 模拟器已启动，但“HelloWorld”应用程序未运行

10.  应用管理器中也没有“HelloWorld”应用。

11.  我删除了 R.java 并再次运行，结果是一样的（没有运行“HelloWorld”应用程序）。

12.  我已经杀死了 adb.exe 进程并再次运行，结果是一样的（没有运行“HelloWorld”应用程序）。

# 下面是来自 main.xml 的代码

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />

    <TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="This is my first Android Application" />

    <Button
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="And this is a clickable button" />

    </LinearLayout> 
```

==================================================== ====================

请建议如何解决这个问题。

附加信息：我已经下载了所有软件包（+extras）并创建了虚拟设备。 ![虚拟设备](../Images/316c04970852b07c80747263e15477ad.png)

来自控制台的消息 ![来自控制台的消息](../Images/86709a97ab353f5427125efed65c1cf8.png)

有什么遗漏吗？

第 15 行和第 20 行有一个感叹号（用红框表示）是否会导致问题？ ![代码错误](../Images/cf77959ce0389ec36ae55886abd36315.png)

* * *

各位，

谢谢你的建议。浏览论坛后，Android 似乎不适用于 64 位应用程序/操作系统（但有些人声称它可以工作）。我正在使用 Win7 64 位 + Eclipse 64 位。很抱歉，首先没有提供此信息，也许事情可以更快地解决。

目前，问题还没有解决，我只是创建了一台虚拟 PC（在 XP 模式下）并以 32 位运行所有内容。到目前为止一切正常。

特别感谢 AndroDev 在这个问题上的持续帮助。

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:01:12.853

在您的步骤中，您没有提到创建 AVD。您需要在运行应用程序之前创建一个模拟器设备。

您还需要杀死 adb 并再次重新启动它，保持 eclipse 关闭

```
 1\. Go to the Android SDK tools directory in Command Prompt
 2\. type adb kill-server
 3\. then type adb start-server
 4\. No error message is thrown while starting ADB server, then adb is started successfully. 
```

现在您可以再次启动 Eclipse。这工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:07:25.377

在你的日食中有一个 Android VDM 的图标。只需单击该图标。之后单击新按钮。给出名称 -->> 选择目标 -->> 点击创建 AVD。将您的项目作为 Android 应用程序运行后。[这](http://developer.android.com/sdk/eclipse-adt.html)可能会帮助你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T09:16:32.240

考虑到您已经创建了运行应用程序所需的 AVD，请按照以下步骤操作：

1.  关闭日食
2.  使用命令通过命令行杀死 adb`adb kill-server`
3.  如果从进程选项卡运行，现在启动任务管理器并从那里终止 adb 进程
4.  现在从命令行再次启动你的 adb`adb start-server`
5.  现在再次启动您的 Eclipse 并运行您的应用程序

我多次遇到同样的问题，并按照上述步骤来克服这个问题。希望这也对你有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T09:03:58.967

您是否从 SDK 管理器下载了“附加”包。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T09:08:47.703

首先应该完美地安装软件包并从 AVD 和 SDK 管理器创建 AVD 并启动 AVD 模拟器..你的工作已经完成了伙计。我希望插件完美安装......

# cmake - 如何捕获 CMake 命令行参数？

> ID：10205986
> 
> 赞同：15
> 
> 时间：2012-04-18T08:52:02.683
> 
> 标签：cmake

我想在生成的脚本中记录传递给 cmake 的参数。例如，“my-config.in”将由 cmake 处理，它的定义如下：

> 配置="@CMAKE_ARGS@"

之后`cmake`，`my-config`将包含如下一行：

> config="-DLINUX -DUSE_FOO=y -DCMAKE_INSTALL_PREFIX=/usr"

我试过了`CMAKE_ARGS`，`CMAKE_OPTIONS`但失败了。没有文件提到这一点。:-(

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-18T21:50:44.350

我不知道提供此信息的任何变量，但您可以自己生成它（有一些附带条件）。

传递给 CMake 的任何`-D`参数都将添加到`CMakeCache.txt`构建目录中的缓存文件中，并在后续调用期间重新应用，而无需再次在命令行上指定。

因此，在您的示例中，如果您首先将 CMake 执行为

```
cmake ../.. -DCMAKE_INSTALL_PREFIX:PATH=/usr 
```

然后你会发现随后运行简单

```
cmake . 
```

仍将`CMAKE_INSTALL_PREFIX`设置为`/usr`

如果您要查找的`CMAKE_ARGS`是每次调用 CMake 在命令行上定义的完整变量列表，那么以下内容应该可以解决问题：

```
get_cmake_property(CACHE_VARS CACHE_VARIABLES)
foreach(CACHE_VAR ${CACHE_VARS})
  get_property(CACHE_VAR_HELPSTRING CACHE ${CACHE_VAR} PROPERTY HELPSTRING)
  if(CACHE_VAR_HELPSTRING STREQUAL "No help, variable specified on the command line.")
    get_property(CACHE_VAR_TYPE CACHE ${CACHE_VAR} PROPERTY TYPE)
    if(CACHE_VAR_TYPE STREQUAL "UNINITIALIZED")
      set(CACHE_VAR_TYPE)
    else()
      set(CACHE_VAR_TYPE :${CACHE_VAR_TYPE})
    endif()
    set(CMAKE_ARGS "${CMAKE_ARGS} -D${CACHE_VAR}${CACHE_VAR_TYPE}=\"${${CACHE_VAR}}\"")
  endif()
endforeach()
message("CMAKE_ARGS: ${CMAKE_ARGS}") 
```

这有点脆弱，因为它取决于通过命令行设置的每个变量都有短语“No help, variable specified on the command line”。指定为其`HELPSTRING`属性。如果 CMake 更改此 default `HELPSTRING`，您必须`if`相应地更新语句。

如果这不是您想要`CMAKE_ARGS`显示的内容，而只是当前执行的参数，那么我认为没有办法做到这一点，而不是破解 CMake 的源代码！但是，我希望这不是您想要的，因为每次都有效地重新应用所有先前的命令行参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-23T20:58:44.087

存储 CMake 命令行参数的一种方法是使用一个名为**`~/bin/cmake`**(***1) 的包装脚本，它可以做两件事：

*   创建`./cmake_call.sh`存储命令行参数
*   `cmake`使用命令行参数调用真正的可执行文件

**`~/bin/cmake`**# 代码如下所示

```
#!/usr/bin/env bash

#
# Place this file into this location: ~/bin/cmake
# (with executable rights)
#
# This is a wrapper for cmake!
# * It calls cmake -- see last line of the script
# It also:
# * Creates a file cmake_call.sh in the current directory (build-directory)
#   which stores the cmake-call with all it's cmake-flags etc.
#   (It also stores successive calls to cmake, so that you have a trace of all your cmake calls)
#
# You can simply reinvoke the last cmake commandline with: ./cmake_call.sh  !!!!!!!!!!
#
# cmake_call.sh is not created
#   when cmake is called without any flags,
#   or when it is called with flags such as --help, -E, -P, etc. (refer to NON_STORE_ARGUMENTS -- you might need to modify it to suit your needs)

SCRIPT_PATH=$(readlink -f "$BASH_SOURCE")
SCRIPT_DIR=$(dirname "$SCRIPT_PATH")

#http://stackoverflow.com/a/13864829
if [ -z ${SUDO_USER+x} ]; then
    # var SUDO_USER is unset
    user=$USER
else
    user=$SUDO_USER
fi

#http://stackoverflow.com/a/34621068
path_append ()  { path_remove $1 $2; export $1="${!1}:$2"; }
path_prepend()  { path_remove $1 $2; export $1="$2:${!1}"; }
path_remove ()  { export $1="`echo -n ${!1} | awk -v RS=: -v ORS=: '$1 != "'$2'"' | sed 's/:$//'`"; }

path_remove PATH ~/bin # when calling cmake (at the bottom of this script), do not invoke this script again!

# when called with no arguments, don't create cmake_call.sh
if [[ -z "$@" ]]; then
   cmake "$@"
   exit
fi

# variable NON_STORE_ARGUMENTS stores flags which, if any are present, cause cmake_call.sh to NOT be created
read -r -d '' NON_STORE_ARGUMENTS <<'EOF'
-E
--build
#-N
-P
--graphviz
--system-information
--debug-trycompile
#--debug-output
--help
-help
-usage
-h
-H
--version
-version
/V
--help-full
--help-manual
--help-manual-list
--help-command
--help-command-list
--help-commands
--help-module
--help-module-list
--help-modules
--help-policy
--help-policy-list
--help-policies
--help-property
--help-property-list
--help-properties
--help-variable
--help-variable-list
--help-variables
EOF

NON_STORE_ARGUMENTS=$(echo "$NON_STORE_ARGUMENTS" | head -c -1 `# remove last newline` | sed "s/^/^/g" `#begin every line with ^` | tr '\n' '|')

#echo "$NON_STORE_ARGUMENTS" ## for debug purposes

## store all the args
ARGS_STR=
for arg in "$@"; do
    if cat <<< "$arg" | grep -E -- "$NON_STORE_ARGUMENTS" &> /dev/null; then  # don't use   echo "$arg"  ....
                                                                              # since echo "-E"    does not do what you want here,
                                                                              # but   cat <<< "-E" does what you want (print minus E)
        # do not create cmake_call.sh
        cmake "$@"
        exit
    fi

    # concatenate to ARGS_STR
    ARGS_STR="${ARGS_STR}$(echo -n " \"$arg\"" | sed "s,\($(pwd)\)\(\([/ \t,:;'\"].*\)\?\)$,\$(pwd)\2,g")"
    #                                             replace $(pwd) followed by
    #                                                                  /             or
    #                                                                   whitespace   or
    #                                                                      ,         or
    #                                                                       :        or
    #                                                                        ;       or
    #                                                                         '      or
    #                                                                           "
    #                                                                    or nothing
    #                                             with \$(pwd)
done

if [[ ! -e $(pwd)/cmake_call.sh ]]; then
echo    "#!/usr/bin/env bash" >  $(pwd)/cmake_call.sh

# escaping:
# note in the HEREDOC below, \\ means \ in the output!!
#                            \$ means $ in the output!!
#                            \` means ` in the output!!
cat <<EOF                     >>  $(pwd)/cmake_call.sh

#http://stackoverflow.com/a/34621068
path_remove ()  { export \$1="\`echo -n \${!1} | awk -v RS=: -v ORS=: '\$1 != "'\$2'"' | sed 's/:\$//'\`"; }

path_remove PATH ~/bin # when calling cmake (at the bottom of this script), do not invoke ~/bin/cmake but real cmake!

EOF
else
    # remove bottom 2 lines from cmake_call.sh
    sed -i '$ d' $(pwd)/cmake_call.sh
    sed -i '$ d' $(pwd)/cmake_call.sh
fi

echo "ARGS='${ARGS_STR}'" >> $(pwd)/cmake_call.sh
echo "echo cmake \"\$ARGS\""  >> $(pwd)/cmake_call.sh
echo "eval cmake \"\$ARGS\""  >> $(pwd)/cmake_call.sh
#echo "eval which cmake"       >> $(pwd)/cmake_call.sh

chmod +x     $(pwd)/cmake_call.sh
chown $user: $(pwd)/cmake_call.sh

cmake "$@" 
```

用法：

```
mkdir build
cd    build
cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=$(pwd)/install .. 
```

这将创建`cmake_call.sh`以下内容：

```
#!/usr/bin/env bash

#http://stackoverflow.com/a/34621068
path_remove ()  { export $1="`echo -n ${!1} | awk -v RS=: -v ORS=: '$1 != "'$2'"' | sed 's/:$//'`"; }

path_remove PATH ~/bin # when calling cmake (at the bottom of this script), do not invoke ~/bin/cmake but real cmake!

ARGS=' "-DCMAKE_BUILD_TYPE=Debug" "-DCMAKE_INSTALL_PREFIX=$(pwd)/install" ".."'
echo cmake "$ARGS"
eval cmake "$ARGS" 
```

最后第三行存储 cmake 参数。您现在可以通过简单地调用来重新调用您使用的确切命令行：

```
./cmake_call.sh 
```

脚注：

(***1)`~/bin/cmake`通常在 PATH 中，因为`~/.profile`. 第一次创建`~/bin/cmake`时，可能需要注销并重新登录，以便 .profile 看到`~/bin`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-25T16:44:44.937

实现相同目标的一种非常 Linux 特定的方式：

```
if(${CMAKE_SYSTEM_NAME} STREQUAL Linux)
    file(STRINGS /proc/self/status _cmake_process_status)

    # Grab the PID of the parent process
    string(REGEX MATCH "PPid:[ \t]*([0-9]*)" _ ${_cmake_process_status})

    # Grab the absolute path of the parent process
    file(READ_SYMLINK /proc/${CMAKE_MATCH_1}/exe _cmake_parent_process_path)

    # Compute CMake arguments only if CMake was not invoked by the native build
    # system, to avoid dropping user specified options on re-triggers.
    if(NOT ${_cmake_parent_process_path} STREQUAL ${CMAKE_MAKE_PROGRAM})
        execute_process(COMMAND bash -c "tr '\\0' ' ' < /proc/$PPID/cmdline"
                        OUTPUT_VARIABLE _cmake_args)

        string(STRIP "${_cmake_args}" _cmake_args)

        set(CMAKE_ARGS "${_cmake_args}"
            CACHE STRING "CMake command line args (set by end user)" FORCE)
    endif()
    message(STATUS "User Specified CMake Arguments: ${CMAKE_ARGS}")
endif() 
```

# ruby-on-rails - 如何在 Rails 应用程序中格式化呈现的 yaml 数组？

> ID：10205987
> 
> 赞同：1
> 
> 时间：2012-04-18T08:52:03.653
> 
> 标签：ruby-on-rails, yaml

你能帮我解决这个问题吗？我没有找到任何关于此的文档，毫无疑问，因为这是一件如此简单的事情，以至于没有人想把它写下来！

我正在调试 Rails 应用程序中的一些 oauth 功能，并且需要定期引用访问令牌，我将其呈现为文本 to_yaml。

`render :text => request.env["omniauth.auth"].to_yaml`

有没有一种快速格式化响应的方法？我目前在浏览器中显示了一个长数组，这使得阅读非常具有挑战性！

我可以让每个项目显示在单独的行上，最好嵌套在父项目下吗？

例如，目前我有这个：`--- provider: twitter uid: '#####' info: nickname: username name: User Name`我想要这个：

```
--- 
provider: twitter 
uid: '#####' 
info: 
    nickname: username 
    name: User Name 
```

我确定我忽略了一些非常明显的东西。感谢有人可以向我指出！

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T08:58:46.223

使用魔法`pre`标签：

```
<pre><%= @foo.to_yaml %></pre> 
```

编辑：更适合您的示例：

```
render :text => "<pre>#{request.env["omniauth.auth"].to_yaml}</pre>" # quick and dirty 
```

如果您经常使用它，请在某处将其重构为辅助方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T09:06:48.640

最简洁的方式：

```
<%= debug @foo %> 
```

它样式`pre`标签与`debug_dump`类。

# winforms - 从 IronPython shell 打开 winform 而不阻塞 shell 或表单

> ID：10205989
> 
> 赞同：0
> 
> 时间：2012-04-18T08:52:19.563
> 
> 标签：winforms, ironpython, modal-dialog

我正在从 IronPython shell 启动一个 winform。然后我的表单调用了一个脚本，该脚本运行了几个小时并将输出写入 shell。

脚本运行时，GUI 被阻止（我无法点击任何按钮或将其最小化）。

我尝试了这些方法：

1.  当我用 ShowDialog() 打开表单时，表单保持在前面。我无法将 python shell 放在前面并滚动书面评论。我必须先关闭表单，但这不是我想要的。
2.  当我用 Show() 打开表单时，我可以将 python shell 放在前面并可以滚动它，但是当我关闭 python shell 时（在关闭 winform 之前），winform 保持打开状态并且现在被阻止；我只能使用任务管理器杀死它。

所以，我想要的是案例 2 中的情况，但是当我关闭我的 python shell 时，winform 也应该自动关闭。

在这里阅读了一些其他问题后，我考虑使用 Show() 开始表单，但将 Modal 属性设置为 true，但是当我尝试从 shell 执行此操作时，它说该属性是私有的。我在 Visual Studio 中创建了表单，那么是否可以在某处设置 Modal 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:38:39.377

我认为您需要通过以下方式让您的 UI 处理应用程序的 Windows 事件：

```
Application.DoEvents() 
```

模态窗口为您工作的原因是因为它在幕后自动循环并自动处理窗口消息。

这是一个示例 C# 和 IronPython 代码，用于模拟显示 Windows 窗体的长时间运行脚本

```
var py = Python.CreateEngine();
var script = @"
import clr
clr.AddReference('System.Windows.Forms')
from System.Windows.Forms import *
from System.Threading import *
frm = Form()
frm.Show()
while True:
    Thread.Sleep(100)
    Application.DoEvents()
";
var source = py.CreateScriptSourceFromString(script);
var scope = py.CreateScope();
source.Execute(scope); 
```

请注意，python 代码只是无限循环（模拟您长时间运行的脚本）重要的是您的脚本有机会能够调用 DoEvents 来更新 UI。如果不是这种情况，并且您的脚本将在单个调用上阻塞很长时间，您可能会考虑在单独的线程中运行脚本本身，这将允许您让主线程可用于处理消息。

在创建线程时要小心，Winforms 不喜欢从单独的线程创建或更新，因此请确保通过将它们同步到主线程来调用 UI 更新方法。

使用上面的示例代码，当我关闭控制台窗口时，Winform 也会被窗口自动销毁。所以我没有看到你描述的问题。

# python - 在 htsql 中自定义 csv 输出

> ID：10205990
> 
> 赞同：1
> 
> 时间：2012-04-18T08:52:22.157
> 
> 标签：python, sql, htsql

我想知道是否有人知道在**htsql**中自定义 csv 输出的方法，尤其是分隔符和编码？

我想避免对每个结果进行迭代，并通过配置和/或扩展找到一种方法。

预先感谢。

安东尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:24:52.963

如果您希望 TAB 作为分隔符，请使用**tsv**格式（例如 /query/:tsv 而不是 /query/:csv）。

除了 UTF-8 之外，没有其他方法可以指定编码。您可以在客户端上手动重新编码输出。

# jasper-reports - JRDesignExpression setText() 语法

> ID：10205991
> 
> 赞同：0
> 
> 时间：2012-04-18T08:52:28.537
> 
> 标签：jasper-reports

我正在使用 JasperReports Java API。我正在使用 JRDesignExpression 在报告中显示值，代码如下：

```
JRDesignExpression expression = new JRDesignExpression();
expression.setText("$F{" + fieldName + "}"); 
```

我在一些在线示例中看到了 $F{somename} 语法并只是复制了它，因为 setText() 没有记录，就像 JasperReports API 的大部分内容一样：http: [//jasperreports.sourceforge.net/api/net/sf/jasperreports /engine/design/JRDesignExpression.html#setText(java.lang.String](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/design/JRDesignExpression.html#setText(java.lang.String) )

但是其他地方是否有一些描述该语法的文档？例如，我想指定数字的格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T15:24:21.570

语法是正确的。我遇到了同样的问题，我应用了文本并看到了*空*值。原来问题出在我的代码上。在进行所有更改之前，我将*JasperDesign*编译为*JasperReport 。*所以确保你做了所有的修改，然后编译。

```
JasperDesign jasperDesign = JRXmlLoader.load(inputStream);

//perform all modifications

JasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign);

//continue with export 
```

并确保您实际上将它添加到一些*JRDesignTextField*

# java - Eclipse + JSF + Facelets + 复合组件 = CANNOT_FIND_FACELET_TAGLIB

> ID：10205992
> 
> 赞同：4
> 
> 时间：2012-04-18T08:52:29.533
> 
> 标签：java, eclipse, jsf-2, facelets, composite-component

我正在尝试将复合组件添加到我的 JSF Facelets 应用程序中。

复合组件（email.xhtml）如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:composite="http://java.sun.com/jsf/composite"
    xmlns:h="http://java.sun.com/jsf/html">

<h:head>
    <title>This content will not be displayed</title>
</h:head>
<h:body>
    <composite:interface>
        <composite:attribute name="value" required="false" />
    </composite:interface>

    <composite:implementation>
        <h:outputLabel value="Email id: "></h:outputLabel>
        <h:inputText value="#{cc.attrs.value}"></h:inputText>
    </composite:implementation>
</h:body>
</html> 
```

使用页面（emailuserpage.xhtml）如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:em="http://java.sun.com/jsf/composite/emcomp/">

<h:head>
    <title>Using a sample composite component</title>
</h:head>

<body>
    <h:form>
        <em:email value="my@email.address" />
    </h:form>
</body>
</html> 
```

我的复合组件的路径是`src/main/webapp/resources/emcomp/email.xhtml`. 我的用户页面的路径是`src/main/webapp/emailuserpage.xhtml`.

**但是我在 emailuserpage.xhtml 中同时收到了编译时和运行时警告，并且浏览器中没有显示任何内容（除了警告消息）**

Eclipse JSF HTML 编辑器中显示的编译时警告：

```
xmlns:em="http://java.sun.com/jsf/composite/emcomp/"
NLS missing message: CANNOT_FIND_FACELET_TAGLIB in: 
 org.eclipse.jst.jsf.core.validation.internal.facelet.messages 
```

Eclipse 浏览器中显示的运行时警告（javax.faces.PROJECT_STAGE=Web.xml 中的开发）：

```
Warning: The page /emailuserpage.xhtml declares namespace http://java.sun.com/jsf/composite/emcomp/ and uses the tag em:email , but no TagLibrary associated to namespace. 
```

我已经看过这个问题（它没有解决问题）：[NLS missing message: CANNOT_FIND_FACELET_TAGLIB](https://stackoverflow.com/q/7546219/987687)

我正在使用 Eclipse 版本的`m2e`和`m2e-wtp`插件：

```
Eclipse Java EE IDE for Web Developers
Version: Indigo Service Release 2
Build id: 20120216-1857 
```

**关于我做错了什么的任何想法？我是否以某种方式错误地包含了复合组件，或者我使用了错误的目录来存储我的资源？这是 Eclipse/配置问题吗？**

**[编辑]**

回应丹尼尔的评论

SOURCE 目录结构：

*   项目/src/main/
    *   爪哇/
    *   网页应用/

部署目录结构：

*   项目
    *   HTML 文件
    *   资源/（包括 emcomp/ 文件夹）
    *   元信息/
    *   WEB-INF/（配置文件和 lib/ 文件夹）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T13:17:52.413

从 XML 命名空间 URI 中删除尾部斜杠。

```
xmlns:em="http://java.sun.com/jsf/composite/emcomp" 
```

# sql - Hibernate Query 中的多个聚合函数

> ID：10205994
> 
> 赞同：1
> 
> 时间：2012-04-18T08:52:43.200
> 
> 标签：sql, hibernate, hql, aggregate

我想要一个 HQL 查询，它本质上是这样做的：

```
select quarter, sum(if(a>1, 1, 0)) as res1, sum(if(b>1, 1, 0)) as res2 from foo group by quarter; 
```

我想要一个列表作为我的输出列表`Summary Class ->`

```
Class Summary
{
long res1;
long res2;
int quarter;
} 
```

如何在 HQL 中实现这种聚合？目标对象的休眠映射是什么？我不想使用会返回`List<Object[]>`然后将其转换为的 SQL 类型的查询`List<Summary>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T10:39:16.957

由于`Summary`不是实体，因此您不需要为其映射，您可以创建适当的构造函数并改用 HQL 构造函数表达式。聚合函数和`if`s 也是可能的，但您需要使用`case`语法而不是`if`.

因此，如果`Foo`是映射到表的实体`Foo`，它将如下所示：

```
select new Summary(
    f.quarter,
    sum(case when f.a > 1 then 1 else 0 end),
    sum(case when f.b > 1 then 1 else 0 end)
) from Foo f group by f.quarter 
```

**也可以看看：**

*   [第 16 章 HQL：Hibernate 查询语言](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/queryhql.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:17:01.160

映射中的子选择可能是可能的。查看hibernate 文档中的[更复杂的关联映射](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/associations.html#assoc-complex "nnn")。我从未尝试过这种可能性。

但即使是休眠的家伙也推荐“ *......但使用 HQL 或条件查询来处理这些情况更实际。* ”这就是我要做的：在 HQL 语句中使用 group-by 并使用 List。与 group-by 在数据库中使用的时间相比，将此列表复制到合适对象列表中的额外时间可以忽略不计。但您似乎不喜欢这种可能性。

第三种可能性是在包含您的分组依据的数据库中定义一个视图，然后为该视图创建一个法线映射。