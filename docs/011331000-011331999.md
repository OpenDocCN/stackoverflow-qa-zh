# StackOverflow 问答 11331000-11331999

# youtube - Sencha Touch：如何在 iPhone 上播放视频而不是全屏？

> ID：11331002
> 
> 赞同：0
> 
> 时间：2012-07-04T14:26:58.333
> 
> 标签：youtube, sencha-touch-2, fullscreen

我的问题如标题所述。

这是代码。

```
 {
            xtype: 'list',
            id: 'msgList',
            itemTpl: new Ext.XTemplate(  
                '<div class="video youtube"><iframe class="youtube-player" type="text/html" width="240" height="160" src="http://www.youtube.com/embed/{string}" frameborder="0"></iframe></div>'      
            ),
            store: {
                fields: ['string']
        } 
```

当代码在 Safari 上运行时，它可以正常工作，因为在其中播放视频。但是在 iPhone 上，当我点击视频时，它只是进入全屏模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:33:25.353

由于您使用的框架是基于 HTML 的，因此除了在 iPhone 上全屏播放视频外，无法以任何方式播放视频。

即使您是本地编码，我相信按照您的要求去做仍然是一件令人头疼的事情；iPhone 视频播放器并非设计为嵌入在其他内容中运行。

# resharper - 如何告诉 ReSharper 在自动建议时区分大小写？

> ID：11331004
> 
> 赞同：0
> 
> 时间：2012-07-04T14:27:01.157
> 
> 标签：resharper, autosuggest

当我在 ReSharper 中编程并弹出自动建议并输入：

“物品”

它建议：

*   物品
*   项目 ID

并选择第一个值。但我希望 reSharper 给正确书写的那个（小“i”=>itemId）一个更高的优先级，就像 VS 通常默认行为一样，并在我按 Enter 或 Tab 时选择它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:51:28.517

我猜 ReSharper 会尝试在您的输入和可用完成选项之间选择最接近的匹配项。实际上，在您的特定情况下，它会在 i、it 和 ite 上选择小写选项 (itemId) - 也就是说，直到您输入整个单词“item”。一个明显的解决方案是在击中第一个字符后立即按 Enter 或 Tab）

# python - 如何使用 wxBoxers 在框架内排列 wxWidgets？

> ID：11331006
> 
> 赞同：0
> 
> 时间：2012-07-04T14:27:05.133
> 
> 标签：python, wxpython, wxwidgets

我正在尝试使用 wxSizer 在面板内排列小部件。我可以看到小部件已排列，但它们没有进入框架内。谁能告诉我我做错了什么？

```
import wx

class MyRegion(wx.Frame):
    def __init__(self):        
        wx.Frame.__init__(self, None, -1)

        self.panel = wx.Panel(self,-1,pos=(70,200), size=(300,300))
        self.panel.SetBackgroundColour((128,128,128)) # dark grey       

        sizer = wx.BoxSizer(wx.VERTICAL)

        b1 = wx.Button(self, label="TEXT1")
        b2 = wx.Button(self, label="TEXT2")
        b3 = wx.Button(self, label="TEXT3")

        sizer.Add(b1)
        sizer.Add(b2)
        sizer.Add(b3)

        self.panel.SetSizer(sizer)
        sizer.Fit(self.panel)

if __name__ == "__main__":
    app = wx.PySimpleApp()
    myRegion = MyRegion()
    myRegion.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:33:35.727

您应该使面板成为按钮的父级，而不是框架。

```
b1 = wx.Button(self.panel, label="TEXT1") 
```

这样做的原因是，尽管 sizer 控制项目的定位，但 UI 中的父/子关系仍然由直接映射到底层 OS 控件的 wx 对象控制。

# join - 是否可以将 Doctrine 1.2.x 查询结果组织为具有单个数组而不是多维

> ID：11331007
> 
> 赞同：0
> 
> 时间：2012-07-04T14:27:08.270
> 
> 标签：join, doctrine

目前，通过我所有的内连接和左连接，我得到了多维数组。有没有办法将结果作为单个数组获取，例如，而不是类似的东西

```
Array(
    [0] => Array(
        'name'   => 'Sample',
        [TABLE2] => Array(
            'name' => 'Connected sample'
        ),
    ),
) 
```

得到类似的东西

```
Array(
    [0] => Array(
        'name'        => 'Sample',
        'table2.name' => 'Connected sample',
    ),
) 
```

或者如果列具有不同的名称，则

```
Array(
    [0] => Array(
        'name' => 'Sample',
        'job'  => 'Connected sample',
    ),
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:59:28.727

我不明白你为什么要这样做，但你总是可以将连接列映射到主要结果：

```
$query->addSelect("(SELECT t.column FROM Table2 t WHERE t.table1_id=o.id) AS job") ; 
```

只是一个例子，假设您的主要别名是“o”并且它是 one-2-one。这里不需要连接。

# c - 从列表中删除重复元素的最有效方法

> ID：11331012
> 
> 赞同：1
> 
> 时间：2012-07-04T14:27:24.307
> 
> 标签：c, data-structures

我有一个未排序的列表，我想从中删除重复项。在 C 中执行此操作最有效的方法是什么。在我的情况下，列表是数组的链表。换句话说，几个数组链接在一起。重复只能发生在不同的数组中。因此，例如，数组 1 内不能有重复项，但可以在数组 1 和 2 中找到相同的数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T14:30:22.933

这基本上是对[Element Distinctness Problem](http://en.wikipedia.org/wiki/Element_distinctness_problem)的修改。该链接通过几种可能的解决方案。

一种常见且简单的解决方案是仅对列表进行排序并通过排序列表，删除任何重复项。这将为您提供 O(n*log(n)) 算法

如果您使用哈希表，您可以做得更好（O（n））。遍历数组，将每个元素插入到哈希表中。如果发生碰撞，您可能已经找到了重复项，您可以对这两个元素进行快速比较。

# android - Lua 可以单独用于应用程序开发吗？

> ID：11331014
> 
> 赞同：2
> 
> 时间：2012-07-04T14:27:42.097
> 
> 标签：android, ios, lua

虽然有几个问题提到了将 Lua 与其他语言结合使用，但我想知道是否可以仅在 Lua 中创建适用于 iOS 和 Android 的应用程序。如果不可能，您能推荐一种合适的语言吗？C# 是一个竞争者，因为每个平台都以各种形式支持它。C++ 也有一些摆弄的可能性。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T14:32:15.750

尝试使用 Corona SDK。[http://developer.coronalabs.com/](http://developer.coronalabs.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T03:33:20.577

[Moai](http://getmoai.com/moai-faqs.html)是 CoronaSDK 的替代品，用于仅在 Lua 中开发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T00:20:56.273

对于非移动平台（Windows、Linux、Mac），我推荐[LÖVE](http://love2d.org)。

# keyboard - 结合 keybd_event 和 PostKeybdMessage 模拟快捷方式

> ID：11331017
> 
> 赞同：3
> 
> 时间：2012-07-04T14:27:47.360
> 
> 标签：keyboard, windows-mobile, compact-framework, keyboard-shortcuts, windows-ce

我想为我们的 Windows Mobile 应用程序的远程控制功能模拟快捷方式。应该支持任何可能的快捷方式（想想`Ctrl`+`/`或`Alt`+ `ä`）。

有了`keybd_event`我可以很好地模拟快捷键，但这个功能只允许使用[虚拟键代码。](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx)因此，我想到了`PostKeybdMessage`允许我将任何字符发送到前台窗口的功能。但是如果我结合这两个调用，Windows 将只打印字符而不是执行快捷方式。

**这是我尝试过的：**

*   静默发送 CTRL 键 ( `KEYEVENTF_SILENT`)
*   `KeyShiftAnyCtrlFlag`在`PostKeybdMessage`通话中添加
*   玩了很多缓冲区和`PostKeybdMessage`调用标志（这很令人困惑）

**我的问题是：**

*   可以`PostKeybdMessage`用来模拟快捷方式还是我只是在浪费时间？如果可以，我在代码示例中做错了什么？
*   是否有发送特殊字符（变音符号、#、=、...）的技巧`keybd_event`？
*   还有其他方法可以模拟快捷方式吗？

**简单的测试应用**

```
public partial class ShortcutTest : Form
{
  private const int KEYEVENTF_KEYUP = 0x0002;
  private const int HWND_FOREGROUND = -1;

  private const uint KEY_STATE_DOWN = 0x0080;
  private const uint KEY_SHIFT_NO_CHARACTER = 0x00010000;
  private const uint KEY_SHIFT_ANY_CONTROL = 0x40000000;

  private const byte VK_CONTROL = 0x11; // Keys.ControlKey

  [DllImport("coredll.dll", SetLastError = true)]
  internal static extern void keybd_event(byte bVk, byte bScan, int dwFlags, int dwExtraInfo);

  [DllImport("coredll.dll")]
  private static extern bool PostKeybdMessage(int hwnd, uint vKey, uint KeyStateFlags, uint cCharacters, uint[] pShiftStateBuffer, uint[] pCharacterBuffer);

  public ShortcutTest()
  {
    InitializeComponent();
  }

  private void timer1_Tick(object sender, EventArgs e)
  {
    timer1.Enabled = false;

    keybd_event((byte)Keys.ControlKey, 0, 0, 0);

    // this would work: keybd_event((byte)Keys.X, 0, 0, 0);

    // this won't work
    SendChar('x');

    //keybd_event((byte)Keys.X, 0, KEYEVENTF_KEYUP, 0);

    keybd_event((byte)Keys.ControlKey, 0, KEYEVENTF_KEYUP, 0);

    button1.Enabled = true;
  }

  private void button1_Click(object sender, EventArgs e)
  {
    timer1.Enabled = true;
    button1.Enabled = false;
  }

  public void SendChar(char ch)
  {
    uint[] input = new uint[] { (uint)ch };

    uint[] downStates = { KEY_STATE_DOWN | KEY_SHIFT_ANY_CONTROL };
    uint[] upStates = { KEY_SHIFT_NO_CHARACTER | KEY_SHIFT_ANY_CONTROL };

    PostKeybdMessage(HWND_FOREGROUND, 0, downStates[0], 1, downStates, input);

    // tested with KeyShiftDeadFlag and some others, with \0 char ...
    PostKeybdMessage(HWND_FOREGROUND, 0, upStates[0], 1, upStates, input);
  }

} 
```

**编辑：**我只是查看了 OpenNETCF 的实现，`SendKeys`它们`keybd_event`只使用（例如，“+a”会失败）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:31:59.413

您是否尝试过使用 SendInput？我实际上正在使用 c++，并使用以下代码：

```
INPUT input[4];
memset(input, 0, sizeof(INPUT)*4);
input[0].type = INPUT_KEYBOARD;
input[0].ki.wVk = VK_MENU;

input[1].type = INPUT_KEYBOARD;
input[1].ki.wVk = L'a';

input[2].type = INPUT_KEYBOARD;
input[2].ki.wVk = VK_MENU;
input[2].ki.dwFlags = KEYEVENTF_KEYUP;

input[3].type = INPUT_KEYBOARD;
input[3].ki.wVk = L'a';
input[3].ki.dwFlags = KEYEVENTF_KEYUP;

SendInput(4, input, sizeof(INPUT)); 
```

生成看起来应该可以工作的消息，我在 WM6.5 上检查了间谍。

# spring-batch - Spring Batch：RowMapper 没有得到 Autowuired

> ID：11331018
> 
> 赞同：0
> 
> 时间：2012-07-04T14:27:51.910
> 
> 标签：spring-batch

我有这个配置：

```
<bean id="reader" class="com.company.MyReader" scope="prototype">
    <property name="dataSource" ref="dataSource"/>
    <property name="sql" value="select * from dummy"/>
    <property name="rowMapper" ref="rowMapper"/>
    <property name="verifyCursorPosition" value="false"/>
</bean>

<bean id="rowMapper" class="com.company.MyRowMapper>
    <property name="firstName" value="hillary/>
</bean> 
```

MyRowMapper 实现**org.springframework.jdbc.core.RowMapper**

MyReader 扩展了**org.springframework.batch.item.database.JdbcCursorItemReader**

在 MyReader 中，**调用 super.doRead()**，这将返回 MyRowMapper 对象。然而，这些对象并没有被容器自动装配——属性 firstName 返回为空。请注意，MyReader 正在按预期由 Spring 容器自动装配。

需要做什么才能自动装配 RowMapper？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:09:26.333

您是否已注释 MyReader 以通知 Spring 它需要 MyRowMapper 的实例？

```
 public class com.company.MyReader{

        @Autowired
        private MyRowMapper mapper;

        public void setMyRowMapper(MyRowMapper newMapper){
            this.mapper = newMapper;
        }
    } 
```

# r - 对数据进行分箱并绘制直方图

> ID：11331023
> 
> 赞同：0
> 
> 时间：2012-07-04T14:28:03.273
> 
> 标签：r, statistics, python-2.7, data-analysis

我有一个值列表（这些是正值和负值）。例如说我有 35000 个数字（+ve 和 -ve 都在其中）。

我想要做的是对它们进行装箱，即0-200（也从-200到0）、201-400（-400到201）之间的数值，......等等直到48,800-50000（- 50000 至 48,500）。

一旦我有了这些值，直方图或任何其他表示的绘制就更容易了。我可以将其用于 excel 或在 python 或 PERL 或 R 中绘制它。

但第一阶段本身有点棘手。

例如，您可以考虑以下数据：

```
 -9030
   -75
  8005
  -251
 65994
-12111
-11643
 19749
-23324
 10012
   -77 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:17:13.427

```
set.seed(12345)
n <- 35000
dataset <- data.frame(Number = runif(n, min = -200, max = 50000))
library(ggplot2)
ggplot(dataset, aes(x = Number)) + geom_histogram(binwidth = 200) 
```

给予

![在此处输入图像描述](../Images/83348c0c15b27d96dcae993d002872c3.png)

# java - 将 JAX-RS 2.0 与 CDI/Weld 结合使用而不是 Guice 的优势？

> ID：11331024
> 
> 赞同：5
> 
> 时间：2012-07-04T14:28:05.967
> 
> 标签：java, jax-rs, guice, cdi, weld

JAX-RS 2.0 的一个目标是整合 CDI 并`@Context`用普通`@Inject`注入替代旧的。但是，如果我查看[JSR 339](http://jcp.org/en/jsr/detail?id=339)，则没有提到这一点。那么究竟什么是 CDI 集成？将 JAX-RS 与 CDI 一起使用而不是 Google Guice 会有什么优势吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T22:21:00.377

`@Context`仍然是在 JAX-RS 2.0 中进行注入的官方方式。然而，规范确实声明了一个实现可以`@Inject`同时使用`@Context`（来自 JAX-RS 2.0 EDR 3 的第 10.2.5 节）：

> 实现不得要求使用`@Inject`或`@Resource`触发 JAX-RS 注释字段或属性的注入。实现可能支持这种用法，但应该警告用户关于不可移植性。

因此，不确定 JAX-RS 2.0 的所有实现是否都支持`@Inject`，如果想要更改 JAX-RS 2.0 实现，可能会出现不兼容。

我做了一些研究，似乎 Jersey 2.0`@Inject`至少得到了支持。

我想使用`@Inject`而不是的优点`@Context`是它与`@Inject`JAX-RS Web 服务中的所有非 JAX-RS 资源更加一致。

# mysql - 试图了解 InnoDB 表上的 MySQL 死锁

> ID：11331029
> 
> 赞同：11
> 
> 时间：2012-07-04T14:28:20.810
> 
> 标签：mysql, transactions, innodb, database-deadlocks

我试图了解 MySQL 在同一表上的并发客户端处理期间发现的死锁。这是“SHOW InnoDB STATUS”命令的有趣部分：

```
------------------------
LATEST DETECTED DEADLOCK
------------------------
120704 16:17:51
*** (1) TRANSACTION:
TRANSACTION 0 3547576, ACTIVE 0 sec, process no 10886, OS thread id 140547111458560 inserting
mysql tables in use 1, locked 1
LOCK WAIT 2 lock struct(s), heap size 368, 1 row lock(s), undo log entries 1
MySQL thread id 41941, query id 1725666 localhost testsuite update
insert into `INode` (`status`,`_type`,`group`,`ctime`,`parent`,`shared`,`basename`,`_rowid`,`displayname`,`user`,`content_type`,`mtime`,`position`,`atime`,`size`) values ('Published','Group','12','2012-07-04 16:17:48.996869','2',null,'1','12','1','3','application/x-empty','2012-07-04 16:17:48.996896','1','2012-07-04 16:17:48.996914',null)
*** (1) WAITING FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 0 page no 5554 n bits 80 index `INodeparent_basename` of table `testsuite`.`INode` trx id 0 3547576 lock mode S waiting
Record lock, heap no 12 PHYSICAL RECORD: n_fields 3; compact format; info bits 32
 0: len 4; hex 80000002; asc     ;; 1: len 1; hex 31; asc 1;; 2: len 4; hex 8000000b; asc     ;;

*** (2) TRANSACTION:
TRANSACTION 0 3547575, ACTIVE 0 sec, process no 10886, OS thread id 140547107845888 inserting, thread declared inside InnoDB 493
mysql tables in use 1, locked 1
13 lock struct(s), heap size 3024, 17 row lock(s), undo log entries 21
MySQL thread id 41940, query id 1725808 localhost testsuite update
replace into `INode` (`status`,`_type`,`position`,`group`,`ctime`,`parent`,`basename`,`_rowid`,`displayname`,`user`,`content_type`,`mtime`,`shared`,`atime`,`size`) values ('Published','Group','0','2','2012-07-04 16:17:49','1','groups','2','admin','3','application/x-empty','2012-07-04 16:17:49',null,'2012-07-04 16:17:49',null),('Published','Group','1','11','2012-07-04 16:17:51.064074','2','1','11','1','3','inode/directory','2012-07-04 16:17:51.064074',null,'2012-07-04 16:17:51.064074',null)
*** (2) HOLDS THE LOCK(S):
RECORD LOCKS space id 0 page no 5554 n bits 80 index `INodeparent_basename` of table `testsuite`.`INode` trx id 0 3547575 lock_mode X locks rec but not gap
Record lock, heap no 3 PHYSICAL RECORD: n_fields 3; compact format; info bits 0
 0: len 4; hex 80000001; asc     ;; 1: len 6; hex 67726f757073; asc groups;; 2: len 4; hex 80000002; asc     ;;

Record lock, heap no 12 PHYSICAL RECORD: n_fields 3; compact format; info bits 32
 0: len 4; hex 80000002; asc     ;; 1: len 1; hex 31; asc 1;; 2: len 4; hex 8000000b; asc     ;;

*** (2) WAITING FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 0 page no 5554 n bits 80 index `INodeparent_basename` of table `testsuite`.`INode` trx id 0 3547575 lock_mode X waiting
Record lock, heap no 12 PHYSICAL RECORD: n_fields 3; compact format; info bits 32
 0: len 4; hex 80000002; asc     ;; 1: len 1; hex 31; asc 1;; 2: len 4; hex 8000000b; asc     ;;

*** WE ROLL BACK TRANSACTION (1) 
```

我从这个日志中了解到，事务 (1) 正在等待获取`INodeparent_basename`table索引上的共享锁`testsuite`。`INode`. 现在，事务 (2) 在同一个索引上具有排他锁。但奇怪的是，事务 (2) 也在等待给定表的 X 锁。这是为什么？如果事务（2）已经有锁，为什么还要等待呢？

（总的来说，我还没有找到任何文档可以准确解释如何读取状态命令的输出 - 如果有人也可以向我指出这一点，那将会很有趣）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:57:41.840

In this case, transaction 2 acquired a shared lock for a previous statement.(*** (2) HOLDS THE LOCK(S):)

Then, transaction 1 attempted to acquire an exclusive lock on the same row, and is waiting for the shared lock to be removed.

Then, transaction 2, in another statement, attempted to acquire an exclusive lock on the same row. Deadlock occured.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-06T11:53:34.553

我不知道它是否有帮助，但要考虑的一件事是导致锁定的操作顺序。似乎在应用程序的一个位置，您正在创建锁，例如

表 1 表 2

在另一个做

表 2 表 1（仅举例）

在没有看到实际代码的情况下，我建议您研究这样的事情并确保您以相同的工作/更新/插入记录顺序执行它们，以便它们都可以像这样工作

从表 1 插入/更新，然后插入/更新表 2

这样，第一个锁总是首先尝试在表 1 上。如果不能成功，那么它甚至不会尝试表 2，直到表 1 被释放。

然后，对表 2 应用任何更改并完成您的事务。当表 2 和表 1 都被释放时，表 1 上等待释放的下一个事务可以继续进行。

# matlab - MATLAB：检查“if”语句是否为真的优雅方法

> ID：11331033
> 
> 赞同：2
> 
> 时间：2012-07-04T14:28:35.413
> 
> 标签：matlab, if-statement

我正在编写一个解决方案，我需要检查一个数组是否包含任何 NaN 值。如果不是，那么我可以继续对数据运行一个函数。这是我目前的解决方案：

```
if find(isnan(inputData))
% Nothing goes here since I only want the function to run if the 'if' statement fails
else
    doFunction(inputData);
end 
```

是否有一种优雅的方式来否定“if”语句？从而避免空的第一个子句？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-04T14:31:49.717

```
if ~any(isnan(x(:)))
    doFunction(inputData);
end 
```

这对你来说够优雅吗？如果不是，你觉得这个怎么样？

```
if all(isfinite(x(:)))
    doFunction(inputData);
end 
```

# c# - Button.Click 自定义控件

> ID：11331039
> 
> 赞同：3
> 
> 时间：2012-07-04T14:29:00.793
> 
> 标签：c#, wpf

我想创建一个从 ContentControl 派生的新自定义控件（它将是窗口中其他控件的容器），但我想要一个按钮来关闭它。（实际上我想要一个无边框的窗口，但使用类似系统的按钮来关闭它）。

所以我为包含两行网格的控件创建了样式，在上一行有一个带有单个按钮的 StackPanel。

如何将按钮的 Click 事件绑定到控件本身，以引发事件，甚至将关闭命令发送到父窗口？

```
<Grid>
<Grid.RowDefinitions>
    <RowDefinition Height="20" />
    <RowDefinition />
</Grid.RowDefinitions>
<Border Background="Azure" Grid.Row="0">
    <StackPanel Orientation="Horizontal">
        <Button HorizontalAlignment="Right" Content="X" Click="Close_Click" />
    </StackPanel>
    </Border>
<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Grid.Row="1"/>
</Grid> 
```

以及背后的代码：

```
static STContentControl()
{
DefaultStyleKeyProperty.OverrideMetadata(typeof(STContentControl), new FrameworkPropertyMetadata(typeof(STContentControl)));
}

public void Close_Click(object sender, RoutedEventArgs ea)
{

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T14:48:41.967

听起来您已将模板创建为资源，因此在运行时将其应用于控件。

您需要确保在 OnApplyTemplate 方法中为按钮连接单击事件（在您的控件上覆盖它）。

[http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.onapplytemplate.aspx](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.onapplytemplate.aspx)

所以你会像这样在你的 UC 上覆盖它：

```
class NewUC : UserControl
{
    public event EventHandler CloseClicked;

    public override void OnApplyTemplate()
    {
        Button btn = this.FindName("SomeButton") as Button;

        if (btn == null) throw new Exception("Couldn't find 'Button'");

        btn.Click += new System.Windows.RoutedEventHandler(btn_Click);
    }

    void btn_Click(object sender, System.Windows.RoutedEventArgs e)
    {
        OnCloseClicked();
    }

    private void OnCloseClicked()
    {
        if (CloseClicked != null)
            CloseClicked(this, EventArgs.Empty);
    }
} 
```

我在示例中添加了一个 CloseClicked 事件，您可以在父窗口中处理该事件。这不是路由事件，因此您必须在父控件中手动连接它

我认为您也可以使用 MouseLeftButtonDown 路由事件并检查按钮是否在父级别被单击-我自己会去...

# ruby-on-rails - ruby on rails 使用用户名或密码不起作用

> ID：11331040
> 
> 赞同：0
> 
> 时间：2012-07-04T14:29:11.387
> 
> 标签：ruby-on-rails, devise

我跟着这个[教程](https://github.com/plataformatec/devise/wiki/How-To%3a-Allow-users-to-sign-in-using-their-username-or-email-address)。

但是每当我尝试使用我的用户名和密码登录时，我都会收到以下错误

**无效的电子邮件或密码。**

我想既然我按照教程进行操作，它会起作用，但事实并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:55:04.340

好的，我只需要进行捆绑更新并重新启动开发服务器

# windows - ClearCase find and exec with %CLEARCASE_PN% in cmd 总是返回相同的元素

> ID：11331048
> 
> 赞同：1
> 
> 时间：2012-07-04T14:29:53.667
> 
> 标签：windows, clearcase, command-prompt, cleartool

我在 cleartool.exe 中执行了以下命令：

```
 cleartool> !
    Microsoft Windows XP [Version 5.1.2600]
    ...
    X:\dyn_view\vob\path>cleartool find . -type l -exec "cleartool describe
%CLEARCASE_PN%" -print 
```

*但是关于exec*的元素输出总是相同的，尽管在*print*中有所不同。如何在命令的*exec*部分输出正确的列表？

示例输出：

```
symbolic link ".\path\fileA.txt" -> ../../path/fileA.txt
  created ...
.\anypath\fileB.txt
symbolic link ".\path\fileA.txt" -> ../../path/fileA.txt
  created ...
.\anypath\fileC.txt 
```

其中 fileA 始终相同（部分 exec 参数），只有 fileB、fileC 等发生变化（部分打印参数）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:29:37.817

按照“ [cleartool find 命令的其他示例 ”中](http://www-01.ibm.com/support/docview.wss?uid=swg21124425)列出的示例

```
X:\dyn_view\vob\path>
cleartool find . -type l -exec "cleartool describe \"%CLEARCASE_PN%\"" 
```

所以：

*   `-print`最后没有
*   ' `\"`'`%CLEARCASE_PN%`考虑路径中的空格

请注意，您可以将其与[fmt_ccase](http://publib.boulder.ibm.com/infocenter/cchelp/v7r1m2/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/fmt_ccase.htm)结合使用以获得更精细的显示：

清除工具找到 . -type l -exec "cleartool describe -fmt \"%n %[slink_text]Tp\n\" \"%CLEARCASE_PN%\""

> 例子：

```
Y:\VOB_A>
cleartool find . -type l -exec "cleartool describe -fmt "%n%[slink_text]Tp\n\n\" \"%CLEARCASE_PN%\""
.\Directory\createsymlink.txt -->..\..\VOB_B\SymlinkFolder\createsymlink.txt 
```

和：

```
%[slink_text]Tp 
```

表示“遍历链接后，符号链接的目标”。

# shell - 将命令输出重定向到 cmd 脚本中的变量

> ID：11331054
> 
> 赞同：0
> 
> 时间：2012-07-04T14:30:25.570
> 
> 标签：shell, batch-file, certificate, cmd, keytool

我正在编写一个用于使用 keytool 创建自签名证书的 cmd 脚本。我想检查别名是否已经存在于 keystore 中，

所以我需要执行下面的命令并将其存储在一个变量中。因此，如果变量为空，我可以假设别名不存在，

```
 keytool -list -v -storepass "%KEYSTORE_PASS%" -keystore cert/seurat-keystore.jks ^| find "Alias name: 1" 
```

我试过了

```
 FOR /F "tokens=* delims=" %%A IN ('keytool -list -v -storepass "%KEYSTORE_PASS%" -keystore cert/seurat-keystore.jks ^| find "Alias name: 1"') DO SET Variable=%%A
    echo %Variable% 
```

但它显示回声关闭。我使用下面的代码在 shell 脚本中实现了相同的功能，

```
 if [ -n  "$(keytool -list -v -storepass "${KEYSTORE_PASS}" -keystore cert/seurat-keystore.jks | grep 'Alias name: 1')" ] ; then
   fi 
```

如何在 cmd 脚本中实现相同的功能？任何帮助将非常明显！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T01:03:32.543

打扰一下。您写道“如果变量为空，我可以假设别名不存在”。如果`echo %variable%`命令 show ECHO OFF，则变量为空！我认为你的代码是正确的，但稍微改变一下：

```
FOR /F "tokens=* delims=" %%A IN ('keytool -list -v -storepass "%KEYSTORE_PASS%" -keystore cert/seurat-keystore.jks ^| find "Alias name: 1"') DO SET Variable=%%A
if "%Variable%" == "" (
   echo The alias doesn't exists
) else (
   echo The alias is: %Variable%
) 
```

另一种方法是：

```
if not defined Variable (
   echo The alias doesn't exists
) else (
   echo The alias is: %Variable%
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:09:54.197

由于我没有这个`keytool`东西，我不知道它是什么或做什么。但是我用一个`ECHO`命令替换了它，它对我有用：

```
FOR /F "tokens=* delims=" %%A IN ('ECHO Alias name: 1 ^| find "Alias name: 1"') DO SET Variable=%%A
echo %Variable% 
```

输出是：

```
Alias name: 1 
```

当我将替换命令更改为 时`ECHO Alias name: 2`，输出有所不同：

```
ECHO is off. 
```

这意味着变量*没有被*初始化，这是意料之中的，因为这次`FIND`命令在输入流中找不到指定的字符串。

结论：`keytool`运行时可能不包含搜索词的输出，因此，您的变量没有被初始化。

# shell - 调用 sys 函数时使用 shell 变量

> ID：11331056
> 
> 赞同：0
> 
> 时间：2012-07-04T14:30:32.073
> 
> 标签：shell, variables

我的系统是 Ubuntu 10

**这是我的代码：**

```
#!/bin/bash
pid = `ps -ef | grep process_string | /usr/bin/awk '{print $2}'`
`kill -9 $pid` 
```

**pid**是process_string的进程id（只有一个匹配）

但是当我运行这个 sh 时，我不会终止进程

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:37:49.000

1.  您不能在作业的任何一侧都有空间。在这种情况下，它尝试`pid`使用 的参数`=`和 的标准输出来执行`ps -ef ...`。
2.  第二行将尝试执行 的输出`kill -9 $pid`，您不希望这样。
3.  `$(...)`比反引号更好用。

```
 #!/bin/bash
 pid=$(ps -ef | grep process_string | /usr/bin/awk '{print $2}')
 kill -9 $pid 
```

您可能希望使用`pgrep`来获取 pid，或者`pkill`直接`killall`按名称杀死（小心最后一个，因为名称暗示它将杀死命名程序的*所有*实例）。

# php - PHP XPath - 如何从结果中获取价值

> ID：11331059
> 
> 赞同：0
> 
> 时间：2012-07-04T14:30:37.253
> 
> 标签：php, xpath, domxpath

我有来自 Ebay 的以下 XML 文件

```
<?xml version="1.0"?>
<GeteBayDetailsResponse xmlns="urn:ebay:apis:eBLBaseComponents">
    <Timestamp>2012-07-04T12:02:14.541Z</Timestamp>
    <Ack>Success</Ack>
    <Version>779</Version>
    <Build>E779_INTL_BUNDLED_14986004_R1</Build>
    <SiteDetails>
        <Site>US</Site>
        <SiteID>0</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <SiteDetails>
        <Site>Canada</Site>
        <SiteID>2</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <SiteDetails>
        <Site>UK</Site>
        <SiteID>3</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <SiteDetails>
        <Site>Germany</Site>
        <SiteID>77</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <SiteDetails>
        <Site>Australia</Site>
        <SiteID>15</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <SiteDetails>
        <Site>France</Site>
        <SiteID>71</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <SiteDetails>
        <Site>eBayMotors</Site>
        <SiteID>100</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <SiteDetails>
        <Site>Italy</Site>
        <SiteID>101</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <SiteDetails>
        <Site>Netherlands</Site>
        <SiteID>146</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <SiteDetails>
        <Site>Spain</Site>
        <SiteID>186</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <SiteDetails>
        <Site>India</Site>
        <SiteID>203</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <SiteDetails>
        <Site>HongKong</Site>
        <SiteID>201</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <SiteDetails>
        <Site>Singapore</Site>
        <SiteID>216</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <SiteDetails>
        <Site>Malaysia</Site>
        <SiteID>207</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <SiteDetails>
        <Site>Philippines</Site>
        <SiteID>211</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <SiteDetails>
        <Site>CanadaFrench</Site>
        <SiteID>210</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <SiteDetails>
        <Site>Poland</Site>
        <SiteID>212</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <SiteDetails>
        <Site>Belgium_Dutch</Site>
        <SiteID>123</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <SiteDetails>
        <Site>Belgium_French</Site>
        <SiteID>23</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <SiteDetails>
        <Site>Austria</Site>
        <SiteID>16</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <SiteDetails>
        <Site>Switzerland</Site>
        <SiteID>193</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <SiteDetails>
        <Site>Ireland</Site>
        <SiteID>205</SiteID>
        <DetailVersion>1</DetailVersion>
        <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
    </SiteDetails>
    <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
</GeteBayDetailsResponse> 
```

我需要获取节点 SiteID 的值，其中节点 Site 与我传递的任何变量匹配。我的代码是：

```
$xml_file ='SiteDetails.xml';
$xmlDoc = new DomDocument();
$xmlDoc->load($xml_file);
$xpath = new DOMXpath($xmlDoc);

$siteIDList =  $xpath->query("/GeteBayDetailsResponse/SiteDetails[Site=$site]/SiteID");

var_dump($siteIDList);
echo $siteIDList->SiteID; 
```

我得到以下结果：

```
object(DOMNodeList)#11 (0) {
} 
```

任何人都可以帮忙吗？我想获得 3 的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:52:41.643

**编辑：**使用 Florent 回答中的 API `registerNamespace`。

您的 XML 文件包含默认命名空间。`ebay`因此，您可以在代码中针对默认命名空间 ( )注册一个变量名称，`urn:ebay:apis:eBLBaseComponents`如下所示，并使用以下 xpath

`$xpath->registerNamespace('ebay', 'urn:ebay:apis:eBLBaseComponents');`

`$siteIDList = $xpath->query("//ebay:Site[text()='$site']/following-sibling::ebay:SiteID/text()");`

**或者**

您可以使用以下 XPATH，除了评估它之外不需要任何额外的代码:-)

`//*[namespace-uri()='urn:ebay:apis:eBLBaseComponents' and name()='Site' and text()='$site']/following-sibling::*[namespace-uri()='urn:ebay:apis:eBLBaseComponents' and name()='SiteID']/text()`

**注意：** $site 是要匹配的`<Site>`节点的运行**时值。`<SiteID>`**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T14:37:49.700

我认为你必须`$site`用引号括起来并添加命名空间：

```
$xpath = new DOMXPath($xmlDoc);
$xpath->registerNamespace('ebay', 'urn:ebay:apis:eBLBaseComponents');

$siteIDList = $xpath->query("/ebay:GeteBayDetailsResponse/ebay:SiteDetails[ebay:Site='$site']/ebay:SiteID"); 
```

只是为了确定，能给我们`$site`提供这个结果的值吗？

**编辑：**按照 Vaman Kulkarni 的建议添加了命名空间。

# ruby-on-rails - 使用 RSpec 和 Ruby on Rails 的国际字符

> ID：11331060
> 
> 赞同：12
> 
> 时间：2012-07-04T14:30:44.683
> 
> 标签：ruby-on-rails, ruby, testing, rspec

我刚刚开始使用 RSpec，我在 RSpec github repo 上复制了一个非常简单的测试，以确保一切按预期工作：

```
require 'spec_helper'

describe 'Home Page' do
  it "Welcomes the user" do
    visit '/products'
    page.should have_content("Welcome")
  end
end 
```

当我将字符串更改为“Olá”或“Caçamba”之类的内容时，问题就开始了。任何带有特殊字符的字符串。当我这样做时，我收到以下错误：

```
invalid multibyte char (US-ASCII) (SyntaxError)
invalid multibyte char (US-ASCII)
syntax error, unexpected $end, expecting ')'
page.should have_content("Olá") 
```

关于如何解决它的任何想法？也许一些配置选项？非常感谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-04T14:33:04.987

您很可能在文件顶部遗漏了一条[*神奇的注释：*](https://stackoverflow.com/a/8879331/357743)

```
# encoding: UTF-8 
```

如果没有这个指令，Ruby 会尝试使用默认的 US-ASCII 编码来解释您的文件并且失败，因为这个字符集不包含像`á`or之类的符号`ç`。

这是 James Edward Gray II 关于 Ruby 中默认源编码的[博客文章](http://graysoftinc.com/character-encodings/ruby-19s-three-default-encodings)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T14:43:31.877

国际字符几乎总是使用 US-ASCII 范围之外的值，这只是您在键盘上找到的英文字母、数字和一小组符号（如果您使用美式键盘）。带有口音、花哨或什至不是字符的字符（例如表情符号）用一个以上的字节表示，这就是用来表示 US-ASCII 的全部内容。数值到字符的映射称为编码。在 US-ASCII 之后，有 ISO-8891-1，它为文件添加了重音符号（主要是西班牙语、法语、瑞典语等）（例如：é、å、ü 等）。之后，您将获得 Unicode，其中包括 ˝、‰、Ó、^、◊ 或几乎任何您能用*任何*语言想到的符号。

默认情况下，Ruby 将程序和其中的所有字符串编码为 US-ASCII。您可以使用魔术注释更改整个文件（以及其中的所有内容）的编码（请参阅@KL-7 的答案），也可以逐个字符串更改它：

```
"Olé".force_encoding("ISO-8891-1") 
```

Ruby 还支持一种称为 ASCI 8 位的虚构编码，它本质上是没有编码的二进制数据。

# c - 这是一个可接受的 malloc 示例吗？

> ID：11331064
> 
> 赞同：1
> 
> 时间：2012-07-04T14:30:59.923
> 
> 标签：c, arrays, dynamic

以下代码是否可以接受。也就是说，这是做 malloc 的正确方法吗？

这是我可以为我的情况工作的最少代码。我认为这是“正确的方法”，但我对 C 语言非常陌生，总体上没有太多线索。我阅读了几篇相关的 SO 帖子，但似乎没有一个完全符合这种情况。评论？

```
#include <stdio.h>

// example of calling a function that creates a dynamically sized array and
// returns it to a caller that doesn't know or care about the size of the array

char* return_char_array(){
     // for the sake of the example, we determined the size to be 100
     char *f=malloc(100*sizeof(char));
     // stick something in the first couple of elements for test purposes
     *f=65;
     *(f+1)=66;
     return f;
}

int main(){
    // we want this function to remain ignorant of the size or other workings 
    // of the array, so, no '[]' or 'malloc'
    char *wipc = return_char_array();
    // well i guess it cares a little, because we assume there are at least 2 elements...
    printf("%c,%c\n",*(wipc),*(wipc+1));
    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T14:33:06.207

> 评论？

使用`f[0]`代替`*f`和`f[1]`代替`*(f + 1)`。也一样`wipc`。别忘了打电话`free`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:35:49.983

我认为在这种情况下还可以。但请记住释放分配的内存:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T14:33:13.347

任何函数不知道它正在使用的数组的大小都没有任何优势。评论需要解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T14:36:14.700

乍一看，我承认你没有释放（）你的分配空间，这很糟糕（内存泄漏）。那是我能看到的唯一真正的“错误”。但是，如果您想以 Code-Review 的形式获得更多见解，您可以将其发布在 Stackexchange 站点“Code-Review”上，因为该站点更多地用于解决实际问题和错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T14:37:57.923

好吧，它确实是最少的代码。我宁愿将额外的标记字节放在缓冲区的末尾，并记住在 malloc 时将额外的 2 个字节添加到缓冲区长度

这 2 个字节保留供内部使用，不应向用户公开。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T14:43:13.437

不，这是一个坏主意，没有多大意义。分配内存的代码需要负责释放它，否则您将有很大的内存泄漏可能性。

通常你会写这样的算法：

```
// caller.c

#include "stuff.h"  // the code uses the code module "stuff"

void caller (void)
{
  int* array = malloc(N * sizeof(int));

  do_stuff(array, N);

  free(array);
} 
```

_

```
// stuff.h

void do_stuff (int* array, int size); 
```

_

```
// stuff.c

#include "stuff.h"

void do_stuff (int* array, int size)
{
  ...
} 
```

通过这个程序设计，“do_stuff()”不需要关心内存分配，它只是执行它的算法。也不必担心内存泄漏，因为分配和释放是在同一个地方完成的。

此外，通过这种设计，do_stuff() 将与静态分配的内存（简单数组）一样工作。

这种设计几乎是 C 语言中的标准。整个 Windows API 都使用这种设计作为一个例子。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-04T14:50:36.797

几点评论，

1）PL。进行适当的错误处理。如果 malloc 失败会发生什么？

```
char *f=malloc(100*sizeof(char))
if (NULL == f)
{   
   //Take actions ..Exit with error or return NULL..
} 
```

2）PL。避免像 100 这样的硬编码值（可能有 #define MAX 100）

3）PL。确保正确释放内存。

# asp.net-mvc - 如何在 foreach asp.net MVC 中呈现部分内容

> ID：11331070
> 
> 赞同：1
> 
> 时间：2012-07-04T14:31:22.840
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

我有两个部分视图，我想在另一个中调用其中一个。它在这种情况下工作，但是当我放入 foreach 时它显示错误。

@{ 布局 = null; }

```
<div class="comment">
@foreach (var item in Model)
{
<div class="co10">
<div class="co12 , text1">@Html.DisplayFor(modelitem => item.Date)</div>
<div class="co11 , text5">@Html.DisplayFor(modelitem => item.NameFamily)<font class="text1"> در </font><font class="text6">@Html.DisplayFor(modelitem => item.Topic.Title)</font></div>
</div>
<div class="co13 , text1">
<div class="co14">@Html.DisplayFor(modelitem => item.CommentMessage)</div>
<div class="but4 , text15"><a href="#1">پاسخ</a></div>
</div>
<div class="co15"></div>
@{Html.RenderAction("_RespondedComment", "SharedEdu", new { Q4 = item.ID });}
}

</div> 
```

当我将 _RespondedComment 放在 foreach 循环中时，它会显示错误，但是当我将它从 foreach 中取出时它可以工作，但我想为每个评论显示响应评论。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:34:46.257

你直接在`foreach`.
那是一个代码上下文，因此您无法编写`@{ ... }`以放入更多代码。

相反，直接输入代码。

# python - 使用 Beautiful Soup 按类名获取内容

> ID：11331071
> 
> 赞同：16
> 
> 时间：2012-07-04T14:31:24.463
> 
> 标签：python, beautifulsoup

使用 Beautiful Soup 模块，如何获取`div`类名为的标签的数据`feeditemcontent cxfeeditemcontent`？是吗：

```
soup.class['feeditemcontent cxfeeditemcontent'] 
```

或者：

```
soup.find_all('class') 
```

这是 HTML 源代码：

```
<div class="feeditemcontent cxfeeditemcontent">
    <div class="feeditembodyandfooter">
         <div class="feeditembody">
         <span>The actual data is some where here</span>
         </div>
     </div>
 </div> 
```

这是Python代码：

```
 from BeautifulSoup import BeautifulSoup
 html_doc = open('home.jsp.html', 'r')

 soup = BeautifulSoup(html_doc)
 class="feeditemcontent cxfeeditemcontent" 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-05T14:22:08.517

Beautiful Soup 4 将 "class" 属性的值视为列表而不是字符串，这意味着 jadkik94 的解决方案可以简化：

```
from bs4 import BeautifulSoup                                                   

def match_class(target):                                                        
    def do_match(tag):                                                          
        classes = tag.get('class', [])                                          
        return all(c in classes for c in target)                                
    return do_match                                                             

soup = BeautifulSoup(html)                                                      
print soup.find_all(match_class(["feeditemcontent", "cxfeeditemcontent"])) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-04T15:16:49.963

试试这个，也许这个简单的东西太多了，但它有效：

```
def match_class(target):
    target = target.split()
    def do_match(tag):
        try:
            classes = dict(tag.attrs)["class"]
        except KeyError:
            classes = ""
        classes = classes.split()
        return all(c in classes for c in target)
    return do_match

html = """<div class="feeditemcontent cxfeeditemcontent">
<div class="feeditembodyandfooter">
<div class="feeditembody">
<span>The actual data is some where here</span>
</div>
</div>
</div>"""

from BeautifulSoup import BeautifulSoup

soup = BeautifulSoup(html)

matches = soup.findAll(match_class("feeditemcontent cxfeeditemcontent"))
for m in matches:
    print m
    print "-"*10

matches = soup.findAll(match_class("feeditembody"))
for m in matches:
    print m
    print "-"*10 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-07-24T05:29:55.420

`soup.findAll("div", class_="feeditemcontent cxfeeditemcontent")`

因此，如果我想`<div class="header">`从 stackoverflow.com 获取类头的所有 div 标签，BeautifulSoup 的示例将类似于：

```
from bs4 import BeautifulSoup as bs
import requests 

url = "http://stackoverflow.com/"
html = requests.get(url).text
soup = bs(html)

tags = soup.findAll("div", class_="header") 
```

它已经在 bs4[文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#searching-by-css-class)中。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-16T06:26:47.913

```
from BeautifulSoup import BeautifulSoup 
f = open('a.htm')
soup = BeautifulSoup(f) 
list = soup.findAll('div', attrs={'id':'abc def'})
print list 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-04T14:55:52.827

```
soup.find("div", {"class" : "feeditemcontent cxfeeditemcontent"}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T14:56:05.863

检查此错误报告：[https ://bugs.launchpad.net/beautifulsoup/+bug/410304](https://bugs.launchpad.net/beautifulsoup/+bug/410304)

如您所见，Beautiful soup 并不能真正理解`class="a b"`为两个类`a`和`b`.

但是，正如第一条评论中出现的那样，一个简单的正则表达式就足够了。在你的情况下：

```
soup = BeautifulSoup(html_doc)
for x in soup.findAll("div",{"class":re.compile(r"\bfeeditemcontent\b")}):
    print "result: ",x 
```

注意：这已在最近的测试版中得到修复。我没有浏览最新版本的文档，也许你可以这样做。或者，如果您想使用旧版本使其正常工作，则可以使用上述方法。

# c# - 在不阻塞交互的情况下集成应用程序的推荐方法

> ID：11331072
> 
> 赞同：2
> 
> 时间：2012-07-04T14:31:29.827
> 
> 标签：c#, multithreading, transactions

我正在使用它们自己的数据库的多个应用程序的集成。

我有三个应用程序，例如 A、B、C，分别具有相应的数据库 databaseA、databaseB 和 databaseC。

这里 A 是父应用程序，而一个事务发生在应用程序 A 中，它更新“databaseA”并使用同一线程调用应用程序 B 提供的 API 并更新“databseB”。

现在我想使用应用程序 C 提供的一些 API 将数据从应用程序 B 发送到应用程序 C，同时“数据库 B”发生了一些变化。如果我使用用于 A->B 事务的同一线程可能会导致事务超时和许多其他问题。

相反，我可以做些什么来正确集成这三个应用程序。我想这样的事情会很好。但我不知道如何制作这样的触发器..（在我的情况下 A->B,A->C 不遵循某些原因）

> ```
> 1.A-->databaseA triggers One another transaction i.e 
> 2.databaseA-->API from B-->databaseB  it triggers another transaction  
> 3.databaseB -->API from C -->databaseC 
> ```

我想在应用程序级别执行此操作（而不是从数据库触发）。什么是从当前事务触发新事务并且失败率较低的最佳方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:45:40.740

您需要某种异步且可靠的消息传递。因此，应用 A 在处理其消息时不会等待应用 B，依此类推。但这意味着您可以访问代码。

我可以认为这样的机制可以通过 MSMQ 实现：

```
App A -> Message1 -> AppB Inbound Queue
App A -> Message2 -> AppB Inbound Queue

.... Later, when App B is able to do some work

App B Inbound Queue -> transaction -> Message1 -> App B 
App B processes Message 1 -> App B Database
App B -> Message3 -> AppC Inbound Queue

.... and so on 
```

MSMQ 集成可以通过使用托管消息队列 API 或通过 MSMQ 使用 WCF（我推荐后者）来完成。

这样所有三个应用程序都是松散耦合的，并且可以在所有组件中异步完成处理。

正如@dtryon 所建议的，可以在 MSMQ 上提供抽象层的其他解决方案是[NServiceBus](http://nservicebus.com/)。我自己从未使用过它，但只听说过它的好消息。

# twitter-bootstrap - Twitter-Bootstrap：导航栏中的登录表单

> ID：11331073
> 
> 赞同：10
> 
> 时间：2012-07-04T14:31:36.610
> 
> 标签：twitter-bootstrap

我想在 twitter 导航栏中放置一个登录内联表单。

我已经这样做了，但我无法正确推送表单... [http://jsfiddle.net/v34Sv/](http://jsfiddle.net/v34Sv/)

所有 twitter 组件（span、offset、pull-right）都失败了，我担心在使用绝对位置时会丢失响应组件。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T10:09:37.163

在正确的位置使用按钮形成内联

```
<div class="container-fluid">
<div class='navbar'>
    <div class='navbar-inner'>
        <div class='container-fluid'>
            <a class='brand'>Test</a>
            <ul class='nav'>
                <li><a>Item 1</a></li>
                <li><a>Item 2</a></li>
            </ul>
            <form class="navbar-form pull-right">
                <input type="text" class="span2" placeholder="Login">
                <input type="text" class="span2" placeholder="Password">
                <input type="submit" value="Login" class="btn"/>
            </form>
        </div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-04T14:52:03.640

该按钮不在完美的位置，但至少表单是内联的（我希望它有所帮助）。

```
<div class='navbar'>
 <div class='navbar-inner'>
    <div class='container-fluid'>
        <a class='brand'>Test</a>
        <ul class='nav'>
            <li><a>Item 1</a></li>
            <li><a>Item 2</a></li>
        </ul>
        <form class="navbar-search pull-right">
            <input type="text" class="span2" placeholder="Login">
            <input type="text" class="span2" placeholder="Password">
            <input type="submit" value="Login" class="btn"/>
        </form>
     </div>
  </div>
</div> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-27T12:17:57.033

类 navbar-form 就是为此而生的。

```
<form class="navbar-form form-inline pull-right">
    <input type="text" placeholder="Email">
    <input type="password" placeholder="Password">
    <button type="submit" class="btn">Sign in</button>
</form> 
```

取自[http://examples.getbootstrap.com/jumbotron/index.html](http://examples.getbootstrap.com/jumbotron/index.html)？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-04T21:14:56.600

**HTML：**

```
<div class='navbar'>
  <div class='navbar-inner'>
    <div class='container-fluid'>
      <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    <a class='brand'>Test</a>
    <ul class='nav nav-collapse collapse'>
        <li><a>Item 1</a></li>
        <li><a>Item 2</a></li>

    </ul>
    <ul class='nav nav-collapse collapse pull-right'>
        <li class=""><form class="navbar-search">
        <input type="text" class="span2" placeholder="Login">
        <input type="text" class="span2" placeholder="Password">
        <input type="submit" value="Login" class="btn"/>
    </form></li>
    </ul>
 </div> 
```

​</p>

**CSS：**

```
form.login {
  border: 1px solid red;
}

form.login input {
  height: 14px;
  width: 140px;
  background: #F5F5F5;
  border-radius: 2px;
}

@media (min-width:768px) {
  .navbar-search .btn {
    margin:-9px 0 0 0;
  }
} 
```

**jsFiddle：**

[http://jsfiddle.net/baptme/v34Sv/5/](http://jsfiddle.net/baptme/v34Sv/5/)

# python - 需要让 Subprocess 通信更好

> ID：11331074
> 
> 赞同：0
> 
> 时间：2012-07-04T14:31:40.547
> 
> 标签：python, subprocess, pexpect

我也是 python 编程和编程的新手。如果这听起来是一个基本问题，请原谅。

我正在开发一个在 git 上执行 make clean 和 make 的工具。

我正在使用 subprocess 模块来运行这些 make 命令。

一项观察是：我使用通信来查看 make 命令的结果。沟通的问题是，它等待 subprocess.popen 完成然后发送输出。

如果 make 命令运行 30 分钟，则屏幕上没有输出 30 分钟，然后通信发送它在 30 分钟内收集的全部数据。

问题是：有没有办法在标准输出上显示某些内容时从子进程获取输出，然后在屏幕上打印出来？

到目前为止我写的代码是：

```
def makeClean(path,cmd1='make',cmd2='clean'):
    print '+++++++++++ RUNNING MAKE CLEAN  +++++++++++ \n'
    c = subprocess.Popen([cmd1 , cmd2],stdout = subprocess.PIPE, stderr = subprocess.PIPE,cwd = path)
    out = c.communicate()[0]
    for line in out.split('\r\n'): print line 
```

对此有什么想法吗？我尝试使用 pexpect.run() 但这对我不起作用......

-维杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:35:01.037

如果输出应该转到标准输出，那么不要将其重定向回调用进程。只是

```
subprocess.call([cmd1, cmd2], cwd=path) 
```

会做。如果您确实需要以某种方式处理输出，请不要使用`communicate`而是直接从管道中读取：

```
proc = subprocess.Popen([cmd1, cmd2], stdout=subprocess.PIPE, cwd=path)
for ln in proc.stdout:
    process(ln) 
```

# java - 如何在服务器端 Java 中使用 JavaScript 图表库，如 D3.js 或 Raphaël

> ID：11331076
> 
> 赞同：11
> 
> 时间：2012-07-04T14:31:46.753
> 
> 标签：java, javascript, raphael, d3.js

我想将[D3.js](http://d3js.org/)（或者[Raphaël](http://raphaeljs.com/)）用于使用带有 Java 的 XSL-FO 生成的后端报告。应该使用这些 JavaScript 库有几个原因：

1.  它们呈现的图表比我在 Java 库 (IMO) 中看到的更漂亮
2.  它们支持 SVG 和 PNG（据我所知），这在 XSL-FO 中是必需的
3.  它们还将用于应用程序的前端部分。在后端使用 Java 重用它们将减少开发人员的学习曲线和代码库占用空间。

因此，使用任何类似的 Java 库都是不太受欢迎的选择。

现在，在 Java 中使用 D3.js 最直接的方法是使用像[selenium](http://seleniumhq.org)这样的重型工具来呈现一个虚拟的 HTML 页面并在其中执行 JavaScript。但这对我来说似乎有点矫枉过正。

有没有更简单的方法可以直接在同一个 Java 进程中执行这种 JavaScript？我问是因为 D3.js 旨在在 HTML 文档的上下文中工作。我不确定这是否可能与[Rhino](http://www.mozilla.org/rhino/)或其他 Java 脚本实现有关

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T14:39:21.453

你可以使用[phantom.js](http://phantomjs.org/)。它是一个基于 webkit 的无头浏览器，它允许您在不需要浏览器的情况下运行 JavaScript。

使用它，您可以执行一个系统调用来运行 phantom.js 用于您的 JavaScript 代码和输入。然后它将相应地创建您的输出。请参阅[此示例](http://code.google.com/p/phantomjs/wiki/QuickStart#Rendering)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T15:15:41.070

大约一年前，我从事过这项工作。我设法让部分 HighCharts（javascript 中的 SVG 图形）与 Rhino 一起工作。我不得不将 env.js 插入其中，并遇到了很多关于画布元素的问题，尤其是在边界框计算方面。Rhino 中的对象没有实现 getBBox()，它不容易被伪造。

我的目标是最终用 Batik 将其呈现为 PDF ......这花了太多时间，我们决定改用另一种技术。

所以，今天，我们使用[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)，它不是 Java，而是一个静态可执行文件，可以嵌入到 jar 中并从 java 端轻松启动。顺便说一句，如果你想渲染某些东西，xvfb 在 Linux 上是必需的。这和 PhantomJS 差不多

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-09T20:03:25.433

您可能想看看这些 d3 包装器：

*   javafx-d3

[https://github.com/stefanidelloth/javafx-d3](https://github.com/stefaneidelloth/javafx-d3)

*   gwt-d3：

[https://github.com/gwtd3/gwt-d3](https://github.com/gwtd3/gwt-d3)

*   “自由代码图表和 D3 包装器”：

[https://vaadin.com/directory#!addon/freecode-charts-and-d3-wrapper](https://vaadin.com/directory#!addon/freecode-charts-and-d3-wrapper)

# python - 默认文本以及列表文本变量条目小部件 Tkinter

> ID：11331079
> 
> 赞同：3
> 
> 时间：2012-07-04T14:32:08.200
> 
> 标签：python, list, user-interface, tkinter, ttk

我有以下输入框，由于获取值，我在文本变量中放置了一个列表选项。

但是我想知道是否可以在背景中放置一个默认文本，以便显示每个框中需要哪些值（如灰度文本、'值 1、值 2 等）。

```
self.numbers = [StringVar() for i in xrange(self.number_boxes) ] #Name available in global scope.       
box=Entry(self.frame_table,bg='white',borderwidth=0, width=10, justify="center", textvariable=self.numbers[i]) 
```

我可以在框内单击鼠标时添加一些更改“文本变量”的内容，或者我可以简单地添加另一个文本变量或文本来设置默认文本吗？

```
 self.box = []

  for i in xrange(self.number_boxes):

        self.clicked = False
        self.box.append(Entry(self.frame_table,bg='white',borderwidth=0, width=10, justify="center", textvariable=self.numbers[i], fg='grey'))
        self.box[i].grid(row=row_list,column=column+i, sticky='nsew', padx=1, pady=1) 
        self.box[i].insert(0, "Value %g" % float(i+1))
        self.box[i].bind("<Button-1>", self.callback) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T03:59:17.783

为了在您的`Entry`小部件中放置默认文本，您可以使用[此处](http://effbot.org/tkinterbook/entry.htm#Tkinter.Entry.insert-method)`insert()`描述的方法。

```
box.insert(0, "Value 1")    # Set default text at cursor position 0. 
```

现在，为了`box`在用户在框内单击鼠标后更改内容，您需要将事件*绑定*到`Entry`对象。例如，以下代码在单击框时删除框的内容。[（您可以在此处](http://effbot.org/tkinterbook/tkinter-events-and-bindings.htm)阅读有关事件和绑定的信息。）下面我将展示一个完整的示例。

请注意，删除框中的文本可能仅适用于第一次单击（即删除默认内容时），因此我创建了一个全局标志`clicked`来跟踪它是否已被单击。

```
from tkinter import Tk, Entry, END    # Python3\. For Python2.x, import Tkinter.

# Use this as a flag to indicate if the box was clicked.
global clicked   
clicked = False

# Delete the contents of the Entry widget. Use the flag
# so that this only happens the first time.
def callback(event):
    global clicked
    if (clicked == False):
        box[0].delete(0, END)         #  
        box[0].config(fg = "black")   # Change the colour of the text here.
        clicked = True

root = Tk()
box = []                              # Declare a list for the Entry widgets.

box.append(Entry(fg = "gray"))        # Create an Entry box with gray text.
box[0].bind("<Button-1>", callback)   # Bind a mouse-click to the callback function.
box[0].insert(0, "Value 1")           # Set default text at cursor position 0.

box.append(Entry(fg = "gray"))        # Make a 2nd Entry; store a reference to it in box.
box[1].insert(0, "Value 2")

box[0].pack()                         #
box[1].pack()

if __name__ == "__main__":
    root.mainloop() 
```

# google-app-engine - GAE 数据存储：如何在 db.DateTimeProperty() 上设置过滤器

> ID：11331083
> 
> 赞同：1
> 
> 时间：2012-07-04T14:32:17.830
> 
> 标签：google-app-engine, google-cloud-datastore

嗨，我是 GAE 和 Python 的新手，来自 PHP 和 MySQL 背景。如果我的问题很幼稚并且没有足够的功课，我深表歉意。

在我的应用程序中，我有很多大师，我想一一显示这些大师（将视图切换到列表模式的选项）。

我所有的主模型都有一个名为 ts 的属性，保存时会自动填充当前时间戳。

我的主课上有一个 get_rec 方法，它默认获取最后保存的记录。单击导航按钮时，系统应该采用上一个或下一个。为了实现这一点，我编写了这段代码

```
q = db.Query(modl)
if pos == "prev" :
    #ts is a string returned by JSON as 2012-07-03T14:19:36.817000
    q.filter("ts <", ts.replace("T", " "))
    q.order('-ts')
elif pos == "next" :
    q.filter("ts >", ts.replace("T", " "))
    q.order('ts')
else :
    q.order('-ts')
res = q.fetch(1)
return simplejson.dumps(res, cls=jsonEncoder) 
```

但返回的数据对象始终是最后一条记录。顺便说一句，发送 ts 的 json 在时间前面有一个 T，而在数据查看器控制台上，我找不到任何 T，而是一个空格。我尝试用空格替换 T 。我应该将日期对象作为 datetime.datetime() 而不是日期字符串传递吗？

我在这里错过了什么吗...

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:12:24.867

您需要将字符串转换为日期时间 -我认为**过滤器**不适用于字符串。

阅读第一个帮助[http://docs.python.org/library/datetime.html](http://docs.python.org/library/datetime.html)

使用 strftime 和 strptime（格式或解析）[http://docs.python.org/library/datetime.html#strftime-strptime-behavior](http://docs.python.org/library/datetime.html#strftime-strptime-behavior)

请为答案投票！

# python - 为离线用户安装 Jinja2？

> ID：11331085
> 
> 赞同：0
> 
> 时间：2012-07-04T14:32:18.073
> 
> 标签：python, installation, jinja2

我的电脑操作系统是 Windows。我想知道是否有一种方法可以在未连接到网络的 PC 上安装 jinja2？谢谢~海豚网~

# android - android将退出图标设置为项目菜单

> ID：11331088
> 
> 赞同：1
> 
> 时间：2012-07-04T14:32:28.973
> 
> 标签：android

我有一个包含一个项目的菜单（退出应用程序的项目），我想为该项目设置一个图标，我正在这样工作（`exit is the name of my icon`）；

```
<item android:id="@+id/bexitMenuExit"
        android:title="Exit"
        android:alphabeticShortcut="@drawable/exit"
        android:icon="@android:drawable/ic_menu_preferences"
        ></item> 
```

但我没有得到项目上的图标，我没有找到`android:icon`退出，我找到了帮助，设置...，但不是用于 exti

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T14:41:18.620

如果它不起作用意味着 - 将自己的退出图标推送到您项目 `drawable`的任何文件夹中，并使用下面的代码作为您的图标

`android:icon="@drawable/youriconname"`

否则试试这个图标 -

[![图片](../Images/1b113c9c687356bb9d6d1734209e10d0.png)](https://i.stack.imgur.com/RkLR1.png)

如果你想使用上面的图标。喜欢这段代码

```
<item android:id="@+id/bexitMenuExit"
      android:icon="@android:drawable/ic_menu_close_clear_cancel"
      android:title="Exit"/> 
```

看看[Android Drawables](https://web.archive.org/web/20150625025354/http://androiddrawableexplorer.appspot.com:80/)，你会发现很多 android 图标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T14:33:51.233

我相信您正在寻找的是：

```
@drawable/ic_menu_prefrences 
```

这是我会尝试的：

```
<item android:id="@+id/bexitMenuExit"
    android:title="Exit"
    android:alphabeticShortcut=""
    android:icon="@drawable/exit"
    ></item> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T14:41:17.430

你正在寻找这样的东西`android:icon="@android:drawable/ic_menu_close_clear_cancel"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T10:32:28.373

简单地这样做或复制它，确保你有名为（退出）的图标

> ```
>  android:title="Exit" android:icon="@drawable/exit"/> 
> ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T08:50:38.487

只是回答没有找到任何退出按钮图标部分，[Googleasset-studio](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/)是一个很棒的地方，您可以在其中找到最常用的 android 图标，甚至更好地在多个主题的所有可绘制分析中生成自己的图标。

# java - DTO 可以扩展另一个 DTO 吗？

> ID：11331089
> 
> 赞同：3
> 
> 时间：2012-07-04T14:32:31.420
> 
> 标签：java, dto

这更像是一个理论问题而不是实际问题。

我们有一个分层架构，有点像：

```
UI <--DTO1--> UI_JavaHandler <--DTO2--> Backend 
```

DTO1 需要比 DTO2 多一点数据，并且需要一个额外的字符串。那么问题来了，DTO1应该扩展DTO2还是应该封装DTO2呢？在第一种情况下，UI_JavaHandler 中的代码将是：

```
public void acceptAction(DTO1 dto1) {
    //do something with dto1.getString();
    backend.call(dto1);
} 
```

而在第二种情况下：

```
public void acceptAction(DTO1 dto1) {
    //do something with dto1.getString();
    backend.call(dto1.getDto2());
} 
```

扩展 Java DTO2 工作正常，但我不喜欢仅使用扩展来添加新数据的想法。我习惯于使用扩展来添加新的行为（比如 Animal 被 Dog 和 Cat 扩展）。由于聚合可以使用相同的效果，我们不应该使用扩展，但我没有强烈反对这种 (ab)use(?) 的论据。

另一方面，我可能完全错了。

你对此有什么看法？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-22T11:09:52.230

添加专用字段没有继承。

*   后端数据模型明确分离，扩展类显式使用。这也防止了反模式`DTO1Handler extends DTO2Handler`对超类的 a 和其他不适当的用法。链式不可为空的 getter 是可以接受的。

*   额外数据是一种常见现象，因此只要不得重写方法以使用该额外数据，您实际上就是在**解耦数据**。您是说*这个额外的字段不是那些其他字段的计算的一部分*。

*   *仅出于完整性考虑：*在极少数情况下，可以将这样的额外字段设置为超类的瞬态字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-22T09:56:46.517

如果您使用的是 Hibernate 架构，我会为那些只需要 UI 的注释使用 @Transient 注释，因为带有注释的 DTO 属性不会被解析到 DB 端。

例如

```
@Transient
private String type; //data used in UI only 
```

# php - 长 POST 数据被 Suhosin 丢弃，可能是什么设置造成的？

> ID：11331094
> 
> 赞同：5
> 
> 时间：2012-07-04T14:32:54.807
> 
> 标签：php, apache, post

我有一个运行 PHP 脚本的 Apache 服务器，该脚本通过具有多个字段的 POST 请求接收数据。其中一个字段可能很长，当它达到 512 kB 和 1 MB 之间的某个位置时，它会被丢弃，即接收到的 POST 根本不包含该字段，但其他字段存在且正常。

以下是当前的相关设置`php.ini`：

```
upload_max_filesize = 64M
memory_limit = 128M
post_max_size = 128M
suhosin.post.max_value_length = 64000000
suhosin.request.max_value_length = 64000000 
```

我试图在单个 POST 变量中发送 1024 * 1024 个符号，并且该变量仍然被丢弃。

PS 找不到如何获取 Suhosin 的日志。

**更新：**我已通过指定禁用 Suhosin `suhosin.simulation = On`，现在长数据已成功进入我的 PHP 脚本。问题是我不想完全禁用 Suhosin，我只需要调整限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T08:51:53.457

我补充说：

suhosin.post.max_value_length = 64000000 suhosin.request.max_value_length = 64000000

在 suhosin.ini 中，它起作用了。

php.ini 中的设置：

upload_max_filesize = 64M memory_limit = 128M post_max_size = 128M

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:35:33.993

尝试起来：

*   post_max_size
*   上传最大文件大小
*   内存限制

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T22:17:17.770

lightster 在这里的回答[如何增加 PHP 中的最大 POST 变量？](https://stackoverflow.com/questions/9399315/how-to-increase-maximum-post-variable-in-php)当 suhosin 配置没有时帮助我：

“PHP 5.3.9 引入了 max_input_vars 配置选项，默认值为 1000。查看 PHP 手册的运行时配置部分。默认值和更改日志位于页面顶部。

可以通过更新服务器的 php.ini、添加 .htaccess 文件或在 httpd.conf 中添加一行来更改该值。”

我将其设置在 .htaccess 中：

php_value max_input_vars 2000

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T06:57:38.083

不得不禁用 Suhosin。仍然不确定哪个设置负责，因为我在问题中指定的设置没有帮助。

# doctrine - Doctrine2 使用错误的表格

> ID：11331095
> 
> 赞同：0
> 
> 时间：2012-07-04T14:32:59.237
> 
> 标签：doctrine, doctrine-orm

我有一个原则 2 用户实体，我尝试使用电子邮件找到它。

这是代码：

![在此处输入图像描述](../Images/e4fb1bc54b4d51de1606ee3b92049080.png)

这是我得到的查询

```
SELECT t1.username AS username2, t1.email AS email3, t1.display_name AS display_name4,     t1.password AS password5, t1.user_id AS user_id6, t1.surname AS surname7, t1.lastname AS lastname8, t1.avatar AS avatar9, t1.phone AS phone10, t1.birthday AS birthday11, t1.title AS title12, t1.salon AS salon13
FROM user t1
WHERE t0.email = ?
LIMIT 1 
```

那么它从哪里得到 t0 呢？它在其他地方使用 t1 吗？

我得到的错误是

```
SQLSTATE[42S22]: Column not found: 1054 Unknown column 't0.email' in 'where clause' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T19:30:31.513

仅供参考，如果您有像“UserSuper > GenericUserClass”这样的类继承，则类 GenericUserClass 应该是 @MappedSuperClass 而不是 @Entity。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:49:51.627

添加电子邮件属性后，您可能尚未更新数据库架构。

如果您使用的是 symfony2，请尝试运行

```
php app/console doctrine:schema:update --force 
```

# symfony - Symfony2 netbeans 7.1.2 和 phpunit

> ID：11331105
> 
> 赞同：1
> 
> 时间：2012-07-04T14:33:33.930
> 
> 标签：symfony, phpunit, netbeans-7.1

我正在努力让 phpunit 使用我的 symfony2 项目在 netbeans 中工作。

我已经在我的项目根目录中进行了子文件夹测试。尝试将项目链接到 phpunit.xml.dist 和 bootstrap.php.cash。并在该测试文件夹中创建了一个 MyProjectTestSuite.php 并将其放入我的项目属性中。

但这一切都让我犯了错误：

```
PHP Fatal error:  Uncaught exception 'PHPUnit_Framework_Exception' with message 'Could not find class "" in "C:\Program Files\NetBeans 7.1.2\php\phpunit\NetBeansSuite.php".' in C:\xampp\php\PEAR\PHPUnit\Util\Skeleton\Test.php:125
Stack trace:
#0 C:\xampp\php\PEAR\PHPUnit\TextUI\Command.php(157): PHPUnit_Util_Skeleton_Test->__construct('', 'C:\Program File...')
#1 C:\xampp\php\PEAR\PHPUnit\TextUI\Command.php(129): PHPUnit_TextUI_Command->run(Array, true)
#2 C:\xampp\php\phpunit(53): PHPUnit_TextUI_Command::main()
#3 {main}
  thrown in C:\xampp\php\PEAR\PHPUnit\Util\Skeleton\Test.php on line 125

Fatal error: Uncaught exception 'PHPUnit_Framework_Exception' with message 'Could not find class "" in "C:\Program Files\NetBeans 7.1.2\php\phpunit\NetBeansSuite.php".' in C:\xampp\php\PEAR\PHPUnit\Util\Skeleton\Test.php:125
Stack trace:
#0 C:\xampp\php\PEAR\PHPUnit\TextUI\Command.php(157): PHPUnit_Util_Skeleton_Test->__construct('', 'C:\Program File...')
#1 C:\xampp\php\PEAR\PHPUnit\TextUI\Command.php(129): PHPUnit_TextUI_Command->run(Array, true)
#2 C:\xampp\php\phpunit(53): PHPUnit_TextUI_Command::main()
#3 {main}
  thrown in C:\xampp\php\PEAR\PHPUnit\Util\Skeleton\Test.php on line 125 
```

并且测试没有被执行。

myprojectetssuite.php 看起来像这样。

```
<?php

use Symfony\Component\Finder\Finder;

class MyProjectTestSuite extends PHPUnit_Framework_TestSuite
{

    public static function suite()
    {
        $suite = new MyProjectTestSuite();
        $finder = new Finder();

        // ---------- COMMENT OUT TO TEST A SPECIFIC FILE ----------
        // $suite->addTestFile('../src/<yourbundle>/DefaultBundle/Tests/Controller/SomeControllerTest.php');
        // return $suite;
        // ----------

        echo "Searching for test cases...\n\n";
        foreach ($finder->files()->in('../src/')->name('*Test.php') as $file) {
            if (preg_match('%\\Tests\\[\w-\\]+Test.php%i', $file->getPathName())) {
                echo 'Adding test : ' . $file->getPathName() . "\n";
                $suite->addTestFile($file->getPathName());
            }
        }
        echo "\n";

        return $suite;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:27:58.430

好的 .. 如果测试套件没有找到任何测试，netbeans 会占用默认测试套件，它会出现。我稍微调整了我的代码，以便确定我找到了一些测试（注释掉了正则表达式）并且它们都在哪里。

# extjs - 使用 form.show() 显示视图 - 逻辑问题

> ID：11331115
> 
> 赞同：0
> 
> 时间：2012-07-04T14:34:00.017
> 
> 标签：extjs, extjs4, extjs-mvc, extjs4.1

`persomview`是 View 类的 ID。其部分定义如下；

```
Ext.define('ProjPerson.view.person.PersonTab' ,{
    extend:'Ext.tab.Panel',
    alias : 'widget.ptab',
    id:'ptabid', ...... 
```

现在从另一个视图类控制器方法中，我`PersonTab`使用以下代码调用要显示的；

```
var form = Ext.getCmp('ptabid');
form.show(); 
```

然后在萤火虫中说`form is not defined`。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:41:51.863

定义**itemId**并将其与 getCmp 一起使用

```
itemId:'ptabid', 
```

当没有可用的对象引用时，itemId 可用作获取对组件的引用的替代方法。[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.tab.Panel-cfg-itemId](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.tab.Panel-cfg-itemId)

如果你想找到活动标签，你可以使用

```
Ext.getCmp('center-region').getActiveTab() 
```

这里的“中心区域”来自布局。使用您在那里使用的适当布局区域。

# .net - windows磁盘写缓存会导致文件丢失吗？

> ID：11331119
> 
> 赞同：-1
> 
> 时间：2012-07-04T14:34:12.620
> 
> 标签：.net, windows, caching, disk

*以下问题不是典型的编程问题，但恕我直言，程序员受此影响并且最有可能有解决方案。*

我有一个与服务器通信的 Windows 桌面应用程序。客户端应用程序具有可选的“离线模式”功能（主要用于笔记本电脑），该功能通过在本地序列化 DTO 来工作，直到用户返回其 LAN。DTO 被序列化为加密的 XML 文件，这些文件在数据更改时写入（写入用户的 [AppData]/AppName 目录）。

问题是一些用户倾向于让应用程序打开并关闭笔记本电脑，直到电池最终耗尽，当他们返回办公室时，笔记本电脑磁盘上的任何地方都不存在 XML 文件。

我已经无数次地梳理了代码，实现了各种写入器/流刷新，文件写入后的文件存在性/时间戳检查等，它仍在发生。我唯一能想到的是 Windows 写入缓存，它在 XP、Vista 和 7 上默认启用。是否知道它会导致此类问题以及如何在我的应用程序中防止它们（没有强制用户关闭全局写入缓存）？

我发现[Sysinternals Sync](http://technet.microsoft.com/en-us/sysinternals/bb897438.aspx)似乎可以刷新磁盘缓存，但它需要我的用户没有的管理员权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:42:34.940

我个人严重怀疑任何磁盘缓存都可能延迟物理写入小文件超过几秒钟，除非在极端情况下。

我建议每当数据被序列化时记录一行，并检查它是否被写入；这是我相信你首先尝试过的。

# java - 使用滚动时，网格视图按钮会变形

> ID：11331120
> 
> 赞同：0
> 
> 时间：2012-07-04T14:34:15.303
> 
> 标签：java, android, button, gridview, scroll

```
public View getView(int position, View convertView, ViewGroup parent) {
        Button btn;
        if (convertView == null) { // if it's not recycled, initialize some
                                    // attributes

            btn = new Button(mContext);
            KeypadButton keypadButton = mButtons[position];

            switch(keypadButton.mCategory)
            {
            case MEMORYBUFFER:
                btn.setBackgroundResource(R.drawable.keypadmembuffer1);
                break;  
            case CLEAR:
                btn.setBackgroundResource(R.drawable.keypadclear1);
                break;  
            case NUMBER:
                btn.setBackgroundResource(R.drawable.keypad1);
                break;
            case OPERATOR:

                btn.setBackgroundResource(R.drawable.keypadop1);
                break;
            case OTHER: 
                btn.setBackgroundResource(R.drawable.keypadother1);
                break;
            case RESULT:
                btn.setWidth(8000);
                btn.setBackgroundResource(R.drawable.keypadresult1);
                break;
            case DUMMY:
                btn.setBackgroundResource(R.drawable.appvertical1);
                break;
            default:
                btn.setBackgroundResource(R.drawable.keypad1);
                break;
            }
            // Set OnClickListener of the button to mOnButtonClick
            if(keypadButton != KeypadButton.DUMMY)
                btn.setOnClickListener(mOnButtonClick);
            else
                btn.setClickable(false);
            // Set CalculatorButton enumeration as tag of the button so that we
            // will use this information from our main view to identify what to do
            btn.setTag(keypadButton);
        } else {
            btn = (Button) convertView;
        }

        btn.setText(mButtons[position].getText());
        return btn;
    } 
```

每次我在屏幕上使用滚动时，第一行按钮都会与最后一行按钮混淆。请帮忙 。我是安卓新手。不知道怎么办？？我对使用 contextView 的了解非常有限。如果我删除 if else 阻止它可以更正吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:45:57.867

试试这个

```
 if (convertView == null) { // if it's not recycled, initialize some
                                // attributes

        btn = new Button(mContext);
}
else{
 btn = (Button) convertView;
}
        KeypadButton keypadButton = mButtons[position];

        switch(keypadButton.mCategory)
        {
        case MEMORYBUFFER:
            btn.setBackgroundResource(R.drawable.keypadmembuffer1);
            break;  
        case CLEAR:
            btn.setBackgroundResource(R.drawable.keypadclear1);
            break;  
        case NUMBER:
            btn.setBackgroundResource(R.drawable.keypad1);
            break;
        case OPERATOR:

            btn.setBackgroundResource(R.drawable.keypadop1);
            break;
        case OTHER: 
            btn.setBackgroundResource(R.drawable.keypadother1);
            break;
        case RESULT:
            btn.setWidth(8000);
            btn.setBackgroundResource(R.drawable.keypadresult1);
            break;
        case DUMMY:
            btn.setBackgroundResource(R.drawable.appvertical1);
            break;
        default:
            btn.setBackgroundResource(R.drawable.keypad1);
            break;
        }
        // Set OnClickListener of the button to mOnButtonClick
        if(keypadButton != KeypadButton.DUMMY)
            btn.setOnClickListener(mOnButtonClick);
        else
            btn.setClickable(false);
        // Set CalculatorButton enumeration as tag of the button so that we
        // will use this information from our main view to identify what to do
        btn.setTag(keypadButton); 
```

# jquery - 删除 div 元素不起作用

> ID：11331121
> 
> 赞同：1
> 
> 时间：2012-07-04T14:34:16.740
> 
> 标签：jquery, html

我想使用 jquery 添加和删除 div 元素，添加 div 元素工作正常，但删除 div 元素不起作用，我是这样实现的。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>jQuery</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script type="text/javascript">
var count = 0;
$(document).ready(function(){
    $('p#add_field').click(function(){
        count += 1;
        $('#container').append(
                '<div><div><label><strong>Link' + '</strong></label><br />' 

                + '<input id="field_' + count + '" name="fields[]' + '" type="text" /><br /></div>' 
                +'<div><a href="#" class="remove">Remove selection</a></div></div>  ');

    });

    $('.remove').on('click', function () {
        $(this).parent().parent().remove();
        return false;
    });

});
</script> 

<body>

        <div id="container">
            <p id="add_field"><a href="#"><span>&raquo; Add your favourite links.....</span></a></p>
        </div>

</body>
</html> 
```

如果有人知道解决方案，请帮助我！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:37:00.677

当您调用时，您的项目是动态创建的，并且它们不存在`$('.remove').on('click',function () {`。

尝试像这样修改您的脚本：

```
$('#container').on('click','.remove',function () {
    $(this).parent().parent().remove();
    return false;
}); 
```

# php - 如何删除多维数组中特定键的重复值？

> ID：11331123
> 
> 赞同：0
> 
> 时间：2012-07-04T14:34:19.680
> 
> 标签：php, arrays

我有以下多维数组：

```
<?php 
$array = array(
array('first' => 1, 'second' => 1),
array('first' => 1, 'second' => 1),
array('first' => 2, 'second' => 1),
array('first' => 3, 'second' => 1),
array('first' => 3, 'second' => 1),
array('first' => 3, 'second' => 1)); 
```

如何删除重复的`first`值？同时保留重复`second`值。

处理后的数组应该是：

```
array(
array('first' => 1, 'second' => 1),
array('first' => 2, 'second' => 1),
array('first' => 3, 'second' => 1)); 
```

见：[http ://codepad.org/tMh28KMf](http://codepad.org/tMh28KMf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:41:08.130

代码：

```
$array = array(
    array('first' => 1, 'second' => 1),
    array('first' => 1, 'second' => 1),
    array('first' => 2, 'second' => 1),
    array('first' => 2, 'second' => 1),
    array('first' => 3, 'second' => 1),
    array('first' => 3, 'second' => 1)
);

$temp = array();
$new = array();

foreach($array as $value)
{
    if(!in_array($value['first'],$temp))
    {
        $temp[] = $value['first'];
        $new[] = $value;
    } 
} 
```

现在`$new`包含以下内容：

```
array(
    array('first' => 1, 'second' => 1),
    array('first' => 2, 'second' => 1),
    array('first' => 3, 'second' => 1),
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T14:42:31.207

这将删除重复的数组：

`$array = array_map('unserialize', array_unique(array_map('serialize', $array)));`

密钥仍然相同，因此您可能需要修复它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:39:29.580

如果数组是这样的怎么办

```
$array = array(
    array('first' => 1, 'second' => 1),
    array('first' => 1, 'second' => 1),
    array('first' => 1, 'second' => 12),
    array('first' => 2, 'second' => 1),
    array('first' => 2, 'second' => 1),
    array('first' => 3, 'second' => 1),
    array('first' => 3, 'second' => 1)
);

$temp = array();
$new = array(); 
```

您希望新数组 $new 包含以下内容：

```
array(
    array('first' => 1, 'second' => 1),
    array('first' => 2, 'second' => 1),
    array('first' => 3, 'second' => 1),
); 
```

或者

```
array(
    array('first' => 1, 'second' => 1),
    array('first' => 1, 'second' => 12),
    array('first' => 2, 'second' => 1),
    array('first' => 3, 'second' => 1),
); 
```

?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T14:38:51.750

您必须自己做一些`foreach`循环并重新组装数组。也可以查看 PHP 的[array_unique()](http://us2.php.net/array_unique)。

# spring-batch - SpringBatch 中的 SimpleAsyncTaskExecutor 与 SyncTaskExecutor

> ID：11331124
> 
> 赞同：1
> 
> 时间：2012-07-04T14:34:24.750
> 
> 标签：spring-batch

我有一个 SpringBatch 应用程序，我们正在尝试并行处理。在批处理中，它从一个表中读取并使用响应更新另一个表。如果输入表有 100 条记录，那么输出表也应该有 100 条记录。

现在，我在输入表中有 13600 条记录。当我尝试使用时`SyncTaskExecutor`，只有一个线程在运行，输出表有 13600 条记录。当我尝试使用时`SimpleAsyncTaskExecutor`，输出表中只有 900 条记录。

职位声明如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:task="http://www.springframework.org/schema/task"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/batch http://www.springframework.org/schema/batch/spring-batch-2.1.xsd
    http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.1.xsd">

<import resource="applicationContext.xml" />

<bean id="itemReader"
    class="org.springframework.batch.item.database.JdbcCursorItemReader">
    <property name="dataSource" ref="dataSource" />
    <property name="sql" value="select REP_QMUT_KEY, DLN_DLNRNR, DLN_AFVDAT, F_IND_MEMO_DVB, MUT_MUTDAT_UM, MUT_VERWDAT_UM, MUT_SRT_MUT_UM from REP_QMUT" />
    <property name="rowMapper">
        <bean class="com.aegon.quinto.service.mapper.MutationInputRowMapper" />
    </property>
</bean>
<bean id="simpleStep"
    class="org.springframework.batch.core.step.item.SimpleStepFactoryBean">
    <property name="transactionManager" ref="transactionManager" />
    <property name="jobRepository" ref="jobRepository" />
    <property name="itemReader" ref="itemReader" />
    <property name="itemWriter" ref="itemWriter" />
    <property name="commitInterval" value="10" />
    <property name="startLimit" value="1" />
</bean>

 <bean id="itemWriter" class="org.springframework.batch.item.database.JdbcBatchItemWriter">
    <property name="dataSource" ref="dataSource" />
    <property name="itemSqlParameterSourceProvider">
        <bean class="org.springframework.batch.item.database.BeanPropertyItemSqlParameterSourceProvider" />
    </property>
    <property name="sql" value="INSERT INTO MUT_TRIAL(DLNRNR, AFVDAT,  MEMO_MUTATION, MEMO_PARTICIPANT, MUTATION_DATE, PROCESSING_DATE, RUN_NR, SRT_MUT, REP_QMUT_CORTICON_KEY) VALUES (:dlnrnr,:afvDat,:memo,:participantMemo,:mutationDate,:processDate,:runNr,:mutationType,:mutationKey)" />
    </bean>

<bean id="simpleChunkListner" class="com.aegon.quinto.service.listener.SimpleChunkListener" />

<bean id="taskExecutor" class="org.springframework.core.task.SyncTaskExecutor" />
<bean id="itemProcessor" class="com.aegon.quinto.service.processor.SimpleItemProcessor" />

<!-- job id="simpleJob" xmlns="http://www.springframework.org/schema/batch">
    <step id="simpleStep">
        <tasklet>
            <chunk reader="itemReader"  writer="itemWriter"
                commit-interval="50">
            </chunk>
        </tasklet>
    </step>

</job-->

<job id="simpleJob" xmlns="http://www.springframework.org/schema/batch">
    <step id="simpleStep">
        <tasklet task-executor="taskExecutor" throttle-limit="25">
            <chunk reader="itemReader"  processor="itemProcessor" writer="itemWriter"
                commit-interval="50">
            </chunk>
        </tasklet>
    </step>

</job>

<!--  For running the BatchLauncher -->
<bean id="batchLauncher" class="com.aegon.quinto.service.BatchLauncher">
    <property name="jobLauncher" ref="jobLauncher" />
    <property name="jobRepository" ref="jobRepository" />
    <property name="job" ref="simpleJob" />
</bean>
</beans> 
```

我正在尝试在多个线程中执行该步骤

映射器：

```
import java.sql.ResultSet; 
```

导入java.sql.SQLException；

导入 org.springframework.jdbc.core.RowMapper；

导入 com.aegon.quinto.model.MutationInput；

公共类 MutationInputRowMapper 实现 RowMapper {

```
public Object mapRow(ResultSet rs, int rowNum) throws SQLException {
    // TODO Auto-generated method stub
    MutationInput mutationInput = new MutationInput();
    mutationInput.setMutationKey(rs.getInt("REP_QMUT_KEY"));
    mutationInput.setDlnrnr(rs.getString("DLN_DLNRNR"));
    mutationInput.setMemo(rs.getString("F_IND_MEMO_MVM"));
    mutationInput.setParticipantMemo(rs.getString("F_IND_MEMO_DVB"));
    mutationInput.setProcessDate(rs.getInt("MUT_VERWDAT_UM"));
    mutationInput.setRunNr(new Integer("2"));
    mutationInput.setMutationType(rs.getString("MUT_SRT_MUT_UM"));

    return mutationInput;
} 
```

}

我的总体要求如下：我将从输入表中读取数据，使用外部服务验证数据并在输出表中更新验证响应。在输入表中，数据将采用扁平结构。即，对于一个学生来说，可能会有多次考试的考试结果。在转到外部服务之前，我需要检索该参与者的所有考试结果。由于网络延迟，与外部服务通信将成为瓶颈。因此，需要多线程。如果有任何示例实现/任何指南，请告诉我方法。PS：我是 SpringBatch 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:18:48.657

看起来您的一个或多个组件不是线程安全的

# php - 如何在 PHP 系统调用中转义引号？

> ID：11331125
> 
> 赞同：0
> 
> 时间：2012-07-04T14:34:25.140
> 
> 标签：php, perl

我使用[escapeshellarg从 php 传递给 perl](http://php.net/manual/en/function.escapeshellarg.php)

```
system("perl -e '" . escapeshellarg($inp) . "' >> /tmp/out"); 
```

并从 perl 中获取未终止的带引号的字符串。

输入是：`'Single quoted terminated string\n';`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T14:36:25.740

请注意，[`escapeshellarg`](http://php.net/escapeshellarg)它本身会添加外部单引号。

所以*你*应该把它们排除在外：

```
system("perl -e " . escapeshellarg($inp) . " >> /tmp/out");
#              ^                            ^ no extra ' quotes here 
```

# jquery - 从复选框更新 Sqlite 数据库

> ID：11331126
> 
> 赞同：2
> 
> 时间：2012-07-04T14:34:28.610
> 
> 标签：jquery, sqlite, jquery-mobile, cordova

我有一组复选框，我想在其中将它们的“已检查”状态添加到数据库中。我曾经像这样将它们添加到 localStorage：

```
 function SaveData()
    {
        var status = $('input[type="checkbox"]').filter('.custom').map(function(){
        var name = $(this).attr('name'); 
        var CheckBoxId= $(this).attr('CheckboxId');                                            
        if($(this).is(':checked'))
        return { 'name':name, 'status' : 'Checked', 'CheckBoxId':CheckBoxId}; 
        else
        return null;
        });
        localStorage["Days"] = status.length;

        for(var i = 0;i<status.length;i++)
        {

            localStorage["Day" + i] = status[i].name;

        }
    } 
```

现在我想将它们添加到 sqlite 数据库但是当我添加任何像这里这样的语句时，根本看不到 javascript 页面，所以我不知道我应该在哪里写语句。

```
 for(var i = 0;i<status.length;i++)
        {
           tx.executeSql('UPDATE WeekDay SET Checked = 1 Where WeekId= status[i].CheckBoxId');  

        } 
```

这是数据库中的表：

```
 tx.executeSql('DROP TABLE IF EXISTS WeekDay');
    tx.executeSql('CREATE TABLE IF NOT EXISTS WeekDay (id unique, DayName, Checked INTEGER)'); 
```

是否有一些方法可以从函数本身中处理数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:51:45.030

你应该使用：

```
tx.executeSql('UPDATE WeekDay SET Checked = 1 Where WeekId= ?', [status[i].CheckBoxId]); 
```

您不能直接从查询中引用变量，您必须插入它的值。

# django - apache 错误正在显示，而不是自定义 500 页面

> ID：11331133
> 
> 赞同：1
> 
> 时间：2012-07-04T14:34:49.710
> 
> 标签：django

我已经严格按照文档部署了我的 django 应用程序。每当应用程序出现错误时，我都会遇到问题，它应该抛出 500 个自定义页面而不是默认的 apache 错误日志页面。我已经写了这个：-

网址.py

```
handler500 = 'citysom.event.views.server_error' 
```

视图.py

```
def server_error(request, template_name='500.html'):
    """
    500 error handler.

    Templates: `500.html`
    Context: sys.exc_info() results
     """
    t = loader.get_template(template_name) # You need to create a 500.html template.
    ltype,lvalue,ltraceback = sys.exc_info()
    sys.exc_clear() #for fun, and to point out I only -think- this hasn't happened at 
                    #this point in the process already
    return http.HttpResponseServerError(t.render(Context({'type':ltype,'value':lvalue,'traceback':ltraceback}))) 
```

在我的本地机器上一切正常，但在服务器 500 页面上没有出现。

有人可以帮我吗？提前致谢

# css - 如何在css中为没有垂直滚动的部门制作水平滚动

> ID：11331139
> 
> 赞同：0
> 
> 时间：2012-07-04T14:35:20.367
> 
> 标签：css

这是模式，我需要使 ul 列表与水平滚动保持对齐，如果它超过了一些宽度，如 460px，而在 css 中没有垂直滚动条。

```
<div class=parentDiv>
       <ul>            //here i need to give a horizontal scroll without vertical scroll
             <li>content</li>   //  with left align
             <li>content</li>
             <li>content</li>
             <li>content</li>                
             <li>content</li> .....etc 
       </ul>    
 </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:51:04.423

尝试这个：

```
<div class=parentDiv>
   <ul>          
         <li>content</li>  
         <li>content</li>
         <li>content</li>
         <li>content</li>                
         <li>content</li> 
         <li>content</li> 

   </ul>    
</div>​ 
```

和CSS

```
.parentDiv{
 width: 300px;
 overflow-x: scroll; 

 }

.parentDiv ul{
 width: 400px;
 border: 1px solid orange;

 }

 .parentDiv ul li{
 display: inline;
 margin-right: 8px;
 } 
```

​</p>

检查我制作的小提琴：[JsFiddle](http://jsfiddle.net/2pKjW/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T14:40:49.183

给它overflow-x：滚动属性，将最大宽度设置为460px，你应该会得到一个水平滚动。我不确定你的左对齐是什么意思。不是左对齐吗？

# excel - 让一个单元格代表一个单元格范围

> ID：11331141
> 
> 赞同：6
> 
> 时间：2012-07-04T14:35:29.000
> 
> 标签：excel, ms-office

Excel 2003 问题：
我想让一个单元格代表一系列单元格。以便另一个公式可以使用它。

现在，我有一个等式来计算特定项目的工作时间。它会查找项目名称，然后在它旁边，我有一列我花了多长时间。这是公式 `=SUMIF(D1:D10,"project1",C1:C10)`

如果你看第一张图，
我想让 B10 说 Duration 的范围（B23-B28）
我想让 C10 说 Project 的范围（C23-C28）

现在看第二张图片，带有公式。
我不想手动设置范围，而是希望它查看 B10 和 C10，以便我获得一次范围。这样，我只需要在一个地方改变范围，而不是我有多少项目。

如果这是一个混乱的问题，我很抱歉。我不知道怎么问，但如果人们不清楚我想要完成什么，我会很快回复评论。

![在此处输入图像描述](../Images/7a7048f42891ad10401d29fc2e6e83e7.png)

* * *

* * *

![在此处输入图像描述](../Images/b6d1685620a5d2529a62f693a2f574b3.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T14:51:26.973

让它更清楚一点。您可以在单元格中输入范围（地址）作为文本，然后使用`INDIRECT`将它们引用到范围而不是文本。

所以输入

```
"C23:C46" in cell B10 (without quotes)
"D23:D46" in C10      (without quotes) 
```

并`INDIRECT`在您的公式中使用`SUMIF`
Here's a picture 以更清晰。

![在此处输入图像描述](../Images/22a16b9989e7f9e7376b9a27d137094b.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T14:43:16.363

将地址作为纯文本存储在单元格中。

使用该范围时，请使用[`INDIRECT(B10)`](http://office.microsoft.com/en-us/excel-help/indirect-HP005209139.aspx).

有关更复杂的使用示例，请参阅[具有多个条件的 Excel DSUM 。](https://stackoverflow.com/questions/8853874/excel-dsum-with-multiple-criteria)

# c++ - 函数指针语法

> ID：11331145
> 
> 赞同：1
> 
> 时间：2012-07-04T14:35:36.050
> 
> 标签：c++, function-pointers, typedef

我遇到了两个使用函数指针的不同代码。

请告诉我哪个更好？有什么偏好吗？

```
typedef int myFunction(int a,int b);
extern myFunction *ptfunction; 
```

和

```
typedef int (*ptfunction)(int a,int b); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T14:37:36.363

两者都很糟糕，因为它们在语法上是不正确的。

你需要：

```
typedef int (*myFunction)(int a, int *b); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:46:02.137

都不行，用`std::function`

```
std::function<int (int ,int)> ptfunction;
ptfunction = f1; 
```

示例（它在 c++0x 中的 std 中）：

**[如何使用增强绑定](http://www.radmangames.com/programming/how-to-use-boost-bind)**

**[标准::函数](http://en.cppreference.com/w/cpp/utility/functional/function)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T15:05:26.753

第二个无效；如果您修复第一行以声明变量而不是类型，则它将等效于第一行：

```
int (*ptfunction)(int a, int b); 
```

哪个“更好”完全取决于你想用这些东西做什么。如果你需要多次引用同一个类型，那`typedef`会让事情更清楚；如果您只是想像示例中那样声明一个函数指针，那么它只会增加额外的噪音。

（大概，在你的第一个例子中，第二个参数应该是`int`not `int*`，否则函数调用将无法编译）。

使用函数对象通常更方便和灵活，`std::function`特别是因为它们可以绑定任意状态。但这超出了这个问题的范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T14:40:25.223

第一个包含另一个错误：您不能将 int 强制转换为指向 int 的指针。哪个更好？他们都完全断章取义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T14:40:28.640

对于第一个代码，您必须在某处定义 ptfunction。而且我不认为可以编译第二个代码。

尝试这个：

```
typedef int *PTFUNCTION(int, int);
PTFUNCTION func = f1;
func(1, 2); 
```

# html - 从html页面调用winform函数？

> ID：11331146
> 
> 赞同：0
> 
> 时间：2012-07-04T14:35:38.620
> 
> 标签：html, winforms, webbrowser-control

我有一个包含 ac# webbrowser 控件的 winform 应用程序。Webbrower 控件加载一个 html 页面。在那个 html 页面上，我有一个按钮。我想要的是当单击该按钮时，它将调用一个 winform 函数（例如 Form1.cs 中的函数）。是否可以？请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:59:07.647

在脚本代码中使用[window.external](http://msdn.microsoft.com/en-us/library/a0746166.aspx)对象来访问指定对象的公共属性和方法。（请参阅链接中的示例）

**C＃**

```
public void Test(String message)
{
    MessageBox.Show(message, "client code");
} 
```

**HTML**

```
<button onclick="window.external.Test('called from script code')">
    call client code from script code
</button> 
```

# java - 如何在java中创建4 00维数组

> ID：11331149
> 
> 赞同：1
> 
> 时间：2012-07-04T14:35:55.663
> 
> 标签：java, multidimensional-array

我们可以轻松创建 2,3,4 维数组..但我想知道如何创建非常大的维数组

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T14:43:59.577

您*可以*使用[`Array.newInstance`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Array.html#newInstance%28java.lang.Class,%20int%5B%5D%29)，但是：

> 新数组的维数不得超过实现支持的数组维数（通常为 255）。

但我相信为您的领域创建更好的抽象对您来说会更好。处理这样的数组会很困难。也许您可以提供有关您要达到的目标的更多信息，以便提供更好的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T14:44:12.697

简单的答案是输入很多`[]`'s。（但实际限制是 255。这是由 JVM 规范（在第[4.3.2 节](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.2)中）而不是 JLS 强加的；请参阅[Java 数组中的最大维数](https://stackoverflow.com/questions/4060538/max-number-of-dimensions-in-a-java-array)）

但你*真的*不想这样做：

*   您的代码将难以阅读和维护。每次您需要获取一个元素时，您必须提供 400 个索引表达式。

*   以这种方式表示的 400 维数组将占用大量内存......

如果您对此很认真，则应该研究某种稀疏表示。但即便如此，传统的数组计算也很难实用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T15:10:30.730

您可以做的是使用 BigInteger 将 400 个维度编码为整数，并将其用作 HashMap 或 TreeMap 的键。您的数组需要非常、非常、非常稀疏，否则您将很快达到内存限制。甚至 400 个尺寸为 2 的尺寸`2.6e120`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T14:47:13.317

从长远来看，创建 400 维数组将更难维护/读取，并且还会为您浪费大量内存。我建议您创建一个类来存储数据并开始将此类的对象添加到[java.util.List 接口的任何实现中。](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)

这样，您也可以以更具可读性的格式存储数据。

# c - postgres 触发 C 函数是否阻塞？

> ID：11331156
> 
> 赞同：1
> 
> 时间：2012-07-04T14:36:37.000
> 
> 标签：c, postgresql, triggers

正如标题所示，我的简短问题是：当使用带有 postgres 触发器的动态加载的 C 函数时，是阻塞调用还是非阻塞调用？

背景：我需要在我的数据库上插入/更新/删除后生成一些 XML。我考虑过的两个选项是：

1.  创建一些在 I/U/D 操作期间写入使用的事件表，并对这些事件进行守护程序轮询并生成 XML
2.  创建一个 C 函数来生成此 XML 作为 postgres 中触发器的一部分。

使用选项 2 将提供实时更新，但我担心在生成 XML 消息和传输它等方面会有一些开销，因此由于在每个操作之间创建一个 xml，插入 100 行将花费更长的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T12:39:01.867

触发器，无论是用 C 还是任何其他语言实现的，都是同步的。一次执行一个触发器，在所有触发器都运行之前，不能再运行其他非触发器语句。在 PostgreSQL 中，触发器按字母顺序执行。

请注意，除非它们获得锁，否则触发器*不会*阻塞*其他*事务中的语句。同一个触发器可以在三个不同事务中的三个不同执行点运行，而第四个事务在同一个表上运行稍后的触发器，而第五个事务刚刚开始一个`INSERT`.

因此，触发器会阻塞同一事务的后续语句，但不会阻塞其他事务的语句。

顺便说一句，PostgreSQL 不提供异步触发器；他们无法返回控制权，因此在继续运行时会执行更多语句。所有触发器都是阻塞和同步的。异步触发器等价物通过`LISTEN`和`NOTIFY`/或队列机制（如`PgQ`. 如果您担心速度，请触发`NOTIFY`一个`LISTEN`异步生成的 ing 守护进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:09:46.097

是的，它“阻塞”了。在触发器完成之前，导致触发器运行的 SQL 不会完成。

[在文档](http://www.postgresql.org/docs/9.1/static/sql-createtrigger.html)中查看更多信息。

# linux - R 版本 2.15 MySQL 连接 Windows 和 Cent 操作系统

> ID：11331158
> 
> 赞同：-5
> 
> 时间：2012-07-04T14:36:42.133
> 
> 标签：linux, r, rmysql

> **可能重复：**
> [将 RMySQL 包添加到 R 失败？](https://stackoverflow.com/questions/4785933/adding-rmysql-package-to-r-fails)

我在两台运行 Windows 7 x64 和 Cent Os x64 的机器上安装了 R。我很难安装一个包来连接到我的 mysql 数据库。数据库位于 Cent OS 机器上，但我无法在两台机器上连接到它。他们都安装了 R Studio。

我建议安装 RMySQL 包的 R 书，但是当我尝试安装它时，它在两台机器上都吐出相同的错误。

包“RMySQL”不可用（对于 R 版本 2.15.0）

我怎样才能解决这个问题？

* * *

更新：

我尝试运行`install.packages('RMySQL',type='source')`它在我的 linux 机器上运行，但它在控制台和 rstudio 中都为我的 windows 机器吐出相同的消息。

```
> install.packages('RMySQL',type='source')
Installing package(s) into 'C:/Users/user/Documents/R/win-library/2.15'
(as 'lib' is unspecified)
--- Please select a CRAN mirror for use in this session ---
trying URL 'http://ftp.osuosl.org/pub/cran/src/contrib/RMySQL_0.9-3.tar.gz'
Content type 'application/x-gzip' length 165363 bytes (161 Kb)
opened URL
downloaded 161 Kb

* installing *source* package 'RMySQL' ...
** package 'RMySQL' successfully unpacked and MD5 sums checked
ERROR: configuration failed for package 'RMySQL'
* removing 'C:/Users/user/Documents/R/win-library/2.15/RMySQL'

The downloaded source packages are in
    'C:\Users\user\AppData\Local\Temp\RtmpsRHukJ\downloaded_packages'
Warning message:
In install.packages("RMySQL", type = "source") :
  installation of package 'RMySQL' had non-zero exit status 
```

更新 2：

我已经在 Windows 中设置了我的路径变量等，所以我可以通过 cmd 尝试它。这是 cmd 的输出。

```
* installing to library 'C:/Users/user/Documents/R/win-library/2.15'
* installing *source* package "RMySQL" ...
** package 'RMySQL' successfully unpacked and MD5 sums are checked
ERROR: configuration failed for package 'RMySQL'
* removing ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:10:22.430

我将其移至答案，而不仅仅是一大堆评论。我将在帖子进行时对其进行编辑。

`MYSQL_HOME`获得正确的路径至关重要。**首先，您应该**注意，在`cmd`. 例如，您`set`在提示符下的陈述应该是：

```
set MYSQL_HOME=C:\Program Files\MySQL\MySQL Server 5.5 
```

您还应该注意，这只是*临时*设置变量，并且仅在命令提示符下。因此，如果您不从相同的命令提示符启动 R，`MYSQL_HOME`将无法正确设置。

要永久设置您的`MYSQL_HOME`变量，请通过您的系统属性 -> 高级 -> 环境变量，然后创建一个名为的新系统变量`MYSQL_HOME`并正确设置路径。同样，没有双反斜杠。

重新启动 R，否则您将看不到环境变量的任何变化。

# javascript - 如何简化长的 javascript switch case 语句？

> ID：11331160
> 
> 赞同：1
> 
> 时间：2012-07-04T14:36:52.117
> 
> 标签：javascript, jquery

我有下面的代码。它看起来又长又复杂，现在我必须添加更多条件。有什么办法可以简化这段代码。我所能想到的就是将 City 和 Menu 开关结合起来，但是如果我这样做了，我必须以一种方式获取 City 的 pk 值，而另一种方式获取 Menu 的 pk 值。javascript 是否提供任何其他方式来做与开关相同的事情？很抱歉列出了长代码，但我认为我应该包括所有内容。

```
function getParams(entity) {

 var store = window.localStorage;
 var table = "Content";

 switch (entity) {
    case "City":
        if (store.getItem('AccountID')) {
            pk = store.getItem('AccountID') + "04" + "000";
            return {
                pk: pk,
                param: '?pk=' + pk,
                table: table,
                rc: true
            }
        } else {
            paramOnFailure("Please reselect Account");
            return { rc: false }
        }
        break;
    case "Menu":
        if (store.getItem('AccountID')) {
            pk = store.getItem('AccountID') + "00" + "000";
            return { 
                pk: pk,
                param: '?pk=' + pk,
                table: table,
                rc: true
            }
        } else {
            paramOnFailure("Please reselect Account");
            return { rc: false }
        }
        break;
    case "Page":
        if (store.getItem('AccountID') && store.getItem('PageID')) {
            pk = store.getItem('AccountID') + store.getItem('PageID') + "000";
            return {
                pk: pk,
                param: '?pk=' + pk,
                table: table,
                rc: true
            }
        } else {
            paramOnFailure("Please reselect Account and Page Type");
            return { rc: false }
        }
        break;
    case "Question":
        if (store.getItem('AccountID') &&
            store.getItem('CityID') && 
            store.getItem('TopicID') ) {
            pk = store.getItem('AccountID') + store.getItem('CityID');
            return {
                pk: pk,
                param: '?pk=' + pk + '&rk=' + store.getItem('TopicID'),
                table: "Question",
                rc: true
            }
        } else {
            paramOnFailure("Please reselect Account, City and Topic");
            return { rc: false }
        }
        break;
    case "Reference":
        if (store.getItem('ReferenceID')) {
            pk = store.getItem('ReferenceID');
            return { 
                pk: pk,
                param: '?pk=' + pk,
                table: "Reference",
                rc: true
            }
        } else {
            paramOnFailure("Please reselect Reference");
            return { rc: false }
        }
        break;
    case "Topic":
        if (store.getItem('AccountID') && store.getItem('CityID')) {
            pk = store.getItem('AccountID') + "05" + store.getItem('CityID');
            return { 
                pk: pk,
                param: parameters = '?pk=' + pk,
                table: table,
                rc: true
            }
        } else {
            paramOnFailure("Please reselect Account and City");
            return { rc: false }
        }
        break;
    default:
        ;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T14:39:19.177

如果是我，我会将代码从每个案例条件移动到它们自己的函数中。这应该使事情更清晰。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T14:40:06.137

将这部分代码放入函数中并使用适当的参数调用它

```
 if (store.getItem('AccountID')) {
             pk = store.getItem('AccountID') + "00" + "000";
             return {
                  pk: pk,
                 param: '?pk=' + pk,
                 table: table,
                 rc: true
             }
         } else {
             paramOnFailure("Please reselect Account");
             return { rc: false }
         } 
```

所以你的代码将是这样的，并从每个 Switch Case 调用这个函数

```
function CommonforCase(store,value)
{
   if (store.getItem('AccountID')) {
                 pk = store.getItem('AccountID') + value;
                 return {
                      pk: pk,
                     param: '?pk=' + pk,
                     table: table,
                     rc: true
                 }
             } else {
                 paramOnFailure("Please reselect Account");
                 return { rc: false }
             } 

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T14:43:22.323

像这样的东西：

```
function getTheItem(itemName, value, table){
         if (store.getItem(itemName)) {
            pk = store.getItem(itemName) + value;
            return {
                pk: pk,
                param: '?pk=' + pk,
                table: table,
                rc: true
            }
        } else {
            paramOnFailure("Please reselect"+ itemName);
            return { rc: false }
        }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T15:09:57.780

我一开始没有滚动完成，所以我错过了很多 switch 语句（在其他一些答案中也可能是这种情况）。前两种情况可以直接分解为函数。在您的其余代码中，您有更多差异，因此您需要在该函数中使用更多参数，这很容易让人感到困惑。

因此，您可以使用[配置对象](http://my.safaribooksonline.com/book/programming/javascript/9781449399115/functions/configuration_objects)来命名选项并使用默认值（对于合并默认值和给定值，请参阅[.extend()](http://jqapi.com/#p=jQuery.extend)和[动态合并对象](https://stackoverflow.com/questions/171251/how-can-i-merge-properties-of-two-javascript-objects-dynamically)）。您还可以根据所有必需值动态构建错误消息。它应该以这种方式变得更短且更具可读性。

一些伪代码：

```
// Pseudo-Code
function getParams(entity) {
 var store = window.localStorage;
 var defaults = {
    "mandatoryValues":[],
    "pk":null,
    "table":"Content",
    "errorMessage":"Please reselect Account",
    "param":""
 };
 var foo = function(cfgObj) {
    // Add default values from defaults variable for missing properties in cfgObj
    // Set other missing values based on cfgObj (e.g. `param` from `pk`)
    // Return your object using the now 'complete' cfgObj
 }

 switch (entity) {
    case "City":
        var pk = store.getItem('AccountID') + "04" + "000";
        return foo(
            "mandatoryValues":[store.getItem('AccountID')],
            "pk":pk);
    // Menu, Page
    case "Question":
        var pk = store.getItem('AccountID') + store.getItem('CityID');
        return foo(
            "mandatoryValues":[
                store.getItem('AccountID'),
                store.getItem('CityID'),
                store.getItem('TopicID')],
            "pk":pk,
            "param":'?pk=' + pk + '&rk=' + store.getItem('TopicID'),
            "table":"Question");
    // Reference, Topic, default
} 
```

# ruby - 如何在 DataMapper/Sinatra/Ruby 中销毁多对多对象及其链接

> ID：11331162
> 
> 赞同：0
> 
> 时间：2012-07-04T14:37:00.707
> 
> 标签：ruby, ruby-datamapper

我是新手，希望对如何解决此问题提供一些帮助。我试图按照 DataMapper 中的文档进行操作，但没有通过 Google 找到任何关于如何销毁对象及其相应链接的解决方案。以下是关键代码段。

**该模型**

```
class Entity 
```

包括 DataMapper::Resource

属性：entity_id，序列属性：full_legal_name，字符串属性：tax_id，字符串属性：phone_number，字符串属性：fax_number，字符串属性：cell_number，字符串属性：email，字符串，：unique => true，：format =>：email_address 属性： alt_email，字符串属性：is_active，布尔属性：created_at，日期时间属性：created_by，字符串属性：updated_at，日期时间属性：updated_by，字符串属性：auto_pay，布尔属性：use_ach，布尔属性：前缀，字符串属性：first_name，字符串属性： middle_name，字符串属性：last_name，字符串属性：后缀，字符串属性：referral_code，字符串属性：login_name，字符串，：unique => true 属性：hashed_pa​​ssword，字符串，：length => 200 属性：salt，字符串属性：permission_level，整数属性：title，字符串属性：问候，字符串属性：首选名称，字符串属性：preferred_language，字符串属性：security_question，字符串属性：security_answer，字符串属性：signature_font，字符串属性：auth1_checkbox，布尔属性：auth2_checkbox，布尔属性：auth3_checkbox，布尔属性：auth4_checkbox，布尔属性：auth5_checkbox，布尔属性：auth6_checkbox，布尔属性：digital_signature，字符串属性：date_signed，日期时间属性：signatory_ip，字符串属性：signatory_title，字符串

有 n, :addresses, :through => 资源有 n, :aches 有 n, :creditcards

结尾

类人<实体

属性：生日，字符串属性：drivers_license_number，字符串属性：state_issuing_drivers_license，字符串

结尾

类公司<实体

属性：dba_name，字符串属性：legal_structure，字符串属性：url，字符串，：格式=>：url

结尾

班级地址

包括 DataMapper::Resource

属性：address_id，串行属性：esid，字符串，：unique => true 属性：描述，字符串属性：address_line1，字符串属性：address_line2，字符串属性：city，字符串属性：state，字符串属性：zipcode，字符串属性：country，字符串属性：meter_number，字符串属性：meter_type，字符串属性：meter_status，字符串属性：meter_status_date，DateTime 属性：updated_by，字符串属性：switch_indicator，字符串属性：switch_type，字符串属性：selected_switch_date，日期属性：under_contract，布尔属性：contract_end_date，日期

有 n, :entities, :through => 资源

结尾

**对象创建和持久性**

```
 if session[:base_route].to_s == "residential"
   #residential processing
   @entity_id = session[:this_person].inspect
   @person = Person.get(@entity_id.to_i)
   @address = Address.new()
   @address.esid = params[:post][:esid]
   @address.description = params[:post][:service_location_description]
   @address.address_line1 = params[:post][:service_address_line1]
   @address.address_line2 = params[:post][:service_address_line2]
   @address.city = params[:post][:service_city_name]
   @address.state = params[:post][:service_state_name]
   @address.zipcode = params[:post][:service_zip_code]
   @address.switch_indicator = params[:post][:switch_indicator]
   @address.switch_type = params[:post][:switch_type]
   params[:post][:under_contract_checkbox]  == "on" ? @under_contract = true : @under_contract = false 
   @address.under_contract = @under_contract

   @person.addresses << @address

   if @person.save 
```

**尝试的对象和链接破坏（链接被破坏，但地址破坏不起作用）**

```
 @entity_id = session[:this_person].inspect
    address = Address.get(params[:post][:submit].to_i)
    address.destroy
    entity = Entity.get(@entity_id)
    link = entity.address_entities.get(@entity_id, params[:post][:submit])
    link.destroy 
```

非常感谢任何提示或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:58:13.250

答案对象的删除失败，因为答案对象和实体对象之间存在链接。通过颠倒顺序并首先删除链接然后删除对象，对象被销毁。

```
@entity_id = session[:this_person].inspect
entity = Entity.get(@entity_id)
link = entity.address_entities.get(@entity_id, params[:post][:submit])
link.destroy
address = Address.get(params[:post][:submit].to_i)
address.destroy 
```

# php - PHP 有没有办法显示页面上的每个 MySQL 查询？

> ID：11331168
> 
> 赞同：2
> 
> 时间：2012-07-04T14:37:11.293
> 
> 标签：php, mysql

我很难找到由于 MySQL 而导致 CPU 负载过高的错误查询。我正在寻找一种让 PHP 在页面末尾打印连接到 MySQL 后进行的每个查询的方法。有没有办法在每个已经存在的 mysql 查询之后不改变代码来做到这一点？由于有很多包含文件，因此很难在脚本中找到每个查询。

我知道我可以将每个查询记录到 mysql 日志中，但我担心如此快速地编写可能数百个查询会使我的服务器更加过载。另外，查看在特定页面上进行的所有查询会更容易，然后一次查看一个。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T14:39:08.343

我总是从[MySQL 慢查询日志](http://dev.mysql.com/doc/refman/5.1/en/slow-query-log.html)开始——记录每个查询会产生很多噪音。

如果您使用的是[DAL](http://en.wikipedia.org/wiki/Data_access_layer)（应该是），那么您可以将跟踪添加到 DAL。

否则，没有一种简单的方法可以让 PHP 跟踪 mysql，使用 php.ini mysql.trace_mode 只会出现警告和错误。（我已经检查了[php_mysql](http://git.php.net/?p=php-src.git;a=blob_plain;f=ext/mysql/php_mysql.c;hb=HEAD)的源代码，函数`php_mysql_do_query_general`并且没有任何东西可以记录所有内容。

# python - 将命令添加到 distutils 构建的挂钩？

> ID：11331175
> 
> 赞同：15
> 
> 时间：2012-07-04T14:37:46.983
> 
> 标签：python, distutils

我在 setup.py 脚本中添加了一个自定义 distutils 命令：

```
from distutils.command.build_py import build_py

cmdclass = {}
cmdclass['build_qt'] = BuildQt
cmdclass['build_py'] = build_py

setup(..., cmdclass=cmdclass, ...) 
```

有没有办法让它在运行时::

```
python setup.py build 
```

这首先调用

```
python setup.py build_qt 
```

自动地？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-04T15:38:34.923

您可以覆盖`build`：

```
from distutils.command.build import build

class my_build(build):
    def run(self):
        self.run_command("build_qt")
        build.run(self)

cmdclass['build'] = my_build 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-10T17:05:28.100

为了添加您自己的命令，您可以将默认的`build`-command 子类化并扩展其子命令：

```
class _build(build):
     sub_commands = [('build_qt', None)] + build.sub_commands

...
setup(..., cmdclass={'build': _build, ...}) 
```

文档（distutils.cmd.Command）：

```
# 'sub_commands' formalizes the notion of a "family" of commands,
# eg. "install" as the parent with sub-commands "install_lib",
# "install_headers", etc.  The parent of a family of commands
# defines 'sub_commands' as a class attribute; it's a list of
#    (command_name : string, predicate : unbound_method | string | None)
# tuples, where 'predicate' is a method of the parent command that
# determines whether the corresponding command is applicable in the
# current situation.  (Eg. we "install_headers" is only applicable if
# we have any C header files to install.)  If 'predicate' is None,
# that command is always applicable.
#
# 'sub_commands' is usually defined at the *end* of a class, because
# predicates can be unbound methods, so they must already have been
# defined.  The canonical example is the "install" command.
sub_commands = [] 
```

# linux - 为什么在 sys_write() 期间有读取 SCSI 命令

> ID：11331182
> 
> 赞同：0
> 
> 时间：2012-07-04T14:38:00.167
> 
> 标签：linux, io, device-driver, scsi

我想了解`sys_write`scsi 设备上的 a 是如何工作的。因此我写了一个简单的测试程序，并在`issue`设备驱动的功能中添加了一些调试`printk()`来打印`ata_queued_cmd->scsicmd->cmnd`.

```
int main() {
    int w;
    char buffer[512] = "test string with 512 byte";

    // OPEN
    int fd = open("/dev/sdd", O_WRONLY | O_SYNC);

    // WRITE
    w = write(fd,buffer,sizeof(buffer));

    return 0;
} 
```

在`/var/log/messages`我可以看到以下发出的命令：

```
 scsicmd->cmnd
------------------------------
 0x28 | READ(10)
 0x2A | WRITE(10)
 0x35 | SYNCHRONIZE CACHE (10) 
```

我要写的 512 字节应该是块大小。这就是我得到这个值的方式：

```
root$ blockdev --getsize /dev/sdd # returns size in sectors
488397168
root$ blockdev --getsize64 /dev/sdd # returns size in sectors
250059350016
root$ python -c "print 250059350016.0/488397168"
512.0 
```

对我来说非常重要的是，数据是断电安全写入的。这就是为什么我要等待返回的原因`O_SYNC`。现在我有一些问题：

*   为什么`READ`前面有一个`WRITE`？
*   `SYNCHRONIZE CACHE`如果数据在驱动器的内部缓存中，我能保证吗？还是我可以做更多的事情来进行安全写入？

非常感谢你 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T08:21:10.980

好的，我现在想通了。他们读取它以将数据加载到内部内核缓冲区中，因此当您进行多次写入/读取时，数据已经被缓冲。

# django - 为 Boto 处理的 FileField 覆盖 Model.save() - Django

> ID：11331185
> 
> 赞同：4
> 
> 时间：2012-07-04T14:38:19.840
> 
> 标签：django, django-models, boto

因为 Heroku 在 30 秒后超时，所以我必须将用户提交的文件直接上传到 S3。将它们上传到 S3 后，我在数据库中插入一个条目来记录我收到了这个文件。这是我的模型：

```
class UserUploadedFile(models.Model):
    id = models.AutoField(primary_key=True)
    uid = models.ForeignKey('auth.user', editable=False, db_column='uid')
    filepath = models.FileField(storage=S3BotoStorage(bucket='whatever'), upload_to='/') 
```

但是因为 Boto 是自动调用的，所以当我像这样调用 save() 时，会调用 Boto 来处理文件：

```
file = UserUploadedFile(uid=request.user, filepath=key)
file.save() 
```

（我确实需要由 Boto 处理文件路径，以便稍后获取其 URL、文件大小等，因此我无法将文件路径转换为字符串。）

无论如何，我尝试像这样覆盖 save() 来绕过 Boto：

```
def save(self, *args, **kwargs):
    filepath = self.filepath
    if self.filepath:
        self.filepath = ''
    super(UserUploadedFile, self).save(*args, **kwargs)
    self.raw('UPDATE mysite_useruploadedfile SET filepath=%s WHERE id=%d', [filepath, self.pk]) 
```

但我得到这个错误：

```
'UserUploadedFile' object has no attribute 'raw' 
```

我不确定如何在这种情况下调用 raw() ，显然......

...但**我的主要问题是，当我写入此表时，这是否是绕过存储引擎的正确方法，或者是否有更清洁的方法**。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:36:58.973

您可以使用 django-storages [http://django-storages.readthedocs.org/en/latest/index.html](http://django-storages.readthedocs.org/en/latest/index.html)之类的应用程序使用自定义后端覆盖存储后端，该应用程序在上传后甚至支持 amazon s3，您可以获得文件很容易

# c++ - 字符串到枚举模板错误

> ID：11331187
> 
> 赞同：1
> 
> 时间：2012-07-04T14:38:26.110
> 
> 标签：c++, string, qt, enums

我需要将字符串转换为枚举。

我按照[String 中的想法在 C++ 中枚举](https://stackoverflow.com/questions/726664/string-to-enum)

这是我的代码：

```
#ifndef ENUMPARSER_H
#define ENUMPARSER_H
#include <iostream>
#include <map>
#include <string>

enum MYENUM
{
    VAL1,
    VAL2
};
using namespace std;
template <typename T>
class EnumParser
{
    map<string, T> enumMap;
public:
    EnumParser();
    T ParseEnum(const string &value)
    {
        map<string, T>::const_iterator iValue= enumMap.find(value);
        if(iValue!=enumMap.end())
            return iValue->second;
    }

};

EnumParser<MYENUM>::EnumParser()
{
    enumMap["VAL1"] = VAL1;
    enumMap["VAL2"] = VAL2;
}

#endif // ENUMPARSER_H 
```

当试图编译它时，我得到以下错误： ![在此处输入图像描述](../Images/49d36606086bc3e2757eae28de7be699.png)

我正在开发 QT 4.8。

我的错误是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:39:31.840

`map<string, T>::const_iterator`是从属名称，您需要：

```
 typename map<string, T>::const_iterator iValue= enumMap.find(value); 
```

[您可以在此处](http://womble.decadent.org.uk/c++/template-faq.html#dependent)阅读有关该主题的更多信息。

# php - 对表单的两种不同验证

> ID：11331189
> 
> 赞同：0
> 
> 时间：2012-07-04T14:38:29.140
> 
> 标签：php, jquery, validation

我有一个包含提交按钮的表单。我正在使用 form.validation 插件

我已经制定了规则。没关系！

但是现在我创建了一个表单链接，当用户点击时，我想更改这些规则。可能吗？

例如：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.js"></script>
<script type="text/javascript">
$().ready(function() {
    $(".myform").validate({
        rules: {
            name: {
                required: true
            },
            email: {
                required: true
            },
        }
    });
});
</script>
<form class="myform">
    Name: <input type="text" name="name">
    Email: <input type="text" name="email">
    Phone: <input type="text" name="phone">
    <input type="submit" value="Send">
</form>
<a href="#">Call me</a> 
```

当用户单击“呼叫我”时，验证将只是“电话”字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T15:12:03.983

在我看来，单击链接时需要执行以下操作（全部在 javascript / jQuery 中）：

*   取消链接的默认操作；
*   `name`从and中删除规则`email`；
*   向该字段添加新规则`phone`；
*   可选择隐藏除该字段之外的所有字段`phone`。

您可以在插件文档的[规则部分](http://docs.jquery.com/Plugins/Validation/rules)找到更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T15:01:29.593

这段代码在语法和结构上都有很多错误

```
<script type="text/javascript">
$().ready(function() {
$(".myform").validate({
    rules: {
        name: {
            required: true
        },
        email: {
            required: true
        },
    }
});
});
</script>
<form class="myform">
Name: <input type="text" name="name">
Email: <input type="text" name="email">
Phone: <input type="text" name="phone">
</form>
<a href="#">Call me</a> 
```

应该看起来更像

```
<script type="text/javascript">
$(document).ready(function() {
$("#callme").click(function(){
   $(".myform").validate({
    rules: {
        phone: {
            required: true
        }
    /*note the removed ,*/
    }
});
});
$("#submit").click(function(){
$(".myform").validate({
    rules: {
        name: {
            required: true
        },
        email: {
            required: true
        }
    /*note the removed ,*/
    }
});
});
});
</script>
<!-- Your Form must have a method attribute either post or get //-->
<form class="myform" method="post" action="">
<label for="name">Name:</label> <input type="text" name="name" id="name">
<label for="email">Email:</label> <input type="text" name="email" id="email">
<label for="phone">Phone:</label> <input type="text" name="phone" id="phone">
<!-- Hide this label with css //-->
<label for="submit" class="hidden">submit:</label><input type="submit" value="submit" text="submit" id="submit" />
</form>
<!-- Link this to another form with new js validation rules //-->
<a href="#" id="callme">Call me</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T18:21:12.997

这种方法奏效了。在我的测试中，我看到：

*   不能是链接
*   不能离开

有人可以确认吗？

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.js"></script>
<script type="text/javascript">
$(document).ready(function() {
$("#submit1").click(function(){
   $(".myform").validate({
    rules: {
        phone: {
            required: true
        }
    }
});
});
$("#submit").click(function(){
$(".myform").validate({
    rules: {
        name: {
            required: true
        },
        email: {
            required: true
        }
    }
});
});
});
</script>
<!-- Your Form must have a method attribute either post or get //-->
<form class="myform" method="post" action="">
<label for="name">Name:</label> <input type="text" name="name" id="name">
<label for="email">Email:</label> <input type="text" name="email" id="email">
<label for="phone">Phone:</label> <input type="text" name="phone" id="phone">
<!-- Hide this label with css //-->
<input type="submit" value="submit" text="submit" id="submit" />
<input type="submit" value="submit1" text="submit" id="submit1" />
</form>
<!-- Link this to another form with new js validation rules //--> 
```

# playframework-2.0 - form().bindFromRequest() 与数组值

> ID：11331191
> 
> 赞同：4
> 
> 时间：2012-07-04T14:38:32.937
> 
> 标签：playframework-2.0

我`<select name="items" multiple>`在前端有一个，我`form().bindFromRequest()`在后端使用，然后使用 DynamicForm。

但这是打嗝：

```
DynamicForm form = form().bindFromRequest();
form.field("items").value(); // Only return one value ! 
```

如何获取所有提交的值？`request().body().asFormUrlEncoded().get("items")`如果可能，无需通过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-09T00:03:52.077

绑定数组值需要在请求中正确命名值。参数名称应以“[]”结尾，以绑定为数组（列表）值。

在您的 HTML 中，您应该有：

```
<select name="items[]" multiple> 
```

在 Form 类中将其添加为：

```
public class ExampleForm {
    public List<Integer> items;
} 
```

我知道这不能解决 DynamicForm 问题，但它是更优雅的解决方案。

# javascript - 如果用户未登录，则捕获单击事件以弹出登录表单

> ID：11331193
> 
> 赞同：0
> 
> 时间：2012-07-04T14:39:06.500
> 
> 标签：javascript, jquery, authentication, jquery-events

我建立了一个需要用户登录的网站。现在我决定在不登录的情况下提供内容，但有些操作需要用户先登录。该网站严重依赖 Javascript。如果用户单击某个按钮，应弹出登录表单。

我打算做的是附加带有所需按钮的单击事件，以检查用户是否已登录。以前的代码：

```
 $('body').on('click','.editRating',function(){
      // code to edit        
      return false;
   }) 
```

这是我正在计划的。将另一个事件处理程序附加到所需的按钮以检查登录。

```
 $('body').on('click','.editRating',function(){
      if user is not loggedIn{
           popup loginForm
           return false
       }        
 })
  $('body').on('click','.editRating',function(){
      // code to edit        
      return false;
   }) 
```

那么这是否保证事件处理程序以与定义相同的顺序执行？是否有更清洁、更安全的方式来实现目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:41:55.133

您可以将它们全部放在一个事件处理程序中：

```
$('body').on('click','.editRating',function(){
    if user is not loggedIn{
        popup loginForm
        return false
    }        

    // code to edit        
    return false;
}) 
```

如果这不起作用，那么您可以利用事件处理中的捕获阶段与冒泡阶段来确保您获得所需的订单。我相信 jQuery 只做冒泡阶段（当然，如果我错了，我欢迎更正）。所以你将不得不放弃 jQuery 的`on()`东西，转而使用通用的 JavaScript`addEventHandler()`东西。

（注意这`addEventListener()`不在 IE 8 或更早版本中，因此如果您需要支持这些浏览器，则需要检查`addEventListener()`，如果不存在，`attachEvent()`请改用。请参阅[相关的 MDN 文档](https://developer.mozilla.org/en/DOM/element.addEventListener#Legacy_Internet_Explorer_and_attachEvent)。）

[http://jsfiddle.net/WdtsL/](http://jsfiddle.net/WdtsL/)展示了你可以如何做到这一点（减去刚才提到的 IE 8 支持）。祖先元素捕获阶段处理程序都在子元素气泡阶段处理程序之前触发。因此，您可以将检查登录的单击事件处理程序放在`body`标记或任何外部容器上的捕获阶段。然后各个按钮可以在冒泡阶段正常处理点击。

示例 HTML：

```
<body id="myBody">
<div id="myDiv">
    Click me!
</div>
</body>​ 
```

对应的 JavaScript 示例：

```
var myBody = document.getElementById('myBody');
var myDiv = document.getElementById('myDiv');

myDiv.addEventListener('click', function() { alert("Bubbling phase!"); }, false);
myBody.addEventListener('click', function() { alert("Capture phase!"); }, true);
myBody.addEventListener('click', function() { alert("Also a capture phase!"); }, true);
myDiv.addEventListener('click', function() { alert("Oh, hey, I'm bubbling phase!"); }, false);​ 
```

# c - 动态返回一个数组（ C ）

> ID：11331194
> 
> 赞同：1
> 
> 时间：2012-07-04T14:39:06.703
> 
> 标签：c, arrays, return

我有一个函数，我想返回一个 int 数组，但我不想为此创建一个变量，就像这样

```
 int* foo()
 {
       static int bar[]={1,2,3}; // edit thanks to comments
       return bar;
 } 
```

为了解决这个问题，我尝试了这个：

```
 return (Uint8Type*)   gAppCanContext.BluetoothMacAddr[0] + MacAddr[1] + '-'\
               + gAppCanContext.BluetoothMacAddr[2] + MacAddr[3] + '-' ; 
```

但它不起作用。我也试过这个：

```
return (Uint8Type*[]){ MacAddr[0] , MacAddr[1] + '-' MacAddr[3] ... }; 
```

它编译时发出警告，如果我执行程序，它会冻结。我也尝试过使用星号和 & 符号，但我无法让它正常工作。

甚至可能吗？如果是这样，怎么做？

补充：我不能使用 malloc - 是一个没有动态分配的嵌入式系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T14:41:14.580

> 它编译时发出警告，如果我执行程序，它会冻结。

该警告告诉您您正在返回一个即将死亡的对象的地址，因此在函数调用结束后访问它是非法的。

> 甚至可能吗？如果是这样，怎么做？

*   您可以`malloc`获取一些内存并返回指向它的指针
*   `static`正如 Electro 所提到的，您可以使用对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T14:44:15.500

如果 foo 中的数据不是动态的，你可以试试这个：

```
const char *foo(void)
{
    static const char *bar[] = {"aa", "bb", "cc"};
    return bar;
} 
```

在“静态”的帮助下，数据在超出范围时不会消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:47:51.023

除非标准已更改，否则 C 会返回可以在寄存器中返回的值。因此，在您的情况下，您的函数将返回一个指向字符串的指针。

考虑到最佳实践，如何创建该字符串取决于您。

您可以在函数中声明一个静态数组并返回一个指向它的指针：

```
char * cp1()
{
    static char szForeverBuf[100] = {0};

    return (char * ) &szForeverBuf;
} 
```

如果 cp1 在启动时被调用一次，这可能是一种处理事情的好方法，但多次调用可能并且可能会导致错误，因为该函数仅返回在编译时创建的缓冲区的地址。

换句话说，函数 cp1 每次调用 cp1 时都会返回一个字符指针，其值永远不会改变。因此，这就是该功能在启动时可能有用的原因。

您还可以像这样创建动态内存：

```
#include <stdio.h>
#include <stdlib.h>

char * cp2(int nSizeP)
{
    char *pszForeverBuf = NULL;
    int nSize = 0;

    if (0 >= nSizeP)
    {
        nSize = 100;
    }
    else
    {
        nSize = nSizeP + 1;
    }

    pszForeverBuf = (char *) malloc((nSize + 1) * sizeof(char));

    return pszForeverBuf; 
} 
```

您需要将 pszForeverBuf 的值存储在某处，因此当您不再想使用内存时，可以使用 pszForeverBuf -- 释放它`free(pszForeverBuf)`。

最后——更高级——你可以创建一个巨大的静态存储块，然后使用执行内存管理的函数对其进行操作。但是，这是在高级情况下使用的，当您不想多次调用 malloc 时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T14:48:31.940

```
int* foo()
{
   int bar[]={"aa","bb","cc"};
   return bar;
} 
```

没办法。C 并没有真正的“数组”；当您返回 bar 时，它实际上只会返回指向 bar 的第一个元素的指针，当您返回调用者时，它将消失。

除此之外，您可能想决定您的数组中是否需要“字符串”或整数:-)

您可以将数组粘贴到结构中

```
struct Weird
{
    int bar[3];
} 
```

并返回：

```
struct Weird foo(void)
{
    struct Weird bar;
    bar.bar[0]=1;
    bar.bar[1]=5;
    bar.bar[2]=10;
    return bar;
} 
```

不过，我不确定这就是你想要的。我的猜测是你真的很想熟悉 C :-)

如果你这样做，你也可以让你的第一个例子工作

```
int* foo()
{
   static int bar[]={1,2,3};
   return bar;
} 
```

但是，当然，这只会创建数组的一个实例——因此，如果您正在修改它，所有这些返回都将被更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T18:58:15.870

首先，C 中的函数不能返回数组值，只能返回指针。然后你不能返回一个动态的“堆栈”分配对象，正如其他人已经指出的那样，因为当你从函数返回时，这样的对象不再存在。

我发现处理此类事情的最简单方法是将数组（指向）作为参数传递给函数：

```
int* foo(int bar[3]) {
  // fill the array here

  return bar;
} 
```

这使您可以使用两种不同的分配策略调用您的函数

```
int* aMalloc = foo(malloc(sizeof(int[3])));
int* aLocal = foo((int[3]){ 0 }); 
```

然后你甚至可以将这两种形式包装成宏，以简化你的编码：

```
#define fooMalloc() foo(malloc(sizeof(int[3])))
#define fooLocal() foo((int[3]){ 0 }) 
```

所以上面的代码会读

```
int* aMalloc = fooMalloc();
int* aLocal = fooLocal(); 
```

# html - 使用百分比的动态宽度

> ID：11331197
> 
> 赞同：3
> 
> 时间：2012-07-04T14:39:16.173
> 
> 标签：html, css

我从未使用过百分比布局。当然，我已经研究过它们，但没有任何练习。所以，我请大家看看我的布局截图并告诉我：我怎样才能在不同的百分比条件下显示相同的布局，并且最终不损失任何布局质量？我的意思是，没有 div 的叠加和空格。

![屏幕分辨率：1920x1080](../Images/379cf942f73def37f371297351fcf8c5.png)

![屏幕分辨率：1024x768](../Images/9a4297457808a245266735a2eac9af64.png)

如您所见，我的布局还可以。但是，在 1024x768 中，我们有一点间距。另一方面，在 1920x1080 中，我们已经超出了层之间的空间。我正在使用 CSS 来做到这一点。看：

```
section#FeedDeck {
   width: 100%;
   height: 100%;
   float: left;
}

.FeedContainer {
   width: 100%;
   float: left;
   padding-bottom: 25px;
   border-bottom: 1px solid #b9b9b9;
}

.LeftFeedSide {
   width: 10%;
   float: left;
}

.CenterFeedSide {
   width: 80%;
   float: left;
}

.RightFeedSide {
  width: 10%;
  float: right;
  text-align: right;
  font-size: 12px;
}

.RightFeedSide a {
    width: 100%;
    float: left;
} 
```

我的 HTML：

```
 <section id="FeedDeck">

            <div class="FeedContainer">

            <div class="LeftFeedSide">

                <img src="60x60.jpg" alt="" />

            </div>

            <div class="CenterFeedSide">

                <header id="FeedContent">
                    <h1>Anne Hathaway</h1>
                    <h4>Diretora de Design</h4>
                </header>
                <p>
                    Can you fix a broken drug company research lab?
                </p>
                <p>
                    Jack Scannell, the European pharmaceuticals analyst at
                     Sanford C. Bernstein, recently held a conference on the future
                     of drug research and development. On the last day, he had representatives
                     from two of the most successful drug development organizations on the planet:
                     Sean Bohen, who heads early resaerch and development at Genentech, part of Roche,
                     which has had a legendary string of cancer drug successes; and Mads Krogsgaard Thomsen,
                     the chief scientific officer at Novo Nordisk, one of the dominant players in diabetes and
                     the best-performing big pharma stock over the past decade. This story is based on a transcript
                     of their talks.
                </p>

            </div>

            <div class="RightFeedSide">

                <a href="#">#1</a>
                <span>há um minuto atrás</span>

            </div>

        </div>

    </section> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:47:27.627

具有边框的 div 容器：1px 纯红色；在你的形象上。我想它有 80% 的宽度或其他东西......试着给它一个`max-width:1000px;`好

**编辑**

我想我误会了！您用一些箭头说明了问题，没有看到！片刻，为您制作一个 jsfiddle。

**更新 - 在这里**

[http://jsfiddle.net/uaJCU/2/](http://jsfiddle.net/uaJCU/2/)

左列具有固定宽度，其余为百分比。

**HTML**

```
<div id="container">
    <div id="paddingFix">
         <div id="left">
         </div>
        <div id="right">
        </div>
    </div>
</div>​ 
```

**CSS**

```
#container {
   width:90%;
   margin:0 auto;
   height:40px;  
}
#paddingFix {
    padding-left:80px;
    position:relative;
}
#left {
    position:absolute;
    left:0px;
    top:0px;
    height:40px;
    width:80px;
    border:1px solid black;
}
#right {
    height:40px;
    border:1px solid blue;   
}
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T14:49:06.520

布局完美无缺，只有内容大小会随着分辨率的变化而变化。您不应使用像素大小的元素（字体、图片）。这样，内容将根据分辨率调整大小。

[检查这个问题。](https://stackoverflow.com/questions/1581489/how-to-design-resolution-independent-css-elements)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T14:49:46.023

当您扩展到更大的分辨率时，有空白是正常的；你需要明白一件事：

您在列/布局中使用百分比这一事实并不意味着所有元素都会自动流动：例如图像。为了获得流畅的图像，您需要 max-width:100% "hack/fix" [http://www.alistapart.com/articles/fluid-images/](http://www.alistapart.com/articles/fluid-images/)。这样你的图像会自动缩小，保持原来的比例/比例，并会扩大到原来的大小。检查[http://www.gplus.gr/blog/](http://www.gplus.gr/blog/) - 使用窗口大小，你会明白我的意思。

然后，没有什么能阻止你拥有一个半流体布局：如果你认为右列不应该改变宽度，那么以像素为单位设置它，或者在它上面设置一个 max-width:200px （例如），这样它会展开直到 200 像素的限制。

# javascript - JavaScript：如何在 Internet Explorer 中模拟更改事件（委托）

> ID：11331203
> 
> 赞同：14
> 
> 时间：2012-07-04T14:39:32.717
> 
> 标签：javascript, internet-explorer, dom-events, event-delegation

**更新：（** *回顾，小提琴和赏金）*

这个问题没有引起太多关注，所以我打算花一些时间来解决这个问题。我知道我的回答和问题往往过于冗长。这就是为什么我继续设置[这个 fiddle](http://jsfiddle.net/vVA8N/)的原因，在我看来，这是我目前必须用来接近冒泡`change`事件的那种代码的体面表示。我试图解决的几个问题：

1.  该`pseudo-change`事件不会在选择元素上触发，除非它失去焦点。在某些情况下，应在选择新值时重定向客户端。我如何实现这一目标？
2.  单击标签时以及复选框本身都会调用处理程序。这本身就是您所期望的，但是由于事件冒泡，（AFAIK）无法确定单击了哪个元素。IE 的事件对象没有`realTarget`属性。
3.  通过单击标签更改`checked`IE 中复选框的状态时，一切都很好（尽管它需要一些讨厌的解决方法），但是当直接单击复选框时，将调用处理程序，但选中状态保持不变，直到我单击第二次。然后值会发生变化，但不会调用处理程序。
4.  当我切换到不同的选项卡并再次返回时，处理程序会被多次调用。如果选中状态实际改变了三次，如果我只直接单击一次复选框，则两次。

任何可以帮助我解决上述一个或多个问题的信息将不胜感激。拜托，我没有忘记添加一个*jQuery*标签，我喜欢纯JS，所以我正在寻找一个纯JS的答案。

* * *

我有一个网页，上面有超过 250 个选择元素和 20~30 个复选框。我还必须跟踪用户的行为，并采取适当的行动。因此，我很自然地委派更改事件，而不是添加数百个听众，恕我直言。

当然，IE - 公司政策：必须支持 IE8 - 在我需要时不会触发 onchange 事件。所以我试图伪造一个 onchange 事件。到目前为止，除了一件真正让我烦恼的事情之外，我的工作还算不错。
我正在使用`onfocusin`并`onfocusout`注册事件。在某些情况下，当用户从 a select 元素中选择一个新值时，脚本应该立即响应。但是，只要选择没有失去焦点，就不会发生这种情况。

到目前为止，这是我想出的：

```
i = document.getElementById('content');
if (!i.addEventListener)
{
    i.attachEvent('onfocusin',(function(self)
    {
        return function(e)
        {
            e = e || window.event;
            var target = e.target || e.srcElement;
            switch (target.tagName.toLowerCase())
            {
                case 'input':
                    if (target.getAttribute('type') !== 'checkbox')
                    {
                        return true;
                    }
                    return changeDelegator.apply(self,[e]);//(as is
                case 'select':
                    self.attachEvent('onfocusout',(function(self,current)
                    {
                        return function(e)
                        {
                            e = e || window.event;
                            var target = e.target || e.srcElement;
                            if (target !== current)
                            {
                                return;
                            }
                            self.detachEvent('onfocusout',arguments.callee);//(remove closure
                            return changeDelegator.apply(self,[e]);
                        }
                    })(self,target));
                default: return;
            }
        }
    })(i));//(fake change event, buggy
}
else
{//(to put things into perspective: all major browsers:
    i.addEventListener('change',changeDelegator,false);
} 
```

我尝试在`onfocusin`处理程序中附加另一个事件侦听器，绑定到`onclick`事件。它触发了`onfocusout`任何选择具有焦点 ATM 的事件。唯一的问题是，99.9% 的用户会点击选择，因此该`focusin`事件也会触发 onclick。

为了解决这个问题，我创建了闭包，并将当前的焦点选择及其原始值作为参数传递给它。但是有些用户*确实*使用他们的键盘，这些用户经常在不更改值的情况下跳到下一个选择框。每次绑定一个新的 onclick 侦听器...我确实相信有*一种*比检查 all`e.type`并分别处理它们更简单的方法。
举个例子：带有额外`onclick`监听器的代码：所有代码都与第一个片段相同，所以我只是粘贴`case 'select':`块

```
 case 'select':
                    self.attachEvent('onfocusout',(function(self,current)
                    {
                        return function(e)
                        {
                            e = e || window.event;//(IE...
                            var target = e.target || e.srcElement;
                            if (!(target === current))
                            {
                                return;
                            }
                            self.detachEvent('onfocusout',arguments.callee);//(remove closure
                            return changeDelegator.apply(self,[e]);
                        };
                    })(self,target));
                    self.attachEvent('onclick',(function(self,current,oldVal)
                    {
                        return function(e)
                        {
                            e = e || window.event;
                            var target = e.target || e.srcElement;
                            if (target.tagName.toLowerCase() === 'option')
                            {
                                while(target.tagName.toLowerCase() !== 'select')
                                {
                                    target = target.parentNode;
                                }
                            }
                            if (target !== current)
                            {//focus lost, onfocusout triggered anyway:
                                self.detachEvent('onclick',arguments.callee);
                                return;
                            }
                            var val = target.options[target.selectedIndex].innerHTML;//works best in all browsers
                            if (oldVal !== target.options[target.selectedIndex].innerHTML)
                            {
                                self.detachEvent('onclick',arguments.callee);
                                return target.fireEvent('onfocusout');
                            }
                        };
                    })(self,target,target.options[target.selectedIndex].innerHTML));
                default: return; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:13:32.687

虽然我同意在整个表单上只设置一个事件侦听器而不是多个侦听器，每个元素一个侦听器会更好，但您必须评估您的决定的成本和收益。一个监听器的好处是减少了内存占用。缺点是您必须使用如此复杂的代码技巧来解决一个浏览器对事件的错误实现、增加执行时间、滥用事件类型、重复注册和注销事件侦听器，可能会导致某些用户感到困惑。

回到好处，如果您只是为所有元素附加相同的函数作为侦听器，那么内存占用不会那么大。内存是当前计算机所不缺的。

即使这不能回答您的问题，我也建议您停止尝试使其工作，而是在每个表单元素上附加侦听器。

为了解决您的观点：

1.  你确定吗？我已经尝试[了 Microsoft 文档中的基本示例，](http://samples.msdn.microsoft.com/workshop/samples/author/dhtml/refs/onchangeEX.htm)`onchange`在我单击下拉列表中的选项后，IE7 和 IE8 都会触发侦听器。当使用向上/向下键更改选择时，它甚至会触发。

2.  虽然您确实无法**轻松地**将标签上的事件连接到受影响的复选框，但您为什么要这样做？无论如何，该`change`事件都会在复选框上触发，您应该只关心那个。但是，如果您必须从标签上的事件访问复选框，那么您可以手动执行此操作。如果事件以标签为目标，那么您就知道该标签与输入有某种关联。根据您使用标签的方式，您可以选择`input`嵌套在 中的元素`label`，或者获取具有`for`在`label`.

3.  修复复选框在更改错误*时返回先前值*`this.blur()`的一种方法是在复选框上执行`focus`事件。

4.  当您说“处理程序”时，您的意思是`onfocusin`事件处理程序，或者`changeDelegator`？`focusin`重新激活选项卡时看到事件触发是正常的。我不确定为什么会多次触发该事件，所以我只是猜测：一个可能是活动输入接收的焦点；第二个可能是文档本身接收的焦点；我不知道为什么会发生第三次通话。我不明白“如果选中的状态实际上发生了变化，[...] 如果我只直接单击了一次复选框”是什么意思。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T20:31:34.990

好吧，我又想出了一个办法，我想出了一个相当不错的方法（在工作中它成功了——我试图复制我写的代码，但是在喝了几杯啤酒之后，它可能包含一些错误，*但是精神不变*）

```
window.attachEvent('onload',function ieLoad()
{
    var mainDiv = document.getElementById('main');//main div, from here events will be delegated
    var checks = mainDiv.getElementsByTagName('input');//node list of all inputs
    var checkStates = {};
    for (var i=0;i<checks.length;i++)
    {
        if (checks[i].type === 'checkbox')
        {//get their checked states on load, this object serves as a reference
            checkStates[checks[i].id] = checks[i].checked;
        }
    }
    mainDiv.attachEvent('onfocusin',(function(initState)
    {//initState holds a reference to the checkStates object
        return function(e)
        {
            e = e || window.event;
            var target = e.target || e.srcElement;
            //id of checkboxes used as key, so no checking for tagName or type required
            if (!initState.hasOwnProperty(target.id) || target.checked === initState[target.id])
            {//don't call method if checkstate is unchanged, either. I'll explain in a minute
                return e;
            }
            initState[target.id] = target.checked;//set new checked-state
            changeDelegator.apply(target,[e]);//delegate
        };
    })(checkStates));
    window.detachEvent('onload',ieLoad);//avoid mem-leak with onload handler!
}); 
```

我发现在某些情况下，对于收音机和复选框，focusin 事件会触发两次。使用包含所有复选框的实际选中状态的对象比单独的处理程序更便宜，并且它允许我仅在元素的值发生更改后委托事件。

该`changeDelegator`函数仅在需要时调用，但我在这里发布的匿名函数仍然比我想要的更多地调用*Waaaay ，但这种方法仍然优于单个处理程序。*

我省略了选择，但我也让它们工作了（类似的，在我的代码的完整版本中，闭包有 2 个对象，我做到了，所以我可以*标记*一个 id，在需要时触发 blur 事件，并且客户端被重定向）。
在运行结束时，尽管我学到了一些新技巧，但我从这个练习中学到的主要东西是对一个叫做 IE 的可怕、坚韧的傀儡更加深切的仇恨……但如果还有其他人的话可能想在 IE 中委托更改事件，知道这是（*几乎*）可能的

# php - 我如何从这个 SOAP 响应中读取 2 个节点 - 我可以使用它 SimpleXML

> ID：11331206
> 
> 赞同：0
> 
> 时间：2012-07-04T14:39:38.233
> 
> 标签：php, soap, curl, simplexml

我熟悉 SimpleXML，现在正在接收来自客户端的 SOAP 响应。我已经尝试通过使用 SimpleXML 阅读尽可能多的示例，但我就是无法让我的工作！有人可以给我看一行PHP，它在以下代码中读取DESCRIPTION节点：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Body>
    <GetPoliciesResponse xmlns="http://www.abraxas-uk.com/Abraxas/InsuranceWebsite/InsWebService/">
      <GetPoliciesResult>
        <Policies xmlns="">
          <Policy>
            <Description>Off-Pad Warranty</Description>
            <Plan />
          </Policy>
        </Policies>
      </GetPoliciesResult>
    </GetPoliciesResponse>
  </soap:Body>
</soap:Envelope> 
```

我正在拔头发！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:05:27.953

IIRC 将 SimpleXML 与包含多个 XML 命名空间的文档一起使用是一团糟。

您可以使用 DOM（即没有 XPath）：

```
<?php

$xml = '<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Body>
    <GetPoliciesResponse xmlns="http://www.abraxas-uk.com/Abraxas/InsuranceWebsite/InsWebService/">
      <GetPoliciesResult>
        <Policies xmlns="">
          <Policy>
            <Description>Off-Pad Warranty</Description>
            <Plan />
          </Policy>
        </Policies>
      </GetPoliciesResult>
    </GetPoliciesResponse>
  </soap:Body>
</soap:Envelope>';

$doc = DOMDocument::loadXml($xml);

$desc = $doc->getElementsByTagName('Description')->item(0)->textContent;

echo $desc; 
```

对于更复杂的情况，您可能必须使用 XPath 而不是`DOMNode::getElementsByTagName()`

[http://www.php.net/manual/en/class.domxpath.php](http://www.php.net/manual/en/class.domxpath.php)

为了您的方便，您可以在两个世界（DOM / Simplexml）之间切换：

[http://www.php.net/manual/en/function.simplexml-import-dom.php](http://www.php.net/manual/en/function.simplexml-import-dom.php)

[http://www.php.net/manual/en/function.dom-import-simplexml.php](http://www.php.net/manual/en/function.dom-import-simplexml.php)

# javascript - 需要 Ajax 功能 - 更新数据库而不刷新页面

> ID：11331208
> 
> 赞同：0
> 
> 时间：2012-07-04T14:39:45.483
> 
> 标签：javascript, jquery, ajax

我需要一个 ajax 函数的帮助

这是原始页面设置。页面将包含带有此表单链接的表格

.... 链接 - 按钮 1 - 按钮 2 链接 - 按钮 1 - 按钮 2 链接 - 按钮 1 - 按钮 2 ...

其中 button1 用于隐藏行，而 button2 用于隐藏 + 将 +1 值添加到 db 中的该链接。每个链接都将具有唯一的 ID，该 ID 将与 button2 一起使用，因此很容易定位它。因此，访问者将连续单击一个按钮，该行将隐藏，然后他移动到另一行....

数据库设置：

id - 链接 - .... - nmbOFlikes

我的问题是我不了解 Ajax，它只是更新数据库的解决方案，无需在每次单击按钮后刷新。

该页面不是静态的，它是由另一个从 db 中提取数据的函数格式化的 这是简单的 html 页面版本，所以如果有人可以帮忙......

所以这是没有功能的javascript

```
$(document).ready(function(){
    $("button.live").click(function(){
    $(this).parents('tr').hide();
        alert('Link is hidden');
    });
$("button.add").click(function(){
  $(this).parents('tr').hide();
  alert('This link is dead');
  $.post("update_db.php", { id: button_id, increment: true },
   function(data) {
   alert("Link incremented");
 }); 
```

}); });

这是桌子

```
<table width="500" border="0" cellspacing="0" cellpadding="3">
    <tr>
        <td><p>Link 1</p></td>
        <td><button class="live">live</button></td>
        <td><button class="add" id="1">add</button></td>
    </tr>
    <tr>
        <td><p>Link 2</p></td>
        <td><button class="live">live</button></td>
        <td><button class="add" id="2">add</button></td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:47:16.417

您不会直接将值添加到数据库中，而是先将数据发布到脚本中。我不完全清楚您要完成什么，但 post 功能可能类似于：

```
$.post("update_database_with_ajax.php", { id: button_id, increment: true },
   function(data) {
     alert("Link incremented");
   }); 
```

这是一个功能性的 jsFiddle 示例：[Jquery POST 示例](http://jsfiddle.net/GbqJA/3/)

**update_data_With_ajax.php**

```
/** This is an example and should not be used 'as is' **/
if ( isset( $_REQUEST['increment'] ) {

    // Connect to MySQL
    $conn = mysql_connect("localhost", "root", "");

    if (!$conn) {
        die('Could not connect: ' . mysql_error());
    }

    // Fetch the values we posted using AJAX
    $id = mysql_real_escape_string( $_REQUEST['id'] );

    //Select your database
    mysql_select_db("my_db", $conn);

    //increment your number of clicks    
    mysql_query("UPDATE table_name SET nmbofclicks = nmbofclicks + 1 WHERE id = {$id}");

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T14:47:21.890

[jQuery.ajax](http://api.jquery.com/jQuery.ajax)的简单用法：

```
$.ajax({
    url: "serversite.php",
    type: "POST",
    data: {
        // Object of data you will send to serversite.php
    },
    success: function() {
        // everything went ok.
    }
}); 
```

# objective-c - Three20 json 响应存储到多个视图可访问的共享对象中

> ID：11331211
> 
> 赞同：0
> 
> 时间：2012-07-04T14:39:58.303
> 
> 标签：objective-c, xcode, json, ios5, three20

我是 iPhone 开发和 Three20 框架的新手。我创建了一个简单的登录控制器，它将用户详细信息作为来自 PHP 的 json 响应返回。我需要将 json 响应存储到一个对象或可以在其他视图上共享的东西中，例如我想在配置文件视图控制器上显示收到的用户详细信息。

```
- (void)requestDidFinishLoad:(TTURLRequest *)request {
_loading = NO;
_loaded = YES;

TTURLDataResponse *response = request.response;

NSString *responseBody = [[NSString alloc]initWithData:response.data encoding:NSUTF8StringEncoding];

SBJSON *jsonParser = [[[SBJSON alloc] init] autorelease];

loggedUser = (NSDictionary *) [jsonParser objectWithString:responseBody error:nil];
NSLog(@"%@",loggedUser);

[super requestDidFinishLoad:request]; 

} 
```

现在 loggedUser 是一个 NSDictionary。我想访问 profileViewController.m 中的 loggedUser

请指导。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:46:28.023

您应该朝着为您的应用创建模型四的方向前进。

一种简单的方法是将您的模型作为一个单例类，您可以从代码中的任何地方访问它。

看看[这个 SO 线程](https://stackoverflow.com/questions/145154/what-does-your-objective-c-singleton-look-like)，了解几个变体实现。

# android - glTexImage2D 不渲染图片

> ID：11331216
> 
> 赞同：0
> 
> 时间：2012-07-04T14:40:20.553
> 
> 标签：android, opengl-es

为什么这不向我显示图形？我得到的只是一个白色方块。图片为 512x512。

```
public void loadGLTexture(GL10 gl) {  

      imageData = ByteBuffer.allocate(mPicture512.length).order(ByteOrder.nativeOrder());
    imageData.put(mPicture512);  
    imageData.position(0); 
    // generate one texture pointer 
    gl.glGenTextures(1, textures, 0);
    // ...and bind it to our array 
//Bitmap bitmap = getBitmap(mContext);

//bitmap.getPixels(pixels, offset, stride, x, y, width, height)

    // create nearest filtered texture
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]); 
    gl.glTexImage2D(GL10.GL_TEXTURE_2D, 0, GL10.GL_RGBA, 512, 512, 0,GL10.GL_RGBA, GL10.GL_BYTE, imageData); 
```

附言。我知道我可以这样做并且它可以工作，但由于这是一个性能关键的应用程序，我不希望首先创建位图的开销。

```
GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:23:20.137

`glTexParameter`修改每个纹理状态。在绑定纹理之前调用您的 min/mag 过滤器设置，因此它对您的纹理没有影响。

因此，您的纹理仍然使用最小过滤器的默认 mipmapping，并且不会正确显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T17:16:10.603

为什么不以不同的方式将图像上传到 OpenGL？

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inScaled = false;
Bitmap bitmap = BitmapFactory.decodeStream(activity.getAssets().open(fileName));

GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0);

gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR);
gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:54:33.590

问题是我正在加载具有标题而不是原始图片的位图 PNG。

# amazon-web-services - Amazon SQS 消息队列

> ID：11331221
> 
> 赞同：1
> 
> 时间：2012-07-04T14:40:31.180
> 
> 标签：amazon-web-services, amazon-sqs

我有以下情况：

*   对于需要处理的作业，将包含作业描述的消息发送到 Amazon SQS 消息队列
*   我有不同的流程要做这些工作

需要满足以下条件：

1.  如果一个进程未能完成一项作业（可能是因为它正在运行的服务器崩溃），则该作业必须再次可供其他进程使用。
2.  在处理一个作业时，具有相同描述的其他作业必须等到第一个作业完成或达到其超时时间。
3.  系统应该可以根据消息队列长度轻松扩展。

为了确保（1），我的第一个想法是使用 Amazon SQS 队列提供的消息锁定功能，但是我如何确保（2）呢？将流程分配给工作描述将是一种选择，但是（3）会更加困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:44:21.713

设置更长的“VisibilityTimeout”值。确保此值比完成作业通常所需的时间长。

如果接收此作业的机器未能完成它（或未能及时完成），则该消息将再次可供新机器处理。

这解决了#1 和#2。

对于#3，我相信您可以根据 SQS 队列的大小设置自动缩放触发器，因此如果您有更多消息，AWS 将自动启动新实例来处理它们。

# android - HttpClient不在galaxy s2上存储cookie

> ID：11331225
> 
> 赞同：1
> 
> 时间：2012-07-04T14:40:35.227
> 
> 标签：android, cookies, httpclient, galaxy

我正在尝试使用此代码从服务器获取数据

```
 DefaultHttpClient httpClient = new DefaultHttpClient();
    httpClient.getParams().setParameter(CoreProtocolPNames.USER_AGENT, USER_AGENT);
    HttpRequestRetryHandler retryhandler = new DefaultHttpRequestRetryHandler(6, true);

    httpClient.setHttpRequestRetryHandler(retryhandler);

    BasicCookieStore cookieStore = new BasicCookieStore();
    httpClient.setCookieStore(cookieStore);
    if(Build.VERSION.SDK_INT>8){
        CookieManager cookieManager = new CookieManager();
        cookieManager.setCookiePolicy(CookiePolicy.ACCEPT_ALL);
        CookieHandler.setDefault(cookieManager);
    }
    HttpGet httpget = new HttpGet(URL);
        HttpResponse response = httpClient.execute(httpget);

    HttpEntity entity = response.getEntity();
... 
```

除了我的客户端的三星 Galaxy SII (android 4.0.3) 之外，它在我迄今为止尝试过的所有设备上都可以正常工作。从服务器响应来看，似乎没有存储会话 cookie。我未能重现此错误，到目前为止我尝试的所有方法都没有解决它。你有什么线索吗？

编辑：删除了禁用 StrictMode 策略的代码块（仍然存在问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:02:40.027

我有一个类似的问题。问题是我的手机导致日期不正确，因此所有 cookie 都是空的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:32:32.943

经过多次尝试，我发现 BasicCookieStore 没有添加任何 cookie，因为所有 cookie 都因未知原因过期（并且仅在 S2 上）。我必须创建自己的 CookieStore 实现，它忽略过期日期检查。这是一个临时修复，我仍在寻找一种更安全、更干净的方法来解决这个问题。

# javascript - jQuery“guid”为空或不是对象

> ID：11331226
> 
> 赞同：16
> 
> 时间：2012-07-04T14:40:38.020
> 
> 标签：javascript, jquery, jquery-ui

这个错误在我的 JavaScript 错误日志中不断出现，在 IE 7 和 8 中。但我无法在我的生活中重现它！

> “guid”为空或不是对象

我使用的是 jQuery 1.4.1，所以这不是`.hover()`谷歌搜索中出现的问题。

错误发生在这里（大约行 1570 ）：

```
 if (!handler.guid) {
        handler.guid = jQuery.guid++;
  } 
```

它发生的页面真的很复杂，对话框、ajax 内容、选项卡、手风琴，你能想到的，它就在那里。更糟糕的是，它是内部的，所以我不能给你们一个链接来玩它。

我无法制作小提琴 b/c 我无法重现问题:(

我知道这是一个很长的机会，当我有能力的时候，我更愿意为此提供赏金。

有没有人知道我应该寻找什么来解决这个问题？我还在使用 jquery Ui 1.8.11 和各种插件。

编辑：这是引发错误的大部分 jquery 代码。它是 jquery 事件的一部分。

```
add: function (elem, types, handler, data) {
            if (elem.nodeType === 3 || elem.nodeType === 8) {
                return;
            }

            // For whatever reason, IE has trouble passing the window object
            // around, causing it to be cloned in the process
            if (elem.setInterval && (elem !== window && !elem.frameElement)) {
                elem = window;
            }

            // Make sure that the function being executed has a unique ID
            if (!handler.guid) {
                handler.guid = jQuery.guid++;
            }

            // if data is passed, bind to handler
            if (data !== undefined) {
                // Create temporary function pointer to original handler
                var fn = handler;

                // Create unique handler function, wrapped around original handler
                handler = jQuery.proxy(fn);

                // Store data in unique handler
                handler.data = data;
            }

            // Init the element's event structure
            var events = jQuery.data(elem, "events") || jQuery.data(elem, "events", {}),
            handle = jQuery.data(elem, "handle"), eventHandle;

            if (!handle) {
                eventHandle = function () {
                    // Handle the second event of a trigger and when
                    // an event is called after a page has unloaded
                    return typeof jQuery !== "undefined" && !jQuery.event.triggered ?
                    jQuery.event.handle.apply(eventHandle.elem, arguments) :
                    undefined;
                };

                handle = jQuery.data(elem, "handle", eventHandle);
            }

            // If no handle is found then we must be trying to bind to one of the
            // banned noData elements
            if (!handle) {
                return;
            }

            // Add elem as a property of the handle function
            // This is to prevent a memory leak with non-native
            // event in IE.
            handle.elem = elem;

            // Handle multiple events separated by a space
            // jQuery(...).bind("mouseover mouseout", fn);
            types = types.split(/\s+/);

            var type, i = 0;

            while ((type = types[i++])) {
                // Namespaced event handlers
                var namespaces = type.split(".");
                type = namespaces.shift();

                if (i > 1) {
                    handler = jQuery.proxy(handler);

                    if (data !== undefined) {
                        handler.data = data;
                    }
                }

                handler.type = namespaces.slice(0).sort().join(".");

                // Get the current list of functions bound to this event
                var handlers = events[type],
                special = this.special[type] || {};

                // Init the event handler queue
                if (!handlers) {
                    handlers = events[type] = {};

                    // Check for a special event handler
                    // Only use addEventListener/attachEvent if the special
                    // events handler returns false
                    if (!special.setup || special.setup.call(elem, data, namespaces, handler) === false) {
                        // Bind the global event handler to the element
                        if (elem.addEventListener) {
                            elem.addEventListener(type, handle, false);
                        } else if (elem.attachEvent) {
                            elem.attachEvent("on" + type, handle);
                        }
                    }
                }

                if (special.add) {
                    var modifiedHandler = special.add.call(elem, handler, data, namespaces, handlers);
                    if (modifiedHandler && jQuery.isFunction(modifiedHandler)) {
                        modifiedHandler.guid = modifiedHandler.guid || handler.guid;
                        modifiedHandler.data = modifiedHandler.data || handler.data;
                        modifiedHandler.type = modifiedHandler.type || handler.type;
                        handler = modifiedHandler;
                    }
                }

                // Add the function to the element's handler list
                handlers[handler.guid] = handler;

                // Keep track of which events have been used, for global triggering
                this.global[type] = true;
            }

            // Nullify elem to prevent memory leaks in IE
            elem = null;
        } 
```

编辑：我花了大约 25 分钟试图产生这个错误，但没有运气。我正在打开和关闭标签（加载了ajax），试图让它们在加载之前改变等等。还打开和关闭对话框（加载了 ajax）并执行 ajaxly 添加和删除内容的操作。什么都不会破坏！

不确定这是否有帮助，但这是导致错误的用户代理字符串：

> Mozilla/4.0（兼容；MSIE 7.0；Windows NT 5.1；GTB7.0；.NET CLR 2.0.50727；.NET CLR 1.1.4322；.NET CLR 3.0.04506.30；.NET CLR 3.0.04506.648；.NET CLR 3.0。 4506.2152；.NET CLR 3.5.30729)

这是另一个：

> Mozilla/4.0（兼容；MSIE 7.0；Windows NT 5.1；Trident/4.0；InfoPath.1；.NET CLR 1.1.4322；.NET CLR 2.0.50727；.NET CLR 3.0.4506.2152；.NET CLR 3.5.30729；MS -RTC LM 8；MS-RTC LM 8)

errorception（我们的 javascript 错误日志服务）似乎没有保留单个用户代理，所以我只有两个。

编辑：我想我已经把它缩小到我们的快速搜索。它使用 jquery ui Auto Complete 和 jquery.jail（异步图像加载）。我已经稍微调整了 jquery ui 自动完成。并且正在使用 HTML 扩展名。

这是代码：

```
 /*
     * jQuery UI Autocomplete 1.8.11
     *
     * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
     * Dual licensed under the MIT or GPL Version 2 licenses.
     * http://jquery.org/license
     *
     * http://docs.jquery.com/UI/Autocomplete
     *
     * Depends:
     *  jquery.ui.core.js
     *  jquery.ui.widget.js
     *  jquery.ui.position.js

 */

(function( $, undefined ) {

// used to prevent race conditions with remote data sources
var requestIndex = 0;

$.widget( "ui.autocomplete", {
    options: {
        appendTo: "body",
        autoFocus: false,
        delay: 300,
        minLength: 1,
        position: {
            my: "left top",
            at: "left bottom",
            collision: "none"
        },
        source: null
    },

    pending: 0,

    _create: function() {
        var self = this,
            doc = this.element[ 0 ].ownerDocument,
            suppressKeyPress;

        this.element
            .addClass( "ui-autocomplete-input" )
            .attr( "autocomplete", "off" )
            // TODO verify these actually work as intended
            .attr({
                role: "textbox",
                "aria-autocomplete": "list",
                "aria-haspopup": "true"
            })
            .bind( "keydown.autocomplete", function( event ) {
                if ( self.options.disabled || self.element.attr( "readonly" ) ) {
                    return;
                }

                suppressKeyPress = false;
                var keyCode = $.ui.keyCode;
                switch( event.keyCode ) {
                case keyCode.PAGE_UP:
                    self._move( "previousPage", event );
                    break;
                case keyCode.PAGE_DOWN:
                    self._move( "nextPage", event );
                    break;
                case keyCode.UP:
                    self._move( "previous", event );
                    // prevent moving cursor to beginning of text field in some browsers
                    event.preventDefault();
                    break;
                case keyCode.DOWN:
                    self._move( "next", event );
                    // prevent moving cursor to end of text field in some browsers
                    event.preventDefault();
                    break;
                case keyCode.ENTER:
                case keyCode.NUMPAD_ENTER:
                    // when menu is open and has focus
                    if ( self.menu.active ) {
                        // #6055 - Opera still allows the keypress to occur
                        // which causes forms to submit
                        suppressKeyPress = true;
                        event.preventDefault();
                    }
                    //passthrough - ENTER and TAB both select the current element
                case keyCode.TAB:
                    if ( !self.menu.active ) {
                        return;
                    }
                    self.menu.select( event );
                    break;
                case keyCode.ESCAPE:

                    //This is changed by ME!   added self.term = ''; and also self.element.blur();  //this was so that when you hit esc, it clears the box, and puts it back to an empty state.

                    self.term = '';
                    self.element.val( self.term );
                    self.close( event );
                    self.element.blur();
                    break;
                default:
                    // keypress is triggered before the input value is changed
                    clearTimeout( self.searching );
                    self.searching = setTimeout(function() {
                        // only search if the value has changed
                        if ( self.term != self.element.val() ) {
                            self.selectedItem = null;
                            self.search( null, event );
                        }
                    }, self.options.delay );
                    break;
                }
            })
            .bind( "keypress.autocomplete", function( event ) {
                if ( suppressKeyPress ) {
                    suppressKeyPress = false;
                    event.preventDefault();
                }
            })
            .bind( "focus.autocomplete", function() {
                if ( self.options.disabled ) {
                    return;
                }

                self.selectedItem = null;
                self.previous = self.element.val();
            })
            .bind( "blur.autocomplete", function( event ) {
                if ( self.options.disabled ) {
                    return;
                }

                clearTimeout( self.searching );
                // clicks on the menu (or a button to trigger a search) will cause a blur event
                self.closing = setTimeout(function() {
                    self.close( event );
                    self._change( event );
                }, 150 );
            });
        this._initSource();
        this.response = function() {
            return self._response.apply( self, arguments );
        };
        this.menu = $( "<ul></ul>" )
            .addClass( "ui-autocomplete" )
            .appendTo( $( this.options.appendTo || "body", doc )[0] )
            // prevent the close-on-blur in case of a "slow" click on the menu (long mousedown)
            .mousedown(function( event ) {
                // clicking on the scrollbar causes focus to shift to the body
                // but we can't detect a mouseup or a click immediately afterward
                // so we have to track the next mousedown and close the menu if
                // the user clicks somewhere outside of the autocomplete
                var menuElement = self.menu.element[ 0 ];
                if ( !$( event.target ).closest( ".ui-menu-item" ).length ) {
                    setTimeout(function() {
                        $( document ).one( 'mousedown', function( event ) {
                            if ( event.target !== self.element[ 0 ] &&
                                event.target !== menuElement &&
                                !$.ui.contains( menuElement, event.target ) ) {
                                self.close();
                            }
                        });
                    }, 1 );
                }

                // use another timeout to make sure the blur-event-handler on the input was already triggered
                setTimeout(function() {
                    clearTimeout( self.closing );
                }, 13);
            })
            .menu({
                focus: function( event, ui ) {
                    var item = ui.item.data( "item.autocomplete" );
                    if ( false !== self._trigger( "focus", event, { item: item } ) ) {
                        // use value to match what will end up in the input, if it was a key event
                        if ( /^key/.test(event.originalEvent.type) ) {
                            //self.element.val( item.value );       //changed by me, if they use the keys, don't change the text! don't want a textbox with a number in it.

                        }
                    }
                },
                selected: function( event, ui ) {
                    var item = ui.item.data( "item.autocomplete" ),
                        previous = self.previous;

                    // only trigger when focus was lost (click on menu)
                    if ( self.element[0] !== doc.activeElement ) {
                        self.element.focus();
                        self.previous = previous;
                        // #6109 - IE triggers two focus events and the second
                        // is asynchronous, so we need to reset the previous
                        // term synchronously and asynchronously :-(
                        setTimeout(function() {
                            self.previous = previous;
                            self.selectedItem = item;
                        }, 1);
                    }

                    if ( false !== self._trigger( "select", event, { item: item } ) ) {
                        self.element.val( item.value );
                    }
                    // reset the term after the select event
                    // this allows custom select handling to work properly
                    self.term = self.element.val();

                    self.close( event );
                    self.selectedItem = item;
                },
                blur: function( event, ui ) {
                    // don't set the value of the text field if it's already correct
                    // this prevents moving the cursor unnecessarily
                    if ( self.menu.element.is(":visible") &&
                        ( self.element.val() !== self.term ) ) {
                        self.element.val( self.term );
                    }
                }
            })
            .zIndex( this.element.zIndex() + 1 )
            // workaround for jQuery bug #5781 http://dev.jquery.com/ticket/5781
            .css({ top: 0, left: 0 })
            .hide()
            .data( "menu" );
        if ( $.fn.bgiframe ) {
             this.menu.element.bgiframe();
        }
    },

    destroy: function() {
        this.element
            .removeClass( "ui-autocomplete-input" )
            .removeAttr( "autocomplete" )
            .removeAttr( "role" )
            .removeAttr( "aria-autocomplete" )
            .removeAttr( "aria-haspopup" );
        this.menu.element.remove();
        $.Widget.prototype.destroy.call( this );
    },

    _setOption: function( key, value ) {
        $.Widget.prototype._setOption.apply( this, arguments );
        if ( key === "source" ) {
            this._initSource();
        }
        if ( key === "appendTo" ) {
            this.menu.element.appendTo( $( value || "body", this.element[0].ownerDocument )[0] )
        }
        if ( key === "disabled" && value && this.xhr ) {
            this.xhr.abort();
        }
    },

    _initSource: function() {
        var self = this,
            array,
            url;
        if ( $.isArray(this.options.source) ) {
            array = this.options.source;
            this.source = function( request, response ) {
                response( $.ui.autocomplete.filter(array, request.term) );
            };
        } else if ( typeof this.options.source === "string" ) {
            url = this.options.source;
            this.source = function( request, response ) {
                if ( self.xhr ) {
                    //added try catch
                    try{
                        if(self.xhr.abort != null){ 
                            self.xhr.abort();
                        }
                    }
                    catch(err){

                    }

                    delete self.xhr;

                }

                self.xhr = $.ajax({
                    url: url,
                    data: request,
                    dataType: "json",
                    autocompleteRequest: ++requestIndex,
                    success: function( data, status ) {
                        if ( this.autocompleteRequest === requestIndex ) {
                            response( data );
                        }
                    },
                    error: function() {
                        if ( this.autocompleteRequest === requestIndex ) {
                            response( [] );
                        }
                    }
                });
            };
        } else {
            this.source = this.options.source;
        }
    },

    search: function( value, event ) {
        value = value != null ? value : this.element.val();

        // always save the actual value, not the one passed as an argument
        this.term = this.element.val();

        if ( value.length < this.options.minLength ) {
            return this.close( event );
        }

        clearTimeout( this.closing );
        if ( this._trigger( "search", event ) === false ) {
            return;
        }

        return this._search( value );
    },

    _search: function( value ) {
        this.pending++;
        this.element.addClass( "ui-autocomplete-loading" );

        this.source( { term: value }, this.response );
    },

    _response: function( content ) {
        if ( !this.options.disabled && content && content.length ) {
            content = this._normalize( content );
            this._suggest( content );
            this._trigger( "open" );
        } else {
            this.close();
        }
        this.pending--;
        if ( !this.pending ) {
            this.element.removeClass( "ui-autocomplete-loading" );
        }
    },

    close: function( event ) {
        clearTimeout( this.closing );
        if ( this.menu.element.is(":visible") ) {
            this.menu.element.hide();
            this.menu.deactivate();
            this._trigger( "close", event );
        }
    },

    _change: function( event ) {
        if ( this.previous !== this.element.val() ) {
            this._trigger( "change", event, { item: this.selectedItem } );
        }
    },

    _normalize: function( items ) {
        // assume all items have the right format when the first item is complete
        if ( items.length && items[0].label && items[0].value ) {
            return items;
        }
        return $.map( items, function(item) {
            if ( typeof item === "string" ) {
                return {
                    label: item,
                    value: item
                };
            }
            return $.extend({
                label: item.label || item.value,
                value: item.value || item.label
            }, item );
        });
    },

    _suggest: function( items ) {
        var ul = this.menu.element
            .empty()
            .zIndex( this.element.zIndex() + 1 );
        this._renderMenu( ul, items );
        // TODO refresh should check if the active item is still in the dom, removing the need for a manual deactivate
        this.menu.deactivate();
        this.menu.refresh();

        // size and position menu
        ul.show();
        this._resizeMenu();
        ul.position( $.extend({
            of: this.element
        }, this.options.position ));

        if ( this.options.autoFocus ) {
            this.menu.next( new $.Event("mouseover") );
        }
    },

    _resizeMenu: function() {
        var ul = this.menu.element;
        ul.outerWidth( Math.max(
            ul.width( "" ).outerWidth(),
            this.element.outerWidth()
        ) );
    },

    _renderMenu: function( ul, items ) {
        var self = this;
        $.each( items, function( index, item ) {
            self._renderItem( ul, item );
        });
    },

    _renderItem: function( ul, item) {
        return $( "<li></li>" )
            .data( "item.autocomplete", item )
            .append( $( "<a></a>" ).text( item.label ) )
            .appendTo( ul );
    },

    _move: function( direction, event ) {
        if ( !this.menu.element.is(":visible") ) {
            this.search( null, event );
            return;
        }
        if ( this.menu.first() && /^previous/.test(direction) ||
                this.menu.last() && /^next/.test(direction) ) {
            this.element.val( this.term );
            this.menu.deactivate();
            return;
        }
        this.menu[ direction ]( event );
    },

    widget: function() {
        return this.menu.element;
    }
    });

    $.extend( $.ui.autocomplete, {
        escapeRegex: function( value ) {
            return value.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
        },
        filter: function(array, term) {
            var matcher = new RegExp( $.ui.autocomplete.escapeRegex(term), "i" );
            return $.grep( array, function(value) {
                return matcher.test( value.label || value.value || value );
            });
        }
    });

    }( jQuery )); 
```

html 扩展： [https ://github.com/scottgonzalez/jquery-ui-extensions/blob/e34c9457619a13a01774f7954175320ac1e283c1/autocomplete/jquery.ui.autocomplete.html.js](https://github.com/scottgonzalez/jquery-ui-extensions/blob/e34c9457619a13a01774f7954175320ac1e283c1/autocomplete/jquery.ui.autocomplete.html.js)

在这里你可以找到监狱： [https ://github.com/sebarmeli/JAIL](https://github.com/sebarmeli/JAIL)

我尝试通过快速键入、使用鼠标和箭头、单击、按 esc、按 ctrl、tab 等各种方式来打破它。仍然没有打破。

编辑：我增加了 250 代表的赏金！一定有人遇到过这种情况。

编辑：

我刚刚看到这个错误的一个稍微不同的版本，现在来自 IE 9！无法获取属性“guid”的值：对象为空或未定义与“guid”为空或不是对象完全相同的行。

所以，要么处理程序为空，要么 jQuery 为空。我将使用处理程序，因为如果 jQuery 为空，我会有很多其他问题。

所以这意味着，我正在尝试将一个 guid 附加到一个不存在的处理程序上。这怎么可能呢？

编辑：

这是设置自动完成小部件的代码：

```
<div class="watermarkText" >
    <label for="UserLookUp" class="over" id="UserLookUpLable"  ><%= Web.QuickSearchGhostText.HtmlEncode%></label>
    <input type="text" id="UserLookUp" name="UserLookUp" style="width:250px;vertical-align:middle;" />
</div>

<img src="ClearLookUp.jpg" alt="Clear Text" id="ClearLookUp"  />

<script type="text/javascript">

    $(function () {
        $("#UserLookUp").autocomplete({
            source: 'aurl',
            minLength: 2,
            delay: 2,
            autoFocus: true,
            html: true,
            select: function (event, ui) {
                window.location = "a url".replace("0", ui.item.value);
                return false;
            },
            open: function (event, ui) {

                $('img.LookUpControlPicture').jail();
            }
        });

        $('#UserLookUpLable').labelOver('over');

        $('#ClearLookUp').click(function () {
            $('#UserLookUp').val('');
            $('#UserLookUp').autocomplete("search");
            $('#UserLookUp').blur();
        });
    });

</script> 
```

也许它来自 labelOver 插件（我已经改变了很多）。

这是它的代码：

```
jQuery.fn.labelOver = function (overClass) {
    ///<summary> 
    ///    applied to the label(s) to be ghosted over a textbox.  
    //     generally used like so: $('.watermarkText').find('label').labelOver('over'); 
    ///</summary>
    ///<param name="overClass" type="string">the class to apply to the label to style it as ghosted text.</param>
    ///<returns>nothing</returns>

    return this.each(function () {
        var label = jQuery(this);
        var f = label.attr('for');
        if (f) {
            var input = jQuery('#' + f);

            this.hide = function () {
                // label.css({ textIndent: -10000 })
                label.css('visibility', 'hidden');
            }

            this.show = function () {
                if (input.val() == '') label.css('visibility', 'visible');     //{ textIndent: 0 }
            }

            // handlers
            input.focus(this.hide);
            input.blur(this.show);

            //added by me
            input.change(function () {
                if (input.val() == '') {
                    label.css('visibility', 'visible');
                }
                else {
                    label.css('visibility', 'hidden');
                }
            });
            label.addClass(overClass).click(function () { input.focus() });

            if (input.val() != '') this.hide();
        }
    })
} 
```

我没有看到任何明显的东西，但也许我错过了一些东西。

这是我想出的记录错误的方法：

```
try {
    if (!handler.guid) {
          handler.guid = jQuery.guid++;
    }
}
catch (err) {
                var message = "handler.guid = jQuery.guid++ Error! \n";
                message += 'types: ' + types + '\n';
                if (typeof data != 'undefined') {
                    if (typeof data == 'object') {

                        $.each(data, function (i, v) {
                            message += i + ' : ' + v + '\n';
                        });
                    }
                    else {
                        message += 'elem id:' + $(elem).attr('id') + 'elem class: ' + $(elem).attr('class');
                    }
                }
                else {
                    message += 'data is undefined';
                }

                var url = window.location.href;
                var linenumber = 1579;
                v2LogTheErrorToElmah(message, url, linenumber, 0);

   } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T20:13:44.063

问题似乎很可能是不正确的事件处理程序，因为：

```
$('body').click(1); 
```

在 IE 中重现该确切错误。但是，如果不查看所有代码，就无法找到具体错误。

我建议您尝试修改 jQuery 代码（临时）以添加以下行：

```
if (typeof handler != 'function') {alert(handler); alert(type); alert(data); alert(this);} 
```

（如果这些还不够，可能会添加更多警报）。

那应该在里面`jQuery.each(["bind", "one"], function( i, name ) {`，在所有的参数解析之后，但就在行之前`var handler = name === "one" ? jQuery.proxy( fn, function( event ) {`。这对我来说是第 2324 行，但对你来说可能会有所不同。

一旦您添加了该行，您应该能够使用您的站点，并且当您进行错误事件连接时（在错误发生之前），您应该收到一连串警报，（希望）告诉您出了什么问题。

或者，在最坏的情况下，如果您尝试此操作并且找不到任何不良事件连接，至少您可以将其排除为问题的可能原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T22:04:16.573

只是修补你的jQuery版本怎么样：

```
if (!handler.guid) {
  handler.guid = jQuery.guid = (jQuery.guid||0) + 1;
} 
```

该代码是等效的，但与 IE7 更兼容。如果可以的话，我建议先尝试重现该问题。但这应该可以防止它在将来发生。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T20:51:15.810

当我遇到这样的奇怪错误时，快速的可能性和我检查的事情是确保 jQuery 没有被多次包含。

如果您尝试 machineghost 建议的内容（修改 jQuery 源代码）并且您发现它没有记录，或者它在某个点停止记录，这将是一个赠品。或者只是在 Firebug/Chrome 的网络分析器中查看您的 http 请求；）

* * *

一些基本原理：有时这些东西最终会引入依赖关系。例如，如果您附加一个包含`<script src="some_other_jquery"></script>`.

将 jQuery 对象上的全局属性设置为 null 或以其他方式删除是很奇怪的。

下次重现错误时，您需要稍微检查一下 jQuery 对象。检查 jQuery.guid（应该为 null，但请自行确认）。jQuery.fn.jquery 将为您提供 jQuery 库的版本号。

* * *

刚刚浏览了评论，发现你已经检查过了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-11T18:40:14.120

自从我问这个问题已经一年了，我已经放弃了。然后，我不得不为一个新功能加载一些图片，然后 BAM 我在我的开发环境中看到了这种情况！

这是由[jQuery.Jail 插件](https://github.com/sebarmeli/JAIL)引起的，我怀疑但无法证明。我有一个旧版本（0.9.5）。当我升级到 1.0 时，错误消失了。奇怪的是，即使发生错误，插件也表现良好。

我不知道插件中究竟是什么导致了它。那`handler`实际上是 null，not `GUID`，所以这将解决我日志中的很多错误！

只是给其他人的说明，对于未来，如果你使用这个旧版本，你可能也在使用旧版本的 jQuery，所以当你切换到 1.0 版本时，它使用`.on`而不是`.bind`. 所以确保你有一个支持它的 jQuery 版本，或者只是编辑插件并将所有`.on`的`.bind`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-07T19:50:31.653

更新：

*   当然，两者都是运行 IE7 的 XP 并且有 .NET 库可以追溯到很久以前的事实向我表明，它们并不完全是用天然气做饭的。我会尝试使用 XP 和 IE7 进行复制，但也会研究降低测试机器处理速度的工具。在 9 之前的 IE 中以足够慢的速度运行，您可能会遇到某种时间问题，即不应假定已准备好或加载或可用的东西通常在现代浏览器上，但无法在旧浏览器上准备好就像奔腾或386或TRS-80之类的。IE7 和今天的浏览器（甚至是现代浏览器中最慢的 IE9）之间的速度差异是惊人的。如果做不到这一点，则将 RAM 大大减少到我们在 XP 上的 IE7 是新的时代使用的任何东西。

*   哎呀。纳米。我之前在这里写过，UA 字符串中是 Windows NT，但 NT 5.1 确实是 XP。尽管如此，尝试使用类似的设置复制错误以匹配该 UA 可能会有所帮助。另外，我相信很多 MS 的其他应用程序的内置浏览器只是 IE7 拼凑在一起并塞进一个窗格中，所以它可能实际上不是 IE7 浏览器。我不知道如何处理所有这些 .NET 版本。我没有花很多时间分析 UA 字符串，但这似乎很多。

添加的问题：

*   我因为没有早点问而感到愚蠢，但是您是否在 document.ready 之前触发了这些代码？非垃圾浏览器呈现 HTML/CSS 和执行 JS 比 IE 快得多，因此在某个时间点在 IE 中未准备好的 HTML 可能在 Firefox 和 Chrome 中准备好。
*   ui.autocomplete 代码顶部的 source:null 选项有什么意义。我没有看到 options.source 在任何地方设置。
*   您是否验证了围绕您怀疑导致问题的内容的 HTML 没有损坏？较旧的 IE 不能像 Chrome 和 Firefox 那样处理 HTML 损坏。
*   你见过这个错误发生吗？我假设根据您所说的内容向您的后端报告错误正在发生。

我会查看 elem var 来尝试通过对 jquery 代码的以下修改来确定确切的上下文：

```
try{
  if (!handler.guid) {
        handler.guid = jQuery.guid++;
  }
} catch(e){
    var alertMsg = [];
    alertMsg.push('GUID FAIL');
    if(elem.id) { alertMsg.push('ID: ' + elem.id); }
    if(elem.className) { alertMsg.push('CLASS: ' + elem.id); }
    if(!elem.id && !elem.className){
        alertMsg.push('CONSTRUCTOR: ' + elem.constructor.toString().match(/^[^(]*/));
    }
    alert(alertMsg.join('\n'));
} 
```

如果这可以帮助您找出问题的确切来源，那么我会检查您传递给作为来源的 JQ 方法的参数。

# mongodb - mongoDB 的 findAndModify 是“事务保存”吗

> ID：11331227
> 
> 赞同：1
> 
> 时间：2012-07-04T14:40:45.983
> 
> 标签：mongodb, transactions, findandmodify

我知道，mongo DB 上没有事务支持。但现在我需要读取一个文档的值，递增 1 并写入新值。

或者 - 不同的方式：更新元素并同时读取值。为此，我喜欢使用查找和修改：[http ://www.mongodb.org/display/DOCS/findAndModify+Command](http://www.mongodb.org/display/DOCS/findAndModify+Command)

此命令更新文档并返回更新前的值。这是否发生在（相同的）交易中？关键是：另一个会话是否有可能在另一个会话的两个步骤之间更新相同的值？

（对不起，对我来说这很难解释——我希望你明白我想说什么）

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T15:15:05.857

`findAndModify`命令是原子的。`find`这意味着在和`modify`部件之间不能发生其他操作。该命令是专门为增加计数器/设置标志并同时读取它们而制定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-12T08:16:56.100

我仍然怀疑原子性。

在此处的“Upsert 和唯一索引¶”部分[http://docs.mongodb.org/manual/reference/command/findAndModify/](http://docs.mongodb.org/manual/reference/command/findAndModify/)

写的是多个客户端可以同时进行查询操作，然后再进行更新操作。

> 当 findAndModify 命令包含 upsert: true 选项并且查询字段没有唯一索引时，该命令可能会在某些情况下多次插入文档。
> 
> 如果所有命令在任何命令开始修改阶段之前完成查询阶段，并且在名称字段上没有唯一索引，则这些命令可能每个都执行更新插入，创建多个重复文档。

如果它是原子的，那么它应该暂时假设一个读写锁，从而防止其他连接执行“查询阶段”。

是只有 upsert 标志的情况吗？由于它创建了一个新文档，因此当找到文档匹配并且在这种情况下它本质上表现为原子时，可能会没问题。有人可以澄清一下吗？

# .net - CQRS 跟踪用户变化

> ID：11331243
> 
> 赞同：0
> 
> 时间：2012-07-04T14:41:40.837
> 
> 标签：.net, design-patterns, cqrs

我们目前正在研究构建（Web）应用程序的新方法，想到的一种方法是 CQRS。我们对此仍有几个疑问：

如果我理解正确，这可能意味着拥有 2 个或更多域模型、一个核心域模型和一个用于 webapp 的读取模型。

这个核心域模型不是由 webapp 直接写入，而是由不同的服务写入。我们正在考虑使用 NServiceBus 来制作发布者/处理程序，以便 webapp 可以发布用户所做的更改。然后订阅者将处理消息并更新核心域模型和读取模型。

**我们想要达到的目标：**

用户 A 创建 10 个新对象，例如书籍。

消息订阅者有很多消息要处理，因此在更新域模型之前需要几分钟。

当用户 A 刷新页面时，他应该会看到他刚刚创建的 10 本书。

当用户 B 刷新页面时，他实际上并不需要查看这些项目。

*这 10 个新对象最好存放在哪里？*

*将此数据与读取模型中的“旧”数据合并的最佳方法是什么？*

假设用户 B 也确实需要查看这些新项目，*那么存储这些数据的最佳方式是什么？*

*处理 2 个不同用户同时添加同一本书的最佳方法是什么？* （所有数据都是一样的，除了书的描述。它仍然是同一本书:)

*您可以通过什么方式处理对这 10 个尚未写入核心域模型并因此没有唯一 ID 的对象之一的更新？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:58:50.253

**在我看来**，CQRS 有很多不同的方面需要考虑。我从中得出的核心观点是用户操作（命令 -> 写入模型）和显示信息（查询 <- 读取模型）的分离。然后，我可以根据应用程序的要求，适当地挑选自然适合这种分离的其余架构模式。请记住，CQRS 并不意味着作为顶级架构，您应该从中挑选并仅在适当时使用。

从您的问题中，我觉得您的研究还没有走得太远，所以我推荐以下内容；[初始 CQRS 文档](http://cqrs.wordpress.com/documents/)、[Rinat Abdullin 的博客](http://abdullin.com/journal/2010/11/3/cqrs-architecture-and-definitions.html)、[Jonathan Olivers 博客（阅读旧的东西）](http://blog.jonathanoliver.com/archives/)和[Rinat 的 CQRS 指南（虽然我还没有通读这个站点）](http://cqrsguide.com/)。

我保证通读[CQRS 文档后](http://cqrs.wordpress.com/documents/)，您将能够自己回答您的问题。

也许如果您告诉我们您希望使用的模式/技术，我可以提供更完整的答案。但是要开始您的第一个问题，它非常简单：

> 这 10 个新对象最好存放在哪里？

答案是从逻辑上讲，您将*部分*数据存储在写入和读取模型中；物理上，这可以存储在相同的数据存储中，也可以存储在不同的数据存储中，具体取决于您选择的技术和实现（例如 sql-server 数据库与 key-value no-sql 解决方案）。

例如，如果您选择使用*事件溯源*，那么您将在事件发生时存储在写入模型中。您的读取模型将存储非规范化、精心制作的数据，以便您的屏幕可以由您的读取模型的这些数据组成。但这与我所看到的模式保持一致。您的读取模型可以只存储使用查询服务规范化的数据，对实际数据库执行实际的 sql 查询。

**编辑以下评论**

我目前正在使用的系统不使用消息传递，尽管它使用事件。一切都**在进行中**。所以命令被处理；事件在同一个工作单元内被提出和处理。基本上，在适当的事件处理程序全部完成之前，命令处理程序不会完成。

当读取模型有更密集/复杂的更新时，我们仍在考虑**进程外**事件处理程序。但在这个阶段，不需要它，它使事情变得简单。

整个最终一致性方面只是模式附带的东西。对于“其他”用户来说，这永远不会成为问题，但对于刚刚提交然后刷新页面的用户来说，我可以看到这令人困惑，因为他们看不到他们刚刚提交的更新。就我个人而言，我不喜欢伪造更新的想法，因为这就像加倍努力。相反，我更喜欢重定向到确认页面的选项，从而为您的应用程序提供更多时间来处理消息。

我个人想进一步探索的是跟踪提交的命令和相关的进程外事件处理程序。刷新有消息尚未完成的页面的用户可能会收到不完整消息的通知。一旦消息完成处理，可以将通知“推送”到客户端。我会让这些通知变得微妙，以免分散用户的注意力或变得烦人。

# unix - 在 Unix 中，我如何注册才能知道进程何时启动？

> ID：11331244
> 
> 赞同：0
> 
> 时间：2012-07-04T14:41:41.520
> 
> 标签：unix, process, exec, fork

假设我想要一个后台进程，每次启动或退出进程时都会写入文件。任何过程（尽管我最感兴趣的是那些带有图形组件的过程）。

我宁愿不经常轮询正在运行的进程列表。我的问题是我必须用我自己的副本替换 exec 或 fork，但我不确定这是如何完成的。或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:30:46.863

我不清楚您到底想要什么，但这听起来像是用户会计或运行审计。问题是这些是特定于 UNIX 风格的。请告诉我们您有什么操作系统。

您想为所有用户提供此信息吗？一组？

某些 UNIX 风格允许您监控文件系统活动（如 Linux inotify），因此如果您提前知道用户将运行哪些代码，您可以尝试监控特定文件以执行。这可能比实施审计或某种会计更容易。我们需要更多细节才能真正提供帮助。

# sql - 如果传递空值，则返回所有行

> ID：11331250
> 
> 赞同：3
> 
> 时间：2012-07-04T14:42:00.577
> 
> 标签：sql, oracle

我有一个这样的查询：

```
select empno,name
from emp
where job = 'CLERK'
and empno = :empno 
```

如果我传递的 empno 为 null，我想显示所有符合 job = 'CLERK' 条件的记录。如果 empno 是一个特定的数字，那么它应该过滤工作和 empno。

无论如何在不使用 PLSQL 的情况下在 SQL 中执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T14:43:45.393

```
and (empno = :empno or :empno is null) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T14:44:06.337

如果传递参数为空，则类似这样的东西，而不是用实际的列值替换它......

```
select empno,name from emp where 
job = 'CLERK' 
and empno = NVL(:empno ,empno) 
```

**NVL 的工作原理**

NVL 函数的语法是：

```
NVL( string1, replace_with )

string1 is the string to test for a null value.

replace_with is the value returned if string1 is null. 
```

# mono - 为专有 ARM 设备交叉编译单声道

> ID：11331251
> 
> 赞同：4
> 
> 时间：2012-07-04T14:42:03.630
> 
> 标签：mono, embedded, scratchbox

目前在工作中，我们正在为一些 arm-elf little endian 设备开发软件。我们目前正在使用纯 C 语言执行此操作，这很痛苦。对我们来说幸运的是，创建设备的公司提供了 c++ 支持，不幸的是同一家公司搞砸了 c++ 库，所以项目在编译的链接器阶段失败了，耶！

所以最近我一直在寻找替代品，最有趣的替代品是单声道。我可以看到为 arm 编译 mono 主要是在暂存箱中完成的，这似乎是一个不错的选择。但我也可以看到我需要设置类似于我的设备的 rootfs……但是，我无法找出我设备上的 rootfs 是什么，因为我无法以任何方式连接到它。这是否会导致无法使用 Scratchbox 编译单声道？如果是这样，还有其他方法可以编译单声道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:15:35.547

您可以使用通常的配置支持进行交叉编译，如下所示：

CC=arm-linux-yourabi-gcc CFLAGS="-march=armv7-a -mfloat-abi=softfp" -DARM_FPU_VFP=1 ./configure --host=arm-linux-yourabi --disable-mcs-build

当然，您需要针对您的设备 ABI 和浮点支持进行调整。--disable-mcs-build 是必需的，因为您无法在系统上运行交叉编译的单声道：您可以在开发盒上的单独树中构建类库和 C# 代码，然后将它们复制到目标。

此外，与 IanNorton 在评论中所写的相反，单声道运行时是用 C 编写的（在 C++ 中只有一个非常小的与 llvm 的绑定，这不是必需的，在默认构建中不是，而且绝对对您的设置没有用处）。

# opengl-es - 尝试绑定纹理时出现 GL_INVALID_OPERATION

> ID：11331252
> 
> 赞同：0
> 
> 时间：2012-07-04T14:42:04.347
> 
> 标签：opengl-es, opengl-es-2.0

在我的引擎中有多个纹理后，我遇到了一个问题。

我的渲染代码目前如下所示：

```
void Renderer::render() {
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    checkGlError("glClear");

    for (vector<Node*>::const_iterator it = renderArray_.begin(); it != renderArray_.end();
            it++) {
        Node* node = *it;
        EntityModel* entity =
                static_cast<EntityModel*>(resourceManager_->getResource(
                        (*it)->getEntity()));
        if (entity == 0 || entity->getVertices() == 0 || entity->getVertices()->size() == 0) {
            LOGI("Empty entity %s.", node->getName().c_str());
            continue;
        }
        Resource* resource = resourceManager_->getResource(node->getShader());
        Shader* shader = static_cast<Shader*>(resource);
        Resource* resource2 = resourceManager_->getResource(entity->getTexture());
        Image* image = static_cast<Image*>(resource2);
        mat4 proj;
        Matrix::projection3D(proj, 45.0f,
                (float) nScreenWidth_ / nScreenHeight_, 0.1f, 100.0f);
        mat4 res;
        Matrix::multiply(proj, node->getMatrix(), res);

        // Select shader program to use.
        glUseProgram(shader->getId());
        checkGlError("glUseProgram");

        int matrix = glGetUniformLocation(shader->getId(), "uWVP");
        int texture = glGetUniformLocation(shader->getId(), "texture_0");
        checkGlError("glGetUniformLocation");
        int textureCoords = glGetAttribLocation(shader->getId(), "attrTexCoords");
        int vertices = glGetAttribLocation(shader->getId(), "attrPos");
        checkGlError("glGetAttribLocation");

        // Load vertex positions.
        glUniformMatrix4fv(matrix, 1, false, res);
        glVertexAttribPointer(vertices, 3, GL_FLOAT, GL_FALSE, 0,
                &(*entity->getVertices())[0]);
        glEnableVertexAttribArray(vertices);
        checkGlError("Loading vertex positions");

        glVertexAttribPointer(textureCoords, 2, GL_FLOAT, GL_FALSE, 0,
                &(*entity->getTextureCoords())[0]);
        checkGlError("glVertexAttribPointer");
        glEnableVertexAttribArray(textureCoords);
        checkGlError("glEnableVertexAttribArray");

        // Bind the texture.
        glActiveTexture(GL_TEXTURE0);
        checkGlError("glActiveTexture");
        glBindTexture(GL_TEXTURE_2D, image->getId());
        checkGlError("glBindTexture");
        glUniform1i(image->getId(), 0); <====================ERROR HERE!!!
        checkGlError("glUniform1i");

        glDrawArrays(GL_TRIANGLES, 0, entity->getVertices()->size() / 3);
        checkGlError("glDrawArrays");
    }
} 
```

我的纹理加载代码：

```
void Image::compile() {
    glGenTextures(1, &id_);
    glBindTexture(GL_TEXTURE_2D, id_);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width_, height_, 0, GL_RGBA,
            GL_UNSIGNED_BYTE, (GLvoid*) image_);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
} 
```

如果我只加载一个纹理，一切正常。我有五个对象使用相同的纹理为每个对象重复渲染方法的内容，并且一切似乎都运行良好。但是，正如我添加具有不同纹理的第六个对象一样，该对象没有被渲染，并且我不断在 glUniform1i 函数上获得 GL_INVALID_OPERATION。我还检查了[http://www.opengl.org/sdk/docs/man/xhtml/glUniform.xml](http://www.opengl.org/sdk/docs/man/xhtml/glUniform.xml)的原因，为什么它不起作用，但似乎没有找到。

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T14:56:33.640

这段代码

```
glUniform1i(image->getId(), 0); 
```

反正是错的。您不将纹理 ID 绑定到采样器，而是绑定到纹理单元。同样，uniform 的第一个参数是位置 ID，它也不是纹理 ID。正确的代码看起来更像

```
glActiveTexture(GL_TEXTURE0 + active_textue);

/* ... */

glUniform1i(glGetUniformLocation(program, "samplername"), active_texture); 
```

或者如果您在着色器中使用预定义的位置

```
glUniform1i(texture_sample_location, active_texture); 
```

**编辑：** D'oh，我这边的错误。制服当然会偏移到 GL_TEXTURE0 标记。

# amazon-ec2 - Amazon Elastic Beanstalk 在创建新环境时创建服务器实例

> ID：11331254
> 
> 赞同：0
> 
> 时间：2012-07-04T14:42:19.183
> 
> 标签：amazon-ec2, amazon-elastic-beanstalk

我是亚马逊的初学者。最近，我在 Amazon Elastic Beanstalk 服务上上传了我的四个不同的 Web 应用程序和 Web 服务。

我的问题是：当我在 Elastic Beanstalk 上使用 AWS .NET 工具包发布我的 Web 应用程序时，它会为每个应用程序创建一个新环境，并为每个环境创建一个新的 EC2 实例。

谁能告诉我，这是 Amazon Windows Server 实例的 EC2 实例吗？我们不能在同一个环境和同一个 EC2 实例中部署多个 Web 应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T15:04:06.657

我们使用Java SDK，行为是一样的。我认为这是 AWS EB 中的自然方式：一个应用程序 => 一个服务器。我认为主要原因是 AWS EB 是负载均衡器、警报等的完整堆栈，特别是自动扩展策略。由于 EB 提供完全托管的 Auto Scaling 功能，因此基于具有多个应用程序的服务器向堆栈添加更多服务器是没有意义的：假设您有一个应用程序消耗 80% 的 CPU/入站流量/内存...)，而另一个消耗 10%。两者都在同一台服务器上运行......如果它有足够的空间来增长只有一个实例，为什么要扩展第二个？

# javascript - 从 ajax 驱动的网站检索呈现的 html

> ID：11331255
> 
> 赞同：1
> 
> 时间：2012-07-04T14:42:22.627
> 
> 标签：javascript, python, html, http, parsing

我正在尝试在 python 中编写一个脚本，允许我向网页发送一个 get 请求（使用 python requests 模块），然后使用模块 beautiful soup 解析响应。

我遇到的问题是我试图获取的表在初始 DOM 加载后通过 javascript 加载/创建，因此对我的获取请求的响应不包含它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:49:52.640

您可以做两件事，这取决于您的问题。

**1.直接获取表**
如果你真的想获取表，检查发出什么请求来获取表。例如，您可以使用 Firebug 或 Chrome 开发人员工具来获取请求的正确结构。

**2\. Javascript很重要**
如果支持很多网站更重要，并且javascript发挥一些作用很重要，您可以使用[Selenium](http://seleniumhq.org/)之类的东西来使用执行Javascript的Brwoser，您可以在表格后获取源代码加载。

* * *

**更新**- 基于您评论中的 URL
您可以`Network`在 Chrome 开发人员工具的选项卡上看到，它为此请求加载了很长时间：

[http://www.ticketmaster.com/json/browse/music?select=n93](http://www.ticketmaster.com/json/browse/music?select=n93)

因此，我们假设这会加载您的数据。在浏览器中打开 URL，您会看到表中的数据是[JSON 格式](http://en.wikipedia.org/wiki/JSON)的。如果您只想解析/获取此表并且对于很多页面没有通用性，我将使用这种方法获取数据。

**更新**
尝试使用过滤器或日期范围更改表格。您可以检查 API 的工作方式并以您想要的方式发出请求。

*未来 7 天内*的*舞蹈/电子*过滤器： *`/json/browse/music?g=Dance%2FElectronic&select=n7`*

 *还有另一个 API 调用：
[http ://www.ticketmaster.com/json/browse/music/histogram?select=n7](http://www.ticketmaster.com/json/browse/music/histogram?select=n7)

但我不能告诉你它是干什么用的。但我认为你现在有一个很好的方向和比我更多的时间来理解它是如何工作的；）

* * *

**工具**
我用来查找 URL 的工具是带有选项卡的内置[Chrome 开发者工具](https://developers.google.com/chrome-developer-tools/docs/overview)`Network`。激活该工具，刷新页面并修改请求以了解发生了什么。

It's also very easy to parse JSON with python: [http://docs.python.org/library/json.html](http://docs.python.org/library/json.html)*

# jquery - 如何在同一页面上使用 jquery 自动完成两次

> ID：11331257
> 
> 赞同：0
> 
> 时间：2012-07-04T14:42:28.643
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-autocomplete

我的问题是我应该在同一页面中使用 jquery 自动完成库两次。

当我静态插入第一个文本字段时，自动完成工作正常。但是如果我想插入第二个文本字段，自动完成结果会显示在第一个文本字段发生的位置。

两个文本字段具有不同的名称和 ID，但是当我在文本字段 2 中键入字符时，自动完成结果显示在文本字段 1 下方。我的自动完成功能有什么问题？

```
 var aramaKeyword = jQuery.trim($("#input_header_scroll_ara_keyword").val());
            $('#input_header_scroll_ara_keyword').val(aramaKeyword);

            $(function() {
                $("#input_header_scroll_ara_keyword").autocomplete({
                    source: function(request, response) {
                        $.ajax({
                            url: baseUrl + "<?php echo URL_ARAMA_AUTOCOMPLETE; ?>",
                            dataType: "json",
                            async: false,
                            data: {
                                q: jQuery.trim($("#input_header_scroll_ara_keyword").val())
                            },
                            success: function(data) {
                                response( $.map( data, function( item ) {
                                    return {
                                        label: item,
                                        value: item
                                    }
                                }));                    
                            }
                        });
                    },
                    select: function(event, ui) {
                        var keyword = ui.item.value;
                        locateAraQuery('<?php echo URL_ARAMA; ?>', '<?php echo DEFAULT_STR_ARAMAQUERY_KEYWORD; ?>', '<?php echo lang('title_aradefaultkeyword'); ?>', keyword, '<?php echo ARAMA_SUFFIEX_BAR; ?>'); 
                    },

                    focus: function(event, ui) {
                        var keyword = ui.item.value;
                        $("#input_header_scroll_ara_keyword").val(keyword);             
                    },
                    minLength: 2,
                });
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:10:01.410

好的，我找到了解决方案。

```
appendTo: $("#input_header_scroll_ara_keyword").parent() 
```

为我工作。

# php - 从喜欢和评论中结合 Facebook 好友数组

> ID：11331260
> 
> 赞同：0
> 
> 时间：2012-07-04T14:42:39.687
> 
> 标签：php, facebook, facebook-graph-api

我正在使用以下代码查看 Facebook 用户的状态，并对所有喜欢或评论状态的朋友进行排序。然后我将所有这些朋友添加到我的数据库中。我遇到的问题只是将两个 foreach 循环结合起来。我尝试了 array_combine 但这不起作用，因为我仍然有很多重复的 Facebook 用户，他们要么多次评论状态，要么评论并喜欢状态。

非常感谢任何帮助。（此答案中使用的代码：[Facebook Graph API - Finding a users top friends](https://stackoverflow.com/questions/7020910/facebook-graph-api-finding-a-users-top-friends)）

```
 $statuses = $facebook->api('/me/statuses');
    $user_info = $facebook->api('/me');
    $facebook_id = $user_info['id'];
    foreach($statuses['data'] as $status){
    // processing likes array for calculating fanbase.  

    foreach(($status['likes']['data']) as $likesData){
    $frid = $likesData['id']; 
    $frname = $likesData['name']; 
    $friendArray[$frid] = $frname;
    if($frid!=$facebook_id){
    echo $frid .' ';
    echo $frname .' ';}}

    foreach($status['comments']['data'] as $comArray){
    // processing comments array for calculating fanbase
    $frid = $comArray['from']['id'];
    $frname = $comArray['from']['name'];
    if($frid!=$facebook_id){
    echo $frid .' ';
    echo $frname .' ';}}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:50:14.060

有一个数组，您可以添加所有已评论或喜欢状态的 id:s。在将其添加到数组之前，请检查它是否不存在。

```
if(!in_array($id, $user_ids_that_liked_or_commented))
{
    $user_ids_that_liked_or_commented[] = $id;
} 
```

在您浏览完所有喜欢和评论后，将所有值从那里添加到数据库中。

# c# - Ajax 请求 WCF 数据（JSON 格式），但出现错误并显示成功消息

> ID：11331263
> 
> 赞同：3
> 
> 时间：2012-07-04T14:43:12.627
> 
> 标签：c#, javascript, ajax, json, web-services

我一直在尝试用这个[答案解决我的问题](https://stackoverflow.com/questions/3078397/returning-raw-json-string-in-wcf)解决我的问题，但我没有运气。

总的来说，我创建了一个 WCF 项目，其中包含许多我想通过 AJAX 访问的功能（通过我的 html 页面中的 javascript）。

这是我的 Web 服务中的一个函数示例：
**iService**

```
[OperationContract]
[WebInvoke(ResponseFormat = WebMessageFormat.Json)]
string GetStuff(); 
```

**服务**

```
 public string GetStuff()
    {
        string url = string.Format("http://myapi.co.uk/api/mystuff");

        WebRequest myReq = WebRequest.Create(url);

        // Where USERNAME and PASSWORD are constants
        string usernamePassword = USERNAME + ":" + PASSWORD;
        CredentialCache mycache = new CredentialCache();
        mycache.Add(new Uri(url), "Basic", new NetworkCredential(USERNAME, PASSWORD));
        myReq.Credentials = mycache;
        myReq.Headers.Add("Authorization", "Basic " + Convert.ToBase64String(new ASCIIEncoding().GetBytes(usernamePassword)));

        WebResponse wr = myReq.GetResponse();
        Stream receiveStream = wr.GetResponseStream();

        StreamReader reader = new StreamReader(receiveStream, Encoding.UTF8);
        string content = reader.ReadToEnd();

        return content;
    } 
```

*请注意，我也尝试过退回`Stream`直接返回。*

转到我的 javascript 和 ajax ！

```
function getData()
{
  jQuery.support.cors = true;

  $.ajax({
      type: "GET",
      url: "http://localhost:15574/Service1.svc/GetStuff",
      contentType: "application/json; charset=utf-8",
      dataType: "jsonp",
      success: function(result) {
         alert(result);
      },
      error: function(msg) {
        alert("Fail: " + msg.status + ":" + msg.statusText);
      }
   });
} 
```

我点击了错误部分，但奇怪的是成功错误消息......

![错误信息](../Images/1786fabc3c32b524e46a23fb47cd448c.png)

我最初认为这个问题是因为来自外部 API 的 JSON 格式不正确，但我尝试更改我的 Web 服务以返回一些完全有效的 JSON，并显示了相同的错误。就像我也提到的那样，我尝试更改我的网络服务以返回 Stream，但我没有运气。

对此的任何帮助将不胜感激，我将不胜感激。

**更新**

PS 它似乎在 WCF 测试客户端中工作正常，返回一个符合我期望的字符串。
PPS 刚刚在错误函数中添加了另一个参数以获取其状态，我正在获取`parsererror` PPPS 传递给错误的第三个参数是`jquery171014696656613195724_1341477967656 was not called`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:48:54.870

只是一个快速的猜测：您正在使用`WebInvokeAttribute`但尝试使用 HTTP GET 调用服务操作。`Method`属性的默认值`WebInvokeAttribute`是`POST`( [MSDN](http://msdn.microsoft.com/en-us/library/system.servicemodel.web.webinvokeattribute.method.aspx) )。尝试切换到`WebGetAttribute`：

```
[OperationContract]
[WebGet(ResponseFormat = WebMessageFormat.Json)]
string GetStuff(); 
```

或者，您可以将 的`Method`属性设置`WebInvokeAttribute`为`GET`。

**更新**

正如@Cheeso 提到的，你得到的“解析错误”是由于 JavaScript 引擎无法解释你返回的数据，因为它只是一个普通的 JSON，它本身不是一个有效的表达式（想象你把它在`<script></script>`标签内。这显然是行不通的，这正是浏览器试图做的）。

您需要尊重`callback`参数并包装您的响应，使其成为名称通过参数传递的函数的`callback`参数：

```
// If the ASP.NET compatibility was enabled, you could safely use HttpContext.Current
// It's here just to demonstrate the idea
return string.Format("{0}({1});", HttpContext.Current.Request.QueryString["callback"], content); 
```

或者，在进行 AJAX 调用时将“dataType”设置为“json”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:57:24.690

你有`dataType : 'jsonp'`你的jQuery代码。这告诉 jQuery 将 a 附加`callback=XXXX`到 URL。

此对话的服务器端需要将 JSON 结果包装在该回调中。但是您的代码没有这样做。

你确定要jsonp吗？

您也许可以通过使用来解决此问题`dataType: 'json'`

# maven - Maven：使用已弃用的类/方法进行报告

> ID：11331270
> 
> 赞同：8
> 
> 时间：2012-07-04T14:43:27.280
> 
> 标签：maven, deprecated

我想知道是否有任何关于 maven 的报告向我展示了我正在使用的已弃用的类和方法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-04T14:50:34.917

通常您会在 IDE 中看到弃用警告，但您也可以将[showDeprecation](http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#showDeprecation)参数添加到 Maven 编译器插件部分。然后这些警告将显示在日志中。

```
<plugin>
     <groupId>org.apache.maven.plugins</groupId>
     <artifactId>maven-compiler-plugin</artifactId>
     <version>3.1</version>
     <configuration>
         <showDeprecation>true</showDeprecation>
     </configuration>
 </plugin> 
```

然后，您可以使用 CI 服务器上的报告插件从该 javac 输出生成构建报告。例如 Jenkins[警告插件](https://wiki.jenkins-ci.org/display/JENKINS/Warnings+Plugin)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T17:43:49.037

Sonar 包括一个名为 squid 的引擎，根据我发现的[一篇文章](http://www.sonarsource.org/detect-dead-code-and-calls-to-deprecated-methods-with-sonar-squid/)，它可以定位并报告已弃用方法的使用情况。我还没有使用 Sonar（它在我的学习清单上），但我的队友非常喜欢它。

# actionscript-3 - FLEX - 纸张布局

> ID：11331276
> 
> 赞同：0
> 
> 时间：2012-07-04T14:43:48.173
> 
> 标签：actionscript-3, flash, apache-flex, layout, text

如何让`RichEditableText`控件在页面中显示文本。就像在 Microsoft Word 中一样，它应该具有由页面大小设置确定的可视分页符，以便我可以切换到 A4、US Letter 大小等，并且文本将相应地流入垂直矩形（页面）。

![在此处输入图像描述](../Images/be08dac8c3eef76e68d77e327a962a06.png)

实际上，我觉得我应该使用**Text Layout Framework 。**`TextFlow`但是为了得到这篇论文的布局，起点是什么，我应该关注什么。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:15:14.033

您不能使用默认`RichEditableText`组件来执行此操作，但这里有一个小片段可以帮助您入门：

```
<s:VGroup gap="20">
    <mx:UIComponent id="page1" width="50" height="50" />
    <mx:UIComponent id="page2" width="50" height="50" />
</s:VGroup> 
```

用您的 A4 或其他尺寸替换尺寸。如果您希望页数是动态的，则必须使用 a`DataGroup`代替。

现在我们创建一个`TextFlow`对象，为每页分配一个[ContainerController](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flashx/textLayout/container/ContainerController.html)，然后让它在我们的页面上布置文本：

```
var tlf:TextFlow = TextFlowUtil.importFromString(
    "Some very long text that spans many pages goes in here."
);
for each (var page:Sprite in [page1, page2]) {
    var c:ContainerController = new ContainerController(
        page, page.width, page.height
    );
    tlf.flowComposer.addController(c);
}
tlf.flowComposer.updateAllControllers(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:56:30.180

如果你会掌握[文本布局框架](http://sourceforge.net/projects/tlf.adobe/files/3.0/current/textLayout_build.zip/download)，你甚至可以做这样的[事情](http://switch.dl.sourceforge.net/project/tlf.adobe/3.0/current/Flow.swf)。

[这里](http://sourceforge.net/projects/tlf.adobe/files/3.0/current/samples.zip/download)有许多使用 TLF 的示例，其中包括分页。这是我认为最好的起点。

# javascript - 克隆后 Jquery 切换将不起作用

> ID：11331277
> 
> 赞同：0
> 
> 时间：2012-07-04T14:43:57.910
> 
> 标签：javascript, jquery

我在 Jquery 中使用 .clone 克隆了一个列表项：

```
 $("#coll-selected-list li:contains(" + itemName + ")").clone().addClass("avgli").appendTo("#coll-grouped-list"); 
```

但是，当我希望切换新添加的列表项时，由于某种原因它不起作用。有任何想法吗？：

```
$(document).ready(function () {
    $(".avgli").toggle(function () {
        if ($(this).parent().hasClass('agg-drop')) {
            $(this).css("background", "#fff");
        }
    }, function () {
        if ($(this).parent().hasClass('agg-drop')) {
            $(this).css("background", "#676767");
        }
    }););

<ul id="coll-grouped-list" class="agg-drop">
       <li class="sortedli avgli" style="">Blah Blah</li>
       <li class="sortedli avgli" style="">Blah</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:46:46.347

尝试`clone(true)`改用。请参阅[**克隆**](http://api.jquery.com/clone/)文档。

`toggle`函数将事件侦听器添加到元素，您也需要克隆这些侦听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:00:46.617

现场示例：http: [//jsfiddle.net/K2uke/](http://jsfiddle.net/K2uke/)

而且我已经稍微改变了你的脚本，这样就不需要双击来切换效果了。

通过添加`.clone(true)`将克隆元素和事件。

> .clone( **[withDataAndEvents]** )
> 
> **withDataAndEvents 一个**布尔值，指示是否应将事件处理程序与元素一起复制。

参考：[http ://api.jquery.com/clone/](http://api.jquery.com/clone/)

# jquery - 带下拉菜单的 MVC3 条件 Jquery 验证

> ID：11331278
> 
> 赞同：0
> 
> 时间：2012-07-04T14:43:58.907
> 
> 标签：jquery, asp.net-mvc-3, jquery-validate

我一直在尝试进行一些 jquery 验证，其中仅在选中复选框时才验证文本字段或下拉列表。

这是我所拥有的：

```
@using (Ajax.BeginForm("SomeAction", "SomeController", new { id = Model.Id }, new AjaxOptions { HttpMethod = "Post", UpdateTargetId = "somePanel", InsertionMode = InsertionMode.Replace }, new { @id = "testForm" }))
{
 @Html.DropDownListFor(x => Model.SelectedValue, Model.YesNoList, " ", new { @id ="drpYesNo" })
 @Html.TextAreaFor(x => x.CriminalText, new { @id = "txtSomeField" })

<input type="submit" value="Save" />
} 
```

在javascript中我有这个：

```
<script type="text/javascript">
    jQuery.validator.messages.required = "";
    $("#testForm").validate(
    {
        rules: {
            txtSomeField: {
                required: function (element) {
                    return $("input:checkbox[name='drpYesNo']:checked").val() == 'Yes';
                }
            }
        }

    });

    $("#testForm").on("submit", function () {
        if (!$(this).valid()) {
            return false;
        }
    });
</script> 
```

我正在关注一些在线的示例，但似乎无法正常工作。任何帮助深表感谢。七月四日快乐！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:12:07.923

当您定义一个 jquery 验证器规则时，您应该使用**名称**而不是您为其定义规则的元素的**id 。**因此，在您的情况下，您的名称`<textarea>`是`CriminalText`而不是`txtSomeField`（显然，如果这是在编辑器模板中，则名称可能不同，例如`Foo.Bar[3].CriminalText`）。

所以第一步是使用正确的名称：

```
rules: {
    CriminalText: {
        required: function (element) {
            ...
        }
    }
} 
```

现在让我们看看第二步。在您的选择器中，您使用了一些`:checkbox`我在您的 DOM 中任何地方都看不到的东西。我所能看到的（至少在你在这里展示的）是一个 DropDownList 和一个 textarea。因此，如果您希望`<textarea>`仅当用户选择列表中的值时才需要，以下是`Yes`定义`<select>`规则的方法：

```
rules: {
    CriminalText: {
        required: function (element) {
            return $('#drpYesNo').val() == 'Yes';
        }
    }
} 
```

这显然假设您选择了以下选项：

```
<select>
    <option value="Yes">Yes, of course</option>
    ...
</select> 
```

最后一点：确保您没有将`jquery.validate.unobtrusive.js`脚本包含到您的页面中，因为它将使用 Microsoft 的不显眼的库来自动编写 jQuery.validate 规则，该规则基于助手生成的 HTML5 data-* 属性，从而完全搞砸了您的自定义规则设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:52:04.500

这里的选择器是问题所在，使用`input:checkbox`is 用于复选框。通常，jquery 更喜欢 css 类名或 id。

```
required: function (element) {
  return $("#drpYesNo").val() === 'Yes';
} 
```

# windows-phone-7 - 什么是 Windows 8 Metro 风格类等效于 Windows Phone 7 DeviceStatus 类？

> ID：11331281
> 
> 赞同：3
> 
> 时间：2012-07-04T14:44:07.403
> 
> 标签：windows-phone-7, windows-8, migration, microsoft-metro

我正在将应用程序从 Windows Phone 7 迁移到 Windows 8 Metro Style。在 Windows Phone 7 上，我使用 DeviceStatus 类来获取一些内存值：

*   DeviceStatus.ApplicationMemoryUsageLimit
*   DeviceStatus.ApplicationCurrentMemoryUsage
*   DeviceStatus.ApplicationPeakMemoryUsage
*   DeviceStatus.DeviceTotalMemory

但是 W8 Metro 不存在此类。然后，¿我怎样才能得到这个信息？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:49:13.657

显然，您无法检索那些参考这些主题中所说的信息

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/2011976e-6467-4dfb-af68-8d9c6239d2ac](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/2011976e-6467-4dfb-af68-8d9c6239d2ac)

以及为什么不可能

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/1ee76846-b419-46b1-9623-50a09306f4e4](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/1ee76846-b419-46b1-9623-50a09306f4e4)

希望这有帮助。

# jquery - jQuery UI 自动完成 - 选择后禁用选定的选项

> ID：11331283
> 
> 赞同：1
> 
> 时间：2012-07-04T14:44:10.913
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我有一个 jQuery UI 自动完成下拉菜单，我想选择其中一个选项，然后选择选项将被禁用/隐藏。例如：我有 {"good","better","best"} 选择 "better"，自动完成建议列表将是 {"good","best"}。

提前致谢。

这里有详细的例子（感谢@Whitaker）

```
<input id="myElement" />​
var result; // should be array
$("#myElement").autocomplete({
    source: function( request, response ) {
        $.ajax({
            type: "GET",
            dataType: "json",
            url: "autocomplete.php",
            data: {
                  startsWith: request.term
            },
            async:false,
            success: function( data ) {
                result = data; // to do array assign process - not shown here
                response($.ui.autocomplete.filter(result, request.term)); 
            }   
        }); 
    }, 
    select: function(event, ui) {  
        var index = $.inArray(ui.item.value, result); 
        result.splice(index, 1); 
    }
}); 
```

jQuery ui splice() 方法适用于静态列表，但在调试 AJAX 每次单击输入元素时获取方法刷新结果的代码时，我遇到了有趣的一点。有什么方法可以在客户端工作吗？（不改变.php）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T01:50:30.083

如果没有更多的上下文，提供一个好的例子有点困难，但如果你的例子就是你所需要的，这应该可以工作：

```
var src = ['good', 'better', 'best'];
$("#auto").autocomplete({
    source: function(request, response) {
        response($.ui.autocomplete.filter(src, request.term));
    },
    select: function(event, ui) {
        var index = $.inArray(ui.item.value, src);
        src.splice(index, 1);
    }
}); 
```

**Example:** [http://jsfiddle.net/LSMvS/](http://jsfiddle.net/LSMvS/)

# java - 24X7 运行 Java 程序

> ID：11331287
> 
> 赞同：1
> 
> 时间：2012-07-04T14:44:32.527
> 
> 标签：java, windows, swing

我想在远程计算机上 24 x 7 运行一个 java 程序。

我已将所有内容都包含在 try catch 块中，这样它就不会因为异常而结束。

但是程序当前正在我的 Eclipse IDE 中运行。

我应该如何进行。我是否应该制作一个 SWING GUI 并转换为继续运行的 exe。

每次计算机运行时程序是否有任何运行方式。（可能作为服务）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T14:48:02.250

[JavaServiceWrapper](http://wrapper.tanukisoftware.com/doc/english/introduction.html)是一个很好的实用工具，可以将 Java 程序包装为服务。

特别注意它的[重启能力](http://wrapper.tanukisoftware.com/doc/english/introduction.html#reliability)。您可以将其配置为在退出时重新启动服务，或者如果日志/输出中出现给定消息（例如 OutOfMemoryErrors 等 - 这*特别*有用，因为应用程序变得无响应但尚未退出）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:48:51.590

您可以通过命令行提示符在没有 IDE 的情况下运行 Java。即，适用于 Unix/Linux/Mac 的 Bash shell，适用于 Windows 的 cmd。

脚步：

1.  编译你的java源代码`javac Example.java ...`
2.  运行你的应用程序`java Example`

当然，你可以写一个`shell script`or `.bat`which 包含该`java Example`命令，并要求系统在系统启动后执行所有操作。

有关更多信息，[请查看 http://www.skylit.com/javamethods/faqs/javaindos.html](http://www.skylit.com/javamethods/faqs/javaindos.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T14:48:51.987

您可以将其打包为可执行 jar，然后使用 java -jar YourProg.jar 启动它。如果您有多个库依赖项，则可以使用[one-jar](http://one-jar.sourceforge.net/)将所有内容打包到一个 jar 中。

至于每次计算机启动时启动它，取决于您的 windows 版本，您可以使用 MS Resource Toolkit 中的一些工具，例如[srvany](http://support.microsoft.com/kb/137890)在启动时启动它。

# php - php imagecopyresampled问题

> ID：11331288
> 
> 赞同：2
> 
> 时间：2012-07-04T14:44:45.973
> 
> 标签：php, gd

我在使用 imagecopyresampled 时遇到了一些问题，主要是图像缩放不正确，图像位置错误，边缘有黑色边框。

我设置了以下变量

```
 $tW = $width; // Original width of image
    $tH = $height; // Orignal height of image

    $w = postvar; // New width
    $h = postvar; // New height
    $x = postvar; // New X pos
    $y = postvar; // New Y pos 
```

然后运行以下

```
 $tn = imagecreatetruecolor($w, $h);
    $image = imagecreatefromjpeg('filepathhere.jpeg');
    imagecopyresampled($tn, $image, 0, 0, $x, $y, $w, $h, $tW, $tH); 
```

如果有人有任何线索，那将是很大的帮助！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T15:01:38.887

这里有几个问题。首先，您不应该创建具有指定新高度和宽度的新图像，而是根据原始图像的比例计算它们应该是什么，否则您的缩放图像会失真。例如，下面的代码将创建一个适当调整大小的图像，该图像将适合给定的矩形`$w x $h`：

```
$tW = $width;    //original width
$tH = $height;   //original height

$w = postvar;
$h = postvar;

if($w == 0 || $h == 0) {
    //error...
    exit;
}

if($tW / $tH > $w / $h) {
    // specified height is too big for the specified width
    $h = $w * $tH / $tW;
}
elseif($tW / $tH < $w / $h) {
    // specified width is too big for the specified height
    $w = $h * $tW / $tH;
}

$tn = imagecreatetruecolor($w, $h);  //this will create it with black background
imagefill($tn, 0, 0, imagecolorallocate($tn, 255, 255, 255));    //fill it with white;

//now you can copy the original image:
$image = imagecreatefromjpeg('filepathhere.jpeg');
//next line will just create a scaled-down image
imagecopyresampled($tn, $image, 0, 0, 0, 0, $w, $h, $tW, $tH); 
```

现在，如果您只想复制原始图像的某个部分，例如从坐标`($x, $y)`到右上角，那么您需要将其包含在计算中：

```
$tW = $width - $x;    //original width
$tH = $height - $y;   //original height

$w = postvar;
$h = postvar;

if($w == 0 || $h == 0) {
    //error...
    exit;
}

if($tW / $tH > $w / $h) {
    // specified height is too big for the specified width
    $h = $w * $tH / $tW;
}
elseif($tW / $tH < $w / h) {
    // specified width is too big for the specified height
    $w = $h * $tW / $tH;
}

$tn = imagecreatetruecolor($w, $h);  //this will create it with black background
imagefill($tn, 0, 0, imagecolorallocate($tn, 255, 255, 255));    //fill it with white;

//now you can copy the original image:
$image = imagecreatefromjpeg('filepathhere.jpeg');
//next line will create a scaled-down portion of the original image from coordinates ($x, $y) to the lower-right corner
imagecopyresampled($tn, $image, 0, 0, $x, $y, $w, $h, $tW, $tH); 
```

如果您提供有关您要实现的目标的更多详细信息，我可能会提供进一步的帮助。

# c - PETSc 示例不起作用

> ID：11331289
> 
> 赞同：3
> 
> 时间：2012-07-04T14:44:50.087
> 
> 标签：c, makefile, cygwin, petsc

我有 Windows 7 操作系统。我已按照[PETSc 网页上](http://www.mcs.anl.gov/petsc/documentation/installation.html#windows "窗户安装")的说明进行操作；在 VS 2005 的命令提示符中，我打开了 cygwin 并使用以下命令安装了 PETSc：

```
./configure --with-cc='win32fe cl' --with-fc=0 --with-mpi=0 --download-f2cblaslapack 
```

我尝试从网页运行以下示例：

```
cd src/ksp/ksp/examples/tutorials

make ex2 
```

ex2.c 是交流程序代码。我收到以下错误：

```
$ make ex2

makefile:18: /conf/variables: No such file or directory

makefile:19: /conf/rules: No such file or directory

makefile:1151: /conf/test: No such file or directory

make: *** No rule to make target `/conf/test'.  Stop. 
```

这是什么原因造成的？

（更重要的是）我该如何解决？

*编辑：我也可以使用一般答案，因为目前我什至不知道谷歌是为了什么，而且我不想只是联系 PETSc 支持来解决所有问题。

* * *

我决定在 Ubuntu 上工作。所以现在，这就是交易。安装后我写：

> gcc -I$PETSC_DIR/include -L$PETSC_DIR/$PETSC_ARCH/lib -libpetsc ex2

在命令行中。我得到错误按摩：

> /usr/bin/ld: 找不到 -libpetsc ex2: 在函数`_start': (.text+0x1bc4): multiple definition of`_start' /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o :(.text+0x0): 首先在这里定义 ex2: In function `_fini': (.fini+0x0): multiple definition of`_fini' /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crti.o :(.fini+0x0): 这里先定义 ex2:(.rodata+0x0): `_IO_stdin_used' /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o:(.rodata.cst4+0x0): first defined here ex2: In function`__data_start'的多重定义: (.data+0x0): `__data_start' /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o:(.data+0x0): first defined here ex2: In function`__data_start'的多重定义: (.data+0x8): `__dso_handle' /usr/lib/gcc/x86_64-linux-gnu/4.6/crtbegin.o:(.data+0x0): first defined here ex2: In function`_init的多重定义': (.init+0x0): `_init' 的多重定义 /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crti.o:( .init+0x0): 这里首先定义 collect2: ld 返回 1 退出状态

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:47:49.950

正如[PETSc 网页](http://www.mcs.anl.gov/petsc/documentation/installation.html)中*遇到的问题？*与您相关的问题`make`需要通过configure进行设置`PETSC_DIR`和`PETSC_ARCH`打印。

*这是什么原因造成的？*: in目录是指包含配置文件
，即`makefile``src/ksp/ksp/examples/tutorials``PETSC_DIR`

```
include ${PETSC_DIR}/conf/variables
include ${PETSC_DIR}/conf/rules

...
include ${PETSC_DIR}/conf/test 
```

现在，当您正在执行`make`时`make ex2`（从错误中它表明您没有设置`PETSC_DIR`变量），`${PETSC_DIR}`它是空的，因此`make`尝试包含不存在的 `/conf/variables`&`/conf/rules`文件。`/conf/test`

*我如何解决它？*
您必须`make`按照网站上的说明运行，
`make PETSC_DIR=<dir_output_from_configure> PETSC_ARCH=<arch_output_from_configure> ex2`
然后才能正确构建源代码。为了澄清您在问题中提到的内容，`./configure ...`不安装 PETSc，而只配置构建源。你需要运行`make`. 运行`configure`成功后，会输出配置详细信息，包括`PETSC_DIR`和`PETSC_ARCH`。样本输出：

```
./configure --with-mpi=0
===============================================================================
             Configuring PETSc to compile on your system                       
===============================================================================
TESTING: alternateConfigureLibrary from PETSc.packages.petsc4py(config/PETSc/packages/petsc4py.py:65)                                                                   Compilers:
...
...
PETSc:
  PETSC_ARCH: arch-linux2-c-debug
  PETSC_DIR: /XXXX/petsc-3.3-p1
  Clanguage: C
  Scalar type: real
  Precision: double
  shared libraries: disabled
  dynamic loading: disabled
  Memory alignment: 16
xxx=========================================================================xxx
 Configure stage complete. Now build PETSc libraries with (cmake build):
   make PETSC_DIR=/XXXX/petsc-3.3-p1 PETSC_ARCH=arch-linux2-c-debug all
 or (experimental with python):
   PETSC_DIR=/XXXX/petsc-3.3-p1 PETSC_ARCH=arch-linux2-c-debug ./config/builder.py
xxx=========================================================================xxx 
```

然后你已经`make PETSC_DIR=/XXXX/petsc-3.3-p1 PETSC_ARCH=arch-linux2-c-debug all`按照输出中提到的那样运行了`configure`。这将构建库。现在您应该能够构建示例了。（请注意，这是在 Linux 上运行的，你应该几乎可以在 cygwin 上做同样的事情）
旁注：似乎不需要`PETSC_ARCH`为构建示例进行设置，你应该能够构建`make PETSC_DIR=<dir_output_from_configure> ex2`

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-06T20:58:23.917

我有同样的问题。你只需要一个修复。在显示上述错误的生成文件中，只需给出`PETSC_DIR`生成文件中变量的值即可。例如，对我来说是

> PETSC_DIR=/Users/kanikas/Documents/research/petsc/petsc-3.5.2

注意：`PETSC_DIR`应该是petsc的根目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-30T21:06:52.977

我正在直接在 ~/.bashrc 中添加导出路径。这样我就不需要一遍又一遍地写路径。

```
sudo nano ~/.bashrc 
```

转到文件的最后一行：

```
#PETScXXX
export PETSC_DIR=/home/username/PETSc/petsc-3-8
export PETSC_ARCH=arch-linux2-c-debug 
```

每次启动 shell 时，您都可以访问正确的 petsc 路径和库。

我希望这对某人有帮助。（运行 Xubuntu 16.04 64 位）

# css - jQueryMobile 更改背景图片

> ID：11331291
> 
> 赞同：2
> 
> 时间：2012-07-04T14:45:04.937
> 
> 标签：css, asp.net-mvc, jquery-mobile, razor, background-image

有人知道如何为 jQueryMobile 构建的站点更改和/或设置背景图像吗？因为我尝试了所有我发现的东西（实际上并没有那么多），但我真的无法覆盖 jquery mobile 的默认 css (http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1\. 0.min.css）添加我自己的。希望得到您的帮助，谢谢！

* * *

已解决：在您的 CSS 文件中，您必须覆盖 jQuery Mobile “.ui-mobile .type-home .ui-content”。我就是这样做的：

```
.ui-mobile .type-home .ui-content { 
    background: white url(Image/A-HD.jpg); 
    background-repeat: no-repeat; background-position: 50% 80%; /*50% 80% mozilla optimized*/ 
    background-attachment: fixed; 
    background-size: 50%; /*50% mozilla optimized */ 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:23:11.920

你可以试试

```
.ui-page{
    background:url("../../Images/your.png") no-repeat;
    background-size:cover;
} 
```

这段代码过去对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:07:41.667

发现了（a？）问题：我必须覆盖`.ui-mobile .type-home .ui-content` 并在其中放置我想要的所有属性。希望它可以帮助某人！

# .net - 如何在自定义嵌套用户控件中引用另一个 XAML 元素？

> ID：11331296
> 
> 赞同：4
> 
> 时间：2012-07-04T14:45:13.883
> 
> 标签：.net, wpf, xaml

我想引用另一个元素，它嵌套在自定义用户控件下：

```
<userControls:Test>
     <TextBox Name="Foo" />

     <Button CommandParameter="{Binding Text, ElementName=Foo" Command="{Binding anything}" />
</userControls:Test> 
```

基本上我正在使用命令，我试图用一个名字来引用另一个元素，但我得到了这个著名的：

> 无法在元素“...”上设置名称属性值“...”。“...”在元素“...”的范围内，当它在另一个范围中定义时，它已经注册了一个名称。

我认为不可能命名一个元素：[How to create a WPF UserControl with NAMED content](https://stackoverflow.com/questions/751325/how-to-create-a-wpf-usercontrol-with-named-content)

那么有没有*其他*方法可以引用嵌套自定义用户控件内容中的元素呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:08:23.813

不是对您问题的直接回答，而是一个合理的解决方法。在您的视图中，将文本绑定到视图模型上的 FooText 属性，直接在 ICommand 的声明旁边。命令执行时，使用最新的FooText

```
<!-- View -->
<userControls:Test>
     <TextBox Text={Binding FooText, Mode=TwoWay} />

     <Button Command="{Binding FooCommand}" />
</userControls:Test>

// ViewModel
public string FooText { get; set; }

public ICommand FooCommand 
{ 
    get 
    { 
        return new DelegateCommand(() => ExecuteFoo(FooText)); 
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:34:52.913

为什么不为 UserControl 制作一个模板。

```
<....Resources>
    <Style TargetType="{x:Type UserControl}" x:Key="MyUserControl">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate>
                    <StackPanel>
                        <TextBox x:Name="PART_Foo"/>
                        <TextBlock Text="{Binding ElementName=PART_Foo, Path=Text}"/>
                        <ContentPresenter  Content="{Binding RelativeSource={RelativeSource Mode=TemplatedParent},Path=Content}"/>
                    </StackPanel>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</....Resources>
<UserControl Style="{StaticResource MyUserControl}">
</UserControl> 
```

然后用键命名模板，并指定哪个 UserControl 使用哪个模板。

此外，在您的代码中，您可以使用以下方法获取模板化部分的 PART_Name：

```
UIElement GetUserControlPart(UserControl control, String name)
{
   return control.Template.FindName(name, control) as UIElement;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T12:20:07.187

我最终这样做了：

```
<UserControl x:Class="MyProject.FooBar"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:userControls="clr-namespace:MyProject.UserControls"
         Loaded="Loaded"> <!-- notice -->

    <userControls:Test>
         <TextBox Initialized="FooInitialized" />

         <Button Initialized="AnotherInitialized" />
    </userControls:Test> 
```

和代码：

```
// This for every initialization, all we do is set names after the elements are initialized.
private void FooInitialized(object sender, EventArgs e)
{
    ((TextBox) sender).Name = "Foo";
}

// Here when the entire junk is loaded, we set the necessary commands.
private void Loaded(object sender, EventArgs e)
{
    // Find elements.
    var button = UIHelper.FindChild<Button>(this, "Bar");
    var textBox = UIHelper.FindChild<TextBox>(this, "Foo");

    // Set up bindings for button.
    button.Command = ((FooViewModel) DataContext).FooCommand;
    button.CommandParameter = textBox;
} 
```

`UIHelper`来自[https://stackoverflow.com/a/1759923/283055](https://stackoverflow.com/a/1759923/283055)。_ 该按钮的名称也与文本框相同。

基本上所有名称都是通过`Initialized`事件设置的。唯一的缺点是您必须在代码中引用名称，这就是为什么我在整个组件加载后通过代码设置命令的原因。我发现这是代码和 UI 标记之间的最佳折衷方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T16:20:21.107

如果您使用 .NET 4.0 并需要将绑定源设置为同级控件，则可以使用此 MarkupExtension：

```
public class SiblingSourceBinding : MarkupExtension
{  
    public Binding Binding
    {
        get;
        set;
    }

    public int SiblingIndex
    {
        get;
        set;
    }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        var provideValueTarget = serviceProvider.GetService(typeof(IProvideValueTarget)) as IProvideValueTarget;

        if (provideValueTarget != null)
            this.Binding.Source = LogicalTreeHelper.GetChildren(LogicalTreeHelper.GetParent(provideValueTarget.TargetObject as DependencyObject)).Cast<object>().ElementAt(this.SiblingIndex);
        else
            throw new InvalidOperationException("Unable to set sibling binding source.");

        return this.Binding.ProvideValue(serviceProvider);
   } 
```

并像这样使用它：

```
<userControls:Test>
    <TextBox/>
    <Button CommandParameter="{local:SiblingSourceBinding Binding={Binding Text}, SiblingIndex=0}" Command="{Binding anything}"/>
</userControls:Test> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-21T07:13:59.853

您可以在嵌套元素中使用 Uid，如下所示：

```
<userControls:Test Name="usrCtrl">
     <TextBox Uid="Foo" />
     <Button Uid="btn"/>
</userControls:Test> 
```

然后使用以下函数（该函数是此答案[Get object by its Uid in WPF](https://stackoverflow.com/questions/1887611/get-object-by-its-uid-in-wpf)的解决方案）：

```
private static UIElement FindUid(this DependencyObject parent, string uid)
{
    var count = VisualTreeHelper.GetChildrenCount(parent);
    if (count == 0) return null;

    for (int i = 0; i < count; i++)
    {
        var el = VisualTreeHelper.GetChild(parent, i) as UIElement;
        if (el == null) continue;

        if (el.Uid == uid) return el;

        el = el.FindUid(uid);
        if (el != null) return el;
    }
    return null;
} 
```

然后在您的 Loaded 函数中添加以下内容：

```
private void Loaded(object sender, EventArgs e)
{
    // Find elements.
    var button = FindUid(usrCtrl, "btn") as Button;
    var textBox = FindUid(usrCtrl, "Foo") as TextBox;

    // Do binding here...
} 
```

# design-patterns - 在单例上注册提供数据的对象

> ID：11331297
> 
> 赞同：1
> 
> 时间：2012-07-04T14:45:23.953
> 
> 标签：design-patterns

我正在开发一个 iOS 应用程序，我可以在其中访问各种音乐流媒体服务（spotify、r.dio 等）。

对于每个 API，我都有一个所谓的*源管理器对象*（例如`SpotifySourceManager`）。这些能够返回给定服务的播放列表（和一些其他数据）。

我将这些源管理器注册在一个单例/共享对象（想想一个*主源管理器*）中，我用它来聚合来自不同服务的数据（播放列表本身由实现通用协议的自定义对象包装）。

此设置是否有设计模式名称？我之所以问，是因为我必须为此编写一个文档，并且最好为其命名。

我已经做了一些研究，但不幸的是找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:00:53.583

服务提供者框架。从有效的Java：

*服务提供者框架包含三个基本组件： 提供者实现的服务接口；提供者注册 API，系统使用它来注册实现，让客户端可以访问它们；以及服务访问 API，客户端使用该 API 获取服务实例。服务访问 API 通常允许但不要求客户端指定一些选择提供商的标准。如果没有这样的规范，API 会返回一个默认实现的实例。*

# javascript - JavaScript 今天日期

> ID：11331299
> 
> 赞同：3
> 
> 时间：2012-07-04T14:45:26.190
> 
> 标签：javascript, datetime

> **可能重复：**
> [如何在 JavaScript 中获取当前日期](https://stackoverflow.com/questions/1531093/how-to-get-current-date-in-javascript)

我需要使用 JavaScript 以 yyyymmdd 格式获取今天的日期。

我使用了以下代码：

```
var d = new Date();
d.getFullYear()+ '' +((d.getMonth()+1)) + '' + d.getDate(); 
```

但是月份和日期以个位数返回，有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:55:57.803

```
 var d = new Date();
        var df = d.getFullYear()
            + ('0' + String(d.getMonth()+1)).substr(-2)
            + ('0' + String(d.getDate())).substr(-2);
        alert(df); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:50:34.090

您可以通过以下方式执行此操作。但是您需要编写一个额外的函数，如下所示：

```
function getTwoDigit(number) {       
    return (number < 10 ? '0' : '') + number       
} 
```

现在您可以在原始代码上使用该功能。

```
var d = new Date();d.getFullYear()+ '' +(getTwoDigit(d.getMonth()+1)) + '' + getTwoDigit(d.getDate()); 
```

# iphone - UIControl 有时（但不总是）触发动作

> ID：11331302
> 
> 赞同：0
> 
> 时间：2012-07-04T14:45:52.270
> 
> 标签：iphone, objective-c, ios, uicontrol

周围：I've got `class MyClass : NSObject`，that has `NSDictionary *data`and `UIView *myView`。在`MyViewController`I've got `MyClass *myObject = [MyClass alloc] init]`and I want to add`UIControl`中，当用户点击它时，`someAction:(DifferentClass)sender`会触发一个 action()。

通过发件人我发送字典以便能够对数据做任何事情。`UIControl`这就是为什么我必须`myClass`不`myClass.myView`。

问题：
`myAction`有时有效，有时无效。这取决于我点击的位置。我已经做了`[myClass.myView setBackgroundColor:[UIColor greenColor]]`，所以我确定我正在点击那个地方`UIControl`应该起作用的地方……但它们通常在视图的左侧起作用，而在右侧则不起作用。

注意：
我确定视图正确地由`[allViewsInProgram setClipsToBounds:YES]`. 我还在模拟器上进行了测试，颜色显示在屏幕外，没有错误。

```
[(UIControl*)myClass addTarget:self
                           action:@selector(myAction:) 
                 forControlEvents:UIControlEventAllTouchEvents]; 
```

# c# - 使用 TryUpdateModel 绑定时，MVC ValidationSummary 会忽略模型级别的验证错误

> ID：11331303
> 
> 赞同：6
> 
> 时间：2012-07-04T14:45:55.153
> 
> 标签：c#, asp.net, asp.net-mvc-3, validationsummary

这是一个与此处已发布的问题非常相似的问题：[ASP.NET MVC：在 TryUpdateModel 中设置的验证消息未显示 ValidationSummary](https://stackoverflow.com/questions/1362435/asp-net-mvc-validation-messages-set-in-tryupdatemodel-not-showning-validationsu)

我不确定那个旧主题是否参考了早期版本的 MVC，但在 MVC3 中，我遇到了一些类似的奇怪行为。

我有一个名为 Trade 的模型类。这继承自 IValidatableObject，因此实现了一个 Validate 方法。在此我们对整个模型进行了一些验证（与强制验证属性的数据注释相反）。验证如下：

```
public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
  {
     var validationResults = new List<ValidationResult>();

     if (this.EndDate < this.StartDate)
     {
        validationResults.Add(new ValidationResult("End date must be greater than start date"));
     }

     return validationResults;
  } 
```

我们有一个视图模型来帮助显示交易。这包含通过 TradeModel 属性对贸易模型的引用。所以基本上视图模型是一个贸易模型，加上一些额外的信息，用于下拉列表的人口，如交易对手等。

我们的 CSHTML 类包含一个 ValidationSummary，以“true”作为参数，这意味着它只会显示模型错误。

如果我实现我的 HttpPost 控制器方法来创建一个新的 Trade 如下......

```
 [HttpPost]
  public ActionResult Create(FormCollection collection)
  {
     var trade = new Trade();

     if (this.TryUpdateModel(trade))
     {
        if (this.SaveChanges(this.ModelState, trade))
        {
           return this.RedirectToAction("Index");
        }
     }

     return this.View(trade);
  } 
```

...当我使用 StartDate > EndDate 输入交易时，我发现 TryUpdateModel 返回 false 并且用户被引导回他们的交易。这似乎合乎逻辑。不幸的是 ValidationSummary 没有显示任何错误消息。

如果我在 Create 方法中放置一个断点并调查 ModelState，我可以看到字典中有一条错误消息。它是针对“TradeModel”的键，而不是针对任何属性。同样，这似乎是合乎逻辑的。

关于为什么会这样的一个理论是 ValidationSummary 假定针对非 String.Empty 键的任何验证错误都必须是属性验证错误，它忽略了我们的验证错误，因为我们有一个包含对模型的引用的视图模型，因此导致 Key 为“TradeModel”。

将这个理论从水中吹出来的是：如果我重写控制器的 Create 函数如下......

```
 [HttpPost]
  public ActionResult Create(Trade trade, FormCollection collection)
  {
     if (this.SaveChanges(this.ModelState, trade))
     {
        return this.RedirectToAction("Index");
     }

     return this.View(trade);
  } 
```

...因此依赖MVC“自动”执行绑定，并重新运行相同的测试场景，用户会看到预期的错误消息！

如果我添加断点并查看 ModelState，我会看到与以前相同的键相同的错误消息，但这次 ValidationSummary 将它们拾取！

如果我按如下方式修改验证，那么它可以与以任何一种方式编写的控制器的 Create 函数一起使用：

```
 public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
  {
     var validationResults = new List<ValidationResult>();

     if (this.EndDate < this.StartDate)
     {
        validationResults.Add(new ValidationResult("End date must be greater than start date", new[] { "StartDate" }));
     }

     return validationResults;
  } 
```

很明显，这只是模型级别验证错误的问题。

对此的任何帮助将不胜感激！有一些原因（我现在不会讨论）为什么我们需要手动创建视图模型的实例并使用 TryUpdateModel 调用绑定。

提前致谢！

**更新**

看来，当被告知排除属性错误时，ValidationSummary 的理论仅显示带有 String.Empty 的 ModelState 中的键的错误实际上是正确的。我查看了源代码，它实际上使用 ViewData.TemplateInfo.HtmlFieldPrefix 来查找模型级别的验证错误。默认情况下，这是 String.Empty。

因此，将此值更改为“TradeModel”似乎是合乎逻辑的，但它会导致每个 HTML id 或名称都有前缀，因此绑定会失败！

如果视图模型包含对业务模型的引用，则由 IValidatableObject 添加到 ModelState 的任何错误都将添加一个键，该键包括与视图模型中的业务模型属性名称相等的前缀（在我们的示例中为“TradeModel”），从而导致键，例如“TradeModel.CounterpartyId”等。模型级错误会添加一个与视图模型的业务模型属性名称相同的键（“TradeModel”）。

因此，如果以这种方式构建视图模型，业务似乎无法添加模型级别的验证错误。

令我感到困惑的是，为什么当控制器的 Create 函数被编写为它以 Trade 视图模型对象作为参数时，这在我们的“真实”项目中确实有效。我昨天一定错过了这个，但是今天看它，当 MVC 绑定并触发验证时，它似乎在字典的末尾添加了一个额外的键，其值为 String.Empty。这包含使用 TradeModel 键添加的错误的副本。如您所料，ValidationSummary 会选择它们！

那么为什么 MVC 在我们的 live 项目中这样做，而不是在简单的测试应用程序中呢？

当编写控制器函数以将视图模型作为参数时，我已经看到两次触发验证。也许这每次都在做一些微妙的不同？

**更新...再次**

它在我们的实际项目中起作用的原因是在我们的基本控制器中隐藏了一些代码（所有其他控制器都从中继承），它将模型状态中发现的所有错误复制到具有 String.Empty 键的新条目中。此代码仅在两种情况之一中被调用。因此，真实应用程序和测试应用程序之间没有实际区别。

我现在明白发生了什么以及为什么 ValidationSummary 会这样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T13:14:37.570

好的。我现在可以自己回答这个问题了。

如果 ValidationSummary 与 ExcludePropertyErrors 参数设置为 True 一起使用，它将使用等于 ViewData.TemplateInfo.HtmlFieldPrefix 的键查找模型状态中的错误。默认情况下，这是 String.Empty。

如果您有一个公开业务模型的视图模型，如下所示：

```
namespace ValidationSummary.Models
{
   using System;
   using System.Collections.Generic;
   using System.ComponentModel.DataAnnotations;

   public class TradeModel : IValidatableObject
   {
      public DateTime StartDate { get; set; }

      public DateTime EndDate { get; set; }

      public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
      {
         List<ValidationResult> validationResults = new List<ValidationResult>();

         if (EndDate < StartDate)
         {
            validationResults.Add(new ValidationResult("End date must not be before start date"));
         }

         return validationResults;
      }
   }
}

namespace ValidationSummary.ViewModels
{
   public class Trade
   {
      public Trade()
      {
         this.TradeModel = new Models.TradeModel();
      }

      public Models.TradeModel TradeModel { get; private set; }
   }
} 
```

进行验证时，在模型级别添加的错误 (ValidationResults)（其中没有进一步的参数到采用属性名称的 ValidationResult 构造函数，将添加到带有属性名称前缀的 ModelState视图模型的 - 在本例中为“TradeModel”。

我们目前正在考虑几种解决方法。

1.  不要将业务模型暴露在视图模型之外。这实质上涉及绑定到视图模型，而不是绑定到视图模型的业务模型。这可以通过两种方式完成：使视图模型成为业务模型的子类；或将业务模型中的属性复制到视图模型。我更喜欢前者。
2.  编写代码将模型级错误复制到 String.Empty 的新 ModelState 字典键中。不幸的是，这可能无法优雅地完成，因为暴露业务模型的视图模型的属性名称被用作键。这可能因控制器/视图模型而异。
3.  在视图中使用以下内容。这将显示针对业务模型的错误消息。本质上，这是假装业务模型的模型级错误实际上是属性错误。这些的显示与 ValidationSummary 不同，但也许这可以用 CSS 解决：

    @Html.ValidationMessageFor(m => m.TradeModel)

4.  子类验证摘要。这将涉及更改它，以便它知道 ModelState 中的哪些键引用视图模型的业务模型属性。

# c++ - C++11 移动语义和 Microsoft Visual C++ 编译优化

> ID：11331308
> 
> 赞同：2
> 
> 时间：2012-07-04T14:46:02.800
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, move-semantics

让我们考虑以下 Microsoft Visual C++（Microsoft Visual Studio 2012 RC，版本 11.0.50522.1 RCREL）中自定义数组的类模板。

```
/*C++11 switch-on*/

#include <iostream>

template <typename element, unsigned int size>
class array
{
    private:
        element data[size];
    public:
        array(){}
        ~array(){}
        array(const array & other)(){}
        element & operator [](unsigned int i)
        {
            if(i<size)
                return data[i];
            else
                throw std::runtime_error("Out of boundary");
        }
} 
```

请注意，构造函数、析构函数和复制构造函数被定义为什么都不做。一个普通的打印函数定义如下

```
/*printing*/

template <typename element, unsigned int size>
void print(test::array<element, size> & content)
{
    unsigned int i=0;
    for(std::cout<<"["<<content[i++];i<size;std::cout<<content[i++])
        std::cout<<",";
    std::cout<<"]"<<std::endl;
} 
```

当程序运行以下主要

```
int main(int argc, char * argv[])
{
    array<int, 3> a;

    /* uniform initialization is not supported yet
     * so we bother iterating to assign to initialize
     * a to [1,2,3]
    */

    for(int i=0;i<3;i++)
        a[i]=i+1;

    /*copy*/
    auto b=a;

    /*move*/
    auto c=std::move(a);

    /*change in a*/
    a[0]=0;

    print<int, 3>(a);
    print<int, 3>(b);
    print<int, 3>(c);

    return 0;
} 
```

根据编译优化，输出结果会有所不同。特别是，如果我编译并运行

*   /Od 打开

    *a* =[0,2,3]

    *b* =[1470797225,-2,9185596]

    *c* =[0,2620008,9186761]

*   /O1、/O2 或 /Ox 打开

    *a* =[0,2,3]

    *b* =[0,2,3]

    *c* =[0,2,3]

现在我明白了

*   /Od 打开
    *   *b与**a*不同，因为复制构造函数在调用时什么也不做
    *   *c与**a*不同，因为复制构造函数在调用时什么也不做。但是根据移动语义， a 中数组数据中元素的变化*也*反映到*c*上。所以a[0]==c[0]==0。

但我不明白为什么*a*，*b*和*c*在优化开关打开时都相等。我可能认为 Microsoft C++ 编译器用确实移动的复制构造函数代替了不执行任何操作的复制构造函数，但我只是不确定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T15:08:48.293

标准部分`[conv.lval]`规定：

> 非函数、非数组类型的左值`T`可以转换为纯右值。如果`T`是不完整类型，则需要进行此转换的程序格式错误。如果泛左值所指的对象不是类型`T`的对象，也不是派生自 的类型的对象`T`，**或者如果该对象未初始化，则需要此转换的程序具有未定义的行为**。如果`T`是非类类型，则纯右值的类型是 的 cv 非限定版本`T`。否则，纯右值的类型是`T`。

在内部`print`，表达式`cout << content[i++]`使用左值到右值的转换。当您调用`print(b)`or`print(c)`时，转换发生在从未初始化的对象上，因此您有未定义的行为。

试图描述未定义的行为是徒劳的。

* * *

注意：对象`b`和`c`由复制构造函数初始化。复制构造函数不会初始化子对象`b.content`or `c.content`，这意味着这些数组及其所有成员元素在形式上是*未初始化*的。

`a`代码在初始化时实际上并没有移动`c`。 `std::move`创建一个右值引用，这使得移动成为可能，但没有匹配的构造函数接受右值引用，因此使用复制构造函数，`a`被复制而不是移动。

# c# - Azure TableServiceEntity - 存储复杂类

> ID：11331309
> 
> 赞同：8
> 
> 时间：2012-07-04T14:46:12.177
> 
> 标签：c#, azure, azure-table-storage

通过 TableServiceEntity 将数据存储在 Azure 表服务中，您仅限于具有公共 get/set 的常用基本类型（int、string、datetime 等）。

处理集合、复杂类型、继承等的序列化没有你所期望的通常的魔法。

处理这个问题的不同方法可能是

*   挂钩到[WritingEntity 和 ReadingEntity](http://convective.wordpress.com/2009/12/30/entities-in-azure-tables/)事件以手动设置属性（包括使用一些序列化方法处理复杂类型到纯字符串属性）。
*   与上面类似，但使用额外的“存储类”在 YourClass <-> YourClassStorage <-> TableServices 之间进行转换
*   使用[Lokad.Cloud 的 FatEntities](http://code.google.com/p/lokad-cloud/wiki/FatEntities)或[Lucifure等框架](http://www.lucifure.com/)

我错过了什么吗？在哪种情况下哪种方法可能是最好的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T18:45:13.597

ATS 支持继承。实现的具体类中的所有继承属性都将被持久化和检索。但是，确实不支持复杂类型。

处理对象树和对象关系的持久化至少还有一种方法：将相关对象分别存储在不同的 PartitionKey/RowKey 下。

实现该方法的最简单（蛮力）方式可能需要您多次调用 ATS，以便您可以正确反序列化对象。

如果针对存储执行的事务数量比使用的存储空间和带宽更重要，那么该方法的一个更优雅的扩展是为您的实体实现接口并创建一个实现所有这些接口的“宽”联合实体 - 这就是存储和检索的人。检索到的每个联合对象仅通过特定接口使用。您可以通过这种方式存储集合以及简单的相关实体 - 只需确保您的 PartitionKey 对于与 Union 对象相关的每个人都是相同的，并且您可以确定哪个 Union 对象代表哪个实体类型。

高温高压

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T06:50:07.743

我不确定这是否能回答您的问题，但如果您需要上传复杂类型，您可以将数据序列化为字节数组。

我需要将 KeyValuePair 的列表上传到 TableStorage，所以我只需使用二进制格式化程序将其序列化为字节数组，然后在检索时反序列化并转换回它。

连载：

```
MemoryStream ms = new MemoryStream();
BinaryFormatter bf = new BinaryFormatter();
bf.Serialize(ms, keyValuePairList);
byte[] ba = ms.ToArray(); 
```

反序列化并回退：

```
MemoryStream ms = new MemoryStream(byteArray);
BinaryFormatter bf = new BinaryFormatter();
var obj = bf.Deserialize(ms);

//cast object back to List of KeyValuePair
var keyValuePairList = (List< KeyValuePair<string,string> >)obj; 
```

# python - 将信息存储到 .exe 文件中，从 python 导出

> ID：11331310
> 
> 赞同：1
> 
> 时间：2012-07-04T14:46:22.533
> 
> 标签：python, exe

我必须从我的 python 程序生成一个可执行 (.exe) 文件。我想在这个 .exe 文件本身中以持久的方式存储信息。

通常我会将它刺入外部文件，但对我来说，重要的是信息存储在 .exe 文件本身而不是外部文件中。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:56:57.757

**If you want read-write data:**

Don't do this. An executable changing itself isn't guaranteed to work. Some executables write data at the end of the file (in theory) but you don't know:

*   whether antivirus software will pick this behaviour up as part of behavioural analysis
*   whether the executable is actually writable from the executable process
*   whether data you write might become executable in theory and result in a security exploit
*   whether you'll want to update a new release to the code next week, which will replace the executable file and lose the data

[Nearly] all software is able to get by with 'normal' file storage (i.e. in a user / application data directory).

**If you just want read-only data:**

Fine, no problem. Write a Python file with the data in it, as a variable in a module. You can write a python file as part of your build process.

# c++ - 冒泡排序中的交换次数

> ID：11331314
> 
> 赞同：5
> 
> 时间：2012-07-04T14:46:34.433
> 
> 标签：c++, algorithm, math, bubble-sort

我有一个冒泡排序版本：

```
int i, j;  

for i from n downto 1 
{
    for j from 1 to i-1 
    { 
        if (A[j] > A[j+1])
            swap(A[j], A[j+1]) 
    } 
} 
```

我想使用上述版本的冒泡排序来计算预期的交换次数。我使用的方法如下所示：

```
// 0 based index

float ans = 0.0;

for ( int i = 0; i < n-1; i++ )
{
    for ( int j = i+1; j < n; j++ ) {

        ans += getprob( a[i], a[j]); // computes probability that a[i]>a[j].
    }
} 
```

我是走正确的路还是错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T15:04:07.240

获得答案的最佳方法是运行冒泡排序算法本身并在 swap() 调用之后包含一个计数器。您的计算函数将 (a) 需要几乎与排序本身一样长的时间（取决于 swap() 与 getprob() 的运行时间）和 (b) 错过排序时元素顺序发生变化的点。

顺便说一句，swap() 调用的确切数量取决于您需要排序的数据 - 您有 n*(n-1)/2 比较，其中任何一个都可能导致交换（平均而言，您需要一半的时间交换比较的元素）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T15:10:31.193

也许这有帮助。基本上，这提供了一个框架来在一组模拟数据集上运行冒泡排序并计算交换概率。

让这个概率 = p 然后要找到预期的交换操作次数，您需要将其应用于真实数据集。设 n 为该数据集的大小。那么预期数字 = swapProbability * n * n

n*n 的出现是因为冒泡排序有 n * n 次预期操作。

```
float computeSwapProbability()
{
    int aNumSwaps = 0
    int aTotalNumberOfOperations = 0

    For all simulation datasets
    {

        int i, j;  

        for i from n downto 1 

        { 

            for j from 1 to i-1 

            { 
                aTotalNumberOfOperations++

                if (A[j] > A[j+1]) 
                {
                    swap(A[j], A[j+1]) 
                    aNumSwaps++
                }

            } 

        }
    }

    return (float)aNumSwaps/aTotalNumberOfOperations;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-24T22:41:38.527

计算交换的最佳方法是在交换的 if 条件中包含计数器变量。

```
 int swapCount=0;

    for (i = 0; i < (length-1); ++i) {
      for (j = 0; j < (length-i-1); ++j) {
        if(array[j] > array[j+1]) {
          temp = array[j+1];
          array[j+1] = array[j];
          array[j] = temp;
          swapCount++;
        }
      }
    }

    printf("Swap count : %d" ,swapCount); 
```

# java - 从 SQL 查询到 JPA 查询

> ID：11331315
> 
> 赞同：0
> 
> 时间：2012-07-04T14:46:40.163
> 
> 标签：java, jpa

我如何将其转换为 jpa/jpl 查询？**使用CriteriaQuery**编写它是否可能/更干净？

```
select vc.category_id, count(distinct vc.something_id)
from 
  place p, something_category vc, something_poi vp, something v left join something_external_provider vep on vep.something_id=v.id
and (vep.provider is null or (vep.provider = 'EULA' and vep.lastretrieveddate >= now()-interval 1 day))
where p.id=vp.place_id and 
v.id=vc.something_id and
v.id=vp.something_id and 
v.isprivate=0 and 
(v.is_sponsored is null OR v.is_sponsored=0) and 
v.status in (1,11,31) and 
vp.status in (1,2) and 
(EXISTS (select id from something_app where something_id=v.id and app_id=1) OR NOT EXISTS (select id from something_app where something_id=v.id)) and 
v.enddate>now() and 
(country='US' and type='country,political')
group by vc.category_id; 
```

这是我到目前为止的结果

```
private static final String QUERY = "SELECT vc.category, COUNT(DISTINCT vc.something) "
        + "FROM Place p, SomethingCategory vc, SomethingPoi vp, Something v LEFT JOIN SomethingExternalProvider vep ON vep.something=v AND "
        + "(vep.provider IS null or (vep.provider in ( :providers ) and vep.lastretrieveddate >= (now() - INTERVAL 1 DAY))) "
        + "WHERE p=vp.place AND v=vc.something AND v=vp.something AND v.isprivate=0 AND "
        + "(v.isSponsored is null OR v.isSponsored=0) AND v.status IN (?,?,?)) AND vp.status IN (1,2) and "
        + "(EXISTS (SELECT vga.id FROM SomethingApp vga WHERE something = v AND app = :app) OR NOT EXISTS (SELECT vga.id FROM SomethingApp vga WHERE something=v)) AND "
        + "v.enddate>now() AND (country = :country AND type='country, political') " + "GROUP BY vc.category"; 
```

接着

```
 Query query = entityManager.createQuery(QUERY).setParameter("providers", string)
        .setParameter("app", app).setParameter("US", country)
        .setParameter(1, SomethingStatusType.ACTIVE.getType())
        .setParameter(2, SomethingStatusType.EXTERNAL.getType()); 
```

# git - git克隆。如何通过硬链接克隆本地仓库？

> ID：11331324
> 
> 赞同：2
> 
> 时间：2012-07-04T14:47:19.560
> 
> 标签：git, clone

我有一个本地 git 存储库。我想通过硬链接文件在本地机器上克隆它以节省磁盘空间。我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T06:54:39.723

通过简化，Git 存储库由**3 种文件组成**：

1.  ***类数据库对象***（`$GIT_DIR/objects`）：这些对象永远不会被修改，有些可以添加，有些可以删除，但文件永远不会修改。这意味着它们可以在许多克隆之间完全相同。

2.  ***特定于存储库的配置和状态***(`$GIT_DIR`)：这些文件包含特定于存储库的配置（`$GIT_DIR/info/*`例如）。它们还存储存储库状态，例如已知分支是什么，签出分支是什么等。它们不能在存储库之间共享，否则会违反设计

3.  ***工作副本文件，或源代码***：这些文件大部分时间是您的源代码，它们意味着从一个存储库到另一个存储库是不同的。它们很灵活并且变化很大（因为您编写了很多代码，或者因为您经常切换分支，或者两者兼而有之）。

事实上，唯一*不变的*、不是特定于*存储库的*文件是*目标*文件。如果可能，这些会由 Git 自动硬链接（即使没有指定`-l`）。

如果您希望同一驱动器上的两个存储库具有完全相同的状态和文件，那么您绝对应该建立一个符号链接。但是您不能硬链接配置和工作副本文件，因为它们更改太多并且特定于存储库。

# c# - 一页javascript应用程序和静态资源缓存

> ID：11331333
> 
> 赞同：0
> 
> 时间：2012-07-04T14:47:58.553
> 
> 标签：c#, javascript, asp.net-mvc

我看过[这个问题](https://stackoverflow.com/questions/32414/how-can-i-force-clients-to-refresh-javascript-files)，我必须说它不适合我目前的问题/审讯。

设想：

用户成功登录（通过 Ajax 调用）后，他们被重定向（`document.location.href`）到 /app，基本 HTML 与 CSS 和 JS 文件一起发送到该处。

问题：

我目前将版本号放在我缩小的 javascript 和 css 文件名上，例如 appname-2.3.3.js 并添加了一个查询字符串版本号以确保它在新版本上得到刷新：

```
<script src="/js/app/appname-2.3.3-min.js?1207040740" language="javascript" type="text/javascript"></script> 
```

当我推送新版本时，在新登录后，即使文件名和查询字符串数字发生变化，浏览器也会缓存最后一个版本。用户需要进行整页刷新 CTRL+F5 来获取新的静态文件。

问题：

a) 确保每个新登录用户都有正确版本的最佳方法是什么？我的猜测是 /app HTML 页面是缓存的，也许我需要在登录后重定向时将查询字符串值放在那里。但这给我带来了一个问题，即调用登录方法的 javascript 文件必须是“正确的”版本等，等等。

我应该在我的控制器中指定一个 HTTP 标头来告诉浏览器不要缓存 /app 页面吗？这是否意味着没有从该页面缓存静态文件？

几乎每周左右都有新的更新，仍然需要缓存。

b) 从您的角度来看，提醒已登录用户新版本已更新并且他们应该刷新页面的良好用户体验方式是什么？从用户的角度来看，它是“可接受的”吗？

作为参考，该应用程序基于 ASP.NET MVC 3 构建。

感谢您的时间/投入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:36:36.673

您可以使用它`window.applicationCache`来执行此操作。大多数人从问题的另一面想到应用程序缓存：如何在客户端缓存数据？但是当缓存清单文件更改时，它会更新该`CACHE`部分中的所有文件，完全忽略任何服务器缓存。您还将获得客户端缓存的好处。

这样就不需要版本号和查询字符串来试图说服您的浏览器刷新。

添加`manifest="cache.manifest"`到`<html>`. `cache.manifest`是您将用于定义缓存内容的文件的名称。它可以命名任何东西，但我实际上叫 mine `cache.manifest`。

```
<html lang="en" manifest="cache.manifest"> 
```

然后确保您的 Web 服务器的 MIME 类型`.manifest`设置为：

> 文本/缓存清单

然后创建一个名为 的文件`cache.manifest`，将其放在您的应用程序根目录中。在该`CACHE`部分下，放置您要缓存的文件（或者在这种情况下，刷新）。在该`NETWORK`部分下放置您不想缓存的任何文件，或者只是`*`用于“其他所有内容”。

每次推送版本时，**请更改缓存清单中的版本号**。文件中的任何更改都将起作用，但版本号是一个完美的机制。

```
CACHE MANIFEST
#ver 1.0.0

CACHE:
app.html
app.css
app.js

NETWORK:
* 
```

然后把它放在你的`onload`或同等的脚本的顶部。请注意，当您第一次将其添加到代码中时，刷新不会在第一次更新时发生（因为此功能不可用），而是在*第二次*更新时发生。初始更新后，它将按预期工作。

```
function updateVersion( event ) {

    window.applicationCache.removeEventListener( 'updateready', updateVersion, false );

    if ( window.applicationCache.status == window.applicationCache.UPDATEREADY ) {
        //perhaps notify user here
        window.applicationCache.swapCache();
        window.location.reload();
    };

};

if ( window.applicationCache ) { 
    window.applicationCache.addEventListener( 'updateready', updateVersion, false ); 
}; 
```

# sql-server-2008 - 将扩展属性从 SQL Server 抓取到 DataTable

> ID：11331336
> 
> 赞同：2
> 
> 时间：2012-07-04T14:48:17.620
> 
> 标签：sql-server-2008, ado.net, extended-properties

我有一个名为的视图`PersonOverview`，它有一堆列；这是一个完全正常的视图，没有什么特别之处。

我使用该视图的列添加了一个名为的扩展属性`FlexGridHide`，其值为。`1``DatenbereichCD`

```
EXEC sys.sp_addextendedproperty 
        @name = N'FlexGridHide', 
        @value = N'1', 
        @level0type = N'SCHEMA', @level0name = dbo, 
        @level1type = N'VIEW',  @level1name = vPersonOverview,
        @level2type = N'COLUMN', @level2name = DatenbereichCD; 
```

我可以在 SQL Server 中找到该扩展属性——没问题——它就在那里。

但是，当我将视图中的数据加载到 a`DataTable`中时，我显然无法实际读出该扩展属性：

```
string sqlSelect = @"SELECT TOP 5 DatenbereichCD FROM dbo.vPersonOverview";

DataTable personUebersicht = new DataTable();

using (SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MYDB"].ConnectionString))
using (SqlCommand cmd = new SqlCommand(sqlSelect, con))
using (SqlDataAdapter dap = new SqlDataAdapter(cmd))
{
   dap.Fill(personUebersicht);
}

DataColumn datenbereichCD = personUebersicht.Columns["DatenbereichCD"];    
int extendedProps = datenbereichCD.ExtendedProperties.Count; 
```

`ExtendedProperties`连接工作得很好，查询执行得很好，按预期返回五行，列存在，一切似乎都很好——除了我在集合中没有得到任何值——`.Count`总是 0。

有任何想法吗？我能做些什么来真正**获得**这些扩展属性吗？连接字符串参数或属性上的`SqlCommand`或什么晦涩难懂的？

**更新：**对于未经训练的无知者，`Extended Properties`在 SQL Server 列和`Extended Properties`ADO.NET`DataColumn`类型上建议将那些 SQL Server 扩展属性加载到 ADO.NET 扩展属性中——但这似乎不是案例 - 嗯……

正如 Kevin 建议的那样，我最终使用了第二个查询 - 但由于我需要获取表和视图的扩展属性，并且您必须使用该函数*指定*要查找的内容`fn_listextendedproperty`，因此我选择查询`sys.extended_properties`系统目录视图我需要的信息。这是我用来从 SQL Server 获取有关扩展属性的信息的查询：

```
SELECT 
    ep.class, ep.class_desc, ep.name, ep.value,
    SchemaName = s.name,
    ObjectName = o.name,
    ColumnName = c.Name,
    ObjectType = o.type, 
    ObjectTypeDesc = o.type_desc
FROM sys.extended_properties ep
INNER JOIN sys.objects o ON ep.major_id = o.object_id
INNER JOIN sys.schemas s ON o.schema_id = s.schema_id
INNER JOIN sys.columns c ON ep.major_id = c.object_id AND ep.minor_id = c.column_id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T15:20:08.477

根据[这篇文章](http://social.msdn.microsoft.com/Forums/en/sqldataaccess/thread/9371cf9c-48a1-4fdc-89e5-d01fcf69e2c1)SQL Server 扩展属性和 ADO.NET 扩展属性不相关：

> dataColumn.ExtendedProperties 与 SQL Server 后端列的扩展属性无关。

看来您将需要求助于在[单独的查询](http://databases.aspfaq.com/schema-tutorials/schema-how-do-i-show-the-description-property-of-a-column.html)中检索扩展属性。

```
DataTable personUebersicht = new DataTable();
DataTable extendedProperties = new DataTable();

using (SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MYDB"].ConnectionString))
{
    string sqlSelect = @"SELECT TOP 5 DatenbereichCD FROM dbo.vPersonOverview";
    using (SqlCommand cmd = new SqlCommand(sqlSelect, con))
    using (SqlDataAdapter dap = new SqlDataAdapter(cmd))
    {
        dap.Fill(personUebersicht);
    }

    string sqlProperties = @"SELECT name, value FROM ::fn_listextendedproperty(null,'user','dbo','view','vPersonOverview','column','DatenbereichCD')";
    using (SqlCommand cmd = new SqlCommand(sqlProperties, con))
    using (SqlDataAdapter dap = new SqlDataAdapter(cmd))
    {
        dap.Fill(extendedProperties);
    }
}

// Test the results
foreach (DataRow row in extendedProperties.Rows)
{
    Console.WriteLine(string.Format("{0}: {1}", row["name"], row["value"]));
} 
```

# android - Android：隐藏LinearLayout onKeyDown

> ID：11331341
> 
> 赞同：2
> 
> 时间：2012-07-04T14:48:32.780
> 
> 标签：android

我有一个包含几个按钮的 LinearLayout。为了在屏幕上给用户更多（绘图）空间，我想在菜单按下时隐藏这个 LinearLayout：

```
if (keyCode == KeyEvent.KEYCODE_MENU) {

                if (showButtons) {
                    showButtons = false;
                    LinearLayout lay = (LinearLayout) this.findViewById(R.id.buttonLayout);
                    laySize = lay.getHeight();

                    go2trimsecond();
                } else {
                    showButtons = true;
                    go2trimsecond();
                } 
```

我以为我只是将高度保存在 if(showButtons) 中，将布局的 maxHeight 更改为 0 并将其更改回 if(!showButtons)，但不幸的是我想错了，因为没有 setMaxHeight。知道我应该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:57:35.150

嗨，stefple，如果您详细说明您的需求，这将是一个很好的帮助。但是我从你最近的帖子中了解到我想提出一种解决方案。

因为你有你的布局实例。

只需做lay.setVisiblity(View.GONE) 或lay.setVisiblity(View.INVISIBLE); 如果你想再次展示它，就做

放置.setVisibility(View.VISIBLE);

记住一件事 View.GONE 将释放线性布局占用的空间，而 View.INVISIBLE 将保持空间占用但只是隐藏布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:52:20.133

无需更改布局高度。由于 LinearLayout 也是一个视图，因此您可以在布局上调用[setVisibility(int)方法。](http://developer.android.com/reference/android/view/View.html#setVisibility%28int%29)

# javascript - 如何调用 jQuery 方法？

> ID：11331344
> 
> 赞同：-1
> 
> 时间：2012-07-04T14:48:46.410
> 
> 标签：javascript, jquery

例如，使用 javascript 我通常会调用这样的方法

```
<a href ="" onclick="javascriptMethod()">Link</a> 
```

并实现这样的方法

```
<script type="text/javascript">
function javascriptMethod(){
 //codes
}
</script> 
```

对于大多数 jQuery 文档的某些原因，我只能找到

```
$("").click(function(){
  //codes
}); 
```

我们不能在 jQuery 上进行 onclick 调用吗？

澄清：`$().click`由于现有的 div 数组我无法更改，我不需要为自身调用方法。我知道如何在 JavaScript 上做到这一点，而且很容易。问题是，我不能为像这样的元素调用 jQuery 方法`<img onclick="jQueryMethod" />`吗？

我需要向方法传递一个值，这是最重要的一点。由于元素在数组中，我无法确定哪个元素 [x]。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T14:49:48.100

这就是我们进行点击调用的方式。

通过其 id 访问控制并调用 click。

```
$("#IdOfClickableControl").click(); 
```

我们也可以通过触发器来实现

```
$("#IdOfClickableControl").trigger("click"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T14:53:59.130

考虑以下 HTML：

```
<a id="mylink" href="#">Link</a> 
```

你可以像这样添加一个监听器：

```
$("#mylink").click(function() {
    // Call the method you want
    javascriptMethod();

    // Prevent the default behaviour
    return false;
}); 
```

如果您不使用链接而是使用 a`span`或 a `button`（无默认行为）：

```
<span id="myelement">Click here</span> 
```

你可以简单地写：

```
$("#myelement").click(javascriptMethod); 
```

如果您有多个链接，您可以为每个链接添加一个类（即：）`callback`，然后执行以下操作：

```
$("a.callback").click(function() {
    javascriptMethod();
    return false;
}); 
```

**编辑 1：**添加了 OP 请求的方法调用。

**编辑 2：**处理多个链接

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T14:56:08.317

您不应该`onclick`直接在`HTML`源代码中定义函数，使用标识符然后使用 jQuery 附加处理程序要干净得多，例如`id`：

```
<a href="" id="mylink">Link</a> 
```

然后使用 jQuery 选择器选择它并像这样添加点击处理程序：

```
<script>
$(function() {
    $('#mylink').click(function() {
        // do stuff
    });
});
</script> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-04T15:03:11.993

`onclick`并且所有其他内联事件都是注册事件的一种古老且侵入性的方式。这就是为什么人们在编写现代 HTML/JavaScript 时不再使用它们的原因。

通过 JavaScript 注册它们而不是使用内联事件的一些优点是，您可以调用不在全局范围内的函数，并使用闭包来提供在事件函数之外定义的非全局变量。由于您没有将 JavaScript 与 HTML 混合，因此它还可以使结构更清晰。

您还有一个优势，您可以通过例如类选择器轻松地将函数绑定到许多元素：`$('.someclass').click(someFunction);`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-04T14:55:14.623

html:

```
<a href="" id="thingy">Link</a> 
```

js

```
$("#thingy").click(function(){
  // the content of your method here
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T14:51:56.683

```
$("").click(function(){
//codes
}); 
```

此方法是事件处理程序。当最终用户单击您的锚标记时，将被调用，因此您不必调用任何方法。有关 jQuery 中事件处理的更多信息，[请参阅](http://api.jquery.com/category/events/)

# php - 修复 hackish SQL where 子句

> ID：11331346
> 
> 赞同：1
> 
> 时间：2012-07-04T14:48:51.780
> 
> 标签：php, mysql, where-clause, where

我有两张桌子，`activities`和`activity_tours`。 `activities`hasMany`activity_tours`与`activities.id`>相关`activity_tours.activity_id`。我编写了以下 SQL 来选择两个表中具有两个条件之一的行。

1.  如果它有一定的`activity_tours.tour_type`OR
2.  该活动有不止一次旅行

该查询似乎有点骇人听闻。有人可以帮我提高这个查询的效率。

```
SELECT SQL_CALC_FOUND_ROWS
    activities.activity_name,
    activities.image_path,
    activity_tours.tour_type
FROM
    activities
    LEFT JOIN activity_tours ON activities.id = activity_tours.activity_id
WHERE
    (
        activity_tours.tour_type != 17 OR (
            (SELECT count(*) FROM activity_tours WHERE activity_id = activities.id) > 1)
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:56:18.257

```
SELECT a.activity_name,
    a.image_path,
    at.tour_type,
    MAX(at.tour_type != 17) AS tour_not_17,
    COUNT(*) AS tour_count
FROM activities a
INNER JOIN activity_tours at ON a.id = at.activity_id
GROUP BY a.activity_name, a.image_path
HAVING tour_not_17 OR tour_count > 1 
```

不知道如何处理该`tour_type`列；应该使用聚合，但我不知道是哪一个。也许你能做到`GROUP_CONCAT()`？

# jms - 将消息放入队列的第一条路线和第二条读取消息的路线

> ID：11331351
> 
> 赞同：2
> 
> 时间：2012-07-04T14:49:18.050
> 
> 标签：jms, apache-camel

我对 Camel 和 JMS 有疑问。

我的路线很简单：

```
 @Override
    protected RouteBuilder[] createRouteBuilders() throws Exception {
        createJmsComponent();

        RouteBuilder route1 = new RouteBuilder() {
            @Override
            public void configure() throws Exception {
                from("direct:startpoint")
                .log("TO JMS: ${body}")
                .to("jms://queue:QUEUE.NAME.OUT?replyTo=QUEUE.NAME.IN&replyToType=Exclusive")
                ;
            }
        };

        RouteBuilder route2 = new RouteBuilder() {
            @Override
            public void configure() throws Exception {
                from("jms://queue:QUEUE.NAME.IN?receiveTimeout=10000")
                .log("FROM JMS: ${body}")
                ;
            }
        };
        return new RouteBuilder[]{route1, route2};
    } 
```

在日志中我有我需要的东西：

```
2012-07-04 16:28:10,443 INFO  route1 - TO JMS: message
2012-07-04 16:28:13,477 INFO  route2 - FROM JMS: message 
```

但问题是我有异常：

```
2012-07-04 16:28:33,960 ERROR o.a.c.p.DefaultErrorHandler                        - Failed delivery for (MessageId: ID-PLWROW912268-4634-1341412084839-0-1 on ExchangeId: ID-PLWROW912268-4634-1341412084839-0-2). Exhausted after delivery attempt: 1 caught: org.apache.camel.ExchangeTimedOutException: The OUT message was not received within: 20000 millis due reply message with correlationID: ID-PLWROW912268-4634-1341412084839-0-3 not received. Exchange[Message: message]
org.apache.camel.ExchangeTimedOutException: The OUT message was not received within: 20000 millis due reply message with correlationID: ID-PLWROW912268-4634-1341412084839-0-3 not received. Exchange[Message: message]
    at org.apache.camel.component.jms.reply.ReplyManagerSupport.processReply(ReplyManagerSupport.java:126) ~[camel-jms-2.9.2.jar:2.9.2]
    at org.apache.camel.component.jms.reply.TemporaryQueueReplyHandler.onTimeout(TemporaryQueueReplyHandler.java:61) [camel-jms-2.9.2.jar:2.9.2]
    at org.apache.camel.component.jms.reply.CorrelationTimeoutMap.onEviction(CorrelationTimeoutMap.java:53) [camel-jms-2.9.2.jar:2.9.2]
    at org.apache.camel.component.jms.reply.CorrelationTimeoutMap.onEviction(CorrelationTimeoutMap.java:30) [camel-jms-2.9.2.jar:2.9.2]
    at org.apache.camel.support.DefaultTimeoutMap.purge(DefaultTimeoutMap.java:203) [camel-core-2.9.2.jar:2.9.2]
    at org.apache.camel.support.DefaultTimeoutMap.run(DefaultTimeoutMap.java:159) [camel-core-2.9.2.jar:2.9.2]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441) [na:1.6.0_23]
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317) [na:1.6.0_23]
    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150) [na:1.6.0_23]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98) [na:1.6.0_23]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180) [na:1.6.0_23]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204) [na:1.6.0_23]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [na:1.6.0_23]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [na:1.6.0_23]
    at java.lang.Thread.run(Thread.java:662) [na:1.6.0_23] 
```

如果我理解正确，现在我有两条等待响应的路线。Route2 从 Queue 读取响应，route1 没有得到响应（因为被 route2 读取），这就是我得到异常的原因。

所以我需要做些什么来得到这个场景：

```
route1 - only send message to JMS and not waiting for response. 
route2 - only read message from JMS. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T08:09:01.057

解决方案是使用 inOnly 模式和 preserveMessageQos=true 标志。

```
.inOnly("jms://queue:QUEUE.NAME.OUT" +
                            "?replyTo=QUEUE.NAME.IN" +
                            "&replyToType=Shared" +
                            "&preserveMessageQos=true") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T04:58:38.760

如果您只想让 route1 将消息发送到 route2 正在侦听的队列，则不要使用 replyTo 或单独的队列......只需这样做。

```
from("direct:startpoint").log("TO JMS: ${body}").to("jms://queue:QUEUE.NAME.IN");

from("jms://queue:QUEUE.NAME.IN").log("FROM JMS: ${body}"); 
```

# animation - 如何在动画中调用“循环”？

> ID：11331352
> 
> 赞同：0
> 
> 时间：2012-07-04T14:49:23.920
> 
> 标签：animation, css

我有这个动画：

```
#button-1
{
   -webkit-animation: leaf-rotation-1 1s linear 1 alternate 1.5s;
}

#button-2
{
   -webkit-animation: leaf-rotation-2 1s linear 1 alternate 4s;
}

#button-3
{
   -webkit-animation: leaf-rotation-3 1s linear 1 alternate 5.5s;
} 
```

你怎么看，它们是在 1.5、4 和 5.5s 执行的。那么，当最后一个（5.5）结束时，我该如何重新启动第一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:06:07.903

我想到的解决方案将要求您编写 3 个不同的动画，它们的时间安排得当，并在循环中无休止地运行它们。

**[这是这个概念的一个活生生的例子](http://jsfiddle.net/vxsFw/)**

所以第一个动画以 33% 结束，第二个动画从 33 开始到 66 结束，最后运行 66-100。这无限运行。

## CSS：

```
@-webkit-keyframes width-1 {
    0% {
        width: 100px;
    }
    17% {
        width: 500px;
    }
    33% {
        width: 100px;
    }
}
@-webkit-keyframes width-2 {
    33% {
        width: 100px;
    }
    50% {
        width: 500px;
    }
    66% {
        width: 100px;
    }
}
@-webkit-keyframes width-3 {
    66% {
        width: 100px;
    }
    83% {
        width: 500px;
    }
    100% {
        width: 100px;
    }
}
div {
    background: red;
    width: 100px;
}

#div1 {
    -webkit-animation: width-1 1s infinite linear;
}

#div2 {
    -webkit-animation: width-2 1s infinite linear;
}

#div3 {
    -webkit-animation: width-3 1s infinite linear;
} 
```

## HTML

```
<div id="div1">Div1</div>
<div id="div2">Div2</div>
<div id="div3">Div3</div> 
```

# html - 将 aa 与 div 固定在固定宽度的 div 内居中

> ID：11331354
> 
> 赞同：0
> 
> 时间：2012-07-04T14:49:34.580
> 
> 标签：html, css, layout

您好，我无法将 div 居中，`margin:0 auto;`我的 HTML 结构是这样的，

```
<div class="wrapper">  
    <div class="content">  
        <nav class="mini">  
            <!-- nav class mini content -->
        </nav>   
    </div>  
</div> 
```

CSS看起来像这样，

```
 .wrapper {  
        width:1154px;
        margin:0 auto;
    }

.content {  
     width:906px;  
     margin:0 auto;  
     text-align:center;
}

.mini {
   width: 350px;  
   margin:0 auto;
} 
```

我希望`.mini`以内心为中心，`.content`但这不是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:10:12.707

你所有的 div 都居中。唯一的问题是您的 li 向左浮动。所以让你的ul中心看起来不错。

`.mini ul {display:inline-block;}`

小提琴演示：http: [//jsfiddle.net/surendraVsingh/pYbAP/7/](http://jsfiddle.net/surendraVsingh/pYbAP/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:09:01.260

在您的小提琴中，您的 .mini div 以 .content 为中心，但您没有将 .mini 中的内容居中

您还需要将 margin:0 auto css 应用到那里的 UL 并将 text-align:center 应用到 .mini

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:10:34.640

问题是你`max-width`给`.wrapper div`. 当浏览器宽度小于 1154px 时，`.wrapper`s 宽度变为浏览器宽度。如果您使浏览器窗口足够小，则`.wrapper`s 宽度会小于其子项`.content`的宽度。如果父母比孩子小，那么, 因为变成 0 `margin: 0 auto`，所以不能做它该做的事情。`auto`

尝试将`max-width`into `width`，它会像你想要的那样工作，在任何浏览器宽度下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T15:26:23.310

因为 nav 是一个 html5 元素，所以你必须先将它显示为一个块： nav{ display: block; 实际上，任何默认不显示为块的元素都不能通过使用 margin 属性来居中。大多数框架已经为您做到了，但您始终可以使用[Eric Meyer 的 CSS Reset](http://meyerweb.com/eric/tools/css/reset/)中的这个 css 重置代码。

# java - p:orderlist 和会话范围的支持 bean 的问题

> ID：11331355
> 
> 赞同：0
> 
> 时间：2012-07-04T14:49:35.053
> 
> 标签：java, jsf, primefaces

我有一个名为 MyController 的会话范围托管 bean。它引用了一个名为 MyModel 的 POJO。MyModel 包含我绑定到 ap:orderlist 的一些其他 POJO 的 ArrayList，如下所示：

```
 <p:orderList value="#{myController.myModel.list}" var="item" itemValue="#{item}" converter="#{itemConverter}"">
                    <f:facet name="caption">some title</f:facet>

                    <p:column>
                        #{item.text}
                    </p:column>
                </p:orderList> 
```

我的转换器如下所示：

```
@ManagedBean
@RequestScoped
public class ItemConverter implements Converter {

    @ManagedProperty(value="#{myController.myModel.list}")
    private List<Item> list;

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        Iterator i = list.iterator();
        int id = Integer.parseInt(value);

        while (i.hasNext()) {
            Object currentObject = i.next();
            if (((Item) currentObject).getId() == id) {
                return currentObject;
            }
        }

        return null;
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        return Integer.toString(((Item) value).getId());
    }

} 
```

我在 myController 中构建了一个接口和方法来动态地将项目添加到 orderlist。当我第一次添加一个项目时，它似乎工作正常，列表已更新并显示新项目。但是，当我添加第二个项目时，包含列表的对话框会消失，即使从 JavaScript 控制台调用其 show() 方法也无法显示。通过调试，我发现在添加第二项时，我的列表已成为 String 的 ArrayList 而不是声明和定义的 Item 的 ArrayList。它包含将由我的转换器的 getAsString() 方法为我添加到列表中的第一项返回的字符串。自然，添加第二个项目失败，因为我试图将一个项目添加到字符串列表。

这怎么可能？我认为 Java 永远不会允许 List of Item 被 List of String 替换。甚至可以使用 orderlist 而不用它自己的字符串列表覆盖源列表吗？转换器的工作不是首先将这些字符串转换回对象吗？是否可以从项目列表在服务器端构造 orderlist，然后使用绑定属性和值属性映射到另一个字符串列表？如果可能的话，我将如何在服务器端构建订单列表？

编辑：修复了在 getAsObject() 中双重调用 i.next() 的问题，但仍获得字符串列表。此外，尝试手动实例化转换器并`context.getApplication().evaluateExpressionGet(context, "#{itemConverter}", itemConverter.class);`返回 null。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:56:05.280

我的问题的原因是错误的导入。我导入了 javax.annotations.ManagedBean 而不是导入 javax.faces.bean.ManagedBean。因此，如果有人通过谷歌搜索他们的问题的解决方案最终进入此页面，请先检查您的导入。

# wpf - 如何将 AutoSeriesGenerator 与 MVVM Visiblox 一起使用

> ID：11331359
> 
> 赞同：0
> 
> 时间：2012-07-04T14:49:51.877
> 
> 标签：wpf, visifire, visiblox

我正在关注本教程中的示例：但不幸的是，他们的文档非常模糊，我无法让任何东西正常工作。

[http://www.visiblox.com/blog/posts/2011/06/13/data-binding-with-visiblox-charts/#asg](http://www.visiblox.com/blog/posts/2011/06/13/data-binding-with-visiblox-charts/#asg)

我想做的是使用 AutoSeriesGenerator 自动为我创建一个新系列，并将该系列添加到主 Y 轴。我希望你们中的一些人对 Visiblox 有很好的体验。以下是我认为他们的示例应该用 C# 表示的方式：

```
 <local:WeatherStationsData x:Key="dataCollection">
            <local:WeatherStationTemperature>
                <local:HourTemperature Hour="1" Temperature="10" />
                <local:HourTemperature Hour="2" Temperature="14" />
            </local:WeatherStationTemperature>
            <local:WeatherStationTemperature>
                <local:HourTemperature Hour="1" Temperature="20" />
                <local:HourTemperature Hour="2" Temperature="19" />
            </local:WeatherStationTemperature>
        </local:WeatherStationsData>
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot">
      <charts:Chart x:Name="Chart"
                    charts:AutoSeriesGenerator.XValuePath="Hour"
                    charts:AutoSeriesGenerator.YValuePath="Temperature"
                    charts:AutoSeriesGenerator.ChartSeriesProvider="LineSeries"
                    charts:AutoSeriesGenerator.ItemsSource="{StaticResource dataCollection}">
                    <charts:Chart.XAxis>
                <charts:LinearAxis />
            </charts:Chart.XAxis>
            <charts:Chart.YAxis>
                <charts:LinearAxis />
            </charts:Chart.YAxis>
        </charts:Chart>

  //X and Y points
   public class ChartDataPoint
    {
        public DateTime X { get; set; }
        public float Y { get; set; }
        public ChartDataPoint(DateTime X, float Y)
        {
            this.X = X;
            this.Y = Y;
        }
    }

  //represents a dataseries - collection of datapoints
   public class DataPointsCollection : ObservableCollection<ChartDataPoint>
    {
    }
 //the "dataseries"
 public class DataSeries : ObservableCollection<DataPointsCollection>
    {
    }

But it isn't working as expected.

       public IChartSeries CreateSeries(object targetParent, object boundObject)
            {
                LineSeries lineSeries = null;

                if (targetParent is LineSeries)
                {
                    lineSeries = new LineSeries();
                    lineSeries.YAxis = new LinearAxis();
                    AxisCollection.Add(lineSeries.YAxis);
                }
                return lineSeries;
            } 
```

他们的文档说 targetObject 是 IChartSeries 所包裹的业务对象。但是我得到的是一个集合而不是对象！并且该方法总是被多次调用，这意味着它会生成很多 Lineseries。我已经尝试过 CollectionChanged 事件，这是同样的问题。它不会被调用一次，而是被多次调用，这对我来说没有意义。

我该如何解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:44:02.470

这很尴尬，因为我整天都在为此苦苦挣扎。当我发布一个问题然后设法在 :O 后几分钟解决它时讨厌它。

我决定试试这个，它奏效了——非常慢！:(

在您后面的代码中：

```
private void Series_CollectionChanged(object sender,
         NotifyCollectionChangedEventArgs e)
{
        if(e.Action == NotifyCollectionChangedAction.Add)
        {
            var lineSeries = (LineSeries) MultiChart.Series[e.NewStartingIndex];
            if (!collection.Contains(lineSeries.YAxis))
            {

                lineSeries.YAxis = new LinearAxis();
                collection.Add(lineSeries.YAxis);   
            }
        }
        else if(e.Action == NotifyCollectionChangedAction.Reset )
        {
            collection.Clear();
        }
} 
```

在您的 CustomLineSeries 或其他任何内容中：

```
 public IChartSeries CreateSeries(object targetParent, object boundObject)
 {
   if (boundObject is DataPointsCollection)
   {
       LineSeries lineSeries = new LineSeries();
       return lineSeries;
   }
  return null;
} 
```

我应该确保 boundobject 是一个业务对象并且 ta da！

# php - 无法在 facebook 画布应用程序中获取 url 参数？

> ID：11331364
> 
> 赞同：2
> 
> 时间：2012-07-04T14:50:10.173
> 
> 标签：php, facebook

我正在开发一个 facebook 画布应用程序当我单击链接时，它必须打印 testid 并查看根据 index.php 上的代码从 url 获取的变量

[https://apps.facebook.com/gayriciddi/](https://apps.facebook.com/gayriciddi/)

索引.php：

```
<?php
include ('config.php');
include ('db_fns.php');
header('Content-type: text/html; charset=UTF-8'); 

print_r($fbme);
$access_token = $facebook->getAccessToken();

//records users to database
create_user($fbme, $access_token); 

$view = empty($_GET['view']) ? 'home' : $_GET['view'];

$controller = 'page';

echo '<br />'.$view;

$testid = $_REQUEST['testid'];

echo '<br />'.$testid.'<br />';

switch($view){

    case 'home':
        $testler = select_tests();   
    break;

    case 'acilis':

    break;

    case 'sayfa':

    break;

    case 'kapanis':

    break;
}

//includes $view.php  $view is home, acilis, sayfa or kapanis
include(WEBSITE_ROOT.'/views/'.$controller.'.php');
?> 
```

主页.php：

```
 <table width="601" border="0">
 <?php foreach($testler as $key => $test){?>
  <tr>
    <td width="53">&nbsp;</td>
    <td width="420"><a href="<?=FB_BASE_URL?>index.php?view=acilis&testid=<?=$test['id']?>" target="_top"><?php echo $test['ad'];?></a></td>
    <td width="50">&nbsp;</td>
    <td width="50">&nbsp;</td>
  </tr>
 <?php } ?>
</table> 
```

如果您查看我在顶部给出的链接，则定义了所有变量。当我单击链接时，它必须根据 index.php 上的代码打印 testid 并查看从 url 获取的变量

```
$view = empty($_GET['view']) ? 'home' : $_GET['view'];

$controller = 'page';

echo '<br />'.$view;

$testid = $_REQUEST['testid']; 
```

但事实并非如此。也许它有非常简单的解决方案，但我找不到它。

另一方面，当我在原始 url (http://www.olmasigereken.com/gayriciddi/) 中做同样的事情时，它会按预期打印 $view 和 $testid。

# sql-server - 无法从 IBM Websphere Application Server 定制控制台连接到 SQL Server 2008

> ID：11331367
> 
> 赞同：1
> 
> 时间：2012-07-04T14:50:21.607
> 
> 标签：sql-server, websphere, application-server

我正在尝试在带有 SQL Server 2008 的 Windows 2008 服务器中安装 IBM Websphere Operational Decision Management 8。我正在安装一个明确的 Websphere Application Server 8 实例。

当我尝试使用 WODM 8 扩充清晰的 Websphere Application Server 配置文件时，在数据库步骤中，我无法连接到我的 SQL Server 2008。Websphere 自定义控制台显示以下消息：

" 由于异常，数据库验证失败。

com.microsoft.sqlserver.jdbc.SQLServerDriver "

我正在使用 Microsoft JDBC Driver 4.0 for SQL Server。

有人可以帮我吗？

如果需要更多信息我可以提供。

谢！

# css - CSS3：保持 :after 和 :before 元素与元素的高度对齐

> ID：11331368
> 
> 赞同：3
> 
> 时间：2012-07-04T14:50:29.587
> 
> 标签：css, pseudo-element

我有一个带有标题设计的大头缓存：

![在此处输入图像描述](../Images/88c4179d115795cd0591fb45ba80a92c.png)

这里的演示：http: [//jsfiddle.net/uGECm/](http://jsfiddle.net/uGECm/)

这个想法是有一个“包裹”元素的灰色标签；但是，标签的高度是未知的（它可能因内容而异） - 我的问题是，如果标签改变大小，那么像三角形一样的 2 个伪元素会得到错误的位置，这是因为它们的位置是相对的。

任何的想法？

**ps：我正在寻找无 js 和无图像的解决方案。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T14:54:10.660

```
section h2:before, section h2:after {
    width: 0;
    height: 0;
    display: block;
    position: absolute;
    bottom: 0;
    margin: 0 0 -10px 0;
}

section h2:before {
    content: '\0000a0';
    border-left: 10px solid transparent;
    border-top: 10px solid #323232;
}

section h2:after {
    content: '\0000a0';
    border-right: 10px solid transparent;
    border-top: 10px solid #323232;
    right: 0;
}​ 
```

这是一个带有一些进一步 CSS 格式的叉子：http: [//jsfiddle.net/bqXeJ/](http://jsfiddle.net/bqXeJ/)

值得看一下[我在这里写](http://jezenthomas.co.uk/a-better-css-style-guide/)的风格指南，而且，如果你使用 Lea Verou 的[prefixfree.js](http://leaverou.github.com/prefixfree/)，你可以跳过为每个浏览器供应商编写声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:54:53.450

您可以绝对定位伪元素。由于`section h2`is `position: relative`，将它们设置为`top: 100%`将使它们保持在底部，无论父级的大小如何：

```
section h2:before, section h2:after {
  position: absolute;
  top: 100%;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T15:05:40.153

*   :before 和 :after 使用绝对位置而不是相对位置
*   适用`bottom:-10px;`于两者
*   分别应用`left:0;`和`right:0;`。
*   取下浮子。浮动对具有绝对位置的元素没有影响。

更新[了 jsfiddle 演示](http://jsfiddle.net/Matt_Coughlin/uGECm/5/)。

```
section h2:before,
section h2:after {
    content: '\0000a0';
    width: 0;
    height: 0;
    position: absolute;    
    bottom: -10px;
    display: block;
}
section h2:before {
    border-left: 10px solid transparent;
    border-top: 10px solid #323232;
    left: 0;
}
section h2:after {
    border-right: 10px solid transparent;
    border-top: 10px solid #323232;
    right: 0;
} 
```

# iphone - purgeIdleCellConnections 仅在慢速连接时

> ID：11331371
> 
> 赞同：11
> 
> 时间：2012-07-04T14:50:36.447
> 
> 标签：iphone, memory-management, ios6, nsurlconnection, nsurl

我面临的问题仅出现在慢速连接 (Gprs) 上。我正在使用 NSURLConnection 发送数据，在得到响应后：

```
purgeIdleCellConnections: found one to purge conn = 0x5e738e0 
```

我在互联网上搜索，但找不到可以帮助我的东西。有任何想法吗 ？

我将再次检查我的内存管理，因为它似乎来自内存错误，但如何处理它是另一回事。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:46:50.630

由于顺序调用`NSURLConnection sendSynchronousRequest`方法，我遇到了相同的消息。就我而言，第一个调用正常执行，但第二个调用是`purgeIdleCellConnections: found one to purge conn`. 您的代码可能与我的行为相同。

# objective-c - 内存管理 静态分析器中的死存储

> ID：11331373
> 
> 赞同：0
> 
> 时间：2012-07-04T14:50:37.517
> 
> 标签：objective-c, ios

我在我的应用程序中使用了静态分析器，我有一些警告（错误），我不知道如何避免主题，警告是：

```
Dead store .... 
```

代码行是：

```
NSArray *listHighlights = [NSArray array];
 listHighlights = [jsonParser objectWithString:highlightText error:&error];
.... 
```

我认为我可以这样做，但是对象`listHighlights`没有分配？？

```
NSArray *listHighlights = [jsonParser objectWithString:highlightText error:&error]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:04:24.897

这个...

```
NSArray *listHighlights = [NSArray array]; 
```

...使您的变量指向一个自动释放的数组，然后您立即用从...返回的任何内容覆盖该对象的地址`objectWithString:`...大概是**它**创建的另一个数组。由于自动释放，它实际上不是泄漏，但肯定是浪费精力。

# generics - 泛型参数的信息丢失

> ID：11331374
> 
> 赞同：3
> 
> 时间：2012-07-04T14:50:40.033
> 
> 标签：generics, ada

泛型参数的声明不够详尽，无法给出类型关系（子类型），并且这些信息只是丢失了......例如：

```
-- generic_p.ads
generic
   type Index_Range_Type is range <>;
   type Count_Range_Type is range <>;
procedure Generic_P (I : Index_Range_Type, C : Count_Range_Type);

-- generic_p.adb
procedure Generic_P (I : Index_Range_Type, C : Count_Range_Type) is
begin
   if I = C then -- oops : cannot compare different types...
     -- ...
   end if;
end Generic_P;

-- main.adb
procedure Main is
   type Index_Range_Type is 0 .. 512;
   subtype Count_Range_Type is Index_Range_Type range 1 .. Index_Range_Type'Last;

   procedure P is new Generic_P (Index_Range_Type, Count_Range_Type);

   I : Index_Range_Type := 33;
   C : Count_Range_Type := 42;
begin
   if I = C then -- Ok : Count_Range is a subset of Index_Range, they can be compared
      -- ...
   end if;
   P (I, C);
end Main; 
```

这为 generic_p.adb 中的比较提供了以下错误：`invalid operand types [...] left operand has type "Index_Range_Type" [...] right operand has "type Count_Range_Type"`。子类型在通用过程中不可见。

有没有办法指定泛型参数之间的关系？

# 更多信息

我真的需要`Count_Range_Type`作为程序的一个参数才能添加另一个需要的参数`Count_Range_Type`。

```
-- generic_p.ads
generic
   type Index_Range_Type is range <>;
   type Count_Range_Type is range <>;
   with procedure F (C : Count_Range_Type);
procedure Generic_P (I : Index_Range_Type, C : Count_Range_Type); 
```

我不能直接使用类型，我需要 P 绝对通用和独立。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:50:29.603

这解决了原始问题的“更多信息”部分，即需要使用包含作为实例化类型的子类型的参数的过程来实例化泛型。

本质上，使用泛型包来设置子类型，然后泛型子包提供所需的过程（使用泛型正式过程实例化）。诚然，这是一个相当复杂的问题解决方案。所以我们开始：

创建子类型的“父”泛型：

```
generic
   type Index_Range_Type is range <>;
package Generic_Provider is
   pragma Assert(Index_Range_Type'First = 0);
   subtype Count_Range_Type is Index_Range_Type range 1 .. Index_Range_Type'last;

end Generic_Provider; 
```

所有这一切都是声明子类型，它不需要主体（实际上主体是非法的）。

这是我们的程序提供者的规范，它使用了客户提供的正式程序。

```
generic
   with procedure F(I : Index_Range_Type;
                    C : Count_Range_Type);

package Generic_Provider.Services is

   procedure P (I : Index_Range_Type; C : Count_Range_Type);

end Generic_Provider.Services; 
```

只是为了咧嘴笑，它的主体，它验证可以调用正式的过程并且子类型比较是有效的：

```
package body Generic_Provider.Services is

   procedure P (I : Index_Range_Type; C : Count_Range_Type) is
   begin
      if I = C then
         F(I, C);
      end if;
   end P;

end Generic_Provider.Services; 
```

最后，实例化主程序：

```
with Generic_Provider.Services;

procedure Main is
   type Index_Range_Type is range 0 .. 512;
   package Type_Provider is new Generic_Provider (Index_Range_Type);
   subtype Count_Range_Type is Type_Provider.Count_Range_Type;

   procedure My_F (I : Index_Range_Type;
                   C : Count_Range_Type) is
   begin
      null;
   end My_F;

   package P_Provider is new Type_Provider.Services(My_F);

   I : Index_Range_Type := 33;
   C : Count_Range_Type := 42;
begin
   if I = C then
      null;
   end if;
   P_Provider.P (I, C);
end Main; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T02:43:56.923

您还可以将 with function "=" (Left : Index_Range_Type; Right : Count_Range_Type) Return boolean 放入泛型的标头中...强制用户提供适当的 equals 函数。

这条路线是必要的，因为就通用头文件现在而言，编译器可能不会假设这两种类型是相关的；从信息中没有给出的是签名。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-04T16:36:23.793

在我的脑海中，也许颠倒了谁宣布什么可以满足你的需要。考虑让泛型定义子类型：

```
generic
   type Index_Range_Type is range <>;
package Generic_Provider is

   pragma Assert(Index_Range_Type'First = 0);
   subtype Count_Range_Type is Index_Range_Type range 1 .. Index_Range_Type'last;

   procedure P (I : Index_Range_Type; C : Count_Range_Type);

end Generic_Provider; 
```

在身体里：

```
package body Generic_Provider is

   procedure P (I : Index_Range_Type; C : Count_Range_Type) is
   begin
      if I = C then -- No problem comparing now...
            -- ...
         null;
      end if;
   end P;
end Generic_Provider; 
```

然后在您的实例化单元中：

```
with Generic_Provider;

procedure Main is
   type Index_Range_Type is range 0 .. 512;
   package P_Provider is new Generic_Provider (Index_Range_Type);

   subtype Count_Range_Type is P_provider.Count_Range_Type;

   I : Index_Range_Type := 33;
   C : Count_Range_Type := 42;
begin
   if I = C then -- Ok : Count_Range is a subset of Index_Range, and all is good.
         -- ...
      null;
   end if;
   P_Provider.P (I, C);
end Main; 
```

这类似于[System.Address_To_Access_Conversions](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-13-7-2.html)采用的方法，其中泛型使用“基础”类型进行实例化，然后泛型提供“增强功能”——在该包中，它是一种访问类型，在此它将是子类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T09:14:36.280

您可以使用完整类型而不是子类型：

```
-- generic_p.ads
generic
   type Index_Range_Type is range <>;
   type Count_Range_Type is new Index_Range_Type;
procedure Generic_P (I : Index_Range_Type; C : Count_Range_Type);

-- generic_p.adb
procedure Generic_P (I : Index_Range_Type; C : Count_Range_Type) is
begin
   -- Neccessary conversion
   if I = Index_Range_Type (C) then
     -- ...
   end if;
end Generic_P;

-- main.adb
procedure Main is
   type Index_Range_Type is 0 .. 512;
   type Count_Range_Type is new Index_Range_Type range 1 .. Index_Range_Type'Last;

   procedure P is new Generic_P (Index_Range_Type, Count_Range_Type);

   I : Index_Range_Type := 33;
   C : Count_Range_Type := 42;
begin
   if I = Index_Range_Type (C) then
      -- ...
   end if;
   P (I, C);
end Main; 
```

也可以只`C`转换为`Index_Range_Type`而不指定节中类型之间的关系`generic`。这样，您仍然可以使用您的子类型，但是任何`Count_Range_Type`不能强制转换为的通用过程实例`Index_Range_Type`都会引发异常。

我建议阅读[Ada 95 Quality and Style Guide, 8.2.4](http://www.adaic.org/resources/add_content/docs/95style/html/sec_8/8-2-4.html)了解更多关于使用泛型子类型的信息。

# scope - 如何在全局范围内创建 Freemarker 函数？

> ID：11331376
> 
> 赞同：2
> 
> 时间：2012-07-04T14:50:42.700
> 
> 标签：scope, freemarker

如何创建全局可用的函数？

现在，应用程序的结构如下：

*   每种请求的*不同*模板（例如，一本书、作者或出版商的不同模板），例如：
*   这些模板中的每一个都使用 page.ftl 中宏中的常见元素进行装饰，例如：

```
[#ftl]
[#macro decorate]
<html>
  <head>
  <!-- some stuff here -->
  </head>
  <body>
    <header><!-- more stuff here --></header>
    <div id="main-content">[#nested /]</div>
    <footer><!-- more stuff here --></footer>
  </body>
</html>
[/#macro] 
```

所以， book.ftl 看起来像：

```
[#ftl]
[#include page.ftl p]
[@p.decorate]
<h1>Book: The Bible</h1>
<dl>
  <dt>Author:</dt>
  <dd>God</dd>
</dl>

[#-- HERE'S THE IMPORTANT BIT --]
[@myFunctionHere('The Bible') /]

[#-- I ALSO NEED TO BE ABLE TO CALL myFunction IN INCLUDED PAGES TOO --]
[#import "_partial.ftl" /]

[/@p.decorate] 
```

我想创建一个全局函数，该函数将被定义和包含一次并且随处可用（在 book.ftl 和其他人中，以及它碰巧导入/包含的任何模板）。

我将如何解决这个问题，最好没有它自己的命名空间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T15:23:55.877

只是为了确保清楚：`#include`-d 模板与包含模板共享名称空间，所以如果你想要，就不要使用`#import`. 关键`#import`在于模板不共享名称空间。如果您想要这些单独的名称空间，但又想共享*一些*宏/函数，那么模板仍然可以`#import`相互关联。

如果你真的想让一些函数/宏成为全局的，那么在你定义它们之后，你可以像这样将它们复制到全局命名空间中：

```
[#macro myMacro]
   ...
[/#macro]
[#global myMacro = myMacro] 
```

在此之后，您可以`[@myMacro /]`在任何地方发布。

# python - 在 Python 中实现标准 __new__ 的正确方法

> ID：11331378
> 
> 赞同：3
> 
> 时间：2012-07-04T14:50:49.803
> 
> 标签：python

在 Python中实现标准行为的正确方法是什么，`__new__`以便不会破坏任何功能？

我用了

```
class Test:
    def __new__(cls, *args, **kwargs):
        return object.__new__(cls, *args, **kwargs)

t=Test() 
```

在某些 Python 版本上会引发 DepreciationWarnings。在互联网上，我看到了一些带有`super()`或带有`type()`. 有什么区别，哪个是首选？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T15:29:25.690

你应该写

```
return super(Test, cls).__new__(cls, *args, **kwargs) 
```

这是[文档推荐的](http://docs.python.org/dev/reference/datamodel.html#object.__new__)（[对于 2.x 也是如此](http://docs.python.org/reference/datamodel.html#object.__new__)）。

使用的原因`super`是一如既往地处理继承树线性化；你不确定合适的超类是`object`什么，所以你应该总是使用`super`.

# database - 无法连接到数据库。详情请参考sugarcrm.log

> ID：11331384
> 
> 赞同：0
> 
> 时间：2012-07-04T14:51:09.553
> 
> 标签：database, connection, sugarcrm

我在安装 SugarCRM 6.5 时遇到问题，我收到以下消息：

> 无法连接到数据库。详情请参考sugarcrm.log

当我检查日志时，我看到以下语句：

> 2012 年 7 月 4 日 16:09:06 [18887][-none-][FATAL] 无法以 sowieso 身份连接到数据库服务器 localhost。端口：用户 'sowieso'@'localhost' 拒绝访问数据库 'my_database_name'

我在我的共享主机包上安装了它，但它不起作用。

我的数据库凭据（用户名和密码）是正确的。

请帮助确定问题？在本地主机上一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T02:05:03.157

在全新安装中，“无法连接到数据库”通常是权限不正确的结果。

我们成熟的系统已经多次产生这个错误。重新启动 sugarcrm 服务器可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-14T03:03:06.263

这是因为您的数据库服务在 fsck 检查/或启动时启动，可能无法访问相应的数据文件。等待一段时间并重新启动您的数据库服务，这将修复它。

# playn - 在运行时将图像保存在资源文件夹下

> ID：11331385
> 
> 赞同：1
> 
> 时间：2012-07-04T14:51:18.913
> 
> 标签：playn

我从网上加载了一张图像，并使用 ImageIO.read()、ImageIO.write() 方法将其保存为图像文件。该文件根据运行应用程序的平台保存在默认位置（对于 Android，它位于主根目录“/”下）。现在我需要将此文件移动到资源目录中，以便我可以使用 assets().getImage() 方法加载图像。

但我还没有找到任何方法来做到这一点。

有没有办法在playN运行时将文件（任何格式）保存在资源目录下？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:50:55.893

不，不是以独立于平台或可移植的方式，在开发期间或在特定平台上可能是可能的。

资源目录通常嵌入在只读 jar 存档或与之等效的平台中。一般来说，资源是只读的，因此没有平台独立的方式来写入该文件夹。

Java 平台将资源嵌入到 jar 文件中，据我所知，在读取 jar 的同时动态添加到 jar 并不容易。

HTML 平台通常位于 Web 服务器上，并且大多数 Web 服务器默认情况下不允许您写入任何文件夹。通过适当的配置，这可能会被绕过，但同样不容易。

# api - API 网关如何工作？

> ID：11331386
> 
> 赞同：41
> 
> 时间：2012-07-04T14:51:19.540
> 
> 标签：api, gateways

API 网关如何工作？API 网关的典型组件有哪些？是否有关于他们如何管理安全性、呼叫记录和治理的通用标准？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-07-04T21:58:13.200

这是一个非常广泛的问题，因为有很多不同类型的网关（和管理解决方案）。从最广泛的意义上讲，网关是您的 Web 堆栈（由您或第三方托管）中某处的过滤器，它以某种方式过滤您的 API 流量。一些过滤可能会发生：

*   如果您在 CDN 到达您的服务器之前使用它，则在 CDN 中。
*   在您重定向流量的第三方托管的代理中。
*   在您自己的云或本地基础架构中运行代理软件（第三方、开源或内部）的专用机器中。
*   在将流量用于主要处理之前，在应用程序堆栈的特定部分内。

通常，网关可以提供的功能类型可能包括：访问控制（过滤流量，以便只有经过身份验证/授权的流量通过）、速率限制（限制 API 的每个客户端可以发送多少流量）、分析/指标捕获和日志记录（跟踪 API 上发生的事情）、安全过滤（检查传入消息的内容是否存在攻击、重定向/流量路由（根据发送者或请求将流量发送到您自己的基础设施中的不同端点）。

网关通常作为一组模块和过滤器工作，在流量高速流经时处理流量，您通常可以启用您需要的那些模块/过滤器并控制它们的参数。显然有很多不同的方式来实际执行 + 各种供应商和开源系统可供选择。

因为我为 3scale 工作，它提供商业和开源解决方案，所以我会尝试中立地写这篇文章，但我鼓励您查看各种选项并得出自己的结论！您的主要选择是：

*   [来自Apigee](http://www.apigee.com)和 [Layer7](http://www.layer7.com)等供应商的本地专有网关- 这些通常是您在数据中心本地安装的硬件或软件设备。
*   云托管网关，来自[Mashery](http://www.mashery.com)、Apigee 和[WSO2 API Cloud](http://wso2.com/cloud/api-cloud)等供应商，它们有效地将 API 流量通过其服务器重定向以运行。
*   插件/代理架构，如[3scale （我为之工作），它提供的软件模块可以在应用程序内部部署，在](http://www.3scale.net)[Varnish](http://www.varnish-cache.org)等开源代理网关内部部署，也可以连接到 CDN。
*   [APIAXLE](http://www.apiaxle.com)和[WSO2](http://wso2.com/products/api-manager/)等开源解决方案可以部署在本地或云端。

不同的方法工作方式不同，这取决于您的目标。在 3scale，我们显然对我们的方法有偏见，因为它允许您在堆栈中的几乎任何位置插入过滤代理 - 但毫无疑问，每个供应商都会有他们的看法！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-02-12T10:41:36.057

API Gateway 的概念（对我而言）通过类比更容易理解。如果你想一想**办公楼前面的接待台**，它基本上可以路由电话，阻止不速之客，并确保包裹到达正确的地方。

这正是 API 网关在分布式应用程序中的作用。它接受请求并将它们重定向到正确的服务。放入图像中，这就是它的外观。

![什么是 API 网关？](../Images/02b3a65a1ab5bb903e84592f2978a73d.png)

基本上，它是您的微服务和不同客户端请求（浏览器、应用程序等）之间的前台。至于它们是如何工作的，有哪些组件等等，这完全取决于实现和需求。一些 API 网关处理身份验证和授权，其他处理和验证输入数据，或转换响应。有些提供监控信息，有些则提供所有信息。

如果您正在寻找更多技术响应，Steve 提供了有关构成此类层的不同组件的详细信息。

# c# - 从数组到数据表

> ID：11331388
> 
> 赞同：11
> 
> 时间：2012-07-04T14:51:25.817
> 
> 标签：c#, asp.net

好的，我现在假设很简单，你有一个多维数组，我尝试使用以下代码填充我的数据表：

```
System.Data.DataTable _myDataTable =new System.Data.DataTable();    
for (int j=0; j < ele; j++)
{       
        _myDataTable.Columns.Add();   

        for (int i = 0; i < caract+1; i++)
        {
            row[i]=(datar[j,i].ToString());

        }
        _myDataTable.Rows.Add(row);

} 
```

我的数组名称是`datar`但我收到的错误：

```
 System.IndexOutOfRangeException: cant find column 1. 
```

我究竟做错了什么？顺便说一句：我使用的是 C#、asp.net，而不是 Visual Studio。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-04T15:39:03.723

**正如chiffre**所指出的，您实际上有 3 个问题：您必须先添加所有列，然后才能开始添加行，并且您必须先创建一个`DataRow`，然后才能将其添加到您的`DataTable`. 您的第三个问题是您的行维计数器`caract+1`，它将产生一个 IndexOutOfRange 异常。

```
DataTable _myDataTable = new DataTable();

// create columns
for (int i = 0; i < ele; i++)
{
    _myDataTable.Columns.Add();
}

for (int j = 0; j < caract; j++)
{
    // create a DataRow using .NewRow()
    DataRow row = _myDataTable.NewRow();

    // iterate over all columns to fill the row
    for (int i = 0; i < ele; i++)
    {
        row[i] = datar[i, j];
    }

    // add the current row to the DataTable
    _myDataTable.Rows.Add(row);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-19T07:56:38.717

扩展方法怎么样

```
static class HappyExtEnding
{
    public static DataTable ToDataTable<T>(this T [] students)
    {
        if (students == null || students.Length == 0) return null;

        DataTable table = new DataTable();
        var student_tmp = students[0];
        table.Columns.AddRange(student_tmp.GetType().GetFields().Select(field => new DataColumn(field.Name, field.FieldType)).ToArray());
        int fieldCount = student_tmp.GetType().GetFields().Count();

        students.All(student =>
        {
            table.Rows.Add(Enumerable.Range(0, fieldCount).Select(index => student.GetType().GetFields()[index].GetValue(student)).ToArray());
            return true;
        });

        return table;
    }
} 
```

用法

```
Student[] students = {
     new Student { Id = 1, Name = "Joe Rattz", Address = "Sriram Apartments" },
     new Student { Id = 6, Name = "Ulyses Hutchens", Address = "Sriram Apartments" },
     new Student { Id = 19, Name = "Bob Tanko", Address = "Sriram Apartments" },
     new Student { Id = 45, Name = "Erin Doutensal", Address = "Sriram Apartments" },
     new Student { Id = 1, Name = "Joe Rattz", Address = "Sriram Apartments" },
     new Student { Id = 12, Name = "Bob Mapplethorpe", Address = "Sriram Apartments" },
     new Student { Id = 17, Name = "Anthony Adams", Address = "Sriram Apartments" },
     new Student { Id = 32, Name = "Dignan Stephens Mark", Address = "Sriram Apartments" },
     new Student { Id = 1232, Name = "Dignan Stephens", Address = "Sriram Apartments Henry Labamba Beligi" },
     new Student { Id = 132, Name = "Neha Dhupia", Address = "Sriram Apartments 123456" },
     new Student { Id = 132, Name = "", Address = "Sriram Apartments 123456" },
     new Student { Id = 133, Name = "", Address = "Sriram Apartments 123456" },
     new Student { Id = 134, Name = "Neha Dhupia", Address = "" },
     new Student { Id = 134, Name = "Shradha Kapoor", Address = "Mumbai" }
 };

 //ParallelQuery<int>

 DataTable dtTmp = students.ToDataTable() ; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T15:45:28.613

一些问题：

1.  您的代码不添加任何列
2.  您的代码不添加任何行

一步一步进行。

1.  添加列。

    ```
    //using System.Data
    DataTable _myDataTable = new DataTable();
    _myDataTable.Columns.Add(new DataColumn("Field_1"));
    _myDataTable.Columns.Add(new DataColumn("Field_2"));
    //...
    _myDataTable.Columns.Add(new DataColumn("Field_Ele")); 
    ```

2.  添加行。您需要从 _myDataTable 创建一个新的 Datarow，用数据填充它，将其添加到表中：

    ```
    //assuming your data are stored in datar[,]
    String[,] datar = new String[max_i, max_j];
    for (int i = 0; i < ele; i++)
    {
        DataRow r = _myDataTable.NewRow();
        for (int j = 0; j < caract; j++)
        {
            //mind casting issues
            r[j] = datar[i, j];
        }
        _myDataTable.rows.add(r);
    } 
    ```

有关详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/system.data.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-15T18:03:32.413

```
public static DataSet MultidimensionalArrayToDataSet(string[,] input)
{
    var dataSet = new DataSet();
    var dataTable = dataSet.Tables.Add();
    var iFila = input.GetLongLength(0);
    var iCol = input.GetLongLength(1);

    //Fila
    for (var f = 1; f < iFila; f++)
    {
        var row = dataTable.Rows.Add();
        //Columna
        for (var c = 0; c < iCol; c++)
        {
            if (f == 1) dataTable.Columns.Add(input[0, c]);
            row[c] = input[f, c];
        }
    }
    return dataSet;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-22T23:40:08.227

如果您有一个数组，其中第一行具有 DataTable 列名，则可以使用。

```
 public static System.Data.DataTable ArrayToDataTable(Array array, bool headerQ=true)
    {
        if (array == null || array.GetLength(1) == 0 || array.GetLength(0) == 0) return null;
        System.Data.DataTable dt = new System.Data.DataTable();
        int dataRowStart = headerQ ? 1 : 0;

        // create columns
        for (int i = 1; i <= array.GetLength(1); i++)
        {
            var column = new DataColumn();
            string value = array.GetValue(1, i) is System.String
                ? array.GetValue(1, i).ToString() : "Column" + i.ToString();

            column.ColumnName = value;
            dt.Columns.Add(column);
        }
        if (array.GetLength(0) == dataRowStart) return dt;  //array has no data

        //Note:  the array is 1-indexed (not 0-indexed)
        for (int i = dataRowStart + 1; i <= array.GetLength(0); i++)
        {
            // create a DataRow using .NewRow()
            DataRow row = dt.NewRow();

            // iterate over all columns to fill the row
            for (int j = 1; j <= array.GetLength(1); j++)
            {
                row[j-1] = array.GetValue(i,j);
            }

            // add the current row to the DataTable
            dt.Rows.Add(row);
        }
        return dt;
    } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-02-11T08:51:31.300

```
 var dt = new DataTable();
        var iFila = vals.GetLongLength(0);
        var iCol = vals.GetLongLength(1);

        for (var f = 1; f < iFila; f++)
        {
            var row = dt.Rows.Add();
            for (var c = 1; c <= iCol; c++)
            {
                if (f == 1) 
                    dt.Columns.Add(vals[1, c] != null 
                        ? vals[1, c].ToString() 
                        : "");

                row[vals[1, c].ToString()] = vals[f, c];
            }
        } 
```

# build - 为什么我的 makefile 目标特定变量不起作用？

> ID：11331390
> 
> 赞同：4
> 
> 时间：2012-07-04T14:51:27.553
> 
> 标签：build, makefile

我正在尝试制作一个执行以下操作的makefile：

*   从**src**目录获取源文件
*   将目标文件放在**obj**目录中
*   将二进制文件放入**bin**目录
*   将发布目标放在**rel**目录中
*   将调试目标放在**dbg**目录中

我遇到的第一个问题是我的目标特定变量似乎在这里不起作用是makefile：

```
# Build Directories
src_dir=src
obj_dir=obj
bin_dir=bin

cc=cl
cc_flags=

# create the directory for the current target.
dir_guard=@mkdir -p $(@D)

# source files
src = MainTest.cpp

# object files - replace .cpp on source files with .o and add the temp directory prefix
obj = $(addprefix $(obj_dir)/$(cfg_dir)/, $(addsuffix .obj, $(basename $(src))))

release: cfg_dir = rel
release: executable

debug: cfg_dir = dbg
debug: cc_flags += -Yd -ZI
debug: executable

executable: $(bin_dir)/$(cfg_dir)/MainTest.exe

# build TwoDee.exe from all of the object files.
$(bin_dir)/$(cfg_dir)/MainTest.exe : $(obj)
    $(dir_guard)
    $(cc) -out:$@ $(obj) -link

# build all of the object files in the temp directory from their corresponding cpp files.
$(obj_dir)/$(cfg_dir)/%.obj : $(source_dir)/%.cpp
    $(dir_guard)
    $(cc) $(cc_flags) -Fo$(obj_dir)/$(cfg_dir) -c $< 
```

当我运行 make debug 时，我得到：

```
make: *** No rule to make target `obj//MainTest.obj', needed by `bin//MainTest.exe'. 
```

还有其他问题，因为如果我删除调试和发布变量并将**cfg_dir 硬编码到 rel**我会得到：

```
make: *** No rule to make target `obj/rel/MainTest.obj', needed by `bin/rel/MainTest.exe'.  Stop. 
```

所以我的对象规则也一定是错误的。我是制作文件的新手，所以如果有人看到其他错误的东西，欢迎发表评论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T14:57:01.513

特定于目标的变量仅在配方中可用，在规则中不可用。这是因为在读取 Makefile 时会解析规则，并从中推断出依赖关系。

为了使您的规则适合多个可能的值`cfg_dir`，我建议您查看 GNU Make 手册的[eval](http://www.gnu.org/software/make/manual/html_node/Eval-Function.html)部分中的示例。这解释了这样的事情：

```
release: $(bin_dir)/rel/MainTest.exe

debug: cc_flags += -Yd -ZI
debug: $(bin_dir)/dbg/MainTest.exe

define template =

# build TwoDee.exe from all of the object files.
$(bin_dir)/$(cfg_dir)/MainTest.exe : $(obj)
    $$(dir_guard)
    $$(cc) -out:$$@ $(obj) -link

# build all of the object files in the temp directory from their corresponding cpp files.
$(obj): $(obj_dir)/$(cfg_dir)/%.obj : $$(src_dir)/%.cpp
    $$(dir_guard)
    $$(cc) $$(cc_flags) -Fo$(obj_dir)/$(cfg_dir) -c $$<

endef
$(foreach cfg_dir,rel dbg,$(eval $(template))) 
```

# ruby-on-rails - 路由错误 - 未初始化的常量用户控制器？omn iauth-facebook

> ID：11331391
> 
> 赞同：11
> 
> 时间：2012-07-04T14:51:27.940
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

所以我有这个应用程序，它使用omniauth-facebook 来验证用户，一个新用户在会话控制器中创建：

```
class SessionsController < ApplicationController
  def create
    user = User.from_omniauth(env['omniauth.auth'])
    session[:user_id] = user.id
    redirect_to root_url, notice: "Signed in!"
  end
end 
```

然后它到达用户模型：

```
class User < ActiveRecord::Base
  def self.from_omniauth(auth) 
    where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
      user.provider = auth["provider"]
      user.uid = auth["uid"]
      user.name = auth["info"]["name"] unless auth["info"].blank?
      user.email = auth["info"]["email"] unless auth["info"].blank?
      user.save!
    end
  end
end 
```

然后在我的用户控制器中，我有这样的东西来显示用户配置文件：

```
class UserController < ApplicationController
  def show
    @user = User.find(params[:id])
  end
end 
```

在 show.html.erb 我有这样的东西：

```
<%= @user.name %>, <%= @user.email %> 
```

但我收到以下错误：`Routing Error - uninitialized constant UsersController`

我的路线文件：

```
Bummerang::Application.routes.draw do

    resources :users, :only => :show

    root to: 'static_pages#home'

    match '/about',   to: 'static_pages#about'
    match '/contact', to: 'static_pages#contact'

    # autentications routes
    match '/auth/:provider/callback', to: 'sessions#create'
    match 'signout', to: 'sessions#destroy', as: 'signout'
    match 'auth/failure', to: redirect('/')
end 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-04T15:01:24.080

很难说出这里的问题是什么：将来，考虑发布整个错误消息以及错误消息引用的代码是错误的。

不过，我的猜测是：你`UsersController`的名字是`UserController`. 它应该是多元化的。将名称更改为`UsersController`，这应该可以。

# c# - Button_click 在 Page_load 之前

> ID：11331393
> 
> 赞同：2
> 
> 时间：2012-07-04T14:51:40.730
> 
> 标签：c#, asp.net, session, postback

我正在使用包含用户控件的简单页面中的通用列表。

我使用 Session 变量填充此列表。这个 Session 变量是在我的 Button_click 事件中设置的。

当用户单击按钮时，会话变量被设置并发生回发。问题是 Page_load 在 Button_clicked 事件之前被调用......我们知道这是标准页面的生命周期。

最后，我的通用列表没有更新，因为会话变量是在 page_load 之后设置的。

编辑：我的会话变量是在我的用户控件按钮单击时由委托处理的函数中设置的。

有没有办法防止这种情况发生？有没有一种解决方案可以使用会话变量在许多回发中保持此列表的值？

感谢您的帮助，

昆汀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:00:15.913

在 Click 事件中，您应该做三件事：

1.  将您的通用列表保存到 Session。
2.  保存类似 cookie 的标志（可以是会话值），表明列表已保存。
3.  `Resonse.Redirect(Request.RawURL)`重定向到同一页面。

在 Page_Load 事件中，您应该执行以下操作：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        if (Session["MyFlag"] != null)
        {
            //Perform whatever you need to do with your already saved generic list in Session
            Session["MyFlag"] = null;
        }
    }
} 
```

如果您需要跨回发存储像通用列表这样的复杂对象，Session 是您的朋友。如果您只需要存储一个值，您可以使用 cookie 或 ASP.HiddenField，但为此您最好使用 Session。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:45:12.863

我找到了解决方案：我必须重写主页的 Pre_render 函数。事实上，生命周期是：Page_load->Button_click->Page_PreRender。

所以在我的 Pre_render 函数中，我可以设置我的 Session 变量并根据需要使用它。

据我了解，Pre_Render 事件通常用于在控件显示在页面上之前初始化控件的值。

感谢您的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:01:35.073

你为什么不把你的会话设置在：

```
if(!IsPostback)
{
    // your session setting here (or method)
} 
```

因此，它将保留整个回发的值，而无需在每次回发时设置它。

您还可以声明一个可以从 !IsPostback 或您的 cick 事件轻松调用的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T15:13:48.417

您还可以尝试将您的代码从 Page_Load 移动到 Page_PreRender，这将在您的按钮单击事件后触发。这应该可以解决您遇到的问题。

# c# - 需要 C# ASP.NET 的对话框/消息框组件

> ID：11331399
> 
> 赞同：1
> 
> 时间：2012-07-04T14:52:01.550
> 
> 标签：c#, asp.net, modal-dialog

我想找一个好看的C#/ASP.NET消息/简单对话框的实现。

它应该：

*   当我在我的代码中调用类似 showDialogBox() 的东西时生成它，只要我需要显示它（简单的 C# 接口）
*   是模态的。
*   具有视觉吸引力和可定制性，包括其大小和位置。
*   至少能够显示 OK 按钮和一个可以显示 HTML 文本的文本字段。

我对价格合理或免费的解决方案感兴趣。

**简而言之，请分享您喜欢的 C# ASP.NET DialogBox 解决方案的链接！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:58:49.500

您可以`AJAX Control Toolkit`自己使用和样式（该示例在视觉上不吸引海事组织）：

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)

jQuery 也有它`Dialog`可以通过`Theme Roller`

[http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

`<div>`这两个示例都是免费的（您不应该为花哨的模式对话框付费），您也可以使用包含您的内容的标签和 javascript 来隐藏/显示标签来创建自己的示例。

# tsql - TSQL ?: 运算符功能

> ID：11331400
> 
> 赞同：0
> 
> 时间：2012-07-04T14:52:02.980
> 
> 标签：tsql, constructor

我正在寻找类似于 C# 运算符的功能？：[https ://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/conditional-operator](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/conditional-operator)

我需要根据两个参数过滤服务器端的数据：

1.  @CountryIDs - 这是逗号分隔值的列表，例如 '27,28,81' - 表示 CountryID 27、CountryID 28 和 CountryID 81

2.  @Keyword 匹配客户名称。

有时我不想提供应选择的 CountryID 的完整列表，而是希望选择所有内容 - 有点像“ *。* ”我创建了一个自定义函数“CSV2Table_fn”，它允许我提供 CSV 的列表CountryID。

```
DECLARE @CountryIDs nvarchar(4000), @Keyword nvarchar(50)
SET @CountryIDs = '25,28,81'
SET @Keyword = null

if (len(@Keyword) > 0) -- search for names matching keyword
    begin

        SELECT Name, CountryID FROM Company 
                WHERE CountryID IN (
                SELECT DISTINCT ItemValue FROM CSV2Table_fn(
                        ISNULL((SELECT 
                            CASE WHEN (SELECT COUNT(*) FROM (SELECT DISTINCT ItemValue FROM CSV2Table_fn(@CountryIDs,',')) t) > 0   THEN @CountryIDs
                            ELSE null
                            END
                    ),CountryID),',')
            )
            AND Name LIKE '%' + @Keyword + '%'      

    end
else -- no keyword provided
    begin

        SELECT Name, CountryID FROM Company 
        WHERE CountryID IN (
        SELECT DISTINCT ItemValue FROM CSV2Table_fn(
            ISNULL((SELECT 
                        CASE WHEN (SELECT COUNT(*) FROM (SELECT DISTINCT ItemValue FROM CSV2Table_fn(@CountryIDs,',')) t) > 0   THEN @CountryIDs
                        ELSE null
                        END
                ),CountryID),',')
        )
                end 
```

*   编辑：代码现在按预期工作。然而，这不是很干净，可能会被优化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:08:20.287

你能做这样的事情吗：

```
SELECT Name, CountryID 
FROM   Company 
WHERE  CHARINDEX(',' + CONVERT(varchar(100), CountryID) + ',', ',' + ISNULL(@CountryIDs, CONVERT(varchar(100), CountryID)) + ',') > 0
AND    Name LIKE '%' + ISNULL(@Keyword, '') + '%' 
```

** 编辑得更简单一些并处理 null @CountryIDs 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:43:59.497

为了允许将 null 和像 '123,456,789' 这样的 CSV 作为 @CountryIDs 的值传入，我使用了这个：

```
 SELECT Name, CountryID FROM Company  
    WHERE CountryID IN ( 
    SELECT DISTINCT ItemValue FROM CSV2Table_fn( 
        ISNULL((SELECT  
                    CASE WHEN (SELECT COUNT(*) FROM (SELECT DISTINCT ItemValue FROM CSV2Table_fn(@CountryIDs,',')) t) > 0   THEN @CountryIDs 
                    ELSE null 
                    END 
            ),CountryID),',') 
    ) 
```

# javascript - Javascript不重定向

> ID：11331403
> 
> 赞同：-1
> 
> 时间：2012-07-04T14:52:07.083
> 
> 标签：javascript, asp.net, html, javascript-events

我正在使用下面的 javascript 代码重定向到另一个页面。但它被重定向到默认页面。有人可以建议我该怎么做吗？

```
<input type="image" name="btnContinue" id="PromotionEntry1_imgbtnContinue" src="images/accept-button-orange.gif" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;btnContinue;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border:0;" /><br /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:28:11.823

如果您只是想重定向，请使用超链接/锚点而不是

使用`<input type="image" />`

通常输入控件用于向服务器发送一些数据并进行回发。

你可以用这个

```
<a href="Give the link where you want to redirect">
    <img src="Your image path" />
</a> 
```

上面的 HTML 将重定向到 <a> 的 href 值。

# android - 如何使用 SQLite 将整个数据库表数据显示到 android 中的 TextView 中

> ID：11331410
> 
> 赞同：4
> 
> 时间：2012-07-04T14:52:23.670
> 
> 标签：android, sqlite

我的问题是 TextView 中显示的唯一数据是表格的最后一整行。

所以这是我从数据库表中获取全部数据的代码：

```
public List<Person> getAllPerson()
{
    List<Person> personList = new ArrayList<Person>();

    //select query
    String selectQuery = "SELECT  * FROM " + DATABASE_TABLE;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext())
    {
         Person person = new Person();
            person.setId(Integer.parseInt(cursor.getString(0)));
            person.setName(cursor.getString(1));
            person.setHotness(cursor.getString(2));
            person.setAge(Integer.parseInt(cursor.getString(3)));

            // Adding person to list
            personList.add(person);
    }

    return personList;

} 
```

这是我将表格数据显示到 TextView 中的代码：

```
 public class SQLiteView extends Activity
  {

private TextView tv;
@Override
protected void onCreate(Bundle savedInstanceState)
{
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sqlview);
    tv = (TextView) findViewById(R.id.tvDBdisplay);

    DbHelper d = new DbHelper(this);

    List<Person> person = d.getAllPerson();

    for (Person p: person)
    {
        String data =p.getId() + " " + p.getName() + " " + p.getHotness() +      " " + p.getAge();
        tv.setText(data);

    }

   }    
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:58:06.773

Because you still creating new `String` that is not very good and efficient and this is reason that you have only last row.

So you doing this:

--> *get row --> add data to String --> setText*
--> *get next row --> add data to String --> setText*
...
--> *get last row --> add data to String --> setText*

and this is not very good. In case if you had milion rows in `TABLE` you would create milion `String instances` and this is not very good, isn't? Don't forget that `String` is ***immutable*** and this kind of job is very expansive so in similar cases like this you need to use `StringBuilder` that has methods which offer great work with good performance against `String`.

```
StringBuilder builder = new StringBuilder();
for (Person p: person) {
   builder.append(p.getId() + " "
     + p.getName() + " " + p.getHotness() + " " + p.getAge());
}
tv.setText(builder.toString()); 
```

Now it's makes desired work.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:18:06.813

我会使用（出于其他答案中公开的原因）

```
tv.append(p.toString()); 
```

因为 TextView 已经在内部保留了文本。

请参阅[TextView.append()](http://developer.android.com/reference/android/widget/TextView.html#append%28java.lang.CharSequence%29)。

# android - DB 字段的唯一约束似乎不适用于 ORMlite 4.31

> ID：11331414
> 
> 赞同：0
> 
> 时间：2012-07-04T14:52:42.267
> 
> 标签：android, sqlite, ormlite

这是我的实体字段声明

```
 @DatabaseField( canBeNull = false , unique = true )
private String name; 
```

当我创建两个具有完全相同名称的实体实例时，SQLliteDatabase 允许我添加两者都没有问题。当我通过 DDMS 并检查时，两者都被添加到数据库中。

任何其他方式我可以强制唯一约束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:43:29.043

好吧，在这个问题上又花了 3 个小时，但最终解决了。我已经升级到 4.41，但这没有任何区别。问题是我在创建数据库后添加了约束，当我按照 Mathias Lin 检查约束是否存在时，我看不到它。我删除了数据库并重新创建了它。Presto，工作正常。真的是男生错误。

Mathias，我会接受您的回答，但不能像评论中那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T23:11:43.563

我认为您应该使用 ORMLite 4.41 或更高版本。我遇到了同样的问题（使用 4.38 版本）。在 4.41 版本中，唯一约束已成功映射。

# windows - ppltasks 的 _ContextCallback 类中的第一次机会异常

> ID：11331415
> 
> 赞同：0
> 
> 时间：2012-07-04T14:53:01.230
> 
> 标签：windows, windows-8, windows-runtime

我在 ppltasks.h 的 _ContextCallback 中有一个第一次机会例外，我只是不明白。

我的项目是一个混合 WinRT/本机应用程序。该应用程序由多个子项目组成，其中一个使用 WinRT。WinRT 代码位于与主线程不同的线程中运行的静态库中（我无权更改它）。WinRT 代码是从 Visual Studio 2012 RC 中生成的 Direct3D Metro 应用程序复制而来的。

该代码尝试加载一个简单的着色器：

```
void CubeRenderer::CreateDeviceResources()
{
    Direct3DBase::CreateDeviceResources();

    // going to crash while attempting to load a file.
    auto loadVSTask = DX::ReadDataAsync("SimpleVertexShader.cso"); 
```

该文件存在于正确的位置，并且被证明可以工作。

代码在这里崩溃。_M_context._M_pContextCallback 无效。

```
 void _Reset()
    {
        if (_M_context._M_captureMethod != _S_captureDeferred && _M_context._M_pContextCallback != nullptr)
        {
            _M_context._M_pContextCallback->Release();
        }
    } 
```

输出窗口给出：MyApplication.exe 中 0x00E34C89 处的第一次机会异常：0xC0000005：访问冲突读取位置 0xCDCCDCD。

堆栈跟踪如下所示：

> MyApplication.exe!Concurrency::details::_ContextCallback::_Reset() 第 620 行 C++ MyApplication.exe!Concurrency::details::_ContextCallback::operator=(const Concurrency::details::_ContextCallback & _Src) 第 563 行 C++ MyApplication .exe!Concurrency::task_continuation_context::operator=(const Concurrency::task_continuation_context & __that) C++ MyApplication.exe!Concurrency::task::_ContinuationTaskHandle,std::integral_constant,Concurrency::details::_TypeSelectorAsyncOperation>::_ContinuationTaskHandle, std::integral_constant,Concurrency::details::_TypeSelectorAsyncOperation>(const std::shared_ptr > & _AncestorImpl, const std::shared_ptr > & *ContinuationImpl, const DX::ReadDataAsync::*_l3:: & _Func, const Concurrency::task_continuation_context & _Context, Concurrency::details::_TaskInliningMode _InliningMode) 第 3292 行 C++ MyApplication.exe!Concurrency::task:: *ThenImpl >(const DX::ReadDataAsync::* _l3:: & _Func, Concurrency::details::_CancellationTokenState * _PTokenState, const Concurrency::task_continuation_context & _ContinuationContext, bool _Aggregating, Concurrency::details::_TaskInliningMode InliningMode *) 第 3584 行 C++ MyApplication.exe!Concurrency::task::then< >(const DX::ReadDataAsync::* _l3:: & _Func) 第 2882 行 C++ MyApplication.exe!DX::ReadDataAsync(Platform::String ^ 文件名) 第 42 行 C++ MyApplication.exe!CubeRenderer::[Direct3DBase]::CreateDeviceResources() 行30 C++

所以 _ContextCallback 有问题，这就是我卡住的地方。

*   这个上下文回调是什么？它似乎与从一个任务传递到另一个任务有关。
*   如果它是无效的，那怎么会发生呢？
*   如果只是没有正确设置，我该如何正确设置？

我可以让它工作，但它涉及更改应用程序中的所有子项目以使用 WinRT。不幸的是，这不是一个可接受的解决方案，因为其他子项目中的代码也在我的控制之外。我也想尝试了解这里实际发生了什么。

有什么见解或想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:30:38.457

我在我的主 cpp 文件中添加了对 ppltasks.h 的引用。它使问题消失了，但我不知道为什么。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T15:58:33.277

在我的设置中，如果您在两个项目中包含标头，一个是 winrt，一个是普通项目，您会得到一个名为：“_PPLTASKS_WITH_WINRT”的检测不匹配，我猜这是标头或工具的较新版本，而不是可怕的运行时崩溃得到。

由此看来，如果您为某些而不是其他人启用了 winrt，则似乎无法混合使用 ppl 的静态库（或在引擎盖下使用 PPL 的 vs2012 异步库）。

我找不到任何官方文档。通过仅在关闭 winrt 的库中使用 ppl/std::async 解决了我的应用程序中的相同问题。我认为这不会是一个好的长期解决方案。注意只包括标题和朋友就足以解决这个问题。

# android - 在自定义视图之上覆盖 EditView

> ID：11331418
> 
> 赞同：1
> 
> 时间：2012-07-04T14:53:09.550
> 
> 标签：android, android-layout

我尝试用`EditView`.

该解决方案需要结合这样一个事实，即我的自定义视图会在绘制画布时执行各种计算。计算，例如计算中心 X 和 Y 坐标、画布尺寸等。

这些计算将用于`EditText`在屏幕上定位。

到目前为止，我已经发现 a`RelativeLayout`是关于覆盖的方法。

迄今为止最好的解决方案（这并不理想）是创建一个 custom `RelativeLayout`，见下文：

```
public class MyCustomRL extends RelativeLayout {

    public MyCustomRL(Context context) {
        super(context);
        initView(context);
    }

    public MyCustomRL(Context context, AttributeSet attrs) {
        super(context, attrs);
        initView(context);
    }

    public MyCustomRL(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        initView(context);
    }

    protected void initView(Context context){

        LayoutInflater inflater = LayoutInflater.from(context);
        SeekBar_Speedometer v_speedometer = (SeekBar_Speedometer) inflater.inflate(R.layout.rl_custom_speedometer, this, false);

        addView(v_speedometer);

        RelativeLayout rl_comment = (RelativeLayout) inflater.inflate(R.layout.rl_edittext_comment, this, false);

        EditText edit = (EditText) rl_comment.findViewById(R.id.edittext_comment);
        edit.setText("Text altered at runtime");

        rl_comment.setX(112);
        rl_comment.setY(117);
        //Log.v("WHATEVER","X: "+v_speedometer.centerX); // = 0
        //rl_comment.setX(v_speedometer.centerX);
        //rl_comment.setY(v_speedometer.centerY);

        addView(rl_comment);
    }
} 
```

这基本上有效，`EditText`位于那些静态坐标处。但是我希望将 EditText 放置在`v_speedometer.centerX`和`v_speedometer.centerY`坐标处，但它们为 0，因为`v_speedometer`尚未绘制视图！！！！

我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:05:07.047

如果您还没有找到任何解决方案，您可以编写一个界面来充当您的速度计 hasDrawn 侦听器。这意味着无论何时绘制您的速度计，它都会向实现您的 EditText 的类发布通知，然后在您的 CustomView 或 UI 中再次设置它们的坐标。

# java - 什么是缝合 [] 内所有内容的正则表达式？

> ID：11331422
> 
> 赞同：2
> 
> 时间：2012-07-04T14:53:40.453
> 
> 标签：java, regex

我有如下语言标签注释的文本：

```
PRE[per]    ART[la] NOUN[creazione] PRE[di] ART[un] NOUN[prodotto]  ADJ[innovativo]     ARTPRE[nel] NOUN[mercato]   ARTPRE[delle]   NOUN[comunicazioni] PRE[senza]  NOUN[fili] PUN[(]   NPR[WiFi]   PUN[)] 
```

什么正则表达式会给我方括号内的文本，间隔为一个匹配？那是：

```
per la creazione di un prodotto innovativo nel mercato delle comunicazioni senza fili (WiFi) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:04:47.970

您需要一个正则表达式和一个连接所有匹配项的循环。

由于您已应用 Java 标记，因此 Java 代码为：

```
 String text = ...;
    Matcher matcher = Pattern.compile("\\[(.*?)\\]").matcher(text);
    StringBuilder result = new StringBuilder();
    while (matcher.find()) {
        result.append(matcher.group(1));
        result.append(' ');
    }
    System.out.println(result); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T15:04:54.690

这将通过匹配 [] 中的任何内容来工作，尽管 () 也将被隔开：

```
str.replaceAll(".*?\\[(.*?)\\]", "$1 ")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:05:12.447

```
String text = "PRE[per]    ART[la] NOUN[creazione] PRE[di] ART[un] NOUN[prodotto]  ADJ[innovativo]     ARTPRE[nel] NOUN[mercato]   ARTPRE[delle]   NOUN[comunicazioni] PRE[senza]  NOUN[fili] PUN[(]   NPR[WiFi]   PUN[)] ";
Pattern pattern = Pattern.compile("(\\[(\\w+)\\])");
Matcher matcher = pattern.matcher(text);

StringBuilder sb = new StringBuilder();
while(matcher.find()) {
    sb.append(matcher.group(2)).append(" ");
}
System.out.println(sb); 
```

# php - php echo ，简单的foreach问题

> ID：11331423
> 
> 赞同：-2
> 
> 时间：2012-07-04T14:53:41.920
> 
> 标签：php

我有这段代码从数据库中呼应了我的信息：

```
<?php
  include('db_connect.php');
  mysql_query("SET NAMES UTF8");

$sql =" select * from hostess";
$query = mysql_query($sql);

    while ($row = mysql_fetch_array($query)) { 
    echo "<div id='photo'>"; 
    echo "<div id='picture'>"; 
     echo "<td> <img src=foto/photo1/".$row['photo'] . "></td>";
     echo "</div>"; 
echo "<div id='rating'>"; 
     echo "</div>"; 
     echo "<div id='text'>"; 
     echo '<td><a href="hostess.php?id='.$row['id'].'">'. $row['first_name_en']."&nbsp;". $row['family_name_en']."</a></td>";
    echo "</div>"; 
    echo "</div>"; 
    }
    ?> 
```

我还有一个评级系统，我想将它提取到每个 ID。我的问题是，我如何将每个评级分配给每个 id，我的意思是每个人都必须有自己的评级，他们不应该像现在那样在一个 div 中显示所有内容。我需要在每个评分 div 中显示结果。

我用于所有结果的代码是：

```
<?php 
// include update.php
include_once 'update.php';
// get all data from tabel
$arr_star = fetchStar();
?>
<?php 
// start looping datas
foreach($arr_star as $star){ ?>
<h2>Star Rater - <?php echo $star['id'];?></h2>
<ul class='star-rating' id="star-rating-<?php echo $star['id'];?>">
<?php /* getRating($id) is to generate current rating */?>
  <li class="current-rating" id="current-rating-<?php echo $star['id'];?>" style="width:<?php echo getRating($star['id'])?>%"><!-- will show current rating --></li>
  <?php 
  /* we need to generate 'id' for star rating.. this 'id' will identify which data to execute  */
  /* we will pass it in ajax later */
  ?>
  <span class="ratelinks" id="<?php echo $star['id'];?>">
  <li><a href="javascript:void(0)" title="1 star out of 5" class="one-star">1</a></li>
    <li><a href="javascript:void(0)" title="1 star and a half out of 5" class="one-star-half">1.5</a></li>
  <li><a href="javascript:void(0)" title="2 stars out of 5" class="two-stars">2</a></li>
    <li><a href="javascript:void(0)" title="2 star and a half out of 5" class="two-star-half">2.5</a></li>
  <li><a href="javascript:void(0)" title="3 stars out of 5" class="three-stars">3</a></li>
    <li><a href="javascript:void(0)" title="3 star and a half out of 5" class="three-star-half">3.5</a></li>
  <li><a href="javascript:void(0)" title="4 stars out of 5" class="four-stars">4</a></li>
    <li><a href="javascript:void(0)" title="4 star and a half out of 5" class="four-star-half">4.5</a></li>
  <li><a href="javascript:void(0)" title="5 stars out of 5" class="five-stars">5</a></li>
  </span>
</ul>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:11:04.163

试试（可能有错别字，但希望你明白）

```
 switch ($star['id'])
{
 case 1:
 echo '  <li><a href="javascript:void(0)" title="1 star out of 5" class="one-star">1</a></li> 
    <li><a href="javascript:void(0)" title="1 star and a half out of 5" class="one-star-half">1.5</a></li>';
 break;
 case 2: 
 echo '  <li><a href="javascript:void(0)" title="2 stars out of 5" class="two-stars">2</a></li> 
    <li><a href="javascript:void(0)" title="2 star and a half out of 5" class="two-star-half">2.5</a></li> ']
 break;
 case 3: 
  echo '  <li><a href="javascript:void(0)" title="3 stars out of 5" class="three-stars">3</a></li> 
    <li><a href="javascript:void(0)" title="3 star and a half out of 5" class="three-star-half">3.5</a></li> '; 
  break;
 case 4:
 echo '  <li><a href="javascript:void(0)" title="4 stars out of 5" class="four-stars">4</a></li> 
    <li><a href="javascript:void(0)" title="4 star and a half out of 5" class="four-star-half">4.5</a></li> ';
  break;
 case 5:
  echo '  <li><a href="javascript:void(0)" title="5 stars out of 5" class="five-stars">5</a></li> ';
 break;
 default :  
  echo 'No vote';
  break;
} 
```

# excel - Excel VBA 中的子字符串着色：为什么一些明显的方法不起作用？

> ID：11331426
> 
> 赞同：6
> 
> 时间：2012-07-04T14:53:51.810
> 
> 标签：excel, excel-2010, vba

我一直在构建一些有趣的可视化，这些可视化依赖于 VBA 代码为 Excel 中的子字符串设置不同颜色的能力。对于包含字符串的单元格，语法的工作方式如下`rCell.Characters(start,end).Font.Color=SomeColour`

我的应用程序通过将新字符串附加到现有值然后设置新字符串的颜色，一步构建字符串并设置颜色值。这没有用。从一个完整的字符串开始，然后为多个子字符串着色**确实**有效。

两个简单的例程说明了区别：

```
 Sub TestColourString1()
    'designed to show that substring colour can be done to preexisting string
    Dim rngTestString As Range

    Set rngTestString = Range("colour_string")

    rngTestString.Value = "red green blue"

    rngTestString.Characters(1, 4).Font.Color = RGB(255, 0, 0)
    rngTestString.Characters(5, 10).Font.Color = RGB(0, 255, 0)
    rngTestString.Characters(11, 14).Font.Color = RGB(0, 0, 255)

    End Sub

    Sub TestColourString2()
    'designed to show that setting colour while building string doesn't work
    Dim rngTestString As Range

    Set rngTestString = Range("colour_string")

    rngTestString.Value = "red "
    rngTestString.Characters(1, 4).Font.Color = RGB(255, 0, 0)

    rngTestString.Value = rngTestString.Value & "green "
    rngTestString.Characters(5, 10).Font.Color = RGB(0, 255, 0)

    rngTestString.Value = rngTestString.Value & "blue"
    rngTestString.Characters(11, 14).Font.Color = RGB(0, 0, 255)

    End Sub 
```

这两个例程导致如下所示的两个不同结果： ![excel中两个单元格中的图像](../Images/b173690cbb234c86e7dce846dbfd521d.png)

对于具有更多子段的更长字符串，情况更糟。我正在使用 Excel 2010。

那么这是我的错还是一个错误？有没有更好的方法从 VBA 创建和着色字符串？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T15:12:10.793

分配`.Value`并不能神奇地确定如何附加到现有数据。它删除旧数据并放入新数据。

如果字符有颜色，则第一个字符的颜色用于为新字符串着色。

如果您想要实际追加，就像您在 Excel 中手动使用公式栏一样，然后使用以下命令追加`.Characters`：

```
Dim rngTestString As Range

Set rngTestString = Range("colour_string")

Range("colour_string").Characters(Len(Range("colour_string").Value) + 1).Text = "red "
rngTestString.Characters(1, 4).Font.Color = RGB(255, 0, 0)

Range("colour_string").Characters(Len(Range("colour_string").Value) + 1).Text = "green "
rngTestString.Characters(5, 10).Font.Color = RGB(0, 255, 0)

Range("colour_string").Characters(Len(Range("colour_string").Value) + 1).Text = "blue"
rngTestString.Characters(11, 14).Font.Color = RGB(0, 0, 255) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-22T08:38:19.620

使用宏在一系列 excel 单元格中设置格式（包括着色）子字符串，请参阅视频：

[http://youtu.be/O0h6T5Z7HwY](http://youtu.be/O0h6T5Z7HwY)

# linux - 可以在没有互联网连接的情况下使用 Google Earth API 吗？

> ID：11331427
> 
> 赞同：4
> 
> 时间：2012-07-04T14:53:52.703
> 
> 标签：linux, google-earth, google-earth-plugin

[http://en.opensuse.org/Google_Earth](http://en.opensuse.org/Google_Earth)

这与谷歌地图不同，需要在计算机上安装。如果我以某种方式在硬盘上获取地图，我可以在没有互联网的情况下使用 Google Earth API 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:59:50.377

可以，但前提是您要访问的区域缓存在硬盘中。您可以使用以下步骤缓存地点：

1.首先在线探索你在谷歌地球中最有趣的地方，即使在离线系统中你也必须看到。

2.在以下位置复制您探索过的相应缓存。（复制图标文件夹，dbcache.dat，dbcache.dat.index，dbroot_cache）“C:\Documents and Settings*username*\Local Settings\Application Data\谷歌\谷歌地球”

3.安装任何谷歌地球离线安装程序。

4.在以下位置更新谷歌地球的注册表项和视频。

1.在开始中打开运行，然后输入“regedit”

2.转到 HKEY_CURRENT_USER..单击 HKEY_CURRENT_USER 旁边的 + 横杆。

3.去软件\谷歌\谷歌地球加..然后你会看到旁边的注册表项列表..去键右键单击那个按修改然后输入任何12位数字说更好的键=“000000000000”然后按确定和 VID="AAAACjYuMS4wLjUwMDE="

5.Paste Cache ，在以下路径的离线系统中，即 “C:\Documents and Settings*用户名*\Local Settings\Application Data\Google\GoogleEarth”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T15:01:07.567

即使这在*技术上*可行，我认为答案是否定的，因为[Google Maps/Google Earth APIs 服务条款](https://developers.google.com/maps/terms#section_9_1)说

> **9\. 许可要求。**上述 Google 许可取决于您是否遵守以下要求：
> 
>     9.1 对您的 Maps API 实施的免费、公开可访问性。
> 
>         9.1.1 一般规则。
> 
>         (b) 公共访问（无防火墙）。您的 Maps API 实施不得 (i) 仅在
>               防火墙后运行；(ii) 仅在内部网络上（开发和测试
>               阶段除外）；或 (iii) 在封闭社区中（例如，通过仅受邀访问）。

因此，在没有 Internet 连接的情况下启用 API 违反了 TOS。

# jquery - jQuery动画下一个div

> ID：11331430
> 
> 赞同：1
> 
> 时间：2012-07-04T14:54:04.920
> 
> 标签：jquery

我正在尝试使用单击事件为列表项中的 div 设置动画，但看不到为什么代码不起作用？

当我指定 div 的直接路径但我想保留脚本以便它不使用特定类时，它可以工作。

```
$('#home ul.circles li').click(function() {
    $(this).next('div').animate({opacity: 0.8, top:'0'}, 1500 );
}); 
```

**HTML**

```
<ul class="circles">
        <li class="c-1"><div class="c-1-active">Text Link</div></li>
        <li class="c-2"></li>
        <li class="c-3"></li>                             
</ul> 
```

我试图扭转效果，但似乎无法存储到 var 的路径？

```
$('#home ul.circles li').click(function() {
    alert(testing);
    if(testing > "" || testing == $(this).find('div'))
    {
        testing.animate({opacity: 0, top:'180px'}, 1000 );
    }
        $(this).find('div').animate({opacity: 0.8, top:'0'}, 1000 );
        var testing = $(this).find('div');

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:56:24.537

代替：

```
$(this).next('div').animate({opacity: 0.8, top:'0'}, 1500 ); 
```

和：

```
$(this).parent().find('div').animate({opacity: 0.8, top:'0'}, 1500 ); 
```

或者：

```
$(this).find('div').animate({opacity: 0.8, top:'0'}, 1500 ); 
```

取决于你想要达到什么。

div 不是其中任何一个的兄弟姐妹，`li`而是其中一个的孩子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:57:05.897

div 在 li 元素内。改为使用`.find(..)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:11:53.720

可能会有很多问题，例如-

*   您没有将代码保存在 $(document).ready(fn); 中
*   您尝试制作动画的元素 (div) 没有 position: relative 或 absolute 。
*   您还可以尝试为 div 设置一些初始不透明度。

创建了一个 jsfiddle 链接，希望对您有所帮助。
[jsfiddle](http://jsfiddle.net/myHC4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T15:17:43.857

您可以在选择器中使用“>”来选择 li 元素的直接子元素。这只会选择 div。div里面是否还有另一个div，不会被选中：

```
$('#home ul.circles li').click(function() {
    $(this).find('>div').animate({opacity: 0.2, top:'0'}, 1500 );
});​​​​​​​​​​​ 
```

# oracle - PL/SQL 全局临时表无返回记录

> ID：11331433
> 
> 赞同：-2
> 
> 时间：2012-07-04T14:54:15.473
> 
> 标签：oracle, plsql

在 Oracle PL/SQL 中，我有这段代码来学习全局临时表。我将临时表定义为

```
CREATE GLOBAL TEMPORARY TABLE "TEST"."WORKTABLE"
         ( "VAL" VARCHAR2(2000 BYTE) ) 
      ON COMMIT PRESERVE ROWS ; 
```

当我选择它时，它没有显示任何记录。

请帮忙。

```
declare
    r_countries countries%rowtype;
    v_country_id countries.country_id%type;
begin
     ----------- clean temp table ---------
    execute immediate 'truncate table worktable';

    select * into r_countries from countries r where r.country_id = 'AU';

    select country_id into v_country_id from countries where country_id = 'AU';

    insert into worktable
    select country_id from countries where country_id = 'AU';

    --dbms_output.put_line(r_countries.country_id);

    --dump_table('worktable');

     execute immediate 'select * from worktable'; -- no return

    ----------- clean temp table ---------
    execute immediate 'truncate table worktable';    
end;
/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:19:58.137

我不认为问题出在临时表中，而是在脚本中。
试试这样：

```
declare
    r_countries countries%rowtype;
    v_country_id countries.country_id%type;

    r_worktable worktable%ROWTYPE;
begin
     ----------- clean temp table ---------
    execute immediate 'truncate table worktable';

    select * into r_countries from countries r where r.country_id = 'AU';

    select country_id into v_country_id from countries where country_id = 'AU';

    insert into worktable
    select country_id from countries where country_id = 'AU';

    --dbms_output.put_line(r_countries.country_id);

    --dump_table('worktable');

     select * INTO r_worktable from worktable; 

     dbms_output.put_line(r_worktable.VAL);

    ----------- clean temp table ---------
    execute immediate 'truncate table worktable';    
end;
/ 
```

阅读更多关于`SELECT INTO` [这里](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/selectinto_statement.htm#LNPLS01345)

# ruby-on-rails - Ruby on Rails 检查变量是否有值

> ID：11331435
> 
> 赞同：1
> 
> 时间：2012-07-04T14:54:23.680
> 
> 标签：ruby-on-rails, controller

我怀疑我正在抛出一个 sql 语句

```
@authenticates = Authenticate.find(
  :all, 
  :conditions => ["userid = ? AND password = ?", params[:text1], params[:text2]]
) 
```

我需要设置一个 if 条件，这样如果存在上述数据，我需要重定向到其他页面，否则会显示错误

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:01:18.750

似乎您需要一个身份验证示例。[检查这个。](http://asciicasts.com/episodes/270-authentication-in-rails-3-1)

否则，您只需要一个`if`条件来检查`@authenticates`变量是否包含任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:59:22.273

你只是想要`if`让这一切发生的条款吗？如果是这样的话：

```
if params[:text1] && params[:text2]
  @authenticates = Authenticate.find(
    :all, 
    :conditions => ["userid = ? AND password = ?", params[:text1], params[:text2]]
  )
 else
   redirect_to page_where_the_params_are_set_path
 end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:01:50.387

> 我需要设置一个 if 条件，这样如果存在上述数据，我需要重定向到其他页面，否则会显示错误

对不起，但你的问题措辞很尴尬。我建议清楚地改写问题，以便您得到正确的回答。我想你想要的是这样的

```
@authenticates = Authenticate.find(
  :all, 
  :conditions => ["userid = ? AND password = ?", params[:text1], params[:text2]]
)
if @authenticates.count < 1
  redirect_to some_action_path
end 
```

# jquery - jQuery Mobile，按钮在动态列表中无法正确呈现

> ID：11331437
> 
> 赞同：0
> 
> 时间：2012-07-04T14:54:34.540
> 
> 标签：jquery, listview, button, jquery-mobile

> **可能重复：**
> [将 HTML 动态添加到 jquery mobile 后刷新部分](https://stackoverflow.com/questions/5562461/refresh-a-section-after-adding-html-dynamically-to-jquery-mobile)

我正在尝试在我的 jQueryMobile 页面中插入一个动态列表。

在我的主页中，我有一个名为“list”的 HTML ul 元素：`<ul id='list' data-role='listview'> </ul>`

每个列表元素都包含一个网格 ( `class="ui-grid-a"`)。网格中的第一个 div，每个元素 ( `div class="ui-block-a"`) 包含一个 h2 描述，而第二个包含三个水平排列的按钮，在一个控件组 ( `div class="ui-block-b" data-role="controlgroup" data-type="horizontal"`) 中。

虽然当元素在静态页面中时按钮呈现完美，但如果我尝试将它们动态地插入页面中，它们会呈现不正确。下面是我的代码（[此处](http://jsfiddle.net/fuWzX/)为 jsfiddle ）。我错过了什么？

```
DOMElement += '<li>';
        for (i = 0 ; i < length ; i++) {
            if (typeof systemArray[i] !== 'undefined') {
                DOMElement += '<fieldset class="ui-grid-a"> <div class="ui-block-a" style="width:60%;"> <h2 id="'
                DOMElement += "system" + systemArray[i].name;
                DOMElement += '">';
                DOMElement += systemArray[i].name;
                DOMElement += '</h2>';
                DOMElement += '</div>';
                DOMElement += '<div class="ui-block-b" data-role="controlgroup" data-type="horizontal" style="width:30%;">';
                DOMElement += '<a href="#" class="deletebutton" data-icon="delete" data-role="button" id="';
                DOMElement += 'delete|' + systemArray[i].name;
                DOMElement += '" data-iconpos="notext">Cancel</a>';
                DOMElement += '<a href="#" class="modifybutton" data-icon="gear" data-role="button" id="';
                DOMElement += 'modify|' + systemArray[i].name;
                DOMElement += '" data-iconpos="notext">Modify</a>';
                DOMElement += '<a href="#" class="connectbutton" data-icon="arrow-r" data-role="button" id="';
                DOMElement += 'connect|' + systemArray[i].name;
                DOMElement += '" data-iconpos="notext">Connect</a>';
                DOMElement += '</div>'
                DOMElement += '</fieldset>';
            }   

        }
        DOMElement += '</li>';

        // Needs trigger ('create') to create the icons http://jquerymobiledictionary.pl/faq.html
        $("#list").html(DOMElement).trigger('create');
        $("#list").listview("refresh"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:40:00.873

检查你的小提琴我发现问题是控制组中的按钮自己堆叠。您可以使用 css 解决此问题：

```
.ui-block-b a{
    margin-left:6px !important;
} 
```

小提琴：

[小提琴](http://jsfiddle.net/fuWzX/8/)

我不知道jqm为什么会这样做，开发时经常发生，有时会在标题上列出堆栈15px。然而，css 解决方法并不难做到并且工作正常。如果您不希望每个 ui-block-b 都有那个边距，您可以轻松地为您的按钮添加一个额外的类，并将 css 添加到它。

IMO 处理此问题的最佳方法是创建一个包含所有 jqm 怪癖的单独且特定的 css 样式表，这样您就可以轻松地处理和可视化它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:09:16.610

代替：

```
DOMElement += '" data-iconpos="notext">.....</a>'; 
```

和：

```
DOMElement += '" data-iconpos="notext">.....</a>\n'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T14:58:36.423

Remove the data-role=button attribute from the links. When you have it, you are trying to initialize two widgets on top of each other which is creating a conflict.

# python - 一个功能的实现

> ID：11331440
> 
> 赞同：0
> 
> 时间：2012-07-04T14:54:58.943
> 
> 标签：python, python-2.7

我对函数的实现有疑问。

目的是减少字典中某个键的值（如果它在单词中）。例如：

```
word = hi
hand = {'h':2,'i':1} 
```

-> 函数 update_hand（字，手）

```
hand = {'h'1} 
```

所以我尝试了：

```
def update_hand(hand, word):
    for letter in range(len(word)):
        if hand.get(word[letter],0) != 0:
            hand[word[letter]] -= 1
            if hand.get(word[letter],0) == 0:
                del hand[word[letter]]
    return hand 
```

但是当我调用它时，我得到：

```
Traceback (most recent call last):
File "/home/phillip/Desktop/ps3/ps3/ps3a.py", line 168, in <module>
print update_hand('quali', {'a': 1, 'i': 1, 'm': 1, 'l': 2, 'q': 1, 'u': 1})
File "/home/phillip/Desktop/ps3/ps3/ps3a.py", line 162, in update_hand
if hand.get(word[letter],0) != 0:
AttributeError: 'str' object has no attribute 'get' 
```

所以我试图在一个测试文件中实现它（只是用于战利品）并且一切正常......好吧，我不知道我做错了什么。

谢谢，菲利普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:56:57.417

并*真正*回答这个问题：您将函数定义为，`def update_hand(hand, word)`但您显然将其称为`update_hand(word, hand)`. dict 和 str 都是可迭代的和相当大的，但 str 没有`get`方法。

调试此类问题的快速简单方法：在代码中添加打印语句，即：

```
def update_hand(hand, word):
    print "update_hand(%s, %s)" % (hand, word)
    # code here 
```

解决问题后不要忘记删除打印语句。

同样正如锑所提到的，您不需要丑陋的索引。Jakob 发布了一个简洁的版本，`collections.Counter`但如果你坚持使用较旧的 (< 2.7.x) Python 版本，这里有一个更规范的实现：

```
def update_hand(hand, word):
    for letter in word:
        count = hand.get(letter, 0)
        if count > 1:
            # avoids a KeyError if letter was not in hand 
            # XXX spec : should this happen ?
            hand[letter] = count - 1
        else:
            # count is already <= 1 so decreasing it would make it <= 0
            del hand[letter]

    return hand 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:56:37.600

```
from collections import Counter

hand = Counter()

def update_hand(word, hand):
    for token in word:
        if hand[token] == 0:
           del hand[token]
        else: 
           hand[token] -= 1 
```

使用[collections.Counter](http://docs.python.org/dev/library/collections.html#collections.Counter)使这项任务变得微不足道

# javascript - 从 JavaScript 隐藏推荐信息

> ID：11331444
> 
> 赞同：0
> 
> 时间：2012-07-04T14:55:23.417
> 
> 标签：javascript, html, http, google-chrome, text-to-speech

我想从我的 JavaScript 代码中使用谷歌翻译 TTS 引擎。它不提供公共 API，因此很难使用这种非常好的服务。我编写了以下代码，它可以在我的桌面上的静态 html 文件中完美运行，但不能在我的 Web 服务器中运行。

```
var url = "http://translate.google.com/translate_tts?ie=UTF-8&q=" + encodeURIComponent(txt) + "&tl=es&total=1&idx=0prev=input";
var snd = new Audio(url);
snd.load();
snd.play(); 
```

我知道问题在于 Google 看到了推荐信息并忽略了我，因为如果我使用 --no-referral 参数运行 Chrome，那么一切运行良好并且听起来很正常，即使来自我的网络服务器也是如此。

所以我的问题是如何从 JavaScript 代码中隐藏我的推荐信息，以避免运行带有额外参数的浏览器。我需要谷歌不知道我是谁。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:09:33.960

由于安全原因，您不能这样做。有可用的 TTS api 只是不是免费的......加上谷歌添加了这个过滤器，因为人们开始将它用作 API......

# javascript - 弹性网格局部排序

> ID：11331447
> 
> 赞同：0
> 
> 时间：2012-07-04T14:55:31.657
> 
> 标签：javascript, jquery, html, flexigrid

我试图让我的 flexigrid 在浏览器中而不是在服务器上对其列进行排序。我有一个静态 XML 文件，它被加载到网格中并准确显示我想要的方式......问题是 flexigrid 不会对表格进行排序，因为它是从本地数据文件工作的。

我发现了一些对原始代码的“扩展”，但我似乎无法让它们工作..这个特别有希望.. [http://pixelnix.com/flexigrid-jquery-plugin-extending-to-allow -sorting-of-static-grids/comment-page-1/#comment-10498](http://pixelnix.com/flexigrid-jquery-plugin-extending-to-allow-sorting-of-static-grids/comment-page-1/#comment-10498)

还有这个解决方案，但它一直完全打破我的桌子.. [https://groups.google.com/forum/?fromgroups#!topic/flexigrid/VJTp5GP0sc4](https://groups.google.com/forum/?fromgroups#!topic/flexigrid/VJTp5GP0sc4)

所以我的问题仍然存在.. 我如何使用可爱的 flexigrid 在浏览器中进行排序？我真的很想摆脱使用 Flash 可搜索数据网格，因为这些不会在 ios 产品中显示。

期待回音！

xx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-24T10:51:32.103

我解决了它在参数onChangeSort中重新加载flexigrid：

```
$(your_flexigrid).flexigrid({
    ...,
    onChangeSort: function(){
        $(your_flexigrid).flexReload();
    },
    ...
}); 
```

还要注意 flexigrid 列的名称。它们必须与将被攻击的表或视图的列具有相同的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T08:09:59.750

我查看了源代码，发现 flexgrid 不会对数据进行排序。当您更改任何列的顺序时，它会使用参数“sortname”和“sortorder”向服务器发送 Ajax 请求，然后用接收到的数据刷新表。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T02:45:15.687

我们在 flexigrid 中实现了本地排序，但它远非完美。我们使用了这里的信息：

[http://www.onemoretake.com/2009/02/25/sorting-elements-with-jquery/](http://www.onemoretake.com/2009/02/25/sorting-elements-with-jquery/)

我也会看这里：

[http://pixelnix.com/flexigrid-jquery-plugin-extending-to-allow-sorting-of-static-grids/](http://pixelnix.com/flexigrid-jquery-plugin-extending-to-allow-sorting-of-static-grids/)

# iphone - UIScrollview 子视图在枚举时显示不正确的帧

> ID：11331448
> 
> 赞同：0
> 
> 时间：2012-07-04T14:55:31.810
> 
> 标签：iphone, ios, uiscrollview, subview, uiscrollviewdelegate

嗨，伙计们，我有一个问题，我无法解决。

我已将此问题分解为自己的项目，我仍然可以重现它。

我有一个滚动视图说布局了 30 个 uibutton。（例如）

如果我要枚举子视图并记录帧，那么奇数的帧将具有预期之外的帧

即使在屏幕上绘制了视图，也会发生这种情况

例如

ViewDidLoad

```
 [self.scrollVIew.subviews enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {

        UIButton* view = (UIButton*)obj;

        NSLog(@"%@",NSStringFromCGRect(view.frame));

    }]; 
```

> 日志：
> 
> 2012-07-04 15:46:02.939 BUG 滚动条[2182:707] {{29, 647}, {72, 37}}
> 
> 2012-07-04 15:46:02.946 BUG 滚动条[2182:707] {{119, 647}, {72, 37}}
> 
> 2012-07-04 15:46:02.950 BUG 滚动条[2182:707] {{219, 647}, {72, 37}}
> 
> 2012-07-04 15:46:02.954 BUG 滚动条[2182:707] {{313, 453}, {7, 7}}

如您所见，底部日志显示完全不正确的帧来源和大小。

奇怪的是，无论视图的大小如何，我似乎总是得到 7 的大小。

这看起来可重现，但在屏幕上不可见

这里发生了什么，我怎样才能避免它发生？

谢谢丹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T21:24:10.353

UIScrollView 有两个 UIImageView 子视图——一个用于水平和垂直滚动指示器。您将需要排除这些视图以获取您正在寻找的框架值。

```
UIKIT_CLASS_AVAILABLE(2_0) @interface UIScrollView : UIView <NSCoding> {
    ...
    UIImageView* _verticalScrollIndicator;
    UIImageView* _horizontalScrollIndicator; 
```

避免该问题的一种方法是在进行任何工作之前简单地检查每个子视图的类型：

```
[self.scrollVIew.subviews enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
if([obj isKindOfClass:[UIButton class]])
{
        UIButton *currentButton = (UIButton *)obj;
        NSLog(@"%@",NSStringFromCGRect(currentButton.frame));
}
}]; 
```

由于用于滚动条的每个 UIImageView 都有一个标记 0，第二种方法是用大于零的值标记每个视图并将其用作过滤器。这些方面的东西应该起作用：

```
[self.scrollVIew.subviews enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
UIView *view = obj;
if(view.tag > 0)
{
        NSLog(@"%@",NSStringFromCGRect(view.frame));
}
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:02:49.867

试试这个：

```
[self.scrollVIew.subviews enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
if([obj isKindOfClass:[UIButton class]])
{
        UIButton *currentButton = (UIButton *)obj;
        NSLog(@"%@",NSStringFromCGRect(currentButton.frame));
}
}]; 
```

# java - ImageIO.Read 大部分时间都不起作用？

> ID：11331449
> 
> 赞同：0
> 
> 时间：2012-07-04T14:55:33.247
> 
> 标签：java, swing, jlabel, bufferedimage, javax.imageio

我想使用 swing 显示来自 URL Java 的图像。我使用这段代码：

```
BufferedImage pic = ImageIO.read(new URL("http://www.swpc.noaa.gov/SWN/g_curr.gif"));
JLabel label1 = new JLabel(new ImageIcon(pic));
label1.setBounds(200,28,32,12);
jp.add(label1); //jp is a JPanel. 
```

大约四分之一的时间它工作。其他时候什么都不显示，也不抛出异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:12:11.997

我建议你创建一个`JFrame`然后将你的添加`JPanel`到它。

这是我尝试过的...

```
 //necessary imports over here 

    class Test extends javax.swing.JFrame 
  {
     public static void main(String args[]) throws MalformedURLException, IOException 
   {

  Test inst = new Test();
  inst.setLocationRelativeTo(null);
  inst.setVisible(true);
  JPanel jp=new JPanel();   
  BufferedImage pic = ImageIO.read(new URL("http://www.swpc.noaa.gov/SWN/g_curr.gif"));
  JLabel label1 = new JLabel(new ImageIcon(pic));

  jp.add(label1);
  jp.setVisible(true);
  inst.add(jp);
  inst.getContentPane().setLayout(new FlowLayout());
  inst.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
  inst.pack();
  inst.setSize(300,300);

    }
} 
```

这段代码效率不高，但至少可以为您提供输出。

希望能帮助到你

# android - 如何找出用于签署应用程序的密钥库？

> ID：11331469
> 
> 赞同：308
> 
> 时间：2012-07-04T14:56:59.410
> 
> 标签：android, digital-signature, android-keystore

我有一个签名的应用程序和几个密钥库文件。我想更新应用程序，所以我需要找出使用了哪个键。

如何将最初用于签署我的应用程序的密钥库与我机器上的各种密钥库进行匹配？

* * *

## 回答 #1

> 赞同：471
> 
> 时间：2012-07-04T15:29:09.620

首先，解压APK并解压文件/META-INF/ANDROID_.RSA（这个文件也可能是CERT.RSA，但应该只有一个.RSA文件）。

然后发出这个命令：

```
keytool -printcert -file ANDROID_.RSA 
```

你会得到这样的证书指纹：

```
 MD5:  B3:4F:BE:07:AA:78:24:DC:CA:92:36:FF:AE:8C:17:DB
     SHA1: 16:59:E7:E3:0C:AA:7A:0D:F2:0D:05:20:12:A8:85:0B:32:C5:4F:68
     Signature algorithm name: SHA1withRSA 
```

然后再次使用 keytool 打印出签名密钥库的所有别名：

```
keytool -list -keystore my-signing-key.keystore 
```

您将获得别名列表及其证书指纹：

```
android_key, Jan 23, 2010, PrivateKeyEntry,
Certificate fingerprint (MD5): B3:4F:BE:07:AA:78:24:DC:CA:92:36:FF:AE:8C:17:DB 
```

瞧！我们现在可以确定该 apk 已使用此密钥库和别名“android_key”进行签名。

Keytool 是 Java 的一部分，因此请确保您的 PATH 中包含 Java 安装目录。

* * *

## 回答 #2

> 赞同：421
> 
> 时间：2014-04-10T09:22:01.933

# Gradle 签名报告

输出每个应用变体的签名信息的最简单方法是[使用 Gradle Signing Report](https://developers.google.com/android/guides/client-auth#using_gradles_signing_report)。

```
./gradlew signingReport

> Task :app:signingReport
Variant: debug
Config: debug
Store: ~/.android/debug.keystore
Alias: AndroidDebugKey
MD5: A5:88:41:04:8D:06:71:6D:FE:33:76:87:AC:AD:19:23
SHA1: A7:89:E5:05:C8:17:A1:22:EA:90:6E:A6:EA:A3:D4:8B:3A:30:AB:18
SHA-256: 05:A2:2C:35:EE:F2:51:23:72:4D:72:67:A5:6C:8C:58:22:2A:00:D6:DB:F6:45:D5:C1:82:D2:80:A4:69:A8:FE
Valid until: Wednesday, August 10, 2044 
```

# APK 或 AAB 的签名

或者，您可以使用 Java 7 的密钥和证书管理工具`keytool`来检查密钥库或 APK 的签名，而无需提取任何文件。

```
# APK file
keytool -printcert -jarfile app.apk

# AAB file
keytool -printcert -jarfile app.aab 
```

输出将显示 APK 文件`app.apk`或 AAB 文件的签名所有者/颁发者以及 MD5、SHA1 和 SHA256 指纹`app.aab`。

（请注意，该`-jarfile`参数是在 Java 7 中引入的；有关更多详细信息，[请参阅文档](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/keytool.html)。）

# 密钥库的签名

同样，您可以检查用于签署应用程序的密钥库的签名。

```
keytool -list -v -keystore release.jks 
```

输出将显示密钥库文件中的别名（条目）`release.jks`以及证书指纹（MD5、SHA1 和 SHA256）。

请注意，如果您使用的是[Play App Signing](https://play.google.com/console/about/keymanagement/)，您的上传密钥可能与 Google Play 用于签署您的应用的密钥不同。在这种情况下，您可以在 Google Play 控制台的**发布**>**设置**>**应用完整性**页面上找到应用签名。

此过程记录在 Google 开发者网站上：
[https ://developers.google.com/android/guides/client-auth](https://developers.google.com/android/guides/client-auth)

# 综上所述

如果 APK 和密钥库之间的 SHA1 指纹匹配，那么您可以放心，该应用程序已使用密钥进行签名。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-10-10T23:24:15.543

为了建立 Paul Lammertsma 的回答，这个命令将打印当前目录中所有 APK 的名称和签名（我使用 sh，因为稍后我需要将输出通过管道传输到 grep）：

`find . -name "*.apk" -exec echo "APK: {}" \; -exec sh -c 'keytool -printcert -jarfile "{}"' \;`

样本输出：

```
APK: ./com.google.android.youtube-10.39.54-107954130-minAPI15.apk
Signer #1:

Signature:

Owner: CN=Unknown, OU="Google, Inc", O="Google, Inc", L=Mountain View, ST=CA, C=US
Issuer: CN=Unknown, OU="Google, Inc", O="Google, Inc", L=Mountain View, ST=CA, C=US
Serial number: 4934987e
Valid from: Mon Dec 01 18:07:58 PST 2008 until: Fri Apr 18 19:07:58 PDT 2036
Certificate fingerprints:
         MD5:  D0:46:FC:5D:1F:C3:CD:0E:57:C5:44:40:97:CD:54:49
         SHA1: 24:BB:24:C0:5E:47:E0:AE:FA:68:A5:8A:76:61:79:D9:B6:13:A6:00
         SHA256: 3D:7A:12:23:01:9A:A3:9D:9E:A0:E3:43:6A:B7:C0:89:6B:FB:4F:B6:79:F4:DE:5F:E7:C2:3F:32:6C:8F:99:4A
         Signature algorithm name: MD5withRSA
         Version: 1

APK: ./com.google.android.youtube_10.40.56-108056134_minAPI15_maxAPI22(armeabi-v7a)(480dpi).apk
Signer #1:

Signature:

Owner: CN=Unknown, OU="Google, Inc", O="Google, Inc", L=Mountain View, ST=CA, C=US
Issuer: CN=Unknown, OU="Google, Inc", O="Google, Inc", L=Mountain View, ST=CA, C=US
Serial number: 4934987e
Valid from: Mon Dec 01 18:07:58 PST 2008 until: Fri Apr 18 19:07:58 PDT 2036
Certificate fingerprints:
         MD5:  D0:46:FC:5D:1F:C3:CD:0E:57:C5:44:40:97:CD:54:49
         SHA1: 24:BB:24:C0:5E:47:E0:AE:FA:68:A5:8A:76:61:79:D9:B6:13:A6:00
         SHA256: 3D:7A:12:23:01:9A:A3:9D:9E:A0:E3:43:6A:B7:C0:89:6B:FB:4F:B6:79:F4:DE:5F:E7:C2:3F:32:6C:8F:99:4A
         Signature algorithm name: MD5withRSA
         Version: 1 
```

* * *

或者，如果您只关心 SHA1：

`find . -name "*.apk" -exec echo "APK: {}" \; -exec sh -c 'keytool -printcert -jarfile "{}" | grep SHA1' \;`

样本输出：

```
APK: ./com.google.android.youtube-10.39.54-107954130-minAPI15.apk
         SHA1: 24:BB:24:C0:5E:47:E0:AE:FA:68:A5:8A:76:61:79:D9:B6:13:A6:00
APK: ./com.google.android.youtube_10.40.56-108056134_minAPI15_maxAPI22(armeabi-v7a)(480dpi).apk
         SHA1: 24:BB:24:C0:5E:47:E0:AE:FA:68:A5:8A:76:61:79:D9:B6:13:A6:00 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-07-05T03:21:30.953

查看签名证书的更简单方法：

```
jarsigner.exe -verbose -verify -certs myapk.apk 
```

这只会显示 DN，因此如果您有两个具有相同 DN 的证书，您可能需要通过指纹进行比较。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2019-09-07T04:02:38.723

您可以使用`apksigner`作为 Android SDK 一部分的工具来执行此操作：

`apksigner verify --print-certs my_app.apk`

您可以在 build-tools 目录中找到 apksigner。例如： `~/Library/Android/sdk/build-tools/29.0.1/apksigner`

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-05-29T15:19:00.930

有许多免费软件可以检查证书和密钥库，例如[KeyStore Explorer](http://keystore-explorer.org/downloads.html)。

解压缩 apk 并打开 META-INF/?.RSA 文件。? 应该是 CERT 或 ANDROID 或可能是其他东西。它将显示与您的 apk 相关的所有信息。

# facebook-graph-api - 使用折旧的 offline_access 访问页面时间线

> ID：11331472
> 
> 赞同：0
> 
> 时间：2012-07-04T14:57:04.773
> 
> 标签：facebook-graph-api

我开发了以 Facebook 页面上的帖子为特色的 Flash 网站。由于我没有访问访问者的帐户，因此我不希望他们通过 oauth 过程。我只想要一个 Json 形式的提要，但该提要是一个页面，而不是特定用户。我已经通过编写一个脚本来解决这个问题，我访问该脚本以授予 offline_access 令牌。我使用该令牌来访问我需要的一个提要。在页面加载时，我使用图形 API Json URL 来获取提要并解析 Flash 中的数据。

现在，offline_access 即将消失，我正在尝试找到以原始 json 形式访问提要的最佳方式，该方式将在 flash 中工作。

我已阅读此页面 (http://developers.facebook.com/roadmap/offline-access-removal/)，但找不到对我有帮助的方案，因为所有流程都需要用户访问某种应用程序。此更改是否意味着如果流程对访问者不透明，我将无法再访问页面提要？如果需要，我可以被要求成为我需要访问的页面的管理员，如果这有帮助的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:07:41.370

[该文件](https://developers.facebook.com/roadmap/offline-access-removal/)概述了您的所有选择 -

*   如果充当页面本身，您可以获得一个不会过期的令牌 - 文档中的场景 5
*   如果代表用户行事，您需要他们至少每 60 天回来一次——文档中的场景 2 或 3

# c++ - libsvn - svn_pool_create() - 未解决的外部

> ID：11331473
> 
> 赞同：1
> 
> 时间：2012-07-04T14:57:05.227
> 
> 标签：c++, svn, visual-c++

我一直在玩libsvn。我正在尝试做一个简单的结帐。

我有我认为可以工作的代码，但是由于未解决的外部问题，我无法编译它。

[[在这里查看我的代码]](http://pastebin.com/6ZzPvpBj)

我有以下静态链接的库：

*   libsvn-client-1.lib
*   libapr-1.lib

但是，哪个库文件包含函数 svn_create_pool() 的声明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:11:52.320

知道了！

*   libsvn_subr-1.lib

我是如何找到它的，这太荒谬了。

使用windows命令：

```
 dir *.lib /b 
```

这给了我一个库列表，然后我对其进行了测试，并允许我继续将列表减半以最终找到它。

# c# - Adding registries to Container after initialization

> ID：11331475
> 
> 赞同：3
> 
> 时间：2012-07-04T14:57:06.337
> 
> 标签：c#, inversion-of-control, structuremap

When creating a StructureMap container, I typically do something like this:

```
var container = new Container(registry => {
    registry.AddRegistry<MyRegistry>();
}); 
```

Where

```
public class MyRegistry : Registry {
    public MyRegistry() {
        Scan(x => {
            x.Assembly("My.Assembly.Name");
            x.RegisterConcreteTypesAgainstTheFirstInterface();
        }
    }
} 
```

However, this has resulted in quite many `registry.AddRegistry` lines in a bootstrapper file, which is then copied into many projects. I would like to be able to call a method taking a constructed container and adding a registry to it, so I can modularize libraries.

I came up with this:

```
public static void Setup(ref Container container) {
    container.PluginGraph.ImportRegistry(typeof(MyRegistry));
} 
```

This works, in that the registry is properly added to the container (seen by calling `container.WhatDoIHave()` before and after), but it seems the actual mappings are not done - ie the interface `IFoo` is not registered to concrete class `Foo` that both are defined in `My.Assembly.Name`.

What is the difference in doing `ImportRegistry` and `AddRegistry`? Can my `Setup` method be fixed?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T01:09:13.223

你试过了`Container.Configure()`吗？它存在用于在容器初始化后配置容器。

# datetime - Yii update input field with wrong date outputed - where to control it?

> ID：11331479
> 
> 赞同：1
> 
> 时间：2012-07-04T14:57:25.447
> 
> 标签：datetime, yii

The user inserts a date like: 06/11/2012.

To insert into the database I use:

```
protected function beforeSave ()
{
  if($this->date <> '')
  { 
    list($d, $m, $y) = explode('/', $this->date);
    $mk=mktime(0, 0, 0, $m, $d, $y);
    $this->date = date ('Y-m-d', $mk);
  }

   return parent::beforeSave ();
} 
```

**Question 1) Isn't there a shorter approach ?**

Anyway, it works, so I have a date in string format coming from the database date type field:

```
$date = '2012-11-06' 
```

Then I use date format correctly, and I get the day and the month

```
yii::app()->dateFormatter->format('dd', $date);

yii::app()->dateFormatter->format('MMMM', $date); 
```

All this seems to work fine. However, on my **update** form, I get a date like this:

> "20/12/1106"

On the form input field, the date should be converted to:

```
dd/mm/yyyy 
```

when displayed.

On my model rules here's what I have:

```
array('date', 'type', 'type' => 'date', 'message' => '{attribute}: Invalid Date!', 'dateFormat' => 'dd/mm/yyyy'), 
```

**Where can we control this on Yii, so that on our input field of the date appears as dd/mm/yyyy ?**

I've done this, but ofcourse if we later have other controller then update, we have to change this. This seems NOT a good approach. :(

```
protected function afterFind ()
{
 if(Yii::app()->controller->action->id == 'update')
 {
  if($this->date <> '')
  {
   Yii::app()->dateFormatter->formatDatetime($this->date,'short');
  }

  return parent::afterFind ();          
 } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:30:20.340

您可以在呈现更新表单之前进行一些锻炼。这应该可以工作，但未在您的 **操作更新**之前进行测试`$this->render(....);`

```
$model->date = assign your required format here; 
```

但是如果你需要保持这种格式，你应该避免在每个地方转换日期。只需将日期以所需格式直接保存在数据库中即可。

# git - 从现有的 git 标签创建一个 svn 标签

> ID：11331480
> 
> 赞同：0
> 
> 时间：2012-07-04T14:57:26.113
> 
> 标签：git, svn, branch, git-svn

我正在尝试从带注释的 git 标签创建正确的 SVN 标签。我认为我必须做的是：

*   签出标签 -> 完成
*   **git svn 分支 -tm “版本 x”**

调用分支命令会导致以下错误消息：

```
Unknown option: t
Unknown option: m

git-svn - bidirectional operations between a single Subversion tree and git
Usage: git svn <command> [options] [arguments]

Available commands:
  blame            Show what revision and author last modified each line of a file
                     --git-format
  clone            Initialize and fetch revisions
                     --add-author-from
  ... 
```

令人惊讶的是，可用命令中既`branch`没有`tag`列出命令，也没有列出命令。调用**git svn branch**会导致相同的帮助页面，但没有“未知选项”部分。我不知道出了什么问题以及如何解决它。

我正在使用 git 1.6.0.2、git-svn 1.6.0.2 和 svn 1.6.13

不幸的是，我无权更新并检查它是否是与版本相关的问题

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:04:57.360

[在这里](https://stackoverflow.com/questions/2490794/git-svn-create-push-a-new-branch-tag)发现，该命令是在**1.6.1**`branch`版本中引入 git-svn 的。所以是版本问题。

# c# - 生成带有嵌入设置的 .exe 文件

> ID：11331481
> 
> 赞同：0
> 
> 时间：2012-07-04T14:57:28.157
> 
> 标签：c#, .net, winforms, win32-process

我有一个执行一些任务的窗口应用程序，其中之一是打开一些文件，我们都知道.net 为应用程序提供了 exe 文件，可以用作单击开始。我称这个应用程序为 application1。

现在我想再生成一个窗口应用程序（简单的 exe），我们称它为 application2，它将打开一个带有一些选项的表单（比如 application1 要打开的文件的名称）和一个生成按钮。

单击生成按钮时，它应该使用从 application2 传递的数据为 application1 生成 exe 文件。

请建议我该怎么做。

**编辑** 我需要生成可在不同系统上使用的 exe，这些系统将定期执行某些任务。并且不同计算机的间隔colud是不同的。所以我被要求生成哪个将接受时间间隔并将生成该间隔的 exe

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:05:59.390

有多种方法可以考虑这样做：

1.  使用带有设置文件名称的 reg 键来读入，然后将您从 app2 写入的设置存储在文件中，用于 app1，以便 app 1 可以运行它

2.  您使用带有文件名或命令行参数的参数调用 app1，它会更新自己的应用程序设置文件。

3.  将设置放入数据库中，因此任何地方的 app1 的任何副本都可以找到它，假设所有用户都能够看到数据库服务器

4.  如果 app1 总是在运行，而 app2 是你可以进行一些进程间通信，但可能这是 4 中更复杂的

与其重新编译exe，不如拥有一个配置文件。

如果做不到这一点，编译.net只是这样，你可以有一个生成一个.cs文件的exe（或更新一个，并重新运行整个编译并输出一个exe..在命令行编译时使用谷歌）但我不会我的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:01:17.553

我认为您正在寻找的是 application1 能够接收命令行参数和 application2 以允许您选择文件并运行 application1 并传递这些参数。

我不认为它希望生成.exe

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:14:31.523

另一种方法，虽然不是那么容易，将是

*   编写应用程序 1 以尝试通过反射从不存在的类中读取设置`SettingsOverride`；如果没有找到，回退到它自己的硬编码设置
*   应用程序 2 使用[CodeDOM](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx)或类似方法创建一个新程序集，为`SettingsOverride`类提供新保存的设置
*   应用程序 2 使用[ILMerge](http://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx)从应用程序 1 和设置程序集构建新的 .exe；应用程序 1 中的反射代码现在应该选择新设置。

可能也可以使用嵌入式资源来执行此操作，尽管我不确定如何。最后，您可以在 .exe 中放置一个字符串常量，例如 400 个`X`字符，然后应用程序 2 可以扫描文件以找到它（作为 Unicode/UTF-16 文本）并将其替换为包含新设置的字符串 - 但我如果您需要重新计算校验和或类似内容，则 m 不是 100%。

# java - Is there an library in Java for emitting a certain frequency constantly?

> ID：11331485
> 
> 赞同：5
> 
> 时间：2012-07-04T14:57:45.553
> 
> 标签：java, audio, libraries, frequency

Right, well. First time I'm actually using Java to fix a problem. I bought a new headphone set called Sennheiser 120 HD; but there's an issue. If there isn't a constant emission of audio then the base for the headphones will eventually time out and turn off. The headphones are spammed with static, which is horrible on the ears. The solution to this for me currently is playing music 24/7 to prevent the static of death. Maybe I'm weird, but I don't want to listen to music 24/7.

I believe a workable solution for this would be to constantly emit a sound that the base can detect but I can't hear. The application would need to be efficient since it's running 24/7.

I've been doing some research, but I'm not that experienced with Java. I'm unable to find any library for emitting a certain frequency. Does anyone know of any?

It would be best to get the solution for this within *4 days*, before my return policy at the store is no longer valid. Incase if this doesn't work.

![Email from Sennheiser](../Images/6dfc18e2fa5651fed79a44abd88b3946.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T15:13:41.057

我想你会发现听一个恒定频率的声音会让耳朵很痛苦。但是，您可以这样做，只需使用标准 Java 库：

```
AudioFormat format = new AudioFormat(44000f, 16, 1, true, false);
SourceDataLine line = (SourceDataLine)AudioSystem.getLine(new DataLine.Info(SourceDataLine.class, format));

line.open(format);
line.start();

double f = 440; // Hz
double t = 3; // seconds

byte[] buffer = new byte[(int)(format.getSampleRate() * t * 2 + .5)];

f *= Math.PI / format.getSampleRate();

for(int i = 0; i < buffer.length; i += 2) {
    int value = (int)(32767 * Math.sin(i * f));
    buffer[i + 1] = (byte)((value >> 8) & 0xFF);
    buffer[i] = (byte)(value & 0xFF);
}

line.write(buffer, 0, buffer.length);

line.drain(); 
```

# asp-classic - Parameterised query asp classic missing operand error

> ID：11331486
> 
> 赞同：1
> 
> 时间：2012-07-04T14:57:47.943
> 
> 标签：asp-classic, parameters, parameterized

I am trying to get a paramterised query to work in asp classic. Any help appreciated Here is the error

> Microsoft OLE DB Provider for Visual FoxPro error '80040e14' Missing operand. /portal/jobportal/getaddress1.asp, line 141

```
function paramQuery()

code = ucase(request.querystring("code"))
stype = request.querystring("type")
cAddressType = request.querystring("caddresstype")

Set rs = Server.CreateObject("ADODB.recordset")
Set cmd = server.CreateObject("ADODB.Command")

If IsObject(Session("portal_conn")) Then
    Set conn = Session("portal_conn")
Else
    Set conn = Server.CreateObject("ADODB.Connection")
    cConnString = "Provider=vfpoledb;Data Source="+session("portaldata")+"portal.dbc" 
    conn.open cConnString,"",""
    Set Session("portal_conn") = conn
end if

cmd.ActiveConnection = conn
cmd.Prepared = true
cmd.CommandType = 1
cmd.CommandText =  "SELECT * from uaddress where userid = "+cstr(session("userid"))+" and upper(name) like ? + % "+" and type = '"+ trim(cAddresstype)+"' order by add1"

set param1 = cmd.CreateParameter("@name",200,2,40)
cmd.Parameters.append param1
cmd.Parameters("@name") = code
cmd.Execute() <-- missing operand error
rs.Open cmd

end function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T06:57:49.207

使用 SQL`like`子句的参数时，您需要将`%`参数值作为参数值的一部分传递。

此外，为了防止 SQL 注入攻击，您最好也将参数用于其他值：

```
cmd.CommandText =  "SELECT * FROM uaddress WHERE userid=? AND UPPER(name) LIKE ? AND type=? ORDER BY add1"

set param1 = cmd.CreateParameter("@id", 200, 2, 40)
cmd.Parameters.append param1
cmd.Parameters("@id") = cstr(session("userid"))

set param2 = cmd.CreateParameter("@name", 200, 2, 40)
cmd.Parameters.append param2
cmd.Parameters("@name") = "%" & code & "%"

set param3 = cmd.CreateParameter("@type", 200, 2, 40)
cmd.Parameters.append param3
cmd.Parameters("@type") = trim(cAddresstype)

cmd.Execute() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T00:50:37.023

您需要在字符周围加上引号`%`：

```
... +" and upper(name) like ? + '%' "+ ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-01T19:34:51.890

似乎 VFP 不支持命名参数，只需使用 (?) 而不是命名参数，按照查询中出现的顺序添加参数，它就会起作用。

代替 ：

```
cmd.Parameters("@name") = code 
```

利用 ：

```
cmd.Parameters("?") = code 
```

# java - Windows Azure application in Java and JSF

> ID：11331487
> 
> 赞同：0
> 
> 时间：2012-07-04T14:57:48.123
> 
> 标签：java, jsf, cloud

I wrote web application using JSF, xhtml, CSS and Apache Tomcat in Eclipse and I want to start it on Windows Azure emulator. I installed "Windows Azure plugin for eclipse" ([here is instruction](http://msdn.microsoft.com/en-us/library/windowsazure/hh690944%28VS.103%29.aspx)). When I choose option "Package for Windows Azure" and I want to run application on WA emulator everything is ok - I see information on console "BUILD SUCCESSFUL", server started etc. But when I type application url adress on web browser, it displays

> HTTP status 404 The requested resource (/ChatAzure/) is not available.

How is this caused and how can I solve it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T23:37:59.617

听起来您的应用程序可能没有进入 Tomcat 的网络应用程序。解决问题的一种方法是在您尝试在模拟器中运行它之后，进入您的 Azure 项目的“部署”文件夹，导航文件夹层次结构，直到您到达特定的角色文件夹（如 WorkerRole1，如果使用默认名称）进入 approot，找到那里的tomcat文件夹，并查看它的webapps文件夹。您可以通过这种方式查看部署逻辑的效果。如果您的应用不在 webapps 中，则可能存在应用部署问题。（实际目录可能会有所不同，具体取决于您自定义部署逻辑的方式）

# javascript - Does this create a circular reference in javascript?

> ID：11331493
> 
> 赞同：1
> 
> 时间：2012-07-04T14:57:58.863
> 
> 标签：javascript

In [Determing if a SQL select returns an empty set asynchronously?](https://stackoverflow.com/questions/11303781/determing-if-a-sql-select-returns-an-empty-set-asynchronously) I ended up trying to use an object's method's as an event handler. Using the normal "this" of the object doesn't correspond to the method's object in the context of an event handler (why, not sure, beyond my current simplistic understanding of javascript, my guess is due to scoping of variable names?).

As I mentioned in my previous Q, from [http://w3future.com/html/stories/callbacks.xml](http://w3future.com/html/stories/callbacks.xml), their solution is to basically have each object provide a "var me = this" variable. My question is, does this create a circular reference that will prevent the object from being garbage collected?

If so, is there a better way to accomplish the task?

thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:11:29.590

是的，这将创建一个循环引用。

但是，它不会引起任何问题。
现代 Javascript 垃圾收集器可以很好地处理循环引用。（在 IE6 中，DOM 和用户对象之间的引用除外）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:28:11.460

如果`s`所有引用它的东西要么离开可达范围要么被手动删除，那么它将被垃圾收集。如果您删除`s`但`statement.executeAsync`仍然引用回调，则对的引用也`me`将保留。

```
delete s;
s; //undefined

//This will still contain the function reference
statement.executeAsync.handleResult;

delete statement; //Now s and me should be garbage collected 
```

如果您只是单独清除每个处理程序而不是语句对象，那也可以。假设您可以单独访问每个回调。

```
delete statement.executeAsync.handleResult;
delete statement.executeAsync.handleError;
delete statement.executeAsync.handleCompletion; 
```

这也取决于 executeAsync 是如何实现的。如果内部实现没有将回调存储在最终回调之后的范围内，那么它将在您删除后被清理`s`

# git - Git merge strategy to ignore deleted files

> ID：11331494
> 
> 赞同：24
> 
> 时间：2012-07-04T14:58:04.740
> 
> 标签：git, merge

I have special branch (release branch) which is an exact copy of master branch with some files and directories removed. No development is happening on this branch, however it must be in sync with master, so updates on master must be constantly pushed to that branch.

By doing a normal merge (`git merge master`) I constantly get conflicts like (a sample README file for example):

`CONFLICT (delete/modify): README deleted in HEAD and modified in master`

which is expected: I try to merge changes in files, that I've deleted. So, to resolve them I jut use `git rm README`.

To automate it, I though I could use automatic conflict resolution by specifying -X ours. Man pages suggest it is a right thing for me:

`This option forces conflicting hunks to be auto-resolved cleanly by favoring our version. Changes from the other tree that do not conflict with our side are reflected to the merge result.`

However, when I do `git merge -s recursive -X ours master` I still get the same unresolved delete/modify conflicts. What am I doing wrong? Is there another way to automate conflict resolution?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-12-30T20:14:34.027

可能有更好的方法来做到这一点，但我通过执行合并（使用默认合并策略）然后运行解决了类似的问题

```
git status | grep 'deleted by us' | awk '{print $4}' | xargs git rm 
```

在此之后，您应该正常解决其他冲突，然后提交。

这只会删除当前分支上已删除的所有文件，我认为这是您想要的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-07T08:23:23.580

```
git merge master
git status --porcelain | awk '{if ($1=="DU") print $2}' | xargs git rm
git commit 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-04T15:36:24.913

通过查看[这个问题](https://stackoverflow.com/questions/4934714/does-gits-x-theirs-not-handle-new-deleted-file-conflicts)，看起来*我们*或*他们的*选项的*递归策略*不认为删除是冲突。

 **您可以做的是使用[此功能](http://git-scm.com/book/pt-br/ch7-2.html#Merge-Strategies)为某些文件指定特定策略。我敢打赌，*我们的**策略**（不是选项）*会对这些文件起到作用。

**编辑：**

如评论中所述，您不能这样做！

如果这对你来说是一个非常重要的特性，你应该明确地联系 Git 邮件列表 ( *git@vger.kernel.org* )

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-04T17:57:52.110

您可以使用 rebase 而不是 merge 来实现发布分支。**

# image - C# WIA with Automatic Document Feeder (ADF) retuns only one page on certain scanners

> ID：11331498
> 
> 赞同：5
> 
> 时间：2012-07-04T14:58:12.437
> 
> 标签：image, scanning, wia

I have a HP Scanjet 7000 (duplex & ADF scanner) and a HP Scanjet 5500c (only ADF) and a scanner program I'm developing which uses WIA 2.0 on Windows 7.

The problem is that the code works perfectly on the older scanner model, but on the newer one the code seems to run just fine through the first page, then fail on the second. If I step through the code around the following line;

```
image = (WIA.ImageFile)wiaCommonDialog.ShowTransfer(item, wiaFormatTIFF, false); 
```

the old scanner stops and waits for another call to be made on the same reference, but the newer one just runs through all it's pages from the feeder in one continuous operation.

I notice if I'm using the default scanning program in Windows 7, the newer one returns a single .tif file which contains all the separate pages. The older one returns separate .jpg files (one for each page).

This indicates to me that the newer scanner is scanning through its whole feeder before it is ready to return a collection of images where the older one returns ONE image between each page scanned.

How can I support this behavior in code? The following is part of the relevant code which works on the older scanner model:

```
public static List<Image> Scan(string scannerId)
    {
        List<Image> images = new List<Image>();
        List<String> tmp_imageList = new List<String>();

        bool hasMorePages = true;
        bool useAdf = true;
        bool duplex = false;

        int pages = 0;

        string fileName = null;
        string fileName_duplex = null;

        WIA.DeviceManager manager = null;
        WIA.Device device = null;
        WIA.DeviceInfo device_infoHolder = null;
        WIA.Item item = null;
        WIA.ICommonDialog wiaCommonDialog = null;

        manager = new WIA.DeviceManager();

        // select the correct scanner using the provided scannerId parameter
        foreach (WIA.DeviceInfo info in manager.DeviceInfos)
        {
            if (info.DeviceID == scannerId)
            {
                // Find scanner to connect to
                device_infoHolder = info;        
                break;
            }
        }

        while (hasMorePages)
        {
            wiaCommonDialog = new WIA.CommonDialog();              

            // Connect to scanner
            device = device_infoHolder.Connect();

            if (device.Items[1] != null)
            {
                item = device.Items[1] as WIA.Item;

                try
                {
                    if ((useAdf) || (duplex))
                        SetupADF(device, duplex); //Sets the right properties in WIA

                    WIA.ImageFile image = null;
                    WIA.ImageFile image_duplex = null;

                    // scan image                
                    image = (WIA.ImageFile)wiaCommonDialog.ShowTransfer(item, wiaFormatTIFF, false);

                    if (duplex)
                    {
                        image_duplex = (ImageFile)wiaCommonDialog.ShowTransfer(item, wiaFormatPNG, false);
                    }

                    // save (front) image to temp file
                    fileName = Path.GetTempFileName();
                    tmp_imageList.Add(fileName);
                    File.Delete(fileName);
                    image.SaveFile(fileName);
                    image = null;               

                    // add file to images list
                    images.Add(Image.FromFile(fileName));

                    if (duplex)
                    {
                        fileName_duplex = Path.GetTempFileName();
                        tmp_imageList.Add(fileName_duplex);
                        File.Delete(fileName_duplex);
                        image_duplex.SaveFile(fileName_duplex);
                        image_duplex = null;

                        // add file_duplex to images list
                        images.Add(Image.FromFile(fileName_duplex));
                    }

                    if (useAdf || duplex)
                    {
                        hasMorePages = HasMorePages(device); //Returns true if the feeder has more pages
                        pages++;                         
                    }
                }
                catch (Exception exc)
                {
                    throw exc;
                }
                finally
                {
                    wiaCommonDialog = null;
                    manager = null;
                    item = null;
                    device = null;
                }
            }
        }
        device = null;
        return images;
    } 
```

Any help on this issue would be very much appreciated! I can't seem to find a working solution on the web. Just unanswered forum posts from people with the same problem.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-05T13:15:49.497

我们有一个非常相似的问题和各种解决方案，例如通过设置某些属性，并没有帮助。主要问题是扫描仪 (ADF) 在启动时收回所有页面，而不管程序代码中发生了什么。该过程反复导致错误，因为在扫描下一页之前“太多”了。这尤其适用于尝试另一个“连接”的事实。出于这个原因，我们修改了代码，以便可以尽快读入各个页面：

```
public List<Image> Scan(string deviceID)
    {
        List<Image> images = new List<Image>();

        WIA.ICommonDialog wiaCommonDialog = new WIA.CommonDialog();
        WIA.Device device = this.Connect(deviceID);
        if (device == null)
            return images;

        WIA.Item item = device.Items[1] as WIA.Item;

        List<WIA.ImageFile> wiaImages = new List<ImageFile>();
        try
        {
            // scan images
            do
            {
                WIA.ImageFile image = (WIA.ImageFile)wiaCommonDialog.ShowTransfer(item, wiaFormatJPEG, false);
                wiaImages.Add(image);
            } while (true);
        }
        catch (System.Runtime.InteropServices.COMException ex)
        {
            if ((uint)ex.ErrorCode != WIA_PROPERTIES.WIA_ERROR_PAPER_EMPTY)
                throw ex;
        }
        catch (Exception ex)
        {
            throw ex;
        }

        foreach (WIA.ImageFile image in wiaImages)
            this.DoImage(images, image);

        return images;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T21:48:18.683

我看到您正在调用一个名为 SetupADF 的方法，该方法未显示，它可能会在设备对象上设置一些属性。您是否尝试过设置[WIA_DPS_PAGES (property 3096)](http://msdn.microsoft.com/en-us/library/ff551414%28v=vs.85%29)和/或[WIA_DPS_SCAN_AHEAD_PAGES (property 3094)](http://msdn.microsoft.com/en-us/library/ff551423%28v=vs.85%29)？

我有[一篇](http://andrewolson.wordpress.com/2011/10/19/adf-scanning-with-silverlight/)关于在 Silverlight 中从 ADF 进行扫描的博客文章，我相信评论者遇到了与您遇到的相同问题。将 WIA_DPS_PAGES 设置为 1 为他修复了它。我最终修改了代码的 SetDeviceProperties 方法，将 WIA_DPS_PAGES 设置为 1，将 WIA_DPS_SCAN_AHEAD_PAGES 设置为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:13:30.653

经过大量试验和错误后，我偶然发现了一个解决方案，该解决方案由于我不太确定的原因而起作用。ShowTransfer() 方法似乎无法在扫描时将页面转换为 .png 或 .tiff。将格式设置为 JPEG 或 BMP 实际上为我解决了这个问题：

```
image = (ImageFile)scanDialog.ShowTransfer(item, wiaFormatJPEG, false); 
```

我想我在网上的某个地方看到，无论指定的格式如何，此方法实际上都会返回 BMP。与使用 bmp 或 jpeg 相比，将图像转换为 png 或 tiff 可能太重了。

在旁注中，我将属性设置：3088 设置为 0x005（adf 和双工模式）。

# c# - Adding column to datagradview from different datasource

> ID：11331499
> 
> 赞同：1
> 
> 时间：2012-07-04T14:58:21.807
> 
> 标签：c#, winforms, datagridview, datasource

I'm currently working on an "advanced" search form for my application. I'm using a `datagridview` to display the results. The idea is to be able to search thoroughly (with lots of options).

Currently I fill the datagridview like this:

```
 dgvData.AutoGenerateColumns = false;

        if (cbbKlant.SelectedItem != null)
        {
            dgvData.DataSource = StatistiekManagement.getOpdrachten((klant)cbbKlant.SelectedItem);

            //ID kolom
            DataGridViewTextBoxColumn id = new DataGridViewTextBoxColumn();
            id.Name = "ID";
            id.DataPropertyName = "opdracht_id";

            //Plaatsen kolom
            DataGridViewTextBoxColumn plaatsen = new DataGridViewTextBoxColumn();
            plaatsen.Name = "Plaatsen";
            plaatsen.DataPropertyName = "aantal_personen";

            //Vertrekplaats kolom
            DataGridViewTextBoxColumn vertrek = new DataGridViewTextBoxColumn();
            vertrek.Name = "Vertrek";
            vertrek.DataPropertyName = "locatie_id";

            this.dgvData.Columns.Add(id);
            this.dgvData.Columns.Add(plaatsen);
            this.dgvData.Columns.Add(vertrek);
        } 
```

My problem here is I want to add information to the `datagridview` from another table. For example: I have a `contract` and this contract has a `location`. How do I display the `location` into this `datagridview`?

I also use `LINQ TO SQL` to get my data from the database.

Thanks, Thomas

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:19:54.837

您不能将 datagridview 绑定到两个不同的源。

您的解决方案是编写一条 SQL 语句来连接两个不同的表，然后用它填充一个数据集。然后，您可以将其用作您的数据源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:44:40.643

有几种方法可以附加位置。最简单的方法是您可以将 Location 作为属性添加到绑定的基类中。它不必是数据库中的一个字段，只是一个可以绑定的属性。如果继承不是一种选择，有时封装可以工作。

除了上述之外，您始终可以将非绑定列添加到（绑定）datagridview。它应该显示的值可以来自您喜欢的任何来源。显示值的一种方法是使用 datagridview 的 cellformatting 事件：

```
 //inside initialization void
        dgvData.CellFormatting+=new DataGridViewCellFormattingEventHandler(dgvData_CellFormatting);
        dvcol = new DataGridViewTextBoxColumn();
        dgvData.Columns.Add(dvcol);
    }

    DataGridViewColumn dvcol;

    void dgvData_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
    {
        if (dvcol != null && e.RowIndex != -1 && e.ColumnIndex == dvcol.Index)//where Column1 is your combobox column
        {
            var rec = (YourRecordTypeSuchAsContract)dgvData.Rows[e.RowIndex].DataBoundItem;
            e.Value = ""; //get description based on the rec
        }
    } 
```

# tomcat - maven-archetype-webapp project not seen in ("Add and remove..." in server popup.)

> ID：11331500
> 
> 赞同：0
> 
> 时间：2012-07-04T14:58:33.450
> 
> 标签：tomcat, web-applications, maven

i created a maven project with artefactId maven-archetype-webapp .When i want to add it to tomcat ("Add and remove..." in server popup.) i don't see the project in the given list Is there a soluion or should i create another project with a new artefactId if it's a yes what is the name of the artefact

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:40:42.200

我用这个命令来转换我的项目，让它支持 Eclipse 的 wtp `mvn eclipse:eclipse -Dwtpversion=2.0`

# c# - 将 asmx 中的对象存储到会话并在母版页中获取此值 - 获取 null

> ID：11331502
> 
> 赞同：2
> 
> 时间：2012-07-04T14:58:38.813
> 
> 标签：c#, asp.net, .net, web-services, session

我尝试将我的对象存储到 asmx Web 服务中的会话

```
 user = new MyUser(UserName);
 Session["user"] = user; 
```

并从页面加载部分的母版页中读取，但我得到 null

```
user = (MyUser)Session["user"]; 
```

当我尝试使用简单的字符串而不是`MyUser`对象时它会起作用

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T20:57:55.360

假设运行您的服务的进程与为您的页面提供服务的进程相同，您需要确保 WebMethod 启用了会话，方法是使用

```
[WebMethod(EnableSession = true)] 
```

这是另一个[更详细](https://stackoverflow.com/questions/4758575/how-acess-session-in-webmethod)的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:43:08.623

谁是服务的客户，谁是页面的客户？他们是否共享 cookie？

这些问题的答案很重要，因为会话共享涉及共享具有相同会话 ID 的会话 cookie。

从您所写的内容来看，尚不清楚，但很可能您只需要在两个客户端（Web 服务客户端和页面客户端）之间共享（例如**复制）cookie。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:46:07.597

我找到了解决方案！在母版页中，我尝试阅读有关该`Page_Load`事件的会话，但这是错误的。当我投入`Page_Init`活动时，它起作用了:)

# php - PHP converting of int to string

> ID：11331505
> 
> 赞同：2
> 
> 时间：2012-07-04T14:58:51.703
> 
> 标签：php, sqlite

I'm trying to parse out my if-else statements nicely but it seems that it doesn't parse out the else statement.

```
$a = 1
if (is_numeric($a)) 
{
    $DB = new PDO('sqlite:database.db');
    $result = $DB->query('select id from staff where id='.$a);
        if ($result == "")
        {
        echo "'{$a}' is invalid. No such record", PHP_EOL;
        }
        else
        {
            echo "'{$a}' is found", PHP_EOL; 
        }

} 
else 
{
    echo "'{$a}' is NOT numeric", PHP_EOL;
} 
```

My $result I think it will return in Integer as when I say to echo the $ result out, it says PDO statement cannot be converted to INT. It doesn't go to my first inner else statement. Please advise how did I make my mistake.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:07:46.907

你`$result`是一个对象，而不是一个整数。您需要调用 fetch 方法，例如`fetchAll`，甚至更简单，`fetch`将数据放入另一个变量中。

尝试：

```
$a = 1
if (is_numeric($a)) 
{
    $DB = new PDO('sqlite:database.db');
    $result = $DB->query('select id from staff where id='.$a);
        if ($result)
        {
            $data = $result->fetchAll(PDO::FETCH_NUM);
            if (!isset($data[0]))
                echo "'{$a}' is invalid. No such record", PHP_EOL;
            else
                echo "'{$a}' is found", PHP_EOL; 
        }    
} 
else 
{
    echo "'{$a}' is NOT numeric", PHP_EOL;
} 
```

这是另一个例子`fetch`：

```
$a = 1
if (is_numeric($a)) 
{
    $DB = new PDO('sqlite:database.db');
    $result = $DB->query('select id from staff where id='.$a);
        if ($result)
        {
            $data = $result->fetch(PDO::FETCH_ASSOC);
            if (!$data)
                echo "'{$a}' is invalid. No such record", PHP_EOL;
            else
                echo "'{$a}' is found", PHP_EOL; 
        }    
} 
else 
{
    echo "'{$a}' is NOT numeric", PHP_EOL;
} 
```

# php - 使用 PHP 将数据发布到永久 json 文件

> ID：11331506
> 
> 赞同：-1
> 
> 时间：2012-07-04T14:59:03.117
> 
> 标签：php, json

使用 url，我的想法是任何用户都可以发布数据。例如通过

[http://myweb.com/index.php?name=Peter&surname=Brown](http://myweb.com/index.php?name=Peter&surname=Brown)

[使用此处](https://stackoverflow.com/questions/11210779/build-a-json-in-php-from-post-data/11210965#comment14900549_11210965)提供的“jedwards”答案，我可以创建一个 json 并将其保存到文件中。

```
<?
/* This needs to be at the top of your file, without ANYTHING above it */
session_start();

/* ... */

if(!array_key_exists('entries', $_SESSION))
{
    $_SESSION['entries'] = array();
}

$_SESSION['entries'][] = array("name" => $_GET["name"], "surname" => $_GET["surname"]);

$json_string = json_encode($_SESSION['entries']); 
```

我的问题是这在不同的会话或用户之间不是永久性的。它仅适用于同一会话。在不同的会话中，构建的 json 从头开始​​。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:13:29.553

好吧，如果您正在寻找基本解决方案，请参见下文。如果没有，请按照其他答案中的建议使用数据库。

```
<?
/* This needs to be at the top of your file, without ANYTHING above it */
session_start();

/* ... */

$file = sys_get_temp_dir() . '/entries.json';
$data = file_get_contents($file);
$entries = (!empty($data)) ? json_decode($data) : array();

$entries[] = array("name" => $_GET["name"], "surname" => $_GET["surname"]);

file_put_contents($file,json_encode($entries),FILE_APPEND); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:02:51.013

首先，不要使用`GET`请求来改变服务器的状态。`GET`只应该从服务器读取（或.. um.. **GET**）数据。

要更改数据，请使用`POST`. 它更合适，更安全，并且在传输大量数据时非常有用。

现在，针对手头的问题。对于更持久的解决方案，最好的选择是强制用户注册，并将所需数据保存在数据库中，并参考用户 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:04:20.007

是的，因为会话，顾名思义，只是临时的（并且*是*本地的）。当浏览器关闭时，它就消失了。根据您的需求，您必须在服务器上使用数据库或文本文件之间进行选择。

不会为此类数据制作 Cookie 或会话。

# c# - 在 ItemsControl 中具有依赖属性的 UserControl：如何将 ItemSource 的元素绑定到 x：UserControl 的名称？

> ID：11331507
> 
> 赞同：2
> 
> 时间：2012-07-04T14:59:04.493
> 
> 标签：c#, wpf, dependency-properties, itemscontrol, caliburn.micro

我的类 IFrame 可以包含其他 IFrame：

```
public interface IFrame
{
    int Id { get; }
    string Summary { get; }

    BindableCollection<IFrame> SubFrames { get; set; }
} 
```

为了展示一个 IFrame，我有一个自定义的 UserControl：

```
<UserControl x:Class="Views.FrameView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:Views="clr-namespace:Views"
         mc:Ignorable="d" 
         x:Name="FrameXName">
    <StackPanel Orientation="Horizontal">
        <Label Content="{Binding ElementName=FrameXName, Path=Id}" Width="50"/>
    </StackPanel>
</UserControl> 
```

使用代码隐藏：

```
public partial class FrameView : UserControl
{
    public FrameView()
    {
        InitializeComponent();
    }

    public static DependencyProperty IdProperty = DependencyProperty.Register(
        "Id", typeof(int), typeof(FrameView));

    public int Id
    {
        get { return (int) GetValue(IdProperty); }
        set { SetValue(IdProperty, value); }
    }
} 
```

因此，我可以使用以下方法在 FooView.xaml 中显示框架： `<Views:FrameView x:Name="Frame1" Width="50" Height="50"/>`如果我在 FooViewModel.cs 中定义以下内容： `public IFrame Frame1 { get { return Frames.ElementAt(1); } }`

**我的目标：**

我想为集合中的每个 IFrame 显示一个 FrameView，例如：

```
<ItemsControl ItemsSource="{Binding Frames}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Views:FrameView x:Name="{Binding}" Width="50" Height="50"/>
                    </StackPanel>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
</ItemsControl> 
```

在哪里`public BindableCollection<IFrame> Frames`定义。

不幸的是，这不起作用，编译器说`MarkupExtensions are not allowed for Uid or Name property values, so '{Binding}' is not valid.`

我怎样才能实现我的目标？提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T22:05:50.267

在您的数据模板中，您可以替换

```
<Views:FrameView x:Name="{Binding}" Width="50" Height="50" /> 
```

和

```
<Views:FrameView Id="{Binding Path=Id}" Width="50" Height="50" /> 
```

应该可以正常工作

# php - 在 PHP 中显示来自 2 个表的 2 个过滤列

> ID：11331508
> 
> 赞同：0
> 
> 时间：2012-07-04T14:59:04.603
> 
> 标签：php, mysql

我有 2 个表 - users 和 users_audit，需要将 2 个单独查询的结果显示到 2 个相互关联的列中。我已经弄清楚了这两个问题。

查询用户：`SELECT rowid,data FROM users WHERE columnid = 1 GROUP BY rowid;`

```
+-------+------------+
| rowid | data       |
+-------+------------+
|     1 | John       |
|     2 | Abi        |
|     3 | Tony       |
|     4 | Gregg      |
|     5 | Jon        |
|     6 | Victor     |
|     7 | Daniel     | 
```

查询 users_audit：`SELECT date_created FROM users_audit WHERE rowid = 6 ORDER BY date_created DESC, date_created DESC LIMIT 1;`

查询的目的是显示特定 rowid 的最新 date_created。

```
+---------------------+
| date_created        |
+---------------------+
| 2012-07-04 09:20:12 |
+---------------------+ 
```

表 users_audit 如下所示：

```
SELECT * FROM users_audit;

+-------+---------+--------------+-------------+---------------------+
|  id   |  rowid  | before_value | after_value | date_created        |
+-------+---------+--------------+-------------+---------------------+
|     1 |       6 | 3            | 5           | 2012-06-29 15:48:11 |
|     2 |       5 | Out (0)      | 2           | 2012-07-04 09:20:10 |
|     3 |       6 | 5            | 4           | 2012-07-04 09:20:12 |
|     4 |       7 | 3            | 6           | 2012-07-04 09:20:14 |
|     5 |       3 | 2            | 3           | 2012-07-04 09:20:16 |
|     6 |      15 | 6            | 5           | 2012-07-04 09:20:22 | 
```

我需要为每个 rowid 显示 2 列 - 来自用户的数据和来自 users_audit 的 date_created。这意味着必须为每个 rowid 运行 users_audit 查询（在循环中？）。

php中显示的预期结果是：

```
+------------+----------------------+
| data       | date_created         |
+------------+----------------------+
| John       | (latest date)        |
| Abi        | (latest date)        |
| Tony       | (latest date)        |
| Gregg      | (latest date)        |
| Jon        | (latest date)        |
| Victor     | 2012-07-04 09:20:12  |
| Daniel     | (latest date)        | 
```

如何在 php 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:04:24.430

为什么你不能只创建一个视图并使用连接来创建你想要的表？

```
 SELECT users.data, users_audit.date_created FROM users 
     INNER JOIN users_audit ON users.rowid = users_audit.rowid 
```

或者我在这里错过了什么？

编辑

```
 SELECT users.data, users_audit.date_created FROM users 
     INNER JOIN users_audit ON users.rowid = users_audit.rowid
     WHERE users_audit.date_created = (SELECT MAX(date_created) from users_audit
 GROUP BY rowid) 
```

我相信这应该工作..？让我知道。

# internet-explorer - Chrome vs Firefox vs IE - 滚动问题

> ID：11331511
> 
> 赞同：2
> 
> 时间：2012-07-04T14:59:14.917
> 
> 标签：internet-explorer, firefox, google-chrome, browser

我正在开发一个网站，它在 Chrome 中的行为似乎有所不同。滚动不一致或不流畅。它继续停止。但是，当我在 Firefox 或 IE9 中加载相同的站点时，我没有问题。一切都顺利滚动。

++++++++编辑++++++++ 我能够通过将以下元标记添加到我的模板来解决我的问题：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

我不知道为什么，但它似乎解决了它......以及我遇到的其他问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:50:08.503

这是 Chrome 中的一个已知问题，解决方案在逻辑上对我来说不是很清楚。与 chrome 如何呈现 javascript 有关。但是，在将父容器 div 添加到滚动内容时，它似乎工作正常。在以下链接中，javascript 中有一个解决此问题的方法，并附有示例

[Stackoverflow 解决方案](https://stackoverflow.com/questions/1830080/jquery-scrolltop-doesnt-seem-to-work-in-safari-or-chrome-windows)

对于您添加到网页的链接，它更多地与 IE 相关，而不是 chrome。你在 IE 中安装了 chrome 框架吗？

我不知道您正在使用的技术，但下面的代码将为解决方案提供提示。在 Gwt（谷歌网络工具包）中，我制定了如下解决方案：

我早期的导致问题的代码如下

旧代码：

```
 <g:FocusPanel addStyleNames="{style.scrollable} {style.fullHeight}" ui:field="bodyContainer">
        <b:CellTable width="100%" ui:field="bodyTable"/>
        </g:FocusPanel> 
```

新代码：CSS：

```
 #scrollContainer {
       overflow:auto;
       position:absolute;
       top:0px; height:100%; width:100%;
     }

 HTML:
    <div id="scrollContainer">
    <g:FocusPanel ui:field="bodyContainer">
        <b:CellTable width="100%" ui:field="bodyTable"/>
    </g:FocusPanel>
    </div> 
```

希望这可以帮助！

# python - 在 Python 中读取未定义数量的列并使用 matplotlib 绘制数据

> ID：11331517
> 
> 赞同：1
> 
> 时间：2012-07-04T14:59:28.817
> 
> 标签：python, file, input, matplotlib

在 python 代码中，我执行以下操作：

```
x1=[]
y1=[]
y2=[]
y3=[]
y4=[]

for line in res_file_1.readlines():
    ll=string.split(line)
    x1.append(float(ll[0]))
    y1.append(float(ll[1]))
    y2.append(float(ll[2]))
    y3.append(float(ll[3]))
    y4.append(float(ll[4])) 
```

因此它读取文件的 4 列并将值存储在不同的“y”数组中。我想知道如何更一般地执行此操作，即，当我不知道输入文件是否包含 4、16 或 2000 列时

更新：

后来我需要用matplotlib绘制数据，所以我通常这样做：

```
ax.plot(x1,y1,'ks',color='red')
ax.plot(x1,y2,'ks',color='green')
ax.plot(x1,y3,'ks',color='blue') 
```

如何绘制未定义的列数（和颜色）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T18:05:59.207

如果您有这样的数据文件`input.csv`：

```
x1, y1, y2, y3, y4
A, 3, 6, 7, 1
B, 4, 5, 9, 0
X, 7, 2, 8, 5
C, 4, 3, 2, 1 
```

使用[熊猫](http://pandas.pydata.org/)你会做这样的事情：

```
import pandas as pd
import matplotlib.pyplot as plt

df = pd.read_csv('input.csv', delimiter=',', index_col='x1')
df.plot(marker='s')
plt.show() 
```

你会得到这个情节：

![在此处输入图像描述](../Images/6d3e83ec7ccb81ba51772b53da4a4830.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T15:04:58.903

```
from itertools import izip_longest
with open(filename, 'r') as f:
    data = list(izip_longest(*[x.split() for x in f])) 
```

这将创建一个元组列表，其中每个元组包含来自一列的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T15:28:53.993

使用`numpy.genfromtxt`并将列读取到`recarray`s 中，当您想要遍历列进行绘图时，使用`recarray.dtype.names`检索每一列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T15:04:51.700

使用字典，其中键是 x，值是 y 的列表：

```
data = {}
for line in res_file_1.readlines():
    ll = line.split()
    data[ll[0]] = ll[1:] 
```

# maven - TestNG 在 jar 文件中执行编译的测试

> ID：11331518
> 
> 赞同：4
> 
> 时间：2012-07-04T14:59:31.463
> 
> 标签：maven, testng

我有一个运行良好的 testNG 测试类，但是当我将它打包到包含测试文件的 jar 文件中时，我无法从中运行测试。jar 文件中包含 test.class 文件。当我从 Maven 调用测试时，它返回“没有要运行的测试”。

关于如何使用 testNG 在 jar 中运行测试类的任何建议？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-14T22:41:53.513

能不能用winrar打开jar文件看看里面是不是都打包了？另外，testng 是您的应用程序入口点吗？当你写的时候会发生什么：

```
java -jar yourjar.jar 
```

在控制台？您应该看到 testng 输出。另外，您确定您的参数 xml 文件指向正确的类并且可以正常工作吗？

你的类在jar文件中吗？与你的测试类？请使用 winrar 检查以查看 jar 内容。

我认为使用此清单，您的测试应该运行。

# jquery - 什么是 jQuery ajaxStop 的 MS Ajax 等价物

> ID：11331519
> 
> 赞同：1
> 
> 时间：2012-07-04T14:59:34.900
> 
> 标签：jquery, asp.net, asp.net-ajax

我有一个*坚定和不屈不挠的需要*找到 jQuery.ajaxStop 的 MS AJAX 等效项。
而且我想以一种故障安全的方式编写它，这样我就不会收到`Sys is undefined`错误
有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:13:53.827

您可以使用[`add_endRequest`](http://msdn.microsoft.com/en-us/library/bb383810.aspx)MS Ajax 的全局处理程序：

```
Sys.WebForms.PageRequestManager.getInstance().add_endRequest(ajaxRequestComplete);

var ajaxRequestComplete = function (sender, args) {
    console.log('done');
    // your code goes here
} 
```

**编辑**：您可以将它与[`isInAsyncPostBack`](http://msdn.microsoft.com/en-us/library/bb383989.aspx)指示`PageRequestManager`对象是否正在处理回发结合起来：

```
 Sys.WebForms.PageRequestManager.getInstance().add_endRequest(ajaxRequestComplete);

 var ajaxRequestComplete = function (sender, args) {
     if(Sys.WebForms.PageRequestManager.getInstance().get_isInAsyncPostBack()) {
         // your code goes here
     }
 } 
```

# python - FANN 错误 11：无法分配内存

> ID：11331520
> 
> 赞同：7
> 
> 时间：2012-07-04T14:59:44.103
> 
> 标签：python, neural-network, fann

在 FANN 的 Python 实现中，我从

```
from pyfann import libfann
ann = libfann.neural_net()
ann.create_standard(4, 2, 8, 9, 1)
#FANN Error 11: Unable to allocate memory. 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T23:22:19.497

create_standard 和其他简单创建中有一个错误。解决方法是

```
ann.create_standard_array([2,8,9,1]) 
```

`create_sparse`和相同`create_shortcut`。

# javascript - Javascript - 比较字符串环境

> ID：11331521
> 
> 赞同：1
> 
> 时间：2012-07-04T14:59:44.210
> 
> 标签：javascript, dom, wysiwyg

我正在开发所见即所得的编辑器。因为它必须只包含一些基本功能，所以我想自己做并避免出现问题。现在它工作得很好，但我想添加一个功能以取消粗体，单元格......

我知道使用 execCommand 它是一个自动的事情，但它在所有浏览器中的工作方式不同，所以......我的想法是下一个：按下 BOLD 按钮时，检查字符串的环境，然后......

*   如果选择在打开和关闭`<b>`标签之间，例如`<b>ab||selected||cd</b>`替换`selected`为`</b>selected<b>`.
*   `<b>`如果选择以标签开始或结束，例如`<b>ab||selected||</b>`将其替换为`</b>selected<b>`（然后删除所有`<b></b>`组。）
*   `<b>`如果选择以标签开始和结束，例如`<b>||selected||</b>`将其替换为`</b>selected<b>`（然后删除所有`<b></b>`组。）

`<b>content</b>`但是......当只有插入符号/选择 IN 时，我怎样才能进入 var字符串`content`？或许有可能...

**更新**
奇怪的是替换总是相同的。那么，我真的应该得到我想要的东西，还是总是以这种方式替换它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:14:38.460

> 我正在开发所见即所得的编辑器。因为它必须只包含一些基本功能，所以我想自己做并避免出现问题。现在它工作得很好，但我想添加一个功能以取消粗体，单元格......

**不要**编写自己的所见即所得编辑器。

你真的想“避免问题”吗？然后使用现有的优秀编辑器之一（实际上只有 2 个......也许 3 个）。创建编辑器是一项**极其**艰巨的任务，您需要大量时间（我的意思是……几年）、大量知识和耐心（也需要很多：P）。

我可以自己写“我正在使用所见即所得的编辑器”。在一年多的时间里，我是这些“优秀编辑器”之一的核心开发人员。在此期间，我只实现了一个功能 - 非常重要且非常复杂，但只是其中之一。

你有那个问题......我什至不想开始回答。这听起来像是小菜一碟，但事实并非如此。这是一块砖头，当你摔倒在你头上时会杀死你:)。我只会开始列举 impl 的重要部分：Selection + range 实现，因为原生不同并且有缺陷（约 5k LOC + min Nk LOC 用于测试）。然后您需要正确的样式处理（应用和删除）impl（最少 1k LOC + 测试），因为您必须注意跨越许多块的样式（如整个表格加粗）以及包含部分或整个样式等的不同选择。您必须避免使用本机 execCommand，因为它们会破坏您的内容。然后您还应该考虑更新工具栏按钮的状态，并且为了使您的 impl 防弹，处理不同的样式标签（例如粘贴）。然后' 这只是冰山一角——你会处理样式，但有数百个其他东西坏了。大编辑已经解决的问题。

无论如何 - 了解主要编辑器之一的配置选项并根据需要对其进行自定义。这将花费您几个小时，而不是几年。

# open-source - 我应该使用 LGPL 还是 GPL

> ID：11331528
> 
> 赞同：2
> 
> 时间：2012-07-04T15:00:13.040
> 
> 标签：open-source, licensing, gpl, lgpl

我正忙着写一个应用程序，我不确定我应该使用 LGPL 还是 GPL（或者其他东西）。这是我的限制：

1.  我的应用程序是开源的。我真的不在乎人们如何使用我的代码，只要他们的代码也是开源的。如果他们想将我的源代码用于非开源应用程序，他们必须先与我联系。
2.  我正在使用 GPL、LGPL 和 IDGAFL 下的外部库（又名“我不提供 af*k 许可证”）。对于大多数库，我直接将它们的源代码包含在我的应用程序中。在极少数情况下，我会使用他们预先构建的库并链接到它们。
3.  对于上述库：如果我链接到它们，我有一个包含所有源代码（包括库的代码）和 .so/.dylib/.dll 的存储库。
4.  我有一个与预构建库一起发布的可执行文件。非预建库显然在编译期间包含在可执行文件中。

哪个许可证是最好的？此外，对于一些库，我更改了一些源代码以适合我的应用程序。这些不是对代码本身的任何重大更改，而是对包含语句、文件扩展名等的更改，例如：

来自（原始库）：

```
#include "libx/libx.hpp" 
```

至（我的更改）：

```
#include "external/libx.h" 
```

请注意不同的位置和扩展名。这是允许的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T15:03:03.480

如果您使用的是 GPL 库，则必须使用 GPL。

我现在找不到它，但它在 GNU 页面上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:02:20.390

根据 FSF，如果您要链接到外部 GPLd 库，则您自己必须是 GPLd。

编辑（评论）：话虽如此，如果您只是动态链接到所述 GPLd 库而不提供它们，则可以提出论点，不需要。然而，这不是 FSF 的立场，但据我所知，没有人在法律上质疑过他们的解释。

[http://en.wikipedia.org/wiki/GNU_General_Public_License#Libraries](http://en.wikipedia.org/wiki/GNU_General_Public_License#Libraries)有一些讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T01:40:09.023

上面的第 (1) 项将您锁定在 GPL 中。如果您使用 LGPL，则您允许其他人以他们可以编写商业软件或仅非 GPL 软件的方式链接您的代码。因此，基本上，如果您绝对希望基于您的代码编写的所有内容随后也都是开源的，那么您必须使用 GPL。

# iphone - iphone sdk 中的 UndoManager

> ID：11331531
> 
> 赞同：3
> 
> 时间：2012-07-04T15:00:27.147
> 
> 标签：iphone, objective-c, ios

我想在我的应用程序中应用撤消和重做操作。我阅读了苹果文档并搜索了它，但没有得到正确的解决方案。在我的应用程序中，我在 UIImage 上应用了大量图像操作，我想存储每个状态并相应地应用 Undo -Redo。如何使用撤消管理器？这个怎么运作？请分享一些关于此的链接或撤消管理器教程的链接。如果有人知道，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:52:36.067

我建议您阅读[此处](http://mobileorchard.com/new-in-iphone-30-tutorial-series-part-1-shake-to-undoredo-nsundomanager/)的教程。希望这可以帮助你。享受。

# java - 在 android [SQLite 之前] 运行应用程序中存储数据的最佳选择

> ID：11331537
> 
> 赞同：0
> 
> 时间：2012-07-04T15:00:56.223
> 
> 标签：java, android, database, sqlite, storing-data

我是 android 开发和一般编程的新手。

我正在开发应用程序来为每个球员创建足球统计数据，从长远来看，我使用 SQLite 来存储数据。但是我想知道是否有一种方法以及是否有意义，可以在每次用户尝试添加新统计信息时在我的应用程序运行期间存储数据而不将其插入数据库。

另外我想知道这样做是否有意义，我最大的担心是一直将数据插入数据库会减慢我的应用程序的速度，我会很感激更有经验的开发人员所知道的，并考虑这个问题'

我试图研究这个主题，但我得到的只是将数据存储在数据库中，并使用 SharedPreferences，我认为这不是我想要的，但我可能是错的。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:06:47.187

SQlite 是您正在寻找的。`SharedPreferences`仅用于此-偏好，而不是大量统计数据。

将您的数据库代码放在一个单独的线程中，您不会注意到您的应用程序有任何变慢。回到这里寻求帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:08:42.317

我不能直接与 android 对话，但我在 iPhone 和桌面应用程序上遇到过类似的设计问题。

这取决于应用程序的具体情况，什么是最好的方法。如果您的应用程序主要是关于输入播放和保存统计数据，我会在内存中保留一小组最新统计数据，足以填充用户界面，然后创建一个在后台线程上运行的“数据管理器”，其唯一目的是插入这些数据新添加到数据库的统计信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:09:35.187

老实说，我会立即将其放入数据库中。使用 android 的工作方式，如果您的用户导航到另一个应用程序（或者甚至可能接到电话），他们已经输入的数据可能会丢失。

显然可以涵盖这种意外情况（保存`onPause`等），但我一直认为尽快将数据放入永久存储中更安全。（注意这是一个激烈争论的话题，我只是陈述我的偏好）。

立即保存到数据库不会影响应用程序的速度（取决于您插入的数据类型），而不会影响电池寿命。访问永久存储需要更多的功率，因为​​处理器需要采取更多步骤。

如果您在 UI 线程以外的线程中执行所有 DB 活动，则事务在应用程序速度方面几乎完全不明显。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T15:10:09.540

如果你使用实现加载器回调它不应该减慢你的应用程序。看看[Loader 类](http://developer.android.com/guide/components/loaders.html)。它们可通过 Android 兼容性库获得。

# wpf - 为什么此 Xaml 路径会崩溃 silverlight？

> ID：11331549
> 
> 赞同：5
> 
> 时间：2012-07-04T15:01:30.137
> 
> 标签：wpf, silverlight, xaml

任何知道答案的人的快速简单点：

以下 Xaml 路径在 WPF 中运行良好，但在 Silverlight 中崩溃。我可以在 Kaxaml 中验证这种行为。

路径代码是

```
<Path Fill="#FFEDEDED" StrokeThickness="1" Stroke="#FFA3A3A3" Opacity="0.7" 
                VerticalAlignment="Center" HorizontalAlignment="Center" >
    <Path.Data>
        <PathGeometry Figures="m 1 2 l 4.0525 5.2361 l 4.0527 -5.2361 z "/>
    </Path.Data>
</Path> 
```

例外是脚本错误

> Silverlight 应用程序中未处理的错误。无法从文本“m 1 2 l 4.0525 5.2361 l 4.0527 -5.2361 z”创建 System.Windows.Media.PathFigureCollection

它应该像这样绘制一个三角形：

![在此处输入图像描述](../Images/7eac69adc2b3b2fa4bdc42b9d31c7214.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-04T15:29:20.190

与 WPF 不同，Silverlight 不支持将字符串转换为图形。

* * *

我在 Expression Blend 中收到以下下划线/悬停错误消息：

![在此处输入图像描述](../Images/978f8898e331d3ad91c7f05b17cccda0.png)

* * *

Silverlight 通过 Blend 创作的等效三角形是：

```
<Path Fill="#FFEDEDED" StrokeThickness="1" Stroke="#FFA3A3A3" Opacity="0.7" 
                VerticalAlignment="Center" HorizontalAlignment="Center"
                Data="m 1 2 l 4.0525 5.2361 l 4.0527 -5.2361 z" /> 
```

# python - Python：未创建对象

> ID：11331555
> 
> 赞同：1
> 
> 时间：2012-07-04T15:01:48.157
> 
> 标签：python, class, allocation

看看下面的方法：

```
def load_ad_mediums_from_file(self, filename ):
    file = io.open( filename, "r" )
    ad_mediums = {}
    for line in file:
        if len(line) > 0 and line[0] != 'a':
            parts = line.strip().split(";")
            ad_medium = Objects.Ad_Medium()
            ad_medium.id = int( parts[0] )
            for i in range(1,8):
                cat_parts = parts[i].strip().split(",")
                category_id = int(cat_parts[0]);
                ad_medium.categories[category_id] = float(cat_parts[1])
                ad_medium.impressions[category_id] = int(cat_parts[2]) 

            ad_mediums.update( { ad_medium.id : ad_medium } )
    file.close()
    return ad_mediums 
```

问题：尽管文件中的每一行都不同，但 ad_mediums 字典中的值都具有相同的值。在我看来，新对象“ad_medium = Objects.Ad_Medium()”的创建似乎没有任何效果，只是简单地覆盖了前一个循环对象的值。

我怎样才能解决这个问题？

编辑： Ad_Medium 类

```
class Ad_Medium(object):

id = 0
categories = { 1:0.0, 2:0.0, 3:0.0, 4:0.0, 5:0.0, 6:0.0, 7:0.0 }
impressions = { 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0  } 

def __str__(self):
    string = str(self.id) + ";"
    for i in range(1,8):
        string += str(i) + "," + str( self.categories[i] ) + "," + str( self.impressions[i] ) + ";"
    return string[:-1] + "\n"

def normalize_categories_with_impressions(self ):
    impressions = 0.0
    for i in range(1,8):
        impressions += float(self.impressions[i])

    if impressions == 0.0: 
        return

    for i in range(1,8):
        self.categories[i] = float(self.categories[i])/float(impressions)

def reset_categories(self):
    for i in range(1,8):
        self.categories[i] = 0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T15:15:04.067

在您的类定义中，id、类别和印象是类属性（由所有实例共享）。该`ad_medium.id = int( parts[0] )`语句定义了一个“id”实例属性，但所有对类别和印象的操作（不是反弹而是突变）都在类属性上工作。您希望您的类定义有一个初始化方法，您可以在其中创建实例属性，即：

```
class Ad_Medium(object):
    def __init__(self):
        self.id = 0
        self.categories = { 1:0.0, 2:0.0, 3:0.0, 4:0.0, 5:0.0, 6:0.0, 7:0.0 }
        self.impressions = { 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0  } 
```

我强烈建议你多了解 Python 的对象模型、属性查找规则等。

# mysql - 通过触发器为表应用列权限

> ID：11331562
> 
> 赞同：0
> 
> 时间：2012-07-04T15:02:31.913
> 
> 标签：mysql, triggers, relational-database

现在，我有一个名为 members 的表，其中包含内容，分为联系人数据、银行数据......
现在，管理员应该能够创建、更新、删除用户，这些用户保存在另一个表中，其中只能访问管理员。用户应该拥有自己的 mysql 用户帐户，管理员也应该能够设置权限，就像用户无法访问银行数据一样。
现在，我做了一个触发器，它创建和删除用户帐户。现在我想对触发器应用权限，但我没有找到一个有前途的解决方案
，我已经对设置列权限提出了要求，但是如果我想添加一个列，我会有另一件事，在这种情况下我必须编辑.
我还强调了 1:1 的关系，但我没有找到有效的代码。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T23:52:35.233

简短的回答：不要让您的用户直接访问数据库。他们应该永远无法连接。只有负责维护和操作的人员才能访问生产数据库。这是出于安全原因。几乎在所有信息存储在数据库中的情况下，都有一个应用程序控制所有访问，它处理实际更新，并强制执行您选择的业务逻辑。

不要将数据与业务逻辑混为一谈。

有一些数据库系统，比如 Oracle，它们擅长让你的存储和应用你的大部分业务逻辑到数据库本身。但是，这是针对不同类型的应用程序和构建系统的不同方法。

MySQL 没有所有这些工具来让这件事变得如此简单。相信我，当我告诉您，如果您尝试在触发器、存储过程和视图中编写应用程序逻辑，然后让您的用户直接访问数据库，那么您正在为维护噩梦做准备。

当您注册某项服务时，您最后一次获得直接数据库访问权限是什么时候？Twitter、Netflix、Groupon、Facebook——您正在与基于 Web 的应用程序交互，该应用程序应用业务规则并代表您将数据读取和写入数据库。

有很多工具可以让您更轻松地编写应用程序软件：调试、分析、代码和协作开发的源代码控制、单元测试、持续集成和部署工具。如果您尝试将所有内容写入数据库，您将失去所有这些。

这是一个如何工作的简单示例：

将您的权限系统构建为三个表：user、group、user_group。用户拥有您系统中的用户帐户，组拥有各种访问级别，例如“管理员”、“客户端”、“匿名”等。组是您为用户分配访问级别的方式。

```
`CREATE TABLE `user` (
`user_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
`email` varchar(64) NOT NULL,
PRIMARY KEY (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

 CREATE TABLE `group` (
  `group_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(32) NOT NULL,
  PRIMARY KEY (`group_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `user_group` (
  `user_id` int(10) unsigned NOT NULL,
  `group_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`group_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;` 
```

现在定义一些组

```
`insert into `group` (name) values ('admin'), ('user'), ('anonymous');` 
```

和一个用户，然后将他们添加到管理员组：

```
`insert into user (email) values ('admin@yoursite.com');`
`insert into user_group (user_id,group_id) values (1,1);` 
```

现在这个权限模型表明一个用户可以属于一个或多个安全组。您的应用程序将检查这些组并根据结果执行不同的操作。让我们看一些伪代码：

加载用户组：

```
class User {

  private $user_id;
  private $groups;
  private $db;

  function load_groups() {
    // query the database
    $result = $db->query("SELECT name FROM `group` g JOIN user_group ug USING (group_id) WHERE user_id={$this->user_id}");
    // save an array of group names
    while ($row = $result->fetchrow()) {
      $this->groups[] = $row['name'];
    }
  }

  function is_member($group) {
    if (in_array($group, $this->groups) {
      return true;  // user group includes this value
    }
    return false;  // user is not in the group
 } 
```

现在在您的应用程序中，您可能有一个查看数据的功能，但它会根据用户的组产生不同的结果：

```
function display_data($user_object) {
   display_basic_data();   // everyone sees the basic data
   if ($user_object->is_member('admin')) {  
     // if the user is an admin, then display bank data too
     display_bank_data();
   }
} 
```

同样，您修改数据的功能应验证用户是否有权更改内容。

# android - 使用 pojo 和使用 CRUD 操作的 Android SQLite 示例

> ID：11331569
> 
> 赞同：-1
> 
> 时间：2012-07-04T15:03:06.100
> 
> 标签：android, sqlite, sqliteopenhelper, android-sqlite

谁能给我一个简单的例子，使用 CURD 操作在 android 中使用 SQLite 数据库，还包括 onCreate 和 onUpdate 方法。最重要的是使用 POJO...如果不需要使用 POJO，请简要介绍一下...我花了很多时间学习 dis 和观看教程，但我仍然无法理解。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:11:12.483

我不确定这里有很多东西要说，也不会作为教程出现。这家伙的教程在当天帮助了我：[http ://www.vogella.com/articles/AndroidSQLite/article.html#databasetutorial](http://www.vogella.com/articles/AndroidSQLite/article.html#databasetutorial)

也许您最好使用[ORMLite 之](http://ormlite.com/javadoc/ormlite-core/doc-files/ormlite_1.html#Getting-Started)类的库，它可以让您使用数据库元数据简单地注释 POJO，然后调用简单的查询和 CRUD 方法。

# mysql - 复制行但使用新 ID

> ID：11331573
> 
> 赞同：70
> 
> 时间：2012-07-04T15:03:35.317
> 
> 标签：mysql

我有一个自动递增`id`和任意数量的列的表“测试”。

我想在这个表中复制一行，除了`id`当然之外，所有列都相同。

有没有办法在不命名所有列的情况下做到这一点？

我认为`INSERT... SELECT... ON DUPLICATE KEY`会帮助我，直到我意识到它永远不会生成`INSERT ON DUPLICATE`，它只是更新现有的行。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-07-04T15:09:31.493

假设您的表具有以下字段：

```
( pk_id int not null auto_increment primary key,
  col1 int,
  col2 varchar(10)
) 
```

然后，要将值从一行复制到具有新键值的另一行，以下查询可能会有所帮助

```
insert into my_table( col1, col2 ) select col1, col2 from my_table where pk_id=?; 
```

这将为字段生成一个新值，并`pk_id`从 和 复制所选行的值。`col1``col2`

您可以扩展此示例以应用表中的更多字段。

**更新**：
*充分尊重 JohnP 和 Martin 的评论*-

我们可以使用临时表先从主表缓冲，然后再用它复制到主表。仅更新临时表中的 pk 引用字段将无济于事，因为它可能已经存在于主表中。相反，我们可以从临时表中删除 pk 字段并将所有其他字段复制到主表中。

[参考Tim Ruehsen](https://stackoverflow.com/a/8077952/767881)在[参考帖子](https://stackoverflow.com/questions/729489/duplicate-copy-records-in-the-same-mysql-table)中的回答：

```
CREATE TEMPORARY TABLE tmp SELECT * from my_table WHERE ...;
ALTER TABLE tmp drop pk_id; # drop autoincrement field
# UPDATE tmp SET ...; # just needed to change other unique keys
INSERT INTO my_table SELECT 0,tmp.* FROM tmp;
DROP TEMPORARY TABLE tmp; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-08T15:54:39.047

这适用于 MySQL 所有版本和 Amazon RDS Aurora：

```
INSERT INTO my_table SELECT 0,tmp.* FROM tmp; 
```

或者

> 将索引列设置为 NULL，然后执行 INSERT。

但不是在 MariaDB 中，我测试了版本 10。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-26T20:02:34.973

## 这仅适用于复制一行

*   从您的表中选择您的一行
*   获取所有关联
*   取消设置 ID 行（唯一索引键）
*   将数组 [0] 键内嵌到列名中
*   将数组 [0] 值内嵌到列值中
*   运行查询

编码：

```
 $qrystr = "SELECT * FROM mytablename  WHERE id= " . $rowid;
 $qryresult = $this->connection->query($qrystr);
 $result = $qryresult->fetchAll(PDO::FETCH_ASSOC);
 unset($result[0]['id']); //Remove ID from array
 $qrystr = " INSERT INTO mytablename";
 $qrystr .= " ( " .implode(", ",array_keys($result[0])).") ";
 $qrystr .= " VALUES ('".implode("', '",array_values($result[0])). "')";
 $result = $this->connection->query($qrystr);
 return $result; 
```

当然你应该使用 PDO:bindparam 并检查你的变量是否受到攻击等，但给出了例子

**附加信息**

如果您在处理`NULL`值时遇到问题，您可以使用以下代码，以便`imploding`名称和值仅适用于其值不是`NULL`.

```
foreach ($result[0] as $index => $value) {
    if ($value === null) unset($result[0][$index]);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-06-26T11:58:52.263

```
SET @table = 'the_table';
SELECT GROUP_CONCAT(IF(COLUMN_NAME IN ('id'), 0, CONCAT("\`", COLUMN_NAME, "\`"))) FROM INFORMATION_SCHEMA.COLUMNS
                  WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = @table INTO @columns;
SET @s = CONCAT('INSERT INTO ', @table, ' SELECT ', @columns,' FROM ', @table, ' WHERE id=1');
PREPARE stmt FROM @s;
EXECUTE stmt; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-25T11:40:41.260

根据有多少列，您可以只命名列，不使用 ID，然后手动添加一个 ID，或者，如果它在您的表中，则添加一个辅助 ID (sid)：

`insert into PROG(date, level, Percent, sid) select date, level, Percent, 55 from PROG where sid = 31` 在这里，如果 sid 31 有多个结果行，所有这些都将被复制到 sid 55 并且您的自动 ID 仍将自动生成。仅用于 ID： `insert into PROG(date, level, Percent, ID) select date, level, Percent, 55 from PROG where ID = 31` 其中 55 是表中的下一个可用 ID，ID 31 是您要复制的 ID。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-11-27T13:04:43.430

```
INSERT into table_name (  
    `product_id`, 
    `other_products_url_id`, 
    `brand`, 
    `title`, 
    `price`, 
    `category`, 
    `sub_category`, 
    `quantity`, 
    `buy_now`, 
    `buy_now_url`, 
    `is_available`, 
    `description`, 
    `image_url`, 
    `image_type`, 
    `server_image_url`, 
    `reviews`, 
    `hits`, 
    `rating`, 
    `seller_name`, 
    `seller_desc`, 
    `created_on`, 
    `modified_on`, 
    `status`) 
SELECT 
    `product_id`, 
    `other_products_url_id`, 
    `brand`, 
    `title`, 
    `price`, 
    `category`, 
    `sub_category`, 
    `quantity`, 
    `buy_now`, 
    concat(`buy_now_url`,'','#test123456'), 
    `is_available`, 
    `description`, 
    `image_url`, 
    `image_type`, 
    `server_image_url`, 
    `reviews`, 
    `hits`, 
    `rating`, 
    `seller_name`, 
    `seller_desc`, 
    `created_on`, 
    `modified_on`, 
    `status` 
FROM `table_name` WHERE id='YourRowID'; 
```

# c# - 以值启动程序

> ID：11331574
> 
> 赞同：2
> 
> 时间：2012-07-04T15:03:39.263
> 
> 标签：c#

对不起，我真的不能用谷歌搜索这个，因为我不确定如何用几句话正确地说出来。

但基本上我想要类似的东西，当你通过 dos 或通过如下所示的快捷方式打开程序时：

> "c:\program.exe" 值1 值2

我的应用程序将能够使用这些值。但是当我不输入值时，我的应用程序仍然可以正常启动。

我希望我在这里想说的有任何意义

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T15:05:40.057

这些是传递给您的主要功能的参数：

```
public static void main (string[] args)
{
    // Check to see if at least two args were passed in.
    if(args.Length >= 2)
    {
        Console.WriteLine(args[0]); // value1
        Console.WriteLine(args[1]); // value2
    }
} 
```

但是请记住，无法保证传入参数的顺序或者它们是您期望的值。您应该使用命名参数，然后在应用程序开始时解析和验证它们。您的命令可能类似于：

```
C:\program.exe /V1 value1 /V2 value2 
```

至于一个好的解析器列表，我会查看：

[.net - 在 C# 中解析命令行参数的最佳方式](https://stackoverflow.com/questions/491595/best-way-to-parse-command-line-arguments-in-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:06:44.887

查看 Microsoft[命令行参数教程](http://msdn.microsoft.com/en-us/library/aa288457%28v=vs.71%29.aspx)

如果未提供参数，则只需使用一些默认值。

```
public static void Main(string[] args)
{
   // The Length property is used to obtain the length of the array. 
   // Notice that Length is a read-only property:
   Console.WriteLine("Number of command line parameters = {0}",
      args.Length);
   for(int i = 0; i < args.Length; i++)
   {
       Console.WriteLine("Arg[{0}] = [{1}]", i, args[i]);
   }

   if(args.length < 2) 
   { 
       x = 1;
   }  else {
   {
       x = Arg[2]; 
   } 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T15:08:00.323

当您创建一个可执行文件时，您有一个具有 Main(string[] args) 的 Main 函数，您可以在此处读取用于调用该程序的参数。

如果您想要默认值，您可以使用定义的值创建一个类变量（或使用应用程序属性），并且如果使用参数调用程序程序，则覆盖它们。

希望它可以帮助你:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T15:07:33.900

以这种方式从命令行执行您的 Program.exe

C:\程序测试1测试2

要了解如何在 C# 中执行此操作，请使用链接[MSDN](http://msdn.microsoft.com/en-us/library/aa288457%28v=vs.71%29.aspx)

# c# - 使用 MongoDB C# 映射私有支持字段

> ID：11331575
> 
> 赞同：8
> 
> 时间：2012-07-04T15:03:40.557
> 
> 标签：c#, mongodb, mongodb-.net-driver

我正在尝试在 MongoDB 中映射一个私有支持字段。
我的模型看起来像：

```
public class Competitor
{
    private IList<CompetitorBest> _competitorBests;

    public virtual int CompetitorId { get; set; }

    public virtual string Name
    {
        get
        {
            if (Type == "Team")
                return TeamName;

            return FirstName + " " + LastName;
        }
    }

    public virtual IEnumerable<CompetitorBest> CompetitorBests
    {
        get { return _competitorBests.ToArray(); }
    }
} 
```

我基本上是在尝试将 _competitorBests 映射为 CompetitorBests（存在于我的 mongo 文档中）

**注意：**此模型由 NHibernate 共享（因此`virtual`）
我在文档中看不到任何明显的内容。

我该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-04T15:25:55.740

这成功了：

```
BsonClassMap.RegisterClassMap<Competitor>(cm =>
{
    cm.AutoMap();
    cm.MapField("_competitorBests").SetElementName("CompetitorBests");
}); 
```

# android - 如何将壁纸打包成apk？

> ID：11331578
> 
> 赞同：3
> 
> 时间：2012-07-04T15:04:05.473
> 
> 标签：android

我没有任何编程知识，但我安装了 Eclipse 和 android SDK。我想将一些壁纸打包成一个apk并在android市场上发布。有人可以给我看一个教程或解释如何做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:57:34.650

构建应用程序时放置在 res 文件夹中的文件放在 apk 中。

尽管除了您自己的应用程序之外，它们不能用于外部使用。Aka，您将无法通过内置的壁纸选择器选项选择它们。

您必须让 apk 在运行时将资源文件复制到 SDCard。

实际上这是另一个问同样问题的问题：

[如何将壁纸放在apk文件中？](https://stackoverflow.com/questions/3717752/how-to-put-a-wallpaper-inside-an-apk-file)

它相对简单，但需要一些基本的 android 和编程技能。

1.  将所有壁纸存储在 res 文件夹 (apk) 中。

2.  当应用程序启动时，将资源文件一一保存到 SDCard。（首先检查它们是否已经存在）。

3.  用户现在可以浏览他/她的照片并查看您的壁纸。- 因此能够将它们设置为壁纸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T10:11:29.347

如果你没有任何编程知识，也没关系。这是一个 android 壁纸应用程序示例代码，您可以轻松地在里面替换您的图片 url（应该在互联网上）。

[Android壁纸应用教程（1-4）](http://jmsliu.com/1879/android-gridview-example-in-real-wallpaper-app.html)

# java - 杰克逊反序列化特定吸气剂关闭

> ID：11331580
> 
> 赞同：1
> 
> 时间：2012-07-04T15:04:15.477
> 
> 标签：java, json, jackson, deserialization

告诉杰克逊不要序列化特定的 getter 方法的最简单方法是什么？我只想对一个 getter 说明确，因为我有一个自定义的复杂类，所有 setter 和 getter 都应该起作用，只有一个不应该：

```
mapper.configure(SerializationConfig.Feature.AUTO_DETECT_GETTERS, true); 
```

所以这不是正确的方法。我需要告诉我我不想在这个类中使用 getter：

```
public static class EventRow implements Serializable, Cloneable, GRSerializable {
    public int x
    public int y
    public double z
    public String eventKeyValuesPacked; 

    //This getter should not be used, because there is no explicit setter
    //for    this, and also no public... And it is only unpack  
    //EventKeyValuesPacked so it would be multiple data...
    public KeyValue[] getEventKeyValues() {
       KeyValue[] kvs = DA_EventKey.unpackKeyValues(eventKeyValuesPacked);
       return kvs == null ? new KeyValue[0] : kvs;
   }
} 
```

是否有任何注释或`SerializationConfig`选项可以使`getEventKeyValues()`getter 方法不可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:23:22.270

> 告诉杰克逊不要序列化特定的 getter 方法的最简单方法是什么......没有注释？

无需编写客户序列化程序...

如果不希望直接注释要跳过的字段/属性/getter/setter，另一种方法是利用[Jackson Mix-In 功能](http://wiki.fasterxml.com/JacksonMixInAnnotations)。

另一种仅用于序列化的方法是利用[Jackson JSON Views 功能](http://wiki.fasterxml.com/JacksonJsonViews)，尽管这也需要某种能力的注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:07:30.290

对此有一个注释：[`@JsonIgnore`](http://jackson.codehaus.org/1.0.1/javadoc/org/codehaus/jackson/annotate/JsonIgnore.html)。

```
@JsonIgnore
public KeyValue[] getEventKeyValues() {
... 
```

如果您不想为此使用注释，则需要编写[自定义序列化](http://wiki.fasterxml.com/JacksonHowToCustomSerializers)程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T16:18:42.260

objectMapper.configure(SerializationConfig.Feature.AUTO_DETECT_GETTERS, false);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T15:18:30.803

我认为这几乎可以做到：

> objectMapper.configure(DeserializationConfig.FAIL_ON_UNKNOWN_PROPERTIES, false);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T17:35:14.790

这可能取决于 Jackson 版本——在 1.9 之前，getter 和 setter 是分开处理的，因此自动检测 getter 就足够了。但是在 1.9 及更高版本中，setter/getter/field 都组合成逻辑属性，这可以让 Jackson 从 setter 中推断出属性的存在。

因此，您可能还需要禁用 setter 检测。已经给出的其他选项也可以使用，混合注释是执行此操作的常用方法。

# git - 如何使“git diff”输出正常的差异格式（非统一，非上下文）？

> ID：11331582
> 
> 赞同：16
> 
> 时间：2012-07-04T15:04:23.837
> 
> 标签：git, diff

我想`git diff`输出正常的、普通的旧差异输出（不是统一差异，也不是上下文差异）。

我要这个：

```
$ diff file1 file2
2c2
< b
---
> B
4d3
< d
5a5
> f 
```

我不想要统一输出：

```
$ diff -u file1 file2
--- file1       2012-07-04 07:57:48.000000000 -0700
+++ file2       2012-07-04 07:58:00.000000000 -0700
@@ -1,5 +1,5 @@
 a
-b
+B
 c
-d
 e
+f 
```

我不想要上下文输出：

```
$ diff -c file1 file2
*** file1       2012-07-04 07:57:48.000000000 -0700
--- file2       2012-07-04 07:58:00.000000000 -0700
***************
*** 1,5 ****
  a
! b
  c
- d
  e
--- 1,5 ----
  a
! B
  c
  e
+ f 
```

我尝试了各种`git difftool --tool=`args 没有运气，但我没有找到任何相关的`git diff --help`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-05T23:54:47.870

```
git difftool --extcmd=diff 
```

或者，无需提示：

```
git difftool --extcmd=diff --no-prompt 
```

这`git difftool`不是`git diff`但它正在做我想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T18:56:37.327

您可以使用相同的脚本（有关详细信息，请参阅 man git(1)）：

```
$ cat diff.sh
#!/bin/sh
# get args: path old-file old-hex old-mode new-file new-hex new-mode

diff "$2" "$5"

return=$?
if [ $return -le 1 ]; then
    exit 0
else
    exit $return
fi

$ GIT_EXTERNAL_DIFF=./diff.sh git diff HEAD^..HEAD 
```

# security - 加盐密码安全

> ID：11331589
> 
> 赞同：0
> 
> 时间：2012-07-04T15:04:43.833
> 
> 标签：security, passwords, salt, password-hash

为什么为每个密码使用不同的盐存储密码更安全？由于密码在加盐后被散列，我认为没有理由使用不同的盐。

用已知的盐或其他东西暴力破解密码更容易吗？或者黑客一旦知道了盐，他们会制作自己的彩虹表吗？

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T15:07:53.990

当您为每个密码提供自己的盐时，每个密码中的每个盐之间没有共同的联系。因此，即使“黑客”破解了一个密码，他也不会有任何其他密码的盐。

在使用 PHP 和加盐密码时，您应该使用慢速加密，例如 crypt。加密的速度越快，“黑客”就能越快找到解密它的方法。

您可以简单地创建一个基于人的用户名、电子邮件或一些东西的组合创建新盐的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T15:12:35.503

如果你只使用一种盐，黑客只需重建他们的彩虹表一次，就可以将它们用于你的整个数据库。重复的密码也更容易找到。

使用单独的哈希和昂贵的算法（bcrypt、scrypt）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-21T01:41:55.017

好的，让我们直截了当地说：盐渍与彩虹表无关。是的。再说一次。盐渍与彩虹桌无关。

嗯，这并不完全正确。通过将攻击一个哈希的成本与其他哈希的成本分摊，盐用于防止时间和内存的权衡。

在彩虹表的情况下，使用盐意味着整个表无效。

但是还有其他方法可以使整个表无效。您可以将静态字符串附加到每个密码（**不是**盐）。那会打败彩虹桌......

**真正的敌人**

这里真正的敌人不是彩虹桌。真正的敌人是蛮力。现代机器的暴力破解速度如此之快，以至于构建一个巨大的 GPU 集群并进行高级暴力破解比存储足够的彩虹表以使其值得缓慢的磁盘访问更便宜。

盐有助于击败暴力破解，因为它是独一无二的。不是每个密码。不是每个用户，但在宇宙中是独一无二的（至少在统计上）。这就是为什么您要使用随机数，而不是用户名、电子邮件或任何可预测的东西。

同样，不是因为我们不想要可预测性。但是因为我们想要统计唯一性。如果攻击者攻击两个都使用用户名作为盐的站点，他可以同时分摊他对两个哈希的攻击（即使两者可能使用不同的密码）。

盐应该是随机的，并且每个用户。

# java - ArrayList 插入和检索顺序

> ID：11331591
> 
> 赞同：103
> 
> 时间：2012-07-04T15:04:49.803
> 
> 标签：java, collections

假设我在一个`ArrayList`. 插入和检索的顺序`ArrayList`是否相同？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-07-04T15:06:47.097

**是**的。ArrayList 是一个**顺序列表**。因此，插入和检索顺序是相同的。

如果您**在检索期间**添加元素，则顺序将不会保持不变。

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2012-07-04T15:15:40.183

是的，ArrayList 是一个有序集合，它维护插入顺序。

检查下面的代码并运行它：

```
public class ListExample {

    public static void main(String[] args) {
        List<String> myList = new ArrayList<String>();
        myList.add("one");
        myList.add("two");
        myList.add("three");
        myList.add("four");
        myList.add("five");

        System.out.println("Inserted in 'order': ");
        printList(myList);
        System.out.println("\n");
        System.out.println("Inserted out of 'order': ");

        // Clear the list
        myList.clear();

        myList.add("four");
        myList.add("five");
        myList.add("one");
        myList.add("two");
        myList.add("three");

        printList(myList);
    }

    private static void printList(List<String> myList) {
        for (String string : myList) {
            System.out.println(string);
        }
    }
} 
```

产生以下输出：

```
Inserted in 'order': 
one
two
three
four
five

Inserted out of 'order': 
four
five
one
two
three 
```

有关详细信息，请参阅文档：[`List (Java Platform SE7)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2012-07-04T15:06:59.250

如果您总是添加到末尾，那么每个元素都将添加到末尾并保持这种状态，直到您更改它。

如果您总是在开头插入，那么每个元素将以您添加它们的相反顺序出现。

如果将它们插入中间，则顺序会有所不同。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-03-14T16:27:08.630

是的，它永远都是一样的。从[文档](https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html)

> 将指定元素附加到此列表的末尾。参数：要附加到此列表的 e 元素 返回：true（由 Collection.add(java.lang.Object) 指定）

数组列表`add()`实现

```
public boolean More ...add(E e) {
    ensureCapacity(size + 1);  // Increments modCount!!
    elementData[size++] = e;
    return true;
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-04T15:12:20.667

是的，它保持不变。但为什么不轻易测试呢？制作一个 ArrayList，填充它，然后检索元素！

# php - PHP else/if 语句

> ID：11331594
> 
> 赞同：-2
> 
> 时间：2012-07-04T15:04:56.253
> 
> 标签：php, if-statement

我编写了以下 PHP 语句，但每次我尝试将它组合到 else/if 中时，它都会中断。

有人可以建议吗？我是 PHP 新手，有点卡住了。

谢谢 ：）

```
<?php if (is_page( 19 ) ) {?>
<div class="imageSlider"><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image.jpg" alt="" /><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image2.jpg" alt="" /><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image3.jpg" alt="" /></div>
<?php }?>

<?php if (is_page( 23 ) ) {?>
<div class="imageSlider"><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image.jpg" alt="" /><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image.jpg" alt="" /><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image.jpg" alt="" /></div>
}
<?php }?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T15:17:42.577

使用此语法：

```
<?php if (condtion):?> 
 // html goes here,
<?php elseif(condtion): ?>
 // html goes here,
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:12:31.680

**这是使用您的代码的 if/else 示例**

```
<?php if (is_page(19)) { ?>
    //Insert html
<? { elseif (is_page(23)) } ?>
   //Insert other html
<? } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:07:44.800

```
<?php if (is_page( 19 ) ) {?> 
<div class="imageSlider"><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image.jpg" alt="" /><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image2.jpg" alt="" /><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image3.jpg" alt="" /></div> 
<?php } elseif (is_page( 23 ) ) {?> 
<div class="imageSlider"><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image.jpg" alt="" /><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image.jpg" alt="" /><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image.jpg" alt="" /></div>
<?php }?> 
```

# actionscript-3 - 如何在没有页面设置对话框的情况下打印？

> ID：11331597
> 
> 赞同：0
> 
> 时间：2012-07-04T15:05:01.383
> 
> 标签：actionscript-3, printing, air, dialog, page-setup

我正在尝试用 Air 打印一些东西。现在一切正常，但页面设置格式每次都会出现。我想要实现的是自动选择标准打印机和标准纸张尺寸。所以没有弹出对话框。

我发现 `var myPrintJob:PrintJob = new PrintJob(); if (myPrintJob.supportsPageSetupDialog) { myPrintJob.showPageSetupDialog(); }` 了，但这只是提供了实际展示它的可能性。有没有办法不显示它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:54:47.547

看看这里：[http](http://help.adobe.com/en_US/as3/dev/WS059b243ca571213c1e18d17a124d9fca6d8-8000.html) ://help.adobe.com/en_US/as3/dev/WS059b243ca571213c1e18d17a124d9fca6d8-8000.html showPageSetupDialog 函数是可选的，所以你不能调用它。如果要更改代码中打印作业的参数，请参阅上面链接的“更改打印设置”部分。希望能帮助到你。

# javascript - 骨干.js ajax 调用

> ID：11331604
> 
> 赞同：9
> 
> 时间：2012-07-04T15:05:22.073
> 
> 标签：javascript, backbone.js

我正在为正在构建的新应用程序学习 Backbone.js。我需要执行 AJAX 调用（`REST SERVICE`）来进行身份验证。

这个电话的正确位置在哪里？在模型、视图或其他地方？特别与 Backbone.js MVC 模型相关。

```
<html>
<head>
<script src="lib/jquery-1.6.1.min.js"></script>
<script src="lib/json2.js"></script>
<script src="lib/underscore-min.js"></script>
<script src="lib/backbone-min.js"></script>   

<script language="javascript">
      $(function(){
         var LoginView = Backbone.View.extend({
          el: $("#login-form"),

          events: {
            "click #login": "login"
          },

          login: function(){
              alert("Hello");
           }
        });

        window.LoginView = new LoginView();
      });
    </script>   
  </head>
  <body>
    <form action="/login" id="login-form">
      Username: <input type="text" id="username"><br>
      Password: <input type="password" id="password"><br>
      <button id="login">Login</button>
    </form>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-04T16:29:35.977

创建一个身份验证模型，它存储发布状态（用户名、密码、记住我）以及响应状态（登录失败、登录接受）...

```
App.Model.authentication= Backbone.Model.extend({
    defaults: {
        Username: "",
        Password: "",
        RememberMe: false,
        LoginFailed: false,
        LoginAccepted: false
    },
    url:"api/authentication"
}); 
```

更新视图以使用模型：

```
 $(function () {
    var LoginView = Backbone.View.extend({
        model: new App.Model.authentication(),
        el: $("#login-form"),
        events: {
            "click #login": "login"
        },

        login: function () {
            this.model.save({username: this.$el.find("#username"),
                password: this.$el.find("#password")}, {
                success: function () {
                    /* update the view now */
                },
                error: function () {
                    /* handle the error code here */
                }
            });
        }
    });
} 
```

);

调用 Model.Save() 将向服务器发出一个发布请求，尽管在这种情况下在服务器上您实际上并没有保存任何东西，而是检查凭据并发送回具有相同模型但使用“LoginAccepted”的对象字段设置得当。

不要实现自定义 JQuery AJAX 帖子 - 它不符合骨干网的精神，它通过其 REST 接口在后台为您处理这一切。

有关 REST 接口以及主干在此处使用的各种 REST 操作和 URL 的更多详细信息：http: [//codebyexample.info/2012/04/30/backbone-in-baby-steps-part-3/](http://codebyexample.info/2012/04/30/backbone-in-baby-steps-part-3/)

关于 AJAX 与 model.save() 辩论的另一件事。如果您的应用程序是像 IRC 这样的无状态聊天室 - 它向聊天室中的其他用户发送消息但不集中保存消息......您是否会丢弃所有骨干网的 REST 功能并使用自定义 AJAX 调用重新实现它们因为您实际上并不是在“保存”，而实际上只是在“发送”。仅仅因为语义，这将花费你大量的工作来重新实现已经存在的功能。始终将 model.save() 读取为 model.post() - 它不仅仅是为了保存 - 它是为了发送。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-04T16:24:03.770

您总是从视图开始，因为您的 DOM 交互（包括表单提交）发生在视图中。

然后，如果我是你，我会在 User 模型中添加一个自定义方法，并从视图中调用该方法。登录方法不完全适合本机 Backbone 同步，因为您没有尝试添加/更新/检索任何内容（请注意，出于安全原因，您不想从服务器加载用户密码或密码哈希）。因此，您可以在不调用 Backbone fetch() 的情况下进行常规 Ajax 调用。所以，给你：

```
var UserModel = Backbone.Model.extend({
  ...
  checkLogin: function(name, password) {
    var self = this;
    $.post('/login', { name: name, password: password }, function(data) {
      self.set(data); // data should be in JSON and contain model of this user
    }, 'json').error(
      self.trigger('loginError'); // our custom event
    );
  }
}); 
```

和观点：

```
var UserView = Backbone.View.extend({
  events: {
    'click .login': 'loginSubmit'
  },

  initialize: function() {
     _.bindAll(this, 'loginSubmit', 'loginSuccess', 'loginError');
     this.model.bind('change', this.loginSuccess);
     this.model.bind('loginError', this.loginError);
  },

  loginSubmit: function() {
    var name = 'username', // you get it from some element
        password = '***'; // you get it from another element
    this.model.checkLogin(name, password);
  },

  loginSuccess: function() {
    alert ('You have been logged in');
    console.log(this.model); // should log loaded user model
  },

  loginError: function() {
    alert ('Problem with login');
  }
}); 
```

确保将 UserModel 实例传递给 UserView 实例，例如：

```
var userModel = new UserModel,
    userView = new UserView({ model: userModel }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-14T14:27:45.847

ReST**不是**一个标准，只是一个规范，任何实际的开发人员都会在适当的时候混合使用 ReST 和 RPC。也就是说，这些答案都没有指出服务器响应应该返回一个令牌（sessionID、JSON Web 令牌等）并删除纯文本密码的事实。不这样做会带来安全风险。

# android - android完全退出应用程序并转到主应用程序屏幕

> ID：11331611
> 
> 赞同：0
> 
> 时间：2012-07-04T15:05:42.487
> 
> 标签：android

我知道这个问题被问了很多次，但我真的不明白答案，我想设置按钮，当用户点击它时我想退出应用程序（碳收集器也应该删除对象），退出后我想转到用户在移动设备上找到应用程序图标的屏幕。

退出我不知道该怎么办

为了转到可以找到应用程序图标的屏幕，我试过这样

```
Intent intent = new Intent(Intent.ACTION_MAIN);
            intent.addCategory(Intent.CATEGORY_HOME);
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(intent); 
```

但不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:12:21.613

当您启动该活动时，它将有效地停止您的应用程序的前台活动。Android 旨在不关闭应用程序，以便可以更快地重新启动。

但是，如果您真的想从内存中清除应用程序，那么您要做的是在运行时单例上杀死 exit()：http: [//developer.android.com/reference/java/lang/Runtime.html#退出（整数](http://developer.android.com/reference/java/lang/Runtime.html#exit(int)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:12:54.567

使用此方法，这将使您的应用程序进入背景并打开 home/app_menu 屏幕

```
moveTaskToBack(true); //  method available in activity 
```

[参考链接](http://developer.android.com/reference/android/app/Activity.html#moveTaskToBack%28boolean%29)

# java - 使用 JAVA 和 MS-SQL-Server 执行 T-SQL 脚本

> ID：11331613
> 
> 赞同：1
> 
> 时间：2012-07-04T15:05:47.437
> 
> 标签：java, sql-server, tsql, execute

我有个问题：

如果有这样的 T-SQL 脚本：

```
 IF NOT EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[dbo].[NDParamEmpfänger]'))
    BEGIN
        CREATE TABLE [dbo].[NDParamEmpfänger]
        (
            Id int IDENTITY(1,1) NOT NULL,
            EmpfängerName varchar(255) NOT NULL,
            EmpfängerAdresse varchar(255) NOT NULL,
            EmpfängerArt tinyint NOT NULL,
            QuittierungsTimeOut smallint NOT NULL,
            ZustellungsTimeOut smallint NOT NULL,
            Format varchar(2000) NOT NULL,
            Wiederholungen tinyint  NOT NULL
        )
    END
    GO 
```

我在这个脚本文件中读到了一个名为 ScriptRunner [(http://pastebin.com/f10584951)](http://pastebin.com/f10584951)的小类。ScriptRunner 用“GO”分隔整个脚本。

一切都很好，在我的 .sql-Script 中由“GO”分隔的单个“批次”被发送到 MS-SQL-Server。（我用 Profiler 进行了检查），但没有任何反应。

未创建表。

当我在 SQL-Management-Studio 中运行脚本时，它工作正常。

我的问题是什么？

# php - 是否可以在 PHP 中声明一个静态和非静态方法？

> ID：11331616
> 
> 赞同：75
> 
> 时间：2012-07-04T15:05:57.347
> 
> 标签：php, oop

我可以将对象中的方法声明为调用静态方法的同名静态和非静态方法吗？

我想创建一个具有静态方法“发送”和调用静态函数的非静态方法的类。例如：

```
class test {
    private $text;
    public static function instance() {
        return new test();
    }

    public function setText($text) {
        $this->text = $text;
        return $this;
    }

    public function send() {
        self::send($this->text);
    }

    public static function send($text) {
        // send something
    }
} 
```

我希望能够调用这两个函数是

```
test::send("Hello World!"); 
```

和

```
test::instance()->setText("Hello World")->send(); 
```

是否可以？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-07-04T15:19:51.607

你*可以*这样做，但它有点棘手。你必须通过重载来做到这一点：[the`__call`和`__callStatic`](http://www.php.net/manual/en/language.oop5.overloading.php#object.call)魔法方法。

```
class test {
    private $text;
    public static function instance() {
        return new test();
    }

    public function setText($text) {
        $this->text = $text;
        return $this;
    }

    public function sendObject() {
        self::send($this->text);
    }

    public static function sendText($text) {
        // send something
    }

    public function __call($name, $arguments) {
        if ($name === 'send') {
            call_user_func(array($this, 'sendObject'));
        }
    }

    public static function __callStatic($name, $arguments) {
        if ($name === 'send') {
            call_user_func(array('test', 'sendText'), $arguments[0]);
        }
    }
} 
```

这不是一个理想的解决方案，因为它使您的代码更难遵循，但只要您的 PHP >= 5.3，它就会起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-19T05:46:52.823

我将创建一个隐藏类作为构造函数，并在父类中返回该隐藏类，该隐藏类具有等于隐藏类方法的静态方法：

```
// Parent class

class Hook {

    protected static $hooks = [];

    public function __construct() {
        return new __Hook();
    }

    public static function on($event, $fn) {
        self::$hooks[$event][] = $fn;
    }

}

// Hidden class

class __Hook {

    protected $hooks = [];

    public function on($event, $fn) {
        $this->hooks[$event][] = $fn;
    }

} 
```

静态调用它：

```
Hook::on("click", function() {}); 
```

动态调用它：

```
$hook = new Hook;
$hook->on("click", function() {}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T15:23:34.403

不，你不能有两个同名的方法。您可以通过重命名其中一种方法来完成基本相同的操作。重命名`test::send("Hello World!");`为`test::sendMessage("Hello World!");`将工作。我只需创建一个带有可选文本参数的发送方法，该参数会更改方法的功能。

```
public function send($text = false) {
    if (!$text) {
        $text = $this -> text;
    }

    // Send something
} 
```

我很想知道为什么你需要静态函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-05T10:14:13.453

我同意应该不惜一切代价避免这种情况，但在某些情况下它可能有用。

在大多数情况下，它只会使您的代码不可读和难以管理。

相信我，我一直在走这条路。

这是一个可能仍然可行的用例场景示例。

我将 CakePHP 3.0 的 File 类扩展为我的默认文件处理类。

我想要一个静态的 mime 类型猜测器。

在某些情况下，我有一个文件名而不是实际文件，在这种情况下需要做出一些假设。（如果文件存在，尝试从中获取 mime，否则使用提供的文件名扩展）

其他时候，如果我实际实例化了一个对象，默认的 mime() 方法应该可以工作，但如果它失败，则需要从对象中提取文件名，而应该调用静态方法。

为了避免混淆，我的目标是通过调用相同的方法来获取 mime 类型：

**静止的：**

```
NS\File::type('path/to/file.txt') 
```

**作为对象**

```
$f = new NS\File('path/to/file.txt');
$f->type(); 
```

**这是我的示例扩展类：**

```
<?php

namespace NS;

class File extends \Cake\Utility\File
{

    public function __call($method, $args) {
        return call_user_func_array([get_called_class(), 'obj'.ucfirst($method)], $args);
    }
    public static function __callStatic($method, $args) {
        return call_user_func_array([get_called_class(), 'static'.ucfirst($method)], $args);
    }

    public function objType($filename=null){
        $mime = false;
        if(!$filename){
            $mime = $this->mime();
            $filename = $this->path;
        }
        if(!$mime){
            $mime = static::getMime($filename);
        }
        return $mime;
    }

    public static function staticType($filename=null){
        return static::getMime($filename);
    }

    public static function getMime($filename = null)
    {
        $mimes = [
            'txt' => 'text/plain',
            'htm' => 'text/html',
            'html' => 'text/html',
            'php' => 'text/html',
            'ctp' => 'text/html',
            'twig' => 'text/html',
            'css' => 'text/css',
            'js' => 'application/javascript',
            'json' => 'application/json',
            'xml' => 'application/xml',
            'swf' => 'application/x-shockwave-flash',
            'flv' => 'video/x-flv',
            // images
            'png' => 'image/png',
            'jpe' => 'image/jpeg',
            'jpeg' => 'image/jpeg',
            'jpg' => 'image/jpeg',
            'gif' => 'image/gif',
            'bmp' => 'image/bmp',
            'ico' => 'image/vnd.microsoft.icon',
            'tiff' => 'image/tiff',
            'tif' => 'image/tiff',
            'svg' => 'image/svg+xml',
            'svgz' => 'image/svg+xml',
            // archives
            'zip' => 'application/zip',
            'rar' => 'application/x-rar-compressed',
            'exe' => 'application/x-msdownload',
            'msi' => 'application/x-msdownload',
            'cab' => 'application/vnd.ms-cab-compressed',
            // audio/video
            'mp3' => 'audio/mpeg',
            'qt' => 'video/quicktime',
            'mov' => 'video/quicktime',
            // adobe
            'pdf' => 'application/pdf',
            'psd' => 'image/vnd.adobe.photoshop',
            'ai' => 'application/postscript',
            'eps' => 'application/postscript',
            'ps' => 'application/postscript',
            // ms office
            'doc' => 'application/msword',
            'rtf' => 'application/rtf',
            'xls' => 'application/vnd.ms-excel',
            'ppt' => 'application/vnd.ms-powerpoint',
            // open office
            'odt' => 'application/vnd.oasis.opendocument.text',
            'ods' => 'application/vnd.oasis.opendocument.spreadsheet',
        ];
        $e = explode('.', $filename);
        $ext = strtolower(array_pop($e));
        if (array_key_exists($ext, $mimes)) {
            $mime = $mimes[$ext];
        } elseif (function_exists('finfo_open') && is_file($filename)) {
            $finfo = finfo_open(FILEINFO_MIME);
            $mime = finfo_file($finfo, $filename);
            finfo_close($finfo);
        } else {
            $mime = 'application/octet-stream';
        }
        return $mime;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-15T20:10:17.920

在 php 中，您可以设置/分配具有方法可见性（公共、私有、受保护）的类方法以及类属性，这些属性可以声明类方法或类属性的限制分布，例如可以在类外部访问或不访问的类属性。

为了调用目的，我们得到了两个方法，

1.  静态（自我::)
2.  非静态 ($this->)

让我们学习一个类 Foo 有一些方法和属性..它们有可见性和调用方法

```
 <?php

    class Foo {

     public const WELCOME ='This is WELCOME Non Static Constant For Foo Class';
    public string $text='This is A Text Non Static Foo Class Properties';
    public static string $texter='This is A Texter Foo Static Class Properties';
    private string $ptext='This is a private string Non Static properties of Class Foo';

    public static function Bar()
    {
        echo "Static Method Bar is calling\n";
    }

    public function Baz()
    {
        echo "Non Static Method Baz is calling \n";
    }

    protected function Another()
    {
        echo "Non Static Method Another is calling \n";
    }

    private function Again()
    {
        echo "Non Static Private Method Again is calling \n";
    }

    protected static function AnotherOne()
    {
        echo "Non Static Method Another is calling \n";
    }

    private static function AgainOne()
    {
        echo "Non Static Private Method Again is calling \n";
    }

    public static function bypass()
    {
        return self::AgainOne();
    }

    public function getPText()
    {
        return $this->ptext;
    }

}
?> 
```

现在测试这个类

```
<?php

//Non Static Call By Creating an $app instance of Foo Class..
$app = new Foo();
 echo $app->WELCOME;        // Undefined property: Foo::$WELCOME
 echo $app->text;           // This is A Text Non Static Foo Class Properties
 echo $app->texter;         // Accessing static property Foo::$texter as non static
 echo $app->Bar();          // Static Method Bar is calling
 echo $app->Baz();          // Non Static Method Baz is calling 
 echo $app->Another();      // Uncaught Error: Call to protected method Foo::Another() from global scope
 echo $app->Again();        // Uncaught Error: Call to private method Foo::Again() from global scope
 echo $app->AnotherOne();   // Uncaught Error: Call to protected method Foo::AnotherOne() from global scope
 echo $app->AgainOne();     // Uncaught Error: Call to private method Foo::AgainOne() from global scope
 echo $app->bypass();       // Non Static Private Method Again is calling 
 echo $app->ptext;          // Uncaught Error: Cannot access private property Foo::$ptext
 echo $app->getPText();     // This is a private string Non Static properties of Class Foo 

//Static Call
 echo Foo::WELCOME;         // This is WELCOME Non Static Constant For Foo Class
 echo Foo::text;            // Uncaught Error: Undefined constant Foo::text
 echo Foo::texter;          // Uncaught Error: Undefined constant Foo::texter
 echo Foo::Bar();           // Static Method Bar is calling
 echo Foo::Baz();           // Uncaught Error: Non-static method Foo::Baz() cannot be called statically
 echo Foo::Another();       // Uncaught Error: Call to protected method Foo::Another() from global scope
 echo Foo::Again();         // Uncaught Error: Call to private method Foo::Again() from global scope 
 echo Foo::AnotherOne();    // Uncaught Error: Call to protected method Foo::AnotherOne() from global scope
 echo Foo::AgainOne();      // Uncaught Error: Call to private method Foo::AgainOne() from global scope
 echo Foo::bypass();        // Non Static Private Method Again is calling 

 ?> 
```

请参阅[此处](http://sandbox.onlinephpfunctions.com/code/64951dc1a59e3cd4db7d2c2dc7194c744f6a34bc)的实际操作。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-06-19T02:10:13.907

很抱歉碰到一个旧线程，但我想扩展@lonesomeday 的答案。（感谢@lonesomeday 提供初始代码示例。）

我也在对此进行试验，但不想像他在原始帖子中那样调用这些方法。相反，我有以下，这*似乎*工作：

```
 class Emailer {

    private $recipient;

    public function to( $recipient )
    {
        $this->recipient = $recipient;
        return $this;
    }

    public function sendNonStatic()
    {
        self::mailer( $this->recipient );
    }

    public static function sendStatic( $recipient )
    {
        self::mailer( $recipient );
    }

    public function __call( $name, $arguments )
    {
        if ( $name === 'send' ) {
            call_user_func( array( $this, 'sendNonStatic' ) );
        }
    }

    public static function mailer( $recipient )
    {
        // send()
        echo $recipient . '<br>';
    }

    public static function __callStatic( $name, $arguments )
    {
        if ( $name === 'send' ) {
            call_user_func( array( 'Emailer', 'sendStatic' ), $arguments[0] );
        }
    }
}

Emailer::send( 'foo@foo.foo' );

$Emailer = new Emailer;
$Emailer->to( 'bar@bar.bar' );
$Emailer->send(); 
```

# puppet - 真的没有简单的方法可以在远程机器上测试 puppet 脚本吗？

> ID：11331618
> 
> 赞同：6
> 
> 时间：2012-07-04T15:06:03.490
> 
> 标签：puppet

我正在尝试使用 Puppet 脚本进行部署。

我发现编写这些脚本的过程中最困难的部分是迭代测试它们。

我不想`puppet apply`在我的本地开发机器上，这很容易搞砸。我有一个全新的远程盒子，我想申请。我也看不出木偶大师如何帮助我。稍后我可能会使用 puppetmaster 进行生产部署，但现在，我只想让我的代码正常工作。

所以我整理了一个快速的 shell 脚本，它将本地 puppet 模块路径中的不同目录同步到远程机器上的 /tmp，然后运行`puppet apply`​​. 这非常不方便。它很慢，尤其是当我们谈论语法错误时。

我认为我真正想要的是一个 puppetd ​​<-> puppetmaster 连接，远程机器上的 puppetd ​​接收一个已经编译的清单。只是一个通过 SSH 连接的 adhoc-one，无需实际设置 Puppetmaster，处理证书等`puppet apply user@host`。

似乎没有这种情况，但是其他人如何处理呢？我编写 Puppet 脚本的经历让我非常沮丧，就像现在一样。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T13:12:17.807

我建议使用 Vagrant。如果您没有测试 puppet master 设置，您可以使用内置的[配置器集成](http://vagrantup.com/v1/docs/provisioners/puppet.html)。

完成所有设置后，您可以运行**vagrant provision**或仅在 vagrant vm 上运行 puppet apply。

[这是](http://www.jedi.be/blog/2011/12/13/testdriven-infrastructure-with-vagrant-puppet-guard/)一篇相关文章，您可能会发现也有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T21:54:02.903

我还会使用[rspec-puppet](http://rspec-puppet.com/)和[puppetlabs-spec-helper](https://github.com/puppetlabs/puppetlabs_spec_helper)看一下 puppet rpsec 测试。rspec-puppet-init 将破坏 puppet doc 和 geppetto 以及可能由于符号链接而导致的其他一些事情，并且[hiera 存在一些问题](https://serverfault.com/q/409297/121905)，但是测试很容易设置并且运行良好，并且也可以绑定到 jenkins/哈德逊

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-12T12:11:58.203

我通常对我的 Puppet 脚本进行两​​个级别的测试。

**用于快速反馈的单元测试：**使用[rspec-puppet](http://rspec-puppet.com)编写，这些为正在测试的类/定义/等编译 Puppet 目录，并对其进行断言。每次我进行小的更改时在本地运行，每次签入时在构建服务器上运行。测试运行速度很快（<10 秒），并找出语法和依赖性问题。

**功能测试以确保它确实有效：使用**[Cucumber](http://cukes.info)和[Aruba](https://github.com/cucumber/aruba)库编写。当我完成一个功能的实现并且它的单元测试通过时，这些测试会为一个虚拟机（使用[Vagrant](http://www.vagrantup.com)）提供适当的 Puppet 清单，登录并对虚拟机的状态进行断言。测试本身看起来像：

```
Given I am SSHed into Vagrant box "webserver"
When I type "php --version"
Then the output should include "PHP 5.4.11" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-21T15:27:08.260

Vagrant 是我发现的快速基础设施开发最有用的环境。它最接近 (99%) 将反映您的生产设置，并且您可以解释 puppet 中的这些微小差异，因此一切都按预期工作。大约需要 30 分钟才能开始使用它，并且会在节省时间弄乱文件复制脚本的情况下回报你很多倍:)

如果对可视化有帮助，在我的桌面上我并排有 3 个终端：

终端 1) 编辑 puppet 清单、类、ruby 代码等终端 2) 运行“vagrant provision”，它简单地应用 puppet 以及您想要传递的任何事实等。终端 3) 将“vagrant ssh”放入框中，所以我可以在木偶工作时四处闲逛

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-14T17:47:31.390

我在看[另一个问题](https://stackoverflow.com/questions/6403894/chef-and-puppet-recommendations)时偶然发现了[臀部](https://github.com/railsmachine/rump)。如果您使用的是 git，它可能会很有用。有[一个幻灯片](http://www.slideshare.net/auxesis/rump-making-puppetmasterless-puppet-meaty)可用。

来自 README.md：“Rump 可帮助您在本地运行 Puppet 以对抗 Git 结帐。”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-12T10:45:39.460

你为什么不想经营一个傀儡师？它正是为这种情况而创建的。

如果您绝对不能运行 puppetmaster，那么您必须将您的 puppet 调用包装在另一个脚本中，该脚本首先下载文件（使用 curl 或 wget）并在成功下载后应用它们。鉴于 puppetmaster 是一个运行起来相当简单的应用程序，我不认为不使用它会更好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-31T08:20:55.417

您可能对 citac 感兴趣，这是一个用于自动测试 Puppet 脚本的工具包。它在 Github 上可用：[https ://github.com/citac/citac](https://github.com/citac/citac)

Citac 以各种配置系统地执行您的 Puppet 清单，模仿瞬态系统故障、不同的资源执行顺序等。生成的测试报告会通知您有关非幂等资源的问题、与收敛相关的问题等。

该工具使用 Docker 容器执行，因此您的系统在测试时保持不变。在执行 Puppet 脚本期间跟踪状态变化，并生成详细的测试报告。

为了了解该工具能够检测到哪些错误，我们对 150 多个公共 Puppet 脚本进行了大规模评估。结果可在此处获得：[http](http://citac.github.io/eval/) ://citac.github.io/eval/ 请随时提供反馈、拉取请求等。祝您测试愉快！

# php - PHP+MSSQL JOIN 两个表什么都不输出 - “没有元组”

> ID：11331626
> 
> 赞同：0
> 
> 时间：2012-07-04T15:06:20.030
> 
> 标签：php, sql-server, join, tuples

```
$conn=odbc_connect('mydatabase','','');
$sql="SELECT 
    Orders.OrderID,
    Orders.OrderDate,
    \"Order Details\".OrderID,
    \"Order Details\".UnitPrice,
    \"Order Details\".Quantity,
    \"Order Details\".Discount,
  FROM 
    \"Order Details\"
  INNER JOIN 
    Orders 
  ON \"Order Details\".OrderID = Orders.OrderID";
$rs=odbc_exec($conn,$sql) or die("<p>".odbc_errormsg());
while (($row = odbc_fetch_array($rs)) !== false) 
```

当我尝试输出 $rs 的结果时，没有返回任何内容。如果我尝试分别从 Orders 或“Order Details”访问字段，它工作正常，但如果我尝试 JOIN 两个表，它什么也不输出。

这是在使用 MSSQL 时从名称中有空格的表中选择字段的正确方法吗？当我尝试 "SELECT * FROM \"Order Details\"" 时，它似乎有效，但是当我尝试加入表时，我必须指定 "\Order Details\".OrderID，我认为这可能是它变得混乱的地方。

Apache 错误日志返回一个奇怪的“odbc_fetch_array(): No tuples available at this result”消息，但我不肯定这是实际问题，因为我看到此错误消息出于不相关的原因随机弹出。尽管如此，我还是不太明白，所以我想我应该提一下。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:40:24.250

不要使用“/”，而是使用括号。

```
"SELECT Orders.OrderID, [Order Details].UnitPrice 
 FROM [Order Details] INNER JOIN Orders ON [Order Details].OrderID = Orders.OrderID" 
```

# python - 打印字典

> ID：11331627
> 
> 赞同：0
> 
> 时间：2012-07-04T15:06:26.723
> 
> 标签：python, dictionary, python-3.x, simulation

我有一个相当具体的问题：

我想使用`\033[`语法在特定位置打印出字符。这就是下面的代码应该做的：（字典`cells`具有相同的键，`coords`但具有`'*'`或`'-'`作为值。）

```
coords = {'x'+str(x)+'y'+str(y) : (x,y) for x,y, in itertools.product(range(60), range(20))}

for key, value in coords.items():  

    char = cells[key]  
    x,y = value
    HORIZ=str(x)
    VERT=str(y)
    char = str(char)
    print('\033['+VERT+';'+HORIZ+'f'+char) 
```

但是，我注意到，如果我将它放入一个无限的 while 循环中，它并不总是在相同的位置打印相同的字符。只有轻微的变化，但它会删除一些并在一些循环后将它们放回原处。我已经用列表试过了，它似乎表现得很好，所以我倾向于认为它与字典有关，但我不知道它可能是什么。您可以在此处的控制台中看到问题：[SharedConsole](https://www.pythonanywhere.com/shared_console/6118e9d5-f7ba-4738-88c2-1fc30f3f66d1)。我很高兴收到有关此问题的每个提示。

关于一个相关主题：打印后，应该对`cells`dict的值进行一些更改，但由于我不知道的原因，只执行了前两个规则，其余规则被忽略。规则应测试单元周围有多少邻居（位于 中`population`）并应用相应的规则。在我的实现中，我有某种奇怪的肿瘤生长（这不应该发生，好像周围有超过三个细胞应该死亡）（参见[FreakingTumor](https://www.pythonanywhere.com/shared_console/9f76efe8-7994-4440-890b-dca8204c2267)）：

```
if cells_copy [coord] == '-':
    if population == 3:
        cells [coord] = '*'
if cells_copy [coord] == '*':
    if population > 3:
        cells [coord] = '-'
    elif population <= 1:
        cells [coord] = '-'
    elif population == 2 or 3:
        cells [coord] = '*' 
```

`population`我多次检查了这个变量，所以我很确定这不是问题。我为缓慢的控制台感到抱歉。

提前致谢！基里尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:43:28.627

你的语法

```
 elif population == 2 or 3: 
```

评估为

```
 elif (population == 2) or (3 != 0): 
```

并且 3 永远不会是 0，因此该子句始终为 True。你想写的是

```
 elif population == 2 or population == 3: 
```

或许

```
 elif population in (2,3): 
```

这个逻辑可以简化为

```
EMPTY = '-'
FULL = '*'
if cells_copy[coord] == EMPTY:
    if population == 3:
        cells[coord] = FULL
else:
    if population not in set([2,3]):
        cells[coord] = EMPTY 
```

我还建议合并你的写作（一次写一整行）：

```
# Make sure everything in `cells` is a string
ESC = chr(27)

for y in xrange(20):
    outp = (cells['x{}y{}'.format(x,y)] for x in xrange(60))
    print('{}[{};{}f{}'.format(ESC, y, x, ''.join(outp)), end='') 
```

您可能还会从制作`cells`列表而不是列表中受益`dict`

```
WIDTH = 60
HEIGHT = 20
cells = [[EMPTY]*WIDTH for y in xrange(HEIGHT)] 
```

# android - 图片有图标时如何让背景图片不干扰文字

> ID：11331628
> 
> 赞同：0
> 
> 时间：2012-07-04T15:06:27.500
> 
> 标签：android, android-listview

我目前有一个非常简单的 ListView，没有背景图像，只有列表中每个项目的文本。

有些人提出了单击列表项不直观的问题。

所以我正在研究要创建什么样的背景图像，以使列表项看起来“非常可点击”

一种选择是让背景图像在右侧包含那些看起来像“>”的小图标，并且它表示应该单击它。

但是我想知道如果列表项上的文本很长并且它将与“>”图标重叠怎么办。一般是怎么处理的？有没有办法让文本只扩展整个列表项的 90%？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:11:59.877

最简单和最干净的解决方案是设置`TextView`宽度`match_parent`并使用[`android:drawableRight`](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3adrawableRight)XML 中的属性来指定要在文本右侧显示的可绘制对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:15:36.180

如果你想做一些事情，比如列表中的每个项目都应该显示为可点击，只需做一件事，设计一个带有文本视图的布局，并在 getview 方法中在你的 lsitview 适配器类中扩展该布局。而不是返回转换视图，而是从那里返回您的膨胀视图。

# ruby - 为什么我不能将推文保存到数据库中？

> ID：11331630
> 
> 赞同：0
> 
> 时间：2012-07-04T15:06:33.290
> 
> 标签：ruby, twitter, ruby-on-rails-3.1, rubygems

我想将推文保存到数据库中，但它不起作用！我正在使用推特宝石。

我的控制器：

```
class TweetsController < ApplicationController

def save_tweets_into_database
    @tweets = Twitter.search("#em2012" "#Italy" "#Spain", :lang => "en", :rpp => 25).results
    @tweets.each do |tweet|
        @tweet = tweet
        @tweet.create
    end
end
end 
```

我的模特

```
require "rubygems"
require "twitter"

class Tweet < ActiveRecord::Base

end 
```

我的观点

```
<% @title = "liste" %>
<h2>Liste der Tweets über das EM-Finale</h2>
<ul>
    <% @tweets.each do |tweet| %>
        <li><%= tweet %></li>
    <% end %>
</ul> 
```

我的路线

```
Em2012tweet::Application.routes.draw do

  match '/save_tweets', to: 'tweets#save_tweets_into_database'
end 
```

显示此错误：

Twitter::Status:0x007fac9c80a160 的未定义方法“创建”

Rails.root：/Users/xyz/Desktop/Workspace/em2012tweet

app/controllers/tweets_controller.rb:7:in `block in save_tweets_into_database'

app/controllers/tweets_controller.rb:5:in `each'

app/controllers/tweets_controller.rb:5:in `save_tweets_into_database'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:14:26.610

> 将推文保存到数据库中

在 Rails 中，遵循 REST 约定，`index`操作与简单地显示已存储在数据库中的模型的所有对象相关联。这实际上也是您对代码所做的。您的`index`操作不会将推文*保存*到数据库中。

我不认为你想在这里保存推文。您试图简单地显示它们。如果您只想在索引视图文件中显示推文，请尝试此操作。

```
def index
  @tweets = Twitter.search("#em2012" "#italy" "#spain", :lang => "en", :rpp => 25).results
end 
```

如果您想保存推文，请创建这样的操作。

```
def save_tweets_into_database
  @tweets = Twitter.search("#em2012" "#italy" "#spain", :lang => "en", :rpp => 25).results
  @tweets.each do |tweet|
    Tweet.save(tweet)
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:57:37.300

tweets_controller.rb：

```
class TweetsController < ApplicationController

  def save_tweets_into_database
    @tweets = Twitter.search("#em2012" "#Italy" "#Spain", :lang => "en", :rpp => 25)
    @tweets.each do |tweet|
      Tweet.create(twitter_tweet: tweet)
    end
  end
end 
```

推文.rb：

```
class Tweet < ActiveRecord::Base
  serialize :twitter_tweet
end 
```

请注意，这需要您进行迁移，其中使用`tweets`名为“twitter_tweet”的文本列创建表，例如

```
class CreateTweets < ActiveRecord::Migration
  def change
    create_table :tweets do |t|
      t.text :twitter_tweets

      t.timestamps
    end
  end
end 
```

这将允许您调用`save_tweets_into_database`25 条返回的推文并将其保存到数据库中。这不是一个很好的策略，因为您正在序列化每个`Twitter::Status`对象并将它们作为 YAML 存储在数据库中。这意味着你失去了使用所有好的 ActiveRecord 助手的能力，而必须在实际使用它们之前反序列化你想要使用的所有对象。更好的策略是创建一个 ActiveRecord 对象，该对象具有与您希望保存的 Twitter::Status 对象相同的属性。然后，您可以将获取的 Twitter::Status 对象映射到新的 ActiveRecord Tweet 对象，并保留使用 ActiveRecord 的所有好处。

我不会说任何关于你的路由结构的事情，除了它肯定没有遵循“Rails”方式，从经验来看，这通常会导致相当多的头痛。

# java - 超类变量不通过子类打印

> ID：11331631
> 
> 赞同：-9
> 
> 时间：2012-07-04T15:06:44.567
> 
> 标签：java, inheritance

你能告诉我为什么这段代码没有在控制台上显示任何结果吗？

```
class employee {
    protected String name;
    protected double salary;
    protected String dob;

    public employee(String name, double salary, String dob) {
        this.name = name;
        this.salary = salary;
        this.dob = dob;
    }

    public employee(String name, double salary) {
        this.name = name;
        this.salary = salary;
    }
}

public class Manage extends employee {
    String dept1;

    public Manage(String name, double salary, String dob, String dept1) {
        super(name, salary, dob);
        this.dept1 = dept1;
    }

    public Manage(String name, double salary, String dept1) {
        super(name, salary);
        this.dept1 = dept1;
    }

    public static void main(String args[]) {
        employee e = new employee("Vikas", 122345);
        employee e2 = new employee("Vikas", 122345, "12-2-1991");
        Manage m = (Manage) new Manage("Vikas", 122345, "Sales");
        Manage m2 = new Manage("Vikas", 122345, "12-2-1991", "sales");
        m.display();
        m2.display();
    }

    public void display() {
        System.out.println("Name " + name);
        System.out.println("Salary " + salary);
        System.out.println("Birth " + dob);
        System.out.println("Department " + dept1);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:15:20.643

你有一些错别字是编译器问题。我修好了那些。糟糕的代码，但它有效。首先要牢记 Sun/Oracle Java 编码标准。

另一个建议是写一个`toString()`覆盖而不是`display()`.

您有一个将出生日期初始化为 null 的员工构造函数。不要那样做；喜欢这样的东西：

```
public employee(String name, double salary) {
    this(name, salary, new Date());
} 
```

这是我在控制台中看到的。你怎么了？

```
"C:\Program Files\Java\jdk1.7.0_02\bin\java" -Didea.launcher.port=7534 "-Didea.launcher.bin.path=C:\Program Files (x86)\JetBrains\IntelliJ IDEA 117.499\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.7.0_02\jre\lib\alt-rt.jar;C:\Program Files\Java\jdk1.7.0_02\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.7.0_02\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.7.0_02\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.7.0_02\jre\lib\jce.jar;C:\Program Files\Java\jdk1.7.0_02\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.7.0_02\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.7.0_02\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.7.0_02\jre\lib\resources.jar;C:\Program Files\Java\jdk1.7.0_02\jre\lib\rt.jar;C:\Program Files\Java\jdk1.7.0_02\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.7.0_02\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.7.0_02\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.7.0_02\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.7.0_02\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.7.0_02\jre\lib\ext\zipfs.jar;F:\Projects\Java\stack-overflow\out\production\Stack-overflow;F:\Projects\Java\stack-overflow\test-lib\junit-4.10.jar;F:\Projects\Java\stack-overflow\test-lib\org.springframework.test-3.1.0.RC2.jar;F:\Projects\Java\stack-overflow\lib\aopalliance-1.0.jar;F:\Projects\Java\stack-overflow\lib\commons-math-2.1-javadoc.jar;F:\Projects\Java\stack-overflow\lib\commons-math-2.1-sources.jar;F:\Projects\Java\stack-overflow\lib\commons-math-2.1.jar;F:\Projects\Java\stack-overflow\lib\dom4j-1.6.1.jar;F:\Projects\Java\stack-overflow\lib\jackson-all-1.6.2.jar;F:\Projects\Java\stack-overflow\lib\jackson-core-asl-1.6.2.jar;F:\Projects\Java\stack-overflow\lib\jackson-core-lgpl-1.6.2.jar;F:\Projects\Java\stack-overflow\lib\jackson-jaxrs-1.6.2.jar;F:\Projects\Java\stack-overflow\lib\jackson-mapper-asl-1.6.2.jar;F:\Projects\Java\stack-overflow\lib\jackson-mapper-lgpl-1.6.2.jar;F:\Projects\Java\stack-overflow\lib\jackson-mrbean-1.6.2.jar;F:\Projects\Java\stack-overflow\lib\jackson-smile-1.6.2.jar;F:\Projects\Java\stack-overflow\lib\jackson-xc-1.6.2.jar;F:\Projects\Java\stack-overflow\lib\Jama-1.0.2.jar;F:\Projects\Java\stack-overflow\lib\jdom.jar;F:\Projects\Java\stack-overflow\lib\jxl.jar;F:\Projects\Java\stack-overflow\lib\org.springframework.aop-3.1.0.RC2.jar;F:\Projects\Java\stack-overflow\lib\org.springframework.asm-3.1.0.RC2.jar;F:\Projects\Java\stack-overflow\lib\org.springframework.aspects-3.1.0.RC2.jar;F:\Projects\Java\stack-overflow\lib\org.springframework.beans-3.1.0.RC2.jar;F:\Projects\Java\stack-overflow\lib\org.springframework.context-3.1.0.RC2.jar;F:\Projects\Java\stack-overflow\lib\org.springframework.context.support-3.1.0.RC2.jar;F:\Projects\Java\stack-overflow\lib\org.springframework.core-3.1.0.RC2.jar;F:\Projects\Java\stack-overflow\lib\org.springframework.expression-3.1.0.RC2.jar;F:\Projects\Java\stack-overflow\lib\org.springframework.instrument-3.1.0.RC2.jar;F:\Projects\Java\stack-overflow\lib\org.springframework.instrument.tomcat-3.1.0.RC2.jar;F:\Projects\Java\stack-overflow\lib\org.springframework.jdbc-3.1.0.RC2.jar;F:\Projects\Java\stack-overflow\lib\org.springframework.jms-3.1.0.RC2.jar;F:\Projects\Java\stack-overflow\lib\org.springframework.orm-3.1.0.RC2.jar;F:\Projects\Java\stack-overflow\lib\org.springframework.oxm-3.1.0.RC2.jar;F:\Projects\Java\stack-overflow\lib\org.springframework.transaction-3.1.0.RC2.jar;F:\Projects\Java\stack-overflow\lib\org.springframework.web-3.1.0.RC2.jar;F:\Projects\Java\stack-overflow\lib\org.springframework.web.portlet-3.1.0.RC2.jar;F:\Projects\Java\stack-overflow\lib\org.springframework.web.servlet-3.1.0.RC2.jar;F:\Projects\Java\stack-overflow\lib\org.springframework.web.struts-3.1.0.RC2.jar;F:\Projects\Java\stack-overflow\lib\postgresql-8.1-405.jdbc3.jar;F:\Projects\Java\stack-overflow\lib\sqlitejdbc-v056.jar;F:\Projects\Java\stack-overflow\lib\StackWrap4J-1.0.1.jar;F:\Tools\apache-tomcat-6.0.35\lib\annotations-api.jar;F:\Tools\apache-tomcat-6.0.35\lib\catalina-ant.jar;F:\Tools\apache-tomcat-6.0.35\lib\catalina-ha.jar;F:\Tools\apache-tomcat-6.0.35\lib\catalina-tribes.jar;F:\Tools\apache-tomcat-6.0.35\lib\catalina.jar;F:\Tools\apache-tomcat-6.0.35\lib\ecj-3.7.jar;F:\Tools\apache-tomcat-6.0.35\lib\el-api.jar;F:\Tools\apache-tomcat-6.0.35\lib\jasper-el.jar;F:\Tools\apache-tomcat-6.0.35\lib\jasper.jar;F:\Tools\apache-tomcat-6.0.35\lib\jsp-api.jar;F:\Tools\apache-tomcat-6.0.35\lib\servlet-api.jar;F:\Tools\apache-tomcat-6.0.35\lib\tomcat-coyote.jar;F:\Tools\apache-tomcat-6.0.35\lib\tomcat-dbcp.jar;F:\Tools\apache-tomcat-6.0.35\lib\tomcat-i18n-es.jar;F:\Tools\apache-tomcat-6.0.35\lib\tomcat-i18n-fr.jar;F:\Tools\apache-tomcat-6.0.35\lib\tomcat-i18n-ja.jar;C:\Program Files (x86)\JetBrains\IntelliJ IDEA 117.499\lib\idea_rt.jar" com.intellij.rt.execution.application.AppMain cruft.Manage
Name Vikas
Salary 122345.0
Birth null
Department Sales
Name Vikas
Salary 122345.0
Birth 12-2-1991
Department sales

Process finished with exit code 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:10:57.603

您的代码错误，请使用带有编译器的 IDE。这是你想要的代码：

```
public static void main(String args[]) {
    employee e = new employee("Vikas", 122345);
    employee e2 = new employee("Vikas", 122345, "12-2-1991");
    Manage m = new Manage("Vikas", 122345, "Sales");
    Manage m2 = new Manage("Vikas", 122345, "12-2-1991", "sales");
    m.display();
    m2.display();
}

static class employee {
    protected String name;
    protected double salary;
    protected String dob;

    public employee(String name, double salary, String dob) {
        this.name = name;
        this.salary = salary;
        this.dob = dob;
    }

    public employee(String name, double salary) {
        this.name = name;
        this.salary = salary;
    }
}

static public class Manage extends employee {
    String dept1;

    public Manage(String name, double salary, String dob, String dept1) {
        super(name, salary, dob);
        this.dept1 = dept1;
    }

    public Manage(String name, double salary, String dept1) {
        super(name, salary);
        this.dept1 = dept1;
    }

    public void display() {
        System.out.println("Name " + name);
        System.out.println("Salary " + salary);
        System.out.println("Birth " + dob);
        System.out.println("Department " + dept1);
    }
} 
```

# java-me - 如何检查 J2ME 设备中是否存在 SIM 卡？

> ID：11331642
> 
> 赞同：-2
> 
> 时间：2012-07-04T15:07:31.117
> 
> 标签：java-me

如何检查 J2ME 设备中是否存在 SIM 卡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:38:45.980

您可以尝试`System.getProperty("microedition.smartcardslots");`，但它依赖于`JSR 177`J2ME 的安全和信任服务 API (SATSA)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:22:23.313

在某些方面是**可能的。**

**请参考以下链接：**

[http://www.developer.nokia.com/Community/Discussion/showthread.php?227658-How-to-check-wheather-a-SIM-card-has-been-inserted-in-mobile-using-j2me](http://www.developer.nokia.com/Community/Discussion/showthread.php?227658-How-to-check-wheather-a-SIM-card-has-been-inserted-in-mobile-using-j2me)

[http://www.developer.nokia.com/Community/Discussion/showthread.php?105450-SIM-access-from-J2ME-%28deploy-SIM-application%29](http://www.developer.nokia.com/Community/Discussion/showthread.php?105450-SIM-access-from-J2ME-%28deploy-SIM-application%29)

# php - 值为整数时不支持的操作数类型

> ID：11331652
> 
> 赞同：0
> 
> 时间：2012-07-04T15:07:44.553
> 
> 标签：php, codeigniter

尝试将 2 添加到整数时出现此错误。我正在使用 Codeigniter 框架。

> 致命错误：第 180 行的 D:\wamp\www\application\libraries\Gen_images.php 中不支持的操作数类型

这里是它的名字：

```
// Now process the image
var_dump($this->upload->data('image_width'));
$this->gen_login->resize($file_name, $this->upload->data('image_width'), $this->upload->data('image_height')); 
```

我得到的错误`line 180`是：

```
$config['width'] = $width + 2; 
```

所以我认为 $width 必须是一个数组或字符串，所以我无法添加到它，但`var dump`显示了这一点：

```
array
  'file_name' => string 'genyx_1341414096.jpg' (length=20)
  'file_type' => string 'image/jpeg' (length=10)
  'file_path' => string 'D:/wamp/www/beer/uploads/' (length=25)
  'full_path' => string 'D:/wamp/www/beer/uploads/genyx_1341414096.jpg' (length=45)
  'raw_name' => string 'genyx_1341414096' (length=16)
  'orig_name' => string 'genyx_1341414096.jpg' (length=20)
  'client_name' => string '294207_177080222375077_100002193022560_361510_991268937_s.jpg' (length=61)
  'file_ext' => string '.jpg' (length=4)
  'file_size' => float 55.85
  'is_image' => boolean true
  'image_width' => int 720
  'image_height' => int 479
  'image_type' => string 'jpeg' (length=4)
  'image_size_str' => string 'width="720" height="479"' (length=24) 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:12:39.557

上面显示的任何代码中都没有命名变量`$width`...

`$width`绝对不是字符串。我可以保证。

# android - 防止 Google Play 上的虚假评论

> ID：11331656
> 
> 赞同：63
> 
> 时间：2012-07-04T15:07:57.163
> 
> 标签：android, comments, google-play, review

我将我的 Android 应用程序发布到 Google Play，一切都很好。我收到了大约 5000 条用户评论，平均分 4.6 分。但在某个时刻，我开始以疯狂的速度获得最低分。5天几百1分。所以我的评分下降到4.3。用户没有抱怨，没有评论，只有大量的最低分。我怀疑这些是虚假评论。可能是竞争对手支付的。有什么方法可以识别吗？为了防止这种情况？Google 是否以任何方式保护我们免受虚假评论的侵害？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-04T15:11:12.277

我认为最好的办法是联系谷歌并让他们意识到这个问题。

[google play 网站](http://support.google.com/googleplay/bin/static.py?hl=en&page=ts.cs&ts=2520903)上有联系表

还值得检查的是您的应用程序中没有阻止它在某些手机/设备中打开的错误（这可能是也可能不是您的错，可能是固件问题）。但是您通常会看到用户选择 1 星而不是撰写评论。记住用户很懒:)

正如@64BitsPerMinute 在他的评论中所建议的那样，可能有一些框架可以帮助检测崩溃。查看[ACRA](http://code.google.com/p/acra/)，或者查看更多托管服务，[查看带有 HockeyApp](http://www.hockeyapp.net/)插件的 HockeyKit。这些服务允许您在出现问题时从用户那里获得崩溃和堆栈报告。即使用户没有向您报告，他们也可以单击一个按钮并发送即时崩溃结果。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-19T10:43:32.587

以火扑救。在 vworker.com 上向一些人支付 5 星的费用。

***我在下面的评论中给出了更好的答案：***

...你可以考虑把钱花在广告上。如果您的应用程序足够好，能够获得 5000 个 5 秒，那么它很快就会自行再次发生。祝你好运！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-04T16:22:22.690

正如其他人所说，可能存在您不知道的问题。您可以使用开发者控制台检查是否有大量来自特定设备或操作系统版本的评论。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-15T23:19:20.980

你试过谷歌分析吗？如果有任何错误或功能无法按您预期的那样工作，也许它可以为您提供更多线索。此外，这可能有助于验证您的虚假响应理论 - 如果运行该应用程序的唯一用户数量远低于已安装该应用程序的用户数量，则有些人在安装后没有尝试过。

# javascript - (Titanium Studio) 显示带有排序数据的表格视图

> ID：11331660
> 
> 赞同：0
> 
> 时间：2012-07-04T15:08:28.917
> 
> 标签：javascript, iphone, ios, titanium-mobile

我使用钛工作室来构建一个 ios 应用程序。我有一个发送给我的网络服务：

数据：[{“日期”：“2012-07-04” ...}，{“日期”：“2012-06-04” ...}，{“日期”：“2012-05-04”。 ..} ...]

我想在添加/显示它们之前按日期对数据进行排序，如下所示：

*------------------------------------------*

第 1 行：2012-O7-04

*------------------------------------------*

第 2 行：2012-O7-01

*------------------------------------------*

第 3 行：2012-O4-04

*------------------------------------------*

第 4 行：2012-O1-07

*------------------------------------------*

第 5 行：2011 年 12 月 31 日，有 4 个孩子

*------------------------------------------*

当我点击第 5 行时，它会显示他的孩子：

*---------------------------------*

孩子 1 : 2011-12-31

*---------------------------------*

孩子 2 : 2011-12-31

*---------------------------------*

孩子 3 : 2011-12-31

*---------------------------------*

孩子 4 : 2011-12-31

*---------------------------------*

我该怎么做 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:56:33.750

您可以使用此函数对数组进行排序，

```
var feedArray = [
    {title: 'Feed 1', desc: 'Desc 1', date: '2012-04-10'},
    {title: 'Feed 2', desc: 'Desc 2', date: '2012-04-12'},
    {title: 'Feed 3', desc: 'Desc 3', date: '2012-03-18'} 
];

function findFeedByDate(d) {
    for(var i = 0; i < feedArray.length; i++) {
        if ( d == feedArray[i].date ) {
            return feedArray[i];
        }
    }
}

// Grab date from feed, push it to array, then use Array.sort() to sort array
var dateArray = [];
for(var i = 0; i < feedArray.length; i++) {
    dateArray.push(feedArray[i].date);
}
dateArray = dateArray.sort();
Ti.API.info( dateArray );

var sortedFeedArray = [];
var date = null;

// for(var i = 0; i < dateArray.length; i++) { // ASC Sorting
for(var i = dateArray.length - 1; i >= 0 ; i--) { // DESC Sorting   
    sortedFeedArray.push(
        findFeedByDate( dateArray[i] )
    );
}
Ti.API.info( sortedFeedArray ); 
```

有关更详细的解决方案，请查看此链接：[在 Titanium Studio 中按日期排序 TableView Row](http://developer.appcelerator.com/question/135454/sort-tableview-row-by-date)

# collision-detection - 无法获得碰撞检测或 onclick 以在 THREE.js 中工作

> ID：11331663
> 
> 赞同：1
> 
> 时间：2012-07-04T15:08:49.763
> 
> 标签：collision-detection, three.js

我现在花了 2 天时间尝试进行这种碰撞检测并单击对象来工作，虽然运气不错，但并不接近完美。我想检测相机在场景中移动时与物体的碰撞（就像它是一架航天飞机，如果你撞到行星或球体它会爆炸）。任何帮助将不胜感激。仅供参考，ShipControls 是 Fl​​yControls 的克隆（稍作修改）。示例：[http ://www.benmarshall.me/projects/playground/solar-system/index2.html](http://www.benmarshall.me/projects/playground/solar-system/index2.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:31:52.637

`Ray`不支持`ParticleSystem`。然而！

# scala - 我正在为 Scala 使用调度，如何将 Web 服务的响应转换为 sa JSON 文件？

> ID：11331666
> 
> 赞同：0
> 
> 时间：2012-07-04T15:09:01.000
> 
> 标签：scala, scala-dispatch

我正在使用调度库和 scala 向 Web 服务发出 http 请求。一切正常，我想做的是将响应转换为 JSON。我已经可以得到响应，但它是字符串格式的。这就是我正在做的事情：

```
 val http = new Http

 val handler = http(req.as_str) 
```

req 是一个包含 URL 的请求变量。

谢谢您的帮助。:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:19:48.027

如果您的请求是案例类，您可以使用[Lift-Json](https://github.com/lift/lift/tree/master/framework/lift-base/lift-json/)将案例类树序列化为 json 字符串（并返回）。还存在其他此类（反）序列化程序，[例如 sjson](https://github.com/debasishg/sjson/wiki/Examples-of-Type-Class-based-JSON-serialization)，但到目前为止我只使用过 Lift-Json。

# ios - UIScrollView/UITableView 设置 ContentOffset 杀死惯性/滚动？

> ID：11331668
> 
> 赞同：1
> 
> 时间：2012-07-04T15:09:05.143
> 
> 标签：ios, uitableview, uiscrollview

在 UITableView 中，因为我在其他行之上添加了行，并且我不希望用户注意到任何内容。我正在使用动画设置滚动的 ContentOffset：NO。一切正常，我认为我的计算是正确的。

但是，当我在表格滚动时设置 ContentOffset 时，它看起来像是停止了。设置内容偏移量是否会杀死惯性/滚动？还是我在做梦？

有没有办法保存当前的滚动参数并在 setContentOffset 之后重新应用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:03:42.940

`UITableView`延伸`UIScrollView`。您可以使用`UIScrollViewDelegate`方法，将您的操作添加到队列中，并在`- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView;`调用时执行这些操作。这将使您仅在 tableView 不滚动时更改偏移量。

# sql - 使用 Oracle / SQL group by 查找最大值

> ID：11331669
> 
> 赞同：2
> 
> 时间：2012-07-04T15:09:20.897
> 
> 标签：sql, oracle

我需要为具有 5 列的表编写查询，这些列分别是`ID1`、`ID2`、`ID3`、`A`和`B`。这里, `ID1`, `ID2`, 和`ID3`构成主键。

对于每个`ID1`，找到最大值`A`。如果两个或多个`A`s 具有最大值，则选择唯一一个具有最大值的记录`B`。最后用对应的`ID2`和`ID3`值显示结果。

例如，对于下表

```
ID1 ID2 ID3   A  B
  1   2   3  10  5 
  1   3   4  30  4
  1   3   5  30  3
  2   2   3   5  1
  2   3   4   9  2
  2   3   5  11  3 
```

查询应显示如下结果。

```
ID1 ID2 ID3  Max_A  
  1   3   4     30  
  2   3   5     11 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T15:11:52.410

这样做的要点是

*   `ROW_NUMBER`为每一行添加一个
*   重新开始每个号码`ID1`
*   `ORDER` 从高到低在`A`和`B`。
*   把它放在一个`CTE`方便取用的地方`rn`

**SQL 语句**

```
;WITH q AS (
  SELECT *, ROW_NUMBER() OVER (PARTITION BY ID1 ORDER BY A DESC, B DESC) AS rn
  FROM YourTable
)
SELECT *
FROM   q
WHERE  rn = 1 
```

# ios - 当应用程序回到前面时出现黑屏

> ID：11331670
> 
> 赞同：0
> 
> 时间：2012-07-04T15:09:26.783
> 
> 标签：ios, view

我在视图上使用地图（不是谷歌地图）。
该应用程序似乎运行良好，但是当它进入后台时，我运行其他应用程序，一段时间后当我回到我的应用程序时，该应用程序返回黑屏并且似乎没有改变。

可能是什么原因造成的？
我能做些什么来防止这种情况发生？

谢谢！

# mysql - 无法将mysql时区设置为马德里

> ID：11331677
> 
> 赞同：7
> 
> 时间：2012-07-04T15:09:53.283
> 
> 标签：mysql, sql, timezone

根据this [question](https://stackoverflow.com/questions/3451847/mysql-timezone-change) on how to set the time_zone in mysql and this timezone [list](http://www.php.net/manual/en/timezones.europe.php)，我认为这应该可行：

```
SET time_zone = 'Europe/Madrid'; 
```

但这是 sqlBuddy 记录的内容：

> 报告了以下错误：未知或不正确的时区：“欧洲/马德里”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T15:17:02.710

确保已填充时区信息表。从[mysql](http://dev.mysql.com/doc/refman//5.5/en/time-zone-support.html)：

> 该值可以指定为命名时区，例如“欧洲/赫尔辛基”、“美国/东部”或“MET”。只有在 mysql 数据库中的时区信息表已创建并填充后，才能使用命名时区。

虽然我个人更喜欢以 UTC 格式存储所有日期。我发现它使推理变得更加简单，特别是在引入夏令时时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-05T11:44:37.870

如果您不想制作自己的时区设置表，另一种解决方案。

如果有自己的服务器，请保持 MySQL 不变。它默认为时区`SYSTEM`。

**Ubuntu**用户可以使用

```
dpkg-reconfigure tzdata 
```

对于更保守的操作系统（**Centos、RedHat、Fedora**）使用

```
tzconfig 
```

用于更改系统时区的命令。将弹出一个 CLI 应用程序，您可以在其中选择区域和位置。它不仅是一只石头的两只鸟，而且它还可以自动适应日光变化，而无需在 MySQL 时区表中指定时间和内容。

![在此处输入图像描述](../Images/a502783a993abdd1c1ce3820b95e1efd.png)

不要忘记重新启动 MySQL 服务器以使更改生效。

# c# - 最佳 WinForms 分发计划

> ID：11331678
> 
> 赞同：2
> 
> 时间：2012-07-04T15:09:57.270
> 
> 标签：c#, winforms, clickonce, distribution

我在一家冶金企业工作，我们自己开发生产性软件。我们正在考虑改变我们的分配计划以适应我们当前的需求。我希望你能给一些想法。

我们的应用程序是一个 WinForms，C# Framework 4.0。它位于 Intranet 中。它分为三个项目（UX、业务层和模型层）。应用程序被“逻辑地”划分为模块，每个模块执行不同的任务，但它们共享一些功能（即商业模块、财务模块、报价模块）。

如果需要，还需要注销所有用户，以便他们可以更新他们的应用程序（在严重更新的情况下）。

我们有两种情况（也许您可以添加其他情况）：

**情景 1。**

整个应用程序只是一个随 ClicOnce 分发的 EXE。

优点：

*   易于检测任何变化及其影响。
*   只有一种分布

缺点：

*   小的变化会影响整个公司（如果变化不影响我的“模块”，为什么要更新？）
*   分布较重
*   必须改进您的测试，以便您在分发中留下更少的错误。

**情景 2。**

一个“触发”不同 EXE（每个模块一个）的小型应用程序 (EXE)。

优点：

*   更新打火机。
*   孤立的错误。
*   孤立发展。

缺点：

*   必须检测每个更改以便重新编译/分发每个受影响的模块 (EXE)。
*   创建一个新项目以存储共享内容（表单、类等）。

你怎么看？你知道其他的分销计划吗？

谢谢！

哈维尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T15:17:01.837

我会混合使用您的两种方案，并为每个模块部署一个 ClickOnce。共享代码的更改将“触发”每个依赖模块的新部署。

您可以探索[System.Deployment 命名空间](http://msdn.microsoft.com/en-us/library/gg145029)，特别是用于集成“严重更新”要求的[ApplicationDeployment.CheckForUpdate 方法](http://msdn.microsoft.com/en-us/library/ms136935)，以便应用程序自行更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:17:01.970

嗯...我想有人已经遇到过这个问题。他决定创建动态链接库。

你应该有

*   1 exe：具有非常简单代码的 GUI：仅调用模块

*   n dll：具有清晰API的模块，可由GUI或其他模块调用。

然后，您可以轻松地用自动更新替换一个模块。例如，这就是 IE 的工作方式。

# iphone - iOS - 如何从多个 UIImageView 保存图像？

> ID：11331680
> 
> 赞同：1
> 
> 时间：2012-07-04T15:09:59.530
> 
> 标签：iphone, ios, ipad, uiimageview, uiimage

我想做一些非常简单的事情，即从 iPhone 库中选择一张图片将其添加到我的视图中。然后在我的视图中添加另一个小图像（比如说 PNG 中的卡通微笑），然后当我单击 UIBarButtonItem 时，将结果保存在我的照片库中。

我知道如何将 UIImage 保存到我的库中，但我不知道如何从我的视图（没有工具栏！）中创建高质量的 JPG。我尝试做快照，但我得到了一个质量很差的小图像（分辨率）！

你知道我该怎么做吗？

提前致谢 ！

编辑：我的快照代码

```
UIGraphicsBeginImageContext(self.editableView.frame.size);
[self.editableView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage * image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

我什至尝试了这个技巧将它保存为 PNG ！

```
UIImage* im = [UIImage imageWithCGImage:image.CGImage]; // make image from CGRef
NSData* imdata =  UIImagePNGRepresentation ( im ); // get PNG representation
UIImage* im2 = [UIImage imageWithData:imdata]; // wrap UIImage around PNG representation

UIImageWriteToSavedPhotosAlbum(im2, self, @selector(image:didFinishSavingWithError:contextInfo:), nil); 
```

# html - 带有 kineticjs 画布绘图应用程序的 html5 突然变慢

> ID：11331686
> 
> 赞同：0
> 
> 时间：2012-07-04T15:10:21.567
> 
> 标签：html, kineticjs

我正在用 kinatic JS 构建一个画布绘图应用程序。目前它在这里

182.19.26.90/kjs/

这就像我选择框和拖动时一样，将根据鼠标拖动创建矩形。但是当矩形数量增加时，应用程序变得非常慢。下面是我的代码

```
$(stage.getContent()).bind('mousedown',function(){
    isMouseDown = true;        
    initial_x = stage.getMousePosition().x;
    initial_y = stage.getMousePosition().y;
    stroke = 1;
    rect = new Kinetic.Rect({
        x: initial_x,
        y: initial_y,
        width: 0,
        height: 0,
        stroke: "black",
        strokeWidth: stroke,
        name: 'rect-'+Math.random(1000)
    }); 
    rect.setDetectionType("path");
    rect.on('click', function(){
        if(isPointer){
            removeAnchor();
            addAnchor(this.getX(), this.getY(), "tl");
            addAnchor(this.getX()+this.getWidth(), this.getY(), "tr");
            addAnchor(this.getX(), this.getY()+this.getHeight(), "bl");
            addAnchor(this.getX()+this.getWidth(), this.getY()+this.getHeight(), "br");
            currSel = this.getName();
        }

    })

    rect.on('mousemove', function(){
        if(isPointer) {
            document.body.style.cursor = 'move';
            this.setStroke("blue");
            this.draggable(true);                
            layer.draw();
        }
    })

    rect.on('mouseout', function(){
        if(isPointer) {
            document.body.style.cursor = 'default';
            this.setStroke("black");
            this.draggable(false);
            layer.draw();
        }
    })

    rect.on('dragstart', function(){
        removeAnchor();
    })

    rect.on('dragend', function(){
        addAnchor(this.getX(), this.getY(), "tl");
        addAnchor(this.getX()+this.getWidth(), this.getY(), "tr");
        addAnchor(this.getX(), this.getY()+this.getHeight(), "bl");
        addAnchor(this.getX()+this.getWidth(), this.getY()+this.getHeight(), "br");
        currSel = this.getName();
    })      

});

$(stage.getContent()).bind('mousemove',function(){
    if(isMouseDown){        
        last_x = stage.getMousePosition().x;
        last_y = stage.getMousePosition().y;

        width = last_x - initial_x;
        height = last_y - initial_y;

        rect.setHeight(height);
        rect.setWidth(width);
        layer.add(rect);
        stage.add(layer);         
    }
});

$(stage.getContent()).bind('mouseup',function(){
    isMouseDown = false;        
}); 
```

}

虽然它是大代码，但我只是粘贴在这里，它只是创建一个框。谁能给我任何方法来解决这个减速问题。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:47:43.680

更新到最新的 KineticJS 4.3，因为随着新版本的发布，对象的绘制速度随着时间的推移而大大提高。

```
 http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.3.0.min.js 
```

# android - 如果设备因电池电量为 0 而关闭，是否会广播 Intent “android.intent.action.ACTION_SHUTDOWN”？

> ID：11331687
> 
> 赞同：0
> 
> 时间：2012-07-04T15:10:25.400
> 
> 标签：android, android-intent

我有一个应用程序可以监听这个广播，以便在设备即将关闭时保存一些数据。当我手动关闭设备时它工作正常。我很想知道如果设备因为所有电池耗尽并且电池电量变为 0 而关闭，会发生什么行为？是否会广播事件并且系统会正确关闭或系统无法正确关闭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:33:22.497

按照 API 的说法，我不明白为什么在电池耗尽的情况下不会广播**ACTION_SHUTDOWN 。**

> 广播动作：设备正在关闭。这是在设备关闭时广播的（完全关闭，不是休眠）。广播完成后，将继续进行最终关机，所有未保存的数据都会丢失。应用程序通常不需要处理这个问题，因为前台活动也会暂停。

**如果没有，您可以尝试使用ACTION_BATTERY_CHANGED**和**ACTION_BOOT_COMPLETED**找到合适的解决方法。

祝你好运

# asp.net - 实现资源时在后面的代码中找不到 ASP.net 控件

> ID：11331693
> 
> 赞同：12
> 
> 时间：2012-07-04T15:10:37.407
> 
> 标签：asp.net, visual-studio-2010, .net-4.0, intellisense, globalization

由于我们在 ASP.net*网站*中实现了全球化，我们遇到了一些智能感知问题。

将资源添加到 asp.net 控件时，我们会收到错误消息。即使错误显示在 Visual Studio 中，应用程序仍然有效！

例如下面的按钮

```
 <asp:Button runat="server" ID="BtnSave" Text="<%$ Resources:ResourceName, Save %>" OnClick="BtnSave_Click" /> 
```

在后面的代码中无法识别：

![智能感知问题](../Images/78e1eb85dbec28d0665a6e4ac281adf5.png)

只有在打开后面的代码时才会显示错误。但是在浏览器中它可以工作！

没有资源引用的相同按钮效果很好：

```
 <asp:Button runat="server" ID="BtnSave" Text="Save" OnClick="BtnSave_Click" /> 
```

这是一个自定义 SQL 资源提供程序工厂，添加到 web.config：

```
 <globalization resourceProviderFactoryType="MyNamespace.SqlResourceProviderFactory" /> 
```

我已经尝试删除缓存并重新启动计算机。

您对如何找到问题有任何提示吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T09:30:37.917

当我创建一个新的 VS2010 解决方案并拖入现有网站时，我遇到了这个问题。要解决它，请右键单击项目并“**转换为 Web 应用程序**”，这将创建设计器文件并修复智能感知问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T15:29:24.427

我自己有过几次，但与全球化无关。

我总是通过重新启动 VS（看起来你已经尝试过）或检查前端代码和后端代码中的类名来解决它，并且代码是相同的。

这听起来很愚蠢，但如果你复制一个页面，那么类名不会更新，所以绑定会有点歪曲（这是一个技术术语）。

可能无济于事，但需要检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T20:24:50.707

尝试清除临时编译的页面缓存，包括 32 位和 64 位各自的目录（64 位如下所示）：

`%System Drive%:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files`

有时可以做到这一点

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T10:15:08.397

您是否可以尝试使用隐式资源键引用来查看这是否有帮助，而不是您正在使用的显式引用？

[http://msdn.microsoft.com/en-us/library/ms227427.aspx](http://msdn.microsoft.com/en-us/library/ms227427.aspx)

此外，您是否尝试过删除“obj”文件夹并重建 - 有时这对我有用？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T11:31:04.023

当 .aspx 页面的内容被批量复制到新页面时，我们遇到了这个问题，导致 2 个 .aspx 文件指向后面的相同代码

```
CodeFile="xxxxxxxx.aspx.cs" 
```

它以同样的方式表现出来，抛出错误，停止构建但将其注释掉，构建然后将其评论回来，站点和功能运行良好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-22T15:18:55.763

通常这可以通过清理和重建来解决。

如果这不起作用，请尝试在标记或设计视图中添加一些内容以强制重新生成设计器文件。

当您重命名页面文件时，也会发生这种情况。仔细检查 .aspx 文件中的“CodeBehind=”和“Inherits=”字段是否正确：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebPagName.aspx.cs" Inherits="NameSpace.ClassName" %> 
```

例如，如果您的网页名称是 WebPage1，而您在 WebPage1.aspx.cs 文件中的类名称是 WebPage1，而您的项目名为 Project1，那么它可能如下所示：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebPage1.aspx.cs" Inherits="Project1.WebPage1" %> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-18T16:45:03.097

你能不能做“干净的解决方案”并删除c盘中asp.net的临时文件夹，如果这有帮助，请告诉我

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-18T13:39:59.483

我们的资源提供程序存在问题：它正在运行时编译和工作，但在没有 HTTP 上下文 ( `HttpContext.Current`) 的情况下运行时崩溃。

我会建议遇到同样问题的其他人检查他们 web.config 文件中使用的类是否存在这种不一致。

# java - PlayN - 在背景层重复图像

> ID：11331695
> 
> 赞同：0
> 
> 时间：2012-07-04T15:10:57.047
> 
> 标签：java, playn

如何在背景层中重复（X 和 Y）图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:01:28.703

我相信这段代码做了类似的事情：

```
final ImageLayer bgLayer = graphics().createImageLayer(bgImage);
bgLayer.setRepeatX(true);
bgLayer.setRepeatY(true);
graphics().rootLayer().add(bgLayer); 
```

# php - 为什么这段代码不能正确地增加一个计数器？

> ID：11331702
> 
> 赞同：0
> 
> 时间：2012-07-04T15:11:34.303
> 
> 标签：php, session

在我下面的代码中，为什么不是每次都将整数加一？例如，`1 OF 5`当我提交表单时说我有。提交后，它应该是`2 OF 5`，而是显示`5 OF 5`。即使我将最大值从 5 更改为 3，也会发生这种情况；它从 开始`1 OF 3`并立即跳到`3 OF 3`。这是显示的代码`.. OF ..`

```
<h1><?php echo $sessionMinus ?> OF <?php echo $_SESSION['initial_count'] ?></h1> 
```

以下是每次应将值增加一的代码：

```
if(isset($_POST['sessionNum'])){
  //Declare my counter for the first time

  $_SESSION['initial_count'] = $_POST['sessionNum'];
  $_SESSION['sessionNum'] = $_POST['sessionNum'];
  $_SESSION['sessionCount'] = 1;
}
else if ($_SESSION['sessionCount'] < $_SESSION['sessionNum']) {
    $_SESSION['sessionCount']++;
}

$sessionMinus =  $_SESSION['sessionCount']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:27:42.950

代码看起来不错。但是，有可能在您不知情的情况下在后台请求该页面。例如，损坏的图像路径等可能会落在此文件上，从而增加您的计数器。为确保不是这种情况，请添加一个新的会话数组 var 来记录`$_SERVER['REQUEST_URI']`或将其记录到文本文件或其他内容中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:20:38.103

`$_SESSION['sessionCount']++;`如果您希望每次都递增，只需移出if/else 语句即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:22:18.710

试一试，我不知道它是否会起作用，因为我目前无法对其进行测试，但我认为您的问题可能是您无法执行 $_SESSION++。你也缺少 session_start();

```
<?php
session_start();

if(isset($_SESSION['sessionNum'])) {
    if ($_SESSION['sessionCount'] < $_SESSION['sessionNum']) {
        $_SESSION['sessionCount'] = $_SESSION['sessionCount'] + 1;
    }
}
else {
    $_SESSION['initial_count'] = $_POST['sessionNum'];
    $_SESSION['sessionNum'] = $_POST['sessionNum'];
    $_SESSION['sessionCount'] = 1;
}?>

<h1><?php echo $sessionMinus ?> OF <?php echo $_SESSION['initial_count'] ?></h1> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T15:49:17.700

问题是您从`$_POST`http 数组中获取了一个字符串，该字符串不会自动转换为整数值。为了做你想做的事，上面的代码可以这样修改：

```
if(isset($_POST['sessionNum'])){
  //Declare my counter for the first time

  $_SESSION['initial_count'] = intval($_POST['sessionNum']);
  $_SESSION['sessionNum'] = intval($_POST['sessionNum']);
  $_SESSION['sessionCount'] = 1;
}
else if ($_SESSION['sessionCount'] < $_SESSION['sessionNum']) {
    $_SESSION['sessionCount']++;
}

$sessionMinus =  $_SESSION['sessionCount']; 
```

该代码还提供了基本的输入验证，因为如果它无法解析数字`intval()`将返回。`0`

# openjpa - 使列索引超出范围，0 < 1

> ID：11331712
> 
> 赞同：0
> 
> 时间：2012-07-04T15:12:17.073
> 
> 标签：openjpa

我正在使用 OpenJPA 2.2.0，当我执行 select 语句时，我收到“列索引超出范围，0 < 1”错误。

```
EntityManager entityMgrObj = emf.getEntityManager();

entityMgrObj.clear();

Query query = entityMgrObj.createNativeQuery("select * from company_user where user_id = 1001);

List<CompanyUserDO> companyUserDOObj = null;

try {
    companyUserDOObj = query.getResultList();
} catch (Exception e) {
    System.out.println(e.getMessage());
} 
```

当 query.getResultList() 执行时，我得到“列索引超出范围，0 < 1”错误。有人可以让我知道上面的代码有什么问题吗？

**@更新**

当我没有捕捉到异常时，控制台上会打印以下堆栈。

```
Exception in thread "main" <openjpa-2.2.0-r422266:1244990 fatal general error> org.apache.openjpa.persistence.PersistenceException: Column Index out of range, 0 < 1.
FailedObject: select * from company_user where user_id=1001 [java.lang.String]
at org.apache.openjpa.jdbc.sql.DBDictionary.narrow(DBDictionary.java:4918)
at org.apache.openjpa.jdbc.sql.DBDictionary.newStoreException(DBDictionary.java:4878)
at org.apache.openjpa.jdbc.sql.SQLExceptions.getStore(SQLExceptions.java:136)
at org.apache.openjpa.jdbc.sql.SQLExceptions.getStore(SQLExceptions.java:118)
at org.apache.openjpa.jdbc.sql.SQLExceptions.getStore(SQLExceptions.java:70)
at org.apache.openjpa.jdbc.kernel.GenericResultObjectProvider.handleCheckedException(GenericResultObjectProvider.java:125)
at org.apache.openjpa.lib.rop.EagerResultList.<init>(EagerResultList.java:40)
at org.apache.openjpa.kernel.QueryImpl.toResult(QueryImpl.java:1251)
at org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:1007)
at org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:863)
at org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:794)
at org.apache.openjpa.kernel.DelegatingQuery.execute(DelegatingQuery.java:542)
at org.apache.openjpa.persistence.QueryImpl.execute(QueryImpl.java:286)
at org.apache.openjpa.persistence.QueryImpl.getResultList(QueryImpl.java:302)
at zumigo.geofence.test.dalTest.main(dalTest.java:62)
Caused by: java.sql.SQLException: Column Index out of range, 0 < 1.
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:987)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:982)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:927)
at com.mysql.jdbc.ResultSetImpl.checkColumnBounds(ResultSetImpl.java:812)
at com.mysql.jdbc.ResultSetImpl.getStringInternal(ResultSetImpl.java:5651)
at com.mysql.jdbc.ResultSetImpl.getString(ResultSetImpl.java:5570)
at org.apache.commons.dbcp.DelegatingResultSet.getString(DelegatingResultSet.java:213)
at org.apache.commons.dbcp.DelegatingResultSet.getString(DelegatingResultSet.java:213)
at org.apache.openjpa.lib.jdbc.DelegatingResultSet.getString(DelegatingResultSet.java:121)
at org.apache.openjpa.jdbc.sql.DBDictionary.getString(DBDictionary.java:886)
at org.apache.openjpa.jdbc.sql.ResultSetResult.getStringInternal(ResultSetResult.java:474)
at org.apache.openjpa.jdbc.sql.AbstractResult.getString(AbstractResult.java:767)
at org.apache.openjpa.jdbc.meta.strats.StringFieldStrategy.getPrimaryKeyValue(StringFieldStrategy.java:217)
at org.apache.openjpa.jdbc.meta.ClassMapping.getObjectId(ClassMapping.java:188)
at org.apache.openjpa.jdbc.meta.ClassMapping.getObjectId(ClassMapping.java:147)
at org.apache.openjpa.jdbc.kernel.JDBCStoreManager.load(JDBCStoreManager.java:1002)
at org.apache.openjpa.jdbc.kernel.GenericResultObjectProvider.getResultObject(GenericResultObjectProvider.java:93)
at org.apache.openjpa.lib.rop.EagerResultList.<init>(EagerResultList.java:36)
... 8 more 
```

**@UPDATE 2** 在搜索和调试后发现persistence.xml 文件指向一个旧数据库，因此它给出了上述错误。

更改了数据库 URL，应用程序运行正常。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:41:34.773

完全不确定，但您似乎使用了持久性上下文（因为您使用 clear 方法）。您是否尝试使用

```
createQuery 
```

方法而不是

```
createNativeQuery 
```

一？它将使用 JPA 持久性上下文，它适用于我的 Java EE 项目。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-12T02:51:15.330

jdbc 中的列索引似乎是从 1 计算的。它与从 0 计算的数组不同。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-30T21:43:44.267

我也有这个问题。你可以改变

```
companyUserDOObj = query.getResultList(); 
```

至

```
companyUserDOObj.addAll(query.getResultList()); 
```

# objective-c - 如何从当前类中实例化的另一个类调用方法

> ID：11331715
> 
> 赞同：0
> 
> 时间：2012-07-04T15:12:29.280
> 
> 标签：objective-c, ios, class, methods

我的屏幕有一些这样的视图

```
__________________
|          _____  |
|          |    | | //viewX is a video screen
|          |    | | 
| viewX    | vY | | //viewY is a custom uiview i created.
|          |____| | //it contains a method which i would like to call that toggles
|_________________| //the hidden property of this view. and when it hides, a little
|                 | //button is replaced no the top right corner on top of viewX
| viewZ           | //the video layer
|                 |
|_________________| //viewZ is a view containing many square views - thumbnails. 
```

我的问题是，我不知道如何注册触摸事件，以便无论用户触摸屏幕的哪个视图都可以识别任何触摸事件。atm im 处理其中每个视图的触摸事件。所以一切都很好......

但是我想要做的是，当用户点击屏幕上的任何其他位置但在 viewY 上时，viewY 应该通过在 viewY 类中调用该方法来消失。

此 viewY 类已实例化，并且没有附加任何 xib 文件。uiview 是在 viewY 类中以编程方式创建的。viewY 行为的整个类在 viewX - 视频视图中实例化。

我的老板说添加代表......虽然我现在知道如何做到这一点......有什么帮助吗？

无论如何我可以让它变得非常简单并且无论我从哪个班级打电话都可以说 REMOVE VIEW 吗？

我还看到其他人通过使用这些时髦的箭头-> ... <- 等来实现这一点。虽然我不确定这是否是我需要的或如何实现这样的事情。

啊，我想我让我的问题变得相当复杂，但我的意思是它是一个简单的问题，并且知道它可以通过简单的方式完成！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:23:29.563

不会打电话

```
[viewY hideThisViewAndShowLittleButton]; 
```

做正确的工作？如果你想删除 viewY 那么你可以调用：

```
[viewY removeFromSuperview]; 
```

为了访问`viewY`from `viewZ`，只要可以`viewZ`访问`viewX`，您可以定义一个`viewX`返回给您的方法`viewY`。类似的东西（在你的实现文件中`viewX`：

```
- (UIView*)viewY {
   return <viewX_knows_which_value_to_return>;
} 
```

至于`viewX_knows_which_value_to_return`，只要这`viewY`是唯一的子视图，您可以这样做：

```
[self.view.subviews lastObject]; 
```

（注意：我在这里假设 viewX 实际上是一个视图控制器，而不是 UIView）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:27:41.217

这是个好办法。您甚至可以通过隐藏或添加 Alpha 来做到这一点。

```
vY.hidden = YES; 
```

取回它

```
vY.hidden = NO; 
```

# java - 事务更新数千个实体时如何避免 StaleObjectStateException？

> ID：11331718
> 
> 赞同：1
> 
> 时间：2012-07-04T15:12:35.717
> 
> 标签：java, spring, hibernate, jpa, transactions

我们将 Hibernate 3.6.0.Final 与 JPA 2 和 Spring 3.0.5 一起用于在 tomcat 7 和 MySQL 5.5 上运行的大型企业应用程序。应用程序中的大多数事务都存在不到一秒并更新 5-10 个实体，但在某些用例中，我们需要在单个事务中更新超过 10-20K 个实体，这需要几分钟，因此超过 70% 的时间此类事务因 StaleObjectStateException 而失败，因为其中一些实体已被其他事务更新。

我们通常在所有表中维护版本列，在 StaleObjectStateException 的情况下，我们通常会重试，但由于这些 long 事务无论如何都很长，所以如果我们继续重试，那么我也不太确定我们是否能够逃脱 StaleObjectStateException。

此外，许多活动在繁忙时间不断更新这些实体，因此我们不能采用悲观的方法，因为它可能会停止系统中的许多活动。

请建议如何解决如此长的交易问题，因为我们无法产生数千个独立的小交易，因为我们无法承受一些失败和一些成功交易的混乱数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:18:46.460

在一次事务中修改 20,000 个实体确实非常多，比正常情况要多得多。

我不能给你一个通用的解决方案，但这里有一些解决问题的想法。

1) 使用 LockMode.UPGRADE（参见[悲观锁定](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/transactions.html#transactions-locking)）。在那里你显式地生成了一个“SELECT FOR UPDATE”，它会阻止其他用户在锁定时修改行。这应该可以避免您的问题，但是如果您有太多大型事务，它可能会产生死锁（取决于您的编程）或超时。

2) 更改您的数据模型以避免这些大型事务。为什么必须更新 10,000 行？也许可以将更新了这么多行的这些信息放到一个新表中，只供参考，因此您只需更新新表中的几行。

3）使用StatelessSession而不是Session。在这种情况下，您不必在出现异常后强制回滚，而是可以更正问题并继续（在您的情况下，重新加载同时修改的实体并在重新加载的实体上对大型事务进行修改）。这可能使您能够逐行处理关键事件（同时修改的行），而不是完整的大型事务。

# python - 什么时候应该使用类，什么时候应该使用函数？

> ID：11331719
> 
> 赞同：4
> 
> 时间：2012-07-04T15:12:35.770
> 
> 标签：python

什么时候类比函数更有用？有什么我应该知道的硬性或快速规则吗？它依赖于语言吗？我打算为 Python 编写一个脚本，它将解析不同类型的 json 数据，我的直觉是我应该使用一个类来执行此操作，而不是一个函数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T15:15:25.810

当您的例程需要保存状态时，您应该使用一个类。否则一个函数就足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T15:17:48.497

首先，我认为这与语言无关（如果语言允许您也定义类和函数）。

作为一般规则，我可以告诉您，一个 Class 将自身包装成一个*behavior*。因此，如果您有某种类型的*服务*必须实现（使用不同的功能），那么您正在寻找的就是一个类。
此外，类（比如更正确的对象）具有状态，您可以实例化更多出现的类（因此具有*不同状态的**不同*对象）。

 *同样重要的是，可以挖掘一个类：因此您只需稍作更改即可覆盖函数的特定行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T15:14:37.357

拥有**状态**时的类-应该在调用中保持不变

其他情况下的功能

例外：如果你的类只存储几个值并且除了 __init__ 之外只有一个方法，你应该更好地使用该函数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T15:15:18.403

对于任何重要的事情，您可能应该使用一个类。我倾向于将我所有的“自由浮动”函数限制在一个 utils.py 文件中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-04T15:20:16.793

这*取决于*语言。

一些语言，如 Java，坚持对所有事情都使用一个类。根本没有独立功能的概念。

Python不是那样的。完全可以 - 实际上推荐 - 独立定义函数，并且可以将相关函数组合在模块中。正如其他人所说，您真正想要 Python 中的类的唯一时间是当您有需要保留的状态时 - 即将数据封装在对象中。*

# emacs - 如何在emacs中杀死带引号的字符串？

> ID：11331725
> 
> 赞同：7
> 
> 时间：2012-07-04T15:13:23.040
> 
> 标签：emacs, elisp

我想在源文件中终止带引号的字符串，而不必标记字符串的开头和终止区域，而只需将点放在带引号的字符串内的任何位置并按下快捷方式即可。

我试图为此在elisp中编写一个函数，但我发现需要从头到尾解析文件以确定该点是否在引用字符串内，并找到引用字符串的边界（也处理 \")...

但是该文件已经被字体锁解析了。所以现在我可以确定我是否在引号内：

```
(defun inside-quoted-string? ()
  (interactive)
  (print (find 'font-lock-doc-face (text-properties-at (point))))) 
```

但是我如何获得字符串的边界？font-lock 知道它，因为它很好地用蓝色突出显示它，但我如何得到它？

编辑：感谢您的回答。我想出了这段代码，它完全符合我的要求——在不选择区域甚至移动到代码开头的情况下移动代码。

```
(defun kill-at-point ()
  "Kill the quoted string or the list that includes the point"
  (interactive)
  (let ((p (nth 8 (syntax-ppss))))
    (if (eq (char-after p) ?\")
    (progn 
      (goto-char p)
      (kill-sexp))
      (progn
    (up-list)
    (let ((beg (point)))
      (backward-list)
      (kill-region beg (point)))))))
(global-set-key (kbd "C-,") 'kill-at-point) 
```

欢迎任何改进它的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T16:10:29.320

您可以使用底层解析器的数据，而不是依赖字体锁定。围绕点（如果有）的字符串的开头可用作`(nth 8 (syntax-ppss))`. 然后，您可以使用`(forward-sexp 1)`跳过字符串以找到它的结尾。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T15:25:40.570

`previous-property-change`您可以使用和找到属性的边界`next-property-change`。例如：

```
(defun kill-by-property (arg)
  (interactive "d")
  (kill-region
    (previous-property-change arg nil (point-min))
    (next-property-change arg nil (point-max)))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T13:52:09.543

根据 Stefan 的建议 using `syntax-ppss`，以下应该可以解决问题

```
(defun kill-string ()
  (interactive)
  (let ((string-start (nth 8 (syntax-ppss))))
    (goto-char string-start)
    (kill-sexp))) 
```

它用于`(nth 8 (syntax-ppss))`查找字符串的开头，跳转到那里，然后使用内置`kill-sexp`函数杀死点处的 s 表达式（在这种情况下，我们想要删除的字符串）。完全不需要您进行任何类型的区域计算。

# kohana-3 - Kohana 3 – 比 Kohana 2 更容易吗？

> ID：11331730
> 
> 赞同：0
> 
> 时间：2012-07-04T15:13:47.157
> 
> 标签：kohana-3, kohana-2

一直以来，我一直在尝试在一个新项目中从 Kohana 2 迁移到 Kohana 3.2，我想知道**它如何更好**？

*   有[证据](http://forum.kohanaframework.org/discussion/3534/kohana-3-performance/p1)表明 Kohana 3 中的数据库运行速度较慢
*   验证码模块被排除在框架之外（因此需要在[论坛](http://forum.kohanaframework.org/discussion/9426/solved-ko-3-2-kohana-captcha-module-issues/p1)中搜索以通过破解旧模块来解决问题）
*   Kohana 3.x 文档中存在混乱（您会遇到仅针对 Kohana 3.0 或 3.1 记录的内容，尽管版本可能会有很大变化）
*   最后，我的应用程序不会对某些类型的错误产生任何输出，这是我在 Kohana 2 中从未遇到过的。——不知道为什么。（*已解决：*新主机不显示错误。）

显然，我很遗憾开发人员离开了良好的旧 Kohana 2.x 分支，因为我所需要的只是针对非常简单的应用程序的简单而稳定的解决方案。

问题是，与 Kohana 2.x 相比，Kohana 3.x 的哪些优点值得其缺点？（我的意思是那种让程序员的生活更轻松并节省时间的优势。）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:58:16.737

*   HMVC 开箱即用
*   轻核（许多可选的类被移到单独的模块中）
*   新的路由系统！！太酷了，我真的很讨厌 2.3.x 路线
*   用户指南模块。使用自动生成的 API 编写您的文档
*   配置编写器 (v3.2+)
*   改进的错误处理（尤其是在 3.3 中）
*   `Minion`模块 (v3.3) - 具有 Kohana 功能的 CLI 任务！

# ruby-on-rails - Rails 缺少模板

> ID：11331732
> 
> 赞同：5
> 
> 时间：2012-07-04T15:13:48.777
> 
> 标签：ruby-on-rails, view, login, controller, action

当我尝试运行我的视图时，我得到了这个：

```
Missing template application/login with {:formats=>[:html], :locale=>[:en], :handlers=>[:coffee, :erb, :builder]}. Searched in: * "/home/carladessi/Goods In Final/app/views" 
```

在我的控制器中，我有：

```
def login

  # respond_to do |format|
  # format.html

end 
```

在我的路线中，我有：

```
match "/login/", :controller => 'application',  :action => 'login' 
```

我猜我需要在控制器中添加其他东西我只是不知道是什么..对不起，如果这是一个非常明显的问题！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T15:21:39.867

重新启动服务器，它工作正常！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T15:22:09.810

从`application_controller`.

然而，正在发生的事情是 Rails 正在寻找一个实际的模板或视图：

```
RAILS_ROOT/app/views/application/login.html.erb 
```

您可以做的是在上述路径中**添加**/**创建该模板。**或者您可以重定向到另一个控制器（它存在并呈现实际模板）。

# c# - CRYSTAL Report 许可证和 VS2010 Professional

> ID：11331735
> 
> 赞同：6
> 
> 时间：2012-07-04T15:13:52.117
> 
> 标签：c#, asp.net, vb.net, crystal-reports, report

过去我曾经在水晶报表XI和.Net（2008）应用程序的旧版本中设计报表，从未研究过VS2008附带的水晶报表工具。

> - **Visual Studio 2008/2010 中的黑白 Crystal Report XI 软件和 Crystal Report 工具有什么区别？**

我们正在.Net 2010 中设计基于Web 的应用程序，并考虑使用水晶报表来设计、查看和打印报表。应用程序将在服务器（64 位）上发布，超过 250 个用户将访问此应用程序。

> -**我们需要为 CR-XI 或更高版本（不是 Visual Studio 版本）购买 250 个许可证还是只购买一个许可证？**
> -**购买许可证后使用Visual Studio 自带的水晶报表有什么好处和坏处？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T08:50:06.570

在做了一些研究并与 SAP 的一位技术人员交谈后，我现在了解了许可条款和条件。

**水晶报表VS2010版**

Visual Studio 2010 与 VS2008 中的 Crystal Report 不同。Crystal Report 2011 for visual studio 版可以从SAP网站下载，免费使用。只要将其用于 .Net 中的内部应用程序，就没有许可费用（不能与第三方软件一起使用）

[http://www.businessobjects.com/jump/xi/crvs2010/default.asp](http://www.businessobjects.com/jump/xi/crvs2010/default.asp)

这是许可证详细信息的链接；

[http://scn.sap.com/people/blair.wheadon/blog/2010/04/19/crystal-reports-for-visual-studio-2010-licensing](http://scn.sap.com/people/blair.wheadon/blog/2010/04/19/crystal-reports-for-visual-studio-2010-licensing)

**设计报告 b/w CR2011 和 VS2010 的免费版 CR 有什么不同吗**

有人告诉我，B/W Crystal Report 2011 和 .Net 2010 的 Crystal Report 免费版没有区别，但我会下载它，稍后会回到这一点，因为我怀疑它与 CR 2011 中的设计报告相同（最新版本）。

**我公司只有一名水晶报表设计师，我们计划将水晶报表用于内部应用程序。我们需要购买一个许可证还是每次观看都需要许可证？**

在查看器许可方面：该应用程序纯粹为内部用户使用，因此不收取任何费用（如果您要转售，请与我联系）只要报告嵌入在您的应用程序中，用户就可以免费查看。如果有人需要为内部应用程序单独购买 Crystal Report 2011，那么它只需要一个用户许可证。

**水晶报表服务器**

如果您的用户需要更多：

- 访问从各种来源收集数据
的报告， - 安排报告并在特定时间在他们的电子邮件收件箱中接收它们 -
访问仪表
板 - 从他们的移动设备访问报告或仪表板 -
在现有的 Excel 电子表格或 PowerPoint 演示文稿中嵌入报告
- 等等

然后您将需要购买 Crystal Report Server。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T15:06:57.813

首先，这是我发布的一篇博文，向您展示了 VS 版本如何与完整的 Crystal 版本相匹配（我是由与我交谈的 SAP 代表提供的）：

[http://www.blakepell.com/2012-04-18-crystal-reports-ide-to-crystal-reports-dotnet-sdk-version](http://www.blakepell.com/2012-04-18-crystal-reports-ide-to-crystal-reports-dotnet-sdk-version)

现在，据我了解，VS 版本创建了一个完整的 Crystal 报表，可以与 .Net 对象、完整版本的 Crystal 或 Crystal Reports Server 一起使用。VS IDE 是 Crystal 的精简版，缺少花里胡哨（有时选项全部放在一起可能会令人沮丧，但话又说回来，如果您不需要这些选项，那也没关系）。

关于许可，我不是专家，但是如果您编写自己的服务器代码来部署报告，我认为您只需要客户端副本的许可证（VS 版本显然是免费的，尽管我认为它需要注册为要求免费许可证）。我们已经购买了我工作的 IDE 的完整副本，因为它更易于使用，而且节省的时间对我们来说是值得的。Crystal 提供了强大的服务器解决方案，但您必须为此付费。如果您使用 .Net 控件来部署和/或编写自己的代码，我认为没有成本。SAP 有不错的电话支持，您可以致电他们并验证此信息。

# c++ - 计算代码行数

> ID：11331738
> 
> 赞同：8
> 
> 时间：2012-07-04T15:14:14.997
> 
> 标签：c++, lines-of-code

我正在对 C++ 项目的行计数器进行一些研究，我对他们使用的算法非常感兴趣。有谁知道我在哪里可以查看此类算法的一些实现？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-04T16:43:12.157

有[cloc](http://cloc.sourceforge.net/)，这是一个免费的开源代码行数计数器。它支持多种语言，包括 C++。我个人使用它来获取我的项目的行数。

在它的[sourceforge](http://sourceforge.net/projects/cloc/)页面上，您可以找到 perl 源代码以供下载。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T15:20:24.423

好吧，如果通过行计数器，您的意思是计算行数的程序，那么算法非常简单：只需计算`'\n'`代码中的数量。另一方面，如果您的意思是计算 C++ 语句或产生其他指标的程序......虽然不是 100% 准确，但我过去仅通过计算 '}' 和 ';' 就得到了很好的结果 （当然，忽略注释以及字符串和字符文字中的那些）。任何更准确的东西都可能需要解析实际的 C++。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-04T16:51:21.357

您不需要实际解析代码来计算行号，只需对其进行标记即可。

该算法可能如下所示：

```
int lastLine = -1;
int lines = 0;
for each token {
    if (isCode(token) && lastLine != token.line) {
        ++lines; 
        lastLine = token.line;
    }
} 
```

在标记化期间您需要收集的唯一信息是：

*   它是什么类型的令牌（运算符，标识符，注释......）实际上您不需要在这里非常精确，因为您只需要区分“非代码令牌”（注释）和“代码代币”（其他）
*   令牌出现在文件中的哪一行。

关于如何标记，这是你自己想办法，但是为这样一个简单的案例手写标记器应该不难。您可以使用`flex`，但这可能是多余的。

* * *

**编辑**

我已经提到了“标记化”，让我快速为您描述一下：

标记化是编译的第一阶段。分词的输入是文本（多行程序），输出是一个“令牌”序列，如：具有某种意义的符号。例如，以下程序：

```
#include "something.h"

/*
This is my program.
It is quite useless.
*/
int main() {
    return something(2+3); // this is equal to 5
} 
```

可能看起来像：

```
PreprocessorDirective("include")
StringLiteral("something.h")
PreprocessorDirectiveEnd
MultiLineComment(...)
Keyword(INT)
Identifier("main")
Symbol(LeftParen)
Symbol(RightParen)
Symbol(LeftBrace)
Keyword(RETURN)
Identifier("something")
Symbol(LeftParen)
NumericLiteral(2)
Operator(PLUS)
NumericLiteral(3)
Symbol(RightParen)
Symbol(Semicolon)
SingleLineComment(" this is equal to 5")
Symbol(RightBrace) 
```

等等。

令牌，取决于它们的类型，可能具有附加到它们的任意元数据（即符号类型、运算符类型、标识符文本，或者可能是发现令牌的行号）。

然后将此类标记流馈送到解析器，解析器使用根据这些标记编写的语法生成规则，例如，构建语法树。

做一个完整的解析器会给你一个完整的代码语法树是具有挑战性的，尤其是如果它是我们正在谈论的 C++ 的话。但是，标记化（或“词法分析”或“词法分析”）更容易，尤其是。当您不关心太多细节时，您应该能够使用[有限状态机](http://en.wikipedia.org/wiki/Finite-state_machine)自己编写标记器。

关于如何实际使用输出来计算代码行数（即至少“代码”标记（即除注释之外的任何标记）开始的行） - 请参阅我之前描述的算法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T21:21:15.423

I think part of the reason people are having so much trouble understanding your problem is because "Count the lines of c++" *is itself* an algorithm. Perhaps what you're trying to ask is "How do I identify a line of c++ in a file?" That is an entirely different question which Kos seems to have done a pretty good job trying to explain.

# php - 每次旋转后PHP图像旋转都会失去质量

> ID：11331739
> 
> 赞同：6
> 
> 时间：2012-07-04T15:14:21.303
> 
> 标签：php, image, image-processing

我目前正在使用 GD 和一些 PHP 来旋转图像。每次旋转后，图像的质量都会变差。有没有更好的方法来做到这一点或者这是预期的？

```
 $img = new ImageClass;
    list($original, $info) = $img->load($src);

    // Determine angle
    $angle = strtolower($angle);
    if( $angle == 'cw' || $angle == 'clockwise' ) $angle = 270;
    if( $angle == 'ccw' || $angle == 'counterclockwise' ) $angle = 90;

    $rgb = $img->hex2rgb($bg_color);
    $bg_color = imagecolorallocate($original, $rgb['r'], $rgb['g'], $rgb['b']);

    $new = imagerotate($original, $angle, $bg_color); 
```

是否可以使用 jquery 旋转图像客户端，然后通过 PHP 将图像保存到服务器？我假设这将有助于提高图像质量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T15:19:46.953

在我们的共享服务中，我们以不同的方式处理这个问题。我们始终保留原始图像并存储初始旋转 (0)。

旋转时，加载原始图像，根据旋转 +/- 90 度旋转，并将副本写入文件系统。之后，使用新的轮换更新数据库。

不过，您的数据库中还需要两列，用于旋转和旋转的复制位置。我还假设您总是进行初始调整大小（可能针对不同大小进行多次调整），以便额外的列始终指向副本，而不是有时指向原始列直到旋转。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T15:16:28.593

如果您在有限矩阵中旋转图像，则无法避免质量、服务器端或客户端的下降，并且这些下降会在每次旋转时添加。

如果您需要来自同一个图像的多个旋转图像，则必须始终使用第一个（从未旋转过的）图像作为源并增加角度，而不是旋转最后一个旋转图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T15:20:51.773

每次保存 JPG 时，质量都会下降。这是一种“有损”格式。如果您使用 PNG，您可以在零质量损失的情况下旋转任意多次，因为它是一种“无损”格式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T15:30:21.123

几点

*   正如dystroy所写，在压缩图像上使用时旋转是有损的
*   客户端旋转通常不是图像操作，而是视图中图像对象的旋转，因此当您将其发送到服务器时，它将是原始图像
*   传闻 ImageMagick 在转换上提供比 GD 更好的结果（参见[http://de.php.net/imagick](http://de.php.net/imagick)）

# java - 是否有一个类在 Java 中公开一个无缓冲的 readLine 方法？

> ID：11331744
> 
> 赞同：6
> 
> 时间：2012-07-04T15:14:33.957
> 
> 标签：java, io, bufferedreader, readline, datainputstream

我正在清理我们工作中的一些代码库，其中一个较旧的类用于读取和写入数据。此数据是 US-ASCII 编码字符串和二进制编码原语的混合。

当前实现使用[DataInputStream](http://docs.oracle.com/javase/6/docs/api/java/io/DataInputStream.html)，但正如您在文档中看到的那样，`readLine()`由于与将字节转换为字符相关的问题，该方法已被弃用。虽然这个编码问题并没有真正为我们弹出，但弃用是一个问题，因为它已经不适用于 OpenJDK 7 的某些版本，并且弃用意味着它可以在将来完全删除。“官方”替代方案是使用`readLine`BufferedReader [，](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html)但我们无法使用 DataInputStream 进行完全交换，因为 BufferedReader 无法真正处理二进制编码的原语。

“混合”这两个类的问题在于，当 BufferedReader 从流中缓冲出来时，它会推进流标记。这意味着`readDouble()`从 DataInputStream 对方法的后续调用将因 IOExceptions 或 EOFExceptions 而失败，因为流标记的实际位置不是它“应该”在应用程序逻辑的上下文中的位置。

我研究了某种 hacky `mark()`/`reset()`策略，但有时流由不支持`mark()`/的 FileInputStream 支持`reset()`。

除了更改我们的数据协议以将原语写成字符或编写我自己的实现`readLine()`（这令人惊讶地不平凡）之外，有没有办法实现这一点？在这一点上，我什至愿意考虑一个外部库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T15:44:25.987

如果当前代码库运行良好并且您唯一的问题是`deprecation`标签，我个人建议从类的`readLine`方法中复制代码`DataInputStream`并将其移动到帮助程序/实用程序类。的`readLine`方法`DataInputStream`不使用很多实例变量，所以通过一些工作你应该能够很好地使用它。示例调用将如下所示：`Utils.readLine(dataInStream)`. 这将确保即使删除该方法，您的代码库也不会受到影响。

是的，它很hacky，是的，它看起来有点难看，但它是最快且可能是最安全的替代方案（对剩余代码库的更改最少）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:33:31.663

我认为您应该创建一个自定义子类，`DataInputStream`该子类添加一个`readLine`类似于您需要的方法的方法。（您甚至可以覆盖现有`readLine()`方法。）

是的，一个高效的实现并不简单，但如果你将自定义类堆叠在`BufferedInputStream`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T11:53:13.277

我遇到了类似的问题，我设法通过使用`BufferedReader`缓冲区大小为 1 的 a 来解决它。

结果，方法 BufferedReader.readLine() 是 unbuffered 。

```
 InputStreamReader inr=(new InputStreamReader( mInputStream(),"ASCII"));
            BufferedReader  mReader=new BufferedReader(inr,1); 
```

# ios - Cocoa 如何做一个 POST 请求？

> ID：11331746
> 
> 赞同：1
> 
> 时间：2012-07-04T15:14:41.407
> 
> 标签：ios, cocoa, request, http-post

我已经学习了一些教程，但我坚持做 Post 请求。我只想将 3 个参数发送到 URL 和响应。而且它必须是异步的，因为它会给我一些图像，我想在视图上一张一张地显示。

你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:30:56.207

[在这里](https://stackoverflow.com/questions/5537297/ios-how-to-perform-a-http-post-request)很好地介绍了这一点。

但是我发现这样做的方式更简单，正如我将向您展示的那样。在 SO 和其他提供这些知识的地方仍然有很多问题。

首先，我们使用参数设置请求：

```
- (NSData *)executePostCall {
    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@", YOUR_URL]];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

    NSString *requestFields = [NSString stringWithString:@""];
    requestFields = [requestFields stringByAppendingFormat:@"parameter1=%@&", parameter1];
    requestFields = [requestFields stringByAppendingFormat:@"parameter2=%@&", parameter2];
    requestFields = [requestFields stringByAppendingFormat:@"parameter3=%@", parameter3];

    requestFields = [requestFields stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    NSData *requestData = [requestFields dataUsingEncoding:NSUTF8StringEncoding];
    request.HTTPBody = requestData;
    request.HTTPMethod = @"POST";

    NSHTTPURLResponse *response = nil;
    NSError *error = nil;
    NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error]; 
    if (error == nil && response.statusCode == 200) {
      NSLog(@"%i", response.statusCode);
    } else {
      //Error handling
    }

    return responseData;
} 
```

这必须封装在一个块中，因为我们不能在主线程上执行它，因为它会锁定我们的应用程序，这是不受欢迎的，所以我们执行以下操作来封装这个请求，剩下的我会留下由您决定的详细信息：

```
dispatch_queue_t downloadQueue = dispatch_queue_create("downloader", NULL);

dispatch_async(downloadQueue, ^{
  NSData *result = [self executePostCall];
  dispatch_async(dispatch_get_main_queue(), ^{
    // Handle your resulting data
  });
});
dispatch_release(downloadQueue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:18:01.447

使用[`NSURLRequest`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html). 您可以在后台下载文件并在收到委托通知后显示它们：[下载到预定目标](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLDownload.html#//apple_ref/doc/uid/20001839-BAJEAIEE)

# javascript - 在 mediawki 安装中创建页面如何相互链接的强制定向可视化

> ID：11331747
> 
> 赞同：0
> 
> 时间：2012-07-04T15:14:43.677
> 
> 标签：javascript, mediawiki, data-visualization

我有一个 MediaWiki 安装，我想创建一个强制定向样式的可视化，显示哪些页面相互连接。MediaWiki 安装不是*很大*，大约 100 页。

关于从哪里开始的任何想法？理想情况下，我不喜欢使用 JQuery。

我做了一个谷歌搜索，但我真的不知道首先要做什么。

如果有人能指出我正确的方向，那将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:27:30.237

喜欢[这个](http://mbostock.github.com/d3/ex/force.html)？

[D3.js](http://d3js.org/)是一个很棒的库

# objective-c - 使用 < 256 RAM iOS 设备时应用程序在启动时崩溃

> ID：11331758
> 
> 赞同：4
> 
> 时间：2012-07-04T15:15:23.580
> 
> 标签：objective-c, performance, memory, memory-management, crash

## 信息

我最近在 AppStore 上推出了一款应用。在模拟器上测试了数千次，实际设备测试了数百次之后，我们终于发布了我们的应用程序。

## 问题

当用户启动应用程序时，开始弹出有关应用程序崩溃的评论。我们认为**应用程序在 RAM 小于（或等于）256 Mb 的 iOS 设备上启动时会崩溃**。以下设备是我们的应用支持的少于 256 个的设备：

*   iPod 触摸 4G
*   iPhone 3GS
*   iPad 1

该应用程序并不总是崩溃。有时它启动良好并且运行平稳。其他时候它会崩溃。从启动（当用户点击图标时）到崩溃的时间通常是两秒，这意味着系统没有关闭它。

## 发现

在某些设备上使用 Instruments 进行测试时，我发现以下内容：

1.  没有内存泄漏（我使用的是 ARC），但有内存警告
2.  项目正在疯狂地分配。分配的项目太多了，即使我使用的是 ARC，也**好像 ARC 没有做它应该做的事情**
3.  由于我认为“过度分配”，结果是：

    **此应用程序（平均）占用 60 MB 的实内存**和 166 MB 的虚拟内存。当应用程序启动时，正在使用的内存迅速增加，直到达到大约 60 MB，此时视图已加载。这是 Instruments 中活动监视器的快照： ![在此处输入图像描述](../Images/b6c8fe3a3de29d945e006739cf090d58.png)

我知道这些数字太高了（尽管 CPU % 从未真正达到那里）。我担心 ARC 不能正常工作，或者更可能的情况是：我没有正确分配对象。**可能会发生什么？**

## 守则和警告

在 Xcode 中，只有几个警告，没有一个与应用程序启动或与应用程序启动相关的任何文件有关。我在 App Delegate 和我的`viewDidLoad`方法中都设置了断点，以检查崩溃是否发生在那里 - 它没有。

## 更多背景信息

此外，Xcode 永远不会在调试器中生成任何错误或消息。iTunes Connect 中也没有崩溃报告，它只是说，“提交的报告太少，无法显示报告。” 我已经向我的应用程序添加了崩溃报告，但我还没有发布那个版本。

## 几个问题

我刚开始使用 ARC 就开始使用 Obj-C，所以我是处理内存、分配等方面的新手（这可能很明显），但我想知道一些事情：如何使用它`@autoreleasepool`来减少我的内存影响？我如何处理内存警告，`didRecieveMemoryWarning`我在使用 ARC 后应该写什么？删除 NSLog 语句会有助于加快速度吗？

还有最重要的问题：

**为什么我的应用程序占用这么多内存，我如何才能减少高达 60 MB 的占用空间？**

我真的很感激任何帮助！提前致谢！

**编辑：**在 iPhone 4 (A4) 上进行测试后，我们注意到应用程序在运行时不会崩溃，而在 RAM 小于 256 MB 的设备上它会崩溃。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T17:19:40.760

我终于解决了这个问题。我花了几个小时思考为什么我的应用程序可能比愤怒的小鸟或涂鸦跳跃占用更多的 RAM。这没有任何意义，因为我的应用程序没有 CALayer 绘图、复杂的 Open GL 图形渲染或繁重的网络连接。

我在搜索答案时发现了这张[幻灯片，幻灯片 17 列出了减少内存占用的方法。](http://www.slideshare.net/360conferences/managing-and-optimizing-memory-usage)突出的一件事是PNGCrush（图形压缩）。

我的应用程序包含许多自定义图形（PNG 文件），但我没有想到它们会以任何方式影响我的应用程序，显然**图像（如果未正确优化）会严重增加应用程序的内存占用**。

在安装**PNGCrush**并在一个特别大的图像（3.2 MB）上使用它，然后删除一些未使用的图像之后，我最终将我的应用程序内存占用从 60+ MB 和严重滞后减少到 35 MB 并且没有滞后。这花了足足五分钟的时间。

我还没有完成“粉碎”我所有的图像，但是当我完成时，我会向每个人更新最终的内存占用。

对于所有感兴趣的人，这里有一个[博客链接，它解释了如何安装 PNGCrush](http://www.mactricksandtips.com/2012/02/installing-and-using-pngcrush-on-your-mac.html)（它相当复杂）。

**更新：**我现在没有使用 PNGCrush 进程（这很有帮助，虽然处理大量图像很耗时），而是使用了一个名为*[ImageOptim](http://imageoptim.com)*的程序，它为多个脚本（如 PNGCrush）提供了 GUI。这里有一个简短的描述：

> ImageOptim 无缝集成了各种优化工具：PNGOUT、AdvPNG、**PNGCrush**、扩展 OptiPNG、JpegOptim、jpegrescan、jpegtran 和 Gifsicle。

这是一个网站[链接](http://imageoptim.com)，可免费下载 OS X 10.6 - 10.8。请注意，我不是该软件的开发商、出版商或广告商。

# string - 如何连接路径到 bash 中的函数的字符串？

> ID：11331760
> 
> 赞同：0
> 
> 时间：2012-07-04T15:15:28.193
> 
> 标签：string, bash, string-concatenation

我正在创建一个应该在 HPC（集群）上创建作业的脚本。我创建了一个获取 4 个变量并从中创建字符串的函数：

```
startJob (){
    if [ $per -lt 10 ]; then
    folder=/storage/users/avityo/prog/0$1.$2$3
    else
    folder=/storage/users/avityo/prog/$1.$2$3
    fi
    echo $folder
} 
```

在我从中得到的结果中，用逗号分隔

```
/storage/users/avityo/prog/00,.583,bfd, 
```

如何删除这些逗号？

**编辑：**
从我得到的答案和评论来看，我应该提到我是如何调用这个函数的，我意识到我没有以正确的方式调用这个函数。我正在使用这个：

```
let count=0

for per in $(seq 70 -5 0); do
    for seed in {580..583}; do
        for c in {"fs","fd","bfs","bfd"}; do
            let count=$count+1
            startJob $per, $seed, $c, $count
        done
    done
done 
```

调用函数时删除逗号修复了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:41:31.913

看起来您正在像这样调用您的函数：

```
startJob 0, 583, bfd, 4thUnusedArgument 
```

您不需要逗号；参数仅由空格分隔。试试这个：

```
startJob 0 583 bfd 4thUnusedArgument 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:14:27.447

如果您不想编辑逗号的来源，也就是说，您可以将其通过管道传输到 sed。

```
echo $folder|sed 's/,//g' 
```

哪个会输出

```
/storage/users/avityo/prog/00.583bfd 
```

# jpa - JPA：构建仅将数据保留一段时间的方法

> ID：11331761
> 
> 赞同：1
> 
> 时间：2012-07-04T15:15:29.123
> 
> 标签：jpa, persistence

JPA 中是否存在任何机制，仅将数据保留一段时间？在此生命周期之后，应删除数据。

这样就不需要轮询来清理旧的持久数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:10:16.780

不，JPA 中没有这样的机制。

# sitecore - Sitecore 社交关联目标更新错误

> ID：11331762
> 
> 赞同：2
> 
> 时间：2012-07-04T15:15:31.930
> 
> 标签：sitecore, sitecore6, social, sitecore-social-connected

我正在研究 Sitecore 的社交连接模块，并试图将社交更新与营销目标联系起来。Sitecore 的[文档](http://sdn.sitecore.net/upload/sdn5/products/social/11/social_connected_administrators_and_developers_guide_11-usletter.pdf)指出：

> 在**营销中心**的**发布**选项卡上，单击**更新**。出现**更新**选项卡。

当我单击**更新**时，我收到一个警告窗口，提示：“您无权查看任何项目报告。” 我在以开发人员或管理员身份登录时都会收到此警报，因此它似乎与安全无关。

我正在运行带有 Social Connected Module 1.1.0 rev 的 Sitecore.NET 6.5.0（rev. 120427）。120329。

**更新：**

*   更新按钮映射到核心数据库项目*/sitecore/content/Applications/Content Editor/Ribbons/Chunks/Social/Updates*中的命令“social:tab:show” 。
*   “social:tab:show”链接到 Sitecore.Social.config 中的“Sitecore.Social.Publishing.Commands.SocialCenter *”*。
*   这是发送警报的代码：

```
public override void Execute(CommandContext context)
{
      Assert.ArgumentNotNull((object) context, "context");
      if (context.Items.Length != 1)
        return;
      if (WebUtil.GetFormValue("scEditorTabs").Contains("social:tab:show"))
      {
        SheerResponse.Eval("scContent.onEditorTabClick(null, null, 'OpenSocialCenter')");
      }
      else
      {
        Item obj = Context.Item;
        if (obj == null)
        {
          SheerResponse.Alert("You do not have permission to see any item reports.", new string[0]);
        }
        else 
        [code continues] 
```

*   我将 Sitecore.Social.Publishing.Commands.SocialCenter 子类化，以便设置断点。以下是我在执行期间看到的值：
    *   Sitecore.Context.Item 为空。
    *   context.Items 有一个项目，即在营销中心中打开的目标项目。
    *   `WebUtil.GetFormValue("scEditorTabs")`返回一个空字符串。该代码似乎期望“social:tab:show”。
*   使用 Sitecore 6.5 build 3 并不能解决问题。
*   更新按钮**确实**适用于常规内容项（而不是目标）。但是，文档清楚地指出要在营销中心选项卡上单击此按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:29:25.863

如果您从 Sitecore 菜单打开营销中心，则会出现错误消息。相反，打开内容编辑器应用程序，然后导航到`/sitecore/system/Marketing Center`. 如果`/sitecore/system`在内容树中看不到，请转到查看菜单并选择整个树。当通过内容编辑器访问目标时，发布/更新按钮正常工作。

注意：我已确认 Sitecore 6.5.0（修订版 111230）更新 3 出现此问题，这是批准用于 Social Connected 的最新更新，根据[发行说明](http://sdn.sitecore.net/Products/Social%20Connected%20Module/Social%20Connected%201,-d-,1/Release%20Notes.aspx)。

**更新**：此错误已在 Social Connected v1.2 中修复。

# sql-server-2008 - 使用带 FREETEXTTABLE 的参数更改输出

> ID：11331766
> 
> 赞同：0
> 
> 时间：2012-07-04T15:15:58.803
> 
> 标签：sql-server-2008, full-text-search

我有这个查询

```
select top 10 * from FREETEXTTABLE([Venue], FullAddress,  'Canada') 
```

工作正常，并产生结果；

现在，如果我从代码中调用它并提供参数，则将其更改为

```
exec sp_executesql N'select top 10 * from FREETEXTTABLE([Venue], FullAddress,  ''@p'')',N'@p nvarchar(4000)',@p='Canada' 
```

这不会产生任何结果。据我了解，这两个查询应该产生相同的输出？还是 FREETEXTTABLE 对参数特别挑剔？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:39:10.497

在这种情况下，您不应在使用`NVARCHAR`参数时添加单引号。请尝试以下操作：

```
EXEC sp_executesql  N'select top 10 * from FREETEXTTABLE([Venue], FullAddress,  @p)',
                    N'@p nvarchar(4000)',
                    @p='Canada' 
```

# java - 使用由 Javascript 调用的 JNA 的小程序 = 拒绝访问

> ID：11331767
> 
> 赞同：1
> 
> 时间：2012-07-04T15:16:02.500
> 
> 标签：java, javascript, security, exception, applet

我编写了一个 Applet，我在其中使用 JNA 与设备进行通信。我需要获取设备读取的值并将其保存在数据库中。我给自己提出的解决方案是通过javascript调用Applet方法并将返回注入JSP中。嗯......在Applet的执行过程中，我需要下载一个DLL文件（在Windows上运行的ps），将其保存在磁盘上并将下载它的路径添加到JNA路径中。但是，当我运行 Applet 时，它会抛出 java.security.AccessControlException，说“访问被拒绝”。这是JSP代码...

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>..:: Testing ::..</title>
        <script type="text/javascript" src="js/jquery-1.7.2.js"></script>
        <script>
            $(document).ready(function() {
                $('#myTrigger').click(function() {
                    alert($('#myApplet')[0].capture());                    
                });
            });
        </script>
    </head>
    <body>
        <h1>Test Applet</h1>
        <object type="application/x-java-applet" height="0" width="0" id="myApplet">
            <param name="code" value="AppletHW" />
            <param name="archive" value="AppletHW.jar,jna.jar" />
        </object>
        <a id="myTrigger" href="#">Click here</a>
    </body>
</html> 
```

...我的小程序看起来像这样...

```
public class AppletHW extends Applet {

    public String capture() {        
        String folder = System.getProperty("java.io.tmpdir");
        File path = new File(folder + File.separator + ".applethw");
        System.setProperty("jna.library.path", path.getAbsolutePath());[/code]

        // I download the DLL file

        MyDLL lib = (MyDLL) Native.loadLibrary("MyDLL", MyDLL.class);
        return lib.capture();
    }
} 
```

PS 我的小程序 jar 和 JNA 都已签名。

# java - 如何使用 RESTful Web 服务？

> ID：11331769
> 
> 赞同：0
> 
> 时间：2012-07-04T15:16:04.933
> 
> 标签：java, web-services, rest

在[本](http://www.vogella.com/articles/REST/article.html) 教程中写了如何创建 REST 服务以及如何使用它。我被消费的例子弄糊涂了。我们需要在客户端有这样的`jersey.jar`写法：

```
Client client = Client.create(config);
WebResource service = client.resource(getBaseURI()); 
```

为什么客户需要知道 Web 服务是如何实现的（球衣或可能是其他实现）？为什么客户端不使用 simple 来使用它`InputStream`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:21:49.747

在本教程中，您将使用 jersey CLIENT 与 RESTful 服务进行交互。

您也可以通过手动创建 HTTP 请求并接收响应并相应地进行解析来直接与服务交互（http://docs.oracle.com/javase/tutorial/networking/urls/readingWriting.html）。

Jersey 客户端最终只是对此的抽象，以使其更易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T14:00:06.473

使用 Restful Web 服务的最简单方法是使用 Spring RestTemplate。 [http://docs.spring.io/spring/docs/3.0.x/api/org/springframework/web/client/RestTemplate.html](http://docs.spring.io/spring/docs/3.0.x/api/org/springframework/web/client/RestTemplate.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T07:06:39.100

```
 String URL ="http://localhost:8080/MyWServices/REST/WebService/";
    String ws_method_name = "getManagerListByRoleID";
    String WS_METHOD_PARAMS = "";

    HttpClient httpClient = new DefaultHttpClient();
    HttpContext httpContext = new BasicHttpContext();

    HttpGet httpGet = new HttpGet(URL + ws_method_name + WS_METHOD_PARAMS);
    String text = null;

    try {
        HttpResponse httpResponse = httpClient
                .execute(httpGet, httpContext);
        HttpEntity entity = httpResponse.getEntity();
        text = getASCIIContentFromEntity(entity);
        }catch(Exception e){
                e.printStackTrace();
        } 
```

# java - Git 存储库的正确密码存储

> ID：11331772
> 
> 赞同：1
> 
> 时间：2012-07-04T15:16:07.843
> 
> 标签：java, git, repository, password-protection, jgit

我正在构建一个应用程序，您可以在其中管理 GIT 存储库。

我选择将存储库信息存储在数据库中，但我遇到了密码问题。

问题：当我遇到 https + 密码安全存储库时，我需要存储密码。如果我想在存储库上推送更改，我将需要纯文本密码。

如果我对密码进行哈希处理，我将无法重用它。
存储这些密码而不将它们存储为纯文本的安全解决方案是什么？

我将 Java 与 JGit 库一起使用。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:55:10.390

您将不得不在某种程度上将它们存储为纯文本：正如您所说，您的应用程序依赖于密码。

您如何存储它们取决于您能够处理的用户交互级别以及您正在运行的系统——在 Gnome 桌面上，您可以集成`seahorse`，在 Windows 上，您可能可以使用凭据库. 如果您无法集成，则复制 KeePass 之类的方法可能是个好主意。

如果您根本无法与用户交互，那么您可能只是存储未加密的数据，因为无论如何您都必须存储加密密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:54:00.890

试试 BouncyCastle [1]。它带有大量自由许可下的加密算法。

[1] [http://www.bouncycastle.org/java.html](http://www.bouncycastle.org/java.html)

# sql-server - 访问 2007 年报告绩效

> ID：11331773
> 
> 赞同：1
> 
> 时间：2012-07-04T15:16:10.820
> 
> 标签：sql-server, caching, report, ms-access-2007

因此，我在 Access 2007 中开发使用传递查询从 SQL 服务器检索数据的报告。一些查询可能需要一两秒钟才能在服务器端运行。在预览模式下打开报表时，基于这些查询之一，呈现报表所需的时间比简单地运行查询所需的时间长得多。我使用 SQL Profiler 观察正在发生的事情，发现当报表运行时，底层查询被执行了多次（至少五次）。如何让 Access 缓存查询结果以提高这些报告的性能？

# c# - 单元测试 IObservable 使用 ObserveOnDispatcher

> ID：11331774
> 
> 赞同：5
> 
> 时间：2012-07-04T15:16:13.960
> 
> 标签：c#, linq, reactiveui

我需要测试一段代码

```
 var watcher = new FakeIFileSystemWatcher();
        watcher.FilesToBeImported
            .ObserveOnDispatcher()
            .Subscribe(list.Add); 
```

所以我创建了这个小单元测试，但我无法通过原因列表。计数始终为 0

```
 [Test]
    public void Foo()
    {
        var list = new List<string>();

        var watcher = new FakeIFileSystemWatcher();
        watcher.FilesToBeImported
            .ObserveOnDispatcher()
            .Subscribe(list.Add);

        Task task = Task.Factory.StartNew(() =>
        {                
            watcher.AddFile("cc");
            watcher.AddFile("cc");
            watcher.AddFile("cc");
        }, TaskCreationOptions.LongRunning);
        Task.WaitAll(task);

        Assert.AreEqual(3, list.Count);
    } 
```

如果我注释掉方法

```
 .ObserveOnDispatcher() 
```

它通过了，但我怎样才能让它与 ObserveOnDispatcher() 一起工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T15:41:48.700

如果您使用`ObserveOnDispatcher`您创建对“调度程序”的依赖项，这意味着您需要一个窗口和一个消息循环。要在单元测试中解决这个问题，您可以改用使用`ObserveOn`调度程序的方法，然后使用依赖注入来注入正确的调度程序。对于单元测试，您可以使用`Scheduler.Immediate`，对于实际应用程序，您可以使用`DispatcherScheduler.Instance`. 请注意，还有一个`TestScheduler`对于在虚拟时间运行单元测试非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:08:28.727

我使用我在这里找到的类 DispatcherUtil 解决了 [在单元测试中使用 WPF Dispatcher](https://stackoverflow.com/questions/1106881/using-the-wpf-dispatcher-in-unit-tests)

现在我的代码如下

```
 [Test]
    public void Foo()
    {
        var list = new List<string>();

        var watcher = new FakeIFileSystemWatcher();
        watcher.FilesToBeImported
            .ObserveOnDispatcher()
            .Subscribe(list.Add);

        Task task = Task.Factory.StartNew(() =>
        {
            watcher.AddFile("cc");
            watcher.AddFile("cc");
            watcher.AddFile("cc");
            watcher.AddFile("cc");
        }, TaskCreationOptions.LongRunning);
        Task.WaitAll(task);
        DispatcherUtil.DoEvents();
        Assert.AreEqual(4, list.Count);
    } 
```

它就像一个魅力

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T06:08:54.477

您可以尝试像这样调用您的方法：

```
var dispatcher = Application.Current != null ? Application.Current.Dispatcher : Dispatcher.CurrentDispatcher;

 dispatcher.Invoke((Action)(() => YourMethodToTest()); 
```

# asp.net-mvc-3 - 部署在 Azure 上的 MVC 应用无法连接到 SQL Azure 数据库，但可以通过 SSMS 连接

> ID：11331777
> 
> 赞同：1
> 
> 时间：2012-07-04T15:16:28.857
> 
> 标签：asp.net-mvc-3, azure, azure-sql-database

我有一个使用实体框架的 MVC 3 应用程序，它愉快地托管在 Azure 中，并在 2 天前与 SQL Azure 数据库通信。然后，我对数据库进行了轻微的架构更改，因此通过 SSMS 删除并重新创建了数据库，并再次发布了应用程序，因为我已将默认 MVC 应用程序登录角色控件添加到站点 - 从那时起我无法让我的应用程序连接到数据库并在 Elmah xml 文件中记录以下错误：

建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）"source=".​​Net SqlClient 数据提供者"detail="System.Data.EntityException

我可以使用 SSMS 连接到 SQL Azure 数据库，当我在连接到 SQL Azure 数据库的 Azure 模拟器中运行我的应用程序时，一切都运行良好，但一旦发布它就拒绝连接。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:34:46.897

SQL Azure 连接字符串（使用 EF 模型优先/数据库优先）通常如下所示：

```
<connectionStrings>    
    <add name="SampleEntities" connectionString="metadata=res://*/Models.SampleEntities.csdl|res://*/Models.SampleEntities.ssdl|res://*/Models.SampleEntities.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=tcp:abcdefg.database.windows.net,1433;Database=asdf;User ID=manager@abcdefg;Password=XXXXXX;Trusted_Connection=False;MultipleActiveResultSets=True;Encrypt=True;&quot;" providerName="System.Data.EntityClient" />
</connectionStrings> 
```

SQL Azure 连接字符串（使用 Code First）通常如下所示：

```
<connectionStrings> 
   <add name="SampleContext" connectionString="Data Source=tcp:abcdefg.database.windows.net,1433;Database=asdf;User ID=manager@abcdefg;Password=XXXXXX;Trusted_Connection=False;MultipleActiveResultSets=True;Encrypt=True" providerName="System.Data.SqlClient" />   
</connectionStrings> 
```

第二个连接字符串也可以在没有实体框架的情况下工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:07:26.443

我相信您已经向 Azure 发布了一个配置，该配置没有正确的 SQL Azure 服务器名称，而是一些本地/本地 SQL 服务器。会是这样吗？您可以远程进入实例并验证正确的 .config 和 SQL Azure 服务器吗？

从错误看来，您的应用程序没有使用 TCP/IP 连接到 SQL Azure，而是使用命名管道，这通常意味着 SQL Azure 服务器名称可能不是有效的 TCP/IP 主机。

# python - 在字符串中查找反斜杠 (\) --Python

> ID：11331778
> 
> 赞同：7
> 
> 时间：2012-07-04T15:16:29.620
> 
> 标签：python, backslash

我如何比较反斜杠是否在我的字符串中？

我不知道如何写反斜杠符号来比较它。我试试这个但不工作：

代码：

```
s = r"\""
print s 
```

输出：`\"`

如果我尝试`s = "\""`它`"`作为输出

我不知道如何实现。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-04T15:18:08.537

您需要转义反斜杠。

```
s = "\\" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-31T07:12:20.873

```
>>>mystring = "can python find this backslash \n"
>>>"\\" in r"%r" % mystring
True 
```

在尝试过滤 Windows 文件名中使用的反斜杠 \ 字符时，我在很多地方搜索了答案。这是对我有用的解决方案。根据我在...上阅读的信息... [http://pythonconquerstheuniverse.wordpress.com/2008/06/04/gotcha-%E2%80%94-backslashes-in-windows-filenames/](http://pythonconquerstheuniverse.wordpress.com/2008/06/04/gotcha-%E2%80%94-backslashes-in-windows-filenames/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-04T15:20:32.307

反斜杠用于转义，因此要在字符串文字中显示反斜杠，您需要用另一个反斜杠转义反斜杠。

```
print "\\" 
```

打印带有 1 个反斜杠的字符串。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-04T15:21:35.833

```
"\\" in mystring 
```

mystring 是你的字符串。会告诉你它是否包含反斜杠

# java - HQL：交叉连接

> ID：11331782
> 
> 赞同：1
> 
> 时间：2012-07-04T15:16:46.097
> 
> 标签：java, sql, hibernate, hql

我有这个 SQL 命令来搜索特定日期内的可用房间：

```
select k.nr from room k 
where not  exists (select 'x' from room_reserveration as kr 
INNER JOIN reserveration as r ON (r.reserveration_id = kr.reserveration_id) 
INNER JOIN hotel as h ON (h.hotel_id = r.hotel_id) 
where k.room_id = kr.room_id AND (r.begin_date between "2012-06-18" and "2012-06-27" ) and  (r.end_date between "2012-06-18" and "2012-06-27" ) 
) 
```

我试图转换为 HQL：

```
session.createQuery("select k.nr from room k  where not  exists 
(select 'x' from RoomReserveration  kr, Reserveration  r   
join kr.Reserveration  join    k.hotel     join  kr.room      
where (r.begin_date between '2012-06-18' and '2012-06-27' ) and  
(r.eind_date between '2012-06-18' and '2012-06-27' ) )"); 
```

如果我编译我的 java 代码，我会得到这个输出：

```
Hibernate: select Room0_.nr as col_0_0_ from Room Room0_ where  not (exists (select 'x' from Room_reservation Roomreser1_ inner join reservation reservation3_ on Roomreser1_.reservation_id=reservation3_.reservation_id inner join Room Room5_ on Roomreser1_.Room_id=Room5_.Room_id cross join reservation reservation2_ where (reservation2_.begin_date between '2012-06-18' and '2012-06-27') and (reservation2_.eind_date between '2012-06-18' and '2012-06-27'))) 
```

为什么在这里添加交叉连接而没有结果？

映射：

预订房间：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="model.RoomReservation" table="room_reservation">
        <id name="room_reservation_id">
            <generator class="identity"/>
        </id>
        <property name="details"/>
        <many-to-one name="reservation" column="reservation_id" />
        <many-to-one name="room" column="room_id" />
    </class>
</hibernate-mapping> 
```

预订

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="model.Reservation" table="reservation">
        <id name="reservation_id">
            <generator class="identity"/>
        </id>
        <property name="date_reservation" type="java.util.Date"/>
        <property name="begin_date" type="java.util.Date"/>
        <property name="eind_date" type="java.util.Date"/>

        <set name="roomReservation"  inverse="true">
            <key column="reservation_id"/>
            <one-to-many class="model.RoomReservation"/>
        </set>
        <many-to-one name="hotel" column="hotel_id" />
    </class>
</hibernate-mapping> 
```

房间

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="model.Room" table="room">
        <id name="room_id">
            <generator class="identity"/>
        </id>
        <property name="nr"/>
        <set name="facilities"  inverse="true">
            <key column="room_id"/>
            <one-to-many class="model.RoomFacilities"/>
        </set>
        <many-to-one name="hotel" column="hotel_id" />
        <many-to-one name="roomType" column="room_type_id" cascade="save-update" />
    </class>
</hibernate-mapping> 
```

酒店：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="model.Hotel" table="hotel">
        <id name="hotel_id">
            <generator class="identity"/>
        </id>
        <property name="name"/>  
        <set name="rooms">
            <key column="hotel_id"/>
            <one-to-many class="model.Room"/>
        </set>
    </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:49:23.940

交叉连接来自这样一个事实，即，您正在与

```
 select 'x' from RoomReserveration  kr, Reserveration  r 
```

查询应该是：

```
select room.nr from Room room where not exists 
(select 'x' from RoomReservation roomReservation   
 join roomReservation.reservation reservation 
 join reservation.hotel hotel
 where (reservation.begin_date between '2012-06-18' and '2012-06-27') 
 and (reservation.eind_date between '2012-06-18' and '2012-06-27')
 and roomReservation.room = room) 
```

请注意，加入酒店没有任何目的，除了过滤没有任何酒店的预订。

# python - 运行应用程序（django）时服务器上显示的 unicode 错误

> ID：11331791
> 
> 赞同：0
> 
> 时间：2012-07-04T15:17:14.740
> 
> 标签：python, django, linux, unicode, ubuntu-10.04

我的views.py代码：

```
#!/usr/bin/python 

from django.template import loader, RequestContext
from django.http import HttpResponse
#from skey import find_root_tags, count, sorting_list
from search.models import Keywords
from django.shortcuts import render_to_response as rr

def front_page(request):

    if request.method == 'POST' :
        from skey import find_root_tags, count, sorting_list
        str1 = request.POST['word'] 
        fo = open("/home/pooja/Desktop/xml.txt","r")

        for i in range(count.__len__()):

            file = fo.readline()
            file = file.rstrip('\n')
            find_root_tags(file,str1,i) 

            list.append((file,count[i]))

        sorting_list(list)

        for name, count1 in list:
            s = Keywords(file_name=name,frequency_count=count1)
            s.save()

        fo.close()

        list1 = Keywords.objects.all()
        t = loader.get_template('search/results.html')
        c = RequestContext({'list1':list1,
        })

        return HttpResponse(t.render(c))

    else :  
        str1 = ''
        list = []
        template = loader.get_template('search/front_page.html')
        c = RequestContext(request)
        response = template.render(c)
        return HttpResponse(response) 
```

skey.py 在 find_root_tags() 中调用了另一个函数：

```
 def find_text(file,str1,i):

            str1 = str1.lower()
            exp = re.compile(r'<.*?>')
            with open(file) as f:
            lines = ''.join(line for line in f.readlines())
            text_only = exp.sub('',lines).strip()

            text_only = text_only.lower()
            k = text_only.count(str1)  #**line 34**
            count[i] = count[i]+k 
```

当我在服务器上运行我的应用程序时，它给了我这个错误：

```
UnicodeDecodeError at /search/
'ascii' codec can't decode byte 0xef in position 0: ordinal not in range(128)
Request Method: POST
Request URL:    http://127.0.0.1:8000/search/
Django Version: 1.4
Exception Type: UnicodeDecodeError
Exception Value:    
'ascii' codec can't decode byte 0xef in position 0: ordinal not in range(128)
Exception Location: /home/pooja/Desktop/mysite/search/skey.py in find_text, line 34
Python Executable:  /usr/bin/python
Python Version: 2.6.5
Python Path:     ['/home/pooja/Desktop/mysite',
                     '/usr/lib/python2.6',
                     '/usr/lib/python2.6/plat-linux2',
                     '/usr/lib/python2.6/lib-tk',
                     '/usr/lib/python2.6/lib-old',
                     '/usr/lib/python2.6/lib-dynload',
                     '/usr/lib/python2.6/dist-packages',
                     '/usr/lib/python2.6/dist-packages/PIL',
                     '/usr/lib/python2.6/dist-packages/gst-0.10',
                     '/usr/lib/pymodules/python2.6',
                     '/usr/lib/python2.6/dist-packages/gtk-2.0',
                     '/usr/lib/pymodules/python2.6/gtk-2.0',
                     '/usr/local/lib/python2.6/dist-packages'] error : 
```

谁能告诉我为什么会显示此错误？如何删除此错误

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:33:30.777

可能您的*str1*是 unicode，但 text_only 不是（在第 34 行）。下一个不是灵丹妙药，但如果这可以解决您的问题，那么我是对的。

```
k = u"{0}".format( text_only ).count(str1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:37:38.390

您正在混合 Unicode 字符串和字节串。`str1 = request.POST['word']`可能是一个 Unicode 字符串并且`text_only`是一个字节串。Python 无法将后者转换为 Unicode。您可以使用`codecs.open()`指定文件的字符编码。请参阅[实用 Unicode](http://bit.ly/unipain)和[每个软件开发人员绝对、肯定必须了解 Unicode 和字符集的绝对最小值（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)。

# ruby-on-rails - Rails 3 控制器和模型子文件夹

> ID：11331793
> 
> 赞同：1
> 
> 时间：2012-07-04T15:17:21.603
> 
> 标签：ruby-on-rails, activerecord, rails-routing

我正在编写一个 Rails 3.2.6 应用程序。我想将我的控制器和模型分成子文件夹以保持我的代码干净。我确保模型及其子目录名称不一样。但是，我发现如果控制器子目录名称和模型子目录名称相同，则代码会失败。

以下应用程序结构可以正常工作：

```
test
  app
    controllers
      postcnt
        posts_controller.rb
    models
      postmdl
        post.rb 
```

但以下结构没有：

```
test
  app
    controllers
      postnsp
        posts_controller.rb
    models
      postnsp
        post.rb 
```

当我调用 URL 时：

```
http://localhost:3000/postnsp/posts 
```

我收到一条 500 错误消息：

```
LoadError in Postnsp::PostsController#index
Expected /Users/dev/code/test/app/models/postnsp/post.rb to define Postnsp::Post 
```

在上面的示例中，我遵循此处的建议来消除模型命名空间： [Rails：将模型构建到子文件夹中而不创建子模块的优雅方式](https://stackoverflow.com/questions/1445341/rails-elegant-way-to-structure-models-into-subfolders-without-creating-submodul)

并添加

```
config.autoload_paths += Dir[Rails.root.join('app', 'models', '{**}')] 
```

到我的 application.rb 文件

对于第二个（失败）示例，相关文件如下：

post.rb:

```
class Post < ActiveRecord::Base
  attr_accessible :content, :name
end 
```

post_controller.rb：

```
class Postnsp::PostsController < ApplicationController
  def index
  @posts = Post.all

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @posts }
  end
end 
```

路线.rb：

```
Test::Application.routes.draw do
  namespace :postnsp do resources :posts end 
```

谁能解释为什么子目录不能相同？我认为这与为 posts_controller.rb 创建 postnsp 模块有关，但我不明白为什么它会阻止创建模型。如果需要，我希望控制器和模型文件夹中的目录结构命名保持一致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:21:49.897

由于`Post`在`postnsp`目录中，因此它希望模型也受命名空间的限制。

尝试将您的更改`Post`为`Postnsp::Post < ActiveRecord::Base`

**更新**

好的，我尝试了一个应用程序来完全按照你说的做，我想我知道出了什么问题......因为你在一个命名空间控制器中，当你使用`Post`它时实际上会查找`Postnsp::Post`，为了使用你必须使用的基类`::Post`然后一切都对我有用。

希望这可以帮助。

# cakephp - 安装和使用 Uploader 插件

> ID：11331794
> 
> 赞同：0
> 
> 时间：2012-07-04T15:17:28.840
> 
> 标签：cakephp, cakephp-2.0, file-upload, uploader

我试图了解有关安装和使用此用于处理文件上传的 CakePHP 2.x 上传器插件的文档。我有几个问题希望有人能帮助我。关于这个主题有一个很好的主题，[Installing Uploader Plugin for CakePHP 2.x](https://stackoverflow.com/questions/10134827/installing-uploader-plugin-for-cakephp-2-x)，但我想清除一些在主题中不太清楚的东西（至少对我来说）。

顺便说一句作者页面： http: [//milesj.me/code/cakephp/uploader](http://milesj.me/code/cakephp/uploader)

是不是要手动保存（不带行为），安装如下：

```
CakePlugin::load('Uploader'); // THIS GOES INTO THE BOOTSTRAP.PHP FILE PER THE REFERENCED QUESTION ANSWER
App::import('Vendor', 'Uploader.Uploader'); // THIS GOES INTO CONTROLLER PER THE REFERENCED QUESTION ANSWER
$this->Uploader = new Uploader(); // THIS GOES INTO CONTROLLER PER THE REFERENCED QUESTION ANSWER 
```

是对的吗？

但是，如果您使用的是该行为，则无需执行上述任何操作进行安装，而是仅在模型中执行：

```
public $actsAs = array('Uploader.Attachment'); 
```

是对的吗？

文档的第 2 章是否仅适用于手动使用插件时？否则，您只能在模型中按照第 3 章配置模型行为。

最后一个问题：所以如果我理解这一点（我对 CakePHP 还是有点陌生​​），如果我使用行为自动保存，每当我将文件上传到该模型时，它会自动将文件保存在右边文件夹而不需要我做任何事情并将引用放在`$data`指向保存位置的变量中？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T22:19:42.157

我很难让它工作并理解整个插件和行为的事情，所以我认为值得快速分享我在一个关于如何通过模型行为安装、实现和使用 Uploader 插件的短视频中学到的东西。

[http://www.youtube.com/watch?v=lMNOUOz8wqzE](http://www.youtube.com/watch?v=lMNUOz8wqzE)

希望对您有所帮助。要回答我上面的问题，我基本上只需要：

1.  包含`CakePlugin::load('Uploader');`在可以在 App/Config/ 下找到的 bootstrap.php 文件中
2.  `public $actsAs = array('Uploader.Attachment');`根据配置的相关选项调用我的模型内部的行为
3.  然后通过我的控制器保存到模型中，并在模型中包含 $actsAs 变量

在插件的附件行为中定义的 beforeSave 回调函数将负责其余的工作。

上传文件似乎是一项平凡的任务，所以我认为通过行为来完成它是非常合适的，而且鉴于我自己的初学者水平，我不想写自己的行为，所以迈尔斯有很好，特别是因为他是经验丰富的开发人员。阅读后，使用控制器代码上传文件不是要走的路，使用专家开发者插件可能是要走的路。

# c - Char 数组必须比必要的大

> ID：11331800
> 
> 赞同：0
> 
> 时间：2012-07-04T15:17:42.607
> 
> 标签：c, file-io, arrays

假设我正在从文本文件中读取数字。文本文件由一百五十位数字组成（它们是分开的，有 100 个 50 位数字的实例）。

我想将每个数字保存为二维数组的一行。为此，我声明了一个数组

```
char input[99][50] //50 columns to utilize the newlines in the text file 
```

但它不会读入整个文本文件，尽管在我看来，它的大小是正确的。它通过第 99 个数字读入。对于第 100 行，它打印了一个换行符，然后是一堆垃圾符号等。请参见以下内容：

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
  //Set up the use of the input text file

  FILE * ifp;
  ifp = fopen("input.txt", "r");

  //Declare variables

  char input[100][50]; //Array to hold the input numbers

  int i, j; //Variables to work with loops

  //Begin by reading in the input file as characters,
  //otherwise fscanf will take each entire line as
  //a single number

  for (i = 0; i <= 99; i++)
    {
      printf("%d)", i);
      for (j = 0; j <= 50; j++)
    {
      fscanf(ifp, "%c", &input[i][j]);
      printf("%c", input[i][j]);
    }
    }
  system("pause");
  return 0;
} 
```

这将正确打印它。对我来说似乎很奇怪的是，它实际上并不需要使用额外的行来解决问题...... fscanf 仍然只在与以前相同的范围内（0-99）起作用。

那么......为什么数组需要是[100]x[50]？为什么 [99]x[50] 会引起这么多问题？

另外，我在文本文件的最后一行添加了一个换行符，因为如果我没有这样做，它会在最后一行末尾的屏幕上打印一个撇号 ' 而不是换行符。这是某种文件结尾字符的符号吗？

提前致谢！

顺便说一句，如果您有兴趣编译它并看到它发生，这里是文本文件 input.txt：

37107287533902102798797998220837590246510135740250 46376937677490009712648124896970078050417018260538 74324986199524741059474233309513058123726617309629 91942213363574161572522430563301811072406154908250 23067588207539346171171980310421047513778063246676 89261670696623633820136378418383684178734361726757 28112879812849979408065481931592621691275889832738 44274228917432520321923589422876796487670272189318 47451445736001306439091167216856844588711603153276 70386486105843025439939619828917593665686757934951 62176457141856560629502157223196586755079324193331 64906352462741904929101432445813822663347944758178 92575867718337217661963751590579239728245598838407 58203565325359399008402633568948830189458628227828 80181199384826282014278194139940567587151170094390 35398664372827112653829987240784473053190104293586 86515506006295864861532075273371959191420517255829 71693888707715466499115593487603532921714970056938 54370070576826684624621495650076471787294438377604 53282654108756828443191190634694037855217779295145 36123272525000296071075082563815656710885258350721 45876576172410976447339110607218265236877223636045 17423706905851860660448207621209813287860733969412 81142660418086830619328460811191061556940512689692 51934325451728388641918047049293215058642563049483 62467221648435076201727918039944693004732956340691 15732444386908125794514089057706229429197107928209 55037687525678773091862540744969844508330393682126 18336384825330154686196124348767681297534375946515 80386287592878490201521685554828717201219257766954 78182833757993103614740356856449095527097864797581 16726320100436897842553539920931837441497806860984 48403098129077791799088218795327364475675590848030 87086987551392711854517078544161852424320693150332 59959406895756536782107074926966537676326235447210 69793950679652694742597709739166693763042633987085 41052684708299085211399427365734116182760315001271 65378607361501080857009149939512557028198746004375 35829035317434717326932123578154982629742552737307 94953759765105305946966067683156574377167401875275 88902802571733229619176668713819931811048770190271 25267680276078003013678680992525463401061632866526 36270218540497705585629946580636237993140746255962 24074486908231174977792365466257246923322810917141 91430288197103288597806669760892938638285025333403 34413065578016127815921815005561868836468420090470 23053081172816430487623791969842487255036638784583 11487696932154902810424020138335124462181441773470 63783299490636259666498587618221225225512486764533 67720186971698544312419572409913959008952310058822 95548255300263520781532296796249481641953868218774 76085327132285723110424803456124867697064507995236 37774242535411291684276865538926205024910326572967 23701913275725675285653248258265463092207058596522 29798860272258331913126375147341994889534765745501 18495701454879288984856827726077713721403798879715 38298203783031473527721580348144513491373226651381 34829543829199918180278916522431027392251122869539 40957953066405232632538044100059654939159879593635 29746152185502371307642255121183693803580388584903 41698116222072977186158236678424689157993532961922 62467957194401269043877107275048102390895523597457 23189706772547915061505504953922979530901129967519 86188088225875314529584099251203829009407770775672 11306739708304724483816533873502340845647058077308 82959174767140363198008187129011875491310547126581 97623331044818386269515456334926366572897563400500 42846280183517070527831839425882145521227251250327 55121603546981200581762165212827652751691296897789 32238195734329339946437501907836945765883352399886 75506164965184775180738168837861091527357929701337 62177842752192623401942399639168044983993173312731 32924185707147349566916674687634660915035914677504 99518671430235219628894890102423325116913619626622 73267460800591547471830798392868535206946944540724 76841822524674417161514036427982273348055556214818 97142617910342598647204516893989422179826088076852 87783646182799346313767754307809363333018982642090 10848802521674670883215120185883543223812876952786 71329612474782464538636993009049310363619763878039 62184073572399794223406235393808339651327408011116 66627891981488087797941876876144230030984490851411 60661826293682836764744779239180335110989069790714 85786944089552990653640447425576083659976645795096 66024396409905389607120198219976047599490197230297 64913982680032973156037120041377903785566085089252 16730939319872750275468906903707539413042652315011 94809377245048795150954100921645863754710598436791 78639167021187492431995700641917969777599028300699 15368713711936614952811305876380278410754449733078 40789923115535562561142322423255033685442488917353 44889911501440648020369068063960672322193204149535 41503128880339536053299340368006977710650566631954 81234880673210146739058568557934581403627822703280 82616570773948327592232845941706525094512325230608 22918802058777319719839450180888072429661980811197 77158542502016545090413245809786882778948721859617 72107838435069186155435662884062257473692284509516 20849603980134001723930671666823555245252804609722 53503534226472524250874054075591789781264330331690041377903785566085089252 16730939319872750275468906903707539413042652315011 94809377245048795150954100921645863754710598436791 78639167021187492431995700641917969777599028300699 15368713711936614952811305876380278410754449733078 40789923115535562561142322423255033685442488917353 44889911501440648020369068063960672322193204149535 41503128880339536053299340368006977710650566631954 81234880673210146739058568557934581403627822703280 82616570773948327592232845941706525094512325230608 22918802058777319719839450180888072429661980811197 77158542502016545090413245809786882778948721859617 72107838435069186155435662884062257473692284509516 20849603980134001723930671666823555245252804609722 53503534226472524250874054075591789781264330331690041377903785566085089252 16730939319872750275468906903707539413042652315011 94809377245048795150954100921645863754710598436791 78639167021187492431995700641917969777599028300699 15368713711936614952811305876380278410754449733078 40789923115535562561142322423255033685442488917353 44889911501440648020369068063960672322193204149535 41503128880339536053299340368006977710650566631954 81234880673210146739058568557934581403627822703280 82616570773948327592232845941706525094512325230608 22918802058777319719839450180888072429661980811197 77158542502016545090413245809786882778948721859617 72107838435069186155435662884062257473692284509516 20849603980134001723930671666823555245252804609722 535035342264725242508740540755917897812643303316906791 78639167021187492431995700641917969777599028300699 15368713711936614952811305876380278410754449733078 40789923115535562561142322423255033685442488917353 44889911501440648020369068063960672322193204149535 41503128880339536053299340368006977710650566631954 81234880673210146739058568557934581403627822703280 82616570773948327592232845941706525094512325230608 22918802058777319719839450180888072429661980811197 77158542502016545090413245809786882778948721859617 72107838435069186155435662884062257473692284509516 20849603980134001723930671666823555245252804609722 535035342264725242508740540755917897812643303316906791 78639167021187492431995700641917969777599028300699 15368713711936614952811305876380278410754449733078 40789923115535562561142322423255033685442488917353 44889911501440648020369068063960672322193204149535 41503128880339536053299340368006977710650566631954 81234880673210146739058568557934581403627822703280 82616570773948327592232845941706525094512325230608 22918802058777319719839450180888072429661980811197 77158542502016545090413245809786882778948721859617 72107838435069186155435662884062257473692284509516 20849603980134001723930671666823555245252804609722 53503534226472524250874054075591789781264330331690710650566631954 81234880673210146739058568557934581403627822703280 82616570773948327592232845941706525094512325230608 22918802058777319719839450180888072429661980811197 77158542502016545090413245809786882778948721859617 72107838435069186155435662884062257473692284509516 20849603980134001723930671666823555245252804609722 53503534226472524250874054075591789781264330331690710650566631954 81234880673210146739058568557934581403627822703280 82616570773948327592232845941706525094512325230608 22918802058777319719839450180888072429661980811197 77158542502016545090413245809786882778948721859617 72107838435069186155435662884062257473692284509516 20849603980134001723930671666823555245252804609722 53503534226472524250874054075591789781264330331690

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T15:21:26.400

> 那么......为什么数组需要是[100]x[50]？为什么 [99]x[50] 会引起这么多问题？

100 是您分配的大小，索引从 0 到 99 (99 + 1 = 100 )。当你只分配 99 你错过了最后一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:31:13.997

由于您使用 C 字符串来处理五十位数字，因此您必须获得 1 个额外的字符来终止该字符串。

```
char input[100][51];

for (int i = 0; i != 100; ++i)  /* 100 entries */
{
    /* read your 50 digits normally here */
    input[i][50] = '\0';  /* remember to terminate the string */
} 
```

# php - 当另一个变量发生变化时向一个变量添加一个

> ID：11331805
> 
> 赞同：-4
> 
> 时间：2012-07-04T15:17:57.140
> 
> 标签：php

当另一个变量更改值时，我将如何向变量添加一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T15:31:49.513

将变量封装在类实例中，并需要调用方法来增加该变量。调用该方法时，要么显式增加另一个变量，要么使用[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)，以便您可以在运行时添加任意增量器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:21:27.853

当您更改另一个变量时，请记住将一个添加到变量中。
没有办法让它自动发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:46:06.653

很难为您的问题创建一个好的答案，因为它没有说明您如何设置它`$another_variable`或它是什么。但这是我的建议：

```
$variable = 1;
$orginal_variable = 'orginal value to another_variable';
$another_variable = ($_GET['new-value']) ? $_GET['new-value'] : $orginal_variable;
$variable = ($another_variable != $orginal_variable) ? ($variable + 1) : $variable ;

echo $variable; 
```

为了检测 PHP 中的任何更改，我相信您需要在脚本中的某处提供原始值以进行比较。在这种情况下，您需要从 中获取原始值`$another_variable`。

```
$orginal_variable = 'orginal value to another_variable'; 
```

一旦你有了它，你就可以做我所做的：

```
$another_variable = ($_GET['new-value']) ? $_GET['new-value'] : $orginal_variable ; 
```

要么设置`$another_variable`为从某处（例如从 a`_GET`或`_POST`）获取的新值，要么将其与原始值相同`$orginal_variable`。

然后你可以比较这两个值；如果`$another_vriable`已更改，意味着它与 不同`$orginal_variable`，您可以 +1 到`$variable`。或者如果没有任何变化，就保持原样：

```
$variable = ($another_variable != $orginal_variable) ? ($variable + 1) : $variable ; 
```

# android - 使用 XLIFF 改进 Android 字符串资源

> ID：11331809
> 
> 赞同：15
> 
> 时间：2012-07-04T15:18:15.963
> 
> 标签：android, adt, xliff

我见过一些使用 XLIFF 标签来包装变量的 Google 应用程序和代码示例。我看到这样做有一些很大的优势，特别是对于替换非描述性格式参数，例如`%1$s`.

不幸的是，XLIFF 似乎没有很好地集成到 ADT 中。以以下字符串资源为例：

```
<resources 
    xmlns:xliff="urn:oasis:names:tc:xliff:document:1.2" 
    xmlns:tools="http://schemas.android.com/tools">

    <string name="share_with_application">
        Share your score of <xliff:g id="score" example="1337">%1$s</xliff:g>
        with <xliff:g id="application_name" example="Bluetooth">%2$s</xliff:g>!  
    </string>

</resources> 
```

![图形布局预览](../Images/2198bf4cbb0bc8a68a3e572e660ab471.png)

在上面的示例中，字符串在第一个`<xliff>`标签之后被截断。人们还希望`example`使用该属性，从而产生一个图形预览显示：

> 用蓝牙分享你的 1337 分数！

目前在我的字符串资源中使用 XLIFF 标签有什么好处吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-10T23:23:06.660

我们刚刚在 Android Studio 中添加了对此的支持，版本 0.3： [https ://android-review.googlesource.com/#/c/67724/](https://android-review.googlesource.com/#/c/67724/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-19T21:27:37.990

为了清楚起见，在 Android 字符串资源中使用 XLIFF 标签已完整记录在

[https://developer.android.com/distribute/tools/localization-checklist.html#manage-strings](https://developer.android.com/distribute/tools/localization-checklist.html#manage-strings)

这样的字符串即使在 Eclipse 构建中也能正常工作（支持在构建应用程序的 aapt 工具中）。

但是，如问题所示，ADT 中包含的图形布局工具不考虑 xliff 标签，只是在第一个此类标记的子字符串之后截断字符串。

Android Studio 中的图形工具可以很好地处理此类字符串，了解并使用 xliff 标记。

实际上，我发现`<xliff:g>`源代码中的完整内容相当冗长，因此我调整了 namepsace 声明以允许我这样使用`<x:g>`：

```
<resources xmlns:x="urn:oasis:names:tc:xliff:document:1.2">

   <string name="greeting">Hello <x:g id="name">%1$s</x:g>!</string>

</resources> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T00:51:37.827

现在我开始着手从源代码构建 AOSP，CommonsWare 是正确的：构建过程完全不同，而且确实许多 AOSP 应用程序包含 XLIFF 标签。太糟糕了，它没有与 ADT 集成，但它就是这样。

# jquery - 如何选择或取消选择 JQuery Mobile 中的所有复选框？

> ID：11331812
> 
> 赞同：2
> 
> 时间：2012-07-04T15:18:34.877
> 
> 标签：jquery, jquery-mobile, checkbox, selectall, unselect

我有几个可折叠的复选框，并且正在尝试选中/取消选中该部分中的所有框。

**HTML**

目前，当我单击主复选框时，它只是打开和关闭可折叠对话框。

```
<li data-role="collapsible" id="educationlayers">
            <h3>
                <input type="checkbox" name="education" id="education" class="layers"/>
                <label for="education">Education</label>
            </h3>
            <fieldset data-role="controlgroup">
                <input type="checkbox" data-mini="true" name="education" id="daycare" class="layers"/>
                <label for="daycare">Day Care</label>
                <input type="checkbox" data-mini="true" name="education" id="elementary" class="layers"/>
                <label for="elementary">Elementary</label>
                <input type="checkbox" data-mini="true" name="education" id="intermediate" class="layers"/>
                <label for="highschool">High School</label>
                <input type="checkbox" data-mini="true" name="education" id="postsecondary" class="layers"/>
                <label for="postsecondary">Post Secondary School</label>
            </fieldset>
         </li> 
         <li data-role="collapsible" id="emergencylayers">
               <h3>
                    <input type="checkbox" name="emergency" id="emergency" class="layers"/>
                    <label for="emergency">Emergency</label>
                </h3>
                <fieldset data-role="controlgroup">
                    <input type="checkbox" data-mini="true" name="emergency" id="ambulance" class="layers"/>
                    <label for="ambulance">Ambulance Station</label>
                    <input type="checkbox" data-mini="true" name="emergency" id="fire" class="layers"/>
                    <label for="fire">Fire Station</label>
                    <input type="checkbox" data-mini="true" name="emergency" id="hospital" class="layers"/>
                    <label for="hospital">Hospital</label>
                    <input type="checkbox" data-mini="true" name="emergency" id="police" class="layers"/>
                    <label for="police">Police</label>
                </fieldset>
          </li>
          <li data-role="collapsible" id="facilitieslayers">
                 <h3>
                    <input type="checkbox" name="facilities" id="facilities" class="layers"/>
                    <label for="facilities">Facilities</label>
                </h3>
                <fieldset data-role="controlgroup">
                    <input type="checkbox" data-mini="true" name="facilities" id="commerce" class="layers"/>
                    <label for="commerce">Chamber of Commerce</label>
                    <input type="checkbox" data-mini="true" name="facilities" id="cityfacility" class="layers"/>
                    <label for="cityfacility">City Facility</label>
                    <input type="checkbox" data-mini="true" name="facilities" id="cityhall" class="layers"/>
                    <label for="cityhall">City Hall</label>
                    <input type="checkbox" data-mini="true" name="facilities" id="govfacility" class="layers"/>
                    <label for="govfacility">Government Facility</label>
                </fieldset>
          </li> 
```

**jQuery**

似乎不起作用的 JQuery 代码。

```
$(document).ready(function() {
    fixContentHeight();
    $('#education').click(function() {
        $("INPUT[name='education']").attr('checked', $('#education').is(':checked'));
    });
}); 
```

任何提示都会有所帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T15:28:05.607

我不关心这个函数 ( `fixContentHeight();`) 在做什么。

这样做，它按预期工作。

```
//fixContentHeight();
$('#education').click(function() {
    $("INPUT[name='education']")
        .attr({
            checked: $('#education').is(':checked')
        });
});​ 
```

对其他复选框部分遵循相同的方式。

参考**[现场演示](http://jsfiddle.net/SivaCharan/XcsPP/)**

## 更新：

请参考我对所有复选框部分的作品进行了一些修改的同一段代码，

```
//fixContentHeight();
$('h3 input[type=checkbox]').click(function() {
    $("INPUT[name='"+this.name+"']")
        .attr({
            checked: $(this).is(':checked')
        });
});​ 
```

## HTML：

实际上，您的 HTML`<UL>`标记丢失了。

```
<ul>
    <li data-role="collapsible" id="educationlayers">
        <h3>
            <input type="checkbox" name="education" id="education" class="layers"/>
            <label for="education">Education</label>
        </h3>
        <fieldset data-role="controlgroup">
            <input type="checkbox" data-mini="true" name="education" id="daycare" class="layers"/>
            <label for="daycare">Day Care</label>
            <input type="checkbox" data-mini="true" name="education" id="elementary" class="layers"/>
            <label for="elementary">Elementary</label>
            <input type="checkbox" data-mini="true" name="education" id="intermediate" class="layers"/>
            <label for="highschool">High School</label>
            <input type="checkbox" data-mini="true" name="education" id="postsecondary" class="layers"/>
            <label for="postsecondary">Post Secondary School</label>
        </fieldset>
    </li>
    <li data-role="collapsible" id="emergencylayers">
        <h3>
            <input type="checkbox" name="emergency" id="emergency" class="layers"/>
            <label for="emergency">Emergency</label>
        </h3>
        <fieldset data-role="controlgroup">
            <input type="checkbox" data-mini="true" name="emergency" id="ambulance" class="layers"/>
            <label for="ambulance">Ambulance Station</label>
            <input type="checkbox" data-mini="true" name="emergency" id="fire" class="layers"/>
            <label for="fire">Fire Station</label>
            <input type="checkbox" data-mini="true" name="emergency" id="hospital" class="layers"/>
            <label for="hospital">Hospital</label>
            <input type="checkbox" data-mini="true" name="emergency" id="police" class="layers"/>
            <label for="police">Police</label>
        </fieldset>
    </li>
    <li data-role="collapsible" id="facilitieslayers">
        <h3>
            <input type="checkbox" name="facilities" id="facilities" class="layers"/>
            <label for="facilities">Facilities</label>
        </h3>
        <fieldset data-role="controlgroup">
            <input type="checkbox" data-mini="true" name="facilities" id="commerce" class="layers"/>
            <label for="commerce">Chamber of Commerce</label>
            <input type="checkbox" data-mini="true" name="facilities" id="cityfacility" class="layers"/>
            <label for="cityfacility">City Facility</label>
            <input type="checkbox" data-mini="true" name="facilities" id="cityhall" class="layers"/>
            <label for="cityhall">City Hall</label>
            <input type="checkbox" data-mini="true" name="facilities" id="govfacility" class="layers"/>
            <label for="govfacility">Government Facility</label>
        </fieldset>
    </li>
</ul> 
```

参考**[现场演示 2](http://jsfiddle.net/SivaCharan/XcsPP/1/)**

# 更新2：

我已经浏览了您的代码并对其进行了修改。最后我得到了你对复选框的问题。

您需要刷新`checkboxradio`, 以使用所有复选框的选中值进行更新。

您需要使用：-

```
$("input[name='"+this.name+"']").checkboxradio("refresh"); 
```

**JS：**

```
$('h3 input[type=checkbox]').click(function() {
    $("input[name='"+this.name+"']")
        .attr({
            checked: $(this).is(':checked')
        });
    $("input[name='"+this.name+"']").checkboxradio("refresh");
}); 
```

参考**[现场演示 3](http://jsfiddle.net/SivaCharan/XcjR3/7/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T15:59:59.700

您需要阻止点击事件冒泡到`<li>` 可折叠的事件。

```
$('h3 input[type=checkbox]').click(function(e) {
    $("INPUT[name='"+this.name+"']")
        .attr({
            checked: $(this).is(':checked')
        });
    e.stopPropagation();  //<--stops the click from bubbling up.
});​ 
```

文档： [http ://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

编辑：阅读更多关于可折叠的信息，理论上只点击`header`应该折叠的`li`。检查以确保您的`<h3>`标签都正确关闭，并且没有任何杂散元素缺少关闭标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T15:27:35.697

```
$('h3 input[type=checkbox]').click(function() {
        var selected = $(this).attr('id');
        $("INPUT[name="+selected +"]").attr({checked: $(this).is(':checked')});
}); 
```

[http://jsfiddle.net/mynameisdonald/p584k/6/](http://jsfiddle.net/mynameisdonald/p584k/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-18T08:16:31.443

Stack Overflow 上的所有答案都对我不起作用。

以下是我最终找到的解决方案：

你可以试试收音机标签的id在`$("#radioLabel1").trigger("click");` 哪里。`radioLabel1`

我的工作代码：

```
<script type="text/javascript">

$(document).on('pagecreate', function(evt) {     
$('#checkall_home').click(function(evt) {   //checkall_home is the id of the checkall button
    if(evt.handled !== true) // This will prevent event triggering more then once
    {
        //alert('Clicked');
        if ($("#checkall_home").html()=="Check All"){
            //alert("Checking All");
            $("#checkall_home").html("Uncheck All");
            $("input.cbxGroupHome").prop("checked", false);  //first deselect all of the checkboxes with class name "cbxGroupHome", then simulate clicking on all the labels associated with the checkboxes (i.e. has a for="#id" attribute), which are denoted by the class name "lb_cb_home"
            $(".lb_cb_home").trigger("click");
        }else{
           // alert("unchecking all");
            $("#checkall_home").html("Check All");
            $("input.cbxGroupHome").prop("checked", true);//.checkboxradio("refresh");
            $(".lb_cb_home").trigger("click");
        }
        evt.handled = true;
    }
});
});
</script>

<form method="get" action="">
  <fieldset data-role="controlgroup"><!--Because checkboxes use the label element for the text displayed next to the checkbox form element, we recommend wrapping the checkbox in a fieldset element that has a legend which acts as the title for the question.
   Add the data-role="controlgroup" attribute to the fieldset so it can be styled in a parallel way as text inputs, selects or other form elements.-->
    <!-- <legend><h4>Ingredients</h4>`</legend>-->

 <input id="cb2" type="checkbox" class="cbxGroupHome"/> 
<label class="lb_cb_home" for="cb2">1 cup vegetable oil</label>

<input id="cb3" type="checkbox" class="cbxGroupHome"/>
<label class="lb_cb_home" for="cb3">13 pounds fresh green beans, trimmed</label>

<input id="cb4" type="checkbox" class="cbxGroupHome"/> 
<label class="lb_cb_home" for="cb4">5 tablespoons minced garlic</label>

<input id="cb5" type="checkbox" class="cbxGroupHome"> 
<label class="lb_cb_home" for="cb5">5 tablespoons minced fresh ginger root</label>
</fieldset>
</form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T15:28:16.450

我想，你想要这个：

```
$('h3 :checkbox').change(function() {
    //'$(this).parent().next()' is appropriate 'fieldset' element
    $(this).parent().next().find(':checkbox').prop('checked', $(this).prop('checked'));
}); 
```

这应该适用于所有 3`**教育**、**应急**、**设施**。

[**演示**](http://jsfiddle.net/Emq4d/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-23T07:18:44.630

我知道这个问题很老，但对于那些寻找 jQuery 2.x 和 jQuery Mobile 1.4.3 示例的人来说，试试这个：

* * *

**HTML：**

* * *

```
<div data-role="page" id="chk">
    <div data-role="header"> <a href="#sc" data-icon="home">CSA</a>
         <h1>katalin_2003</h1>
    </div>
    <!-- /header -->
    <div data-role="content">
        <fieldset class="ui-grid-c">
            <div class="ui-block-a">
                <input type="button" id="button1" data-theme="b" value="check all" />
            </div>
            <div class="ui-block-b">
                <input type="button" id="button2" data-theme="b" value="uncheck all" />
            </div>
            <div class="ui-block-c">
                <input type="button" id="button3" data-theme="b" value="check grp1" />
            </div>
            <div class="ui-block-d">
                <input type="button" id="button4" data-theme="b" value="check grp2" />
            </div>
        </fieldset>

<div data-role="collapsible" data-collapsed="true" data-content-theme="a">
    <h4>grp1</h4>
        <fieldset data-role="controlgroup">
            <input type="checkbox" grp="1" name="checkboxArr1[]" id="checkbox-v-1a" data-theme="b" />
            <label for="checkbox-v-1a">One</label>
            <input type="checkbox" grp="1" name="checkboxArr1[]" id="checkbox-v-1b" data-theme="b" />
            <label for="checkbox-v-1b">Two</label>
            <input type="checkbox" grp="1" name="checkboxArr1[]" id="checkbox-v-1c" data-theme="b" />
            <label for="checkbox-v-1c">Three</label>
        </fieldset>
</div>

<div data-role="collapsible" data-collapsed="true" data-theme="b" data-content-theme="b">
    <h4>grp2</h4>
        <fieldset data-role="controlgroup">
            <input type="checkbox" grp="2" name="checkboxArr2[]" id="checkbox-v-2a" data-theme="a" />
            <label for="checkbox-v-2a">One</label>
            <input type="checkbox" grp="2" name="checkboxArr2[]" id="checkbox-v-2b" data-theme="a" />
            <label for="checkbox-v-2b">Two</label>
            <input type="checkbox" grp="2" name="checkboxArr2[]" id="checkbox-v-2c" data-theme="a" />
            <label for="checkbox-v-2c">Three</label>
        </fieldset>
</div>
</div>
</div> 
```

* * *

**JS**

* * *

```
$(document).on("pageinit", function(e) {
    $('#button1').on( "click", function() {
        $('#chk input[type=checkbox][grp=1], #chk input[type=checkbox][grp=2]').prop('checked', true).checkboxradio('refresh');
        console.log('ALL checked');
    });
    $('#button2').on( "click", function() {
        $('#chk input[type=checkbox][grp=1], #chk input[type=checkbox][grp=2]').prop('checked', false).checkboxradio('refresh');
        console.log('ALL UNchecked');   
    });
    $('#button3').on( "click", function() {
        $('#chk input[type=checkbox][grp=1]').prop('checked', true).checkboxradio('refresh');
        $('#chk input[type=checkbox][grp=2]').prop('checked', false).checkboxradio('refresh');
        console.log('grp1 checked');    
    });
    $('#button4').on( "click", function() {
        $('#chk input[type=checkbox][grp=2]').prop('checked', true).checkboxradio('refresh');
        $('#chk input[type=checkbox][grp=1]').prop('checked', false).checkboxradio('refresh');
        console.log('grp2 checked');    
    });
}); 
```

**[JSFiddle 演示](http://jsfiddle.net/katalin_2003/uHcQL/)**

# php - 从图形 api 获取故事标签会返回标记的奇怪 id 结果

> ID：11331813
> 
> 赞同：0
> 
> 时间：2012-07-04T15:18:38.307
> 
> 标签：php, facebook-graph-api, facebook-php-sdk, json

我解释这一点的最好方法是向你展示。看起来像 64 位系统中的 float() 错误。

当我为此打电话`/anotherfeed/feed`或任何页面时，带有story_tags的帖子会返回一些id作为浮动错误。

id 中带有浮动错误的示例故事标签。 `[id] => 1.7153566624E+14`

我的问题是，我该如何解决这个问题，或者我做错了什么？我正在做的就是在 foreach 语句中循环。

```
 if($fvalue[story_tags]){
                echo 'Tags: ';
                $sTags=$fvalue[story_tags];
            foreach ($sTags as $skey=>$svalue){
            foreach ($svalue as $gkey=>$hvalue){
                $id=$hvalue[id];
                echo ''.$hvalue[name].' '.$id.' ';
                            }
            }
        } 
```

* * *

```
 [story_tags] => Array
                    (
                        [0] => Array
                            (
                                [0] => Array
                                    (
                                        [id] => 1.7153566624E+14
                                        [name] => Another Feed
                                        [offset] => 0
                                        [length] => 12
                                        [type] => page
                                    )

                            ) 
```

* * *

```
Array
(
    [data] => Array
        (
            [0] => Array
                (
                    [id] => 171535666239724_156133294510726
                    [from] => Array
                        (
                            [name] => Another Feed
                            [category] => App page
                            [id] => 171535666239724
                        )

                    [story] => Another Feed shared Non-Profits on Facebook's photo.
                    [story_tags] => Array
                        (
                            [0] => Array
                                (
                                    [0] => Array
                                        (
                                            [id] => 1.7153566624E+14
                                            [name] => Another Feed
                                            [offset] => 0
                                            [length] => 12
                                            [type] => page
                                        )

                                )

                            [20] => Array
                                (
                                    [0] => Array
                                        (
                                            [id] => 41130665917
                                            [name] => Non-Profits on Facebook
                                            [offset] => 20
                                            [length] => 23
                                            [type] => page
                                        )

                                )

                        )

                    [picture] => http://photos-d.ak.fbcdn.net/hphotos-ak-ash3/557037_10150932300320918_1908237167_s.jpg
                    [link] => http://www.facebook.com/photo.php?fbid=10150932300320918&set=a.85612830917.95996.41130665917&type=1
                    [name] => Wall Photos
                    [caption] => Have you heard of the @[159208207468539:274:One Day without Shoes] (ODWS) campaign?  ODWS is an annual initiative by @[8416861761:274:TOMS] to bring awareness around the impact a pair of shoes can have on a child's life.  

During the 2012 campaign, @[20531316728:274:Facebook] drove 20% of traffic to the ODWS microsite and TOMS even launched a Facebook-exclusive "Barefoot & Blue" giveaway with @[25266987484:274:Essie Nail Polish] for the second year in a row.  

We think this is a pretty cool example of creating exclusive content around an important initiative that keeps people engaged and involved!
                    [properties] => Array
                        (
                            [0] => Array
                                (
                                    [name] => By
                                    [text] => Non-Profits on Facebook
                                    [href] => http://www.facebook.com/nonprofits
                                )

                        )

                    [icon] => http://static.ak.fbcdn.net/rsrc.php/v2/yD/r/aS8ecmYRys0.gif
                    [type] => photo
                    [object_id] => 10150932300320918
                    [application] => Array
                        (
                            [name] => Photos
                            [id] => 2305272732
                        )

                    [created_time] => 2012-07-02T17:57:23+0000
                    [updated_time] => 2012-07-02T17:57:23+0000
                    [comments] => Array
                        (
                            [count] => 0
                        )

                ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:14:01.870

**解决方案：**

*cURL* - 必须使用 PHP_EOL 的数字格式来解决 cURL。

// $locs = curl 调用 /anotherfeed/feed 的图形 api，仍然需要 foreach 的解决方案。

```
$locs=json_decode($returned, true);
$stId=number_format($locs[data][1][story_tags][0][0][id], 0, '', '').PHP_EOL;
echo $stId; 
```

* * *

*PHP-SDK*

解决方案是一样的，foreach 循环中的长数字需要通过 number_format 运行。

# macos - 如何跳过将可执行打印记录到 Mac 控制台

> ID：11331814
> 
> 赞同：2
> 
> 时间：2012-07-04T15:18:43.920
> 
> 标签：macos, launchd

我正在为我的应用程序创建一个 Mac 启动代理。Launch 代理工作正常。但是可执行 bin 文件会打印一些控制台消息，当在终端中启动 exe 并将所有这些消息记录到 Mac 控制台时。如何跳过将这些消息记录到 Mac 控制台 ..？

我尝试添加一个 shell 脚本作为启动 exe 的启动代理，以便可执行文件不会将消息记录到控制台。但是脚本不会启动垃圾箱。

这是我的启动代理 plist 文件。

```
 <?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE plist PUBLIC -//Apple Computer//DTD PLIST 1.0//EN http://www.apple.com/DTDs/PropertyList-1.0.dtd >
 <plist version="1.0">
 <dict>
      <key>Label</key>
    <string>com.myapp</string>
  <key>Program</key>
  <string>./bin/MyBin</string>
  <key>WorkingDirectory</key>
  <string>/Applications/MyApp/</string>
  <key>RunAtLoad</key>
  <true/>
  </dict>
  </plist> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T22:15:29.713

`StandardOutPath`您可以通过将和`StandardErrorPath`键添加到 .plist 文件来覆盖启动作业的 stdout 和 stderr 的默认处理。要丢弃所有输出，请添加：

```
<key>StandardOutPath</key>
<string>/dev/null</string>
<key>StandardErrorPath</key>
<string>/dev/null</string> 
```

您还可以将一个或两个重定向到日志文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T19:30:06.183

最简单的方法是上面戈登戴维森所说的。但是，当我需要启动多个可执行文件时，可以通过 shell 脚本启动。

这是我的脚本：

```
 #!/bin/bash
  cd /Applications/MyApp/
  dates=`date`
  echo "Exe Started at ::: ${dates}" > proc.log
  # Starting Exe
  ./bin/MyBin 1>/dev/null 2>/dev/null & echo $! > proc.pid 
```

我在使用这个脚本时遇到了问题。我可以看到 proc.log 已填满，但没有我的应用程序的迹象。令人惊讶的是，当我从脚本中删除“&”时，启动代理开始正常工作。

```
 ./bin/MyBin 1>/dev/null 2>/dev/null & echo $! > proc.pid 
```

变成

```
 ./bin/MyBin 1>/dev/null 2>/dev/null 
```

我不确定为什么 Mac 将后台进程作为 launchd 的不同之处。当我手动运行脚本时，该脚本工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T18:31:38.480

只能在流程开始之前重定向输出。在这种情况下，如果您不想更改所有代码，则启动代理的可执行文件需要是脚本。然后脚本可以根据需要重定向，例如

```
#!/bin/sh
# redirect to a log file, /dev/null, or wherever it should go;
# this is just an example log file destination
`/usr/bin/dirname $0`/run_real_agent > /tmp/my_agent.$$.log 2>&1 
```

# trigger.io - 我可以使用 Trigger.io 访问移动设备上的目录列表吗？

> ID：11331822
> 
> 赞同：0
> 
> 时间：2012-07-04T15:19:29.873
> 
> 标签：trigger.io

我想访问文件系统以获取设备上的照片列表，以便能够在我的应用程序中显示它们。

我没有在 API 中看到提供该信息的方法。有没有办法得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:15:30.123

我们没有 API 方法来列出通过您的应用拍摄的所有照片，但您可以选择自己执行此操作。

首先，在做`forge.file.getImage`的时候，你可以保存文件对象以供以后使用`forge.prefs`，例如，它确实有一个[列表键方法](http://docs.trigger.io/en/v1.3/modules/prefs.html#prefs.keys)。

或者，如果照片被保存到画廊，您可以使用`source: "gallery"`getImage 的参数，这将让用户浏览可用的照片并选择一张。

# ruby-on-rails - 发布到 Rails 服务器时如何设置backbone.js 以传递模型名称

> ID：11331823
> 
> 赞同：0
> 
> 时间：2012-07-04T15:19:34.363
> 
> 标签：ruby-on-rails, ruby-on-rails-3, backbone.js

给一个像 GroupMembers 这样的 rails 控制器，如果你发布到 update 方法，rails 期望参数是这样的：

```
[group_member][admin]
[group_member][user_id] 
```

使用backbone.js，当我在视图中设置一个集合然后保存时，集合发布时没有[group_member] 尾随属性，混淆了rails。

知道在使用主干+导轨时如何处理这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:40:20.243

如果您正在使用 rails > 3.1，您可以通过设置轻松完成此操作

```
# in config/initializers/wrap_parameters.rb
ActiveSupport.on_load(:action_controller) do
  wrap_parameters format: [:json]
end 
```

所以传入的 group_member 作为 {:admin => true, :user_id => 42} 发送到控制器将被转换为 {:group_member => {:admin => true, :user_id => 42}}更多细节见[rails_api](http://edgeapi.rubyonrails.org/classes/ActionController/ParamsWrapper.html) .

反之亦然（参见 rails_api）：

```
# in config/initializers/wrap_parameters.rb
ActiveSupport.on_load(:active_record) do
  self.include_root_in_json = false
end 
```

# jquery - php如何向jquery返回一个html文件的值？

> ID：11331828
> 
> 赞同：0
> 
> 时间：2012-07-04T15:19:55.547
> 
> 标签：jquery

我想对 php 执行 jquery 请求，然后我希望 php 返回一个 html 值，该值将附加在原始页面上。jquery 的代码是这样的：

```
$.get("phpfile.php",{'variable':variable},function(response){

$("paragraph_to_display_response").html(response); 
```

我希望 php 作为响应返回一个 html 文件，该文件实际上是一个上传文件表单。我可以这样做吗？ PHP 代码应该是这样的：

```
$variable=$_GET['variable'];
//perform some checks with variable
echo ???//How can I echo an html file? 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:56:21.847

你的 HTML 应该有一个 Response fE 的容器：

```
<div class="result">This will be replaced by AJAX</div>
<div class="click">Go</div> 
```

您的 javascript 应如下所示：

```
var variable = 'VAR';
$(".click").click(function() {
  $.get('phpfile.php', {'variable':variable}, function(data) {
    $('.result').html(data);
  });
}); 
```

您还必须通过向 HTML 中的某些元素添加点击事件来触发上述请求。

您的 PHP 应该只返回您需要的 HTML。

php文件.php

```
<?php
$variable=$_GET['variable'];
echo $variable.': <input name="file" type="file" size="50" maxlength="100000" accept="text/*">'; 
```

# python - opencv 2.4.0 laplacian 不同的结果取决于所使用的 API？

> ID：11331830
> 
> 赞同：1
> 
> 时间：2012-07-04T15:20:00.303
> 
> 标签：python, opencv

我正在使用 OpenCV 2.4.0 python 绑定，我发现在计算图像的拉普拉斯算子时，我使用来自 cv2.cv API 的 cv2 API 得到不同的结果。

如果我使用 cv2 API：

```
im_laplacian = cv2.Laplacian(im_gray, cv2.IPL_DEPTH_32F, ksize = 3) 
```

im_laplacian 始终为 uint8（缺少符号），并且 ddepth 必须为 IPL_DEPTH_32F 或 IPL_DEPTH_64F，如果我尝试 IPL_DEPTH_16S 或 IPL_DEPTH_32S 我收到错误：

“溢出错误：Python int 太大而无法转换为 C long”

如果我使用 cv2.cv API：

```
cvgray = cv.fromarray(im_gray)
im_laplacian2 = cv.CreateImage(cv.GetSize(cvgray), cv.IPL_DEPTH_16S, 1)        
cv.Laplace(cvgray, im_laplacian2, 3) 
```

正如预期的那样，我得到了一个签名的拉普拉斯算子，这与 C++ API 中的结果相同。如果我做：

```
im_laplacian2_scaled = cv.CreateImage(cv.GetSize(cvgray), 8, 1) 
cv.ConvertScaleAbs(dst, im_laplacian2_scaled, 1, 0) 
```

im_laplacian2_scaled 仍然不同于使用 cv2 API 计算的 im_laplacian

在我的特殊情况下，我认为我可以摆脱 cv2 输出，但我很困惑，所有 API 不应该产生相同的输出吗？他们使用不同的算法吗？或者也许 cv2 python 绑定不对应于单个 C++ 函数，而是它们的某种组合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T15:41:48.547

新`cv2`API 使用不同的深度常数：

*   `cv2.CV_64F`代替`cv2.IPL_DEPTH_64F`
*   `cv2.CV_32F`代替`cv2.IPL_DEPTH_32F`
*   `cv2.CV_32S`代替`cv2.IPL_DEPTH_32S`
*   `cv2.CV_16S`代替`cv2.IPL_DEPTH_16S`
*   `cv2.CV_16U`代替`cv2.IPL_DEPTH_16U`
*   `cv2.CV_8S`代替`cv2.IPL_DEPTH_8S`
*   `cv2.CV_8U`代替`cv2.IPL_DEPTH_8U`

# javascript - A* 在 HTML5 Canvas 中开始寻路

> ID：11331834
> 
> 赞同：5
> 
> 时间：2012-07-04T15:20:25.940
> 
> 标签：javascript, html, canvas, path-finding, a-star

我正在尝试在我的游戏（使用 JavaScript、HTML5 Canvas 编写）中实现 A* Start 路径查找。A* Start 的库找到了这个 - [http://46dogs.blogspot.com/2009/10/star-pathroute-finding-javascript-code.html](http://46dogs.blogspot.com/2009/10/star-pathroute-finding-javascript-code.html)现在我正在使用这个库进行路径查找。使用这个库，我正在尝试编写一个简单的测试，但遇到了一个问题。我现在完成了在 HTML5 画布屏幕中单击鼠标显示路径直到我的 mouse.x 和 mouse.y。这是一个屏幕截图：

![截屏。](../Images/ca4612e5826627fae6fea0232b48ca4a.png)

（粉红色方块：播放器，橙色方块：直到我的 mouse.x/mouse.y 的路径）代码我如何绘制橙色方块，直到我的 mouse.x/mouse.y 是：

```
for(var i = 0; i < path.length; i++) {
    context.fillStyle = 'orange';
    context.fillRect(path[i].x * 16, path[i].y * 16, 16, 16);
} 
```

我的问题是在路径目标之前我不明白如何移动我的玩家。我试过了：

```
for(var i = 0; i < path.length; i++) {
    player.x += path[i].x;
    player.y += path[i].y;
} 
```

但是使用此代码，我的播放器没有被绘制。（当我运行代码时，player.x 和 player.y 等于 0，当我用鼠标单击时，路径播放器会闪烁并消失）

也许有人知道如何解决这个问题？

我非常非常非常抱歉我的英语不好。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T15:51:29.847

**[我的工作小提琴](http://jsfiddle.net/loktar/VP8nq/embedded/result/)**

这是我目前使用的基于我的 a*. 这个概念应该是一样的。a* 函数应该将路径作为数组返回，然后您只需要在每次播放器更新时遍历路径并移动它们。

```
// data holds the array of points returned by the a* alg, step is the current point you're on.
function movePlayer(data, step){
    step++;
    if(step >= data.length){
        return false;   
    }

    // set the player to the next point in the data array
    playerObj.x = data[step].x;
    playerObj.y = data[step].y; 

    // fill the rect that the player is on
    ctx.fillStyle = "rgb(200,0,0)";
    ctx.fillRect(playerObj.x*tileSize, playerObj.y*tileSize, tileSize, tileSize);

    // do it again
    setTimeout(function(){movePlayer(data,step)},10);
}​ 
```

# ruby-on-rails - 先创建，后登录或注册

> ID：11331835
> 
> 赞同：0
> 
> 时间：2012-07-04T15:20:26.147
> 
> 标签：ruby-on-rails, ruby-on-rails-3

使用 Rails 3。

在通常的应用程序中，只有当用户登录时才会出现一个表单。然后在控制器中，我们将在保存新记录之前运行另一个身份验证检查。

但是，无论他是否登录，我都想向所有人显示该表单。当访问者提交带有附件等的表单时，它将检查用户是否已登录。如果他没有登录，则将他重定向到登录/signup 页面，当他完成之后，新记录才会被保存。

我知道这可以通过`create`and来实现`save`，但是有人可以更详细地说明如何以更清晰的解释来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:30:06.797

*   用户提交表单
*   控制器看到用户未登录
*   控制器将提交的表单保存到数据库
*   控制器使用新对象的 id 设置 cookie
*   控制器重定向到登录
*   用户登录
*   控制器从数据库中检索持久的表单信息
*   控制器将对象分配给用户

运行定期作业以清理旧的无人认领的表单数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:35:11.997

好吧，在视图中，您将始终显示表单而无需任何登录检查。这里棘手的部分是保存用户在重定向到登录之前发送的数据。

一种解决方案是将发布数据保存在 cookie 中，然后在登录后将用户重定向到同一页面，再次触发创建

在控制器上，您将完全按照您的描述进行操作：

```
class ThingController
  def create
    if user_logged_in?
      if cookie[:stuff]
        # create the stuff from cookie and remove it
      else
        # create the stuff
      end
    else
      # redirect him to login with a callback to this same place        
    end
  end
end 
```

# jquery - 如何在背景中植入内容在顶部运行的图像滑块？

> ID：11331836
> 
> 赞同：0
> 
> 时间：2012-07-04T15:20:31.720
> 
> 标签：jquery, slider

有谁知道如何创建一个可以覆盖内容的图像幻灯片滑块，这可能听起来很简单，但这就是我在[Srpout 主题主题森林](http://demo.wpbandit.com/sprout/demo/page-layouts/default/)之后所追求 的，包括更改幻灯片图像的能力？我已经尝试过cycle.js，但我不能完全得到中心：

```
 jQuery(function() {
                jQuery("#slideshow").cycle({
                    fx: 'fade',
                    pause: 1,
                    speed: 1800,
                    timeout: 3500
                });
            }); 
```

html:

```
 <body>

                <div id="header-wrap">

                    <div id="header">

                        <div id="backrgound-slider"><?php get_template_part( 'background', 'slider' ); ?></div>

                        <div id="slideshow" class="bgSlider">
                            <img src="<?php bloginfo('stylesheet_directory'); ?>/images/k2-in-skies.jpg" class="bgimage" width="2000" height="1500" alt="Slide 1">
                            <img src="<?php bloginfo('stylesheet_directory'); ?>/images/k2.jpg" class="bgimage" width="2000" height="1500" alt="Slide 2">
                            <img src="<?php bloginfo('stylesheet_directory'); ?>/images/kunhar-river.jpg" class="bgimage" width="2000" height="1500" alt="Slide 3">
                            <img src="<?php bloginfo('stylesheet_directory'); ?>/images/mitre-peak-baltoro.jpg" class="bgimage" width="2000" height="1500" alt="Slide 4">
                            <img src="<?php bloginfo('stylesheet_directory'); ?>/images/musa-ka-musalla.jpg" class="bgimage" width="2000" height="1500" alt="Slide 5">
                            <img src="<?php bloginfo('stylesheet_directory'); ?>/images/nanga-parbat.jpg" class="bgimage" width="2000" height="1500" alt="Slide 6">
                            <img src="<?php bloginfo('stylesheet_directory'); ?>/images/naran-valley.jpg" class="bgimage" width="2000" height="1500" alt="Slide 7">
                            <img src="<?php bloginfo('stylesheet_directory'); ?>/images/shugran.jpg" class="bgimage" width="2000" height="1500" alt="Slide 8">
                        </div>

                        <div id="title">
                            <h1 id="logo">logo</h1>

                            <h2 id="tagline"></h2>

                        </div>

            <!--and so on --> 
```

CSS：

```
 #slideshow, img.bgimage {
                        width: 2000px;
                        height: 640px;
                        position: relative;
                        top: 0;
                        z-index:-9999;
                    left: -500px;
                } 
```

谢谢

# c# - 在 VB 中投射取自 GridView 单元格的 Web 控件

> ID：11331842
> 
> 赞同：0
> 
> 时间：2012-07-04T15:20:54.247
> 
> 标签：c#, vb.net, datagrid

当我在表单上有许多控件（即标签、按钮等）做几乎相同的事情时，我经常使用一种方法来处理所有控件单击，

但是要知道哪些控件引发了事件并访问该控件的属性，我需要将“发送者”对象转换为正确的类型。

在数据网格视图中：

我想从datagridview单元格中的按钮获取文本我尝试了这个，但它不是wotking：s：s

```
Dim btnGrid As New DataGridViewButtonColumn
        btnGrid.HeaderText = "Modifier les lieu"
        btnGrid.Text = "Mise a jour"
        btnGrid.UseColumnTextForButtonValue = True
        DataGridView1.Columns.Add(btnGrid)

Private Sub DataGridView1_CellClick(ByVal sender As System.Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles DataGridView1.CellClick
        If e.ColumnIndex = 0 Then
            index = DataGridView1.Rows(DataGridView1.CurrentRow.Index).Cells(1).Value
            Dim btn As Button = CType(sender, DataGridViewButtonColumn)
            MsgBox(btn.Text)
        End If
    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:49:58.780

```
Dim button As DataGridViewButtonCell = DirectCast(DataGridView1.Rows(e.RowIndex).Cells(e.ColumnIndex), DataGridViewButtonCell)
MessageBox.Show(button.Value) 
```

# sql - LINQ查询中动态列名的where子句？

> ID：11331844
> 
> 赞同：2
> 
> 时间：2012-07-04T15:21:06.897
> 
> 标签：sql, vb.net, linq, where-clause

我在我的数据库的表中创建了一个包含一些列名的下拉列表。当用户选择列名时，我想在查询中添加 where 子句以使用此过滤器。

我想做的是：

```
Dim objQuery = (From wc In _dbBellen.dealer_telefonies Order By wc.Bedrijfsnaam Select wc)

'if dropdown has value...

objQuery = objQuery.Where(Function(wc) wc.DynamicColumnName < txtFilterValue1.Text) 
```

wc.DynamicColumnName 必须替换为例如 wc.Price。

--

在一些回复后我现在尝试的代码是：

```
 Dim objQuery = (From wc In _dbBellen.dealer_telefonies Order By wc.Bedrijfsnaam Select wc)

        If ddlFilterColumn1.SelectedValue <> "" And ddlFilterOperator1.SelectedValue <> "" And txtFilterValue1.Text <> "" Then

            Select Case ddlFilterOperator1.SelectedValue
                Case "..%"
                    objQuery = objQuery.Where(Function(wc) wc.WHMCSClient_id Like txtFilterValue1.Text & "%")
                Case "%.."
                    objQuery = objQuery.Where(Function(wc) wc.WHMCSClient_id Like "%" & txtFilterValue1.Text)
                Case Else '< > = <>
                    'objQuery = objQuery.Where(Function(wc) wc.WHMCSClient_id < txtFilterValue1.Text)
                    'objQuery = objQuery.Where(Function(wc) "wc." + ddlFilterColumn1.SelectedValue.ToString + " < " + txtFilterValue1.Text)
                    objQuery = objQuery.Where(Function(wc) "wc.WHMCSClient_id < 500")
            End Select

        End If

    Response.Write(objQuery.ToString()) 
```

但我收到以下错误（原始错误是荷兰语，但说明如下）：从字符串 wc.WHMCSClient_id < 500 到类型布尔值的转换无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:30:32.890

*这是一篇相当老的文章，但我认为它仍然可行*

Scott Gu 不久前发布了关于动态 LINQ 库的帖子，它本质上允许您使用字符串以“LINQ”类型格式查询集合。例如：

```
Dim objQuery = (From wc In _dbBellen.dealer_telefonies Order By wc.Bedrijfsnaam Select wc)

// if dropdown has value...
Dim result = objQuery.Where("MyColumnName < " + txtFilterValue1.Text); 
```

这是完整文章的链接：[Dynamic LINQ（第 1 部分：使用 LINQ 动态查询库）](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

# python - 如何在 numpy 中生成弧？

> ID：11331854
> 
> 赞同：3
> 
> 时间：2012-07-04T15:21:40.723
> 
> 标签：python, math, numpy

如果我知道圆弧的中心（x，y，z）和直径，以及起点和终点，我如何生成起点和终点之间的值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-04T15:58:08.230

听起来您的“弧”是两个已知点之间曲线的圆形近似值。我从您帖子中的“直径”（半径的两倍）这个词中猜到了这一点。要做到这一点，你参数化从哪里去[的圆](http://en.wikipedia.org/wiki/Circle) 。给定一个中心、两个端点和一个半径，我们可以近似曲线的一部分，如下所示：`(t) -> (x,y)``t``0..2pi`

```
from numpy import cos,sin,arccos
import numpy as np

def parametric_circle(t,xc,yc,R):
    x = xc + R*cos(t)
    y = yc + R*sin(t)
    return x,y

def inv_parametric_circle(x,xc,R):
    t = arccos((x-xc)/R)
    return t

N = 30
R = 3
xc = 1.0
yc = 3.0

start_point = (xc + R*cos(.3), yc + R*sin(.3))
end_point   = (xc + R*cos(2.2), yc + R*sin(2.2))

start_t = inv_parametric_circle(start_point[0], xc, R)
end_t   = inv_parametric_circle(end_point[0], xc, R)

arc_T = np.linspace(start_t, end_t, N)

from pylab import *
X,Y = parametric_circle(arc_T, xc, yc, R)
plot(X,Y)
scatter(X,Y)
scatter([xc],[yc],color='r',s=100)
axis('equal')
show() 
```

![在此处输入图像描述](../Images/1d620fca1c4cd740dbaa9177c8b77433.png)

这个例子只是二维的，但它很容易适应，因为曲线总是沿着两点和中心之间的平面。

# java - 哪种类型的ip地址适合基于wifi的socket程序

> ID：11331858
> 
> 赞同：0
> 
> 时间：2012-07-04T15:21:59.607
> 
> 标签：java, android, sockets, wifi, ip-address

我目前正在使用 TPC/IP 套接字连接在 android 上构建应用程序。我通过使用以下代码获取有关 wifi 连接的 IP 地址：

这段代码将允许我获取 serverIp 和只是 Ip

```
WifiManager manager = (WifiManager) c.getSystemService(c.WIFI_SERVICE);
DhcpInfo info = manager.getDhcpInfo();
WifiInfo wifiInfo = manager.getConnectionInfo(); 
```

我正在使用以下方式获取服务器 IP：

```
info.serverAddress 
```

并且只是使用IP地址：

```
info.ipAddress 
```

（注意：很抱歉，我无法向您显示我的 logcat 结果，因为它们是我的 ip 地址 =( ...) 基本上这些代码会得到我的服务器地址和 wifi 的 ip 地址。但是我应该使用哪一个来制作 TCP/ IP连接程序?该程序将仅基于wifi。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:01:30.120

1.  如果您**确定应用程序的 Server 部分正在您获得的 Server Ip 上运行，则创建一个到该端口的套接字，如果您有一个与 Server 关联的域名**，如果它是公共服务器，我会更好我确信它会有一些与之相关的域名..

**例如：**

**在端口 4444 连接到服务器，连接超时为 2 秒：**

```
Socket s = new Socket();
s.connect(new InetSocketAddress("117.10.10.10.",4444),2000); 
```

**从服务器读取：**

```
InputStream is = s.getInputStream();
    InputStreamReader isr = new InputStreamReader(is);
    BufferedReader br = BufferedReader(isr);

    String s = null;

    while ((s=br.readLine())!=null)

        {

              System.out.println(s);

         } 
```

**写入服务器：**

```
OutputStream os = s.getOutputStream();
PrintWriter pw = new PrintWriter(os);
pw.println("hello"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:53:22.670

你应该使用类似的东西

```
 Socket s = new Socket("www.server.com", 80); 
```

将您的客户端应用程序连接到您的服务器。其他一切都是其他组件的责任，而不是您的应用程序。见[http://developer.android.com/reference/java/net/Socket.html#Socket(java.lang.String](http://developer.android.com/reference/java/net/Socket.html#Socket(java.lang.String) , int)

# jquery - jquery DataTables 表中的大量图像

> ID：11331859
> 
> 赞同：2
> 
> 时间：2012-07-04T15:22:04.377
> 
> 标签：jquery, lazy-loading, datatables

例如，我有一个包含近 1500 个条目的表。他们中的大多数人都有一张小照片。使用 DataTable 插件，设置一个好用的/过滤器/查看表真的很容易。但是，当然，对于这么多的图像，页面的加载速度非常糟糕。有没有人知道加载图像的方法，只要它们在视图中吗？当时显示了 50 个条目 - 有一个分页。

我知道线索，如何将图像加载技术与 DataTable 插件相结合。

有任何想法吗？会非常惊人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:27:25.043

您正在寻找的东西称为“延迟加载”

这是一个[插件](http://www.appelsiini.net/projects/lazyload)，但您可以搜索许多其他可用的插件。

# javascript - jquery toggle - 防止顺序切换

> ID：11331860
> 
> 赞同：0
> 
> 时间：2012-07-04T15:22:08.233
> 
> 标签：javascript, jquery

我有一个带有 agg-drop 类的列表，其项目有一个类名 sortedli。这些项目有 2 个切换状态。我使用 .clone(true) 克隆这些项目，它将项目添加到类名为“all-drop”的列表中。此列表中的项目有 3 个切换状态。现在，如果我要切换新克隆列表中的项目，前两次单击什么也不做，大概是因为它按顺序通过切换功能并且切换依赖于类名。有没有办法防止这种情况发生？

```
$(".sortedli").toggle(function(){
    if( $(this).parent().hasClass('agg-drop') ){
          $(this).css("background","orange");
    }},
    function(){
    if( $(this).parent().hasClass('agg-drop') ){
          $(this).css("background","yellow");
    }},
    function(){
    if( $(this).parent().hasClass('all-drop') ){
          $(this).css("background","red");
    }},
    function(){
    if( $(this).parent().hasClass('all-drop') ){
          $(this).css("background","green");
    }},
        function(){
    if( $(this).parent().hasClass('all-drop') ){
          $(this).css("background","blue");
    }}
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:47:25.753

这行得通吗？

```
$(".sortedli").toggle(function(){
    if( $(this).parent().hasClass('agg-drop') ){
          $(this).css("background","orange");
    }},
    function(){
    if( $(this).parent().hasClass('agg-drop') ){
          $(this).css("background","yellow");
    }
}).toggle(function(){
    function(){
    if( $(this).parent().hasClass('all-drop') ){
          $(this).css("background","red");
    }},
    function(){
    if( $(this).parent().hasClass('all-drop') ){
          $(this).css("background","green");
    }},
        function(){
    if( $(this).parent().hasClass('all-drop') ){
          $(this).css("background","blue");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:48:47.637

你的假设是正确的，它是按顺序通过切换列表的。这也是为什么原来的`li`改变两次然后什么都不做的原因 3 次。您要做的是在克隆后附加一个单独的切换事件`ul`

这就是我想象你的代码目前的样子：（http://jsfiddle.net/QGxRK/2/）

```
$(function() {
    $(".sortedli").toggle(function(){
        if( $(this).parent().hasClass('agg-drop') ){
              $(this).css("background","orange");
        }},
        function(){
        if( $(this).parent().hasClass('agg-drop') ){
              $(this).css("background","yellow");
        }},
        function(){
        if( $(this).parent().hasClass('all-drop') ){
                  $(this).css("background","red");
        }},
        function(){
            if( $(this).parent().hasClass('all-drop') ){
              $(this).css("background","green");
        }},
            function(){
        if( $(this).parent().hasClass('all-drop') ){
              $(this).css("background","blue");
        }}
    );

    var allDrop = $('.agg-drop').clone(true);
    allDrop.removeClass('agg-drop').addClass('all-drop');
    allDrop.insertAfter('.agg-drop');
}); 
```

这是你想要的更多：http: [//jsfiddle.net/QGxRK/3/](http://jsfiddle.net/QGxRK/3/)

```
$(function() {
    $(".sortedli").toggle(function(){
        if( $(this).parent().hasClass('agg-drop') ){
              $(this).css("background","orange");
        }},
        function(){
        if( $(this).parent().hasClass('agg-drop') ){
              $(this).css("background","yellow");
        }}
    );

    var allDrop = $('.agg-drop').clone(); //Don't need to clone the events
    allDrop.removeClass('agg-drop').addClass('all-drop');
    allDrop.insertAfter('.agg-drop');

    allDrop.find('.sortedli').toggle(function(){
            if( $(this).parent().hasClass('all-drop') ){
                  $(this).css("background","red");
            }
        },
        function(){
        if( $(this).parent().hasClass('all-drop') ){
                  $(this).css("background","green");
            }
        },
        function(){
            if( $(this).parent().hasClass('all-drop') ){
                  $(this).css("background","blue");
            }
        });
}); 
```

# javascript - 在 Firefox 中动态渲染 iFrame

> ID：11331863
> 
> 赞同：0
> 
> 时间：2012-07-04T15:22:11.307
> 
> 标签：javascript, iframe

我像这样动态生成一个 iFrame

```
var iframe=document.createElement('iframe');
document.body.appendChild(iframe);
var iframedoc=iframe.contentDocument||iframe.contentWindow.document;
iframedoc.body.innerHTML="HI"; 
```

小提琴：http: [//jsfiddle.net/Pbj7S/](http://jsfiddle.net/Pbj7S/)

它适用于 Google Chrome、Opera、Safari，但不适用于 Firefox。

知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:25:51.097

这有效：

```
var iframe=document.createElement('iframe');
document.body.appendChild(iframe);
setTimeout(function(){
    var iframedoc=iframe.contentDocument||iframe.contentWindow.document;
    iframedoc.body.innerHTML="HI";
}, 10); 
```

问题是您试图在 iframe 文档在 DOM 中可用之前访问它。

延迟并不重要，重要的是浏览器仅在 js 线程完成工作后才更新显示（以及 Firefox 中的一些 js 可访问对象）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-11T21:27:27.047

没有这样的必要。您不需要使用 timeout 或任何东西让 firefox 表现得像 chrome。在您的代码中，只需将源设置为 'javascript:' 即可。示例如下：

```
iframe.src = 'javascript:'; 
```

或者只是使用：

```
iframe.src = 'about:'; 
```

不要设置为空白。在 firefox、chrome、opera 等中可以正常工作......

# java - JPA：处理多对多关系

> ID：11331864
> 
> 赞同：0
> 
> 时间：2012-07-04T15:22:14.060
> 
> 标签：java, jpa, many-to-many

我正在使用 jpa-api 2.0-cr-1.(Maven)

我有 2 个类 Person 和 Tag。

每个人可以有多个标签，反之亦然。

现在我想检索属于所有给定标签的所有人。
例如
，person1 被标记为“tall”、“fat”和“bold”
person2 被标记为“tall”和“thin”
person3 被标记为“tall”和“bold”

**现在的问题是，如果我查询 ["tall","bold"]
我应该得到 [person1,person3]
即我想检索属于所有给定标签的人。**

```
public class Person {
    @Id
    @Column(name = "id")
    @GeneratedValue(strategy = GenerationType.AUTO)
    private long id;

    @Column(name = "person_name")
    private String personName;

    @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    @JoinTable(name = "person_tag", joinColumns = { @JoinColumn(name = "person_id") }, inverseJoinColumns = @JoinColumn(name = "tag_id"))
    private Set<Tag> tags;
}

public class Tag {
    @Id
    @Column(name = "id")
    @GeneratedValue(strategy = GenerationType.AUTO)
    private long id;

    @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    @JoinTable(name = "person_tag", joinColumns = { @JoinColumn(name = "tag_id") }, inverseJoinColumns = @JoinColumn(name = "person_id"))
    private Set<Person> persons; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:27:38.223

如果您正在寻找查询，您可以尝试以下查询。在这里，我使用了“tag.name”，而不是 id。但如果它适合你，你知道如何改变它。

```
select p from Person p 
  left join p.tags as t where t.name in ("tall","bold") 
group by p having count(p)=2 
```

顺便说一句，我没有测试它。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:48:04.790

```
Select p from Person p join p.tags t1 join p.tags t2 where t1.name = 'tall' and t2.name = 'bold' 
```

见， [http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#JOIN](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#JOIN)

# symfony - 以正确的方式更新 Symfony 2.0.9

> ID：11331866
> 
> 赞同：1
> 
> 时间：2012-07-04T15:22:17.073
> 
> 标签：symfony, xampp

我正在使用 Symfony 2 开发一个工具。由于我的 Symfony 版本有点旧，我想更新一下。我当前的安装是“with vandors”，我在 Win7 下使用 XAMPP。我觉得有点愚蠢，但即使在互联网上搜索了一个多小时后，我也没有弄清楚如何正确更新到 .15 版

如果你能给我一些关于这个的愚蠢安全的指导，你会很有帮助，因为到目前为止我所做的安装或修补软件的所有工作都是运行一个 exe 文件。

希望我的英语足够好，可以指出我的问题是什么，但是我为所有错误道歉。

问候死神1908

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:39:00.203

更新步骤总是在发布公告中给出（参见[Symfony 2.0.15 发布](http://symfony.com/blog/symfony-2-0-15-released)）：

> 如果您已经有一个基于 Symfony 标准版 2.0.x 的项目，您可以通过获取新的[deps](https://raw.github.com/symfony/symfony-standard/v2.0.15/deps)和[deps.lock](https://raw.github.com/symfony/symfony-standard/v2.0.15/deps.lock)文件轻松升级到 2.0.15。然后，运行供应商脚本（它还会清除您的缓存）：

```
./bin/vendors install 
```

如果您修改了 deps 文件以包含其他供应商，您将不得不手动将其与最新的 Symfony 合并。

供应商脚本需要 git 客户端才能工作。你必须安装它。

由于您在 Windows 上：[Symfony2 在 Windows 中安装供应商](https://stackoverflow.com/questions/8165577/symfony2-installing-vendors-in-windows)

# sql - 调用使用 Microsoft SQL Server 的输出参数的 Oracle 存储过程

> ID：11331871
> 
> 赞同：2
> 
> 时间：2012-07-04T15:22:38.837
> 
> 标签：sql, sql-server, oracle

我正在尝试在 Oracle 10g 服务器上执行存储过程，该过程从 SQL Server 2008 查询中以输出参数返回其结果。

Oracle 存储过程声明如下所示：

```
 PROCEDURE MY_PROC(
     ID IN NUMBER,
     RESULT OUT CURSOR_TYPE); 
```

如何使用 OpenQuery 或任何查询 Oracle 的方法从 MS SQL Server 2008 调用此存储过程，并能够查看存储在“RESULT”中的结果集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:43:10.547

我从 SQL SERVER 到 SQL SERVER 都这样做了，而且效果很好。也许在 Oracle 中你需要一些费用。

这是我在 sql server 中的代码

--drop proc proc_test_test 创建 proc proc_test_test (

@a 整数，@b 整数输出

) 作为开始

设置@b = @a*6+4

结尾

选择 *

from openrowset('type','服务器名称';'user';'pass',

'声明@answer int;

执行 db.dbo.proc_test_test @a = 1, @b = @answer 输出；

选择 @answer 作为 a' )

# jquery - 在 HTML5 视频中捕获特定时间的图像

> ID：11331873
> 
> 赞同：3
> 
> 时间：2012-07-04T15:22:47.277
> 
> 标签：jquery, html, video

我最近创建了一个帮助类来捕获`video`标签的屏幕截图。目前，该类包括一个使用画布的捕获方法。这一切都按预期工作；截取或捕获视频的当前帧 [ `currentTime`]。

```
var VideoSnapper = {
    captureAsCanvas: function (video, size)
    {
        // create a canvas, set the width and height, and draw the video
        var canvas = $('<canvas />').attr({ width: size.width, height: size.height })[0];
        canvas.getContext('2d').drawImage(video, 0, 0, size.width, size.height)

        return canvas;
    }
} 
```

## 这是[jsFiddle](http://jsfiddle.net/GeekyEggo/seyr5/1/)演示代码

我想进一步扩展它以允许`time`传入一个可选参数，该参数捕获视频中给定时间的屏幕截图。我试过更新视频上的时间，捕捉，然后改回时间，但没有成功。

非常感谢任何建议或想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T00:33:04.707

如果您将视频搜索到任何位置，则必须等待搜索事件。否则，视频不会加载。我刚刚做了这个例子，希望对你有帮助。[http://jsfiddle.net/vphyr/](http://jsfiddle.net/vphyr/)另请查看此[http://www.w3.org/wiki/HTML/Elements/video](http://www.w3.org/wiki/HTML/Elements/video)以了解有关 Video 元素的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-13T14:30:15.443

我正在使用 “ *timeupdate* ”事件`video.currentTime = time` 来寻找和拍摄快照。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-15T13:25:59.877

这是我的代码：

```
function createPoster($video) {
        //here you can set anytime you want
        $video.currentTime = 5;
        var canvas = document.createElement("canvas");
        canvas.width = 350;
        canvas.height = 200;
        canvas.getContext("2d").drawImage($video, 0, 0, canvas.width, canvas.height);
        return canvas.toDataURL("image/jpeg");;
    }

   $video.setAttribute("poster", createPoster($video));
```*

# optimization - 位级操作的建议

> ID：11331875
> 
> 赞同：2
> 
> 时间：2012-07-04T15:22:52.643
> 
> 标签：optimization, cuda, bit-manipulation, gpu

我目前正在从事一个涉及大量数据位级操作的项目，例如比较、屏蔽和移位。本质上，我需要在 8kbytes - 32kbytes 长的比特流中搜索 20 - 40bytes 长的比特模式。

有谁知道在 CUDA 中优化此类操作的一般资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:36:24.403

关于如何使用 CUDA 进行文本搜索，至少有几个问题。也就是说，在长字节串中查找短字节串的实例。这与您想要做的类似。也就是说，字节串搜索很像位串搜索，其中字节串中的位数只能是 8 的倍数，并且算法仅每 8 位检查一次匹配。在 SO 上搜索 CUDA 字符串搜索或匹配，看看是否能找到它们。

我不知道这方面的任何一般资源，但我会尝试这样的事情：

首先准备每个搜索位串的 8 个版本。每个位串移动不同数量的位。还要准备开始和结束掩码：

```
start
01111111 
00111111 
...
00000001

end
10000000
11000000
...
11111110 
```

然后，本质上，使用不同的位串和掩码执行字节串搜索。

如果您使用的是计算能力 >= 2.0 的设备，请将移位的位串存储在全局内存中。开始和结束掩码可能只是程序中的常量。

然后，对于每个字节位置，启动 8 个线程，每个线程检查 8 个移位位串的不同版本与长位串（您现在将其视为字节串）。在每个块中，启动足够的线程来检查，例如，32 字节，这样每个块的线程总数变为 32 * 8 = 256。L1 缓存应该能够保存每个块的移位位串，所以你得到良好的表现。

# caching - PrimeFaces 缓存资源

> ID：11331886
> 
> 赞同：2
> 
> 时间：2012-07-04T15:24:16.557
> 
> 标签：caching, resources, primefaces

在我的 primefaces 应用程序中，我想缓存所有资源，包括 theme.css、primefaces.css、jquery.js、...。为此，我创建了一个 Web 过滤器来检查请求并设置缓存控制响应该资源的标头。但是，我仍然收到对所有 PrimeFaces 资源的请求。有谁知道我怎样才能缓存这些资源，以便我的网络应用程序。可以有更少的加载时间。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T22:25:33.987

将此配置放在 web.xml 中：

```
 <context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Production</param-value>
  </context-param> 
```

# c# - System.Windows.Forms.Timer - NullReferenceException

> ID：11331894
> 
> 赞同：2
> 
> 时间：2012-07-04T15:25:25.763
> 
> 标签：c#

今天在一台机器上发生的 NullReference 异常是否有任何解释。我无法在我的计算机上复制它......

```
class Test
{
  Timer timer_;
  public void Init()
  {
    timer_ = new Timer();
    timer_.Interval = 10000;
    timer_.Tick += OnTimerTick;
    timer_.Start();
  }

  private void OnTimerTick(object sender, EventArgs e)
  {
    timer_.Stop();
    timer_ = null; <--- Null Ref occurs
  }
} 
```

基于 Mark Hall 和 Rich Okelly 的绝妙建议的解决方案

```
private void OnTimerTick(object sender, EventArgs e)
{
    var localTimer = Interlocked.Exchange(ref timer_, null);
    if (localTimer != null)
    {
        localTimer.Stop();
        localTimer.Tick -= OnTimerTick;
        localTimer.Dispose();

        // doing staff
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T15:31:37.033

在将计时器设置为空之前尝试删除您的 OnTimerTick 事件。这将防止在您将其设置为 null 时将其提升，但由于您正在创建一个不太可能的 10 秒单次拍摄，因此请尝试在将其设置为 null 之前处理掉您的计时器；

IE

```
private void OnTimerTick(object sender, EventArgs e) 
{ 
    timer_.Stop(); 
    timer_.Tick -= OnTimerTick;
    timer_.Dispose();
    timer_ = null; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T15:29:17.473

我认为空引用异常实际上发生在上面的行： at `timer_.Stop()`。

发生的事情是引发了 Tick 事件并安排了另一个，由于第一个 Tick 事件，计时器被停止并设置为空。然后，第二个 Tick 事件尝试在 Timer 上调用 Stop，该 Timer 现在为空。

您可以使用 Interlocked 方法来解决此问题：

```
private void OnTimerTick(object sender, EventArgs e)
{
  var localTimer= Interlocked.Exchange(ref timer_, null);
  if (localTimer != null) 
  {
     localTimer.Stop();
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:35:47.333

您说您正在使用[System.Windows.Forms.Timer](http://msdn.microsoft.com/library/system.windows.forms.timer.aspx)，文档说：

> 此 Windows 计时器专为使用 UI 线程执行处理的单线程环境而设计。它要求用户代码具有可用的 UI 消息泵，并且始终从同一线程操作，或将调用编组到另一个线程。

所以不需要使用 Interlocked.Exchange，这不是并发问题。

您可以尝试以下代码：

```
 public void Init()       
  {       
    if (timer_ != null)
      throw new InvalidOperationException("Already initialized!");
    timer_ = new Timer();       
    timer_.Interval = 10000;       
    timer_.Tick += OnTimerTick;       
    timer_.Start();       
  }       

  private void OnTimerTick(object sender, EventArgs e) 
  { 
    if (timer_ != null)
    {
      timer_.Stop();
      timer_.Dispose();
      timer_ = null;

      // Your code
    }
  } 
```

这样，在第一个滴答时 timer_ 将停止并设置为 null。如果有任何待处理的 Tick，由于 (timer_ != null)，它将被忽略。

此外，如果在计时器运行时调用 Init()（可能是一个错误），您很快就会看到它。

# c# - 数据绑定 TextBox TextChanged 不起作用

> ID：11331897
> 
> 赞同：0
> 
> 时间：2012-07-04T15:25:43.833
> 
> 标签：c#, wpf, linq, data-binding, textchanged

我有两个文本框（**XAML**）

```
<s:SurfaceTextBox Name="CodePostal" TextChanged="CodePostalChanged" />
<s:SurfaceTextBox Name="Commune" Text="{Binding Path=CommuneGeographique}" /> 
```

在（**.cs 文件**）中

```
private MyModelContainer db;
private ObservableCollection<Commune> _CommunesList = new ObservableCollection<Commune>();
private ObservableCollection<Commune> CommunesList 
{ 
    get { return _CommunesList; }
    set { _CommunesList = value; }
} 
```

在**构造函数**中，我有这个：

```
InitializeComponent();
getCommunes("Test"); 
```

而**getCommunes(string search)**是一个 Linq 查询

```
db = new MyModelContainer();

CommunesList.Clear();
Commune.DataContext = _CommunesList;

var myCommunes = from d in db.Communes
                 where d.CommunePostale.Equals(search)
                 select d;

foreach (Commune c in myCommunes)
{
    CommunesList.Add(c);
}

Commune.DataContext = CommunesList; 
```

此时一切正常，Commune TextBox 显示我想要的内容。

我的问题是，当我尝试在 TextChanged 上调用 getCommunes() 方法时

```
private void CodePostalChanged(object sender, TextChangedEventArgs textChangedEventArgs)
{
    getCommunes("Toto");
} 
```

什么也没有发生，TextBox 被清除。

（它应该显示其他内容，但即使 CommuneList 有一个元素，它也是空的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:29:48.087

因为您没有将文本框与良好的属性 CommuneGeographique 绑定在一起？

```
 <s:SurfaceTextBox Grid.Column="1" Name="Commune" Text="{Binding Path=CommuneGeographique}" /> 
```

# c# - udp 服务器根据从 udp 客户端收到的请求进行响应

> ID：11331901
> 
> 赞同：0
> 
> 时间：2012-07-04T15:25:57.973
> 
> 标签：c#

我正在制作一个 UDP 应用程序，我可以在其中接收来自 udp 客户端的消息并将结果发送回 udp 客户端......但现在我想根据请求设置 udp 服务器响应......就像例如，如果 udp 客户端向服务器发送“Hello”消息，那么服务器会做出相应的反应，如果客户端发送“world”，那么服务器也会做出相应的反应......简而言之，我的问题是我无法读出字符串我在服务器站点接收.....这是 C# 中的窗口窗体应用程序

例如这里是代码：

```
 int recv;
        byte[] data = new byte[1024];

        IPEndPoint endpoint = new IPEndPoint(IPAddress.Loopback, 1235);

        Socket newsocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
        newsocket.Bind(endpoint);

        MessageBox.Show("waiting for a client..");

        IPEndPoint sen = new IPEndPoint(IPAddress.Loopback, 5001);
        EndPoint tmp = (EndPoint)sen;

        recv = newsocket.ReceiveFrom(data, ref tmp);

        MessageBox.Show(" message recieved", tmp.ToString());

        MessageBox.Show(Encoding.ASCII.GetString(data, 0, recv)); 
```

现在我想读出我在“recv”整数处收到的字符串，通过它我可以相应地设置响应..请告诉我我该怎么做...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:48:40.983

看到这个 [链接](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.receive%28v=vs.71%29.aspx)也许它可以帮助，你的代码接缝是正确的，但如果它不起作用，请尝试更改编码

要将数据与字符串进行比较，您首先需要使用这行代码将其转换为字符串

```
Encoding.ASCII.GetString(data, 0, recv) 
```

像这样使用

```
 recv = newsocket.ReceiveFrom(data, ref tmp);
        string receiver = Encoding.ASCII.GetString(data, 0, recv);
            if (receiver == "Hello"){"do something"} 
```

# javascript - HTML5 视频：检测带宽

> ID：11331907
> 
> 赞同：20
> 
> 时间：2012-07-04T15:26:52.000
> 
> 标签：javascript, html, video-streaming, html5-video

我有一个 1080p 视频，我在`<video>`页面上的 HTML5 标记中显示。

是否有一种简单的（ish）javascript 方法来检测带宽，因此如果用户的连接速度太慢而无法流式传输视频，我可以将视频切换为较低质量的版本？类似于 YouTube 的“自动”视频尺寸选择器背后的逻辑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-12-20T22:36:02.453

根据您使用的播放器和编码平台，您可能可以对视频使用 HLS 编码。HLS 代表 HTTP Live Streaming，这是一种由 Apple 开发的协议，主要用于解决这个问题（以及其他问题）。

HLS 基本上将您的视频文件分成多个小文件，因此可以使用简单的 Web 服务器“伪”流式传输它们。使用 HLS，您还可以以多种分辨率进行编码，并且播放器可能能够切换到更低或更高的带宽。

唯一的缺点是大多数播放器使用 Flash 播放 HLS 编码的内容。在此处查看实际情况：http: [//www.flashls.org/latest/examples/chromeless/](http://www.flashls.org/latest/examples/chromeless/)

这是 flowplayer 的 HLS 演示：http: [//demos.flowplayer.org/basics/hls.html](http://demos.flowplayer.org/basics/hls.html)

这是 VideoJS 的插件： [https ://github.com/videojs/videojs-contrib-hls](https://github.com/videojs/videojs-contrib-hls)

要在 HLS 中编码，您可以免费使用 ffmpeg 并将文件上传到您的服务器： [https ://www.ffmpeg.org/ffmpeg-formats.html#hls-1](https://www.ffmpeg.org/ffmpeg-formats.html#hls-1)

或者，您可以使用基于云的解决方案，例如 AWS Transcoder 或 Brightcove [https://aws.amazon.com/elastictranscoder/](https://aws.amazon.com/elastictranscoder/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T15:31:44.303

在谷歌浏览器中，视频元素至少有以下属性：

```
webkitVideoDecodedByteCount: 0
webkitAudioDecodedByteCount: 0 
```

这些应该足以确定客户端解码视频的速度。随着视频的播放，您将跟踪这些字节的增量数量，从而为您提供字节/秒，客户端正在处理视频。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-07T01:19:50.800

如需更新的答案：MPEG-DASH 正在替换 HLS。HLS 主要用于 iOS 领域。大多数桌面浏览器不打算支持它，而 DASH 是他们正在朝着的标准。（但是，有很多播放器旨在让您将 HLS 与 hls.js 等 HTML5 视频播放器一起使用）。DASH 播放器包括 Bitmovin、Google Shaka 等。目前许多人同时为 HLS 和 DASH 进行编码。HLS 还支持分段 mp4。请注意，您需要在服务器端正确编码您的视频。附加资源： http: [//www.streamingmedia.com/Articles/Articles/Editorial/Featured-Articles/The-State-of-MPEG-DASH-2016-110099.aspx](http://www.streamingmedia.com/Articles/Articles/Editorial/Featured-Articles/The-State-of-MPEG-DASH-2016-110099.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T15:28:25.280

我讨厌那个功能！这通常是错误的，如果我想等待 2 小时来加载我的 dang 视频，那就等吧！如果不向用户发送一个大的虚拟文件并测量到达他所花费的时间，就没有可靠的方法来准确测量这一点。

您应该依靠用户输入（并正确记住它！也与 YouTube 不同！）。

总之，**不要以 YouTube 为例**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T15:33:44.433

有些付费服务可能会告诉您对方使用的带宽，例如[netspeed](http://www.maxmind.com/app/netspeed)。

数据准确性可能对您来说已经足够了，但我还没有机会亲自测试它。

# python - 如何将reduce与列表一起使用

> ID：11331908
> 
> 赞同：3
> 
> 时间：2012-07-04T15:26:57.797
> 
> 标签：python, list, python-2.7

以下有什么问题？：

```
lss = reduce(list.extend, [[1],[2]], []) 
```

原因：

```
Traceback (most recent call last):
  File "<pyshell#230>", line 1, in <module>
    lss = reduce(list.extend, [[1],[2]], [])
TypeError: descriptor 'extend' requires a 'list' object but received a 'NoneType' 
```

我不确定`NoneType`它来自哪里。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-04T15:30:06.523

试试这个：

```
lss = reduce(lambda acc, ele : acc + ele, [[1],[2]], [])

lss
> [1, 2] 
```

问题是[`extend()`](http://docs.python.org/tutorial/datastructures.html)返回`None`（这`NoneType`就是来自的地方），这不适用于您想要做的事情 - 传递给的函数*必须*返回一个值：到目前为止的累积结果。[`reduce()`](http://docs.python.org/library/functions.html#reduce)

 ** * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-04T15:35:15.097

我认为值得注意的是：

```
sum([[1],[2]], []) 
```

也可以，而且我很确定会比通过 lambda 减少更快。

我很好奇不同方法的速度，所以我做了一些测试：

```
reduce(lambda a,b:a+b, x, [])               3644.38161492
reduce(list.__add__, x, [])                 3609.44079709
sum(x,[])                                   3526.84987307
y = [];for z in x: y.extend(z)               143.370306969
y = [];map(y.extend,x)                        71.7020270824
y = [None]*400;del y[:];map(y.extend,x)       66.2245891094
list(itertools.chain(*x))                    102.285979986
list(itertools.chain.from_iterable(x))        96.6231369972
[a for b in x for a in b]                    203.764872074 
```

在 PyPy 上（因为，为什么不）

```
reduce(lambda a,b:a+b, x, [])               4797.5895648
reduce(list.__add__, x, [])                 4794.01214004
sum(x,[])                                   4748.02929902
y = [];for z in x: y.extend(z)                56.9253079891
y = [];map(y.extend,x)                        73.8642170429
y = [None]*400;del y[:];map(y.extend,x)      152.157783031
list(itertools.chain(*x))                    633.854824066
list(itertools.chain.from_iterable(x))       629.917827129
[a for b in x for a in b]                     89.6922459602

x = [[1,2,3,4],[2,3,4,5],[3,4,5,6],[4,5,6,7],[5,6,7,8],[6,7,8,9],[7,8,9,10],[8,9,10,11]]*100 
```

结论：

1.  在 reduce 中使用 lambda 很慢
2.  专门的`sum`功能比减少更快
3.  添加列表很慢。
4.  Python 循环开销很大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T15:53:59.760

正如 Óscar López 所指出的，`list.extend`返回`None`，因此不能与`reduce`. 除了建议使用该`lambda`功能，您还可以使用`list.__add__`with `reduce`：

```
>>> reduce(list.__add__, [[1],[2]], [])
[1, 2] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T16:06:20.327

您可能想使用[itertools.chain](http://docs.python.org/library/itertools.html#itertools.chain)

> 创建一个迭代器，从第一个迭代器返回元素，直到它用尽，然后继续到下一个迭代器，直到所有的迭代器都用尽。用于将连续序列视为单个序列。相当于：

```
def chain(*iterables):
    # chain('ABC', 'DEF') --> A B C D E F
    for it in iterables:
        for element in it:
            yield element 
```*

# php - 从 CSV 中删除行，然后使用 PHP 输出（下载）

> ID：11331909
> 
> 赞同：0
> 
> 时间：2012-07-04T15:27:08.980
> 
> 标签：php, csv, simple-html-dom

我有一个数组：

```
$remove_rownumbers = array(1, 4, 7, 9, 2); 
```

这些是行号，我希望从 PHP 中加载的 CSV 中删除。

现在我想通过这样的计数器和 in_array if 语句遍历行：

```
$row = 1;
if (($handle = fopen($CSV_FILE, "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1500, ",")) !== FALSE) {
       if(in_array($row, $remove_rownumbers) == false) // if its not in the remove array, keep it
       {
         // (...) the output part, where im echoing out each row by foreach($data ...)
       }
       $row++;
    }
} 
```

但是我怎样才能得到现在输出的回声并将其再次正确存储在 CSV 中呢？这样，数组中的行号就不会出现在这个新的行号中

我发现它的开始是这样的：

```
header('Content-Encoding: UTF-8');
header('Content-type: application/ms-excel; charset=utf-8');
header('Content-Disposition: attachment; filename=output.csv');
echo "\xEF\xBB\xBF"; 
$fp = fopen("php://output", "w"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:33:38.427

您需要 fopen() 一个新的 CSV 文件并获取句柄，但这很简单：

```
$row = 1;

if ( ($handle = fopen($CSV_FILE, "r")) !== FALSE ) {

    while ( ($data = fgetcsv($handle, 1500, ",")) !== FALSE ) {

        if ( in_array($row, $remove_rownumbers) == false ) {
            fputcsv($newFile, $data);
        }
        $row++;
    }
} 
```

我忘记了你想在哪里下载它。使用重定向标头到新文件。

```
header("Location: http://www.example.com/newfile.csv"); 
```

# c++ - 错误 C2228：'.Alloc' 的左侧必须有类/结构/联合

> ID：11331910
> 
> 赞同：1
> 
> 时间：2012-07-04T15:27:17.773
> 
> 标签：c++, mfc

我有一个 SDK（GigE C++），它定义了一个像这样的类：

```
class PV_BUFFER_API PvBuffer
 {

public: 

 PvBuffer();
 virtual ~PvBuffer();
 PvPayloadType GetPayloadType() const;
 #ifndef PV_NODEPRECATED
 PvResult Alloc( PvUInt32 aSizeX, PvUInt32 aSizeY, PvPixelType aPixelType );
}; 
```

SDK的文档说：

```
 PvResult PvBuffer::Alloc  ( PvUInt32  aSizeX,  
 PvUInt32  aSizeY,  
 PvPixelType  aPixelType   
 )    

 Allocates memory for this PvBuffer. 

 Parameters:
 [in]  aSizeX  The width of the image, in pixels. See GetWidth.  
 [in]  aSizeY  The height of the image, in pixels. See GetHeight.  
 [in]  aPixelType  The GEV pixel type from which the pixel depth is extracted. For     
 supported pixel types, see PvPixelType.h. 

 Returns:
 Includes:
 PvResult::Code::OK 
 PvResult::Code::NOT_ENOUGH_MEMORY 
```

我想使用 Alloc 函数（参见类中的最后一个函数）。所以我写这样的程序：

```
 PvBuffer *lBuffer;  //Class name is PvBuffer
 PvResult lResult= lBuffer.Alloc( 1224, 1029,  PVPIXELMONO ); 
```

但它给出了错误，其中之一是：

```
error C2228: left of '.Alloc' must have class/struct/union 
```

语法正确吗？为什么要上课？正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T15:28:52.133

```
PvBuffer *lBuffer;  //Class name is PvBuffer
PvResult lResult= lBuffer.Alloc( 1224, 1029,  PVPIXELMONO ); 
```

撇开这会调用**未定义的行为**，因为`lBuffer`没有初始化，你想要：

```
PvResult lResult= lBuffer->Alloc( 1224, 1029,  PVPIXELMONO ); 
```

因为`lBuffer`是指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:29:21.253

`lBuffer`是`PvBuffer*`，你需要创造和尊重：

```
lBuffer = new PvBuffer()
lBuffer->Alloc(....); 
```

# php - 从数据库结果创建一个数组

> ID：11331913
> 
> 赞同：-1
> 
> 时间：2012-07-04T15:27:22.450
> 
> 标签：php, mysql

我想从数据库查询中创建一个数组。我想通过他们的 ID 选择 10 个随机问题，并将它们放入一个数组中，只是 ID，我不希望它像`[0]=>array('1'),[1]=>array('2')`，我想简单地`array('1','2','3')`等等。

在他们进入数组之后，我希望能够检查 id 是否在数组中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:33:39.187

如果您使用 PDO php 扩展，请使用[http://www.php.net/manual/en/pdostatement.fetchcolumn.php](http://www.php.net/manual/en/pdostatement.fetchcolumn.php)将列的值检索为一维数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:34:32.043

```
try {
    $pdo = new PDO([dsn], [username], [password]);
    $sql = "
        SELECT ID 
        FROM [tablename] 
        ORDER BY RAND() 
        LIMIT 10
    ";
    $statement = $pdo->prepare($sql);
    if (!$statement) {
        //error handling here
    }
    $result = $statement->execute();
    if (!$result) {
        //error handling here
    $array = array();
    while (list($id) = $statement->fetch(PDO::FETCH_NUM)) {
        $array[] = $id;
    }
    $statement = NULL;
} catch (PDOException $e) {
    //error handling here
} 
```

这应该留下一个 ID 的枚举数组

# reportviewer - 如何将 ReportViewer 与 VS Express 一起使用

> ID：11331920
> 
> 赞同：1
> 
> 时间：2012-07-04T15:27:36.400
> 
> 标签：reportviewer, visual-studio-express

我没钱买 Visual Studio 所以我用的是速成版
我想用 Microsoft
ReportViewer 不买 VS 就用 ReportViewer 合法吗？怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:07:20.783

我很幸运地安装了[Microsoft Report Viewer 2010 Redistributable Package](http://www.microsoft.com/en-us/download/details.aspx?id=6442)（从上面），然后：

1.  去表单设计器
2.  右键单击工具箱并单击添加项目
3.  浏览 DLL（位于`C:\Windows\assembly\GAC_MSIL\Microsoft.ReportViewer.WinForms\10.0.0.0__b03f5f7f11d50a3a\Microsoft.ReportViewer.WinForms.dll`

然后应该可以从工具箱中使用报告查看器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:37:25.350

有一个[Microsoft Report Viewer 2010 Redistributable Package](http://www.microsoft.com/en-us/download/details.aspx?id=6442)

我不确定这是否意味着您可以在 Visual Studio 中使用它，我也不确定许可。

我有一段时间没有使用快递版了。我猜该控件在下载中，您可以尝试添加其中一个 dll 作为控件。

我相信您可以[在 SQL Server Express 中使用 Reporting Services](http://msdn.microsoft.com/en-us/library/ms365166%28v=sql.105%29.aspx)（这是免费的），这可能表明在 vs express 中使用 ReportViewer 的有效性。

# ruby-on-rails - Ruby on Rails：使用 SecureRandom 为网站上的用户生成模糊且唯一的标识符是否安全且合理？

> ID：11331922
> 
> 赞同：1
> 
> 时间：2012-07-04T15:27:38.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在内部，我的网站将用户存储在由整数主键索引的数据库中。

但是，我想将用户与许多独特的、难以猜测的标识符相关联，每个标识符将在各种情况下使用。例子：

*   一个用于用户配置文件 URL：因此可以通过不包含其实际主键的 URL 找到和显示用户，从而防止配置文件被抓取。
*   一个用于无登录电子邮件退订表单：因此用户可以通过单击电子邮件中的链接来更改他们的电子邮件首选项，而无需登录，从而防止其他人能够轻松猜测 URL 并篡改他们的电子邮件首选项。

正如我所看到的，我需要这些标识符的关键特征是它们不容易被猜到，它们是唯一的，并且知道密钥或标识符不会很容易找到另一个。

有鉴于此，我正在考虑在创建新用户时使用[SecureRandom::urlsafe_base64](http://rubydoc.info/stdlib/securerandom/1.9.2/SecureRandom)生成多个随机标识符，一个用于每个目的。由于它们是随机的，因此我需要在插入之前进行数据库检查以保证唯一性。

任何人都可以提供健全性检查并确认这是一种合理的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T16:00:09.093

您使用的方法是使用安全的随机生成器，因此即使知道其中一个 URL，也很难猜测下一个 URL。在生成随机序列时，要记住一个关键方面：不安全的随机生成器可以变得可预测，并且具有一个值可以帮助预测下一个值是什么。你可能对这个没问题。

此外，`urlsafe_base64`在其文档中说默认随机长度为 16 个字节。这为您提供了 8 ^(16 个)不同的可能值 (2.81474977 × 10 ^(14) )。这不是一个巨大的数字。例如，这意味着每秒执行 10.000 次请求的爬虫将能够在大约 900 年内尝试所有可能的标识符。现在似乎可以接受，但是计算机变得越来越快，并且根据您的应用程序的规模，这可能是未来的问题。只是使第一个参数更大可以解决这个问题。

最后，您绝对应该考虑的事情：您的数据库被泄露的可能性。即使您的标识符是防弹的，您的数据库也可能不是，攻击者可能能够获得所有标识符的列表。您绝对应该使用安全散列算法（使用适当的盐，与密码相同）对数据库中的标识符进行散列。只是为了让您了解这有多重要，使用最近的 GPU，SHA-1 可以以每秒 350.000.000 次尝试的速度被强制执行。使用 SHA-1 散列的 16 字节密钥（您使用的方法的默认值）将在大约 9 天内被猜到。

总结：算法已经足够好了，但是增加了keys的长度，并在数据库中hash。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T15:56:19.423

因为生成的 id 不会与任何其他数据相关，所以它们将很难（不可能）猜到。为了快速验证唯一性并找到用户，您必须在数据库中对它们进行索引。

您还需要编写一个返回唯一 id 检查唯一性的函数，例如：

```
def generate_id(field_name)
  found = false
  while not found
    rnd = SecureRandom.urlsafe_base64
    found = User.exists?(field_name: rnd)
  end
  rnd
end 
```

最后一次安全检查，在进行任何更改之前尝试检查标识符和用户信息之间的对应关系，至少是电子邮件。

也就是说，这对我来说似乎是一个很好的方法。

# database - 麻烦将 Opencart 移动到新的托管错误消息

> ID：11331927
> 
> 赞同：0
> 
> 时间：2012-07-04T15:27:46.743
> 
> 标签：database, opencart

将我的 Opencart 网站移至新主机时，我一直无法正常工作。

首先，我通过 ftp 将所有文件下载到我的计算机上，然后将它们上传到我的新主机上。

我从旧主机中导出了数据库并将其导入到我的新主机中。

然后，我将根目录中的配置文件和管理员更改为新的数据库信息，但我没有收到此错误消息：

致命错误：在第 36 行的 /homepages/34/d285756979/htdocs/portfolio/websites/ecommerce/agc-tools/vqmod/vqcache/vq2-system_engine_loader.php 中找不到类“Modeldesignbanner”

附言。我可以访问该网站的管理部分，但只是在前端收到该错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:40:39.857

听起来像文件

```
/catalog/model/design/banner.php 
```

不见了。重新上传它，那个错误应该消失

# c++ - C++：罪（M_PI/6）= 0.5？

> ID：11331932
> 
> 赞同：2
> 
> 时间：2012-07-04T15:28:05.743
> 
> 标签：c++, precision, double-precision

我正在编写一个科学程序，它在其主要算法中使用正弦的共同值，即`sin(M_PI/N)`for `N = 1, 2, 3, 4, 5, 6`。

因为我希望我的程序尽可能快，所以我想：让我们将这些值存储在一个向量中，而不是一遍又一遍地计算它们。它看起来像这样：

```
sin_pi_over_n_.clear();
sin_pi_over_n_.push_back(0.0);
sin_pi_over_n_.push_back(1.0);
sin_pi_over_n_.push_back(sqrt(3.0)/2.0);
sin_pi_over_n_.push_back(sqrt(2.0)/2.0);
sin_pi_over_n_.push_back(sqrt(2.0)*0.25*sqrt(5.0-sqrt(5.0)));
sin_pi_over_n_.push_back(0.5); 
```

所以现在在我的主要算法中我写`s = sin_pi_over_n_[n-1];`而不是`s = sin(M_PI/n);`.

但令我大吃一惊的是，该程序的速度几乎是原来的两倍！我想，真的，读取向量中的值需要那么长时间吗？但后来我意识到这不是问题所在：如果我改写

```
sin_pi_over_n_.push_back(sin(M_PI/1.0));
sin_pi_over_n_.push_back(sin(M_PI/2.0));
sin_pi_over_n_.push_back(sin(M_PI/3.0));
sin_pi_over_n_.push_back(sin(M_PI/4.0));
sin_pi_over_n_.push_back(sin(M_PI/5.0));
sin_pi_over_n_.push_back(sin(M_PI/6.0)); 
```

然后程序又快了！然后我想：我的正弦值有问题。但疯狂的是，即使我只替换最后一行`sin_pi_over_n_.push_back(sin(M_PI/6.0));`，`sin_pi_over_n_.push_back(0.5);`程序又慢了！是关于双精度吗？我有点怀疑：如果我问`std::cout << abs(sin(M_PI/6.0) - 0.5) << std::endl;`，我会`0`进入我的终端。

哎呀：我才意识到；如果我问`std::cout << sin(M_PI/6.0) - 0.5 << std::endl;`（没有`abs`），我会得到`-5.55112e-17`. 我仍然会继续发布这个问题，因为这种行为对我来说似乎不可思议。如果这种不可预知的现象对性能有如此大的影响，我怎么可能优化我的程序的速度？

感谢您的见解！

编辑：也许我还不够清楚。在我的程序中，我有一堂课`Algo`。当我执行我的程序时，某个函数，比如说`my_function`，被调用了很多次。在这个函数中，一行是：`s = sin(M_PI/n);`. 我想我会用 替换这一行`s = sin_pi_over_n_[n-1];`，其中`sin_pi_over_n_[n-1]`是一个向量，它存储为类的成员变量`Algo`，我在 的构造函数中一劳永逸地填充它`Algo`。希望这能让事情更清楚。

编辑 2：好的，你们中的一些人似乎希望我发布更多代码。它来了：

类`Algo`：

```
class Algo : public QThread
{
    Q_OBJECT

public:
    Algo() {}
    void reset_algo(...)

public slots:
    void run();

private:
    void create_sines();
    double super_total_neighbors_angle(const unsigned int &index, double &error);
    double super_radius_update(const unsigned int &index, double &error);
    // etc

    std::vector<double> radii_;
    std::vector<double> sin_pi_over_n_;
    std::vector<unsigned int> neighbors_lists_sizes_;
    // etc
}; 
```

会员功能`create_sines`：

```
void Algo::create_sines()
{
    sin_pi_over_n_.clear();

    /*sin_pi_over_n_.push_back(0.0);
    sin_pi_over_n_.push_back(1.0);
    sin_pi_over_n_.push_back(0.5*sqrt(3.0));
    sin_pi_over_n_.push_back(0.5*sqrt(2.0));
    sin_pi_over_n_.push_back(0.25*sqrt(2.0)*sqrt(5.0-sqrt(5.0)));
    sin_pi_over_n_.push_back(0.5);*/

    sin_pi_over_n_.push_back(sin(M_PI/1.0));
    sin_pi_over_n_.push_back(sin(M_PI/2.0));
    sin_pi_over_n_.push_back(sin(M_PI/3.0));
    sin_pi_over_n_.push_back(sin(M_PI/4.0));
    sin_pi_over_n_.push_back(sin(M_PI/5.0));
    sin_pi_over_n_.push_back(sin(M_PI/6.0));

    return;
} 
```

成员函数`super_radius_update`（我`my_function`在上面重命名）：

```
inline double Algo::super_radius_update(const unsigned int &index, double &error)
{
    int n = neighbors_lists_sizes_[index];
    double s = sin(super_total_neighbors_angle(index, error)*0.5/n);
    double rv = radii_[index]*s/(1-s);
    //s = sin(M_PI/n);
    s = sin_pi_over_n_[n-1];
    return (1-s)*rv/s;
} 
```

恐怕我很难发送一个您可以运行的最小完整示例，因为整个课程有点长而且复杂。我可以尝试，但我仍然必须发布大量代码，而且我需要相当长的时间来提取......

我在 Linux Ubuntu 12.04 64 位笔记本电脑上使用 Qt creator 4.8 64 位。

编辑 3 或 4：我为所有的编辑道歉。有一条重要的信息我没有告诉你：程序将运行（基本上是调用函数`super_radius_update`），直到某些错误落在某个容差范围内。因此，我相信**使程序变慢或变快的不是执行时间，`super_radius_update`而是该函数的调用次数**。使用这样或这样的值`sin(M_PI/N)`将对错误达到容差的速度产生影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:27:41.737

```
double rv = radii_[index]*s/(1-s);
return (1-s)*rv/s; 
```

此代码在 和 处具有奇点`s = 0`，`s = 1`这两种情况都会发生，并且由于奇点而在数值上不稳定。`sin_pi_over_n_[0]`您可能通过和的不同计算触发了不稳定性`sin_pi_over_n_[1]`。

虽然这并不能解释不同`sin_pi_over_n_[5]`计算的不同行为，但可能存在类似的不稳定性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T19:10:19.053

正如所指出的，事实证明我的算法不稳定，不能将任何事情归咎于计算机或 C++ ;)

# perl - 带有不包含关键字的后置上下文的 grep

> ID：11331933
> 
> 赞同：2
> 
> 时间：2012-07-04T15:28:11.047
> 
> 标签：perl, shell, unix, grep

我想通过日志 grep 并收集某个异常堆栈跟踪，但我只想查看那些在 --after-context 中不包含某些关键字的异常。我不知道关键字在上下文后的哪一行。

简单的例子 - 给定这个 shell 代码：

```
grep -A 2 A <<EOF
A
B
C 
R
A
Z
Z
X
EOF 
```

输出是：

```
A
B
C 
--
A
Z
Z 
```

我希望输出是：

```
A
Z
Z 
```

我想排除在后上下文中具有“B”的任何匹配项

我该怎么做呢？使用 grep 不是必需的，尽管我只能访问 coreutils 和 perl。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:22:45.373

这个问题非常适合`awk`：

```
 grep -A2 A LOG_FILE | awk -v RS='--\n' '!/B/ { printf "%s", $0 }' 
```

*   `-v RS='--\n' 设置记录分隔符。
*   `!/B/`查找不包含 的记录`B`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T16:03:52.923

你可以试试

```
sed -ne '/A/{N;N;/\n.*B/d;p;i --' -e '}' 
```

它似乎可以满足您的需要，除了尾随`--`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T16:17:46.423

这是在 perl 中。

```
use strict;
my $Data = join '',<DATA>;

while( $Data =~ /(A\s+\w\s+\w)/msg ) {
    my $Match = $1;
    next if $Match =~ /B/;
    print $Match;

}

__DATA__
A
B
C 
R
A
Z
Z
X 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T16:29:18.303

你可能会这样做：

```
#!/usr/bin/env perl
use strict;
use warnings;
my $pushok = 0;
my @group;
while (<DATA>) {
    chomp;
    if ( m/A/ ) {
        $pushok = 1;
        push @group, $_;
        next;
    }
    if ( m/B/ ) {
        $pushok = 0;
        @group  = ();
        next;
    }
    $pushok and push @group, $_;

    if ( @group == 3 ) {
        print +(join "\n", @group), "\n";
        $pushok = 0;
        @group  = ();
    }
}
__DATA__
A
B
C 
R
A
Z
Z
X
AAA
BBB
AAA
XXX
XXX 
```

这会产生：

```
A
Z
Z
ZZZ AAA
XXX
XXX 
```

# c# - 如何将文件/目录从我的计算机移动或复制到另一台计算机？

> ID：11331935
> 
> 赞同：1
> 
> 时间：2012-07-04T15:28:12.640
> 
> 标签：c#, networking, network-programming

我有一个 C# 程序，我可以通过压缩或不压缩在计算机的两个路径之间移动和复制文件和目录，但我想在两台计算机之间执行此操作。我想用作其他计算机驱动程序的目标路径。我怎样才能做到这一点？

感谢您的帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:30:42.137

有几种方法可以做到这一点，

*   `FTP`使用 FTP 组件在另一端设置服务器
*   使用`UNC`路径直接连接到另一台机器
*   `SCP`如果机器是 unix 机器，则使用样式系统
*   设置您自己的文件传输协议（即通过网络发送字节流）。

不过，我强烈建议使用预先存在的协议，例如 FTP，这样您就可以重用库并促进与其他程序的互操作。

# javascript - Require.js 如何使用插件将 shim 配置考虑在内

> ID：11331938
> 
> 赞同：1
> 
> 时间：2012-07-04T15:28:23.917
> 
> 标签：javascript, requirejs

我正在构建一个 require.js 加载器插件，并且在将插件与使用 shim 配置的模块一起使用时遇到问题。

我的插件加载了正确的路径，但它不依赖于任何`shim`设置，如`deps`or `exports`。

插件是否需要负责解析 shim 配置，或者是否有特殊功能可以确保 require.js 解析 shim ？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:24:08.273

能够解决我的问题。

您需要确保需要`module name`（而不是路径），并确保在`onLoad`回调中返回此 require 调用返回值

像这样

```
req(toLoad, function ( value ) {
    onLoad( value );
}); 
```

# c++ - 在 DirectX 11 中为着色器添加法线信息 - 法线在着色器中不可见？

> ID：11331940
> 
> 赞同：3
> 
> 时间：2012-07-04T15:28:27.803
> 
> 标签：c++, directx, shader, hlsl, normals

我想为我的着色器添加法线贴图信息。我使用 DirectX 11 C++ SDK 中的教程 5 作为基础。

着色器创建的代码是（我只是为了确保我已经发布了所有重要信息，但我认为只有 D3D11_INPUT_ELEMENT_DESC 布局[] 很重要）：

```
// Compile the vertex shader
ID3DBlob* pVSBlob = NULL;
HRESULT hr = CompileShaderFromFile( strToWchart(vertexShaderFileName), "VS", "vs_4_0", &pVSBlob );

// Create the vertex shader
hr = device->CreateVertexShader( pVSBlob->GetBufferPointer(), pVSBlob->GetBufferSize(), NULL, &vertexShader );
if( FAILED( hr ) )
{   
pVSBlob->Release();
}

// Define the input layout
D3D11_INPUT_ELEMENT_DESC layout[] =
{
    { "POSITION", 0, DXGI_FORMAT_R32G32B32_FLOAT, 0, 0, D3D11_INPUT_PER_VERTEX_DATA, 0 },
    { "COLOR", 0, DXGI_FORMAT_R32G32B32A32_FLOAT, 0, 12, D3D11_INPUT_PER_VERTEX_DATA, 0 },
    { "NORMAL", 0, DXGI_FORMAT_R32G32B32A32_FLOAT, 12, 24, D3D11_INPUT_PER_VERTEX_DATA, 0 },
};

UINT numElements = ARRAYSIZE( layout );

// Create the input layout
hr = device->CreateInputLayout( layout, numElements, pVSBlob->GetBufferPointer(),
                                      pVSBlob->GetBufferSize(), &*vertexLayout );
pVSBlob->Release();

    // Set the input layout
context->IASetInputLayout( *vertexLayout );

// Compile the pixel shader
ID3DBlob* pPSBlob = NULL;
hr = CompileShaderFromFile( strToWchart(pixelShaderFileName), "PS", "ps_4_0", &pPSBlob );

// Create the pixel shader
hr = device->CreatePixelShader( pPSBlob->GetBufferPointer(), pPSBlob->GetBufferSize(), NULL, &pixelShader );
pPSBlob->Release();

} 
```

所以很简单，我将 D3D11_INPUT_ELEMENT_DESC layout[] 更改为（添加“NORMAL”行）：

```
D3D11_INPUT_ELEMENT_DESC layout[] =
{
    { "POSITION", 0, DXGI_FORMAT_R32G32B32_FLOAT, 0, 0, D3D11_INPUT_PER_VERTEX_DATA, 0 },
    { "COLOR", 0, DXGI_FORMAT_R32G32B32A32_FLOAT, 0, 12, D3D11_INPUT_PER_VERTEX_DATA, 0 },
    { "NORMAL", 0, DXGI_FORMAT_R32G32B32A32_FLOAT, 12, 24, D3D11_INPUT_PER_VERTEX_DATA, 0 },
}; 
```

比我在盒子创建方法中更改了几行：

```
// Create vertex buffer
SimpleVertex vertices[] =
{
    { XMFLOAT3(  - halfSize.getX(),  + halfSize.getY(),  - halfSize.getZ() ), XMFLOAT4( 0.0f, 0.0f, 1.0f, 1.0f ), XMFLOAT4( 0.0f, 0.0f, 1.0f, 1.0f ) },
    { XMFLOAT3(  + halfSize.getX(),  + halfSize.getY(),  - halfSize.getZ() ), XMFLOAT4( 0.0f, 1.0f, 0.0f, 1.0f ), XMFLOAT4( 0.0f, 1.0f, 1.0f, 1.0f ) },
    { XMFLOAT3(  + halfSize.getX(),  + halfSize.getY(),  + halfSize.getZ() ), XMFLOAT4( 0.0f, 1.0f, 1.0f, 1.0f ), XMFLOAT4( 0.0f, 0.0f, 1.0f, 1.0f ) },
    { XMFLOAT3(  - halfSize.getX(),  + halfSize.getY(),  + halfSize.getZ() ), XMFLOAT4( 1.0f, 0.0f, 0.0f, 1.0f ), XMFLOAT4( 0.0f, 0.0f, 1.0f, 1.0f ) },
    { XMFLOAT3(  - halfSize.getX(),  - halfSize.getY(),  - halfSize.getZ() ), XMFLOAT4( 1.0f, 0.0f, 1.0f, 1.0f ), XMFLOAT4( 0.0f, 1.0f, 1.0f, 1.0f ) },
    { XMFLOAT3(  + halfSize.getX(),  - halfSize.getY(),  - halfSize.getZ() ), XMFLOAT4( 1.0f, 1.0f, 0.0f, 1.0f ), XMFLOAT4( 0.0f, 0.0f, 1.0f, 1.0f ) },
    { XMFLOAT3(  + halfSize.getX(),  - halfSize.getY(),  + halfSize.getZ() ), XMFLOAT4( 1.0f, 1.0f, 1.0f, 1.0f ), XMFLOAT4( 1.0f, 0.0f, 1.0f, 0.0f ) },
    { XMFLOAT3(  - halfSize.getX(),  - halfSize.getY(),  + halfSize.getZ() ), XMFLOAT4( 0.0f, 0.0f, 0.0f, 1.0f ), XMFLOAT4( 0.0f, 0.0f, 1.0f, 1.0f ) },
}; 
```

所以所有行中的最后一个 XMFLOAT4 都是正常的（这些是错误的法线并不重要，现在我只想让它在顶点着色器中可见）。

我还更改了 SimpleVertex：

```
struct SimpleVertex
{
    XMFLOAT3 Pos;
    XMFLOAT4 Color;
    XMFLOAT4 Normal;
}; 
```

我的着色器检查法线是否存在：

```
cbuffer ConstantBuffer : register( b0 )
{
matrix World;
matrix View;
matrix Projection;
}

struct VS_INPUT
{
    float4 Pos : POSITION;
    float4 Color : COLOR;
float4 Normal : NORMAL; 
};

struct PS_INPUT
{
    float4 Pos : SV_POSITION;
    float4 Color : COLOR;
};

PS_INPUT VS( VS_INPUT input )
{
    PS_INPUT output = (PS_INPUT)0;

    output.Pos = mul( input.Pos, World );
    output.Pos = mul( output.Pos, View );
    output.Pos = mul( output.Pos, Projection );
output.Color = input.Normal; //just to know if I have a normals
    return output;
}

float4 PS( PS_INPUT input) : SV_Target
{
    return input.Color;
} 
```

但效果只是一个黑盒子（即使 output.Color = input.Normal）。

**所以有什么问题？**我必须更改其他内容才能在着色器中获取法线信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T15:47:05.057

看起来您的 D3D11_INPUT_ELEMENT_DESC 数组与您的顶点数据不匹配。尝试这个：

```
// Define the input layout
D3D11_INPUT_ELEMENT_DESC layout[] =
{
  { "POSITION", 0, DXGI_FORMAT_R32G32B32_FLOAT, 0, 0, D3D11_INPUT_PER_VERTEX_DATA, 0 },
  { "COLOR", 0, DXGI_FORMAT_R32G32B32A32_FLOAT, 0, 12, D3D11_INPUT_PER_VERTEX_DATA, 0 },
  { "NORMAL", 0, DXGI_FORMAT_R32G32B32A32_FLOAT, 0, 28, D3D11_INPUT_PER_VERTEX_DATA, 0 }
}; 
```

法线的偏移量应包括“位置”（12 字节）和“颜色”（16 字节，而不是 12 字节）的偏移量。而且我不知道你为什么要为此设置输入槽。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T15:47:26.967

我不知道这是否是您的问题，但这里看起来有问题：-

```
{ "POSITION", 0, DXGI_FORMAT_R32G32B32_FLOAT, 0, 0, D3D11_INPUT_PER_VERTEX_DATA, 0 },
 { "COLOR", 0, DXGI_FORMAT_R32G32B32A32_FLOAT, 0, 12, D3D11_INPUT_PER_VERTEX_DATA, 0 },
 { "NORMAL", 0, DXGI_FORMAT_R32G32B32A32_FLOAT, 12, 24, D3D11_INPUT_PER_VERTEX_DATA, 0 }, }; 
```

颜色 r32g32b32a32 类型的条目大小为 16 字节，但这似乎不正确，我希望最后一行的 24 为 28。另外，您将输入槽设置为 12，我不太清楚为什么？

# mongodb - Symfony2 && mongodb 简单参考

> ID：11331942
> 
> 赞同：0
> 
> 时间：2012-07-04T15:28:36.513
> 
> 标签：mongodb, symfony

伙计们，

我想使用 symfony2 对 mongodb 文档做一个简单的参考。

我有这两个文件，并希望将图片引用存储到请求文件中。如果我在请求文档中只有图片 ID，它对我有用。

所以我需要以下内容：

每个人都可以更改文档文件并进行和扩展 custum 调用以从请求（图片数组）中获取所有图片作为对象吗？

我的原始文件：

文件图片：

```
<?php

namespace TestBundle\Document;
use Doctrine\ODM\MongoDB\Mapping\Annotations as MongoDB;

/**
 * @MongoDB\Document(repositoryClass="TestBundle\Repository\RequestsRepository")
 */
class Requests
{
    /**
     * @MongoDB\Id
     */
    protected $id;

    /**
     * @MongoDB\String
     */
    protected $title;

    public function setId($id)
    {
        $this->id = $id;
    }

    public function getId()
    {
        return $this->id;
    }

    public function setTitle($title)
    {
        $this->title = $title;
    }

    public function getTitle()
    {
        return $this->title;
    }
} 
```

文件图片：

```
<?php

namespace TestBundle\Document;
use Doctrine\ODM\MongoDB\Mapping\Annotations as MongoDB;

/**
 * @MongoDB\Document(repositoryClass="TestBundle\Repository\PicturesRepository")
 */
class Pictures
{
    /**
     * @MongoDB\Id
     */
    protected $id;

    /**
     * @MongoDB\String
     */
    protected $filename;

    public function setId($id)
    {
        $this->id = $id;
    }

    public function getId()
    {
        return $this->id;
    }

    public function setFilename($filename)
    {
        $this->filename = $filename;
    }

    public function getTitle()
    {
        return $this->filename;
    }
} 
```

我的基本电话：

```
$dm = $this->get('doctrine.odm.mongodb.document_manager');
$request = $dm->getRepository('TestBundle:Requests')->find($requestId); 
```

对我的测试：

我在请求文件中添加了以下内容：

```
/**
 * @MongoDB\ReferenceMany(targetDocument="Pictures",cascade={"persist"},simple="true")
 */
protected $pictures = array();
public function setPictures($pictures)
{
    $this->pictures[] = $pictures;
}

public function getPictures()
{
    return $this->pictures;

} 
```

并添加了这样的图片：

```
$dm     = $this->get('doctrine.odm.mongodb.document_manager');
$photo   = $dm->getRepository('TestBundle:Pictures')->find($photoId);

$dm1 = $this->get('doctrine.odm.mongodb.document_manager');
$request = $dm1->getRepository('TestBundle:Requests')->find($requestId);

$request->setPictures($photo);
$dm1->flush(); 
```

这有效 - 但我无法通过加载文档来获取图片。

我要加载的代码：

```
$dm1 = $this->get('doctrine.odm.mongodb.document_manager');
$request = $dm1->getRepository('TestBundle:Requests')->find($requestId);

$pictures = $request->getPictures();

foreach($pictures as $picture)
{
    print $picture->getId();         
} 
```

这行不通。我成为以下错误：

> 致命错误：Doctrine\ODM\MongoDB\Proxy\ProxyFactory::getProxy(): 无法打开所需的 '.../app/cache/dev/doctrine/odm/mongodb/Proxies/_ *CG* _TestBundleDocumentPictures.php' (include_path=' .:.../library:/usr/local/zend/share/pear') 在 ..../test/vendor/doctrine-mongodb-odm/lib/Doctrine/ODM/MongoDB/Proxy/ProxyFactory.php 上第 100 行

**谢谢，扬**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:06:23.000

好的，我发现了错误：

在 deps 文件中，我有以下几行：

```
[doctrine-common]
    git=http://github.com/doctrine/common.git
    version=2.1.4

[doctrine-dbal]
    git=http://github.com/doctrine/dbal.git
    version=2.1.7

[doctrine]
    git=http://github.com/doctrine/doctrine2.git
    version=2.1.7 
```

将它们更新为：

```
[doctrine-common]
    git=http://github.com/doctrine/common.git
    version=2.2.1

[doctrine-dbal]
    git=http://github.com/doctrine/dbal.git
    version=2.2.1

[doctrine]
    git=http://github.com/doctrine/doctrine2.git
    version=2.2.1 
```

并且做`php bin/vendors update`参考将再次起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T23:24:23.227

首先，您只需要在 $dm 中调用一次学说，就可以使您的资源超载，这是不好的做法。一个函数，一个 Doctrine 调用。其次，您需要一个 $dm->persist($request) 和 $dm->flush()。在您的 Documents 之间创建一个 OnetoOne，然后使 $pictures 成为一个 Doctrine Array 集合。然后像你尝试的那样设置一张图片，然后进行一个简单的查询并调用 $request->getPicture()->getId()。

# javascript - 如何制作仅在访问者在页面上停留一定时间后才出现的弹出窗口？

> ID：11331943
> 
> 赞同：4
> 
> 时间：2012-07-04T15:28:40.060
> 
> 标签：javascript, popup

我正在尝试向我一直在处理的网站添加一个非侵入性的“注册我们的时事通讯”弹出窗口，但希望该弹出窗口仅在用户访问该网站超过 3 小时后出现分钟左右。如果有人可以帮助我实现这一目标，那就太好了。

提前谢谢大家

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T15:39:07.153

是的，所以有几件事需要考虑。您的弹出窗口显示属性、将显示您的弹出窗口的函数以及在您的函数触发之前需要经过的时间量。

```
<style>
 .SignupPopup{display:none}
</style>

<!-- Page HTML -->
<div id="SignupPopup" class="SignupPopup"></div>

<script>

  // Function that displays your popup
  function popSignupForm(){
     document.getElementById('SignupPopup').style.display = 'block';
  }

  // Using setTimeout to fire the popSignupForm function
  // in 3 minutes time (this is done in milliseconds)
  setTimeout( function(){
     popSignupForm();
  }, 180000 );

</script> 
```

只要用户在同一页面上停留 3 分钟，这将起作用。如果您希望弹出窗口在 3 分钟后出现*在您的网站上*，您需要创建一个 cookie 并在用户第一次到达您的网站时为其添加时间戳。然后，您可以每隔 x 间隔测量经过的秒数（从时间戳开始），以查看是否有时间弹出您的时事通讯注册表单。

伪将如下所示：

```
function onPageLoad(){

     If Cookie Doesn't exist for your site
        Create Cookie
        Record Timestamp

     //Start Checking the cookie to see if 
     //it's time to show the popup
     checkCookieTime()

}

function checkCookieTime(){

    // Check to see if at least 3 minutes
    // Have elapsed from the time of the cookie's
    // cookie's creation
    If Now is >= (Cookie.TimeStamp  + 3 minutes )
      popSignupForm()
    Else
      // Check again in 10 Seconds
      setTimeout( function(){
        checkCookieTime()
      }, 10000 );

} 
```

这是来自 quirksmode 的一篇关于读/写 cookie[的好文章。](http://www.quirksmode.org/js/cookies.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-04T15:30:28.697

您可以在 javascript 中使用 settimeout 函数

```
setTimeout(function(){},time); 
```

# ajax - TinyMCE 在 Mozilla 的一个页面中第二次调用时无法加载内容

> ID：11331945
> 
> 赞同：3
> 
> 时间：2012-07-04T15:28:48.743
> 
> 标签：ajax, firefox, tinymce

基本上，我已经在 textarea 上加载了 tinyMCE。我的动机是：

单击按钮时，编辑器应由通过ajax调用存储在数据库中的描述填充。

它在 Chrome 中正常工作。

但是当我在 Firefox 中运行脚本时，它第一次运行良好。但是再次按下按钮时，描述会闪烁一秒钟然后消失。该代码在刷新页面时工作正常。

可能是什么问题？任何帮助都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:00:10.863

有几种可能性。

一种可能是您需要在第二次重新初始化之前关闭 tinymce 编辑器实例。

要关闭编辑器实例，请使用：

```
tinymce.execCommand('mceRemoveControl',true,'editor_id'); 
```

重新初始化使用

```
tinymce.execCommand('mceAddControl',true,'editor_id'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T09:43:45.893

```
tinymce.init({
        mode : "exact",
        selector: 'your_textarea_selector',
        theme: "modern",
        plugins: [
              "advlist autolink lists link image charmap print preview anchor",
              "searchreplace visualblocks code fullscreen",
              "insertdatetime media table contextmenu paste"
        ],
        toolbar: "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",
        toolbar_items_size: 'small',
        image_advtab: true,
        init_instance_callback : function(editor) {             
            var currentEditor = editor.editorContainer;
            $(currentEditor).show();
        }
    });
    if (tinymce.editors.length>0) {
        tinymce.execCommand('mceFocus', true, txt_area_id);
        tinymce.execCommand('mceRemoveEditor',true, txt_area_id);
        tinymce.execCommand('mceAddEditor',true, txt_area_id);
    } 
```

> 即使有 ajax 请求，这对我来说也很好。我在我的 JSP 中使用 Tinymce 4.x。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-28T19:36:26.033

这件事对我有用：

您需要从包含编辑器的页面调用 tinyMCE 脚本。

我正在使用 MVC4 Razor 框架。通过在我的页面上注入此代码帮助了我：

```
<script src="@Url.Content("~/scripts/tinymce/tinymce.min.js")" type="text/javascript"></script> 
```

# java-me - 来自 RSS 提要的 j2me Lwiit 表单图像未正确加载

> ID：11331946
> 
> 赞同：0
> 
> 时间：2012-07-04T15:28:50.720
> 
> 标签：java-me, rss, lwuit

我的基于 j2me 的应用程序中有一个 LWUIT 表单。我通过 RSS 源（包括图像路径）获取我的数据。现在我想通过我的 LWUIT 表单中的 RSS 提要图像路径显示图像。我为此目的使用 HTMLComponent。基于 html 的文本加载正常，但未显示图像。以下是我的代码片段。

```
 HTMLComponent htmlComp = new HTMLComponent();
             htmlComp.setPreferredSize(new Dimension(300,300));
             String imagePath=myItem.getImagePath().trim();
             htmlComp.setShowImages(true);
             String myHtml="<b>Hello</b> <br/> <img src= \""+imagePath+"\" /> ";
             System.out.println(myHtml);    
             htmlComp.setHTML(myHtml,null,null,false);
             addComponent(htmlComp); 
```

图片路径类似于“http://toffeetv.com/wp-content/uploads/2012/06/f_swan-150x150.jpg”。为什么图片不显示？任何人都可以帮助我提供适当的代码示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:54:38.683

HTML 组件接受一个基本 URL 作为该方法的参数之一。只需将 URL 设置为适当的路径，它应该可以按预期工作。

# wpf - 在 UserControl WPF/VB 中向 Datagrid 添加新行

> ID：11331958
> 
> 赞同：0
> 
> 时间：2012-07-04T15:29:26.680
> 
> 标签：wpf, vb.net, datagrid, row, add

我正在尝试创建一个由 DataGrid 和几个按钮组成的 UserControl。按钮将处理添加/删除行（需要是按钮）。DataGrid 绑定到自定义的可观察集合。集合属性会有所不同（所以我会自动生成列）。

如何添加新行？通常我只会修改可观察的集合。我尝试将新行直接添加到控件中：

```
dgMain.Items.Add(New DataGridRow()) 
```

但我得到一个对我来说意义不大的错误：

> 使用 ItemsSource 时操作无效。改为使用 ItemsControl.ItemsSource 访问和修改元素。

这是后面的当前代码：

```
Public Class DataGrid

Sub New()
    InitializeComponent()
End Sub

#Region "Dependency Properties"
Public Shared MyItemsSourceProperty As DependencyProperty = DependencyProperty.Register("MyItemsSource", GetType(IEnumerable), GetType(DataGrid))
Public Property MyItemsSource() As IEnumerable
    Get
        Return DirectCast(GetValue(MyItemsSourceProperty), IEnumerable)
    End Get
    Set(value As IEnumerable)
        SetValue(MyItemsSourceProperty, value)
    End Set
End Property

#End Region

#Region "Buttons"
Private Sub btnAdd_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles btnAdd.Click
    dgMain.Items.Add(New DataGridRow())
End Sub
#End Region

End Class 
```

那么有人知道我如何添加新行吗？

谢谢你的帮助。

编辑：这是创建数据的方式：

```
Dim np As New ObPerson
np.Add(New Person With {.FirstName = "Jane", .LastName = "Mitel", .Age = 18})
np.Add(New Person With {.FirstName = "Joe", .LastName = "Bloggs", .Age = 92})

UserControlInstance.MyItemsSource = np

Public Class ObPerson
    Inherits ObservableCollection(Of Person)
End Class 
```

EDIT2：接受答案的VB版本：

```
Public Shared Sub AddNewElement(l As IList)
    If l Is Nothing OrElse l.Count = 0 Then
        Throw New ArgumentNullException()
    End If
    Dim obj As Object = Activator.CreateInstance(l(0).[GetType]())
    l.Add(obj)
End Sub

Usage: AddNewElement(MyItemsSource) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:33:53.617

您需要使用绑定的集合 - 而不是网格上的“项目”属性。ItemsSource 将指向您绑定的集合：

```
SomeGrid.ItemsSource = SomeCollection;

SomeCollection.Add(new ItemOfTheRightType()); 
```

或者

```
(SomeGrid.ItemsSource as SomeCollection).Add(new ItemOfTheRightType()); 
```

该错误表明如果您使用 Grid.ItemsSource 进行绑定，则不能使用 Grid.Items

编辑：

如果您在运行时不知道项目类型（可能是因为这是使用控件等的第 3 方，并且您想要一个通用的 add 方法），您需要在底层接口上调用 .Add 方法。大多数列表类型都继承自 .NET 框架中的 IList

我不是 VB 专家，我更喜欢 c#，所以我会给你 c#。您需要首先检查基础类型：

在c#中

```
if(grid.ItemsSource is IList) 
{
    (grid.ItemsSource as IList).Add(new childType()); <-- other issue here..
} 
```

但是您遇到的问题是，如果您要向集合中添加新项目并且您不知道列表类型，则 IList 需要对象的实例才能添加到列表中

*   解决方案是使用反射：

[动态创建 IList 类型的新实例](https://stackoverflow.com/questions/511315/dynamically-creating-a-new-instance-of-ilists-type)

一个有趣的迟到的答案是：

```
var collectionType = targetList.GetType().GetProperty("Item").PropertyType; 
var constructor = collectionType.GetConstructor(Type.EmptyTypes); 
var newInstance = constructor.Invoke(null); 
```

哪个可能有效

# .net - 从python加载注册的dll

> ID：11331959
> 
> 赞同：0
> 
> 时间：2012-07-04T15:29:32.003
> 
> 标签：.net, python, windows, dll

我已经注册了 xceedzip.dll (admin cmd run -> regsvr32 xceedzip.dll) 我想从 python 访问这个 dll 中的 .net 类。

特别是，我需要从多播馈送中解压缩连续数据流。数据以 xceedzip 压缩形式出现，需要对数据执行 uncompress 方法才能解包。供参考：[http ://doc.xceedsoft.com/products/XceedSco/](http://doc.xceedsoft.com/products/XceedSco/)

任何有关如何实现这一目标的指针将不胜感激。根据我的理解，这不会有一个一步准备好的 ctypes 解决方案。这是因为 Uncompress 方法存在于 .net 命名空间的类中。

我被告知 win32com 库可能能够实现这一点，但在我把鼻子放在那个磨刀石之前需要一些指导。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T02:26:01.887

我下载了试用版，这似乎有效：

```
import win32com.client
x=win32com.client.Dispatch('Xceed.StreamingCompression')
compressed = x.Compress(buffer('bork bork bork aaaaa bbbbbbbb'), True)
decompressed = x.Decompress(compressed, True)
print decompressed 
```

# java - 计算机术语中的前置条件，后置条件和不变量有什么区别

> ID：11331964
> 
> 赞同：38
> 
> 时间：2012-07-04T15:30:06.303
> 
> 标签：java, concurrency, uml, invariants

我正在阅读[Java Concurrency in Practice](http://jcip.net/)一书，对这些术语有些困惑：

1.  *前置条件*
2.  *后置条件*
3.  *不变量*

有人可以向我解释一下（如果可能的话，举个例子）？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-04T15:34:29.683

如果你不能理解这些简单的想法，你会在编写 Java 时遇到很多问题，尤其是多线程代码：

1.  前置条件是在调用方法之前必须为真的事情。该方法告诉客户“这是我对你的期望”。
2.  后置条件是方法完成后必须为真的事情。该方法告诉客户“这是我承诺为您做的”。
3.  不变量是始终真实且不会改变的事物。该方法告诉客户“如果在你打电话给我之前这是真的，我保证在我完成后它仍然是真的”。

它们都是“契约式编程”理念的一部分。它是由一个叫[CAR Hoare](http://en.wikipedia.org/wiki/Hoare_logic)的人发明的。Bertrand Meyer围绕它构建了一种名为[Eiffel](http://archive.eiffel.com/eiffel/nutshell.html)的面向对象语言。没有人经常使用它，但他因此在阳光下度过了一天。

埃菲尔不是很受欢迎。在我写这篇文章时，有超过 400 万个关于 SO 的问题，但其中只有 32 个被标记为“埃菲尔”。

更新：2016 年 6 月 29 日有 11,966,392 个关于 SO 的问题。其中只有 92 个被标记为“埃菲尔”。埃菲尔问题的百分比大致保持在 ~0.00077%。

我的立场是正确的-谢谢你，flamingpenguin。我已经更新了我的答案。

# ios - 在 ios 中处理交互式 pdf

> ID：11331972
> 
> 赞同：0
> 
> 时间：2012-07-04T15:30:23.590
> 
> 标签：ios, pdf

我是 iOS 开发的新手。我想制作一个 ios iPad 应用程序（小演示），我想在其中打开不同的交互式（可填写表格）PDF，并填写所需信息。

我尝试嵌入 WebView 但那不起作用，它呈现 PDF 但不让我编辑它。

# variable-assignment - xText 变量/属性分配

> ID：11331977
> 
> 赞同：1
> 
> 时间：2012-07-04T15:30:40.517
> 
> 标签：variable-assignment, xtext

我在 xText 中构建了一个语法来识别特定格式的正式表达式并在 Java 中使用生成的对象树。
这是它的样子：

```
grammar eu.gemtec.device.espa.texpr.Texpr with org.eclipse.xtext.common.Terminals

generate texpr "http://www.gemtec.eu/device/espa/texpr/Texpr"

Model:
    (expressions+=AbstractExpression)*  
;

AbstractExpression:
    MatcherExpression | Assignment;

MatcherExpression:
    TerminalMatcher ({Operation.left=current} operator='or' right= MatcherExpression)?
;

TerminalMatcher returns MatcherExpression:
    '(' MatcherExpression ')' | {MatcherLiteral} value=Literal
;

Literal:
    CharMatcher | ExactMatcher
;

CharMatcher:
    type=('text'|'number'|'symbol'|'whitespace') ('(' cardinality=Cardinality ')')?
;

/* Kardinalitäten für CharMatcher*/
Cardinality:
    CardinalityMin | CardinalityMinMax | CardinalityMax| CardinalityExact
;
CardinalityMin:         min=INT '->';
CardinalityMinMax:      min=INT '->' max=INT;
CardinalityMax:                 '->' max=INT;
CardinalityExact:       exact=INT;

ExactMatcher:
    (ignoreCase='ignoreCase''(' expected=STRING ')') | expected=STRING
;

/* Variablenzuweisung 
 * 
 * z.B. $myVar=number
 * */
Assignment:
    '$' name=ID '=' expression=MatcherExpression
; 
```

除了“基数”分配外，一切正常。

表达式如下所示：
text number(3) - (任意数量的字母，后跟正好 3 个数字)
symbol number(2->) - (任意数量的特殊字符，后跟至少 2 个数字)
whitespace number(- >4) - (任意数量的空格后跟最多 4 个数字)
number(3->6) - (至少 3 个数字但不超过 6 个)

当我使用此语法运行 Eclipse 时（以便识别我的语言并具有代码完成等），我键入的所有内容都显示在“大纲”选项卡中作为它应该的树结构，除了基数值。
当我向 CharMatcher 添加基数语句时，小加号出现在它之前，但是当我单击它时它就消失了。

谁能告诉我为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:41:39.023

我自己找到了解决方案，我认为问题在于编译器此时无法决定要创建哪个类：

```
Cardinality:
CardinalityMin | CardinalityMinMax | CardinalityMax| CardinalityExact
;

CardinalityMin:         min=INT '->';
CardinalityMinMax:      min=INT '->' max=INT;
CardinalityMax:                 '->' max=INT;
CardinalityExact:       exact=INT; 
```

所以我把整个事情简化了一点，现在看起来像这样：

```
Cardinality:
    CardinalityMinMax | CardinalityExact
;

CardinalityMinMax:  (min=INT '..' max=INT) | (min=INT '..') | ('..' max=INT);
CardinalityExact:   exact=INT; 
```

它仍然没有显示在“大纲”选项卡中，但我认为这是可视化的问题。
生成的类现在按预期工作。

# python - 如何在 Python 中删除字符串中的任何 URL

> ID：11331982
> 
> 赞同：64
> 
> 时间：2012-07-04T15:30:57.380
> 
> 标签：python, regex, url, replace, python-2.7

我想删除一个字符串中的所有 URL（将它们替换为“”）我搜索了周围但无法真正找到我想要的。

例子：

```
text1
text2
http://url.com/bla1/blah1/
text3
text4
http://url.com/bla2/blah2/
text5
text6
http://url.com/bla3/blah3/ 
```

我希望结果是：

```
text1
text2
text3
text4
text5
text6 
```

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2016-11-26T21:01:04.817

最短的路

```
re.sub(r'http\S+', '', stringliteral) 
```

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2012-07-04T16:15:58.030

***Python脚本：***

```
import re
text = re.sub(r'^https?:\/\/.*[\r\n]*', '', text, flags=re.MULTILINE) 
```

***输出：***

```
text1
text2
text3
text4
text5
text6 
```

*[在此处](http://ideone.com/K3Cut)测试此代码。*

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-07-04T16:12:43.740

这对我有用：

```
import re
thestring = "text1\ntext2\nhttp://url.com/bla1/blah1/\ntext3\ntext4\nhttp://url.com/bla2/blah2/\ntext5\ntext6"

URLless_string = re.sub(r'\w+:\/{2}[\d\w-]+(\.[\d\w-]+)*(?:(?:\/[^\s/]*))*', '', thestring)
print URLless_string 
```

结果：

```
text1
text2

text3
text4

text5
text6 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2018-04-26T06:48:18.173

# 删除混合在任何文本中的 HTTP 链接/URL：

```
import re
re.sub(r'''(?i)\b((?:https?://|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))''', " ", text) 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2016-07-21T08:05:35.233

此解决方案适用于 http、https 和其他普通 url 类型的特殊字符：

```
import re
def remove_urls (vTEXT):
    vTEXT = re.sub(r'(https|http)?:\/\/(\w|\.|\/|\?|\=|\&|\%)*\b', '', vTEXT, flags=re.MULTILINE)
    return(vTEXT)

print( remove_urls("this is a test https://sdfs.sdfsdf.com/sdfsdf/sdfsdf/sd/sdfsdfs?bob=%20tree&jef=man lets see this too https://sdfsdf.fdf.com/sdf/f end")) 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2018-08-16T20:20:26.730

我找不到任何可以处理我的特殊情况的方法，即删除推文中间的网址，网址*中间*也有*空格，*所以我自己制作了：

```
(https?:\/\/)(\s)*(www\.)?(\s)*((\w|\s)+\.)*([\w\-\s]+\/)*([\w\-]+)((\?)?[\w\s]*=\s*[\w\%&]*)* 
```

这里有一个解释：
`(https?:\/\/)`匹配 http:// 或 https://
`(\s)*`可选空格
`(www\.)?`可选匹配 www。
`(\s)*`可选匹配空格
`((\w|\s)+\.)*`匹配一个或多个单词字符中的 0 个或多个，后跟句
`([\w\-\s]+\/)*`点 匹配一个或多个单词（或破折号或空格）中的 0 个或多个，后跟 '\'
`([\w\-]+)`url 末尾的任何剩余路径，后跟可选结尾
`((\?)?[\w\s]*=\s*[\w\%&]*)*`匹配结尾查询参数（即使有空格等）

在这里测试一下：[https ://regex101.com/r/NmVGOo/8](https://regex101.com/r/NmVGOo/8)

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2019-01-15T20:42:30.947

您真正想要做的是删除以任何一个`http://`或`https://`加上非空白字符的任意组合开头的任何字符串。这是我将如何解决它。我的解决方案与@tolgayilmaz 的解决方案非常相似

```
#Define the text from which you want to replace the url with "".
text ='''The link to this post is https://stackoverflow.com/questions/11331982/how-to-remove-any-url-within-a-string-in-python'''

import re
#Either use:
re.sub('http://\S+|https://\S+', '', text)
#OR 
re.sub('http[s]?://\S+', '', text) 
```

运行上述任一代码的结果是

```
>>> 'The link to this post is ' 
```

我更喜欢第二个，因为它更具可读性。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2018-03-13T13:39:02.297

我知道这已经得到了回答，而且迟到了，但我认为这应该在这里。这是一个匹配任何类型 url 的正则表达式。

```
[^ ]+\.[^ ]+ 
```

它可以像

```
re.sub('[^ ]+\.[^ ]+','',sentence) 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2020-08-28T11:55:25.333

为了**在 Python 中删除字符串中的**任何**URL**，您可以使用这个 RegEx 函数：

 **```
import re

def remove_URL(text):
    """Remove URLs from a text string"""
    return re.sub(r"http\S+", "", text) 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2012-07-04T16:48:26.433

也可以换个角度看...

```
from urlparse import urlparse
[el for el in ['text1', 'FTP://somewhere.com', 'text2', 'http://blah.com:8080/foo/bar#header'] if not urlparse(el).scheme] 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-09-02T14:19:28.523

**Python**中的以下正则表达式适用于***检测***文本中的 URL：

```
source_text = '''
text1
text2
http://url.com/bla1/blah1/
text3
text4
http://url.com/bla2/blah2/
text5
text6    '''

import re
url_reg  = r'[a-z]*[:.]+\S+'
result   = re.sub(url_reg, '', source_text)
print(result) 
```

**输出**：

```
text1
text2

text3
text4

text5
text6 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-08-11T09:21:34.797

我认为最通用的 URL 正则表达式模式是这样的：

```
URL_PATTERN = r'[A-Za-z0-9]+://[A-Za-z0-9%-_]+(/[A-Za-z0-9%-_])*(#|\\?)[A-Za-z0-9%-_&=]*' 
```

有一个小模块可以做你想做的事：

```
pip install mysmallutils 
```

```
from mysutils.text import remove_urls

remove_urls(text) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-09-20T07:07:15.137

一个带有正面外观的简单 .* 应该可以完成这项工作。

```
text="text1\ntext2\nhttp://url.com/bla1/blah1/\ntext3\ntext4\nhttp://url.com/bla2/blah2/\ntext5\ntext6"

req=re.sub(r'http.*?(?=\s)', " ", text)
print(req) 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2019-11-05T06:07:09.987

```
import re
s = '''
text1
text2
http://url.com/bla1/blah1/
text3
text4
http://url.com/bla2/blah2/
text5
text6
http://url.com/bla3/blah3/'''
g = re.findall(r'(text\d+)',s)
print ('list',g)
for i in g:
    print (i) 
```

出去

```
list ['text1', 'text2', 'text3', 'text4', 'text5', 'text6']
text1
text2
text3
text4
text5
text6    ​ 
```**

# ruby - ruby * 匹配字符串

> ID：11331992
> 
> 赞同：3
> 
> 时间：2012-07-04T15:32:05.583
> 
> 标签：ruby, regex, match

我需要`*`在字符串中检测

我尝试`x =~ /*/`并`x =~ "/*/"`

两种变体都不正确

请给我建议

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T15:34:05.673

`*`是正则表达式中的量词。你需要逃避它。

```
s =~ /\*/ 
```

# c# - 响应 304 - 使用 ASP.NET Web 服务的客户端缓存

> ID：11331994
> 
> 赞同：0
> 
> 时间：2012-07-04T15:32:18.523
> 
> 标签：c#, asp.net, caching, http-status-code-304, clientside-caching

我正在用 ASP.NET 4.5 开发我的应用程序。我设置了一个网络服务。Jquery 使用 GET Ajax 调用访问 Web 服务。该函数有一个 'id' 参数，并且对于每个 id 它返回不同的内容。

我想在服务器和客户端上缓存该数据。在客户端，我已经知道如何使用“CacheDuration”，但问题出在客户端。我使用 HttpFox 来获取每个响应的标题。

我在函数的开头设置了以下代码：

```
 HttpCachePolicy cache = HttpContext.Current.Response.Cache;
    cache.SetCacheability(HttpCacheability.Private);
    cache.SetExpires(DateTime.Now.AddMinutes((double)10));
    cache.SetMaxAge(new TimeSpan(0, 0, 10));

    FieldInfo maxAgeField = cache.GetType().GetField(
    "_maxAge", BindingFlags.Instance | BindingFlags.NonPublic);
    maxAgeField.SetValue(cache, new TimeSpan(0, 10, 0)); 
```

我想要做的是防止客户端再次发送相同 ID 的请求，并这样做让我们说.. 10 分钟。所以在第一次调用时会发出请求，我们得到响应 200。第二次响应头应该是 304。

现在上面的代码没有做到这一点，我想知道如何实现这一点。同样，我正在谈论返回 304 的客户端缓存，因此它希望再次访问服务器以获取相同的“id”，直到缓存过期。

我知道可以使用代码完成，所以请不要提交IIS类型的解决方案。

需要你的帮助来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:38:50.303

您将需要实现最后修改的标头

```
Response.Cache.SetLastModified(lastWriteTime.Value.ToUniversalTime()); 
```

这将允许您的客户端检查最后修改的值而不是重新获取。

理论上，您可以通过使用将上次修改时间伪造为最近的 10 分钟

```
public static DateTime Round10(this DateTime value)
{   
    var ticksIn10Mins = TimeSpan.FromMinutes(10).Ticks;

    DateTime dtReturn = (value.Ticks % ticksIn10Mins == 0) ? value : new DateTime((value.Ticks / ticksIn15Mins + 1) * ticksIn10Mins);
    if(dtReturn > DateTime.Now())
    {
        return dtReturn.AddMinutes(-10); 
    } else {
        return dtReturn;
    }
}

Response.Cache.SetLastModified(Round10(DateTime.Now); 
```

这段代码虽然未经测试

# objective-c - 应用程序来自后台“发送到已释放实例的消息”后

> ID：11331995
> 
> 赞同：0
> 
> 时间：2012-07-04T15:32:35.897
> 
> 标签：objective-c, ios, ios5

我遇到了一个奇怪的错误。我们正在使用带有 ARC 的 iOS 5。当 NSZombiesEnabled 设置为 true 并且应用程序插入调试器时，我们会收到此错误（它也正常发生，但不那么一致）

```
2012-07-04 11:25:17.161 Trivial[624:707] -[vcCurrentGames gamesLoaded:] [Line 284] Found 62 games that are my turn.
2012-07-04 11:25:17.162 Trivial[624:707] -[vcCurrentGames gamesLoaded:] [Line 285] Found 26 games that are their turn.
2012-07-04 11:25:17.169 Trivial[624:707] -[vcCurrentGames tableView:heightForHeaderInSection:] [Line 409] Height 1: 29
2012-07-04 11:25:17.171 Trivial[624:707] *** -[vcDashboard retain]: message sent to deallocated instance 0xf62c3c0 
```

我们不会在任何地方保留仪表板（ARC 不允许保留）。这仅在应用程序从后台加载后才会发生。vcCurrentGames 实际上是仪表板上的一个 UITableView。这让我更加奇怪，因为如果仪表板被释放，那么为什么它会加载 UITableView？

我已经阅读了一些关于此的内容。仪表板在应用程序委托中定义为一个属性：

```
@property (nonatomic, strong) vcDashboard *vDashboard; 
```

我试图让这个变弱，以便它会归零，但这也不起作用。有人可以告诉我为什么它被解除分配，或者为什么它在解除分配后试图保留 vcDashboard？

在应用程序委托中，我这样声明：

```
UIViewController *viewController = [[vcDashboard alloc] initWithNibName:@"vcDashboard" bundle:nil];
self.vDashboard = (vcDashboard *)viewController; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:59:48.140

初始化过程中可能出现问题。您将 分配`vcDashboard`给 a`UIViewController`然后将该控制器强制转换为适当的类。虽然理论上这应该没问题，但我以前从未见过这种模式。标准方法是：

```
self.vDashboard = (vcDashboard*) [[vcDashboard alloc] init]; 
```

假设笔尖名称是“vcDashboard”（似乎是这种情况）并且笔尖中的类也是“vcDashboard”。
*（顺便说一句，约定是大写类名。）*

此外，在应用程序进入后台后，vcDashboard 可能会被释放。在任何情况下，都不能保证当应用程序从后台返回时它仍然存在。你考虑过惰性实例化吗？

```
// in app delegate
-(vcDashboard*)vDashboard {
   if (_vcDashboard) {
     return _vcDashboard;
   }

   vcDasboard vc = [[vcDashboard alloc] init];
   // more initialization code
   _vcDashboard = vc;
   return vc;
} 
```

# jquery - Jquery Simple Hide Div但设置较小的高度

> ID：11331996
> 
> 赞同：1
> 
> 时间：2012-07-04T15:32:39.187
> 
> 标签：jquery, css

为什么这段代码试图隐藏 div 但又再次显示？使用火狐

```
$(document).ready(function(){

    $("#tool1").click(function(){
       if($('#status').height() > 100){
           $('#status').css('height','50px').show();
       }    
    });

}); 
```

感谢您到目前为止的帮助，他们都工作了。然而，这是我有 [**DEMO的确切代码**](http://jsfiddle.net/GdhS4/2/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T15:33:54.130

```
$("#tool1").click(function(){
   if($('#status').height() > 100){
     $('#status').hide(500, function() {  // hide the div
        $(this)
             .css('height','50px')  // change the height
             .show(500); // then show again
     });
   }    
}); 
```

**[演示](http://jsfiddle.net/QStkd/573/)**

### 根据上面的评论

```
$("#tool1").click(function(){
   var orig = $('#status').height(),
       target = orig == 250 ? 50 : 250;
       $('#status').animate({
           height: target      
       },1000);  
}); 
```

**[演示](http://jsfiddle.net/QStkd/575/)**

### 根据下面的评论

*   按钮在里面`#status`

**[演示内的按钮](http://jsfiddle.net/QStkd/579/)**

## 根据你的[演示](http://jsfiddle.net/GdhS4/2/)

更改您的代码，例如：

```
$(document).ready(function() {
    $("#tool1").click(function(e) {
        e.preventDefault(); // preventDefault() for pare reload
        var $statusDiv = $('#status');
        if ($statusDiv.height() > 100) {
            $statusDiv.height(50);
        }
        else {
            $statusDiv.height(250);
        }
    });
}); 
```

**[演示](http://jsfiddle.net/GdhS4/4/)**

### 笔记

***您也可以`href`***从`#tool1`

目前`#tool1`是链接标签，如果你想使用一个按钮，而不是`e.preventDefault()`从上面的代码中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:52:37.787

根据您的反馈，如果您只想在 250 和 50 之间切换状态 div 的高度，您可以使用以下命令：

```
$(document).ready(function() {
    $("#tool1").click(function() {
        var $statusDiv = $('#status');
        if ($statusDiv.height() > 100) {
            $statusDiv.height(50);
        }
        else
        {
            $statusDiv.height(250);
        }
    });
}); 
```

正如您在其他评论中概述的那样，我基于 Html：

```
<div id="status">
    <button id="tool1">
        tool 1 div
    </button>
</div> 
```

我应用了 250 高度的默认样式和视觉呈现的边框：

```
#status{
    border: 1px solid black;
    height: 250px;
} 
```

见[**演示**](http://jsfiddle.net/GdhS4/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:34:28.643

您可以通过添加禁用`show()`jQuery 动画：

```
jQuery.fx.off = true; 
```

代码行。

阅读有关此属性的[更多信息。](http://api.jquery.com/jquery.fx.off/)

# html - DIV 在浏览器中放大和缩小时移动

> ID：11331997
> 
> 赞同：4
> 
> 时间：2012-07-04T15:32:39.637
> 
> 标签：html, css

我有以下 div 结构

```
 <div id="wrapper">
     <div id="header">
          <div id="storeFinder">
                        /*  html goes here */
          </div>
     </div> 
 </div> 
```

现在当我从浏览器放大或缩小时，`"storeFinder"`向右/向左移动......

我在网上搜索过，发现需要一个包装器，`"storeFinder"`这样它就不会随着移动而移动，`<body>`并且指定`min-width`也可以解决问题。

就我而言，我已经有一个`wrapper`div 并指定了`min-width`也可以帮助我。

在这里非常糟糕地寻求帮助。

```
 #wrapper {
            background: white;
            background-position: 50% 0px;
            width: 984px;
            margin: 0px auto 0 auto;
            text-align: center;
        }

    #header {
        width: 960px;
        height: 60px;
        margin: 0 5px 2px 5px;
        text-align: left;
        background: white;
        display: block;
        position: relative;
     }

   #storefinderdropdown {
        position: absolute;
        top: 8px;
        float: none;
        width: 270px;
        height: 43px;
        border: 5px solid #F1F1EF;
        background: #F1F1EF;
        z-index: 10;
        margin: 20px 0 0 342px;
        font-size: 10px;
        font-weight: bold;
        text-indent: 3px;
        padding: 0;
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T15:42:37.030

尝试`position: relative`在父母身上放一个。这会将孩子的位置限制为根据父母而不是根据文档是绝对的。本文提供了更多详细信息和示例：[http ://css-tricks.com/absolute-positioning-inside-relative-positioning/](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:49:50.383

您正确的 CSS 代码[Working Jsfiddle here](http://jsfiddle.net/yLWeg/)

```
#wrapper {
            background: white;
            background-position: 50% 0px;
            width: 984px;
            margin: 0px auto 0 auto;
            text-align: center;
        }

    #header {
        width: 960px;
        height: 60px;
        margin: 0 5px 2px 5px;
        text-align: left;
        background: white;
        display: block;
        position: relative;
     }

   #storeFinder {
        position: absolute;
        top: 8px;
        float: none;
        width: 270px;
        height: 43px;
        border: 5px solid #F1F1EF;
        background: #F1F1EF;
        z-index: 10;
        margin: 20px 0 0 0px;
        left:342px;
        font-size: 10px;
        font-weight: bold;
        text-indent: 3px;
        padding: 0;
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T15:44:34.830

尝试这个：

```
#storefinderdropdown {
        position: absolute;
        top: 8px;
    left: 342px; /*Add This*/
        float: none;
        width: 270px;
        height: 43px;
        border: 5px solid #F1F1EF;
        background: #F1F1EF;
        z-index: 10;
        margin: 20px 0 0 0; /* Change This*/
        font-size: 10px;
        font-weight: bold;
        text-indent: 3px;
        padding: 0;
   }​ 
```

可能这对你有帮助。