# StackOverflow 问答 11920000-11920999

# java - Android：无法从 WidgetProvider 启动服务

> ID：11920004
> 
> 赞同：0
> 
> 时间：2012-08-12T05:46:25.840
> 
> 标签：java, android, android-widget, android-service

我正在尝试从我的小部件提供程序启动一项服务，以在方向更改时更新小部件。问题是服务似乎没有启动。谁能看到我做错了什么？这就是我现在代码中的全部内容。

```
public class PSWidgetProvider extends AppWidgetProvider {

    private static Handler      handler             = new Handler();
    private static Runnable     runnable;
    public static int           currentAlarmSet     = 0;

    @Override
    public void onReceive(final Context context, Intent intent) {
        // TODO Auto-generated method stub
        super.onReceive(context, intent);

    }

    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

        context.startService(new Intent(context, MyUpdateService.class));

    }

    public static class MyUpdateService extends Service
    {
        @Override
        public void onStart(Intent intent, int startId)
        {
            Log.i("MyUpdateService", "onStart");
            super.onStart(intent, startId);
            // Update the widget
            RemoteViews remoteViews = buildRemoteView(this);

            // Push update to homescreen
            pushUpdate(remoteViews);

            // No more updates so stop the service and free resources
            stopSelf();
        }

        public RemoteViews buildRemoteView(Context context)
        {
            RemoteViews updateViews = null;

            updateViews = new RemoteViews(context.getPackageName(), R.layout.widget_powersleep_layout);
            // Your code to build and update the remote view

            return updateViews;
        }

        @Override
        public void onConfigurationChanged(Configuration newConfig)
        {
            int oldOrientation = this.getResources().getConfiguration().orientation;

            if(newConfig.orientation != oldOrientation)
            {
                // Update the widget
                RemoteViews remoteViews = buildRemoteView(this);

                // Push update to homescreen
                pushUpdate(remoteViews);
            }
        }

        private void pushUpdate(RemoteViews remoteViews)
        {
            ComponentName myWidget = new ComponentName(this, PSWidgetProvider.class);
            AppWidgetManager manager = AppWidgetManager.getInstance(this);
            manager.updateAppWidget(myWidget, remoteViews);
        }

        @Override
        public IBinder onBind(Intent arg0) {
            // TODO Auto-generated method stub
            return null;
        }
    }

} 
```

我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.am.pn"
    android:versionCode="7"
    android:versionName="1.1.7" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="14" />

    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".activity.PSActivity"
            android:label="@string/title_activity_p_s" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name=".receiver.PSWidgetProvider" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
                <action android:name="android.appwidget.action.APPWIDGET_ENABLED"/> 
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/widget_config" />
        </receiver>
        <receiver
            android:name=".receiver.AlarmReceiver"
            android:process=":remote" >
        </receiver>

        <service
            android:name=".receiver.PSWidgetProvider.MyUpdateService"
            android:process=":configservice"
            android:enabled="true"
            android:exported="true"
             android:configChanges="keyboardHidden|orientation" >
        </service>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T02:38:40.193

想通了，服务名称应该已经读取`android:name=".receiver.PSWidgetProvider$MyUpdateService"` ，因为它是一个静态内部类。

# python - 是否使用 python 泡菜？

> ID：11920005
> 
> 赞同：0
> 
> 时间：2012-08-12T05:46:38.853
> 
> 标签：python, file-io, pickle

我第一次玩 Python，手头上有一个小项目，我正在玩弄它来掌握这种语言。我基本上很想知道我是否在想出一个好的解决方案，或者是否有更好的方法去做。

有一个 CSV 文件，它基本上列出了整数（或应该列出整数），每行大约三个整数，用逗号分隔。我这样做的方法是：

1.  使用 readline() 将每一行读入一个变量
2.  通过指定逗号作为分隔符来拆分变量
3.  一旦变量被拆分，我访问这个大小为 3 的数组的每个元素并进行测试以检查它是整数还是其他数据类型

这是非常直接的，从技术上讲，“完成工作”。但是，在我阅读了一些建议使用 pickle 模块来读取由整数组成的文件的 Python 文档后，我的想法发生了冲突。

[Python 文档的链接](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)

显然，如果正在读取 readline，则每行都作为字符串读入。这意味着，整数也被作为字符串读入，这里可能会丢失精度？Pickle 是一个神奇的模块，可以将所有内容转换为字符串表示形式，然后可以在不丢失精度的情况下将其不转换回原始数据类型表示形式。

恕我直言，我的程序代码在不使用 pickle 模块的情况下可以正常工作，但是为了编写好的代码，你们有什么建议以及背后的理由是什么：

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T05:48:21.343

`pickle`期望文件采用特定格式，由`pickle`模块本身生成。要读取 CSV 文件，您应该改用该[`csv`](http://docs.python.org/library/csv.html)模块。

此外，Python 支持任意长度的整数，因此无需担心它们是字符串；一旦他们被转换，你会得到每一个数字。

```
>>> int('1234567890123456789012345678901234567890')
1234567890123456789012345678901234567890L 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T05:55:42.090

如果您阅读了[`pickle`模块](http://docs.python.org/library/pickle.html)的文档，第一段很好地总结了模块的目的：

> 该`pickle`模块实现了一种基本但强大的算法，用于序列化和反序列化 Python 对象结构。

`pickle`在大多数情况下，旨在将 Python 对象转储到文件中并再次读取它们。

至于精度，CSV 和 Python pickle 文件都将数据存储为字符串，因此不会损失精度。

就个人而言，我不会使用泡菜。它可以防止您的简单数据被其他程序读取并使用图形编辑器进行编辑。如果你有复杂的字典和其他 Python 对象需要担心，pickle 将是一个很好的存储方法。然而，在这种情况下，它是矫枉过正的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T05:53:47.323

这完全取决于您的整数文件来自哪里，以及您是否希望从其他来源创建/编辑它。

Pickle 可以存储/检索 python 结构，但它不适合从其他系统交换数据，甚至可能是 python 版本。

# php - php中的图像裁剪

> ID：11920007
> 
> 赞同：0
> 
> 时间：2012-08-12T05:47:02.270
> 
> 标签：php, crop

所以我正在尝试编写一个小脚本来裁剪用户图像。我会向脚本发送一些信息（宽度、高度、对齐属性和图像 url），它应该返回裁剪的图像。但是，它不起作用...只是一个“找不到图像”符号：/这是我的脚本，有什么想法吗？

```
<?php
session_start();
header('Content-type: image/jpeg');
$w=$_GET['w'];
$h=$_GET['h'];
$x=$_GET['x'];
$y=$_GET['y'];
$filename="http://www.domain.com/".$_GET['src'];
$file_ext = substr($filename, strrpos($filename, ".") + 1);
$ext='';

if($file_ext=='jpg')
{
    $image = imagecreatefromjpeg($filename); 
}
else if ($file_ext=='gif')
{
    $image = imagecreatefromgif($filename); 
}
else if ($file_ext=='png')
{
    $image = imagecreatefrompng($filename); 
} 

$crop = imagecreatetruecolor($w,$h);
imagecopy($crop, $image, 0, 0, $x, $y, $w, $h);
imagejpeg($crop);
?> 
```

**编辑：**看起来这是错误：致命错误：在第 24 行的 domainpath/crop.php 中调用未定义的函数 imagecreatetruecolor() 我需要做些什么来加载这个函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T05:53:14.273

根据您对错误的评论，[imagecreatetruecolor()](http://php.net/manual/en/function.imagecreatetruecolor.php)确实是一个函数，但前提是您已加载 GD 库。

确保您的 PHP 安装可以访问兼容的 GD 版本，如果您刚刚添加了它，请不要忘记重新启动您的 Web 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T05:53:05.987

使用**[ImageMagick](http://www.imagemagick.org/)**，试试这个；

```
<?php
function resize_image($file, $w, $h, $crop=FALSE) {
    $img = new Imagick($file);
    if ($crop) {
        $img->cropThumbnailImage($w, $h);
    } else {
        $img->thumbnailImage($w, $h, TRUE);
    }

    return $img;
}
resize_image(‘/path/to/some/image.jpg’, 150, 150); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T06:09:53.283

我会推荐你​​使用 imagemagick 而不是 GD / GD2 lib。如果你在寻找质量，那么 imagemagick 就太适合了。有这个链接也给出了相同的比较 [http://www.rubblewebs.co.uk/imagemagick/compair.php](http://www.rubblewebs.co.uk/imagemagick/compair.php)

# iphone - CLLocation 管理器中断

> ID：11920012
> 
> 赞同：0
> 
> 时间：2012-08-12T05:48:17.167
> 
> 标签：iphone, objective-c, core-location

没有错误——编译时或运行时抛出的异常......构建良好。我做错了内存管理吗？为所有文件启用 ARC。

视图控制器.h：

```
#import <UIKit/UIKit.h>

@interface workViewController : UIViewController 
<CLLocationManagerDelegate>{

    CLLocationManager *locationManager; 

}

@property (strong, nonatomic) IBOutlet CLLocationManager *locationManager;

@end 
```

视图控制器.m：

```
#import "workViewController.h"

@interface workViewController ()

@end

@implementation workViewController
@synthesize locationManager;

-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {

    NSLog(@"i worked lol");

}
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the 
    //view, typically from a nib.

    locationManager.delegate = self;

    [locationManager startUpdatingLocation];

}

- (void)viewDidUnload
{
    [locationManager stopUpdatingLocation];
    [self setLocationManager:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

前缀.pch：

```
#import <Availability.h>

#ifndef __IPHONE_5_0
#warning "This project uses features only available in iOS SDK 5.0 and later."
#endif

#ifdef __OBJC__
    #import <UIKit/UIKit.h>
    #import <Foundation/Foundation.h>
    #import <CoreLocation/CoreLocation.h>
#endif 
```

无论如何，这段代码在我第一次构建应用程序时工作了一次。我一直在为此苦苦挣扎，主要是它有时会工作，有时在我重新启动计算机之前根本无法工作。我在做内存管理完全错了吗？

这让我感到困惑，因为我确保我逐行遵循教程......

应用程序在调用委托方法的地方中断：

```
 -(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation { 
```

它只是说 thread1 断点...我不确定如何读取调试器（它只是提供了一些我不知道该怎么处理的十六进制...）

无论如何，我很想知道我做错了什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T05:57:36.207

尝试初始化您的 CLLocationManager 对象。一般来说，你选择这样做的方式很奇怪。通常使用核心位置，您将创建一个实现 didUpdateToLocation 和 didFailWithError 的对象，创建一个委托协议，并在您需要该位置的主线程中初始化该对象，然后调用 startUpdatingLocation。

# javascript - Javascript：单击时如何使自动建议的结果移动到输入字段中

> ID：11920018
> 
> 赞同：0
> 
> 时间：2012-08-12T05:50:34.120
> 
> 标签：javascript, jquery, autosuggest

这是索引文件的代码

```
 <!doctype html>
    <html lang="en">
    <head>
    <meta charset="utf-8">
    <title> tutorial</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    </head>
    <body>
    Search: <input id="search" type="text"/>
    <div id="search_results">
    </div>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/search.js"></script>
    </body>
    </html> 
```

这是我的 search.js 文件，这是我需要帮助的地方。我需要帮助弄清楚“”标记中包含哪些值。我试过在每个组合中加入“search_results”和“search”，但它不起作用。我是 jquery 的新手，所以任何帮助都将不胜感激。谢谢！

```
 $('#search').keyup(function() {
var search_term = $(this).val();
$.post('php/search.php', { search_term: search_term }, function(data) {
    $('#search_results').html(data);

    $('').click(function(){
    var result_value = $(this).text();
    $('').val('', result_value);
    $('').html('');

    });
});
     }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T06:05:29.507

这取决于您的结果如何。如果您的结果包含如下内容：

```
 <div id="search_results">
        <ul>
            <li>Option 1</li>        
            <li>Option 2</li>        
            <li>Option 3</li>        
            <li>Option 4</li>        
            <li>Option 5</li>        
            <li>Option 6</li>        
        </ul>
    </div>​ 
```

然后您单击处理程序将更改为：

```
 $('#search_results > ul > li').each(function () {
        $(this).click(function () {
            $('#search').val($(this).html());
        });            
    }); 
```

演示：http: [//jsfiddle.net/Srj5Z/](http://jsfiddle.net/Srj5Z/)

# java - 为什么 Collat z 猜想程序不适用于 Java 中的大整数

> ID：11920019
> 
> 赞同：1
> 
> 时间：2012-08-12T05:51:42.353
> 
> 标签：java, math, integer-overflow, collatz

这是我为在 Java 上模拟 Collat​​z 猜想而编写的一个程序：

```
import java.util.*;
public class Collatz {
public static void main(String args[]){
    Scanner raj= new Scanner(System.in);
    int n;
    int k=0;
    System.out.print("n? ");
    n = raj.nextInt();
    while(n > 1){
        if(n%2 ==1){
            n=3*n+1;
            System.out.println(n);
            k++;
        }
        if(n%2==0){
            n=n/2;
            System.out.println(n);
            k++;
        }

    }
    System.out.print("It took " + k + " iterations!");
}

} 
```

当我输入 n=6 时，我得到

> 3 10 5 16 8 4 2 1 需要 8 次迭代！

但是当我输入 n= 63728127 时，我得到

> 191184382 95592191 286776574 1433388287 430164862 215082431 645247294 322623647 967870942

什么地方出了错？为什么？我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T05:55:33.897

这是整数溢出的经典案例。原始整数在 Java 中的范围有限。如果必须处理大整数，解决方案是始终使用[BigInteger之类的东西。](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html)

顺便说一句，如果 Java 像几乎所有其他现代语言一样支持运算符重载，事情就会容易得多。

```
import java.util.*;
import java.math.BigInteger;

public class Collatz {
    public static void main(String args[]){
        Scanner raj= new Scanner(System.in);
        int k=0;
        System.out.print("n? ");

        BigInteger n = BigInteger.valueOf(raj.nextLong());

        while(n.compareTo(BigInteger.ONE) > 0){
            if(n.testBit(0)){
                n = n.multiply(BigInteger.valueOf(3));
                n = n.add(BigInteger.ONE);
                System.out.println(n);
                k++;
            }
            else {
                n = n.divide(BigInteger.valueOf(2));
                System.out.println(n);
                k++;
            }
        }
        System.out.print("It took " + k + " iterations!");
    }
} 
```

# php - PHP Parse Pidgin 表情包

> ID：11920023
> 
> 赞同：0
> 
> 时间：2012-08-12T05:52:07.923
> 
> 标签：php, parsing, replace, emoticons, pidgin

我已经下载了这个表情包的大列表，谢天谢地，它们带有表情代码，所以我不必制作所有这些（比如`smile`is`:)`和`:-)`）。这是它所在文件格式的示例块。

```
smile.png           :)      :-)
smile-big.png       :D      :d :-D :-d
wink.png            ;)      ;-)
shock.png           :-O     :-o :O :o
tongue.png          :P      :p :-P :-p
glasses-cool.png    (H)     (h)
angry.png           :@      :-@
embarrassed.png     :$      :-$
confused.png        :S      :s :-S :-s
sad.png             :(      :-(
crying.png          :'(
neutral.png         :|      :-|
devil.png           (6)
angel.png           (A)     (a)
love.png            (L)     (l)
love-over.png       (U)     (u)
msn.png             (M)     (m)
cat.png             (@)
dog.png             (&)
moon.png            (S)
star.png            (*)
film.png            (~) 
```

但是，如果不修改此列表或以任何方式重新键入它，我是否能够通过一个字符串并将出现的符号替换为围绕图像名称的图像标记。因此，将表情定义块作为字符串，是否有任何功能可以像`convert_emotes($text, $emote_definitions);`转

```
Hello world :) :D this is a heart emote: (L) and here's a dog (&) 
```

至

```
Hello world <img src="smile.png" /> <img src="smile-big.png" /> this is a heart emote: <img src="love.png" /> and here's a dog <img src="dog.png" /> 
```

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:31:39.573

不是一个很好的代码，但它可能有效：

```
<?php
$patterns = array();
$replacements = array();

foreach (split("\n", file_get_contents("file")) as $line){
    $l = preg_split("/\s+/",$line);
    for($i = 1; $i < count($l); $i++){
        $patterns[] = $l[$i];
        $replacements[] = "<img src='{$l[0]}' />";
    }
}

echo str_replace($patterns, $replacements, "Hello world :) :D this is a heart emote: (L) and here's a dog (&)"); 
```

# php - 用 cURL 替换 file_get_contents()？

> ID：11920026
> 
> 赞同：2
> 
> 时间：2012-08-12T05:52:24.620
> 
> 标签：php, curl, file-get-contents

我不想使用此功能，因为出于安全原因，它在某些服务器上不可用，如何将 file_get_contents() 替换为 cURL ？

下面的行导致我的服务器出现问题：

```
$response = file_get_contents('http://images.google.com/images?hl=en&q=' . urlencode ($query) . '&imgsz=' . $size . '&imgtype=' . $type . '&start=' . (($page - 1) * 21)); 
```

我怎样才能用另一条使用 curl 的线路替换它，以便它可以在每台服务器上工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-12T05:54:36.007

这是您可以使用的干净功能

```
$response = get_data('http://images.google.com/images?hl=en&q=' . urlencode ($query) . '&imgsz=' . $size . '&imgtype=' . $type . '&start=' . (($page - 1) * 21));

function get_data($url)
{
  $ch = curl_init();
  $timeout = 5;
  curl_setopt($ch,CURLOPT_URL,$url);
  curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
  curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
  $data = curl_exec($ch);
  curl_close($ch);
  return $data;
} 
```

# android - 使用 SimpleCursorAdapter 将图像从文件插入到 ListView

> ID：11920027
> 
> 赞同：0
> 
> 时间：2012-08-12T05:52:39.390
> 
> 标签：android, image, simplecursoradapter

如何使用 SimpleCursorAdapter 从文件中添加图像而不是作为 blob？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T06:34:26.290

您将不得不使用[viewbinder](http://developer.android.com/reference/android/support/v4/widget/SimpleCursorAdapter.ViewBinder.html)，在绑定列表的每个元素之前，您将获得一个回调

> setViewValue(View view, Cursor cursor, int columnIndex)

根据 columnindex，您可以设置图像，然后仅在这种情况下返回 true。在所有情况下，您都必须返回 false，以便 SimplecursorAdapter 将填充适当的数据

# opencv - OpenCV：用于 lbp 级联的行人训练数据

> ID：11920028
> 
> 赞同：0
> 
> 时间：2012-08-12T05:53:02.027
> 
> 标签：opencv, haar-wavelet

我在哪里可以找到训练数据或完整的用于行人检测的 lbp 级联？

如果有一个haarcascades，它应该是可以用来训练lbp cascades的训练数据，我想。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T10:26:23.330

[加州理工学院](http://www.vision.caltech.edu/Image_Datasets/CaltechPedestrians/)最广泛使用的行人检测数据集

也看[这里](http://www.gavrila.net/Research/Looking_at_People/looking_at_people.html)

# zend-framework - 使用zend框架从多个表中获取数据

> ID：11920031
> 
> 赞同：1
> 
> 时间：2012-08-12T05:53:34.147
> 
> 标签：zend-framework

我正在尝试使用 Zend Framework 构建 SQL 查询。这是我的 SQL 查询语句：

```
 SELECT of.order_Id, of.subtotal, of.status, c.name
    FROM order_form of, customer c
    WHERE c.customer_Id = of.customer_Id 
```

但是，当我尝试在 Zend Framework 中实现它时，会显示一条错误消息。这是我使用 Zend Framework 的查询语句。

```
$query = $db->select()
            ->from(array('c' => 'customer'), 'name')
            ->where('c.customer_Id = ?', $customer_Id)
            ->join('order_form', 'order_form.customer_Id = customer.customer_Id', array('order_Id', 'subtotal', 'status'))
            ->order("order_form.order_Id ASC"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:29:26.807

我的部分有错误。只需在子句中更改`customer.customer_Id`为`c.customer_Id``join`

```
$query = $db->select()
            ->from(array('c' => 'customer'), 'name')
            ->where('c.customer_Id = ?', $customer_Id)
            ->join('order_form', 'order_form.customer_Id = c.customer_Id', array('order_Id', 'subtotal', 'status'))
            ->order("order_form.order_Id ASC"); 
```

给您造成的任何不便，请原谅。

# django - 如何将数据保存在 Django 中 UserProfile 的后端/数据库中

> ID：11920033
> 
> 赞同：0
> 
> 时间：2012-08-12T05:53:46.253
> 
> 标签：django, django-models, django-forms, django-views, django-users

我的意图是使用 Django 的 User 模型和 UserProfile 模型（基本上添加有关用户的详细信息/字段）创建用户配置文件。然后我想创建一个注册表单，要求填写包含在用户模型和用户配置文件模型中的字段（即两个模型的字段的单个表单）。

现在发生的事情是在将必要的数据输入我的表单后，视图通过并且服务器确实创建了一个 User 对象，甚至将它链接到一个 UserProfile 对象（据我所知，这种链接发生是因为在models.py 类）。但是，没有添加有关 UserProfile 的信息（在本例中为“位置”字段），而且对于我的生活，我无法弄清楚为什么。

我有以下models.py

```
class UserProfile(models.Model):
  # This field is required.
  user = models.ForeignKey(User, unique=True, related_name="connector")
  location = models.CharField(max_length=20, blank=True, null=True)

def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

我有以下forms.py（其中UserForm基于Django定义的用户模型）

```
class UserForm(ModelForm):
    class Meta:
        model = User

class UserProfileForm(ModelForm):
    class Meta:
        model = UserProfile 
```

我有以下views.py

```
@csrf_protect
def register(request):
    if request.method == 'POST':
        form1 = UserForm(request.POST)
        form2 = UserProfileForm(request.POST)
        if form1.is_valid() and form2.is_valid():
            #create initial entry for user
            username = form1.cleaned_data["username"]
            password = form1.cleaned_data["password"]
            new_user = User.objects.create_user(username, password)
            new_user.save()

            #create entry for UserProfile (extension of new_user object)      
            profile = form2.save(commit = False)
            profile.user = new_user
            profile.save()
            return HttpResponseRedirect("/books/")
    else:
        form1 = UserForm()
        form2 = UserProfileForm()
    c = {
        'form1':form1,
        'form2':form2,
    }
    c.update(csrf(request))
    return render_to_response("registration/register.html", c) 
```

我有以下 register.html

```
<form action="/accounts/register/" method="post">{% csrf_token %}
   <p style="color:red"> {{form.username.errors}}</p>
    {{ form1.as_p }}
    {{ form2.as_p }}
    <input type="submit" value="Create the account">
</form> 
```

谁能看到我做错了什么？有一个更好的方法吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:01:38.797

`<form></form>` 您的问题是因为您需要使用[多种形式](https://docs.djangoproject.com/en/dev/ref/forms/api/#django.forms.Form.prefix)，因此您的代码如下所示：

```
@csrf_protect
def register(request):
    if request.method == 'POST':
        form1 = UserForm(request.POST, prefix = "user")
        form2 = UserProfileForm(request.POST, prefix = "profile")
        if form1.is_valid() and form2.is_valid():
            #create initial entry for user
            username = form1.cleaned_data["username"]
            password = form1.cleaned_data["password"]
            new_user = User.objects.create_user(username, password)
            new_user.save()

            #create entry for UserProfile (extension of new_user object)      
            profile = form2.save(commit = False)
            profile.user = new_user
            profile.save()
            return HttpResponseRedirect("/books/")
    else:
        form1 = UserForm(prefix = "user")
        form2 = UserProfileForm(prefix = "profile")
    c = {
        'form1':form1,
        'form2':form2,
        }
    c.update(csrf(request))
    return render_to_response("registration/register.html", c) 
```

从 UserProfileForm中排除*用户字段使用**exclude*

```
class UserProfileForm(ModelForm):
    class Meta:
        model = UserProfile
        exclude = ('user',) 
```

如果您手动创建配置文件，则不需要使用*post_save*信号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T11:51:55.263

当您在视图中保存配置文件时，您不需要`post_save`信号。可能，它被覆盖了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T07:53:03.090

在我看来，没有必要使用 django 信号。

如果你给我完整的项目源（如果可能的话）我会解决你的问题

不推荐您使用的将两个单独的表单嵌入到一个表单中的方法，它并不漂亮。但是如果您说您测试了通过的数据并且它们是正确的，请先尝试以下代码。

我改变了保存用户和用户配置文件对象的方式。提醒我。

从模型中删除信号：

```
class UserProfile(models.Model):
      user = models.ForeignKey(User, unique=True, related_name="connector")
      location = models.CharField(max_length=20, blank=True, null=True) 
```

对于视图：

```
@csrf_protect
def register(request):
      if request.method == 'POST':
          form1 = UserForm(request.POST)
          form2 = UserProfileForm(request.POST)
          if form1.is_valid() and form2.is_valid():
               #create initial entry for user
               username = form1.cleaned_data["username"]
               password = form1.cleaned_data["password"]
               new_user = User()
               new_user.username = username
               new_user.set_password(password)
               new_user.save()

               profile = UserProfile()
               profile.user = new_user
               profile.save()
               return HttpResponseRedirect("/books/")
      else:
          form1 = UserForm()
          form2 = UserProfileForm()
      c = {
               'form1':form1,
               'form2':form2,
              }
      c.update(csrf(request))
      return render_to_response("registration/register.html", c) 
```

# objective-c - 不在 Objective-C 中分配异步对象？

> ID：11920040
> 
> 赞同：2
> 
> 时间：2012-08-12T05:54:39.767
> 
> 标签：objective-c, asynchronous, automatic-ref-counting, objective-c-blocks, clgeocoder

有没有理由不这样做：

```
[[[CLGeocoder alloc] init] geocodeAddressStr... 
```

而不是这种方式：

```
CLGeocoder *geocoder = [[CLGeocoder alloc] init];
[geocoder geocodeAddressStr... 
```

因为completionHandler 是一个块，并且不再使用geocoder 变量，所以最好不要创建它。还是我忽略了内存管理部门的事情？我正在使用ARC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T11:23:35.893

我总是像你的第二个例子那样分解这些东西，主要是为了可读性。我的理解是，无论您是否分配它，编译器都会将它们视为完全一样，因为它必须创建对象才能使用它。我更愿意看到变量的名称可以清楚地表明意图是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T06:39:57.950

您可以使用上面显示的第一种方法。内存管理指南规定，如果您在内存 [...alloc] init] 中创建了一个对象，您应该负责释放它。但是，如果您使用的是 ARC，则无需发布任何内容。调用后：

```
[[[CLGeocoder alloc] init] geocodeAddressStr... 
```

创建的对象将在必要时由系统释放。丢失新创建的对象应该没有问题，正如您在上面所说的那样，将不再使用该变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T06:20:26.370

无需将语句分隔成两行。

您将需要创建`CLGeocoder`-- 这是您正在调用的实例方法。但是，您可能不需要*坚持下去*。

ARC 和块能够捕获和保留 objc 变量——除了 C 和 C++ POD 以及 C++ 可复制构造类型。

具体来说，如果是异步的，则该块`CLGeocoder`在`geocodeAddressStr...`. 如果块是同步的，那么它可能不需要捕获堆栈变量（不需要块副本） - 它可以按原样使用变量，从线程的堆栈中引用它们。

当程序员没有意识到何时需要显式复制块时，通常会出现问题。

# php - 找出哪些项目已被删除？

> ID：11920041
> 
> 赞同：1
> 
> 时间：2012-08-12T05:55:15.043
> 
> 标签：php, mysql

假设我们运行具有动态条件的查询，该查询是从用户输入启动的。我们想删除一些项目。

比如（只是一个随机的例子）：

```
DELETE FROM pictures
WHERE article = 10
    AND id >= 12
    AND id <= 25
    AND user_privelege = 8 
```

有什么方法可以检索哪些行已被删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T05:57:05.333

不可以。您需要事先使用完全相同的`WHERE`子句从表中进行选择。

# android - 如何在 Android 中使用蓝牙服务器套接字 RFCOMM 接收数据？

> ID：11920043
> 
> 赞同：0
> 
> 时间：2012-08-12T05:55:32.913
> 
> 标签：android, sockets, bluetooth, rfcomm

我正在尝试制作一个 android 应用程序来接收和显示来自配对蓝牙设备的数据。我有一个工作 python 代码，我想在 android 中编写类似的代码。我可以在 Android 手机上运行 Python，但没有 UI！代码使用 RFCOMM 找到端口，然后使用套接字连接。蓝牙设备的地址为 XX:XX:XX:XX:XX:XX 格式，我不知道如何为 android 编写代码。如果你帮我！谢谢！这是我的python代码：

```
from bluetooth import *
from sys import stdout

server_address = "XX:XX:XX:XX:XX:XX"
#port = get_available_port( RFCOMM )
try:
  my=sock
except:
  sock=BluetoothSocket( RFCOMM )
  sock.connect((server_address, 1))
  print "connected"
else:
  print "---"
  data=0
while 1:
data= sock.recv(1)
if data== '':
  print "Socket broken"
else:
  data= data
  print "received"
  print text 

sock.close()
sock=None
del sock 
```

这个android代码可以帮助吗？

```
String deviceAddress = "XX:XX:XX:XX:XX:XX";
adapter = BluetoothAdapter.getDefaultAdapter();

BluetoothDevice device = _adapter.getRemoteDevice(deviceAddress);

try {
    socket = device.createRfcommSocketToServiceRecord(BluetoothSerialUuid);
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

try {
    socket.connect();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T07:36:30.653

您可以在 SDK 中找到此示例的完整源代码：

`<sdk>/platforms/android-<version>/samples/`

哪个有名字`BLUETOOTH CHAT`看到那个代码并过滤你想要的东西:)

# c# - 通过字符串名称获取属性值

> ID：11920044
> 
> 赞同：3
> 
> 时间：2012-08-12T05:55:41.480
> 
> 标签：c#, c#-4.0, reflection, static

请考虑这个类：

```
public static class Age
{    
    public static readonly string F1 = "18-25";
    public static readonly string F2 = "26-35";
    public static readonly string F3 = "36-45";
    public static readonly string F4 = "46-55";
} 
```

我想写一个函数来获取“F1”并返回“18-25”。例如

```
private string GetValue(string PropertyName)
.... 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-12T06:04:53.560

您可以简单地使用`SWITCH`语句来执行上述任务：

```
public static string GetValue(string PropertyName)
{
    switch (PropertyName)
    {
        case "F1":
            return Age.F1;
        case "F2":
            return Age.F2;
        case "F3":
            return Age.F3;
        case "F4":
            return Age.F4;
        default:
            return string.Empty;
    }
} 
```

使用反射，您可以这样做：

```
public static string GetValueUsingReflection(string propertyName)
{
    var field = typeof(Age).GetField(propertyName, BindingFlags.Public | BindingFlags.Static);
    var fieldValue = field != null ? (string)field.GetValue(null) : string.Empty;
    return fieldValue;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-12T06:07:20.880

我做了一些测试，对于这种情况，这将起作用：

```
public static string GetValue(string PropertyName)
{
   return typeof(Age).GetField(PropertyName).GetValue(typeof(Age));
} 
```

似乎静态常量的工作方式有点不同。但以上内容适用于 OQ 中的课程。

对于更一般的情况，请参阅[此问题](https://stackoverflow.com/questions/451453/how-to-get-a-static-property-with-reflection)。

* * *

这是通过反射完成的：

```
public static string GetValue(string PropertyName)
{
   return Age.GetType().GetProperty(PropertyName).ToString();
} 
```

注意，GetProperty() 可以返回 null，如果你传入“F9999”会崩溃

我没有测试过，你可能需要这个：

```
public static string GetValue(string PropertyName)
{
   return Age.GetType().GetProperty(PropertyName,BindingFlags.Static).ToString();
} 
```

* * *

一般情况作为评论：

```
public static string GetValue(object obj, string PropertyName)
{
   return obj.GetType().GetProperty(PropertyName,BindingFlags.Static).ToString();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T08:10:52.423

在 Linq 中使用反射：

```
 private string GetValue(string propertyName)
 {
       return typeof(Age).GetFields()
           .Where(field => field.Name.Equals(propertyName))
           .Select(field => field.GetValue(null) as string)
           .SingleOrDefault();
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T06:14:23.903

你应该使用类[Type](http://msdn.microsoft.com/en-us/library/system.type.aspx)。您可以使用该功能获得您正在使用的课程`getType()`。拥有类型后使用[GetProperty](http://msdn.microsoft.com/en-us/library/kz0a8sxy.aspx)函数。你会得到一个[propertyinfo](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.aspx)类。这个类有一个[getValue](http://msdn.microsoft.com/en-us/library/b05d59ty.aspx)函数。此值将返回属性的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T06:37:03.240

试试这个并享受：

```
public static string GetValueUsingReflection(string propertyName)
    {
        var field = Type.GetType("Agenamespace" + "." + "Age").GetField(propertyName, BindingFlags.Public | BindingFlags.Static);
        var fieldValue = field != null ? (string)field.GetValue(null) : string.Empty;
        return fieldValue;
    } 
```

Agenamespace 是声明 Age 类的命名空间。

# mysql - 向moodle数据库添加新表

> ID：11920046
> 
> 赞同：5
> 
> 时间：2012-08-12T05:55:55.100
> 
> 标签：mysql, moodle

我只想知道向`moodle`数据库添加新表是否可以，或者我应该为此创建一个新数据库？我需要一个表来在一个表中保存一个唯一的 id 和一个令牌，并在另一个表中保存客户端的 IP 地址、客户端的 MAC 地址和计算机名称。（以及存储这些的最佳数据类型是什么？）我只是想知道穆勒把这些东西保存在那里的桌子上？然后对我来说很容易。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T03:15:02.127

这个问题不清楚，你还没有提到你将如何填写这些额外的表格。我不确定如何从 HTTP 请求/响应中获取 MAC 地址。

Moodle 有一个内置的日志记录机制，可以跟踪访问用户的 IP 地址。它还有一个唯一的 id（主键）和用户 id。

如果要添加新表，可以通过插件（块、模块或本地插件）添加。Moodle 还有一个强大的事件 API 允许您触发一些操作而无需实际修改核心代码。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-01T20:04:38.997

插件表的标准做法是使用基于插件路径的表名。因此，如果插件位于本地/客户端记录器中，则安全名称将是 {local_clientlogger}。表应该由 /db/install.xml 和 /db/upgrade.php 创建

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-23T23:07:22.463

是的，您可以在moodle 的数据库中添加一个表，但是我和moodle 开发人员建议您遵循一些非常严格的规则。

不要编辑现有的 moodle 代码。Moodle 是基于一个核心，不应该被编辑，因为你的代码可能与系统的新版本冲突。因此，如果您遵守规则，您的代码将适用于其他 moodle 版本。

建议在 moodle 中开发你的东西，创建一个包含你想要的额外东西的插件。我建议您在 /local/yourplugin 中创建它。

在此内部，您将需要创建文档中列出的一些文件。我会说一下文件 local/yourplugin/db/ **install.xml**。

关于moodle插件的更多数据 [https://docs.moodle.org/dev/Blocks](https://docs.moodle.org/dev/Blocks) [https://docs.moodle.org/dev/Plugin_files](https://docs.moodle.org/dev/Plugin_files)

在此文件中，您将定义数据库的一部分。因此，您可以说将存在一个包含字段的新表。

关于 XMLDB（moodle 定义数据库结构的方式） [https://docs.moodle.org/dev/XMLDB_Documentation](https://docs.moodle.org/dev/XMLDB_Documentation)

准备好所有文件后，moodle 将安装您的插件并生成您的表格。

如果您不想遵守规则 B-)。您可以找到一个模块并编辑 db/upgrade.php，并定义一个新结构。

# java - DelimitedLineTokenizer 制表符

> ID：11920052
> 
> 赞同：5
> 
> 时间：2012-08-12T05:57:01.137
> 
> 标签：java, tabs

我该如何解决这个问题：

```
<bean id=" productLineTokenizer" class="org.springframework.batch.item.file.transform.DelimitedLineTokenizer">
        <property name="delimiter" value="\t"/> 
```

造成的：

```
java.lang.IllegalArgumentException: 
String [\t] with length 2 cannot be converted to char type 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T16:05:54.383

你需要使用一个常量

```
<property name="delimiter">
    <util:constant static-field="org.springframework.batch.item.file.transform.DelimitedLineTokenizer.DELIMITER_TAB"/>
</property> 
```

# vb.net - VB.Net LINQ 链接两个数据表并显示所有列

> ID：11920060
> 
> 赞同：1
> 
> 时间：2012-08-12T06:00:35.730
> 
> 标签：vb.net, linq

我在这里有一个 LINQ 句子的小问题。基本上，我尝试使用 LINQ 加入两个数据表，但我不想指定将在结果中显示的列。

我想要结果中的所有列而不在 LINQ 中指定它们。或者一些动态选择列的方法？

任何的想法？

代码：

```
Dim vDT1 As New DataTable
    vDT1.Columns.Add("Key")
    vDT1.Columns.Add("Data1")
    vDT1.Columns.Add("Data2")

    vDT1.Rows.Add({"01", "DATA1_AAAA", "DATA2_AAAA"})
    vDT1.Rows.Add({"02", "DATA1_BBBB", "DATA2_BBBB"})
    vDT1.Rows.Add({"03", "DATA1_CCCC", "DATA2_CCCC"})
    vDT1.Rows.Add({"04", "DATA1_DDDD", "DATA2_DDDD"})

    Dim vDT2 As New DataTable
    vDT2.Columns.Add("Key")
    vDT2.Columns.Add("Data3")
    vDT2.Columns.Add("Data4")

    vDT2.Rows.Add({"01", "DATA3_AAAA", "DATA4_AAAA"})
    vDT2.Rows.Add({"02", "DATA3_BBBB", "DATA4_BBBB"})
    vDT2.Rows.Add({"03", "DATA3_CCCC", "DATA4_CCCC"})
    vDT2.Rows.Add({"04", "DATA3_DDDD", "DATA4_DDDD"})

    Dim vLINQ = From DT1 In vDT1.AsEnumerable
                        Join DT2 In vDT2.AsEnumerable
                        On DT1.Field(Of String)("Key") Equals DT2.Field(Of String)("Key")
                        Select Key = DT1.Field(Of String)("Key"), Data1 = DT1.Field(Of String)("Data1"), Data2 = DT1.Field(Of String)("Data2"),
                            Data3 = DT2.Field(Of String)("Data3"), Data4 = DT2.Field(Of String)("Data4") 
```

*** 我想跳过 LINQ 中的“SELECT”

这是结果： ![在此处输入图像描述](../Images/de3d1082793e41e952b2194bb039d961.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T06:06:58.517

没有`select`. 您应该在 linq 查询中有`select`or`group by`子句。

```
Dim vLINQ = (From DT1 In vDT1.AsEnumerable
            Join DT2 In vDT2.AsEnumerable
            On DT1.Field(Of String)("Key") Equals DT2.Field(Of String)("Key")
            Select new with
            {
               .Key = DT1.Field(Of String)("Key"), 
               .Data1 = DT1.Field(Of String)("Data1"), 
               .Data2 = DT1.Field(Of String)("Data2"),
               .Data3 = DT2.Field(Of String)("Data3"), 
               .Data4 = DT2.Field(Of String)("Data4")
            }).ToList() 
```

现在 vLINQ 是一个 List(of annonymousType) ，它具有键 Data1..Data4 作为属性，可以用作

```
//sorry for C# code
foreach(var l in vLinq)
{
   console.writeline(l.Key);
   console.writeline(l.Data1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T02:14:27.527

为了达到这个要求，我使用了 LINQ 动态语句。

[LINQ 动态](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

# jquery - 通过 css 类名获取网格视图行数

> ID：11920061
> 
> 赞同：1
> 
> 时间：2012-08-12T06:00:40.467
> 
> 标签：jquery

我想使用 Jquery 获取 gridview 行数，但行数必须仅是那些在侧网格中具有 css 类名称“R1”或“R2”的行。

请建议我如何获得它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T06:28:07.660

试试这个：

```
var len = $('#gvCartItems').find('.R1, .R2').length; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T06:05:13.170

```
var a = $('#gvCartItems .r1').length;
var b = $('#gvCartItems .r2').length;
var c = a+b;
alert(c); 
```

是我想的一种方式。

# javascript - addEvent 给出空事件对象

> ID：11920063
> 
> 赞同：1
> 
> 时间：2012-08-12T06:01:06.187
> 
> 标签：javascript, internet-explorer, events, internet-explorer-8, addeventlistener

我正在尝试在我的一个项目中获得 IE8 支持，并且很难将 addEventListener 转换为 addEvent （来自：[http](http://ejohn.org/projects/flexible-javascript-events/) ://ejohn.org/projects/flexible-javascript-events/ ）

因此，使用他的代码，我有一个事件设置，例如（[来源此处](https://github.com/OscarGodson/EpicEditor/blob/dc5daed944c518bb7dcebc5d37de1990cddd6865/epiceditor/js/epiceditor.js#L854-L856)）：

```
_addEvent(eventableIframes[i], 'mousemove', function (e) {
  utilBarHandler(e);
}); 
```

但是，当它到达时`utilBarHandler`，“ `e`”是`null`并且 IE8[在第 783 行](https://github.com/OscarGodson/EpicEditor/blob/dc5daed944c518bb7dcebc5d37de1990cddd6865/epiceditor/js/epiceditor.js#L783)给我一个“需要对象”错误。我假设所需的对象是事件对象，因为当我在函数顶部注销时它实际上`e`只是[null](https://github.com/OscarGodson/EpicEditor/blob/dc5daed944c518bb7dcebc5d37de1990cddd6865/epiceditor/js/epiceditor.js#L777)。

此外，该循环中需要事件对象的每个事件都会发生这种情况，例如`shortcutHandler`和`shortcutUpHandler`。

更新：以防万一人们错过它，这篇文章有一堆突出显示特定行的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T06:15:05.577

并非所有版本的 IE 都将事件作为参数传递。它在`window.event`。您可以将此添加到您的 _addEvent shim 或事件处理程序中：

```
 e = e || window.event 
```

如：

```
_addEvent(eventableIframes[i], 'mousemove', function (e) {
      e = e || window.event;
      utilBarHandler(e);
}); 
```

这将适用于 IE 或其他。

这是跨浏览器事件处理的两种风格，可确保在 IE 中正确设置`event`和指针：`this`

```
// add event cross browser
function addEvent(elem, event, fn) {
    if (elem.addEventListener) {
        elem.addEventListener(event, fn, false);
    } else {
        elem.attachEvent("on" + event, function() {
            // set the this pointer same as addEventListener when fn is called
            return(fn.call(elem, window.event));   
        });
    }
}

// refined add event cross browser
function addEvent(elem, event, fn) {
    // avoid memory overhead of new anonymous functions for every event handler that's installed
    // by using local functions
    function listenHandler(e) {
        var ret = fn.apply(this, arguments);
        if (ret === false) {
            e.stopPropagation();
            e.preventDefault();
        }
        return(ret);
    }

    function attachHandler() {
        // set the this pointer same as addEventListener when fn is called
        // and make sure the event is passed to the fn also so that works the same too
        var ret = fn.call(elem, window.event);   
        if (ret === false) {
            window.event.returnValue = false;
            window.event.cancelBubble = true;
        }
        return(ret);
    }

    if (elem.addEventListener) {
        elem.addEventListener(event, listenHandler, false);
    } else {
        elem.attachEvent("on" + event, attachHandler);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:09:17.973

@jfriend00 建议的快速而肮脏的修复`e = e || window.event`方法是 99%，但我仍然遇到问题。经过更多的摆弄，我找到了答案。我不想要`window.event`，因为它是 iframe。相反，我想要`iframeElement.contentWindow`. 像这样将它添加到我的回调中就可以了：

```
_addEvent(eventableIframes[i], 'mousemove', function (e) {
  // self.iframeElement == <iframe>
  e = e || self.iframeElement.contentWindow;
  utilBarHandler(e);
}); 
```

# cakephp - 如何从插件控制器调用 CakePHP 基础应用程序？

> ID：11920066
> 
> 赞同：1
> 
> 时间：2012-08-12T06:02:02.910
> 
> 标签：cakephp

我有一个插件，并添加与用户模型（基础应用程序）的关系在插件视图中，我想根据 user_id 引用用户的详细信息，

我从插件中获取 user_id，但 url 是 pluginName/users/view/1

```
<?php echo $this->Html->link($event['User']['username'], array('controller' => 'users', 'action' => 'view', $event['User']['id'])); ?> 
```

如何重定向到 App/users/view/1 ？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T06:03:48.663

您`plugin => false`在 url 数组中设置它以使用“基本”应用程序。

```
<?php echo $this->Html->link($event['User']['username'], array('plugin' => false, 'controller' => 'users', 'action' => 'view', $event['User']['id'])); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:15:11.543

你必须使用`'plugin'=>null`

```
 <?php echo $this->Html->link($event['User']['username'], array('plugin'=>null,'controller' => 'users', 'action' => 'view', $event['User']['id'])); ?> 
```

# javascript - 在以下代码中添加另一个条件以不接受“0”

> ID：11920067
> 
> 赞同：0
> 
> 时间：2012-08-12T06:03:15.330
> 
> 标签：javascript

我编写了以下 javascript 代码，现在我想添加另一个条件/更改现有条件以不接受零。

```
 if ( !onlyNumbers($(".vo_head_spots_available:eq(" + i + ")").val())&& $(".vo_head_spots_available:eq(" + i + ")").val().toUpperCase()!="U")
             {
                   $('#msg_f').html('Please enter the # spots available for your Participants. If unlimited, enter U.').show();
                   $(".vo_head_spots_available:eq(" + i + ")").css('background-color', '#fdd');
                                                        isValid = false;
             }
      else
             {
                  $(".vo_head_spots_available:eq(" + i + ")").val($(".vo_head_spots_available:eq(" + i + ")").val().toUpperCase());
                  $('#msg_f').html('').hide();
                  $(".vo_head_spots_available:eq(" + i + ")").css('background', '');
             } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T06:10:00.487

也许

```
var spots = $(".vo_head_spots_available:eq(" + i + ")");
var val = spots.val.toUpperCase();

if (val =="U" || (onlyNumbers(val) && val !=0)) {
  $('#msg_f').html('').hide();
  spots.css('background', '');
}
else {    
  $('#msg_f').html('Please enter the # spots available for your Participants. If unlimited, enter U.').show();
  spots.css('background-color', '#fdd');
  isValid = false;
} 
```

甚至

```
var spots = $(".vo_head_spots_available:eq(" + i + ")");
var val = spots.val.toUpperCase();
var isValid = val =="U" || (onlyNumbers(val) && val !=0);
if(isvalid) {
  $('#msg_f').html('').hide();
  spots.css('background', '');
}
else {    
  $('#msg_f').html('Please enter the # spots available for your Participants. If unlimited, enter U.').show();
  spots.css('background-color', '#fdd');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T06:12:08.687

```
var val = $(".vo_head_spots_available:eq(" + i + ")").val();

if(0 != val && "U" != val.toUpperCase() && !onlyNumbers(val)) {
    // ...
} else {
    // ...
} 
```

# html - 如何在任意子 JSP 页面中向 html 头部添加元素

> ID：11920069
> 
> 赞同：4
> 
> 时间：2012-08-12T06:03:35.870
> 
> 标签：html, jsp, include, html-head

所以我有我的主 JSP 页面，其中包含许多分层的子 JSP 页面。

其中一些子 JSP 页面具有需要与它们一起包含的脚本和样式，但我希望样式和脚本标记位于文档的头部。

在不使用 JavaScript 的情况下这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:13:37.413

可能有充分的理由不完全发布所有脚本（或 css）。

但是，在许多情况下，这是一种完全有效的方法。你只需要注意避免碰撞。

因此，我建议将您的 javascript 放入一些 .js 文件中，将您的 css 放入 .css 文件中，并为所有需要其内容的页面加载至少所有 css 和所需的 js。

如果您需要更模块化的方法，请更具体一些，以便我们看到最适合您需求的方法

# sparql - SPARQL 和 DBPedia - 从 wiki 页面重定向名称获取基本 url

> ID：11920083
> 
> 赞同：2
> 
> 时间：2012-08-12T06:07:50.470
> 
> 标签：sparql, dbpedia

我的问题很简单……当我使用“Barack”进行查询时，我没有得到“Barack_Obama”dbpedia 页面的摘要。我知道从基本 url 名称获取页面重定向名称的过程是什么。

但是，反过来可能吗？我可以通过发送带有 'Barack' 的查询来获得 'Barack_Obama' 吗？请帮我处理这样的 SPARQL 查询

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T08:38:04.350

我不是 100% 确定我理解你的问题，但听起来你想从字符串“Barack”开始，然后想发现标识 Barack Obama 的 URI，[http://dbpedia.org/resource/Barack_Obama](http://dbpedia.org/resource/Barack_Obama)。

此查询执行此操作：

```
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX dbo: <http://dbpedia.org/ontology/>
SELECT ?redirectsTo WHERE {
  ?x rdfs:label "Barack"@en .
  ?x dbo:wikiPageRedirects ?redirectsTo
} 
```

# jquery - 在表单提交的同一页面中显示数据

> ID：11920086
> 
> 赞同：0
> 
> 时间：2012-08-12T06:08:34.610
> 
> 标签：jquery, forms, submit

单击提交按钮时，我需要在同一页面上创建一个表格..我如何使用 jQuery 来执行此操作..该表格是在提交表单时在新页面中创建的..请帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T06:42:52.410

这有帮助吗？

```
<html>
<head>
<script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" >
//$(document).ready(function() {
function submitbutton()
{
  $('#myTable').append('<tr><td>my data</td><td>more data</td></tr>');
  $('#myTable').append('<tr><td>my data</td><td>more data</td></tr>');
  $('#myTable').append('<tr><td>my data</td><td>more data</td></tr>');
  $('#myTable').append('<tr><td>my data</td><td>more data</td></tr>');
  $('#myTable').append('<tr><td>my data</td><td>more data</td></tr>');
  $('#myTable').show();
 }
//});

</script>
</head>
<body>
<table id="myTable" style="display:none;border:1px solid #000000;"></table>
<input type="button" value="submit" onclick="submitbutton()">

</body>
</html> 
```

# websocket - websocket连接未关闭

> ID：11920089
> 
> 赞同：4
> 
> 时间：2012-08-12T06:09:22.767
> 
> 标签：websocket, connection

我想定期尝试打开 websocket 连接，直到它成功。所以我每 5 秒尝试一次，它最初似乎可以工作大约一分钟左右。即在禁用服务器的情况下，尝试连接，然后立即关闭，将 readyState 设置为 3，然后 5 秒后，再次尝试，另一个相同的响应。但是一两分钟后，它不再关闭连接，它只是挂在连接状态（readyState==0）。

```
function wsConnect()
  {
  console.log("trying to connect...");
  var socket = new WebSocket("wss://blahblah.com");
  socket.onopen=function(){console.log("open");};
  socket.onerror=function(){console.log("error");};
  socket.onclose=function(msg){console.log("close");};

  setTimeout(function(){console.log("RS:"+socket.readyState);socket.close();wsConnect();},5000);
  } 
```

有趣的是，如果我随后启动服务器，它会被几十个连接击中，大概所有导致 readyState 0 的连接都排队了。有什么方法可以完全粉碎 kill 破坏 readystate 0 连接？关不上，因为没开。

或者，我如何定期进行连接尝试，以允许我在服务器可用时进行连接，但又不会在我想要的只是一个连接时用大量连接轰炸服务器？

浏览器：铬

一旦它开始以 readystate 0 响应，即使是页面刷新也无法修复它。只有进入一个全新的域然后再返回它似乎会重置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T10:25:48.723

我相信您不应该尝试另一个连接，直到第一个连接关闭，然后在*onclose*事件中执行重新连接。这样，除非第一个连接失败，否则您将不会创建另一个连接。

```
function wsConnect()
{
    console.log("trying to connect...");
    var socket = new WebSocket("wss://blahblah.com");
    socket.onopen = function() { console.log("open"); };
    socket.onerror = function() { console.log("error"); };
    socket.onclose = function(msg) {
        console.log("close");
        setTimeout(wsConnect, 5000);
    };
} 
```

# xcode - 在 xcode 中归档时会弹出错误

> ID：11920092
> 
> 赞同：1
> 
> 时间：2012-08-12T06:09:57.757
> 
> 标签：xcode, xcode4.4

所以我正要上传我的应用程序商店。我归档了我的项目，然后 BAM 我得到了这个

```
Validate /Users/Kylegreenlaw/Library/Developer/Xcode/DerivedData/KiwiShirt-cwawgqvhcfaoiicuugooqpycmxoa/Build/Intermediates/ArchiveIntermediates/KiwiShirt1/InstallationBuildProductsLocation/Applications/KiwiShirt.app
cd /Users/Kylegreenlaw/Documents/KiwiShirt1
setenv PATH "/Applications/Xcode45-DP4.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode45-DP4.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
setenv PRODUCT_TYPE com.apple.product-type.application
/Applications/Xcode45-DP4.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/Validation /Users/Kylegreenlaw/Library/Developer/Xcode/DerivedData/KiwiShirt-cwawgqvhcfaoiicuugooqpycmxoa/Build/Intermediates/ArchiveIntermediates/KiwiShirt1/InstallationBuildProductsLocation/Applications/KiwiShirt.app

Executable=/Users/Kylegreenlaw/Library/Developer/Xcode/DerivedData/KiwiShirt-cwawgqvhcfaoiicuugooqpycmxoa/Build/Intermediates/ArchiveIntermediates/KiwiShirt1/InstallationBuildProductsLocation/Applications/KiwiShirt.app/KiwiShirtcodesign_wrapper-4.1: using Apple CA for profile evaluation/Users/Kylegreenlaw/Library/Developer/Xcode/DerivedData/KiwiShirt-cwawgqvhcfaoiicuugooqpycmxoa/Build/Intermediates/ArchiveIntermediates/KiwiShirt1/InstallationBuildProductsLocation/Applications/KiwiShirt.app: valid on disk/Users/Kylegreenlaw/Library/Developer/Xcode/DerivedData/KiwiShirt-cwawgqvhcfaoiicuugooqpycmxoa/Build/Intermediates/ArchiveIntermediates/KiwiShirt1/InstallationBuildProductsLocation/Applications/KiwiShirt.app: satisfies its Designated Requirementtest-requirement: code failed to satisfy specified code requirement(s)codesign_wrapper-4.1: failed to execute codesign(1) - (null

Application failed codesign verification.  The signature was invalid, contains disallowed entitlements, or it was not signed with an iPhone Distribution Certificate. (-19011) 
```

这没有任何意义，我的钥匙串中有分发配置文件和开发配置文件吗？

这里有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T06:35:34.800

你必须检查两件事：

1.  检查目标和项目的构建设置中的分发/发布配置文件是否已更正。
2.  检查项目的方案，并为您的分发/发布配置文件设置存档。

# c# - 使用aes算法在C#中加密文件和在Android编程中解密文件

> ID：11920096
> 
> 赞同：0
> 
> 时间：2012-08-12T06:10:51.957
> 
> 标签：c#, java, android

我想在 c# 中加密文件并在我的 android 应用程序中通过 java 代码解密 c# 加密文件，我知道最好的算法是 AES256，我在 android 中的代码工作正常（加密和解密）但我可以'通过我的 android 应用程序解密 C# 结果文件，我使用以下代码（非常感谢）：

加密和解密函数（android）：

加密：

```

```
static void Encrypt() throws IOException, NoSuchAlgorithmException,
            NoSuchPaddingException, InvalidKeyException {
        try {

            FileInputStream fis = new FileInputStream(Environment
                    .getExternalStorageDirectory().getAbsolutePath()
                    + "/logo.png");
            FileOutputStream fos = new FileOutputStream(Environment
                    .getExternalStorageDirectory().getAbsolutePath()
                    + "/Encrypted");

            SecretKeySpec aeskeySpec = new SecretKeySpec(
                    "12345678901234567890123456789012".getBytes(), "AES");

            tv.setText(aeskeySpec.getEncoded().toString());
            Cipher cipher = Cipher.getInstance("AES");

            cipher.init(Cipher.ENCRYPT_MODE, aeskeySpec);
            CipherOutputStream cos = new CipherOutputStream(fos, cipher);

            int b;

            byte[] d = new byte[8];
            while ((b = fis.read(d)) != -1) {
                cos.write(d, 0, b);

            }

            cos.flush();
            cos.close();
            fis.close();

        }// try
        catch (Exception e) {
            // TODO: handle exception
            tv.setText("Error :" + e.getMessage()); } }// encrypt 
```

```

`static void Decrypt() throws IOException, InvalidKeyException,
            NoSuchAlgorithmException, NoSuchPaddingException,
            IllegalBlockSizeException, BadPaddingException {

        File file = new File(Environment.getExternalStorageDirectory()
                .getAbsolutePath() + "/Encrypted");
        FileInputStream fis = new FileInputStream(file);
        long length = file.length();

        if (length > Integer.MAX_VALUE) {
            // File is too large
        }

        byte[] bytes = new byte[(int) length];

        int offset = 0;
        int numRead = 0;

        bytes = IOUtils.toByteArray(fis);

        byte[] N = new byte[(int) length - offset];

        int g, s = 0;

        for (g = offset; g < length; g++) {
            N[s++] = bytes[g];
        }

        FileOutputStream fos = new FileOutputStream(Environment
                .getExternalStorageDirectory().getAbsolutePath()
                + "/Decrypted");

        SecretKeySpec sks = new SecretKeySpec(
                "12345678901234567890123456789012".getBytes(), "AES");
        Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.DECRYPT_MODE, sks);

        byte[] b = cipher.update(N);

        int j = 0;
        while (j < b.length) {

            fos.write(b[j]);
            j++;
        }

        fos.flush();
        fos.close();

    }` 

我在 c# 中使用此代码进行加密：

`public void Encrypt(string FIStr, string FOStr, string PassKey)
        {

            FileStream fsInput = new FileStream(FIStr,
            FileMode.Open,
            FileAccess.Read);

            FileStream fsEncrypted = new FileStream(FOStr,
               FileMode.Create,
               FileAccess.Write);

            AesCryptoServiceProvider AES = new AesCryptoServiceProvider();

            System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();
            byte[] bytes=encoding.GetBytes(PassKey);

            AES.Key = bytes;

            ICryptoTransform aesencrypt = AES.CreateEncryptor();

            CryptoStream cryptostream = new CryptoStream(fsEncrypted,
               aesencrypt,
               CryptoStreamMode.Write);

            byte[] bytearrayinput = new byte[fsInput.Length];
            fsInput.Read(bytearrayinput, 0, bytearrayinput.Length);
            cryptostream.Write(bytearrayinput, 0, bytearrayinput.Length);
            cryptostream.Close();
            fsInput.Close();
            fsEncrypted.Close();}` 

此代码加密我的文件，但我无法通过我的 android 应用程序解密此文件:(，请帮助我，谢谢大家。

            回答 #1

赞同：0

时间：2012-08-12T06:21:26.510

这里有几个想法给你：

1) 使用您的 c# 代码加密一个简单的字符串，例如“hello”，然后将其带到站点[http://www.everpassword.com/aes-encryptor](http://www.everpassword.com/aes-encryptor)并查看它是否会成功解密 - 如果是，您可以验证您的加密代码运行良好。你的 Android 代码也是如此——访问我提到的同一个站点，加密一些简单的东西，比如“嘿你”，通过你的 android 代码传递加密的字符串，看看它是否会成功解密。

2) 浏览一下您的代码，我注意到 Cipher.getInstance() 的参数与 Cipher.getInstance() 的 android 文档相比显得有些空洞 - [http://developer.android.com/reference/javax/crypto/Cipher .html](http://developer.android.com/reference/javax/crypto/Cipher.html) - 注意文档顶部的示例参数。除了您提供的“AES”之外，它还指定参数，例如模式和填充。你确定android中的默认模式和填充与你的C#加密相匹配吗？只是一个想法。

祝你好运！

```

```

# codeigniter - 无法从 codeigniter 框架发送电子邮件

> ID：11920100
> 
> 赞同：2
> 
> 时间：2012-08-12T06:12:14.247
> 
> 标签：codeigniter, email

我在这个网站和许多其他网站上看到了同样的问题，但他们提供的解决方案对我不起作用。所以我又问了。

要发送邮件，我编写了以下代码

```
<?php

class Email extends CI_Controller{
function __construct()
{
    parent::__construct();
}

function index()
{
    $config = Array(
        'protocol' => 'smtp',
        'smtp_host' => 'ssl://smtp.googlemail.com',
        'smtp_port' => 465,
        'username' => 'mymail@gmail.com',
        'password' => 'password' 
    );

    $this->load->library('email', $config);
    $this->email->set_newline("\r\n");

    $this->email->from('mymail@gmail.com', 'mymail bcc');
    $this->email->to('mymail@gmail.com');
    $this->email->subject('This is a test email');
    $this->email->message('Oops This is Great.');

    if($this->email->send())
    {
        echo 'Your email was sent';       
    }

    else
    {
        show_error($this->email->print_debugger());
    }
       }
       } 
```

我安装了 openssl 并且还取消了 php.ini 中的 extension=php_openssl.dll 行的注释。但我得到以下错误

```
 An Error Was Encountered

   220 mx.google.com ESMTP qp6sm2730344pbc.55

    hello: 250-mx.google.com at your service, [119.30.39.78]
    250-SIZE 35882577
     250-8BITMIME
     250-AUTH LOGIN PLAIN XOAUTH
     250 ENHANCEDSTATUSCODES

     from: 530-5.5.1 Authentication Required. Learn more at
     530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 qp6sm2730344pbc.55

     The following SMTP error was encountered: 530-5.5.1 Authentication Required. Learn
      more          at          
     530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 qp6sm2730344pbc.55

     to: 530-5.5.1 Authentication Required. Learn more at
     530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 qp6sm2730344pbc.55

     The following SMTP error was encountered: 530-5.5.1 Authentication Required. 
     Learn more at 
     530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 qp6sm2730344pbc.55

     data: 530-5.5.1 Authentication Required. Learn more at 530 5.5.1 
     http://support.google.com/mail/bin/answer.py?answer=14257 qp6sm2730344pbc.55

     The following SMTP error was encountered: 530-5.5.1 Authentication Required. Learn more at
      530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 qp6sm2730344pbc.55
     502 5.5.1 Unrecognized command. qp6sm2730344pbc.55
     The following SMTP error was encountered: 502 5.5.1 Unrecognized command. qp6sm2730344pbc.55
     Unable to send email using PHP SMTP. Your server might not be configured to send
      mail using this method. 
```

当我使用 parent::CI_Controller(); 我收到一个致命错误致命错误：在第 6 行调用 C:\wamp\www\test\application\controllers\email.php 中未定义的方法 CI_Controller::CI_Controller() 虽然我使用的是 php 5.4.3

请让我知道我在这里缺少什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:31:26.080

内置[Mail](http://ellislab.com/codeigniter/user-guide/libraries/email.html)类使用密钥名称`smtp_user`和`smtp_pass`smtp 凭据。

将数组中的`username`and`password`参数更改为and 。`$config``smtp_user``smtp_pass`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:22:19.837

工作代码

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

/* SENDS EMAIL WITH GMAIL */

class Email extends CI_Controller {

    function __construct()
    {
        parent::__construct();
        //Do your magic here
    }

    function index()
    {
        $config = array(
            'protocol'  => 'smtp',
            'smtp_host' => 'ssl://smtp.gmail.com',
            'smtp_port' => 465,
            'smtp_user' => 'mygmail@gmail.com',
            'smtp_pass' => '*********'
        );

        $this->load->library('email',$config);
        $this->email->set_newline("\r\n");
        // $this->email->initialize($config);

        $this->email->from('mygmail@gmail.com', 'Chirag');
        $this->email->to('mygmail@gmail.com');
        $this->email->cc('myanothergmail@gmail.com');   
        $this->email->subject('This is an email testing');
        $this->email->message('It\'s working, that\'s really awesome..!');

        if ($this->email->send()) 
        {
            echo "Your Email has been sent successfully... !!";
        }
        else
        {
            show_error( $this->email->print_debugger());
        }
    }

}

/* End of file email.php */
/* Location: ./application/controllers/email.php */ 
```

# mysql - MySQL - 带有连接的 GROUP_CONCAT

> ID：11920102
> 
> 赞同：1
> 
> 时间：2012-08-12T06:12:36.580
> 
> 标签：mysql

我的问题与 MySQL 非常相似[：是否可以 group_concat 多行？](https://stackoverflow.com/questions/11237428/mysql-is-it-possible-to-group-concat-multiple-rows)，但我无法理解组 concat 的工作方式。

我的实际数据集很难解释 - 我将使用一组简化的表和关系作为示例。

说我有一张桌子`photos`

```
id  filename
1   bob.jpg
2\.  ken.png
3\.  lisa.jpg
4\.  jim.jpg
... 
```

和一张桌子`tags`

```
id  title
1   family
2   friends
3   school
4   california
... 
```

还有一座桥叫`photo_tags`

```
photo  tag
1      2
1      3
1      4
2      1
3      1 
```

我想要这样的后排：

```
photo_id  filename   tags
1         bob.jpg    2,3,4
2         ken.png    1
3         lisa.jpg   1
4         jim.jpg    (NULL) 
```

或者...

```
photo_id  filename   tags
1         bob.jpg    friends,school,california
2         ken.png    family
3         lisa.jpg   family
4         jim.jpg    (NULL) 
```

我最初的猜测是这样的：

```
SELECT photos.filename,
GROUP_CONCAT(photo_tags.tag) AS associated_tags
FROM photos
LEFT OUTER JOIN tags
ON tags.photo = photos.id
GROUP BY photo_tags.tag 
```

但是（对于知道自己在做什么的人来说可能很明显），那行不通。在做了一些研究并参考上面的链接之后，我尝试了各种排列：

```
SELECT 
  file_name,
  GROUP_CONCAT(photo_tag_ids) AS associated_tags
FROM (
  SELECT 
    photos.filename AS file_name,
    photo_tags.tag AS photo_tag_ids
  FROM  
    photos
    INNER JOIN photo_tags
         ON photo_tags.photo= photos.id
) whatever
GROUP BY file_name
ORDER BY file_name; 
```

蒂亚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T06:16:34.170

```
SELECT photos.filename,
       GROUP_CONCAT(photo_tags.tag) AS associated_tags
FROM photos
LEFT OUTER JOIN tags ON tags.photo = photos.id
GROUP BY photos.filename 
```

您必须按每行唯一的列进行分组，并且在组中您可以构建其他列的 group_concat。因此，将您的更改`group by`为`photos.filename`.

# java - Java printf 失败：UnknownFormatConversionException

> ID：11920103
> 
> 赞同：1
> 
> 时间：2012-08-12T06:12:37.820
> 
> 标签：java, exception, printf

我试图理解为什么我的 printf 语句之一失败。下面的#1 很好，但#2 失败，最后出现异常。这是什么原因造成的？

```
0       String LOCATION = "http://www.mywebsite.web/";
1       System.out.printf(" <img src=\"%sIMAGE.gif\">", LOCATION);   
2       System.out.printf(" <img src=\"%sIMAGE.gif\" width=\"25%\" height=\"25%\" border=0>", LOCATION);

Exception in thread "main" java.util.UnknownFormatConversionException: Conversion = '"'
    at java.util.Formatter.checkText(Formatter.java:2519)
    at java.util.Formatter.parse(Formatter.java:2501)
    at java.util.Formatter.format(Formatter.java:2430)
    at java.io.PrintStream.format(PrintStream.java:937)
    at java.io.PrintStream.printf(PrintStream.java:838)
    at MyCode.main(MyCode.java:292) 
```

任何想法是什么原因造成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T06:30:44.657

干得好

```
String LOCATION = "http://www.mywebsite.web/";
System.out.printf(" <img src='%sIMAGE.gif'>", LOCATION);   
System.out.printf(" <img src='%sIMAGE.gif' width='25%%' height='25%%' border=0>", LOCATION); 
```

我已经替换`"`为`'`（**看起来很简单**）会像**魅力**一样工作`html` `"`或`'`做得**很好**。
对于，它`%`应该`%%`与`%``%`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T06:37:19.457

问题在于百分号。由于 % 用作格式字符串。您可以在其前面插入 % 作为文字，并在其前面加上另一个百分比... %%

```
System.out.printf(" <img src=\"%sIMAGE.gif\" width=\"25%%\" height=\"25%%\" border=0>", LOCATION); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T06:16:27.103

异常表示这`%"`不是有效的格式说明符。您应该在第 2 行中转义您的`%`登录：

```
System.out.printf(" <img src=\"%sIMAGE.gif\" width=\"25%%\" height=\"25%%\" border=0>", LOCATION); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T06:16:16.930

```
%\" 
```

不是有效的 printf 字段。

# jquery - 将 mooFX 与 jQuery 一起使用

> ID：11920105
> 
> 赞同：0
> 
> 时间：2012-08-12T06:13:13.873
> 
> 标签：jquery

jQuery 动画对我来说很不稳定（特别是在 Firefox 中）。所以我决定将[MoofX](http://moofx.mad4milk.net/) 用于动画。moofx 网站没有明确解释如何实现代码

如何在此代码上实现 Moofx 效果（基本上用 moofx 替换 jquery 动画）

```
jQuery(this).slideDown(); 
```

我不想要切换功能。此外，如果代码保持与当前代码有点相似，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T06:43:16.857

不完全确定这是否是您要查找的内容，但是您可以在匿名函数中覆盖 jQuery 函数。这是一个覆盖该`fadeIn`函数的示例：

```
(function(){
    // storing the reference to the original function 
    var original = jQuery.fn.fadeIn;

    // this is the actual override/replacement
    // it has to happen before you start up jQuery
    jQuery.fn.fadeIn= function(){

        // do whatever you wanna do here instead of using the original function
        // I'm not super familiar with mooFX, but I take it's similar to MooTools

        // This line can be entirely removed, leaving only YOUR code, in this case 
        // the MooFX effect replacing the fadeIn. If you leave it, it will run both
        // your code and the original code
        original.apply( this, arguments );
    }
})();

// start up jQuery
$(function() {
    // and code here like normal, meaning, 
    // every time you call $('#something').fadeIn({..}), it will run your code
}); 
```

**注意**：同样，不确定这是否是您正在寻找的，我不确定 MooFX 如何与 jQuery 一起发挥作用。上面的代码只是为了展示如何覆盖一个 jQuery 函数。

# jsf-2 - 使用 ArrayList ，它存储当前数据，但以前的数据从 arrayList 中删除

> ID：11920106
> 
> 赞同：0
> 
> 时间：2012-08-12T06:13:16.370
> 
> 标签：jsf-2

我使用数组列表。我希望从实体类中存储数据。但它存储当前数据并从中删除以前的数据。我的 JSF 页面代码：

```
 <html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui"
  xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head>
    <title>Facelet Title</title>
</h:head>
<h:body>
    <h:form>
        <h:outputText value="ID"/><br/>
        <h:inputText value="#{dataTestBeans.data.id}"/><br/>
        <h:outputText value="Name"/><br/>
        <h:inputText value="#{dataTestBeans.data.name}"/><br/>
        <h:outputText value="Address"/><br/>
        <h:inputText value="#{dataTestBeans.data.address}"/><br/>
        <h:outputText value="Birth Day"/><br/>
        <h:inputText value="#{dataTestBeans.data.birthDay}"/><br/>
        <h:commandButton action="#{dataTestBeans.abc}" value="Submit" />
    </h:form>
    <h:form>
        <c:forEach items="#{dataTestBeans.testArray}" var="dataTest">
            <h:outputText value="#{dataTest.id}"/><br/>
            <h:outputText value="#{dataTest.name}"/><br/>
            <h:outputText value="#{dataTest.address}"/><br/>
            <h:outputText value="#{dataTest.birthDay}"/><br/>
        </c:forEach>
    </h:form>
  </h:body>
 </html> 
```

我的实体类代码：

```
@ManagedBean(name = "person")
@SessionScoped
public class Person{

private String id;
private String name;
private String address;
private String birthDay;

public Person() {
}
    //getter and setter all veriable

} 
```

我的控制器 Beans 代码：

```
@ManagedBean(name="dataTestBeans")
@SessionScoped
public class DataTestBeans {

private Person dataArray;
private List<Person> person = new ArrayList<Person>();   

public DataTestBeans() {
 }

public Person getData() {
  if (dataArray == null) {
      dataArray = new Person();
  }
 return dataArray;
 }

public void abc() {
   person.add(dataArray);
 }

public List<Person> getTestArray() {
  return person;
 }

public void setTestArray(List<Person> person) {
    this.person = person;
  }
} 
```

当我运行它时显示当前数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:21:52.767

您为每个数据条目重复使用**相同的引用。**因此，您基本上每次都覆盖它。在您的方法中添加填充条目后，您应该创建一个**新条目。**`abc()`

替换当前代码中的以下部分：

```
private TestArray dataArray;
private List<TestArray> testArray = new ArrayList<TestArray>();

public DataTestBeans() {
}

public TestArray getData() {
    if (dataArray == null) {
        dataArray = new TestArray();
    }
    return dataArray;
 }

public void abc() {
    testArray.add(dataArray);
} 
```

经过

```
private TestArray dataArray;
private List<TestArray> testArray;

public DataTestBeans() {
    dataArray = new TestArray();
    testArray = new ArrayList<TestArray>()
}

public TestArray getData() {
    return dataArray;
 }

public void abc() {
    testArray.add(dataArray);
    dataArray = new TestArray();
} 
```

### 也可以看看：

*   [推荐的 JSF 2.0 CRUD 框架](https://stackoverflow.com/questions/3180400/recommended-jsf-2-0-crud-frameworks/3180885#3180885)（一个更好的 CRUD 示例）

* * *

**与具体问题无关**，您的类和变量命名是不明智的并且非常混乱，因此其他人很难快速解释代码并发现问题。Rename `TestArray`to `Person`, rename `dataArray`to `person`, rename `testArray`to`persons`和 rename `DataTestBeans`to`PersonManager`或其他东西，您的代码立即变得更加自文档化并且更易于解释。

```
private Person person;
private List<Person> persons;

public PersonManager() {
    person = new Person();
    persons = new ArrayList<Person>()
}

public Person getPerson() {
    return person;
 }

public void add() {
    persons.add(person);
    person = new Person();
} 
```

# c - 从C中的符号链接调用时如何使用getcwd获取可执行路径

> ID：11920107
> 
> 赞同：0
> 
> 时间：2012-08-12T06:13:41.797
> 
> 标签：c, linux, file-io, symlink

假设我有一个程序，`abc`在 Linux 中，有一个方法：

```
char *currentPath(){
        char *path=NULL;
        path = getcwd(path, MAXPATHLEN);
        return path;
} 
```

直接调用时`abc`，此路径返回所在的路径`abc`。

如果我对 进行符号链接`abc`并调用符号链接，`currentPath()`则返回符号链接的路径。

有没有办法让这个方法返回路径`abc`？我有兴趣访问相对于`abc`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T06:44:48.190

你不能`getcwd()`用来帮助获取可执行文件名；查找可执行文件的路径名不是明智的方法。

`/proc/self/exe`在 Linux 上，如果您使用[`readlink()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/readlink.html)系统调用读取可执行文件，则有一个符号链接会为您提供可执行文件的名称。请注意，`readlink()`系统调用不会终止它返回的值（我不知道为什么不这样做；在我的书中，这是一种非常奇怪的行为，并且会立即导致粗心的错误）。

你的方案有很多问题。

1.  如果通过 $PATH 找到该程序，则不能保证当前目录与包含可执行文件的目录相同。如果您考虑一下，您`/bin/ls`无需在`/bin`目录中即可运行。
2.  如果您担心安全性，请注意 的值`argv[0]`受启动目标程序的程序控制。外壳表现良好；其他程序可能更恶意：

    ```
    #include <unistd.h>
    int main(void)
    {
        char *argv[] = { "/opt/you/bin/bogus", "300", 0 };
        execvp("sleep", argv);
        return(-1);
    } 
    ```

    `/opt/you/bin/bogus`即使它调用程序，它也会传递程序名称`sleep`。

如果您在网上搜索，您会发现很多“如何获取可执行文件名称”的示例，这些示例假定这`argv[0]`是要走的路；它不是。其他平台有其他技术来获取可执行文件名称。使用`/proc/self/exe`不便携；其他技术也不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T06:45:56.690

利用[`realpath(const char *path, char *resolved_path)`](http://www.kernel.org/doc/man-pages/online/pages/man3/realpath.3.html)

> realpath() 扩展所有符号链接并解析对 /./、/../ 和由 path 命名的以 null 结尾的字符串中的额外“/”字符的引用，以生成规范化的绝对​​路径名。

在你的情况下：

```
char *currentPath() {
  char *path, *canon_path;
  path = getcwd(NULL, MAXPATHLEN);
  canon_path = realpath(path, NULL);
  free(path);
  return canon_path;
} 
```

请注意，这不会获取可执行程序的路径（不清楚您要做什么）。便携地做到这一点比较棘手。您需要使用 的值`argv[0]`来获取它：

```
char *bindir(char *argv0) {
  char *canon_path = realpath(argv0, NULL);
  char *canon_dir = strdup(dirname(canon_path));
  free(canon_path);
  return canon_dir;
} 
```

该`strdup`调用是必需的，因为`dirname`可能会修改其参数并返回指向该参数的指针或返回指向静态分配缓冲区的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T07:13:16.420

试试这个代码（修改它以满足您的需要）：

```
#include <unistd.h>
#include <stdio.h>
#include <sys/stat.h>
#include <sys/types.h>

#define MAXPATHLEN      256

char buffer[1024];

char *currentPath(char *bin_path){
        char *path = NULL;
        ssize_t len;
        struct stat file_stat;

        if (lstat(bin_path, &file_stat) != 0) 
        {
                /* handle error */
                fprintf(stderr, "ERROR\n");
        }

        if (!S_ISREG(file_stat.st_mode)) 
        {
                /* file is a symlink */
                fprintf(stdout, "Is a symlink\n");
                if ((len = readlink(bin_path, buffer, sizeof(buffer)-1)) != -1)
                        buffer[len] = '\0';
                /* In this case we return the name of the link */
                return buffer;
        }
        else
        {
                fprintf(stdout, "Is a regular file\n");
                path = getcwd(bin_path, MAXPATHLEN);

                return path;
        }
}

int main(int argc, char **argv)
{
        fprintf(stdout, "My path is : %s\n", currentPath(argv[0]));

        return 0;
} 
```

# python - 正则表达式捕获模式的一个实例，但不捕获另一个。如何解决这个问题？

> ID：11920115
> 
> 赞同：2
> 
> 时间：2012-08-12T06:15:19.457
> 
> 标签：python, regex, text

我有这段文字：

> W/NNP Yes/NNP Get/NNP Paid/NNP for/IN Going/NNP to/TO College/NNP !/. 检查/NNP it/PRP out/RP here/RB !/. http/NN :/: //sldollar.notlong.com/JJ 苹果/NN iphone/NN TGIF/NNP 猪/NN 流感/NN

我目前正在使用这个正则表达式来捕获一些感兴趣的区域：

```
[a-zA-Z]*/NN[PS]* [a-zA-Z]*/NN[PS]* 
```

我正在使用[RegexPal](http://www.regexpal.com)来测试它。

![在此处输入图像描述](../Images/f2ba758d8a38914adc93a976f04b00c5.png)

这捕获`TGIF/NNP swine/NN`但没有`swine/NN flu/NN`。有关如何修复我的正则表达式以捕获此问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T06:22:29.210

如果其他人需要这个，我想答案是使用积极的前瞻：

```
([a-zA-Z]*/NN[PS]* )(?=([a-zA-Z]*/NN[PS]*)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T06:22:49.553

多个匹配不能重叠。

```
apple/NN iphone/NN TGIF/NNP swine/NN flu/NN
AAAAAAAAAAAAAAAAAA BBBBBBBBBBBBBBBBB
         CCCCCCCCCCCCCCCCCC DDDDDDDDDDDDDDD 
```

上面标记为 A 和 B 的匹配项彼此跟随，但由于 C 块从匹配项 A 的中间开始（对于 B 中的 D 也是如此），它们不是匹配项。

您需要匹配一次，然后在上一个起点之后的某个时间点重新搜索，或者使用前瞻，这样后一部分就不会被消耗。

# linux-device-driver - debian linux下无法使用udev自动连接USB modem

> ID：11920118
> 
> 赞同：2
> 
> 时间：2012-08-12T06:15:25.890
> 
> 标签：linux-device-driver, modem, udev, usbserial

在我的 linux 机器上（uname -a Linux gate 3.2.0-0.bpo.2-amd64 #1 SMP Fri Jun 29 20:42:29 UTC 2012 x86_64 GNU/Linux）我有 USB 调制解调器 WeTelecom WM-D300有“zeroCD”选项。ZeroCD USB id 为 22de:6803，调制解调器设备的 USB id 为 22de:6801。我已经为它创建了 usb_modeswitch 规则并测试了这个规则运行良好：

```
Aug 11 23:03:14 gate kernel: [  609.832373] usb 1-1: usbfs: process 6081 (usb_modeswitch) did not claim interface 0 before use                  
Aug 11 23:03:14 gate kernel: [  609.949352] usb 1-1: USB disconnect, device number 2                                                            
Aug 11 23:03:15 gate kernel: [  610.596344] usb 1-1: new high-speed USB device number 5 using ehci_hcd                                          
Aug 11 23:03:15 gate kernel: [  610.759964] usb 1-1: New USB device found, idVendor=22de, idProduct=6801                                        
Aug 11 23:03:15 gate kernel: [  610.759978] usb 1-1: New USB device strings: Mfr=3, Product=2, SerialNumber=0                                   
Aug 11 23:03:15 gate kernel: [  610.759987] usb 1-1: Product: Wetelecom Mobile Products                                                         
Aug 11 23:03:15 gate kernel: [  610.759994] usb 1-1: Manufacturer: WeTelecom Incorporated                                                       
Aug 11 23:03:16 gate kernel: [  611.820404] option 1-1:1.0: GSM modem (1-port) converter detected                                               
Aug 11 23:03:16 gate kernel: [  611.820760] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB3                                       
Aug 11 23:03:16 gate kernel: [  611.820876] option 1-1:1.1: GSM modem (1-port) converter detected                                               
Aug 11 23:03:16 gate kernel: [  611.821095] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB4                                       
Aug 11 23:03:16 gate kernel: [  611.821204] option 1-1:1.2: GSM modem (1-port) converter detected                                               
Aug 11 23:03:16 gate kernel: [  611.821418] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB5 
```

所以，我做了一个小的 udev 配置来允许这个设备的自动热插拔：

```
ACTION!="add|change", GOTO="modem_rules_end"                                                                                                    
SUBSYSTEM!="usb", GOTO="modem_rules_end"

LABEL="modem_rules_begin"                                                                                                                 

# WeTelecom WM-D300                                                                                                                             
ATTRS{idVendor}=="22de", ATTRS{idProduct}=="6803", RUN+="usb_modeswitch '%b/%k'"                                                                
LABEL="modem_rules_end" 
```

它不工作。重新连接调制解调器后，它变得完全不可用。usb-devices 显示它具有 usbfs 驱动程序，并且 usb_modeswitch 即使从命令行也无法切换它。udev 也无法切换，但重新启动后它工作得很好 - 直到下一次物理重新连接。这是我插入调制解调器时的 udev 日志：

```
Aug 11 22:42:11 gate logger: usb_modeswitch: using overriding config file /etc/usb_modeswitch.d/22de:6803; make sure this is intended           
Aug 11 22:42:11 gate logger: usb_modeswitch: please report any new or corrected settings; otherwise, check for outdated files                   
Aug 11 22:42:11 gate logger: usb_modeswitch: using overriding config file /etc/usb_modeswitch.d/22de:6803; make sure this is intended           
Aug 11 22:42:11 gate logger: usb_modeswitch: please report any new or corrected settings; otherwise, check for outdated files                   
Aug 11 22:42:11 gate usb_modeswitch: switching device 22de:6803 on 001/006                                                                      
Aug 11 22:42:11 gate usb_modeswitch: switching device 22de:6803 on 001/006                                                                      
Aug 11 22:42:11 gate kernel: [ 1495.864235] usb 1-1: usbfs: process 8485 (usb_modeswitch) did not claim interface 0 before use                  
Aug 11 22:42:11 gate kernel: [ 1495.864309] usb 1-1: usbfs: process 8485 (usb_modeswitch) did not claim interface 0 before use                  
Aug 11 22:42:16 gate logger: usb_modeswitch: switched to 22de:6803 on 001/006            
Aug 11 22:42:19 gate logger: usb_modeswitch: switched to 22de:6803 on 001/006 
```

所以，我的问题是：为什么以及如何？为什么它从命令行工作以及如何通过 udev 使其工作？请帮忙。提前谢谢！

# objective-c - 如何将注册所有者的姓名插入电子邮件主题的字符串中？

> ID：11920127
> 
> 赞同：0
> 
> 时间：2012-08-12T06:16:37.357
> 
> 标签：objective-c, email

我正在开发应用内电子邮件功能，现在我有`[mailer setSubject:@"Someone has sent you a haiku."];`. 如何设置它以将“某人”替换为 iPhone 所有者的姓名，并且主题为“John Doe has sent you ahaiku”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T06:42:29.490

如本文所述，[您](https://stackoverflow.com/questions/1321552/iphone-sdk-owners-name)无法获取用户的姓名，因为这是一个隐私问题。您可以在首次应用程序设置中询问用户他或她的姓名，然后存储此信息。当然，您希望为用户提供一种稍后通过设置视图或类似方式更改它的方法。

但是，您可以找到正在运行的 iPhone 的名称，这些名称通常被命名为“John's iPhone”。因此，您可能会发现发送诸如“John 的 iPhone 已向您发送俳句”之类的消息是可以接受的。如果这对您有用，您可以获取 iPhone 的名称并将其插入到您的字符串中，如下所示：

```
[mailer setSubject:[NSString stringWithFormat:@"%@ has sent you a haiku.", [[UIDevice currentDevice] name]]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T06:41:35.663

Apple 的沙盒不允许您获取有关 iPhone 用户的电子邮件、联系信息等。您可能可以找到一些方法来做到这一点，但如果您提交到商店，它们通常不会通过集合。

你可以得到电话的名字： `[[UIDevice currentDevice] name];`

这至少是一个公共 API，并且似乎取得了一些成功。

否则，您应该只询问用户他们想要使用的名称。它更好 - 也许他们无论如何都想加上一个昵称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T06:41:57.540

```
NSString *deviceName = [[UIDevice currentDevice] name]; // John's iPhone
NSRange r = [deviceName rangeOfString:@"'"]; // { 4; 1 }
NSString *user = [deviceName substringToIndex:r.location];

NSString *subject = [NSString stringWithFormat:@"%@ has sent you a haiku", user];

/* Assumes that the device name contains the user's name as the part before an aphostrophe.
 * If this isn't the case, you have to check for something else.
 */ 
```

# php - 单击提交按钮但不返回帖子值php

> ID：11920129
> 
> 赞同：0
> 
> 时间：2012-08-12T06:17:15.510
> 
> 标签：php, forms, zend-framework, email

```
public function emailAction()
{

    $form = new Application_Form_Email();
    $form->submit->setLabel('Send Email!');
    $this->view->form = $form;

    if ($this->getRequest()->isPost()) {    //check if add button is click
        echo "hi";
        $formData = $this->getRequest()->getPost('email');
        var_dump($formData);
        if ($form->isValid($formData)) { //check if form is valid 

            $emailaddress = $this->getRequest()->getPost();
            //$emailaddress = $this->getPost();
            var_dump($emailaddress);
            $db = new Application_Model_DbTable_Email();
            $db->sendEmail($emailaddress);

        } 
    }
} 
```

嗨，我正在尝试提交“电子邮件”的值。当我测试时，如果 $this->getRequest()->getPost() 有错误，则未读取 if 块。我不能做任何其他事情，因为 if 块不起作用。所以我检查了我的表格：

```
public function init()
{
    $this->setName('memberdetail'); //memberdetail table from database

    /*$userid = new Zend_Form_Element_Hidden('userid'); //hide userid 
    $userid->addFilter('Int');

    $role = new Zend_Form_Element_Hidden('role');   //hide role
    $role -> setValue('Member');*/

    $email = new Zend_Form_Element_Text ('email');
    $email->setLabel('Email')
    ->setRequired(true)
    ->addFilter('StripTags')
    ->addFilter('StringTrim')
    ->setAttrib('COLS', '60')
    ->setAttrib('ROWS', '2')
    ->addValidator('NotEmpty')
    ->addValidator('EmailAddress');

    $submit = new Zend_Form_Element_Submit('submit');

    //remember to add the declare form elements to form
    $this->addElements(array($email, $submit)); 
} 
```

问题出在提交按钮上吗？为什么它不返回我的“电子邮件”值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:17:37.227

将您的代码替换为：

```
public function emailAction()
{

$form = new Application_Form_Email(array(
'method' => 'POST'));
$form->submit->setLabel('Send Email!');
$this->view->form = $form;

if ($this->getRequest()->isPost()) {    //check if add button is click
    echo "hi";
    $formData = $this->getRequest()->getPost('email');
    var_dump($formData);
    if ($form->isValid($formData)) { //check if form is valid 

        $emailaddress = $this->getRequest()->getPost();
        //$emailaddress = $this->getPost();
        var_dump($emailaddress);
        $db = new Application_Model_DbTable_Email();
        $db->sendEmail($emailaddress);

    } 
}
} 
```

# php - codeigniter 控制器加载

> ID：11920136
> 
> 赞同：0
> 
> 时间：2012-08-12T06:19:06.243
> 
> 标签：php, codeigniter, controller, load

我的本地主机中有一个名为**blog.php**的控制器。要访问它，我在地址栏中输入**http://localhost/ci/index.php/blog**。在教程中它说它将显示**Hello World**但我得到的显示是一个包含 blog.php 代码和 404 Page Not Found 的页面。

这是代码。

```
*<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
class Blog extends CI_Controller {
    /**
     * Index Page for this controller.
     *
     * Maps to the following URL
     *      http://example.com/index.php/blog
     *  - or -  
     *      http://example.com/index.php/blog/index
     *  - or -  
     * So any other public methods not prefixed with an underscore will
     * map to /index.php/blog/<method_name>
     * @see http://codeigniter.com/user_guide/general/urls.html
     */
    public function index()
    {
        echo "Hello World";
    }
}
/* End of file Blog.php */
/* Location: ./application/controllers/blog.php */* 
```

任何人请帮我知道是什么问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-12T06:49:59.327

您使用的是哪个版本的 CodeIgniter，因为 CI_Controller 用于 CI 上的旧版本。你有没有尝试做

```
class Blog extends Controller {
} 
```

或者

```
class Blog extends MY_Controller {
} 
```

MY_ 在您的 config.php 文件中设置的位置。

# php - 创建动态嵌入代码

> ID：11920140
> 
> 赞同：0
> 
> 时间：2012-08-12T06:20:27.443
> 
> 标签：php

我在创建动态嵌入时遇到问题。我基本上需要它动态更改（例如 index.php?channel=randomname），但我想要它，所以当他们输入名称时，它会将嵌入中的名称更改为他们放置的名称。

```
<object type="application/x-shockwave-flash"
        data="http://www.justin.tv/widgets/live_embed_player.swf?channel={$id}"
        id="live_embed_player_flash" 
        height="300" 
        width="400" 
        bgcolor="#000000">
<param name="allowFullScreen" value="true"/>
<param name="allowScriptAccess" value="always" />
<param name="allowNetworking" value="all" />
<param name="movie" value="http://www.justin.tv/widgets/live_embed_player.swf" />
<param name="flashvars" value="hostname=www.justin.tv&channel={$id}&auto_play=false&start_volume=25" />
</object> 
```

但与此同时，当它是 index.php 或无效链接时，我想要一个默认视频。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T06:26:05.527

假设`$_GET['channel']`是您从任何形式获得的频道。

```
<?php

    if(isset($_GET['channel'])){
        $channel = $_GET['channel'];
    }
    else{
        $channel = /* default channel value */;
    }

    echo '<object type="application/x-shockwave-flash" data="http://www.justin.tv/widgets/live_embed_player.swf?channel=$channel" id="live_embed_player_flash" height="300" width="400" bgcolor="#000000"><param name="allowFullScreen" value="true"/><param name="allowScriptAccess" value="always" /><param name="allowNetworking" value="all" /><param name="movie" value="http://www.justin.tv/widgets/live_embed_player.swf" /><param name="flashvars" value="hostname=www.justin.tv&channel=$channel&auto_play=false&start_volume=25" /></object>'

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T06:26:22.317

假设你在 php 中得到了`$id`正确的，你必须改变

```
{$id} 
```

至

`<?php echo $id;?>`或者`<?=$id?>`

# php - PHP会话未在登录页面中注册

> ID：11920151
> 
> 赞同：3
> 
> 时间：2012-08-12T06:22:41.373
> 
> 标签：php, session, login

我做了一个简单的登录和注册系统，我使用会话向用户显示用户名，只是为了练习。
在注册页面中一切正常，我可以注册用户，但是当我尝试登录时，它显示一个空白页面，而不是它应该做的，它显示'登录成功'并将我重定向到'索引.php'，设置我的 $_SESSION 并在'index.php'中我使用会话来显示有关用户的信息。问题开始于我在表单中插入正确信息后没有登录。这段代码在我以前的托管服务上运行良好，但它有他的问题。
当我的朋友可以登录我的帐户但我无法登录时，这会变得更奇怪。
所以这就是“登录成功”部分：

```
 else if ($login === true)
        {
            include 'include/aside.php';
            include 'include/footer.php';
            $id = id_from_username($username);
            $_SESSION['id'] = $id;
            redirect('index.php','2'); // a replacement for header()
            echo 'Login Success.';
            exit();  
        } 
```

这是检查用户是否已登录：

```
if(isset($_SESSION['id']))
{
    return true;
}
else 
{
    return false;
} 
```

这是登录查询：

```
function login($username, $password) {
$username = mysql_real_escape_string($username);
$password = md5($password);
$loginquery = mysql_query("SELECT id FROM `users` WHERE `username` = '$username' AND `password` = '$password' LIMIT 1");
return (mysql_num_rows($loginquery) == 1);} 
```

是的，我使用 session_start(); 在每一页的开头。我用 Mozilla firefox、Google chrome 和 IE6 试过这个，但都没有用。如果您需要更多信息，请告诉我。

那为什么我不能登录？

非常感谢。

（哦，对不起我的英语）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T06:27:10.203

尝试将`include()`语句替换为`echo "success";`. 这将让您知道故障是否在这些文件之一中，或者可能与文件路径/权限有关。

# mysql - 创建存储过程：设置字符集和排序规则

> ID：11920153
> 
> 赞同：14
> 
> 时间：2012-08-12T06:22:56.777
> 
> 标签：mysql, stored-procedures, character-encoding

创建 MySQL 存储过程时如何设置字符集和排序规则？[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/create-procedure.html)没有提供任何示例，并且对一般语法有些不清楚。

```
mysql> show procedure status\G

*************************** 1\. row ***************************
                  Db: MslLandingSequence
                Name: DeploySkycrane
                Type: PROCEDURE
             Definer: curiosity@localhost
            Modified: 2012-08-04 00:05:16
             Created: 2011-11-12 00:02:45
       Security_type: DEFINER
             Comment: 
character_set_client: latin1
collation_connection: latin1_swedish_ci
  Database Collation: latin1_swedish_ci 
```

最后三个项目应该是 Unicode。谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-15T13:50:13.283

> character_set_client 是创建例程时 character_set_client 系统变量的会话值。collat​​ion_connection 是创建例程时 collat​​ion_connection 系统变量的会话值。数据库排序规则是与例程关联的数据库的排序规则。这些列是在 MySQL 5.1.21 中添加的。

[http://dev.mysql.com/doc/refman/5.1/en/show-procedure-status.html](http://dev.mysql.com/doc/refman/5.1/en/show-procedure-status.html)

总之，打开一个mysql命令行，输入

```
SET NAMES UTF8; 
```

然后删除并重新导入存储过程。这解决了我的问题。我什至不想考虑 5.1.21 之前的用户。他们在黑暗中摸索！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-30T04:49:52.467

注意[错误报告](https://bugs.mysql.com/bug.php?id=13909 "错误报告")。它表明过程及其参数与数据库的默认字符集**无关**，但始终与二进制字符串相关联。

因此，您必须为参数显式指定*字符集*属性。

简单的重新创建过程可能无法解决问题。

# ssl - 有可能在一台计算机上合并 SSL 客户端和服务器吗？

> ID：11920154
> 
> 赞同：0
> 
> 时间：2012-08-12T06:23:08.697
> 
> 标签：ssl, https, client-server

我正在执行研究项目的任务，在一台计算机上创建一个功能齐全的 SSL（在网站上应用时称为 https）。是否可以在一台计算机上结合 SSL 身份验证和握手？我的意思是验证客户端和握手的过程在一个应用程序或 LAN 网络中达成一致。

我的重点是我想保护一个已经在互联网上的现有网站/网页，比如这个网站，stackoverflow.com，但我在我自己的网络中以 https 访问它。提出这个问题的目的是因为我想向高等教育部分展示 SSL 可以通过访问 HTTP 网站来实现，并通过简单的会话劫持进行测试以确保其机密性和数据完整性。

当这部分成功时，我将尝试应用另一个安全功能来减缓 SSL 劫持的发生，例如一次性 cookie 或 SessionLock？

==

*编辑

从我的想法得出结论，如果没有 SSL 服务器托管网页和 SSL 客户端访问网页，则无法实现 SSL。合并 SSL 客户端和服务器并不能确保 http 是安全的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T06:33:20.653

我不太确定你在问什么...

如果您尝试通过 SSL 从托管在您自己机器上的网站加载页面，是的，您可以这样做。

如果您有一个自定义客户端想要通过 SSL 连接到服务器，并且客户端和服务器都在同一台机器上，那么您也可以这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T08:08:00.223

当然，它一直在测试情况下完成，这大约是它真正有意义的唯一一次。

但是让 SSL 在单个主机内工作并不能证明“可以实现 SSL”。并不是说它需要任何证明，因为正如我们所说，它已在数以万计的互联网连接中使用。

# ios - 自定义 UITableViewCell 选择样式？

> ID：11920156
> 
> 赞同：86
> 
> 时间：2012-08-12T06:23:20.173
> 
> 标签：ios, objective-c, uitableview, click, selection

当我单击我`UITableViewCell`的 时，当我单击单元格时，背景部分（我的背景图像未覆盖的区域）变为蓝色。此外，`UILabel`单击单元格上的所有 s 都会变成白色，这是我想要的。

但是，当我单击它时我不想要的是蓝色背景，但如果我这样做，那么我会丢失单元格中 s`selectionstylenone`的突出显示颜色。`UILabel`

那么有什么方法可以在单击单元格时摆脱蓝色背景但保留`UILabel`s 的突出显示颜色？

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2012-08-12T07:04:34.037

您可以按如下方式执行此操作。将表格单元格的选择样式设置为`UITableViewCellSelectionStyleNone`。这将删除蓝色背景突出显示。然后，为了使文本标签突出显示以您想要的方式工作，而不是使用默认的 UITableViewCell 类，创建一个子类`UITableViewCell`并使用您自己的实现覆盖默认实现，`setHighlighted:animated`根据突出显示的状态将标签颜色设置为您想要的.

```
- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated
{
    if (highlighted) {
        self.textLabel.textColor = [UIColor whiteColor];
    } else {
        self.textLabel.textColor = [UIColor blackColor];
    }
} 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2013-08-14T07:14:53.047

如果在 iOS7 之前工作，请将您的单元格选择样式设置为无

```
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

否则，离开它`UITableViewCellSelectionStyleDefault`

然后：

```
UIView *selectedView = [[UIView alloc]init];
selectedView.backgroundColor = [UIColor redColor];
cell.selectedBackgroundView =  selectedView; 
```

此代码将正常工作

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-08-12T07:07:02.640

将选择样式设置为无后，您可以使用以下委托方法：

```
-(NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

在这里实现你的代码，像这样

```
-(NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    CustomCell *cell = (CustomCell *)[tableView cellForRowAtIndexPath:indexPath];
    [cell.lbls setTextColor:[UIColor whiteColor]];
    return indexPath;
} 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-01-10T21:25:20.097

要完成这项工作，您必须将选择样式设置为`UITableViewCellSelectionStyleNone`，然后您应该覆盖该方法`setSelected:animated:`以获得所需的结果。当您看到蓝色（或灰色）选择时，它的作用与 iOS 的自动选择机制相同。

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    if (selected) {
        self.textLabel.textColor = [UIColor whiteColor];
    } else {
        self.textLabel.textColor = [UIColor blackColor];
    }
} 
```

您还可以通过其他方式自定义它，例如通过更改 UITableViewCell 背景等。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2012-08-12T07:21:13.600

在 cellForRowAtIndexPath 中使用以下代码：

```
[cell setSelectionStyle:UITableViewCellSelectionStyleNone];

[cell.myLabel setHighlightedTextColor: [UIColor whiteColor]]; // for all your labels 
```

希望这对你有用。

享受编码:)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-05-09T06:46:22.153

覆盖您的子类中的以下函数`UITableViewCell`。

```
override func setHighlighted(highlighted: Bool, animated: Bool) { }
override func setSelected(selected: Bool, animated: Bool) { } 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-02-09T19:46:51.247

为了匹配标准选择样式行为，您需要同时覆盖`setHighlighted:animated:`和`setSelected:animated:`。您可能希望将该代码移动到共享方法中以避免重复代码。

```
override func setHighlighted(highlighted: Bool, animated: Bool) {

    setAsSelectedOrHighlighted(highlighted, animated: animated)
    super.setHighlighted(highlighted, animated: animated)
}

override func setSelected(selected: Bool, animated: Bool) {

    setAsSelectedOrHighlighted(selected, animated: animated)
    super.setSelected(selected, animated: animated)
}

func setAsSelectedOrHighlighted(selectedOrHighlighted: Bool, animated: Bool) {

    let action = {
        // Set animatable properties
    }

    if animated {
        UIView.animateWithDuration(1.0, delay: 0, options: .CurveEaseInOut, animations: action, completion: nil)
    }
    else {
        action()
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-01-23T03:28:40.367

在您的自定义单元格中，覆盖 awakeFromNib 和 setSelected 的默认实现：

```
- (void)awakeFromNib {
    // Initialization code
    UIImageView * imageView = [[UIImageView alloc] initWithFrame:self.bounds];
    imageView.image = [UIImage imageNamed:@"cell_selected_img"];
    self.selectedBackgroundView = imageView;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
    if (selected) {
        self.lblCustomText.textColor = [UIColor whiteColor];
    } else {
        self.lblCustomText.textColor = [UIColor blackColor];
    }
} 
```

还要确保*选择样式*未设置**为****None**。

 *** * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-27T17:28:37.590

我可以让它工作的唯一方法是：

```
- (void)awakeFromNib {
    UIView *bgColorView = [[UIView alloc] init];
    bgColorView.backgroundColor = [UIColor colorWithRed:(55.0/255.0) green:(163.0/255.0) blue:(237.0/255.0) alpha:1.0];
    bgColorView.layer.masksToBounds = YES;
    self.selectedBackgroundView = bgColorView;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-20T10:30:00.977

您也可以使用 contentView.alpha。这是示例。

首先，为您的单元格设置选择样式：

```
[cell setSelectionStyle:UITableViewCellSelectionStyleNone]; 
```

接下来，在自定义单元类中使用动画示例覆盖此方法：

```
 - (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated {
    [super setHighlighted:highlighted animated:animated];

    if (highlighted) {
        [UIView animateWithDuration:0.15f animations:^{
            self.contentView.alpha = 0.5f;
        }];
    } else {
        [UIView animateWithDuration:0.35f animations:^{
            self.contentView.alpha = 1.f;
        }];
    }
  } 
```**

# android - 无法在图像视图上绘制边框

> ID：11920162
> 
> 赞同：0
> 
> 时间：2012-08-12T06:25:53.627
> 
> 标签：android, imageview

我正在尝试在 imagview 上设置边框，一旦我在 imageview 边框上设置图像就会消失。图像覆盖在整个视图上。试图从图库中获取图像。

**图像.xml**

```
 <ImageView
    android:id="@+id/selectedImage"
    android:layout_width="157dp"
    android:layout_height="157dp"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="20dp"
    android:background="@drawable/border"
   /> 
```

**边框.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

<solid android:color="#FFFFFF" />

<stroke
    android:width="2dp"
    android:color="#000000" />

<padding
    android:bottom="1dp"
    android:left="1dp"
    android:right="1dp"
    android:top="1dp" >
</padding> 
```

任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T06:30:22.040

将填充设置为`ImageView`少数`dp`，看看是否可以看到边框。实际上从中删除填充`Shape`并将填充设置为`ImageView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T06:46:42.327

将图像视图放在布局中，并将该包装器布局的背景设置为边界。

# sublimetext2 - 如何在 Sublime Text 2 Snippets 中使用美元符号/JQuery？

> ID：11920176
> 
> 赞同：32
> 
> 时间：2012-08-12T06:28:21.653
> 
> 标签：sublimetext2

我正在尝试使用 Sublime Text2 创建一些代码“Snippets”，除了我尝试添加 jQuery 代码外，一切正常。显然，任何包含以 a 开头的行的“片段”代码`$`都将无法正常工作。我在网上找不到任何关于此的答案。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-08-12T08:48:56.907

你试过`$`用 a转义`\`吗？

例如在 PHP 中，$GLOBALS 片段是：

```
<snippet>
    <content><![CDATA[\$GLOBALS['${1:variable}']${2: = }${3:something}${4:;}$0]]></content>
    <tabTrigger>globals</tabTrigger>
    <scope>source.php</scope>
    <description>$GLOBALS['…']</description>
</snippet> 
```

正如您在 中看到的`<content>`，$GLOBALS 表示为 \$GLOBALS。这是因为 $ 是用于 ${1:variable} 等字段的符号。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-29T17:24:23.090

虽然本身不​​是“答案”，但我的评论更像是一个例子。

我有同样的问题，但在 Sublime Text 2 中创建 jQuery 的速记`document.ready`函数片段。

有了你的回答，我就能让它工作：

```
<snippet>
  <content><![CDATA[
    \$(function(){
      \$("$1").$2("$3");
     });
  ]]></content>
     <tabTrigger>jq</tabTrigger>
</snippet> 
```

键入`jq`，按`TAB`，您会得到：

```
$(function(){
    $("|").("");
}); 
```

请注意，光标位于第一组括号内，这是由`$1`代码段中的 引起的。输入完值后，`TAB`再次按下，光标将移动到方法所在的`$2`位置，即代码段中的位置。再按`TAB`一下，光标移到第二组括号 where `$3`is。

希望这对其他人有帮助。

# c++ - Opengl cpp 代码可在 Windows 和 Mac 上运行？

> ID：11920177
> 
> 赞同：0
> 
> 时间：2012-08-12T06:28:24.627
> 
> 标签：c++, windows, macos, opengl, if-statement

我想知道是否有任何 if 语法可用于在 mac 和 windows 上运行 opengl c++ 代码。更具体地说，我可以在代码的开头放置一个 if 条件来确定代码是在 mac（通常是 xcode）还是在 windows（通常是 visual c++）上运行，并相应地包含头文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T06:43:10.823

您可以使用预处理器`#ifdef`。

```
#ifdef __APPLE__
#ifdef TARGET_OS_MAC

  #include <osx.h>

#endif
#elif defined(_WIN32) || defined(_WIN64)

  #include <win.h>

#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T06:47:23.330

您需要抽象系统接口以使用合适的接口。这可以在构建时检测到，或者您可以为 Windows 构建准备好 MSVC 项目，并在 OS X 上准备好 Xcode/Makefile 项目。

在 Win32 上，我相信您知道使用 Win32 API 仍然很重要。在 OS X 上，Carbon 即将不受支持，因此您的最小窗口系统将必须使用 Objective C 来实现。幸运的是，这并不是很困难，一旦您拥有它，您的主应用程序就可以毫无顾虑地执行。

对于原型设计，使用为此设计的框架可能更明智，例如 SDL/GLUT/Qt 等。对于生产，您将获得更好的性能和控制，并专门针对每个目标平台。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T08:51:49.487

如果您在 C/C++ 中使用标准头文件，那么您只需要使用 glut 来初始化 OpenGL 窗口并从用户那里获取键盘/鼠标事件。GLUt 将为您抽象操作系统层。

这是 GLUT for mac 的链接（入门）

[http://developer.apple.com/library/mac/#samplecode/glut/Introduction/Intro.html](http://developer.apple.com/library/mac/#samplecode/glut/Introduction/Intro.html)

在上一个链接中你会发现（OS Independent）

这是 GLUT 下载链接：

[http://www.opengl.org/resources/libraries/glut/glut_downloads.php](http://www.opengl.org/resources/libraries/glut/glut_downloads.php)

您只需要两个单独的项目文件 myProject.xcode 和 myProject.vcproj 所有其他文件都应该共享。

**注意：** 应该避免使用计时器和所有其他与操作系统相关的东西，而应该使用 GLUT 给定的功能。

在为 windows/Linux/mac 构建时，您必须链接到适当的 GLUT。

# php - 等效于 HTML/PHP 网站的 ASP.NET 母版页

> ID：11920178
> 
> 赞同：2
> 
> 时间：2012-08-12T06:28:34.683
> 
> 标签：php, html, css

我有一个网站，其中大部分内容（如侧边栏、背景等）在网站的大多数页面中都是相似的。

在 ASP.NET 中，对于这种情况，有母版页。什么是简单的等价物`html`或`php`易于使用？（从未使用过 php 工具，网站是简单的 html，但主机是 php 服务器）

其次，有没有什么东西可以避免下载多余的内容并为用户加快速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T06:32:01.500

这通常通过包含在 PHP 中完成。查看[`include()`](http://php.net/manual/en/function.include.php)、[`include_once()`](http://php.net/manual/en/function.include-once.php)、[`require()`](http://www.php.net/manual/en/function.require.php)和[`require_once()`](http://www.php.net/manual/en/function.require-once.php)。

您可以将页面的各个部分放在各自单独的文件中，并以这种方式单独管理它们。

关于缓存，这只是为您要查找的内容[设置适当的缓存标头的问题。](https://stackoverflow.com/a/1971757/362536)最佳做法是将静态资源（JavaScript、CSS 等）保存在自己的单独文件中，以便更轻松地在您的站点中缓存它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T07:20:45.520

就个人而言，我总是在 php 网站中使用 smarty.. 因为它为您提供了可能性，例如在 dot net 中将代码与标记分开。

我通常会做这样的事情

```
class masterpage
{
  protected $subpage;

  public function output()
  {
    $smarty = new Smarty();
    $smarty->assign('subpage', $this->subpage);
    return $smarty->fetch('masterpage.tpl');
  }
}

class helloworld extends masterpage
{
  public function __construct()
  {
    this->subpage = 'helloworld.tpl';
  }
}

class ciao extends masterpage
{
  public function __construct()
  {
    this->subpage = 'ciao.tpl';
  }
} 
```

作为模板文件，我有这样的东西

主页：

```
<html>

<body>
  <div>This is the menu that has to be on every page!!!!</div>
  {include file="$subpage"}
</body>

</html> 
```

helloworld.tpl：

```
hey there: Hello world! 
```

ciao.tpl:

```
hey there: ciao! 
```

通过这种方式，您可以创建用作页面（asp.net webform）的类和一个用作母版页等价物的类母版页。

# ruby-on-rails - 覆盖提交按钮的路径

> ID：11920181
> 
> 赞同：0
> 
> 时间：2012-08-12T06:29:32.843
> 
> 标签：ruby-on-rails, routes

现在我有一个提交按钮，代码看起来像这样

`<%= f.submit :class => "btn btn-primary btn-shadowed smallButton" %>`

我想专门将该按钮指向我的`signup_path`. 这样做的正确语法是什么？谷歌搜索没有帮助，并且由于部署限制，我无法在本地运行或部署到 heroku（这是一个很长的故事，在这种情况下我无法提供帮助）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T06:34:06.827

您需要在表单中设置路径，提交只是提交它所属的表单。

如果您不想通过表单来控制它，也许您想要一个链接而不是提交按钮，您仍然可以像按钮一样设置链接的样式。

有关更改表单的详细信息，请参见此处[http://apidock.com/rails/ActionView/Helpers/FormHelper/form_for](http://apidock.com/rails/ActionView/Helpers/FormHelper/form_for)

# c# - Plinq 在单核中？

> ID：11920182
> 
> 赞同：2
> 
> 时间：2012-08-12T06:30:02.427
> 
> 标签：c#, .net, .net-4.0, plinq

据我所理解：

> 利用多核或多处理器的编程称为并行编程。

但是如果我*没有*>1 个核心呢？

执行如下命令：

```
"abcdef".AsParallel().Select(c=>char.ToUpper(c)).ToArray() 
```

将按*顺序*运行？

（我知道即使我有 >1 个核心，Plinq 优化仍然可以选择*不*并行。但我的问题是关于拥有 ==1 个核心。）

**或者**

它仍然可以在*多个*线程（1个核心）中，例如：

![在此处输入图像描述](../Images/87271f979e791b74f18941db12abb040.png)

*（但恕我直言，它不会是并行编程）*

我有点困惑。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T06:39:54.157

[PLinq 将默认允许的并行度为 *Math.Min(ProcessorCount, MAX_SUPPORTED_DOP) 其中 MAX_SUPPORTED_DOP* 对于 .NET 4.0 为 64，对于 .NET 4.6 为 512](http://msdn.microsoft.com/en-us/library/dd383719.aspx)

您可以显式地将最大并发限制提高到超出该限制（或将其降低到该限制以下），这使 PLinq 可以自由地使用 1 到 <limit> 个线程来完成您的工作。通常提高默认值仅在您的工作受大量 I/O 限制时才有用。

换句话说，除非您使用例如[WithDegreeOfParallelism](http://msdn.microsoft.com/en-us/library/dd383719.aspx)更改默认并发限制，否则您的任务将使用单个内核上的单个线程运行。

# xcode - 从存档中恢复 Xcode 项目？

> ID：11920188
> 
> 赞同：0
> 
> 时间：2012-08-12T06:31:14.227
> 
> 标签：xcode, file, archive, recover

我不知道如何，但我删除了我的 .Xcodeproj 以及与之相关的所有内容。我真的不知道如何，但它在应用商店，我仍然有它的存档。有没有办法找回它？我知道它不是严格意义上的编程，但是有什么方法可以从我目前拥有的存档中恢复我的项目？

任何人推荐的任何提示或程序将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T06:42:23.597

您可以通过以下链接

[http://mackeeper.zeobit.com/mac-undelete](http://mackeeper.zeobit.com/mac-undelete)

如果您使用 TimeMachine 备份，您也可以尝试检索它。

希望对你有帮助！！！

# c# - AutoMapper 将对象映射到任何继承的目标类型

> ID：11920190
> 
> 赞同：1
> 
> 时间：2012-08-12T06:32:12.773
> 
> 标签：c#, automapper-2

让我们有一个 DTO 类：

```
public class UserDto {
  public int Id { get;set; }
} 
```

和 viewmodel 类（基础 mvc 项目库）：

```
public abstract class UserViewModelBase {
  public int Id { get;set; }
} 
```

现在当我像这样为自动映射器创建映射时：

```
Mapper.CreateMap<UserDto, UserViewModelBase>(); 
```

在主 web mvc 项目中，我创建了 UserViewModelBase 的实现，如下所示：

```
public class UserViewModel: UserViewModelBase {
} 
```

现在当我打电话给这个时：

```
Mapper.Map<UserDto, UserViewModel>() 
```

它失败并出现这样的错误：

**缺少类型映射配置或不支持的映射。**

**UserDto -> UserViewModel**

据我了解，这是因为我没有定义 UserDto 和 UserViewModel 之间的直接映射。我想知道是否有某种方法可以告诉 AutoMapper 使用此地图`Mapper.CreateMap<UserDto, UserViewModelBase>();`它应该接受任何类型作为继承自`UserViewModelBase`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:26:22.720

似乎没有人知道如何实现这一点，所以我为此制定了解决方法。

`Mapper.CreateMap(...)`我的解决方法是使用concreate 目标类多次构建映射（使用），例如：

在 ClassLibrary1 中：

```
Mapper.CreateMap<UserDto, UserViewModel1>(); 
```

在第二个 ClassLibrary2 中：

```
Mapper.CreateMap<UserDto, UserViewModel2>(); 
```

即使 UserViewModel1 和 UserViewModel2 派生自同一个基类`UserViewModelBase`。

# javascript - HTML Canvas 像素数据类型

> ID：11920191
> 
> 赞同：0
> 
> 时间：2012-08-12T06:32:14.180
> 
> 标签：javascript, html

我正在使用 HTML5 和 Javascript 将鼠标位置和鼠标移动作为画布中的像素来获取。使用这种风格，是否可以将像素数据类型作为双精度数据类型？因为看起来像素数据总是作为整数数据类型返回。

我之所以问，是因为我有一个后端系统，预计将像素数据作为双数据类型处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T09:29:06.450

使用 Jquery e.pageX 和 e.pageY 属性，它们是数字。JavaScript 中的所有数字都是双精度数：也就是说，它们存储为 64 位 IEEE-754 双精度数。

# java - 在java中使用AES有效加密文件

> ID：11920192
> 
> 赞同：6
> 
> 时间：2012-08-12T06:32:22.477
> 
> 标签：java, encryption, aes

我正在开发一个应该加密一些小（小于 1MB）和大（大约 500MB）文件的应用程序。
如何加密文件并将加密版本有效地保存在磁盘上的某个位置（即快速）？
如果需要时间，我可以进行加密吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T06:53:39.500

假设你有一个 AES 密钥和一些输出流，下面是你如何向流中添加加密装饰器的方法。

```
Cipher enc = Cipher.getInstance("AES/CBC/PKCS5Padding");
enc.init(Cipher.ENCRYPT_MODE, key);
AlgorithmParameters params = enc.getParameters();
IvParameterSpec iv = params.getParameterSpec(IvParameterSpec.class);
out.write(iv.getIV());
out = new CipherOutputStream(enc, out); 
```

这会将 IV 添加到密文的开头；解密时，您需要将其解析出来以初始化密码。

从长远来看，更好的解决方案是使用实现加密消息语法的库，这是 S/MIME 的基础。这记录了有关可用于解密的算法和密钥的元数据。

如果您的提供商实现它，我还会推荐像 GCM 或 CCM 这样的 AEAD 模式。（SunJCE 没有。）这些将验证文件是否正确解密，并且没有损坏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T06:55:19.813

正如 Bhavik 上面提到的，BouncyCastle 将是一个不错的选择，它轻巧且成熟。您绝对可以看到加密的进度，因为您可以控制一次读取和写入的数量。您可以从文件中读取字节，对其进行加密并写回管道中的另一个文件。

这个问题中提到了一个例子： [How to encrypt a string/stream with bouncycastle pgp without starting with a file](https://stackoverflow.com/questions/3939447/how-to-encrypt-a-string-stream-with-bouncycastle-pgp-without-starting-with-a-fil)

# c++ - Win32 API 检查当前窗口是对话框还是普通窗口

> ID：11920195
> 
> 赞同：2
> 
> 时间：2012-08-12T06:33:03.117
> 
> 标签：c++, c, api, winapi

我正在处理 win32 api 子类。我的问题是我不知道我的子类过程是在对话框或“普通窗口”上运行的。谁能告诉我如何确定当前窗口是对话框还是普通窗口？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T06:35:27.357

检查窗口类的名称。除此之外，没有正式的记录方法来确定这一点。

# ruby-on-rails - rails 活动记录 has_many 自定义查询

> ID：11920202
> 
> 赞同：1
> 
> 时间：2012-08-12T06:35:17.467
> 
> 标签：ruby-on-rails, activerecord, has-many

是否有可能有一个活动记录 has_many 关联，但我有一个特定的条件。

```
class Team < AR
  has_many :matches, query: 'team1 == ID or team2 == ID'
end

class Match < AR
  attr_accessible :team1, :team2
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T06:39:31.477

这是一个潜在的解决方案：

```
class Team < AR
  def matches
    Match.where("team1 = ? or team2 = ?", id, id) # or: { team1: id, team2: id }
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T09:04:28.307

你可以使用`finder_sql`，但它会在 Rails 4 中被弃用，我不确定是否有新的方法可以做到这一点：

```
class Team < AR
  has_many :matches, finder_sql: proc { "SELECT * FROM matches WHERE (matches.team1 = #{id} or matches.team2 = #{id})" }
end 
```

另一种解决方案：

```
class Team < AR
  has_many :matches_as_team1, class_name: "Match", foreign_key: "team1"
  has_many :matches_as_team2, class_name: "Match", foreign_key: "team2"
  def matches
    matches_as_team1 | matches_as_team2
  end
end 
```

在此解决方案中， 的结果`Team#matches`是一个数组，而不是 a `Relation`，因此您将无法执行类似`team.matches.limit(10)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T07:40:02.490

我希望您的关联保持正常，并稍后在 where 条件下应用查询。

```
class Team < AR
  has_many :matches

  scope :team_details, lambda {|id1,id2| matches.where("team1 = ? OR team2 = ?",id1,id2)} 
end 
```

团队（团队的对象）

然后打电话

```
team.team_details(id1,id2) 
```

# php - htaccess & RewriteRule

> ID：11920218
> 
> 赞同：0
> 
> 时间：2012-08-12T06:38:35.597
> 
> 标签：php, .htaccess

想知道这是否可能。

我正在使用 htaccess 重写我的页面，并且我正在使用以下行：

```
RewriteRule ^([a-zA-Z0-9^-]+)$ page.php?page=$1 
```

将其重写为干净的链接。page.php 然后适当地调用数据。我想知道它是否可能，如果变量是 3 个字符长，它会重定向到另一个页面。

```
RewriteRule ^([a-zA-Z0-9^-]+{3})$ small.php?char=$1 
```

有类似上面的吗？那可能吗？出于说明目的，我只是粘贴了 {3}。例如，如果我的地址是 www.example.com/abc，它会重定向到 small.php?char=abc，如果它不再是它会重定向到 page.php 地址。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T07:04:22.603

您可以使用[RewriteCond](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)创建一个 if 语句，如果匹配则将用户重定向到给定的链接。RewriteCond 定义了一个规则条件，可以有多个，如果它们都匹配，则使用后续的 RewriteRule：

```
RewriteCond %{REQUEST_URI} /^([a-zA-Z0-9^-]+{3})$
RewriteRule ^([a-zA-Z0-9^-]+{3})$ small.php?char=$1 [NC,L]

RewriteRule ^([a-zA-Z0-9^-]+)$ page.php?page=$1 [NC,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T07:48:13.423

我会在没有 的情况下简单地尝试这个`+`，将 small.php 规则放在前面并添加 L 标志（最后一个），这样如果它与小版本匹配，它将退出：

```
RewriteRule ^([a-zA-Z0-9^-]{3})$ small.php?char=$1  [L]
RewriteRule ^([a-zA-Z0-9^-]+)$ page.php?page=$1     [L] 
```

`+`代表一个或多个字符。`{3}`正好代表 3 个字符。

# c++ - c ++静态变量在发布模式下初始化错误

> ID：11920222
> 
> 赞同：2
> 
> 时间：2012-08-12T06:38:45.077
> 
> 标签：c++, stl, static, release

项目环境：
windows 7 x64 pro
visual studio 2008 c++ sp1 pro
win32 api
directx 9.0c 2010 年 6 月
boost

问题：
我的项目在调试模式下运行成功。但只发生发布模式错误。

```
template <typename T>
class SceneVector : public std::vector<T>
{
public:
    SceneVector()
    {
        for(int i = 0 ; i < MAX_OBJNODE_NUMBER ; ++i) push_back(NULL);
    }
}; 

//i think the class's contents are not important
class ITaggingDebugInfo
{
protected:
    int idvl;
public:
    ITaggingDebugInfo();
    ~ITaggingDebugInfo();
    int iTaggindDebugInfoID;
    virtual std::vector<AbstractTag*> OnMakeTagList(int VlogicPackageID);
    static void Select(int vlid, int id);
    static stdext::hash_map<int,SceneVector<ITaggingDebugInfo*>> TaggingDebugInfoManager; //problem
    static std::vector<AbstractTag*> taglist[MAX_SCENE_NUMBER];             
};

//on other's cpp file
stdext::hash_map<int,SceneVector<ITaggingDebugInfo*>> ITaggingDebugInfo::TaggingDebugInfoManager; 
```

静态 hash_map 的构造函数时会出现释放模式问题。
这是我的 STL 调试步骤。步骤1

```
hash_map()
: _Mybase(key_compare(), allocator_type())
    {   // construct empty map from defaults
    } 
```

第2步

```
 explicit _Hash(const key_compare& _Parg,
    const allocator_type& _Al)
    : _Traits(_Parg), _List(_Al),
        _Vec(_Al),
        _Max_bucket_size(_Bucket_size)
    {   // construct empty hash table
    _Init();
    } 
```

第 3 步

```
void _Init(size_type _Buckets = min_buckets)
    {   // initialize hash table with _Buckets buckets, leave list alone
    _Vec.assign(_Buckets + 1, end());
    _Mask = _Buckets - 1;
    _Maxidx = _Buckets;
    } 
```

当第 3 步时，**此**指针为 NULL(0x00000000)（由调试器的观察者。但由于释放模式，它不自信）和访问冲突异常。

但在调试模式下不会发生错误。
我真的不知道为什么会出现这个问题。来人帮帮我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T07:01:18.783

您不应该像这样从 STL 容器派生，`vector`因为它们不提供虚拟析构函数。我怀疑您遇到的行为可能是因为这个。在此处阅读有关这样做的所有利弊：[您不应从 std::vector 继承](https://stackoverflow.com/questions/4353203/thou-shalt-not-inherit-from-stdvector)

# android - Keytool 命令不要求输入密码

> ID：11920226
> 
> 赞同：4
> 
> 时间：2012-08-12T06:39:35.467
> 
> 标签：android, facebook

在 fb 上制作 android 应用程序时，我必须填写字段**ANDROID HASH KEY** 我查找教程并成功运行命令

```
 keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -binary | openssl base64 
```

我确实在我的窗口中设置了 keytool 和 openssl 的环境变量以使其运行。

现在的问题是我已经生成了应用程序签名，但是这个命令没有要求输入密码。Facebook说会要求输入密码，你应该输入**android**作为密码

如果在正确的道路上指导我。总是感谢帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T07:34:38.810

奇怪的是它没有提示您输入密码，当我刚刚尝试时它为我提示。根据文档：

> 一般规则：如果该工具不要求输入密码，则您的密钥库路径不正确。

您应该验证 ~/.android/debug.keystore 存在，并且`keytool`安装`openssl`在您的机器上。

如果它仍然不起作用，请不要担心！[我们的文档还通过遵循本教程](https://developers.facebook.com/docs/mobile/android/build/)提供了另一种选择：

1.  通过修改在我们的 Android SDK 中启用调试`Util.java`：

    `private static boolean ENABLE_LOG = true;`

2.  按照步骤 6.1 到 6.3 进行操作，主要是确保您的应用具有访问 Internet 的权限，并且启用了 SSO。

3.  在您的手机或模拟器上构建并运行该应用程序。您应该看不到权限对话框，因为您没有在应用程序的仪表板中输入应用程序签名。通过 logcat 检查 Android SDK 调试日志（因为您在步骤 1 中启用了日志记录），并查看您的日志条目中是否存在“Android 密钥不匹配”条目。此错误还会为您提供发送到 Facebook 的密钥。记下密钥的值并将其输入您的 Facebook 应用设置，并确保保存您的设置。

4.  通过修改 SSO 成功完成后关闭调试`Util.java`：

    `private static boolean ENABLE_LOG = false;`

让我知道这是否有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:16:07.050

我使用`Windows`机器并且遇到了同样的问题。而不是使用`environment variable`我实际上提供了完整`qualified path`的`keystore`（*ie* `"C:\Users\channa.HOME\\.android\debug.keystore"`）并且它按预期要求我的密码。

# time - 尝试使用 do_gettimeofday() 在内核中测量时间时出现链接错误

> ID：11920231
> 
> 赞同：0
> 
> 时间：2012-08-12T06:40:03.783
> 
> 标签：time, linux-kernel, linker-errors

我正在尝试对驱动程序进行的某些函数调用进行计时。所以我打电话`do_gettimeofday`问`struct timeval`时间。它编译，但链接器因此抱怨：

```
drivers/built-in.o: In function `SPC_TIMING_add':
hid-quirks.c:(.text+0x31354): undefined reference to `__aeabi_i2d'
hid-quirks.c:(.text+0x31384): undefined reference to `__aeabi_i2d'
hid-quirks.c:(.text+0x31398): undefined reference to `__aeabi_dadd'
make: *** [.tmp_vmlinux1] Error 1 
```

我尝试直接读取 的值`xtime`，并得到相同的结果。

显然，链接顺序存在某种错误，但是由于我不确定从哪里来`__aeabi_i2d`，`__aeabi_dadd`所以我不知道要编辑哪个makefile。

**更新**：原来“aeabi”是指 ARM 架构的“嵌入式应用程序二进制接口”（EABI）。该`dadd`指令是双精度加法，并且`i2d`是整数到双精度的转换（根据[this](http://infocenter.arm.com/help/topic/com.arm.doc.ihi0043c/IHI0043C_rtabi.pdf)）。我想这意味着我的问题不仅仅是链接，而是说服编译器使用正确的指令或代理指令（这似乎是在 中所做的`arch/arm/lib/lib1funcs.S`）。

**更新**：根据谷歌搜索，`__aeabi_dadd`通常别名为`__adddf3`，并`__aeabi_i2d`别名为`__floatsidf`.

**更新**：仔细查看实际编译器的输出后，发现错误与`do_gettimeofday`. 只是注释掉调用`do_gettimeofday`允许编译器的优化器删除对执行双精度浮点运算的函数的引用。一旦不再调用该函数，该错误就不会出现。这就是为什么我认为它是由`do_gettimeofday`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:18:40.630

如果你在内核中，你可能不应该使用`do_gettimeofday()`.

我认为正确的方法是使用`ktime`函数族，例如：

```
ktime_t start, end, delta;

start = ktime_get();
...
end = ktime_get();

delta = ktime_sub(end, start); 
```

然后有一堆转换例程`ktime.h`用于转换`delta`为毫秒/纳米/等秒。

# php - 定义 php 类

> ID：11920246
> 
> 赞同：1
> 
> 时间：2012-08-12T06:43:07.507
> 
> 标签：php, oop

> **可能重复：**
> [PHP 方法链接混淆](https://stackoverflow.com/questions/8889208/php-method-chaining-confusion)

如果我有一个 php 类

```
class ClassName {
    function f1() {
        //...
    }
    function f2() {
        //...
    }
}
$cn = new ClassName(); 
```

如何定义我可以在样式中使用函数的类

```
$cn->f1()->f2(); 
```

代替

```
$cn->f1();
$cn->f2(); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T06:46:42.200

```
class ClassName {
    public function f1() {
        //...
        return $this;
    }
    public function f2() {
        //...
        return $this;
    }
    // and for a static
    public static function sf1() {
        // ...
        return self;
    }
} 
```

但是，方法链接是个**坏主意**。它使代码难以阅读。

如果您要返回同一对象的实例，则不会直接有害。但是，当您开始编写类似的代码时`$locator->get('MySQL')->connection()->query('SELECT 1');`，那些坚持维护您的代码的人可能会找到您的住所并惩罚您。

此外，如果您是按照*“但是 jquery 做到了”*的推理，我很遗憾地通知您，但这 - 通常情况下 - 表明某事是一种不好的做法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T06:46:20.003

要在函数中进行链接，您需要从函数**返回当前对象**。

```
return $this; 
```

在你的函数中添加这个`f1()`..

```
class ClassName {
    function f1() {
        //...
        return $this;
    }
    function f2() {
        //...
        return $this;
    }
} 
```

# c# - 如何在后台线程中加载图像而不影响 UI？

> ID：11920249
> 
> 赞同：1
> 
> 时间：2012-08-12T06:43:23.497
> 
> 标签：c#, winforms, backgroundworker

我正在从互联网上获取一些图像并加载到我的 winform 中。一切正常，除了从慢速连接中获取图像时的时间延迟。我希望在后台获取图像，但 UI 不应变得无响应。

我尝试了[“BackgroundWorker”](https://stackoverflow.com/questions/2206982/how-to-preload-images-in-a-background-thread)，但没有奏效。有没有其他方法可以做到这一点？我读到了异步调用，但我不确定它是否对我有用。

**后台工作者 ::**

```
 foreach(String str in images )
            {
              BackgroundWorker bw=new BackgroundWorker();
              bw.DoWork += (s, e) => { run(str); };  // 
              bw.RunWorkerAsync();
            } 
```

并`run()`简单地将图像 url 设置为图片框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T07:20:04.277

除了从创建 UI 对象的线程之外，您无法进行 UI 更新。

但是，您可以使用[“Invoke”](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)在类的主线程上进行调用。

```
Invoke( (Action)(() => { pictureBox.image = loadedImage; }) ); 
```

# c# - Visual c# 表单控件重叠/分层

> ID：11920250
> 
> 赞同：1
> 
> 时间：2012-08-12T06:43:33.553
> 
> 标签：c#, visual-studio-2010

无论如何控制哪些控件（按钮，组框，等）将与其他控件重叠？例如...

我在表单中添加了一个 button1，然后是 button2。但是，（出于某种原因）我希望 button1 重叠 button2 如果它们曾经重叠。

我用谷歌搜索了这个，一无所获，如果我发现了一些机会，它会把我带到这里。我知道这可能很容易做到。

感谢您的帮助和时间。

我试图通过添加按钮来避免复制粘贴的噩梦。我是 Visual c# 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T06:49:08.523

是的，如果控件太靠近，它们可能会重叠。没有什么能阻止您添加对另一个控件的控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T06:53:39.360

如果您使用的是 Visual Studio Windows 窗体设计器，则可以右键单击 GUI 元素并选择*“置前”*或*“置后”*。或者您也可以使用格式菜单项： ![在此处输入图像描述](../Images/e8d62fb73eae0f692ded7ff5d6e44e7e.png)

另一种选择是通过代码来完成；假设您有两个按钮（称为 buttonOK 和按钮 Cancel），您可以通过给它一个更高的 TabIndex 来控制哪个按钮。

```
buttonOK.TabIndex = 0;
buttonCancel.TabIndex = 1; 
```

# arrays - Excel：通过单元格引用将数组参数传递给公式

> ID：11920251
> 
> 赞同：4
> 
> 时间：2012-08-12T06:44:16.070
> 
> 标签：arrays, excel, excel-formula, vba

就代码而言，这似乎很简单，但我仍然卡在#VALUE 上。

我制作了一个自定义 Excel 函数，将数组作为参数，当这样使用时，它本身就可以正常工作： =countArray({3,5}) 会给出 2（为了说明，实际公式不同）。

但是，我想用作参数的实际数组包含在另一个单元格中（例如 ={3,5}）。因此，我想将该函数称为 =countArray(A1)，使用对包含我想用作参数的数组的单元格的引用，而不是直接包含数组，所以我可以使用一个和相同的公式。

有没有办法做到这一点？

```
Cell formulas:
A1: ={3,5}
B1: =countArray({3,5})
B2: =countArray(A1)

Function countArray(arr()) As Integer
countArr = UBound(arr)
End Function 
```

B1 中的公式有效，B2 中的公式无效。至于 A1 的内容，当像这样放入 Excel 时，单元格值仅显示 3 ——因此，我假设单元格因此实际上包含一个数组。不是这样吗？如果不将其存储为分隔字符串并将其转换为数组，则单元格是否不可能包含数组作为其值（或从其他单元格中引用这些数组）？

**编辑**：已经有几年了，所以也许我可以评论一下自从我发布这个问题以来我尝试过的道路。最初，我尝试在单元内 JSON 结构上进行操作，并取得了一定的成功。从那时起，我还发现最近的 Power Query（自 Excel 2016 原生集成以来）确实在其“单元格”中支持列表结构（以及其他），并且实际上支持[相关功能](http://office.microsoft.com/en-us/excel-help/power-query-formula-categories-HA104122363.aspx)。我不再使用这些中的任何一个（现在对 Spark 更感兴趣），但希望这可能有助于其他人偶然发现这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T07:03:40.950

我不认为你有直接的方法......因为你想[将单元格值转换为数组](http://www.mrexcel.com/forum/showthread.php?11823-Converting-Cell-Value-To-Array)

希望能帮助到你！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:14:17.373

你可以试试这个：

```
Function countarray(arr As Variant) As Long
    If typename(arr) = "Range" Then
        countarray = UBound(Evaluate([arr].Formula))
    Else
        countarray = UBound(arr)
    End If
End Function 
```

# ios - 在应用程序中实现绘图的最有效方法是什么？

> ID：11920256
> 
> 赞同：0
> 
> 时间：2012-08-12T06:44:53.207
> 
> 标签：ios, cocoa-touch, uiimageview, core-graphics

我想在我的 PDF 阅读器应用程序中实现自由绘图。我看到了一个教程，它`UIImageView`用作渲染图纸的视图。我试过这个并且效果很好，除非我尝试保存绘图。有时它会阻止我从一页转到另一页，除非我点击边缘两次，其他时候过渡是平滑的。

那么实现此功能的最佳方法是什么？

**- 附加信息 -**

要保存绘图，我所做的是将其保存为图像，`UIImagePNGRepresentation`用于将其保存在目录中。保存图片的文件名基于文档的 bookId 和页码（例如 121-5.png）

现在要加载绘图，调用一个函数，该函数根据书的 id 和页码检查图像是否存在。因此，如果这本书的 ID 为 121，并且我在第 5 页，则该函数将加载图像“121-5.png”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T07:23:34.537

这只是一个猜测（我在此进行大量扩展为时已晚），但如果您尝试以最明显的方式进行保存部分，则可能您正在暂停主（UI）线程。可能你不是，如果它冒昧的话，很抱歉。如果是这样，这将导致整个界面停止运行，直到图像被渲染、压缩和保存。

两种简单的方法来解决这个问题：

*   启动一个后台线程来执行此操作，这将释放您的主线程以响应用户。（搜索`NSOperation`是一个开始。这里有一个[随机教程](http://www.icodeblog.com/2010/03/04/iphone-coding-turbo-charging-your-apps-with-nsoperation/)）
*   将要保存的 UILayer 传递到“下一页”，并在转换后进行保存。它仍然会使事情停滞不前，但至少用户会考虑下一步该做什么，而您将有 100 毫秒的时间来做某事。

# css - 即使第二个 div 溢出，如何保持两个内联块 div 并排

> ID：11920258
> 
> 赞同：4
> 
> 时间：2012-08-12T06:45:36.050
> 
> 标签：css, html

我有以下 html 和 css 代码：

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
body
{
  background-color:#d0e4fe;
}

div.container
{
  width: 600px;
  border: solid 1px black;
}

div.divLeft
{
  display:inline-block;
  border: solid 1px red;
  color: red;
}

div.divRight
{
  display:inline-block;
  border: solid 1px blue;
  color: blue;
}

</style>
</head>

<body>
  <div class="container">
    <div class="divLeft">
      <p>1 - Some short text</p>
    </div>
    <div class="divRight">
      <p>Some not too long text with the div besides the first one.</p>
    </div>
  </div>
  <div class="container">
    <div class="divLeft">
      <p>2 - Some short text</p>
    </div>
    <div class="divRight">
      <p>Some very long text that will eventually wrap because it is so long and when it wraps is when the trouble starts because the div moves down instead of staying besides the first one.</p>
    </div>
  </div>
</body>
</html> 
```

在第二种情况下，有没有办法将 div 保留在第一个之外，而不是移动到第一个下方。请注意，我不能为我的 div 使用固定宽度作为将出现在它们中的未知文本的长度。然后我只知道第一个 div 中的文本总是很短，而第二个 div 中的文本可能很长。

这是我想要的基本图：

```
First div text  Second div text stays beside the first one
                and wraps around still being aligned like this 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T20:55:02.560

行。我终于设法使用只有一行和两个单元格的表格来完成我需要的工作。桌子占据整个宽度。第一个单元格的文本是 nowrap ，因此它占用了它需要的所有空间。第二个单元格上的文本占据了剩余空间并根据需要进行换行并保持良好对齐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T06:51:07.817

元素根据其内容显示为`inline-block`换行并尝试保持内联。您正在使用的代码正是这样做的。当第二个 div 的内容溢出时，它会增加大小以适应。

对此的正确解决方案是添加`width`到元素中。

```
.divLeft { width: 150px; vertical-align: top; }
.divRight { width: 400px; vertical-align: top; } 
```

[演示](http://jsfiddle.net/Starx/juvwJ/)

# java - 如何在 java/codename one 中处理请求超时？

> ID：11920259
> 
> 赞同：0
> 
> 时间：2012-08-12T06:45:37.553
> 
> 标签：java, codenameone

我正在开发一个[代号为one的移动应用程序](http://www.codenameone.com)

我需要连接到服务器并从服务器获取一些数据。

获取数据后，我希望显示一个对话框。

但是，我还需要确保应用程序不会一直等待获取数据。例如，如果在某个特定的持续时间（比如 5 秒）内未获取数据，我希望终止与服务器的连接请求并显示一条消息，上面写着***“未获取数据！”***

**所以..我现在做的是：**

```
1)declare a timerTask which has the following line:

  NetworkManager.getInstance().addToQueueAndWait(c); //c is my connection object and i have //implemented the method readResponse() in it.

2)The method readResponse has a string which stores data fetched from server. this string is global and has a default value of "-1".

3)schedule a timer to run for every 5 secs with the above timerTask.

4)On the second run of the timer, I check if my string's value (which stores data fetched from server; ) has changed. If it has, i show the string in the dialog box else, I just say that data not fetched.

5)Cancel the timertask and the timer. 
```

我想知道的是：“我这样做对吗？” 如何确保我的连接请求被终止并且没有杂散线程在运行？

有没有更好的方法来实现我想要实现的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:39:05.687

为什么不使用`NetworkManager.setTimeout()`？

# machine-learning - 由主特征向量的特征值给出的主成分方差

> ID：11920264
> 
> 赞同：1
> 
> 时间：2012-08-12T06:46:33.133
> 
> 标签：machine-learning, pca, dimensionality-reduction, principal-components

主成分分析

我想知道为什么投影到主成分上的数据具有与主特征向量对应的特征值的方差？

我在教科书中找不到解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T13:13:14.640

在主成分分析 (PCA) 中，您正在计算原始坐标系的旋转，以使新协方差矩阵的所有非对角元素都变为零（即，新坐标不相关）。特征向量定义新坐标轴的方向，特征值对应于新协方差矩阵的对角元素（沿新轴的方差）。因此，根据定义，特征值定义了沿相应特征向量的方差。

请注意，如果您要将所有原始数据值乘以某个常数（值大于 1），则会产生增加数据方差（和协方差）的效果。如果您随后对修改后的数据执行 PCA，您计算的特征向量将是相同的（您仍然需要相同的旋转来使您的坐标不相关）但特征值会增加，因为沿新坐标轴的数据的方差会增加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T21:59:57.433

好问题。请阅读[CMU 的 36350 讲义](http://www.stat.cmu.edu/~cshalizi/350/lectures/10/lecture-10.pdf)。简而言之，构建 PCA 优化问题的方式导致了拉格朗日约束优化特征问题（第 2-5 页），该问题通过获取样本协方差矩阵的特征向量来解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T21:36:10.523

您在主成分分析中所做的是“对协方差矩阵进行对角化”，并且在对角化协方差的坐标基础中，您可以读取每个分量的方差。

要真正理解它，需要学习作为特征值问题基础的线性代数；诸如“Hermitian 矩阵的特征值在正交变换下是不变的”之类的东西，但是您可以尝试的是：

1.  生成一些`x`- 值作为具有方差的零均值高斯`sigma_x2`
2.  生成独立`y`值作为具有方差的零均值高斯`sigma_y2<sigma_x2`。
3.  将其可视化为二维数据集 - 请注意，它的构造使得相关矩阵是对角线，并且每个方向上的数据方差 ( `x,y`) 是协方差矩阵的对应元素。还要注意，这个矩阵的两个特征值是`sigma_x2,sigma_x1`并且特征向量是`[1,0]`和`[0,1]`。
4.  现在通过简单地旋转整个图片来构建一个相关的数据集。在数学上，选择一个正交矩阵`O`，并生成每个`[x,y]`样本的旋转版本。你会发现这个转换后的数据集的相关矩阵有非对角元素，即 和 之间的`x`相关`y`。但是如果你做特征值分解，特征向量只是用于首先旋转数据的正交矩阵的列，特征值是原始特征值。

主成分分析，即协方差矩阵的特征值分解，是反向运行这个过程：从相关数据集开始，然后推导出对角化协方差矩阵的坐标基。

了解它可能需要学习正式的数学和一些经验，也许在 2 或 3 维问题上尝试（并将其可视化）将帮助您了解它。

# javascript - 如何在 highslide 画廊中随机化图像而不重复？

> ID：11920273
> 
> 赞同：0
> 
> 时间：2012-08-12T06:48:43.383
> 
> 标签：javascript

到目前为止，我在将随机化与我的 highslide 画廊集成方面做得非常出色。但现在我正努力做到这一点，以免他们重复。有什么建议么？我查看了其他几篇文章，但似乎无法将其正确应用于我的代码。我还在学习; 你必须原谅我。

这是我的头代码（javascript）：

```
var gallery = new Array();
gallery[0] = new Array("earlywork001.jpg","earlywork002.jpg","earlywork003.jpg");

function pickImageFrom(whichGallery)
{
var idx = Math.floor(Math.random() * gallery[whichGallery].length);
document.write('<a href="images/earlywork/' + gallery[whichGallery][idx] + '" class="highslide" onclick="return hs.expand(this, config1 )"><img src="images/earlywork/' + gallery[whichGallery][idx] + '" width="140" height="140"></a>');
} 
```

这是我的正文代码（为了简单起见，我只放了 3 个，但实际上我有 50 个图像）：

```
<div class="highslide-gallery"><script language="javascript">pickImageFrom(0);</script>
    <span class="highslide-heading"><i>Copyright © 2012 KD Neeley</i></span></div>

<div class="highslide-gallery"><script language="javascript">pickImageFrom(0);</script>
    <span class="highslide-heading"><i>Copyright © 2012 KD Neeley</i></span></div>

<div class="highslide-gallery"><script language="javascript">pickImageFrom(0);</script>
    <span class="highslide-heading"><i>Copyright © 2012 KD Neeley</i></span></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:05:51.230

您可以将所有图像添加到 js 数组中。创建一个从数组中获取 img 的函数。使用该功能决定要显示的图像。

```
var images = ["img1.jpg","img2.jpg"];
var shownImages = [];

function randomimg(images,shownImages){

   //select a random number from with in the range of the image array
   rand = Math.floor((Math.random()*images.length())+1);
   //store the displayed image in the shown array and remove it from images
   shownImages.unshift(images.splice(rand,rand+1));

   //if the image array is empty 
   //I guess we would like to show the images over again so resetit
   //The commented out part is only necessary if you want to show
   //images in a loop
   /*if(images.length == 0){
     images = shownImages;
     shownImages = [];
   }*/

   //return the image to show this time.
   return shownImages[0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T08:14:18.997

将随机播放添加到数组原型

```
Array.prototype.shuffle=function(){
   var i = len = this.length;       
   while (i--) {
      var r = Math.round(Math.random(len));
      var t = this[i];
      this[i] = this[r];
      this[r] = t;
   }
   return this;
} 
```

然后你可以对任何数组使用 shuffle 方法：

```
gallery.shuffle(); // this shuffles the array 
```

**演示：http:** [//jsfiddle.net/W75Kw/1/](http://jsfiddle.net/W75Kw/1/)

**根据要求更新：**使用您发布的代码：

```
var gallery = new Array();
gallery[0] = new Array("earlywork001.jpg","earlywork002.jpg","earlywork003.jpg");
gallery[0].shuffle(); // randomize array

function pickImageFrom(whichGallery) {
  var img = gallery[whichGallery].pop(); // extracts element from array
  document.write('<a href="images/earlywork/' + img + '" class="highslide" onclick="return hs.expand(this, config1 )"><img src="images/earlywork/' + img + '" width="140" height="140"></a>');
} 
```

# rest - Junit 不调用 REST Web 服务

> ID：11920277
> 
> 赞同：0
> 
> 时间：2012-08-12T06:49:13.903
> 
> 标签：rest, jakarta-ee, junit, resteasy

我想测试一个调用 RESTEasy 网络服务的类。似乎 Junit 没有调用网络服务。我在服务器端检查，请求没有到达。

```
public class EmpService {

  public List<Employee> getEmployees() {
      ClientRequest request = new ClientRequest("http://localhost:8080/rest/employees");
      request.accept(MediaType.APPLICATION_JSON);
      ClientResponse<Employees> response = null;

      try {
        response = request.get(Employees.class);
      } catch (Exception e) {
        e.printStackTrace();
      }

      Employees received = response.getEntity();
      if (received.getEmployees() == null){
        System.out.println("Employees is null");
      }
      return received.getEmployees();
    }
  } 
```

我的目的不是测试 REST 服务，而是测试类`EmpService`。所以我写了下面的 JUnit 测试用例。

```
public class EmpServiceTest {

  @Test
  public void testGetEmployees() throws Exception {
    EmpService service = new EmpService();        
    List<Employees> employees = service.getEmployees();
    Assert.assertNotNull("Employees is null", employees);
  }

  @Test
  public void testREST() {
      ClientRequest request = new ClientRequest("http://localhost:8080/rest/employees");
      request.accept(MediaType.APPLICATION_JSON);
      ClientResponse<Employees> response = null;

      try {
        response = request.get(Employees.class);
      } catch (Exception e) {
        e.printStackTrace();
      }

      Employees received = response.getEntity();
      Assert.assertNotNull("Employees is null", received.getEmployees());
    }
} 
```

我在浏览器中测试了 REST 服务，它工作正常。但是 Junit 测试用例调用它失败并且没有报告错误。我尝试直接在 JUnit 中测试 REST 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:23:30.107

我发现问题出在内容类型上。JUnit 端没有 json 映射器类。使用杰克逊 json 库，它工作正常。

# .net - 将数据从 db 绑定到 html

> ID：11920279
> 
> 赞同：0
> 
> 时间：2012-08-12T06:49:39.893
> 
> 标签：.net, webforms

我有一个向其中发送电子邮件的小项目，并且在邮件正文中有一个指向网络表单的链接。网络表单进入 sql server 数据库并通过参数获取数据。我有一个获取数据集的分页数据源，然后是一个获取分页数据源的手风琴。我大部分时间都在使用 Eval 绑定数据，但现在需要通过 javascript 使 Web 表单更加活跃。所以主要问题是将数据绑定到服务器端的元素或保持它现在的样子。web表单的绑定数据效率和良好的编程表单的速度方面。感谢所有的答案。

```
<td class="tblHeaderTD">
                                        <asp:Label ID="lblArea" runat="server" Text='<%#Eval("Area")%>'></asp:Label>
                                    </td>
                                    <td class="tblHeaderTD">
                                        <asp:Label ID="lblBDate" runat="server" Text='<%#Eval("BirthDate","{0:dd-MM-yyyy}")%>'></asp:Label>
                                    </td>
                                    <td class="tblHeaderTD">
                                        <asp:Label ID="lblGender" runat="server" Text='<%#Eval("Gender")%>'></asp:Label>
                                    </td> 
```

# java - Java 在特定点拆分字符串

> ID：11920280
> 
> 赞同：0
> 
> 时间：2012-08-12T06:49:53.380
> 
> 标签：java, string, split

我正在尝试获取用户输入的文本并将其拆分为字符串数组。用户应该以“%n”的形式输入换行符。我如何让它在那时分割字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T06:53:59.377

```
String[] lines = yourString.split("%n"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T06:52:53.443

请先看一下[文档`String.split`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)。它可以通过以下方式使用：

```
public class Main {
  public static void main(String... args) {
    for (String line : "aaa%nbbb%nccc".split("%n")) {
      System.out.println(line);
    }
  }
} 
```

会给你：

```
aaa
bbb
ccc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T06:53:57.847

如果您确定换行符将是“\n”，那么它应该没有什么特别之处。你试过这个`String.split(...)`方法吗？

顺便说一句，关于这个话题有很多讨论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T06:54:57.697

像这样使用 String 的 split 方法。

```
String input = "abcd%nefgh%nijkl";
String[] inputSplitted = input.split("%n");
System.out.println(Arrays.toString(inputSplitted)); 
```

输出：`[abcd, efgh, ijkl]`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-12T06:55:14.307

```
str.substring(startIndex,endIndex); 
```

或者

```
String lines[]=input.split("\n"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-12T06:58:27.740

```
public String[] split(String regex, int limit) 
```

或者

```
public String[] split(String regex) 
```

# iphone - 如何确定手机屏幕上实物图像的大小？

> ID：11920285
> 
> 赞同：1
> 
> 时间：2012-08-12T06:51:08.707
> 
> 标签：iphone, image-processing, camera, sensors

你能从 CCD 传感器上的大小推导出显示在手机屏幕上的物理对象图像的大小吗？当您知道物理对象的尺寸、它与相机的距离以及相机的焦距时，您可以确定相机的 CCD 传感器上产生的图像的大小。

正如我在[这里](https://stackoverflow.com/a/11917700/70389)所描述的，**我计算出手机屏幕的像素比 CCD 传感器的毫米大多少。**因此，如果 CCD 上的物体尺寸为*x*，屏幕比传感器大*n倍，则屏幕上物体的尺寸为**x* * *n*像素。

我的假设对吗？我测量了 iPhone 4 的*n*值，但基于以 mm (50x70) 为单位的屏幕尺寸。屏幕是ca。比传感器大 15 倍（根据我的[计算](https://stackoverflow.com/a/11917700/70389)）。我从已知距离拍摄了几张已知物体的照片，我从计算中得到的尺寸或多或少等于屏幕上显示的物体图像的尺寸。

但是，我仍然不确定这种方法的正确性。如果你能就此说几句话，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T07:07:24.533

我不确定所有这些数学是否会让你在任何地方都受益匪浅。在现实世界中（除非您将相机安装在三脚架上并将拍摄对象放置在固定距离内），物体与手机之间的距离可以是任意距离。

如果您有一个已知组成的目标（例如，AR 目标或 QR 码）以已知尺寸（1 平方英寸）打印，您绝对可以根据像素数计算同一焦平面上另一个对象的尺寸。

或者也许在图片中（来自[psd](http://www.flickr.com/photos/psd/283969989/)的 CC 许可照片）：

![压扁埃菲尔铁塔](../Images/d6042848ec8bcf14b1b79ca03a56219b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-02-25T07:53:33.673

一种似乎提供足够好的估计的方法 - 在确保输入值的精度的情况下可以证明非常准确，源自[这篇文章](https://www.scantips.com/lights/subjectdistance.html#math)，它解释了已知传感器的规格（传感器的宽度 - 高度，输出分辨率），和您的焦距，**在不考虑缩放因子的情况下**，您可以相应地以米或像素为单位计算对象的大小。这是通过计算对象在传感器上占据的像素，然后根据您的需要在实际大小和像素大小之间进行线性转换来实现的。此外，已知物体在现实世界（米）和框架内（像素）的大小，您还可以计算与它的距离。

下面的代码经过测试，它提供了一个近似值 - 与测量值略有偏差 - imo 非常令人满意 - 正如文章所述 -**输入的精度至关重要**。

```
#Requires 1)Real object size, 2)Distance from object and returns ---> Object_size in pixels
def given_real_get_pixels(Object_width_meters,Object_height_meters,distance):

    Object_height_on_sensor_mms=(Focal_length*Object_height_meters)/distance
    #Object_height_on_sensor_mms2
    Object_height_pixels=(Sensor_height_pixels*Object_height_on_sensor_mms)/Sensor_height_mms

    Object_width_on_sensor_mms=(Focal_length*Object_width_meters)/distance
    Object_width_pixels=(Sensor_width_pixels*Object_width_on_sensor_mms)/Sensor_width_mms

    print(f'Object_actual_size={Object_width_meters} x {Object_height_meters}(meters) at {distance}(meters) distance coresponds to Object_pixel_size={Object_width_pixels} x {Object_height_pixels}(pixels)')
    return Object_height_pixels,Object_width_pixels  

#Requires 1)distance from object, 2)Object height in pixels and returns ---> Object_size in meters
def given_pixels_get_real(distance,Object_height_pixels,Object_width_pixels):
    Object_height_on_sensor_mms=(Sensor_height_mms*Object_height_pixels)/Sensor_height_pixels    
    Object_height_meters=((distance*Object_height_on_sensor_mms)/Focal_length)

    Object_width_on_sensor_mms=(Sensor_width_mms*Object_width_pixels)/Sensor_width_pixels
    Object_width_meters=((distance*Object_width_on_sensor_mms)/Focal_length)

    print(f'Object_pixel_size={Object_width_pixels} x {Object_height_pixels}(pixels) at {distance}(meters) distance corresponds to Object_actual_size={Object_width_meters} x {Object_height_meters}(meters)')
    return Object_height_meters,Object_width_meters

def given_real_and_pixels_get_distance(Object_width_meters,Object_height_meters,Object_width_pixels,Object_height_pixels):

    Object_height_on_sensor_mms=(Sensor_height_mms*Object_height_pixels)/Sensor_height_pixels
    distance_height=(Focal_length*Object_height_meters)/Object_height_on_sensor_mms

    Object_width_on_sensor_mms=(Sensor_width_mms*Object_width_pixels)/Sensor_width_pixels
    distance_width=(Focal_length*Object_width_meters)/Object_width_on_sensor_mms

    print(f'For obtaining an Object_pixel_size={Object_width_pixels} x {Object_height_pixels}(pixels) of an object that has Object_actual_size={Object_width_meters} x {Object_height_meters}(meters), distance must be distance_width = {distance_width}(meters) and distance_height= {distance_height}(meters) and mean_distance(suggested)={(distance_width+distance_height)/2}(meters) ')
    return distance_width,distance_height

#################################################### Define Specifications ######################################################
#Sensor 
Sensor_width_mms=7.410 #mm
Sensor_height_mms=4.980 #mm
Sensor_width_pixels=3088 #pixels
Sensor_height_pixels=2076 #pixels
#Focal length
Focal_length=9.6 #mm

######################################################### Define Parameters ######################################################
distance=125 #0.8 # meters

################################################# GET OBJECT SIZE IN PIXELS ######################################################

Object_width_meters=Object_height_meters=0.001 #meters
Object_height_pixels,Object_width_pixels=given_real_get_pixels(Object_width_meters,Object_height_meters,distance)

################################################# GET OBJECT SIZE IN METERS ######################################################
Object_width_pixels=Object_height_pixels=20
Object_height_meters,Object_width_meters=given_pixels_get_real(distance,Object_height_pixels,Object_width_pixels)

########################################### GET DISTANCE TO OBJECT IN METERS ######################################################
Object_width_meters=0.0005
Object_height_meters=0.001 #meters
Object_width_pixels=10
Object_height_pixels=20
distance_width,distance_height=given_real_and_pixels_get_distance(Object_width_meters,Object_height_meters,Object_width_pixels,Object_height_pixels) 
```

顺便提一下 - 变量的命名可能很麻烦，但并非没有充分的理由.. 稍微解释一下，所有方法都考虑宽度和高度，但每个方法的计算都是独立实现的..

# css - div 以不存在的边距推动其他 div

> ID：11920287
> 
> 赞同：0
> 
> 时间：2012-08-12T06:51:27.360
> 
> 标签：css, margin

在我的个人网站上，我正在创建一个联系表格。它在“业务查询”和“问题”之间切换。我已经设置了我的代码，以便具有 id 的选项卡`contact_tabs`与表单空间共享相同的 div `contact_form`，. 但是，这两个 div 不适合它们的容器 div（id 为`contact`）。`contact_form`被 Chrome 的开发者控制台识别为额外边距的内容推低，即使我已将边距设置为`margin:0;`.

![contact_tabs 有额外的边距](../Images/986207df6f82fa96d52ba6708cde0e27.png)

![contact_form 被下推](../Images/c49b204c59e1c358579f753592719451.png)

这是我相关的 CSS 样式和 HTML。

CSS：

```
/* Contact */
#contact {
    width:80%;
    border:3px outset #EFF;
    height:300px;
    margin:auto;
    margin-top:20px;
    margin-bottom:40px; 
}
#contact_tabs {
    width:30%;
    border-right:2px solid #FFF;
    height:100%;
    margin-right:0; 
}
#contact_tabs ul {
    margin-top:0;
    margin-bottom:0;
    padding-left:0;
    height:100%;    
}
#contact_tabs ul li {
    list-style-type:none;
    background-color:#111;
    height:50%;
}
#contact_tabs ul li a {
    font-size:20px;
    display:block;
    padding:63px 30px;
    color:inherit;
    text-decoration:none;
    transition:padding-left 0.5s;
    -webkit-transition:padding-left 0.5s;
    -moz-transition:padding-left 0.5s;
    -o-transition:padding-left 0.5s;
}
#contact_tabs ul li a:hover {
    padding-left:55px;  
}
#contact_tabs ul li.selected {
    background-color:rgba(255,255,255,0.8); 
}
#contact_tabs ul li.selected a {
    color:#111; 
}
#contact_form {
    width:70%;
    height:100%;
    float:right;
} 
```

HTML：

```
<div id="contact">
    <div id="contact_tabs">
        <ul>
            <li class="selected" id="inquiry"><a href="#inquiry">Buisness inquiries</a></li>
            <li id="question"><a href="#question">Questions</a></li>
        </ul>
    </div>
    <div id="contact_form">
        <form id="inquryForm">
            <input type="text" placeholder="First Name" id="fname" />
        </form>
        <form id="questionForm">
            <input type="text" placeholder="First Name" id="fname2" />
        </form>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T06:58:27.503

`#contact_tabs`宽度为 30%，而`#contact_form`宽度为 70%。那是100%。但是，`#contact_tabs`也有一个 2px 的右边框。那是 100% + 2px，所以没有足够的空间。

您可以通过几种方式解决此问题。如果您不介意放弃 IE7 支持，您可以使用`box-sizing: border-box`在宽度计算中包含边框。或者，您可以将百分比宽度更改为像素宽度，为 2px 右边框留出足够的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T10:30:28.450

正如 Interrobang 已经提到的，您可以添加`box-sizing`到您的代码中。但是您还需要设置`float`for `#contact_tabs`。

因此，将您的 CSS 代码更改为：

```
#contact_tabs
{
    width:30%;
    border-right:2px solid #FFF;
    height:100%;
    margin-right:0; 
} 
```

到：

```
#contact_tabs
{
    width:30%;
    float:left;
    border-right:2px solid #fff;
    height:100%;
    -webkit-box-sizing:border-box;
    -moz-box-sizing:border-box;
    box-sizing:border-box;
} 
```

**[演示](http://jsfiddle.net/rTvQ3/)**

# visual-studio-2010 - 如何使用 C# 代码读取 Microsoft WindowsInstaller 转换文件中的所有信息？

> ID：11920288
> 
> 赞同：-2
> 
> 时间：2012-08-12T06:51:26.343
> 
> 标签：visual-studio-2010, c#-4.0, windows-installer, transform

有人可以帮我获取一个示例代码来获取转换文件中的所有信息吗？我需要获取的是，

1.  检查给定的表是否存在于 mst
2.  如果存在，检查表中是否有任何记录。
3.  仅获取 MST 中的更改并将它们写入日志文件中，并写入相应的表名、列名和值。
4.  有什么方法可以获取 MST 中的所有信息，包括 MSI 表记录？
5.  如何使用 Microsoft.Deployment.WindowsInstaller 完成此操作；?
6.  在这种情况下如何使用 using 或 Dispose 或 IDisposable ？我正在使用 Visual Studio 2010 C# .net Windows 窗体应用程序。

注意：我正在尝试创建一个新的 msi 或 mst。我只想验证已经可用的 MSI 或 MST。

给我一个示例代码，因为我对 c# 很陌生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:22:13.960

在 C/C++ 级别，我建议[MsiDatabaseApplyTransform](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370074.aspx)在`iErrorConditions`. `MSITRANSFORM_ERROR_VIEWTRANSFORM`这会将您需要的所有信息放在[_TransformView 表中](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372926.aspx)。我将由您来决定如何在您使用的语言或库中公开此 API。

请注意，您所问的某些部分并不是真正有效的；MST 文件本身似乎不包含表或表记录。至少，除了我上面提到的方法之外，没有任何 API 可以公开它们。

# entity-framework - 实体框架代码优先关系

> ID：11920289
> 
> 赞同：1
> 
> 时间：2012-08-12T06:51:51.480
> 
> 标签：entity-framework

我试图弄清楚如何在 EF 中进行这项工作。我有两个实体`Employee`和`User`. 我需要使它`User`具有到`Employee`. 如果有映射，那么它将是 1:1。

基本上这个系统可以被员工和外部供应商访问，但我想要一个表来管理登录：`Users`.

如何在具有流体配置的 EF 中定义这种关系？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T08:27:34.323

您只需要设置简单的流利配置：

```
modelBuilder.Entity<User>()
            .HasOptional(u => u.Employee)
            .WithRequired(e => e.User); 
```

或以相反的顺序：

```
modelBuilder.Entity<Employee>()
            .HasRequired(e => e.User)
            .WithOptional(u => u.Employee); 
```

EF 将使用 Employess 的 PK 作为对用户的 FK——这是 EF 正确使用一对一关系的强制性要求。在 Data 注释的情况下，使用与导航`ForeignKey`属性配对的属性来标记 Employee 的 PK 就足够了：`User`

```
public class Employee {
    [Key, ForeignKey("User")]
    public int Id { get; set; }

    public virtual User User { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T06:57:57.317

```
public class User
{
    ...
    public virtual Employee Employee { get; set; }
} 
```

[本教程](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-a-more-complex-data-model-for-an-asp-net-mvc-application)可能会有所帮助。

# linux - 显示树/图表

> ID：11920291
> 
> 赞同：0
> 
> 时间：2012-08-12T06:52:40.877
> 
> 标签：linux, graph, tree

我用 C++ 编写了简单的 C 程序，给定一个图形和起始顶点，在图形上执行 BFS。我想以图像的形式显示它的遍历。我可以使用哪个工具来做同样的事情？我知道这可以在 python 中轻松完成，但在 C++ 中执行 BFS 并在 C++ 中生成 BFS 树的图像对我来说似乎很困难。我首选的操作系统是 linux。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T06:56:29.910

您可以输出 .dot 格式的文件，然后使用 .dot 进行渲染[`graphviz`](http://www.graphviz.org/)。

# core-audio - Core Audio：以 .wav 格式录制无法正常工作

> ID：11920302
> 
> 赞同：1
> 
> 时间：2012-08-12T06:54:03.397
> 
> 标签：core-audio

我`AudioFileWritePackets()`用来写数据，在录制过程中它没有返回错误。我使用的数据格式标志是：

```
if(appDelegate.screenRecording){
    cPacket = 0;inNumPackets = inCompleteAQBuffer->mPacketDescriptionCount;
    if (AudioFileWritePackets(nAudioFile, false, numBytes, mPacketDescs, mPacketIndex, &nPackets, inCompleteAQBuffer->mAudioData) == noErr) 
    {
        mPacketIndex += nPackets;   
        NSLog(@"sample result");            
    }
    else {
        NSLog(@"ext err");  
    }

} 
```

每次打电话`Nslog(ext err);` 请帮我解决这个问题。

# qt - 在手动设置代理的情况下，以下用于在 Qt 中设置代理的代码会失败

> ID：11920303
> 
> 赞同：0
> 
> 时间：2012-08-12T06:54:23.057
> 
> 标签：qt

代码有什么问题：

如果我使用系统代理，则显示的错误是“连接被拒绝”，如果我使用手动代理（代理地址相同），则显示的错误是“找不到主机”</p>

代理服务器是 squid，代理地址：172.16.28.11 和端口：3128

此外，它也不适用于 localhost 代理，例如使用“tor”或动态端口转发创建的代理！

```
if(settDialog.ui->no_proxy->isChecked())
{
    QNetworkProxyFactory::setUseSystemConfiguration (false);
    QNetworkProxy::setApplicationProxy(QNetworkProxy::NoProxy);
}
else if(settDialog.ui->use_s_proxy->isChecked())
{
    QNetworkProxyFactory::setUseSystemConfiguration (true);
}
else if(settDialog.ui->man_proxy->isChecked())
{
    QNetworkProxyFactory::setUseSystemConfiguration (false);
    proxy.setHostName(settDialog.ui->proxy_addr->text());
    proxy.setPort(settDialog.ui->port_num->value());
    if(settDialog.ui->proxyType->currentIndex()==0)
        proxy.setType(QNetworkProxy::HttpProxy);
    else if(settDialog.ui->proxyType->currentIndex()==1)
        proxy.setType(QNetworkProxy::Socks5Proxy);
    else if(settDialog.ui->proxyType->currentIndex()==2)
        proxy.setType(QNetworkProxy::FtpCachingProxy);
    proxy.setHostName(settDialog.ui->username->text());
    proxy.setPassword(settDialog.ui->pwd->text());
    QNetworkProxy::setApplicationProxy(proxy);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:27:01.570

我可能过于简化了事情，但这看起来像是一个简单的错误 API 调用。

`proxy.setHostName`是你定义代理服务器主机名的地方，你通过proxy.setUser API设置用户名，即：

```
proxy.setUser(settDialog.ui->username->text()); 
```

# doctrine-orm - 停止获取关联

> ID：11920310
> 
> 赞同：0
> 
> 时间：2012-08-12T06:55:30.907
> 
> 标签：doctrine-orm

我执行这样一个简单的查询来获取与剧集的关联：

```
$query = $this->getEntityManager()
            ->createQuery('
        SELECT p,e
        FROM AcmeDemoBundle:Place p
        LEFT JOIN p.episodes e
        WHERE p.id = :id'
        )
            ->setParameter('id',$id); 
```

这是一个简单的组合：

```
 /**
 * @ORM\OneToMany(targetEntity="Episode", mappedBy="place")
 */
protected $episodes; 
```

这很好用。现在，我不想获取剧集，而只是获取 place 对象（仅此而已）：

```
$query = $this->getEntityManager()
            ->createQuery('
        SELECT p
        FROM AcmeDemoBundle:Place p
        LEFT JOIN p.episodes e
        WHERE p.id = :id'
        )
            ->setParameter('id',$id); 
```

这仍然通过延迟加载加载剧集。**在这种情况下有没有办法避免延迟加载？**

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T07:37:32.570

像这样：

```
$query = $this->getEntityManager()
            ->createQuery('
        SELECT p
        FROM AcmeDemoBundle:Place p
        WHERE p.id = :id'
        )
            ->setParameter('id',$id);

$query->setHint(Query::HINT_FORCE_PARTIAL_LOAD, true); 
```

# html - Sharepoint 2010 不支持自动换行属性

> ID：11920311
> 
> 赞同：3
> 
> 时间：2012-08-12T06:55:50.767
> 
> 标签：html, css, sharepoint, sharepoint-designer

我在项目列表中包装一些单词时遇到问题。

我已将项目列表转换为`XSLT`页面。尝试将 column 设置`width`为某个值，但由于单元格包含一些没有空格的长单词，它会被覆盖和拉伸。我尝试添加`word-wrap: break-word;`为内联样式，但它立即被标记为红色并带有消息：

> 此属性被标记为无效，因为当前架构不支持它。

如果我仍然保存页面，它会按照它应该的方式工作，但是如果我从当前列表中导航到其他地方，一切都会重置，我会回到原点。

我该如何解决？是否有一些全局 CSS 可以使用`word-wrap`？本质上，我希望在标准视图的单元格中换行。即使是没有空格的长词。

# c# - 将用户输入的日期时间转换为 UTC

> ID：11920312
> 
> 赞同：5
> 
> 时间：2012-08-12T06:55:51.700
> 
> 标签：c#, datetime, timezone

用户在单独的文本框中输入日期和时间。然后我将日期和时间组合成一个日期时间。我需要将此日期时间转换为 UTC 以将其保存在数据库中。我将用户的时区 ID 保存在数据库中（他们在注册时选择它）。首先，我尝试了以下方法：

```
string userTimeZoneID = "sometimezone"; // Retrieved from database
TimeZoneInfo userTimeZone = TimeZoneInfo.FindSystemTimeZoneById(userTimeZoneID);

DateTime dateOnly = someDate;
DateTime timeOnly = someTime;
DateTime combinedDateTime = dateOnly.Add(timeOnly.TimeOfDay);
DateTime convertedTime = TimeZoneInfo.ConvertTimeToUtc(combinedDateTime, userTimeZone); 
```

这导致了一个异常：

`The conversion could not be completed because the supplied DateTime did not have the Kind property set correctly. For example, when the Kind property is DateTimeKind.Local, the source time zone must be TimeZoneInfo.Local`

然后我尝试像这样设置 Kind 属性：

```
DateTime.SpecifyKind(combinedDateTime, DateTimeKind.Local); 
```

这不起作用，所以我尝试了：

```
DateTime.SpecifyKind(combinedDateTime, DateTimeKind.Unspecified); 
```

这也不起作用。谁能解释我需要做什么？我什至会以正确的方式解决这个问题吗？我应该使用 DateTimeOffset 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T07:00:50.047

就像 上的所有其他方法一样`DateTime`，`SpecifyKind`不会更改*现有*值 - 它返回一个*新*值。你需要：

```
combinedDateTime = DateTime.SpecifyKind(combinedDateTime,
                                        DateTimeKind.Unspecified); 
```

就我个人而言，我建议使用[Noda Time](https://nodatime.org)，这使得这种事情在我相当有偏见的观点中更加清晰（我是主要作者）。你最终会得到这个代码：

```
DateTimeZone zone = ...;
LocalDate date = ...;
LocalTime time = ...;
LocalDateTime combined = date + time;
ZonedDateTime zoned = combined.InZoneLeniently(zone);
// You can now get the "Instant", or convert to UTC, or whatever... 
```

“宽松”部分是因为当您将本地时间转换为特定区域时，由于 DST 更改，本地值可能在时区中无效或不明确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T09:21:41.163

**你也可以试试这个**

```
var combinedLocalTime = new DateTime((dateOnly + timeOnly.TimeOfDay).Ticks,DateTimeKind.Local);
var utcTime = combinedLocalTime.ToUniversalTime(); 
```

# entity-framework - 将数据从 db 重新加载到 IQueryable 无需重写表达式

> ID：11920313
> 
> 赞同：0
> 
> 时间：2012-08-12T06:56:15.230
> 
> 标签：entity-framework, entity-framework-4.1, iqueryable

> **可能重复：**
> [DbContext 的内部缓存（？）](https://stackoverflow.com/questions/3686810/dbcontexts-internal-caching)

我有一个 my`DbContext`和 a`IQueryable`的实例，`ViewModelBase`其中填充`BootStrapper`和`IQueryable`需要从数据库重新加载几次，我想通过调用一些简单的方法来完成，而不关心查询表达式是什么。

**简单来说：**

我想在`IQueryable<T>`不重写表达式的情况下将数据加载到一个中，我拥有的工具是：

1 => 一个`IQueryable`

2 => 的一个实例`DbContext`

当我更改数据库中的数据并尝试 IQueryable.ToList() 时，结果不会更新。

```
IQueryable<Person> ViewModelDataContext;
ViewModelDataContext = repository.GetAll<Person>();
var x = ViewModelDataContext.ToList();
//Some changes into database
repository = new Repository();
var y = ViewModelDataContext.ToList();
//But as result, the x is exactly returns the same result as y and I'd like the y to be updated after  database changes. 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:23:12.383

最有可能的是，实体框架每次都（正确地）返回相同的实体实例。这是 ORM 的一个重要特性。未经您的许可，它不会用数据库中的新值覆盖他们的字段。如果这样做，它将导致整个应用程序中出现虚假的状态损坏和非本地副作用。

如果您要使用这种方法加载非实体类型，它将起作用。或阅读有关合并选项的信息。

# iphone - iOS 应用更新 - CFBundleShortVersionString 和 CFBundleVersion

> ID：11920316
> 
> 赞同：4
> 
> 时间：2012-08-12T06:56:56.037
> 
> 标签：iphone, ios, plist, itunes, bundle

我在 Appstore 市场中当前的 iOS 应用程序有以下捆绑版本。

CFBundleVersion 10301 CFBundleShortVersionString 1.3.0

我这周要更新我的应用程序，我的版本 # 是

CFBundleVersion 2.1.7 CFBundleShortVersionString 2.1.7

我的疑问是

当前 CFBundleVersion 10301 新 CFBundleVersion 2.1.7

这个对吗？

我可以在我的新版本中更改 CFBundleVersion 的格式吗

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T07:51:46.527

必须更新的版本应该是high.10301，因为它是一个旧版本，还必须完成一个高于10301的版本。

您的 CFBundleVersion 必须设置为 10301 更高。

2.1.7低于10301.的二进制文件生成失败。更新必须高于之前的版本

你不用担心。如果您只是认为这是内部版本号。

* * *

**每个版本有什么区别？**

* * *

**iTunes 连接版本**

iTunes Connect Version 是 App Store 中显示的版本号；这必须是纯版本号，例如 1.0.1

**CFBundle版本**

CFBundleVersion 不需要是真实的版本号。这可能类似于 12345 或 1.2.3（内部版本 12345AB）。例如，这显示在 Mac OS X 应用程序的“关于”窗口中，通常更像是“内部版本号”而不是“版本号”。

**CFBundleShortVersionString**

CFBundleShortVersionString 用作真实的版本号。这必须与 iTunes Connect 中用于版本的字符串相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-10T14:10:54.517

*   **CFBundleVersion**代表内部版本号

*   **CFBundleShortVersionString**代表版本号

详情请看我的[回答](https://stackoverflow.com/a/31921249/936957)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-13T16:43:40.877

据我所知，只要您的二进制 CFBundleVersion 与您在 itunesconnect 中应用程序的新版本中提交的版本匹配，就应该没有问题。

# sql-server-2008 - SQL Server 2008 中多列中的 COUNT(DISTINCT)

> ID：11920317
> 
> 赞同：4
> 
> 时间：2012-08-12T06:57:02.843
> 
> 标签：sql-server-2008, group-by

在 Oracle 中，可以使用**||获取多列中不同值的计数。**操作员（无论如何，根据[这个论坛帖子](http://www.dbasupport.com/forums/showthread.php?t=11349)）：

```
SELECT COUNT(DISTINCT ColumnA || ColumnB) FROM MyTable 
```

有没有办法在 SQL Server 2008 中做到这一点？我正在尝试执行单个查询以返回一些组统计信息，但我似乎做不到。

例如，这是我要查询的值表：

```
AssetId MyId    TheirId   InStock
328     10      10        1
328     20      20        0
328     30      30        0
328     40      10        0
328     10      10        0
328     10      10        0
328     10      10        0
328     10      10        0 
```

对于 AssetId #328，我想计算**MyId**和**TheyId**列中唯一 ID 的总数（4 = 10、20、30、40），以及**InStock**列中非零行的总数（1 ):

```
AssetId     TotalIds    AvailableIds
328         4           1 
```

有没有办法以某种方式发挥这种魔力？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T09:54:45.670

您可以使用`cross apply`和`values`。

```
select T1.AssetId,
       count(distinct T2.ID) TotalIds,
       sum(case T2.InStock when 0 then 0 else 1 end) AvailableIds 
from YourTable as T1
  cross apply(values(T1.MyId, T1.InStock),
                    (T1.TheirId, 0)
             ) as T2(ID, InStock)
group by T1.AssetId 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/77189)

或者您可以`union all`在子查询中执行。

```
select T.AssetId,
       count(distinct T.ID) TotalIds,
       sum(case T.InStock when 0 then 0 else 1 end) AvailableIds 
from (
     select AssetId, MyId as ID, InStock
     from YourTable
     union all
     select AssetID, TheirId, 0
     from YourTable
     ) as T
group by T.AssetId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T07:55:40.440

你可以得到这样的结果：

```
DECLARE @t TABLE (AssetId INT, MyId    INT, TheirId   INT, InStock INT)
INSERT @t
VALUES 
(328,10, 10,   1)
,(328,20, 20,   0)
,(328,30, 30,   0)
,(328,40, 10,   0)
,(328,10, 10,   0)
,(328,10, 10,   0)
,(328,10, 10,   0)
,(328,10, 10,   0)

;WITH a AS(
    SELECT  AssetId,
            COUNT(col) cnt
    FROM 
    (
            SELECT  MyId col, AssetId
            FROM    @t
            UNION
            SELECT  TheirId col, AssetId
            FROM    @t
    ) b
    GROUP BY AssetId
)

SELECT  a.AssetId,
        a.cnt TotalIds,
        SUM(CASE WHEN InStock <> 0 THEN 1 ELSE 0 END) AvailableIds
FROM    @t c
JOIN    a ON a.AssetId = c.AssetId
GROUP   BY a.AssetId, a.cnt 
```

在公用表表达式（`WITH`代码块）中，“唯一性”是通过使用`UNION`丢弃重复值的运算符来保证的，这就是为什么`COUNT(col)`不需要像`COUNT(DISTINCT col)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T08:07:54.863

我认为这对你来说是一个很好的解决方案

```
SELECT COUNT(*)
FROM (SELECT DISTINCT Column1, Column2 
      FROM MyTable) A 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T14:50:18.687

您可以按照 Oracle 示例将这些值连接在一起（这就是 Oracle 查询所做的事情）。您只需先将值转换为字符：

```
select AssetId,
       count(distinct cast(MyId as varchar(8000))+','+cast(TheirId as varchar(8000)
            ) totalIds,
       count(distinct case when inStock> 0
                           then cast(MyId as varchar(8000))+','+cast(TheirId as varchar(8000)
             end) as AvailableIds
from t
group by Assetid 
```

您也可以将其作为子查询进行：

```
select AssetId, count(*) as TotalIds,
       sum(case when inStock > 0 then 1 else 0 end) as AvailableIds
from (select AssetId, myId, theirId, max(inStock) as inStock
      from t
      group by AssetId, myId, theirId
     ) a
group by AssetId 
```

“理论上”，我更喜欢第二种方法，因为它更基于集合。但是，如果您发现自己试图计算几个不同变量中的不同组合列，则字符串连接方法更实用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T09:19:47.680

## 选项1

```
select 
          AssetID, count(distinct MyId) As MyId, SUM(InStock) InStock
From T
Group By 
      AssetID 
```

## 选项 #2 无 CTE

```
Select AssetID, count(MyId), sum(InStock) InStock From
(
    select 
            AssetID, MyId, SUM(InStock) InStock
    From MyTable
    Group By 
            AssetID, MyId
)K
Group by AssetID 
```

## 选项 #3 与 CTE

```
;With Sub(AssetID, MyId, InStock)
As
(
    select 
            AssetID, MyId, SUM(InStock) InStock
    From MyTable
    Group By 
            AssetID, MyId
)

Select AssetID, count(MyId), sum(InStock) From
(
    Select * from Sub
)K 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-12T09:48:03.630

如果您不喜欢使用`CTE's`，可以尝试使用以下解决方案。它的要点是

*   在单独的子查询中`TotalID's`为每个选择`AssetID`
*   在单独的子查询中`AvailableIDs`为每个选择`AssetID`
*   `JOIN`两个子查询的结果产生最终结果。

语句原样适用于整个表。您可以通过向整个组添加适当的 where 子句来获取单个 AssetID 的结果。

**SQL 语句**

```
SELECT  a.AssetId, t.TotalIDs, a.AvailableIDs
FROM    (
            SELECT  AssetID, TotalIDs = COUNT(*) 
            FROM    (
                        SELECT  AssetID 
                        FROM    MyTable 
                        GROUP BY 
                                MyId, TheirID, AssetID
                    ) t 
            GROUP BY 
                    AssetID
        ) AS t
        INNER JOIN (
            SELECT  AssetID, AvailableIDs = SUM(InStock) 
            FROM    MyTable 
            GROUP BY 
                    AssetID
        ) AS a ON a.AssetId = t.AssetId 
```

**测试脚本**

```
;WITH MyTable (AssetId, MyId, TheirId, InStock) AS (
    SELECT * FROM (VALUES 
        (328, 10, 10, 1)
        , (328, 20, 20, 0)
        , (328, 30, 30, 0)
        , (328, 40, 10, 0)
        , (328, 10, 10, 0)
        , (328, 10, 10, 0)
        , (328, 10, 10, 0)
        , (328, 10, 10, 0)
        , (329, 10, 10, 0)
        , (329, 10, 20, 1)
    ) AS a (b, c, d, e)
)
SELECT  a.AssetId, t.TotalIDs, a.AvailableIDs
FROM    (
            SELECT  AssetID, TotalIDs = COUNT(*) 
            FROM    (
                        SELECT  AssetID 
                        FROM    MyTable 
                        GROUP BY 
                                MyId, TheirID, AssetID
                    ) t 
            GROUP BY 
                    AssetID
        ) AS t
        INNER JOIN (
            SELECT  AssetID, AvailableIDs = SUM(InStock) 
            FROM    MyTable 
            GROUP BY 
                    AssetID
        ) AS a ON a.AssetId = t.AssetId 
```

# mysql - 具有多个 where 子句的 MySQL 查询

> ID：11920318
> 
> 赞同：3
> 
> 时间：2012-08-12T06:57:13.253
> 
> 标签：mysql

我有一个表**wp_postmeta**，其中包含名为**meta_key**和**meta_value**的列。我在**meta_key**中有 5 条记录（位置、面积、价格、卧室、浴室）

[![这里的表格截图](../Images/dffb8bc3f18820aeac7f934c4a99acc6.png)](https://i.stack.imgur.com/qOmCs.jpg)

例如，我想在德克萨斯州找一家有 2 间浴室的酒店：

```
select post_id from wp_postmeta where meta_key = 'location' and meta_value = 'texas' and where meta_key = 'bathrooms' and meta_value= '2'; 
```

我知道上面的 SQL 命令无效。谁能帮我实现上述结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T07:02:21.870

你可以试试mysql子查询：

```
select post_id 
from wp_postmeta 
where meta_key = 'location' and meta_value = 'texas' 
                  and post_id IN (select post_id 
                  from wp_postmeta 
                  where meta_key = 'bathrooms' and meta_value= '2') 
```

# ios - iOS 6 中的标签对齐 - UITextAlignment 已弃用

> ID：11920321
> 
> 赞同：193
> 
> 时间：2012-08-12T06:57:48.167
> 
> 标签：ios, alignment, label

似乎`UITextAlignmentCenter`在 iOS 6 中已弃用。

我仍然使用它并且效果很好，但它会发出警告。

我怎样才能解决这个问题？

```
label.textAlignment = UITextAlignmentCenter; 
```

谢谢。

* * *

## 回答 #1

> 赞同：397
> 
> 时间：2012-09-22T02:42:39.780

In iOS6 you can use

```
label.textAlignment = NSTextAlignmentCenter; 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-09-27T22:56:21.760

属性更改可能与Apple将`labelAlignment`NSAttributedStrings 引入更多iOS 控件有关，因此需要将UIText... 属性更改为NSText... 属性。

因此，如果您已升级到 iOS6，那么您就处于 clover 中；只需切换`UITextAlignmentCenter`到`NSTextAlignmentCenter`并享受花哨的新琴弦。

但是，如果您正在处理一个复杂的项目，并且希望地球不要在您的脚下移动太多，您可能希望坚持使用旧版本一段时间，并将您的代码调整为多个版本，如下所示：

```
// This won't compile:
if ([label respondsToSelector:@selector(attributedText:)]) 
    label.textAlignment = UITextAlignmentCenter;
else 
    label.textAlignment = NSTextAlignmentCenter; 
```

上述方法适用于新*方法*；您会收到警告，但一切正常。但是当编译器看到一个它不知道的*常量时，它会变成红色并停在它的轨道上。*没有办法偷偷溜`NSTextAlignmentCenter`过去。（好吧，这里可能有一种方法可以自定义编译器的行为，但似乎不可取。）

解决方法是添加一些条件预处理器定义。如果你把这样的东西放在你的类的 h 文件中（或者可能放在一个导入的常量文件中——它本身必须包含`#import <UIKit/UIKit.h>`才能知道 NSText...常量）......</p>

```
#ifdef NSTextAlignmentCenter // iOS6 and later
#   define kLabelAlignmentCenter    NSTextAlignmentCenter
#   define kLabelAlignmentLeft      NSTextAlignmentLeft
#   define kLabelAlignmentRight     NSTextAlignmentRight
#   define kLabelTruncationTail     NSLineBreakByTruncatingTail 
#   define kLabelTruncationMiddle   NSLineBreakByTruncatingMiddle
#else // older versions
#   define kLabelAlignmentCenter    UITextAlignmentCenter
#   define kLabelAlignmentLeft      UITextAlignmentLeft
#   define kLabelAlignmentRight     UITextAlignmentRight
#   define kLabelTruncationTail     UILineBreakModeTailTruncation
#   define kLabelTruncationMiddle   UILineBreakModeMiddleTruncation
#endif 
```

…你可以这样做：

```
label.textAlignment = kLabelAlignmentCenter; 
```

和这个：

```
label.lineBreakMode = kLabelTruncationMiddle; 
```

等等。

由于这些 UIText/NSText 更改可能会针对多个控件弹出，因此这种方法非常方便。

（警告：作为上述稳定地球爱好者的一员，我已经用旧版本测试过这个，但还没有在 iOS6 上测试过。）

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-11-15T05:58:08.093

`NSTextAlignmentCenter`可以用来代替`UITextAlignmentCenter`其他替代品的列表如下：

```
#ifdef __IPHONE_6_0 // iOS6 and later
#   define UITextAlignmentCenter    NSTextAlignmentCenter
#   define UITextAlignmentLeft      NSTextAlignmentLeft
#   define UITextAlignmentRight     NSTextAlignmentRight
#   define UILineBreakModeTailTruncation     NSLineBreakByTruncatingTail
#   define UILineBreakModeMiddleTruncation   NSLineBreakByTruncatingMiddle
#endif 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-10-20T12:24:08.903

```
#if (__IPHONE_OS_VERSION_MIN_REQUIRED >= __IPHONE_6_0)
# define ALIGN_CENTER NSTextAlignmentCenter
#else
# define ALIGN_CENTER UITextAlignmentCenter
#endif

UILabel* label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 50, 30)];
label.text = @"There is no spoon";
label.textAlignment = ALIGN_CENTER;
[self addSubview:label]; 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-01-09T23:08:50.733

您不必执行其中任何一项。Xcode 4.5 将`NSTextAlignmentCenter`在 iOS 5 中编译，等等。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-05-21T13:41:58.313

```
UILabel *label1 = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 150, 40)];
[label1 setText:@"Your String"];
[label1 setBackgroundColor:[UIColor clearColor]];
[label1 setNumberOfLines:0];
[label1 sizeToFit];

//For Center Alignment
[label1 setTextAlignment:NSTextAlignmentCenter];

//For Right Alignment
[label1 setTextAlignment:NSTextAlignmentRight];

//For Left Alignment
[label1 setTextAlignment:NSTextAlignmentLeft];

// Add the label into the view

[self.view addSubview:label1]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-05-21T13:44:57.170

```
labelName.textAlignment=NSTextAlignmentLeft; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-04T08:11:46.953

对于 Swift 5+ 使用：

```
yourLabel.textAlignment = .center 
```

您可以在哪里设置：

```
public enum NSTextAlignment : Int {
    case left = 0 // Visually left aligned
    case center = 1 // Visually centered
    case right = 2 // Visually right aligned
    case justified = 3 // Fully-justified. The last line in a paragraph is natural-aligned.
    case natural = 4 // Indicates the default alignment for script 
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-07-22T09:56:44.737

我遇到了类似的问题并使用了以下内容： detailsLabel.textAlignment = NSTextAlignmentCenter;

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-03-30T10:56:37.747

在 iOS 6 或更高版本中

使用这个值：

`self.lbl_age.textAlignment=NSTextAlignmentCenter;`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-10-19T17:37:29.267

斯威夫特 3：

```
label.textAlignment = NSTextAlignment.center 
```

# qt - GUI 内部，寻找教程

> ID：11920324
> 
> 赞同：2
> 
> 时间：2012-08-12T06:58:18.240
> 
> 标签：qt, widget, toolkit

有大量关于如何使用各种小部件工具包的 API 进行编程的资源，但我似乎找不到太多关于如何自己创建小部件工具包或它们如何工作的教程。它们现在对我来说基本上只是黑匣子。

有一些关于 QT 的信息：http://qt-project.org/wiki/Category: [QtInternals](http://qt-project.org/wiki/Category:QtInternals)

但它似乎非常特定于 QT，而不是针对一般理论。

谁能指出我一些资源？

谢谢阅读

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T05:01:25.190

很高兴知道您正在使用（或将使用）哪种编程语言来开发小部件。

无论如何，有一个链接显示了小部件背后的基本概念及其创建：

[http://star.pst.qub.ac.uk/idl/Widget_Programming_Concepts.html](http://star.pst.qub.ac.uk/idl/Widget_Programming_Concepts.html)

浏览教程/描述，看看它是否满足您的需求。

希望它会帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T07:14:03.720

以下链接上有PowerPoint演示幻灯片：

[http://aplcenmp.apl.jhu.edu/~davids/605741/handouts/6_SWT_Programming.pdf](http://aplcenmp.apl.jhu.edu/~davids/605741/handouts/6_SWT_Programming.pdf)

您也可以查看以下链接中给出的 pdf：

[http://www.loria.fr/~dutech/DDZ/SWT.pdf](http://www.loria.fr/~dutech/DDZ/SWT.pdf)

# python - 使用 python smtplib 发送电子邮件时是否必须登录电子邮件帐户？

> ID：11920330
> 
> 赞同：0
> 
> 时间：2012-08-12T07:00:19.343
> 
> 标签：python, email, anonymous, smtplib

首先，这个问题没有恶意。我昨天在 stackoverflow 中问过同样的问题，但它被删除了。我想了解使用 python smtplib 模块发送带有附件的电子邮件时是否必须登录帐户。我不想登录帐户的原因是因为我的公司没有可以使用的帐户。或者我可以要求我公司的 IT 部门设置一个帐户，但在那之前我想编写程序代码并对其进行测试。请不要删除这个问题。

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T07:07:19.910

**如果**您公司的服务器配置为接受来自某些受信任网络的邮件，则您不必拥有帐户（即，对您的 SMTP 服务器进行身份验证） 。

通常 SMTP 服务器认为内部网络是受信任的，并且可以接受来自它的邮件而无需身份验证。

# ruby - 在有限范围内修补内置 ruby 类的猴子

> ID：11920335
> 
> 赞同：5
> 
> 时间：2012-08-12T07:00:48.563
> 
> 标签：ruby, dsl, monkeypatching, instance-eval

我正在开发一个内部 Ruby DSL，为了让它看起来尽可能漂亮，我需要修改 Symbol 类并添加一些运算符。我想负责我如何做到这一点，并希望将补丁的范围和生命周期限制为特定的代码块。有这样做的标准模式吗？这是一些伪代码来显示我的想法：

```
class SomeContext
  def self.monkey_patch_region(&block)
    context = SomeContext.new
    context.monkey_patch_Symbol
    context.instance_eval(&block)
    context.unmonkey_patch_Symbol
  end

  # magical method
  def monkey_patch_Symbol
    #...
  end

  # another magical method
  def unmonkey_patch_Symbol
    #...
  end 
```

结尾

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T07:03:50.780

我相信，您正在寻找 ruby[​​ 改进](https://bugs.ruby-lang.org/issues/4085)。该功能已登陆 ruby​​ 主干，但可能会在 2.0 之前恢复

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T02:27:19.560

我听说过[mixology gem](https://github.com/dan-manges/mixology)。它旨在混合和取消混合模块。也许它对猴子和非猴子补丁很有用。

**更新：** mixology 不会帮助你，因为它（un）将模块混合到对象（如`extend`），而不是类（如`include`），并且你想要猴子/非猴子核心类，而不是单独的对象。无论如何，我打算将此答案保留为对其他人可能有用的参考。

# nginx - Capistrano、Passenger 和 Nginx - 它们如何协同工作？

> ID：11920338
> 
> 赞同：12
> 
> 时间：2012-08-12T07:01:00.097
> 
> 标签：nginx, capistrano, passenger

我目前在我的 Rails 应用程序中使用 Capistrano、Passenger 和 Nginx，但我仍然对它们如何协同工作感到困惑。

到目前为止，这是我所知道的：

**Nginx**是一个响应请求的 Web 服务器，类似于 Apache，但更轻量级。

**Capistrano**用于部署 Web 应用程序，它上传应用程序代码并运行一系列脚本并迁移数据库。

**乘客**对我来说是一个神秘的盒子。我知道它会产生 ruby​​ 进程来处理请求，但这不是 Web 服务器的责任吗？我已经阅读了部分乘客文档，但仍然没有多大意义。我可以看到它说它使部署变得轻而易举，但这不是 Capistrano 所做的吗？

谁能给出更好的解释？非常感谢！

# c# - 更快的方法来计算一个项目出现的集合数？

> ID：11920344
> 
> 赞同：4
> 
> 时间：2012-08-12T07:02:13.370
> 
> 标签：c#, algorithm, optimization, hashset

我有一个书签列表。每个书签都有一个关键字列表（存储为 HashSet）。我还有一组所有可能的关键字（“宇宙”）。

我想找到出现在最多书签中的关键字。

我有 1356 个书签，总共有 698,539 个关键字，有 187,358 个唯一关键字。

如果我遍历宇宙中的每个关键字并计算它出现的书签数量，我将进行 254,057,448 次检查。这在我的机器上需要 35 秒。

该算法非常简单：

```
var biggest = universe.MaxBy(kw => bookmarks.Count(bm => bm.Keywords.Contains(kw))); 
```

使用[Jon Skeet 的 MaxBy](http://code.google.com/p/morelinq/source/browse/MoreLinq/MaxBy.cs)。

我不确定是否可以加快速度，但有什么我能做的吗？也许以某种方式并行化它？

* * *

dtb 的解决方案需要不到 200 毫秒的时间来构建宇宙并找到最大的元素。很简单。

```
var freq = new FreqDict();
foreach(var bm in bookmarks) {
    freq.Add(bm.Keywords);
}
var biggest2 = freq.MaxBy(kvp => kvp.Value); 
```

`FreqDict`只是我在`Dictionary<string,int>`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T07:49:13.940

您可以获取所有关键字，将它们分组，并获得最大的组。这会使用更多内存，但应该更快。

我试过这个，在我的测试中它快了大约 80 倍：

```
string biggest =
  bookmarks
  .SelectMany(m => m.Keywords)
  .GroupBy(k => k)
  .OrderByDescending(g => g.Count())
  .First()
  .Key; 
```

测试运行：

```
1536 bookmarks
153600 keywords
74245 unique keywords

Original:
12098 ms.
biggest = "18541"

New:
148 ms.
biggest = "18541" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T07:49:14.630

你不需要遍历整个宇宙。想法是创建一个查找和跟踪最大值。

```
 public Keyword GetMaxKeyword(IEnumerable<Bookmark> bookmarks)
    {
        int max = 0;
        Keyword maxkw = null;

        Dictionary<Keyword, int> lookup = new Dictionary<Keyword, int>();

        foreach (var item in bookmarks)
        {
            foreach (var kw in item.Keywords)
            {
                int val = 1;

                if (lookup.ContainsKey(kw))
                {
                    val = ++lookup[kw];
                }
                else
                {
                    lookup.Add(kw, 1);
                }

                if (max < val)
                {
                    max = val;
                    maxkw = kw;
                }
            }
        }

        return maxkw;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T07:55:20.360

我没有你的样本数据，也没有做过任何基准测试，但我会试一试。可以改进的一个问题是大多数`bm.Keywords.Contains(kw)`检查都是未命中的，我认为这些是可以避免的。最受限制的是任何给定书签所具有的关键字集（即：它通常会比 Universe 小得多），因此我们应该从那个方向开始，而不是从另一个方向开始。

我正在考虑这些方面的事情。内存要求要高得多，而且由于我没有对任何东西进行基准测试，它可能会更慢，或者没有帮助，但如果它不适合你，我会删除我的答案。

```
Dictionary<string, int> keywordCounts = new Dictionary<string, int>(universe.Length);
foreach (var keyword in universe)
{
    keywordCounts.Add(keyword, 0);
}

foreach (var bookmark in bookmarks)
{
    foreach (var keyword in bookmark.Keywords)
    {
        keywordCounts[keyword] += 1;
    }
}

var mostCommonKeyword = keywordCounts.MaxBy(x => x.Value).Key; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T12:25:43.010

在 python 中 50 毫秒：

```
>>> import random

>>> universe = set()
>>> bookmarks = []
>>> for i in range(1356):
...     bookmark = []
...     for j in range(698539//1356):
...         key_word = random.randint(1000, 1000000000)
...         universe.add(key_word)
...         bookmark.append(key_word)
...     bookmarks.append(bookmark)
...
>>> key_word_count = {}
>>> for bookmark in bookmarks:
...     for key_word in bookmark:
...         key_word_count[key_word] = key_word_count.get(key_word, 0) + 1
...

>>> print max(key_word_count, key=key_word_count.__getitem__)
408530590

>>> print key_word_count[408530590]
3
>>> 
```

# python - 使用读取文件时减少 CPU 使用率

> ID：11920345
> 
> 赞同：2
> 
> 时间：2012-08-12T07:02:13.387
> 
> 标签：python

这就是我的项目背后的想法，使用 hashlib 模块，当用户输入哈希时，尝试所有大写小写组合以查找是否找到匹配项，一切都很好，效果很好，唯一的问题是CPU 使用率高达 50%-60%。无论如何，有没有办法减少 CPU 使用率？

操作系统：Windows

部分代码：

```
def md5(file, torev):
    with open(file) as f:
        for i in f:
            i = i.replace("\n", "")
            s = map(''.join, itertools.product(*zip(i.upper(), i.lower())))
            for k in s:
                rev = hashlib.md5(k).hexdigest()
                if rev == torev:
                   print "[+] Hash Value Found"
                   print "[+] Value: "+k
                   break 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T07:06:32.443

在这种情况下，减少 CPU 使用率的唯一方法是将散列计算从 CPU 中移出，可能会转移到带有 OpenCV/OpenCL 的 GPU 上。

# php - php多维数组输出空白

> ID：11920350
> 
> 赞同：-1
> 
> 时间：2012-08-12T07:03:04.147
> 
> 标签：php, arrays, foreach

我正在尝试使用 PHP 多维数组输出数据表，但我遇到了 foreach 循环的问题，它只为一个索引循环，它不输出下一个索引，在我的 $docs 的 print_r 输出中

```
Array
(
    [docs] => Array
        (
            [0] => Array
                (
                    [title] => Rew
                    [imgurl] => http://localhost/site/uploads/2012/07/print.jpg
                    [level_id] => Array
                        (
                            [0] => 2
                            [1] => 3
                        )

                )

            [1] => Array
                (
                    [title] => Second
                    [imgurl] => http://localhost/site/uploads/2012/07/type.jpg
                    [level_id] => Array
                        (
                            [0] => 1
                            [1] => 3
                        )

                )

        )

) 
```

在我的 php

```
$i =0;
foreach ($docs as $doc){
   foreach($doc as $a_doc){
       foreach($doc as $a_doc){

        echo $doc[$i]['title'];         
     }

   }
   $i++;
} 
```

但它没有给出任何输出，如果有人能给我一些建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T07:09:46.280

试试这个：

```
foreach($docs as $key => $doc){

    echo $doc['title'];

} 
```

每个`$doc`被迭代的是一个文档属性数组。循环中的`$key`in是数组`foreach()`中当前迭代元素的当前索引键。`$docs`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T07:12:30.893

如果包含键的数组`docs`只有一个元素，您可以这样做：

```
foreach( $docs['docs'] as $doc ) {
    echo $doc['title'];
} 
```

如果它应该有多个条目（除了`docs`），请选择：

```
foreach( $docs as $entry ) {
    foreach( $entry as $doc) {
        echo $doc['title'];
    }
} 
```

# java - 如何在 selenium webdriver 中将网络浏览器从 Firefox 更改为 Chrome/Opera/IE/Safari？

> ID：11920353
> 
> 赞同：8
> 
> 时间：2012-08-12T07:04:07.817
> 
> 标签：java, selenium, selenium-webdriver, selenium-chromedriver

如何将浏览器从 firefox 更改为在 selenium webdriver 中工作的 Chrome/Opera/IE？请逐步指导并使用代码片段。

如果您对上述任何浏览器有答案，请回复。

我读了很多关于此的内容，但无法正确链接。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-12T08:30:35.227

首先，您需要将正确的驱动程序导入项目/类。

喜欢

```
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.ie.InternetExplorerDriver; 
```

等等

您需要为所需的浏览器创建新的 Webdriver。

喜欢

```
WebDriver driver = new FirefoxDriver();
WebDriver driver = new InternetExplorerDriver();
WebDriver driver = new ChromerDriver(); 
```

等每个浏览器。

**注意：** 在单个测试中使用不同的浏览器/驱动程序是很困难的。您可以为每个浏览器使用类似的测试并维护一个测试套件（即使用一个驱动程序并在测试中导入并为其他浏览器维护类似的测试），或者您可以使用一些配置文件或 excel 来选择您想要的浏览器测试运行。您可能想探索 [http://htmlunit.sourceforge.net/](http://htmlunit.sourceforge.net/)进行无头测试。

有关 OperaDriver 的信息可以在这里找到：- [https://github.com/operasoftware/operadriver/](https://github.com/operasoftware/operadriver/)

# header - 如何确定网页是用 Live HTTP Headers 压缩的？

> ID：11920355
> 
> 赞同：0
> 
> 时间：2012-08-12T07:04:21.810
> 
> 标签：header, gzip

当我查看实时 http 标头中的每个页面时，该页面在标头中包含以下部分：

```
Accept Encoding: gzip, deflate
Content Encoding: Gzip 
```

当我使用网站检查它是否被压缩时，它说它没有被压缩。我们如何确定一个页面是被压缩的？
例如，我在[Gzip 测试器中测试](http://www.gidnetwork.com/tools/gzip-test.php)[了这个站点](http://www.itsanat.com)，它说它没有被压缩，但我在实时 http 标头中看到了内容编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T07:43:31.883

你的标题错了，应该是：

```
Content-Encoding: gzip 
```

所以基本上：在标题名称中的单词之间使用破折号而不是空格

您的网络服务器需要添加这些内容并进行压缩，请参阅[https://httpd.apache.org/docs/2.0/mod/mod_deflate.html](https://httpd.apache.org/docs/2.0/mod/mod_deflate.html)

# php - php/mysql 递归显示相关表中的关联记录

> ID：11920359
> 
> 赞同：0
> 
> 时间：2012-08-12T07:04:51.307
> 
> 标签：php, mysql, html, recursion, inner-join

假设我有 2 个与此类似的相关表：table_1: person_id, name; table_2：account_id、person_id、account_type、余额；

我想显示这样的结果：

(A)person_id - 姓名：(a)account_type - 余额，(a)account_type - 余额，(a)account_type - 余额

(B)person_id - 姓名：(b)account_type - 余额

(C)person_id - 姓名：(c)account_type - 余额，(c)account_type - 余额

* * *

以下是我目前所拥有的（我不确定是否应该在 2 个查询或仅 1 个连接查询中执行此操作）$where1 和 $search 是当前已经在页面上工作的用户输入搜索字段。$y 是我传递变量的愚蠢尝试，但我认为这不是我正在尝试做的正确解决方案：

```
$q = "SELECT person_id, 
FROM table_1 WHERE $where1 LIKE '$search%'"; 
$r = @mysqli_query ($dbc, $q);

$q2 = "SELECT person_id, balance, account_type 
FROM accounts WHERE person_id LIKE '$y%'"; 
$r2 = @mysqli_query ($dbc, $q2);

while($row = mysqli_fetch_array($r)) {
    echo $row['person_id']. " - " .$row['name']. ":";
    $y = $row['person_id'];
    echo "</br>";
        while($row = mysqli_fetch_array($r2)) {
        echo $row['account_type']. " - " .$row['balance'] ."</br>";
        }       
    echo "</br>";
    } 
```

目前这显示：

(A)person_id - 姓名： (a)account_type - balance (a)account_type - balance (a)account_type - balance (b)account_type - balance (c)account_type - balance (c)account_type - balance

(B)person_id - 姓名：

(C)person_id - 姓名：

* * *

我假设一段时间内的时间是这种方式的工作方式，但我不确定如何去做。此外，这些东西上面显然有代码，但这些东西都在工作，主要与打开数据库连接和搜索表单有关。

此外，我在此处包含的代码是示例代码，可能以另一种方式出错，但我主要只是在寻找有关如何构建查询和递归以按我想要的方式显示数据的总体思路显示。

提前感谢大家可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:12:42.527

我喜欢做的是把这样的数据放入一个适合我想要输出的显示的**多维数组中。**这将取决于您拥有多少数据，因为巨大的数组可能会导致问题。我会做一个查询，`order by person_id`然后是你想要的任何其他数据。然后遍历您的查询并使用第一个数组键来跟踪`person_id`.

```
$output_ary = array();
while($row = mysqli_fetch_array($r)) {
   if ( !array_key_exists($output_ary, $r['person_id'] ) {
      $output_ary[$r['person_id']] = array();
   }
   $output_ary[$r['person_id']][] = $r; // or a new array with the data elements you want
} 
```

然后你可以使用嵌套`foreach`循环来输出数据或其他东西。可能不是最优雅或最有效的解决方案，但对于较小的数据结果，我发现将数据放入与我想要显示它的方式相匹配的结构中对我有用。

# java - 花括号在 Eclipse 中不起作用

> ID：11920360
> 
> 赞同：4
> 
> 时间：2012-08-12T07:05:23.600
> 
> 标签：java, eclipse, parentheses, curly-braces

看图片，基本上如果我在 eclipse 中输入 shift+[ or shift+] aka { or }

我希望编辑器使用 { 或 } 更新 .java 源代码。

相反，它似乎在缩进......

现在我使用的是标准的 macbook pro，有英文的任何想法，为什么 eclipse 不会让我输入花括号。它大约在 2 周前工作，进行了更新......使用 Mountain Lion......现在它不工作了。 ![在此处输入图像描述](../Images/3240f743bf3146e76751242393f24072.png) 有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-06T13:40:29.760

我的解决方案是：

Help -> Key Assist 然后找到skip Skip all Breakpoints。

选择它并按`ctrl + shift + L`。它将打开一个首选项窗口，然后删除绑定。（`ctrl + alt + b`）

我希望它解决了你的问题！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-23T12:59:33.857

[![在此处输入图像描述](../Images/2376f31dc8c3c3b4b549a4b05d9ba448.png)](https://i.stack.imgur.com/1bUQj.jpg)

只需删除键，简单。希望能帮助到你。

```
General->Keys->Type filter keys->skip  ->skip All Brakepoint->Bindings-> Delete 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T07:17:28.460

此行为由以下首选项控制。

转到`Preferences -> Java -> Editor -> Typing`并确认`Automatically close -> Braces`已选择该选项，如下所示：

![在此处输入图像描述](../Images/6d5117138064e2f096174506878c9abd.png)

无论如何，我从来没有遇到过您在 Mountain Lion OSX 上遇到的问题，而且在过去的几天里，我一直在 Eclipse Indigo、Helios 和 Juno 之间切换。

如果上述方法不起作用，请尝试切换到新工作区并在那里尝试？我不知道可能控制这种大括号闭合行为的任何其他偏好。

***问题***：您使用的是哪个版本的 Eclipse？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-20T10:50:12.843

我在 Eclipse Java EE for Web Developers Luna 4.4.1 中遇到了这个问题。选择了两个“大括号”选项。但是**只有在选择“回车键调整新行缩进”后才开始正常工作**。希望它会帮助某人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-16T18:06:15.897

好的，今天我在Eclipse Mars Java EE上也遇到了这个问题。当我尝试从上面选择、取消选择大括号选项或任何其他解决方案时，它效果不佳，结果是在编辑上面几百行的代码段时，我在 IDE 自动关闭大括号后关闭了大括号。这个问题已经很晚了，但留在这里以供将来有同样问题的人参考

**检查您的代码是否有错误的额外大括号**

# php - 使用 PHP Mailer 出现在消息正文中的 MIME 标头

> ID：11920361
> 
> 赞同：0
> 
> 时间：2012-08-12T07:05:25.197
> 
> 标签：php, character-encoding, header, phpmailer

我一直在尝试其 README 文件中给出的 PHPMailer 示例脚本。现在，当我运行该脚本时：

```
<?php
require("phpmailer.inc.php");

$mail = new phpmailer;

//$mail->IsSMTP(); // set mailer to use SMTP
$mail->From = "from@email.com";
$mail->FromName = "Mailer";
//$mail->Host = "smtp1.site.com;smtp2.site.com";  // specify main and backup server
$mail->AddAddress("someone@someplace.com");
//$mail->AddAddress("ellen@site.com");   // name is optional
$mail->AddReplyTo("info@site.com", "Information");
$mail->WordWrap = 50;    // set word wrap
//$mail->AddAttachment("c:\\temp\\js-bak.sql");  // add attachments
//$mail->AddAttachment("c:/temp/11-10-00.zip");

$mail->IsHTML(true);    // set email format to HTML
$mail->Subject = "Here is the subject";
$mail->Body = "This is the message body";
$mail->Send(); // send message
?> 
```

我收到以下警告：

> 警告：mb_send_mail() [function.mb-send-mail]: 不支持的字符集 ""iso-8859-1";" - 在第 162 行的 /export/opt/samplefiles/phpmailer.inc.php 中将被视为 ascii

并且收到的消息也包含标题：

> Mime-Version: 1.0 这是邮件正文

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T09:03:41.590

第一个警告暗示在[`mb_send_mail()`](http://php.net/mb_send_mail)普通[`mail()`](http://php.net/mail)函数上使用。这不太可能在`PHPMailer`包装中准备好。

这是[`mbstring.func_overload`](http://php.net/mbstring.overload)您必须注意的设置。它不应该设置零位。（例如更改`5`为`4` -- 或从七更改为六，- 或例如从`3`更改为`2`。）

它必须设置在`php.ini`or`.user.ini`中。函数重载无法在运行时修复。

如果这不适应，那么解决方法可能是在应用提供的值[`mb_internal_encoding("UTF-8");`](http://php.net/mb_internal_encoding)之后避开错误消息。[`mb_encode_mimeheader()`](http://php.net/mb_encode_mimeheader)但是，您可能必须调整 PHPMailer 以省略字符集参数周围的引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:53:55.913

我刚刚意识到我实际上一直在使用旧版本的 PHPMailer（0.89 版或其他版本）。我给自己买了一个更新的 5.2，它似乎已经解决了。无论如何谢谢：P

# visual-c++ - OpenCV 2.2 网络摄像头不显示图像

> ID：11920366
> 
> 赞同：1
> 
> 时间：2012-08-12T07:07:07.350
> 
> 标签：visual-c++, image-processing, opencv, webcam

我在 Windows 7 64 位的 Visual C++ 2010 Express 上使用 OpenCV 2.2。每当我尝试运行一些简单的程序来访问和显示来自网络摄像头的图像时，我都会得到一个黑色的输出窗口，而不是实际的网络摄像头源。OpenCV 检测到网络摄像头，不报告任何错误或警告，但每一帧都是黑屏图像。

这是我一直在尝试的代码：

```
#include <opencv2/opencv.hpp>
using namespace cv;
int main()
{
    Mat img;
    VideoCapture cap(0);
    while (true)
    {
        cap >> img;
        Mat edges;
        cvtColor(img, edges, CV_BGR2GRAY);
        Canny(edges, edges, 30, 60);
        imshow("window label", img);
        waitKey(100);
    }
    return 0;
} 
```

关于似乎是什么问题的任何想法？在 OpenCV 2.4.2 上一切正常，但我不得不切换，因为我无法让 MSER 正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:00:23.533

尝试使用`VideoCapture cap(-1)`

这将自动选择网络摄像头设备。它可能会也可能不会解决问题，但值得一试。

# ruby-on-rails - 限制在红宝石中收集

> ID：11920371
> 
> 赞同：1
> 
> 时间：2012-08-12T07:08:08.903
> 
> 标签：ruby-on-rails, ruby, arrays

我目前有以下内容：

```
users = User.all   
comments = users.collect(&:comments) 
```

但是，如果有数千条评论，我只想从每个用户那里收集 10 条，以限制进行的数据库查询的数量。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T08:09:12.723

```
users = User.all
comments = users.collect { |user| user.comments.limit(10) } 
```

或与您模型中的另一个关联：

```
has_many :first_comments, :class_name => "Comment", :limit => 10 
```

那么这将导致只有两个数据库查询：

```
users = User.includes(:first_comments)
comments = users.collect(&:first_comments) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T07:14:10.207

试试这个

```
comments = Comment.where(:user_id=>users).limit(10) 
```

或者

```
comments = Comment.all(:conditions => {:user_id=>users}, :limit => 10) 
```

您可以使用任何适合您的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T07:24:35.943

最简单的查询看起来有点复杂：

```
Comment.where(["user_id IN (?)", users.collect(&id) ]).limit(10) 
```

我认为您的排序顺序是由某处的默认范围设置的。

导轨 2：

```
Comment.all(:conditions => ["user_id IN (?)", users.collect(&id) ], :limit => 10) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T07:27:00.200

```
users = User.all
comments = Comment.order("DESC created_at").limit(10).all 
```

或者，如果你只需要这 10 条最近评论的用户，你可以试试

```
comments = Comment.includes(:users).order("DESC created_at").limit(10).all
users = comments.map(&:user) 
```

# javascript - 基于时间的图像类更改

> ID：11920372
> 
> 赞同：1
> 
> 时间：2012-08-12T07:08:24.347
> 
> 标签：javascript, time, background, clock

使用以下脚本，我能够根据一天中的时间更改身体背景。但是，我想把它从只影响身体改变为一个类，所以我可以让多个对象改变它们的背景，而不仅仅是一个。有什么建议么？

```
<script type="text/javascript">
$('body').css('background-image', function(){

var url, hour = new Date().getHours();
if (hour > 7 && hour < 20) {
  return 'images/bg_daytime.png';
 } else {
  return 'images/bg_nighttime.png';
 }
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T07:11:41.257

简单的。尝试;

```
<script type="text/javascript">
$('.your_class').css('background-image', function(){
var url, hour = new Date().getHours();
if (hour > 7 && hour < 20) {
  return 'images/bg_daytime.png';
 } else {
  return 'images/bg_nighttime.png';
 }
});
</script> 
```

# php - PHP 性能： echo file_get_contents('...') V $file = file_get_contents('...'); 回声$文件

> ID：11920374
> 
> 赞同：0
> 
> 时间：2012-08-12T07:08:29.000
> 
> 标签：php, performance, file-get-contents

在 PHP 中哪个更快：

`echo file_get_contents('http://example.com/file.txt');`

或者

`$file = file_get_contents('http://example.com/file.txt'); echo $file;`

我正在`require('/var/www/menu.php');`为我的菜单等使用服务器端包含（），但想将其用于某些事情（例如在其他域上）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T07:24:21.137

如果您在每个页面上大量使用此方法来处理非常大的文件，那么您将通过额外的变量浪费内存空间。所以更好的方法是：

```
echo file_get_contents('http://example.com/file.txt'); 
```

最好问一下哪个函数更快 file_get_contents() 或 fread()？那么答案是如果文件超过 1MB 或 2MB，那么使用 file_get_contents() 可以更好地执行。
您可以在此处查看基准：

```
File Read Type          Average Execution Time            Type of File 
file_get_contents()        0.3730ms                          Small 
fread()                    0.1108ms                          Small 
file_get_contents()        0.012ms                           Large 
fread()                    0.019ms                           Large 
```

Large file was 2.3MB and the small one was about 3.0KB.
I ran both functions against small files 100,000 times and ran it again on large file just once.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T07:12:58.820

不管有什么区别，如果有的话，与首先发出 HTTP 请求来获取内容相比，它是 100% 可以忽略不计的`file.txt`。写下你的意思。如果您不需要变量，请不要使用变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T07:15:07.980

我做了一个小测试，但我不确定在你的情况下会更快.. microtime 在我看来是一个很好的测试速度的工具..

```
<html>
<body>
<?php
function microtime_float()
{
    list($usec, $sec) = explode(" ", microtime());
    return ((float)$usec + (float)$sec);
}
$time_start = microtime_float();
echo "<textarea>".file_get_contents('http://in.gr')."</textarea>";
$time_end = microtime_float();
$time = $time_end - $time_start;
echo  $time;

$time_start = microtime_float();
$file = file_get_contents('http://in.gr'); echo "<textarea>".$file."</textarea>";

$time_end = microtime_float();
$time = $time_end - $time_start;
echo  $time;
?>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T07:16:21.410

我建议您使用`$file`，因为您可以将变量用于多个操作。两者之间的时间可以忽略不计。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T07:22:14.793

答案很简单：

第 1 行 -`echo file_get_contents('http://example.com/file.txt');`将比第 2 行更快，因为没有变量初始化并且在内存中不会为此收集存储，而且在 PHP（这是弱类型）中初始化变量的成本很高。但是如果你打算在其他地方使用 $file，而不是在这里回显它，你只需要初始化这个变量。

# java - 如何根据用户输入检查亚马逊 s3 云存储中文本文件存储中的单词？

> ID：11920377
> 
> 赞同：0
> 
> 时间：2012-08-12T07:09:09.150
> 
> 标签：java, amazon-s3, amazon

如何将存储在亚马逊 s3 云存储中的文本文件中的单词与搜索栏中的用户输入进行匹配，然后下载特定文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T08:48:52.513

结帐[cloudbash.sh](http://cloudbash.sh) - 不只是 grep，任何用于 S3 数据的 linux 工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T19:44:31.933

您在 Amazon S3 中的文件可以公开，然后使用 HttpURLConnection 进行访问，如下所示：

```
 import java.io.*;
    import java.net.HttpURLConnection;
    import java.net.URL;

    class Download
     {public static void main (String args[])
       {String u = "http://s3.amazonaws.com/Bucket/path/file.data";
        String d = download(u);
        System.err.println("Download "+u+"=\n"+d);
       }

      public static String download(String u)
       {final int B = 1024*1024; 

        try 
         {final URL url = new URL(u);
          final HttpURLConnection c = (HttpURLConnection)url.openConnection();
          c.connect();
          final int r = c.getResponseCode(); 
          if (r != 200) 
           {System.err.println("Got response code "+r+", expected 200, cannot download "+u);
            return null;
           }
          System.err.println("Content length="+c.getContentLength());

          final InputStream i = new BufferedInputStream(url.openStream(), B);
          final byte data[] = new byte[B];
          String o = "";

          for(int n = i.read(data); n != -1; n = i.read(data))
           {o += new String(data, 0, n);
           }

          i.close();
          return o;
         }
        catch (Exception e) 
         {System.err.println("Cannot download "+u+" due to "+e);
         }
        return null;
       }
     } 
```

如果您无法公开这些文件，您将不得不走更复杂的路线，即使用 Amazon IAM 创建用户、分配用户权限、生成密钥/秘密组合，然后使用[http中记录的 Amazon AWS SDK for Java ://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/index.html](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/index.html)。如果您在该路线上需要帮助，请在此处回复。

# javascript - 提交时的文本区域验证

> ID：11920378
> 
> 赞同：0
> 
> 时间：2012-08-12T07:09:28.110
> 
> 标签：javascript, dojo, dijit.form

我正在验证一个`textarea`. 它工作正常，但是当我提交表单时，它不再工作了。

我的代码是：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
         <link rel="stylesheet" href="dojo/dojoroot/dijit/themes/claro/document.css">
        <link rel="stylesheet" href="dojo/dojoroot/dijit/themes/claro/claro.css" />
        <script src='dojo/dojoroot/dojo/dojo.js' data-dojo-config=' parseOnLoad: true'></script>
        <title>JSP Page</title>
        <script>
            dojo.provide("ValidationTextarea");
             dojo.require("dijit.form.SimpleTextarea");
            dojo.require("dijit.form.ValidationTextBox");  
             dojo.require("dijit.form.Form");
            dojo.require("dijit.form.Button");
            dojo.declare("ValidationTextarea",
            [dijit.form.ValidationTextBox,dijit.form.SimpleTextarea],
            {
                invalidMessage: "Invalid Input",

                postCreate: function() {
                    this.inherited(arguments);
                },

                validate: function() {
                    this.inherited(arguments);
                    if (arguments.length==0) this.validate(true);
                },

                onFocus: function() {
                    if (!this.isValid()) {
                        this.displayMessage(this.getErrorMessage());
                    }
                },

             onBlur: function() {
                    this.validate(false);
                }
            }
        );
        </script>
    </head>
    <body class="claro">
        <div data-dojo-type="dijit.form.Form" id="myForm" data-dojo-id="myForm"
             action="" method="post">
         <script type="dojo/method" data-dojo-event="onReset">
                return confirm('Press OK to reset Form values');
            </script>
            <script type="dojo/method" data-dojo-event="onSubmit">
                if(this.validate()){
                return confirm('Form is valid, press OK to submit');
                }
                else{
                alert('Form contains invalid data.  Please correct first');
                    return false;
                }
                return true;
            </script>
        <textarea id="address" name="address"  rows="4" cols="25" promptMessage="Allowed , Alphanumeric # , . - _ blank space " regExp="^[a-z0-9 #,_. -]{3,300}" dojoType="ValidationTextarea"  required="true"></textarea>

         <button data-dojo-type="dijit.form.Button" type="reset">Reset</button> 
         <button data-dojo-type="dijit.form.Button" type="submit" name="submitButton" value="Submit">Submit</button>
        </div>
    </body>
</html> 
```

上面的代码工作正常`onBlur`，但是当使用提交按钮时它会抛出

> 表单包含无效数据。请先更正

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T07:14:55.187

您需要`return`在验证函数中使用，否则对该函数的任何调用都将返回：`undefined`这与布尔值 false 相同，例如：

### 错误用法：

```
function isThisCorrect() {
    if(gCorrect) {
       rogerthat();
    } else {
       nope();
    }
}
var boolReturn = isThisCorrect(); 
```

注意，没有任何回报

### 正确使用

```
function isThisCorrect() {
    if(gCorrect) {
       return true;
    }
    return false;
}
var boolReturn = isThisCorrect(); 
```

# android - Android：如何强制布局或任何视图在倾斜时具有固定大小？

> ID：11920387
> 
> 赞同：3
> 
> 时间：2012-08-12T07:11:21.703
> 
> 标签：android, layout, view, size

是否可以强制布局在倾斜时具有固定大小？

直接使用视图还是使用布局强制在倾斜中具有固定大小并将视图放入布局中？

如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T07:40:37.047

您可以将特定宽度设置为您想要使用的布局

```
android:layout_width="100dp" 
```

你可以用两种方式做到这一点。直接到视图以及将视图放在布局中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T07:14:37.933

是的，它可能，您只需要在 xml 文件中声明视图或布局所需的高度和宽度，如下所示

```
android:layout_width="200dip" <!--use this instead of wrap_content or fill_parent-->
android:layout_height="200dip" 
```

# vb.net - 在 VB.NET 中的父窗体上动态排列用户控件

> ID：11920389
> 
> 赞同：0
> 
> 时间：2012-08-12T07:12:15.403
> 
> 标签：vb.net, forms, user-controls

**如何通过代码**在我的父窗体中安排控件？

到目前为止，我使用此代码调用用户控件；

```
 Me.ParentForm.Controls.Remove(Me)
 controlMain() 
```

我希望**用户控件**在用户调整父表单大小或最大化表单时自行排列。目前，我通过以下方式设置控件，

```
 Public Sub controlMain()
        Dim usrctl As New _ctlMain
        _Main.Controls.Add(usrctl)
        usrctl.Location = New Point(_Main.Width / 2 - usrctl.Width / 2, _Main.Height / 2 -usrctl.Height / 2)
    End Sub 
```

这是在一个模块上。**_Main**是我的父窗体，而**_ctlMain**是被调用的控件。我不打算在设计期间将用户控件放在父窗体上，因为在调用活动控件中的特定函数后，我还有其他用户控件要调用。

我已经尝试过 usercontrol 的**autosize**属性，但我想它不适用于我的应用程序。Usercontrol 没有停靠和锚点属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T07:47:29.767

使用其中一种自动布局控件，例如[FlowLayoutPanel](http://msdn.microsoft.com/en-us/library/system.windows.forms.flowlayoutpanel.aspx)或[TableLayoutPanel](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.aspx)。

与其将用户控件添加到表单本身，不如将它们添加到使用`DockStyle.Fill`.

在我看来，FlowLayoutPanel 就是您想要的。这样，控件的布局将完全自动处理，它们的位置可以从左到右或从上到下，具体取决于[`FlowDirection`property](http://msdn.microsoft.com/en-us/library/system.windows.forms.flowlayoutpanel.flowdirection.aspx)的值。

选择 TableLayoutPanel 的唯一原因是您需要更精确地控制控件的精确定位。它就像一个 HTML 表格一样工作，每个控件都有自己的“单元格”。

如果您想确保自动调整其大小，您还可以设置各个用户控件的`Dock`和/或属性。`Fill`例如，您可以将每个控件设置为填充 TableLayoutPanel 中放置它的整个单元格。

# java - Eclipse 不显示 src 文件

> ID：11920392
> 
> 赞同：11
> 
> 时间：2012-08-12T07:12:41.397
> 
> 标签：java, eclipse, project, invisible

我的 Eclipse 中有三个不同的项目，昨天 src 文件在其中一个项目中变得不可见。两天前还好，我不知道这是怎么发生的。我在项目资源管理器或包资源管理器中看不到 src 文件。

项目浏览器：

![项目浏览器](../Images/f2cc49ade7d5ec7df141d94c5a0e42e3.png)

但是，如果我使用导航器查看，我可以看到目录中的所有文件。

导航器：

![航海家](../Images/f27d1135626770ebdd0ae67da5e5c449.png)

我将 Eclipse Indigo SR2 和 IBM Rational ClearCase 用于前两个项目。另一个是我本地的测试项目。

有人知道我怎样才能回到项目资源管理器中的 src 文件吗？

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-12T07:15:17.540

尝试右键单击项目并单击刷新。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-11-06T14:32:45.357

我今天也遇到了同样的问题，是因为我切换到错误的视图模型。我建议你切换`project explorer`到**`Package Explorer`**.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-12T07:17:03.940

检查您的 Java 构建路径以确保 src 存在。右键单击项目并选择构建路径 -> 配置构建路径。如果构建路径中不存在 src 目录，则它不会像您显示的那样显示在 Java 区域下，但会出现在导航器中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-10T19:41:00.493

我在 Neon 中遇到了同样的问题 - src 文件夹消失了。src 文件夹中的一个子目录会显示，但不会显示其他子目录，也不会显示父 src 文件本身。无论我在构建路径配置中做了什么，都只会显示一个子目录。它看起来像是设置中的某种损坏。以上解决方案都不适合我，包括删除项目和所有文件，然后重新检查。

起作用的是切换到旧工作区，导入项目，然后切换回有问题的工作区。神奇的是，有问题的项目再次响应了我对构建路径配置的更改。我不确定我是否必须执行从旧工作区导入的临时步骤 - 可能只是来回切换会起作用，但不确定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-18T12:35:51.300

尝试在不删除文件的情况下删除（删除）项目（有一个复选框可让您保留项目文件）。

然后重新导入项目。不确定这是否能解决您的问题，但我遇到了同样的问题，删除->重新导入为我解决了这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-31T15:04:18.397

我今天遇到了这个问题，问题是“配置构建路径”窗口的“源”选项卡中的“src”文件夹不正确。它在那里，但路径错误，所以它有一个红色的 X。删除该条目并重新添加“src”路径（来自项目）导致将“src”文件夹放回包层次结构中。

就我而言，这是因为在用户帐户之间共享工作区，工作区的路径和下面的文件夹不一样。一个用户在本地访问工作区，另一个用户作为映射驱动器访问，等等。

解决此问题，然后将路径标准化为所有访问者都相同，从而解决了导致此问题浮出水面的根本问题。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-08-12T07:16:00.787

重新启动您的 Eclipse 工作空间。

还可以在 Eclipse 中更改开放视角。

# facebook - apps.Facebook.com/XYZ 与 Facebook.com/XYZ/app_123456789

> ID：11920393
> 
> 赞同：0
> 
> 时间：2012-08-12T07:12:48.527
> 
> 标签：facebook, facebook-graph-api, facebook-apps

apps.Facebook 和 Facebook.com/COMPANY_NAME/app_1234567 之间有什么区别？

例如： http: [//www.facebook.com/AcademyofArtUniversity/app_307555419320340](http://www.facebook.com/AcademyofArtUniversity/app_307555419320340)

我正在尝试为客户构建一个类似的联系表单页面，但是当我创建一个应用程序时，我得到的是 apps.facebook.com/APP_NAME 而不是最后的应用程序名称。有区别吗？这些是不同类型的应用程序，还是只是一种旧式名称？

额外的问题：为什么艺术学院（使用上面示例中的第二步）请求用户权限以提取 Facebook Graph 数据，而不是要求用户重新输入？这与我上面的问题有关吗？是否有使用权限与新条目的最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:18:26.313

`apps.facebook.com/[namespace]`是[Canvas 应用程序](https://developers.facebook.com/docs/guides/canvas/)的主要 url ，而后者，`www.facebook.com/[pagename]/app_[appid] 是您的应用程序作为[页面标签应用](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)程序添加到页面。

对于第二个问题，这个应用程序可能不想请求权限（也许是为了降低摩擦），因为实际上只有少数字段可以通过图表访问。

# matlab - MATLAB SVD 奇异值排序

> ID：11920394
> 
> 赞同：0
> 
> 时间：2012-08-12T07:12:53.360
> 
> 标签：matlab, svd

[SVD 的 MATLAB 文档](http://www.mathworks.com/help/techdoc/ref/svd.html)指出，返回的对角矩阵具有按降序排列的奇异值。有没有办法找出奇异值的自然顺序是什么？我问的原因是因为奇异值对应于与输入矩阵的行相关的维度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T21:26:09.770

不，SVD 的定义并没有引入排序。将讨论限制在`X`方阵上并采用与引用的[matlab 文档](http://www.mathworks.com/help/techdoc/ref/svd.html)相同的表示法，如果`X = U*S*V'`是 的 SVD `X`，那么对于每个[置换矩阵](http://en.wikipedia.org/wiki/Permutation_matrix) `P`，我们可以形成一个有效的 SVD 为`X = (U*P)*(P'*S*P)*(V*P)'`。用递减值表示矩阵`S`只是为了方便：每个排列`P'*S*P`都会做同样的工作。

作为旁注：`P*X = P*U*S*V'`表明矩阵的行排列`X` *不会*改变奇异值`S`，这可以被认为独立于 的任何行（或列）排列`X`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T19:10:53.737

我希望在回复之前对这里的问题有所了解。例如，我在文件交换中发布的[eigenshuffle](http://www.mathworks.com/matlabcentral/fileexchange/22885-eigenshuffle)工具允许您重新排序特征问题序列的特征值和特征向量，因此它们在序列上彼此最大程度地一致。也许您的问题是相似的，因此您可能会将奇异值视为随驱动系统的某些参数而变化的函数。

但实际上，用于计算 SVD 的方法没有对奇异值进行自然排序。事实上，唯一有意义的顺序是出现的顺序 - 降序。奇异值的顺序不依赖于矩阵行的顺序，因为这个问题似乎含糊其辞，所以我不确定那里的意思。

如果您可以使您的需求更清楚，请随时修改问题。

# spring - 如何在 Spring Security 中找到用户的 IP？

> ID：11920395
> 
> 赞同：13
> 
> 时间：2012-08-12T07:12:52.797
> 
> 标签：spring, session, spring-security, ip

我需要找到那些登录我们的应用程序的用户。
我们正在使用 Spring Security，并且必须有一种方法可以找出用户的 IP。

我认为这些信息都存储在他们的会话中。在 Spring Security 中，当前会话存储在[SessionRegistry](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/core/session/SessionRegistry.html)中。从这个类中，我可以获得经过身份验证的用户列表和一些会话信息。（使用`getAllPrincipals`,`getAllSessions`和`getSessionInformation`）

问题是，我怎样才能访问当前用户的 IP？考虑我们必须只为已知区域提供服务。[SessionInformation](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/core/session/SessionInformation.html)
没有太大帮助 ，因为它不包含太多信息。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-12T08:25:54.423

我认为可以通过使用 [hasIpAddress](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html) http 表达式来实现检查

请参阅第[*15.2 节 Web 安全表达式*](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html)

```
<http use-expressions="true">
    <intercept-url pattern="/admin*"
        access="hasRole('admin') and hasIpAddress('192.168.1.0/24')"/>
    ...
  </http> 
```

如果您想要更大的灵活性，您可以实现自己的 IP 地址检查服务，基于 IpAddressMatcher：

```
<bean id="ipCheckService" class="my.IpCheckService">
</bean>

<security:http auto-config="false" access-denied-page="/accessDenied.jsp" 
use-expressions="true">
    <security:intercept-url pattern="/login.jsp"
        access="@ipCheckService.isValid(request)" /> 
```

豆实现：

```
public class IpCheckService {
    public boolean isValid(HttpServletRequest request) {
        //This  service is a bean so you can inject other dependencies,
            //for example load the white list of IPs from the database 
        IpAddressMatcher matcher = new IpAddressMatcher("192.168.1.0/24");

    try {
        return matcher.matches(request);
    } catch (UnsupportedOperationException e) { 
        return false;
    }
    }
} 
```

**更新**：您可以尝试通过这种方式获取当前用户 IP：

```
 public static String getRequestRemoteAddr(){
        HttpServletRequest request = ((ServletRequestAttributes)RequestContextHolder.currentRequestAttributes())
                   .getRequest(); 
        return request.getRemoteAddr();
} 
```

**更新**有关 IP 地址和会话之间关系的信息只能从不同的来源收集（例如侦听 AuthenticationSuccessEvent 和 SessionDestroyedEvent 事件，实现过滤器或使用 AOP 拦截器）。Spring Security 不存储此类信息，因为它没有用，因为 IP 地址仅在服务器处理[ServletRequest](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html)时才有意义。

IP 地址可能会更改（用户可能正在使用代理），因此我们只能审核不同类型的事件，例如使用某些凭据登录、从不同 IP 访问服务或进行一些可疑活动。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-10-19T08:44:32.520

[您可以从WebAuthenticationDetails](http://docs.spring.io/spring-security/site/docs/current/apidocs/org/springframework/security/web/authentication/WebAuthenticationDetails.html)对象中获取 IP 地址，该对象可以从[Authentication](http://docs.spring.io/spring-security/site/docs/current/apidocs/org/springframework/security/core/Authentication.html)实例中获取。

```
Object details =
    SecurityContextHolder.getContext().getAuthentication().getDetails();
if (details instanceof WebAuthenticationDetails)
    ipAddress = ((WebAuthenticationDetails) details).getRemoteAddress(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-12T08:29:20.507

您可以使用 HttpServletRequest 获取用户的 IP 地址。[（SpringSecurity 的开发人员在他们的表达式hasIpAddress(...)](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html#el-access-web)中以相同的方式执行此操作，该表达式放置在*WebSecurityExpressionRoot*类中）。

例如，您可以通过 2 种方式获取 HttpServletRequest：

1）使用RequestContextHolder：

```
HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder
                .getRequestAttributes()).getRequest(); 
```

2）使用自动装配：

```
@Autowired
private HttpServletRequest request; 
```

我从[这里](https://stackoverflow.com/questions/559155/how-do-i-get-a-httpservletrequest-in-my-spring-beans)拿了这个。

然后使用*HttpServletRequest*您可以通过以下方式获取 IP 地址：

```
String address = request.getRemoteAddr(); 
```

这里是如何在 Spring Security 中比较地址的：

```
/**
 * Takes a specific IP address or a range using the IP/Netmask (e.g. 192.168.1.0/24 or 202.24.0.0/14).
 *
 * @param ipAddress the address or range of addresses from which the request must come.
 * @return true if the IP address of the current request is in the required range.
 */
public boolean hasIpAddress(String ipAddress) {
    return (new IpAddressMatcher(ipAddress).matches(request));
} 
```

和 IpAddressMatcher 类：

```
public final class IpAddressMatcher implements RequestMatcher {
    private final int nMaskBits;
    private final InetAddress requiredAddress;

    /**
     * Takes a specific IP address or a range specified using the
     * IP/Netmask (e.g. 192.168.1.0/24 or 202.24.0.0/14).
     *
     * @param ipAddress the address or range of addresses from which the request must come.
     */
    public IpAddressMatcher(String ipAddress) {

        if (ipAddress.indexOf('/') > 0) {
            String[] addressAndMask = StringUtils.split(ipAddress, "/");
            ipAddress = addressAndMask[0];
            nMaskBits = Integer.parseInt(addressAndMask[1]);
        } else {
            nMaskBits = -1;
        }
        requiredAddress = parseAddress(ipAddress);
    }

    public boolean matches(HttpServletRequest request) {
        return matches(request.getRemoteAddr());
    }

    public boolean matches(String address) {
        InetAddress remoteAddress = parseAddress(address);

        if (!requiredAddress.getClass().equals(remoteAddress.getClass())) {
            return false;
        }

        if (nMaskBits < 0) {
            return remoteAddress.equals(requiredAddress);
        }

        byte[] remAddr = remoteAddress.getAddress();
        byte[] reqAddr = requiredAddress.getAddress();

        int oddBits = nMaskBits % 8;
        int nMaskBytes = nMaskBits/8 + (oddBits == 0 ? 0 : 1);
        byte[] mask = new byte[nMaskBytes];

        Arrays.fill(mask, 0, oddBits == 0 ? mask.length : mask.length - 1, (byte)0xFF);

        if (oddBits != 0) {
            int finalByte = (1 << oddBits) - 1;
            finalByte <<= 8-oddBits;
            mask[mask.length - 1] = (byte) finalByte;
        }

 //       System.out.println("Mask is " + new sun.misc.HexDumpEncoder().encode(mask));

        for (int i=0; i < mask.length; i++) {
            if ((remAddr[i] & mask[i]) != (reqAddr[i] & mask[i])) {
                return false;
            }
        }

        return true;
    }

    private InetAddress parseAddress(String address) {
        try {
            return InetAddress.getByName(address);
        } catch (UnknownHostException e) {
            throw new IllegalArgumentException("Failed to parse address" + address, e);
        }
    }
} 
```

**编辑：**

根据[此处](https://stackoverflow.com/q/11922402/1375049)和[此处](https://stackoverflow.com/q/11928637/1375049)的相关问题，您可以使用自定义过滤器将用户的 IP 添加到会话中。然后从与用户相关的会话中获取此信息，这将是必要的。例如，您可以像这样放置用户的 IP 信息：

```
public class MonitoringFilter extends GenericFilterBean{
@Override
public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain chain) throws IOException, ServletException {
    HttpServletRequest httpRequest = (HttpServletRequest) request;

    String userIp = httpRequest.getRemoteAddr();

    httpRequest.getSession().setAttribute("userIp", userIp);

    // Add other attributes to session if necessary
} 
```

# ibm-midrange - 显示加载了已排序数据库记录的子文件

> ID：11920398
> 
> 赞同：0
> 
> 时间：2012-08-12T07:13:23.347
> 
> 标签：ibm-midrange, rpgle, rpg

例如，假设我有这些表：

USRMF（主要物理文件）

```
User ID   User Name  
A00001    SAMUEL
A00002    ADAM 
```

USRTS

```
user id   date   time in    time out
A000001   080812 084555     104545 
A000001   080812 120800     150000
A000001   080812 170000     180000
A000001   090812 084555     104545
A000001   090812 170000     180000
A000002   080812 084555     104545 
A000002   080812 120800     150000
A000002   080812 170000     190000
A000002   090812 084555     104545
A000002   090812 170000     190000 
```

我的子文件应该看起来像这样：

```
Option:  5-display

OPT   User ID   User Name  Date   TimeIn  TimeOut
 _    A000001   SAMUEL     090812 084555  180000
 _    A000002   ADAM       090812 084555  190000
 _    A000001   SAMUEL     080812 084555  180000
 _    A000002   ADAM       080812 084555  190000 
```

*此子文件显示每个用户和日期的摘要数据：第一次进入和最后一次退出。该名称应从其他数据库表 (USRMF) 中读取，并且应按考勤卡日期排序。

如果用户将选项 5 放在子文件的第三行，其中用户 id：A000001 用户名：samuel 和日期 090812，则将显示下一个子文件屏幕。

```
OPT   User ID   User Name  Date   TimeIn  TimeOut
 _    A000001   SAMUEL     080812 084555  104545 
 _    A000001   SAMUEL     080812 120800  150000
 _    A000001   SAMUEL     080812 170000  180000 
```

该子文件应列出所选日期和人员的所有进出时间。

我该怎么做这个程序????????? 特别是对于第一个子文件.???????

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T16:03:05.173

# 数据库

首先，任何 DBA 都会告诉您，如果您是从头开始创建的，请不要使用 DDS 来定义您的文件。从长远来看，如果使用 SQL 定义它们会更好，如下所示：

```
 CREATE TABLE USERMAST
      (UserID     char(7),
       UserName   char(25)
      );
    LABEL ON TABLE  USERMAST is 'User Master Table';

    CREATE TABLE WORKPERIOD
      (UserID     char(7),
       WorkDay    date,
       StartTime  time,
       EndTime    time
      );
    LABEL ON TABLE  WORKPERIOD is 'User Work Periods'; 
```

请注意，这是使用实际数据和时间字段，而不是数字字段。这使得根据需要更容易操作。运行 SQL 时，您可以指定日期和时间格式的首选项，例如 *ISO、*DMY 或 *EUR。您可以将其视为以 *ISO 格式存储，但以您希望的任何格式提供给您。

无论您的文件（表）是在 DDS 还是 SQL 中定义的，您仍然应该使用嵌入式 SQL 来读取程序中的数据。起初，它可能看起来比原生 I/O 更复杂。但是当你了解它时，你会发现它更强大、更容易、更快、更灵活。

## 加工

嵌入 SQL 的基本概念实际上并不复杂。您的程序在自由格式的 ILE RPG 中可能是这样的（假设这是您正在使用的）：

```
 EXEC SQL      DECLARE CURSOR c1 FOR your-select-statement;
       EXEC SQL      OPEN c1;
                     do while SQLSTATUS is ok;
       EXEC SQL        FETCH FROM c1 INTO :var1, :var2, ... ;
                       if SQLSTATUS is ok;
                         // process data
                       endif;
                     enddo;
       EXEC SQL      CLOSE c1; 
```

通过检查 的前两个字符来检查数据结尾或其他问题`SQLSTATE`。'00' 表示一切正常，'01' 是警告（可能不正常），其他一切都是错误。（这比使用更容易`SQLCODE`。）

你在你的 DECLARE CURSOR 语句中放置了一个 SELECT 语句（更具体地说是一个全选），它决定了当你从游标中提取时系统会给你什么。SELECT 可以做很多强大的事情。在这里，它将从两个表中获取信息并为您汇总行。如果你只是总结，它可能看起来像这样：

```
 SELECT userid, workday, min(starttime) as firsttime, max(endtime) as lasttime
      FROM workperiod
      GROUP BY userid, workday 
```

如果您只是连接两个表中的数据，它可能如下所示：

```
 SELECT u.userid, u.username, p.workday, p.starttime, p.endtime
      FROM UserMast as u
      JOIN WorkPeriod as p  on u.userid = p.userid 
```

将这些放在一起的首选方法是这样的：

```
 WITH s as
    ( SELECT userid, workday, min(starttime) as firsttime, max(endtime) as lasttime
      FROM workperiod
      GROUP BY userid, workday
    )
    SELECT u.userid, u.username, s.workday, s.firsttime, p.lasttime
      FROM UserMast   as u
      JOIN WorkPeriod as p  on u.userid = s.userid
      ORDER BY workday descending, username
      FOR INPUT ONLY 
```

有关使用 SQL 访问数据库的更多信息，请查看[IBM i 信息中心](http://publib.boulder.ibm.com/eserver/ibmi.html)。在数据库/参考下查看。有关显示文件的信息，请查看信息中心的 Programming / DDS / DDS for Display files，

* * *

# 显示文件

就您的显示文件而言，您需要为每个子文件屏幕定义至少两种记录格式——一种子文件记录格式和一种子文件控制记录格式。

子文件记录用于列表中的一行。它应该有`SFL`关键字。

子文件控制记录管理屏幕。它通常包含子文件的屏幕标题和列标题。它应该有`SFLCTL(yoursubfilename)`, `SFLSIZ(subfile-rows)`, `SFLPAG(rows-per-page)`, nn `SFLDSP`, nn `SFLDSPCTL`, nn `SFLCLR`, nn `SFLEND(*MORE)`，其中 nn 表示条件指示符。您通常希望指定 subfile-rows 比 rows-per-page 多 1。还包括此处的任何功能键规格。

您可能还需要屏幕底部的记录格式，以告诉用户可以使用哪些功能键。如果是这样，请`OVERLAY`在子文件控制记录上使用关键字。

## 加工

1.）关闭`SFLDSP`并`SFLDSPCTL`防止它们暂时显示在屏幕上。打开`SFLCLR`以启用创建空子文件。现在写入子文件控制记录。

2.）在循环处理数据库中的行中，增加子文件记录号，并写入子文件记录。

3.) 填写子文件记录后：打开`SFLDSP`，`SFLDSPCTL`这样两者都会显示。关闭`SFLCLR`，以免您的子文件记录被清除。打开，`SFLEND`以便它将在每个页面的底部显示“更多...”，除了最后一页。写下你的立足点记录。EXFMT 你的子文件控制记录。处理任何适用的功能键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:00:49.657

@WarrenT 提供了一个很好的答案，即使您不喜欢 SQL，您也可以使用一般概念来加载和显示子文件。我们大多数人学习的方式是通过一本非常古老的书，叫做[Application Display Programming](http://publib.boulder.ibm.com/iseries/v5r2/ic2924/books/c4157150.pdf) guide。15年没变。除此之外，我强烈建议您让一位同事向您展示您小组的其他成员如何进行子文件编程。几乎可以肯定，您想要遵守的风格问题。

# php - 在 wordpress 中显示特定的顶级页面和子页面

> ID：11920399
> 
> 赞同：0
> 
> 时间：2012-08-12T07:13:46.653
> 
> 标签：php, wordpress, menu

一段时间以来一直在寻找这个问题的答案，在各种菜单解决方案上看到了很多答案，但没有一个能完全满足我的需求。

我正在尝试在 wordpress 中的菜单上显示子页面和父页面。因此，如果我的网站如下所示：

> 第 1 页
> 
> ```
> page 1a
> 
> page 1b
> 
> page 1c 
> ```
> 
> 第2页
> 
> 第 3 页
> 
> ```
> page 3a
> 
> page 3b 
> ```
> 
> 第 4 页
> 
> 第 5 页

在第 1 页上时，我想在菜单上显示第 1 页和下面的所有子页面，在子页面上时，我想在菜单上显示子页面和父页面，但不显示菜单上的其余页面顶层。

我当前的代码让我走到了一半，因为它在特定分支的任何页面上显示所有子页面，因为它有一个特定的帖子 ID，但我不知道要添加什么来创建父 ID。我正在使用的当前代码如下：

```
<ul>
<?php
  $children = wp_list_pages('title_li=&child_of='.$post->ID.'820');
  if ($children) { ?>
  <ul>
  <?php echo $children; ?>
  </ul>
  <?php } ?>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T09:04:56.460

尽管我不想在 SO 上回答“使用插件”，但这正是我要做的 - 或者至少，为您指明插件的方向，然后您可以从中获取代码并转换和如果需要，可以添加到您的主题中。它只是一个非常小的 php 文件。

一个老东西，但一个好东西，我现在仍在使用它（即使它多年没有更新，它在最新的 3.4.1 上仍然可以正常工作；

[Wordpress 子页面小部件](http://wordpress.org/extend/plugins/subpages-widget/)

它被设置为一个小部件，但显然您不需要这样使用它。这是一段方便的代码，它将显示指向子页面的链接，也显示指向兄弟页面的链接（我理解为您问题的第二部分），并显示指向父页面的链接。

# python - PyQt：从对话框访问主窗口的数据？

> ID：11920401
> 
> 赞同：4
> 
> 时间：2012-08-12T07:14:08.587
> 
> 标签：python, pyqt, qdialog, qmainwindow

所以，我正在使用 Python 和 PyQt。我有一个包含 QTableWidget 的主窗口，以及一个以模态方式打开并具有一些 QLineEdit 小部件的对话框......到目前为止还好，但我有 2 个问题：

1.  当对话框打开时，我的主窗口冻结，我真的不喜欢这样......

2.  我想要的是，当我完成 QLineEdit 的编辑时，程序将搜索 QTableWidget，如果 QLineEdit 中的文本存在于表格中，则会出现一个对话框并告知这一点。这是一般的想法。但是，到目前为止，我似乎只能创建一个新的 QTableWidget 实例，并且我不能使用现有的数据......

我能对这些做些什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T10:41:14.480

你写了：

> 和一个模态打开的对话框

进而：

> 当对话框打开时，我的主窗口冻结

文档[说](http://doc.qt.nokia.com/4.7-snapshot/qdialog.html#exec)：

> `int QDialog::exec () [slot]`
> 
> 将对话框显示为模态对话框，在用户关闭它之前一直处于阻塞状态。该函数返回一个`DialogCode` 结果。如果对话框是应用程序模式，则用户在关闭对话框之前不能与同一应用程序中的任何其他窗口进行交互。
> 
> 如果对话框是窗口模式，则在对话框打开时仅阻止与父窗口的交互。默认情况下，对话框是应用程序模式。

关于[无模式对话框](http://doc.qt.nokia.com/4.7-snapshot/qdialog.html#modeless-dialogs)：

> 无模式对话框是独立于同一应用程序中的其他窗口运行的对话框。字处理器中的查找和替换对话框通常是无模式的，以允许用户与应用程序的主窗口和对话框进行交互。
> 
> 使用 显示无模式对话框`show()`，它立即将控制权返回给调用者。

一个例子：

```
import sys
from PyQt4 import QtCore, QtGui

class SearchDialog(QtGui.QDialog):

    def __init__(self, parent = None):
        QtGui.QDialog.__init__(self, parent)
        self.setWindowTitle('Search')
        self.searchEdit = QtGui.QLineEdit()
        layout = QtGui.QVBoxLayout()
        layout.addWidget(self.searchEdit)
        self.setLayout(layout)

class MainWindow(QtGui.QDialog):

    def __init__(self):
        QtGui.QDialog.__init__(self, None)
        self.resize(QtCore.QSize(320, 240))
        self.setWindowTitle('Main window')
        self.logText = QtGui.QPlainTextEdit()
        searchButton = QtGui.QPushButton('Search')
        layout = QtGui.QVBoxLayout()
        layout.addWidget(self.logText)
        layout.addWidget(searchButton)
        self.setLayout(layout)
        searchButton.clicked.connect(self.showSearchDialog)

    def showSearchDialog(self):
        searchDialog = SearchDialog(self)
        searchDialog.show()
        searchDialog.searchEdit.returnPressed.connect(self.onSearch)

    def onSearch(self):
        self.logText.appendPlainText(self.sender().text())

def main():
    app = QtGui.QApplication(sys.argv)
    mainWindow = MainWindow()
    mainWindow.show()
    app.exec_()

if __name__ == "__main__":
    main() 
```

单击“搜索”以打开搜索窗口（您可以打开其中的几个）。输入要搜索的文本，然后按 Enter。要搜索的文本将添加到主窗口的日志中。

# ios - 加载第一帧时显示视频（无黑屏）

> ID：11920407
> 
> 赞同：0
> 
> 时间：2012-08-12T07:14:55.030
> 
> 标签：ios, cocoa-touch, mpmovieplayercontroller

我需要找到一种`MPMoviePlayerController`在缓存视频的第一帧后显示视图的方法。

我的应用程序将视频的第一帧显示为 a `png`，然后我希望视频显示时屏幕不会变黑。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:38:43.500

通过将该图像`MPMoviePlayerController`添加为`MPMoviePlayerController.view`.

视频开始播放 `MPMoviePlayerPlaybackStateDidChangeNotification`后（使用 对此做出反应），隐藏/删除您的叠加层。

# c - 如何将两个寄存器中的 2 的补码值读入 int

> ID：11920411
> 
> 赞同：4
> 
> 时间：2012-08-12T07:16:06.840
> 
> 标签：c, cpu-registers, twos-complement

我正在尝试从 STC3100 电池监视器 IC 读取值，但我得到的值不正确。数据表中的内容：

```
The temperature value is coded in 2’s complement format, and the LSB value is 0.125° C.

REG_TEMPERATURE_LOW, address 10, temperature value, bits 0-7
REG_TEMPERATURE_HIGH, address 11, temperature value, bits 8-15 
```

这是数据表：http: [//www.st.com/internet/com/TECHNICAL_RESOURCES/TECHNICAL_LITERATURE/DATASHEET/CD00219947.pdf](http://www.st.com/internet/com/TECHNICAL_RESOURCES/TECHNICAL_LITERATURE/DATASHEET/CD00219947.pdf)

我的代码中有什么：

```
__u8 regaddr = 0x0a; /* Device register to access */
__s32 res_l, res_h;

int temp_value;
float temperature;

res_l = i2c_smbus_read_word_data(myfile, regaddr);
regaddr++;
res_h = i2c_smbus_read_word_data(myfile, regaddr);
if (res_l < 0) {
  /* ERROR HANDLING: i2c transaction failed */
} else {
  temp_value = (res_h << 8)+res_l;
  temperature = (float)temp_value * 0.125;
  printf("Temperature: %4.2f C\n", temperature);
} 
```

我究竟做错了什么？这不是我应该如何将 2 的补码值复制到 int 中吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T21:23:39.810

`i2c_smbus_read_word_data()`将从设备上您指定的寄存器开始读取 16 位，因此单个`i2c_smbus_read_word_data()`将使用单个 i2c 事务读取您感兴趣的两个寄存器。

`i2c_smbus_read_word_data()`返回从设备读取的 16 位作为无符号数 - 如果有错误，则返回 from`i2c_smbus_read_word_data()`将为负数。您应该能够像这样读取温度传感器：

```
__u8 regaddr = 0x0a; /* Device register to access */
__s32 res;

int temp_value;
float temperature;

res = i2c_smbus_read_word_data(myfile, regaddr);

if (res < 0) {
  /* ERROR HANDLING: i2c transaction failed */
} else {
  temp_value = (__s16) res;
  temperature = (float)temp_value * 0.125;
  printf("Temperature: %4.2f C\n", temperature);
} 
```

要解决评论中的问题：

`i2c_smbus_read_word_data()`如果没有错误，该函数将从 i2c 总线获得的 16 位数据作为无符号 16 位值返回。16 位无符号值可以很容易地用函数返回的 32 位 int 表示，因此根据定义，16 位数据不能为负数。`res`当且仅当出现错误时才会为负。

`(__s16)`将16 位值解释为（可能为负）二进制补码值由`res`. 这将获取其中的值`res`并将其转换为有符号的 16 位`int`表示形式。严格来说，它是实现定义的，关于这个演员将如何处理负数。我相信在 Linux 实现上，这将始终简单地将低 16 位`res`视为二进制补码数。

如果您担心强制转换的实现定义方面`(__s16)`，您可以通过使用算术而不是像 caf 的答案中的强制转换来避免它：

```
temp_value = (res > 0x7fff) ? res - (0xffff + 1) : res; 
```

即使您碰巧在一个补码机器上运行，它也会正确转换为负值（Linux 甚至支持在这样的机器上运行吗？）。

另请注意，上面发布的代码假设您在小端机器上运行 - 在将数据转换为负值之前，您需要在大端机器上适当地交换字节，以下应该可以解决问题目标 CPU 表示整数值（大/小、一或二）：

```
__u16 data = __le16_to_cpu( (__u16) res);

// convert negative two's complement values to native negative value:
int temp_value = (data > 0x7fff) ? data - (0xffff + 1) : data; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T07:49:04.123

从您的帖子中不清楚 i2c_smbus_read_word_data 的数据类型是什么，但如果可以返回负值，它就不能只是无符号字节。我会使用 res_l & 0xff 和 res_h & 0xff 作为偏执狂的练习，因为它们不应该包含任何感兴趣的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T10:19:29.970

在您的代码中，如果`int`碰巧是 32 位类型，则表达式 `temp_value = (res_h << 8) + res_l;`不会为负值生成正确的结果，因为连接是 16 位并且符号位没有扩展。

您可能应该避免任何隐式转换并准确指定您想要发生的事情。隐式转换规则以及有符号和无符号之间的转换是晦涩难懂的，可能会产生意想不到的结果。将表达式拆分为更小的部分也有助于调试，因为您将能够准确地看到哪种类型转换或按位运算不正确。

我还建议在算术和按位运算中保持一致，`(a << 8) | b`而`(a * 256) + b`不是`(a << 8) + b`像你一样。

```
 __u8 tlow = (__u8)(res_l & 0xff) ;
  __u8 thigh = (__u8)(res_h & 0xff) << 8 ;
  __s16 temp_value = (__s16)((thigh << 8) | tlow);

  temperature = (float)temp_value * 0.125f ;
  printf("Temperature: %4.2hf C\n", temperature); 
```

并不完全有必要对掩码和强制转换进行显式处理，或者像我使用其他变量那样将其分解，但它确实避免了必须知道混合类型表达式中发生的隐式转换的复杂细节，并且使它非常让读者和编译器清楚你打算发生什么。它还使调试变得更简单，因为您可以在调试器中查看这些中间值（您使用调试器对吧！？）。

如果您确实更喜欢简洁，那么您的原始代码可以简单地通过制作`temp_value`a`__s16`或通过将表达式转换为来纠正`__s16`，但由于这已经绊倒了您，我不推荐它，它也可能会绊倒后来必须维护的人或重用此代码。尽管如此，以下任何一项都将起作用：

```
__s16 temp_value = (res_h << 8) | res_l ; 
```

或者

```
int temp_value = (__s16)((res_h << 8) | res_l); 
```

最后一个至少有一个结果`int`，这既是您所要求的，而且在任何后续要执行的算术运算方面可能更安全。

如果你想表明你真的打算转换为`__s16`然后分配给一个`int`，那么让它明确：

```
int temp_value = (int)((__s16)((res_h << 8) | res_l)); 
```

因为一些倒霉的维护者以后可能会认为这是一个错误并试图“纠正”它！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T10:36:58.150

您需要正确处理高位。最简单的方法是：

```
s32 temp_value = (res_h << 8) | res_l;
if (temp_value > 32767)
    temp_value -= 65536; 
```

不要忘记检查`res_h`交易是否也失败了。

# function - 创建一个打开页面并运行链接中包含的函数的链接

> ID：11920418
> 
> 赞同：1
> 
> 时间：2012-08-12T07:18:18.193
> 
> 标签：function, module, hyperlink, action, opencart

我还在学习 PHP，所以我的问题可能看起来有点明显，但是......

我的问题与 opencart 有关，但在许多网站上可能是相当普遍的做法。我正在创建一个 opencart 模块，在该模块中我有几个按钮可以完成不同的任务。现在我已经为按钮分配了正确的“href”以及路径和适当的操作。例如

```
$this->data['dosomething'] = $this->url->link('module/modulename/dosomething', 'token=' . $this->session->data['token'], 'SSL'); 
```

注意：出于我的问题的目的，我已将模块和操作称为通用名称。

在控制器中，我有一个名为“index”的私有函数，然后是一个名为“dosomething”的私有函数，如下所示

```
public function index() {

* insert code *

}

public function dosomething() {

*insert code*

$this->redirect($this->url->link('module/modulename', 'token=' . $this->session->data['token'], 'SSL'));

} 
```

现在，我想知道如何让按钮指向模块控制器，然后运行“dosomething”功能。我可以在链接中放入一些信息，即 action=dosomething 并以这种方式进行操作，但大多数 opencart 只是使用最后一个 / 的文本作为操作。如果我使用上述href，我会得到一个错误，因为它试图找到位于'module/modulename/dosomething'中的控制器和模板，而不是使用函数'dosomething'位于'module/modulename'中的控制器和模板。

我希望这是有道理的。我看到 opencart 中的许多其他脚本成功地使用了这种方法，但我就是不知道怎么做？我确定我遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:21:45.703

你在做什么是正确的。如果指定为方法，OpenCart 的框架将使用路径的第三部分。如果你试试

```
public function dosomething() {
    die('OK');
} 
```

然后转到您获得的网址，它应该只显示一个空白的白色页面，`OK`上面写着。我的猜测是该错误实际上与控制器的问题无关，更多的是与您所做的其他事情有关。要么，要么方法和路由的第三部分不匹配，要么`dosomething`方法不是公共的

# ios - iOS - MKMapView - Buggy 注释

> ID：11920419
> 
> 赞同：0
> 
> 时间：2012-08-12T07:18:49.023
> 
> 标签：ios, annotations, mkmapview

我有一个按钮，如果按下我希望它获取用户位置并在其上放置注释。但似乎我按了一次，它在海洋中间添加了注释，然后我的用户位置出现（有效）。我第二次按下它，它会在我的位置上添加注释。

代码：

```
mapView.showsUserLocation = YES;

MKCoordinateRegion newRegion;

newRegion.center.latitude = mapView.userLocation.location.coordinate.latitude;
newRegion.center.longitude = mapView.userLocation.location.coordinate.longitude;

newRegion.span.latitudeDelta = 0.0004f;
newRegion.span.longitudeDelta = 0.0004f;

[mapView setRegion: newRegion animated: YES];

CLLocationCoordinate2D coordinate;
coordinate.latitude = mapView.userLocation.location.coordinate.latitude;
coordinate.longitude = mapView.userLocation.location.coordinate.longitude;

MKPointAnnotation *annotation = [[MKPointAnnotation alloc] init];

[annotation setCoordinate: coordinate];
[annotation setTitle: @"Your Car"];
[annotation setSubtitle: @"Come here for pepsi"];

[mapView addAnnotation: annotation];
[mapView setZoomEnabled: YES];
[mapView setScrollEnabled: YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T07:56:39.783

听起来您在 CLLocationManager 找到它之前要求用户位置。

通过设置`mapView.showsUserLocation = YES;`地图视图开始以`locationManager`异步方式定位用户，因此它可能不会立即获得正确的位置。

您需要设置自定义`CLLocationManager`并在按下按钮时开始其位置更新，然后在找到位置时在其委托中设置注释。

# php - mysql 查询在 zend 框架中不起作用

> ID：11920420
> 
> 赞同：-1
> 
> 时间：2012-08-12T07:19:14.920
> 
> 标签：php, mysql, zend-framework

```
class Application_Model_DbTable_Email extends Zend_Db_Table_Abstract
{

protected $_name = 'memberdetail';

    function getUserid($email)
    {   
        $subquery = $this->select()
        ->from('memberdetail', array('memberid'))
        ->where('email = ?', $email);

        $select = $this->select()
        ->from('usertable', array('userid'))
        ->join('memberdetail', 'usertable.userid = memberdetail.memberid')
        ->where('usertable.userid = ?', $subquery);

        $row = $select->query()->fetch();

        if (!$row) {
        echo "User id not found";
        } else {
        return $userid = $row['userid'];
        }

    }

} 
```

嗨，我正在尝试从上述查询中返回用户 ID。但是，查询似乎没有被执行，因为每当我调用这个函数时我总是会刷新。

PS这组查询是由另一位成员给我的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:27:28.747

看起来这已经被过度思考了。根据提供的信息***usertable.userid = memberdetail.memberid***在这种情况下，您的功能很简单。

```
/** this function assumes one and only one email will match a memberid
 *  this function can be improved by validating $email as existing in DB
 *  prior to querying DB, should be done at form level but could be accomplished here
 *  with Zend_Validate_Db_RecordExists()
 */
public function getUserIdFromEmail($email) {
$select = $this->select();
$select->where('email = ?',$email);

$row = $this->fetchRow($select);//fetch a single row
if (!is_null($row) {//fetchRow returns null if no row matched
    return $row->memeberid;//return memberid as string/integer = usertable.userid
    } else {
      //handle error
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T07:29:29.790

告诉人们您正在使用 Zend 框架会很有用。

您需要为 $this 建立与数据库的连接，如此链接中的步骤 1 和 2 所述：

[http://framework.zend.com/manual/en/zend.db.select.html/](http://framework.zend.com/manual/en/zend.db.select.html/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T08:08:41.567

你可以试试这个，如果它有帮助：

```
function getUserid($email){        

        $select = $this->select()
        ->setIntegrityCheck(false)
        ->from(array('m' => 'memberdetail'), array('b.userid'))
        ->join(array('b' => 'usertable'), 'b.userid = m.memberid')
        ->where('m.email = ?', $email);

        $row = $this->getAdapter()->fetchAll($select);

        if (!$row) {
        throw new Exception("User id not found");
        } else {
        return $row->toArray();
        }
} 
```

# javascript - 设置为 pointer-events: none 的 div 的子级是否有可能具有指针事件？

> ID：11920429
> 
> 赞同：96
> 
> 时间：2012-08-12T07:21:36.580
> 
> 标签：javascript, html, css

设置为 pointer-events: none 的 div 的子级是否有可能具有指针事件？

我需要包含另一个 div 的 div 以允许指针事件通过，但 div 本身仍然有事件。

这可能吗？

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-08-12T07:30:07.667

是的，这是可能的，你基本上只是描述了如何。为父母禁用它并为孩子启用它。

[**`pointer-events`**](https://caniuse.com/pointer-events)几乎所有浏览器都支持，包括**IE11**

请注意，这`pointer-events: all`仅适用于**SVG**。

对于 HTML，只有`auto`和`none`是受支持的值。

```
.parent {
  pointer-events: none;
}

.child {
  pointer-events: auto;
}
```

```
<div class="parent">
  <a href="#">Parent</a>
  <div class="child">
    <a href="#">Child</a>
  </div>
</div>
```

演示：http: [//jsfiddle.net/4gQkT/](http://jsfiddle.net/4gQkT/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2020-08-18T14:43:32.827

在子元素的样式上，添加

```
pointer-events: auto; 
```

`pointer-events: all`对我不起作用，显然只适用于 SVG 元素。

# smarty - 在 smarty 模板中获取数据库值

> ID：11920433
> 
> 赞同：0
> 
> 时间：2012-08-12T07:22:24.723
> 
> 标签：smarty

我有一个名为的 php 文件`testfun.php`

```
<?php
$conn=mysql_connect("localhost","root","") or die("unabke to connect");
$db=mysql_select_db("smartyform",$conn) or die("databse error");

require 'Smarty/libs/Smarty.class.php';

$smarty = new Smarty;

$sel=mysql_query("select * from form"); 
while($row=mysql_fetch_array($sel))
{
$id=$row[0];
$name=$row[1];
}
$smarty->assign('id',$id);
$smarty->assign('name',$name);

$smarty->display('testfunction.tpl');
    ?> 
```

我有一个名为的 tpl 文件`testfunction.tpl`

```
<body>

<ul>
{$id}
 :
 {$name}
</ul>

</body>
</html> 
```

当我运行时，`testfun.php`我得到了这个输出：

```
16 : dg 
```

但我想要像这样的输出：

```
1:d
d:g 
```

我应该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T11:25:55.673

您必须将数据作为数组传递给 smarty。所以在 PHP 中你应该这样做：

```
while($row=mysql_fetch_array($sel))
{
  $data[] = array(
    "id" => $row[0],
    "name" => $row[1]
  );
}

$smarty->assign("data", $data); 
```

然后，在您的 Smarty 模板中，您必须使用[foreach](http://www.smarty.net/docs/en/language.function.foreach.tpl)列出您的项目：

```
{foreach $data as $item}
  {$item.id}:{$item.name}
{/foreach} 
```

# c++ - 将可变参数模板 args 与 lambda 参数匹配

> ID：11920435
> 
> 赞同：1
> 
> 时间：2012-08-12T07:23:33.837
> 
> 标签：c++, c++11, lambda, variadic-templates

我想写一个你这样调用的函数：

```
f("a", 1,                 [](float a                  ) { … });
f("a", 1, "b", 2,         [](float a, float b         ) { … });
f("a", 1, "b", 2, "c", 3, [](float a, float b, float c) { … }); 
```

该函数的作用无关紧要。关键是每对 char*/integer 参数`f`对应于 lambda 函数的一个浮点参数。我到此为止：

```
template <typename ...Args>
void f(Args... args, std::function<void(???)> cb); 
```

如何声明函子类型，使其参数的基数与输入对的基数匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T08:49:16.367

当需要函数对象参数时，通常您应该只允许函数接受任何类型，并让编译器在类型实际不匹配时自动发出错误。

```
template <typename... Args, typename F>
void f(const F& func, Args&&... args) { ... } 
```

（请注意，我已将函数参数移到前面，因为可变参数部分将消耗所有参数。）

# fullcalendar - 如何在月视图中使日值可点击？

> ID：11920438
> 
> 赞同：0
> 
> 时间：2012-08-12T07:23:52.207
> 
> 标签：fullcalendar

有没有办法使月份视图中的月份值可点击？

我希望这样当用户点击一个月中的某一天时，fullCalendar 将切换到该特定日期的日视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:03:57.480

假设您的意思是当用户单击月视图中的天*数*时更改为日视图，请检查此小提琴：

[http://jsfiddle.net/100thGear/AP9Ns/](http://jsfiddle.net/100thGear/AP9Ns/)

让我知道这是否有帮助。

# objective-c - 在 Objective c 中管理内存

> ID：11920442
> 
> 赞同：0
> 
> 时间：2012-08-12T07:24:14.033
> 
> 标签：objective-c, ios, memory-management, memory-leaks, nsmutablearray

我在 xcode 4.2（旧版本）中做我的项目。对于我的应用程序，我只是在 dto 类中设置变量、数组，以便在整个应用程序生命周期中使用。所以我设置了这样的属性。

AppDTO（NSObject 的子类）

应用程序DTO.h

```
@property(nonatomic,retain)anotherAppDTO *aAppDTO;
@property(nonatomic,retain)NSMutableArray *array1;
@property(nonatomic,retain)NSMutableArray *array2;
@property(nonatomic,retain)NSString *string1,*string2,*string3; 
```

应用程序DTO.m

```
- (id)init
{
    self = [super init];
    if (self) {

    self.aAppDTO = [[anotherAppDTO alloc]init];
    self.array1 = [[NSMutableArray alloc]init];
    self.array2 = [[NSMutableArray alloc]init];

    self.string1 = @"Hello";
    self.string2= @"Hai";

    }
}

-(void)dealloc
{
    if(array1 != nil)
    {
        [array1 release];
        array1 = nil;
    }

    if(array2 != nil)
    {
        [array2 release];
        array2 = nil;
    }

    [aAppDTO release];
    aAppDTO = nil;

    [super dealloc];
} 
```

当我在 Xcode 4.3.2 中分析我的应用程序时，我在 self.array1 和 self.array2 中收到内存警告（在线分配的对象可能泄漏......），但是当我将 self.array1 更改为 array1 时，警告消失了。

使用self的原因是什么。如果我将@property(nonatomic,retain) 设置为变量（如array1、array2、string1、string2），是否需要使用 self。

同样在dealloc方法中，我听说我们不想使用[self.array1 release]，而是可以使用[array1 release]。这是对的吗？

我需要在 dealloc 方法中释放我的字符串吗？

我也在 dealloc 方法中发布 aAppDTO。如果我在 anotherAppDTO 类中分配一些对象，当我调用 [aAppDTO release] 方法时它会自动释放吗？

任何人都可以澄清我。

非常感谢， 阿尼什

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T07:30:56.333

您会收到警告，因为当您编写时：

```
self.array1 = [[NSMutableArray alloc]init]; 
```

是相同的 ：

```
[self setArray1: [[NSMutableArray alloc]init]]; 
```

正如您所注意到的，您没有分配底层`array1`私有变量，但是*您正在调用属性的设置器*，因为它被声明为**retain** *，它会在分配后保留对象*，这*意味着当您最终将第二次分配另一个对象时setter 第一个对象的保留计数将保持为一个，*直到应用程序关闭（因为您不再有对该对象的任何引用......）。

看看[这篇](http://www.tomdalling.com/blog/cocoa/an-in-depth-look-at-manual-memory-management-in-objective-c)很棒的文章，以更好地理解 Objective-C 中的手动引用计数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T07:34:43.460

> 当我在 Xcode 4.3.2 中分析我的应用程序时，我在 self.array1 和 self.array2 中收到内存警告（在线分配的对象可能泄漏......），但是当我将 self.array1 更改为 array1 时，警告消失了。

分析仪是对的。该参数`retain`在设置时被编辑。同样，您应该支持在初始化和`dealloc`. 所以，你应该只写`array1 = [[NSMutableArray alloc] init];`，然后就完成了。

> 使用self的原因是什么。如果我将@property(nonatomic,retain) 设置为变量（如array1、array2、string1、string2），是否需要使用 self。

那些通过访问器方法。如果不在初始化或`dealloc`中，您应该倾向于通过访问器方法，因为这是完全构造的对象的常见正确执行路径。

> 同样在 dealloc 方法中，我听说我们不想使用 [self.array1 release]，而是可以使用 [array1 release]。这是对的吗？

正确的。

> 我需要在 dealloc 方法中释放我的字符串吗？

是的。

> 我也在 dealloc 方法中发布 aAppDTO。如果我在 anotherAppDTO 类中分配一些对象，当我调用 [aAppDTO release] 方法时它会自动释放吗？

当它的引用计数达到 0 时，它`dealloc`会被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T09:05:49.070

我想其他人已经回答了你的问题。

我确实想提请您注意 Apple 出色的[高级内存管理编程指南：实用内存管理](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html)，他们在其中介绍了这些场景。在第一次阅读时很难全盘接受，但它确实涵盖了这些东西。在回答您关于使用实例变量与访问器方法的问题时，我提请您注意标记为“不要在初始化方法和 dealloc 中使用访问器方法”的部分。

# xml - ASP.NET xml linq 检查元素是否存在

> ID：11920445
> 
> 赞同：0
> 
> 时间：2012-08-12T07:24:22.560
> 
> 标签：xml, linq, conditional

xml结构示例：

```
<item>
   <title>Foo</title>
   <description>Boo</description>
   <image>Poo</image>
</item> 
```

我的代码是：

```
var rssFeeds =
              from feed in rssXML.Descendants("item")             
              select new
              {                  
                  Title = feed.Element("title").Value,                  
                  Description = feed.Element("description").Value,                                                                                                 
                  Image= feed.Element("image").Value, 
              }; 
```

问题是我如何检查上面代码中是否存在“title”元素......如果不存在，请使用其他元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T07:31:24.390

您可以将显式`XElement`到字符串转换（将空`XElement`引用转换为空字符串引用）与空合并运算符结合使用：

```
Title = (string) feed.Element("title") ?? (string) feed.Element("otherElement") 
```

# javascript - Javascript对象文字，如何使用'this'来引用对象中的变量

> ID：11920448
> 
> 赞同：0
> 
> 时间：2012-08-12T07:24:52.843
> 
> 标签：javascript, jquery, variables, object-literal

> **可能重复：**
> [对象内部的“this”](https://stackoverflow.com/questions/7043509/this-inside-object)

我正在尝试为我正在处理的 jQuery 插件的几个默认选项创建一个对象文字：

```
 var defaults = {

            r: 5,
            top: this.r,
            bottom: this.r,
            topleft: this.top,
            topright: this.top,
            bottomleft: this.bottom,
            bottomright: this.bottom

        }; 
```

当我引用`defaults.top`它时`undefined`

我能做些什么来完成这项工作？或者也许是不同的方法？我需要它是一个对象文字。

添加：

它是（`default`对象），如您所见，它的级联方式旨在成为一种短手技术。例如，如果您想将所有角定义为相同，则可以使用`{r: 5}`，但如果您希望顶部和底部`{top: 5, bottom: 1}`再次不同，`{topleft: 5, topright:2, bottomleft: 3, bottomright:19 }`我为没有说明清楚而单独道歉，但非常感谢您的回答。

回答：这就是我最终做的

```
if(o.topleft == undefined || o.topright == undefined || o.bottomleft == undefined || o.bottomright == undefined){
                if(o.top == undefined || o.bottom == undefined){
                    if(o.r == undefined){
                        o.topleft = 5;
                        o.topright = 5;
                        o.bottomleft = 5;
                        o.bottomright = 5;
                    }else{
                        o.topleft = o.r;
                        o.topright = o.r;
                        o.bottomleft = o.r;
                        o.bottomright = o.r;  
                    }
                }
                else{
                    o.topleft = o.top;
                    o.topright = o.top;
                    o.bottomleft = o.bottom;
                    o.bottomright = o.bottom;
                }
            } 
```

晚餐马虎，但嘿，它奏效了！谢谢你的帮助！我选择了答案，因为这种解释导致我这样做！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T07:35:09.063

> *“当我引用* `defaults.top` *它时* `undefined`*”*

那是因为`this`它不是指您正在创建的对象，而是`this`来自代码运行的任何范围。

对象字面量语法不允许您通过引用同一对象中的其他属性来设置值 - 该对象尚不存在。您*可以引用*在对象字面量*之前*声明的其他变量或函数。因此，如果您需要所有属性都与示例中的相同，那么您可以这样做：

```
var val = 5,
    defaults = {
            r: val,
            top: val,
            bottom: val,
            topleft: val,
            topright: val,
            bottomleft: val,
            bottomright: val
    }; 
```

或者使用对象文字创建一些属性，然后设置其余的：

```
var defaults = {
        r : 5
    };

defaults.top = defaults.bottom = defaults.r;
defaults.topleft = defaults.topright = defaults.top;
// etc 
```

显然后者更适合将某些属性设置为一个值，而将其他属性设置为另一个值。（尽管在您的示例中，所有属性都是相同的。）

无论哪种方式最终都会为您提供相同的对象（对象文字只是创建对象的快捷方式）。

> *“我希望它足够简单，可以做这样的事情* `$(selector).myPlugin({r:10});` *或* `$(selector).myPlugin({top:10, bottom: 5});` *”*

好吧，您仍然可以使用对象文字作为参数来*调用插件。*但是`defaults`可以使用其他技术定义对象（我假设它是在插件内部定义的）。

# c++ - 我的字符串不是从私有变量中复制的

> ID：11920449
> 
> 赞同：0
> 
> 时间：2012-08-12T07:25:23.753
> 
> 标签：c++, string, get, set

除了 get 和 set name 函数外，我的编码中的所有内容都有效。当我调用 getName 时，它​​打印为空白。我尝试了几种不同的解决方案，但唯一有效的方法是将 fullName 字符串保存在 main 中，然后从那里调用它。就好像它不允许我调用变量，因为它们是私有的。

这是我的 .cpp 文件。

```
#ifndef STUDENT_H
#define STUDENT_H
#include <iostream>
#include <string>

#include "Student.h"

using namespace std;

int main()
{
    //for student name
    string firstName;
    string lastName;
    string fullName;

//student name

cout << "Please enter your students first name" << endl;
cin >> firstName;
cout << "firstName = " << firstName << endl;

cout << "Please enter your students last name" << endl;
cin >> lastName;
cout << "lastName = " << lastName << endl;

aStudent.setName(firstName, lastName);
fullName = aStudent.getName();

cout << "Your students name is : ";
cout << fullName << endl;

}
#endif 
```

这是我的函数和类，.h 文件。

```
#include <iostream>
#include <string>
#include <conio.h>

using namespace std;
class Student
{

private:
string fName;
string lName; 

public:
string getName();
void setName(string firstName, string lastName);

};

string Student::getName()
{
return fName + " " + lName;
}
void Student::setName(std::string firstName, std::string lastName)
{
firstName = fName;
lastName = lName;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T07:29:32.050

```
void Student::setName(std::string firstName, std::string lastName)
{
    firstName = fName;
    lastName = lName;
} 
```

你肯定看到了那里的问题。提示，赋值将右边的东西复制到左边的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T07:30:04.667

```
void Student::setName(std::string firstName, std::string lastName)
{
    firstName = fName; // you're assigning the local firstName to your class instance's
    lastName = lName;  // variable; reverse this and try again
}

// ...
void Student::setName(std::string firstName, std::string lastName)
{
    fName = firstName;
    lName = lastName;
} 
```

# php - 使用 php 保护在线代码检查器的系统调用

> ID：11920450
> 
> 赞同：6
> 
> 时间：2012-08-12T07:25:46.140
> 
> 标签：php, security

虽然我确实知道系统调用和安全性不能齐头并进，但有一个项目我确实需要它。我正在编写一个小型代码检查器，我需要编译和执行用户提交的代码来测试我的测试用例。

基本上我想在沙箱中运行代码，这样它就不能触及临时目录之外的任何文件，并且它创建的任何文件都不能被外界访问。最近我遇到了一个漏洞利用，用户可以利用它创建一个文件，比如`shell.php`包含以下内容。

```
<?php
  echo system($_GET['x']);
?> 
```

这给了攻击者一个远程shell，并且由于文件的所有者是apache，攻击者基本上可以在我`/var/www`存储mysql密码和其他配置信息的地方移动。

虽然我知道 SQL 注入等威胁，并在涉及数据库的任何操作之前清理了用户输入，但我不知道如何设置沙箱。我可以使用哪些技术来禁用系统调用（现在我正在用户提交的代码中搜索“系统”这个词，而不是在找到它的地方执行那些片段）并限制对用户文件的访问提交的代码创建。

到目前为止，我的代码检查器仅适用于 C，并且我计划在保护它之后添加对 C++、Java、Ruby 和 Python 等其他语言的支持。此外，我想了解更多关于我遇到的这个问题的信息，因此我也可以在其中了解更多关于网络安全的信息。

我的开发机器正在运行 Mac OS Lion，而部署机器是一台 linux 服务器，所以如果一个解决方案是跨平台的，将不胜感激，但只处理 linux 机器的解决方案也可以。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T14:51:00.773

您可能想要做的是将 chroot 设置到文件系统上的某个随机临时目录，供运行脚本的用户使用。这是一些关于[设置 chroot 的](http://www.unixwiz.net/techtips/chroot-practices.html)阅读，以及一些[安全知识](http://www.bpfh.net/simes/computing/chroot-break.html)。

我建议您还为 Apache 安装一个安全模块，例如 suExec 或[MPM-iTK](http://mpm-itk.sesse.net/)。然后，在您的 Apache 的 VirtualHost 中（如果您没有运行虚拟主机，请这样做！），分配一个特定的 UserID 来处理对这个特定 VirtualHost 的请求。这将请求与 Apache 默认用户分开，并增加了一点安全性。

```
 AssignUserID nonprivilegeduser nonprivilegeduser 
```

然后，通过设置以下 PHP 选项来稍微强化 PHP，以便用户无法访问特定目录之外的文件，`tmp_dir`并`session_save_path`在此目录中移动您的和。这将阻止用户访问其基本目录之外的内容。

```
 php_admin_value open_basedir /var/www/
    php_admin_value upload_tmp_dir /var/www/tmp
    php_admin_value session.save_path /var/www/tmp 
```

随着 PHP 的行，防止访问特定的[函数](http://www.php.net/manual/en/ini.core.php#ini.disable-functions)和[类](http://www.php.net/manual/en/ini.core.php#ini.disable-classes)，并阅读[PHP 的安全](http://php.net/manual/en/ini.sect.safe-mode.php)说明。

另外，我会让您查看该用户，禁用对`sudo`and的访问`su`，以防止脚本尝试访问 root 权限。了解更多，[在这里](https://serverfault.com/questions/69216/disable-su-on-machine)。

总而言之，你说得很好，很清楚。如果用户愿意，没有办法完全阻止他们访问您的系统。诀窍是让它尽可能困难，并尽可能让他们感到困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T22:37:08.553

以下是我建议做的事情。

`php.ini`1.在with中禁用系统类和函数

```
disable_functions="system,curl_init,fopen..."
disable_classes="DirectoryIterator,SplFileObject..." 
```

2\. 在**只读**环境中运行，不存储重要数据。万一有人进入您的服务器，您不希望他们访问任何内容。一个很好的方法是购买一个[Amazon AWS EC2](http://aws.amazon.com/ec2/)并使用一个被监禁的用户来运行你的服务器和 PHP。

3\. 要求人们打破它。找到您不知道的缺陷和漏洞的唯一方法是找到它们。如有必要，请获取一个带有“测试”应用程序的临时服务器，该应用程序可以复制与您的“生产”环境相同类型的应用程序。

这里有一些有用的资源。

*   [要禁用的功能列表](https://security.stackexchange.com/a/1394)。它绝对可以扩展，但这是一个好的开始。
*   [关于避免安全问题的信息](https://security.stackexchange.com/a/13055)。
*   [Viper-7 键盘中的源代码和自述文件](https://github.com/Viper-7/Deployable-PHP-Codepad)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T17:28:33.207

没有办法在跨平台的基础上进行这项工作。沙盒本质上是高度系统特定的。

在 Mac OS X 上，有沙盒工具。它的文档很少，但非常有效（谷歌浏览器严重依赖它）。[一些有进取心的人已经记录了其中的一部分。](http://reverse.put.as/wp-content/uploads/2011/09/Apple-Sandbox-Guide-v1.0.pdf)但是，它仅在 Mac OS X 上可用，因此可能会排除它。

在 Linux 上，您的选项开发得相当少。一些内核支持[seccomp](http://en.wikipedia.org/wiki/Seccomp)机制，以防止进程使用除少量“安全”系统调用之外的任何系统调用；但是，并非所有人都这样做。此外，该“安全”子集不包括您可能需要的一些调用，这些调用可能在尚未专门编写以在 seccomp 下运行的代码中 - 例如，`mmap`并且`sbrk`是不允许的，因此您无法分配内存。[不过，像seccomp-nurse](http://chdir.org/~nico/seccomp-nurse/)这样的辅助工具可能会让您有所收获。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T00:41:14.547

我认为您正在寻找的是强制访问控制。在 Linux 中，它可以通过 SeLinux 获得。使用它可以限制谁可以执行什么命令。在您的情况下，您可以限制 php 用户（Apache）仅执行有限的命令，如 gcc 等。还可以查看[AppArmor](http://en.wikipedia.org/wiki/AppArmor)

另外，查看[runkit](http://php.net/manual/en/runkit.sandbox.php) php虚拟环境

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-23T08:02:11.153

您可以尝试在非常轻量级的 VM 容器（docker）中运行用户提交的代码。他们在不到一秒钟的时间内开始。

# apache - 黑莓阅读 mod_deflate 压缩页面

> ID：11920453
> 
> 赞同：3
> 
> 时间：2012-08-12T07:26:54.087
> 
> 标签：apache, blackberry, mod-deflate

我正在使用 Apache mod_deflate 从网页返回压缩的 html。它将生成的页面大小从 3k 减少到 700 字节。

如何在 Blackberry 中使用 HttpConnection 来获取压缩页面（即只有 700 字节而不是 3k）？

PS 尝试使用 GZIPInputStream(inputStream) 不断返回不正确的标头检查错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:49:18.333

据我了解，您已经尝试下载并获得了未压缩的 html 页面。

如果是这样，我认为您应该在请求中添加“Accept-Encoding”标头（[论坛上](http://supportforums.blackberry.com/t5/Java-Development/GZIP-Compression-Incorrect-header-check-with-MDS-Connection/td-p/1061867)的问题）。尝试：

```
connection.setRequestProperty("Accept-Encoding", "gzip, deflate"); 
```

不要忘记您将获得压缩数据，因此您需要在使用前解压缩。

[此外，正如这里](http://docs.blackberry.com/en/developers/deliverables/4305/BlackBerry_Browser-4.6.0-US.pdf)提到的，当您的流量通过 BIS-B、BES 时，gzip/deflate 效率不高。因为 BB 服务器将对数据进行编码/解码以对其进行分析并使其传输效率更高。

# entity-framework-4.1 - 实体框架——继承

> ID：11920457
> 
> 赞同：1
> 
> 时间：2012-08-12T07:27:05.627
> 
> 标签：entity-framework-4.1

我有类似于以下的实体框架模型：

```
Category
Content
NewsCategory (Inherits Category)
News ( Inherits Content) 
```

我将 TPH 继承用于 newscategory 和 news 。我的数据库中有一个 TYPE 字段。如果 type=1 表示新闻（在内容表中），如果 type=1 表示（在 NewsCategory 表中）。

类别和内容有多对多的关系！

但是当我想添加新闻时，如何防止添加其他类型的新闻？

当我添加一个需要 categoryId 的新闻时，我可以使用 1,2 或其他 ID！

#

如果事实上我想在新闻和新闻类别以及类别和内容之间创建多对多的关系。我希望新闻对内容及其关系一无所知

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T07:46:06.200

数据库不理解 TPH 继承的含义 - 它在类别和内容表之间具有多对多关联，并且确实允许在任何类别和内容之间创建关系。您无法在数据库级别的 TPH 中避免它，但在实体级别，您应该仅在派生类型中具有导航属性，因此在应用程序级别处理它应该是直截了当的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T07:57:45.803

我倾向于定义枚举来伴随我定义的继承类。

```
public enum CategoryType
{
    News = 1,
    Photography,
    PopularMusic
}

public enum ContentType
{
    Article = 1,
    Image,
    Video 
} 
```

您的两个表可能有一个 TypeId，因此当您的代码编写新闻项目时。

```
Category.TypeId = (int)CategoryType.News; 
```

和

```
Content.TypeId = (int)ContentType.Article; 
```

你不能避免这样做是代码，但它应该更清晰，更不容易出错，只是在 typeId 字段中抛出一个 INT 值。

在您的情况下，我不确定您的关系，例如 Type 字段在哪里（我假设 Category 中有一个，Content 中也有一个）。`type=1 means ( in NewCategory table)`当你写你的问题时，你似乎错过了一些东西。

我不确定为什么在添加新闻时需要添加 categoryId，因为新闻继承自 Content 而不是 Category，您的意思是 TypeId 吗？

# c++ - 模板的通用包装器：优化机会

> ID：11920458
> 
> 赞同：3
> 
> 时间：2012-08-12T07:27:29.800
> 
> 标签：c++, templates, generics, optimization, c++-cli

我正在尝试将模板与泛型结合起来，重点是尽可能快地（合理地）访问原始/值类型的属性，最好将其保留在 C++/CLR 中。考虑这个简单的模板：

```
template< typename type >
class value_wrapper {
public:
    type value;
}; 
```

及其对应物：

```
generic< typename T >
public ref class ValueWrapper {
    ...
public:
    property T Value {
        T get() {
            if( T::typeid == System::Int32::typeid )
                return ( T )( ( value_wrapper< int > * )ptr )->value;
            ...branches for some other types...
            // if all else fails:
            return ( T )( Object ^ )( ( value_wrapper< gcroot< Object ^ > > * )ptr )->value;
        }
        ...
    }
    ...
private:
    void *ptr;
}; 
```

**问题 1.**当泛型的 MSIL 变成值类型的特化时，代码是否进一步优化？是否有可能在这里检查类型，例如，在`ValueWrapper<int>`非 int 类型的分支和类型比较本身将被优化掉？

现在，在每个方法中列出所有支持的类型有点痛苦，所以我为此创建了一个单独的函数：

```
template< typename action, typename context_type >
__forceinline
static bool apply( System::Type ^type, void *value, System::Object ^*box, context_type context ) {
    if( type == System::Int32::typeid )
        return action().operator()< int >( ( int * )value, context ), true;
    ...branches for some other types...
    // if all else fails:
    return action().operator()< gcroot< System::Object ^ > >( box, context ), false;
}

struct get_value {
    template< typename type, typename result_type >
    void operator () ( result_type *result, void *ptr ) {
        *result = ( ( value_wrapper< type > * )ptr )->value;
    }
};

generic< typename T >
public ref class ValueWrapper {
    ...
    property T Value {
        T get() {
            T result;
            System::Object ^box;
            return apply< get_value >( T::typeid, &result, &box, ptr ) ? result : ( T )box;
        }
        ...
    }
    ...
}; 
```

事实证明，这比原始代码慢了大约 3 倍。

**问题 2.**这里可以改变什么来让优化器使第二个实现的速度更接近第一个（理想情况下，速度差异在 10%-20% 之内）？

PS 这主要是关于 VC 2010。但是如果 VC 2012 在这方面有所不同，那也很高兴知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:56:23.277

经过一番修修补补和 MSIL 观察后，我对第二个问题有了答案：只需传递一个`typeid`getter 函数而不是`typeid`它本身。框架在每次比较时请求类型信息似乎比将其存储到某个变量（旧`type`参数）中并重用它要容易得多。

使用这种方法，减速从 3 倍下降到 5-10%（！）。

问题 2 结束，问题 1 待定。

结果代码：

```
template< typename action, typename context_type >
__forceinline
static bool apply( System::Type ^type(), void *value, System::Object ^*box, context_type context ) {
    if( type() == System::Int32::typeid )
        return action().operator()< int >( ( int * )value, context ), true;
    if( type() == SupportedStruct::typeid )
        return action().operator()< SupportedStruct >( ( SupportedStruct * )value, context ), true;
    if( type() == System::String::typeid )
        return action().operator()< std::wstring >( ( System::String ^* )value, context ), true;
    // for both reference types and unknown value types:
    return action().operator()< gcroot< System::Object ^ > >( box, context ), false;
}

struct get_value {
    template< typename type, typename result_type >
    void operator () ( result_type *result, void *ptr ) {
        *result = ( ( value_wrapper< type > * )ptr )->value;
    }
    template< typename type >
    void operator () ( System::String ^*result, void *ptr ) {
        *result = gcnew System::String( ( ( value_wrapper< type > * )ptr )->value.c_str() );
    }
};

generic< typename T >
public ref class ValueWrapper {
    ...
public:
    property T Value {
        T get() {
            T result;
            System::Object ^box;
            return apply< get_value >( TypeGetter, &result, &box, ptr ) ? result : ( T )box;
        }
        ...
    }
    ...
private:
    void *ptr;
private:
    static System::Type ^TypeGetter() {
        return T::typeid;
    }
}; 
```

# java - JPanel 不显示

> ID：11920461
> 
> 赞同：3
> 
> 时间：2012-08-12T07:28:18.987
> 
> 标签：java, swing, jpanel

**JPanel 没有出现，我放了 .setVisible 但是..它也没有出现，它构建但没有出现我只是这部分编程的初学者。**

```
 package calculatorv3;

    public class CalculatorForm extends javax.swing.JPanel {
        private static final long serialVersionUID = 1L;

       public CalculatorForm() {
            initComponents();
       }

        /**
         * This method is called from within the constructor to initialize the form.
         * WARNING: Do NOT modify this code. The content of this method is always
         * regenerated by the Form Editor.
         */
        @SuppressWarnings("unchecked")

        private void initComponents() {

            jTextField2 = new javax.swing.JTextField();
            jTextField3 = new javax.swing.JTextField();
            jTextField4 = new javax.swing.JTextField();
            jButton2 = new javax.swing.JButton();
            jButton3 = new javax.swing.JButton();
            jButton4 = new javax.swing.JButton();
            jButton5 = new javax.swing.JButton();
            jButton6 = new javax.swing.JButton();
            jButton7 = new javax.swing.JButton();
            jButton8 = new javax.swing.JButton();
            jButton9 = new javax.swing.JButton();
            jButton10 = new javax.swing.JButton();
            jButton11 = new javax.swing.JButton();
            jButton12 = new javax.swing.JButton();
            jButton13 = new javax.swing.JButton();
            jButton14 = new javax.swing.JButton();
            jButton15 = new javax.swing.JButton();
            jButton1 = new javax.swing.JButton();
            jButton16 = new javax.swing.JButton();
            jButton17 = new javax.swing.JButton();

            jButton2.setText("2");
            jButton2.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    jButton2ActionPerformed(evt);
                }
            });

            jButton3.setText("1");
            jButton3.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    jButton3ActionPerformed(evt);
                }
            });

            jButton4.setText("3");
            jButton4.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    jButton4ActionPerformed(evt);
                }
            });

            jButton5.setText("4");
            jButton5.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    jButton5ActionPerformed(evt);
                }
            });

            jButton6.setText("5");
            jButton6.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    jButton6ActionPerformed(evt);
                }
            });

            jButton7.setText("6");
            jButton7.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    jButton7ActionPerformed(evt);
                }
            });

            jButton8.setText("7");
            jButton8.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    jButton8ActionPerformed(evt);
                }
            });

            jButton9.setText("8");
            jButton9.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    jButton9ActionPerformed(evt);
                }
            });

            jButton10.setText("9");

            jButton11.setText("0");

            jButton12.setText("Add");

            jButton13.setText("Sub");

            jButton14.setText("Mul");

            jButton15.setText("Div");

            jButton1.setText("Enter");

            jButton16.setText("Reset");

            jButton17.setText("Equals");

            javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
            this.setLayout(layout);
            layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addContainerGap()
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(jTextField2)
                        .addComponent(jTextField3)
                        .addComponent(jTextField4)
                        .addGroup(layout.createSequentialGroup()
                            .addComponent(jButton3)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                            .addComponent(jButton2)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                            .addComponent(jButton4)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(jButton5)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(jButton6)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                            .addComponent(jButton12)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                            .addComponent(jButton14))
                        .addGroup(layout.createSequentialGroup()
                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                .addGroup(layout.createSequentialGroup()
                                    .addComponent(jButton1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                    .addComponent(jButton16, javax.swing.GroupLayout.PREFERRED_SIZE, 113, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGroup(layout.createSequentialGroup()
                                    .addComponent(jButton7)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                    .addComponent(jButton8)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                    .addComponent(jButton9)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                    .addComponent(jButton10)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                    .addComponent(jButton11)))
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addGroup(layout.createSequentialGroup()
                                    .addComponent(jButton13)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                    .addComponent(jButton15)
                                    .addGap(0, 0, Short.MAX_VALUE))
                                .addComponent(jButton17, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
                    .addContainerGap())
            );
            layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addContainerGap()
                    .addComponent(jTextField2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(jTextField3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(jTextField4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(7, 7, 7)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(jButton3)
                        .addComponent(jButton2)
                        .addComponent(jButton4)
                        .addComponent(jButton5)
                        .addComponent(jButton6)
                        .addComponent(jButton12)
                        .addComponent(jButton14))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(jButton7)
                        .addComponent(jButton8)
                        .addComponent(jButton9)
                        .addComponent(jButton10)
                        .addComponent(jButton11)
                        .addComponent(jButton13)
                        .addComponent(jButton15))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(jButton1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jButton17, javax.swing.GroupLayout.DEFAULT_SIZE, 40, Short.MAX_VALUE)
                        .addComponent(jButton16))
                    .addContainerGap())
            );
        }// </editor-fold>

        private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
            // TODO add your handling code here:
        }

        private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {
            // TODO add your handling code here:
        }

        private void jButton4ActionPerformed(java.awt.event.ActionEvent evt) {
            // TODO add your handling code here:
        }

        private void jButton5ActionPerformed(java.awt.event.ActionEvent evt) {
            // TODO add your handling code here:
        }

        private void jButton6ActionPerformed(java.awt.event.ActionEvent evt) {
            // TODO add your handling code here:
        }

        private void jButton7ActionPerformed(java.awt.event.ActionEvent evt) {
            // TODO add your handling code here:
        }

        private void jButton8ActionPerformed(java.awt.event.ActionEvent evt) {
            // TODO add your handling code here:
        }

        private void jButton9ActionPerformed(java.awt.event.ActionEvent evt) {
            // TODO add your handling code here:
        }

        // Variables declaration - do not modify
        private javax.swing.JButton jButton1;
        private javax.swing.JButton jButton10;
        private javax.swing.JButton jButton11;
        private javax.swing.JButton jButton12;
        private javax.swing.JButton jButton13;
        private javax.swing.JButton jButton14;
        private javax.swing.JButton jButton15;
        private javax.swing.JButton jButton16;
        private javax.swing.JButton jButton17;
        private javax.swing.JButton jButton2;
        private javax.swing.JButton jButton3;
        private javax.swing.JButton jButton4;
        private javax.swing.JButton jButton5;
        private javax.swing.JButton jButton6;
        private javax.swing.JButton jButton7;
        private javax.swing.JButton jButton8;
        private javax.swing.JButton jButton9;
        private javax.swing.JTextField jTextField2;
        private javax.swing.JTextField jTextField3;
        private javax.swing.JTextField jTextField4;
        // End of variables declaration

        public static void main(String args[]) {
            java.awt.EventQueue.invokeLater(new Runnable() {
                @Override
                public void run() {
                    new CalculatorForm().setVisible(true);
                }
            });
        }

        } 
```

**我找不到我的代码有什么问题，不要打扰拼写错误“按钮的编号”我只关心如何显示面板**

好的，我编辑了代码，我将它与公共静态 void main.. 合并了一次 init

导入 javax.swing.JButton；导入 javax.swing.JTextField；

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author Jfetizanan
 */
public class NewMain {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {

        JTextField jTextField2 = new javax.swing.JTextField();
        JTextField jTextField3 = new javax.swing.JTextField();
        JTextField jTextField4 = new javax.swing.JTextField();
        JButton jButton2 = new javax.swing.JButton();
        JButton jButton3 = new javax.swing.JButton();
        JButton jButton4 = new javax.swing.JButton();
        JButton jButton5 = new javax.swing.JButton();
        JButton jButton6 = new javax.swing.JButton();
        JButton jButton7 = new javax.swing.JButton();
        JButton jButton8 = new javax.swing.JButton();
        JButton jButton9 = new javax.swing.JButton();
        JButton jButton10 = new javax.swing.JButton();
        JButton jButton11 = new javax.swing.JButton();
        JButton jButton12 = new javax.swing.JButton();
        JButton jButton13 = new javax.swing.JButton();
        JButton jButton14 = new javax.swing.JButton();
        JButton jButton15 = new javax.swing.JButton();
        JButton jButton1 = new javax.swing.JButton();
        JButton jButton16 = new javax.swing.JButton();
        JButton jButton17 = new javax.swing.JButton();

        jButton2.setText("2");
        jButton2.addActionListener(new java.awt.event.ActionListener() {
            @Override
            public void actionPerformed(java.awt.event.ActionEvent evt) {

            }
        });

        jButton3.setText("1");
        jButton3.addActionListener(new java.awt.event.ActionListener() {
            @Override
            public void actionPerformed(java.awt.event.ActionEvent evt) {

            }
        });

        jButton4.setText("3");
        jButton4.addActionListener(new java.awt.event.ActionListener() {
            @Override
            public void actionPerformed(java.awt.event.ActionEvent evt) {

            }
        });

        jButton5.setText("4");
        jButton5.addActionListener(new java.awt.event.ActionListener() {
            @Override
            public void actionPerformed(java.awt.event.ActionEvent evt) {

            }
        });

        jButton6.setText("5");
        jButton6.addActionListener(new java.awt.event.ActionListener() {
            @Override
            public void actionPerformed(java.awt.event.ActionEvent evt) {

            }
        });

        jButton7.setText("6");
        jButton7.addActionListener(new java.awt.event.ActionListener() {
            @Override
            public void actionPerformed(java.awt.event.ActionEvent evt) {

            }
        });

        jButton8.setText("7");
        jButton8.addActionListener(new java.awt.event.ActionListener() {
            @Override
            public void actionPerformed(java.awt.event.ActionEvent evt) {

            }
        });

        jButton9.setText("8");
        jButton9.addActionListener(new java.awt.event.ActionListener() {
            @Override
            public void actionPerformed(java.awt.event.ActionEvent evt) {

            }
        });

        jButton10.setText("9");

        jButton11.setText("0");

        jButton12.setText("Add");

        jButton13.setText("Sub");

        jButton14.setText("Mul");

        jButton15.setText("Div");

        jButton1.setText("Enter");

        jButton16.setText("Reset");

        jButton17.setText("Equals");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jTextField2)
                    .addComponent(jTextField3)
                    .addComponent(jTextField4)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jButton3)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jButton2)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jButton4)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jButton5)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jButton6)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jButton12)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jButton14))
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(jButton1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(jButton16, javax.swing.GroupLayout.PREFERRED_SIZE, 113, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(jButton7)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(jButton8)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(jButton9)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jButton10)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jButton11)))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(jButton13)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(jButton15)
                                .addGap(0, 0, Short.MAX_VALUE))
                            .addComponent(jButton17, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jTextField2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jTextField3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jTextField4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(7, 7, 7)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButton3)
                    .addComponent(jButton2)
                    .addComponent(jButton4)
                    .addComponent(jButton5)
                    .addComponent(jButton6)
                    .addComponent(jButton12)
                    .addComponent(jButton14))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButton7)
                    .addComponent(jButton8)
                    .addComponent(jButton9)
                    .addComponent(jButton10)
                    .addComponent(jButton11)
                    .addComponent(jButton13)
                    .addComponent(jButton15))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButton1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jButton17, javax.swing.GroupLayout.DEFAULT_SIZE, 40, Short.MAX_VALUE)
                    .addComponent(jButton16))
                .addContainerGap())
        );

    }
} 
```

**但是这个怎么样，它显示错误**

```
javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout); 
```

**如何将所有对象添加到框架**

**好的，我终于完成了代码..这是谢谢**

![程序本身...](../Images/722c1e10cef623520805543b778f9ee0.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T07:32:05.457

这是不正确的

```
public class CalculatorForm extends javax.swing.JPanel 
```

它应该是

```
public class CalculatorForm extends javax.swing.JFrame 
```

这是一个正确的方法 [如何制作框架](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)

**更新：** 做你正在做的，但在`initComponents()`

```
JPanel panel = new JPanel();
javax.swing.GroupLayout layout = new javax.swing.GroupLayout(panel);
panel.setLayout(layout);
add(panel); 
```

**更新：**这是正确的做法

```
public class CalculatorForm {

    private static final long serialVersionUID = 1L;

    public CalculatorForm() {
        initComponents();
    }

    private void initComponents() {
        JFrame frame = new JFrame();
        // frame settings like size, close operation etc.
        JPanel panel = new JPanel();
        // init textfields and buttons
        // add listeners or whatever
        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(panel);
        panel.setLayout(layout);
        // layout settings goes here
        frame.add(panel);
        frame.setVisible(true);
    }
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new CalculatorForm();
            }
        });
    }
} 
```

# jquery - 如何使用 jquery 选择第二个表

> ID：11920469
> 
> 赞同：2
> 
> 时间：2012-08-12T07:29:53.740
> 
> 标签：jquery, selector

您好，我想在 html 文档中选择例如第二个表。我试图这样做，`table:nth-child(2) or table:eq(1)`但没有用。我会很感激你的回答:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T07:39:23.240

你应该使用 eq 过滤器

```
$('table:eq(1)') 
```

[文档http://api.jquery.com/eq-selector/](http://api.jquery.com/eq-selector/)中有关此主题的更多信息。始终记住 $(document).ready(... 在定义开头的调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T07:46:41.817

这也应该可以选择所有表，然后使用 [] 找到正确的表以访问 js 对象，然后将 js 对象转换回 jQ 对象。

```
$($("table")[1]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T07:43:33.040

我认为`table.eq(1)`应该`$('table').eq(1)`。**[见这里](http://jsfiddle.net/GzRtd/2/)**。

但是，如果你`table`是一个变量，那么它应该是一个 jQuery 对象。例如：

```
var table = $('table'); // will returned all existing tables of document (jQuery object)
table.eq(1); 
```

会工作得很好。**[见这里](http://jsfiddle.net/GzRtd/3/)**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T07:32:52.343

我还建议：

```
$('table:nth-child(2)') 
```

但是，如果这不起作用，也许：

```
$('table').first().next('table') 
```

# node.js - 安装 mobify-client 时出错

> ID：11920471
> 
> 赞同：0
> 
> 时间：2012-08-12T07:30:05.257
> 
> 标签：node.js, npm, javascript-framework, mobify

尝试安装 mobify 客户端时出现此错误。我的 node.js 版本是：0.8.6 和 npm：1.1.48。另外我在代理后面，在第一行我只是设置了代理，但我不知道这与设置 http_proxy 变量一样吗？

```
C:\Users\user>npm config set proxy http://user:pass@proxy:port

C:\Users\user>npm -g install mobify-client
npm http GET https://registry.npmjs.org/mobify-client
npm http GET https://registry.npmjs.org/mobify-client
npm http GET https://registry.npmjs.org/mobify-client
npm http GET https://registry.npmjs.org/-/mobify-client-0.3.8.tgz
npm ERR! fetch failed https://registry.npmjs.org/-/mobify-client-0.3.8.tgz
npm http GET https://registry.npmjs.org/-/mobify-client-0.3.8.tgz
npm ERR! fetch failed https://registry.npmjs.org/-/mobify-client-0.3.8.tgz
npm http GET https://registry.npmjs.org/-/mobify-client-0.3.8.tgz
npm ERR! fetch failed https://registry.npmjs.org/-/mobify-client-0.3.8.tgz
npm ERR! Error: SSL Error: Hostname/IP doesn't match certificate's altnames
npm ERR!     at ClientRequest.<anonymous> (C:\Program Files (x86)\nodejs\node_mo
dules\npm\node_modules\request\main.js:440:26)
npm ERR!     at ClientRequest.g (events.js:185:14)
npm ERR!     at ClientRequest.EventEmitter.emit (events.js:88:17)
npm ERR!     at HTTPParser.parserOnIncomingClient (http.js:1455:7)
npm ERR!     at HTTPParser.parserOnHeadersComplete [as onHeadersComplete] (http.js:111:23)
npm ERR!     at CleartextStream.socketOnData (http.js:1366:20)
npm ERR!     at CleartextStream.CryptoStream._push (tls.js:485:27)
npm ERR!     at SecurePair.cycle (tls.js:839:20)
npm ERR!     at EncryptedStream.CryptoStream.write (tls.js:220:13)
npm ERR!     at Socket.ondata (stream.js:38:26)
npm ERR!     If you need help, you may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>

npm ERR! System Windows_NT 6.1.7601
npm ERR! command "C:\\Program Files (x86)\\nodejs\\\\node.exe" "C:\\Program Files (x86)\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "-g" "install" "mobify-client"
npm ERR! cwd C:\Users\user
npm ERR! node -v v0.8.6
npm ERR! npm -v 1.1.48
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     C:\Users\user\npm-debug.log
npm ERR! not ok code 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:11:02.863

似乎这里可能存在两个潜在问题。一是npm服务器当时可能有一些问题，你可能想现在再试一次，看看你是否得到同样的错误。在我们的支持论坛中提出了同样的问题（您甚至可能已经问过:)），另一位用户说稍后再试解决了这个问题：

[https://support.mobify.com/customer/portal/questions/445465-installation-error](https://support.mobify.com/customer/portal/questions/445465-installation-error)

另一个问题是您可能在代理后面并且无法连接到 npm 服务器。您可以使用以下命令设置代理位置：

```
npm config set proxy http://url:port 
```

或者，如果代理经过身份验证：

```
npm config set proxy http://user:pass@url:port 
```

# google-chrome-extension - Chrome扩展程序背景页面html不起作用

> ID：11920473
> 
> 赞同：9
> 
> 时间：2012-08-12T07:30:22.210
> 
> 标签：google-chrome-extension

我正在尝试了解 chrome 背景页面。在对示例进行蚕食后，我设法让 background.js 脚本运行，并且每次用户访问页面时它都会弹出一个警告框。但是，当我采用相同的脚本并将其移动到 background.html 文件时，我似乎无法执行该文件。

我已将清单文件更新为页面（而不是脚本），并且扩展加载正常。我也尝试过在脚本标签中直接在正文中或在函数中使用javascript，因为现在在正文或头部中调用onload。

也许我不明白在 Chrome 扩展中使用 background.html 页面的概念？

清单文件：

```
{
  "name": "Testing Extension",
  "version": "0.2",
  "background": { "pages": ["background.html"] },
  "permissions": [
    "tabs", "https://mail.google.com/*", "http://*/*, https://*/*"
  ],
  "browser_action": {
    "name": "Do some action",
    "icons": ["icon.png"]
  },
  "manifest_version": 2,
  "web_accessible_resources": ["injectImage.js", "background.html"]
} 
```

注入图像.js

```
alert('Got Here');
'use strict';   
chrome.browserAction.onClicked.addListener(function (tab) {
    chrome.tabs.executeScript(null, {file: "injectImage.js"});
});

    chrome.browserAction.setBadgeBackgroundColor({color: [0, 200, 0, 100]});

    var i = 0;
    window.setInterval(function () {
        chrome.browserAction.setBadgeText({text: String(i)});
        i++;
    }, 10); 
```

背景.html

```
<!DOCTYPE html>
<html>
    <head>
        <script src="jquery-1.8.0.min.js"></script>
        <script src="injectImage.js"></script>
    </head>
    <body>
</body>
</html> 
```

目前，除了在右上角放一个图标外，此代码似乎没有做任何事情。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-10-21T05:50:57.157

你的**背景只有一个页面，就像一个本地服务器**`content_scripts`，可以在和`default_popup`/或其他扩展页面之间发送和接收数据。

对于刚开始的任何人，请查看每个示例的清单版本，该版本在 manifest.json 中定义。版本 2 具有更严格的安全策略，并且内联 javascript 无效，因此复制示例 v1 代码并将其粘贴到 background.html 将不再起作用。所有脚本都需要位于一个外部文件中，该文件可以使用如下`src`属性包含在 HTML 文件中`<script src="main.js"></script>`

我的理解是，你有四个常用的基本扩展组件：

1.  正在查看的选项卡的 DOM，**只能由以下人员访问`content_scripts`**

2.  **content_scripts**是 manifest.json 中标识的 JavaScript 文件数组，这些文件按顺序直接注入到选项卡的 DOM 中。显然，选项卡中的 JS 变量和函数与您的 content_scripts 无法交互。

3.  **Chrome 要么通过连接一组脚本生成的**一个背景 HTML 页面，****要么**被定义为一个页面，通常命名为 background.html。**

***   `{"browser_action" : {"default_popup" : "popup.html"}}`是 manifest.json 中定义的可选用户界面，当有人单击您的扩展图标时显示。弹出窗口无法访问选项卡的 DOM，因此如果选项卡的内容很重要，则必须使用 Chrome 消息来请求它，例如`chrome.extension.sendMessage`** 

 **您的背景被定义为一个或多个`scripts`：

```
 "background": {
    "scripts": ["background.js"]
  }, 
```

或作为`page`：

```
 "background": {
    "page": "background.html"
  }, 
```

如果您想了解后台发生了什么，那么您可以使用 console.log 但为了检查输出，您必须从 Extensions 页面启动检查器。您甚至可以看到背景文件始终命名为“_generated_background_page.html”。

![在此处输入图像描述](../Images/92ddd59bc1e95ab38f7d8890bd5625ca.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T21:38:35.757

You have a typo in your manifest file. Including a background page should look like this:

```
"background": {"page": "background.html"} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-16T05:47:46.030

或者您可以直接定义 js 而不是定义后台页面并在其中引用脚本文件（根据内容安全策略 (CSP)，不允许使用内联脚本）

```
 "background": {
    "scripts": ["background.js"]
  }, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-01T03:26:42.723

One more gotcha not mentioned here. Doing `<script src="myscript"/>` doesn't work :P, you have to type it out completely with `<script src="myscript"></script>`. Took me a bit to figure that out.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-11T11:55:36.963

## 对于版本 3

[`service_workers`背景页面在 MV3中被替换为](https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api_checklist)

> 在 manifest.json 中替换`background.page`或`background.scripts`替换为。`background.service_worker`

```
{
  "manifest_version": 3,
  "name": "",
  "background": {
    "service_worker": "background.js"
  }
} 
```**

# java - 在屏幕上展开 DataGrid 将使其所有项目可见

> ID：11920474
> 
> 赞同：0
> 
> 时间：2012-08-12T07:30:29.483
> 
> 标签：java, android, android-layout, datagrid

我正在编写我的第一个 android 应用程序。我正在使用 android 2.3.3 SDK。该游戏是一种纸牌游戏，屏幕上有一个 4x4 的纸牌网格。

当游戏开始时，屏幕上唯一可见的是数据网格（没有菜单或什么都没有）。

所以 GameActivity 布局如下：

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/faces_grid_view"
    android:numColumns="4"
    android:verticalSpacing="1dp"
    android:horizontalSpacing="1dp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
>
</GridView> 
```

这是GameActivity类的onCreate函数的相关代码：

```
 Display display = getWindowManager().getDefaultDisplay();
            final int width  = display.getWidth();
            final int height = display.getHeight();

            final int bottomPadding=150;
             //Display display = getWindowManager().getDefaultDisplay();
            gameTurns = new ArrayList<GameTurn>();
            imageWidth=width/4;
            imageHeight=(height-bottomPadding)/4;
            imageAdapter = new ImageAdapter(this,imageWidth,imageHeight);
            facesGridView = (GridView) findViewById(R.id.faces_grid_view);
            facesGridView.setAdapter(imageAdapter); 
```

在 onCreate() 代码中，我得到了 defaultDisplaySize，将其除以 4，这样我就知道图像可以采用的最大高度和宽度。

*   出于某种原因，我需要添加一个底部填充。我在galaxy note和galaxy tab 10.1上检查了它，也许getDefaultDisplay还返回了平板电脑本身底部工具栏的空间，因此图片与所有屏幕重叠而没有任何填充。

如您所见，我为 GridView 设置了一个适配器。适配器扩展了 BaseAdapter，我将我之前计算的宽度和高度粘贴到他的构造函数中。

适配器的 getView 函数包含以下内容：

```
 public View getView(int position, View convertView, ViewGroup parent) {
            ImageView imageView;
            if (convertView == null) {  // if it's not recycled, initialize some attributes
                imageView = new ImageView(mContext);
                LayoutParams param = new    LinearLayout.LayoutParams(this.imageWidth,this.imageHeight);
                imageView.setLayoutParams(new GridView.LayoutParams(param));
                imageView.setAdjustViewBounds(true);
                imageView.setScaleType(ScaleType.CENTER_INSIDE);
                imageView.setPadding(1,1,1,1);
            } else {
                imageView = (ImageView) convertView;
            } 
```

所以有几个问题：

1.  有没有办法将数据网格配置为在所有屏幕上可见，并在不配置图像宽度或高度的情况下显示所有不滚动的项目？为什么我需要为这么简单的任务如此努力？
2.  如果我确实需要自己计算东西，有没有办法获得实际的活动高度和宽度，所以我不需要添加任何填充？welp 我希望它适用于横向和纵向的所有屏幕尺寸。

我厌倦了改变和使用配置很多天，这是我迄今为止取得的最好成绩，因此任何有关该问题的信息将不胜感激。

# 更新

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:stretchColumns="*"
    android:weightSum="4" >

<TableRow
    android:id="@+id/tableRow1"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="1"
     >
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/face"
    android:onClick="onItemClick"
     />
<ImageView
    android:id="@+id/imageView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/face"
    android:onClick="onItemClick"
     />
<ImageView
    android:id="@+id/imageView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/face"
    android:onClick="onItemClick"
     />
<ImageView
    android:id="@+id/imageView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/face"
    android:onClick="onItemClick"
     />

</TableRow>
<TableRow
    android:id="@+id/tableRow2"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="1"
     >
<ImageView
    android:id="@+id/imageView5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/face"
    android:onClick="onItemClick"
     />
<ImageView
    android:id="@+id/imageView6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/face"
    android:onClick="onItemClick"
     />
<ImageView
    android:id="@+id/imageView7"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/face"
    android:onClick="onItemClick"
     />
<ImageView
    android:id="@+id/imageView8"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/face"
    android:onClick="onItemClick"
     />

</TableRow>
    <TableRow
    android:id="@+id/tableRow3"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="1"
    >
<ImageView
    android:id="@+id/imageView9"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/face"
    android:onClick="onItemClick"
     />
<ImageView
    android:id="@+id/imageView10"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/face"
    android:onClick="onItemClick"
     />
<ImageView
    android:id="@+id/imageView11"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/face"
    android:onClick="onItemClick"
     />
<ImageView
    android:id="@+id/imageView12"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/face"
    android:onClick="onItemClick"
     />

</TableRow>
    <TableRow
    android:id="@+id/tableRow4"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="1"
    >
<ImageView
    android:id="@+id/imageView13"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/face"
    android:onClick="onItemClick"
     />
<ImageView
    android:id="@+id/imageView14"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/face"
    android:onClick="onItemClick"
     />
<ImageView 
    android:id="@+id/imageView15"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/face"
    android:onClick="onItemClick"
     />
<ImageView
    android:id="@+id/imageView16"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/face"
    android:onClick="onItemClick"
     />

</TableRow>

</TableLayout> 
```

此 xml 文件会生成 4 个居中并垂直分布的图像（这适合所有屏幕，因此下面可能会有更多）。

[![截屏](../Images/321558e4586033413748b8fc409dc926.png)](https://i.stack.imgur.com/48Oba.png) .

我错过了什么？:)

谢谢！

克菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:40:38.877

> 有没有办法将数据网格配置为在所有屏幕上可见，并在不配置图像宽度或高度的情况下显示所有不滚动的项目？为什么我需要为这么简单的任务如此努力？

这是一个简单的任务，只是您使用了错误的小部件。`GridView`如果单元格的网格比屏幕大，您通常会使用 a ，这样您就可以从`GridView`的回收机制中受益（以提高性能并且不会遇到应用程序的内存问题）。这不是您的情况，因为您希望所有单元格都可见。

我会使用一个`TableLayout`宽度和高度设置为`FILL_PARENT`（`stretchColumns`设置为，`*`因此行列将具有相同的宽度），它将包含四个`TableRows`（`layout_weight`设置为`1`（并`weighSum`设置`4`为父级`TableLayout`），因此它们将具有相同的高度），还有`layout_height`因为`TableRow`将被设置为`0dp`。每个`TableRow`将包含四个`ImageViews`.

> 如果我确实需要自己计算东西，有没有办法获得实际的活动高度和宽度，所以我不需要添加任何填充？帮助我希望它适用于横向和纵向的所有屏幕尺寸。

我建议您使用我在上面发布的解决方案。如果您仍然想使用then使其`GridView`填充所有宽度/高度（通过 使用而`fill_parent`不是`wrap_content`像您对.`layout_width/height``onCreate``Handler``post``Runnable``GridView``LayoutParams`

# grails - 是否可以在没有源代码的情况下向客户提供 grails 插件

> ID：11920480
> 
> 赞同：0
> 
> 时间：2012-08-12T07:31:19.017
> 
> 标签：grails, plugins

他必须能够使用插件的所有功能，而无需访问源代码。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T08:20:50.480

你的意思是一个[二进制插件](http://grails.org/doc/2.1.0/guide/plugins.html#binaryPlugins)

这些都是可能的，因为 Grails 2

# javascript - 如何从表单标签之外的按钮手动触发 AngularJS 验证？

> ID：11920482
> 
> 赞同：27
> 
> 时间：2012-08-12T07:31:31.997
> 
> 标签：javascript, angularjs

鉴于此代码：

```
<div ng-controller="MyCtrl">
    <form ng-submit="onSubmitted()">

    Header inputs:
        <input type="name" ng-model="sample" required/>
        <input type="name" ng-model="sampleX" required/>

        <input type="submit" value="This submit triggers validation. But I wanted to put this button at the end of the page"/>
    </form>

    <hr/>

    Some other form here. Think line items

    <hr />
    <a class="btn" ng-click="/* what could should be put here, so this can trigger the firt form's validation, then submit? */">Wanted this submit button to trigger the validation+submit on the form in which this button doesn't belong</a>

</div>

var app = angular.module('myApp', []);

function MyCtrl($scope) {

    $scope.onSubmitted = function() {
        alert('submitted!');
    };
} 
```

我希望最后一个按钮在第一个表单上触发验证（然后在事情有效时提交）。到目前为止，只有表单内的按钮可以触发该表单的验证和提交。表单外的按钮是否有任何可能的方法来做到这一点？

现场测试：http: [//jsfiddle.net/dzjV4/1/](http://jsfiddle.net/dzjV4/1/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T18:38:11.850

您可以创建指令，然后将其附加到`<a class="btn"...`. 检查这个jsfiddle

[http://jsfiddle.net/dzjV4/2/](http://jsfiddle.net/dzjV4/2/)

请注意，我添加`<input type='submit' id='clickMe'...`并链接到底部的链接`<a class='btn' linked="clickMe"...`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-24T10:13:14.027

```
 for (control of $scope.[form name].$$controls) {
        control.$setDirty();
        control.$validate();
    } 
```

你可以试试上面的代码。在提交之前让它运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T20:35:26.143

理想情况下，有一种编程方式可以使验证在表单中重新运行。我还没有完全调查过，但有一种情况需要根据范围内的不同数据重新验证多个控件 - 无需用户与各个控件进行交互。这是因为表单有两个操作按钮，每个按钮在被点击时都需要不同的验证规则。

UI 要求在我完全实施强制重新验证之前发生了变化，但在此之前我通过复制然后重新设置表单的数据获得了我需要的大部分内容。这强制在当前范围内对表单进行重新验证。基本上，它遵循以下内容（未经测试，但取自正在运行的代码）。在这种情况下，表单的数据绑定到一个对象的属性。

```
var formData = $parse(<form's model>); 
var dataCopy = angular.copy( formData($scope) ); 
formData.assign( $scope, dataCopy ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-13T18:44:08.683

这可能是也可能是不可接受的，但如果您可以在表单完成之前禁用提交按钮，您可以这样做：

```
<form name="formName">
 <input ng-required="true" />
</form>
<button ng-click="someFunction()" ng-disabled="formName.$invalid" /> 
```

还值得注意的是，这在 IE9 中有效（如果您担心的话）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-13T21:07:31.447

为您的表单命名：

```
<div ng-controller="MyCtrl">
    <form name="myForm">
        <input name="myInput" />
    </form>
</div> 
```

因此，您可以在您的范围内访问您的表单验证状态。

```
app.controller('MyCtrl', function($scope) {
    $scope.myForm.$valid // form valid or not
    $scope.myForm.myInput // input valid or not
    // do something with myForm, e.g. display a message manually
}) 
```

[角度文档](http://docs.angularjs.org/api/ng.directive%3aform)

无法在表单之外触发浏览器表单行为。您必须手动执行此操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-11T23:45:08.497

由于我的表单字段仅在字段无效并且已被用户触摸时才显示验证消息：

```
<!-- form field -->
<div class="form-group" ng-class="{ 'has-error': rfi.rfiForm.stepTwo.Parent_Suffix__c.$touched && rfi.rfiForm.stepTwo.Parent_Suffix__c.$invalid }">

    <!-- field label -->
    <label class="control-label">Suffix</label>
    <!-- end field label -->
    <!-- field input -->
    <select name="Parent_Suffix__c" class="form-control"
        ng-options="item.value as item.label for item in rfi.contact.Parent_Suffixes"
        ng-model="rfi.contact.Parent_Suffix__c" />
    <!-- end field input -->
    <!-- field help -->
    <span class="help-block" ng-messages="rfi.rfiForm.stepTwo.Parent_Suffix__c.$error" ng-show="rfi.rfiForm.stepTwo.Parent_Suffix__c.$touched">
        <span ng-message="required">this field is required</span>
    </span>  
    <!-- end field help -->
</div>
<!-- end form field --> 
```

我能够使用由按钮触发的此代码来显示我的无效字段：

```
// Show/trigger any validation errors for this step
angular.forEach(vm.rfiForm.stepTwo.$error, function(error) {
    angular.forEach(error, function(field) {
        field.$setTouched();
    });
});
// Prevent user from going to next step if current step is invalid
if (!vm.rfiForm.stepTwo.$valid) {
    isValid = false;
} 
```

# opencv - 物体识别性能不好

> ID：11920483
> 
> 赞同：1
> 
> 时间：2012-08-12T07:31:58.133
> 
> 标签：opencv, computer-vision, surf

我正在尝试使用 opencv 2.4.2 中的 SURF、FERN、FREAK 等算法进行对象识别。

我正在使用 opencv 示例中的程序而无需修改 -`find_obj.cpp, find_obj_ferns.cpp, freak_demo.cpp`

我尝试更改没有帮助的算法的参数。

我在这里有我的训练图像、测试图像和 FREAK 识别[结果](http://s1145.photobucket.com/albums/o518/Rajendran_Thirupugalsamy/opencv/)

如您所见，结果非常糟糕。

*   没有为其中一张训练图像检测到特征描述符 -[此处为图像](http://s1145.photobucket.com/albums/o518/Rajendran_Thirupugalsamy/opencv/?action=view&current=57f376d7.png)
*   在另一个对象边界之外检测到特征描述符 -[此处为图像](http://s1145.photobucket.com/albums/o518/Rajendran_Thirupugalsamy/opencv/?action=view&current=34b41653.png)

我有几个问题：

1.  为什么这些算法适用于*灰度*图像？很明显，对于我上面的训练图像，如果包含 RGB，则可以轻松检测到对象。有没有考虑到这一点的技术。

2.  有没有其他方法可以提高性能。我尝试摆弄效果不佳的功能参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T10:10:43.340

我在您的图像中观察到的第一件事是，物体是平面并且没有纹理差异......我的意思是您使用的所有特征检测器都用于查找视图不变的角，这意味着这些是图像中的关键点独特的邻域和良好的 x 和 y 导数。我已经上传了我的分析……看数字![在此处输入图像描述](../Images/76b744314abb8a3bdf82151f66da207a.png)

怎么知道我说的是对的？

只需转到您在对象上找到的关键点的描述符值并查看值，您会看到它们中的大多数都是零......因为描述符是对特定方向上角点周围边缘变化的描述（有关详细信息，请参阅 surf 文档）。

您尝试检测的对象看起来像手机，因此您只需将对象或移动设备反转并重复实验，您肯定会得到很好的结果......因为在正面通常对象具有更多纹理，如开关、徽标等..

这是我上传的结果， ![在此处输入图像描述](../Images/dff3bf71c7f69b68ffd32f55b0242b35.png)

# django - Django 我可以将 tabularinline 字段拆分为多行吗？

> ID：11920484
> 
> 赞同：5
> 
> 时间：2012-08-12T07:31:58.000
> 
> 标签：django, django-admin

我在 admin.tabularinline 中有一个包含许多字段的内联。将这些字段拆分为多行的最简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T08:38:29.433

使用可以使用a[`StackedInline`](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.StackedInline)代替

# c++ - “new”操作符和“new”函数的区别

> ID：11920486
> 
> 赞同：9
> 
> 时间：2012-08-12T07:32:16.780
> 
> 标签：c++, operators

**面试题：** “new”操作符和“new”函数有什么区别？

我回答没有区别，他们运行相同的代码，但面试官一直在针我，好像那是错误的答案。

*这是*错误的答案吗？还是面试官只是和我玩游戏？

如果是错误的答案，那么正确的答案是什么？

我继续说，如果您需要自定义分配，“新”运算符可能会被重载，但后来他想知道*如何*重载它。当然我没有那个答案，从来没有需要，但我告诉他我可以在 10 分钟内查到它（这在面试中*永远不是正确的答案）。*

所以无论如何，在对“新”运算符与“新”函数进行了一些研究之后，并没有看到任何真正令人满意的答案，我想我会问具体的问题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-12T08:49:44.393

`new`运算符和不是`operator new`一回事。

`new`运算符调用一个`operator new`函数来分配内存，然后根据分配的类型和使用的语法，在分配的内存上初始化或调用构造函数。换言之，`operator new`仅构成操作员操作的一部分`new`。

`operator new`是`new`操作员为分配内存而调用的函数。有一个`operator new`可以*替换*的默认实现，这与重载不同。`operator new`也可以为[特定类型](http://ideone.com/UdTIj)实现以仅处理该类型对象的分配，或者`operator new`可以重载并且可以通过使用`new`操作符的放置新形式来选择重载。

的默认实现`operator new`可以通过定义具有以下签名的函数来替换：

```
void *operator new(std::size_t size);
void *operator new(std::size_t size, const std::nothrow_t&);
void *operator new[](std::size_t size);
void *operator new[](std::size_t size, const std::nothrow_t&); 
```

当您为您提供替换或重载时，`operator new`您应该提供相应的`operator delete`功能：

```
void operator delete(void* ptr) noexcept;
void operator delete(void* ptr, const std::nothrow_t&) noexcept;
void operator delete[](void* ptr) noexcept;
void operator delete[](void* ptr, const std::nothrow_t&) noexcept; 
```

要提供与运算符`operator new`的放置形式一起使用的重载，`new`您可以添加其他参数（`operator new`and的 nothrow 版本`operator delete`）。

```
struct my_type {};

void *operator new(std::size_t size, const my_type&);
void operator delete(void *ptr, const my_type&);

new (my_type()) int(10); // allocate an int using the operator new that takes a my_type object 
```

运算符没有“放置删除”形式`delete`。提供的重载`operator delete`是因为如果在内存的初始化/构造过程中发生错误（例如，在调用`new`运算符之后调用的构造函数），则在重新抛出异常之前调用`operator new`相应的如果它存在。`operator delete`否则`operator delete`不调用，并且在抛出异常时[内存泄漏。](http://ideone.com/S4TCW)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T07:35:22.913

基本上：- 功能：“操作员新”

```
 class Example 
{ public:
         void* operator new( size_t );
 } 
```

“新运营商”：

```
Example* eg = new Example(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T07:47:53.880

> 我继续说，如果您需要自定义分配，“新”运算符可能会被重载

你几乎是对的。 `new`是运算符的关键字，用于内存分配。

*为什么这是一个运算符？*
根据需要，它可以在全局范围或类范围（但不是范围！）中作为**函数**重载`namespace`。如果它是一个函数，这是不可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T07:48:14.843

不同之处在于它们的功能。根据我认为的标准，初始分配部分是相同的。也就是说，显式使用语法 new 与 operator new() 非常相似。不同之处在于使用 new 初始化或构造新对象。::operator new() 也有 3 个不同版本，并且有多种语法可以使用它们（即，placement new）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T07:52:23.360

没有新功能。我的猜测是他们想让你说其中一个分配了内存（标准使用*分配器函数*、*函数 new 运算符*和*new 运算符*），另一个使用第一个分配内存，然后调用构造函数（标准如果构造函数因异常退出，则使用*新表达式*）和释放器函数（又名*函数删除运算符*或*删除运算符）来释放内存。*

# python - 如何在 Python 中并行运行 os.walk？

> ID：11920490
> 
> 赞同：25
> 
> 时间：2012-08-12T07:33:23.257
> 
> 标签：python

我用 Java 编写了一个简单的应用程序，它采用路径列表并生成一个文件，其中包含该原始列表下的所有文件路径。

如果我有 paths.txt 有：

```
c:\folder1\
c:\folder2\
...
...
c:\folder1000\ 
```

我的应用程序在每个多线程路径上运行递归函数，并返回一个文件，其中包含这些文件夹下的所有文件路径。

现在我想用 Python 编写这个应用程序。

我编写了一个简单的应用程序，用于`os.walk()`运行给定文件夹并打印文件路径以输出。

现在我想并行运行它，并且我已经看到 Python 有一些用于此目的的模块：多线程和多处理。

最好的方法是什么？在这种方式下，它是如何执行的？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-05-21T09:54:37.080

这是一个*多处理*解决方案：

```
from multiprocessing.pool import Pool
from multiprocessing import JoinableQueue as Queue
import os

def explore_path(path):
    directories = []
    nondirectories = []
    for filename in os.listdir(path):
        fullname = os.path.join(path, filename)
        if os.path.isdir(fullname):
            directories.append(fullname)
        else:
            nondirectories.append(filename)
    outputfile = path.replace(os.sep, '_') + '.txt'
    with open(outputfile, 'w') as f:
        for filename in nondirectories:
            print >> f, filename
    return directories

def parallel_worker():
    while True:
        path = unsearched.get()
        dirs = explore_path(path)
        for newdir in dirs:
            unsearched.put(newdir)
        unsearched.task_done()

# acquire the list of paths
with open('paths.txt') as f:
    paths = f.read().split()

unsearched = Queue()
for path in paths:
    unsearched.put(path)

with Pool(5) as pool:
    for i in range(5):
        pool.apply_async(parallel_worker)

unsearched.join()
print('Done') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-12T08:35:45.950

这是python中线程的一种模式，对我很有用。不过，由于线程在 CPython 中的工作方式，我不确定线程​​是否会提高您的性能。

```
import threading
import Queue
import os

class PathThread (threading.Thread):
    def __init__(self, queue):
        threading.Thread.__init__(self)
        self.queue = queue

    def printfiles(self, p):
        for path, dirs, files in os.walk(p):
            for f in files:
                print path + "/" + f

    def run(self):
        while True:
            path = self.queue.get()
            self.printfiles(path)
            self.queue.task_done()

# threadsafe queue
pathqueue = Queue.Queue()
paths = ["foo", "bar", "baz"]

# spawn threads
for i in range(0, 5):
    t = PathThread(pathqueue)
    t.setDaemon(True)
    t.start()

# add paths to queue
for path in paths:
    pathqueue.put(path)

# wait for queue to get empty
pathqueue.join() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-15T10:02:11.303

甚至线程对于目录遍历也很有帮助。我使用以下代码遍历 SharePoint 树，大约 50 个线程获得了相当显着的加速。这个特定的程序为目录结构中的所有 xml 文件返回（路径、数据）对，并且可以简单地扩展以供您使用。（这是从我的程序中剪切和粘贴的；需要进行一些额外的编辑。）

```
#unique string for error passing error messages
ERROR = '\xffERROR\xff'

class ScanWorker(threading.Thread):
    """Worker class for scanning directory structures.
    pathQueue: queue for pathnames of directories
    resultQueue: results of processFile, pairs of (path, data) to be updated
    """
    lock = threading.Lock()
    dirCount = 0
    def __init__(self, pathQueue, resultQueue):
        self.pathQueue = pathQueue
        self.resultQueue = resultQueue
        super().__init__()

    def run(self):
        """Worker thread.
        Get a directory, process it, and put new directories on the
        queue."""
        try:
            while True:
                self.processDir(self.pathQueue.get())
                self.pathQueue.task_done()
        except Exception as e:
            #pass on exception to main thread
            description = traceback.format_exception(*sys.exc_info())
            description.insert(0,
                "Error in thread {}:\n".format(
                    threading.current_thread().name))
            self.resultQueue.put((ERROR, description))
            self.pathQueue.task_done()

    def processDir(self, top):
        """Visit a directory
        Call self.processFile on every file, and queue the directories.
        """
        #Wait and retry a few times in case of network errors.
        #SharePoint is not reliable, gives errors for no reason
        for retryCount in range(30):
            try:
                names = listdir(top)
                break
            except OSError as e:
                if e.errno in (2,22):
                    lastError = e
                    print(end="L", flush=True)
                    time.sleep(1)
                else:
                    raise
        else:
            print("List: too many retries")
            raise lastError
        #it is not important to worry about race conditions here
        self.__class__.dirCount += 1
        #process contents
        for name in names:
            if isdir(join(top, name)): self.pathQueue.put(join(top, name))
            else: self.processFile(join(top, name))

    def processFile(self, path):
        """Get XML file.
        """
        #only xml files
        if not path.lower().endswith('.xml'): return
        filemtime = datetime.fromtimestamp(getmtime(path))
        #SharePoint is not reliable, gives errors for no reason; just retry
        for retryCount in range(30):
            try:
                data = open(path,'rb').read()
                break
            except OSError as e:
                if e.errno in (2,22):
                    lastError = e
                    print(end="R", flush=True)
                    time.sleep(1)
                else:
                    raise
        else:
            print("Read: too many retries")
            raise lastError
        self.resultQueue.put((path, data))

class Scanner:
    """Interface to the ScanWorkers
    Sharepoint is pretty fast compared to its delay and handles 50 workers well
    Make sure you only create one instance of Scanner!
    """
    def __init__(self, workers):
        #don't restrict the path queue length; this causes deadlock
        #we use a LIFO queue to get more depth-first like search
        #reducing average queue length and hopefully improving server caching
        self.pathQueue = queue.LifoQueue()
        #this is the output queue to the main thread
        self.resultQueue = queue.Queue(5)
        self.workers = workers
        #start workers
        for i in range(workers):
            t = ScanWorker(self.pathQueue, self.resultQueue)
            t.setDaemon(True)
            t.start()

    def startWorkers(self, path):
        #add counter
        self.added = 0
        #and go
        self.pathQueue.put(path)

    def processResult(self, wait=True):
        """Get an element from the result queue, and add to the zip file."""
        path, data = self.resultQueue.get(block=wait)
        if path==ERROR:
            #process gave alarm; stop scanning
            #pass on description
            raise ScanError(data)
        <do whatever you want to do with the file>
        self.resultQueue.task_done()
        self.added += 1

#main
try:
    #set up
    scanner = Scanner(threads)
    scanner.startWorkers(rootpath)
    pathQueue, resultQueue = scanner.pathQueue, scanner.resultQueue
    #scanner is rolling; wait for it to finish
    with pathQueue.all_tasks_done:
        while pathQueue.unfinished_tasks:
            #tasks are still running
            #process results
            while True:
                try: scanner.processResult(wait=False)
                except queue.Empty: break
            #no new files found; check if scanner is ready
            done = pathQueue.all_tasks_done.wait(timeout=1)
            if not done:
                #Not yet; print something while we wait
                print(
                    "\rProcessed {} files from {} directories [{} {}]  "
                    .format(
                        scanner.added,
                        ScanWorker.dirCount,
                        pathQueue.unfinished_tasks,
                        resultQueue.unfinished_tasks,
                    ), end='\r')
    #just to make sure everybody is ready: join the path queue
    pathQueue.join()
    #process remaining of result queue
    while resultQueue.unfinished_tasks: scanner.processResult(wait=True)
    #go to new line to prevent overwriting progress messages
    print()
except ScanError as e:
    print()
    print(*e.args[0], end='')
    print("Process interrupted.")
except KeyboardInterrupt:
    print("\nProcess interrupted.")
print() 
```

# database - 在实体框架中使用模型优先方法进行迁移

> ID：11920491
> 
> 赞同：14
> 
> 时间：2012-08-12T07:33:40.590
> 
> 标签：database, automation, entity-framework-4.1, entity-framework-migrations, ef-model-first

我已经建立了一个系统，我采用了模型优先的方法，因为它对我来说更符合逻辑。现在，即使我对模型进行了一些更改，目前我所做的是-

1.  使用实体框架的**从模型生成数据库**功能。我创建了一个虚拟数据库并应用这些脚本。它首先删除我所有的数据和表，然后使用实体框架生成的最新 sql 文件更新数据库。
2.  现在，我使用**Visual Studio 的架构比较**功能，并为我的本地数据库和生产中的数据库生成迁移脚本。
3.  我手动浏览脚本并验证它们。完成后，我在生产实例上运行迁移脚本。

**问题**：主要问题是这真的很乏味，因为我是从我的本地系统做的，连接到我的产品数据库非常慢，有时我的视觉工作室也会崩溃。有没有更清洁的方法来做到这一点？哪个更自动化，以至于我的笔记本电脑并不真正负责生产实例上的数据库迁移？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T08:08:48.443

您可以尝试[Database Migration Power Pack](http://visualstudiogallery.msdn.microsoft.com/df3541c3-d833-4b65-b942-989e7ec74c87/) - 它允许创建更改脚本而不是完整的数据库脚本，但在它后面执行与您手动执行相同的过程。问题是提到的[工具不适用于 EF5](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/3065564-ef5-model-first-genrate-db-update-script)。

不幸的是， [EF 迁移](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx)目前不支持通过 EDMX 创建的模型。迁移目前仅支持代码优先方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-14T01:05:22.393

在 Schema First 设计中，我使用 ApexSQL Diff（很可能与 RedGate 的产品非常相似，可能更便宜一些） -*一个好的 3rd 方工具比 VS 数据库项目更容易使用*，并且易于使用脚本应用程序工具应用像圆屋。

在 Model First 方法中使用它可以遵循 Schema First 方法，使用模型-Schema-Diff-Schema-Model 的循环，如帖子中所述；考虑以下这些指南/说明，以简化流程。***模式差异方法不需要繁琐、缓慢或过度手动。***

1.  当前版本的数据库模式是通过*应用一系列数据库补丁*（或 DDL/DML 脚本）获得的。

    一个工具（我们使用 RoundHouse）会根据需要自动应用脚本。它记录信息以了解已应用了哪些脚本。应用相同的脚本是幂等的。

2.  对*本地*数据库进行差异化；这个本地数据库可以通过*所有以前的更改脚本*以自动方式建立起来。这个 latest-local 始终是最新模型更改的差异目标。

    远程/实时数据库*从不用作差异目标*。稍后可以将相同的脚本应用于测试（然后是实时）数据库。由于一切都以相同的方式完成，因此该过程在*所有*数据库上都是可重复的。

    唯一的“问题”是未经深思熟虑的更新可能会导致数据在新的限制/约束下无效。当然，在推送到实时数据库之前，这很容易识别、修复和重新比较。

3.  一旦 diff 被提交到源代码控制，它就*必须*应用于分支。要“撤消”先前提交的更改脚本，需要创建一个应用反向操作的新差异。没有隐式的向下版本。

    我们有一个 [Hg] 模型分支，它有效地充当必须统一针对的模式锁；这可以被视为一个弱点，但它在小团队开发中运作良好。

4.  像 Huagati DBML/EDMX 这样的工具用于将 Schema 同步回 Model，这在开发时非常有用。这个小宝石确实为自己付出了代价，并且是周期的一部分。当使用它时，也很容易“更新到模型”或在 SSMS（或其他任何东西）中进行 Schema 更改，然后将它们带回来。

Code First 迁移是“好的”（绝对比没有好！），但我*只*使用它们是因为高级差异工具不支持 Azure SQL（又名 SQL 数据库），因为没有公开各种 sys 信息。（差异可以照常在本地完成，但 ApexSQL Diff 生成的 DDL/DML 并不总是与 Azure SQL 友好 - 另外，我有机会学习一种稍微不同的方法 :-)

通过 Power Pack 进行 Code First 迁移的一些优点：可以在 C# 中执行更新任务，而不是局限于 DDL/DML（可能很方便）、自动降级（虽然我质疑它们的使用）、不需要购买第 3 方工具（可能很昂贵），更容易集成/部署到 Azure SQL，与特定数据库供应商的联系更少（理论上）等。

*虽然 Code First 迁移（以及此类迁移的自动化）与绝对可怕*的 Drop-and-Recreate 方法相比是一个很好的进步，但我更喜欢在开发时使用专用的 SQL 工具。

# algorithm - 识别名称拼写错误的最有效编辑距离？

> ID：11920494
> 
> 赞同：6
> 
> 时间：2012-08-12T07:34:25.793
> 
> 标签：algorithm, nlp, spelling, edit-distance

编辑距离算法给出了两个字符串之间距离的度量。

问题：这些措施中的哪一个与检测两个实际上相同的不同人名最相关？（由于拼写错误而不同）。诀窍是它应该尽量减少误报。例子：

奥巴马奥巴马 => 可能应该被合并

Obama Ibama => 不应合并。

这只是一个过于简单的例子。他们的程序员和计算机科学家是否更详细地解决了这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T08:36:39.220

我可以建议这样做的**[信息检索](http://en.wikipedia.org/wiki/Information_retrieval)技术**，但它需要大量的文档才能正常工作。

使用标准的 IR 技术索引您的数据。[Lucene](http://lucene.apache.org/core/)是一个很好的开源库，可以帮助您。

一旦你得到一个名字（例如奥巴马）：检索出现**奥巴马这个词的集合集**。让这个集合成为`D1`。 现在，对于D1
中的每个单词¹**搜索**（使用您的 IR 系统）。设 为。`w` ^(**`Obaama AND w`**`D2`)

**分数`|D2|/|D1|`**是一个估计有多少`w`连接到`Obaama`，并且很可能会接近 2 的`w=Obama`¹。
您可以手动标记一组示例并找到预期单词的值。

使用标准的词典相似性技术，您可以选择过滤掉绝对不是拼写错误的单词（Like `Barack`）。

**另一个**经常使用的解决方案需要查询日志——找到**搜索词之间的相关性**，如果查询日志中奥巴马与奥巴马有相关性——它们是连接的。

* * *

1：您可以通过首先执行第二个过滤器来提高性能，并且只检查字典上“足够相似”的候选人。

2：通常也使用归一化，因为更频繁的词更有可能与任何词在同一个文档中，无论是否相关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T13:20:04.663

您可以查看也使用[SecondString的](http://secondstring.sourceforge.net/)[NerSim](http://cogcomp.cs.illinois.edu/page/software_view/NESim)（[演示](http://cogcomp.cs.illinois.edu/demo/nesim/?id=26)） 。你可以找到他们相应的论文，或者考虑这篇论文：[命名实体匹配的稳健相似性度量](http://aclweb.org/anthology-new/C/C08/C08-1075.pdf)。

# javascript - 使用 jQuery Tooltip 插件获取 clientX

> ID：11920495
> 
> 赞同：0
> 
> 时间：2012-08-12T07:34:29.860
> 
> 标签：javascript, jquery, jquery-tooltip

我正在使用这个[工具提示插件](http://docs.jquery.com/Plugins/Tooltip)：

我正在尝试获取工具提示区域的 clientX。意思是客户端悬停在元素上的 X 位置。到目前为止，没有运气。

这是一个例子：

```
$(this).find("div.GanttRange[data-RangeID != '']").tooltip({
    bodyHandler: function (e) {
        if (!_self.DragInProgress) {
            result = window[_self.ElementRangeTooltipFunction](_self.GetRelativeClientX(e.clientX));
        } else {
            result = "";
        }
        return result;
    },
    opacity: 0,
    track: true,
    showURL: false
}); 
```

`e`在此上下文中未定义。否则我如何找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:20:41.193

感谢[这个问题](https://stackoverflow.com/questions/12039146/mouseover-function-losing-scope-when-called-from-anonymous-function)的答案，我通过修改工具提示插件代码解决了这个问题。

在`tooltip`匿名函数中，替换为：

```
.mouseover(save) 
```

有了这个：

```
.mouseover(function(evt){save.call(this, evt)}) 
```

在`Save`函数中，替换它：

```
function save() { 
```

有了这个：

```
function save(evt) { 
```

和这个：

```
var bodyContent = settings(this).bodyHandler.call(this); 
```

有了这个：

```
var bodyContent = settings(this).bodyHandler.call(this, evt.clientX); 
```

# sql - 爬虫/爬虫的数据库是什么？

> ID：11920502
> 
> 赞同：11
> 
> 时间：2012-08-12T07:35:34.693
> 
> 标签：sql, database, nosql, screen-scraping, web-crawler

我目前正在研究用于我正在从事的项目的数据库。希望大家能给我一些提示。

该项目是一个自动网络爬虫，它根据用户的请求检查网站，在某些情况下抓取数据，并创建所做操作的日志文件。

要求：

*   只有几列少的表；预定义列没问题
*   模型之间没有过于复杂的关联
*   大量基于日期和时间的查询
*   由于日志记录，数据库将快速增长并占用大量空间
*   应该能够扩展到多台服务器
*   字段主要包含 id (int)、字符串（最多 200-500 个字符）和 unix 时间戳
*   两种不同类型的服务器将同时直接向/从它读取/写入数据：
    *   一个（/以后更多）rails应用程序，它接受用户输入并根据请求显示结果
    *   一个（/以后更多）Node.js 服务器，用作执行爬虫/爬虫。它将有足够的负载连续运行并每秒进行数十次数据库查询。

我认为它既不是图形数据库（没有复杂的关联），也不是基于内存的键/值存储（缓存中保存的数据太多）。对于我能找到的每一种其他类型的数据库，我仍然持观望态度，每一种似乎都有它的优点。

那么，专业人士有什么建议我应该如何决定？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T03:01:39.207

我同意 Vladimir 的观点，即您会考虑为这种情况使用基于文档的数据库。我最熟悉 MongoDB。我在这里使用它的原因如下：

1.  您的“只有几张表和几列”的“模式要求”非常符合 MongoDB 的 NoSQL 特性。
2.  与上面的“节点之间没有过于复杂的关联”相同——您需要决定是更喜欢嵌套文档还是使用 dbref（我更喜欢前者）
3.  大量基于时间的数据（和其他扩展要求）——MongoDB 通过分片或分区很好地扩展
4.  读/写访问——这就是为什么我推荐 MongoDB 而不是 Hadoop 之类的东西。交互式查询需求最好通过 Hadoop 样式存储以外的方式来满足，因为这种类型的存储是为批处理（而不是交互式查询）需求而设计的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-12T20:33:49.723

谷歌建立了一个名为“BigTable”的数据库，用于抓取、索引和搜索相关业务。他们发布了一篇关于它的论文（如果你有兴趣，谷歌搜索“BigTable”）。有几种类似 bigtable 的设计的开源实现，其中之一是[Hypertable](http://Hypertable.com)。我们有一篇博客文章描述了sehrch.com 的人编写的爬虫/索引器实现 ( [http://hypertable.com/blog/sehrchcom_a_structured_search_engine_powered_by_hypertable/ )。](http://hypertable.com/blog/sehrchcom_a_structured_search_engine_powered_by_hypertable/)并查看您的要求：所有这些都受支持并且是常见的用例。

（免责声明：我为 hypertable 工作。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T07:48:34.300

看看像[CouchDB](http://couchdb.apache.org/)或[MongoDB](http://www.mongodb.org/)这样的面向文档的数据库。

# android - 我应该在 onSaveInstanceState() 方法中放一个大对象吗

> ID：11920503
> 
> 赞同：0
> 
> 时间：2012-08-12T07:35:37.780
> 
> 标签：android

我对 Android 还是很陌生。所以，请帮我这个问题。我有片段，我向用户显示电子邮件。我将电子邮件内容放入模型对象。我应该将模型对象放在 onSaveInstanceState 方法中的包中，还是如何为 Fragment recreate 保留模型对象？

也许这是一个简单的问题，但请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T09:55:24.567

如果你想将对象保存在一个包中，它应该是一个可打包的对象。您可以使用 putParcelable 和 getParcelable 来保存和恢复对象。通常不鼓励保存大数据，因为它会使游戏变慢。只保存你绝对需要的东西。

# javascript - 如何按顺序执行jquery函数？

> ID：11920504
> 
> 赞同：0
> 
> 时间：2012-08-12T07:35:39.300
> 
> 标签：javascript, jquery, jquery-plugins

正如标题所说，如何维护/控制 Jquery 中函数的执行顺序？我知道我们可以通过 建立许多事件处理程序`addEventListener`，但不能保证它们的执行顺序。让我引用

> 请注意，即使处理程序按照它们建立的顺序触发，标准也不保证此顺序！此代码的测试人员从未观察到除了建立顺序之外的其他顺序，但编写依赖于此顺序的代码将是愚蠢的。请始终注意，在一个元素上建立的多个处理程序可能会以随机顺序触发。

*Manning Jquery in Action 第 2 版*

此外，我们可以通过使用方法*欺骗*jquery (AFAIK) 以特定顺序执行处理程序，并按照创建队列时定义的顺序调用该方法以调用该队列中的方法。但这不是一个永久的解决方案，因为尽管 dequeue 确实按照定义的顺序执行它们，但也会在执行后将它们从队列中删除。所以，这是一个一次性的解决方案，一旦我们完成了队列，订单（为此我们首先创建了队列！）就消失了。`queue()``dequeue()`

所以，我想知道，是否有解决方法或解决方案？如果是这样，这是否取决于我们的要求？比如处理点击事件，或者使用 ajax 通过加载加载异步数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T07:44:10.073

> *“我知道我们可以通过 建立许多事件处理程序* `addEventListener`*，但不能保证它们的执行顺序。”*

与 绑定的事件处理程序不保证执行顺序，但与 jQuery 绑定的事件处理程序绝对保证*执行*`addEventListener()`顺序。**jQuery 按照绑定的顺序调用您的处理程序。**

 ***这在 jQuery 文档中的大粗体文本中并不是很明显，但如果你足够努力的话，它就*在那里。*从[`.on()`方法 doco](http://api.jquery.com/on/)：

> *（绑定到元素的事件处理程序的调用顺序与它们绑定的顺序相同。）*

或者更详细地从[`.bind()`方法](http://api.jquery.com/bind/)

> *当一个事件到达一个元素时，所有绑定到该元素的事件类型的处理程序都会被触发。如果注册了多个处理程序，它们将始终按照它们被绑定的顺序执行。在所有处理程序都执行后，事件将沿着正常的事件传播路径继续。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T07:39:36.220

我可以使用回调函数并在这些函数中处理事件。

```
function helloWorld(hello,callback)
{
   //does something here with hello 
   callback(); //calls the callback function for final execution
}

helloWorld("world",alertUser);

function alertUser(){
  alert("I am done with this function");
} 
```

所以，如果我理解你的问题没问题，那么我会做类似上述的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T07:56:57.503

如果您需要以特定顺序执行代码，为什么要使用多个事件处理程序？

如果您使用一个事件处理程序以您想要的顺序执行多个函数调用，它通常会导致更易于维护和更明显的代码。***

# sql - SQL删除包含字符串的NULL

> ID：11920508
> 
> 赞同：-2
> 
> 时间：2012-08-12T07:36:56.620
> 
> 标签：sql

我有一个包含标题列表的表。

由于出现问题，出了点问题，现在的值就像

```
title1[null]
title2[null][null]
title[null]3[null] 
```

等等，我需要将所有 [NULL] 替换为 NOTHING。所以一切都会好起来的。谢谢你。

请指教。

PS。

[null] 不是实际的字符串，而是值 NULL 本身，如十六进制 00。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T08:04:08.020

Stackoverflow 已经有一个现成的答案：

```
REPLACE(myString, char(0), '') 
```

来源：[在sql中替换字符串中的空字符](https://stackoverflow.com/questions/2298412/replace-null-character-in-a-string-in-sql)

这也可能有帮助：[什么是 TSQL 中的空字符文字？](https://stackoverflow.com/questions/2828333/what-is-the-null-character-literal-in-tsql)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T07:49:53.833

这适用于 MS SQL

```
 UPDATE table_name SET column_name = REPLACE(column_name, '[null]', '') 
```

**关于 '[NULL]' 是 NULL 字符而不是文本的更新后的新答案：**

```
 UPDATE table_name SET column_name = REPLACE(column_name, char(0), '') 
```

# ffmpeg - 从 FFMPEG 获取的数据包是否具有绝对时间信息？

> ID：11920511
> 
> 赞同：1
> 
> 时间：2012-08-12T07:37:44.317
> 
> 标签：ffmpeg, timestamp

我正在创建一个视频播放器，它适用于一个不完整的视频文件，其中有一些用零填充的空（不完整）部分。

例如，有一个视频文件，其中依次包含 A、B 和 C 部分。A和C是完整的，B是不完整的。并且 A 部分从文件偏移量 0 开始，并且还包括标题信息。

现在，我想知道C节的开始时间。

所以我完全使用 FFMPEG 从 A 部分读取数据包到 C 部分，它跳过了我想要的 B 部分。但是当我在阅读时从每个数据包中获取演示时间戳值时，我发现它在不断增加。

问题是我希望 C 部分的时间戳增加 B 部分的数量。

尽管 B 部分被忽略，但我想知道我应该展示 C 部分的实际时间。

我猜FFMPEG不包括绝对时间信息，而是根据最后一个数据包的相对时间信息计算呈现数据包的时间。但是，我认为必须有一种方法可以找到绝对时间信息。

# sencha-touch - 如何使用 sencha touch 2 中的按钮或超链接在轮播项目之间切换？

> ID：11920512
> 
> 赞同：0
> 
> 时间：2012-08-12T07:38:19.183
> 
> 标签：sencha-touch, extjs, sencha-touch-2, carousel

有没有一种方法可以使用按钮或超链接从第一个轮播项目导航到第二个轮播项目，反之亦然，而不是使用指示器？有人可以给我一个解决方案来完成这项任务吗？非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:34:50.053

呼吁[`setActiveItem`](http://docs.sencha.com/touch/2-0/#!/api/Ext.carousel.Carousel-method-setActiveItem)事件[`button's tap`](http://docs.sencha.com/touch/2-0/#!/api/Ext.Button-event-tap)。

```
tap: function() {
 ....
 carousel.setActiveItem(2); // Moves to the 3rd carousel item.
 ....
} 
```

# ruby - 使用参数重定向 POST/GET 请求的 Sinatra 应用程序

> ID：11920513
> 
> 赞同：11
> 
> 时间：2012-08-12T07:38:27.373
> 
> 标签：ruby, redirect, sinatra

我正在迁移服务器，但不幸的是，旧的服务器 IP 在我的 iPhone 应用程序中是硬编码的。显然，我将提交一个更新，将 API 端点设置为我的新服务器，但与此同时，我需要在旧服务器上设置一个应用程序，将所有请求重定向到新服务器。我听说 Sinatra 非常适合这个。

```
require 'sinatra'

get "/foo/bar" do
    redirect "http://new-server.com/foo/bar", 303
end

post "/foo/bar" do
    redirect "http://new-server.com/foo/bar", 303
end 
```

问题是这些不会随请求一起转发 GET 或 POST 参数。我在 Sinatra 文档上读到，您可以通过将它们直接放在 URL 中（适用于 GET 请求）或设置会话变量来做到这一点。

手动解析和格式化 GET 参数以将它们放回重定向 URL 是进行 GET 重定向的唯一方法吗？你应该如何转发 POST 参数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-20T10:36:46.937

对于 GET 请求，使用`request.fullpath`or `request.query_string`。对于 POST 请求，使用状态码 307，因此后续请求将是具有相同参数的 POST。

```
helpers do
  def new_url
    "http://new-server.com" + request.fullpath
  end
end

get "/foo/bar" do
  redirect new_url
end

post "/foo/bar" do
  redirect new_url, 307
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T20:01:05.190

我会重载中的`Hash`类`lib/overload_hash.rb`，如下所示：

```
class Hash
  def to_url_params
    elements = []
    keys.size.times do |i|
      elements << "#{keys[i]}=#{values[i]}"
    end
    elements.join('&')
  end
end 
```

**编辑（使用 net / http 的更好解决方案）**

放置一个`require "lib/overload_hash"`,`require "net/http"`并`require "uri"`在 下`require 'sinatra'`。下面的例子可以`GET`很容易地翻译成。

```
post '/foo/bar' do
  uri = URI.parse("http://example.com/search")
  response = Net::HTTP.post_form(uri, params.to_ur_params) 
  response
end 
```

# mysql - 使用 mysql select 语句遍历特定字符的位置

> ID：11920516
> 
> 赞同：0
> 
> 时间：2012-08-12T07:38:31.900
> 
> 标签：mysql

对不起标题。。

我的问题是如何使用 mysql select 语句获取 URL 的特定部分，例如 url

```
http://www.google.com/search?q=lpol&ie=utf-8&oe=utf-8&client=ubuntu&channel=fs 
```

和

```
http://www.google.com/search?q=query+to+count+specific+character&ie=utf-8&oe=utf-8&client=ubuntu&channel=fs#hl=fil&client=ubuntu&channel=fs&sa=X&ei=J1knUPu9GsiUiAe3xYB4&ved=0CEQQvwUoAQ&q=mysql+query+to+go+through+specific+character+position&spell=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=c4fd06cd155ee554&biw=1014&bih=424 
```

这两个是不同的 url，但它们的 url 中都有 google.com，所以我怎样才能得到 google.com，所以我可以使用 mysql select 语句将这 2 个 url 计数为 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:19:49.587

SUBSTRING_INDEX 函数应该可以工作

```
SELECT SUBSTRING_INDEX('http://www.mysql.com/abcd/asd/', '/', 3); -> 'www.mysql.com' 
```

将此与您拥有的列结合使用。

```
SELECT SUBSTRING_INDEX(column, '/', 3) FROM table; -> URLS without slashes 
```

我不太确定 3 可能是 2。

祝你好运。

# android - 服务生命周期

> ID：11920518
> 
> 赞同：0
> 
> 时间：2012-08-12T07:39:14.550
> 
> 标签：android

在我的活动中，我实施`onstop()`, `onstart()`,`onstart()`

我启动并绑定我的服务。我的服务扩展`IntentService` 了，所以`onStop()`我只是打电话`unbindService()`。

然后我进入设备的设置并打开运行选项卡-> 显示缓存的进程，我看到：

1.  当触摸返回键时。在显示缓存的进程中，我的服务仍然存在。
2.  当触摸主页键。在显示缓存的进程中，我的服务已经消失。

他们俩都打电话`onstop()`。

那么有人能告诉我为什么会有这样的2个案例吗？`Service`或者这是对和的生命周期的误解`Activity`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T21:54:53.490

我不能告诉你为什么会有 2 个这样的案例。但是，我可以告诉您，服务是否被 Android 操作系统缓存并不取决于您使用哪个按钮调用 onStop()。缓存进程的决定由操作系统决定，具体取决于服务需要多少内存以及您使用它的频率以及其他几个因素。

在这件事上引用谷歌的话：“它可能会缓存你最近在 RAM 中使用的进程，因此当你再次打开它们时它们会更快地重新启动，但如果它需要 RAM 进行新活动，它会清除缓存。” [1]

[1] - [http://support.google.com/mobile/bin/answer.py?hl=en&answer=168921](http://support.google.com/mobile/bin/answer.py?hl=en&answer=168921)

# python - Python绑定方法实例错误

> ID：11920520
> 
> 赞同：0
> 
> 时间：2012-08-12T07:39:29.700
> 
> 标签：python, methods, error-handling

我正在尝试在如下类中实现递归函数：

```
class R:
    def A(self):
        if flag:
             return self.value
        else:
             ret=0
             for c in childs:
                 ret += c.A()
             return ret
r = R()
print r.A() 
```

我收到消息：

```
<bound method R.A of <R.R instance at 0x7fa1c1487248>> 
```

我不是在寻找方法调用的字符串表示，我想打印递归计算的结果。

# php - 如何使用 PHP 从 Google 获取完整的联系信息？

> ID：11920525
> 
> 赞同：3
> 
> 时间：2012-08-12T07:40:25.847
> 
> 标签：php, api, oauth

我正在使用 Oauth 2.0 导入联系人，但我只得到电子邮件地址。有什么方法可以获取其他字段？另外，如何使用 Google API 创建联系人。只需要使用 PHP。

这是我的代码：

```
//setting parameters
$authcode= $_GET["code"];
$clientid='xxxxxxx';
$clientsecret='secret';
$redirecturi='validate.php';
$fields=array(
 'code'=>  urlencode($authcode),
 'client_id'=>  urlencode($clientid),
 'client_secret'=>  urlencode($clientsecret),
 'redirect_uri'=>  urlencode($redirecturi),
 'grant_type'=>  urlencode('authorization_code')
);
//url-ify the data for the POST
$fields_string='';
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
$fields_string=rtrim($fields_string,'&');
//open connection
$ch = curl_init();
//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL,'https://accounts.google.com/o/oauth2/token');
curl_setopt($ch,CURLOPT_POST,5);
curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);
// Set so curl_exec returns the result instead of outputting it.
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
//to trust any ssl certificates
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
//execute post
$result = curl_exec($ch);
//close connection
curl_close($ch);
//extracting access_token from response string
$response=  json_decode($result);
$accesstoken= $response->access_token;
//passing accesstoken to obtain contact details
$xmlresponse=  file_get_contents('https://www.google.com/m8/feeds/contacts/default     /full?oauth_token='.$accesstoken.'&max-results=5');
//reading xml using SimpleXML
 $xml=  new SimpleXMLElement($xmlresponse);
 $xml->registerXPathNamespace('gd', 'http://schemas.google.com/g/2005');
 $result = $xml->xpath('//gd:email');
 foreach ($result as $title) {
  $addrss=$title->attributes()->address;
  echo $addrss."<br><br>"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:30:13.810

好吧，如果您只是解析 XML，`gd:email`那么您肯定只会得到电子邮件地址。有关您还可以解析的元素的概述，请参阅[Contact kind 文档。](https://developers.google.com/gdata/docs/2.0/elements?hl=de#gdContactKind)

要创建联系人，您只需向同一端点发出带有正文中联系人详细信息的 POST 请求：

```
https://www.google.com/m8/feeds/contacts/default/full 
```

有关详细联系信息格式的详细文档，请参阅[API 文档](https://developers.google.com/google-apps/contacts/v3/#creating_contacts)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T14:49:56.343

[PHP GMAIL 联系人 XML 解析与 DOMDocument 和 cURL](https://stackoverflow.com/questions/6530050/php-gmail-contacts-xml-parsing-with-domdocument-and-curl)

Dnt 知道添加联系人，但上面的链接应该让你开始正确的方向，创建一个 DomDocument 类并将节点附加到它（php 手册）。我认为这将是要走的路，与 Google 联系人 API 保持一致

# c#-4.0 - 有没有办法使用 C# 4.0 批量发送 Telnet 命令？

> ID：11920528
> 
> 赞同：0
> 
> 时间：2012-08-12T07:40:49.547
> 
> 标签：c#-4.0, telnet

如果我想将数据批量发送到 telnet 服务器，我有什么选择。我正在使用 c# 和 .net 框架 4.0。

是否存在诸如以批处理模式将数据发送到 telnet 服务器之类的东西？在我向服务器发送命令后，我知道服务器会发生什么。

谢谢

# iphone - 当我在 iPhone 上使用 TFHpple 解析器 HTML 时，已经找到节点，但内容返回为 NULL？

> ID：11920530
> 
> 赞同：0
> 
> 时间：2012-08-12T07:41:03.880
> 
> 标签：iphone, ios, ipad

编码：

```
NSString *linkStr=@"http://www.voanews.com/content/obama_pledges_aid_to_drought_stricken_farmers/1484380.html";
NSData *data = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:linkStr]];

// Create parser  
TFHpple *xpathParser = [[TFHpple alloc] initWithHTMLData:data];  

//Get all the cells of the 2nd row of the 3rd table   
NSArray *elements  = [xpathParser searchWithXPathQuery:@"//p[@class='article_date']"];  

// Access the first cell  
if ([elements count] > 0) 
{
    TFHppleElement *element = [elements objectAtIndex:0];  

    // Get the text within the cell tag  
    NSString *content = [element content];    
    NSLog(@"VOA = %@",content);       //Result : print NULL
}

[xpathParser release];  
[data release]; 
```

但我使用 XPath Helper 查询 "//p[@class='article_date']" ，没关系，但在我的代码中内容为空

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:10:05.970

运行您的代码示例，如果我更改`[element content]`for `[element text]`，我的输出是：

> 美国之音 = 2012 年 8 月 11 日

[在其 Github repo](https://github.com/topfunky/hpple)中，他们提到（在**USAGE**部分）：

> [文本]；// HTML 元素内的文本（第一个文本节点的内容）

并查看它使用的**CONTENT**方法的源代码`objectForKey`，其中`TFHppleContentKey = "nodeContent"`. 看：

```
static NSString * const TFHppleNodeContentKey = @"nodeContent"

// Returns this tag's innerHTML content.
- (NSString *) content
{
    return [node objectForKey:TFHppleNodeContentKey];
} 
```

似乎在您的示例中`[element text]`使用它是安全的。`[element content]`

我希望它有所帮助。

# objective-c - 带有图像的 ScrollView - 在 touchesended 上更改选项卡不起作用

> ID：11920538
> 
> 赞同：-1
> 
> 时间：2012-08-12T07:43:11.977
> 
> 标签：objective-c, ios, uiscrollview, uitabview

在我的应用程序中，我有一个 UIScrollView，并且在其中我以编程方式创建了 UIImageViews。这是基于 Xcode 中的 Tab-bar 模板。我想要做的是在按下特定图像时更改选项卡，虽然我能够将事件注册为触摸，但更改 tabIndex 没有任何作用。键入以下代码：

```
 UITabBarController *tab=self.tabBarController;
        if (tab){
            NSLog(@"Good");
        }
        else {
            NSLog(@"No Good"); 
```

总是导致记录不合格。我写的代码可以在这里看到，我的 UIScrollView 是 ScrollViewer 类型：@implementation scrollViewer - (void) touchesEnded: (NSSet *) touches withEvent: (UIEvent *) event {

```
if (!self.dragging) {
    NSLog(@"Recieved Touch!");
    UITouch *aTouch = [touches anyObject];
    MainView *theInstance = [[MainView alloc] init];

     CGPoint point = [aTouch locationInView:self];
        theInstance.ycoord = point.y;
        [theInstance touchHand];
}
    [super touchesEnded: touches withEvent: event];
}

@end 
```

任何帮助表示感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T12:07:40.560

您从未向我们提供任何示例输出：

NSLog(@"Y坐标= %d",adjustedy);

但我会假设该值应该导致切换。

所以首先你需要记录 self.tabbarcontroller 以确保它不为零。如果没问题，系统可能不想让你在触摸事件中切换（无论如何这是不好的形式）。我会这样设置：

```
dispatch_async(dispatch_get_main_queue(), ^{ do code here } ); 
```

所以它稍后运行。

# java - java编译：类名与类名与文件扩展名

> ID：11920541
> 
> 赞同：0
> 
> 时间：2012-08-12T07:43:45.303
> 
> 标签：java

从命令行运行基本的 java 程序是一个 3 个步骤的过程：

1.  编写代码：

    公共类 HelloWorld { public static void main(String[] args) { System.out.println("Hello, World"); } }

2.  编译`javac HellWorld.java`将检查错误并生成`HelloWorld.class`文件。

3.  通过给出类名来运行代码 -->`java HelloWorld`

现在，我很想知道为什么：

`java HelloWorld`有效，但是当我们给出类文件的完整路径时，它会引发错误

```
$ java HelloWorld.class 
Error: Could not find or load main class HelloWorld.class 
```

如果我们只给出类名**与带有**文件扩展名的类名有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T07:47:43.303

> 如果我们只给出类名与带有文件扩展名的类名有什么区别？

您提供给`java`二进制文件的参数并不意味着是文件名。它应该是一个类名。因此，特别是，如果您尝试启动一个`Baz`在包中调用的类，`foo.bar`您将运行：

```
java foo.bar.Baz 
```

同样，如果您尝试运行`java HelloWorld.class`它，就好像您正在尝试运行一个`class`在 package中调用的类`HelloWorld`，这是不正确的。

基本上，您不应该将参数视为文件名 - 您应该将其视为完全限定的类名。哎呀，文件系统上甚至可能没有一个简单`Baz.class`的文件——它可能隐藏在一个 jar 文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T07:55:52.390

> 如果我们只给出类名与带有文件扩展名的类名有什么区别？

这是因为它就是这样。从 Java 1.0 开始， Sun / Oracle 就已经实现了`java`以这种方式工作的命令，更改它会造成巨大的破坏。

正如 Jon 所说，命令的参数是完全限定的类名，而不是文件名。事实上，同名的文件很可能`HelloWorld.class`不存在。它可能是 JAR 文件的成员……或者在某些情况下，几乎是任何东西。

* * *

*在 Java 11 及更高版本中，还可以使用单个命令*编译和运行单个 Java 源文件，如下所示：

```
java HelloWorld.java 
```

（这可能是因为 Oracle 不再支持没有 Java 字节码编译器的 Java 发行版。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-12T07:50:25.093

在 Java 编程语言中，源文件（.java 文件）被编译成（虚拟）机器可读的类文件，其扩展名为 .class。

编译后运行 java 类文件时，运行以下命令：

java HelloWorld

注意：需要设置java类路径

# wpf - 为 WPF/Prism 应用程序中的每个 ViewModel 实例化 IUnitOfWork

> ID：11920546
> 
> 赞同：0
> 
> 时间：2012-08-12T07:44:23.470
> 
> 标签：wpf, prism, unity-container, unit-of-work, lifetime

我有很多这样的存储库：

```
public class PersonRepository : IPersonRepository
{
    private readonly IUnitOfWork _unitOfWork;

    public PersonRepository(IUnitOfWork instance)
    {
        _unitOfWork = instance;
    }

    //Remove, Get methods...
    public void Add(Person p)
    {
        _unitOfWork.Context.People.Add(p);
    }
} 
```

和这样的工作单元：

```
public class UnitOfWork : IUnitOfWork, IDisposable
{
    public UnitOfWork(){ }

    private readonly HezarehContext _context = new HezarehContext();
    public HezarehContext Context
    {
        get
        {
            return _context;
        }
    }

    public int Save()
    {
        return _context.SaveChanges();
    }

    public void Initialize()
    {
        Context.Database.Initialize(false);
    }

    #region IDisposable Members

    public void Dispose()
    {
        _context.Dispose();
    }

    #endregion
} 
```

现在我希望每次我的 ViewModels 得到解决，一个新的`IUnitOfWork`实例化。我的大多数 ViewModel 都是这样的：

```
public class PeopleMainViewModel : NotificationObject
{
    // both of repositories must have same instance of IUnitOfWork
    private readonly IPersonRepository _personRepository = ServiceLocator.Current.GetService<IPersonRepository>();
    private readonly ICategoryRepository _categoryRepository = ServiceLocator.Current.GetService<ICategoryRepository>();

    public PeopleMainViewModel()
    {
        InitializeView();
    }

    // add, edit, remove commands ...
} 
```

ViewModels 总是使用 Unity Container 解决，如下所示：

```
Container.RegisterType<IPersonRepository, PersonRepository>();
// resolve in InjectionProperty...
Container.RegisterType<Object, PeopleMainView>("PeopleMainView", new InjectionProperty(PeopleMainView.DataContextProperty.Name, Container.Resolve<PeopleMainViewModel>(); 
```

我的问题是，**我如何**以及**在哪里**注册我`ViewModel`的 s 并为每个人提供实例`IUnitOfWork`？`IUnitOfWork`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T14:11:08.433

如果我理解您的问题，只需`IUnitOfWork`以您在上述示例中注册存储库的相同方式（和相同地点）进行注册。您不需要根据当前设计注册 ViewModel，因为您没有使用接口。

```
Container.RegisterType<IUnitOfWork, UnitOfWork>(); 
```

并继续让您的存储库接受`IUnitOfWork`构造函数中的 。`IUnitOfWork`这将允许 Unity 在每次解析存储库时使用构造函数注入来提供一个新实例。默认情况下，您每次都会获得一个新的实例`IUnitOfWork`。如果您想拥有一个单例`IUnitOfWork`，则必须在注册时`IUnitOfWork`这样说：

```
Container.RegisterType<IUnitOfWork, UnitOfWork>(new ContainerControlledLifetimeManager()); 
```

如果您想了解终身经理，您可以在[此处](http://msdn.microsoft.com/en-us/library/ff647854.aspx)进行。

我还建议更改您的 ViewModel 以将存储库作为构造函数参数，如果您要解析它们，就像这样（因此 Unity 将在您不`ServiceLocator`直接引用的情况下完成工作）

```
public PeopleMainViewModel(IPersonRepository personRepo, ICategoryRepository categoryRepo)
{
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:31:33.883

[更新：在 unity.codeplex 讨论中](http://unity.codeplex.com/discussions/391225)还有另一个解决方案。

我终于找到了解决方案。容器中有一个功能`Unity`可以让您在解析`Type`. 通过将 ViewModels 的构造函数更改为：

```
public class PeopleMainViewModel : NotificationObject
{
    private readonly IPersonRepository _personRepository = null;
    private readonly ICategoryRepository _categoryRepository = null;

    public PeopleMainViewModel(IUnityContainer container, IUnitOfWork unitOfWork)
    {
        // now both of repositories have same instance of IUnitOfWork
        _personRepository = container.Resolve<IPersonRepository>(new ParameterOverride("unitOfWork", unitOfWork));
        _categoryRepository = container.Resolve<ICategoryRepository>(new ParameterOverride("unitOfWork", unitOfWork));
        InitializeView();
    }

    // add, edit, remove commands ...
} 
```

问题解决了。现在`_personReposiotry`并`_categoryRepository`引用相同的 . 实例`unitOfWork`。

# jsf - 如何展开treeTable的所有节点？

> ID：11920547
> 
> 赞同：17
> 
> 时间：2012-08-12T07:44:37.653
> 
> 标签：jsf, primefaces, expand, treetable

我有一个树表和两个按钮：

*   一个用于折叠树和
*   另一个用于扩展，

但他们不工作。我在支持豆上做了`root.setExpanded(true);`，`root.setExpanded(false);`但它不起作用。

```
<center>
    <p:treeTable value="#{roleMB.root}" var="roleTreeTableVar"
        binding="#{roleMB.treeTable}" id="roleTreeTable">
        <f:facet name="header">
            <center>
                <p:commandButton value="RÃ©duire tout"
                    icon="ui-icon-folder-collapsed" style="font-size: 0.9em" 
                    actionListener="#{roleMB.expandAll}" 
                    update=":roleTreeTableForm:roleTreeTable"  />
                <p:spacer width="30px" />
                <p:commandButton value="DÃ©velopper tout"
                    icon="ui-icon-folder-open" style="font-size: 0.9em"  
                    actionListener="#{roleMB.collapseAll}" 
                    update=":roleTreeTableForm:roleTreeTable"  />
                <p:spacer width="30px" />
            </center>
        </f:facet>

        <p:column style="width:150px">
            <f:facet name="header"> 
                Nom de Role 
            </f:facet>
            <h:outputText value="#{roleTreeTableVar.nom}" />
        </p:column>

        <p:column style="width:100px">
            <f:facet name="header"> 
                Id de role 
            </f:facet>
            <h:outputText value="#{roleTreeTableVar.id}" />
        </p:column>

        <p:column style="width:20px">
            <p:commandLink oncomplete="dlgAddRole.show()" value="Ajouter"
                update=":addRoleForm:selectRolesNamesId">
                <f:setPropertyActionListener value="#{roleTreeTableVar}"
                    target="#{roleMB.selectedRole}" />
            </p:commandLink>
            <p:commandLink oncomplete="delRole.show()" value="Supprimer">
                <f:setPropertyActionListener value="#{roleTreeTableVar}"
                    target="#{roleMB.selectedRole}" />
            </p:commandLink>
            <p:commandLink oncomplete="editRole.show()" value="Modifier">
                <f:setPropertyActionListener value="#{roleTreeTableVar}"
                    target="#{roleMB.selectedRole}" />
            </p:commandLink>
        </p:column>
    </p:treeTable>
</center> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-11T14:35:03.153

这是折叠和展开的递归方法。

```
public void collapsingORexpanding(TreeNode n, boolean option) {
    if(n.getChildren().size() == 0) {
        n.setSelected(false);
    }
    else {
        for(TreeNode s: n.getChildren()) {
            collapsingORexpanding(s, option);
        }
        n.setExpanded(option);
        n.setSelected(false);
    }
} 
```

*   变量 n 是您想要展开或折叠的节点。
*   当变量选项为 false 时，n 的所有子节点都折叠，在另一种情况下，展开
*   setSelected(false) 表示该节点未被选中

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-14T16:04:00.687

您应该将该`expanded`属性设置为`true`不仅适用于根节点，还应该适用于所有子节点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-11T19:19:17.157

A possible solution might look this:

**view.xhtml**

```
<h:form id="form">
    ...
    <p:commandButton update=":form:tree" actionListener="#{view.collapseAll}"
            icon="fa fa-minus" title="#{msg.collapseAll}"/>                             
    <p:commandButton update=":form:tree" actionListener="#{view.expandAll}"
            icon="fa fa-plus" title="#{msg.expandAll}"/>
    ...
    <p:treeTable id="tree" ...>
    ...
    </p:treeTable>
    ...
</h:form> 
```

**View.java**

```
@Named
@ViewScoped
public class View implements Serializable {

    private TreeNode root;

    ...

    public void collapseAll() {
        setExpandedRecursively(root, false);
    }

    public void expandAll() {
        setExpandedRecursively(root, true);
    }

    private void setExpandedRecursively(final TreeNode node, final boolean expanded) {
        for (final TreeNode child : node.getChildren()) {
            setExpandedRecursively(child, expanded);
        }
        node.setExpanded(expanded);
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-03-15T10:38:57.673

问题是：“这怎么可能实现？” 在代码中...

```
public void reloadTree() {

    assocRoot = new DefaultTreeNode();
    assocRoot.setExpanded(true);

    TreeNode currentAssocNode;
    AbstractDocument parentAssoc = getParentDocAssociation();
    if(parentAssoc !=null) {
        TreeNode parentAssocNode = new DefaultTreeNode(parentAssoc);
        parentAssocNode.setExpanded(true);
.... 
```

# android - 如何确保程序长时间运行而不被系统关闭？

> ID：11920551
> 
> 赞同：0
> 
> 时间：2012-08-12T07:46:09.403
> 
> 标签：android

更具体地说，在我的应用程序中有记录器和加速度计在 2 个服务中运行以记录睡眠周期，我需要确保这 2 个组件整夜（例如 8 小时），我如何确保它们会不会被android系统本身杀死或关闭？虽然我怀疑它会不会，因为它们无论如何都不是内存/CPU密集型的，但以防万一这真的发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T07:49:54.143

没有官方方法可以让您做到这一点。

相反，您可以尝试卸载设备上的所有其他内容，并强制停止所有无法删除的内容。另外，将设备置​​于飞行模式。做这三个应该是确保您的设备不会出现资源短缺的好方法，因为它不会做太多其他事情。

但是，从加速度计记录数据 8 小时将*非常*消耗电池电量，并且您的电池可能会在 8 小时用完之前耗尽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T07:51:07.250

当您的服务关闭时，这将调用 ondestroy 方法。因此，请在 ondestroy 方法中进行工作以重新启动您的服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T17:01:33.873

您可以设置特定时间的警报管理器，比如每 30 分钟触发一次设备，然后检查您想要的服务是否正在运行

# smarty - 在 smarty 模板中获取价值

> ID：11920553
> 
> 赞同：0
> 
> 时间：2012-08-12T07:46:37.340
> 
> 标签：smarty

我有一个名为 .php 的 php 文件`testfun.php`。从数据库中获取值

```
<?php
$conn=mysql_connect("localhost","root","") or die("unabke to connect");
$db=mysql_select_db("smartyform",$conn) or die("databse error");

require 'Smarty/libs/Smarty.class.php';

$smarty = new Smarty;

$sel=mysql_query("select * from form"); 
while($row=mysql_fetch_array($sel))
{
$id=$row[0];
$name=$row[1];
}
$smarty->assign('id',$id);
$smarty->assign('name',$name);

$smarty->display('testfunction.tpl');
    ?> 
```

我有一个名为 .tpl 的文件`testfunction.tpl`。我在这个文件中得到输出

```
<body>

<ul>
{$id}
 :
 {$name}
</ul>

</body>
</html> 
```

当我运行时，`testfun.php`我得到了这个输出：

```
16 : dg 
```

但我想要像这样的输出：

```
1:d
d:g 
```

我应该怎么办 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:23:00.570

将数据存储在数组中。所以你必须在你的 tpl 中做一个 for 循环。

在你的 tpl 中会是这样的：

```
 <ul>
    {foreach from=$your_data item=item_value key=key}
            <li> { $key } : {$item_value}</li>
    {/foreach}
</ul> 
```

在你的 php 中这样做：

```
 require 'Smarty/libs/Smarty.class.php';

    $smarty = new Smarty;
    $your_row= array();
    $sel=mysql_query("select * from form"); 
    while($row=mysql_fetch_array($sel))
    {
       $your_row[]= $row;
    }
    $smarty->assign('your_data',$your_row);
    $smarty->display('testfunction.tpl');
 ?> 
```

查看此页面以获取更多详细信息： [http ://www.smarty.net/docsv2/en/language.function.foreach](http://www.smarty.net/docsv2/en/language.function.foreach)

希望对您有所帮助。

# jquery - Flexslider 没有完全显示最后一项

> ID：11920555
> 
> 赞同：4
> 
> 时间：2012-08-12T07:47:18.637
> 
> 标签：jquery, flexslider

我使用弹性滑块。我有一个幻灯片，一次显示 4 个项目。除最后一张外的每张幻灯片都正确显示。
最后一张幻灯片没有走完。我的意思是，在我到达最后一张幻灯片之前，我可以看到所有 4 个项目，但是当我到达最后一个项目时，我只能看到其中的一部分。

我的滑块容器很`900px`宽。

```
$('.flexslider').flexslider({
    animation: "slide",
    animationLoop: true,
    itemWidth: 225,
    controlNav: false,
    move: 1,
    slideshowSpeed: 4000,
    pauseOnHover: true
});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T14:18:28.483

这是 FlexSlider 2.1 的一个错误（[GitHub 问题](https://github.com/woothemes/FlexSlider/issues/286)）。[降级到 2.0](https://github.com/woothemes/FlexSlider/downloads)以解决问题，直到发布修复程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T12:44:14.460

我遇到了这个问题，因为我在幻灯片上有边距，并且我没有适当地设置 itemMargin 以便它进入滑块的计算。当我将 itemMargin 设置为 5px（我在 CSS 中的边距）时，最后一帧完全显示出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:59:50.700

这是 GitHub 上的相关问题：[https ://github.com/woothemes/FlexSlider/issues/286](https://github.com/woothemes/FlexSlider/issues/286)

# c# - SOAP UI 多请求

> ID：11920558
> 
> 赞同：0
> 
> 时间：2012-08-12T07:47:48.200
> 
> 标签：c#, .net, web-services, soapui

我是 SOAP UI 工具和 Web 服务的新手。我创建了一个方法名称`HelloWorld()`，并在 SOAP UI 工具中添加了 service?wsdl 链接。当我双击方法时，它向我展示了使用 HellowWorld 的方法，一个请求只发现我在这里需要的比使用 Webservice 的请求更多。

我能为此做些什么？

[http://desmond.imageshack.us/Himg152/scaled.php?server=152&filename=99746427.png&res=landing](http://desmond.imageshack.us/Himg152/scaled.php?server=152&filename=99746427.png&res=landing)

我找到了 Image 1 中的方法，想要 Image2 中的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:17:20.517

右键单击 Request 并选择 clone TestStep 或按 F9 然后单击 OK 按钮，您的请求被克隆

问候， sa.va3feb

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T09:03:24.653

只需右键单击该方法并选择*“新请求”*。

# php - PHP - 如何从字符串中提取数字？

> ID：11920565
> 
> 赞同：0
> 
> 时间：2012-08-12T07:49:07.917
> 
> 标签：php, regex

我在模式中有一个字符串，类似于：

`john.smith 9.5 9.49296 Active john.s@site.com +123456789`

我只想用 PHP 在“smith”旁边回显“9.5”。

**更新：**

抱歉，伙计们...刚刚注意到它是一个 xml 文件，在 safari 中无法正确查看，在 Firefox 中检查并显示为：

```
<GetUserInfo>
<Customer>john.smith</Customer>
<Balance>9.5</Balance>
<SpecificBalance>9.49296</SpecificBalance>
<Status>False</Status>
<EmailAddress>john.s@site.com</EmailAddress>
<Phone>+1234567890</Phone>
</GetUserInfo> 
```

现在回显“9.5”的php代码是什么

感谢您之前的回答...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T07:53:18.520

尝试在空格上拆分（似乎被那个分隔）

```
$parts = preg_split('/\s+/', $input);
print $parts[1]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T07:53:39.240

快速而可靠的方式

```
<?php
$string="john.smith 9.5 9.49296 Active john.s@site.com +123456789";
$array = explode(" ",$string);
echo $array[1];
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T07:53:52.143

```
$string="john.smith 9.5 9.49296 Active john.s@site.com +123456789";

$array=explode(" ",$string); 
```

那么您的号码将是：

```
echo $array[1]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T08:56:54.857

这将起作用

```
<?php
$string = "<GetUserInfo>
<Customer>john.smith</Customer>
<Balance>9.5</Balance>
<SpecificBalance>9.49296</SpecificBalance>
<Status>False</Status>
<EmailAddress>john.s@site.com</EmailAddress>
<Phone>+1234567890</Phone>
</GetUserInfo>";

$xml = simplexml_load_string($string);

echo  $xml->Balance;

?> 
```

# c++ - TrollTech 的 Qt 教程 Ch11 中令人困惑的源代码

> ID：11920570
> 
> 赞同：0
> 
> 时间：2012-08-12T07:49:36.980
> 
> 标签：c++, qt, qt4

这些天我正在从 TrollTech 的 Qt 教程中学习 Qt，我对计算[此页面](http://doc.qt.digia.com/4.2/tutorial-t11.html)中项目符号位置的源代码感到困惑：

```
QRect CannonField::shotRect() const
{
    const double gravity = 4;

    double time = timerCount / 20.0;
    double velocity = shootForce;
    double radians = shootAngle * 3.14159265 / 180;

    double velx = velocity * cos(radians);
    double vely = velocity * sin(radians);
    double x0 = (barrelRect.right() + 5) * cos(radians);
    double y0 = (barrelRect.right() + 5) * sin(radians);
    double x = x0 + velx * time;
    double y = y0 + vely * time - 0.5 * gravity * time * time;

    QRect result(0, 0, 6, 6);
    result.moveCenter(QPoint(qRound(x), height() - 1 - qRound(y)));
    return result;
} 
```

在倒数第三行：

```
result.moveCenter(QPoint(qRound(x), height() - 1 - qRound(y))); 
```

我认为那`- 1`是胡说八道，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T08:32:39.690

你有一个小部件：

![小部件](../Images/4273c237b2ad56f6fd4aabec6eb1e5f1.png)

如果小部件的高度是`height`，则`y == 0`线在小部件的顶部，底线有`y == height - 1`坐标。所以，如果你想在小部件的底线上显示一个点，你应该将它的`y`坐标设置为`height - 1`。

显然，他们使用小部件的底部作为地面，所以子弹只能在这个水平之上或之上。

# node.js - 无法使用“npm install”在 Node.js 中安装任何包

> ID：11920571
> 
> 赞同：49
> 
> 时间：2012-08-12T07:49:37.700
> 
> 标签：node.js, npm

我是 Node.js 的新手，我正在学习一些教程。出于某种原因，我无法安装任何新的节点模块。

我正在使用： **Mac OSX** 10.7.4 ， **Node v. 0.8.6**， **NPM v. 1.1.48**。

我运行 npm install X 并且总是得到一个

```
npm ERR! fetch failed https://registry.npmjs.org/-/X
npm ERR! Error: 404 Not Found 
```

当我真正去 npmjs 注册表时，我可以看到项目页面，但无论我点击哪个 tarball 链接，它总是一样的：

```
{
    "error": "not_found",
    "reason": "document not found"
} 
```

例如，我尝试通过运行*npm install fs来安装***fs**，我得到：

 *```
npm http GET https://registry.npmjs.org/fs
npm http 200 https://registry.npmjs.org/fs
npm http GET https://registry.npmjs.org/-/fs-0.0.0.tgz
npm http 404 https://registry.npmjs.org/-/fs-0.0.0.tgz
npm ERR! fetch failed https://registry.npmjs.org/-/fs-0.0.0.tgz
npm ERR! Error: 404 Not Found
npm ERR!     at null.<anonymous> (/usr/local/lib/node_modules/npm/lib/utils/fetch.js:47:16)
npm ERR!     at EventEmitter.emit (events.js:115:20)
npm ERR!     at WriteStream.flush (fs.js:1514:12)
npm ERR!     at fs.close (/usr/local/lib/node_modules/npm/node_modules/graceful-fs/graceful-fs.js:92:5)
npm ERR!     at Object.oncomplete (fs.js:297:15)
npm ERR! If you need help, you may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>

npm ERR! System Darwin 11.4.0
npm ERR! command "node" "/usr/local/bin/npm" "install" "fs"
npm ERR! cwd /Users/comocomo/Documents/workspace/nodeTest
npm ERR! node -v v0.8.6
npm ERR! npm -v 1.1.48
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /Users/comocomo/Documents/workspace/nodeTest/npm-debug.log
npm ERR! not ok code 0 
```

我尝试了 fs、fs-extra、express 和强大的，都给了我相同的 404 响应。我一定有什么问题，我很确定整个注册表没有损坏。

我使用的是旧注册表吗？我应该在我的配置文件中更改它吗？老实说，我宁愿不开始手动安装东西，我敢肯定这只是一个小配置问题。

谢谢！

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-09-09T00:10:59.730

我发现存在证书过期问题：

```
npm set registry https://registry.npmjs.org/ 
```

所以我把它设为 http，而不是 https :-

```
npm set registry http://registry.npmjs.org/ 
```

并且到目前为止没有任何问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-12T12:02:29.780

存储库没有关闭，看起来他们已经改变了托管文件的方式（我猜他们已经恢复了一些旧代码）：

现在您必须在 - 之前添加 /package-name/

例如：

```
http://registry.npmjs.org/-/npm-1.1.48.tgz
http://registry.npmjs.org/npm/-/npm-1.1.48.tgz 
```

有3种方法可以解决：

*   使用完整的镜像：
*   使用公共代理：

    `--registry http://165.225.128.50:8000`

*   托管本地代理：

    `https://github.com/hughsk/npm-quickfix`

> ```
> git clone https://github.com/hughsk/npm-quickfix.git
> cd npm-quickfix
> npm set registry http://localhost:8080/
> node index.js 
> ```

我个人会选择 3 号，并`npm set registry http://registry.npmjs.org/`在此问题解决后立即恢复。

请继续关注此处了解更多信息：[https ://github.com/isaacs/npm/issues/2694](https://github.com/isaacs/npm/issues/2694)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-12T11:23:46.753

Npm 存储库当前已关闭。请参阅npm github 上的问题[#2694](https://github.com/isaacs/npm/issues/2694)

**编辑**：
同时使用镜子：

```
 npm set registry http://ec2-46-137-149-160.eu-west-1.compute.amazonaws.com 
```

您可以稍后通过以下方式重置：

```
 npm set registry https://registry.npmjs.org/ 
```

[资源](https://gist.github.com/3331671)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-25T10:10:38.677

一旦检查您的代理是否允许访问 npm 命令，也可能由于代理设置而发生此错误。

它对我很有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-12T14:17:52.827

```
npm set registry http://85.10.209.91/ 
```

（此代理从 registry.npmjs.org 获取原始数据并操作 tarball url 以修复 tarball 文件结构问题）。

其他解决方案似乎有过时的版本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-29T18:15:52.867

如果您碰巧在**Windows**`npm install`上运行命令，请首先确保使用**管理权限**打开命令提示符。这就是为我解决问题的原因。

 ***** * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-06T10:11:01.460

检查安全设置下允许从以下位置下载的应用程序：

*   App Store 和其他确定的开发者

这是我最近面临的原因之一。*****

# c - 使用 __VA_ARGS__ 强制转换 MACRO 中传递的所有参数

> ID：11920577
> 
> 赞同：5
> 
> 时间：2012-08-12T07:50:28.850
> 
> 标签：c, c-preprocessor, variadic-macros

我有一个`FOO(...)`接收未知数量参数的宏。我想将所有这些参数转换为 uint。有没有办法实现它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-12T08:08:06.743

是的，使用这些实用宏，您可以将宏应用于每个参数（这些参数最多 8 个，但可以扩展更多）：

```
/* This counts the number of args */
#define NARGS_SEQ(_1,_2,_3,_4,_5,_6,_7,_8,N,...) N
#define NARGS(...) NARGS_SEQ(__VA_ARGS__, 8, 7, 6, 5, 4, 3, 2, 1)

/* This will let macros expand before concating them */
#define PRIMITIVE_CAT(x, y) x ## y
#define CAT(x, y) PRIMITIVE_CAT(x, y)

/* This will call a macro on each argument passed in */
#define APPLY(macro, ...) CAT(APPLY_, NARGS(__VA_ARGS__))(macro, __VA_ARGS__)
#define APPLY_1(m, x1) m(x1)
#define APPLY_2(m, x1, x2) m(x1), m(x2)
#define APPLY_3(m, x1, x2, x3) m(x1), m(x2), m(x3)
#define APPLY_4(m, x1, x2, x3, x4) m(x1), m(x2), m(x3), m(x4)
#define APPLY_5(m, x1, x2, x3, x4, x5) m(x1), m(x2), m(x3), m(x4), m(x5)
#define APPLY_6(m, x1, x2, x3, x4, x5, x6) m(x1), m(x2), m(x3), m(x4), m(x5), m(x6)
#define APPLY_7(m, x1, x2, x3, x4, x5, x6, x7) m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7)
#define APPLY_8(m, x1, x2, x3, x4, x5, x6, x7, x8) m(x1), m(x2), m(x3), m(x4), m(x5), m(x6), m(x7), m(x8) 
```

所以现在你的`FOO`宏可以这样定义：

```
#define FOO_EACH(x) (uint) x
#define FOO(...) APPLY(FOO_EACH, __VA_ARGS__) 
```

结果是：

```
FOO(x, y) // Expands to (uint) x, (uint) y 
```

# jquery - jquery 对象性质

> ID：11920580
> 
> 赞同：1
> 
> 时间：2012-08-12T07:50:49.370
> 
> 标签：jquery, object

我已经设法用 jquery 做了一些事情，但这个小细节却让我望而却步：我如何将下标运算符应用于 jquery 调用的结果，这似乎返回了该索引处的 dom 元素？Javascript 不支持运算符重载，所以我猜它实际上返回类型“数组”......但您也可以在这个数组上使用整个 jquery 方法，但查看源代码我只看到“切片”和'push' 添加到 Array.prototype...

一旦我知道了这个问题的答案，我可能在这个主题领域还有一些问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T07:55:04.653

您可以使用“数组样式”方括号语法访问*任何*JavaScript 对象的属性：

```
var someObj = {
        someProp : "test"
    };

alert(someObj["someProp"]);   // alerts "test" 
```

jQuery 只是确保从`$()`函数返回的对象具有对应于数字索引的`length`属性，以及比最高数字索引高 1 的属性。

```
someObj[0] = "test";
someObj[1] = "whatever";
someObj.length = 2; 
```

简单（非 jQuery）演示：http: [//jsfiddle.net/nnnnnn/pguDH/](http://jsfiddle.net/nnnnnn/pguDH/)

请注意，实际上对象属性名称始终是字符串。如果您提供一个数字，它将被转换为一个字符串。甚至“真实”的数组元素也可以用字符串访问：

```
someArray["1"]
// give same results as
someArray[1] 
```

# python - `chained` 函数调用的 Python 风格

> ID：11920583
> 
> 赞同：18
> 
> 时间：2012-08-12T07:51:07.880
> 
> 标签：python, styles

我们越来越多地使用链式函数调用：

```
value = get_row_data(original_parameters).refine_data(leval=3).transfer_to_style_c() 
```

它可以很长。为了节省代码中的长行，首选哪个？

```
value = get_row_data(
    original_parameters).refine_data(
    leval=3).transfer_to_style_c() 
```

或者：

```
value = get_row_data(original_parameters)\
       .refine_data(leval=3)\
       .transfer_to_style_c() 
```

我觉得使用反斜杠很好`\`，然后`.function`换行。这使得每个函数调用都有自己的行，易于阅读。但这听起来不是很多人喜欢的。当代码出现细微的错误时，当很难调试时，我总是开始担心它可能是`backslash (\)`.

引用`Python`样式指南：

> 通过将表达式括在括号中，可以将长行分成多行。这些应该优先使用反斜杠来继续行。确保适当缩进续行。打破二元运算符的首选位置是在运算符之后，而不是在它之前。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-12T08:12:49.703

由于左括号，我倾向于使用以下内容，它避开了[不推荐的内容：](http://www.python.org/dev/peps/pep-0008/#maximum-line-length) `\`

```
value = (get_row_data(original_parameters)
         .refine_data(level=3)
         .transfer_to_style_c()) 
```

这种语法的一个优点是每个方法调用都在自己的行上。

类似的`\`-less 结构通常也适用于字符串文字，因此它们不会超出建议的每行 79 个字符的限制：

```
message = ("This is a very long"
           " one-line message put on many"
           " source lines.") 
```

这是*单个*字符串文字，由 Python 解释器高效创建（这比对字符串求和要好得多，后者在内存中创建多个字符串并多次复制它们，直到获得最终字符串）。

Python 的代码格式*很好*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T08:08:55.130

这个选项怎么样：

```
value = get_row_data(original_parameters,
            ).refine_data(leval=3,
                ).transfer_to_style_c() 
```

请注意，如果没有其他参数，逗号是多余的，但我保留它们以保持一致性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T08:21:21.787

不引用我自己的偏好（尽管请参阅您的问题的评论:)）或替代答案是：

坚持你已经拥有的任何项目的风格指南——如果没有说明，那么尽可能与风格的其余代码库保持一致。

否则，选择一种你喜欢的风格并坚持下去 - 并让其他人知道，如果在一行上不能合理地阅读（或者你希望描述它），你会喜欢这样编写链式函数调用。

# cocoa - 读取时改变数组，而不是枚举

> ID：11920584
> 
> 赞同：1
> 
> 时间：2012-08-12T07:51:36.133
> 
> 标签：cocoa, concurrency, grand-central-dispatch

如果我有两个不同的线程通过 GCD 访问一个`NSMutableArray`并且一个只是基于可变数组创建一个新数组，而另一个线程正在从数组中删除记录，我应该期望这是一个问题吗？也就是说，我认为只是“读取”数组的副本不应该只是得到当时数组中发生的任何事情吗？我没有在任一线程中枚举数组，但它仍然崩溃。一旦我删除了读取例程，它就可以正常工作。

这是“阅读”：

```
 dispatch_async(saveQueue, ^{

    NSDictionary*tempstocks=[NSDictionary dictionaryWithDictionary:self.data]; 
```

它在此线程上崩溃：`*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSPlaceholderDictionary initWithObjects:forKeys:count:]: attempt to insert nil object from objects[9]'`

这是另一个线程上发生的事情：

```
[self.data removeObjectForKey:item]; 
```

我知道你不能在枚举时进行变异，但我认为在变异时阅读是可以的，你可能不知道你得到哪个版本的变异对象，但我不认为这是一个问题，但显然它是. 也许该`dictionaryWithDictionary`方法正在执行一个首先看到 X 对象的操作，但是当例程完成时，它包含 XY 对象，因此它不会`self.data`在运行时立即“捕获”整个字典，`dictionaryWithDictionary`而是枚举`self.data`本质上是枚举时与突变相同的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T09:20:51.147

我猜您可能会使用 GCD 创建三个不同的队列：一个用于保存，第二个用于其他操作，最后一个用于操作`NSMutableArray`。

```
dispatch_async(saveQueue, ^{
    dispatch_barrier_async(_queue, ^{
            NSDictionary*tempstocks=[NSDictionary dictionaryWithDictionary:self.data];
        });
});

dispatch_async(anotherQueue, ^{
    dispatch_barrier_async(_queue, ^{
            [self.data removeObjectForKey:item];
        });
}); 
```

这就像`@synchronize`但使用 GCD。

更多信息：[GCD 参考/dispatch_barrier_async](https://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/c/func/dispatch_barrier_async)和[http://www.mikeash.com/pyblog/friday-qa-2011-10-14-whats-new-in-gcd.html](http://www.mikeash.com/pyblog/friday-qa-2011-10-14-whats-new-in-gcd.html)

**编辑**

为了了解哪种方式更快，我进行了一些性能测试：

```
- (void)usingSynchronized
{
    dispatch_queue_t writeQyeue = dispatch_queue_create("com.tikhop.writeQyeue", DISPATCH_QUEUE_CONCURRENT);
    dispatch_sync(writeQyeue, ^{
        for(size_t i=0; i<10000; i++)
            @synchronized (arr) {
                [arr replaceObjectAtIndex:0 withObject:[NSNumber numberWithInt:1]];
                [arr replaceObjectAtIndex:0 withObject:[NSNumber numberWithInt:2]];
                [arr replaceObjectAtIndex:0 withObject:[NSNumber numberWithInt:3]];
                [arr replaceObjectAtIndex:0 withObject:[NSNumber numberWithInt:4]];
            }
    });
}

- (void)usingGCD
{
    dispatch_queue_t writeQyeue = dispatch_queue_create("com.tikhop.writeQyeue", DISPATCH_QUEUE_CONCURRENT);
    dispatch_sync(writeQyeue, ^{
        for(size_t i=0; i<10000; i++)
            dispatch_barrier_async(_queue, ^{
                [arr replaceObjectAtIndex:0 withObject:[NSNumber numberWithInt:5]];
                [arr replaceObjectAtIndex:0 withObject:[NSNumber numberWithInt:6]];
                [arr replaceObjectAtIndex:0 withObject:[NSNumber numberWithInt:7]];
                [arr replaceObjectAtIndex:0 withObject:[NSNumber numberWithInt:8]];
            });
    });
}

arr = [NSMutableArray arrayWithCapacity:1];
[arr addObject:@(0)];

[self usingSynchronized];
[self usingGCD]; 
```

我得到以下结果： ![在此处输入图像描述](../Images/41fa41e2ea4d244132d1341b3e4c893e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T09:13:27.393

您不能假设 NSDictionary 上的任何操作都是线程安全的。几乎所有的人都不是。您确实需要设置互斥体，`@synchronize`访问您的阵列或使用 gcd 串行队列进行访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T09:28:58.653

dictionaryWithDictionary: 在内部枚举参数，所以你在枚举时基本上是在变异。

此外，一般来说，如果另一个线程将以任何方式访问一个对象，除非您使用某种同步原语，否则您永远不应该写入该对象。

您认为它“读取”目前存在的任何东西的推理通常是无效的。这是有关多线程中固有问题的更多信息[编译器在多线程程序中使用寄存器](https://stackoverflow.com/questions/11904156/usage-of-registers-by-the-compiler-in-multithreaded-program/11904534#11904534)

# c# - 当拆分字符出现时，仅每三次拆分一个数组

> ID：11920585
> 
> 赞同：3
> 
> 时间：2012-08-12T07:51:43.357
> 
> 标签：c#, split

我的服务器上有一个 php 文件，它以这样的字符串将信息发送到我的应用程序（c#）：

Text|Name|Date|Text|Name|Date|Text|Name|Date|......现在我想拆分它，这样我可以用 Text、Name 和 Date 填充 ListViewerItem，这是下一个组合三（文本，名称，日期）应该进入一个新的 ListViewerItem。如何在“|”处仅每三次拆分一次字符串 ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T07:58:55.477

只需拆分管道符号并循环取 3：

```
public void Foo(string content)
{
    var entries = content.Split('|');

    for(int i = 0; i < entries.Length; i += 3)
    {
        var text = entries[0 + i];
        var name = entries[1 + i];
        var date = entries[2 + i];

        // TODO: add values to listview.
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T07:58:48.333

拆分字符串，然后对字符串进行分组：

```
string[] values = data.Split('|');
List<string[]> lines =
  Enumerable.Range(0, values.Length / 3)
  .Select(
    i => new string[] { values[i * 3], values[i * 3 + 1], values[i * 3 + 2] }
  )
  .ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T07:59:14.040

我假设文本、名称、日期实际上是值，所以唯一常见的分隔符是 |。我认为最好的方法是将字符串拆分为 | 然后循环生成的数组。保留一个计数器，每隔三个项目创建一个具有文本、名称和日期属性的对象。然后将此对象添加到列表中，然后绑定到 ListViewer。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T10:35:17.997

```
var values = "a|b|c|a|b|c|a|b|c|a|b|c|a|b|c|a|b|c|a|b|c|a|b|c".Split('|');
var result = Enumerable.Range(0, values.Length).GroupBy(i => Convert.ToInt32(Math.Floor((i / 3d)))).Select(group => String.Join("|", group.Select(i => values[i]))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T10:37:32.777

使用`Regex`和`LINQ`：

```
var result = from Match match 
               in Regex.Matches(inputString, @"((?<t>\w+)\|(?<n>\w+)\|(?<d>\w+))+")
                select
                    new
                        {
                            Text = match.Groups["t"].Value,
                            Name = match.Groups["n"].Value,
                            Date = match.Groups["d"].Value
                        }; 
```

# java - 简单的除法运算返回零？

> ID：11920588
> 
> 赞同：-2
> 
> 时间：2012-08-12T07:52:09.927
> 
> 标签：java

我错过了什么？

```
float stepSize = 0.0f;
int activeCircleRadius = 10;
int numSteps = 24;

AiLog.v("init activeCircleRadius " + activeCircleRadius + " numSteps "
                + numSteps);
stepSize = activeCircleRadius / numSteps;
AiLog.v("stepSize is " + stepSize); 
```

操作后日志中的 stepSize 始终为零。它与将浮点数除以整数有关吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-12T07:55:53.217

这里两个变量都是整数，所以你正在执行整数除法：

```
activeCircleRadius / numSteps 
```

整数除法的结果是一个整数。结果被截断。

要解决此问题，请将一个（或两个）变量的类型更改为 a `float`：

```
float stepSize = 0.0f;
float activeCircleRadius = 10; 
```

或者在除法表达式中添加一个强制转换：

```
stepSize = (float)activeCircleRadius / numSteps; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T07:56:52.203

不要进行整数除法

```
stepSize = activeCircleRadius / (float)numSteps; 
```

总之：是的，因为您将 activeCircleRadius 除以一个整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T07:53:26.777

```
 With all arithmetic operators in Java, the result has the type of the largest operator. For instance: 
- float operator long => float 
- int operator int => int 
- int operator long => long 

float stepSize = 0f;
        float activeCircleRadius = (float) 10.0;
        int numSteps = 24;
        stepSize = activeCircleRadius / numSteps; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T08:01:13.967

整数除法将结果为 0。它的 10/24 而不是 10.0/24.0。您需要将一个变量设置为 double 或 float 以获得非零答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T07:57:06.867

您正在进行整数除法，因此您的答案中不会有任何小数位。尝试改变：

```
stepSize = activeCircleRadius / numSteps; 
```

到

```
stepSize = activeCircleRadius / (float)numSteps; 
```

# javascript - 使用数组的 Javascript 打字机效果

> ID：11920590
> 
> 赞同：1
> 
> 时间：2012-08-12T07:52:12.000
> 
> 标签：javascript, arrays, timer

我正在尝试使用数组在 javascript 中制作打字机效果。起初我在数组中硬编码了一个字符串，效果正常。后来，我尝试对用户输入做同样的事情，但它不起作用。

**这是硬编码的版本：**

```
<html>
<head>
<script type="text/javascript">
var arr=new Array()
var start=0;
var end=start + 1;
arr[0]="Hello";
function write()
{
    setTimeout(function() {
        document.body.innerHTML=document.body.innerHTML + arr[0].slice(start,end);
        start++;
        end=start + 1;
        if (start < 5) {
            write();
        }
    }, 500);
}
onload=write();
</script>
</head>
<body>
</body>
</html> 
```

**这是我试图获取用户输入的版本：**

```
<html>
<head>
<script type="text/javascript">
var arr=new Array()
var start=0;
var end=start + 1;
arr[0]=document.getElementById('word').innerHTML;
function write()
{
    setTimeout(function() {
        document.body.innerHTML=document.body.innerHTML + arr[0].slice(start,end);
        start++;
        end=start + 1;
        if (start < 5) {
            write();
        }
    }, 500);
}
</script>
</head>
<body>
<input type="text" value="Hello World" id="word">
<br>
<a href="javascript:write()">Click</a>
</body>
</html> 
```

请告诉我应该在我的编码中进行哪些更改，以便具有用户输入的版本正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T07:55:14.543

使用该`value`属性而不是`innerHTML`：

```
arr[0]=document.getElementById('word').value; 
```

并将其放在`write`函数中，以便在单击链接时获取值，而不是在元素甚至存在之前获取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T08:12:05.630

```
<html>
<head>
<script type="text/javascript">
var arr=new Array()
var start=0;
var end=start + 1;
arr[0]="Hello";
function write()
{
    setTimeout(function() {
        //document.body.innerHTML=document.body.innerHTML + arr[0].slice(start,end);
        document.getElementById("word").value=document.getElementById("word").value + arr[0].slice(start,end);
        start++;
        end=start + 1;
        if (start < 5) {
            write();
        }
    }, 500);
}
onload=write();
</script>
</head>
<body>
<input type="text" value="" id="word">
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T10:10:41.810

简而言之：通常 - 获取输入的当前值（包括select、textarea、radio等）从属性值中获取，innerHTML从其他获取。

无需使用数组 :) 你可以少写很多，但效果相同。

```
// `str` is the string to write to on `target` element.
function write(str, target){

  var attr = ~"input,textarea".indexOf( target.tagName.toLowerCase() )? 'value' : 'innerHTML',
  //attr - element attribute which contains its value/html
  //if it isn't a input or textarea `attr` should be innerHTML;

  start=0,
  interval = setInterval(function() {
        target[attr] += str.substr(start++,1); //get one character starting from `start` 
        if( start >= str){
            clearInterval( interval );
        }
    }, 500);
  target[attr]  = ''; //clear the current text on target element.
};
write('hello', document.getElementById('word') ); 
//  write('hello', document.body ); 
```

# php - 当我们使用类命名空间调用 use 时，Symfony 如何包含类？

> ID：11920591
> 
> 赞同：0
> 
> 时间：2012-08-12T07:52:15.347
> 
> 标签：php, symfony

当我们把`use some_namespace`. 它是否需要在之前的某个地方包含该文件，或者它在我们调用该`use`语句时执行它 - 例如，我有我的文件`product.php`：

```
namespace Facebook\Bundle\FacebookBundle\Domain;

class Product{
    //some codes
} 
```

然后在默认控制器中

```
use Facebook\Bundle\FacebookBundle\Domain\Product; 
```

该`use`语句是否找到文件并包含它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T08:27:48.450

Symfony2 使用标准[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)。简而言之：它定义了类名必须如何映射到文件系统路径。例如，在您的示例中：

```
use Facebook\Bundle\FacebookBundle\Domain\Product;
//loaded from /path/to/project/Facebook\Bundle\FacebookBundle\Domain\Product.php 
```

在幕后 Symfony 有一个自动加载器——当你尝试使用一个尚未定义的类时，它会将类名转换为路径并包含它，因此你不需要向您的文件的顶部。

# primefaces - 使用带有图像的 fileDownload

> ID：11920596
> 
> 赞同：0
> 
> 时间：2012-08-12T07:53:12.623
> 
> 标签：primefaces, download, graphicimage

我正在使用这段代码：

```
<p:commandLink id="downloadLink" value="Download" ajax="false">                          
<p:fileDownload value="#{supplierFileController.fileroute()}" />                      
</p:commandLink> 
```

效果很好。唯一的事情是我显示了一个正常的链接。我想将它与图像一起使用。像这样的东西：

```
<h:commandLink action="#{supplierFileController.destroy}">
<h:graphicImage title="Delete"   value="/image/image.png"/>                                               
</h:commandLink> 
```

我尝试了一些组合，但我无法使其发挥作用。

提前致谢。问候，丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:18:00.977

你可以使用这样的东西

```
<p:commandLink id="downloadLink" value="Download" ajax="false" styleClass="ui-icon ui-icon-trash"> 
```

这里是所有可用 jquery 图标的列表

[jQueryUI Icons Cheatsheet N#1](http://jquery-ui.googlecode.com/svn/tags/1.6rc5/tests/static/icons.html)（点击`Toggle text`获取所有图标名称）

[jQueryUI 图标备忘单 N#2](http://www.petefreitag.com/cheatsheets/jqueryui-icons/)

第二种选择是

```
<p:commandLink 
   styleClass="myDeleteBtnClass"
   id="downloadLink" value="Download" ajax="false"
</p:commandLink> 
```

试试这门课

```
.myDeleteBtnClass{ background-image: url('../resources/image/someImage.png'); } 
```

第三个选项是

```
<h:commandLink action="#{supplierFileController.destroy}">
    <h:graphicImage name="images/image.png" />
</h:commandLink> 
```

请注意，`images`文件夹应该位于`WebContent\resources` （看看这个[资源（库）在 JSF 2.0 中](http://www.mkyong.com/jsf2/resources-library-in-jsf-2-0/)）

# java - Java 系统代理属性范围

> ID：11920598
> 
> 赞同：0
> 
> 时间：2012-08-12T07:53:20.333
> 
> 标签：java

在java程序中，我想用System.setProperty(String, String)方法来改变socksProxyHost和socksProxyPort，但是如果我改变系统属性，会不会在计算机系统中永远改变？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T07:55:19.130

不，它只会影响 JVM 和当前执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T08:02:57.567

系统属性：在 J2SE 1.4 之前，系统属性是在 Java 网络 API 中为任何协议处理程序设置代理服务器的唯一方法。更复杂的是，这些属性的名称已从一个版本更改为另一个版本，其中一些现在已过时，即使出于兼容性考虑仍支持它们。

使用系统属性的主要限制是它们是“全有或全无”的开关。这意味着一旦为特定协议设置了代理，它将影响该协议的所有连接。这是一种虚拟机范围的行为。

设置系统属性有两种主要方法：

作为使用 System.setProperty(String, String) 方法调用 VM 时的命令行选项，当然前提是您有权这样做。

# vb.net - 如何使列表框中的某些行不可编辑

> ID：11920606
> 
> 赞同：0
> 
> 时间：2012-08-12T07:54:00.503
> 
> 标签：vb.net

我的项目中有一个编辑按钮，它允许我编辑列表框中的行，但是我不想编辑某些行，我怎样才能做到这一点。

我想让第 4、9、14、19、24、29、34、39、44、49、54、59、64、69、74、79、84、89、94、99 行不可编辑。

我希望 applicationdate 行不可编辑，有没有办法可以使该行代码不可编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:00:23.810

处理[`SelectedIndexChanged`事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selectedindexchanged.aspx)。每次`ListBox`控件中的项目选择发生更改时都会引发此事件。

在此事件的事件处理程序方法中，检查当前选定项的索引。如果您希望允许对其进行编辑，请启用“编辑”按钮。否则，禁用编辑按钮。

例如：

```
Private Sub myListBox_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs) Handles myListBox.SelectedIndexChanged
    ' Only allow editing of items with an odd-numbered index.
    ' (This isn't very useful, just a demonstration. You can use any criteria you
    '  want to determine whether editing should be allowed for the current item.)
    btnEdit.Enabled = myListBox.SelectedIndex Mod 2
End Sub 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-12T09:07:20.140

```
Private Sub myListBox_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs) Handles myListBox.SelectedIndexChanged
    ' Only allow editing of items with an odd-numbered index.
    ' (This isn't very useful, just a demonstration. You can use any criteria you
    '  want to determine whether editing should be allowed for the current item.)
    Dim unedit() as integer={4, 9, 14, 19, 24, 29, 34, 39, 44, 49, 54, 59, 64, 69, 74, 79, 84, 89, 94, 99}
    dim i as integer
    for i = 0 unedit.count-1
    if myListBox.SelectedIndex=unedit(i) then
       btnEdit.Enabled = false
       exit for
    end if
End Sub 
```

# python - Python 从 3d 图像中获取文本

> ID：11920613
> 
> 赞同：-1
> 
> 时间：2012-08-12T07:55:12.827
> 
> 标签：python

我有一个 3d 图像。我想提取写在图像上的文本。我使用 matplotlib 进行了尝试，但该库仅用于绘制图像，而不用于从图像中提取文本。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:40:32.013

你试过[pytesser](http://code.google.com/p/pytesser/)或[ocropus 吗](http://code.google.com/p/ocropus/)？它们是非常有效的光学字符识别工具。

# django - 查询一个多对多字段django

> ID：11920617
> 
> 赞同：0
> 
> 时间：2012-08-12T07:55:22.627
> 
> 标签：django, many-to-many

我有一个多对多字段的模型，如下所示：

```
class BillingMonth(models.Model):
    month = models.IntegerField(min=1, max=12)

class BillingCycle(models.Model):
    description = models.CharField()
    months_billed = models.ManyToManyField(BillingMonth) 
```

每个 BillingCycle（每月、每季度等）将在一个或多个月内计费。租赁设备模型如下所示：

```
class RentalEquipment(models.Model):
    description = models.CharField()
    billing_cycle = models.ForeignKey(BillingCycle) 
```

如何找到应在给定月份计费的所有 RentalEquipment？这似乎不起作用：

```
billing_month = BillingMonth(month=8)
RentalEquipment.objects.filter(billing_cycle__months_billed=billing_month) 
```

或者，对于 BillingCycle 模型来说，ManyToMany 关系是否过大？有没有更好的方法来包含日期数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:05:57.190

看起来我可以像这样分解查询：

```
billing_month = BillingMonth(month=8)
billing_cycles = Billing_cycle.objects.filter(months_billed=billing_month)
equipment_needing_billing = RentalEquipment.objects.filter(billing_cycle__in=billing_cycles) 
```

# html - 使用画布获取有关多个不同图像的多个图像数据

> ID：11920620
> 
> 赞同：0
> 
> 时间：2012-08-12T07:55:42.953
> 
> 标签：html, canvas

我想在画布中绘制一些图像并使用 for 循环获取它们的数据......我将图像对象放在数组中，并且数据也应该在数组中。这是代码。

如果我想获取几个图像数据的数组，我该怎么办？

```
window.onload = function(){
 var canvas = document.getElementById("Canvas");
 var context = canvas.getContext('2d');
 for(var i = 0; i < 10; i++)
 {
  imgObj[i]= new Image();
  imgObj[i].onload = function()
  {
   context.drawImage(imgObj[i], 0, 0);
   var imagedata1 = context.getImageData(0,0,742, 274);
   data[i] = imagedata1.data;
  };
  imgObj[i].src = "/img"+i+".bmp";
 }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:16:29.450

“getImageData() 方法返回一个 ImageData 对象，该对象复制画布上指定矩形的像素数据。

提示：ImageData 对象不是图片，它指定画布上的一个部分（矩形），并保存该矩形内每个像素的信息。”（来源：[http](http://www.w3schools.com/html5/canvas_getimagedata.asp) ://www.w3schools.com/html5/canvas_getimagedata.asp )

因此尝试将图片一张一张地添加到画布中，每次都取回与图片的位置和大小对应的图片数据矩形；

[http://s11.postimage.org/aszz0oxc3/canvas.png](http://s11.postimage.org/aszz0oxc3/canvas.png)

在第 2 步中，您检索绿色图像的图像数据，在第 3 步中，您检索蓝色图像的图像数据，即使您仍然有绿色图像，您也要执行此操作。

因此，这是您需要更换的：

```
imagedata[i] = context.getImageData(image[i].x,image[i].y,image[i].width, image[i].height); 
```

这需要在画布上添加每个图像后完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T09:21:32.397

你应该在画布中添加监听器：

```
function eventShipLoaded() {

            ctx.drawImage(img, 50, 50, 118,100);    //draw image in canvas  

            ctx.drawImage(img, 487, 180, 118,100);      
        }
window.addEventListener('load', eventShipLoaded , false);
var img = new Image();
        img.addEventListener('load', eventShipLoaded , false);
        img.src = "pic.jpg"; 
```

# asp.net - Asp.Net从登录页面重定向到另一个页面dosent工作

> ID：11920624
> 
> 赞同：1
> 
> 时间：2012-08-12T07:56:08.503
> 
> 标签：asp.net, redirect, login

我正在使用 asp.net。我有一个登录页面。我在登录页面中使用了这个控件：

```
 <asp:HyperLink runat="server" ID="forgotPassword" Text="Forgot Password" 
       NavigateUrl="~/Account/PasswordRecovery.aspx" >Forgot Password</asp:HyperLink> 
```

当我单击此链接时，我发现自己被重定向回登录页面。浏览器地址栏中的地址是这样的：

```
/Account/Login.aspx?ReturnUrl=%2fAccount%2fPasswordRecovery.aspx 
```

它与 PasswordRecovery 页面无关。任何其他页面都不能正常工作，即使是一个没有任何内容或后面代码的新页面。

唯一有效的页面是 About.apsx，它在创建时自动位于项目中。

我尝试寻找关于页面的某种空间权限，但在 Web.Config 中找不到任何内容。

请帮助我，这东西真的很奇怪，我无法解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T08:02:29.223

您需要允许包括访客在内的所有用户访问此页面。为此，最简单的方法是创建一个新文件夹（例如“Public”）并将此页面或其他需要相同访问权限的页面放在那里。在此文件夹中添加带有以下代码的 web.config：

```
<configuration>
    <system.web>
        <authorization>
            <allow users="*"/>
        </authorization>
    </system.web>
</configuration> 
```

如果您不想更改页面位置，可以使用“位置”标签：

```
<configuration>
    <system.web>
      <!-- regular configuration -->
    </system.web>
    <location path="Account/PasswordRecovery.aspx">
        <system.web>
            <authorization>
                <allow users="*"/>
            </authorization>
        </system.web>
    </location>
</configuration> 
```

# php - PHP图像和链接转换器功能

> ID：11920629
> 
> 赞同：0
> 
> 时间：2012-08-12T07:57:02.763
> 
> 标签：php

我对 PHP 比较陌生，我需要一个将所有 URL 转换为可点击链接的函数，以及将任何具有图像扩展名（即 jpg、png、gif）的 URL 转换为图像的函数。

所以到目前为止我所拥有的是

```
 function linkandimage($str) {
     $return = preg_replace('@(https?://([-\w\.]+[-\w])+(:\d+)?(/([\w/_\.#-]*(\?\S+)?[^\.\s])?)?)@', '<a href="$1" target="_blank">$1</a>', $str);
   return $return;
    } 
```

这可以通过链接找到，但我还没有得到图像的解决方案。任何帮助都会很棒，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:00:47.087

好吧，你有一半。只需在正则表达式中添加另一个组件即可搜索图像：

```
function linkandimage($str) {
  $return = preg_replace('@(https?://([-\w\.]+[-\w])+(:\d+)?(/([\w/_\.#-]*(\?\S+)?[^\.\s])?)?\.(gif|png|jpe?g))@', '<img src="$1" />', $str);
  $return = preg_replace('@(https?://([-\w\.]+[-\w])+(:\d+)?(/([\w/_\.#-]*(\?\S+)?[^\.\s])?)?)@', '<a href="$1" target="_blank">$1</a>', $return);

  return $return;
} 
```

# iphone - 如何使用 StoryBoard 在 iOS 中添加水平线？

> ID：11920631
> 
> 赞同：17
> 
> 时间：2012-08-12T07:57:15.120
> 
> 标签：iphone, ios, ios5, uiview, uiviewcontroller

在我的应用程序中，我试图在两个标签之间创建一条定制/时尚的水平线。我在 SO 和 Google 中搜索过，但它只有代码。如何使用故事板添加水平线？

在**Android**中，我使用 XML 设计了以下行。

![在此处输入图像描述](../Images/9cb2f84db55dba793195426171bd5bd3.png)

如何在**iOS**中创建同一行？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-12T08:12:19.927

你只有两个选择：

*   拍摄具有适当渐变的图像并插入图像视图
*   让自己成为一个视图类，用渐变填充它的视图（通过代码）

就是这样

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-12T08:17:04.270

在 Storyboard 中，如果您不想要代码。我推荐以下流程。

> 1.  使用绘图工具（关于illustrator、photoshop）画一条线，然后保存为png。
>     
>     
> 2.  制作 UIImageView 您的 Storyboard 并将图像设置为您的 png 文件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-08-17T10:23:55.473

使用“视图”并将其高度设置为 1 或您想要的任何大小，并更改背景颜色。

# ruby-on-rails - 在 Refinery CMS 中覆盖 WYSIWYG 编辑器文件

> ID：11920637
> 
> 赞同：1
> 
> 时间：2012-08-12T07:57:44.190
> 
> 标签：ruby-on-rails, ruby, refinerycms

我正在尝试覆盖该`validator.js.erb`文件。我首先运行 rake 任务。

```
rake refinery:override javascript=wymeditor/validators 
```

这在目录中创建了`validators.js.erb`文件`app/assets/wymeditor/`。即使新文件是在客户端加载的，我的更改也会被忽略，因为 Refinery 将同一个文件捆绑在 `wymeditor.js`文件中。

我该如何解决这个问题？

# ios - 多个 NavigatorControllers

> ID：11920638
> 
> 赞同：-1
> 
> 时间：2012-08-12T07:57:44.010
> 
> 标签：ios, ios5, uinavigationcontroller

我正在尝试开始使用 Navigator Controller 教程，但我找不到其中有多个导航控制器的教程。

到目前为止，我有以下代码：第一页是一个简单的主菜单，使用`UIViewController`. 通过按下第一个按钮，用户可以转到使用的客户列表页面`UINavigationController`，并且后退按钮正确出现在客户列表页面的导航栏上。

在我的应用程序委托中，我有以下代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        // Override point for customization after application launch.
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
        self.window.rootViewController = self.viewController;
        [self.window makeKeyAndVisible];
        return YES;
} 
```

在负责显示客户列表的视图控制器中，返回按钮调用以下方法：

```
- (void)backHome:(id)sender {       
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    ViewController *viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];

    appDelegate.window.rootViewController =  viewController;

    [self.navigationController popToViewController:viewController animated:YES];

    // self.window.rootViewController = self.viewController;
    [appDelegate.window makeKeyAndVisible];       
} 
```

但它停止了工作。我不确定如何才能使这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T08:05:20.960

将 a 设置`UINavigationController`为您的 rootViewController `UIWindow`，如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        // Override point for customization after application launch.
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
        UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
        self.window.rootViewController = navigationController;
        [self.window makeKeyAndVisible];
        return YES;
} 
```

然后在返回时将 viewController 弹出堆栈，如下所示：

```
-(void)backHome:(id)sender
{
    [self.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T11:00:09.360

要真正了解 iOS 的基础知识，我建议购买一本书并正确学习。就在最近，我收到了一本关于 iOS 的 Big Nerd Ranch 书，我发现它很有帮助。祝你的冒险好运！

要回答你的问题，Markus 说得对，你需要一个 rootViewController，你可以从它上面推送其他视图（例如，当按下按钮时），然后返回主视图，弹出顶部的视图。

# ios - 用于世界地图 UI 的 iOS 库，如 Ocarina 或 UNIQLO Wake Up

> ID：11920644
> 
> 赞同：1
> 
> 时间：2012-08-12T07:58:53.693
> 
> 标签：ios, user-interface, map, 3d, visualization

我希望实现一个 iOS 应用程序，以 Ocarina 或 UNIQLO Wake Up 的方式可视化世界地图。是否有任何库可以执行此操作，还是我必须从头开始实现它？任何指向实现的指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T08:38:09.063

我认为他们使用了使用[MapBox](http://mapbox.com/?ev=0&utm_expid=62793361-4)的自定义地图。使用 MapBox，我们可以创建地图，也可以使用 Open Street Map 的源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T18:38:06.300

MapBox 不支持真正 3D 地球的可视化，尽管您可能自己编写脚本。[可以在此处](https://github.com/mapbox/mapbox-earth)找到如何使用 MapBox 制作 3D 地图的示例。然而，像这样的 3D 可视化的一个很好的起点可能是GitHub 上的[这个](https://github.com/RossAnderson/EarthView)示例项目。

# objective-c - 静态 NSRegularExpression 始终为零

> ID：11920646
> 
> 赞同：0
> 
> 时间：2012-08-12T07:59:02.340
> 
> 标签：objective-c, ios, regex, nsregularexpression

```
static NSRegularExpression *isRichContentRegex;
static NSError *regexError = NULL;

@implementation MkContentUtils

+(void)initialize{
if(isRichContentRegex == nil)
{
    isRichContentRegex = [isRichContentRegex initWithPattern:@"<(?!br|p)+[^>]*>"         options:NSRegularExpressionCaseInsensitive error:&regexError];
//      isRichContentRegex = [NSRegularExpression regularExpressionWithPattern:@"            (?!br|p)+[^>]*>" 
//                                                                     options:NSRegularExpressionCaseInsensitive
//                                                                      error:NULL];
    NSLog(@"isrichcontent_pattern:%@",isRichContentRegex.pattern);
} 
```

打印日志是 :isrichcontent_pattern:(null) 为什么表达式仍然为零？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T08:04:04.133

你从不分配一个对象，`NSRegularExpression`所以你调用which 保证返回：`init``nil``nil`

```
isRichContentRegex = [isRichContentRegex initWithPattern:@"<(?!br|p)+[^>]*>"         options:NSRegularExpressionCaseInsensitive error:&regexError]; 
```

将其更改为：

```
isRichContentRegex = [[NSRegularExpression  alloc] initWithPattern:@"<(?!br|p)+[^>]*>"         options:NSRegularExpressionCaseInsensitive error:&regexError]; 
```

# c++ - 如何更改此向量函数以接受更多元素？

> ID：11920648
> 
> 赞同：0
> 
> 时间：2012-08-12T07:59:15.413
> 
> 标签：c++, string, vector, split

> **可能重复：**
> [在 C++ 中拆分字符串](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)

我从我的问题中得到的一个答案中得到了这个向量函数

```
vector<string> split(const string& s, char delim)
{
  vector<string> elems(2);
  string::size_type pos = s.find(delim);
  elems[0] = s.substr(0, pos);
  elems[1] = s.substr(pos + 1);
  return elems;
} 
```

但是，它只接受 2 个元素。如何根据字符串 s 中存在多少 delimiter 来修改它以接受？

例如，如果我有这个：

```
user#password#name#fullname#telephone 
```

有时大小可能会有所不同。

无论有多少元素，我怎样才能使这个函数灵活地工作，并且能够像上面的这个函数一样拆分？

**只是为了进一步解释我的问题：**

我想要实现的是使用这个向量函数分割的能力，相同的分隔符到 N 大小，而不是固定在大小 2。

此函数只能拆分字符串中的最多 2 个元素，超过该值会导致 Segmentation core dump

和以前一样，我只需要使用

```
user:pass 
```

现在我添加了更多属性，所以我需要能够拆分

```
user:pass:name:department 
```

其中 x[2] 和 x[3] 将分别返回姓名和部门

他们都将使用相同的分隔符。

**进一步更新：**

我尝试使用以下答案之一提供的此功能

```
vector<string> split(const string& s, char delim)
{
bool found;
vector<string> elems;
  while(1){
   string::size_type pos = s.find(delim);
   if (found==string::npos)break;
   elems.push_back(s.substr(0, pos));
   s=s.substr(pos + 1);
  }
  return elems;
} 
```

我得到了一些错误

```
server.cpp: In function ‘std::vector<std::basic_string<char> > split(const string&, char)’:
server.cpp:57:22: error: passing ‘const string {aka const std::basic_string<char>}’ as ‘this’ argument of ‘std::basic_string<_CharT, _Traits, _Alloc>& std::basic_string<_CharT, _Traits, _Alloc>::operator=(const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>, std::basic_string<_CharT, _Traits, _Alloc> = std::basic_string<char>]’ discards qualifiers [-fpermissive] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T08:21:38.823

像这样的东西％）

```
 vector<string> elems;
  while(1){
   string::size_type pos = s.find(delim);
   if (found==string::npos)break;
   elems.push_back(s.substr(0, pos));
   s=s.substr(pos + 1);
  }
  if(s.size())elems.push_back(s);
  return elems; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T08:04:03.397

好吧，你知道的，看看`push_back`成员函数……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T08:26:18.073

提供通用拆分功能的几乎重复的[答案](https://stackoverflow.com/a/236137/430766)有一个：

```
std::vector<std::string> split(std::string const& str, std::string const& delimiters = "#") {
  std::vector<std::string> tokens;

  // Skip delimiters at beginning.
  string::size_type lastPos = str.find_first_not_of(delimiters, 0);
  // Find first "non-delimiter".
  string::size_type pos = str.find_first_of(delimiters, lastPos);

  while (string::npos != pos || string::npos != lastPos) {
    // Found a token, add it to the vector.
    tokens.push_back(str.substr(lastPos, pos - lastPos));
    // Skip delimiters.  Note the "not_of"
    lastPos = str.find_first_not_of(delimiters, pos);
    // Find next "non-delimiter"
    pos = str.find_first_of(delimiters, lastPos);
  }
  return tokens;
} 
```

可以很容易地包装成：

```
std::vector<std::string> split(std::string const& str, char const delimiter) {
  return split(str,std::string(1,delimiter));
} 
```

# xml - 如何将 XSD 文件转换为 XLS

> ID：11920649
> 
> 赞同：12
> 
> 时间：2012-08-12T07:59:22.110
> 
> 标签：xml, excel, xsd

我有一个 XSD 文件，我需要将其转换为 MS Excel 文件。XSD 如下。

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

<xs:element name="shiporder">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="orderperson" type="xs:string"/>
      <xs:element name="shipto">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="name" type="xs:string"/>
            <xs:element name="address" type="xs:string"/>
            <xs:element name="city" type="xs:string"/>
            <xs:element name="country" type="xs:string"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="item" maxOccurs="unbounded">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="title" type="xs:string"/>
            <xs:element name="note" type="xs:string" minOccurs="0"/>
            <xs:element name="quantity" type="xs:positiveInteger"/>
            <xs:element name="price" type="xs:decimal"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="orderid" type="xs:string" use="required"/>
  </xs:complexType>
</xs:element>

</xs:schema> 
```

请帮助我，我真的不知道如何以及从哪里开始。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-13T16:45:18.183

这个答案同样适用于您以及@Alex、@Michael 和 @forty-2。我使用 Excel 2010 对其进行说明，因此如果您使用的是其他版本，我将由您自行进行必要的调整。

首先，确保显示开发人员选项卡（单击文件选项卡，选项）。

![开发人员选项卡的 Excel 2010 选项](../Images/c44bb9fa5b2d477e2d83e03e7a044cdc.png)

您现在必须从 XSD 创建 XML 源：单击 Developer 选项卡；在 XML 组中，切换 Source 按钮以显示 Xml Source 任务窗格；然后单击 XML Maps 按钮。

![Excel 显示用于创建 XML 地图的关键 UI 元素](../Images/78df6ed40e59c1273bde7e840e9b8351.png)

在提示处单击添加按钮；指向 XSD 文件；然后单击确定返回主屏幕。

![Excel 显示在 XML 映射中加载的 XSD](../Images/8484ac34013cc96170ca40960e438f18.png)

然后，您可以将 shipOrder 拖放到工作表中的单元格中，以锚定生成的映射表。

![Excel 显示映射的 XSD](../Images/a6ce15c10010c02e305a1268403edf56.png)

接下来，您可以使用 Import 将 XML 数据导入电子表格，并使用 Export 将其导出。还有一些额外的事情需要注意；阅读[微软网站上的这篇文章](http://office.microsoft.com/en-us/excel-help/export-xml-data-HP010206401.aspx)；特别注意导出 XML 数据的问题（我的工作簿中的错误 XML 映射不可导出）。这是因为shiporder 和 item 之间的基数是一对多。您可以尝试使用映射范围来处理它 - 这一切都由您决定。您最好阅读 XML 开发人员部分的在线帮助...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-03T10:43:14.447

转到`MS Excel`-> `File`-> `Open`。选择 xsd 文件。

系统将提示您如何打开文件。您可以选择“作为 XML 表”选项。将文件保存为 excel 格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T08:25:37.060

您可以将文件保存为 XML 文件，然后在 Excel 中打开它，并在出现提示时作为“只读工作簿”打开。然而，它的格式不会很好，但至少所有数据（连同作为列的 XML 路径）都会在那里。

然后，您可以根据需要编辑数据。其他任何事情都需要一些处理。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-12T16:26:08.983

在文本编辑器中选择 XSD 的整个文本，将其复制到剪贴板，单击 Excel 电子表格中的单元格，然后进行粘贴。您的 XSD 数据现在将在您的电子表格中。

它不会采用非常有用的格式，但您没有告诉我们您希望电子表格看起来像什么，而且我发现很难想象一种*有用*的格式。

# ssis - 导入身份历史记录 OLE DB 源输出中的错误不包含任何输出列

> ID：11920650
> 
> 赞同：0
> 
> 时间：2012-08-12T07:59:33.800
> 
> 标签：ssis

我收到以下错误，我不知道为什么。我对 SSIS 完全陌生，所以请多多包涵。

## TITLE：包验证错误

包验证错误

* * *

附加信息：

导入身份历史记录 [SSIS.Pipeline] 时出错：“组件“OLE DB 源”(1)”的连接管理器集合 Connections 中的“运行时连接“OleDbConnection”(10)”没有 ID 值财产。验证是否已为组件设置了运行时连接对象的 ConnectionManagerID 属性。

导入身份历史记录 [SSIS.Pipeline] 时出错：组件“OLE DB 源”(1) 验证失败并返回错误代码 0xC004801C。

导入身份历史记录 [SSIS.Pipeline] 出错：“输出“OLE DB 源输出”(11)”不包含输出列。异步输出必须包含输出列。

导入身份历史记录 [SSIS.Pipeline] 出错：一个或多个组件验证失败。

导入身份历史记录错误：任务验证期间出现错误。

(Microsoft.DataTransformationServices.VsIntegration)

* * *

纽扣：

## 好的

![在此处输入图像描述](../Images/d90e12ddf40da000b0b481c34b340d82.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:43:49.223

我假设创建的包指向格式为 X 的源，现在相同的源具有格式 Y，因此它抱怨源不同（在这种情况下，列 ID 丢失）

或者可能缺少在组件上使用的连接管理器......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T10:01:20.327

为 OLE DB 目标选择一个输入表。

# php - 为什么 PHP IF 有条件地从 OUTPUT 中删除 HTML？

> ID：11920652
> 
> 赞同：0
> 
> 时间：2012-08-12T08:00:10.937
> 
> 标签：php, wordpress, if-statement, echo

我正在尝试创建一个条件，当自定义字段不是“空”（包含某些内容）时回显某些内容

以下是我想要“回应”的内容：

```
<div>Who is there?: <?php echo genesis_get_custom_field('FOO'); ?></div> 
```

正确地导致：

A）“谁在那儿？：”（当 FOO 为“空”时）

B）“谁在那里？：我”（当 FOO 包含“我”时）

当我添加以下建议的条件时：

```
<?php if ( genesis_custom_field('FOO') != "") { ?>
<div>Who is there?: <?php echo genesis_get_custom_field('FOO'); ?></div>)
<?php } ?> 
```

当 FOO 为“空”时，结果为“NULL”

但是，当 FOO = "Me" 时，产生的回声是：

“我”（包括 DIV 在内的所有“html”都被删除）

我确信有一个“简单”的语法问题......我已经搜索了 PHP 手册和谷歌无济于事......

我能找到的唯一可能有用的模糊参考是“回显”整行 HTML。如果这是一个很好的解决方案，有人可以分享一个示例，说明如何将我的带有嵌入式“echo”的工作“DIV”修改为带有嵌入式“DIV”的“echo”代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T08:31:38.800

现在在我意识到它们是两个不同的功能之后，我建议更换

```
if ( genesis_custom_field('FOO') != "") 
```

和

```
if ( genesis_get_custom_field('FOO') != "") 
```

这个函数应该返回一个值，然后你可以比较`""`

进一步你可以更换

```
echo genesis_get_custom_field('FOO') 
```

和

```
genesis_custom_field('FOO') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T08:07:48.260

可能不是直接解决您的问题，而是一种不同的方法 - 是否有必要在条件本身中输出 HTML 部分？如果“谁在那里？” 在这两种情况下部分是相同的，您可以只打印 HTML “谁在那儿？” 之后，您可以放置​​ PHP 条件。然后，如果条件有任何问题，调试起来会容易得多。

顺便说一句，我怀疑函数的返回值有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T08:11:24.373

你能试试下面的代码吗：-

```
<?php

      if ( genesis_custom_field('FOO') != "" && !empty(genesis_custom_field('FOO'))) 
      { 
           echo "<div> Who is there?:". genesis_get_custom_field('FOO')."</div>";
      } 
      else
      {
           echo "<div> Who is there?: Me </div>"
      }

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T08:15:43.523

```
<?php if ( genesis_custom_field('FOO') != "") 
{
    echo "<div>Who is there?: ".
         genesis_get_custom_field('FOO').
         "</div>";
} 
?> 
```

在 php 中回显所有内容怎么样？

# microsoft-metro - 我可以在 windows8 Metro 应用程序中使用 SPDY 协议吗？

> ID：11920654
> 
> 赞同：1
> 
> 时间：2012-08-12T08:00:42.327
> 
> 标签：microsoft-metro, spdy

我正在使用 Javascript 和 HTML 开发一个 Windows8 Metro 应用程序。

我可以在 Windows Metro 应用程序中使用 SPDY 协议吗？

例如，如果我使用可以说 SPDY 协议的 dll，通过该 dll，我可以将我的应用程序连接到我的服务器。

我的应用程序使用了如此多的网络连接，所以我想通过 SPDY 降低网络连接的成本。

如果客户端可以说 SPDY，我的服务器可以说 SPDY。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T08:04:13.650

只要您的 DLL 可以在 .NET Metro 配置文件配置中编译，您就应该可以使用它。

**更新** 我认为 Chrome Metro 应用程序使用的也是。所以你应该一切都好。

# c# - 提供者没有返回 ProviderManifestToken 字符串 - .NET MVC 3 #C

> ID：11920658
> 
> 赞同：3
> 
> 时间：2012-08-12T08:01:21.313
> 
> 标签：c#, asp.net, asp.net-mvc-3, sql-server-ce

我正在学习使用 .NET MVC 3 和 C# 进行开发。我正在尝试使用“代码优先”方法来创建应用程序，但是当我尝试从数据库中提取数据时，我收到一条错误消息“提供程序没有返回 ProviderManifestToken 字符串”。

我看过其他一些关于此错误的帖子，但我在这些帖子中找不到适合我的解决方案。

我在 Windows 7 64 位上使用 MS Visual Web Developer Express 2010。我使用 SQL Compact Server 4.0 作为我的数据库。

当这段代码尝试运行时会触发错误：

```
public class StoreController : Controller
{
    MusicStoreEntities storeDB = new MusicStoreEntities();

    //
    // GET: /Store/

    public ActionResult Index()
    {
        var genres = storeDB.Genres.ToList(); // This line causes the error

        return View(genres);
    } 
} 
```

我的 DbContext 类如下：

```
public class MusicStoreEntities : DbContext
{
    public DbSet<Album> Albums { get; set; }
    public DbSet<Genre> Genres { get; set; }
} 
```

还有我的连接字符串：

```
<connectionStrings>   
  <add name="MusicStoreEntities" 
  connectionString="Data Source=|DataDirectory|MvcMusicStore.sdf"
  providerName="System.Data.SqlServerCe.4.0"/>
</connectionStrings> 
```

有什么看起来不对吗？如果您需要更多信息，请询问。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-24T13:42:59.843

你只需要放“。” 对于数据源中的localmachine如下：

`<add name="MYSQLSERVER" providerName="System.Data.SqlClient" connectionString="Data Source=.\MYSQLSERVER;Trusted_Connection=true"></add>
</connectionStrings>`

# c++ - shared_ptr 和 use_count

> ID：11920659
> 
> 赞同：3
> 
> 时间：2012-08-12T08:01:29.550
> 
> 标签：c++, shared-ptr

在以下代码片段中：

```
shared_ptr<int> p;

{
    p = shared_ptr<int>(new int);
    cout<<p.use_count()<<endl;
}

cout<<p.use_count()<<endl; 
```

输出结果是

```
1
1

```

我不明白为什么第一个输出是`1`- 不应该`2`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T08:17:54.270

临时对象的生命周期不足以使第一个`p.use_count()`返回 2。临时对象首先被销毁，放弃它对​​它所拥有的任何东西的所有权。

此外，由于临时值是右值，分配到`p`将导致移动分配，这意味着使用计数永远不会是 2（假设实现质量）。所有权只是简单地从临时转移到`p`，从不超过 1。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-12T08:11:35.893

```
 #include <memory>
 #include <iostream>

 int
 main(int argc, char** argv) {
   std::shared_ptr<int> p(new int);
   std::shared_ptr<int> p2(p);
   std::cout << p.use_count() << std::endl;
   return 0;
 }

output: 2 
```

解释/编辑：在您的来源中，最初的“p”从未拥有任何东西的所有权。在对 p 的第二次引用中，您分配给一个临时的并且基本上放弃了对“p”的所有权。最有可能的是，移动构造函数也用于满足此分配。

编辑：这可能是你想要的？

```
 #include <memory>
 #include <iostream>

 int
 main(int argc, char** argv) {
   std::shared_ptr<int> p(new int);
   {
       std::shared_ptr<int> p2(p);
       std::cout << p.use_count() << std::endl;
   }
   std::cout << p.use_count() << std::endl;
   return 0;
 }

output: 2
        1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T08:15:24.347

来自 boost.org：

```
template<class Y> explicit shared_ptr(Y * p); 
Requirements: p must be convertible to T *. Y must be a complete type. The     expression delete p must be well-formed, must not invoke undefined behavior, and     must not throw exceptions.

Effects: Constructs a shared_ptr that owns the pointer p.

Postconditions: use_count() == 1 && get() == p.

Throws: std::bad_alloc, or an implementation-defined exception when a resource other than memory could not be obtained.

Exception safety: If an exception is thrown, delete p is called.

Notes: p must be a pointer to an object that was allocated via a C++ new    expression or be 0\. The postcondition that use count is 1 holds even if p is 0;    invoking delete on a pointer that has a value of 0 is harmless. 
```

如您所见，如果您从新的 int 构造一个新的 shared_ptr，它会释放最后一个构造。

# ios - hpple parse xml , [元素内容] 始终为空

> ID：11920661
> 
> 赞同：0
> 
> 时间：2012-08-12T08:01:39.787
> 
> 标签：ios, hpple

1.这是我的代码

```
NSStringEncoding encoding2 = NSUTF8StringEncoding;
// i am from china
NSString *c1 = @"<html><head><title A='sss'>sss</title></head><body><a href='sssssss这个中文就么哟sa哈aa'>asas</a></body></html>";
htmlData = [c1 dataUsingEncoding:encoding2];
TFHpple *xpathParser = [[TFHpple alloc] initWithHTMLData:htmlData];
NSArray *elements  = [xpathParser searchWithXPathQuery:@"//a"]; 
TFHppleElement *element = [elements objectAtIndex:0];
NSString *myTitle = [element content];
NSLog(@"%@",element.tagName);
NSLog(@"%@",myTitle);
NSString *attr = [element objectForKey:@"href"];
NSLog(@"%@",attr); 
```

1.  这是输出

    ```
    **
    2012-08-12 14:59:34.624 HHXY[1506:f803] a
    2012-08-12 14:59:34.625 HHXY[1506:f803] (null)
    2012-08-12 14:59:34.625 HHXY[1506:f803] sssssss这个中文就么哟sa哈aa
    ** 
    ```

一个简单的测试，但 content(myTitle) 总是为 null ，我不知道为什么？帮助我。不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T19:52:47.430

我有一个类似的问题。

尝试替换这一行：

```
NSString *myTitle = [element content]; 
```

接下来：

```
NSString *myTitle = [[element firstChild] content]; 
```

或更改您的正则表达式：

```
@"//a" 
```

和

```
@"//a/text()" 
```

我希望其中一种方法对您有所帮助！

# git - Git接口通过'id号'添加文件

> ID：11920662
> 
> 赞同：0
> 
> 时间：2012-08-12T08:02:11.117
> 
> 标签：git, user-interface

我确定我遇到了一个替代 git 接口，它提供了许多更好的做事方式，但我再也找不到它了！这些改进的关键之一是，当您运行`git status`它时，它会为结果输出中的每个文件提供一个数字，然后如果您想添加其中三个文件，您可以简单地运行：

```
git add 3 6 11 
```

而不是

```
git add doc/source/conf.py src/lib/blah/blah.py src/lib/access.txt 
```

经过几个小时的谷歌搜索，我找不到这个扩展 - 它存在吗？如果是这样，它叫什么，我在哪里可以得到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T08:07:30.400

听起来有点像你想要互动：

```
git add -i 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T08:09:03.023

> git-number 是一个 perl 脚本，它提高了我的命令行 git 生产力（在另外两个 perl 脚本的帮助下）。

回购地址：[https ://github.com/holygeek/git-number](https://github.com/holygeek/git-number)

也许，这对你有用。

# eclipse-plugin - 将 Pydev 添加到我的插件

> ID：11920663
> 
> 赞同：1
> 
> 时间：2012-08-12T08:02:20.913
> 
> 标签：eclipse-plugin, eclipse-rcp, pydev

我正在开发一个 Eclipse RCP 插件，我需要在我的插件中添加一个 Python 编辑器。这个 Python 编辑器应该有编译错误的自动缩进和代码分析。我在互联网上搜索并发现 Pydev 是最好的选择，但我找不到它的任何扩展点来将它添加到我的项目中。有谁知道如何将 Pydev 添加到我的插件中，是否有任何其他可用于 Eclipse 的 Python 编辑器可以在我的插件中使用它们？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:35:30.130

您应该只将 PyDev 插件与您的 RCP 应用程序一起分发（并且当您打开 .py 文件时要求使用 PyDev 编辑器 ID 打开）——您实际上不需要任何特殊的扩展点。

# c# - 为什么我们不能从 C# 中的枚举实例访问枚举值？

> ID：11920671
> 
> 赞同：6
> 
> 时间：2012-08-12T08:03:41.240
> 
> 标签：c#, java, enums

这可能会被否决，但这个问题从昨天开始就一直困扰着我......直到我找到一个链接然后我才知道我并不是真的疯了哈哈： [Enum as instance variables](https://stackoverflow.com/questions/11808869/enum-as-instance-variables)

我基本上是在问与OP的问题相反的问题。鉴于：

```
enum Coffee {
    BIG,
    SMALL }

public class MyClass {
    private Coffee coffee;

    // Constructor etc.
} 
```

尽管这是 Java 并且枚举在两种语言中确实有所不同，但我怎么不能做 coffee.BIG 或 coffee.BIG.SMALL （虽然在阅读时没有什么意义，但考虑到咖啡是 Coffee 类型应该是可能的) 在 C# 中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-12T08:06:14.113

这实际上与枚举无关。它通常与访问静态成员有关。

Java 有一个设计缺陷 (IMO)，它允许您通过该类型的表达式访问静态成员，就好像它们是实例成员一样。它可能导致*非常*混乱的代码：

```
Thread thread = new Thread(...);
thread.start();
// This looks like it makes the new thread sleep, but it actually makes the
// current thread sleep
thread.sleep(1000); 
```

此外，没有空值检查，因为表达式的*值*是无关紧要的：

```
Thread thread = null;
thread.sleep(1000); // No exception 
```

现在，考虑枚举值是隐式静态的，您就会明白为什么会有差异。

您已经承认“阅读它时没有什么意义”这一事实表明，您内心同意这是 Java 中的缺陷，而不是 C# 中的缺陷：)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T08:06:04.873

在 C#（与 Java 不同）中，通过该类的实例访问静态字段是不合法的。

如果你这样写：

```
coffee.BIG.SMALL 
```

那么你得到的错误是：

> 无法使用实例引用访问成员“coffee.SMALL”；改为使用类型名称来限定它

出于同样的原因，此代码也不起作用：

```
void Foo(coffee c)
{
    // Member 'coffee.SMALL' cannot be accessed with an instance reference
    Console.WriteLine(c.SMALL); 
} 
```

# xquery - 需要了解以下 Xquery

> ID：11920672
> 
> 赞同：0
> 
> 时间：2012-08-12T08:04:02.980
> 
> 标签：xquery

我使用了一个工具来映射这个 xquery，但需要了解该工具在幕后做了什么，以避免自己成为该工具的奴隶

```
(:: pragma bea:global-element-parameter parameter="$retrieveCustomerByCriteriaResponse1" element="ns0:RetrieveCustomerByCriteriaResponse" location="../wsdl/CustomerService.wsdl" ::)
(:: pragma bea:global-element-return element="ns3:FindCustomerResponse" location="../wsdl/CustomerManagement.wsdl" ::)

declare namespace ns2 = "http://www.somecorp.com/customer";
declare namespace ns1 = "http://www.somecorp.com/creditcard";
declare namespace ns3 = "http://www.somecorp.org/CustomerManagement";
declare namespace ns0 = "http://www.crm.org/CustomerService/";
declare namespace xf = "http://tempuri.org/basic-osb-service/transformation/TransformFindCustomerResponse/";

declare function xf:TransformFindCustomerResponse(**$retrieveCustomerByCriteriaResponse1 as element(ns0:RetrieveCustomerByCriteriaResponse**))
    as element(ns3:FindCustomerResponse) {
        <ns3:FindCustomerResponse>
            <Customer>
                <ns2:ID>{ xs:long($retrieveCustomerByCriteriaResponse1/customers/id) }</ns2:ID>
                <ns2:FirstName>{ data($retrieveCustomerByCriteriaResponse1/customers/firstname) }</ns2:FirstName>
                <ns2:LastName>{ data($retrieveCustomerByCriteriaResponse1/customers/lastname) }</ns2:LastName>
                <ns2:EmailAddress>{ data($retrieveCustomerByCriteriaResponse1/customers/emailAddress) }</ns2:EmailAddress>
                <ns2:Addresses>
                    {
                        let $address := $retrieveCustomerByCriteriaResponse1/customers/address
                        return
                            <ns2:Address>
                                <ns2:Street>{ data($address/street) }</ns2:Street>
                                <ns2:PostalCode>{ data($address/zipcode) }</ns2:PostalCode>
                                <ns2:City>{ data($address/city) }</ns2:City>
                            </ns2:Address>
                    }
                </ns2:Addresses>
                <ns2:Rating>{ data($retrieveCustomerByCriteriaResponse1/customers/rating) }</ns2:Rating>
                <ns2:Gender>{ data($retrieveCustomerByCriteriaResponse1/customers/gender) }</ns2:Gender>
            </Customer>
        </ns3:FindCustomerResponse>
};

declare variable $retrieveCustomerByCriteriaResponse1 as element(ns0:RetrieveCustomerByCriteriaResponse) external; 
```

xf:TransformFindCustomerResponse($retrieveCustomerByCriteriaResponse1)

有人可以解释一下这段代码的作用吗？这个函数的输入参数是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T12:21:48.017

这个函数的输入是一个 element()，它基本上是一个 XML 片段。根据函数中使用的值，它可能应该具有如下结构：

```
<ns0:RetrieveCustomerByCriteriaResponse>
  <ns0:customers>
    <ns0:id>1234</ns0:id>
    <ns0:firstname>John</ns0:firstname>
    <ns0:lastname>Smith</ns0:lastname>
    <ns0:emailAddress>you@gmail.com</ns0:emailAddress>
    <ns0:address>
      <ns0:street>Main Street</ns0:street>
      <ns0:zipcode>12345</ns0:zipcode>
      <ns0:city>New York</ns0:city>
    </ns0:address>
    <ns0:rating>5</ns0:rating>
    <ns0:gender>male</ns0:gender>
  </ns0:customer>
</ns0:RetrieveCustomerByCriteriaResponse> 
```

请注意，XML 是半结构化的，因此输入片段中可能缺少信息（例如，没有电子邮件地址）。当然，它还可以包含更多这里根本没有使用的信息。脚本实际上做的是一些简单的 XPath 表达式。例如

```
xs:long($retrieveCustomerByCriteriaResponse1/customers/id) } 
```

首先遍历到客户孩子，然后到 id 孩子。xs:long 是一种转换为 long 值的类型。你会得到的是这样的（基于上面的输入）：

```
<ns3:FindCustomerResponse>
  <Customers>
    <ns2:ID>1234</ns2:ID>
    <ns2:FirstName>John</ns2:FirstName>
    <ns2:LastName>Smith</ns2:LastName>
    <ns2:EmailAddress>you@gmail.com</ns2:EmailAddress>
    <ns2:Addresses>
      <ns2:Address>
        <ns2:Street>Main Street</ns2:Street>
        <ns2:PostalCode>12345</ns2:PostalCode>
        <ns2:City>New York</ns2:City>
      </ns2:Address>
    </ns2:Addresses>
    <ns2:Rating>5</ns2:Rating>
    <ns2:Gender>male</ns2:Gender>
  </Customer>
</ns3:FindCustomerResponse> 
```

我不知道（实际上我很想知道......）函数声明中的这两个星号 ** 是什么意思。我以前从未见过这样的语法。通常，您将星号仅用作命名空间的通配符或用作量词。

# php - imap_check 不返回任何结果

> ID：11920679
> 
> 赞同：2
> 
> 时间：2012-08-12T08:04:39.640
> 
> 标签：php, email, imap

我正在编写一个 PHP 脚本，它应该连接到 Outlook 电子邮件帐户，检索附加的图像并将它们显示在页面上。

我正在使用 WAMP，并在本文的帮助下使用 hMailServer 设置了一个邮件服务器[，](http://www.synet.sk/php/en/155-testing-php-mail-on-localhost-with-fake-smtp-server-hMailServer-and-outlook)它工作正常。

但是当我尝试通过我的 PHP 脚本连接到邮箱时，即使我的 Outlook 帐户的收件箱中**有电子邮件，它也显示为 0 条消息，如屏幕截图所示。**

![在此处输入图像描述](../Images/fbc86b5b95eb52e5112037076a46607d.png)

这是我到目前为止编写的 PHP 代码。

```
$serverName = "{localhost/imap:143}INBOX";
//$serverName = "{localhost/pop3:110}INBOX";

$userName = "isuru@localhost.localdomain";
$passWord = "abc123";

$mbox = imap_open($serverName, $userName, $passWord);
if(!$mbox)
{
    echo "Could not open Mailbox";
}

$hdr = imap_check($mbox);
if(!$hdr)
{
    echo "failed";
}
else
{
    var_dump($hdr);
    echo "Messages " . $hdr->Nmsgs . "\n\n<br><br>";
    $msgCount = $hdr->Nmsgs;
} 
```

这是有关邮件帐户的信息。

![在此处输入图像描述](../Images/be0077cf6545c1eee586a968a43c009a.png)

* * *

**更新**

我对代码进行了一些更改（在这里也进行了更新），现在输出看起来像这样。 ![在此处输入图像描述](../Images/2ef5220d8493c9ac66f4990f128ff52b.png)

不过，原来的问题仍然存在。即使我的帐户中有电子邮件，也显示 0。

谁能告诉我为什么会发生这种情况以及应该做哪些改变？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:26:40.617

```
if($hdr = imap_check($mbox)) 
```

由于您只使用一个`=`，它可能没有执行预期的操作。以下else永远不会被访问。

# actionscript-3 - 如何在 AIR 上以编程方式模拟移动设备中的手势事件？

> ID：11920683
> 
> 赞同：0
> 
> 时间：2012-08-12T08:05:57.870
> 
> 标签：actionscript-3, apache-flex, events, mobile, air

我尝试在真实设备上模拟滑动手势事件，但没有任何反应。

```
myList.dispatchEvent(new TransformGestureEvent(TransformGestureEvent.GESTURE_SWIPE, true, false, 'all', 56, 112, 1, 1, 0, 1, 0, false, false, false, false, false)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:11:23.900

为什么会有事？

1.  Flex 组件不依赖于那些内置的手势。
2.  即使他们愿意——滚动将在平移（拖动）而不是离散滑动上完成。

# android - 来自 ListView 的 Android ImageView

> ID：11920687
> 
> 赞同：0
> 
> 时间：2012-08-12T08:07:02.850
> 
> 标签：android, listview, imageview

我正在尝试将 KEY_THUMB_URL 传递给 SingleMenuItemActivity.class 以显示 Image onclick listview。我已经标记了这些区域 //Not Working 。请更正我的编码，我对 android 很陌生。

CustomizedListView.class

```
 public class CustomizedListView extends Activity {
    // All static variables
    static final String URL = "http://api.androidhive.info/music/music.xml";
    // XML node keys
    static final String KEY_SONG = "song"; // parent node
    static final String KEY_ID = "id";
    static final String KEY_TITLE = "title";
    static final String KEY_ARTIST = "artist";
    static final String KEY_DURATION = "duration";
    static final String KEY_THUMB_URL = "thumb_url";

    ListView list;
    LazyAdapter adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_SONG);
        // looping through all song nodes <song>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
            map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
            map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
            map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

            // adding HashList to ArrayList
            songsList.add(map);
        }

        list=(ListView)findViewById(R.id.list);

        // Getting adapter by passing xml data ArrayList
        adapter=new LazyAdapter(this, songsList);        
        list.setAdapter(adapter);

        // Click event for single list row
        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                String title = ((TextView) view.findViewById(R.id.title)).getText().toString();
                String description = ((TextView) view.findViewById(R.id.artist)).getText().toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);

                in.putExtra(KEY_TITLE, title);
                in.putExtra(KEY_THUMB_URL, R.id.list_image); //Modified as told by Nandeesh 
                in.putExtra(KEY_ARTIST, description);
                startActivity(in);  }

        });     
    }   
} 
```

SingleMenuItemActivity.class

```
 public class SingleMenuItemActivity  extends Activity {

    static final String KEY_TITLE = "title";
    static final String KEY_ARTIST = "artist";  
    static final String KEY_THUMB_URL = "thumb_url";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.single_list_item);

        Intent in = getIntent();

        String title = in.getStringExtra(KEY_TITLE);
        String description = in.getStringExtra(KEY_ARTIST);

       // int thumb_image = in.getIntExtra(KEY_THUMB_URL); // ERROR : The method getIntExtra(String, int) in the type Intent is not applicable for the arguments (String)

        TextView lblName = (TextView) findViewById(R.id.name_label);
        TextView lblDesc = (TextView) findViewById(R.id.description_label);

       // ImageView thumb = (ImageView) findViewById(R.id.imageView1); 

        lblName.setText(title);
       // thumb.setImageResource(thumb_image); //modified as told by Nandeesh                    
        lblDesc.setText(description);

    }
} 
```

LazyAdapter.class

```
 public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private ArrayList<HashMap<String, String>> data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.list_row, null);

        TextView title = (TextView)vi.findViewById(R.id.title); // title
        TextView artist = (TextView)vi.findViewById(R.id.artist); // artist name
        TextView duration = (TextView)vi.findViewById(R.id.duration); // duration
        ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

        HashMap<String, String> song = new HashMap<String, String>();
        song = data.get(position);

        // Setting all values in listview
        title.setText(song.get(CustomizedListView.KEY_TITLE));
        artist.setText(song.get(CustomizedListView.KEY_ARTIST));
        duration.setText(song.get(CustomizedListView.KEY_DURATION));
        imageLoader.DisplayImage(song.get(CustomizedListView.KEY_THUMB_URL), thumb_image);
        return vi;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:04:36.910

因为您没有添加`LazyAdapter`代码，所以我尝试猜测并执行此操作：

```
 list.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {

HashMap<String, String> map = yourAdapter.getItem(position); // create an Adapter in your `onCreate` . yourAdapter = new LazyAdapter(this, songsList); 
                    // Starting new intent
                    Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                        in.putExtra(KEY_TITLE, map.get(KEY_TITLE));
                        in.putExtra(KEY_THUMB_URL, map.get(KEY_THUMB_URL)); //make sure this is putExtra(String name, String value);
                        in.putExtra(KEY_ARTIST, map.get(KEY_ARTIST));
                        startActivity(in);  }

            }); 
```

**奖励**：在`CustomizedListView`这样做`LazyAdapter adapter = new LazyAdapter(this, songsList);`

所以`setOnItemClickListener`写`HashMap<String, String> map = adapter.getItem(position); // get data of the clicked item.` 在 LazyAdapter 中将你的方法更改`getItem`为

```
@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return data.get(position);
} 
```

在您`SingleMenuItemActivity.class`从 Intent Extra 获取的 URL 图像中。像您一样下载它`LazyAdapter`并设置为`ImageView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T08:22:25.500

在这一行

```
in.putExtra(KEY_THUMB_URL, R.id.list_image); 
```

R.id.list_image 不是可绘制的。只有 R.drawable.[ ] 可用于 setImageResource。

那么你不应该使用`String thumb_image = in.getStringExtra(KEY_THUMB_URL)`，因为 putextra 正在添加一个整数并且你正在尝试获取一个字符串

你应该使用

> `int thumb_image = in.getIntExtra(KEY_THUMB_URL)`
> 
> ```
> thumb.setImageResource(thumb_image) 
> ```

# reverse-engineering - 如何将 OEP 引入 ollydbg 范围？

> ID：11920695
> 
> 赞同：0
> 
> 时间：2012-08-12T08:08:11.490
> 
> 标签：reverse-engineering, entry-point, ollydbg

我想在 olly 中反转一个程序。olly 加载的段不是 .text 并且 OEP 超出了 olly 虚拟地址范围。可以使用 LordPE、PEexplorer 和 PEiD 等 PE 编辑器找到 OEP 和段地址。如何将 OEP 带入 olly？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T22:07:59.687

首先让我们直截了当地说：OEP 代表原始入口点，对吗？

如果是这样，并且您的意思是您在 OllyDbg 中打开的示例已打包，并且如果您知道如何将其解包以到达 OEP，那么您可以使用由 shag 和 itzik 编写的一个非常简洁的插件，称为[OllyScript](http://www.openrce.org/downloads/details/182/OllyScript_Source_Code)。

使用 OllyScript，您可以修改注册表、设置断点并自动化整个工作流程以解压缩您的样本。

请注意，我的答案中有很多如果。如果这不是您要问的，请澄清。最终共享样本也可能使您受益。

# javascript - 如何在JS中的URL中获取#hash值

> ID：11920697
> 
> 赞同：20
> 
> 时间：2012-08-12T08:08:28.147
> 
> 标签：javascript, url

例如，我有一个 URL：

> [http://www.google.com/#hash=value2x](http://www.google.com/#hash=value2x)

我想要一个 js 代码只返回`value2x`. 我试过`location.hash.split('=')[1]`了，但结果是第一个哈希值，比如 url 是

> [http://www.google.com/#hfh=fdg&hash=value2x](http://www.google.com/#hfh=fdg&hash=value2x)

它返回`fdg&hash`。我只想要`hash`.

请不要 jQuery。

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-12T08:26:17.557

```
function getHashValue(key) {
  var matches = location.hash.match(new RegExp(key+'=([^&]*)'));
  return matches ? matches[1] : null;
}

// usage
var hash = getHashValue('hash'); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-11-01T11:25:42.610

可以为此目的重用 URLSearchParams 类。

```
var urlParams = new URLSearchParams(window.location.hash.replace("#","?"));
var hash = urlParams.get('hash'); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-12T08:24:09.683

怎么样

```
location.hash.split('hash=')[1].split('&')[0] 
```

这将拆分散列`hash=`并在 hash= 之后和任何其他参数之前获取值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-12T08:33:16.990

如果您正在进行大量的 url 操作，那么您应该查看[JQuery URL plugin](https://github.com/allmarkedup/jQuery-URL-Parser)。

访问 url 哈希中的参数

```
 $.url('http://www.google.com/#hfh=fdg&hash=value2x').fparam('hash'); 
```

或者如果它的当前网址

```
 $.url().fparam('hash'); 
```

希望能帮助到你

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-12T09:33:42.063

```
location.parseHash = function(){
   var hash = (this.hash ||'').replace(/^#/,'').split('&'),
       parsed = {};

   for(var i =0,el;i<hash.length; i++ ){
        el=hash[i].split('=')
        parsed[el[0]] = el[1];
   }
   return parsed;
};

var obj= location.parseHash();
    obj.hash;  //fdg 
    obj.hfh;   //value2x 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-12T08:31:34.127

拆分`&`，然后拆分`=`：

```
pairs = location.hash.substr(1).split('&').map(function(pair) {
    var kv = pair.split('=', 2);
    return [decodeURIComponent(kv[0]), kv.length === 2 ? decodeURIComponent(kv[1]) : null];
}) 
```

这`pairs`将是一个数组数组，其中键为 at `0`，值为 at `1`：

```
[["hfh","fdg"],["hash","value2x"]] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-01T11:57:33.647

如果网址有`?`：[http ://www.google.com/#?hash=value2x](http://www.google.com/#?hash=value2x)

代码可以是：

```
const url = 'http://www.google.com/#?hash=value2x';
new URLSearchParams(
  (
    new URL(url)
  ).hash.slice(1).split('?')[1]
).get('hash'); 
```

或者如果`url`没有`?`：

```
const url = 'http://www.google.com/#hash=value2x';
(new URLSearchParams((new URL(url)).hash.slice(1))).get('hash') 
```

# html - CSS font-face 字体大小兼容性问题 firefox

> ID：11920698
> 
> 赞同：0
> 
> 时间：2012-08-12T08:08:36.270
> 
> 标签：html, css, font-face, font-size, truetype

所以，我设计了一个使用 HTML/CSS 的单页布局。该页面可以在这里找到：

[http://letsrob.org/](http://letsrob.org/)

因此，页面的标题文本是我使用 font-face 属性加载的自定义字体。字体大小和字体在 chrome 上是完美的，但在 firefox 上更大，有时字体本身看起来有点不同。为什么会这样？仅由于标题字体，整个页面就被打乱了！

我的字体代码：

```
@font-face {
    font-family: "logotext";
    src: url(http://letsrob.org/css/BEBAS.ttf) format("truetype");
}
@font-face {
    font-family: "captiontext";
    src: url(http://letsrob.org/css/Franchise-Bold-hinted.ttf) format("truetype");
} 
```

我的标题 CSS 类：

```
<div id="banner" style="margin-top:20px;color:white;font-weight:bold;font-size:1.75em;font-family:logotext;text-align:center;">Reclaim Our Beaches</div>

<div style="color:white;font-weight:bold;font-size:3em;font-family:captiontext;text-align:center;margin-top:20px;">ROB SYMPOSIUM: Talking trash, Exposing waste</div>

<div style="color:white;font-weight:bold;font-size:1.5em;font-family:captiontext;text-align:center;margin-top:20px;">10AM to 5PM, 18 & 19th AUGUST,2012</div>
<div style="color:white;font-weight:bold;font-size:1.5em;font-family:captiontext;text-align:center;margin-top:10px;">Conference Hall, School of Media Studies, Loyola College, Chennai</div> 
```

请使用 Firefox 访问该页面以查看中断情况。它在铬上工作得很好！

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T10:51:56.683

看起来你字体中唯一的粗体是粗体。因为您`font-weight:bold`在 CSS 中指定 Firefox 正在尝试通过扩展字形来自动加粗已经粗体的字体。删除该规则可以修复它（并且在我的 Mac 上的 Chrome 中看起来也更好）。

# android - Android 多状态开关

> ID：11920704
> 
> 赞同：9
> 
> 时间：2012-08-12T08:09:03.060
> 
> 标签：android, slider, switch-statement

我想创建类似这样的滑块： ![在此处输入图像描述](../Images/2bfad6c99f2cd81d1665b0b0cda6e515.png)

android中有没有办法定义一个三态滑块？我是android开发的新手，所以请尽可能多地包含示例代码，这将非常有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-27T16:18:54.390

一个简单的例子可能像下面的代码。你可以玩一点图形，你会得到你想要的。

**布局/main.xml**

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/TableLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="10dp" >

    <include
        android:id="@+id/tableRow1_ref"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        layout="@layout/description" />

    <SeekBar
        android:id="@+id/seekBar1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:layout_marginTop="10dp"
        android:max="100" />

    <include
        android:id="@+id/tableRow1_ref"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        layout="@layout/description" />

    <SeekBar
        android:id="@+id/seekBar2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:max="100" />

</TableLayout> 
```

**布局/描述.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TableRow xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/tableRow1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="left"
        android:paddingLeft="5dp"
        android:text="@string/kid" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"
        android:text="@string/adult" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="right"
        android:paddingRight="5dp"
        android:text="@string/senior" />

</TableRow> 
```

**MainActivity.java**

```
package com.test.Slider;

import android.os.Bundle;
import android.support.v7.app.ActionBarActivity;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;

public class MainActivity extends ActionBarActivity
        implements OnSeekBarChangeListener{

    SeekBar sb1, sb2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        sb1 = (SeekBar)findViewById(R.id.seekBar1);
        sb2 = (SeekBar)findViewById(R.id.seekBar2);

        sb1.setOnSeekBarChangeListener(this);
        sb2.setOnSeekBarChangeListener(this);
    }

    @Override
    public void onProgressChanged(SeekBar seekBar, int progress,
            boolean fromUser) {
        // we don't need it
    }

    @Override
    public void onStartTrackingTouch(SeekBar seekBar) {
        // we don't need it     
    }

    @Override
    public void onStopTrackingTouch(SeekBar seekBar) {
        int mProgress = seekBar.getProgress();
        if(mProgress > 0 & mProgress < 26) {
            seekBar.setProgress(0);
        } else if(mProgress > 25 & mProgress < 76) {
            seekBar.setProgress(50);
        } else seekBar.setProgress(100);
    }   
} 
```

**输出：**

![滑块的屏幕截图](../Images/11e38b6e454c9b8a280b2504e5919203.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-27T17:33:24.513

有一个很好的库：[android-comboseekbar](https://github.com/karabaralex/android-comboseekbar)。使用它或看看它是如何工作的。

**屏幕** ![屏幕](../Images/b29981008a5b186146a75f28b564538c.png)

# android - Android：将大数据记录到 App 文件夹中

> ID：11920705
> 
> 赞同：0
> 
> 时间：2012-08-12T08:09:04.183
> 
> 标签：android, filesystems

`getExternalFilesDir()`用于获取应用程序文件夹的路径，`Android/data/data/your_package/` 允许保存将在删除应用程序时删除的数据！！！

我想安装大量数据（可能是 256 个月）。如何将这些数据安装在 sdcard 上（而不是安装到应用程序文件夹中），但要确保在我删除应用程序时这些数据会被删除！

我可以使用`getExternalStorageDirectory()`，但删除应用程序时数据不会被删除！

例如，谷歌地图应用程序会加载大量数据（地图）。如果可以删除地图应用程序，我想缓存的地图也应该删除！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T08:45:45.373

如[文档](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)中所述：

> 访问外部存储上的文件
> 
> 如果您使用 API 级别 8 或更高版本，请使用 getExternalFilesDir() 打开一个文件，该文件代表您应该保存文件的外部存储目录。此方法接受一个类型参数，该参数指定您想要的子目录的类型，例如 DIRECTORY_MUSIC 和 DIRECTORY_RINGTONES（传递 null 以接收应用程序文件目录的根目录）。如有必要，此方法将创建适当的目录。通过指定目录的类型，您可以确保 Android 的媒体扫描器将正确分类您在系统中的文件（例如，铃声被识别为铃声而不是音乐）。如果用户卸载您的应用程序，该目录及其所有内容将被删除。
> 
> 如果您使用 API 级别 7 或更低版本，请使用 getExternalStorageDirectory() 打开代表外部存储根目录的文件。然后，您应该将数据写入以下目录：
> 
> /Android/data//files/ 是你的 Java 风格的包名，比如“com.example.android.app”。如果用户的设备运行 API 级别 8 或更高版本并且他们卸载了您的应用程序，则此目录及其所有内容将被删除。

# android - BOOT_COMPLETED 不调用 BroadcastRecevier

> ID：11920712
> 
> 赞同：1
> 
> 时间：2012-08-12T08:10:45.173
> 
> 标签：android, broadcastreceiver, bootcompleted

我查看了这个网站上关于`BOOT_COMPLETED` 不调用`Broadcast Receiver`. 我认为我的问题类似于这个问题[BroadcastReceiver not working after BOOT_COMPLETED](https://stackoverflow.com/questions/6878816/broadcastreceiver-not-working-after-boot-completed)

但是，我并没有试图捕获超过`Intent`一种服务。我只是想要`BOOT_COMPLETED`行动。

你能看看我的代码，让我知道在哪里以及如何修复它吗？

这是清单：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.google.android.gcm.demo.app"
    android:versionCode="1"
    android:versionName="1.0" >

    <!-- GCM requires Android SDK version 2.2 (API level 8) or above. -->
    <!--
         The targetSdkVersion is optional, but it's always a good practice
         to target higher versions.
    -->
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <!-- GCM connects to Google Services. -->
    <uses-permission android:name="android.permission.INTERNET" />

    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />

    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <!--
     Creates a custom permission so only this app can receive its messages.

     NOTE: the permission *must* be called PACKAGE.permission.C2D_MESSAGE,
           where PACKAGE is the application's package name.

    -->
    <permission
        android:name="com.google.android.gcm.demo.app.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.google.android.gcm.demo.app.permission.C2D_MESSAGE" />

    <!-- This app has permission to register and receive data message. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

    <!-- permission for network state -->
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <uses-permission android:name="android.permission.BATTERY_STATS" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

    <!-- Main activity. -->

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name="com.google.android.gcm.demo.app.DemoActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.google.android.gcm.demo.app.sqllite.SQLViews" >
        </activity>
        <activity android:name="com.google.android.gcm.demo.app.ScheduleView" >
        </activity>
        <activity android:name="com.google.android.gcm.demo.app.ConventionView" >
        </activity>
        <activity android:name="com.google.android.gcm.demo.app.EventList.DataView" >
        </activity>
        <activity android:name="com.google.android.gcm.demo.app.EventList.EventDetails" >
        </activity>
        <activity android:name="com.google.android.gcm.demo.app.Alerts.AlertView" >
        </activity>
        <activity android:name="com.google.android.gcm.demo.app.Alerts.AlertDetails" >
        </activity>

        <service
            android:name="com.google.android.gcm.demo.app.Alerts.AlarmsService"
            class="com.google.android.gcm.demo.app.Alerts.AlarmsService" >
            <intent-filter>
                <action
                    android:name="com.google.android.gcm.demo.app.Alerts.AlarmsService"
                    android:value="com.google.android.gcm.demo.app.Alerts.AlarmsService" />
            </intent-filter>
        </service>

        <receiver
            android:name="com.google.android.gcm.demo.app.Alerts.AlarmsBroadcastReceiver"
            android:enabled="true"
            android:exported="true" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver>

        <!--
          BroadcastReceiver that will receive intents from GCM
          services and handle them to the custom IntentService.

          The com.google.android.c2dm.permission.SEND permission is necessary
          so only GCM services can send data messages for the app.

        -->
        <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>

                <!-- Receives the actual messages. -->
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <!-- Receives the registration id. -->
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="com.google.android.gcm.demo.app" />
            </intent-filter>
        </receiver>

        <!--
          Application-specific subclass of GCMBaseIntentService that will
          handle received messages.

          By default, it must be named .GCMIntentService, unless the
          application uses a custom BroadcastReceiver that redefines its name.

        -->

        <service android:name=".GCMIntentService" />
    </application>

</manifest> 
```

广播接收器：

```
package com.google.android.gcm.demo.app.Alerts;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class AlarmsBroadcastReceiver extends BroadcastReceiver {

    private static final String TAG = "BootReceiver";

    Intent startServiceIntent;
    @Override
    public void onReceive(Context context, Intent intent) {

        if (intent.getAction().equals("android.intent.action.BOOT_COMPLETED")) {

            startServiceIntent = new Intent(context, AlarmsService.class);
            context.startService(startServiceIntent);
            Log.d("TAG", "alarmBroadcastReceiver");

            System.out.println("alarm broadcast reciver...");

        }

    }

} 
```

服务：

```
 package com.google.android.gcm.demo.app.Alerts;

import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

public class AlarmsService extends Service {

       String tag="alerttService";
       @Override
       public void onCreate() {
           super.onCreate();
           Toast.makeText(this, "Service created...", Toast.LENGTH_LONG).show();      
           Log.i(tag, "Service created...");
       }

       public int onStartCommand(Intent intent, int flags, int startId) {
            Log.d("TAG", "Service command started.");
            return super.onStartCommand(intent, flags, startId);
        }

       @Override
       public void onStart(Intent intent, int startId) {      
           super.onStart(intent, startId);

           Toast.makeText(this, "Service started...", Toast.LENGTH_LONG).show();   
           Log.i(tag, "Service started. ..");
       }

       @Override
       public void onDestroy() {
           super.onDestroy();
           Toast.makeText(this, "Service destroyed...", Toast.LENGTH_LONG).show();
       }

       @Override
       public IBinder onBind(Intent intent) {
           return null;
       }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T21:27:14.003

我使用的是在为 Jellybean 安装 sdk 之前创建的模拟器。我为所有版本创建了新的模拟器，现在它可以在 Android 8 及更高版本的模拟器上运行。

# javascript - 为什么这对编码和解码 HTML 有效

> ID：11920718
> 
> 赞同：1
> 
> 时间：2012-08-12T08:12:01.737
> 
> 标签：javascript, jquery

我试图找到一种简单快捷的方法来解码和编码文本。

我发现的最好的是下面这个。

1.  使用它有什么不同`$("<div/>")`吗？为什么即使没有 div 也在这里？

2.  你有什么更简单、更快捷的 HTML 编码和解码方法吗？

代码：

```
var myHTMLstring = "<p /> + <br /> sdfsdfdsfdsfsdfsdfsdfsfsfsfdsf";

var myEncoded = $('<div/>').text(myHTMLstring).html();
//&lt;p /&gt; + &lt;br /&gt; sdfsdfdsfdsfsdfsdfsdfsfsfsfdsf

var myDecoded = $('<div/>').html(myEncoded).text();
//<p /> + <br /> sdfsdfdsfdsfsdfsdfsdfsfsfsfdsf 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T08:44:23.863

它之所以有效，是因为 jQuery`text`方法使用`createTextNode()`，它用它们的 HTML 实体等价物替换特殊字符。您可以使用该方法^(**1**)来创建替代方案，但如果您仍然使用 jQuery，那么您使用的方法既好又快。

^(**1**)这将是普通的 javascript 等价物：

```
function encode(htmlstr){
   var x = document.createTextNode()
      ,y = document.createElement('div');;
   x.textContent = htmlstr;
   y.appendChild(x);
   return y.innerHTML;
}

function decode(htmlstr){
   var y = document.createElement('div');;
   y.innerHTML = htmlstr;
   return y.innerText || y.textContent;
} 
```

甚至一口气：

```
function htmlcode(htmlstr,doDecode){
   var x = document.createTextNode()
      ,y = document.createElement('div');;
   x.textContent = htmlstr;
   if (doDecode) { y.innerHTML = htmlstr; }
   else { y.appendChild(x); }
   return doDecode? (y.innerText || x.textContent) : y.innerHTML;
} 
```

[jsfiddle 演示](http://jsfiddle.net/KooiInc/kTWwq/)

# python - 熊猫数据框 - 根据列标题更改值

> ID：11920721
> 
> 赞同：6
> 
> 时间：2012-08-12T08:12:11.427
> 
> 标签：python, pandas

我有一个`dataframe`如下所示：

```
In [74]: data2

Out[74]: 
            a  b  c

2012-06-12  0  1  1
2012-06-13  1  1  0
2012-06-14  1  0  1
2012-06-15  1  0  1
2012-06-16  1  1  0
2012-06-17  1  0  1 
```

有没有办法让值 = 值 = 1 的列标题？

结果df：

```
 a  b  c

2012-06-12  0  b  c
2012-06-13  a  b  0
2012-06-14  a  0  c
2012-06-15  a  0  c
2012-06-16  a  b  0
2012-06-17  a  0  c 
```

然后删除 = 0 的值，使 df 减少到 2 列：（此时列标题不相关）

结果df：

```
 1  2  
2012-06-12  c  b  
2012-06-13  a  b  
2012-06-14  a  c  
2012-06-15  a  c  
2012-06-16  a  b  
2012-06-17  a  c 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T02:18:09.040

您还可以召唤一些更深的 pandas-fu 并执行以下操作：

```
In [28]: df.apply(lambda x: x.astype(object).replace(1, x.name))
Out[28]: 
            a  b  c
2012-06-12  0  b  c
2012-06-13  a  b  0
2012-06-14  a  0  c
2012-06-15  a  0  c
2012-06-16  a  b  0
2012-06-17  a  0  c 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-12T11:00:41.053

```
from pandas import *
df = DataFrame([[0, 1, 1], [1, 1, 0], [1, 0, 1],], columns=['a','b','c'])

foo = []
for i in df.index:
    foo.append( df.columns[df.ix[i] == 1])
DataFrame(foo, index = df.index) 
```

返回：

```
 0  1
0  b  c
1  a  b
2  a  c 
```

# image-processing - 使用局部二值模式进行人脸检测

> ID：11920723
> 
> 赞同：-1
> 
> 时间：2012-08-12T08:12:22.710
> 
> 标签：image-processing, computer-vision, histogram, face-detection

如您所知，LBP 是人脸检测的强大功能。通常，SVM 或其他类似的分类器用于此特征的分类目的。但在一些论文中，使用了像 AdaBoost 这样的 Adaptive Boosting 方法。使用具有类似 haar 特征的 AdaBoost 是很清楚的，因为每个弱分类器都是一个类似 haar 的特征，具有 [x,y,w,h] 我们为它计算 [阈值, 极性]。但是在 LBP 的情况下，我不明白应该使用什么结构？我阅读[了这篇论文](http://s3.picofile.com/file/7467070749/Robust_face_detection_using_local_gradient_patterns_and_evidence_accumulatin.rar.html)，它将 LBP（实际上是 LGP）应用于训练图像的每个像素，并为每个特征计算了一个直方图。但是我们如何使用 AdaBoost 和一堆直方图呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:39:46.407

Opencv 中有一个具有 LBP 功能的 Haarcascade。您可以使用它或查看代码以了解它是如何为 LBP 功能完成的。

# python - Python - 我可以知道是否发生了打印

> ID：11920725
> 
> 赞同：3
> 
> 时间：2012-08-12T08:12:43.570
> 
> 标签：python, command-line

我写了一个简单的python脚本。在我使用的脚本期间

```
os.system ("diff file1 file2") 
```

检查两个文本文件是否相似。如果没有打印出来，我知道文件是相似的。如果没有打印任何内容，我想在命令行中打印一些内容，例如“文件相似”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T08:18:41.210

```
>>> import filecmp
>>> filecmp.cmp('file1.txt', 'file1.txt')
True 
```

如果`True`然后只是打印消息，就像两者都是相似的
[filecmp](http://docs.python.org/library/filecmp.html) - 一个字节一个字节的有效比较它是

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-12T08:20:20.240

像这样的东西

```
import os
import copy
import subprocess

def command(command):
    env = copy.deepcopy(os.environ)
    proc = subprocess.Popen(command,
                shell=True, env=env, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    result = proc.stdout.read()
    return result

ret = command("cmd /c diff file1 file2")
if ret == "":
    print "no result files are same"
else:
    print "results: \r\n %s" % ret 
```

对于任何类型的命令，这是一个更通用的解决方案。

# mysql - 在 MYSQL 查询中使用 GROUP BY 和 union

> ID：11920727
> 
> 赞同：1
> 
> 时间：2012-08-12T08:13:03.567
> 
> 标签：mysql, group-by, union

这是我关于 SO 的第一个问题。所以我有一个名为 posts 的 MYSQL 表，其中包含以下列：

发布，标签1，标签2。

假设表中有 10 行。其中 9 个帖子仅在 tag1 中具有标签，第十个在 tag1 和 tag2 中具有标签（tag2 中的标签在 tag1 中与其他帖子重复。）表格如下所示：

```
 Tag1                Tag2
computer               -
tv                     -
computer               -
tv                     -
laptop                 -
bicycle                -
stereo                 -
computer             laptop
tv                     -
laptop                 - 
```

我想要的功能是查询表以获取出现频率最高的标签，将它们组合在一起，然后按照频率从高到低的顺序对它们进行排序。这是我的 mysql 查询（我正在使用 PDO）：

```
SELECT count, tag 
FROM (SELECT count(tag1) as count, tag1 as tag FROM posts) as a 
UNION ALL 
SELECT count(tag2) as count, tag2 as tag 
FROM posts 
```

此查询不起作用，因为它没有向我显示存在的每个标签，而且它似乎也没有将列 tag2 中的一个标签添加到来自 tag1 的结果中，而是存在重复。因此，我没有看到笔记本电脑出现 3 次，而是看到笔记本电脑出现了两次，然后又出现了一次。

我认为这可以通过 GROUP BY 解决，但是当我尝试添加 GROUP BY 时，mysql 会抛出一个通用语法错误，说要查看我的数据库服务器的文档。所以我想我不确定将 GROUP BY 放在哪里，我可能认为我的查询根本不正确。请提供任何帮助....我查看了有关使用 group by with union 的许多其他问题，只是没有找到答案，或者我对此理解不够，无法知道何时看到答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T08:19:41.103

我认为您的意思是这样的（[sqlfiddle](http://sqlfiddle.com/#!3/95350/1)）：

```
SELECT COUNT(*), tag
FROM
(
    SELECT Tag1 AS tag
    FROM posts
    UNION ALL
    SELECT Tag2 AS tag
    FROM posts
) AS alltags
GROUP BY tag 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T08:29:08.403

尝试：

```
SELECT tag, count(*) AS frequency
FROM
(
  SELECT tag1 AS tag FROM posts
  UNION ALL SELECT tag2 AS tag FROM posts
) AS alltags
WHERE tag IS NOT NULL
GROUP BY tag
ORDER BY frequency DESC 
```

请注意，您需要 UNION ALL 因为 UNION 执行隐式不同

# iphone - 如何在根视图控制器上设置标签文本

> ID：11920733
> 
> 赞同：0
> 
> 时间：2012-08-12T08:14:17.817
> 
> 标签：iphone, objective-c, uiviewcontroller

在从堆栈上的视图调用下面的代码之前或之后，我想在程序将弹出的根视图上设置标签的文本。

```
[self.navigationController popViewControllerAnimated:YES]; 
```

将视图控制器推入堆栈时，我可以用另一种方式（如下所示），但我不知道从堆栈弹出时该怎么做

```
- (PushedViewController *) pushedViewController {
NSLog(@"Initialise view");
if (pushedViewController == nil) {
    pushedViewController = [[PushedViewController alloc] initWithNibName:@"PushedView" bundle:nil];
}
return pushedViewController;
}

#pragma mark -
#pragma mark Table view delegate
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

[TableView deselectRowAtIndexPath:indexPath animated:YES];

Table* tableRow =[fetchedResultsController objectAtIndexPath:indexPath];

[self.navigationController pushViewController:self.pushedViewController animated:YES];
self.pushedViewController.code.text = tablerow.code;

} 
```

如果有人能告诉我如何在不创建视图的新实例的情况下访问和设置堆栈上的视图变量，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:20:14.527

您真正想要的是进行类似委托的回调。这样你的孩子控制器就会有

```
@protocol PushedViewControllerDelegate
@required

- (void)controller:(PushedViewController *)controller didUpdateSome:(id)data;

@end 
```

和一个财产

```
@property (nonatomic, assign) id<PushedViewControllerDelegate> delegate 
```

现在，您可以将根控制器分配给`delegate`子控制器，它可以通知任何所需的更改。

# facebook - 将应用程序添加到页面选项卡对话框 - 如何获取添加选项卡的页面的 ID？

> ID：11920742
> 
> 赞同：-1
> 
> 时间：2012-08-12T08:15:43.627
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-apps, facebook-page

我必须在页面选项卡中使用我的应用程序为不同页面显示不同的内容。

我想允许用户使用将应用[添加到页面对话框添加我的应用。](https://developers.facebook.com/docs/reference/dialogs/add_to_page/)

问题是我必须获取页面 id 才能知道页面选项卡应用程序添加到的位置。

如果这是不可能的：提供一种简单的方法将自定义内容提供给页面选项卡中的不同页面的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T15:47:40.373

signed_request**被**传递给所有*页面选项卡*并包含页面 id，以及用户的管理员状态以及用户是否喜欢该页面。即使用户未授权该应用程序，此信息也可用。

# java - 缓存数据库查询和结果集

> ID：11920743
> 
> 赞同：3
> 
> 时间：2012-08-12T08:16:06.997
> 
> 标签：java, mysql, caching

我正在创建一个 java 桌面应用程序。

我使用 mysql 数据库作为后端。

在我的应用程序中，一些查询被执行了不止一次，所以我想缓存查询结果并在下次使用。

对于缓存我尝试准备好的语句，但我没有得到任何积极的结果。

有没有其他**缓存查询和查询结果集的**方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:37:42.833

请检查您使用的 mysql 版本。似乎在 MySQL 5.1.17 之前，prepared statements 不使用查询缓存。 [http://dev.mysql.com/doc/refman/5.1/en/query-cache-operation.html](http://dev.mysql.com/doc/refman/5.1/en/query-cache-operation.html)

它还提到了查询缓存不起作用的一些条件。我认为替代方案是使用 memcache，但我不知道它有多好。但可以肯定的是，如果您经常更新，所有这些缓存方法都无法正常工作。我猜你对缓存并没有太多的控制权，当实际表有更新时它会失效（以避免脏读）所以我想你的表在生产中并没有那么频繁地更新表。如果是这种情况，您可以很好地考虑使用应用程序级别的缓存，当然还有缓存失效服务/标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T08:18:59.963

如果你想从你的 MySQL 服务器获得优化和快速的响应，那么你需要向你的 MySQL 服务器添加以下两个配置指令：

```
query_cache_size=SIZE
The amount of memory (SIZE) allocated for caching query results. The default value is 0, which disables the query cache.

Now setup cache size 16Mb:
    mysql> SET GLOBAL query_cache_size = 16777216; 
```

或者

```
Append config directives as follows into my.cnf file:

query_cache_size = 268435456
query_cache_type=1
query_cache_limit=1048576 
```

# c++ - 这个foreach宏实现有什么问题吗

> ID：11920746
> 
> 赞同：0
> 
> 时间：2012-08-12T08:16:33.067
> 
> 标签：c++, c++11, macros, foreach, cilk-plus

在英特尔 Cilk Plus 扩展中，有这个关键字 cilk_for（或实际上是 _Cilk_for）。它类似于 for 的关键字，但更具限制性，并且它的迭代并行运行。我本着 BOOST_FOREACH 的精神写了一个便利宏，它在内部使用了 cilk_for。你能看出以下实现有什么问题吗？

```
#pragma once

#include <iterator>
#include <boost/preprocessor/cat.hpp>
#include <cilk/cilk.h>

#define cilk_foreach(_decl_var_, _expr_range_) \
    CILK_FOREACH_I(_decl_var_, _expr_range_, __COUNTER__)

#define CILK_FOREACH_I(_decl_var_, _expr_range_, _id_)               \
    CILK_FOREACH_II(_decl_var_,                                      \
                    _expr_range_,                                    \
                    BOOST_PP_CAT(_range_3s236dw221GyVcf46_, _id_),   \
                    BOOST_PP_CAT(_end_5Y60u42bIp7DZd88f2c_, _id_),   \
                    BOOST_PP_CAT(_itr_6V970q8n4Etv0i8bf50_, _id_),   \
                    BOOST_PP_CAT(_continue_4rtWH641r5cXqU_, _id_))

#define CILK_FOREACH_II(_decl_var_, _expr_range_, _range_, _end_, _itr_, _cont_) \
    auto&& _range_ = _expr_range_;                                               \
    auto   _end_   = std::end(_range_);                                          \
                                                                                 \
    cilk_for (auto _itr_ = std::begin(_range_); _itr_ != _end_; ++_itr_)         \
        if (auto _cont_ = true)                                                  \
            for (_decl_var_ = *_itr_; _cont_; _cont_ = false) 
```

你会像这样使用它：

```
std::vector<int> values (10);

cilk_foreach (auto& value , values)
{
    value += 123;
} 
```

**编辑**

```
template <typename T>
struct Wrap
{
    T& data;

    explicit Wrap(T&& data)
        : data (data)
    {}

    operator bool() const
    {
        return true;
    }
};

template <typename T>
Wrap<T> wrap(T&& data)
{
    return Wrap<T>(std::forward<T>(data));
}

#define cilk_foreach(_decl_var_, _expr_range_) \
    CILK_FOREACH_I(_decl_var_, _expr_range_, __COUNTER__)

#define CILK_FOREACH_I(_decl_var_, _expr_range_, _id_)              \
                                                                    \
    CILK_FOREACH_II(_decl_var_,                                     \
                    _expr_range_,                                   \
                    BOOST_PP_CAT(_range_3s236dw221GyVcf46_, _id_),  \
                    BOOST_PP_CAT(_itr_6V970q8n4Etv0i8bf50_, _id_),  \
                    BOOST_PP_CAT(_continue_4rtWH641r5cXqU_, _id_))

#define CILK_FOREACH_II(_decl_var_, _expr_range_, _range_, _itr_, _cont_)  \
                                                                           \
    if (auto _range_ = wrap(_expr_range_))                                 \
        cilk_for (auto _itr_  = std::begin(_range_.data);                  \
                       _itr_ != std::end  (_range_.data);                  \
                     ++_itr_)                                              \
            if (auto _cont_ = true)                                        \
                for (_decl_var_ = *_itr_; _cont_; _cont_ = false) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T08:38:50.747

您可能应该阅读以下内容：[C++ Boost: Any gotchas with BOOST_FOREACH?](https://stackoverflow.com/questions/716865/c-boost-any-gotchas-with-boost-foreach)

一个明显的问题是您的 marco 没有扩展成具有它看起来具有的词汇类型的东西。例如，考虑

```
if(condition)
    cilk_foreach (auto& value , values) {
        //stuff
    } 
```

甚至更糟

```
if(condition)
    cilk_foreach (auto& value , values) 
        // one-line stuff
else
    // other stuff 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T08:57:19.147

Hurkyl 的回答是正确的，为了防止这个错误，我使用了这个宏：

```
#define foreach(ARRAY, ITEM) \
    for (size_t i = 0, b = 1; b && i != (ARRAY).size(); ++i, b = !b) \
        for (auto &ITEM = (ARRAY)[i]; b; b = 0) 
```

是的，它有一些缺点，但确实暴露了真正的 for 循环行为，即使像在另一个答案中一样嵌套。按预期休息并继续工作。

你会像这样使用它：

```
std::vector<int> values(10);
foreach (values, val)
    val += 123; 
```

# mobile - PhoneGap 应用程序查询

> ID：11920749
> 
> 赞同：0
> 
> 时间：2012-08-12T08:16:50.797
> 
> 标签：mobile, cordova, web

我是移动应用程序开发的新手。我开始知道 phonegap 利用 html、css 和 js 等 Web 技术来制作跨平台的 monile 应用程序。我有一些关于电话间隙的询问，但我找不到一些明确的答案。

1.  phonegap 是如何工作的？我知道它使用没有浏览器边框的网络浏览器来运行应用程序。但是运行应用程序是否需要用户先连接到互联网？

2.  当我们使用 phonegap for android 开发移动应用程序时，我们可以通过简单地使用 phonegap 为开发人员提供的 phonegap 构建平台来使用相同的 html、css 和 js 代码来构建 iphone、windows 7 手机、黑莓应用程序？

3.  如果应用程序不使用本机移动设备（如加速度计），使用 phonegap 制作的网络应用程序能否在普通桌面网络浏览器上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:52:20.037

1.  **不**，[PhoneGap](http://phonegap.com/)应用程序不需要互联网连接。只需将所需的所有 html/js/css 放在 web 文件夹中并使用本地引用。

2.  **“是的”**。您将不得不为某些平台引用不同的 PhoneGap .js 文件，但除此之外，您应该能够使用相同的 Web 文件。但是，您可能希望修改您的应用程序以更好地适应每个平台。例如，iOS 包含一个~~初始屏幕~~默认图像，您可能希望在其他平台上以不同方式处理它。这些差异可以通过使用[设备 api](http://docs.phonegap.com/en/1.0.0/phonegap_device_device.md.html)或作为构建管道的一部分来处理。

3.  **是**的。如果您不使用任何移动设备细节，它将像任何其他 HTML5 应用程序一样运行。

# android - Android：以编程方式从 Java 代码填充 Spinner

> ID：11920754
> 
> 赞同：87
> 
> 时间：2012-08-12T08:17:59.477
> 
> 标签：android, android-layout, android-spinner

如何以编程方式从 java 代码中填充微调器？

我在布局中有一个微调器，如下所示：

```
 <Spinner
     android:id="@+id/consultation_deseases"
     android:layout_width="@dimen/bigSpinnerWidth"
     android:layout_height="@dimen/bigSpinnerHeight"
     android:prompt="@string/disease_prompt" /> 
```

使用 java 代码，我需要创建适配器并添加项目。

* * *

## 回答 #1

> 赞同：238
> 
> 时间：2012-08-12T08:22:39.990

```
// you need to have a list of data that you want the spinner to display
List<String> spinnerArray =  new ArrayList<String>();
spinnerArray.add("item1");
spinnerArray.add("item2");

ArrayAdapter<String> adapter = new ArrayAdapter<String>(
    this, android.R.layout.simple_spinner_item, spinnerArray);

adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
Spinner sItems = (Spinner) findViewById(R.id.spinner1);
sItems.setAdapter(adapter); 
```

还要找出选择了什么，你可以做这样的事情

```
String selected = sItems.getSelectedItem().toString();
if (selected.equals("what ever the option was")) {
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-07-03T01:15:40.167

这是一个完全以编程方式进行的示例：

*   初始化一个 Spinner。
*   通过字符串列表填充数据。
*   调整 Spinner 的大小并将其添加到我的视图中。
*   格式化 Spinner 字体（字体大小、颜色、填充）。
*   清除微调器。
*   向 Spinner 添加新值。
*   重绘微调器。

我正在使用以下类变量：

```
Spinner varSpinner;
List<String> varSpinnerData;

float varScaleX;
float varScaleY; 
```

A - 初始化并渲染 Spinner（varRoot 是指向我的主要活动的指针）：

```
public void renderSpinner() {

    List<String> myArraySpinner = new ArrayList<String>();

    myArraySpinner.add("red");
    myArraySpinner.add("green");
    myArraySpinner.add("blue");     

    varSpinnerData = myArraySpinner;

    Spinner mySpinner = new Spinner(varRoot);               

    varSpinner = mySpinner;

    ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(varRoot, android.R.layout.simple_spinner_item, myArraySpinner);
    spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); // The drop down vieww
    mySpinner.setAdapter(spinnerArrayAdapter); 
```

B - 调整大小并将微调器添加到我的视图中：

```
 FrameLayout.LayoutParams myParamsLayout = new FrameLayout.LayoutParams(
            FrameLayout.LayoutParams.MATCH_PARENT, 
            FrameLayout.LayoutParams.WRAP_CONTENT);
    myParamsLayout.gravity = Gravity.NO_GRAVITY;             

    myParamsLayout.leftMargin = (int) (100 * varScaleX);
    myParamsLayout.topMargin = (int) (350 * varScaleY);             
    myParamsLayout.width = (int) (300 * varScaleX);;
    myParamsLayout.height = (int) (60 * varScaleY);;

    varLayoutECommerce_Dialogue.addView(mySpinner, myParamsLayout); 
```

C - 制作 Click 处理程序并使用它来设置字体。

```
 mySpinner.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int myPosition, long myID) {

            Log.i("renderSpinner -> ", "onItemSelected: " + myPosition + "/" + myID);

            ((TextView) parentView.getChildAt(0)).setTextColor(Color.GREEN);
            ((TextView) parentView.getChildAt(0)).setTextSize(TypedValue.COMPLEX_UNIT_PX, (int) (varScaleY * 22.0f) );
            ((TextView) parentView.getChildAt(0)).setPadding(1,1,1,1);

        }

        @Override
        public void onNothingSelected(AdapterView<?> parentView) {
            // your code here
        }

    });

} 
```

D - 用新数据更新 Spinner：

```
private void updateInitSpinners(){

     String mySelected = varSpinner.getSelectedItem().toString();
     Log.i("TPRenderECommerce_Dialogue -> ", "updateInitSpinners -> mySelected: " + mySelected);

     varSpinnerData.clear();

     varSpinnerData.add("Hello World");
     varSpinnerData.add("Hello World 2");

     ((BaseAdapter) varSpinner.getAdapter()).notifyDataSetChanged();
     varSpinner.invalidate();
     varSpinner.setSelection(1);

} 
```

}

我在 updateInitSpinners 中无法解决的是做 varSpinner.setSelection(0); 并自动激活自定义字体设置。

更新：

这个“丑陋”的解决方案解决了 varSpinner.setSelection(0); 问题，但我对此不太满意：

```
private void updateInitSpinners(){

    String mySelected = varSpinner.getSelectedItem().toString();
    Log.i("TPRenderECommerce_Dialogue -> ", "updateInitSpinners -> mySelected: " + mySelected);

    varSpinnerData.clear();

    ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(varRoot, android.R.layout.simple_spinner_item, varSpinnerData);
    spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
    varSpinner.setAdapter(spinnerArrayAdapter);  

    varSpinnerData.add("Hello World");
    varSpinnerData.add("Hello World 2");

    ((BaseAdapter) varSpinner.getAdapter()).notifyDataSetChanged();
    varSpinner.invalidate();
    varSpinner.setSelection(0);

} 
```

}

希望这可以帮助......

# c# - 属性的按值传递语义

> ID：11920758
> 
> 赞同：0
> 
> 时间：2012-08-12T08:18:48.497
> 
> 标签：c#, oop, design-patterns, properties

我经常遇到我希望我的类属性表现得像结构一样的情况。*（编辑：实际上，我误解了结构的工作原理。我不希望我的属性表现得完全像一个结构；我希望它在被操作和复制时表现不同。）*

我想知道这是否可能，如果可以，这是否是一个好主意。

假设我有 2 个简单的类：

```
public class Cube
{
    public Point Center {get ; set;}
    ... // some more cube properties
}

public class Point 
{
    public virtual Double X {get {return this.x;} set{this.x = value;}}
    public virtual Double Y {...}
    public virtual Double Z {...}
    ...
} 
```

现在我想像这样访问 Cube.Center：

```
Cube cube = new Cube();
cube.Center.X += 10.0; // cube1 should move 10.0 in X direction

Point point = cube.Center;
point.X += 10.0 // cube1 should NOT move here

Cube cube2 = new Cube();
cube2.Center = point;
cube2.Center.Y += 5.0; // cube2 should move, but cube1 should stay in place. 
```

据我了解，如果 Point where 是一个结构而不是一个类，它将按值传递，上面将是预期的行为。*（编辑：我误解了结构的工作原理。类似的东西`cube.Center.X += 10.0`不适用于结构）*

然而：

*   [可变结构是邪恶的](https://stackoverflow.com/questions/441309/why-are-mutable-structs-evil)
*   对象可能包含比这个小示例更多的字段，Microsoft 建议仅使用非常小的内存占用的结构
*   最重要的是：一个结构不能从一个类继承，所以这样的事情是不可能的结构：有一个私有的子类 Point 为立方体中心，每当它改变时都会做一些额外的事情。

    ```
    public class Cube
    {

       // private child of Point, can only be used by Cube
       private class cubeCenter: Point
       {
           private Cube cube; // The cube this point belongs to

           public override double X 
           {
               get {return base.X} 

               // custom setter: whenever X changes, 
               // recalculate the bounding box of the cube
               set {base.X=value; cube.recalculateBoundingBox();} 
           }
           ... // + other overrides & constructor
       }

       private cubeCenter _center; 

       public Point Center 
       {
           get {return this._center} 
           set {this._center = new cubeCenter(value, this);}
       }

       ...
    }

    cube1.Center.X += 10.0; // now cube1 moves AND its bounding box is recalculated. 
    ```

所以我正在寻求的行为是这样的： - 应该可以修改子属性，如`cube1.Center.X`. - 每当发生这种情况时，我希望我的自定义`cubeCenter`设置器执行。- 但是，当有人抓住整个 Center:`Point p = cube1.Center`时，分配的对象应该只是一个`Point`没有连接到立方体的普通对象

*这可能吗，也许使用隐式转换运算符？*

*这是一个糟糕的设计选择吗？我愿意接受其他建议。*

（我考虑的一件事是使 Points 不可变以避免所有这些问题。但是在这种情况下，我找不到用于更改中心的不难看的语法：）

```
 // this is the immutable equivalent to cube1.Center.X += 10.0
    cube1.Center = cube1.Center.WithX ( cube1.Center.X + 10.0 ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T08:28:24.563

我倾向于一个不可变的`struct Point`. 移动它很简单：

```
public static Point operator +(Point a, Point b) 
{
   return new Point(a.X + b.X, a.Y + b.Y, a.Z + b.Z);
}
⋮
cube1.Center = cube1.Center + new Point(10, 0, 0); 
```

其他一切都应该很好地到位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T08:45:12.503

您可以编写一个克隆方法并使副本显式，这很好。为了便于阅读，您必须明确区分是否复制，否则调试代码可能是一场噩梦。

```
public class Point
{
    public virtual Double X {get {return this.x;} set{this.x = value;}}
    public virtual Double Y {...}
    public virtual Double Z {...}

    public Point Clone() {
       return this.MemberwiseClone();
    }
}

Point point = cube.Center.Clone();
point.X += 10.0 // cube1 will NOT move here 
```

这`MemberwiseClone`将制作对象的浅拷贝，您必须自己克隆嵌套的引用类型。

```
public class Cube
{
   public Point Center {get ; set;}

   public Cube Clone() {
       var cube = this.MemberwiseClone();
       cube.Center = this.Center.Clone();
       return cube;
   } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T08:26:06.437

要创建真正的值语义，只需保留一个`Point`永远不会传递且永远不会替换它的实例（您需要将克隆功能添加到`Point`）：

```
public class Cube {
    private readonly Point center = new Point();

    public Point Center {
        get {
            return center.Clone();
        }
        set {
            center.X = value.X;
            center.Y = value.Y;
        }
    }
    ... // some more cube properties
} 
```

请注意，这些语义会阻止您使用`cube.Center.X = ...`代码 - 但对于结构也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T08:49:38.950

不可能准确地得到你想要的，因为属性的 getter 无法知道该值是用于操作还是用于复制。

您可以封装该点，并提供克隆它的方法和操作它的属性：

```
public class Cube {
  private Point _center;
  public Point CopyCenter() { return _center.Clone(); }
  public double CenterX { get { return _center.X; } set { _center.X = value; } }
  public double CenterY { get { return _center.Y; } set { _center.Y = value; } }
  public double CenterZ { get { return _center.Z; } set { _center.Z = value; } }
} 
```

用法的语法不会完全相同，但至少很清楚发生了什么。

# php - 在 PHP 网站中停止没有 .htaccess 的目录列表

> ID：11920761
> 
> 赞同：2
> 
> 时间：2012-08-12T08:19:05.537
> 
> 标签：php, .htaccess, directory-listing

我的网站主机不允许`.htaccess`。现在如何在这种情况下停止目录列表？

`index.php/index.html`除了& ，还有其他选择`.htaccess`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T02:44:58.600

如您所知，在 Apache 服务器上，仅当您要访问的目录中没有 index.htm、index.html、index.php 等时才会给出目录列表。

因此，最简单的解决方案是在每个文件夹中放置一个空白 index.php - 特别是因为您无法自己更改配置。

我不久前编写了以下代码 - 您将它放在您不希望人们获得目录列表的每个文件夹中 - 它会将用户返回到他们尝试访问的站点的索引。

**您需要在目录的根目录中有一个 README.txt 文件才能使其工作 - 或者只需将其更改为那里的文件。**

```
<?php
    $i=0;
    while(!file_exists('README.txt')){
        chdir("..");
        $i--;
    }
    header("Location: ".substr($_SERVER['PHP_SELF'],0,strrpos(dirname($_SERVER['PHP_SELF']),'/',$i)));
?> 
```

一个更简单的替代方案是：

```
<?php header("Location: /"); ?> 
```

# java - Java neo4j、REST 和内存

> ID：11920763
> 
> 赞同：2
> 
> 时间：2012-08-12T08:19:29.757
> 
> 标签：java, memory-management, jersey, neo4j

我已经在 J​​ersey tomcat 下为 REST API 部署了一个使用 neo4j java 嵌入式版本的应用程序。通过使用 jconsole 测量内存使用情况，我注意到每个 REST 调用都会增加 200Mb 的内存（我认为这是因为整个图形被加载到内存中）。因此，只需 5 次调用，服务器就分配了 1Gb 的内存，这是很多！要清理内存，我必须等待垃圾收集器（阈值设置为 1Gb）。

这是正常行为，因为我使用的是 neo4j java 嵌入式版本，还是我做错了什么？当 API 调用结束时，我应该怎么做才能释放内存？

这里示例代码：

```
@GET
@Produces(MediaType.APPLICATION_JSON + ";charset=utf-8")
public Response getApi( @QueryParam("q")    String query){
try{
// new neo instance here with EmbeddedGraphDatabase
... some code
// stop neo
}catch(Exception ex){
// stop neo
}
return response.ok("json data here").build();   
} 
```

谢谢，丹尼尔

-------- 完整的类代码 ----------

```
 import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.QueryParam;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;

import org.neo4j.graphdb.GraphDatabaseService;
import org.neo4j.kernel.EmbeddedGraphDatabase;

@Path("/API")
public class API {

     @GET
     @Produces(MediaType.APPLICATION_JSON)
     public Response apiCall(@QueryParam("q") String query){
        GraphDatabaseService graphDb; 
        try{
            // start neo
            graphDb = new EmbeddedGraphDatabase( "/var/neo4jdb/" );
            this.registerShutdownHook( graphDb );

            // API + NEO code here..

            // stop neo
            graphDb.shutdown();

        }catch(Exception ex){
            // stop neo
            graphDb.shutdown();
        }

        Response response = null;
        return response.ok("This is your query: "+query).build(); 

     }

    /**
     * Server shutdown
     */
    public void registerShutdownHook( final GraphDatabaseService graphDb ){
        // Registers a shutdown hook for the Neo4j instance so that it
        // shuts down nicely when the VM exits (even if you "Ctrl-C" the
        // running example before it's completed)
        Runtime.getRuntime()
                .addShutdownHook( new Thread()
                {
                    @Override
                    public void run()
                    {
                        graphDb.shutdown();
                    }
                } );
    }

} 
```

然后我像这样通过浏览器调用 REST 服务`http://localhost:8080/API?q=test`

## 更新单例

```
 import javax.ws.rs.GET;
    import javax.ws.rs.Path;
    import javax.ws.rs.Produces;
    import javax.ws.rs.QueryParam;
    import javax.ws.rs.core.MediaType;
    import javax.ws.rs.core.Response;

    import org.neo4j.graphdb.GraphDatabaseService;
    import org.neo4j.kernel.EmbeddedGraphDatabase;

    @Path("/API")
    public class API {

         @GET
         @Produces(MediaType.APPLICATION_JSON)
         public Response apiCall(@QueryParam("q") String query){
            GraphDatabaseService graphDb; 
            try{
                // start neo
                Neo4jSingleton neo4jInstance = new Neo4jSingleton();
                GraphDatabaseService graphDb = null;
                graphDb = neo4jInstance.getInstance(DB_PATH);
                this.registerShutdownHook( graphDb );

                // API + NEO code here..
                // cypher query
                        ExecutionEngine engine = new ExecutionEngine(graphDb); 
                        String queryString = "Cypher query code";
                        ExecutionResult result = engine.execute( queryString );
                        // fetch results here..

                // never stop neo now with singleton

            }catch(Exception ex){
                // stop neo
                graphDb.shutdown();
            }

            Response response = null;
            return response.ok("This is your query: "+query).build(); 

         }

        /**
         * Server shutdown
         */
        public void registerShutdownHook( final GraphDatabaseService graphDb ){
            // Registers a shutdown hook for the Neo4j instance so that it
            // shuts down nicely when the VM exits (even if you "Ctrl-C" the
            // running example before it's completed)
            Runtime.getRuntime()
                    .addShutdownHook( new Thread()
                    {
                        @Override
                        public void run()
                        {
                            graphDb.shutdown();
                        }
                    } );
        }

    }
public class Neo4jSingleton {

    private static GraphDatabaseService db;

    public Neo4jSingleton() {

    }

    /*
     * il metodo di restituire un'unica istanza
     * contenente il database neo4j
     */
    public static GraphDatabaseService getInstance(String DB_PATH)
      {

        //Boolean isDbChange=verifyDbChange();

        if (db == null /*|| isDbChange*/)
        {
          db = new EmbeddedGraphDatabase(DB_PATH);
        }

        return db;
      }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T09:18:11.040

Java 不一定会在内存可用于 GC 时立即回收。您可能会发现，在接近堆限制之前，您不会看到显着的 GC 操作。因此，即使您将堆限制设置为 10gb，您也可能会发现内存再次增加。这不一定是个问题。

但是，要解决 neo 使用 N x Memory 的问题，您应该考虑在所有端点之间共享嵌入式实例。也许通过将其移动到服务类并在端点之间具有共享实例。如果您将 Spring 与 Jersey 一起使用，那么这很容易做到，因为您可以通过 Spring 将其连接起来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T11:58:48.220

您不能为每个请求创建 Neo4j 实例。请只创建一次，然后将其传入，或者在静态字段中使用 hacky（因为您是为每个请求重新创建资源实例），或者在 Neo4j 服务器中使用注入`@Context`.

关于内存使用。Neo4j 会根据您的使用情况建立内部缓存，以便下次更快地处理相同的查询。因此，这可能相当于一些已用内存。

顺便提一句。你的图表有多大，你做的典型操作是什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T23:05:15.993

如果您不使用 Spring 或 Guice，则可以通过为 neo4J 对象使用静态成员和静态初始化来解决此问题。如果拥有该静态是一个交易破坏者，另一种选择是使用静态工厂来获取该 neo4J 对象的单例实例......

# android - 如何将滚动条位置始终保持在视图的顶部？

> ID：11920767
> 
> 赞同：0
> 
> 时间：2012-08-12T08:19:39.400
> 
> 标签：android, android-layout

我正在制作一个布局，其中我使用 Scrollview 将内容放入视图中。但是在视图中，我将滚动条向下移动，然后移动到下一个视图，滚动条保持在相同的位置，即在视图的底部。我想确保滚动条始终保持在视图的顶部，默认情况下。这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_centerHorizontal="true"
    android:orientation="vertical" >

    <ScrollView
            android:id="@+id/scrollView1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="90.0dip"
            android:layout_marginLeft="1.0dip"
            android:layout_marginRight="1.0dip"
            android:layout_marginTop="1.0dip"
            android:fadeScrollbars="true"
            android:fadingEdge="none"
            android:fillViewport="true" >

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:visibility="visible" >

            <ImageView
                android:id="@+id/explain_QuestionImageView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:visibility="visible" />

                <TextView
                    android:id="@+id/explain_question"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_below="@id/explain_QuestionImageView"
                    android:fadingEdge="vertical"
                    android:scrollbars="vertical"
                    android:text=""
                    android:textColor="@color/question_text"
                    android:textColorHighlight="@color/question_text1" />

            <TextView
                android:id="@+id/explain_separator"
                android:layout_width="match_parent"
                android:layout_height="5.0dip"
                android:layout_alignParentRight="true"
                android:layout_below="@id/explain_question"
                android:background="@drawable/blue_gradient"
                android:fadingEdge="vertical"
                android:padding="10dp"
                android:scrollbars="vertical"
                android:text="" />

                <TextView
                    android:id="@+id/explain_explaination"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_below="@id/explain_separator"
                    android:fadingEdge="vertical"
                    android:padding="10dp"
                    android:scrollbars="vertical"
                    android:text=""
                    android:textColor="@color/dark_green" />

        </LinearLayout>
        </FrameLayout>
        </ScrollView>
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
       >

        <com.google.ads.AdView
            android:id="@+id/ad"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:keepScreenOn="true"
            ads:adSize="BANNER"
            ads:adUnitId="a1501e5633125fb"
            ads:loadAdOnCreate="true"
            ads:testDevices="TEST_EMULATOR, 123456789ABCDEF" >
        </com.google.ads.AdView>

        <LinearLayout
            android:id="@+id/LL_Buttons1"
            android:layout_width="fill_parent"
            android:layout_height="40.0dip"
            android:layout_above="@id/ad"
            android:layout_gravity="bottom"
            android:background="#ff777777"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/PrevExplainationButton"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_centerInParent="true"
                android:layout_marginLeft="2.0dip"
                android:layout_weight="1.0"
                android:background="@drawable/ibtn"
                android:onClick="onPrevExplainationButtonClick"
                android:text="Previous" />

            <Button
                android:id="@+id/NextExplainationButton"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_centerInParent="true"
                android:layout_marginLeft="5.0dip"
                android:layout_marginRight="2.0dp"
                android:layout_weight="1.0"
                android:background="@drawable/ibtn"
                android:onClick="onNextExplainationButtonClick"
                android:text="Next" />
        </LinearLayout>
    </RelativeLayout>
</RelativeLayout> 
```

请告诉我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:31:16.483

> 请告诉我该怎么做。

你的问题模棱两可。如果`ScrollView`您在转到下一个/上一个问题后滚动的剩余部分，只需在切换问题时使用类似这样`scrollTo`的方法：`ScrollView`

```
((ScrollView)findViewById(R.id.scrollView1)).scrollTo(0, 0); 
```

如果你去一个新的活动并且想要`ScrollView`在开始位置然后简单地将上面的行`onResume`放在`Activity`.

# java - 为什么 Eclipse 中会出现重复的方法建议？

> ID：11920769
> 
> 赞同：28
> 
> 时间：2012-08-12T08:19:51.490
> 
> 标签：java, eclipse, javadoc, eclipse-juno

![eclipse 中的两个 contains(Object o) 方法](../Images/1b079798e2312d432865dc76b63e6994.png)

其他方法也会出现此问题，但我仅用`ArrayList.contains(Object o)`作示例。

该方法在 Eclipse 的方法建议中出现了两次，但其中一次出现了百分比。据我所知，这似乎是该方法独有的百分比。

这些方法做同样的事情，因为它们都有相同的名称和参数，所以我不知道为什么会这样。

我也认为这可能是完成该方法的某种进度计数器，但如果那里也有一个没有百分比的进度计数器，那就没有意义了。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-07-14T02:46:47.057

转到首选项 -> Java -> 编辑器 -> 内容辅助 -> 高级

要查看您的建议中没有重复项，请检查帮助列表，如下所示。

（在 Eclipse 中测试 - 开普勒版本）

![Java Content Assist 高级首选项](../Images/6a5126b51e088b6bf0b6cea137125f07.png)

如果您检查了“Java 类型建议”和“Java 非类型建议”，那么您将在建议中看到重复项。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-12T14:33:47.410

您已安装代码推荐器。有百分比的提案来自那个，没有百分比的提案来自JDT。

本质上安装了多个完成引擎 - 请参阅 Preferences > Java > Editor > Content Assist。不止一个引擎提供了相同的方法。虽然这解释了为什么存在重复项，但我没有想到解决方法或解决方案。

# wpf - 使用 T4 从 XAML 自动生成 Viewmodel

> ID：11920774
> 
> 赞同：0
> 
> 时间：2012-08-12T08:20:51.850
> 
> 标签：wpf, silverlight, xaml, mvvm, t4

我计划从 XAML 文件生成视图模型类。我们正在开发一个带有 MVVM 模式的 WPF 应用程序。设计人员设计视图（XAML）并设置绑定。我们计划使用 T4 模板，使用 Binding 属性并生成 viewmodel 类。虽然我知道生成的视图模型不会完全完整，但至少可以生成一定比例的样板代码是我的想法。有没有现成的工具呢？这个想法听起来怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:19:44.273

所以情况是；设计人员用 XAML 编写视图，然后您从中生成样板代码，然后开发人员对其进行修改以匹配视图要求。

恕我直言，那时您不会充分利用 T4 和代码生成。我倾向于从某种视图模型描述（可以是 XAML、XML、C# 或其他任何东西）生成 C# 代码工件。当视图模型更改时，我会更新模型描述并完全重新生成 C# 代码工件。开发人员*从不*修改生成的代码工件（因为它们可能会重新生成并且更改会丢失），相反，如果他们需要使用功能扩展视图模型，他们会通过部分类和部分方法来完成。

如果做得好，这将降低开发成本和维护成本，因为生成样板代码只会降低开发成本。

当然，所有恕我直言。

上述方法可以在 Visual Studio 2008+ 中实现，无需任何外部工具或依赖项，尽管有些人喜欢使用插件将 IntelliSense 添加到 T4 代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-08T12:27:44.743

距离第一次发帖已经过去了一段时间。是关于这个话题的新东西。我还发现一个从给定 XAML/View 自动生成视图模型的工具非常有用。

这不会提高每个人的生产力吗？

有这样的工具吗？

# ios - 玩家放弃 GKTurnBasedMatch

> ID：11920775
> 
> 赞同：1
> 
> 时间：2012-08-12T08:21:13.720
> 
> 标签：ios, gamekit

假设我有一个有 2 个玩家的 GKTurnBasedMatch，第二个在他的回合内被没收。我应该如何向第一个知道游戏已经结束的用户显示？或者也许让第一个玩家以编程方式退出？

另一个 GKTurnBasedMatch——这次是 12 名玩家。我不明白这里的一件事 - 说玩家 7 退出，这意味着当轮到他时，它会卡住游戏，我需要以编程方式结束对所有用户的比赛？或者也许 GC 会相应地重新编号剩余的球员？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:58:21.453

您需要将以下内容之一发送到您的 GKTurnBasedMatch 对象：

```
- (void)participantQuitInTurnWithOutcome:(GKTurnBasedMatchOutcome)matchOutcome
                        nextParticipants:(NSArray *)nextParticipants
                             turnTimeout:(NSTimeInterval)timeout
                               matchData:(NSData *)matchData
                       completionHandler:(void (^)(NSError *error))completionHandler

- (void)participantQuitOutOfTurnWithOutcome:(GKTurnBasedMatchOutcome)matchOutcome
                      withCompletionHandler:(void (^)(NSError *error))completionHandler 
```

呼叫`participantQuitOutOfTurnWithOutcome`将向比赛中的其他玩家发送回合事件，以通知他们有玩家退出。match.participants 中玩家的对象会有 matchOutcome`GKTurnBasedMatchOutcomeQuit`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-27T22:12:49.407

我创建了一个[基于游戏工具包回合的比赛示例项目](https://bitbucket.org/tenseg/hellogamekitios)，该项目说明了不按顺序退出和依次退出。查看文件中的`quit()`函数`GameModel.swift`以了解如何调用这些函数：

```
func quit(completionHandler: @escaping (Error?) -> Void) {
    if isLocalPlayerTurn {
        let next = nextParticipants()
        let data = NSKeyedArchiver.archivedData(withRootObject: self)
        match?.participantQuitInTurn(with: .quit, nextParticipants: next, turnTimeout: 600, match: data) { error in
            completionHandler(error)
        }
    } else {
        match?.participantQuitOutOfTurn(with: .quit) { error in
            completionHandler(error)
        }
    }
} 
```

当然，检查某人是否赢了也很重要。这是`checkForWin()`来自同一个文件的函数。

```
func checkForWin(completionHandler: @escaping (Bool, Error?) -> Void) {
    guard let stillPlaying = match?.participants?.filter({ $0.matchOutcome == .none }),
        stillPlaying.count == 1,
        stillPlaying[0].player?.playerID == currentPlayerID
        else {
            return completionHandler(false, nil)
    }

    stillPlaying[0].matchOutcome = .won
    let data = NSKeyedArchiver.archivedData(withRootObject: self)

    match?.endMatchInTurn(withMatch: data) { error in
        print("***** match ended")
        completionHandler(true, error)
    }
} 
```

所有这些在整个示例项目的上下文中都更有意义。我希望它有所帮助。

# ruby-on-rails - 找不到 Devise::OmniauthCallbacksController 的操作“google”

> ID：11920780
> 
> 赞同：3
> 
> 时间：2012-08-12T08:21:43.920
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise, openid

我正在尝试将 OpenID 登录与 Google 集成到我的 Rails 网站。我正在关注[Devise & Omniauth](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)概述。出于某种原因，我收到了错误，

```
Unknown action

The action 'google' could not be found for Devise::OmniauthCallbacksController 
```

我的`routes.rb`有

```
devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks" } 
```

`users/omniauth_callbacks_controller.rb`有，

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
  skip_before_filter :verify_authenticity_token, :only => [:google]

  def google
     .....
  end       
end 
```

我的 user.rb 有，

```
class User < ActiveRecord::Base
  devise :omniauthable, :database_authenticatable, :registerable, :recoverable,
  :rememberable, :trackable, :validatable

  def self.find_for_open_id(access_token, signed_in_resource=nil)
     ....
  end
end 
```

初始化程序/devise.rb

```
config.omniauth :open_id, :store => OpenID::Store::Filesystem.new('./tmp'), :name => 'google', :identifier => 'https://www.google.com/accounts/o8/id' 
```

这一切都是按照维基页面完成的。当我单击 URL 时，它会将我带到谷歌，输入凭据后，我会被重定向回来。这就是失败发生的地方。

我不确定为什么会这样。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:51:48.430

我使用 Omniauth（没有设计），谷歌的正确操作是`:google_oauth2`.

# eclipse - 如何使用 Eclipse 设置壁垒？

> ID：11920789
> 
> 赞同：0
> 
> 时间：2012-08-12T08:23:27.933
> 
> 标签：eclipse, web-services, axis2, policy, rampart

我有一个简单的 Axis2 Web 服务，我想为其添加安全性，我正在使用 tomcat 并且 Web 服务已部署并正常工作所以我有几个问题，我是否需要将壁垒 jar 文件复制到客户端/服务构建路径中? 我将壁垒模块和策略文件放在哪里？

我将不胜感激任何帮助或分步指南

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:33:49.753

学习这些的最好方法是查看壁垒样本[http://svn.apache.org/repos/asf/axis/axis2/java/rampart/branches/1_6/modules/rampart-samples/policy](http://svn.apache.org/repos/asf/axis/axis2/java/rampart/branches/1_6/modules/rampart-samples/policy)。在那里您可以看到客户端和服务的配置方式。

# eclipse-rcp - 如何在鼠标单击时移动到另一个视图

> ID：11920791
> 
> 赞同：0
> 
> 时间：2012-08-12T08:23:46.790
> 
> 标签：eclipse-rcp

在我的 RCP 应用程序中，我有两个视图，view1 包含一个按钮 此按钮应在鼠标单击时将我从 view1 切换到 view2 我该如何进行此切换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:52:20.647

在按钮单击处理程序中，您需要执行以下操作：

```
getSite().getWorkbenchWindow().getActivePage().findView("ViewID").setFocus() 
```

# python - 无法从文件加载泡菜对象

> ID：11920792
> 
> 赞同：-1
> 
> 时间：2012-08-12T08:24:03.817
> 
> 标签：python, pickle

我只是在尝试 pickle 模块并学习它的功能和实用程序。我已经写了一小段代码，但这给我带来了麻烦。

```
import pickle
myfile = open("C:\\Users\\The Folder\\databin.txt", 'r+') #databin.txt is completely blank
class A:
    def __init__ (self):
        self.variable = 25
        self.random = 55
pickle.dump (A, myfile, -1) #HIGHEST_PROTOCOL 
pickle.load (myfile) 
```

然后我收到以下错误：

```
 Traceback (most recent call last):
File "<pyshell#9>", line 1, in <module>
pickle.load (myfile)
File "C:\Python27\lib\pickle.py", line 1378, in load
return Unpickler(file).load()
File "C:\Python27\lib\pickle.py", line 858, in load
dispatch[key](self)
KeyError: '\x00' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T08:28:17.620

您需要先关闭文件，然后重新打开它才能工作；并使用二进制模式打开您的文件。

最后但同样重要的是，pickle 只能存储类的*实例*，而不是类本身：

```
filename = "C:\\Users\\The Folder\\databin.txt"
with open(filename, 'wb') as myfile:
    pickle.dump(A(), myfile, -1) #HIGHEST_PROTOCOL 
with open(filename, 'rb') as myfile:
    pickle.load(myfile) 
```

在这里，我将该文件用作上下文管理器，`with`退出套件时它会自动关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T14:42:56.467

基本上，马丁所说的是正确的。您需要先关闭文件，然后再重新打开它。如果你不这样做，你会得到一个错误。我使用`dill`, 而不是泡菜，所以我可以泡菜。

```
Python 3.3.5 (default, Mar 10 2014, 21:37:38) 
[GCC 4.2.1 Compatible Apple Clang 4.1 ((tags/Apple/clang-421.11.66))] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import dill
>>> myfile = open('pickle.pkl', 'rb+')
>>> 
>>> class A:
...   def __init__(self):
...     self.variable = 25
...     self.random = 55
... 
>>> dill.dump(A, myfile, 2)
>>> dill.load(myfile)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Users/mmckerns/lib/python3.3/site-packages/dill-0.2.2.dev-py3.3.egg/dill/dill.py", line 187, in load
    obj = pik.load()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/pickle.py", line 847, in load
    raise EOFError
EOFError 
```

现在，关闭文件，然后重试……记得先再次打开它。

```
>>> myfile.close()
>>> dill.load(myfile)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Users/mmckerns/lib/python3.3/site-packages/dill-0.2.2.dev-py3.3.egg/dill/dill.py", line 187, in load
    obj = pik.load()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/pickle.py", line 845, in load
    key = read(1)
ValueError: read of closed file
>>> 
>>> myfile = open('pickle.pkl', 'rb+')
>>> dill.load(myfile)
<class '__main__.A'> 
```

# c - 与 sigdelset() 函数混淆

> ID：11920793
> 
> 赞同：2
> 
> 时间：2012-08-12T08:24:04.933
> 
> 标签：c, linux, signals

sigdelset() 函数用于关闭单个位。这是它的实现：

```
 int
    sigdelset(sigset_t *set, int signo)  //signo is the signal number
    {
    *set &= ~(1 << (signo - 1)); // turn bit off 
    return(0);
    } 
```

我无法理解这段代码。我认为信号编号看起来像`0010`（二进制）。但它看起来不对。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T08:32:30.940

您混淆了人脑如何想象二进制数以及我们如何在 C 中表示它们。

首先，标准 C 中没有二进制符号（但是某些编译器接受`0b...`作为扩展）。

其次，`1 << (signo - 1)`是二元左移运算符。Signo 可能是要关闭的位的序号，从 1 开始。然后我们从中减去 1，因此我们得到一个从 0 开始的数字（逻辑上的第一位）。然后我们将其左移以获得 2 的幂 (signo - 1)，这是一个数字，其二进制表示如下所示：

```
00000010000000... etc.
      ^
      +-  bit #signo - 1 
```

然后该函数使用`~`（2 的补码）运算符，这将导致（连同按位和赋值运算符，`&=`）关闭该位。

# sql - 根据外连接选择不同的列

> ID：11920801
> 
> 赞同：0
> 
> 时间：2012-08-12T08:25:34.297
> 
> 标签：sql, postgresql

我有两个表 tableA 和 tableB，它们具有相同的结构：

```
rowid: big int
name:character variying
enabled: boolean 
```

现在我对这两个表进行了外部连接

```
select tableA.rowid, tableA.name, tableB.enabled
from tableA 
left outer join
tableB
on tableA.rowid = tableB.rowid 
```

tableA 包含启用的列全部为 true 的行，而 tableB 包含 tableA 中应关闭的一些行（启用的列为 false）。

如果我使用上面的连接，它会将结果表中匹配行的启用字段设置为false，但不会将其余行设置为true。启用的列只是空的（在 tableB 中找不到匹配的行）。

我的问题是，如果 tableB 中没有匹配的行，有什么方法可以告诉外连接我想使用 tableA.enabled，否则，使用 tableB.enabled？

或者有没有其他更好的方法来做到这一点？

我为此使用 PostgreSQL。也欢迎任何其他 SQL 类型的想法。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T08:29:05.177

您正在寻找[COALESCE](http://www.postgresql.org/docs/9.1/static/functions-conditional.html#FUNCTIONS-COALESCE-NVL-IFNULL)：

```
SELECT
    tableA.rowid,
    tableA.name,
    COALESCE(tableB.enabled, tableA.enabled) AS enabled
FROM tableA 
LEFT OUTER JOIN tableB
ON tableA.rowid = tableB.rowid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T08:29:52.923

```
select tableA.rowid, tableA.name, ISNULL(tableB.enabled, tableA.enabled) as Enabled
from tableA 
left outer join
tableB
on tableA.rowid = tableB.rowid 
```

# mysql - 并发数据插入中的mysql_insert_id问题

> ID：11920804
> 
> 赞同：4
> 
> 时间：2012-08-12T08:25:49.293
> 
> 标签：mysql, concurrency, mysql-insert-id

`mysql_insert_id()`在竞争条件下有多可靠？我的意思是当多个用户同时插入数据时，这个函数是返回真实ID还是返回其他用户插入的数据ID？

表引擎是 MyISAM。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T08:45:07.400

`mysql_insert_id`完全是多用户安全的。它完全依赖于数据库连接，每个连接只能有一个用户......所以，根据你的问题，它返回真正的 id....

从[MySql 文档](http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_last-insert-id)中，

> 生成的 ID 在每个连接的基础上维护在服务器中。这意味着函数返回给给定客户端的值是为影响该客户端的 AUTO_INCREMENT 列的最新语句生成的第一个 AUTO_INCREMENT 值。此值不受其他客户端的影响，即使它们生成自己的 AUTO_INCREMENT 值。这种行为确保每个客户端都可以检索自己的 ID，而不用担心其他客户端的活动，也不需要锁或事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T08:50:33.187

恕我直言，即使有多个用户插入..它也会在您的程序执行中按顺序执行。

***来自[php.net](http://php.net/manual/en/function.mysql-insert-id.php)***

“mysql_insert_id() 作用于最后执行的查询，**确保在生成值的查询之后立即调用 mysql_insert_id()**。”

***还***

不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：

```
mysqli_insert_id()
PDO::lastInsertId() 
```

您也可以[从 dev.mysql 检查此链接，](http://dev.mysql.com/doc/refman/5.0/en/mysql-insert-id.html)其中指出

“mysql_insert_id() 的值仅受当前客户端连接内发出的语句影响。不受其他客户端发出的语句的影响。”

# php - 两个 div 内联，动态维度

> ID：11920809
> 
> 赞同：0
> 
> 时间：2012-08-12T08:26:18.107
> 
> 标签：php, html, css

我想要一些看起来像典型论坛帖子的东西，其中一些用户信息位于帖子的左侧，然后是帖子本身。我用两个 div 包裹另一个 div，然后在 css 上使用 float。我的问题是另一个 div 在浮动时也想留在左边而不是在另一个 div 的“旁边”。我已经尝试`display:inline;`过 div 并将其更改为 span 。我最接近的只是另一个 div 的顶部在正确的位置（当我不浮动这个 div 时，只有第一个）。想想典型的 IPB 帖子布局。如果这没有意义，这是我的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<div id = "contentarea">
    <div class = "post">
        <div class = "head">
            <p class = "name">asrockw7</p>
        </div>
        <div class = "body">
            <p class = "title">On the Origin of Species</p>
            <p class = "content">Integer hendrerit lectus sit amet turpis facilisis quis lacinia nulla tempus. Aliquam vitae ante eu sem vestibulum scelerisque. Cras dui neque, auctor eget rhoncus non, pretium a justo. </p>
        </div>
        <div class = "clear">clear:both;</div>
        <div class = "allreplies">
            <div class = "reply">
                <p class = "name">Wafer</p>
                <p class = "content">Vestibulum nec turpis eu mi imperdiet porttitor. Fusce eget lorem libero, a imperdiet sem. Integer eleifend tincidunt condimentum. Nam id arcu nec lectus rhoncus sagittis.</p>
            </div>
            <div class = "reply">
                <p class = "name">Arondight</p>
                <p class = "content">Suspendisse non eros orci, a porttitor lacus. Donec vulputate viverra neque, quis sagittis eros suscipit vel.</p>
            </div>
        </div>
        <div class = "clear">clear:both;</div>
    </div>
</div>
</html>

<style type = "text/css">
.clear {
background:white;
clear:both;
}
#contentarea {
margin-top:50px;
margin-left:10px;
min-width:700px;
}
p{
font-family:"Lucida Console";
}
.post {
opacity:0.9;
background:blue;
padding:5px 10px 5px 10px;
}
.post .head {
background:red;
float:left;
}
.post .body {
background:green;
}

.post .allreplies {
background:yellow;
}
</style> 
```

颜色只是为了能够区分每个部分。我认为这是因为`body`div 认为它不适合 div 旁边`head`，所以它下降了。我可以指定一个明确的宽度和高度，让`body`div 知道它可以适应，但这对拥有大分辨率显示器的人来说是不好的。在这一点上，我只是想使用`<table>`.

这些都是PHP生成的，只是想先把布局弄好。

tl;dr：基本上我希望`head`div 和`body`div 彼此相邻，而不是让`body`div 脱落，因为它认为它不适合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T08:51:50.513

您可以将`x%`宽度添加到`.head`并将`(100-x)%`宽度添加到`.body`。此外，您可以`float:left`像`.body`以前一样添加。[见小提琴。](http://jsfiddle.net/eXQCq/1/)

The way you have it right now, the `.head` element is taking up space on the top left, pushing the content in `.body` (which is not floated) to the right.

When you don't specify the width of a floated div, the `.body` div's width is the minimum of `the width of the content inside the div` and `the width of the parent`. In this case, the content's "width" is greater than the parent element's width, so the `.body` div gets pushed to its own horizontal line. If you just have `float:left` on both `.head` and `.body`, it works correctly if there isn't that much text in `.content`.

# javascript - 使用按钮在 textarea 中输入文本，希望每个条目从新行开始

> ID：11920811
> 
> 赞同：1
> 
> 时间：2012-08-12T08:26:33.720
> 
> 标签：javascript, input, textarea, newline

我有一个为工作目的创建的简单网页。它有多个将文本输入文本区域的按钮。我希望每个输入都从新行开始。我已经尝试在我能想到的每个地方输入 /r /n ，但似乎无法让它工作。似乎无法在任何其他帖子中找到确切的答案。以下是代码的相关部分。

```
function insertText(val,e){
    document.getElementById(e).innerHTML+=val;
} 
```

```
<a href="javascript:insertText('Application submitted by applicant - Demande          Presentee par requerant \n','textarea');" onClick="void(0)">[sub by appl]</a>
<a href="javascript:insertText('Application submitted by a third party - Demande presentee par une tierce partie : ','textarea');" onClick="void(0)">[sub by 3rd party]</a>

<form name="textform">
    <font face="Arial, Helvetica, sans-serif" size="2"> 
        <textarea name="textarea" cols="100" rows="15">
        </textarea>
    </font> 
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:32:49.597

如果您想以这种方式选择文本区域，则将元素 id 传递给`getElementById` 没有带有 id 的元素，给它一个 id`textarea``<textarea id="textarea" name="textarea" cols="100" rows="15">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T08:48:06.087

1) 你不需要使用**innerHTML**属性来设置textarea 的值，而是使用它的**value**属性。

2）更好的做法是使用带有**“#”**值的**href**属性，并在返回**false的****onclick**设置事件处理程序中使用。

 ******3) **data-***属性非常有用。您可以使用这种方法有效地将任何信息存储在标签中：

```
<div id="person-27" data-name="Linus" data-surname="Torvalds">Linux creator</div> 
```

...稍后检索此信息，如下面的示例所示。

4) 使用**\n**插入新行。

所以你的代码看起来像：

```
<a class="text-btn" href="#"
    data-text="Application submitted by applicant - Demande Presentee par requerant">
    [sub by appl]
</a>

<a class="text-btn" href="#"
    data-text="Application submitted by a third party - Demande presentee par une tierce partie">
    [sub by 3rd party]
</a>

<form name="textform" id="textform">
    <font face="Arial, Helvetica, sans-serif" size="2"> 
        <textarea name="textarea" cols="100" rows="15"></textarea>
    </font> 
</form>

<script type="text/javascript">
    (function() {
        var form = document.getElementById('textform'),
            textarea = form['textarea'],
            anchors = document.getElementsByTagName('a');
        function insertText() {
            textarea.value += this.getAttribute('data-text') + "\n";
            return false;
        }
        for(var i = 0, l = anchors.length; i < l; i++) {
            if(anchors[i].className == 'text-btn') {
                anchors[i].onclick = insertText;
            }
        }
    })();
</script>​ 
```

[**演示**](http://jsfiddle.net/f0t0n/EYf5g/)******

# c# - 如何确定Word文档是否为只读？

> ID：11920814
> 
> 赞同：2
> 
> 时间：2012-08-12T08:26:47.713
> 
> 标签：c#, office-interop, readonly

我使用 Word.Interop 处理 Word 文档并让用户从硬盘打开文件。

有时我会收到错误消息，提示用户选择的文件是只读的。

如何检查文件是否为只读文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T08:32:14.413

您确定您实际上是在谈论 File 属性（可以通过 Windows 文件属性对话框设置）？如果是这样，您可以使用[`FileInfo.IsReadOnly`](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.isreadonly.aspx)：

```
FileInfo fileInfo = new FileInfo(@"path\to\file");
if (fileInfo.IsReadOnly)
{
    // do something
} 
```

否则，如果另一个进程正在使用该文件，请参阅[此答案。](https://stackoverflow.com/questions/876473/is-there-a-way-to-check-if-a-file-is-in-use)

# node.js - 无法在 nodejs 上运行 coffeescript 应用程序。接收异常

> ID：11920816
> 
> 赞同：1
> 
> 时间：2012-08-12T08:27:07.087
> 
> 标签：node.js, coffeescript

我最近开始学习 coffescript 并试图学习一个简单的 tut。但是，当我尝试使用 `coffee app.coffee`命令运行我的 app.coffee 文件时，我不断收到此异常；

```
PS C:\Users\Office\Workspace\node\blog-demo\coffeepress> coffee .\app.coffee
Error: In .\app.coffee, Parse error on line 1: Unexpected ' '
    at Object.parseError (C:\Users\Rishav\AppData\Roaming\npm\node_modules\coffee-script\lib\coffee-script\parser.js:477
:11)
    at Object.parse (C:\Users\Rishav\AppData\Roaming\npm\node_modules\coffee-script\lib\coffee-script\parser.js:554:22)
    at exports.compile.compile (C:\Users\Rishav\AppData\Roaming\npm\node_modules\coffee-script\lib\coffee-script\coffee-
script.js:43:20)
    at Object.exports.run (C:\Users\Rishav\AppData\Roaming\npm\node_modules\coffee-script\lib\coffee-script\coffee-scrip
t.js:79:34)
    at compileScript (C:\Users\Rishav\AppData\Roaming\npm\node_modules\coffee-script\lib\coffee-script\command.js:175:29
)
    at fs.stat.notSources.(anonymous function) (C:\Users\Rishav\AppData\Roaming\npm\node_modules\coffee-script\lib\coffe
e-script\command.js:150:18)
    at fs.readFile (fs.js:176:14)
    at Object.oncomplete (fs.js:297:15) 
```

咖啡代码是；

```
###
Module dependencies.
###
express = require("express")
routes = require("./routes")
http = require("http")
path = require("path")
app = express()
app.configure ->
  app.set "port", process.env.PORT or 3000
  app.set "views", __dirname + "/views"
  app.set "view engine", "jade"
  app.use express.favicon()
  app.use express.logger("dev")
  app.use express.bodyParser()
  app.use express.methodOverride()
  app.use app.router
  app.use express.static(path.join(__dirname, "public"))

app.configure "development", ->
  app.use express.errorHandler()

app.get "/", routes.index
http.createServer(app).listen app.get("port"), ->
  console.log "Express server listening on port " + app.get("port") 
```

我所有的模块都是迄今为止最新可用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:49:43.860

你的代码绝对没问题。然而，Coffeescript 保留关键字，`static`因此如果您运行`coffee -c your_file.coffee`，您将在`your_file.js`. 用编辑器打开它，看看有什么问题。

我打赌这条线`app.use express.static(path.join(__dirname, "public"))`会被编译成类似`app.use(express["static"](path.join(__dirname,"public"))`. 这会导致您的错误；）

以后如果有错误，先编译coffeescript，再看编译后的版本，看看有什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T05:44:29.597

除了您不提供的路由文件之外，我可以运行代码。我会尝试重新创建文件，看看实际文件是否有任何损坏。我有时会遇到 Coffeescript 文件在缩进中格式错误的问题，并且它会抱怨其他问题。

我怀疑的另一件事是您的路线文件中可能有问题。

# asp.net-mvc - 为什么在 asp.net mvc 项目中加载 WebForms 的 ViewEngineCollection

> ID：11920817
> 
> 赞同：3
> 
> 时间：2012-08-12T08:27:20.597
> 
> 标签：asp.net-mvc, asp.net-mvc-4

这是一个使用 Razor ViewEngine（.cshtml 文件）的 asp.net mvc 项目

为什么 WebFormViewEngine 然后加载到内存中？

![在此处输入图像描述](../Images/a948a9e780ec738789bef56fc2ee04be.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T08:33:51.597

ASP.NET MVC 3 默认使用 Razor 和 WebForms 视图引擎。例如，假设您将带有 WebForms 视图的旧 MVC 1 项目移植到 MVC 3。如果您不使用 WebForms，那么您可以在 Global.asax 中安全地删除它：

```
public class Global : HttpApplication
{
    public void Application_Start()
    {
        ViewEngines.Engines.Clear();
        ViewEngines.Engines.Add(new RazorViewEngine());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T08:32:53.637

您可以创建混合应用程序，对某些页面使用 ASPX 引擎，对其他页面使用 Razor。

这就是为什么加载这个..

您可以在`global.asax`.

# entity-framework - 哪种关系可以防止删除？

> ID：11920821
> 
> 赞同：1
> 
> 时间：2012-08-12T08:28:05.203
> 
> 标签：entity-framework

删除实体时，我收到以下错误消息：

> 操作失败：无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性将设置为空值。如果外键不支持空值，则必须定义新关系，必须为外键属性分配另一个非空值，或者必须删除不相关的对象。

很公平。但是，我有很多关系，我不知道是哪一个导致了错误。

有没有办法获得导致问题的关系的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T09:38:48.147

> 有没有办法获得导致问题的关系的名称？

不幸的是，如果没有对`ObjectStateManager`. 这是一个非常烦人的问题，因为没有任何附加信息的异常太笼统了。我认为这是一个很好的改进请求，并且使用[EF 作为和开源](http://entityframework.codeplex.com/)它应该真的可以提高异常的质量。

您将必须检查您的修改代码并检查您要删除的实体。会有一些相关的依赖实体没有被删除，挂起父实体的删除。为 EF 推荐的其他方法是使用级联删除。

# linux - 击键中断后如何初始化小任务？

> ID：11920841
> 
> 赞同：1
> 
> 时间：2012-08-12T08:31:42.563
> 
> 标签：linux, linux-kernel, embedded-linux, kernel-module

我想构建一个内核模块，它会在按键时运行一个小任务`f5`。

我了解如何初始化 tasklet，但是如何在我的模块中获取事件？如何`request_irq`判断是否`f5`被按下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T01:24:56.283

-

嗨，0x90，

我想你知道，要处理中断，有两个部分。第一部分，上半部分，即中断处理程序，第二部分，下半部分，可能是softirq，tasklet，工作队列。

所以，即使你想在一个小任务中实现你想要的一切，你也必须确保上半部分，即中断处理程序，有机会首先运行。

IIRC，tasklet 只是 softirqs 的一种变体，它们在 irq_exit() 中处理，在 do_IRQ() 中调用。但是，此流程可能取决于特定的架构。

对于您的问题，我想它可能在 x86 平台上。无论按下什么键，总会有一个键盘中断传递给 CPU。并且按下的键是否为 f5，将在您的 tasklet 中进行检查，您的中断处理程序可能只需将代码传递给 tasklet。

因此，您应该通过调用 request_irq() 将在 tasklet 之前处理的中断处理程序附加到键盘中断。

更新：

正如 Probie 所说，您可能需要检查 Documentation/ 目录中的 notifier.txt 和 notifiers.txt。

谢谢。

# c# - 仅在应用程序生命周期的第一个小时内需要一个计时器

> ID：11920842
> 
> 赞同：1
> 
> 时间：2012-08-12T08:31:52.910
> 
> 标签：c#, timer

有没有办法用给定的动作建立一个新的计时器，但从一开始就告诉它它必须在一小时后杀死自己？（它可以自己解决还是我需要另一条线来处理它？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T08:44:45.840

我会使用两个计时器，一个做你想做的事，另一个在一小时后杀死第一个计时器。

这里有两个示例，每个示例都使用 1 秒的主计时器，需要在第五秒时终止。

如果您使用[System.Threading.Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)：

```
Timer actualTimer = new Timer(obj => Console.WriteLine("Timer!"),
    null, 0, 1000);

Timer killingTimer = new Timer(obj =>
{
    Console.WriteLine("Killing timer!");
    // Set the dueTime and timeout to infinite, to stop the timer.
    actualTimer.Change(Timeout.Infinite, Timeout.Infinite);
    killingTimer.Change(Timeout.Infinite, Timeout.Infinite);
}, null, 5000, 5000);

Console.ReadLine(); 
```

如果您使用[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)：

```
Timer actualTimer = new Timer();
actualTimer.Interval = 1000;
actualTimer.Elapsed += (sender, e) => Console.WriteLine("Timer!");
actualTimer.Start();

Timer killingTimer = new Timer();
killingTimer.Interval = 5000;
killingTimer.Elapsed += (sender, e) =>
{
    Console.WriteLine("Killing timer!");
    actualTimer.Stop();
    killingTimer.Stop();
};
killingTimer.Start(); 
```

所有时间都以毫秒为单位（1000 秒）。根据这篇文章，这是首选，但`System.Threading.Timer`根据[这篇文章](https://stackoverflow.com/a/5634048/146622)[，](https://stackoverflow.com/a/1416809/146622)`System.Timers.Timer`它适用于可能从不同线程调用计时器方法的情况。

# javascript - Hide() div 不在 IE 上工作，但在 Chrome/firefox 上工作

> ID：11920845
> 
> 赞同：0
> 
> 时间：2012-08-12T08:32:18.053
> 
> 标签：javascript, jquery, cross-browser

想法是在图像加载时显示加载 div，并在完成时隐藏 div。此代码适用于 Chrome/firefox，但不适用于 IE。任何的想法？

**html文件**

```
//image
<img src="image.php" class="loading">

//loading tag
<div id="loaddiv">
    <div id="loading_float"><img src="src/img/loading.gif">
    <br>Loading..
    </div>
</div> 
```

**JS文件**

```
var imgs_count=0, imgs_loaded=0;
$(function(){
$loading = $('.loading');
if($loading.size()>0){
    $loading.load(function(){
        $('#loaddiv').hide();
    });
}else{
    $('#loaddiv').show(); 
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T08:37:26.907

您不能可靠地使用 javascript 将 onload 处理程序附加到页面 HTML 中的图像。这是因为图像可能在您的 javascript 甚至有机会运行之前就已经加载，因为页面 DOM（以及它所引用的图像）在 javascript 有机会运行并找到那些非常 DOM 元素之前开始加载。一旦图像在浏览器缓存中，这个问题在 IE 中会更严重，因为在这种情况下 IE 几乎会立即加载图像。

有两种可能的解决方法：

1.  使用 onload 属性在实际 HTML 中指定 onload 处理程序。
2.  不要将图像放在页面的 HTML 中。使用 javascript 动态创建它们并`.src`在图像对象上设置属性之前分配 onload 处理程序，因此您一定不会错过 onload 事件。
3.  当您的 javascript 运行并在安装负载处理程序之前，请检查图像是否已加载并采取相应措施。

# css - 防止 div 与固定的重叠

> ID：11920846
> 
> 赞同：3
> 
> 时间：2012-08-12T08:32:20.263
> 
> 标签：css, html

我想创建一个网页，底部有一个固定部分，顶部有一个将动态填充内容的部分，如果添加的内容不适合，这个动态部分应该有一个滚动条，以便保持在上面固定部分。

**样式.css：**

```
.action-box{
    position: fixed;
    bottom: 15px;
    margin-top: 10px;
    width: 100%;
} 
```

**索引.html：**

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
  <div>
    <!-- this will be filled with content -->
  </div>
  <div class="action-box">
    <!-- this is the fixed part -->
  </div>
</body>
</html> 
```

您可以在[这个小提琴](http://jsfiddle.net/paullik/RdGXt/)中看到两者`div`重叠。

如何使第一个`div`可滚动，使其不会滑过或低于最后一个`div`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T09:23:57.777

我将建议使用动态调整大小，具体取决于窗口高度：

这是`jQuery`示例：

```
function adjustBlocks() {
    var winH = $(window).height();
    var boxH = $('#action-box').height();
    $('#content').height((winH - boxH) + 'px');
}

$(document).ready(adjustBlocks);

$(window).resize(adjustBlocks); 
```

示例 HTML：

```
<div id="content"></div>
<div id="action-box"></div> 
```

和示例 CSS：

```
#content{
    width: 100%;
    background: #eee;
    overflow-y: scroll;
}

#action-box{
    width: 100%;
    background: #ffccaa;
} 
```

当然，您可以轻松添加任何边距并在`jQuery`调整大小功能中提及它们。

哦，还有[jsfiddle 上的例子](http://jsfiddle.net/RdGXt/150/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T08:59:20.020

最简单的方法是应用`margin-bottom`到与底部固定 div 的总高度相匹配的顶部 div，并且您必须为底部的 div 提供一个高度和背景颜色，这样其他 div 就不会显示出来.

```
.action-box{
    position: fixed;
    bottom: 0px;
    height: 20px;
    padding-bottom: 10px;
    width: 100%;
    background-color: white;   
}

.content {margin-bottom: 50px}​ 
```

[http://jsfiddle.net/RdGXt/151/](http://jsfiddle.net/RdGXt/151/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T08:44:29.287

给它一个固定高度的css类和`overflow: scroll;`

# java - 标记未显示在当前位置

> ID：11920851
> 
> 赞同：0
> 
> 时间：2012-08-12T08:32:51.447
> 
> 标签：java, android, android-maps

我需要将我`current location`的`Marker`始终**显示**`Google Map`为正在使用`ItemizedOverlay`，但是每当我运行以下代码时，如果我将位置从. 下面是我的代码。我做错了什么吗？**`DDMS`**

 **```
public class MainActivity extends MapActivity {
    private MyItemizedOverlay myItemizedOverlay = null;
    private LocationManager locationManager = null;
    private MapView mapView = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mapView = (MapView) findViewById(R.id.mapView);
        mapView.setBuiltInZoomControls(true);

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,
                0, new GeoUpdateHandler());

    }

    public class GeoUpdateHandler implements LocationListener {

    @Override
    public void onLocationChanged(Location location) {
        int lat = (int) (location.getLatitude() * 1E6);
        int lng = (int) (location.getLongitude() * 1E6);

        Drawable marker=getResources().getDrawable(android.R.drawable.star_big_on);
        int markerWidth = marker.getIntrinsicWidth();
        int markerHeight = marker.getIntrinsicHeight();
        marker.setBounds(0, markerHeight, markerWidth, 0);

        myItemizedOverlay = new MyItemizedOverlay(marker);
        mapView.getOverlays().add(myItemizedOverlay);

        GeoPoint point = new GeoPoint(lat, lng);

        //GeoPoint myPoint1 = new GeoPoint((int) (37.347184*1000000), (int) (-121.966551*1000000));
        myItemizedOverlay.addItem(point, "myPoint1", "myPoint1");
        mapController.animateTo(point);
        String address = ConvertPointToLocation(point);
        Toast.makeText(getBaseContext(), address, Toast.LENGTH_SHORT).show();

        mapView.invalidate();

    }

} 
```

下边是`MyItemizedOverlay class`

```
public class MyItemizedOverlay extends ItemizedOverlay<OverlayItem>{

    private ArrayList<OverlayItem> overlayItemList = new ArrayList<OverlayItem>();

    public MyItemizedOverlay(Drawable marker) {
        super(boundCenterBottom(marker));
        // TODO Auto-generated constructor stub

        populate();
    }

    public void addItem(GeoPoint p, String title, String snippet){
        OverlayItem newItem = new OverlayItem(p, title, snippet);
        overlayItemList.add(newItem);
        populate();
    }

    @Override
    protected OverlayItem createItem(int i) {
        // TODO Auto-generated method stub
        return overlayItemList.get(i);
    }

    @Override
    public int size() {
        // TODO Auto-generated method stub
        return overlayItemList.size();
    }

    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        // TODO Auto-generated method stub
        super.draw(canvas, mapView, shadow);
        //boundCenterBottom(marker);
    }

} 
```

因为我还需要**在 Google Maps 上显示其他标记**，所以这就是我使用 ItemizedOverlay 概念的原因。`ItemizedOverlay`首先，每当我的应用程序启动时，我需要专注于我当前的位置。对我的示例的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T08:44:43.860

如果您只想显示用户的当前位置，请使用[MyLocationOverlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MyLocationOverlay)。它是专门为此设计的。[这](http://www.vogella.com/articles/AndroidLocationAPI/article.html#maps_mylocation)是一个关于如何使用它的好例子，下面是基本的中央代码片段：

```
// This goes into the onCreate method
myLocationOverlay = new MyLocationOverlay(this, mapView);
mapView.getOverlays().add(myLocationOverlay);

myLocationOverlay.runOnFirstFix(new Runnable() {
  public void run() {
    mapView.getController().animateTo(myLocationOverlay.getMyLocation());
     }
}); 
```

有关更详细的示例，请参阅教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T08:56:27.637

```
GeoPoint point = new GeoPoint(lat, lng);
change above code

declare global variable
GeoPoint point;

then assign onLocationChanged() method 

point = new GeoPoint(lat, lng); 
```

按照非常简单的示例链接

[http://android-coding.blogspot.com/2011/06/using-itemizedoverlay-to-add-marker-on.html](http://android-coding.blogspot.com/2011/06/using-itemizedoverlay-to-add-marker-on.html)**

# objective-c - 使用 ARC 的 AudioServicesPlaySystemSound 中的内存泄漏

> ID：11920853
> 
> 赞同：2
> 
> 时间：2012-08-12T08:33:11.900
> 
> 标签：objective-c, memory-leaks, automatic-ref-counting

我需要一些帮助来解决这个内存泄漏问题。我正在使用 ARC。

潜在的泄漏在这条线上：

```
NSURL *aFileURL = [NSURL fileURLWithPath:filePath isDirectory:NO]; 
```

这是代码：

```
// === Check if the game should play sound === //
if (sound == YES) {
    //==== PLAY THE LOOSING SOUND ====//
    // Form a URL to the sound file, which in init using the Path
    NSBundle *mainBundle = [NSBundle mainBundle];
    NSString *filePath = [mainBundle pathForResource:@"wrong2" ofType:@"wav"];
    NSURL *aFileURL = [NSURL fileURLWithPath:filePath isDirectory:NO];

    // Create a sound ID, 
    SystemSoundID myID;
    // Register the sound
    AudioServicesCreateSystemSoundID((__bridge_retained CFURLRef)aFileURL, &myID) ;
    // Play the sound!
    AudioServicesPlaySystemSound(myID);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T09:19:13.363

替换`__bridge_retained`为`__bridge`。

`__bridge_retained`这意味着您将所有权转移`aFileURL`到`AudioServicesCreateSystemSoundID()`并且该功能必须释放它（它不会）。

我认为你也应该打电话

```
AudioServicesDisposeSystemSoundID(myID) 
```

当不再需要声音对象时。

**提示：**当静态分析仪显示“潜在泄漏”警告时，单击警告左侧的蓝色图标，您将看到有关问题的详细信息。

# php - 如何使用 from 插入数据获得输出

> ID：11920859
> 
> 赞同：0
> 
> 时间：2012-08-12T08:34:17.413
> 
> 标签：php, mysql, html, database, forms

我尝试使用以下代码插入数据，但我真的不知道如何获得结果以及代码中的问题是什么，我尝试首先构建我的表单，然后编写插入查询并将其发送到新表格，请提供任何帮助：我现在也有以下错误：

* * *

注意：未定义索引：第 11 行 C:\xampp\htdocs\ers\test.php 中的服务

注意：未定义索引：第 12 行 C:\xampp\htdocs\ers\test.php 中的标题

注意：未定义的索引：第 13 行 C:\xampp\htdocs\ers\test.php 中的 RootCause

注意：未定义索引：第 14 行 C:\xampp\htdocs\ers\test.php 中的 RiskRating

注意：未定义索引：第 15 行 C:\xampp\htdocs\ers\test.php 中的影响

注意：未定义索引：第 16 行 C:\xampp\htdocs\ers\test.php 中的努力

注意：未定义的索引：第 17 行 C:\xampp\htdocs\ers\test.php 中的可能性

注意：未定义的索引：在第 18 行的 C:\xampp\htdocs\ers\test.php 中查找

注意：未定义索引：第 19 行 C:\xampp\htdocs\ers\test.php 中的含义

注意：未定义索引：第 20 行 C:\xampp\htdocs\ers\test.php 中的建议错误：无法添加或更新子行：外键约束失败 ( `ers_1`. `findings`, CONSTRAINT `findings_ibfk_15`FOREIGN KEY ( `ServiceType_ID`) REFERENCES `servicetype_lookup`( `ServiceType_ID`) ON UPDATE不采取行动）

* * *

```
 <html>
<body>
<?php
$con = mysql_connect("localhost","root","123");
error_reporting(0); 
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

?>

<form method="post"  action="test.php">
<fieldset>
<legend>Insert New Data </legend>
<p> Service Name : 
<select name="Services">
<option value="select"> -Select- </option>
<option value="architecture review">Architecture Review</option>
<option value="internal penetration testing">Internal Penetration Testing</option>
<option value="network component review">Network Component Review</option>
<option value="database review">Database Review</option>
<option value="wireless network">Wireless Network</option>
<option value="operating system review">Operating System Review</option>
<option value="web application">Web Application</option>
<option value="external penetration testing">External Penetration Testing</option>
</select>

</p>
<form method="post" action="test.php">
Ref : <input type="text" name="ref" /><br />
Title : <input type="text" name="title" /><br />
Risk Rating : 
<select name="RiskRating">
<option value="select"> -Select- </option>
<option value="High">High</option>
<option value="Medium">Medium</option>
<option value="Low">Low</option>
</select><br />
Root Cause : 
<select name="RootCause">
<option value="select"> -Select- </option>
<option value="access control">Access Control</option>
<option value="configuration management">Configuration Management</option>
<option value="patch management">Patch Management</option>
<option value="patch management">Certificate Management</option>

<option value="patch management">Password Management</option>

<option value="patch management">Audit Trail and Security Logs Management</option>

<option value="service deployment">Network Management</option>
</select><br />
Impact :
<select name="impact">
<option value="select"> -Select- </option>
<option value="high"> Major </option>
<option value="moderate"> Moderate </option>
<option value="low"> Minor </option>
</select><br />
Likelihood :
<select name="likelihood">
<option value="select"> -Select- </option>
<option value="possible"> Likely </option>
<option value="impossible">Possible</option>
<option value="definite"> Moderate </option>
<option value="definite"> Rare </option>
</select><br/>
Efforts : 
<select name="Efforts">
<option value="select"> -Select- </option>
<option value="possible"> Significant </option>
<option value="impossible">Moderate </option>
<option value="definite"> Intermediate </option>
<option value="definite"> Simple </option>
</select><br/>
Finding : <br/>
<TEXTAREA NAME="Finding" COLS=100 ROWS=10> 
</TEXTAREA>
<br/>
Implication: <br/>
<TEXTAREA NAME="Implication" COLS=100 ROWS=10> 
</TEXTAREA>
<br/>
Recommendation : <br/>
<TEXTAREA NAME="Recommendation" COLS=100 ROWS=10> 

</TEXTAREA>
<br/><input type="submit" value=" Save " onclick="window.location.href='test.php'" />
</fieldset>
</form>
<?php
mysql_select_db("ers_1", $con);
$result = mysql_query("SELECT * FROM findings");
while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['Finding_ID'] . "</td>";
  echo "<td>" . $row['ServiceType_ID'] . "</td>";
  echo "<td>" . $row['Title'] . "</td>";
  echo "<td>" . $row['RootCause_ID'] . "</td>";
  echo "<td>" . $row['RiskRating_ID'] . "</td>";
  echo "<td>" . $row['Impact_ID'] . "</td>";
   echo "<td>" . $row['Efforts_ID'] . "</td>";
    echo "<td>" . $row['Likelihood_ID'] . "</td>";
    echo "<td>" . $row['Finding'] . "</td>";
    echo "<td>" . $row['Implication'] . "</td>";

    echo "<td>" . $row['Recommendation'] . "</td>";
    echo "<td>" . $row['Report_ID'] . "</td>";
  echo "<td><a href='edit.php'>[EDIT]</a> <a href='delete_risk.php?risk_no=" . $row['risk_no'] . "'>[DELETE]</a></td>";
  echo "</tr>";
  }

mysql_close($con);
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:38:34.647

不幸的是，整个设置非常混乱。

一个大问题是这一行：

```
$sql="INSERT INTO findings ... "; 
```

您定义了一个字符串，该字符串将获取表单中的所有值，但您不使用它做任何事情。

要运行 SQL 查询，请使用`mysql_query()`.

```
mysql_query($sql); 
```

但是，我建议您阅读 PHP/MySQL 的基础知识，以便了解您正在编写的代码。看起来你正在把东西粘在一起，希望它能起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:21:17.130

我认为您使用了两种形式，甚至您在另一种形式中使用了一种形式，例如：

```
<form id="form1">
    //Some code
<form id="form2">
    //More some
</form> 
```

永远不可能使用嵌套表单。就是这样。如果您使用两个表单，那么最好避免嵌套表单并为两者提供单独的触发器。

# c# - 为什么我在客户端更新嵌套 cookie 并破坏服务器上的 cookie 键/值？

> ID：11920860
> 
> 赞同：0
> 
> 时间：2012-08-12T08:35:26.693
> 
> 标签：c#, javascript, jquery, asp.net, web-services

我正在使用 ASP Net C#。我有我在客户端更新的嵌套 cookie。我的 cookie： OwnerId=2027&LastAppId=2203&AppType=4&Mail=simba@wl js：

```
var cookieName = "LastAppId"
 var lastAppId = jQuery.getNestedCookie("myCookie", cookieName);
        var lastQryAppId = "&" + cookieName + "=" + lastAppId;
        var currentQryAppId = "&" + cookieName + "=" + newAppId;
        var newFullCookieStr = fullCookie.replace(lastQryAppId, currentQryAppId);
        jQuery.cookie("myCookie", newFullCookieStr, { expires: 360, path: '/' }); 
```

C＃：

```
HttpContext.Current.Request.Cookies["myCookie"].Value ="OwnerId%3D2027%262LastAppId%3D2203%26AppType%3D4%26Mail%3Dsimba%40w.l" 
```

但我不能按名字得到它，因为所有的钥匙都不见了。

```
(HttpContext.Current.Request.Cookies["2min_Auth"].Values).AllKeys[0] = null; 
```

我知道我可以获取字符串值并将其子串化或拆分并获取值但是有人知道它为什么会发生以及如何返回键/值以再次工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:47:25.377

```
var s = HttpUtility.UrlDecode("OwnerId%3D2027%262LastAppId%3D2203%26AppType%3D4%26Mail%3Dsimba%40w.l");
NameValueCollection nameValues = HttpUtility.ParseQueryString(s); 
```

# vb.net - 在数据网格中搜索时出错

> ID：11920864
> 
> 赞同：0
> 
> 时间：2012-08-12T08:36:19.320
> 
> 标签：vb.net, ms-access

我正在我的系统中进行搜索，但它说：

```
Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index 
```

我只能输入一个数字，在我擦除或输入另一个数字后它会弹出错误。

这是我的代码：

```
 Try
        For row As Integer = 0 To dgv_room.Rows.Count
            If dgv_room.Rows(row).Cells(0).Value.ToString.Substring(0, tbx_search.Text.Length) = tbx_search.Text Then
                dgv_room.Rows(row).Selected = True
                Exit For
            End If
        Next
    Catch ex As Exception
        MessageBox.Show(ex.Message)
    End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:49:04.700

我相信当您在gridview中找不到您的搜索值时会发生错误，因此循环将遍历所有行。

但是，您从 0 循环到 gridview 中的行数，但 gridview 中的行集合是从零开始的，因此您需要将循环中的迭代次数减少一：

```
 Try
        For Each row As DataGridViewRow In dgv_room.SelectedRows
            row.Selected = False
        Next
        For row As Integer = 0 To dgv_room.Rows.Count - 1
            If dgv_room.Rows(row).Cells(0).Value.ToString.Contains(tbx_search.Text) Then
                dgv_room.Rows(row).Selected = True
                Exit For
            End If
        Next
    Catch ex As Exception
        MessageBox.Show(ex.Message)
    End Try 
```

例如：

假设您的 gridview 中有 5 行，如果您的搜索文本中的任何一个都不存在，那么每次迭代将如下所示：

```
row = 0 > checks dgv_room.Rows(0)...
row = 1 > checks dgv_room.Rows(1)...
row = 2 > checks dgv_room.Rows(2)...
row = 3 > checks dgv_room.Rows(3)...
row = 4 > checks dgv_room.Rows(4)...
row = 5 > checks dgv_room.Rows(5)... (error here as a Row in the Rows collection with an idex of 5 doesn't exist) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T09:02:47.367

```
If dgv_room.Rows(row).Cells(0).Value.ToString.contains(tbx_search.Text) Then 
```

内含更好。我无法理解你的第二个问题，但试试这个。

# php - 聪明的致命错误

> ID：11920865
> 
> 赞同：0
> 
> 时间：2012-08-12T08:36:21.523
> 
> 标签：php, mysql, smarty

我正在使用以下代码

```
require 'Smarty/libs/Smarty.class.php';
$smarty = new Smarty;
$sel=mysql_query("select id, name from form");  
$smarty->assign('contact', $db->getRow($sql));
$smarty->display('testfunction.tpl'); 
```

我收到错误：

```
Fatal error: Call to a member function getRow() on a non-object in D:\xampp\htdocs\smarty\testfun.php on line 21 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T08:40:12.377

您还没有声明任何 $db 对象。改用这个：

```
$smarty->assign('contact', mysql_fetch_row($sel)); 
```

# math - 全局变换到局部变换？

> ID：11920866
> 
> 赞同：3
> 
> 时间：2012-08-12T08:36:30.167
> 
> 标签：math, graphics, 3d, spaces

与此相关：[将非分层变换应用于分层骨架？](https://stackoverflow.com/questions/11722391/apply-non-hierarchial-transforms-to-hierarchial-skeleton)

如果一个对象连接到另一个对象并且您需要在全局空间中设置它的位置、旋转和缩放，那么在知道“父”对象的相同值的情况下，如何获取这些值的本地版本？

（在另一个线程中，我可以执行 matrix.decompose() 从矩阵中获取这些值）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T08:39:50.740

只需将对象的世界变换矩阵乘以父世界变换的逆矩阵：

```
M_loc = M_parent_inv * M 
```

# jquery - 具有功能的全局变量方法？

> ID：11920870
> 
> 赞同：0
> 
> 时间：2012-08-12T08:37:39.310
> 
> 标签：jquery, variables

只是想知道这样的最佳实践是什么；我有这个功能：它决定了一些变量的变化

```
states = function(){
    if($('#Animation.switch.switchOff').length == 1){
        animationtoggle = 0;
    }
    else{
        animationtoggle = 1;
    }
    if($('#Autoscroll.switch.switchOff').length == 1){
        scrolltoggle = 1;
    }
    else{
        scrolltoggle = 0;
    }
} 
```

我现在有另一个 JS 文件，我需要在其中检查这些变量，我是否只是在`states()`内部运行任何其他函数？这样它每次都重新检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:20:57.810

局部变量可用于此目的。尝试这样的事情：

```
var states = function(){
    // set default values
    var animationtoggle = 0
        scrolltoggle  = 0;
    if($('#Animation.switch.switchOff').length != 1){
       animationtoggle = 1;
    }
    if($('#Autoscroll.switch.switchOff').length == 1){
        scrolltoggle = 1;
    }
    // return an object
    return  {
           animationtoggle: animationtoggle
           scrolltoggle: scrolltoggle
       };
} 
```

然后您可以`states()`从任何地方调用该函数并使用如下所示：

```
var states = states();
// get values like below
states.animationtoggle;
states.scrolltoggle; 
```

# objective-c - 类扩展中的只读属性覆盖

> ID：11920879
> 
> 赞同：1
> 
> 时间：2012-08-12T08:38:51.293
> 
> 标签：objective-c, xcode

我正在尝试定义一些在对象方法范围内可读和可写的公共只读属性，如下所示：

```
@interface MyObject : NSObject

@property (readonly, nonatomic, strong) id foo; // <-- WHAT'S THE CORRECT WAY

@end

//

@interface MyObject () 

@property (readwrite, nonatomic, strong) id foo;

@end

//

@implementation MyObject

@syntesize foo = _foo;

@end 
```

但是当我输入`@property (readonly, nonatomic, strong)`Xcode 时，它​​永远不会*帮助*我这样做。这是否意味着我做错了什么？属性标志顺序重要吗？建议使用什么方法来隐藏属性写入功能的实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T09:11:15.800

这是一种常用且绝对正确的模式。如果您不喜欢关于它的 Xcode 补全行为，您当然可以提交雷达。

# css - 图片与 CSS 对齐会导致 Firefox/Windows 出现问题，但不会导致 Firefox/linux 出现问题

> ID：11920881
> 
> 赞同：1
> 
> 时间：2012-08-12T08:39:18.587
> 
> 标签：css, windows, linux, firefox, vertical-alignment

我有一个关于 CSS、Firefox 和 Windows 的奇怪的具体错误。

让我解释一下：我用

```
vertical-align:sub; 
```

...它可以在 Linux 上的 Firefox 和 Windows 上的 IE 上正确显示，但不能在 Firefox 和 Windows 上正确显示。我在 Linux 和 Windows 上使用相同版本的 Firefox。

问题的一些图片（很抱歉给您带来不便，但我不能发布图片或超过2个链接，所以我必须这样做）：

[http://www.mercuryproductions.de/kram/Errors.html](http://www.mercuryproductions.de/kram/Errors.html)

页面链接：http: [//www.sontag-consult.com/](http://www.sontag-consult.com/)

如果我摆弄它，`vertical-align`我可以让它在 Win 上与 FF 一起工作，但它会弄乱其他组合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:06:57.260

我会这样做：

**CSS**

将此添加到您的 CSS 文件中：

```
ul
{
    margin:0;
    padding:0;
}
ul li
{
    margin:0 0 0 3px;
    padding:0;
    display:inline-block;
    list-style-type:none;
}
ul li:first-child
{
    margin-left:0;
}
ul li a
{
    padding:3px 8px;
    display:block;
    font-weight:bold;
    text-decoration:none;
    color:#fff;
    background-color:#000;
}
ul li a i
{
    margin:2px 5px 0 0;
    display:block;
    float:left;
    width:20px;/* width of your img */
    height:15px;/* height of your img */
    background:url(/sprites.png) no-repeat;/*your img file here*/
}​ 
```

**HTML**

这就是您的 HTML 代码的样子：

```
<ul>
    <li>
        <a href=""><i></i>Lang 1</a>
    </li><li>
        <a href=""><i></i>Lang 1</a>
    </li><li>
        <a href=""><i></i>Lang 1</a>
    </li>
</ul> 
```

**[演示](http://jsfiddle.net/rJf7w/)**

顺便说一句，可能建议您使用[图像精灵](http://www.w3schools.com/css/css_image_sprites.asp)。

* * *

## 更新：

**解决方案 1（IMG 标签）：**

**CSS**

```
ul li a img
{
    margin:2px 5px 0 0;
    border:0;
    display:block;
    float:left;
    width:20px;/* width of your img */
    height:15px;/* height of your img */
}​ 
```

**HTML**

```
<ul>
    <li>
        <a href=""><img src="/deutsch.png">Deutsch</a>
    </li>
</ul> 
```

**[演示](http://jsfiddle.net/rJf7w/1/)**

**解决方案 2（带图像精灵）：**

**CSS**

```
ul li a i
{
    background:url(/sprites.png) no-repeat;
    margin:2px 5px 0 0;
    display:block;
    float:left;
    width:20px;/* width of your img */
    height:15px;/* height of your img */
}

ul li a i.deutsch
{
    background-position:0 0;
} 
```

**解决方案 3（无图像精灵）：**

**CSS**

```
ul li a i
{
    margin:2px 5px 0 0;
    display:block;
    float:left;
    width:20px;/* width of your img */
    height:15px;/* height of your img */
}

ul li a i.deutsch
{
    background:url(/deutsch.png) no-repeat center center;
} 
```

**HTML**

```
<ul>
    <li>
        <a href=""><i class="deutsch"></i>Deutsch</a>
    </li>
</ul> 
```

# .net - 如何获取文件名Bitmap对象？

> ID：11920890
> 
> 赞同：0
> 
> 时间：2012-08-12T08:41:12.083
> 
> 标签：.net, string, bitmap

这是我的 C# 代码：

```
 public static void FilterNoises(Bitmap bmp)
    {
        Image<Bgr, Byte> img = new Image<Bgr, byte>(bmp);
        img.PyrUp().PyrDown();
        img.Save(@"C:\Users\Desktop\Road Images\Filtered Images\" +   "filename.extension");
    } 
```

我需要从 bmp 对象中获取文件名和扩展名。知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:06:05.957

您应该有加载位图时的文件名和扩展名，您可以直接从位图对象本身获取文件名

```
var filename = @"C:\Filename.bmp";
var bitmap = new Bitmap(System.Drawing.Image.FromFile(fileName, true)); 
```

# google-chrome-extension - 我怎样才能启动 contentscript

> ID：11920892
> 
> 赞同：1
> 
> 时间：2012-08-12T08:41:24.257
> 
> 标签：google-chrome-extension

我有一个简单的问题，我有这三个文件 popup.html：

```
<script>
    function buttonClicked(button) 
    {
        chrome.extension.sendRequest({command:button.id});
    }
</script>
    <input style="width:100%" type="button" value="Click me" id="click" onclick="buttonClicked(this)"/><br/> 
```

背景.html：

```
<script>
    function processRequest(request, sender, sendResponse) 
    {
        alert('hi');
        sendResponse({});
    }
    chrome.extension.onRequest.addListener(processRequest);
</script> 
```

和 contentscript.js

```
s = document.getElementsByClassName('st');
if (s[0].innerText != '') { 
st = new Array(); 
for (i = 0;i<s.length;i++) {
    st[i] = s[i].innerText;
}
chrome.extension.sendMessage({"message" : st}, function(response) {});
} 
```

每次单击弹出页面中的按钮时，我都想启动 contentscript，原因是因为 contentscript 中的脚本既不工作，也不在 background.html 上工作，也不在 popup.html 上工作？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T14:06:38.760

我试图在评论中解释解决方案以及为什么要使用它，三遍。由于您不理解它，我将参考您的代码再次解释它：

### 弹出窗口

*   将内联脚本移动到外部文件，例如`popup.js`.
*   删除内联事件侦听器，并将其移至`popup.js`.

### `popup.js`

```
function buttonClicked(button) {
    chrome.extension.sendRequest({command: button.id});
}
document.getElementById('click').addEventListener('click', function() {
    buttonClicked(this);
}); 
```

### `popup.html`

```
<script src="popup.js"></script>
<input style="width:100%" type="button" value="Click me" id="click"><br> 
```

如果您测试前面的代码，您会发现它不起作用。这是因为 的内容`popup.js`在按钮之前执行（发生*在*按钮创建之后。这`<script src>`可以通过两种方式解决（使用任何一种方法，但不能同时使用两种方法）：

*   推荐：`<script src="popup.js"></script>`放在结束`</body>`标签之前`popup.html`。然后，您确定在执行脚本时所有元素确实存在。
*   替代方法：将事件侦听器调用包装在一个`DOMContentLoaded`事件中：

    ```
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementByUd('click').addEventListener( ... );
    }); 
    ```

## 背景页面。

有关可用选项的更详尽说明，请参阅[此答案](https://stackoverflow.com/questions/11913575/port-error-while-changing-chrome-extension-from-manifest-v1-to-v2)的中间部分。

*   修改清单文件，使用`"background": {"scripts": ["background.js"]}`.
*   重命名`background.html`为，然后从文件`background.js`中删除`<script>`and 。`</script>`

# php - 特殊字符在 php 中被转换

> ID：11920896
> 
> 赞同：0
> 
> 时间：2012-08-12T08:42:34.453
> 
> 标签：php, oracle11g

我在 Oracle 数据库中使用 PHP 5.2.9 和 Apache httpd。我也在使用 ADOdb PHP 库。

当我从 web 表单中提供一些特殊字符数据时，比如说`John's home`，它会被转换为`John&#039;s home`并且它也会像这样进入数据库。

怎么了？我是否错误配置了任何设置？

# android - Android 录制没有音频的视频

> ID：11920898
> 
> 赞同：12
> 
> 时间：2012-08-12T08:42:50.713
> 
> 标签：android, android-camera, mediarecorder, android-mediarecorder

Android 是否可以在没有音频流的情况下从相机录制视频？

目标：减小输出文件的大小。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-02-12T17:52:11.493

您可以通过从内置配置文件 (CamcorderProfile) 中复制必填字段来准备 MediaRecorder。只需忽略音频设置，您就可以开始使用了。根据您的需要编辑下面的代码，第 3 步是这里的重要部分。

```
private boolean prepareVideoRecorder() {

    mCamera = getCameraInstance();
    mMediaRecorder = new MediaRecorder();

    // store the quality profile required
    CamcorderProfile profile = CamcorderProfile.get(cameraid, CamcorderProfile.QUALITY_HIGH);

    // Step 1: Unlock and set camera to MediaRecorder
    mCamera.unlock();
    mMediaRecorder.setCamera(mCamera);

    // Step 2: Set sources
    mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

    // Step 3: Set all values contained in profile except audio settings
    mMediaRecorder.setOutputFormat(profile.fileFormat);
    mMediaRecorder.setVideoEncoder(profile.videoCodec);
    mMediaRecorder.setVideoEncodingBitRate(profile.videoBitRate);
    mMediaRecorder.setVideoFrameRate(profile.videoFrameRate);
    mMediaRecorder.setVideoSize(profile.videoFrameWidth, profile.videoFrameHeight);

    // Step 4: Set output file
    mMediaRecorder.setOutputFile(getOutputMediaFile(MEDIA_TYPE_VIDEO).toString());

    // Step 5: Set the preview output
    mMediaRecorder.setPreviewDisplay(mPreview.getHolder().getSurface());

    // Step 6: Prepare configured MediaRecorder
    try {
        mMediaRecorder.prepare();
    } catch (IllegalStateException e) {
        releaseMediaRecorder();
        return false;
    } catch (IOException e) {
        releaseMediaRecorder();
        return false;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-12T10:52:08.810

您可以使用 MediaRecorder 而无需对其调用 setAudio*。这是我第一次使用 MediaRecorder，但这个例子似乎有效：

```
public class CamcorderView extends SurfaceView implements
        SurfaceHolder.Callback {

    private SurfaceHolder mHolder;

    private Camera mCamera;
    private MediaRecorder mRecorder;

    public CamcorderView(Context context, AttributeSet attrs) {
        super(context, attrs);

        mHolder = getHolder();
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        mHolder.addCallback(this);

        mCamera = Camera.open();
        mRecorder = new MediaRecorder();

    }

    public void stop() {
        mRecorder.stop();
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        mCamera.unlock();
        mRecorder.setCamera(mCamera);

        mRecorder.setPreviewDisplay(mHolder.getSurface());

        // You may want to change these
        mRecorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
        mRecorder.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT);
        mRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.DEFAULT);

        // You'll definitely want to change this
        mRecorder.setOutputFile("/mnt/sdcard/out");

        try {
            mRecorder.prepare();
        } catch (IllegalStateException e) {
            Log.e("IllegalStateException", e.toString());
        } catch (IOException e) {
            Log.e("IOException", e.toString());
        }
        mRecorder.start();

    }
} 
```

您可能还想致电：

*   `setVideoSize(int, int);`
*   `setVideoFrameRate(int);`

# c# - 如何在 Sublime Text 2 中对 C# 进行 lint

> ID：11920899
> 
> 赞同：4
> 
> 时间：2012-08-12T08:42:54.070
> 
> 标签：c#, sublimetext2

我将 SublimeLinter 用于 Python、PHP 等，并且想知道 C# linting / 语法检查是否可作为插件使用。

如果没有，制作一个的最佳方法是什么？我有 Visual Studio 2010，所以它是插件指向检查程序的情况，还是不是那么简单？

另外作为奖励，我们将不胜感激提供使 ST2 中的 C# 开发更容易的其他工具列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:47:12.210

Sublime Text 2 已经包含了 C# 的 codex 并且已经很好地开发了。如果你想要一个插件，你必须去他们的论坛看看。

# perl - Catalyst::Engine::HTTP:Prefork

> ID：11920900
> 
> 赞同：0
> 
> 时间：2012-08-12T08:43:05.600
> 
> 标签：perl, catalyst

我正在从书中学习催化剂`the definitive guide to catalyst`。我已经完成了演示应用程序——lolcatalyst_lite。当我使用命令`"CATALYST_ENGINE=HTTP:Prefork script/myapp_server.pl"`时，出现了问题；并且根据书，我重写了文件lite.pm，错误还在。

我收回我在文件 lite.pm 中添加的内容。为什么命令`"script/myapp_server.pl"`仍然错误：

```
Catalyst::Engine::HTTP:Prefork' is not a module name
    Compilation failed in require at /usr/local/share/perl/5.14.2/Catalyst/ScriptRunner.pm line 50. 
```

我是否在操作系统中设置了一些参数？我怎么能回去？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:24:46.053

自从这本书在这个特定领域出版以来，Catalyst 已经看到了一些相当大的变化。

旧的 Catalyst Engine 代码[已替换](https://metacpan.org/module/Catalyst%3a%3aPSGI)为 PSGI/Plack：

> Catalyst 曾经包含一整套 Catalyst::Engine::XXXX 类来处理各种 Web 服务器和环境（例如 CGI、FastCGI、mod_perl）等。
> 
> 这在 Catalyst 5.9 中已更改，因此所有这些工作都由 Catalyst 实现 PSGI 规范完成，使用 Plack 的适配器来实现该功能。

查看[Catalyst::PSGI](https://metacpan.org/module/Catalyst%3a%3aPSGI)的文档，其中解释了原因以及如何处理现有代码。lolcat 教程是最新的（v5.8），所以[你应该可以](https://metacpan.org/module/Catalyst%3a%3aUpgrading)毫无困难地升级它。

# iphone - 自定义 UILocalNotification 警报 - 使用滑动滑块或按钮

> ID：11920902
> 
> 赞同：4
> 
> 时间：2012-08-12T08:43:25.293
> 
> 标签：iphone, ios, notifications, uialertview

我知道以前有人问过这个问题。然而...

虽然直到最近我认为唯一可能和接受的警报是带有 2 个按钮的文本，但我发现一些应用程序具有不同的本地警报。

所以我认为有一种可接受的方式来定制 lokal Alert。这是正确的还是这些应用程序只是以某种方式“滑入”商店 - 因为我知道这发生在之前的功能中，然后应用程序突然从商店消失了。

我找不到任何关于它的信息。

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T10:10:10.820

从 iOS 5 开始：

*   在设备锁定时交付 a`UILocalNotification`时，它会显示在锁定屏幕上，并带有滑动滑块以打开应用程序。
*   如果在设备使用时发送通知，它可以显示为屏幕顶部的横幅，也可以显示为带有两个按钮的警报。
    *   一个按钮始终是取消按钮。
    *   另一个按钮打开应用程序。`alertAction`您可以通过设置属性来更改此按钮的文本。
    *   您可以通过在通知上设置来禁用警报上的此操作按钮`hasAction = NO`）。

除非设备已越狱，否则没有其他可用的通知警报可以到达的方式。在这种情况下，很多事情都是可能的。

在 iOS 5 之前，仅支持弹出警报通知。

由于 iOS 的性质，技术上不可能以任何其他方式传递通知，或自定义警报，因为通知传递由系统处理，应用程序无法访问系统 UI，因此无法显示任何消息本身。即使您确实以某种方式做到了这一点，Apple 也不会允许这样做。

在此处阅读`UILocalNotification`文档：http: [//developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html)了解更多详细信息。

# asp.net - 实体模型从模型错误生成数据库：数据库不存在

> ID：11920903
> 
> 赞同：1
> 
> 时间：2012-08-12T08:43:29.640
> 
> 标签：asp.net, sql-server, entity-framework

我使用实体框架创建了我的数据模型，当我尝试从模型生成数据库时，它会生成脚本，但是当我执行它时出现以下错误：

> *消息 911，级别 16，状态 1，第 1 行
> 数据库“MyOp”不存在。确保输入的名称正确。*

我不知道错误在哪里，我认为这不是权限问题。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:34:41.040

好的，我找到了，很抱歉提出这样的问题。问题是我的数据库不是在我的服务器中创建的，所以我是这样创建的：在 Visual Studio 的 SQL 连接中，右键单击并添加新数据库，在服务器名称类型“.\SQLEXPRESS”的对话框中（没有引号）。在数据库名称中键入您的数据库的名称。现在在执行脚本时，在执行按钮旁边的下拉列表中选择您的数据库名称而不是“master”。

警告：更换笔记本电脑时，我没有找到我创建的数据库，因此您必须将其复制/粘贴到应用程序的 appdata 文件夹中，要复制数据库，您将在以下路径中找到它：C:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T11:18:22.317

您必须单击断开连接按钮，然后单击连接按钮。vs2012 默认选择 sqlExpress 当您想再次连接到您的服务器时，您必须正确选择服务器名称。

# javascript - 为什么 jquery 在 attr('src') 中返回 Object

> ID：11920904
> 
> 赞同：0
> 
> 时间：2012-08-12T08:43:30.173
> 
> 标签：javascript, jquery

这返回我对象对象。如何制作一个src数组？

```
$('#mainContainerPortfolio #activateBox').click(function(){

    var clickedAlt = $(this).children('img').attr('alt');
    var imgs = $('#mainContainerPortfolio #projectImg[alt="'+clickedAlt+'"]');
    imgs.src;
    var i = [];
    i.push(imgs);

    console.log(i);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T08:45:38.723

在您的代码中，`imgs`是 jQuery 对象，而不是 DOM 元素。因此，它没有`.src`属性。

如果您想要该`.src`jQuery 对象中的图像属性，则需要执行以下操作之一：

```
var src = imgs.attr("src"); 
```

或者，从 jQuery 对象中获取第一个 DOM 元素：

```
var src = imgs[0].src 
```

* * *

此外，您的代码中还有其他几个错误。如果您想将`src`所有被点击的元素的值累积到一个数组中，您可以执行以下操作：

```
$('#mainContainerPortfolio #activateBox').click(function(){

    var clickedAlt = $(this).children('img').attr('alt');
    var imgs = $('#mainContainerPortfolio #projectImg[alt="'+clickedAlt+'"]');
    var srcs = imgs.map(function(index, elem) {
        return(elem.src);
    }).get();

    console.log(srcs);
}); 
```

* * *

我认为您的选择器也存在问题，因为您只能拥有一个带有 an 的元素，`id="projectImg"`因此没有理由将属性 [alt="'+clickedAlt+'"] 与它一起使用。

同样，`'#mainContainerPortfolio #activateBox'`可以只更改为，`'#activateBox'`因为只能有一个 id 为 的对象`activateBox`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T08:45:42.970

因为`imgs` *是*一个对象。这一行：

```
imgs.src; 
```

什么都不做。它只是返回那个。没有对返回的值做任何事情。将其更改为：

```
imgs = imgs.attr("src"); 
```

它应该可以正常工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T08:49:00.000

您可以使用 .map 来获取数组。

```
i = imgs.map(function() {
  return $(this).attr('src');
}); 
```

# postgresql - 数据库复制播放 .1.2.4

> ID：11920909
> 
> 赞同：1
> 
> 时间：2012-08-12T08:44:28.190
> 
> 标签：postgresql, playframework

我想为我的 play 1.2.4 框架应用程序创建一个数据库复制，例如主/从数据库。我正在使用 PostgreSQL。在这方面的任何指导将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T09:58:07.977

您可以使用 PostgreSQL 的本机复制（从 9.0 版开始可用），工作正常。[repmgr](http://www.repmgr.org)使设置和维护变得更容易，也用于自动故障转移。

PostgreSQL 支持异步复制（从 9.0 开始）和同步复制（[从 9.1 开始](http://www.postgresql.org/docs/9.1/static/warm-standby.html#SYNCHRONOUS-REPLICATION)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T18:26:33.863

由于您提到 Play 1.2，您可能正在使用它附带的默认内存 H2 数据库并希望将数据复制到 PostgreSQL。无论如何，看看[SymmetricDS](http://www.symmetricds.org "开源数据同步")一个开源数据库复制引擎，它支持大多数数据库，包括 H2 和 PostgreSQL。它支持主/从以及具有冲突管理的多主。它是可以跨 WAN 工作的异步复制，因此如果网络速度慢或断断续续，它不会减慢您的应用程序的速度。由于它支持不同数据库系统之间的复制，因此您可以在将来根据需要更改平台。

# php - 奇怪定位的打开和关闭 PHP 标签？

> ID：11920916
> 
> 赞同：2
> 
> 时间：2012-08-12T08:44:52.960
> 
> 标签：php

我对编程很陌生，已经吸收了大约 150 页的书。当下面的代码让我很难受时，我对 PHP 的操作很顺利。谁能解释一下打开和关闭 PHP 标记的位置。

```
<?php
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    echo "<p>Thanks for Registering</p>",
    "Username: ", htmlentities ($_POST['username']), "<br />",
    "Email: ", htmlentities ($_POST['email']), "<br />";
    }
    else { ?>
    <form action = "test.php" method = "post">
            <label for = "username">Username: </label>
            <input type = "text" name = "username" />
            <label for = "email">Email: </label>
            <input type = "text" name = "email" />
            <input type = "submit" value = "Register" />
    </form>
    <?php }
?> 
```

我想，应该只有一对 PHP 标签：

1.  `<?php`上面代码开头的开始标签
2.  `?>`上述代码结束时的结束标签

其他任何事情我都很难消化，请帮助我理解为什么 php 标签存在于代码之间非常奇怪的位置。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T08:50:06.500

根据[PHP 标签手册](http://php.net/manual/en/language.basic-syntax.phptags.php)

> 当 PHP 解析文件时，它会查找开始和结束标记，这些标记告诉 PHP 开始和停止解释它们之间的代码。以这种方式解析允许 PHP 嵌入到各种不同的文档中，因为 PHP 解析器会忽略一对开始和结束标记之外的所有内容。

这意味着 php 标记之间的代码将被回显并在一个之外：

```
<form action = "test.php" method = "post">
            <label for = "username">Username: </label>
            <input type = "text" name = "username" />
            <label for = "email">Email: </label>
            <input type = "text" name = "email" />
            <input type = "submit" value = "Register" />
</form> 
```

将被视为普通的 HTML。在上面的例子中，PHP 检查表单是否已经发布，如果是，它会显示一条感谢消息。如果 HTTP 请求不是 POST，它将显示一个表单供用户发布。

一般来说，混合 HTML 和 PHP 并不是一个好习惯，你应该避免这种结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T08:53:40.163

考虑它的最简单方法是做解析器所做的事情，即将php标签外的内容替换为php标签内的echo语句。

这样做的主要好处是您不必转义 php 字符串中的 HTML，此外，如果结构良好，您可以在 WYSIWYG 编辑器中很好地查看它

这是一个与您编写的代码等效且不会退出 php 模式的代码示例

```
<?php
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    echo "<p>Thanks for Registering</p>",
    "Username: ", htmlentities ($_POST['username']), "<br />",
    "Email: ", htmlentities ($_POST['email']), "<br />";
}
else { 
  echo "
    <form action = \"test.php\" method = \"post\">
            <label for = \"username\">Username: </label>
            <input type = \"text\" name = \"username\" />
            <label for = \"email\">Email: </label>
            <input type = \"text\" name = \"email\" />
            <input type = \"submit\" value = \"Register\" />
    </form>";
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T11:56:20.033

PHP 手册在解释实际发生的情况方面做得很差。PHP 解析器绝对**不会**忽略块外的文本。相反，PHP 解析器将该文本转换为回显操作。不相信我？您可以在源代码中自己查看。在 zend_language_parser.y 中，您将找到以下行：

```
|   T_INLINE_HTML           { zend_do_echo(&$1 TSRMLS_CC); } 
```

当你看到`<?php if($condition) { ?><div>...</div><?php } ?>`它完全等同于`<?php if($condition) { echo '<div>...</div>'; ?>`.

语法可能看起来很奇怪，但在某些情况下它实际上非常有用。例如，我们所有的网页通常共享相同的页眉和页脚。人们通常通过在脚本开头执行 include('header.html') 并在结尾执行 include('footer.html') 来处理此问题。这不是一个非常灵活的方法。此外，您最终会得到一个 HTML 文档的两半，它们无法在浏览器中正确呈现。

更好的方法是使用函数声明对 HTML 文档进行切片：

```
<?php function printHeader($title = "Default Title", $extraJSScrpts = array(), $extraCSSFiles = array()) { ?>
<html>
    <head>
        <title>
            <?php echo $title; ?>
        </title>
    </head>
    <body>
        <div style="position: absolute; left: 150px; top: 35px;">
<?php } ?>
<?php function printFooter() { ?>
        </div>
    </body>
</html>
<?php } ?> 
```

如果您忽略`<?php ... ?>`，您所拥有的是一个常规的 HTML 文档。再次查看 PHP，您会看到我有两个函数，printHeader() 和 printFooter()。我的所有页面现在都只调用这两个函数，而不是包含。每个页面都可以传递可选参数来处理任何特殊需求（例如，额外的样式表）。如果我想在我的网站上实现不同的主题，那将非常简单。我所要做的就是更改我在开始时包含的文件以引入这些函数的不同版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T08:48:42.537

PHP 中的控制结构（例如循环、函数等）可以跨结束标记对拆分。实际上，任何未包含在 PHP 标记中的内容都会被发出，就好像它正在被回显（或在当前输出缓冲区中捕获，如果有的话）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T08:50:02.220

```
 Try this
 <?php
        if ($_SERVER['REQUEST_METHOD'] == 'POST') {
            echo "<p>Thanks for Registering</p>",
            "Username: ", htmlentities ($_POST['username']), "<br />",
            "Email: ", htmlentities ($_POST['email']), "<br />";
            }
            else { 
    echo '
            <form action = "test.php" method = "post">
                    <label for = "username">Username: </label>
                    <input type = "text" name = "username" />
                    <label for = "email">Email: </label>
                    <input type = "text" name = "email" />
                    <input type = "submit" value = "Register" />
            </form>';
            }
    ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-12T08:50:30.860

开始和结束`<?php`标签是告诉解释器哪些代码是 php 代码（因此它应该解释），哪些代码是其他代码 - HTML、CSS、JS 等。

你会注意到这一点：

```
echo "<p>Thanks for Registering</p>"; 
```

这是一个有效的 PHP 语句，可以发送到 PHP 解释器。

然而，稍后在脚本中作者想要输出一个加载更多的 HTML - 他当然可以做这样的事情：

```
 echo '<form action = "test.php" method = "post">
        <label for = "username">Username: </label>
        <input type = "text" name = "username" />
        <label for = "email">Email: </label>
        <input type = "text" name = "email" />
        <input type = "submit" value = "Register" />
</form>'; 
```

而是选择告诉解释器忽略所有这些 HTML 内容，方法是用 a 关闭 PHP 部分`?>`并输出正常的 HTML。

他需要完成 else{} 块，所以用 重新打开 PHP `<?`，添加结束 } 然后用结束 ?>

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-12T19:02:53.150

请注意，PHP 还[为控制结构提供了一种替代语法，](http://www.php.net/manual/en/control-structures.alternative-syntax.php)当它们被用于控制 HTML 时，它可以提高可读性。以下代码从项目列表中创建一个具有交替背景颜色的表格：

```
<table style="width: 100%">
    <?php foreach($items as $index => $item): ?>
        <?php if(!($index & 0x0001)): // even ?>
            <tr style="background-color: #FFFFAA">
                <td>
                    <?php echo $item ?>
                </td>
            </tr>
        <?php else: ?>
            <tr style="background-color: #AAFFFF">
                <td>
                    <?php echo $item ?>
                </td>
            </tr>
        <?php endif ?>
    <?php endforeach ?>
</table> 
```

# javascript - jQuery对象信息检索问题

> ID：11920931
> 
> 赞同：1
> 
> 时间：2012-08-12T08:48:01.763
> 
> 标签：javascript, jquery, oop

我有一个对象，其中嵌套了一些细节（假设任何级别），我想检索数据，然后将其存储在一个新对象中。请参阅我的示例。我没有得到我所期望的。谁能给我检索对象的最佳方法？

目的：

```
var myObj = {
        info:[
            [
                [
                    {'name':'first Name'},
                    {'name' : 'Second Name'}
                ]
            ]
        ]
    } 
```

我检索和获取新对象的功能（它无法正常工作）：

```
 var getIt = function (data){
        $.map(data, function (val,num){
            var myObj = {};
            if(typeof val === 'object'){
                getIt(val);
            }else{
                myObj = val // as well this is wrong, only last data i am getting.
            }
            console.log(myObj);
            return myObj;
        })

    }
    var x = getIt(myObj);
    console.log(x);//i am not get any result. i need the result like this x= {{name:first name},{name:'second name'}} 
```

# spring - Grails Spring Security Plugin - 插件目录在哪里？

> ID：11920938
> 
> 赞同：0
> 
> 时间：2012-08-12T08:49:27.357
> 
> 标签：spring, grails, plugins

我对 Grails 比较陌生，目前我正忙于 Spring-Security UI 插件。阅读文档后，我想对属性文件*grails-app/i18n/messages.spring-security-ui.properties*进行一些调整，但我找不到属性文件。既不在项目目录中，也不在插件目录中。

我什至尝试在我的项目中使用 unix-command find 来搜索它。（*查找 .-name 'messages.spring-security-ui.properties'*）

我是否必须使用 s2ui-override 命令来生成 spring-security-ui 目录及其属性文件？

我通过修改 BuildConfig.groovy ( *compile ":spring-security-ui:0.2"* ) 并使用命令*grails compile*安装了 ui-plugin 。

先感谢您。

最好的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T16:56:36.763

插件安装在您的本地用户文件夹中，例如：

```
~/.grails/2.0.4/projects/grailsdevs/plugins/ 
```

在哪里：

```
grailsdevs = project name 
```

顺便说一句，您可以覆盖项目中的消息属性。

检查您可以使用的消息：

[http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/25%20Internationalization.html](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/25%20Internationalization.html)

您不必覆盖插件，因为插件是在本地安装的，如果您在另一台计算机上运行该应用程序，则将从存储库安装插件。所以最好的方法是在你的 i18n 资源包中添加消息。

转到您的项目...在文件夹下：grails-app/i18n/

希望这对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T17:08:29.037

**不要编辑插件文件。**

如果您想要一个不同的 I18N 消息作为密钥，请将该行添加到您的应用程序`messages.properties`（以及其他语言环境文件，如果您支持多种语言）。应用程序的文件优先于插件文件

只需使用相同的键和您想要显示的任何消息。

# windows - 带有 Windows 的 64 位处理器上的最大进程大小是多少

> ID：11920942
> 
> 赞同：1
> 
> 时间：2012-08-12T08:50:02.733
> 
> 标签：windows, process, processor

Windows 机器上的 32 位处理器上的进程可以占用的最大大小是多少？在任何情况下，进程大小都可以超过 4GB 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T13:38:24.593

假设您在谈论虚拟内存大小，“进程大小”没有任何意义。

*   在 32 位操作系统上，一个 32 位进程最多可以消耗 2 GB 的地址空间。
*   当使用 /3GB 引导选项引导并使用 /LARGEADDRESSAWARE 链接器选项链接时，32 位进程在 32 位操作系统上最多可以消耗 3 GB 的地址空间。现在这个引导选项很少可用，尤其是视频适配器占用了太多的物理地址空间，无法为操作系统和文件系统缓存留出足够的空间。
*   一个 32 位进程在 64 位操作系统上最多可以消耗 4 GB 的地址空间，只要它使用 /LARGEADDRESSAWARE 链接器选项链接
*   在 64 位操作系统上，一个 64 位进程可能会消耗一定数量的虚拟地址空间，该数量受页面文件最大大小的限制。绝对最大值进一步受到操作系统版本的限制，如此[处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366778%28v=vs.85%29.aspx)所述。

您可能会遇到其他限制。这在 Mark Russinovich 的题为“突破极限”的博客系列中得到了很好的探索。[这一](http://blogs.technet.com/b/markrussinovich/archive/2008/11/17/3155406.aspx)期探讨了虚拟内存限制。

# c++ - 如何在复制构造函数中调用重载的下标？

> ID：11920944
> 
> 赞同：1
> 
> 时间：2012-08-12T08:50:14.310
> 
> 标签：c++, compiler-errors, overloading, copy-constructor, subscript

如果我`const`从复制构造函数中删除`MyArray(const MyArray& cArrayInput)`，一切都很好。否则在该行会出现以下编译错误`m_paArray[i] = cArrayInput[i]`：

> 错误 C2678：二进制“[”：未找到采用“const MyArray”类型的左侧操作数的运算符（或没有可接受的转换）。

我知道我可以使用`cArrayInput.m_paArray[i]`. 但是如何使用重载的下标函数呢？

```
class MyArray
{
private:
    int m_nLength;
    double* m_paArray;
public:
    MyArray():m_nLength(0),m_paArray(0)
    {
    }
    // copy constructor
    MyArray(const MyArray& cArrayInput)
    {
        m_nLength = cArrayInput.m_nLength;
        m_paArray = new double[m_nLength];
        for(int i=0;i<m_nLength;i++)
            m_paArray[i] = cArrayInput[i];
    }
    double& operator[](const int nIndex)
        {
           assert(nIndex >= 0  && nIndex < m_nLength);
           return m_paArray[nIndex];
        }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T08:52:18.710

问题是您`const`在`MyArray`. 所以你需要提供一个`const`版本`operator[]`：

```
const double& operator[](const int nIndex) const
{
  assert(nIndex >= 0  && nIndex < m_nLength);
  return m_paArray[nIndex]; 
} 
```

请注意，*除了*非常量版本之外，您还可以提供此版本。

`assert`顺便说一句，如果索引超出范围，则可能是调用以外的其他方法。例如，您可以抛出异常。这使调用者代码有机会至少恢复并做一些事情。[std::out_of_range](http://en.cppreference.com/w/cpp/error/out_of_range)异常是为这些情况设计的。

# c# - Orchard CMS 1.4 无法使用 Orchard Media 上传 .avi、.mp4、.flv

> ID：11920945
> 
> 赞同：1
> 
> 时间：2012-08-12T08:50:27.210
> 
> 标签：c#, .net, asp.net-mvc, file-upload, orchardcms

我正在为视频管理创建模块。我研究了一切并且知道如何做到这一点，但解决了奇怪的问题。我将使用果园的标准媒体功能。我的意思是我单击媒体-> 添加媒体并选择要上传到服务器的文件。当我选择 .wmv（和其他非视频格式）时，一切正常，但后来我尝试上传 .avi、.mp4、.flv，它给了我 - 错误 101（net::ERR_CONNECTION_RESET）：连接已重置。我在不同的浏览器（firefox和chrome）中尝试过不同的机器和不同的窗口（windows 7和winows 8），但同样的问题。

请帮忙。

问候，迪玛。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T22:23:38.873

请提高 IIS 大小限制设置： http: [//msdn.microsoft.com/en-us/library/ms689462 (v=VS.90).aspx](http://msdn.microsoft.com/en-us/library/ms689462(v=VS.90).aspx)

# html - 固定左柱高度

> ID：11920950
> 
> 赞同：0
> 
> 时间：2012-08-12T08:51:16.257
> 
> 标签：html, css, css-float

我有一个新网站，但它仍然是原型。我对 div 的固定高度有点困惑。我无法解释多么明显。[你可以在这里](http://livebeta.alphabetas.co.cc/media.php?modul=thread)访问我的网站

我用过`min-height:100%`。但是如果 left-post`min-height:100%`和 right-post`min-height:100%`如果 right-post 有一点内容，left-post 会比 right-post 高。我想要`min-height`（左帖）= `height`（右帖）

但是我想留下帖子（图片、姓名、管理员、用户 ID 等），与右帖子（真正的帖子）高度相同。我已经尝试过了，但我使用 JavaScript 来做到这一点。请帮我。对不起，如果我的英语不好，我是印度尼西亚人，我的英语还不够漂亮:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:19:49.827

你可以给`padding-bottom:50px;`.

# mysql - Mysql Order by 子句使用“FileSort”

> ID：11920953
> 
> 赞同：9
> 
> 时间：2012-08-12T08:51:58.277
> 
> 标签：mysql, indexing, database-performance, explain

我有一个像这样的表结构

```
comment_id primary key
comment_content 
comment_author
comment_author_url 
```

当我触发查询时

```
explain SELECT * FROM comments  ORDER BY comment_id 
```

它将结果输出为

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE  comments    ALL     NULL    NULL    NULL    NULL    22563   Using filesort 
```

为什么找不到我定义为主键的索引？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-12T10:28:04.220

这不是因为它不能使用索引。这是因为优化器认为不使用索引并执行 filesort ^(**1**)会更快。您应该在 MyiSAM 和 InnoDB 表中看到不同的行为。

InnoDB 将`PRIMARY`键创建为集群键（`UNIQUE`如果未定义主键，则为第一个键），这可用于具有`ORDER BY pk`或`WHERE pk BETWEEN low AND high`因为所需的所有值都在此集群键和连续位置中的查询（集群键**是**表） .

MyISAM 表只有 B-tree 索引，所以如果查询使用这个索引，它必须读取整个索引，并且它的`comment_id`值会按照想要的顺序（这真的很好）但是它也必须读取表（不太好）获得所有其他想要的列。所以，优化器认为既然要读取表，为什么不扫描它并进行文件排序呢？您可以通过尝试进行测试：

```
SELECT comment_id FROM comments  ORDER BY comment_id ; 
```

它将使用索引并且不进行文件排序，因为查询只需要存储在索引中的值。

* * *

如果您想在 MyiSAM 中实现类似（与 InnoDB）的行为，您可以尝试在其上创建索引`(comment_id, comment_content, comment_author, comment_author_url)`，然后尝试查询。所有需要的值都可以在索引上找到并且顺序正确，因此不会执行文件排序。

附加索引当然需要几乎与表一样多的磁盘空间。

* * *

^(**1**)：文件排序并不总是坏的，这并不意味着文件保存在磁盘上。如果数据的大小很小，则在内存中执行。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-12T09:12:01.883

任何时候无法从索引执行排序，它都是文件排序。

这里奇怪的是，您应该在该字段上有索引，因为它是主键（并且主键列被隐式索引），在测试数据库上进行测试我只是注意到 MySQL 在您执行 a 时使用 FileSort `SELECT *`，这是一个没有意义的行为（我知道），但如果你以这种方式重写你的查询：

```
SELECT comment_id, comment_content, comment_author, comment_author_url 
FROM comments  
ORDER BY comment_id 
```

它将正确使用索引。也许可能是mysql的一个错误......

# php - 从谷歌图片获取结果时如何获取超过 20 张图片？

> ID：11920959
> 
> 赞同：-1
> 
> 时间：2012-08-12T08:52:39.337
> 
> 标签：php, curl

下面的脚本从 Google 获取图片，它只获取 $page 变量中指定的页面的 20 张图片。

我不知道为什么它会得到正好 20 个结果，以及如何将这个值更改为更大，例如显示 100 个第一张图像

```
<?php

// Image sizes
define ('GIS_LARGE', 'l');
define ('GIS_MEDIUM', 'm');
define ('GIS_ICON', 'i');
define ('GIS_ANY', '');

// Image types
define ('GIS_FACE', 'face');
define ('GIS_PHOTO', 'photo');
define ('GIS_CLIPART', 'clipart');
define ('GIS_LINEART', 'lineart');

function get_data($url)
{
$ch = curl_init();
$timeout = 5;
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
$data = curl_exec($ch);
curl_close($ch);
return $data;
}

function googleImageSearch ($query, $page = 1, $size = GIS_ANY, $type = GIS_ANY)
{

$retVal = array();

// Get the search results page

$response = get_data("http://images.google.com/images?hl=en&q=" . urlencode ($query) . '&imgsz=' . $size . '&imgtype=' . $type . '&start=' . (($page - 1) * 21));

// Extract the image information. This is found inside of a javascript call to setResults
preg_match('/\<table class=\"images_table\"(.*?)\>(.*?)\<\/table\>/is', $response, $match);

if (isset($match[2])) {

    // Grab all the arrays
    preg_match_all('/\<td(.*?)\>(.*?)\<\/td\>/', $match[2], $m);

    foreach ($m[2] as $item) {

        // List of expressions used to grab all our info
        $info = array(
            'resultLink' => '\<a href=\"(.*?)\"',
            'source' => 'imgurl=(.*?)&amp;',
            'title' => '\<br\/\>(.*?)\<br\/\>([\d]+)',
            'width' => '([\d]+) &times;',
            'height' => '&times; ([\d]+)',
            'type' => '&nbsp;-([\w]+)',
            'size' => ' - ([\d]+)',
            'thumbsrc' => 'src="(.*?)"',
            'thumbwidth' => 'width="([\d]+)"',
            'thumbheight' => 'height="([\d]+)"',
            'domain' => '\<cite title="(.*?)"\>'
        );

        $t = new stdClass;
        $t->thumb = new stdClass;
        foreach ($info as $prop => $expr) {
            if (preg_match('/' . $expr . '/is', $item, $m)) {
                $value = 'title' == $prop ? str_replace(array('<b>', '</b>'), '', $m[1]) : $m[1];

                // Thumb properties go under the thumb object
                if (0 === strpos($prop, 'thumb')) {
                    $prop = str_replace('thumb', '', $prop);
                    $t->thumb->$prop = $value;
                } else {
                    $t->$prop = $value;
                }

                // Nicey up the google images result url
                if ('resultLink' == 'resultLink') {
                    $t->resultLink = 'http://images.google.com' . $t->resultLink;
                }

            }
        }

        $retVal[] = $t;

    }

}

return $retVal;

} 
```

告诉脚本获取 20 张图像的代码行在哪里？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:32:16.797

好吧，你不能。该脚本正在从标准版本的 Google 图片中获取结果，并且它无法更改每页的结果。您唯一能做的就是请求五次以获得总共 100 张图像。

**更新**：要不断更新附加图像，只需使用“+”运算符。喜欢，

```
$image = array();

for( $i = 1; $i <= 5; $i++ )
     $image += googleImageSearch ($query, $page = 1, $size = GIS_ANY, $type = GIS_ANY); 
```

请注意，如果您不巧妙地隐藏您的请求，或者 google 怀疑自动请求，您很可能会遇到此页面。

![在此处输入图像描述](../Images/461338edfb1e0dee623c56b9ebd7c478.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T09:45:47.893

您应该使用谷歌 API。

[https://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview)

正如@shubham 所提到的，当谷歌检查机器人时，你肯定会在这个页面上结束。

# javascript - 通过 Javascript 中的 window.postmessage 访问时如何使用授权？

> ID：11920960
> 
> 赞同：0
> 
> 时间：2012-08-12T08:52:40.250
> 
> 标签：javascript, ajax, postmessage

似乎 window.postmessage 不支持使用用户名和密码进行授权。（[见](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)）

如何在 XMLHTTPRequest().open() 方法等 postmessage 中进行授权。（[请参阅](http://www.w3.org/TR/XMLHttpRequest/#the-open-method)）

谢谢。

# c++ - 搜索基于 3D fft 的卷积库

> ID：11920961
> 
> 赞同：3
> 
> 时间：2012-08-12T08:52:47.667
> 
> 标签：c++, fft, fftw, convolution, 2d-3d-conversion

我有一个大的 3D 矩阵和一个小的 3D 矩阵，我想使用基于 3D fft 的卷积在较大的矩阵中找到我的小 3D 矩阵的最佳匹配。你有任何 C++ 代码可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T09:15:12.317

Stackoverflow 不是一个可以请求代码然后由我们完成的社区，但我们可以帮助您找到必要的资源和信息，以便您自己这样做（通常是关于如何使用库的问题和特定主题的帮助没问题）。

让我们来回答您的问题：您已经提到要使用 FFT，这是迄今为止最好的方法 - 一个合适的库是[FFTW](http://www.fftw.org/ "FFTW 库")，所以请看一下它并牢记以下几点：

*   为了提高性能，尝试填充到两个的幂，这将大大加快这个过程！
*   使用真正的 FFT 而不是复杂的也将简化和加速这一点。
*   通常单精度应该足以达到预期的结果。

# django - Django - 在第三方应用程序上使用验证码

> ID：11920963
> 
> 赞同：0
> 
> 时间：2012-08-12T08:53:31.720
> 
> 标签：django

我的 Django 网站容易受到垃圾邮件的攻击，所以我想加入验证码保护。问题是很多组件来自第三方来源，不包括验证码验证。虽然我可以修改他们的观点，但这会影响代码的可移植性/可升级性，所以我宁愿不这样做。我只能修改他们的模板。

我有解决方案，但有点乱，在我开始实施之前，我想看看是否有人有更好的解决方案。

我的解决方案如下：

1) 将网站上的所有帖子表单重定向到一个“验证码反弹”应用程序，该应用程序将以编程方式重建他们的帖子请求，检查验证码是否正确，将验证令牌添加到帖子，然后重定向回原始帖子目标。

2) 实现一种新型的中间件，它将检查所有的 post 请求。如果发布请求未针对“验证码退回”网址，则中间件将返回错误，除非验证令牌存在。

正如我之前所说，这似乎是不必要的混乱。有没有人有更好的主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T09:27:29.487

这取决于应用程序消息，但：

*   您通常可以将他们的视图包装到您的视图中并添加额外的处理
*   您可以扩展他们的表单以添加您的验证码字段
*   您可以添加额外的 javascript 检查模板标签，然后将其添加到您的模板中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:06:07.430

好的，我想通了。这应该可以通过使用中间件来实现。只需给它一个视图列表，它应该检查验证码的正确性。在错误响应的情况下，它会从请求中删除帖子和/或激活某种错误变量。简单得多。

# xcode - 在 Interface Builder 中更改文本后防止 UIButton 自动调整大小

> ID：11920964
> 
> 赞同：0
> 
> 时间：2012-08-12T08:53:37.827
> 
> 标签：xcode, button, text, interface, builder

如果我稍微修改了在 Interface Builder 中添加到视图中的 UIButton 的标题文本，它会自动调整按钮的大小。如果我只做一个小改动却不得不不断地调整我的按钮大小，这真的很烦人。有谁知道如何阻止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:04:03.393

您可以通过以编程方式为按钮分配一个固定大小的框架来避免这种情况。确保您的按钮已经从 XIB/NIB 文件中创建（即它不是 nil，并且 NIB/XIB 不会再触摸它）在代码中的某个位置，然后添加以下行：

```
myButton.frame = CGRectMake(x, y, width, height); 
```

其中 x、y、宽度和高度分别是按钮的所需/预期位置和大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T09:07:16.210

我会回答我自己的问题。而不是直接编辑标签内的文本，而是通过更改属性检查器内的标题字段中的文本来完成（选择 UIBUtton 标签，然后打开检查器选项卡，它是右侧面板右侧的第三个图标IB)。

# stored-procedures - Oracle Ref 游标和 out 参数

> ID：11920966
> 
> 赞同：0
> 
> 时间：2012-08-12T08:53:50.283
> 
> 标签：stored-procedures, plsql, oracle11g, ref-cursor

我需要一个 IN OUT 参数以及一个引用游标作为存储过程的返回值。目前我正在关注。

```
create table dept
( dept_id number,
  name varchar2(40),
  location varchar2(200)
);

CREATE OR REPLACE PACKAGE HR.SP_PACKAGE AS 

  TYPE dept_type IS REF CURSOR RETURN HR.dept%ROWTYPE;

END SP_PACKAGE;

CREATE OR REPLACE PROCEDURE HR.MIXED_IN_INOUT_REF_PARAM 
(
  P_ID IN NUMBER  
, P_NAME_TO_LOCATION IN OUT VARCHAR2  
, P_RCURSOR OUT SP_PACKAGE.dept_type
) AS 
BEGIN
  SELECT name INTO P_NAME_TO_LOCATION FROM HR.dept WHERE dept_id = p_id AND name =  P_NAME_TO_LOCATION;
  OPEN P_RCURSOR FOR
      select *
      from HR.dept;
END MIXED_IN_INOUT_REF_PARAM; 
```

即使编译成功，我在运行时也会遇到一些错误。

```
ORA-06550: line 4, column 17:
PLS-00201: identifier 'CURSOR' must be declared
ORA-06550: line 4, column 13:
PL/SQL: Item ignored
ORA-06550: line 12, column 18:
PLS-00320: the declaration of the type of this expression is incomplete or malformed
ORA-06550: line 9, column 3:
PL/SQL: Statement ignored
ORA-06550: line 21, column 17:
PLS-00320: the declaration of the type of this expression is incomplete or malformed
ORA-06550: line 21, column 3:
PL/SQL: Statement ignored 
```

我正在使用 Sql 开发人员。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T14:30:35.430

您的 proc 没有问题`chamibuddhika`，我认为您的调用方式有问题。我尝试创建相同的程序，它工作正常。尝试运行您的程序，如下所示：

```
declare
v_temp varchar2(200):='ACCOUNTING';
rec SP_PACKAGE.dept_type;
v_rec rec%ROWTYPE;

begin
MIXED_IN_INOUT_REF_PARAM(10,v_temp,rec);

LOOP
FETCH rec INTO v_rec;
EXIT WHEN rec%NOTFOUND;
 dbms_output.put_line(v_rec.name);

END LOOP;

end; 
```

**输出**

```
 ACCOUNTING
 RESEARCH
 SALES
 OPERATIONS 
```

你的 proc 有一个问题，当 proc 内的查询没有返回任何内容时，它会给你`no_data_found`异常。所以你需要在你的 proc 中处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T09:06:22.727

像这样更改删除返回

```
CREATE OR REPLACE PACKAGE HR.SP_PACKAGE AS 

  TYPE dept_type IS REF CURSOR ;

END SP_PACKAGE; 
```

你可以让它像这样更有活力

```
open p_cursor FOR  'SELECT *  FROM DEPT where ' ||  V_WHERE; 
```

# php - 表单文件字段值未发布到 $_POST

> ID：11920968
> 
> 赞同：1
> 
> 时间：2012-08-12T08:54:03.687
> 
> 标签：php, forms, file-upload

我正在使用表单进行一些测试并遇到了障碍，我有一个非常简单的测试脚本可以工作，但问题是我的表单中的 FILE 字段由于某种原因没有提交到 $_POST 数组，如果我取出 encode="multipart/form-data" 它确实如此，否则我只会得到其他字段。这是脚本：

```
<?PHP
print_r($_POST);
echo"<br>";
print_r($_FILES);

$name = $_FILES["img1"]["name"];
$tmp_name = $_FILES["img1"]["tmp_name"];
$uploads_dir = "uploads";
echo "<br>TEMP NAME:</b>";
echo $tmp_name;
move_uploaded_file($tmp_name, "$uploads_dir/$name");
?>

<html>
<body>
<br><br>
-------------------------
<form name="test" id="test" action="index.php" method="post" enctype="multipart/form-data">

<label>Name</label>
<input type="text" name="title" id="title">
<br>
<label>File</label>
<input type="file" name="img1" id="img1" size="40">
<br>
<input type="submit" value="submit">
</form> 
```

输出是：

```
POST ARRAY: Array ( [title] => some title )
FIELS ARRAY: Array ( [img1] => Array ( [name] => chicken.jpg [type] => image/jpeg [tmp_name] => /tmp/phpcrBLw9 [error] => 0 [size] => 30940 ) )
TEMP NAME:/tmp/phpcrBLw9 
```

如您所见，POST 只有标题，而不是文件名，出于编程原因，我需要它两者兼有，有没有办法做到这一点而不必作弊/隐藏字段或手动编辑值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T09:01:29.897

您将无法在 $_POST 中看到 $_FILES。它们是不同的超全局变量，如果您`vardump($_FILES);`会看到它存储了有关上传文件的所有信息，例如大小、tmp 名称等。这就是 PHP 的构建方式，您唯一能做的就是使用

> $_FILES['img1']['name']

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T08:57:34.403

您可以在此处访问上传文件的名称：

```
$_FILES["img1"]["name"] 
```

# scala - 带有 val 的通配符数组上的 Scala 编译器错误

> ID：11920970
> 
> 赞同：1
> 
> 时间：2012-08-12T08:54:14.200
> 
> 标签：scala

当使用 val 声明构造函数参数时，以下代码将失败

作品：

```
class Poso(array : Array[_ <: Any])
object Test {
  new Poso(classOf[Retention].getEnumConstants())
} 
```

不起作用：

```
class Poso(val array : Array[_ <: Any])
object Test {
  new Poso(classOf[Retention].getEnumConstants())
} 
```

编译器给出错误：

Scala 编译器中的错误：类型不匹配；找到：java.lang.Object 需要：array[java.lang.Object]

无法给出行号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:16:30.650

看起来像 Scala 编译器中的一个错误（它死于异常）。您可能应该将其报告给 Scala 开发人员。

使用`AnyRef`而不是`Any`为我修复它：

```
class Poso(val array : Array[_ <: AnyRef])
object Test {
  new Poso(classOf[java.lang.annotation.Retention].getEnumConstants())
} 
```

# python - 当我们使用逻辑运算符返回时，Python 会返回什么？

> ID：11920972
> 
> 赞同：2
> 
> 时间：2012-08-12T08:54:37.687
> 
> 标签：python, boolean, boolean-logic

我正在阅读别人的代码，他有这样的东西：

```
return val1 and val2 
```

我在 Python 解释器中尝试了这个，它给了我 AND 上的后一个值，而 OR 给了我之前的值。

所以我的问题是该声明中到底发生了什么？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-12T09:02:56.653

当一个表达式使用`and`or`or`短路时，它可以根据第一个操作数确定表达式不会计算为 True 或 False，并返回最后一个计算值：

```
>>> 0 and 'string'
0
>>> 1 and 'string'
'string'
>>> 'string' or 10
'string'
>>> '' or 10
10 
```

这种“副作用”经常用在 python 代码中。请注意，它`not` *确实*返回一个布尔值。有关详细信息，请参阅[有关布尔运算符的 python 文档](http://docs.python.org/reference/expressions.html#boolean-operations)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T08:57:10.880

如果第一个值为真，则 AND 语句等于第二个值。否则它等于第一个值。

如果 OR 语句为真，则等于第一个值，否则等于第二个值。

请注意，在 Python 中，可以将对象评估为布尔值。所以`"bla" and False`将评估为第二个值，因为第一个值为真（它是一个非空字符串和`bool("string") = True`）。

这就是在 Python（和多种其他编程语言）中评估布尔语句的方式。例如：

*   `True and False`= `False`（等于第二个值，因为第一个值为真）
*   `False and True`= `False`（等于第一个值，因为第一个值不正确）
*   `True and True`= `True`（等于第二个值，因为第一个值为真）
*   `True or False`= `True`（等于第一个值，因为它是真的）
*   `False or True`= `True`（等于第二个值）

# mysql - mysqli_fetch_array ：从多个表中选择时未定义的索引

> ID：11920980
> 
> 赞同：0
> 
> 时间：2012-08-12T08:56:14.717
> 
> 标签：mysql

mySQL 在创建 mySQLi 之前运行良好：/

我以前用过 mysql_fetch_array() 。但是，当我使用 mysqli_fetch_array() {Notice "i"} 时，从多个表中选择时从 ASSOCIATIVE 数组中获取结果时出现问题。那是，

```
$query = "SELECT t1.id, t2.id FROM t1, t2 WHERE ...";
$result = mysqli_query($conn,$query);
//if num of rows check...
while($row = mysqli_fetch_array($result))
{ $first_id = $row['t1.id']; $second_id = $row['t2.id']; } 
```

而且，我会得到一个错误：未定义的索引：t1.id（或 t2.id）。

如果我只从 t1 或 t2 （不是两者）中选择，或者我说的是 $row['id']; ，则查询工作正常。而不是 $row['t1.id']; 但这**无助于从两个具有相同名称的表中获取不同的字段**

请帮忙。

谢谢！=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:58:52.470

您的代码在分隔 t1.id 和 t2.id 时遇到问题，结果会将它们都作为“id”返回。

`AS`尝试在查询中使用重命名/别名列；

```
$query = "SELECT t1.id AS t1id, t2.id AS t2id FROM t1, t2 WHERE ...";
$result = mysqli_query($conn,$query);
//if num of rows check...
while($row = mysqli_fetch_array($result))
{ $first_id = $row['t1id']; $second_id = $row['t2id']; } 
```

# jquery - 如何在浮动页面上加载搜索结果

> ID：11920989
> 
> 赞同：-2
> 
> 时间：2012-08-12T08:57:55.293
> 
> 标签：jquery, search

我想创建一个元搜索引擎，我想在浮动或滑动页面上显示搜索结果。我是一个新手，你能告诉我我需要做的每一件事吗？目前我只有这个代码。

```
<form method="get" action="http://www.google.com/search">
<input type="text" name="q" size="30" x-webkit-speech />
<input type="submit" value="Google Search" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T09:22:24.377

我认为您需要一个 PHP-AJAX 搜索解决方案。

您可以尝试**[使用 Ajax 构建实时搜索](http://www.finalwebsites.com/forums/topic/using-ajax-to-build-a-live-search)**（***[这](http://www.finalwebsites.com/demos/jquery-forum-search/)***是一个演示）。

或者您可以从**[14 个 jQuery Live Search 插件](http://www.jquery4u.com/plugins/14-jquery-live-search-plugins/)**中选择一个。

希望这可以帮助。

*注意：请*务必自己做一点研究，并在 stackoverflow 中寻求帮助。您也可以浏览常见问题解答部分。另请访问此页面[https://blog.stackoverflow.com/2010/10/asking-better-questions/](https://blog.stackoverflow.com/2010/10/asking-better-questions/)

# java - 在复合结构上使用解释器模式

> ID：11920990
> 
> 赞同：10
> 
> 时间：2012-08-12T08:58:04.657
> 
> 标签：java, design-patterns, composite, interpreter-pattern

我被要求使用*Composite*、*Recursive Descendent Parser*和*Interpreter*制作表达式评估器。

这是**语法**：

```
<cond> → <termb> [OR <termb>]*
<termb>→&lt;factb>[AND <factb>]*
<factb>→&lt;expr> RELOP <expr> | NOT <factb> | OPAR <cond> CPAR
<expr> → [PLUS | MINUS] <term> [(PLUS <term>) | (MINUS <term>)]*
<term> → <termp> [(MULT <termp>) | (DIV <termp>) | (REM <termp>)]*
<termp> → <fact> [POWER <fact>]*
<fact> → ID | NUM | OPAR1 <expr> CPAR1
----TERMINALS----
ID → ("A" | ... | "Z" | "a" | ...| "z") [("A"| ... | "Z" | "a" | ...| "z" | "0" | ... | "9")]*
NUM → ("0" | ... | "9") [("0" | ... | "9")]*
OPAR → "("
CPAR → ")"
OPAR1 → "["
CPAR1 → "]"
RELOP → EQ | NEQ | GT | GE | LT | LE
EQ → "= ="
NEQ → "!="
GT → ">"
GE → ">="
LT → "<"
LE → "<="
POWER → "^"
DIV → "/"
REM → "%"
MULT → "*"
MINUS → "−"
PLUS → "+"
AND → “and” or “&amp;&”
OR → “or” or “||”
NOT → “not” or “!” 
```

任务是：

> 该项目的目标是基于 Composite、Recursive Builder 和 Interpreter，获得条件表达式，进行语法分析并构建其复合树。从树开始，您必须根据包含内部变量值的外部上下文（从属性文件中读取）来评估条件的结果

现在，我注意到的第一件事是*Interpreter*使用了*Composite结构，因此使用**evaluate(:Context)*方法扩展我的*Composite*结构似乎是个好主意。

 *我四处询问，但有人告诉我这不是完成任务的方法。似乎我已经构建了*解释器*树，从*复合*树开始（这对我来说是非常荒谬的，因为我已经有了一棵树可以使用！）。

所以我使用*Composite* + *Recursive Builder*构建了我的树，它识别输入并构建树而没有任何问题。

但问题是：如何将*解释器*应用于我的结构？

这是我的类图（有些是意大利语，但很容易理解）

![Composite+Builder类图](../Images/6c9553233bd011da387eadbfeb1e628b.png)

如果我做对了，*Interpreter*会为每个语法规则使用一个类，所以我必须创建一个*cond*类，然后是一个*termb*，等等。

但是我如何将它们链接到我的复合材料？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T17:00:41.773

不知道为什么你被告知不要使用相同的树结构。我想我会在我的表达式接口中添加一个 evaluate() 方法。对于我，这说得通。表达式应该知道如何评估自己。

我会说您当前的表达式接口暴露了太多（例如操作数）。作为表达式的客户，我只需要 1) 调用它并 2) 读取结果，我猜也许 3) 让它打印。实际上，我更喜欢使用 toString() 而不是直接打印。

您可能已经注意到，但并非所有表达式都采用 2 个操作数（例如 NOT 或 NEGATE）。这已经与您的界面产生了某种差异。我会将其简化为：

```
 public interface Expression {
   int evaluate();
 } 
```

然后，您的每个操作和终端都知道如何评估自己（并将自己转换为字符串）。

所以我可以有具体的操作，比如：

```
 public class Terminal implements Expression {
   private final int value;

   public Terminal(int value) { this.value = value; }

   public int evaluate() { return value; }

   public String toString() { return String.valueOf(value); }
 }

 public class Add implements Expression {
   private final Expression left;
   private final Expression right;

   public Add(Expression left, Expression right) {
     this.left = left;
     this.right = right;
   }

   public String toString() {
     return left.toString() + " + " + right.toString();
   }

   // leave the rest for you
 } 
```

现在我可以很容易地构建树

```
Expression expr = new Add(new Terminal(1), new Subtract(new Terminal(2), new Terminal(3)));

int result = expr.evaluate();
System.out.print(expr.toString() + " = " + result); 
```

而且我什至不需要直接访问单个操作数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T12:04:06.673

如果我正确理解您的问题，我会说每个具体类都应该由您的主要复合结构的子类组成。

如果 Expression 是您的主要复合材料，那么：

表达式：项 表达式：OperandTerm

条件：Term BinOperand 表达式条件：UnaryOperand 表达式

术语：诠释 | 脚 | ...

. . .

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T10:36:48.227

[解释器](http://en.wikipedia.org/wiki/Interpreter_pattern)为您提供了一种基于终端而不是终端对象定义语言表达式的方法。解释器本身就是一种复合模式，所以我认为它已经被应用了。

也许您不需要为每个 notTerminal 和终端元素创建一个类，在 NonTerminal/Terminal 类中使用 (operatorType, expressionType) 之类的属性来与您的语法符号不同。

给定和使用您的语法生成的表达式，如 [ A = 0 ]，由解释器的模式类形成的对象树将如下所示（请原谅质量差和 UML sintax 错误，但我现在没有合适的 UML 编辑器）：

![在此处输入图像描述](../Images/7da9332f653d948d64aa24fc568c8a5a.png)

此对象树应由表达式分析器构建。一旦你有了这棵树，使用递归下降解析器遍历这棵树，评估每个树节点。

因此，解析器对表达式进行评估，解释器为您提供一个数据结构来表示您的语法表达式。

希望这有帮助。*

# java - 跨职能管理事务

> ID：11920994
> 
> 赞同：1
> 
> 时间：2012-08-12T08:58:51.413
> 
> 标签：java, transactions

我们有一个 java 应用程序，在此之前，这一切都是在多线程应用程序的 run 函数中完成的。现在我们将一些代码移到一个单独的函数中。我们必须将一些变量设置为全局变量，包括连接，以便它可以在函数中使用。下面是函数的运行和调用的骨架。现在的问题是那些在 if 语句中处理的查询并且它们遇到问题然后整个事情进入捕获和回滚。现在的问题是那些在 processOne 函数中调用的函数，如果它们遇到任何问题，则会捕获在 if else 执行之后运行的一般查询。有什么方法可以停止或将其链接到 processOne 错误？我们的想法是使用全局变量，因为尝试了其中的 dbConn.rollback 也确实有效。

```
public void run() {
 try{
  if(){
    //process here
  }
  else{
    // call function processOne
  }
  //some other general queries
  dbconn.commit();
 }

 catch (SQLException ex){ 

  try{    
  dbconn.rollback();  
  } 
  catch (Exception rollback){    

  }
 }
}

void processOne(){
  try{
   //process queries here
  catch (SQLException ex){                         
    try{    
     dbconn.rollback();  
    } 
    catch (Exception rollback){    

    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T09:05:50.333

您需要做的就是从`processOne`函数中抛出一个异常，然后在“运行”函数中捕获它并回滚事务：

```
public void run() {
 try{
  if(){
    //process here
  }
  else{
    // call function processOne
  }
  //some other general queries
  dbconn.commit();
 }

 catch (SQLException ex){ 

  try{    
  dbconn.rollback();  
  } 
  catch (Exception rollback){    

  }
 }

  catch (Exception ex){ 

  try{    
  dbconn.rollback();  
  } 
  catch (Exception rollback){    

  }
 }
}

void processOne() throws Exception{

   //process queries here

  }
} 
```

这样整个过程就回滚了。

# c# - 将数据分成块，然后确保线程安全

> ID：11920996
> 
> 赞同：0
> 
> 时间：2012-08-12T08:58:57.260
> 
> 标签：c#, multithreading, task-parallel-library, plinq

我正在编写一些基本上从套接字接收数据、执行反序列化然后传递给我的应用程序的代码。反序列化的对象可以按它们的 id 分组（在反序列化过程中生成 id）。

为了提高我的应用程序的性能，我想使用 C# 4.0 附带的新并行功能。我唯一的限制是 2 个线程无法访问具有相同 ID 的对象。现在我知道我可以对将放置在对象内部的同步对象执行 lock()，但我想避免这些锁（这里的性能是一个问题）。

我想过的设计：

1.  创建某种分区器，将按 ID 拆分数据（这将确保我将获得的每个缓冲区都将始终具有相同的对象 ID 组）。
2.  使用 PLINQ 的 TPL 分配线程

有人可以建议我一些这样做的来源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:34:24.690

我建议`PLINQ`在为多个处理器或内核开发时。

> PLINQ 是一个查询执行引擎，它接受任何 LINQ-to-Objects 或 LINQ-to-XML 查询，并在可用时自动利用多个处理器或内核执行。编程模型的变化很小，这意味着您无需成为并发专家即可使用它。事实上，线程和锁甚至不会出现，除非你真的想深入了解它是如何工作的。PLINQ 是 Parallel FX 的关键组件，Parallel FX 是 Microsoft® .NE​​T Framework 中的下一代并发支持。

[这](http://msdn.microsoft.com/en-us/magazine/cc163329.aspx)包括：

*   从 LINQ 到 PLINQ
*   PLINQ 编程模型
*   处理查询输出
*   并发异常
*   在输出结果中排序
*   副作用
*   让 PLINQ 工作

[并行 LINQ (PLINQ)](http://msdn.microsoft.com/en-us/library/dd460688.aspx)

# android - 桌面模拟器中的安卓相机

> ID：11920997
> 
> 赞同：0
> 
> 时间：2012-08-12T08:58:59.927
> 
> 标签：android, camera

> **可能重复：**
> [如何在 android 模拟器中使用网络摄像头捕捉实时图像？](https://stackoverflow.com/questions/1276450/how-to-use-web-camera-in-android-emulator-to-capture-a-live-image)

是否可以通过网络摄像头使用android sdk模拟器的摄像头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T10:52:29.367

这个问题问同样的问题：[Android Eclipse 模拟器上的相机：](https://stackoverflow.com/questions/3284583/camera-on-android-eclipse-emulator)

那里的答案表明，自 Android 4.0 起，模拟器支持将您的网络摄像头用作模拟器的摄像头。SDK 工具修订版 14。

# javascript - Google AdSense：将背景颜色更改为透明

> ID：11920998
> 
> 赞同：0
> 
> 时间：2012-08-12T08:59:13.203
> 
> 标签：javascript, css, adsense

我确信这是可能的。我知道一些网站已经做了同样的事情：

示例：[在导管上搜索](http://search.conduit.com)

输入要搜索的内容，例如“Hosting”或“Rayban”，然后查看前三个结果。它们是 AdSense 块，但具有透明背景！？

怎么会这样 ？

我在我的网站上添加了一个 Google 自定义搜索元素。我已经修改了 CSE 的外观，但我无法修改 ads 元素的外观，因为它位于 iframe 中。

有人知道如何设置广告 iframe 的样式吗？我想输入背景颜色并更改字体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-29T23:12:33.780

最后一个零`background-color`使颜色的不透明度透明：

```
ins {
    color: #000 !important;
    background-color: rgba(119, 25, 0, 0) !important;
} 
```