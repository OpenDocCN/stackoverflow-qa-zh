# StackOverflow 问答 11747000-11747999

# powershell - Powershell - 解析 PSDrive 别名之外的路径

> ID：11747003
> 
> 赞同：4
> 
> 时间：2012-07-31T18:52:46.193
> 
> 标签：powershell

我有一个很长的路径名，为此我创建了一个 PS-Drive

```
new-psdrive -name blah -psprovider filesystem -root c:/foo/bar/bizz/bazz/grozz/grizz/blah/blow 
```

我需要将一个文件传递给一个外部工具，该工具无法解析跨 psdrive 路径的路径。如何使用完整路径获取文件的路径（例如直接在 blah 目录下）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:26:59.433

这有帮助吗？

```
(Get-Item "blah:\yourfile.ps1").FullName 
```

# c - realloc int 指针存在于结构中 [C]

> ID：11747005
> 
> 赞同：1
> 
> 时间：2012-07-31T18:52:48.867
> 
> 标签：c, structure, realloc

我想 malloc 一个存在于结构内的整数指针。

如果将来我需要扩展数组，我会使用 realloc。

像这样的东西：

```
typedef struct {
   int *temp,count
}foo;

main()
{
    foo *fake = (foo*)malloc(1*sizeof(foo));
    fake.count = 0;

    ++(fake.count);
    fake.temp = (int*)malloc((fake.count)*sizeof(int));

    /* I do something */

    /*now i want to realloc "temp" to ++(fake.count) */ 
```

这种做法正确吗？

```
 ++(fake.count);
    fake.temp = (int*)realloc(fake.temp,(fake.count)*sizeof(int)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T18:56:47.350

原则上，是的。

但是，您应该确保您的代码在 中可能存在的错误中幸存下来`realloc`，如下所示：

```
int * p = realloc(fake->temp, (fake->count + 1) * sizeof(int));
if (p) { fake->temp = p; ++fake->count; }
else   { /* error! But fake was untouched. */ } 
```

另外，你应该说`int main(void)`你的主函数声明。最后，您不应该转换`malloc`or的结果`realloc`，因为 a`void*`可以隐式转换为任何其他对象指针。

还有一个：你的编码风格真的很难让别人阅读。我会这样写结构定义：

```
typedef struct foo_
{
    int * temp;
    int   count;
} foo; 
```

甚至还有一个：你需要`fake`动态分配吗？如果没有，自动变量`foo fake;`可能更容易维护。无论如何，如果您确实想动态分配它，请不要强制转换并且不要重复类型，如下所示：

```
foo * fake = malloc(sizeof *fake);
// or:       calloc(1, sizeof *fake);      // this will zero out the memory 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T18:56:52.587

1.  您不需要从C 程序中`malloc`或`realloc`在 C 程序中强制转换返回值。
2.  不要直接将`realloc`调用结果分配给同一个变量。如果失败，您将泄漏原始分配。改为执行以下操作：

    ```
    void *err = realloc(pointer, newSize);
    if (err != NULL)
    {
        pointer = err;
    } 
    ```

3.  Nitpick - 乘以 1 看起来很奇怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T19:30:12.090

很难说在不知道是什么的情况下这样做是否**可以**。但是你可以从这个开始......`realloc``I do something`

```
#include <stdio.h>
#include <stdlib.h>

typedef struct {
 int *temp,count;
 }foo;

extern char etext, edata, end;
int main()
{
   printf("Heap before first malloc %p\n", sbrk(0));

   foo *fake = malloc(1*sizeof(foo));

   printf("heap after first malloc %p\n", sbrk(0));

   fake->count = 0;
   ++(fake->count);
   fake->temp = malloc((fake->count)*sizeof(int));
   printf("heap after second malloc %p\n", sbrk(0));

   fake->count += 2;
   fake->temp = realloc(fake->temp, (fake->count) * sizeof(int));
   printf("count %d\n", fake->count);

   printf("heap after realloc %p\n", sbrk(0));
   printf("program text segment(etext)      %10p\n", &etext);
   printf("initialized data segment(edata)  %10p\n", &edata);
   printf("uninitialized data segment (end) %10p\n", &end);

   return 0;
} 
```

这也将输出您的堆地址。

```
Heap before first malloc 0x239b000
heap after first malloc 0x23bc000
heap after second malloc 0x23bc000
count 3
heap after realloc 0x23bc000
program text segment(etext)        0x400816
initialized data segment(edata)    0x600bc4
uninitialized data segment (end)   0x600bd8 
```

1.  你不需要为`malloc()`.

2.  考虑`calloc()`清除你的记忆。在重新分配时，您可能会得到错误初始化的内存块。（就像最近释放的块）。

3.  `realloc()`在使用它之前总是检查它的返回值。那么失败的机会`realloc()`是相当高的`malloc()`。

# javascript - 我怎样才能让我的内表显示？

> ID：11747006
> 
> 赞同：1
> 
> 时间：2012-07-31T18:52:55.623
> 
> 标签：javascript, jquery

我有一个这样的表，所有行的结构都像第一个数据行

```
<table id='table1'>
   <thead>
       <tr>...table headers...</tr>
  </thead>
   <tr>
       <td>xyz</td>
       <td>
           <table><tr></tr></table>
       </td>
   </tr>

   <tr></tr>
   <tr></tr>
   <tr></tr>
   ...
   ...
</table> 
```

桌子里面的所有东西都有一些文字和图像。

最初，我使用

```
$('#table1').find("tr:gt(0)").hide(); 
```

隐藏除标题之外的所有内容

现在我想选择从第 1 行到第 15 行并取消隐藏它们。从另一篇文章中，我知道我可以使用它 `$('#table1').children('tr').slice(1,15)`来查找这些行，但是当我想使用它们显示它们时

```
$('#table1').children('tr').slice(1,15).show(1000); 
```

所有那些里面的表格仍然没有显示，但显示了文本“xyz”我在这里遗漏了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:56:48.820

`tr`不是表`.children`，而是后代，因为它们位于隐式创建的`tbody`元素内。试试`.children()`_`tbody`

[http://jsfiddle.net/utmXa/4/](http://jsfiddle.net/utmXa/4/)

```
$('#table1 > tbody').children().hide();
$('#table1 > tbody').children().slice(1, 15).show(1000); 
```

# ruby - 为什么 cucumber with aruba 看不到我的程序的输出？

> ID：11747007
> 
> 赞同：0
> 
> 时间：2012-07-31T18:52:56.520
> 
> 标签：ruby, cucumber, aruba

这两个示例都将转到 STDOUT，但 cucumber 只看到第一个。第二种情况失败：

```
Then the stdout should contain "test"  # aruba-0.4.11/lib/aruba/cucumber.rb:82
  expected "" to include "test" (RSpec::Expectations::ExpectationNotMetError)
  features/test.feature:13:in `Then the output should contain "test"' 
```

特点：

```
Scenario: echo test
  Given a blank slate
  When I run `echo "test"`
  The stdout should contain "test"

Scenario: puts test
  Given a blank slate
  When I start the program
  The stdout should contain "test" 
```

步骤定义：

```
When /^I start the program$/ do
  TestModule::Main.new.start
end 
```

编码：

```
module TestModule
  class Main
    def initialize
    end
    def start
      $stdout.puts "test"
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:18:09.493

我对 Aruba 不是很熟悉，但是快速查看它的[源代码](https://github.com/cucumber/aruba/blob/master/lib/aruba/api.rb)表明它针对 STDOUT（或任何输出）所做的断言*仅*适用于它自己启动的进程，而不是所有写入 STDOUT 的内容。在第二种情况下，您自己调用的代码不受 Aruba 的控制，因此不会跟踪它的输出。

如果您考虑一下，它实际上无法以任何其他方式工作 - 如果 Aruba 捕获所有 STDOUT 以进行断言，那么它还将包含 Cucumber 自己的测试输出......

看起来您正在尝试在不使用 Aruba 调用单独的 Ruby 进程的情况下在进程内测试程序。如果是这种情况，我建议修改程序以使其可以传递 STDOUT 替换，例如

```
def initialize(output=$stdout) 
```

然后当你启动代码时：

```
When /^I start the program$/ do
    TestModule::Main.new(@output).start
end 
```

你可以改变你的断言：

```
Then the stdout should contain "(.+)" do |string|
    @output.should include string
end 
```

# c - 当 TCP 序列号不是预期的到达时会发生什么？

> ID：11747016
> 
> 赞同：5
> 
> 时间：2012-07-31T18:53:51.527
> 
> 标签：c, tcp, libpcap, packet-capture

我正在编写一个使用 libpcap 捕获数据包并重新组装 TCP 流的程序。我的程序只是监视流量，因此我无法控制数据包的接收和传输。我的程序忽略所有非 TCP/IP 流量。

我从 ISN 计算下一个预期的序列号，然后是连续的 SEQ 编号。我进行了设置，以便每个 TCP 连接都由一个由源 IP、源端口、目标 IP 和目标端口组成的元组唯一标识。一切都很顺利，直到我收到一个序列号与我预期不同的数据包。我已经上传了屏幕截图来帮助说明我在[这里](http://imgur.com/a/oFpR8)描述的内容。

我的问题是： 1.“丢失”数据包中的数据在哪里？2\. SEQ 编号顺序如何从这种情况中恢复？3\. 我能做些什么来处理这些事件。

请记住; 但是，我不是在编写遵循 TCP 的程序。我正在编写一个程序，它被动地监视 TCP 流的网络流量并尝试将原始数据保存到磁盘，我对为什么会发生上述状态情况以及如何编程来处理它感到困惑。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-31T19:02:59.577

> “丢失”数据包中的数据在哪里？

*   它被某人丢弃了
*   它在途中[迷路](http://xkcd.com/461/)了（错误的绕行），稍后会到达

> SEQ 编号顺序如何从这种情况中恢复

接收方注意到该段乱序并且**没有将其发送到应用程序**，从而履行其合同：有序可靠字节流。现在，获得缺失部分的实际情况非常复杂，并且因堆栈而异。简而言之，堆栈等待丢失的部分到达。

*   接收器可以丢弃无序的段，也可以将它们排入重组队列
*   接收方可以等待丢失的段到达，也可以立即发送之前已经发送的 ACK。重复的 ACK 将提醒对等方有问题（查找[Fast Retransmit](http://en.wikipedia.org/wiki/Fast_retransmit)）
*   发送确认时，TCP 可以通知对等方*一些*分段成功到达 - 它们只是乱序（[SACK](https://www.rfc-editor.org/rfc/rfc2018)）

> 我能做些什么来处理这些事件

你不能做任何事情，因为你只是在监视。如果您还捕获了响应流量，您可能会更深入地了解实际发生的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:02:23.130

根据当前 TCP 连接的窗口大小，如果新数据包适合接收窗口（多数据包缓冲区），它将进入接收队列（并重新排序以按顺序交付给协议客户端）。

如果序列号大于当前窗口的最大值，则数据包被拒绝。

[另请参阅RFC 675](https://www.rfc-editor.org/rfc/rfc675)中的第 4.4.2 节（输入数据包处理程序）

# java - 错误：类型参数 在 Maven 安装期间无法确定 T

> ID：11747020
> 
> 赞同：10
> 
> 时间：2012-07-31T18:54:05.593
> 
> 标签：java, eclipse, maven, jdk1.6

当我尝试执行“mvn install”时，这个函数会抛出奇怪的错误

```
public <T> T get(final AN_ENUM key)
{
    return some_map.get(key);
} 
```

这是我得到错误的行

```
final int value = get(AN_ENUM.A_FIELD); 
```

这是maven中的错误：

```
XXX.java:[25,41] type parameters of <T>T cannot be determined; 
  no unique maximal instance exists for type variable T with 
  upper bounds int,java.lang.Object 
```

我已经知道如何“修复它”。我只需要在我的最后一个代码示例中更改为`int`，`Integer`错误就消失了。它告诉我，当我使用类型参数时，由于某种原因，maven 无法将 Integer 转换为 int。

**我的问题是..为什么？**

在 Eclipse 中，使用相同的 JDK，我能够运行我的应用程序而没有任何麻烦或警告。

*   JDK 1.6
*   Eclipse Indigo 服务版本 2
*   Maven 3.0.4

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T15:13:23.020

我有一个类似的问题，结果我试图返回一个“布尔”（原始）而不是“布尔”（对象）。由于您尝试将其设置为“int”（原始），因此最终会失败。

尝试将您的“int”更改为“Integer”，希望可以解决它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T22:26:23.767

在您的`pom.xml`中，将目标版本设置为至少 1.5：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.0.2</version>
    <configuration>
        <source>1.5</source>
        <target>1.5</target>
    </configuration>
</plugin> 
```

这样，Maven 将使用 JDK 1.5（或者您可以根据需要将其设置为 1.6）。

# ruby - 如何遍历此代码的所有可能组合？

> ID：11747028
> 
> 赞同：-2
> 
> 时间：2012-07-31T18:54:25.913
> 
> 标签：ruby

我需要能够遍历所有可能的 ICD10 代码（医疗程序）。代码长度为 7 个字符，第一位为 0-9，第二位为 0-9 或 BY 等。

我觉得这可以通过递归来完成，但我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:00:35.443

从最后一个字符，那些地方或任何地方开始。将所有可能性添加到数组中。

对于每个新列，将每个可能性添加到数组中的每个项目，并将所有这些添加到新数组中。

重复直到所有...

你可以制作一个枚举器形式 0 - y

# c# - EditorTemplate 和 DateTimeOffset 在 MVC4 中不起作用

> ID：11747035
> 
> 赞同：0
> 
> 时间：2012-07-31T18:54:42.130
> 
> 标签：c#, asp.net-mvc-4, mvc-editor-templates

我正在将 EditorTemplate 用于 DateTimeOffset 字段，该字段包含...

```
@model DateTimeOffset?
@Html.TextBox("", String.Format("{0:u}", Model.HasValue ? Model : DateTimeOffset.UtcNow), new { @class = "datepicker" }) 
```

这适用于我 90% 的表单，我得到的值如`2012-07-31 11:30:09Z`. 但是，我有一种不会应用任何格式的表格。工作输入字段和非工作输入字段的 HTML 输出是相同的。

在职的...

```
<input class="datepicker hasDatepicker" data-val="true" data-val-required="&amp;#39;Launch Time&amp;#39; must not be empty." id="LaunchTime" name="LaunchTime" type="text" value="2012-07-31 11:30:09Z"> 
```

非工作...

```
<input class="datepicker hasDatepicker" data-val="true" data-val-required="&amp;#39;Launch Time&amp;#39; must not be empty." id="LaunchTime" name="LaunchTime" type="text" value="07/31/2012 11:30:09 +00:00"> 
```

我发现解决问题的唯一方法是更改​​ TextBox 名称字段...

```
@Html.TextBox("asdf", String.Format("{0:u}", Model.HasValue ? Model : DateTimeOffset.UtcNow), new { @class = "datepicker" }) 
```

但是，这会将我的输入字段更改为...

```
<input class="datepicker hasDatepicker" id="LaunchTime_asdf" name="LaunchTime.asdf" type="text" value="2012-07-31 11:30:09Z"> 
```

然后将破坏表单提交，并删除验证规则。

该模型...

```
[DisplayFormat(DataFormatString = "{0:u}" , ApplyFormatInEditMode = true)]
public DateTimeOffset LaunchTime { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:35:52.530

问题是似乎适用于日期时间值的唯一格式是 yyyy-mm-dd。/s 不起作用。

# scala - 如何在播放框架2 scala模板中创建列表

> ID：11747037
> 
> 赞同：4
> 
> 时间：2012-07-31T18:54:57.480
> 
> 标签：scala, playframework-2.0

我想在模板（scala.html）中创建一个列表。

我试过了

```
val list = @{ List("a", "b", "c", "d", "e") }

val list = List("a", "b", "c", "d", "e")

@list = @{ List("a", "b", "c", "d", "e") }

@list = List("a", "b", "c", "d", "e")

@defining(List("a", "b", "c", "d", "e")) { list =>
    // code here
} 
```

但我总是得到错误`object List is not a value`。我不知道 Scala（我现在正在学习），但在[API](http://www.scala-lang.org/api/current/scala/collection/immutable/List.html)中它有以下示例

```
// Make a list via the companion object factory
val days = List("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday") 
```

我想要做的是过滤地图。

我有一个 Map[Symbol, Any] 并且我正在尝试获取密钥不在上述列表中的所有项目。像这样的东西

```
@f = @{ map.filterKeys(!list.contains(_)) } 
// i do not know if the above statement is correct, because i can't get over there 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T20:52:47.063

只是缺少一个进口。我添加了

```
@import scala.collection.immutable._ 
```

要不就

```
@import scala._ 
```

在视图中（scala.html）并且工作得很好。

我以为那个`scala`包就像`java.lang`包

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T19:06:46.067

从看起来您正在做的事情来看，您似乎是在其中一个视图文件中编写此代码。与其在 scala 中解决这个问题，不如在控制器类中处理此任务，然后将该列表传递给视图文件。用“@”符号做这种工作会很棘手。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-31T20:26:43.020

我认为您应该使用 a`Set`而不是 a `List`，如下所示：

```
@{ map.filterKeys(!Set("a", "b", "c", "d", "e").contains(_)) } 
```

# javascript - jqGrid - 在 saveRow 之前调用 aftersavefunc

> ID：11747040
> 
> 赞同：1
> 
> 时间：2012-07-31T18:55:09.017
> 
> 标签：javascript, jquery, jqgrid

我有一个允许内联编辑/添加数据的 jqGrid。当用户双击该行时，内联编辑开始。当用户按下回车键或单击另一行时，我希望保存更改。但是，由于某种原因，在调用 saveRow 函数之前正在恢复该行，并且我的编辑没有保存（AJAX 调用永远不会发生）。

我的代码如下所示。当我按下回车键时，我的更改被保存并发送到服务器。当我单击另一行时，我的更改不会发送到服务器（没有 AJAX 调用），并且我在控制台中看到 afterrestorefunc 在 saveEdit 之前被调用。

```
var editParams = {
    afterSubmit: processResponse, 
    successfunc: function(response) {
        var processed = processResponse(response);
        if(processed[0] !== true) {
            $.jgrid.info_dialog($.jgrid.errors.errcap, processed[1], $.jgrid.edit.bClose);
        }
        return processed[0];
    }, 
    afterrestorefunc: function(id) {
        console.log('afterrestorefunc - ' + id);
    }, 
    bottominfo: 'Fields marked with an (*) are required', 
    keys: true
}, 
    zipEditParams = $.extend(true, {}, editParams, {url: 'editdata.php'});
/* Set global default options */
$.extend($.jgrid.defaults, {
    grouping: true, 
    shrinkToFit: false, 
    rowList: [10, 20, 30, 40, 50, 100], 
    rowNum: 20, 
    repeatitems: false, 
    ondblClickRow: inlineEdit, 
    onSelectRow: saveEdit
});
$('#zipcodes')
    .jqGrid({
        datatype: 'json', 
        colNames: ['Zip', 'City', 'State', 'Country'], 
        colModel: [
            {name: 'zip_zip', jsonmap: 'zip_zip', width: 75, editable: true, editrules: {required: true}, formoptions: {elmprefix: '(*) '}}, 
            {name: 'zip_city', jsonmap: 'zip_city', width: 75, editable: true, editrules: {required: true}, formoptions: {elmprefix: '(*) '}}, 
            {name: 'zip_state', jsonmap: 'zip_state', width: 75, editable: true, editrules: {required: true}, formoptions: {elmprefix: '(*) '}}, 
            {name: 'zip_country', jsonmap: 'zip_country', width: 75, editable: true, editrules: {required: true}, formoptions: {elmprefix: '(*) '}}
        ], 
        height: 200, 
        ignoreCase: true, 
        jsonReader: { repeatitems: false, id: 'zip_zip' }, 
        pager: '#zipcodes_pager', 
        url: 'data.php', 
        editurl: 'editdata.php'
    })
    .jqGrid('navGrid', '#zipcodes_pager', {add: false, edit: false, del: false, refresh: false, search: false})
    .jqGrid('inlineNav', '#zipcodes_pager', {edit: true, save: true, cancel: false, editParams: zipEditParams});

var lastSel;
/* Start editing the row */
function inlineEdit(id, iRow, iCol) {
    var editParams = this.id == 'zipcodes' ? zipEditParams : (this.id == 'labels' ? labelEditParams : (this.id == 'users' ? userEditParams : {}));
    $(this).jqGrid('editRow', id, editParams);
    focusRow(id, iCol, this);
}

function focusRow(id, iCol, table) {
    var ele = document.getElementById(id + '_' + table.p.colModel[iCol].name), 
        length = ele.value.length;
    ele.focus();
    if(ele.setSelectionRange) { //IE
        ele.setSelectionRange(length, length);
    }
    else if(ele.createTextRange) {
        var range = ele.createTextRange();
        range.collapse(true);
        range.moveEnd('character', length);
        range.moveStart('character', start);
        range.select();
    }
}

function saveEdit(id) {
    if(id && id != lastSel) {
        console.log('saveRow: ' + this.id + ' - ' + lastSel);
        /* Save the last selected row before changing it */
        var saveParams = zipEditParams;
        $(this).jqGrid('saveRow', lastSel, saveParams);
        lastSel = id;
    }
}

function processResponse(response) {
    console.log('processResponse');
    var obj = $.parseJSON(response.responseText), 
        retVal = true, 
        message = '', 
        new_id = '';
    if(obj.message) {
        if(obj.message == 'not logged in') {
            location.href = 'logout.php';
        }
        else if(obj.message != 'true') {
            message = obj.message;
            retVal = false;
        }
    }
    return [retVal, message, new_id];
} 
```

非常感谢您对此问题的任何帮助。

**更新**似乎如果我注释掉`.jqGrid('inlineNav', '#zipcodes_pager', {edit: true, save: true, cancel: false, editParams: zipEditParams});`，那么一切都会按预期工作。我也尝试过使用`.jqGrid('inlineNav', '#zipcodes_pager');`，但看到了相同的结果。这很好，可以在短期内工作，但如果可能的话，我仍然想要内联添加的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:23:19.930

我认为您需要为 onSelectRow 函数添加更多功能

 `````
onSelectRow: function (id) {
        if (id && id !== lastsel) {
        // cancel editing of the previous selected row if it was in editing state.
        // jqGrid hold intern savedRow array inside of jqGrid object,
        // so it is safe to call restoreRow method with any id parameter
        // if jqGrid not in editing state
        if (typeof lastsel !== "undefined") {
        jQuery("#grid").jqGrid('restoreRow', lastsel);
        }
    lastSel = id;
    }
    }, 
````  `在此代码中，我没有在选择行时进行编辑，但是您可以看到，如果该行处于编辑模式并且您单击其他行，则您需要恢复先前选择的行。

尝试这个。``

# foreign-keys - DB2 v8 可空外键

> ID：11747043
> 
> 赞同：1
> 
> 时间：2012-07-31T18:55:35.880
> 
> 标签：foreign-keys, db2

DB2 版本 8 z/OS 是否支持可为空的外键？

例如，人员表上的外键到主管表（有些人没有主管）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:01:51.620

根据文档，在 DB2 for z/OS v8 中应该可以有一个可以为空的外键。有关这些详细信息，请参阅**插入**、**更新**和**删除**规则：

**插入规则** 外键的非空插入值必须匹配父表的父键的某个值。如果值的任何组成部分为空，则复合外键的值为空。

**更新规则** 外键的非空更新值必须匹配父表的父键的某个值。如果值的任何组成部分为空，则复合外键的值被视为空。

**删除规则** 控制删除父表的一行时发生的情况。在定义引用约束时做出的动作选择是 RESTRICT、NO ACTION、CASCADE 或 SET NULL。只有当外键的某些列允许空值时，才能指定 SET NULL。

站点参考： http: [//publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp ?topic=%2Fcom.ibm.db2.doc.sqlref%2Frcncrfi.htm](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=%2Fcom.ibm.db2.doc.sqlref%2Frcncrfi.htm)

DB2 v8 Foreign Key Clause 参考（还注意到允许使用空值）：http: [//publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp ?topic=/com.ibm.db2.udb.doc/管理员/c0004981.htm](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/admin/c0004981.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:07:34.793

尝试它会比研究文档更快，该文档将在 2013 年 1 月之后从 IBM 网站上删除。

[这是CREATE TABLE](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2.doc.sqlref/rctbl.htm)语句的部分解释。

> 引用约束的外键由标识的列组成。|每个列名必须是标识表中除 LOB、ROWID 或安全标签列之外的列的非限定名称，并且不能多次标识同一列。标识的列数不得超过 64，其长度属性之和不得超过 255 减去允许空值的列数。如果 FOREIGN KEY 和父表与先前定义的引用约束的 FOREIGN KEY 和父表相同，则引用约束是重复的。重复引用约束的规范将被忽略并发出警告。

所以是的，外键可以包含一个或多个可为空的列。

# java - 三元语句脱离构造函数

> ID：11747047
> 
> 赞同：0
> 
> 时间：2012-07-31T18:55:48.007
> 
> 标签：java, android, eclipse

我正在为 Eclipse 中的一个 android 项目编写一个顶点类，并且在构造函数中我有一个运行时错误。这是构造函数...

```
public Vertices(GLGraphics glGraphics, int maxVertices, int maxIndices, boolean hasColor, boolean hasTexCoords)
{
    this.glGraphics = glGraphics;
    this.hasColor = hasColor;
    this.hasTexCoords = hasTexCoords;
    this.vertexSize = (2 + (hasColor?4:0) + (hasTexCoords?2:0)) * 4;

    ByteBuffer buffer = ByteBuffer.allocateDirect(maxVertices * vertexSize);
    buffer.order(ByteOrder.nativeOrder());
    vertices = buffer.asFloatBuffer();

    if(maxIndices > 0)
    {
        buffer = ByteBuffer.allocateDirect(maxIndices * Short.SIZE / 8);
        buffer.order(ByteOrder.nativeOrder());
        indices = buffer.asShortBuffer();
    }
    else
    {
        indices = null;
    }
} 
```

在本声明中：

```
this.vertexSize = (2 + (hasColor?4:0) + (hasTexCoords?2:0)) * 4; 
```

我正在计算顶点的大小（以字节为单位）。问题是，每当计算三元运算时，vertexSize 保持为 0，并且程序在该语句处跳出构造函数。三元运算符不会根据条件是真还是假来评估它的值。这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:07:28.623

您遇到空指针异常。三元运算符的第一个操作数不能是`null`。

当您运行此行时，`hasColor`必须以 null 的形式输入，从而导致您的程序给您一个运行时错误。这将导致您的程序结束并且`vertexSize`永远不会被分配。

`this.vertexSize = (2 + (hasColor?4:0) + (hasTexCoords?2:0)) * 4;`

检查你的 logcat，它应该告诉你是这种情况。

**编辑**

正如@jahroy 提到的，虽然它会在这一行抛出一个 NPE，但当它传递给构造函数时它可能实际上抛出了 NPE。如果您尝试转换`null`为布尔值，您还将获得 NPE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:12:27.067

部分问题是您试图在一行代码中做太多事情。我强烈建议你打破

```
this.vertexSize = (2 + (hasColor?4:0) + (hasTexCoords?2:0)) * 4; 
```

变成大约三行代码：

```
int colorWeight = hasColor ? 4 : 0;
int texCoordWeight = hasTexCoords ? 2 : 0;

this vertexSize = (2 + colorWeight + texCoordWeight) * 4 
```

请注意这是多么容易阅读。此外，当您收到错误消息时，更容易找到原因。

# python - 第一次安装virtualenvwrapper，无法运行初始化钩子

> ID：11747048
> 
> 赞同：0
> 
> 时间：2012-07-31T18:55:56.927
> 
> 标签：python, ubuntu, virtualenv

我正在尝试`virtualenv`使用[这些步骤](http://conjurecode.com/python-environment-for-ubuntu-part-1/)进行设置，但由于`source /usr/local/bin/virtualenvwrapper.sh`（从终端调用或通过`.bashrc`）而出现以下错误：

```
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named virtualenvwrapper.hook_loader
virtualenvwrapper.sh: There was a problem running the initialization hooks. 

If Python could not import the module virtualenvwrapper.hook_loader,
check that virtualenv has been installed for
VIRTUALENVWRAPPER_PYTHON=/usr/bin/python and that PATH is
set properly. 
```

我发现[这个 SO question](https://stackoverflow.com/questions/6968914/getting-a-python-virtual-env-error-after-installing-lion)与我正在经历的类似。我尝试按照接受的答案概述的所有步骤进行操作，但无济于事（FWIW，我`pip`在此过程中得到了更新）。

我能想到的唯一区别是他们`virtualenv`在升级之前已经有一个工作设置，而升级破坏了它。不过，这是我第一次安装`virtualenv`. 什么可能导致这个问题？我在安装了 Python 2.6.5 和 3.1.2 的 Ubuntu Lucid Lynx 上。我很乐意`virtualenv`为 2.6.5 运行；我将把它用于 Django。`which python`给`usr/bin/python`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:00:17.993

真的，伙计们。对于初学者，只需使用[virtualenv-](https://github.com/brainsik/virtualenv-burrito) burrito ，正如 glyphobet 所建议的那样。太棒了！[提示：梦幻般的外观]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T15:13:54.203

由于我没有找到建议的解决方案来理解问题所在，我发现 pip 安装的 virtualenv对于 debian/ubuntu来说不够*好。*

您需要删除 pip 安装包，并使用 apt-get 安装它：

```
apt-get install virtualenvwrapper 
```

这将安装 bash 完成脚本。如果您不需要所有这些，则只能采购一个：

```
source /etc/bash_completion.d/virtualenvwrapper 
```

希望这可以帮助某人。

# c# - 为什么 C# volatile 不保护读写重新排序？

> ID：11747051
> 
> 赞同：19
> 
> 时间：2012-07-31T18:56:00.700
> 
> 标签：c#, .net, multithreading, volatile

根据[这本在线书籍](http://www.albahari.com/threading/part4.aspx)，`volatile`C# 中的关键字不能防止重新排序写操作后跟读操作。它给出了这个例子，其中`a`和`b`最终都可以设置为`0`，尽管`x`和`y`是`volatile`：

```
class IfYouThinkYouUnderstandVolatile
{
  volatile int x, y;

  void Test1()        // Executed on one thread
  {
    x = 1;            // Volatile write (release-fence)
    int a = y;        // Volatile read (acquire-fence)
    ...
  }

  void Test2()        // Executed on another thread
  {
    y = 1;            // Volatile write (release-fence)
    int b = x;        // Volatile read (acquire-fence)
    ...
  }
} 
```

这似乎符合 10.5.3 中规范所说的内容：

> 对易失性字段的读取称为易失性读取。易失性读取具有“获取语义”；也就是说，它保证在指令序列中对内存的任何引用之前发生。
> 
> 对易失性字段的写入称为易失性写入。易失性写入具有“释放语义”；也就是说，它保证发生在指令序列中写指令之前的任何内存引用之后。

这是什么原因？是否存在我们不介意对写入-读取操作进行重新排序的用例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T20:30:49.833

Volatile 不保证独立 volatile 变量的读取和写入不会重新排序，它只保证读取得到最新的值（非缓存）。（保证对单个变量的读写保持顺序）

[http://msdn.microsoft.com/en-us/library/x13ttww7%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/x13ttww7%28v=vs.71%29.aspx)

> 系统总是在请求时读取 volatile 对象的当前值，即使之前的指令要求来自同一对象的值。此外，对象的值在赋值时立即写入。
> 
> volatile修饰符通常用于被多个线程访问而不使用lock语句序列化访问的字段。使用 volatile 修饰符可确保一个线程检索另一个线程写入的最新值。

每当您有多个依赖操作时，您都需要使用其他一些同步机制。通常使用`lock`，它是最简单的，并且只会在被滥用或在非常极端的情况下造成性能瓶颈。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-15T16:19:22.563

`volatile write`在 x86/x64 架构上通过重新排序进行预防`volatile read`将非常昂贵。那是因为称为`store buffers`. Java 采用了这种方式，Java 中的 volatile 写入实际上是 CPU 指令级别的完整内存屏障。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-16T14:46:59.000

也许回答太晚了……但我环顾四周，看到了这个。Volatile-read 实际上是对类似于以下的方法的调用：

```
public static int VolatileRead(ref int address)
{
    int num = address;
    Thread.MemoryBarrier();
    return num;
} 
```

而 Volatile-write 是这样的：

```
public static int VolatileWrite(ref int address, int value)
{
    Thread.MemoryBarrier();
    adrdress = value;
} 
```

该指令`MemoryBarrier();`是防止重新排序的指令。`MemoryBarrier();`确保之前的指令在之后的指令之前执行。当 VW 然后 VR，你将拥有：

```
Thread.MemoryBarrier();
adrdress = value; //this line may be reordered with the one bellow
int num = address;//this line may be reordered with the one above
Thread.MemoryBarrier();
return num; 
```

# javascript - 更改标题文本

> ID：11747056
> 
> 赞同：0
> 
> 时间：2012-07-31T18:56:22.000
> 
> 标签：javascript, jquery, html

我正在尝试使用 jQuery 更改我的一个标题中的文本，但它只是将标题留空。我怎样才能让它工作？

编辑：

带有标题的html页面：

```
<!-- Logs -->
    <div data-role="page" data-theme="a" id="page15">
        <div data-theme="a" data-role="header">
            <h3>
                Logs
            </h3>
            <a data-role="button" data-direction="reverse" data-transition="slide" href="#page3" data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">
                Back
            </a>
        </div>
        <div data-role="content" style="padding: 15px">
            <a data-role="button" data-transition="slide" href="#page1">
                Add log entry
            </a>
            <div data-role="collapsible-set" data-theme="" data-content-theme="">
                <div data-role="collapsible" data-collapsed="true">
                    <h3>
                        July 2012
                    </h3>
                    <div data-role="collapsible-set" data-theme="" data-content-theme="">
                        <div data-role="collapsible" data-collapsed="true" onclick="getLogTime(); this.onclick=null">
                            <h3>
                                July 5
                            </h3>
                            <div data-role="collapsible-set" data-theme="" data-content-theme="">
                                <div data-role="collapsible" data-collapsed="true" onclick="getLogData(); this.onclick=null">
                                    //Heading I'm trying to change
                                    <h3 id=time1>
                                    </h3>
                                    <div>
                                        <p id="logFortime1">
                                        </p>
                                    </div>
                                </div>
                                <div data-role="collapsible" data-collapsed="true">
                                    <h3>
                                        12:47 pm
                                    </h3>
                                </div>
                            </div>
                        </div>
                        <div data-role="collapsible" data-collapsed="true">
                            <h3>
                                July 6
                            </h3>
                        </div>
                    </div>
                </div>
                <div data-role="collapsible" data-collapsed="true">
                    <h3>
                        August 2012
                    </h3>
                </div>
            </div>
            <a data-role="button" data-transition="slide" href="#page21">
                Graphs
            </a>
        </div>
    </div> 
```

应该改变标题的功能：

```
function getLogTime() {
$('#time1').text('Time')
} 
```

编辑：

添加了一个 =，因此标题中的文本现在发生了变化，但它失去了所有样式和可折叠菜单中的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:13:27.107

您应该使用标签名称或 ID（首选）。不要组合多个选择器（特别是因为您在任何时候都不应该在 DOM 中拥有多个 ID）。html() 方法比 text() 方法快得多（请参阅[http://jsperf.com/jq2-text-vs-html](http://jsperf.com/jq2-text-vs-html)），但从语义上讲， text() 更合适。**在执行任何代码（对于 DOM）之前，确保 DOM 已加载。**以下是最快的，应该可以工作。

```
$(function(){
  $("#time1").html("Time");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:25:36.437

为什么不使用纯 jQuery 解决方案？您可以简单地以这种方式使用 jQuery，而不是在可点击元素上提供 onclick 属性。

HTML：

```
<h3 id="time1">Deepak</h3>
<a id='changeheading'>click</a> 
```

JavaScript/jQuery :

```
$(document).ready(function(){
$('#changeheading').on("click",function(){    
$('#time1').text('Time');
});
});​ 
```

它工作得很好。在此处查看演示[http://jsfiddle.net/DeepakKamat/b9ggb/25/](http://jsfiddle.net/DeepakKamat/b9ggb/25/)

# php - Do i have to change all my htmlspecialchars ... ENT_QUOTES in mysql_real_escape_string?

> ID：11747059
> 
> 赞同：2
> 
> 时间：2012-07-31T18:56:46.947
> 
> 标签：php, quotes, mysql-real-escape-string, htmlspecialchars

i wanted to protect my website from sql injections and other possible risks, so i changed all my sql queries by adding for each variable something like this :

```
 $getLid = htmlspecialchars($_GET[lid], ENT_QUOTES); 
```

For my 50 files... But i have just seen that it might be my mistake : i should have added mysql_real_escape_string for any "input"...

Is it still better to use `mysql_real_escape_string` in this case, or the `ENT_QUOTES` works also? Do i have to restart again and add `mysql_real_escape_string` instead of my `htmlspecialchars(..., ENT_QUOTES);` ?

Edit :

Do you mean something like that?

```
$getLid = escape_string($str);

function escape_string($str){
    return mysql_real_escape_string($str);
} 
```

Edit n°2 : the return statement does not work properly, would you know why?

> Warning: mysql_real_escape_string() [function.mysql-real-escape-string]: A link to the server could not be established in … www/escape_file.php
> 
> Access denied for user in … www/escape_file.php

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:31:29.623

There are a lots of references to secure user inputs. You can Google it, but I think you should write a class or a function in another php file like "escape.php" and then include that file to all of your 50 files. then use that for escaping. exmple:

```
include 'escape.php';
$str = escape_string($str); 
```

So you can change your escaping function so easy just with changing a single file. I hope it will help you.

# excel - 在 Excel 中对带有数字的链接进行排序

> ID：11747067
> 
> 赞同：1
> 
> 时间：2012-07-31T18:57:19.857
> 
> 标签：excel, sorting, numbers, excel-formula

我有一个 Excel 中具有相同基础的网站的类似链接列表。在链接的和有数字，例如*_100、*_1013、*_14 等。

我需要对列表进行降序排序

```
*_1013
*_100
*_14 
```

（前 4 位链接，然后是 3 位，然后是 2 位）

Excel中是否有可能以正确的方式对该数组进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T02:00:19.037

从你的问题来看，`"*_XXX"`是在字符串的末尾。因此，要获得您需要的值

1.  确定`*_`发生的位置并提取它
2.  `*-`从提取的字符串中删除（我曾经这样`SUBSTITUTE`做），然后将其转换为一个值

`=IFERROR(VALUE(SUBSTITUTE(RIGHT(A1,LEN(A1)-FIND("*_",A1)-1),"*_","")),"no match")`

![在此处输入图像描述](../Images/359f97d1843a76bf4d4dd845892141c2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:10:07.683

如果您不介意额外的列，您可以提取数字，使用 =value() 将其设为实数，然后简单地从大到小排序。（注意：前面的 0，如果有的话，在调用 value 函数时会丢失）

# android - Android警报消失

> ID：11747071
> 
> 赞同：0
> 
> 时间：2012-07-31T18:57:27.073
> 
> 标签：android, browser, bitmap, alert

我在我的应用程序中发出了警报，它在我想要它的主要活动中非常完美，但我希望它在警告该人三次后消失..不是每次我回到主要活动时它都会出现

这是我的警报代码

```
 new AlertDialog.Builder( this )
    .setTitle( "Browser feature" )
    .setMessage( "The browser feature is currently beta, so it won't work perfectly. To get an image from the internet, click on the browser then google your image, and save it then import it using the gallery option." )
    .setPositiveButton( "Continue", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            Log.d( "AlertDialog", "Positive" );
        }
    })
    .show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:08:41.920

将人员被警告的次数存储为 SharedPreference。每次更新计数器，然后仅在计数 < 3 时才发出。

[http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

共享偏好是保存此类全局信息的最佳位置。

# google-app-engine - 如果某些用户不需要成为用户怎么办？

> ID：11747072
> 
> 赞同：0
> 
> 时间：2012-07-31T18:57:27.193
> 
> 标签：google-app-engine, authentication, openid

[在这个关于用户服务的 GAE 文档页面上，](https://developers.google.com/appengine/docs/python/users/overview)我发现了这个声明：

> 如果您的应用使用 OpenID 并且用户必须登录，您的应用将被重定向到 URL /_ah/login_required。您必须创建一个允许用户使用 OpenID 标识符登录的页面。要指定此页面，请在您的 app.yaml 文件中添加以下形式的条目：

*   网址：/_ah/login_required 脚本：do_openid_login.py

我的一些用户不需要是用户，而是提供存储在数据存储中的输入的客人。我不明白文档是否意味着在我的情况下 open_id 不能使用，或者是否必须以其他方式使用。我希望我的应用程序可以使用 open_id 和上面完成的 app.yaml 但只是不要求“客人”进行身份验证。那正确吗？

我的问题与[我的另一个](https://stackoverflow.com/questions/11657352/does-a-two-layer-crud-python-appengine-demo-exist)未回答的问题有关，我正在尝试开发一个可以回答该问题的演示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:19:15.773

您引用的部分指出它适用于“用户必须登录”。您不必强制所有用户登录。文档演示了如何配置 app.yaml 以要求在某些页面上登录。但是，他们也声明：

> 如果应用程序需要不同的行为，应用程序可以自己实现用户处理。有关更多信息，请参阅用户 API。

你在这个营地。您可以使用[用户 API 自行](https://developers.google.com/appengine/docs/python/users/)实现登录逻辑。这是最简单的例子：

```
from google.appengine.api import users

user = users.get_current_user()
if not user:
  # Handle guest users here or redirect them to sign-in if required.
else:
  # This user is signed in. 
```

# jquery-ui - jQuery UI Datepicker 在 mm/yy 上没有正确默认

> ID：11747076
> 
> 赞同：2
> 
> 时间：2012-07-31T18:57:42.493
> 
> 标签：jquery-ui, datepicker

我们有一个日期字段，我们接受月份和年份。然而，每当用户选择该字段时，jQuery UI Datepicker 默认为当前月份和年份，并清除他们输入的任何内容。

我已将测试用例中的格式切换为 mm/dd/yy 并且 Datepicker 行为正确，因此我相当有信心基本代码是正确的。

关于如何解决这个问题的任何建议？

下面的示例代码：

```
<html>
<head></head>
<body>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.22/jquery-ui.min.js"></script>
    <input type="text" id="asdf" value="07/2006" />
    <script type="text/javascript">
        $('#asdf').datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'mm/yy',
            showButtonPanel: true
        });
    </script>
</body>
</html> 
```

编辑：为了更清楚一点，在以下情况下比较 Datepicker 的日期，我们在输入值中提供一天，并更改`dateFormat`选项：

```
<html>
<head></head>
<body>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.22/jquery-ui.min.js"></script>
    <input type="text" id="asdf" value="07/01/2006" />
    <script type="text/javascript">
        $('#asdf').datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'mm/dd/yy',
            showButtonPanel: true
        });
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:16:39.813

我以为我第一次就理解了你的问题，但另一个人让我感到困惑。问题似乎是 datepicker 没有将 mm/yy 格式视为真正的日期时间格式，因此在尝试查找当前日期时会感到困惑，这意味着您必须做一些时髦的事情作为解决方法。我并不是说这是最好的方法，但这是我已经解决的问题。

**请注意，这使用 Date.js**

```
$('#asdf').datepicker({ changeMonth: true, changeYear: true, dateFormat: 'mm/yy',beforeShow: function(input, inst) 
{   //getter
    var defaultDate = $( "#asdf" ).datepicker( "option", "defaultDate" );
    //setter
    $( "#asdf" ).datepicker( "option", "defaultDate",   Date.parseExact($("#asdf").val(), "M/yyyy"));
}  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:06:46.570

看起来它不会将月份或年份的更改视为“选择”操作，但是当您单击一天时确实会更改月份/年份。换句话说，如果您更改了月份和年份，但没有单击某天，则认为您取消了操作。

`onChangeMonthYear`您可以尝试为事件 ( [docs](http://jqueryui.com/demos/datepicker/#event-onChangeMonthYear) )编写一些代码来读取选定的月份/年份并自己关闭日历对话框。

# sql - 无法从 sql server management studio 编辑架构或数据

> ID：11747077
> 
> 赞同：11
> 
> 时间：2012-07-31T18:57:54.643
> 
> 标签：sql, azure, azure-sql-database

我已使用 SQL Server 2012 Management Studio 连接到我的 SQL azure 服务器，但我无法编辑任何表的架构或其中的数据。当我右键单击表格时，缺少选项。难道我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T19:49:50.930

并不是说我使用的是 SSMS 2012，而是在 2008 R2 中通常是相同的。表格设计器和“编辑前 200 条记录”都没有 GUI。您必须开始深入研究 SQL Server 的 DDL 和 DML 并放弃 GUI。您可以在某种程度上使用 GUI，尤其是对于 DDL，一种方法是使用门户提供的 Windows Azure SQL 数据库管理器。当您从新门户或旧门户（管理）访问数据库时，您可以找到指向它的链接。其他方法是使用一些我不知道的第三方工具。以下是新门户中该经理的链接：

![SQL Azure 管理网址](../Images/def02fc584e1cc4b63ed48acc2851ec9.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-18T11:04:25.727

另一个可能有些人会觉得有用的选项，如果您拥有并使用 Visual Studio，那么您可以在 ServerManager 中链接到服务器，连接到数据库，然后直接设计和编辑数据。 ![在此处输入图像描述](../Images/075d84487051cd4f8a56954250647601.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-22T14:07:44.227

我的 2008 R2 版本的 SSMS 也有同样的问题。我下载了 2016 CTP3 SSMS，它支持 Azure，Azure 数据库一切正常。

[https://msdn.microsoft.com/en-us/library/mt238290.aspx](https://msdn.microsoft.com/en-us/library/mt238290.aspx)

我确实丢失了我的连接历史信息，所以要小心。

# macos - 不调用在单独 Object 中实现的 Core Plot DataSource 委托方法

> ID：11747085
> 
> 赞同：0
> 
> 时间：2012-07-31T18:58:27.970
> 
> 标签：macos, delegates, datasource, core-plot

我有两个类，GraphViewController 和 AppController。AppController（委托）实现了 GraphViewController 的数据源协议。我遇到的问题是 GraphViewController 没有调用这些方法。

但是，当我将 GraphViewController 的数据源设置为 self 并将协议方法保留在 GraphViewController 中（如 CorePlot 提供的 CorePlot 示例中）时，一切正常，无需调用任何 reloadData 或 setNeedsDisplay 方法。

问题不在于视图的设置。主题和轴绘制得很好，只是缺少情节。

为非常相似的问题提供的答案都没有解决我的特定问题。我想（或希望）这只是我错过的一件小事，但我就是找不到。

请参阅下面两个类的来源。哦，顺便说一句：这是针对 OS-X 而不是 iOS。

GraphViewController.h：

```
#import <Cocoa/Cocoa.h>
#import <CorePlot/CorePlot.h>

@interface GraphViewController : NSObject{

    IBOutlet CPTGraphHostingView *graphHostingViewOutlet;
    CPTXYGraph *graph;
}

@property (weak) id<CPTPlotDataSource> delegate;

@end 
```

GraphViewController.m：

```
#import "GraphViewController.h"

@implementation GraphViewController

@synthesize delegate;

-(void)awakeFromNib {

    [super awakeFromNib];

    // create graph
    graph = [(CPTXYGraph *)[CPTXYGraph alloc] initWithFrame:CGRectZero];

    // apply theme to graph
    [graph applyTheme:[CPTTheme themeNamed:kCPTPlainWhiteTheme]];

    // connect graph to host view
    graphHostingViewOutlet.hostedGraph = graph;

    // get a pointer to the default plot space of the graph
    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;

    // setup axes limits
    plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(-0.2f) length:CPTDecimalFromFloat(1.2f)];
    plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(-0.2f) length:CPTDecimalFromFloat(1.2f)];

    // get a pointer to the axis set of the graph
    CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;

    // get the x axis element of the axis set and set propertys for x axis
    CPTXYAxis *x = axisSet.xAxis;
    x.majorIntervalLength = CPTDecimalFromFloat(0.2f);

    // get the y axis element of the axis set and set propertys for y axis
    CPTXYAxis *y = axisSet.yAxis;
    y.majorIntervalLength = CPTDecimalFromFloat(0.2f);

    // create a new plot
    CPTScatterPlot *dataSourceLinePlot = [[CPTScatterPlot alloc] init];

    // set the identifier for the plot
    dataSourceLinePlot.identifier = @"ThePlot";

    // set data source for plot
    dataSourceLinePlot.dataSource = delegate;

    // add the plot to the graph
    [graph addPlot:dataSourceLinePlot];

}

@end 
```

应用控制器.h：

```
#import <Foundation/Foundation.h>
#import "GraphViewController.h"
#import <CorePlot/CorePlot.h>

@interface AppController : NSObject <CPTPlotDataSource>

@property (weak) GraphViewController *graphViewController;

- (IBAction)doSomething:(id)sender; // connected to a button

@end 
```

应用控制器.m：

```
#import "AppController.h"

@implementation AppController{

    NSArray *_plotData;

}

@synthesize graphViewController = _graphViewController;

-(void)awakeFromNib {

    [super awakeFromNib];

    [_graphViewController setDelegate:self];

    // create data array
    NSMutableArray *newData = [NSMutableArray array];

    for (NSUInteger i = 0; i < 20; i++ ) {

        // create random y values
        id y = [NSDecimalNumber numberWithFloat: rand() / (float)RAND_MAX];

        [newData addObject: [NSDictionary dictionaryWithObjectsAndKeys:

                             [NSDecimalNumber  numberWithFloat:0.05 * i],      // x object
                             [NSNumber numberWithInt:CPTScatterPlotFieldX],    // key
                             y,                                                // y object
                             [NSNumber numberWithInt:CPTScatterPlotFieldY],    // key
                             nil]];
    } // end of for

    _plotData = newData;
}

- (IBAction)doSomething:(id)sender{ // connected to a working button

    NSLog(@"Button was pressed.");

    // tell the graphViewController to reload its data from its delegate (me), but how?

    // this does not work: [[NSNotificationCenter defaultCenter] postNotificationName:@"CPTGraphNeedsRedrawNotification" object:nil];

}

// implementation of delegate methods

-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index
{
    NSDecimalNumber *num = [[_plotData objectAtIndex:index] objectForKey:[NSNumber numberWithLongLong:fieldEnum]];
    NSLog(@"numberForPlot was called, num is %@",num);
    return num;
}

-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot
{
    NSLog(@"numberForPlot was called.");
    return _plotData.count;
}

@end 
```

我希望一旦发现错误，我发布的源代码可以作为其他人的简单原型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:40:46.703

在配置绘图时检查以确保`delegate`已设置。`-[GraphViewController awakeFromNib]`如果这个类在应用控制器之前被初始化，它还不会被设置。解决方法是为属性添加一个自定义设置器，该`delegate`属性也将新值设置为绘图数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:31:00.940

我不打算在这里回答我自己的问题（我仍然没有解决问题的方法），但我对尝试做同样事情的人有一个提示：

还有另一种方法可以将来自单独类的数据提供给使用绑定绘制数据的类。您可以将（核心数据）实体（即 dataToPlot）绑定到 NSArrayController，然后在绘图类中定义 NSArrayController 类型的 IBOutlet，并使用 IB 将 ArrayController（绑定到 plotData）连接到该 IBOutlet。这对我有用，似乎是一种不易出错且更优雅的方法。

[此 coreplot-group 线程](https://groups.google.com/d/msg/coreplot-discuss/mL44cf59n1k/SgHwMyuf5rMJ)中更详细地描述了设置所需的步骤。

# git - 更改 GIT 端口

> ID：11747092
> 
> 赞同：3
> 
> 时间：2012-07-31T18:59:09.060
> 
> 标签：git, configuration, port

当我尝试时：`git pull origin master`我收到以下信息：`ssh: connect to host localhost port 123: Bad file number`

现在，不知何故，我将 git 设置为使用端口 123，但这不再是一个有效的端口。我想将其更改为端口 321。

我去修改`~/.ssh/config`文件，但我惊讶地意识到该文件不存在。我可能可以创建一个并获得所需的行为，但我的问题是：端口 123 还可以在哪里定义？如何在不创建配置文件的情况下将其更改为 321？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-18T21:31:50.017

`git remote set-url`您可以使用CLI 命令更新 SSH URL 中的端口。例如，要将源远程的端口更新为端口 321，您可以运行以下命令：

```
git remote set-url origin ssh://user@site.com:321/home/user/repo 
```

如果您不知道 URL 的其余部分，您可以执行

```
git remote -v 
```

然后只需切换端口号。

# c# - 线程定时器不工作，为什么？

> ID：11747095
> 
> 赞同：0
> 
> 时间：2012-07-31T18:59:29.870
> 
> 标签：c#, multithreading, timer

我有一个程序，我有一个线程计时器来更新来自数据服务器的时间。但是，我注意到计时器运行了几次，然后停止调用。我尝试将线程定时器代码复制到一个新程序上，它运行良好，所以我知道定时器代码一定会干扰程序的其余部分，但我不知道在哪里，有人可以帮我吗？

该程序非常大，可以在这里发布所有内容，我尝试在这里发布所有相关部分。

```
public partial class HistoricalDownload : Form
{
    static int column = 2;
    static int row = 100;

    string timeFmt = "yyyy/MM/dd HH:mm:ss.fff";

    ZenFire.Connection zf;
    ZenFire.Connection.TickEventHandler tick;
    ZenFire.IProduct product = null;

    System.Windows.Forms.TextBox[,] textbox = new System.Windows.Forms.TextBox[column, row];
    DisplayTimer displayTimer = new DisplayTimer();
    memoryStreamClass msc = new memoryStreamClass();
    Dictionary<string, int> dictionarySymbol = new Dictionary<String, int>();
    delegate void StringParameterDelegate(int j, string value);

    public HistoricalDownload(ZenFire.Connection z)
    {
        InitializeComponent();

        int month = 0;
        int year = 0;

        string symbol;
        string exchange;
        string finalSymbol;

        string[] lineSplit;

        zf = z;
        tick = new ZenFire.Connection.TickEventHandler(zf_TickEvent);
        zf.TickEvent += tick;

                //set the array for name and update time 

        for (int k = 0; k < column; k++)
        {
            for (int j = 0; j < row; j++)
            {
                textbox[k, j] = new System.Windows.Forms.TextBox();
                textbox[k, j].Size = new Size(140, 18);
                textbox[k, j].Name = "textbox_" + k + "_" + j;

                if (j >= 50)
                {
                    textbox[k, j].Location = new System.Drawing.Point((k * 140) + 400, ((j - 50) * 18) + 30);
                }
                else
                {
                    textbox[k, j].Location = new System.Drawing.Point((k * 140) + 20, (j * 18) + 30);
                }

                textbox[k, j].Visible = true;
                Controls.Add(textbox[k, j]);
            }
        }

                //load the config file and subscribe the symbol

                    ....

                ///////////////////////////////////////

        System.Threading.TimerCallback displayCallback = new System.Threading.TimerCallback(timeDisplay);
        System.Threading.Timer displayTimerThread = new System.Threading.Timer(displayCallback, displayTimer, 0, 1000);
    }

    public void timeDisplay(object timerObject)
    {
        DisplayTimer t = (DisplayTimer)timerObject;

        for (int j = 0; j < t.row; j++)
        {
            string value = t.outputTime[j].ToString(timeFmt);

            if (value != "0001/01/01 00:00:00.000")
            {
                writeToTextBox(j, value);
            }
        }
    }

    public void writeToTextBox(int j, string value)
    {
        if (InvokeRequired)
        {
            BeginInvoke(new StringParameterDelegate(writeToTextBox), new object[] { j, value });
            return;
        }
        //// Must be on the UI thread if we've got this far
        textbox[1, j].Text = value;
    } 

    void zf_TickEvent(object sender, ZenFire.TickEventArgs e)
    {
        string product = e.Product.ToString();
        int c = dictionarySymbol[product];

        displayTimer.outputTime[c] = e.TimeStamp;

        msc.fillBuffer(string.Format("{0},{1},{2},{3},{4}\r\n",
                        e.TimeStamp.ToString(timeFmt),
                        product,
                        Enum.GetName(typeof(ZenFire.TickType), e.Type),
                        e.Price,
                        e.Volume));
    } 
```

谁能指出干扰可能在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:09:16.997

如果您在计时器回调中所做的一切都是更新 UI，我建议您`System.Windows.Forms.Timer`改用。您不必处理`InvokeRequired`/`BeginInvoke`因为该处理程序在 UI 线程上运行。

您似乎还为`System.Thread.Timer`. 这可能会导致计时器在`HistoricalDownload`. 这可能比您希望计时器停止运行要快得多。（请参阅[http://msdn.microsoft.com/en-us/library/saba8ksx](http://msdn.microsoft.com/en-us/library/saba8ksx)上的第一个注释）您应该将该变量放在父类的字段中 - 或者只要您愿意，任何类都将保持“活动”要运行的计时器。我认为如果您使用`System.Windows.Forms.Timer`. 但是，为异步使用的东西保留一个字段也是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:05:15.703

计时器的 Tick 事件*可能*发生在 ThreadPool 线程上（许多框架计时器都这样做，但由于您使用的是自定义计时器（`ZenFire`？），因此无法确定）。

如果是这种情况，您的代码可能不是线程安全的，并且您可能会在计时器的 Tick 事件中遇到异常。同样，根据实现，异常可能会阻止计时器在该点之后正常运行。

特别要注意的是不要从计时器的 Tick 事件中更新任何 UI 组件 - 而是安装，将调用编组回 UI 线程`Control.Invoke`（或者`Dispatcher.Invoke`如果您正在使用 WPF）。另外，像使用你`Dictionary<T,U>`的简单的东西不是线程安全的，所以你应该同步对这些项目的访问。

# sharepoint - 将多个查询从访问移动到共享点

> ID：11747096
> 
> 赞同：0
> 
> 时间：2012-07-31T18:59:29.797
> 
> 标签：sharepoint, ms-access, ms-access-2007, vba

首先，我在 Access 方面很糟糕，在任何不是 .Net 的方面都很糟糕（如您所见，我一直在尝试用 .Net 编写）

我要做的是获取 Access DB 中的每个查询并将其保存在 Sharepoint 列表中。

就像是：

```
Option Compare Database
Option Explicit

Public Function SendUpdate()
     Dim DB as Access.Db = C:\Test.accdb

     For Each Qry as Query in DB
           DoCmd.TransferDatabase acExport, "WSS", DB, _
           "http://My.sharepointlist.com/list", _
           acQuery, Qry, Qry, True, Login, Password
     Loop
End Function 
```

显然这`For Each`部分不起作用，但即使我这样做：

DoCmd.TransferDatabase acExport, `WSS`, DB, `http://My.sharepointlist.com/list`, acQuery, Qry, Qry, True, Login, Password

就其本身而言，我遇到了一个运行时错误`3841`，我希望至少这部分有效。有没有人有什么建议？

谢谢你的帮助，扎克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T03:25:38.670

您想要的命令如下所示：

```
DoCmd.TransferDatabase acExport, _
                   "WSS", _
                   "http://YourTargetDatabase/TestSubSite", _
                   acQuery, _
                   "q2", _
                   "q2" 
```

对此的分解是：

```
DoCmd.TransferDatabase acExport, _
         "WSS", _     (Type of export – WSS)
         "http://YourTargetDatabase"    (target database location), _
         acQuery, _             (type of export)
         "q2",                       (name of query to export)
         "q2"                         (name to create on target system) 
```

您拥有的“存储”密码选项不是连接字符串，也不是密码。这只是要存储的密码的真/假设置——我认为这不适用于 SharePoint，而仅适用于某些类型的 odbc 连接。

因此，如果您当前登录到 SharePoint 网站，则上述内容将在没有密码提示的情况下运行。如果您没有登录，那么您将收到一个登录提示，然后上面应该可以正常工作。

如果您要将其编码为 for/each ，那么语法将如下所示：

```
Sub TransferQuery()

  Dim qryDef     As DAO.QueryDef

  For Each qryDef In CurrentDb.QueryDefs

     DoCmd.TransferDatabase acExport, _
                   "WSS", _
                   "http://YourTargetDatabase/TestSubSite", _
                   acQuery, _
                   qryDef.Name, _
                   qryDef.Name

  Next

End Sub 
```

# php - 将多个 MySQL 结果合并为单个 JSON 编码 (PHP)

> ID：11747098
> 
> 赞同：1
> 
> 时间：2012-07-31T18:59:37.967
> 
> 标签：php, arrays, json

这是现在存在的代码：

```
while($row=mysql_fetch_assoc($count_query_result))
    $output[]=$row;
while($row=mysql_fetch_assoc($average_query_result))
    $output2[]=$row;
while($row=mysql_fetch_assoc($items_query_result))
    $output3[]=$row;

print(json_encode(array($output,$output2,$output3)));
mysql_close(); 
```

我的问题：

如何从三个查询结果中的每一个中获取一列，并从中创建一个 JSON 数组，如下所示：

[{'att1'：'数据'}，{'att2'：'数据'}，{'att3'：'数据'}]

假设：

*   att1 来自 $count_query_result/$output
*   att2 来自 $average_query_result/$output2
*   att3 来自 $items_query_result/$output3

因此，只编码一个变量，而不是 3 个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:22:32.547

好吧，我回答了我自己的问题。我必须找到问题的根源。MySQL 查询。我都加入了，所以现在只有一个。这将为我的需要创建一个 JSON 数组。我相信有话要说只是这样做......对..第一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:23:23.180

```
$result = array('att1' => $row['data'],
                'att2' => $row['data']

echo json_encode($result) 
```

其中 $row['data'] 是您希望从每个查询中返回的信息

# iphone - 使用 UIPopover 从图库中获取图像并显示它

> ID：11747100
> 
> 赞同：0
> 
> 时间：2012-07-31T18:59:47.790
> 
> 标签：iphone, objective-c, ios

我正在尝试从图库中获取图像，然后将其显示在 UIImageView 中。我的问题是显示此图像。我的代码：

```
- (void)getMediaFromSource:(UIImagePickerControllerSourceType)sourceType {

     UIImagePickerController *imagePickerController = [[UIImagePickerController alloc] init];
     imagePickerController.delegate = self;
imagePickerController.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

     self.popController = [[UIPopoverController alloc] initWithContentViewController:imagePickerController];
     self.popController.delegate = self;
     [self.popController presentPopoverFromRect:[fromGalaryButton frame] inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
}

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
     [self.popController dismissPopoverAnimated:YES];
     self.image = [info objectForKey:UIImagePickerControllerEditedImage];
     [self updateDisplay];
 }

 -(void)updateDisplay {
     self.imageView.image = self.image;
     self.imageView.hidden = NO;
     [self.imageView reloadInputViews];
} 
```

我`self.imageView`的显示正常。但是里面没有任何图像。有我的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:05:40.247

如果您只是从图库中挑选图像，那么`didFinishPickingMediaWithInfo`方法中的代码行应该是：

```
self.image = [info objectForKey:UIImagePickerControllerOriginalImage]; 
```

您也可以从方法中更新 imageView，如下所示：

```
self.imageView.image = [info objectForKey:UIImagePickerControllerOriginalImage]; 
```

我就是这样做的：

```
- (void)viewDidLoad {
  [super viewDidLoad];
  picker = [[UIImagePickerController alloc] init];
  picker.delegate = self;
  imagePickerPopover = [[UIPopoverController alloc] initWithContentViewController:picker];

}

- (IBAction)getPhoto:(id)sender {

if(sender == choosePhotoButton) {
   picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
   [imagePickerPopover presentPopoverFromBarButtonItem:choosePhotoButton permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
}
}

    - (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
        [imagePickerPopover dismissPopoverAnimated:YES];
        imageViewer.image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];

    } 
```

# jquery - 需要切换使用 ajax 动态添加的表行

> ID：11747102
> 
> 赞同：0
> 
> 时间：2012-07-31T19:00:03.317
> 
> 标签：jquery, html

每次我单击链接时，它都会在它所在的当前行之后添加一个表格行，成功

```
$("#row"+id+"").after("<tr class='more-info' id='open"+id+"'><td colspan='13' class='mbg'>"+ html +"</td></tr>"); 
```

每次我单击该链接时，它都会添加另一行，其中包含相同的确切信息。当我第二次单击它时，我想要它做的是隐藏该行。

我认为附加 .slideToggle() （如下）会起作用，但事实并非如此。

```
$("#row"+id+"").after("<tr class='more-info' id='open"+id+"'><td colspan='13' class='mbg'>"+ html +"</td></tr>").slideToggle(); 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:10:42.410

链接不会做任何事情，因为您没有选择创建的元素。您可以做的是选择下一个`tr`元素并隐藏。我猜你可能也不想再创建一行。

```
.click(function(){
    if ($("#row" + id ).next('#open'+id).length > 0) {   // <-- check if there is a next row
        $("#row" + id ).next('#open'+id).slideToggle(); // <-- if there is just toggle next row
    } else {
        $("#row" + id + "").after("<tr class='more-info' id='open" + id + "'><td colspan='13' class='mbg'>testing</td></tr>");
        // else add new row
    }
}); 
```

编辑：

1.  ID 作为数字不是有效的 HTML。
2.  ID 必须是唯一的

我修改了上面的代码以检查下一个带有 open 的 id，它在这个小提琴中工作正常。我没有更改您的任何 html 代码，但我建议您修复您的 ID。

[http://jsfiddle.net/5Zpej/](http://jsfiddle.net/5Zpej/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T19:15:58.360

这是一个示例，说明如何在单击时使对象“slideToggle”-able：

```
$("#idToHide").click(function(){
   $(this).slideToggle();
}); 
```

说明：首先您需要附加一个点击处理程序。你可以做这个jQuery的点击功能。点击处理程序可以访问被点击的元素`this`。要隐藏元素，只需使用 jQuery 选择它`$(this)`——然后选择`slideToggle()`它。

例子：[小提琴](http://jsfiddle.net/EtPR8/)

# c# - .NET MVC - 为 jPlayer 返回视频文件

> ID：11747105
> 
> 赞同：2
> 
> 时间：2012-07-31T19:00:10.123
> 
> 标签：c#, asp.net-mvc, jquery, mp4

我有两种方法，第一种返回视频文件，另一种返回缩略图。

```
 public ActionResult Video(string id)
    {
        UserVideo videoEntity = AccountBasicEntity.GetUserVideoWithID(id);

        string videoPath = ConfigurationManager.AppSettings["VideoPath"] + videoEntity.VideoFileName;

        return File(videoPath, "video/mp4");
    }

    public ActionResult Thumb(string id)
    {
        UserVideo videoEntity = AccountBasicEntity.GetUserVideoWithID(id);

        string thumbPath = ConfigurationManager.AppSettings["ThumbsPath"] + videoEntity.PreviewImageFileName;

        return File(thumbPath, "image/jpg");
    } 
```

我可以访问网址

```
http://localhost/media/video/GTt-b2DcEG ( returns video file )
http://localhost/media/thumb/GTt-b2DcEG ( returns image file ) 
```

该方法工作正常，返回图像文件。但是另一个不起作用，浏览器（chrome）不播放或jPlayer不播放视频文件但是浏览器或jplayer显示缩略图。我调试过，路径没问题。

视频路径为：C:\Web\data\videos\GTt-b2DcEG.mp4 图片路径为：C:\Web\data\thumbs\GTt-b2DcEG.jpg

我错过了什么吗？在这种情况下，提供基于 ajax 的视频播放器的最佳方式是什么？

谢谢。

客户端 ：

```
 <!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />

<!-- Website Design By: www.happyworm.com -->
<title>Demo : jPlayer as a video player</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="skin/pink.flag/jplayer.pink.flag.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.jplayer.min.js"></script>
<script type="text/javascript">
//<![CDATA[
$(document).ready(function(){

    $("#jquery_jplayer_1").jPlayer({
        ready: function () {
            $(this).jPlayer("setMedia", {
                m4v: "http://localhost/media/video/GTt-b2DcEG",
                poster: "http://localhost/media/thumb/GTt-b2DcEG"
            });
        },
        swfPath: "js",
        supplied: "webmv, ogv, m4v",
        size: {
            width: "640px",
            height: "360px",
            cssClass: "jp-video-360p"
        }
    });

});
//]]>
</script>
</head>
<body>
        <div id="jp_container_1" class="jp-video jp-video-360p">
            <div class="jp-type-single">
                <div id="jquery_jplayer_1" class="jp-jplayer"></div>
                <div class="jp-gui">
                    <div class="jp-video-play">
                        <a href="javascript:;" class="jp-video-play-icon" tabindex="1">play</a>
                    </div>
                    <div class="jp-interface">
                        <div class="jp-progress">
                            <div class="jp-seek-bar">
                                <div class="jp-play-bar"></div>
                            </div>
                        </div>
                        <div class="jp-current-time"></div>
                        <div class="jp-duration"></div>
                        <div class="jp-title">
                            <ul>
                                <li>Big Buck Bunny Trailer</li>
                            </ul>
                        </div>
                        <div class="jp-controls-holder">
                            <ul class="jp-controls">
                                <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
                                <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
                                <li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>
                                <li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>
                                <li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>
                                <li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>
                            </ul>
                            <div class="jp-volume-bar">
                                <div class="jp-volume-bar-value"></div>
                            </div>

                            <ul class="jp-toggles">
                                <li><a href="javascript:;" class="jp-full-screen" tabindex="1" title="full screen">full screen</a></li>
                                <li><a href="javascript:;" class="jp-restore-screen" tabindex="1" title="restore screen">restore screen</a></li>
                                <li><a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a></li>
                                <li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="jp-no-solution">
                    <span>Update Required</span>
                    To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
                </div>
            </div>
        </div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:04:03.823

您没有提到您已经完成了哪些故障排除。

当我过去遇到这个问题时，我检查的第一件事是你在 IIS 中添加了 mime 类型。默认情况下，IIS 6 和 7 不会为未配置的 mime 类型提供内容。

[如何使用 IIS7 Web.config 添加 MIME 类型](http://blogs.iis.net/bills/archive/2008/03/25/how-to-add-mime-types-with-iis7-web-config.aspx)

接下来是用于对 mp4 进行编码的编解码器可由 jPlayer 播放。

[jPlayer 媒体编码](http://jplayer.org/latest/developer-guide/#jPlayer-media-encoding)

# html - MVC3 如何从@Html.ValidationMessageFor<> 方法的返回字符串中获取innerHtml？

> ID：11747108
> 
> 赞同：0
> 
> 时间：2012-07-31T19:00:24.040
> 
> 标签：html, asp.net-mvc-3, model-view-controller, validation

我想在 html 框的工具提示中显示验证消息摘要。像这样的东西，

```
@Html.TextBoxFor(m => m.Contract.PrimaryContact.FirstName, new { @class = "quarter", title = @Html.ValidationMessageFor(m => m.Contract.PrimaryContact.FirstName) }) 
```

我该怎么做？截至目前，我在标题中看到了验证消息的整个 html 标记。有没有办法让我只看到验证消息？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:04:48.203

恐怕唯一正确的方法是重新实现验证辅助方法。幸运的是，这并不难，而且源代码可以在线获得。

# .net - 我的项目的代码指标

> ID：11747109
> 
> 赞同：2
> 
> 时间：2012-07-31T19:00:29.820
> 
> 标签：.net, metrics, code-metrics, code-complete

我想要一个进入我的 TFS 的程序，每周对不同的指标（如代码复杂性、代码行、代码覆盖率和其他内容）进行快照，并将它们显示在图表中。

看到个别程序员的东西也很酷，尽管我并不担心这一点，因为我认为在这个级别进行测量实际上对团队有害。

我不可能是第一个想到这一点的人。这种事情存在吗？

我将首先提到似乎具有历史 C# 代码指标的 Sonar。应该还有更多？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T06:47:29.227

您已经自己回答了您的问题 :) 声纳就是您要寻找的 :) 对于基于开发人员的指标，您还可以查看商业插件[http://www.sonarsource.com/products/plugins/developer-tools/开发者驾驶舱/](http://www.sonarsource.com/products/plugins/developer-tools/developer-cockpit/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:50:12.530

事实上，还有更多，还有工具[NDepend](http://www.ndepend.com/)。*免责声明我是该工具的开发者之一*。

NDepend在 .NET 代码库上收集了[80 多个代码指标，包括](http://www.ndepend.com/Metrics.aspx)[代码复杂性](http://www.ndepend.com/Metrics.aspx#CC)、[代码行数](http://www.ndepend.com/Metrics.aspx#NbLinesOfCode)、[代码覆盖率](http://www.ndepend.com/Coverage.aspx)……创建自己的代码指标非常容易，例如著名的[CRAP 指标](http://www.ndepend.com/DefaultRules/webframe.html?Q_C.R.A.P_method_code_metric.html)。

BuildMachine 版本可以插入到您的[TFS 构建过程](http://www.ndepend.com/Doc_CI_TFS.aspx)中，并生成 HTML+javascript 报告（请参阅[此处生成的一些示例报告](http://www.ndepend.com/SampleReports.aspx)）。

![在此处输入图像描述](../Images/97a744246b50598b4bdd9598d9b4cc1a.png)

[提出了200 条默认代码规则，并且由于](http://www.ndepend.com/DefaultRules/webframe.html)[LINQ (CQLinq) 上](http://www.ndepend.com/Features.aspx#CQL)的代码查询，很容易创建自己的代码规则。[可以在HTML+javascript 报告](http://www.ndepend.com/Doc_CI_Report.aspx#CQLRule)或/和[Visual Studio](http://www.ndepend.com/Doc_VS_CQL.aspx)中验证代码规则。代码规则可以处理代码度量、代码依赖、OOP 设计、代码差异、命名约定……

在 Developer 版本中，NDepend 100% 集成在 Visual Studio 2012、2010 和 2008 中。它可以生成实时[依赖图](http://www.ndepend.com/Doc_VS_Arch.aspx)、[依赖矩阵](http://www.ndepend.com/Doc_Matrix.aspx)和[代码度量树图](http://www.ndepend.com/Doc_Treemap.aspx)。最后，该工具还有一些处理[代码差异](http://www.ndepend.com/Doc_VS_Diff.aspx)的工具。

![在此处输入图像描述](../Images/f8c27305a95f4eff89c208f09e21440d.png)

# c# - 工具提示内显示的 Silverlight 数据绑定图像

> ID：11747110
> 
> 赞同：0
> 
> 时间：2012-07-31T19:00:33.493
> 
> 标签：c#, asp.net, silverlight, tooltip

这个问题是这个问题的后续。[来自数据网格工具提示的silverlight 4图像预览](https://stackoverflow.com/questions/11726428/silverlight-4-image-preview-from-tooltip-on-datagrid)

这是我的新问题，我一直在尝试获取一个工具提示，以弹出在我的 silverlight 应用程序的搜索结果中返回的文档的预览。我已经链接了图像，它提供了正确的图像，但是它在一个新的或单独的窗口中打开，而不是工具提示本身。这是我背后的代码..

```
private void PPTImageToolTip(object sender, RoutedEventArgs e)
    {
        string docname = ((FrameworkElement)sender).DataContext.ToString();
        string baseUri = "http://localhost:58904/ShowDocument.aspx?DocumentName=" + docname + "-ppt" + "&type=jpg";
        var hostingWindow = HtmlPage.Window;
        hostingWindow.Navigate(new Uri(baseUri, UriKind.Absolute), "_parent");
    } 
```

这设置为转到处理此操作的我的 ShowDocument.aspx 页面..

```
else if (File.Exists(strFullFilePath) && sType == "jpg")
                    {
                        fileStream = new FileStream(strFullFilePath, FileMode.Open, FileAccess.Read);
                        buffer = new byte[fileStream.Length];
                        fileStream.Read(buffer, 0, Convert.ToInt32(fileStream.Length));
                        try
                        {
                            Response.ClearHeaders();
                            Response.ClearContent();
                            Response.ContentType = "image/jpeg";
                            Response.BinaryWrite(buffer);

                        }
                        catch (Exception ex)
                        { }
                    } 
```

我意识到它转移到另一个“页面”，但我无法让该图像或该页面显示在工具提示本身中，而不是填充新窗口。这是因为我的 HtmlPage.window 代码吗？还是因为 ShowDocument.aspx 页面已经被调用而无法回调？是否有可行的解决方案让图像填充到工具提示中？或者有没有办法repsonse.redirect 到保存工具提示的silverlight 控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:04:54.963

如果您的目标是在工具提示内（而不是在 html 窗口中）显示图像，则以下内容将起作用：

首先是网络服务（ashx）

```
public class MyHandler : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        String fileName = @"c:\PathToMyFile\Myfile.jpg";
        using (FileStream fileStream = new FileStream(fileName, FileMode.Open, FileAccess.Read))
        {
            var buffer = new byte[fileStream.Length];
            fileStream.Read(buffer, 0, Convert.ToInt32(fileStream.Length));
            context.Response.ContentType = "image/jpeg";
            context.Response.BinaryWrite(buffer);
        }
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

然后从 Silverlight 客户端调用服务：

```
public partial class MainPage : UserControl
{
    public MainPage()
    {
        InitializeComponent();
        WebClient client = new WebClient();
        client.OpenReadCompleted += (s, e) =>
            {
                using (Stream stream = e.Result)
                {
                    BitmapImage img = new BitmapImage();
                    img.SetSource(stream);

                    // Update MyImage.Source. Use the Dispatcher to ensure this happens on the UI Thread
                    Dispatcher.BeginInvoke(() =>
                        {
                            MyImage.Source = img;
                        });

                }
            };
        client.OpenReadAsync(new Uri(String.Format(BaseURL + "MyHandler.ashx")));
    }
} 
```

最后是视图的 xaml：

```
<Border x:Name="MyBorder" Width="100" Height="100" Background="Black">
        <ToolTipService.ToolTip>
            <Image x:Name="MyImage" />
        </ToolTipService.ToolTip>

</Border> 
```

# php - 如何从 SQL 函数结果中获取带有 ID 列表的帖子？

> ID：11747113
> 
> 赞同：0
> 
> 时间：2012-07-31T19:00:43.710
> 
> 标签：php, wordpress

我是 PHP 新手，我需要你的建议。谢谢你的帮助！

我正在使用 PHP，我只需要获取带有图片附件的帖子。我写了sql函数：

```
global $wpdb;
$postsID = $wpdb->get_results
("
  SELECT ID
  FROM $wpdb->posts
  WHERE
    post_status = 'publish'
    AND
      ID IN (
    SELECT DISTINCT post_parent
    FROM $wpdb->posts
    WHERE
      post_parent > 0
    AND
      post_type = 'attachment'
    AND
      post_mime_type IN ('image/jpeg', 'image/png')
      )
    ORDER BY post_date DESC
    LIMIT 0 , 5
"); 
```

现在我想使用这个函数的结果来处理 get_posts("p= results of function");

如何通过调用此函数连接结果？我不明白如何将参数传递给函数。

谢谢！

更新：据我了解，get_posts 不允许我传递 ID 列表，我只能传递一个。如果我有 ID 列表，如何获取帖子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:26:54.160

如果您只想检查此函数返回的内容，只需在执行查询后包含此行：

```
var_dump($postsID); 
```

如果您想对数据*做某事*，可以通过多种方式完成，但这取决于您到底想做什么；这个论坛有太多的选择。

**更新：**根据下面评论中的对话，您似乎想将结果的键 ( `$postsID`) 传递给 $wpdb->get_posts() 函数。

如果`get_posts()`只是将唯一 ID 作为参数，那么您必须执行以下操作：

```
// I'm assuming a simple key=>value pair in your array. Modify your code as needed
foreach($postsID as $id) {
    $result = $wpdb->get_posts($id);

    // code that will do "something" with $result
} 
```

**更新 2：**因为`$postsID`看起来像这样： array(5) { [0]=> object(stdClass)#4015 (23) { ["ID"]=> string(3) "779" ["post_author"]=> string (2) "12" ["post_date"]=> 字符串(19) "2012-07-27 08:53:22" ["post_date_gmt"]=> 字符串(19) "2012-07-27 08:53: 22" ["post_content"]=> string(356) "Text" ["post_title"]=> string(58) "Продам 2-к квартиру Русское Поле" ["post_excerpt"]=> string(0) "" [ "post_status"]=> string(7) "publish" ["comment_status"]=> string(4) "open" ["ping_status"]=> string(4) "open" ["post_password"]=> string( 0）“”[“post_name”]=>字符串（162）“%d0%bf%d1%80%

您将需要从每个对象中获取 ID 并将其插入临时数组并将其传递给`get_posts()`：

```
// $args = array( 'post__in' => array(779,772,768,761,716) ); 
$tempArr = array();
foreach ($postsID as $obj) {
    $tempArr[] = $obj->id;
}

$args = array('post__in' => $tempArr);
$result = $wpdb->get_posts($args); 
```

# c# - 具有 4 个表的复杂 linq-to-sql 连接：应该有多少个 where 子句？

> ID：11747114
> 
> 赞同：1
> 
> 时间：2012-07-31T19:00:48.897
> 
> 标签：c#, linq-to-sql

我正在编写一个连接 4 个表的 linq-to-sql 查询。我有这样的事情：

```
var MyQuery = from a in MyDC.Table1
              from b in MyDC.Table2
              from c in MyDC.Table3
              from d in MyDC.Table4
              where ..... 
```

我的问题是关于`where`条款的。我可以这样写 where 子句：

```
 where a.PropX == b.PropY && b.PropX == c.PropZ && .... 
```

或像这样的多个子句：

```
 where a.PropX == b.PropY
   where b.PropX == c.PropZ
   ... 
```

选择一个或另一个选项会有什么不同吗？

感谢您的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T19:07:32.613

我不喜欢以上任何一种；相反，我会遵循 SQL 语法，它不会像这样隐藏查询的意图：

```
var query  from a in MyDC.Table1 
           join b in MyDC.Table2 on a.Property1 equals b.Property2
           join c in MyDC.Table3 on b.Property1 equals c.Property5
           join d in MyDC.Table4 on c.Property2 equals d.Property1
select ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:58:23.403

你不应该这样做。您的代码将生成所有数据源的笛卡尔连接（乘法），然后根据您的条件对其进行过滤。相反，您应该使用 Icarus 建议的简单连接。

（我了解您的困惑来自哪里：在某些 SQL 方言中，您可以在`WHERE`或 中编写连接条件`JOIN`。但 LINQ 并非如此。）

# android - 如何知道正在创建什么 ActionBar.Tab

> ID：11747118
> 
> 赞同：2
> 
> 时间：2012-07-31T19:01:02.463
> 
> 标签：android, tabs, android-actionbar, fragment

我将相同的 Fragment 类放在五个选项卡中（选项卡是在 ActionBar 中创建的）。他们的行为相似，但我需要知道在后台创建了什么选项卡，因为我将对 DB 提出不同的请求。我不需要知道哪个选项卡处于活动状态。我意识到 Dalvik 虚拟机每次只创建 2 个选项卡，即使有 5 个。例如：我点击Tab2，系统为Tab3 执行代码但它没有显示它并破坏Tab1。我的问题是检测在后台创建的选项卡。

谢谢

马塞洛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:55:45.123

您可以为每个选项卡编写一个日志文件因此您可以轻松找到我的朋友。

您可以在 logcat 中轻松查看该选项卡执行的所有过程。

# c# - C# 在 HP Quality Center 中插入新需求 - AccessViolationException

> ID：11747119
> 
> 赞同：1
> 
> 时间：2012-07-31T19:01:07.493
> 
> 标签：c#, access-violation, hp-quality-center

尝试创建一个原型应用程序，该应用程序将向 HPQC 11 发布新需求。

我设法建立了稳固的连接，但是当我尝试添加空白要求时，我得到了一个 AccessViolationException。

```
TDConnectionClass td = HPQC_Connect(); //Open a connection
ReqFactory myReqFactory = (ReqFactory)td.ReqFactory; //Start up the Requirments Factory.
Req myReq = (Req)myReqFactory.AddItem(DBNull.Value); //Create a new blank requirement (AccessViolationException)
myReq.Name = "New Requirement"; //Populate Name
myReq.TypeId = "1"; // Populate Type: 0=Business, 1=Folder, 2=Functional, 3=Group, 4=Testing
myReq.ParentId = 0; // Populate Parent ID
myReq.Post(); // Submit 
```

有任何想法吗？我对 C# 和一般编码还很陌生，所以最好假设我什么都不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:14:55.977

在完成了一些重要的工作后，以下代码可以正常工作：

```
private void HPQC_Req_Create_Click()
    {
        TDConnection td = null;
        try
        {
            td = new TDConnection();
            td.InitConnectionEx("server");
            td.Login(HPQCUIDTextbox.Text.ToString(), HPQCPassTextbox.Text.ToString());
            Console.WriteLine(HPQCPassTextbox.Text.ToString());
            td.Connect("DEFAULT", "Test_Automation_Playground");

            bool check = td.LoggedIn;
            if (check == true)
            {
                Console.WriteLine("Connected.");
                HPQCStatus.Text = "Connected.";
            }

            ReqFactory myReqFactory = (ReqFactory)td.ReqFactory;
            Req myReq = (Req)myReqFactory.AddItem(-1); //Error Here
            myReq.Name = "New Requirement 1";
            myReq.TypeId = "1"; // 0=Business, 1=Folder, 2=Functional, 3=group, 4=testing 
            myReq.ParentId = 0;
            myReq.Post();

            Console.WriteLine("Requirement Created.");
            HPQCStatus.Text = "Requirement Created.";

            try
            {
                td.Logout();
                td.Disconnect();
                td = null;
            }
            catch
            { }
        }
        catch (Exception ex)
        {
            Console.WriteLine("[Error] " + ex);
            try
            {
                td.Logout();
                td.Disconnect();
                td = null;
            }
            catch
            { }
        } 
```

此代码要求将服务器修补到 QC 11 Patch 9（内部版本 11.0.0.7274）才能工作。以前的版本会导致错误，最明显的是问题中的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:20:17.893

ALM 中的需求是分层的，在创建需求时，您需要在某些现有需求下创建它。

您要做的是获取根需求，它的 Id 应该是 0 或 1，您可以在 ALM UI 中检查它。

然后从该 Root 要求的属性中获取 ReqFactory 的实例。然后将您的要求添加到该工厂。

另外，请确保您正在使用 STA 而不是 MTA 线程。

# sqlite - IntelliJ下SQLite JDBC驱动的问题

> ID：11747124
> 
> 赞同：2
> 
> 时间：2012-07-31T19:01:23.243
> 
> 标签：sqlite, jdbc, intellij-idea

所以，我遇到了一个问题，类似于这个问题，但是在 RHEL 上使用 JBoss 运行 WebApplication：[如何安装 SQLite JDBC 驱动程序？](https://stackoverflow.com/questions/9348157/how-to-install-sqlite-jdbc-driver)但我找不到解决方案。

我的问题是：如果我使用 IntelliJ 构建代码，我可以在本地（Windows PC）运行它，但不能在 RHEL 服务器下运行它。它抛出：“java.sql.SQLException：RouteToMyDataBase”

但是，如果我使用 NetBeans 构建我的代码，它会在两个操作系统（RHEL 和 Windows）下运行，所以，我认为我的代码根本没有问题，我认为这与我的类路径或我构建我的方式有关IntelliJ 的“工件”。

我尝试按照此处其他地方的建议将我的库复制到 /opt/jbosseap51/jboss-as/server/default/lib/ 中（我丢失了问题）

请不要告诉我用 netbeans 构建我的项目，因为它是一个使用 intelliJ 构建的巨大应用程序，并且很难迁移所有项目。它工作正常，但最近在通过 SVN 将我们的项目迁移到不同的机器时发生了这种情况。

¿ 还有什么我必须配置的吗？

# python - Python numpy：将字符串转换为numpy数组

> ID：11747125
> 
> 赞同：5
> 
> 时间：2012-07-31T19:01:23.087
> 
> 标签：python, vector, numpy, trigonometry

我有以下我放在一起的字符串：

```
v1fColor = '2,4,14,5,0,0,0,0,0,0,0,0,0,0,12,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,6,0,0,0,0,1,0,0,0,0,0,0,0,0,0,20,9,0,0,0,2,2,0,0,0,0,0,0,0,0,0,13,6,0,0,0,1,0,0,0,0,0,0,0,0,0,0,10,8,0,0,0,1,2,0,0,0,0,0,0,0,0,0,17,17,0,0,0,3,6,0,0,0,0,0,0,0,0,0,7,5,0,0,0,2,0,0,0,0,0,0,0,0,0,0,4,3,0,0,0,1,1,0,0,0,0,0,0,0,0,0,6,6,0,0,0,2,3' 
```

我将其视为矢量：长话短说，它是图像直方图的前色：

我有以下 lambda 函数来计算两个图像的余弦相似度，所以我尝试将其转换为 numpy.array 但我失败了：

这是我的 lambda 函数

```
import numpy as NP
import numpy.linalg as LA
cx = lambda a, b : round(NP.inner(a, b)/(LA.norm(a)*LA.norm(b)), 3) 
```

所以我尝试了以下方法将此字符串转换为 numpy 数组：

```
v1fColor = NP.array([float(v1fColor)], dtype=NP.uint8) 
```

但我最终得到以下错误：

```
 v1fColor = NP.array([float(v1fColor)], dtype=NP.uint8)
ValueError: invalid literal for float(): 2,4,14,5,0,0,0,0,0,0,0,0,0,0,12,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,6,0,0,0,0,1,0,0,0,0,0,0,0,0,0,20,9,0,0,0,2,2,0,0,0,0,0,0,0,0,0,13,6,0,0,0,1,0,0,0,0,0,0,0,0,0,0,10,8,0,0,0,1,2,0,0,0,0,0,0,0,0,0,17,17, 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T19:03:40.530

您必须先用逗号分割字符串：

```
NP.array(v1fColor.split(","), dtype=NP.uint8) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T19:37:52.580

您可以在不使用 python 字符串方法的情况下执行此操作 - 尝试[`numpy.fromstring`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fromstring.html)：

```
>>> numpy.fromstring(v1fColor, dtype='uint8', sep=',')
array([ 2,  4, 14,  5,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 12,  4,  0,
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 15,  6,  0,  0,
        0,  0,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0, 20,  9,  0,  0,  0,
        2,  2,  0,  0,  0,  0,  0,  0,  0,  0,  0, 13,  6,  0,  0,  0,  1,
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 10,  8,  0,  0,  0,  1,  2,
        0,  0,  0,  0,  0,  0,  0,  0,  0, 17, 17,  0,  0,  0,  3,  6,  0,
        0,  0,  0,  0,  0,  0,  0,  0,  7,  5,  0,  0,  0,  2,  0,  0,  0,
        0,  0,  0,  0,  0,  0,  0,  4,  3,  0,  0,  0,  1,  1,  0,  0,  0,
        0,  0,  0,  0,  0,  0,  6,  6,  0,  0,  0,  2,  3], dtype=uint8) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-31T19:03:57.703

你可以这样做：

```
lst = v1fColor.split(',')  #create a list of strings, splitting on the commas.
v1fColor = NP.array( lst, dtype=NP.uint8 ) #numpy converts the strings.  Nifty! 
```

或更简洁地说：

```
v1fColor = NP.array( v1fColor.split(','), dtype=NP.uint8 ) 
```

请注意，这样做更习惯一些：

```
import numpy as np 
```

相比`import numpy as NP`

**编辑**

就在今天，我了解了`numpy.fromstring`也可以用来解决这个问题的函数：

```
NP.fromstring( "1,2,3" , sep="," , dtype=NP.uint8 ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T18:03:32.843

我正在写这个答案，所以如果将来有任何参考资料：我不确定在这种情况下什么是正确的解决方案，但我认为 @David Robinson 最初发布的内容是正确的答案，原因有一个：余弦相似度值不能大于一个，当我使用`NP.array(v1fColor.split(","), dtype=NP.uint8)`选项时，我得到两个向量之间余弦相似度高于 1.0 的 strage 值。

所以我写了一个简单的示例代码来试试：

```
import numpy as np
import numpy.linalg as LA

def testFunction():
    value1 = '2,3,0,80,125,15,5,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0'
    value2 = '2,137,0,4,96,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0'
    cx = lambda a, b : round(np.inner(a, b)/(LA.norm(a)*LA.norm(b)), 3)
    #v1fColor = np.array(map(int,value1.split(',')))
    #v2fColor =  np.array(map(int,value2.split(',')))
    v1fColor = np.array( value1.split(','), dtype=np.uint8 )
    v2fColor = np.array( value2.split(','), dtype=np.uint8 )
    print v1fColor
    print v2fColor
    cosineValue = cx(v1fColor, v2fColor)
    print cosineValue

if __name__ == '__main__':
    testFunction() 
```

如果您运行此代码，您应该得到以下输出： ![在此处输入图像描述](../Images/255cdb5b97e8400b4d961b9f9735bc73.png)

不允许取消注释两行并使用 David 的初始解决方案运行代码：

```
v1fColor = np.array(map(int,value1.split(',')))
v2fColor =  np.array(map(int,value2.split(','))) 
```

请记住，正如您在上面看到的那样，余弦相似度值高于 1.0，但是当我们使用 map 函数并使用 int 强制转换时，我们得到以下值，这是正确的值：

![在此处输入图像描述](../Images/577957a13345633e06f750b97194df32.png)

幸运的是，我正在绘制我最初得到的值，并且一些余弦值高于 1.0，我获取了这些向量的输出并在 python 控制台中手动输入它，并通过我的 lambda 函数发送它并得到了正确的答案所以我很困惑。然后我写了测试脚本来看看发生了什么，很高兴我发现了这个问题。我不是 python 专家，无法准确地用两种方法给出两个不同的答案。但我把它留给@David Robinson 或@mgilson。

# jquery - 将动态参数传递给 jquery api 调用

> ID：11747127
> 
> 赞同：1
> 
> 时间：2012-07-31T19:01:27.950
> 
> 标签：jquery, api

抱歉，如果我根本无法正确搜索...

我正在尝试使用从 aJax/json 函数返回的值。我需要在 API 调用的参数中使用这些值。当它只是一个值时我可以做到，但是当逗号在那里时，我无法让它工作。

回报是这样的：

```
{
    "rawUpdates": [{
        "id": "#qty-8007-224",
        "api": "css",
        "params": "'background-color','red'"
    }]
} 
```

这是我正在使用的函数（在执行单个参数时有效，即 html 和值）：

```
function parseRawUpdates(call) {
    $.each(call, function(key,json) {
        $(json.id)[json.api](json.params);  
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:07:56.027

```
function parseRawUpdates(call) {
    $.each(call, function(key,json) {
        var params=[],tparams=json.params.split(",");
        for(var k=0;k<tparams.length;k++){
          params[k]=tparams[k].replace(/^'/,"").replace(/'$/,"");
        }
        $.fn.[json.api].apply($(json.id),(params));
    });
} 
```

我想不出一个更优雅的解决方案来剥离开始/结束引号的 json.params 部分。[（在此处](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)阅读有关 Function.apply的更多信息）

# c# - Helper 类中的参考会话

> ID：11747132
> 
> 赞同：2
> 
> 时间：2012-07-31T19:01:44.050
> 
> 标签：c#

所以我有一个从互联网上“借来”的方法，我在我的许多页面上使用它来处理网格列的排序。

```
 private string GetSortDirection(string column)
    {

        // By default, set the sort direction to ascending.
        string sortDirection = "ASC";

        // Retrieve the last column that was sorted.
        string sortExpression = ViewState["SortExpression"] as string;

        if (sortExpression != null)
        {
            // Check if the same column is being sorted.
            // Otherwise, the default value can be returned.
            if (sortExpression == column)
            {
                string lastDirection = ViewState["SortDirection"] as string;
                if ((lastDirection != null) && (lastDirection == "ASC"))
                {
                    sortDirection = "DESC";
                }
            }
        }

        // Save new values in ViewState.
        ViewState["SortDirection"] = sortDirection;
        ViewState["SortExpression"] = column;

        return sortDirection;
    } 
```

现在它工作得很好，但是，我必须将它复制到我想从中调用它的每个页面，因为它引用了视图状态。所以我想将它移动到我的助手类并将其存储在会话状态中，但是，我不能在助手类中引用任何状态。

他们有什么方法可以从帮助类访问会话吗？我可以通过引用传递会话状态吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:07:14.730

如果我正确理解了这个问题，那么您正在寻找访问`ViewState`或`Session`从一个不是页面的类。

如果是这样，您可以使用`HttpContext.Current.Session`，或者，您应该能够将类型转换`HttpContext.Current.CurrentHandler`为 type `Page`，然后访问`ViewState`.

或者，您总是可以将您的代码放在一个基类中，您的所有页面都将从该基类继承，而不是从`System.Web.UI.Page`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:06:46.103

不，您不使用 Session，因为如果您测试 Session，您有用户 1 选择 One Columns 1，并且他更改页面，他将具有相同的选定列，这是问题，因为在使用初始化页面时，他必须有初始状态和无选择状态。

从技术上讲，您可以使用 Session 但对我来说功能上不推荐

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T19:06:59.720

您可以`HttpContext.Current.Session`在任何引用 System.Web 并在 Web 进程中执行的程序集中使用。

但是，像在 Session 中那样放置通用（即在多个地方重用，非特定键）值会导致各种麻烦。例如，如果用户在同一个会话中打开两个浏览器窗口怎么办？

我会建议一个基类//`Page`类，或者一个使用页面数据初始化的辅助类。您的代码示例看起来更像是属于与控件相关的基类。`Control``UserControl`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T19:12:32.093

您可以使用 System.Web.HttpContext.Current 但是您可能会遇到一些使用这样的会话状态的同步问题。您可以将 GetSortDirection 方法作为扩展方法添加到页面，这可能更容易完成。

# objective-c - 构建或组合我自己的积木或小鬼

> ID：11747135
> 
> 赞同：0
> 
> 时间：2012-07-31T19:01:50.397
> 
> 标签：objective-c, objective-c-blocks, imp

### **问题**

Objective-c 是否有任何功能可以让我`IMP`即时组合自己的块或 s？

我的意思是让我将任意代码片段链接到一个块中（然后执行`imp_implementationWithBlock`），或者直接组装`IMP`起来。

### **伪代码**

```
(IMP) linkExistingBlock:LBExistingBlock With:^{

} 
```

或者

```
(IMP) linkExistingBlock:LBExistingBlock With:LBAnotherBlock 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:29:07.113

如果您有两个块，只需调用它们。此外，块是对象，[可以放入`NSArray`s](https://stackoverflow.com/questions/11676840/an-array-of-blocks/11676900#11676900)中。然后你可以枚举数组并调用它的内容。

```
for( dispatch_block_t block in arrayOfBlocks ){
    block();
} 
```

或者

```
[arrayOfBlocks enumerateObjectsUsingBlock:^(dispatch_block_t block, NSUInteger idx, BOOL *stop) {
        block();
}]; 
```

如果你有`IMP`s，那么它们只是函数指针——它们可以放入 C 数组中，或者包装在`NSValue`s 中并放入 Cocoa 数组中。您只需要在尝试调用它们之前投射它们。

对于您的示例方法签名：

```
- (dispatch_block_t)blockLinkingExistingBlock: (dispatch_block_t)firstBlock withBlock: (dispatch_block_t)secondBlock
{
    dispatch_block_t linker = ^{ firstBlock(); secondBlock();};
    // if compiling with ARC
    return linker;
    // otherwise
    // return [[linker copy] autorelease];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:12:29.613

没有内置任何内容，但您可以创建一个块，通过调用它们来简单地执行一系列块。

# ruby-on-rails - 升级到 3.2 的应用程序出现样式表 application.css 的路由错误

> ID：11747138
> 
> 赞同：1
> 
> 时间：2012-07-31T19:01:57.767
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我处于一个奇怪的境地。我有一个在 3.1 中创建的应用程序。它最近升级到 Rails 3.2.6，我第一次开始使用布局和视图。（别问。我一直在控制台模式下使用该应用程序并作为数据库管理器）

现在我有一个控制器和一些模型，当我访问默认页面时，一切都很好，但我在日志中看到以下错误：

```
Started GET "/stylesheets/application.css" for 127.0.0.1 at 2012-07-31 13:54:45 -0500

ActionController::RoutingError (No route matches [GET] "/stylesheets/application.css"):
  actionpack (3.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.6) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.6) lib/rails/rack/logger.rb:16:in `call' 
```

'app/assets/stylesheets' 中有一个 application.css 文件。它目前是空白的。

我见过很多其他人问这个问题，但似乎没有一个解决方案/答案适用于我，虽然我不能说为什么。这是我的 layout/application.html.erb 文件的样子：

```
<!DOCTYPE html>
<html>
<head>
    <% if current_user %>
        <title>MY TITLE - <%= current_user.full_name %></title>
    <% else %>
        <title>MY TITLE</title>
    <% end %>
    <%= stylesheet_link_tag    "application", :media => "all" %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
</head>
<body>
<div id="nav_div">
    <% if current_user %>
      Logged in as <%= current_user.name %> (<%= current_user.email %>).
      <%= link_to "Log Out", logout_path %>
    <% else %>
      <%= link_to "Sign Up", signup_path %> or
      <%= link_to "Log In", login_path %>
    <% end %>
</div>

<div id="flash_div">
    <% if flash[:alert] %>
      <p class="flash-error"><%= flash[:alert] %></p>
    <% end %>
    <% if flash[:notice] %>
      <p class="flash-notice"><%= flash[:notice] %></p>
    <% end %>   
</div>

<%= yield %>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T17:29:44.427

检查您是否在 application.rb 中打开了管道：

```
config.assets.enabled = true
```

# ruby-on-rails - 在销毁之前检查是否找到了用户对象

> ID：11747143
> 
> 赞同：1
> 
> 时间：2012-07-31T19:02:24.980
> 
> 标签：ruby-on-rails, ruby

我正在尝试构建一个 Rails 3.2 应用程序，但在进行破坏时我有一个简单的问题。首先，我进行查找以找到我需要删除的用户，但如果找不到，我不想进行销毁。

这是我的代码，我觉得第 3 行缺少某些内容（如果@user）：

```
@user = User.find(params[:user_id])

 if @user
  @user.destroy
 else
  "User not found"
 end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:12:19.797

你也可以这样做`try`：

```
if User.find_by_id(params[:user_id]).try(:destroy)
  "User found and destroyed"
else
  "User not found or was not successfully destroyed"
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T19:07:47.460

您的代码将不起作用并引发异常，您应该这样做：

```
 @user = User.find_by_id(params[:user_id])

 if @user
   @user.destroy! #methods with bang raise an exception, I advise you to use them
   #no flash msg?
 else
   flash[:error] = "User not found"
 end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T19:09:26.617

如果找不到用户，您会得到一个异常

如果您不想要它，请执行以下操作：

```
@user = User.find_by_id(params[:user_id]) 
```

那么你的测试是正确的

# cakephp-1.3 - 在 CakePHP 2 中扩展 MySQL 数据源

> ID：11747144
> 
> 赞同：1
> 
> 时间：2012-07-31T19:02:27.197
> 
> 标签：cakephp-1.3, cakephp-2.0

我正在尝试将 CakePHP 1.3 插件移植到 CakePHP 2。

给我带来一些麻烦的是扩展 MySQL 时。

该文件位于 /app/Plugin/PluginName/Model/Datasource 并且是 PluginSource.php

扩展 mysql 的旧行是：

```
class PluginSource extends DboMysqli { ... 
```

我替换了它，因为 DboMysqli 不再可用，使用：

```
class PluginSource extends Mysql { ... 
```

但它一直给我以下错误：

```
Error: Class 'Mysql' not found 
```

请问，谁能帮我找到这个类来扩展它？我知道在哪个文件夹中，但不能从那里扩展它。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:57:55.930

通过将以下内容添加到文件顶部来通知 Cake Mysql.php 的位置：

```
App::uses('Mysql', 'Model/Datasource/Database'); 
```

# php - 用正则表达式替换 div

> ID：11747147
> 
> 赞同：0
> 
> 时间：2012-07-31T19:02:43.507
> 
> 标签：php, regex

我需要用保持相同属性的文本区域替换所有 div 的包含类“ta”和 id“ta_somenumber”。这是示例代码：

```
$html_content = '<div class="ta" id="ta_345">sometext</div><span style="...">Some text</span><--!more html--><div class="ta" id="ta_5687">sometext</div>'; 
```

这是我想要实现的目标：

```
$html_new_content = '<textarea class="ta" id="ta_345">sometext</textarea><span style="...">Some text</span><--!more html--><textarea class="ta" id="ta_5687">sometext</textarea>'; 
```

我正在尝试这个：

```
$regex1 = '#\<div class=\"ta\" id=\"(.*)\"\>(.+?)\<\/div\>#s';
$regex2 = '#\<textarea class=\"ta\" id=\"(.*)\"\>(.+?)\<\/textarea\>#s';

$result = str_replace($regex2, $regex3, $html_content); 
```

但由于某种原因，这不起作用。我尝试使用 preg_replace 但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:05:42.063

你只需要一个正则表达式，它看起来像这样：

```
$regex = '#<div class="ta" id="([^"]+)">(.+?)</div>#s';
$result = preg_replace( $regex, 
    '<textarea class="ta" id="$1">$2</textarea>', 
    $html_content
); 
```

这会找到所有`<div>`标签，在反向引用 #1 中捕获它们的 ID 属性，在反向引用 #2 中捕获它们的内容。然后，替换很简单：将 替换为`<div>`具有`<textarea>`“ta”类且 ID 和内容与原始 相同的`<div>`。

[您可以在演示](http://viper-7.com/mA1x7X)中看到它的工作原理。

# javascript - 异步 Javascript 变量覆盖

> ID：11747148
> 
> 赞同：6
> 
> 时间：2012-07-31T19:02:43.930
> 
> 标签：javascript

该代码存在一个问题，即在调用异步函数时变量会被覆盖。如何修复？

代码：

```
for (x in files) {

 asynchronousFunction(var1, var2, function(){
      console.log(x.someVaraible);
  }); 

} 
```

现在的问题是，当调用 asynchronousFunction 中的回调函数时，x.files 变量已更新为 json 数组文件中的下一个变量。我希望变量应该包含以前的值。

回调函数中的变量个数不能改变，所以不能在回调函数中发送变量名。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-31T19:13:37.457

在 javascript 中使用“本地”变量的问题在于您的变量实际上具有函数范围，而不是块范围 - 就像 Java 和 C# 等一样。

解决此问题的一种方法是使用`let`which has block scope，但目前只有 firefox 支持。

所以这段代码只能在 Firefox 中工作：

```
for (var x in files) {
  // This variable has BLOCK scope
  let file = files[x];
  asynchronousFunction(var1, var2, function(){
     console.log(file.someVariable);
  }); 
} 
```

对于其他浏览器，替代方法是使用闭包

```
for (var x in files) {
  var file = files[x];
  asynchronousFunction(var1, var2, (function(file){
      return function() {
                console.log(file.someVariable);
             };
  })(file); 
} 
```

另一种方法是使用 map/forEach，假设文件的数据类型是数组。

```
files.forEach(function(file) {
     asynchronousFunction(var1, var2, function(){
                console.log(file.someVariable);
             });
}); 
```

如果它不是一个数组，那么你总是可以使用这种技术

```
 [].forEach.call(files, function(file) {
     asynchronousFunction(var1, var2, function(){
                console.log(file.someVariable);
             });
}); 
```

更完整的写法当然是

```
Array.prototype.forEach.call(files, function(file) {
     // As before 
```

但我觉得`[].forEach`眼睛更好看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:11:00.840

您需要`x`从回调函数创建的闭包中分离出来。简短的回答：

```
for (x in files) {
    asynchronousFunction(var1, var2,
        (function(y){
            return function(){
                console.log(y.someVaraible);
            }
        })(x)
    ); 
} 
```

有关更长的答案和解释，请参阅我对上一个问题的回答：[请解释在循环中使用 JavaScript 闭包](https://stackoverflow.com/questions/3572480/please-explain-the-use-of-javascript-closures-in-loops/3572616#3572616)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T19:07:12.913

您需要将变量绑定到函数定义，或者将变量传递给函数。我可能会采取组合方法，例如：

```
for (x in files) {
    var local_x = x;
    var fn = function () {
         theRealFunction( local_x );
    };
    asynchronousFunction(var1, var2, fn);
} 
```

尽管在您的示例中，我不需要调用 theRealFunction()，因为它的代码量很少（只是 console.log）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T19:08:18.160

X 被迭代，所以在调用回调函数时，x 将是循环中的最后一个迭代函数。

通过像这样进行`x`本地修复：

```
for (x in files) {
    (function() {
        var x = arguments[0];
        asynchronousFunction(var1, var2, function() {
            console.log(x.someVaraible);
        });
    }(x));
} 
```

# hudson - 强制 Jenkins Subversion 插件使用 HEAD 版本

> ID：11747152
> 
> 赞同：6
> 
> 时间：2012-07-31T19:02:56.470
> 
> 标签：hudson, jenkins, hudson-plugins, jenkins-plugins

我使用 Hudson 进行项目构建，现在计划迁移到 Jenkins。

构建服务器时间与开发人员机器不同步，因此 svn update 无法正常工作。在 Hudson 中，我能够将修订策略设置为 HEAD，而在 Jenkins 中则没有。

我搜索了一下，发现为这个问题创建了一个 Jira，但没有找到该问题的有效解决方案。

我尝试在 Jenkins 中手动安装 Hudson subversion 插件，出现了 Revision policy 选项，但由于某种原因，它在设置 svn 身份验证信息时导致了异常。

如果有人知道在 Jenkins 中进行此更改的解决方案，请回复。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T15:14:42.013

想通了。使用@HEAD 附加所有SVN url，svn update 将从HEAD 发生！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T06:55:29.260

该插件不提供此类功能，但您可能会发现这个 jira 问题很有用。为此目的，评论中有一个补丁。见[问题 1241](https://issues.jenkins-ci.org/browse/JENKINS-1241)。

# facebook - 使用 Facebook 应用 access_token 通过 Graph API 获取有年龄限制的 Page 数据？

> ID：11747155
> 
> 赞同：6
> 
> 时间：2012-07-31T19:03:03.387
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk, oauth-2.0, facebook-opengraph

我有一个 Facebook 应用程序，用户可以将其作为页面选项卡应用程序添加到他们的 Facebook 业务页面。它不需要用户的任何扩展权限。我想知道是否可以使用我的应用程序 access_token 并调用 Facebook Graph API 来检索有关年龄限制页面的信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T22:24:38.830

不可以，如果页面受到人口统计限制（例如酒精），您必须使用满足这些限制的用户的用户访问令牌，或页面本身的页面访问令牌。

应用访问令牌不适用于此类 API 调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:14:03.073

如果该访问令牌的所有者可以在 facebook 上查看数据，则您可以使用该访问令牌获取任何数据，无论它是否阻止其他人。

# php - php从多维数组动态创建导航菜单

> ID：11747156
> 
> 赞同：2
> 
> 时间：2012-07-31T19:03:13.710
> 
> 标签：php, arrays, loops, multidimensional-array, navigation

我对此进行了研究，但无法找到确切的答案。此处与此相关的大多数问题/答案似乎尚未完成。如果有人知道类似于我的问题的最终解决方案，请指出我的方向！

这是我的数组：

```
Array
(
['home'] => Array
    (
        [0] => sub-home1
        [1] => sub-home2
    )

['about'] => Array
    (
        [0] => sub-about
        ['about2'] => Array
            (
                [0] => sub-sub-about
            )

    )

['staff'] => Array
    (
        [0] => sub-staff1
        [1] => sub-staff2
    )

['contact'] => contact
) 
```

这就是我想把它变成：

```
<ul>
    <li><a href="">home<a/>
        <ul>
            <li><a href="">sub-home1</a></li>
            <li><a href="">sub-home2</a></li>
        </ul>
    </li>
    <li><a href="">about<a/>
        <ul>
            <li><a href="">sub-about</a></li>
            <li><a href="">about2</a>
                <ul>
                    <li><a href="">sub-sub-about<a/></li>
                </ul>
            </li>
        </ul>
    </li>
    <li><a href="">staff<a/>
        <ul>
            <li><a href="">sub-staff1</a></li>
            <li><a href="">sub-staff2</a></li>
        </ul>
    </li>
    <li><a href="">contact<a/></li>
</ul> 
```

该数组将动态生成，但限制为 3 个级别，例如：about->about2->sub-sub-about。我试着离开这个问题：[PHP/MySQL Navigation Menu](https://stackoverflow.com/questions/5628722/php-mysql-navigation-menu)，但他们似乎并没有真正得出结论？我熟悉 foreach 的 while 和 for 循环，但我似乎无法理解这个。

**编辑：恩齐诺，你的代码有效！**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T19:38:09.613

这是我的解决方案：

```
<?php

function MakeMenu($items, $level = 0) {
    $ret = "";
    $indent = str_repeat(" ", $level * 2);
    $ret .= sprintf("%s<ul>\n", $indent);
    $indent = str_repeat(" ", ++$level * 2);
    foreach ($items as $item => $subitems) {
        if (!is_numeric($item)) {
            $ret .= sprintf("%s<li><a href=''>%s</a>", $indent, $item);
        }
        if (is_array($subitems)) {
            $ret .= "\n";
            $ret .= MakeMenu($subitems, $level + 1);
            $ret .= $indent;
        } else if (strcmp($item, $subitems)){
            $ret .= sprintf("%s<li><a href=''>%s</a>", $indent, $subitems);
        }
        $ret .= sprintf("</li>\n", $indent);
    }
    $indent = str_repeat(" ", --$level * 2);
    $ret .= sprintf("%s</ul>\n", $indent);
    return($ret);
}

$menu = Array(
            'home' => Array("sub-home1", "sub-home2"),
            'about' => Array("sub-about", "about2" => Array("sub-sub-about")),
            'staff' => Array("sub-staff1", "sub-staff2"),
            'contact' => "contact"
        );

print_r($menu);

echo MakeMenu($menu);

?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T17:32:06.693

卡尔文的解决方案对我有用。这是编辑后的版本。我们可以使用更多的嵌套循环来获得子菜单项。

```
echo '<ul>';
foreach ($menu as $parent) {

    echo '<li><a href="#">' . $parent . '</a>';

    if (is_array($parent)) {
        echo '<ul>';
            foreach ($parent as $children) {
                echo '<li><a href="#">' . $children . '</a>';
            }
        echo '</ul>';
    }

    echo '</li>';
}
echo '</ul>';
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T19:12:52.490

我认为你可以使用递归？这里是一些伪代码，对php不是很熟悉。

```
function toNavMenu(array A){
    for each element in A{
        echo "<li><a href=\"\">" + element.name + "</a>"
        if (element is an array){
            echo "<ul>"
            toNavMenu(element)
            echo "</ul>"
        }
        echo "</li>"
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-31T19:17:29.060

我可能会稍微调整数组，使其类似于以下内容：

```
Array(
    0 => Array(
        'title' => 'Home',
        'children' => Array()
    ),
    1 => Array(
        'title' => 'Parent',
        'children' => Array(
            0 => Array(
                'title' => 'Sub 1',
                'children' => Array(),
            ),
            1 => Array(
                'title' => 'Sub 2',
                'children' => Array(
                    0 => Array(
                        'title' => 'Sub sub 2-1',
                        'children' => Array(),
                    ),
                ),
            ),
        )
    )
) 
```

使用这样的结构，您可以使用递归来构建菜单 HTML：

```
function buildMenu($menuArray)
{
    foreach ($menuArray as $node)
    {
        echo "<li><a href='#'/>" . $node['title'] . "</a>";
        if ( ! empty($node['children'])) {
            echo "<ul>";
            buildMenu($node['children']);
            echo "</ul>";
        }
        echo "</li>";
    }
} 
```

# spring-ws - 将 Spring 集成 Web 服务网关与 JMS 一起使用

> ID：11747159
> 
> 赞同：3
> 
> 时间：2012-07-31T19:03:17.093
> 
> 标签：spring-ws, spring-integration, spring-jms

我需要使用spring-integration实现一个webservice客户端（然后是一个webservice服务器）。我已经使用过 spring-integration 团队提供的示例。该实现使用 HTTP 作为传输层。客户端正在发出 HTTP 请求，而服务器正在发回 HTTP 响应。我不想使用 HTTP，而是使用 JMS 作为传输层。在这种情况下，客户端将 SOAP 请求发送到队列（服务器正在侦听此队列），并且在发送时还会创建一个临时队列并将其设置在 JMS 消息头的 RepyTo 中。服务器从 Queue 进程中接收请求，然后使用 ReplyTo 队列发回 SOAP-Response。我知道我们可以使用 spring-ws 和 spring-jms 库来做到这一点。我想使用对ws和jms的spring-integration支持来做到这一点：

客户端发送请求：java 对象 -> Soap 消息 -> JMS 消息（payload 是 SOAP xml） 服务器接收请求：JMS 消息（payload 是 SOAP xml） -> Soap 消息 -> java 对象 服务器发回响应：java 对象 - > Soap 消息 -> JMS 消息（有效负载是 SOAP xml）

例如，我正在为我现在正在尝试的 web 服务客户端提供 xml 配置。你能检查一下我错过了什么吗？

```
<bean id="jndiEnvironment" class="java.util.Properties">
    <constructor-arg>
        <map>
            <entry key="java.naming.factory.initial" value="value" />
            <entry key="java.naming.provider.url" value="value" />
            <entry key="java.naming.security.principal" value="value" />
            <entry key="java.naming.security.credentials" value="value" />  
        </map>
    </constructor-arg>
</bean>

<bean id="connectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="/my/jndi/name" />
    <property name="jndiEnvironment" ref="jndiEnvironment" />
</bean> 

<bean id="marshaller" class="org.springframework.oxm.jibx.JibxMarshaller">
    <property name="targetClass" value="zahid.play.si.ws.jms.GetCountryDescriptionRequest" />
</bean>

<bean id="destinationResolver"
    class="org.springframework.jms.support.destination.JndiDestinationResolver">
    <property name="jndiEnvironment" ref="jndiEnvironment" />
</bean>

<bean id="messageFactory" class="org.springframework.ws.soap.saaj.SaajSoapMessageFactory" />

<bean id="messageSender" class="org.springframework.ws.transport.jms.JmsMessageSender">
    <property name="connectionFactory" ref="connectionFactory" />
    <property name="destinationResolver" ref="destinationResolver" />
</bean>

<bean id="messageTemplate" class="org.springframework.integration.core.MessagingTemplate"> 
    <property name="defaultChannel" ref="requestChannel" /> 
</bean> 

<int:channel id="requestChannel" />

<ws:outbound-gateway id="wsClientGateway"
    uri="jms:MY.TOPIC?messageType=TEXT_MESSAGE&amp;deliveryMode=NON_PERSISTENT"             
    message-factory="messageFactory" marshaller="marshaller" unmarshaller="marshaller"  
    message-sender="messageSender"  
    request-channel="requestChannel" /> 
```

在我使用的java代码中：`messagingTemplate.convertSendAndReceive(MessageBuilder.withPayload(request).build())`发送请求。

但我收到此错误：

```
[jms:MY.TOPIC?messageType=TEXT_MESSAGE&deliveryMode =NON_PERSISTENT] is not a valid HTTP URL 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T03:08:17.550

解决了问题:)这是解决方案：

1) 为您的 Jms Uri 定义目标提供程序：

```
public class JmsDestinationProvider implements DestinationProvider {    
    private String jmsUri;  
    public URI getDestination() {
        if(StringUtils.hasText(jmsUri)){
            try {
                return new URI(jmsUri);
            } catch (URISyntaxException e) {
            }
        }
                return null; 
    }
    public void setJmsUri(String jmsUri) {
        this.jmsUri = jmsUri;
    }
} 
```

2) 在 spring xml 文件中为此目标提供程序添加一个 bean，并在 ws:outbound-gateway 中使用该 bean

```
<bean id="jmsDestinationProvider" class="play.zahid.springint.activemq.ws.JmsDestinationProvider">
    <property name="jmsUri" value="jms:test_queue?messageType=TEXT_MESSAGE&amp;deliveryMode=NON_PERSISTENT" />
</bean>

<ws:outbound-gateway id="wsClientGateway"
    destination-provider="jmsDestinationProvider"
    message-factory="messageFactory" marshaller="marshaller" unmarshaller="marshaller"  
    message-sender="messageSender"  
    request-channel="requestChannel" /> 
```

# .net - 在 WPF 上的 Bing 地图中加载自定义图块

> ID：11747160
> 
> 赞同：2
> 
> 时间：2012-07-31T19:03:17.580
> 
> 标签：.net, wpf, bing-maps

我正在尝试为 Bing 地图使用自定义图块集。我想做的与[这里的问题](https://stackoverflow.com/questions/10316784/loading-maptiles-into-a-bingmap-silverlight-control)类似，但我试图了解 URI 的格式，以便我可以在应用程序中托管磁贴。我试图在本地托管它的原因是因为我想尽可能地限制来自我的应用程序的网络流量。

是否有任何关于在本地托管地图图块的教程或更深入的关于如何让 URI 指向本地存储路径的教程？

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-01T20:13:27.520

Bing Maps（或 Google Maps 或 OpenStreetMap）平铺地图方案的中心点是每个地图平铺由三个参数标识。这些是缩放级别（通常范围从 0 或 1 到大约 20）以及缩放级别内图块的 x 和 y 索引。在给定的缩放级别 z 中，x 和 y 索引范围从 0 到 2^z-1。在缩放级别 0 中有一个图块，在级别 1 中有 2x2 图块，在级别 2 中有 4x4 图块，依此类推。

大多数地图图块提供商（如 OpenStreetMap 或 Google 地图）直接在其图块 URI 中反映这三个参数。[例如，OpenStreetMap 通过 URI http://tile.openstreetmap.org/z/x/y.png](http://tile.openstreetmap.org/z/x/y.png)提供地图图块。

在派生的[TileSource](http://msdn.microsoft.com/en-us/library/hh750702)类中，您重写 GetUri 方法以提供三个切片参数的 URI。对于 OpenStreetMap 类似的瓦片，这样的派生瓦片源可能如下所示：

```
public class MyTileSource : Microsoft.Maps.MapControl.WPF.TileSource
{
    public override Uri GetUri(int x, int y, int zoomLevel)
    {
        return new Uri(UriFormat.
                       Replace("{x}", x.ToString()).
                       Replace("{y}", y.ToString()).
                       Replace("{z}", zoomLevel.ToString()));
    }
} 
```

对于 Bing Maps WPF Control TileLayer 类中的一些愚蠢的技术细节，您还必须派生自己的 TileLayer 类才能在 XAML 中使用：

```
public class MyTileLayer : Microsoft.Maps.MapControl.WPF.MapTileLayer
{
    public MyTileLayer()
    {
        TileSource = new MyTileSource();
    }

    public string UriFormat
    {
        get { return TileSource.UriFormat; }
        set { TileSource.UriFormat = value; }
    }
} 
```

然后，您将在 Map Control 中使用它，如下所示，其中 XAML 命名空间`m`引用`Microsoft.Maps.MapControl.WPF`并`local`引用包含派生 TileLayer 的命名空间。

```
<m:Map>
    <m:Map.Mode>
        <!-- set empty map mode, i.e. remove default map layer -->
        <m:MercatorMode/>
    </m:Map.Mode>
    <local:MyTileLayer UriFormat="http://tile.openstreetmap.org/{z}/{x}/{y}.png"/>
</m:Map> 
```

除了创建 http URI，您现在还可以为本地文件创建 URI。例如，您可以在目录结构中组织地图图块，其中包含缩放级别的目录、x 索引的子目录和 y 索引的文件名。您可以`UriFormat`通过指定本地路径的方式设置属性：

```
<local:MyTileLayer UriFormat="file:///C:/Tiles/{z}/{x}/{y}.png"/> 
```

重写的 GetUri 方法也可能直接创建适当的本地文件 URI，而不使用`UriFormat`属性：

```
public override Uri GetUri(int x, int y, int zoomLevel)
{
    string rootDir = ...
    string path = Path.Combine(rootDir, zoomLevel.ToString(), x.ToString(), y.ToString());
    return new Uri(path);
} 
```

您可能想了解更多有关 OpenStreetMap 如何处理[地图图块名称](http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames)的信息。

# ios - iPhone 音频相移

> ID：11747161
> 
> 赞同：1
> 
> 时间：2012-07-31T19:03:24.550
> 
> 标签：ios, audio, sdk, signal-processing

是否可以在 iPhone 上实时移相音频？

我有一个简单的应用程序设置，可以实时从麦克风输出音频。我想要做的是处理这个音频，即做一个相移。

我是否正确，唯一的方法是获取我的样本空间，进行 FFT，相移，然后逆 fft？

我知道 vDSP 库，但对于一个简单的任务来说似乎开销太大。

更新：我有来自 Elec Eng 的 DSP 基础，是的，我真的很想做相移。我不需要做频移或过滤，它们是单独的过程，我稍后会实施。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:59:55.137

是的，这是一种方法。

此示例 C 代码显示了它：

```
#include <stdio.h>
#include <math.h>

#ifndef M_PI
#define M_PI 3.14159265358979324
#endif

typedef struct
{
  double x, y;
} tComplex;

tComplex complexAdd(const tComplex* a, const tComplex* b)
{
  tComplex c;
  c.x = a->x + b->x;
  c.y = a->y + b->y;
  return c;
}

tComplex complexMul(const tComplex* a, const tComplex* b)
{
  tComplex c;
  c.x = a->x * b->x - a->y * b->y;
  c.y = a->x * b->y + a->y * b->x;
  return c;
}

void dft(tComplex out[], const tComplex in[], size_t n, int direction)
{
  size_t k, i;
  for (k = 0; k < n; k++)
  {
    tComplex r = { 0, 0 }, e;
    for (i = 0; i < n; i++)
    {
      e.x = cos(-2 * direction * M_PI / n * ((double)k - n / 2) * ((double)i - n / 2));
      e.y = sin(-2 * direction * M_PI / n * ((double)k - n / 2) * ((double)i - n / 2));
      e = complexMul(&e, &in[i]);
      r = complexAdd(&r, &e);
    }
    out[k] = r;
  }
}

double maxAbs(const tComplex in[], size_t n)
{
  double m = 0;
  while (n--)
  {
    double a = hypot(in->x, in->y);
    if (m < a) m = a;
    in++;
  }
  return m;
}

#define SAMPLE_CNT   32
#define SAMPLE_SHIFT 3

int main(void)
{
  tComplex signalIn[SAMPLE_CNT];
  tComplex signalOut[SAMPLE_CNT];
  tComplex tmp[SAMPLE_CNT];
  int i;

  // signalIn[] = square pulse
  for (i = 0; i < SAMPLE_CNT; i++)
  {
    signalIn[i].x = ((i - SAMPLE_CNT / 2) >= 0) * ((i - SAMPLE_CNT / 2) < SAMPLE_CNT / 4);
    signalIn[i].y = 0;
  }

  // tmp[] = DFT{signalIn[]}
  dft(tmp, signalIn, SAMPLE_CNT, 1);

  // tmp[] = DFT{signalIn[]} * exp(j * 2 * PI * f * TimeShift)
  for (i = 0; i < SAMPLE_CNT; i++)
  {
    tComplex e;
    e.x =  cos(2 * M_PI * (i - SAMPLE_CNT / 2) * SAMPLE_SHIFT / SAMPLE_CNT);
    e.y = -sin(2 * M_PI * (i - SAMPLE_CNT / 2) * SAMPLE_SHIFT / SAMPLE_CNT);
    tmp[i] = complexMul(&tmp[i], &e);
  }

  // signalOut[] = IDFT{tmp[]}
  dft(signalOut, tmp, SAMPLE_CNT, -1);

  printf("     Re{In[]}    .     Im{In[]}    |"
         "   |DFT{In[]}|   |"
         "    Re{Out[]}    .    Im{Out[]}\n");

  for (i = 0; i < SAMPLE_CNT; i++)
  {
    int j, s;

    s = signalIn[i].x / maxAbs(signalIn, SAMPLE_CNT) * 8 + .5;
    for (j = -8; j <= 8; j++) printf("%c", " *"[s == j]);
    printf(".");
    s = signalIn[i].y / maxAbs(signalIn, SAMPLE_CNT) * 8 + .5;
    for (j = -8; j <= 8; j++) printf("%c", " *"[s == j]);

    printf("|");

    s = hypot(tmp[i].x, tmp[i].y) / maxAbs(tmp, SAMPLE_CNT) * 8;
    for (j = -8; j <= 8; j++) printf("%c", " *"[s == j]);

    printf("|");

    s = signalOut[i].x / maxAbs(signalOut, SAMPLE_CNT) * 8 + .5;
    for (j = -8; j <= 8; j++) printf("%c", " *"[s == j]);
    printf(".");
    s = signalOut[i].y / maxAbs(signalOut, SAMPLE_CNT) * 8 + .5;
    for (j = -8; j <= 8; j++) printf("%c", " *"[s == j]);

    printf("\n");
  }

  return 0;
} 
```

输出：

```
 Re{In[]}    .     Im{In[]}    |   |DFT{In[]}|   |    Re{Out[]}    .    Im{Out[]}
        *        .        *        |        *        |        *        .        *        
        *        .        *        |        *        |        *        .        *        
        *        .        *        |         *       |        *        .        *        
        *        .        *        |        *        |        *        .        *        
        *        .        *        |        *        |        *        .        *        
        *        .        *        |        *        |        *        .        *        
        *        .        *        |         *       |        *        .        *        
        *        .        *        |        *        |        *        .        *        
        *        .        *        |        *        |        *        .        *        
        *        .        *        |         *       |        *        .        *        
        *        .        *        |         *       |        *        .        *        
        *        .        *        |         *       |        *        .        *        
        *        .        *        |        *        |        *        .        *        
        *        .        *        |          *      |        *        .        *        
        *        .        *        |             *   |        *        .        *        
        *        .        *        |               * |        *        .        *        
                *.        *        |                *|        *        .        *        
                *.        *        |               * |        *        .        *        
                *.        *        |             *   |        *        .        *        
                *.        *        |          *      |                *.        *        
                *.        *        |        *        |                *.        *        
                *.        *        |         *       |                *.        *        
                *.        *        |         *       |                *.        *        
                *.        *        |         *       |                *.        *        
        *        .        *        |        *        |                *.        *        
        *        .        *        |        *        |                *.        *        
        *        .        *        |         *       |                *.        *        
        *        .        *        |        *        |        *        .        *        
        *        .        *        |        *        |        *        .        *        
        *        .        *        |        *        |        *        .        *        
        *        .        *        |         *       |        *        .        *        
        *        .        *        |        *        |        *        .        * 
```

您可以看到，输出是输入的副本，按`SAMPLE_SHIFT`时间偏移了样本（此处为 3）。

您也可以更改`SAMPLE_SHIFT`为非整数值，以小数样本进行移位。

`SAMPLE_SHIFT`= 2.5的输出：

```
 Re{In[]}    .     Im{In[]}    |   |DFT{In[]}|   |    Re{Out[]}    .    Im{Out[]}
        *        .        *        |        *        |        *        .        *        
        *        .        *        |        *        |        *        .        *        
        *        .        *        |         *       |        *        .        *        
        *        .        *        |        *        |        *        .        *        
        *        .        *        |        *        |        *        .        *        
        *        .        *        |        *        |        *        .        *        
        *        .        *        |         *       |        *        .        *        
        *        .        *        |        *        |        *        .        *        
        *        .        *        |        *        |        *        .        *        
        *        .        *        |         *       |        *        .        *        
        *        .        *        |         *       |        *        .        *        
        *        .        *        |         *       |        *        .        *        
        *        .        *        |        *        |        *        .        *        
        *        .        *        |          *      |        *        .        *        
        *        .        *        |             *   |        *        .        *        
        *        .        *        |               * |        *        .        *        
                *.        *        |                *|        *        .        *        
                *.        *        |               * |        *        .        *        
                *.        *        |             *   |           *     .        *        
                *.        *        |          *      |                *.        *        
                *.        *        |        *        |              *  .        *        
                *.        *        |         *       |               * .        *        
                *.        *        |         *       |              *  .        *        
                *.        *        |         *       |               * .        *        
        *        .        *        |        *        |              *  .        *        
        *        .        *        |        *        |                *.        *        
        *        .        *        |         *       |           *     .        *        
        *        .        *        |        *        |        *        .        *        
        *        .        *        |        *        |        *        .        *        
        *        .        *        |        *        |        *        .        *        
        *        .        *        |         *       |        *        .        *        
        *        .        *        |        *        |        *        .        * 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:01:32.907

您想要做的应该对应于输出是输入与内核的折叠积分。它可以作为脉冲输入的输出找到。如果你能找到它，请使用适当的数值积分方法进行折叠积分。这相当于一个 fft:s 只需要完成一次，其余的应该连续完成以连续提供输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T23:26:18.810

> 是否可以在 iPhone 上实时移相音频？

嗯，是的，但这可能不是你真正想要做的。（见 TJD 的评论）

> 我有一个简单的应用程序设置，可以实时从麦克风输出音频。我想要做的是处理这个音频，即做一个相移。

处理音频并不等同于进行相移。也许你想“过滤”？

> 我是否正确，唯一的方法是获取我的样本空间，进行 FFT，相移，然后逆 fft？

假设您要做的是过滤音频，那么不，我不推荐 FFT。您将遇到许多问题，例如窗口化、重叠/添加和性能。FFT 不是设计滤波器的好方法。

> 我知道 vDSP 库，但对于一个简单的任务来说似乎开销太大。

我从未使用过 vDSP，但从快速检查来看，它看起来不像是正确的过滤解决方案。正确的解决方案更有可能使用简单的双二阶函数。你可以在这里阅读它们：

[http://en.wikipedia.org/wiki/Digital_biquad_filter](http://en.wikipedia.org/wiki/Digital_biquad_filter)

这里有一本不错的“食谱”：

[http://www.musicdsp.org/files/Audio-EQ-Cookbook.txt](http://www.musicdsp.org/files/Audio-EQ-Cookbook.txt)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T17:28:32.273

应该可以在 iOS 设备上实时进行各种音频处理。有足够的处理能力。

也许你可以更详细地描述你想要做什么样的相移。严格来说，“唯一”的方法是使用 FFT，但它可能是最好的方法，至少在性能和电池寿命方面是这样。

当您说 vDSP 似乎有太多开销时，您指的是处理器性能还是工程工作量？我同意，vDSP 有一些不受欢迎的工程工作，主要是由于遗留接口需要将真实数据（例如，输入信号）重新排列成奇偶分割。但是，其他方面，例如 FFT 数据的设置，是必要的；他们被 FFT 的性质所驱使。

vDSP 例程的计算性能应该非常好。如果您在处理器性能或工程方面遇到困难，请[报告错误](http://bugreport.apple.com)（或功能请求）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-07T23:52:12.203

我同意其他人的观点，即（实时前向）相移不需要 DSP，因为它只是音频样本的时间偏移。当然，实时反向相移比 DSP 需要更多的努力，因为它需要时间旅行。

另一方面，我需要一种简单快速的方法来执行 iphone 麦克风音频样本的固定频移。实际上有几个频率偏移，例如 1 Hz 增量或大约。有人知道在 iPhone 上执行该任务的快速简便的方法吗？

# ios - 在引入之前不推荐使用的 IOS 方法

> ID：11747171
> 
> 赞同：0
> 
> 时间：2012-07-31T19:04:32.057
> 
> 标签：ios, deprecated

我很好奇为什么许多 IOS 方法在引入之前就被弃用了。例如，大多数 NSString 的弃用方法在 IOS 4.0 或更高版本中可用，但在 IOS 2.0 中已弃用。这背后有什么逻辑吗？也许是懒惰的簿记？

它会导致一些小问题。即， docset 数据存储区的值与它们的平面 HTML 对应物不一致。

不推荐使用 NSString 示例： [https ://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/DeprecationAppendix/AppendixADprecatedAPI.html#//apple_ref/occ/instm/NSString/initWithCStringNoCopy:length :freeWhenDone](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/NSString/initWithCStringNoCopy:length:freeWhenDone) :

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:18:01.237

它看起来确实像一个错误。我查看了“NSString.h”并发现了这个：

![在此处输入图像描述](../Images/655aa4f2697c845c1f7c8f04f27f1fb9.png)

然后我查看了`NS_DEPRECATED`宏的来源（“NSObjCRuntime.h”），发现了这个：

![在此处输入图像描述](../Images/667e9ed2f41cc44328997e71b6a9c553.png)

So`stringWithContentsOfFile`可用于从 2.0 开始的 iOS 使用，并在 2.0 中被弃用。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:10:22.060

它看起来像一个文档错误。这些方法在 iOS 2.0 中可用。

# spark-view-engine - 发出/转义大括号后面的美元符号

> ID：11747172
> 
> 赞同：2
> 
> 时间：2012-07-31T19:04:41.680
> 
> 标签：spark-view-engine

我正在尝试使用 Spark 视图引擎发出一个文字美元符号、打开大括号、文本和关闭大括号。如何让 Spark 发出`${Hello}`，而不是尝试评估变量名`Hello`？我能想到的最好的是`${'$'}{Hello}`，但这似乎太复杂而且难以阅读。

对于上下文，我将 Spark 用作 ASP.NET MVC 视图引擎，但我也将其用作模板引擎，因此（高级）我的应用程序用户可以在文本区域中键入简单的 Spark 视图并保存它呈现电子邮件等。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T09:10:24.920

有两种方法可以转义 Spark 代码表达式：

1.  单项转义
2.  整个块逃逸

## 单项转义

这可以通过对每种表达式类型使用三个转义字符之一来完成。下面不是解释，而是一个示例，说明如何在 Spark 视图中执行此操作：

```
<div>
    $${Encoded.Escaped.with.a.dollar < 0}
    \${Encoded.Escaped.with.a.backslash < 0}
    `${Encoded.Escaped.with.a.backtick < 0}
</div>
<div>
    !!{Unencoded.Escaped.with.a.dollar < 0}
    \!{Unencoded.Escaped.with.a.backslash < 0}
    `!{Unencoded.Escaped.with.a.backtick < 0}
</div>
<div>
    $$!{Encoded.Silent.Nulls.Escaped.with.a.dollar < 0}
    \$!{Encoded.Silent.Nulls.Escaped.with.a.backslash < 0}
    `$!{Encoded.Silent.Nulls.Escaped.with.a.backtick < 0}
</div> 
```

导致以下逐字输出：

```
<div>
    ${Encoded.Escaped.with.a.dollar < 0}
    ${Encoded.Escaped.with.a.backslash < 0}
    ${Encoded.Escaped.with.a.backtick < 0}
</div>
<div>
    !{Unencoded.Escaped.with.a.dollar < 0}
    !{Unencoded.Escaped.with.a.backslash < 0}
    !{Unencoded.Escaped.with.a.backtick < 0}
</div>
<div>
    $!{Encoded.Silent.Nulls.Escaped.with.a.dollar < 0}
    $!{Encoded.Silent.Nulls.Escaped.with.a.backslash < 0}
    $!{Encoded.Silent.Nulls.Escaped.with.a.backtick < 0}
</div> 
```

## 整个块逃逸

您可以使用新的`<ignore>`特殊标签逐字输出块内的任何内容，如下所示：

```
<html>
  <head>
    <title>ignore test</title>
  </head>
  <body>
    <h1>ignore test</h1>
    <p>${System.DateTime.Now}</p>
    <ignore>
        <div>
            Regular text ${This.isnt.code < 0}
            <var dummy="This isn't a variable" />
        </div>
    </ignore>
  </body>
</html> 
```

希望有帮助，
罗布

# android - 线性布局中的间距未按预期工作

> ID：11747184
> 
> 赞同：0
> 
> 时间：2012-07-31T19:05:39.677
> 
> 标签：android, android-layout, android-linearlayout, android-relativelayout

我的一个合作伙伴创建了这个 xml 布局，现在我正在尝试对其进行调整以使其看起来更加精致。从本质上讲，我想做的就是采用线性布局中列出的 4 个按钮并减少它们之间的垂直空间，使它们彼此聚集得更近，但不接触，在屏幕上更靠前。

我尝试过改变重量、重力等……但似乎没有任何效果。谢谢！

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" android:layout_height="fill_parent">

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/layout"
    android:layout_width="wrap_content" android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal" android:background="@drawable/brucehome"
    android:gravity="fill_vertical" android:orientation="vertical" 
    android:layout_alignParentTop="true">

    <TextView android:id="@+id/bonus" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:layout_gravity="center_horizontal"
        android:layout_marginTop="2sp" 
        android:padding="1sp" android:textColor="#0000FF" android:textSize="15sp" />

    <TextView
        android:id="@+id/question"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center_horizontal"
        android:layout_marginLeft="6sp"
        android:layout_marginRight="6sp"
        android:layout_marginTop="2sp"
        android:textColor="#000000"
        android:background="@drawable/rounded_edges_shadow"
        android:gravity="center"
        android:padding="10sp"/>

    <Button
        android:id="@+id/ch0"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center_horizontal"
        android:layout_marginLeft="6sp"
        android:layout_marginRight="6sp"
        android:layout_marginTop="2sp"
        android:background="@drawable/rounded_edges"
        android:padding="10sp"
        android:textColor="#555555"
        android:textSize="25sp" />

    <Button
        android:id="@+id/ch1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center_horizontal"
        android:layout_marginLeft="6sp"
        android:layout_marginRight="6sp"
        android:layout_marginTop="2sp"
        android:background="@drawable/rounded_edges"
        android:padding="10sp"
        android:textColor="#555555"
        android:textSize="25sp" />

    <Button
        android:id="@+id/ch2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center_horizontal"
        android:layout_marginLeft="6sp"
        android:layout_marginRight="6sp"
        android:layout_marginTop="2sp"
        android:background="@drawable/rounded_edges"
        android:padding="10sp"
        android:textColor="#555555"
        android:textSize="25sp" />

    <Button
        android:id="@+id/ch3"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center_horizontal"
        android:layout_marginLeft="6sp"
        android:layout_marginRight="6sp"
        android:layout_marginTop="6sp"
        android:background="@drawable/rounded_edges"
        android:padding="10sp"
        android:textColor="#555555"
        android:textSize="25sp" />

    <Button android:id="@+id/tryagain" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:layout_gravity="center_horizontal"
        android:layout_marginTop="20sp" android:background="@drawable/rounded_edges"
        android:padding="12dip" android:textColor="#A52A2A" android:textSize="25sp"
        android:text="Try Again" />

</LinearLayout>
<RelativeLayout android:id="@+id/ThumbRelativeLayout"
    android:layout_width="wrap_content" android:layout_height="wrap_content"
    android:layout_centerInParent="true" >
    <ImageView android:id="@+id/thumb" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:contentDescription="nevermind" />
</RelativeLayout>

<RelativeLayout android:id="@+id/InnerRelativeLayout"
    android:layout_width="wrap_content" android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" android:padding="12dip">

    <TextView
        android:id="@+id/scoreLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:padding="6dip"
        android:text="Score:"
        android:textColor="#000000"
        android:textSize="25sp" >

    </TextView>

    <Button android:id="@+id/ansopt" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:layout_alignParentRight="true"
        android:background="@drawable/rounded_edges" 
        android:textColor="#A52A2A" android:textSize="25sp" android:text="Show Answers" android:padding="6dip">
    </Button>

    <TextView
        android:id="@+id/score"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/scoreLabel"
        android:layout_toRightOf="@+id/scoreLabel"
        android:gravity="left"
        android:padding="6dip"
        android:text="0"
        android:textColor="#000000"
        android:textSize="25sp" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:39:31.810

你能像这样改变按钮布局吗，我的意思是 layout_height 应该是“wrap_content”：

```
 <Button
        android:id="@+id/ch2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginLeft="6sp"
        android:layout_marginRight="6sp"
        android:layout_marginTop="2sp"
        android:background="@drawable/rounded_edges"
        android:padding="10sp"
        android:textColor="#555555"
        android:textSize="25sp" /> 
```

# asp.net - ASP.NET 中继器从不命中 ItemBound 函数

> ID：11747188
> 
> 赞同：0
> 
> 时间：2012-07-31T19:05:48.873
> 
> 标签：asp.net

我有以下中继器：

```
 <asp:Repeater ID="rpttsk" runat="server"> 
                <HeaderTemplate> 
                    <tr> 
                        <td> 
                            <b>ID</b> 
                        </td> 
                        <td> 
                            <b>Date</b> 
                        </td> 

                    </tr> 
                </HeaderTemplate> 
                <ItemTemplate> 
                    <tr> 
                        <td> 
                            <%#Eval("ID")%> 
                        </td> 

                        <td> 
                            <%#Eval("PerfDate", "{0:MMM d, yyyy}")%> 
                        </td> 

                    </tr> 
                </ItemTemplate> 
            </asp:Repeater> 
```

我将代码放在文件后面的代码中

```
 Protected Sub rpttsk_ItemDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.RepeaterItemEventArgs) Handles rpttsk.ItemDataBound 
```

但是当我设置一个断点时，它永远不会击中它。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:07:45.427

您需要将以下内容添加到您的 ASPX 页面：

```
<asp:Repeater ID="rpttsk" OnItemDataBound="rpttsk_ItemDataBound" runat="server"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:32:22.697

您是否有绑定到中继器的数据源，如果没有，则不会触发 OnItemDataBound 事件。

# cocos2d-iphone - Cocos2D 2.0 与 1.0 相比的不同行为

> ID：11747191
> 
> 赞同：2
> 
> 时间：2012-07-31T19:05:58.233
> 
> 标签：cocos2d-iphone

我有几个用 Cocos2D 创建的应用程序。

我正在将其中一些升级到 Cocos2D 的新版本 2.0。我使用的方法是：

1.  我从标准模板创建了一个新的空白项目
2.  我将所有文件移动到新项目

我通常将层 Helloworld 作为我的初始层。我注意到 Cocos2D 创建了一个 introLayer 作为初始层，我已经删除了它并恢复了加载 Helloworld 的行为。说到这里，我注意到了几点：

1.  Helloworld 的 init 方法内部的行为现在有所不同。我注意到现在在 init 方法中错误地报告了方向。即使应用程序只是横向，它也会始终将其报告为纵向。我还注意到导演还没有完全初始化。如果我尝试使用导演的观点，这一点得到了证实。如果我尝试在 Helloworld 的 init 方法中使用它，这个视图总是无效的。

为了解决这个问题，我已将所有代码移至 Helloworld 的 onEnter 方法。现在，Helloworld 和 director 已经完全初始化，一切正常。

这种方法适用于我为 Cocos2D 1.0 升级到 2.0 的第一个应用程序，但我现在从 Cocos2D 2.0beta 转换到 2.0 最终版本的应用程序出现了问题。

我现在遇到的问题是 Helloworld 没有触发任何触摸，是的，我有这个：

```
-(void) registerWithTouchDispatcher
{
    [[[CCDirector sharedDirector] touchDispatcher] addTargetedDelegate:self priority:0 swallowsTouches:YES];
}

- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event {
    return YES;
} 
```

什么可以阻止 Helloworld 在 2.0 中检测触摸？如何使 Helloworld 的 init 方法表现得像 2.0 beta 或 1.0？

注意：加载 Helloworld 时永远不会调用 ccTouchBegan 和 registerWithTouchDispatcher。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:55:24.563

轮换问题是一个已知错误。第一个场景将以纵向模式初始化，即使应用程序设置为仅横向模式。这是因为初始化发生在应用委托更新方向之前。将代码放入 onEnter 可以解决这个问题，或者只是加载一个“介绍”场景，然后加载实际的第一个场景也可以解决这个问题。

触摸问题可能不是 cocos2d 2.0 的问题。也许就像不设置一样简单`self.isTouchEnabled = YES`。如果未调用 registerWithTouchDispatcher 方法，则 isTouchEnabled 未设置为 YES，或者您不是在 CCLayer 类中执行此操作，而是在 CCScene 中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:41:55.053

这个问题的解决方案是将 [super onEnter] 放在 onEnter 方法上。

```
-(void) onEnter {
    [super onEnter];
    self.isTouchEnabled = YES;
} 
```

缺少这条线会在应用程序上产生各种问题，例如调度程序不工作、ccMove 的奇怪行为、ccTransition 没有触发 onEnterTransitionDidFinish 以及各种问题。

# php - 意外令牌非法

> ID：11747195
> 
> 赞同：0
> 
> 时间：2012-07-31T19:06:27.590
> 
> 标签：php, javascript, jquery

我知道还有其他与堆栈溢出相关的类似问题，但似乎没有一个可以纠正我的问题。每个浏览器都会出现此错误（尽管我使用了 webkit 错误名称）。

我需要使用 PHP 添加 javascript。这会导致出现“意外令牌非法”错误。我尝试了这个[答案](https://stackoverflow.com/a/4635492/1202691)但没有成功。这就是我现在拥有的：

```
 $texte .="<script>";
    $texte .="$(function(){";
    $texte .="$('#field_".$this->id."').css('position','absolute').css('left','".$this->x."px').css('top','".$this->y."px');";
    $texte .="$('#field_".$this->id."').draggable({stop:function(event,ui){saveFieldPosition(".$this->id.");},grid:[10,10],containment:\".work_plane:first\"}).resizable({grid:[10,10]});";
    $texte .="});";
    $texte .="</script>";

    return $texte; 
```

我启用了 Dreamweaver 隐藏字符并删除了 $texte 值中的每个字符。

有人看到问题了吗？任何提示将不胜感激。

编辑： $texte 在添加之前通过 htmlentities() 传递。

这是输出：

```
 &lt;script&gt;$(function(){$('#field_1').css('position','absolute').css('left','px').css('top','px');$('#field_').draggable({stop:function(event,ui){saveFieldPosition();},grid:[10,10],containment:&quot;.work_plane:first&quot;}).resizable({grid:[10,10]});});&lt;/script&gt; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:12:59.033

你不需要像那样分开你的字符串。此外，您可以使用[`HEREDOC`](http://www.phpf1.com/tutorial/php-heredoc-syntax.html)

```
$texte .= <<<JAVASCRIPT
   <script language="javascript">
       $(function() {
           $('#field_{$this->id}').css('position','absolute').css('left','{this->x}px').css('top','{$this->y}px');
           $('#field_{$this->id}').draggable({
                   stop:function(event,ui){
                           saveFieldPosition({$this->id});
                       },
                   grid:[10,10],
                   containment: ".work_plane:first"
               }).resizable({
                   grid:[10,10]
               });
       });
    </script>
JAVASCRIPT; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:12:16.417

**已编辑**

包含后的 " " 应该是单引号 ' ' 没有转义 -

```
$texte .="$('#field_".$this->id."').draggable({stop:function(event,ui){saveFieldPosition(".$this->id.");},grid:[10,10],containment:'.work_plane:first'}).resizable({grid:[10,10]});"; 
```

这保留了 PHP 的语法正确的 JS 输出

你有双引号 " 开始这一行。然后你可以在内部使用单引号而不必转义它们。

```
"foo:'bar'" 
```

是相同的

```
"foo:\"bar\"" 
```

# actionscript-3 - 动画剪辑在补间期间冻结

> ID：11747199
> 
> 赞同：1
> 
> 时间：2012-07-31T19:06:47.590
> 
> 标签：actionscript-3, flash, tween, removechild

我写了这个东西，它随机显示小星星图形，在屏幕上补间，然后删除它们。我遇到了一个问题，虽然可能在 10 秒后，一些星星在补间中间冻结在适当的位置，然后就呆在那里。

这是我的代码：

```
// Create Random Variables.
var xPosition:int;
var yPosition:int;

// Animate Stars.
function stars ():void {
//Defines random starting position for stars.
xPosition = Math.floor(Math.random()*(540))+5;
yPosition = Math.floor(Math.random()*(2))+5;

//Add and position stars.
var newStar:star = new star();
newStar.x = xPosition;
newStar.y = yPosition;
addChild(newStar);

//Tween stars.
var tweenStar:Tween = new Tween(newStar, "y", None.easeOut, yPosition, stage.stageHeight, 4, true);

//Event listener checks star tween.
tweenStar.addEventListener(TweenEvent.MOTION_FINISH, removeStar);

//Remove stars when tween is complete.
function removeStar(e:TweenEvent):void {
    removeChild(newStar);
            tweenStar.removeEventListener(TweenEvent.MOTION_FINISH, removeStar);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:49:40.790

您的补间正在被垃圾收集器拾取，您需要做的是在创建补间后创建一个全局数组来存储补间，这样垃圾收集器就不会得到它们。

```
var tweens:Array = []; 
```

然后添加补间

```
var tweenStar:Tween = new Tween(newStar, "y", None.easeOut, yPosition, stage.stageHeight, 4, true);
tweens.push(tweenStar) 
```

此外，如果可能的话，使用 TweenLite，它比 Adob​​e 的标准补间要好得多，而且您不必担心将补间丢失到垃圾收集器。

# objective-c - _objc_retain”，引用自：Xcode 4.4 中的__ARCLite__load 错误

> ID：11747202
> 
> 赞同：5
> 
> 时间：2012-07-31T19:06:51.933
> 
> 标签：objective-c, xcode, automatic-ref-counting, xcode4.4

我最近升级到 Xcode 4.4 并一直使用它来提交一些 Mac App Store。两个工作正常，但第三个给出了这个错误：

```
Undefined symbols for architecture x86_64:
  "_objc_retain", referenced from:
      ___ARCLite__load in libarclite_macosx.a(arclite.o)
     (maybe you meant: _objc_retainedObject)
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

ARC 已关闭，所以我不知道这个引用来自哪里，或者如何摆脱它。我尝试了通常的清理/构建周期，但无济于事。

有什么想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-23T01:50:28.753

我认为您应该在 Xcode 4.4 上使用 SDK 10.6，对吗？如果是这样，请将“隐式链接 Objective-C 运行时支持”更改为“否”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T03:20:52.397

你的基础sdk低于5.0吗？我使用的是 Xcode4.5，在使用 iOS 4.2 构建时遇到了同样的错误。将其更改为 iOS5.0（或更高版本）后，错误消失了。

对不起，你谈到了 Mac 应用程序。但我认为原因可能是一样的。好的，我找到了答案：将“隐式链接 Objective-C 运行时支持”更改为 NO 可能有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-13T06:43:23.957

我在 Xcode 7.0.1 和 iOS 7.0 中遇到了同样的问题。解决方案是将部署目标从 7.0 更改为 7.1。

# java - 如何限制客户端访问 URL 中包含参数的网页

> ID：11747203
> 
> 赞同：0
> 
> 时间：2012-07-31T19:06:51.367
> 
> 标签：java, html, jsp, url

我正在使用这种方法来验证登录表单。

`index.jsp`-> 包含`<form action=login.jsp method="post">`-> 提交值 -> `login.jsp`-> 如果登录成功 -> `response.sendRedirect("index.jsp?valid=1");`-> 如果没有 ->`response.sendRedirect("index.jsp?valid=0");`

但是，任何用户都可以简单地键入 index.jsp?valid=1 作为 URL，然后他就会“登录”，这是正确的方法吗？如果是，我怎么能禁止某人操纵这些 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:16:04.430

由于您使用的是 .jsp，因此您处于 Java EE 范式中。Java EE 提供基本和基于表单的身份验证模型。您需要使用其中一种模型来实现对系统的安全登录。

这是一个教程：

[http://www.informit.com/articles/article.aspx?p=26139&seqNum=3](http://www.informit.com/articles/article.aspx?p=26139&seqNum=3)

如果你想使用 Spring System，这里是教程：

[http://static.springsource.org/spring-security/site/tutorial.html](http://static.springsource.org/spring-security/site/tutorial.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:08:51.947

我们大多数人使用 cookie 进行身份验证，而不是任何人都可以破解的 URL 参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T19:09:22.270

不，这不是正确的方法，不，您不能限制用户。我的意思是，这怎么可能？

此信息应存储在会话中的服务器端。

除非您是为了自己的学习而这样做，否则我认为您不应该手动编写身份验证/授权代码，有很多库在这样做，使用它们不仅更容易而且更安全。

# php - 设为不可编辑时的下拉列表问题

> ID：11747210
> 
> 赞同：0
> 
> 时间：2012-07-31T19:07:15.127
> 
> 标签：php

我有一个任务分配站点。我在activity.php中为一个人创建任务

我可以在 edit.pgp 页面中编辑活动。

我正在检索下拉列表的选定值。

```
<b>Assignee: &nbsp &nbsp &nbsp &nbsp </b><select name = "assignee"  id="assignee">
    <option <?php if ($assignee == $assignee) { echo 'selected="selected"'; } ?>><?php echo $assignee ?></option>
  <option <?php echo $bssignee ?> </option> 
```

它显示在上一个屏幕中选择的用户。（activity.php）

我想让下拉菜单不可编辑。所以我将代码更改为

```
<b>Assignee: &nbsp &nbsp &nbsp &nbsp </b><select name = "assignee" disabled = "disabled" id="assignee">
    <option <?php if ($assignee == $assignee) { echo 'selected="selected"'; } ?>><?php echo $assignee ?></option>
  <option <?php echo $bssignee ?> </option> 
```

但在那之后，每当我在edit.php中提交值时。下拉值被保存为空或空白。

另外，当我不使其不可编辑时。即使不更改值，它也会保存值。

那么如何使值被保存并且用户无法更改下拉值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:16:47.877

禁用字段会阻止它包含在发布消息中。

# django - Django 的社交分享链接（如 StackOverflow 中的）

> ID：11747214
> 
> 赞同：-1
> 
> 时间：2012-07-31T19:07:28.577
> 
> 标签：django

我想添加通过链接和社交媒体共享特定模型对象的功能，就像单击下面的`share`链接时 Stack Overflow 所做的那样。我喜欢它通过链接从页面中弹出的方式。

是否有可以执行类似功能的 Django 模块。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T20:18:53.860

这可以通过您从[twitter](https://dev.twitter.com/docs/twitter-for-websites)、[Google+](https://developers.google.com/+/plugins/+1button/)或[Facebook](http://developers.facebook.com/docs/guides/web/)的开发人员部分获得的 javascript 代码来完成。我刚刚将它添加到我的网站，这很容易，您可以自定义代码以获得与标准按钮略有不同的外观，或者您可以完全自定义它（就像 Stackoverflow 所做的那样）。

# android - 我应该使用 Dialog 还是 DialogPreference 来制作专门的首选项对话框？

> ID：11747225
> 
> 赞同：2
> 
> 时间：2012-07-31T19:08:06.990
> 
> 标签：android, dialog, sharedpreferences, dialog-preference

我正在尝试在我的应用程序中进行自定义设置，该设置`PreferenceActivity`最终`Dialog`将具有以下内容

1.  指定`EditText`服务器
2.  A`Button`用于测试服务器连接
3.  `Icon`指定是否已到达服务器的响应

我在创建 custom 方面取得了一些进展`Dialog`，但我也遇到了`DialogPreference`似乎对此类功能有用的类。

我想知道我是否有任何理由开始尝试使用`DialogPreference`，或者我是否有理由继续玩弄一个简单的 custom `Dialog`。

我会遇到任何问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:32:39.090

我建议使用`DialogPreference`. `DialogPreference`是针对这种确切情况提供给您的。你不应该遇到任何问题。

但是，如果你已经快完成了......然后继续你所拥有的。

此外，如果您希望`DialogPreference`启动其他对话框，如确认或其他，您应该使用`Dialog`.

# php - 查找数组中是否有除某些字符串之外的任何内容

> ID：11747231
> 
> 赞同：0
> 
> 时间：2012-07-31T19:08:36.523
> 
> 标签：php

让我们从一个例子开始。
$array['0'] 等于 value1。$array['1'] 等于 value2。$array['3'] 等于 value1。
我需要编写一个函数来检查数组中是否存在除一组字符串之外的任何内容。
如果我允许“value1”和“value2”存在于一个数组中，并且我给函数上面的数组，它将返回 true。
如果我输入函数 $array['0'] = 'value3' $array['1'] = 'value2'，该函数将返回 false，因为数组包含“value3”并且只有“value1”和“value2”本例中允许。
是否存在这样的内置 PHP 函数？如果没有，我将如何写它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:16:08.923

此功能将满足您的需求：

```
function anything_but( $input_array, $values) {
    return count( array_diff( array_unique( $input_array), $values)) == 0;
} 
```

它只是创建一个 unique `$input_array`，并计算该数组与该`$values`数组之间的差异。如果该差异中没有元素，则两个数组具有相同的元素，并且该函数将返回 true。如果不是，它将有一个或多个元素，这使得函数返回 false。

[您可以在演示](http://viper-7.com/O5IyhE)中看到它的工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:13:40.733

```
function valuesInArray($array, $allow)
{
    foreach($array as $value)
    {
        if(!in_array($value, $allow)) return false;
    }

    return true;
} 
```

想不出更短的方法来做到这一点。如果您还需要检查类型（=== 不是 ==），则在 in_array 中添加一个 'true' 作为第三个参数。

根据您的示例，用法是：

```
valuesInArray(array('value1', 'value2', 'value1'), array('value1', 'value2')); // true

valuesInArray(array('value3', 'value2'), array('value1', 'value2')); // false 
```

# iphone - 自动与中央数据库同步

> ID：11747232
> 
> 赞同：3
> 
> 时间：2012-07-31T19:08:40.343
> 
> 标签：iphone, ios, background-process, reachability

我开发了一个应用程序。我的应用程序从用户那里获得反馈。当网络不可用时，该数据将保存在本地数据库中。但是，一旦网络可用，它将自动与中央数据库同步。

但是，我这里有一些问题。如果我保存数据库并将我的应用程序发送到后台，一旦网络可用，它必须自动与中央数据库同步。怎么做？

我正在使用可达性类来检查网络可用性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:13:47.130

你不能在 iPhone 上做到这一点。您的应用将在几秒钟内停止存在（一旦应用移至后台）。

我相信所有应用程序都需要 5 秒，而某些请求更多后台时间的应用程序需要 10 分钟。

PS：除非您将您的应用程序标记为导航或音乐应用程序，否则理论上它们可以永远在后台运行。但我怀疑反馈应用程序是否可以在具有此类权限的应用程序商店中获得批准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:23:11.717

目前没有办法让您的应用程序在网络可用时“唤醒”。如果用户在没有网络连接的情况下退出您的应用程序，您将无法执行任何操作，直到他们自愿打开您的应用程序。

但是，您可以使用 UILocalNotification 提示他们这样做。如果您的应用程序正在退出并且您有一些数据等待上传，您可以安排在 4 小时内触发通知（或任何有意义的时间）。

如果用户在通知时间之前打开应用程序并且您能够上传数据，您可以取消通知并且没有人会知道它已被安排。

如果用户没有打开应用程序，则会出现通知，并说“您的手机上有一段时间没有上传的数据。连接到 Internet 并启动 MyAwesomeApp 以同步您的数据。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T21:08:00.273

在您保存的数据库中保留一个额外的列，这标志着您的数据已成功上传到您的服务器。当数据已写入但尚未上传时设置此项。上传成功后，清除该值。当您的应用程序进入前台时，您可以检查此值，并让它上传任何尚未清除此列的数据。当您的应用程序正在运行时，您可以设置一个适当的时间间隔来重新检查可达性，如果成功，请尝试上传。仅在成功写入数据后清除您的标志，并确保您的服务器不会尝试处理部分上传（想想有人试图在地铁或火车上执行此操作，进出连接）。

# cassandra - Cassandra 即服务

> ID：11747234
> 
> 赞同：2
> 
> 时间：2012-07-31T19:08:45.493
> 
> 标签：cassandra

您是否知道任何 cassandra 作为服务提供商。我找到了 cassandra.io，但他们提供了非常大的入门包。你知道其他吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:13:53.587

不幸的是，NoSQL 解决方案目前没有太多的服务提供商，几周前我正在搜索 NoSQL 服务提供商，我只找到了一些。

目前我不知道任何 Cassandra 服务提供商，但我发现了一个名为 MongoHQ ( [https://mongohq.com/](https://mongohq.com/) ) 的 MongoDB 提供商，它似乎工作得很认真。我猜他们有一个可用的免费套餐，但正如我所说，我几周前看过，但我不确定。

我不知道您是在寻找 NoSQL 通用解决方案还是仅寻找 Cassandra 提供程序，但我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T11:42:03.783

[www.instaclustr.com](https://www.instaclustr.com/)于今年早些时候宣布。我自己没有尝试过，但它看起来很有趣。

# c# - 我如何将参数从 javascript 传递到控件 vb.net 中的隐藏字段

> ID：11747235
> 
> 赞同：2
> 
> 时间：2012-07-31T19:08:46.410
> 
> 标签：c#, asp.net, vb.net

我有一个有两个的控件`asp:HiddenField`

```
 <asp:HiddenField runat="server" ID="tabTitle" />
  <asp:HiddenField runat="server" ID="tabMenu" /> 
```

此控件加载到一个名为`Alarms`

页面上的控件`alarms`如下所示

```
 <alarm:SubscriptionPanel ID="pnlSubscription" runat="server" /> 
```

我试图做的是将值从页面传递`alarms`到，`control hidden fields`并且在控制代码后面有一个函数可以读取隐藏字段的值

*问题*是我如何将 javascript 值传递给控件中的隐藏字段`on page load`

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T19:15:09.157

你可以像这样使用 JQuery

**例子 ：**

```
$("input[type=hidden][id='<%=tabTitle.ClientID%>']").val("Hello World"); 
$("input[type=hidden][id='<%=tabMenu.ClientID%>']").val("Hello World"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T19:19:22.830

如果您使用的是 ASP.NET 4.0，最好的办法是将[`ClientIDMode`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)这些控件上的属性设置为静态，然后简单地使用 javascript 使用普通 ol' 填充隐藏元素`document.getElementById()`。像这样的东西：

```
<asp:HiddenField runat="server" ID="tabTitle" ClientIDMode="Static" />

//since the id mode in the hidden element is static; 
//you should be able to do this safely:
document.getElementById('tabTitle').value = myvalue; 
```

如果您不在 ASP.NET 4.0 上；jQuery 在这里会有所帮助，因为您可以使用部分匹配找到一个元素，正如 HatSoft 在他的回答中向您展示的那样，但略有不同：

```
$("input[type=hidden][id*='tabTitle']").val("Hello World"); 
```

注意`id*=`部分。这将获取其 id 包含单词的所有输入元素`tabTitle`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T22:17:03.330

除了@Icarus 评论的方法之外，您还可以从您的控件中公开一个 JavaScript 函数。

如果您在其中使用您将面临的问题`ClientIDMode=Static`，您将被限制`alarm:SubscriptionPanel`为您的页面仅添加一个控件

如果您打算**在每个页面上只使用一个控件，那么最简单的方法是 @Icarus 评论的那个**，但是我认为它是一种*临时方法*

这个替代方案**在自定义控件中封装了它真正属于的逻辑：**

### 输出

![在此处输入图像描述](../Images/d30325483d07d11d094db7c5bdc5777b.png)

### 澳交所

```
<div id="<%: this.ClientID %>">
    <asp:HiddenField runat="server" ID="hidden1" Value="one" />
    <asp:HiddenField runat="server" ID="hidden2" />
    <asp:Button Text="Post me" runat="server" OnClick="postme_Click" />
    <asp:Label runat="server" ID="lbl"></asp:Label>
    <script type="text/javascript">
        $(function () {
            var myObj = {
                setHidden1: function (myValue) {
                    $("#<%: this.hidden1.ClientID %>").val(myValue);
                },
                getHidden1: function () {
                    return $("#<%: this.hidden1.ClientID %>").val();
                },
                helloWorld: function () {
                    alert("hellow world");
                }
            };
            $("#<%: this.ClientID %>").data("data", myObj);
        });
    </script>
</div> 
```

### 背后的 ASCX 代码

```
 protected void postme_Click(object sender, EventArgs e)
    {
        this.lbl.Text = "Posted: " + this.hidden1.Value;
    } 
```

### ASPX

```
 <script type="text/javascript">
        $(function () {
            $("#myPageButton").click(function () {
                $("#<%: this.myControl.ClientID %>").data("data").setHidden1("plop");
                $("#<%: this.myControl2.ClientID %>").data("data").setHidden1("plop2");
            });
        });
    </script>
    <input type="button" id="myPageButton" value="Set Hidden value" />
    <uc1:EncapsulateJavaScriptLogicInUserControl ID="myControl" 
        runat="server" />
    <uc1:EncapsulateJavaScriptLogicInUserControl ID="myControl2" 
        runat="server" />
    <uc1:EncapsulateJavaScriptLogicInUserControl ID="myControl3" 
        runat="server" /> 
```

* * *

我刚刚找到了另一种方式，看起来更加面向对象，但是，它需要您使用 Microsoft AJAX 库。

### 澳交所

改变：`$("#<%: this.ClientID %>").data("data", myObj);`

进入：`$.extend($get("<%: this.ClientID %>"), myObj);`

### ASPX

改变：

```
$("#<%: this.myControl.ClientID %>").data("data").setHidden1("plop");
$("#<%: this.myControl2.ClientID %>").data("data").setHidden1("plop2"); 
```

进入：

```
$get("<%: this.myControl.ClientID %>").setHidden1("plop");
$get("<%: this.myControl2.ClientID %>").setHidden1("plop2"); 
```

使用这种方法，您可以删除`.data`jQuery 函数的使用

# php - 将文件上传到谷歌驱动器 php 401 错误

> ID：11747237
> 
> 赞同：0
> 
> 时间：2012-07-31T19:08:55.027
> 
> 标签：php, google-drive-api

将文件上传到 Google 云端硬盘时遇到问题，但我不知道该怎么做。我可以成功检索我的文件，但无法上传它们。

这是我的错误：

```
{ "error":
  { "errors":
    [ { "domain": "global", "reason": "authError", "message": "Invalid Credentials", "locationType": "header", "location": "Authorization" } ],
    "code": 401, "message": "Invalid Credentials"
   }
} 
```

但是，我的应用程序已向驱动器 SDK 注册，并且我使用驱动器 SDK 客户端 ID。并且令牌也是有效的，因为它在从驱动器中检索文件时起作用。

这是代码：

```
function create_file($token){

$file = file_get_contents("mynewsuper.txt");
$length = strlen($file);
$url="https://www.googleapis.com/upload/drive/v2/files";
$header = array(

"Host: www.googleapis.com",
"Authorization:Oauth $token");
$ch = curl_init();

$post = array(
        "file"=>"@mynewsuper.txt",
    );
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_FOLLOWLOCATION,false);
curl_setopt ($ch,CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
curl_setopt($ch,CURLOPT_POST,true);
    curl_setopt($ch,CURLOPT_POSTFIELDS,$post);

    $data = curl_exec($ch);

    echo $data;
} 
```

# java - java中的byte[]是如何实际存储数据的

> ID：11747239
> 
> 赞同：1
> 
> 时间：2012-07-31T19:08:58.937
> 
> 标签：java

如果我有以下情况：

```
byte[] byteArray = new byte[] {87, 79, 87, 46, 46, 46}; 
```

我知道每个元素的大小是一个字节。但我似乎不明白的是整数`87`如何存储在一个字节中？或者，如何`byte[]`存储数据？

**编辑：**我看到您可以在 java 中将 -128 到 127 存储在一个字节中。那么，这是否意味着无法在 a 中存储大于或小于这些数字的任何内容`byte[]`？如果是这样，那不是限制了它的使用吗？或者我不了解使用`byte[]`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:11:23.820

一个字节是 8 位。 `2^8`是 256，这意味着 8 位可以存储 256 个不同的值。在 Java 中，这些值是 -128 到 127 范围内的数字，因此 87 是一个有效字节，因为它在该范围内。

同样，尝试做类似的事情`byte x = 200`，你会看到你得到一个错误，因为 200*不是*一个有效的字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T19:10:57.923

A`byte`只是一个 8 位整数值。这意味着它可以保存从 -2^7 到 2^7-1 的任何值，其中包括 {87、79、87、46、46、46} 中的所有数字。

Java 中的 An`integer`只是一个 4 字节整数，允许它保存 -2^31 到 2^31 - 1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T19:13:31.263

我认为简短的回答是 byte[] 存储字节。数组中的数字 87 在它上面是一个字节，而不是一个 int。如果您将其更改为 700（或高于 127 的任何值），您将收到编译错误。试试看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T19:11:34.693

Java 字节是一个基元，最小值为 -128，最大值为 127（含）。87 在允许的范围内。字节数据类型可用于在大型数组中节省内存，其中内存节省实际上很重要。

byte[] 是一个对象，它存储了许多这些原语。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T19:20:20.247

您可以使用`byte`在其中存储 8 位值，其（有符号）范围从`-128`到`127`。

`byte[]`你可以做一些特殊的操作，比如从给定的字节流构建s 并用`String`所需的 解码它们`Charset`，一些函数会给你`byte[]`作为它们的返回值。

我对 JVM 的内部结构知之甚少，但它可能会节省内存。

# php - Zend Framework Bootstrap.php、数据库模型和表单

> ID：11747240
> 
> 赞同：0
> 
> 时间：2012-07-31T19:09:02.057
> 
> 标签：php, database, zend-framework, login, model

所以我正在研究一个示例数据库项目。我有一个 LoginController.php、一个 Faculty 数据库和一个登录页面 (phtml)。

我收到错误 Fatal error: Class 'Faculty_DB' not found in /usr/local/zend/apache2/htdocs/InternProject1/application/controllers/LoginController.php on line 25

在 LoginController.php 我有以下（加上一些）：

```
public function indexAction()
{
    $login = new Form_Login();
    //$this->view->login = $login; 

    $request = $this->getRequest();
    if($request->isPost())
    {
        $data = $request->getPost();
        //$this->isValid(
        if($this->getRequest()->getPost())
        {
            $username = $request->getParam('username');
            $password = $request->getParam('password');
            // echo " What you entered is: $username and $password";
//line 24       
            $faculty = new Faculty_DB();
//then conditions for validation. 
```

这参考

```
class Faculty_DB extends Zend_Db_Table_Abstract 
```

它位于 application/models/ 目录中

我在 Bootstrap.php 中有以下内容

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{

    protected function _initAutoload()
    {
        $autoLoader = Zend_Loader_Autoloader::getInstance();
        $autoLoader->registerNamespace(array('App_'));
        $resourceLoader = new Zend_Loader_Autoloader_Resource(array(
            'basePath'  => APPLICATION_PATH,
            'namespace' => '',
            'resourceTypes'     =>
                array('form'=>
                    array('path'        => 'forms/',
                        'namespace'     => 'Form_'
                    ),
                ),
            ));
        return $autoLoader;         
    }
} 
```

关于如何解决这个问题的任何线索？我尝试了以下方法：

```
 protected function _initResourceAutoloader()
 {
     $autoloader = new Zend_Loader_Autoloader_Resource(array(
         'basePath'  => APPLICATION_PATH,
         'namespace' => 'Application',
     ));

     $autoloader->addResourceType( 'model', 'models', 'Model');
     return $autoloader;
 } 
```

但是当我这样做时，它告诉我找不到我的 Login_Form；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T22:19:52.980

鉴于您的应用程序命名空间是`Application`，请尝试：

*   将您的教师数据库课程放入`application/models/Faculty.php`
*   给它命名`Application_Model_Faculty`
*   将其从`Application_Model_DbTable_Faculty`
*   将 DbTable 类放入`application/models/DbTable/Faculty.php`

由于您使用的是`Zend_Application`，它将负责为您设置自动加载器和特殊前缀，例如,`Form_`等，因此您可以安全地从 Bootstrap中删除and 。`Model_``Plugin_``_initAutoload``_initResourceAutoloader`

# jquery-mobile - 按特定顺序包括 jqPlot 文件

> ID：11747241
> 
> 赞同：2
> 
> 时间：2012-07-31T19:09:02.643
> 
> 标签：jquery-mobile, jqplot

是否有 jQPlot 必须包含在标头中的特定顺序？目前我正在使用 jQMobile，但由于某种原因，我的 jqPlot BarRenderer.js 没有被识别......

```
<head>  
    <!-- CSS -->
  <link rel="stylesheet" href="./signup.css">
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
  <link rel="stylesheet" type="text/css" href="http://dev.jtsage.com/cdn/simpledialog/latest/jquery.mobile.simpledialog.min.css" /> 

  <!-- Modernizer -->
  <script type="text/javascript" src="./modernizr.custom.56582.js"></script>
  <!-- jquery -->
  <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>

   <!-- simpleDiaglo2 -->
  <script src="http://dev.jtsage.com/cdn/simpledialog/latest/jquery.mobile.simpledialog2.js"></script>
  <script type="text/javascript" src="http://dev.jtsage.com/cdn/simpledialog/latest/jquery.mobile.simpledialog2.min.js"></script>
  <!-- Bar Chart -->
  <script class="include" language="javascript" type="text/javascript" 
        src="./jquery-jqPlot/jquery.jqplot.js"></script>
 <script class="include" language="javascript" type="text/javascript" src="./jquery-jqPlot/plugins/jqplot.barRenderer.min.js"></script>

</head> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T22:52:27.350

示例加载顺序可能是 jQuery、jqplot、主渲染器、轴渲染器，然后是点标签。顺序取决于项目依赖项。

您正在包括来自 CDN 的 JS，这很好。但是在您的示例中，`<head>`页面中包含了 JavaScript。您应该在标签上方包含您的 JS `</body>`，以加快页面加载时间。CSS 应包含在该`<head>`区域中。

新更新的官方 jqplot 示例页面“条形图”将此加载顺序显示为文档：

记录的订单：

```
<script type="text/javascript" src="../jquery.min.js"></script>
<script type="text/javascript" src="../jquery.jqplot.min.js"></script>
<script type="text/javascript" src="../jquery.jqplot.min.js"></script>
<script type="text/javascript" src="../plugins/jqplot.barRenderer.min.js"></script>
<script type="text/javascript" src="../plugins/jqplot.pieRenderer.min.js"></script>
<script type="text/javascript" src="../plugins/jqplot.categoryAxisRenderer.min.js"></script>
<script type="text/javascript" src="../plugins/jqplot.pointLabels.min.js"></script>
<link rel="stylesheet" type="text/css" hrf="../jquery.jqplot.min.css" /> 
```

请注意，官方页面的实际来源和文档似乎都有错误 - jqplot 正在加载两次。但是，他们在实际源代码中正确地将 CSS 加载到页眉中 - 该示例显示它使用 JS 加载到页脚中，这是不正确的。这是示例页面中实际的 JS 加载顺序：

示例页面上的实际订单：

```
<!-- Don't touch this! -->
<script class="include" type="text/javascript" src="../jquery.jqplot.min.js"></script>
<script type="text/javascript" src="syntaxhighlighter/scripts/shCore.min.js"></script>
<script type="text/javascript" src="syntaxhighlighter/scripts/shBrushJScript.min.js"></script>
<script type="text/javascript" src="syntaxhighlighter/scripts/shBrushXml.min.js"></script>
<!-- Additional plugins go here -->
<script class="include" type="text/javascript" src="../jquery.jqplot.min.js"></script>
<script class="include" type="text/javascript" src="../plugins/jqplot.barRenderer.min.js"></script>
<script class="include" type="text/javascript" src="../plugins/jqplot.pieRenderer.min.js"></script>
<script class="include" type="text/javascript" src="../plugins/jqplot.categoryAxisRenderer.min.js"></script>
<script class="include" type="text/javascript" src="../plugins/jqplot.pointLabels.min.js"></script>
<!-- End additional plugins --> 
```

参考资料：[http](http://www.jqplot.com/deploy/dist/examples/barTest.html) : //www.jqplot.com/deploy/dist/examples/barTest.html，http: [//developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)，个人经验

# wpf - WPF中多级窗口的模态效果

> ID：11747248
> 
> 赞同：0
> 
> 时间：2012-07-31T19:09:25.010
> 
> 标签：wpf, modal-dialog

问候，

当模态窗口出现时，我无法找到一种方法来对我的应用程序应用“淡化”或“变暗”。我有多个窗口，所以可以说应用程序作为 window1，可以启动 window2，它可以启动模态 window3。当我尝试应用任何效果时，我似乎只能使直接父级（window2）或整个监视器空间（我不想要）变暗（或模糊或其他任何我感觉）。

如何将效果应用于应用程序的所有窗口，只保留当前活动/模式一个清晰？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:21:51.160

您可以将一个对象（布尔值？）添加到 App 对象的资源中，并绑定您在每个窗口中放置的叠加层。

绑定 Window 的 Visibility 和 IsEnabled 属性，以防止用户通过 Tab 键切换到覆盖层下方的控件。

当您打开或关闭模态对话框时，切换对象。

```
<Application x:Class="WpfApplication1.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
            <sys:Boolean x:Key="IsShowingModalDialog">false</sys:Boolean>
    </Application.Resources>
</Application> 
```

# sql - 在 SQL Server 中格式化字符串

> ID：11747250
> 
> 赞同：0
> 
> 时间：2012-07-31T19:09:30.903
> 
> 标签：sql

我有一个报告，它必须显示表格中的文本，而且我不能只在报告中键入文本，否则这将非常容易。

我只想将 SQL 字符串中的一个单词加粗，并让它在 SSRS 报告中以粗体显示。有没有办法在 SQL Server 中格式化字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T19:13:33.523

你不能。SQL Server 存储和操作数据，但不打算对其进行格式化，更不用说尝试应用某种可视化格式了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:11:54.350

您不能更改 SQL Server 中字符串的字体。任何格式都~~必须~~在报告中完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T19:12:45.950

SQL Server 中的字符串（或者更确切地说，文本类型，如、 和`CHAR`）`VARCHAR`只是文本 - 它们没有格式，*也不能*有格式。`NCHAR``NVARCHAR`

 *您需要在报告本身中将值加粗。*

# c - 比较 C 中的双精度值

> ID：11747251
> 
> 赞同：3
> 
> 时间：2012-07-31T19:09:37.013
> 
> 标签：c

我有两个双数组，比如说 A 和 B。我想将它们的结果与 7 个有效数字进行比较。以下是否正确进行比较？

```
k = pow(10,7);
for(...)
{
 if(((int)A[i]*k)!=((int)B[i]*k))
 {
  ...
 }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T19:25:31.337

为了比较双打，你可以使用这样的东西：

```
bool fequal(double a, double b)
{
    return fabs(a-b) < epsilon;
} 
```

取自[这里](http://how-to.wikia.com/wiki/Howto_compare_floating_point_numbers_in_the_C_programming_language)。

[`fabs`](http://en.cppreference.com/w/c/numeric/math/fabs)参考。

但请确保您了解[潜在的陷阱](http://randomascii.wordpress.com/2012/06/26/doubles-are-not-floats-so-dont-compare-them/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T19:23:51.973

不，这行不通。

类型转换运算符的优先级高于乘法运算符。这意味着`A[i]`and`B[i]`在乘以 1e7 之前将被转换为整数（并被截断）。2.25 和 2.5 最终将等于您的代码。您可以通过将乘法放在括号中来解决此问题：`(int)(A[i]*k)`

此外，由于您依赖截断而不是四舍五入，您最终可能会得到不正确的结果（取决于您的期望）。`1.0e-7`and`1.9e-7`将等于 ( `1 == 1`)，而`1.9e-7`and`2.1e-7`将不 ( `1 != 2`)。我建议找到一个可以根据您想要的行为正确舍入的函数。

此外，您的比较不处理*有效数字*，它只是改变指数的值。在上面的示例中，只有 2 个有效数字，但是您的代码只会比较其中一个数字，因为指数的值为 -7。

这是一些可以满足您要求的代码：

```
//create integer value that contains 7 significant digits of input number
int adjust_num(double num) {
    double low_bound = 1e7;
    double high_bound = low_bound*10;
    double adjusted = num;
    int is_negative = (num < 0);
    if(num == 0) {
        return 0;
    }
    if(is_negative) {
        adjusted *= -1;
    }
    while(adjusted < low_bound) {
        adjusted *= 10;
    }
    while(adjusted >= high_bound) {
        adjusted /= 10;
    }
    if(is_negative) {
        adjusted *= -1;
    }
    //define int round(double) to be a function which rounds
    //correctly for your domain application.
    return round(adjusted);
}

...

if(adjust_num(A[i]) == adjust_num(B[i])) {
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T19:24:31.033

是的，但您必须进行一项更改。尝试 (int)(A[i]*k) 以确保您的乘法首先执行。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T23:35:20.533

当您使用两个浮点值来确定它们理想情况下的值是否相等时，如果精确计算的值是平等的。如果您有这样的界限，那么您可以执行这样的测试：“如果两个数字比误差界限更接近，则接受它们相等。” 误差界限可以是单个绝对数，也可以是相对于其中一个值的大小的数字，也可以是这些值的某个其他函数。

但是，您还应该回答另一个问题。有时，即使精确计算的值不相等，上述测试也会接受相等的值（因为两个计算值非常接近，甚至可能相等）。因此，您知道即使精确计算的数字不相等，接受彼此接近的计算值是否相等也会给您带来问题。如果答案是肯定的，上述测试有时会接受相同的数字，这会给你带来问题，那么你不能使用这个测试。您可能必须以不同的方式执行计算以减少错误。

经常有人建议制造一些看似很小的阈值并使用它。这是草率的编程，不是工程。

顺便说一句，永远不要写`pow(10, 7)`。写`1e7`。这避免了函数调用中出现任何错误的可能性，并且可以完全避免不必要的函数调用。

# linq - WP7 - 使用带有 DataServiceQuery<> 过滤问题的 Linq To SQL 查询

> ID：11747253
> 
> 赞同：1
> 
> 时间：2012-07-31T19:09:45.147
> 
> 标签：linq, windows-phone-7, azure

我正在通过我创建的服务（本地托管）与 Windows Azure 通信。它目前已成功从我的 word 数据库中检索数据，但我无法过滤它。

这是我用来检索记录的代码：

```
private void GetWords()
{
    DataServiceQuery<Word> query = (DataServiceQuery<Word>)(from g in dataEntity.Words select g);

    query.BeginExecute(ar =>
    {
        DataLoad(ar);
    }, query);
}

private void DataLoad(IAsyncResult result)
{
    DataServiceQuery<Word> query = result.AsyncState as DataServiceQuery<Word>;
    wordData = query.EndExecute(result).ToList();
    Dispatcher.BeginInvoke(() =>
    {
        PopulateList();
    });
} 
```

我可以成功使用：

```
DataServiceQuery<Word> query = (DataServiceQuery<Word>)(from g in dataEntity.Words where g.ID == 2 select g); 
```

但我不能使用：

```
DataServiceQuery<Word> query = (DataServiceQuery<Word>)(from g in dataEntity.Words where g.Name == "Plant" select g); 
```

但我无法进行像'g.Name ==“Plant”'这样的字符串比较。所以显然它适用于整数而不是字符串。查询运行但没有返回任何内容（它实际上从未完成）。

有什么想法吗？

# python - Python蛮力算法

> ID：11747254
> 
> 赞同：27
> 
> 时间：2012-07-31T19:09:48.050
> 
> 标签：python, algorithm, brute-force

我需要生成从给定字符集到给定范围的所有可能组合。像，

```
charset=list(map(str,"abcdefghijklmnopqrstuvwxyz"))
range=10 
```

输出应该是，

```
[a,b,c,d..................,zzzzzzzzzy,zzzzzzzzzz] 
```

我知道我可以使用已经在使用的库来做到这一点。但我需要知道它们是如何工作的。如果有人可以用 Python 或任何可读的编程语言给我这种算法的注释代码，我将非常感激。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-31T19:19:34.553

使用[`itertools.product`](http://docs.python.org/library/itertools.html#itertools.product), 结合[`itertools.chain`](http://docs.python.org/library/itertools.html#itertools.chain)将各种长度放在一起：

```
from itertools import chain, product
def bruteforce(charset, maxlength):
    return (''.join(candidate)
        for candidate in chain.from_iterable(product(charset, repeat=i)
        for i in range(1, maxlength + 1))) 
```

示范：

```
>>> list(bruteforce('abcde', 2))
['a', 'b', 'c', 'd', 'e', 'aa', 'ab', 'ac', 'ad', 'ae', 'ba', 'bb', 'bc', 'bd', 'be', 'ca', 'cb', 'cc', 'cd', 'ce', 'da', 'db', 'dc', 'dd', 'de', 'ea', 'eb', 'ec', 'ed', 'ee'] 
```

这将有效地使用输入集生成逐渐变大的单词，最大长度为 maxlength。

不要尝试生成 26 个字符的内存列表，长度不超过 10 *；*相反，迭代产生的结果：

```
for attempt in bruteforce(string.ascii_lowercase, 10):
    # match it against your password, or whatever
    if matched:
        break 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-07-31T19:17:14.167

如果你真的想暴力破解，试试这个，但这会花费你大量的时间：

```
your_list = 'abcdefghijklmnopqrstuvwxyz'
complete_list = []
for current in xrange(10):
    a = [i for i in your_list]
    for y in xrange(current):
        a = [x+i for i in your_list for x in a]
    complete_list = complete_list+a 
```

在一个较小的示例中，其中 list = 'ab' 并且我们最多只能达到 5，这将打印以下内容：

```
['a', 'b', 'aa', 'ba', 'ab', 'bb', 'aaa', 'baa', 'aba', 'bba', 'aab', 'bab', 'abb', 'bbb', 'aaaa', 'baaa', 'abaa', 'bbaa', 'aaba', 'baba', 'abba', 'bbba', 'aaab', 'baab', 'abab', 'bbab', 'aabb', 'babb', 'abbb', 'bbbb', 'aaaaa', 'baaaa', 'abaaa', 'bbaaa', 'aabaa', 'babaa', 'abbaa', 'bbbaa', 'aaaba','baaba', 'ababa', 'bbaba', 'aabba', 'babba', 'abbba', 'bbbba', 'aaaab', 'baaab', 'abaab', 'bbaab', 'aabab', 'babab', 'abbab', 'bbbab', 'aaabb', 'baabb', 'ababb', 'bbabb', 'aabbb', 'babbb', 'abbbb', 'bbbbb'] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-12-26T18:18:39.973

我发现了另一种使用 itertools 创建字典的非常简单的方法。

```
generator=itertools.combinations_with_replacement('abcd', 4 ) 
```

这将遍历“a”、“b”、“c”和“d”的所有组合，并创建总长度为 1 到 4 的组合。即。a，b，c，d，aa，ab............，dddc，dddd。generator 是一个 itertool 对象，您可以像这样正常循环，

```
for password in generator:
        ''.join(password) 
```

每个密码实际上都是元组类型，您可以像往常一样处理它们。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-31T19:21:25.783

`itertools`非常适合这个：

```
itertools.chain.from_iterable((''.join(l)
                               for l in itertools.product(charset, repeat=i))
                              for i in range(1, maxlen + 1)) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-05-08T23:56:00.860

使用递归的解决方案：

```
def brute(string, length, charset):
    if len(string) == length:
        return
    for char in charset:
        temp = string + char
        print(temp)
        brute(temp, length, charset) 
```

用法：

```
brute("", 4, "rce") 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-01-22T19:34:43.317

如果您真的想要一个蛮力算法，请不要在您的计算机内存中保存任何大列表，除非您想要一个因 MemoryError 而崩溃的慢速算法。

您可以尝试像这样使用 itertools.product ：

```
from string import ascii_lowercase
from itertools import product

charset = ascii_lowercase  # abcdefghijklmnopqrstuvwxyz
maxrange = 10

def solve_password(password, maxrange):
    for i in range(maxrange+1):
        for attempt in product(charset, repeat=i):
            if ''.join(attempt) == password:
                return ''.join(attempt)

solved = solve_password('solve', maxrange)  # This worked for me in 2.51 sec 
```

`itertools.product(*iterables)`返回您输入的迭代的笛卡尔积。

`[i for i in product('bar', (42,))]`返回例如`[('b', 42), ('a', 42), ('r', 42)]`

该`repeat`参数允许您完全按照您的要求进行操作：

```
[i for i in product('abc', repeat=2)] 
```

退货

```
[('a', 'a'),
 ('a', 'b'),
 ('a', 'c'),
 ('b', 'a'),
 ('b', 'b'),
 ('b', 'c'),
 ('c', 'a'),
 ('c', 'b'),
 ('c', 'c')] 
```

**注意**：

你想要一个蛮力算法，所以我给了你。现在，当密码开始变大时，这是一个非常长的方法，因为它呈指数增长（找到“已解决”这个词需要 62 秒）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-02-14T15:55:15.253

```
import string, itertools

    #password = input("Enter password: ")

    password = "abc"

    characters = string.printable

    def iter_all_strings():
        length = 1
        while True:
            for s in itertools.product(characters, repeat=length):
                yield "".join(s)
            length +=1

    for s in iter_all_strings():
        print(s)
        if s == password:
            print('Password is {}'.format(s))
            break 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-03-10T15:46:54.613

```
from random import choice

sl = 4  #start length
ml = 8 #max length 
ls = '9876543210qwertyuiopasdfghjklzxcvbnm' # list
g = 0
tries = 0

file = open("file.txt",'w') #your file

for j in range(0,len(ls)**4):
    while sl <= ml:
        i = 0
        while i < sl:
            file.write(choice(ls))
            i += 1
        sl += 1
        file.write('\n')
        g += 1
    sl -= g
    g = 0
    print(tries)
    tries += 1

file.close() 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-04-25T01:25:33.613

# 使用 itertools 和字符串模块的简单解决方案

```
# modules to easily set characters and iterate over them
import itertools, string 

# character limit so you don't run out of ram
maxChar = int(input('Character limit for password: '))  

# file to save output to, so you can look over the output without using so much ram
output_file = open('insert filepath here', 'a+') 

# this is the part that actually iterates over the valid characters, and stops at the 
# character limit.
x = list(map(''.join, itertools.permutations(string.ascii_lowercase, maxChar))) 

# writes the output of the above line to a file 
output_file.write(str(x)) 

# saves the output to the file and closes it to preserve ram
output_file.close() 
```

我将输出通过管道传输到一个文件以保存 ram，并使用了输入函数，因此您可以将字符限制设置为“hiiworld”之类的内容。下面是相同的脚本，但使用字母、数字、符号和空格的字符集更加流畅。

```
import itertools, string

maxChar = int(input('Character limit for password: '))
output_file = open('insert filepath here', 'a+')

x = list(map(''.join, itertools.permutations(string.printable, maxChar)))
x.write(str(x))
x.close() 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-01-12T22:29:53.000

试试这个：

```
import os
import sys

Zeichen=["a","b","c","d","e","f","g","h"­,"i","j","k","l","m","n","o","p","q­","r","s","­;t","u","v","w","x","y","z"]
def start(): input("Enter to start")
def Gen(stellen): if stellen==1: for i in Zeichen: print(i) elif stellen==2: for i in Zeichen:    for r in Zeichen: print(i+r) elif stellen==3: for i in Zeichen: for r in Zeichen: for t in Zeichen:     print(i+r+t) elif stellen==4: for i in Zeichen: for r in Zeichen: for t in Zeichen: for u in Zeichen:    print(i+r+t+u) elif stellen==5: for i in Zeichen: for r in Zeichen: for t in Zeichen: for u in    Zeichen: for o in Zeichen: print(i+r+t+u+o) else: print("done")

#*********************
start()
Gen(1)
Gen(2)
Gen(3)
Gen(4)
Gen(5) 
```

# javascript - Jquery 选项卡：打破创建-选择-重新加载循环

> ID：11747260
> 
> 赞同：0
> 
> 时间：2012-07-31T19:10:10.500
> 
> 标签：javascript, jquery, tabs

我有一个使用 Jquery 选项卡的页面。选项卡不仅决定了我想在选项卡内容区域中显示的内容，还决定了在选项卡 div 之外显示的内容。

我想要的行为是，当用户选择一个选项卡时，使用 url 中的新参数重新加载整个页面。（我目前通过将字符串附加到 location.href 来执行此操作，从而强制页面重新加载。

```
select: function(event, ui) {
    // ... determine new_url
    location.href = new_url;
} 
```

当页面重新加载时，我希望正确的选项卡处于活动状态/选择状态，我尝试通过检测选项卡的参数来做到这一点。

```
create: function(event, ui) {
   // ... figure out which tab should be selected
   $('.tabs').tabs('select', tab_index);
} 
```

我注意到这会迫使浏览器处于创建选项卡、选择选项卡、重新加载、创建选项卡、选择选项卡......等等的无休止的循环中。有没有办法摆脱这种情况？

我意识到 JQuery 选项卡不适用于此类工作，但我们将不胜感激！这是我第一次尝试 JQuery 选项卡。

一些额外的注意事项： - 我正在使用 Rails 进行一些逻辑 - 我试图将“ui-state-active”类添加到应该选择的选项卡上，这似乎被覆盖了。首先，将第一个选项卡（索引0）设置为活动，然后在选项卡创建功能中，选择我要选择的选项卡。

```
<li class="tab<%= " ui-state-active" if THIS_TAB_SHOULD_BE_SELECTED %>">
  <a href="#tab-<%= type.downcase %>">tab 1</a>
</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:32:17.783

您不能（或不应该）将每次用户更改选项卡时重新加载页面的选项卡与仅显示/隐藏某些内容的选项卡混合使用。我建议坚持使用这两种方法中的一种。如果您希望更改整个页面，请显示/隐藏两个选项卡和其他内容，或者 ajax 新内容并用新内容替换旧内容。或者，您可以执行以下操作：
HTML：

```
<div class="tabs">
  <span class="tab-head active">Tab 1</span>
  <div class="tab-content active">Lorem ipsum...</div>
  <span class="tab-head">Tab 2</span>
  <div class="tab-content">Lorem ipsum...</div>
  <span class="tab-head">Tab 2</span>
  <div class="tab-content">Lorem ipsum...</div>
</div> 
```

CSS：

```
.tabs {overflow: auto;}
.tab-head {display: inline-block; float:left;}
.tab-content {display:none;}
.tab-content-active {display:block;} 
```

JS：

```
$(".tabs .tab-head").click(function(){
    $(".tab-content,.tab-head",$(this).parent()).removeClass("active");
    $(this).addClass("active");
    $(this).next(".tab-content").addClass("active");
}); 
```

这大致就是我几个月前为另一个网站所做的。

*编辑*：我目前正在研究一种方法，通过在 URL 的 fragment_id 部分中传递该数据，将初始选项卡位置分配给每个单独的选项卡，如下所示：`page.com/path/page.php?foo=bar&baz=quux#tabs=0:1,2:6;`，`#tabs=0:1,2:6;`重要的部分在哪里。我有一个 onload 处理程序解析它以显示正确的选项卡从开始和一些 JS 查找指向具有不同选项卡信息的同一页面的链接。

# cuda - 从内核调用内核

> ID：11747265
> 
> 赞同：7
> 
> 时间：2012-07-31T19:10:24.350
> 
> 标签：cuda

[来自： CUDA：从内核调用 __device__ 函数](https://stackoverflow.com/questions/5712369/cuda-calling-a-device-function-from-a-kernel)的后续 Q

我正在尝试加快排序操作。一个简化的伪版本如下：

```
// some costly swap operation
__device__ swap(float* ptrA, float* ptrB){
  float saveData;         // swap some 
  saveData= *Adata;       //   big complex
  *Adata= *Bdata          //     data chunk
  *Bdata= saveData;
}

// a rather simple sort operation
__global__ sort(float data[]){
  for (i=0; i<limit: i++){
  find left swap point
  find right swap point
  swap<<<1,1>>>(left, right);
  }
} 
```

（注意：这个简单的版本没有显示块中的减少技术。）这个想法是很容易（快速）识别交换点。交换操作成本高（缓慢）。所以使用一个块来查找/识别交换点。使用其他块进行交换操作。即并行进行实际交换。这听起来像是一个不错的计划。但如果编译器内联设备调用，则不会发生并行交换。有没有办法告诉编译器不要内联设备调用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-03-11T06:02:51.517

这个问题被问了很久。当我用谷歌搜索同样的问题时，我到了这个页面。好像我得到了解决方案。

**解决方案：**

我以某种方式到达 [here][1] 并看到了从另一个内核中启动内核的酷方法。

```
__global__ void kernel_child(float *var1, int N){
    //do data operations here
}

__global__ void kernel_parent(float *var1, int N)
{
    kernel_child<<<1,2>>>(var1,N);
} 
```

cuda 5.0 及更高版本上的动态并行性使这成为可能。此外，在运行时请确保您使用***的是 compute_35 架构或更高版本***。

**终端方式** 您可以从终端运行上述父内核（最终将运行子内核）。在 Linux 机器上验证。

```
$ nvcc -arch=sm_35 -rdc=true yourFile.cu
$ ./a.out 
```

希望能帮助到你。谢谢！[1]：http: [//developer.download.nvidia.com/assets/cuda/docs/TechBrief_Dynamic_Parallelism_in_CUDA_v2.pdf](http://developer.download.nvidia.com/assets/cuda/docs/TechBrief_Dynamic_Parallelism_in_CUDA_v2.pdf)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T19:15:38.423

**编辑（2016）：**

动态并行是在第二代 Kepler 架构 GPU 中引入的。计算能力 3.5 及更高版本的设备支持在设备中启动内核。

* * *

**原答案：**

您将不得不等到今年年底下一代硬件可用时。当前没有任何 CUDA 设备可以从其他内核启动内核 - 目前不受支持。

# php - 如何在 PHP 中检查 STDERR

> ID：11747271
> 
> 赞同：0
> 
> 时间：2012-07-31T19:10:45.010
> 
> 标签：php, amazon-web-services

我正在尝试使用适用于 PHP 的 AWS 开发工具包调试文件上传脚本。

[`enable_debug_mode`](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/index.html#m=AmazonS3/enable_debug_mode)SDK中调用了一个方法。

但在参考页面上，它说`Enables HTTP request/response header logging to STDERR.`

使用浏览器调试时如何检查 STDERR？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:15:54.693

每个[php 手册](http://ar2.php.net/manual/en/errorfunc.configuration.php#ini.error-log)取决于您在哪里运行脚本。如果*cli*将是控制台，否则 apache 错误日志（如果您正在运行 apache）

# android - R.drawable.icon 错误；图标无法解析或不是字段

> ID：11747272
> 
> 赞同：4
> 
> 时间：2012-07-31T19:10:52.883
> 
> 标签：android

自动生成的代码部分出现错误：R.drawable。请提出错误的解决方案：

R.drawable.icon :- 图标无法解析或不是字段

拥有此错误的 .java 文件如下所示：

```
package net.learn2develop.UsingNotifications;

import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Intent;
import android.os.Bundle;

public class DisplayNotifications extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //---get the notification ID for the notification; 
        // passed in by the MainActivity---
        int notifID = getIntent().getExtras().getInt("NotifID");

        //---PendingIntent to launch activity if the user selects 
        // the notification---
        Intent i = new Intent("net.learn2develop.AlarmDetails");
        i.putExtra("NotifID", notifID);  

        PendingIntent detailsIntent = 
            PendingIntent.getActivity(this, 0, i, 0);

        NotificationManager nm = (NotificationManager)
            getSystemService(NOTIFICATION_SERVICE);
        Notification notif = new Notification(
            R.drawable.icon,
            "Time's up!",
            System.currentTimeMillis());

        CharSequence from = "AlarmManager - Time's up!";
        CharSequence message = "This is your alert, courtesy of the AlarmManager";        
        notif.setLatestEventInfo(this, from, message, detailsIntent);

        //---100ms delay, vibrate for 250ms, pause for 100 ms and
        // then vibrate for 500ms---
        notif.vibrate = new long[] { 100, 250, 100, 500};        
        nm.notify(notifID, notif);
        //---destroy the activity---
        finish();
    }
} 
```

清单文件也表明了这一点：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="net.learn2develop.UsingNotifications"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8" />

    <uses-permission android:name="android.permission.VIBRATE"></uses-permission>

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".MainActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>        
        <activity android:name=".AlarmDetails" 
            android:label="Details of the alarm">
            <intent-filter>
                <action android:name="net.learn2develop.AlarmDetails" />
                <category android:name="android.intent.category.DEFAULT" /> 
            </intent-filter>
        </activity>

        <activity android:name=".DisplayNotification" >
            <intent-filter>
                <action android:name="net.learn2develop.DisplayNotification" />
                <category android:name="android.intent.category.DEFAULT" /> 
            </intent-filter>
        </activity>

    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T17:49:46.157

I just thought I would add a quick additional answer to this topic. I am very new to Android development and had found that one of my classes was not compiling as it could not find any of my drawable attributes. In the end I tracked the problem down to the fact that the class was importing `android.R` (automatically added to the imports list by Eclipse). As soon as that line was taken out, the class compiled.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:32:01.190

您应该检查 dir gen 下是否有一个名为 R.java 的文件。如果是这样打开它并检查是否有一个名为图标的属性。

可能是您移动了项目或从其他项目中复制了某些内容。在任何情况下，您都可以手动删除 gen 下的文件并让 Eclipse 重新创建它们。如果不是，您可以进入项目，然后选择您的项目。它应该工作。

# ios - 推荐的异步块设计模式？

> ID：11747275
> 
> 赞同：6
> 
> 时间：2012-07-31T19:10:58.553
> 
> 标签：ios, cocoa-touch, cocoa, design-patterns

我正在开发一个具有高度异步设计的 iOS 应用程序。在某些情况下，单个概念上的“操作”可能会将许多子块排队，这些子块将异步执行并异步接收它们的响应（对远程服务器的调用）。这些子块中的任何一个都可能在错误状态下完成执行。如果任何子块中发生错误，则应取消任何其他子块，错误状态应向上渗透到父块，并且应执行父块的错误处理块。

我想知道在这样的环境中工作可能会推荐哪些设计模式和其他技巧？

我知道 GCD 的 dispatch_group_async 和 dispatch_group_wait 能力。这可能是这个应用程序设计中的一个缺陷，但我对 dispatch_group_async 的运气并不好，因为该组似乎对子块没有“粘性”。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T19:34:43.933

有一个 WWDC 视频 (2012) 可能会对您有所帮助。它使用自定义`NSOperationQueue`并将异步块放置在内部`NSOperations`，因此您可以保留块的句柄并取消剩余的排队块。

一个想法是让子块的错误处理在处理`NSOperationQueue`. 然后班级可以适当地取消其余部分。这样子块只需要知道自己的线程和主线程。这是视频的链接

[https://developer.apple.com/videos/wwdc/2012/](https://developer.apple.com/videos/wwdc/2012/)

该视频名为“在 iOS 上构建并发用户界面”。相关部分主要是在后半部分，但你可能会想看整个事情，因为它很好地结合了上下文。

编辑：

如果可能的话，我建议在嵌入块中处理响应，它将它很好地包装在一起，这就是我*认为*你所追求的......

```
//Define an NSBlockOperation, and get weak reference to it
NSBlockOperation *blockOp = [[NSBlockOperation alloc]init];
__weak NSBlockOperation *weakBlockOp = blockOp;

//Define the block and add to the NSOperationQueue, when the view controller is popped
//we can call -[NSOperationQueue cancelAllOperations] which will cancel all pending threaded ops
[blockOp addExecutionBlock: ^{

    //Once a block is executing, will need to put manual checks to see if cancel flag has been set otherwise
    //the operation will not be cancelled. The check is rather pointless in this example, but if the
    //block contained multiple lines of long running code it would make sense to do this at safe points
    if (![weakBlockOp isCancelled]) {

        //substitute code in here, possibly use *synchronous* NSURLConnection to get
        //what you need. This code will block the thread until the server response
        //completes. Hence not executing the following block and keeping it on the 
        //queue.  
        __block NSData *temp;
        response = [NSData dataWithContentsOfURL:[NSURL URLWithString:urlString]];

        [operationQueue addOperationWithBlock:^{
            if (error) {
                  dispatch_async(dispatch_get_main_queue(), ^{
                        //Call selector on main thread to handle canceling
                        //Main thread can then use handle on NSOperationQueue
                        //to cancel the rest of the blocks 
                  });
            else {
                 //Continue executing relevant code....      
            }
        }];
    }
}];
[operationQueue addOperation:blockOp]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-20T23:31:02.640

自发布此问题以来，我遇到的一种模式是使用信号量将异步操作更改为同步操作。这非常有用。这篇博客文章更详细地介绍了这个概念。

[http://www.g8production.com/post/76942348764/wait-for-blocks-execution-using-a-dispatch-semaphore](http://www.g8production.com/post/76942348764/wait-for-blocks-execution-using-a-dispatch-semaphore)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T03:17:37.160

有很多方法可以在 cocoa 中实现异步行为。

GCD、NSOperationQueue、performSelectorAfterDelay，创建自己的线程。有适当的时间使用这些机制。在这里讨论太长了，但是您在帖子中提到的一些问题需要解决。

> 如果任何子块中发生错误，则应取消任何其他子块，错误状态应向上渗透到父块，并且应执行父块的错误处理块。

块不能将错误抛出堆栈。时期。

# android - Android MediaPlayer 如何通过查看 SEI FPA 来决定 3D 显示？

> ID：11747278
> 
> 赞同：0
> 
> 时间：2012-07-31T19:11:12.370
> 
> 标签：android, 3d, stereo-3d, htcsense

我想了解HTC Evo 3D的3D Display的工作原理；但是，代码和 HTCDev 的教程对此没有帮助。据说标头中的 SEI FPA 位会覆盖手动给出的选择，例如：

```
public void surfaceChanged(SurfaceHolder surfaceholder, int i, int j, int k) {
    holder = surfaceholder;
    enableS3D(true, holder.getSurface()); // note SEI FPA flag in content
                                          // overrides this
} 
```

播放视频代码：

```
private void playVideo() {
    release();
    fileName = "HTCDemo.mp4";
    try {
        mediaPlayer = new MediaPlayer();
        final AssetFileDescriptor afd = getAssets().openFd(fileName);
        mediaPlayer.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(),
                afd.getLength());
        mediaPlayer.setDisplay(holder);
        mediaPlayer.prepare();
        mediaPlayer.setOnPreparedListener(this);
        mediaPlayer.setOnVideoSizeChangedListener(this);
        mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
    } catch (Exception e) {
        Log.e(TAG, Log.getStackTraceString(e));
    }
} 
```

在这一点上，我无法跟踪它在标题中的 SEI FPA 位的位置。我需要帮助来显示必要的代码部分。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:39:46.950

您是否需要在标头本身中解析 SEI FPA 位？这超出了这个 API 的范围。如前所述，编解码器对此进行解析以启用（并覆盖）S3D 设置。

在概述中，提到了如何使用 x264 等 3rd 方工具将此位添加到现有内容中。

如果这是您在运行时需要做的，我建议您查看 x264 的代码以帮助解析文件头。

# javascript - 如何在jquery中删除（.remove）所有元素（div）而不是这个（this）元素（div）？

> ID：11747286
> 
> 赞同：2
> 
> 时间：2012-07-31T19:11:47.873
> 
> 标签：javascript, jquery, ajax, onclick

我有一组 div 监听点击。单击一个时，我需要删除所有其他。

HTML：

```
<div class="foo">A</div>
<div class="foo">B</div>
<div class="foo">C</div>
<div class="foo">D</div> 
```

如果我单击 div (A)，如何删除所有其余部分 (B,C,D) 但保留 A？

我试过这个，但没有奏效：

```
$('.foo:not(this)').remove(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T19:12:50.083

```
$('.foo').not(this).remove(); //w00t 
```

所以把它们放在一起：

```
$('.foo').click(function(){ 
    //code...
    $('.foo').not(this).remove(); //w00t
    //more code....
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T19:18:47.193

***如果***您尝试删除一组元素的所有兄弟姐妹，您可以这样做。

```
$(".foo").click(function (e) {
    $(this).siblings().remove();
}); 
```

# javascript - 为什么 Facebook 在他们的 JSONP 响应中添加评论？

> ID：11747289
> 
> 赞同：2
> 
> 时间：2012-07-31T19:11:58.720
> 
> 标签：javascript, jquery, facebook, jsonp

> **可能重复：**
> [Facebook graph api JSONP 格式，第一行的 /* */ 是什么意思？](https://stackoverflow.com/questions/8034515/facebook-graph-api-jsonp-format-what-does-the-in-first-line-signify)

[https://graph.facebook.com/woho?callback=sdf](https://graph.facebook.com/woho?callback=sdf)：

```
/**/ sdf({
   "error": {
      "message": "(#803) Some of the aliases you requested do not exist: woho",
      "type": "OAuthException",
      "code": 803
   }
}); 
```

那么`/**/`开头的意义何在？

# c++ - 从空项目开始创建 com 库

> ID：11747292
> 
> 赞同：2
> 
> 时间：2012-07-31T19:12:07.767
> 
> 标签：c++, visual-studio, com

. 我在 MSDN 中找到了名为“使用文本编辑器创建 COM 服务器”的示例。 [http://msdn.microsoft.com/en-us/library/2wad1c0e(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/2wad1c0e(v=vs.71).aspx)

它可以从命令提示符编译，但不能从 Visual Studio IDE 编译。

我决定将此项目移至 Visual Studio。我创建了新项目（文件>>新建>>项目>>空项目）并将 MyServer.cpp 文件添加到“源文件”和 MyIncludes.h 到头文件。尝试构建项目后出现以下错误：

```
1>------ Build started: Project: Myserver, Configuration: Release Win32 ------
1>Compiling...
1>MyServer.cpp
1>.\MyServer.cpp(26) : warning C4581: deprecated behavior: '"apartment"' replaced with 'apartment' to process attribute
1>Linking...
1>   Creating library C:\Myserver\Release\Myserver.lib and object C:\Myserver\Release\Myserver.exp
1>LINK : fatal error LNK1561: entry point must be defined
1>Build log was saved at "file://c:\Myserver\Myserver\Release\BuildLog.htm"
1>Myserver - 1 error(s), 1 warning(s)
 ========= Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:15:41.143

翻译错误告诉您在 EXE 模块中需要一个入口函数。你必须定义一个**main(...)**函数作为入口，否则是一个无效的 EXE，因为没有启动点。简单地说，您可以为 IDE 创建一个控制台窗口项目，或者像我说的那样手动添加**main(...) 。**

# javascript - 为什么javascript对象原型被称为`fn`？

> ID：11747294
> 
> 赞同：1
> 
> 时间：2012-07-31T19:12:15.977
> 
> 标签：javascript, jquery

这种术语的词源是什么？它从何而来？它代表什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T19:21:10.547

`fn`是 的传统缩写`function`。

`jQuery.fn`是一个对象，有时称为命名空间，由[全局`jQuery`对象](http://api.jquery.com/category/properties/global-jquery-object-properties/)公开。作为成员的函数`jQuery.fn`可以应用于[jQuery 对象](http://docs.jquery.com/Types#jQuery)：

```
$("#foo").hide();  // Here, 'hide()' is actually '$.fn.hide()'. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T19:20:03.047

词源是数学的。f(n) 是表示函数的数学命名法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T19:18:08.013

它在 jQuery 中用作插件可以分配自己的属性。这意味着`function`所有插件都是自执行功能。

[http://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)

javascript 对象原型属性被称为：`object.prototype`并且用于帮助面向对象的 JS。

# regex - htaccess 正则表达式目录到变量

> ID：11747296
> 
> 赞同：3
> 
> 时间：2012-07-31T19:12:18.320
> 
> 标签：regex, .htaccess, url, redirect

我需要为某些 URL 从目录到变量进行 301 重定向。

例子：

```
 http://domain.com/es/stackoverflow --> http://domain.com/stackoverflow?lang=es
    http://domain.com/he/stackoverflow --> http://domain.com/stackoverflow?lang=he 
```

因为现在我对每种语言都有一个“目录结构”，并且它为同一页面制作单独的 URL，它只是切换语言。

我只想在最后添加语言标识符。

问题不是每个页面在 tld/ 之后都有那些语言标识符

有什么想法吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:48:49.433

你可以试试：

```
RedirectMatch 301 ^/([a-z]{2})/(.*)$ /$2?lang=$1 
```

# shopify - 删除 Webhook

> ID：11747299
> 
> 赞同：0
> 
> 时间：2012-07-31T19:12:25.067
> 
> 标签：shopify, webhooks

我有一家商店，有权读取|写入订单和产品。我设置了一些 Webhook，现在我想删除它们。我正在返回 401 错误。

```
Starting with 4 webhooks
Trying to delete webhook 1982492
Error nil, Failed.  Response code = 401\.  Response message = Unauthorized.
Trying to delete webhook 1982494
Error nil, Failed.  Response code = 401\.  Response message = Unauthorized.
Trying to delete webhook 1982496
Error nil, Failed.  Response code = 401\.  Response message = Unauthorized.
Trying to delete webhook 1982498
Error nil, Failed.  Response code = 401\.  Response message = Unauthorized.
Ended with 4 webhooks 
```

那么，如何删除产品和订单上设置的 Webhooks？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T02:14:57.663

卸载应用程序时会自动删除应用程序创建的 Webhook（和 ScriptTags）。看起来这可能就是这里发生的事情。

如果您这样做是为了响应应用程序/已卸载的 webhook，则没有理由。已经处理好了！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T00:51:33.853

如果您删除了 webhook 连接的端点，它将在 19 次尝试连接后被删除。

来自 shopify 文档 (http://wiki.shopify.com/WebHook#Automatic_Retries_and_Deletion)

> 如果在发送 webhook 时返回错误或发生超时，Shopify 将使用指数回退方法重试同一请求 48 小时。总共将进行 19 次尝试来传递信息。

您也可以只删除应用程序，它会删除 webhook

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T19:13:32.870

这是与我的 Shopify 控制台的对话，以显示它正常工作：

```
$ shopify console
using iliketurtles.myshopify.com
irb(main):001:0> include ShopifyAPI
=> Object
irb(main):002:0> w = Webhook.create topic: "orders/create", address: "http://whatever.place.com", format: "json"
=> #<ShopifyAPI::Webhook:0x007f8ff1895778 @attributes={"topic"=>"orders/create", "address"=>"http://whatever.place.com", "format"=>"json", "id"=>2026848, "created_at"=>"2012-08-10T15:11:25-04:00", "updated_at"=>"2012-08-10T15:11:25-04:00"}, @prefix_options={}, @persisted=true, @remote_errors=nil, @validation_context=nil, @errors=#<ActiveResource::Errors:0x007f8ff18948c8 @base=#<ShopifyAPI::Webhook:0x007f8ff1895778 ...>, @messages={}>>
irb(main):003:0> w.destroy
=> #<Net::HTTPOK 200 OK readbody=true> 
```

正如其他人所提到的，我认为您的问题与权限有关。

# php - 并行执行多个 PHP 脚本，并在完成时收到通知

> ID：11747304
> 
> 赞同：1
> 
> 时间：2012-07-31T19:12:30.297
> 
> 标签：php, multithreading, parallel-processing, exec

所以，这就是我想要做的 - 实际上非常不言自明：

*   启动 X 个“同时”进程（每个进程绑定到不同的 php 脚本）
*   能够说*他们*什么时候都完成了

我看过各种不同的方法，我可能会使用`exec`后台进程。（沿着[这些思路](http://www.d-mueller.de/blog/parallel-processing-in-php/)）。

事情 - 我真的无法理解 - 是：

我不知道**哪种方法是检查所有进程是否已完成的最有效方法** *（能够密切关注总体进度 - 例如，Y 中的 X 已完成，也是必须的）*。

重要的是时间效率，并且 - 显然 - 不会导致任何不必要的服务器过载（所以，我认为任何“冻结”`while`循环检查 live `pid`s，即使是间隔，也是不可能的，对吧？）

非常欢迎任何建议！

* * *

***PS：**我最初使用从客户端开始的异步 Ajax 请求来设置这一切，但我目前正在考虑迁移到非 JavaScript 完全服务器端环境。并行处理的问题仍然存在......*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:17:30.577

您应该调查 pcntl_fork 和相关函数。这允许一个主进程形成多个子进程并通知子进程退出状态。

[http://php.net/manual/en/function.pcntl-fork.php](http://php.net/manual/en/function.pcntl-fork.php)

# java - 最快的同步技术

> ID：11747305
> 
> 赞同：1
> 
> 时间：2012-07-31T19:12:36.147
> 
> 标签：java, synchronization, locking, runnable, callable

以下是访问公共资源的一种相当常见的场景，以顺序（单线程）或并发（多线程）方式，需要最快的技术。

更具体地说（参见下面的示例源代码），一个`Manager`类创建了一个`Runnable`（或`Callable`）类（`Handler`）的一些实例，这些实例具有一个公共资源（一个`Store`对象）。该类`Manager`实际上是子类化的，并且其`execute()`方法被重写以在同一个线程中或在多个线程中（例如，通过一个`ExecutorService`）顺序运行处理程序，具体取决于子类的实现。

我的问题是，在每个对象的(or ) 方法中同步访问共享`Store`对象的最快（更少开销）方法是什么，特别是考虑到对于单线程访问，同步是多余的（但有在那里，因为还有多线程子类实现）。`run``call()``Handler``Manager`

例如，一个`synchronized (this.store) {this.store.process()}`块会比在调用之前和之后使用`Lock`对象更好吗？或者每个商店访问内部的单独方法会更快吗？例如，而不是调用，运行类似`java.util.concurrent``this.store.process()``synchronized``Handler``this.store.process()`

```
private synchronized void processStore()
{
    this.store.process();
} 
```

以下是（示例）源代码。

```
public class Manager
{
    public Manager()
    {
        Store store = new Store(); // Resource to be shared
        List<Handler> handlers = createHandlers(store, 10);

        execute(handlers);
    }

    List<Handler> createHandlers(Store store, int count)
    {
        List<Handler> handlers = new ArrayList<Handler>();

        for (int i=0; i<count; i++)
        {
            handlers.add(new Handler(store));
        }

        return handlers;
    }

    void execute(List<Handler> handlers)
    {
        // Run handlers, either sequentially or concurrently 
    }
}

public class Handler implements Runnable // or Callable
{
    Store store; // Shared resource

    public Handler(Store store)
    {
        this.store = store;
    }

    public void run() // Would be call(), if Callable
    {
        // ...
        this.store.process(); // Synchronization needed
        // ...
        this.store.report();  // Synchronization needed
        // ...
        this.store.close();   // Synchronization needed
        // ...
    }       
}

public class Store
{
    void process() {}
    void report()  {}
    void close()   {}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:16:48.330

一般来说：CAS同步<<`synchronized`就`Lock`速度而言。当然，这取决于争用的程度和您的操作系统。我建议您尝试每种方法并确定哪种方法最适合您的需要。

Java 还执行[锁省略](http://www.ibm.com/developerworks/java/library/j-jtp10185/)以避免锁定仅对一个线程可见的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T12:50:37.297

据我所知，如果您的应用程序运行或将以集群模式运行，那么同步将不起作用（不同的 JVM），因此 Lock 将是唯一的选择。

如果公共资源是队列，那么您可以使用 ArrayBlockingQueue，如果不是，则开始对该资源的同步访问。

# ruby-on-rails - 活动管理员自定义操作项资源名称

> ID：11747306
> 
> 赞同：12
> 
> 时间：2012-07-31T19:12:37.067
> 
> 标签：ruby-on-rails, resources, activeadmin

不知道为什么我似乎无法弄清楚这一点，因为它似乎应该如此简单，但基本上，我正在尝试创建一个指向操作的链接（我希望“发布”出现在显示旁边，编辑、删除）为 Active Admin 中的每个资源。

我使用了他们在 wiki 上建议的代码：

```
 action_item do
    link_to "button label", action_path(post)
 end 
```

问题是，我收到一个错误，因为 rails 不知道“post”是什么。是零。Github 上的 Wiki 版本具有相同的代码，只是它们使用“资源”而不是帖子。我不确定他们是否暗示我会在那里使用我自己的资源名称，或者你是否应该实际使用变量“resource”。我尝试了后一种情况并得到“没有 ID 无法找到”错误。

所以问题是，我在哪里设置变量名？他们使用什么作为迭代器？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T20:56:10.963

我以前用这个：

```
action_item only: :show do |resource|
  link_to('New Post', new_resource_path(resource))
end 
```

更新

```
action_item only: :show do
  link_to('New Post', new_resource_path)
end 
```

感[谢阿尔特拉各斯](https://stackoverflow.com/users/895789/alter-lagos)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T18:16:28.360

我已经用一段非常相似的代码完成了这一点，请参阅：

在我的里面：`app/admin/posts.rb`

```
member_action :publish, method: 'get' do
  post = Post.find(params[:id])
  post.publish!
  redirect_to admin_post_path(post), notice: 'Post published!'
end 
```

就我而言，我希望链接按钮仅在`show`操作中可用。

```
action_item :only => :show do
  if post.status == 'pending' 
    link_to 'Publish', publish_admin_post_path(post)
  elsif post.status == 'published'
    link_to 'Expire', expire_admin_post_path(post)
  else
  end
end 
```

希望这对你有帮助！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-08T16:40:25.960

在 ActiveAdmin 中，您必须使用`resource`来引用您正在使用的对象。

当您`resource`在类似的操作中使用时`index`，您可能会收到错误，因为 ActiveAdmin 无法使用。为防止这种情况，请指定您希望按钮出现的操作。

要指定一个动作，请给参数`only`提供一个您希望按钮出现在其中的动作数组。例如：

```
action_item :only => [:show, :edit] do
  ...
end 
```

# c++ - 在构造函数中破坏对象的创建

> ID：11747307
> 
> 赞同：2
> 
> 时间：2012-07-31T19:12:39.450
> 
> 标签：c++

我班上的构造函数检查某些情况。在某些情况下，它应该中断对象的创建。我应该放一个析构函数还是只返回语句？

它是这样的：

代码中的某处：

```
new Obj( string ); 
```

和我的构造函数：

```
Obj::Obj( string ) {
    if( string == "something" ) {
        // should I put this here or only return?
        Obj::~Obj();
        return;
    }
    // ...
} 
```

我知道我可以在创建对象之前检查条件，但我只是想知道它是否正确（如果没有内存泄漏），因为它编译得很好而不会在运行时崩溃。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T19:13:06.503

也不，你应该抛出一个异常。

不会创建任何对象，这是处理这种情况的惯用方式。

您需要在调用上下文（或更高版本）中处理异常。

```
Obj::Obj( string ) {
    if( string == "something" ) {
        // should I put this here or only return?
        throw ObjectCouldNotBeCreatedException();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T19:14:30.263

`return`语句仍将创建对象。为了中断构造，您应该抛出异常。

# android - 如何永久移动平滑相机？

> ID：11747308
> 
> 赞同：0
> 
> 时间：2012-07-31T19:12:39.490
> 
> 标签：android, andengine

我正在使用 SmoothCamera 移动我的相机，但我该如何永久移动它？

使用 camera.setCenter() 时我必须设置 X & Y。

如何在“onSceneTouchEvent”上移动和停止相机移动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T08:29:06.517

你可以打电话`camera.setCenterDirect(x, y)`。那是你要找的吗？

# string - 给定字符串中的包、类、函数和参数，如何在 AS3 中动态调用函数？

> ID：11747310
> 
> 赞同：0
> 
> 时间：2012-07-31T19:12:43.530
> 
> 标签：string, actionscript-3, function, dynamic, singleton

我需要在两个单独`.swf`的 s`A`和`B`. 我有一个`interface`,`IRequest`使用以下方法：

```
public interface IRequest {
    function get packagePath():String;
    function get className():String;
    function get functions():Vector.<String>;
    function get parameters():Array;
    function execute():void;
} 
```

我在一个类中实现它，`Request`. 可以按如下方式创建新请求： `RequestManager.addToQueue(new Request("com.myPackage", "MyClass", "instance.method1.method2", "parameter"));`

这将`Request`使用提供的`package`、`class`-name`list of functions`和`parameters`.

一系列`function`-call 和决定 a`function`实际上是 a`function`还是`property`( `public function getMyThing():Object`vs `public function get myThing():Object`) 会使事情变得复杂。

例如，如果需要的话，事情就足够简单`Request`了`new Request("com.myPackage", "MyClass", "getInstance", "");`

调用该方法很简单：

```
var theClass:Class = getDefinitionByName(packagePath + "." + className) as Class;
var theInstance:Object = theClass[functions[0]](); // Invokes com.myPackage.MyClass.getInstance() 
```

`getInstance`但是，如果是`property`/ ，这将不起作用`getter`。此外，如果有许多方法调用，我不确定如何在一次调用中调用链。例如：

```
var theClass:Class = getDefinitionByName(packagePath + "." + className) as Class;
var object = theClass[functions[0]]()[functions[1]()[functions[2](); // Invokes com.myPackage.MyClass.firstMethod.secondMethod.thirdMethod() 
```

但是，我需要动态地执行此操作，并且我没有看到动态链接这些`[`,的简单方法`]`。

如果有人知道我能够从 a 调用方法的好方法`String`，那基本上就是我想要做的。

`"com.myPackage.MyClass.firstMethod.secondMethod.thirdMethod()", parameters`

谢谢您的帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:59:36.477

我认为在调用它之前检查该参数是否实际上包含一个函数会有所帮助。

```
var theClass:Class = getDefinitionByName(packagePath + "." + className) as Class;

if(theClass[functions[0]] is Function){
    var theInstance:Object = theClass[functions[0]](); // Invokes com.myPackage.MyClass.getInstance()
} 
```

# ruby-on-rails - Rails - first_or_create 添加重复记录？

> ID：11747312
> 
> 赞同：1
> 
> 时间：2012-07-31T19:12:46.480
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我的 Rails 应用程序中有一些种子，我正试图掌握这些种子。我将从有问题的代码开始：

```
 make = Make.where(value: 'Alfa Romeo').first_or_create
model = make.models.where(value: '147').first_or_create
trim = model.trims.where(value: '1.6 TS 3d (2001 - 2005)').first_or_create
values = [
 {value: '2001 (X)'},
 {value: '2001 (Y)'},
 {value: '2001 (51)'},
 {value: '2002 (51)'},
 {value: '2002 (02)'},
 {value: '2002 (52)'},
 {value: '2003 (52)'},
 {value: '2003 (03)'},
 {value: '2003 (53)'},
 {value: '2004 (53)'},
 {value: '2004 (04)'},
 {value: '2004 (54)'},
 {value: '2005 (54)'},
 {value: '2005 (05)'}
]
values.each do |item|
  trim.model_years.where(item).first_or_create
end 
```

我对这段代码的期望是它可以创建或定位品牌、型号和装饰，然后将适当的车型年份与装饰相关联。

然而，正在发生的事情是正在创建重复的模型年份 - 例如，它不是将装饰与“2001 (X)”相关联，而是创建了一个值“2001 (X)”的新记录 - 要清楚，它表现得好像我使用的是 create，而不是 first_or_create。

谁能建议为什么会发生这种情况并帮助我纠正它？

编辑：为避免混淆，我调整了上面的代码以反映我当前的代码，没有第一个答案中引用的 find_or_create_by 问题。上面的代码仍在创建重复项。

编辑 2：我突然想到我的代码可能从根本上出错了 - 我要做的是在 trim 和 model_year 之间创建关联（设置为多对多关系） . 因此，也许我出错的地方是我正在创建记录，而实际上我只想找到现有记录并添加关联。

因此，我应该使用声明关联而不创建新对象的语句，而不是 first_or_create。

因此，我已将我的声明修改为以下内容，这是有效的：

```
trim.model_years << ModelYear.where(item).first_or_create 
```

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:21:40.447

这里有一些更正：

```
make = Make.find_or_create_by_value('Alfa Romeo')
model = make.models.find_or_create_by_value('147')
trim = model.trims.find_or_create_by_value('2.0 Lusso 5d (2001 - 2005)')
values = [
 {value: '2001 (X)'},
 {value: '2001 (Y)'},
 {value: '2001 (51)'},
 {value: '2002 (51)'},
 {value: '2002 (02)'},
 {value: '2002 (52)'},
 {value: '2003 (52)'},
 {value: '2003 (03)'},
 {value: '2003 (53)'},
 {value: '2004 (53)'},
 {value: '2004 (04)'},
 {value: '2004 (54)'},
 {value: '2005 (54)'},
 {value: '2005 (05)'}
]
values.each do |item|
  trim.model_years.where(item).first_or_create
end 
```

如果你使用`_by_value`， ActiveRecord 需要一个 ... 值！不是哈希:)

# php - 显示内容 POST

> ID：11747318
> 
> 赞同：0
> 
> 时间：2012-07-31T19:12:58.563
> 
> 标签：php, javascript, jquery

我想显示`POST`变量的内容，但我的输出是空的。

```
<?php
 $dir = '/var/www/devData/test';

 // create new directory with 777 permissions if it does not exist yet
 // owner will be the user/group the PHP script is run under
 if ( !file_exists($dir) ) {
  mkdir ($dir, 0777);
 }

         $stringData =  print_r($_POST['data'], true);
         $file = "/var/www/devData/test/ciao.txt"; 
         $fh = fopen($file, 'a+') or die("can't open file");
         $fla = 0;

        $arr = array();
        $i = 0;
        while(!feof($fh)) {
                    $theData = fgets($fh, filesize($file));
                    array_push($arr,$theData);
                    //echo $arr[$i]; 
                    $i++;
         }
         echo $stringData;

         fclose($fh); 

 ?> 
```

当我调用函数`fwrite`时，变量`$stringData`被存储到文件中。

这是调用 php 文件的函数：

```
$.post("JS/foo.php", {data: options_label}, function(result){alert(options_label) }, "json"); 
```

`options_label`数组在哪里。

我尝试使用`decode_json`等，但`$stringData`仍然是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:57:05.330

我认为问题出在这里：

```
$stringData =  print_r($_POST['data'], true); 
```

如果要将 $_POST 的内容存储在 file.txt 中，则应将 $_POST['data'] 转换为如下字符串：

```
$stringData = "";

foreach ($_POST['data'] as $key=>$val) {
    $stringData .= $key . ": " . $val . "\n\r";
} 
```

# java - StreamedContent：下载完成，但文件为空

> ID：11747320
> 
> 赞同：1
> 
> 时间：2012-07-31T19:13:02.047
> 
> 标签：java, postgresql, primefaces

这是我在论坛上的第一个问题，希望你能帮助我。 **我的场景：**

1.  基于我想从浏览器下载的文件
2.  我正在使用 primefaces、FileDownload 和 StreamedContent

**问题**

问题是下载文件 0Bytes

**我的view.xhtml：**

```
<p:commandButton id="downloadLink" value="Descargar" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop)"   
                                         rendered="#{not anexoController.ingresaDatos}" icon="ui-icon-arrowthichk-s">  
                            <p:fileDownload value="#{anexoController.file}" />  
                        </p:commandButton> 
```

**我的下载管理器**

```
 public StreamedContent getFile() {
    file = null;
    byte[] bytes = anexoActual.getArchivo(); //anexoActual.getArchivo.length = 53508
    String nombre = anexoActual.getNombre(); 
    String formato = anexoActual.getFormato();
    InputStream stream = new ByteArrayInputStream(bytes);
    try {
        stream.read(bytes);
    } catch (IOException ex) {
        Logger.getLogger(AnexoController.class.getName()).log(Level.SEVERE, null, ex);
    }
    file = new DefaultStreamedContent(stream, formato, nombre);
    return file; //file.steam.buf.length = 53508
} 
```

如您所见，文件到达长度为 53508 字节的文件，但是当下载完成时，我唯一知道文件名和数据类型

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T19:17:02.803

看看这段代码：

```
try {
    stream.read(bytes);
} catch (IOException ex) {
    Logger.getLogger(...)
} 
```

您正在从流中*读取*- 返回包含要开始的数据的字节数组。你为什么这样做？它将流定位在末尾。

只需删除该块，它可能会很好。

# java - 加载bean时如何获取实际值而不是占位符？

> ID：11747321
> 
> 赞同：0
> 
> 时间：2012-07-31T19:13:03.907
> 
> 标签：java, spring

在加载 bean 时，我得到的是占位符而不是它的属性值。

属性文件

```
tm.web.keystore.key.password=WaheeD
tm.web.tcp.backlog=1024
tm.web.min.jetty.threads=8
tm.web.max.jetty.threads=25 
```

appcontext.xml 文件

```
<bean class="com.intel.ssg.mconsole.core.web.WebServer" id="webServer">
    <property name="port" value="${tm.web.port}" />
    <property name="address" value="${tm.web.address}" />
    <property name="warLocation" value="${tm.home}/mconsole.war" />
    <property name="secure" value="${tm.web.secure}" />
    <property name="keystoreLocation" value="${tm.web.keystore.location}" />
    <property name="keystorePassword" value="WaheeD" />
    <property name="keyPassword" value="${tm.web.keystore.key.password}" />
    <property name="tcpBacklog" value="${tm.web.tcp.backlog}" />
    <property name="minJettyThreads" value="${tm.web.min.jetty.threads}" />
    <property name="maxJettyThreads" value="${tm.web.max.jetty.threads}" />
</bean> 
```

通过编组器加载它

```
 try {
     FileInputStream fis = new FileInputStream(getAppContextFile());
     try {
         return (Beans) JAXBUtil.getUnmarshaller().unmarshal(fis);
     } finally {
         fis.close();
     } 
```

在 Beans 中，对于 bean webServer 端口，我得到的价值是 ${tm.weberver.port}，而不是它的确切值。假设是 8443 端口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:44:25.990

您发布了一个没有任何端口号属性的属性文件，一个使用 的上下文文件`${tm.web.port}`，并且您的文本说您正在使用`${tm.weberver.port}`.

我看到三个可能的地方你的错误。这是假设您实际上正在设置其他属性。如果没有，请参阅 Andrey 的评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:44:33.767

您不需要从 ApplicationContext.xml 中明确加载 bean。

确保存在以下内容：

*   在您的 ApplicationContext.xml 中，您的属性文件必须有一个属性加载器，例如[PropertyPlaceholderConfigurer](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/beans/factory/config/PropertyPlaceholderConfigurer.html)
*   在您的应用程序中，需要应用程序上下文加载器。您当前的框架中可能内置了一个，例如[Spring MVC 的 DispatcherServlet 中的](http://www.javabeat.net/2011/01/spring-mvc-dispatcherservlet-example/)WebApplicationContext 。如果您刚开始，您可以使用[ClassPathXmlApplicationContext](http://www.springbyexample.org/examples/intro-to-ioc-creating-a-spring-application.html)。

# ruby - 如何改进这个小的 Ruby 正则表达式片段？

> ID：11747322
> 
> 赞同：0
> 
> 时间：2012-07-31T19:13:04.170
> 
> 标签：ruby, regex

## 我该如何改进呢？

此代码的目的是用于从表单中捕获 hash_tags #twittertype 字符串的方法 - 解析单词列表并确保所有单词都被分离出来。

```
WORD_TEST = "123 sunset #2d2-apple,#home,#star #Babyclub, #apple_surprise #apple,cats    mustard#dog , #basic_cable safety #222 #dog-D#DOG#2D "
SECOND_TEST = 'orion#Orion#oRion,Mike' 
```

**这是我的问题区域 RegXps ......**

```
_string_rgx = /([a-zA-Z0-9]+(-|_)?\w+|#?[a-zA-Z0-9]+(-|_)?\w+)/

add_pound_sign = lambda { |a| a[0].chr == '#' ? a : a='#' + a; a} 
```

我不太了解正则表达式：因此需要从扫描结果中收集第一个[元素] - >它产生了奇怪的东西，但第一个元素始终是我想要的。

```
 t_word = WORD_TEST.scan(_string_rgx).collect {|i| i[0] }
 s_word = SECOND_TEST.scan(_string_rgx).collect {|i| i[0] }
 t_word.map! { |a| a = add_pound_sign.call(a); a }
 s_word.map! { |a| a = add_pound_sign.call(a); a } 
```

**结果就是我想要的。我只想从 Ruby 那里得到见解 | 正则表达式大师就在那里。**

```
puts t_word.inspect

[ 
"#123", "#sunset", "#2d2-apple", "#home", "#star", "#Babyclub", 
"#apple_surprise", "#apple", "#cats", "#mustard", "#dog", 
"#basic_cable", "#safety", "#222", "#dog-D", "#DOG", "#2D"
]

puts s_word.inspect

[
"#orion", "#Orion", "#oRion", "#Mike"
] 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:23:35.827

让我们展开正则表达式：

```
(
   [a-zA-Z0-9]+ (-|_)? \w+
   | #? [a-zA-Z0-9]+ (-|_)? \w+
) 
```

`(`开始捕获组

`[a-zA-Z0-9]+`匹配一个或多个字母数字字符

`(-|_)?`匹配连字符或下划线并保存。该组可能会失败

`\w+`匹配一个或多个“单词”字符（字母数字 + 下划线）

`|` OR match this:

`#?` match optional `#` character

`[a-zA-Z0-9]+` match one or more alphanumeric characters

`(-|_)?` match hyphen or underscore and capture. may fail.

`\w+` match one or more word characters

`)` end capature

I'd rather write this regex like this;

```
(#? [a-zA-Z0-9]+ (-|_)? \w+) 
```

or

```
( #? [a-zA-Z0-9]+ (-?\w+)? ) 
```

or

```
( #? [a-zA-Z0-9]+ -? \w+ ) 
```

(all are reasonably equivalent)

You should note that this regex will fail on hashtags with unicode characters, eg `#Ü-Umlaut, #façade`etc. You are also limited to a two-character minimum length (`#a` fails, `#ab` matches) and may have only one hyphen (`#a-b-c` fails / would return `#a-b`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:49:51.257

I would reduce your Regex pattern such as this:

```
WORD_TEST = "123 sunset #2d2-apple,#home,#star #Babyclub, #apple_surprise #apple,cats    mustard#dog , #basic_cable safety #222 #dog-D#DOG#2D "
foo = []
WORD_TEST.scan(/#?[-\w]+\b/) do |s|
    foo.push( s[0] != '#' ? '#' + s : s )
end 
```

# html - CSS Background-Size 不适用于静态颜色

> ID：11747325
> 
> 赞同：16
> 
> 时间：2012-07-31T19:13:06.270
> 
> 标签：html, css

我的 CSS 很糟糕，我需要为我完成一些复杂的事情。

我有一个包含数据的表格，我有一列我有类似的东西`Qty Assigned / Qty Requested`。我计算分配的百分比，因此分配的 10 个中的 5 个将是 50%。现在，我想在`TD`匹配 %. 所以 50% 将是 TD 的一半，比如说红色。

我试过使用`background-color: red; background-size: <?php echo $BgPct; ?>%;`，但它不起作用。

有人有解决方案吗？我什么都可以用。我也有 jQuery。我不在乎它是否是 CSS1/2/3，但它需要准确，所以 66% 不是 75% 的背景图片。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-12-04T12:47:11.953

你可以用`linear-gradient`这个

例如，如果您需要 50% 的红色

```
td {
  background: linear-gradient(to right, red 50%, transparent 0);
} 
```

演示：

```
table {
  border-collapse: collapse;
}

td {
  border: 1px solid gray;
  padding: 10px;
}

.half {
  background: linear-gradient(to right, red 50%, transparent 0);
}

.one-third {
  background: linear-gradient(to right, red 33.33%, transparent 0);
}

.three-quarters {
  background: linear-gradient(to right, red 75%, transparent 0);
}
```

```
<table>
  <tr>
    <td class="half">50%</td>
  </tr>
  <tr>
    <td class="one-third">33%</td>
  </tr>
  <tr>
    <td class="three-quarters">75%</td>
  </tr>
</table>
```

有意使用零`0`秒值以避免重复第一个值。这是有效的，因为梯度中的下一个值不能小于上一个。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T19:20:20.900

您可以将一个 div 放在另一个 div 中。使两个 div 具有相同的高度。内部 div 将具有背景颜色（红色）。然后你可以将 div 的宽度设置为 % ，这就是它将被填充多少。

这就是 twitter bootstrap 实现其进度条的方式。如果您想要一个垂直填充条，我认为您可以将高度设置为 % 并使宽度相同。

这是 twitter 引导示例：

[http://cssdeck.com/labs/twitter-bootstrap-progress-bars](http://cssdeck.com/labs/twitter-bootstrap-progress-bars)

单击详细信息选项卡以查看源代码。

一个基本的实现示例：

```
<div style="width:50%">
    <div style="width: 50%; background-color:red; text-align:center">Hello</div>
</div> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-08T18:50:40.820

正如评论中所建议的，我在将单个像素拉伸到表格单元格`background-image`的适当百分比方面取得了很好的成功。`background-size`这适用于所有现代浏览器 (IE9+)。

`div`这具有独立于您可能想要应用于表格单元格的任何其他样式的优点（超过使用附加元素来包含“彩色条”），例如`text-align`等。它自然会出现在单元格内容和弯曲的后面如果使用百分比来填充表格单元格。

### CSS：

```
td.bargraph {
    background:transparent url(/img/dot-green.gif) 0 center no-repeat;
    text-align: center;
} 
```

### HTML：

```
<td class="bargraph" style="background-size:<?=$perc?>% 80%"><?=$perc?>%</td> 
```

`$perc`你计算的百分比在哪里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T19:20:30.517

我会在你想要效果的`div`每个 s 中放置一个红色的s 。`td`然后使用jQuery获取里面的数字（字符串）`td`并将其变成一个变量，然后您可以使用它来设置`div`.

# wpf - 在运行时使用级联组合框添加新的 DataGrid 行？

> ID：11747327
> 
> 赞同：1
> 
> 时间：2012-07-31T19:13:18.440
> 
> 标签：wpf, mvvm, datagrid, combobox

如果愿意，请耐心等待，我是 WPF MVVM 开发的新手。

我正在处理的实用程序（WPF 客户端应用程序）包含一个 4 列数据网格，它在指定的时间段内向用户显示当前可用的数据。返回的记录可能包含完成记录所需的全部或部分数据。用户应该能够修改缺失的部分或完全添加新行以填充缺失的记录。4 列中的 3 列包含只有有效选项的组合框。组合框是级联的，因此第一个组合确定组合 2 和 3 的内容。第 4 列是简单的价格列。

我已经设法让网格与默认返回数据完美配合。组合框正确填充，并将当前记录的值显示为组合中的选定项。

我的问题是添加新行。我一直在努力完成这个内联。这意味着用户单击列表底部的空白行或使用标签，然后将新行添加到集合中接受输入。第一个组合填充在空行中，但选择一个值不会将更改级联到其他 2 个组合。不过，它在填充的行中起作用。

有道理？我可能错过了一些如此愚蠢的简单事情，以至于当有人指出时我会踢自己，但现在我正在撕掉我剩下的小头发。

那么，是否可以让新用户通过跳到下一行来添加一行？我需要什么特别的东西来连接新行中的级联组合框吗？

谢谢！

这是我的 XAML（剥离后基本上是伪代码，所以不要介意拼写错误）：

```
<Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:WpfApplication2"
    mc:Ignorable="d"
    d:DesignHeight="768"
    d:DesignWidth="1024">

<Window.DataContext>
    <local:MainWindowViewModel />
</Window.DataContext>
<Grid>
    <StackPanel>
        <DataGrid AutoGenerateColumns="False"
                    ItemsSource="{Binding Prices}"
                    SelectedItem="{Binding SelectedPrice}"
                    CanUserAddRows="True">
            <DataGrid.Columns>

                <!--  Price Group  -->
                <DataGridTemplateColumn MinWidth="120"
                                        Header="Price Group">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ComboBox x:Name="cboPriceGroup"
                                        ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.PriceGroups}"
                                        DisplayMemberPath="Name"
                                        SelectedItem="{Binding PriceGroupObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!--  Option 1  -->
                <DataGridTemplateColumn MinWidth="120"
                                        Header="Option1">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ComboBox x:Name="cboOption1"
                                        ItemsSource="{Binding PriceGroupObject.Options1}"
                                        DisplayMemberPath="Code"
                                        SelectedValuePath="Id"
                                        SelectedValue="{Binding Option1Id, Mode=TwoWay}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!--  Option 2  -->
                <DataGridTemplateColumn MinWidth="120"
                                        Header="Option2">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ComboBox x:Name="cboOption2"
                                        ItemsSource="{Binding PriceGroupObject.Options2}"
                                        DisplayMemberPath="Code"
                                        SelectedValuePath="Id"
                                        SelectedValue="{Binding Option2Id, Mode=TwoWay}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!--  Price  -->
                <DataGridTemplateColumn MinWidth="120"
                                        Header="Price">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBox x:Name="txtPrice"
                                        Text="{Binding Price, Mode=TwoWay}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

            </DataGrid.Columns>
        </DataGrid>
    </StackPanel>

</Grid> 
```

这是 ViewModel：

```
 // ViewModelBase implements INotifyPropertyChanged
public class MainWindowViewModel : ViewModelBase    
{
    #region Declarations
    // Comes From Backend.Services
    private IPriceListService _PriceListService;

    private ObservableCollection<Price> _Prices;
    private Price _SelectedPrice;

    private IEnumerable<PriceGroup> _PriceGroups;
    private PriceGroup _SelectedPriceGroup;

    // Same for Options1, Options2

    #endregion

    #region Properties

    public ObservableCollection<Price> Prices
    {
        get { return _Prices; }
        set
        {
            if (_Prices != value)
            {
                _Prices = value;
                OnPropertyChanged("Prices");
            }
        }
    }
    public Price SelectedPrice
    {
        get { return _Price; }
        set
        {
            if (_Price != value)
            {
                _Price = value;
                OnPropertyChanged("SelectedPrice");
            }
        }
    }

    // Same for PriceGroups, Options1, Options2

    #endregion

    #region Constructor
    public MainViewModel()
        : this(new FakePriceListService())
    {

    }
    // Constructor
    public MainViewModel(IPriceListService priceListService)
    {
        _PriceListService = priceListService;
        InitializeViewModel();
    }

    protected override void InitializeViewModel()
    {
        // Test ID
        LoadFuturesPrices(12345);
        LoadPriceGroups();
        base.InitializeViewModel();
    }
    #endregion

    #region Methods

    void LoadFuturesPrices(short FinancialPeriodId)
    { 
        Prices = _PriceListService.GetFuturesPriceList(FinancialPeriodId);
    }

    void LoadPriceGroups()
    {
        PriceGroups = _PriceListService.GetPriceGroups();
    }

    void PriceGroupSelected(string PriceGroupId)
    {
        SelectedPriceGroup = (from p in PriceGroups where p.Name == PriceGroupId select p).SingleOrDefault();
    }
    #endregion

} 
```

# jquery - 为什么这些文件丢失了？

> ID：11747335
> 
> 赞同：0
> 
> 时间：2012-07-31T19:13:50.357
> 
> 标签：jquery, zend-framework, jquery-ui-datepicker

我正在尝试将 jQuery datepicker 添加到`Zend_Form`. 但它给出了两个警告和一个错误。我的示例代码：

```
$startdate = new ZendX_JQuery_Form_Element_DatePicker( 'startdate' );
$startdate->setLabel('Start Date')
          ->setRequired(true)
          ->setAttrib('size', '10')
          ->setDecorators($formJQueryElements); 
```

* * *

> 错误：警告：include_once(ZendX/JQuery/Form/Element/DatePicker.php) [function.include-once]：无法打开流：/usr/local/ZendFramework/library/Zend/Loader 中没有这样的文件或目录。第 146 行的 php

* * *

> 警告：include_once() [function.include]：无法打开“ZendX/JQuery/Form/Element/DatePicker.php”以包含（include_path='/opt/lampp/htdocs/framework/students/application/../library： /opt/lampp/htdocs/framework/students/library:include_path = .:/usr/share/php:/usr/local/ZendFramework/library') 在 /usr/local/ZendFramework/library/Zend/Loader.php 上第 146 行

* * *

> 致命错误：在第 46 行的 /opt/lampp/htdocs/framework/students/application/forms/Student.php 中找不到类“ZendX_JQuery_Form_Element_DatePicker”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T02:12:01.170

ZendX 是一个额外的库，并未包含在 Zend Framework 的所有发行版中。确保您已经从[Zend Framework 下载页面下载](http://framework.zend.com/download/latest)了标题中包含*完整*的发行版之一。

解压缩压缩文件后，您会在文件夹中找到`ZendX`库，将文件夹`extras/library/ZendX`复制`ZendX`到您保留当前文件夹的任何位置`Zend`（而不是 Zend 文件夹中），

就我而言，我将 Zend 框架库保存在：`C:\Zend\ZendServer\share\ZendFramework\library`. 所以我会在这个位置有 2 个文件夹`Zend`和`ZendX`.

`Zend`并且`ZendX`两者在自动加载器中都有默认命名空间，所以如果你将它们存储在同一个地方，如果一个工作，另一个工作。

或者...将两者都放入您的应用程序库中，例如：

```
/application
/library
    /Zend
    /ZendX 
```

这也将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:07:48.110

您使用 ZendX_JQuery_Form_Element_DatePicker 有什么特别的原因吗？我正在使用带有像这样的普通 Zend Form Text 元素的 jquery datepicker（来自 jquery ui 包）。

```
 // Add start_date element
    $start_date = new Zend_Form_Element_Text('start_date'); 
    $start_date->setLabel('Start Date')
          ->setRequired(true)
          ->setAttrib('class', 'datepicker')
          ->setDecorators($this->elementDecorators);
    $this->addElement($start_date); 
```

添加 'datepicker' 类是真正需要的。这回避了您遇到的问题 - 这似乎与 ZendX 库的使用有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T19:20:39.863

我对 Zend 框架了解不多，但是 Zend 框架是 PHP 的服务器端技术，而 Jquery 是客户端技术。换句话说，Jquery 日期选择器工作与 Zend 框架之间没有直接关系。

您必须检查页面的 HTML 输出，包括与日期选择器一起使用的表单元素和页面中的 Javascript 包含文件。只需在浏览器中查看页面源，搜索缺少的内容。

# c++ - boost::circular_buffer 是否确认自动弹出操作

> ID：11747336
> 
> 赞同：3
> 
> 时间：2012-07-31T19:13:53.523
> 
> 标签：c++, boost

是否必须强制存储`std::shared_ptr`？`boost::circular_buffer`如果我有一个`boost::circular_buffer<T*>`循环队列`delete`s 是在第 n+1 次插入后自动弹出的元素吗？

如果不是，那么我将如何删除弹出的元素并管理内存泄漏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:28:58.957

当然存储s 不是*强制性*`shared_ptr`的，你可以存储很多不同的类型，例如简单的`int`

如果您存储指针，容器不知道它们指向堆上的对象，因此在用新元素覆盖现有元素时它不会删除它们，它不知道删除指针是安全的。指针只是被一个新值覆盖。如果那是指向堆上对象的最后一个指针，则说明存在内存泄漏。这在页面下方不到四分之一的地方被非常清楚地[记录下来。](http://www.boost.org/doc/libs/1_50_0/libs/circular_buffer/doc/circular_buffer.html#caveats)也许您应该阅读文档。

如果您存储指向堆对象的指针并且您没有其他方法来管理它们，那么是的，存储`shared_ptr<T>`是明智的（但不是强制性的）。

# android - 修复 Android 屏幕底部的内容

> ID：11747340
> 
> 赞同：2
> 
> 时间：2012-07-31T19:14:07.970
> 
> 标签：android, android-layout

您如何使按钮和其他内容固定在屏幕底部，而不管其他内容如何？

我有这样的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ScrollView01"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:fillViewport="true" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_gravity="center_horizontal"
            android:layout_weight="1"
            android:gravity="center_horizontal" >

            <TextView ... />

            ...

            <TextView ... />

        </LinearLayout>

        <Button
            android:id="@+id/ButtonMain"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_gravity="center_horizontal"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1"
            android:text="@string/button_text"
            android:textSize="30px"
            android:textStyle="bold"
            android:width="200px" />

    </LinearLayout>

</ScrollView> 
```

我希望 ButtonMain 的底部始终位于屏幕底部。但是，按钮呈现在线性布局中内容的正下方，而不是屏幕底部。我已经尝试过`layout_gravity="center_horizontal|bottom"`，以及将按钮放在其自己的具有相似重力的 LinearLayout 中，但这不起作用。

我怎样才能完成这个布局？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:22:51.613

您可以使用 RelativeLayout 而不是 LinearLayout。通过添加以下标签，它将被疏远到屏幕的按钮

```
android:layout_alignParentBottom="true" 
```

如果您希望按钮始终位于底部，则应将 ScrollView 放在 RelativeLayout 内，并将按钮放在底部

见：http: [//developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:22:54.817

将滚动视图包装在相对布局中，但 xml 文件中的按钮首先将 alignParentBottom 字段设置为 true。然后将scrollView放入并将其设置在Buttons上方。然后滚动视图将填充其余空间并始终位于按钮上方，这些按钮将一直显示而不滚动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T19:27:18.197

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scroller"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/txt1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="Hello"
            android:textSize="25sp" />

        <TextView
            android:id="@+id/txt2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="Hello2"
            android:textSize="25sp" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="bottom|center"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/ButtonMain"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="5dp"
                android:layout_marginRight="5dp"
                android:text="click me"
                android:textSize="30px"
                android:textStyle="bold" />
        </LinearLayout>
    </LinearLayout>

</ScrollView> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T00:24:26.337

根据上面的评论，OP 想要`Button`他的`ScrollView`. 但是，XML 只能有一个根元素，因此您必须将`ScrollView`and包装`Button`在某种布局中。

我在下面使用您的初始布局和尺寸演示了这一点：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/ScrollView01"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:fillViewport="true" >

        <!-- You can remove one of these two LinearLayouts, since they just nest each other. Which one you want to remove is up to you. -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:gravity="center_horizontal" >

                <TextView ... />

                ...

                <TextView ... />

            </LinearLayout>

        </LinearLayout>

    </ScrollView>

    <Button
        android:id="@+id/ButtonMain"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:text="@string/button_text"
        android:textSize="30px"
        android:textStyle="bold"
        android:width="200px" />

</LinearLayout> 
```

如果您有任何问题，请告诉我！

# java - ganymed SSH2 java

> ID：11747341
> 
> 赞同：0
> 
> 时间：2012-07-31T19:14:09.163
> 
> 标签：java, ssh

我正在使用 ganymed SSH2 java 库使用公钥身份验证连接到服务器。我已经创建了公钥/私钥对并将公钥 (mykey.pub) 上传到我的服务器的 /.ssh2 目录中。我在本地机器上有私钥。

密钥信息：2048 位 dsa 密钥对 (ssh2)

我正在做这样的事情：

```
File keyfile = new File("C:\\keys\\mykey");                  
String keyfilePass = "a"; // will be ignored if not needed

        try
        {

            Connection conn = new Connection(hostname);
            conn.connect();

            boolean isAuthenticated = conn.authenticateWithPublicKey("myusername", keyfile, keyfilePass); 
           //I get an error at this line 
```

我得到的错误是：

```
Caused by: java.io.IOException: Invalid PEM structure, '-----BEGIN...' missing
    at ch.ethz.ssh2.crypto.PEMDecoder.parsePEM(PEMDecoder.java:138) 
```

任何人都可以帮忙吗？还有比这更好的图书馆吗？

编辑：关键文件

```
---- BEGIN SSH2 ENCRYPTED PRIVATE KEY ----
Subject: username    Comment: "2048-bit dsa, username@host, Tue Jul 31 2012 13:12:48 -\
0500"
KEY   
---- END SSH2 ENCRYPTED PRIVATE KEY ---- 
```

解决方案：

我发现了问题，密钥必须转换为 OPENSSH 格式（为此我使用了 puttygen）。这个 java 库只接受 openssh 格式的私钥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T02:19:11.690

标题“BEGIN SSH2 ENCRYPTED PRIVATE KEY”表示您的私钥是由 ssh.com 的专有 ssh 系统生成的。

> 还有比这更好的图书馆吗？

如果您的密钥未加密，JSch 将接受它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T23:16:02.513

您可以自己看到密钥不是预期的格式。你是如何产生它的？

# java - 通过 web 服务和 java 项目将文件上传到 postgresql db

> ID：11747342
> 
> 赞同：0
> 
> 时间：2012-07-31T19:14:14.757
> 
> 标签：java, postgresql, rest, tomcat, jersey

我正在尝试为我现有的 java 项目创建一个 Web 服务。在我的 java 项目中，当输入文件路径位置并将其插入 Postgresql 数据库时，它能够处理文档。我制作了一个动态 Web 项目（使用 Tomcat 6、RESTful Web 服务和球衣）。到目前为止，在 Web 项目中，它在 localhost 浏览器上有一个“选择文件”按钮，允许我选择一个文件。之后，我可以“提交”文件；但是现在它只是将文档上传到我计算机上的不同位置。我是否可以“选择文件”，然后将文件路径位置传递给我的 java 项目，该项目将处理它并将其插入我的数据库中？如果是这样，我将如何做到这一点？

任何想法都非常感谢，感谢您的宝贵时间！

伊丽莎白

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:20:53.263

您需要使用 java servlet 并查看以下库： [http://commons.apache.org/fileupload/](http://commons.apache.org/fileupload/) 从那里应该很简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:22:49.550

在 Java servlet 中，您需要实现 doPost 方法。在该方法中，使用来自 Apache [http://commons.apache.org/fileupload/](http://commons.apache.org/fileupload/)的 FileUpload API 从客户端访问任何上传的文件。

这里有一些让你开始的东西：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
     DiskFileItemFactory disk = new DiskFileItemFactory();
     disk.setRespository(new File(TEMP_STORAGE));

     ServletFileUpload upload = new ServletFileUpload(disk);
     upload.setFileSizeMax(MAX_FILE_SIZE);
     List<FileItem> files = upload.parseRequest(request);

     //...get actual file with files.get(index).getInputStream() and process them....
     .....
} 
```

但是在实施任何东西之前阅读他们的文档

在客户端，有一个带有这种标记的表单：

```
<form enctype="multipart/form-data" ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T00:57:32.923

没有可靠的方法可以简单地将文件名从客户端发送到服务器，然后让服务器获取文件。相反，如果您希望您的软件比现有的 Postgres 命令行客户端更有用，您需要上传整个文件（即使客户端和服务器在同一台机器上）。

如果您希望接受大文件，我强烈建议您使用流式方法将文件内容直接从请求推送到数据库中。否则，您将面临对堆空间施加很大压力的风险（例如，如果您尝试将整个文件加载到内存中）或在写入磁盘以缓冲文件时遇到性能和同步问题。由于 JDBC API 能够将数据流式传输到数据库，因此最好的办法是将请求的 InputStream 直接连接到数据库。

请注意，包括 Apache commons-upload 和 Servlet 3.0 文件上传功能在内的大多数“文件上传”API 都被操纵将文件上传到磁盘上的临时文件，然后在处理请求后将其删除。我不相信任何提供的流媒体功能，因此您可能必须自己编写。

# c++ - 为什么“开始（无）调试”（F5 和 Ctrl+F5）都没有创建 CppUnit *.xml 报告文件？

> ID：11747344
> 
> 赞同：0
> 
> 时间：2012-07-31T19:14:30.450
> 
> 标签：c++, unit-testing, visual-studio-2005, cppunit

首先，我想在 stackoverflow 上欢迎大家，因为这是我的第一个问题。
我在 Visual Studio 2005 上使用 CppUnit 生成输出 *.xml 文件时遇到了困难。当我使用 F5 或 Ctrl+F5（开始调试或不调试开始）运行代码时，它不会创建报告文件。但是当我“手动”运行它（通过 /debug 中的 *.exe 文件）时，会创建报告文件。可能是什么原因？

测试应用程序.cpp：

```
#include "Test_myFuzzy.h"

#include <cppunit/ui/text/TestRunner.h>
#include <cppunit/XmlOutputter.h>

int main(){
    CppUnit::TextUi::TestRunner runner;

    std::ofstream ofs("tests.xml"); 
    CppUnit::XmlOutputter* xml = new CppUnit::XmlOutputter(&runner.result(),ofs); 
    xml->setStyleSheet("report.xsl");
    runner.setOutputter(xml);

    runner.addTest(Test_myFuzzy::suite());
    runner.run();

    return 0;
} 
```

感谢你的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:18:14.100

```
std::ofstream ofs("tests.xml"); 
```

您没有指定 test.xml 文件的创建位置。因此，默认情况下，它将在 exe 所在的同一文件夹中创建。

解决此问题的一种方法是指定创建/查找文件的位置，`"C:\test.xml"`或者您在项目文件夹中进行搜索，因为该文件可能是在调试箱中创建的。

# jquery - simpleScroll - jQuery 问题

> ID：11747348
> 
> 赞同：0
> 
> 时间：2012-07-31T19:14:54.570
> 
> 标签：jquery, simplyscroll

我在工作中得到了一个项目，它使用 simpleScroll 制作两层背景图像。您可以访问[newcombspring.stifel-marcin.com](http://newcombspring.stifel-marcin.com)查看该站点。

无论如何，当您单击顶部背景并拖动它时，下半部分会完全消失。这可能是什么原因造成的？

另外，我尝试使用`autoMode: 'loop'`让背景继续，但它仍然停止。关于我还能尝试什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:43:06.267

发生这种情况是因为父级`div`的`height`背景小于背景本身。

看起来您的背景高度为 620 像素，但`.scroll`div 的高度为 300 像素。

在您的 stylesheet.css 中，您可以修改

```
.scroll {
height: 300px;
} 
```

至

```
.scroll {
height: 620px;
} 
```

# javascript - 灯箱仅显示第一张图片

> ID：11747349
> 
> 赞同：0
> 
> 时间：2012-07-31T19:15:02.417
> 
> 标签：javascript, image, load, lightbox, thumbnails

如果您翻转缩略图，我有一个主图像，每次都会加载不同的图像。有 3 个缩略图。

还有一个灯箱效果，这就是我的问题发生的地方。每次单击主图像时，无论哪个拇指已加载到主图像，图像 1 都是灯箱中显示的那个。

我清楚地看到问题出在哪里，但我只是想知道如何制作它，以便加载在 mainImage 容器中的图像是灯箱中显示的图像。

这是我的代码，也许它解释得更好。

谢谢！

```
<div id="thumbs">
<img class="thumbSelected" src="images/<?php echo $row[thumb1]; ?>.jpg"  /><br />
<img src="images/<?php echo $row[thumb2]; ?>.jpg"  /><br />
<img src="images/<?php echo $row[thumb3]; ?>.jpg"  />
</div>

<div class="mainImage">
<a href="images/<?php echo $row[image1]; ?>.jpg" rel="lightbox" title="<?php echo $row[name]; ?>">
<img class="mainImage" src="images/<?php echo $row[image1]; ?>.jpg" />
</a>
</div>
<script> ////large: ITEM1_01_large      small: ITEM1_01_thumb
//
$('#thumbs').delegate('img', {
mouseover: function(){
    $('.mainImage').attr('src',$(this).attr('src').replace('thumb','image'));
    var $this = $(this),
    index = $this.index();
    $("#thumbs img").removeClass('thumbSelected');
        $this.addClass('thumbSelected');
        $("#big-image img").eq(index).show().siblings().hide();
}});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:50:45.627

我真的看不出你在做什么。但是，如果 jQuery 找到第一个元素并在您使用 id 选择器时停止。 **如果要选择多个元素，则需要使用class。** 这就是上课的目的。

# php - php检查数组值

> ID：11747355
> 
> 赞同：0
> 
> 时间：2012-07-31T19:15:49.140
> 
> 标签：php, arrays

嘿，我想找出一种方法来查看数组中的所有值：

```
 $sql = "select * from product where type = ? limit 1";
$query = self::$__CONN__->prepare($sql);
$query->execute(array($type)) or die(print_r($query->errorinfo())); 
```

我是 PHP 新手，我不确定填充查询字符串的所有操作。我猜第一个查询正在连接到服务器并发送查询，但是我如何查看它在上面的数组中返回的内容？

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:21:08.463

只需转储 $type 变量

```
var_dump($type); 
```

或者，如果您对数组包装器本身感兴趣

```
var_dump(array($type)); 
```

# php - Facebook Score API - 获取我的应用/游戏的所有分数

> ID：11747360
> 
> 赞同：0
> 
> 时间：2012-07-31T19:16:00.310
> 
> 标签：php, javascript, facebook

我遇到了麻烦...问题是，在 Facebook 上，我如何返回针对我的应用/游戏发布的所有分数的列表？

这是我的代码：

```
function lbInit() {
            FB.api('/' + globalFBObj.appID + '/scores', 'get', function(response) {
                console.log("Getting scores...");
                console.log(response);

                //pass array into Lboard() and construct the leaderboard
                console.log("Creating the Leaderboard...");
                Lboard(response.data); 
            });
        } 
```

但唯一返回的是当前用户发布的分数......

我请求以下权限：范围：'email,publish_actions,user_games_activity,friends_games_activity'

# html - 如何在没有库的情况下交换 HTML 上的图像（如 z-index）

> ID：11747361
> 
> 赞同：0
> 
> 时间：2012-07-31T19:16:01.883
> 
> 标签：html, canvas, z-index, swap, drawimage

我有个问题 ！在 html5 画布中，我创建了“x”个图像。最后创建的图像总是在另一个之上。是否可以在不需要库的情况下交换图像的深度？（我不打算颠倒变量的顺序）我想要这样的东西（没有动力学）： [http ://www.html5canvastutorials.com/kineticjs/html5-canvas-shape-layering-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-shape-layering-with-kineticjs/)

所以，这是我正在使用的代码：

```
 var canvas = document.getElementById("myCanvas");
    var context = canvas.getContext("2d");  

    var imageObj = new Image();
    imageObj.onload = function() {
      context.drawImage(imageObj, 69, 50);
    };
    imageObj.src = "image1.png";

    var imageObj2 = new Image();
    imageObj2.onload = function() {
      context.drawImage(imageObj2, 40, 30);
    };
    imageObj2.src = "image2.png";

    /* I want to put "Image1.png" over "Image2.png" dynamically, for example, pressing a button, all this after render on the canvas */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:21:22.930

您绘制图像的顺序很重要。您需要先在背面绘制图像，然后再绘制更接近的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T03:09:21.580

首先绘制最远的图像。将图像放入数组中可能会有所帮助，这样您就可以遍历它们。

否则，就您的示例而言，这将在您`context.drawImage(imageObj, 69, 50);`最后绘制时修复它。把它想象成你会在纸上画出来；你最后画的高于你已经画的。

```
var canvas = document.getElementById("myCanvas");
var context = canvas.getContext("2d");  

var imageObj2 = new Image();
imageObj2.onload = function() {
  context.drawImage(imageObj2, 40, 30);
};
imageObj2.src = "image2.png";

var imageObj = new Image();
imageObj.onload = function() {
  context.drawImage(imageObj, 69, 50);
};
imageObj.src = "image1.png"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T19:20:49.997

为什么不为每个图像创建一个画布对象并显示/隐藏它们或调整 z-index？

# c# - 在实体框架 4.3 中设置命令超时

> ID：11747368
> 
> 赞同：33
> 
> 时间：2012-07-31T19:16:19.553
> 
> 标签：c#, .net, entity-framework, entity-framework-4.3, command-timeout

我找不到使用实体框架 4.3 及其 DbContext 设置 linq 查询的命令超时的方法。如何在实体框架中增加 Commandtimeout？

**编辑** 我实际上正在寻找命令超时增加。我混淆了这两者，是 sql 命令超时而不是连接。

谢谢

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-07-31T20:13:27.710

如果您使用 DbContext，您首先需要下拉到 ObjectContext：

```
((IObjectContextAdapter)context).ObjectContext.CommandTimeout = 180; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-01-06T15:02:13.487

我在 Context 类中添加了命令超时值，以尝试为填充我的应用程序的某些存储过程处理更长的处理时间。似乎已经成功了。

```
public partial class ExampleEntities : DbContext
    {
        public ExampleEntities()
            : base("name=ExampleEntities")
        {
            ((IObjectContextAdapter)this).ObjectContext.CommandTimeout = 180;
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            throw new UnintentionalCodeFirstException();
        } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-06-30T12:48:37.353

这个命令就够了。

```
((System.Data.Entity.Infrastructure.IObjectContextAdapter) context).ObjectContext.CommandTimeout
                = 180; 
```

# java - Jackson - 如何处理（反序列化）嵌套的 JSON？

> ID：11747370
> 
> 赞同：50
> 
> 时间：2012-07-31T19:16:26.987
> 
> 标签：java, json, serialization, jackson

```
{
  vendors: [
    {
      vendor: {
        id: 367,
        name: "Kuhn-Pollich",
        company_id: 1,
      }
    },
    {
      vendor: {
        id: 374,
        name: "Sawayn-Hermann",
        company_id: 1,
      }
  }]
} 
```

我有一个可以从单个“供应商”json 正确反序列化的 Vendor 对象，但我想将其反序列化为`Vendor[]`，我只是不知道如何让 Jackson 合作。有小费吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-06-26T06:10:27.833

这是一个粗略但更具声明性的解决方案。我无法将其归结为单个注释，但这似乎运作良好。也不确定大型数据集的性能。

鉴于此 JSON：

```
{
    "list": [
        {
            "wrapper": {
                "name": "Jack"
            }
        },
        {
            "wrapper": {
                "name": "Jane"
            }
        }
    ]
} 
```

这些模型对象：

```
public class RootObject {
    @JsonProperty("list")
    @JsonDeserialize(contentUsing = SkipWrapperObjectDeserializer.class)
    @SkipWrapperObject("wrapper")
    public InnerObject[] innerObjects;
} 
```

和

```
public class InnerObject {
    @JsonProperty("name")
    public String name;
} 
```

杰克逊伏都教的实施方式如下：

```
@Retention(RetentionPolicy.RUNTIME)
@JacksonAnnotation
public @interface SkipWrapperObject {
    String value();
} 
```

和

```
public class SkipWrapperObjectDeserializer extends JsonDeserializer<Object> implements
        ContextualDeserializer {
    private Class<?> wrappedType;
    private String wrapperKey;

    public JsonDeserializer<?> createContextual(DeserializationContext ctxt,
            BeanProperty property) throws JsonMappingException {
        SkipWrapperObject skipWrapperObject = property
                .getAnnotation(SkipWrapperObject.class);
        wrapperKey = skipWrapperObject.value();
        JavaType collectionType = property.getType();
        JavaType collectedType = collectionType.containedType(0);
        wrappedType = collectedType.getRawClass();
        return this;
    }

    @Override
    public Object deserialize(JsonParser parser, DeserializationContext ctxt)
            throws IOException, JsonProcessingException {
        ObjectMapper mapper = new ObjectMapper();
        ObjectNode objectNode = mapper.readTree(parser);
        JsonNode wrapped = objectNode.get(wrapperKey);
        Object mapped = mapIntoObject(wrapped);
        return mapped;
    }

    private Object mapIntoObject(JsonNode node) throws IOException,
            JsonProcessingException {
        JsonParser parser = node.traverse();
        ObjectMapper mapper = new ObjectMapper();
        return mapper.readValue(parser, wrappedType);
    }
} 
```

希望这对某人有用！

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-07-31T20:11:32.597

您的数据存在问题，因为您的数组中有内部*包装*对象。大概您的`Vendor`对象旨在处理`id`, `name`, `company_id`，但是这些多个对象中的每一个也都包装在具有单个属性的对象中`vendor`。

我假设您使用的是 Jackson [*Data Binding*](http://wiki.fasterxml.com/JacksonInFiveMinutes#Full_Data_Binding_.28POJO.29_Example)模型。

如果是这样，那么有两件事需要考虑：

第一个是使用特殊的 Jackson 配置属性。Jackson - 我相信从 1.9 开始，如果您使用的是 Jackson 的旧版本，这可能不可用 - 提供[`UNWRAP_ROOT_VALUE`](http://jackson.codehaus.org/1.9.4/javadoc/org/codehaus/jackson/map/DeserializationConfig.Feature.html#UNWRAP_ROOT_VALUE). 它专为将结果包装在要丢弃的顶级单一属性对象中的情况而设计。

所以，玩弄：

```
objectMapper.configure(SerializationConfig.Feature.UNWRAP_ROOT_VALUE, true); 
```

第二个是使用包装对象。即使在丢弃外包装对象之后，您仍然会遇到将`Vendor`对象包装在单一属性对象中的问题。使用包装器来解决这个问题：

```
class VendorWrapper
{
    Vendor vendor;

    // gettors, settors for vendor if you need them
} 
```

同样，`UNWRAP_ROOT_VALUES`您也可以定义一个包装类来处理外部对象，而不是使用 。假设您有正确`Vendor`的 ,`VendorWrapper`对象，您可以定义：

```
class VendorsWrapper
{
    List<VendorWrapper> vendors = new ArrayList<VendorWrapper>();

    // gettors, settors for vendors if you need them
}

// in your deserialization code:
ObjectMapper mapper = new ObjectMapper();
JsonNode rootNode = mapper.readValue(jsonInput, VendorsWrapper.class); 
```

VendorsWrapper 的对象树类似于您的 JSON：

```
VendorsWrapper:
    vendors:
    [
        VendorWrapper
            vendor: Vendor,
        VendorWrapper:
            vendor: Vendor,
        ...
    ] 
```

最后，您可以使用杰克逊[*树模型*](http://wiki.fasterxml.com/JacksonTreeModel)将其解析为`JsonNodes`，丢弃外部节点，并为`JsonNode`中的每个`ArrayNode`调用：

```
mapper.readValue(node.get("vendor").getTextValue(), Vendor.class); 
```

这可能会导致更少的代码，但它似乎并不比使用两个包装器更笨拙。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-01-25T18:32:33.280

@Patrick 我会稍微改进您的解决方案

```
@Override
public Object deserialize(JsonParser jp, DeserializationContext ctxt)
        throws IOException, JsonProcessingException {        
    ObjectNode objectNode = jp.readValueAsTree();
    JsonNode wrapped = objectNode.get(wrapperKey);
    JsonParser parser = node.traverse();
    parser.setCodec(jp.getCodec());
    Vendor mapped = parser.readValueAs(Vendor.class);
    return mapped;
} 
```

它工作得更快:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-24T15:20:40.350

我参加聚会已经很晚了，但一种方法是使用静态内部类来解包值：

```
import com.fasterxml.jackson.annotation.JsonCreator;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;

class Scratch {
    private final String aString;
    private final String bString;
    private final String cString;
    private final static String jsonString;

    static {
        jsonString = "{\n" +
                "  \"wrap\" : {\n" +
                "    \"A\": \"foo\",\n" +
                "    \"B\": \"bar\",\n" +
                "    \"C\": \"baz\"\n" +
                "  }\n" +
                "}";
    }

    @JsonCreator
    Scratch(@JsonProperty("A") String aString,
            @JsonProperty("B") String bString,
            @JsonProperty("C") String cString) {
        this.aString = aString;
        this.bString = bString;
        this.cString = cString;
    }

    @Override
    public String toString() {
        return "Scratch{" +
                "aString='" + aString + '\'' +
                ", bString='" + bString + '\'' +
                ", cString='" + cString + '\'' +
                '}';
    }

    public static class JsonDeserializer {
        private final Scratch scratch;

        @JsonCreator
        public JsonDeserializer(@JsonProperty("wrap") Scratch scratch) {
            this.scratch = scratch;
        }

        public Scratch getScratch() {
            return scratch;
        }
    }

    public static void main(String[] args) throws JsonProcessingException {
        ObjectMapper objectMapper = new ObjectMapper();
        Scratch scratch = objectMapper.readValue(jsonString, Scratch.JsonDeserializer.class).getScratch();
        System.out.println(scratch.toString());
    }
} 
```

但是，正如 pb2q 所指出的，与 结合使用可能[更](https://stackoverflow.com/a/11748184)`objectMapper.configure(SerializationConfig.Feature.UNWRAP_ROOT_VALUE, true);`容易`@JsonRootName("aName")`

# oracle - oracle插入日期时间错误

> ID：11747372
> 
> 赞同：-1
> 
> 时间：2012-07-31T19:16:29.980
> 
> 标签：oracle

在 oracle 中，我将字段 'time_entered' 作为日期类型，我像这样插入当前日期时间，它会给我错误。当前的语法是什么？特别是我想在我的时区下插入时间，而不是 Oracle 服务器时区。

谢谢。

```
insert into mytbl( TIME_ENTERED) 
values( SYSDATE); 
```

错误 ：

```
SQL Error: ORA-00984: column not allowed here
00984\. 00000 -  "column not allowed here" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:46:34.943

两种可能——

1.  您输入的列名`TIME_ENTERED`错误，或者表中存在一个名为`SYSDATE`的列（Oracle 无论如何都不应该允许该列）。
2.  `mytbl`是 PLSQL 表而不是数据库表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:23:30.617

您可以通过以下方式更改时区：

`ALTER SESSION SET TIME_ZONE = '-2:00';`

然后你可以使用：

`insert into mytbl( TIME_ENTERED) values( SYSDATE);`

`mytbl`但请确保named上没有这样的列`SYSDATE`。

# jquery - 如何使用 Jquery AJAX post 传递多维数组？

> ID：11747373
> 
> 赞同：9
> 
> 时间：2012-07-31T19:16:29.640
> 
> 标签：jquery, ajax, arrays, post

我一直在使用 Serialize() 将复选框表单数据与 Post() 一起传递给一个可以容纳多个相同类别项目的篮子。

当我使用提交按钮发布它们时，它可以正常工作，多个值被传递并显示在一个类别下。

但是，当我使用 Jquery serialize() 时，每个类别只会显示一个项目，并且总共只显示两个类别。这是一个数组问题，但我无法解决。

我应该使用其他 JQuery 函数来传递多维数组吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-31T19:23:50.287

jquery会直接取多维数组，不需要序列化。

```
var data = {
  foo:  123,
  bar:  456,
  rows: [
    {
      column1 : 'hello',
      column2 : 'hola',
      column3 : 'bonjour',
    },
    {
      column1 : 'goodbye',
      column2 : 'hasta luego',
      column3 : 'au revoir',
    },
  ],
  test1:{
    test2: {
      test3:  'baz'
    }
  }
}; 
```

_在您的 PHP 文件中发布数据如下所示

```
Array
   (
    [foo] => 123
    [bar] => 456
    [rows] => Array
        (
            [0] => Array
                (
                    [column1] => hello
                    [column2] => hola
                    [column3] => bonjour
                )

            [1] => Array
                (
                    [column1] => goodbye
                    [column2] => hasta luego
                    [column3] => au revoir
                )

        )

    [test1] => Array
        (
            [test2] => Array
                (
                    [test3] => baz
                )

        )

    ) 
```

一旦你定义了你的数据多维数组，你的 Ajax 就可以像

```
$.ajax({
          type:           'post',
          cache:          false,
          url:            './ajax.php',
          data:           data
      }); 
```

如果您的 post 数组可能包含您不知道的字段，您可以轻松访问 php 文件中的 Post 数组

```
$data = file_get_contents('php://input');
$data = json_decode($data, true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:19:28.560

我没有找到任何好的解决方案，所以我使用*JSON.stringify();解决了这个问题。* 这是我的代码

客户端 ：

```
var data = {a:{'foo':'bar'},b:{'this':'that'}};
$.ajax({ url        : '/',
         type       : 'POST',                                              
         data       : {'data':JSON.stringify(data)},
         success    : function(){ }
       }); 
```

服务器端：

```
$data = json_decode($_POST['data']);
print_r($data);
// Result:
// Array( "a" => Array("foo"=> "bar"), "b" => Array("that" => "this")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T19:21:51.727

```
$.post(url, {"myarray":arrayData}, function(data){/*stuff*/}, 'json'); 
```

服务器端，您可以使用 php 访问它

```
$myArray = $_POST['myarray'][0];
foreach($myArray as $item)
{
   /*logic here for picking apart your array*/
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-20T13:30:19.340

这对我有用，使用 jQuery 和 laravel 8，构建（递归）对象而不是数组：

```
function getSorted(wrapper) {
    let set = {};
    let children = $(wrapper).children('.list-group');
    let index = 0;

    children.each(function(i, item) {
        $(item).children('.list-group-item').each(function(j, section) {
            index++;
            set[index] = {};
            set[index].id = $(section).data('id');
            set[index].subsections = getSorted($(section));
        });
    });

    return set;
} 
```

以通常的方式用ajax发送它：

```
let orderingSet = getSorted($('#sections')); // recursive function for all sections

$.ajax({
    type: 'POST',
    url: sortUrl,
    dataType: 'json',
    data: {'id': sectionId, 'to_id': parentId, 'orderingSet': orderingSet}
}) 
```

并从请求中检索它：`$orderingSet = request('orderingSet');`

这是上面创建的多维“数组”的服务器响应的显示方式（只是其中的一部分），其中特定的数字索引作为拖放后的部分位置：

[![在此处输入图像描述](../Images/33c761e147631cc8aa0a9faaecf30013.png)](https://i.stack.imgur.com/Idjhr.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T19:24:16.657

来自 jQuery 文档：

> 对于要包含在序列化字符串中的表单元素的值，该元素必须具有 name 属性。来自复选框和单选按钮（“单选”或“复选框”类型的输入）的值仅在它们被选中时才被包括在内。

首先检查您的代码。很难在没有看到您的代码的情况下提供进一步的帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-28T08:54:50.953

```
$.ajax({
    type:   'post',
    cache:  false,
    url:    './ajax.php',
    data:   { arrayData }
}); 
```

您必须使用`{}`来包含`{ arrayData }`变量。

然后`echo $_POST[arrayData];`将产生数组。如果不是，它不会发送数组值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-12T11:59:08.790

这是我的元代码片段，对我来说很好用......

```
 var f={};  

    f.text = "SOME DATA";
    f.any_other_field = some_other_value;
    f.items = [];

    $("#droppable .or").each(function(ee){
          var tmp={};
          tmp.id    = $(this).data("cid");
          tmp.name  = $(this).find(".ornazev").text();
          tmp.price = $(this).data("price");
          tmp.currency = $(this).data("currency");
          tmp.ks    = 1;  
          f.items.push(tmp);
    });
    $.ajax({
      type: "POST",
      url: urlsave,
      data: {"f":f},
      dataType: "text",
..... 
```

# ios - 大图像序列的 UIImageView 动画

> ID：11747374
> 
> 赞同：0
> 
> 时间：2012-07-31T19:16:32.010
> 
> 标签：ios, uiimageview

使用 UIImageView 我正在尝试为 300 个 PNG 文件的图像序列制作动画，它在模拟器上运行良好，但是在实际设备上这根本不起作用，我看到的是一个空白的序列。

如果我是对的，那么这可能是由于我正在尝试加载和制作动画的大量图像（大约 300 个），或者是否存在任何其他问题。请指教？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:24:19.957

这将取决于 .png 文件的大小、您使用的测试设备等。当您在模拟器上进行测试时，它可以访问所有计算机的 RAM，这比 iPhone 做的要多得多。如果您发布一些代码，我会尝试改进我的答案。听起来有更好的方法来做到这一点。

您是否尝试过使用框架的一小部分（例如 10 个）并查看是否有效？您还可以分析您的应用程序并检查发生了什么情况？

# c# - 具有参数变化设计模式的 C# 多构造函数

> ID：11747377
> 
> 赞同：1
> 
> 时间：2012-07-31T19:16:48.530
> 
> 标签：c#, design-patterns, constructor

我正在尝试重构一些代码，这些代码根据对象需要的配置类型传递不同的参数组合。例如：

```
public MyWidget(string server, string port)
{
...
}

public MyWidget(string server)
{
...
}

public MyWidget(bool createAThing, 
                string nameOfThingToBeCreated, 
                string server, 
                string port)
{
...
}

public MyWidget(bool createAThing, string nameOfThingToBeCreated)
{
...
} 
```

...ETC

我不想使用属性，因为感觉它隐藏了一些可能的依赖关系，例如，如果分配了端口属性，则对象可能需要传入服务器。不要挂断示例参数，这只是我从空中抽出来的东西。

我查看了 Builder 模式，但这并不是我所需要的。任何建议都会很棒！

我正在使用 .NET 2.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:29:53.213

实际上，如果目的是始终创建一个“有效”对象以使该对象永远不会处于半配置状态，那么 Builder 模式是合适的。构建器保存数据点，直到它们全部被分配，然后可以一次性创建一个完全配置的对象。

但是听起来您不相信您的开发人员会阅读文档以了解要配置的内容……*您确实提供了文档，对；）*

在这种情况下，也许提供一组构建器，每个构建器只公开与最终对象所需的“模式”相关的属性。

所以像这样的东西（伪代码和编造的，因为你没有提供任何关于你真正想要建模的暗示）

```
WidgetBuilder
+ whatever properties are common to all widget creation
+ MakeWidget

VectorWidgetBuilder : WidgetBuilder
+ get/set Lines
+ MakeWidget 

BitmapWidgetBuilder : WidgetBuilder
+ get/set Image
+ MakeWidget 

AnimatedWidgetBuilder : WidgetBuilder
+ get/set Images
+ get/set FrameRate
+ MakeWidget 
```

对此的一种变体是将这些排列定义为各种`WidgetOptions`，正如道德大师所称的那样，但每个不同的选项集都是它自己的类。所以你可能有`VectorWidgetOptions`, `BitmapWidgetOptions`, 并且`AnimatedWidgetOptions`它只是暴露了相关的属性集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:16:32.663

您可以使用配置对象并将其传递给您的构造函数。像这样的东西：

```
public class WidgetOptions
{
    public string Server { get; set; }
    public string Port { get; set; }
    ... 
}

public class MyWidget
{
    public MyWidget(WidgetOptions options)
    {
         Server = options.Server;
         Port = options.Port;
         ...
    }
} 
```

# sql-server-2008 - 有没有办法像这样运行快速的虚拟 SQL 查询来测试聚合函数？

> ID：11747387
> 
> 赞同：2
> 
> 时间：2012-07-31T19:17:30.683
> 
> 标签：sql-server-2008, ssms

我意识到这可能是一个非常新手的问题，我完全错过了一些东西，但我想测试一下使用`MIN`字符串（在 MSSQL 中）：

```
MIN('d3d742ce-f12e-4402-9a0e-8a05066f6bed',
'03f8d7a7-9feb-4375-b7ff-04c187d46009',
'1c180a55-ce67-4ab4-afe5-9d9907ed1c21' ) 
```

但它告诉我：

> 消息 174，级别 15，状态 1，第 5 行 MIN 函数需要 1 个参数。

现在这对我来说很有意义，但如果可能的话，我想做类似的事情。

有没有办法在不使用特定表的情况下做这样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T19:28:09.513

只使用表变量怎么样

```
DECLARE @TABLE Table (str varchar(100))
INSERT @TABLE (str) VALUES ('d3d742ce-f12e-4402-9a0e-8a05066f6bed')
INSERT @TABLE (str) VALUES ('03f8d7a7-9feb-4375-b7ff-04c187d46009')
INSERT @TABLE (str) VALUES ('1c180a55-ce67-4ab4-afe5-9d9907ed1c21')

SELECT MIN(str) FROM @TABLE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T19:36:23.747

您始终可以使用联合动态创建自己的派生表：

```
select min(MyCol)
from (
    select 'd3d742ce-f12e-4402-9a0e-8a05066f6bed' as MyCol
    union all select '03f8d7a7-9feb-4375-b7ff-04c187d46009'
    union all select '1c180a55-ce67-4ab4-afe5-9d9907ed1c21'
) as MyDerivedTable 
```

我`union all`在这种情况下使用，因为当您知道您的测试数据都是唯一的（它不会隐含地像[`union`](http://msdn.microsoft.com/en-us/library/ms180026.aspx).

相同的技术可用于[公用表表达式 (CTE)](http://msdn.microsoft.com/en-us/library/ms190766.aspx)：

```
;with CTE as (
    select 'd3d742ce-f12e-4402-9a0e-8a05066f6bed' as MyCol
    union all select '03f8d7a7-9feb-4375-b7ff-04c187d46009'
    union all select '1c180a55-ce67-4ab4-afe5-9d9907ed1c21'
)
select min(MyCol)
from CTE 
```

我用分号开始语句，因为如果你没有用分号终止前一个语句，SQL Server 会抱怨。

[但是，这只能在一定程度上起作用，因为在不得不求助于变通方法](https://stackoverflow.com/questions/5915166/how-to-work-around-sql-servers-the-maximum-number-of-tables-in-a-query-260-w)之前，您只能在查询中使用 256 个表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T19:43:06.683

就是这样：（从 SQL Server 2008 开始工作）

```
SELECT min(id) 
FROM (
VALUES 
('d3d742ce-f12e-4402-9a0e-8a05066f6bed'),
('03f8d7a7-9feb-4375-b7ff-04c187d46009'),
('1c180a55-ce67-4ab4-afe5-9d9907ed1c21')) AS guids(id) 
```

# visual-studio-2010 - Sql Server Express 无法生成用户实例

> ID：11747389
> 
> 赞同：0
> 
> 时间：2012-07-31T19:17:39.107
> 
> 标签：visual-studio-2010, sql-server-2008-express, user-instance

我正在使用`Visual Studio 2010/c#`并创建一个应用程序，我试图将其作为数据源访问，这是我在`SQLSERVER Express`（通过管理工作室）中创建的数据库。

我从以前的安装中删除了几个实例-

SQL 配置管理器仅显示 1 个实例 SQLEXPRESS，它作为命名实例“mymachine/sqlexpress”安装。

命名管道、TCP/IP 和远程客户端都已启用。

我在windows 7 64位下运行，开发环境和sql都在同一台PC上。

当我尝试配置连接时，我转到文件所在的物理路径，添加它，但测试连接按钮失败并显示 msg`failed to generate a user instance of sql server, only an integrated connection can generate an user instance`

我发现的解决方案似乎并不适用。

用户实例已启用（设置为 1），我找不到任何删除“旧实例”的路径，只有 1 个路径通向当前安装的实例。

帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:39:30.533

通过 IIS7 使用 Visual Studio SQL Server 数据库，他们使用`default asp.net`数据库。

以下可能会有所帮助，

*   打开 IIS 管理器。

*   创建一个`new application pool`而不是使用默认应用程序池并将您的数据库保存在其中。

*   转到 sql 配置管理器 > 转到属性。

*   选择`local system`而不是内置系统。

*   在默认浏览器选项中，删除所有其他文件并粘贴您的 .asmx 文件。

*   见于行动。如果有任何东西被禁用，请启用它。

希望能帮助到你。:)

# windows-7 - 在 XP 与 Win7 上接收 UDP

> ID：11747391
> 
> 赞同：0
> 
> 时间：2012-07-31T19:17:45.817
> 
> 标签：windows-7, udp, broadcast

我正在使用 C++ 中构建的简单 UDP 接收器代码。我将我的机器升级到 Windows 7，由于 UDP 流没有进入运行的可执行文件，所以这条线现在被搁置了：

```
 iResult = recv(sock, RxBuf, buffsize, 0); 
```

recv 函数只是暂停了。我使用了wire Shark来确保UDP流是活动的并且是正确的，但不知道问题是什么。

任何帮助，将不胜感激。

（UDP 流被广播）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:12:58.060

除非您已设置`sock`为非阻塞，`recv()`否则将阻塞直到接收到数据。因此，如果程序在那里阻塞，可能是因为它没有收到任何数据报。

XP 和 7 之间的 Windows 网络发生了*很大*变化，所以这里有一些事情需要检查：

*   检查你的`bind()`陈述。确保您确实绑定了您认为的端口并且您正在检查错误。

*   简单地关闭 Windows 中的防火墙并不能完全禁用它。有许多组件，尤其是在 Vista 和更高版本上，它们一直处于活动状态。

*   当您第一次运行可执行文件时，Windows Vista 及更高版本将要求您确认它应该具有网络访问权限。如果您单击“允许”以外的任何内容，则该可执行文件的*路径*可能会被*永久*阻止。添加“允许”规则不会*覆盖*此块。要取消阻止，您必须重新打开防火墙，然后深入到“具有高级安全性的 Windows 防火墙”以从传入和传出中删除违规规则。您可能会惊讶于那里可以建立的东西。

*   您可能需要为正在侦听的 UDP 端口添加传入防火墙规则。即使防火墙关闭。

*   其他要尝试的事情：禁用任何防病毒软件，以管理员身份运行侦听器，获取 Wireshark 或其他数据包嗅探器以确保数据包确实到达机器。

# mysql - 如何实现一个事务读取的行不允许另一个事务读取的情况？

> ID：11747394
> 
> 赞同：0
> 
> 时间：2012-07-31T19:18:06.630
> 
> 标签：mysql, transactions, isolation-level, transaction-isolation

如何实现一个事务读取的行不允许另一个事务读取的情况？

从我的一张带有 A-F 列的表中，我需要选择`max(columnA)`. 使用最大值并基于一些计算，我将不得不执行其他插入语句。

使用可序列化的隔离级别，2 个事务正在读取相同的最大值。这会导致一个事务的锁等待和另一个事务的死锁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T05:58:29.267

您可能无法仅基于隔离级别来解决此问题。

您可以进行的设计更改是单独存储最大值并具有三阶段标志以及记录说明 - 最大值已处理，正在处理和未处理。因此，每当事务从表中读取最大值时，它就可以检查最大值是否已被处理。如果是这样，它不会执行其他插入语句。

# c++ - OpenGL 到 DirectX 的转换 - alpha 混合

> ID：11747396
> 
> 赞同：0
> 
> 时间：2012-07-31T19:18:12.773
> 
> 标签：c++, opengl, directx, alphablending

我正在尝试将 OpenGL 渲染器转换为 DirectX9。它似乎主要工作，但两者似乎并不同意 alpha 混合的设置。在 OpenGL 中，我正在使用：

```
glDepthFunc(GL_LEQUAL);
glBlendFunc(GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA);
glEnable(GL_BLEND); 
```

并且从不实际设置 GL_DEST_ALPHA，所以它是默认值。这工作正常。转换为 DirectX，我得到：

```
device->SetRenderState(D3DRS_SRCBLEND, D3DBLEND_INVSRCALPHA); 
```

这应该做同样的事情，但完全没有。我能得到的最接近的是：

```
device->SetRenderState(D3DRS_SRCBLEND, D3DBLEND_SRCALPHA);
device->SetRenderState(D3DRS_DESTBLEND, D3DBLEND_DESTALPHA); 
```

这*几乎*是正确的，但如果几何图形自身重叠，则前面的 alpha 会覆盖后面的 alpha，并使更远的面不可见。作为记录，我正在进行的其他可能相关的渲染状态是：

```
device->SetRenderState(D3DRS_LIGHTING, FALSE);
device->SetRenderState(D3DRS_ZENABLE, TRUE);
device->SetRenderState(D3DRS_ALPHABLENDENABLE, TRUE);
device->SetTextureStageState(0, D3DTSS_ALPHAOP, D3DTOP_MODULATE); 
```

在这一点上，我觉得我只是在随机更改状态以查看哪种组合可以提供最佳结果，但没有什么能像在 OpenGL 中那样工作。不知道我在这里错过了什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:11:38.540

alpha 混合本身是正确执行的。否则，每个粒子都会看起来很奇怪。有些粒子的某些部分没有画出来，是因为它们在其他一些粒子的透明部分后面。

要解决此问题，您有两种选择：

1.  关闭粒子的 ZWriteEnable。这样，在粒子之后绘制的每个对象都将在它的前面。这可能会导致问题，如果您有实际上应该在粒子后面并在之后绘制的对象。

2.  启用粒子的 alpha 测试。Alpha 测试是一种从目标中去除透明像素（给定某个阈值）的技术。这包括 ZBuffer。

顺便提一句。在渲染透明对象时，几乎总是需要对对象进行排序以解决 ZBuffer 问题。上述解决方案适用于一些特殊情况。

# symfony - 消息被假脱机但未发送

> ID：11747399
> 
> 赞同：0
> 
> 时间：2012-07-31T19:18:16.833
> 
> 标签：symfony, swiftmailer

我正在使用 symfony2 和 swiftmailer 发送一些示例消息，但它不起作用，消息被假脱机在 symfony/app/cache/swiftmailer/spool 但是当我执行命令 php app/console swiftmailer:spool:send the messages从假脱机中删除但未发送，控制台中的输出是：已发送 0 封电子邮件，有人可以告诉我问题出在哪里？这是我的 config.yml：

```
swiftmailer:
    transport:            smtp
    username:             ~
    password:             ~
    host:                 localhost
    port:                 false
    encryption:           ~
    auth_mode:            ~
    spool:
        type:                 file
        path:                 "%kernel.cache_dir%/swiftmailer/spool"
    sender_address:       ~
    antiflood:
        threshold:            99
        sleep:                0
    delivery_address:     ~
    disable_delivery:     ~
    logging:              "%kernel.debug%" 
```

这是我的代码：

```
$message = \Swift_Message::newInstance()
    ->setSubject('Hello Email')
    ->setFrom('test@gmail.com')
    ->setTo('myadress@gmail.com')
    ->setBody($this->renderView('ProjetAccountBundle:Main:email.txt.twig'))
;
$this->get('mailer')->send($message);

return $this->render('ProjetAccountBundle:Main:test.html.twig');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:15:47.147

问题是使用 smtp 而不是邮件，对我来说正确的配置文件是这样的：

```
swiftmailer:
    transport:            mail
    username:             ~
    password:             ~ 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2021-07-17T10:32:10.483

快速邮件：

```
spool: { type: memory } 
```

您需要删除它。

# iphone - Iphone 的 Zxing 库

> ID：11747400
> 
> 赞同：0
> 
> 时间：2012-07-31T19:18:22.593
> 
> 标签：iphone, objective-c, zxing

我可以使用 ZXing Library 并在我的 iphone 应用程序后台扫描二维码吗？我不希望相机覆盖有寻找 qr 码和取消按钮的正方形（如 ScanTest 示例中所示）。我需要的是按下扫描按钮将激活二维码的读取，当二维码被读取时，如何将文本返回到我的应用程序，以便我可以在屏幕上的 UILabel 中显示它。

任何人都可以为此在 Objective-C 中显示一些示例代码吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:45:03.450

我做了类似的事情，可以为您提供一些指导，但不能分享源代码。

看看 ZXingWidgetController.mm,.h 文件。这是一个功能齐全的二维码扫描应用程序，您可以对其进行编译，因此可以对其进行逆向工程，使其仅包含后端代码。编辑 .h 使类扩展 NSObject 而不是 UIViewController，然后删除所有作为 GUI 对象的类属性和实例变量。

这将导致 xcode 在 .mm 文件（willAppear 等）中找到并标记您不再需要的所有方法和变量，并带有警告/错误。大部分代码都可以删除，但请注意将分配/解除分配移动到构造函数/解构函数。

在 viewController 中你可以创建这个类的一个实例，然后调用这个类开始扫描。您需要修改 ZXingWidgetController.mm 文件中的 didDecodeImage，使其在成功从 QR 码获取结果时执行您希望它执行的操作。一种可能性是修改构造函数以将父视图控制器作为参数，将其作为委托 (__weak) 存储在实例变量中，然后使用它在 didDecodeImage 方法中调用其函数之一。其他人可能会使用通知将数据传回您的主代码。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:13:09.143

[zxing objc 目录](http://code.google.com/p/zxing/source/browse/trunk/objc)中有一组类在CA 级别而不是 UIView 级别运行，这可能比在 UIViewController 级别运行的小部件更容易修改。

不过，这仍然需要稍作调整，因为核心捕获代码会跟踪视图是否在屏幕上，以自动开始和停止帧的捕获。

# c# - RDLC 封面？

> ID：11747402
> 
> 赞同：0
> 
> 时间：2012-07-31T19:18:27.700
> 
> 标签：c#, reporting-services, reportviewer, rdlc

我正在开发一个将有多个报告（每个都有自己的 RDLC 文件）的系统。我还希望这些报告有一个共同的封面报告。我对此的想法是：

1.  创建一个 CoverReport.rdlc
2.  对于每个实际报告，从指向 CoverReport.rdlc 的子报告开始。

这是一个可以接受的解决方案，还是有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:23:12.067

省去自己的麻烦，然后导航/[链接](http://msdn.microsoft.com/en-us/library/ms159088%28v=sql.90%29.aspx)到其他报告。子报表*有时*很棒。我建议在报告中使用相同的页眉和页脚。

# python - 什么是函数包装装饰器的“引导问题”？

> ID：11747412
> 
> 赞同：3
> 
> 时间：2012-07-31T19:19:11.237
> 
> 标签：python, python-3.2, functools

Python 3.2[`recursive_repr`](http://docs.python.org/py3k/library/reprlib.html#reprlib.recursive_repr)在[`reprlib`](http://docs.python.org/py3k/library/reprlib.html#module-reprlib)模块中引入了一个新函数。

当我查看[源代码](http://hg.python.org/cpython/file/default/Lib/reprlib.py)时，我发现了这段代码：

```
def recursive_repr(fillvalue='...'):
    'Decorator to make a repr function return fillvalue for a recursive call'

    def decorating_function(user_function):
        repr_running = set()

        def wrapper(self):
            key = id(self), get_ident()
            if key in repr_running:
                return fillvalue
            repr_running.add(key)
            try:
                result = user_function(self)
            finally:
                repr_running.discard(key)
            return result

        # Can't use functools.wraps() here because of bootstrap issues
        wrapper.__module__ = getattr(user_function, '__module__')
        wrapper.__doc__ = getattr(user_function, '__doc__')
        wrapper.__name__ = getattr(user_function, '__name__')
        wrapper.__annotations__ = getattr(user_function, '__annotations__', {})
        return wrapper

    return decorating_function 
```

我不明白的是什么是**Bootstrap 问题**，为什么不能[`@wraps(user_function)`](http://docs.python.org/library/functools.html#functools.wraps)应用于`wrapper`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:33:12.600

在我看来，“引导问题”来自循环依赖。在这种情况下，[`functools`](http://hg.python.org/cpython/file/28c935ded243/Lib/functools.py)进口[`collections`](http://hg.python.org/cpython/file/28c935ded243/Lib/collections/__init__.py)，这反过来进口`reprlib`。如果`reprlib`尝试导入`functools.wraps`，它将隐式尝试导入自身，这是行不通的。[Python 编程常见问题解答](http://docs.python.org/faq/programming.html#what-are-the-best-practices-for-using-import-in-a-module)（2.7 ，但我认为此后没有改变）说，当模块使用`from module import function`表单时，循环导入将失败，这些模块会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:30:27.473

“Bootstrapping”指的是“用自己的bootstraps捡起自己”这句话，这显然是不可能的。在这种情况下，这意味着你不能在这里使用 wraps()，因为这个函数本身就是 wraps() 定义的一部分。

# ruby-on-rails - 规范导致 Ruby 崩溃

> ID：11747414
> 
> 赞同：0
> 
> 时间：2012-07-31T19:19:15.857
> 
> 标签：ruby-on-rails, ruby, rspec, crash, specifications

所以我正在测试我的 Rails 模型之一，但系统的 Ruby 一直在崩溃？以前在 Growl 中发生过这种情况，但在 System 的 ruby​​ 中从未发生过。我已经重新启动，它仍在发生。我正在使用`Ruby-1.9.3-p194`，同样的崩溃发生在`ruby-1.9.3-p0`. 我的规范似乎无害，我不知道为什么会这样。

**规格：**

对缩进感到抱歉。

* * *

需要'spec_helper'

```
describe "Admin pages" do
  subject { page}

  describe "when not signed in" do
    before { visit admin_path }
    it { should have_selector('title', text: 'Sign in') }
end

describe "when signed in as an admin" do
before do 
  sign_in 
  visit admin_path
end

describe "Admin navigation menu" do
  it { should have_css('.nav-header', text: 'Content') }
  it { should have_link('Dashboard',  href: admin_path) }
  it { should have_link('News',       href: admin_posts_path) }
  it { should have_link('Events',     href: admin_events_path) }
  it { should have_link('Photos',     href: admin_photos_path) }
  it { should have_css('.nav-header', text: 'Your Account') }
  it { should have_link('Settings',   href: admin_settings_path) }
  it { should have_link('Help',       href: admin_help_path) }

  describe "should be on every admin page" do
    after { should have_admin_navigation }
    it { visit admin_path }
    it { visit admin_posts_path }
    it { visit admin_photos_path }
    it { visit admin_settings_path }
  end

  describe "should not be on any other pages" do
    before { visit root_path }
    it { should_not have_css('#admin-navigation') }
  end

end

describe "Dashboard (index) page" do
  before { visit admin_path }
  it { should have_selector('h3', text: 'Dashboard') }
  it { should have_selector('title', text: full_title('Admin Dashboard')) }
end

describe "Posts page" do
  before { visit admin_posts_path }
  it { should have_selector('h3', text: 'Posts') }
  it { should have_selector('table') }
  it { should have_selector('th', text: 'Title') }
  it { should have_selector('th', text: 'Content') }
  it { should have_selector('th', text: 'Published On') }
end

describe "Events page" do
  before { visit admin_events_path }
  it { should have_selector('h3', text: 'Events') }
  it { should have_selector('input') }
end

end
end 
```

* * *

[系统崩溃报告](https://gist.github.com/aedbf2d61103bb3d7e0c)作为保留格式的要点。

**编辑**：我通过评论缩小了范围，错误与`@second_page`工厂有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:08:11.503

我有一个调试工具可以帮助解决这个问题。它使用 ruby​​ 的跟踪来记录所有方法调用。最后一个应该是崩溃前执行的最后一个调用。也许尝试运行它来查看崩溃前的最后一个方法调用是什么，看看它是否一致？仅供参考，此实现会大大降低应用程序的速度，但在紧要关头可以为您提供很好的信息。

[https://github.com/ericbeland/debugtools/blob/master/tracing.rb](https://github.com/ericbeland/debugtools/blob/master/tracing.rb)

一旦你知道方法调用，你就会知道谁/什么负责。

------- 已按说明编辑 -----------

下载链接文件（或将其粘贴到空白文件中）。在您的应用程序中，需要该文件。然后在 application.rb 中执行以下操作：

```
 include Tracing

 class Object
  include Tracing
 end 
```

在你的代码中找到一个尽可能晚的地方——你从未见过它崩溃的最后一点。因此，根据您的新编辑，就在测试开始时。此时，粘贴以下语句：

```
 tracing_on('/tmp/tracelog.txt') 
```

这将开始记录。让事情继续进行，直到发生崩溃。此时，查看 /tmp/tracelog.txt 以了解它在哪里死亡。

# jquery-mobile - jqPlot 问题 - “未定义”不是对象（评估 $.jqplot.BarRenderer.js

> ID：11747417
> 
> 赞同：3
> 
> 时间：2012-07-31T19:19:29.603
> 
> 标签：jquery-mobile, jqplot

我正在使用 jquery mobile 和 jqplot 创建一个简单的条形图。

我目前已经获得了用于创建条形图的代码
`$( '#divForMyPage' ).live( 'pageinit',function(event){ // bar graph code }`

但是我不断收到错误：`undefined`不是对象（评估 $.jqplot.BarRenderer.js）

我用来呈现条形图的代码如下：任何帮助将不胜感激！

```
 var plot1 = $.jqplot('chart1', [line1], {
              title: 'Results',
              series:[{renderer:$.jqplot.BarRenderer}],
              axesDefaults: {
                  tickRenderer: $.jqplot.CanvasAxisTickRenderer ,
                  tickOptions: {
                    angle: 0,
                    fontSize: '10pt'
                  }
              },
              axes: {
                xaxis: {
                  renderer: $.jqplot.CategoryAxisRenderer
                }
              }
            }); 
```

# android - 以编程方式调用硬件后退按钮？

> ID：11747420
> 
> 赞同：22
> 
> 时间：2012-07-31T19:19:41.693
> 
> 标签：android

我知道可以覆盖 Android 中的后退按钮功能，但我想知道是否有一种方法或任何我可以调用的方法在功能上与按下硬件按钮相同。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-31T19:22:00.870

您可以像这样将后退按钮按下发送到系统

```
this.dispatchKeyEvent(new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_BACK)); 
```

或者您可以覆盖后退按钮按下并调用

```
finish(); 
```

在您的活动中。这基本上与通用后退按钮的作用相同。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-12-11T02:32:53.367

只需调用`this.onBackPressed();`活动。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-02-01T15:52:20.053

如果您只想“按下”硬件按钮，请创建从以下位置扩展的服务`AccessibilityService`：

```
class ExampleAccessService:AccessibilityService() {
    override fun onInterrupt() {
    }

    override fun onAccessibilityEvent(event: AccessibilityEvent?) {
    }

    fun doAction(){
        performGlobalAction(GLOBAL_ACTION_RECENTS)
//        performGlobalAction(GLOBAL_ACTION_BACK)
//        performGlobalAction(GLOBAL_ACTION_HOME)
//        performGlobalAction(GLOBAL_ACTION_NOTIFICATIONS)
//        performGlobalAction(GLOBAL_ACTION_POWER_DIALOG)
//        performGlobalAction(GLOBAL_ACTION_QUICK_SETTINGS)
//        performGlobalAction(GLOBAL_ACTION_TOGGLE_SPLIT_SCREEN)
    }
} 
```

*`doAction()`在您想采取行动的地方打电话*

添加到`Manifest`：

```
<application
...
    <service
        android:name=".ExampleAccessService"
        android:permission="android.permission.BIND_ACCESSIBILITY_SERVICE"
        android:label="Name of servise" // it will be viewed in Settings->Accessibility->Services
        android:enabled="true"
        android:exported="false" >
        <intent-filter>
            <action android:name="android.accessibilityservice.AccessibilityService"/>
        </intent-filter>
        <meta-data
            android:name="android.accessibilityservice"
            android:resource="@xml/accessibility_service_config"/>
    </service>
...
</application> 
```

**可访问性_service_config.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<accessibility-service xmlns:android="http://schemas.android.com/apk/res/android"
    android:accessibilityEventTypes="typeAllMask"
    android:accessibilityFeedbackType="feedbackAllMask"
    android:accessibilityFlags="flagDefault"
    android:canRetrieveWindowContent="false"
    android:description="your description"
    android:notificationTimeout="100"
    android:packageNames="your app package, ex: ex: com.example.android"
    android:settingsActivity="your settings activity ex: com.example.android.MainActivity" /> 
```

有关更多信息，请查看[https://developer.android.com/guide/topics/ui/accessibility/service](https://developer.android.com/guide/topics/ui/accessibility/service)

# php - PHP OOP 中的变量

> ID：11747428
> 
> 赞同：0
> 
> 时间：2012-07-31T19:20:08.643
> 
> 标签：php, oop

我有以下代码：

```
<?php

class picture{

private $path = 'files/';
private $login = base64_decode('dGVzdGluZw==');
private $password = base64_decode('MTIzNDU2');
private $image_path = $this->path.time().'.jpg';

//code 
```

我收到以下错误：

> 解析错误：解析错误，在第 6 行的*****`','' or`中期待';''

 **第 6 行`$path`是声明的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:24:47.687

您不能直接将函数的返回值分配给 PHP 中的成员声明。改用构造函数：

```
<?php

class picture {

  private $path = 'files/';
  private $login;
  private $password;
  private $image_path;

  public function __construct() {
    $this->login = base64_decode('dGVzdGluZw==');
    $this->password = base64_decode('MTIzNDU2');
    $this->image_path = $this->path.time().'.jpg';
  }

}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T19:25:32.890

设置属性时您无权访问变量“路径”

将此信息添加到您的构造函数是一种很好的做法

```
class picture {

   private $path;
   private $login;
   private $password;
   private $image_path;

   function __construct() {
      $this->path = 'files/';
      $this->login = base64_decode('dGVzdGluZw==');
      $this->password = base64_decode('MTIzNDU2');
      $this->image_path = $this->path.time().'.jpg';
   }
} 
```**

# c# - 强制覆盖服务器控制方法

> ID：11747434
> 
> 赞同：0
> 
> 时间：2012-07-31T19:20:27.613
> 
> 标签：c#, asp.net, servercontrols

我正在构建一个自定义 asp.net 服务器控件，我想触发一个`OnSave`方法并将参数传递给实现该控件的页面（最好的类比是 RenderContents 方法）。

这个想法是生成一个包含已保存字段的 XML 字符串，并通过此`OnSave`方法将其传递给实现控件的开发人员（在方法的情况下，`RenderContents`它将被`HtmlTextWriter`输出），以便他们可以访问`OnSave`方法中的字符串并处理它（例如 save它到数据库）。

所以我的问题有两个：

1.  如何强制实现我的控件的页面覆盖我的 OnSave 方法？

2.  如何将我的 XML 字符串传递给该方法中的某个变量，以便开发人员可以通过页面的代码隐藏访问它？

# java - C++“对象”类

> ID：11747439
> 
> 赞同：21
> 
> 时间：2012-07-31T19:20:42.397
> 
> 标签：java, c++, class, object, linked-list

在Java中，有一个泛型类叫做“Object”，其中所有的类都是一个子类。我正在尝试制作一个链表库（用于学校项目），并且我已经对其进行了管理以使其仅适用于一种类型，但不能适用于多种类型，那么有什么类似的吗？

编辑：我会发布代码，但我现在没有它。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-31T19:22:30.423

C++ 中没有通用基类，没有。

您可以实现自己的并从中派生类，但您必须保留指针（或智能指针）的集合以利用多态性。

编辑：重新分析您的问题后，我必须指出`std::list`。

如果您想要一个可以专注于多种类型的列表，请使用模板（并且`std::list`是模板）：

```
std::list<classA> a;
std::list<classB> b; 
```

如果您想要一个可以在单个实例中包含不同类型的列表，请采用基类方法：

```
std::list<Base*> x; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-28T13:51:29.870

```
class Object{
protected:
    void * Value;
public:

template <class Type>
void operator = (Type Value){
        this->Value = (void*)Value;
}

template <>
void operator = <string>(string Value){
        this->Value = (void*)Value.c_str();
}

template <class Type>
bool operator ==  (Type Value2){
        return (int)(void*)Value2==(int)(void*)this->Value;
}

template<>
bool operator == <Object> (Object Value2){
        return Value2.Value==this->Value;
}

template <class ReturnType>
ReturnType Get(){
    return (ReturnType)this->Value;
}

template <>
string Get(){
    string str = (const char*)this->Value;
    return str;
}

template <>
void* Get(){

    return this->Value;
}

void Print(){
    cout << (signed)this->Value << endl;
}

}; 
```

然后创建它的子类

# javascript - 在javascript中等待回调

> ID：11747440
> 
> 赞同：20
> 
> 时间：2012-07-31T19:20:47.220
> 
> 标签：javascript, asynchronous, callback, wait

我正在尝试创建一个返回带有回调信息的对象的函数：

```
var geoloc;

var successful = function (position) {
    geoloc = {
        longitude: position.coords.longitude,
        latitude: position.coords.latitude
    };
};

var getLocation = function () {
    navigator.geolocation.getCurrentPosition(successful, function () {
        alert("fail");
    });

    return geoloc;
}; 
```

我怎样才能做到这一点？该函数在执行`getLocation`之前返回空值。`successful`

谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-31T19:26:38.927

使用回调是因为该函数是异步的。回调在将来的某个时间点运行。

所以，是`getLocation`的，在触发回调之前返回。这就是异步方法的工作原理。

你不能等待回调，这不是它的工作方式。您可以添加一个回调`getLocation`，一旦完成就会运行。

```
var getLocation = function(callback){
    navigator.geolocation.getCurrentPosition(function(pos){
        succesfull(pos);
        typeof callback === 'function' && callback(geoloc);
    }, function(){
        alert("fail");
    });
}; 
```

现在，您无需执行`var x = getLocation()`并期望返回值，而是这样称呼它：

```
getLocation(function(pos){
    console.log(pos.longitude, pos.latitude);
}); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-31T19:33:33.740

我会在 Rocket 的回答中推荐这种方法。但是，如果您真的想这样做，您可以在`getLocation`完成时使用 jQuery 延迟对象触发其余代码。这将为您提供比仅使用由`getCurrentPosition`.

```
// create a new deferred object
var deferred = $.Deferred();

var success = function (position) {
    // resolve the deferred with your object as the data
    deferred.resolve({
        longitude: position.coords.longitude,
        latitude: position.coords.latitude
    });
};

var fail = function () {
    // reject the deferred with an error message
    deferred.reject('failed!');
};

var getLocation = function () {
    navigator.geolocation.getCurrentPosition(success, fail); 

    return deferred.promise(); // return a promise
};

// then you would use it like this:
getLocation().then(
    function (location) {
         // success, location is the object you passed to resolve
    }, 
    function (errorMessage) {
         // fail, errorMessage is the string you passed to reject
    }); 
```

# objective-c - iOS5 - 实现 NSURLConnection sendAsynchronousRequest：

> ID：11747446
> 
> 赞同：1
> 
> 时间：2012-07-31T19:21:04.877
> 
> 标签：objective-c, ios5, nsurlconnection, nsurlconnectiondelegate

我熟悉使用以下方法。我知道在使用以下内容时，您至少需要实现所需的协议方法：

```
 [NSURLConnection setConnection:[[NSURLConnection alloc] initWithRequest:request delegate:self]]; 
```

有人可以解释一些我在研究期间还没有得到答案的东西吗？

使用下面的异步方法调用时呢？是否有任何必需的协议方法需要从 NSURLConnection 实现？

谢谢

```
[NSURLConnection sendAsynchronousRequest:request
                                   queue:queue
                       completionHandler:^(NSURLResponse *response,NSData *data,NSError *error) 
                    { 

                        //Handle response here 
                    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:26:04.883

查看文档，您不需要实现任何协议。

`sendSynchronousRequest:returningResponse:error:`这将为您提供与使用except相同的结果：

1）您的请求将是异步的

2）您的处理程序将在您传递的队列中执行。

# jquery - jquery从keyInput获取正确的ascii字符

> ID：11747451
> 
> 赞同：1
> 
> 时间：2012-07-31T19:21:24.860
> 
> 标签：jquery, keydown, numpad

我正在尝试将用户输入限制为 ascii 字符。它适用于普通键盘，但当我按下数字键盘上的键时不起作用。我试过了`event.keycode`，`event.which`结果都是一样的。如何获得正确的代码？这是链接：http: [//jsfiddle.net/rg85Y/1/](http://jsfiddle.net/rg85Y/1/)

这是html：

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.js"></script>
</head>
<body>
    <input id="validateMe" type="text" />
</body>​ 
```

这是javascript：

```
$("#validateMe").keydown(function(event) {
        // Allow: backspace, delete, tab, escape, and enter
        if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || 
             // Allow: Ctrl+A
            (event.keyCode == 65 && event.ctrlKey === true) || 
             // Allow: home, end, left, right
            (event.keyCode >= 35 && event.keyCode <= 39)) {
                 // let it happen, don't do anything
                 return;
        }
        else {
            // Allow only permitted chars
            var chr = String.fromCharCode( event.keyCode );
            alert(chr);
            if( !(/^[a-zA-Z\s'-]*$/.test(chr)) ) {
                event.preventDefault();
            }
        }
});​ 
```

# java - 从多个属性文件自动加载更新的属性

> ID：11747453
> 
> 赞同：1
> 
> 时间：2012-07-31T19:21:29.300
> 
> 标签：java, apache-commons-config

我的要求是在对属性文件进行更改时自动更新我的应用程序的配置。
为了维护属性，我使用了 Apache Commons Configuration 项目中的 PropertiesConfiguration。（使用 commons-configuration-1.6.jar）。
使用 FileChangedReloadingStrategy 适用于对单个属性文件进行的更改，并由我的应用程序拾取。

```
 PropertiesConfiguration config = new PropertiesConfiguration();
    config.load(new File("../test1.properties"));
    config.load(new File("../test2.properties"));
    config.setReloadingStrategy(new FileChangedReloadingStrategy()); 
```

但是我使用它们的加载方法使用多个属性文件，当更新任何一个属性文件时，我需要能够检测到更改并自动更新我的项目中的配置。
有没有办法使用 FileChangedReloadingStrategy 进行此更新？
或者你有什么其他方法可以建议我使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:25:38.977

您可以使用 a[`CompositeConfiguration`](http://commons.apache.org/configuration/apidocs/org/apache/commons/configuration/CompositeConfiguration.html)连接两个单独`FileConfiguration`的 s，每个 s 都有自己的`FileChangedReloadingStrategy`。

# python - 为什么模块不能访问其包的 __init__.py 中声明的属性？

> ID：11747456
> 
> 赞同：7
> 
> 时间：2012-07-31T19:21:37.980
> 
> 标签：python, module, packages

我有一个包结构如下：

```
mypackage
  __init__.py
  mymodule.py 
```

例如，我放了一些“常量”声明`__init__.py`：

```
DELIMITER='\x01' 
```

但是，除非我添加，否则*mymodule.py*中的代码无法访问 DELIMITER：

```
from __init__ import * 
```

到*mymodule.py*文件的顶部。我想我在这里错过了一个概念。是不是在通过 import 语句访问之前声明的任何内容`__init__.py`都不会被读入内存？另外，这是放入`__init__.py`文件的典型类型吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T19:46:38.293

Python*确实*在导入包时运行代码`__init__.py`，这允许进行一些初始化。但是，仅仅因为它运行并不意味着您可以从其他模块中访问其中的变量。

例如：

```
testpackage
    __init__.py
    testmod.py 
```

假设`__init__.py`有代码`print "Initializing __init__"`，并且`testmod.py`有`print "Initializing testmod"`。在这种情况下，导入`testpackage`or`testmod`会导致初始化代码运行：

```
dynamic-oit-vapornet-c-499:test dgrtwo$ python -c "import testpackage"
Initializing __init__
dynamic-oit-vapornet-c-499:test dgrtwo$ python -c "from testpackage import testmod"
Initializing __init__
Initializing testmod 
```

但是，它*不*`testmod.py`提供从`__init__.py`. 这必须明确地完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T19:27:07.030

包不会以某种方式将其中的所有模块组合在一起。除非您将其导入，否则没有理由`__init__`在其他模块中可以访问其中的内容。

# ios - FMDB SQLite 没有出现在我的设备中

> ID：11747458
> 
> 赞同：1
> 
> 时间：2012-07-31T19:21:42.533
> 
> 标签：ios, database, ipad, sqlite, fmdb

再次，我需要别人的帮助。我正在按照以下教程进行 SQLite 与 FMDB 包装器的连接：

[http://www.icodeblog.com/2011/11/04/simple-sqlite-database-interaction-using-fmdb/](http://www.icodeblog.com/2011/11/04/simple-sqlite-database-interaction-using-fmdb/)

在上面的教程中，一切（创建数据库和表，插入，删除）都是以编程方式完成的，但在模拟器中一切正常，但是当我使用 SQLite Manager 插件对数据库进行任何插入时（在 iOS 中以编程方式创建） ，它没有出现在我的测试设备中。我有什么遗漏（比如将文件复制到我的包中）吗？这真的让我发疯。我对这些完全陌生..有人可以帮我吗？

PS：我知道我可以使用 Core Data，但由于某些原因，我必须为这个应用程序使用 SQLite。任何帮助将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:51:52.350

确保 (a) 将 db 包含在包中（请参阅[此处](https://stackoverflow.com/questions/11605072/sqlite-will-not-prepare-query-when-accessing-database-in-xcode/11605495#11605495)以获取“复制包资源”所在位置的屏幕快照）；(b)以[编程](https://stackoverflow.com/questions/11664043/unable-to-connect-sqlite-database-in-ios/11674730#11674730)方式将db 从 bundle 复制到文档。然后，您可以从那里打开它。

为什么它可以在您的模拟器上运行而不是在设备上运行有点好奇。我只能想象您正在从某个固定路径读取，而不是以编程方式检索应用程序的 Documents 文件夹？

**更新：**

我建议检查您的各种返回码并确保一切正常。

我已经获取了您的代码示例并（a）检查了创建的结果`FMDatabase`；(b) 检查结果`open`；(c) 检查结果`FMResultSet`，包括 sqlite 错误信息的显示；(d) 关闭结果集：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docsPath = [paths objectAtIndex:0];
NSString *path = [docsPath stringByAppendingPathComponent:@"DADatabase.sqlite"];

FMDatabase *database = [FMDatabase databaseWithPath:path];
NSAssert(database, @"Unable to create FMDatabase object");

NSLog(@"%@", database);

BOOL success = [database open];
NSAssert(success, @"Unable to open database");

FMResultSet *results = [database executeQuery:@"SELECT * FROM DrugList"];
NSAssert(results, @"Unable to create result set: %@", [database lastErrorMessage]);

while([results next]) {
    NSString *name = [results stringForColumn:@"Drugname"];
    [arrayToLoadDiseases addObject:name];
}

[results close]; 

[database close]; 
```

如果你在你的模拟器中运行它，你可以继续检查模拟器的包和文档文件夹，如果事情不正确，只是为了确保一切都在它应该在的地方。您的模拟器文件夹类似于“~/Library/Application Support/iPhone Simulator/5.1/Applications/”（将 5.1 替换为您正在使用的模拟器的任何版本）。您可能必须通过在命令行窗口中`Library`运行来取消隐藏您的文件夹（如果您还没有） 。无论如何，您可以使用 Mac OS X 的命令打开模拟器的数据库并确保您的表正常。`chflags nohidden ~/Library``Terminal``sqlite3`

一个常见的错误是未能以[编程](https://stackoverflow.com/questions/11664043/unable-to-connect-sqlite-database-in-ios/11674730#11674730)方式正确复制数据库，因此该`open`方法将创建一个空白数据库，并且`executeQuery`会失败，说找不到表。

让我知道你发现了什么。

# properties - 2 次会议之间的差异相互重叠

> ID：11747459
> 
> 赞同：3
> 
> 时间：2012-07-31T19:21:43.310
> 
> 标签：properties, vbscript, calendar, outlook

我遇到了这个问题：我正在使用 VBS 从我们的会议室中提取所有会议。有时我从同一个房间 2 会议中得到彼此重叠一定时间的会议。但是，outlook 只显示其中之一。

我已尝试检查所有内容，`item.fields`以查看会议在共享日历中显示或不显示的标准，但两者似乎都是相同的。

我会在这里上传我的代码，但它很长，大约 350 行代码。

所以，我的问题是，Outlook 使用什么属性在共享日历、会议中向其他人显示，如果它与另一个重叠？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:07:01.237

我找到了答案。Microsoft 将此模型用于定期约会：创建定期事件时，item.isRecurring 设置为 True。然后将集合出现添加到项目和循环模式对象中。如果您删除或修改一个或多个实例，则会将另一个对象添加到实例中，异常。可以在此处找到所有已删除或修改的事件。奇怪的是，即使删除了某个事件，您仍然可以发现它是活动的，因此会与之后创建的约会重叠。诀窍是一直检查，即使在异常情况下，也能获得与 Outlook 相同的视图。

如果您需要更多详细信息，请pm我。

# javascript - 在 CSS 完全加载后运行 Javascript

> ID：11747462
> 
> 赞同：0
> 
> 时间：2012-07-31T19:21:48.180
> 
> 标签：javascript, jquery

我有一些代码取决于正在加载的 css。
在页脚上加载 javascripts 之前，我在页眉上加载 css

我尝试了javascript`$(document).ready`

```
 $(document).ready(function() {
  var bar_position, width;
  bar_position = $('body').height() - 38;
  width = $('body').width();
  console.log(bar_position);
  if (width <= 480) {
    console.log("Entered");
    $('#accounts-bar').css("top", bar_position);
  }
}); 
```

我试过了`$(window).ready`，`$(window).load`但都失败了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:27:21.473

你的代码真的很乱（除非你使用的是 CoffeeScript。）它应该是这样的：

```
$(function () {
    bar_position = $('body').height() - 38; //38 is the size of the bar 
    width = $('body').width();
    console.log(bar_position);
    if (width <= 480) { //480 is the mobile width
        console.log("Entered");
        $('#accounts-bar').css("top", bar_position);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:32:19.203

[就绪事件](http://api.jquery.com/ready/)就足够了。

> 当使用依赖 CSS 样式属性值的脚本时，在引用脚本之前引用外部样式表或嵌入样式元素很重要。
> 
> 如果代码依赖于加载的资产（例如，如果需要图像的尺寸），则应将代码放置在加载事件的处理程序中。

此外，您的 javascript 无效。如果它应该是 CoffeeScript，那么你就错过了 ->：

```
$(document).ready ->
  bar_position = $('body').height() - 38 #38 is the size of the bar 
  width = $('body').width() 
  console.log(bar_position)
  if (width <= 480) #480 is the mobile width
    console.log("Entered");
    $('#accounts-bar').css("top", bar_position)
  return 
```

如果它应该是 JavaScript，你有更多的问题：

```
$(document).ready(function(){
    bar_position = $('body').height() - 38; //38 is the size of the bar 
    width = $('body').width(); 
    console.log(bar_position);
    if (width <= 480) //480 is the mobile width {
      console.log("Entered");
      $('#accounts-bar').css("top", bar_position);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T19:29:35.840

将 CSS 加载到页眉中，将 JS 加载到页脚中，并包装在 doc-ready 中，就在执行 JS 代码之前应用 CSS 而言，您应该没问题。我猜你的元素没有宽度的原因是它是`display: none;`，或者只包含浮动元素，或者类似的东西。换句话说 - 我认为这是一个 CSS 问题，而不是 JS 时间问题。尝试进入您的 Firebug/Chrome 控制台，选择有问题的元素并获取其宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T19:25:07.963

[JavaScript 注释](https://developer.mozilla.org/en/JavaScript/Reference/Code_comments)不是`#`，它们是`//`

**错误的**

```
bar_position = $('body').height() - 38 #38 is the size of the bar 
```

**正确的**

```
bar_position = $('body').height() - 38 //38 is the size of the bar 
```

还有许多其他错误，该代码无法运行。猜你错过了一个标签，这不是纯 JavaScript，因为它是为块范围缩进的，并且到处都缺少大括号/闭包。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-30T07:23:36.053

```
$(window).bind("load", function() {
   // code here
}); 
```

# c# - 使用 Dispatcher.Invoke 从 WPF 中的不同线程关闭窗口

> ID：11747469
> 
> 赞同：4
> 
> 时间：2012-07-31T19:22:24.243
> 
> 标签：c#, .net, wpf, multithreading

即使查看了有关 Dispatcher.Invoke 的各种信息，我也遇到了一个无法解决的问题。

有一个 MainWindow 创建一个任务，启动该任务，然后打开一个进度窗口。任务完成后，我需要关闭进度窗口。这是我所拥有的：

```
private void Button_Click(object sender, RoutedEventArgs e)
    {
        Task task = new Task(_vm.WriteToDB);
        task.ContinueWith(ExceptionHandler, TaskContinuationOptions.OnlyOnFaulted);
        task.ContinueWith(RanToCompletion, TaskContinuationOptions.OnlyOnRanToCompletion);
        task.Start();

        _frmProgress = new Progress(task);
        _frmProgress.DataContext = _vm;
        _vm.ProgressText = "Connecting to update server...";
        _frmProgress.ShowDialog();
    }

    public void RanToCompletion(Task task)
    {
        Progress.FormCloseDelegate FormCloseDelegate = new Progress.FormCloseDelegate(_frmProgress.Close);

        if (_frmProgress.Dispatcher.CheckAccess())
            _frmProgress.Close();
        else
            _frmProgress.Dispatcher.Invoke(DispatcherPriority.Normal, FormCloseDelegate);
    } 
```

FormCloseDelegate 在 Progress 窗口中定义：

```
public delegate void FormCloseDelegate(); 
```

使用上面的当前实现，代码编译并运行，但任务完成后进度表单不会关闭。有任何想法吗？

我也愿意接受其他想法来解决这个问题。也许我完全走错了路。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T23:07:39.573

正如我在评论中提到的那样，当用户在 Window_Closing 事件中单击带有 e.Cancel=true 的关闭按钮时，我阻止了进度窗口的关闭。这也阻止了代码中的调用以关闭窗口。

在意识到我根本不需要自定义委托后，我更新了 RanToCompletion 方法：

```
public void RanToCompletion(Task task)
    {
        if (_frmProgress.Dispatcher.CheckAccess())
            _frmProgress.Close();
        else
            _frmProgress.Dispatcher.Invoke(DispatcherPriority.Normal, new ThreadStart(_frmProgress.Close));
    } 
```

# c# - 注销网站应用程序的最佳实践

> ID：11747471
> 
> 赞同：0
> 
> 时间：2012-07-31T19:22:32.657
> 
> 标签：c#, facebook, authentication

我正在使用服务器端身份验证流程来处理登录到我的 C# .NET 网站。用户登录后，我会建立一个 formsauthenticationtoken 对象来跟踪用户的后续请求是否经过身份验证。

FB有以下政策：

```
Your website must offer an explicit "Log Out" option that also logs the user out of Facebook. 
```

（这是＃6在以下位置 - [https://developers.facebook.com/policy/](https://developers.facebook.com/policy/)）

我提供了“注销”按钮，当用户单击它时，它会将用户从 FB 和我的应用程序中注销。

但是，如果用户在另一个浏览器选项卡中退出 FB 怎么办？我是否也需要将用户从我的应用程序中注销？就我而言，我在技术上不需要将用户从我的应用程序中注销，因为我的用户令牌是在登录时建立的，而且我在登录后对 FB 没有任何依赖。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:07:59.070

不，您不必将用户从另一个选项卡中注销。但是，如果您对网站的安全性有疑虑，这可能是一个好主意。您可以做的一件事是，我设置了一个不活动计时器，如果用户 5 分钟不使用该页面，该计时器会自动将其注销。

# c# - 使用线程将图像复制到剪贴板并管理线程

> ID：11747472
> 
> 赞同：0
> 
> 时间：2012-07-31T19:22:33.843
> 
> 标签：c#, winforms

我有一个将图像保存在图片框中的应用程序。当您按 ctrl+C 时，它会将图像复制到剪贴板。我使用一个线程来执行实际的剪贴板操作。

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    if (keyData == (Keys.Control | Keys.C))
    {
        clipboardThread = new Thread(copy_to_clipboard);
        clipboardThread.SetApartmentState(ApartmentState.STA);
        clipboardThread.Start();
        return true;
    }
    return base.ProcessCmdKey(ref msg, keyData);
}

private void copy_to_clipboard()
{
    if (pic_display.Image != null)
    {
        using (MemoryStream stream = new MemoryStream())
        {
            clipboardStatus.Text = "Copying image to clipboard...";
            pic_display.Image.Save(stream, ImageFormat.Png);
            var data = new DataObject("PNG", stream);
            Clipboard.Clear();
            Clipboard.SetDataObject(data, true);
            clipboardStatus.Text = "Copied successfully!";
        }
    }
} 
```

现在，如果我重复发送 ctrl+C（例如：按住键），就会产生一个新线程。如何更改代码以便重新使用剪贴板线程，并让它告诉我它当前是否正在复制数据，这样我就不会在它仍在工作时尝试执行另一个复制命令。

更新

现在它可以工作了

我已将其更改为使用后台工作人员

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    if (keyData == (Keys.Control | Keys.C))
    {
        if (!backgroundWorker1.IsBusy)
            backgroundWorker1.RunWorkerAsync();
        return true;
    }
    return base.ProcessCmdKey(ref msg, keyData);
}

private void copy_to_clipboard()
{
    using (var stream = new MemoryStream())
    {
        clipboardStatus.Text = "Copying image to clipboard...";
        pic_display.Invoke((Action)(() => {
            if (pic_display.Image != null)
              pic_display.Image.Save(stream, ImageFormat.Png); 
        }));
        if (stream.Position == 0) return; // No image was saved
        var data = new DataObject("PNG", stream);
        BeginInvoke ( (Action) ( ()=> {
            Clipboard.Clear();
            Clipboard.SetDataObject(data, true);
        }
        clipboardStatus.Text = "Copied successfully!";
    }
}

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    copy_to_clipboard();
} 
```

但是现在发生了异常

`Clipboard.Clear();`

说

```
Current thread must be set to single thread apartment (STA) mode before OLE calls can be made. Ensure that your Main function has STAThreadAttribute marked on it. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:44:47.393

首先，您应该在从后台线程访问 UI 控件时调用：

```
private void copy_to_clipboard()
{
    using (var stream = new MemoryStream())
    {
        clipboardStatus.Text = "Copying image to clipboard...";
        pic_display.Invoke((Action)()=> { 
            if (pic_display.Image != null)
              pic_display.Image.Save(stream, ImageFormat.Png); 
        });
        if (stream.Position == 0) return; // No image was saved
        var data = new DataObject("PNG", stream);
        Clipboard.Clear();
        Clipboard.SetDataObject(data, true);
        clipboardStatus.Text = "Copied successfully!";
    }
} 
```

然后从 BackgroundWorker 调用它。网上有很多这样的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:11:20.833

我建议在单击期间执行保存——无论如何，您都应该在 UI 线程上执行此操作。您可以使用 InvokeRequired/Invoke；但是您无法控制 Save 何时接管 UI 线程。在点击之后可能需要很长一段时间，这可能会让用户感到不安。或者，可能是*在*用户更改图像之后。离开 UI 线程需要任何时间，这很糟糕。但从可用性的角度来看，越接近点击越好。在这种情况下，可能是这样的：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    if (keyData == (Keys.Control | Keys.C))
    {
        if (pic_display.Image != null)
        {
            MemoryStream stream = new MemoryStream())
            clipboardStatus.Text = "Copying image to clipboard...";
            pic_display.Image.Save(stream, ImageFormat.Png);

            clipboardThread = new Thread(copy_to_clipboard);
            clipboardThread.SetApartmentState(ApartmentState.STA);
            clipboardThread.Start(stream);
        }
        return true;
    }
    return base.ProcessCmdKey(ref msg, keyData);
}

private void copy_to_clipboard(object state)
{
    var stream = (Stream) state;
    try
    {
        var data = new DataObject("PNG", stream);
        Clipboard.Clear();
        Clipboard.SetDataObject(data, true);
        BeginInvoke((MethodInvoker) (() => clipboardStatus.Text = "Copied successfully!"));
    }
    finally
    {
        stream.Dispose();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T19:34:38.097

尝试这样的事情：

```
object lockObj = new object();

        private void copy_to_clipboard()
        {
            lock (lockObj)
            {
                if (pictureBox1.Image != null)
                    {
                        using (MemoryStream stream = new MemoryStream())
                        {
                            clipboardStatus.Text = "Copying image to clipboard...";                            
                            pictureBox1.Image.Save(stream, ImageFormat.Png);
                            var data = new DataObject("PNG", stream);
                            Clipboard.Clear();
                            Clipboard.SetDataObject(data, true);                            
                            clipboardStatus.Text = "Copied successfully!";
                        }
                    } 
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T19:51:59.620

您不能将线程存储为成员吗？除非我误解了这个问题，否则 Thread.IsAlive 会做你想做的事。但是，如果您正在修改 UI 控件，就像上面所说的那样，您应该真正使用 Invoke 来确保这发生在 UI 线程上。

```
 ```
protected Thread clipboardThread;

protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{

if (keyData == (Keys.Control | Keys.C))
{
    if (clipBoardThread == null)
    {
       clipboardThread = new Thread(copy_to_clipboard);
       clipboardThread.SetApartmentState(ApartmentState.STA);
       clipboardThread.IsBackGround = false;
    }
    if (!clipboardThread.IsAlive)
    {
       clipboardThread.Start();
    }
    return true;
}
return base.ProcessCmdKey(ref msg, keyData);
}

private void copy_to_clipboard()
{
if (pic_display.Image != null)
{
    using (MemoryStream stream = new MemoryStream())
    {
        clipboardStatus.Text = "Copying image to clipboard...";
        pic_display.Image.Save(stream, ImageFormat.Png);
        var data = new DataObject("PNG", stream);
        Clipboard.Clear();
        Clipboard.SetDataObject(data, true);
        clipboardStatus.Text = "Copied successfully!";
    }
}
} 
``` 
```

# .net - 在继续响应用户输入和渲染帧之前等待 x 秒

> ID：11747474
> 
> 赞同：3
> 
> 时间：2012-07-31T19:22:39.837
> 
> 标签：.net, xna, lua, wait, luainterface

## 背景

我目前正在创建一个利用[LuaInterface](http://luaforge.net/projects/luainterface/)的 XNA 应用程序，以便我可以使用[Lua 脚本](http://en.wikipedia.org/wiki/Lua_%28programming_language%29)控制该应用程序。

* * *

## 我想要的是

我注意到在我的开发过程中，很多事情可能都是“时间”。这样的事情可能包括*显示信息，然后在 x 秒后将其删除，**如果需要 x 秒，则以失败结束游戏*，或者甚至用于*每 x 秒使相机移动一定距离*。我想`wait`在 Lua 中实现这个功能，而不是我的应用程序，但是在这一点上，我可以输入（因为我似乎无法让它工作）。

* * *

## 到目前为止我尝试过的

***inv.lua***

```
 _G.Wait=(function(t)
    local dest=Time.ElapsedMilliseconds+t*1000
    while Time.ElapsedMilliseconds<dest do
        gel:UIUpdate()
    end
    return true
 end)

 --Aliases
 _G.wait=Wait 
```

***gELua.vb***

```
Public Sub UIUpdate()
    Application.DoEvents()
    Game.Tick()
End Sub 
```

（我的 XNA 游戏对象在哪里`Game`）

* * *

## 那么为什么我的想法行不通呢？

当前的问题是，即使我`Game.Tick()`每次都调用以保持一切正常，但我的应用程序的 XNA 部分停止接收输入。

* * *

所以，我的问题是，有没有更好的方法来做到这一点？在遇到用户输入问题之前，我认为它运行良好。你们中的任何人都实施了这样的运作良好的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:35:20.677

您想要的是让您的游戏循环继续运行 - 但不要为对象调用“更新”（在 lua 脚本中）。如果您的每个对象都是不同的脚本，那么这相当简单。“Wait( *time* )”方法只会告诉您的游戏引擎“this”对象不想在*time*毫秒内更新。引擎将记录下来并继续为所有其他脚本（对象）调用更新和渲染。

下一次更新/渲染“等待”对象时，它将跳过“更新”调用并仅调用渲染。当超时到期时 - 您可以继续在对象上调用 Update。如果可能 - 您可以从暂停它的下一行继续执行 Update 方法。这将使编写脚本变得简单，就像 C#“异步”方法一样。

当然 - 这在很大程度上取决于您的脚本如何与引擎的其余部分交互。如果所描述的解决方案不适合您，我会要求您更详细地描述您的脚本如何与引擎交互。

# c# - CodeContracts 和 null 检查详细程度

> ID：11747483
> 
> 赞同：0
> 
> 时间：2012-07-31T19:23:07.007
> 
> 标签：c#, generics, nullreferenceexception, code-contracts

我目前正在减少我的应用程序框架中的一些重复项，我想知道人们对以下扩展方法有何看法？

```
[EditorBrowsable(EditorBrowsableState.Never)]
public static class ThrowExtensions
{
    public static T ThrowIfNull<T>(this T instance) where T : class
    {
        Contract.Ensures(Contract.Result<T>() != null);

        if (instance == null)
        {
            throw new ArgumentNullException("instance", string.Format("Object reference of type '{0}' not set to an instance of an object.", typeof(T).FullName));
        }

        return instance;
    }
} 
```

考虑以下示例。

我知道扩展一切都不是一个好习惯，如果可能的话我应该避免它，但在这种情况下，它似乎很合理，虽然不漂亮。

```
protected bool Contains<TEntity>(TEntity entity) where TEntity : class
{
    Contract.Requires(entity != null);

    ObjectStateEntry entry;

    bool exist = ((IObjectContextAdapter)_context).ObjectContext.ThrowIfNull().ObjectStateManager.ThrowIfNull().TryGetObjectStateEntry(entity, out entry);

    return exist;
} 
```

**编辑：**我也在考虑用 Try() 更改 ThrowIfNull 或更适合此上下文的东西作为框架中的约定，但我真的很喜欢对此的看法，如果你有更好的选择，我很高兴听到它，谢谢！

**更新：**到目前为止，这就是我最终的结果。

```
namespace EasyFront.Framework.Diagnostics.Contracts
{
    using System;
    using System.ComponentModel;
    using System.Diagnostics.Contracts;

    [EditorBrowsable(EditorBrowsableState.Never)]
    public static class ContractsExtensions
    {
        /// <summary>
        ///     Calls the code wrapped by the delegate when the subject is not pointing to null, otherwise, <see
        ///      cref="ArgumentNullException" /> is thrown.
        /// </summary>
        /// <remarks>
        ///     Eyal Shilony, 01/08/2012.
        /// </remarks>
        /// <typeparam name="TSubject"> The type of the subject to operate on. </typeparam>
        /// <typeparam name="TResult"> The type of the result to return from the call. </typeparam>
        /// <param name="subject"> The subject to operate on. </param>
        /// <param name="func"> The function that should be invoked when the subject is not pointing to null. </param>
        /// <returns> The result of the invoked function. </returns>
        public static TResult SafeCall<TSubject, TResult>(this TSubject subject, Func<TSubject, TResult> func)
            where TSubject : class
        {
            Contract.Requires(func != null);

            if (subject == null)
            {
                ThrowArgumentNull<TSubject>();
            }

            return func(subject);
        }

        /// <summary>
        ///     Calls the code wrapped by the delegate when the subject is not pointing to null,
        ///     otherwise, <see cref="ArgumentNullException" /> is thrown.
        /// </summary>
        /// <remarks>
        ///     Eyal Shilony, 01/08/2012.
        /// </remarks>
        /// <typeparam name="TSubject"> The type of the subject to operate on. </typeparam>
        /// <param name="subject"> The subject to operate on. </param>
        /// <param name="func"> The function that should be invoked when the subject is not pointing to null. </param>
        public static void SafeCall<TSubject>(this TSubject subject, Action<TSubject> func)
            where TSubject : class
        {
            Contract.Requires(func != null);

            if (subject == null)
            {
                ThrowArgumentNull<TSubject>();
            }

            func(subject);
        }

        /// <summary>
        ///     Ensures that the subject is not pointing to null and returns it, otherwise, <see cref="ArgumentNullException" /> is thrown.
        /// </summary>
        /// <remarks>
        ///     Eyal Shilony, 01/08/2012.
        /// </remarks>
        /// <typeparam name="TSubject"> The type of the subject to operate on. </typeparam>
        /// <param name="subject"> The subject to operate on. </param>
        /// <returns> The subject. </returns>
        public static TSubject SafeReturn<TSubject>(this TSubject subject)
            where TSubject : class
        {
            Contract.Ensures(Contract.Result<TSubject>() != null);

            if (subject == null)
            {
                ThrowArgumentNull<TSubject>();
            }

            return subject;
        }

        private static void ThrowArgumentNull<TSubject>() where TSubject : class
        {
            // ReSharper disable NotResolvedInText
            throw new ArgumentNullException("subject", string.Format("Object reference of type '{0}' not set to an instance of an object.", typeof(TSubject).FullName));
            // ReSharper restore NotResolvedInText
        }
    }
} 
```

这是我整理的优缺点列表。

**优点：**

*   消除了复杂空检查的冗余。
*   与 NullReferenceException 相比，提供有关错误的更多信息。
*   一个集中的地方，您可以控制错误的行为，例如在生产构建中，您可以决定要使用异常，在调试构建中，您可以选择使用断言或记录传播的异常。
*   代码可以更具可读性和优雅。

**缺点：**

*   表现？
*   陡峭的学习曲线，特别是对于那些对委托、lambda 运算符或函数式编程感到不舒服的人。
*   清晰度降低。

这是我必须处理的一些代码。

```
var entity = Builder.Entity<User>();

entity.HasKey(u => u.Id);
entity.Property(u => u.Id).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
entity.Property(u => u.DisplayName).IsRequired();
entity.Property(u => u.DisplayName).HasMaxLength(20);
entity.Property(u => u.Username).HasMaxLength(50);
entity.Property(u => u.Password).HasMaxLength(100);
entity.Property(u => u.Salt).HasMaxLength(100);
entity.Property(u => u.IP).HasMaxLength(20);
entity.Property(u => u.CreatingDate);
entity.Property(u => u.LastActivityDate);
entity.Property(u => u.LastLockoutDate);
entity.Property(u => u.LastLoginDate);
entity.Property(u => u.LastPasswordChangedDate); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-15T12:27:37.060

Jeffrey 的评论很有价值，所以我只是忽略了使用[ContractVerificationAttribute](http://msdn.microsoft.com/en-us/library/system.diagnostics.contracts.contractverificationattribute%28v=vs.100%29.aspx)的警告。

# image - 如何在 Oracle APEX 4 的导航选项卡（栏）上放置图像或基于图像的文本？

> ID：11747485
> 
> 赞同：1
> 
> 时间：2012-07-31T19:23:07.913
> 
> 标签：image, tabs, oracle-apex

有这个基本问题..

我在 Oracle APEX 4.0 中有两个选项卡导航栏。父选项卡和标准选项卡。

从左侧开始位于父选项卡下方的标准选项卡，我想在右侧放置一个文本或由文本组成的图像，用于描述整个应用程序。

由文本组成的文本或图像将是“基本程序”，绿色，大字体。

任何人都可以指导我如何进行..

我在考虑使用 #tab_cells# 之类的替换字符串可能会起作用，但不确定放在哪里以及如何做？

感谢你的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:53:31.123

选项卡早就应该进行大修了，您可以对它们进行的自定义非常有限。没有彻底检修您的菜单系统，我将通过 javascript/jquery 更改此选项卡。

请注意选项卡的选择器。我不知道您使用的是哪个主题，我为**主题 21**做了这个，带有 2 个级别的选项卡，选择了一个 2 级的选项卡。检查您的 HTML 并根据您的要求进行调整。

```
$("ul#tabs li").each(function(){
   if($(this).text().indexOf('Maatregelen')!=-1){
      $(this).children('a.tab_link').css(
         {"background":'url()', "background-color":"green", "text-shadow":"none"}
       );
   };
}); 
```

我不会改变模板本身。由于您不能使用 plsql 代码，因此您对选项卡生成无能为力。相反，您可以将选项卡标签放在比 a-tag 更高级别的属性中，以获得更简单的 jquery 选择器。或者您可以将 javascript 代码放入以在加载时运行。或者在第 0 页上进行动态操作以在加载时运行，这将影响每个页面中的每个选项卡。

# hadoop - 我无法从我的 sql 服务器导入表以通过 sqoop 进行配置

> ID：11747489
> 
> 赞同：1
> 
> 时间：2012-07-31T19:23:16.700
> 
> 标签：hadoop, hive, cloudera, sqoop

当我通过命令时：

$sqoop create-hive-table --connect 'jdbc:sqlserver://10.100.0.18:1433;username=cloud;password=cloud123;database=hadoop' --table 集群

出现一些错误和警告，最后它说，无法启动数据库'/var/lib/hive/metastore/metastore_db'，有关详细信息，请参阅下一个异常[再次显示导入错误列表]

最后它说 hive 以 satus 9 退出

这里有什么问题？我是 sqoop 和 hive 的新手。请任何人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-27T10:42:17.503

正确的语法是

sqoop import --connect 'jdbc:sqlserver://10.100.0.18:1433/hadoop' --username cloud --password cloud123 --table cluster --hive-import

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:19:53.580

我想您可能想检查您是否对指定目录具有写入权限，以及是否正在创建名为 metastore_db 的目录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-04T16:20:10.670

你的语法全错了。语法是 $sqoop 工具名称 [工具参数]

> $sqoop **import** --create-hive-table --connect 'jdbc:sqlserver://10.100.0.18:1433/hadoop' --username cloud --password cloud123 --table cluster

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T02:48:02.703

当您使用默认 Hive 配置运行 Sqoop 时，通常会显示此消息。Hive 默认使用仅在非常基本的测试用例中可用的 derby 数据存储。我建议重新配置您的配置单元实例以使用其他一些关系数据库作为数据存储后端（MySQL、PostgreSQL、Oracle）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-26T18:01:52.730

使用 sqoop 粘贴 hive 导入的示例调用。这可能会帮助您进一步更正语法。请记住，基本上您需要提供以下命令才能使其工作。

```
sqoop import --connect jdbc:mysql://localhost/RAWDATA --table geolocation --username root --password hadoop  --hive-import  --create-hive-table --driver com.mysql.jdbc.Driver --m 1 --delete-target-dir 
```

1.  **--connect**，其中读取 / **RAWDATA**的部分是您的 mysql 实例中的数据库名称，其中包含地理位置表。您可以在 mysql 中执行“显示数据库”和“显示表”命令来检查您的数据库和表。
2.  **--delete-target-dir**选项用于安全。它将确保 sqoop 在将文件移动到配置单元之前删除它为写入文件而创建的 tmp 目录。这将避免目录已经存在的不必要错误，以防您重试该命令。
3.  **仅当您尚未在 hive 中创建目标表时才需要**--create-hive-table 。**如果您之前运行的 sqoop 命令已经创建了表，那么您可以完全忽略此选项。检查您的配置单元数据库是否存在目标配置单元表。**
***   **--driver**是执行任何数据库连接的命令的必需部分。确保找到驱动程序库的正确路径或尝试谷歌搜索选项。您可以先尝试上面粘贴的那个，看看它是否有效。您可以返回此论坛寻求帮助。*   请记住，我们没有提到将在 hive 中创建表的哪个数据库，因此它将在 hive 的默认数据库中。我没有给出那个选项，因为你只是从 sqoop 开始。**

# php - 选择 xpath 查询的第 N 个元素

> ID：11747490
> 
> 赞同：1
> 
> 时间：2012-07-31T19:23:21.940
> 
> 标签：php, xpath, random

我使用以下 php 代码从 xpath 查询中获取随机数量的 URL：

```
@$dom = new DOMDocument();
@$dom->loadHTML( $rawPage );
@$xpath = new DOMXPath( $dom );
@$itemCells = $xpath->query( "//td[@width=120]/a" ); 
```

我需要从该池中随机选择一个 url，以便我可以通过 cURL 访问它。

我想做的是计算找到多少个 URL，这样我就可以将其用作`rand( 0 , $itemCells->length )`

但是它告诉我`$itemCell` **不能使用 DOMNodeList 类型的对象作为数组**，并且我的 rand() **rand() 期望参数 2 很长，给定对象**

也许有更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:32:50.177

我怀疑，因为`$length`它是一个`readonly`属性，所以将它传递给函数时会遇到麻烦。因此，解决方案是先将`$length`值从 a保存[`DOMNodeList`](http://php.net/domnodelist)到局部变量，然后调用[`rand()`](http://php.net/rand)，如下所示：

```
$max = $itemCells->length; 
$rand = rand( 0, $max); 
```

然后你应该能够这样做从列表中抓取一个随机节点：

```
$random_node = $itemCells->item( $rand); 
```

从那里，要获取 URL，您将执行以下操作：

```
$url = $random_node->attributes->getNamedItem("href")->nodeValue; 
```

# ajax - Chrome 溢出：ajax 操作后的自动问题

> ID：11747492
> 
> 赞同：0
> 
> 时间：2012-07-31T19:23:23.540
> 
> 标签：ajax, google-chrome, scroll

作为页面的一部分，我正在填充一个 div

```
{width:496px; height:640px; overflow-x: hidden ; overflow-y:auto; } 
```

使用 ajax 调用：

```
function ajaxcall(program, param) {
$("#ajaxloader").html("<IMG src='ajax-loader.gif'>");
$("#content").hide(); $("#ajaxloader").show();
$.ajax(
    {
    url: program,
    type:"POST",
    data: { "param":param },
    success: function(back)
        {
        $("#ajaxloader").hide();
        $("#content").html(back);
        $("#content").fadeIn(300);
        }
    });
} 
```

根据鼠标位置，Chrome 会部分或完全填充可见内容 div 区域之外的 ajax 内容。Safari，Firefox 都可以正常工作，chrome 不行。到目前为止，我的研究没有成功。尝试完全溢出：自动不起作用。任何人的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:35:32.920

尝试再次设置，溢出-y：隐藏和溢出-y：自动返回。我希望它会有所帮助。（我讨厌浏览器的差异）

# haskell - 在 GHC 中自动分配成本中心

> ID：11747493
> 
> 赞同：3
> 
> 时间：2012-07-31T19:23:24.740
> 
> 标签：haskell, profiling, ghc

我正在使用 GHC 7.4.1 并尝试分析一段代码。不幸的是，分析器的输出为该功能分配了一个大成本中心`main`，而不是为每个功能将其分解为多个成本中心。

这是我用来分析代码的过程。我很感激能指出我做错了什么。

首先，重新安装库，启用优化和分析：

```
cabal install -p -O2 
```

接下来，我重新编译要分析的代码：

```
ghc -rtsopts -prof -fprof-auto -fforce-recomp --make -O2 "Main.hs" 
```

最后，我使用一些分析选项运行它：

```
./Main +RTS -K100M -s -p -hy 
```

这是结果：

```
COST CENTRE MODULE  %time %alloc

main        Main    100.0  100.0 
```

有什么明显的我做错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T19:27:33.630

( ，自 GHC 7.4 起) 选项自动将所有顶级函数（包括未导出的函数）标记为成本中心`-auto-all`。`-fprof-auto`

但是该选项仅影响当前编译的模块，因此可能还需要使用该选项编译库。为此，请在库的 .cabal 文件中设置`ghc-prof-options: -O2 -auto-all`(resp. )。`-fprof-auto`

注意：成本中心注释可能会对性能产生很大影响，因此`-auto-all`分别。`-fprof-auto`应该只用于当前正在检查的库，其他库应该使用更少的成本中心注释来编译，如`-auto`resp 给出的分析。`-fprof-auto-top`或`-fprof-auto-exported`。

# actionscript-3 - Application.application 是什么意思？

> ID：11747497
> 
> 赞同：0
> 
> 时间：2012-07-31T19:23:32.543
> 
> 标签：actionscript-3, apache-flex

我正在关注包含以下行的示例代码块：

```
 Application.application.addChild(myPrintData); 
```

我将代码放入自定义类（它是 Canvas）中，当我尝试使用 Application.application.. 时收到错误消息。错误是：-Access of undefined property Application 这是什么意思，我该如何绕过它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:29:55.617

您可能在自定义类中缺少导入语句。

导入 mx.core.Application；

应用程序是具有静态对象应用程序的抽象层，该应用程序是当前应用程序实例。请参阅下面来自 Reboog711 的注释。感谢您的指正。

# database - PostgreSQL`提示：您将需要重写或强制转换表达式。`更新类型为 POINT 的列

> ID：11747499
> 
> 赞同：1
> 
> 时间：2012-07-31T19:23:36.107
> 
> 标签：database, postgresql, geospatial, postgis, postgresql-9.1

我正在使用 PostgreSQL 9.1 和 PostGIS 2.0.1。

列的类型`location`是`point`。类型`latitude`和`longitude`双精度。

为什么这个更新声明

```
update list_of_location SET location = ST_SetSRID(ST_MakePoint(longitude,latitude), 4326); 
```

返回

```
LINE 1: update list_of_location SET location = ST_SetSRID(ST_MakePoint(longit...
                                               ^
HINT:  You will need to rewrite or cast the expression. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:33:39.280

要使用 PostGIS 2.0+，`location`类型应该是`geometry(Point,4326)`，而*不是* [`point`](http://www.postgresql.org/docs/current/static/datatype-geometric.html#AEN6432)。

# javascript - Jquery ajax 方法有时会失败

> ID：11747501
> 
> 赞同：0
> 
> 时间：2012-07-31T19:23:41.613
> 
> 标签：javascript, asp.net, jquery, asmx

我正在做一个 Web 应用程序，我正在使用 jquery.ajax 方法来调用我的 asp.net Web 服务。它在服务器上运行良好，[但当](http://www.isguvenligisinav.com/readmin/ExamManagement.aspx)我在我朋友的一些计算机上尝试时。它不工作。它在页面加载时显示“访问被拒绝”。我厌倦了 chrome 开发人员工具，它无法调用 Web 服务。我给了你这个错误页面链接 abow 。这不是浏览器错误，因为我们的浏览器版本相同。任何人都可以为我尝试并告诉我有什么问题吗？是什么阻止了我的网络服务？

**注意：**如果数据出现在 abow 链接页面的左侧面板中，一切正常。但是不来请看，告诉我有什么问题吗？左侧面板上的第一个数据元素应为“Deneme Sınavı - 1”

谢谢你！

# list - 如何使用 Prolog 编写 complst/3 谓词？

> ID：11747503
> 
> 赞同：1
> 
> 时间：2012-07-31T19:23:50.270
> 
> 标签：list, comparison, prolog

如果给定的版本具有给定的顺序关系，则写一个谓词 complst/3 为真。顺序将是：lt、le、gt、ge 或 eq 之一（小于、小于或等于、大于、大于或等于、等于），并且谓词应该为所有适用的关系。例如，

```
?- complst([2,3,4], [2,3,5], C).
C = lt ;
C = le .

?- complst([1,2,3,4], [1,1,8], C).
C = gt ;
C = ge . 
```

为了达到目的，我写了一个谓词：

```
complst([], [], Cmp) :-
    Cmp = eq, !.

complst([A], [B], Cmp) :-
    A > B,
    Cmp = gt.

complst([A], [B], Cmp):-
    A < B,
    Cmp = lt.

complst([A], [B], Cmp):-
    A >= B,
    Cmp = ge.

complst([A], [B], Cmp):-
    A =< B,
    Cmp = le.

complst([], [B], Cmp):-
    Cmp = le, !.

complst([], [B], Cmp):-
    Cmp = lt, !.

complst([A], [], Cmp):-
    Cmp = ge, !.

complst([A], [], Cmp):-
    Cmp = gt, !.

complst([X|XS], [Y|YS], Cmp):-
    X > Y,
    cmp_list([X], [Y], Cmp).

complst([X|XS], [Y|YS], Cmp):-
    X < Y,
    cmp_list([X], [Y], Cmp).

complst([X|XS], [Y|YS], Cmp):-
    X == Y,
    cmp_list(XS, YS, Cmp). 
```

但问题是，除非我按回车，否则输出永远不会停止。任何人都可以帮我解决这个问题吗？提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:10:16.903

以这种方式比较两个软件版本列表只有三种可能。第一个小于、等于或大于第二个。在第一种情况下`lt,le`适合。在第二种情况下`le,eq,ge`适合。在第三个 - `ge,gt`。

这意味着您可以成对比较两个列表的元素。一旦检测到第一种或第三种情况，您就可以立即生成这些值。否则，继续下一个对或元素。

沿两个列表递归的标准框架是

```
recur( [], [], X):- end_of_two_lists_reached(X).
recur( [], [_|_], X):- second_list_is_longer(X).
recur( [_|_], [], X):- first_list_is_longer(X).
recur( [A|A2], [B|B2], X):- two_elements_are(A,B,C),
  (   continue_recursing(C)
  ->  recur(A2,B2,X) 
  ;   stop_recursing(C,X) 
  ). 
```

# facebook - Facebook 图形 api 获取用户 IM

> ID：11747505
> 
> 赞同：1
> 
> 时间：2012-07-31T19:23:52.940
> 
> 标签：facebook, facebook-graph-api

有没有办法在联系信息中获取 IM 用户名，例如 jabber 或 msn 用户名？我没有在 api 文档中找到适当的权限。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:29:02.180

简而言之：您无法通过图形 API 访问该信息。

# playframework - 我可以在 Java 类中创建标签吗

> ID：11747507
> 
> 赞同：0
> 
> 时间：2012-07-31T19:24:03.710
> 
> 标签：playframework, playframework-2.0

在 Play中，我可以通过扩展类在 Java 中`1.x`创建一个。`tag``play.templates.FastTags`

在 Play 2.x 中是否可以在 Java 类中或仅在 scala.html 文件中创建标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:44:37.923

在 Play 2.0 `views`( `templates`) 中只是 Scala 函数，因此您可以轻松地使用一些控制器的方法作为标记：

```
<div>
    @YourController.yourMethod("your param value")
</div> 
```

[@查看类似案例](https://stackoverflow.com/a/11234495/1066240)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:14:00.267

AFAIK，只能在 scala.html 文件中使用。

要了解如何操作，请查看[Play 文档](http://www.playframework.org/documentation/2.0.2/JavaTemplateUseCases)。

# xcode - 升级到 OS X 10.8 和 Xcode 4.4 后编译出现问题

> ID：11747509
> 
> 赞同：0
> 
> 时间：2012-07-31T19:24:09.987
> 
> 标签：xcode

升级后我打开了一个现有项目，无法再编译。下面是我收到的警告类型的屏幕截图。这与什么有关？

![警告信息截图](../Images/3185815d5458704cac09c554c0ca7ebb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:38:29.410

我终于可以编译了。正如我所怀疑的那样，问题隐藏在我不太精通的“构建设置”之一中。谢天谢地，我还有另一个项目可以比较。

出于某种原因，我的“框架搜索路径”填充了一些系统路径。一旦我清除了这些，一切都编译好了！

# extjs - 如何在 extjs 网格面板中绘制多条箭头线

> ID：11747511
> 
> 赞同：0
> 
> 时间：2012-07-31T19:24:15.893
> 
> 标签：extjs, raphael

我正在尝试在两个网格面板之间绘制多条箭头线，但我只能绘制一个箭头，当我开始绘制第二个箭头时，第一个箭头没有显示。下面是我尝试过的代码。

这是我创建箭头的地方

```
Raphael.fn.arrow = function (x1, y1, x2, y2, size) {
    // alert("raphael");
        var angle = Math.atan2(x1-x2,y2-y1);
        angle = (angle / (2 * Math.PI)) * 360;
        var arrowPath = this.path("M" + x2 + " " + y2 + " L" + (x2  - size) + " " + (y2  - size) + " L" + (x2  - size)  + " " + (y2  + size) + " L" + x2 + " " + y2 ).attr("fill","black").rotate((90+angle),x2,y2);
        var linePath = this.path("M" + x1 + " " + y1 + " L" + x2 + " " + y2);
        return [linePath,arrowPath];
    };

drag initialization

 onInitDrag : function(x,y){
                var data = this.dragData;
                this.ddel.innerHTML = this.grid.getDragDropText();
                //alert("this.ddel :"+this.ddel.innerHTML);
                this.proxy.update(this.ddel);
                // fire start drag?
                //i would say yes ;-)
                this.onStartDrag(x,y);
            },
            /*
            * onStartDrag is called when you initiate the drag action
            * it stores the mouse coordinates and create the SVG canvas
            */
            onStartDrag : function(x, y){
                alert(Ext.getCmp('leftGridId'));
                this.arrowStart = {x:x, y:y};
                alert("on Start Drag :"+x+","+y);
                this.raphaelCanvas = new Raphael(0,0,2000,2000); //could be better...
                //apply body.no-cursor (cursor : none) to hide the cursor
                //cursor:pointer is nice too
                //alert("after StartDrag :"+x+","+y);
            },
            /*
            * onDrag is called on mousemove
            * it clears the canvas and draw the arrow again
            */
            onDrag : function(e){
                //alert("on drag");
                //alert("raphael arrow");
                this.raphaelCanvas.clear();
               var arrow = this.raphaelCanvas.arrow(this.arrowStart.x, this.arrowStart.y, e.xy[0], e.xy[1],8);
               // alert("after mapping"); 
            },
            /*
            * onEndDrag is called when you drop whatever you were dragging
            * it removes the SVG canvas from the document
            */
            onEndDrag : function(){
                alert("on end drag");
                //this.raphaelCanvas.remove();
                //delete this.raphaelCanvas;
                this.raphaelCanvas.renderfix();
                if(!onStartDrag){
                    /this.raphaelCanvas.remove();
                //delete this.raphaelCanvas;
                    }
                    else{
                        onStartDrag();
                        }

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:07:09.783

可以对您的代码进行重大改进，但如果您的两个箭头开始出现，请尝试这些快速更改......

```
 Raphael.fn.arrow = function (x1, y1, x2, y2, size) {
        // alert("raphael");
            var angle = Math.atan2(x1-x2,y2-y1);
            angle = (angle / (2 * Math.PI)) * 360;
            var arrowPath = this.path("M" + x2 + " " + y2 + " L" + (x2  - size) + " " + (y2  - size) + " L" + (x2  - size)  + " " + (y2  + size) + " L" + x2 + " " + y2 ).attr("fill","black").rotate((90+angle),x2,y2);
            var linePath = this.path("M" + x1 + " " + y1 + " L" + x2 + " " + y2);
            return [linePath,arrowPath];
        };

this.raphaelCanvas = new Raphael(0,0,2000,2000);
this.raphaelCanvas.renderfix();
drag initialization

 onInitDrag : function(x,y){
                var data = this.dragData;
                this.ddel.innerHTML = this.grid.getDragDropText();
                //alert("this.ddel :"+this.ddel.innerHTML);
                this.proxy.update(this.ddel);
                // fire start drag?
                //i would say yes ;-)
                this.onStartDrag(x,y);
            },
            /*
            * onStartDrag is called when you initiate the drag action
            * it stores the mouse coordinates and create the SVG canvas
            */
            onStartDrag : function(x, y){
                alert(Ext.getCmp('leftGridId'));
                this.arrowStart = {x:x, y:y};
                alert("on Start Drag :"+x+","+y);
                //this.raphaelCanvas = new Raphael(0,0,2000,2000); //could be better...
                //apply body.no-cursor (cursor : none) to hide the cursor
                //cursor:pointer is nice too
                //alert("after StartDrag :"+x+","+y);
            },
            /*
            * onDrag is called on mousemove
            * it clears the canvas and draw the arrow again
            */
            onDrag : function(e){
                //alert("on drag");
                //alert("raphael arrow");
                //this.raphaelCanvas.clear();
               var arrow = this.raphaelCanvas.arrow(this.arrowStart.x, this.arrowStart.y, e.xy[0], e.xy[1],8);
               // alert("after mapping"); 
            },
            /*
            * onEndDrag is called when you drop whatever you were dragging
            * it removes the SVG canvas from the document
            */
            onEndDrag : function(){
                alert("on end drag");
                //this.raphaelCanvas.remove();
                //delete this.raphaelCanvas;
                //this.raphaelCanvas.renderfix();
                if(!onStartDrag){
                    //this.raphaelCanvas.remove();
                //delete this.raphaelCanvas;
                    }
                    else{
                        onStartDrag();
                        }

            } 
```

# php - 在不更改页面的情况下调用 PHP 脚本

> ID：11747512
> 
> 赞同：3
> 
> 时间：2012-07-31T19:24:17.970
> 
> 标签：php, external

我正在尝试制作一个处理学生和导师数据库的网站。我的问题是，到目前为止，我知道可以运行 PHP 脚本（例如，从数据库中删除用户）的唯一方法是将信息放在链接中并让用户单击该链接。这确实有效，但很烦人，因为这意味着用户不断被重定向到新页面。我也一直在使用一些 $_SERVER['PHP_SELF']？*其他信息*，但这很麻烦，因为它会建立一个长堆栈的同一页面（即尝试使用浏览器的后退/前进功能将您带到同一页面）。

我希望能够生成链接/按钮，单击时将信息传递给 php 脚本**，而无需**重定向/更改页面（可能刷新页面以显示新结果除外）。

我的网站上的一个示例，该页面生成所有用户的列表，然后生成相应的链接/按钮以删除每个用户：

```
//Gets the list of users and iterates through the data
while ($row = mysqli_fetch_array($data))

    {
        $fullname = $row['lastname'] . ", " . $row['firstname'];
        $username = $row['username'];
        $remove_link = "remove_user.php?username=$username";

        echo '
                  <tr>
                    <td>' . $fullname . '</td>
                    <td>' . $username . '</td>
                    <td> <a href="'. $remove_link . '">Remove this user.</a> </td>
                  </tr> 
        ';

    } 
echo '</table>'; 
```

单击 $remove_link 时，它会加载一个删除用户的 php 脚本，然后重定向回原始页面 (user_list.php)。有没有办法只调用 remove_user.php 脚本而不重定向/更改页面？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:46:10.853

当今网站的工作方式是使用[Ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)动态加载/更改页面内容。

使用 Ajax 的最佳方式是使用[jQuery 的 Ajax](http://api.jquery.com/category/ajax/)函数。互联网上有许多教程将向您展示如何使用 jQuery。

如果你不想在你的 Ajax 中使用 jQuery，你可以使用老式的方法。您可以在[w3schools.com](http://w3schools.com/ajax/default.asp)上查看有关它的教程。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:28:19.763

您需要开始熟悉 javascript 和 AJAX。可能会考虑将 jQuery 用于您的 javascript 框架，因为它使这个相对简单，并且是最流行的此类框架，得到广泛的支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T19:28:37.233

你需要通过 来做到这一点`Ajax`，最简单的方法之一是使用[jQuery](http://jquery.com/)及其`$.ajax`,和方法`$.post`，它们可以让你做你想做的事。 如果您还没有使用过 jQuery，我建议您搜索一些教程，尤其是关于[nettuts](http://net.tutsplus.com)`$.get``$.getJson`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T19:29:07.443

而不是`<a href="link">`您可以使用`<a onlick="window.location.replace('link')">`which 不会将路径添加到历史记录中，您可以使用该`PHP_SELF`方法。

除此之外，您将不得不使用 AJAX。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T19:37:42.740

[使用 jQuery 进行 Ajax 调用的 5 种方法](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)

阅读本教程，它将对您有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T20:13:13.393

除了顶部的答案。如果用户禁用了 javascript，我将使用此 AJAX 后备脚本。在删除脚本的末尾放置以下内容：

```
<?php
//check if the request is not done with ajax
if (empty($_SERVER['HTTP_X_REQUESTED_WITH']) || strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) != 'xmlhttprequest') { 
//now check if the http referer is not empty. It's where the click took place. And if it's not empty redirect back to where the user came from.
    if (!empty($_SERVER['HTTP_REFERER'])) {
        header("Location: " . $_SERVER['HTTP_REFERER']);
        exit;
    }
}
?> 
```

# android - 选择 Android 构建作为 Android 测试项目的构建目标时，Eclipse 获取 NullPointerException

> ID：11747514
> 
> 赞同：1
> 
> 时间：2012-07-31T19:24:28.850
> 
> 标签：android, eclipse, testing, build, target

我正在尝试创建一个新的 Android 测试项目，当我选择构建目标时，我选择了 Android 2.2（但这适用于我选择的任何 Android 版本）。我得到一个 NPE，然后该项目将无法运行。我检查了构建路径并且不包括 Android 的东西，所以它没有得到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:35:39.730

如果您已经安装了 2.2，则**右键单击项目**> 选择**属性**> **Android** > 在**项目构建目标**下选择*Android 2.2*并再次运行您的项目。让我知道这是否可行。

# python - Pyramid - 上传图像并存储在磁盘上

> ID：11747519
> 
> 赞同：2
> 
> 时间：2012-07-31T19:24:50.557
> 
> 标签：python, image, pyramid, uploading

我正在尝试实现一个将文件（图像）上传到运行金字塔的服务器的系统。现在，这段代码给了我一个`AttributeError: 'unicode' object has no attribute 'file'`例外：

服务器端：

```
session = Session()
username = authenticated_userid(request)
if username == None:
    return HTTPNotFound()
else:
    user = session.query(User).filter(User.username == username).first()
if 'photo.submitted' in request.params:
    input_file = request.POST['file_input'].file
    tmp = '../static/images/%s' % (session.query(ProfilePic).order_by(-ProfilePic.photo_id).first().photo_id + 1)
    open(tmp, 'w').write(input_file.read())
    tmp.close()
    return Response('OK')
return {} 
```

HTML：

```
<html>
<body>
    <form action="/settings" method="post">
        <input type="file" name="file_input" value="Choose image" />

    <p><input type="submit" name="photo.submitted" value="Save" /></p>
    </form>
</body>
</html> 
```

看起来很简单，但行不通的东西。我试图按照[本](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/static_assets/files.html)教程进行操作，但它似乎只适用于视频/音频文件。我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T20:10:28.870

对于文件上传，您需要更改表单 enctype 以使用[`multipart/form-data`](https://datatracker.ietf.org/doc/html/draft-ietf-html-fileupload-02)：

```
<html>
<body>
    <form action="/settings" method="post" enctype="multipart/form-data">
        <input type="file" name="file_input" value="Choose image" />

    <p><input type="submit" name="photo.submitted" value="Save" /></p>
    </form>
</body>
</html> 
```

# javascript - 如何以两种方式将 Javascript 连接到 Python 以 JSON 格式共享数据？

> ID：11747527
> 
> 赞同：11
> 
> 时间：2012-07-31T19:25:25.713
> 
> 标签：javascript, python, json, web-services, sqlite

我正在尝试找出如何使用 JSON 格式在 Python 服务器和 Javascript 客户端之间创建本地连接，以便检索数据。特别是，我需要在 HTML 客户端进行一些查询，将这些查询以 JSON 格式发送到服务器，然后在 Python 服务器端运行它们以搜索 SQLite 数据库中的数据。从数据库中获取结果后，将这些结果也以 JSON 格式发送回客户端。

现在，我可以在 Python 上运行查询并在 JSON 上编写代码，如下所示：

```
import sqlite3 as dbapi
import json

connection = dbapi.connect("C:/folder/database.db")
mycursor = connection.cursor()
mycursor.execute("select * from people")
results = []
for information in mycursor.fetchall():
        results += information

onFormat = json.dumps(results)
print(onFormat) 
```

我知道这段代码做了类似的事情（实际上它运行），因为它调用服务器上的服务，该服务以 JSON 格式返回数据（但本示例中的服务器不是 Python）：

```
<html>
    <head>
        <style>img{ height: 100px; float: left; }</style>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>
    <body>
        <div id="images"></div>
    <script>
      $.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?",
      {
        tags: "mount rainier",
        tagmode: "any",
        format: "json"
      },
      function(data) {
        $.each(data.items, function(i,item){
          $("<img/>").attr("src", item.media.m).appendTo("#images");
          if ( i == 3 ) return false;
        });
      });</script>

    </body>
</html> 
```

我需要知道我应该如何（本地）运行 python 程序以成为可用的正在运行的 web 服务，以及 Javascript 应该如何从 python 服务器检索数据。

我一直在互联网上到处寻找这个，但我在任何地方都没有找到这个答案，因为他们给出的唯一答案是关于如何在 Python 或 Javascript 中编写 JSON，但不连接两者。希望有人可以帮助我！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T21:45:26.003

[这是一个烧瓶 Web 应用程序](http://flask.pocoo.org/)的“hello world”示例，它可以提供静态 html 和 javascript 文件，使用来自 javascript 请求的参数搜索数据库，并将结果作为 json 返回到 javascript：

```
import sqlite3
from flask import Flask, jsonify, g, redirect, request, url_for

app = Flask(__name__)

@app.before_request
def before_request():
    g.db = sqlite3.connect('database.db')

@app.teardown_request
def teardown_request(exception):
    if hasattr(g, 'db'):
        g.db.close()

@app.route('/')
def index():
    return redirect(url_for('static', filename='page.html'))

@app.route('/json-data/')
def json_data():
    # get number of items from the javascript request
    nitems = request.args.get('nitems', 2)
    # query database
    cursor = g.db.execute('select * from items limit ?', (nitems,))
    # return json
    return jsonify(dict(('item%d' % i, item)
                        for i, item in enumerate(cursor.fetchall(), start=1)))

if __name__ == '__main__':
    app.run(debug=True, host='localhost', port=5001) # http://localhost:5001/
else:
    application = app # for a WSGI server e.g.,
    # twistd -n web --wsgi=hello_world.application --port tcp:5001:interface=localhost 
```

数据库设置代码来自[Using SQLite 3 with Flask](http://flask.pocoo.org/docs/patterns/sqlite3/#using-sqlite-3-with-flask)。

`static/page.html`和`static/json-jquery.js`文件来自[Ajax/jQuery.getJSON Simple Example](http://www.jquery4u.com/json/ajaxjquery-getjson-simple/)，其中 javascript 代码稍作修改以传递不同的 url 和`nitems`参数：

```
$(document).ready(function(){
    $('#getdata-button').live('click', function(){
        $.getJSON('/json-data', {'nitems': 3}, function(data) {
            $('#showdata').html("<p>item1="+data.item1+" item2="+data.item2+" item3="+data.item3+"</p>");
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-31T19:29:37.627

你的问题相当于“我如何把这个 python 变成一个网络服务”。

可能最轻量级的方法是`web.py`and `flask`。去看一下。

如果这越来越大，请考虑`django`使用`tastypie`- 这是制作基于 json 的 api 的简单方法。

更新：显然，还有一个名为[Pico](https://github.com/fergalwalsh/pico)的 python-javascript RPC 框架，Felix Kling 是其中的贡献者。介绍说：

> 从字面上添加一行代码（导入 pico）到您的 Python 模块，以将其转换为可通过 Javascript（和 Python）Pico 客户端库访问的 Web 服务。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T14:42:32.353

我终于找到了比 Flask 更简单的方法。这是一个名为[Bottle](http://bottlepy.org/docs/dev/)的 Python 框架，您只需从官方网站下载该库并将其所有文件放在您的工作目录中即可导入该库。您也可以使用随附的 setup python 程序安装它，以避免随处携带源代码。然后，为了制作您的 Web 服务服务器，您可以这样编写代码：

```
from bottle import hook, response, route, run, static_file, request
import json
import socket
import sqlite3

#These lines are needed for avoiding the "Access-Control-Allow-Origin" errors
@hook('after_request')
def enable_cors():
    response.headers['Access-Control-Allow-Origin'] = '*'

#Note that the text on the route decorator is the name of the resource
# and the name of the function which answers the request could have any name
@route('/examplePage')
def exPage():
    return "<h1>This is an example of web page</h1><hr/><h2>Hope you enjoy it!</h2>"

#If you want to return a JSON you can use a common dict of Python, 
# the conversion to JSON is automatically done by the framework
@route('/sampleJSON', method='GET')
def mySample():
    return { "first": "This is the first", "second": "the second one here", "third": "and finally the third one!" }

#If you have to send parameters, the right sintax is as calling the resoure
# with a kind of path, with the parameters separed with slash ( / ) and they 
# MUST to be written inside the lesser/greater than signs  ( <parameter_name> ) 
@route('/dataQuery/<name>/<age>')
def myQuery(name,age):
    connection= sqlite3.connect("C:/folder/data.db")
    mycursor = connection.cursor()
    mycursor.execute("select * from client where name = ? and age= ?",(name, age))
    results = mycursor.fetchall()
    theQuery = []
    for tuple in results:
        theQuery.append({"name":tuple[0],"age":tuple[1]})
    return json.dumps(theQuery)

#If you want to send images in jpg format you can use this below
@route('/images/<filename:re:.*\.jpg>')
def send_image(filename):
    return static_file(filename, root="C:/folder/images", mimetype="image/jpg")

#To send a favicon to a webpage use this below
@route('/favicon.ico')
def favicon():
    return static_file('windowIcon.ico', root="C:/folder/images", mimetype="image/ico")

#And the MOST important line to set this program as a web service provider is this
run(host=socket.gethostname(), port=8000) 
```

最后，您可以通过以下方式在 Javascript 客户端上调用您的 Bottlepy 应用程序的 REST Web 服务：

```
var addr = "192.168.1.100"
var port = "8000"

function makeQuery(name, age){
    jQuery.get("http://"+addr+":"+port+"/dataQuery/"+ name+ "/" + age, function(result){
        myRes = jQuery.parseJSON(result);
        toStore= "<table border='2' bordercolor='#397056'><tr><td><strong>name</strong></td><td><strong>age</strong></td></tr>";
        $.each(myRes, function(i, element){
            toStore= toStore+ "<tr><td>"+element.name+"</td><td>" + element.age+ "</td></td></tr>";
        })
        toStore= toStore+ "</table>"
        $('#theDataDiv').text('');
        $('<br/>').appendTo('#theDataDiv');
        $(toStore).appendTo('#theDataDiv');
        $('<br/>').appendTo('#theDataDiv');
    })
} 
```

我希望它对其他人有用

# winapi - KbdLayerDescriptor pVkToWcharTable 在 Win64 上返回 NULL

> ID：11747532
> 
> 赞同：0
> 
> 时间：2012-07-31T19:25:37.540
> 
> 标签：winapi, keyboard, mingw, wow64, syswow64

我在这里没有想法了。我有一段改编自[http://thetechnofreak.com/technofreak/keylogger-visual-c/](http://thetechnofreak.com/technofreak/keylogger-visual-c/)的代码，用于将键码转换为 unicode 字符。它在所有情况下都可以正常工作，除非您尝试从 64 位 Windows 运行 32 位版本。出于某种原因，pKbd->pVkToWcharTable 一直返回 NULL。我已经尝试过 __ptr64 以及为 kbd dll 路径明确指定 SysWOW64 和 System32。我在互联网上找到了几个提到这个确切或非常相似的问题的项目，但我似乎无法让任何解决方案起作用（参见：[KbdLayerDescriptor 在 64 位架构中返回 NULL](https://stackoverflow.com/questions/10398072/kbdlayerdescriptor-returns-null-at-64bit-architecture)) 以下是我在 Windows XP (gcc -std=c99 Wow64Test.c) 上使用 mingw-32 编译然后在 Windows 7 64 位上执行的测试代码。在 Windows XP 上，我得到了一个有效的指针，但是在 Windows 7 上，我得到了 NULL。

***更新：所以看起来我遇到的问题是由于 mingw 没有正确实现 __ptr64 因为 sizeof 操作给出了 4 个字节而不是 Visual Studio 给出的 8 个字节。所以真正的解决方案是想办法使 KBD_LONG_POINTER 的大小动态或至少为 64 位，但我不确定这是否可能。有任何想法吗？

```
#include <windows.h>
#include <stdio.h>

#define KBD_LONG_POINTER __ptr64
//#define KBD_LONG_POINTER

typedef struct {
    BYTE Vk;
    BYTE ModBits;
} VK_TO_BIT, *KBD_LONG_POINTER PVK_TO_BIT;

typedef struct {
    PVK_TO_BIT pVkToBit;
    WORD wMaxModBits;
    BYTE ModNumber[];
} MODIFIERS, *KBD_LONG_POINTER PMODIFIERS;

typedef struct _VK_TO_WCHARS1 {
    BYTE VirtualKey;
    BYTE Attributes;
    WCHAR wch[1];
} VK_TO_WCHARS1, *KBD_LONG_POINTER PVK_TO_WCHARS1;

typedef struct _VK_TO_WCHAR_TABLE {
    PVK_TO_WCHARS1 pVkToWchars;
    BYTE nModifications;
    BYTE cbSize;
} VK_TO_WCHAR_TABLE, *KBD_LONG_POINTER PVK_TO_WCHAR_TABLE;

typedef struct {
    DWORD dwBoth;
    WCHAR wchComposed;
    USHORT uFlags;
} DEADKEY, *KBD_LONG_POINTER PDEADKEY;

typedef struct {
    BYTE vsc;
    WCHAR *KBD_LONG_POINTER pwsz;
} VSC_LPWSTR, *KBD_LONG_POINTER PVSC_LPWSTR;

typedef struct _VSC_VK {
    BYTE Vsc;
    USHORT Vk;
} VSC_VK, *KBD_LONG_POINTER PVSC_VK;

typedef struct _LIGATURE1 {
    BYTE VirtualKey;
    WORD ModificationNumber;
    WCHAR wch[1];
} LIGATURE1, *KBD_LONG_POINTER PLIGATURE1;

typedef struct tagKbdLayer {
    PMODIFIERS pCharModifiers;
    PVK_TO_WCHAR_TABLE pVkToWcharTable;
    PDEADKEY pDeadKey;
    PVSC_LPWSTR pKeyNames;
    PVSC_LPWSTR pKeyNamesExt;
    WCHAR *KBD_LONG_POINTER *KBD_LONG_POINTER pKeyNamesDead;
    USHORT *KBD_LONG_POINTER pusVSCtoVK;
    BYTE bMaxVSCtoVK;
    PVSC_VK pVSCtoVK_E0;
    PVSC_VK pVSCtoVK_E1;
    DWORD fLocaleFlags;
    BYTE nLgMax;
    BYTE cbLgEntry;
    PLIGATURE1 pLigature;
    DWORD dwType;
    DWORD dwSubType;
} KBDTABLES, *KBD_LONG_POINTER PKBDTABLES;

typedef PKBDTABLES(CALLBACK *KbdLayerDescriptor) (VOID);

int main() {
    PKBDTABLES pKbd;
    HINSTANCE kbdLibrary = NULL;

    //"C:\\WINDOWS\\SysWOW64\\KBDUS.DLL"
    //"C:\\WINDOWS\\System32\\KBDUS.DLL"
    kbdLibrary = LoadLibrary("C:\\WINDOWS\\SysWOW64\\KBDUS.DLL");

    KbdLayerDescriptor pKbdLayerDescriptor = (KbdLayerDescriptor) GetProcAddress(kbdLibrary, "KbdLayerDescriptor");

    if(pKbdLayerDescriptor != NULL) {
        pKbd = pKbdLayerDescriptor();

        printf("Is Null? %d 0x%X\n", sizeof(pKbd->pVkToWcharTable), pKbd->pVkToWcharTable);
    }

    FreeLibrary(kbdLibrary);
    kbdLibrary = NULL;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-19T13:18:26.220

对您来说可能为时已晚，但对于遇到相同问题的人来说，这里有一个解决方案。此演示和不完整的解释有帮助，但仅适用于 Visual Studio： http: [//www.codeproject.com/Articles/439275/Loading-keyboard-layout-KbdLayerDescriptor-in-32-6](http://www.codeproject.com/Articles/439275/Loading-keyboard-layout-KbdLayerDescriptor-in-32-6)

结构中的指针`kbd.h`都有`KBD_LONG_POINTER`宏，`*__ptr64*`在 64 位操作系统上定义。在 Visual Studio 中，这使得指针占用 8 个字节，而不是通常的 4 个 32 位程序。不幸的是，在 MinGW 中，`*__ptr64*`被定义为不做任何事情。

如链接解释中所述，该`KbdLayerDescriptor`函数在 32 位和 64 位 Windows 上返回的指针不同。指针的大小似乎取决于操作系统而不是正在运行的程序。实际上，对于 32 位程序，在 64 位操作系统上指针仍然是 4 字节，但在 VS 中，*`__ptr64`*关键字在于它们不是。

例如，一些结构如下所示`kbd.h`：

```
typedef struct {
    BYTE Vk;
    BYTE ModBits;
} VK_TO_BIT, *KBD_LONG_POINTER PVK_TO_BIT;

typedef struct {
    PVK_TO_BIT pVkToBit;
    WORD wMaxModBits;
    BYTE ModNumber[];
} MODIFIERS, *KBD_LONG_POINTER PMODIFIERS; 
```

对于 64 位 Windows 上的 32 位程序，这在 MinGW 和 VS 中都不起作用。因为没有. *`pVkToBit`*_ 解决方案是忘记（您甚至可以将它们全部删除）并定义类似于上述的结构。IE ：`MODIFIERS`*`__ptr64`*`KBD_LONG_POINTER`

```
struct VK_TO_BIT64
{
    BYTE Vk;
    BYTE ModBits;
};

struct MODIFIERS64
{
    VK_TO_BIT64 *pVkToBit;
    int _align1;
    WORD wMaxModBits;
    BYTE ModNumber[];
}; 
```

（您可以使用`VK_TO_BIT`而不是定义自己的`VK_TO_BIT64`，因为它们是相同的，但是有单独的定义有助于理解发生了什么。）

该成员*`pVkToBit`*仍然占用 4 个字节，但`KbdLayerDescriptor`在 64 位操作系统上填充指向 8 个字节的指针，因此我们必须插入一些填充 ( `int _align1`)。

您必须对 中的其他结构做同样的事情`kbd.h`。例如，这将替换`KBDTABLES`：

```
struct WCHARARRAY64
{
    WCHAR *str;
    int _align1;
};

struct KBDTABLES64
{
    MODIFIERS64 *pCharModifiers;
    int _align1;
    VK_TO_WCHAR_TABLE64 *pVkToWcharTable;
    int _align2;
    DEADKEY64 *pDeadKey;
    int _align3;
    VSC_LPWSTR64 *pKeyNames;
    int _align4;
    VSC_LPWSTR64 *pKeyNamesExt;
    int _align5;
    WCHARARRAY64 *pKeyNamesDead;
    int _align6;
    USHORT *pusVSCtoVK;
    int _align7;
    BYTE bMaxVSCtoVK;
    int _align8;
    VSC_VK64 *pVSCtoVK_E0;
    int _align9;
    VSC_VK64 *pVSCtoVK_E1;
    int _align10;
    DWORD fLocaleFlags;
    byte nLgMax;
    byte cbLgEntry;
    LIGATURE64_1 *pLigature;
    int _align11;
    DWORD dwType;
    DWORD dwSubType;
}; 
```

（请注意，该`_align8`成员不在指针之后。）

要使用这一切，您必须检查您是否在 64 位 Windows 上运行：http: [//msdn.microsoft.com/en-us/library/ms684139%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms684139%28v=vs.85%29.aspx)

如果不是，请使用 中的原始结构`kbd.h`，因为指针行为正确。它们占用 4 个字节。如果程序在 64 位操作系统上运行，请使用您创建的结构。您可以通过以下方式实现它：

```
typedef __int64 (CALLBACK *LayerDescriptor64)(); // Result should be cast to KBDTABLES64.
typedef PKBDTABLES (CALLBACK *LayerDescriptor)(); // This is used on 32 bit OS.

static PKBDTABLES kbdtables = NULL;
static KBDTABLES64 *kbdtables64 = NULL; 
```

在一些初始化函数中：

```
if (WindowsIs64Bit()) // Your function that checks the OS version.
{
    LayerDescriptor64 KbdLayerDescriptor = (LayerDescriptor64)GetProcAddress(kbdLibrary, "KbdLayerDescriptor");
    if (KbdLayerDescriptor != NULL)
        kbdtables64 = (KBDTABLES64*)KbdLayerDescriptor();
    else
        kbdtables64 = NULL;
}
else
{
    LayerDescriptor KbdLayerDescriptor = (LayerDescriptor)GetProcAddress(kbdLibrary, "KbdLayerDescriptor");
    if (KbdLayerDescriptor != NULL)
        kbdtables = KbdLayerDescriptor();
    else
        kbdtables = NULL;
} 
```

该解决方案根本不使用*`__ptr64`*，并且在 VS 和 MinGW 中都可以使用。你需要注意的事情是：

1.  结构应在 8 字节边界上对齐。（这是当前 VS 或 MinGW 中的默认设置，至少对于 C++ 而言。）
2.  不要定义`KBD_LONG_POINTER`to*`__ptr64`*或从任何地方删除它。尽管最好不要更改 kbd.h。
3.  了解结构成员对齐的工作原理。（我已将其编译为 C++ 而不是 C。我不确定 C 的对齐规则是否会有所不同。）
4.  根据操作系统使用正确的变量（或`kbdtables`或）。`kbdtables64`
5.  编译 64 位程序时显然不需要此解决方案。

# php - 2人游戏的SQL数据库结构

> ID：11747534
> 
> 赞同：0
> 
> 时间：2012-07-31T19:25:41.290
> 
> 标签：php, mysql, html, database

我正在制作一个游戏，到目前为止，我有一个成员表设置，可以使用登录/注册。游戏将是一个 2 人游戏，用户选择一个国家。数据库结构将需要跟踪该国家/地区的国家、州或省、人口。

我所做的是为游戏创建一个数据库，其中包含成员表、大厅/聊天表和国家/地区表。如果每个国家/地区都有自己的数据库，因为我需要跟踪我所说的那些事情（那个国家的州或省，人口等）

构建数据库的最有效方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:34:45.613

为省份创建一个表，列“国家”、“省”、“人口”。然后，您可以查询一个国家/地区的所有省份（如您所料`select province where country = "Narnia"`），或使用同一张表上的不同子句获取国家/地区列表（`select distinct country from countries`）。

是的，每一行都有重复的数据 - 即 ['narnia', 'north'] 和 ['narnia', 'south'] 有 2 行，但这就是数据库中大量数据的结构。

如果您将表格分成 2 个，一个用于国家名称，另一个用于国家数据，您仍将具有上述结构，只是代替国家名称，您将有一个国家 id 引用另一个中的行桌子。对于“复杂”的结构，这是要走的路，但对于像这样简单的东西，只需将国家名称放在所有国家数据的表中即可。

# android - 没有 TOAST，Android PowerManager 唤醒锁将无法工作

> ID：11747536
> 
> 赞同：1
> 
> 时间：2012-07-31T19:26:05.820
> 
> 标签：android

我制作了一个应用程序，当它收到短信时会唤醒屏幕。我想出了以下代码来唤醒屏幕。

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);

        boolean isScreenOn = pm.isScreenOn();

    if(!isScreenOn ){

final PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK, "My tag");
        wl.acquire();

        Toast.makeText(getBaseContext(), "This is WAKEUP SCREEN", Toast.LENGTH_SHORT).show();
        Thread timer = new Thread(){
            public void run(){
                try {
                    sleep(5000);
                } catch (InterruptedException e) {
                    // TODO: handle exception
                }finally{
                    wl.release();
                }
            }
        };
        timer.start();
    } 
```

现在的问题是，如果我注释掉或删除该语句，`Toast.makeText(getBaseContext(), "This is WAKEUP SCREEN", Toast.LENGTH_SHORT).show();`我的屏幕将不会唤醒。我不确定这里有什么问题......而且我使用的是android 2.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:31:05.053

使用`PowerManager.SCREEN_DIM_WAKE_LOCK|PowerManager.ACQUIRE_CAUSES_WAKEUP`而不是 just `PowerManager.SCREEN_DIM_WAKE_LOCK`，看看是否有帮助。

# c# - 回发与 Javascript 客户端计算

> ID：11747538
> 
> 赞同：0
> 
> 时间：2012-07-31T19:26:17.460
> 
> 标签：c#, javascript, asp.net, sql

我有一个正在开发的 ASP.NET Web 应用程序，但我有一个关于效率的问题。在我的页面上，我的文本框有一个 OnTextChange 事件，该事件调用了一个 C# 页面，里面有函数。该函数工作并总结一些值并将输出发送回页面。现在该函数仅在某些事件触发回发到服务器时才调用，然后计算完成。我想知道如果我同时使用服务器端代码和一些 Javascript 来进行相同的计算，当回发发生时是否会出现数据冲突？例如，如果我将数据提交到 SQL 数据库，会有什么问题吗？Javascript 可以立即进行简单的数学运算，并且对于用户在文本框中输入一些数字时可以立即获得结果，而无需按 Enter 或提交按钮，这将是一个更好的 UI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:32:23.090

你不应该担心这个。无论您在 Javascript 中做什么，都会正确地回传到服务器。你不会看到任何类型的“冲突”。

# html - 在 HTML 中向表中添加新行

> ID：11747540
> 
> 赞同：0
> 
> 时间：2012-07-31T19:26:23.860
> 
> 标签：html, html-table, dart

我一直在玩 Dart，我喜欢它，但现在我感觉有点笨。

我正在尝试将新行添加到具有以下结构的 html 页面中的表中：

```
<table>
   <thead>
   ...
   </thead>
   <tbody>
   ...
   </tbody>
</table> 
```

问题是当我执行代码时，新行出现在 tbody 标记之后，然后我失去了 CSS 样式。

我正在这样做：

```
TableElement myTable = query('#tabTest');
TableRowElement newLine = new TableRowElement();  
newLine.insertCell(0).text = "9";
newLine.insertCell(1).text = "aaa";
newLine.insertCell(2).text = "bbb";
newLine.insertCell(3).text = "ccc";
myTable.nodes.add(newLine); 
```

这是错的吗？我应该怎么做才能使新行进入 tbody 标签内？有人可以给我举个例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:02:18.913

Dart 提供了许多构造元素的方法。你可以这样做：

```
void TableElement makeTable(List<String> ofStuff){
   final s = new StringBuffer();

   s.add('<table>');
   s.add('<thead></thead>');
   for(final stuff in ofStuff){
      s.add('<tr><td>${stuff}</td></tr>');
   }
   s.add('</table>');

   return new Element.html(s.toString()) as TableElement;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:06:43.423

我通过这样做得到了我想要的结果：

```
TableElement myTable = query('#tabTest');
// add at the end
TableRowElement newLine = myTable.insertRow(myTable.rows.length); 
newLine.insertCell(0).text = "9";
newLine.insertCell(1).text = "aaa";
newLine.insertCell(2).text = "bbb";
newLine.insertCell(3).text = "ccc"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T19:53:10.540

只需将此更改应用于您的托管 HTML 文件：

```
<table id="tabTest">
   <thead>
   </thead>
   <tbody id="tbody">
   </tbody>
</table> 
```

以及对您的 Dart 代码的更改：

```
//  TableElement myTable = query('#tabTest');
  var myTable = query('#tbody');
  TableRowElement newLine = new TableRowElement();
  newLine.insertCell(0).text = "9";
  newLine.insertCell(1).text = "aaa";
  newLine.insertCell(2).text = "bbb";
  newLine.insertCell(3).text = "ccc";
  myTable.nodes.add(newLine); 
```

# c# - 在非管理员帐户上使用多个 PGM 侦听套接字获取访问异常

> ID：11747545
> 
> 赞同：3
> 
> 时间：2012-07-31T19:26:40.067
> 
> 标签：c#, .net, sockets, multicast, pgm-protocol

以下代码适用于管理员帐户，但对于非管理员帐户，它会打印两次成功然后抛出 System.Net.Sockets.SocketException (0x80004005)：尝试以访问权限禁止的方式访问套接字。任何人都知道这是为什么？

仅供参考，这里的实际用例是使用相同 PGM 地址和套接字的多个应用程序。推送（通过多播）实时更新。这个概念证明，这不是由我们自己的库引起的。

```
class Program {
    static void Main(string[] args) {

        IPAddress ipAddr = IPAddress.Parse("239.0.0.2");
        IPEndPoint end = new IPEndPoint(ipAddr, 40002);
        Socket[] _sockets = new[] {
            new Socket(AddressFamily.InterNetwork, SocketType.Rdm, (ProtocolType)113 ),
            new Socket(AddressFamily.InterNetwork, SocketType.Rdm, (ProtocolType)113 ),
            new Socket(AddressFamily.InterNetwork, SocketType.Rdm, (ProtocolType)113 )
        };

        foreach (var socket in _sockets)
        {
            socket.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, true);
            socket.Bind(end);
            Console.WriteLine("Success");
        }

        Console.ReadLine();
    } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:26:12.443

好吧，我终于从微软那里得到了消息，但没有解决方法。

> 我能够找到您的请求被拒绝的行。
> 
> [0] 22E8.1554::08/15/2012-10:05:19.015 [sys] address_c491 PgmCreateAddress() - PgmCreateAddress: 错误 - 非管理员用户试图为 IP:Port= 打开 2+1 句柄
> 
> 通过一些代码审查，我能够验证只有三个主体被授予访问权限，它们是管理员、LocalService 和 NetworkService。除了成为管理员的成员之外，没有其他解决方法。
> 
> 我知道这不是你想听到的答案，但至少现在你有一个确定的答案。

# html - D2L 中的 LTI 参数

> ID：11747548
> 
> 赞同：0
> 
> 时间：2012-07-31T19:26:44.467
> 
> 标签：html, desire2learn, lti

我正在尝试新版本的 D2L 并看到 LTI 链接中缺少两个值。值是 context_id 和 ext_d2l_username 这两者以前都存在，我们需要做任何设置来使这些值与 html 帖子的其余部分一起流动吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:04:52.597

要启用发送 context_id 和 ext_d2l_username，您首先必须配置工具使用者信息以允许发送它们，然后确保您还为该 LTI 链接启用了它。

配置工具消费者信息：

*   使用具有必要权限的帐户，从管理工具中选择外部学习工具。
*   单击页面右上角附近的“设置”链接。
*   为 context_id 启用“允许向工具提供者发送上下文信息”，为 ext_d2l_username 启用“允许向工具提供者发送系统用户名”。

之后，选择您的 LTI Link 并在其配置下执行以下操作：

*   为 context_id 启用“向工具提供者发送上下文信息”。注意：只有在“配置工具消费者信息”屏幕中启用了“允许向工具提供者发送上下文信息”时，此选项才可用。
*   为 ext_d2l_username 启用“Send system username too tool provider”。注意：只有在“配置工具消费者信息”屏幕中启用了“允许向工具提供者发送系统用户名”时，此选项才可用。

为了在 LTI 链接启动时发送 context_id，该链接必须从课程上下文启动。如果它是从顶级组织级别添加的，它将被发送。

# c++ - 如何在子类中使用自定义的虚函数初始化基成员变量

> ID：11747549
> 
> 赞同：0
> 
> 时间：2012-07-31T19:26:46.783
> 
> 标签：c++, design-patterns

类 StructComponent 的构造函数根据传入的 info 对象的类型，采用不同的逻辑来初始化其成员变量。这里我使用强制转换将传入参数转换为正确的子类对象。

```
class StructComponent
{
public:
    StructComponent(const ClassA& info)
    {
        if (info.getType() == CLASS_B)
        {
            const ClassC& classC = dynamic_cast<const ClassC&> info;
            ...
            apply a different logic for ClassB and init member accordingly
        } else if (info.getType() == CLASS_C) {
            apply a different logic for others
            ...
        } else {
                    apply default
            }
    }
}

class ClassA
{
public:
    ClassA(...)
    {
        m_shp = CreateStructComponent();
    }   
    virtual boost::shared_ptr<StructComponent> CreateStructComponent()
    {
        return boost::shared_ptr<StructComponent> (new StructComponent(*this));     
    }

    ...
    int getType() const { return CLASS_A; }

protected:
    boost::shared_ptr<StructComponent> m_shp;
}

class ClassB : public ClassA
{
public:
    ...

    virtual boost::shared_ptr<StructComponent> CreateStructComponent()
    {
        return boost::shared_ptr<StructComponent> (new StructComponent(*this));     
    }   
    ...
    int getType() const { return CLASS_B; } 
}

class ClassC : public ClassA
{
public:
    ...

    virtual boost::shared_ptr<StructComponent> CreateStructComponent()
    {
        return boost::shared_ptr<StructComponent> (new StructComponent(*this));     
    }   
    ...
    int getType() const { return CLASS_C; } 
} 
```

Q1> 代码是否正确忽略了潜在的设计问题？

Q2>假设ClassA的所有子类都有相同的函数CreateStructComponent的实现体。有没有一种方法可以节省空间而不是重复执行以下相同的代码：

```
return boost::shared_ptr<StructComponent> (new StructComponent(*this)); 
```

Q3> 有没有更好的设计可以使用？例如，有没有一种方法可以忽略 StructComponent 中的强制转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:07:34.600

在执行类的构造函数时`A`，对象的类型是`A`. 因此将始终调用基本实现。因此，您可以省去重新键入实现的麻烦。

此代码设计错误；并且设计不正确的代码永远不会正确，至少在“正确”一词的通常含义中是这样。

如果 C++ 规则不适合您，则没有理由使用构造函数进行初始化。只需将其设为方法，调用 thing `Initialize`，您就可以调用任何您想要的虚拟方法`Initialize`，并获得您所期望的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:16:38.147

1) 不，它不正确，至少，它没有达到您的预期。它在 的构造函数中调用了一个虚函数，该函数`ClassA`将始终调用`ClassA::CreateStructComponent()`而不是调用派生类中的覆盖函数，因为当`ClassA`构造函数运行时，动态类型是`ClassA`. 出于同样的原因，在构造函数中`StructComponent`调用`getType()`将始终解析为`ClassA::getType()`.

2）有很多方法可以解决这个问题。您可以将代码放在模板中，因此它取决于类型，或者您可以通过在不同的地方进行初始化来摆脱重复代码的需要。

3）为什么不简单地给`StructComponent`重载的构造函数，一个接受`ClassB`，一个接受`ClassC`，另一个接受`ClassA`？

再一次，一个更好的解决方案可能是摆脱`StructComponent`构造函数并具有`ClassA`,`ClassB`或`ClassC`显式地进行初始化，以便每种类型按照它想要的方式对其进行初始化。如果初始化依赖于创建它的类型，则初始化不属于`StructComponent`构造函数。目前你有一个循环依赖，`StructComponent`需要知道所有使用它的类型，所有使用它的类型都需要知道`StructComponent`. 这通常是设计存在问题的迹象，所有类都紧密耦合在一起。`StrictComponent`如果对其他类型一无所知，那就更好了。

无论如何，这是一个可能的解决方案，展示了一种将正确类型传递给`StructComponent`不重复代码的方法，但我认为这不是一个好的设计。请注意，`Structcomponent`构造函数传递的是 NULL，因此它可以根据类型做不同的事情，但**不能**访问它传递的对象。

```
class StructComponent
{
public:
    explicit StructComponent(const ClassA*)
    { /* something */ }

    explicit StructComponent(const ClassB*)
    { /* something else */ }

    explicit StructComponent(const ClassC*)
    { /* something completely different */ }
};

class Base
{
protected:
  template<typename T>
    explicit
    Base(const T*)
    : m_shp( boost::make_shared<StructComponent>((T*)NULL) )
    { }

    boost::shared_ptr<StructComponent> m_shp;
};

class ClassA : virtual public Base
{
public:
    ClassA() : Base(this) { }
};

class ClassB : public ClassA
{
public:
    ClassB() : Base(this) { }
};

class ClassC : public ClassA
{
public:
    ClassC() : Base(this) { }
}; 
```

这是另一种完全不同的方法，没有虚拟基础黑客，仍然删除重复的代码，并允许`StructComponent`访问传递给它的对象（我认为这是一个坏主意）：

```
class StructComponent
{
public:
    explicit StructComponent(const ClassA& a)
    { /* something */ }

    explicit StructComponent(const ClassB& b)
    { /* something else */ }

    explicit StructComponent(const ClassC& c)
    { /* something completely different */ }
};

class ClassA
{
public:
    ClassA() : m_shp( create(*this) ) { }

protected:
    struct no_init { };

    explicit
    ClassA(no_init)
    : m_shp()
    { }

    template<typename T>
      boost::shared_ptr<StructComponent> create(const T& t)
      { return boost::make_shared<StructComponent>(t); }

    boost::shared_ptr<StructComponent> m_shp;
};

class ClassB : public ClassA
{
public:
    ClassB()
    : ClassA(no_init())
    { m_shp = create(*this); }
};

class ClassC : public ClassA
{
public:
    ClassC()
    : ClassA(no_init())
    { m_shp = create(*this); }
}; 
```

这是另一个选择，这次没有循环依赖，将不同的初始化代码移动到它所属的位置：

```
struct StructComponent
{
  StructComponent() { /* minimum init */ }
};

class ClassA
{
public:
    ClassA() : m_shp( createA() ) { }

protected:
    struct no_init { };

    explicit
    ClassA(no_init)
    : m_shp()
    { }

    boost::shared_ptr<StructComponent> createA()
    {
      // something
    }

    boost::shared_ptr<StructComponent> m_shp;
};

class ClassB : public ClassA
{
public:
    ClassB()
    : ClassA(no_init())
    { m_shp = createB(); }

private:
    boost::shared_ptr<StructComponent> createB()
    {
      // something else
    }
};

class ClassC : public ClassA
{
public:
    ClassC()
    : ClassA(no_init())
    { m_shp = createC(); }

private:
    boost::shared_ptr<StructComponent> createC()
    {
      // something completely different
    }
}; 
```

# installation - 在 Redhat 4.1 上构建 LAPACK 时出错

> ID：11747553
> 
> 赞同：1
> 
> 时间：2012-07-31T19:27:01.380
> 
> 标签：installation, lapack, atlas

我正在尝试在 Redhat 4.1 上使用 ATLAS 构建 LAPACK（完整版）。我已经根据 lapack 的 tarfile 成功构建了 ATLAS：

atlas/configure --prefix=HOME/atlas --with-netlib-lapack-tarfile=HOME/lapack-3.4.1.tgz make build make check make install

但我需要整个安装 LAPACK。我发现

[http://math-atlas.sourceforge.net/atlas_install/atlas_install.html](http://math-atlas.sourceforge.net/atlas_install/atlas_install.html)

和

[http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGcQFjAA&url=http%3A%2F%2Fciteseerx.ist.psu.edu%2Fviewdoc%2Fdownload%3Fdoi%3D10。 1.1.136.5309%26rep%3Drep1%26type%3Dpdf&ei=3C8YUKaqOIqm8AT6kYC4Cg&usg=AFQjCNHKbHg1H0qupmzQbj9tGq3tsmXRDQ&sig2=etIB36nxjasjUg4sEwQ0DQ](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGcQFjAA&url=http%3A%2F%2Fciteseerx.ist.psu.edu%2Fviewdoc%2Fdownload%3Fdoi%3D10.1.1.136.5309%26rep%3Drep1%26type%3Dpdf&ei=3C8YUKaqOIqm8AT6kYC4Cg&usg=AFQjCNHKbHg1H0qupmzQbj9tGq3tsmXRDQ&sig2=etIB36nxjasjUg4sEwQ0DQ)

这建议更改默认 make.inc.example 的几行以构建 LAPACK 的其余部分。但是，我什至无法使 LAPACK 的默认版本正常工作：

```
cp make.inc.example make.inc
compute-1-29.local make
( cd INSTALL; make; ./testlsame; ./testslamch; ./testdlamch; \
./testsecond; ./testdsecnd; ./testieee; ./testversion )
make[1]: Entering directory `/home/jmorgens/lap/lapack/INSTALL'
gfortran  -O0 -c slamch.f -o slamch.o
/share/apps/gcc-trunk/bin/../libexec/gcc/x86_64-unknown-linux-gnu/4.2.0/f951: error    while loading shared libraries: libmpfr.so.1: cannot open shared object file: No such file or directory
make[1]: *** [slamch.o] Error 1
make[1]: Leaving directory `/home/jmorgens/lap/lapack/INSTALL'
 ASCII character set
Tests completed
/bin/sh: ./testslamch: No such file or directory
/bin/sh: ./testdlamch: No such file or directory
/bin/sh: ./testsecond: No such file or directory
/bin/sh: ./testdsecnd: No such file or directory
/bin/sh: ./testieee: No such file or directory
/bin/sh: ./testversion: No such file or directory
make: *** [lapack_install] Error 127 
```

建议？

# iphone - 在 OpenGL ES 2.0 中创建精灵类

> ID：11747560
> 
> 赞同：0
> 
> 时间：2012-07-31T19:27:18.060
> 
> 标签：iphone, objective-c, opengl-es, opengl-es-2.0, vbo

        我正在努力在 OpenGL ES 2.0 中制作一个精灵类，并且已经成功了。目前我有一个精灵的渲染方法，它由我的 EAGL 层中的渲染方法每隔一段时间调用一次。每次调用渲染时我都在创建新的顶点缓冲区和索引缓冲区，但效率不高，所以我调用了 glremovebuffer。不幸的是，当我这样做时，帧速率会显着降低。

        所以目前我在初始化时创建了 vbo 和 ibo，它们在帧速率和内存消耗方面工作正常，但无法更新位置。

        由于我刚刚开始使用 OpenGL，因此我有点不知所措，感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:39:13.927

通常，您希望使用位于模型原点的 VBO 和 IBO 创建一次精灵。要平移、旋转和缩放，您将使用模型矩阵将您的精灵转换到所需的位置。

我相当确定 iphone sdk 提供了一些很好的功能来做到这一点，但我不知道其中任何一个:) 基本上，在你的着色器中，你获取你的位置坐标，然后将它乘以一个或多个矩阵，其中之一这些矩阵是模型矩阵，您可以将其更改为平移、旋转、缩放或这些矩阵的任何组合（实际上，它可以是您想要的任何矩阵，它会产生不同的结果）。

有很多资源可以解释这些转换矩阵。这是一个例子： [http ://db-in.com/blog/2011/04/cameras-on-opengl-es-2-x/](http://db-in.com/blog/2011/04/cameras-on-opengl-es-2-x/)

我的建议是找到一个与您的理解水平相同的教程并从中学习......

# iphone - 如何以编程方式打开/关闭计时器

> ID：11747563
> 
> 赞同：1
> 
> 时间：2012-07-31T19:27:23.293
> 
> 标签：iphone, objective-c, xcode, function, timer

这就是我想要做的：我想要一个计时器，触发一个方法，然后在这个方法结束时关闭，然后在另一个方法上打开另一个计时器，然后进入一个循环。

那么用于在方法上打开和关闭计时器的代码是什么？

在德尔福我使用：

```
timer.enable:=True; // timer.enable:=False; 
```

在objective-c上有类似的方法吗？我正在使用 Xcode 4.4 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:39:07.340

要关闭计时器，请`invalidate`像这样调用计时器：

`[yourTimer invalidate]`

然后开始一个新的：

```
NSTimer *newTimer;

                     newTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 //Every how many seconds
                                                                target:self
                                                              selector:@selector(methodToCall)
                                                              userInfo:nil
                                                               repeats:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:41:58.270

假设您的 NSTimer 被称为“计时器”，您可以使用...

```
[timer invalidate] 
```

停止计时器。要使计时器立即将消息传递给它的目标方法，请使用

```
[timer fire] 
```

要启动计时器，请使用文档中列出的构造方法之一 (https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)如

```
NSTimer *timer = [NSTimer timerWithTimeInterval:1.0 target:self selector:@selector(doThisWhenTimerFires:) userInfo:nil repeats:NO]

- (void)doThisWhenTimerFires:(NSTimer *)timer
{
     //code here
} 
```

# blackberry - labelField.getWidth() 返回 0？为什么会这样？

> ID：11747567
> 
> 赞同：2
> 
> 时间：2012-07-31T19:27:47.693
> 
> 标签：blackberry, horizontalfieldmanager

我正在开发自己的自定义管理器，到目前为止我已经完成了它，但它使用屏幕分辨率的百分比设置边距。

这是我如何调用以下类：

```
LabelIconCommandManager licm3 = new LabelIconCommandManager("Address blah bklahblah ", 0);
licm3.add(new ImageButtonField(b1, b2, b3, Field.FIELD_LEFT | ImageButtonField.CONSUME_CLICK)); 
```

这是类 [我在评论中标记了它返回 0 和返回 219 的位置。请告诉我为什么会发生这种情况：

```
public class LabelIconCommandManager extends HorizontalFieldManager implements  BCMSField
{
    LabelIconCommandManager me = this;
    EvenlySpacedHorizontalFieldManager buttonManager = new EvenlySpacedHorizontalFieldManager(0);
    LabelField labelField;
    int side = 0;
    int HPADDING = 3;
    int VPADDING = 4;
    int screenWidth = Display.getWidth();
    int labelField_width = 40;
    public LabelIconCommandManager()
    {
        this("", 0);
    }
    public LabelIconCommandManager(String label, long style)
    {
        super(USE_ALL_WIDTH| FOCUSABLE);
        this.setBorder(BorderFactory.createBitmapBorder(new XYEdges(15, 20, 15, 20),Bitmap.getBitmapResource( "border_edit.png" )));
        this.setMargin(1,10,1,10);
        labelField = new LabelField(label,LabelField.ELLIPSIS)
        {
            public void layout(int width, int height)
            {
                // Done because otherwise ellipses dont work with labelfields
                super.layout((int)(screenWidth * 0.61), getHeight());
                setExtent((int)(screenWidth * 0.61), getHeight());
                labelField_width = labelField.getWidth();
                DisplayDialog.alert("labelField_width = " + labelField_width); // returns 219
            }
        };
        // Top Right Bottom Left
        labelField.setMargin(VPADDING, HPADDING, VPADDING, 0);
        // super because we want this horizontalfieldManager to add it
        super.add(labelField);
        super.add(buttonManager);
    }
    public void alternateConstructor(Attributes atts)
    {
        labelField = new LabelField(atts.getValue("label"), 0);
    }
    public void onFocus(int direction)
    {
        this.setBorder(BorderFactory.createBitmapBorder(new XYEdges(15, 20, 15, 20),Bitmap.getBitmapResource( "border_edit_select.png" )));
        // uses the same color as listStyleButtonField selections
        this.setBackground(BackgroundFactory.createSolidBackground(0x186DEF));
        super.onFocus(direction);
    }
    //Invoked when a field loses the focus.
    public void onUnfocus()
    {
        //top, right,bottom,left
        this.setBorder(BorderFactory.createBitmapBorder(new XYEdges(15, 20, 15, 20),Bitmap.getBitmapResource( "border_edit.png" )));
        this.setBackground(BackgroundFactory.createSolidTransparentBackground(Color.GRAY, 0));
        super.onUnfocus();
        invalidate();
    }
    // Overrride this managers add function
    public void add(Field imageButton)
    {
        // Add a button to the evenly spaced manager
        buttonManager.add(imageButton);
        // Based on how many buttons there are, set the margin of where the manager holding the buttons start [offset from labelField]
        if(buttonManager.getFieldCount() == 1)
        {
            //side = (int)(screenWidth * 0.1388);
            side = screenWidth - labelField_width - 32 - 10 - 15;
            DisplayDialog.alert("Screen Width = " + screenWidth);
            DisplayDialog.alert("labelField_width2 = " + labelField_width); // returns 0
            DisplayDialog.alert("Side = " + side);
        }
        else side = (int)(screenWidth * 0.05);
        buttonManager.setMargin(0,0,0,side);
    }
    public int getLabelWidth()
    {
        return labelField_width;
    }
} 
```

为了更清楚，这里有一张图片：

![快照](../Images/d3b7c04673f475f2791f7836189edc67.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T01:17:44.713

**注意：**当我运行你的代码时，我实际上并没有看到`labelField_width`设置为`0`. 您在上面发布的代码中将值初始化为`40`。所以，我有时确实会看到它设置为 40 或 219（在 360 像素宽的屏幕上）。

但是，问题是我认为你试图访问的价值`labelField_width`太快了。唯一正确分配的位置是`layout()`您的匿名方法`LabelField`。仅仅因为您`layout()`根据实例化声明和实现该方法，并不意味着它在`LabelField`创建时被调用。这实际上是我不喜欢匿名课程的原因之一。

无论如何，这段代码：

```
LabelIconCommandManager licm3 = new LabelIconCommandManager("Address blah bklahblah ", 0); 
licm3.add(new ImageButtonField(b1, b2, b3, Field.FIELD_LEFT | ImageButtonField.CONSUME_CLICK)); 
```

将首先实例化`LabelField`（在`LabelIconCommandManager`构造函数内部）。正如我所说，这**不会**触发该`layout()`方法。上面的第二行 ( `add()`) 将触发您覆盖的方法：

```
// Overrride this managers add function 
public void add(Field imageButton) 
{ 
```

这就是您看到`labelField_width`. 该方法在之前被调用`layout()`。那就是问题所在。

由于看起来您仅使用该宽度来设置`buttonManager`边距，因此您可以等待更长的时间来执行此操作。如果你等到`LabelIconCommandManager` `sublayout()`方法被调用，你`LabelField`将`layout()`调用它的方法，并`labelField_width`正确分配：

```
protected void sublayout(int maxWidth, int maxHeight) {
   // make sure to call superclass method first!
   super.sublayout(maxWidth, maxHeight);

   // now, we can reliably use the label width:
   side = screenWidth - labelField_width - 32 - 10 - 15; 
   buttonManager.setMargin(0,0,0,side); 
} 
```

该方法进入`LabelIconCommandManager`课堂。然后，您可以删除您调用的其他地方`buttonManager.setMargin()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T06:23:53.320

Nate 帖子的一些简短摘要。

当您构建管理器并添加字段时，不要期望它会正确布局。经理不知道上下文 - 它将被放置在哪里。**所以只有当你将他的经理添加到屏幕上时才会调用字段的布局方法（当经理的布局也会被调用时）。**这是正确的。

将`side`变量的计算移至`layout`方法。

如果您`side`在将经理放在屏幕上之前确实需要价值。您可以通过使用`Field.getPrefferedWidth()`which 返回标准字段的有意义值来预先计算它（`getFont().getAdvance(text)`对于`LabelField`，也可能带有边框，请自行检查）。但要小心这个值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T14:37:42.760

请查看下面的代码。它是具有标签和按钮的经理。它把标签放在左边，按钮放在右边。

```
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.Manager;
import net.rim.device.api.ui.component.ButtonField;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.decor.Border;

import java.util.Vector;

public class TabFieldManager extends Manager {

public TabFieldManager(long style) {
    super(style);
}

protected void sublayout(int width, int height) {
    LabelField label = null;

    Vector tabs = new Vector();
    int tabsWidth = 0;
    int tabHeight = 0;
    int tabPaddingTop = 0;
    int tabPaddingLeft = 0;

    for (int i=0; i < getFieldCount(); i++) {
        Field field = getField(i);
        if (field instanceof LabelField) {
            label = (LabelField) field;
        } else if (field instanceof ButtonField){
            tabs.addElement(field);

            layoutChild(field, width, height);

            int fieldwidth = field.getWidth() > 0 ? field.getWidth() : field.getPreferredWidth() ;
            tabsWidth += fieldwidth + getBorderAndPaddingWidth(field);

            int fieldHeight = field.getHeight() > 0 ? field.getHeight() : field.getPreferredHeight();
            if (fieldHeight > tabHeight) {
                tabHeight = getBorderAndPaddingHeight(field) + fieldHeight;
            }

            int fieldPaddingTop = field.getPaddingTop();
            if (fieldPaddingTop > tabPaddingTop) {
                tabPaddingTop = fieldPaddingTop;
            }

            int fieldPaddingLeft = field.getPaddingLeft();
            if (fieldPaddingLeft > tabPaddingLeft) {
                tabPaddingLeft = fieldPaddingLeft;
            }
        }
    }

    if (label != null) {
        layoutChild(label, width - tabsWidth, height);
        int y = tabHeight - label.getHeight() >> 1;
        setPositionChild(label, tabPaddingLeft , y);
    }
    for (int i = 0; i < tabs.size(); i++) {
        Field tabField = (Field) tabs.elementAt(i);
        setPositionChild(tabField, width - tabsWidth, getBorderAndPaddingHeight(tabField));
        tabsWidth -= tabField.getWidth() + getBorderAndPaddingWidth(tabField);
    }

    setExtent(width, tabHeight);
}

private int getBorderAndPaddingHeight( Field field ) {
    int height = field.getPaddingTop() + field.getPaddingBottom();
    Border border = field.getBorder();
    if( border != null ) {
        height += border.getTop() + border.getBottom();
    }

    return height;
}

private int getBorderAndPaddingWidth( Field field ){
    int width = field.getPaddingLeft() + field.getPaddingRight();
    Border border = field.getBorder();
    if( border != null ) {
        width += border.getLeft() + border.getRight();
    }
    return width;
}

protected int moveFocus(int amount, int status, int time) {
    if ((status & Field.STATUS_MOVE_FOCUS_VERTICALLY) == Field.STATUS_MOVE_FOCUS_VERTICALLY && amount > 0) {
        return amount;
    } else
        return super.moveFocus(amount, status, time);
}

protected int nextFocus(int amount, int axis) {
    if (amount > 0 && axis == Field.AXIS_VERTICAL)
        return -1;
    else
        return super.nextFocus(amount, axis);
} 
```

}

# jquery - 鼠标移动时重新定位工具提示

> ID：11747569
> 
> 赞同：0
> 
> 时间：2012-07-31T19:27:50.713
> 
> 标签：jquery, css

我有一张有很多单元格的表格。每个单元格都有自己的标题。我想要的是在鼠标移动时重新定位工具提示。

查询：

```
 var $tooltip=$('<div id="tooltip"></div>').insertAfter('#myTable');
            var positionTooltip = function(event) {
      var tPosX = event.PageX;
      var tPosY = event.PageY + 20;
      $tooltip.css({top:tPosY,left:tPosX});// it seems to be not working.
           };
                 var showTooltip=function(event) {
           var title = $(this).attr("title");
           $tooltip.text(title).show();
                  positionTooltip(event);   
                }; 

  var fadout =function () { 
  $tooltip.hide(); 
  };
  $('.style13').hover(
  showTooltip,fadout
  ); 
```

CSS：

```
#tooltip {
display:none;                
background: #CCC630;
color: #AACBA;
text-align: left;
border-radius: 14px;
border: 2px solid white;
z-index:2;
margin-top:50px;
width:200px;
font-size:28px;
} 
```

现在代码运行良好，唯一的问题是提示在桌子下面，因为有代码。它处于固定位置。

> “插入之后”。

如何修改代码或 CSS 以实现我的目标？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:54:51.507

您的定位代码不起作用的原因是您使用的是“PageX”和“PageY”，而您应该使用“pageX”和“pageY”。

```
 var $tooltip=$('<div id="tooltip"></div>').insertAfter('#myTable');
            var positionTooltip = function(e) {
      var tPosX = e.pageX;
      var tPosY = e.pageY + 20;
$tooltip.show();
      $tooltip.css({top:tPosY,left:tPosX});// it seems to be not working.
           };
                 var showTooltip=function(e) {
           var title ="title";
           $tooltip.text(title).show();  
                     positionTooltip(e);
                }; 
 var fadout =function () { 
  $tooltip.hide(); 
  };

  $('.style13').hover(
      showTooltip,fadout
  ).mousemove(positionTooltip);​ 
```

看到这个小提琴：http: [//jsfiddle.net/muY37/40/](http://jsfiddle.net/muY37/40/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:30:19.933

代替

```
$tooltip.css({top:tPosY,left:tPosX}); 
```

试试这个

```
$tooltip.animate({top:tPosY,left:tPosX},0); 
```

删除`$tooltip`变量。

完整代码：

```
$(".style13").mouseenter(function(e) { 
var tPosx = e.pageX;
var tPosy = e.pageY + 20;
$("<div class = 'tooltip'>"+$(this).attr('title')+"</div>").appendTo('body').css({left: tPosx, top: tPosy}) }).mouseleave(function() { $(".tooltip").remove(); });
$(".style13").mousemove(function(e) {
var x = e.pageX;
var y = e.pageY;
$(".tooltip").animate({left: x+15, top: y+25},0);
}); 
```

# iphone - Geo：iPhone Safari 上的协议

> ID：11747570
> 
> 赞同：7
> 
> 时间：2012-07-31T19:27:52.897
> 
> 标签：iphone, html, mobile-safari

geo: URI 方案在 iphone safari 浏览器上似乎对我不起作用。有没有人幸运地实现了这一点？这是一段示例代码：

```
<a href="geo:39.555551,-82.814171;">Test</a> 
```

以上适用于Android手机......有没有其他选择？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T20:31:50.863

该`geo:`方案相对较新，iOS 上的任何内置应用程序都不支持。[（不过，这对于功能请求](http://bugreport.apple.com)来说是个好主意。）

一种替代方法（一直支持到 iPhone OS 1.0）是[使用 Google Maps URL](https://developer.apple.com/library/ios/featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html#//apple_ref/doc/uid/TP40007894-SW1)。例如：[http://maps.google.com/maps?ll=37.331044,-122.029202](http://maps.google.com/maps?ll=37.331044,-122.029202) - 这将自动重定向到地图应用程序。（不过，我不知道这是否会或如何随着即将推出的 iOS 6 中非 Google 支持的地图而改变。）

也可以注册第三方应用程序来处理系统应用程序不使用的 URL 方案，因此`geo`如果这对您有用，您可以创建自己的处理程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-21T09:01:11.213

在我的 iPhone (ios6) 上，谷歌地球应用程序打开 geo: 链接。对于原生谷歌地图应用程序支持，我使用 comgooglemaps: 方案，如果您单击“正常” [http://maps.apple.com/](http://maps.apple.com/)链接，苹果地图将打开。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T02:34:07.087

你也可以用纯 Javascript 来处理它。使用 Dojo、jQuery 或其他提供委托事件支持的 JS 库最简单。

[https://github.com/prowestgis/dojo-geo-uri-polyfill](https://github.com/prowestgis/dojo-geo-uri-polyfill)

# plot - Gnuplot：绘制具有定义半径的圆圈

> ID：11747573
> 
> 赞同：18
> 
> 时间：2012-07-31T19:28:11.420
> 
> 标签：plot, geometry, gnuplot

我知道在 gnuplot 上你可以用圆圈作为绘图点来绘制一些数据：

```
plot 'data.txt' using 1:2 ls 1 with circles 
```

然后我如何设置圆圈的大小？我想绘制几组数据，但每个数据集的圆圈大小不同。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T20:02:18.603

如果您的数据中有第三列，则第三列指定圆圈的大小。在您的情况下，您可以让第三列对于每个数据集中的所有点具有相同的值。例如：

```
plot '-' with circles
1 1 0.2
e 
```

将在 (1,1) 处绘制一个半径为 0.2 的圆。请注意，半径与数据的单位相同。（特殊文件名“-”让您可以直接输入数据；输入“e”结束输入。`help special`在 gnuplot 控制台上输入以获取更多信息。）

您可以[在此处](http://gnuplot.sourceforge.net/demo/circles.html)查看有关如何使用圆圈的更多想法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-12-09T14:54:16.227

我用了：

```
plot "file" using 1:2:($2*0+10) with circles 
```

这将伪造指定大小的第三列 - 可能可以更简单地编写它，但这对我有用。

# html - 如何使用 css 对递归目录进行样式化？

> ID：11747578
> 
> 赞同：1
> 
> 时间：2012-07-31T19:28:20.177
> 
> 标签：html, json, node.js, css-tables, dust.js

我正在尝试使用来自 node.js 服务器的 json 数据在 html 中显示递归目录，并将其用作[dustjs-linkedin](https://github.com/linkedin/dustjs/wiki)模板的呈现上下文。数据包含如下结构：

```
{
  "isDirectory": true,
  "path": "",
  "name": "",
  "files": [
    {
      "name": "Light House.jpg",
      "filename": "Light%20House.jpg",
      "path": "/Light%20House.jpg",
      "bytes": 561276,
      "date": "2012-07-25T16:30:45.094Z",
      "prettyDate": "Jul 25 2012 11:30:45",
      "type": "image/jpeg",
      "size": "548.1 kB",
      "indent": 15,
      "id": "file0"
    },
    {
      "isDirectory": true,
      "path": "/folder0",
      "name": "folder0",
      "files": [
        {
          "name": "Desert.jpg",
          "filename": "Desert.jpg",
          "path": "/folder0/Desert.jpg",
          "bytes": 845941,
          "date": "2012-07-25T16:30:41.301Z",
          "prettyDate": "Jul 25 2012 11:30:41",
          "type": "image/jpeg",
          "size": "826.1 kB",
          "indent": 30,
          "id": "file0_0"
        }
      ],
      "id": "file0_0",
      "indent": 15,
      "bytes": 845941,
      "date": "2012-07-25T16:30:41.301Z",
      "prettyDate": "Jul 25 2012 11:30:41",
      "size": "826.1 kB"
    },
    {
      "isDirectory": true,
      "path": "/folder1",
      "name": "folder1",
      "files": [
        {
          "name": "Jellyfish.jpg",
          "filename": "Jellyfish.jpg",
          "path": "/folder1/Jellyfish.jpg",
          "bytes": 775702,
          "date": "2012-07-25T16:30:41.266Z",
          "prettyDate": "Jul 25 2012 11:30:41",
          "type": "image/jpeg",
          "size": "757.5 kB",
          "indent": 30,
          "id": "file0_1"
        }
      ],
      "id": "file0_1",
      "indent": 15,
      "bytes": 775702,
      "date": "2012-07-25T16:30:41.266Z",
      "prettyDate": "Jul 25 2012 11:30:41",
      "size": "757.5 kB"
    },
    {
      "isDirectory": true,
      "path": "/folder2",
      "name": "folder2",
      "files": [
        {
          "name": "Koala.jpg",
          "filename": "Koala.jpg",
          "path": "/folder2/Koala.jpg",
          "bytes": 780831,
          "date": "2012-07-25T16:30:41.384Z",
          "prettyDate": "Jul 25 2012 11:30:41",
          "type": "image/jpeg",
          "size": "762.5 kB",
          "indent": 30,
          "id": "file0_2"
        }
      ],
      "id": "file0_2",
      "indent": 15,
      "bytes": 780831,
      "date": "2012-07-25T16:30:41.384Z",
      "prettyDate": "Jul 25 2012 11:30:41",
      "size": "762.5 kB"
    },
    {
      "isDirectory": true,
      "path": "/folder3",
      "name": "folder3",
      "files": [
        {
          "name": "Penguins.jpg",
          "filename": "Penguins.jpg",
          "path": "/folder3/Penguins.jpg",
          "bytes": 777835,
          "date": "2012-07-25T20:42:31.170Z",
          "prettyDate": "Jul 25 2012 15:42:31",
          "type": "image/jpeg",
          "size": "759.6 kB",
          "indent": 30,
          "id": "file0_4"
        }
      ],
      "id": "file0_4",
      "indent": 15,
      "bytes": 777835,
      "date": "2012-07-25T20:42:31.170Z",
      "prettyDate": "Jul 25 2012 15:42:31",
      "size": "759.6 kB"
    }
  ],
  "id": "file0",
  "indent": 0,
  "bytes": 3741585,
  "date": "2012-07-25T20:42:31.170Z",
  "prettyDate": "Jul 25 2012 15:42:31",
  "size": "3.6 MB"
} 
```

目前的渲染模板是这样的：

```
<!-- views/directory.dust -->
<!-- note that {.parentId} is equal to "file0" initially -->
{?.isDirectory}
<div class="collapse file-stats {parentId}" data-toggle="collapse" data-target="[class*={.id}]" style="font-size:15px">
    <div class="file-name">
        <div style="display:inline-block;width:{.indent}px"></div>
        <i class="icon-folder-open"></i> 
        {.name}
    </div>
    <div class="file-size">
        {.size}
    </div>
    <div class="file-date">
        {.prettyDate}
    </div>
</div>
{#.isDirectory parentId=.id}
    {#files}
        {>"views/directory.dust"/}
    {/files}
{/.isDirectory}
{:else}
<div class="collapse file-stats {.id}" style="font-size:15px">
    <div class="file-name">
        <div style="display:inline-block;width:{.indent}px"></div>
        <i class="icon-file"></i> 
        {.name}
    </div>
    <div class="file-size">
        {.size}
    </div>
    <div class="file-date">
        {.prettyDate}
    </div>
    <!--<span class="btn-group">
        <a class="btn btn-mini" href="/projects/{uri}/downloads/{.path}">
            <i class="icon-download"></i>
        </a>
        <button class="btn btn-mini" onclick="settings('/projects/{uri}/update/{.path}', '{.filename}', '{.path}')">
            <i class="icon-edit"></i>
        </button>
    </span>
    <a class="btn btn-mini btn-danger pull-right" href="/projects/{uri}/remove/{.path}">
        <i class="icon-trash"></i>
    </a>
    <div class="clearfix"></div>-->
</div>
{/.isDirectory} 
```

问题是，到目前为止，[bootstrap](http://twitter.github.com/bootstrap/index.html)的折叠插件不适用于`display:table-row`元素，所以我正在寻找一种方法使 html 输出垂直对齐类的元素`file-name`，`file-size`同时`file-date`缩进文件夹/文件图标对于每个文件其各自的数量。我意识到这是一个相当具体的问题，所以我愿意接受任何重新思考我这样做的方式的建议（除非我不会更改视图引擎或我正在使用的平台）。

**编辑**

我想指出，到目前为止，它的呈现方式，我在上一段中提到的所有内容都很好，除了折叠插件。我还可以指出，我用来使垂直对齐工作的所有 css 都在这里：

```
.files {
    display:table;
}

.file-stats {
    display:table-row;
}

.file-name, .file-size, .file-date {
    padding: 0px 4px 0px 4px;
}

.file-name {
    display:table-cell;
    overflow: hidden;
    text-overflow:ellipsis;
}

.file-size {
    display:table-cell;
    overflow: hidden;
    text-overflow:ellipsis;
}

.file-date {
    display:table-cell;
    overflow: hidden;
    text-overflow:ellipsis;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:38:12.057

`display:inline-block`与[占位符](https://stackoverflow.com/questions/2474055/equivalent-of-valign-center-for-p-with-css/11092072#11092072)一起使用以垂直对齐元素而不使用`display:table-row`. 要处理递归缩进，替换`div class="collapse"`为`blockquote class="collapse"`可能有效。

# c - 为什么 fgets() 和 strncmp() 在这个 C 代码中不能用于字符串比较？

> ID：11747579
> 
> 赞同：2
> 
> 时间：2012-07-31T19:28:21.707
> 
> 标签：c, string, fgets, c-strings, strncmp

这是我遇到的一个非常有趣的问题。我对堆栈溢出做了很多搜索，发现其他人也有类似的问题。所以我相应地编写了我的代码。我本来有`fscan()`and `strcmp()`，但这完全轰炸了我。所以其他帖子建议`fgets()`并`strncmp()`使用长度来比较它们。

我试图通过打印出我的两个字符串的大小来调试我在做什么。我想，也许他们`/n`漂浮在那里或其他什么东西把它搞砸了（另一篇文章谈到了这一点，但我认为这里不会发生这种情况）。因此，如果大小相同，则限制`strncmp()`应该相同。正确的？只是为了确保他们被认为是正确的比较。现在，我知道如果字符串相同，则返回`0`负数`strncmp()`。但它不起作用。

这是我得到的输出：

```
perk
repk
Enter your guess: perk
Word size: 8 and Guess size: 8
Your guess is wrong
Enter your guess: 
```

这是我的代码：

```
void guess(char *word, char *jumbleWord)
{
        size_t wordLen = strlen(word);
        size_t guessLen; 
        printf("word is: %s\n",word);
        printf("jumble is: %s\n", jumbleWord);

        char *guess = malloc(sizeof(char) * (MAX_WORD_LENGTH + 1));
        do
        {
            printf("Enter your guess: ");
            fgets(guess, MAX_WORD_LENGTH, stdin);
            printf("\nword: -%s- and guess: -%s-", word, guess); 
            guessLen = strlen(guess);
            //int size1 = strlen(word);
            //int size2 = strlen(guess); 

            //printf("Word size: %d and Guess size: %d\n",size1,size2);

            if(strncmp(guess,word,wordLen) == 0)
            {
                printf("Your guess is correct\n"); 
                break; 
            }

            }while(1);
    } 
```

我根据以下建议对其进行了更新。`char *`尤其是在学习了作为指针和将某物称为*字符串*之间的区别之后。但是，它仍然给我同样的错误。

请注意，这`MAX_WORD_LENGTH`是我的程序顶部使用的定义语句

```
#define MAX_WORD_LENGTH 25 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T19:32:09.177

使用`strlen`，不使用`sizeof`。另外，你不应该`strncmp`在这里使用，如果你的猜测是单词的前缀，它会错误地报告匹配。使用`strcmp`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T19:34:09.613

`sizeof(guess)`正在返回 a 的大小而`char *` **不是**字符串的长度`guess`。您的问题是您`sizeof`用于管理字符串长度。C 有一个字符串长度函数：[`strlen`](http://en.cppreference.com/w/c/string/byte/strlen).

`sizeof`用于确定数据类型和数组的大小。`sizeof`仅在一种非常特殊的情况下适用于字符串——我不会在这里讨论——但即便如此，也总是用于`strlen`处理字符串长度。

您需要决定您的单词允许使用多少个字符。这是您的游戏的一个属性，即游戏中的单词长度永远不会超过 11 个字符。

所以：

```
// define this somewhere, a header, or near top of your file
#define MAX_WORD_LENGTH 11

// ...

size_t wordlen = strlen(word);
size_t guessLen;

// MAX_WORD_LENGTH + 1, 1 more for the null-terminator:
char *guess = malloc(sizeof(char) * (MAX_WORD_LENGTH + 1));

printf("Enter your guess: ");
fgets(guess, MAX_WORD_LENGTH, stdin);

guessLen = strlen(guess); 
```

另请查看文档并注意输入**中**`fgets`保留了换行符，因此如果要比较这两个单词，则需要考虑这一点。一个快速解决方法是只比较 的长度，而**不是** 的长度，所以：。这个快速修复的问题是它会传递无效的输入，即如果is和is ，比较就会通过。**`word`**`guess``if( strncmp(guess, word, wordLen) == 0)``word``eject``guess``ejection`****

 ****最后，没有理由`guess`在循环的每次迭代中为 new 分配内存，只需使用您已经分配的字符串。您可以将功能设置更改为：

```
char guess(char *word, char *jumbledWord)
{
    int exit;

    size_t wordLen = strlen(word);
    size_t guessLen; 

    char *guess = malloc(sizeof(char) * (MAX_WORD_LENGTH + 1));

    do
    {
        printf("Enter your guess: ");
        // ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T19:44:57.440

正如其他人所说，使用`strlen`not `sizeof`。但是，发生这种情况的原因是其基本概念`C`不同于`Java`.

`Java`不会让您访问[指针](https://en.wikipedia.org/wiki/Pointer_%28computer_programming%29)。不仅`C`有指针，而且*它们是语言设计的基础*。如果你不理解和正确使用指针，`C`那么事情就没有意义，你会遇到很多麻烦。

因此，在这种情况下，`sizeof`返回`char *`指针的大小，（通常）为 4 或 8 个字节。您想要的是指针“另一端”的数据结构的长度。这就是`strlen`为您封装的内容。

如果没有`strlen`，则需要取消引用指针，然后遍历字符串，直到找到标记结束的空字节。

```
i = 1;
while(*guess++) { i++ } 
```

之后，`i`将保留您的字符串的长度。

**更新：**

你的代码很好，除了一个小细节。[fgets](http://en.cppreference.com/w/c/io/fgets)的文档指出，它将保留尾随的换行符。

`fgets`要解决此问题，请在和`strncmp`部分之间添加以下代码：

```
if ( guess[guessLen-1] == '\n' ) {
    guess[guessLen-1] = '\0'; 
} 
```

这样，尾随的换行符（如果有）将被删除，并且您不再落后一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T20:22:43.560

您的代码的一些问题/建议列表，太长了，无法放在评论中：

*   你的函数返回一个`char`很奇怪的。我看不到逻辑，更重要的是，您实际上永远不会返回值。不要那样做，会给你带来麻烦
*   查看 C 中的其他控制结构，特别是不要做你`exit`的事情。首先，`exit`在 C 中是一个函数，它执行它所说的，它退出程序。然后有一个`break`语句离开一个循环。

一个常见的成语是

```
do {

   if (something) break;
} while(1) 
```

*   你在每次迭代中分配一个缓冲区，但你从来没有`free`。这会给你带来很大的内存泄漏，缓冲区将被浪费并且你的代码无法访问
*   **只有当**字符串具有相同的长度时，您的`strncmp`方法才是正确的，因此您必须先对其进行测试****

# jsf - JSF：我动态添加的元素没有反应

> ID：11747592
> 
> 赞同：1
> 
> 时间：2012-07-31T19:29:17.837
> 
> 标签：jsf

这个问题似乎很简单，但我没有发现错误。

好的，我们开始吧：我有一个带有 IP 列表（无论如何）的表单，
**IP n**：[INPUT-FIELD] [Button "Add"]
**IP n+1** : [INPUT-FIELD] [Button "Add"]
这些IP 从一开始就存在。它们在托管 Bean 的构造函数中初始化。

当我单击“添加”按钮时，将验证当前 IP。之后，我将另一个条目添加到我的 java.util.List 中，并出现 JSF 表单中的另一行：

**IP n+2** : [输入字段] [按钮“添加”]

等等。

添加一行（使用新 IP）并验证当前 IP 非常适合现有值**IP n**和**IP n+1**，但验证和添加不适用于动态添加的**IP n+2**。验证动态生成的输入字段都不起作用，也不能使用新创建的“添加”按钮添加另一行。

我究竟做错了什么？

```
<h:form id="frmSpecial" prependId="false">
    <h:panelGroup id="tblDestFw">
        <c:forEach items="#{bean.fwdest}" var="fwdest">
            IP: <h:inputText value="#{fwdest.ip}" validator="#{bean.validateIP}"/>
            <h:commandButton action="#{bean.addFwDest()}" 
                             value="&gt;&gt;" title="Add another line">
                <f:ajax execute="@this" render="tblDestFw"/>
            </h:commandButton>
            <br/>
        </c:forEach>
    </h:panelGroup>
</h:form>

@ManagedBean(name = "bean")
@ViewScoped
public class EnterNewSystemFW implements Serializable {
     List<FirewallDest> fwdest;
     public EnterNewSystemFW() {
         fwdest.add(new FirewallDest("N"));
         fwdest.add(new FirewallDest("N+1"));
     }

     public void addFwDest() {
         fwdest.add(new FirewallDest());
     }
} 
```

谢谢。

伯恩德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:34:32.263

至于添加新行，您`<c:forEach>`引用了一个视图范围的 bean 属性。由于[JSF 问题 1492](http://java.net/jira/browse/JAVASERVERFACES-1492)，这个 bean 在**每次**请求时都会被重建。

将其替换为普通的 JSF 组件，如`<ui:repeat>`or `<h:dataTable>`，它将按预期工作。

```
<ui:repeat value="#{bean.fwdest}" var="fwdest">
    ...
</ui:repeat> 
```

至于执行验证，您`<f:ajax execute="@this">`只处理当前组件（命令按钮），而不是输入。改为使用`<f:ajax execute="@form">`来处理整个表单。

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

# ios - didAnimateRoation toInterfaceorientation - 检测旋转何时完成？

> ID：11747595
> 
> 赞同：0
> 
> 时间：2012-07-31T19:29:27.900
> 
> 标签：ios, uiviewcontroller, rotation, uiinterfaceorientation

有一个委托方法 willAnimateRotation toInterfaceorientation，在界面执行其旋转动画之前调用它。但是如何检测旋转何时完成？我需要一些链接 didAnimateRotation ...但没有任何这样的委托方法。

旋转动画完成后如何调用方法？不使用定时延迟：P

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:32:00.987

那么“didRotateFromInterfaceOrientation:”呢？

记录在这里： http: [//developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/didRotateFromInterfaceOrientation](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/didRotateFromInterfaceOrientation)：

# javascript - 任何用于表格排序、导出、动态行生成的 Javascript/jQuery 库

> ID：11747598
> 
> 赞同：0
> 
> 时间：2012-07-31T19:29:37.787
> 
> 标签：javascript, jquery

我正在寻找一个 jJavascript 库，它可以对列进行排序、导出到 CSV 并允许动态创建/删除行（并允许我在其中使用输入框）​​。我主要担心的是绝对没有服务器端处理。由于输入的数据可能很敏感，因此该数据必须保留在输入数据的计算机本地。如果需要，我愿意构建自己的 CSV 导出，但其他两个需求是固定的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:31:23.760

我使用的是 jQuery 的[DataTables 。](http://datatables.net/)它具有仅客户端实现以及客户端/服务器端的选项。

# mongodb - MongoDB 可以使用基本多语言平面之外的代码点存储和操作 UTF-8 字符串吗？

> ID：11747602
> 
> 赞同：8
> 
> 时间：2012-07-31T19:30:09.103
> 
> 标签：mongodb, utf-8, multilingual, astral-plane, gorm-mongodb

在 MongoDB 2.0.6 中，当尝试存储包含字符串字段的文档或查询文档时，其中字符串的值包含 BMP 之外的字符，我收到大量错误，例如：“不正确的 UTF-16：55357”，或“缓冲区太小”

有哪些设置、更改或建议允许在 Mongo 中存储和查询多语言字符串，尤其是包含 0xFFFF 以上这些字符的字符串？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T21:39:53.033

这里有几个问题：

1) 请注意，MongoDB 使用 BSON 格式存储所有文档。另请注意，BSON 规范指的是 UTF-8 字符串编码，而不是 UTF-16 编码。

参考：[http ://bsonspec.org/#/specification](http://bsonspec.org/#/specification)

2) 所有驱动程序，包括 mongo shell 中的 JavaScript 驱动程序，都应该正确处理编码为 UTF-8 的字符串。（如果他们不这样做，那就是一个错误！）许多驱动程序恰好也正确处理了 UTF-16，尽管据我所知，UTF-16 不受官方支持。

3) 当我使用 Python 驱动程序对此进行测试时，MongoDB 可以成功加载并返回一个包含损坏的 UTF-16 代码对的字符串值。但是，我无法使用 mongo shell 加载损坏的代码对，也无法将包含损坏代码对的字符串存储到 shell 中的 JavaScript 变量中。

4) mapReduce() 使用正确的 UTF-16 代码对在字符串数据上正确运行，但在尝试对包含损坏代码对的字符串数据运行 mapReduce() 时会产生错误。

当 MongoDB 尝试将 BSON 转换为 JavaScript 变量以供 JavaScript 引擎使用时，mapReduce() 似乎失败了。

5) 我已经为此问题提交了 Jira 问题 SERVER-6747。随时关注并投票。

# eclipse - Eclipse P2 - 不包括收集操作的接触点

> ID：11747607
> 
> 赞同：2
> 
> 时间：2012-07-31T19:30:39.200
> 
> 标签：eclipse, equinox, p2

每当我尝试在我的 rcp 应用程序中安装 Eclipse Platform Launchers 功能时，我的 RCP 应用程序中都会出现此错误。

我正在安装的功能 ID：org.eclipse.equinox.executable.feature.group 3.5.1.v20111216-1653-7P7NFUIFIbaUcU77s0KQWHw5HZTZ

```
!ENTRY org.eclipse.equinox.p2.engine 4 4 2012-07-31 14:59:58.501
!MESSAGE An error occurred while collecting items to be installed
!SUBENTRY 1 org.eclipse.equinox.p2.engine 4 0 2012-07-31 14:59:58.501
!MESSAGE session context was:(profile=profile, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=null --> [R]org.eclipse.equinox.executable_root.gtk.linux.x86_64 3.5.1.v20111216-1653-7P7NFUIFIbaUcU77s0KQWHw5HZTZ, action=).
!SUBENTRY 1 org.eclipse.equinox.p2.engine 4 0 2012-07-31 14:59:58.501
!MESSAGE The required Touchpoint: org.eclipse.equinox.p2.native 1.0.0 touchpoint for the collect action is not included in the installation manager configuration.
!STACK 0
java.lang.IllegalArgumentException: The required Touchpoint: org.eclipse.equinox.p2.native 1.0.0 touchpoint for the collect action is not included in the installation manager configuration.
    at org.eclipse.equinox.internal.p2.engine.ActionManager.getTouchpointQualifiedActionId(ActionManager.java:58)
    at org.eclipse.equinox.internal.p2.engine.phases.Collect.getActions(Collect.java:54)
    at org.eclipse.equinox.internal.p2.engine.InstallableUnitPhase.getActions(InstallableUnitPhase.java:77)
    at org.eclipse.equinox.internal.p2.engine.Phase.mainPerform(Phase.java:115)
    at org.eclipse.equinox.internal.p2.engine.Phase.perform(Phase.java:78)
    at org.eclipse.equinox.internal.p2.engine.PhaseSet.perform(PhaseSet.java:44)
    at org.eclipse.equinox.internal.p2.engine.Engine.perform(Engine.java:75)
    at org.eclipse.equinox.internal.p2.engine.Engine.perform(Engine.java:44)
    at org.eclipse.equinox.p2.operations.ProvisioningSession.performProvisioningPlan(ProvisioningSession.java:174)
    at org.eclipse.equinox.p2.operations.ProfileModificationJob.runModal(ProfileModificationJob.java:79)
    at org.eclipse.equinox.p2.operations.ProvisioningJob.run(ProvisioningJob.java:177)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T02:28:40.247

您应该确保捆绑“ **org.eclipse.equinox.p2.touchpoint.natives** ”及其依赖项打包在您的应用程序中。

# javascript - Backbone.js 路由器和后退按钮检查

> ID：11747609
> 
> 赞同：1
> 
> 时间：2012-07-31T19:30:51.003
> 
> 标签：javascript, backbone.js

基本上，我正在尝试检查每条路线上的上一页是否等于我网站上的一个特定页面。如果是，那么我想让这个人保持在那个视图上，否则，他们可以继续到另一个视图。

Backbone.js 路由器中是否有办法触发在执行路由回调之前触发的全局事件？

或者，有没有办法让一条全部路线进行一些检查，然后转发到适当的路线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:09:28.283

我认为覆盖`Backbone.History.navigate`并仅有条件地调用超类方法可能会起作用。您还可以为骨干历史之前连接的事件添加额外的事件处理程序，`window.hashChange`并`window.pushState`在您的条件匹配时阻止这些事件的默认传播。

# ruby-on-rails - Rails：如何在 link_to 块中呈现 HTML？

> ID：11747612
> 
> 赞同：0
> 
> 时间：2012-07-31T19:31:05.933
> 
> 标签：ruby-on-rails, ruby, twitter-bootstrap

我使用嵌套形式遵循 rbates 方法：[http ://railscasts.com/episodes/196-nested-model-form-revised](http://railscasts.com/episodes/196-nested-model-form-revised)

我也在使用 Twitter Bootstrap。

我正在尝试添加一个`Add Child`带有图标的按钮。所以我修改`link_to_add_fields`并重命名它`icon_to_add_fields`。这就是我所拥有的...

```
def icon_to_add_fields(name, f, association, icon_class = '', button_color = '')
  new_object = f.object.send(association).klass.new
  id = new_object.object_id
  fields = f.fields_for(association, new_object, child_index: id) do |builder|
    render(association.to_s.singularize + "_fields", f: builder)
  end
  link_to("#", class: "add_fields btn #{button_color}", data: {id: id, fields: fields.gsub("\n", "")}) do
    "<i class='icon-plus-sign icon-white'></i> #{name}"
  end
end 
```

`<i class="icon-plus-sign icon-white"></i> Add Child`问题是，我的按钮不是呈现为 HTML，而是`<i class="icon-plus-sign icon-white"></i> Add Child`在它之上读取。

所以，为了“解决”这个问题，我添加`simple_format`了这样的......

```
link_to("#", class: "add_fields btn #{button_color}", data: {id: id, fields: fields.gsub("\n", "")}) do
  simple_format "<i class='icon-plus-sign icon-white'></i> #{name}"
end 
```

现在，链接内的 HTML 渲染得很好，BUUUT，里面有`p`我不想要的标签。

我应该最终得到类似的东西：`<a class="btn btn-primary" href="#"><i class="icon-plus-sign icon-white"></i> Add Child</a>`

如何更正此功能以正确呈现 HTML，但不输出`p`标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:38:55.477

总是用标签`simple_format`包装结果。`<p>`但正如对该问题的回答所述，[Rails 3.simple_format 不会将结果包装在段落标签](https://stackoverflow.com/questions/8718160/rails-3-simple-format-do-not-wrap-result-in-paragraph-tags)中，该方法只有 9 行长，并且可以`<p>`通过删除一些行很容易地被覆盖以不使用标签包装内容。
所以我相信你可以做一个`another_simple_format`助手并在你的`icon_to_add_fields`方法上使用它，你会没事的。

# android - 有什么方法可以检测 Android 应用程序包含哪些外部库？

> ID：11747613
> 
> 赞同：1
> 
> 时间：2012-07-31T19:31:11.267
> 
> 标签：android, android-library

我正在尝试制作一个 Android 应用程序，它可以识别我设备中的应用程序是否安装了某些外部库，即谷歌分析或 Flurry，但我还没有找到任何关于如何完成这样的事情的信息。

我发现的唯一相对的东西是这个 AppBrain 应用程序 (https://play.google.com/store/apps/details?id=com.appspot.swisscodemonkeys.detector)，它标识了这个特定的信息。

有没有人对这个问题有任何见解？我想我可以监控每个库的特定参数（即网络调用或清单中的权限），但我不认为这是正确的方法。

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:52:36.003

不，那里没有。这是对 Android 的安全限制。

# ruby-on-rails - 在 ruby on rails 中发送带有一张图片附件的邮件，该图片来自 google-Chart-API

> ID：11747618
> 
> 赞同：0
> 
> 时间：2012-07-31T19:31:42.663
> 
> 标签：ruby-on-rails, ruby, open-uri

在调用controller.rb 之后，一个文件（chart.png）将保存在我的rails 应用程序文件夹中，那么如何获取这个文件并将其附加到邮件中？

**控制器.rb**

```
def mail  
  @imageURL = "https://chart.googleapis.com/chart?chs=150x150&cht=qr&chl=5&choe=UTF-8"
  open(@imageURL) do |chart|
    File.open('chart.png', 'wb') {|f| f.write chart.read }
  end  
  UserMailer.welcome_email(@imageURL, @mailID).deliver
end 
```

我如何将该图像传递给**welcome_email**方法以附加邮件？需要一些帮助来解决这个问题吗？

**user_mailer.rb**

```
def welcome_email(imageURL, mailID)
  mail(:to => mailID,
   :subject => "code",
   :body => "Code for the branch "+imageURL+"")
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:35:03.340

如果要将其附加到电子邮件中，则必须下载图像，然后从文件系统附加它。

创建附件很容易：

```
attachments["filename"] = File.read("/path/to/file") 
```

如果我是你，我会在邮件正文的 image_tag 中添加图片

编辑：我没有看到您已经在编写文件。

所以这是完整的解决方案：

```
def mail  
  @imageURL = "https://chart.googleapis.com/chart?chs=150x150&cht=qr&chl=5&choe=UTF-8"
  path_image = "/tmp/chart-#{@imageUrl.hash}.png" #Avoid filename collision
  open(@imageURL) do |chart|
     File.open(path_image, 'wb') {|f| f.write chart.read }
  end  
UserMailer.welcome_email(@imageURL,@mailID, path_image).deliver
File.delete(path_image)
end

def welcome_email(imageURL,mailID, path_image)

attachments["charts.png"] = File.read(path_image)
mail(:to => mailID,
   :subject => "code",
   :body => "Code for the branch "+imageURL+"")
end 
```

# jquery - 为什么使用选择器 $(':dragged') 设置 css 会使拖动动作尴尬？

> ID：11747620
> 
> 赞同：0
> 
> 时间：2012-07-31T19:31:46.213
> 
> 标签：jquery, jquery-ui, user-interface, jquery-selectors, jquery-ui-draggable

我使用以下代码使被拖动的元素在连接的可排序列表上方时变为透明。

```
$(':dragged').css({'opacity': 0.5}); 
```

问题是，在使用这个之后，拖动动作不像以前那么流畅，并且光标有时与被拖动的元素有偏移。

为什么会这样？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:18:56.447

如评论中所述，您这样做的方式将导致 CSS 在拖动对象时不断更新。

这显然会导致即使是最好的浏览器也会卡顿。

您可能想要做的是将不透明度更改绑定到`drag`事件，然后在停止拖动时再次将其设置回来：

```
$('.draggableClass').bind('drag',function( event ){
    $(this).css({'opacity': 0.5});
});
$('.draggableClass').bind('dragstop', function(event) {
    $(this).css({'opacity': 1.0});
}); 
```

这样，CSS 更改只会在拖动开始时发生一次，并且在完成时再发生一次，而不是在拖动期间每分钟发生数百次，就像在您的代码中发生的那样。

希望有帮助。

# jquery - returning text from a function

> ID：11747624
> 
> 赞同：0
> 
> 时间：2012-07-31T19:32:02.733
> 
> 标签：jquery

This is the code that is working but not the way i need it too, ill explain it after.

```
getRegisterFiles('regster1')
function getRegisterFiles(name) {
    var request = $.ajax({
        url: "/../files/Users/"+name+".ctp",
        type: "GET",
        dataType: "html"
    });
    request.fail(function(jqXHR, textStatus) {
        $('#pageLoading p').html('We have experienced a problem. Please try again later.');
        return false;
    });
    request.success(function(msg) {
        placeData(msg);
    });
}
function placeData(registerData) {
    $('#pageWrap').html(registerData);                      
} 
```

So the code above gets a .ctp file and then displays it on screen.

**What i need it to do**

Instead of having the placeData(msg) in the success part i want to return the contents of 'msg' to a variable that will initiate the function like so,

```
register = getRegisterFiles('register1'); 
```

I have tried using,

```
return msg; 
```

but it doesn't work... If i use return msg and then 'alert' it it comes up as undefined.

I have no idea what todo next so any ideas will be greatly welcomed. Sorry if its a complete newb mistake.

**EDIT ---** This is the code i have tried, i hope it helps to show you what i'm trying to do.

```
var registerStep1 = null;
var registerStep2 = null;
function getRegisterFiles(name) {
    var request = $.ajax({
        url: "/../files/Users/"+name+".ctp",
        type: "GET",
        dataType: "html",
        error: function(jqXHR, textStatus) {
            $('#pageLoading p').html('We have experienced a problem. Please try again later.');
            return false;
        },
        success: function(msg) {
                return msg;
        }
    });
}
registerStep1 = getRegisterFiles('registerStep1');
registerStep2 = getRegisterFiles('registerStep2');
var tempInterval = setInterval(function() {

    if(registerStep1 != null && registerStep1 != false) {
        if(registerStep2 != null && registerStep2 != false) {
            clearInterval(tempInterval);
            placeData(registerStep1);
        }
    }
}, 100);
function placeData(registerData) {
    var tempTimer = 0;
    tempTimer = setInterval(function() {
        if(controlTimeUp != false) {
            $('#pageWrap').html(registerData);
            methodToFixLayout();
            $('#pageWrap').fadeIn("slow");
            $('#pageLoading').css("display","none")
            clearInterval(tempTimer);
        }
    }, 10)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:56:22.723

You're doing it correctly. An AJAX call can not return a value to the caller. This is due to AJAX being Asynchronous. (This is what the first 'A' in AJAX stands for). The call to `getRegisterFiles('register1')` returns immediately. It does not block and wait for the response from the server. Thus it can't return any value that relates to the response from the server.

Here is another StackOverflow question pertaining to the asynchronous nature of AJAX requests: [Are AJAX calls not blocking and what is their lifespan?](https://stackoverflow.com/questions/4867169/are-ajax-calls-not-blocking-and-what-is-their-lifespan)

*Updated to add more explanation:*

To observe these examples, install the [FireBug](https://addons.mozilla.org/en-us/firefox/addon/firebug/) extension for Firefox or use Chrome. Open FireBug or the Developer Tools, respectively, and watch the console tab.

Here I took your code and added many log messages to reveal the order in which execution occurs.

```
console.log('Defining function getRegisterFiles()');
function getRegisterFiles(name) {
    console.log('enter: getRegisterFiles()');
    var request = $.ajax({
        url: "/../files/Users/"+name+".ctp",
        type: "GET",
        dataType: "html"
    });
    console.log("configuring failure handler");
    request.fail(function(jqXHR, textStatus) {
        console.log('enter: failure callback function');
        $('#pageLoading p').html('We have experienced a problem. Please try again later.');
        console.log('exiting: failure callback function');
        return false;
    });
    console.log("configuring success handler");
    request.success(function(msg) {
        console.log('enter: success callback function');
        placeData(msg);
        console.log('exiting: success callback function');
        return msg;
    });
    console.log('exiting: getRegisterFiles()');
    return "This is the return value of getRegisterFiles()";
}

console.log("defining placeData() function');
function placeData(registerData) {
    console.log('enter: placeData();  registerData="+registerData);
    $('#pageWrap').html(registerData);
    console.log('exiting: placeData()');
}

console.log("calling getRegisterFiles()');

var result = getRegisterFiles('regster1')
console.log("getRegisterFiles() finished;  result="+result); 
```

The sequence of log messages should make the order of execution more clear. When you call `getRegisterFiles()` you configure some parameters and initiate a request. The function then returns. You don't have any response from the server yet, so you can't act on it yet. This is visible in the log message that contains "getRegisterFiles() finished". Some time later a response is received from the server. At this time, jQuery calls the function you registered as the success handler. Although you technically can return a value from the function, since jQuery called it the return value is returned to jQuery where it is simply ignored.

Here is another variation where, as per your comment, assignment is used:

```
var dataFromTheServer = "An initial value";

console.log('Defining function getRegisterFiles()');
function getRegisterFiles(name) {
    console.log('enter: getRegisterFiles()');
    var request = $.ajax({
        url: "/../files/Users/"+name+".ctp",
        type: "GET",
        dataType: "html"
    });
    console.log("configuring failure handler");
    request.fail(function(jqXHR, textStatus) {
        console.log('enter: failure callback function');
        $('#pageLoading p').html('We have experienced a problem. Please try again later.');
        console.log('exiting: failure callback function');
        return false;
    });
    console.log("configuring success handler");
    request.success(function(msg) {
        console.log('enter: success callback function');
        dataFromTheServer = msg;
        console.log('exiting: success callback function');
    });
    console.log('exiting: getRegisterFiles()');
    return "This is the return value of getRegisterFiles()";
}

console.log("defining placeData() function');
function placeData(registerData) {
    console.log('enter: placeData();  registerData="+registerData);
    $('#pageWrap').html(registerData);
    console.log('exiting: placeData()');
}

console.log("calling getRegisterFiles()');

getRegisterFiles('regster1')
console.log("getRegisterFiles() finished;  dataFromTheServer="+dataFromTheServer);
placeData(dataFromTheServer); 
```

The reason this does not work as intended is because placeData() is called (long) before the server responds to the request and so the assignment has not yet occured. Eventually, when the response is received, the assignment does occur but since no functions are called at that time, nothing is done with that value.

Additionally, I would advise against using the assignment to a global name technique. Using local variables is easier to debug, easier to verify correctness, and easier to reuse the code as the software project is modified to meet changing needs than using global variables.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:42:56.910

Where are you trying the return? It has to be in scope:

```
request.success(function(msg) {
    placeData(msg);
    return msg;
}); 
```

Should work, if it is outside of there, it is undefined.

Second, if that does not, I don't know if you are using another plugin, but maybe you should handle your success/failure like this?

```
function getRegisterFiles(name) {
    var request = $.ajax({
        url: "/../files/Users/"+name+".ctp",
        type: "GET",
        dataType: "html",
        error: function(jqXHR, textStatus) {
            $('#pageLoading p').html('We have experienced a problem. Please try again later.');
            return false;
        },
        success: function(msg) {
            return msg;
        }
    });
} 
```

That is how it is defined here: [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# python - Django regex unicode 忽略 \w 标签

> ID：11747625
> 
> 赞同：2
> 
> 时间：2012-07-31T19:32:03.657
> 
> 标签：python, regex, django, unicode

正则表达式`\w`似乎忽略了我的 Unicode 字符串。我创建了以下函数：
**extras.py**

```
# -*- coding: utf-8 -*-
def test(word):
    print re.sub(r'[^\w]+', '', word, re.U) 
```

并从 django shell：

```
import extras
extras.test(u'שלום') 
```

在本例中，输出是一个空字符串，而它应该与输入相同。
正则表达式的目的是只保留字母数字字符，但它不起作用。但它适用于 ASCII。

可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T20:43:17.487

对模式使用原始 unicode 字符串，并确保使用`flags`参数：

```
# -*- coding: utf-8 -*-
def test(word):
    print re.sub(ur'[^\w]+', u'', word, flags=re.U) 
```

然后：

```
In [9]: test(u'Ã')
Ã 
```

# android - 一个布局中有 2 个 RelativeLayouts

> ID：11747628
> 
> 赞同：0
> 
> 时间：2012-07-31T19:32:10.827
> 
> 标签：android, events, android-relativelayout, behind

我决定将 2`RelativeLayouts`用于我的应用程序，一个用于左侧屏幕上的`Layout`一部分孩子，另一个用于右侧的孩子。`Views``Views`

问题是我不知道如何在 XML 中布置它们，这样当我膨胀我的`Layout`.

[这就是我要的。](http://imgur.com/bOdSO)

当我使用 1`RelativeLayout`时，中间的空白被 填充`RelativeLayout`，我不能触摸它后面的任何东西。

非常感谢您的阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:48:36.517

执行类似于以下示例的操作。

这将使用 2 创建一个用于`LinearLayout`分隔的，然后您可以使用任何您想要的填充。`RelativeLayouts``layout_weight``RelativeLayouts``RelativeLayouts`

只是示例的`Buttons`占位符。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1" >

        <Button
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="TEST1" />
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1" >

        <Button
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="TEST2" />
    </RelativeLayout>

</LinearLayout> 
```

# jquery - 是否有相同元素类型的选择器“或”的简写版本？

> ID：11747634
> 
> 赞同：2
> 
> 时间：2012-07-31T19:32:38.493
> 
> 标签：jquery, selector

是否有以下简写版本：

```
$('input[hasThisAttr], input[hasThatAttr]') 
```

我意识到这很短，但是如果您必须检查一堆共同的属性，然后检查不同的属性，它可能会变得非常冗长。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:37:29.847

想多了，看起来过滤器可能是一个不错的选择。前任：

```
$("input").filter("[hasThisAttr],[hasThatAttr]") 
```

这将抓取所有输入，然后根据您指定的 attr 列表进行过滤。

# jquery - 单击右箭头时如何更改值？

> ID：11747638
> 
> 赞同：0
> 
> 时间：2012-07-31T19:32:50.597
> 
> 标签：jquery

当我单击右箭头时，数组的下一个元素应该显示在输入区域中吗？

```
$(function(){
    var room = ['1-visiting office', '2-', '3-'];       
    $('#text_holder').val(room[0]);

    $("#rightarrow").click(function(){      
        $('#text_holder').val(room[next]);      
    });
}); 
```

这是我的html代码

```
<input id="text_holder" name="text_holder"/>
<img src="dev/images/rightarrow.jpg" id="rightarrow" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T19:36:15.067

数组没有`next`功能或任何东西，您需要自己跟踪计数器。

这是一种方法，使用 jQuery`data`将计数器存储在按钮上。

```
$(function(){
    var room = ['1-visiting office', '2-', '3-'];
    $('#text_holder').val(room[0]);

    $("#rightarrow").data('counter', 0).click(function(){
        var counter = $(this).data('counter')+1;
        $('#text_holder').val(room[counter]);
        $(this).data('counter', counter);
    });
}); 
```

如果您想在结束后再次循环，您可以使用`%`(modulus) 运算符。

```
$(function(){
    var room = ['1-visiting office', '2-', '3-'];
    $('#text_holder').val(room[0]);

    $("#rightarrow").data('counter', 0).click(function(){
        var counter = ($(this).data('counter')+1) % room.length;
        $('#text_holder').val(room[counter]);
        $(this).data('counter', counter);
    });
}); 
```

演示：http: [//jsfiddle.net/8Fc9w/](http://jsfiddle.net/8Fc9w/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:49:18.670

我喜欢火箭的回答胜过我的。但是，如果您发现它有用，这里还有 1 种方法。

```
$(function(){
    var room = ['1-visiting office', '2-', '3-'];       
    var counter = 0;
    $("#rightarrow").click(function(){      
        $('#text_holder').val(room[counter++]);     
    }).click();
}); 
```

# php - 如何将 file_get_contents() 与 Wordpress 用户的 cookie 一起使用

> ID：11747639
> 
> 赞同：0
> 
> 时间：2012-07-31T19:33:07.773
> 
> 标签：php, cookies, curl, file-get-contents

我需要使用由 Wordpress 设置的客户端 cookie 发送`file_get_contents()`到 API 端点，以显示用户已登录到 wordpress 站点。我知道我需要`stream_context_create()`大致如下使用：

```
$cookies = ??? //THIS IS THE QUESTION (see answer below)!

// Create a stream
$opts = array(
  'http'=>array(
    'method'=>"GET",
    'header'=>"Accept-language: en\r\n" .
              "Cookie: {$cookies}\r\n"
  )
);

$context = stream_context_create($opts);

// Open the file using the HTTP headers set above
$file = file_get_contents('http://example.dev/api/autho/', false, $context); 
```

正如您从第一行的评论中看到的那样，我被困在如何发送此请求以便发送正确的 cookie 上。我知道发送了正确的 cookie，因为我可以打印出来`$_COOKIES`并在那里看到它们。但是如果我尝试将相同的数组插入到标题中，它就不起作用。

提前致谢！

ps：我已经读过我应该使用`cURL`它，但我不知道为什么而且我不知道如何使用它......但我对这个想法持开放态度。

更新：我得到了这个工作。这基本上和我做的一样，还有另一个重要的 cookie 。请看下面我的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:37:44.247

cookie 应采用以下格式：`Cookie: cookieone=value; cookietwo=value`，即用分号和空格分隔，后面没有分号。循环遍历您的 cookie 数组，输出该格式，然后发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T01:09:48.207

事实证明我做得对，但我不知道**WP 需要**发送第二个 cookie 才能使请求正常工作。

这是对我有用的代码：

```
$cookies = $_COOKIE;
$name;
$value;
foreach ($_COOKIE as $key => $cookie ) {
    if ( strpos( $key, 'wordpress_logged_in') !== FALSE ) {
        $name = $key;
        $value = $cookie;
    } 
}

// Create a stream
$opts = array(
  'http'=>array(
    'method'=>"GET",
    'header'=>"Accept-language: en\r\n" .
              "Cookie: {$key}={$cookie}; wordpress_test_cookie=WP Cookie check \r\n"
  )
);
$context = stream_context_create($opts);
// Open the file using the HTTP headers set above
$file = file_get_contents('http://mydomain.dev/api/autho/', false, $context);

var_dump($file); 
```

这与您在我的问题中看到的基本相同，但有一个重要的补充：`wordpress_test_cookie=WP Cookie check`. 我还没有在任何地方看到它的文档，但是 WP 需要这个 cookie 以及实际的 wordpress_logged_in cookie，以便以登录用户的身份进行调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T19:49:57.933

好的，正如您提到的，您应该使用[`cURL`](http://php.net/manual/en/intro.curl.php)（部分是我个人的意见，我在禁止 URL 文件包装器的服务器配置方面有一些不好的经验）。

来自[手册](http://php.net/manual/en/function.file-get-contents.php)的报价：

> 如果启用了 fopen 包装器，则 URL 可以用作此函数的文件名。

因此，您可能会遇到代码无法正常工作的情况。另一方面，`cURL`它是为获取远程内容而设计的，并提供了对正在发生的事情、如何获取数据等的大量控制。

当您查看时，[`curl_setopt`](http://php.net/manual/en/function.curl-setopt.php)您可以看到可以设置的数量和详细程度（但您不必这样做，它只是在需要时可选）。

这是谷歌搜索后的[第一个链接](http://coderscult.com/php/php-curl/2008/05/20/php-curl-cookies-example/)[`php curl set cookies`](https://www.google.com/search?hl=en&sourceid=chrome&ie=UTF-8&q=php%20curl%20set%20cookies)，这是您开始的好地方......基本示例完全是微不足道的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-08T01:02:46.297

```
$cookies = $_COOKIE;
foreach ($_COOKIE as $key => $cookie ) {
    if ( strpos( $key, 'wordpress_logged_in') !== FALSE ) {
        $name = $key;
        $value = $cookie;
        break;
    } 
}

// Create a stream
$opts = array(
  'http'=>array(
    'method'=>"GET",
    'header'=>"Accept-language: en\r\n" .
              "Cookie: {$key}={$cookie}; wordpress_test_cookie=WP Cookie check\r\n"
  )
);
$context = stream_context_create($opts);
// Open the file using the HTTP headers set above
$file = file_get_contents('http://mydomain.dev/api/autho/', false, $context);

var_dump($file); 
```

我没有发表评论的观点，所以我从 emersonthis 阅读了代码。为了使它在我的配置下工作（php 7.0.3，wordpress 4.4.2），我必须删除“WP Cookie check”字符串之后的最后一个空格。

# python - py2Neo 抛出 py2neo.rest.NoResponse 异常

> ID：11747643
> 
> 赞同：0
> 
> 时间：2012-07-31T19:33:17.373
> 
> 标签：python, neo4j, py2neo

我正在使用 py2neo 访问 neo4j 数据库。我正在从文本文件中的数据加载图表。

由于我的数据集有大约一百万个节点，因此加载整个数据集需要很长时间。介于两者之间，代码抛出 py2neo.rest.NoResponse。我已尝试多次运行代码。它在不同的点上失败了。我在错误中看不到任何模式。我的意思是我没有看到由于文件中的数据导致的任何错误，或者它不在文件中的同一点失败。我从我的日志文件中知道这一点。

错误堆栈跟踪如下：

```
Traceback (most recent call last):
  File "C:\Users\darshan.hegde\workspace\movie_lens_loader\src\load_movie_lens_data.py", line 100, in <module>
    main()
  File "C:\Users\darshan.hegde\workspace\movie_lens_loader\src\load_movie_lens_data.py", line 97, in main
    LMLD.load_ratings_data(ratings_file_path)
  File "C:\Users\darshan.hegde\workspace\movie_lens_loader\src\load_movie_lens_data.py", line 71, in load_ratings_data
    user_node.create_relationship_to(movie_node, "rated", {"stars": ratings.stars})
  File "C:\Python26\lib\site-packages\py2neo\neo4j.py", line 581, in create_relationship_to
    'data': properties
  File "C:\Python26\lib\site-packages\py2neo\rest.py", line 252, in _post
    return self._request('POST', uri, json.dumps(data), **kwargs)
  File "C:\Python26\lib\site-packages\py2neo\rest.py", line 240, in _request
    raise NoResponse(uri)
py2neo.rest.NoResponse: u'http://localhost:7474/db/data/node/16088/relationships' 
```

有没有人遇到过同样的错误？请让我知道解决方案。

我不确定这些信息是否有帮助。我正在使用以下版本：*Python-2.6.6*和*py2neo-1.2.15*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T22:18:30.780

抱歉，您在使用 py2neo 时遇到问题。在这种情况下很难看出可能导致错误的原因，因为您说它在重负载下以随机间隔再次发生。

我的猜测是，您正在看到某种形式的资源饱和，达到了一个限制，阻止了任何进一步的 HTTP 连接。我最近看到了许多与 Tornado 相关的问题，您很可能看到了另一个示例。似乎 Windows 和 Tornado 结合得特别糟糕。

我目前正在为 py2neo 开发一个替代 HTTP 引擎，这可能对您的情况有所帮助。请继续关注，希望您的体验会有所改善！

干杯，尼日

# ruby - Ruby 中的 Before_methods 和 After_method 回调

> ID：11747648
> 
> 赞同：3
> 
> 时间：2012-07-31T19:33:24.107
> 
> 标签：ruby, callback, metaprogramming

我需要在一些 Ruby 代码中添加一些 before_methods 和 after_methods。这样做的最佳方法是什么？

我见过这样的解决方案：

*   [Ruby：在事件触发器中自动包装方法](https://stackoverflow.com/questions/8316228/ruby-automatically-wrapping-methods-in-event-triggers)
*   [机架::回调](http://m.onkey.org/the-evil-calls-back)
*   [ActiveSupport::回调](http://api.rubyonrails.org/classes/ActiveSupport/Callbacks.html)

但它们不能满足我的需求。我正在寻找一种不修改现有方法的替代方法。

基本上我需要一种在调用某些方法之后/之前执行某些代码的方法。

```
class User
  after :some_method, call: :other_method

  def some_method
    ....
  end

  def other_method
    puts "Matz"
  end
end 
```

提前致谢 ：）

如果您需要更多解释，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:44:29.567

```
class User
  def some_method
    puts "some method"
  end
end

set_trace_func proc { |event, file, line, id, binding, classname|
  printf "%8s %s:%-2d %10s %8s\n", event, file, line, id, classname
}

user = User.new
user.some_method

#=> 
c-return test.rb:9  set_trace_func   Kernel
    line test.rb:11                    
  c-call test.rb:11        new    Class
  c-call test.rb:11 initialize BasicObject
c-return test.rb:11 initialize BasicObject
c-return test.rb:11        new    Class
    line test.rb:12                    
    call test.rb:2  some_method     User
    line test.rb:3  some_method     User
  c-call test.rb:3        puts   Kernel
  c-call test.rb:3        puts       IO
  c-call test.rb:3       write       IO
some methodc-return test.rb:3       write       IO
  c-call test.rb:3       write       IO

c-return test.rb:3       write       IO
c-return test.rb:3        puts       IO
c-return test.rb:3        puts   Kernel
  return test.rb:4  some_method     User 
```

您可以更改 proc 以仅打印有关用户方法的信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T21:14:41.813

您是否尝试过调用它？喜欢：

```
def some_method
  ...
  other_method
end

def other_method
  puts "Matz"
end 
```

# c++ - 将 const 引用返回到本地对象时究竟会发生什么？

> ID：11747652
> 
> 赞同：9
> 
> 时间：2012-07-31T19:33:38.087
> 
> 标签：c++, const-reference

```
struct A {
    A(int) : i(new int(783)) {
        std::cout << "a ctor" << std::endl;
    }

    A(const A& other) : i(new int(*(other.i))) {
        std::cout << "a copy ctor" << std::endl;
    }

    ~A() {
        std::cout << "a dtor" << std::endl;
        delete i;
    }

    void get() {
        std::cout << *i << std::endl;
    }

private:
    int* i;
};

const A& foo() {
    return A(32);
}

const A& foo_2() {
    return 6;
}

int main()
{
    A a = foo();
    a.get();
} 
```

我知道，返回对本地值的引用是不好的。但是，另一方面，const 引用应该延长临时对象的生命周期。

此代码产生一个 UB 输出。所以没有延长寿命。

为什么？我的意思是有人可以逐步解释发生了什么吗？

我的推理链中的错误在哪里？

富（）：

1.  A(32) - 演员

2.  return A(32) - 创建并返回对本地对象的 const 引用

3.  A a = foo(); - a 由 foo() 返回值初始化，返回值超出范围（超出表达式）并被销毁，但 a 已经初始化；

（但实际上析构函数是在复制构造函数之前调用的）

foo_2():

1.  return 6 - 隐式创建类型 A 的临时对象，创建对该对象的 const 引用（延长其寿命）并返回

2.  A a = foo(); - a 由 foo() 返回值初始化，返回值超出范围（超出表达式）并被销毁，但 a 已经初始化；

（但实际上析构函数是在复制构造函数之前调用的）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T19:38:35.173

语言规范中明确规定了每个特定上下文的临时生命周期延长规则。它说

> **12.2 临时对象**
> 
> 5 第二个上下文是引用绑定到临时的。[...] 函数返回语句（6.6.3）中返回值的临时绑定一直存在，直到函数退出。[...]

您的临时对象在函数退出时被销毁。这发生在接收者对象的初始化开始之前。

你似乎认为你的临时工应该以某种方式活得比这更长。显然，您正在尝试应用这条规则，即临时文件应该一直存在到完整表达式结束。但该规则不适用于在函数内部创建的临时对象。此类临时人员的生命受到他们自己的专用规则的约束。

如果有人试图使用返回的引用，您`foo`和您都会产生未定义的行为。`foo_2`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T01:13:45.557

您在误解“直到函数退出”。如果您真的想使用 const 引用来延长对象的寿命`foo`，请使用

```
A foo() {
    return A(32);
}
int main() {
    const A& a = foo();
} 
```

如果您希望以您期望的方式扩展事物，您必须从`foo` *按值*返回，然后使用 const 引用来引用返回值。

正如@AndreyT 所说，该对象在具有`const &`. 您希望您的对象在 . 之后仍然存在 ，因此`foo`您*不*应该在. 第一次提到的应该是 in ，因为那是应该让对象保持活动状态的函数。`const &``&``foo``foo``const &``main`

您可能认为这个按值返回的代码很慢，因为在返回中似乎有 A 的副本，但这是不正确的。在大多数情况下，编译器只能在其最终位置（即调用函数的堆栈上）构造 A 一次，然后设置相关引用。

# magento - 在 Magento xml 中获取基本 URL

> ID：11747657
> 
> 赞同：0
> 
> 时间：2012-07-31T19:33:51.940
> 
> 标签：magento

我正在尝试`footer_menu`通过我的添加到块的链接`page.xml`：

```
 <block type="page/template_links" name="footer_links" as="footer_links" template="page/template/links-follow.phtml">
                <action method="addLink" translate="label title">
                    <label>Condiciones generales</label>
                    <url>legal</url>
                    <title>Condiciones generales</title>
                </action>
            </block> 
```

但是，显然路径是相对于它所显示的页面的。由于 home url 必然会改变（从 in`/foo/`到 root `/`），我想预先添加 shop base url 以使其自动工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:33:51.940

我发现添加`<urlParams helper="core/url/getHomeUrl" />`到混合物中就可以了。 **遵循元素的顺序以**使其工作是至关重要的（如果你问我，这很令人困惑）。

```
 <block type="page/template_links" name="footer_links" as="footer_links" template="page/template/links-follow.phtml">
                <action method="addLink" translate="label title">
                    <label>Condiciones generales</label>
                    <url>legal</url>
                    <title>Condiciones generales</title>
                    <urlParams helper="core/url/getHomeUrl" />
                </action>
            </block> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-08T11:07:23.390

这种方法工作正常

我正在使用`{{baseUrl}}`在布局 .xml 文件中获取基本 url 以在客户/帐户/登录 url 中添加规范 url

```
<reference name="head">
    <action method="addLinkRel">
        <rel>canonical</rel>
        <href>{{baseUrl}}customer/account/login</href>
    </action>
</reference> 
```

# android - 包含 startActivity() 函数错误 LogCat 和 AndroidManifest.xml

> ID：11747658
> 
> 赞同：0
> 
> 时间：2012-07-31T19:33:54.067
> 
> 标签：android, android-intent, android-manifest, android-activity

> 当我单击“确定”按钮时，它会强制关闭。startActivity() 函数有问题。当我单击确定按钮时，应用程序强制关闭，LogCat 抛出以下错误。MainActivity.java 中的 startactivity() 方法有问题

**MainActivity.java**

```
package com.location.sensor;

import android.app.Activity;
import android.content.Intent;
import android.content.res.Resources.NotFoundException;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
            Button btn=(Button) findViewById(R.id.btn_OK);
            Animation anim= AnimationUtils.loadAnimation(getApplicationContext(), R.anim.jump);
            btn.startAnimation(anim);
            btn.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Animation anim= AnimationUtils.loadAnimation(getApplicationContext(), R.anim.jump);
                    anim.setDuration(3000);
                    v.startAnimation(anim);
                    TextView n=new TextView(getBaseContext());
                    EditText txt=(EditText) findViewById(R.id.txt_username);
                    //Animation anim= AnimationUtils.loadAnimation(getApplicationContext(), R.anim.jump);
                    //n.startAnimation(anim);
                    String s=txt.getText().toString();
                    n.setText(s);
                    n.setBackgroundResource(R.drawable.icn);
                    //Intent i=new Intent("com.location.pendintent");
                    //Bundle extras=new Bundle();
                    //extras.putString("alarm", s);
                    //i.putExtras(extras);
                    try {
                        startActivity(new Intent("com.hello.loc"));
                    } catch (Exception e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                        Log.d("service", "Caught here!");
                    }

                }
            });

    }
} 
```

**NotificationClass.java**

```
package com.location.sensor;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class NotificationClass extends Activity {
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        //requestWindowFeature(Window.FEATURE_NO_TITLE);
        //String data=getIntent().getExtras().getString("alarm").toString();
        TextView tv=(TextView) findViewById(R.id.txt_pendint);
        Button btn=(Button) findViewById(R.id.btn_cancel);
        //tv.setText(data);
        btn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                showDialog(0);

            }
        });
        setContentView(R.layout.notif);
    }
protected Dialog onCreateDialog(int id)
{
    switch(id)
    {
    case 0:

        return new AlertDialog.Builder(this)
                .setIcon(R.drawable.excl_mark)
                .setTitle("Do you want to Cancel?")
                .setPositiveButton("Yes",new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub
                        finish();
                    }
                })
                .setNegativeButton("No",new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub
                        Toast.makeText(getBaseContext(), "Cancel Clicked!", Toast.LENGTH_LONG).show();
                    }
                })
                .create();
    }
    return null;

}
} 
```

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.location.sensor"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10"/>

    <application
        android:icon="@drawable/gps1"
        android:label="@string/app_name" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity 
            android:name=".NotificationClass"
            android:label="YOU ARE IN PROXIMITY AREA!!!">
            <intent-filter>
               <action android:name="com.hello.loc"/> 
               <category  android:name="android.intent.category.DEFAULT" /> 
             </intent-filter>   
        </activity>
    </application>

</manifest> 
```

**日志猫**

```
08-01 00:42:20.665: E/Trace(808): error opening trace file: No such file or directory (2)
08-01 00:42:51.165: E/AndroidRuntime(808): FATAL EXCEPTION: main
08-01 00:42:51.165: E/AndroidRuntime(808): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.location.sensor/com.location.sensor.NotificationClass}: java.lang.NullPointerException
08-01 00:42:51.165: E/AndroidRuntime(808):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
08-01 00:42:51.165: E/AndroidRuntime(808):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-01 00:42:51.165: E/AndroidRuntime(808):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-01 00:42:51.165: E/AndroidRuntime(808):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-01 00:42:51.165: E/AndroidRuntime(808):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 00:42:51.165: E/AndroidRuntime(808):  at android.os.Looper.loop(Looper.java:137)
08-01 00:42:51.165: E/AndroidRuntime(808):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-01 00:42:51.165: E/AndroidRuntime(808):  at java.lang.reflect.Method.invokeNative(Native Method)
08-01 00:42:51.165: E/AndroidRuntime(808):  at java.lang.reflect.Method.invoke(Method.java:511)
08-01 00:42:51.165: E/AndroidRuntime(808):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-01 00:42:51.165: E/AndroidRuntime(808):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-01 00:42:51.165: E/AndroidRuntime(808):  at dalvik.system.NativeStart.main(Native Method)
08-01 00:42:51.165: E/AndroidRuntime(808): Caused by: java.lang.NullPointerException
08-01 00:42:51.165: E/AndroidRuntime(808):  at com.location.sensor.NotificationClass.onCreate(NotificationClass.java:23)
08-01 00:42:51.165: E/AndroidRuntime(808):  at android.app.Activity.performCreate(Activity.java:5008)
08-01 00:42:51.165: E/AndroidRuntime(808):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
08-01 00:42:51.165: E/AndroidRuntime(808):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
08-01 00:42:51.165: E/AndroidRuntime(808):  ... 11 more 
```

**通知.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
 <Button
     android:text="Cancel"
     android:id="@+id/btn_cancel"
     android:layout_height="wrap_content"
     android:layout_width="fill_parent"
     android:background="#FF4000"
     />
 <LinearLayout 
     android:padding="5px"
     android:orientation="vertical">
     <TextView 
         android:id="@+id/txt_pendint"
         android:textSize="18px"
         android:text="No text Added"
         android:textColor="#A9F5E1"
         android:background="#0B3B39"/>
 </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:44:57.673

您正在调用`findViewById()`NotificationClass 活动而不设置内容视图。它找不到你的资源，所以你的`Button`为空。打电话`setContentView(R.layout.yourlayout)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T19:45:49.137

我认为你必须把`setContentView(R.layout.notif);`你的`super.onCreate(savedInstanceState);`

```
public class NotificationClass extends Activity {
    public void onCreate(Bundle savedInstanceState)
    {
       super.onCreate(savedInstanceState);
        setContentView(R.layout.notif);
        //Rest of code.
    } 
```

**编辑：**关于“导出的活动不需要许可”尝试添加`android:exported="false"`到活动属性，如下所示：

```
<activity 
 android:name=".MainActivity"
 android:label="@string/app_name"
 android:exported="false">
     <intent-filter>
         <action android:name="android.intent.action.MAIN" />
         <category android:name="android.intent.category.LAUNCHER" />
     </intent-filter>
</activity> 
```

希望有帮助。

# .net - 复合应用程序块中的命令和事件之间的区别

> ID：11747662
> 
> 赞同：1
> 
> 时间：2012-07-31T19:34:01.597
> 
> 标签：.net, windows, composite-application

我在我的应用程序中使用[复合应用程序块](http://msdn.microsoft.com/en-us/library/ff648747.aspx)。有 2 个概念，EventHandlers 和 CommandHandlers 看起来与我非常相似……它们都允许您从 UI 的一个部分调用另一部分的功能。它们之间有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-10T22:21:53.483

我相信这是一个方便的问题。我们对功能区上的按钮使用命令：

```
Public Sub AddElementToRibbonGroup(WorkItem As WorkItem, elementDescription As String, menuGroupKey As String, commandName As String, commandKey As String)
    WorkItemController.ShellExtensionService.AddButtonToolExtension( _
         WorkItem, _
         commandKey, _
         New ButtonToolAppearance(elementDescription), _
         menuGroupKey, _
         WorkItem.Commands(commandName))
End Sub 
```

但是我们从表单中引发事件来处理控制器中的逻辑：

**sample_View.vb：**

```
 <EventBroker.EventPublication(Constants.Events.CreateNewNavTab, PublicationScope.Global)> _
    Public Event CreateNewNavTab As EventHandler

    ' Node in Navigation Tree is double clicked
    Private Sub NavTree_DoubleClick(sender As System.Object, e As System.EventArgs) Handles NavTree.DoubleClick
...
        RaiseEvent CreateNewNavTab(Me, Nothing)

    End Sub 
```

**sample_controller.vb：**

```
' A new tab is created from the Nav Tree.
<EventSubscription(Constants.Events.CreateNewNavTab, ThreadOption.UserInterface)> _
Public Sub CreateNewNavTab(ByVal pNavView As Object, ByVal e As EventArgs)

... 

End Sub 
```

希望这可以帮助！

# php - 消息：未定义的属性：Site::$Site_model - CodeIgniter

> ID：11747665
> 
> 赞同：5
> 
> 时间：2012-07-31T19:34:10.957
> 
> 标签：php, codeigniter

我已经在自动加载配置中自动加载库 site_model，这是我得到的错误：

```
A PHP Error was encountered

Severity: Notice

Message: Undefined property: Site::$Site_model

Filename: controllers/site.php

Line Number: 16

Fatal error: Call to a member function add_record() on a non-object in /Applications/XAMPP/xamppfiles/htdocs/BLOCK/application/controllers/site.php on line 16 
```

控制器：

```
<?php
class Site extends CI_Controller {

function index(){

    $this->load->view('option_view');
}

function create(){

    $data = array(
        'subject' => $this->input->post('subject'),
        'body' => $this->input->post('body')
    );

    $this->Site_model->add_record($data);
    $this->index();

}

}

?> 
```

模型：

```
<?php

class Site_model extends CI_Model {

function get_records()

{
    $query = $this->db->get('items');
    return $query->result();
}

function add_record()
{
    $this->db->insert('items', $data);
    $return;
}

function update_record()
{
    $this->db->where('id', 1);
    $this->db->update('items', $data);

}

function delete_record()
{
    $this->db->where('id', $this->url->segment(3));
    $this->db->delete('items');

}

}

?> 
```

和观点：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>option_view</title>
<style type="text/css" media="screen">
label {display:block;}
</style>
</head>

<body>
<h2>Create</h2>
<?php echo form_open('site/create'); ?>

<p>
    </label for="subject">Subject</label>
    <input type="text" name="subject" id="subject">
</p>

<p>
    </label for="body">Body</label>
    <input type="text" name="body" id="body">
</p>
<p>
<input type="submit" value="Submit">    
</p>
<?php echo form_close();?>
 </body>
 </html> 
```

大家怎么看？

非常感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T19:43:33.680

```
$this->load->model('Site_model'); # <- add this
$this->Site_model->add_record($data); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T11:44:29.333

您的代码很好....但是您只忘记了简单的事情。您忘记在控制器“__Construct（）”中提供以下内容

```
$this->load->model('your modelname'); 
```

就是这样。一切都很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-18T14:32:37.393

添加构造函数。然后它将有助于调用模型。

```
<?php
class some_controller extends CI_Controller{

    public function __construct()
    {
        parent::__construct();
        $this->load->model('site_model');

    }
    function index()
    {
        $this->load->view('your_view');
    }
    function create()
    {
        $data = array(
            'test1' => $this->input->post('test1'),
            'test2' => $this->input->post('test2')
            );
        $this->site_model->add($data);
        $this->index();
    } 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-03T11:12:16.143

添加“Site_model”`config-autoload.php`如下：

```
$autoload['model'] = array('Site_model'); 
```

# structuremap - 在 HTTPContext 范围内注册的对象仍由 Model.InstancesOf 方法报告

> ID：11747669
> 
> 赞同：0
> 
> 时间：2012-07-31T19:34:29.893
> 
> 标签：structuremap

初始化我的 aspx 页面时，我在 StructureMap 容器中声明它（在 OnInit 中），以将其注入到适当的演示者中：

```
container.Configure(x => x.For<IMyInterface>().HttpContextScoped().Use(this)); 
```

HttpContextScope 应该在当前请求结束时强制从容器中删除“this”（即页面对象）。为了证明这一点，我在上面一行之后添加了以下代码：

```
IEnumerable<InstanceRef> refs = container.Model.InstancesOf<IMyInterface>();
foreach (InstanceRef r in refs)
{
  Type t = r.ConcreteType;
} 
```

问题是：

为什么每次回发的 refs 集合增加 1？

它不仅增加而且 r.ConcreteType 没有引发任何异常——这意味着底层对象确实存在。该页面被注入到本身在 HttpContext 范围中声明的演示者中。

HttpContext 范围似乎工作不正确，我做错了什么？

提前致谢

* * *

我想了想，结果如下。如果我将容器配置为**创建**我的类的新实例（它（配置）只会在 Application_Start 期间完成一次），容器将创建一个实例，然后 - 在 Http 请求结束时真正删除它。但是我只**注册**了这个类的现有实例。容器不是实例的所有者，因此它可能不会删除它 - 但配置会保留对它的引用（因此根本无法删除它）。另一方面，配置项不会被任何人随时删除（而是在每个 Http 请求中添加）。

因此，所有这些都可以正常工作。当然，这是我对“HttpContextScoped”（以及其他一些东西：-（）的误解。

所以，我在起点：有没有办法从配置中删除这样的注册？

[已编辑]似乎我无法删除这样的注册。解决方案是：用手动属性注入代替自动构造函数注入。即：创建演示者（没有它的视图），然后 - 手动设置视图： thePresenter.View = this; 没有添加上述注册，问题只是没有出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T01:03:33.603

这一行：

```
container.Configure(x => x.For<IMyInterface>().HttpContextScoped().Use(this)); 
```

具有误导性。它使您认为您将其注册为，`HttpContextScoped`但实际上它已注册为单例。

您可以使用 lambda 来“创建”对象：

```
container.Configure(x => x.For<IMyInterface>().HttpContextScoped().Use(c => this)); 
```

lambda 方法用于创建对象，但仍应适用正常的范围规则。事实上，如果你使用工厂，你甚至可能根本不需要范围规则（因为 lambda 是懒惰地评估的）。

# c# - 如何使用 C# 和 MVC3 在 MSSQL 数据库中搜索 byte[]/varbinary

> ID：11747673
> 
> 赞同：0
> 
> 时间：2012-07-31T19:34:40.173
> 
> 标签：c#, sql-server, asp.net-mvc-3

对于最近的 MVC3 项目，我最终将文件存储在 MSSQL 数据库中`byte[]`（MVC3 将其转换为 varbinary(max) 列）。

一旦文件被提交到数据库，它们就永远不会改变。

现在我试图变得非常聪明，即使用户一遍又一遍地添加同一个文件，也要避免多次存储同一个文件。

我避免这种情况的第一个想法是创建一个 where 查询来尝试查找是否存在与`byte[]`我尝试添加的匹配项。然而，我担心这是一个过于繁重的查询，因为文件的大小可能在 100Mb 左右，并且可能有多个人同时添加它们。

为了更聪明，我可以使用有关文件的一些信息来缩小搜索范围。我目前在模型中有以下相关列。

```
public byte[] FileData { get; set; }        
public String MimeType { get; set; }
public double FileSizeMb { get; set; } 
```

我可以搜索是否有任何文件具有相同的 mime 类型和文件大小，还可以添加一个哈希值，`byte[]`看看我是否可以在尝试匹配`byte[]`. 这样我只比较当我有一个正确大小的正确类型和相同哈希的文件时，它应该不那么重..

有没有更好的选择来实现这一点？我将如何最好地解决这个问题？

如果有什么不同，我使用的是 mssql 2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:39:06.030

我认为以字节为单位存储原始长度和由 c# 计算的哈希应该就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:40:45.400

您应该计算您的哈希值`FileData`（当然是在 Web 服务器端），并使用哈希值和文件大小进行搜索。如果您有匹配项，您应该下载`FileData`到 Web 服务器并进行比较（而不是相反）。

# javascript - 使用 for SVG to and inline css from HTML to edit fill I want to replace a flash object that uses a single swf file (map of USA) and uses flash vars identified in the html to dynamically change colors of different states. Using a si 问问题 问问题 2012-07-31T19:34:53.417 343 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I want to replace a flash object that uses a single swf file (map of USA) and uses flash vars identified in the html to dynamically change colors of different states. Using a single file for multiple pages. I've created an SVG file with each state having an ID name of it's two letter state abbreviation. What I'd like to do is import this using or , then using inline CSS on the HTML page manipulate the SVG image and adjust the fill of certain items. Inline CSS within the SVG file (or referencing an external CSS file from within the SVG file) will not meet my desire of having one image file to be used on many pages – like the original swf. Beaten my head against the monitor for a few days now trying a bunch of jQuery and javascript stuff, but sadly I am not proficient enough in js to make this work on my own. Thanks for any advise or help! Not sure if I completely understood what you are asking for. I think you have an SVG image with all the states of the USA and try to use (inline) CSS to "highlight" one or more of those states? If so, traditional methods will not work. JavaScript is not able to modify images, neither is CSS, AFAIK. The only way that I would know is to read in the SVG more or less byte for byte and base64-encode it after you have altered the image via JavaScript, then create an Image and set the source using a data URI. There are a couple of encryptors in the Web. I suggest looking into the JSXGraph, specifically the JSXCompressor or something of that nature. Also there are some libraries to edit images, like PNGlib, although it is not quite what you are looking for. Try Google. But honestly, I don't feel like googling hours for you now by myself... Hope I at least gave you a kick into the right direction. javascriptjqueryhtmlcsssvg 4 4 回答 4 This answer is useful 1 不确定我是否完全理解您的要求。我认为您有一个包含美国所有州的 SVG 图像，并尝试使用（内联）CSS 来“突出显示”其中一个或多个州？ 如果是这样，传统的方法就行不通了。JavaScript 不能修改图像，CSS、AFAIK 也不能。我知道的唯一方法是在通过 JavaScript 更改图像后或多或少地读取 SVG 并对其进行 base64 编码，然后创建一个 Image 并使用数据 URI设置源。 Web 中有几个加密器。我建议研究JSXGraph，特别是JSXCompressor或类似的东西。还有一些库可以编辑图像，例如PNGlib，尽管它不是您正在寻找的。试试谷歌。但老实说，我现在不想一个人为你搜索时间...... 希望我至少给了你一个正确的方向。 于 2012-07-31T19:59:24.810 回答 This answer is useful 0 Here's something in SVG that seems similar to what you're trying to do. The states change colour as you mouse over them. I'm sure you could learn from it. 于 2012-07-31T22:04:12.697 回答 This answer is useful 0 I don't feel browser support is yet where I need for this question to be answered. What I ended up doing is creating the flash version http://ryanhollingsworth.com/test/map.html How it works, you embed the swf and use flashvars to assign values to two arrays, color array and state array. Result is I can use the same swf on multiple pages, with different colors and have different states colored differently. SVG will catch up, soon i hope :) 于 2012-08-01T19:37:52.523 回答 This answer is useful 0 You can most probably use with URL fragment parameter passing. See this example. What you're asking for is basically SVG Parameters (note: spec is a working draft, there are no known implementations and the syntax will likely change). There is a script fallback solution used by the demos in that spec that might be helpful. 于 2012-08-13T13:32:43.490 回答 Related 2 joomla - onUserAfterSave 插件中的 user->setParam 无效 2 asp.net - ObjectDataSource 找不到具有参数的非泛型方法： 1 javascript - 如何使用 fullcalender 拖放添加 3 天的外部元素日期块 2 php - 通过代码隐藏表格列 1 html - 将 UIDatePicker 连接到 UIWebView 2 python - 模式摆脱模块中的导入，如在 web2py 控制器中 2 r - 按行申请时，如何获取多系列动物园对象的列名（或编号）？ 3 c++ - 在 C++ 中使用模板中的方法 0 c++ - 从 C++ 的 Windows 文件保存对话框中的过滤器更改时更改文件名 1 javascript - Three.js 聚光灯谷仓门 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11747680
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, jquery, html, css, svg

I want to replace a flash object that uses a single swf file (map of USA) and uses flash vars identified in the html to dynamically change colors of different states. Using a single file for multiple pages.

I've created an SVG file with each state having an ID name of it's two letter state abbreviation. What I'd like to do is import this using or , then using inline CSS on the HTML page manipulate the SVG image and adjust the fill of certain items.

Inline CSS within the SVG file (or referencing an external CSS file from within the SVG file) will not meet my desire of having one image file to be used on many pages – like the original swf.

Beaten my head against the monitor for a few days now trying a bunch of jQuery and javascript stuff, but sadly I am not proficient enough in js to make this work on my own.

Thanks for any advise or help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:59:24.810

不确定我是否完全理解您的要求。我认为您有一个包含美国所有州的 SVG 图像，并尝试使用（内联）CSS 来“突出显示”其中一个或多个州？

如果是这样，传统的方法就行不通了。JavaScript 不能修改图像，CSS、AFAIK 也不能。我知道的唯一方法是在通过 JavaScript 更改图像后或多或少地读取 SVG 并对其进行 base64 编码，然后创建一个 Image 并使用[数据 URI](https://developer.mozilla.org/en/data_URIs)设置源。

Web 中有几个加密器。我建议研究[JSXGraph](http://jsxgraph.uni-bayreuth.de/wp/)，特别是*JSXCompressor*或类似的东西。还有一些库可以编辑图像，例如[PNGlib](http://www.libpng.org/pub/png/libpng.html)，尽管它不是您正在寻找的。试试谷歌。但老实说，我现在不想一个人为你搜索时间......

希望我至少给了你一个正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:04:12.697

[Here's something in SVG](http://games.co.za/united-states-svg.html) that seems similar to what you're trying to do. The states change colour as you mouse over them. I'm sure you could learn from it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T19:37:52.523

I don't feel browser support is yet where I need for this question to be answered. What I ended up doing is creating the flash version [http://ryanhollingsworth.com/test/map.html](http://ryanhollingsworth.com/test/map.html)

How it works, you embed the swf and use flashvars to assign values to two arrays, color array and state array. Result is I can use the same swf on multiple pages, with different colors and have different states colored differently.

SVG will catch up, soon i hope :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T13:32:43.490

You can most probably use <object> with URL fragment parameter passing. See [this example](http://xn--dahlstrm-t4a.net/images/textcorner.svg#text=custom%20text).

What you're asking for is basically [SVG Parameters](http://www.w3.org/TR/SVGParamPrimer/) (note: spec is a working draft, there are no known implementations and the syntax will likely change). There is a [script fallback solution](http://www.w3.org/TR/SVGParamPrimer/param.js) used by the demos in that spec that might be helpful.

# c# - 在 c# 中使用 Web 应用程序为多个用户同步事件？

> ID：11747681
> 
> 赞同：0
> 
> 时间：2012-07-31T19:35:01.623
> 
> 标签：c#, asp.net, synchronization, game-center

我遇到了一个问题。我正在使用 C#、使用 MVC4 和实体框架的 ASP.net Web 应用程序进行游戏开发。

简述我的问题：我有一个 Web 应用程序，它有一个单页，滑块范围为 0-100。考虑 3 个用户登录应用程序，每个用户都在他们自己的会话中使用滑块访问页面。

假设用户 1 将滑块从位置 0 移动到 10，则对应于用户 2 和用户 3 的滑块必须同步并且应该反映到他们的 UI。反之亦然。看起来像一个多人游戏，其中一个人的发泄被显示给其他用户。

如何做到这一点？我正在努力破解我的想法来实现它，但不能。请帮帮我。请让我知道更多更多信息。我感谢您的帮助。期待！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:37:23.420

我相信[SignalR](https://github.com/SignalR/SignalR/)正是您正在寻找的：

> .NET 的异步信号库，可帮助构建实时、多用户交互式 Web 应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:43:18.517

仅在 Web 应用程序上执行此操作，而不使用 Flash、Silverlight、Java Applet 等任何技术，必然涉及类似于[Web 套接字](http://en.wikipedia.org/wiki/WebSocket)的东西。[SignalR](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)似乎也是一个不错的选择。我链接了 Scott Hanselman 博客中的一个示例。

# javascript - 以编程方式从构造函数中检索属性名称

> ID：11747683
> 
> 赞同：1
> 
> 时间：2012-07-31T19:35:13.860
> 
> 标签：javascript, local-storage

我正在尝试学习 javascript，并且正在尝试找出项目的本地存储。但首先我相信我需要从我的团队构造函数中以编程方式构建密钥。

```
 var Team = function(team, manager, cell, add1, add2, city, st, zip, sponsor) {
  this.team = team;
  this.manager = manager;
  this.cell = cell;
  this.add1 = add1;
  this.add2 = add2;
  this.city = city;
  this.st = st;
  this.zip = zip;
  this.sponsor = sponsor;
  }; 
```

这是来自我构建的表单，现在我想构建本地存储。这是我失败的尝试：

```
 function saveTeam() {
 for (var i = 0; i < Team.length; i++) {
 localStorage["league." + i "." + javascriptNameOfProperty ] = $('#'+ javascriptNameOfPropertyName + ').val() }; 
```

或类似的东西。我试过“property”、“key”和我试过的其他方法不适用于 javascriptNameofProperty。当然，一旦我弄清楚了，我当然必须弄清楚本地存储。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:46:39.050

在这种情况下，您可以使用对象文字而不是构造函数（我在您发布的代码中没有看到构造函数的任何原因，并且您应该使用 实例化对象`new`，而您不是）。考虑使用它（假设您传递给的所有变量`Team`都已定义）：

```
var team = {
    team : team,
    manager : manager,
    cell : cell,
    add1 : add1,
    add2 : add2,
    city : city,
    st : st,
    zip : zip,
    sponsor : sponsor
} 
```

这可以使用以下代码进行迭代：

```
for(var key in team) {
    localStorage["league." + key] = team[key];
} 
```

我认为这并没有完全按照您的原始代码试图做的那样做，但是不清楚您是否有多个团队，它们是如何创建的，以及它们是如何使用的。我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:42:30.540

团队是一个函数，而不是一个数组。

我会假设你确实有一组团队。

您需要使用`for in`循环：

```
var teams = [ ... ];

for (var i = 0; i < teams.length; i++) {
    for (var key in team) {
        localStorage["league." + i + "." + key] = $('#' + key).val()
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T19:51:27.623

要从其他人身上建立一点点，你也可以这样做。

```
var Team = function(team, manager, cell, add1, add2, city, st, zip, sponsor) {
  this.team = team;
  this.manager = manager;
  this.cell = cell;
  this.add1 = add1;
  this.add2 = add2;
  this.city = city;
  this.st = st;
  this.zip = zip;
  this.sponsor = sponsor;
};

Team.prototype.save = function () { 
  for ( var prop in this )
  { 
    if (this.hasOwnProperty(prop))
      console.log('%s => %s', prop, this[prop]);
      // your localStorage saving logic goes here
  }
};

var t = new Team('vteam','vmanager','vcell','vadd1','vadd2','vcity','vst','vzip','vsponors');

t.save(); 
```

这将只保存 Team 对象的属性（在团队函数*this.prop*中定义的任何内容。

# build - 构建任务导致错误 - 从字符串“构建任务”到类型“整数”的转换无效

> ID：11747685
> 
> 赞同：0
> 
> 时间：2012-07-31T19:35:26.057
> 
> 标签：build, msbuild, type-conversion

我正在处理我继承的一些代码。这是我第一次尝试构建它，我收到以下错误：

```
Error   1   Conversion from string "Build Tasks" to type 'Integer' is not valid.    C:\Users\PatTrain15\Desktop\Plugin Sources\PAT_SubscriptionDatePlugin__c\SubscriptionDatePlugin__c.vbproj   157 5   SubscriptionDatePlugin__c 
```

这是有问题的 .vbproj 文件的第 156 - 158 行。

```
<Target Name="BeforeBuild">
<IncrementBuildNumber AssemblyFileLocation="$(MSBuildProjectDirectory)\My Project\AssemblyInfo.vb" />
</Target> 
```

项目的根目录中有一个 BuildTask.dll 文件。

我真的不知道如何从项目中消除这个错误。

有人可以帮我理解这里发生了什么吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:25:04.280

我也遇到了这个问题——在我 2010 年的旧项目中，我正在操纵内部版本号，将它们递增到设定的时间表。我通过在构建步骤之前和之后设置来做到这一点。

在我 2012 年的项目中，即使代码仍在 csproj 文件的 xml 中，我也没有看到前后步骤的变化。

解决方案：我从 csproj 文件中删除了 build.dll 和 incrementbuild 步骤（记得也要删除结束标签），我的项目在 VS 2012 下成功构建。

我将关注发布中的新功能，在这些功能中我可以更精细地控制我的版本信息。

希望这可以帮助-

# android - sharedPreferences 不会在活动之间共享

> ID：11747687
> 
> 赞同：24
> 
> 时间：2012-07-31T19:35:36.200
> 
> 标签：android, sharedpreferences

我正在尝试使用 SharedPreferences 来保存设置。但我似乎无法在我的任何活动之间共享数据。我正在使用的代码确实可以保存设置，但每个活动似乎都有自己的每个变量版本。

举个例子。我有一个音频设置活动，用户可以在其中为保存的变量“musicVolume”赋值。如果我关闭游戏并重新加载它，那么音频设置活动会“记住”该值。但是，如果我尝试将该值加载到任何其他活动中，它就不起作用。但是，它们都可以加载和保存自己的同名变量。

这些是我用来保存变量的方法。每个活动中都有这些方法的副本。**

正如我所说，它们可以工作，但它们似乎只能为它们所在的单个活动读写数据。

```
public void SavePreferences(String key, float value) {
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putFloat(key, value);
        editor.commit();
}

public void LoadPreferences() {
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        musicVolume = sharedPreferences.getFloat("musicVolume", (float)0.123);
        soundEffectsVolume = sharedPreferences
                        .getFloat("soundEffectsVolume", (float)0.123);
}

public void ClearPreferences() {
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.clear();
        editor.commit();
} 
```

** 我知道有更好的方法可以做到这一点，但我是一个非常新手的oo 程序员。我试图遵循另一个线程的建议

[Android 共享首选项](https://stackoverflow.com/questions/5734721/android-shared-preferences)

但无论我试图把线条放在哪里

```
protected AppPreferences appPrefs;
appPrefs = new AppPreferences(getApplicationContext()); 
```

我得到一种或另一种错误。但最重要的是，阅读线程上的其他评论，人们说 SharedPreferences 无论如何都会在同一个包内的活动之间自动共享，这就是我认为它们的工作方式。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-31T19:47:47.130

您正在使用**getPreferences(MODE)**。请改用**getSharedPreferences("PREF_NAME", MODE)**。这样，您将为特定偏好提供一个名称，然后您可以从您想要的任何活动中通过其名称（此处为 PREF_NAME）来调用它。

```
//------get sharedPreferences

SharedPreferences pref = context.getSharedPreferences("PREF_NAME", Context.MODE_PRIVATE);

//-------get a value from them

pref.getString("NAME", "Android");

//--------modify the value

pref.edit().putString("NAME", "Simone").commit();

//--------reset preferences

pref.edit().clear().commit(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-31T20:51:26.047

如前所述，使用`getSharedPreferences(String name, int mode)`而不是`getPreferences (int mode)`. 具体来说，如果您有兴趣，这两种方法的文档说明了差异。根据[Android 文档](http://developer.android.com/reference/android/app/Activity.html#getPreferences%28int%29) `getPreferences(int)`，执行以下操作：

> 检索 SharedPreferences 对象以访问此活动专用的首选项。这只是通过传入此活动的类名作为首选项名称来调用底层的 getSharedPreferences(String, int) 方法。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-31T19:51:27.683

如果您没有对偏好做任何花哨的事情，我只会使用默认的访问方式。好像是你的问题。

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this); 
```

这是一篇更详细的精彩文章，除了掌握你的句柄外，你所做的一切都非常正确。 [如何从 Android 中的 PreferenceActivity 获取 SharedPreferences？](https://stackoverflow.com/questions/2614719/how-do-i-get-the-sharedpreferences-from-a-preferenceactivity-in-android)

另外：不要忘记新方法是调用 .apply() 而不是 .commit() 这是 #io2012 视频中的一个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-27T08:52:00.103

你应该使用这个

```
SharedPreferences pref = context.getSharedPreferences("PREF_NAME", Context.MODE_PRIVATE); 
```

或者

```
SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(context); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-26T02:19:41.730

如果你和我有同样的问题，那很简单。当你去保存首选项时，像这样保存它：

```
SharedPreferences sp = getSharedPrefenreces("Preference",MODE_PRIVATE); 
```

并不是：

```
 SharedPreferences sp = getSharedPrefenreces("Preference's name",Context.MODE_PRIVATE); 
```

我知道在某些情况下 SharedPfenrences 有多么重要。

# git - 我的 git 别名存储在哪里？

> ID：11747691
> 
> 赞同：23
> 
> 时间：2012-07-31T19:36:04.217
> 
> 标签：git, alias

我有一个找不到的别名。打字`git help subaddvim`给了我：

```
`git subaddvim' is aliased to `log HEAD' 
```

我想我是这样定义的：

```
git config --local alias.subaddvim 'log HEAD' 
```

我查看了`$repo_path/.gitconfig`, `~/.gitconfig`, `/etc/gitconfig`，但它们都没有 subaddvim 条目。

我还能在哪里看？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-31T20:08:11.897

Scott Chacon 的[优秀书籍“Pro Git”](http://git-scm.com/book/en/Getting-Started-First-Time-Git-Setup)涵盖了存储内容的位置，以及传递`git config`给该位置读/写的选项：

> Git 带有一个名为 git config 的工具，可让您获取和设置配置变量，这些变量控制 Git 外观和操作的各个方面。这些变量可以存储在三个不同的位置：
> 
> *   /etc/gitconfig 文件：包含系统上每个用户及其所有存储库的值。如果您将选项**--system**传递给 git config，它会专门从此文件中读取和写入。
>     
>     
> *   ~/.gitconfig 文件：特定于您的用户。**您可以通过传递--global**选项使 Git 专门读取和写入此文件。
>     
>     
> *   您当前使用的任何存储库的 git 目录（即 .git/config）中的配置文件：特定于该单个存储库。每个级别都会覆盖前一级别的值，因此 .git/config 中的值优于 /etc/gitconfig 中的值。

您可以让 git 告诉您使用该`--list`选项的位置定义了什么：

```
# shows all settings
git config --list

# shows system settings
git config --list --system

# shows user settings
git config --list --global

# shows project settings
git config --list --local 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-31T19:36:04.217

`--local`使用未记录（或已过时）标志和无标志之间没有区别。`$repo_path/.gitconfig`Git 永远不会在您的存储库根目录 ( )中查找 gitconfig 。回购本地配置更改位于`.git/config`.

`git help config`解释有效选项：

--global 用于写入选项：写入全局 ~/.gitconfig 文件而不是存储库 .git/config。

```
 For reading options: read only from global ~/.gitconfig rather than from
   all available files. 
```

--system 用于写入选项：写入系统范围的 $(prefix)/etc/gitconfig 而不是存储库 .git/config。

```
 For reading options: read only from system-wide $(prefix)/etc/gitconfig
   rather than from all available files. 
```

（使用 git 版本 1.7.9）

您可以尝试使用此搜索（从您的 repo 根目录并假设 git 安装在 /bin 中）：

```
grep subaddvim .git/config ~/.gitconfig /etc/gitconfig 
```

# opencv - cvPyrSegmentation 的替代品

> ID：11747698
> 
> 赞同：2
> 
> 时间：2012-07-31T19:36:50.033
> 
> 标签：opencv, image-segmentation

我试过 cyPyrSegmentation 将图像分割成不同的部分。

```
cvPyrSegmentation(in, out,storage, contours, level, 80, 20); 
```

输出的分割非常好。因此，在我继续进行的过程中，我想处理不同细分市场的位置。但现在我注意到`cvPyrSegmentation`只保存矩形坐标而不是段中的整个像素：/。但是矩形太不精确了。

有人有想法吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:45:08.877

好的，现在我已经实现了一个非常快速的分割器，它基于加权联合图（[Effcient Graph-Based Image Segmentation](https://cs.brown.edu/people/pfelzens/papers/seg-ijcv.pdf)）。我认为结果看起来很棒。

[![图片由 ImageShack.us 托管](../Images/26e7d0e2423c901409db7eac9afc31a7.png)](https://i.stack.imgur.com/9dKmo.jpg)

# android - Android RSS阅读器描述数据获取错误

> ID：11747702
> 
> 赞同：1
> 
> 时间：2012-07-31T19:37:13.640
> 
> 标签：android, html, textview, rss-reader

我正在开发一个 android rss 阅读器，但我面临的问题是当尝试从描述包含 html 内容的 rss 提要中获取数据时，如下所示：

```
<item>
    <title>Katima&#45;Comic</title>
    <link>http://thelinknewspaper.ca/article/3063</link>

    <guid isPermaLink="false">thelink_entry_3063</guid>
    <description><![CDATA[

        <img alt=""  width="690" height="407" src="http://thelinknewspaper.ca/images/cache/c11f5084728aa602d09cd15bb20ae7a86b06be79.jpg" />
    </p>

    <p>This is the story of Andrew Murchison, a Katimavik volunteer whose life was changed by the federal youth program.</p>        
    <p><iframe class="scribd_iframe_embed" src="http://www.scribd.com/embeds/101595075/content?start_page=1&view_mode=list&access_key=key-1ss1qrvm5hi9h7othhkq" data-auto-height="true" data-aspect-ratio="0.777636594663278" scrolling="no" id="doc_79691" width="100%" height="600" frameborder="0"></iframe></p>

            ]]></description>
            <dc:creator>Paku Daoust&#45;Cloutier</dc:creator>
    <dc:date>2012-07-31T00:20:54+00:00</dc:date>
</item> 
```

我在 textview 中显示内容，该内容使用 html 标签显示内容！

如何在特定区域内使用滚动条以一种易于阅读的方式显示它

谢谢

这是我正在使用的代码的一部分：

```
@Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        View view = convertView;
        ViewHolder holder;
        if (view == null) {
            LayoutInflater inflater = (LayoutInflater) activity
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(R.layout.row, null);

            holder = new ViewHolder();
            view.setTag(holder);
        } else {
            holder = (ViewHolder) view.getTag();
        }

        if ((items == null) || ((position + 1) > items.size()))
            return view;

        objBean = items.get(position);

        holder.title = (TextView) view.findViewById(R.id.txttitle);
        holder.description = (TextView) view.findViewById(R.id.txtdesc);

        if (holder.title != null && null != objBean.getTitle()
                && objBean.getTitle().trim().length() > 0) {
            holder.title.setText(Html.fromHtml(objBean.getTitle()));
        }
        if (holder.description != null && null != objBean.getDescription()
                && objBean.getDescription().trim().length() > 0) {
            holder.description.setText(Html.fromHtml(objBean.getDescription()));
        }

        // Even and odd Row...
        if ((position % 2) == 0) {
            view.setBackgroundResource(R.drawable.bg_list_even);
        } else {
            view.setBackgroundResource(R.drawable.bg_list_odd);
        }

        return view;
    } 
```

和

```
public class NewsDetail extends Activity {
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.detail);

        Bundle b = this.getIntent().getExtras();

        String title = b.getString("title");
        String desc = b.getString("description");

        final String link = b.getString("link");

        TextView tvtitle = (TextView) findViewById(R.id.tvtitle);
        TextView tvdesc = (TextView) findViewById(R.id.tvdesc);

        Button btnWeb = (Button) findViewById(R.id.btngotolink);
        btnWeb.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(link)));
            }
        });

        tvtitle.setText(title);
        tvdesc.setText(desc);

        setTitle(title);
    }

} 
```

再次感谢任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:46:01.963

设置文本时，将其设置为 html 中的文本：

```
tvdesc.setText(Html.fromHtml(desc)); 
```

如果要显示来自 html 的图像，则需要使用带有以下内容的[WebView](http://developer.android.com/reference/android/webkit/WebView.html)：

```
myWebview.loadData(myHtmlString, "text/html; charset=UTF-8", null); 
```

# amazon-s3 - 将标准输出流式传输到 s3

> ID：11747703
> 
> 赞同：3
> 
> 时间：2012-07-31T19:37:15.230
> 
> 标签：amazon-s3, boto

我有一个流（假设它是生成过程的标准输出），我想使用 boto 将其发送到 s3。

请给我一个代码示例好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T02:59:56.443

我认为答案是除非您知道要流式传输的数据的大小，否则您无法轻松地将数据流式传输到 s3，因为 s3 需要事先知道对象的大小。您绝对可以从 s3 流式传输数据，但要获取数据，您需要在内存或磁盘中缓冲，除非您有幸知道大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:43:18.183

几乎来自教程： [http ://boto.s3.amazonaws.com/s3_tut.html#storing-data](http://boto.s3.amazonaws.com/s3_tut.html#storing-data)

```
from boto.s3.connection import S3Connection
from boto.s3.key import Key
import subprocess

conn = S3Connection()
buckets = conn.get_all_buckets()
bucket = buckets[0]   # assuming you have one bucket created

output = subprocess.check_output(["echo", "Hello World!"])
k = Key(bucket)
k.key = 'test'
k.set_contents_from_string(output)  # should be saved on S3

k.get_contents_as_string()          # should retrieve the string 
```

# php - PHP 5.4 无法自行确定时区

> ID：11747709
> 
> 赞同：12
> 
> 时间：2012-07-31T19:37:34.390
> 
> 标签：php, datetime, timezone

我只是想对此进行一些澄清。PHP 5.4 消除了 TZ 环境变量和过去的“猜测” `date_default_timezone_get`。所以现在在我看来，根本没有办法获得服务器的时区。

所以我的问题是：是否可以在 PHP 5.4 中获取服务器时区？我知道我可以在 php.ini 中手动设置它，但是当有一台完全能够知道现在几点的计算机时，这似乎有点愚蠢。我希望答案是“不”，所以也许有人可以解释为什么编程语言在这种情况下无法确定其时区。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T21:09:02.200

没有可靠的方法来猜测每个系统上的时区。不同的系统使用不同的约定，有时甚至不同的时区定义（例如 Unix 和 Windows），有时有冲突的时区说明符（相同的 3 个字母的区域缩写在不同的地方可能意味着不同的东西）。因此，如果您想拥有可在系统之间移植的代码，唯一可靠的方法就是询问用户。例如，请参阅此线程： [http](http://marc.info/?t=132356551500002&r=1&w=2) ://marc.info/?t=132356551500002&r=1& w=2 关于它的一些问题（查找来自 Derick Rethans 的电子邮件 - 他是 PHP 日期时间扩展维护者）。

如果您有办法找出您信任的时区 - 例如 TZ 变量 - 那么您总是可以这样做`date_default_timezone_set($_SERVER['TZ']);`。但是总的来说，这不是一种可靠的方法，因此必须由您决定是否信任它，PHP 无法为您服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T21:26:02.303

如果你看[这里，](http://lxr.php.net/xref/PHP_5_3/ext/date/php_date.c#guess_timezone)你会看到 PHP 5.3 中的代码，它试图猜测系统时区。没有那么多，但似乎消除猜测的原因主要与 DST 有关，因为这似乎是问题出现的地方。

整个猜测过程的细分如下所示：

*   检查它是否已经被全局定义（php.ini 或之前的猜测）（第 851-853 行）
*   检查`TZ`环境变量（根据我的经验很少定义）（第 855-858 行）
*   从 php.ini检查`date.default_timezone`（应该已经定义的特殊情况）（第 860-872 行）
*   尝试通过比较 与 来猜测系统中的时[`time()`](http://pubs.opengroup.org/onlinepubs/009695299/functions/time.html)区[`localtime()`](http://pubs.opengroup.org/onlinepubs/009695299/functions/localtime.html)。规范似乎说设置时区是可选的，因为此调用的线程版本可能存在问题（第 873-890 行）
*   Win32：调用 WinAPI 函数[`GetTimeZoneInformation()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724421%28v=vs.85%29.aspx)并尝试确定系统时区（第 893-928 行）
*   Netware：检查`_timezone`值是否已定义（第 929-937 行）
*   如果上述检查均未成功，则回退到 UTC

我只能推测，但也许他们只是将其删除，因为这是一个猜测，并不总是可靠的。

同样由于 PHP 的流行，它安装在几乎所有基于 Linux 的共享托管计划中，其中客户通常与服务器不在同一时区，因此对于这些人来说，回退到服务器时区并不比默认使用 UTC 更好。然后它只会引起混乱，因为这些客户必须来 SO 询问为什么 PHP 的时间是错误的。

我对 C 和标准不够熟悉，但似乎基于`localtime`多线程代码猜测时区有问题，或者在某些情况下不可用。由于在非 Windows 平台上，这是确定时区的最佳方法，如果说一半时间它不返回任何内容或导致多线程 PHP 出现问题，那么这样做是没有意义的。

当然，在时区和偏移量因一年中的时间而异的某些地方存在 DST 问题。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T19:40:37.880

不，目前无法在 PC 上检索时区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T20:49:02.997

我最近从头开始为一个项目构建了几台服务器。由于之前在服务器使用本地时区的其他项目中的经验，我选择强制每台服务器使用“UTC”时区。尽管这导致日志文件关闭 7 小时（UTC - PST），但它确实消除了设置本地时区导致的不一致（来自上一个项目）。

强制一致性在操作系统和应用层被证明是有用的。对于 OS 层，所有日志文件条目都可以从一个集中位置（通过 udp 上的 syslog）查看，而不管它们的物理位置如何。在应用层，将每个时间戳存储为 UTC 更容易，然后在渲染上为指定时区的用户进行转换。这种单向转换比双向转换要简单得多，在双向转换中，您必须在保存时将时间戳从服务器的本地时区转换为 UTC，然后在渲染时将其转换为用户选择的时区。

因此，除非有非常令人信服的理由让您的服务器了解时区，否则我会选择坚持使用 UTC，这是 5.4 之前的默认设置：“如果上述方法均不成功，则 date_default_timezone_get() 将返回 UTC 的默认时区。 "

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T21:17:24.133

这只是一个疯狂的猜测。您能否通过以下方式获取时区：

`date('H', 0);`或类似的东西？我的意思是，由于 unixtime 时间戳在所有地区都是相同的，但`Hour`不同，你不应该能够根据小时知道使用哪个时区吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T22:17:46.613

在 Windows 服务器上，可以通过一些数学运算获得本地系统时区：

```
<?php
  date_default_timezone_set('UTC');

  $nowUTC = new DateTime();
  $nowSys = new DateTime(exec('echo %time%'));
  $offset = $nowUTC->diff($nowSys);

  echo $nowUTC->format('H:i:s') . '<br />';
  echo $nowSys->format('H:i:s') . '<br />';
  echo $offset->format('%H');
?> 
```

在编写此代码的输出时，从我的语言环境 (UTC-05) 来看：

```
22:16:41
17:16:41
05 
```

有一个警告：时间戳有时会偏离 1 秒，导致`$offset`变量为 4:59:59。始终如一地获得正确的时区应该做一些四舍五入以确保安全。

# java - 方法具有（意外）与另一种方法相同的擦除

> ID：11747717
> 
> 赞同：2
> 
> 时间：2012-07-31T19:37:53.453
> 
> 标签：java, generics, compiler-errors, instanceof, type-erasure

我阅读了有关此的所有其他问题，但我不明白为什么在我的情况下会出现类型擦除。我有

```
public <T extends Aclass&Binterface> boolean test(final T param) {
    ...
}

public boolean test(final Aclass pOtherPPShape) {
    ...
} 
```

方法 test(Aclass) 与 ClassName 类型中的另一个方法具有相同的擦除测试 (Aclass)

我应该如何编写两种对同一个类进行操作但一种具有接口而一种没有接口的方法？（我无法修改 AClass，因为它来自外部库，并且有很多子类型可以使用此代码）

在这种情况下使用 instanceof 是否正确？

编辑：我在碰撞测试中使用它。如果传递的形状是接口的实例，我会得到一个碰撞掩码（带有接口的方法），然后调用“检查器”，如果不是，我想实例化一个虚拟碰撞掩码，它会做一些不同的事情并传递给“检查器”的相同方法（具有 2 个形状和 2 个 collisonmasks 作为参数）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:49:15.897

您已经认识到问题与类型擦除有关，并且您不能以类型擦除的方式“重载”一个参数（类型擦除 - 您将被模拟）。但是，你说，

## 泛型类型签名是不同的，为什么会发生冲突？

这两种类型是不同的`T extends Aclass&Binterface`，`Aclass`不是吗？

嗯，是的，也不是。虽然实际上它们是不同的，但*在类型擦除下它们并不明显***1。一个优秀的资源解释说：“[在类型擦除的过程中，编译器用最左边的边界替换类型参数](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#FAQ101A)”。在您的情况下是`Aclass`，这导致了两种方法之间的冲突。

解释表明...

## 解决方案：形式化combound**2泛型类型声明以建立唯一的最左边界

替换`<T extends Aclass&Binterface>`为`<T extends AandB>`, where`AandB`是这样创建的：

1.  `interface Ainterface`使用`Aclass`方法签名定义

2.  有`Aclass implement Ainterface`

3.  定义`interface AandB extends Ainterface, Binterface`.

## 或者

你可以使用`instanceof`.

* * *

**1 “因为较长的波长会被大气中的粒子折射”，另一个优秀资源 Duncan Jones 说。

**2 那是`compound`，因为我无法抗拒这种乐趣：-/

# java - 将自定义列添加到 Eclipse 问题视图

> ID：11747720
> 
> 赞同：1
> 
> 时间：2012-07-31T19:37:58.810
> 
> 标签：java, eclipse, eclipse-plugin

我正在创建一个 Eclipse 插件。我想在 Eclipse 问题视图中添加一列，允许我从预设选项的下拉菜单中进行选择。我将如何添加此功能？我想将它添加到当前的 Eclipse 问题视图中，而不必创建我自己的自定义问题视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T06:25:15.950

可能无法在此处添加列，因为该视图的逻辑内容由其内容提供者提供。

但是，您至少可以通过使用[对象贡献](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/workbench_basicext_popupMenus.htm)向问题（即问题视图中显示的真实对象）添加操作。它们将出现在问题的弹出菜单中，并且它们的优点是*无处不在*，存在问题的弹出窗口，而不仅仅是在问题视图中。

您还可以通过向问题视图的工具栏添加一个新按钮或菜单项来解决您的问题（使用所谓的[视图操作](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/workbench_basicext_viewActions.htm)），然后可以调用您的选择。

如果您想比较这些不同的替代方案，您可能还想看一下如何[扩展 Eclipse 工作台 UI](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/workbench_basicext.htm)的一般概述。

# windows - 如何为滚动条设置 nTackPos 值

> ID：11747721
> 
> 赞同：0
> 
> 时间：2012-07-31T19:38:05.893
> 
> 标签：windows, winapi, scrollbar

如何设置`nTrackPos`滚动条的值？该[`SetScrollInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787595%28v=vs.85%29.aspx)函数忽略它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:49:57.103

该[结构](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787537.aspx)`nTrackPos`的成员不是应用程序设置的，它是在用户拖动滚动条时修改的（你会得到一个/消息，可以使用GetScrollInfo查询它）。[`SCROLLINFO`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787537.aspx)`WM_VSCROLL``WM_HSCROLL`

如果你想改变滚动条的位置的话你需要设置`nPos`。

# servicestack - 入站复杂 DTO 具有空子对象

> ID：11747723
> 
> 赞同：0
> 
> 时间：2012-07-31T19:38:08.587
> 
> 标签：servicestack

奇怪的问题 - 我有一个复杂的 DTO，有几个子对象，声明如下：

[代码]

```
public class ScoutingReportProPitcher
{
    [DataMember]
    public Guid ReportID { get; set; }

    [DataMember]
    public ScoutingReport Report { get; set; }
    [DataMember]
    public ScoutingReportPro Pro { get; set; }
    [DataMember]
    public ScoutingReportPitcher Pitcher { get; set; }
} 
```

[/代码]

一切都被正确地发送给客户端。当他尝试在 PUT 或 POST 中将数据发送回时，子对象未填充。我想也许我必须在 DTO 构造函数中初始化子对象 - 但这只是导致入站对象具有子对象所有空属性。

当我运行 JsonSerializer.DeserializeFromString 时，我的 UI 开发人员向我发送了他发布给我的 JSON 对象，该对象似乎已正确填充。

我还能看什么来确定为什么对象没有从外部正确传递到 POST 方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:05:30.563

你能告诉我们你试图发送的 json 数据吗？还有发送 PUT 和 POST 的代码是什么样的。

您是否尝试过使用 Fiddler 并查看数据？[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)

要查看代码中的原始数据，您需要拦截输入流并防止发生反序列化。一旦你修复它，你会想要撤消它。

首先用 IRequiresRequestStream 装饰你的 DTO 类

```
public class ScoutingReportProPitcher : IRequiresRequestStream  
{
    public System.IO.Stream RequestStream { get; set; }
    ....
 } 
```

其次，在 OnBeforeExecute(T request) 方法中，您可以通过使用断点记录或检查来达到 json 数据的峰值。

```
protected override void OnBeforeExecute(T request)
{
    var rawData = base.RequestContext.Get<IHttpRequest>().GetRawBody();
    base.OnBeforeExecute(request);
} 
```

有关更完整的说明，请参见此处：[https ://groups.google.com/d/topic/servicestack/l9qFvZNbuT0/discussion](https://groups.google.com/d/topic/servicestack/l9qFvZNbuT0/discussion)

# winapi - ReadDirectoryChangesW 文件移动解决方法

> ID：11747726
> 
> 赞同：3
> 
> 时间：2012-07-31T19:38:14.107
> 
> 标签：winapi, filesystems, filesystemwatcher, readdirectorychangesw

**背景**

用于监视文件系统更改的 Windows API [ReadDirectoryChangesW](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365465%28v=vs.85%29.aspx)无法可靠地报告文件*移动*操作。相反，它只是通知 Deleted + Created。

**问题**

可以实施哪些变通方法来在 Windows 上实现这种“移动事件”效果？我敢肯定我不是第一个处理这个问题的人。

* * *

我自己的第一个想法是将所有内容的 SHA1 和保存在受监视的目录（可能在 SQLite 数据库中）并将更改的文件与 SHA1 进行比较，这样如果发生删除+创建并且它们的 sha1 和匹配，我们可以放心地假设它是一个移动操作。不过，这感觉有点矫枉过正，我想知道是否其他人已经找到了更好的解决方法。

有任何想法吗？

# ruby-on-rails - 通过关联查找与具有 has_many 的用户关联的所有记录

> ID：11747729
> 
> 赞同：1
> 
> 时间：2012-07-31T19:38:17.070
> 
> 标签：ruby-on-rails, session, collections, controller

我有以下关系：

**用户.rb**

```
has_many :ownerships
has_many :restaurants, :through => :ownerships 
```

**餐厅.rb**

```
has_many :ownerships
has_many :users, :through => :ownerships 
```

我也有一个菜单模型`belongs_to :restaurant`。

`menu`很明显，a和 a之间没有直接联系，`user`除非你通过`restaurant`.

我正在尝试使它只显示由创建的菜单`user`。

通过这种方法，我只能显示当前登录用户创建的餐厅：

**restaurant_controller.rb**

```
class RestaurantsController < ApplicationController

  # GET /restaurants
  # GET /restaurants.json
  def index
    if current_user.has_role? :admin
      @restaurants = Restaurant.all
    elsif current_user.has_role? :user
      @restaurants = current_user.restaurants
    end
  end 
```

**我怎样才能通过通过在我的`menus`控制器下做同样的事情`restaurant`？**

我试过了：

```
@menus = current_user.restaurants.menus 
```

和

```
@menus = current_user.restaurants.each.menus 
```

除其他外，但似乎没有任何效果。我总是正确地`undefined method`获得 nil:NilClass `, which I understand; I'm not getting to the`menus` 的菜单。

我正在考虑制作一个循环，通过每个循环`restaurant`并添加`menu`附加到它，但我不是 100% 确定如何在`menu`控制器中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:43:30.030

如果您`user`像这样向模型添加新关联：

```
class User
  has_many :menus, :through => :restaurants 
```

当您执行 a`current_user.menus`时，它会自动从您拥有的用户那里获取餐厅的所有菜单。希望能帮助到你。

# java - 安卓java活动

> ID：11747730
> 
> 赞同：0
> 
> 时间：2012-07-31T19:38:17.137
> 
> 标签：java, android, android-activity

我有这两种方法，当“something1*”发生时我要暂停这个主要活动，然后在主要活动暂停时更改为 someactivity1*。但我的问题是它不会改变我的活动，它会冻结我的主要活动并且它没有做任何其他事情。这很可能是因为我破坏了线程，但我看不到任何解决方案，我不确定。（方法2在循环中）对不起我的英语并感谢您的帮助

```
 public void method1(){

      super.onPause();
      run = false;
      while(){
        try{
          thread.join();
        }catch(InterruptedException e){
          e.printStackTrace();
        }
     }

      thread1 = null;

     Intent i = new Intent(someactivity1*);
     startActivity(i);

   }

   //the method2 is inside a loop
   public void method2(){

     if(something1*){

       onPause();

     }

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:41:46.943

你说`thread.join()`。这使得主线程，也就是 UI 线程，等待被调用的线程`thread`完成。换句话说，您正在使用它锁定您的应用程序。

你为什么要管理暂停你的应用程序呢？Android 自己管理一切。只需启动活动，不要`onPause()`在方法中调用任何地方，除了`YourActivity.onPause()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:41:47.037

你绝对不应该调用 onPause。这是一个操作系统回调方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:48:22.380

暂停活动的不是您，而是操作系统，因此您根本不必调用 onPause() 方法。

我认为当“某事”发生并且前一个活动暂停时，您应该简单地开始另一个活动。希望这有帮助。

# .net - .net 中 openssl 变量 x509name 的版本

> ID：11747733
> 
> 赞同：0
> 
> 时间：2012-07-31T19:38:30.427
> 
> 标签：.net, windows, dll, openssl, version

.NET 正在寻找旧版本的 OpenSSL。安装最新版本时寻找 1.0.0a。方法被识别，但不会在正在运行的项目上执行。 ![运行时出错](../Images/18ecdba1ceec0212b19324a4dba1ad9f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:36:10.563

正确安装的步骤...获取最新版本。尝试最新版本的 OpenSSL.NET ( [0.5](http://sourceforge.net/projects/openssl-net/files/openssl-net/0.5/) )

将 libeay32.dll 和 ssleay32.dll 直接放到项目文件夹中，保证工作正常。然后引用 ManagedOpenSSL.dll。

[为什么-doesnt-net-find-the-openssl-net-dll](https://stackoverflow.com/questions/1396164/why-doesnt-net-find-the-openssl-net-dll)

# android - 为什么 arm-linux-androideabi-gcc 给出 iostream 错误

> ID：11747734
> 
> 赞同：5
> 
> 时间：2012-07-31T19:38:30.453
> 
> 标签：android, gcc, linker, arm

我在我的计算机上安装了 arm-linux-androideabi-gcc，但是当我尝试编译一个简单的地狱世界时，它会给出错误（我选择不使用 ndk-build）。我只想从命令行编译...

```
#include <iostream>

using namespace std;

int main (){
    return 0;
} 
```

我收到了这个错误：

> 错误：iostream：没有这样的文件或目录

我有 arm-linux-androideabi-gcc 在`~/android-ndk-r8b/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin`.

我试过包括`-I ~/android-ndk-r7b/platforms/android-9/arch-arm/usr`

我也试过包括`-lstdc++`只是为了看看它是否有效，但没有......

```
./arm-linux-androideabi-g++ -o ff first.cpp -I /home/hari/android-ndk-r7b/platforms/android-9/arch-arm/usr -lstdc++ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T19:56:49.963

首先，您需要创建独立的工具链：

```
make-standalone-toolchain.sh --platform=android-14 --install-dir=standalone-toolchain --ndk-dir=$ANDROID_NDK_PATH 
```

导出路径：

```
export PATH=$TOOLCH/standalone-toolchain/bin:$PATH 
```

然后构建文件：

```
arm-linux-androideabi-g++ -o test-new test.cpp 
```

注意：使用 NDK 的最新版本 8b 发布：[http ://code.google.com/p/android/issues/detail?id=35279](http://code.google.com/p/android/issues/detail?id=35279)

```
arm-linux-androideabi-g++ -o test-new test.cpp --sysroot=$TOOLCH/sysroot
-I$TOOLCH/lib/gcc/arm-linux-androideabi/4.6.x-google/include
-I$TOOLCH/lib/gcc/arm-linux-androideabi/4.6.x-google/include-fixed
-I$TOOLCH/arm-linux-androideabi/include/c++/4.6
-I$TOOLCH/arm-linux-androideabi/include/c++/4.6/arm-linux-androideabi
-I$TOOLCH/sysroot/usr/include 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:43:26.920

看看错误： `iostream: No such file or directory`

`#include "iostream"`应该是#include`#include <iostream>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T07:47:51.490

根据[http://code.google.com/p/android/issues/detail?id=35279](http://code.google.com/p/android/issues/detail?id=35279)，这是独立工具链的错误。我认为最好的解决方法是 `ln -s $TOOLCH/arm-linux-androideabi/include/c++/4.6 $TOOLCH/arm-linux-androideabi/include/c++/4.6.x-google`

# c# - WPF 中的 Windows 8 选项卡控件样式

> ID：11747746
> 
> 赞同：2
> 
> 时间：2012-07-31T19:39:07.607
> 
> 标签：c#, wpf, windows, silverlight, microsoft-metro

我正在尝试在我的应用程序中获取 Windows 8 (Metro UI) 样式选项卡控件，类似于[this](http://blogs.msdn.com/b/avip/archive/2011/09/19/windows-8-development-tip-tab-control.aspx)。但是，列出的代码似乎只适用于 Silverlight。我正在使用 WPF。有什么简单的方法可以至少获得类似的样式吗？我可以不用花哨的转换，但我希望标签看起来像 Metro UI 的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T22:19:58.137

经过一番挖掘，我发现[了 MahApps](http://mahapps.com/MahApps.Metro/)，它非常容易安装到现有项目中（在 VS 中使用 NuGet），并且文档和使用非常简单！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:13:43.987

你可以检查[Elysium](http://elysium.codeplex.com/)。我从未使用过它，但它似乎可以满足您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T20:05:35.653

Metro Style Application 具有内置的样式、动画和控件（FlipView、GridVIew 和 ListView）。即使在 Silverlight 中，您也无法使用这种样式。因此，如果您使用 WPF 或 Silverlight，您必须定义自己的样式以使其与此类似。

因此，让您的应用程序采用 Metro 风格（Xaml 或 HTML）或为您的选项卡控件（SL 或 WPF）定义您自己的风格 这篇文章是关于WPF 和 Silverlight 中不存在的[新 Metro Style Control的](http://www.silverlightshow.net/items/Windows-8-Metro-Dealing-with-new-metro-controls.aspx)

谢谢

# magento - Magento：目录产品的单个自定义属性的多行？

> ID：11747749
> 
> 赞同：0
> 
> 时间：2012-07-31T19:39:19.720
> 
> 标签：magento, custom-attributes

这就是我想要做的......

我们商店中的给定商品可能位于多个数字“产品组”中。我们还需要使用这些产品组来限定/取消这些项目的优惠券和销售规则。

如果我通过 EAV 将“产品组”定义为自定义属性，我能做的最好的是将后端模型设置为“数组”，并将多个产品组保存为 varchar 字段中的逗号分隔文本。这显然不太理想（甚至不会在加载时转换回数组）。

有没有办法为产品的自定义属性提供真正的一对多数据库行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:08:47.233

您是否有理由不能只创建二级类别结构并将类别设置为不在导航中显示？另一种选择是为每个产品组使用一个新的属性集。听起来您使用属性数组过于复杂了，这两种解决方案都允许您使用优惠券和销售规则。

# javascript - 查找具有特定数据属性 jQuery 的元素

> ID：11747750
> 
> 赞同：19
> 
> 时间：2012-07-31T19:39:26.933
> 
> 标签：javascript, jquery, html

我知道我总是可以遍历 DOM 树并检查数据字段的每个元素以及值是否正确，但我想要一个更干净的解决方案。例如

```
 <div id="theDiv">
       <div>
         <span data-num="3" ></span>
         OTHER HTML
       </div>
       <div>
         <div><span data-num="23"></span><div>
         OTHER HTML
       </div>
       <div>
         <span data-num="3"></span>
         OTHER HTML
       </div>
    </div> 
```

是否有一个 jQuery one liner 来查找 data-num=3 的所有跨度？我知道我可以找到所有跨度

```
 $("#theDiv").find(span).each(function(e) { ... }); 
```

但我想要类似的东西

```
 $("#theDiv").find(span > data-num=3).each(function(e) { ... }); 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-31T19:41:56.080

使用[**属性等于选择器**](http://api.jquery.com/attribute-equals-selector/)

```
 $("#theDiv span[data-num='3']") 
```

[**尝试一下！**](http://jsfiddle.net/FfjZ9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:54:29.010

仅用于示例（过滤器）

```
$('#theDiv span').filter(function(){ return $(this).data("num") == 3}); 
```

# php - PDO多过滤sql查询

> ID：11747756
> 
> 赞同：2
> 
> 时间：2012-07-31T19:40:04.540
> 
> 标签：php

有没有一种更简单的方法可以让我编写代码并执行相同的操作而无需进行这么多查询？我正在尝试添加分页（此处未包含在代码中），它适用于我的 ALL 查询，但 AND / OR 查询给出了有趣的结果，并且变得令人头疼。除此之外，结果的过滤效果很好，只需要分页。

```
$filter = isset($_POST['filter']) ? $_POST['filter'] : null;
$status = isset($_POST['status']) ? $_POST['status'] : null;

if(empty($filter) && empty($status)) {

    //echo 'ALL query';
    $sql = 'SELECT * FROM _product JOIN _module_type ON module_type = module_id';
    $sth = $link->prepare($sql);
    $sth->execute(array());
    $result = $sth->fetchall();

} else {
    // display result if filter AND status are selected
    if(!empty($filter) && !empty($status)) {

        //echo 'AND query';
        $sql = 'SELECT * FROM _product JOIN _module_type ON module_type = module_id WHERE module_type = :filter AND product_status = :status';
        $sth = $link->prepare($sql);
        $sth->execute(array(':filter' => $filter, ':status' => $status));
        $result = $sth->fetchall();

    } else {
        // display result if filter OR status are selected
        if(!empty($filter) || !empty($status)) {

            //echo 'OR query';
            $sql = 'SELECT * FROM _product JOIN _module_type ON module_type = module_id WHERE module_type = :filter OR product_status = :status';
            $sth = $link->prepare($sql);
            $sth->execute(array(':filter' => $filter, ':status' => $status));
            $result = $sth->fetchall();

        }
    }
}

//test sql
echo $sql.'<br />';

$bgcolor = '';
foreach($result as $key => $value) {

    if(($bgcolor=='#ffffff') ? $bgcolor='#f1f1f1' : $bgcolor='#ffffff') {

    echo '<tr bgcolor="'.$bgcolor.'">';
    echo '<td>'.$value['product_id'].'</td>';
    echo '<td>'.$value['product_name'].'</td>';
    echo '<td>'.$value['product_type'].'</td>';
    echo '<td>'.$value['module_name'].'</td>';
    echo '<td>'.$value['product_price'].'</td>';
    echo '<td>'.$value['product_status'].'</td>';
    echo '</tr>';
    }
}
    echo '</table>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:51:43.347

我的第二个想法是：

```
$sql = 'SELECT * FROM _product JOIN _module_type ON module_type = module_id WHERE';
if(!empty($filter) || !empty($status)){
    $sql .= ' module_type = :filter '.(!empty($filter) && !empty($status) ? 'AND' : 'OR').' product_status = :status';
    $sth = $link->prepare($sql);
    $sth->bindValue(':filter', $filter);
    $sth->bindValue(':status', $status);
}else{ $sth = $link->prepare($sql); }
$result = $sth->execute(); 
```

它需要测试，正如事实所说，您可能不需要 OR，但这取决于您的表单和过滤的工作方式，但我将把它留在那里，它应该为您提供进入下一阶段的指示。

再次编辑：

忍不住，这是第三种可能性：

```
$params = array();
$where = array();

if(!empty($filter)){
    $params[':filter'] = $filter;
    $where[] = 'module_type = :filter';
}
if(!empty($status)){
    $params[':status'] = $status;
    $where[] = 'product_status = :status';
}

$sql = 'SELECT * FROM _product JOIN _module_type ON module_type = module_id'.(sizeof($where) > 0 ? ' WHERE '.implode(' AND ', $where) : '');

$sth = $link->prepare($sql);
foreach($params as $k=>$v) $sth->bindValue($k, $v);
$result = $sth->execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:56:30.947

我的想法是迭代`$_POST`数组并仅绑定您需要的变量。

您误解了 AND 和 OR 的使用。如果只选择了两者之一，则不需要对第二个进行 OR 操作！

```
<?php

    /**
     * @param PDO   $pdo        Database connection
     * @param array $parameters Parameters (status, filter)
     *
     * @return array            The resultset returned from the query
     */
    function select_product(\PDO $pdo, array $parameters = array()) {
        $query = <<<MySQL
SELECT *
  FROM _product
  JOIN _module_type
    ON module_type = module_id

MySQL;
        if (!empty($parameters)) {
            $query .= "WHERE ";
            $where_clauses = array();
            foreach ($parameters as $param => $value) {
                $where_clauses[] = "$param = :$param";
            }
            $where_clauses = implode(" AND ", $where_clauses);
            $query .= $where_clauses;
        }

        $stmt = $pdo->prepare($query);
        foreach ($parameters as $param => $value) {
            $stmt->bindValue(":$param", $value);
        }
        $stmt->execute();

        $results = $stmt->fetchAll(PDO::FETCH_ASSOC);
        return $results;
    }

    try {
        $db = new PDO("mysql:host=localhost;dbname=database_name", "user", "password");
        $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
        $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        select_product($db, $_POST);
    }
    catch (PDOException $e) {
        die("Database problem occurred! " . $e->getMessage());
    } 
```

该代码**不会**按原样为您工作，因此不要立即复制/粘贴它。

此函数假定**表单名称与数据库名称匹配**，并将相应地采取行动。如果您的列名是`module_type`，请命名与之匹配的表单字段`module_type`。

此类代码的优点是您可以添加更多列和更多过滤器，并且您不必更改一行代码:)

# c# - 我在我的项目中添加了一个新类，并收到一条错误消息，提示“Program.Main() 有多个条目”。为什么？

> ID：11747761
> 
> 赞同：38
> 
> 时间：2012-07-31T19:41:01.287
> 
> 标签：c#

问题是，在我添加了新类之后，当我构建解决方案时出现了错误。有什么问题？

在 Form1 中，我还没有任何代码。

我刚刚添加了一个新类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using OpenHardwareMonitor.Hardware;

namespace OpenHardwareMonitorReport
{

    class Program
    {

        static void Main(string[] args)
        {
            Computer computer = new Computer();
            computer.Open();

            var temps = new List<decimal>();
            foreach (var hardware in computer.Hardware)
            {
                if (hardware.HardwareType != HardwareType.CPU)
                    continue;
                hardware.Update();
                foreach (var sensor in hardware.Sensors)
                {
                    if (sensor.SensorType != SensorType.Temperature)
                    {
                        if (sensor.Value != null)
                            temps.Add((decimal)sensor.Value);
                    }
                }
            }

            foreach (decimal temp in temps)
            {
                Console.WriteLine(temp);
            }
            Console.ReadLine();
        }
    }
} 
```

然后我看到文件*Program.cs*和 Main() 上的错误：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;

namespace NvidiaTemp
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form1());
        }
    }
}

Error 2  Program 'D:\C-Sharp\NvidiaTemp\NvidiaTemp\NvidiaTemp\obj\x86\Debug\NvidiaTemp.exe' has more than one entry point defined: 'NvidiaTemp.Program.Main()'. Compile with /main to specify the type that contains the entry point. D:\C-Sharp\NvidiaTemp\NvidiaTemp\NvidiaTemp\Program.cs  14  21  NvidiaTemp 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2019-01-24T15:17:12.070

[在将xUnit](https://en.wikipedia.org/wiki/XUnit)测试类添加到我的 .NET Core 2.1 项目后，我遇到了这个问题。

下面的文章详细解释了*原因*，并提供了对我有用的答案 -[这里](https://andrewlock.net/fixing-the-error-program-has-more-than-one-entry-point-defined-for-console-apps-containing-xunit-tests/)。

基本上，编译器会自动为新类生成一个`Main`。您可以在 .csproj 文件中提供指令以防止这种情况发生：

`<GenerateProgramFile>false</GenerateProgramFile>`

将此添加到您的`<PropertyGroup>`部分并重新编译。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-08-14T21:48:07.610

其他人指出您有两个静态 void Main 方法。有两个简单的解决方法，一个是明显的，一个是尚未特别提及的：

1.  将 one 重命名为其他任何名称，例如`Main1`,`NotMain`等。
2.  要设置[Habib 提到的](https://stackoverflow.com/questions/11747761/i-added-a-new-class-to-my-project-and-got-an-error-saying-program-main-has-mo/11747835#11747835)*/main*编译器选项，只需右键单击解决方案资源管理器中的项目节点，选择属性，然后在应用程序部分的下拉列表中选择“启动对象”。

使用解决方案 2，您可以在不同的类中拥有相同`Main(string[] args)`的签名，而无需编译器抱怨。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-07-31T19:46:07.503

AC# 程序只能有一个 Program.Main()。main 是程序启动时运行的第一个方法，所以编译器需要知道哪个是真正的，如果你有两个它就不能。

看起来您正在制作一个 Windows 应用程序。您应该将代码添加到现有主窗体中，或者将其添加到主窗体触发的事件处理程序中。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2019-01-26T07:53:53.803

有两个*Main*方法就可以了。如果您收到您提到的错误，那么您只需告诉 Visual Studio 您要使用哪一个。

1.  右键单击您的项目以查看属性。
2.  转到“*应用程序”选项卡，然后从“**启动对象*”下拉列表中选择所需的入口点。

这是一个示例，其中我有两个入口点，具体取决于我要如何开发测试程序集。

[![在此处输入图像描述](../Images/5737e7e3d7a41b131f76861a7d177867.png)](https://i.stack.imgur.com/mlKYc.png)

[![在此处输入图像描述](../Images/5dfe339e53a25c1de20426ffdfc568fc.png)](https://i.stack.imgur.com/ymcix.png) [![在此处输入图像描述](../Images/05127e27912b774294866a6aee56949c.png)](https://i.stack.imgur.com/cDy3e.png)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-07-31T19:44:12.323

.NET 程序应该只有*一个*静态`Main`方法。

你有两个，编译器不知道使用哪一个。

重命名粘贴的一个，除非您希望*它*成为应用程序的入口点（在这种情况下，重命名另一个），或者使用指定要使用的方法的开关来编译*应用*程序`/main`传递。*`Main`*

 *有关更多详细信息，请参阅MSDN 上的[Main() 和命令行参数（C# 编程指南） ：](http://msdn.microsoft.com/en-us/library/acy3edy3.aspx)

> **Main 方法是 C# 控制台应用程序或 Windows 应用程序的入口点**。（库和服务不需要 Main 方法作为入口点。）。启动应用程序时，Main 方法是调用的第一个方法。
> 
> **C# 程序中只能有一个入口点。**如果您有多个具有 Main 方法的类，则必须使用 /main 编译器选项来编译程序，以指定将哪个 Main 方法用作入口点。有关详细信息，请参阅 /main（C# 编译器选项）。

（强调我的）

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-07-31T19:46:09.390

您有两个主要方法，这就是您收到此错误的原因。

来自[MSDN - 主要方法](http://msdn.microsoft.com/en-us/library/acy3edy3)

> C# 程序中只能有一个入口点。如果您有**多个具有 Main 方法的类，则**必须使用 /main 编译器选项来编译程序，以指定将哪个 Main 方法用作入口点。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-11-15T11:17:05.673

可以通过添加`StartupObject`到您的 .cspoj来选择入口点

```
<StartupObject>MyApplication.Core.Program</StartupObject> 
```

请参见[-main（C# 编译器选项）](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/compiler-options/main-compiler-option)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-02-20T11:30:10.827

如果您已修复错误并且 Visual Studio 仍然给您错误消息，则值得删除输出文件夹（默认情况下为“bin”和“obj”），然后重新构建项目。就我而言，只需单击“重建”并没有帮助。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-01-10T09:39:47.837

当您在项目中添加一个新类并编写*Main*方法时，当您当时运行代码时，它会显示“找到多个 Main 方法”之类的错误，那么您只需要：

1.  右键单击“解决方案资源管理器”中显示的项目名称，然后
2.  进入*Application*并在*Startup object*下拉菜单中选择您要运行的类。如果您在其中找不到您的类名，那么只需*重新启动*您的 IDE 并再次按照上述步骤操作。*

# opengl - 双缓冲不起作用OpenGL

> ID：11747768
> 
> 赞同：1
> 
> 时间：2012-07-31T19:42:10.087
> 
> 标签：opengl, doublebuffered

我想让它成为双缓冲，但它仍然在闪烁。它基本上是 OpenNI UserTracker 示例的修改版本，它在我的计算机上运行良好，但我认为我没有删除或显着更改任何重要的 OpenGL 命令，使其运行方式不同。我在我的电脑上运行 Ubuntu 10.04。

```
#include <GL/glut.h>
#include <GL/glx.h>
void DrawRectangle(float topLeftX, float topLeftY, float bottomRightX, float bottomRightY){
    GLfloat verts[8] = { topLeftX, topLeftY,
        topLeftX, bottomRightY,
        bottomRightX, bottomRightY,
        bottomRightX, topLeftY };
    glVertexPointer(2, GL_FLOAT, 0, verts);
    glDrawArrays(GL_TRIANGLE_FAN, 0, 4);
}
void DrawTexture(float topLeftX, float topLeftY, float bottomRightX, float bottomRightY){
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
    glTexCoordPointer(2, GL_FLOAT, 0, texcoords);
    DrawRectangle(topLeftX, topLeftY, bottomRightX, bottomRightY);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);
}
void DrawLimb(KinectUserData player, int a, int b){
    glBegin(GL_LINES);
        glVertex3d((player.joints[a].x/500), (player.joints[a].y/400), 0);
        glVertex3d((player.joints[b].x/500), (player.joints[b].y/400), 0);
    glEnd();
}
void Draw(KinectData kdata){
    glColor4f(0.75,0.75,0.75,1);
    glEnable(GL_TEXTURE_2D);
    DrawTexture(320,240,0,0);   
    glDisable(GL_TEXTURE_2D);
    for (uint i = 0; i < kdata.size(); i++){
        glColor4f(1-Colors[kdata[i].getID()%nColors][0], 1-Colors[kdata[i].getID()%nColors][1], 1-Colors[kdata[i].getID()%nColors][2], 1);
        DrawLimb(kdata[i], 0, 1);
        DrawLimb(kdata[i], 1, 3);
        DrawLimb(kdata[i], 3, 4);
        DrawLimb(kdata[i], 4, 5);
        DrawLimb(kdata[i], 1, 6);
        DrawLimb(kdata[i], 6, 7);
        DrawLimb(kdata[i], 7, 8);
        DrawLimb(kdata[i], 3, 2);
        DrawLimb(kdata[i], 6, 2);
        DrawLimb(kdata[i], 2, 9);
        DrawLimb(kdata[i], 9, 10);
        DrawLimb(kdata[i], 10, 11);
        DrawLimb(kdata[i], 2, 12);
        DrawLimb(kdata[i], 12, 13);
        DrawLimb(kdata[i], 13, 14);
        DrawLimb(kdata[i], 9, 12);
    }
}
void glutDisplay(void){
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glMatrixMode(GL_PROJECTION);
    glPushMatrix();
    glLoadIdentity();
    glDisable(GL_TEXTURE_2D);
    Draw(data); //data is correctly intialized in other functions
    glPopMatrix();
    glutSwapBuffers();
    glutPostRedisplay();
}
void glInit(int * pargc, char ** argv){
    glutInit(pargc, argv);
    glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE | GLUT_DEPTH);
    glutInitWindowSize(GL_WIN_SIZE_X, GL_WIN_SIZE_Y);
    glutCreateWindow("Tracker");
    glutSetCursor(GLUT_CURSOR_NONE);
    glutDisplayFunc(glutDisplay);
    glDisable(GL_DEPTH_TEST);
    glEnable(GL_TEXTURE_2D);
    glEnableClientState(GL_VERTEX_ARRAY);
    glDisableClientState(GL_COLOR_ARRAY);
}
int main(int argc, char** argv){
    glInit(&argc, argv);
    glutMainLoop();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:26:29.710

> 我想让它成为双缓冲，但它仍然在闪烁。

这些是单独的问题。您的代码*正在*使用双缓冲。

闪烁很可能是由于缺乏垂直同步。不幸的是，启用/禁用 vsync 是[非常特定于平台的](http://www.opengl.org/wiki/Swap_Interval)。

# hadoop - 基于字段组合元组？

> ID：11747769
> 
> 赞同：0
> 
> 时间：2012-07-31T19:42:15.157
> 
> 标签：hadoop, apache-pig

说我有一个结构

```
{1001, {{id=1001, count=20, key=a}, {id=1001, count=30, key=b}}}
{1002, {{id=1002, count=40, key=a}, {id=1001, count=50, key=b}}} 
```

我希望它把它变成

```
{id=1001, a=20, b=30}
{id=1002, a=40, b=50} 
```

我可以使用哪些 Pig 命令来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:49:25.950

看起来您正在旋转，类似于[Pivoting in Pig](https://stackoverflow.com/questions/11578815/pivoting-in-pig/11594331#11594331)。但是你已经有一袋元组了。进行内部连接将是昂贵的，因为它会导致额外的 Map Reduce Jobs。要快速做到这一点，您需要在嵌套的 foreach 中进行过滤。修改后的代码将类似于：

```
inpt = load '..../pig/bag_pivot.txt' as (id : int, b:bag{tuple:(id : int, count : int, key : chararray)});

result = foreach inpt {
    col1 = filter b by key == 'a';
    col2 = filter b by key == 'b';
    generate id, flatten(col1.count) as a, flatten(col2.count) as b;
}; 
```

样本输入数据：

```
1001    {(1001,20,a),(1001,30,b)}
1002    {(1002,40,a),(1001,50,b)} 
```

输出：

```
(1001,20,30)
(1002,40,50) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:52:02.470

不确定你的起始关系的格式是什么，但对我来说它看起来像 (int, bag:{tuple:(int,int,chararray)})？如果是这样，这应该工作：

```
flattened = FOREACH x GENERATE $0 AS id, flatten($1) AS (idx:int, count:int, key:chararray);
a = FILTER flattened BY key == 'a';
b = FILTER flattened BY key == 'b';
joined = JOIN a BY id, b BY id;
result = FOREACH joined GENERATE a::id AS id, a::count AS a, b::count AS b; 
```

# wpf - xamdatagrid 有条件地禁用列

> ID：11747770
> 
> 赞同：1
> 
> 时间：2012-07-31T19:42:19.353
> 
> 标签：wpf, mvvm, xamdatagrid

我需要禁用一行中的特定单元格，具体取决于同一行的其他单元格中的值。

WPF 或 WPF MVVM 方案，欢迎使用这两种解决方案。

我都试过了，都没有用！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:45:39.727

如果我对你的理解正确。

您可能需要查看 Datagrid.Columns 部分中的 DataGridTemplateColumn（请参见下面的代码），因为这允许您为列/单元格设置自己的模板，然后您可以设置启用的属性。以下只是一个简单的解决方案，以后我会拥有它，以便当您更改更新模型的启用复选框时，该复选框又将启用行中的项目。

```
 <DataGrid Name="dgrgrid" AutoGenerateColumns="False">                
            <DataGrid.Columns>
                <DataGridTemplateColumn Header="Name">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBox Text="{Binding Name}" IsEnabled="{Binding Enabled}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTextColumn Header="Type" />
                <DataGridTextColumn Header="Size" />
                <DataGridTextColumn Header="Price"  />
                <DataGridCheckBoxColumn Header="Row Enabled" Binding="{Binding Enabled}" />
            </DataGrid.Columns>
        </DataGrid> 
```

对于后面的代码，我有一个名为 Cheese 的类的简单可观察集合，它具有您在下面看到的一些属性。（这是基本的 MV-VM 技术）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:35:51.097

谢谢@Grenter。我确实通过实现 Converter 类并将其实现为我的 xaml 文件中的静态资源来解决它。另外，我发现我们可以使用单元格更新或单元格更新事件并在后面的 xaml 代码中编写一些代码行来做同样的事情，我通常不喜欢这样做。

但是转换器肯定是前进的道路。

非常感谢！！！

# c# - ASP.NET 验证组消失（在 Sitefinity 用户控件中）

> ID：11747771
> 
> 赞同：1
> 
> 时间：2012-07-31T19:42:21.087
> 
> 标签：c#, asp.net, validation, user-controls, sitefinity

```
<asp:Button ID="btnSend" runat="server" Text="Go!" 
        ValidationGroup="EmailForm" onclick="btnSend_Click" />

WebForm_DoPostBackWithOptions(
new WebForm_PostBackOptions('ctl00$cphLeft$C001$btnSend', '', true, '**MISSING??**',
'', false, true)) 
```

上面首先是我们用来在表单上放置按钮的 ASP.NET 代码。下面是呈现的代码。我把失踪放在哪里**？？**，我期待ValidationGroup ...

一个细节是我们在 Sitefinity 中使用的用户控件中使用它。但是，由于那只是一个 ASP.NET CMS，我想不出有什么特别的东西会影响这种类型的代码。

关于如何发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:01:49.527

我不确定这是否是原因，但默认情况下，Sitefinity 页面禁用了 Viewstate。打开页面的属性（在后端页面列表中的操作菜单下）并选中该框以启用视图状态并让我知道这是否可以解决问题。

希望这会有所帮助！

# css - 网站默认以怪异模式打开

> ID：11747775
> 
> 赞同：2
> 
> 时间：2012-07-31T19:42:42.593
> 
> 标签：css, internet-explorer, internet-explorer-9, doctype, quirks-mode

我在设计一个基于 WP 的网站时遇到了一些问题（[www.interactiva.cc/~cristall/cristallini](http://www.interactiva.cc/~cristall/cristallini)）它在所有浏览器上都可以正常工作，但在 IE 9 中却不行（这是新的东西吗？;)）。我试图用这个声明 DOCTYPE 来避免 quirksmode：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

但是它仍然完全删除了我使用过的任何 CSS 规则。

我能做些什么 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:20:09.900

首先，改变这个：

```
<!--Theme by StefanoCavaliere.it-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"> 
```

对此：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!--Theme by StefanoCavaliere.it--> 
```

请注意，由于您的网页配置为在 IE 中使用 Chrome（至少版本 8），请使用浏览器上下文菜单上的检查元素，并且不要通过 F12 键使用 IE 的开发人员工具。

此外，您的链接标签应该是自动关闭的。修复后，请在[**此处**](http://validator.w3.org/check?uri=http%3A%2F%2Fwww.interactiva.cc%2F~cristall%2Fcristallini%2F&charset=%28detect+automatically%29&doctype=Inline&group=0&user-agent=W3C_Validator%2F1.3)`DOCTYPE`查看您的错误以及修复它们的提示。[](http://validator.w3.org/check?uri=http%3A%2F%2Fwww.interactiva.cc%2F~cristall%2Fcristallini%2F&charset=%28detect+automatically%29&doctype=Inline&group=0&user-agent=W3C_Validator%2F1.3)

 *** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-01T11:01:35.893

尝试将此标签添加到头部：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```**

# c# - 获取类中每个值的属性值类型

> ID：11747781
> 
> 赞同：1
> 
> 时间：2012-07-31T19:42:57.937
> 
> 标签：c#, reflection

如何获取类中每个属性的属性值类型？

```
this.GetType().GetProperties().ToList().ForEach(p => {
    switch(typeof(p.GetValue(this, null))) {
        case float:
            ...
            break;
        case string:
            ...
            break;
    }
}); 
```

这会产生错误`Cannot resolve symbol p`

**解决方案：**我最终选择了 LINQ to SQL。更清洁，更容易处理:)。谢谢乔恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:45:29.697

我不认为这是一个问题 - 我得到：

```
Test.cs(12,29): error CS1026: ) expected
Test.cs(12,42): error CS1514: { expected
Test.cs(12,42): error CS1525: Invalid expression term ')'
Test.cs(12,44): error CS1002: ; expected
Test.cs(13,9): error CS1525: Invalid expression term 'case'
Test.cs(13,19): error CS1001: Identifier expected
Test.cs(13,19): error CS1525: Invalid expression term ':'
Test.cs(13,20): error CS1002: ; expected
Test.cs(15,9): error CS1525: Invalid expression term 'case'
Test.cs(15,20): error CS1001: Identifier expected
Test.cs(15,20): error CS1525: Invalid expression term ':'
Test.cs(15,21): error CS1002: ; expected 
```

您无法打开类型。`ForEach`不过，一般情况下这样使用是可以的。

示例代码：

```
using System;
using System.Linq;

class Test
{
    public string Foo { get; set; }    
    public int Bar { get; set; }

    public void DumpProperties()
    {
        this.GetType().GetProperties().ToList()
            .ForEach(p => Console.WriteLine("{0}: {1}", p.Name,
                                            p.GetValue(this, null)));
    }

    static void Main()
    {
        new Test { Foo = "Hi", Bar = 20 }.DumpProperties();
    }
} 
```

现在诚然，我通常*不会*在这里使用`ForEach`- 我只是使用一个`foreach`循环：

```
foreach (var property in GetType().GetProperties())
{
    // Use property
} 
```

就我个人而言，我认为这样更简洁、更易于阅读且更易于调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:51:03.737

1.  您不能使用`switch`on `Type`- 它没有要输入的常量值`case`。
2.  如果您仍然想要您的`switch`，并且您正在使用一组众所周知的类型（即*系统类型*），您可以使用`p.PropertyType.GetTypeCode()`which returns `enum`。

# jquery - asp.net html在Navigation下留下一个活跃的效果

> ID：11747792
> 
> 赞同：0
> 
> 时间：2012-07-31T19:43:26.520
> 
> 标签：jquery, css

我要做的是在用户单击指示他们在该选项卡中的导航选项卡时留下效果。

我对 JQuery 还是很陌生，所以这可能是错误的。

Javascript/JQuery

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#menu").find("a").click(function(){
            $(this).addClass("highlight");
        })
    });
</script> 
```

CSS

```
.highlight
{
    text-decoration:none !important; 
    background-color: white;
    color: #999999;
    border-bottom: thick outset White;   
}

div.menu ul
{
    list-style: none;
    margin-left: 35px;
    padding: 0px;
    width: auto;
    text-decoration:none !important; 
}

div.menu ul li a
{
    color: #999999;
    display: inline;
    line-height: 13.6px;
    padding: 4px 20px;
    white-space: nowrap;
    text-decoration:none !important; 
} 
```

菜单代码：

```
 <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu " EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal">
                <Items>
                    <asp:MenuItem NavigateUrl="~/Default.aspx" Text="Home"/>
                    <asp:MenuItem NavigateUrl="~/The_Team.aspx" Text="The Team"/>
                    <asp:MenuItem NavigateUrl="~/Advisory_Board.aspx" Text="Advisory Board"/>
                    <asp:MenuItem NavigateUrl="~/Contact.aspx" Text="Contact"  />
                </Items>
            </asp:Menu> 
```

有人能指出我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:45:01.567

这里 ...

```
 $("#menu") 
```

你需要使用

```
 $(".menu") 
```

对于 CSS 类。

# session - 如何在服务器上/同一域下的多个 ColdFusion 应用程序之间共享会话？

> ID：11747796
> 
> 赞同：3
> 
> 时间：2012-07-31T19:43:35.780
> 
> 标签：session, coldfusion, scope, session-state, session-cookies

假设我有一个域 sub.domain.com ，其中一个登录表单位于[https://sub.domain.com/login.cfm](https://sub.domain.com/login.cfm)。

在根目录中，我有我的 Application.cfc，它使用 .cfc 命名应用程序`THIS.Name = "MyApp";`。

我在这个网站上有几个子目录，我想将它们作为单独的应用程序运行，它们自己的 Application.cfc 扩展了根 Application.cfc，但每个子目录都有自己的名称，这样我就可以创建唯一的应用程序范围变量对该应用程序：

例如：**sub.domain.com/site1/Application.cfc**

扩展**sub.domain.com/Application.cfc**（使用代理 cfc） `THIS.Name = "MyApp_Site1";`

并设置一些特定于应用程序的应用程序范围变量。

但是，当他们在[https://sub.domain.com/login.cfm](https://sub.domain.com/login.cfm)登录时，在那里设置的任何会话范围变量都与应用程序名称“MyApp”相关联。

我可以使用什么样的解决方案来接受根目录应用程序中的有效登录，然后将用户转发到他们的应用程序，同时继承他们的用户特定属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T00:39:14.990

正如@Dave Ferguson 所提到的，共享会话数据的最简单、最冷的方法是将其保留为单个应用程序。只要名称相同，您甚至可以将内容放在不同的文件夹中。

您不需要使用 FW\1 之类的框架或类似的框架来获得您正在寻找的东西，尽管它们可能会使它更容易一些。您始终可以将结构存储在应用程序范围内，键是子应用程序名称。例如 application.myvariable 可以是 application[request.subappname].myvariable。这使您可以使用一个应用程序，但应用程序变量的范围适用于各种子应用程序。您也可以对会话变量执行相同的操作。

正如@Brian 提到的，另一种方法是使用中间商店。然后，您可以使用所需的任何密钥存储会话数据。正如@Dave Ferguson 提到的，将您的 CFID 和 CFTOKEN 设置为域 cookie（特别是 CF10 在[设置 cookie](http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSe61e35da8d3185183e145c0d1353e31f559-7ffc.html)方面有一些改进）。这样，相同的 CFID 和 CFTOKEN 将在应用程序中使用。它们仍然有不同的会话，但使用相同的会话标识符。然后，您可以使用该组合作为中间存储中数据的密钥。

数据库将是解决此问题的常规方法，但根据您的应用程序，这可能会导致并发和锁定问题、序列化/反序列化或性能问题，然后总是处理旧/过期数据的清除。因此，您可能想研究[ehcache](http://ehcache.org/)或[memcached](http://memcached.org/)之类的东西来处理这个问题。

ehcache 尤其是一个有吸引力的选项，因为它与 ColdFusion 9+ 捆绑在一起，可以同时使用内存和磁盘，具体取决于您的设置，缓存中的数据可以在服务重启（或重启）后仍然存在，并且可以设置为在一定数量的不活动后自动使记录过期。是的，它可以[用于自定义缓存](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSCAD9638E-2D2C-48d8-9069-AE5A220B75A6.html#WSd160b5fdf5100e8ff9be58612a1d7d628d-8000)。

我建议你在采取这种方法时要小心。您需要权衡每次从缓存中获取数据的性能损失（比如在 onRequestStart 中），与通过在 onSessionStart() 中获取数据并在多个应用程序中保存重复数据所消耗的内存，直到会话超时。你走哪条路将完全取决于你的应用程序的性能特征、你的会话数据的大小等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T23:55:29.207

简单的答案是你不能。但是让我解释一下，因为这也不完全正确。首先，会话与应用程序名称相关联。因此，如果您有 2 个应用程序名称相同的 application.cfc 文件，则会话将可用于两者。但是，这不是您正在做的事情。由于您在每个名称中都有不同的名称，因此每个新会话也会有新的应用程序范围。

您可能想尝试的是使用 FW\1 和子应用程序。这为您提供了一个主 app.cfc，但允许您将功能分解为不同的组。

您还可以从登录页面设置域级别的 cookie。然后，您可以在其他应用程序中使用它们来盲目地创建会话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T20:20:04.413

ColdFusion 中的会话与特定应用程序相关联。您不能使用 ColdFusion 中的会话结构在应用程序之间共享它们。（想象一下，如果您可以从同一服务器上的任何应用程序中提取会话信息，您将在共享主机上遇到安全噩梦。）

当他们成功登录到您的应用程序的根目录时，您需要将会话信息存储在数据库或其他一些持久性机制中，然后在对特定于站点的应用程序的第一次请求时将客户的会话信息加载。您可以在特定于站点的应用程序的 application.cfc 中的 onSessionStart() 中执行此操作，甚至可以在 onRequestStart() 中执行此操作。

# sharepoint - 如何限制对 SharePoint 2010 中自定义列表表单的访问？

> ID：11747800
> 
> 赞同：0
> 
> 时间：2012-07-31T19:44:08.470
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-list, sharepoint-security

我正在处理 SharePoint 2010 中的工作流，该工作流附加到需要批准的项目的自定义列表中。在通过工作流的项目批准过程中，多个团队必须审查项目并在其上签字。每个团队都有不同的项目要填写，但需要查看所有项目。

我需要限制查看和编辑表单的解决方案是为与每个组对应的列表创建自定义表单。例如，Legal 具有与 Operations 不同的表单，其中某些字段可供 Legal 团队成员编辑。同样，运营团队也有自己可以编辑的字段。

我现在想要做的是防止用户加载自定义表单，如果他或她不在正确的组中。

目前，这些自定义表单没有附加代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:06:56.843

如果您能够在服务器上部署解决方案，也许来自 codeplex 的 SharePoint 权限扩展可以解决您的要求。您可以为列表的每一列单独设置权限。

[http://sppex.codeplex.com/](http://sppex.codeplex.com/)

干杯迈克尔

# ios - 符号化堆栈跟踪而不会崩溃

> ID：11747802
> 
> 赞同：17
> 
> 时间：2012-07-31T19:44:18.143
> 
> 标签：ios, xcode, stack-trace, symbolicate

有什么方法可以表示不是完整崩溃报告的堆栈跟踪？

我正在将 [NSThread callStackSymbols] 的字符串结果记录到我们的服务器。这并没有给出完整格式的崩溃报告，而只是未符号化的堆栈跟踪（下面的示例）。

我试图象征性地表达这一点。我还尝试从同一构建中替换实际崩溃报告的线程 0 堆栈跟踪。都没有奏效。我确实在应用程序存档中有构建的 dSYM。有什么方法可以做到这一点而不在发行版中留下符号？

```
0   domino free                         0x00072891 domino free + 465041
1   domino free                         0x000ea205 domino free + 954885
2   domino free                         0x000ea033 domino free + 954419
3   domino free                         0x0007fe55 domino free + 519765
4   domino free                         0x0006f6d5 domino free + 452309
5   domino free                         0x0006f7a3 domino free + 452515
6   domino free                         0x0006fb9b domino free + 453531
7   Foundation                          0x30558c29 __65-[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:]_block_invoke_0 + 16
8   Foundation                          0x304b06d9 -[NSURLConnectionInternalConnection invokeForDelegate:] + 28
9   Foundation                          0x304b06a3 -[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:] + 198
10  Foundation                          0x304b05c5 -[NSURLConnectionInternal _withActiveConnectionAndDelegate:] + 60
11  CFNetwork                           0x31f297f5 _ZN19URLConnectionClient23_clientDidFinishLoadingEPNS_26ClientConnectionEventQueueE + 192
12  CFNetwork                           0x31f1e4a5 _ZN19URLConnectionClient26ClientConnectionEventQueue33processAllEventsAndConsumePayloadEP20XConnectionEventInfoI12XClientEvent18XClientEventParamsEl + 424
13  CFNetwork                           0x31f1e599 _ZN19URLConnectionClient26ClientConnectionEventQueue33processAllEventsAndConsumePayloadEP20XConnectionEventInfoI12XClientEvent18XClientEventParamsEl + 668
14  CFNetwork                           0x31f1e1a3 _ZN19URLConnectionClient13processEventsEv + 106
15  CFNetwork                           0x31f1e0d9 _ZN17MultiplexerSource7performEv + 156
16  CoreFoundation                      0x30abead3 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 14
17  CoreFoundation                      0x30abe29f __CFRunLoopDoSources0 + 214
18  CoreFoundation                      0x30abd045 __CFRunLoopRun + 652
19  CoreFoundation                      0x30a404a5 CFRunLoopRunSpecific + 300
20  CoreFoundation                      0x30a4036d CFRunLoopRunInMode + 104
21  GraphicsServices                    0x30e7f439 GSEventRunModal + 136
22  UIKit                               0x3123acd5 UIApplicationMain + 1080
23  domino free                         0x0004fd3b domino free + 322875
24  domino free                         0x00004004 domino free + 12292 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-09-20T12:41:34.987

我知道这是一个相当老的问题，但我现在遇到了同样的问题，而且花了很长时间才找到答案，所以我想我应该（在某个地方）记录它。

如果您拥有堆栈跟踪来源的应用程序版本的 dSYM，那么您实际上可以将其变成有用的东西。在这里阅读[这个答案](https://stackoverflow.com/a/36503302/1397367)会导致[这篇文章](https://www.apteligent.com/developer-resources/symbolicating-an-ios-crash-report/?partner_code=GDC_so_symbolicateios)对我有很大帮助。我在堆栈跟踪顶部有这一行：

```
0    MyApp                           0x000000010010da68 MyApp + 236136
                                     ^ stack address            ^ symbol offset 
```

从这里你有两个选择，都涉及一些数学。如果你和你一起去，`atos`你只需要做一次数学，你可以通过一个电话查找所有步骤。

## 使用`atos`

要使用`atos`，您需要堆栈跟踪中的**堆栈地址**，并且您需要通过一些数学来找出**加载地址：**

1.  **通过从堆栈地址**值（= - ）中减去**符号偏移**值来计算**加载地址**值当然你必须将它们转换为相同的基数才能做到这一点****`load address``stack address``symbol offset`****

     ****就我而言，这是`0x1000D4000`**** 
*****   `atos`使用**加载地址**和堆栈跟踪中的**堆栈地址**查找堆栈跟踪条目`atos -arch <architecture> -o <path to executable inside (!) the dSYM> -l <load address> <stack address 1> <stack address 2> ...`

    就我而言，这是`atos -arch arm64 -o MyApp.app.dSYM/Contents/Resources/DWARF/MyApp -l 0x1000D4000 0x000000010010da68`**** 

 ****请记住，您必须提供 dSYM 中实际可执行文件的路径，否则您只会收到错误消息。这样做的好处`atos`是，您只需列出堆栈跟踪中的所有地址，就可以立即获得可读的格式。

## 使用`dwarfdump`

要使用`dwarfdump`，您需要与堆栈跟踪中的**堆栈**地址对应的**文件地址。**

 **1.  找出堆栈跟踪来自的架构的**幻灯片值（请参阅链接文章中的***获取幻灯片值*）。

    就我而言，这是`0x100000000`针对 64 位的。

2.  将**符号偏移**值（在我的情况下，堆栈跟踪中*MyApp + ...*`236136`之后的数字）转换为十六进制并将结果添加到**幻灯片**值。你现在得到的数字叫做**文件地址**（`file address`= `symbol offset`+ `slide`）

    就我而言，这导致`0x100039A68`.

3.  `dwarfdump`使用**文件地址**查找堆栈跟踪条目`dwarfdump --lookup <file address> --arch <architecture> <path to dSYM>`

    就我而言，这是`dwarfdump --lookup 0x100039A68 --arch arm64 MyApp.dSYM`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T18:11:38.530

我遇到了同样的问题，这个答案对我有用：[https ://stackoverflow.com/a/4954949/299262](https://stackoverflow.com/a/4954949/299262)

只要您有 dSYM，就可以使用 atos 来符号化各个地址。

示例命令：

`atos -arch armv7 -o 'app name.app'/'app name' 0x000000000`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-17T19:18:16.917

`atos`您可以在运行时获取相关构建的二进制图像信息，然后使用该信息使用该命令来表示堆栈跟踪的帧。

使用下面的代码，输出如下所示：

```
YourApp 0x00000001adb1e000 - arm64e - E9B05479-3D07-390C-BD36-73EEDB2B1F75
CoreGraphics 0x00000001a92dd000 - arm64e - 2F7F6EE8-635C-332A-BAC3-EFDA4894C7E2
CoreImage 0x00000001afc00000 - arm64e - CF56BCB1-9EE3-392D-8922-C8894C9F94C7 
```

代码：

```
import Foundation
import MachO

public struct BinaryImagesInspector {

    #if arch(x86_64) || arch(arm64)
    typealias MachHeader = mach_header_64
    #else
    typealias MachHeader = mach_header
    #endif

    /// Provides binary infos that are then used with the atos command to symbolicate stack traces
    /// - Parameter imageNamesToLog: an optional array of binary image names to restrict the infos to
    /// - Returns: An array of strings containing info on loaded binary name, its load address, architecture
    /// - Note: Example:
    ///
    /// atos -arch arm64 -o [YOUR-DSYM-ID].dSYM/Contents/Resources/DWARF/[YOUR APP] -l 0x0000000000000000 0x0000000000000000
    public static func getBinaryImagesInfo(imageNamesToLog: [String]? = nil) -> [String] {
        let count = _dyld_image_count()

        var stringsToLog = [String]()

        for i in 0..<count {

            guard let dyld = _dyld_get_image_name(i) else { continue }

            let dyldStr = String(cString: dyld)
            let subStrings = dyldStr.split(separator: "/")
            guard let imageName = subStrings.last else { continue }

            if let imageNamesToLog = imageNamesToLog {
                guard imageNamesToLog.contains(String(imageName)) else { continue }
            }

            guard let uncastHeader = _dyld_get_image_header(i) else { continue }
            let machHeader = uncastHeader.withMemoryRebound(to: MachHeader.self, capacity: MemoryLayout<MachHeader>.size) { $0 }
            guard let info = NXGetArchInfoFromCpuType(machHeader.pointee.cputype, machHeader.pointee.cpusubtype) else { continue }
            guard let archName = info.pointee.name else { continue }
            let uuid = getBinaryImageUUID(machHeader: machHeader)
            let logStr = "\(imageName) \(machHeader.debugDescription) - \(String(cString: archName)) - \(uuid ?? "uuid not found")"
            stringsToLog.append(logStr)
        }

        return stringsToLog
    }

    private static func getBinaryImageUUID(machHeader: UnsafePointer<MachHeader>) -> String? {

        guard var header_ptr = UnsafePointer<UInt8>.init(bitPattern: UInt(bitPattern: machHeader)) else {
            return nil
        }

        header_ptr += MemoryLayout<MachHeader>.size

        guard var command = UnsafePointer<load_command>.init(bitPattern: UInt(bitPattern: header_ptr)) else {
            return nil
        }

        for _ in 0..<machHeader.pointee.ncmds {

            if command.pointee.cmd == LC_UUID {
                guard let ucmd_ptr = UnsafePointer<uuid_command>.init(bitPattern: UInt(bitPattern: header_ptr)) else { continue }
                let ucmd = ucmd_ptr.pointee

                let cuuidBytes = CFUUIDBytes(byte0: ucmd.uuid.0,
                                             byte1: ucmd.uuid.1,
                                             byte2: ucmd.uuid.2,
                                             byte3: ucmd.uuid.3,
                                             byte4: ucmd.uuid.4,
                                             byte5: ucmd.uuid.5,
                                             byte6: ucmd.uuid.6,
                                             byte7: ucmd.uuid.7,
                                             byte8: ucmd.uuid.8,
                                             byte9: ucmd.uuid.9,
                                             byte10: ucmd.uuid.10,
                                             byte11: ucmd.uuid.11,
                                             byte12: ucmd.uuid.12,
                                             byte13: ucmd.uuid.13,
                                             byte14: ucmd.uuid.14,
                                             byte15: ucmd.uuid.15)
                guard let cuuid = CFUUIDCreateFromUUIDBytes(kCFAllocatorDefault, cuuidBytes) else {
                    return nil
                }
                let suuid = CFUUIDCreateString(kCFAllocatorDefault, cuuid)
                let encoding = CFStringGetFastestEncoding(suuid)
                guard let cstr = CFStringGetCStringPtr(suuid, encoding) else {
                    return nil
                }
                let str = String(cString: cstr)

                return str
            }

            header_ptr += Int(command.pointee.cmdsize)
            guard let newCommand = UnsafePointer<load_command>.init(bitPattern: UInt(bitPattern: header_ptr)) else { continue }
            command = newCommand
        }

        return nil
    }
} 
```

进一步阅读：

*   [如何在运行时确定二进制图像架构？](https://stackoverflow.com/questions/5567215/how-to-determine-binary-image-architecture-at-runtime)
*   [https://github.com/apple/swift/blob/master/stdlib/private/SwiftReflectionTest/SwiftReflectionTest.swift](https://github.com/apple/swift/blob/master/stdlib/private/SwiftReflectionTest/SwiftReflectionTest.swift)
*   [https://lowlevelbits.org/parsing-mach-o-files/](https://lowlevelbits.org/parsing-mach-o-files/)
*   [https://developer.apple.com/library/archive/technotes/tn2151/_index.html](https://developer.apple.com/library/archive/technotes/tn2151/_index.html)

[也可作为GitHub 上](https://github.com/schmittsfn/BinaryImagesInspector)的 swift 包使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-08T07:52:24.273

我不认为这是可能的。[NSThread callStackSymbols] 返回函数的内存地址。如果没有在崩溃后立即转储内存，就无法对其进行符号化。崩溃时，每个设备的地址都不同。即使在一台设备上，如果您重新启动手机，地址也会在另一次崩溃后更改。几个人提到了atos，但它是用于崩溃日志，而不是用于callStackSymbols。******

# database - 私有 MediaWiki wiki 和创建页面的机器人

> ID：11747803
> 
> 赞同：2
> 
> 时间：2012-07-31T19:44:20.410
> 
> 标签：database, mediawiki, wiki, bots, wikipedia

我有一个在 localhost 中运行的私人 wiki。我使用 MediaWiki 1.19，我必须在 MediaWiki 的数据库中插入近 100 个页面。

我试过 pywikibot 但它不起作用：我在登录时遇到了麻烦。我花了几个小时没有找到问题所在。我已经尝试过 MediaWiki 批量创建器：当我运行 php 脚本时，一切似乎都正常，但没有创建页面。

您知道 bot 是否可以在 localhost 中与 MediaWiki 的最新版本一起使用？

也许我可以直接写入数据库？文档对此不是很清楚。

您有任何想法自动创建页面吗？或者您知道与最新版本一起使用的机器人（接受任何语言）吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T00:02:45.410

如果您在同一台机器上，请使用[maintenance/edit.php](https://www.mediawiki.org/wiki/Manual%3aEdit.php)命令行脚本，不要手动更改数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T05:19:06.690

lilawood 自己的回答：在“维护”目录中，我们拥有从文件编辑或导入页面所需的一切：

*   edit.php ：编辑页面以更改其内容
*   importTextFile.php ：将文本文件的内容导入 wiki 页面

测试和批准！它可以轻松替换 pywikibot。希望能帮助到你。

# asp.net-mvc-3 - 是否可以同时使用 ActionLink 和 data-role？

> ID：11747806
> 
> 赞同：0
> 
> 时间：2012-07-31T19:44:33.973
> 
> 标签：asp.net-mvc-3, razor

我想改变 ActionLink 像：

`@Html.ActionLink("Create New", "Create", null, new { @data-role = "button" })`

但它不起作用。是否可以将数据角色分配给 ActionLink？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:51:25.970

我假设您正在尝试使用 data-dash 属性，对吗？在这种情况下，您应该使用：

`@data_role = "button"`

代替：

`@data-role = "button"`

# delphi - 如何检查 TDateTime 内容是否有效

> ID：11747813
> 
> 赞同：2
> 
> 时间：2012-07-31T19:44:53.253
> 
> 标签：delphi, validation, datetime, vcl, tdatetime

有没有办法在`TDateTime`不捕获转换异常的情况下检查 Delphi 变量是否具有有效内容？

我编写了一个应用程序，它必须解析数百个以原始 Delphi 记录形式编写的包含`TDateTime`字段的巨大文件。有时我会得到一条记录，其中内容的`TDateTime`值类似于在传递给转换例程时`2.0927117954e+262`会产生异常。`Floating point invalid Operation`我知道我可以简单地捕获异常，但这在调试时会很麻烦，因为调试器会不断停止，我想在出现其他错误时保持启用状态。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T21:07:14.377

您的示例值显然超出了有效的 DateTime 范围。您可以在执行任何转换之前测试它是否在范围内。

```
var
  d: TDateTime;
..

d := 2.0927117954e+262;
if (d <= MaxDateTime) and (d >= MinDateTime) then
  s := DateTimeToStr(d)
else
  .. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T09:23:08.990

如果您的问题是调试器停止，您可以在更高版本的 Delphi 的 IDE 中修复它。在将发生异常的行之前和之后设置两个断点。例如在Delphi 2007中，右键单击第一个BP的边缘红点，选择BreakPoint properties/Advanced/Ignore后续异常。在第二个 BP 上，“处理后续异常”

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-05T09:45:05.433

阅读您的问题描述，我得出结论，如果某些记录具有损坏/无效的时间值，那么您的应用程序继续读取文件是绝对有效的，因此您希望跳过它（否则可能标记或收集问题）。

VCL 函数[System.SysUtils.TryFloatToDateTime](http://docwiki.embarcadero.com/Libraries/Rio/en/System.SysUtils.TryFloatToDateTime)正是为此目的而制作的，到目前为止，使用它对我来说似乎是最好的选择。

德尔福示例：

```
uses SysUtils;

function IsValidDateTime(dt: Double): Boolean;
var
  dummy: TDateTime;
begin
  Result := TryFloatToDateTime(dt, dummy);
end; 
```

C++ 生成器示例：

```
#include <SysUtils.hpp>

bool isValidDateTime(const double dt) 
{
    TDateTime dummy;
    return TryFloatToDateTime(dt, dummy);
} 
```

这个函数不仅方便（因为没有异常并且已经存在）而且非常易读，它还遵循一个贯穿整个框架的良好约定：

*   名字开头`Try`说它可能会失败
*   `Boolean`直接结果以指示有效操作
*   间接结果获取实际值（如果操作成功）

# node.js - express-namespace 和 express-resource 不允许映射

> ID：11747825
> 
> 赞同：0
> 
> 时间：2012-07-31T19:45:41.967
> 
> 标签：node.js, express

我正在尝试为资源创建自定义地图，

```
app.namespace('/v1', function(){
  var sessionResource = app.resource('session', require('./routes/v1/session'));
  sessionResource.map('/test', sessionResource.index);  
}); 
```

地图中断如下，但是没有自定义地图，ns和资源可以顺利工作

```
/home/kuryaki/piitri/newApi/node_modules/express-resource/index.js:125
  if ('/' == path[0]) path = path.substr(1);
                 ^
    TypeError: Cannot read property '0' of undefined
        at Resource.map (/home/kuryaki/piitri/newApi/node_modules/express-resource/index.js:125:18)
        at HTTPServer.<anonymous> (/home/kuryaki/piitri/newApi/app.js:44:31)
        at HTTPServer.exports.namespace (/home/kuryaki/piitri/newApi/node_modules/express-namespace/index.js:31:6)
        at Object.<anonymous> (/home/kuryaki/piitri/newApi/app.js:42:5)
        at Module._compile (module.js:449:26)
        at Object.Module._extensions..js (module.js:467:10)
        at Module.load (module.js:356:32)
        at Function.Module._load (module.js:312:12)
        at Module.runMain (module.js:492:10)
        at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

index 方法存在这就是我实际测试它的方式

在 localhost 获取 /v1/session

我已经尝试使用节点 v0.6.14、v0.8.4 和 v0.9.0pre 并且没有工作我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:39:16.097

express-resource 尚未完全兼容 express 3。

但是，您可以在 package.json 中使用它来安装 express-resource 的特殊分支

```
"express-resource": 
    "git://github.com/visionmedia/express-resource.git#add/express3x-support" 
```

或`npm install git://github.com/visionmedia/express-resource.git#add/express3x-support`从命令行。

一段时间以来，我一直在愉快地使用 express-resource 的那个分支。我从 express-resource 的 github 问题页面中发现了这个分支。

# java - 获取正在执行的类的文件系统路径

> ID：11747833
> 
> 赞同：71
> 
> 时间：2012-07-31T19:46:04.193
> 
> 标签：java, filepath

有没有办法在运行时从这个类的代码中确定执行类的当前文件系统位置，因为它是使用`java`命令执行的？

例如以下课程：

```
public class MyClass{
 public static void main(String[] args){\
   new MyClass().doStuff();
 }

 private void doStufF(){
   String path = ... // what to do here?!
   System.out.println("Path of class being invoked: " + path);
 }

} 
```

有没有办法在刚刚被调用的 MyClass.class 文件的文件系统中获取和打印正确的路径？

同样，如果我从命令调用 jar 文件`java -jar`，有没有办法从该 jar 内的类中获取 jar 文件的路径？

PS：请**不要对调用命令的工作目录做任何**假设`java`！

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-07-31T19:47:52.223

以下代码片段将为您执行此操作：

```
final File f = new File(MyClass.class.getProtectionDomain().getCodeSource().getLocation().getPath()); 
```

[替换`MyClass`为您的`main`班级]

结果`File`对象`f`表示`.jar`已执行的文件。您可以使用此对象让父对象找到它所在的目录`.jar`。

# php - Yii ActiveForm：通过 jQuery.load 加载表单

> ID：11747839
> 
> 赞同：0
> 
> 时间：2012-07-31T19:46:26.860
> 
> 标签：php, javascript, jquery, yii

我有一个触发 $("#element").load 事件的按钮。此按钮和#element 在“页面 A”内

Yii activeform 被加载到该元素中（我们称之为“页面 B”）。此活动表单配置为具有 ajaxvalidation=true。这显然会失败，因为调用 activeform 时不会加载 jquery.yiiactiveform.js 文件，因为 yiiactiveform.js 文件需要位于主布局（页面 A）中并将 jquery.yiiactiveform.js 引用放在那里。

一种解决方案是通过以下方式在“页面 a”上预加载 activeform JS：

```
Yii::app()->clientScript->registerCoreScript('yiiactiveform'); 
```

并具有相应的 JS 代码，该代码也将表单操作绑定在“页面 a”中：

```
<script type="text/javascript">
/*<![CDATA[*/
jQuery(function($) {
$('#register-form').yiiactiveform({'validateOnSubmit':true,....,'enableAjaxValidation':true}]});
});
/*]]>*/
</script> 
```

另一种是在页面 B 中调用这些 JS，但这意味着将 head 标签放在页面 B 中。我的页面 B 现在只包含表单元素，没有 html，没有正文标签，只有表单标签，因为我们不无论如何都需要它，这个页面只能通过在页面 A 中加载（）来访问。

然而，这种方法并不是很好。这就像在加载的表单中手动绑定适当的 JS 调用，违背了框架的目的。我认为如果 Yii activeform JS 支持 jquery 的 on() 或 live() 方法，它会起作用。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:13:37.680

找到了。对页面 B 的 renderPartial() 调用必须是：

```
$this->renderPartial('viewfile', array('var'=> $val),false,true); 
```

第 4 个参数必须设置为 true。有了这个，它处理视图文件并在其中插入相应的 JS 代码。

# vim - 创建自定义 vim 语法：我可以设置自定义自动缩进规则吗？

> ID：11747840
> 
> 赞同：9
> 
> 时间：2012-07-31T19:46:34.553
> 
> 标签：vim

我正在为 vim 创建一个自定义语法文件，为了使代码更易于阅读，我想告诉 vim 如何自动缩进代码。现在，我`gg=G''`在 vim 中通常的重新缩进只是去掉了每行开头的所有空格：

```
IF (@("X_17") = "X") THEN
*Make sure only one is selected
countX = 0;
IF (@("X_19") = "X") THEN
countX += 1;
END
IF (@("X_20") = "X") THEN
countX += 1;
END
IF (@("X_21") = "X") THEN
countX += 1;
END
... 
```

我想设置它，以便注释（以 * 开头）根本不缩进（行首没有空格），但其余部分基于 IF 和 END 缩进。相同的代码，正确缩进（假设即使第一个 IF 在更大的 IF/END 块中）：

```
 IF (@("X_17") = "X") THEN
*Make sure only one is selected
        countX = 0;
        IF (@("X_19") = "X") THEN
            countX += 1;
        END
        IF (@("X_20") = "X") THEN
            countX += 1;
        END
        IF (@("X_21") = "X") THEN
            countX += 1;
        END
        ... 
```

我已经设置了语法高亮，关键字和内置函数已经是 dal.vim 文件的一部分。这是当前的 dal.vim：

[http://pastebin.com/PEcSvqM9](http://pastebin.com/PEcSvqM9)

有没有办法改变我所拥有的，以便代码在 IF/END 块内自动缩进，同时保持所有注释的开头没有空格？

额外问题：如何设置代码折叠以遵循这些 IF/END 块？现在我正在`zf2j`折叠这段代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T20:06:13.393

您必须编写一个缩进插件并将其放入`indent`子目录中。更多内容在

```
:h 'indentexpr' 
```

，这是你的插件应该设置的。随意从与 vim 一起分发的一百个缩进脚本中获取示例。我没有自己写这样的插件，所以不能说哪个作为例子最有用。

对于代码折叠检查

```
:h :syn-fold 
```

啊，不要在语法文件中设置缩进。这不是不可能的，但它只是不适合这种类型的工作。

# php - Kohana 3.2 自定义错误处理

> ID：11747843
> 
> 赞同：1
> 
> 时间：2012-07-31T19:46:48.840
> 
> 标签：php, error-handling, kohana, http-status-codes, kohana-3.2

我正在尝试为 404、403、5xx 错误制作自定义错误页面。我按照[文档](http://kohanaframework.org/3.2/guide/kohana/tutorials/error-pages#friendly-error-pages)创建了一个错误控制器，覆盖`Kohana_Exception`类并添加了一条路线。

## Kohana_Exception 类

```
class Kohana_Exception extends Kohana_Kohana_Exception {
    public static function handler(Exception $e) {
        if (Kohana::DEVELOPMENT === Kohana::$environment) {
            parent::handler($e);
        } else {
            try {
                Kohana::$log->add(Log::ERROR, parent::text($e));
                $attributes = array('action' => 500, 'message' => rawurlencode($e->getMessage()));
                if ($e instanceof HTTP_Exception) {
                    $attributes['action'] = $e->getCode();
                }
                // Error sub-request.
                echo Request::factory(Route::get('error')->uri($attributes))->execute()->send_headers()->body();
            }
            catch(Exception $e) {
                // Clean the output buffer if one exists
                ob_get_level() and ob_clean();
                // Display the exception text
                echo parent::text($e);
                // Exit with an error status
                exit(1);
            }
        }
    }
} 
```

## 错误控制器

```
<?php defined('SYSPATH') OR die('No direct access allowed.');
class Controller_Error extends Webim_Template {
    public function before() {
        parent::before();
        $this->template->page = URL::site(rawurldecode(Request::$initial->uri()));
        // Internal request only!
        if (Request::$initial !== Request::$current) {
            if ($message = rawurldecode($this->request->param('message'))) {
                $this->template->message = $message;
            }
        } else {
            $this->request->action(404);
        }
        $this->response->status((int)$this->request->action());
    }
    public function action_404() {
        $this->template->title = __('404 Not Found');
        // Here we check to see if a 404 came from our website. This allows the
        // webmaster to find broken links and update them in a shorter amount of time.
        if (isset($_SERVER['HTTP_REFERER']) AND strstr($_SERVER['HTTP_REFERER'], $_SERVER['SERVER_NAME']) !== FALSE) {
            // Set a local flag so we can display different messages in our template.
            $this->template->local = TRUE;
        }
        // HTTP Status code.
        $this->response->status(404);
    }
    public function action_403() {
        $this->request->redirect('welcome');
    }
    public function action_503() {
        $this->template->title = __('Maintenance Mode');
    }
    public function action_500() {
        $this->template->title = __('Internal Server Error');
    }
} 
```

## 路线

```
Route::set('error', 'error/<action>(/<message>)', 
        array('action' => '[0-9]++', 'message' => '.+'))
            ->defaults(array(
            'controller' => 'error_handler'
));

Route::set('default', '(<controller>(/<action>(/<id>)))')
    ->defaults(array(
        'controller' => 'welcome',
        'action'     => 'index',
    )); 
```

当我抛出`HTTP_Exception_403`异常时，它不会`welcome`根据错误控制器重定向到应有的位置。我想我在这里错过了非常简单的事情。

我对其进行了调试，发现执行点没有到达我的控制器。所以这可能是Route中的一个问题。什么是正确的路线？真正的问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:14:43.327

您的错误路由到 Controller_Error_Handler，但您的控制器称为 Controller_Error。

如果这将是一个问题：Kohana 期望在 classes/error/handler.php 中有一个 Controller_Error_Handler 类

# knockout.js - KnockoutJS json 对象/可观察的“可见”绑定不起作用

> ID：11747844
> 
> 赞同：2
> 
> 时间：2012-07-31T19:46:54.690
> 
> 标签：knockout.js

我正在尝试配置一个相当复杂的模型来将视图绑定到使用 KnockoutJS。

这是一个问题标记部分：

```
<input type="text" data-bind="visible: dialogSelectedCode.HasValue, value: dialogSelectedCodeValue"/>
<span data-bind="text: ko.toJSON(dialogSelectedCode)"></span> 
```

输入元素从未显示，但我的“调试”范围显示了内容

```
{"Code":"{intInc_G}","HasValue":true} 
```

如果“决策”数据隐藏在 JSON 对象中，那么绑定可见输入的正确方法是什么？

更新：这是一个相当复杂[的问题](http://jsfiddle.net/mpavlov/LHzny/16/)。要进入问题对话框，请运行小提琴，单击“添加块”并尝试在下拉输入中选择几个项目（尤其是第一个和第二个项目 - 因为它们清楚地表明该`dialogSelectedCode`变量确实正在更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:25:47.560

我认为您需要为 HasValue 属性创建一个计算值。您的绑定`dialogSelectedCode.HasValue`不遵循 observable，它检查 observable *function*上的 HasValue 。属性方式`dialogSelectedCode().HasValue`抛出错误。创建一个可计算并让它进行测试[工作](http://jsfiddle.net/xgsqU/)：

```
self.dialogSelectedCodeHasValue = ko.computed(function() {
    var selectedCode  = ko.utils.unwrapObservable(self.dialogSelectedCode);
    return selectedCode && selectedCode.HasValue;
}); 
```

# c# - 在 ZedGraph 中显示 Y 轴线

> ID：11747845
> 
> 赞同：2
> 
> 时间：2012-07-31T19:46:58.877
> 
> 标签：c#, winforms, zedgraph

![在此处输入图像描述](../Images/1b4513aca17913dff2305debf8a989aa.png)

在上图中，y = 0 有一条线（标记 x 轴）。x = 0 没有（标记 y 轴）。 **如何让一个出现在 x = 0 处？**

我试过了...

```
MyZedGraphObject.ZedGraphControl.GraphPane.YAxis.IsVisible = true;
MyZedGraphObject.ZedGraphControl.GraphPane.YAxis.Scale.IsVisible = true; 
```

两者似乎都不起作用。y 轴的颜色是黑色，因此它不是完全透明的颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:49:50.400

将`YAxis.Cross`属性设置为所需的`X`值。例如，下面的代码：

```
MyZedGraphObject.ZedGraphControl.GraphPane.AddCurve(
    null, new[] { -0.3, 0.5, 0.9 }, new[] { 0.8, 0.3, 0.1 }, Color.Blue);

MyZedGraphObject.ZedGraphControl.GraphPane.YAxis.Cross = 0.0;
MyZedGraphObject.ZedGraphControl.GraphPane.AxisChange(); 
```

将产生以下图表：

![Y 轴在 X = 0 处交叉](../Images/dbd79b86480c94c236f8a0ab7b8a83fb.png)

# mysql - 具有可变输入的 MySQL 触发器

> ID：11747847
> 
> 赞同：0
> 
> 时间：2012-07-31T19:47:04.643
> 
> 标签：mysql

我正在尝试为 UDATES 的表创建触发器。我以为我可以使用多个触发器来做到这一点，但我猜 MySQL 不支持同一类型的一个表上的多个触发器。所以我被迫将其包含在一个触发器中。

基本上我试图根据当前表中更新的内容将新记录插入到不同的表中。

这是我到目前为止所拥有的并且有效：

```
BEGIN
-- Definition start
INSERT INTO prices (stationID, price, type, 
prevPrice, prevDate, dateCreated, apiKey, uid) 
VALUES(NEW.stationID, NEW.regPrice, 'reg', OLD.regPrice,
OLD.regDate, NEW.regDate, NEW.lastApiUsed, NEW.lastUpdatedBy);
-- Definition end
END 
```

我需要发生的是`type`根据用户提供的类型可能会发生变化。因为用户在给定时间只能更新一种类型。我正在考虑一个 IF`IF THEN`语句，但我不确定如何让它发挥作用。我在想我可以使用列名的字符串值在`IF`语句中使用，但我不确定这是否可能。

像这样的东西：

```
 BEGIN
    -- Definition start
    IF(type == 'reg') THEN
    INSERT INTO prices (stationID, price, type, 
    prevPrice, prevDate, dateCreated, apiKey, uid) 
    VALUES(NEW.stationID, NEW.regPrice, 'reg', OLD.regPrice,
    OLD.regDate, NEW.regDate, NEW.lastApiUsed, NEW.lastUpdatedBy);
    END IF;
    -- Definition end
    END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:52:37.800

我能够用来`IF THEN ELSE`完成交易。然后我测试了一个`NULL`值的条件。如果是`TRUE`，那么我运行我的代码。现在由于某种原因，它只执行一个`INSERT`命令，即使该命令`UPDATE`不止一个。对此有什么想法吗？

```
BEGIN
-- Definition start
IF(NEW.regPrice IS NOT NULL) THEN
INSERT INTO prices (stationID, price, type, 
prevPrice, prevDate, dateCreated, apiKey, uid) 
VALUES(NEW.stationID, NEW.regPrice, 'reg', OLD.regPrice,
OLD.regDate, NEW.regDate, NEW.lastApiUsed, NEW.lastUpdatedBy);

ELSEIF(NEW.midPrice IS NOT NULL) THEN
INSERT INTO prices (stationID, price, type, 
prevPrice, prevDate, dateCreated, apiKey, uid) 
VALUES(NEW.stationID, NEW.midPrice, 'mid', OLD.midPrice,
OLD.midDate, NEW.midDate, NEW.lastApiUsed, NEW.lastUpdatedBy);

ELSEIF(NEW.prePrice IS NOT NULL) THEN
INSERT INTO prices (stationID, price, type, 
prevPrice, prevDate, dateCreated, apiKey, uid) 
VALUES(NEW.stationID, NEW.prePrice, 'pre', OLD.prePrice,
OLD.preDate, NEW.preDate, NEW.lastApiUsed, NEW.lastUpdatedBy);
END IF;
-- Definition end
END 
```

# django - Django动态获取模型的属性

> ID：11747850
> 
> 赞同：0
> 
> 时间：2012-07-31T19:47:08.577
> 
> 标签：django, django-models

我有一个模型

```
class Document(models.Model):
    comment = models.TextField(null=True,blank=True)
    upload_date = models.DateTimeField(blank=False) 
```

文档对象在模板中列为

```
{% for doc in doc_list %}
    {{ doc.comment }}
    {{ doc.upload_date }}
{% endfor %} 
```

但是，我想达到`doc`动态喜欢的属性

```
{{ doc."comment" }} 
```

或者

```
{{ doc|getField:"comment" }} 
```

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:18:34.370

我假设您的意思是您想通过使用另一个变量来访问模型上的字段，而您当时不一定知道。因此，您可能已`some_var`被传递到模板中，这是您要显示的模型中的字段，例如评论或上传日期。

您可以构建一个[模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)来执行此操作：

```
@register.simple_tag
def get_model_attr(instance, key):
    return getattr(instance, key) 
```

现在在您的模板中，您可以执行以下操作：

```
{% for doc in doc_list %}
    {% get_model_attr doc "comment" %}
    {% get_model_attr doc some_var %}
{% endfor %} 
```

# sql - SQL Server 2005 中的模时间 - 每 n 小时返回一次数据

> ID：11747851
> 
> 赞同：3
> 
> 时间：2012-07-31T19:47:13.553
> 
> 标签：sql, sql-server-2005, date, modulo

我有这样的事情：

```
 SELECt *
   FROM (
        SELECT prodid, date, time, tmp, rowid
          FROM live_pilot_plant
         WHERE date BETWEEN CONVERT(DATETIME, '3/19/2012', 101)
           AND CONVERT(DATETIME, '3/31/2012', 101)
         ) b
  WHERE b.rowid % 400 = 0 
```

仅供参考：在 where 子句中进行转换的原因是因为我的日期存储为 varchar(10)，我必须将其转换为日期时间才能获得正确的数据范围。（我尝试了很多不同的东西，这很有效）

我想知道如何在这些选定的日期内每 4 小时返回一次我想要的数据。我大约每 5 秒收集一次数据（数据有一些中断） - 即数据不是在 2 小时内收集的，而是以 5 秒的增量继续收集。

在我的示例中，我只是对我的 rowid 使用了模数 - 语法有效，但正如我上面提到的，在某些时期没有收集数据，因此使用如下逻辑：如果你每 5 秒获取一次数据，然后再乘以 4 小时，你可以大约说中间有多少行是行不通的。

我的时间列是一个 varchar 列，格式为 hh:mm:ss

我的理想输出是：

```
 | prodid  | date       | time      |  tmp  |
  |    4    | 3/19/2012  | 10:00:00  |  2.3  |
  |    7    | 3/19/2012  | 14:00:24  |  3.2  | 
```

如您所见，我可能有点偏离（以秒为单位） - 我更需要时间方面的近似值。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:05:09.673

类似于以下内容的东西应该可以工作。基本上创建日期+时间分区，每个分区代表一个4小时的块，并从每个分区中选择排名最高的记录

```
select * from (
select *,
row_number() over (partition by date,cast(left( time, charindex( ':', time) - 1) as int)  / 4 order by
date, time) as ranker  from live_pilot_plant
) Z where ranker = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:05:03.137

这应该工作

```
select prodid, date, time, tmp, rowid
from live_pilot_plant as lpp
inner join (

select min(prodid) as prodid                     -- is prodid your PK?? if not change it to rowid or whatelse is your PK
    from live_pilot_plant
    WHERE date BETWEEN CONVERT(DATETIME, '3/19/2012', 101)  -- or whatever you want
                   AND CONVERT(DATETIME, '3/31/2012', 101)  -- for better performance it is on the inner select
    group by date, 
    floor(                                       -- floor makes the trick
    convert(float,convert(datetime, time))       -- assumes "time" column is a varchar containing data like '19:23:05'
    * 6                                          -- 6 comes form 24 hours / 4 hours
    )

) as filter on lpp.prodid = filter.prodid        -- if prodid is not the PK also correct here. 
```

对于仅在一个日期时间字段中具有日期+时间数据的其他所有人的旁注，假设名为“when_it_was”，分组依据可以很简单：

```
group by floor(when_it_was * 6)                  -- again, 6 comes from 24/4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:17:57.600

假设 rowid 是一个 PK 并且随着日期/时间的增加而增加。只需将时间字段转换为 4 小时间隔数`substring(time,1,2))/4`，然后从一天中的 4 小时组中的每个组中选择 MIN(rowid)：

```
select prodid, date, time, tmp, rowid from live_pilot_plant where rowid in
(
select min(rowid) 
from live_pilot_plant 
WHERE CONVERT(DATETIME, date, 101) BETWEEN CONVERT(DATETIME, '3/19/2012', 101)
           AND CONVERT(DATETIME, '3/31/2012', 101)
group by date,convert(int,substring(time,1,2))/4

)
order by CONVERT(DATETIME, date, 101),time 
```

# asp.net - ASP.net 正则表达式

> ID：11747852
> 
> 赞同：1
> 
> 时间：2012-07-31T19:47:23.943
> 
> 标签：asp.net, validation

好的，所以我的表单上有一个正则表达式验证器，但我是新手，想知道如何向它添加另一个表达式，以便我也可以查找其他内容。这是我的示例代码：

```
<asp:RegularExpressionValidator 
     ID="RegularExpressionValidator3" 
     ControlToValidate="txtRelationship" 
     ValidationExpression="^[a-zA-Z''-,\'.'\s]{1,30}$"
     EnableClientScript="true"  
     Display="None" 
     ValidationGroup="<%# ((TSAPassenger)((RepeaterItem)Container.Parent.Parent).DataItem).PaxKey %>" 
     runat="server" 
     ErrorMessage="Invalid Relationship.">
     Invalid Relationship
</asp:RegularExpressionValidator> 
```

如果字段名称等于“test”或“tba”，我正在尝试添加以给出相同的错误或不同的错误。我将如何在其中添加另一个表达式？

* * *

第二次验证会是这样吗？

```
 <asp:RegularExpressionValidator ID="RegularExpressionValidator1" ControlToValidate="txtName" ValidationExpression="^.*\b(test|tba)\b.*$"
                                        EnableClientScript="true"  Display="None" ValidationGroup="<%# ((TSAPassenger)((RepeaterItem) Container.Parent.Parent).DataItem).PaxKey %>" runat="server" ErrorMessage="This can not be used as a Contact Name."></asp:RegularExpressionValidator>
                                     <asp:RequiredFieldValidator ID="RequiredFieldValidatorName" ControlToValidate="txtName" Enabled="<%# (Container.ItemIndex == 0 || Container. = "test") %>" ValidationGroup="<%# ((TSAPassenger)((RepeaterItem) Container.Parent.Parent).DataItem).PaxKey %>" runat="server" ErrorMessage="Contact Name is required."></asp:RequiredFieldValidator> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:52:08.043

最好的解决方案是恕我直言，使用自定义验证器并在 onServerValidate 事件中编码您的验证。

当然，您始终可以将另一个 regExp 验证器甚至是比较验证器添加到您正在验证的同一对象。

希望这可以帮助

# jquery - 输入 jQuery Block UI 语句的更快方法

> ID：11747853
> 
> 赞同：0
> 
> 时间：2012-07-31T19:47:34.847
> 
> 标签：jquery

我目前在我的 Web 应用程序上使用 Block UI 模态插件 (http://www.malsup.com/jquery/block/)。

生成模态框需要输入一些 jQuery。我只是想知道我是否以最快的方式这样做。谁能建议一种更快的方法来输入下面的代码，因为我觉得我有点重复？

```
 $(document).ready(function () {

/*=======================================
MODAL WINDOW
=======================================*/

    // register window

    $('#register').click(function () {
        $.blockUI({
            message: $('#register_win'),
            css: {
                width: '500px'
            }
        });
    });

    $('#register_close').click(function () {
        $.unblockUI();
        return false;
    });

    // about window

    $('#about').click(function () {
        $.blockUI({
            message: $('#about_win'),
            css: {
                width: '500px'
            }
        });
    });

    $('#about_close').click(function () {
        $.unblockUI();
        return false;
    });

    // privacy window

    $('#privacy').click(function () {
        $.blockUI({
            message: $('#privacy_win'),
            css: {
                width: '500px'
            }
        });
    });

    $('#privacy_close').click(function () {
        $.unblockUI();
        return false;
    });

    // terms window

    $('#terms').click(function () {
        $.blockUI({
            message: $('#terms_win'),
            css: {
                width: '500px'
            }
        });
    });

    $('#terms_close').click(function () {
        $.unblockUI();
        return false;
    });

    // language window

    $('#language').click(function () {
        $.blockUI({
            message: $('#language_win'),
            css: {
                width: '500px'
            }
        });
    });

    $('#language_close').click(function () {
        $.unblockUI();
        return false;
    });

    // forgot password window

    $('#forgotpwd').click(function () {
        $.blockUI({
            message: $('#forgotpwd_win'),
            css: {
                width: '500px'
            }
        });
    });

    $('#forgotpwd_close').click(function () {
        $.unblockUI();
        return false;
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:56:07.717

如果您只使用消息和 CSS，那么您可以创建一个返回对象的函数。就像是：

```
function blockUIConfig( elementID, width ) {
    return {
        message: $("#" + elementID),
        width: width != null ? width : "500px"
    }
} 
```

然后你可以把它称为：

```
$('#register').click(function () {
    $.blockUI( blockUIConfig( "register_win" ) );
}); 
```

或者如果宽度不同：

```
$('#register').click(function () {
    $.blockUI( blockUIConfig( "register_win", "250px" ) );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:58:25.593

首先在 dom-ready 处理程序之外添加一个函数：

```
function addBlockUI(element) {
   $(element).click(function () {
       $.blockUI({
           message: $(element+'_win'),
           css: {
               width: '500px'
           }
       });
   });

   $(element+'_close').click(function () {
       $.unblockUI();
       return false;
   });
} 
```

然后为 dom-ready 处理程序中的每个元素添加一个调用：

```
addBlockUI("#register");
addBlockUI("#terms");
addBlockUI("#privacy");
addBlockUI("#about");
addBlockUI("#language");
addBlockUI("#forgotpwd"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T20:23:12.133

为每个窗口添加一个类 -

好吧，我不知道您使用什么来触发打开窗口，即链接..按钮..div。所以在我的小提琴中，我只使用了按钮。

```
$('.windowClass').click(function(){  // <-- bind to all window elements with that class
    $.blockUI({
        message: $('#' + this.id + '_win'),
        css: {
            width: '500px'
        }
    });
});

$('[id$=_close]').click(function () { //<-- gets all elements with id's that end with close
    $.unblockUI();
    return false;
}); 
```

锚标签

```
<a id="register" class='openMod' href='#'>Register</a>
<a id="about" class='openMod' href='#'>about</a>
<a id="language" class='openMod' href='#'>language</a>
<a id="terms" class='openMod' href='#'>terms</a>
<a id="privacy" class='openMod' href='#'>privacy</a> 
```

然后

```
$('a.openMod').click(function(e){
    e.preventDefault(); // <-- don't forget this
    $.blockUI({
        message: $('#' + this.id + '_win'),
        css: {
            width: '500px'
        }
    });
}); 
```

使用同一类更新链接

[http://jsfiddle.net/qt9EZ/2/](http://jsfiddle.net/qt9EZ/2/)

# events - F# 中的 Control.Observable 和 Control.Event 模块之间有什么相似之处/不同之处？

> ID：11747861
> 
> 赞同：11
> 
> 时间：2012-07-31T19:47:58.590
> 
> 标签：events, haskell, f#

F#（至少在 Visual Studio 2012 中）同时具有[`Control.Observable`](http://msdn.microsoft.com/en-us/library/ee370313(v=vs.110).aspx)和[`Control.Event`](http://msdn.microsoft.com/en-us/library/ee340422(v=vs.110).aspx).

*   它们有什么关系？
*   什么时候应该用哪一个？
*   两者之间有性能差异吗？

* * *

我也很想知道 .NET 的 Haskell 模块 / 包 / 特性`IEnumerable`/通过*对 .NET 的反应式扩展*`IObservable`实现的二元性对应于什么。

 ** * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T15:30:09.330

`IEvent`要回答您问题的第一部分，和之间存在许多差异`IObservable`。之所以有两种相似的类型，是因为它们`IEvent`是为 F# 设计的（早期主要是出于兼容性原因而将其保留在那里），并且该`IObservable`类型后来被添加到 .NET 中（因此 F# 也添加了对它的支持）。以下是一些区别：

*   `IEvent`不支持*删除*事件处理程序，因此当您创建处理管道（组合`map`等`filter`）然后调用`RemoveHandler`生成的事件时，它会留下一些附加处理程序（是的，这是一个泄漏，[我们写了一篇关于它的更详细的论文](http://tomasp.net/academic/papers/hollywood/)）另一方面`IObservable`是能够删除处理程序。

*   作为前一点的结果，`IObservable`关于有状态组合器的行为不同。例如，当您使用 时`Event.scan`，您可以将多个处理程序附加到结果事件，它们将看到相同的状态。`IObservable`为每个附加的处理程序创建一个“新状态”（除非您明确使用主题）。

在实际的 F# 编程中，这意味着：

*   `IObservable`如果您希望能够删除事件处理程序（使用`RemoveHandler`或`AwaitObservable`在 F# 异步工作流中使用时），您通常应该更喜欢。

*   如果要声明事件（可从 C# 使用），则需要创建类型的属性，`IEvent`因此需要使用`Event`组合器。

正如评论中提到的，F# 模型深受函数响应式编程 (FRP) 的影响，这是一个最初在 Haskell 中开发的想法，因此您应该找到很多类似的库。F# 版本“不那么纯粹”，以便对 .NET 编程更实用。*

# java - 需要从js发送json数据到java

> ID：11747862
> 
> 赞同：0
> 
> 时间：2012-07-31T19:48:01.107
> 
> 标签：java, jquery, json, servlets

我的 javascript 中有一个 JSON 字符串，我需要将它发送到 java 类。我可以使用普通的 java 类还是必须使用 servlet？

另外，如何解析 JSON 数据？

我的 JSON 数据格式如下：

```
 var details=   { "CustomerDetails": [{'name':'Amy','age':'23'},
{'name':'Amj','age':'25'},{'name':'Amg','age':'27'}]}; 
```

我像这样发送json字符串：

```
 var jsonText = JSON.stringify(details);  

    $.post('ServletClass', jsonText); 
```

**WEB.xml：**

```
<servlet>
<servlet-name>ServletClass</servlet-name>
<display-name>ServletClass</display-name>
<servlet-class>java.files.ServletClass</servlet-class>
<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
<servlet-name>ServletClass</servlet-name>
<url-pattern>/ServletClass</url-pattern>
</servlet-mapping> 
```

**在我的 servlet 方面：** 我尝试执行 system.out.println，但一无所获，传输是否正常进行

```
package XXXX;

import javax.servlet.*;
import javax.servlet.http.*;
import java.io.IOException;
import java.files.JSONObject;
import java.files.JSONSerializer;

public class ServletClass extends HttpServlet {
  public void doGet(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException {

  }

  public void doPost(HttpServletRequest request,HttpServletResponse response)throws ServletException, IOException {
      //          doGet(request, response);
      //JSONArray arrayObj = new JSONArray();
      JSONObject jsonObj = new JSONObject(jsonText);
      JSONArray the_
      json_array = jsonObj.getJSONArray("CustomerDetails");
      System.out.println("FINALLY HERE");

  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:51:04.850

首先，你的 JSON 是不正确的。更正的 JSON：

```
{ "CustomerDetails": [{'name':'Amy','age':'23'},{'name':'Amj','age':'25'},{'name':'Amg','age':'27'}]} 
```

如果您希望它是异步的，您应该使用 AJAX 将数据发送到 java 类。您将需要一个 servlet 来接受此请求，它将解析此 JSON，您可以对其进行必要的处理。查看[Jackson](http://jackson.codehaus.org/)或[GS​​ON](http://code.google.com/p/google-gson/)库以进行 JSON 解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:04:20.430

以下更改对我有用： **fullpath=contextpath\servletname**

```
$.post(fullpath, {jsonText:jsonText}, function(data) {
    alert(data);
}); 
```

# asp.net-mvc - MVC 会员和个人资料策略

> ID：11747864
> 
> 赞同：0
> 
> 时间：2012-07-31T19:48:12.183
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, asp.net-membership

请记住，我对此进行了研究并找到了几篇文章，但是，它们大多是旧的（比如从 2​​008 年开始），所以我想要更多关于 ASP.NET MVC 最新版本的最新信息。

我正在使用 Membership 内置的东西来提供用户注册、登录和角色。

我也想使用配置文件功能。

我不知道如何创建配置文件，也找不到任何关于如何在 MVC 3 中执行此操作的文章。我找到了一篇使用 MVC 2 的文章，可能是一样的，但我想使用最新的可用方法。

有人可以向我展示创建个人资料的分步解决方案吗？

我正在考虑使用我自己的会员等级+表单身份验证。这样，创建配置文件就像分配外键一样简单......

专家们有何看法？

请用 VB 而不是 C# 提供你的答案（我不知道为什么每个人都用 C# 给我写东西）。

谢谢。

编辑：这是我的注册功能：

```
'
' POST: /Account/Register

<HttpPost()> _
Public Function Register(ByVal model As RegisterModel) As ActionResult
    If ModelState.IsValid Then
        ' Attempt to register the user
        Dim createStatus As MembershipCreateStatus
        Membership.CreateUser(model.UserName, model.Password, model.Email, Nothing, Nothing, True, Nothing, createStatus)

        If createStatus = MembershipCreateStatus.Success Then
            FormsAuthentication.SetAuthCookie(model.UserName, False)
            Return RedirectToAction("Index", "Home")
        Else
            ModelState.AddModelError("", ErrorCodeToString(createStatus))
        End If
    End If

    ' If we got this far, something failed, redisplay form
    Return View(model)
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:20:22.470

就个人而言，我建议不要使用 SQL Profile Provider（这是您正在使用的）。自 MVC2 以来，配置文件没有任何变化（或者，就此而言，因为它是在 .NET 2.0 的 Web 表单中引入的）。

原因是这样的：配置文件数据以 XML 形式存储在数据库中，这使得在您的应用程序之外使用配置文件数据非常困难（意味着在纯 SQL 查询中）。

直接在数据库中创建配置文件字段可能会好得多。这样您就知道数据来自哪个表/列，并且可以在需要时创建视图。否则，您将不得不解析表列的 XML 以提取配置文件数据（这是 ProfileCommon 在 .NET 中所做的）。

**回复评论**

首先，我对属性名称的理解是错误的。它是`ProviderUserKey`，不是`ProviderKey`。但是，除非您想为匿名用户存储配置文件属性，否则您可以像使用`MembershipUser.UserName`FK 值一样轻松地使用它，因为它也是唯一的。

```
[HttpPost]
public ActionResult Register(RegisterModel model)
{
    MembershipCreateStatus createStatus;
    var membershipUser = Membership.CreateUser(model.UserName, model.Password, 
        model.Email, null, null, true, null, out createStatus);

    if (createStatus == MembershipCreateStatus.Success)
    {
        var providerKeyObject = membershipUser.ProviderUserKey;
        var providerKeyGuid = (Guid)membershipUser.ProviderUserKey;
        // Use providerKeyGuid as a foreign key when inserting into a profile
        // table. You don't need a real db-level FK relationship between
        // your profile table and the aspnet_Users table. You can lookup this
        // Guid at any time by just getting the ProviderUserKey property of the
        // MembershipUser, casting it to a Guid, and executing your SQL.

        // Example using EF / DbContext
        using (var db = new MyDbContext())
        {
            var profile = new MyProfileEntity
            {
                UserId = providerKeyGuid, // assumes this property is a Guid
                FirstName = model.FirstName,
                LastName = model.LastName,
            };
            db.Set<MyProfileEntity>().Add(profile);
            db.SaveChanges();
        }

        // you could get the profile back out like this
        using (var db = new MyDbContext())
        {
            var profile = db.Set<MyProfileEntity>().SingleOrDefault(p => 
                p.UserId == (Guid)membershipUser.ProviderUserKey);
        }
        FormsAuthentication.SetAuthCookie(membershipUser.UserName, false);
        return RedirectToAction("Index", "Home");
    }
    return View(model);
} 
```

这是一个使用 UserName 而不是 ProviderUserKey 的示例。如果您不为匿名用户存储个人资料信息，我会推荐这种方法：

```
[HttpPost]
public ActionResult Register(RegisterModel model)
{
    MembershipCreateStatus createStatus;
    var membershipUser = Membership.CreateUser(model.UserName, model.Password, 
        model.Email, null, null, true, null, out createStatus);

    if (createStatus == MembershipCreateStatus.Success)
    {
        // Example using EF / DbContext
        using (var db = new MyDbContext())
        {
            var profile = new MyProfileEntity
            {
                // assumes this property is a string, not a Guid
                UserId = membershipUser.UserName,
                FirstName = model.FirstName,
                LastName = model.LastName,
            };
            db.Set<MyProfileEntity>().Add(profile);
            db.SaveChanges();
        }

        // you could get the profile back out like this, but only after the 
        // auth cookie is written (it populates User.Identity.Name)
        using (var db = new MyDbContext())
        {
            var profile = db.Set<MyProfileEntity>().SingleOrDefault(p => 
                p.UserId == User.Identity.Name);
        }
        FormsAuthentication.SetAuthCookie(membershipUser.UserName, false);
        return RedirectToAction("Index", "Home");
    }
    return View(model);
} 
```

# python - 选择键来跟踪已经在递归调用中运行的函数

> ID：11747865
> 
> 赞同：1
> 
> 时间：2012-07-31T19:48:32.880
> 
> 标签：python, recursion

[`recursive_repr`](http://docs.python.org/py3k/library/reprlib.html#reprlib.recursive_repr)Python 3.2 中引入的模块中的函数[`reprlib`](http://docs.python.org/py3k/library/reprlib.html#module-reprlib)具有以下 [源代码](http://hg.python.org/cpython/file/default/Lib/reprlib.py)：

```
def recursive_repr(fillvalue='...'):
    'Decorator to make a repr function return fillvalue for a recursive call'

    def decorating_function(user_function):
        repr_running = set()

        def wrapper(self):
            key = id(self), get_ident()
            if key in repr_running:
                return fillvalue
            repr_running.add(key)
            try:
                result = user_function(self)
            finally:
                repr_running.discard(key)
            return result

        # Can't use functools.wraps() here because of bootstrap issues
        wrapper.__module__ = getattr(user_function, '__module__')
        wrapper.__doc__ = getattr(user_function, '__doc__')
        wrapper.__name__ = getattr(user_function, '__name__')
        wrapper.__annotations__ = getattr(user_function, '__annotations__', {})
        return wrapper

    return decorating_function 
```

`key`识别特定功能`__repr__`设置为。`(id(self), get_ident())`

为什么`self`它本身不被用作钥匙？为什么[`get_ident`](http://docs.python.org/library/thread.html#thread.get_ident)需要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:04:04.947

考虑这段代码：

```
a = []
b = []
a.append(b)
b.append(a)
a == b 
```

这会导致堆栈溢出。但是算法需要安全地处理这种情况。如果您放入`self`集合中，它将比较使用`==`并且算法将失败。所以我们`id(self)`改用它不尝试检查对象的相等性。我们只关心它是否是完全相同的对象。

至于`get_indent`，考虑如果两个线程同时尝试使用代码，这个算法会发生什么。该`repr_running`集合在所有线程之间共享。但是，如果多个线程开始从该集合中添加和删除元素，则不知道会发生什么。`get_ident()`对运行它的线程来说是唯一的，所以通过将它与密钥一起使用，我们知道所有线程都将使用不同的密钥并且没问题。

# javascript - Javascript Xml 计数

> ID：11747868
> 
> 赞同：2
> 
> 时间：2012-07-31T19:48:43.253
> 
> 标签：javascript, xml, nodes

示例 XML。

```
<node>
<nodeid>28</nodeid>
<account_no xsi:nil="true" />
<address1>15 CANCUN CT</address1>
<serial_no>112199543</serial_no>
<x_lat>25.95513358000</x_lat>
<y_lon>-97.49027147000</y_lon>
<alarm>
  <alarmid>Outage</alarmid>
  <alarmtime>2012-07-30T14:46:29</alarmtime>
</alarm>
<alarm>
  <alarmid>Restore</alarmid>
  <alarmtime>2012-07-30T14:55:29</alarmtime>
</alarm>
</node>
<node>
<nodeid>67</nodeid>
<account_no>274192</account_no>
<address1>1618 CHIPINQUE DR</address1>
<serial_no>112199521</serial_no>
<x_lat>25.95286395000</x_lat>
<y_lon>-97.49323166000</y_lon>
<alarm>
  <alarmid>Outage</alarmid>
  <alarmtime>2012-07-30T14:46:29</alarmtime>
</alarm>
</node>
</ROOT> 
```

我要数数

```
<alarm> 
```

第一个节点和第二个节点具有的元素。我试图在 for 循环中做到这一点......

```
xmlDoc.getElementByTagName('alarm')[i].length; 
```

这给了我 xml 文件中所有数量的“警报”标签。我想要的只是当前的“节点”警报元素。所以这就是我想要的，我想让它告诉我第一个有 2

```
<alarm> 
```

标签和第二个“节点”有 1

```
<alarm> 
```

只是 javascript 没有 jQuery。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T19:53:23.897

试试这个：

```
var nodes = xmlDoc.getElementsByTagName('node'), //Get the <node> tags
    amountOfNodes = nodes.length

for(var i = 0; i < amountOfNodes; i++) { //loop thru the nodes

   console.log(nodes[i].getElementsByTagName('alarm').length); //get the amount of <alarm> tags

} 
```

**编辑** 这是一个工作示例：[Fiddle](http://jsfiddle.net/ncvuq/)。

告诉我这是否解决了你的问题:)

# c++ - 字符串数组输出

> ID：11747875
> 
> 赞同：0
> 
> 时间：2012-07-31T19:49:17.153
> 
> 标签：c++, arrays, string

我怎样才能让这个程序的输出正常工作？我不确定为什么字符串数组不会存储我的值，然后在我的程序结束时输出它们。谢谢。

```
#include <iostream>
#include <string>
using namespace std;
int main ()
{
    int score[100], score1 = -1;
    string word[100];
    do
    {
        score1 = score1 + 1;
        cout << "Please enter a score (-1 to stop): ";
        cin >> score[score1];
    }
    while (score[score1] != -1);
    {
        for (int x = 0; x < score1; x++)
        {
            cout << "Enter a string: ";
            getline(cin,word[x]);
            cin.ignore();
        }
        for (int x = 0; x < score1; x++)
        {
            cout << score[x] << "::" << word[x] << endl; // need output to be 88:: hello there.
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:08:30.800

我已经更正了你的代码。尝试这样的事情

```
#include <iostream>
#include <string>
using namespace std;
int main ()
{
    int score[100], score1 = -1;
    char word[100][100];
    do
    {
        score1++;
        cout << "Please enter a score (-1 to stop): ";
        cin >> score[score1];
    }
    while (score[score1] != -1);

    cin.ignore();

    for (int x = 0; x < score1; x++)
    {
        cout << "Enter a string: ";
        cin.getline(word[x], 100);
    }

    for (int x = 0; x < score1; x++)
    {
        cout << score[x] << "::" << word[x] << endl; // need output to be 88:: hello there.
    }

} 
```

好吧，我做了什么？首先我删除额外的*{*。当我第一次看到你的代码时，我不知道 do.while 中是否有 do..while 循环或 while 循环。接下来我将字符串数组更改为 char 数组，只是因为我知道如何将行读取为 char 数组。当我需要读取行到字符串时，我总是使用我自己的函数，但如果你真的想使用字符串[，这里](https://stackoverflow.com/a/5059112/1387612)是一个很好的例子。休息很明显。*cin.ignore()*是必需的，因为换行符保留在缓冲区中，所以我们需要省略它。

**编辑：** 我刚刚找到了修复代码的更好方法。一切正常，但您需要移动*cin.ignore()*并将其放置在*while (score[score1] != -1);* . 因为 wright 现在您忽略了每一行的第一个字符，并且您只需要在用户类型 -1 后忽略新行。[固定代码。](http://ideone.com/E6JQx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:54:53.487

在第一个循环中，在分配第一个值之前增加“score1”。这会将您的值放在从索引 1 开始的 score[] 数组中。但是，在下面的“for”循环中，您从 0 开始索引，这意味着您的分数/字符串关联将减一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T19:56:27.907

代替

```
getline(cin,word[x]);
cin.ignore(); 
```

和

```
cin >> word[x]; 
```

然后试着找出你哪里出错了。

# c++ - 从矢量存储和检索 IplImages？

> ID：11747877
> 
> 赞同：0
> 
> 时间：2012-07-31T19:49:25.007
> 
> 标签：c++, opencv

我想将`IplImage`'s （从视频文件中获取）存储到一个向量中，然后从这个`iplimage`向量中播放。

```
#include <iostream>
#include "highgui.h"
using namespace std;

int main()
{
    CvCapture* capture=cvCreateFileCapture("D:\\Video\\Hands tracking.avi");
    vector<IplImage*> imagesNames[2];

    //playing video
    while(1)
   {
       IplImage* img=cvQueryFrame(capture);
       cvShowImage("Video Opencv example nd testing purpose",img);

       imagesNames[0].push_back(img);

       char c = cvWaitKey(30);
       if(c==27) break;
   }

  cvDestroyWindow( "Video Opencv example nd testing purpose" );
  cvReleaseCapture(&capture);

// play back grabbed IplImages
  for(unsigned i=0; imagesNames[0].size();i++)
  {
    cvShowImage("PlayBack from IplImages vector",imagesNames[0][i]);

    char c = cvWaitKey(30);

    if(c==27) break;
   }
return 0;
} 
```

但是上述程序的播放部分无法正常工作并在运行时显示错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:05:47.980

```
#include <iostream>
#include "highgui.h"
using namespace std;

int main()

{

    CvCapture* capture=cvCreateFileCapture("D:\\Video\\Hands tracking.avi");
    vector<IplImage*> imagesNames;

    //playing video
    while(1)
   {
       IplImage* img=cvQueryFrame(capture);
       cvShowImage("Video Opencv example nd testing purpose",img);

       imagesNames.push_back(img);

      char c = cvWaitKey(30);
      if(c==27)
       break;

   }

  cvDestroyWindow( "Video Opencv example nd testing purpose" );
  cvReleaseCapture(&capture);

// play back grabbed IplImages
 for(unsigned i=0; i < imagesNames.size();i++)
 {

    cvShowImage("PlayBack from IplImages vector",imagesNames[i]);

    char c = cvWaitKey(30);

    if(c==27)
    break;

}
return 0;

} 
```

# c# - 在同一方法签名中的 Func 的 TIn 的扩展方法中使用此 Type 参数的类型

> ID：11747883
> 
> 赞同：3
> 
> 时间：2012-07-31T19:49:52.083
> 
> 标签：c#, generics, types, extension-methods, func

我很确定这是可能的，但是由于某种原因，我似乎无法弄清楚...我正在尝试从 Type 中创建一个扩展方法，它将把 Func 接收到该类型的属性中，并从 DefaultValueAttribute 中提取 DefaultValue。

我可以让它工作，但前提是我为 GetDefaultValue 函数调用指定类型参数。这是我目前拥有的代码：

个人实体：

```
public class Person
{
    public string FirstName { get; set; }

    [DefaultValue("1234")]
    public string DOB { get; set; }
} 
```

调用方法：

```
//Messing around in LinqPad - .Dump() is LinqPad method

//Works
//typeof(Person).GetDefaultValue<Person, string>(x=>x.DOB).Dump();

//Trying to get to work
//Can't figure out how to get it to infer that TIn is of the Type type.....
typeof(Person).GetDefaultValue(x=> x.DOB).Dump(); 
```

这就是方法调用的去向……我只是想在我将其合并到我的实际程序中之前找出方法……一旦我弄清楚如何去做，错误检查就会发挥作用，或者放弃b/c是做不到的...

```
public static class Extensions
{
    //    Works
    //    public static TProperty GetDefaultValue<TModel, TProperty>(this Type type, Expression<Func<TModel, TProperty>> exp)
    //    {
    //        var property = typeof(TModel).GetProperties().ToList().Single(p => p.Name == GetFullPropertyName(exp));
    //        var defaultValue = (DefaultValueAttribute)property.GetCustomAttributes(typeof(DefaultValueAttribute), false).FirstOrDefault();
    //        return (TProperty)defaultValue.Value;
    //    }

    //trying to get to work
    //I know that I can't do the following, but it is basically what I am trying to do...  I think!
    public static TProperty GetDefaultValue<TProperty>(this Type type, Expression<Func<typeof(type), TProperty>> exp) 
    {
        var property = type.GetProperties().ToList().Single(p => p.Name == GetFullPropertyName(exp));
        var defaultValue = (DefaultValueAttribute)property.GetCustomAttributes(typeof(DefaultValueAttribute), false).FirstOrDefault();
        return (TProperty)defaultValue.Value;
    }

    //GetFullPropertyName c/o: http://stackoverflow.com/users/105570/
    //ref: http://stackoverflow.com/questions/2789504/
    public static string GetFullPropertyName<TModel, TProperty>(Expression<Func<TModel, TProperty>> exp)
    {
        MemberExpression memberExp;

        if (!TryFindMemberExpression(exp.Body, out memberExp))
               return String.Empty;

        var memberNames = new Stack<string>();
        do
            memberNames.Push(memberExp.Member.Name);
        while (TryFindMemberExpression(memberExp.Expression, out memberExp));

        return String.Join(".", memberNames.ToArray());
    }

    private static bool TryFindMemberExpression(Expression exp, out MemberExpression memberExp)
    {
        memberExp = exp as MemberExpression;
        if (memberExp != null)
            return true;

        if (IsConversion(exp) && exp is UnaryExpression)
        {
            memberExp = ((UnaryExpression)exp).Operand as MemberExpression;
            if (memberExp != null)
                return true;
        }    

        return false;
    }

    private static bool IsConversion(Expression exp)
    {
        return exp.NodeType == ExpressionType.Convert || exp.NodeType == ExpressionType.ConvertChecked;
    }
} 
```

我疯了，还是这真的可能？预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:59:05.577

这不是它的工作方式——`typeof(Person)`没有名为 的属性`DOB`，但类型为 Person 的类有。您想要的是使您的扩展方法通用：

```
public static TValue GetDefaultValue<TClass, TValue>(this TClass val, Expression<Func<TClass, TValue>> getter) {
    var type = typeof(TClass);
    var property = type.GetProperties().ToList().Single(p => p.Name == GetFullPropertyName(exp));
    var defaultValue = (DefaultValueAttribute)property.GetCustomAttributes(typeof(DefaultValueAttribute), false).FirstOrDefault();
    return (TProperty)defaultValue.Value;
} 
```

并称之为：

```
Person somePerson = GetMeAPerson();
somePerson.GetDefaultValue(p=>p.DOB); 
```

请注意，我没有测试过上述内容，但我在过去看到过类似的代码。也就是说，我怀疑您最初尝试做的这种方式并不是很吸引人，因为您需要先创建一个 Person 实例。

另一种可能更吸引人的方法是根本不使其成为扩展方法：

```
public static TValue GetDefaultValue<TClass, TValue>(Expression<Func<TClass, TValue>> getter) {
    var type = typeof(TClass);
    var property = type.GetProperties().ToList().Single(p => p.Name == GetFullPropertyName(exp));
    var defaultValue = (DefaultValueAttribute)property.GetCustomAttributes(typeof(DefaultValueAttribute), false).FirstOrDefault();
    return (TProperty)defaultValue.Value;
} 
```

然后你可以在没有实例的情况下调用它，但推理不是很好）：

```
var defaultValue = GetDefaultValue<Person, DateTime>(p => p.DOB); 
```

# sql - bcp 错误：转换/操作导致溢出

> ID：11747886
> 
> 赞同：1
> 
> 时间：2012-07-31T19:50:15.767
> 
> 标签：sql, sybase, bcp

我有一个包含 8 位数字的文本文件，我想将其复制到我创建的 Sybase 表中：

创建表 foo ( id numeric(20) )

我正在使用数字，因此我可以加入现有表中的另一个数字列。

我的 bcp 命令的格式信息是： 10.0 1 1 SYBNUMERIC 1 12 "\n" 1 id 20 0

bcp 复制失败，并多次重复以下消息：

CSLIB 消息：- L0/O0/S0/N20/1/0：cs_convert：cslib 用户 api 层：公共库错误：转换/操作导致溢出。

我没有看到任何可能导致输入文本文件溢出的数字。

关于如何复制这些数据和/或为什么会失败的任何建议？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:09:30.523

我将表格更改为 id 为 int。bcp 没有出错，但数据不正确。

因此，我将 id 表更改为 varchar 并且 bcp 工作正常。然后我将 id 改回 numeric(20) 并且它可以工作。

这并不能解决 bcp 问题，但确实给了我一个解决方案来获取我需要的数据，这是真正的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-10T20:06:10.497

尝试使用不带 -f 的 -c 参数。它不会提示格式，它会正常工作。问题通常是格式使用的默认值不正确。

# f# - 只读与自动（只读）属性

> ID：11747887
> 
> 赞同：7
> 
> 时间：2012-07-31T19:50:15.953
> 
> 标签：f#, f#-3.0

使用只读属性是否有区别：

```
type T(arg) =
  member x.M = arg 
```

并使用自动实现的属性：

```
type T(arg) =
  member val M = arg 
```

假设`arg`没有副作用？有什么理由比另一个更喜欢一个吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T20:51:49.320

它们之间的本质区别在于`member val`表示在实例初始化期间**仅计算一次的表达式。**所以，

```
type Person(fname, lname) =
  member val Name = fname + lname // would be calculated once 
```

所以，首先要考虑的是性能。

另一个考虑是基于 auto 属性的两个限制：

*   您只能在具有主要 ctor 的类型中使用它们；
*   他们不可能`virtual`

# objective-c - 来自任何地方的键盘事件

> ID：11747888
> 
> 赞同：-1
> 
> 时间：2012-07-31T19:50:24.007
> 
> 标签：objective-c, cocoa

我想构建一个应用程序，当用户按下（键盘）按钮时，不管前面运行的是什么应用程序。（如“CheatSheet”）
我该怎么做？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-31T19:56:15.720

您是指来自其他应用程序的键盘记录输入吗？如果是这样，由于明显的安全问题，这是不可能的。

# gcc - 当 __builtin_memcpy 被 libc 的 memcpy 替换时

> ID：11747891
> 
> 赞同：20
> 
> 时间：2012-07-31T19:50:38.323
> 
> 标签：gcc, c99, memcpy, built-in

`memcpy`GCC中有一个版本的 C99/posix函数： `__builtin_memcpy`.

有时它可以被 GCC 替换为内联版本的 memcpy，而在其他情况下，它被调用 libc 的 memcpy 替换。[例如，这里](http://lwn.net/Articles/29183/)指出：

> 最后，在编译器注释中， __builtin_memcpy 可以退回到发出 memcpy 函数调用。

这个选择的逻辑是什么？其他 gcc 兼容编译器的逻辑是否相同，例如 clang/llvm、intel c++ 编译器、PCC、suncc (oracle studio)？

什么时候我应该更喜欢使用 __builtin_memcpy 而不是普通的 memcpy？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-04T23:05:28.017

前段时间我一直在尝试使用内置替换，我发现`<string.h>`只有在编译时可以知道源参数的大小时才会替换这些函数。在这种情况下，调用将`libc`直接由展开的代码替换。

`-fno-builtin`除非您使用,或类似的东西进行编译`-ansi`，否则您是否使用前缀`-std=c89`实际上并不重要。`__builtin_`

虽然很难理解，但决定是否发出库调用或一段代码的代码似乎在[这里](http://gcc.gnu.org/git/?p=gcc.git;a=blob;f=gcc/expr.c;h=7e909bc0f5c8035cfe17f643cbad826c2d41cd6c;hb=9bcca88e24e64d4e23636aafa3404088b13bcb0e#l1102)。

# node.js - wkhtmltopdf 暂停，需要人工干预

> ID：11747892
> 
> 赞同：1
> 
> 时间：2012-07-31T19:50:41.007
> 
> 标签：node.js, wkhtmltopdf

更新：

似乎是 wkhtmltopdf 没有正确退出的问题

* * *

我在节点中执行以下操作：

```
console.log("before");
fs.writeFile(html_filename, html, function (err) {
  if (err) {res.writeHead(400); res.end("" + err); return;}

  console.log("wrote html fine; now converting");
  exec('wkhtmltopdf ' + html_filename + ' ' + pdf_filename, function (err, stdout, stderr) {
    if (err) {res.writeHead(400); res.end("" + err); return;}

    console.log("converted; now reading");
    fs.readFile(pdf_filename, function (err, data) {
      if (err) {res.writeHead(400); res.end("" + err); return;}

      console.log("read fine; now serving");
      res.writeHead(200, {"content-type" : "application/pdf"});
      res.end(data);
    });
  });
}); 
```

这工作正常，除了每次执行时，节点程序都会挂起，当我 cmd + tab 时，我看到一个“exec”进程。当我选择此过程时，节点程序会继续。

任何想法为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T01:19:25.270

作为 wkhtmltopdf 的替代品，我会使用 Phantom.js：[http ://phantomjs.org/](http://phantomjs.org/)

您可以创建一个简单的光栅化脚本：

```
var page = require('webpage').create(),
address, output, size;

if (phantom.args.length < 2 || phantom.args.length > 3) {
    console.log('Usage: rasterize.js URL filename');
    phantom.exit();
} else {
    address = phantom.args[0];
    output = phantom.args[1];
    page.viewportSize = { width: 600, height: 600 };
    page.open(address, function (status) {
        if (status !== 'success') {
            console.log('Unable to load the address!');
        } else {
            window.setTimeout(function () {
                page.render(output);
                phantom.exit();
            }, 200);
        }
    });
} 
```

然后调用：

```
phantomjs rasterize.js http://path/to/webpage output.pdf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:16:18.680

嗯，这看起来像一个 osx 错误...

# macos - 相当于 Mac 上的 MFMailComposer

> ID：11747894
> 
> 赞同：4
> 
> 时间：2012-07-31T19:50:47.207
> 
> 标签：macos, cocoa

iOS 有一个不错的`MFMailComposer`类，可以让用户撰写电子邮件。什么是在 Mac Mail 中打开一个新窗口的最佳方法，其中电子邮件预先格式化，就像 Mountain Lion 和 Reeder 应用程序中的 Safari 共享按钮所做的那样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:57:37.853

嗯，我认为最近推出的 10.8`NSSharingService`应该是我的答案：http: [//developer.apple.com/library/Mac/#documentation/AppKit/Reference/NSSharingService_Class/Reference/Reference.html](http://developer.apple.com/library/Mac/#documentation/AppKit/Reference/NSSharingService_Class/Reference/Reference.html)

# api - Google Maps API Geocode Postal Code 并设置国家代码？

> ID：11747901
> 
> 赞同：16
> 
> 时间：2012-07-31T19:51:08.667
> 
> 标签：api, google-maps

我正在使用此 API 调用 Google Maps 来获取邮政编码的纬度和经度

[http://maps.googleapis.com/maps/api/geocode/json?address=2340&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=2340&sensor=false)

邮政编码在澳大利亚。此 API 调用返回世界各地的地址，地址中包含部分匹配的邮政编码。

有没有可以用来将国家设置为澳大利亚的参数？

谢谢

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-10T18:27:22.093

正确的方法不是通过区域偏置，而是使用[组件过滤](https://developers.google.com/maps/documentation/geocoding/overview#component-filtering)：

```
https://maps.google.com/maps/api/geocode/json
    ?components=country:AU|postal_code:2340
    &sensor=false 
```

一些示范：

*   [2340](http://maps.google.com/maps/api/geocode/json?components=country:AU%7Cpostal_code:2340&sensor=false)
*   [93274](http://maps.google.com/maps/api/geocode/json?components=country:AU%7Cpostal_code:93274&sensor=false)

请注意，如果使用 components 参数，则无需指定 address 参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:23:33.117

文档说[Region](https://developers.google.com/maps/documentation/geocoding/#RegionCodes) Biasing是基于[CcTLDs](http://en.wikipedia.org/wiki/CcTLD)，这将使澳大利亚 au （我自己没有尝试过）。

虽然它也说明了这一点：

> 请注意，偏差只偏爱特定领域的结果；如果在此域之外存在更多相关结果，则它们可能会被包括在内。

# html - 垂直和居中对齐文本

> ID：11747902
> 
> 赞同：0
> 
> 时间：2012-07-31T19:51:16.360
> 
> 标签：html, css

我有一个`h1`在里面`body`并且想要垂直对齐和居中对齐这个文本。

我知道我可以使用`position: absolute;`then`margin-top: "HALF OF HEIGHT";`但是这个 h1 在刷新时会发生变化并且具有不同的宽度。高度始终相同，因此我可以很好地垂直对齐它，但它是居中对齐的。我不能使用`text-align: center;`，因为 h1 是绝对定位的，所以它不起作用。

有没有更简单的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:55:23.643

鉴于该元素没有背景，您可以这样做以将具有绝对定位的元素水平居中：

```
.your-element {
    position: absolute;
    width: 100%;
    text-align: center;
}​ 
```

一个工作小提琴：http: [//jsfiddle.net/VSySg/](http://jsfiddle.net/VSySg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:56:25.123

**根据**您的布局的其余部分，这可能会起作用：

```
h1 {
    display: block;
    text-align: center;
    line-height: /* height of container */
} 
```

[http://jsfiddle.net/xC3vn/](http://jsfiddle.net/xC3vn/)

# css - 扩展具有可变高度和宽度的 div

> ID：11747904
> 
> 赞同：0
> 
> 时间：2012-07-31T19:51:20.887
> 
> 标签：css, html, height

我正在尝试创建一个将扩展到其容器底部的 div。布局由父容器中的两列组成。两列的宽度都是百分比，父容器和左列的高度根据左列中的幻灯片展开。我希望右列的高度与左列相匹配，所以我可以在底部放置一些东西。我尝试了很多不同的东西，但无济于事。这是页面：

[http://whub30.webhostinghub.com/~scottl9/testindex2.html](http://whub30.webhostinghub.com/~scottl9/testindex2.html)

html是

```
<div id="content_section">
    <div class="imgwrap">
      <div class="imgwrap2">
         Left-column content
      </div>
      <div class="playersection">
         Right-column content
      </div>
    </div>
<div class="clearall"></div>
</div> 
```

对应的 CSS 是

```
 #content_section { position:relative; min-height:400px; min-width:600px; max-height: 1000px; max-width:2000px;}
.imgwrap {position:relative; width:100%; height:auto; min-width:409px; min-height:230px; border-style:solid; border-width:medium; display: inline-block;}
.imgwrap2 {position:relative; float:left; width:70%; height:auto;}
.playersection {border-style:solid; width:30%; position: relative; float: right; border-width:medium;}
.clearall {clear:both;}` 
```

（我添加了边框，所以我可以看到 div。）任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:10:58.047

尝试将右列的高度更改为 100%。

```
.imgwrap2 {position:relative; float:left; width:70%; height:100%;} 
```

# ruby-on-rails - UnInitialized Constant 错误不包括完整的命名空间

> ID：11747910
> 
> 赞同：0
> 
> 时间：2012-07-31T19:51:42.363
> 
> 标签：ruby-on-rails, ruby

这是我的常数：

```
Book::Page::KIND 
```

这是在这里定义的：

```
class Book::Page < ActiveRecord::Base
    KIND = 0
...
end 
```

并且模型位于正确的位置：

应用程序/模型/书/page.rb

问题是，在我试图呈现的一种观点中：

```
<%= Book::Page::KIND %> 
```

我得到错误：

```
uninitialized constant Page::KIND 
```

这很奇怪，因为它不包括 Book:: Prefix ...

那是怎么回事？我能做些什么来帮助调试/解决这个问题？

我正在使用 Ruby 1.8.7 和 Rails 2.3.14

# python - python- os.system() 没有正确打开然后立即关闭文件

> ID：11747914
> 
> 赞同：0
> 
> 时间：2012-07-31T19:51:50.880
> 
> 标签：python

我试图让一个 python 脚本在我知道的目录中打开另一个 python 脚本，但实际的文件名是一个变量。我想执行该文件或能够导入该文件（任何一种方式都适用于我正在尝试做的事情），但我遇到了每个问题。

为了尝试执行它，dos 样式框出现但很快消失，太快了，无法真正做任何事情。我什至添加了 Raw_Input() 并自行执行文件并让它工作。这是代码上的类似内容：

```
os.system("python actions/"+Script) 
```

脚本是字符串中 python 文件的名称。我知道该文件已找到，但问题是它消失得太快

我尝试做的另一种方法是导入文件：

```
import 'actions/'+Script 
```

这是我能想到的唯一合乎逻辑的方式来导入该死的东西，但我不断收到语法错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T20:40:53.357

使用该[`__import__`函数](http://docs.python.org/library/functions.html#__import__)导入一个直到运行时才知道名称的模块：

```
# Import the module
mymodule = __import__('actions/' + Script)

# Call functions in the module etc.
mymodule.do_something(42); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:02:34.190

或者尝试**import**（我相信已经有一段时间了）或 importlib （在 python 2.7 中添加）：

导入">http://docs.python.org/library/functions.html#**导入** http://docs.python.org/library/importlib.html#importlib.import_module

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-31T19:54:58.497

尝试：

```
import sys
sys.path = ["./actions"] + sys.path
exec("import " + Script[-3]) 
```

# c# - 拦截按钮点击页面加载

> ID：11747915
> 
> 赞同：3
> 
> 时间：2012-07-31T19:51:56.547
> 
> 标签：c#, asp.net, c#-4.0, delegates, event-handling

我需要编写一个可以拦截单击某个按钮（asp按钮）而不是执行某些代码的代码，如果方法返回true，则调用原始单击。

所以要点是：

1-我不知道如何保存原始点击。

2- 识别被点击的按钮。

前任：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        var b = getButtonThatWasClicked();

        var originalClick = b.Click;

        if(callSomeMethod(b))
            originalClick(null,null);
    } 
```

编辑：

好的，设法让单击的按钮执行此操作...现在我需要防止原始的单击被调用。下面的方法没有奏效。即使将原始点击覆盖到新的处理程序，旧的处理程序也会被调用并执行。我的东西 ASP.NET 读取它并制作类似于事件调用堆栈的东西来被调用。即使处理程序更改旧的仍然在堆栈中。

```
 public void ButtonsTestMethod()
    {
        var listOfButtons = listaDeBotes.Where(b => b.CommandName != "");

        foreach (var button in listOfButtons)
        {
            if (Request.Form[button.UniqueID] != null)
            {
                var buttonFromRequest = Request.Form[button.UniqueID];
                if (buttonFromRequest == null)
                    continue;

                if (button.CommandName != "xxx")
                { 
                    //validate things
                    //if(TemPermissao(Tela,GetAcaoDoBotao(botao.CommandName)))
                    //if(!canexecuteSomething())
                    button.Click += new EventHandler(defaultClick);   
                }
            }
        }
    }

    void defaultClick(object sender, EventArgs e)
    {
        //show error
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        //other code
        ButtonsTestMethod();
    } 
```

我不知道它是否可能，但希望能得到一些帮助 =/

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T20:05:39.210

要获取控件名称，您可以在页面加载中尝试以下操作：

```
protected void Page_Load(object sender, EventArgs e)
 {
    if( IsPostBack ) 
    {
        string senderControl = Request.Params["__EVENTTARGET"].ToString();
        //senderControl will contain the name of the button/control responsible for PostBack
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:58:16.850

按钮单击事件处理程序中的第一个参数是发送者。您可以将该发件人转换为`Button`对象，然后您应该能够识别基于该对象的按钮。这样，您就可以消除使用该功能来确定哪个被点击了。

```
void GreetingBtn_Click(Object sender, EventArgs e)
{
    Button clickedButton = (Button)sender;
    if(clickedButton.Text == "bla")
    {
        //Do stuff
    }
} 
```

# joomla - Joomla 文件处理 - 变量名未传递

> ID：11747916
> 
> 赞同：0
> 
> 时间：2012-07-31T19:51:57.967
> 
> 标签：joomla, components

我制作了一个具有“文件”字段类型的组件，但是该单个字段的内容根本没有传递，我的印象是它至少应该将文件名保存为文本，如果我将字段类型更改为“文本” “这个名字保存了，所以我知道其他一切都在运作。所有其他字段都被传递。我究竟做错了什么？

除了文件处理，我只想让它保存名称。

一个详细的解释将不胜感激，甚至更好，我可以让知道他在做什么的人使用 MVC 重写这个组件，以便我可以比较。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:57:40.353

到目前为止，您还没有提供任何代码，因此无法真正帮助您解决问题，但是我们的网站最近为 Joomla 2.5 制作了一个简单的小组件，用于使用 SWFUpload 框架上传文件，如果您想使用它的话。

[http://joomjunk.co.uk/products/component-home/swfupload.html](http://joomjunk.co.uk/products/component-home/swfupload.html)

# html - HTMLPurifier 允许类属性

> ID：11747918
> 
> 赞同：7
> 
> 时间：2012-07-31T19:51:59.667
> 
> 标签：html, htmlpurifier

如何在 HTMLPurifier 中允许“类”？我正在尝试净化这个：

```
 <div class="txt_r" id="test">Blah</div> 
```

我得到：

```
 <div id="test">Blah</div> 
```

为什么阶级消失了？我正在使用下一个配置：

```
 $config->set('Attr.EnableID', true);
 $config->set('CSS.Trusted', true);
 $config->set('HTML.AllowedAttributes', 'style, src, class'); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-01T12:00:06.833

你的问题可能是**[`HTML.AllowedAttributes`](http://htmlpurifier.org/live/configdoc/plain.html#HTML.AllowedAttributes)**实际上并没有那样工作。:) 来自文档：

> 全局属性（style、id、class、dir、lang、xml:lang）的语法是“tag.attr”或“*.attr”。

你可能想要的是...

```
$config->set('HTML.AllowedAttributes', 'img.src,*.style,*.class'); 
```

您也不应该单独使用`HTML.AllowedAttributes`，而应与**[`HTML.AllowedElements`](http://htmlpurifier.org/live/configdoc/plain.html#HTML.AllowedElements)**：

```
$config->set('HTML.AllowedElements', 'img,div'); 
```

**或者**，*既不使用* `HTML.AllowedAttributes` *也不* `HTML.AllowedElements`使用，而是使用**[`HTML.Allowed`](http://htmlpurifier.org/live/configdoc/plain.html#HTML.Allowed)**. 看起来像这样：

```
$config->set('HTML.Allowed', 'div, *[style|class], img[src]'); 
```

# iphone - 将 UIActivityIndi cator 添加到 UITableView

> ID：11747926
> 
> 赞同：0
> 
> 时间：2012-07-31T19:52:31.770
> 
> 标签：iphone, ios, uitableview, uiactivityindicatorview

我需要在表格视图中加载一些数据，当这在后台进行时，我想添加一个活动指示器，以显示有一个进程正在进行，并且在进程完成后将隐藏。实现这样的事情的最有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:58:46.190

取决于您是否要阻止您的用户以及活动指示的重要性。

如果你不想阻止用户，`Application.networkActivityIndicatorVisible`使用`tableview.height -= activityview.height`阻止用户，使用阻止活动指示器。

*   [http://www.dejal.com/developer/?q=developer/dsactivityview](http://www.dejal.com/developer/?q=developer/dsactivityview)
*   [https://github.com/jdg/MBProgressHUD](https://github.com/jdg/MBProgressHUD)（我个人用的是MBProgressHUD，好学好用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:56:13.793

您可以添加一个具有 UIIndicatorView 和 UILabel 的视图作为单元格的子视图。您可以使用这种方式显示错误数据加载/错误网络/空数据...

例子：

你的 Controller 可以定义两种模式：UITableViewModeMessage 和 UITableViewModeData。

在 viewDidLoad 中，您设置 self.tableViewMode = UITableViewModeMessage。返回数据后，设置 self.tableViewMode = UITableViewModeData 并为 tableview 重新加载数据。

一些代码：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
    if (self.tableViewMode == UITableViewModeMessage) {
        return 2;
    } else {
        return self.yourEntries ? self.yourEntries.count : 0;
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    if (self.tableViewMode == UITableViewModeMessage) {
        return [self tableView:tableView messageCellForRowAtIndexPath:indexPath];
    } else {
        return [self tableView:tableView dataCellForRowAtIndexPath:indexPath];
    }
}

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
// Remove Loading... progress view if exist.
    UIView *progressView = [cell viewWithTag:100];
    [progressView removeFromSuperview];

    if (self.tableViewMode == UITableViewModeMessage) {        
        if (indexPath.row == 1) {
            // remove the current label.
            cell.textLabel.text = nil;

            // We build progress view and attach to cell here but not in cellForRowAtIndexPath is because in this method cell frame is already calculated.
            UIView *progressView = [self progressViewForCell:cell message:@"Loading..." alpha:0.9];
            [cell addSubview:progressView];
        }
    }
}

// cell to display when loading
- (UITableViewCell *)tableView:(UITableView *)tableView messageCellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"MessageCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.textLabel.textColor = [UIColor grayColor];
        cell.textLabel.textAlignment = UITextAlignmentCenter;
    }

    if (indexPath.row == 1) {
        cell.textLabel.text = @"Loading...";
    } else {
        cell.textLabel.text = nil;
    }

    return cell;
}

// cell to display when has data
- (UITableViewCell *)tableView:(UITableView *)tableView dataCellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    static NSString *CellIdentifier = @"DataCell";

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [[self.yourEntries objectAtIndex:indexPath.row] description];

    return cell;
}

// Build a view which has a UIActivityIndicatorView and a UILabel
- (UIView *)progressViewForCell:(UITableViewCell *)cell message:(NSString *)message alpha:(CGFloat)alpha
{
    // NOTE: progressView needs to be removed from cell in cellForRowAtIndexPath:
    CGRect progressViewFrame = CGRectZero;
    progressViewFrame.size.width = CGRectGetMaxX(cell.bounds);
    progressViewFrame.size.height = CGRectGetMaxY(cell.bounds) - 2;

    UIView *progressView = [[UIView alloc] initWithFrame:progressViewFrame];
    progressView.backgroundColor = RGBA(255, 255, 255, 1);
    progressView.alpha = alpha;
    progressView.tag = 100;

    UILabel *loadingLabel = [[UILabel alloc] initWithFrame:progressView.bounds];
    loadingLabel.backgroundColor = [UIColor clearColor];
    loadingLabel.font = [UIFont systemFontOfSize:14];
    loadingLabel.textColor = [UIColor blackColor];
    loadingLabel.textAlignment = UITextAlignmentCenter;
    loadingLabel.text = message;

    CGFloat widthOfText = [loadingLabel.text sizeWithFont:loadingLabel.font].width;
    CGFloat spaceBetweenIndicatorAndLabel = 5;

    // activityIndicatorView has size in which width and height is equal to 20.
    UIActivityIndicatorView *activityIndicatorView = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    [activityIndicatorView setCenter:CGPointMake(CGRectGetMidX(cell.bounds) - (widthOfText / 2) - (activityIndicatorView.bounds.size.width / 2) - spaceBetweenIndicatorAndLabel, CGRectGetMidY(cell.bounds))]; 
    [activityIndicatorView setColor:[UIColor blackColor]];
    [activityIndicatorView startAnimating];

    [progressView addSubview:activityIndicatorView];
    [progressView addSubview:loadingLabel];

    return progressView;
} 
```

# session - 无法检索 EventBrite 访问令牌

> ID：11747927
> 
> 赞同：0
> 
> 时间：2012-07-31T19:52:34.613
> 
> 标签：session, login, oauth, eventbrite

我试图使用 EB 的 loginWidget 示例对用户进行身份验证，并且在调试时，
我发现 getAccessToken() 请求始终返回 null
，即使会话已成功创建。

我传递给 loginWidget 的参数是：
我从 app key 得到的 user secret，以及 app key。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:21:51.910

你在使用 PHP 吗？如果是这样，本指南应该涵盖您： [https ://github.com/ryanjarvinen/eventbrite.php/blob/master/OAUTH2-README.md](https://github.com/ryanjarvinen/eventbrite.php/blob/master/OAUTH2-README.md)

默认情况下，PHP 的 $_SESSION 存储将用于保存每个用户的 access_token。您需要启用 PHP 会话支持才能使基本演示正常工作： [https ://github.com/ryanjarvinen/eventbrite.php/blob/master/OAUTH2-README.md#2a-using-phps-built -in-_session-storage-可选](https://github.com/ryanjarvinen/eventbrite.php/blob/master/OAUTH2-README.md#2a-using-phps-built-in-_session-storage-optional)

PHP 的默认 $_SESSION 存储肯定有一些折衷。如果它不是您首选的数据存储系统，您可以提供自己的数据管理回调，允许您将 access_token 存储在 cookie、数据库或任何其他适合您的系统架构的位置。更多信息可在此处获得：[https ://github.com/ryanjarvinen/eventbrite.php/blob/master/OAUTH2-README.md#3-define-data-management-callbacks](https://github.com/ryanjarvinen/eventbrite.php/blob/master/OAUTH2-README.md#3-define-data-management-callbacks)

这是一个基本的实现示例，它利用了默认的 $_SESSION 存储： [https ://github.com/ryanjarvinen/eventbrite.php/blob/master/examples/oauth2-login-example.php](https://github.com/ryanjarvinen/eventbrite.php/blob/master/examples/oauth2-login-example.php)

# python - Python中的动态图表

> ID：11747930
> 
> 赞同：1
> 
> 时间：2012-07-31T19:52:53.223
> 
> 标签：python, user-interface, charts, wxpython

我本质上是在尝试复制谷歌金融图表，但用于传感器数据。我想将图表嵌入到 GUI 中并让它在计时器上更新（它对传感器的值进行采样）。我想合并平移、调整大小和添加移动平均线，就像谷歌财务图表一样，所有这些都以某个稳定的时间间隔更新。

我的大部分代码库已经在 python 中，所以我想坚持下去。这可以用 Python 完成吗？

我已经检查了 matplotlib，但我不确定它是否可以做动态图表。我正在使用 wxPython 创建 GUI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:14:19.790

我最近从 Enthought 遇到了 Chaco。

[http://code.enthought.com/projects/chaco/](http://code.enthought.com/projects/chaco/)

它是一个用 Python 编写的开源框架，与 wx、Qt 等绑定，并且比 matplotlib 更适用于构建完整的应用程序。非常实用且易于定制。您可以使用打包的平移、缩放工具或构建您自己的工具。

如果您选择继续使用它，我建议您下载无 epd 软件包以确保获得所有依赖项。

[http://www.enthought.com/products/epd_free.php/](http://www.enthought.com/products/epd_free.php/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-20T11:26:49.793

我只是实现了一个在 ipython notebook 中绘制动态图表的方法，你可以在这里查看我的博客文章：http: [//litaotao.github.io/dynamic-charts-matplotlib-alternative-ipython-notebook-python-drawing-js](http://litaotao.github.io/dynamic-charts-matplotlib-alternative-ipython-notebook-python-drawing-js)

下面是截图：

[![在此处输入图像描述](../Images/9345b2bc51aa991bea0b663e1050cc66.png)](https://i.stack.imgur.com/IWLxG.png)

# php - HTML 提交表单和 PHP 似乎不起作用

> ID：11747931
> 
> 赞同：3
> 
> 时间：2012-07-31T19:53:03.537
> 
> 标签：php, mysql, html

所以我对 PHP/MySQL 完全陌生。我基本上有一个 html 表单，我想使用 PHP 将所有值发送到数据库。出于某种原因，当我单击提交时，我只会转到一个新页面，它会在浏览器窗口中显示我所有的 PHP 代码。这是正常的吗？我该如何解决？这是我的 HTML：

```
<html>
<body>
    <form method="post" action="display.php">
        <input name="name" placeholder="Username..."/>
        <input name="email" placeholder="Email address..."/>
        <input name="date" placeholder="YYYY/MM/DD"/>
        <input name="password" placeholder="Password" type="password"/>
        <input name="confirm_password" placeholder="Password" type="password"/>
        <input type="radio" name="gender" value="male" /> Male<br />
        <input type="radio" name="gender" value="female" /> Female
        <input type="Submit" value="Submit"/>
    </form>
</body> 
```

还有我的 PHP：

```
<?php
if ($_REQUEST["password"] != $_REQUEST["confirm_password"]){
}else {
$password = $_REQUEST['password'];
$name = $_REQUEST['name'];
$email = $_REQUEST['email'];
$date = $_REQUEST['date'];

$dns = 'mysql:dbname=mydatabase;host=localhost';
$db = new PDO($dsn, '', '');

$stmt=$db->prepare('INSERT INTO tbUsers(username,email) VALUES ($name,$email)');  
$stmt->execute(array($myvalue));

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:00:57.393

如果您没有正确配置 Web 服务器，PHP 将不会按应有的方式执行。

确保在尝试执行 Web 应用程序之前正确配置了 localhost。

如果你需要一个本地主机，你可以为你的本地机器尝试[XAMPP](http://www.apachefriends.org/en/xampp.html)或[WAMP](http://www.wampserver.com/en/)。如果您要使用另一台主机，请确保他们在服务器上安装了 PHP。

如果您不想使用上述预打包的服务器，您可以按照[PHP 手册](http://php.net/manual/en/install.php)中的安装步骤自行安装 PHP 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:57:49.987

不，那可能不正常:)

您可能尚未将服务器配置为使用 PHP

首先确保服务器上安装了 PHP

然后在这里查看如何配置您的特定服务器 [http://php.net/manual/en/install.php](http://php.net/manual/en/install.php)

如果您使用的是基于 linux 的系统，您的包管理器（即 apt）通常会在您安装 PHP 时调用适当的触发器，以便它自动集成到您的系统中。

如果你想要一个完整的 LAMP (linux apache mysql php) 堆栈，你可以做`sudo apt-get install tasksel; sudo tasksel`并检查'LAMP Server'。这将指导您完成所有设置和配置

# jquery - 根据数据属性选择td

> ID：11747934
> 
> 赞同：12
> 
> 时间：2012-07-31T19:53:09.993
> 
> 标签：jquery

> **可能重复：**
> [HTML5 上自定义数据属性上的 Jquery 选择器](https://stackoverflow.com/questions/4146502/jquery-selectors-on-custom-data-attributes-on-html5)

如何选择所有`td`具有等于某个值的 html 数据属性？

EG[小提琴](http://jsfiddle.net/smacky311/WbJdB/2/)

```
$("td").dblclick(function (e) {    
    var columnNumber = $(this).data('column');
    console.log(columnNumber);
    $("td column=" + columnNumber).css('background-color', 'blue');;
}); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-31T19:57:02.393

这是很好的语法：

```
$("td[data-column='"+columnNumber+"']") 
```

# android - 如何使最后一个 TableRow 可见？

> ID：11747937
> 
> 赞同：0
> 
> 时间：2012-07-31T19:53:34.877
> 
> 标签：android, listview, tablelayout

android界面图片：[http ://tinypic.com/view.php?pic=avht6w&s=6](http://tinypic.com/view.php?pic=avht6w&s=6)

如上图所示，我希望在白色 listView 的底部和顶部有一个小边框。问题是，当我将 tableRow 设置为 android:paddingBottom="20dp" 时，边框永远不会显示在底部。看起来，如果列表视图的高度足够大，那么它就会显示出来（请参阅下面的代码示例以了解）。

我已经测试了一些不同的方法来解决这个问题，一种是在下一个 TableRow （边框 tableRow）中设置 paddingBottom 属性，但它只有在 listView 的高度与屏幕高度精确而不太大时才有效。

为什么要将listView的高度设置为415dp这样的固定数字？好吧，这是由于另一个我不知道如何解决的问题。例如，如果我将 listViews 的高度设置为 fill_parent，则背景将仅覆盖列表中的项目数。我总是希望列表背景从界面底部填充到 20dp。

如果有人有一些想法，我可以如何设法在底部显示边框并始终使列表背景可见，即使它没有填充项目，请发表您的想法！/非常感谢！

```
<?xml version="1.0" encoding="utf-8"?>

<TableLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="@drawable/orginalbild"
android:gravity="center|top"
android:stretchColumns="1"
android:weightSum="1.0" 
android:fillViewport="true">

<TableRow
    android:background="#000000"
     >
<TextView
    android:layout_marginTop="0.15dp"
    android:layout_width="fill_parent"
    android:layout_height="2dp"
    android:background="#999999"
     android:layout_weight="1">
</TextView>

</TableRow>

<TableRow
    android:background="#999999"

    >
<TextView
    android:background="#999999"
    android:id="@+id/show_task_feedback_title"
    android:layout_width="0dip"
    android:layout_height="28dp"
    android:layout_weight="0.8"
    android:text="@string/LatestFeedbackTitle"
    android:textColor="#ffffff"
    android:textSize="17dp"
    android:shadowColor="#FFFFFF"
    android:layout_marginBottom="0.15dp"
    android:textAppearance="?android:attr/textAppearanceMedium"> 
    </TextView>

   <TextView

        android:layout_width="0dip"
        android:layout_height="28dp"
        android:layout_gravity="center"
        android:layout_weight="0.08"  >
    </TextView>

 <Button
        android:id="@+id/latest_feedback_help_button"
        android:layout_width="0dip" 
        android:layout_height="28dp"
        android:layout_gravity="center"
        android:background="@drawable/help_button"
        android:layout_weight="0.12"
        android:layout_marginBottom="0.15dp"
         />

</TableRow>

<TableRow
android:background="#212421">
<TextView
    android:layout_width="fill_parent" 
    android:layout_height="1dp"
    android:background="#ffffff"
    android:layout_marginTop="0.15dp"
    android:layout_weight="1">
</TextView>
</TableRow>   

<TableRow>
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.25" />
</TableRow> 

<TableRow
android:paddingLeft="24dp"
android:paddingRight="24dp">  <--------THE BLACK BRODER AT THE TOP OF THE LISTVIEW

           <TextView
                android:background="#000000"
                android:layout_width="0dip"
                android:layout_height="0.5dp"
                android:layout_weight="1" >
            </TextView>

         </TableRow>

 <TableRow
android:paddingLeft="24dp"
android:paddingRight="24dp"
android:paddingBottom="20dp" <------(paddingBottom attribute which causes the problem)
>
       <ListView

                android:background="#ffffff"
                android:id="@+id/bookmarks_list"
                android:layout_width="0dip"
                android:layout_height="415dp"
                android:gravity="left"
                android:layout_weight="1"
               />
       </TableRow>

  <TableRow>  <---THE BLACK BRODER AT THE BOTTOM OF THE LISTVIEW(not being displayed)

      <TextView
                android:background="#000000"
                android:layout_width="0dip"
                android:layout_height="0.5dp"
                android:layout_weight="1" >
            </TextView>
        </TableRow>

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:34:11.520

看看这是否有帮助。

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/orginalbild"
    android:fillViewport="true"
    android:gravity="center|top"
    android:orientation="vertical"
    android:stretchColumns="1"
    android:weightSum="1.0" >

    <TableRow android:background="#000000" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="2dp"
            android:layout_marginTop="0.15dp"
            android:layout_weight="1"
            android:background="#999999" >
        </TextView>
    </TableRow>

    <TableRow android:background="#999999" >

        <TextView
            android:id="@+id/show_task_feedback_title"
            android:layout_width="0dip"
            android:layout_height="28dp"
            android:layout_marginBottom="0.15dp"
            android:layout_weight="0.8"
            android:background="#999999"
            android:shadowColor="#FFFFFF"
            android:text="@string/LatestFeedbackTitle"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#ffffff"
            android:textSize="17dp" >
        </TextView>

        <TextView
            android:layout_width="0dip"
            android:layout_height="28dp"
            android:layout_gravity="center"
            android:layout_weight="0.08" >
        </TextView>

        <Button
            android:id="@+id/latest_feedback_help_button"
            android:layout_width="0dip"
            android:layout_height="28dp"
            android:layout_gravity="center"
            android:layout_marginBottom="0.15dp"
            android:layout_weight="0.12"
            android:background="@drawable/help_button" />
    </TableRow>

    <TableRow android:background="#212421" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="1dp"
            android:layout_marginTop="0.15dp"
            android:layout_weight="1"
            android:background="#ffffff" >
        </TextView>
    </TableRow>

    <TableRow>

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0.25" />
    </TableRow>

    <TableRow
        android:paddingTop="0.5dp"
        android:paddingBottom="0.5dp"
        android:background="#000000"
        android:layout_marginLeft="24dp"
        android:layout_marginRight="24dp"
        android:layout_marginBottom="20dp"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <ListView
            android:id="@+id/bookmarks_list"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="#ffffff"
            android:gravity="left"
            android:entries="@array/listitems" />
    </TableRow>

</TableLayout> 
```

# javascript - 在同一个地方检测值

> ID：11747943
> 
> 赞同：0
> 
> 时间：2012-07-31T19:54:06.907
> 
> 标签：javascript, arrays, comparison

如果数组中的至少一个值与同一位置的其他数组中的值相同，我如何使用 javascript 检测？如果你不明白，这个例子会帮助你。

这应该返回 true：

```
var array = [
    [
        [3, 5],
        [2, 3]
    ],
    [
        [2, (1)],
        [4, 5]
    ],
    [
        [2, (1)],
        [4, 5]
    ],
]; 
```

这应该返回 false：

```
var array = [
    [
        [3, 4],
        [2, 3]
    ],
    [
        [2, 1],
        [4, 5]
    ],
]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:07:24.877

```
function test(array) {
    for(var i=0; i<array.length-1; i++) {
        for(var j=i+1; j<array.length; j++) {
            for(var k=0; k<array[i].length; k++) {
                for(var l=0; l<array[i][k].length; l++) {
                    if(array[i][k][l]==array[j][k][l]) {
                        return true;
                    }
                }   
            }
        }
    }

    return false;
}

test([[[3,5],[2,3]],[[2,1],[4,5]],[[2,1],[4,5]]]); // true

test([[[3,4],[2,3]],[[2,1],[4,5]]]); // false

test([[[3,1,4],[1,3,5]],[[7,3,3],[4,5,5]]]) // true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:17:03.487

```
function arrayCheck(array){
    var i = 0;
    while(i < array.length){
        j = 1;
        while(i+j < array.length){
            if(array[i] == array[i+j]){
                return true;
            }
            j++;
        }
        i++;
    }
    return false;
} 
```

# c++ - C++ 压缩嵌套 for 循环

> ID：11747946
> 
> 赞同：6
> 
> 时间：2012-07-31T19:54:24.933
> 
> 标签：c++, for-loop, refactoring

我有这些 for 循环。

```
// output all possible combinations
for ( int i1 = 0; i1 <= 2; i1++ )
     {
         for ( int i2 = 0; i2 <= 2; i2++ )
             {
                 for ( int i3 = 0; i3 <= 2; i3++ )
                     {
                         for ( int i4 = 0; i4 <= 2; i4++ )
                             {
                                 for ( int i5 = 0; i5 <= 2; i5++ )
                                     {
                                         for ( int i6 = 0; i6 <= 2; i6++ )
                                             {
                                                 for ( int i7 = 0; i7 <= 2; i7++ )
                                                     {
                                                         //output created words to outFile
                                                         outFile
                                                         << phoneLetters[n[0]][i1]<< phoneLetters[n[1]][i2]
                                                         << phoneLetters[n[2]][i3]<< phoneLetters[n[3]][i4]
                                                         << phoneLetters[n[4]][i5]<< phoneLetters[n[5]][i6]
                                                         << phoneLetters[n[6]][i7]
                                                         << " ";

                                                         if ( ++count % 9 == 0 ) // form rows
                                                             outFile << std::endl;
                                                         }
                                                 }
                                         }
                                 }
                         }
                 }
         } 
```

它看起来很糟糕，但我太新手了，不知道从哪里开始浓缩它们。

有人可以给我一两个指针，以便我可以使这段代码更整洁吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T20:07:48.807

您在七个级别上为 0、1 和 2 编制索引。这可能不是非常有效，但是这样怎么样：

```
int i1, i2, i3, i4, i5, i6, i7;
int j;

for (int i = 0; i < 2187; i++)
{
    // 0 through 2186 represent all of the ternary numbers from
    //    0000000 (base 3) to 2222222 (base 3).  The following
    //    pulls out the ternary digits and places them into i1
    //    through i7.

    j = i;

    i1 = j / 729;
    j = j - (i1 * 729);

    i2 = j / 243;
    j = j - (i2 * 243);

    i3 = j / 81;
    j = j - (i3 * 81);

    i4 = j / 27;
    j = j - (i4 * 27);

    i5 = j / 9;
    j = j - (i5 * 9);

    i6 = j / 3;
    j = j - (i6 * 3);

    i7 = j;

    // print your stuff
} 
```

或者，根据 user315052 在评论中的建议：

```
int d[7];

for (int i = 0; i < 2187; i++)
{
    int num = i;
    for (int j = 6; j >= 0; j--)
    {
        d[j] = num % 3;
        num = num / 3;
    }

    // print your stuff using d[0] ... d[6]]
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T20:02:18.260

在一般情况下，您可以使用递归：

```
template <typename Stream, typename Iterator>
void generateNumbers(Stream& stream, Iterator begin, Iterator end) {
  if (end - begin == 7) {
    for (Iterator p = begin; p < end; p++) {
      stream << phoneLetters[n[*p]][*p];
    }
    stream << " ";
  } else {
    for (*end = 0; *end <= 2; ++*end)
      generateNumbers(stream,begin,end+1);
    if (end - begin == 6)
      stream << std::endl;
  }
} 
```

您可以使用缓冲区向量或普通的旧 C 数组（两者都有足够的大小）来调用它。

例如：

```
std::vector<int> buf(7,0);
generateNumbers(std::cout,buf.begin(),buf.begin());
// or
int buf2[7];
generateNumbers(std::cout,buf2,buf2); 
```

但是，如果您的值是二进制的，[那么 PBrando](https://stackoverflow.com/a/11748130/430766)的答案会更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T20:10:50.710

我看到 James McNellis 已经评论了这个解决方案，但这里是：

```
void phone_combo(int n[], int i[], int d, ostream &ofile, int &count) {
    if (d == 7) {
        //output created words to outFile
        ofile
        << phoneLetters[n[0]][i[0]]<< phoneLetters[n[1]][i[1]]
        << phoneLetters[n[2]][i[2]]<< phoneLetters[n[3]][i[3]]
        << phoneLetters[n[4]][i[4]]<< phoneLetters[n[5]][i[5]]
        << phoneLetters[n[6]][i[6]]
        << " ";
        if ( ++count % 9 == 0 ) // form rows
            ofile << std::endl;
        }
        return;
    }
    for (i[d] = 0; i[d] <= 2; i[d]++) {
        phone_combo(n, i, d+1, ofile, count);
    }
}

int i[7];
phone_combo(n, i, 0, outFile, count); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T04:26:26.567

之前发布的回复将其减少为单个 for 循环，但由于某种原因被删除。

```
for( int i(0); i!= 2187; ++i )
{
    outFile
    << phoneLetters[n[0]][(i >> 6) & 0x01]<< phoneLetters[n[1]][(i >> 5) & 0x01]
    << phoneLetters[n[2]][(i >> 4) & 0x01]<< phoneLetters[n[3]][(i >> 3) & 0x01]
    << phoneLetters[n[4]][(i >> 2) & 0x01]<< phoneLetters[n[5]][(i >> 1) & 0x01]
    << phoneLetters[n[6]][i & 0x01]
    << ' ';

    if ( ++count % 9 == 0 ) // form rows
        outFile << '\n';
} 
```

这只有在您知道计算每个可能的排列所需的确切迭代次数时才会起作用。

# android - android：一个按钮，2个字符串资源

> ID：11747948
> 
> 赞同：0
> 
> 时间：2012-07-31T19:54:35.730
> 
> 标签：android

我有一个关于**如何处理与 ONE 菜单按钮相关的 2 种不同语言字符串资源的问题，例如 @string/buttontext_de 和 @string/buttontext_en？**

我有一个开始按钮，我想显示**设置了用户设备语言的正确字符串资源。**

1）我有 2 个目录，一个“res\values”（它的默认德语值目录）和一个“res\values-en”，我在其中放入了英文文本资源（在 strings.xml 中）

2）下一步我必须在我的开始活动中设置本地化代码？

3）如何设置我的按钮文本选择正确语言字符串资源的代码？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:58:59.140

请参阅[本地化](http://developer.android.com/guide/topics/resources/localization.html)开发人员指南。只需在适当的文件夹中指定重复的 String 资源，后退一步，让 I18N 魔法发生。要对其进行测试，请进入您的设置 (Einstellungen) 并更改您的系统语言首选项。

感谢 Bytebender 指出我错过了什么。是的，您要创建这些文件和资源：

内部`res/values-en/strings.xml`：

```
<string name="buttontext">Click Me</string> 
```

内部`res/values-de/strings.xml`：

```
<string name="buttontext">Hier Klicken</string> 
```

然后像这样在您的 XML 中引用它：

```
 <Button
    android:id="@+id/myBtnId"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="doHandleBtnClick"
    android:text="@string/buttontext" /> 
```

# c++ - 使用 #include 和包含保护在单独文件中继承 C++

> ID：11747954
> 
> 赞同：27
> 
> 时间：2012-07-31T19:54:59.840
> 
> 标签：c++, inheritance, include, abstract-data-type

我是 Stack Overflow 的新手，正在自学 C++，但仍然是个初学者。在完成了我正在使用的书的大部分内容（可能被认为过时和/或不是一本好书）后，我决定通过自己尝试来重新强化一些概念，仅在需要时参考这本书，但我似乎被卡住了。我试图解决的概念是继承、多态性、抽象数据类型 (ADT)，以及将我的类的代码分成头文件 (.h) 和 C++ 文件 (.cpp)。提前为文字墙道歉，我只想清楚具体地说明我需要在哪里。

所以，我的目标是创建简单的形状类，在适用的情况下相互继承。我有四个类：myPoly、myRectangle、myTriangle 和 mySquare。如果我正确理解了这个概念，myPoly 应该是 ADT，因为其中一种方法是纯虚函数（区域方法），因为创建 myPoly 对象并不是我希望我的类的用户做的事情。myRectangle 和 myTriangle 都派生自 myPoly，而 mySquare 又派生自 myRectangle。我还包括我计划测试我的课程的测试程序。我正在使用 Code::Blocks 10.05 并在构建我的 test.cpp 程序时不断收到以下错误：

```
undefined reference to 'myPoly::myPoly()' 
```

对于 myPoly 类的方法，我得到了 42 个类似的错误。当我尝试为 myRectangle 和 myTriangle 构建 .cpp 文件时，就会发生这种情况。通过对我在这个小项目中遇到的问题进行的研究，我觉得我的包含保护或#include 语句有问题，有些东西没有被正确包含或被包含太多次。起初，我将 myPoly 的 .cpp 文件提供给 myRectangle 和 myTriangle，但在几个地方读到，包括 myPoly 的 .h 文件更有效，并且有些地方如何自动包含它的 .cpp。如果有人可以对此提供一些见解，将不胜感激。我还记得在包含语句中使用引号与使用尖括号有何不同。以下是我为我的小项目制作的所有九个文件。大多数评论对我来说都是小笔记或提醒。

# myPoly.h

```
//Practice with inheritance, polymorphism, and Abstract Data Types
//header file for Polygon class

#ifndef MYPOLY_H
#define MYPOLY_H

class myPoly
{
    public:
        //constructor
        //const reference pass because the values w and h don't change and reference avoid the time it takes to copy large
        //  objects by value (if there were any)
        myPoly();
        myPoly(const float & w, const float & h);

        //destructor
        virtual ~myPoly();

        //accessors
        float getWidth();
        float getHeight();
        void setWidth(const float & w);
        void setHeight(const float & h);

        virtual float area() = 0;

    private:
        float width, height;
};

#endif 
```

# myPoly.cpp

```
//Practice with inheritance, polymorphism, and Abstract Data Types
//implementation file for myPoly class

#include "myPoly.h"

//constructor
myPoly::myPoly()
{
    setWidth(10);
    setHeight(10);
}

myPoly::myPoly(const float & w, const float & h)
{
    setWidth(w);
    setHeight(h);
}

//destructor
myPoly::~myPoly() {}

//accessors
float myPoly::getWidth() {return width;}
float myPoly::getHeight() {return height;}

void myPoly::setHeight(const float & w) {width = w;}
void myPoly::setWidth(const float & h) {height = h;}

//pure virtual functions have no implementation
//area() is handled in the header file 
```

# 我的矩形.h

```
//Practice with inheritance, polymorphism, and Abstract Data Types
//declaration file for myRectangle class

#ifndef MYRECTANGLE_H
#define MYRECTANGLE_H

#include "myPoly.h"

class myRectangle : public myPoly
{
    public:
        //constructor
        myRectangle();
        myRectangle(const float & w, const float & h);

        //destructor
        ~myRectangle();

        //this doesn't need to be virtual since the derived class doesn't override this method
        float area();
};

#endif 
```

# 我的矩形.cpp

```
//Practice with inheritance, polymorphism, and Abstract Data Types
//implementaion file for the myRectangle class

//get a vauge compiler/linker error if you have virtual methods that aren't implemented (even if it ends up being just
//  a 'stub' method, aka empty, like the destructor)

#include "myRectangle.h"

myRectangle::myRectangle()
{
    setWidth(10);
    setHeight(10);
}

myRectangle::myRectangle(const float & w, const float & h)
{
    setWidth(w);
    setHeight(h);
}

myRectangle::~myRectangle()
{
}

float myRectangle::area()
{
    return getWidth() * getHeight();
} 
```

# 我的三角形.h

```
//Practice with inheritance, polymorphism, and Abstract Data Types
//declaration file for myTriangle class

#ifndef MYTRIANGLE_H
#define MYTRIANGLE_H

#include "myPoly.h"

//imagine the triangle is a right triangle with a width and a height
//  |\
//  | \
//  |  \
//  |___\

class myTriangle : public myPoly
{
    public:
        //constructors
        myTriangle();
        myTriangle(const float & w, const float & h);

        //destructor
        ~myTriangle();

        //since nothing derives from this class it doesn't need to be virtual and in turn neither does the destructor
        float area();
};

#endif 
```

# 我的三角形.cpp

```
//Practice with inheritance, polymorphism, and Abstract Data Types
//implementation file for myTriangle class

#include "myTriangle.h"

myTriangle::myTriangle()
{
    setWidth(10);
    setHeight(10);
}

myTriangle::myTriangle(const float & w, const float & h)
{
    setWidth(w);
    setHeight(h);
}

myTriangle::~myTriangle()
{
}

float myTriangle::area()
{
    return getWidth() * getHeight() / 2;
} 
```

# mySquare.h

```
//Practice with inheritance, polymorphism, and Abstract Data Types
//declaration file for mySquare class

#ifndef MYSQUARE_H
#define MYSQUARE_H

#include "myRectangle.cpp"

class mySquare : public myRectangle
{
    public:
        //constructors
        mySquare();
        //explicity call the myRectangle constructor within this implementation to pass w as width and height
        mySquare(const float w);

        //destructor
        ~mySquare();
};

#endif 
```

# mySquare.cpp

```
//Practice with inheritance, polymorphism, and Abstract Data Types
//implementation file for mySquare class

#include "mySquare.h"

mySquare::mySquare()
{
    setWidth(10);
    setHeight(10);
}

mySquare::mySquare(const float w)
{
    myRectangle::myRectangle(w, w);
}

mySquare::~mySquare()
{
} 
```

# 测试.cpp

```
//Practice with inheritance, polymorphism, and Abstract Data Types
//main class that uses my shape classes and experiments with inheritance, polymorphism, and ADTs

#include "myRectangle.cpp"
//#include "mySquare.cpp"
#include "myTriangle.cpp"

#include <iostream>

int main()
{
    myPoly * shape = new myRectangle(20,20);

    return 0;
} 
```

我很好奇为什么会出现这些错误，或者为什么我所做的事情可能不被认为是好的/最佳实践，而不是仅仅收到一行代码来消除我的错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T20:09:34.460

你的包容性守卫看起来不错。如果不是，您很可能会收到编译器错误，包括文件和行号信息。您发布的错误似乎更像是链接器错误。

但是，您的代码存在一个“问题”。作为一般规则，您应该只使用`#include`.h 文件而不是 .cpp 文件。

现在找到解决方案：我自己不熟悉 Code::Blocks。但是，我希望我能提供一些一般信息，为您指明正确的方向。我过去使用的一些编译器默认允许我编译单个 C++ 文件并运行程序。要编译一个包含多个文件的程序，我必须创建一个项目。（大多数现代编译器迫使您从一开始就创建一个项目。）考虑到这一点，我建议您查看如何在 Code::Blocks 中为您的程序创建一个项目。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T20:05:16.353

从代码的角度来看（至少我看过的），它看起来不错，但是：

**有两点需要考虑：**

1.  不要直接包含 cpp 文件。例如，在 mySquare.h 中，`#include "myRectangle.cpp"`应该是`#include "myRectangle.h"`. 您希望包含头文件中提供的接口/声明，告诉程序如何创建类，而不仅仅是函数定义。

2.  其次，确保您正在使用所有目标文件进行编译。我不知道代码块，但如果你使用 g++ 或类似的东西，你会想要`g++ main.cpp myPoly.cpp mySquare.cpp etc.`为所有文件做。例如，如果您忘记了 myPoly.cpp，则可能会发生这样的错误，因为不会包含其函数的定义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T19:59:29.370

实际上，一切看起来都很好。链接程序时，它可能就像不包括 myPoly.obj 一样简单。我对 Code::Blocks 不熟悉（尽管我知道它相当流行），但我假设如果您只是单击 test.cpp 并选择“运行”，那么 Code::Blocks 将尝试从只是那一个源文件。您需要在您构建的每个程序中包含所有相关的源文件。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-31T20:35:22.830

除了其他人所说的：你没有做正确的继承......

当你这样做

```
class Poly
{
   Poly();
   ~Poly();
}

class Rect : public Poly()
{
   Rect();
   ~Rect();
} 
```

您需要通过以下方式声明孩子的构造函数：

```
Rect::Rect() : Poly()
{

} 
```

孩子必须在父亲完成建造后才能建造。

# facebook - FB.getLoginStatus() 需要刷新页面

> ID：11747956
> 
> 赞同：0
> 
> 时间：2012-07-31T19:55:09.943
> 
> 标签：facebook, facebook-javascript-sdk, facebook-login

我正在使用 FB.getLoginStatus() 和 FB.Login() 使用 facebook 将用户登录到我的网站。我首先使用 FB.getLoginStatus() 检查页面加载状态，并将状态保存在隐藏变量中。当用户单击我的 facebook 登录按钮时，我首先检查隐藏变量中的值并仅在 FB.getLoginStatus() 未连接时调用 FB.Login()。如果 FB.getLoginStatus() 返回“已连接”，那么我只需在没有 FB.Login() 的情况下将用户登录到我的网站。

我的问题场景 *用户使用 facebook 登录我的帐户 *用户注销我的网站 *我的网站在注销状态下打开 *在另一个选项卡中，当前 facebook 用户注销 facebook，新用户登录 facebook *用户返回我的网站并点击 facebook 登录按钮而不刷新页面 *旧 facebook 用户（不是当前登录到 facebook 的用户）已登录到我的帐户

当用户单击 facebook 登录按钮时，如何识别 facebook 中的最新用户？

```
<body>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<div id="fb-root">
</div>
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script>
// initialize the library with your Facebook API key    

var AppID = '<%=AppID%>';

window.fbAsyncInit = function() {
FB.init({
appId: AppID,
status: true,
cookie: true,
xfbml: true,
channelUrl: 'http://<%=Request.ServerVariables("HTTP_HOST")%>/channel.html'
});

FB.Event.subscribe('auth.login', function(response) {
//alert('logged in');
});

FB.Event.subscribe('auth.logout', function(response) {
//alert('logged out');
});

FB.getLoginStatus(function(response) {
if (response.status === "connected") {
var uid = response.authResponse.userID;
document.getElementById('hdnFBConnected').value = uid;
}
else if (response.status === "not_authorized") {
//alert("Not authorized");
document.getElementById('hdnFBConnected').value = '';
}
else {
//alert("user not logged in to facebook");
document.getElementById('hdnFBConnected').value = '';
}
});
}; 
</script>

<a href="#" onclick="WindowOpen()"><img src="<%=global_language & "/images/FacebookSmall.gif"%>" /></a>

<script type="text/javascript" language="javascript">
function WindowOpen() {

if (document.getElementById('hdnFBConnected').value != '') //user is connected
{
FB.api('/me', { fields: 'first_name, last_name, locale, email' }, function(result) {

var uid = document.getElementById('hdnFBConnected').value;    

//log the user into my site
})
}
else { //user is not connected, so calling FB.Login()
FB.login(function(response) {
if (response.authResponse) {
var access_token = response.authResponse.accessToken;

FB.api('/me', { fields: 'first_name, last_name, locale, email' }, function(result) {

var uid = response.authResponse.userID;    

var globalLang = '<%=global_language%>';
//log the user into my site                            })
}
else {
//alert('User cancelled login or did not fully authorize.');
}
}, { scope: 'email' }
); 
}

}
</script> 

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:41:04.573

你所描述的是正常行为。JS SDK 正在发送旧用户的**signed_request**对象，该对象允许新用户访问她的帐户。由于这与您有关，请在您的应用页面上包含一个**注销**按钮，并让用户知道当她完成使用您的应用时单击该按钮很重要。注销按钮应该`FB.logout`像这样调用：

```
FB.logout(function(response) {
  // user is now logged out
}); 
```

为了提高安全性，您可以创建一个活动计时器，在 X 分钟不活动后提示用户单击按钮。如果用户在 1 分钟内没有点击，她会自动退出。这就是大多数银行网站处理会话安全的方式。

# windows-phone-7 - 从 WP7 应用程序查询域身份验证背后的服务

> ID：11747958
> 
> 赞同：1
> 
> 时间：2012-07-31T19:55:17.390
> 
> 标签：windows-phone-7, authentication, active-directory

WP7 应用程序甚至可以连接到存储在域身份验证后面的服务吗？

我[在 Windows Phone 7](http://www.syfuhs.net/post/2011/03/02/Windows-Domain-Authentication-on-Windows-Phone-7.aspx)文章中找到了 Windows 域身份验证，但这并不是我想要实现的。

# php - Zend Framework Composer 包

> ID：11747962
> 
> 赞同：12
> 
> 时间：2012-07-31T19:55:26.047
> 
> 标签：php, zend-framework, package, composer-php

我想为`zendframework/zend-db`包添加依赖项，所以我将它添加到我的composer.json：

```
"repositories": [
    {
        "type": "composer",
        "url": "http://packages.zendframework.com/"
    }
],
"require": {
    "php": ">=5.3.2",

    "symfony/class-loader":  "dev-master",
    "symfony/console":       "dev-master",
    "symfony/filesystem":    "dev-master",
    "symfony/finder":        "dev-master",
    "symfony/locale":        "dev-master",
    "symfony/yaml":          "dev-master",
    "doctrine/dbal":         "dev-master",
    "zendframework/zend-db": "dev-master"
} 
```

问题是作曲家安装了整个`zendframework/zendframework`包。

知道为什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T20:39:59.730

正如这里解释的那样[http://packages.zendframework.com/#composer](http://packages.zendframework.com/#composer) ZF2 现在提供了一个包含所有模块的作曲家存储库。

将 repo 添加到您的包中：

```
"repositories": [
    {
        "type": "composer",
        "url": "http://packages.zendframework.com/"
    }
], 
```

从这里开始，您可以单独添加包：

```
"require": {
    "zendframework/zend-config": "2.0.*",
    "zendframework/zend-http": "2.0.*"
}, 
```

你只需要指定你想要的包，如果它们有依赖关系，它们将由 Compser 解析。

尽管这似乎不起作用...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T21:52:51.017

这是来自 zend github 中 zend-db的[composer.json 。](https://github.com/zendframework/zf2/blob/master/library/Zend/Db/composer.json)根据文件，zend-db 没有任何依赖关系。

这可能是因为您尝试从 dev-master 下载包并且 dev-master 的 composer.json 中存在不匹配的事实。

**我建议您将所需的版本更改为 2.0.* 之类的，然后重试。**

* * *

此外，虽然 Zend 框架是松耦合的，但在旧版本的框架中，依赖关系并不明确。

例如，通过快速浏览 ZEND 1.9 中的 zend_db 源代码，我发现它至少依赖于以下包：

*   控制器
*   配置
*   筛选
*   json
*   加载器（对于自动加载，我认为这可能不是必需的，因为作曲家自动加载器）
*   乌里
*   看法
*   野火

这些包可能有其他依赖项，因此下载大小。无论如何，正如 King 解释的那样，Zend Framework 2.0 与 1.9 版不同，也许这不适用于 2.0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T21:41:08.293

尝试检查某些包的依赖项中是否有一些 php 扩展。我尝试安装 zend-http 软件包并遇到同样的问题。[在这里](https://stackoverflow.com/questions/14356318/install-component-zf2-using-composer)，我找到了安装 php_intl 扩展的建议，因为它是 zend-validate 所必需的 - zend-http 包的子依赖项。一旦我将此扩展添加到 php.ini - 问题就解决了。

# c# - 为什么列表是空的？

> ID：11747966
> 
> 赞同：0
> 
> 时间：2012-07-31T19:55:56.687
> 
> 标签：c#, observablecollection, iasyncresult, asynccallback

我可以从其类中访问列表 ( **ListData ) 值，但如果我尝试从类外部引用该列表，它会将其显示为一个空列表。**

我在 getVideoList 方法中将对象添加到 ListData。

我添加了这段代码，它现在可以工作了（轮询方法），**这效率低吗？**

```
 IAsyncResult result = request.BeginGetResponse(new AsyncCallback(getVideoList), state);
            while (result.IsCompleted == false)
            {
               Thread.Sleep(1000);
             } 
```

* * *

```
Public class otherclass{
    static void main(string [] args){
      RestProcess process = new RestProcess(videoListURI);
      process.initilaizeRest();

      foreach (VideoSeriesElement ele in process.ListData)
      {
        Console.WriteLine(ele.id);
        Console.WriteLine(ele.title);
        Console.WriteLine(ele.href);
        Console.WriteLine(ele.image);
      }

      Console.ReadLine();
  }

} 
```

* * *

```
public class RestProcess
{
    /// <summary>
    /// Default constructor
    /// </summary>
    /// 
    readonly string blankimage = "http://images1.test.com/properties/NoThumbnail_HD.jpg";
    public RestProcess(string uri)
    {
        URI = uri;
        ListData = new ObservableCollection<VideoSeriesElement>();
    } 
    public ObservableCollection<VideoSeriesElement> ListData{get;set;}

    public void initilaizeRest()
    {
        WebRequest request = HttpWebRequest.Create(URI);
        request.Method = "GET";

        // RequestState is a custom class to pass info to the callback
        RequestState state = new RequestState(request, URI);
        IAsyncResult result = request.BeginGetResponse(new AsyncCallback(getVideoList), state);
    }

    public string URI{get;set;}

    /// <summary>
    /// getVideoList
    /// </summary>
    /// <param name="result"></param>
    public void getVideoList(IAsyncResult result)
    {
        RequestState state = (RequestState)result.AsyncState;
        WebRequest request = (WebRequest)state.Request;
        HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(result);

        try
        {
            TextReader textreader = new StreamReader(response.GetResponseStream()); 
            XDocument doc = XDocument.Load(textreader);

            foreach(XElement videoSeriesEle in doc.Descendants("video-series"))
            {
                var videseriesEle = new VideoSeriesElement();    
                videseriesEle.id = videoSeriesEle.Attribute("id").Value;
                videseriesEle.href = videoSeriesEle.Attribute("href").Value;
                videseriesEle.title = videoSeriesEle.Element("title").Value;

                if (!videoSeriesEle.Element("images").IsEmpty && videoSeriesEle.Element("images").Elements("image") != null)
                {
                    var imagelist = videoSeriesEle.Element("images").Elements("image").ToList();
                    foreach (var ele in imagelist)
                    {
                        if (ele.Attribute("styleid").Value.Equals("5"))
                        {
                            if (videoSeriesEle.Element("images").Element("image").Attribute("href").Value != null)
                            {
                                videseriesEle.image = videoSeriesEle.Element("images").Element("image").Attribute("href").Value;
                            }

                        }
                    }

                }
                else { videseriesEle.image = blankimage; }

                //add object to list 
                ListData.Add(videseriesEle);

            }

            //Close streams 
            textreader.Close();
            response.Close();
        }
        catch (XmlException e)
        {
            Console.WriteLine(e);
        }

    }

    /// <summary>
    /// 
    /// </summary>
    /// <param name="state"></param>
    /// <param name="timedOut"></param>
    private static void ScanTimeoutCallback(object state, bool timedOut)
    {
        if (timedOut)
        {
            RequestState reqState = (RequestState)state;
            if (reqState != null)
                reqState.Request.Abort();
            Console.WriteLine("aborted- timeout");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:03:13.653

该`RestProcess.initilaizeRest()`方法通过 请求数据`IAsyncResult`，这意味着获取数据的调用是异步的。在您的`otherClass`类中，您尝试`ListData`在调用后立即处理和循环元素，`initilaizeRest()`并且很有可能尚未加载数据。

要解决此问题，您应该有一个回调/事件处理程序，`otherClass`用于侦听何时填充数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:12:56.867

您可以在 RestProcess 中将 IAsyncResult 结果作为 request.BeginGetResponse 调用的属性公开，并在 otherClass 中阻塞，直到 IAsyncResult.IsCompleted 属性为真，或者使用它公开的 WaitHandle，但有理由使用异步 BeginGetResponse调用而不是同步 GetResponse 调用？

# jquery - jQuery按钮位置索引

> ID：11747968
> 
> 赞同：0
> 
> 时间：2012-07-31T19:56:13.533
> 
> 标签：jquery

我有一个类容器中的按钮列表。

```
<div class="buttonContainer">
    <button id="ONE">ONE</button>
    <button id="TWO">TWO</button>
    <button id="THREE">THREE</button>
</div> 
```

我想要得到的是我点击的按钮的数字位置：

```
$('.buttonContainer button').click(function (e) {
    var id = this.id;

    // id contains the name of the id of the button clicked.

}); 
```

我试过： $('.buttonContainer button.clicked').index();

但这行不通。有人有更好的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:46:50.127

我刚刚找到了答案：

```
var index = $(this).index(); 
```

# javascript - 在 CodeIgniter 中将 javascript 移至底部的策略？

> ID：11747973
> 
> 赞同：5
> 
> 时间：2012-07-31T19:56:49.383
> 
> 标签：javascript, performance, codeigniter

在我的网站上，我有一个全局 Javascript 文件，其中包括 jQuery 和用于下拉菜单的代码等。许多页面还具有针对特定页面的次要交互、表格等的自定义 Javascript。

我当前对每个视图的设置是一个`header.php`文件，基本上涵盖了从 doctype 到内容开始、特定页面的视图文件和`footer.php`关闭页面的所有内容。

目前`global.js`是从`<head>`. 为了提高性能，我们应该将 JS 放在页面的最底部，但我想不出一个好的方法来做到这一点。我可以为`global.js`自定义脚本块添加完整的脚本行，但这意味着我必须在每个页面上添加它，即使没有其他 Javascript。有没有更好的方法将 JS 移到底部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:44:28.087

您可以将自定义 JS 放在常规变量或[nowdoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc) (php 5.3.0+) 中，然后在页脚中回显该变量以及脚本标记（如果存在）。Nowdoc 可能更可取，因为您可以在 JS 中同时使用双引号和单引号，**并且**PHP 不会解析/转义文本。

someview.php：

```
<?php 
$custom_js = "
alert('custom js ran');
";
?>

<?php 
$custom_js = <<<'CUSTOM_JS'
alert("custom js ran (i'm in a nowdoc!)");
CUSTOM_JS;
?> 
```

页脚.php：

```
<?php if(isset($custom_js)) { ?>
    <script><?php echo $custom_js; ?></script>
<?php } ?> 
```

**编辑2：** 如果您不想将javascript放在字符串中，您可以将javascript放在单独的文件中，然后使用PHP将其作为字符串[`file_get_contents()`](http://php.net/manual/en/function.file-get-contents.php)加载到变量中。`$custom_js`

**编辑：** 这只是一个问题，但您可能会考虑使用 Carabiner 库来加载 JS 和 CSS。这是一个很棒的图书馆。它可能不一定对您当前的问题有所帮助，但如果您的 global.js 非常大，您可以将其拆分并使用 Carabiner 在加载时压缩/连接。我目前使用它来选择在我当前的 CI 项目中为登录和注销的用户加载哪些 JS 和 CSS。

*   [Github 上的登山扣](https://github.com/mikedfunk/carabiner/)
*   [Sparks 上的登山扣](http://getsparks.org/packages/carabiner/versions/HEAD/show)
*   [登山扣文件](https://github.com/EllisLab/CodeIgniter/wiki/Carabiner)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:21:58.243

也许我错过了一些东西 - 但是为什么你不能加载另一个只包含 js 代码的视图？

您的模板：

```
$this->load->view("header.php");
$this->load->view("content.php", $data);
$this->load->view("footer.php", $load_js); 
```

然后在footer.php中：

```
 // start of footer stuff here
   $this->load->view($load_js);
</body>
</html> 
```

然后在 page1.php 中：

```
<script>
   // Your scripts here
</script> 
```

**或者：**

您的模板：

```
$this->load->view("header.php");
$this->load->view("content.php", $data); 
```

然后在每个“content.php”文件中：

```
 // Content goes here
$data['load_js'] = "page1.php";
$this->load->view("footer.php", $data); 
```

然后在单个“footer.php”文件中：

```
 // start of footer stuff here
   $this->load->view($load_js);
</body>
</html> 
```

然后在 page1.php 中：

```
<script>
   // Your scripts here
</script> 
```

第二种方法可能更符合您的要求。这确实意味着您需要在每个内容文件中调用页脚 - 但它实际上是一行 - 所以您并没有真正重复自己 - 但它使您可以完全控制内容文件内部，特别是要加载的任何 js 文件。

您可以扩展它并使 $load_js 变量成为要加载的 js 文件数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T07:48:24.757

我使用一组布局，它们是提供站点基本结构的视图。每个控制器调用一个布局并将特定于该控制器方法的内容传递给它。

例如，假设您有一个布局：

```
<html>
  <head>
    <title><?php echo $page->title ?></title>
    <?php if (count($page->css)): ?>
       <?php for ($i=0; $i < count($page->css); $i++): ?>
         <link rel="stylesheet" href="<?php echo $page->css[$i] ?>"/>
       <?php endfor; ?>
    <?php endif; ?>
  </head>
  <body>
    <?php $this->load->view('header.php'); ?>

    <?php $this->load->view($content); ?>        

    <?php $this->load->view('footer.php'); ?>

    <?php if (count($page->js)): ?>
      <?php for ($i=0; $i < count($page->js); $i++): ?>
        <script src="<?php echo $page->js[$i] ?>"></script>
      <?php endfor; ?>
    <?php endif; ?>
  </body>
</html> 
```

每个页面传入一个`$page`包含 css 和 js 文件数组的对象。对于全局文件，例如 global.js，您可以在底部硬编码（与顶部的全局 CSS 相同）。或者，您可以设置所有控制器都继承自的父控制器。这样您就可以`$page`使用默认设置（包括添加 global.js）来设置对象。然后，如果不需要，每个控制器/方法都可以删除 global.js。

每个页面还传入一个`$content`带有页面主视图位置的变量。

您可以通过拥有多个布局并将一些 HTML 移动到布局中（例如 1 列、2 列、3 列布局）来进一步扩展它。在这些情况下，您可以为每列传递多个视图位置，等等。这完全取决于您。

当然，要将所有 JS 保持在底部，您需要将所有特定于页面的自定义 JS 移动到 JS 文件中。考虑到可以缓存外部 JS，这实际上是最好的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T23:48:24.647

做一个辅助函数；并加载包含该`global.js`脚本的视图。每当您需要将 global.js 放在页面底部时，只需调用该辅助函数即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T16:07:34.717

另一种选择是使用模板库。

我用的是[Williams Concepts](http://williamsconcepts.com/ci/codeigniter/libraries/template/reference.html)的这个。
它允许您为单个类/方法调用添加 JS（和 CSS）。
例如：

```
class foo exends Controller {
    public function bar() {
        $this->template->add_js('js/jquery.js');
        $this->template->add_js('alert("Hello!");', 'embed');

        $data = $this->some_model->get_data();
        $this->template->write_view('content', 'user/profile', $data;

        $this->template->render();
    }
} 
```

使用它，您可以在需要时添加 JS，或者将其添加到站点的模板中。
在您的情况下，当您可以添加所需的任何 JS 时，我会在模板的页脚中添加 global.js 或在模板的页脚中定义一个区域。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-17T12:31:19.977

**控制器/添加功能**

```
public function add()
    {
        $data['page_title'] = 'Test | Add Details';
        $data['js'] = array('details','details2');

        $this->load->view('template/header',$data);
        $this->load->view('details/add');
        $this->load->view('template/footer',$data);
    } 
```

在您的页脚模板中加载所有需要的常用脚本，如 jquery.min.js、bootstrap.min.js 等。稍后添加以下代码

**页脚**

```
 <!-- Jquery Core Js -->
    <script src="<?= base_url() ?>assets/plugins/jquery/jquery.min.js"></script>

    <!-- Bootstrap Core Js -->
    <script src="<?= base_url() ?>assets/plugins/bootstrap/js/bootstrap.js"></script>   

    <?php 
    if(isset($js) && count($js) > 0)
    {
        for($i=0;$i<count($js);$i++)
        {

    ?>
        <script src="<?= base_url() ?>assets/js/custom/<?= $js[$i] ?>.js"></script>
    <?php
        }
    } 
    ?>
</body>
</html> 
```

将要加载的所有js文件传递到数组中。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-14T18:33:05.500

如果你有一个包含在每个页面上的 footer.php 文件，为什么你不能把你的 js 代码放在那个文件中呢？

# jquery - 在点击事件中调用 preventDefault 后如何存储标签访问状态？

> ID：11747982
> 
> 赞同：3
> 
> 时间：2012-07-31T19:57:15.717
> 
> 标签：jquery, html, javascript-events

我的页面中有几个标签。单击每个结果都会打开一个弹出对话框，显示有关博客文章的详细信息（防止标签默认行为，例如：使其被访问）。所以我想做的是在显示弹出对话框设置访问状态之后手动标记。

我的代码看起来像这样：

```
 $("a.news-part").click(function(e){
        //do popup
        e.preventDefault();
        //here i wanna store a tag visited state.
   }); 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:03:23.890

你可以做这样的事情......

```
$("a.news-part").click(function(e){
        //do popup
        e.preventDefault();
        $(this).addClass('visited')
   }); 
```

然后，在您的 CSS 中，您只需要`a:visited, a.visited`按照您的实际 CSS 执行...或类似的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:12:55.083

除了其他建议的解决方案之外，您还可以`history.pushState`在现代浏览器上使用。但是，我还没有测试这是否真的会将链接标记为已访问。

`:visited`一旦链接出现在其历史记录中，浏览器就会分配伪类。如果您在运行时将链接替换为*哈希历史黑客*兼容的 URL，则可以支持旧版浏览器。做一点谷歌搜索，已经有很多关于 StackOverflow 的问题，以防你不知道我在说什么。

祝你好运！

# html - 响应式网站的粘性页脚

> ID：11747983
> 
> 赞同：1
> 
> 时间：2012-07-31T19:57:21.677
> 
> 标签：html, css, responsive-design, sticky-footer

我正在尝试为响应式网站创建一个粘性页脚。我在互联网上搜索并找到了各种解决方案，但我的问题是由于页脚中的文本数量，页脚的高度变化是自动换行的。我试过在 Ryan Fait 的网站 ( [http://ryanfait.com/resources/footer-stick-to-bottom-of-page/](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/) ) 上使用该方法，但由于您无法考虑页脚的高度是静态值，很难为 CSS 设置推送值。目前我只是将页脚固定在底部，但这会导致问题，因为随着页脚高度的增加，它会占用较小视口上的宝贵空间。下面是我的页脚中有多少信息的示例。有什么建议么？

```
<footer>
<div id="upperFooter">
<p>2000 - 2012 College Name | Copyright | Internet Privacy Policy | Disclaimer |      Collection and Use of Social Security Numbers</p>
</div>
<!-- end upperFooter -->
<div id="lowerFooter">
<p>College Name is a member of the Stated State College System.   College Name is not affiliated with any other public or private university or College in State or elsewhere. </p>
<p>College Name is a division of College Name and is accredited by the Commission on Colleges of the Association of Colleges (“XIXI”) to award the baccalaureate and associate degree. Contact the Commission on Colleges at for questions about the accreditation of College Name.</p>
</div>
<!-- end lowerFooter --> 
</footer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-16T13:40:52.567

过去，我在[Ryan Fait 的代码](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)中取得了很好的成功，但正如您所提到的，它不适用于可变高度的页脚。

当页脚不是固定高度时，我发现的最佳解决方案是这个[Flexbox 解决方案](http://philipwalton.github.io/solved-by-flexbox/demos/sticky-footer/)

Flexbox 非常棒且具有前瞻性，因此我个人不介意您不会完全支持某些较旧的浏览器。

基于以下代码的[工作示例。](http://jsfiddle.net/panchroma/xpxLfgqd/7/)我使用了一些供应商前缀，因此更广泛的浏览器支持，但代码不是那么干净

HTML

```
<body class="Site">
  <header>...</header>
  <main class="Site-content">...</main>
  <footer>...</footer>
</body> 
```

CSS

```
.Site {
  display: flex;
  min-height: 100vh;
  flex-direction: column;
}

.Site-content {
  flex: 1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:30:05.697

尝试给页脚绝对定位

```
footer {
position: absolute;
bottom: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T00:51:22.247

您可能想查看这篇博文：http: [//timothy-long.com/responsive-sticky-footer/](http://timothy-long.com/responsive-sticky-footer/)

他使用`display: table`hack 来做到这一点，但演示页面确实可以正常工作。

您的另一个选择是使用媒体查询来适应页脚高度的变化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-16T12:34:36.097

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-09-22T06:14:06.033

关于什么 `footer { position: fixed; bottom: 0; }`

# asp.net-mvc-3 - 使用 ViewModel 时不显示 MVC3 自定义验证错误消息

> ID：11747984
> 
> 赞同：5
> 
> 时间：2012-07-31T19:57:31.537
> 
> 标签：asp.net-mvc-3, validation, asp.net-mvc-viewmodel

**概括**

`Question:`为什么使用 ViewModel 时不显示自定义验证错误消息。

`Answer:`自定义验证应应用于 ViewModel 而不是 Class。有关示例代码，请参阅@JaySilk84 答案的结尾。

MVC3，项目使用

*   jquery-1.7.2.min.js
*   现代主义-2.5.3.js
*   jquery-ui-1.8.22.custom.min.js（由 jQuery.com 为 Accordion 插件生成）
*   jquery.validate.min.js 和
*   jquery.validate.unobtrusive.min.js

我在我的项目中对 View 中的 dataannotations 和 Controller 中的 ModelState.AddModelError 进行了验证，所以我知道我已经正确配置了所有验证代码。

但是使用自定义验证会在代码中生成错误，但不会显示错误消息。

```
public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
{ if (DOB > DateTime.Now.AddYears(-18))
  { yield return new ValidationResult("Must be 18 or over."); }      } 
```

在 POST 操作中深入调试，自定义验证会导致模型状态失败，并且错误消息被放置在正确的值字段中，但是当模型被发送回视图时，错误消息不会显示。在控制器中，我也有 ModelState.AddModelError 代码，并且它的消息确实显示。对于一个工作而不是另一个工作，如何以不同的方式处理？如果不是这样，还有什么会阻止错误消息显示？

**更新 1：**

我正在使用 ViewModel 在视图中创建模型。我删除了 ViewModel 并开始显示错误消息，只要我将 ViewModel 添加回消息中，就会再次停止显示。有没有人成功使用 ViewModel 的自定义验证？有什么你需要做的额外工作才能让它工作吗？

**更新 2：**

我用这两个简单的类（Agency 和 Person）创建了一个新的 MVC3 项目。

```
 public class Agency : IValidatableObject
  {

    public int Id { get; set; }

    public string Name { get; set; }

    public DateTime DOB { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
      if (DOB > DateTime.Now.AddYears(-18)) { yield return new ValidationResult("Must be over 18."); }
    }
  }

  public class Person
  {
    public int Id { get; set; }

    public string Name { get; set; }
  } 
```

这是控制器代码

```
 public ActionResult Create()
    {
        return View();
    } 

    //
    // POST: /Agency/Create

    [HttpPost]
    public ActionResult Create(Agency agency)
    {
      if (ModelState.IsValid)
      {

        db.Agencies.Add(agency);
        db.SaveChanges();
        return RedirectToAction("Index");
      }

      return View(agency);
    }

    //[HttpPost]
    //public ActionResult Create(AgencyVM agencyVM)
    //{
    //  if (ModelState.IsValid)
    //  {
    //    var agency = agencyVM.Agency;
    //    db.Agencies.Add(agency);
    //    db.SaveChanges();
    //    return RedirectToAction("Index");
    //  }

    //  return View(agencyVM);
    //} 
```

风景

```
@model CustValTest.Models.Agency
@*@model CustValTest.Models.AgencyVM*@
@* When using VM (model => model.Name)  becomes (model => model.Agency.Name) etc. *@

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Agency</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.DOB)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.DOB)
            @Html.ValidationMessageFor(model => model.DOB)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

视图模型

```
 public class AgencyVM
  {
    public Agency Agency { get; set; }

    public Person Person { get; set; }

  } 
```

当视图中仅显示代理时，将显示验证错误（18 岁以下的 DOB）。当 ViewModel 出现时，错误不会显示。自定义验证始终会捕获错误并导致 ModelState.IsValid 失败并重新呈现视图。任何人都可以复制这个吗？关于为什么以及如何解决的任何想法？

**更新 3：**

作为一种临时解决方法，我通过向 ValidationResult 添加一个参数，将 Validation 更改为一级字段（相对于模型一级）：

```
if (DOB > DateTime.Now.AddYears(-18)) { yield return new ValidationResult("Must be over 18.", new [] { "DOB" }); } 
```

现在的问题是错误消息显示在字段旁边而不是表单顶部（这在手风琴视图中不好，因为用户将返回到表单而没有可见的错误消息）。为了解决这个次要问题，我将此代码添加到控制器 POST 操作中。

```
 ModelState.AddModelError(string.Empty, errMsgInvld);
      return View(agencyVM);
    }
    string errMsgInvld = "There was an entry error, please review the entire form. Invalid entries will be noted in red."; 
```

问题仍未得到解答，为什么 ViewModel 不显示模型级错误消息（有关此内容的更多信息，请参阅我对 JaySilk84 的回复）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T06:35:09.257

现在的问题是您的模型是嵌套的，错误消息被放置在没有 .DOB 的 ModelState 下`Agency`，因为您没有在 .DOB 中指定它`ValidationResult`。`ValidationMessageFor()`助手正在寻找一个名为*Agency.DOB*的键（请参阅下面来自 ValidationMessageFor() 助手的相关代码）：

```
string fullHtmlFieldName = htmlHelper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(expression);
FormContext clientValidation = htmlHelper.ViewContext.GetFormContextForClientValidation();
if (!htmlHelper.ViewData.ModelState.ContainsKey(fullHtmlFieldName) && clientValidation == null)
    return (MvcHtmlString) null; 
```

`GetFullHtmlFieldName()`正在返回*Agency.DOB*，而不是*Agency*

我认为如果您将 DOB 添加到`ValidationResult`它会起作用：

```
public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
{
    if (DOB > DateTime.Now.AddYears(-18)) { yield return new ValidationResult("Must be over 18.", new List<string>() { "DOB" }); }
} 
```

第二个参数`ValidationResult`将告诉它在 ModelState 中使用什么键（默认情况下，它将附加父对象 is `Agency`），因此 ModelState 将有一个名为*Agency.DOB*的键，这是您`ValidationMessageFor()`正在寻找的。

**编辑：**

~~如果您不想要字段级验证，则不需要`Html.ValidationMessageFor()`. 你只需要`ValidationSummary()`.~~

视图被`AgencyVM`视为模型。如果您希望它正确验证，则将验证放在`AgencyVM`级别并让它验证子对象。或者，您可以对子对象进行验证，但父对象 (AgencyVM) 必须将其聚合到视图中。您可以做的另一件事是保持原样并更改`ValidationSummary(true)`为`ValidationSummary(false)`. 这会将 ModelState 中的所有内容打印到摘要中。我认为删除验证`Agency`并将其放入`AgencyVM`可能是最好的方法：

```
 public class AgencyVM : IValidatableObject

    {
        public Agency Agency { get; set; }

        public Person Person { get; set; }

        public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
        {
            if (Agency.DOB > DateTime.Now.AddYears(-18)) { yield return new ValidationResult("Must be over 18."); }
            if (string.IsNullOrEmpty(Agency.Name)) { yield return new ValidationResult("Need a name"); }
        }
    } 
```

# c# - 通过十六进制值获取颜色名称？

> ID：11747986
> 
> 赞同：7
> 
> 时间：2012-07-31T19:57:35.907
> 
> 标签：c#, colors

我知道如何使用十六进制值获取预定义颜色的名称，但如何在将其十六进制值近似为最接近的已知颜色时获取颜色名称。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T20:19:35.613

这是基于 Ian 建议的一些代码。我在许多颜色值上对其进行了测试，似乎效果很好。

```
GetApproximateColorName(ColorTranslator.FromHtml(source))

private static readonly IEnumerable<PropertyInfo> _colorProperties = 
            typeof(Color)
            .GetProperties(BindingFlags.Public | BindingFlags.Static)
            .Where(p => p.PropertyType == typeof (Color));

static string GetApproximateColorName(Color color)
{
    int minDistance = int.MaxValue;
    string minColor = Color.Black.Name;

    foreach (var colorProperty in _colorProperties)
    {
        var colorPropertyValue = (Color)colorProperty.GetValue(null, null);
        if (colorPropertyValue.R == color.R
                && colorPropertyValue.G == color.G
                && colorPropertyValue.B == color.B)
        {
            return colorPropertyValue.Name;
        }

        int distance = Math.Abs(colorPropertyValue.R - color.R) +
                        Math.Abs(colorPropertyValue.G - color.G) +
                        Math.Abs(colorPropertyValue.B - color.B);

        if (distance < minDistance)
        {
            minDistance = distance;
            minColor = colorPropertyValue.Name;
        }
    }

    return minColor;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:03:29.560

[https://stackoverflow.com/a/7792104/224370](https://stackoverflow.com/a/7792104/224370)解释了如何将命名颜色与精确的 RGB 值匹配。为了使其近似，您需要某种距离函数来计算颜色之间的距离。在 RGB 空间中执行此操作（R、G 和 B 值的平方和）不会给您一个完美的答案（但可能已经足够好了）。有关这样做的示例，请参见[https://stackoverflow.com/a/7792111/224370 。](https://stackoverflow.com/a/7792111/224370)要获得更精确的答案，您可能需要转换为 HSL，然后进行比较。

# mysql-workbench - 如何同步两个Mysql Workbench图表？

> ID：11747987
> 
> 赞同：7
> 
> 时间：2012-07-31T19:57:36.590
> 
> 标签：mysql-workbench

我在开发组工作，任何人都可以添加、编辑或删除 MySQL Workbench ERD 图的表。

我不知道合并/同步两个图表中的更改的任何策略。

Sincronize 在每个新表上的图表上的位置，删除的表。

我有一个包含 130 个表的 MySQL 模型，ERD 图太大，GIT 等工具不适用于 .mwb 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-06T07:11:10.710

**【解决方案】**
如果你有两个或多个.mwb文件，并且想将模型合并到一个文件中，那么打开file1.mwb并进入
***File -> Include Model -> 选择file2.mwb***，模型出现在file1.mwb中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:07:04.593

这是一个hack，但是将两个图表的“数据库>与任何源同步”到同一个数据库中，并且将来只使用一个图表。

# html - 额外的 '？' 安装Weblogic 12后在JSP中生成中文字符

> ID：11747991
> 
> 赞同：1
> 
> 时间：2012-07-31T19:57:53.533
> 
> 标签：html, jsp, xslt

我通常使用 XSLT 将 XSL 转换为 JSP 页面，所有语言都没有问题。

最近升级到 Weblogic12 和 Oracle Pack Eclipse 后，出现了问题。似乎使用中文的JSP文件我有一个额外的'？我的按钮右侧的字符。而在英语中，我有一个空白空间，而不是通常的  。当前编码是GBK。下面是我的代码片段。

问题：**是什么导致 XSLT 之后的最终结果显示为“？” 或 ' ' 而不是 jsp 页面上的   ？**

最近可能导致的系统更改：eclipse ganyemede 到 oracle pack eclipse、Java5 到 Java6、weblogic 到 weblogic 12

```
 <a href="#" id="btn_NEWQUOTE" 
onclick="submitForm('/Controller/QUOTE','theForm'); 
    return (false);" class="actionBtn">
<span><span>NEW QUOTE</span></span></a>?> 
```

![在此处输入图像描述](../Images/5d768dd5ee13da53fe498563613b15a4.png)

# ios - Cordova/Phonegap 社交分享

> ID：11747993
> 
> 赞同：4
> 
> 时间：2012-07-31T19:58:00.020
> 
> 标签：ios, facebook, cordova

我正在寻找一种在cordova/phonegap 应用程序内部共享的简单解决方案。我正在寻找添加 facebook、twitter 和电子邮件共享。就像这个应用程序有：http: [//itunes.apple.com/us/app/mars-hill-church/id322993145](http://itunes.apple.com/us/app/mars-hill-church/id322993145?mt=8) ?mt=8 。如果你点击布道，你实际上可以分享一个单独的布道。

我试过使用这个：http: [//developers.facebook.com/docs/reference/dialogs/feed/](http://developers.facebook.com/docs/reference/dialogs/feed/)。我打算在 iframe 中发布分享帖子，但不幸的是，facebook 不允许您在 iframe 中加载。

最好我希望共享部分尽可能多地留在应用程序内，而无需启动 safari。但是，我会选择一个 facebook 按钮（自定义外观），我可以点击它，它会将我从应用程序中启动到 safari 中来分享故事。

Cordova 1.8 IOS 5 JQuery Jquery Mobile

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:15:49.773

您是否尝试过 Apache Cordova/PhoneGap 中的 Facebook Connect 官方插件？该代码托管在
[https://github.com/davejohnson/phonegap-plugin-facebook-connect上，并且在](https://github.com/davejohnson/phonegap-plugin-facebook-connect)[http://phonegap.com/2011/08/30/get-the-new-phonegap-](http://phonegap.com/2011/08/30/get-the-new-phonegap-facebook-platform-plugin/) 上有新闻稿 [脸书平台插件/](http://phonegap.com/2011/08/30/get-the-new-phonegap-facebook-platform-plugin/)。

这听起来像你所追求的，但我自己还没有尝试过。

# php - 制作字符串来反对？

> ID：11747994
> 
> 赞同：0
> 
> 时间：2012-07-31T19:58:01.193
> 
> 标签：php, string, function

将字符串转换为对象时遇到问题。这是功能：

```
public function slikepoid($dire,$id)
{
    $this->dire=$dire;
    $this->id=$id;
    $slike = $this->skupljanjeslika($this->dire);
    $slikeid = array_filter($slike, function($el) { 
        return substr( $el, 0, 2) == '$this->id-'; // Here is the problem !
    });
    return $slikeid;
} 
```

我收到了这个错误：

**致命错误：在第 8 行不在对象上下文中时使用 $this**

我试过了：

```
 return substr( $el, 0, 2) == ''.(string)$this->id;'-'; 
```

但没有运气:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T20:03:47.527

您应该能够使用[闭包](http://php.net/closure)来完成此操作：

```
$slikeid = array_filter($slike, function($el) use( $id) { 
    return substr( $el, 0, 2) == $id; 
}); 
```

现在，`$id`应该在匿名函数的范围内，因此您应该能够将元素值与其进行比较。

# android - Android + Facebook SSO

> ID：11747998
> 
> 赞同：0
> 
> 时间：2012-07-31T19:58:07.870
> 
> 标签：android, facebook, login, single-sign-on

我有一个带有 Facebook 登录的小型 Android 应用程序，我的手机上也安装了 Facebook 应用程序。Facebook登录的代码如下：

```
 if(access_token != null && access_token != "")
        facebook.setAccessToken(access_token);

    if(expires != 0)
        facebook.setAccessExpires(expires);

    if(!facebook.isSessionValid()) 
    {
        facebook.authorize(this, new String[] { "email", "publish_checkins", "publish_stream" }, new DialogListener() 
        {
            public void onComplete(Bundle values) 
            {
                /*
                if (GlobalData.user != null)
                {
                    GlobalData.user.fbToken = facebook.getAccessToken();
                    GlobalData.user.fbTokenExpires = facebook.getAccessExpires();
                    dataSource.addUser(GlobalData.user);
                }
                else */

                gatherFacebookData();
            }

            public void onFacebookError(FacebookError error) 
            {
                Toast.makeText(context, "Error: " + error, Toast.LENGTH_SHORT).show();
                return;
            }

            public void onError(DialogError e) 
            {
                Toast.makeText(context, "Error: " + e, Toast.LENGTH_SHORT).show();
                return;
            }

            public void onCancel() 
            {
                Toast.makeText(context, "Canceled", Toast.LENGTH_SHORT).show();
                return;
            }
        });
    }
    else
        this.gatherFacebookData(); 
```

在安装 Facebook 应用程序之前，我可以毫无问题地在我的应用程序中使用 Facebook SSO。但是，现在我单击“使用 Facebook 登录”按钮，弹出窗口会闪烁并带有加载屏幕，然后立即消失。没有调用任何 DialogListener 函数，所以我不知道会发生什么。Logcat 根本不显示任何错误。

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-30T04:12:42.070

使用此代码 facebook.authorize(this, permissions, Facebook.FORCE_DIALOG_AUTH, new LoginDialogListener());

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:42:09.990

要存储 access_token，请将以下代码片段添加到您的`onComplete`方法中（我不确定您的`gatherFacebookData()`方法是什么，因为您没有包含它。

```
 @Override
            public void onComplete(Bundle values) {
                SharedPreferences.Editor editor = mPrefs.edit();
                editor.putString("access_token", facebook.getAccessToken());
                editor.putLong("access_expires", facebook.getAccessExpires());
                editor.commit();
            } 
```

如您所见，您将用户的 access_token 存储到 SharedPreferences 中，因此在您检查**之前**`onCreate`的方法中，您可以执行以下操作：**`if (!facebook.isSessionValid())`**

 **```
 /*
     * Get existing access_token if any
     */
    mPrefs = getPreferences(MODE_PRIVATE);
    String access_token = mPrefs.getString("access_token", null);
    long expires = mPrefs.getLong("access_expires", 0);
    if(access_token != null) {
        facebook.setAccessToken(access_token);
    }
    if(expires != 0) {
        facebook.setAccessExpires(expires);
    } 
```

让我知道这是否有帮助。**