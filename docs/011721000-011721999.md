# StackOverflow 问答 11721000-11721999

# android - 如何解决这个 SQLiteException: no such column ？

> ID：11721002
> 
> 赞同：0
> 
> 时间：2012-07-30T11:51:59.743
> 
> 标签：android, sqlite

条目已成功提交，但当按下“查看”​​按钮时，应用程序崩溃并且 Logcat 输出为：

> D/错误（2808）：android.database.sqlite.SQLiteException：没有这样的列：名称：，编译时：从 orderDetails 中选择 id、名称、项目、数量、价格

我该如何解决这个问题？

公共类 DatabaseHandler 扩展 SQLiteOpenHelper {

```
private static final int DATABASE_VERSION = 1;
private static final String DATABASE_NAME = "orders";
private static final String TABLE_ORDERS = "orderDetails";

// Now, column names

private static final String KEY_ID = "id";
private static final String KEY_NAME = "names";
private static final String KEY_ITEM = "items";
private static final String KEY_QUANTITY = "quantity";
private static final String KEY_PRICE = "price";

private DatabaseHandler handler;
private final Context myContext;
private SQLiteDatabase myDatabase;

public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
    myContext = context;
}

@Override
public void onCreate(SQLiteDatabase db) {

    String CREATE_TABLE = "CREATE TABLE " + TABLE_ORDERS + "(" + KEY_ID
            + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_ITEM + " BLOB, "
            + KEY_QUANTITY + " REAL, " + KEY_PRICE + " REAL);";
    db.execSQL(CREATE_TABLE);

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_ORDERS);
    onCreate(db);
}

public void addEntry(String name, String item, float quantity, float price) {
    try {
        handler = new DatabaseHandler(myContext);
        myDatabase = handler.getWritableDatabase();

        ContentValues cv = new ContentValues();
        cv.put(KEY_NAME, name);
        cv.put(KEY_ITEM, item);
        cv.put(KEY_QUANTITY, quantity);
        cv.put(KEY_PRICE, price);

        myDatabase.insert(TABLE_ORDERS, null, cv);
        handler.close();

        // delete this toast
        Toast.makeText(myContext, "It worked", Toast.LENGTH_SHORT).show();

    } catch (Exception e) {
        // TODO Auto-generated catch block

        Toast.makeText(myContext, "It failed", Toast.LENGTH_SHORT).show();
        e.printStackTrace();
        Log.d("Error", e.toString());
    }

}

public String getEntries() {

    try {
        handler = new DatabaseHandler(myContext);
        myDatabase = handler.getReadableDatabase();
        String[] columns = new String[] { KEY_ID, KEY_NAME, KEY_ITEM,
                KEY_QUANTITY, KEY_PRICE };

        Cursor c = myDatabase.query(TABLE_ORDERS, columns, null, null, null,
                null, null);
        String result = "";

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            result = result + c.getString(0) + " |" + c.getString(1) + " |"
                    + c.getString(2) + " |" + c.getString(3) + " |"
                    + c.getString(4) + "\n";
        }
        handler.close();
        return result;
    } catch (Exception e) {
        Log.d("Error", e.toString());
        e.printStackTrace();
        return null;

    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:54:09.743

**解决方案**

**[1] 首先从**您的 AVD 或 Real Device 中删除创建的数据库，因为已经在那里创建的表没有列 KEY_NAME("names")

**[2] 那么下次**你何时运行应用程序时，该表将在表中使用以下代码创建：：

```
String CREATE_TABLE = "CREATE TABLE " + TABLE_ORDERS + "(" + KEY_ID
            + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_ITEM + " BLOB, "
            + KEY_NAME + " TEXT, "  //  ADD THIS  COLUMN
            + KEY_QUANTITY + " REAL, " + KEY_PRICE + " REAL);";
    db.execSQL(CREATE_TABLE); 
```

* * *

您**忘记将 KEY_NAME**放入表的创建查询中，请参阅以下代码：

```
String CREATE_TABLE = "CREATE TABLE " + TABLE_ORDERS + "(" + KEY_ID
            + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_ITEM + " BLOB, "
            + KEY_QUANTITY + " REAL, " + KEY_PRICE + " REAL);";
    db.execSQL(CREATE_TABLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:55:52.277

如您所见，您的表定义中没有列名：

```
@Override
public void onCreate(SQLiteDatabase db) {

    String CREATE_TABLE = "CREATE TABLE " + TABLE_ORDERS + "(" + KEY_ID
            + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_ITEM + " BLOB, "
            + KEY_QUANTITY + " REAL, " + KEY_PRICE + " REAL);";
    db.execSQL(CREATE_TABLE);

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-30T11:54:39.640

“名称”是保留字。尝试使用带方括号的 [names]。

# android - 如何在 SQLite 中存储 JSONArray？

> ID：11721004
> 
> 赞同：-3
> 
> 时间：2012-07-30T11:52:06.303
> 
> 标签：android, sqlite

我需要将 JSONArray 存储在 sqlite 中，这是我将其解析为 String 以存储在 SQLite 中的方式

```
DataBase dba = new DataBase(getActivity(), "moduleDesc");
                    JSONObject mModule = CommonUtility.getDescribeObject(
                            mSP, "describe", mModuleName);
                    boolean deleteable = mModule.getBoolean("deleteable");
                    int flag = (deleteable) ? 1 : 0;
                    boolean createable = mModule.getBoolean("createable");
                    int flag1 = (createable) ? 1 : 0;
                    boolean updateable = mModule.getBoolean("updateable");
                    int flag2 = (updateable) ? 1 : 0;
                    String name = mModule.getString("name");
                    String label = mModule.getString("label");
                    String labelFields = mModule.getString("labelFields");
                    JSONArray mFields = mModule.getJSONArray("fields");
                    String fields = mFields.toString();
                    boolean exists = dba.Exists(name);
                    if (exists == false) {
                        dba.insertintomoduleDesc(flag, flag1, flag2, name,
                                labelFields, label,fields);
                    }
                    dba.close(); 
```

现在我把它转换回来

```
DataBase dba = new DataBase(con);
    cur = dba.getmod(moduleName);
     mIsCreatable = cur.getInt(cur.getColumnIndex("createable"));
     mIsUpdateable = cur.getInt(cur.getColumnIndex("updateable"));
     mIsDeletable = cur.getInt(cur.getColumnIndex("deleteable"));
     mName = cur.getString(cur.getColumnIndex("name"));
     mLabel = cur.getString(cur.getColumnIndex("label"));
     mLabelFields = cur.getString(cur.getColumnIndex("labelfields"));
     String fields = cur.getString(cur.getColumnIndex("fields"));
     mFields = fields.toJSONArray(); 
```

它说 toJSONArray() 未定义字符串，但我的 Jsonarray 正在解析并存储在 sqlite 中，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:54:52.997

```
 String strFields = cur.getString(cur.getColumnIndex("fields"));
 mFields = fields.toJSONArray(); 
```

而不是上面，您可以使用以下方法从 String 创建 JSONArray：

```
JSONArray mFields = new JSONArray(strFields); 
```

# php - PHPUnit 中的单元测试 - 处理多个条件

> ID：11721008
> 
> 赞同：3
> 
> 时间：2012-07-30T11:52:26.473
> 
> 标签：php, unit-testing, phpunit, logical-operators

我想使用 PHPUnit 编写一个测试，其中包括检查以确保值是 a`string` *或* `NULL`.

AFAIK，我可以像这样编写这样的测试：

```
if (is_string($value) || is_null($value)) { 
    $result = TRUE; 
} else { 
    $result = FALSE; 
} 

$this->assertTrue($result); 
```

但是，我已经看到 PHPUnit 有一个`logicalOr()`方法，我不知道我是否应该使用它来进行更“原生”的测试？如果我应该使用它，我不知道该怎么做......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-08-23T08:30:34.163

使用 phpunit v5.5 它（也）以这种方式工作：

```
if (is_string($value) || is_null($value)) { 
    $result = TRUE; 
} else { 
    $result = FALSE; 
} 

$this->assertThat($value, $this->logicalOr(
    $this->isType('string'),
    $this->isNull()
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:02:53.493

最好的方法是在出现问题时为您提供最有用的输出。在这种情况下，只要您知道出了什么问题，我认为您采用哪种方式并不重要。以下代码将提供有意义的错误消息：

```
$message = '$value should have been either a string or null, but was actually a '
           .gettype($value);
$this->asertTrue($valueIsEitherStringOrNull, $message); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:47:55.607

`logicalOr`返回一个对象，该对象用于构建可以传递给 的条件`assertThat`。我无法检查手机上的语法，但它应该看起来像这样：

```
self::assertThat(self::logicalOr(self::stringValue(), self::nullValue())); 
```

方法名称无疑是不正确的，因为我习惯于 Hamcrest，但我的结构是相似的。

# titanium - 我在哪里可以找到为钛应用程序构建自定义 ui 的好资源

> ID：11721009
> 
> 赞同：1
> 
> 时间：2012-07-30T11:52:30.047
> 
> 标签：titanium

我在哪里可以找到为诸如triplingo 应用程序之类的钛应用程序构建自定义用户界面的好资源

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T03:31:23.210

Appcelerator 为自定义 UI 开发提供了几个教程：

1.  [自定义 UI 组件](http://www.google.com.eg/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFcQFjAA&url=http://developer.appcelerator.com/blog/2011/08/forging-titanium-episode-3-custom-ui-components.html&ei=aQcvUJmsLsj2sgaczYHQCA&usg=AFQjCNEEcWU_i5BgnyaW_ngzC-f9U6vMoA&sig2=yQtxxT2zkIR4gf-kMiu9TQ&cad=rja)
2.  [使用 Titanium 构建高级事务 UI](http://developer.appcelerator.com/blog/2010/05/building-an-advanced-transaction-ui-with-titanium.html)

我建议您观看锻造钛视频系列以获得更先进的技术在[这里](http://vimeopro.com/appcelerator/forging-titanium)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T04:51:06.120

If your looking for custom UI, you obviously, need to hire a designer fluent in Photoshop, Illustrator or whatever graphics program.

If your looking for code to style said apps, then look no further than the docs, specifically the `backgroundImage` attribute of every view in titanium.

For example to style a custom button, do this:

```
var more_btn = Ti.UI.createButton({
    backgroundImage : 'More-1.png', // Custom UI
    backgroundFocusedImage : 'More-2.png', // Custom UI when clicked
    top : 271,
    left : 173,
    width : 135,
    height : 40
}); 
```

# java - 存储 X 和 Y 坐标

> ID：11721013
> 
> 赞同：11
> 
> 时间：2012-07-30T11:52:51.890
> 
> 标签：java, coordinates

嗨，我是这个网站的新手，需要帮助我正在开发的程序。我遇到的问题是我似乎无法存储字符串和两个整数（作为坐标）。我查看了其他代码，但没有看到这些值是如何存储的。下面是我一直在使用的代码。代码似乎很好，但是在尝试存储值时我不能放乘整数。谢谢你的时间

```
import java.util.HashMap;
public class map {

    class Coords {
        int x;
        int y;

        public boolean equals(Object o) {
            Coords c = (Coords) o;
            return c.x == x && c.y == y;
        }

        public Coords(int x, int y) {
            super();
            this.x = x;
            this.y = y;
        }

        public int hashCode() {
            return new Integer(x + "0" + y);
        }
    }

    public static void main(String args[]) {

        HashMap<Coords, Character> map = new HashMap<Coords, Character>();
        map.put(new coords(65, 72), "Dan");
    }

} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-02-24T00:58:57.537

java中有一个类叫做Class Point。

[http://docs.oracle.com/javase/7/docs/api/java/awt/Point.html](http://docs.oracle.com/javase/7/docs/api/java/awt/Point.html)

这与 Java docs API 10 上提供的信息相同：

[https://docs.oracle.com/javase/10/docs/api/java/awt/Point.html](https://docs.oracle.com/javase/10/docs/api/java/awt/Point.html)

表示 (x,y) 坐标空间中的位置的点，以整数精度指定。

您可以在此链接中看到一个示例以及其他相关的重要主题：[http ://www.java2s.com/Tutorial/Java/0261__2D-Graphics/Pointclass.htm](http://www.java2s.com/Tutorial/Java/0261__2D-Graphics/Pointclass.htm)

```
import java.awt.Point;

class PointSetter {

  public static void main(String[] arguments) {
    Point location = new Point(4, 13);

    System.out.println("Starting location:");
    System.out.println("X equals " + location.x);
    System.out.println("Y equals " + location.y);

    System.out.println("\nMoving to (7, 6)");
    location.x = 7;
    location.y = 6;

    System.out.println("\nEnding location:");
    System.out.println("X equals " + location.x);
    System.out.println("Y equals " + location.y);
  }
} 
```

我希望这可以帮助你！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-30T11:57:05.717

似乎有几个问题：

*   “旦”是一个`String`，不是一个`Character`
*   大小写在 Java 中很重要（`new coords(65,72)`应该是`new Coords(65,72)`）
*   坐标必须是静态的才能在不引用封闭地图类的实例的情况下进行实例化。

这应该有效：

```
static class Coords {
    ...
}

Map<Coords, String> map = new HashMap<Coords, String>();
map.put(new Coords(65, 72), "Dan"); 
```

ps：虽然允许`map`在 a中命名局部变量`class map`，但出现这种名称冲突并不是一个好主意。在 Java 中，类通常以大写开头，因此您可以重命名您的类 Map。但碰巧 Map 是 Java 中的标准类。因此，将您的课程称为 Main 或 Test 或任何相关的。;-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T12:08:18.840

添加到@assylias

1.  让你`inner class` `stati`c 为了插入新的对象，就像你有或`new Outer().new Inner()`.
2.  注意[Java 命名约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)

**代码如：**

```
public class XYTest {
    static class Coords {
        int x;
        int y;

        public boolean equals(Object o) {
            Coords c = (Coords) o;
            return c.x == x && c.y == y;
        }

        public Coords(int x, int y) {
            super();
            this.x = x;
            this.y = y;
        }

        public int hashCode() {
            return new Integer(x + "0" + y);
        }
    }

    public static void main(String args[]) {

        HashMap<Coords, String> map = new HashMap<Coords, String>();

        map.put(new Coords(65, 72), "Dan");

        map.put(new Coords(68, 78), "Amn");
        map.put(new Coords(675, 89), "Ann");

        System.out.println(map.size());
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-26T11:48:27.990

```
package Lecture3;

import java.util.Scanner;

public class lecture9 {

    private int nInleste;

    public lecture9() {/*
                         * tabell/ // T/*chapter 6 in the books.
                         **/
    }

    public static void main(String[] args) {
        Scanner inn = new Scanner(System.in);
        int nInleste = 3;
        double[] tall = new double[nInleste];
        double sum = 0;
        for (int i = 0; i < nInleste; i++) {
            System.out.println("Leste en tall!");
            tall[i] = inn.nextDouble();
            sum += tall[i];
        }
        System.out.println(sum);
        double snitt = nInleste / nInleste;
        System.out.println("Gjennomsnittsverdien:" + snitt);
        for (int i = 0; i < nInleste; i++) {
            double aavik = tall[i] - snitt;
            int avvivk = 0;
            System.out.println(i + 1 + " Tal sitt avvik fra gjennomsnittet " + avvivk);

        }
    }/* end of the main methods */

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T12:14:16.713

如果你的代码有问题，你可以试试这个，简单的代码将字符串和两个`int`值存储到一个`map`

```
class MyCoord{
    private int X;
    private int Y;

    public MyCoord() {
        this(0,0);
    }        
    public MyCoord(int X, int Y) {
        this.X = X;
        this.Y = Y;
    }
    public int getX() {
        return X;
    }
    public int getY() {
        return Y;
    }
    public void setX(int X) {
        this.X = X;
    }
    public void setY(int Y) {
        this.Y = Y;
    }
} 
```

//主类开始

```
public class  PointDemo{
    public static void main(String[] args) {

        Map <String,MyCoord> multiplePoints=new HashMap<String, MyCoord>();
        multiplePoints.put("point1", new MyCoord(10, 20));
        multiplePoints.put("point2", new MyCoord(100, 2000));

        MyCoord coord=multiplePoints.get("point1");
        System.out.println(coord.getX() +" : "+coord.getY());              
    }
} 
```

# mysql - 使用 mySql 触发器自定义回调

> ID：11721016
> 
> 赞同：0
> 
> 时间：2012-07-30T11:53:17.673
> 
> 标签：mysql

我试图弄清楚是否或如何实现一些用 C 编写的自定义回调，当插入、删除或更新表行时会调用这些回调。背景是，我必须对特定数据表实现某种视图，一种简单而通用的方法是实现某种触发器，它可以调用 C 函数。

轮询并不是一个真正的选择，如果我确信我正在尝试做的事情是不可行的，那么改变设计就是接下来要做的事情。

顺便说一句：这对 Oracle 数据库可行吗？

# javascript - 如何在 CKEditor 中使用点击事件..？

> ID：11721022
> 
> 赞同：5
> 
> 时间：2012-07-30T11:53:44.577
> 
> 标签：javascript, click, ckeditor

我正在编写一个小代码以在 CKEditor 文档单击事件上运行，但它不起作用。我的代码是，

```
var element = CKEDITOR.document.getById( 'Editor_TextArea' );
element.on( 'click', function( ev )
{
//mycode
   alert('ok');
  }
  ); 
```

谁能帮我..

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-02T07:27:25.980

这`CKEDITOR.document.getById( 'Editor_TextArea' );`对我来说没有任何价值。所以我使用了下面的代码，它的效果很好。

```
CKEDITOR.instances['Editor_TextArea'].on('contentDom', function() {
    this.document.on('click', function(event){
         //your code
         alert('Click Event');
     });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-30T08:35:15.110

这将工作`emailTemplateBody`是`textarea`字段的名称。

```
var editor = CKEDITOR.instances.emailTemplateBody

editor.on('contentDom', function () {

    var editable = editor.editable();

    editable.attachListener(editable, 'click', function () {
        console.log("click event");
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-30T08:38:44.987

```
editor.editable().on('click', function (event) {
    //YOUR CODE GOES HERE 
}); 
```

# c# - 在特定时间清表一次（每天）

> ID：11721024
> 
> 赞同：2
> 
> 时间：2012-07-30T11:53:57.287
> 
> 标签：c#, asp.net, cron

我正在尝试实现以下目标：我正在使用 MySQL 和 ASP.NET。我正在表格中创建一个计数器。我希望每天将计数器列重置为零。是否有任何选择可以实现这一目标以及如何实现。

我不想在 Windows 中使用管理任务，也不想创建 .exe 文件。我更喜欢能够在 C# 中的代码中做到这一点。

我想解决这个问题的方法是创建一个将设置为 false 的应用程序变量。在应用程序页面中，我将查询 DateTime.Now 并获取当前时间。如果时间是 12:00 并且 Application 变量为 false，则运行一个函数，否则，什么也不做。如果时间是 13:00 并且 Application 变量等于 false，则将其设置为 true。

我在一个小时的差异中这样做只是为了确保它运行。每个访问我的页面的用户都会触发 if 语句。但是，该功能每天只运行一次。

这是一个很好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:49:32.943

阅读您的评论后，我同意我应该为更有效的解决方案付出更多努力。

我决定将 Microsoft 任务计划程序与 VBS 脚本一起使用，如下所示：

1）**创建一个**加载特定页面甚至将结果保存到特定文件的vbs脚本，如下所示：

```
sSrcUrl = "http://www.this-page-intentionally-left-blank.org/"
sDestFolder = "C:\"
sImageFile = "filename.txt"
set oHTTP = WScript.CreateObject("MSXML2.ServerXMLHTTP")
oHTTP.open "GET", sSrcUrl, False
oHTTP.send ""
set oStream = createobject("adodb.stream")
Const adTypeBinary = 1
Const adSaveCreateOverWrite = 2
oStream.type = adTypeBinary
oStream.open
oStream.write oHTTP.responseBody
oStream.savetofile sDestFolder & sImageFile, adSaveCreateOverWrite
set oStream = nothing
set oHTTP = nothing
WScript.Echo "Done..." 
```

2)**创建一个任务**以在每天的特定小时内运行此脚本文件 (cron.vbs)。

我应该在 Windows Server 2008 上运行它。我已经在 Windows 7 上进行了本地测试，效果很好。

我没有看到任何缺点，除非我错过了什么。

来源：[在 Windows 上通过计划任务加载 URL 的推荐方法](https://stackoverflow.com/questions/1987345/recommended-method-for-loading-a-url-via-a-scheduled-task-on-windows)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:59:29.093

如果您希望计数器在 12:00 之前重置，但在 13:15 之前没有人访问您的站点，那么您并不真正关心该重置是否发生在稍后的时间：在此期间没有什么可计算的。

您可以做的不是记住一个布尔值（“重置”），而是一个日期（“重置完成”）。如果当前时间在 12:00 之后，请对照当前日期检查存储的数据。如果它们不匹配，请重置计数器并更新存储的日期。

# sencha-touch-2 - 防止导航栏中的默认行为后退按钮

> ID：11721027
> 
> 赞同：0
> 
> 时间：2012-07-30T11:54:01.947
> 
> 标签：sencha-touch-2, back-button, navigationbar

当后退按钮被录音时，当前视图被破坏是真的吗？
如果是这样，我该如何防止这种情况？

我得到这个想法是因为如果我在导航视图上设置一个活动项目（使用 Ext.getCmp 获得的项目），点击后退按钮，然后再次设置活动项目，Ext.getCmp 返回未定义。

我的问题有什么想法、解决方案或解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:34:13.157

属性 autoDestroy 对此负责。请注意，它应该为 Navigator 设置并影响孩子的破坏，而不是 Navigator 本身。如果它设置为 true - 所有弹出的项目都将被后退操作销毁，否则将保存在内存中

干杯，奥列格

# c++ - C数组vs指针：数组被视为变量，array+0被视为指针？

> ID：11721028
> 
> 赞同：2
> 
> 时间：2012-07-30T11:54:04.583
> 
> 标签：c++, arrays, pointers, constructor

我在 C++ 中创建了一个容器类，并且我有一个来自迭代器的构造函数，所以我可以写`MyContainer<double> x(v.begin(), v.end())`where `v`is a `std::vector<double>`. 我希望能够对 c-array 做同样的事情，但是：

```
double array[3] =  {1., 2\. , 3.};
MyContainer<double> x(array, array+3); // Doesn't work : no matching function for call to ‘MyContainer<double>::MyContainer(double [3], double*)’
MyContainer<double> x(array+0, array+3); // Work 
```

问题的根源是什么以及如何解决？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T11:57:31.820

不要接受对迭代器的引用，按值获取它们。它试图传递对数组的引用；失败的表达式需要数组衰减到一个指针。

大概你有

```
template< typename Iter >
MyContainer( Iter const &first, Iter const &last ); 
```

但你需要

```
template< typename Iter >
MyContainer( Iter first, Iter last ); 
```

迭代器需要足够轻量级才能按值传递；所有标准模板都这样做。

数组不能用作迭代器，因为它不能递增。存储是固定的。当您在表达式中使用数组`arr + 0`或将其*按值*传递给函数时，它会隐式转换为指向其第一个元素的指针。但是通过引用传递时不会发生这种转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T11:59:27.330

的结果`array+0`是一个指针，而`array`它本身不是一个指针，它是一个数组。您的构造函数没有采用数组和指针的重载，因此编译失败。

处理从数组创建开始和结束迭代器的问题的惯用方法是使用`begin(...)`and`end(...)`函数：

```
MyContainer<double> x(std::begin(array), std::end(array)); 
```

重载负责确定数组的末尾在哪里，从而使您无需将数组的长度添加到指针中。

# java - Java中没有尽头的线程

> ID：11721036
> 
> 赞同：1
> 
> 时间：2012-07-30T11:54:42.057
> 
> 标签：java, linux, multithreading

我有一个用 Java 编写的程序，它使用 3 个线程。IDE（Netbeans）中的一切工作正常，当我杀死它时，它会破坏所有线程。当我从命令行启动它并按 Ctrl-C 时，线程会继续运行。处理这个问题的最佳方法是什么？

它是否会杀死主线程，因为我想在那之后我可以使用标志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:03:13.147

您可以在主线程上注册一个关闭挂钩以优雅地清理其他线程。

```
public static void main(String[] args) {
  Runtime.getRuntime().addShutdownHook(new Thread() {
    public void run() {
      System.out.println("System shutting down");
      // tell your other threads to shut down from here
      // the best way to do this is to set a flag 
      // that they will pick up on and exit gracefully
    }
  });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:42:28.243

在我所知道的大多数 Linux 系统上，如果程序在前台，按 control-c 会导致一个中断信号 (SIGINT) 发送到 JVM，该信号会杀死所有线程（无论是否为守护进程）并退出。我在 Mac OSX 和 CentOS Linux 上尝试了这个[愚蠢的小程序，使用 control-c 可以正常退出。](http://pastebin.com/ardG9QRN)

这里没有提到的一件事是信号处理程序可能正在捕获中断信号。它们允许您捕获 control-c（和其他信号），以便您可以用它们做一些智能的事情。它们非常依赖于操作系统（当然），如果你捕捉到中断信号（SIGINT 通常由 control-c 发送）并且*不*停止 JVM，你就会遇到问题。

但无论如何，您都可以执行以下操作：

```
...
MyHandler handler = new MyHandler();
// catch the control-c signal, "TERM" is another common kill signal
Signal.handle(new Signal("INT"), handler);
...

private static class MyHandler implements SignalHandler {
    @Override
    public void handle(Signal arg0) {
        // interrupt your threads
        // clean up stuff
        // set shutdown flags
        // ...
    }
} 
```

同样，我想说捕获中断信号（control-c）而*不是*关闭 JVM 是一种不好的做法。这可能是您的应用程序的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T12:01:51.900

**1.**你可以`some loop control mechanism`为你的线程使用布尔值。

**2.** Else try using `Daemon threads`，因为**没有Non-Daemon线程，JVM会被关闭。**

**通过默认它的 Non-Daemon**，但是您可以在调用**执行线程****上**的方法**之前将线程设置为 Daemon** ...`start()`

 ****`The JVM will terminate ONLY when all the non-daemon threads including the Main thread has` `terminated.`

**例如：**

```
 Thread t = new Thread(MyClass);
      t.setDaemon(true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T12:24:00.443

Java 可执行文件通过生成到 stdout 的线程转储来响应 Windows 上的 ctrl-c（unix 上的 ctrl-\）。您仍然可以在 Windows 上通过 ctrl-break 杀死它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T11:57:13.347

> 它是否会杀死主线程，因为我想在那之后我可以使用标志？

我不知道 Ctrl-C 特别做什么，但是如果你让你的“永久”线程守护线程，你的应用程序应该在所有非守护线程都终止时终止。有关更多详细信息，请参阅[`Thread`文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T12:02:31.650

您有一个线程作为主线程，其他线程作为守护线程。

使用 Thread.setDaemon(true)****

# android - 在sencha触摸控制器中调用android函数

> ID：11721043
> 
> 赞同：1
> 
> 时间：2012-07-30T11:55:02.753
> 
> 标签：android, sencha-touch-2

Sencha 触控控制器 JavaScript：

```
test:function(name)
{
    alert("function called");
    window.AndroidFunction.playAudio(name);
    alert("completed");
}, 
```

安卓JavaScript处理程序：

```
public class MyJavaScriptInterface {
Context mContext;
MediaPlayer mediaPlayer;

MyJavaScriptInterface(Context c) {
    mContext = c;
}

public void playAudio(String path)
{
    System.out.println("path "+path);
    try {
        int resID = mContext.getResources().getIdentifier(path, "raw", mContext.getPackageName());
        if(mediaPlayer != null)
        {
            mediaPlayer.stop();
            mediaPlayer.reset();
            mediaPlayer.release();
            mediaPlayer = null;
        }   

        mediaPlayer = MediaPlayer.create(mContext, resID);
        mediaPlayer.start();
    } catch (Exception e) {
        System.out.println("ERROR in Play Audio : " + e.getMessage());
    }
}
} 
```

我从 sencha 触摸控制器功能调用 android 功能，但它不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:56:34.630

您是否尝试在模拟器或设备中运行您的应用程序。

就我而言，我试图在模拟器中运行它不工作，但在设备中它工作得很好。

# google-drive-api - 用户删除文件时如何获得通知？

> ID：11721045
> 
> 赞同：2
> 
> 时间：2012-07-30T11:55:04.000
> 
> 标签：google-drive-api

当用户在驱动器上删除我的应用程序的文件时，是否有办法获得通知（例如具有“删除”操作和文件 ID 的状态）？

谢谢，丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:59:15.040

现在没有通知，但是如果您查看帐户的[更改](https://developers.google.com/drive/v2/reference/changes/list)，将会有一个条目，其`deleted`字段设置`true`为已删除文件的文件 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:14:42.697

我没有 Google-drive-sdk 方面的知识，但我已经在 php 中创建了一个类似的函数：

使用 CRON（在后台任务中运行的 php 脚本）列出文件夹中的文件，并与数据库进行比较（当用户添加文件时，我在数据库中添加文件名、大小文件），如果文件存在于数据库中，但不存在在我的列表中，用户删除了这个文件，我想发送一个通知......

直到“Google-drive”专家找到解决方案，我希望我的会派上用场。

# php - 创建和读取 JSON 对象的初学者

> ID：11721050
> 
> 赞同：0
> 
> 时间：2012-07-30T11:56:03.093
> 
> 标签：php, jquery, json

使用[http://objectmix.com/javascript/389546-reading-json-object-jquery.html](http://objectmix.com/javascript/389546-reading-json-object-jquery.html)作为起点，我一直在阅读很多关于 JSON 的内容。不幸的是，我完全是初学者，无法理解创建 JSON 对象的基础知识。

我创建了一个名为 getContact.php 的 PHP 页面

```
<?php
"Contact": {
    "ID" : "1",
    "Name" : "Brett Samuel"
}
?> 
```

以及一个带有以下代码的 javascript 文件：

```
$.getJSON('getContacts.php', function(data) {
    var obj = (new Function("return " + data))();
    alert(data.Contact.Name)
}); 
```

此页面[http://msdn.microsoft.com/en-us/library/bb299886.aspx](http://msdn.microsoft.com/en-us/library/bb299886.aspx)表明我的基本方法是正确的。谁能告诉我为什么这不起作用？绝对没有任何反应。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T11:57:50.180

您的 PHP 文件包含 JSON，它不是有效的 PHP，因此会出错。

如果您使用 PHP，构建 JSON 的最简单方法是首先将数据准备为数组（根据需要关联或索引），然后简单地通过`json_encode()`. （您也可以使用相应的`json_decode()`.

[编辑 - 作为对评论的回应，只需查看 PHP 文档即可`json_encode()`- 这是非常不言自明的。您获取一个数组，将其传递给`json_encode()`，然后您将获得一个 JSON 字符串。

```
$arr = array('one', 'two', 'three');
echo json_encode($arr); //JSON string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:02:04.110

JSON 不是一种编程语言，它当然不能像 PHP 那样执行。它只是一种文件格式。如果您希望您的 Web 服务器提供静态 JSON 文件，只需将其作为*文件名*.json 放入文件系统中，不带任何`<?php`标签。（当然，和 HTML 一样，你也可以把它变成一个`.php`文件，只是其中没有任何 PHP，除了设置 Content-Type 的东西，因为文件后缀不会自动完成。但这很浪费。）

如果你想用 PHP 动态生成一些 JSON，那么你必须编写 PHP 代码来打印出来，例如：

```
<?= json_encode( array( 
      'Contact' => array('ID' => 1, 'Name' => 'Brett Samuel' ) 
    ) ); ?> 
```

另外，请注意 JSON 文档必须是完整的对象；你的需要另一组围绕整个事物的花括号（如上述代码段的输出）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:00:08.797

你需要使用 json_encode 和 json_decode 参考这个[json php 手册](http://php.net/manual/en/book.json.php)

# python - 创建一个类实例需要多少次函数调用？

> ID：11721059
> 
> 赞同：5
> 
> 时间：2012-07-30T11:56:33.777
> 
> 标签：python

知道在 python 中调用函数是昂贵的，这个问题的答案对优化决策有一些影响，例如将直接的单函数数值方法与面向对象的方法进行比较。所以我想知道

*   所需的函数调用的典型数量是多少？
*   最少需要多少次函数调用？
*   什么增加了通话次数？
*   用户创建的类与内置类相比如何？
*   对象删除（包括垃圾收集）呢？

我的 google-fu 无法找到这个问题的答案。

**编辑：**因此，为了总结评论并阻止更接近的投票，这里有一些澄清：

*   与调用普通 python 函数相比，我对 python 实例创建的时间复杂性感兴趣
*   出于这个问题的目的，让我们将自己限制在最新的 CPython 版本中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T12:31:05.253

请参阅Eli Bendersky 的[Python 对象创建](http://eli.thegreenplace.net/2012/04/16/python-object-creation-sequence/)。

详细引用结论：

> 以免我们因树木而失去森林，让我们重新审视本文开头的问题。CPython 执行时会发生什么`j = Joe()`？
> 
> *   由于`Joe`没有明确的元类，`type`是它的类型。所以 的`tp_call`槽`type`，即`type_call`，被调用。
> *   `type_call`首先调用`tp_new`Joe 的 slot：
>     *   由于 Joe 没有明确的基类，它的基类是`object`. 因此，`object_new`被称为。
>     *   由于 Joe 是 Python 定义的类，因此它没有自定义`tp_alloc`插槽。因此，`object_new`调用`PyType_GenericAlloc`.
>     *   `PyType_GenericAlloc`分配并初始化一块足以容纳 Joe 的内存。
> *   `type_call`然后继续调用`Joe.__init__`新创建的对象。
>     *   由于`Joe`未定义`__init__`，因此调用其基数`__init__`，即`object_init`。
>     *   `object_init`什么也没做。
> *   新对象从 name 返回`type_call`并绑定到 name `j`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T13:09:23.230

我已按照评论中的建议完成并用于`timeit`这些测试用例：

```
def a():
    pass

class A(object):
    pass

class B(object):
    def __init__(self):
        pass

class NOPType(type):
    pass

class C(object):
    __metaclass__ = NOPType
    def __init__(self):
        pass

class D(object):
    def __new__(cls, *args, **kwargs):
        return super(D, cls).__new__(cls)

    def __init__(self):
        pass

class E(A):
    def __init__(self):
        super(E, self).__init__() 
```

测试结果：

```
$ python -m timeit -s "import tst" "tst.a()"
10000000 个循环，3 个中最好的：每个循环 0.149 微秒
$ python -m timeit -s "import tst" "tst.A()"
10000000 个循环，3 个中最好的：每个循环 0.169 微秒
$ python -m timeit -s "import tst" "tst.B()"
1000000 个循环，3 个中最好的：每个循环 0.384 微秒
$ python -m timeit -s "import tst" "tst.C()"
1000000 个循环，3 个中最好的：每个循环 0.397 微秒
$ python -m timeit -s "import tst" "tst.D()"
1000000 个循环，3 个中最好的：每个循环 1.09 微秒
$ python -m timeit -s "import tst" "tst.E()"
1000000 个循环，3 个中最好的：每个循环 0.827 微秒

```

使用函数调用作为基线，结果如下：

*   一个基本的实例化需要多 1.1 倍的时间。
*   添加`__init__`方法将因子增加到 2.6
*   添加一个无操作元类只是稍微贵一点，在 2.7
*   而是添加一个 basic `__new__`，相当于 7.3 的函数调用
*   具有单个子类的类相当于 5.6 函数调用

如果将调用`super`替换为其返回值，则对于最后两个结果，您可以减去大约 2。

这应该粗略估计在 CPython 2.7 中耗时的 python 类与 python 函数的比较。

# machine-learning - 我们如何使用 liblinear 或 livsvm 中的 '-v' 选项分别获得每个折叠的准确性？

> ID：11721062
> 
> 赞同：1
> 
> 时间：2012-07-30T11:56:41.987
> 
> 标签：machine-learning, svm, libsvm, cross-validation

在 liblinear 和 libsvm 中，该选项`-v k`允许我们运行 k 折交叉验证。但是为了测试统计显着性，我需要在每一折上获得的准确性。当然，创建每个折叠然后运行训练和测试 k 次的方法很长，但我想知道即使我使用该`-v`选项，是否有办法获得每个折叠的准确性。

我认为 liblinear 和 libsvm 对我的问题会有相同的答案。如果我对此有误，请纠正我。

# javascript - window.innerWidth = 0？

> ID：11721064
> 
> 赞同：6
> 
> 时间：2012-07-30T11:56:55.257
> 
> 标签：javascript, jquery, html, canvas

我正在为动画制作画布网页。奇怪的是，每次我通过双击 html 文件启动网页时，画布的大小几乎总是不正确。我之前发布过一个类似的问题：[Canvas sizing wrong on loading](https://stackoverflow.com/questions/11643826/canvas-sizing-incorrectly-on-loading/11643889#11643889) but has no desired answer。

经过大量调试后，我发现正是它`window.innerWidth`给我带来了这样的麻烦。`window.innerWidth`每次从双击 html 文件启动页面时返回 0 并导致画布大小不正确（有趣的是，画布大小不完全为 0，而是一个非常小的对象，其中要渲染的对象相互堆叠），但在重新加载页面 (Ctrl+R) 后问题不再发生。我正在使用 jQuery 加载页面，这是我的代码：

html:

```
 <body>
        <canvas id="main_canvas"></canvas>
    </body> 
```

js：

```
 $(document).ready(function() {

        var SCREEN_WIDTH = window.innerWidth-10,
            SCREEN_HEIGHT = window.innerHeight-10;

        if (window.innerWidth === 0) { alert("wtf? width = 0?");}

        var canvas = $('canvas')[0],
            context;

        init(); // use $(window).load(init) does not fix the problem

        function init() {

            if (canvas.getContext) {

                context = canvas.getContext('2d');
        animate(); // draw stuff
            }

            else {
                alert('Your browser does not support html5 canvas');
            }
        }
}); 
```

正如您在此处看到的那样，我已经在使用`$(docuemnt).ready(function())`以确保加载内容，但是从链接[http://4loc.wordpress.com/2009/04/28/documentready-vs-windowload/](http://4loc.wordpress.com/2009/04/28/documentready-vs-windowload/)作者建议该文档当 HTML 文档被加载并且 DOM 准备就绪时，ready 事件已经执行，即使所有的图形还没有加载。

另一方面，`$(window).load(function())`当整个页面（包括所有框架、对象和图像）完全加载时，它会稍后执行。因此，涉及图像或其他页面内容的函数应放置在窗口或内容标签本身的加载事件中。但即使我使用这个问题也没有解决。

也许js文件在加载之前要求窗口的宽度，但我找不到可行的解决方案。有人能帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-01-11T23:38:08.770

使用在窗口调整大小时触发的事件侦听器。这样一来，您就不必为尝试查找窗口何时完全初始化而做任何废话。它还会让你减少对状态的依赖，这是一个不错的奖励。

```
window.addEventListener( 'resize', onWindowResize, false ); 
function onWindowResize() {
    windowX = window.innerWidth;
    windowY = window.innerHeight;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-30T12:41:39.347

我有一个类似的问题，`window.outerWidth`当从 ready() 方法调用时在某些浏览器上返回 0，我通过使用解决了它`screen.width`。我没有测试它，但我认为这`screen.availWidth`会解决你的问题。

# modelica - 如何推导除时间以外的其他变量？

> ID：11721065
> 
> 赞同：3
> 
> 时间：2012-07-30T11:56:54.687
> 
> 标签：modelica

我刚开始使用modelica。我知道有一个内置的时间导数运算符 [der(expr)]。如果我必须用其他变量推导怎么办？例如：如果我必须派生一个变量'x'，这怎么形成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:45:30.680

我想如果你需要时间导数以外的东西，你必须明确声明导数，例如

```
y = x^2;    
der_y = 2x; 
```

变量 der_y 应该在模型的前面声明，y 和 x 也应该声明。如果你想要一个双导数，那么你可以做类似的事情

```
dder_y = 2; 
```

与以前一样，变量 dder_y 之前已清除。

在制作 Modelica 模型时，我经常觉得除了时间导数之外还需要其他导数。话虽如此，我自己对 Modelica 还是很陌生，所以很可能会有一段时间我会这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T11:04:33.083

还有可能使用注释`derivative=<NameOfDerivativeFunction>`来告诉工具使用哪个函数来获取函数的导数：

Modelica 规范中的示例[，第 12.7.1 章](https://modelica.org/documents/ModelicaSpec32Revision1.pdf)：

```
function foo0 annotation(derivative=foo1); end foo0;
function foo1 annotation(derivative(order=2)=foo2); end foo1;
function foo2 end foo2; 
```

您可以在第 12.7.1 章中找到更多信息。也许这有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-11T07:36:39.923

如果两个变量都是连续的，则通过 x 导出 y 的简单解决方案使用 dy/dx = (dy/dt) / (dx/dt)，即在 Modelica 中

`dydx = der(y)/der(x)`.

例如，我们将其用于曲线在其弧长上的笛卡尔坐标的导数。

# ios - iOS SQLite：插入语句失败，看不到原因

> ID：11721071
> 
> 赞同：0
> 
> 时间：2012-07-30T11:57:23.063
> 
> 标签：ios, sqlite, insert

因此，我可以使用以下语句为第一个表创建没有问题的数据库：

```
 const char *sqlStatement = "CREATE TABLE IF NOT EXISTS LIBRARY_SEARCH (SEARCH_ID INTEGER PRIMARY KEY AUTOINCREMENT, SEARCH_TERM TEXT)"; 
```

但是当我去插入一行时它失败了。这就是我插入行的方式。

```
NSString *insertStatement = [NSString stringWithFormat:@"INSERT INTO LIBRARY_SEARCH(SEARCH_TERM) VALUES (\"%@\")", myQuery] ; 
```

其中 myQuery 是一个 NSString，它保存应用程序中 searchBar.text 的值。它是一个属性，当然是合成的。

所以我称之为：

```
 if ( sqlite3_exec(searchSessionDB, [insertStatement UTF8String], NULL, NULL, &insert_error) == SQLITE_OK) 
```

哪个失败了。谁能明白为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T12:21:34.237

知道了。在我的开放数据库语句中做了一个小错字。

对于将来看到这个的人来说，这就是开场白现在的样子（而且效果很好！）：

```
if(sqlite3_open(dbpath, &searchSessionDB) = SQLITE_OK){ 
```

感谢 Robert Ryan 建议这个 NSLog：

```
NSLog(@"%s", sqlite3_errmsg(searchSessionDB)); 
```

并感谢 Elpsk 和 H2CO3 提供包装器/应用程序包信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T12:00:55.860

我建议你使用[FMDB](https://github.com/ccgus/fmdb)来查询你的数据库。

**它是sqlite**的包装器，易于使用且易于使用，并且*所有错误都得到了更好的解释*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T12:04:02.773

我确定您正在尝试更新位于您的应用程序包中的 SQLite 数据库。你不能：你不能写入你的应用程序自己的包。将数据库文件复制到应用沙箱之外的 Documents 或 Library 目录中。

其他：如果您正在寻找 OO SQLite 包装器，请查看[我](https://github.com/H2CO3/SQLHelper)的。

# c# - 如何使用 VisualStateManager 刷新当前状态

> ID：11721072
> 
> 赞同：5
> 
> 时间：2012-07-30T11:57:24.287
> 
> 标签：c#, .net, silverlight

我有一个 Silverlight 4 应用程序，其中我在 XAML 中定义了一些状态，并使用`VisualStateManager.GoToState(this, "stateName", false)`它按预期工作。

然而，问题是一些状态的属性绑定到 UI，因此用户可以自定义诸如颜色之类的东西。在该状态下（比如说状态 A）可以做到这一点。直到我更改为另一个状态，然后返回到状态 A，这些更改才会反映出来。问题不在于从 UI 到底层属性的绑定（它们具有预期值），而是需要刷新状态 - 或至少这是我的结论。

起初我只是尝试`VisualStateManager.GoToState(this, "StateA", false)`但发现[“如果控件已经处于 stateName 状态，则 GoToState 不执行任何操作返回 true”](http://msdn.microsoft.com/en-us/library/system.windows.visualstatemanager.gotostate%28v=vs.95%29.aspx)。

然后我尝试了但没有成功，尽管它确实不是一个好的解决方案：

```
VisualStateManager.GoToState(this, "StateB", false);
VisualStateManager.GoToState(this, "StateA", false); 
```

有谁知道我如何强制刷新或解决方法？

**更新：** 当依赖属性发生变化时，我设法让它结合下面的答案和使用下面的代码工作。并且似乎考虑了从 UI 设置的属性的新值`Storyboard.Stop()`。`Storyboard.Begin()`

```
if (VisualStateManager.GoToState(this, "StateA", false))
{
    VisualState stateA = (VisualState)VisualStateGroup.States[0];
    stateA.Storyboard.Stop();
    stateA.Storyboard.Begin();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T20:32:27.227

此代码应该可以工作：

```
VisualStateManager.GoToState(this, "StateB", false);
VisualStateManager.GoToState(this, "StateA", false); 
```

这是强制刷新的典型 Silverlight/WPF 方式。虽然它看起来很老套，但我在 Microsoft 和 Silverlight 工具包代码中看到了这种完全相同的方法。

现在，我的猜测是控件尚未加载，或者当属性更改时您没有调用状态更改。

你需要做两件事：

1.  在 OnApplyTemplate 或控件的加载事件中，将控件置于正确的状态。DependencyProperties 通常在控件实际完成加载模板之前更新。在这种情况下，即使您调用了 GoToState，也没有模板，因此它不会做任何事情，因为没有模板。

2.  确保在依赖属性的属性更改处理程序中，您正在调用状态更改。

供您参考，您注册一个 PropertyChanged 处理程序，如下所示：

```
 public static readonly DependencyProperty MinValueProperty =
        DependencyProperty.Register("MinValue", typeof(double), typeof(ScaleValueConverter), new PropertyMetadata(0.0d,OnMinValuePropertyChanged)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-02T15:07:15.790

在 UWP XAML 中，只需将 de VisualStateGroup 命名为：

```
<VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="PopupStates">
                <VisualState x:Name="Mobile">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="0"/>
                    </VisualState.StateTriggers> 
```

然后你刷新状态：

```
VisualStateManager.GoToState(this, PopupStates.CurrentState.Name, false); 
```

# django - 动态更改 Django 管理内联表单的字段

> ID：11721073
> 
> 赞同：4
> 
> 时间：2012-07-30T11:57:24.397
> 
> 标签：django, admin

我想将 CharField 动态更改为 ChoiceField，因为我希望从由当前请求确定的可能性列表中选择值。

在 ModelAdmin 中，我可以使用 get_form() 来做到这一点，然后说：

```
form.base_fields[field_name] = forms.ChoiceField(...) 
```

但是我怎样才能为 InlineModelAdmin (TabularInline) 做同样的事情？我通过 get_formset() 和 get_fieldsets() 进行了一些操作，但找不到合适的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:22:31.647

有一种`get_formsets`方法可以`get_form`用于内联。这是来自的默认版本[`django.contrib.admin.options.ModelAdmin`](https://github.com/django/django/blob/1.3.1/django/contrib/admin/options.py)：

```
def get_formsets(self, request, obj=None):
    for inline in self.inline_instances:
        yield inline.get_formset(request, obj) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-30T12:14:19.337

你可以给 InlineModelAdmin 一个表单类：

[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#inlinemodeladmin-options](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#inlinemodeladmin-options)

或者对于动态的东西，你可以覆盖 get_form 方法：

[https://github.com/django/django/blob/master/django/contrib/admin/options.py#L431](https://github.com/django/django/blob/master/django/contrib/admin/options.py#L431)

# c++ - gmp库中的移位操作

> ID：11721082
> 
> 赞同：2
> 
> 时间：2012-07-30T11:58:03.537
> 
> 标签：c++

我必须执行左移和右移，并且我正在使用 gmp 库。

我用了代码

```
#include<gmp.h>

mpz_t t;
mpz_init2(t,125);
mpz_set_ui(t,31);
mpz_mul_2exp(t , t , 35); 
```

它给我的 t 值为零。谁能帮帮我吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:37:47.670

~~尝试使用 mpz_init 而不是 mpz_init2。~~

实际上，它应该适用于您的方法，因为该操作不超过您为 t 分配的 125 位。我现在刚刚测试过。你如何检查结果？你用过`gmp_printf ("%Zd\n", t);`吗？

要将 GMP 整数的字符串表示形式转换为`std::string`，您可以执行以下操作：

```
//get a pointer to GMP's internal memory deallocator function
void (*deallocator)(void *, size_t);
mp_get_memory_functions(NULL, NULL, &deallocator);

//get the string representation of input in binary
char *data = mpz_get_str(NULL, 2, input.data);

std::string output(data);

//deallocate data, including the terminator character
//calling std::free on the char * returned by mpz_get_str is a bad idea, because it is initialised internally by GMP
(*deallocator)((void *)data, std::char_traits<char>::length(data) + 1); 
```

2018 年更新：上述代码的先前版本完全错误。当前版本应该是正确的。

# google-chrome - new XMLHttpRequest() 在 chrome 中不起作用？

> ID：11721083
> 
> 赞同：0
> 
> 时间：2012-07-30T11:58:22.697
> 
> 标签：google-chrome, xmlhttprequest

我知道这听起来很傻......它应该在那里工作......但是：

```
function fetch(id){
    var fetch = new XMLHttpRequest();
    fetch.open("GET", "/upload/status?X-Progress-ID=" + id);
    fetch.onreadystatechange = function () {
      console.log(fetch.readyState);
    }
    fetch.send(null);
} 
```

这段代码在 IE 和 firefox 中工作......我返回了所有 4 个状态......但是当我在 chrome 中尝试它时，我什么也没得到......而且我完全不知道为什么......

**我想你已经猜到了这个问题，为什么它不起作用？**

**编辑**：

稍微更改了代码...正如您可能已经猜到的那样，我使用 nginx 上传进度模块，并且此函数每秒调用一次以获取上传文件的进度...

**编辑 1**

好吧，我试图重写 $.ajax() 的东西，我基本上得到了相同的结果.. 即 firefox 可以工作，而 chrome 什么也没给我。这是页面的完整代码：

```
<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
  <script src="static/js/jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>
  <script>
    function add() {
      if (parseInt(document.getElementById('count').getAttribute('value')) < 8) {
        var input = document.createElement('input');
        input.setAttribute('type','file');
        input.setAttribute('multiple','');
        input.setAttribute('name','file[]');
        document.getElementById('multiple').appendChild(input);
        document.getElementById('multiple').appendChild(document.createElement('br'));
        document.getElementById('count').setAttribute('value',parseInt(document.getElementById('count').getAttribute('value'))+1);
      }
      else {
        alert('Можно загрузить не более 8 файлов за раз.');
      }
    }
    function progress() {
      var ms = new Date().getTime() / 1000;
      rq = 0;
      id = "";
      for (i = 0; i < 32; i++) {
        id += Math.floor(Math.random() * 16).toString(16);
      }
      document.getElementById('upload').action = "/upload/share?X-Progress-ID=" + id;
//      console.log("/upload/share?X-Progress-ID=" + id);
      document.getElementById('status').style.display = 'block'
      interval = window.setInterval(function () { fetch(id, ms); }, 1000);
      return true;
    }
    function fetch(id, ms) {
//      console.log("/upload/status?X-Progress-ID=" + id);

      $.ajax({
        type: "GET",
        url: "/upload/status?X-Progress-ID="+id,
        dataType: 'text',
        complete: function(upload) {
          console.log('test');
          alert('test');
        }
      });

//      var fetch = new XMLHttpRequest();
//      fetch.open("GET", "/upload/status", 1);
//      fetch.setRequestHeader("X-Progress-ID", id);
//      fetch.open("GET", "/upload/status?X-Progress-ID=" + id);
//      fetch.setRequestHeader("X-Progress-ID", id);

//      fetch.onreadystatechange = function () {
//        console.log('rorororo');
//        console.log(fetch.readyState);
//        if (fetch.readyState == 3) {
//          console.log(fetch.responseText);
//
////          if (fetch.status == 200) {
//
//            var now = new Date().getTime() / 1000;
//            var upload = eval(fetch.responseText);
//
//            if (upload.state == 'uploading') {
//              var diff = upload.size - upload.received;
//              var rate = upload.received / upload.size;
//              var elapsed = now - ms;
//              var speed = upload.received - rq; rq = upload.received;
//              var remaining = (upload.size - upload.received) / speed;
//              var uReceived = parseInt(upload.received) + ' bytes';
//              var uDiff = parseInt(diff) + ' bytes';
//              var tTotal = parseInt(elapsed + remaining) + ' secs';
//              var tElapsed = parseInt(elapsed) + ' secs';
//              var tRemaining = parseInt(remaining) + ' secs';
//              var percent = Math.round(100*rate) + '%';
//              var uSpeed = speed + ' bytes/sec';
//              document.getElementById('length').firstChild.nodeValue = parseInt(upload.size) + ' bytes';
//              document.getElementById('sent').firstChild.nodeValue = uReceived;
//              document.getElementById('offset').firstChild.nodeValue = uDiff;
//              document.getElementById('total').firstChild.nodeValue = tTotal;
//              document.getElementById('elapsed').firstChild.nodeValue = tElapsed;
//              document.getElementById('remaining').firstChild.nodeValue = tRemaining;
//              document.getElementById('speed').firstChild.nodeValue = uSpeed;
//              document.getElementById('bar').firstChild.nodeValue = percent;
//              document.getElementById('bar').style.width = percent
//            }
//            else {
//              window.clearTimeout(interval);
//            }
////          }
//        }

//      }
//      fetch.send(null);
    }
  </script>
</head>
<body>
<form method="post" enctype="multipart/form-data" id="upload" onsubmit="progress();">
  <input type="hidden" id="count" value="1" />
  <input type="hidden" value="GOBLEBOELBOE" name="secret">
  <div id="multiple">
    <input type="file" name="file[]" multiple /><br>
  </div>
  <input type="submit">
  <a href="#" onclick="add();">add();</a>
</form>
<div id="status" style="display: none;">
  <table width="100%">
    <tr><th></th><th>загрузка</th><th>осталось</th><th>всего</th></tr>
    <tr><td>время:</td><td id="elapsed">∞&lt;/td><td id="remaining">∞&lt;/td><td id="total">∞&lt;/td></tr>
    <tr><td>размер:</td><td id="sent">0 b</td><td id="offset">0 b</td><td id="length">0 b</td></tr>
    <tr><td>скорость:</td><td id="speed">n/a</td></tr>
  </table>
  <div style="border: 1px solid #c0c0c0;">
    <div style="background: #c0c0c0; width: 0%; text-align: right;" id="bar">0%</div>
  </div>
  <a href="#" onclick="if (confirm('Вы точно хотите отменить загрузку?')) window.location = '/'" id="cancel">cancel_upload();</a>
</div>
</body>
</html> 
```

**答案：** [http ://code.google.com/p/chromium/issues/detail?id=45196](http://code.google.com/p/chromium/issues/detail?id=45196)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:03:09.913

你应该添加这个

```
fetch.send(null) 
```

> 打开（）
> 
> 初始化一个请求。此方法将在 JavaScript 代码中使用；要从本机代码初始化请求，请改用 openRequest()。
> 
> 发送（）
> 
> 发送请求。如果请求是异步的（这是默认设置），则此方法会在请求发送后立即返回。如果请求是同步的，则此方法在响应到达之前不会返回。

引用自[MDN](https://developer.mozilla.org/en/xmlhttprequest)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:43:28.557

显然，chrome 有这么多的错误。 [http://code.google.com/p/chromium/issues/detail?id=45196](http://code.google.com/p/chromium/issues/detail?id=45196)

# jqgrid - jqGrid filterToolbar和本地搜索不起作用

> ID：11721084
> 
> 赞同：0
> 
> 时间：2012-07-30T11:58:25.120
> 
> 标签：jqgrid

我在过滤本地数据时遇到问题。如果我删除 loadonce 参数并从服务器获取结果一切正常。当我想过滤本地数据时出现问题。这是我的网格实现：

```
orderPosGrid.jqGrid({
        colNames: ['', '', '', '', '', '', '', 'ID', 'Nazwa/Rodzaj', 'Ilość', 'Jedn.', 'Przyczyna zwrotu', 'Napis', '', ''],
        colModel: [
            {name: 'myac', index:'myac', width:0, hidden:true},
            {name: 'commited', index: 'commited', width: 0, editable: false, hidden: true},
            {name: 'hasIlosc', index: 'hasIlosc', width: 0, editable: false, hidden: true},
            {name: 'hasOpis', index: 'hasOpis', width: 0, editable: false, hidden: true},
            {name: 'opisCount', index: 'opisCount', width: 0, editable: false, hidden: true},
            {name: 'id', index: 'id', width: 0, sorttype: 'int', editable: false, hidden: true},
            {name: 'qType', index: 'qType', width: 0, sorttype: 'int', editable: false, hidden: true},
            {name: 'id_prod', index: 'id', width: 30, sorttype: 'int', editable: false},
            {name: 'nazwa', index: 'name', width: 250, editable: false},
            {name: 'ilosc', index: 'quantity', width: 35, align: 'right', sortable: false, search:false, edittype:'text', editable: true, editrules:{custom:true, custom_func:iloscValidate, minValue:1}}, 
            {name: 'jedn', index: 'jedn', width: 35, sortable: false, search:false, align: 'right', editable: false},
            {name: 'opisZwrot', index: 'opisZwrot', width: 170, sortable: false, editable: true, search:false, edittype:'select', formatter: 'select', editoptions:{value:'{{ przyczZwrot }}'}},
            {name: 'opis', index: 'description', width: 170, sortable: false, search:false, editable: true},
           {name: 'group', index: 'group', editable: false, hidden: true},
           {name: 'info', index: 'info', sortable: false, search:false, width: 22}
        ],
        status: 0,
        url: '/ProdList/'+type_id+'/'+order_id+'/',
        datatype: 'json',
        mtype: 'GET',
        ignoreCase:true,
        height: 'auto',
        rowNum: 10000,
        loadonce:true,
        gridview: true,
        viewrecords: true,
        sortname: '',
        sortorder: '',
        pager: '#ProdList_gridPager',
        caption: 'Lista dostępnych produktów',
        subGrid: false,
        editurl: 'clientArray',
        grouping: true,
        groupingView: {
            groupField: ['group'],
            groupOrder: ['asc'],
            groupColumnShow: [false],
            groupText: ['<b>{0}  [{1}]</b>'],
            groupCollapse: false
        },
...
}); 
```

我只需要过滤两个字段：id 和 nazwa，其他字段被禁用。我来自服务器的 json 数据如下所示：

```
{"total":1, "page":"1", "records":"266", "rows":[{"id": "2473_1", "cell":["","1","0","0","","116","1","2473","Adwokat","3","kg.","","","d - Ciasta kremowo-śmietanowe"]},{"id": "2473_2", "cell":["","1","0","0","","116","1","2473","Adwokat","2","kg.","","","d - Ciasta kremowo-śmietanowe"]},{"id": "2473_3", "cell":["","1","1","1","70","116","1","2473","Adwokat","","kg.","","","d - Ciasta kremowo-śmietanowe"]}]} 
```

我想我使用典型的数据配置，不需要 jsonReader 配置。我错了吗？如果您在我的代码中发现一些错误，请提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:57:51.140

从奥列格检查这个答案。[jqGrid客户端搜索](https://stackoverflow.com/questions/4492963/jqgrid-client-side-searching)

如果您正在搜索某些东西，那么您需要实现它，那么您的实现代码在哪里？检查上面的链接，他在那里保存搜索条件。

# php - 用 php 和 nodejs 共享 memcache

> ID：11721089
> 
> 赞同：1
> 
> 时间：2012-07-30T11:58:44.313
> 
> 标签：php, javascript, node.js, memcached

是否可以与 memcache 共享 javascript 对象/php 关联数组？

或者我应该在共享数据时将数据转换为字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:00:48.260

使用 JSON 数据 fromat 在这些语言（PHP 和 JavaScript）之间共享数据。

```
//read from memcache in JS (node.js)
var data = JSON.parse(from_memcache);
//or before write
data = JSON.stringify(data);

//read from memcache in php
$data = json_decode($data_from_memcache);
//or before write
$data = json_encode($data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:02:45.727

这是可能的，最好的方法是将您的对象编码为 JSON 格式。Memcache 只不过是一个 key => value 存储，这意味着您存储在其中的所有内容都是一个字符串（字节）。

# eclipse - Eclipse Juno 复制实现类中的所有接口注释

> ID：11721092
> 
> 赞同：3
> 
> 时间：2012-07-30T11:58:57.690
> 
> 标签：eclipse, eclipse-juno

我在 SmartGwt 项目中使用 Jersey，最近将其导入 Eclipse Juno 4.2。在 Indigo 中，我可以在资源接口中声明注释，而实现类将只包含一个 @Override 注释。当我在 Juno 中创建实现类时，**所有**注释都包含在内。（即@GET、@Path、@Produces 等）我绝不是 Eclipse 专业人士，我想知道我是否错过了 Windows->preferences 设置？这是一个错误吗？还是这是“新常态”？

# php - 数组中的变量，这可能吗？语法错误可能

> ID：11721093
> 
> 赞同：0
> 
> 时间：2012-07-30T11:59:07.200
> 
> 标签：php, arrays, variables, syntax

首先，我通过代码声明一个我想在多个数组中使用的变量。这是它应该工作的一个片段，但它没有：

变量：

```
$test = '<div id="test"> dit is een test </div>'; 
```

数组：

```
$sections[] = array( 
                'title' => $test, 
                'icon' => '/img/icons/home.png' 
                ); 
```

标题始终为空：-/

谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:12:56.197

**正确的声明是**

```
$test = '<div id="test"> dit is een test </div>'; 
$sections = array( 
                'title' => $test, 
                'icon' => '/img/icons/home.png' 
                ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:06:47.480

试试这个代码：

```
$test = '<div id="test"> dit is een test </div>';

$sections['title'] = $test;
$sections['icon'] = '/img/icons/home.png';

echo $sections['title']; 
```

# java - Antlr 语法：永远无法匹配替代方案

> ID：11721101
> 
> 赞同：0
> 
> 时间：2012-07-30T11:59:46.127
> 
> 标签：java, antlr

我正在研究 Antlr 语法来解析多个变量中的多项式表达式。因此，我创建了以下语法：

```
grammar Function;

parseFunction returns [java.util.List<java.util.List<Object>>]  :   { list = new java.util.ArrayList(); } (p=polypart { list.add($p.list); })+
;

polypart returns [java.util.List<Object> list]: 
  m=NUMBER { list = new java.util.ArrayList(); list.add("+"); list.add($m.text); list.add("0"); }
| s=SIGN m=NUMBER {list = new java.util.ArrayList(); list.add($s.text); list.add($m.text); }
| v=VARIABLE {list = new java.util.ArrayList(); list.add("+"); list.add($v.text); }
| s=SIGN v=VARIABLE {list = new java.util.ArrayList(); list.add($s.text); list.add($v.text); }
| v=VARIABLE e=exponent { list = new java.util.ArrayList(); list.add("+"); list.add($v.text); list.add($e.value); } 
| s=SIGN v=VARIABLE e=exponent { list = new java.util.ArrayList(); list.add($s.text); list.add($v.text); list.add($e.value); }
| m=NUMBER v=VARIABLE { list = new java.util.ArrayList(); list.add("+"); list.add($m.text); $list.add($v.text); }
| s=SIGN m=NUMBER v=VARIABLE { list = new java.util.ArrayList(); list.add($s.text); list.add($m.text); $list.add($v.text); }
| m=NUMBER v=VARIABLE e=exponent { list = new java.util.ArrayList(); list.add("+"); list.add($m.text); list.add($v.text); list.add($e.value); }
| s=SIGN m=NUMBER v=VARIABLE e=exponent { list = new java.util.ArrayList(); list.add($s.text); list.add($m.text); list.add($e.value); }
;

exponent returns [int value]: ('^' n=NUMBER) { $value = 1; if ( $n != null && $n.text.length() > 0) $value = Integer.parseInt($n.text); }
;

VARIABLE    : ('a'..'z'|'A'..'Z')+
;

NUMBER  : ('0'..'9')+
;

SIGN    :   ('+'|'-')
;

WS  :   (' '|'\t')+ {skip();} ; 
```

显然，这不起作用。用 Antlr 3.4 编译它，我收到警告

> “SIGN NUMBER VARIABLE”使用备选方案 2,8；"SIGN NUMBER VARIABLE '^' NUMBER" 使用备选方案 2,10；“NUMBER VARIABLE”使用备选方案 1,7，“NUMBER VARIABLE '^' NUMBER”使用备选方案 1,9。

我可以忍受这些警告（尽管我对它们为什么弹出非常感兴趣），但困难的是我得到以下错误：

```
error(201): Function.g:6:47: The following alternatives can never be matched: 7,8,9,10 
```

发生这种情况是因为它们由于警告而被禁用，所以我想我必须先解决警告。

* * *

编辑：

在考虑了很多问题之后，我通过切换一些代码行来修改我的代码，现在我至少不再出现任何错误了。但是，我还没有测试它，我也很想摆脱最后两个警告。新代码是：

```
grammar Function;

parseFunction returns [java.util.List<java.util.List<Object>>]  :   { list = new java.util.ArrayList(); } (p=polypart { list.add($p.list); })+
;

polypart returns [java.util.List<Object> list]: 
s=SIGN m=NUMBER v=VARIABLE e=exponent { list = new java.util.ArrayList(); list.add($s.text); list.add($m.text); list.add($e.value); }
| m=NUMBER v=VARIABLE e=exponent { list = new java.util.ArrayList(); list.add("+"); list.add($m.text); list.add($v.text); list.add($e.value); }
| s=SIGN m=NUMBER v=VARIABLE { list = new java.util.ArrayList(); list.add($s.text); list.add($m.text); $list.add($v.text); }
| m=NUMBER v=VARIABLE { list = new java.util.ArrayList(); list.add("+"); list.add($m.text); $list.add($v.text); }
| s=SIGN v=VARIABLE e=exponent { list = new java.util.ArrayList(); list.add($s.text); list.add($v.text); list.add($e.value); }
| v=VARIABLE e=exponent { list = new java.util.ArrayList(); list.add("+"); list.add($v.text); list.add($e.value); } 
| s=SIGN v=VARIABLE {list = new java.util.ArrayList(); list.add($s.text); list.add(1); list.add($v.text); }
| v=VARIABLE {list = new java.util.ArrayList(); list.add("+"); list.add(1); list.add($v.text); }
| s=SIGN m=NUMBER {list = new java.util.ArrayList(); list.add($s.text); list.add($m.text); }
| m=NUMBER { list = new java.util.ArrayList(); list.add("+"); list.add($m.text); }
;

exponent returns [int value]: ('^' n=INTEGER) { $value = 1; if ( $n != null && $n.text.length() > 0) $value = Integer.parseInt($n.text); }
;

VARIABLE    : ('a'..'z'|'A'..'Z')+
;

INTEGER : ('0'..'9')+
;

NUMBER  : ('0'..'9')+(','('0'..'9')+)?
;

SIGN    :   ('+'|'-')
;

WS  :    (' ' | '\t' | '\r'| '\n')+ {skip();} 
; 
```

现在我收到以下警告：

```
"NUMBER VARIABLE" uses mutiple alternatives: 4,10 (10 is disabled).
"SIGN NUMBER VARIABLE" uses multiple alternatives: 3,9 (9 is disabled). 
```

如果有人能向我解释如何摆脱这最后两个警告，我将不胜感激。

* * *

在测试解析器后，我可以说它确实接受：

```
X; +X; -X; X^42; +X^42; -X^42 
```

它不接受：

```
42; +42; -42; 42X^42; +42X^42; -42X^42 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:00:09.620

如果一个 NUMBER 和一个 VARIABLE 都被接受而没有前导符号，并且也接受了 NUMBER VARIABLE 形式的输入，则可能有两种解释：NUMBER VARIABLE -> polypart polypart -> NUMBER polypart -> NUMBER VARIABLE 或 NUMBER VARIABLE -> polypart -> NUMBER VARIABLE 因此，必须找出带有前导 SIGN 的案例，然后才能正常工作！

以下代码编译时不会出现警告或错误：

```
grammar Function;

parseFunction returns [java.util.List<java.util.List<Object>> list] :   
    { list = new java.util.ArrayList(); }                                              ( f=functionPart { list.add($f.list); } )+
|   { list = new java.util.ArrayList(); } ( fb=functionBegin ) { list.add($fb.list); } ( f=functionPart { list.add($f.list); } )*
;

functionBegin returns [java.util.List<Object> list]:
m=NUMBER v=VARIABLE e=exponent  { list = new java.util.ArrayList(); list.add("+"); list.add($m.text); list.add($v.text); list.add($e.value); }
| m=NUMBER v=VARIABLE           { list = new java.util.ArrayList(); list.add("+"); list.add($m.text); list.add($v.text); }
| v=VARIABLE e=exponent         { list = new java.util.ArrayList(); list.add("+"); list.add("1");     list.add($v.text); list.add($e.value); }  
| v=VARIABLE                    { list = new java.util.ArrayList(); list.add("+"); list.add("1");     list.add($v.text); }
| m=NUMBER                      { list = new java.util.ArrayList(); list.add("+"); list.add($m.text); }
;

functionPart returns [java.util.List<Object> list] :    
s=SIGN m=NUMBER v=VARIABLE e=exponent   { list = new java.util.ArrayList(); list.add($s.text); list.add($m.text); list.add($v.text); list.add($e.value); }
| s=SIGN m=NUMBER v=VARIABLE            { list = new java.util.ArrayList(); list.add($s.text); list.add($m.text); list.add($v.text); }
| s=SIGN v=VARIABLE e=exponent          { list = new java.util.ArrayList(); list.add($s.text); list.add("1");     list.add($v.text); list.add($e.value); }
| s=SIGN v=VARIABLE                     { list = new java.util.ArrayList(); list.add($s.text); list.add("1");     list.add($v.text); }
| s=SIGN m=NUMBER                       { list = new java.util.ArrayList(); list.add($s.text); list.add($m.text); }
;

exponent returns [int value]: ('^' n=INTEGER) { $value = 1; if ( $n != null && $n.text.length() > 0) $value = Integer.parseInt($n.text); }
;

VARIABLE    : ('a'..'z'|'A'..'Z')+
;

INTEGER : ('0'..'9')+
;

NUMBER  : ('0'..'9')+ (','('0'..'9')+)?
;

SIGN    :   ('+'|'-')
;

WS  :    (' ' | '\t' | '\r'| '\n')+ {skip();} 
; 
```

如果在 Java 中编译和使用此语法，它确实接受大多数输入值。显然，并非所有有效的输入值都被接受。一旦弹出不使用逗号的数字，例如 +42，就会引发错误：

```
line 1:1 no viable alternative at input '+' 
```

但是，这与原始问题不符，将在[此处](https://stackoverflow.com/questions/11736681/generated-antlr-parser-in-java-not-all-inputs-are-read)进行澄清。

# sql - 合并或连接两个带有记录的表

> ID：11721104
> 
> 赞同：0
> 
> 时间：2012-07-30T11:59:53.473
> 
> 标签：sql, oracle

问题是，我们有两个表 t1 和 t2。t1 有 3 列， t2 分别有 2 列。假设 t1 有 5 条记录，t2 有 3 条记录。我想合并或加入这两个表，以便 t2 的记录在最后一条记录之后出现在表 t1 中。我们可以制作像 T1(c1, c2, c3) 和 T2(c2,c3) 这样的列，其中 c2 和 c3 在两个表中是相同的数据类型，而 c1 作为主键或唯一键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:16:39.363

您可以使用 UNIQUE ALL 语句（没有“all”的普通联合仅返回不同的值）。

```
select c1, c2, c3 from t1
union all 
select null as c1, c2, c3 from t2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:04:49.770

这将返回两个表中的所有行，其中 T1 的行出现在 T2 的行之前。

```
select c1, c2, c3 from t1 
union all  
select null as c1, c2, c3 from t2 
order by nvl2(c1, 0, 1) asc 
```

当 C1 的值不为空时，NVL2() 命令将返回 0；这对于 T1 中的所有行（它是主键）都是正确的，对于 T2 中的所有行都是错误的。表的顺序是任意的，但可以通过在 ORDER BY 子句中添加额外的列来固定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:07:41.090

如果正确理解您的帖子，您希望将 table 中可以找到的记录附加`t2`到 table `t1`。

```
insert into t1 (c1, c2, c3) (select sequence_for_t1.nextval, c2, c3 from t2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T12:10:05.340

您可以使用

```
UNION 
```

用于合并多个表的记录

# jquery - 具有多个 div 的 jQuery tablesorter 排序列

> ID：11721113
> 
> 赞同：1
> 
> 时间：2012-07-30T12:00:39.447
> 
> 标签：jquery, tablesorter

我正在使用tablesorter，并且试图弄清楚如何对具有多个div 的列进行排序。具体来说，我需要按“prog-perc”div 中的百分比对列进行排序。

我一直在努力理解自定义解析器/文本提取，所以如果可能的话，我正在寻找一个解释这个过程的答案。

HTML

```
<td class="transaction-table-hide">
  <span class="status">&{enums.Select.ISCTDealStatus.values()[transaction?.status].name}</span>
   <div class="prog-container">
     <a href="#" class="form-info" rel="tooltip" title="">
     <div class="progress rounded clearfix">
       <div class="prog-quart fl">&nbsp;</div>
         <div class="prog-half fl">&nbsp;</div>
         <div class="prog-three-quart fl">&nbsp;</div>
          <div class="prog-perc">10%</div>
      </div>
      </a>
    </div>
 </td> 

$.tablesorter.addParser({ 
        id: 'currencyExtract', 
        is: function(s) { 
            return false; 
        }, 
        format: function(s) { 
            return s
            .replace(/ AUD/,0)
            .replace(/ BHD/,0)
            .replace(/ BBD/,0)
            .replace(/ CAD/,0)
            .replace(/ CNY/,0)
            .replace(/ HRK/,0)
            .replace(/ CZK/,0)
            .replace(/ DKK/,0)
            .replace(/ XCD/,0)
            .replace(/ EGP/,0)
            .replace(/ MTL/,0)
            .replace(/ EUR/,0)
            .replace(/ HKD/,0)
            .replace(/ HUF/,0)
            .replace(/ INR/,0)
            .replace(/ ILS/,0)
            .replace(/ JMD/,0)
            .replace(/ JPY/,0)
            .replace(/ JOD/,0)
            .replace(/ KES/,0)
            .replace(/ LVL/,0)
            .replace(/ LTL/,0)
            .replace(/ MUR/,0)
            .replace(/ MXN/,0)
            .replace(/ MAD/,0)
            .replace(/ NZD/,0)
            .replace(/ NOK/,0)
            .replace(/ OMR/,0)
            .replace(/ PLN/,0)
            .replace(/ GBP/,0)
            .replace(/ QAR/,0)
            .replace(/ RON/,0)
            .replace(/ RUB/,0)
            .replace(/ SAR/,0)
            .replace(/ SGD/,0)
            .replace(/ ZAR/,0)
            .replace(/ SEK/,0)
            .replace(/ CHF/,0)
            .replace(/ THB/,0)
            .replace(/ THD/,0)
            .replace(/ TRY/,0)
            .replace(/ AED/,0)
            .replace(/ USD/,0)
            ;
        },
        type: 'numeric' 
    }); 

   $("#sorTable").tablesorter({
        headers:{
            1:{
                sorter: 'shortDate'
            },
            3:{
                sorter: 'currencyExtract'
            },
            4:{
                sorter: 'currencyExtract'
        },
            5:{
                sorter: false
            }
        },
        textExtraction: function(node){
            return node.childNodes[0].nodeValue;
        },
        /*textExtraction: function(node) { 
            var $n = $(node), $p = $n.find('.prog-perc');
            return $p.length ? $p.text() : $n.text(); 
        },*/
        widgets: ['zebra'],
        dateFormat: "uk"
   }).tablesorterPager({container: $("#pager")}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T01:13:04.070

使用该`textExtraction`选项来定位该 div ( [demo](http://jsfiddle.net/Mottie/eY8uH/84/) )

```
$('table').tablesorter({
        // define a custom text extraction function 
        textExtraction: function(node) { 
            var $n = $(node), $p = $n.find('.prog-perc');
            // extract data from markup and return it
            return $p.length ? $p.text() : $n.text(); 
        } 
}); 
```

不要担心`%`符号，因为百分比解析器应该检测到它。

# phantomjs - 我们网站的功能测试

> ID：11721116
> 
> 赞同：2
> 
> 时间：2012-07-30T12:00:43.060
> 
> 标签：phantomjs, zombie.js, sahi, mink, goutte

我正在与[Mink](http://mink.behat.org/) / [Sahi](http://sahi.co.in/)合作为我的网站编写功能测试套件。

我使用 Firefox 和 Chrome 进行了一组测试，对此我很满意。他们每晚都在我们的 Jenkins 盒子上运行，并且运行良好。

然而，因为我们的 Jenkins 盒子是一个服务器，而 Chrome/Firefox 是 GUI 应用程序，所以我不得不让测试在我的台式机上运行。这很痛苦，因为这意味着我必须每晚都打开它，这不利于环境和成本。另外，如果它在电源、网络或软件方面有任何问题，那么测试就会失败。

所以我想要一些关于切换测试以在 Jenkins 盒子本身上使用无头浏览器的建议。

看来我有三个选择：Goutte、Zombie 和 Phantom（当然，除非有人可以推荐另一个）。以下总结了我到目前为止的进展：

*   *Goutte*：这是 PHP 驱动的，因此可以在 Mink 内部运行，无需 Sahi。这听起来很棒，因为 Jenkins 盒子的资源有限，所以我需要安装和运行的越少越好。但是，我需要运行 JS 代码作为测试的一部分，我知道 Goutte 无法做到这一点。这能排除吗？

*   *Zombie*：在 Node.js 下运行。不幸的是，我根本无法完成这项工作。我已经安装了 Node、NPM 和 Zombie，但我无法让 Mink 识别它。谁能给我一些比 Mink 网站更清晰的说明，告诉我如何运行它？

*   *Phantom*：不幸的是，Mink 没有 Phantom 的驱动程序，所以我必须通过 Sahi 运行它。正如我所说，我宁愿不必在 Jenkins 服务器上安装 Sahi，尤其是因为它还需要作为服务器连续运行。但这是迄今为止我唯一成功的。在 Sahi 下运行它，我可以让我的测试成功运行（虽然不是一致的，这是一个令人担心的问题 - 它似乎随机超时，大约三分之一）。任何人都可以建议一种无需安装 Sahi（或任何其他中间层服务器）即可运行它的方法吗？或者如果我确实需要 Sahi，谁能告诉我如何配置 Jenkins 以在测试套件开始时启动 Sahi 并在结束时停止它？

我真的很感激任何关于如何进行的建议。出于某种原因，这些选择似乎都没有明显的胜利。但是功能测试很重要，所以这一定是一个已解决的问题。对我来说最好的解决方案是什么？

（我知道还有用 Javascript 重写我的脚本以直接与 Zombie 或 Phantom 对话的选项。我不想这样做，因为当它们失败时，我仍然需要看到它们在 Firefox 中运行以查看发生了什么错了，所以像 Mink 这样的跨浏览器界面是理想的——更不用说我已经用 PHP 编写了所有测试！）

感谢您的任何建议。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:15:04.053

这个答案专门针对

> 谁能告诉我如何配置 Jenkins 在测试套件开始时启动 Sahi 并在最后停止它？

使用 ant，您可以使用以下目标启动 Sahi

```
<target name="sahitests" description="start the server and run sahi tests">
    <parallel>
        <antcall target="start"/>
        <sequential>
            <waitfor maxwait="3" maxwaitunit="minute" checkevery="100">
                <http url="http://${urlbase}/demo/index.htm"/>
            </waitfor>
            <antcall target="runietests"/>
            <antcall target="stopsahi"/>
        </sequential>
    </parallel>
</target>

<target name="start" description="starts proxy">
    <java classname="net.sf.sahi.Proxy" fork="true">
        <classpath location="lib/sahi.jar">
            <pathelement location="extlib/rhino/js.jar"/>
            <pathelement location="extlib/apc/commons-codec-1.3.jar"/>
            <pathelement location="extlib/license/truelicense.jar"/>
            <pathelement location="extlib/license/truexml.jar"/>
            <pathelement location="extlib/db/h2.jar" />
            <pathelement location="extlib/poi/dom4j-1.6.1.jar"/>
            <pathelement location="extlib/poi/excelpoi.jar"/>
            <pathelement location="extlib/poi/poi-3.7-20101029.jar"/>
            <pathelement location="extlib/poi/poi-ooxml-3.7-20101029.jar"/>
            <pathelement location="extlib/poi/poi-ooxml-schemas-3.7-20101029.jar"/>
            <pathelement location="extlib/poi/xmlbeans-2.3.0.jar"/> 
            <fileset dir="extlib" includes="*.jar"/>
        </classpath>
        <arg value="." id="basePath"/>
        <arg value="userdata" id="userdataPath"/>
    </java>
</target>

<target name="runietests">
    <antcall target="clean-tests">
    </antcall>
    <sahi suite="../userdata/scripts/demo/demo.suite"
          browserType="ie"
          baseurl="http://${urlbase}/demo/"
          sahihost="localhost"
          sahiport="9999"
          failureproperty="sahi.failed"
          haltonfailure="false"
          threads="6"
            >
        <report type="html"/>
        <report type="junit" logdir="${userdata.dir}/temp/junit/tests"/>
    </sahi>
    <antcall target="report-gen" />
    <antcall target="failsahi"/>
</target>

<target name="report-gen">
    <delete dir="${userdata.dir}/temp/junit/reports">
    </delete>
    <mkdir dir="${userdata.dir}/temp/junit/reports"/>
    <junitreport todir="${userdata.dir}/temp/junit/reports">
        <fileset dir="${userdata.dir}/temp/junit/tests">
            <include name="TEST-*.xml" />
        </fileset>
        <report format="frames" todir="${userdata.dir}/temp/junit/reports/sahi-html" />
    </junitreport>
</target>

<target name="failsahi" if="sahi.failed">
    <antcall target="stopsahi"/>
    <fail message="Sahi tests failed!"/>
</target>

<target name="stopsahi" description="stop sahi server">
    <sahi stop="true" sahihost="localhost" sahiport="9999"/>
</target> 
```

重要的位是

1.  “sahitests”目标，它启动 Sahi 并并行运行测试。
2.  "start" 目标在没有仪表板的情况下启动 Sahi。

您可以在 Sahi 论坛上发布 Sahi+PhantomJS 中的随机故障问题以获得答案。

Sahi 作为代理服务器的开销/足迹相当小。

# c# - 选择的列表项不起作用

> ID：11721124
> 
> 赞同：1
> 
> 时间：2012-07-30T12:01:19.043
> 
> 标签：c#, asp.net, .net

我有以下代码：

```
foreach (ListItem item in lstCreate.Items)
{
    if (item.Selected)
        strCreateNewVideoCategory += item.Value + ":0,";
    else
        strCreateNewVideoCategory += item.Value + ":1,";
} 
```

我正在使用这个程序，item.Selected 每次都是假的，即使我从项目列表中选择一个项目。我做错了什么？

注意：ListItem 使用用户控件（ascx）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T12:03:37.310

1.  您必须尝试使用​​此代码进行绑定

    ```
    if (!IsPostback)
    { 
        BindYourControl();
    } 
    ```

    因为您每次发布时都加载并绑定控件，所以您删除了选定的值

2.  使用 ViewState 来保持。

    ```
    EnableViewState = true; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:06:49.710

代码对我来说看起来不错。您应该尝试设置断点以真正查看哪里出错了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:07:38.180

检查您的自动回发事件以进行页面加载和所选项目的使用

```
 listitem_selectedindexchanged()
{
} 
```

它会给你所选项目的价值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T12:08:16.137

反正，

```
foreach (ListItem item in lstCreate.Items)
{
    str += item.Value + item.Selected ? ":0," : ":1,";
} 
```

或更好

```
str = String.Join(
    ",",
    lstCreate.Items.Cast<ListItem>.Select(item => item.Value + item.Selected ? ":0" : ":1"); 
```

# node.js - 从远程服务器运行 mongodb

> ID：11721126
> 
> 赞同：-1
> 
> 时间：2012-07-30T12:01:32.490
> 
> 标签：node.js, mongodb

我是 mongodb 的新手，想了解如何连接到远程服务器。我在远程服务器上运行 mongodb。我想从另一台服务器访问 mongo 数据库并执行所有操作。我怎样才能做到这一点。我正在将 node.js 与 mongodb 一起使用。请帮助我如何建立连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:06:23.907

您可以将以下库用于节点：
[https ://github.com/christkv/node-mongodb-native](https://github.com/christkv/node-mongodb-native)

如果你想要一个工具来访问数据库，你可以使用：
MongoHub (for Mac) & MongoVUE (for Windows)

祝你好运！

# lisp - 在代码中使用 package-name:symbol 或在 DEFPACKAGE 中使用 :package-name 是更好的做法吗？

> ID：11721139
> 
> 赞同：6
> 
> 时间：2012-07-30T12:02:28.230
> 
> 标签：lisp, common-lisp

我怀疑这是风格和/或个人品味的问题，但我想我还是会问。

我一直有这样定义包的习惯：

```
(defpackage :wibble
  (:use :cl :drakma)
  (:export :main)) 
```

一旦我执行了 IN-PACKAGE (:wibble, 在这种情况下)，我就可以使用 DRAKMA 中的符号了：

```
(http-request ... 
```

然后我最近读到，经验丰富的 Lisp 黑客宁愿不使用 :use 但是：

```
(drakma:http-request ... 
```

只是想知道这里的意见共识是什么以及是否有任何优点或缺点（不是那种类型的缺点:)）无论哪种方式？

干杯，

彼得

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-30T16:06:27.990

当你`use`使用一个包时，如果使用的包发生变化，有几种微妙的方式可能会出错。

首先，该包将来可能会导出更多符号。例如，如果包导出了一个新符号`library:rhombus`并且您已经使用它`myapp::rhombus`来命名某些东西，那么您突然使用继承的符号以及所有可能的附件（例如类、defuns、宏等），有时会产生奇怪的结果。如果您使用限定符号名称，您将不会得到比您想要的符号更多或更少的符号。

其次，该软件包将来可能会停止导出符号。因此，例如，如果`library:with-rhombus`消失，您的调用`(with-rhombus (42 42 42) ...)`将突然得到一个无效函数调用的错误，`(42 ...)`而不是直接指向问题根源的东西，即“缺失”符号。如果您使用合格的符号名称，您将得到一个`Symbol WITH-RHOMBUS is not exported from the LIBRARY package`更清晰的错误。

导入符号（使用`:import-from`or`:shadowing-import-from`或`import`）并非没有问题。导入适用于*任何*符号，无论它是否是外部的。因此，符号现在可能是`library::rhombus`，即不再用于公共消费，但导入仍然可以正常工作，没有错误。

您使用哪个选项取决于您对源程序包的舒适程度。您是否控制它，并且您不会在没有彻底测试的情况下做出任何冲突的更改？继续，随心所欲地导入或使用。否则，请小心检查库包接口更改时的意外副作用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-30T12:50:29.400

这更像是一个风格问题，因此不可能将其分类为黑白，但这里有优缺点：

1.  使用包限定符号。

    避免符号冲突。

    可以清楚地区分外来符号。

    允许轻松搜索、替换、复制、...使用外部库中的某个符号（用于重构、将代码提取到其他地方等）

    使代码更丑陋，但仅当库名称太长时。（比如我给 加了一个昵称`re`，`cl-pprce`现在使用它的代码比没有资格的代码还要好：think `re:scan`）

2.  导入整个包

    基本上与前一种情况相反。但我倾向于将它与实用程序库一起使用，因为使用限定名称通常会超出其使代码更简洁明了的全部目的:)

3.  `:import-from package symbol`

    这是您忘记提及的一个选项。我认为当您非常频繁地使用某个包中的一个或非常不同的符号时，它可能很有用。它还允许导入未导出的符号。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-30T19:33:01.500

到目前为止很好的答案。

另一种观点是一个包和它的符号组成了一种*语言*。*如果您认为符号应该是该语言的一部分，那么您应该在*使用该语言进行编程时使其可用，而无需使用另一个包对其进行限定。

例如，在 CLIM 实现中有一个 CLIM-LISP 包，它设置了实现语言。它是 COMMON-LISP 包的变体。然后是 CLIM-SYS（资源、进程、锁……）、CLIM-UTILS（Common Lisp 的各种实用程序和扩展）和 CLIM 本身之类的包。*现在在一个新的包 SILICA（一个抽象的窗口系统）中使用*了这四个包。因此，Silica 的实现是用一种语言实现的，该语言由两种语言（Common Lisp 变体 CLIM-LISP 和 CLIM 的 UI 命令）加上两个实用程序包组成，后者通过一些工具扩展了 CLIM-LISP。

*在上面的示例中，使用*包是有意义的，因为它们相互扩展以形成一种新的*语言*，并且该新包中的实现大量使用了这些。

如果您有一个需要冲突包的包，那么*使用*它们是没有意义的。例如，一个包可以使用为 GUI 和 Postscript 输出定制的绘图命令。他们会有相似的名字。*同时使用*它们会导致冲突。您还希望在源代码中为人类读者明确这些符号的来源。它是来自 postscript 还是 GTK+ 库的画线命令？如果您可以轻松找到它会很棒 - 即使函数名称相同。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-30T20:47:43.643

根据经验，我的`:use`包扩展了通用语言，但对有一些特殊应用的包使用了限定符号。例如，我总是使用`:use`alexandria，但完全限定为来自 Hunchentoot 的符号。如有疑问，我会使用限定名称。

# css - 为什么 Twitter Bootstrap 的前置图标和输入字段之间有空格？

> ID：11721141
> 
> 赞同：2
> 
> 时间：2012-07-30T12:02:36.763
> 
> 标签：css, twitter-bootstrap, markup

使用 Twitter 的 Bootstrap，我有一个带有输入字段和前置图标的表单：

```
<div class="input-prepend">
  <label for="some_name">What's your ...</label>
  <span class="add-on"><i class="icon-road"></i></span>
  <input type="text" class="span2" name="some[name]" id="some_name"/>
</div> 
```

这是结果：

![在此处输入图像描述](../Images/c23caaef558c478ec72aee0979356be0.png)

我还没有改变 Bootstrap 的 CSS。这些示例显示图标和输入字段之间没有这样的空间。我该如何摆脱它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T12:02:36.763

我自己发现了：不要在图标标记和之间断线`input`：

```
<div class="input-prepend">
  <label for="some_name">What's your ...</label>
  <span class="add-on"><i class="icon-road"></i></span><input type="text" class="span2" name="some[name]" id="some_name"/>
</div> 
```

正如 Twitter 自己[在图标文档中](http://twitter.github.com/bootstrap/base-css.html#icons)解释的那样：

> 在文本字符串旁边使用时，例如在按钮或导航链接中，请务必在标签后留一个空格以保持适当的间距。

那是我的线索。

# jquery - jQuery BlockUI：用户点击“enter”键后是否可以运行函数？

> ID：11721144
> 
> 赞同：1
> 
> 时间：2012-07-30T12:02:39.220
> 
> 标签：jquery, keyboard-shortcuts, modal-dialog, jquery-blockui

我正在尝试创建一个非常简单的模式对话框，它只显示一个文本区域。

目标：

*   如果用户点击“esc”键，它将消失（文本输入被忽略）
*   如果用户输入文本并按下“回车”键，则运行接受输入的函数（称为“postText(userinput)”）

我想知道是否可以使用 jQuery BlockUI：[http](http://malsup.com/jquery/block/#demos) ://malsup.com/jquery/block/#demos 。

但是，我不确定如何实际关闭基于 esc 的对话框，或者如果用户按 Enter 键则运行函数。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T12:11:10.663

关闭对话框`ESC`，只需添加一个`keyup`侦听器`document`并`$.unblockUI`在键码等于时调用`27`。

```
​​$(document).on('keyup', ​​​function(e) {
  if (e.which === 27) { // Escape key
    $.unblockUI();
  }
});​ 
```

对于表单，只需在对话框的输入字段中添加一个事件侦听器。基本上是一样的。

```
​​$('#the-input').on('keyup', ​​​function(e) {
  if (e.which === 13) { // Enter key
    // AJAX maybe?
    $.post('your/url', { data: $(this).val() }, function(response) {
      $.unblockUI();            
    });
  }
});​ 
```

**编辑**

在加载 DOM 后分配这些侦听器。因此，您加载的脚本文件将包含：

```
$(document).ready(function() {
    // Code from the two listings above here

    // Trigger blockUI by click on an link for example
    $('a').on('click', function(e) {
        e.preventDefault();

        $.blockUI({ message: $('#your-form') });
    });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T12:13:36.000

尝试这样的事情；

```
$('#txtValue').keyup(function(e) {
    e.preventDefault();

    if (e.keyCode === 13) {
        // The Enter key was pressed
        postText($(this).val());   
    }
}); 
```

您应该如何使用`form.submit`事件而不是监听`enter`密钥。

```
if (e.keyCode === 27) {
    // The Esc key was pressed
    $('#dialog').hide();
} 
```

另请参阅这些以获取更多信息；

[https://stackoverflow.com/search?q=javascript+esc+key](https://stackoverflow.com/search?q=javascript+esc+key)

[https://stackoverflow.com/search?q=javascript+enter+key](https://stackoverflow.com/search?q=javascript+enter+key)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T12:12:58.510

javascript:

```
("#yourInput").keyup(function(e){
    switch (e.keyCode) {
    case 13: # enter
    # logic
    case 27: # esc
    # logic
    }
}) 
```

# c# - Windows上文件名中的无效字符？

> ID：11721147
> 
> 赞同：4
> 
> 时间：2012-07-30T12:03:00.940
> 
> 标签：c#, special-characters, filenames

根据 MSDN ，以下字符不能是文件名的一部分：

> 使用当前代码页中的任何字符作为名称，包括 Unicode 字符和扩展字符集 (128–255) 中的字符，但以下字符除外：
> 
> ◦以下保留字符：
> 
> *   `<`（少于）
> *   `>`（比...更棒）
> *   `:`（冒号）
> *   `"`（双引号）
> *   `/`（正斜杠）
> *   `\`（反斜杠）
> *   `|`（垂直条或管）
> *   `?`（问号）
> *   `*`（星号）

在 .net 中，提供了一个 api 来查找文件名中不允许使用的字符

```
char[] invalidFileChars = Path.GetInvalidFileNameChars(); 
```

> ## 评论
> 
> 不保证从此方法返回的数组包含文件和目录名称中无效的完整字符集。完整的无效字符集可能因文件系统而异。例如，在基于 Windows 的桌面平台上，无效路径字符可能包括 ASCII/Unicode 字符 1 到 31，以及引号 (")、小于 (<)、大于 (>)、竖线 (|)、退格 ( \b)、空 (\0) 和制表符 (\t)。

但是在备注部分据说它取决于文件系统。

将此 api 用于 XP 和 Windows 7 等基于 Windows 的操作系统是否安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:12:50.410

是的，在基于 ASCII 的文件系统中，Path.GetInvalidFileNameChars() 将保证您的文件名安全。如果您检查[此处的 ASCII 图表，](http://www.asciitable.com/index/asciifull.gif)您会发现左列中的所有内容都被排除在外，其余列中的某些字符也被排除在外。**检查返回数组中每个字符**的十进制表示，以获取排除的完整列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:12:35.157

第一部分是指定语言本身禁止哪些字符。但是，由于类是从具有特定名称的文件（在大多数平台上）加载的，因此底层平台可能会因文件系统而施加额外的限制。在 Java 中也是如此，尽管您可以通过使用自定义类加载器在技术上绕过它。

# jquery - 将多维数组转换为一维关联 jquery 数组

> ID：11721154
> 
> 赞同：0
> 
> 时间：2012-07-30T12:03:17.777
> 
> 标签：jquery, arrays, associative-array

如何在jQuery中将以下多维数组转换为具有最小循环的一维关联数组？

```
array(array('a'=>3),array('b'=>2),array('c'=>4),array('d'=>3)) 
```

预期结果：

```
array('a'=>3,'b'=>2,'c'=>4,'d'=>3); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:19:54.213

```
{'a':3, 'b':2, 'c':4, 'd':3} 
```

...是您在结果中寻找的 JS 语法。从某种意义上说，JS 没有关联数组，比如 PHP 有：它有对象，它们（大约）完成相同的工作。

如果您显示的代码在其他语言（PHP？）中有效，则可以将其转换为 JSON 字符串，并且当 JS 解析 JSON 时，您最终会得到一个 JS 对象数组，如下所示：

```
[ {'a':3}, {'b':2}, {'c':4}, {'d':3} ] 
```

要将其转换为 JS 对象而不是对象数组，最简单的方法可能是使用`jQuery.extend()`：

```
// assume some JSON.parse() or other process has created
myArr = [ {'a':3}, {'b':2}, {'c':4}, {'d':3} ]
// then

var tmpArr = myArr.slice(0);   // make shallow copy of myArr
tmpArr.unshift({});            // insert an empty object

var newObj = jQuery.extend.apply(this, tmpArr); 
```

演示：http: [//jsfiddle.net/SqcEw/](http://jsfiddle.net/SqcEw/)

请注意，如果原始数组中的多个元素具有相同的属性名称，那么最终对象中的一个会破坏另一个。

进一步阅读：

*   [使用对象](https://developer.mozilla.org/en/JavaScript/Guide/Working_with_Objects)（页面目前有一些加载错误，但通常这是一个很好的参考，我相信 MDN 会很快修复它）
*   [`$.extend()`](http://api.jquery.com/jQuery.extend/)

# python - 如何从 Python 中的管道命令获取交互式输出？

> ID：11721155
> 
> 赞同：1
> 
> 时间：2012-07-30T12:03:21.210
> 
> 标签：python, popen, interactive

我目前有这段代码，它可以工作并产生您期望的输出，即如果您要运行 'ls -ltr | 则输出行的列表。少”从终端。

```
p1 = subprocess.Popen(shlex.split('ls -ltr'), stdout=subprocess.PIPE,
                                                        stderr=subprocess.PIPE)
p2 = subprocess.Popen(shlex.split('less'), stdin=p1.stdout,
                               stdout=subprocess.PIPE, stderr=subprocess.PIPE)
print p2.communicate() 
```

有没有办法使用 subprocess.Popen 或其他任何方法来获取交互式输出，您可以滚动浏览并输入键盘命令，就像直接从终端运行命令一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:10:38.147

如果 Python 进程有自己的标准输出连接到终端，那就是

```
p1 = subprocess.Popen(shlex.split('ls -ltr'), stdout=subprocess.PIPE,
                                              stderr=subprocess.PIPE)
p2 = subprocess.Popen(shlex.split('less'), stdin=p1.stdout) 
```

即不要重定向输出`less`。

# python - Django多对多（m2m）与同一模型的关系

> ID：11721157
> 
> 赞同：64
> 
> 时间：2012-07-30T12:03:24.923
> 
> 标签：python, django, django-models, many-to-many

我想在用户类对象之间创建多对多关系。

我有这样的事情：

```
class MyUser(models.Model):
    ...
    blocked_users = models.ManyToManyField(MyUser, blank=True, null=True) 
```

问题是我是否可以在其内部使用类引用。还是我必须使用`"self"`insead of `"MyUser"`in `ManyToManyField`？还是有另一种（更好的）方法来做到这一点？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-07-30T14:43:06.563

从技术上讲，我很确定“MyUser”或“self”会起作用，只要它在任何一种情况下都是一个字符串。你只是不能通过`MyUser`实际的课程。

但是，文档总是使用“self”。使用“self”不仅更明确地说明实际发生的事情，而且不受类名更改的影响。例如，如果您后来更改`MyUser`为`SomethingElse`，那么您还需要更新对“MyUser”的任何引用。问题是因为它是一个字符串，你的 IDE 不会提醒你错误，所以你错过它的可能性更大。无论现在或将来类的名称是什么，使用“self”都将起作用。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-07-30T12:06:43.983

```
class MyUser(models.Model):
    ...
    blocked_users = models.ManyToManyField("self", blank=True) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2021-03-28T09:10:11.200

不要忘记使用symmetric=False，如果您对相关对象使用.clear() 或.add() 方法并且不希望关系另一侧的对象更新关系字段中的自己的数据。

```
some_field = models.ManyToManyField('self', symmetrical=False) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-10-21T09:19:24.520

我认为它应该是类名而不是自我。因为像这样使用自我

```
parent = models.ManyToManyField('self', null=True, blank=True) 
```

当我添加父母时：

```
user1.parent.add(user2) 
```

我在数据库中有 2 条记录，如下所示： [![在此处输入图像描述](../Images/e946de363c566616707b7459640ad26a.png)](https://i.stack.imgur.com/SZKzK.png)

并使用像这样的类名：

```
parent = models.ManyToManyField('User', null=True, blank=True) 
```

我在数据库中有这样的一条记录： [![在此处输入图像描述](../Images/8a6f806ea647ce5a83f7d65163ab38a4.png)](https://i.stack.imgur.com/GJ6pm.png)

请注意，我使用 uuid 进行 pk，我使用 django 3.1

编辑：正如@shinra-tensei 在[这个答案](https://stackoverflow.com/a/56536346/6876911)中作为评论解释的那样，`symmetrical`如果我们使用 self. 记录在[Django 文档中：ManyToManyField.symmetrical](https://docs.djangoproject.com/en/3.1/ref/models/fields/#django.db.models.ManyToManyField.symmetrical)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-11T14:35:42.103

如果您使用**self**或**MyUser**在这两种情况下都会收到 NameError 。您应该将**“self”**写为字符串。请参见下面的示例：

```
class MyUser(models.Model):
    ...
    blocked_users = models.ManyToManyField("self", blank=True, null=True) 
```

如果关系不对称，不要忘记将**对称**属性设置为**False 。**

有关更多详细信息，请查看：[https ://docs.djangoproject.com/en/3.0/ref/models/fields/#django.db.models.ManyToManyField](https://docs.djangoproject.com/en/3.0/ref/models/fields/#django.db.models.ManyToManyField)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-11T04:09:16.723

不要在 ManyToManyField 中使用 'self'，这会导致你的对象相互链接，当使用 django 表单提交时

```
class Tag(models.Model):
    ...
    subTag = models.ManyToManyField("self", blank=True)

 ...
 aTagForm.save() 
```

结果：

```
 a.subTag == b
 b.subTag == a 
```

# javascript-events - 如何在 JSP 页面中使用 JavaScript 捕获鼠标拖动坐标？

> ID：11721158
> 
> 赞同：0
> 
> 时间：2012-07-30T12:03:24.657
> 
> 标签：javascript-events

我必须捕获鼠标事件的`start (x,y)`坐标和`end (x,y)`坐标。示例：我在 HTML 页面中有一个图像，将会发生什么，用户可以借助鼠标拖动选择任何特定区域。

所以我想从它开始和结束的地方捕获坐标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:26:29.597

```
var start = [];
var end = [];
myImage.addEventListener('mousedown',function(e){
    var e = e || event;
    start = [e.x || e.clientX,e.y || e.clientY];
});
document.addEventListener('mouseup',function(e){
    var e = e || event;
    end = [e.x || e.clientX,e.y || e.clientY];
}); 
```

# textmate - TextMate：在文件中查找似乎有过时的缓存（可能是因为 AckMate？）

> ID：11721159
> 
> 赞同：0
> 
> 时间：2012-07-30T12:03:35.143
> 
> 标签：textmate, ack

我前段时间安装了AckMate，我这里描述的问题从来没有发生在我身上，所以也许是因为AckMate......？

我们开始吧：通常当我在项目中搜索时，TextMate 会在文件的“旧版本”中找到搜索模式的出现，这意味着搜索模式肯定曾经存在过，但现在不再存在了！看一下屏幕：

![在文件中查找](../Images/a992185965ba184dc314d27bb2e38dd4.png)

我搜索了 encoding_name，它找到了它，但是当打开文件时，它不再存在（但它已经存在了一段时间，我知道）。

在 Rails 的日志文件中搜索时也是如此：我做了 a `rake log:clear`，但它仍然在日志文件中找到东西，但是打开它们时，它们是空的！

发生了什么？可能是因为 AckMate 吗？我不太了解它，我只是安装它，因为它被提到是一个非常好的插件，事实上，它是！我还安装了 PeepOpen，但我不怀疑它与此有关。

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:28:45.170

我真的不知道这是否相关，但它可能与文件句柄有关，请参见此处：

[一旦我从另一个位置保存它，Rails 就不再写入 development.log 文件](https://stackoverflow.com/questions/11783109/rails-doesnt-write-to-development-log-file-anymore-as-soon-as-i-save-it-from-an)

# java - how to dynamically adding new rows to table the Date Picker fields in the new rows?

> ID：11721161
> 
> 赞同：1
> 
> 时间：2012-07-30T12:03:38.727
> 
> 标签：java, jquery, jquery-ui, struts

Am working on a time sheet application with struts 1.2 and implementing jquery inside it. would appreciate greatly if i could get reply quickly ... am in learning curve in both jquery and struts ...

> Requirement is this : On the (+) button insert a row which populates dynamically and has two timepickers in it one used for determining timefrom, the other timeto, based on which duration is to be calculated. before clicking on (-) button user needs to check atleast one row for deleting that record. below are the screen shots.... the timepicker plugin i used is trentrichardson's. is this possible using jtable ? or jqgrid too ?? guys advise ...

![requirement with timepickers](../Images/298135340f1984a47bcfd45561e26866.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:04:50.520

i worked it around using some of the ideas from the other users. from a newbie on struts and java perspective i found that in struts tag library id and class are given as styleId and styleClass respectively. eg:

is written as :-

Though am still interested in knowing whether the below can be corrected further ...

[http://jsfiddle.net/manmohan_menon/6YkyY/4/](http://jsfiddle.net/manmohan_menon/6YkyY/4/)

any advise will be greatly appreciated... thanks! :)

# interface - 接口的使用：案例研究

> ID：11721170
> 
> 赞同：0
> 
> 时间：2012-07-30T12:04:07.063
> 
> 标签：interface, uml

![在此处输入图像描述](../Images/e4ffc0e11a86e3574b3295b5a9479648.png)

从设计的角度来看，我可以说接口用于生成灵活的代码，以便将来易于维护。提到案例研究，我是否正确地说：

使用此示例中的接口是因为 Professor 和 HeadofDept 类都具有雇用人员的权力。假设我们可能会在不久的将来添加其他可能被授予雇用人员的权利的人。

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:18:42.823

接口将允许您的代码在基本类型（即 EmployerProfessor）上调用诸如employPeople() 之类的方法。所以你传递 EmployerProfessor 对象和代码不需要知道确切的实现是什么，它只知道它可以调用employPeople()。因此它允许动态调度方法调用。使用一些编译器实现（vtable 等），它将为您调用正确的方法。

接口并不总是那么灵活，很难改变一个接口，因为当前的代码可能会受到影响。接口提供了一个约定，它告诉实现它的类，您必须提供以下方法。

# java - JBoss 5.0 EAP Web 应用程序中的自定义错误页面

> ID：11721172
> 
> 赞同：0
> 
> 时间：2012-07-30T12:04:14.110
> 
> 标签：java, jakarta-ee, jboss, jboss5.x

我正在部署一个 Web 应用程序，并且我希望有一个适用于我所有 Web 应用程序的默认 404 页面，除非每个应用程序 web.xml 中另有说明

我已经完成了一些更改“jboss-as\server\myapp\deployers\jbossweb.deployer\web.xml”并添加以下内容

```
<error-page>
    <error-code>404</error-code>
    <location>/error404.html</location>
</error-page> 
```

然后，我得到的所有 404 错误都被重定向到 /error404.html，而无需根据需要更改每个应用程序的 web.xml。

无论如何，奇怪的是，我正在部署的每场战争都必须有一个 error404.html 副本，因为它正在自己的上下文中寻找它。我尝试将错误页面放在 jboss-as\server\myapp\deploy\ROOT.war 中，它们适用于未定义的 URL，但不适用于已定义的应用程序。

我可以只为所有上下文提供一份错误页面副本，并且该页面仅在一个 web.xml 中定义吗？

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:34:12.757

拉法，

“myapp”是您创建的自定义配置文件吗？如果没有，请尝试更改文件 /jboss/server/all/deployers/jbossweb.deployer/web.xml。

其中“all”是可用的 jboss 配置文件之一（all、default、standard...）。

# objective-c - cocos2d中如何改变精灵的大小？

> ID：11721174
> 
> 赞同：-7
> 
> 时间：2012-07-30T12:04:26.453
> 
> 标签：objective-c, ios, ios4, cocos2d-iphone, box2d

我想在“Paper Toss”游戏中像纸一样改变精灵的比例。

'Paper Toss' 是 App Store 上提供的游戏。我想制作一个像纸一样的精灵，并在'paper Toss' 中像纸一样改变精灵的比例；

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:55:35.210

```
[sprite runAction:[CCScaleTo actionWithDuration:realMoveDuration scale:0.4f]; 
```

这是工作代码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T11:09:21.460

使用 setScale 方法。

```
[sprite setScale:1.5]; 
```

在这种情况下，比例设置为 1.5 倍。

# regex - 从 shell 编辑配置文件的一行

> ID：11721177
> 
> 赞同：1
> 
> 时间：2012-07-30T12:04:35.410
> 
> 标签：regex, linux, bash, shell

给定一个配置文件，例如 sshd_config：

```
[...]
IgnoreRhosts yes
RhostsRSAAuthentication no
HostbasedAuthentication no
PermitEmptyPasswords no
ChallengeResponseAuthentication no
PasswordAuthentication yes
X11Forwarding yes
X11DisplayOffset 10
[...] 
```

我想编写一个命令来设置配置设置。例如，我想设置`PasswordAuthentication`为`no`. 如果条目已经存在，我想替换它，如果不存在，我想将它添加到文件末尾。

我怎样才能从外壳做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:18:22.237

您可以使用它`awk`来执行此操作。这是我写的一个脚本：

```
$ cat setProp.sh
#!/bin/sh

propFile=$1
key=$2
value=$3

awk -v "key=$key" -v "value=$value" '{
    if($1==key) {
        found=1
        print $1" "value
    } else {
        print
    }
}
END {
    if(!found) print key" "value
}' $propFile 
```

用法：

```
$ setProp.sh myfile RhostsRSAAuthentication no
IgnoreRhosts yes
RhostsRSAAuthentication no
HostbasedAuthentication no
PermitEmptyPasswords no
ChallengeResponseAuthentication no
PasswordAuthentication yes
X11Forwarding yes
X11DisplayOffset 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:48:00.940

```
awk '{if($1~/PasswordAuthentication/){flag=1;if($2~/yes/)$2="no";print $0}else{print}} END{if(flag!=1)print "PasswordAuthentication no"}' temp 
```

# mysql - CodeIgniter 活动记录调用多个存储过程的问题

> ID：11721181
> 
> 赞同：4
> 
> 时间：2012-07-30T12:05:08.220
> 
> 标签：mysql, codeigniter, stored-procedures

```
class Registration_model extends CI_Model {

    function __construct() {
        parent::__construct();
    }   

    function check_email_availability($email)
    {
        $sql = "CALL proc_1301('$email');"; 
        $query = $this->db->query($sql) or die(mysql_error()); 
        return $query->row_array();
    }

    function check_username_availability($username)
    {
        $sqlt = "CALL proc_1303('$username');"; 
        $query = $this->db->query($sqlt) or die(mysql_error()); 
        return $query->row_array();
    }

    function process_registration($username, $email, $password)
    { 
        $sql = "CALL `proc_1302`('$username', '$email', '$password');"; 
        $query = $this->db->query($sql) or die(mysql_error()); 
        return $query->result_array();   
    } 
```

这是我的控制器代码，它从模型中一一调用三个函数：

```
$emailCheckRes = $this->Registration_model->check_email_availability($email); 
$usernameCheckRes = $this->Registration_model->check_username_availability($username); 
$this->data['regRes'] = $this->Registration_model->process_registration($username, $email, $password); 
```

我的问题是，当我只运行一个功能时，它运行成功，但是当我运行其中两个或全部三个时，它显示空白页...知道为什么吗？？？

**解决方案**

所以最后我们为自己的问题得到的唯一解决方案是：

```
/* ADD THIS FUNCTION IN SYSTEM/DATABASE/DB_ACTIVE_REC */
/* USAGE $this->db->freeDBResource($this->db->conn_id); */
function freeDBResource($dbh){
    while(mysqli_next_result($dbh)){
            if($l_result = mysqli_store_result($dbh)){
              mysqli_free_result($l_result);
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T17:50:33.130

该问题与 CodeIgniter 的活动记录和多个数据库存储过程调用有关。

首先检查 dbdriver 参数（*application/config/database.php*）是否设置为**mysqli**。然后，如[StackOverflow 上的“从 CodeIgniter 的 Active Record 类调用存储过程”问题中](https://stackoverflow.com/questions/4827752/calling-a-stored-procedure-from-codeigniters-active-record-class)所述，将以下函数添加到*system/database/DB_active_rec.php ：*

```
function freeDBResource($dbh){
    while(mysqli_next_result($dbh)){
            if($l_result = mysqli_store_result($dbh)){
              mysqli_free_result($l_result);
            }
        }
} 
```

..并在您的控制器中使用：

```
$this->db->freeDBResource($this->db->conn_id); 
```

在任何存储过程调用之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:32:48.187

模型和控制器似乎没问题。如果您尝试以下模型：

```
class Test_model extends CI_Model
{
   function __construct()
   {
      parent::__construct();
   }
   function a($a_input)
   {
      return($a_input.': a');
   }
   function b($b_input)
   {
     return($b_input.': b');
   }
} 
```

...并从这样的控制器调用它的功能：

```
$this->load->model('Test_model');
    $a_result = $this->Test_model->a('aaa');
    $b_result = $this->Test_model->b('bbb');
    echo($a_result.'<br />'.$b_result); 
```

您可以看到多个函数调用工作正常。

如果只调用一个，您确定可以正确执行模型中的三个函数中的任何一个吗？如果是，也许问题可以在您的存储过程中找到......您可以尝试在模型函数中执行普通查询而不是存储过程吗？为了调试您的问题，如果 db_debug 设置为 TRUE，请同时检查您的 /application/config/database.php。

# jquery - 如何在与 jQuery mobile 的对话中显示图像？

> ID：11721183
> 
> 赞同：0
> 
> 时间：2012-07-30T12:05:13.830
> 
> 标签：jquery, ajax, jquery-plugins, jquery-mobile

我尝试过使用几个插件：code.photoswipe-3.0.4、NETEYE-touch-gallery-1.0.0，这两个插件的使用说明都不完整，或者根本不起作用。

是因为我使用的 jquery/jquery 移动版本吗？它的 1.6.4/1.0.1

按照指示进行操作，当我单击链接时，我会得到一个带有“未定义”的新页面。一直无法解决问题。任何帮助将非常感激。

当我使用照片滑动时，这就是我所做的

如photoswipe网站上所述，我将其放在标题上：

```
$(document).ready(function(){

var myPhotoSwipe = $("#Gallery a").photoSwipe({ enableMouseWheel: false , enableKeyboard: false });

}); 
```

这在画廊 div 中（其中有 data-role="controlgroup"）：

```
<ul id="Gallery">
<li>
<a href="../images/course_img/1_full.jpg"> <!--adding the rel=external simply opens the image in a new website page.>
<img src="../images/course_img/1_thumb.png"</a>
</li>
</ul> 
```

我得到的只是未定义的错误，或损坏的链接或单独网页中显示的图像。

现在我放弃了整个额外的脚本方法，并采用了更愚蠢和简单的方法。令我惊讶的是，这也行不通！

```
 <a href="../images/course_img/1_full.jpg" data-rel="dialog">
        <img src="../images/course_img/1_thumb.png"/>
      </a> 
```

你能用指针或 2 帮助我吗？非常感激 ！我正在使用最新的 x64 系统上的 dreamweaver cs6 和 chrome。我在页面上运行了几次链接检查器，链接都很好，除非我遗漏了什么！

在 javascript 控制台中，这是我按下上面的链接时得到的：

XMLHttpRequest 无法加载 file:///E:/​​GoogleCloud/Google%20Drive/git/TestApp/images/course_img/1_full.jpg。Access-Control-Allow-Origin 不允许 Origin null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:52:54.413

经过一番挖掘后，看起来出于某种愚蠢的原因，您无法在 dw 中使用 jpeg。它们显示为断开的链接或文件丢失。前任：

如果你这样做

```
<a href="blabla.jpeg">
  <img src="blublu.png"/>
</a> 
```

链接将无法正确显示。两个图像必须具有相同的格式。愚蠢，但真实。我发现的另一件事是，在 photoswipe 网站上实现代码后，我仍然得到一个

```
Uncaught TypeError: undefined is not a function 
```

# javascript - 如何计算孙子div的宽度？

> ID：11721184
> 
> 赞同：0
> 
> 时间：2012-07-30T12:05:19.080
> 
> 标签：javascript, jquery, css, html

各位小伙伴们下午好

我在处理一些 jQuery 代码时遇到了问题，我似乎无法理解这个问题。

情况如下：

我正在制作（基于mysql-entries）几个div。如果我先向您展示结果，也许会更好：

```
<div class="shipcontainer" id="shipcontainer1">
    <div class="timelinecontainer" id="timelinecontainer1">timeline--></div>
    <div class="travelsall" data-ship="1">
        <div class="travelcontainer" data-travelid="1" data-ship="1" id="travelcontainer1">
         <div class="fasecontainer" data-travelid="1" data-ship="1">
           <div class="Mobilize  travelfase" date-days="6" date-fasetravelid="1">1: Mobilize </div>
           <div class="Loading travelfase" date-days="12" date-fasetravelid="1">2: Loading</div>
           <div class="Boating travelfase" date-days="20" date-fasetravelid="1">3: Boating</div>
           <div class="Discharge travelfase" date-days="6" date-fasetravelid="1">4: Discharge</div>
        </div>
        <div class="options" id="optionstravel1" data-travelid="1">OPTIONS</div>
      </div>
    </div>
</div> 
```

如您所见，我有一个shipcontainerdiv。在我有两个子 div（timelinecontainer 和 travelsall）。后者在此示例中仅包含一个“.travelcontainer”，但将来会更多。

这段代码重复了几次，（我目前有两个“.shipcontainers”）。

我想要实现的是将带有“.travelcontainer”的div的宽度设置为带有“.travelfase”的四个div的宽度之和。这是我的 jQuery 代码：

```
var totalWidth = 0;

$(".travelcontainer").width(function () {
  var travelID = $(this).data(travelid);

  $(this).find('div[data-fasetravelid=' + travelID + ']').each(function (index, element) {
    totalWidth = $(this).innerWidth() + totalWidth;
  });

  return totalWidth;
}); 
```

因为，在它通过 PHP 解析的过程中，我给了“.travelcontainer”一个 data-travelid 属性，它也是“.travelfase”的孙子。我想我可以通过这种方式将它们结合在一起。

问题是，当我有 2 个船舶集装箱时，两个“旅行集装箱”都会将所有值加在一起。因此，具有 data-travelid=1 的 travelcontainer 的宽度与所有具有 travelfase 类的 div 的宽度完全相同，而不仅仅是具有 data-fasetravelid=1 属性的 div。

我也试过这段代码（我之前用过）：

```
var widthTotal = 0;

$(".travelcontainer").width(function () {
  $(".travelcontainer > .travelfase").each(function (index, element) {
    widthTotal = $(this).innerWidth() + widthTotal;
  });
});

return widthTotal; 
```

这也有同样的效果。

有人看到我在这里做错了吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:13:16.927

尝试：

```
$(".travelcontainer").each(function() {
  var totalWidth = 0;

  $('.travelfase', this).each(function () {
    totalWidth += $(this).width();
  });

  $(this).width(totalWidth);
}); 
```

# google-chrome - 在所有浏览器（Chrome、FF、IE、Opera、Safari）上安装扩展的 NSIS 脚本示例

> ID：11721185
> 
> 赞同：0
> 
> 时间：2012-07-30T12:05:28.900
> 
> 标签：google-chrome, firefox-addon, nsis, safari-extension, browser-extension

我需要将我的插件打包到安装程序中，以便它可以安装在计算机上所有可用的浏览器上。

在浏览了许多主题后，我发现了几个脚本可以使用 NSIS 单独安装 Chrome 或 FF 脚本，这很有帮助，但我真的需要一个完整的 NSIS 脚本，它能够在一次安装中为所有浏览器安装扩展。

我确信这已经构建了很多次，如果有人可以分享一个脚本示例，我可以根据我的需要进行调整，我将不胜感激，因为我只能找到零碎的东西，并想看看大图是如何组合在一起的.

我的要求很简单：

*   获得 XPi、CRX.. 扩展文件格式的文件

*   我需要一个 Windows 安装程序 (NSIS) 来为每个可用脚本安装扩展

*   如果它可以从服务器提供，那将是一个加号，但不是强制性的
*   我使用的是 Kango 框架，所以暂时不能使用其他解决方案

非常感谢你的帮助 ！更新：我仍在努力解决，找不到太多支持，请记住我不能使用 CROSSRider。请帮忙 非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:18:48.877

无需在那里重新发明轮子。我认为您正在寻找类似[crossrider.com](http://crossrider.com/)的东西，它是一个跨浏览器扩展平台。仔细查看应用程序设置中的“Windows Installer”选项 - 您可以选择将扩展程序与您的安装捆绑在一起。

# xcode - 如何避免 Xcode 4.4 中的 Interface Builder 崩溃

> ID：11721191
> 
> 赞同：0
> 
> 时间：2012-07-30T12:05:52.827
> 
> 标签：xcode, interface-builder

我制作了一个演示视频，展示了我如何在 Xcode 4.4 崩溃中制作 Interface Builder： [http ://www.youtube.com/watch?v=pRLGOmg9LpQ&feature=youtu.be&hd=1](http://www.youtube.com/watch?v=pRLGOmg9LpQ&feature=youtu.be&hd=1)

由于这个问题，目前我正在努力继续我的工作。

我怎样才能避免这种崩溃？任何想法、解决方法、手动 xib 文件调整等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:33:56.780

它仍然发生，还是你修复了它？

仔细查看您的视频，我认为崩溃日志中的错误与我本周早些时候遇到的崩溃相同：

[编辑情节提要时 Xcode Interface Builder 崩溃](https://stackoverflow.com/questions/12580881/xcode-interface-builder-crashes-when-i-edit-storyboard)

尝试关闭自动布局，看看是否有帮助。

一旦 Interface Builder 可靠地工作，您似乎可以重新打开自动布局，而无需重新创建问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:29:08.387

关注你的 youtube 视频对我来说没问题，但我在 Snow Leopard 上使用 4.2，我得到的对象结构略有不同。

![在此处输入图像描述](../Images/8866e95fb31d17e2044780bc959d73ea.png)

4.2 没问题，只在 4.4 开始崩溃？

# jquery - jQuery Mobile - 无法访问 $.mobile.loading() 方法？

> ID：11721195
> 
> 赞同：0
> 
> 时间：2012-07-30T12:06:10.600
> 
> 标签：jquery, jquery-mobile

我正在尝试使用 jqm 的加载微调器作为此处的详细信息：http: [//jquerymobile.com/test/docs/pages/loader.html](http://jquerymobile.com/test/docs/pages/loader.html)

从我的 jqm 应用程序或 firebug 控制台调用`$.mobile.loading('show');`或任何其他`$.mobile.loading(...)`方法都不起作用。

**控制台中的错误消息是：** `$.mobile.loading is not a function`

* * *

如果我打开 firebug 并运行，`console.log($.mobile);`我会得到以下没有`loading`或`loader`方法的对象。

![在此处输入图像描述](../Images/09256dc31b4c7bdc7da47691bf902e12.png)

我也尝试过包含以下代码，但没有任何乐趣：

```
$( document ).bind( 'mobileinit', function(){
  $.mobile.loader.prototype.options.text = "loading";
  $.mobile.loader.prototype.options.textVisible = false;
  $.mobile.loader.prototype.options.theme = "a";
  $.mobile.loader.prototype.options.html = "";
}); 
```

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:16:26.767

我会说你没有使用jQuery Mobile的最后一个版本，加载方式很新（不知道是哪个版本发布的）。尝试使用

```
$.mobile.showPageLoadingMsg() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T10:22:04.227

1.  $.mobile.showPageLoadingMsg(); 作秀
2.  $.mobile.hidePageLoadingMsg(); 隐藏
3.  $.mobile.showPageLoadingMsg("a","加载中请稍候..."); 用于显示主题和信息

# java - 实例化一个对象而不将其分配给 Java 中的变量有什么意义？

> ID：11721199
> 
> 赞同：4
> 
> 时间：2012-07-30T12:06:29.710
> 
> 标签：java

`new`当您不将结果对象分配给引用时，关键字的用途是什么？

这是样本。

```
public static void main(String[] args) {ample.
    Display display = new Display();

    new SWTApp(display);

    display.dispose();
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T12:14:18.097

在您的情况下，构造函数很可能有副作用（在线程中启动应用程序？）并且您只对这种副作用感兴趣。

将其视为调用方法的丑陋方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T12:12:58.557

大概在这种情况下，构造函数`SWTApp`实际运行应用程序直到它关闭。对我来说，这听起来不是一个伟大的设计，但语言中没有任何东西可以真正阻止它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T12:22:57.497

> 当您不将结果对象分配给引用时，新关键字的用途是什么

当您只想调用类的某个方法*一次*并且*不想*存储对象的引用以供将来使用时。在下面的示例中，我只对调用类的方法`showMessage()`感兴趣`Display`。

```
public class XYTest {

    public static void main(String[] args) {
        new Display().showMessage();
    }
}

class Display {

    public void showMessage() {
        System.out.println("Hey! I am here.");
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T12:08:00.263

如果您只想创建一个新对象但不需要为该对象设置任何内容，则无需将其分配给变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T12:26:39.203

在 Java 中，new 关键字用于创建对象。现在创建对象时会发生什么，JVM 为所有成员变量和方法分配内存，并调用构造函数。在正常情况下，您希望将变量引用存储到某个对象，但是如果您知道构造函数已经完成了您想要从新对象中获得的任何内容，则可以进行您提到的初始化（尽管这是一个非常糟糕的做法）

例如

```
public class PrintFile{
public PrintFile(String fileName)
{
//code to print the file on printer or file system
}
} 
```

现在我们可以简单地说

```
new PrintFile(filetoprint); 
```

无需保存对象引用，因为工作是在构造函数本身中完成的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T13:46:07.513

标准小部件工具包 (SWT) 是用于 Java 编程语言的图形小部件工具包。

无论平台如何，图形应用程序都有离散的入口点，这些入口点创建可视资源和队列机制以在这些资源之间触发事件并因此在应用程序中调用控制器对象。（例如按钮动作事件、窗口打开事件）

您不需要保存对这些对象之一的引用这一事实并不重要，因为像这样的构造函数通常是您不需要直接处理的应用程序入口点的表示。

构造函数不操作您传递给它的对象，它接受它作为在上下文中执行应用程序的起点，可能使用您传入的初始状态作为初始窗口或初始配置。

以下是您好奇的构造函数的代码：

```
public SWTApp(Display display) {

    Shell shell = new Shell(display);
    shell.setText("Center");
    shell.setSize(250, 200);

    center(shell);

    shell.open();

    while (!shell.isDisposed()) {
      if (!display.readAndDispatch()) {
        display.sleep();
      }
    }
} 
```

构建您的应用程序，不要担心这一点，它不是与用户相关的实例，它是应用程序入口点。顺便说一句，这个图形应用程序的初始构造看起来就像几乎任何语言的图形应用程序的所有其他入口点。

干杯!

# javascript - 在javascript中重放音频对象

> ID：11721201
> 
> 赞同：1
> 
> 时间：2012-07-30T12:06:32.037
> 
> 标签：javascript, html, cocos2d-iphone

我试图在每次游戏开始时重播音频（使用`Cocos2d` `javascript`）。它第一次播放声音，但之后，每次我播放它都没有声音出现。

这是我的代码

```
var myAudio = document.getElementById('start');
        myAudio.addEventListener('ended', function() {
             myAudio.currentTime = 0;
             myAudio.play();
            window.startGame = true;
        }, false);
        myAudio.play(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:21:05.260

见这里： http: [//forestmist.org/2010/04/html5-audio-loops/](http://forestmist.org/2010/04/html5-audio-loops/)

# sharepoint - 共享点品牌：由于 _spBodyOnLoadWrapper() 函数导致的页面宽度大小

> ID：11721203
> 
> 赞同：1
> 
> 时间：2012-07-30T12:06:34.727
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-branding

我正在尝试在我的 sharepoint 网站上打造不同的外观和感觉。我尝试在 sharepoitn 设计器的表单标签下将主要内容的宽度缩小到 960px。当我第一次刷新页面时，它会将主要内容渲染到 960 像素，但是当页面钓鱼加载主要内容时，它会自行拉伸到整个屏幕的宽度。

我发现这是因为在 body 标记中运行的 onload 脚本。但我不能删除这个脚本，因为这项工作对页面功能有副作用。

函数是_spBodyOnLoadWrapper()。

有人知道这个功能吗？或者有谁知道如何解决这个问题？

更新＃1：

我的css代码如下..我将这个类添加到母版页的主窗体中：

```
.mainContent
{
width: 960px;
height:100% !important;
min-height:100% !important;
padding-top: 10px;
margin-left: auto;
margin-right: auto;
direction:rtl;
} 
```

更新#2：

我使用 v4.master 模板。我已从表单标签中取出功能区。它直接在body标签之后。因为我想让丝带在顶部伸展。但是当我添加这行代码时

```
<body onload="if (typeof(_spBodyOnLoadWrapper) != 'undefined') _spBodyOnLoadWrapper();"> 
```

mainContent 爆炸了。标题处的某些东西在整个宽度上延伸，底部的一些面板保持 960 像素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:06:16.533

you got me interested so I recreated your issue. By default, the javascript will try to inline the width based on its calculations. However, what you need is to set the class s4-notsetwidth on a wrapping container.
Here is what i did to fix your issue
Add this to the head

```
<style type="text/css">
#s4-bodyContainer {
    width: 960px;
    height:100% !important;
    min-height:100% !important;
    padding-top: 10px;
    margin-left: auto;
    margin-right: auto;
}
/* Aligns the Top Bars */
.ms-cui-ribbonTopBars {
width: 960px!important;
margin-left:auto;
margin-right:auto;
}

/* Turns off the border on the bottom of the tabs */
.ms-cui-ribbonTopBars > div {
border-bottom:1px solid transparent !important;
}
</style> 
```

Then locate the s4-workspace (that's the immediate parent of #s4-bodyContainer and add class s4-nosetwidth. That should work for you. Use these two references to achieve exactly what you want (not sure if you want ribbon aligned or not), [Randy Drisgill post](http://blog.drisgill.com/2010/01/error-in-current-docs-for-upgrading.html) and [Tom Wilson's post](http://styledpoint.com/blog/fixed-width-centered-aligned-sharepoint-2010-site-updated/).

# mysql - 使用 MySQL 跟踪用户选择的数字列表的最有效方法是什么？

> ID：11721207
> 
> 赞同：1
> 
> 时间：2012-07-30T12:06:48.290
> 
> 标签：mysql, row, selection

假设用户可以从 1 到 300 的列表中选择**任意**数量的数字，我们需要跟踪每个用户的选择。请记住，他们最多可以选择 300 个数字（例如，他们选择所有数字，1、2、3 ... 299、300），根本没有，或者介于两者之间（例如 4、17、87、113、189、 251、289)。

在 MySQL 中跟踪每个用户选择的最佳、最有效的方法是什么？

我能想到的两种选择是：

1)**每个用户一行**，一列包含他们选择的逗号分隔列表。添加和删​​除选择需要获取该用户的列，添加/删除选择，然后将列表保存回列。

和

2）**每个单独的选择一行，**对应用户的一列和所做的单独选择的另一列。添加和删​​除选择只需要对与该用户和选择相对应的行执行 INSERT 或 DELETE。

好吧，2）对于数据库来说似乎更“自然”，但是当您有数十万用户每个选择多达 300 个选项时，它*几乎*似乎效率低下，这将创建一个行数等于乘积的表那两个。而 1) 将仅包含与用户数相等的行数。

也就是说，我倾向于 2)，因为它对数据库来说更自然，但我只是想确保它是正确的选项，并且没有更有效的方法可以做到这一点，因为我不希望我的网站变慢因为它变得越来越大而下降。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:11:39.557

SQL 在处理数据行方面非常有效，在查询一列中的数据方面效率要低得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:12:33.987

如果从内存/磁盘的角度来看，由于 #1 的人口稀少，正确索引 #2 会更好。此外，每个用户 1 或 300 行对于您在对数时间内执行搜索的索引查找来说意义不大。

# java - 在 android 的 TwoLineListView 中打印

> ID：11721209
> 
> 赞同：0
> 
> 时间：2012-07-30T12:06:53.690
> 
> 标签：java, android, textview

我想知道是否可以像在 TextEdit 中一样在 TwoLineListView 中打印？例如，如果我想在 line1 中打印一些单词并在 line2 中打印？有没有类似 twolinedtextview.add("word,"translation"); 的东西？当我按下按钮时，我需要我的文本出现在列表视图中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:42:18.573

如果您不想扩展`ArrayAdapter`（如其他人建议的那样），您可以随时使用[SimpleAdapter](http://developer.android.com/reference/android/widget/SimpleAdapter.html)

这是关于将其用于 2 行列表的简短[教程。](http://tekeye.biz/2012/two-line-lists-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:20:48.160

您可以继承`ArrayAdapter`类、覆盖`getView()`并自己构建行。该`getView()`方法负责返回一个`View`，表示适配器数据中提供的位置的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:10:14.277

**1.**如果您使用`default ArrayAdapter`ListView，那么您只能使用**一个 TextView。**

**2.**但是你可以通过使用or ..**很好地做到这一点**`Custom adapter``BaseAdapter``ArrayAdapter`

**请参阅此链接以获取简单的教程：**

[http://techdroid.kbeanie.com/2009/07/custom-listview-for-android.html](http://techdroid.kbeanie.com/2009/07/custom-listview-for-android.html)

# php - 严格标准：不应静态调用非静态方法 STemplate::assign()

> ID：11721210
> 
> 赞同：2
> 
> 时间：2012-07-30T12:06:58.620
> 
> 标签：php, xampp, smarty

我将我的旧 xampp (1.7.3) localhost 服务器升级到 1.8.0 。现在，在我的所有页面中无法使用 smarty 模板引擎（2.6.6），我看到了`Strict Standards`错误。什么问题？如何解决这个问题？

`NOTE : This Wroked Fine In Old Xampp(1.7.3).`

错误部分：

```
Strict Standards: Non-static method STemplate::assign() should not be called statically in C:\xampp\htdocs\tube\include\config.php on line 88

Strict Standards: Non-static method STemplate::create() should not be called statically in C:\xampp\htdocs\tube\libraries\mysmarty.class.php on line 42

Strict Standards: Non-static method STemplate::setCompileDir() should not be called statically in C:\xampp\htdocs\tube\include\config.php on line 181

Strict Standards: Non-static method STemplate::setTplDir() should not be called statically in C:\xampp\htdocs\tube\include\config.php on line 182 
```

我的配置行错误：

```
STemplate::assign($field, $config[$field]); // line 88
STemplate::setCompileDir($config['basedir']."/temporary"); // line 181
STemplate::setTplDir($config['basedir']."/themes"); // line 182 
```

my.Smarty.class.php（错误行 2）

```
function assign($var, $value) {
        global $Smarty;
        if (!isset($Smarty)) {
            STemplate::create(); // <---- line 42
        }
        $Smarty->assign($var, $value);
    } 
```

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:09:46.947

这是因为您使用的是现代版本的 PHP 和`strict standards`. 您可以通过声明使代码工作：

```
public static function assign($var, $value) 
```

但是，从其他错误来看，您会遇到很多问题。您可以尝试禁用严格的标准，但最好升级到现代版本的[`Smarty`](http://www.smarty.net/).

# asp.net-mvc-3 - Post Actions 中的 URL 路由无法正常工作

> ID：11721212
> 
> 赞同：0
> 
> 时间：2012-07-30T12:07:03.973
> 
> 标签：asp.net-mvc-3, url-routing

在我的应用程序中，我有一个区域（XYZ），其中有一个控制器（XYZController）和该区域内的一堆其他控制器。XYZController 具有索引、查看、创建、编辑等一般操作。与某些特定功能相关的更具体的操作在相应的控制器中相应排列。

为了避免 URL 具有如下结构：app/XYZ(area)/XYZ(Controller)/Create，我在 Area 路由注册文件中添加了如下路由。

```
context.MapRoute(
                  "XYZ_AreaDefaultControllerActions",
                  "XYZ/{action}/{id}",
                  new { controller = "XYZ", id = UrlParameter.Optional },
                  new { controller = "XYZ" },
                  new string[] { "App.Web.Areas.XYZ.Controllers.*" } 
              );

context.MapRoute(
                "XYZ_default",
                "XYZ/{controller}/{action}/{id}",
                new { controller = "XYZ", action = "Index", id = UrlParameter.Optional}
        ); 
```

此映射将 url:app/XYZ/Create 路由到 area = XYZ、Controller = XYZ 和 Action = Create，这是正确的，也是我想要做的，但会弄乱其他一些 Post 操作的路由。

考虑到这一点，我有另一个名为 Notes 控制器的控制器，它有一些 Post 操作。

当请求是 HTTP Get 并且路由调试器的输出显示第二个路由定义匹配而第一个不匹配时，URL 为 /app/XYZ/Notes/List/id 的操作被正确路由。

当我使用带有 url /App/XYZ/Notes/AddNote 的操作 AddNote 向同一个控制器发布帖子时，第一个路由定义根据路由调试器匹配，因此找不到该操作，因为它需要 Controller = XYZ, Action = 注释，ID = 添加注释。这是路由调试器的输出：

比赛 | 网址 | 默认值 | 约束

1.  真 | XYZ/{action}/{id} | 控制器 = XYZ，ID = | 控制器 = XYZ

2.  真 | XYZ/{控制器}/{动作}/{id} | 控制器 = XYZ，动作 = 索引，id = |(null)

问题是，在 Post 的情况下，第一条路线的约束似乎对它的限制不够，而在 Get 它应用了约束。

有什么建议吗？这里出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:03:10.903

如果您的 XYZController 没有任何 POST 操作，您可以添加这样的约束以防止 POST 请求匹配您的第一个路由：

```
context.MapRoute("XYZ_AreaDefaultControllerActions",
    "XYZ/{action}/{id}",
    new { controller = "XYZ", id = UrlParameter.Optional },
    new { controller = "XYZ", httpMethod = new HttpMethodConstraint("GET") },
    new string[] { "App.Web.Areas.XYZ.Controllers.*" }
); 
```

**更新**

由于您在 XYZController 中有发布操作，就像您提到的那样，上述路由约束对您不起作用。

这里的问题是您有一个与您所在区域同名的控制器。这就是为什么 MVC 将第一个路由匹配到您的 notes 控制器 POST 操作，因为它只是尝试根据**传入**的URL 匹配令牌：

*   /XYZ - 从字面上匹配您的第一条路线的第一段
*   /Notes - 这将被填充到您的 {action} 段中
*   /AddNote - 这将被填充到您的 {id} 段中

给定您的第一个路由，`{ controller = "XYZ" }`约束没有任何区别，因为 MVC 正在尝试将入站 URL 路由到控制器 + 操作 + 参数。MVC 不知道它来自哪个控制器，它试图匹配将处理 URL 请求的控制器和操作。

一种解决方案是向您的第一条路线添加动作约束，但这仅在 XYZController 中的动作名称与您的笔记控制器中的任何 POST 动作名称不匹配时才有效：

```
new { controller = "XYZ", action = "XYZAction1|XYZAction2|XYZActionN" }, 
```

对于传入路由，仅当操作是约束中的管道分隔名称之一时，它才会匹配第一个路由。

另一种选择是[使用 regex 限制您的 {id} 路线段](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-route-constraint-cs)。如果您的 id 是字符串，这可能不是一个选项。但是，如果您的 id 始终是数字，您可以将第一条路由限制为仅在它们为数字时将路由段与 {id} 标记匹配。这样，“AddNote”将不匹配您的第一条路线的 {id} 段，因为它不是数字：

```
new { controller = "XYZ", id = @"\d+" }, 
```

要回答您的第二条评论，这适用于 GET 的原因是因为您的第二条路线有一个额外的路线段。带有 id 的 GETS 与第一条路线不匹配，因为它们有 4 个令牌，而不是 3 个。

# sql - 如何在子查询中使用 FOR XML？

> ID：11721213
> 
> 赞同：6
> 
> 时间：2012-07-30T12:07:03.717
> 
> 标签：sql, sql-server, xml, for-xml

我想返回以下 xml：

```
<ResultDetails>
<Node1>hello</Node1>
<Sites>
<Site><SiteId>1</SiteId></Site>
<Site><SiteId>2</SiteId></Site>
</Sites>
</ResultDetails> 
```

我写了下面的代码但不起作用：

```
SELECT 'hello' AS Node1,    
    (SELECT TOP 2 SiteId
     FROM [dbo].[Sites]
       FOR XML PATH('Site')) AS Sites
FOR XML PATH('ResultDetails') 
```

但它返回：

```
<ResultDetails>
  <row>
    <Node1>hello</Node1>
    <Sites>&lt;Site&gt;&lt;siteId&gt;102&lt;/siteId&gt;&lt;/Site&gt;&lt;Site&gt;&lt;siteId&gt;1&lt;/siteId&gt;&lt;/Site&gt;</Sites>
  </row>
</ResultDetails> 
```

我应该写什么sql？

谢谢，

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-30T12:10:53.453

您需要将`TYPE`修饰符添加到您的内部查询：

```
SELECT
    'hello' AS Node1
    , (
        SELECT TOP 2 SiteId 
            FROM [dbo].[Sites] 
        FOR XML PATH('Site'), TYPE
    ) AS Sites 
FOR XML PATH('ResultDetails') 
```

# java - 如何在 Play 中获取客户端的 IP 地址！框架2.0？

> ID：11721215
> 
> 赞同：15
> 
> 时间：2012-07-30T12:07:07.450
> 
> 标签：java, playframework, playframework-2.0

> **可能重复：**
> [如何获取客户端 IP？](https://stackoverflow.com/questions/9711793/how-to-get-the-client-ip)

如何在Play中获取客户端的IP！框架2.0？是否在 Play 中实现了某些功能？任何帮助，建议？我正在用 Java 编写应用程序。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-30T12:33:47.433

[在 Play 2.0 的操作中，您可以从Http.RequestHeader](http://www.playframework.org/documentation/api/2.0.2/java/play/mvc/Http.RequestHeader.html)获取大量数据，可以这样获取：

```
public static Result index() {
    String remote = request().remoteAddress();
    return ok(remote);
} 
```

# c# - 如何将图片和文字保存为jpeg

> ID：11721217
> 
> 赞同：1
> 
> 时间：2012-07-30T12:07:16.497
> 
> 标签：c#, asp.net, c#-4.0, c#-3.0

当我按下保存按钮时，我只能以 JPEG 格式保存文本而不是图像。

**html:**

```
 <div id="painter" runat="server" style="left: 280px; position: absolute; top: 82px;
    width: 311px; height: 388px; background-color: #ccccff;">
    hi niladri
    <br />
    helo
    <br />
    dvshfgjfhglkglkhjlhkjmlkhklfhfg sasasasa
    <br />
    sssdsdsds

    <img src="image/1.jpg" alt="Osr" height="100" width="309" />
            </div>

<asp:Button ID="Save" runat="server" Style="left: 733px; position: absolute; top: 266px"
    Text="Button" OnClick="Save_Click" /> 
```

**C#代码：**

```
 public partial class _Default : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{

}
protected void Save_Click(object sender, EventArgs e)
{
          string[] value = painter.Style.Value.Split(';');
    string hw = painter.InnerHtml;
    hw = hw.Replace("<br />", Environment.NewLine);

    string width = value[3];
    string height = value[4];
    string bgcolor = value[5];

    string[] widthArray = width.Split(':');
    string[] heightArray = height.Split(':');
    string[] bgcolorArray = bgcolor.Split(':');

    int w = int.Parse(widthArray[1].Replace("px", ""));
    int h = int.Parse(heightArray[1].Replace("px", ""));

    string color = bgcolorArray[1];

    //var overlay = new Bitmap(imagePath2);

    System.Drawing.Color c = System.Drawing.Color.Cyan;//.FromName("#ccccff");

    System.Drawing.Bitmap bt = new System.Drawing.Bitmap(w, h);
    System.Drawing.Graphics oGraphics = System.Drawing.Graphics.FromImage(bt);
    System.Drawing.Brush brush = new System.Drawing.SolidBrush(c);
    oGraphics.FillRectangle(brush, 0, 0, w, h);
    oGraphics.DrawString(hw, new Font("Arial", 12, FontStyle.Italic), SystemBrushes.WindowText, new PointF(50, 50));

    bt.Save("E:\\image10.jpg", System.Drawing.Imaging.ImageFormat.Jpeg);  

 }
 } 
```

**图片：**

![](../Images/a633d3b4b3cfdfcb6a4d3fcd2db7f8cd.png)

这里附上的jpeg图片，我们保存成jpeg格式时，只得到html图片来源信息，而不是原始图片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:28:49.423

**你好*问***

**使用这些代码：**

```
protected void Save_Click(object sender, EventArgs e)
{
        string[] value = painter.Style.Value.Split(';');
        string hw = painter.InnerHtml;
        hw = hw.Replace("<br />", Environment.NewLine);

        string width = value[3];
        string height = value[4];
        string bgcolor = value[5];

        string[] widthArray = width.Split(':');
        string[] heightArray = height.Split(':');
        string[] bgcolorArray = bgcolor.Split(':');

        int w = int.Parse(widthArray[1].Replace("px", ""));
        int h = int.Parse(heightArray[1].Replace("px", ""));
        //=====================================================================
        //Added By RAM:
        string key = "src=";
        int start_of_img_address = hw.IndexOf(key) + key.Length+1;
        int end_of_img_address = hw.Substring(start_of_img_address + 1).IndexOf('"');
        string image_addres = hw.Substring(start_of_img_address, end_of_img_address+1);
        image_addres = Server.MapPath(image_addres);
        Image my_img = Image.FromFile(image_addres);

        key = "<img";
        int start_of_img_tag = hw.IndexOf(key);
        int end_of_img_tag = hw.Substring(start_of_img_tag).IndexOf('>')+1;
        string img_tag = hw.Substring(start_of_img_tag, end_of_img_tag+1);
        hw=hw.Remove(start_of_img_tag, end_of_img_tag);
        Response.Write(img_tag);

        //=====================================================================
        string color = bgcolorArray[1];

        //var overlay = new Bitmap(imagePath2);

        System.Drawing.Color c = System.Drawing.Color.Cyan; //.FromName("#ccccff");

        System.Drawing.Bitmap bt = new System.Drawing.Bitmap(w, h);
        System.Drawing.Graphics oGraphics = System.Drawing.Graphics.FromImage(bt);
        System.Drawing.Brush brush = new System.Drawing.SolidBrush(c);
        oGraphics.FillRectangle(brush, 0, 0, w, h);
        oGraphics.DrawString(hw, new Font("Arial", 12, FontStyle.Italic), SystemBrushes.WindowText, new PointF(0, 0)); //changed 50 to 0

        //=====================================================================
        //Added By RAM:
        oGraphics.DrawImage(my_img, 0, 170, my_img.Width, my_img.Height);
        //=====================================================================

        bt.Save("E:\\image10.jpg", System.Drawing.Imaging.ImageFormat.Jpeg);
} 
```

**...和结果：**

![在此处输入图像描述](../Images/fe0cec08ecdf435ce7d724049209fe0d.png)

**编辑：**

您也可以使用**正则表达式**代替**Substring、IndexOf**和...

正则表达式 (RegEx) 帮助您获得：

*   标签
*   风格
*   以及您想要从内容中获得的一切

所以，阅读正则表达式教程

*   [书](http://oreilly.com/windows/archive/csharp-regular-expressions.html)
*   [30 分钟正则表达式教程](http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial)
*   [例子](http://www.pagecolumn.com/tool/regtest.htm?rp=%3C%5Cs*%5Cw*%5Cs*style%5Cs*=%5Cs*%22?%5Cs*%28%5B%5Cw%5Cs%25#%5C/%5C.;:_-%5D*%29%5Cs*%22?.*?%3E&rf=g&me=0&ts=%3Cdiv%3ERam:%20%3Cimg%20style=%22height:100px;%20width:200px;%22%20src=%22img.jpg%22%3E%3C/div%3E)

您必须使用自己的计算来安排最终图像的内容。祝你好运...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:44:56.037

您只获得 div 的 InnerHTML（只会获得文本），因此 IMG 标记将被忽略。如果要在 Web 源中指定图像的路径，可以使用服务器控件 (Image) 并从中获取图像路径。在后面的代码中加载图像并将其绘制到您的 Bitmap 对象，然后覆盖文本并保存。

```
int w = 640;
int h = 480;

System.Drawing.Color c = System.Drawing.Color.White;

string imagePath = Server.MapPath("~/image/1.jpg"); // here you would get the image source of your Image control
Image img = Image.FromFile(imagePath);

System.Drawing.Bitmap bt = new System.Drawing.Bitmap(w, h);
System.Drawing.Graphics oGraphics = System.Drawing.Graphics.FromImage(bt);
System.Drawing.Brush brush = new System.Drawing.SolidBrush(c);
oGraphics.FillRectangle(brush, 0, 0, w, h);
oGraphics.DrawImage(img, 0, 0, img.Width, img.Height);
oGraphics.DrawString("this is some text", new Font("Arial", 12, FontStyle.Italic), SystemBrushes.WindowText, new PointF(50, 50));

bt.Save("c:\\image10.jpg", System.Drawing.Imaging.ImageFormat.Jpeg); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:45:22.270

在调用 DrawString 之前使用 Graphics.DrawImage。

```
Graphics.DrawImage(Image.FromFile(Server.MapPath("~/image/1.jpg")), 0, 0, w, h); 
```

Graphics.DrawImage：http: [//msdn.microsoft.com/en-us/library/dbsak4dc.aspx](http://msdn.microsoft.com/en-us/library/dbsak4dc.aspx)

# git - 选择提交以发送拉取请求

> ID：11721219
> 
> 赞同：13
> 
> 时间：2012-07-30T12:07:26.503
> 
> 标签：git, github, pull-request

我在 GitHub 上创建了一个项目。作为一个纯 Java 源代码，我必须先对其进行调整以将其转换为 Eclipse 项目，然后再进行处理。我做了 3 次提交来反映这些变化。

然后我完成了对实际程序的调整，我想向开发人员发送一个拉取请求，请求这些更改。

我的提交历史如下：

*   提交 #1、#3 和 #4 是基于 eclipse 的，*不应*发送。
*   #2、#5、#6、#7 和 #8 与源相关，*应*发送。

如何发送省略 #1、#3 和 #4 的拉取请求？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-30T12:11:12.673

您应该为这些特性中的每一个都有一个单独的开发分支——“eclipse 项目”和“特性实现”。然后将“功能实现”的拉取请求发送回源。

由于您还没有这样做，您可以`feature`从您克隆并`cherry-pick`提交 2、5、6、7 和 8 的点剪切一个调用的分支。然后为此分支发送拉取请求。

# java - 将主题部署到 liferay 门户时发生错误。“找不到指定主题 ID 的主题。”

> ID：11721220
> 
> 赞同：1
> 
> 时间：2012-07-30T12:07:36.360
> 
> 标签：java, deployment, themes, liferay-6

我根据liferay教程创建了示例主题，即custom.css，不知道为什么我的主题没有部署，在日志文件中是下一个内容：“找不到指定主题id的主题。返回默认主题。” 在“管理->页面->外观”的主题中没有我的主题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:36:48.537

当您已将主题应用到站点（社区）但该主题当前未部署时，将显示此警告消息。这可能是由于您最近对主题所做的更改而发生的。请尝试恢复您所做的更改，并确保您的主题在部署时成功注册。

如果问题仍然存在，请让我们知道错误日志声明或您对主题所做的确切更改。

* * *

我认为您的主题正在部署到 glassfish，但没有注册到 Liferay。

可能是您的部署过程中存在问题，您能否在您的 portal-ext.properties 文件中相应地设置这些属性

```
'
#
# Set this to true to enable auto deploy of layout templates, portlets, and
# themes.
#
auto.deploy.enabled=true

#
# Set the directory to scan for layout templates, portlets, and themes to
# auto deploy.
#
auto.deploy.deploy.dir=${liferay.home}/deploy

#
# Set the directory where auto deployed WARs are copied to. The application
# server or servlet container must know to listen on that directory.
# Different containers have different hot deploy paths. For example, Tomcat
# listens on "${catalina.base}/webapps" whereas JBoss listens on
# "${jboss.server.home.dir}/deploy". Set a blank directory to automatically
# use the application server specific directory.
#
auto.deploy.dest.dir=
auto.deploy.default.dest.dir=../webapps
auto.deploy.geronimo.dest.dir=${org.apache.geronimo.home.dir}/deploy
auto.deploy.glassfish.dest.dir=${com.sun.aas.instanceRoot}/autodeploy
auto.deploy.jboss.dest.dir=${jboss.server.home.dir}/deploy
auto.deploy.jetty.dest.dir=${jetty.home}/webapps
auto.deploy.jonas.dest.dir=${jonas.base}/deploy
auto.deploy.resin.dest.dir=${resin.home}/webapps
auto.deploy.tomcat.dest.dir=${catalina.base}/webapps
auto.deploy.weblogic.dest.dir=${env.DOMAIN_HOME}/autodeploy 
```

'

配置此特定于 glassfish 后，您应该会看到日志消息说

1 mytheme 的主题注册成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:04:35.117

如果您正在使用 DEV/QA 环境，请更新 portal-ext.properties 文件：

**包含并覆盖=portal-developer.properties**

如果这是在 Staging/Production 上，只需在部署更新版本之前尝试从服务器上的**YourThemeName/目录中删除****/css**文件夹。

# c# - winforms 中基于非 ActiveX 的 Webview 控件

> ID：11721223
> 
> 赞同：0
> 
> 时间：2012-07-30T12:07:42.513
> 
> 标签：c#, .net, winforms

我正在.NET 2.0 中构建一个 winform 应用程序（不能使用 WPF）。带有 Webview 控件。因为应用程序是多线程的，并且 webview 控件基于 ActiveX 组件，所以我无法通过 Timer 控件等多线程组件刷新 url (WebView.navigate)。非 ActiveX webview 控件还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:02:52.370

[http://webkitdotnet.sourceforge.net/](http://webkitdotnet.sourceforge.net/)

# emacs - emacs中的Shift箭头选择

> ID：11721224
> 
> 赞同：3
> 
> 时间：2012-07-30T12:07:52.620
> 
> 标签：emacs, elisp

我正在使用 GNU Emacs 23.2.1
我的 init.el

```
(cua-mode 1)               
(transient-mark-mode 1)    
(setq shift-select-mode t) 
(global-linum-mode 1)      
(show-paren-mode 1)        
(desktop-save-mode 1) 
```

所以，而不是选择我在 Shift => 上得到 2C，在 Shift <= 上得到 2D，等等。如何解决这个问题？

PS
cat -v for Shift <=
^[[1;2D
cat -v for Shift =>
^[[1;2C

我如何将这些键正确映射到左移，右移对应？

PPS
对不起。我忘记了。我也在用屏幕。

```
den@playground:~/.emacs.den$ echo $TERM  
screen 
```

解决方案：

```
(define-key input-decode-map "\e[1;2D" [S-left])  
(define-key input-decode-map "\e[1;2C" [S-right])  
(define-key input-decode-map "\e[1;2B" [S-down])  
(define-key input-decode-map "\e[1;2A" [S-up])  
(define-key input-decode-map "\e[1;2F" [S-end])  
(define-key input-decode-map "\e[1;2H" [S-home]) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T15:20:15.187

这意味着 emacs 和您的终端不同意各种密钥代码的含义。有更高级的方法来配置终端（终端特定文件），但为了让您开始，请尝试在您的 emacs 初始化文件中添加类似这样的内容：

```
(define-key input-decode-map "\e[1;2D" [S-left])
(define-key input-decode-map "\e[1;2C" [S-right]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T13:12:48.107

这通常发生在您在控制台中运行 emacs 时。尝试将 emacs 作为图形程序运行，这应该不是问题。

# knockout.js - 淘汰赛数据上下文

> ID：11721238
> 
> 赞同：0
> 
> 时间：2012-07-30T12:08:39.817
> 
> 标签：knockout.js

我正在玩 knockoutjs 和可绑定网格（KoGrid）。Js contextMenu 附加到每一行。当我右键单击一行时，我想获取该行后面的数据（datacontext）。我怎么能用knockoutjs做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:36:24.723

我认为您正在寻找 $data，这就是在进行 foreach/模板绑定等时代表实际数据元素的内容。

[https://stackoverflow.com/a/7839243](https://stackoverflow.com/a/7839243)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T00:34:44.633

利用

```
<table data-bind="event:{contextmenu: myFunctionName}, 
template:{ name: function()   {return selectedView(); }, foreach: articles }">

</table> 
```

在以下链接中了解有关定义和使用“模板”的其余信息

[http://jsfiddle.net/rniemeyer/Ujr4z/](http://jsfiddle.net/rniemeyer/Ujr4z/)

我希望它可以帮助

# javascript - 如何在运行时（或动态）更改画布高度宽度

> ID：11721239
> 
> 赞同：1
> 
> 时间：2012-07-30T12:08:42.563
> 
> 标签：javascript, html, canvas

我正在使用 HTML5 和 javascript。每当我绘制任何形状时，我都会制作画布。

我有一个正在显示文档的画布。如果我正在绘制矩形，那么我将添加一个不同的画布（作为要求）。

```
var canvas= document.createElement('canvas');
canvas.style.position = "absolute";
canvas.id=this.annotationID;

canvas.style.left=""+this.x+"px";
canvas.style.top=""+this.y+"px";
canvas.height=this.h;
canvas.width=this.w;

document.getElementById("mainDIV").appendChild(canvas);

 var ctx = canvas.getContext("2d");
 ctx.strokeStyle='black';
 ctx.lineWidth=4;
 ctx.strokeRect(0,0,this.w,this.h); 
```

通过使用上面的代码。我在做画布。

现在如果我要调整这个画布的大小。它没有调整大小。我可以改变它的位置，但高度和宽度没有更新。我使用以下方式：-

```
 selectedAnnCanvas.style.left=currentAnnLeft+"px";
 selectedAnnCanvas.style.top=currentAnnTop+"px";
 selectedAnnCanvas.setAttribute('width', currenAnnWidth);
 selectedAnnCanvas.setAttribute('height', currentAnnHeight); 
```

提前非常感谢。

**编辑------调整画布代码**

这里我正在绘制 8 个选择点来调整大小，移动形状。以下是8个案例：-

```
if (isResizeDrag) {

    var annLeft=selectedAnnCanvas.style.left;
    annLeft=annLeft.substring(0, annLeft.length - 2);

    var annTop=selectedAnnCanvas.style.top;
    annTop=annTop.substring(0,annTop.length - 2);

    var annWidth=selectedAnnCanvas.width;

    var annHeight=selectedAnnCanvas.height;

    var oldx = annLeft;
    var oldy = annTop;

    var POS=getMousePos(canvas,e);
    mx=POS.x;
    my=POS.y;

//      alert('rdy');
    switch (expectResize) {
    case 0:
        if((annLeft+annWidth>mx) && (annTop+annHeight>my))
        {
            annLeft = mx;
            annTop = my;
            annWidth += oldx - mx;
            annHeight += oldy - my;

            selectedAnnCanvas.style.left=annLeft+"px";
            selectedAnnCanvas.style.top=annTop+"px";

            selectedAnnCanvas.setAttribute('width', annWidth);
            selectedAnnCanvas.setAttribute('height', annHeight);

        }
        break;
      case 1:
          if((annLeft+annWidth>mx) && (annTop+annHeight>my))
          {
              annTop = my;
              annHeight += oldy - my;

              selectedAnnCanvas.style.top=""+annLeft+"px";
              selectedAnnCanvas.height=annHeight;

          }
        break;
      case 2:
          if((annLeft<mx) && (annHeight+annTop>my))
          {
              annHeight = my;
              annWidth = mx - oldx;
              annHeight += oldy - my;

              selectedAnnCanvas.width=annWidth;
              selectedAnnCanvas.height=annHeight;
          }
          break;
      case 3:
          if((annLeft+annWidth>mx))
          {
              annLeft = mx;
              annWidth+= oldx - mx;

              selectedAnnCanvas.style.left=""+annLeft+"px";
              selectedAnnCanvas.width=annWidth;
          }
        break;
      case 4:
          if((annLeft<mx))
          {
              annWidth = mx - oldx;
              selectedAnnCanvas.width=annWidth;
          }
        break;
      case 5:
          if((annLeft+annWidth>mx) && (annTop<my))
          {
              annLeft = mx;
              annWidth += oldx - mx;
              annHeight = my - oldy;

              selectedAnnCanvas.style.left=""+annLeft+"px";
              selectedAnnCanvas.width=annWidth;
              selectedAnnCanvas.height=annHeight;
          }
        break;
      case 6:
          if((annTop<my))
          {
              annHeight = my - oldy;

              selectedAnnCanvas.height=annHeight;
          }
        break;
      case 7:
          if(annLeft<mx && annTop<my)
          {
              annWidth = mx - oldx;
              annHeight = my - oldy;

              selectedAnnCanvas.width=annWidth;
              selectedAnnCanvas.height=annHeight;
          }
        break;
    }
    invalidate();
  } 
```

# jquery - 手风琴的自动宽度

> ID：11721242
> 
> 赞同：0
> 
> 时间：2012-07-30T12:08:57.060
> 
> 标签：jquery, css, width, accordion

这是我用于水平手风琴的 jquery 代码。一切正常，但在这段代码中的某处，主 div 宽度固定为 100%（我希望这是自动宽度）。你能确定吗？

```
(function(jQuery) {
    $('#accordion-1').easyAccordion({ 
        autoStart: false, 
        slideInterval: 3000
    jQuery.fn.easyAccordion = function(options) {

    var defaults = {            
        slideNum: false,
        autoStart: false,
        slideInterval: 3000
    };

    this.each(function() {

        var settings = jQuery.extend(defaults, options);        
        jQuery(this).find('dl').addClass('easy-accordion');

        // -------- Set the variables ------------------------------------------------------------------------------

        jQuery.fn.setVariables = function() {
            dlWidth = jQuery(this).width();
            dlHeight = jQuery(this).height();
            dtWidth = jQuery(this).find('dt').outerHeight();
            if (jQuery.browser.msie){ dtWidth = $(this).find('dt').outerWidth();}
            dtHeight = dlHeight - (jQuery(this).find('dt').outerWidth()-jQuery(this).find('dt').width());
            slideTotal = jQuery(this).find('dt').size();
            ddWidth = dlWidth - (dtWidth*slideTotal) - (jQuery(this).find('dd').outerWidth(true)-jQuery(this).find('dd').width());
            ddHeight = dlHeight - (jQuery(this).find('dd').outerHeight(true)-jQuery(this).find('dd').height());
        };
        jQuery(this).setVariables();

        // -------- Fix some weird cross-browser issues due to the CSS rotation -------------------------------------

        if (jQuery.browser.safari){ var dtTop = (dlHeight-dtWidth)/2; var dtOffset = -dtTop;  /* Safari and Chrome */ }
        if (jQuery.browser.mozilla){ var dtTop = dlHeight - 20; var dtOffset = - 20; /* FF */ }
        if (jQuery.browser.msie){ var dtTop = 0; var dtOffset = 0; /* IE */ }

        // -------- Getting things ready ------------------------------------------------------------------------------

        var f = 1;
        jQuery(this).find('dt').each(function(){
            jQuery(this).css({'width':dtHeight,'top':dtTop,'margin-left':dtOffset});    
            if(settings.slideNum == true){
                jQuery('<span class="slide-number">'+0+f+'</span>').appendTo(this);
                if(jQuery.browser.msie){    
                    var slideNumLeft = parseInt(jQuery(this).find('.slide-number').css('left')) - 14;
                    jQuery(this).find('.slide-number').css({'left': slideNumLeft})
                    if(jQuery.browser.version == 6.0 || jQuery.browser.version == 7.0){
                        jQuery(this).find('.slide-number').css({'bottom':'auto'});
                    }
                    if(jQuery.browser.version == 8.0){
                    var slideNumTop = jQuery(this).find('.slide-number').css('bottom');
                    var slideNumTopVal = parseInt(slideNumTop) + parseInt(jQuery(this).css('padding-top'))  - 12; 
                    jQuery(this).find('.slide-number').css({'bottom': slideNumTopVal}); 
                    }
                } else {
                    var slideNumTop = jQuery(this).find('.slide-number').css('bottom');
                    var slideNumTopVal = parseInt(slideNumTop) + parseInt(jQuery(this).css('padding-top')); 
                    jQuery(this).find('.slide-number').css({'bottom': slideNumTopVal}); 
                }
            }
            f = f + 1;
        });

        if(jQuery(this).find('.active').size()) { 
            jQuery(this).find('.active').next('dd').addClass('active');
        } else {
            jQuery(this).find('dt:first').addClass('active').next('dd').addClass('active');
        }

        jQuery(this).find('dt:first').css({'left':'0'}).next().css({'left':dtWidth});
        jQuery(this).find('dd').css({'height':ddHeight});    

        // -------- Functions ------------------------------------------------------------------------------

        jQuery.fn.findActiveSlide = function() {
                var i = 1;
                this.find('dt').each(function(){
                if(jQuery(this).hasClass('active')){
                    activeID = i; // Active slide
                } else if (jQuery(this).hasClass('no-more-active')){
                    noMoreActiveID = i; // No more active slide
                }
                i = i + 1;
            });
        };

        jQuery.fn.calculateSlidePos = function() {
            var u = 2;
            jQuery(this).find('dt').not(':first').each(function(){    
                var activeDtPos = dtWidth*activeID;
                if(u <= activeID){
                    var leftDtPos = dtWidth*(u-1);
                    jQuery(this).animate({'left': leftDtPos});
                    if(u < activeID){ // If the item sits to the left of the active element
                        jQuery(this).next().css({'left':leftDtPos+dtWidth});    
                    } else{ // If the item is the active one
                        jQuery(this).next().animate({'left':activeDtPos});
                    }
                } else {
                    var rightDtPos = dlWidth-(dtWidth*(slideTotal-u+1));
                    jQuery(this).animate({'left': rightDtPos});
                    var rightDdPos = rightDtPos+dtWidth;
                    jQuery(this).next().animate({'left':rightDdPos});    
                }
                u = u+ 1;
            });

        };

        jQuery.fn.activateSlide = function() {
            this.parent('dl').setVariables();    
            this.parent('dl').find('dd').css({'display':'block'});
            this.parent('dl').find('dd.plus').removeClass('plus');
            this.parent('dl').find('.no-more-active').removeClass('no-more-active');
            this.parent('dl').find('.active').removeClass('active').addClass('no-more-active');
            this.addClass('active').next().addClass('active');    
            this.parent('dl').findActiveSlide();
            if(activeID < noMoreActiveID){
                this.parent('dl').find('dd.no-more-active').addClass('plus');
            }
            this.parent('dl').calculateSlidePos();    
        };

        jQuery.fn.rotateSlides = function(slideInterval, timerInstance) {
            var accordianInstance = jQuery(this);
            timerInstance.value = setTimeout(function(){accordianInstance.rotateSlides(slideInterval, timerInstance);}, slideInterval);
            jQuery(this).findActiveSlide();
            var totalSlides = jQuery(this).find('dt').size();
            var activeSlide = activeID;
            var newSlide = activeSlide + 1;
            if (newSlide > totalSlides) newSlide = 1;
            jQuery(this).find('dt:eq(' + (newSlide-1) + ')').activateSlide(); // activate the new slide
        }

        // -------- Let's do it! ------------------------------------------------------------------------------

        function trackerObject() {this.value = null}
        var timerInstance = new trackerObject();

        jQuery(this).findActiveSlide();
        jQuery(this).calculateSlidePos();

        if (settings.autoStart == true){
            var accordianInstance = jQuery(this);
            var interval = parseInt(settings.slideInterval);
            timerInstance.value = setTimeout(function(){
                accordianInstance.rotateSlides(interval, timerInstance);
                }, interval);
        } 

        jQuery(this).find('dt').not('active').click(function(){        
            jQuery(this).activateSlide();
            clearTimeout(timerInstance.value);
        });    

        if (!(jQuery.browser.msie && jQuery.browser.version == 6.0)){ 
            jQuery('dt').hover(function(){
                jQuery(this).addClass('hover');
            }, function(){
                jQuery(this).removeClass('hover');
            });
        }
    });
    };
})(jQuery);​ 
```

这是html

```
 <div id="accordion-1">
                <dl>
                    <dt>First slide</dt>
                    <dd><h2>This is the first slide</h2><p></dd>
                    <dt>Second slide</dt>
                    <dd><h2>Here is the second slide</h2></dd>
                    <dt>One more slide</dt>
                    <dd><h2>One more slide to go here</h2><p></dd>
                    <dt>Another slide</dt>
                    <dd><h2>Another slide to go here</h2><p></dd>                                   
              </dl>
</div> 
```

CSS

```
.easy-accordion{display:block;position:relative;overflow:hidden;padding:0;margin:0; width:auto}
.easy-accordion dt,.easy-accordion dd{margin:0;padding:0}
.easy-accordion dt,.easy-accordion dd{position:absolute}
.easy-accordion dt{margin-bottom:0;margin-left:0;z-index:5;/* Safari */ -webkit-transform: rotate(-90deg); /* Firefox */ -moz-transform: rotate(-90deg);-moz-transform-origin: 20px 0px;  /* Internet Explorer */ filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);cursor:pointer;}
.easy-accordion dd{z-index:1;opacity:0;overflow:hidden}
.easy-accordion dd.active{opacity:1;}
.easy-accordion dd.no-more-active{z-index:2;opacity:1}
.easy-accordion dd.active{z-index:3}
.easy-accordion dd.plus{z-index:4}
.easy-accordion .slide-number{position:absolute;bottom:0;left:10px;font-weight:normal;font-size:1.1em;/* Safari */ -webkit-transform: rotate(90deg); /* Firefox */ -moz-transform: rotate(90deg);  /* Internet Explorer */ filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1);}

#accordion-1{ height:110px; background:#bababa; border-radius:8px; width:auto}
    #accordion-1 dl{height:110px; width:auto}   
    #accordion-1 dt{  text-align:left;padding:8px 15px 8px 10px;
    font:bold 12px Myriad Pro, Verdana, Geneva, sans-serif; color:#2c3e52;
    background-color: #B3B3B3;
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#BEBEBE), to(#B3B3B3));
    background: -moz-linear-gradient(top, #BEBEBE 0%, #B3B3B3 100%);
    border-radius:8px;
     box-shadow: 0px -2px 3px #616161;  
    }
    #accordion-1 dt.active{cursor:pointer; background:#bababa}
    #accordion-1 dt.hover{background-color:#bababa}
    #accordion-1 dd{
        padding:15px; background-color:#f3f3f3; border-left:0; margin:5px 0px; border-radius:6px 0px 0px 6px;
        -webkit-box-shadow: inset 0px 2px 2px #9b9b9b; box-shadow: inset 0px 2px 2px #9b9b9b; 

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:18:21.903

首先改变

```
(function(jQuery) { 
```

至

```
(function($) { 
```

这允许`$`在您的包装函数中使用。你应该使用`$`而不是`jQuery`.

对于您的问题：您的浏览器为 div 设置了 100%。div 总是扩展到你放置它们的元素的全宽。

旁注：使 div 100% 宽度与保留默认宽度有点不同。这可能会有点混乱，所以我不会详细说明。如果您想了解更多信息，请参阅：[http ://www.quirksmode.org/css/box.html](http://www.quirksmode.org/css/box.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T09:25:54.190

有点晚了，但你应该把你的手风琴 div 放在另一个 div 容器中，然后在这个容器上应用你的 css。

# uitableview - 如何从 Appdelegate 方法 applicationWillEnterForeground 重置 UISearch

> ID：11721244
> 
> 赞同：0
> 
> 时间：2012-07-30T12:09:02.597
> 
> 标签：uitableview, uisearchbardelegate, appdelegate

当应用程序进入后台或再次进入前台时，我想重置我的 UISearch。当 UISearch 中的 tableview 被隐藏时就足够了。

但是当我试图从 AppDelegate.m 中隐藏它时它不起作用。我还记录了 UIElements，还有（null）。

这是我尝试访问它的方法：

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{
XLog(@"");
/*
 Called as part of the transition from the background to the active state; here you can undo many of the changes made on entering the background.
 */

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    XLog(@"");
    searchViewController = [[SearchViewController alloc] initWithNibName:@"SearchViewController_iPad" bundle:[NSBundle mainBundle]];
} else {
    XLog(@"");
    searchViewController = [[SearchViewController alloc] initWithNibName:@"SearchViewController_iPhone" bundle:[NSBundle mainBundle]];
}

XLog(@"searchViewController.searchBar.text: %@", searchViewController.searchBar.text);
searchViewController.tableViewSearch.hidden = YES; // is (null)

XLog(@"searchViewController.tableViewSearch: %@", searchViewController.tableViewSearch); // is (null)

} 
```

我怎样才能访问它？我这里有什么问题，还是不允许通过 appdelegate.m 访问其他类的元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:21:35.740

```
NSArray *ary_navigationControllerViews = [[NSArray alloc] initWithArray:[self.navigationController viewControllers]];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"self.class.description == %@", [[SearchViewController class] description]];
NSArray *ary_viewController = [[NSArray alloc] initWithArray:[ary_navigationControllerViews filteredArrayUsingPredicate:predicate]];
if ([ary_viewController count] > 0) 
{
   SearchViewController *sVw =  (SearchViewController*) [ary_viewController objectAtIndex:0] ;
  sVw.tableViewSearch.hidden = YES;
} 
```

您正在初始化视图控制器的新实例，而不是您需要获取视图控制器的现有实例并隐藏您的视图。希望这可以帮助。

# android - 在 Android SDK 上查找包含西里尔字母的不区分大小写的电话名称

> ID：11721246
> 
> 赞同：1
> 
> 时间：2012-07-30T12:09:07.770
> 
> 标签：android

我正在尝试使用这个简单的查询来获取联系人列表，它可以完全忽略输入过滤器的情况，直到我尝试搜索包含西里尔字母的名称：

```
Cursor c = this.getContext().getContentResolver().query(Phone.CONTENT_URI,
            PHONE_PROJECTION, Phone.DISPLAY_NAME + " LIKE '%"+filter+"%'", null,     Phone.LAST_TIME_CONTACTED + " DESC"); 
```

问题是这段代码返回包含西里尔字母的名称仅用于完全匹配 - 所以它对西里尔字母区分大小写。我也想让搜索对西里尔字母不区分大小写。应用程序在最低 SDK 2.1 上运行

系统本身（在 4.0 ICS 上测试）能够在联系人列表中进行不区分大小写的搜索（默认系统应用程序 - 人员）。

感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-22T20:29:19.687

修复了你的代码，确保处理其余的我做了一个例子这是固定的代码：

```
 String name = "contact_name_to_search_for"
 Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI,
            null,"DISPLAY_NAME" + " LIKE '%"+name+"%'", null,
            ContactsContract.CommonDataKinds.Phone.LAST_TIME_CONTACTED + " DESC"); 
```

例如，这是我制作的完整处理代码

```
String name = "contact_name_to_search_for"
        ContentResolver cr = getContentResolver();
    Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI,
            null,"DISPLAY_NAME" + " LIKE '%"+name+"%'", null,
            ContactsContract.CommonDataKinds.Phone.LAST_TIME_CONTACTED + " DESC");
    if (cursor.moveToFirst()) {
        String contactId =
                cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID)).toLowerCase();
        Cursor phones = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,
                ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = " + contactId.toLowerCase(), null, null);
        while (phones.moveToNext()) {
            String number = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
            int type = phones.getInt(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE));
            switch (type) {
                case ContactsContract.CommonDataKinds.Phone.TYPE_HOME:
                    Toast.makeText(getApplicationContext(), number+" Home number",Toast.LENGTH_SHORT ).show();
                    break;
                case ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE:
                    Toast.makeText(getApplicationContext(), number+" Mobile number",Toast.LENGTH_SHORT ).show();
                    break;
                case ContactsContract.CommonDataKinds.Phone.TYPE_WORK:
                    Toast.makeText(getApplicationContext(), number+" Work number",Toast.LENGTH_SHORT ).show();
                    break;
            }
        }
        phones.close();
    }
    cursor.close(); 
```

# php - 无法让数组以 php 形式工作

> ID：11721250
> 
> 赞同：0
> 
> 时间：2012-07-30T12:09:30.190
> 
> 标签：php, arrays, forms, checkbox, confirmation

我对复选框有疑问以使其正常工作。如果没有选中任何复选框，则会给出错误消息，这很好用！还提交所有其他信息。

我现在只想让表单提交已签入确认电子邮件的复选框。我现在只得到：数组。

联系人.php

```
<?php
/* Set e-mail recipient */
$myemail  = "mukies@gmail.com";

/* Check all form inputs using check_input function */
$yourname = check_input($_POST['yourname'], "Vul uw naam in aub");

$email    = check_input($_POST['email']);
$telephone    = check_input($_POST['telephone']);
$comments = check_input($_POST['comments'], "Write your comments");

$formCampagne = check_input($_POST['formCampagne']);
foreach($formCampagne as $option) {
  print $option."\n";
}

/* If e-mail is not valid show error message */
if (!preg_match("/([\w\-]+\@[\w\-]+\.[\w\-]+)/", $email))
{
show_error("Dit e-mail adres is niet juist, voer een juist e-mailadres in.");
}
/* If telephone is not valid show error message */
if (!preg_match("/[0-9\(\)+.\- ]/s", $telephone))
{
show_error("Voer een juist telefoon nummer in");
}
/* If verification code is not valid show error message */

if (strtolower($_POST['code']) != 'mycode') {die('Voer aub de juiste code in, in     hoofdletters.');}

/* If no campaign mode is selected, show error message */
if(empty($formCampagne))
{
   show_error ("U heeft geen selectie gemaakt uit de campagne opties, selecteer minimaal een van de opties.");
}

/* Let's prepare the message for the e-mail */
$message = "Hi Rick,

Je hebt weer een offerte aanvraag ontvangen voor Limburg Media! :)

Name: $yourname
E-mail: $email
Telefoon: $telephone

Offerte aanvraag?    $formCampagne

Comments: $comments

End of message
";

/* Send the message using mail() function */
mail($myemail, $subject, $message);

/* Redirect visitor to the thank you page */
header('Location: thanks.htm');
exit();

/* Functions we used */
function check_input($data, $problem='')
{
$data = trim($data);
$data = stripslashes($data);
$data = htmlspecialchars($data);
if ($problem && strlen($data) == 0)
{
    show_error($problem);
}
return $data;
}

function show_error($myError)
{
?>
<html>
<body>

<b>Gelieve de onderstaande foutmelding door te nemen om uw gegevens correct aan te leveren:</b><br />
<?php echo $myError; ?>

</body>
</html>
<?php exit();}
?> } 
```

访问者填写表单的 Contact.htm：

```
<html>
<body>

<p>Benodigde velden zijn <b>vetgedrukt</b>.</p>

<form action="contact.php" method="post">
<p><b>Uw naam:</b> <input type="text" name="yourname" /><br />
<b>E-mail:</b> <input type="text" name="email" /></p>
<b>Telefoonnummer:</b> <input type="text" name="telephone" /></p>

<p>Welk soort campagne wilt u informatie over ?<br />
<input type="checkbox" name="formCampagne[]" value="sandwichborden driehoeksborden"   />sandwichborden / driehoeksborden<br />
<input type="checkbox" name="formCampagne[]" value="drukwerk banners"   />drukwerk / banners<br />
<input type="checkbox" name="formCampagne[]" value="evenementen outdoor"   />outdoor promotie / evenemente<br />
<input type="checkbox" name="formCampagne[]" value="internet website social media"  />internet / websites / social media  <br />
<input type="checkbox" name="formCampagne[]" value="artwork video"   />artwork / videopromotie    <br />
<input type="checkbox" name="formCampagne[]" value="promo gadgets sampling" />promoteams / gadgets / sampling    <br />
<input type="checkbox" name="formCampagne[]" value="mobiele reclame reclame frames"   /> mobiele reclame / reclame frames    <br />  </p>

<p><b>Your comments:</b><br />
<textarea name="comments" rows="10" cols="40"></textarea></p>
<p>Validatie code: <input type="text" name="code" /><br />
Vul de tekst <b>MYCODE</b> hierboven in.   </p>
<p><input type="submit" value="Send it!"></p>

</form>

</body>
</html> 
```

Thanks.htm 页面仅包含标准文本，说，嗯...谢谢。:)

有谁可以帮我离开这里吗？

编辑：

所以这将是正确的代码？：

```
if(isset($formCampagne)) {
echo ".implode(',', $formCampagne)."; // this is the output in the confirmation mail
} else {
echo "U heeft geen selectie gemaakt uit de campagne opties, selecteer minimaal een van de opties."; 
```

但是我把它放在哪里？在“Offerte aanvraag？”旁边，因为这会产生错误，因为我已经在 $message 字段中。抱歉，我还没有使用 isset 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:14:31.083

如果返回 false，您可以检查 isset($formCampagn)，这意味着未选中任何复选框，否则它将为您提供值数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:15:33.917

```
$message = "Hi Rick,

Je hebt weer een offerte aanvraag ontvangen voor Limburg Media! :)

Name: $yourname
E-mail: $email
Telefoon: $telephone

Offerte aanvraag?    $formCampagne

Comments: $comments

End of message
"; 
```

而不是 $formCampagne，你应该尝试这样的事情：

```
$message = "Hi Rick,

Je hebt weer een offerte aanvraag ontvangen voor Limburg Media! :)

Name: $yourname
E-mail: $email
Telefoon: $telephone

Offerte aanvraag?    ".implode(', ', $formCampagne)."

Comments: $comments

End of message
"; 
```

这应该给出一个以逗号分隔的所有选定复选框值的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:18:23.407

尝试更换

```
$message = "Hi Rick,

Je hebt weer een offerte aanvraag ontvangen voor Limburg Media! :)

Name: $yourname
E-mail: $email
Telefoon: $telephone

Offerte aanvraag?    $formCampagne

Comments: $comments

End of message
"; 
```

和：

```
$message = "Hi Rick,

Je hebt weer een offerte aanvraag ontvangen voor Limburg Media! :)

Name: $yourname
E-mail: $email
Telefoon: $telephone

Offerte aanvraag?    ".implode(',', $formCampagne)."

Comments: $comments

End of message
"; 
```

请注意，我已经用 , 更改了原文本**`$formCampagne`**，**`implode(',', $formCampagne)`**因为它实际上是一个数组，如果你想将它放在你的电子邮件消息中，你必须将它变成一个字符串。

另请注意，如果未选中任何复选框，`$formCampagne`则将是`NULL`，因此您还应该检查是否`isset($formCampagne)`

编辑：

在我的示例中，`$formCampagne`实际上应该是`$_POST['formCampagne']`，我必须承认我从未使用过该`check_input()`函数，并且并不真正知道它在数组上的行为。

您也可以尝试`var_dump()`两者的内容`$formCampagne`和`$_POST['formCampagne']`

# php - 如何在 php 和 javascript 中使用正则表达式检测空格分隔的单词（在全文搜索查询中）

> ID：11721251
> 
> 赞同：1
> 
> 时间：2012-07-30T12:09:30.580
> 
> 标签：php, javascript, regex

我需要检测文本中用空格分隔的单词。例如我的文字是：

```
some parent +kid -control "human right" world 
```

现在我需要检测**一些**，**父母**，**世界**。（之前和之后没有 + - ( ) < > 的所有单词，引号内的所有单词都必须丢弃）所以我用以下方式编写这个正则表达式`preg_match_all()`：

```
(?:^|[\s]+)((?:(?![\+\(\)\<\>\s\-\"]).)+)(?:[\s]+|$) 
```

但它只检测到**一些**和**世界**。我该如何解决？

**编辑**

我也需要它用于**Javascript**。但它似乎不适用于 Javascript。我怎么能用javascript做到这一点？

**编辑**

我找到了一个解决方案，但它似乎很愚蠢。你的想法是什么？

```
$str = 'some parent +kid -control "my human right" world';
$words=array();
$quot=false;
$discard=false;
$word='';
for($i=0;$i<=strlen($str);$i++){
    $chr=substr($str,$i,1);
    if($chr=='"'){
        if($quot){
            $quot=false;
        }else{
            $quot=true;
        }
        continue;
    }
    if($quot)continue;
    if($chr==' '||$i==strlen($str)){
        if(strlen($word)&&!$discard)$words[]=$word;
        $discard=false;
        $word='';
        continue;
    }elseif(in_array($chr,array('+','-','(',')','<','>'))){
        $discard=true;
        continue;
    }
    $word.=$chr;
}
print_r($words);//Array ( [0] => some [1] => parent [2] => world ) 
```

**编辑** PHP 的最终方式（这是用于多语言查询）（特别感谢橡胶靴）：

```
$query='some parent +kid -control "my human right" world';
$result=array();
if(preg_match_all('/(?:"[^"]+")|(?:^|[\s])(?P<q>(?:(?![\+\(\)\<\>\s\-\"]).)+)/',$query,$match)){
    $result=array_filter($match['q'],'strlen');
}
print_r($result);// some,parent,world 
```

javascript的最终方式（这是用于多语言查询）（特别感谢橡胶靴）：

```
var query='some parent +kid -control "my human right" world';
var result=Array();
var tmp;
var patt=RegExp('(?:"[^"]+")|(?:(?:^|\\s)((?:(?![\\+\\(\\)\\<\\>\\s\\-\\"]).)+))', 'g');
while(tmp = patt.exec(query)){
    if(typeof(tmp[1])!=='undefined') result.push(tmp[1]);
}
alert(result);// some,parent,world 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:29:23.787

尝试：

```
$str = 'some parent +kid -control "human right" world';
$words = array_filter(explode(' ', $str), function($word) {
    return preg_match('/^[^-+"]*$/', $word);
});
echo implode(', ', $words); //some, parent, world 
```

这不允许任何包含`+`,`-`或的词`"`。这是你的意思吗？

注意我使用匿名函数作为回调到`array_filter()`. 如果您使用的是 PHP < 5.3，请改用命名函数，或者使用`create_function()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:05:11.227

如果给出以下字符串：

```
 $t ='some parent +kid -control "human huhu right" world'; 
```

也可以使用相当简单的表达式根据您的规范提取单词：

```
 $r = '/ (?:" [^"]+ ")? \s?
         (?<!\S) \b (\w+)
       /x';
 preg_match_all($r, $t, $matches); 
```

这导致：

```
foreach($matches[1] as $m) echo $m . "\n";

some
parent
world 
```

使用的技术：

expr`(?:" [^"]+ ")?`使用引号及其内容。

* * *

附录：**Javascript**

对于 Javascript，您需要使用稍微复杂一点的方法，Javascript 没有`lookbehind assertions`，我们在允许的单词前面加上*假冒它们。*`(?:^|\\s)`

这将起作用：

```
 var t = 'some parent +kid -control "human huhu right" world';
  var r = /(?:"[^"]+")?(?:^|\s)(\b\w+)/g;
  var a = [];
  while(m = r.exec(t)) a.push(m[1]); 
```

`$1`我们在这里使用相同的技术 -为我们需要的单词生成捕获的子匹配。

数组`a`, ( `document.getElementById("myhtml").innerHTML = a;`) 的内容将包含：

```
some,parent,world 
```

# ruby - 错误：黄瓜功能 -n 命令

> ID：11721255
> 
> 赞同：0
> 
> 时间：2012-07-30T12:09:34.700
> 
> 标签：ruby, cucumber

Rspec 书说要运行`cucumber features -n`命令。但它给出了以下错误

```
missing argument: -n (OptionParser::MissingArgument)
/Users/pajama/.rvm/gems/ruby-1.9.2-p320/gems/cucumber-    1.2.1/lib/cucumber/cli/options.rb:119:in `parse!'
/Users/pajama/.rvm/gems/ruby-1.9.2-p320/gems/cucumber-1.2.1/lib/cucumber/cli/configuration.rb:25:in `parse!'
/Users/pajama/.rvm/gems/ruby-1.9.2-p320/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:55:in `configuration'
/Users/pajama/.rvm/gems/ruby-1.9.2-p320/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:63:in `run_drb_client'
/Users/pajama/.rvm/gems/ruby-1.9.2-p320/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:34:in `execute!'
/Users/pajama/.rvm/gems/ruby-1.9.2-p320/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:20:in `execute'
/Users/pajama/.rvm/gems/ruby-1.9.2-p320/gems/cucumber-1.2.1/bin/cucumber:14:in `<top (required)>'
/Users/pajama/.rvm/gems/ruby-1.9.2-p320/bin/cucumber:19:in `load'
/Users/pajama/.rvm/gems/ruby-1.9.2-p320/bin/cucumber:19:in `<main>'
/Users/pajama/.rvm/gems/ruby-1.9.2-p320/bin/ruby_noexec_wrapper:14:in `eval'
/Users/pajama/.rvm/gems/ruby-1.9.2-p320/bin/ruby_noexec_wrapper:14:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:24:58.163

从黄瓜来源：

```
opts.on("-n NAME", "--name NAME",
        "Only execute the feature elements which match part of the given name.",
        "If this option is given more than once, it will match against all the",
        "given names.") 
```

所以你需要打电话`-n name_of_the_feature`

# jboss - JBOSS部署拦截

> ID：11721256
> 
> 赞同：2
> 
> 时间：2012-07-30T12:09:39.083
> 
> 标签：jboss, interception

一旦应用程序完全部署在 JBOSS 上，我想执行代码，有没有办法拦截 JBOSS 上的应用程序部署，或者是否有一点我可以非常确定应用程序已经完全部署并且我可以执行我的在那之后的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:31:01.197

[在 Glassfish Web 部署之后](https://stackoverflow.com/questions/10603521/execute-code-after-glassfish-web-deployment)阅读执行代码我得到了这个问题的答案。

我们有能力编写一个 ServletContextListener 在上下文加载时触发，如下所示：

```
public class MyServlet implements ServletContextListener {

  public void contextInitialized(ServletContextEvent e) {
         // implementation code
  }

  public void contextDestroyed(ServletContextEvent e) {
         // implementation code
  }
} 
```

参考：

*   [ServletContextListener 示例](http://www.javabeat.net/2009/02/servletcontextlistener-example/)

感谢加里斯·苏罗

# android - 在 web 视图中显示图像（不工作）android

> ID：11721260
> 
> 赞同：2
> 
> 时间：2012-07-30T12:09:49.723
> 
> 标签：android, image

我试图在 webview 中显示图像，但我的应用程序一旦到达加载 webview 的活动就会崩溃。

```
 WebView myWebView = (WebView) findViewById(R.id.webView1);
    myWebView.getSettings().setJavaScriptEnabled(true);
 //   myWebView.getSettings().setBuiltInZoomControls(true);
 //   myWebView.getSettings().setSupportZoom(true);
    myWebView.loadUrl("http://www.de-saksen.nl/2/images/comprofiler/62_4dc3051f2b262.jpg");
 //     myWebView.loadData(
 //            "<img src='http://www.de-saksen.nl/2/images/comprofiler/62_4dc3051f2b262.jpg'>",
 //            "text/html", "UTF-8"); 
```

我一直对代码感到困惑，但没有任何帮助。

该活动位于 Manifest.xml 中，它允许 Internet 权限。

编辑：阅读你所有的遮阳篷有很大帮助，并注意到如果我将代码放在一个新活动中，图像就会加载，但我需要能够在这个活动中加载它：

```
public class Profileviewer extends ListActivity {

/** Called when the activity is first created. */

 @Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);

    setContentView(R.layout.listplaceholder);

    ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

    JSONObject json = JSONfunctions.getJSONfromURL("http://de-saksen.nl/deelnemers.txt");

    try{

        JSONArray  deelnemers = json.getJSONArray("deelnemers");

        int Key = getIntent().getIntExtra("Key", -1);

            { HashMap<String, String> map = new HashMap<String, String>();  
            JSONObject e = deelnemers.getJSONObject(Key);

            map.put("id",  String.valueOf(Key));
            map.put("name", "Naam: " +  e.getString("naamingw2"));
            map.put("sex", "Geslacht: " +  e.getString("geslacht"));
            map.put("rank", "Rang: " +  e.getString("rang"));
            map.put("race", "Ras: " +  e.getString("ras"));
            map.put("profession", "Beroep: " +  e.getString("beroep"));
            map.put("skills", "Hobby's: " +  e.getString("hobbys"));
            map.put("lvl", "Level: " +  e.getString("level"));
            map.put("avatar", e.getString("avatar"));
            mylist.add(map);            
        }   

    }catch(JSONException e)        {
         Log.e("log_tag", "Error parsing data "+e.toString());
    }

    ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.profile, 
                    new String[] { "name", "sex", "rank", "race", "profession", "skills", "lvl" }, 
                    new int[] { R.id.item_title, R.id.item_subtitle, R.id.item_subtitle2, R.id.item_subtitle3, R.id.item_subtitle4, R.id.item_subtitle5, R.id.item_subtitle6 });

    setListAdapter(adapter);

    final ListView lv = getListView();
    lv.setTextFilterEnabled(true);  
    lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
            Intent intent = new Intent(Profileviewer.this, Listviewer.class);   
            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
            startActivity(intent); 
        }
    });

}
} 
```

因为在这个活动中我有当前选定的用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:25:30.183

**用这个**

```
byte[] imageRaw = null;
try {
 URL url = new URL("http://some.domain.tld/somePicture.jpg");
 HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

 InputStream in = new BufferedInputStream(urlConnection.getInputStream());
 ByteArrayOutputStream out = new ByteArrayOutputStream();

 int c;
 while ((c = in.read()) != -1) {
     out.write(c);
 }
 out.flush();

 imageRaw = out.toByteArray();

 urlConnection.disconnect();
 in.close();
 out.close();
 } catch (IOException e) {
 // TODO Auto-generated catch block
 e.printStackTrace();
 }

  String image64 = Base64.encodeToString(imageRaw, Base64.DEFAULT);

  String urlStr   = "http://example.com/my.jpg";
  String mimeType = "text/html";
  String encoding = null;
  String pageData = "<img src=\"data:image/jpeg;base64," + image64 + "\" />";

  WebView wv;
  wv = (WebView) findViewById(R.id.webview);
  wv.loadDataWithBaseURL(urlStr, pageData, mimeType, encoding, urlStr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:27:26.960

```
 public class WebviewActivity extends Activity {         
           public void onCreate(Bundle savedInstanceState) {
                   super.onCreate(savedInstanceState);        
           setContentView(R.layout.main);        

     WebView wv = (WebView) findViewById(R.id.webview1);        
           WebSettings webSettings = wv.getSettings();        
           webSettings.setBuiltInZoomControls(true);        
           wv.loadUrl("http://ecx.images-amazon.com/images/I/41HGB-W2Z8L._SL500_AA300_.jpg");

     }    

} 
```

xml

```
<?xml version="1.0" encoding="utf-8" ?> 
  <LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"   
android:layout_width="fill_parent" 
android:layout_height="fill_parent"   
android:orientation="vertical">
  <WebView 
    android:id="@+id/webview1" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" /> 
 </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:24:01.410

```
 public class WebviewActivity extends Activity {     
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 
    setContentView(R.layout.main);        

  WebView wv = (WebView) findViewById(R.id.webview1);   
    WebSettings webSettings = wv.getSettings(); 
    webSettings.setBuiltInZoomControls(true);   
    wv.loadUrl("http://ecx.images-amazon.com/images/I/41HGB-W2Z8L._SL500_AA300_.jpg");

  }    

 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T12:22:51.657

我刚刚在模拟器上运行了该代码，它工作得很好。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <WebView
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

</LinearLayout> 
```

Android 3.2 不需要启动 AsyncTasks。

# java - ActionSherlockBar 样式 - PopupMenu

> ID：11721261
> 
> 赞同：5
> 
> 时间：2012-07-30T12:09:54.840
> 
> 标签：java, android, styles, android-actionbar, actionbarsherlock

样式是我对 android 平台知识进行改进的地方。鉴于我整个早上都在尝试进行简单的更改并且无法实现。

我想更改操作栏中溢出菜单的样式。我已经能够更改背景颜色并添加动画，以便在单击时它会淡化为选定的颜色。但是对于我的生活，我无法更改文本颜色。

下面是两张截图，一张使用 Theme.Sherlock，另一张使用 Theme.Sherlock.Light。

**Theme.Sherlock** - 这是我自定义的当前设置。我想要的是溢出（又名 android:popupmenu）在全息主题中（如下所示），理想情况下我可以更改文本颜色。

![主题.夏洛克](../Images/a40fb53ee88eb0219082d86717ff4906.png)

**Theme.Sherlock.Light** - 这个主题显示了我想看到的溢出菜单的样式。但是，如以红色突出显示的那样，溢出按钮的颜色是错误的，并且此主题还绘制了一条水平线。

![Theme.Sherlock.Light](../Images/8c75c18091c75e6b203a6e5dd12d08b2.png)

我不知道使用弹出问题更改 Theme.Sherlock 或使用溢出图标和线条问题更改 Theme.Sherlock.Light 是否最好/更容易。该应用程序是“轻”主题，因此选项二可能是长期更好的选择，但是我会接受可以通过更改任一主题来解决问题的答案。

ps 在哪里可以找到更改主题/样式的属性列表，自动完成在 eclipse 中非常不完整。

**更新**

这实际上是原生操作栏的更新，因为我回到了同样的问题，但不再支持 2.3 或更低版本。

```
<style name="AppTheme" parent="android:Theme.Holo.Light">
  <item name="android:actionOverflowButtonStyle">@style/OverFlow</item>
</style>

<style name="OverFlow" parent="@android:style/Widget.Holo.ActionButton.Overflow">
  <item name="android:src">**Insert your icon here**</item>
</style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:52:25.940

这个答案可能来得太晚了，但对于那些可能偶然发现这个问题的人来说。我发现您能够更改溢出的背景颜色很有趣。我发现这非常难以弄清楚，而更改文本非常简单。只需覆盖`android:itemTextAppearance`自定义主题中的值。

```
<item name="android:itemTextAppearance">@style/your_new_text_appearance</item>

<style name="your_new_text_appearance">
    <item name="android:textColor">@color/red</item>
</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-19T09:19:39.447

简单地执行以下操作：

**1** . 在您的应用主题样式的 theme.xml 中添加此项：

```
<item name="popupMenuStyle">@style/PopupMenu</item> 
```

**2** . 在 styles.xml 添加这个新样式：

```
<style name="PopupMenu" parent="@style/Widget.Sherlock.Light.ListPopupWindow">
   <item name="android:textSize">14sp</item>
</style> 
```

在样式中，您可以根据需要覆盖文本大小或其他参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T13:21:25.170

我对 ActionBarSherlock 不熟悉，但是您可以在硬盘上的文件夹中找到标准的溢出图标

```
path\to\android\android-sdk\platforms\android-api-level\data\res\drawable-resolution 
```

他们被称为`ic_menu_moreoverflow_normal_holo_dark.png`和`ic_menu_moreoverflow_normal_holo_light.png`

或者，您可以[在此处](http://androiddrawables.com/menu.html)在线找到它们。

我相信左圆也是可绘制的。看看里面`res\drawable`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T08:56:29.210

尝试在[Android 操作栏样式生成器的帮助下覆盖 Theme.Sherlock 的样式](http://jgilfelt.github.com/android-actionbarstylegenerator/#name=example&compat=holo&theme=light&actionbarstyle=solid&backColor=E4E4E4,100&secondaryColor=D6D6D6,100&tertiaryColor=F2F2F2,100&accentColor=33B5E5,100)

# c++ - 将返回 void 的函数传递给接受 void 的函数？

> ID：11721264
> 
> 赞同：0
> 
> 时间：2012-07-30T12:10:05.700
> 
> 标签：c++

所以，在摆弄了一段时间之后，我无法得到它......为什么这还不是标准的一部分？

```
template<class T> accept_all(T) {}
void give_void() {}
int give_int() { return 1;}

int main() {
accept_all(give_void());
accept_all(give_int());
} 
```

使用模板类特化可以省去很多麻烦......而且就一般语法而言，能够返回一个 void 而不能传递一个是没有意义的。

有没有什么我可以做的事情不涉及为每种方法类型专门设置一个丑陋的“中介类”来调用这个东西？

谢谢。

编辑：那么，什么是实现接受任何函数返回值的模板的好方法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:11:45.403

我觉得它看起来真的很奇怪。为什么不连续调用这些函数：

```
give_void();
accept_void(); 
```

干净多了。

`accept_void(give_void());`实际上，即使您需要输入的符号数量相同，您也不会节省任何费用。

**编辑**不确定我是否真的了解您想要实现的目标，但是：

```
template <typename Result, typename Callable>
static Result func(Callable c)
{
    return c();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:23:54.173

C++ 允许您`return void`从一个函数中获取（请参阅[Is return void valid code?](https://stackoverflow.com/questions/3383090/c-c-is-returning-void-a-valid-code)）。

但是，返回 void 与接受 void 有很大不同；请注意，这`int foo(void)`只是 的替代（且已弃用）语法`int foo()`，并且仅出于与 C 兼容的历史原因而存在。

您的建议打破了函数调用中的参数数量与函数接受的参数数量相同的不变量。

# cocoa - 如何访问对象的 NSDocument？

> ID：11721267
> 
> 赞同：3
> 
> 时间：2012-07-30T12:10:21.910
> 
> 标签：cocoa, nsdocument

在添加到 mainmenu.xib 之后，我可以访问应用*程序范围的委托实例*，将对象的名称设置为我的 appDelegate 的名称并将 mainmenu.xib 委托设置为此对象。`[NSApp delegate]``NSObject`

现在，我想做的是访问对象的**Document**，即`NSDocument`对象“属于”的活动。我猜这将是一个*文档范围的委托实例。*有时`[self document]`有效，但并非总是如此。有通用的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T13:29:58.963

无需显式传递引用。`NSViewController`您可以通过以下方式访问该文档：

```
id document = self.view.window.windowController.document; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:40:50.083

怎么样`[[NSDocumentController sharedDocumentController] currentDocument]`？

不过要小心。请阅读 [返回 nil 的 NSDocumentController currentDocument](https://stackoverflow.com/questions/8912314/nsdocumentcontroller-currentdocument-returning-nil)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T12:58:12.250

对于作为文档一部分的任何子窗口，事实证明很容易创建一个非常简单的子类`NSViewController`并将所需信息存储在其中。这些视图控制器设置在主 Document 实现中，因此很容易传递`NSDocument`对象的地址。然后，任何实际的子视图都可以由视图控制器控制，该控制器是这个“管理控制器”的子类。

该解决方案不适用于*每个*对象，但确实需要最大的障碍并解决了我的问题...

# qt - QML/Javascript 中的 QVector

> ID：11721268
> 
> 赞同：4
> 
> 时间：2012-07-30T12:10:28.413
> 
> 标签：qt, qml, qtquick2

如何`QVector`在 QML/Javascript 中使用？例子：

C++：

我在 QML 中使用的自定义类。该类包括返回`QVector`注册的函数`ElementType`

```
class CustomType : public QObject
{
    Q_OBJECT

    public:
        Q_INVOKABLE QVector<ElementType*> getElements(); 
    //.....            
}
//.........
qmlRegisterType<CustomType>("CustomComponents", 1, 0, "CustomType");
qmlRegisterType<ElementType>("CustomComponents", 1, 0, "ElementType");
qRegisterMetaType<ElementType*>("ElementType*"); 
```

QML：

QML 代码接收类的实例`CustomType`（自定义）并尝试获取`QVector<ElementType*>`元素并读取其属性。但是 QML 不能识别`QVector`类型。

```
//.......
function(){
    var elements = custom.getElements()
    elements[0].property   //?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:57:15.943

QML 可访问的列表属性需要使用`QDeclarativeListProperty`. 这适用于所有列表形的东西，也适用于向量。[这部分 Qt 文档](http://qt-project.org/doc/qt-4.8/declarative-tutorials-extending-chapter5-listproperties.html)有详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:01:24.077

在您的示例中，您只需要从函数返回`QList`。请注意，以这种方式返回的所有对象都将拥有 JavaScript 所有权，并且在您的 JavaScript 函数返回时将被垃圾回收。为了防止这种行为，在将对象推送到您的集合之前使用[setObjectOwnership 。](http://doc.qt.io/qt-4.8/qdeclarativeengine.html#setObjectOwnership)有关在 QML 中使用集合的更多信息，请参阅[QML 数据模型](http://doc.qt.io/qt-4.8/qdeclarativemodels.html)`QObject*``Q_INVOKABLE``QList`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-30T16:40:49.410

我迟到了几年才回答，但是，这里有。这是一个很容易解决的问题。只需在 C++ 代码中使用 Qt QVariantList 类型而不是 QVector。Qt 的 QVariantList 本质上是一个包含 QVariant 元素的 QVector。一旦你知道你在做什么，QVariants 可以接近任何东西。此外，QML 会自动将 C++ QVariant 转换为其 QML 等效项。因此，如果您在 main.cpp 中执行此操作：

```
#include <QCoreApplication>
#include <QGuiApplication>
#include <QQmlContext>
#include <QQuickView>

int main(int argc, char *argv[])
{
    // Prepare to enter the QML GUI world
    QCoreApplication::setAttribute(Qt::AA_EnableHighDpiScaling);
    QGuiApplication app(argc, argv);

    // Create a QVariantList to be used instead of a QVector
    QVariantList dataList;
    dataList << "Item 1";
    dataList << 2;
    dataList << 3.3;

    // Create QML UI
    QQuickView view;

    // make your QVariantList visible to QML
    QQmlContext *ctxt = view.rootContext();
    ctxt->setContextProperty("myModel",
                             QVariant::fromValue(dataList));

    // show QML UI
    view.setSource(QUrl("qrc:/main.qml"));
    view.show();

    return 1;

} // main() 
```

然后，您可以在 main.qml 中执行此操作：

```
import QtQuick 2.12
import QtQuick.Window 2.12

Item
{
    // Print contents of C++ QVariantList to console
    function printMeBruh()
    {
        console.log("modelData contains:")
        console.log("-------------------")

        for (var i = 0; i < 3; i++)
        {
            console.log(myModel[i])
        }
    }

    Component.onCompleted: printMeBruh()

} 
```

# sql-server - 如何使用 SQL SPLIT 函数？

> ID：11721269
> 
> 赞同：1
> 
> 时间：2012-07-30T12:10:35.620
> 
> 标签：sql-server

我希望使用 SQL“拆分”功能：

```
alter FUNCTION [dbo].[Split3] (@String nvarchar(1000), @Delimiter char(1))     
returns @temptable TABLE (items nvarchar(1000))       
as       
begin       
   declare @idx int       
    declare @slice nvarchar(1000)       

    select @idx = 1       
        if len(@String)<1 or @String is null  return       

   while @idx!= 0       
   begin       
       set @idx = charindex(@Delimiter,@String)       
       if @idx!=0       
           set @slice = left(@String,@idx - 1)       
       else       
          set @slice = @String       

       if(len(@slice)>0)  
           insert into @temptable(Items) values(@slice)       

       set @String = right(@String,len(@String) - @idx)       
       if len(@String) = 0 break       
   end   
return       
end

Select * from dbo.Split3 ((Select eqipproc from equipmast where eqcode = 'EQL0000004'),';') 
```

> 错误
> 
> 服务器：消息 170，级别 15，状态 1，第 1 行第 1 行：'(' 附近的语法不正确。服务器：消息 170，级别 15，状态 1，第 1 行第 1 行：'，'附近的语法不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:25:33.763

您必须将 CSV 字符串传递给您的拆分函数

```
DECLARE @result nvarchar(max)
SET @result = ''

SELECT @result = @result + [eqipproc ] + N';'
equipmast where eqcode = 'EQL0000004' 
```

现在将@result 传递给您的拆分函数

```
Select * from dbo.Split3(@result,';') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:12:40.090

无论过滤方式是`eqcode = 'EQL0000004'`只返回一行还是多于一行，您都可以`[dbo].[Split3]`使用以下命令对每个返回的行执行函数[`CROSS APPLY`](http://msdn.microsoft.com/en-us/library/ms175156(v=sql.105).aspx)：

```
select s.*
from equipmast as e
cross apply dbo.Split3(e.eqipproc , ';') as s
where e.eqcode = 'EQL0000004' 
```

* * *

注意：上述解决方案与`CROSS APPLY`以下内容相同（类似于[Utkarsh 的答案](https://stackoverflow.com/a/11721538/6884)）：

```
declare @s nvarchar(1000)
select @s = eqipproc from equipmast where eqcode = 'EQL0000004'

select * from dbo.Split3(@s, '.') 
```

不同之处在于，`CROSS APPLY`如果查询返回多行，这也有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:30:04.423

试试这个功能

```
 CREATE Function dbo.Str_Split(@string varchar(100),@dl varchar(2))
    Returns @outputtbl Table(col varchar(5))
    As
    BEGIN

    Declare @remainingStr varchar(100)=@string
    if(CHARINDEX(@dl,@remainingStr,1) = 0)
    begin
    INSERT INTO @outputtbl
    select @remainingStr
    end
    else
    begin
    While(CHARINDEX(@dl,@remainingStr,1) > 0)
    BEGIN
    INSERT INTO @outputtbl
    select LEFT(@remainingStr,CHARINDEX(@dl,@remainingStr,1)-1)
    SET @remainingStr=RIGHT(@remainingStr,LEN(@remainingStr)-CHARINDEX(@dl,@remainingStr,1))
    end
    INSERT INTO @outputtbl
    select @remainingStr
    END

    Return
    END
        --select * from dbo.Str_Split('ab,cd,efg',',') 
```

# javascript - 淘汰赛，嵌套的foreach

> ID：11721270
> 
> 赞同：17
> 
> 时间：2012-07-30T12:10:37.617
> 
> 标签：javascript, knockout.js

让我们让人类与猫与小猫

```
class Master
{  
   String masterName;

   Cat[] cats;  
}
class Cat 
{
   String catName;

   Kitten[] kittens;
}

class Kitten 
{
   String kittenName;
} 
```

现在我想在 html 中展示我所有的小猫和猫的主人。我用

```
 <!-- ko foreach: humans -->
                    <!-- ko foreach: cats -->
                    <!-- ko foreach: kittens -->
<p data-bind="$data.kittenName"></p>
<p data-bind="$parent.catName"></p>
<p data-bind="???????"></p>   <!-- How get master's name? -->
                    <!-- /ko -->
                    <!-- /ko -->
                    <!-- /ko --> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-30T15:45:48.490

从[淘汰赛文档](http://knockoutjs.com/documentation/binding-context.html)

> $parents 这是一个代表所有父视图模型的数组：
> 
> $parents[0] 是来自父上下文的视图模型（即，它与 $parent 相同）
> 
> $parents[1] 是来自祖父母上下文的视图模型

您应该可以`$parents[1]`用来访问主视图模型。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-30T12:15:57.010

您可以使用 ,`$root`来访问基础对象 - 在您的情况下，它将处于`Master`.

```
<!-- ko foreach: humans -->
    <!-- ko foreach: cats -->
        <!-- ko foreach: kittens -->
            <p data-bind="$data.kittenName"></p>
            <p data-bind="$parent.catName"></p>
            <p data-bind="text:console.log($root, $parent, $data)"></p>   <!-- How get master's name? -->
        <!-- /ko -->
    <!-- /ko -->
<!-- /ko --> 
```

# linux - 内存大于 4GB 的进程的虚拟地址

> ID：11721279
> 
> 赞同：0
> 
> 时间：2012-07-30T12:11:12.427
> 
> 标签：linux, operating-system

如果一个进程使用 6GB 内存并且指针是 32 位的，那么由于指针在 linux 中保存虚拟地址，如何对 4GB 以上的 2GB 进行寻址？

仅在 64 位解决方案上运行？对不起，天真的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:48:36.840

完成[Basile 的回答](https://stackoverflow.com/a/11721484/1439701)后，大多数架构已将物理地址空间扩展到 36 位（参见 Intel 的 PSE、PowerPC 的扩展实数页码……）。因此，尽管任何进程只能通过 32 位指针寻址 4GB 的内存，但两个不同的进程实际上可以寻址 64GB 物理内存地址空间中的不同 4GB。这是 32 位操作系统寻址高达 64GB 内存（例如，Windows 2003 Server 为 32GB）的一种方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:22:53.153

正如我在评论中所说，在 64 位上运行是实用的解决方案。您真的不想 munmap 然后再[mmap](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)临时文件上的大段。

您可以在运行时更改[地址空间](http://en.wikipedia.org/wiki/Address_space)，但您不想这样做（分配内存时除外，例如 thru `malloc`，这可能会增加可用空间 thru `mmap`）。

更改地址空间以获得巨大内存的错觉是一场噩梦。避免这种情况（您将花费数月的时间进行调试以重现错误）。在 1960 年代，[IBM 1130](http://en.wikipedia.org/wiki/IBM_1130)做了如此疯狂的把戏。

今天，计算机比开发人员的时间便宜。因此，只需购买具有 8Gb（千兆字节）RAM 的 64 位处理器。

[几个具有PAE](http://en.wikipedia.org/wiki/Physical_Address_Extension)功能的32 位处理器能够使用超过 4Gb 的 RAM，但每个进程最多只能看到 4Gb（实际上是 3Gb）的虚拟内存。

它与[虚拟内存](http://en.wikipedia.org/wiki/Virtual_memory)有关，与英特尔特定的分段无关。当前的 Linux（和其他）操作系统即使在 Intel 处理器上也使用[平面内存模型。](http://en.wikipedia.org/wiki/Flat_memory_model)

# python - Python 中 OpenCL 的 OpenGL 纹理

> ID：11721280
> 
> 赞同：1
> 
> 时间：2012-07-30T12:11:16.477
> 
> 标签：python, opengl, opencl, textures

我想在 Python 中将 OpenGL 纹理传递给 OpenCL 因此我使用帧缓冲区在 OpenGL 中创建纹理：

```
 fbo =glGenFramebuffersEXT(1))
        glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, fbo)
        depthbuffer = glGenRenderbuffersEXT(1)
        glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, depthbuffer)
        glRenderbufferStorageEXT(GL_RENDERBUFFER_EXT, GL_DEPTH_COMPONENT, width, height)
        glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT, GL_RENDERBUFFER_EXT, depthbuffer)       

        texture = glGenTextures(1))
        glBindTexture(GL_TEXTURE_2D, texture)
        glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER, GL_NEAREST)
        glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER, GL_NEAREST)
        glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8,  width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, None);
        glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT,  GL_TEXTURE_2D,texture, 0);
        glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, fbo);
        RENDERSCENE()
        glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0); 
```

之后，我创建 OpenCL 上下文并尝试像这样将纹理从 OpenGL 传递到 OpenCL

```
 self.context = pyopencl.create_some_context()
        self.queue = pyopencl.CommandQueue(self.context)
        if pyopencl.have_gl():
              self.image = pyopencl.GLTexture(self.context, pyopencl.mem_flags.READ_WRITE,GL_TEXTURE_2D, 0, texture, 2) 
```

纹理工作正常，如果我在 OpenGL 中使用它，但是当我尝试将它与 OpenCL 一起使用时，它会崩溃：

```
Traceback (most recent call last):
  File "/home/jul*/*/*er/FBOtest2.py", line 250, in <module>
    fbo.mainGameLoop()
  File "/home/jul*/*/*er/FBOtest2.py", line 223, in mainGameLoop
    self.transformTexturesForOpenCL()  
  File "/home/jul*/*/*er/FBOtest2.py", line 63, in transformTexturesForOpenCL
    self.image = pyopencl.GLTexture(self.context, pyopencl.mem_flags.READ_WRITE,GL_TEXTURE_2D, 0, texture, 2)
pyopencl.LogicError: clCreateFromGLTexture2D failed: invalid context 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:51:38.893

我不确定您是否可以创建“某些上下文”。您需要在了解 OpenGL 上下文的情况下创建 OpenCL 上下文。[在此处](http://www.cmsoft.com.br/index.php?option=com_content&view=category&layout=blog&id=99&Itemid=150)查看有关 CL-GL 互操作的更多信息。

# php - 使用 PHP echo 语句中的 JS 'onclick' 函数和嵌入式 XML 获取的正确语法

> ID：11721286
> 
> 赞同：1
> 
> 时间：2012-07-30T12:11:43.557
> 
> 标签：php, javascript, xml, syntax, echo

我很可能会被 b'*ch 扇耳光，因为我在发帖前没有足够的搜索论坛，但我真的认为我已经搜索了所有相关的帖子，很多似乎没有专门涵盖我的问题，其他的飞过我的初学者的头（因为我是 PHP 和 js 的新手）。话虽如此...

我已经构建了一个 PHP 代码来使用`$xml=simplexml_load_file();`

不用担心，但是所需的数据“条目”或“字段”之一需要存在于`onclick`和/或`onmouseup`javascript 函数中。

代码如下：

```
<?php
$xml=simplexml_load_file('prod_test_feed_sameday.xml');
        $max = 8;
        $i = 1;
foreach($xml->product as $feed){ 
if ($i <= $max){
echo "<table id='{$feed->position}' class='prod_container'>
        <td class='hidden_mask' id='{$feed->position}'>
        </td>
        <td class='hidden_image' id='{$feed->position}'><span style='background:url({$feed->prod_image_large}) no-repeat center;'/></span><div><a onmouseup='$('.hidden_image#{$feed->position}').slideToggle('slow');' onclick='$('.hidden_mask#{$feed->position}').hide();'><b>CLOSE</b></a></div>
        </td>
    <tr>
        <td class='prod_image' id='{$feed->position}'>
        <span style='background:url({$feed->prod_image_small}) no-repeat center; background-size:contain;'/></span>         
        </td>
        <td rowspan='1' class='info_toggle' id='{$feed->position}'><a onmouseup='$('.hidden_image#{$feed->position}').slideToggle('slow');' onclick='$('.hidden_mask#{$feed->position}').show();><img src='images/zoom_02.png' title='See a larger image of these flowers' /></a>
        </td>
    </tr>
    <tr>
        <td colspan='2' class='prod_name' id='{$feed->position}'>{$feed->prod_name}
        </td>
    </tr>
    <tr>
        <td colspan='2' class='prod_price' id='{$feed->position}'><span id='{$feed->position}'>from: £{$feed->price}</span><a href='{$feed->prod_link}' target='_blank'><span class='buy_button'>&nbsp;Buy it now!&nbsp;</span></a></td>
    </tr>
</table>";
            $i++;
        } 
      }  
?> 
```

数据和 CSS 都可以完美运行。`href`代码末尾有一个链接，它也可以完美运行。

我绞尽脑汁试图在`onlick`函数中找到我的语法错误。

我已经尝试了各种反斜杠方式，使用反复试验，例如：

`onclick='$(\'.hidden_mask#{$feed->position}\').hide();'` 或者 `onclick='\'$('.hidden_mask#{$feed->position}').hide();\''` 甚至 `onclick=\''$(\'.hidden_mask#{$feed->position}\').hide();\''` 是 `onclick=\''$(\\'.hidden_mask#{$feed->position}\\').hide();\''` <--Freddy Krugar 'slashing' 例子

无论如何，我很茫然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:24:00.730

尝试使用双引号并将它们转义：

```
echo " ...
    onclick=\"$('.hidden_mask#{$feed->position}').hide();\"
..."; 
```

或者

```
echo " ...
    onclick='$(\".hidden_mask#{$feed->position}\").hide();'
..."; 
```

[**演示**](http://ideone.com/14Gyz)

这样，您只需在 PHP 中进行转义，而不需要 Freddy Krugar 为 DOM 解析器进行转义。

# php - mysql_real_escape_string 和 json

> ID：11721288
> 
> 赞同：3
> 
> 时间：2012-07-30T12:11:48.113
> 
> 标签：php, mysql, json

我在关联数组中有以下 json 字符串：

```
[watch] => '{"tv":"Dexter's Labratory, \u05d1\u05d9\u05d3\u05d5\u05e8  \u05d9\u05e9\u05e8\u05d0\u05dc\u05d9 HOT, South Park, \u05e2\u05e1\u05e4\u05d5\u05e8, Teenage Mutant Ninja Turtles, Simpsons, The Samurai Pizza Cats, Dr. House, Futurama, House","movies":"Mufasa, Simba, \u05d7\u05d9\u05d9\u05dd \u05d1\u05e1\u05e8\u05d8, \u05e1\u05e8\u05d8\u05d9\u05dd \u05d7\u05d3\u05e9\u05d9\u05dd \u05d1\u05e7\u05d5\u05dc\u05e0\u05d5\u05e2, Future Shorts Israel, The Lion King"}' 
```

当然它需要被转义，因为它包含像'里面的字符（例如德克斯特的实验室）。问题是在其上使用 mysql_real_escape_string 后，输出为：

```
[watch] => \'{\"tv\":\"Dexter\'s Labratory, \\u05d1\\u05d9\\u05d3\\u05d5\\u05e8  \\u05d9\\u05e9\\u05e8\\u05d0\\u05dc\\u05d9 HOT, South Park, \\u05e2\\u05e1\\u05e4\\u05d5\\u05e8, Teenage Mutant Ninja Turtles, Simpsons, The Samurai Pizza Cats, Dr. House, Futurama, House\",\"movies\":\"Mufasa, Simba, \\u05d7\\u05d9\\u05d9\\u05dd \\u05d1\\u 
```

它转义了一大堆不应该转义的东西，尤其是所有的 " 字符（我很确定它们是 json 编码的一部分），使其无法查询。转义 json 字符串的正确方法是什么？我想我我在这里遗漏了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:25:40.877

你不应该使用`already prepared`JSON 字符串。

您应该使用`json_encode();`函数从数组或对象创建 JSON 字符串。

它会自动转义特殊字符。或者您可以简单地在此函数的第三个参数中定义要转义的内容。[这](http://ru2.php.net/manual/en/function.json-encode.php)是 PHP 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:18:52.823

转义*任何*字符串以放入 MySQL 的 SQL 查询的正确方法是使用绑定参数。使用`mysqli_real_escape_string`后面的小径和后面的`mysql_real_escape_string`小径。

转义*可能*具有特殊含义但*在上下文*中没有的字符不会导致问题。

如果你想健全地查询数据，那么它不应该以 JSON 格式存储在数据库中。如果不从数据库中提取并解析它，您将无法访问 JSON 中的字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:11:31.177

这可能是因为您拥有的希伯来语字符。它需要解析。看到这个问题：

[JSON 获取非英语的 "name":"\u05d7\u05d1\u05e8\u05d4"](https://stackoverflow.com/questions/6676951/json-getting-name-u05d7-u05d1-u05e8-u05d4-for-non-english)

# java - 为什么这段代码中的 Hibernate 会话获取失败？

> ID：11721291
> 
> 赞同：2
> 
> 时间：2012-07-30T12:11:53.220
> 
> 标签：java, hibernate

我正在尝试使用 Hibernate 4.1.2。

编写了以下课程以帮助我使用新的 ServiceRegistry 方法获得会话

==================================================== ===

```
package com.debaself.samples;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.AnnotationConfiguration;
import org.hibernate.cfg.Configuration;
import org.hibernate.service.ServiceRegistry;
import org.hibernate.service.ServiceRegistryBuilder;

public class SessionFetch {

private static SessionFactory sessionFactory = null;

public SessionFactory getSessionFactory(){

if(sessionFactory == null){
         Configuration cfg = new    AnnotationConfiguration().addResource("hibernate.cfg.xml").configure();

ServiceRegistry serviceRegistry = new     ServiceRegistryBuilder().applySettings(cfg.getProperties()).buildServiceRegistry();
        sessionFactory = cfg.buildSessionFactory(serviceRegistry);
    }

    return sessionFactory ;
}

public Session getSession(){
    return getSessionFactory().openSession();
}
} 
```

================================================

现在我写了一个测试

================================================

```
public class SessionFetchTest {

    @Test 
    public void getSessionFactoryTest(){
        SessionFetch fetch = new SessionFetch();
        SessionFactory factory = fetch.getSessionFactory();

        assertNotNull(factory);
        assert(!factory.isClosed());
        factory.close();
    }

    @Test
    public void getSessionTest(){
        SessionFetch fetch = new SessionFetch();
        Session session = fetch.getSession();

        assert(session.isOpen());
        assert(session.isConnected());      
    }
} 
```

====================================================

奇怪的是

当我单独运行测试方法时，两个测试都成功了。但是当我一次性运行它们时，getSessionTest() 总是失败并抛出 UnknownServiceException。

谁能解释一下这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:32:50.940

正如我在评论中所说，工厂关闭了。也许在`@AfterClass`部分关闭它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:35:07.190

您的直接问题已经得到解答，但请注意您的代码存在其他问题。单元测试应该是可执行的，没有相互依赖关系，但您的代码并非如此。您在测试中重复使用相同的会话。您还可以重用工厂，甚至在一次测试中关闭它。此外，测试可能在多个线程中运行，并且您的代码不是线程安全的（工厂引用不会被正确共享）。

# android - 将pdf文件转换为位图图像

> ID：11721292
> 
> 赞同：3
> 
> 时间：2012-07-30T12:11:57.090
> 
> 标签：android

我正在处理 pdf 文件，我想为我的 pdf 文件实现页面查看器。我的想法是将pdf文件转换为bmp图像，然后使用viewPager。但我坚持将pdf转换为位图。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-06T19:44:04.013

在你的 gradle 中包含依赖项

```
compile 'com.github.barteksc:android-pdf-viewer:2.8.1' 
```

使用以下功能将 PDF 页面转换为位图图像

```
private  Bitmap generateImageFromPdf(String assetFileName, int pageNumber, int width, int height) {

    PdfiumCore pdfiumCore = new PdfiumCore(mActivity);
    try {
        File f = FileUtils.fileFromAsset(mActivity, assetFileName);
        ParcelFileDescriptor fd = ParcelFileDescriptor.open(f, ParcelFileDescriptor.MODE_READ_ONLY);
        PdfDocument pdfDocument = pdfiumCore.newDocument(fd);
        pdfiumCore.openPage(pdfDocument, pageNumber);
        //int width = pdfiumCore.getPageWidthPoint(pdfDocument, pageNumber);
        //int height = pdfiumCore.getPageHeightPoint(pdfDocument, pageNumber);
        Bitmap bmp = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
        pdfiumCore.renderPageBitmap(pdfDocument, bmp, pageNumber, 0, 0, width, height);
        //saveImage(bmp, filena);
        pdfiumCore.closeDocument(pdfDocument);

        return bmp;
    } catch(Exception e) {
        //todo with exception
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-14T07:21:14.907

这是一种渲染 pdf 以对其进行成像的方法，它需要 20 到 25 秒来渲染 pdf 文件以对其在 android 10、android 9 和所有较低版本中的工作进行成像

```
private  void generateImageFromPdf() {

        try {
            PDDocument doc=PDDocument.load(new File(fileurl));
            PDFRenderer pdfRenderer = new PDFRenderer(doc);
            Bitmap bffim = pdfRenderer.renderImageWithDPI(0, 100, Bitmap.Config.RGB_565);
            String fileName = "image-" + 0 + ".png";

            img.setImageBitmap(bffim);
        } catch (IOException e) {
            e.printStackTrace();
        }

    } 
```

# java - Java-Application：使用子进程/UNC 路径执行批处理文件

> ID：11721294
> 
> 赞同：0
> 
> 时间：2012-07-30T12:12:00.843
> 
> 标签：java, batch-file, subprocess, execute, unc

我想在我的 java 应用程序中执行一个批处理文件。

我想这样执行它：

```
 String[] args = new String[] {
                    "C:/Users/User1/Desktop/Bachelor Thesis/JDBC Connector/jdbc_5.2_sp1_patch05/bin/connect.bat",
                    "start",
                    "-f",
                    "C:/Users/User1/Content-Integration Testing Framework/JDBC Connector/etc/db.xml" };

Process p = Runtime.getRuntime().exec(args);
p.waitFor();

            BufferedReader prout = new BufferedReader(new InputStreamReader(p.getErrorStream()));
            String buffer;
            while ((buffer = prout.readLine()) != null) {
                System.out.println(buffer);
                buffer = prout.readLine();
            } 
```

解释：
让我们考虑我会使用正常的 cmd 执行。我会打开 cmd，然后我会转到我的目录：

```
cd C:/Users/User1/Desktop/Bachelor Thesis/JDBC Connector/jdbc_5.2_sp1_patch05/bin 
```

Afterwars 我将使用以下命令启动批处理文件：

```
connect start -f C:/Users/User1/Content-Integration Testing Framework/JDBC Connector/etc/db.xml 
```

在命令行上这工作正常，它启动批处理，在这个批处理中有一个子进程启动：

```
if exist %JAVA_HOME%\bin\java.exe (
java -XX:NewSize=%NEWSIZE% -XX:NewRatio=1 -Xms%MAXHEAP% -Xmx%MAXHEAP% -Dfile.encoding=%ENCODING% -Djava.ext.dirs=%EXT_DIR% com.fastsearch.esp.connectors.jdbc.JDBCConnector %1 %2 %3 %4 %5 %6 %7
) else (echo Is JAVA_HOME=%JAVA_HOME% set correctly?) 
```

但是在我的 Java 应用程序中执行时，我遇到了以下问题：它只打印我的批处理文件的第一个回显，但子进程没有启动。当我捕捉到错误流（如顶部代码所示）时，它说：

```
UNC-Pfade werden nicht unterstützt. (UNC-Paths are not supported)
java.lang.NoClassDefFoundError: com/fastsearch/esp/connectors/jdbc/JDBCConnector 
```

经过一番研究，我发现由于当前工作目录或类似的原因，cmd 在启动子进程时存在问题。我真的不明白。

实际情况是，我想在我的 Java 应用程序中执行带有必要参数（开始、-f 和路径）的批处理文件。当我直接在 cmd 上执行语句时，一切正常，但在我的 java 应用程序中它很糟糕。

这是完整的批处理文件，也许这会有所帮助：

```
@echo off
rem This bat file should setup the java env and run the connector manager
SETLOCAL

echo Copyright (c) Microsoft Corporation.  All rights reserved.

rem !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
rem Java 1.6 must be installed and set here
rem !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

if NOT defined JAVA_HOME (
   echo Sorry..
   echo You have NOT set JAVA_HOME - Should point to where JRE 1.6.x or later is installed
   echo Exiting.......
   goto end
)
set JAVA_HOME=%JAVA_HOME%
:: Remove quotes if exist, then add quotes in case spaces
SET JAVA_HOME=###%JAVA_HOME%###
SET JAVA_HOME=%JAVA_HOME:"###=%
SET JAVA_HOME=%JAVA_HOME:###"=%
SET JAVA_HOME=%JAVA_HOME:###=%
SET JAVA_HOME="%JAVA_HOME%"

SET PATH=%JAVA_HOME%\bin
SET EXT_DIR=..\lib;%JAVA_HOME%\lib;%JAVA_HOME%\lib\ext
SET CLASSPATH=..\etc
SET MAXHEAP=1408m
SET NEWSIZE=256m
SET ENCODING=UTF8

if exist %JAVA_HOME%\bin\java.exe (
java -XX:NewSize=%NEWSIZE% -XX:NewRatio=1 -Xms%MAXHEAP% -Xmx%MAXHEAP% -Dfile.encoding=%ENCODING% -Djava.ext.dirs=%EXT_DIR% com.fastsearch.esp.connectors.jdbc.JDBCConnector %1 %2 %3 %4 %5 %6 %7
) else (echo Is JAVA_HOME=%JAVA_HOME% set correctly?)

:end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:55:40.117

正如您所提到的，您的问题很可能是您没有从正确的目录执行批处理文件。当您打开命令行控制台并`cd`进入包含批处理文件的目录时，该操作将设置正确的`current working directory`(CWD)。

您可以通过在输入批处理文件之前或之后更改 CWD 来解决它。

* * *

让我们从批处理文件中的 CWD 开始；我们在这里也有很多选项，但让我们保持简单，只需更改 CWD：

```
set MYDIR=%~dp0
cd %MYDIR% 
```

第一行使用了一些批处理文件魔法来获取当前正在执行的批处理文件所在的目录。那将是“C：/Users/User1/Desktop/Bachelor Thesis/JDBC Connector/jdbc_5.2_sp1_patch05/bin/”

## 选择

您可以使用另一种形式`Runtime.getRuntime().exec()`来更改 CWD：
`Runtime.getRuntime().exec(String[] cmdarray, String[] envp, File dir)`

调用为：

```
File workingDir = new File("C:/Users/User1/Desktop/Bachelor Thesis/JDBC Connector/jdbc_5.2_sp1_patch05/bin/");
Runtime.getRuntime().exec(args, null, workingDir); 
```

我强烈建议您`static final const`为您的工作目录声明一个值，或者找到一些方法来消除程序中该值的硬编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:12:31.603

我现在想把正确答案写下来作为总结。但我不得不提一下，这是 Richard Sitze 的想法，而不是我的想法。

```
static final String workingdirectory = "C:/Users/User1/Desktop/Bachelor Thesis/JDBC Connector/jdbc_5.2_sp1_patch05/bin"; 
    String[] args = new String[] {"C:/Users/User1/Desktop/Bachelor Thesis/JDBC Connector/jdbc_5.2_sp1_patch05/bin/connect.bat",
            "start",
            "-f",
            "C:/Users/User1/Content-Integration Testing Framework/JDBC Connector/etc/db.xml" };
    Process p = Runtime.getRuntime().exec(args2, null, workingDir);
    BufferedReader prout = new BufferedReader(new InputStreamReader(p.getInputStream()));
                String buffer;
                while ((buffer = prout.readLine()) != null) {
                    System.out.println(buffer);
                    buffer = prout.readLine();
                }
            } catch (IOException e) {
                e.printStackTrace();
            } 
```

# php - PHP - 2D 数组 - 遍历数组键并检索它们的值？

> ID：11721295
> 
> 赞同：5
> 
> 时间：2012-07-30T12:12:07.317
> 
> 标签：php, arrays, loops

我有一个输出如下的数组：

```
1 => 
array
  'quantity' => string '2' (length=1)
  'total' => string '187.90' (length=6)

2 => 
array
  'quantity' => string '2' (length=1)
  'total' => string '2,349.90' (length=8) 
```

我想遍历每个数组键并检索与它们相关的 3 个值的集合，就像这样（这不起作用）：

```
foreach( $orderItems as $obj=>$quantity=>$total)
{
    echo $obj;
    echo $quantity;
    echo $total;
} 
```

有人可以就我将如何完成此任务提供一些建议，甚至可以为我提供更好的方式来完成这项任务。任何与此相关的信息，包括可能涵盖此内容的教程链接，将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T12:15:25.780

```
foreach( $orderItems as $key => $obj)
{
    echo $key;
    echo $obj['quantity'];
    echo $obj['total'];
} 
```

使用上述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T12:14:39.100

您需要多阅读一些文档`forEach()`，因为您的语法和对它的理解有些不正确。

```
$arr = array(
    array('foo' => 'bar', 'foo2', 'bar2'),
    array('foo' => 'bar', 'foo2', 'bar2'),
);
foreach($arr as $sub_array) {
    echo $sub_array['foo'];
    echo $sub_array['bar'];
} 
```

`forEach()`迭代地将数组的每个键传递给一个变量 - 在上述情况下，`$sub_array`（一个合适的名称，因为您的数组包含子数组）。所以在循环体内，你需要询问。

# android - 使用 textStyle 测试整个活动的递归字体更改

> ID：11721296
> 
> 赞同：0
> 
> 时间：2012-07-30T12:12:07.663
> 
> 标签：android, fonts

我正在尝试创建一个函数来更改我的应用程序的字体。

目的是创建一个函数，我在适配器的结尾`onCreate()`或结尾处调用。`getView()`

但是我的 Style 测试导致崩溃，我不确定我是否理解得很好。如果有人有想法，将受到欢迎。

编辑：下面的代码是正确的！

```
 public static boolean recursiveFontSetting(View v){

     if( v instanceof ViewGroup){
         for(int i = 0;i<((ViewGroup) v).getChildCount();i++){
             recursiveFontSetting(((ViewGroup) v).getChildAt(i)); 
         }
         return true;
     } else if (v instanceof TextView){
        TextView e = (TextView) v;
        if(e.getTypeface()!=null && e.getTypeface().getStyle()==Typeface.BOLD){
            e.setTypeface(Constants.fontBold, Typeface.NORMAL);
        }else{

        e.setTypeface(Constants.fontReg);
        }
         return true;
     } 
     else if( v instanceof Button){
         Button e = (Button) v;
         if(e.getTypeface()!=null && e.getTypeface().getStyle()==Typeface.BOLD){
                e.setTypeface(Constants.fontBold, Typeface.NORMAL);
            }else{

            e.setTypeface(Constants.fontReg);
            }
         return true;
     }
     return false;
 } 
```

谢谢 ！

# php - 通过将数组拆分为 2 来重新排序数组并将第一部分添加到末尾

> ID：11721300
> 
> 赞同：0
> 
> 时间：2012-07-30T12:12:28.943
> 
> 标签：php, arrays, split

我想将一个数组分成两部分并将第一个切片添加到末尾。它应该拆分的点设置在另一个变量中。

```
$where = 7;
$array = array( 1 => "aaa", 2 => "bbb", 7 => "ccc", 13 => "ddd", 20 => "eee" );

//...code...
//I'd like to have

$array = array(7 => "ccc", 13 => "ddd", 20 => "eee", 1 => "aaa", 2 => "bbb" ); 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:35:09.513

您可以使用[`array_slice()`](http://php.net/array_slice)偏移*量*来拆分数组，并使用数组联合运算符连接两个块。

```
$where = 7;
$array = array( 1 => "aaa", 2 => "bbb", 7 => "ccc", 13 => "ddd", 20 => "eee" );

$offset = array_search($where, array_keys($array), true);
if ($offset !== false) {
    $array = array_slice($array, $offset, null, true) + $array;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:28:52.607

```
function split_array($array, $where) {
    $temp_array = array();
    foreach ($array as $key => $value) {
         if($key != $where) {
               $temp_array[$key] = $value;
               unset($array[$key]);
         }
         else {
               break;
         }
    }
    //return array_merge($array, $temp_array);
    return ($array+$temp_array);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T12:22:52.603

```
foreach($array as $key=>$value)
{
    if ($key === $where)
    {
        break;
    }

    unset($array[$key]);
    $array[$key] = $value;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T12:22:53.670

您可以使用[array_slice()](http://php.net/manual/de/function.array-slice.php)将数组拆分两次 -->

```
$arr1 = array_slice($array, 0, $where-1);
$arr2 = array_slice($array, $where, count($array)-1);
$array = array();
$array[] = $arr2;
$array[] = $arr1; 
```

# c - 如何在 C 中将 uint32 转换为 uint64？

> ID：11721301
> 
> 赞同：-4
> 
> 时间：2012-07-30T12:12:32.363
> 
> 标签：c, uint32, uint64

im 将 uint32_t 十六进制数转换为 uint32_t BCD 数。并对 uint64 hex 到 BCD 做同样的事情......

我有这个来自 uint16

```
uint16_t CvtBcd(uint16_t HexNumber)
{
  return ((HexNumber/ 10) << 4) | (HexNumber% 10); 
} 
```

编辑：

我将把它用作外部代码，用于更大的程序。

```
// Converts a uint32_t hex number into uint32_t BCD number.
extern uint32_t Cvt32Bcd(uint32_t HexNumber)
{
  return ((HexNumber/10) << 8 | (HexNumber % 10));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:25:01.870

在二进制编码的十进制表示中，每个十进制数字需要四位，因此您不能将所有（无符号）整数转换为相同大小的 BCD 表示，通常您需要更大的类型。忽略该问题，将任意大小的无符号整数转换为其 BCD 表示的算法是

```
uintN_t convert_to_BCD(uintN_t n) {
    uintN_t bcd = 0;
    int shift = 0;
    while(n) {
        bcd |= (n % 10) << shift;
        n /= 10;
        shift += 4;
    }
    return bcd;
} 
```

为避免溢出，请使返回类型大于参数类型，但这当然不适用于最大的可用输入类型。然后，您可以使用一个数组`unsigned char`来保存数字，或者使用一个包含两个`uintN_t`s 的结构来保存结果。

# database - 如何在 DynamoDB 中创建 UUID？

> ID：11721308
> 
> 赞同：29
> 
> 时间：2012-07-30T12:12:51.610
> 
> 标签：database, node.js, nosql, amazon-dynamodb

在我的数据库方案中，我需要一个自动增量主键。我怎样才能实现这个功能？

PS 为了访问 DynamoDB，我使用 dynode ，[Node.js](https://github.com/Wantworthy/dynode)的模块。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-19T22:59:00.263

免责声明：我是 Dynamodb-mapper 项目的维护者

自动增量键的直观工作流程：

1.  获取最后一个计数器位置
2.  加 1
3.  使用新数字作为对象的索引
4.  保存新的计数器值
5.  保存对象

这只是为了解释潜在的想法。永远不要这样做，因为它不是原子的。在某些工作负载下，您可以将相同的 ID 分配给 2+ 个不同的对象，因为它不是原子的。这将导致数据丢失。

解决方案是使用**原子 ADD**操作以及**UpdateItem**的[ALL_NEW](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/API_UpdateItem.html)：

1.  原子地生成一个 ID
2.  使用新数字作为对象的索引
3.  保存对象

在最坏的情况下，应用程序在保存对象之前崩溃，但绝不会冒险两次分配相同的 ID。

还有一个问题：在哪里存储最后一个 ID 值？我们选择了：

```
{
    "hash_key"=-1, #0 was judged too risky as it is the default value for integers.
    "__max_hash_key__y"=N
} 
```

当然，为了可靠地工作，所有插入数据的应用程序都必须知道这个系统，否则你可能（再次）覆盖数据。

最后一步是自动化该过程。例如：

```
When hash_key is 0:
    atomically_allocate_ID()
actual_save() 
```

有关实现细节（Python，抱歉），请参阅[https://bitbucket.org/Ludia/dynamodb-mapper/src/8173d0e8b55d/dynamodb_mapper/model.py#cl-67](https://bitbucket.org/Ludia/dynamodb-mapper/src/8173d0e8b55d/dynamodb_mapper/model.py#cl-67)

说实话，我的公司不会在生产中使用它，因为大多数时候最好为用户找到另一个密钥，例如，对于用户，一个 ID，对于一个交易，一个日期时间，......

我在[dynamodb-mapper 的文档](http://dynamodb-mapper.readthedocs.org/en/latest/api/model.html#using-auto-incrementing-index)中写了一些示例，它可以很容易地外推到 Node.JS

如果您有任何问题，请随时提问。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-08-01T17:10:45.873

另一种方法是使用`UUID`主键生成器，因为它们*不太*可能发生冲突。

IMO，您更有可能在高可用`DynamoDB`表中合并主键计数器时遇到错误，而不是在生成`UUID`的 s 中发生冲突。

例如，在节点中：

`npm install uuid`

```
var uuid = require('uuid');

// Generate a v1 (time-based) id
uuid.v1(); // -> '6c84fb90-12c4-11e1-840d-7b25c5ee775a'

// Generate a v4 (random) id
uuid.v4(); // -> '110ec58a-a0f2-4ac4-8393-c866d813b8d1' 
```

取自 SO [answer](https://stackoverflow.com/a/23327039/410072)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-21T21:44:40.037

如果您对递增 id 中的间隙感到满意，并且只对与添加行的顺序大致对应的情况感到满意，您可以自己滚动：创建一个名为 NextIdTable 的单独表，带有一个主键 (数字），称它为计数器。

每次你想生成一个新的 id 时，你会做以下事情：

*   在 NextIdTable 上执行 GetItem 以读取 Counter 的当前值 --> curValue
*   在 NextIdTable 上执行 PutItem 以将 Counter 的值设置为 curValue + 1。将此设置为条件 PutItem，这样如果 Counter 的值发生更改，它将失败。
*   如果该条件 PutItem 失败，则意味着其他人与您同时执行此操作。重来。
*   如果成功，则 curValue 是您的新唯一 ID。

当然，如果您的进程在实际应用该 ID 之前崩溃，您将“泄漏”它并在您的 ID 序列中出现间隙。如果您与其他进程同时执行此操作，则其中一个将获得值 39，而你们中的一个将获得值 40，并且无法保证它们将实际应用于您的数据表中的顺序；得到 40 的人可能会在得到 39 的人之前写它。但它确实给你一个粗略的排序。

node.js 中条件 PutItem 的参数在此处详细说明。 [http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/frames.html#!AWS/DynamoDB.html](http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/frames.html#!AWS/DynamoDB.html)。如果您之前从 Counter 中读取了 38 的值，那么您的条件 PutItem 请求可能如下所示。

```
var conditionalPutParams = {
    TableName: 'NextIdTable',
    Item: {
        Counter: {
            N: '39'
        }
    },
    Expected: {
        Counter: {
            AttributeValueList: [
                {
                    N: '38'
                }
            ],
            ComparisonOperator: 'EQ'
        }
    }
}; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-04-26T10:20:07.510

*除了@yadutaf 的回答*

AWS 支持[原子计数器](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/WorkingWithItems.html#WorkingWithItems.AtomicCounters)。

创建一个单独的表 ( `order_id`)，其中一行包含最新的 order_number：

```
+----+--------------+
| id | order_number |
+----+--------------+
|  0 |         5000 |
+----+--------------+ 
```

这将允许增加 order_number`1`并在 AWS DynamoDB 的回调中获得增加的结果：

```
config={
  region: 'us-east-1',
  endpoint: "http://localhost:8000"
};
const docClient = new AWS.DynamoDB.DocumentClient(config); 

let param = {
            TableName: 'order_id',
            Key: {
                "id": 0
            },
            UpdateExpression: "set order_number = order_number + :val",
            ExpressionAttributeValues:{
                ":val": 1
            },
            ReturnValues: "UPDATED_NEW"
        };

docClient.update(params, function(err, data) {
   if (err) {
                console.log("Unable to update the table. Error JSON:", JSON.stringify(err, null, 2));
   } else {
                console.log(data);
                console.log(data.Attributes.order_number); // <= here is our incremented result
    }
  }); 
```

请注意，在*极少数*情况下，它们可能是调用方点和 AWS API 之间的连接问题。这将导致 dynamodb 行增加，而您将收到连接错误。因此，可能会出现一些未使用的递增值。

您可以在表格中使用增量`data.Attributes.order_number`，例如插入`{id: data.Attributes.order_number, otherfields:{}}`表格`order`。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-01-10T17:00:47.163

对于那些使用 Java 编码的人，[DynamoDBMapper](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBMapper.html)现在可以代表您生成唯一的 UUID。

> DynamoDBAutoGeneratedKey
> 
> 将分区键或排序键属性标记为自动生成。DynamoDBMapper 将在保存这些属性时生成一个随机 UUID。只有字符串属性可以标记为自动生成的键。

像这样使用[DynamoDBAutoGeneratedKey](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBMapper.Annotations.html)注释

```
@DynamoDBTable(tableName="AutoGeneratedKeysExample")
public class AutoGeneratedKeys { 
    private String id;

    @DynamoDBHashKey(attributeName = "Id")
    @DynamoDBAutoGeneratedKey
    public String getId() { return id; }
    public void setId(String id) { this.id = id; } 
```

正如您在上面的示例中看到的，您可以将 DynamoDBAutoGeneratedKey 和 DynamoDBHashKey 注释应用于同一属性以生成唯一的哈希键。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-07-30T21:01:13.790

我不相信 SQL 风格的自动增量是可能的，因为这些表是在多台机器上分区的。我在 PHP 中生成自己的 UUID 来完成这项工作，我相信你可以在 javascript 中 提出[类似的东西。](https://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-05-19T08:41:38.697

我遇到了同样的问题，并为此目的创建了一个小型 Web 服务。请参阅此博客文章，其中解释了我如何将[stateful.co](http://www.stateful.co)与 DynamoDB 一起使用以模拟自动增量功能：[http ://www.yegor256.com/2014/05/18/cloud-autoincrement-counters.html](http://www.yegor256.com/2014/05/18/cloud-autoincrement-counters.html)

[基本上，您在stateful.co](http://www.stateful.co)注册一个原子计数器，并在每次需要新值时通过 RESTful API 递增它。该服务是免费的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-05-14T05:20:36.627

从性能的角度来看，自动增量并不好，因为它会使特定的分片过载，同时让其他分片保持空闲，如果您将数据存储到 Dynamodb，它不会进行均匀分布。

`awsRequestId`看起来它实际上是 V.4 UUID（随机），下面的代码片段尝试一下：

```
exports.handler = function(event, context, callback) {
    console.log('remaining time =', context.getRemainingTimeInMillis());
    console.log('functionName =', context.functionName);
    console.log('AWSrequestID =', context.awsRequestId);
    callback(null, context.functionName);
}; 
```

如果您想自己生成，可以使用[https://www.npmjs.com/package/uuid](https://www.npmjs.com/package/uuid)或[Ulide](https://github.com/ulid/javascript)根据[RFC-4122生成不同版本的 UUID](http://www.ietf.org/rfc/rfc4122.txt)

*   V1（基于时间戳）
*   V3（命名空间）
*   V4（随机）

对于 Go 开发人员，您可以使用来自[Google 的 UUID](https://github.com/google/uuid)、 [Pborman](https://github.com/pborman/uuid)或[Satori](https://github.com/satori/go.uuid)的这些包。Pborman 的性能更好，查看这些[文章和基准](http://antoniomo.com/blog/2017/05/28/unique-ids-in-golang-part-2/)以了解更多详细信息。

可以在[此处](https://en.m.wikipedia.org/wiki/Universally_unique_identifier)找到有关通用唯一标识符规范的更多信息。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-13T11:57:19.697

创建新的`file.js`并输入以下代码：

```
exports.guid = function () {
    function _p8(s) {
        var p = (Math.random().toString(16)+"000000000").substr(2,8);
        return s ? "-" + p.substr(0,4) + "-" + p.substr(4,4) : p ;
    }
    return (_p8() + _p8(true) + _p8(true)+new Date().toISOString().slice(0,10)).replace(/-/g,"");
} 
```

然后您可以将此功能应用于主键ID。它将生成 UUID。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-15T19:08:31.720

如果您使用 NoSQL DynamoDB 然后使用 Dynamoose ORM，您可以轻松设置默认唯一 ID。这是简单的用户创建示例

// 用户.modal.js

```
const dynamoose = require("dynamoose");

const userSchema = new dynamoose.Schema(
  {
    id: {
      type: String,
      hashKey: true,
    },
    displayName: String,
    firstName: String,
    lastName: String,
  },
  { timestamps: true },
);

const User = dynamoose.model("User", userSchema);

module.exports = User; 
```

// User.controller.js

```
const { v4: uuidv4 } = require("uuid");    
const User = require("./user.model");

exports.create = async (req, res) => {
  const user = new User({ id: uuidv4(), ...req.body }); // set unique id
  const [err, response] = await to(user.save());
  if (err) {
    return badRes(res, err);
  }
  return goodRes(res, reponse);
}; 
```

# php - 如何在具有新行的同一张表上插入不同的值？

> ID：11721310
> 
> 赞同：0
> 
> 时间：2012-07-30T12:12:52.513
> 
> 标签：php, mysql

```
INSERT INTO registration( name, email, username) values('eswar',(select email from registration),'manikandan') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:21:18.003

正确的语法是这样的：

```
INSERT INTO registration( name, email, username) 
SELECT 'eswar', email, 'manikandan' FROM registration 
```

这将插入 n 行（注册表中的行数）。

要过滤它，您需要向 select 语句添加一个约束。

```
INSERT INTO registration( name, email, username) 
SELECT 'eswar', email, 'manikandan' FROM registration WHERE email="x@yahoo.com" 
```

您将常量值添加到 SELECT STATEMENT 而不是相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:09:02.647

为什么不简单地使用更新查询

```
UPDATE registration SET name='eswar', username = 'manikandan' WHERE email = 'email@mail.com' 
```

# javascript - 从网页的角度来看，Facebook 聊天窗口是如何工作的？

> ID：11721311
> 
> 赞同：0
> 
> 时间：2012-07-30T12:12:53.313
> 
> 标签：javascript, html, css

我最感兴趣的是他们如何在向上滚动消息时将回复框设置为在屏幕上具有固定位置，但在到达消息末尾时它会很好地停靠。

他们只使用 CSS 还是涉及一些聪明的 Javascript？

# html - HTML：如何在元素的类属性中使用 href

> ID：11721315
> 
> 赞同：3
> 
> 时间：2012-07-30T12:12:57.880
> 
> 标签：html, css

我在这个网站看到了一个不寻常的东西： [AccuWeather.com](http://www.accuweather.com/en/ca/toronto/m5g/weather-forecast/55488)
这个页面中的一些标签（比如`li`s）`href`在它的属性中有一个带有url的`Class`，如下图，
所以我想知道的是：

1- 为什么他们使用`href`and `url`in class 属性？

2-我该怎么做？

[截图 http://4ax.ir/images/screenaja.jpg](http://4ax.ir/images/screenaja.jpg "看荧光笔空间")。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T12:19:05.087

这没什么特别的。他们只是使用 JSON 编码将任意数据放入 DOM 元素中。`data-`HTML5 允许的新属性的替代方法。

你为什么要这样做？浏览器不会对其进行特殊处理，事实上 JSON 编码的数据使其成为无效的属性值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:20:24.510

> 1) 为什么他们在类属性中使用 href 和 url？

他们主要在`li`元素上做到这一点。我想这样做是为了向事件处理程序提供数据，以便导航到`click`或`mousedown`事件上的另一个页面。

> 2）我该怎么做？

基本上，他们在类名中存储了一个[JSON 对象。](https://developer.mozilla.org/en/JSON)可以使用 提取数据[`JSON.parse(...)`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)，但您不应该这样做。请改用 HTML5`data-xxx`属性。

# sql - 获取sql备份脚本的批处理文件

> ID：11721319
> 
> 赞同：0
> 
> 时间：2012-07-30T12:13:14.927
> 
> 标签：sql, file, batch-file, backup

有什么方法可以使用批处理文件从 SQL 数据库中获取所选脚本的备份...？

说 - 我在一个文件夹中有一个存储过程、一个函数和一个视图。

sp1.sql vie1.sql fn1.sql

在运行批处理文件之前，我想备份这些文件。

请注意：我不想进行整个数据库备份。仅提供的脚本。请帮助我实现这一目标...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:32:30.717

具体答案完全取决于您的数据库引擎的风格。但一般的答案是您需要从数据库的数据目录（*元数据*）中选择定义。函数和过程定义可能会完好无损。但是视图定义可能只是作为 SELECT 语句出现 - 您可能必须在它前面加上 CREATE VIEW XXXXXXX AS 部分。

# windows-phone-7 - 如何在 Windows Phone 7 中获取任务管理器详细信息？

> ID：11721322
> 
> 赞同：0
> 
> 时间：2012-07-30T12:13:18.270
> 
> 标签：windows-phone-7, windows-phone-7.1

![在此处输入图像描述](../Images/9b9079d6be2d8f5d4aae9fcbedef8eb3.png)

如何在 wp7 中以编程方式获取上述信息？请告诉我这个想法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:21:08.753

没有API，抱歉。Windows Phone 7 中的应用程序的构建方式禁止您获取此类系统级信息。

# php - 使用 HTTP Content-Type 标头指定字符编码

> ID：11721324
> 
> 赞同：0
> 
> 时间：2012-07-30T12:13:21.983
> 
> 标签：php, html

我使用 W3C mobileOK 检查器，它建议我使用 HTTP Content-Type 标头指定字符编码。我该怎么做

```
header(); 
```

感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:15:30.657

根据您的编码：

```
header('Content-type: text/html; charset=UTF-8'); 
```

# asp.net-mvc - ASP MVC 4 显示集合类型

> ID：11721326
> 
> 赞同：1
> 
> 时间：2012-07-30T12:13:25.000
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, razor, visual-studio-2012

我的第一个 ASP.MVC 4 项目有一个问题，其中一个页面（到目前为止只有绑定页面）在主要内容区域的顶部显示集合的类型。我试过摆脱它，但不知所措。

我很确定这是我做过的事情，但无法修复它。有什么帮助？？？

**问题在这里** ![页面顶部显示的问题](../Images/3a5354ad5c186132e817564f75c04cef.png)

**IE9 调试项目** ![IE 9 调试显示隐藏的可见性未应用](../Images/72d393d9716ffe0d6ea5fb2c886ddd93.png)

**控制器**

```
Public Class FailuresController
    Inherits Controller

    Function Index(model As IEnumerable(Of QSmartRectificationProvider.RectificationFaults)) As ActionResult
        ViewData("Message") = "Open Faults"
        Return View(Session("Failures"))
    End Function

End Class 
```

**_Layout.vbhtml**

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>QSmart Rectifications</title>
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <meta name="viewport" content="width=device-width" />
        @Styles.Render("~/Content/themes/base/css", "~/Content/css")
        @Scripts.Render("~/bundles/modernizr")
    </head>
    <body>
        <header>
            <div class="content-wrapper">
                <div class="float-right">
                    <nav>
                        <ul id="menu">
                            <li>@Html.ActionLink("Log Out", "Index", "Home")</li>
                        </ul>
                    </nav>
                </div>
            </div>
        </header>
        <div id="body">
            @RenderSection("featured", required:=false)
            <section class="content-wrapper main-content clear-fix">
                @RenderBody()
            </section>
        </div>
        <footer>
            <p>@DateTime.Now.Year - JCB Excavators LTD</p>
        </footer>

        @Scripts.Render("~/bundles/jquery")
        @RenderSection("scripts", required:=False)
    </body>
</html> 
```

**索引.vbhtml**

```
@model QSmartRectification.QSmartRectificationProvider.RectificationFaults

@Code
    ViewData("Title") = "Open Failures"
End Code
@section featured
    <section class="featured">
        <div class="content-wrapper" >
            <p class="site-title float-left">@Html.ActionLink("QSmart Rectification Sign Off", "Index", "Home")</p>
            <input type="image" src="../../Images/Product.png" />
        </div>
    </section>
End Section
<br />
@Using Html.BeginForm()
@Html.ValidationSummary()
@<fieldset class="fieldset clear-fix">
    <legend>Open Faults</legend>
        <section class="content">
            <ul class="column">
                @For Each item As QSmartRectification.QSmartRectificationProvider.RectificationFaults In Model
                    @<li>
                        <section class="block">
                            <a href="#"><img alt="../../Images/Default.png"; src="@String.Format("../../Images/{0}.png", item.MajorAssembly)"/></a>
                            <label class="header">Zone</label>
                            <label>@item.ZoneName</label> 
                            <label class="header">Major Assembly</label>
                            <label>@item.MajorAssembly</label> 
                            <label class="header">Sub Assembly</label>
                            <label>@item.SubAssembly</label> 
                            <label class="header">Component Assembly</label>
                            <label>@item.ComponentAssembly</label> 
                            <label class="header">Business Test</label>
                            <label>@item.BusinessTest</label> 
                            <label class="header">Fault Code</label>
                            <label>@item.FaultCode</label> 
                            <label class="header">Fault Code Detail</label>
                            <label>@item.FaultCodeDetail</label> 
                        </section>
                    </li>
                Next            
            </ul>
        </section>
</fieldset>
End Using 
```

**网站.css**

```
html {
    margin: 0;
    padding: 0;
    background-color:#fff;
}

body {
    background-color: #fff;
    border-top: solid 10px #fff;
    font-size: .85em;
    font-family: "Segoe UI", Verdana, Helvetica, Sans-Serif;
    margin: 0;
    padding: 0;
}

a {
    color: #333;
    outline: none;
    padding-left: 3px;
    padding-right: 3px;
    text-decoration: none;
    clear:none;    
}
b
    a:link, a:visited,
    a:active, a:hover {
        color: #333;
    }

    a:hover {
        text-decoration:underline;
    }

.float-left {
    float: left;
}

.float-right {
    float: right;
}

.clear-fix:after {
    content: ".";
    clear: both;
    display: block;
    height: 0;
    visibility: hidden;
}

h1, h2, h3,
h4, h5, h6 {
    color: #fff;
    margin-bottom: 0;
    padding-bottom: 0;
}

h1 {
    font-size: 2em;
}

h2 {
    font-size: 1.75em;
}

h3 {
    font-size: 1.2em;
}

h4 {
    font-size: 1.1em;
}

h5, h6 {
    font-size: 1em;
}

/* main layout
----------------------------------------------------------*/
.content-wrapper {
    margin: 0 auto;
    max-width: 960px;
    background-color:#fff;
}

#body {
    clear: both;
    padding-bottom: 35px;
}

footer {
    clear: both;
    font-size: .8em;
    height: 100px;
}
    footer .float-left,
    footer .float-right {
        float: none;
    }

    footer {
        text-align: center;
        height: auto;
        padding: 10px 0;
    }

        footer p {
            margin: 0;
            color:#999;
        }

/* menu
----------------------------------------------------------*/
ul#menu {
    font-size: 1.3em;
    font-weight: 600;
    margin: 0;
    text-align: right;
}

    ul#menu li {
        display: inline;
        list-style: none;
        padding-left: 15px;
    }

        ul#menu li a {
            background: none;
            color:#999;
            text-decoration: none;
            font-size: 2em;
        }

        ul#menu li a:hover {
            color: #333;
            text-decoration: none;
        }

/* page elements
----------------------------------------------------------*/
/* featured */
.featured {
    background-color:#fff;
}

    .featured .content-wrapper {
        background-color: #eb7c04;
        background-image: -ms-linear-gradient(left, #eb7c04 0%, #fff 100%);
        background-image: -o-linear-gradient(left, #eb7c04 0%, #fff 100%);
        background-image: -webkit-gradient(linear, left top, right top, color-stop(0, #f8b589), color-stop(1, #fff));
        background-image: -webkit-linear-gradient(left, #eb7c04 0%, #fff 100%);
        background-image: linear-gradient(left, #eb7c04 0%, #fff 100%);
        color: #f8b589;
        padding: 5px 40px 5px 40px;
        text-align:right;
        display:normal;
    }

        .featured .site-title {
            font-family: Rockwell, Consolas, "Courier New", Courier, monospace;
            font-size: 3em;
            color:#fff;
            margin: 20px 0;
            padding-top:10px;
        }   

        .featured hgroup.title h1, .featured hgroup.title h2 {
            color: #fff;
        }

        .featured p {
            font-size: 1.1em;
        }  

/* page titles */
hgroup.title {
    margin-bottom: 10px;
}

hgroup.title h1, hgroup.title h2 {
    display: inline;
}

hgroup.title h2 {
    font-weight: normal;
    margin-left: 3px;
}

/* features */
section.feature {
    width: 300px;
    float: left;
    padding: 10px;
}

/* ordered list */
ol.round {
    list-style-type: none;
    padding-left: 0;
}
    ol.round li {
        margin: 25px 0;
        padding-left: 45px;
    }

/* content */
article {
    float: left;
    width: 70%;
}

aside {
    float: right;
    width: 25%;
}

    aside ul {
        list-style: none;
        padding: 0;
    }

        aside ul li {
            background: url("../Images/bullet.png") no-repeat 0 50%;
            padding: 2px 0 2px 20px;
        }

label {
    padding-right: 20px;
    text-indent: -15px;
}

/* ajax login/registration dialog */
.ui-dialog {
    font-family: inherit;
    font-size: 1.0em;
    -moz-border-radius: 0;
    -webkit-border-radius: 0;
    border-radius: 0;
    border: 0 none;
}

    .ui-dialog input {
        font-family: inherit;
        font-size: 1.25em;
    }

.ui-dialog-titlebar {
    color: inherit;
    font-weight: inherit;
    border: 0 none;
    background: none;
    float: right;    
}

.ui-dialog-titlebar-close {
    -moz-border-radius: 0;
    -webkit-border-radius: 0;
    border-radius: 0;
}

.ui-widget-header {   
    border: 0 none;
    background: none;  
}

.modal-popup {
}
    .modal-popup input[type="text"],
    .modal-popup input[type="password"] {
        width: 90%;
    }

/* info and errors */
.message-info {
    border: 1px solid;
    clear: both;
    padding: 10px 20px;
}

.message-error {
    clear: both;
    color: #e80c4d;
    font-size: 1.1em;
    font-weight: bold;
    margin: 20px 0 10px 0;
}

.message-success {
    color: #7ac0da;
    font-size: 1.3em;
    font-weight: bold;
    margin: 20px 0 10px 0;
}

.error {
    color: #e80c4d;
}

/* styles for validation helpers */
.field-validation-error {
    color: #e80c4d;
    font-weight: bold;
}

.field-validation-valid {
    display: none;
}

input[type="text"].input-validation-error,
input[type="password"].input-validation-error {
    border: 1px solid #e80c4d;
}

.validation-summary-errors {
    color: #e80c4d;
    font-weight: bold;
    font-size: 1.1em;
}

.validation-summary-valid {
    display: none;
}

/********************
*   Mobile Styles   *
********************/
@media only screen and (max-width: 850px) {

    /* header
    ----------------------------------------------------------*/
    header .float-left,
    header .float-right {
        float: none;
    }

    /* logo */
    header .site-title {
        margin: 10px;
        text-align: center;
    }

    /* menu */
    nav {
        margin-bottom: 5px;
    }

    ul#menu {
        margin: 0;
        padding: 0;
        text-align: center;
    }

        ul#menu li {
            margin: 0;
            padding: 0;
        }

    /* main layout
    ----------------------------------------------------------*/
    .main-content,
    .featured + .main-content {
        background-position: 10px 0;
    }

    .content-wrapper {
        padding-right: 10px;
        padding-left: 10px;
        background-color:#fff;
    }

    .featured .content-wrapper {
        padding: 10px;
    }

    /* page content */
    article, aside {
        float: none;
        width: 100%;
    }

    /* ordered list */
    ol.round {
        list-style-type: none;
        padding-left: 0;
    }

        ol.round li {
            padding-left: 10px;
            margin: 25px 0;
        }

            ol.round li.zero,
            ol.round li.one,
            ol.round li.two,
            ol.round li.three,
            ol.round li.four,
            ol.round li.five,
            ol.round li.six,
            ol.round li.seven,
            ol.round li.eight,
            ol.round li.nine {
                background: none;
            }

     /* features */
     section.feature {
        float: none;
        padding: 10px;
        width: auto;
     }

        section.feature img {
            color: #999;
            content: attr(alt);
            font-size: 1.5em;
            font-weight: 600;
        }

}

    .fieldset {
        border-radius: -moz-border-radius(15px);
        border-radius: -webkit-border-radius(15px);
        border-radius: -ms-border-radius(15px);
        border-radius:15px;        
        width: 100%;
        background: #f7d7a5;
        padding: 3px;
        margin-left:10px;
        margin-right:10px;
    }
    .fieldset legend {
        background: #CCA383;
        padding: 6px;
        font-weight: bold;
        border-radius: -moz-border-radius(15px);
        border-radius: -webkit-border-radius(15px);
        border-radius: -ms-border-radius(15px);
        border-radius:15px;        
    }  

    /* content layouts
    ----------------------------------------------------------*/
    .content {
        position: relative;
        float: left; 
        -moz-border-radius: 15px;
        -webkit-border-radius: 15px;
        -ms-border-radius: 15px;
        border-radius: 15px;  
        margin-right: 15px;
        margin-left: 15px;
    }

        .content h2
        {
            font-size: 3em;
            font-weight: 600;
            color:red;        
        }

        .content label.checkbox {
            display: inline;
        }

        .content input[type="text"],
        .content input[type="password"] {
            border: 1px solid #e2e2e2;
            color: #333;
            font-size: 4em;
            width: 400px;
        }

            .content input[type="text"]:focus,
            .content input[type="password"]:focus {
                border: 1px solid #7ac0da;
            }

        .content label {
            font-size: 4em;
            font-weight: 600;
        }

        .content input[type="submit"],.content input[type="button"] {
            background-color: #eb7c04;
            background: #eb7c04; /* Old browsers */
            background: -moz-linear-gradient(top,  #eb7c04 1%, #f1c487 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(1%,#eb7c04), color-stop(100%,#f1c487)); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top,  #eb7c04 1%,#f1c487 100%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(top,  #eb7c04 1%,#f1c487 100%); /* Opera 11.10+ */
            background: -ms-linear-gradient(top,  #eb7c04 1%,#f1c487 100%); /* IE10+ */
            background: linear-gradient(top,  #eb7c04 1%,#f1c487 100%); /* W3C */
            border: 4px solid #000;
            border-radius: -moz-border-radius(15px);
            border-radius: -webkit-border-radius(15px);
            border-radius: -ms-border-radius(15px);
            border-radius:15px;
            cursor: pointer;
            font-size: 3em;
            font-weight: 600;
            padding: 7px;       
        }

        .content ul.column {
            width: 100%;
            padding: 0;
            margin: 10px 0;
            list-style-type: none;
        }

        .content ul.column li {
            float: left;
            max-width: 230px;
            display: inline;
        }

        .content .block {
            margin: 5px;
            padding: 10px;
            background: #eb7c04;
            -moz-border-radius: 10px;
            -webkit-border-radius: 10px;
            border-radius:10px;
            height: 400px;
            width: 200px;
            max-height: 400px;
            max-width: 200px;            
            min-height: 400px;
            min-width: 200px;                     
        }

        .content .block a {
            color: #FFF;
        }

        .content .block img {
            width: 89%;  
            height: 100px;
            padding: 5px;
            margin: 0px;
            background:#fff;
            -ms-interpolation-mode: bicubic; 
        }

        .content .block label
        {
            font-weight: 200;
            font-size: 1em;
            text-indent: 5px;
            display: block;
        }

        .content .block label.header
        {
            font-weight: 600;
            text-decoration: underline;
        } 
```

**查看源代码片段**

```
 <div id="body">

     <section class="featured">

 <div class="content-wrapper">

  <p class="site-title float-left">
   <a href="/">QSmart Rectification Sign Off</a>
  </p>

              <input type="image" src="../../Images/Product.png" />

 </div>

     </section>

             <section class="content-wrapper main-content clear-fix">
                 System.Linq.OrderedEnumerable`2[QSmartRectification.QSmartRectificationProvider.RectificationFaults,System.Int64] QSmartRectification.QSmartRectificationProvider.RectificationFaults

 <br />
 <form action="/Failures" method="post">
  <div class="validation-summary-valid" data-valmsg-summary="true">
   <ul>
    <li style="display: none;"></li>

   </ul>
  </div>
  <fieldset class="fieldset clear-fix">

       <legend>Open Faults</legend>
           <section class="content">

   <ul class="column">

    <li>

                             <section class="block">
                                 <a href="#"><img alt="../../Images/Default.png" src="../../Images/Hydraulic System.png" ;="" /></a>

                                 <label class="header">Zone</label>
                                 <label>Wheeled SIP 1</label> 
                                 <label class="header">Major Assembly</label>
                                 <label>Hydraulic System</label> 
                                 <label class="header">Sub Assembly</label>
                                 <label>Valve Blocks</label> 
                                 <label class="header">Component Assembly</label>
                                 <label>Hammer Valve</label> 
                                 <label class="header">Business Test</label>
                                 <label>Hammer Hoses</label> 
                                 <label class="header">Fault Code</label>
                                 <label>Adjust / Align</label> 
                                 <label class="header">Fault Code Detail</label>
                                 <label>Fouling</label> 
                             </section>

    </li>

    <li>

                             <section class="block">
                                 <a href="#"><img alt="../../Images/Default.png" src="../../Images/Engine Bay.png" ;="" /></a>

                                 <label class="header">Zone</label>
                                 <label>Wheeled SIP 1</label> 
                                 <label class="header">Major Assembly</label>
                                 <label>Engine Bay</label> 
                                 <label class="header">Sub Assembly</label>
                                 <label>Air Conditioning</label> 
                                 <label class="header">Component Assembly</label>
                                 <label>Compressor</label> 
                                 <label class="header">Business Test</label>
                                 <label>Installation</label> 
                                 <label class="header">Fault Code</label>
                                 <label>Adjust / Align</label> 
                                 <label class="header">Fault Code Detail</label>
                                 <label>Twisted</label> 
                             </section>

    </li> 
```

**来自 WCF 服务的模型片段**

```
'''<remarks/>
<System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.17626"),  _
 System.SerializableAttribute(),  _
 System.Diagnostics.DebuggerStepThroughAttribute(),  _
 System.ComponentModel.DesignerCategoryAttribute("code"),  _
 System.Xml.Serialization.XmlTypeAttribute([Namespace]:="http://schemas.datacontract.org/2004/07/vFrame.Service.Qsmart.Sync")>  _
Partial Public Class RectificationFaults
    Inherits Object
    Implements System.ComponentModel.INotifyPropertyChanged

    Private auditScoreField As String

    Private businessTestField As String

    Private commentField As String

    Private componentAssemblyField As String

    Private createdByField As String

    Private failureIDField As Long

    Private failureIDFieldSpecified As Boolean

    Private faultField As String

    Private faultAreaField As String

    Private faultCodeField As String

    Private faultCodeDetailField As String

    Private fixedByCommentField As String

    Private fixedByFaultRectificationIDField As Integer

    Private fixedByFaultRectificationIDFieldSpecified As Boolean

    Private fixedByIDField As Integer

    Private fixedByIDFieldSpecified As Boolean

    Private majorAssemblyField As String

    Private modelNameField As String

    Private shortagePartField As String

    Private subAssemblyField As String

    Private zoneNameField As String 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:25:58.397

好的几件事，`@`从元素中删除符号`fieldset`第二次更改 for Each 语法，最后这是一个建议，您应该使用 @html 帮助程序而不是使用纯 html，您的代码应该像这样

```
<fieldset class="fieldset clear-fix">
<legend>Open Faults</legend>

<ul>
    @For Each item In Model
        Dim currentItem = item
        @<li>
            <section class="content">
            <a href="#"><img alt="../../Images/Default.png"; src="@String.Format("../../Images/{0}.png", item.MajorAssembly)"/></a>
            </section>
            <label class="header">Zone</label>
            <label>@item.ZoneName</label> 
        </li>
    Next
</ul> 
```

更新

检查控制器的操作，因为假设您从 wcf 服务调用此操作，您应该像这样将数据传递给视图

```
Public Class FailuresController
Inherits Controller

Function Index(model As IEnumerable(Of QSmartRectificationProvider.RectificationFaults)) As ActionResult
    ViewData("Message") = "Open Faults"
    'Return View(Session("Failures"))
    Return View(model) 'this is how the data is sending to the view
End Function

End Class 
```

# android - Android中的道路路径

> ID：11721327
> 
> 赞同：0
> 
> 时间：2012-07-30T12:13:35.053
> 
> 标签：android, android-mapview

我是 android 新手，我正在测试一个在 android 中提供道路路径的应用程序。但是我在这里有很多错误（如下所示）。

```
 public class MapRouteActivity extends MapActivity {

        LinearLayout linearLayout;
        MapView mapView;
        private Road mRoad;

        @Override
        public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.main);
                mapView = (MapView) findViewById(R.id.mapview);
                mapView.setBuiltInZoomControls(true);

                new Thread() {
                        @Override
                        public void run() {
                                double fromLat = 49.85, fromLon = 24.016667, toLat = 50.45, toLon = 30.523333;
                                String url = RoadProvider
                                                .getUrl(fromLat, fromLon, toLat, toLon);
                                InputStream is = getConnection(url);
                                mRoad = RoadProvider.getRoute(is);
                                mHandler.sendEmptyMessage(0);
                        }
                }.start();
        }

        Handler mHandler = new Handler() {
                public void handleMessage(android.os.Message msg) {
                        TextView textView = (TextView) findViewById(R.id.description);
                        textView.setText(mRoad.mName + " " + mRoad.mDescription);
                        MapOverlay mapOverlay = new MapOverlay(mRoad, mapView);
                        List<Overlay> listOfOverlays = mapView.getOverlays();
                        listOfOverlays.clear();
                        listOfOverlays.add(mapOverlay);
                        mapView.invalidate();
                };
        };

        private InputStream getConnection(String url) {
                InputStream is = null;
                try {
                        URLConnection conn = new URL(url).openConnection();
                        is = conn.getInputStream();
                } catch (MalformedURLException e) {
                        e.printStackTrace();
                } catch (IOException e) {
                        e.printStackTrace();
                }
                return is;
        }

        @Override
        protected boolean isRouteDisplayed() {
                return false;
        }
}

class MapOverlay extends com.google.android.maps.Overlay {
        Road mRoad;
        ArrayList<GeoPoint> mPoints;

        public MapOverlay(Road road, MapView mv) {
                mRoad = road;
                if (road.mRoute.length > 0) {
                        mPoints = new ArrayList<GeoPoint>();
                        for (int i = 0; i < road.mRoute.length; i++) {
                                mPoints.add(new GeoPoint((int) (road.mRoute[i][1] * 1000000),
                                                (int) (road.mRoute[i][0] * 1000000)));
                        }
                        int moveToLat = (mPoints.get(0).getLatitudeE6() + (mPoints.get(
                                        mPoints.size() - 1).getLatitudeE6() - mPoints.get(0)
                                        .getLatitudeE6()) / 2);
                        int moveToLong = (mPoints.get(0).getLongitudeE6() + (mPoints.get(
                                        mPoints.size() - 1).getLongitudeE6() - mPoints.get(0)
                                        .getLongitudeE6()) / 2);
                        GeoPoint moveTo = new GeoPoint(moveToLat, moveToLong);

                        MapController mapController = mv.getController();
                        mapController.animateTo(moveTo);
                        mapController.setZoom(7);
                }
        }

        @Override
        public boolean draw(Canvas canvas, MapView mv, boolean shadow, long when) {
                super.draw(canvas, mv, shadow);
                drawPath(mv, canvas);
                return true;
        }

        public void drawPath(MapView mv, Canvas canvas) {
                int x1 = -1, y1 = -1, x2 = -1, y2 = -1;
                Paint paint = new Paint();
                paint.setColor(Color.GREEN);
                paint.setStyle(Paint.Style.STROKE);
                paint.setStrokeWidth(3);
                for (int i = 0; i < mPoints.size(); i++) {
                        Point point = new Point();
                        mv.getProjection().toPixels(mPoints.get(i), point);
                        x2 = point.x;
                        y2 = point.y;
                        if (i > 0) {
                                canvas.drawLine(x1, y1, x2, y2, paint);
                        }
                        x1 = x2;
                        y1 = y2;
                }
        }
} 
```

当我午餐这段代码时，我遇到了所有这些错误，如下所示：

```
07-30 14:03:08.969: W/dalvikvm(6934): Unable to resolve superclass of Lcom/test/MapRouteActivity; (17)
07-30 14:03:08.969: W/dalvikvm(6934): Link of class 'Lcom/test/MapRouteActivity;' failed
07-30 14:03:08.969: W/dalvikvm(6934): threadid=1: thread exiting with uncaught exception (group=0x2aac87c8)
07-30 14:03:08.979: E/AndroidRuntime(6934): FATAL EXCEPTION: main
07-30 14:03:08.979: E/AndroidRuntime(6934): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.test/com.test.MapRouteActivity}: java.lang.ClassNotFoundException: com.test.MapRouteActivity in loader dalvik.system.PathClassLoader[/data/app/com.test-1.apk]
07-30 14:03:08.979: E/AndroidRuntime(6934):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
07-30 14:03:08.979: E/AndroidRuntime(6934):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-30 14:03:08.979: E/AndroidRuntime(6934):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-30 14:03:08.979: E/AndroidRuntime(6934):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-30 14:03:08.979: E/AndroidRuntime(6934):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-30 14:03:08.979: E/AndroidRuntime(6934):     at android.os.Looper.loop(Looper.java:123)
07-30 14:03:08.979: E/AndroidRuntime(6934):     at android.app.ActivityThread.main(ActivityThread.java:4627)
07-30 14:03:08.979: E/AndroidRuntime(6934):     at java.lang.reflect.Method.invokeNative(Native Method)
07-30 14:03:08.979: E/AndroidRuntime(6934):     at java.lang.reflect.Method.invoke(Method.java:521)
07-30 14:03:08.979: E/AndroidRuntime(6934):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-30 14:03:08.979: E/AndroidRuntime(6934):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-30 14:03:08.979: E/AndroidRuntime(6934):     at dalvik.system.NativeStart.main(Native Method)
07-30 14:03:08.979: E/AndroidRuntime(6934): Caused by: java.lang.ClassNotFoundException: com.test.MapRouteActivity in loader dalvik.system.PathClassLoader[/data/app/com.test-1.apk]
07-30 14:03:08.979: E/AndroidRuntime(6934):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
07-30 14:03:08.979: E/AndroidRuntime(6934):     at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
07-30 14:03:08.979: E/AndroidRuntime(6934):     at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
07-30 14:03:08.979: E/AndroidRuntime(6934):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
07-30 14:03:08.979: E/AndroidRuntime(6934):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
07-30 14:03:08.979: E/AndroidRuntime(6934):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:19:21.920

**使用下面的代码片段**

```
private List<Overlay> mapOverlays;

private Projection projection;  

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

linearLayout = (LinearLayout) findViewById(R.id.zoomview);
mapView = (MapView) findViewById(R.id.mapview);
mapView.setBuiltInZoomControls(true);

mapOverlays = mapView.getOverlays();        
projection = mapView.getProjection();
mapOverlays.add(new MyOverlay());        

}

@Override
protected boolean isRouteDisplayed() {
return false;

}

class MyOverlay extends Overlay{

public MyOverlay(){

}   

public void draw(Canvas canvas, MapView mapv, boolean shadow){
super.draw(canvas, mapv, shadow);

Paint   mPaint = new Paint();
mPaint.setDither(true);
mPaint.setColor(Color.RED);
mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
mPaint.setStrokeJoin(Paint.Join.ROUND);
mPaint.setStrokeCap(Paint.Cap.ROUND);
mPaint.setStrokeWidth(2);

GeoPoint gP1 = new GeoPoint(19240000,-99120000);
GeoPoint gP2 = new GeoPoint(37423157, -122085008);

Point p1 = new Point();
Point p2 = new Point();
Path path = new Path();

projection.toPixels(gP1, p1);
projection.toPixels(gP2, p2);

path.moveTo(p2.x, p2.y);
path.lineTo(p1.x,p1.y);

canvas.drawPath(path, mPaint);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:26:58.413

使用以下代码绘制路线路径。

MainActivity.java

```
public class MainActivity extends MapActivity {
    LinearLayout linearLayout;
    MapView mapView;
    private Road mRoad;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);

        new Thread() {
            @Override
            public void run() {
                double fromLat = 49.85, fromLon = 24.016667, toLat = 50.45, toLon = 30.523333;
                String url = RoadProvider
                        .getUrl(fromLat, fromLon, toLat, toLon);
                InputStream is = getConnection(url);
                mRoad = RoadProvider.getRoute(is);
                mHandler.sendEmptyMessage(0);
            }
        }.start();
    }

    Handler mHandler = new Handler() {
        public void handleMessage(android.os.Message msg) {
            TextView textView = (TextView) findViewById(R.id.description);
            textView.setText(mRoad.mName + " " + mRoad.mDescription);
            MapOverlay mapOverlay = new MapOverlay(mRoad, mapView);
            List<Overlay> listOfOverlays = mapView.getOverlays();
            listOfOverlays.clear();
            listOfOverlays.add(mapOverlay);
            mapView.invalidate();
        };
    };

    private InputStream getConnection(String url) {
        InputStream is = null;
        try {
            URLConnection conn = new URL(url).openConnection();
            is = conn.getInputStream();
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return is;
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }
}

class MapOverlay extends com.google.android.maps.Overlay {
    Road mRoad;
    ArrayList<GeoPoint> mPoints;

    public MapOverlay(Road road, MapView mv) {
        mRoad = road;
        if (road.mRoute.length > 0) {
            mPoints = new ArrayList<GeoPoint>();
            for (int i = 0; i < road.mRoute.length; i++) {
                mPoints.add(new GeoPoint((int) (road.mRoute[i][1] * 1000000),
                        (int) (road.mRoute[i][0] * 1000000)));
            }
            int moveToLat = (mPoints.get(0).getLatitudeE6() + (mPoints.get(
                    mPoints.size() - 1).getLatitudeE6() - mPoints.get(0)
                    .getLatitudeE6()) / 2);
            int moveToLong = (mPoints.get(0).getLongitudeE6() + (mPoints.get(
                    mPoints.size() - 1).getLongitudeE6() - mPoints.get(0)
                    .getLongitudeE6()) / 2);
            GeoPoint moveTo = new GeoPoint(moveToLat, moveToLong);

            MapController mapController = mv.getController();
            mapController.animateTo(moveTo);
            mapController.setZoom(7);
        }
    }

    @Override
    public boolean draw(Canvas canvas, MapView mv, boolean shadow, long when) {
        super.draw(canvas, mv, shadow);
        drawPath(mv, canvas);
        return true;
    }

    public void drawPath(MapView mv, Canvas canvas) {
        int x1 = -1, y1 = -1, x2 = -1, y2 = -1;
        Paint paint = new Paint();
        paint.setColor(Color.GREEN);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeWidth(3);
        for (int i = 0; i < mPoints.size(); i++) {
            Point point = new Point();
            mv.getProjection().toPixels(mPoints.get(i), point);
            x2 = point.x;
            y2 = point.y;
            if (i > 0) {
                canvas.drawLine(x1, y1, x2, y2, paint);
            }
            x1 = x2;
            y1 = y2;
        }
    }
} 
```

添加以下类

Point.java

```
public class Point {
    String mName;
    String mDescription;
    String mIconUrl;
    double mLatitude;
    double mLongitude;
} 
```

道路.java

```
public class Road {
    public String mName;
    public String mDescription;
    public int mColor;
    public int mWidth;
    public double[][] mRoute = new double[][] {};
    public Point[] mPoints = new Point[] {};
} 
```

RoadProvider.java

```
public class RoadProvider {

    public static Road getRoute(InputStream is) {
        KMLHandler handler = new KMLHandler();
        try {
            SAXParser parser = SAXParserFactory.newInstance().newSAXParser();
            parser.parse(is, handler);
        } catch (ParserConfigurationException e) {
            e.printStackTrace();
        } catch (SAXException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return handler.mRoad;
    }

    public static String getUrl(double fromLat, double fromLon, double toLat,
            double toLon) {// connect to map web service
        StringBuffer urlString = new StringBuffer();
        urlString.append("http://maps.google.com/maps?f=d&hl=en");
        urlString.append("&saddr=");// from
        urlString.append(Double.toString(fromLat));
        urlString.append(",");
        urlString.append(Double.toString(fromLon));
        urlString.append("&daddr=");// to
        urlString.append(Double.toString(toLat));
        urlString.append(",");
        urlString.append(Double.toString(toLon));
        urlString.append("&ie=UTF8&0&om=0&output=kml");
        return urlString.toString();
    }
}

class KMLHandler extends DefaultHandler {
    Road mRoad;
    boolean isPlacemark;
    boolean isRoute;
    boolean isItemIcon;
    private Stack<String> mCurrentElement = new Stack<String>();
    private String mString;

    public KMLHandler() {
        mRoad = new Road();
    }

    public void startElement(String uri, String localName, String name,
            Attributes attributes) throws SAXException {
        mCurrentElement.push(localName);
        if (localName.equalsIgnoreCase("Placemark")) {
            isPlacemark = true;
            mRoad.mPoints = addPoint(mRoad.mPoints);
        } else if (localName.equalsIgnoreCase("ItemIcon")) {
            if (isPlacemark)
                isItemIcon = true;
        }
        mString = new String();
    }

    public void characters(char[] ch, int start, int length)
            throws SAXException {
        String chars = new String(ch, start, length).trim();
        mString = mString.concat(chars);
    }

    public void endElement(String uri, String localName, String name)
            throws SAXException {
        if (mString.length() > 0) {
            if (localName.equalsIgnoreCase("name")) {
                if (isPlacemark) {
                    isRoute = mString.equalsIgnoreCase("Route");
                    if (!isRoute) {
                        mRoad.mPoints[mRoad.mPoints.length - 1].mName = mString;
                    }
                } else {
                    mRoad.mName = mString;
                }
            } else if (localName.equalsIgnoreCase("color") && !isPlacemark) {
                mRoad.mColor = Integer.parseInt(mString, 16);
            } else if (localName.equalsIgnoreCase("width") && !isPlacemark) {
                mRoad.mWidth = Integer.parseInt(mString);
            } else if (localName.equalsIgnoreCase("description")) {
                if (isPlacemark) {
                    String description = cleanup(mString);
                    if (!isRoute)
                        mRoad.mPoints[mRoad.mPoints.length - 1].mDescription = description;
                    else
                        mRoad.mDescription = description;
                }
            } else if (localName.equalsIgnoreCase("href")) {
                if (isItemIcon) {
                    mRoad.mPoints[mRoad.mPoints.length - 1].mIconUrl = mString;
                }
            } else if (localName.equalsIgnoreCase("coordinates")) {
                if (isPlacemark) {
                    if (!isRoute) {
                        String[] xyParsed = split(mString, ",");
                        double lon = Double.parseDouble(xyParsed[0]);
                        double lat = Double.parseDouble(xyParsed[1]);
                        mRoad.mPoints[mRoad.mPoints.length - 1].mLatitude = lat;
                        mRoad.mPoints[mRoad.mPoints.length - 1].mLongitude = lon;
                    } else {
                        String[] coodrinatesParsed = split(mString, " ");
                        int lenNew = coodrinatesParsed.length;
                        int lenOld = mRoad.mRoute.length;
                        double[][] temp = new double[lenOld + lenNew][2];
                        for (int i = 0; i < lenOld; i++) {
                            temp[i] = mRoad.mRoute[i];
                        }
                        for (int i = 0; i < lenNew; i++) {
                            String[] xyParsed = split(coodrinatesParsed[i], ",");
                            for (int j = 0; j < 2 && j < xyParsed.length; j++)
                                temp[lenOld + i][j] = Double
                                        .parseDouble(xyParsed[j]);
                        }
                        mRoad.mRoute = temp;
                    }
                }
            }
        }
        mCurrentElement.pop();
        if (localName.equalsIgnoreCase("Placemark")) {
            isPlacemark = false;
            if (isRoute)
                isRoute = false;
        } else if (localName.equalsIgnoreCase("ItemIcon")) {
            if (isItemIcon)
                isItemIcon = false;
        }
    }

    private String cleanup(String value) {
        String remove = "<br/>";
        int index = value.indexOf(remove);
        if (index != -1)
            value = value.substring(0, index);
        remove = "&#160;";
        index = value.indexOf(remove);
        int len = remove.length();
        while (index != -1) {
            value = value.substring(0, index).concat(
                    value.substring(index + len, value.length()));
            index = value.indexOf(remove);
        }
        return value;
    }

    public Point[] addPoint(Point[] points) {
        Point[] result = new Point[points.length + 1];
        for (int i = 0; i < points.length; i++)
            result[i] = points[i];
        result[points.length] = new Point();
        return result;
    }

    private static String[] split(String strString, String strDelimiter) {
        String[] strArray;
        int iOccurrences = 0;
        int iIndexOfInnerString = 0;
        int iIndexOfDelimiter = 0;
        int iCounter = 0;
        if (strString == null) {
            throw new IllegalArgumentException("Input string cannot be null.");
        }
        if (strDelimiter.length() <= 0 || strDelimiter == null) {
            throw new IllegalArgumentException(
                    "Delimeter cannot be null or empty.");
        }
        if (strString.startsWith(strDelimiter)) {
            strString = strString.substring(strDelimiter.length());
        }
        if (!strString.endsWith(strDelimiter)) {
            strString += strDelimiter;
        }
        while ((iIndexOfDelimiter = strString.indexOf(strDelimiter,
                iIndexOfInnerString)) != -1) {
            iOccurrences += 1;
            iIndexOfInnerString = iIndexOfDelimiter + strDelimiter.length();
        }
        strArray = new String[iOccurrences];
        iIndexOfInnerString = 0;
        iIndexOfDelimiter = 0;
        while ((iIndexOfDelimiter = strString.indexOf(strDelimiter,
                iIndexOfInnerString)) != -1) {
            strArray[iCounter] = strString.substring(iIndexOfInnerString,
                    iIndexOfDelimiter);
            iIndexOfInnerString = iIndexOfDelimiter + strDelimiter.length();
            iCounter += 1;
        }

        return strArray;
    }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/description"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <com.google.android.maps.MapView
        android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="Your API Key"
        android:clickable="true" />

</LinearLayout> 
```

将以下权限添加到您的 android 清单文件中。

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

# java - Illegalstateexception: getwriter() 已经被调用了这个响应

> ID：11721330
> 
> 赞同：2
> 
> 时间：2012-07-30T12:13:50.220
> 
> 标签：java, pdf

我正在尝试使用以下代码片段在浏览器中打开 pdf 文件：

```
 public ActionResult action(Request request, AspectModel arg1)
        throws ServletException {
    if ("PDF".equals(request.event())) {
    try{
    HttpServletResponse resp=(HttpServletResponse) request.getResponse();
    resp.setContentType("application/pdf");
    resp.setHeader("Content-Disposition","inline;filename=AccountOpeningSummary.pdf");
    resp.setHeader("Cache-Control", "cache, must-revalidate");
    resp.setHeader("Cache-Control", "no-store,public");
    resp.setDateHeader("Expires", 0);
    resp.setHeader("Pragma", "public");
    OutputStream OutStream = resp.getOutputStream();
    OutStream.write(infos,0,infos.length);
    OutStream.flush();        
    OutStream.close(); 
    }catch (Exception e) {
        System.out.println("PDF Write Exception...........................####"+e);
    }
    }
    return null;
} 
```

我收到以下错误：

```
java.lang.IllegalStateException: getOutputStream() has already been called for this response
    at org.apache.catalina.connector.Response.getWriter(Response.java:626)
    at org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:215)
    at javax.servlet.ServletResponseWrapper.getWriter(ServletResponseWrapper.java:105)
    at org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:125)
    at org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:118)
    at org.apache.jasper.runtime.JspWriterImpl.flush(JspWriterImpl.java:177)
    at abaxx.web.taglib.IncludeTag.doEndTag(IncludeTag.java:69)
    at org.apache.jsp.parts.index_jsp._jspx_meth_xx_005finclude_005f0(index_jsp.java:237)
    at org.apache.jsp.parts.index_jsp._jspService(index_jsp.java:93)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:593)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:530)
    at abaxx.core.foundation.internal.SelfDestroyingHttpServletRequestWrapper$1.include(SelfDestroyingHttpServletRequestWrapper.java:36)
    at abaxx.core.foundation.internal.SelfDestroyingHttpServletRequestWrapper$1.include(SelfDestroyingHttpServletRequestWrapper.java:36)
    at abaxx.web.parts.internal.ServletRequestContext.doInclude(ServletRequestContext.java:85)
    at abaxx.web.parts.RequestContext.include(RequestContext.java:429)
    at abaxx.web.parts.VisualPart.basicDisplay(VisualPart.java:740)
    at abaxx.web.parts.CompositePart.basicDisplay(CompositePart.java:111)
    at abaxx.web.parts.VisualPart.doDisplay(VisualPart.java:762)
    at abaxx.web.control.DisplayLoopInterceptor.display(DisplayLoopInterceptor.java:233)
    at abaxx.web.security.StandardSecurityPolicy$DisplayHook.display(StandardSecurityPolicy.java:321)
    at abaxx.web.control.PerformanceMonitor$DisplayPerformanceInterceptor.display(PerformanceMonitor.java:187)
    at abaxx.web.control.DisplayLoopInterceptor.doDisplay(DisplayLoopInterceptor.java:80)
    at abaxx.web.parts.VisualPart.display(VisualPart.java:104)
    at abaxx.web.control.DisplayLoopInterceptor.process(DisplayLoopInterceptor.java:128)
    at vanilla.portal.builder.PBDisplayLoopInterceptor.process(PBDisplayLoopInterceptor.java:60)
    at vanilla.common.EncodingExtension$ResponseEncodingInterceptor.process(EncodingExtension.java:107)
    at abaxx.web.preferences.PreferencesHookup$2.process(PreferencesHookup.java:126)
    at vanilla.common.HttpHeaderInterceptor.process(HttpHeaderInterceptor.java:36)
    at abaxx.web.control.PageflowInterceptor.process(PageflowInterceptor.java:62)
    at abaxx.workflow.pageflow.PageflowInterceptor.process(PageflowInterceptor.java:93)
    at abaxx.web.control.ActionInterceptor.process(ActionInterceptor.java:49)
    at abaxx.web.security.StandardSecurityPolicy$ActionHook.process(StandardSecurityPolicy.java:211)
    at abaxx.web.control.SessionTimeoutInterceptor.process(SessionTimeoutInterceptor.java:59)
    at abaxx.track.TrackingInterceptor.finishTracking(TrackingInterceptor.java:151)
    at abaxx.track.TrackingInterceptor.process(TrackingInterceptor.java:100)
    at abaxx.web.control.AccessViolationInterceptor.process(AccessViolationInterceptor.java:110)
    at abaxx.web.control.RequestProcessor$P9.process(RequestProcessor.java:72)
    at abaxx.web.control.PerformanceMonitor$RequestPerformanceInterceptor.process(PerformanceMonitor.java:153)
    at vanilla.common.EncodingExtension$RequestEncodingInterceptor.process(EncodingExtension.java:61)
    at abaxx.web.control.MaintenanceInterceptor.process(MaintenanceInterceptor.java:44)
    at abaxx.web.control.AbaXXComponentsHookup$ClientSessionHookupInterceptor.process(AbaXXComponentsHookup.java:42)
    at abaxx.web.security.SecurityPolicy$FakeContainerLoginInterceptor.process(SecurityPolicy.java:136)
    at abaxx.web.control.RequestProcessor.process(RequestProcessor.java:187)
    at abaxx.web.control.ApplicationServlet.doGet(ApplicationServlet.java:144)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at abaxx.web.control.url.RequestFilter.doFilter(RequestFilter.java:28)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at abaxx.web.control.CachingHeaderFilter.doFilter(CachingHeaderFilter.java:29)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at vanilla.common.EncodingExtension.doFilter(EncodingExtension.java:121)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:403)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:301)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:162)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619) 
```

我也尝试过关闭`getWriter()` 使用：

```
HttpServletResponse resp=(HttpServletResponse) request.getResponse();
Writer rt=resp.getWriter();
resp.getWriter().close(); 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:15:22.443

编辑：现在问题已经发生了显着变化......

听起来 JSP 仍在尝试将自己呈现为响应。您需要告诉容器您正在处理请求 - 理想情况下，您不应该靠近 JSP，因为这可能*只是*针对 PDF 的请求。您应该将容器配置为调用单独的 servlet 来下载 PDF；这样你就不会涉及到 JSP 部分。

（是的，这将意味着移动您在问题中显示的代码。这可能是当前 JSP 的一部分；它不应该是。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T12:36:38.853

那是因为您已将使用响应输出流的 PDF 生成代码放在 JSP 文件中`<jsp:include>`。JSP 文件隐式使用响应编写器，因为 JSP 文件旨在生成基于字符的 HTML 代码（而不是像 PDF 文件那样基于二进制）。JSP 首先是放置 PDF 生成代码的错误位置。HTML 和 PDF 不能很好地混合。

要解决您的设计问题，您需要创建一个简单的类扩展`HttpServlet`，将所有 Java 代码移动到`doGet()`方法中（或者`doPost()`，取决于您想要响应的请求类型）。`@WebServlet`最后，通过注释或`<servlet-mapping>`in将该 servlet 映射到所需的 URL 模式，`web.xml`并将 PDF 请求的 URL 从 JSP 一更改为 servlet 一。

这是一个基本的启动示例，假设您使用的是与 Servlet 3.0 兼容的容器，例如 Tomcat 7、Glassfish 3 等，以便您可以使用`@WebServlet`注释：

```
@WebServlet("/pdfServlet")
public class HelloServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // Put your code here.
    }

} 
```

`http://localhost:8080/contextname/pdfServlet`通过而不是调用它`index.jsp`。

* * *

如果您的要求毕竟是在 HTML 页面中显示 PDF 内联，那么您需要`<iframe>`而不是`<jsp:include>`. 例如

```
<iframe src="pdfServlet"></iframe> 
```

这样，浏览器将通过一个完全独立的 HTTP 请求下载 PDF 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T08:38:53.220

你用的是哪个版本的abaxx？在最近的版本中，如果您在控制器中生成响应，则可以从操作方法返回 ActionResult.ABORT。如果您返回 null，则框架将进入显示阶段并呈现 JSP。

# sql-server-2008 - 如何从当前日期仅给出月份和年份的 6 个月大的数据？

> ID：11721332
> 
> 赞同：2
> 
> 时间：2012-07-30T12:13:58.480
> 
> 标签：sql-server-2008, tsql

我有一个表，其中只包含月份和年份字段，两者都是 int。给定一个输入，比如月份，6 个月。我需要投影 6 个月大的数据。

例如，我有 2001 年 1 月 1 日至今的数据。给定输入为 6 个月，所以我必须从当前日期返回 6 个月才能得到结果。

输出将是 2001 年 1 月至 2012 年 1 月的数据。

我已经使用正确的子字符串字符串比较完成了程序。（一个讨厌的黑客）

有什么突出的方法吗？

**DDL**

```
Declare @t table (Mnth int, Yr int)
Insert Into @t 

-- 2011
Select 1,2011 Union All select 2,2011 Union All Select 3, 2011 Union ALL Select 4,2011 Union ALL
Select 5,2011 Union All select 6,2011 Union All Select 7, 2011 Union ALL Select 8,2011 Union ALL
Select 9,2011 Union All select 10,2011 Union All Select 11, 2011 Union ALL Select 12,2011 Union ALL

--2012
Select 1,2012 Union All select 2,2012 Union All Select 3, 2012 Union ALL Select 4,2012 Union ALL
Select 5,2012 Union All select 6,2012 Union All Select 7, 2012 Union ALL Select 8,2012 Union ALL
Select 9,2012 Union All select 10,2012 Union All Select 11, 2012 Union ALL Select 12,2012

Declare @inputMonth int = 6 
```

我正在尝试不进行字符串转换

```
Select Mnth,Yr,YEAR(DATEADD(mm,-@inputMonth,getdate())),MONTH(DATEADD(mm,-@inputMonth,getdate()))
From @t
WHERE   YEAR(DATEADD(mm,-@inputMonth,getdate())) < Yr
AND MONTH(DATEADD(mm,-@inputMonth,getdate())) < Mnth 
```

但它不工作

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T12:19:16.070

您始终可以转换为日期时间并进行比较。

就像是：

```
WHERE
    CONVERT(Datetime, 
        CONVERT(nvarchar(4), YearPart) + '-' + CONVERT(nvarchar(2), MonthPart) + '-01')
    ) > DATEADD(month, -6, GETUTCDATE()) 
```

例如，将您的两列连接到 yield `CONVERT(Datetime, "2011-1-01")`。

正如[对另一个问题的回答所](https://stackoverflow.com/a/267016/133802)指出的那样，如果您不想进行字符串转换，则必须添加以执行一系列`DATEADD`to `0`，即`1900-01-01`.

```
WHERE
    DATEADD(month, MonthPart-1, DATEADD(year, YearPart-1900, 0))
    > DATEADD(month, -6, GETUTCDATE()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:01:55.413

尝试这个..

```
DECLARE @CurrentMonth tinyint,@CurrentYear tinyint
SELECT @currentMonth=Datepart(mm,getdate())
SELECT @CurrentYear=Datepart(yy,getdate())

IF((@currentmonth-6)<0)
 begin
  SELECT month,year FROM @t WHERE year =(@CurrentYear-1) AND month >(@currentMonth+6) 
   UNION ALL
  SELECT month,year FROM @t WHERE year=@CurrentYear AND month <= @CurrentMonth 
 end
ELSE
 begin
  SELECT month,year from @t WHERE year=@CurrentYear AND month between @CurrentMonth-6
  AND @CurrentMonth+1
 end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:27:25.247

无需铸造。

```
Select *
From your table
Where  (yr= @someYear and mt between @someMonth-6 and @someMonth) or
       (@someMonth <6 and yr =@someYear - 1 and mt >= 12-(6-@someMonth) ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T12:28:43.963

意识到我没有考虑过，新的解决方案：

```
declare @m int 
set @m = 11

declare @startDate datetime
set @startDate =  dateadd(mm,-@m,getdate())
select yr,mnth
from t
where
DateAdd(day, 1, 
      DateAdd(month, mnth - 1, 
          DateAdd(Year,yr-1900, 0))) >@startDate 
and
DateAdd(day, 1, 
      DateAdd(month, mnth - 1, 
          DateAdd(Year,yr-1900, 0)))  < getDate() 
```

# listview - 将 sharepoint 2007 列表链接到当前用户登录

> ID：11721337
> 
> 赞同：0
> 
> 时间：2012-07-30T12:14:17.870
> 
> 标签：listview, sharepoint-2007

我有一个允许用户将数据输入列的列表。其中一列是他们的电子邮件地址。我只想返回当前用户的电子邮件地址与登录用户相同的那些记录？任何想法表示赞赏。

# vb.net - 如何：如果小写后跟大写，则 csv 文件中的流读取器拆分为下一个

> ID：11721346
> 
> 赞同：2
> 
> 时间：2012-07-30T12:14:56.347
> 
> 标签：vb.net, string, csv, streamreader

我正在使用 asp.Net MVC 应用程序将 Excel 数据从其 CSV 表单上传到数据库。使用 Stream Reader 读取 csv 文件时，如果行包含小写字母后跟大写，则它分成两行。前任。

```
Line :"1,This is nothing but the Example to explanationIt results wrong, testing example"
This line splits to :
Line 1: 1,This is nothing but the Example to explanation"
Line 2:""
Line 3:It results wrong, testing example 
```

其中 CSV 文件生成正确为“”1，这不过是解释的示例结果错误，测试示例“

```
code :
  Dim csvFileReader As New StreamReader("my csv file Path")
     While Not csvFileReader.EndOfStream()
                        Dim _line = csvFileReader.ReadLine()

                    End While 
```

为什么会发生这种情况？如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:36:15.783

当 excel 电子表格中的单元格包含多行并保存为 CSV 文件时，excel 会使用换行符（ASCII 值 0x0A）分隔单元格中的行。电子表格中的每一行都用典型的回车/换行对 (0x0D 0x0A) 分隔。当您在记事本中打开 CSV 文件时，它根本不显示单独的 LF 字符，因此看起来它们都在一行中运行。所以，在 CSV 文件中，即使记事本没有显示它，它实际上看起来像这样：

```
' 1,"This is nothing but the Example to explanation{LF}It results wrong",testing example{CR}{LF} 
```

根据该方法的[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readline.aspx)`StreamReader.Readline`：

> 行定义为字符序列后跟换行符 ("\n")、回车符 ("\r") 或回车符后紧跟换行符 ("\r\n")。

因此，当您调用 时`ReadLine`，它将在多行单元格的第一行末尾停止读取。为避免这种情况，您需要使用不同的“读取”方法，然后拆分 CR/LF 对，而不是单独拆分。

但是，这不是您在读取 ​​CSV 文件时会遇到的唯一问题。例如，您还需要正确处理单元格中的引号字符在 CSV 中的转义方式。在这种情况下，除非确实需要以自己的方式实现，否则最好使用现有的库来读取文件。在这种情况下，Microsoft 在 .NET 框架中提供了一个类，可以正确处理读取 CSV 文件（包括具有多行单元格的文件）。类的名称是`TextFieldParser`并且它在`Microsoft.VisualBasic.FileIO`命名空间中。这是 MSDN 中一个页面的链接，该页面解释了如何使用它来读取 CSV 文件：

[http://msdn.microsoft.com/en-us/library/cakac7e6](http://msdn.microsoft.com/en-us/library/cakac7e6)

这是一个例子：

```
Using reader As New TextFieldParser("my csv file Path")
    reader.TextFieldType = FieldType.Delimited
    reader.SetDelimiters(",")
    While Not reader.EndOfData
        Try
            Dim fields() as String = reader.ReadFields()
            ' Process fields in this row ...
        Catch ex As MalformedLineException
            ' Handle exception ...
        End Try
    End While
End Using 
```

# mysql - MySQL 使用 JOIN 和 GROUP_CONCAT

> ID：11721358
> 
> 赞同：0
> 
> 时间：2012-07-30T12:15:36.133
> 
> 标签：mysql, inner-join, group-concat

努力让这个查询工作：

```
$query_search = "SELECT questionnaires_index.id, questionnaires_index.ea_num, questionnaires_index.address, questionnaires_index.status, questionnaires_index.json_stored users.username FROM questionnaires_index INNER JOIN users ON questionnaires_index.interviewer_id = users.id WHERE questionnaires_index.interviewer_id IN (SELECT GROUP_CONCAT(id) FROM users WHERE supervisor = (SELECT id FROM users WHERE username = '".$username."'))"; 
```

收到此错误：

> 查询错误：。您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“.username FROM questions_index INNER JOIN users ON users.id = questions”附近使用正确的语法

该查询一直有效，直到我使用 JOIN 语句将 users.username 添加到结果集中。请提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:19:06.693

你漏了一个逗号

$query_search = "选择问卷调查索引.id，问卷调查索引.ea_num，问卷调查索引.地址，问卷调查索引状态，问卷调查索引.json_stored，users.username FROM问卷调查索引内部加入用户问卷调查_index.interviewer_id = users.id WHERE问卷调查索引.interviewer_id IN (SELECT GROUP_CONCAT( id) FROM users WHERE supervisor = (SELECT id FROM users WHERE username = '".$username."'))";

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:21:46.530

您似乎忘记在问卷调查索引.json_stored 和 users.username 之间加逗号。

```
$query_search = "SELECT questionnaires_index.id, questionnaires_index.ea_num, questionnaires_index.address, questionnaires_index.status, questionnaires_index.json_stored ,users.username FROM questionnaires_index INNER JOIN users ON questionnaires_index.interviewer_id = users.id WHERE questionnaires_index.interviewer_id IN (SELECT GROUP_CONCAT(id) FROM users WHERE supervisor = (SELECT id FROM users WHERE username = '".$username."')) 
```

# servicestack - 是否可以创建批量插入？

> ID：11721360
> 
> 赞同：3
> 
> 时间：2012-07-30T12:15:39.070
> 
> 标签：servicestack, ormlite-servicestack

我刚开始发现 serviceStack ORMlite ，我正试图弄清楚如何进行批量插入。在任何地方都有这样的例子吗？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T17:17:29.557

目前没有内置支持利用自定义 RDBMS 对此功能的支持。例如[MySQL 的批量插入支持](https://stackoverflow.com/questions/5526917/how-to-do-a-batch-insert-in-mysql)。

OrmLite 中的`Insert`and`InsertAll`方法确实已经接受多个实体，但它们是单独执行的。

根据数据库（支持通过 SQL 批量插入），您可以使用`IDbCommand.ExecuteSql`方法执行自定义任意 SQL。

# mysql - mysql右连接和条件

> ID：11721362
> 
> 赞同：0
> 
> 时间：2012-07-30T12:15:57.377
> 
> 标签：mysql, sql, join

在下面的查询中，我正在连接一个表日历和第二个表，我需要在其中为查询指定一些参数。

表的连接是在字段 calendar.datefield 和 store_product.created 上执行的

问题是我正在按 id_store = 3 过滤，而 07/20/2012 store_product 表记录中的另一行有 id_store = 4，因此查询不会带来结果。有没有办法将此结果显示为NULL，迫使mysql忽略这种情况？

结果：（包含日期 2012-07-20 的行没有显示，因为它有其他 id_store）

```
DATE            price
2012-07-17      NULL
2012-07-18      700.00
2012-07-19      NULL
2012-07-21      NULL
2012-07-22      NULL
2012-07-23      NULL 
```

我想显示

```
 DATE               price
     2012-07-17         NULL
     2012-07-18         700.00
     2012-07-19         NULL
->>> 2012-07-20         NULL
     2012-07-21         NULL
     2012-07-22         NULL
     2012-07-23         NULL 
```

查询：

```
set @id_store = 3;
set @id_product = 11;

SELECT 
calendar.datefield as DATE,
t1.price
FROM
store_product t1
    RIGHT JOIN
calendar ON (DATE(t1.created) = calendar.datefield)
WHERE
(calendar.datefield BETWEEN ('2012-07-17') and ('2012-07-23'))
    AND (t1.id_store = @id_store OR t1.id_store is NULL)
    AND (t1.id_product = @id_product OR t1.id_product is NULL)
    AND (t1.created = (select 
        max(f2.created)
    from
        store_product f2
    where
        f2.id_store = t1.id_store
            and f2.id_product = t1.id_product
            and DATE(t1.created) = DATE(f2.created))
    OR t1.created is NULL)
GROUP BY DATE , t1.id_store , t1.id_product 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:31:12.720

该记录无法显示（显然），因为您仅过滤了 ID 为 3 的商店。 RIGHT JOIN 完成了它应该做的事情，然后您将使用过滤器进一步减少结果。我认为您必须在主代码中处理此问题才能为您添加“缺失”记录。我不认为 SQL 可以做你想做的事。

# php - Magento - 预览产品，但需要登录才能购买

> ID：11721363
> 
> 赞同：2
> 
> 时间：2012-07-30T12:16:10.257
> 
> 标签：php, magento, magento-1.6

我实际上是在与客户讨论将社交网络共享集成到他们的 magentocommerce 中的必要性。

客户希望用户能够在 facebook 上分享产品，并允许未登录用户“预览”产品（可能希望通过 facebook 本身跟踪链接），但随后需要登录才能购买该项目.

我告诉他们禁用整个站点的登录，并且仅在结帐时需要它（这也是被谷歌索引的最佳方式），但他们要求我为未登录的用户创建某种预览，并要求然后登录以查看“添加到购物车”按钮。

它容易实现吗？这值得么？我仍然认为最好的解决方案是仅在结帐时需要登录。

您是否有任何链接/演示可以显示某种预览但需要登录？我实际上正在考虑 ebay 向未登录用户展示内容的方式。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T16:14:33.883

请尽量避免`Mage::getSingleton('customer/session')->isLoggedIn()`像之前向您建议的那样乱扔您的模板。

如果您只需要处理产品视图上的添加到购物车功能，那么您只需要一点布局 xml...

```
<customer_logged_out>
    <remove name="product.info.addtocart" />
</customer_logged_out> 
```

漂亮，干净，简单。

但是，如果您必须处理站点范围内的问题，即产品视图、产品列表等，那么我建议您创建一个订阅`catalog_product_is_salable_after`. 在每次调用[Mage_Catalog_Model_Product isSalable](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/code/core/Mage/Catalog/Model/Product.php#L1290)之后，此事件都会被触发，这并不奇怪- 因此，如果客户未登录，您将有机会强制产品不可销售。

显然，您确实需要创建一个模块，但这是 IMO 的最佳选择，值得付出一点额外的努力。

因此，要创建观察者，您需要将以下内容添加到 config.xml 的**前端**节点：

```
<events>
    <catalog_product_is_salable_after>
        <observers>
            <yourmodule>
                <class>Yourcompany_Yourmodule_Model_Observer</class>
                <method>catalog_product_is_salable_after</method>
            </yourmodule>
        </observers>
    </catalog_product_is_salable_after>
</events> 
```

您的观察者将需要以下内容：

```
class Yourcompany_Yourmodule_Model_Observer
{
    public function catalog_product_is_salable_after(Varien_Event_Observer $observer)
    {
        if (! Mage::helper('customer')->isLoggedIn()) {
             $observer->getEvent()->getData('salable')
                 ->setData('is_salable', false);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:38:05.657

您可以轻松地在主题的 view.phtml 中添加条件。app\design\frontend\default[主题]\template\catalog\product\view.phtml

健康）状况：

> $this->helper('customer')->isLoggedIn()

```
<?php if($_product->isSaleable() && $this->helper('customer')->isLoggedIn()): ?>
                        <?php echo $this->getChildHtml('addtocart') ?>
                        <?php /* // OVIDIU remove 'or  if( $this->helper('wishlist')->isAllow() || $_compareUrl=$this->helper('catalog/product_compare')->getAddUrl($_product)): ?>
                            <span class="or"><?php echo $this->__('OR') ?></span>
                        <?php endif; */ ?>
                    <?php endif; ?> 
```

按照同样的逻辑，也修改 list.phtml。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-30T12:57:45.393

试试这个：-

文件：/template/catalog/product/view/type/simple.phtml 位置：第 52 行就在上面

```
<?php if($_product->isSaleable()): ?> 
```

在第 66 行附近，在后面使用 endif

```
<?php endif; ?> 
```

所以整个交易看起来像这样从第 52 行开始（注意我的编辑标签）：

```
<!--edit-->
<?php if(Mage::getSingleton('customer/session')->isLoggedIn()): ?> 
<!--/edit-->
<?php if($_product->isSaleable()): ?>
    <fieldset class="add-to-cart-box">
        <legend><?php echo $this->__('Add Items to Cart') ?></legend>
        <span class="qty-box"><label for="qty"><?php echo $this->__('Qty') ?>:</label>
        <input name="qty" type="text" class="input-text qty" id="qty" maxlength="12" value="<?php echo $this->getMinimalQty($_product) ?>"/></span>
        <button class="form-button" onclick="productAddToCartForm.submit()"><span><?php echo $this->__('Add to Cart') ?></span></button>
        <?php if( $this->helper('wishlist')->isAllow() || $_compareUrl=$this->helper('catalog/product_compare')->getAddUrl($_product)): ?>
            <strong><?php echo $this->__('OR') ?></strong>
        <?php endif; ?>
    </fieldset>
<?php endif; ?>
<!--edit-->
<?php endif; /* if ($this->isCustomerLoggedIn()): */ ?> 
<!--/edit--> 
```

# sql - SQL SERVER 中的 ORACLE "ANY" 关键字

> ID：11721368
> 
> 赞同：0
> 
> 时间：2012-07-30T12:16:29.770
> 
> 标签：sql, sql-server, oracle

以下查询在 Oracle 中运行良好，但在 SQL SERVER 中运行良好。我知道“ANY”，SQL SERVER 中的关键字是为其他目的而开发的，但我想知道 SQL SERVER FOR 中是否有类似的关键字在下面的查询中 fisrtname、lastname、middlename 是 Person 表中的列

```
SELECT * FROM Person WHERE 'Somename' = ANY(firstname, lastname,middlename) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:35:49.117

等效的是

```
SELECT * FROM Person WHERE 'Somename' IN (firstname, lastname, middlename) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:18:44.637

你能不能简单地做：

```
SELECT * FROM Person
WHERE
     firstname = 'Somename'
  OR lastname = 'Somename'
  OR middlename= 'Somename' 
```

还有其他可能性，但在大多数情况下，它们不会让优化器很好地利用索引，例如

```
SELECT * FROM Person
WHERE
     ('---' + firstname + '---' + lastname + '---' + middlename + '---')
     LIKE '%---Somename---%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:19:02.263

除了写这样的东西之外，我不知道有一种方法可以检查多个列：

```
SELECT * FROM Person WHERE 
firstname = 'Somename' 
OR lastname = 'Somename' 
OR middlename = 'somename' 
```

# android - 如何在 Android 中“挂载”虚拟驱动器？

> ID：11721372
> 
> 赞同：1
> 
> 时间：2012-07-30T12:16:46.450
> 
> 标签：android, file, filesystems, fileinputstream, fileoutputstream

我之前已经问过这个问题，但我没有得到答案，所以我再试一次。

我试图弄清楚如何将虚拟驱动器安装到我的 android 文件系统中。我的意思是我想让一个新文件夹（实际上并不存在）出现在我的 Android 文件系统树的某个位置，并且有所有请求来查看该文件夹（或任何它应该是孩子），来自所有其他应用程序，由我的自定义应用程序处理。

我假设要做到这一点，我必须以某种方式覆盖 Android 处理访问文件以进行读取和写入的请求的任何部分（例如 FileInputStream 和 FileOutputStream），测试请求的文件是否是这个虚拟文件树的一部分，如果是，处理请求，否则，将其传递给默认处理程序。

问题是，我不知道 Android 的哪个部分实际处理这些调用。有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:22:03.480

我怀疑你可以深入无根电话。修改内核是一种可能：http: [//forum.xda-developers.com/showthread.php?t](http://forum.xda-developers.com/showthread.php?t=1306336) =1306336 。除非您想将更改放入 AOSP 并自己编译，否则我无法帮助您:( .

# windows - 在 Windows 上设置 git repo post-receive

> ID：11721373
> 
> 赞同：0
> 
> 时间：2012-07-30T12:16:47.130
> 
> 标签：windows, git, git-post-receive

我想在我的 Windows 服务器上设置 git 部署，但是我在从 git post-receive 事件更改 director 时遇到了一些麻烦。我收到“没有这样的文件或目录”错误。

我有以下设置：

1.  Windows 共享上的 git 存储库 //share/git/repo/
2.  接收后配置如下：

    #!/bin/sh

    echo "构建 Arla 解决方案"

    cd /c/构建

    取消设置 GIT_DIR

    git pull 起源大师

    echo "做一些后期构建操作..."

当我对存储库进行提交/推送时，如果在线失败：`cd C:/Builds`.

我在 Linux 服务器 (VPS) 上设置了类似的东西，没有任何问题。我认为问题在于我如何格式化更改目录。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:33:24.747

`git`的 bash (AFAIK) 对 不熟悉`C:`，
请尝试将相关行替换为`/c/Builds`
记住`bash`是区分大小写的，不像`Windows`

# html - 所有浏览器的标准css修复？

> ID：11721381
> 
> 赞同：0
> 
> 时间：2012-07-30T12:17:20.113
> 
> 标签：html, css, overflow

我得到一个带有 IE 的溢出模块幻灯片，在 Firefox 上显示不好，我用谷歌搜索并在这里找到了一些建议使用 meyers 或 yahoo 重置的帖子，现在我已经将重置的 meyers 代码复制/粘贴到名为 css 的文件中/style.css，但什么也没有发生（与以前完全相同的显示）。然后我用谷歌搜索了如何准确地重置 css 并成功，我在某处读过没有标准的方法来做这个重置？我不知道在哪里可以问这个菜鸟问题......而且可能这也不是问这个问题的方式或地方......是否有关于如何在所有浏览器上重置 css 的分步指南？哪个文件以及该文件应该在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:20:29.177

重置 CSS 使几乎所有浏览器上的所有元素都具有相同的外观和风格，并且具有规范化的样式。

在您的页面中包含任何重置 CSS，然后开始添加您自己的样式。

重置 CSS 可最大限度地减少浏览器的不兼容性。但如果我们正在创建任何复杂的布局，它并没有完全删除。

我更喜欢 Eric Meyer 的 Reset CSS。

# mysql - 从表中获取 ID 列表，其中 Group Concat 作为变量用于 IN 子句

> ID：11721382
> 
> 赞同：0
> 
> 时间：2012-07-30T12:17:23.127
> 
> 标签：mysql, sql, subquery, nested-queries

我有一张桌子`locations`和一张桌子`stockLevels`。我正在处理一个复杂的查询，以一次性告诉我哪些物品已经存货很长时间，它们在哪个位置以及其他一些东西。

部分原因是给我不准确的结果。

```
... LEFT JOIN ...
SELECT id, sum(stockLevel) as totalStockLevel FROM stockLevels 
    WHERE stockLocation IN 
        ((SELECT 
            GROUP_CONCAT(CONVERT(id, CHAR(8))) as idList 
            FROM `locations` WHERE  `isThirdParty`  = '0' 
            AND `pickFrom`='1' 
        GROUP BY pickFrom)) 
    GROUP BY id) 
ourStock ON ourStock.id=products.id
... MORE OF QUERY .... 
```

这是整个查询的一个片段，内部`SELECT`独立工作，但它没有将 ID 列表应用到 IN 子句中，似乎只是读取了第一个。

所以，解释得更清楚。

内部`SELECT`：

```
SELECT 
    GROUP_CONCAT(CONVERT(id, CHAR(8))) as idList 
    FROM `locations` WHERE  `isThirdParty`  = '0' 
    AND `pickFrom`='1' 
GROUP BY pickFrom 
```

将逗号分隔的列表值作为名为 的列返回`idList`，该值是`1,2,10,11`

此查询有效。

如果我在原始查询中手动使用逗号分隔列表，它也可以工作，即：

```
... LEFT JOIN ...
SELECT id, sum(stockLevel) as totalStockLevel FROM stockLevels 
    WHERE stockLocation IN 
        (1,2,10,11) 
    GROUP BY id) 
ourStock ON ourStock.id=products.id
... MORE OF QUERY .... 
```

此代码不会产生任何错误，但它产生的结果就是这个查询的结果：

```
... LEFT JOIN ...
SELECT id, sum(stockLevel) as totalStockLevel FROM stockLevels 
    WHERE stockLocation IN 
        (1) 
    GROUP BY id) 
ourStock ON ourStock.id=products.id
... MORE OF QUERY .... 
```

因此，我没有将由内部查询生成的逗号分隔列表注入到外部查询的 IN 子句中。

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:34:20.270

`IN()`需要一个值列表或一个子查询，但你给它一个 varchar。您可能会尝试加入 stockLocation 和 Locations 以产生所需的结果：

```
SELECT stockLevels.id, 
       sum(stockLevels.stockLevel) as totalStockLevel 
  FROM stockLevels 
 INNER JOIN locations
    ON stockLevels.stockLocation = locations.id
   AND locations.isThirdParty = '0'
   AND locations.pickFrom = '1'
 GROUP BY stockLevels.id 
```

当然，您可以消除 group_concat 以获得相同的效果：

```
WHERE stockLocation IN 
    (SELECT id
       FROM `locations` 
      WHERE `isThirdParty` = '0' 
        AND `pickFrom`='1' 
    ) 
```

# javascript - 动态添加行时在 Gridview 中启用/禁用验证器

> ID：11721388
> 
> 赞同：0
> 
> 时间：2012-07-30T12:17:43.557
> 
> 标签：javascript, jquery, asp.net, updatepanel

我有问题要禁用/启用验证器以在更新面板中向 gridview 新添加行，如果我删除更新面板，那么它工作完美，如果我添加更新面板，那么它停止工作。我已经创建了示例页面。

默认.aspx。

```
<head>     <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.min.js"></script>     <script type="text/javascript">        $(document).ready(function () {            $('table > tbody > tr .wrapper [class*="onoff"] option:selected').each(function (index) {                adjustValidators(this);            });            $('[class*="onoff"] select').change(function () {                adjustValidators($('option:selected', this)[0]);            });        });                    </script></head>

<ajax:ToolkitScriptManager runat="server" ID="RadScriptManager1" AsyncPostBackTimeout="18000">    </ajax:ToolkitScriptManager><asp:MultiView ID="MultiView1" runat="server">    <asp:View ID="group_Group1" runat="server">        <div class="group group1">            <asp:Button ID="btnNext0_top" runat="server" Text="Next >>" OnClick="btnNext_Click" ValidationGroup="surveyValidate0" />                <asp:UpdatePanel runat="server" ID="UPNew" UpdateMode="Conditional">                    <ContentTemplate>                        <asp:GridView runat="server" ID="repeatregion_RRSectionSS" RegionName="RRSectionSS" AutoGenerateColumns="False" GridLines="None" CellSpacing="-1" CssClass="rrsectionss">                            <Columns>                                <asp:TemplateField>                                    <ItemTemplate>                                        <div id="wrapper_ONOFF" runat="server" class="wrapper onoff">                                            <div class='statement  onoff' id="statement_ONOFF" runat="server">                                                Required Validator :</div>                                            <div class='question  onoff' id="questionlayer_ONOFF" runat="server">                                                <asp:DropDownList runat="server" ID="question_ONOFF" ValidationGroup="surveyValidate0" Data='<%# Eval("ONOFF") %>' Val='<%# Eval("ONOFF_selectedValue") %>'>                                                    <asp:ListItem Text="Off" Value="-1"></asp:ListItem>                                                    <asp:ListItem Value="1" Text="On"></asp:ListItem>                                                </asp:DropDownList>                                            </div>                                        </div>                                        <div id="wrapper_testsssss" runat="server" class="wrapper testsssss">                                            <div class='statement  testsssss' id="statement_testsssss" runat="server">                                                Sample Text                                            </div>                                            <div class='question  testsssss' id="questionlayer_testsssss" runat="server">                                                <asp:TextBox runat="server" ID="question_testsssss" type="shortans" Columns='40' ValidationGroup="surveyValidate0" Text='<%# Common.DecodeXML(Eval("testsssss")) %>'></asp:TextBox>                                                <asp:RequiredFieldValidator ID="rfv_question_testsssss" runat="server" ValidationGroup="surveyValidate0" SetFocusOnError="true" EnableClientScript="true" ControlToValidate="question_testsssss" Display="Dynamic" Text="**" ErrorMessage="**" />                                            </div>                                        </div>                                    </ItemTemplate>                                </asp:TemplateField>                            </Columns>                        </asp:GridView>                        <asp:Button runat="server" ID="btnAddClick" Text="Add Section" OnClick="btn_Click" />                    </ContentTemplate>                </asp:UpdatePanel>            </div>        </asp:View>        <asp:View ID="group_Group2" runat="server">            <div class="group group2">                <asp:Button ID="btnPrevious1_top" runat="server" Text="<< Prev" OnClick="btnPrevious_Click" />                <asp:Button ID="btnSubmit" runat="server" Text="Submit" ValidationGroup="surveyValidate1" />            </div>        </asp:View>    </asp:MultiView>

<script type="text/javascript">        function pageLoad(sender, args) {            if (args.get_isPartialLoad()) {                $('table > tbody > tr .wrapper [class*="onoff"] option:selected').each(function (index) {                    adjustValidators(this);                });            }        }        function adjustValidators(ctrl) {            var id = ctrl.parentNode.id.replace('_question', '_rfv_question').replace('ONOFF', 'testsssss')            //            alert(ctrl.value);            if (ctrl.value == -1) {                ValidatorEnable(eval(id), false)            }            else {                ValidatorEnable(eval(id), true)            }        }    </script> 
```

**默认.aspx.cs。**

```
 protected void Page_Load(object sender, EventArgs e)
{
    MultiView1.ActiveViewIndex = (MultiView1.ActiveViewIndex == -1) ? 0 : MultiView1.ActiveViewIndex;

    DataTable objData =new DataTable();
    if (ViewState["data"] != null)
    {
        objData = (DataTable)ViewState["data"];
    }
    else
    {
        objData = new DataTable();
        objData.Columns.Add("testsssss");
        objData.Columns.Add("ONOFF");
        objData.Columns.Add("ONOFF_selectedValue");
        objData.Rows.Add(objData.NewRow());
        ViewState["data"] = objData;
    }

    if (!IsPostBack)
    {
        repeatregion_RRSectionSS.DataSource = objData;
        repeatregion_RRSectionSS.DataBind();
    }

}
protected void btnNext_Click(object sender, EventArgs e)
{
    MultiView1.ActiveViewIndex += 1;
}

protected void btnPrevious_Click(object sender, EventArgs e)
{
    MultiView1.ActiveViewIndex -= 1;
}

protected void btn_Click(object sender, EventArgs e)
{
    DataTable objData = (DataTable)ViewState["data"];

    objData.Rows.Add(objData.NewRow());
    repeatregion_RRSectionSS.DataSource = objData;
    repeatregion_RRSectionSS.DataBind();
    ViewState["data"] = objData;
} 
```

当点击添加然后项目被添加到gridview但验证器没有被禁用。

感谢和问候萨迪克莫丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T10:59:52.280

经过一些研究和诡计，我找到了解决方案：替换`eval`为 . 它对我有用。`ValidatorEnable(eval(id), false)``document.getElementById(id)`

# android - Titanium webservice响应超时控制

> ID：11721389
> 
> 赞同：0
> 
> 时间：2012-07-30T12:17:44.763
> 
> 标签：android, timeout, titanium-mobile, webservice-client

我将 Titanium 用于 Android 设备，将 SOAP 用于 Web 服务数据传输。如果连接失败，我可以中止该过程，但如果网络服务响应时间超过 10 秒，例如由于 Internet 传输速度慢，我需要中止该过程。如果该过程已经开始，我该如何控制？我假设我可以在设备端（Titanium）控制它，但我可以跳出框框，也许可以在 web 服务端做点什么。我很感激你的时间..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:14:51.763

**您可以使用 HttpClient 的setTimeout**函数来实现它，请参阅此链接 [HttpClient Guide](http://docs.appcelerator.com/titanium/2.1/#!/api/Titanium.Network.HTTPClient-method-setTimeout)。

# android - SQL 查询与搜索算法

> ID：11721392
> 
> 赞同：0
> 
> 时间：2012-07-30T12:17:54.587
> 
> 标签：android, algorithm, sqlite, search, optimization

我是 Android 和 SQL 的新手（不完全是新手，但不是专业人士），如果我的问题听起来很糟糕，我很抱歉。

我正在创建一个 Android 应用程序。为了保存用户数据，我使用 SQLite 创建了一个数据库。

我的问题是我无法决定哪种方法更快：

*   使用 SQLite 查询获取数据，或
*   将所有数据放入一个列表（使用 SQLite 查询），然后使用搜索算法在列表中搜索。

例如：我有一个 Persons 数据库（大约 1500-2000 条记录）。在一个页面中我想显示所有的名字，在另一个页面中我想只显示已婚的名字，在另一个页面中我想显示最近添加的最后 30 个人等...

哪种方法会更快？是一直查询显示数据，还是获取所有数据，然后在显示时搜索相关信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T12:21:18.393

在任何数据库中，使用数据库引擎过滤数据总是更可取的。所以我认为你应该只在数据库级别过滤你的结果集，而不是使用 android SDK 将有助于性能和内存管理。

# c# - 带有 ToUpper 字段名称的表达式谓词

> ID：11721396
> 
> 赞同：1
> 
> 时间：2012-07-30T12:18:15.417
> 
> 标签：c#, linq, predicate

我有这个代码：

```
public static Expression<Func<T, bool>> CreatePredicate<T>(string typeSearch, string searchField, string stringToSearch)
{
    var parameter = Expression.Parameter(typeof(T));
    var predicate = Expression.Lambda<Func<T, bool>>(
        Expression.Call(
            Expression.PropertyOrField(parameter, searchField),
            "Contains", null,
            Expression.Constant(stringToSearch.ToUpper())), parameter);

    return predicate;
} 
```

结果是：`{Param_0 => Param_0.Username.Contains("MX")}`

但我想要这个：`{Param_0 => Param_0.Username.ToUpper().Contains("MX")}`

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:27:09.890

```
public static Expression<Func<T, bool>> CreatePredicate<T>(string typeSearch, string searchField, string stringToSearch)
{
    var parameter = Expression.Parameter(typeof(T));
    var predicate = Expression.Lambda<Func<T, bool>>(
        Expression.Call(
            Expression.Call(Expression.PropertyOrField(parameter, searchField), "ToUpper", null),
            "Contains", null,
            Expression.Constant(stringToSearch.ToUpper())), parameter);

    return predicate;
} 
```

# r - R - 将多图保存到文件

> ID：11721401
> 
> 赞同：30
> 
> 时间：2012-07-30T12:18:24.867
> 
> 标签：r, save, ggplot2

非常感谢您对以下问题的帮助。我知道几种将单个图保存到文件的方法。我的问题是：如何正确地将多图保存**到**文件中？

首先，我不是一个有经验的 R 用户。我使用 ggplot2 来创建我的绘图，我可能应该提到的另一件事是我使用 RStudio GUI。使用 R Cookbook 中的[示例](http://wiki.stdout.org/rcookbook/Graphs/Multiple%20graphs%20on%20one%20page%20%28ggplot2%29/) ，我可以在一个窗口中创建多个绘图。

我想将这个所谓的多图保存到一个文件中（最好是 jpeg），但不知何故未能做到这一点。

我正在创建多图如下：

```
##define multiplot function
    multiplot <- function(..., plotlist=NULL, cols) {
        require(grid)

        # Make a list from the ... arguments and plotlist
        plots <- c(list(...), plotlist)

        numPlots = length(plots)

        # Make the panel
        plotCols = cols                          # Number of columns of plots
        plotRows = ceiling(numPlots/plotCols) # Number of rows needed, calculated from # of cols

        # Set up the page
        grid.newpage()
        pushViewport(viewport(layout = grid.layout(plotRows, plotCols)))
        vplayout <- function(x, y)
            viewport(layout.pos.row = x, layout.pos.col = y)

        # Make each plot, in the correct location
        for (i in 1:numPlots) {
            curRow = ceiling(i/plotCols)
            curCol = (i-1) %% plotCols + 1
            print(plots[[i]], vp = vplayout(curRow, curCol ))
        }

    }

## define subplots (short example here, I specified some more aesthetics in my script)
plot1a <- qplot(variable1,variable2,data=Mydataframe1)
plot1b <- qplot(variable1,variable3,data=Mydataframe1)  
plot1c <- qplot(variable1,variable2,data=Mydataframe2)
plot1d <- qplot(variable1,variable3,data=Mydataframe2)  

## plot in one frame
Myplot <- multiplot(plot1a,plot1b,plot1c,plot1d, cols=2) 
```

这给出了期望的结果。当我尝试保存到文件时出现问题。我可以在 RStudio 中手动执行此操作（使用导出 -> 将绘图另存为图像），但我想在脚本中运行所有内容。我设法只保存 subplot1d（即 last_plot()），而不是完整的多图。

到目前为止我已经尝试过：

1.  使用 ggsave

    ```
    ggsave(filename = "D:/R/plots/Myplots.jpg") 
    ```

    这导致仅保存子图 1d。

2.  使用 jpeg()、print() 和 dev.off()

    ```
    jpeg(filename = "Myplot.jpg", pointsize =12, quality = 200, bg = "white", res = NA, restoreConsole = TRUE)
    print(Myplot)
    dev.off() 
    ```

    这会产生一个完全白色的图像（只是我假设的背景）。print(Myplot) 返回 NULL。

不知道我在这里做错了什么。我对 R 缺乏理解是我一直在寻找解决方案的原因。谁能解释我做错了什么，也许可以提出解决我问题的方法？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-30T12:26:35.257

因为它`Myplot`是你的 multiplot 函数的返回值，它什么也不返回（它的工作是打印图表）。您需要在 jpeg 设备打开的情况下调用 multiplot：

```
jpeg(filename = "Myplot.jpg", pointsize =12, quality = 200, bg = "white", res = NA, restoreConsole = TRUE)
multiplot(plot1a,plot1b,plot1c,plot1d, cols=2)
dev.off() 
```

应该管用。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-30T12:29:18.810

使用[示例代码](http://wiki.stdout.org/rcookbook/Graphs/Multiple%20graphs%20on%20one%20page%20%28ggplot2%29/)（R 食谱），它适用于我

```
png("chickweight.png")
multiplot(p1, p2, p3, p4, cols=2)
dev.off() 
```

![在此处输入图像描述](../Images/c1444f413b792ee4bdcb4ca098fa4268.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-30T15:19:56.233

为了完整起见，`ggsave`它不起作用，因为它只保存最后打印的 ggplot 对象，在你的情况下它只是最后一个图。这是因为 multiplot 通过将 ggplot 对象绘制到整个图形设备的不同子集来创建绘图。另一种方法是通过将 ggplot 对象组合成一个大 ggplot 对象来创建绘图，然后打印该对象。这将与`ggsave`. 这种方法是`arrangeGrob`在`gridExtra`包中实现的。

# azure-sql-database - 尝试从 tsql 连接到 sql-azure 时从服务器读取失败

> ID：11721403
> 
> 赞同：6
> 
> 时间：2012-07-30T12:18:31.373
> 
> 标签：azure-sql-database, freetds

我正在尝试从 Ubuntu 12.04 连接到 SQL-Azure。

我已经用 openssl 和 libiconf 编译了 freeTds-0.91

```
tsql -H XXXXXXXX.database.windows.net -U Username -D DatabaseName -p 1433 -P Password 
```

我尝试使用上述语句进行连接，但出现此错误：

```
locale is "en_ZA.UTF-8"
locale charset is "UTF-8"
using default charset "UTF-8"
Default database being set to DatabaseName
Error 20004 (severity 9):
    Read from the server failed
    OS error 104, "Connection reset by peer"
Error 20002 (severity 9):
    Adaptive Server connection failed
There was a problem connecting to the server 
```

我的 tsql -C 输出：

```
Compile-time settings (established with the "configure" script)
                        Version: freetds v0.91
         freetds.conf directory: /usr/local/etc
 MS db-lib source compatibility: no
    Sybase binary compatibility: no
                  Thread safety: yes
                  iconv library: yes
                    TDS version: 5.0
                          iODBC: no
                       unixodbc: no
          SSPI "trusted" logins: no
                       Kerberos: no 
```

我似乎找不到任何有关导致此问题的原因以及如何解决此问题的信息。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-13T10:05:59.683

该错误是由于使用了错误的 TDS 版本引起的。

要解决，只需在 tsql 命令之前指定 TDS 版本：

```
TDSVER=8.0 tsql -H XXXXXXXX.database.windows.net -U Username -D DatabaseName -p 1433 -P Password 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-17T11:05:41.810

```
in freetds.conf

[servername] 
host = ipAddress
port = 1433
tds version = 8.0

for checking freetds connection
===============================

$tsql -S servername -U username 
password 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T01:44:57.267

您的 IP 地址是否被数据库服务器列入白名单？如果没有，您将无法连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-05T10:45:02.300

使用 TDS 8.0 版本对我有用。

只需投入`/etc/freetds/freetds.conf`以保持永久

# java - 如何在 jsp/servlet 中设置密码到期日期？

> ID：11721411
> 
> 赞同：0
> 
> 时间：2012-07-30T12:18:54.373
> 
> 标签：java, jsp, servlets

我正在使用用户名+密码创建 web 项目。在这个项目中如何设置密码过期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:24:29.830

您可以使用 cookie 的 setMaxAge() 方法创建一个 cookie 来跟踪登录用户。之后，您只需在您的 servlet 或服务或您正在使用的内容中设置 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:26:14.640

将您的密码保留在某处`database`（推荐），然后`login validate`根据您的到期条件在每个密码上保留密码，如果到期提示用户更改密码。

**编辑：**

下面是一些代码片段。你可以参考这个来实现上面。

```
public class SerializationPassword {
 public void saveDetails(User lUser) throws IOException{

FileOutputStream fos = new FileOutputStream("user.ser");
ObjectOutputStream oos = new ObjectOutputStream(fos);

if(!isExpired(getDetails(lUser.getUserId()))){

    oos.writeObject(lUser);
}

}

public String getDetails(String userId) throws IOException, ClassNotFoundException{

String password="";
FileInputStream fis = new FileInputStream("user.ser");
ObjectInputStream ois = new ObjectInputStream(fis);
User lUser=(User) ois.readObject();
password=lUser.getPassword();
return password;

}

 public boolean isExpired(String pass){

boolean check=false;
// your logic

return check;

}
}

class User implements Serializable{

private String userId;
private String password;

// Your setter and getter

} 
```

# asp.net-mvc-3 - 在剃刀视图asp.net mvc中显示/渲染图像

> ID：11721414
> 
> 赞同：0
> 
> 时间：2012-07-30T12:19:02.257
> 
> 标签：asp.net-mvc-3, razor

我想在强类型的剃刀视图中显示图像。我将图像位置存储在数据库中。我可以看到图像的位置

```
 @Html.DisplayFor(model => model.ImageLocation) 
```

但我想显示图像。

我有存储在数据库中的图像文件的完整路径。现在如何在视图中显示图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:23:34.483

试试下面的代码：

```
 @Html.Image(model => model.ImageLocation) 
```

# css - css ：在内容间距之前

> ID：11721420
> 
> 赞同：5
> 
> 时间：2012-07-30T12:19:16.677
> 
> 标签：css

使用 CSS 创建水平导航我想在元素之间使用分隔线。

使用：

```
li:before
{
  content: " | ";
} 
```

我得到一个分隔符。但我想在文本和分隔符之间使用一个边距

> item(margin-right) |(?)item(margin-right)

如何为上述问号设置边距？使用margin-left（或padding-left），边距将存在于分隔符的前面，而不是分隔符和内容之间。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-30T12:39:10.040

作为一个快速破解，您可以通过使用转义的 unicode 来添加一个不间断的空间：

```
li:before {
  content: "\00a0 | \00a0";
}​ 
```

看到[这个小提琴](http://jsfiddle.net/uMFHH/)。

但更好的解决方案是为伪元素设置 margin-left 和 margin-right （或填充）：

```
li:before {
  content: "|";
  margin-left: 20px;
  margin-right: 20px
} 
```

看到[这个小提琴](http://jsfiddle.net/F94hC/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:35:10.147

试试这个

```
li:before {
          content: "|";
          padding:0 5px;
        } 
```

# sql-server - SQL Server 作业超时

> ID：11721421
> 
> 赞同：5
> 
> 时间：2012-07-30T12:19:17.990
> 
> 标签：sql-server, timeout, scheduled-tasks

因此，似乎不可能为 SQL Server 作业中的每个步骤设置超时（[来自 StackExchange 的文章](https://stackoverflow.com/questions/1200527/how-to-set-sql-server-2005-job-cmdexec-timeout)）。

MSDN指出你当然可以设置代理超时：

*   [Sql Server 代理属性](http://msdn.microsoft.com/en-us/library/ms189727.aspx)。
*   [设置作业执行关闭](http://msdn.microsoft.com/en-us/library/ms190239.aspx)。

**问题**

1.  代理超时如何工作？
2.  有没有其他方法（最好通过配置）来设置单步超时？
3.  有没有其他方法（最好通过配置）来设置整个作业超时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T17:37:14.370

要回答问题 2，我不确定这是否是最佳选择，但您可以使用 OPENROWSET 来控制单步超时。

[http://msdn.microsoft.com/en-us/library/ms190312.aspx](http://msdn.microsoft.com/en-us/library/ms190312.aspx)

仅仅因为 OPENROWSET*通常*用于访问远程服务器并不意味着它必须如此。

可能这类似于代理超时的工作方式。

您甚至可以使用它来控制整个作业超时，但如果您想通过配置来完成，您必须创建自己的表。

我不确定这是最好的解决方案，但至少它是一个解决方案。

# php - PHP 发送和接收数据

> ID：11721422
> 
> 赞同：-2
> 
> 时间：2012-07-30T12:19:18.050
> 
> 标签：php

有谁知道我将如何将一些数据发送到外部 php 页面，然后该页面将获取数据并进行处理。

我在一台服务器上有一个 php 页面，它将向另一台服务器上的 php 页面发送用户 ID 和日期，该页面将提取数据并将其插入 mysql 数据库。我不想从他们所在的页面重定向用户，如果可能的话加密数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:22:03.727

如果您不想重定向，我建议使用`jQuery.post()`. 在此处了解更多信息：[jQuery.post 文档](http://api.jquery.com/jQuery.post/)。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:22:34.797

听起来你想使用 JavaScripting/ajax 来做到这一点。有很多不同的方法可以做你想做的事，所以你必须对此做更多的研究才能找到一种满足你舒适程度的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:23:32.310

最好的方法是使用 Json 格式发送数据。

您可以使用 gzcompress 和 mcrypt_encrypt 对其进行压缩以加密数据。

如果您要存储密码，最好的方法是散列它而不是任何加密。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T12:25:50.887

保持纯粹的服务器端，你可能想看看 CURL

[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

这是一种在服务器之间进行通信的好方法。

也可以看看 Mcrypt 加密/解密数据：

[http://php.net/manual/en/book.mcrypt.php](http://php.net/manual/en/book.mcrypt.php)

# iphone - 从 Xcode 提交 svn 文件时出错

> ID：11721427
> 
> 赞同：2
> 
> 时间：2012-07-30T12:19:30.967
> 
> 标签：iphone, xcode, svn

我已经用 Xcode 配置了 svn。

当我尝试提交存储库文件时出现错误

```
 svn: Commit failed (details follow):
   svn: Error normalizing log message to internal format
   svn: Inconsistent line ending style 
```

任何人有想法，请建议我。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:22:47.210

从消息中我看到你有`Inconsistent line ending style`. 这意味着您的源文件由于某种原因混合了 EndOfLine 样式（例如 Windows CRLF 和 *nix CR）。您应该检查源文件并确保行尾是统一的并且与您的 SVN 期望的 EndOfLine 样式相匹配。

如果您从各种来源复制/粘贴代码和/或使用不同的 IDE 编写代码，就会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T11:38:59.317

由于错误的提交消息格式也可能发生此错误。like line 有足够的空间来写，你正在用“And”等开始另一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-05T06:59:37.400

就我而言，出现此错误是因为我从文本编辑器和 excel 文件中复制并粘贴了提交消息。我已删除该提交消息，并在该部分中再次重写该提交消息。不要复制/粘贴提交消息。这解决了我的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-11T21:33:32.590

由于 SVN 提交消息中的混合行尾样式，我遇到了同样的问题。大多数行都是 Mac OS X 风格的，但有些行是复制的并在行尾有 ^M。删除了几行末尾的 ^M 并且 svn ci -F svn-commit.tmp 通过了。

# java - SWIG 不在包装文件中声明全局变量

> ID：11721429
> 
> 赞同：2
> 
> 时间：2012-07-30T12:19:38.783
> 
> 标签：java, swig

我正在使用 Cent OS、SWIG 1.3 并且我已经测试过从 SWIG 示例编译示例 Java 示例。它包括：

例子.c

```
/* A global variable */
double Foo = 3.0;

/* Compute the greatest common divisor of positive integers */
int gcd(int x, int y) {
  int g;
  g = y;
  while (x > 0) {
    g = x;
    x = y % x;
    y = g;
  }
  return g;
} 
```

例子.i

```
%module example

extern int gcd(int x, int y);
extern double Foo; 
```

然后我使用命令：

```
swig -java example.i 
```

然后我编译生成的 example_wrap.c：

```
gcc -c example_wrap.c -I/usr/java/jdk1.6.0_24/include -I/usr/java/jdk1.6.0_24/include/linux 
```

我有以下错误：

```
example_wrap.c: In function ‘Java_exampleJNI_Foo_1set’:
example_wrap.c:201: error: ‘Foo’ undeclared (first use in this function) 
```

example.i 文件是错误的还是我没有完成某些事情？或者这是 SWIG 中的错误？有解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T13:31:59.637

您已告诉 SWIG 将声明函数和全局变量，但您需要确保该声明在生成的包装器代码中可见。`gcd`（如果您没有[为 gcc 使用更高的警告设置，](https://stackoverflow.com/questions/11395600/double-to-pyfloat-conversion-is-incorrect)您可能还会收到关于 的隐式声明的警告）

解决方案是使该声明可见，最简单的方法是：

```
%module example

%{
// code here is passed straight to example_wrap.c unmodified
extern int gcd(int x, int y);
extern double Foo;
%}

// code here is wrapped:
extern int gcd(int x, int y);
extern double Foo; 
```

就我个人而言，我会添加一个 example.h 文件，其中包含这些声明并制作模块文件：

```
%module example

%{
// code here is passed straight to example_wrap.c unmodified
#include "example.h"
%}

// code here is wrapped:
%include "example.h" 
```

在 example.c 中有一个相应的包含以进行良好的衡量。

另一种写法是：

```
%module example

%inline %{
  // Wrap and pass through to example_wrap.c simultaneously
  extern int gcd(int x, int y);
  extern double Foo;  
%} 
```

但通常我只建议使用`%inline`您要包装的内容特定于包装过程而不是您要包装的库的一般部分的情况。

# html - 当我有多个段落时，div 上的垂直对齐文本不起作用

> ID：11721432
> 
> 赞同：2
> 
> 时间：2012-07-30T12:20:09.397
> 
> 标签：html, css

我使用以下超简单的 HTML 代码：

```
<div class="test">
    <p>test 1234</p>
    <!--<p>test 5678</p>-->
</div> 
```

和 CSS

```
.test {
    background: #ccc;
    height: 120px;
}

.test p {
    line-height: 120px;
} 
```

Jsfiddle -> [http://jsfiddle.net/wP9K3/](http://jsfiddle.net/wP9K3/)

它工作正常

但是，如果我从上面的 HTML 代码中取消注释第二段，则显示效果不佳。（从 jsfiddle 中删除评论并运行它）。

如何在 CSS 中使`n`段落彼此对齐而没有空格？

在第一种情况下，显示是（很好）：

![在此处输入图像描述](../Images/08d9fa8a2c2b7855689482a8a2cb1429.png)

第二种情况，不好：

![在此处输入图像描述](../Images/a28652991e20cd204f2e874092533702.png)

我的期望：

![在此处输入图像描述](../Images/4321cd564489216e31b40fac5a89a9eb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:25:05.027

这个怎么样：

[http://jsfiddle.net/wP9K3/5/](http://jsfiddle.net/wP9K3/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:27:57.923

使用以下

```
​.test {
    背景颜色：#ccc；
    高度：120px；
    显示：表格单元格；
    垂直对齐：中间；    
}​</pre>

示例：http: [//jsfiddle.net/codebombs/st3aB/](http://jsfiddle.net/codebombs/st3aB/)

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:39:47.183

**代码结构是**

```
<style>
.test {
    background: #ccc;
    height: auto;
    width:100px;
}

.test p {
    line-height: 50px;
}
​&lt;/style>

<div class="test">
    <p>test 1234</p>
    <p>test 5678</p>
</div> 
```

[http://jsfiddle.net/wP9K3/16/](http://jsfiddle.net/wP9K3/16/)

# iphone - 在通知中心顶部保留特定通知

> ID：11721435
> 
> 赞同：1
> 
> 时间：2012-07-30T12:20:13.540
> 
> 标签：iphone, widget, uilocalnotification, notificationcenter

我想通过在通知中心打开应用程序并执行快速操作（即“添加新任务”）的特定通知来模拟轻量级 iPhone“小部件”。

问题是当我收到新通知（推送或本地通知）时，小部件任务被下推，最近的通知成为第一个。

我尝试通过为“小部件”通知添加重复间隔来解决此问题，但问题是它重复了此通知，并且由于我在后台，我无法取消以前的通知。

有任何想法吗？

# tesseract - tesseractengine3 .net 包装器的简单示例

> ID：11721436
> 
> 赞同：3
> 
> 时间：2012-07-30T12:20:14.517
> 
> 标签：tesseract

我正在尝试做一些简单的 OCR 任务，但我仍在寻找免费的图书馆。既然每个人似乎都在使用 tesseract，有人可以给我一个简单但有效的例子，用 C# 或 VB.NET 使用 tesseractengine3.dll，好吗？在搜索了几个小时后，我找不到在 VS2010 和 .Net 4 下编译的任何文档或示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:14:32.370

尝试使用在[http://vietocr.sourceforge.net/](http://vietocr.sourceforge.net/)很棒的开源 OCR中使用的[https://github.com/charlesw/tesseract](https://github.com/charlesw/tesseract)库，并以简单的示例查看库源代码中的 BaseApiTester 项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:52:54.730

**尝试这个**

```
 Ocr ocr = new Ocr();
    private void button1_Click(object sender, EventArgs e)
    {

         using (Bitmap bmp = new Bitmap(@"C:\OCR\ocr-test.jpg"))
        {
            tessnet2.Tesseract tessocr = new tessnet2.Tesseract();
            tessocr.Init(null, "eng", false);
            tessocr.GetThresholdedImage(bmp, Rectangle.Empty).Save("c:\\temp\\" + Guid.NewGuid().ToString() + ".bmp");
            // Tessdata directory must be in the directory than this exe
            Console.WriteLine("Multithread version");
            ocr.DoOCRMultiThred(bmp, "eng");
            Console.WriteLine("Normal version");
            ocr.DoOCRNormal(bmp, "eng");
        }
    }
   public class Ocr
    {
        public void DumpResult(List<tessnet2.Word> result)
        {
            foreach (tessnet2.Word word in result)
                Console.WriteLine("{0} : {1}", word.Confidence, word.Text);
        }

        public List<tessnet2.Word> DoOCRNormal(Bitmap image, string lang)
        {
            tessnet2.Tesseract ocr = new tessnet2.Tesseract();
            ocr.Init(null, lang, false);
            List<tessnet2.Word> result = ocr.DoOCR(image, Rectangle.Empty);
            DumpResult(result);
            return result;
        }

        ManualResetEvent m_event;

        public void DoOCRMultiThred(Bitmap image, string lang)
        {
            tessnet2.Tesseract ocr = new tessnet2.Tesseract();
            ocr.Init(null, lang, false);
            // If the OcrDone delegate is not null then this'll be the multithreaded version
            ocr.OcrDone = new tessnet2.Tesseract.OcrDoneHandler(Finished);
            // For event to work, must use the multithreaded version
            ocr.ProgressEvent += new tessnet2.Tesseract.ProgressHandler(ocr_ProgressEvent);
            m_event = new ManualResetEvent(false);
            ocr.DoOCR(image, Rectangle.Empty);
            // Wait here it's finished
            m_event.WaitOne();
        }

        public void Finished(List<tessnet2.Word> result)
        {
            DumpResult(result);
            m_event.Set();
        }

        void ocr_ProgressEvent(int percent)
        {
            Console.WriteLine("{0}% progression", percent);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T23:53:38.663

Tesseract 3.01 有一个 .NET 包装器：[tesseract-ocr-dotnet](https://github.com/charlesw/tesseract-ocr-dotnet)

# php - 如何在 php 文件中执行 .htaccess 以获取真实（重写）的 URL？

> ID：11721437
> 
> 赞同：1
> 
> 时间：2012-07-30T12:20:14.040
> 
> 标签：php, javascript, .htaccess, exec

我有一个项目，它通过 .htaccess 重写 url。我想通过 javascript/jquery 异步加载所有页面的标题和内容 div，并希望避免两个响应（一个用于标题，一个用于内容 div）。我敢肯定，javascript中有一种方法，但我想到了一个php文件，它在ajax请求之后返回这两个元素的数组。

对于这个概念，我需要得到“真实的”，重写的 url。

有没有办法通过 htaccess 文件传递​​一个字符串并将重写的字符串作为输出？

我想到了执行功能：

```
$url = 'example/2/info';
exec("ln -s .htaccess -i $url",$output);
print_r($output); 
```

...但这不起作用。

编辑，进一步解释（第二部分）：

通过点击一个链接，javascript 获取链接的href 并将它作为一个字符串（例如'example/2/info'）发送到一个php 文件（例如ajax.php）。在 ajax.php 中应该生成并扫描所请求的站点的 title-tag 和 content-div。然后这两个元素将作为数组发送回浏览器。要在 ajax.php 中生成此站点，需要重写 url（如 'example.php?page=2&subpage=info'），以获取所有 $_GET-parameters 和 script-file-names。

# c# - 如何重新编译针对 MonoTouch 配置文件的程序集？

> ID：11721442
> 
> 赞同：2
> 
> 时间：2012-07-30T12:20:39.237
> 
> 标签：c#, .net, msbuild, xamarin.ios, xamarin.android

在[http://docs.xamarin.com/ios/about/assemblies](http://docs.xamarin.com/ios/about/assemblies)上，它说如果我想将我的代码作为程序集提供给其他 MonoTouch 开发人员：“您必须重新编译源代码以生成针对 MonoTouch 配置文件的程序集”。

我怎么做？

我如何使用 Visual Studio 做到这一点？

我如何使用 msbuild 做到这一点？

[我在http://monodevassist.codeplex.com/documentation](http://monodevassist.codeplex.com/documentation)找到了 MonoDevAssist ，但那里的说明说我应该从“你的 Mac”复制一堆 DLL。我没有Mac。我已经在我的 Windows 机器上安装了 MonoTouch for Android，但我找不到与该描述中的目录类似的目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:54:03.163

> 我在我的 Windows 机器上安装了 MonoTouch for Android

您可能拥有的是**适用于 Android 的 Mono，**它在 Windows 上运行良好并以 Android 为目标。

**MonoTouch**是 Xamarin 的另一款产品，针对 iOS（iPhone、iPod、iPad），它需要 Mac 电脑。

即使这两种产品之间有相当多的功能共享，一般来说，您也需要查看您拥有的产品的文档。

> 我怎么做？

只需重新编译现有源代码，包括对 Mono for Android 随附的程序集的引用。

> 我如何使用 Visual Studio 做到这一点？

为 Mono for Android 创建一个新项目，例如库。将您的源代码添加到项目中。添加对所需 SDK 程序集的引用。重建你的代码。

# sql - 按源优先顺序从 SQL 数据库中挑选时间序列

> ID：11721443
> 
> 赞同：1
> 
> 时间：2012-07-30T12:20:46.120
> 
> 标签：sql, sql-server, tsql, time-series

我需要从看起来像这样的表中提取时间序列

TimeStamp（时间戳）、Datapoint（浮点数）、Data_source（整数）

因此，以下查询将为我提供源 1 记录的所有数据。

```
SELECT * 
  FROM table 
 WHERE data_source = 1 
```

现在，我如何选择使 data_source = 1 优先于其他来源？IE。我不想要双打，我总是想要一个最好来自源 1 的数据点，但如果不可用，请选择其他东西。

我使用子查询来计算每一行的 source=1 的数量。但这非常慢。必须有一种有效的方法来做到这一点？源 1 仅适用于大约 3% 的点。一个点可能有多个其他来源，但通常任何其他来源都可以。

我在 ms sql 2008 上。所以 T-SQL 会更受欢迎，但我认为这个问题很普遍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:34:38.603

听起来您想将数据组合成一个系列，更喜欢源 1。

这个怎么样：

```
select timestamp,
       datapoint
from (select t.*,
             min(data_source) over (partition by timestamp) as minDataSource
      from t
     ) t
where data_source = minDataSource 
```

这假设“1”是最小的数据源。它计算每个时间戳的最小数据源，然后使用来自该数据源的数据。

# .net - 在 IIS 中托管的 WSDL 文件 (WCF4)

> ID：11721445
> 
> 赞同：0
> 
> 时间：2012-07-30T12:20:48.853
> 
> 标签：.net, wcf, iis, wsdl

我是 WCF 和所有 SOA 开发人员的新手。我阅读并学习了 WCF，我或多或少地了解它是如何工作的

我的问题是我必须为一个项目开发一个 Web 服务。没有什么复杂的。此服务将托管在 IIS 中。一些同事给我发了一个 WSDL 文件来创建我的 web 服务。

但与此同时，我们必须取消对另一家公司的访问权限，以允许从外部到我们的服务器的 http 连接

我的一位同事告诉我，我只需要创建一个“空白 wabeservice”

那么是否可以从 WSDL 文件和 VS2010 生成“空”WCF 服务？或者是否可以直接在 IIS 中托管 WSDL

我的目的是向我的同事发送和地址，例如“http://10.2.3.5/myservice.wsdl”，他们将能够远程查看 WSDL

谢谢你的帮助

问候;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:25:21.860

给定一个 WSDL，您可以[生成一个服务接口](http://blogs.msdn.com/b/dotnetinterop/archive/2008/09/24/wsdl-first-development-with-wcf.aspx)。然后，您必须自己实现该服务，然后您可以将其托管在 IIS 中。

该服务将再次基于接口发出自己的 WSDL。请注意，公开的 WSDL 可能与用于生成服务的 WSDL 不同。

# javascript - 在页面加载之前使用 jQuery 将容器居中

> ID：11721446
> 
> 赞同：1
> 
> 时间：2012-07-30T12:20:49.490
> 
> 标签：javascript, jquery

我有一个需要以窗口为中心的一个`div`和一个。我`img`已经扩展了 jQuery 功能，以便使用这个函数来做到这一点：

```
jQuery.fn.center = function () {
                this.css("position","absolute");
                this.css("top", Math.max(0, (($(window).height() - this.outerHeight()) / 2) +$(window).scrollTop()) + "px");

                this.css("left", Math.max(0, (($(window).width() - this.outerWidth()) / 2) +  $(window).scrollLeft()) + "px");

                return this;
            } 
```

此功能完美运行，但唯一的问题是图像首先加载到它的默认位置，然后移动到中心。如何使图像在页面加载时直接在中心看到？

**编辑**：这就是我的意思：[www.foxteam.net/portfolio.php](http://www.foxteam.net/portfolio.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:26:30.143

我实际上需要查看调用此函数的代码来帮助您，但这里有一个快速建议。

首先渲染 img`display:none;`并在之后链接您的`.fadeIn()`函数，`.center()` 或者使用回调使其同步。

这样，您甚至在显示图像之前就将其居中。

# php - 如果某个字符串在 CodeIgniter 的 url 中，如何告诉 routes.php 不要使用控制器？

> ID：11721447
> 
> 赞同：0
> 
> 时间：2012-07-30T12:20:53.370
> 
> 标签：php, regex, codeigniter, routes

所以，我正在努力解决这个问题。我得到了这两种类型的 URL：

***本地主机/en/女性***

***本地主机/en/妇女/产品***

我试图告诉 CodeIgniter 如果它的**localhost/en/women使用路由 X，但如果它的****localhost/en/women/products**使用路由 Y ，但它总是使用 X 路由。

我试图通过使用正则表达式来排除 /products 段，如下所示：

```
$route['^en/women(?!products)(.*)'] = "women";

$route['^en/women/products'] = "products"; 
```

但我似乎无法让它工作。

我希望你能在这里得到我想要的东西。任何反馈都会被应用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:54:58.257

```
$route['en/women/?'] = "women";
$route['en/women/products'] = "products"; 
```

应该解决这个问题吗？

基本上`^`并且`$`默认存在于正则表达式中。

或者，也许您需要：

```
$route['^en/women/products'] = "products";
$route['^en/women/?'] = "women"; 
```

只要有`products`上面的，它应该覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T01:27:07.430

使用 CI 的通配符！

```
$route['en/women'] = "women";
$route['en/women/(:any)'] = "products"; 
```

# google-apps-script - Google Apps 脚本 - 将数据提取到带有参数的模板中

> ID：11721454
> 
> 赞同：4
> 
> 时间：2012-07-30T12:21:11.547
> 
> 标签：google-apps-script

我正在开发一个 Google Apps 脚本，我想将 URL 参数提取到一个 HTML 文件中。例如，如果用户访问 my_domain.com/?hello=test，则 HTML 输出应为“Hello test”。这是我的代码。

索引.html

```
<html>
    <body><p>Hello <?= data ?></p></body>
</html> 
```

我的代码.gs

```
function doGet(e) {
    var t = HtmlService.createHtmlOutputFromFile('index');
    t.data = e.parameter.hello;
    return t.evaluate();
} 
```

这会导致错误消息：“Vous ne pouvez pas ajouter ni modifier de propriétés pour cet objet。” （您不能添加或修改此对象的属性。）

我不知道为什么。我按照这个文档[https://developers.google.com/apps-script/html_service](https://developers.google.com/apps-script/html_service)他们说：

> 模板访问数据的第三种方式是直接在脚本文件中为模板添加变量，如下例所示。

```
function doGet() {
    var t = HtmlService.createTemplateFromFile('myTemplate');
    t.data = SpreadsheetApp.openById('SPREADSHEET_KEY_GOES_HERE').getRangeByName('dataRange').getValues();
    return t.evaluate();
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T12:33:17.463

你的代码：

> var t = HtmlService.create **HtmlOutput** FromFile('index');

你引用的例子：

> var t = HtmlService.create **Template** FromFile('index');

HtmlOutput 不能像您尝试的那样添加变量。模板可以 - 评估它的结果是 HtmlOutput。

# c++ - 使用 pugixml 和 xpath 检索 PCDATA

> ID：11721458
> 
> 赞同：0
> 
> 时间：2012-07-30T12:21:22.390
> 
> 标签：c++, xml, xpath

我花了上周阅读和重新阅读 pugixml 文档，但我找不到使用 xpath 检索 PCDATA 的方法。

请解释我会从标题中提取文本：

```
<html><head><title>Hello!</title></head></html> 
```

编辑：将 CData 更正为 PCData

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:47:26.183

> 请解释我会从标题中提取文本：
> 
> ```
> <html><head><title>Hello!</title></head></html> 
> ```

选择此文本节点的一个 XPath 表达式是：

```
/*/head/title/text() 
```

如果只需要字符串值（而不是文本节点），请使用：

```
string(/*/head/title) 
```

# android - 是否可以将 Android 数据库用于 iphone 应用程序？

> ID：11721460
> 
> 赞同：0
> 
> 时间：2012-07-30T12:21:28.067
> 
> 标签：android, ios, database, sqlite

我正在为 android 和 iphone 开发面向内容的应用程序。我在 android 中完成了开发，它具有 androidApp.db 格式的数据库。是否可以为 iphone 使用相同的数据库，因为在 iphone 中，数据库格式是 .sqlite。

是否可以使用**Android - androidAppdatabase.db**

对于**iOS - iphoneAppdatabase.sqlite**？

如果是这样，请您建议一些步骤。

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:22:49.767

**是**的，您可以在 android 和 iOS 中使用这个 DB

android 和 iOS 都支持**SQLite**

**编辑：从这里** [下载](http://www.sqliteexpert.com/download.html)SQLite 专家

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:24:22.977

db 文件用于在 android 和 iPhone 应用程序中进行复制，请查看以下链接，了解如何在 iOS 中执行此操作。

[将 SQLite 数据库添加到 iPhone 应用程序](https://stackoverflow.com/questions/487339/add-an-sqlite-database-to-an-iphone-app)

# asp.net-mvc-3 - MS单元测试天蓝色表存储

> ID：11721465
> 
> 赞同：0
> 
> 时间：2012-07-30T12:21:39.287
> 
> 标签：asp.net-mvc-3, unit-testing, azure

我已经在 Azure 项目上做了相当长的一段时间，到目前为止一切都很好。学到了很多！

现在我需要将一个单元测试器集成到我的项目的几乎一半（这似乎不再容易了？）

简而言之，我使用 Azure 表存储来存储我的 asp.net mvc3 项目（VS2010）的数据。目前我需要测试基本的 CRUD ActionResults 。我可以使用免费的 MS 单元测试器吗？有什么提示或线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:31:32.223

在这种情况下，您通常会首先创建一个接口，例如 ITableStorage，然后创建一个包含 Azure 特定内容的实现（例如 AzureTableStorage）。

这使得在单元测试期间用模拟/存根替换实际实现变得很容易。您可以查看 Windows Azure Helpers 以获取此类接口和包装器实现的示例：[Windows Azure Helpers](http://azuretoolkit.codeplex.com/SourceControl/changeset/view/46c9fb9ff82a#Source/AzureToolkit/AzureTableBase.cs)。

这是一篇关于单元测试和 Windows Azure 的好博文：http: [//blogs.southworks.net/fboerr/2010/07/23/windows-azure-storage-tdd-and-mocks/](http://blogs.southworks.net/fboerr/2010/07/23/windows-azure-storage-tdd-and-mocks/)

为了回答您的问题，是的，您可以将它与 MSTest 一起使用。

# c# - 忙碌指示灯不工作？

> ID：11721472
> 
> 赞同：-4
> 
> 时间：2012-07-30T12:22:18.157
> 
> 标签：c#, wpf, telerik

我的 Xaml 代码：

```
<telerik:RadBusyIndicator Name="RadBusyIndicator" IsBusy="True"
                          Margin="34,32,58,36" Visibility="Collapsed"
                          Grid.Row="3" Grid.RowSpan="4" Grid.Column="2">
</telerik:RadBusyIndicator> 
```

在单击导入按钮时，我有一个名为“导入”的按钮名称，使繁忙指示器为

```
RadBusyIndicator.visibility=visibility.visible; 
```

忙碌指示器不可见是我的代码错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:25:05.800

您是否将其 IsBusy 设置为 true。你也在后台线程上运行你的代码。

Busy 指示器应包含在 IsBusy 为 true 时将被禁用的控件。通常制作 BusyWindow 的整个窗口内容。

```
<telerik:RadBusyIndicator Name="RadBusyIndicator" IsBusy="True" Margin="34,32,58,36" Grid.RowSpan="4" Visibility="Collapsed" Grid.Row="3" Grid.Column="2">

<Button Grid.Row="6" Grid.Column="2" Content="Import" Width="120" Height="30" IsEnabled="False" VerticalAlignment="Center" HorizontalAlignment="Center" Name="btnImport" Click="btnImport_Click" Margin="76,5,79,5"></Button> 

</telerik:RadBusyIndicator> 
```

# android - 更改语言环境时字体不同？

> ID：11721488
> 
> 赞同：4
> 
> 时间：2012-07-30T12:22:56.467
> 
> 标签：android, localization, fonts

我为android做了一个应用程序，我有两种语言（英语-希腊语），我希望当设备具有英语语言环境时，其字体与希腊语不同。

我用了

```
String loc = Locale.getDefault().getISO3Language(); 
```

获得 iso3Language (eng, ell, deu ....) 然后我使用了 if 命令

```
if(loc=="eng"){
        Typeface font1 = Typeface.createFromAsset(getAssets(), "MISTRAL.TTF");
        txt1.setTypeface(font1);
        txt1.setText(R.string.app_name);
    }
    else{
        Typeface font1 = Typeface.createFromAsset(getAssets(), "SNAP.TTF");
        txt1.setTypeface(font1);
        txt1.setText(R.string.app_name);
    } 
```

但它无法识别它，即使我有英语语言环境，它也会执行代码的 else 部分！你能帮我吗？？谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:51:53.717

恕我直言，您的方法是错误的。这可以在[资源级别](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)轻松完成。不需要任何代码行！

在“res/values”目录中为英文版（和所有其他语言）创建带有值的 xml 文件。在此文件中创建设置字体的新[样式。](http://developer.android.com/guide/topics/resources/style-resource.html)这看起来或多或少是这样的（我这里没有 SDK，所以可能会有一些错误）：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="CustomText" parent="@style/Text">
        <item name="android:typeface">MISTRAL.TTF</item>
        <item name="android:textColor">#008</item>
    </style>
</resources> 
```

在“res/values-el”（[希腊语、现代](http://www.loc.gov/standards/iso639-2/php/code_list.php)）中创建相同的文件并在那里定义相同的样式（只需复制粘贴）但使用其他字体。

在您的布局文件中，在您需要根据区域设置更改字体的所有位置应用此样式。可以为视图设置属性“样式”（它没有命名空间）。自动完成应该引导你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:25:05.077

在java中，你不能使用==比较字符串。请改用 equals 方法。

本[教程](http://www.java-samples.com/showtutorial.php?tutorialid=221)以获得更深入的答案。

# css - 3D 中的 CSS3 透视图

> ID：11721489
> 
> 赞同：4
> 
> 时间：2012-07-30T12:22:56.790
> 
> 标签：css, css-transitions, perspective, css-transforms

我遇到了 CSS 3D 透视属性的问题。

```
<figure>
    <img src="http://www.saintbioz.fr/wp-content/uploads/2010/02/paysage-montagneux.jpg" width="512" height="384" alt="Landscape" />
    <figcaption>Summer in the mountains</figcaption>
</figure> 
```

我只想在 :hover 为 figcaption 设置动画，以执行从 -90deg 到 0deg 的折叠效果（如[http://davidwalsh.name/demo/folding-animation.php](http://davidwalsh.name/demo/folding-animation.php)），考虑到 -90deg 代表块变平（所以不可见）

```
/** vendor prefixes have been removed for better readability **/
figure {
    display: inline-block;
    position: relative;
    line-height: 0;
    perspective: 300px;
}
figcaption {
    background-color: rgba(0,0,0,0.2);
    padding: 20px 10px;
    position: absolute;
    top: 0;
    right: 0;
    left: 0;

    transition-property: all;
    transition-duration: 500ms;
    transform: rotateX(-123deg);
    transform-origin: top;
}
figure img:hover + figcaption {
    transform: rotateX(0deg);
} 
```

问题是透视图不会为 Chrome 和 Firefox 提供相同的渲染。我必须手动将 figcaption 默认转换设置为`rotateX(-123deg);`取决于 500px 的透视值，它在 Chrome 上运行良好，但在 Firefox 上运行良好。

理论上，当不是:hover 时应该是-90deg，当:hover 时应该是0deg，但似乎该`perspective`属性改变了深度场的长度，因此-90deg 不再起作用。

我想知道在使用`perspective`并`rotate`使其在所有最近的浏览器上都能正常运行时的最佳实践是什么？

此致。

* * *

PS：只需复制/粘贴 HTML 和 CSS 并在 Chrome 和 FF 中尝试，您应该会立即看到问题所在；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:04:47.963

我知道这不会有帮助，但我个人尝试了一些透视实验，每个浏览器都以不同的方式呈现透视图。有些浏览器不支持透视。因此，您的应用程序不会被所有人访问，也许您应该使用另一种技术，直到所有主要浏览器都完全符合透视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-25T21:49:31.970

这个答案可能为时已晚。

无论如何，使元素**不可见**的最佳方法是将角度保持在 90 度，但将透视原点设置在其上方。（无需计算获得所需效果的确切角度）

```
figure {
    display: inline-block;
    position: relative;
    line-height: 0;
    perspective: 300px;
    perspective-origin: top center;  /* added this setting */
}
figcaption {
    background-color: rgba(0,0,0,0.2);
    padding: 20px 10px;
    position: absolute;
    top: 0;
    right: 0;
    left: 0;

    transition-property: all;
    transition-duration: 2s;
    transform: rotateX(-90deg);
    transform-origin: top;
}
figure img:hover + figcaption {
    transform: rotateX(0deg);
}
```

```
<figure>
    <img src="http://www.saintbioz.fr/wp-content/uploads/2010/02/paysage-montagneux.jpg" width="512" height="384" alt="Landscape" />
    <figcaption>Summer in the mountains</figcaption>
</figure>
```

# mysql - MAX 值的 id

> ID：11721491
> 
> 赞同：0
> 
> 时间：2012-07-30T12:23:09.530
> 
> 标签：mysql

```
SELECT id, uid, MAX(a) FROM table GROUP BY uid 
```

现在，id 来自随机/第一行。

如何获得最大值的 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:25:07.133

```
select id, uid from table1 where a=(select max(a) from table1) 
```

当然，如果您有多个相同的最大值，这将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:32:40.183

我会试试这个：

```
SELECT id, uid, a FROM table1 ORDER BY a DESC LIMIT 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T04:39:13.067

如果您只想获得 id 的最大值，只需使用 Max(id)。

```
SELECT MAX(id), uid, MAX(a) from table GROUP BY uid; 
```

# javascript - Javascript显示表单的隐藏变量

> ID：11721492
> 
> 赞同：1
> 
> 时间：2012-07-30T12:23:09.627
> 
> 标签：javascript

这是我遇到每个人的问题的代码。自从我不懂 js 以来，这就是我已经工作了 8 个小时的工作。我从 w3school.com 网站获得了大部分内容，并且一直在尝试将所有内容拼凑在一起。呃，请帮忙

```
<script type="text/javascript">
var stringToMatch = 'christopher',  
input = document.getElementById('text'),  
div = document.getElementById('divColor1');  

 function toggle (switchElement){  
 if (this.value == stringToMatch){  
    div.style.display = 'block';  
}  
else {  
    div.style.display = 'none';  
}  
};?  
 </script>

 <!--This is the start of the code which i want to appear--> 
 <h3>Coupon Redeem</h3> 
 <form action="test" method="post"> 
Please type in the Coupon Code you have recieved: 
 <form id='coupon' onChange="javascript: ShowMenu(document.getElementById('text').value,'divColor1');">  
<input id="text" type="text"> 
<input type="button" id="text" value="Redeem" onClick="toggle(this)" /> 
</form>
 <!--This is the start of the hidden field that i want to appear when the coupon code is entered     correctly--> 
<div id="divColor1" style="display:none;"> 
<form action="https://www.paypal.com/cgi-bin/webscr" method="post"> 
<input type="hidden" name="cmd" value="_s-xclick"> 
<input type="hidden" name="hosted_button_id" value="asjsanxci"> 

  <input type="hidden" name="on0" value="Tokens">Tokens 
    <select name="os0"> 
  <o ption value="5 tokens">5 tokens$5.00 USD</option> 
 <option value="10 tokens">10 tokens$10.00 USD</option> 
 <option value="15 tokens">15 tokens$13.00 USD</option> 
 <option value="20 tokens">20 tokens$18.00 USD</option> 
 <option value="25 tokens">25 tokens$23.00 USD</option> 
 <option value="30 tokens">30 tokens$27.00 USD</option> 
 <option value="35 tokens">35 tokens$33.00 USD</option> 
 <option value="40 tokens">40 tokens$38.00 USD</option> 
  <option value="50 tokens">50 tokens$45.00 USD</option> 
 </select>  
&nbsp;&nbsp;&nbsp;&nbsp; 
<input type="hidden" name="on1" value="Username Verification">Username Verification 
 <input type="text" name="os1" maxlength="200"> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
<input type="hidden" name="currency_code" value="USD"> 
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynow_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!"> 
</form> 
</div> 

<br> 
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:28:28.670

修复代码

```
displayed:none => display:none

var input = document.getElementById('text'); 
// your html don't have id='text' 

<input type="text"> => <input id='text' type="text"> 
```

你必须解决两个问题

有用！

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:30:03.200

您的代码有语法错误

```
<div id="divColor1" style="displayed:none" 
```

将其更改为

```
<div id="divColor1" style="display:none;"> 
```

还有一些我发现的其他错误

```
<form id='coupon' onChange="javascript: ShowMenu(document.getElementById('text').var,'divColor1',);"> 
```

您的 ShowMenu 缺少一个变量，以及另一个语法错误***document.getElementById('text').var***

> >

```
<form id='coupon' 
    onChange="javascript: ShowMenu(document.getElementById('text').value,'divColor1');"> 
```

*更新* 我对您的代码进行了一些更改。[你可以在这里](http://jsfiddle.net/RTpmT/)看到工作代码

更新代码

```
<script>
var stringToMatch = 'christopher';  
function toggle (){  
 var input = document.getElementById('text').value; 

 if (input == stringToMatch){ 
    document.getElementById('divColor1').style.display = 'block';  
}  
else {  
   document.getElementById('divColor1').style.display = 'none';  
}  
};​
</script>

 <!--This is the start of the code which i want to appear--> 
 <h3>Coupon Redeem</h3> 
 <form action="test" method="post"> 
Please type in the Coupon Code you have recieved: 
 <form id='coupon' onChange="javascript: ShowMenu(document.getElementById('text').value,'divColor1');">  
<input id="text" type="text"> 
<input type="button" id="text" value="Redeem" onClick="toggle()" /> 
</form>
 <!--This is the start of the hidden field that i want to appear when the coupon code is entered     correctly--> 
<div id="divColor1" style="display:none;"> 
<form action="https://www.paypal.com/cgi-bin/webscr" method="post"> 
<input type="hidden" name="cmd" value="_s-xclick"> 
<input type="hidden" name="hosted_button_id" value="asjsanxci"> 

  <input type="hidden" name="on0" value="Tokens">Tokens 
    <select name="os0"> 
  <o ption value="5 tokens">5 tokens$5.00 USD</option> 
 <option value="10 tokens">10 tokens$10.00 USD</option> 
 <option value="15 tokens">15 tokens$13.00 USD</option> 
 <option value="20 tokens">20 tokens$18.00 USD</option> 
 <option value="25 tokens">25 tokens$23.00 USD</option> 
 <option value="30 tokens">30 tokens$27.00 USD</option> 
 <option value="35 tokens">35 tokens$33.00 USD</option> 
 <option value="40 tokens">40 tokens$38.00 USD</option> 
  <option value="50 tokens">50 tokens$45.00 USD</option> 
 </select>  
&nbsp;&nbsp;&nbsp;&nbsp; 
<input type="hidden" name="on1" value="Username Verification">Username Verification 
 <input type="text" name="os1" maxlength="200"> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
<input type="hidden" name="currency_code" value="USD"> 
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynow_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!"> 
</form> 
</div> 

<br> 
</form> ​ 
```

# android - 未找到 ViewPagerIndicator 可绘制资源

> ID：11721493
> 
> 赞同：0
> 
> 时间：2012-07-30T12:23:11.310
> 
> 标签：android, actionbarsherlock, viewpagerindicator

我有一个同时使用`ActionBarSherloc`k 和`ViewPagerIndicator`. 我遇到了一些问题，包括作为一个库，所以我最终做的是将`ViewPagerIndicator`包含`ActionBarSherlock`作为一个库并从中删除支持 v4 jar `ViewPagerIndicator`（参见这篇文章： [Using ActionBarSherlock & ViewPagerIndicator Syncronously Will Not Compile](https://stackoverflow.com/questions/10236242/using-actionbarsherlock-viewpagerindicator-syncronously-will-not-compile)）。

一切都构建并且我的应用程序运行，但是当我用 膨胀视图时`TabIndicator`，会引发资源未找到异常。我已经将其追溯到`vpi__tab_indicator.xml`文件和它引用的 6 个可绘制对象。当我注释掉那些drawables时，视图膨胀得很好。`ViewPagerIndicator`我可以在项目以及`R`我的应用程序的文件中看到这些可绘制对象。有什么我想念的吗？有问题的活动具有以下风格： `android:theme="@style/Theme.PageIndicatorDefaults"`

**编辑：**
堆栈跟踪（如果有帮助）

> 07-30 14:48:22.391: E/AndroidRuntime(7517): 致命异常: main 07-30 14:48:22.391: E/AndroidRuntime(7517): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. myapp/com.myapp.Activity}：android.content.res.Resources$NotFoundException：来自可绘制资源 ID #0x7f02005a 07-30 14:48:22.391 的文件 res/drawable/vpi__tab_indicator.xml：E/AndroidRuntime(7517)：在android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084) 07-30 14: 48:22.391: E/AndroidRuntime(7517): 在 android.app.ActivityThread.access$600(ActivityThread.java:130) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.app.ActivityThread$ H.handleMessage(ActivityThread.java:1195) 07-30 14:48:22.391:E/AndroidRuntime(7517): 在 android.os.Handler.dispatchMessage(Handler.java:99) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.os.Looper.loop(Looper.java :137) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.app.ActivityThread.main(ActivityThread.java:4745) 07-30 14:48:22.391: E/AndroidRuntime(7517):在 java.lang.reflect.Method.invokeNative(Native Method) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 java.lang.reflect.Method.invoke(Method.java:511) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786) 07-30 14:48:22.391: E/AndroidRuntime(7517):在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 dalvik.system.NativeStart.main(Native Method) 07-30 14:48:22.391:E/AndroidRuntime(7517): 原因: android.content.res.Resources$NotFoundException: 来自可绘制资源 ID #0x7f02005a 07-30 14:48:22.391 的文件 res/drawable/vpi__tab_indicator.xml: E/AndroidRuntime(7517):在 android.content.res.Resources.loadDrawable(Resources.java:1918) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.content.res.TypedArray.getDrawable(TypedArray.java:601) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.view.View.(View.java:3336) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.widget .TextView.(TextView.java:447) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 com.viewpagerindicator.TabPageIndicator$TabView.(TabPageIndicator.java:252) 07-30 14:48:22.391 : E/AndroidRuntime(7517): 在 com.viewpagerindicator.TabPageIndicator.addTab(TabPageIndicator.java:152) 07-30 14:48:22.391:E/AndroidRuntime(7517): 在 com.viewpagerindicator.TabPageIndicator.notifyDataSetChanged(TabPageIndicator.java:209) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 com.viewpagerindicator.TabPageIndicator.setViewPager(TabPageIndicator.java :197) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 com.myapp.Activity.onCreate(Activity.java:27) 07-30 14:48:22.391: E/AndroidRuntime(7517):在 android.app.Activity.performCreate(Activity.java:5008) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079) 07-30 14 :48:22.391: E/AndroidRuntime(7517): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023) 07-30 14:48:22.391: E/AndroidRuntime(7517): ... 11 更多 07- 30 14：48：22.391：E/AndroidRuntime（7517）：由：java.lang 引起。NullPointerException 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.graphics.drawable.DrawableContainer$DrawableContainerState.addChild(DrawableContainer.java:524) 07-30 14:48:22.391: E/AndroidRuntime(7517 ): 在 android.graphics.drawable.StateListDrawable$StateListState.addStateSet(StateListDrawable.java:278) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.graphics.drawable.StateListDrawable.inflate(StateListDrawable. java:186) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:881) 07-30 14:48:22.391: E/AndroidRuntime( 7517): 在 android.graphics.drawable.Drawable.createFromXml(Drawable.java:818) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.content.res.Resources.loadDrawable(Resources.java :1915)在 android.graphics.drawable.DrawableContainer$DrawableContainerState.addChild(DrawableContainer.java:524) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.graphics.drawable.StateListDrawable$StateListState.addStateSet(StateListDrawable. java:278) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:186) 07-30 14:48:22.391: E/AndroidRuntime( 7517): 在 android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:881) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.graphics.drawable.Drawable.createFromXml(Drawable.java :818) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.content.res.Resources.loadDrawable(Resources.java:1915)在 android.graphics.drawable.DrawableContainer$DrawableContainerState.addChild(DrawableContainer.java:524) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.graphics.drawable.StateListDrawable$StateListState.addStateSet(StateListDrawable. java:278) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:186) 07-30 14:48:22.391: E/AndroidRuntime( 7517): 在 android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:881) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.graphics.drawable.Drawable.createFromXml(Drawable.java :818) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.content.res.Resources.loadDrawable(Resources.java:1915)524) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.graphics.drawable.StateListDrawable$StateListState.addStateSet(StateListDrawable.java:278) 07-30 14:48:22.391: E/AndroidRuntime( 7517): 在 android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:186) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java :881) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.graphics.drawable.Drawable.createFromXml(Drawable.java:818) 07-30 14:48:22.391: E/AndroidRuntime(7517 ): 在 android.content.res.Resources.loadDrawable(Resources.java:1915)524) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.graphics.drawable.StateListDrawable$StateListState.addStateSet(StateListDrawable.java:278) 07-30 14:48:22.391: E/AndroidRuntime( 7517): 在 android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:186) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java :881) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.graphics.drawable.Drawable.createFromXml(Drawable.java:818) 07-30 14:48:22.391: E/AndroidRuntime(7517 ): 在 android.content.res.Resources.loadDrawable(Resources.java:1915)StateListDrawable.inflate(StateListDrawable.java:186) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:881) 07-30 14:48: 22.391: E/AndroidRuntime(7517): 在 android.graphics.drawable.Drawable.createFromXml(Drawable.java:818) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.content.res.Resources .loadDrawable(Resources.java:1915)StateListDrawable.inflate(StateListDrawable.java:186) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:881) 07-30 14:48: 22.391: E/AndroidRuntime(7517): 在 android.graphics.drawable.Drawable.createFromXml(Drawable.java:818) 07-30 14:48:22.391: E/AndroidRuntime(7517): 在 android.content.res.Resources .loadDrawable(Resources.java:1915)

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T22:17:11.153

When copying files from one place to the other, a couple of my `ViewPagerIndicator` drawables must have gotten corrupted along the way. I re-fetched the drawables from the repo, added them into the project, everything compiled and ran perfect.

Hopefully that will save someone else a few hours.

# iphone - 在 iphone 中更改方向时重新排列 UIButtons？

> ID：11721494
> 
> 赞同：2
> 
> 时间：2012-07-30T12:23:16.737
> 
> 标签：iphone, dynamic, uibutton, position

在此处输入图像描述，我在一个视图中有一个按钮列表，该视图是另一个 UIView 的子视图。当设备方向更改为横向模式时，我需要按顺序重新排列这些按钮。

他们有什么办法吗？或者我需要通过重新定位所有按钮来手动完成所有这些事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:37:52.190

`shouldAutorotateToInterfaceOrientation:`，在其他答案中提到，是为了让您的视图控制器决定**是否**允许自动旋转到给定的方向。（你应该返回`YES`或`NO`）。

如果您真的想以**编程**方式调整子视图的布局，您可以在任一

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    [UIView animateWithDuration: duration
                          delay: 0.0f
                        options: UIViewAnimationOptionCurveLinear
                     animations: ^(void) {

                         if (UIInterfaceOrientationIsPortrait(toInterfaceOrientation)) {
                             self.button.frame = CGRectMake(x1, y1, self.button.frame.size.width, self.button.frame.size.height);
                         } else {
                             self.button.frame = CGRectMake(x2, y2, self.button.frame.size.width, self.button.frame.size.height);
                         }

                     }
                     completion: ^(BOOL finished) {
                         // code to run after animation completes can go here
                     }];
} 
```

或者，您可以使用`willAnimateRotationToInterfaceOrientation:duration:`一步旋转。

它不仅仅在**实际**发生自动旋转时调用，而且还为您提供`duration`动画的。这允许您将任何可动画视图属性更改包装在您自己的动画中，以便它们在旋转期间平滑地动画，而不仅仅是捕捉到它们的新值。

但是，实际上，这*通常*不是解决问题的最佳方法。[有关该问题的更一般性讨论，](https://stackoverflow.com/questions/11621777/how-to-properly-design-multi-orientation-ipad-application)请参阅此链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:26:03.227

更改按钮中的 CGFrame

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if(interfaceOrientation==UIInterFaceOrientationPortrait)
    {
        Button1.frame=...;
        Button2.frame=....;
     }
     else if(interfaceOrientation==UIInterFaceOrientationLandscapeLeft)
    {
       Button1.frame=...;
        Button2.frame=....;
    }
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:34:28.803

1-你可以用这个

```
YOUR_OBJECT.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleLeftMargin | 
            UIViewAutoresizingFlexibleRightMargin; 
```

或者

2-使用带有 CGRectMake 的框架属性为您的对象

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
   if(interfaceOrientation==UIInterFaceOrientationPortrait)
else if(interfaceOrientation==UIInterFaceOrientationLandscapeLeft) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T13:15:27.493

你可以通过

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

方法。

在你的课堂上让两个方法`viewController.h`假设它们是 -

```
-(void)viewForPortraitMode;
-(void)viewForLandscapeMode; 
```

这是您`viewcontroller.m`文件中两者的主体部分。

```
//Set frame according to you
-(void)viewForPortraitMode
{
    [btn1 setFrame:CGRectMake(117.0, 383.0, 87.0, 37.0)];
    [btn2 setFrame:CGRectMake(40.0, 20.0, 240.0, 324.0)];
}

-(void)viewForLandscapeMode
{
    [btn1 setFrame:CGRectMake(200.0, 252, 87.0, 37.0)];
    [btn2 setFrame:CGRectMake(20.0, 7.0, 446.0, 228.0)];
} 
```

并在此调用这两个方法

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if(interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
    {
        [self viewForPortraitMode];
    }
    else
    {
        [self viewForLandscapeMode];
    }
    return YES;
} 
```

# php - PHP 获取渲染的图像内容

> ID：11721499
> 
> 赞同：0
> 
> 时间：2012-07-30T12:23:33.783
> 
> 标签：php, image-processing

我有一个 PHP 脚本，它的目的是从报价图像生成器中捕获图像，在每个服务器请求之后显示一个图像。

所以图像是这样调用的：

```
<img src="gen/123456" alt="" /> 
```

但是，我的问题是，生成图像的文件每次被调用时都会生成另一个图像，所以在我打开浏览器并看到引用后，尝试访问它的源会给出一个空文档（当前图像 ID 号已更改，因此您无法从 访问图像`123456`，因为现在有不同的数字）。

如何获取在浏览器的第一个请求中呈现的第一个生成的图像，而不访问它的实际图像 URL？

# vb.net - 在 vb.net 中打印信息页

> ID：11721500
> 
> 赞同：1
> 
> 时间：2012-07-30T12:23:35.930
> 
> 标签：vb.net

我正在构建一个应用程序，该应用程序获取我从 Web 服务中提取的信息并将其构建到一个外观简单的页面中以打印出来。他们是一种制作某种布局的方法，所以我可以在适当的地方用我的数据填写空白并打印。具体来说，我希望能够打印包含以特定方式排列的多个图像和文本的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:27:08.273

就在这里。水晶报表就是答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:35:02.410

您可以使用 Crystal Report 和 RDLC。

# javascript - 通过 JavaScript 更改 body 标签样式

> ID：11721501
> 
> 赞同：14
> 
> 时间：2012-07-30T12:23:43.377
> 
> 标签：javascript, html, dom

考虑到用户的客户端宽度，我正在尝试编写一个脚本来更改页面的宽度。是这样的：

```
function adjustWidth() { 
    width = 0;
    if (window.innerHeight) {
        width = window.innerWidth;
    } else if (document.documentElement && document.documentElement.clientHeight) {
        width = document.documentElement.clientWidth;
    } else if (document.body) {
        width = document.body.clientWidth;
    }
    if (width < 1152) {
        document.getElementsByTagName("body").style.width="950px";
    }
    if (width >= 1152) {
        document.getElementsByTagName("body").style.width="1075px";
    }
}
window.onresize = function() {
    adjustWidth();
};
window.onload = function() {
    adjustWidth();
}; 
```

使用此脚本，我从 Firebug 收到错误消息：

```
document.getElementsByTagName("body").style is undefined 
```

现在我的问题是，我怎样才能访问身体的风格？因为在 css 表中定义了它的选择器和宽度属性。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-30T12:25:33.107

该函数返回一个节点列表，即使只有一个`<body>`.

```
document.getElementsByTagName("body")[0].style = ... 
```

现在，也就是说，您可能想考虑使用 CSS 而不是 JavaScript。使用 CSS 媒体查询，您可以进行以下调整：

```
@media screen and (max-width: 1151px) {
  body { width: 950px; }
}
@media screen and (min-width: 1152px) {
  body { width: 1075px; }
} 
```

媒体查询适用于 IE9 和几乎所有其他现代浏览器。对于 IE8，你可以回退到 JavaScript 或者只是让 body 是视口宽度的 100% 或其他东西。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-30T12:27:22.937

```
document.getElementsByTagName("body")[0].style 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-09-19T04:39:16.097

```
document.getElementsByTagName('body')[0].style = 'your code'; 
```

例子：

```
document.getElementsByTagName('body')[0].style = 'margin-top: -70px'; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-30T12:25:44.933

`getElementsByTagName`返回一个节点数组，因此您必须使用它`[]`来访问元素。

尝试`document.getElementsByTagName("body")[0].style`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-30T12:31:53.383

我相信你得到的`document.getElementsByTagName("body")`是`HTMLCollection`. 你应该可以用`document.getElementsByTagName("body")[0].style`得到你想要的。

# android - 另一个 ListView 中的 ListView

> ID：11721502
> 
> 赞同：6
> 
> 时间：2012-07-30T12:23:49.907
> 
> 标签：android, listview, view, custom-view

我必须在垂直列表视图中创建一个水平列表视图。两个列表视图都可以有任意数量的元素，并且都需要可滚动。

我将如何实现这一点，因为我读过 android 不支持列表视图层次结构。

谢谢 ！

![自定义用户界面](../Images/759ef398537c5d5bb6b794cc93f04771.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:30:03.380

为此，您必须执行以下操作：

1.  创建一个具有单个 LinearLayout 的 Vertical ScrollView。
2.  现在在此 Linearlayout 中创建水平 ListViews，如下例所示：

因此，这将让您在**Screen中****垂直滚动**以及**在每个 ListView 中水平**滚动。

 ****例如。

```
<ScrollView>  

  <LinearLayout.....  //this a vertically oriented layout
  >  
     <ListView/>  
     .
     .//This listViews Are Horizontal
     .
     <ListView>
  </Linearlayout>
</ScrollView> 
```

# **编辑：** 动态添加 ListView 到 LinearLayout。

```
LinearLayout ll=(LinearLayout)findViewById(R.id.id_given_in_the_XML_file);  
ListView lv=new ListView(Activityname.this);  
.
.
.
Do All ListView Processing Here
.
.
.
lv.setAdapater(adapter);  

ll.addView(lv); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:31:00.123

我建议使用 ListView 垂直滚动并在 ScrollView 中使用 LinearLayout 来进行水平滚动。

ListView - 项目 1: - Horizo​​ntalScrollView - LinearLayout(orientation:horizo​​ntal)

[也检查这个答案 - https://stackoverflow.com/questions/5398449/how-can-i-create-a-pulse-like-ui-for-an-android-application](https://stackoverflow.com/questions/5398449/how-can-i-create-a-pulse-like-ui-for-an-android-application)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:30:38.460

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/ll"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical" >

 <TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Accounts" />
<ListView
    android:id="@+id/Accounts"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:scrollbars="vertical" />
<View
    android:layout_width="fill_parent"
    android:layout_height="2dp"
    android:background="#FF4500" />
<TextView
    android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Contacts" />
<ListView
    android:id="@+id/con_listView"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:scrollbars="vertical" />
</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T12:34:40.553

这是不可能的，但你可以做一个我也使用过并为我工作过的技巧。您可以使用此方法停止（中断）外部列表视图的滚动方法:)

假设您在 Horizo​​ntal Listview HV 中有 listview LV，那么您必须在列表视图的 touch 方法中编写以下内容 -

```
lv.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View arg0, MotionEvent arg1) {

                if(arg1.getAction() == MotionEvent.ACTION_DOWN || arg1.getAction() == MotionEvent.ACTION_MOVE)
                {
                HV.requestDisallowInterceptTouchEvent(true);

                }
                return false;
            }
        }); 
```****

# charts - 列表和空格的 iReport 问题

> ID：11721503
> 
> 赞同：2
> 
> 时间：2012-07-30T12:23:53.127
> 
> 标签：charts, jasper-reports, whitespace, ireport

这个问题困扰我很久了。

当我在列表下方留下空白时，列表会将其向下推，而不是覆盖它。有时这样做时，会将内容推送到下一页！

我试图说明这种情况 - 见附件。

在第一张图片中，左下角的图表具有位置类型“float”，因此它位于空白下方。当我将其更改为“相对于顶部”时，它位于正确的位置，但仍然会在其下方出现空白（在图表和页脚之间）

这可以解决，如何解决？！当试图获得一个体面的布局时，这是一个真正的问题。

提前致谢。 ![图1](../Images/fb3ed24dbf981500491fb4cb3a65c5bb.png) ![图2](../Images/a0a483d2a1a01b53631ff4b9e6b250f9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:16:38.000

JasperReports 就是这样。您设计了带有空格的报告，因此报告将其保留在那里。

在许多情况下（我怀疑包括这种情况）你可以通过简单地使 List 组件对象更大来获得你想要的东西。实际上将设置其最小尺寸以匹配其右侧的图表。它可以进一步延伸，但不会强制将任何空白添加到呈现的报告中。

# wpf - 来自另一个程序集的资源字典的 Uri

> ID：11721505
> 
> 赞同：1
> 
> 时间：2012-07-30T12:23:53.763
> 
> 标签：wpf, uri, resourcedictionary

我有样式程序集，我必须即时加载。

当我从“UserThemes”文件夹外部引用程序集时，它工作正常。如下所示“pack://application:,,,/Styles110;component/Themes/SIGreen.xaml”

然后我将styles110程序集移动到UserThemes文件夹中并尝试过，这样它就不起作用了。"pack://application:,,,/UserThemes/Styles110;component/Themes/SIGreen.xaml" 请指导我。

问候， 拉曼

# php - 多个数据库选择 php mysql

> ID：11721519
> 
> 赞同：1
> 
> 时间：2012-07-30T12:24:45.947
> 
> 标签：php, mysql, database

我在同一台服务器上有 2 个数据库和 2 个相同的表。

我想要做的是从两个表中选择所有记录并将它们加入一个数组中。我一直在搞乱下面的脚本。由于某种原因，它两次返回 db2.tbl 的记录，并且根本不返回 db1.tbl 记录。当我尝试从单个数据库中选择数据时，它们都可以正常工作。有没有人看到问题？

```
<?PHP
 require_once("config.php");

$conn = @mysql_connect($dbhost, $dbuser, $dbpass)or die ('Error connecting to mysql server'.mysql_error());
$q = mysql_query("SELECT * FROM db1.tbl JOIN db2.tbl");
var_dump(mysql_num_rows($q));
while($arr = mysql_fetch_assoc($q)){
    var_dump($arr);
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:28:15.433

这是你想要的吗 ？来自 database1 的所有记录，后跟来自 database2 的所有记录：

```
$q = mysql_query("SELECT * FROM db1.tbl UNION SELECT * FROM db2.tbl"); 
```

我假设您正在连接的用户可以访问这两个数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:37:08.960

您的查询应该有效。但是，将tilt(`) 添加到您的数据库名称表名中。先在mysql中执行查询看看是否可以，然后用php执行。

# c# - ASP.NET MVC 新闻文章替代语言版

> ID：11721520
> 
> 赞同：0
> 
> 时间：2012-07-30T12:24:49.273
> 
> 标签：c#, asp.net-mvc, localization, internationalization

我需要在 ASP.NET MVC 项目中添加单个文章的替代语言版本。我目前有一个名为 NewsArticle 的数据库表，其中包含 ArticleId、Abstract、Headline、BodyText 和 ImageUrl 字段。在创作新闻文章时，我想基本上有一个选项，该选项为作者提供了一个字段来输入文章的替代语言版本。然后，可以通过站点的语言切换控件在该特定语言的新闻文章视图上显示该替代内容。

谁能指出我重新设计现有模型以包含此要求的正确方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:36:19.010

设法通过为每个多语言对象创建两个表来解决这个问题，即将 NewsArticle 拆分为两个表 NewsArticleText（具有本地化内容，每种语言一个记录，加上语言的 ISO 代码）和 NewsArticle（具有语言中立数据； ArticleId , ImageUrl 等）创建第三个表 Languages，其中使用的所有语言及其 ISO 代码作为主键。

例子：

```
Table "NewsArticle"
-------------------
ArticleId                 : uniqueidentifier
<any other language-neutral fields>

Table "NewsArticleText"
-----------------------
ArticleId          : uniqueidentifier (foreign key referencing the NewsArticle)
LanguageCode       : varchar(6)  (e.g. "en-GB", "de-CH", foreign key referencing the Languages table)
Headline           : varchar(100)
BocyText           : varchar(max)
<any other localized data>

Table "Languages"
-----------------
LanguageId         : uniqueidentifier
LangaugeCode       : varchar(6)
Name               : varchar(20) 
```

查询数据库将基于语言参数，例如以下代码返回所有英文文章：

```
// get all English language articles 
var news = from na in datacontext.NewsArticles
    where na.Deleted == false
    join nt in datacontext.NewsArticlesText 
        on na.ArticleId equals nt.ArticleId
    where nt.LanguageCode == "en-GB"
    select new NewsArticleItem
    {
       ArticleId = na.ArticleId,
       ImageUrl = na.ImageUrl,
       Headline = nt.Headline,
       Abstract = nt.Abstract,
       BodyText = nt.BodyText,
       LanguageCode = nt.LanguageCode,
       DateCreated = na.DateCreated
    };
return news.ToList(); 
```

# objective-c - 如何在选择器视图中获取多个数组

> ID：11721522
> 
> 赞同：-1
> 
> 时间：2012-07-30T12:24:52.310
> 
> 标签：objective-c, ios, xcode, nsarraycontroller, picker

我真的很接近这个...为此，我有两个文本框。按下时，它们会调用 ui 选择器。

文本框一返回值 1,2,3,4

文本框两个返回值 A、B、C、D

问题在于，当对文本框两个提出挑选器时，它将显示文本框一号的值，尽管将从文本框两个中选择适当的行。有人可以检查我的代码并告诉我我在哪里出错，谢谢。

。H

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIPickerViewDataSource,     UIPickerViewDelegate,UITextFieldDelegate>

{
//decalre picker
UIPickerView *select;

//declare NSArrray
NSArray *arrStatus;
NSArray *arrStatus2;

}

@property (strong, nonatomic) IBOutlet UITextField *text1;
- (IBAction)Value:(id)sender;
@property (strong, nonatomic) IBOutlet UITextField *text2;

@end 
```

.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize text2;

@synthesize text1;

- (void)viewDidLoad
{

select = [[UIPickerView alloc] initWithFrame:CGRectZero];
select.delegate = self;
select.dataSource = self;
[select setShowsSelectionIndicator:YES];
text1.inputView = select;
text2.inputView = select;     

arrStatus = [[NSArray alloc] initWithObjects:@"1",@"2",@"3",@"4",nil];
arrStatus2 = [[NSArray alloc] initWithObjects:@"A",@"B",@"C",@"D",nil];

-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
//One column
return 1;
}

-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
 {
//set number of rows
return arrStatus.count;
return arrStatus2.count;

}

-(NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
//set item per row
return [arrStatus objectAtIndex:row];
return [arrStatus2 objectAtIndex:row];

[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

 - (void)viewDidUnload
{
[self setText1:nil];
[self setText2:nil];

[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)Value:(id)sender {

NSInteger selectedRow = [select selectedRowInComponent:0];

if([text1 isFirstResponder])
text1.text = [arrStatus objectAtIndex: selectedRow];
[text1 resignFirstResponder];

if ([text2 isFirstResponder])
text2.text = [arrStatus2 objectAtIndex: selectedRow];
[text2 resignFirstResponder];

}

@end 
```

所以总结一下，我试图获得 1 个选择器视图，带有 1 个列、2 个数组、2 个文本框。我试过创建另一个选择器视图，但也没有用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:30:42.423

该`return` 语句退出该方法。因此，如果您有 2 个`return`语句，它将永远不会到达第二个语句。您应该这样修改这些方法：

```
-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
 {
    if([text1 isFirstResponder])
        return arrStatus.count;
    else
        return arrStatus2.count;
}

-(NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
     if([text1 isFirstResponder])
         return [arrStatus objectAtIndex:row];
     else
         return [arrStatus2 objectAtIndex:row];
} 
```

希望这可以帮助。干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:33:09.573

这是能够显示具有给定数组的选择器视图的代码，文本字段将具有**UIPickerView**的第一个数据。如果您有任何问题，请告诉我。我为下一个文本字段的一个文本字段做了它，您只需要弄清楚使用文本字段的标签并设置文本。

```
-(void)viewDidLoad
    {
        [super viewDidLoad];

        arrayNo = [[NSArray alloc] initWithObjects:@"1",@"2",@"3",@"4",nil];
        [pickerView selectRow:1 inComponent:0 animated:NO];
        self.text1.text= [arrayNo objectAtIndex:[pickerView selectedRowInComponent:0]];
}
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView;
{
    return 1;
}
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    mlabel.text=    [arrayNo objectAtIndex:row];
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component;
{
    return [arrayNo count];
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component;
{
    return [arrayNo objectAtIndex:row];
} 
```

# android - 如何在 android 中创建图标/应用程序分组？

> ID：11721542
> 
> 赞同：-3
> 
> 时间：2012-07-30T12:25:46.787
> 
> 标签：android

嘿伙计们，我对 android 有点陌生，所以我想知道如何在 android 中创建一个 app grouper 应用程序。该应用程序应分为不同的类别，例如媒体，游戏，实用程序我要创建的应用程序是 [这样](https://play.google.com/store/apps/details?id=com.LifeBoat.AppGrouper&hl=en)的。希望你们能给我一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:37:39.320

**因此，为此，您必须首先将所有已安装应用程序的列表获取到您的设备中，这可以通过以下代码实现**

```
final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);
final List pkgAppsList = context.getPackageManager().queryIntentActivities( mainIntent, 0); 
```

**现在，将此列表显示到自定义列表视图中，并且该列表的 onClick 事件启动特定应用程序。**

# map - 创建 Openstreetmap 提取的 mbtiles 文件的最简单方法？

> ID：11721543
> 
> 赞同：5
> 
> 时间：2012-07-30T12:25:48.867
> 
> 标签：map, openstreetmap

我正在创建一个使用在线和离线地图的 iPhone 旅游应用程序。对于离线地图，我希望允许用户下载他们感兴趣的区域（例如伦敦）的 mbtiles 文件。地图应该有道路等信息，这些信息已经在 OpenStreetmap 中找到。我知道诸如[http://metro.teczno.com/之类的网站](http://metro.teczno.com/)用于下载 Openstreetmap 提取。创建 Openstreetmap 提取的 mbtiles 文件的最简单方法是什么？注意：不需要地图定制。我尝试使用 TileMill，但无法看到正确的地图信息。关于这方面的大多数信息都说要加载很多其他工具，并且这些说明不容易遵循或者它们不起作用，并且由于我不需要地图自定义，因此真的不需要它。我的主要/首选工作环境依次是 Windows、Mac 和 Ubuntu（在 Windows 下使用 VirtualBox）。

谢谢汤姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T16:34:18.570

[这些事情从来都不是很容易，但我试图在Maperitive](http://maperitive.net)中让它们尽可能简单。几天后我将发布一个支持从 OSM XML 文件创建 MBTiles 的新版本。同时，您可以阅读较早的教程，该教程将切片生成为 Web 地图服务器的单个文件。由于您不需要地图定制，您可以跳过一些步骤：[http ://braincrunch.tumblr.com/post/9921938947/maperitive-tutorial-a-hiking-web-map-in-ten-easy-steps](http://braincrunch.tumblr.com/post/9921938947/maperitive-tutorial-a-hiking-web-map-in-ten-easy-steps)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-25T22:39:14.727

几天前，我在[我的网站](http://mapit-gis.com/offline-maps)上写了一篇文章- 这是关于如何从 OSM 数据生成 PNG 光栅 mbtile 的分步过程。

我是 mbtiles 的重度用户，几周前我确实设法部署了一个基于**node.js**和**Mapnik**的解决方案。其非常快速、方便的单行命令解决方案。

要遵循的步骤是：

1.  下载并安装 node.js - 确保它是**32 位版本**，否则**Mapnik**将无法工作。

2.  如果您还没有 Python，请安装它。

3.  在 node.js 控制台中安装 Mapnik 执行命令：

    ```
    npm install -g tl @mapbox/mbtiles tilelive-http 
    ```

4.  安装成功后应该可以执行命令：-z（最小缩放级别），-Z（最大缩放级别）

    ```
    tl copy -z 0 -Z 15 -b "19.481506 49.050920 20.407791 49.319751"  "http://a.tile.openstreetmap.org/{z}/{x}/{y}.png" mbtiles://./tatra.mbtiles 
    ```

这将为 Tatra 山脉创建测试 mbtiles 文件，如果您在 Windows 上，该文件将位于 C:\Users{your_user_name}\ 文件夹

由于声誉低下，我无法包含 URL 或图片，但我已[在此处](http://mbtilesmap.com/generate-mbtiles-node-js-mapnik)记录了该过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-19T18:32:53.933

您可以使用此工具从任何 .osm.pbf 文件创建 MBTiles - [https://github.com/systemed/tilemaker](https://github.com/systemed/tilemaker)

1.  [从Geofabric](https://download.geofabrik.de/)或任何其他来源下载 .osm.pbf 文件

2.  下载[瓷砖制造商](https://github.com/systemed/tilemaker/releases)

3.  执行以下命令

```
tilemaker --input netherlands.osm.pbf --output netherlands.mbtiles --process resources/process-openmaptiles.lua --config resources/config-openmaptiles.json 
```

您可以在这篇博文中了解更多信息 - [https://blog.kleunen.nl/blog/tilemaker-generate-map](https://blog.kleunen.nl/blog/tilemaker-generate-map)

# javascript - 清空表格中的所有字段

> ID：11721544
> 
> 赞同：0
> 
> 时间：2012-07-30T12:25:49.063
> 
> 标签：javascript, jquery

我有这么大的表格，估计有 170 个输入字段，按 html 表格分成小节。以下是我的一个小节：-

```
 <table width="90%"  border=0 align="center" cellpadding="0" cellspacing="1" >
    <tr align="center"> 
      <th height="20" colspan="4"> Upgradings / Repair Work 
        <?php if($ResultRow->shipnam != '') echo(" for ".$ResultRow->shipnam);?>
      </th>
    </tr>

    <tr> 
      <td width="15%" height="20" align="right">Date est. start Upgrade : </td>
      <td height="20" width="30%">
        <input name="est_start_upgrade" type="text" id="est_start_upgrade" size="10" maxlength="11" tabindex="1" onBlur="cal_prs_date1(this)" value="<?php echo(trim($_POST['est_start_upgrade']));?>" />
        <a href="javascript:est_start_upgrade.popup();" tabindex="1" ><img src="../../common/date_component/img/cal.gif" width="16" height="16" border="0" alt="Click here to pick up the date"></a>&nbsp; 
      </td>
            <td width="15%" height="20" align="right"> Date est. end Upgrade : </td>
      <td height="20" width="30%">
        <input name="est_end_upgrade" type="text" id="est_end_upgrade" size="10" maxlength="11" tabindex="1" onBlur="cal_prs_date1(this)" value="<?php echo(trim($_POST['est_end_upgrade']));?>" /> 
        <a href="javascript:est_end_upgrade.popup();" tabindex="1" ><img src="../../common/date_component/img/cal.gif" width="16" height="16" border="0" alt="Click here to pick up the date"></a>&nbsp; 
      </td>
    </tr>

    <tr> 
      <td  height="20" align="right">Date actual start Upgrade : </td>
      <td height="20" >
        <input name="act_start_upgrade" type="text" id="act_start_upgrade" size="10" maxlength="11" tabindex="1" onBlur="cal_prs_date1(this)" value="<?php echo(trim($_POST['act_start_upgrade']));?>" />
        <a href="javascript:act_start_upgrade.popup();" tabindex="1" ><img src="../../common/date_component/img/cal.gif" width="16" height="16" border="0" alt="Click here to pick up the date"></a>&nbsp; 
      </td>
            <td height="20" align="right"> Date actual complete Upgrade : </td>
      <td height="20" >
        <input name="act_end_upgrade" type="text" id="act_end_upgrade" size="10" maxlength="11" tabindex="1" onBlur="cal_prs_date1(this)" value="<?php echo(trim($_POST['act_end_upgrade']));?>" /> 
        <a href="javascript:act_end_upgrade.popup();" tabindex="1" ><img src="../../common/date_component/img/cal.gif" width="16" height="16" border="0" alt="Click here to pick up the date"></a>&nbsp; 
      </td>
    </tr>       

    <tr> 
      <td height="20" align="right">Date est. start Repair : </td>
      <td height="20" >
        <input name="est_start_repair" type="text" id="est_start_repair" size="10" maxlength="11" tabindex="1" onBlur="cal_prs_date1(this)" value="<?php echo(trim($_POST['est_start_repair']));?>" />
        <a href="javascript:est_start_repair.popup();" tabindex="1" ><img src="../../common/date_component/img/cal.gif" width="16" height="16" border="0" alt="Click here to pick up the date"></a>&nbsp; 
      </td>
          <td height="20" align="right"> Date est. end Repair : </td>
      <td height="20" >
        <input name="est_end_repair" type="text" id="est_end_repair" size="10" maxlength="11" tabindex="1" onBlur="cal_prs_date1(this)" value="<?php echo(trim($_POST['est_end_repair']));?>" /> 
        <a href="javascript:est_end_repair.popup();" tabindex="1" ><img src="../../common/date_component/img/cal.gif" width="16" height="16" border="0" alt="Click here to pick up the date"></a>&nbsp; 
      </td>
    </tr>

    <tr> 
      <td height="20" align="right">Date actual start Repair : </td>
      <td height="20" >
        <input name="act_start_repair" type="text" id="act_start_repair" size="10" maxlength="11" tabindex="1" onBlur="cal_prs_date1(this)" value="<?php echo(trim($_POST['act_start_repair']));?>" />
        <a href="javascript:act_start_repair.popup();" tabindex="1" ><img src="../../common/date_component/img/cal.gif" width="16" height="16" border="0" alt="Click here to pick up the date"></a>&nbsp; 
      </td>
          <td height="20" align="right"> Date actual complete Repair : </td>
      <td height="20" >
        <input name="act_end_repair" type="text" id="act_end_repair" size="10" maxlength="11" tabindex="1" onBlur="cal_prs_date1(this)" value="<?php echo(trim($_POST['act_end_repair']));?>" /> 
        <a href="javascript:act_end_repair.popup();" tabindex="1" ><img src="../../common/date_component/img/cal.gif" width="16" height="16" border="0" alt="Click here to pick up the date"></a>&nbsp; 
      </td>
    </tr>    

    <tr> 
      <td height="20" align="right">Upgrading info : </td>
      <td height="20" >
        <input name="upgrading_info" type="text" id="upgrading_info" value="<?php echo(trim($_POST['upgrading_info']));?>" /> &nbsp; 
      </td>
          <td height="20" align="right">Repair info :</td>
      <td height="20" >
        <input name="repair_info" type="text" id="repair_info"   value="<?php echo(trim($_POST['repair_info']));?>" /> &nbsp; 
      </td>
    </tr>  

    <tr> 
      <td height="20" align="right"> Upgrading Builder : </td>
      <td height="20" >
              <div id="upgrading_builderdiv" style="display:inline">
                <select name="upgrading_builder" id="upgrading_builder"  >
              <option value="">Please Select</option>
              </select></div>
         &nbsp;
      </td>
          <td height="20" align="right">Upgrading shipyard :</td>
      <td height="20" >
          <div id="upgrading_yarddiv" style="display:inline">
              <select name="upgrading_yard" id="upgrading_yard" >
                <option value="">Please Select</option>
              </select>
             </div>
             &nbsp;          
      </td>
    </tr>  

    <tr> 
      <td height="20" align="right"> Repair Builder : </td>
      <td height="20" >
              <div id="repair_builderdiv" style="display:inline">
                <select name="repair_builder" id="repair_builder"  >
              <option value="">Please Select</option>
              </select></div>
         &nbsp;
      </td>
          <td height="20" align="right">Repair shipyard :</td>
      <td height="20" >
          <div id="repair_yarddiv" style="display:inline">
              <select name="repair_yard" id="repair_yard" >
                <option value="">Please Select</option>
              </select>
             </div>
             &nbsp;          
      </td>
    </tr>         
      </table> 
```

现在我想在提交表单时检查一些验证后将此子部分中的所有字段都留空。

一种是我通过字段名称或ID将字段逐个空白，但是这样做并不好，我正在寻找可以完成这项工作的更少代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:28:48.873

如果要从 TD 中删除文本，可以使用 jquery`empty()`

```
$('#tableID td').empty(); // will remove the text
$('#tableID td').hide(); // will hide the text 
```

编辑：如果您指的是输入字段 -

```
$('#tableID input[type="text"]').val(""); //will remove values from all input fields 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:32:06.827

如果您提供表格 ID。怨恨你的领域，你可以试试

```
$('#tableID input[type=text]').val("");
$('#tableID input[type=password]').val("");
$('#tableID input[type=checkbox]').attr("checked", false);
$('#tableID input[type=radio]').attr("checked", false); 
```

如果你有选择列表，第一个选项，比如值为 0 的选择。那么你可以做

```
$('#tableID select').val("0"); 
```

或者

```
$('#tableID select').val(('#tableID select option:eq(0)').attr("value")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:30:44.543

```
$('#yourTable input[type="text"]').val(""); 
```

也就是说，选择表中的所有文本输入并将其值设置为空字符串。要包含选择元素，假设您的选择元素的默认值为空字符串，如问题中的代码所示：

```
$('#yourTable').find('select,input[type="text"]').val(""); 
```

# delphi - 使用 Delphi 的 oData 服务

> ID：11721549
> 
> 赞同：10
> 
> 时间：2012-07-30T12:26:10.047
> 
> 标签：delphi, odata, delphi-xe

如何使用 Delphi 的 oData Web 服务（我正在尝试与新的 Bing Search Azure API 交互）？在 Delphi 中几乎没有信息可以做到这一点。[这里](https://stackoverflow.com/questions/8764903/using-delphi-to-consume-odata-service-recommendations)有一篇文章，但从 Delphi 的角度解释如何使用此类服务​​并没有多大帮助。谁能提供一个简单的例子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T14:40:47.333

下面是一个非常简单的示例，使用 netflix oData 服务在 Delphi XE 中使用 oData 服务：

```
program oDataDemo;

{$APPTYPE CONSOLE}

uses
  SysUtils, msxml, Variants, Activex;

var
  httpRequest: IXMLHttpRequest;
  oDataServiceURI: String;
  oDataFilter: String;
  xmlResults: String;
begin
  try
    oDataServiceURI := 'http://odata.netflix.com/v2/Catalog/Titles()';
    oDataFilter := '?$top=10';
    coinitialize(nil);
    httpRequest := CoXMLHTTP.Create;
    httpRequest.open('GET', UTF8Encode(oDataServiceURI + oDataFilter), false, EmptyParam, EmptyParam);
    httpRequest.send(EmptyParam);
    xmlResults := httpRequest.responseText;
    WriteLn(xmlResults);

  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

# spring-mvc - Spring MVC：在选择下拉列表中显示正确的值

> ID：11721552
> 
> 赞同：0
> 
> 时间：2012-07-30T12:26:18.087
> 
> 标签：spring-mvc

我的 JSP 片段如下：

```
<form:select path="rules[${counter.index}].assignedTo.assignedToName">
    <form:options items="${assignmentRulesForm.assignedToList}"
                  itemLabel="assignedToName"
                  itemValue="assignedToName"/>
</form:select> 
```

assignTo 属性引用此对象：

```
public class AssignmentDTO {
    private String assignedToName;
    // No other members 
```

然后assignToList 是一个`List<AssignmentDTO>`

真的，我想要发生的是下拉列表包含assignedToList中的所有条目，但要选择与`rule[i].assignedto.assignedToName`

目前，我看到的是它不执行选择部分，而是显示下拉菜单中的第一项。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:04:46.063

这应该对你有用，路径不是，`name`而是`assignedTo`：

```
<form:select path="rules[${counter.index}].assignedTo">
    <form:options items="${assignmentRulesForm.assignedToList}"
                  itemLabel="assignedToName"
                  itemValue="assignedToName"/>
</form:select> 
```

如果您已经`.equals`为您的分配对象实现了一个，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:32:06.560

```
<html>
    <head>
        <script>
            function show() {
                var op= window.document.getElementById('select');
                var selItem= op.options[op.selectedIndex].value;
                if(selItem=="Others") {
                    document.getElementById('text').style.visibility = 'visible';
                }
                else {
                    document.getElementById('text').style.visibility = 'hidden';
                }
            }
        </script>
    </head>
    <select id="select" onchange="show();">
        <option value="A">A</option>
        <option value="B">B</option>
        <option value="C">C</option>
        <option value="D">D</option>
        <option value="E">E</option>
        <option value="Others">Others</option>
    </select>
    <br>
    <input type="text" id="text" style="visibility:hidden">
</html> 
```

# cuda - 为什么 cuCtxCreate 返回旧上下文？

> ID：11721556
> 
> 赞同：1
> 
> 时间：2012-07-30T12:26:27.010
> 
> 标签：cuda, cuda-context

我已经安装了：CUDA sdk 4.2 64、CUDA toolkit 4.2 64、CUDA devdriver 4.2 64、

我检查了 \windows 中的每个 nvcuda.dll - 它们都是 4.2 版本，但是当我使用驱动程序 api 创建上下文并使用 cuCtxGetApiVersion 检查它的版本时 - 它显示“3010”

我并不真正关心那个版本，但是当我尝试在该上下文中使用运行时 api 时（需要混合它们） - 它显示错误 49（cudaErrorIncompatibleDriverContext）

任何想法，发生了什么以及如何使其协同工作？

似乎这不是 Windows 的问题 - 在 linux 下运行相同的项目会导致相同的 3010 API 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:23:58.490

我解决了这个问题 - 我在执行期间直接导出“cuCtxCreate”函数（它是其他语言 - 没有 cuda.h）。在查看原始 cuda.hi 后发现它为该函数定义了其他名称，基于某种 smartass 定义。新函数“cuCtxCreate_v2”创建了一个很好的上下文。

/掌脸

# html - JSF 2如何根据浏览器版本设置html样式

> ID：11721560
> 
> 赞同：1
> 
> 时间：2012-07-30T12:26:30.020
> 
> 标签：html, jsf, jsf-2, conditional-comments, omnifaces

我想要在我的 JSF 2 应用程序中做的是根据浏览器版本设置正确的 html 样式，这里是示例代码：

```
<!--[if lt IE 7]> <html class="lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <!--<![endif]--> 
```

如何在 JSF 2 中做到这一点？最好/最简单的方法是什么？

我在 Omnifaces ( `o:conditionalComment`) 中发现了一些有趣的东西，但它只允许有条件地加载整个 css，这对我来说没用......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T13:05:53.317

*仅*[`<o:conditionalComment>`](http://showcase.omnifaces.org/components/conditionalComment)适用于 CSS 文件是不正确的。这是一种误解。从技术上讲，使用纯 Facelets 标记/组件根本无法满足您的要求，因为这会导致 XML 语法格式错误，从而导致 Facelets 编译错误。

 *```
<o:conditionalComment if="lt IE 7">
    <html lang="en" class="lt-ie9 lt-ie8 lt-ie7">
</o:conditionalComment>
<o:conditionalComment if="IE 7">
    <html lang="en" class="lt-ie9 lt-ie8">
</o:conditionalComment>
<o:conditionalComment if="IE 8">
    <html lang="en" class="lt-ie9">
</o:conditionalComment>
<o:conditionalComment if="gt IE 8">
    <h:outputText value="&lt;!--&gt;" escape="false" />
    <html lang="en" class="no-js">
    <h:outputText value="&lt;!--" escape="false" />
</o:conditionalComment>
...
</html> 
```

这**不是** [格式良好](http://en.wikipedia.org/wiki/XML#Well-formedness_and_error-handling)的XML。您知道，XML 结束元素应该​​与 XML 开始元素在同一范围内。如果每个XML 元素在同一个父 XML 元素中`<html>`都有自己的，那么它将是有效的 XML 。`</html>`但这又不是有效的 HTML。

只需`<h:outputText escape="false">`在所有`<html>`标签上使用。不要忘记对结束`</html>`标签做同样的事情。

```
<o:conditionalComment if="lt IE 7">
    <h:outputText value="&lt;html lang=&quot;en&quot; class=&quot;lt-ie9 lt-ie8 lt-ie7&quot;&gt;" escape="false" />
</o:conditionalComment>
<o:conditionalComment if="IE 7">
    <h:outputText value="&lt;html lang=&quot;en&quot; class=&quot;lt-ie9 lt-ie8&quot;&gt;" escape="false" />
</o:conditionalComment>
<o:conditionalComment if="IE 8">
    <h:outputText value="&lt;html lang=&quot;en&quot; class=&quot;lt-ie9&quot;&gt;" escape="false" />
</o:conditionalComment>
<o:conditionalComment if="gt IE 8">
    <h:outputText value="&lt;!--&gt;&lt;html lang=&quot;en&quot; class=&quot;no-js&quot;&gt;&lt;!--" escape="false" />
</o:conditionalComment>
...
<h:outputText value="&lt;/html&gt;" escape="false" /> 
```

很尴尬，但[HTML5 样板](http://html5boilerplate.com/)（这种方法的起源）本身也很尴尬，IMO。

或者，您可以考虑`<my:html>`自己创建一个自定义组件，该组件会生成所需的标记，这样您就可以满足`<my:html>...</my:html>`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T14:19:33.287

您可以使用相同的类制作 3 个 CSS（每个浏览器一个）。您的 HTML 代码会更简单。

在标题中，您可以像这样使用特定的浏览器 css：

```
<h:outputStylesheet library="css" name="ie_7.css" rendered="#{header['User-Agent'].contains('; MSIE 7')}" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T12:57:38.537

您不应有条件地声明`<html>`元素。

如果使用 Chrome 或 Firefox 的人想要访问您的网站怎么办？

公认的做法是创建 IE 版本特定`.css`文件并使用 IE 宏有条件地加载这些文件。

例如

```
<link href="global_styles.css" rel="stylesheet" type="text/css"/>
<!--[if IE 7]-->
<link href="IE7_styles.css" rel="stylesheet" type="text/css"/>
<![endif]-->
<!--[if lte IE 6]-->
<link href="IE6_styles.css" rel="stylesheet" type="text/css"/>
<![endif]--> 
```

在 IE6_styles.css 中，您可能会向`html`类添加一些特定属性，并且可能会`* html`hack。这种方法的美妙之处在于它可以在旧的 IE 浏览器中运行，但不会破坏现代浏览器。

顺便说一句，这个例子来自 David McFarland 的“CSS: the missing manual”。*

# objective-c - 如何为手动创建的对象添加手势识别器？

> ID：11721563
> 
> 赞同：0
> 
> 时间：2012-07-30T12:26:39.717
> 
> 标签：objective-c, ios, ipad

我已经手动创建了一个对象（文件 -> 新建 -> NewClass -> UITableViewCell）并将 .xib 添加到其中。创建的单元格有几个标签，见图![创建单元格](../Images/a4416bada425c0a01833ea0618574876.png)

之后我在其他类中使用这个对象

```
myCell * showHere;
NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"myCell" owner:self options:nil];
showHere = [nib objectAtIndex:0]; 
```

如何在此单元格上为 UIlabel 添加gestureRecognizer？

我试过这个：

```
UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] 
                                           initWithTarget:self 
                                           action:@selector(handleLongPress:)];
longPress.minimumPressDuration = 1.0;
[showHere.monday addGestureRecognizer:longPress]; 
```

还有这个

```
 -(void)handleLongPress:(UILongPressGestureRecognizer*)recognizer {
NSLog(@"label has pressed"); 
```

}

我需要按单个标签来捕捉动作。是否可以？对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:43:08.570

`YourLabel.userinteractionEnabled = YES`之后添加

`UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPress:)]; longPress.minimumPressDuration = 1.0;`

启用对标签的触摸

祝你好运

# linux - bash : cronjob 中的 $_ 为空

> ID：11721565
> 
> 赞同：2
> 
> 时间：2012-07-30T12:27:03.323
> 
> 标签：linux, bash, shell, cron, crontab

```
cd some_dir && php some_crone.php || echo "$? $_" | xargs ./some_handler.php 
```

所以当我从控制台运行这段代码时，我得到了正确的 $? 和 $_

美元？- 退出状态 $_ - 将最后一个参数提供给前一个命令。在 shell 启动时，它给出正在执行的 shell 脚本的绝对文件名。

但是当我把这段代码放到 cronjob 中时：

```
crontab -e
*/1 * * * * cd some_dir && php some_crone.php || echo "$? $_" | xargs ./some_handler.php 
```

我得到了一个空的$_​​。请帮忙。我不明白有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:02:49.643

通过将以下行添加到您的 crontab 中，将 crontab 的默认 shell 从 /bin/sh 更改为 /bin/bash。

```
SHELL=/bin/bash 
```

# javascript - 如何在轨道上使用 gRaphael

> ID：11721573
> 
> 赞同：1
> 
> 时间：2012-07-30T12:27:29.083
> 
> 标签：javascript, ruby-on-rails, charts, pie-chart, graphael

作为 Rails 的新手，我正在尝试找到一个很好的开放式图表库来使用 rails。

通过一些研究，我发现了 gRaphael，如果我可以在我的 rails 应用程序中使用它，它似乎对我有用。了解如何使用它，因为我无法引用它的文件，并且必须将它们复制/粘贴到我的本地资产目录。

我遵循了这些指南，并将 raphael-min.js、g.raphael.js 和 g.pie.js 放在了我的 assets/javascripts 文件夹中，以及在 stylesheets 文件夹中的 demo.css 文件，以及一些背景图片.

我添加到 application.html.erb

```
<%= javascript_include_tag "raphael-min.js","g.raphael.js","g.pie.js", "application" %> 
```

在我看来：

```
...
<div id="holder"></div>
...
<%= javascript_tag "

            var r = Raphael(""holder"");
        r.piechart(320, 240, 150, [55, 20, 13, 32, 5, 1, 2, 10]);
            r.text(320, 70, 'Static Pie Chart').attr({ font: '20px ""Fontin Sans"", Fontin-Sans, sans-serif' });

       " %>
</body> 
```

问题是由于某种原因，饼图函数没有被内置到 Raphael DOM 对象中......

我可能做错了什么？我花了一整天的时间寻找这个问题的答案，并希望在这里得到任何帮助。

这是加载到我的 html 文件的脚本

```
<script type="text/javascript" src="/assets/raphael-min.js?body=1">
<script type="text/javascript" src="/assets/g.raphael.js?body=1">
<script type="text/javascript" src="/assets/g.pie.js?body=1">
<script type="text/javascript" src="/assets/jquery.js?body=1">
<script type="text/javascript" src="/assets/jquery_ujs.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-transition.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-alert.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-button.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-carousel.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-collapse.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-dropdown.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-modal.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-scrollspy.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-tab.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-tooltip.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-popover.js?body=1">
<script type="text/javascript" src="/assets/bootstrap-typeahead.js?body=1">
<script type="text/javascript" src="/assets/bootstrap.js?body=1">
<script type="text/javascript" src="/assets/g.pie.js?body=1">
<script type="text/javascript" src="/assets/g.raphael.js?body=1">
<script type="text/javascript" src="/assets/jquery-ui.min.js?body=1">
<script type="text/javascript" src="/assets/raphael-min.js?body=1">
<script type="text/javascript" src="/assets/retailers.js?body=1">
<script type="text/javascript" src="/assets/application.js?body=1"> 
```

和我的 application.js 文件内容：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require_tree . 
```

请注意，raphael 的 js 文件被加载了两次，我将它们包含在 application.html.erb 文件中的唯一原因是，如果我不这样做，那么 raphael-min.js 会在 g.raphael.js 和 g 之后加载。 pie.js 依赖它，我得到 javascript 错误......

对此有何建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:41:46.510

我不了解graphael，但我会使用Google API。我在这里找到了一个似乎得到维护的 ruby​​ 包装器：

[https://github.com/mattetti/googlecharts](https://github.com/mattetti/googlecharts)

用法 ：

我建议在某处创建一个变量：

```
@graph_url = Gchart.bar( :data => [[1,2,4,67,100,41,234],[45,23,67,12,67,300, 250]], :title => 'SD Ruby Fu level', :legend => ['matt','patrick'], :bg => {:color => '76A4FB', :type => 'gradient'}, :bar_colors => 'ff0000,00ff00') 
```

然后在视图中：

```
<%= image_tag @graph_url, :width=>500, :height=>300 %> 
```

这样看起来更干净:)

# css - css在身体上应用宽度

> ID：11721574
> 
> 赞同：3
> 
> 时间：2012-07-30T12:27:34.377
> 
> 标签：css

我对html和css完全陌生，所以我的问题可能非常基本，但希望你们能帮助我udnerstnad，

我正在使用以下 CSS 代码

```
 body
    {
        background-color:Olive;
        width:550px;           
        font-family:Verdana;
    } 
```

我将宽度设置为 550 像素，因此我的所有段落都收缩为 550 像素，但背景应用于整个页面，甚至超过 550 像素

我知道由于继承，子元素会从 body 继承 width 属性，但我在想如果我将 body 的 width 属性设置为 550px，那么背景应该在 550px 宽的区域而不是整个页面中可见，

我不明白这里的逻辑..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:37:33.530

例如，如果您对 html 应用颜色`html { background-color: yellow; }`，您会发现根本不是这种情况。该`<body>`标记的特殊之处在于它旨在包含 HTML 页面的全部内容。那么，当您应用背景时，默认情况下它会绘制整个背景页面，除非`html`另外设置了背景。

请参阅此[jsfiddle](http://jsfiddle.net/JgZcK/)示例。像上面的其他海报一样，我强烈建议使用`<div>`元素来包装、调整大小和着色您的内容。

这在[CSS2 规范](http://www.w3.org/TR/CSS2/colors.html)中是这样描述的：

> 根元素的背景成为画布的背景并覆盖整个画布，锚定在同一点（对于“背景位置”），就像它仅为根元素本身绘制时一样。根元素不会再次绘制此背景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:30:40.020

为什么不将您的内容包装在一个 div 中，并将属性设置为那个？

```
<body>
<div class="content">
 ... content here
</div>
</body> 
```

并将相同的类应用于 div

```
.content
    {
        background-color:Olive;
        width:550px;           
        font-family:Verdana;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:30:45.053

您可以使用一个容器`div`来包装整个页面并充当“假货” `body`。然后，如果您将这些样式应用于此，`div`您的问题将得到解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T12:31:03.807

**css**

```
#wrapper {
    width: 550px;
    margin: 0 auto;
    text-align: left;
} 
```

**HTML：**

```
<body>
    <div id="wrapper">
        Piece of text inside a 550px width div centered on the page
    </div>
</body> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T12:36:27.703

你应该试试这个[http://jsfiddle.net/ajaypatel_aj/8tfKc/](http://jsfiddle.net/ajaypatel_aj/8tfKc/) HTML

```
<div id="wrapper">Test me!</div>​ 
```

CSS

```
*{  
   margin:0;  
   padding:0;  
}  

body{  
   text-align:center; /*For IE6 Shenanigans*/  
    font-family:Verdana;
}  

#wrapper{  
   width:550px;  
   margin:0 auto;  
   text-align:left;  
    background-color:Olive;
} 
​ 
```

答案很简单，应用正文颜色将设置为整个页面，您必须使用 div 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T12:44:41.423

这就是你要找的。

```
<html>
    <head>
        <title>
            Your title goes here.
        </title>
    </head>
<style type="text/css">
#test
{
    background-color:Olive;
    width:550px;           
    font-family:Verdana;
}
</style>
<body>
    <div id='test'>
    Hello
    </div>
</body> 
```

另一个答案是：

```
<html>
<head>
    <title>
        Your title goes here.
    </title>
</head>
<style type="text/css">
    html
    {
        background-color:white;
    }
    body
    {
        background-color:Olive;
        width:550px;
        font-family:Verdana;
    }
</style>
<body>
    Hello
</body>
</html> 
```

# google-cloud-datastore - 存储具有相同@Id 值但具有唯一父值的对象？

> ID：11721576
> 
> 赞同：0
> 
> 时间：2012-07-30T12:27:36.150
> 
> 标签：google-cloud-datastore, objectify

使用 objectify 和 GAE 在数据存储中存储两个对象是否合法，这些对象对于标记为 @Id 的字段具有相同的值但对于 @Parent 字段具有唯一值？

例如

```
项目1 {
    @Id 长（值 123）
    @Parent 键（值 XYZ）
}

项目2 {
    @Id 长（值 123）
    @Parent 键（值 ABC）
}

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:25:32.887

是的。从概念上讲，它有助于颠倒@Parent 和@Id 字段的顺序，以便@Parent 字段位于第一位；id 仅对于给定的种类和父级是唯一的。

# java - 在 JTabbedPane 中禁用的选项卡上的单击事件

> ID：11721579
> 
> 赞同：2
> 
> 时间：2012-07-30T12:27:41.683
> 
> 标签：java, swing, tabs

我有 JTabbedPane，里面有 5 个标签。位置 2,3 和 5 的选项卡被禁用。我想在单击此禁用选项卡时显示一个 JDialog。我尝试添加鼠标侦听器并更改侦听器，但对我没有任何帮助。使用鼠标单击方法，我可以单击该选项卡，但无法确定单击了哪个选项卡。如何在 JTabbedPane 中禁用的选项卡上获取单击事件？

这是我尝试过的：

```
import java.awt.BorderLayout;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.lang.reflect.InvocationTargetException;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;
import javax.swing.SwingUtilities;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class Test {
    public static void main(String[] args) throws InterruptedException, InvocationTargetException {
        SwingUtilities.invokeAndWait(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame("Test tab pane click");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                JTabbedPane tabbedPane = new JTabbedPane();
                JPanel panel1 = new JPanel();
                panel1.add(new JLabel("HI1"));
                tabbedPane.addTab("Tab 1", panel1);
                JPanel panel2 = new JPanel();
                panel2.add(new JLabel("HI2"));
                tabbedPane.addTab("Tab 2", panel2);
                JPanel panel3 = new JPanel();
                panel3.add(new JLabel("HI3"));
                tabbedPane.addTab("Tab 3", panel3);
                JPanel panel4 = new JPanel();
                panel4.add(new JLabel("HI4"));
                tabbedPane.addTab("Tab 4", panel4);
                JPanel panel5 = new JPanel();
                panel3.add(new JLabel("HI5"));
                tabbedPane.addTab("Tab 5", panel5);
                frame.setLayout(new BorderLayout());
                frame.add(tabbedPane, BorderLayout.CENTER);
                frame.setSize(500, 200);
                frame.setVisible(true);

                // disable 2nd, 3rd and 5th tab.
                tabbedPane.setEnabledAt(1, false);
                tabbedPane.setEnabledAt(2, false);
                tabbedPane.setEnabledAt(4, false);

                tabbedPane.addChangeListener(new ChangeListener() {
                    @Override
                    public void stateChanged(ChangeEvent e) {
                        System.out.println("I'm not called for disabled tabs.");
                    }
                });
                tabbedPane.addMouseListener(new MouseAdapter() {
                    @Override
                    public void mouseClicked(MouseEvent e) {
                        System.out.println("I'm called for disabled tabs, but not able to know which tab is clicked.");
                    }
                });
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T12:37:05.127

`With mouse click method I can get that tab is clicked but not able to identify particular which tab is clicked.`

您可以使用`JTabbedPane`'`indexAtLocation(int, int)`方法（`MouseEvent`has`getX()`和`getY()`），它告诉您包含给定位置的选项卡的索引。

# dll - 从 DLL 中的 TObject 派生时访问冲突

> ID：11721587
> 
> 赞同：0
> 
> 时间：2012-07-30T12:28:24.530
> 
> 标签：dll, c++builder

看到 C++ Builder XE2 中的以下最小示例导致访问冲突，我感到非常困惑：

**在由可执行文件**和**DLL**组成的项目中：

**Project1.dll / Dummy.h：**

```
class __declspec(dllexport) Dummy : public TObject
{
public:
    __fastcall Dummy();
    __fastcall ~Dummy();
}; 
```

**Project1.dll / Dummy.cpp：**

```
__fastcall Dummy::Dummy()
: TObject()
{
}

__fastcall Dummy::~Dummy()
{
} 
```

**Project2.exe / Unit1.cpp：**

```
__fastcall TForm1::TForm1(TComponent* Owner)
    : TForm(Owner)
{
    Dummy *d = new Dummy; // access violation occurs in constructor
    delete d;
} 
```

这两个项目都是使用默认项目选项从头开始创建的，都支持 VCL。`Dummy`如果不继承自 ，则不会发生访问冲突`TObject`。

我究竟做错了什么？

干杯亨德里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:05:44.050

如果您`__declspec(dllexport)`用`PACKAGE`.

我已经在各种项目配置中对此进行了测试，它似乎有所作为——不再崩溃。但是，我无法再延迟加载 DLL。

在我看来像一个 C++ Builder 错误。

# machine-learning - 使用概率标记数据进行学习的理论

> ID：11721601
> 
> 赞同：0
> 
> 时间：2012-07-30T12:29:13.590
> 
> 标签：machine-learning

有没有关于使用**模糊/概率标记**数据的理论？例如，是否可以对仅估计不同训练数据组为真的概率的训练数据进行分类？

例子：

*   训练数据点**a1,a2**：90% 正确
*   训练数据点**b2,b2** : 50% true
*   训练数据点**c1,c2**：30% 正确

你想知道一个新的数据点**d**是真还是假（或者可能是什么概率）？基于与训练数据**ac**的一些相似性度量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:41:00.477

听起来像经典的贝叶斯问题，不是吗？

就像给出的鱼是 90% 鲈鱼和 50% 三文鱼的概率一样，没有任何额外的信息？

这将导致任何学习算法对 A 类进行分类以最小化任何样本的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-29T23:48:48.517

例如聚类（GMM 或示例）中的部分成员资格，其中每个数据点在每个类中的放置概率上都有一个狄利克雷分布。

或者也许“使用标签噪声学习”中的某些内容可以给你一个答案，大多数学习者在理论上期待干净标记的数据，但是使用噪声标签背后有一些理论： [Learning_with_Label_Noise](http://www.journals.elsevier.com/neurocomputing/call-for-papers/special-issue-on-advances-in-learning-with-label-noise/)

# 编辑

不确定的证据或软证据。

对于模型 p(x, y)，我们有 y' 是关于 y 的软证据，然后计算 p(x|y')

p(x|y') = sum_y p(x, y|y') = sum_y p(x|y, y')p(y|y') = sum_y p(x|y)p(y|y' )

其中确凿证据是一种特殊情况，其中 p(y|y') = dirac(yy')

# iphone - 在 iphone sdk 中淡入 UIImage 的一部分

> ID：11721604
> 
> 赞同：1
> 
> 时间：2012-07-30T12:29:23.437
> 
> 标签：iphone, xcode, uiimage

我的应用程序主要基于图像处理。

在我的应用程序中，我想淡化 UIImage 圆形区域的一部分。圆圈可以在图像上的任何位置拖动。

请告诉我是否可以淡化图像的一部分。如果是的话，任何人都可以给出一些想法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:30:08.793

如果你想以简单的方式做到这一点。将 2`UIImageView`秒放在彼此之上。并在上视图中添加一个（圆形）掩码：[https ://stackoverflow.com/a/7228648/696440](https://stackoverflow.com/a/7228648/696440)

# ruby - 如何让我的 Xpath 查询将其内容循环到新单元格中

> ID：11721606
> 
> 赞同：2
> 
> 时间：2012-07-30T12:29:36.830
> 
> 标签：ruby, xpath, nokogiri

我正在尝试让我的 Xpath 查询输出到新的单元格行，但我没有成功。我正在尝试将我的输出逐行放入列 A 中，而不是行 1 列 A、B、C

我的完整代码在[https://gist.github.com/3205801](https://gist.github.com/3205801)

最好为此使用 Axslx 还是 CSV 是标准？

```
#Set encoding options to remove nasty Trademark symbols
  encoding_options = {
    :invalid           => :replace,  # Replace invalid byte sequences
    :undef             => :replace,  # Replace anything not defined in ASCII
    :replace           => '',        # Use a blank for those replacements
    :universal_newline => true       # Always break lines with \n
  }

doc = Nokogiri::HTML(open("http://h10010.www1.hp.com/wwpc/ie/en/ho/WF06b/321957-321957-3329742-89318-89318-5186820-5231694.html?dnr=1"))
#For each break create a ;
doc.css('br').each{ |br| br.replace ';' }

clues = Array.new
clues << 'Operating system'
clues << 'Processors'

CSV.open("output.csv", "wb") do |csv|
  #1\. Output the Clues header
  #2\. Scrape the output/force encoding to remove special characters
    csv << clues
    csv << clues.map{|clue| doc.at("//td[text()='#{clue}']/following-sibling::td").text.strip.encode Encoding.find('ASCII'), encoding_options}
  #end loop
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:04:42.430

我不确定我是否理解这个问题，但我认为您想要这样的数据：

```
header1,value1
header2,value2
header3,value3 
```

而不是：

```
header1,header2,header3
value1,value2,value3 
```

如果这是真的，你可以这样做：

```
CSV.open("output.csv", "wb") do |csv|
  clues.each do |one_clue|
    csv << one_clue
    xpath = "//td[text()='#{one_clue}']/following-sibling::td"
    csv << doc.at(xpath).text.strip.encode Encoding.find('ASCII'), encoding_options
  end
end 
```

# android - 恢复 Top Activity 而不是启动 Launcher Activity

> ID：11721619
> 
> 赞同：40
> 
> 时间：2012-07-30T12:30:16.080
> 
> 标签：android, android-intent, android-manifest, android-activity

我的应用程序中有两个活动，一个是启动器，另一个是作为第一个的显式调用启动的。

在这里我的问题是，当我通过从第二个活动按主页键返回主屏幕并启动应用程序时，即使第二个活动已经在后台，第一个活动也会再次启动。

编写第一个 Activity 是为了下载应用程序工作所需的资产，一旦下载了资产，它就会触发第二个 Activity 并为 self 调用完成。

以下是我的应用程序清单。

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="14" />

<application android:icon="@drawable/icon" android:label="@string/app_name" android:theme="@android:style/Theme.NoTitleBar.Fullscreen">

    <! Download the Required Assets if not found on SD Card -->
    <activity android:name=".ContentDownload"
        android:screenOrientation="landscape"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize|locale" 
        android:launchMode="singleTask"
        android:alwaysRetainTaskState="true">

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>

    </activity>

    <activity android:name=".ActualAppActivity" 
        android:screenOrientation="landscape" 
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize|locale" 
        android:launchMode="singleTask"
        android:alwaysRetainTaskState="true"
        />

<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>  

<supports-screens android:smallScreens="false" android:normalScreens="true" android:largeScreens="true" android:anyDensity="true"/> 
```

如果调用启动器并且它在后台，有人可以指导我如何使第二个活动直接获得控制权而不是再次通过第一个活动。

下面是我的 onResult 回调方法。

```
public void onResult(String assetPath, int result)
{
    if(result == RESULT_OK)
    {
        startActivity(new Intent(this, ActualAppActivity.class));
        activity.destroyDownloadActvity();
        finish();
    }
    else
    {
        finish();
        java.lang.System.exit(0);
    }
    activity.destroyDownloadActvity();
    activity = null;
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-01-09T14:25:30.900

尝试在清单中指定为 Launcher Activity 的活动的 onCreate 方法中使用以下代码，即问题中发布的原始代码中的 ContentDownload 活动：

```
if ((getIntent().getFlags() & Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT) != 0) {
  finish();
  return;
} 
```

这将通过检测到已经有一个任务正在运行来完成您的 Launcher Activity，然后您的应用程序应该恢复到最后一个可见的 Activity。

请参阅 Android 文档中有关 Android 清单启动模式的此页面：http: [//developer.android.com/reference/android/R.styleable.html#AndroidManifestActivity_launchMode](http://developer.android.com/reference/android/R.styleable.html#AndroidManifestActivity_launchMode)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-08-10T16:27:06.497

我在我的应用程序的活动中使用以下代码`LAUNCHER`来防止应用程序在后台仍然存在并且点击图标时再次启动

```
@Override
protected void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (!isTaskRoot()) {
        finish();
        return;
    }

    // Rest of your onCreate stuff goes here
} 
```

这只是完成`LAUNCHER`活动并恢复最后使用的活动。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-07-30T15:02:14.783

您的两个活动都使用`launchMode="singleTask"`. 这是你问题的根源。删除它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-30T12:43:57.650

不要调用finish()。您需要将标志[FLAG_ACTIVITY_CLEAR_TASK](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TASK)和 FLAG_ACTIVITY_NEW_TASK 传递给 Intent。

```
Intent intent = new Intent(this, ActualAppActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK| Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T12:34:30.927

在没有看到您的代码的情况下，我认为您想要这样的答案：

[Android 完成 Activity 并启动另一个](https://stackoverflow.com/questions/7599955/android-finish-activity-and-start-another-one)

您需要设置`intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);`并且还需要`finish()`启动器活动。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-30T12:36:58.637

您可以做的是在持久存储中存储一个字符串，该字符串确定之前是否已加载资产。

然后，在主活动中，您可以检查资产是否已加载，然后启动所需的活动。

```
if(assets_already_downloaded)
  second_activity();
else
  download_asset_activity(); 
```

# iphone - 延迟加载 - UITableview 可见单元格不显示图像

> ID：11721620
> 
> 赞同：0
> 
> 时间：2012-07-30T12:30:17.267
> 
> 标签：iphone, uitableview, lazy-loading

我已经使用苹果的延迟加载示例在 uitableview 中实现了图像的延迟加载。除一部分外，一切正常。最初，当我启动应用程序时，表格的可见单元格不会加载任何图像。但是当我滚动表格时，图像正在为剩余的单元格加载并被保留。但最初的可见单元格保持空白。

有人有类似的问题吗？

谁能指导我解决这个问题？

```
static NSString *EditCellIdentifier = @"EditCell";
UITableViewCell *cell = (UITableViewCell *) [tableView dequeueReusableCellWithIdentifier:EditCellIdentifier]; 
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:EditCellIdentifier];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
 }
for (UIView *view in cell.contentView.subviews){
    [view removeFromSuperview];
}   
    if ([listItems count]>0)       
    {    
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    ListItem * item = [listItems objectAtIndex:indexPath.row];
    UIImageView *imageFrame = [[UIImageView alloc] initWithFrame:CGRectMake(5,5,60,60)];
    [imageFrame setImage:[UIImage imageNamed:@"box.png"]];
    UIImageView * imageView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 10, 50, 50)];
      otherPath=indexPath;
        if (!item.appIcon)
        {
            if (self.tableView.dragging == NO && self.tableView.decelerating == NO)
            {
                NSLog(@"Initial Values %@",item.imageURL); 
                if([item.imageURL length]==0){
                    imageView.image=[UIImage imageNamed:[categoriesImages objectAtIndex:self.configfId - 1]];
                }  
                else
                    [self startIconDownload:item forIndexPath:indexPath];
           }
       }
        else
        {
            imageView.image = item.appIcon;
        }
    [imageView setBackgroundColor:[UIColor blackColor]];       
    NSString * titleStr = [NSString stringWithFormat:@"%@. %@",item.rank,item.title];        
    NSLog(@"titleStr %@",titleStr);    
    CGSize size = [titleStr sizeWithFont:[UIFont fontWithName:@"Helvetica-Bold" size:11] constrainedToSize:CGSizeMake(12, 100) lineBreakMode:UILineBreakModeWordWrap];       
    if (size.height > 50 ) {            
        size = CGSizeMake(size.width,50.0 );            
    }        
    NSInteger height = 14;        
    if(item.title.length > 30){            
        height = 25;            
    }           
    [cell.contentView addSubview:imageView];        
    [cell.contentView addSubview:imageFrame];
}    
return cell;              
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:50:32.763

我无法在您的代码中为您提供帮助，但我建议您使用`SDWebImage`延迟加载。你会在这里找到它[https://github.com/rs/SDWebImage/](https://github.com/rs/SDWebImage/)。并且有一个很棒的教程，标题为**“如何使用它”**。

# java - 如何将 HttpServletRequest 对象传递给测试用例？

> ID：11721622
> 
> 赞同：33
> 
> 时间：2012-07-30T12:30:24.453
> 
> 标签：java, unit-testing, junit

现在我正在编写我班级的测试用例。我想将 HttpServletRequest 对象参数传递给我的测试用例方法以检查该方法是否有效。所以任何人都给我建议。

```
public void testCheckBatchExecutionSchedule() throws Exception
    {
        assertTrue("Batch is Completed :", returnPointsRatingDisputeFrom.checkBatchExecutionSchedule(request));
    } 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-07-31T01:06:02.763

Spring 提供了一个名为[MockHttpServletRequest](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/mock/web/MockHttpServletRequest.html)的类，可用于测试需要 HttpServletRequest 的代码。

```
public void testCheckBatchExecutionSchedule() throws Exception
{
   MockHttpServletRequest request = new MockHttpServletRequest();
   request.addParameter("parameterName", "someValue");
   assertTrue("Batch is Completed :", returnPointsRatingDisputeFrom.checkBatchExecutionSchedule(request));
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-30T12:57:30.450

您应该使用模拟库模拟请求对象，例如[http://code.google.com/p/mockito/](http://code.google.com/p/mockito/)

```
public void testCheckBatchExecutionSchedule() throws Exception
{
   HttpServletRequest mockRequest = mock(HttpServletRequest.class);
   //setup the behaviour here (or do it in setup method or something)
   when(mockRequest.getParameter("parameterName")).thenReturn("someValue");
   assertTrue("Batch is Completed :", returnPointsRatingDisputeFrom.checkBatchExecutionSchedule(mockRequest));
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-30T12:38:58.917

`HttpServletRequest`是一个接口。过去，我只是简单地创建了一个类（例如`TestHttpServletRequest`），其中的每个方法都有一个空的方法体`HttpServletRequest`，除了我实际需要的方法。对于大多数方法，我返回了一个实例变量并为该实例变量包含了一个 setter，以便测试用例可以定义要返回的内容。 `HttpServletRequest`有很多方法，但大多数 IDE（我使用 Eclipse）都可以生成方法存根。

问题`HttpServletRequestWrapper`在于它仍然需要`HttpServletRequest`将另一个传递到其构造函数中，以作为每个方法的默认行为。在 a 中传递`null`结果`NullPointerException`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-13T14:21:36.897

2018 年 2 月更新：[OpenBrace Limited 已关闭](https://closingbraces.net/openbrace/)，不再支持其 ObMimic 产品。

您还可以使用 Servlet API 测试替身的[ObMimic](http://www.openbrace.com)库：

```
import com.openbrace.obmimic.mimic.servlet.http.HttpServletRequestMimic;

public void testCheckBatchExecutionSchedule() throws Exception
{
   HttpServletRequestMimic request = new HttpServletRequestMimic();
   // Configure the request as necessary...
   // e.g. request.getMimicState().getRequestParameters().set("name", "value");
   assertTrue("Batch is Completed :", returnPointsRatingDisputeFrom.checkBatchExecutionSchedule(request));
} 
```

要配置请求，HttpServletRequestMimic 有一个 getMimicState() 方法，该方法返回一个 HttpServletRequestState，通过该方法可以配置请求的所有相关详细信息（您可以通过该方法访问任何关联的 ServletContext、HttpSession 等，并在必要时进行类似的配置）。HttpServletRequestState 的文档包括其属性和方法的[摘要](http://www.openbrace.com/main/docs/src/docs/pages/MimicStateSummary.html#HttpServletRequestState)以及完全详细的[Javadoc](http://www.openbrace.com/main/docs/src/docs/api/com/openbrace/obmimic/state/servlet/http/HttpServletRequestState.html)。

注意：

*   ObMimic 还为 HttpServletResponse、ServletContext、HttpSession、ServletConfig 等提供了类似的“模仿”类。

*   ObMimic 的免费“社区版”可从网站的[下载](http://www.openbrace.com/main/pages/download/download-current.html)页面获得。

*   为此，您需要添加到项目中的唯一库是 ObMimic 的 /lib/obmimic.jar（假设 Servlet API 本身已经存在）。

*   ObMimic网站提供了完整的文档，包括[入门](http://www.openbrace.com/main/docs/src/docs/pages/GettingStartedShort.html)指南、一组带有示例代码的操作指南、详细[的](http://www.openbrace.com)[Javadoc](http://www.openbrace.com/main/docs/src/docs/api/index.html)等[。](http://www.openbrace.com/main/docs/src/docs/pages/howto/index.html)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-30T12:39:10.040

通过使用 tomcat 提供的 API，您可以获得 HttpServletRequest 对象

```
HttpServletRequest request = (HttpServletRequest)org.apache.catalina.core.ApplicationFilterChain.getLastServicedRequest(); 
```

这将获取传递给 servlet 以从当前线程提供服务的最后一个请求。

这项工作仅在 Tomcat 的“Strict Servlet Compliance”模式下工作。要启用它，请添加以下 JVM 参数：

```
org.apache.catalina.STRICT_SERVLET_COMPLIANCE=true 
```

# python - csv writer忽略某些值

> ID：11721623
> 
> 赞同：1
> 
> 时间：2012-07-30T12:30:26.917
> 
> 标签：python, arrays, list, csv

假设我希望内置的 python csv writer 忽略数组中的某些字符串值（在输出中的逗号之间不放置任何值）。例如，

```
my_list = [4, 'foo', 'close', 9, 0]

csv output => 4, ,'close', 9, 0 
```

我会提供一个参数'foo'来指定被作者忽略，这可能吗？如果是这样，有人可以帮助实施吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:39:46.450

如果你有一个二维的行列表要写，你可以这样做：

```
lines = [[4, 'foo', 'close', 9, 0], [5, 'foo', 'close', 9, 0]]

import csv
with open("outfile.csv", "wb") as outf:
    w = csv.writer(outf)
    for line in lines:
        w.writerow(["" if e == "foo" else e for e in line]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:39:28.480

```
>>> import csv
>>> my_list = [4, 'foo', 'close', 9, 0]
>>> with open('test.csv', 'w') as fout:
        w = csv.writer(fout, delimiter=',')
        w.writerow([x if x != 'foo' else ' ' for x in my_list])

>>> print open('test.csv').read()
4, ,close,9,0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:38:10.567

您可以使用类似这样的方法在列表中进行替换：

```
map(lambda x : str(x) if x != 'foo' else ' ', my_list) 
```

并且只需执行 a`join`创建输出字符串：

```
','.join(map(lambda x : str(x) if x != 'foo' else ' ', my_list)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T12:38:46.673

你可以试试这个：

```
ignored_strings = {'foo', 'ignored2', 'ignored3'}

my_list_filtered = [value if value not in ignored_strings else '' for value in my_list] 
```

这会将您要忽略的每个值替换为空字符串。然后，您可以使用 csv 编写器打印出新列表。

您还可以使用列表推导末尾的“if”语句从列表中删除不需要的值，具体取决于您希望输出的外观。

# c# - 从 C# 调用到 COM 时指向数组的指针

> ID：11721625
> 
> 赞同：0
> 
> 时间：2012-07-30T12:30:32.597
> 
> 标签：c#, arrays, pointers, interop

我有一个给定的 COM 函数（用 C++ 编写），它返回一个指向 BYTE* 的指针

**身份证**：

```
HRESULT calculate([in] BSTR request, [out] BYTE* result, [out] LONG* size); 
```

**COM C++ 代码**：

```
STDMETHODIMP Calc::calculate(BSTR request, BYTE* result, LONG* size)
{
//calc
  int c_size = somesize();
  char* c_result = somearray();

//copy to result
  *size = c_size;
  result = new BYTE[c_size+1];
  memcpy(result, c_result, c_size);
  *(result+c_size) = '\0';

//free and return
  delete[] c_result;
  return S_OK;
} 
```

这最终在 .NET/C# 互操作中为

```
calculate(string request, [out] byte result, [out] int size) 
```

我的问题：

1.  什么类型作为第二个参数传递？C# 提供的字节？但它是 C++ 中的“字节指针”吗？可以吗？

2.  如何在 C# 中将第二个参数转换为 byte[]？

谢谢

# javascript - Ember.js 和 Twitter Bootstrap 弹出框

> ID：11721633
> 
> 赞同：3
> 
> 时间：2012-07-30T12:30:48.843
> 
> 标签：javascript, twitter-bootstrap, ember.js

我正在尝试使用 ember.js 部署[弹出](http://twitter.github.com/bootstrap/javascript.html#popovers)框，但不知道该怎么做。

弹出框的内容必须是 ember 的元素才能与之交互。

我一直在看[https://github.com/jzajpt/ember-bootstrap](https://github.com/jzajpt/ember-bootstrap)但不包括 popover 元素。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:52:45.067

我认为，您尝试做的事情永远不会奏效，因为如果您的鼠标离开控件，弹出框就会消失！

```
App.Popover = Ember.View.extend({
     name: 'myPopover',
     template: Ember.Handlebars.compile('<div class="popover" {{bindAttr name="name"}}><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title">test</h3><div class="popover-content"><p></p></div></div></div>')         
});

App.TextField = Ember.TextField.extend({
    didInsertElement: function() {
        this._super();
        var self = this;                
        Ember.run.schedule('actions', this, function() {
           self.$().popover({
                title: 'title', 
                content: 'content',
                template: $('div[name="myPopover"]')
            });     
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:02:11.780

在您视图的 didInsertElement 方法中，您可以执行以下操作

```
didInsertElement: function() {
    var self = this;
    this.$().popover({
        title: self.get('tooltipTitle'), 
        content: self.get('tooltipContent')
    });     
} 
```

# node.js - 在 mongodb 中查找属性的结果总是未定义的

> ID：11721641
> 
> 赞同：0
> 
> 时间：2012-07-30T12:31:04.130
> 
> 标签：node.js, mongodb, mongoose

在这方面我真的很需要帮助。我正在使用带有 mongodb 和 mongoose 的 node.js。到目前为止，我已经设法创建了一个模式并将其保存到我的数据库中。

```
var Bericht = new Schema({
    name     : String
  , mail     : String
  , betreff  : String
  , inhalt   : String
  , datum    : Date
});
var Bericht = mongoose.model('Bericht', Bericht); 
```

我有一个 html 公式，我可以用 misc 传输。字段数据，通过查询字符串我将它们转换为可读字符串

```
var bericht_data = { 
name: tempo.Name
, mail: tempo.Mail
, betreff: tempo.Betreff
, inhalt: tempo.Inhalt
};
var testoro = new Bericht(bericht_data);
testoro.save(function (err) {
  if (!err) console.log('Success!');
}); 
```

所以 tempo.Name 例如是一个字符串，它也成功地保存了它。到目前为止，我可以将这个公式中的所有数据保存到我的 mongodb 中。

现在的问题是：我希望将数据作为字符串返回以处理动态 html。要将信息输入我的控制台，我使用

```
Bericht.find(
{},
{ '_id': 0},
        function(err, docs) {
        if (!err){ 
               console.log(docs);
          // process.exit();
                  }
        else { throw err;}
        }
); 
```

控制台为我提供了曾经保存在我的架构 Bericht 中的所有数据，不包括 long _id 的东西。示例输出： [ { name: 'Hans', mail: 'hans@wurst.de', betreff: 'I lost my wurst', inhalt: 'look at me, I am wonderful' } ] 这只是一个，通常会有成为海量数据。现在的想法是仅将名称提取到像“Hans”这样的字符串中。我想把这个名字变成一个变量，但是这似乎是不可能的！我试过了

```
Bericht.find(
{},
{ '_id': 0},
        function(err, docs) {
        if (!err){ 
               console.log(docs.name);
          // process.exit();
                  }
        else { throw err;}
        }
); 
```

但是我只得到“未定义”的交付。我感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:18:37.790

看看[Mongoose QueryStreams](http://mongoosejs.com/docs/querystream.html)。我自己没有使用过它，但我修改了他们的示例代码以适合您的模型，让您了解它在实践中的工作方式：

```
var stream = Bericht.find().stream()
  , names = []
  , i;

function closeHandler() {
  console.log(JSON.stringify(names));
};

stream.on('data', function (doc) {
  if (doc.name) {
    names.push(doc.name);
  }
})

stream.on('error', function (err) {
  // handle err
})

stream.on('close', closeHandler) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:24:22.730

Mongoose find 返回一个文档数组，因此您应该尝试以下操作：

```
Bericht.find(
 {},
 { '_id': 0},
    function(err, docs) {
     if (!err){
        for(var i=0; i<docs.length; i++)
        {
           console.log(docs[i].name);
        }
      // process.exit();
     }
    else { throw err;}
    }
); 
```

# android - 在android中合并mp3文件

> ID：11721643
> 
> 赞同：0
> 
> 时间：2012-07-30T12:31:08.820
> 
> 标签：android, merge, mp3

我正在开发一个应用程序，我想在其中将多个 .mp3 文件合并到一个 .mp3 文件中，我搜索了很多但找不到任何解决方案。有什么办法可以做到这一点，请告诉我。提前致谢。

# php - 获取用户选择的选项值

> ID：11721644
> 
> 赞同：0
> 
> 时间：2012-07-30T12:31:11.247
> 
> 标签：php, javascript, jquery

在我的表单和函数所在的索引文件中，命名为：

**索引.php**

```
$(function() {
    $.ajax({
        type: "POST",
        url: "invtype.php",
        data: "getrevenuetype=true",
        success: function(b){
            $("#revenueType").html(b)
        }
    })
}) 
```

`<span name="revenueType" id="revenueType"></span><br/>`

**输入类型.php**

```
<?php

mysql_connect("","","") or die('Error: '.mysql_error());
mysql_select_db("dbname");

if(isset($_POST['getrevenuetype'])) {
    $sql3 = mysql_query("SELECT * FROM chartofaccount WHERE accountnumber >= 4000 and accountnumber <= 4999");
    $acct = '';
    $acctrow = mysql_num_rows($sql3);
    if($acctrow > 0) {

    echo 'Revenue Type:<select name="rename">';
        while($chartrow = mysql_fetch_array($sql3)) {
        $revenueaccountname = $chartrow['accountname'];

    $acct .= '<option value="$revenueaccountname"> '. $revenueaccountname .' </option>';

    }

    }
}

echo $acct;
echo '</select>'; 
```

我的问题是我将如何获得或应该使用什么代码来获得用户选择的选项的值？我获取该值的目的是我想将它放在另一个 php 中，它将用作将数据插入 MySQL 的 var。已经尝试过这段代码：`$name = $_POST['rename'];`然后包含'invtype.php'；在另一个 php 文件上（这是我将使用所选选项的值的地方），但它似乎不起作用。我知道我的代码都搞砸了，对此我感到非常抱歉，但是如果您能提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:45:36.057

例如，您需要添加 ' 用于首次响应

```
echo $acct;
echo '</select>';
echo '<input type="submit id="submit" value="" />'; 
```

比添加js

```
$('#sumbit').click(function(){
 var name = $('select[name=rename]').val();

   $.ajax({
      type: "POST",
      url: "invtype.php",
      data: "rename=1&name="+name,
      success: function(b){
        $("#revenueType").html(b)
    }
   })

}); 
```

比改变 invtype.php

```
if(isset($_POST['rename'])) {
 $name = $_POST['name'];

 //work with base 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:38:10.273

这个怎么样？给你的表单一个 id 属性并用它替换 formid :)

```
$(function() {
    $.ajax({
        type: "POST",
        url: "invtype.php",
        data: "getrevenuetype=true&selectedoption=" + $('#formid option:selected').val(),
        success: function(b){
            $("#revenueType").html(b)
        }
    })
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:41:04.983

将`select`标签添加到页面`option`并由用户选择后，您可以通过单击按钮发送选定的值，如下所示：

```
$("#btn").click(function(){
  $.ajax({
        type: "POST",
        url: "server.php",
        data: "value=" + $('option:selected').val(),
        success: function(b){
            alert('Sent successfully!');
        }
    })
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T12:42:13.463

```
$('select[name="rename"] option:select').val() 
```

# c# - 如何使@Html.CheckBoxFor 不可见？

> ID：11721646
> 
> 赞同：2
> 
> 时间：2012-07-30T12:31:11.883
> 
> 标签：c#, asp.net-mvc-3, razor

如何 `@Html.CheckBoxFor`使用 htmlAttributes 使不可见？

我试过：

```
 @Html.CheckBoxFor(modelItem => modelItem.DeleteEnabled, new {visible= @modelItem.Visible}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:33:32.157

你可以这样尝试：

```
@Html.CheckBoxFor(modelItem => modelItem.DeleteEnabled, 
                  new { style = modelItem.Visible ? 
                                    string.empty : 
                                    "display:none"}) 
```

或者，如果您在页面源中根本不需要它，甚至也不需要它，那么使用`@if`例如：

```
@if(modelItem.Visible)
{
    @Html.CheckBoxFor(modelItem => modelItem.DeleteEnabled)
} 
```

# cocoa - 如何设置 NSConstraintBasedLayoutVisualizeMutuallyExclusiveConstraints？

> ID：11721656
> 
> 赞同：47
> 
> 时间：2012-07-30T12:31:57.620
> 
> 标签：cocoa, nsuserdefaults, autolayout

我从 Cocoa 自动布局机制收到以下消息：

> 将 NSUserDefault NSConstraintBasedLayoutVisualizeMutuallyExclusiveConstraints 设置为 YES 以在发生这种情况时自动调用 -[NSWindow VisualizeConstraints:]。

但我不知道如何“将 NSUserDefault NSConstraintBasedLayoutVisualizeMutuallyExclusiveConstraints 设置为 YES”。

我该如何设置？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-30T12:25:16.880

您可以为特定方案配置设置，如下所示...

1) 从弹出菜单中选择方案并选择*Edit Scheme ...*

![编辑方案...菜单](../Images/90fef3d03b74cc7682a86df4f9c2ee8f.png)

2) 在下面的向下滑动窗口中，向*Arguments Passed on Launch*添加一个新条目。
复制并粘贴以下行。

```
-NSConstraintBasedLayoutVisualizeMutuallyExclusiveConstraints YES 
```

![编辑视图](../Images/2c76e4062113f6c2f2c24f89feb3e8cc.png)

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-10-24T07:34:49.957

你也可以设置

**目标 C：**

```
[[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"NSConstraintBasedLayoutVisualizeMutuallyExclusiveConstraints"]; 
```

**斯威夫特 <3:**

```
NSUserDefaults.standardUserDefaults().setBool(true, forKey: "NSConstraintBasedLayoutVisualizeMutuallyExclusiveConstraints") 
```

**Swift 3-4.2（至少）：**

```
UserDefaults.standard.set(true, forKey: "NSConstraintBasedLayoutVisualizeMutuallyExclusiveConstraints") 
```

在`applicationDidFinishLaunching`.

请注意，这将为您自己**和**您的最终用户设置它，这可能不是您想要的（不要像这样投入生产！）。您可以通过在“调试”运行方案中设置参数来仅为自己设置它`-NSConstraintBasedLayoutVisualizeMutuallyExclusiveConstraints YES`（在单独的答案中描述）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-04-18T15:18:22.883

以前的答案中有很多好的建议，但是对于您开发的每个应用程序都必须重复它们，即使是为了快速尝试一个想法。

如果您希望所有应用程序和所有用户默认启用它，您可以通过在终端中键入以下命令在默认数据库中设置它：

```
defaults write -globalDomain NSConstraintBasedLayoutVisualizeMutuallyExclusiveConstraints YES 
```

您可以查看[手册页](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/defaults.1.html)以了解主题的变体，例如，如果您希望它的范围受到更多限制。

保留此设置的一个缺点是，其他人的软件会突然因布局不明确而突出显示——即使有时来自 Apple 本身的东西也是如此。

因此，您可能希望在一段时间内再次将其关闭。该命令非常简单：

```
defaults write -globalDomain NSConstraintBasedLayoutVisualizeMutuallyExclusiveConstraints NO 
```

需要明确的是：在终端中输入的设置仅适用于有问题的机器，因此最终用户将无法获得该设置。这也意味着 beta 测试人员不会看到紫色阴影，这可能是也可能不是您想要的。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-11-02T07:18:04.373

斯威夫特 3.0

```
UserDefaults.standard.set(true, forKey: "NSConstraintBasedLayoutVisualizeMutuallyExclusiveConstraint‌​s") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T08:54:23.030

从命令行或 Xcode 的方案设置中运行应用程序时，只需将其作为参数添加即可。

# android - 背景图像在 Android、BB、Windows Phone 中不起作用

> ID：11721659
> 
> 赞同：3
> 
> 时间：2012-07-30T12:32:23.857
> 
> 标签：android, html, css, windows-phone-7, blackberry

我的背景图像无法在 Android、BB、Windows Phone 中运行。我想要支持所有 Android、BB、Windows Phone 的通用代码。

并且图像必须根据屏幕尺寸自动拉伸

任何人都可以帮我..提供一些好的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:10:51.223

好的，问题是您没有设置背景图像。您正在使用常规图像。要在元素上使用背景图像，您可以使用以下 CSS（只需注意背景线）。

确保图像的路径是相对于 CSS 文件的。不是根。相应地更改重复和定位设置 - [http://www.w3schools.com/cssref/pr_background-image.asp](http://www.w3schools.com/cssref/pr_background-image.asp)

```
 #backgrndImg { 
        height: 100%; 
        left: 0; 
        position: fixed; 
        top: 0; 
        width: 100%; 
        z-index: -1; 
        background: url('images/your_image.jpg') no-repeat left top;
   } 

    <div id="backgrndImg"></div > 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T10:31:43.963

解决方案 ：

```
.ui-body-a,
{
background: url(../images/background.jpg) no-repeat; 
background-position:center center; 
background-attachment:scroll; 
background-size:100% 100%;  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T12:35:43.920

你的代码是什么？在我的 Android（默认 Internet 浏览器和 Chrome）上这样做对我来说很简单：

```
​body{
    background-image:url("myBgUrl");
}​ 
```

# iphone - AudioSessionInitialize 与另一个中断侦听器

> ID：11721661
> 
> 赞同：0
> 
> 时间：2012-07-30T12:32:30.410
> 
> 标签：iphone, ios, audio, audiosession

`AudioSessionInitialize(NULL, NULL, rioInterruptionListener, self)`我用 rioInterruptionListener初始化音频会话。我想改变中断监听器。

如果我使用 AudioSessionInitialize(NULL, NULL, anotherInteruptionListener, self)，它会返回错误。所以，我认为，我需要破坏音频会话。然后再次初始化。

但是如何实现呢？如何设置另一个中断侦听器或取消音频会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:38:41.490

当您想要更改处理程序时，您可以简单地在您的第一个中断侦听器中放置一个条件语句来调用第二个中断侦听器。

# wpf - 将命令附加到 ListView 的 ScrollViewer.ScrollChanged

> ID：11721663
> 
> 赞同：7
> 
> 时间：2012-07-30T12:32:38.260
> 
> 标签：wpf, mvvm, mvvm-light, eventtrigger, eventtocommand

WPF`ListView`类可以设置为在没有外部`ScrollViewer`的情况下自动处理滚动，并且可以通过编写 XAML 来为控件的内部滚动条注册事件处理程序，如下所示：

```
<ListView ScrollViewer.ScrollChanged="ScrollChanged"  /> 
```

如何将其附加到 MVVM light 命令？我尝试了以下方法，但它不起作用：

```
<ListView>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="ScrollViewer.ScrollChangedEvent">
            <cmd:EventToCommand Command="{Binding ScrollCommand}" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
</ListView> 
```

注意：`ScrollCommand`-`RelayCommand`来自我的视图模型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:07:40.047

`EventTrigger`不会触发路由事件。您可以使用[本文](http://joyfulwpf.blogspot.co.il/2009/05/mvvm-invoking-command-on-attached-event.html)中提出的解决方案 来创建一个`RoutedEventTrigger`类并使用它来代替`EventTrigger`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:18:13.923

我为此推荐一种行为。如果您没有 Blend，则需要获取 Blend SDK。但是一旦你有了它，你就可以按照[本教程](http://wpftutorial.net/Behaviors.html)来扩展 ScrollViewer 的行为。

# android - 带有 UI 的 Android AudioRecorder

> ID：11721665
> 
> 赞同：2
> 
> 时间：2012-07-30T12:32:40.663
> 
> 标签：android, audio-recording

我想创建一个录音机，我尝试了从[http://developer.android.com/guide/topics/media/audio-capture.html](http://developer.android.com/guide/topics/media/audio-capture.html)获得的代码，它工作正常；它记录并播放我所说的内容。但是现在我想创建一个录音机，其 UI 类似于 Google 提供的识别器意图，以便您可以看到或监控您的声音已被录制（抱歉，我找不到合适的术语，但我希望你能明白我想说什么）。你知道任何可以帮助我的教程或链接吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:38:16.150

我想你的意思是你想要一些反馈，你的声音正在被拾取？如果是这样，也许[这个项目，Audalyzer](https://code.google.com/archive/p/moonblink/wikis/Audalyzer.wiki)可能是一个开始寻找的好地方？

软件包中的库为您提供 dB 读数、一维和二维波形以及 FFT 图。

[![截屏](../Images/f198b04fb7f7e3709bd351f2f1a46029.png)](https://i.stack.imgur.com/9pYos.png)
[（来源：[googlecode.com](http://moonblink.googlecode.com/files/Audalyzer-1.3-choral.png)）]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-23T07:32:57.060

有一个更简单的[WaveformControl](https://github.com/newventuresoftware/WaveformControl)，您可能会发现更容易理解和修改以满足您的需要。

# annotations - guice 忽略提供者？

> ID：11721669
> 
> 赞同：2
> 
> 时间：2012-07-30T12:32:48.767
> 
> 标签：annotations, guice, provider

似乎 Guice 忽略了我的模块的 @Provider 方法。

我有一个像这样的 MyModule 类：

```
public class MyModule extends AbstractModule {

    protected void configure() {

        bindInterceptor(Matchers.any(), Matchers.annotatedWith(Timed.class), new GuiceEnabledLoggingInterceptor());
        bind(OneClass.class).to(OneClassImpl.class);

        // And more binding lines...

    }

    @Provides
    public AnotherClassInApi provideMyClass() {
        return AnotherClassInApi.getInstance();
    }

    // And more @Provides methods

} 
```

主要方法是

```
public static void main(String[] args){
    ConfigHandler.getInstance().loadConfigWhenNotRunningInsideMicrocontainer();
    Injector INJECTOR = Guice.createInjector(new MyModule());
    // ...
} 
```

在项目的其他部分，我有类 AnotherClassInApi，这是一个非常标准的单例加一个方法：

```
public class AnotherClassInApi {

    private static final AnotherClassInApi INSTANCE = new AnotherClassInApi();

    private AnotherClassInApi() { }

    // ... more methods

    public static AnotherClassInApi getInstance() {
        return INSTANCE;
    }
} 
```

好吧，我知道应该有效地将AnotherClassInApi 对象的任何请求绑定到getInstance() 方法，但它不起作用。有趣的是，调试时永远不会到达@Provide 方法中的断点，但会到达configure 方法中的断点。似乎 guice 忽略了我的提供者注释，我认为[我完全按照 Guice 指南所说的 @Provider](http://code.google.com/p/google-guice/wiki/ProvidesMethods)，所以我已经被卡住了。

我一直在谷歌搜索，但找不到类似的东西。任何帮助都感激不尽。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:02:25.907

Providers（和@Provides 方法）的概念是，它们仅在实际需要时被调用。因此，除非您真的使用 Injector 创建具有 @Inject 依赖项的实例，否则您的 Provider 不会被忽略，只是不会被使用（也不需要）。

您可以使用“ [injector.getAllBindings()](https://google.github.io/guice/api-docs/latest/javadoc/index.html?com/google/inject/Injector.html) ”监控所有配置的绑定。

> java.util.Map,Binding> getAllBindings()
> 
> 返回此注入器绑定的快照，包括显式的和即时的。返回的地图是不可变的；它仅包含调用 getAllBindings() 时存在的绑定。即时绑定仅在至少被请求一次时才存在。后续调用可能会返回一个带有额外即时绑定的映射。如果存在的话，返回的映射不包括从父注入器继承的绑定。
> 
> 此方法是 Guice SPI 的一部分，旨在供工具和扩展使用。

# apache-flex - 运行 maven-release-plugin 时在 jenkins 中使用 flashplayer 时出错。使用 mvn test 时工作

> ID：11721671
> 
> 赞同：2
> 
> 时间：2012-07-30T12:33:00.170
> 
> 标签：apache-flex, maven, hudson, jenkins, maven-release-plugin

我在 Jenkins 中配置了一个 maven 2 作业，并且在我使用的 Build 下

```
 clean test release:prepare ... 
```

在**目标**选项中。Jenkins 依次运行这些目标，当**测试**运行时，它会打印（并且运行良好）：

```
[WARNING] [LAUNCHER] Using regular flashplayer tests 
```

但是当它尝试运行**准备**时，我得到，

```
[INFO] [WARNING] [LAUNCHER] Using xvfb-run to launch headless tests
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [ERROR] BUILD ERROR
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] Failed to launch Flash Player.  Probably java was not able to find flashplayer.
[INFO]      Make sure flashplayer is available on PATH
[INFO]      or use -DflashPlayer.command=${flashplayer executable}
[INFO] Read more at: https://docs.sonatype.org/display/FLEXMOJOS/Running+unit+tests 
```

所以相同的工作，相同的詹金斯，相同的工作配置，我怎样才能让它工作，以便**准备**工作也像**清洁**目标一样工作？

我也尝试过错误提示的内容，即：

```
 -Dflex.flashPlayer.command=/opt/player_10/flashplayer", "-DflashPlayer.command=/opt/player_10/flashplayer 
```

# c# - 创建一个 MIME 类型为 application/octet-stream 的文本文件

> ID：11721675
> 
> 赞同：1
> 
> 时间：2012-07-30T12:33:21.460
> 
> 标签：c#, .net, text-files, mime

我需要创建一个 mime 类型 application/octet-stream 的文本文件。

使用以下 c# 代码：

```
string[] text = P_Data.M_Content.Split(',');
System.IO.File.WriteAllLines(@"c:\temp.txt", text); 
```

此代码在服务器上生成一个物理文件。但是，mime 类型是 text/plain。

我需要修改此代码以创建具有 mime 类型 application/octet-stream 的文件

有什么想法可以实现吗？

编辑这是来自 GUI (ExtJS) 的请求

```
success: function(P_Response){
    var res = Ext.util.JSON.decode(P_Response.responseText);
    if(res == 'SUCCESS') window.location.href = 'myfile.txt';
    else alert('the error message');                                                                                                                                                                                                                            
}, 
```

通过使用此代码，如果我创建 .doc 而不是 .txt，则会打开一个弹出窗口来下载文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:37:49.803

如果这是用于 Web 应用程序，您需要将文件保存为二进制文件，然后当客户端请求它时，您将`application/octet-stream`作为 HTTP 标头的一部分发送。

[http://msdn.microsoft.com/en-us/library/system.io.binarywriter.aspx](http://msdn.microsoft.com/en-us/library/system.io.binarywriter.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:39:12.647

只有 HTTP 有内容类型。您使用此属性设置它。

[HttpResponse.ContentType 属性](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.contenttype.aspx)

# c++ - 具有小学习曲线的 C++ 图形 API - linux

> ID：11721676
> 
> 赞同：1
> 
> 时间：2012-07-30T12:33:31.007
> 
> 标签：c++, linux, graphics

我必须在Linux中做一些非常基本的绘图，比如连接一些点，跟踪一个移动点的轨迹。我正在寻找一个学习曲线非常小的图形库，这样我就可以节省时间并避免进入像 gtk 和 opengl 这样的东西，因为我不需要复杂的东西。

* * *

编辑 1：您能否提供指向 SDL 教程的链接，该教程解释了您认为相关的任何其他库的非常基本的绘图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:44:08.973

你想要[pygame](http://www.pygame.org)、[Allegro](http://alleg.sourceforge.net/)或[SDL](http://www.libsdl.org/)和[SDL_gfx](http://www.ferzkopp.net/Software/SDL_gfx-2.0/)。所有这些都可以通过最流行的软件包存储库获得。

准备好习惯处理表面、图形基元、位图等。学习曲线并不大，但如果您以前从未做过图形，它仍然是一个重大的范式转变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:53:59.310

我是用[FLTK](http://www.fltk.org/)教的，正如中年男子所说：“我原来还好，不是吗？”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:06:21.193

您可能还对[Cocos2dx](http://www.cocos2d-x.org/)感兴趣，它适用于[许多不同的平台](http://www.cocos2d-x.org/projects/cocos2d-x/wiki)（包括 Linux）。

# html - 通过按钮的html输入动作

> ID：11721678
> 
> 赞同：1
> 
> 时间：2012-07-30T12:33:36.400
> 
> 标签：html, forms

我正在使用以下表单进行输入，然后设置操作

```
<select name="page_option">
<option value="go1">GO1</option>
<option value="go2">Go 2</option>
</select>
<input type="submit" value="Change home.php" /> 
```

而不是这个我想有两个并排的按钮，一个按钮有文本GO1，而另一个有GO2，当用户点击GO1和GO2时，它的目的与上面的表单相同。当点击Go1按钮时，页面将显示在下面按钮“GO1 开启”，当点击 Go2 时，它将显示在“GO2 开启”下方

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:36:43.663

```
 <form action="form_action.asp" method="get">
     <select name="page_option">
<option value="go1">GO1</option>
<option value="go2">Go 2</option>
</select>
      <input type="submit" value="Submit" />
    </form> 
```

**action="form_action.asp" 方法="get"**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:39:42.377

您可以有两个提交按钮，如下所示：

```
<input type="submit" value="go1">
<input type="submit" value="go2"> 
```

您可以检查服务器端单击了哪个按钮，并将用户引导到相应的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:46:34.517

然后使用java脚本

```
 <input type="submit" onclick="function1()" value="go1">
<input type="submit" onclick="function2()" value="go2"> 
```

函数 f1(){} 函数 f2(){}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T12:47:10.880

试试下面的..

```
<form action='action.php' method='post'>
<input type="submit" name='go1' value="go1">
<input type="submit" name='go2' value="go2"> 
```

在 action.php

```
if(isset($_REQUEST['go1']))
{
  $_SESSION['msg'] = 'Go1 button is on'
}

if(isset($_REQUEST['go2']))
{
  $_SESSION['msg'] = 'Go2 button is on'
}

print_r($_SESSION['msg']); 
```

希望这会帮助你。您必须在 action.php 文件的开头开始会话 谢谢

# iphone - 在 UITextField 上添加子视图

> ID：11721685
> 
> 赞同：0
> 
> 时间：2012-07-30T12:34:12.833
> 
> 标签：iphone, objective-c, ios, uiview, uitextview

我有一个 UITextView，当输入特定内容时，我试图在其顶部插入一个弹出子视图。几乎是自动完成（类似于原生 iOS 自动更正。

使用委托方法，我可以找出光标从开头偏移了多少个字符。但是，如何找到字符/光标的精确位置？我需要能够在该特定位置显示弹出视图。

我尝试计算每个字符的宽度，但我认为这在 Retina 和非 Retina 显示器之间是不一致的。

有什么建议么？

**编辑**

我不是要实现单词自动完成。我想显示一个我自己的弹出视图，以便在那里显示一个带有多个选项的表格视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:42:32.143

```
-(float)getWidthForString:(NSString*)str font:(UIFont*)font
 {
  CGSize boundingSize = CGSizeMake(CGFLOAT_MAX, CGFLOAT_MAX);
  CGSize requiredSize = [str sizeWithFont:font constrainedToSize:boundingSize lineBreakMode:UILineBreakModeWordWrap];  
  return requiredSize.width;
 } 
```

# c# - 如何获取用户位置国家

> ID：11721687
> 
> 赞同：-1
> 
> 时间：2012-07-30T12:34:24.640
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

如何从请求中获取 Asp.Net MVC 中的用户位置（国家/地区）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:36:21.167

您可以尝试通过 IP 进行查找。但这不是 100% 保证的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:33:29.470

```
Request.Browser.UserLanguages[0] 
```

# c# - 将数据表复制到数据网格而不将它们绑定在一起

> ID：11721701
> 
> 赞同：0
> 
> 时间：2012-07-30T12:35:05.373
> 
> 标签：c#, datagridview, datatable

我的应用程序中有两个数据网格（`dataGridView1`和`dataGridView2`）。我正在将选定的项目`dataGridView1`从`dataGridView2`. 以下是我目前的做法：

```
DataTable dt = new DataTable("dt");
DataTable id = new DataTable("id");
try
{
    if (dataGridView1.Rows.Count > 0)
    {
        for (int i = 0; i < dataGridView1.Rows.Count - 0; i++)
        {
            if (dataGridView1.Rows[i].Cells[0].Value != null)
            {
                DataRow row;
                DataRow idRow;
                row = dt.NewRow();
                idRow = id.NewRow();
                idRow["id"] = dataGridView1.Rows[i].Cells[1].Value.ToString();
                row["id"] = dataGridView1.Rows[i].Cells[1].Value.ToString();
                row["Link Name"] = dataGridView1.Rows[i].Cells[2].Value.ToString();
                dt.Rows.Add(row);
                id.Rows.Add(idRow);
            }
        }
    dataGridView2.DataSource = dt;
} 
```

但是，我还需要能够从`dataGridView2`. 目前，DataTable`dt`已绑定，`dataGridView2`在添加项目后我无法清除它，因为它也会清除`dataGridView2`.

基本上，我的问题是，有没有办法在不使用的情况下将数据表的内容添加到数据网格`datagrid.DataSource`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:40:19.090

`dataGridView2.Rows.Add`您可以使用该函数手动添加每一行。此外，我通常使用`dataGridView2.Row(n).Tag`来保存该行数据的实际来源。

```
int n = dataGridView2.Rows.Add();
DataGridViewRow newRow = dataGridView2.Rows[n]; 
newRow.Cells[0].Value  = "ABC";
newRow.Cells[1].Value  = 123;
newRow.Tag = row; 
```

# python - 修改 django 装饰器函数，Permissionn_required

> ID：11721708
> 
> 赞同：1
> 
> 时间：2012-07-30T12:35:27.937
> 
> 标签：python, django, decorator

默认情况下，装饰器`@permission_required($SOME_PERMISSION)`检查请求用户是否具有请求此视图所需的权限，如果没有，则将其重定向到登录页面或任何其他指定页面。（例如，如果用户未登录，他将被重定向到登录页面）。
这是我的问题，我想将未登录的用户重定向到登录页面，但可能有一个登录的用户没有所需的权限，默认情况下该用户被重定向到登录页面，而且他已经登录后，他再次被重定向到他请求的页面，这里发生了一个循环。
所以我想做的是改变这个装饰器的行为（在我的视图函数中写一个等效的代码而不是使用@permission_required）来检查用户是否因为他没有登录而看不到请求的页面，或者他是登录但没有权限，然后将他相应地重定向到正确的页面。任何帮助将不胜感激:)
提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:50:16.657

我认为您正在寻找的是这个答案：

[如何使 Django permission_required 装饰器不将已登录的用户重定向到登录页面，但显示一些消息](https://stackoverflow.com/questions/1251151/how-can-make-django-permission-required-decorator-not-to-redirect-already-logged)

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T12:48:00.697

只需将`login_url`参数传递给`permission_required`，例如：

```
@permission_required($SOME_PERMISSION, login_url='/my/custom/page') 
```

# javascript - 用javascript加密文件（Phonegap应用程序）

> ID：11721709
> 
> 赞同：2
> 
> 时间：2012-07-30T12:35:31.477
> 
> 标签：javascript, encryption, cordova, zip, rsa

我有一个在 phongap (=html+javascript) 中创建的移动应用程序，我需要使用像 RSA 这样的非对称密码来加密例如一个 zip 文件，所以一旦文件被加密，任何人几乎不可能在不使用私钥的情况下获取内容只有将文件发送到的服务器才知道。

在javascript中可能有类似的东西吗？假设该应用程序只能在具有 HTML5 兼容浏览器的 Android 和 iOS 上运行。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-07-30T12:54:52.577

Web 浏览器中的 Javascript 加密是一种[有缺陷的方法](http://www.matasano.com/articles/javascript-cryptography/)。但也许你可以使用[Cryptico](http://cryptico.wwwtyro.net/)来完成你的任务。

# c# - c#.Net 中的圆形地理围栏

> ID：11721713
> 
> 赞同：3
> 
> 时间：2012-07-30T12:35:45.093
> 
> 标签：c#, bing-maps, geofencing

我在 Bing 地图中画了一个圆圈。现在我需要编写代码来判断一个点（纬度、经度）是在圆圈内还是在圆圈外？

c#.Net 中有算法代码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T12:40:41.953

只需计算`distance between the center of the circle and your current coordinate`，并将此距离与圆半径进行比较（距离 <= 半径表示坐标在圆内）。

要计算两点之间的距离，请使用[Haversine 公式](http://en.wikipedia.org/wiki/Haversine_formula)。

您将在[此处](http://www.codecodex.com/wiki/Calculate_Distance_Between_Two_Points_on_a_Globe)找到 C# 实现。

# facebook - facebook - 重置帖子提要或应用程序？它是什么？

> ID：11721731
> 
> 赞同：0
> 
> 时间：2012-07-30T12:36:52.830
> 
> 标签：facebook, session, cookies, share

我不知道它是什么或它是如何工作的，但它似乎与会话或 cookie 有关。

我在我的页面上（在每个帖子下）实现了 facebook 分享按钮，如果我分享它并且（将来）我修改我页面上的帖子（标题、描述或图像），我的 facebook 墙上的帖子不会自行更新. 如果我删除帖子（在我的页面上）并使用相同的名称（相同的行 id - mysql db）、不同的图像、标题重新生成并共享它，则会出现旧帖子。

我在描述元标记中犯了一个语法错误

```
<meta property="og:description" content="asd"/> 
```

我必须从我的页面（从我的数据库）中删除它，我必须创建一个新的。

有什么方法可以重置 facebook 会话或 cookie 或者它是什么......我不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:25:55.573

您需要告诉 facebook 您对页面所做的任何更改或等待 facebook 再次抓取您的页面。为您的页面更新 Facebook 缓存的最简单方法是使用[调试工具](https://developers.facebook.com/tools/debug)作为应用程序的管理员。

# android - 强制 onDestroy 解决内存问题

> ID：11721732
> 
> 赞同：1
> 
> 时间：2012-07-30T12:36:53.740
> 
> 标签：android, android-activity, lifecycle, android-sdk-2.3

我在我的应用程序中遇到内存问题，它使用 TabHost 和 TabGroupActivity 作为 TabContent。

我注意到有时 Activity 的生命周期很奇怪。

我启动应用程序，加载了 tab1，然后单击 tab2 (Tab1->Tab2 )

```
Tab1Group.onPause called
Tab1.onPause called

Tab2Group.onCreate called
Tab2.onCreate called 
```

然后我返回 Tab1 (Tab2->Tab1)

```
Tab2Group.onPause called 
Tab1Group.onDestroy called
Tab1.onDestroy called
Tab1.onCreate called 
```

好吧，如果我回来时 tab1 被破坏了，最好直接破坏它而不是调用`onPause`，这样 VM 可以释放更多内存。

你怎么看 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:53:22.173

手动清除所有意图并清空所有对象

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
intent.addCategory(Intent.CATEGORY_HOME); 
startActivity(intent); 
```

# javascript - Internet Explorer 中的 Javascript 切换

> ID：11721734
> 
> 赞同：0
> 
> 时间：2012-07-30T12:36:55.980
> 
> 标签：javascript, html, debugging

```
function globalModelToggleClicked(modname)
{
 var state = this.checked ? true : false;
 var display = this.checked ? 'inline-block' : 'none';
 var inputs = document.getElementsByTagName('input');
 var input_l = inputs.length;

 // check uncheck inputs checkboxes
 while(input_l--)
 {
   var input = inputs[input_l];
   if(input.getAttribute('class') == modname)
   {
     input.checked = state;
   }
 }

 // show/ hide all colorings
 var main = document.getElementById('main');
 var divs = main.getElementsByTagName('div');
 var divs_l = divs.length;
 var regex = new RegExp(modname);

 while(divs_l--)
 {
   var div = divs[divs_l];
   if( regex.test(div.getAttribute('class')) 
    && ( /hit/.test(div.getAttribute('class'))
         || /seqBorder/.test(div.getAttribute('class')) 
       )
     )
   {
     div.style.display = display;
   }
 }
}

function localModelToggleClicked(modname)
{

  var display = this.checked ? 'inline-block' : 'none';
  // get parent fieldset
  var fieldset = this.parentNode;
  while(fieldset.nodeName != 'FIELDSET')
  {
    fieldset = fieldset.parentNode;
  }

  // show/ hide all colorings
  var divs = fieldset.getElementsByTagName('div');
  var divs_l = divs.length;
  var regex = new RegExp(modname);

  while(divs_l--)
  {
    var div = divs[divs_l];
    if( regex.test(div.getAttribute('class'))
    && ( /hit/.test(div.getAttribute('class'))
         || /seqBorder/.test(div.getAttribute('class'))
       )
      )
    {
        div.style.display = display;
    }
 }
} 
```

上述两个函数切换 div 的可见性。它们在除 IE(8) 之外的所有浏览器中都能完美运行，我不知道出了什么问题。我试过调试器，它什么也没显示。这些函数位于外部脚本上，其他函数正在运行。当我在函数内部发出警报时，一切似乎都井然有序。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:43:10.387

问题在于`getAttribute('class')`显然 IE 不接受这一点。所以我改用了`className`。在所有浏览器中都能完美运行。

# solr - solr 是否会根据点击次数增加文档的分数？

> ID：11721736
> 
> 赞同：1
> 
> 时间：2012-07-30T12:37:00.383
> 
> 标签：solr

有人告诉我，solr 会根据点击次数增加文档的分数。这是真的？如果是，有人可以提供来自 lucene 或 solr 页面的真实链接吗？我多次运行查询，但我没有看到结果文档的分数在增加。所以这似乎不是真的。

# rest - web.xml，同时使用表单和基本身份验证

> ID：11721744
> 
> 赞同：10
> 
> 时间：2012-07-30T12:37:29.200
> 
> 标签：rest, servlets, web.xml, restful-authentication

我已经成功在 web.xml (java-webcontainer) 中设置了 FORM-authentication。

使用 FORM-Authentication 时，我没有找到在客户端的 restful-uri 的 get-request 中发送用户名/密码的方法。所以我必须只对 restful-uri 使用 BASIC-Authentication。

**所以我有这个问题：**

如何设置基于表单的身份验证和基本身份验证？基本身份验证应该只为 restful-uri 启用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-08-11T18:59:52.390

我也面临着类似的问题，我意识到如果您使用的是 Wildfly，那么可以使用 web.xml 配置多种机制：-

```
 <auth-method>BASIC?silent=true,FORM</auth-method> 
```

将首先尝试使用此静默基本身份验证，这是仅在存在授权标头时才生效的基本身份验证。如果不存在这样的标头，则将使用表单身份验证。

也许回复太晚了，但我刚刚更新了这个，以防有人觉得这很有用：P

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-08T13:38:16.217

这里有一段时间没有响应，所以我自己做了一个快速的 servlet 复习。Servlet 规范确实只允许`<login-config>`每个 Web 应用程序使用一个元素，因此无法为 REST API 提供一个具有 BASIC 身份验证的入口点，而另一个具有用于 UI 的基于 FORM 身份验证的入口点。唯一的选择是将它们构建为两个可独立部署的应用程序。为避免代码重复，让 UI 应用程序以与第三方客户端相同的方式与 REST API 对话可能是一个好主意。

# c# - 带有 SelectMany 的 String.Format

> ID：11721749
> 
> 赞同：0
> 
> 时间：2012-07-30T12:37:40.630
> 
> 标签：c#, string, linq, lambda

我想在`.SelectMany()`. 我有一个`Object`，其中包含一个`Dictionary<String,FileInfo>`. 对于这些字典中的每个元素，我希望将 Key 放入 String.Format()，但我总是将`"System.Linq.Enumerable+<SelectManyIterator>d__142[System.String,System.Char]"`其作为返回值。

我的错在哪里？

```
String.Format(
    "All Strings : {0} on {1} ", 
    MyObject.MyDictionary.Keys.SelectMany(x => x), 
    MyObject.Type); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:40:14.050

框架 3.5

```
 String.Format(
        "All Strings : {0} on {1} ", 
        string.Join(string.Empty, MyObject.MyDictionary.Keys.SelectMany(x => x).ToArray()),  
        MyObject.Type); 
```

框架 4

```
 String.Format(
        "All Strings : {0} on {1} ", 
        string.Join(string.Empty, MyObject.MyDictionary.Keys.SelectMany(x => x)),  
        MyObject.Type); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T12:41:06.233

SelectMany 将返回一个 IEnumerable，这就是为什么您需要将键放入字符串中，如下所示：

```
String.Format("All Strings : {0} on {1}",
     String.Join(", ", MyObject.MyDictionary.Select(x => x.Key)),
     MyObject.Type); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:30:24.523

非常感谢大家，我现在用这种方式解决了它：

```
String.Format("All Strings : {0} on {1} ", String.Join("; ",MyObject.MyDictionary.Keys), MyObject.Type); 
```

# php - 如何在 PHP 上使用 DOM 将 PHP 代码添加到属性中？

> ID：11721754
> 
> 赞同：3
> 
> 时间：2012-07-30T12:37:50.787
> 
> 标签：php, dom, attributes

我怎么能用 PHP DOM 做这样的事情？

```
<img src="<?php echo $picsrc; ?>"> 
```

本守则

```
$node->setAttribute('src','<?php echo $picsrc;?>'); 
```

确实逃脱了 PHP 标记。

```
<img src="&lt;?php echo $picsrc; ?&gt;"> 
```

有没有办法使用

```
$dom->createProcessingInstruction() 
```

属性值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:58:54.787

你应该试试这个

```
$srcPath = '<?php echo $picsrc;?>';
$node->setAttribute('src', html_entity_decode($srcPath)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:14:47.257

@thecatontheflat 是对的，解码就是答案！

但是以这种方式使用它：

```
$node->setAttribute('src','<?php echo $picsrc; ?>');

$doc->save('dynamic.php');
$html = htmlspecialchars_decode(file_get_contents('dynamic.php'));
$html = html_entity_decode($html);
file_put_contents('dynamic.php',$html); 
```

不要试图避免转换，只需撤销它。;)

非常感谢。

# servlets - servlet 中的文件上传会损坏文件

> ID：11721761
> 
> 赞同：1
> 
> 时间：2012-07-30T12:38:13.890
> 
> 标签：servlets, file-upload, ajax-upload

我正在使用 using ( [Valums uploader](http://valums.com/ajax-upload/) ) 上传文件，并且在服务器端使用 servlet。文件类型是应用程序/pdf。代码是：

```
String filename= request.getHeader("X-File-Name");
InputStream is = request.getInputStream();
File tmp = File.createTempFile(filename, "");
tmp.deleteOnExit();
FileOutputStream fos = new FileOutputStream(tmp);
IOUtils.copy(is, fos);
byte[] bytes = new byte[(int) tmp.length()];
is.read(bytes); 
```

现在这些字节作为 longblob 存储到数据库中。但似乎上面代码中的 inputStream 在文件中添加了更多数据，这就是文件数据被破坏的原因。我下载了与pdf文件相同的数据，发现原始上传的文件和现在下载的文件大小相同，但是在Acrobat中打开下载的文件时，它报告“文件已损坏”。对于上传请求，我只使用了文件输入。因此 inputStream 中没有其他输入参数的机会。上面代码中的字节数组也是传递给下载的。为什么数据会损坏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-25T01:59:36.910

您的问题可能是您正在阅读的数据长度。我有类似的问题并发布在这个问题链接 [Java: Binary File Upload using Restlet + Apache Commons FileUpload](https://stackoverflow.com/questions/28328766/java-binary-file-upload-using-restlet-apache-commons-fileupload/51509769#51509769)

希望这可以帮助

# iphone - 如何使用 ALAssetsLibrary 将图像路径转换为 uiimage

> ID：11721762
> 
> 赞同：2
> 
> 时间：2012-07-30T12:38:21.177
> 
> 标签：iphone, ios, assets

我的 iphone 应用程序有一个数组用于存储用户表单库选择的图像路径。我想使用 ALAssetsLibrary 将数组中的所有图像路径转换为 ​​uiimage。我该怎么做这个动作？我尝试使用循环，但不能。感谢您的帮助。

```
ALAssetsLibrary *library = [[[ALAssetsLibrary alloc] init] autorelease];
[library assetForURL:[filePath objectAtIndex:0] resultBlock:^(ALAsset *asset) {
    UIImage *image = [UIImage imageWithCGImage:[[asset defaultRepresentation] fullResolutionImage]];
    [fileImage addObject:image];
} failureBlock:^(NSError *error) {

}]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T14:04:02.090

请使用以下代码

```
typedef void (^ALAssetsLibraryAssetForURLResultBlock)(ALAsset *asset);
typedef void (^ALAssetsLibraryAccessFailureBlock)(NSError *error);    

ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset){

 ALAssetRepresentation *rep = [myasset defaultRepresentation];
 CGImageRef iref = [rep fullResolutionImage];

 if (iref){

         dispatch_async(dispatch_get_main_queue(), ^{
             UIImage *myImage = [UIImage imageWithCGImage:iref scale:[rep scale] orientation:(UIImageOrientation)[rep orientation]];
             [fileImage addObject:myImage];
             //binding ur UI elements in main queue for fast execution
             //self.imageView.image = myImage;
         });

         }      
};      

ALAssetsLibraryAccessFailureBlock failureblock  = ^(NSError *myerror){

     //failed to get image.
};                          

ALAssetsLibrary* assetslibrary = [[[ALAssetsLibrary alloc] init] autorelease];
[assetslibrary assetForURL:[filePath objectAtIndex:0] resultBlock:resultblock failureBlock:failureblock]; 
```

**注意：**确保您的**[filePath objectAtIndex:0]**将是一个`NSUrl`对象。如果不是，请将其转换为`NSUrl`。

例子：

```
ALAssetsLibrary* assetslibrary = [[[ALAssetsLibrary alloc] init] autorelease];

NSURL myAssetUrl = [NSURL URLWithString:[filePath objectAtIndex:0]];

assetslibrary assetForURL:myAssetUrl resultBlock:resultblock failureBlock:failureblock]; 
```

# ios - NSPredicate 检查 NSArray 如果对象具有多个 ID 之一

> ID：11721763
> 
> 赞同：7
> 
> 时间：2012-07-30T12:38:25.747
> 
> 标签：ios, core-data, nspredicate

解释起来有点困难，但我正在尝试使用 NSPredicate 通过 ids 过滤具有自定义 NSManagedObject 的数组。我有一个可以发送更新、删除或添加新对象的服务器，我需要控制 JSON 文件中的这些对象是否已经存在，如果存在则更新它们，如果不存在则插入核心数据。

我现在正在使用这个谓词：

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"storeId != %@", [jsonFile valueForKey:@"Id"]; 
```

其中 jsonFile 包含未解析的 Store 对象。但是有了这个谓词，它会给我一个巨大的数组，因为一个 id 将不同于某些 storeId，而下一个 id 将匹配。

Json 文件是这样的：

```
 "Stores":[{
          "id":1,
          "name":"Spar",
          "city":"London"
          }
          {
           "id":2,
           "name":"WalMart",
           "city":"Chicago"
       }]; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-30T13:41:33.537

我不确定我是否正确理解您要达到的目标，但也许您可以使用以下内容：

```
NSArray *jsonFile = /* your array of dictionaries */;
NSArray *idList = [jsonFile valueForKey:@"id"]; // array of "id" numbers
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"NOT(storeId IN %@)", idList]; 
```

这将给出所有具有`storeId`不等于 `jsonFile`数组中任何 id 的托管对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:08:32.747

谓词的语法可能是关闭的 - 其他人可能会建议修复 - 但如果你有一个数组，为什么不使用

```
- (NSUInteger)indexOfObjectPassingTest:(BOOL (^)(id obj, NSUInteger idx, BOOL *stop))predicate 
```

因为它更容易：

```
NSInteger textID = ... // you set this
NSInteger idx = [myArray indexOfObjectPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop)) 
{
NSInteger objIdx = [obj objectForKey:@"id"] integerValue]; // integerValue works for both NSNUmbers and NSStrings
if(objIdx == testID) {
    return YES;
    *stop = YES;
}
} 
```

# assembly - 为什么 Clang 在将 double 转换为 ulonglong 时会调用 %eip+1？

> ID：11721765
> 
> 赞同：4
> 
> 时间：2012-07-30T12:38:40.813
> 
> 标签：assembly, x86, clang, long-integer, abi

结果存储在哪里？我读到它通常是 %eax，但是 64 位 uint 太宽了。我也无法在堆栈中找到结果。

```
% clang --version
Debian clang version 3.1-3eudoxos1 (branches/release_31) (based on LLVM 3.1)
Target: i386-pc-linux-gnu
Thread model: posix 
```

Clang 输入（已更新，签名现在对应于名称）：

```
% cat stackoverflow.c                                  
unsigned long long double2ulonglong(double a) {
    return a;
} 
```

编译和反汇编（已更新，添加了重定位信息。现在使用 fixuns* *d* *fdi。）：

```
% clang -g -Os -c stackoverflow.c && objdump -d -r stackoverflow.o
00000000 <double2ulonglong>:
   0:   83 ec 0c                sub    $0xc,%esp
   3:   f2 0f 10 44 24 10       movsd  0x10(%esp),%xmm0
   9:   f2 0f 11 04 24          movsd  %xmm0,(%esp)
   e:   e8 fc ff ff ff          call   f <double2ulonglong+0xf>
            f: R_386_PC32   __fixunsdfdi
  13:   83 c4 0c                add    $0xc,%esp
  16:   c3                      ret 
```

主要程序（组装）：

```
% cat main.s                                                   
.data
    a: .double 6.283045
.text
.globl main
main:
    pushl a+4
    pushl a
    call double2ulonglong
    addl $8, %esp
    ret 
```

集会：

```
% as -g -o main.o -c main.s 
```

链接：

```
% gcc -g -o executableelf stackoverflow.o main.o 
```

调试：

```
% gdb executableelf                             
GNU gdb (Ubuntu/Linaro 7.4-2012.04-0ubuntu2) 7.4-2012.04
Reading symbols from /home/janus/asmplay/conv/executableelf...done.
(gdb) start
Temporary breakpoint 1 at 0x80483cc: file main.s, line 6.
Starting program: /home/janus/asmplay/conv/executableelf 

Temporary breakpoint 1, main () at main.s:6
6       pushl a+4
(gdb) list
1   .data
2       a: .double 6.283045
3   .text
4   .globl main
5   main:
6       pushl a+4
7       pushl a
8       call double2ulonglong
9       addl $8, %esp
10      ret
(gdb) break 8
Breakpoint 2 at 0x80483d8: file main.s, line 8.
(gdb) c
Continuing.

Breakpoint 2, main () at main.s:8
8       call double2ulonglong
(gdb) stepi
0x080483b4 in double2ulonglong (a=-1.9971046447753908)
(gdb) disass
Dump of assembler code for function double2ulonglong:
=> 0x080483b4 <+0>: sub    $0xc,%esp
   0x080483b7 <+3>: movsd  0x10(%esp),%xmm0
   0x080483bd <+9>: movsd  %xmm0,(%esp)
   0x080483c2 <+14>:    call   0x80483f0 <__fixunsdfdi>
   0x080483c7 <+19>:    add    $0xc,%esp
   0x080483ca <+22>:    ret    
End of assembler dump.
(gdb) break *($eip+19)
Breakpoint 3 at 0x80483c7: file stackoverflow.c, line 2.
(gdb) c
Continuing.

Breakpoint 3, 0x080483c7 in double2ulonglong (a=6.2830450000000004) at stackoverflow.c:2
2       return a;
(gdb) x/16x $esp
0xbffff374: 0x8c692f6f  0x401921d6  0xb7fb9ff4  0x080483dd
0xbffff384: 0x8c692f6f  0x401921d6  0xb7e324d3  0x00000001
0xbffff394: 0xbffff424  0xbffff42c  0xb7fdc858  0x00000000
0xbffff3a4: 0xbffff41c  0xbffff42c  0x00000000  0x0804820c
(gdb) 
```

**编辑**：修复 C 函数中的签名，链接后显示反汇编。

剩下的问题：

*   为什么 unsigned int 6 在堆栈中不存在？
    *   答案：它在 %eax 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:38:54.533

您正在查看尚未链接的目标文件的内容，因此尚未解析外部引用。该函数可能正在调用一些编译器帮助程序，并且该调用将在链接时解决。如果将`-r`开关添加到 objdump，它将在调用站点打印重定位信息。

至于结果，i386 的约定是使用`edx:eax`pair 来返回 64 位整数。

# ios - iOS，在调整按钮编程大小后，它失去了出路？不可点击？

> ID：11721768
> 
> 赞同：2
> 
> 时间：2012-07-30T12:38:47.247
> 
> 标签：ios, xcode, cocoa-touch, view

当用户点击升级按钮并成功购买我的应用程序时，我移动了一些控件的位置。

像这样

```
CGRect f2 = AcountName.frame; 
f2.origin.y = 79; 
f2.size.height = 21; 
AcountName.frame = f2; 
```

然而，AccountName 是一个按钮，不能再被点击。但是当视图重新加载时它很好。

听起来它失去了它的出口。

移动/调整大小后是否需要刷新按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:45:05.230

我不完全知道为什么会这样，但这为我解决了。

```
[self.view bringSubviewToFront:AccountName]; 
```

# linux - 保护虚拟内存中的页面

> ID：11721776
> 
> 赞同：0
> 
> 时间：2012-07-30T12:39:20.727
> 
> 标签：linux, operating-system

我在一个教程中读到，虽然在 linux 中没有使用***英特尔分段，但在******代码段选择器***和***数据段选择器***中有保护或模式信息。在虚拟内存教程中，我阅读了关于使用页表保护页面的信息，具体取决于它们的模式正在运行。

我想知道这两种机制是如何相关的？

在什么阶段将页面上的保护信息添加到页表中？CPU是否检查代码段选择器并根据它设置页表标志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:32:14.217

尽管Linux（几乎）不使用**分段**，但因为您无法在 x86 上将其关闭，**分段**只是通过*受保护的平面内存模型*绕过。

实际上**分段**是强制性的，您在制作内核时确实必须设置代码和数据段选择器，因为这些段选择器设置了当前的执行特权级别（CPL）：基本上是*ring 0*（主管模式）或*ring 3*（用户区）。选择器（寄存器 CS、DS、...）承载 GDT 中的偏移量。根据此偏移指向的描述符，系统以给定的特权级别运行，有关使用段的更多信息，请参见[Intel 手册 3A，第 3.2.2 章。](http://download.intel.com/products/processor/manual/253668.pdf?bcsi_scan_46DC433717929B81=0&bcsi_scan_filename=253668.pdf)

正如您所看到的，使用*受保护的平面内存模型*，没有直接检查访问内存的属性（无论是代码还是数据）。你猜对了！MMU（我宁愿说**paging**）承诺根据系统的 CPL 和页面的 U/S 属性检查访问。

由内核（因此在*ring 0*中执行）来设置页面目录以及相关页面的属性。

# javascript - 如何从带有过渡的代码中导航 KendoUI 页面？

> ID：11721781
> 
> 赞同：2
> 
> 时间：2012-07-30T12:39:32.893
> 
> 标签：javascript, kendo-ui

例如，我想使用幻灯片从代码导航到某个地方：右转换。

```
app.navigate('#some_page') 
```

该代码使用默认页面转换。如何更改代码中的自定义转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:09:07.353

关于什么：

```
app.navigate(
    '#some_page',
    'slide:right' //or whichever transition you like
); 
```

干杯...

// 编辑：将对象更改为参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:50:08.230

这是您可能正在搜索的文档。

[http://docs.kendoui.c​​om/getting-started/mobile/application/overview#reverse-transition](http://docs.kendoui.com/getting-started/mobile/application/overview#reverse-transition)

# android - 加速 SQLite 数据库 android

> ID：11721788
> 
> 赞同：2
> 
> 时间：2012-07-30T12:40:06.840
> 
> 标签：android, sqlite

我创建了一个对象数据库。这些对象中的每一个都包含两个`strings`和两个`bitmaps`。当我`getAllContacts()`调用我的数据库时，加载需要很长时间。对我来说这不是问题，但对于最终用户来说，这会很烦人。当我加载一个对象时，我将此选项设置为我的位图：

```
 BitmapFactory.Options options=new BitmapFactory.Options();
  options.inSampleSize = 8; 
```

这会将其缩小`Bitmaps`到原始高度和宽度的 1/8。但是，加载 50 条记录并将其填充到`ListView`. 有什么方法可以检查我尝试加载的对象是否在内存中，也称为`paging`？或者，当用户按下`ListView`?中的一项时，我可以加载位图。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:52:30.250

您设置了样本大小，但它仍在读取（我假设）大图像。为什么不将您的位图设置为已经很小，然后您可以在不应用比例因子的情况下读取小图像？

我在自己的代码中有一个 listView 做类似的事情，它非常慢，直到我编写代码来缩小每个创建的新图像，然后总是只处理小图像。代码从此过着幸福的生活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T06:41:38.913

**解决方案：**

所以，最后我找到了解决我的问题的方法。不是`Bitmaps`在我`getAllContact()`打电话时得到所有的，而是在用户按下一行时加载位图`ListView`这是`setOnClickListener`我在 CustomAdapter 中的方法中所做的`ListView`

```
String PCN = cases.get(position).getCaseNumber(); 
int tempPCN = Integer.valueOf(PCN); 
tempBitMapArray = dbHandler.getFinger(tempPCN); 

Bitmap left = tempBitMapArray[0]; 
Bitmap right = tempBitMapArray[1]; 

ByteArrayOutputStream bs1 = new ByteArrayOutputStream();
left.compress(Bitmap.CompressFormat.PNG, 100, bs1);

ByteArrayOutputStream bs2 = new ByteArrayOutputStream();
right.compress(Bitmap.CompressFormat.PNG, 100, bs2); 
```

和`getFinger(...)`方法：

```
 public Bitmap[] getFinger(int pcn) {

    Bitmap[] fingers = new Bitmap[2]; 

    String SQLQUERY = "SELECT " + RIGHTFINGER + ", " + LEFTFINGER +" FROM " + TABLE_CASES  + " WHERE " + KEY_ID + "=" + pcn + ";"; 

    SQLiteDatabase db = this.getWritableDatabase(); 

    Cursor cursor = db.rawQuery(SQLQUERY, null); 
    BitmapFactory.Options options=new BitmapFactory.Options();
        options.inSampleSize = 2;
      if (cursor.moveToFirst()) {
            do {

                byte[] blob1 = cursor.getBlob(cursor.getColumnIndexOrThrow("leftFinger"));
                Bitmap bmp1 = BitmapFactory.decodeByteArray(blob1, 0, blob1.length, options);

                byte[] blob2 = cursor.getBlob(cursor.getColumnIndexOrThrow("rightFinger")); 
                Bitmap bmp2 = BitmapFactory.decodeByteArray(blob2, 0, blob2.length, options);

                fingers[0] = bmp1; 
                fingers[1] = bmp2;
                return fingers;

               } while(cursor.moveToNext());
      }
      return null; 
} 
```

我希望这个例子能给其他人一个正确的方向。

# javascript - JS：未定义值和未定义类型，以及空值和空类型之间的区别？

> ID：11721789
> 
> 赞同：3
> 
> 时间：2012-07-30T12:40:08.057
> 
> 标签：javascript, ecmascript-5

有人会解释未定义值和未定义类型之间的区别，同样对于空值和空类型也是如此吗？

奖励：为什么 boolean、string 和 number 都有值、类型和对象，而 null 和 undefined 只有值和类型（没有对象）？如果“一切都是对象”，那么人们会假设我们有所有可用值的对象，是吗？我的 Infinity 和 NaN 对象在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:51:16.330

`null`并且`undefined`是价值观。巧合的是（或只是一个明智的选择），它们的类型`null`分别`undefined`是规范中定义的^(`null` [value](http://es5.github.com/#x4.3.11) / [type](http://es5.github.com/#x4.3.12)，`undefined` [value](http://es5.github.com/#x4.3.9) / [type](http://es5.github.com/#x4.3.10))。这也可以通过使用`typeof`运算符来显示：

```
typeof undefined; // "undefined"
typeof null     ; // "null" (in ES6) and "object" in <=ES5 (bug) 
```

值与类型相关联，类型表示值的“种类”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T13:40:49.587

回答*“值和类型之间有什么区别？”这个问题。*：

将**类型**视为某种*类别*，而**值**是该类别中的具体*实例*。

例如，我们有类型`String`，具体的值是`"foo"`. type 可以有许多不同的值，但是和类型`String`只有一个可能的值，分别是和。`Null``Undefined``null``undefined`

[规范的第 4.3 节](http://es5.github.com/#x4.3)对 IMO 最有帮助。例如，您可以在此处找到有关字符串的信息以及值、类型和对象之间的区别。

> **4.3.16 字符串值**
> *原始值*是零个或多个 16 位无符号整数的有限有序序列。
> 
> 注意：字符串值是字符串类型的成员。序列中的每个整数值通常代表一个 16 位的 UTF-16 文本单元。但是，ECMAScript 对这些值没有任何限制或要求，只是它们必须是 16 位无符号整数。
> 
> **4.3.17 字符串类型**
> *集合*所有可能的字符串值。
> 
> **4.3.18 String object**
> *Object 类型的成员，*它是标准内置`String`构造函数的一个实例。
> 
> 注意： String 对象是通过`String`在 new 表达式中使用构造函数创建的，提供 String 值作为参数。结果对象有一个内部属性，其值为 String 值。通过将 String 构造函数作为函数调用 (15.5.1)，可以将 String 对象强制转换为 String 值。

`null`和类似`undefined`，尽管它们没有等价的对象。为什么？为此，您必须询问定义该语言的人；）

> 如果“一切都是对象”，那么人们会假设我们有所有可用值的对象，是吗？

更正确的说法是*“几乎一切都是对象”*，原始值显然不是对象，但它们中的*大多数*都有一个等效的对象（实际上不应该使用），而对于其他我们不关心的。事实上，JavaScript 主要是面向对象的。

> 我的 Infinity 和 NaN 对象在哪里？

`Infinity`并且`NaN`是type的**值**`Number`，因此您可以创建`Number`对象，如下所示：

```
new Number(1/0) // Infinity
new Number("a") // NaN 
```

但无论如何你很少使用`Number`对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:50:44.143

`typeof null === "object"`

只是为了排除这一点。`null`被视为一个对象。并非 ECMAscript 中的所有内容都是对象。“另一面”就是所谓的“原始价值”。简单地说，原始值是不是由任何*Object 构造函数*创建的普通值。例如：

```
var prim = 23;

prim.foo = true;
console.log( 'prim is: ', prim, 'prim.foo is: ', prim.foo );  // "prim is 23, prim.foo is: undefined" 
```

另一方面

```
var prim = new Number(23);

prim.foo = true;
console.log( 'prim is: ', +prim, 'prim.foo is: ', prim.foo );  // "prim is 23, prim.foo is: true" 
```

请注意，我`prim`使用加号运算符明确地将第二个片段转换为。当我们对这样一个“原始值”进行操作时，ECMAscript（或更准确地说，它的引擎）无论如何都会在内部将该值转换为其*对象表示。*所以你的观点实际上非常正确，“一切都是对象”。

* * *

`undefined`是一个定义的值（即使听起来很傻）：

```
'undefined' in window // true 
```

while`null`是一种类型，它只是语言的一部分。

# android - 在Android中需要下拉刷新和上拉加载更多ListView

> ID：11721795
> 
> 赞同：3
> 
> 时间：2012-07-30T12:40:14.220
> 
> 标签：android, pull-to-refresh

我的应用程序需要从服务器批量获取数据。所以我不能把它们放在一起并使用分页概念。由于我服务器上的数据经常更改，我想在数据更改后立即更新它。所以我在我的应用程序中实现了 Pull To Refresh Listview，但是如何在 listview 中加载越来越多的项目。我没有找到任何带有 Pull 的列表视图来刷新和上拉以在 Android 中加载更多功能，就像 Iphone 一样。截至目前，我正在使用 Endless Scroll 侦听器概念，但它无法满足我的要求。将按钮放在页脚是不可能的，因为我已经把按钮放在那里，因为我有其他要求。

# java - Java重构异常处理最佳实践

> ID：11721801
> 
> 赞同：2
> 
> 时间：2012-07-30T12:40:26.460
> 
> 标签：java, exception-handling, refactoring

**描述：** 人们总是告诉我，人们总是检查你的所有参数，这会导致大量的 if 检查和 try catch。

**问题：** 在下面的代码中，我清理了代码，以便处理异常处理的唯一方法位于公开公开的根方法中，而不是在重构的私有辅助方法中。这种做法好吗？

我没有处理更接近它们可能发生的方法的异常，但代码更清晰。

**代码注释：**

*   方法 validateInputs() 不包括在内。
*   ParameterObject a 派生自通过“someCode”创建的参数，它代表我想要传递的参数。每当我需要超过 2 个参数时，我都会将这些参数重构为参数对象。

代码：

```
public class UnderTest {

    public UnderTest() {}

    public boolean runWork(  String someValue ) throws CustomException
    {
        try
        {
            validateInputs();
            // someCode
            .
            .
            processWork(  ParameterObject a );
        }
        catch( Exception e )
        {
            logError(e);
        }
    }

    private void processWork( ParameterObject a  )
    {
        Operation1( ParameterObject a  );
        Operation2( ParameterObject a  );
    }

    private void Operation1( ParameterObject a  )
    {
        // someCode
    }

    private void Operation2( ParameterObject a  )
    {
        // someCode
    }

    private void logError(Exception e)
    {    
        throw new CustomException(e,"Message");
    }        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:04:15.083

我会选择两者兼而有之。验证输入总是一个好主意，像[Apache commons-lang](http://commons.apache.org/lang/ "公共语言") `Validate`类这样的库可以使这更容易。一般来说，不正确的参数应该会导致*运行时*异常（通常是`IllegalArgumentException`or `NullPointerException`）。您对私有方法进行输入验证的深度取决于您的喜好。请记住，越早发现无效参数，错误消息就越有帮助。

当然，这假设您很好地记录了面向公众的 API（理想情况下也是您的内部方法）。明确什么对您的输入有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:21:10.147

当他们通过一些公共 API 进入课程时，我倾向于检查参数。在私有方法中，我只通过断言检查或根本不检查。这意味着我更信任自己的班级。

# android - 应用程序覆盖后保存sqlite数据库android

> ID：11721803
> 
> 赞同：0
> 
> 时间：2012-07-30T12:40:29.523
> 
> 标签：android, database, sqlite, restore

我的问题是我想在我的设备上覆盖同一个应用程序后恢复我的应用程序的 sqlite 数据库。我不喜欢在我的应用程序启动时一次又一次地添加设置。

那么在android中是否可以将数据库保存在我可以再次恢复它的地方？

我在 Google 和 SO 上搜索了超过几个小时，但找不到任何解决方案。

编辑：它不是一个固定的数据库。所以我不能将它存储在资产文件夹中。它可由用户编辑，但默认情况下它应该带有最后编辑的值（应用程序覆盖之前的值）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:02:57.123

这个方法我觉得很有帮助：

```
public static void movedb(File srcdb, File destdb)
{
    try 
    {
        if (Environment.getExternalStorageDirectory().canWrite()) 
        {                 
            if (srcdb.exists()) 
            {
                FileChannel src = new FileInputStream(srcdb).getChannel();
                FileChannel dst = new FileOutputStream(destdb).getChannel();
                dst.transferFrom(src, 0, src.size());
                src.close();
                dst.close();                    
            }
            else
            {
                //ERROR: "Database file references are incorrect"                    
            }
        }
        else
        {
            //ERROR: "Cannot write to file"
        }
    }
    catch (Exception e) 
    {
        //ERROR: e.getMessage()
    }
} 
```

然后我就打电话

```
movedb(this, new File(<context>.getDatabasePath("...your DB name...")), new File("... your location ...")); 
```

备份，然后恢复：

```
movedb(this, new File("... your location ..."), new File(<context>.getDatabasePath("...your DB name..."))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-28T23:42:20.043

我正在使用 ORMLite，除了将数据库存储在外部公共目录中之外，在将文件恢复到数据库目录后，我必须重新实例化`DatabaseHelper`单例并创建一个新的。

这是我的版本，为了简单起见，省略了每个 try/catch 块：

```
public boolean restoreBackup(Context context){

    String databasePath = "data/data/my.package.name/databases/myDatabase.sqlite";
    String backUpPath = context.getDatabaseDir("myDatabase.sqlite");

    // Copies back-up to database directory
    new File(databasePath).delete();
    FileInputStream streemToBackUp = new FileInputStream(new File(backUpPath));
    OutputStream streamToDatabaseFile = new FileOutputStream(databasePath);

    byte[] buffer = new byte[1024];
    int length;
    while ((length = streamToBackUp.read(buffer)) > 0) {
        streamToDatabaseFile.write(buffer, 0, length);
    }
    streamToDatabaseFile.flush();
    streamToDatabaseFile.close();
    streamToBackUp.close();

    // Re-instantiate DatabasHelper singleton
    DatabaseHelper.closeHelper();
} 
```

的正文`closeHelper()`如下：

```
public static void closeHelper() {
    helper.close();
}

@Override
public void close() {
    super.close();
    myDao = null; // Set to null every day you have
    helper = null; // Set to null the singleton instance of the helper
} 
```

只要您不使用*OpenHelperManager*类来实例化帮助程序，这将起作用，并且总是`getHelper()`在您需要数据库而不是存储返回的实例时使用。

# java - java中的重质数

> ID：11721805
> 
> 赞同：2
> 
> 时间：2012-07-30T12:40:53.130
> 
> 标签：java

1.  素数重数定义为多于一对素数之和。回想一下，素数是一个大于 1 的数，其唯一的除数是 1 和它自己。例如，16 是重质数，因为 16=3+13 和 5+11（请注意，3、5、11 和 13 都是质数）。24 是素数，因为 24 = 5+19、7+17 和 11+13。但是，8 不是重质数，因为 8 = 3+5 但没有其他素数对等于 8。编写一个名为 isPrimeHeavy 的函数，如果它的参数是重质数，则返回 1，否则返回 0。函数签名是 int isPrimeHeavy ( int n) 你可以假设一个名为 isPrime 的函数已经存在，如果它的参数是素数则返回 1。您可以调用此函数，但不必编写它。

我这样做了，但它不能返回一个重质数......只返回一个质数......

```
public class Prime {

    public static boolean isPrimeHeavy(int n) {
        if (n <= 1) {
            return false;
        }
        if (n == 2) {
            return true;
        }
        for (int i = 2; i <= Math.sqrt(n) + 1; i++) {
            if (n % i == 0) {
                return false;
            }
        }
        return true;
    }
    public static boolean isPrimeHeavy(int n) {
        if (n <= 1) {
            return false;
        }
        if (n == 2) {
            return true;
        }
        if (n % 2 == 0) {
            return false;
        }
        for (int i = 3; i <= Math.sqrt(n) + 1; i = i + 2) {
            if (n % i == 0) {
                return false;
            }
        }
        return true;
    }
}

public class PrimeTest {

    public PrimeTest() {
    }

    @Test
    public void testIsPrime() throws IllegalArgumentException, IllegalAccessException, InvocationTargetException {

        Prime prime = new Prime();
        TreeMap<Long, String> methodMap = new TreeMap<Long, String>();

        for (Method method : Prime.class.getDeclaredMethods()) {

            long startTime = System.currentTimeMillis();

            int primeCount = 0;
            for (int i = 0; i < 1000000; i++) {
                if ((Boolean) method.invoke(prime, i)) {
                    primeCount++;
                }
            }

            long endTime = System.currentTimeMillis();

            Assert.assertEquals(method.getName() + " failed ", 78498, primeCount);
            methodMap.put(endTime - startTime, method.getName());
        }

        for (Entry<Long, String> entry : methodMap.entrySet()) {
            System.out.println(entry.getValue() + " " + entry.getKey() + " Milli seconds ");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T12:46:26.570

您可以使用单个循环来尝试所有可能的第一个值，然后您可以计算第二个，当您发现不止一对时，返回 1，否则返回 0。

我给了你这个提示，因为它实际上是数学而不是编程。你会在 Project Euler 中发现类似的问题。恕我直言，除非您被聘为数学角色，否则不应期望您知道如何解决数学问题，但是如果您是专业开发人员，则应该能够编写代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:09:54.210

```
if((argument % 2 == 0 && argument > 12) || argument == 10) {
    return 1;
} else {
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:14:20.773

```
public class Prime {

    public static boolean isPrimeHeavy(int n) {
        if (n % 2 != 0) {
            return false;
        }
        int found = 0;
        for (int i = n-3; i >= (n/2); i -= 2) {
            if (isPrime(i) && isPrime(n - i)) {
                found++;
                if (found == 2)
                    return true;
            }
        }
        return false;
    }
} 
```

# c# - 我想在访问栏中显示图像但无法访问

> ID：11721807
> 
> 赞同：0
> 
> 时间：2012-07-30T12:40:55.157
> 
> 标签：c#

使用 C#，我想在 Access 列中显示图像但无法访问。

```
for (int i = 0; i <= 5; i++)
{
    if (myQuantity[i]!=null && myQuantity[i].Length>0)
    {
        row = dt.NewRow();
        row["Name"] = myName[i];
        row["Quantity"] = myQuantity[i];
        row["Price"] = myPrice[i];

        c = Convert.ToInt32(myQuantity[i]);

        int price = Convert.ToInt32(myPrice[i]) * c;
        row["Amount"] = price;
        row["Action"]=  " <img src='Images/cross.png'  />";
        dt.Rows.Add(row);
    }
}

GridView1.DataSource = dt;
GridView1.DataBind();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:53:03.803

您好 Fahad，您可以尝试使用此代码

1.  带字节存储

    ```
    //Build Column
    DataColumn column = new DataColumn("MyImage"); 
    column.DataType = System.Type.GetType("System.Byte[]"); //Type byte[] to store image bytes.
    column.AllowDBNull = true;
    column.Caption = "My Image";

    //Add Column
    yourDataTable.Columns.Add(column); 

    //Build row
    DataRow row = table.NewRow();
    row["MyImage"] = <Image byte array>;
    yourDataTable.Rows.Add(row); 
    ```

2.  或者使用路径，您可以在 GridView 中添加控件，并添加将控件与图像上的路径绑定。

    asp:ImageButton id="ImageButton" runat="server" ImageUrl="<%# Container.DataItem("pictues") %>/>

# asp.net - asp.net如何在gridview上设置条件

> ID：11721811
> 
> 赞同：2
> 
> 时间：2012-07-30T12:41:06.693
> 
> 标签：asp.net, gridview, conditional-statements

所以我已经将一个网格连接到一个数据库，其中我的数据库只包含 1、2 和 3 的值。我想要它，这样每个有 1 的框都是绿色的，2 是黄色的，3 是红色的。

我的问题是我应该把调节代码放在哪里，我应该用什么语言来做？

以下信息只是我的网格视图和我链接到的数据。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
    DataSourceID="SqlDataSource1"
    >
    <Columns>
        <asp:BoundField DataField="Line" HeaderText="Line"  ItemStyle-Width="75" ItemStyle-HorizontalAlign="Right" ItemStyle-BackColor="#FF6699" />
        <asp:BoundField DataField="Jan" HeaderText="Jan"  ItemStyle-Width="75" ItemStyle-HorizontalAlign="Right" />
        <asp:BoundField DataField="Feb" HeaderText="Feb"  ItemStyle-Width="75" ItemStyle-HorizontalAlign="Right" />
        <asp:BoundField DataField="Mar" HeaderText="Mar"  ItemStyle-Width="75" ItemStyle-HorizontalAlign="Right" />
        <asp:BoundField DataField="Apr" HeaderText="Apr"  ItemStyle-Width="75" ItemStyle-HorizontalAlign="Right" />
        <asp:BoundField DataField="May" HeaderText="May"  ItemStyle-Width="75" ItemStyle-HorizontalAlign="Right" />
        <asp:BoundField DataField="Jun" HeaderText="Jun"  ItemStyle-Width="75" ItemStyle-HorizontalAlign="Right" />
        <asp:BoundField DataField="Jul" HeaderText="Jul"  ItemStyle-Width="75" ItemStyle-HorizontalAlign="Right" />
        <asp:BoundField DataField="Aug" HeaderText="Aug"  ItemStyle-Width="75" ItemStyle-HorizontalAlign="Right" />
        <asp:BoundField DataField="Sep" HeaderText="Sep"  ItemStyle-Width="75" ItemStyle-HorizontalAlign="Right" />
        <asp:BoundField DataField="Oct" HeaderText="Oct"  ItemStyle-Width="75" ItemStyle-HorizontalAlign="Right" />
        <asp:BoundField DataField="Nov" HeaderText="Nov"  ItemStyle-Width="75" ItemStyle-HorizontalAlign="Right" />
        <asp:BoundField DataField="Dec" HeaderText="Dec"  ItemStyle-Width="75" ItemStyle-HorizontalAlign="Right" />

    </Columns>
</asp:GridView>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:dashboardConnectionString %>" 
SelectCommand="SELECT 
        line AS Line, 
        [2012-01-31] AS 'Jan', 
        [2012-02-29] AS 'Feb', 
        [2012-03-31] AS 'Mar', 
        [2012-04-30] AS 'Apr', 
        [2012-05-31] AS 'May', 
        [2012-06-30] AS 'Jun', 
        [2012-07-31] AS 'Jul', 
        [2012-08-31] AS 'Aug', 
        [2012-09-30] AS 'Sep', 
        [2012-10-31] AS 'Oct', 
        [2012-11-30] AS 'Nov', 
        [2012-12-31] AS 'Dec'
    FROM
    (Select line, report_month, state FROM [Monthly_State]) AS sourcetable
    PIVOT
    (
    MAX(state) 
    FOR report_month IN ([2012-01-31], [2012-02-29], [2012-03-31], [2012-04-30], [2012-05-31], [2012-06-30], [2012-07-31], [2012-08-31], [2012-09-30], [2012-10-31], [2012-11-30], [2012-12-31])
    ) as pivottable; ">

    </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:49:08.857

由于不能在 CssClass 属性中使用数据绑定表达式，因此必须使用后面的代码。首先，您必须将列转换为模板。代替：

```
<asp:BoundField DataField="Jan" HeaderText="Jan"  ItemStyle-Width="75" ItemStyle-HorizontalAlign="Right" /> 
```

写：

```
<asp:TemplateField HeaderText="Jan">
   <ItemTemplate>
      <asp:Label ID="lblJan" runat="server" Text="<%# Eval("Jan") %>" />
   </ItemTemplate>
</asp:TemplateField> 
```

然后您可以使用 RowDataBound 找到您的控件`e.Row.FindControl("lblJan")`并根据其值为其设置 css 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:47:54.723

在网格视图的行数据绑定事件中，您必须放置条件。

```
void GridView1_RowDataBound(Object sender, GridViewRowEventArgs e)
{
   if(e.Row.RowType == DataControlRowType.DataRow)
   {
    // example 
    // You have to give the correct index ( starts from 0 ). Cell[0] will be the first column in your grid
       if(  e.Row.Cells[0].Text = "1" )
       {
           e.Row.Cells[0].BackColor = System.Drawing.Color.Green;
       }
       if(  e.Row.Cells[1].Text = "2" )
       {
           e.Row.Cells[1].BackColor = System.Drawing.Color.Yellow;
       }
       if(  e.Row.Cells[2].Text = "3" )
       {
           e.Row.Cells[3].BackColor = System.Drawing.Color.Red;
       }
   // In the same way do for other columns

   }

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:34:38.563

我会通过使用模板字段并在后面的代码中声明一个公共方法来做到这一点，如下所示

`<asp:TemplateField> <ItemTemplate> <asp:Label ID="cddasf" runat="server" CssClass='<%# GetClass(Eval("colum name")) %>'></asp:Label> </ItemTemplate> </asp:TemplateField>`

在后面的代码中

```
public  string GetClass(object g)
{ 
```

// 处理值并返回你想要的css类名

```
} 
```

# c# - C#：获取picturebox onclick的文件路径

> ID：11721812
> 
> 赞同：1
> 
> 时间：2012-07-30T12:41:14.733
> 
> 标签：c#, winforms, user-interface, user-controls, picturebox

我创建了一个循环文件​​夹并检索每个图像文件并在表单上绘制图片框的函数。这是功能：

```
 private void Create_Controls(string Img_path)
    {
        PictureBox p = new PictureBox();
        p.Size = new Size(138, 100);
        p.Location = new Point(6, 6);
        p.BackgroundImage = Image.FromFile(Img_path);
        p.BackgroundImageLayout = ImageLayout.Stretch;

        this.Controls.Add(p);
    } 
```

所以我需要做的是：每当我点击表单上的任何图片框时，都会弹出一条带有图像文件路径的消息。

所以我想添加一个自定义事件：

```
p.Click += delegate { Pop_Up(); }; 
```

和

```
 private void Pop_Up()
    {
        /* POP UP MESSAGE WITH Picturebox image file path*/
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T12:44:30.290

您需要使用 PictureBox 的属性[ImageLocation](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.imagelocation)。该属性获取或设置要在 PictureBox 中显示的图像的路径或 URL。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T12:51:32.833

只需执行以下操作：

```
p.Click += new EventHandler(Pop_Up);

...

private void Pop_Up(object sender, EventArgs e)
{
  var pb = sender as PictureBox;
  if(pb != null)
    MessageBox.Show(pb.ImageLocation);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T12:45:28.740

您可以`Tag`为此使用属性。

像这样的东西。

```
private void Create_Controls(string Img_path)
{
  PictureBox p = new PictureBox();
  p.Size = new Size(138, 100);
  p.Location = new Point(6, 6);
  p.Tag  = Img_path;
  p.BackgroundImage = Image.FromFile(Img_path);
  p.BackgroundImageLayout = ImageLayout.Stretch;

  this.Controls.Add(p);
} 
```

* * *

```
private void Pop_Up()
{
   MessageBox.Show(p.Tag);
} 
```

有关此的更多信息，请[点击此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.tag)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T12:46:54.080

然后按照 HatSoft 所说的，改变你的`Pop_up()`方法，比如：

```
 private void Pop_Up(object sender, EventArgs e)
   {
       MessageBox.Show(((PictureBox)sender).ImageLocation);
   } 
```

但也许更优雅一点，并检查它是否确实是`PictureBox`等。

# django - Django 获取视图中的静态文件 URL

> ID：11721818
> 
> 赞同：153
> 
> 时间：2012-07-30T12:41:41.960
> 
> 标签：django, django-views, django-staticfiles

我正在使用 reportlab pdfgen 创建 PDF。在 PDF 中有一个由`drawImage`. 为此，我需要图像的 URL 或视图中图像的路径。我设法构建了 URL，但是如何获取图像的本地路径？

我如何获得网址：

```
prefix = 'https://' if request.is_secure() else 'http://'
image_url = prefix + request.get_host() + STATIC_URL + "images/logo_80.png" 
```

* * *

## 回答 #1

> 赞同：306
> 
> 时间：2013-07-19T05:18:26.267

```
# Older Django <3.0 (also deprecated in 2.0):
from django.contrib.staticfiles.templatetags.staticfiles import static

# Django 3.0+
from django.templatetags.static import static

url = static('x.jpg') 
```

url 现在包含`'/static/x.jpg'`，假设静态路径为`'/static/'`

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2013-10-14T21:33:01.590

编辑：如果您使用的是 Django >=3.0，请参阅[Django get the static files URL in view](https://stackoverflow.com/questions/11721818/django-get-the-static-files-url-in-view/59355195#59355195)。Django 1.X 版本回答了这个问题。

dyve 的回答很好，但是，如果您在 django 项目中使用“缓存存储”并且静态文件的最终 url 路径应该得到“散列”（例如*style.css*中的*style.aaddd9d8d8d7.css*），那么您无法使用. 相反，您必须使用模板标签来获取散列 URL。*`django.templatetags.static.static()``django.contrib.staticfiles`*

 *此外，在使用开发服务器的情况下，此模板标记方法返回非散列 url，因此无论主机是开发还是生产，您都可以使用此代码！:)

```
from django.contrib.staticfiles.templatetags.staticfiles import static

# 'css/style.css' file should exist in static path. otherwise, error will occur 
url = static('css/style.css') 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2019-12-16T10:56:01.433

从 Django 3.0 你应该使用`from django.templatetags.static import static`：

```
from django.templatetags.static import static

...

img_url = static('images/logo_80.png') 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-06-21T19:05:14.480

这是另一种方式！（在 Django 1.6 上测试）

```
from django.contrib.staticfiles.storage import staticfiles_storage
staticfiles_storage.url(path) 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2019-07-22T16:43:36.107

使用默认`static`标签：

```
from django.templatetags.static import static
static('favicon.ico') 
```

中还有另一个标签`django.contrib.staticfiles.templatetags.staticfiles`（如已接受的答案），但在 Django 2.0+ 中已弃用。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-07-26T11:10:07.783

@dyve 的答案在开发服务器中对我不起作用。相反，我用`find`. 这是功能：

```
from django.conf import settings
from django.contrib.staticfiles.finders import find
from django.templatetags.static import static

def get_static(path):
    if settings.DEBUG:
        return find(path)
    else:
        return static(path) 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-05-06T20:45:16.080

如果要获取绝对 url（包括协议、主机和端口），可以使用`request.build_absolute_uri`如下所示的函数：

```
from django.contrib.staticfiles.storage import staticfiles_storage
self.request.build_absolute_uri(staticfiles_storage.url('my-static-image.png'))
# 'http://localhost:8000/static/my-static-image.png' 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-21T05:35:59.907

简而言之，你需要得到

*   `STATIC_URL`
*   `STATIC_ROOT`
*   `urlpatterns`
*   `staticfiles`
*   `templatetags`
*   `url parameters`

一切都在正确的地方，让这个工作。此外，在实时部署中，情况会有所不同，您花费 3 个小时制定的当前设置很可能在您的本地机器上运行，但在服务器上运行。

所以我采用了传统的方式！！

```
app
├── static
│   └── json
│       └── data.json
└── views.py 
```

`views.py`

```
import os

with open(os.path.abspath(os.getcwd()) + '/app/static/json/data.json', 'r') as f:
    pass 
```*

# java - 如何在mongodb中存储数组？

> ID：11721820
> 
> 赞同：1
> 
> 时间：2012-07-30T12:41:48.463
> 
> 标签：java, mongodb

我想使用 java 在 mongoDB 集合中存储一个简单的纬度、经度数组，我正在使用以下代码，但我的“loc”数组始终为空：

```
BasicDBObject doc = new BasicDBObject();
//doc.put("key " , r.getKey());
doc.put("category" , r.getKey());
doc.put("type" , r.getValue());

BasicDBObject latlon = new BasicDBObject();

ArrayList<Float> aLatLong = new ArrayList<Float>();

{

    Float fLat = Float.parseFloat(r.getLatitude());
    Float fLon = Float.parseFloat(r.getLongitude());
    aLatLong.add(fLat);
    aLatLong.add(fLon);

    latlon.put("lat" , fLat);
    latlon.put("lon" , fLon);
}

doc.put( "loc" , aLatLong); 
```

但是当我根本不使用 ArrayList 并尝试将 latlon 存储到“loc”中时，它会向我显示数据，但它不再是数组了。

如何在 mongoDB 中保存一个简单的数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:59:54.447

试试这个

```
BasicDBObject doc = new BasicDBObject();
//doc.put("key " , r.getKey());
doc.put("category" , r.getKey());
doc.put("type" , r.getValue());

java.util.Map<String,Float> latLongMap = new java.util.HashMap<String,Float>();
latLongMap.put("lat" , Float.parseFloat(r.getLatitude());
latLongMap.put("lon" , Float.parseFloat(r.getLongitude());

doc.put( "location" , latLongMap); 
```

这将存储一个经纬度的 json。此外，如果您想将它们存储为数组，这也是可能的，但我建议您将它们存储为这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:46:35.307

您需要做的就是：

```
BasicDBObject doc = new BasicDBObject();

doc.put("category" , r.getKey());
doc.put("type" , r.getValue());

List<Float> aLatLong = new ArrayList<Float>();

Float fLat = Float.parseFloat(r.getLatitude());
Float fLon = Float.parseFloat(r.getLongitude());
aLatLong.add(fLat);
aLatLong.add(fLon);

doc.put( "loc" , aLatLong); 
```

现在使用mongodb的insert方法来保存DBObject。

# java - Java HTTPUrlConnection 返回 500 状态码

> ID：11721821
> 
> 赞同：8
> 
> 时间：2012-07-30T12:41:51.160
> 
> 标签：java, httpurlconnection

我正在尝试使用 HTTPUrlConnection 获取 url，但是我总是得到 500 代码，但是当我尝试从浏览器或使用 curl 访问相同的 url 时，它工作正常！

这是代码

```
try{
    URL url = new URL("theurl"); 
    HttpURLConnection httpcon = (HttpURLConnection) url.openConnection();
    httpcon.setRequestProperty("Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
    httpcon.setRequestProperty("User-Agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:14.0) Gecko/20100101 Firefox/14.0.1");
    System.out.println(httpcon.getHeaderFields());
    }catch (Exception e) {
        System.out.println("exception "+e);
    } 
```

当我打印标题字段时，它会显示 500 代码。当我将 URL 更改为 google.com 之类的其他内容时，它可以正常工作。但我不明白为什么它在这里不起作用，但它在浏览器和 curl 上运行良好。

任何帮助将不胜感激..

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T12:45:52.167

状态码 500 表明 Web 服务器上的代码已崩溃。使用[HttpURLConnection#getErrorStream()](http://docs.oracle.com/javase/6/docs/api/java/net/HttpURLConnection.html#getErrorStream%28%29)来了解更多错误信息。参考[Http 状态码 500](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.1)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-05T00:00:19.240

这主要是由于编码而发生的。如果您使用浏览器正常，但在您的程序中收到 500（内部服务器错误），这是因为浏览器具有关于字符集和内容类型的高度复杂的代码。

这是我的代码，它适用于 ISO8859_1 作为字符集和英语语言。

```
public void sendPost(String Url, String params) throws Exception {

    String url=Url;
    URL obj = new URL(url);
    HttpsURLConnection con = (HttpsURLConnection) obj.openConnection();

    con.setRequestProperty("Acceptcharset", "en-us");
    con.setRequestProperty("Accept-Language", "en-US,en;q=0.5");
    con.setRequestProperty("charset", "EN-US");
    con.setRequestProperty("Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
    String urlParameters=params;
    // Send post request
    con.setDoOutput(true);
    con.setDoInput(true);
    con.connect();
    //con.

    DataOutputStream wr = new DataOutputStream(con.getOutputStream());
    wr.writeBytes(urlParameters);
    wr.flush();
    wr.close();

    int responseCode = con.getResponseCode();
    System.out.println("\nSending 'POST' request to URL : " + url);
    System.out.println("Post parameters : " + urlParameters);
    System.out.println("Response Code : " + responseCode);

    BufferedReader in = new BufferedReader(
            new InputStreamReader(con.getInputStream()));
    String inputLine;
    StringBuffer response = new StringBuffer();

    while ((inputLine = in.readLine()) != null) {
        response.append(inputLine);
    }
    in.close();

    //print result
    System.out.println(response.toString());
    this.response=response.toString();
    con.disconnect();

} 
```

在主程序中，这样调用它：

```
myclassname.sendPost("https://change.this2webaddress.desphilboy.com/websitealias/orwebpath/someaction","paramname="+URLEncoder.encode(urlparam,"ISO8859_1")) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-22T20:32:50.083

我遇到了“URL 在浏览器中有效，但是当我在 java 中执行 http-get 时出现 500 错误”的问题。

在我的情况下，问题是常规的 http-get 最终陷入 /default.aspx 和 /login.aspx 之间的无限重定向循环

```
 URL oUrl = new URL(url);
        HttpURLConnection con = (HttpURLConnection) oUrl.openConnection();
        con.setRequestMethod("GET");
        ...
        int responseCode = con.getResponseCode(); 
```

发生的事情是：服务器提供了一个由三部分组成的 cookie，而 con.getResponseCode() 只使用了其中一个部分。标头中的 cookie 数据如下所示：

```
header.key = null
     value = HTTP/1.1 302 Found
...
header.key = Location
     value = /default.aspx
header.key = Set-Cookie
     value = WebCom-lbal=qxmgueUmKZvx8zjxPftC/bHT/g/rUrJXyOoX3YKnYJxEHwILnR13ojZmkkocFI7ZzU0aX9pVtJ93yNg=; path=/
     value = USE_RESPONSIVE_GUI=1; expires=Wed, 17-Apr-2115 18:22:11 GMT; path=/
     value = ASP.NET_SessionId=bf0bxkfawdwfr10ipmvviq3d; path=/; HttpOnly
... 
```

因此，服务器在只接收到所需数据的三分之一时会感到困惑：您已登录！不用等待，您必须登录。不，您已登录，...

要解决无限重定向循环，我必须手动查找重定向并手动解析“Set-cookie”条目的标题。

```
 con = (HttpURLConnection) oUrl.openConnection();
            con.setRequestMethod("GET");
            ...
            log.debug("Disable auto-redirect. We have to look at each redirect manually");
            con.setInstanceFollowRedirects(false);
            ....
            int responseCode = con.getResponseCode(); 
```

使用此代码解析 cookie，如果我们在 responseCode 中获得重定向：

```
private String getNewCookiesIfAny(String origCookies, HttpURLConnection con) {
    String result = null;
    String key;
    Set<Map.Entry<String, List<String>>> allHeaders = con.getHeaderFields().entrySet();
    for (Map.Entry<String, List<String>> header : allHeaders) {
        key = header.getKey();

        if (key != null && key.equalsIgnoreCase(HttpHeaders.SET_COOKIE)) {
            // get the cookie if need, for login
            List<String> values = header.getValue();
            for (String value : values) {
                if (result == null || result.isEmpty()) {
                    result = value;
                } else {
                    result = result + "; " + value;
                }
            }
        }
    }
    if (result == null) {
        log.debug("Reuse the original cookie");
        result = origCookies;
    }
    return result;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T12:57:40.817

确保您的连接允许以下重定向 - 这是您的连接和浏览器之间行为差异的可能原因之一（默认情况下允许重定向）。

它应该返回代码 3xx，但可能还有其他地方将它更改为 500 以供您连接。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-17T12:57:17.900

我遇到了同样的问题，我们的问题是其中一个参数值中有一个特殊符号。我们通过使用修复它`URLEncoder.encode(String, String)`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-22T14:29:10.093

就我而言，事实证明服务器总是为我想要访问的页面返回 HTTP/1.1 500（在浏览器中和在 Java 中一样），但仍然成功地传递了网页内容。

通过浏览器访问特定页面的人不会注意到，因为他会看到页面并且没有错误消息，在 Java 中我必须读取错误流而不是输入流（感谢@Muse）。

不过，我不知道为什么。可能是一些隐蔽的方式来阻止爬虫。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-26T11:22:11.153

这是一个老问题，但我遇到了同样的问题并以这种方式解决了它。

这可能有助于其他相同的情况。

就我而言，我正在本地环境中开发系统，当我从浏览器检查我的 Rest Api 时，一切都运行良好，但我的 Android 系统中一直抛出 HTTP 错误 500。

问题是当您在 Android 上工作时，它在 VM（虚拟机）上工作，这意味着您的本地计算机防火墙可能会阻止您的虚拟机访问本地 URL (IP) 地址。

您只需要在您的计算机防火墙中允许它。如果您尝试从网络外部访问系统，则同样适用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-21T04:54:30.210

检查参数

`httpURLConnection.setDoOutput(false)`;

仅适用于`GET`Method 并设置为`true`on `POST`，这为我节省了很多时间！！！

# c# - WCF 服务：异步方法或 BackgroundWorker

> ID：11721823
> 
> 赞同：1
> 
> 时间：2012-07-30T12:41:59.400
> 
> 标签：c#, multithreading, wcf, design-patterns, asynchronous

如果某些方法需要很多时间，我应该将其实现为异步吗？

或者也许在另一个中使用同步`Thread`（例如使用`BackgroundWorker`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T12:48:44.033

当您有应该在后台处理的工作项并且您关心它们何时完成时，使用异步调用

如果您有一个在后台运行且需要与 UI 交互的任务，请使用 BackgroundWorker。如果您不在乎他们何时完成任务，请使用它。将数据和方法调用编组到 UI 线程的任务通过其基于事件的模型自动处理。

如果 (1) 您的程序集尚未引用 System.Windows.Form 程序集，(2) 您需要线程成为前台线程，或者 (3) 您需要操纵线程优先级，请避免使用 BackgroundWorker。

# android - 服务没有被 PendingIntent 杀死

> ID：11721826
> 
> 赞同：0
> 
> 时间：2012-07-30T12:42:13.003
> 
> 标签：android, notifications, persistence

我有一个发布通知的服务，我想做的是在单击通知时终止该服务。这是我的代码：

```
@SuppressWarnings("deprecation")
@Override
public void onCreate() {
    super.onCreate();

    nm = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

    Notification n = new Notification(R.drawable.ic_launcher,
            getResources().getString(R.string.notify_body),
            System.currentTimeMillis());

    n.setLatestEventInfo(getApplicationContext(),
            getResources().getString(R.string.notify_title), getResources()
                    .getString(R.string.notify_body), PendingIntent
                    .getActivity(getApplicationContext(), 0, new Intent(
                            this, StopSelf.class), Intent.FLAG_ACTIVITY_NEW_TASK));

    n.defaults = Notification.DEFAULT_ALL;

    nm.notify(ID, n);

}

@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    nm.cancel(ID);
}

public class StopSelf extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        stopService(new Intent(this, myService.class));
        this.finish();
    }

} 
```

当我单击通知时，状态栏被关闭，但通知仍然存在。为什么 StopSelf 不终止服务并调用 onDestroy？

# scala - scala：产生两个循环的成对组合

> ID：11721829
> 
> 赞同：17
> 
> 时间：2012-07-30T12:42:27.613
> 
> 标签：scala

我想创建一个包含两个列表的所有成对组合的元组的集合。就像是：

```
for ( x <- xs )
  for ( y <- ys ) 
    yield (x,y) 
```

在 Python 中这会起作用，在 Scala 中显然`for`只为最后一个循环产生（因此计算结果为`Unit`）

在 Scala 中实现它的最简洁的方法是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-30T12:45:03.190

你几乎在那里：

```
scala> val xs = List (1,2,3)
xs: List[Int] = List(1, 2, 3)

scala> val ys = List (4,5,6)
ys: List[Int] = List(4, 5, 6)

scala> for (x <- xs; y <- ys) yield (x,y)
res3: List[(Int, Int)] = List((1,4), (1,5), (1,6), (2,4), (2,5), (2,6), (3,4), (3,5), (3,6)) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-30T13:13:28.903

根据 Nicolas 的说法更明确一点：
在 Scala 中，您可以在一个单一的理解中使用多个生成器。

```
val xs = List(1,2,3)
val ys = List(4,5)

for {
  x <- xs
  y <- ys
} yield (x,y)

res0: List[(Int, Int)] = List((1,4), (1,5), (2,4), (2,5), (3,4), (3,5)) 
```

您甚至可以在理解中进行评估。

```
for {
  x <- xs
  y <- ys
  if (x + y == 6)
} yield (x,y)

res1: List[(Int, Int)] = List((1,5), (2,4)) 
```

或者做一个任务。

```
for {
  x <- xs
  y <- ys
  val z = x + y
} yield (x,y,z)

res2: List[(Int,Int,Int)] = List((1,4,5), (1,5,6), (2,4,6), (2,5,7), (3,4,7), (3,5,8)) 
```

# .net - 如何使用 Windows 身份验证将附加数据传递给 WCF 服务（在身份验证期间）

> ID：11721834
> 
> 赞同：-1
> 
> 时间：2012-07-30T12:42:52.433
> 
> 标签：.net, wcf, authentication, wcf-security

我有带有 Windows 身份验证的 WCF Web 服务。

捆绑

```
<bindings>
  <netTcpBinding>
    <binding name="CommonWindowsBinding" maxReceivedMessageSize="40000000" >
      <security mode="Transport">
        <transport clientCredentialType="Windows" />
      </security>
    </binding>
  </netTcpBinding>

</bindings> 
```

端点

```
 <endpoint address="Windows"
              binding="netTcpBinding" 
              bindingConfiguration="CommonWindowsBinding" 
              name="MyNameSpace.Contracts.ISimplePluginServiceWindows" 
              contract="MyNameSpace.Contracts.ISimplePluginService">
      <identity>
        <dns value="WCfServer" />
      </identity>
    </endpoint> 
```

我想将其他信息传递给服务以进行此类身份验证（我通过检查 MS SQL Server 的用户和登录名来检查身份验证 - 我需要传递 mssql 服务器名称和数据库名称）。所以，我必须将一些自定义数据传递给验证器 => 我必须为 Windows 身份验证制作自定义验证器。我该怎么做？我找不到任何例子。

对于 UserName 身份验证，我可以使用继承 UserNamePasswordValidator 的 CustomUserNameValidator（通过登录传递服务器地址和数据库名称）来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:58:45.070

Windows 身份验证是 Windows (EG Kerberos)。如果您想自己进行身份验证，请使用密码，但我认为它不会让您传递其他信息。你真的想将服务器地址和数据库名称传递给服务器吗？

[选择凭证类型](http://msdn.microsoft.com/en-us/library/ms733836.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:31:09.050

我意识到，这通常是错误的方法。

1.  我可以使用委托从 WCF 服务使用当前 Windows 用户的凭据对 MSSQL 服务器进行身份验证 - [http://msdn.microsoft.com/en-en/library/ms730088.aspx](http://msdn.microsoft.com/en-en/library/ms730088.aspx)

2.  如果需要传递额外的数据（例如服务器名称和数据库名称），则应使用服务合同中的特殊方法执行此操作。

# powershell - 在 PowerShell 中，如何组合具有一对一关系的两个命令的结果？

> ID：11721835
> 
> 赞同：11
> 
> 时间：2012-07-30T12:43:04.997
> 
> 标签：powershell

此特定示例是 Get-User 和 Get-Mailbox (Exchange 2010)。Get-User 返回一些我需要的列，并返回一些其他的 Get-Mailbox。我很难弄清楚如何将两者的结果与两者的结果结合到一个表中。

```
Get-User -Filter "..." | Get-Mailbox -Filter "..." 
```

如何获取类似于上面的命令的结果并将其转换为类似于下面的结果？

```
FirstName  LastName  Alias   CustomAttribute1
---------  --------  ------  ----------------
Bob        Smith     bsmith  Example
Johnny     NoMail
Adam       Blye      ablye   Has a Mailbox 
```

请注意，Get-Mailbox 不返回 FirstName 和 LastName，相反，Get-User 不返回 Alias 和 CustomAttributes。并非每个用户都有邮箱，因此有时部分列会为空。但是我正忙着找出返回这样一个组合表的最佳方法。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-30T13:34:25.613

获取用户，将每个用户保存在一个变量中，获取每个用户的邮箱，然后使用两个变量的属性创建一个新对象

```
Get-User -Filter ... | Foreach-Object{

    $user = $_
    $mbx = Get-Mailbox $user

    New-Object -TypeName PSObject -Property @{
        FirstName = $user.FirstName
        LastName = $user.LastName
        Alias = $mbx.Alias
        CustomAttribute1 = $mbx.CustomAttribute1
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-30T12:51:22.330

我制作了一个自定义对象，这可能有点矫枉过正，但这是我找到的最简单的方法。

这是一些可以使用的示例代码。让我知道它是否会产生任何问题或其他问题：

```
$outputCollection = @()
$users = Get-User -Filter "..."
$mailboxes = Get-Mailbox -Filter "..."

$users | Foreach-Object {
    #Associate objects
    $userObject = $_
    $mailboxObject = $mailboxes | Where-Object {$_.Name -eq $userObject.Name}

    #Make a combined object
    $outputObject = "" | Select Name, UserAttribute, MailboxAttribute
    $outputObject.Name = $userObject.Name
    $outputObject.UserAttribute = $userObject.UserAttribute
    $outputObject.MailboxAttribute = $mailboxObject.MailboxAttribute

    #Add the object to the collection
    $outputCollection += $outputObject
}

$outputCollection 
```

另一个应该起作用的选项称为计算属性：

```
Get-User -Filter "..." | Select Name, UserAttribute, @{Name="OtherAttribute"; Expression={(Get-Mailbox $_.Name).MailboxAttribute}} 
```

...请注意，这将为每个条目运行一个新的 Get-Mailbox 命令，可能会增加执行时间

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T16:49:58.143

感谢你们。我花了很多时间试图找出我自己的问题，而您的代码帮助我解决了问题。我需要找到默认帐户设置为无的所有日历。以下是我需要使用的。

```
Get-Mailbox | ForEach-Object{
    $user = $_
    $calPerms = Get-MailboxFolderPermission $user":\calendar" -User Default | Where-Object {$_.AccessRights -eq "none"}

    New-Object -TypeName PSObject -Property @{
        Name = $user
        Permissions = $calPerms.AccessRights
        Users = $calPerms.user
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-13T00:41:56.867

一个获取 FirstName、LastName、Alias 和 CustomAttribute1 的衬垫：

```
Get-User | Select Firstname, Lastname, @{Name="Alias"; Expression={(Get-Mailbox $_.Name).Alias}}, @{Name="CustomAttribute1"; Expression={(Get-Mailbox $_.Name).CustomAttribute1}} 
```

# c++ - 为什么要这样调用宏？

> ID：11721837
> 
> 赞同：2
> 
> 时间：2012-07-30T12:43:10.100
> 
> 标签：c++

我最近阅读了 larbin 源代码。但我有一个疑问。我在 global.h 文件中定义了全局类，在这个文件的末尾有一个像这样的宏：

```
#define setPoll(fds, event) \
global::pollfds[global::posPoll].fd = fds; \
global::pollfds[global::posPoll].events = event; \
global::posPoll++ 
```

但是在 fetch/fetchPipe.cc 文件中，像这样调用这个宏：

```
global::setPoll(n, POLLOUT); 
```

问题是为什么要使用 global:: 来调用这个宏？我认为使用

```
setPoll(n, POLLOUT); 
```

没关系。任何机构都可以告诉我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:05:44.007

源代码是一团糟，它甚至不会编译。似乎`global.h`在 2.2.2 版和当前 2.6.3 版之间发生了变化，但没有解决`fetch/fetchPipe.h`. 还可以查看以下包含的语句`global.cc`：

```
#include <iostream.h> // iostream.h?
#include <unistd.h>   // twice, see below
#include <errno.h>
#include <string.h>   // mixing C++ and C libraries
#include <sys/types.h>
#include <unistd.h>
    ... 
```

此代码已过时，不是标准 C++。还有其他几件事是错误的。但回到你的问题：是的，`setPoll(n, POLLOUT);`应该足够了。使用`global::setPoll`不会导致错误，因为这将扩展为

```
global::global::pollfds[global::posPoll].fd = fds;
global::pollfds[global::posPoll].events = event;
global::posPoll++; 
```

并且`global`是`struct`（参见[Mike Seymour 的评论](https://stackoverflow.com/questions/11721837/why-call-macro-in-this-way/11722217#comment15552512_11722217)）。

# c# - C# 编译器期望右花括号

> ID：11721838
> 
> 赞同：2
> 
> 时间：2012-07-30T12:43:11.803
> 
> 标签：c#, compiler-errors, curly-braces

任何人都可以在 ASP.Net 应用程序的 C# 代码中指出此错误的原因。构建错误需要一个右大括号，尽管我已经检查了所有分号和括号，但无法准确定位它。任何线索将不胜感激。谢谢！

这是屏幕截图后的代码。

```
using System;
using System.Collections.Generic;
//using System.Linq;
//using System.Web;
using System.Data.SqlClient;
using System.Configuration;

    namespace ANTrack
    {
        public class MyObjDataSource
        {
            public int iCount;
            public string strName;

            public void GetIncident(int IncidentID)
            {
                private SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
            }
        }
    } 
```

![关闭花括号错误](../Images/c37459b6cd24b51844296088a3fb0364.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T12:46:18.960

我认为这与这条线有关：

```
 private SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString); 
```

你不想`private`在它前面放一个，它是方法中的一个变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T12:46:04.767

```
public void GetIncident(int IncidentID)
{
    private SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
} 
```

`private`从变量声明中删除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T12:47:13.987

更正：

```
using System;
using System.Collections.Generic;
//using System.Linq;
//using System.Web;
using System.Data.SqlClient;
using System.Configuration;

    namespace ANTrack
    {
        public class MyObjDataSource
        {
            public int iCount;
            public string strName;

            public void GetIncident(int IncidentID)
            {
                SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T12:45:59.333

你不能像`private`在方法中那样声明访问修饰符，删除它

# php - x 次后刷新 ajax 获取的内容

> ID：11721840
> 
> 赞同：2
> 
> 时间：2012-07-30T12:43:21.817
> 
> 标签：php, jquery, html, ajax

正如标题所说，我想在 10 秒后每 x 次更新一次这个 ajax 获取

尝试了一些东西，但并没有真正奏效。所以这就是我最终来到这里的原因..

所以...如何在 .x.. 时间之后刷新内容？

内容.php

```
<html>
<head>    
$.ajax({                                      
      url: 'form/contact.php', data: "", dataType: 'json',  success: function(rows)        
      {
        for (var i in rows)
        {
          var row = rows[i];          

          var bedrijf = row[1];
          var naam = row[2];
          var functie = row[10];
          var id = row[0];
          $('.table').append("<tr><td>"+bedrijf+"</td> <td>"+naam+"</td> <td style='font-size: 12px;'>"+functie+"</td> <td><a href='index.php?p=contact-edit&amp;id="+id+"'><img src='images/page_e.png' height='21' width='19'></a></td>")
        } 
      } 
    });

</head>
....
</html> 
```

表格/contact.php

```
$result = mysql_query("SELECT * FROM contact");

$data = array();
while ( $row = mysql_fetch_row($result) )
{
  $data[] = $row;
}
echo json_encode( $data ); 
```

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:45:55.363

你需要一个间隔。

```
function doAjax() {
    //existing AJAX code here
}
doAjax(); //do AJAX on load
setInterval(doAjax, 10000); //...and every 10 seconds hence 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:45:04.620

你的问题很模糊，但是为了实现每 10 秒刷新一次，如果你把上面的代码包装起来，它应该可以工作

```
setInterval(function() {
  // Fetch and update
}, 10000); 
```

确保在每次迭代时清空表。

# slickgrid - SlickGrid ADODB (MS Access) 示例

> ID：11721844
> 
> 赞同：0
> 
> 时间：2012-07-30T12:43:56.933
> 
> 标签：slickgrid, adodb

我有一个非常简单的 slickGrid 示例，我试图通过 ADODB 从 MS Access 填充。我已将 Table 转换为类似 JSON 的对象（生成实际显示正常的原始数据的精确副本）：

```
 <script type="text/javascript">
var pad = "C:\\wamp\\www\\Test\\db1.mdb";
var cn = new ActiveXObject("ADODB.Connection");
var strConn = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + pad;
cn.Open(strConn);
var rs = new ActiveXObject("ADODB.Recordset");
var SQL = "SELECT * FROM Parts";
rs.Open(SQL, cn);
    if(!rs.bof) {
        rs.MoveFirst();
    }

// Build JSON for SlickGrid... set first instance to ''
var JSONobj='';

var i=1;
// while(!rs.eof) {
while(i<3) {
JSONobj=JSONobj+"{id:" + i + ", "+"PartID:'" + rs.fields(1).value + "', "+"Date:'" + rs.fields(2).value + "', " + "Project:'" + rs.fields(3).value + "', " + "Product:'" + rs.fields(4).value + "', " + "First_Name:'" + rs.fields(5).value + "', " + "Last_Name:'" + rs.fields(6).value + "', " + "Firm:'" + rs.fields(7).value + "', " + "Role:'" + rs.fields(8).value +"'},";
    i=i+1
    rs.MoveNext();
}

// Remove last comma on JSON
var strLen = JSONobj.length;
JSONobj = JSONobj.slice(0,strLen-1);

JSONobj = JSONobj.replace(/null/g, " ");

//else {
//document.write("No data found");
//};
rs.Close();
cn.Close();
</script> 
```

网格渲染没有错误，但我没有数据。这是整个代码源（除了上面的转换方法）：

```
 >             <!DOCTYPE HTML>

<html>
<head>

<title>test</title>

<!-- Load initial styles/js -->
<link rel="stylesheet" href="css/slickgrid/slick.grid.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/slickgrid/examples.css" type="text/css" media="screen" charset="utf-8" />

<script language="javaScript" src="js/jquery-1.4.3.min.js"></script>

</head>
<body>

<div id="pageContainer">
<div id="myGrid" class="grid"></div>
</div>

<!-- SlickGrid dependant files -->
<script language="javascript" src="js/jquery/jquery-1.4.3.min.js"></script>
<script language="javascript" src="js/jquery/jquery-ui-1.8.5.custom.min.js"></script>
<script language="javascript" src="js/jquery/jquery.event.drag-2.0.min.js"></script>
<script language="javascript" src="js/slickgrid/slick.core.js"></script>
<script language="javascript" src="js/slickgrid/plugins/slick.rowselectionmodel.js"></script>
<script language="javascript" src="js/slickgrid/slick.grid.js"></script>
<script language="javascript" src="js/slickgrid/slick.groupitemmetadataprovider.js"></script>
<script language="javascript" src="js/slickgrid/slick.dataview.js"></script>

<!-- XXXXXXXXXXXXXXX jQ Date/Calendar XXXXXXXXXXXXX -->
<script type="text/javascript" src="js/jquery-ui-1.8.11.custom.min.js"></script>

<script type="text/javascript">
var dataView;
var grid;
var data = [];
var rows = [];
var initialSortOrder = {};

var options = {
    enableCellNavigation:true,
    enableColumnReorder:true,
    editable:false,
    sortable:true,
    rowHeight:25
    // rowHeight:23
};

initialSortOrder.sortBy = "symbol";
initialSortOrder.sortDirection = "ASC";

var columns = [
{id:"PartID", name:"Part ID", field:"PartID", width:86, sortable:true},
{id:"Date", name:"Date", field:"Date", width:80, sortable:true},
{id:"Project", name:"Project", field:"Project", width:140, sortable:true},
{id:"Product", name:"Product", field:"Product", width:115, sortable:true},
{id:"First_Name", name:"First Name", field:"First_Name", sortable:true},
{id:"Last_Name", name:"Last Name", field:"Last_Name", width:75, sortable:true},
{id:"Firm", name:"Firm", field:"Firm", width:140, sortable:true},
{id:"Role", name:"Role", field:"Role", width:140, sortable:true},
{id:"Action", name:"Action", field:"Action", width:140, sortable:true}
];

$(function() {

data = [JSONobj];

         dataView = new Slick.Data.DataView();

    grid = new Slick.Grid($("#myGrid"), data, columns, options);

// wire up model events to drive the grid
    dataView.onRowCountChanged.subscribe(function(e,args) {
    grid.updateRowCount();
    grid.render();
    });

    dataView.onRowsChanged.subscribe(function(e,args) {
    grid.invalidateRows(args.rows);
    grid.render();
    });

    grid.setSelectionModel(new Slick.RowSelectionModel());

// initialize the model after all the events have been hooked up
    dataView.beginUpdate();
    dataView.setItems(data);
    dataView.endUpdate();
    })
</script>

</body>
</html> 
```

任何帮助表示赞赏...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:15:00.150

好的，这是我正在使用的连接字符串以及它如何将数据映射到列中：

```
$(function() {
// Open DB & dump data into SlickGrid 

var pad = "C:\\wamp\\www\\Test\\db1.mdb";
    var cn = new ActiveXObject("ADODB.Connection");
    var strConn = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + pad;
    cn.Open(strConn);
    var rs = new ActiveXObject("ADODB.Recordset");
    var SQL = "SELECT * FROM Table1";
    rs.Open(SQL, cn);
        if(!rs.bof) {
            rs.MoveFirst();
        }

        var i=0;
        while(!rs.eof) {
        var d = (data[i] = {});
        d["id"]     = "id_" + i;
        d["PartID"] = rs.fields(1).value;
        d["Date"]   = rs.fields(2).value;
        d["Project"]    = rs.fields(3).value;
        d["Product"]    = rs.fields(4).value;
        d["First_Name"] = rs.fields(5).value;
        d["Last_Name"]  = rs.fields(6).value;
        d["Firm"]   = rs.fields(7).value;
        d["Role"]   = rs.fields(8).value;
        i=i+1
        rs.MoveNext();
        }
    rs.Close();
    cn.Close(); 
```

如您所见，db 文件被映射到物理 HD 位置……这听起来是对的，因为否则它可能违反安全规定（浏览器通常无法访问从客户端计算机读取/写入到客户端计算机）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:25:08.380

给你的网格一个明确的高度。例如：

```
<div id="myGrid" class="grid" style="height:400px"></div> 
```

当我遇到类似问题时，这就是为我解决的问题。从那以后，我开始使用基于窗口大小的 jQuery 设置高度并使用调整大小回调，这很好地满足了我的需求。

# php - 使用 mysql 数据和 jquery

> ID：11721846
> 
> 赞同：0
> 
> 时间：2012-07-30T12:43:58.257
> 
> 标签：php, jquery, mysql

我想用 jQuery 制作一种特色内容滑块，并在两个单独的事件中显示来自 mySQL 表的数据，这是我的小提琴：http: [//jsfiddle.net/silcon_sys/8PMUg/65/](http://jsfiddle.net/silcon_sys/8PMUg/65/) 现在我想要数据：封面、年份、标签、艺术家、标题 我制作了一个 php 脚本，将这些数据很好地放入单独的幻灯片中。

在单击“信息”时，jQuery 会制作一个向下滑动的动画，其中包含其余的表格数据。

如何让 jQuery 下拉菜单显示其余数据所属行中的数据？

我想我必须使用某种控制结构。我不能一次构建整个东西，而且很难找到一个好的遮阳篷来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:16:30.143

对此的解决方案不是直接的 javascript 或 jQuery - 您需要实现一些 AJAX 回调，允许您的服务器处理一些数据然后返回您想要显示的结果。

一旦您从该回调中获得数据，您就可以设置下拉列表的 HTML。

```
var value = 1;
var value2 = 2;

$.post('backgroundScript.php', {
        val: value
        val2: value2
    }, function(data) {
        $('#myElement').html(data);
    }
); 
```

# java - 数组作为实例变量作为参数传递

> ID：11721848
> 
> 赞同：0
> 
> 时间：2012-07-30T12:44:12.380
> 
> 标签：java, arrays, nullpointerexception, parameter-passing

我有一个带有数组作为实例变量/字段的类，它从另一个类传递到这个类中的第一个方法。我的印象是，我也应该能够从另一个方法访问它，而无需将其传递给该方法，但是当我尝试时，我得到了一个 NPE。

这是代码：

```
public class PLoop {

    // instance variable
    public Memory[] memList;

    // method 1
    public void memPass(Memory[] memLocList) {

        memList = memLocList;
        System.out.println(memList.length);
    }

    // method 2
    public void accessArray() {

        System.out.println(memList.length);
    }
} 
```

当调用第一种方法时，我在控制台上打印一个整数，表示数组的长度，但是当调用第二种方法时，它是 NPE，表明不是同一个数组。

第二种方法是通过单击 GUI 上的按钮来调用的。与此按钮关联的方法仅具有如下调用：

```
PLoop.accessArray(); 
```

谁能告诉我我做错了什么？

-EDIT- 对这些方法的调用来自两个不同的类，每个类都声明了一个 PLoop 实例：

```
proc = new PLoop(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:47:39.663

我强烈怀疑您调用`memPass`的实例与您稍后调用的实例`accessArray`不同。

如果您使用相同的实例，那应该绝对没问题。（特别是要存储的是参数的*值*，所以它不会`memList`在不为空后变为空，只是由于其他地方的变化。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T12:48:55.487

您显示的类中的代码看起来不错，因此如果您得到一个 NPEx，那么要么方法被不按顺序调用，要么第二个方法调用是在与第一个不同的 PLoop 实例上进行的。

要检查调用是否在同一个对象上进行，请尝试打印出`this`方法内部的值并检查值是否相同：

```
System.out.println(this); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T12:57:21.647

您的 PLoop 类中的方法不是静态的 您仍在调用`PLoop.accessArray();`

你能告诉我真正的场景是什么吗？

就像@Jon Skeet 告诉的那样，代码似乎很好。唯一的可能是您可能不按顺序执行它们，或者在调用第一个方法后您可能会弄乱 memLocList 。

# c# - 拥有 Windows 服务或控制台应用程序好不好？

> ID：11721851
> 
> 赞同：7
> 
> 时间：2012-07-30T12:44:24.610
> 
> 标签：c#, windows-services, console-application

我的数据库中有一个任务表。我想从此表中读取数据并运行任务。将其作为 Windows 服务或控制台应用程序运行，哪个更好。将在其上运行的服务器不会关闭

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T12:49:57.543

您很可能想要使用 Windows 服务。

好处：

*   您可以控制启动进程的用户（以及与此用户帐户关联的权限）
*   自动启动的进程意味着桌面需要打开，而不是用户登录，才能运行服务
*   可以定义失败策略（如果失败，尝试重新启动 n 次运行特定程序）
*   可以定义依赖项（如果您依赖其他服务）
*   您可以将脚本包装在不可见的窗口中
*   您可以轻松启动/停止/重新启动脚本 ( `net start <scriptname>`)

**从这里引用：** [将应用程序开发为 Windows 服务有什么好处？](https://stackoverflow.com/questions/442264/what-is-the-benefit-of-developing-the-application-as-a-windows-service/442276#442276)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T12:53:56.213

正如其他人所说，运行控制台应用程序不是一种选择。

如果您只想让任务每 x 分钟运行一次，最简单的选项是使用控制台应用程序的*计划任务。*

Windows 服务有其优点，但实施和部署有点复杂。但是，如果您的应用程序需要“始终开启”（例如，需要对外部触发器做出反应、侦听消息队列……），那么 Windows 服务是唯一的选择。正如其他人所说，服务基础设施还提供更多管理功能、与事件日志的内置集成、重新启动和故障转移选项......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:50:15.017

Windows 服务一般。如果服务器重新启动，而 Windows 服务可以自动启动，则需要重新启动控制台应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T12:48:30.927

Windows 服务，因为它不需要登录用户。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T12:48:59.447

我会说; Windows 服务。

在这种情况下（除其他外）您不需要用户登录，您可以将其配置为在它因某种原因关闭时自动重新启动，并且您（可能）在整个系统中拥有广泛的权限。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-17T10:13:24.007

你应该看看：[https ://github.com/thedavejay/Self-Installing-Windows-Service](https://github.com/thedavejay/Self-Installing-Windows-Service)

它允许您作为控制台应用程序进行调试，然后将其安装为 Windows 服务。

# iphone - 如何在 UITextView 中使单词或文本可点击？

> ID：11721857
> 
> 赞同：1
> 
> 时间：2012-07-30T12:44:41.407
> 
> 标签：iphone, ios5, ios4

在我的应用程序中，我希望点击 UITextView 中的文本或字符串。点击后它应该连接到任何网址，比如说“www.google.com”。问题是，当我在 UITextView 中点击文本时，它没有被点击。我应该怎么办 ？我被困了两天，请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:50:17.210

您需要在 UITextView 顶部添加按钮，例如 goToWebSiteButton。

```
@property (weak, nonatomic) IBOutlet UIButton *goToWebSiteButton; 
```

然后合成它：

```
@synthesize goToWebSiteButton; 
```

然后将目标添加到按钮：

```
[goToWebSiteButton addTarget:self action:@selector(goToWebSite:event:) forControlEvents:UIControlEventTouchUpInside];

- (void)goToWebSite:(id)sender event:(id)event{

    NSURL *url = [NSURL URLWithString: [NSString stringWithFormat:@"http://%@", @"www.google.com" ]];
    [[UIApplication sharedApplication] openURL:url]; 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:59:24.507

您可以`UIWebView`在那里使用并且可以制作超链接。
或者您可以使用[TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel/)可以保存或者您可以在要单击的文本上`NSAttributedString`
清除's。`UIButton`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:54:43.913

首先，如果您点击 UITextfield ，它将被点击，因为它意味着用户输入任何文本。如果您想连接到一个 url，只需将该`UIWebView`方法添加到您的`UITextfield`方法中即可。

最好是在用户输入任何内容后，将`UITextfield`其放入 a`UILabel`或 a`UIButton`中，然后单击或点击，让它打开 UIWebView。

# javascript - AngularJS - 如何获取 ngRepeat 过滤结果参考

> ID：11721863
> 
> 赞同：129
> 
> 时间：2012-07-30T12:45:00.040
> 
> 标签：javascript, angularjs, filter, angularjs-ng-repeat

我正在使用带有过滤器的 ng-repeat 指令，如下所示：

```
ng-repeat="item in items | orderBy:'order_prop' | filter:query | limitTo:4" 
```

我可以很好地看到渲染结果；现在我想在我的控制器中对该结果运行一些逻辑。问题是如何获取结果项目参考？

**更新：**

* * *

澄清一下：我正在尝试创建一个自动完成，我有这个输入：

```
<input id="queryInput" ng-model="query" type="text" size="30" placeholder="Enter query"> 
```

然后是过滤后的结果：

```
<ul>
   <li  ng-repeat="item in items | orderBy:'order_prop' | filter:query | limitTo:4">{{item.name}}</li>
</ul> 
```

现在我想浏览结果并选择其中一项。

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2012-07-30T13:12:36.057

**更新**：这是一种比以前更简单的方法。

```
 <input ng-model="query">
 <div ng-repeat="item in (filteredItems = (items | orderBy:'order_prop' | filter:query | limitTo:4))">
   {{item}}
 </div> 
```

然后`$scope.filteredItems`就可以访问了。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-08-09T14:56:13.667

这是 Andy Joslin 解决方案的过滤器版本。

**更新：**重大变化。从版本 1.3.0-beta.19 ( [this commit](https://github.com/angular/angular.js/commit/8863b9d04c722b278fa93c5d66ad1e578ad6eb1f) ) 开始，过滤器没有上下文，`this`将绑定到全局范围。您可以将上下文作为参数传递，也可以在[ngRepeat](https://docs.angularjs.org/api/ng/directive/ngRepeat) 1.3.0-beta.17+ 中使用新的别名语法。

```
// pre 1.3.0-beta.19
yourModule.filter("as", function($parse) {
  return function(value, path) {
    return $parse(path).assign(this, value);
  };
});

// 1.3.0-beta.19+
yourModule.filter("as", function($parse) {
  return function(value, context, path) {
    return $parse(path).assign(context, value);
  };
}); 
```

那么在你看来

```
<!-- pre 1.3.0-beta.19 -->
<input ng-model="query">
<div ng-repeat="item in items | orderBy:'order_prop' | filter:query | limitTo:4 | as:'filteredItems'">
 {{item}}
</div>

<!-- 1.3.0-beta.19+ -->
<input ng-model="query">
<div ng-repeat="item in items | orderBy:'order_prop' | filter:query | limitTo:4 | as:this:'filteredItems'">
 {{item}}
</div>

<!-- 1.3.0-beta.17+ ngRepeat aliasing -->
<input ng-model="query">
<div ng-repeat="item in items | orderBy:'order_prop' | filter:query | limitTo:4 as filteredItems">
 {{item}}
</div> 
```

这使您可以访问`$scope.filteredItems`.

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-01-11T08:56:45.803

尝试这样的事情，ng-repeat 的问题是它创建了子范围，因为你无法访问

> 过滤项目

从控制器

```
<li ng-repeat="doc in $parent.filteritems = (docs | filter:searchitems)" ></li> 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2016-01-07T15:06:39.340

**更新：**

即使在 1.3.0 之后。如果你想把它放在控制器或父级的范围内，你不能用**as**语法来做到这一点。例如，如果我有以下代码：

```
<div>{{labelResults}}</div>
<li ng-repeat="label in (labels | filter:query | as labelResults)">
</div> 
```

以上将**不起作用**。绕过它的方法是使用**$parent**：

```
<li ng-repeat="label in ($parent.labelResults = (labels | filter:query))"> 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-12-17T15:21:55.213

我想出了一个更好的安迪解决方案版本。在他的解决方案中，ng-repeat 对包含分配的表达式进行了监视。每个摘要循环都会评估该表达式并将结果分配给范围变量。

此解决方案的问题是，如果您在子范围内，您可能会遇到分配问题。这就是为什么你应该[在 ng-model 中有一个点的](https://stackoverflow.com/questions/17178943/does-my-ng-model-really-need-to-have-a-dot-to-avoid-child-scope-problems)原因。

我不喜欢这个解决方案的另一件事是它将过滤数组的定义隐藏在视图标记中的某处。如果它在您的视图或控制器中的多个位置使用它可能会让人感到困惑。

一个更简单的解决方案是在你的控制器中放置一个手表来进行分配：

```
$scope.$watch(function () {
    $scope.filteredItems = $scope.$eval("items | orderBy:'order_prop' | filter:query | limitTo:4");
}); 
```

此函数将在每个摘要循环期间进行评估，因此性能应该与 Andy 的解决方案相当。您还可以在函数中添加任意数量的分配，以将它们全部保存在一个位置，而不是分散在视图中。

在视图中，您只需直接使用过滤后的列表：

```
<ul>
    <li  ng-repeat="item in filteredItems">{{item.name}}</li>
</ul> 
```

[这是一个小提琴，它在更复杂的场景中显示。](http://jsfiddle.net/dtjohnson/0xypj2z5/)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-02-25T19:07:32.983

检查这个答案：

[在 ng-repeat 中选择和访问项目](https://stackoverflow.com/questions/32571074/selecting-and-accessing-items-in-ng-repeat)

```
<li ng-repeat="item in ..." ng-click="select_item(item)"> 
```

# c# - 使用分层资源在 WCF REST 中路由

> ID：11721864
> 
> 赞同：1
> 
> 时间：2012-07-30T12:45:01.870
> 
> 标签：c#, wcf, rest, routing

我有一个包含分层资源的 RESTful Web 服务。我想将这些资源分离到由全局路由类（global.asax）映射的不同服务类中。例如，如果我有这样的资源层次结构：

```
Book/
Book/{BookID}/Chapters/
Book/{BookID}/Chapters/{ChapterID}/
etc... 
```

我只能像这样映射到一个类：

```
RouteTable.Routes.Add(new ServiceRoute("Books/", new WebServiceHostFactory()
  , typeof(BookService))); 
```

这可行，但我必须在该单一服务中实现所有方法。我宁愿拥有多个服务类，如 BookService、ChapterService 等......像这样：

```
RouteTable.Routes.Add(new ServiceRoute("Books/", new WebServiceHostFactory()
  , typeof(BookService)));

RouteTable.Routes.Add(new ServiceRoute("Books/{BookID}/Chapters/"
  , new WebServiceHostFactory(), typeof(ChapterService))); 
```

但它不起作用......所以现在我被迫将我的所有方法都定义在一个服务中。有没有办法解决这个问题，或者我注定要使用这个单一的巨大服务类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:56:48.313

看看[这个答案](https://stackoverflow.com/questions/11459596/routes-for-mvc-4-web-apis/11460097#11460097)。它与使用 ASP.NET Web API 的路由有关（一些评论建议使用它，我也会这样做），但它也与开发 RESTful API 相关。我不会尝试在 API 中显示架构的层次结构，因为我认为这会增加很多不必要的复杂性。因此，您的 API 示例如下所示：

```
/Chapters/{ChapterID}?Book={BookID} 
```

这消除了复杂的路由，API 用户更容易理解，并坚持 RESTful 原则。

# c++ - 只读结构？如何在结构中使用指针？

> ID：11721881
> 
> 赞同：1
> 
> 时间：2012-07-30T12:46:03.500
> 
> 标签：c++, qt, qt4

我被这个问题发疯了。

我有这个自定义结构

```
struct oneRectangle
{
    QString partName;
    QGraphicsRectItem * rectangle;
}; 
```

我有一个 List 使用这个结构作为模板：

```
QList<oneRectangle> partList; 
```

在我附加一个结构实体（没有初始化指针）之后，我需要做这样的事情：

```
partList.at(index).rectangle = some pointer points to a QGraphicsRectItem 
```

但是，我收到一个错误，说该结构是只读结构。我尝试先 malloc 指针，然后将其附加到列表中，但是当我为指针分配地址时，我仍然得到错误。这里有什么问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-30T12:49:19.133

改变

```
partList.at(index).rectangle 
```

进入

```
partList[index].rectangle 
```

as[`QList::operator[](int)`](http://qt-project.org/doc/qlist.html#operator-5b-5d)返回一个可修改的引用，其中[`QList::at(int)`](http://qt-project.org/doc/qlist.html#at)返回一个 const 引用（因此不可修改）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:09:16.247

重点是：使用 something.at(index) 进行显示，使用 something[index] 进行编辑。为什么不同时使用 something[] 呢？因为我在某处读过它，“.at()”更高效、更快。虽然我没有测试...

# html - 在 div 中，如何设置“单元格间距”？

> ID：11721889
> 
> 赞同：3
> 
> 时间：2012-07-30T12:46:26.263
> 
> 标签：html, css, css-tables

假设一个 div 中有很多 div：

```
<div id="#container">
 div div div div
</div> 
```

内部 div 甚至可以彼此相邻。现在我想在所有这些之间有 5px 的填充，就像`cellspacing`.`table`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T12:48:17.343

你会做这样的事情：

```
 #container div
 {
     margin: 0px 5px 5px 0px;
 } 
```

或仅适用于直系子女：

```
 #container > div
 {
     margin: 0px 5px 5px 0px;
 } 
```

如果您希望 div 并排放置，则必须浮动它们：

```
 #container div
 {
     float:left;
     clear:none;
     margin: 0px 5px 5px 0px;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:48:26.857

为此，您将需要使用 CSS。

```
<div id="container">
   <div style="padding:5px 5px 0 0;">
   </div>
   <div style="padding:5px 5px 0 0;">
   </div>
</div> 
```

基本上，HTML 中的任何元素都可以使用内联 CSS（如上）或使用 CSS 语法在单独的样式表中定位和设置样式。

在这种情况下，填充意味着元素在其内容内将有 5 个像素的空间，而边距意味着它将在其边界之外有 5 个像素的空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T12:49:21.153

```
#container div {
  margin: 0px 5px 5px 0px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T12:50:53.603

在这种情况下，您可以使用填充或边距。

但是，如果您有 div 的可见边框，则使用边距。否则它看起来不像单元格间距。

# php - 如何对关联数据进行排序？

> ID：11721891
> 
> 赞同：-2
> 
> 时间：2012-07-30T12:46:32.203
> 
> 标签：php, cakephp

我知道如何使用“订单”选项对主要模型进行排序。但是如何对关联数据进行排序呢？

好的，我试过这个：

```
$task = $this->Task->read(null, $id, array('order' =>
        array('Subtask.completed ASC')
)); 
```

然后我发现 read 没有选项参数。所以我尝试为另一个模型设置一个变量，所以我可以使用 find 方法中的选项：

```
$subtasks = $this->Subtask->find('all', array('conditions' => array(
        'Subtask.task_id' => $id),
        'order' => array('Subtask.completed ASC')
)); 
```

这给了我以下错误：

致命错误：在第 54 行的 C:\xampp\htdocs\taskExplorer\app\controllers\tasks_controller.php 中的非对象上调用成员函数 find()

所以解决这个问题的方法可能是绑定第二个模型（子任务），这样我就可以用它来查找了。但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:07:20.293

尝试这个 ：

```
$this->loadModel('Subtask');
$subtasks = $this->Subtask->find('all', array('conditions' => array(
    'Subtask.task_id' => $id),
    'order' => array('Subtask.completed ASC')
)); 
```

如果您在模型中定义了关系，那么您可以像这样访问它：

```
$subtasks = $this->Task->Subtask->find(
                             //rest of code
                           ); 
```

# sql-server - 错误阻止复制同步：字符串或二进制数据将被截断。[SQLSTATE 22001]（错误 8152）

> ID：11721894
> 
> 赞同：0
> 
> 时间：2012-07-30T12:46:45.387
> 
> 标签：sql-server, sql-server-2008, replication

我在合并复制作业的作业历史记录中收到此错误消息：

> 以用户身份执行：NT AUTHORITY\SYSTEM。字符串或二进制数据将被截断。[SQLSTATE 22001]（错误 8152）。步骤失败。

我知道该消息的含义，但不知道是什么原因造成的，因为数据库模型是相同的！

关于可能导致此特定错误的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:17:13.167

在使用 Profiler 数小时后，我发现一个非常长的存储过程导致了这个问题。
添加到订阅者的更新时。包含 Alter 过程的列长 4000 个字符，但存储过程要大得多“嵌入式文档的原因”。[这里](http://social.msdn.microsoft.com/Forums/en-US/sqlreplication/thread/b7e91680-f317-4eca-b685-cfdf44ef2097/)提出了同样的问题

# testing - 如果我的项目需求不断变化，我应该使用测试用例吗？

> ID：11721895
> 
> 赞同：1
> 
> 时间：2012-07-30T12:46:51.207
> 
> 标签：testing, tdd, testcase

我项目中的需求变化太频繁。维护测试用例变得非常不方便。仍然建议使用测试用例吗？或者有什么好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:11:22.723

如果您必须更改代码，那么我认为维护测试工具比以往任何时候都更重要。测试工具是一种文档形式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T13:13:53.503

这是进行单元测试的痛苦的一部分。你应该坚持下去。

1.  当需求稳定下来时，您将处于一个更好的位置。
2.  没有测试，你会*更*容易受到攻击——当快速变化发生时，事情很可能会被意外破坏。
3.  如果你现在放弃测试，你很可能不会再把它捡回来......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:24:33.510

由于您已将此问题标记为“TDD”，因此请考虑如何通过测试驱动开发来实现更改的需求。在新需求的情况下，您将编写一个失败的测试来证明缺少新功能。在需求更改的情况下，您可能已经有测试显示（通过*传递*）该功能处于其原始状态。因此，*测试驱动*您的开发。更改您通过的测试，以便它们现在需要新行为 - 并且失败 - 现在通过实施更改的行为使它们通过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T19:13:02.237

您应该借此机会审查您的设计，看看是否有零件经常随着需求的变化而变化。您甚至可以对当前设计进行更改，将部件移动到两个分区中：一个大部分保持不变，一个大部分发生变化。

您可能能够隔离变化的部分，以便在需求发生变化时只需要添加新的代码/类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T13:19:22.877

我要对任何试图说服我 100% 测试覆盖率的人说的另一个论点是圣杯。

项目需求不会完全改变（除非这是一个非常小的项目）。毕竟总是有一些假设，断言，物理定律规定的限制:)

我建议检查需求并将它们分成不同的层。与第 2 层相比，第 1 层的需求发生变化的可能性较小。这样您就可以专注于波动较小的部分。最终需求生产者会感到疲倦（被替换，无聊）。

开发人员必须处于较差的状态。快速的需求更改将获得意大利面条代码。测试工具在某种程度上可能是意大利面条，但它确实是他们的救命稻草。保持它与这样的项目组织相适应是非常重要的。

# parallel-processing - 是什么让并行代码段和顺序代码段不同？

> ID：11721897
> 
> 赞同：0
> 
> 时间：2012-07-30T12:46:58.570
> 
> 标签：parallel-processing, pthreads, benchmarking, multicore, critical-section

我们确实有并行程序，这些程序又具有按顺序运行的关键部分。基本上，关键部分的大小很小，但是您认为这小段代码的行为与其他代码不同吗？例如：更多的缓存未命中或分支错误预测，这使得它们更加关键？

一些问题： 1）什么样的研究会揭示这个CS部分代码的内部细节或特征？

2) 什么是具有非常粗粒度锁定或更大 CS 的实时基准？

3) 像 PARSEC 和 SPLASH 这样的科学基准已经优化得很好，但是应该有很多应用程序为了性能而并行化但没有真正优化。你知道这样的应用吗？

我希望讨论的目的是明确的。如果没有，请让我知道以进一步澄清。

# php - 正则表达式：不包含

> ID：11721898
> 
> 赞同：2
> 
> 时间：2012-07-30T12:47:06.697
> 
> 标签：php, regex

我知道这个问题已经在 SO 上被问过很多次，但我似乎无法让它发挥作用。

我正在尝试使用正则表达式来查找任何 Facebook URL 的匹配项，**但不是**当 URL 包含“plugins/like”时（如“http://www.facebook.com/plugins/like”）

我提出了以下内容，但我不太确定它为什么不起作用：

```
https?://(www)?\.facebook\.[a-zA-Z]{2,4}/((?!plugins/like).) 
```

我犯了一个非常明显的错误吗？对不起，如果它根本没有意义，但在过去的五个月里我只尝试过 PHP。

非常感谢您的时间和帮助。

**编辑：** 到目前为止，我得到了任何 FB URL 的匹配项，但它不排除任何包含插件/类似的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:00:19.327

```
$urls = array(
    'http://www.facebook.com/',
    'https://facebook.com/plugins/foo',
    'http://facebook.ru/plugins/like',
);

$pattern = '#^https?://(www\.)?facebook\.[a-z]{2,4}/(?!plugins/like)#';

foreach ($urls as $url) {
    echo preg_match($pattern, $url) . PHP_EOL;
} 
```

好的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:06:52.787

这是一个使用的解决方案`strpos()`

```
$url = 'http://www.facebook.com/test/plugins/like?somestuff';

$matches = array();

if(preg_match('#^https?://(?:www)?\.facebook\.[a-zA-Z]{2,4}/(.*)$#', $url, $matches)
   && strpos($matches[1], "plugins/like") === false) {
  // ok
} else {
  // nope
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:06:23.410

你的一切都很好（它有效；我已经检查过了）。我唯一要改变的是写

```
(?!.*plugins/like) 
```

而不是`(?!plugins/like).`. 那是针对`plugins`不直接在`facebook.com/`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T12:52:07.130

您忘记转义模式中的特殊字符。像 : 和 / 这样的字符必须跟在反斜杠之后。

```
https?\:\/\/(www)?\.facebook\.[a-zA-Z]{2,4}\/((?!plugins\/like).) 
```

# android - Android 3.2 VideoView 冻结，音频继续

> ID：11721899
> 
> 赞同：2
> 
> 时间：2012-07-30T12:47:09.397
> 
> 标签：android, video, android-videoview

我正在流式传输 HLS，大约 10 分钟后，视频挂起但音频保持打开。然后，除了按住主页按钮让任务管理器强制关闭应用程序之外，我无法单击任何其他内容。有人知道怎么修这个东西吗？

# c# - 展开所有 TreeView 节点

> ID：11721900
> 
> 赞同：0
> 
> 时间：2012-07-30T12:47:09.377
> 
> 标签：c#, wpf, xaml, treeview, nodes

如何扩展此代码中的所有节点？

```
<TreeView ItemsSource="{Binding Path=.}" Height="220" HorizontalAlignment="Left" Margin="224,0,0,0" Name="treeView1" VerticalAlignment="Top" Width="162">
        <TreeView.ItemTemplate >
            <HierarchicalDataTemplate ItemsSource="{Binding Path=Children}">
                <StackPanel Orientation="Horizontal">
                    <CheckBox IsChecked="{Binding Path=IsChecked}" Focusable="False" Uid="{Binding Path=Id}" Click="CheckBox_Click"/>
                    <TextBlock Text="{Binding Path=Name}" Uid="{Binding Path=Id}"/>    
                </StackPanel>

            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate>
    </TreeView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:54:17.180

您可以在您的类上拥有一个布尔属性，例如 IsExapnded，该属性与树视图项绑定。将 IsExapnded 的默认值设置为 true 并将其与树视图项的 IsExpanded 属性绑定。

它将展开所有节点。

或者如果你只想在 xaml 中处理，你可以这样写：

```
<TreeView>
     <TreeView.ItemContainerStyle>         
       <Style TargetType="{x:Type TreeViewItem}">            
         <Setter Property="IsExpanded" Value="True" />         
       </Style>     
    </TreeView.ItemContainerStyle> 
</TreeView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:57:11.937

用这个：

```
<TreeView.ItemContainerStyle>
    <Style TargetType="TreeViewItem">
        <Setter Property="IsExpanded" Value="True" />
    </Style>
</TreeView.ItemContainerStyle> 
```

# svn - 如何监视远程只读颠覆存储库的提交更改并立即执行“svn update”？

> ID：11721902
> 
> 赞同：1
> 
> 时间：2012-07-30T12:47:11.973
> 
> 标签：svn

我想启用对提交更改的远程只读颠覆的监视并立即执行“svn update”。我怎么能这样做？

也许一些带有 svn 日志页面 wget 的脚本，剪切（grep）除第一行之外的所有内容与修订，将数字与本地副本进行比较（是否有一个 svn 命令将显示本地版本号？）它不相等然后运行“svn更新”并将此脚本设置为每分钟运行一次？

SVN：[http ://code.google.com/p/miranda/source/list](http://code.google.com/p/miranda/source/list)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:43:57.280

这可以解决问题：

```
#! /bin/bash

REMOTE_REPO="http://miranda.googlecode.com/svn/trunk/"
LOCAL_REPO="/lib/svn/miranda/"

REMOTE_REV=`svn info $REMOTE_REPO | grep '^Revision:' | awk '{print $2}'`
LOCAL_REV=`svn info $LOCAL_REPO | grep '^Revision:' | awk '{print $2}'`

if [ $REMOTE_REV -eq $LOCAL_REV ]; then
exit 0;
else
# Run your commands here.
cd $LOCAL_REPO
svn up
fi 
```

# flash - 关闭 Flash CS5.5 (JSFL) 中已修改文件的“保存更改”弹出窗口

> ID：11721906
> 
> 赞同：0
> 
> 时间：2012-07-30T12:47:18.793
> 
> 标签：flash, jsfl, flash-cs5.5

我正在使用 jsfl 脚本在大约 200 个 fla 文件上运行导出到 swf，这会打开 fla 文件运行来自 jsfl 的命令然后导出到 SWF，但是这会修改 FLA 文件以及当它想要从 flash 中关闭文件时它询问我是否要保存更改。

这变得相当烦人，因为我希望让它自动化。

有什么办法可以在 Flash CS5.5 高级版中关闭此功能。

启动闪存时，可能是 JSFL 文件或命令行的更改

现在我正在做

> %Path_TO_FLASH%\Flash.exe myscript.jsfl

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:10:55.073

错误已解决。见下文。

问题存在于 jsfl 文件中

```
var doc = fl.openDocument(Filepath):
%Various commands%
doc.close(false); //this is a bool value for PromtSaveDialog default is "true" 
```

我希望其他遇到同样问题的人能从中得到一些帮助

# c# - NullReferenceException：对象引用未设置为对象的实例

> ID：11721910
> 
> 赞同：-2
> 
> 时间：2012-07-30T12:47:30.697
> 
> 标签：c#, xml, image, byte

我正在尝试从 XML 文件中读取图像字节，但在第二行出现了该错误。

```
XmlNodeList list = docc.GetElementsByTagName("Meaning");
byte[] imageBytes = Convert.FromBase64String(list[index].Attributes["Meaning"].Value); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:50:38.907

在我看来，`list[index]`它没有名为`Meaning`. 那将是`"abc"`：

```
<Meaning Meaning="abc">...</Meaning> 
```

这听起来不太可能。另外：检查该位置的 xml 命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:55:06.627

在设置值之前

```
imageBytes 
```

， 核实

```
list 
```

不为空，并且

```
list[index].Attributes["Meaning"].Value 
```

存在并且也不为空！

您想在代码中创建 BreakPoint 以进行调试并查看您的问题和 var 内容。

并且，对于您提出的其他问题，请指定更多详细信息（确切的错误是什么，您如何知道错误在第二行，等等...）

# python - 如何从 homebrew、distribute、macports、pip 中卸载所有软件包？

> ID：11721913
> 
> 赞同：5
> 
> 时间：2012-07-30T12:47:49.537
> 
> 标签：python, pip, macports, homebrew, easy-install

在这一年中，我越来越熟悉在 OS X 上编程，我想在我最初的兴奋中，我安装了一大堆我不会使用并且污染了我的开发环境的东西。

特别是，我发现使用 pip、brew、port 和 easy_install，我已经为各种版本甚至不同的系统（Snow Leopard 和 Mountain Lion）添加了各种包。

所以现在，我想知道是否有什么方法可以让我从头开始？我更愿意保留我的文件和程序，因此无需重新安装操作系统。如果有一种简单的方法可以为这四个中的每一个批量卸载软件包，那将有很大帮助。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T13:15:06.757

`pip`并`easy_install`安装几乎相同的东西（两者都是安装大多数相同软件包的工具）。

首先获取所有已安装软件包的列表，因为您可能想要保留一些：

`$ pip freeze > packages.txt`

*这应该是一个相当大的文件，其中列出了您在默认系统 python*中安装的大多数（如果不是全部）包。

编辑该文件并删除您想要**保留**的那些包，因此它只包含您想要摆脱的那些（并且没有其他行或注释），然后调整以下脚本：

```
#!/bin/bash

for plugin in $(cat packages.txt); do
    PLUGIN=$(echo "$plugin" | awk -F == '{print }')
    echo "Uninstalling $PLUGIN..."
    expect -c "spawn pip uninstall $PLUGIN
    expect {
        \"Proceed (y/n)?\" {
            send \"y\r\n\"
            expect {
                exit
            }
        }
    }"    
done 
```

对于 macports，请参阅[卸载指南](http://guide.macports.org/#installing.macports.uninstalling)和相关警告。

对于 brew，请参阅[这个超级用户问题](https://superuser.com/questions/203707/how-to-uninstall-homebrew-osx-packet-manager)

巧合的是，这应该告诉您此类问题属于[superuser.com](http://superuser.com)，而不属于 stackoverflow - 这是用于编程相关查询的。

不用担心 - 最终会有人将您的线程移到那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-05T20:18:29.767

在 Linux 上，我使用：

```
$ pip freeze > args | pip uninstall -y -r args | rm args 
```

在 Windows 上，我使用：

```
$ pip freeze > args | pip uninstall -y -r args | del args 
```

`-y`标记自动确认删除，因此它不会提示您是否要删除该包 `-r`告诉使用需求文件，在我的示例中文件的名称是`args`由 pip freeze > args 创建的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-22T06:36:57.823

在 MacOS 上，您可以使用：

```
brew list | xargs brew uninstall 
```

# c# - C#获取两个日期时间范围之间的时间

> ID：11721915
> 
> 赞同：0
> 
> 时间：2012-07-30T12:47:58.290
> 
> 标签：c#, asp.net-mvc, datetime

大家好，我有 asp.net mvc4 应用程序，我在其中进行了如下倒计时：

我如何获得两个 daetime 范围内剩余的天数、小时数、分钟数和秒数

我试过这在几分钟内不起作用。`TotalMinutes`

```
datetime.TotalDays(); 
```

![在此处输入图像描述](../Images/d5771973ff99c95cbd51266333abcf1d.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T12:50:03.130

利用

```
Timespan remtime = YourLaunchDateTime - DateTime.Now; 
```

然后：

使用`remtime.Days`几天

使用`remtime.Hours`数小时

使用`remtime.Minutes`几分钟

使用`remtime.Seconds`几秒钟

不要使用任何`Total...`属性，因为它会将所有时间转换为该实体。

您正在使用`remtime.TotalMinutes`. 这会将您的时间转换为分钟。

例如。如果还剩 3 小时，这将返回 180 分钟 (bcoz 3 * 60 = 180)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T12:50:06.150

```
TimeSpan span = dateTime1 - dateTime2; 
```

`span`将包含所需的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T12:49:43.707

您应该使用`Minutes`而不是`TotalMinutes`. `TotalMinutes`对时间跨度内的所有分钟求和。

# php - 土耳其语字符阻止 Codeigniter（FUEL_CMS）中的管理面板

> ID：11721918
> 
> 赞同：-2
> 
> 时间：2012-07-30T12:48:07.770
> 
> 标签：php, fuelcms

我正在用fuel_cms(content management system) 写一个网站。我的问题是，当我在编辑面板中使用“ı,ö”等土耳其语字符时，管理面板在编辑后不会查看文本。反正有没有做燃料-php。接受土耳其特殊字符吗？

编辑：我与燃料 cms 的创建者有一些邮件。甚至管理面板链接也不适用于某些土耳其语字符。我们找不到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:10:51.583

您必须启用 CI 才能接受 UTF-8。

CI 大师 Phil Sturgeon 对此有一篇博文：http: [//philsturgeon.co.uk/blog/2009/08/utf-8-support-for-codeigniter](http://philsturgeon.co.uk/blog/2009/08/utf-8-support-for-codeigniter)

# c# - 在 asp.net mvc 3 中管理每个会话和请求的 AutoFac 生命周期范围

> ID：11721919
> 
> 赞同：5
> 
> 时间：2012-07-30T12:48:08.697
> 
> 标签：c#, asp.net-mvc-3, autofac

我想在 Web 应用程序中使用 AutoFac。我有根容器，每个会话有一个子容器，每个请求有一个子容器。我试图弄清楚管理这些生命周期范围的最佳方法是什么。在 Global.asax.cs 我添加了以下内容：

```
protected void Application_Start(object sender, EventArgs e)
{
    var container = ...;
}

protected void Session_Start(object sender, EventArgs e)
{
    var sessionScope = container.BeginLifetimeScope("session");

    Session["Autofac_LifetimeScope"] = sessionScope;
}

protected void Application_BeginRequest(object sender, EventArgs e)
{
    var sessionScope = (ILifetimeScope) Session["Autofac_LifetimeScope"];
    var requestScope = sessionScope.BeginLifetimeScope("httpRequest");

    HttpContext.Current.Items["Autofac_LifetimeScope"] = requestScope;
}

protected void Application_EndRequest(object sender, EventArgs e)
{
    var requestScope = (ILifetimeScope)HttpContext.Current.Items["Autofac_LifetimeScope"];
    requestScope.Dispose();
}

protected void Session_End(object sender, EventArgs e)
{
    var sessionScope = (ILifetimeScope)Session["Autofac_LifetimeScope"];

    sessionScope.Dispose();
}

protected void Application_End(object sender, EventArgs e)
{
    container.Dispose();
} 
```

1.  如何告诉 AutoFac 使用我的 requestScope 作为获取依赖项的起点，以便我注册为 InstancePerLifetimeScope 的实现将使用我的 requestScope 解决？

2.  如果这是不可能的，我可以让 AutoFac 在我的 sessionScope 之外创建其每个请求的生命周期范围吗？

3.  还是我在这里走错了路？是否有其他方法可以让 AutoFac 了解这种层次结构？

任何帮助或其他意见表示赞赏。

* * *

作为对史蒂文的回应。

我仍处于原型设计的早期阶段，但您在 sessionScope 中可能拥有的东西：

*   用户偏好
*   身份验证和授权上下文（例如用户身份和角色）

与我要构建的应用程序无关，但在电子商务环境中，购物车可以是会话范围的。这可能是最好的具体例子。您希望它比请求寿命更长，但比应用程序更短。

可能不止这些，但如果我有一个用户偏好、身份验证和授权策略，那么该策略也可以应用于稍后将创建的其他组件。

一种可能的替代方法是在请求开始时获取所有必要的信息，并将这些配置的组件放在请求范围内。它会给我我期望的结果，但它与我脑海中关于应用程序->会话->请求层次结构的模型不匹配。我希望创建一个有意义的系统，因为我绝对不是要维护它的人。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-30T17:06:05.967

你需要做的是实现你自己的`Autofac.Integration.Mvc.ILifetimeScopeProvider`. 此接口控制如何/在何处生成请求生命周期范围。默认的`Autofac.Integration.Mvc.RequestLifetimeScopeProvider`, 处理基于每个请求的生命周期范围的创建、处置和维护。

[您可以浏览`RequestLifetimeScopeProvider`此处](https://code.google.com/p/autofac/source/browse/src/Source/Autofac.Integration.Mvc/RequestLifetimeScopeProvider.cs?r=78fc513a3336369c6a5acf298daa1510d051716d)的代码，如果您打算这样做，我强烈建议您这样做。这是我能想到的最好的示例，其中包含显示其中一件事情的责任的工作代码。

您的实现`ILifetimeScopeProvider`将是您获取会话子容器的地方，从中生成请求容器，并在请求结束时清理请求容器。如果会话容器不存在，您可能还想在其中创建会话容器。处理会话容器的清理/处置可能会很棘手，但从设计的角度来看，如果它们都在一个地方而不是提供者中的一些地方，或者你的应用程序类中的一些地方，那就太好了。

一旦你有了你的`ILifetimeScopeProvider`，你将在设置依赖解析器时使用它。

```
var scopeProvider = new MyCustomLifetimeScopeProvider(container, configAction);
var resolver = new AutofacDependencyResolver(container, scopeProvider);
DependencyResolver.SetResolver(resolver); 
```

关于会话级范围概念的几句警告：

1.  **您的内存占用可能很大。**您最终将获得系统上每个用户的生命周期范围。虽然请求生命周期会很快出现并很快消失，但这些会话级范围可能会存在很长时间。如果您有很多会话范围的项目，那么您将为每个用户使用相当大的内存使用量。如果人们在没有正确注销的情况下“放弃”他们的会话，那么这些东西的寿命就会更长。
2.  **生命周期范围及其内容不可序列化**。[查看 LifetimeScope 的代码](https://code.google.com/p/autofac/source/browse/src/Source/Autofac/Core/Lifetime/LifetimeScope.cs)，它没有被标记`[Serializable]`……即使是这样，生活在其中的已解析对象也不一定都被标记为可序列化的。这很重要，因为这意味着您的会话级生命周期范围可能在具有内存会话的单个机器上工作，但是如果您使用 SQL 会话或会话服务部署到场，事情将会崩溃，因为会话无法序列化您存储的范围。如果您选择不序列化范围，那么跨机器的每个用户都有不同的范围 - 这也是一个潜在的问题。
3.  **会话并不总是补水**。如果正在访问的处理程序（例如，Web 表单）没有实现[IRequiresSessionState](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.irequiressessionstate)，则会话将不会被重新水化（无论它是否在进程中）。Web 表单和[MvcHandler](http://msdn.microsoft.com/en-us/library/system.web.mvc.mvchandler.aspx)默认实现了这一点，因此您不会看到任何问题，但如果您有需要注入的自定义处理程序，您会遇到一些障碍，因为这些请求不存在“会话”。
4.  **Session_End 并不总是触发**。[根据 SessionStateModule.End 上的文档](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstatemodule.end.aspx)，如果您使用进程外会话状态，您实际上不会获得 Session_End 事件，因此您将无法清理。

鉴于这些限制，尝试远离会话存储范围通常是件好事。但是......如果这就是你要做的，那`ILifetimeScopeProvider`就是这样做的方法。

# ruby-on-rails - dependent deletes on polymorphic relations

> ID：11721923
> 
> 赞同：0
> 
> 时间：2012-07-30T12:48:23.543
> 
> 标签：ruby-on-rails

I'm using a Polymorphic relation with multiple tables. Object Window has ChartWindow, PluginWindow or PortletWindow. I used a class_eval (relate_to_details) technique to define detail tables so that each object can have it's own table with distinct attributes.

PluginWindowDetail is the detail table for PluginWindow. PluginWindow has a plugin_id (plugin_window_details.plugin_id) So, I defined a has_one association in PluginWindow ( has_one :plugin_window_detail, :dependent => :delete) because I want the Window to be deleted with the Plugin is deleted.

However, I realized that this isn't getting me what I want. Deleting the PluginWindowDetail won't delete the PluginWindow.. and since I'm using the class_eval technique instead of a regular ActiveRecord association, I'm not sure how I can do this without coding it myself (which maybe I should)

Anyways.. gists with code are here [https://gist.github.com/3206666](https://gist.github.com/3206666) . Any help would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:16:46.850

I think the simpler way to do it is to use the before_destroy callback. It will be more flexible.

# java - 如何提高列表视图的性能？

> ID：11721930
> 
> 赞同：0
> 
> 时间：2012-07-30T12:48:49.853
> 
> 标签：java, android, listview

当我在 a 中使用来自互联网的图像时`Listview`，我的`Listview`滚动速度非常慢。
但在某些应用程序中，例如 Twitter、Google+ 和其他应用程序（尽管显示来自互联网的图像），滚动没有问题，而且非常快速和流畅。

如何提高`Listview`图像的性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:51:36.353

看看这个，[来自 Larse Vogella 的列表视图性能优化](http://www.vogella.com/articles/AndroidListView/article.html#listsactivity_performance)

您还可以使用`endless list`或`lazy loading`仅在列表视图中加载部分数据并在用户到达列表底部 [延迟加载](https://stackoverflow.com/questions/4667064/android-implementing-endless-list-like-android-market)或 [Commonsware 的适配器以进行无休止加载时加载其他数据](https://github.com/commonsguy/cwac-endless)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:53:53.697

有一些 ThumbRules 可以帮助您优化列表视图：

-> 使用 ConvertView 重用视图，在

```
`getView(AdapterView<?> adapterView, View convertView, int position, long id)` 
```

->。使用延迟加载从网络加载图像，请参阅

[http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/](http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/)

-> 也使用 ViewHolders 来改善充气时间。检查链接：

[http://jmanzano.me/efficient-listviews-in-android-viewholder-pattern-2/](http://jmanzano.me/efficient-listviews-in-android-viewholder-pattern-2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:11:19.083

在您的列表视图中使用 LoaderImageView。[你可以从这里](http://blog.blundell-apps.com/imageview-with-loading-spinner/) 获取 LoaderImageView 代码[http://blog.blundell-apps.com/imageview-with-loading-spinner/](http://blog.blundell-apps.com/imageview-with-loading-spinner/)

修改LoaderImageView代码，存放下载的drawable

# java - ical文件问题

> ID：11721931
> 
> 赞同：1
> 
> 时间：2012-07-30T12:48:50.173
> 
> 标签：java, lotus-notes, icalendar

这个问题真的让我很沮丧。我正在开发一个为用户创建 ical 文件的 webapp。

我面临的问题是，每当 ical 事件每周或每天或每月重复时，Lotus Notes 中的开始时间就会显示错误。正如您在以下文件中看到的，开始时间是上午 9:00，但是在 Lotus Notes（带有日历的电子邮件客户端）中，这显示完全错误（如上午 5:00）。我尝试向 DTSTART 和 DTEND 添加时区，但这并不能解决问题，反而会产生更多问题。语法可能有问题吗？用我生成ical文件的方式？由于某种原因，结束时间也正确显示，只有开始时间是错误的。

```
BEGIN:VCALENDAR
PRODID:-//Test event//iCal4j 1.0//EN
VERSION:2.0
BEGIN:VEVENT
DTSTAMP:20120730T124016Z
DTSTART:20120730T090014
DTEND:20120730T100014
SUMMARY:Test Meeting
UID:3988c7e1-4dd1-4e0c-b132-e829beac0592
LOCATION:test: at CR
DESCRIPTION:
RRULE:FREQ=WEEKLY;COUNT=30
END:VEVENT
END:VCALENDAR 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:43:26.630

我想通了，我只需要指定一个 Vtimezone。如果其他人遇到这个问题；像下面这样的东西可以解决它。

```
> BEGIN:VTIMEZONE TZID:Eastern BEGIN:STANDARD DTSTART:19501105T020000
> TZOFFSETFROM:-0400 TZOFFSETTO:-0500
> RRULE:FREQ=YEARLY;BYMINUTE=0;BYHOUR=2;BYDAY=1SU;BYMONTH=11
> END:STANDARD BEGIN:DAYLIGHT DTSTART:19500312T020000 TZOFFSETFROM:-0500
> TZOFFSETTO:-0400
> RRULE:FREQ=YEARLY;BYMINUTE=0;BYHOUR=2;BYDAY=2SU;BYMONTH=3 END:DAYLIGHT
> END:VTIMEZONE 
```

# mysql - MySQL比较结果0和1

> ID：11721935
> 
> 赞同：1
> 
> 时间：2012-07-30T12:48:56.540
> 
> 标签：mysql, select, compare

我需要从两个选择中得到一个结果，然后比较它们。

它们的值应该返回**0*或*1**，如果其中一个是 1，那么它就是 1。1 总是比 0 具有更高的优先级。

这个：

1.  第一个返回**0**，第二个返回**1**，然后是**1**。
2.  第一个返回**1**，第二个返回**0**，然后是**1**。
3.  两者都返回**1**，显然是**1**。
4.  两者都返回**0**，最后是**0**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:51:17.457

将两个表达式包装起来[`GREATEST()`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_greatest)以返回最大值，`1`如果其中一个是`1`，`0`如果两者都不是：

```
SELECT GREATEST(col1, col2) AS result 
```

如果它跨越两个子选择：

```
SELECT GREATEST(
  (SELECT col1 FROM tbl1 WHERE val='something'),
  (SELECT col2 FROM tbl2 WHERE val='something else')
) AS result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:27:51.267

只需将其包装在另一个 SELECT 中并使用 OR。MySQL 已经将 1 视为真，将 0 视为假。

试试这些：

```
SELECT (SELECT 1) OR (SELECT 0) AS result
// Returns 1

SELECT (SELECT 0) OR (SELECT 0) AS result
// Returns 0 
```

# scala - 协变类型 T 出现在不变的位置

> ID：11721936
> 
> 赞同：13
> 
> 时间：2012-07-30T12:48:56.777
> 
> 标签：scala, covariance, invariants

我正在 Scala 中迈出第一步，我想让以下代码工作：

```
trait Gene[+T] {
    val gene: Array[T]
} 
```

编译器给出的错误是：`covariant type T occurs in invariant position in type => Array[T] of value gene`

我知道我可以做类似的事情：

```
trait Gene[+T] {
    def gene[U >: T]: Array[U]
} 
```

但这并不能解决问题，因为我需要一个值：实际上我想说的是“我不在乎内部类型，我知道基因将具有返回其内容的基因字段”。（这里的 +T 是因为我想做类似的事情`type Genome = Array[Gene[Any]]`，然后将其用作单个基因类的包装器，这样我就可以拥有异构数组类型）是否可以在 Scala 中做到这一点，或者我只是采取了错误的方法? 使用不同的结构会更好吗，比如 Scala 原生协变类？

提前致谢！

PS：我也尝试过使用类和抽象类而不是特征，但结果总是相同！

编辑：在 Didier Dupont 的善意建议下，我来到了这段代码：

```
package object ga {

  class Gene[+T](val gene: Vector[T]){

    def apply(idx: Int) = gene(idx)

    override def toString() = gene.toString

  }

  implicit def toGene[T](a: Vector[T]) = new Gene(a)

  type Genome = Array[Gene[Any]]

} 
```

* * *

```
package test

import ga._

object Test {
    def main(args: Array[String]) {
        val g = Vector(1, 3, 4)

        val g2 = Vector("a", "b")

        val genome1: Genome = Array(g, g2)

        println("Genome")

        for(gene <- genome1) println(gene.gene) 
    }
} 
```

所以我现在认为我可以放入和检索不同类型的数据，并将它们与所有类型检查的好东西一起使用！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-30T13:09:00.357

数组是不变的，因为您可以在其中写入。

假设你这样做

```
val typed = new Gene[String]
val untyped : Gene[Any] = typed // covariance would allow that
untyped.gene(0) = new Date(...) 
```

这会崩溃（您实例中的数组是 Array[String] 并且不会接受 Date）。这就是编译器阻止这种情况的原因。

从那里开始，这在很大程度上取决于您打算对 Gene 做什么。您可以使用协变类型而不是`Array`（您可能会考虑`Vector`），但这将阻止用户改变内容，如果这是您想要的。你也可以在类中有一个 Array，只要它是 decladed 的`private [this]`（这也使得改变内容变得非常困难）。如果您希望允许客户端更改 Gene 的内容，则可能无法使 Gene 协变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T13:08:17.427

的类型`gene`需要在其类型参数中是协变的。为此，您必须选择不可变的数据结构，例如列表。但是您可以使用`scala.collection.immutable`包中的任何数据结构。

# java - RESTeasy HTTP 代理 - SOCKS 错误

> ID：11721938
> 
> 赞同：2
> 
> 时间：2012-07-30T12:49:07.240
> 
> 标签：java, proxy, resteasy

我在结合 RESTeasy 的 ClientRequest 类时遇到 Java 的 useSystemProxy-Feature 问题：

```
ClientRequest request = new ClientRequest(Config.getInstance().getProperty(Config.UPDATE_URL));
ClientResponse<FullscreenUpdateTransfer> response = request.get(FullscreenUpdateTransfer.class);
if (response.getStatus() != Response.Status.OK.getStatusCode())
{
    throw new Exception("HTTP Status Response: " + response.getStatus());
} 
```

大约一分钟后抛出：

```
java.net.SocketException: Malformed reply from SOCKS server
    at java.net.SocksSocketImpl.readSocksReply(SocksSocketImpl.java:90)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:429)
    at java.net.Socket.connect(Socket.java:529)
    at java.net.Socket.connect(Socket.java:478)
    at java.net.Socket.<init>(Socket.java:375)
    at java.net.Socket.<init>(Socket.java:249)
    at org.apache.commons.httpclient.protocol.DefaultProtocolSocketFactory.createSocket(DefaultProtocolSocketFactory.java:79)
    at org.apache.commons.httpclient.protocol.DefaultProtocolSocketFactory.createSocket(DefaultProtocolSocketFactory.java:121)
    at org.apache.commons.httpclient.HttpConnection.open(HttpConnection.java:706)
    at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:386)
    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:170)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:396)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:324)
    at org.jboss.resteasy.client.core.executors.ApacheHttpClientExecutor.execute(ApacheHttpClientExecutor.java:64)
    at org.jboss.resteasy.core.interception.ClientExecutionContextImpl.proceed(ClientExecutionContextImpl.java:39)
    at org.jboss.resteasy.plugins.interceptors.encoding.AcceptEncodingGZIPInterceptor.execute(AcceptEncodingGZIPInterceptor.java:40)
    at org.jboss.resteasy.core.interception.ClientExecutionContextImpl.proceed(ClientExecutionContextImpl.java:45)
    at org.jboss.resteasy.client.ClientRequest.execute(ClientRequest.java:448)
    at org.jboss.resteasy.client.ClientRequest.httpMethod(ClientRequest.java:655)
    at org.jboss.resteasy.client.ClientRequest.get(ClientRequest.java:483)
    at org.jboss.resteasy.client.ClientRequest.get(ClientRequest.java:503)
    at de.taf.easygo.modules.dfimanager.database.logic.Update.run(Update.java:110)
    at java.util.TimerThread.mainLoop(Timer.java:512)
    at java.util.TimerThread.run(Timer.java:462) 
```

因此，RESTeasy 似乎告诉 Apache HTTP 客户端使用 SOCKS 代理。（现在我重新阅读了堆栈跟踪，似乎 Apache HTTP 客户端命令 Socket 使用 SOCKS 代理。）现在一直在寻找解决方案。我通过使用 HttpUrlConnection 多次解决它，然后手动将结果提供给 JaxbContext。不是很方便，尤其是涉及到 PUT 请求时，所以我想问一下是否有人解决了这个问题。

当然，我为此使用了经过测试/工作的 HTTP 代理。

我没有通过 proxyHost/proxyPort 属性提供代理的选项。我需要使用 java.net.useSystemProxies。

# android - 在应用程序中使用 OnPause 和 OnResume

> ID：11721939
> 
> 赞同：0
> 
> 时间：2012-07-30T12:49:07.357
> 
> 标签：android

我正在制作一个应用程序，我想让控件进入某些活动然后返回。`OnPause()`当我搜索该问题时，我开始知道使用and可以解决此问题`OnResume()`，但我不知道如何使用它们。

这是我将控件转移到其他活动的代码。请告诉我如何使用`OnPause()`以及`OnResume()`在这方面。在此先感谢。

```
Intent intent = new Intent(MCQ.this,ConfigActivity.class);
            int ClassIndex = 2;
            intent.putExtra("ClassIndex", ClassIndex);
            startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:01:41.283

你没有太多意义。当您调用 时`startActivity()`，Android 会将您的 current`Activity`置于后台，并启动（或置于前台）`Activity`您在`Intent`.

`onPause()``Activity`当您从屏幕上消失时调用，例如。系统要么将其置于后台，要么终止它。

`onResume()``Activity`当您在屏幕上可见时调用，例如。要么是在`onCreate()`Android 创建了你的新实例之后`Activity`，要么是当系统将你`Activity`从后台带回来时。

之间没有明确的控制传递`Activities`。如果它位于活动堆栈的顶部（在设备屏幕上可见），则您可以与它进行交互。

[http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:01:17.207

我想你可能对什么`onPause()`和`onResume()`用于什么感到困惑。

`onResume()`当 Activity 即将向用户显示它的视图时调用。您可以在此方法中使用您的意图，以便主 Activity 会立即转到该`ClassIndex`Activity。但是，当您离开`ClassIndex`活动时，`onResume()`将再次调用它会将您送回`ClassIndex`。

`onPause()`在 Activity 离开时调用。这是为了锁定屏幕还是移动到另一个`Activity`。在这种情况下，当你`startActivity`在主Activity中调用时，Android会`onPause()`在进入新的主Activity之前调用主Activity。

在这种情况下，您可能想要使用[startActivityForResult()](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)`ClassIndex`并使用它来确定您是否从活动中回来。如果没有，那就开始吧。如果是这样，那么继续进行主要活动。

一个更好的解决方案可能是或可能不是在`ClassIndex`用户完成应用程序时启动应用程序并移动到您的主要活动。如果您想在`ClassIndex`每次用户进入应用程序时移动到，就会出现这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T12:57:22.633

`onPause()`并由`onResume()`android调用。
你的工作是实现这些方法。onPause 和 onStop 在 Android 启动时调用，onCreate、onStart 和 onResume 在启动时调用。如果要返回，通常只需按设备上的返回按钮即可。
您可能想查看[Android devGuide](http://developer.android.com/guide/components/activities.html)，尤其是 Activity 生命周期。

# android - android设备的后退按钮在rhomobile中不起作用

> ID：11721941
> 
> 赞同：3
> 
> 时间：2012-07-30T12:49:17.183
> 
> 标签：android, rhomobile, rhodes

我是 rhomobile 的新手。我为 3 个屏幕创建了示例应用程序。我正在尝试使用设备的后退按钮来重定向以前的屏幕。但是后退按钮不起作用。它仍然在相同的屏幕上。另外，当我们在第一个屏幕上时，我想关闭设备后退按钮上的应用程序。我们可以以编程方式做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T02:15:48.647

回复很晚，但可能对看到这篇文章的人有用。

在 android 中（这似乎不适用于 Windows Mobile）你会使用

```
 render :back => url 
```

其中 url 是您希望返回的 url

关于此的简短文档的链接：

[http://docs.rhomobile.com/rhodes/ui#redefine-back-action](http://docs.rhomobile.com/rhodes/ui#redefine-back-action)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:17:44.697

你能提供代码吗？这是使用元标记的后退按钮示例

```
<META HTTP-Equiv="BackButton" Content="Visibility:Visible">
<META HTTP-Equiv="BackButton" Content="Left:50">
<META HTTP-Equiv="BackButton" Content="Top:50">
<META HTTP-Equiv="BackButton" Content="Width:30">
<META HTTP-Equiv="BackButton" Content="Height:30"> 
```

[返回键](http://docs.rhomobile.com/rhoelements/backbutton)

退出按钮：

```
<META HTTP-Equiv="QuitButton" Content="Visibility:Visible">
<META HTTP-Equiv="QuitButton" Content="Left:50">
<META HTTP-Equiv="QuitButton" Content="Top:50"> 
```

这是如何退出按钮的链接：

[退出按钮](http://docs.rhomobile.com/rhoelements/quitbutton)

# java - Java 中的 ViewModel (Spring)

> ID：11721945
> 
> 赞同：2
> 
> 时间：2012-07-30T12:49:24.753
> 
> 标签：java, asp.net-mvc, model-view-controller, spring-mvc, viewmodel

我已经阅读了很多关于在 ASP.Net MVC 中使用 ViewModel 的内容，实际上我自己也使用了该模式。

现在我正在研究 Java 中的 MVC（特别是使用 Spring 框架），它似乎没有引起任何关注。

这是什么原因？

还有其他更适合Java的机制吗？

（这个想法当然是将应用程序的核心模型与一些视图模型分开，后者更特定于视图）

# c# - 无法让延迟的 LINQ 语句在 nHibernate 中工作

> ID：11721947
> 
> 赞同：1
> 
> 时间：2012-07-30T12:49:27.343
> 
> 标签：c#, nhibernate

尝试使用 NHibernate 的 LINQ 提供程序编写动态查询，但我遇到了问题。我的理解是 LINQ 查询被推迟到调用，（即使用 ToList()），所以我有以下代码：

```
string[] filteredIds = new[] { "someIdNotInUse"};

var result = _products
    .GetAll()
    .Skip(0)
    .Take(10);

if (filteredIds != null) 
{
    result.Where(x => x.Child1.Child2.Any(z => filteredIds.Contains(z.Child3.Id)));
}

var r = result.ToList(); 
```

不应用条件块中的 Where 过滤器；当我运行 .ToList 时，我得到了我期望没有的记录。但是，如果我删除 where 过滤器并将其直接附加到 _products 调用，它会按预期工作。我是否误解了 LINQ 提供程序的工作原理？如何在不为每个可能的过滤条件和组合重写查询的情况下创建这样的查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T12:51:05.620

LINQ 中的方法不会影响它们被调用的对象——它们返回一个表示调用结果的*新*对象。所以你要：

```
if (filteredIds != null) 
{
    result = result.Where(...);
} 
```

（把它想象成有点像在一个字符串上调用`Replace`或`Trim`- 字符串是不可变的，所以只有返回值才是重要的。）

# mysql - 在 MySQL 中获取当前正在执行的存储过程名称？

> ID：11721949
> 
> 赞同：5
> 
> 时间：2012-07-30T12:49:41.047
> 
> 标签：mysql, function, stored-procedures, information-schema

我需要一个我在 MySQL 中编写的存储过程的日志。我知道这在 MS SQL Server 中作为@@procid 可用。

MySQL中的等价物是什么？

我将使用时间戳、connection_id、database()。

如何获取我正在执行的 sp 的名称？那个叫我的sp呢？

谢谢，亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:20:35.400

您可以将过程名称作为 IN 参数传递给被调用的过程，并从这些过程中记录此信息。

例如 -

```
DELIMITER $$

CREATE PROCEDURE procedure1(IN proc_name VARCHAR(255))
BEGIN
  INSERT INTO proc_log VALUES('procedure1', proc_name, NOW());
END$$

CREATE PROCEDURE procedure2(IN proc_name VARCHAR(255))
BEGIN
  INSERT INTO proc_log VALUES('procedure2', proc_name, NOW());
  CALL procedure1('procedure2');
END$$

DELIMITER ;

CALL procedure2(NULL);

SELECT * FROM proc_log;
+------------+----------------+---------------------+
| proc_name  | call_proc_name | call_ts             |
+------------+----------------+---------------------+
| procedure2 | NULL           | 2012-07-30 16:17:53 |
| procedure1 | procedure2     | 2012-07-30 16:17:53 |
+------------+----------------+---------------------+ 
```

# java - 如何将频道 api 集成到 phonegap 中？

> ID：11721950
> 
> 赞同：1
> 
> 时间：2012-07-30T12:49:42.320
> 
> 标签：java, google-app-engine, servlets, jquery-mobile, cordova

我在 gae 上编写了两个 servlet（使用通道 api），可以建立连接 f.ex.：用于聊天 作为 UI，我将使用 JqueryMobile。

我的问题是：

*   如何将 servlet 的操作集成到 phonegap 中？
*   我应该使用任何其他库还是可以通过 action="...\servlet"（RESTful 通信）。
*   有没有最佳实践？

我很感激你的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:07:54.547

Channels API 依赖于浏览器打开页面时从 AppEngine 下载的自定义 javascript：[请参阅 javascript 文档](https://developers.google.com/appengine/docs/java/channel/javascript)。

此自定义 JS 代码可能会在 GAE 版本更改时发生更改，因此您无法将其嵌入到您的 PhoneGap 应用程序中。此外，它可能依赖于特定于浏览器的功能，这很难检查，因为它是一段封闭的代码，并且没有解释它的内部结构。

如果您需要异步通知，我建议您使用PhoneGap 上可用的[本机推送技术。](http://wiki.phonegap.com/w/page/37159628/Notifications)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:28:23.597

阅读频道 API 文档。这一切都在那里。

您可能想要添加一个 API 来生成一个新的令牌，以防您的连接超时。您还需要处理来自客户端的重新连接，以防您断开连接（即 socketerror 事件）

# objective-c - 索引数组

> ID：11721955
> 
> 赞同：-1
> 
> 时间：2012-07-30T12:50:12.240
> 
> 标签：objective-c, macos, indexing

## 概述

我有绘画APP。它注册鼠标事件并将其发送到 NSMutableArray。数组中的后续值被传输到 GLfloat 并像顶点数组一样绘制。因此，所有画笔笔触都会在每次鼠标事件时重绘。

## 我想做的事？

我想实现撤消重做功能和诸如笔触多样性（柔软度等）之类的东西，所以我需要以某种方式做到每个顶点（鼠标事件位置）都可以有一些额外的设置。我想问这是否可能。

## 解释

如果用户以*100% 的柔软度绘制**10 个点*（在一次鼠标拖动中），然后将柔软度更改为*0%*并进行绘制，则必须将前*10 个点的*笔刷纹理设置为*img1*，然后将第二个笔触笔刷的纹理设置为*img2*。

 ***如果有可能对数组进行索引（例如像这样的东西`NSMutableArray *array[i++] = [[NSMutableArray alloc] init]`），我认为可以做一些类似于我想要的很容易的事情。但有可能吗？或者你可以建议任何其他解决方案？

PS`NSMutableArray *array[i++] = [[NSMutableArray alloc] init]`没有显示任何错误，但也不起作用。

* * *

尝试使用`NSMutableDictionary`

在 mousedown 和 mousedraged 时：

```
locll = [self convertPoint: [event locationInWindow] fromView:nil];
NSValue *locationValuell = [NSValue valueWithPoint:locll];
[vertices addObject:locationValuell]; 
```

在 mouseUp

```
NSString *index = [NSString stringWithFormat:@"%d", aIndex++];
[aDict setObject:vertices forKey:index];
NSArray *allKeys = [aDict allKeys];
NSLog(@"dict count: %ld", [allKeys count]);
NSString *index1 = [NSString stringWithFormat:@"%d", aIndex];
NSMutableArray *a = [aDict objectForKey:index1];
NSLog(@"a count:%li", [a count]); 
```

在 initWithCoder

```
int aIndex = 0; 
```

dict count 返回有多少对象存储在字典中。它有效。但后来当我尝试从字典中取回数组时，我检查了数组中有多少对象，它返回 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:57:25.703

您可以将您的数组作为其他对象使用，您可以使用`[YourArray insertObject:YourArray atIndex:i++]]`然后使用`[YourArray objectAtIndex:i]`来获取您的数组

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:11:32.973

如果我理解你的问题是正确的，这就是你可以做的：

*   每次鼠标拖动将是 1 条路径，即`NSMutableArray`具有相同柔软度的点。
*   将此添加到 a`NSMutableDictionary`中，其中***Key*** 作为软度级别，***Value***与此路径数组。
*   遍历字典得到对应的***Key-Value*** 对并​​画出笔画。
*   对于**UNDO** ，只需删除字典的最后一个对象并存储在临时字典中。
*   对于**重做**，从临时字典中取回并添加到主字典中。

* * *

感谢发布代码。我试过这个，它工作得很好：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    int aIndex = 0;
    NSMutableDictionary *aDict =[[NSMutableDictionary alloc]init];
    NSMutableArray *vertices = [[NSMutableArray alloc]init];
    [vertices addObject:@"one"];
    [vertices  addObject:@"two"];
    [vertices addObject:@"three"];

    NSString *index = [NSString stringWithFormat:@"%d", aIndex++];
    [aDict setObject:vertices forKey:index];

    NSArray *allKeys = [aDict allKeys];
    NSLog(@"dict count: %d", [allKeys count]);  // Prints 1

    NSMutableArray *a =[aDict objectForKey:index];
    NSLog(@"a item count is :%d", [a count]);   // prints 3
} 
```

注意：小心您传递的索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T13:12:11.930

您可以创建一个矢量或 VAO，并为每个画笔描边添加一个 VAO。将 VAO 包装在一个类中，该类还包含其他信息，例如画笔类型。这应该可以让您识别每个笔画的类型并正确渲染它们。***

# c#-4.0 - 错误：无效的 Json 文本。使用 C# 实时联系时

> ID：11721960
> 
> 赞同：0
> 
> 时间：2012-07-30T12:50:29.553
> 
> 标签：c#-4.0, windows-8, live

我正在尝试使用 c# 和 Xaml 开发一个简单的 Metro 风格应用程序，它可以与我的真实帐户对话并执行一些基本的文件上传/下载之类的事情。甚至我为此在网上获得了许多代码示例。我为此使用 live sdk 5.2，并使用 win 8 release preview 和 VS 2012 RC。

问题是出现错误：以下代码片段中的“Inalid Json Text”

```
LiveConnectClient client=new LiveConnectClient(e.session);

Var operationResult = await client.GetAsync("me"); 
```

第二行是错误的来源。`GetAsync`方法要准确。如果我提供了错误的输入，请指导我。

我什至查看了与 SDK 相处的自述文档，但它无法让我摆脱这个问题。

提前致谢

# c++ - 必须使用普通旧数据的情况示例？

> ID：11721963
> 
> 赞同：1
> 
> 时间：2012-07-30T12:50:35.423
> 
> 标签：c++

> C++98 中的联合不能包含具有虚函数或非平凡构造函数或析构函数的类。

您知道哪些情况下必须使用[POD](http://en.wikipedia.org/wiki/Plain_old_data_structure)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:16:11.937

与非 C++ API（通常是 C 风格的 API）交互时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T13:23:40.143

需要 POD 的一种情况是直接转换到/从字节序列。

需要 POD 的另一种情况是类型必须保证实例化除了使用一点内存之外没有任何影响，例如在以下类中：

```
namespace detail {
    using std::vector;

    template< class Type, Podness::Enum podNess = Podness::isPod >
    class ValueWrapper_
    {
    private:
        Type    v_;

    public:
        Type const& ref() const { return v_; }

        ValueWrapper_() {}       // No initialization
        ValueWrapper_( Type const v ): v_( v ) {}
    };

    template< class Type >
    struct ValueWrapper_< Type, Podness::isNotPod >
    {
    private:
        vector<Type>    v_;     // General but incurs allocation overhead.

    public:
        Type const& ref() const { return v_[0]; }

        ValueWrapper_() {}       // Supports apparent no initialization.
        ValueWrapper_( Type const v ): v_( 1, v ) {}
    };
}    // namespace detail

template< class Type >
class Optional_
{
private:
    typedef detail::ValueWrapper_<Type, Podness_<Type>::value > Wrapper;

    Wrapper const   value_;
    bool const      isNone_;

    Optional_& operator=( Optional_ const& );         // No such.

public:
    bool isNone() const { return isNone_; }

    Type const& value() const
    {
        hopefully( !isNone_ )
            || throwX( "Optional_::value(): there is no value" );
        return value_.ref();
    }

    Optional_(): isNone_( true ) {}
    Optional_( Type const& v ): value_( v ), isNone_( false ) {}

    static Optional_ none() { return Optional_(); }
};

template<>
class Optional_< void >
{
private:
    Optional_& operator=( Optional_ const& );         // No such.

public:
    bool isNone() const { return true; }

    void value() const
    {
        throwX( "Optional_::value(): there is no value" );
    }

    Optional_() {}
    static Optional_ none() { return Optional_(); }
}; 
```

嗯，想不到第三种情况……

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T13:03:41.377

语法

```
X a = {1, 2, 3}; 
```

`std::initializer_list`仅适用于 POD，尽管在 C++11中取消了此限制。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T12:53:31.737

解析二进制文件中的一些结构，例如

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T13:01:34.413

解析通信协议是另一回事。

# tomcat - 如何将多个上下文映射到Tomcat中的同一个war文件？

> ID：11721966
> 
> 赞同：15
> 
> 时间：2012-07-30T12:50:42.233
> 
> 标签：tomcat, mapping, contextpath

我正在使用 tomcat 部署我的应用程序，我想部署为一个单一的战争，以服务多个上下文路径。

目前我有 app1.war 和 app2.war，但两者都有相同的内容，只是名称不同，通过 http:///app1 和 http:///app1.war 访问。但我想这样做，部署 app.war 并通过 app1 和 app2 上下文路径访问它。可以在tomcat中做吗？请帮我解决这个问题

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-31T01:34:41.603

这可以通过多种方式完成。我认为这种方式是最直接的：

1.  将 WAR 文件移到`webapps/`自动部署目录之外
2.  `META-INF/context.xml`从您的 WAR 文件中提取。如果您的 WAR 没有`META-INF/context.xml`文件，则只需使用其中只有一个文件的`<Context />`文件
3.  将此文件复制到 Tomcat 的`conf/[service]/[host]/`目录中，同时作为`app1.xml`和`app2.xml`. （[service] 通常是“Catalina”，而 [host] 是虚拟主机的名称：在默认的 Tomcat 配置中，主机名始终是“localhost”）。
4.  编辑`app1.xml`and`app2.xml`并将元素的`docBase`属性设置`<Context>`为指向您在步骤 #1 中移动的 WAR 文件
5.  重新启动Tomcat

这应该为您提供一个物理 WAR 文件和从中部署的多个上下文。

尽管 Tomcat 支持这种配置，但我建议不要这样做：磁盘空间很便宜，它在运行时不会发生任何变化（您仍然会在内存中获得所有内容的两个副本），并且您失去了将不同 WAR 文件部署到不同上下文和/或更新的灵活性它们分开而不修改*两个*上下文的配置。

如果您需要我的建议，请坚持使用重复的 WAR 文件。

# php - call_user_func_array 和 array_multisort

> ID：11721976
> 
> 赞同：0
> 
> 时间：2012-07-30T12:51:14.007
> 
> 标签：php, mysql, arrays, sorting, sortdirection

我有排序方向的问题。我尝试使用方向对多维数组进行排序。我不能`array_multisort()`直接使用，因为我不知道会有多少个参数。我使用`call_user_func_array('array_multisort', $params);`And it works，但我无法设置排序方向 ( `SORT_ASC,SORT_DESC`)。如何设置排序方向`call_user_func_array('array_multisort', $params);`？这是我的代码，你可以试试

```
function get_fields($data, $order_by) {
    $order_row = preg_split("/[\s,]+/", $order_by);
    for ($i=0;$i<count($order_row);$i++) {
        foreach ($data as $key => $row) {
          $tmp[$i][$key]  = $row[$order_row[$i]];      
        }
    }
    return $tmp;
}

function ordering($data, $order_by) {
    $tmp = get_fields($data, $order_by);
    $params = array();
    foreach($tmp as &$t){
        $params[] = &$t;
    }

    $params[1] = array("SORT_DESC","SORT_DESC","SORT_DESC","SORT_DESC"); // like that no warning but no sorting

    $params[] = &$data;
    call_user_func_array('array_multisort', $params);
    return array_pop($params);
}

$data = array (
    array('id' => 1,'name' => 'Barack','city' => 9),
    array('id' => 7,'name' => 'boris','city' => 2),
    array('id' => 3,'name' => 'coris','city' => 2),
    array('id' => 3,'name' => 'coris','city' => 2)
);

$order_by = "city desc, name";

echo "<br>ORDER BY $order_by<br>";
$ordered = ordering($data, $order_by);
echo "<pre>";
var_dump($ordered);
echo "</pre>"; 
```

我想做一个类似 MySQL 的排序`ORDER BY city DESC, name`。这是我的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:46:48.543

为了能够对数组进行多次排序并获得类似的结果，`ORDER BY city DESC, name ASC`您需要一个[稳定排序](http://en.wikipedia.org/wiki/Sorting_algorithm#Stability)的函数。
据我所知，PHP 没有，所以你必须使用像这样的比较器函数对其进行一次排序

```
$data = array (
    array('id' => 3,'name' => 'coris','city' => 2),
    array('id' => 1,'name' => 'Barack','city' => 9),
    array('id' => 7,'name' => 'boris','city' => 2),
    array('id' => 3,'name' => 'coris','city' => 2),
);

$order_by = array(
    'city' => array('dir' => SORT_DESC, 'type' => SORT_NUMERIC),
    'name' => array('dir' => SORT_ASC, 'type' => SORT_STRING),
);

function compare($row1,$row2) {
    /* this function should determine which row is greater based on all of the criteria
       and return a negative number when $row1 < $row2
                  a positive number when $row1 > $row2
                  0 when $row1 == $row2
    */

    global $order_by;

    foreach($order_by as $field => $sort) {
        if($sort['type'] != SORT_NUMERIC) {
            // strings are compared case insensitive and assumed to be in the mb_internal_encoding
            $cmp = strcmp(mb_strtolower($row1[$field]), mb_strtolower($row2[$field]));
        } else {
            $cmp = doubleval($row1[$field]) - doubleval($row2[$field]);
        }
        if($sort['dir'] != SORT_ASC) $cmp = -$cmp;
        if($cmp != 0) return $cmp;
    }
    return 0;
}

usort($data,'compare'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T14:28:58.687

我有同样的问题。似乎 call_user_func_array() 无法处理常量。我通过动态构建一个参数字符串并评估这个字符串解决了这个问题：

```
$args  = array($arr1, $arr2);
$order = array(SORT_ASC, SORT_DESC);
$evalstring = '';

foreach($args as $i=>$arg){
    if($evalstring == ''){ $evalstring.= ', '; }
    $evalstring.= '$arg';
    $evalstring.= ', '.$order[$i];
}
eval("array_multisort($evalstring);"); 
```

我知道 eval() 是邪恶的，这不是一个干净的方法，但它有效；-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-03T09:39:14.447

它对我有用：

```
$arrayThatNeedToSort = array('data..');
$multiSortprop = array(['data.....']=> SORT_DESC,['data.....'] => SORT_ASC)

$properties = array();
foreach ($multiSortprop as $sortArr => $sortArg) {
         array_push($properties,$sortArr);
         array_push($properties,$sortArg);
 }

array_push($properties,$arrayThatNeedToSort);
array_multisort(...$properties);

var_dump(end($properties)); 
```

# c++ - 宏和多行注释

> ID：11721981
> 
> 赞同：3
> 
> 时间：2012-07-30T12:51:17.447
> 
> 标签：c++, macros

我需要在一组宏中包含多行注释，以便一个宏启动一个注释块，另一个宏结束它，如下所示：

```
#define C_BEGIN /*
#define C_END */
... other macros 
```

但果然，这种方法行不通。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T13:10:07.363

由于以下原因，您不能这样做。让我们假设这*是*可能的。

因此，您创建了一个用 替换自身的宏，`/*`另一个用于替换`*/`. 那会发生什么？首先，从代码中删除注释。之后，预处理器用注释替换你的宏。在那之后，编译器会窒息：它不知道该做什么，`/*`因为`*/`它根本不会遇到这样的事情：注释*总是*在编译之前被删除，所以它甚至不知道“注释”是什么。它可能会认为这是一个除法，然后是乘法。

所以我们的假设是错误的，你不能这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T13:21:21.500

注释处理发生在宏扩展之前：

> [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")
> 
> ### 2.2 翻译阶段 [lex.phases]
> 
> 1 - 翻译语法规则的优先级由以下阶段指定。[...]
>   3\. [...] 每条评论都替换为一个空格字符。[...]
>   4\. 执行预处理指令，扩展宏调用 [...]

也许您可以尝试对源文件进行两次预处理？（注意：不要这样做。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T13:06:24.513

> 但果然，这种方法行不通。

它行不通。您的注释`#define C_BEGIN`不是宏定义的一部分，也不能成为宏定义的一部分。就语言而言，您`#define C_END`不是宏定义。它只是该多行注释的一部分。换句话说，它是空白。在预处理器/编译器进入解释宏定义的阶段之前处理注释（变成空格）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-25T21:13:58.927

如果您使用的是 IDE，您可以`ctrl``/`在 Windows 或`command``/`Mac 上简单地按一下。您应该首先选择要评论的行。

# sockets - JAVA ME Socket 发送和接收

> ID：11721992
> 
> 赞同：0
> 
> 时间：2012-07-30T12:51:57.107
> 
> 标签：sockets, java-me

我想制作一个应用程序，当用户在键盘上按示例（m）时，移动设备连接到用 C# 制作的服务器，我希望它发送一个 Word 并等待响应，有人可以帮我吗因为那是我的第一个 JAVA ME 应用程序（我已经制作了一个用于测试的 C# 代码客户端，如果有人想查看它以便他可以将其转换为 JAVA ME 只需发表评论）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:37:48.320

要处理单个击键，您将需要使用 Canvas 的低级图形。请阅读本教程[http://www.ibm.com/developerworks/java/tutorials/j-j2me2/](http://www.ibm.com/developerworks/java/tutorials/j-j2me2/)

`keyPressed`方法将触发与您的服务器的新连接。请参阅此其他教程[http://www.ibm.com/developerworks/java/library/wi-jio/](http://www.ibm.com/developerworks/java/library/wi-jio/)

# android - 在单个活动类上实现 GestureDetector、ScaleGestureDetector、DoubleTapListener？

> ID：11721998
> 
> 赞同：0
> 
> 时间：2012-07-30T12:52:39.233
> 
> 标签：android

我们可以使用 ImageView Widget 在单个 Activity 类上实现 OnGestureListener、OnDoubleTapListener 和 OnScaleGestureListener 吗？

我正在尝试捕捉鼠标移动、长按、鼠标单击、双击、用双指双击以及捏合和捏合以缩放图像视图。是否可以单项活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:53:45.917

是的，[一个类可以实现多个接口。](http://docs.oracle.com/javase/tutorial/java/IandI/createinterface.html#Footer2)