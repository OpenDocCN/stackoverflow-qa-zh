# StackOverflow 问答 10567000-10567999

# python - 如何从行为类似于标准管道的两个命令中创建一个 linux shell 命令？

> ID：10567000
> 
> 赞同：1
> 
> 时间：2012-05-12T20:05:48.817
> 
> 标签：python, bash, hadoop, gzip, hadoop-streaming

我正在尝试使用 Hadoop Streaming 来运行两个命令，`gunzip | map_to_old_format.py`例如美好的）。

由于我不知道如何即时在 Python 中进行 gunzip，因此我想创建一个 shell 脚本来为我执行此命令组合（例如`gunzip_and_map_to_old.sh`）。我尝试了以下方法，但 gzip 不喜欢（gzip 抱怨“gzip：stdin：不是 gzip 格式”）：

```
#!/bin/bash
while read data; do
    echo $data | gunzip | map_to_old_format.py $2
done 
```

关于 python gunzip，我尝试了[这里](http://mail.python.org/pipermail/python-list/2001-January/063986.html)`f = gzip.GzipFile("", "rb", fileobj=sys.stdin)`描述的 Wrapper 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T22:06:36.270

我对 Hadoop 一无所知，但我猜这`echo $data | gunzip`行不通，因为`$data`它是一行`data`，并且`$data`它本身可能不是 gzip 格式。您不能在 bash 脚本文件中执行此操作，而不是逐行传递数据吗？

```
#!/bin/bash
gunzip | map_to_old_format.py 
```

然后，您可以通过传入 gzip 文件来调用它，如下所示：

```
cat data.gz | gunzip_and_map_to_old.sh 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T20:18:24.087

这并没有回答我的确切问题，但我能够通过添加`-jobconf stream.recordreader.compression=gzip`到我的 Hadoop 命令（[我了解到这一点的来源](http://www.mail-archive.com/common-user@hadoop.apache.org/msg00422.html)）来绕过它：

```
hadoop jar /usr/lib/hadoop/contrib/streaming/hadoop-streaming-*.jar \
    -jobconf stream.recordreader.compression=gzip \
    -D mapred.reduce.tasks=0 \
    -file map_to_old_format.py \
    -mapper map_to_old_format.py \
    -input /mydata/* -output output/newdata 
```

**注意：**我仍然很好奇如何通过 shell 脚本完成上述操作，所以如果可能的话，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T22:30:33.983

Hadoop 流通常使用 TextInputFormat 读取输入文件，并通过 std in 将其逐行传递给您的 python 映射器（使用制表符分隔键和值（在大多数情况下是行号和行文本）。

如果输入文件的文件扩展名不是以 .gz 结尾，那么 hadoops TextInputFormat 在一次传递一行之前不会知道 gunzip 文件内容。您可以按照其他答案中的建议配置属性以强制 hadoop 对文件进行压缩。

# notepad++ - ctrl+delete 多行记事本++

> ID：10567001
> 
> 赞同：0
> 
> 时间：2012-05-12T20:05:52.177
> 
> 标签：notepad++

在 Notepad++ 中选择多行时，快捷方式“ctrl + delete”仅适用于最后一行。有谁知道如何使它适用于所有行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:27:43.480

`Ctrl+Del`似乎不适用于选择多行。

您可以使用菜单项，并通过选项卡项#28`Edit->Blank Operations->Trim Leading Spaces`创建您自己的键盘快捷键。`Settings->Shortcut Mapper``Main Menu`

# java - 未正确填充数组 Java

> ID：10567003
> 
> 赞同：1
> 
> 时间：2012-05-12T20:06:09.123
> 
> 标签：java, arrays

运行下一个代码时，出现错误“*线程“main”java.lang.NullPointerException中的异常*“

我认为这与deck[i2] 的填充有关我尝试做的是每次运行for循环时添加一个值。

有人可以告诉我出了什么问题吗？

```
public class Deck {
    private Cards cards;
    private String[] suits;
    private String[] ranks;
    private String[] deck;
    private int i2;

    public void Deck() {
        //Instantiate class Cards
        cards = new Cards();
        //run method to get cards / suits
        suits = cards.getSuits();
        ranks = cards.getRanks();

        //Build an array (deck) and fill it with all possible cards
        i2 = 1;
        for (int i = 0; i < suits.length; i++) {

            //Run through ranks
            for (int i1 = 0; i1 < ranks.length; i1++) {
                deck[i2] = suits[i] + ranks[i1];
                2++;
            }
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:09:31.930

你初始化`deck`数组了吗？在外循环*之前*的某处必须有这样的语句：`for`

```
deck = new String[ranks.length * suits.length]; 
```

此外，请务必以类似的方式初始化类中的`suits`和`ranks`数组。`Cards`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T20:10:27.920

你从来没有初始化过'deck'。应该是这样的：

```
deck = new String[ranks.length * suits.length]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T20:09:25.613

该`deck`字段尚未初始化，因此访问它会引发`NullPointerException`. 在构建它之前，初始化`deck`：

```
deck = new String[sizeOfDeck]; 
```

哪里`sizeOfDeck`是`int`代表甲板的大小。

# cakephp - 在 cakephp 中更改 $this->request->data

> ID：10567009
> 
> 赞同：1
> 
> 时间：2012-05-12T20:07:09.000
> 
> 标签：cakephp

我正在使用 cakephp 并尝试将数组从视图传递给控制器​​，我确实生成了一个名称复选框，用户应该选择一些名称并提交他的请求。

```
echo $this->Form->create('Task');
echo ($this->Form->input('sentTo', array('type' => 'select', 'multiple' => 'checkbox',        'options' => $options)));
echo $this->Form->end('submit'); 
```

问题是 sentTo 复选框将返回在 $this->request->data 中检查的索引我不想这样做，我想返回我可以在视图中获得的用户 ID。所以我想用其他数字替换这些索引，我尝试手动覆盖 $this->request->data 但更改仅在视图中可见，而在控制器中不可见。

如果您知道如何在将请求数据发送到控制器之前更改请求数据，或者将数组从视图传递到控制器，请尝试帮助我（我不想使用会话或缓存）

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T20:43:35.320

如果我正确理解了您的问题，并且根据上面的评论，这就是您的问题：

```
$j = 0;
foreach ($users as $user) { 
    $options[$j] = $user['u1']['username'];
    $j++;
} 
```

如果您将其用于复选框，则将其更改为：

```
foreach ($users as $user) { 
    $id = $user['u1']['id'];
    $options[$id] = $user['u1']['username'];
} 
```

虽然我不明白`'u1'`是什么。

简而言之：将`options`数组的键设置为记录的 id。

# ruby-on-rails - gmaps4rails 禁用滚轮

> ID：10567014
> 
> 赞同：0
> 
> 时间：2012-05-12T20:07:44.987
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gmaps4rails

我像这样使用 gmaps4rails：

```
 <%= gmaps("map_options" => { "scrollwheel" => false, "zoom" => 17, "auto_zoom" => false },"markers" => { "data" => event.to_gmaps4rails }) %> 
```

这正在生成：

```
<script type="text/javascript" charset="utf-8">
Gmaps.map = new Gmaps4RailsGoogle();
Gmaps.load_map = function() {
Gmaps.map.map_options.scrollwheel = false;
Gmaps.map.map_options.zoom = 17;
Gmaps.map.map_options.auto_zoom = false;
Gmaps.map.initialize();
Gmaps.map.markers = [{"lat":38.6419,"lng":-90.2646}];
Gmaps.map.create_markers();
Gmaps.map.adjustMapToBounds();
Gmaps.map.callback();
};
window.onload = function() { Gmaps.loadMaps(); };
</script> 
```

我做错了什么忽略了这个`scrollwheel = false`选项？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T20:26:14.423

“从历史上看”，我在地图选项中添加了来自提供商的一些功能。这是一个坏主意，因为我没有提取所有内容，并且我开始收到一些其他内容的拉取请求......

附加值很低的代码太多。

在您的情况下，`scrollwheel`未包含在[此处](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/%28Multiple%29-Maps)的列表中。所以最好的选择是使用`raw`密钥（也在上面的链接中描述）。

这将引导您进入以下代码：

```
 <%= gmaps("map_options" => { :raw => "{scrollwheel: false}", "zoom" => 17, "auto_zoom" => false },"markers" => { "data" => event.to_gmaps4rails }) %> 
```

# html - 左右浮动菜单

> ID：10567016
> 
> 赞同：1
> 
> 时间：2012-05-12T20:07:59.573
> 
> 标签：html, css

我有以下 HTML：

```
<div id="menu">
    <ul class="menu">
        <li class="item-101"><a href="/">Home</a></li>
        <li class="item-113"><a href="/sobre">Sobre</a></li>
        <li class="item-114"><a href="/portfolio">Portfolio</a></li>
        <li class="item-115"><a href="/bastidores">Bastidores</a></li>
        <li class="item-116"><a href="/blog">Blog</a></li>
        <li class="item-117"><a href="/contato">Contato</a></li>
    </ul>
</div> 
```

和 CSS：

```
#menu{width:900px;margin:0 auto;}
#menu ul{margin:0;padding:0;}
#menu li{float:left;margin:10px;}
#menu .item-115, #menu .item-116, #menu .item-117{float:right;} 
```

我想要 3 个向左浮动的菜单和 3 个向右浮动的菜单，但它们正在恢复顺序。

这个怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T20:23:31.270

You can do it like this. [http://jsfiddle.net/xeQBd/1/](http://jsfiddle.net/xeQBd/1/) Simply don't let the 'left' items float; only apply to the ones that you need to float to the right.

```
#menu{width:900px;margin:0 auto;}
#menu ul{
    margin:0;padding:0; display:block;
}
#menu li{
    margin:10px;
    display:inline-block;
}
#menu .item-115, #menu .item-116, #menu .item-117{
    float:right;
}​ 
```

I've used something like this on www.hoeve-bouwlust.nl/activiteiten in the menu

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T21:07:34.447

这是我的建议：http: [//jsfiddle.net/thirtydot/w64Nb/2/](http://jsfiddle.net/thirtydot/w64Nb/2/)

HTML 与您的问题相同。

> 不， .item-{uid-for-menu} 是随机的，但是对于每个 li，我可以使用 jquery 最后一个树形菜单浮动。——加布里埃尔·桑托斯
> 
> @thirtydot 假设该类始终是相同的，并建议一种解决方案，然后，我调整我的 javascript 以生成与我的示例类相同的类。——加布里埃尔·桑托斯

您可以使用 jQuery 解决整个问题（在不同的评论中，您说您可以使用），而不是依赖某些存在的类，或者使用 JavaScript 强制它们相同：

```
$($('#menu li').slice(-3).get().reverse())
    .addClass('right').remove().appendTo('#menu .menu');​ 
```

这将把最后三个`li`放在里面`#menu`，添加`.right`类（就是`float: right`），然后颠倒 HTML 中的顺序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T20:10:22.880

将每个都放在自己的列表中

```
<nav>
    <ul class="menu menu-to-the-left">
        <li class="item-101"><a href="/">Home</a></li>
        <li class="item-113"><a href="/sobre">Sobre</a></li>
        <li class="item-114"><a href="/portfolio">Portfolio</a></li>
    </ul>
    <ul class="menu menu-to-the-right">
        <li class="item-115"><a href="/bastidores">Bastidores</a></li>
        <li class="item-116"><a href="/blog">Blog</a></li>
        <li class="item-117"><a href="/contato">Contato</a></li>
    </ul>
</nav> 
```

* * *

如果您无法编辑源代码，您可以执行以下操作。不过，它涉及在菜单项上设置固定宽度。**[现场示例](http://dabblet.com/gist/2668857)**：

```
#menu {
    width:  900px;
    margin: 0 auto;
}

#menu ul {
    margin:  0;
    padding: 0;
}

#menu li, #menu li a {
    float:  left;
    width: 100px;
}
#menu li:nth-child(4) {
    margin-left: 300px;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-12T21:47:59.660

您可以使用纯 css 来实现这一点，只需将 s 的`display`属性设置为`li`s 的属性和 to的`inline-block`属性`text-align`，然后将前三个s 设置为，这样它们就可以回到原来的位置，而不会弄乱它们在文档中声明的顺序。像这样：`ul``right``float``li``left`

```
#menu{width:900px;margin:0 auto;}
#menu ul{margin:0;padding:0; text-align: right}
#menu li{display:inline-block;margin:10px;}
#menu .item-101, #menu .item-113, #menu .item-114{float: left}​ 
```

**[现场示例：](http://jsfiddle.net/YZcdm/)**

希望能帮助到你。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-12T22:12:07.250

我相信您想知道为什么如果*翻转*了右浮动元素的顺序，那么浮动应该如何表现。这[一切都在这里描述](http://www.w3.org/TR/CSS2/visuren.html#floats)：

> 浮动框向左或向右移动，直到其外边缘接触到包含块边缘或另一个浮动的外边缘。

对于示例中的三个右浮动元素，第一个（源顺序）与右边缘对齐。下一项也向右移动；只是发现*另一个漂浮物挡住*了它的路并停下来。第三个浮点数也是如此。

解决方案是创建*一个*右浮动容器，其中包含三个应该是右浮动的元素，向左浮动。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-12T20:17:56.333

CSS：

```
#menu{width:900px;margin:0 auto;}
#menu ul{margin:0;padding:0;}
#menu li{margin:10px;width:100px}
.item-115,.item-116,.item-117{float:right;}
.item-101,.item-113,.item-114{float:left;} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-12T20:19:26.560

我的解决方案预览：

![在此处输入图像描述](../Images/8976f907402ab95d66da1bf101fe1814.png)

我认为您可以更改菜单项的顺序，因此您只需要将最后三个项目的顺序颠倒（[dabblet.com 上的在线演示](http://dabblet.com/gist/2668736)）：

```
<div id="menu">
    <ul class="menu">
        <li class="item-101"><a href="/">Home</a></li>
        <li class="item-113"><a href="/sobre">Sobre</a></li>
        <li class="item-114"><a href="/portfolio">Portfolio</a></li>

        <!-- reverse order of last three items -->
        <li class="item-117"><a href="/contato">Contato</a></li>
        <li class="item-116"><a href="/blog">Blog</a></li>
        <li class="item-115"><a href="/bastidores">Bastidores</a></li>
    </ul>
</div> 
```

# php - PHP 通过引导程序

> ID：10567019
> 
> 赞同：0
> 
> 时间：2012-05-12T20:08:12.193
> 
> 标签：php, web, bootstrapping

是否可以在加载实际请求的页面之前调用单个 php 文件，就像引导程序一样。

我想做的是能够调用一个 php 脚本，设置全局变量、ini_sets 等，然后继续访问 index.php、about.php 等页面。

我已经看过这篇文章，但它似乎更像是一个 mvc 模式，（减去模型......排序）

[http://www.serversidemagazine.com/php/bootstrap-php-code/](http://www.serversidemagazine.com/php/bootstrap-php-code/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:10:23.333

您可以使用 mod rewrite 将 example.com/about/ 重写为 index.php?p=about。

```
RewriteRule ^(.*)/$ index.php?p=$1 [L] 
```

然后 Index.php 将成为您的引导文件，并且在设置全局变量之后您可以运行`include 'about.php'`；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T20:58:16.213

查看`auto_prepend_file`php 设置。您可以在主 php.ini 或用户级 .ini 文件以及其他配置源（如 .htaccess 文件）中设置它。

# javascript - Javascript DOM——点击

> ID：10567021
> 
> 赞同：0
> 
> 时间：2012-05-12T20:08:53.350
> 
> 标签：javascript, html, onclick

我的 html 代码中有一个带有`onclick`事件处理程序的链接。

处理程序在我的代码中的某处插入一个链接，他自己是一个`onclick`事件处理程序。

这是一个代表这个的小提琴：

[http://jsfiddle.net/qENap/](http://jsfiddle.net/qENap/)

我的问题是自动调用 DOM 生成链接上的 onclick 处理程序。

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T20:19:07.980

`eLink.onclick`应该有一个分配给它的**闭包**，而不是一个字符串。

如果您想使用字符串版本，请使用`eLink.setAttribute("onclick","......");`，但不建议这样做。

或者，只需执行以下操作：

```
eLink.onclick = function() {window.open(dir+"/"+file,"Images","width=1200,height=800");}; 
```

但是，我可能会问为什么你不能只设置适当的`href`和添加`target="Images"`？

# objective-c - 玻璃效果 UIView

> ID：10567022
> 
> 赞同：2
> 
> 时间：2012-05-12T20:08:59.747
> 
> 标签：objective-c, uiview, effects, quartz-core

我想知道如何在 UIView 上添加玻璃效果

我想对灰色半透明视图[产生类似的效果](http://pttrns.com/pickers/#/detail/0dc9d9f6c6a7577613b3453768eee3b3)，您可以在此处看到：

![在此处输入图像描述](../Images/491d5d1a545469b780005ab980bc5fa5.png)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T20:12:43.860

UIView 中没有玻璃效果。您所能做的就是将视图的不透明度设置在 0 和 1 之间。此外，上面显示的视图具有一组精美的图像，使其看起来像您的“玻璃效果”。

好吧，如果你的 UIView 是“闪亮而优雅”的，你可以通过两种方式做到这一点：-

1>您可以简单地在使用 Photoshop 创建的图像中添加效果，因为它会减少编程的开销。

2>您可以使用苹果提供的核心图形库来获得它，然后您可能需要进入更复杂的绘图世界并查看[教程以获得光泽效果](http://cocoawithlove.com/2008/09/drawing-gloss-gradients-in-coregraphics.html)

[Ray wendelich 的光面纽扣](http://www.raywenderlich.com/2134/core-graphics-101-glossy-buttons)

[另一个关于光泽按钮的教程](http://www.codepadawan.com/2011/06/iphone-glossy-buttons.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T20:43:59.420

有一个非常酷的 Mac 应用程序，名为**PaintCode**，它允许您以类似于 Photoshop 的方式创建光泽/玻璃效果，然后生成代码，您可以添加您的应用程序。他们在这里举了一些例子：http: [//www.paintcodeapp.com/examples.html](http://www.paintcodeapp.com/examples.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T20:20:29.560

使用 UIView 实现这一点没有简单的方法，但当然可以做到，就像所有图形工作都可以完成：设置绘图上下文并在视图中使用 CoreGraphics 绘制效果 drawRect 方法。

如果您很好奇，我建议您查看一个名为[Opacity](http://likethought.com/opacity/)的应用程序。它是适用于 Mac OS 的简单图形编辑器 - 允许您在可视画布上工作并应用效果，其中包括“玻璃”过滤器。这个应用程序的显着特点是它将为您使用其 GUI 直观设计的内容生成支持 Quartz 代码。

它生成的代码可能足以满足您的需求，也可能不够，但我经常使用它来生成粗略的绘图代码，然后我可以将其作为组合我自己的绘图代码的基础。

除了我使用它之外，我与这个产品没有任何关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T20:26:52.543

我猜你的 UIView 中需要有光泽的效果。这可以通过设置 UIView 的 alpha 掩码并在 UIView 的 drawrect 方法中将背景颜色调整为更暗来实现。如果这不能满足您的需求，您可以寻求由[Matt Galagher概述的更全面的解决方案](http://cocoawithlove.com/2008/09/drawing-gloss-gradients-in-coregraphics.html)

# ruby-on-rails - 从几个文件中获取路由信息？

> ID：10567023
> 
> 赞同：0
> 
> 时间：2012-05-12T20:09:17.803
> 
> 标签：ruby-on-rails, routes

我有*大量*路线，我想增加更多数量级。有没有办法在路由文件的顶部添加一个“要求”语句，并让其他一些文件容纳额外的路由？我不希望 routes.rb 文件长一英里。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T20:20:41.407

你可以采取 DHHs 的方法来解决这个问题：

```
class ActionDispatch::Routing::Mapper
  def draw(routes_name)
    instance_eval(File.read(Rails.root.join("config/routes/#{routes_name}.rb")))
  end
end

BCX::Application.routes.draw do
  draw :api
  draw :account
  draw :session
  draw :people_and_groups
  draw :projects
  draw :calendars
  draw :legacy_slugs
  draw :ensembles_and_buckets
  draw :globals
  draw :monitoring
  draw :mail_attachments
  draw :message_preview
  draw :misc

  root to: 'projects#index'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T20:15:15.063

在 config/application.rb 中尝试这个添加：

```
config.paths["config/routes"] << Rails.root.join('config/routes/you_route_file.rb') 
```

# c++ - 多重虚继承情况下的强制转换

> ID：10567026
> 
> 赞同：1
> 
> 时间：2012-05-12T20:09:30.117
> 
> 标签：c++, inheritance, virtual

在这个程序中：

```
 class Top
    {
            public:
            int a;
    };

    class Left : virtual public Top
    {
            public:
            int b;
    };

    class Right : virtual public Top
    {
            public:
            int c;
    };

    class Bottom : public Left, public Right
    {
            public:
            int d;
    };

    class AnotherBottom : public Left, public Right
    {
            public:
            int e;
            int f;
    };

    int main()
    {
        Bottom* bottom1 = new Bottom();
        AnotherBottom* bottom2 = new AnotherBottom();
        Top* top1 = bottom1;
        Top* top2 = bottom2;
        Left* left = static_cast<Left*>(top1);
        return 0;
    } 
```

我对这个程序几乎没有疑问：

在执行 static_cast 时，编译器会给出错误

`error: cannot convert from base ‘Top’ to derived type ‘Left’ via virtual base ‘Top`

即使在动态转换中，它也会给出错误

`error: cannot dynamic_cast ‘top1’ (of type ‘class Top*’) to type ‘class Left*’ (source type is not polymorphic)`

因此，在 Top 类中添加虚拟析构函数时，它变成了多态并且允许动态转换。

我无法理解为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T20:22:14.857

演员不能静态完成。想象一个类实际上继承自 Top（可能多次）和 Left。布局取决于该类的详细信息。因此，仅给定 Top 实例的位置，就没有一种已知的方法可以计算出 Left 实例的数据在哪里。

解决方案是将信息嵌入对象本身（通常作为 vtable 的一部分），然后动态进行计算。因此，您可能会包含一些数据，说“我真的是 Left 的一个实例，而我的 Top 基本实例距离我的 this 指针指向的位置 12 个字节”。

但是 C++ 不希望每个对象都被强制保存该信息，因为它通常是不需要的。它只需要由多态类存储，这些类（这不是巧合）正是那些无论如何都需要有一个 vtable 的。

# c++ - boost::multi_index 是否仍在积极维护？

> ID：10567028
> 
> 赞同：3
> 
> 时间：2012-05-12T20:09:54.580
> 
> 标签：c++, boost

Boost::Multi_index 似乎有一段时间没有更新了。这个项目还在吗？

有人知道吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:23:33.523

项目维护： http: [//www.boost.org/doc/libs/1_49_0/libs/multi_index/doc/release_notes.html](http://www.boost.org/doc/libs/1_49_0/libs/multi_index/doc/release_notes.html)

它的作者在 boost-users 邮件列表上提供了所有需要的支持。

# java - 序列化 JFrame 并通过网络发送

> ID：10567033
> 
> 赞同：1
> 
> 时间：2012-05-12T20:11:00.120
> 
> 标签：java, sockets, exception, serialization, jframe

我想要做的是通过套接字发送一个 JFrame。问题是在我发送表单并按下按钮查看它之后，我得到了以下异常。

![图形用户界面和异常](../Images/29ed53a01cae02ffad0f132198a2b890.png)

```
package ds3;

import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;

public class SerializationApp extends JFrame {

    private DataForm dataForm = new DataForm();
    private int serverPort = 15000;
    private ServerSocket serverSocket;

    public SerializationApp() {
        try {
            serverSocket = new ServerSocket(serverPort);
            initComponents();
            new Thread(new Runnable() {
                @Override
                public void run() {
                    while (true) {
                        try {
                            Socket socket = serverSocket.accept();
                            ObjectInputStream objectinputstream = new ObjectInputStream(socket.getInputStream());
                            DataForm dataform = (DataForm) objectinputstream.readObject();
                            dataform.setTitle(socket.getInetAddress().getHostAddress());
                            dataform.setVisible(true);
                            socket.close();
                        } catch (ClassNotFoundException ex) {
                            Logger.getLogger(SerializationApp.class.getName()).log(Level.SEVERE, null, ex);
                        } catch (IOException ex) {
                            Logger.getLogger(SerializationApp.class.getName()).log(Level.SEVERE, null, ex);
                        }
                    }
                }
            }).start();
        } catch (IOException ex) {
            Logger.getLogger(SerializationApp.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        iptextfield = new javax.swing.JTextField();
        jPanel2 = new javax.swing.JPanel();
        viewButton = new javax.swing.JButton();
        sendButton = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Receiver IP Address", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Dialog", 0, 12), new java.awt.Color(0, 0, 204))); // NOI18N
        jPanel1.setLayout(new java.awt.BorderLayout());
        jPanel1.add(iptextfield, java.awt.BorderLayout.CENTER);

        getContentPane().add(jPanel1, java.awt.BorderLayout.CENTER);

        viewButton.setText("View Form");
        viewButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                viewButtonActionPerformed(evt);
            }
        });
        jPanel2.add(viewButton);

        sendButton.setText("Send Form");
        sendButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                sendButtonActionPerformed(evt);
            }
        });
        jPanel2.add(sendButton);

        getContentPane().add(jPanel2, java.awt.BorderLayout.SOUTH);

        pack();
    }// </editor-fold>                        

private void viewButtonActionPerformed(java.awt.event.ActionEvent evt) {                                           
    dataForm.setVisible(!dataForm.isVisible());
}                                          

private void sendButtonActionPerformed(java.awt.event.ActionEvent evt) {                                           
    try {
        Socket clientsocket = new Socket(iptextfield.getText(), 15000);
        ObjectOutputStream oout = new ObjectOutputStream(clientsocket.getOutputStream());
        oout.writeObject(dataForm);
        oout.reset();
        oout.flush();
        clientsocket.close();

    } catch (IOException ex) {
        Logger.getLogger(SerializationApp.class.getName()).log(Level.SEVERE, null, ex);
    }
}                                          

    public static void main(String args[]) {

        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(SerializationApp.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(SerializationApp.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(SerializationApp.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(SerializationApp.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new SerializationApp().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify                     
    private javax.swing.JTextField iptextfield;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JButton sendButton;
    private javax.swing.JButton viewButton;
    // End of variables declaration                   
} 
```

序列化类

```
package ds3;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.Serializable;

public class DataForm extends javax.swing.JFrame implements Serializable {

    public DataForm() {
        initComponents();
        jButton1.addActionListener(new ClearFormActionListener());
    }
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        buttonGroup1 = new javax.swing.ButtonGroup();
        jLabel1 = new javax.swing.JLabel();
        jPanel1 = new javax.swing.JPanel();
        jLabel2 = new javax.swing.JLabel();
        jTextField1 = new javax.swing.JTextField();
        jLabel3 = new javax.swing.JLabel();
        jTextField2 = new javax.swing.JTextField();
        jLabel4 = new javax.swing.JLabel();
        jPanel2 = new javax.swing.JPanel();
        jRadioButton1 = new javax.swing.JRadioButton();
        jRadioButton2 = new javax.swing.JRadioButton();
        jLabel5 = new javax.swing.JLabel();
        jTextField4 = new javax.swing.JTextField();
        jPanel3 = new javax.swing.JPanel();
        jButton1 = new javax.swing.JButton();

        setTitle("Personal Data Form");

        jLabel1.setFont(new java.awt.Font("Tahoma", 3, 11)); // NOI18N
        jLabel1.setForeground(new java.awt.Color(0, 0, 204));
        jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel1.setText("Please fill you data below");
        getContentPane().add(jLabel1, java.awt.BorderLayout.NORTH);

        jPanel1.setLayout(new java.awt.GridLayout(4, 2, 0, 2));

        jLabel2.setText("Firstname:");
        jPanel1.add(jLabel2);
        jPanel1.add(jTextField1);

        jLabel3.setText("Lastname:");
        jPanel1.add(jLabel3);
        jPanel1.add(jTextField2);

        jLabel4.setText("Gender:");
        jPanel1.add(jLabel4);

        jPanel2.setLayout(new java.awt.GridLayout(1, 2));

        buttonGroup1.add(jRadioButton1);
        jRadioButton1.setText("Male");
        jPanel2.add(jRadioButton1);

        buttonGroup1.add(jRadioButton2);
        jRadioButton2.setText("Female");
        jPanel2.add(jRadioButton2);

        jPanel1.add(jPanel2);

        jLabel5.setText("Email:");
        jPanel1.add(jLabel5);
        jPanel1.add(jTextField4);

        getContentPane().add(jPanel1, java.awt.BorderLayout.CENTER);

        jButton1.setText("Clear");
        jPanel3.add(jButton1);

        getContentPane().add(jPanel3, java.awt.BorderLayout.SOUTH);

        pack();
    }// </editor-fold>                        

    // Variables declaration - do not modify                     
    private javax.swing.ButtonGroup buttonGroup1;
    private javax.swing.JButton jButton1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JRadioButton jRadioButton1;
    private javax.swing.JRadioButton jRadioButton2;
    private javax.swing.JTextField jTextField1;
    private javax.swing.JTextField jTextField2;
    private javax.swing.JTextField jTextField4;
    // End of variables declaration                   

    class ClearFormActionListener implements ActionListener , Serializable {

        @Override
        public void actionPerformed(ActionEvent e) {
            jTextField1.setText("");
            jTextField2.setText("");
            jTextField4.setText("");
            buttonGroup1.clearSelection();
        }

    } 

} 
```

例外。

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at javax.swing.plaf.synth.SynthLookAndFeel.paintRegion(SynthLookAndFeel.java:395)
    at javax.swing.plaf.synth.SynthLookAndFeel.update(SynthLookAndFeel.java:359)
    at javax.swing.plaf.synth.SynthRootPaneUI.update(SynthRootPaneUI.java:94)
    at javax.swing.JComponent.paintComponent(JComponent.java:765)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5142)
    at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:302)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1188)
    at javax.swing.JComponent.paint(JComponent.java:1015)
    at java.awt.GraphicsCallback$PaintCallback.run(GraphicsCallback.java:39)
    at sun.awt.SunGraphicsCallback.runOneComponent(SunGraphicsCallback.java:78)
    at sun.awt.SunGraphicsCallback.runComponents(SunGraphicsCallback.java:115)
    at java.awt.Container.paint(Container.java:1784)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:794)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:735)
    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    at javax.swing.RepaintManager.access$700(RepaintManager.java:58)
    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1593)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:226)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:647)
    at java.awt.EventQueue.access$000(EventQueue.java:96)
    at java.awt.EventQueue$1.run(EventQueue.java:608)
    at java.awt.EventQueue$1.run(EventQueue.java:606)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:617)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:275)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:200)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:190)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:185)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:177)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:138) 
```

[档案](http://www.2shared.com/file/UnsTQsEQ/DS3.html)_

**更新**

更具体。为什么当我发送表单时，表单正常显示给接收者，没有任何异常，之后我看不到来自发件人的表单，没有任何异常。我的意思是，如果这是一个序列化问题，为什么发送者可以毫无问题地将表单发送给接收者，然后`View Form`按钮导致异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T20:24:27.363

看起来 L&F 没有很好地序列化，但无论如何，我的建议再次是序列化 GUI 的模型并发送其状态。然后，您可以轻松地使用此状态重新创建视图，并且发送的数据量将减少几个数量级。

**编辑 1**：例如，在您发布的代码中，您将创建一个 PersonalData 类作为您的模型，该类具有三个字符串字段用于名字、姓氏和电子邮件，以及一个布尔（或更好的枚举）字段用于性别。

然后通过套接字发送的信息将是这个“模型”类的对象，而不是整个 Swing GUI。您可以重现从传递的对象填充数据的 GUI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T10:01:48.597

> 我想要做的是通过套接字发送一个 JFrame

为什么？来自[JFrame 的 Javadoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html)：

> 警告：此类的序列化对象将与未来的 Swing 版本不兼容。当前的序列化支持适用于运行相同版本 Swing 的应用程序之间的短期存储或 RMI。从 1.4 开始，java.beans 包中添加了对所有 JavaBeansTM 长期存储的支持。请参阅 XMLEncoder。

不要只是忽略这些警告。他们在那里是有原因的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T20:23:17.813

几年前我做了类似的事情，最终我发送了 `JPanel`一个框架本身。

我认为在这种情况下的问题在于，框架在某种程度上附加到了一个`Graphics`，当然，它没有被序列化并通过网络发送，因为它在实现中非常靠近主机操作系统（在 AWT`Window`级别）

我建议您尝试仅发送一个面板（最终只是您尝试发送的框架的内容窗格）再试一次。如果您真的需要附加框架属性，您可以将它们封装在自定义对象中并通过序列化（例如标题或其他）附加它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T11:32:15.753

**`JPanel`执行**

遵循@Jack 的建议发送 a`JPanel`而不是 a`JFrame`似乎可行。下面是实现。

```
package ds3;

import java.awt.Container;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

public class SerializationApp extends JFrame {

    private DataPanel dataPanel = new DataPanel();
    private JFrame frPanel = new JFrame();
    private int serverPort = 15000;
    private ServerSocket serverSocket;

    public SerializationApp() {
        try {
            serverSocket = new ServerSocket(serverPort);
            initComponents();
            setLocationRelativeTo(null);
            frPanel.add(dataPanel);
            frPanel.pack();
            frPanel.setLocationRelativeTo(this);
            frPanel.setDefaultCloseOperation(DISPOSE_ON_CLOSE);
            new Thread(new Runnable() {

                @Override
                public void run() {
                    while (true) {
                        try {
                            Socket socket = serverSocket.accept();
                            ObjectInputStream objectinputstream = new ObjectInputStream(socket.getInputStream());
                            JPanel container = (JPanel) objectinputstream.readObject();
                            JFrame frame = new JFrame(socket.getInetAddress().getHostAddress());
                            frame.add(container);
                            frame.pack();
                            frame.setLocationRelativeTo(null);
                            setVibility(frame);

                            socket.close();
                        } catch (ClassNotFoundException ex) {
                            Logger.getLogger(SerializationApp.class.getName()).log(Level.SEVERE, null, ex);
                        } catch (IOException ex) {
                            Logger.getLogger(SerializationApp.class.getName()).log(Level.SEVERE, null, ex);
                        }
                    }
                }
            }).start();
        } catch (IOException ex) {
            Logger.getLogger(SerializationApp.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        iptextfield = new javax.swing.JTextField();
        jPanel2 = new javax.swing.JPanel();
        viewButton = new javax.swing.JButton();
        sendButton = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Receiver IP Address", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Dialog", 0, 12), new java.awt.Color(0, 0, 204))); // NOI18N
        jPanel1.setLayout(new java.awt.BorderLayout());
        jPanel1.add(iptextfield, java.awt.BorderLayout.CENTER);

        getContentPane().add(jPanel1, java.awt.BorderLayout.CENTER);

        viewButton.setText("View Form");
        viewButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                viewButtonActionPerformed(evt);
            }
        });
        jPanel2.add(viewButton);

        sendButton.setText("Send Form");
        sendButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                sendButtonActionPerformed(evt);
            }
        });
        jPanel2.add(sendButton);

        getContentPane().add(jPanel2, java.awt.BorderLayout.SOUTH);

        pack();
    }// </editor-fold>                        

    private void setVibility(final JFrame dataform) {

        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                dataform.setVisible(!dataform.isVisible());
            }
        });
    }

private void viewButtonActionPerformed(java.awt.event.ActionEvent evt) {                                           
    setVibility(frPanel);
}                                          

private void sendButtonActionPerformed(java.awt.event.ActionEvent evt) {                                           
    try {
        Socket clientsocket = new Socket(iptextfield.getText(), 15000);
        ObjectOutputStream oout = new ObjectOutputStream(clientsocket.getOutputStream());
        oout.writeObject(dataPanel);
        oout.reset();
        oout.flush();
        clientsocket.close();
    } catch (UnknownHostException ex) {
        Logger.getLogger(SerializationApp.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IOException ex) {
        Logger.getLogger(SerializationApp.class.getName()).log(Level.SEVERE, null, ex);
    }
}                                          

    public static void main(String args[]) {

        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception ignored) {
            ignored.printStackTrace();
        }

        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new SerializationApp().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify                     
    private javax.swing.JTextField iptextfield;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JButton sendButton;
    private javax.swing.JButton viewButton;
    // End of variables declaration                   
} 
```

这`JPanel`

*在收到`JPanel`只有第二个`ActionListener`作品。*

```
package ds3;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.Serializable;

public class DataPanel extends javax.swing.JPanel implements Serializable,ActionListener {

    public DataPanel() {
        initComponents();
        jButton1.addActionListener(this);
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jTextField1 = new javax.swing.JTextField();
        jTextField2 = new javax.swing.JTextField();
        jTextField3 = new javax.swing.JTextField();
        jTextField4 = new javax.swing.JTextField();
        jButton1 = new javax.swing.JButton();

        jLabel1.setText("jLabel1");
        add(jLabel1);

        jLabel2.setText("jLabel1");
        add(jLabel2);

        jLabel3.setText("jLabel1");
        add(jLabel3);

        jLabel4.setText("jLabel1");
        add(jLabel4);

        jTextField1.setText("jTextField1");
        add(jTextField1);

        jTextField2.setText("jTextField1");
        add(jTextField2);

        jTextField3.setText("jTextField1");
        add(jTextField3);

        jTextField4.setText("jTextField1");
        add(jTextField4);

        jButton1.setText("jButton1");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        add(jButton1);
    }// </editor-fold>                        

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
       System.out.println("The label");
    }                                        

    // Variables declaration - do not modify                     
    private javax.swing.JButton jButton1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JTextField jTextField1;
    private javax.swing.JTextField jTextField2;
    private javax.swing.JTextField jTextField3;
    private javax.swing.JTextField jTextField4;
    // End of variables declaration                   

    @Override
    public void actionPerformed(ActionEvent e) {
        System.out.println("Print");
    }
} 
```

**`XMLEncoder`执行**

至于`XMLEncoder`如果我对整个班级进行编码，则不会传输字段上的输入。

主要班

```
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.beans.XMLEncoder;
import java.io.ByteArrayOutputStream;
import java.io.OutputStream;
import java.net.Socket;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.UIManager;

public final class MainClass extends JFrame {

    private TheFRameForm x;

    public MainClass() {
        x = new TheFRameForm();
        initComponents();
        TheServer theServer = new TheServer();
        theServer.start();

    }

    void initComponents() {
        setTitle("Look At Me Now");
        setLayout(new FlowLayout());
        JButton b = new JButton("Show Form");
        b.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                x.setVisible(true);
            }
        });
        add(b);
        JButton s = new JButton("Send Form");
        s.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                sendForm();
            }
        });
        add(s);
        pack();
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        setVisible(true);
    }

    private void sendForm() {
        try {
            Socket clientsocket = new Socket("localhost", 15000);
            XMLEncoder encoder = new XMLEncoder(clientsocket.getOutputStream());
            encoder.writeObject(x); //.getContentPane()
            encoder.close();

            OutputStream memStream = new ByteArrayOutputStream();
            XMLEncoder mencoder = new XMLEncoder(memStream);
            mencoder.writeObject(x);//.getContentPane()
            mencoder.close();
            String xmlString = memStream.toString();
            System.out.println(xmlString);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static void main(String args[]) {

        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception ignored) {
            ignored.printStackTrace();
        }

        MainClass theMainclass = new MainClass();
    }
} 
```

服务器类

```
import java.beans.XMLDecoder;
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;

public class TheServer extends Thread {

    private static final int serverPort = 15000;
    private ServerSocket serverSocket;

    public TheServer() {
        try {
            serverSocket = new ServerSocket(serverPort);
        } catch (IOException ex) {
            Logger.getLogger(TheServer.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    @Override
    public void run() {
        try {
            while (true) {
                Socket socket = serverSocket.accept();
                System.out.println("Server is running");
                XMLDecoder decoder = new XMLDecoder(socket.getInputStream());
                JFrame frame = (JFrame) decoder.readObject();
                frame.setVisible(true);
                socket.close();
            }
        } catch (IOException ex) {
            Logger.getLogger(TheServer.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

和`JFrame`

```
public class TheFRameForm extends javax.swing.JFrame {

    public TheFRameForm() {
        initComponents();
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jButton1 = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();
        jTextField1 = new javax.swing.JTextField();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);

        jButton1.setText("jButton1");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jLabel1.setText("jLabel1");

        jTextField1.setText("jTextField1");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(123, Short.MAX_VALUE)
                .addComponent(jButton1)
                .addGap(54, 54, 54)
                .addComponent(jLabel1)
                .addGap(102, 102, 102))
            .addGroup(layout.createSequentialGroup()
                .addGap(149, 149, 149)
                .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(120, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1)
                    .addComponent(jButton1))
                .addGap(57, 57, 57)
                .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(65, 65, 65))
        );

        pack();
    }// </editor-fold>                        

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        System.out.println("Print");      
    }                                        

    public static void main(String args[]) {

        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(TheFRameForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(TheFRameForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(TheFRameForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(TheFRameForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TheFRameForm().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify                     
    private javax.swing.JButton jButton1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JTextField jTextField1;
    // End of variables declaration                   
} 
```

# php - 如何在 PHP 中生成渐进式顺序唯一 ID？

> ID：10567034
> 
> 赞同：2
> 
> 时间：2012-05-12T20:11:13.143
> 
> 标签：php

如何在 PHP 中生成渐进式顺序唯一 ID？

例如，顺序应该是这样的：

aaaaaa < aaaaab < aaaaac 等等...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T20:13:02.537

[`uniqid()`](http://php.net/uniqid)正在增加（后面生成的 ID 总是大于前面生成的 ID），但不会是连续的（会有间隙）。

否则，找到一种方法来保存最后生成的 ID，并在生成新 ID 时将其递增。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-12T20:14:52.980

这是默认情况下在 PHP`Incrementing/Decrementing Operators`中可以直接使用字符串请参阅[http://php.net/manual/en/language.operators.increment.php](http://php.net/manual/en/language.operators.increment.php)

```
$start = "aaaaaa" ;
$start++;
$start++;
var_dump($start); 
```

输出

```
 string 'aaaaac' (length=6) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T20:14:32.333

```
$id = 'aaaax';
for ($i=0; $i<100; $i++) {
    $id++;
    echo "$id\n";
} 
```

演示 [http://codepad.org/ogGrOfyQ](http://codepad.org/ogGrOfyQ)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-19T13:57:43.943

如果您在此处使用任何其他解决方案，您仍然必须获取或保存最后一个 id，然后将其递增。相反，您可以简单地使用自动递增的 id 并将其转换为文本表示。

我在这里使用 Laravel 示例，但您可以将理论应用于任何框架。

```
// Save your model.
$flight = new Flight;
$flight->name = $request->name;
$flight->save();

// $flight->id now contains the last inserted id.
echo base_convert($flight->id, 10, 36);

// Output: 1E86 
```

以 10 为底的是 0-9 的数字。Base 36 将字母表中的 26 个字母添加到其中。

请注意，实际上不需要将输出保存回数据库，这将需要另一个查询并破坏此优化的目的。相反，您可以添加一个实时转换 id 的 mutator：

```
class Flight extends Model {
    ...
    public function getUniqueIdAttribute()
    {
        return base_convert($this->id, 10, 36);
    }
} 
```

现在您可以简单地保存您的模型并调用`$flight->uniqueId`并获取您的 base 36 转换后的 id。

提示：向 id 添加盐值以防止泄漏实际的数据库 id。

# android - 标题未显示在 MenuItems 中

> ID：10567036
> 
> 赞同：2
> 
> 时间：2012-05-12T20:11:32.670
> 
> 标签：android

我目前遇到的问题是我的 ListViews 上下文菜单中的字符串没有显示。在`onCreate`我使用的方法中`registerForContextMenu(getListView());`，我正在执行以下操作：

```
@Override
public void onCreateContextMenu(ContextMenu menu, View view, ContextMenuInfo menuInfo) {
    if (view == getListView()) {
        AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo)menuInfo;

        long id = getListAdapter().getItemId(info.position);

        menu.setHeaderTitle("Item " + id);
        menu.setHeaderIcon(R.drawable.header_icon);
        menu.add(Menu.NONE, CONTEXT_MENU_VIEW, Menu.NONE, R.string.contextmenu_view);
        menu.add(Menu.NONE, CONTEXT_MENU_REMOVE, Menu.NONE, R.string.contextmenu_remove);

    }
} 
```

当我运行它时， HeaderTitle 和 HeaderIcon 都按预期工作，并且上下文菜单中有两行，但它们都是空的。我也用硬编码的字符串试过这个，但同样的情况发生了。

# facebook - 解析器不匹配的元数据错误

> ID：10567040
> 
> 赞同：0
> 
> 时间：2012-05-12T20:12:16.343
> 
> 标签：facebook, parsing, metadata

当我将 URL Linter 与我的网站 [http://developers.facebook.com/tools/debug/og/object?q=iulianonofrei.com](http://developers.facebook.com/tools/debug/og/object?q=iulianonofrei.com)一起使用时，我收到此错误消息 而且我有这个标题：

```
<meta property="og:type" content="website" />
<meta property="og:title" content="Onofrei Iulian Photography" />
<meta property="og:description" content="Onofrei Iulian's photography portfolio." />
<meta property="og:image" content="http://iulianonofrei.com/images/favicon_1.jpg" />
<meta property="og:image" content="http://iulianonofrei.com/images/macro/panorama_3_t.jpg" />
<meta property="og:url" content="http://iulianonofrei.com" />
<meta property="og:site_name" content="Onofrei Iulian Photography" />
<meta property="fb:admins" content="_" /> 
```

我不知道为什么我会收到这个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:43:37.167

这不是错误，而是警告消息，只要您从 Link Debugger 获得的详细信息正确，就可以忽略该消息。

`og:url`您可以尝试通过在之前移动来使用 OpenGraph 元标记的顺序`og:image`（没有为此记录的“正确”顺序）...

顺便说一句，警告信息很奇怪。对于相同的代码（除了`og:url`），我根本没有收到任何警告消息。因此，[提交错误](http://developers.facebook.com/bugs/create)可能是一件好事。

# android - 从设备库加载图像并显示在列表视图中

> ID：10567044
> 
> 赞同：0
> 
> 时间：2012-05-12T20:12:40.277
> 
> 标签：android

实际上我正在创建一个应用程序，我想在其中从设备库加载图像并将其显示到`ListView`.

那么如何做到这一点。请帮我解决这个问题，如果可能的话，用合适的例子

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T22:21:20.890

按照这篇文章并在您的 listadapter 类中将您的 getView() 覆盖为包含您要从内部数组显示的图像的 ImageView。

[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

# css - IE8 兼容性和线性渐变

> ID：10567046
> 
> 赞同：0
> 
> 时间：2012-05-12T20:12:43.957
> 
> 标签：css, internet-explorer-8

我们有一个网站，基本上是三列，每列都通过线性渐变应用不同的颜色。虽然这在 Firefox 和 Chrome 中运行良好，但在 IE8 中会中断，例如，最远两列的背景是白色的，左列的图像尺寸不正确（不确定哪个 CSS 元素负责破坏它）。它在 Chrome 中看起来很完美，但在 IE8 中看起来很糟糕。

该网站在这里：[http ://clubsatcrp.com/walkingchallenge/](http://clubsatcrp.com/walkingchallenge/)

任何人都对解决此问题的解决方案有任何想法，并且至少在 IE8 中列的背景颜色方面看起来相同？我没有解决这个问题完全没问题，但因为它是针对公司计划的，而且我们公司使用 IE8，所以这是一个问题。

这是CSS（线性渐变）的一部分：

```
background: -webkit-linear-gradient(
        left, 
        #c63d11,
        #c63d11 33.33%,
        #CD0000 33.33%,
        #CD0000 66.66%,
        #000000 66.66%,
        #000000
    );
background: -moz-linear-gradient(
        left, 
        #c63d11,
        #c63d11 33.33%,
        #CD0000 33.33%,
        #CD0000 66.66%,
        #000000 66.66%,
        #000000
    );
background: -ms-linear-gradient(
        left, 
        #c63d11,
        #c63d11 33.33%,
        #CD0000 33.33%,
        #CD0000 66.66%,
        #000000 66.66%,
        #000000
    );
background: -o-linear-gradient(
        left, 
        #c63d11,
        #c63d11 33.33%,
        #CD0000 33.33%,
        #CD0000 66.66%,
        #4e9dd1 66.66%,
        #4e9dd1
    ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T21:10:17.400

如果即使在 IE8 上也需要 3 列等高，则可以使用`display: table;`(and `*-cell`)。
然后，您可以在每个上定义背景颜色，并使用匹配的颜色以确保它在所有情况下都可读（请参阅 WCAG 2.0 F24[指定前景色而不指定背景色，反之亦然](http://www.w3.org/TR/WCAG20-TECHS/failures.html#F24)）

小提琴：http: [//jsfiddle.net/VbGap/](http://jsfiddle.net/VbGap/)

在 IE6 和 IE7 上的渲染可以毫不费力地改进，但它不会渲染得那么好。

# autofac - autofac 中的命名注册

> ID：10567047
> 
> 赞同：1
> 
> 时间：2012-05-12T20:12:55.360
> 
> 标签：autofac

是否可以使用[autofac](http://code.google.com/p/autofac/)按名称对组件的注册进行分组？
例如，下面的代码有两个 IDbContextProvider 注册。
而且我希望 WfcService 仅解析 IDbContextProvider 的命名实例（“无代理”）。我想使用类似*DependsOnNamed("proxyless")*方法来显式设置对一组具有相同名称的命名实例的依赖关系。

我希望整个系统使用 IDbContextProvider 的默认实现，而 IWfcService 的继承者应该使用他们自己的命名实例。

```
var builder = new ContainerBuilder();
builder.RegisterType<DbContextProvider>().As<IDbContextProvider>().As<IDbContextProvider>();
builder.RegisterType<ProxyLessDbContextProvider>().Named<IDbContextProvider>("proxyless");

builder.RegisterType<Repository>().As<IRepository>();//depends on IDbContextProvider 
builder.RegisterType<BusinessService>().As<IBusinessService>();//depends on IRepository

builder.RegisterType<WfcService>().As<IWfcService>().DependsOnNamed("proxyless");//depends on IBusinessService

IContainer container = builder.Build();

var wcf = container.Resolve<IWfcService>(); // should depend on "proxyless" IDbContextProvider 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:11:39.157

实现所描述行为的最合适方法是使用具有覆盖注册的单独范围。如果你想覆盖 WCF 服务的注册，你应该

```
var _wcfScope = _container.BeginLifetimeScope(b=> 
{
    b.RegisterType<NewDbContextProvider>().As<DbContextProvider>();
    //put wcf services registration here because of the issue http://code.google.com/p/autofac/issues/detail?id=365
});
AutofacHostFactory.Container = _wcfScope; 
```

# iphone - 隐藏 UIMenuController

> ID：10567050
> 
> 赞同：2
> 
> 时间：2012-05-12T20:13:19.400
> 
> 标签：iphone

想要隐藏显示**剪切、复制、粘贴、选择、全选**菜单的**UIMenuController 。**

 **任何人都知道怎么做

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T02:27:53.400

UIMenuController 的文档可在此处 [获得 http://developer.apple.com/library/ios/#documentation/iPhone/Reference/UIMenuController_Class/UIMenuController.html](http://developer.apple.com/library/ios/#documentation/iPhone/Reference/UIMenuController_Class/UIMenuController.html)

UIMenuController 是一个 sharedInstance，因此您可以从任何地方访问它，如下所示：

```
UIMenuController* menu = [UIMenuController sharedMenuController]; 
```

您需要发送它以隐藏它的消息如下：

```
// If you don't want it animated, use NO for the 2nd parameter
[menu setMenuVisible:NO animated:YES]; 
```

至于您希望在其中使用它的确切上下文，我对此了解不多，但这最终是您隐藏 UIMenuController 的方式**

# c# - WP7 游戏的 XNA：DrawUserIndexedPrimitives

> ID：10567052
> 
> 赞同：2
> 
> 时间：2012-05-12T20:13:26.453
> 
> 标签：c#, windows-phone-7, 3d, xna

我正在尝试通过使用 DrawUserIndexedPrimitives 绘制由线条组成的模型来在 XNA 中制作 3D WP7 游戏这一切都很好，但现在我想给每个模型自己的旋转。目前我正在使用 BasicEffect 来绘制所有模型。我可以设置它的旋转，但是所有对象都将具有相同的旋转。有没有办法为每个对象设置不同的旋转？我目前提出了几个可以使用的解决方案，但我对其中任何一个都不满意：

*   为每个具有自己的世界的对象创建一个新的 BasicEffect，然后遍历所有对象以获得它们的基本效果并绘制它 - 我想所有这些 BasicEffects 都会产生很多开销，我想将效果与楷模。
*   自己计算点（即计算旋转并将这些值传递给 DrawUserIndexedPrimitives 方法） - 这是一个相当昂贵的计算，大大降低了性能。

有什么建议的路线可以到这里吗？

我不知道 DrawUserIndexedPrimitives 是否是最好的使用方法，我只想能够画线并给它们一个旋转。如果有更好的方法来做到这一点，请告诉我:)

我目前的解决方案：

```
protected override void Draw(GameTime gameTime)
{
    GraphicsDevice.Clear(Color.Black);

    foreach (var model in _models)
    {

        foreach (var pass in model.Effect.CurrentTechnique.Passes)
        {
            pass.Apply();
            model.Effect.World = _model.GetWorld();

            var points = model.GetPoints();
            GraphicsDevice.DrawUserIndexedPrimitives(PrimitiveType.LineList, points, 0, points.Length, model.Lines, 0, model.Lines.Length / 2);

            _models[0].Draw(GraphicsDevice);
        }
    }

    base.Draw(gameTime);
} 
```

model.GetWorld() 返回一个包含对象旋转、平移和缩放的矩阵，model.GetPoints() 一个包含点的列表，model.Lines 是一个包含连接点索引的列表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T04:24:04.023

您通常只需要任何类型的效果中的一种（例如 BasicEffect）。原因是效果包含两个主要内容：为 GPU 编写的代码（照明等）和它公开的参数（例如 Effect.World，世界矩阵）。多次编译 GPU 代码没有多大意义，因为每次都相同，所以我们唯一需要考虑的另一件事是参数。

注意对 pass.Apply() 的调用。这实际上是在每次绘制之前将您在效果上设置的所有参数上传到 GPU。希望应该告诉您的是，您应该能够在每次绘制之前在单个效果上设置旋转并调用 Apply，而不是使用单独设置的旋转创建一堆效果。此外，设置 Effect.World 实际上应该在 pass.Apply() 之前。

要回答第二个要点，您是完全正确的。GPU 用于对具有大量并行性的点进行转换，因此最好不要自己尝试，因为它会很慢。

至于DrawUserIndexedPrimitives，我不是图形爱好者，但通常该调用保留用于顶点不断变化的情况（如软体斑点或布料），基本上你无法通过翻译来描述网格，旋转和缩放。GPU 公开了称为 VertexBuffer 的特殊原语，其全部目标是在 GPU 内存中存储一​​堆点（这使得它们可以非常快速地访问）。从那里开始，如果您想移动它，GPU 将转换每个点（但请注意，您需要传递它的只是平移、旋转和缩放，一切顺利）。使用 DrawUserIndexedPrimitives 实际上必须每帧将所有点发送到 GPU，这更慢（多少，谁知道这些天没有测试）。

幸运的是，显卡实际上实现了一种特殊的绘制模式，称为“线框”，它不是绘制三角形，而是将三角形的边缘绘制为线条。要设置线框模式，请在调用 Draw 之前执行此操作：

```
this.GraphicsDevice.RasterizerState.FillMode = FillMode.WireFrame; 
```

现在，在应用您自己的旋转方面，您实际上需要做的就是将世界矩阵乘以一个旋转矩阵（使用类似 Matrix.CreateRotationX(yourAngle) 的东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T04:26:36.987

您当前的解决方案很好，尽管我会在 pass.Apply() 之前进行世界分配

如果您的模型很少，您可以使用变换传递给着色器和数组，并在您的顶点结构中添加该数组的索引。

这样，您可以一次绘制所有模型。

# actionscript-3 - 更改由 AS3 添加到舞台的 MovieClip 中的动态文本字段不起作用？

> ID：10567053
> 
> 赞同：4
> 
> 时间：2012-05-12T20:13:31.103
> 
> 标签：actionscript-3, flash, flash-cs5

当我更改动态文本字段的文本值时，文本字段只是空白，不显示新值。

我有一个名为“game_board”的影片剪辑，它由 AS3 动态添加到舞台。（舞台一开始是空白的。）

我有另一个名为“stage_2”的 MovieClip，它作为子项由 AS3 动态添加到“game_board”。

“stage_2”包含一个预建板，上面有不同的动态文本字段。它们都有实例名称。例如“text_1”。的原始值为`this.game_board.stage_2.text_1.text`0。

当我这样做时：

```
this.game_board.stage_2.text_1.text = "test";

trace(this.game_board.stage_2.text_1.text); //succesfully shows new value, "test" 
```

跟踪成功地显示了新值，但是舞台上显示“0”的文本字段现在完全没有显示，它只是消失了。我尝试运行`addChild`以防它由于某种原因被移动到底层，但这没有用。即使舞台只包含该文本字段，它仍然只是空白。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T20:17:11.277

试试这个：

```
this.game_board.stage_2.text_1.embedFonts = false;
this.game_board.stage_2.text_1.text = "test"; 
```

发生这种情况是因为默认情况下使用 flash cs5 `embedFonts`，因此如果您没有在库中设置字体然后将其附加到文档中，flash cs5 只会嵌入仅在您的文本输入中的字体，您可以测试是否更改`text_1`from `0`to`te`和 remove的值`embedFonts`只会在`tet`没有`s`, 的情况下用于`embedFonts`所有文本，请参见：[Embedding Fonts in AS3 - Dynamic Text Field消失](https://stackoverflow.com/questions/1744541/embedding-fonts-in-as3-dynamic-text-field-disappears)

# c++ - 在 Qt Creator 中链接 EGL？

> ID：10567054
> 
> 赞同：1
> 
> 时间：2012-05-12T20:13:37.217
> 
> 标签：c++, qt, opengl-es, qt-creator, egl

我在 Qt Creator 的 MinGW 文件夹中有 EGL。我想知道 EGL 的正确链接器标志是什么。不幸的是，`-lEGL`并`-legl`没有工作。

`LIBS += -legl -lGLESv2 #<-- does not compile`

有解决方法吗？注意：关于 OpenGL 背后的“Qt 方式”，我不打算将 EGL 与 Qt 一起使用。我只是将 Qt Creator 用作其核心框架等；我计划运行我从[arm 网站](http://www.malideveloper.com/opengl-es-20-emulator.php)下载的模拟器，以运行我正在做的事情。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:20:36.570

刚找到。

答案是使用基于 ARM 的库作为前缀`lib`。所以，

`LIBS += -llibEGL -llibGLESv2`是答案，而不是`-lEGL`or `-lGLESv2`。

# java - Java 将日志写入文本

> ID：10567055
> 
> 赞同：-1
> 
> 时间：2012-05-12T20:13:38.687
> 
> 标签：java, logging, instrumentation, javassist

目前，我正在使用记录器检测方法以跟踪一些信息，但在将日志输出提取到文本文件中时遇到问题。

我正在做的是检测每个方法，`logger.info`但是当您想要添加处理程序时它不起作用，因为这将为每个方法添加重复的处理程序。我现在使用`insertBefore()`来自 Javassist 的方法作为检测部分，它是这样的：

`insertBefore("Loggers and some implementations");`- 这意味着记录器/实现在运行之前在每个方法中完成，这意味着如果我要在此处添加处理程序，将有许多与方法数量相同的处理程序，并且重复给我错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T20:21:44.840

为什么不能使用单个顶级处理程序？恕我直言，无需为较低级别的包和方法定义冗余处理程序。

也许再看一遍手册和例子。

# objective-c - UIIMage 视图旋转小于 90 度

> ID：10567056
> 
> 赞同：0
> 
> 时间：2012-05-12T20:13:53.427
> 
> 标签：objective-c, xcode, xcode3.2

我有一些代码应该将图像旋转 45 度，但实际上不起作用，它只会闪烁大约 10 倍大小并消失。

当运行相同的代码但角度从 45 变为 90 时，一切正常。在浏览了类似问题的页面后，我发现其他人在旋转 45 度时遇到问题，但没有一个是相同的，并且没有一个解决方案可以帮助我。

所以我想知道是否有人可以启发我？这是代码：

```
image.transform = CGAffineTransformMakeRotation((M_PI*45)/180); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T23:24:35.863

```
 image.transform = CGAffineTransformMakeRotation(0.785398163); 
```

如果您想知道奇怪的 0.785398163 值是什么，它是 45 度转换为弧度。您可以在互联网上找到弧度度数计算器，反之亦然。

# android - 在谷歌地图上画一个矩形

> ID：10567058
> 
> 赞同：0
> 
> 时间：2012-05-12T20:14:01.693
> 
> 标签：android, google-maps, drawing, overlay

我的计划是允许用户在地图上绘制一个矩形以标记一个区域并稍后保存它。我找到了一种方法来做到这一点，但它什么也没做。这是到目前为止代码的样子。

```
public class Map extends MapActivity{

private MapView mvMap;
MapController kontrol;
float xs, ys, xe, ye;
GeoPoint start, end;
private Paint paint = new Paint();
private boolean up = false;

@Override
protected void onCreate(Bundle arg0) {
    // TODO Auto-generated method stub
    super.onCreate(arg0);
    setContentView(R.layout.map);
    mvMap = (MapView) findViewById(R.id.mvMap);
    mvMap.setBuiltInZoomControls(true);
    paint.setStrokeWidth(2.0f);
//  
//  DrawOverlay t = new DrawOverlay();
//  List<Overlay> olList = mvMap.getOverlays();
//  olList.add(t);
    mvMap.getOverlays().add(new EmptyOverlay());
    mvMap.postInvalidate();
    kontrol = mvMap.getController();
    GeoPoint ja = new GeoPoint(52172722, 21071987);
    kontrol.animateTo(ja);
    kontrol.setZoom(11);
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

class DrawOverlay extends Overlay{
    public boolean onTouchEvent(MotionEvent e, MapView m){
        if(up = false){
            if(e.getAction() == MotionEvent.ACTION_DOWN){
                xs = ys = 0;
                xs = e.getX();
                ys = e.getY();
                start = mvMap.getProjection().fromPixels((int)xs,(int)ys);
                //draw(null, m, up);
            }
            if(e.getAction() == MotionEvent.ACTION_MOVE){
                xe = e.getX();
                ye = e.getY();
                end = mvMap.getProjection().fromPixels((int)xe,(int)ye);

            }
            if(e.getAction() == MotionEvent.ACTION_UP){
                up = true;
            }
        }
        return true;
    }

    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
            long when) {

        if(start != null && end != null){
            //get the 2 geopoints defining the area and transform them to pixels
            //this way if we move or zoom the map rectangle will follow accordingly
            Point screenPts1 = new Point();
            mapView.getProjection().toPixels(start, screenPts1);
            Point screenPts2 = new Point();
            mapView.getProjection().toPixels(end, screenPts2);

            //draw inner rectangle
            paint.setColor(0x4435EF56);
            paint.setStyle(Style.FILL);
            canvas.drawRect(screenPts1.x, screenPts1.y, screenPts2.x, screenPts2.y, paint);
            //draw outline rectangle
            paint.setColor(0x88158923);
            paint.setStyle(Style.STROKE);
            canvas.drawRect(screenPts1.x, screenPts1.y, screenPts2.x, screenPts2.y, paint);
        }
        return true;
    }

}

public class EmptyOverlay extends Overlay {
    private float x1,y1;
    private Overlay overlay = null;

    public EmptyOverlay(){

    }

    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
            long when) {
        // TODO Auto-generated method stub
        return super.draw(canvas, mapView, shadow, when);
    }

    @Override
    public boolean onTouchEvent(MotionEvent e, MapView mapView) {
    //  if(mv.isEditMode()){
            if(e.getAction() == MotionEvent.ACTION_DOWN){
                //when user presses the map add a new overlay to the map
                //move events will be catched by newly created overlay
                x1 = y1 = 0;
                x1 = e.getX();
                y1 = e.getY();

                overlay = new DrawOverlay();
                mapView.getOverlays().add(overlay);

            }
            if(e.getAction() == MotionEvent.ACTION_MOVE){
            }
            //---when user lifts his finger---
            if (e.getAction() == MotionEvent.ACTION_UP) {                

            }    
           // return true;
//      }
        return false;
    }
} 
```

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T11:25:52.617

**使用此代码，它将适用于您在任何标记位置上绘制带有内部文本的矩形。此代码将为我们通过覆盖项传递的许多朋友绘制许多矩形，**

```
 public void draw(android.graphics.Canvas canvas, MapView mapView,
                  boolean shadow)
{
    super.draw(canvas, mapView, shadow);

    // go through all OverlayItems and draw title for each of them
    for (OverlayItem item:mOverlays)
    {

        GeoPoint point = item.getPoint();
        Point markerBottomCenterCoords = new Point();
        mapView.getProjection().toPixels(point, markerBottomCenterCoords);

        /* Find the width and height of the title*/
        TextPaint paintText = new TextPaint();
        Paint paintRect = new Paint();

        Rect rect = new Rect(markerBottomCenterCoords.x,markerBottomCenterCoords.y,33,44);
        paintText.setTextSize(FONT_SIZE);
        paintText.getTextBounds(item.getTitle(), 0, item.getTitle().length(), rect);
       // rect.height()=34;
        rect.inset(-TITLE_MARGIN, -TITLE_MARGIN);
        int markerHeight=34;// this will place to a height of 34 athe top of the mark location
        rect.offsetTo(markerBottomCenterCoords.x - rect.width()/2, markerBottomCenterCoords.y - markerHeight - rect.height());

        paintText.setTextAlign(Paint.Align.CENTER);
        paintText.setTextSize(FONT_SIZE);
        paintText.setARGB(255, 255, 255, 255);
        paintRect.setARGB(255,148,0,211);//s(255, 178, 34, 34);
        paintRect.setTextAlign(Align.CENTER);
        canvas.drawRoundRect( new RectF(rect), 0, 29, paintRect);
       canvas.drawText(item.getTitle(), rect.left + rect.width() / 2,
                rect.bottom - TITLE_MARGIN, paintText);

    }
} 
```

# ios - 自动 __weak 引用错误，但为 iOS 5 构建

> ID：10567061
> 
> 赞同：1
> 
> 时间：2012-05-12T20:14:18.137
> 
> 标签：ios, ios5, automatic-ref-counting

我正在向 Prestented View Controller 添加一个协议，以建立 Presenting View Controller 和 Presented View Controller 之间的关系。

```
The current deployment target does not support automated __weak references 
```

我已经在呈现的视图控制器（DistanceModalViewController.h）中声明了如下协议：

```
@protocol DistanceModalViewControllerDelegate <NSObject>
-(void)dismissDistanceModalViewControllerWithData: (id) data;
@end 
```

并在界面（DistanceModalViewController.h）中：

```
@property (nonatomic, weak) id<DistanceModalViewControllerDelegate> delegate; 
```

在我合成的实现中（DistanceModalViewController.m）：

```
@synthesize delegate; 
```

但我得到了上面的错误。我的目标是 iPhone 5.1 模拟器。

我可以理解给我问题的弱参考，但在 iOS5 上，我有点困惑。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T20:20:22.300

> 我的目标是 iPhone 5.1 模拟器。

你的意思是你已经在工具栏的下拉菜单中选择了它？这不是部署目标，而是您在选择*Product > Run*时运行应用程序的设备。这个特定设备运行足够高的 iOS 版本这一事实并不重要；如果您的目标是较低版本，它也必须能够在较低版本上运行。部署目标是您为其构建的平台。在您的构建设置中，检查条目*iOS Deployment Target*。这将让您仅针对 iOS 5 及更高版本。

# java - 为什么我在使用 Java (Netbeans) 连接到 MySQL 时收到此错误“通信链接失败发送的最后一个数据包...”？

> ID：10567064
> 
> 赞同：3
> 
> 时间：2012-05-12T20:14:38.310
> 
> 标签：java, mysql, netbeans, netbeans-7

我正在尝试通过`192.168.1.5`使用 NetBeans 从 Java 使用 MySQL 数据库（安装在我的电脑上的虚拟机（Debian）上并具有 IP 地址）。

我已将连接配置如下：

```
Driver Name MySQL(Connector/J Driver)

Host 192.168.1.5

Database test

Username root

Password *

JDBC URL jdbc:mysql://192.168.1.5:3306/test 
```

然后我收到以下错误：

```
cannot establish a connection to jdbc:mysql://192.168.1.5:3306/test using 
  com.mysql.jdbc.Driver (Communications link failure  The last packet sent successfully 
  to the server was 0 milliseconds ago. The driver has not received any packets 
  from the server.) 
```

我的`mysql.user`表看起来像这样（我知道`% root`这不是很安全，但这只是为了暂时简化事情）：

```
+------------+------------------+
| host       | user             |
+------------+------------------+
| %          | root             |
| 127.0.0.1  | root             |
| ::1        | root             |
| debVirtual |                  |
| localhost  |                  |
| localhost  | debian-sys-maint |
| localhost  | phpmyadmin       |
| localhost  | root             |
+------------+------------------+ 
```

我该怎么做才能允许这种连接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T20:30:11.903

问题出在服务器上的mysql配置文件上`/etc/mysql/my.cnf`

该行 :`bind-address` 应该指向您的服务器的 IP，就像在这个例子中一样

`bind-address = 192.168.1.5`

并不是

`bind-address = 127.0.0.1`

允许远程访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T20:27:38.613

你可以发布你的整个代码吗？

当您尝试访问的数据库不存在时，就会出现该错误。检查 VM 软件中的网络设置。您使用的是什么类型的 VM 软件（VirtualBox、VM ware...）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-26T16:27:32.630

这是错误的文件夹，或者我有不同的版本。我正在运行 Lubuntu，但文件不是 my.cnf（因为该文件没有绑定地址）。绑定地址位于`/etc/mysql/mysql.conf.d/`名称为的文件中：`mysqld.cnf`. 您无法通过文件管理器对其进行修改，因此您必须通过以下命令行：

```
sudo su
***enter password***
cd /etc/mysql/mysql.conf.d
nano mysqld.cnf 
```

然后转到 bind-address 127.0.0.1 并将其更改为您可以在其中找到的 IPv4

```
ifconfig 
```

我希望我有所帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-12-20T17:09:58.577

完美解决方案：

1.  在 netbeans 之前启动 wamp 服务器
2.  然后打开netbeans

它对我有用。当我关闭 wamp 服务器时，它向我显示此错误：

# android - 这对电话间隙有效吗？

> ID：10567067
> 
> 赞同：0
> 
> 时间：2012-05-12T20:14:59.243
> 
> 标签：android, cordova, camera

我想要一个应用程序的一个方面，它根据预设时间调用相机，然后给用户大约五秒钟的时间，然后自动拍照而用户除了指示位置之外没有任何输入。你知道我能不能用电话间隙来解决这个问题吗？我查看了 API，但我无法准确看到它，但我觉得它应该是可能的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:18:43.610

我不知道你的问题的答案。但是如果你可以用 Java 来做，那么你可以用 PhoneGap 来做。

唯一的问题是，如果 PhoneGap 没有提供你想要的 API，你将不得不为它编写一个插件，因此知道如何编写 Java

[如何为 Android 创建一个 PhoneGap 插件](http://wiki.phonegap.com/w/page/36753494/How%20to%20Create%20a%20PhoneGap%20Plugin%20for%20Android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:32:29.420

不，PhoneGap 做不到。而不是写一个插件，我会选择写一个完整的原生应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T14:30:49.847

您好，请使用 java script timer 来安排摄像头，并使用手机间隙摄像头 api 根据您设定的时间长度进行拍摄。

# c# - 网址详细信息丢失

> ID：10567071
> 
> 赞同：1
> 
> 时间：2012-05-12T20:15:23.940
> 
> 标签：c#, windows-phone-7, url, browser, webbrowser-control

我曾经两次调用 browser_Navigating 事件，以启用 UserAgent - WP7 的开关。一切正常，但例如登录框中的用户输入丢失。我在 facebook 上遇到过这种情况，不知道是否有其他影响。

这是一段代码：

```
 private void Browser_Navigating(object sender, NavigatingEventArgs e)
    {
        var browser = sender as WebBrowser;

        if (UAnaviCounter < 1)
        {
            e.Cancel = true;
            browser.Navigate(e.Uri, null, UserAgent);
            UAnaviCounter++;
            return;
        }
...
} 
```

有人知道数据可能在哪里丢失吗？

谢谢

# iphone - 为 NSURL 添加时间戳

> ID：10567074
> 
> 赞同：1
> 
> 时间：2012-05-12T20:16:13.690
> 
> 标签：iphone, xcode, ios5, xcode4

我有一个文本视图，可以从我的服务器上的 .txt 下载文本。唯一的问题是它只会执行一次——无论我是否更新 .txt 文件，文本都不会改变。

这是文本视图的代码：

```
- (void)viewDidLoad

{NSError *error = nil;
NSURL *myurl = [NSURL URLWithString:@"http://www.myserver.com/test.txt"];
NSString *mystring = [NSString stringWithContentsOfURL:myurl encoding:NSUTF8StringEncoding error:&error]; 
newtext.text = mystring;
} 
```

似乎无法弄清楚如何让它在每次应用程序运行时检查服务器（而不仅仅是缓存它第一次找到的内容）。这发生在模拟器和真正的 iphone 上。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T20:23:09.273

HTTP caching is controlled by the `Cache-Control` HTTP header. If your text file is changing often, you should configure your server to emit suitable headers for this, for instance `Cache-Control: no-cache`. For more details, read [Mark Nottingham's caching tutorial](http://www.mnot.net/cache_docs/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T22:09:12.717

我不相信您可以使用便捷方法 stringWithContentsOfURL 设置缓存策略。如果我错了，有人纠正我。

好消息是这很容易解决。只需创建您自己的请求并将缓存策略设置为 NSURLRequestReloadIgnoringLocalCacheData。

```
NSURL *myurl = [NSURL URLWithString:@"http://www.myserver.com/test.txt"];
NSURLRequest *request = [NSURLRequest requestWithURL:myurl
                                         cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
                                     timeoutInterval:60.0];

NSURLConnection *connection= [[NSURLConnection alloc] initWithRequest:request 
                                                             delegate:self]; 
```

然后在委托中设置文本视图。归根结底，这就是便利方法正在做的事情。

# php - 从 php 到 node.js 的 Mongodb 基础知识

> ID：10567076
> 
> 赞同：-2
> 
> 时间：2012-05-12T20:16:18.633
> 
> 标签：php, mysql, node.js, mongodb, socket.io

在网上我找不到一个很好的关于 mongodb 基础知识的教程，用 node.js - socket.io 所以我的问题是：

1.  使用 node.js-socket.io 插入 mongodb 的示例
2.  更新记录
3.  从 mongo 数据库中获取

在 php/mysql 中是：

```
<?php
$con = mysql_connect("localhost","peter","abc123");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("my_db", $con);

mysql_query("INSERT INTO Persons (FirstName, LastName, Age)
VALUES ('Peter', 'Griffin',35)");

mysql_query("INSERT INTO Persons (FirstName, LastName, Age) 
VALUES ('Glenn', 'Quagmire',33)");

mysql_close($con);
?> 
```

这段代码在 mongoDB/node.js-socket.io 中的样子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T20:21:11.687

这个页面包含一些我之前尝试过的简单示例。

[http://howtonode.org/node-js-and-mongodb-getting-started-with-mongojs](http://howtonode.org/node-js-and-mongodb-getting-started-with-mongojs)

# java - 使用 Twitter 从 Java Web 应用程序进行注册和身份验证

> ID：10567077
> 
> 赞同：2
> 
> 时间：2012-05-12T20:16:39.670
> 
> 标签：java, oauth, twitter-oauth, scribe

我希望允许用户使用他们的 Twitter 帐户注册并登录到我的 Java Web 应用程序。我需要从他们的 Twitter 帐户中获取的唯一信息是他们的姓名（如果没有提供姓名，则为 Twitter 用户名）和他们的电子邮件地址。

我遇到了[scribe](https://github.com/fernandezpablo85/scribe-java) OAuth 库，它提供了[一个示例](https://github.com/fernandezpablo85/scribe-java/blob/cf9c4be00c2142fbfed6735d7d109bb2e90e4af6/src/test/java/org/scribe/examples/TwitterExample.java)，说明如何使用它从控制台应用程序向 Twitter 进行身份验证。但是，我无法弄清楚如何将其适应网络应用程序。我认为我不能“按原样”使用这个示例，因为它包含如下代码：

```
Scanner in = new Scanner(System.in); 
```

这不适用于网络应用程序。此外，身份验证完成后，我看不到如何检索用户的姓名和电子邮件地址。

如果有人可以向我指出如何从 Java webapp 使用 Twitter（使用 OAuth）进行身份验证并检索用户的姓名和电子邮件的完整示例，那就太好了。该示例不一定必须使用 scribe，尽管我自己编写的代码越少越好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:20:06.033

您需要在应用程序中有一个端点来接收`verifier`.

如果您采用 OOB 方式，如示例中所示，客户端将必须手动执行对您的端点的调用：

```
curl http://example.com?verifier=123456 
```

如果你`callback`这样使用：

```
Service service = new ServiceBuilder().callback("http://example.com"). //rest of the config 
```

Twiiter 将自行执行调用并将用户浏览器重定向到您的端点。

# css - 使用 HTML、CSS 和 JavaScript 创作 PDF

> ID：10567084
> 
> 赞同：1
> 
> 时间：2012-05-12T20:17:19.933
> 
> 标签：css, dom, pdf

我真的很喜欢通过 DOM + CSS 创建对象。

无论如何我可以

*   拍摄 DOM 树的快照，然后
*   从 DOM 树中生成 PDF

（失去了交互性就很好了。我只是喜欢可以创建 DOM 树的直观方式。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T20:32:44.157

在 Kubuntu Linux 上，可以从任何应用程序（例如 Firefox）打印为 PDF。您可能需要查看适用于您的操作系统的打印机到 PDF 驱动程序。但是请注意，您必须非常小心分页符。只要您知道您的目标是哪种尺寸的纸张，CSS 就可以处理这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T20:41:36.897

**[PrinceXML](http://www.princexml.com/)**是一个专业的工具，用于从带有 CSS 样式的 HTML 创建 PDF。它的价格也很*专业*；）（从一台计算机上离线使用的 500 美元到服务器许可证的 3800 美元不等），因此对于业余爱好来说是不合适的。
编辑：哎呀，它还有“ *Prince 非商业用途的免费许可证。该许可证在生成的 PDF 文件的第一页添加了一个小徽标。* ”

它一直对 CSS2.1 有很好的支持（`print`显然包括媒体）

# jsp - 使用 lib 文件夹构建 Java Web 项目问题

> ID：10567086
> 
> 赞同：0
> 
> 时间：2012-05-12T20:17:42.003
> 
> 标签：jsp, jakarta-ee, build, glassfish-3, netbeans-7

我现在正在构建我的网络项目，但遇到了以下问题。jar 不在 lib 文件夹中。这是我收到的错误消息：

```
init:
undeploy-clean:
deps-clean:
do-clean:
Deleting directory C:\Users\Laptop\Documents\NetBeansProjects\eAnalytics\build
C:\Users\Laptop\Documents\NetBeansProjects\eAnalytics\nbproject\build-impl.xml:1066: Unable to delete file C:\Users\Laptop\Documents\NetBeansProjects\eAnalytics\build\web\WEB-INF\lib\activation.jar
BUILD FAILED (total time: 9 seconds) 
```

任何想法为什么会发生这种情况以及我该如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:32:53.857

在您的项目文件夹中，有以下内容：

*   建造
*   距离
*   构建.xml

要解决此问题，请退出 netbeans，打开您的项目文件夹并删除 build、dist 文件夹和 build.xml。然后启动netbeans。右键单击您的项目，然后单击清理并构建。

就这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T23:59:42.837

可能是这样

*   您位于此路径之外的文件夹中，或者，
*   从该路径之外的文件夹中打开一个或多个文件。

> C:\Users\Laptop\Documents\NetBeansProjects\eAnalytics\build\

关闭 Windows 资源管理器（如果您打开了文件夹）或关闭文件（如果您有任何打开的文件）

并重新运行您的脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-09T06:05:48.517

**或者/并**关闭**任务管理器**中的**java.exe**以防（**win OS**）从tomcat服务器释放资源，例如libs，如果您可以删除它们并且没有消息，您也可以删除项目中的文件夹 build 和 dist像“文件夹文件已被系统使用”然后您可以重新运行 **，在某些情况下，**我将项目属性从**jdk 1.6 更改为 jdk 1.7 并将其重新设置为 1.6**以刷新

 ******> nbproject\build-impl.xml 文件******

# windows-phone-7 - 使用 Model 方法填充 ViewModel 中的 ObservableCollection

> ID：10567089
> 
> 赞同：0
> 
> 时间：2012-05-12T20:18:06.550
> 
> 标签：windows-phone-7, mvvm, viewmodel, observablecollection

我有一个带有 ObservableCollection、SaloonList 的 ViewModel，我用数据库中的数据填充它。当所有内容都在 ViewModel 文件中时，以下代码有效：

```
 public MainViewModel()
    {
        PopulateList();
    }

    private void PopulateList()
    {
        WebClient webClient = new WebClient();
        Uri site = new Uri(_URL);
        UriBuilder uriBuilder = new UriBuilder(site);
        uriBuilder.Path += String.Format("{0}", "all");
        webClient.OpenReadCompleted += SaloonsCompleted;
        webClient.OpenReadAsync(uriBuilder.Uri);
    }

    private void SaloonsCompleted(object sender, OpenReadCompletedEventArgs e)
    {
        if (e.Error != null) { return; }

        DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(DBSaloons));
        DBSaloons jsonResponse = (DBSaloons)ser.ReadObject(e.Result);
        this.SaloonList = jsonResponse.Results;
        e.Result.Close();
    } 
```

但是，当我尝试从 ViewModel 中分离 PopulateList 方法并使用以下代码时，即使填充了操作中的列表并且在调试器窗口中打印了获取的轿车数量，我的 SaloonList 也不会被填充：

```
 public MainViewModel()
   {      
      Models.Fetcher fetch = new Fetcher();
      fetch.PopulateList(this.SaloonList, onComplete);
   }

   Action<ObservableCollection<Saloon>, OpenReadCompletedEventArgs> onComplete = (ObservableCollection<Saloon> list, OpenReadCompletedEventArgs e) =>
   {
        if (e.Error != null) { Debug.WriteLine("Fetch Error"); return; }
        DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(DBSaloons));
        DBSaloons jsonResponse = (DBSaloons)ser.ReadObject(e.Result);
        list = jsonResponse.Results;
        e.Result.Close();
        Debug.WriteLine("Fetched: " + list.Count.ToString() + " saloons");
    }; 
```

这是该方法在 fetcher 类中的样子：

```
 public void PopulateList(ObservableCollection<Saloon> list, Action<ObservableCollection<Saloon>, OpenReadCompletedEventArgs> onComplete)
    {
        Debug.WriteLine("Fetching...");
        WebClient webClient = new WebClient();
        Uri site = new Uri(_URL);
        UriBuilder uriBuilder = new UriBuilder(site);
        uriBuilder.Path += String.Format("{0}", "all");

        webClient.OpenReadCompleted += (object sender, OpenReadCompletedEventArgs e) => onComplete(list, e);
        webClient.OpenReadAsync(uriBuilder.Uri, list);
    } 
```

我究竟做错了什么？

编辑：

就这样解决了

```
public void PopulateList(Action<DBSaloons> callback, Action<Exception> exception)
    {
        Debug.WriteLine("Fetching...");
        WebClient webClient = new WebClient();
        Uri site = new Uri(_URL);
        UriBuilder uriBuilder = new UriBuilder(site);
        uriBuilder.Path += String.Format("{0}", "all");

        webClient.OpenReadCompleted += ((sender, e) =>
        {
            DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(DBSaloons));
            DBSaloons jsonResponse = (DBSaloons)ser.ReadObject(e.Result);
            Deployment.Current.Dispatcher.BeginInvoke(() =>
            {
               if (e.Error == null) callback(jsonResponse);
                else exception(e.Error);
            });
            e.Result.Close();
        }
        );
        webClient.OpenReadAsync(uriBuilder.Uri);
    } 
```

然后在我的 ViewModel 中，我得到了这样的沙龙列表：

```
 fetch.PopulateList( (list) =>
        {
            Debug.WriteLine("Fetched: " + list.Results.Count.ToString() + " saloons");
            this.SaloonList = list.Results;

        }, (exception) => { }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T21:06:50.013

```
list = jsonResponse.Results; 
```

您正在覆盖您对 list 的引用，因此 MainViewModel.SaloonList 和 list 不再是相同的对象。替换为：

```
this.SaloonList = jsonResponse.Results; 
```

或者手动将 jsonResponse.Results 的内容复制到列表中。

# dojo - 如何在 dojo 中创建自定义表格小部件？

> ID：10567090
> 
> 赞同：0
> 
> 时间：2012-05-12T20:18:15.280
> 
> 标签：dojo

最近我开始使用 Dojo 来编写应用程序接口，并且是 Dojo 的新手，我的第一个任务是创建一个自定义表格小部件，其中包含显示来自数据库的文件列表和文件图标的行。该小部件将类似于数据网格，但我们希望使用类似于列表的表格，因为数据网格有时对网络来说可能很重。谢谢您的帮助，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:00:43.227

好的，假设您使用数据存储区实例化您的自定义小部件，网格也是如此。您的商店，取决于哪种类型（例如：itemfilereadstore）具有其项目列表，以下将处理它们，同时在您的小部件中创建行

```
<script>
    dojo.declare("myTable", [dijit._Templated], {
     // define which template to instantiate on your domNode (in this case, table becomes the domNode of your widget)
     templateString: '<table><thead dojo-attach-point="headNode"></thead><tbody dojo-attach-point="bodyNode"></tbody></table>',

     constructor: function(args) {
       args = args || {};
       if(!args.store) console.warn("No store supplied");
       this.store = args.store
       // Note; there are a number of methods to achieve this hook,
       // depending on which type of datastore is in use
       this.store.fetch({ onComplete: dojo.hitch(this, "_onload") });
     },
     // function to be called whenever the store has fetched an item set
     _onload: function(items) {
       var _t = this, store = _t.store, head = _t.headNode, body = _t.bodyNode;
       var headIsFilled = false;
       // 'haxed' reset of current setup, simply resetting innerhtml
       _t.rowIdentifiers = [];
       _t.rows = [];
       head.innerHTML = "<tr></tr>";
       head = head.firstChild;
       body.innerHTML = "";
       dojo.forEach(items, function(item) {
           // generic way of simply showing all of contents available in store
           // prefereably, set this structure in an argument while constructing and
           // fill head with, say _t.layout
           if(!headIsFilled) {
              // loops the first item, making sure not to take in any internal references, should check for item
              for(var i in item) if(item.hasOwnProperty(i) && i != "_S" && i != "_RI") {
                 dojo.place("<th>"+i+"</th>");
                 _t.rowIdentifiers.push(i);
              }
              headIsFilled = true; // only once
           }
           var tr = dojo.create("tr", null, body);
           var row = { el : tr }
           var cell;
           dojo.forEach(_t.rowIdentifiers, function(key) {
             cell = dojo.create("td", {innerHTML : store.getValue(item, key)},  tr);
             row[key] = cell.innerHTML; // the toString value of item
           });
           _t.rows.push(row);
       });
     }
    });
</script> 
```

代码尚未经过评估，但应该可以大致了解如何启动小部件。

注意代码中的几件事；`templateString`是基本的 html 布局应该是什么，并且有许多“魔术”约定，在这个例子中，只有附加点用于让 _Templated mixin 在小部件中对其 domNodes 进行引用

请参阅以下入门教程和一般参考：

[http://dojotoolkit.org/documentation/tutorials/1.6/understanding_widget/](http://dojotoolkit.org/documentation/tutorials/1.6/understanding_widget/)

[http://dojotoolkit.org/documentation/tutorials/1.6/templated/](http://dojotoolkit.org/documentation/tutorials/1.6/templated/)

# android - 解析设备上的android包时出错

> ID：10567094
> 
> 赞同：1
> 
> 时间：2012-05-12T20:18:55.847
> 
> 标签：android, parsing

我正在尝试在支持 android 2.3.6 平台，API 级别 10 的 Galaxy ace 手机上安装我的 android 应用程序，但它给出了上述错误。我在 API 级别 15 中制作了应用程序。我已设置`android:minSdkVersion`为 API 级别 10。但我仍然遇到同样的错误。任何帮助将不胜感激。 `<uses-sdk android:minSdkVersion="10">`

# dependencies - 离线解决包依赖关系

> ID：10567096
> 
> 赞同：0
> 
> 时间：2012-05-12T20:19:18.523
> 
> 标签：dependencies, package, redhat, rpm

我有没有互联网访问的 RedHat v.6.2 服务器。我昨天已经安装了它，但是它没有vncserver。，我想安装vnc。我有`yum`和`rpm`。VNC 需要一些包和库，但这些库需要越来越多等。

我决定做以下事情：

1.  递归查找**所有**依赖项`vncserver`
2.  从此列表中查找并排除已安装的软件包
3.  下载到其他机器或USB驱动器所有需要的包
4.  像从本地存储库一样将其安装在目标机器上

你能给我一个关于`1`and的提示`2`吗？可能您知道其他解决方案，或者您遇到过同样的情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T05:53:05.793

您可以在另一台机器上以仅下载模式使用 yum，以获取所有必需的 RPM

# java - 如何在递归中使用索引变量？

> ID：10567102
> 
> 赞同：2
> 
> 时间：2012-05-12T20:20:01.640
> 
> 标签：java, variables, recursion, indexing

我想在递归中使用索引变量，而不是在调用函数时将其作为参数发送。但是，如果我在开始时重置它（例如 i = 0），它会在每次运行时重置。我想将它用作计数器（计算函数运行次数）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T20:29:13.523

首先，您显然只想初始化一次。递归中的一个常见模式是：

```
public void run(int opt) {
  run_helper(opt, 0);
}

private void run(int opt, int depth) {
  if (whatever) { run(opt, depth + 1); }
} 
```

外部方法只做一些初始化。

A "solution" you will see suggested often (e.g. in the first comment to your question) will be to use static variables. This approach is a bad style, and will cause your program to fail in various weird way once you add multi-threading (e.g. by making a UI version, or run it in multithreading web server). And the worst is that it may at first appear to work, and only start misbehaving subtly when there are many users. **So keep away from "static" for everything except constants!**

With "static" it would commonly look like this:

```
static int counter;

public void start() {
  counter = 0;
  recurse();
}

public void recurse() {
  counter += 1;
  if (whatever) { recurse(); }
} 
```

Now imagine that two users invoke `start` at the same time. **They will overwrite each others counter!** Because static means, it's shared amongst threads and users.

Here is a **really simple to understand solution**:

```
class MyTask {
  int counter = 0;

  public void recurse() {
    counter++;
    if (whatever) { recurse(); }
  }

  public int getIterations() {
    return counter;
  }
}

public void run() {
  MyTask task = new MyTask();
  task.run();
  System.out.println("Task took "+task.getIterations()+" itertions.");
} 
```

You then create a task, run it, and retrieve the counter at the end. Clean, dead simple, efficient and reliable. **If you have more than one thread/user, each will have a separate MyTask object, and you won't run into any problem.**

Plus, you can add additional statistics, and they are all cleanly wrapped in the task object. "Average time per iteration"? "Average recursion depth"? No problem. The task object can also be used to store your result.

The use of `ThreadLocal` has been suggested here. I do not agree with this. It offers no benefits of the task object at all. Just try to implement it with `ThreadLocal` and the task object and you'll see the difference. Plus, `ThreadLocal` is empirically 10x slower than accessing heap values (see [https://stackoverflow.com/a/4756605/1060350](https://stackoverflow.com/a/4756605/1060350) ). For `int` it likely is even worse. So **never ever call `ThreadLocal#get` in a performance critical codepath**. If you intend to use `ThreadLocal`, use it outside of this codepath, and use a local variable (or a Task object) to feed the "local static" variable into your critical codepath.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T20:54:29.957

You should separate it using two methods: one public to start the recursive iterations and initialize the counter to zero, and another private one, that is where the recursive calls are made. This way every time you call the public method the counter gets initialized. It would be something like this (in java):

```
public class Recursion{
    private int iterations=0;

    private int calcFactorial(int n){
        iterations++;
        if (n==2)
            return 2;
        else
            return n * calcFactorial(n-1);
    }

    public int factorial(int n){
        //initialize the counter
        iterations = 0;
        return calcFactorial(n);
    }

    public int getIterations(){
        return iterations;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T21:04:37.203

I'd go with a simple parameter-based approach, given that the index is used as a stop condition. JavaScript implementation:

```
var recurse = function() {
    recurseHelper(0);
};

var recurseHelper = function(iteration) {
    // run for 100 iterations, 
    if (iterationCount > 100)
        return;

    // do stuff...

    recurseHelper(iteration + 1);
} 
```

However, if you just want to invoke a function a certain number of times, why are you looking to use recursion in particular? You could just use a loop. Again in JavaScript:

```
for (var i = 0; i < 100; i++) {
    // do stuff...
} 
```

Compilers can have more fun with unwinding loops than with recursion constructs, depending on the complexity of your recursion algorithm.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T21:27:18.803

You can use an attribute, but why? Why not passing the value as parameter?

```
public class Empty {

    private int steps = 0;  

    public static void main (String args [])
    {
        Empty e = new Empty ();
        System.out.println (e.reverse ("This is a test"));
        System.out.println ("steps: " + e.steps);
    }

    public String reverse (String s) {
        ++steps;
        if (s.length () < 2) 
            return s;
        else return reverse (s.substring (1)) + s.charAt (0);
    }
} 
```

From the comments I get, that you use it as counter, to detect when to end the recursion. That doesn't look very useful. Don't you have a condition which can be derived from the parameters, like list.length () or such?

Of course, calling the method twice will increase the counter further. You might reset it, if it isn't used by two thread concurrently, and a wrapped method in an inner object might help to prevent calling it without resetting the counter first.

But that is much more boilerplate than passing the counter around.

A parameter is a much cleaner solution for counting the invocations.

If you want to prevent stackoverflows while debugging, a curios alternative is to call a randomizer, and return in 1 of 10 000 cases.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-12T20:28:22.873

最自然的做法是使用您在帖子中描述的辅助参数，特别是如果它用于确定何时停止递归。如果依赖一个成员变量，你可以有一个帮助方法，在调用递归方法之前重置计数器，并在你想调用递归函数时调用帮助方法。

**如果您更喜欢使用单一方法**，则必须执行以下操作：

创建一个名为的成员变量`insideMethod`，默认设置为 false。调用该方法时，它会检查此变量。如果它是假的，它是第一次调用，计数器应该被重置，否则计数器应该只是递增。之后，`insideMethod`设置为true。返回时，`insideMethod`应将其设置回 false，仅当是*此*调用将其设置为 true 时。

记得make`insideMethod`和索引变量ThreadLocal。

伪代码：

```
ThreadLocal<Boolean> insideMethod = false
ThreadLocal<Integer> index = 0

....

void recMethod(args) {
    boolean topCall = (insideMethod == false)
    insideMethod = true

    if (topCall)
        index = 0
    else
        index++

    // Body of the method...

    if (topCall)
        insideMethod = false
} 
```

# c++ - 将 c++ 中的 unicode 字符串写入 sqlite DB

> ID：10567103
> 
> 赞同：5
> 
> 时间：2012-05-12T20:20:06.870
> 
> 标签：c++, sqlite

我目前正在使用 sqlite 和 c++ 构建经理游戏。我找到了几乎涵盖了创建我的游戏所需的所有领域的教程，但一个小问题一直困扰着我多年。

当我在 C++ 中编写一个字符串（例如“Andreas Klöden”）并将其与 sqlite 语句一起用于在我的 sqlite DB 中插入数据时，带有变音符号 ö 的特殊字符会丢失，这适用于许多欧洲名称，如 Léfevre、Würth 等。

我已经搜索了一个答案，似乎 c++ 字符串在 ANSII 或类似的东西中。我应该以某种方式编写 unicode 字符串，以避免出现如下所示的问题：

[http://imageshack.dk//viewimage.php?file=/imagesfree/0Ej53884.png](http://imageshack.dk//viewimage.php?file=/imagesfree/0Ej53884.png)

有谁知道如何在 c++ 中编写 unicode 字符串，以便我可以从 sqlite DB 导出/导入正确的数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T20:32:28.347

SQLite “支持” UTF-8（引号在这里是因为基本上 UTF8 只使用 ASCII 字符，所以实际上没有什么可以“支持”）。所以最好的（也是向后兼容的）方法之一是使用 UTF-8 编码。SQLite 中的 wchar_t 支持也存在，但使用它的原因只有一个：如果您的代码已经依赖于 wchar_t。

如果“UTF-8”不是一个熟悉的主题，请阅读：http: [//www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

对 C API 的调用

```
sqlite_exec(db_conn, "insert somevalue into sometable values(\"utf encoded string\""), NULL, NULL, "error"); 
```

会做的工作。

如果您必须仅支持有限数量的代码页或使用 ICU 库获得全面支持，则可以手动完成实际转换。还有像[http://utfcpp.sourceforge.net/这样的库](http://utfcpp.sourceforge.net/)

CodeProject 还有很多 UTF-8 示例代码：

[http://www.codeproject.com/Articles/14637/UTF-8-With-C-in-a-Portable-Way](http://www.codeproject.com/Articles/14637/UTF-8-With-C-in-a-Portable-Way)

[http://www.codeproject.com/Articles/5281/UTF-8-Encoding-and-Decoding](http://www.codeproject.com/Articles/5281/UTF-8-Encoding-and-Decoding)

等等

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-21T17:12:06.497

CppSqlite3U 的开发目的是作为 sqlite3 的包装器，它不支持 UNICODE。[CppSqlite3U](http://naughter.com/sqlitewrappers.html)可以用作您的 UNICODE 调用的前端。

# c++ - 插入地图时抛出异常

> ID：10567104
> 
> 赞同：3
> 
> 时间：2012-05-12T20:20:12.223
> 
> 标签：c++, exception, map

当我尝试将一个对象插入我的地图时，它会引发以下异常：

Main.exe 中 0x77a015de 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000004。

“读取位置 0x00000004”让我认为这是某种空指针异常。但是，地图本身是静态地图，在 .cpp 文件中初始化。为什么在尝试插入时它没有位置？

这是课程。这是一个播放器类，用于管理将 ID 映射到播放器：

```
// Player.hpp
class Player {
  public:

    Player(){}; // I had to make this public, otherwise it wouldn't compile.
    Player(Player &p);
    Player & operator=(const Player &p);
    bool operator==(const Player &p);

    int getID() const;
    int getTeam() const;
    string getName() const;
    Vec3 getColor() const;

    static Player newPlayer(int team, string name, Vec3 color);

  private:
    Player(int id, int team, string name, Vec3 color);
    int id,
        team;
    string name;
    Vec3 color;

    static std::map<int, Player> players;
}; 
```

和 cpp 文件：

```
#include "Player.hpp"
std::map<int, Player> Player :: players;
int Player :: currentPlayer=-1;

// Constructor
Player :: Player(Player &p) : id(p.getID()),
                              team(p.getTeam()),
                              name(p.getName()),
                              color(p.getColor()){}

Player & Player :: operator=(const Player &p){
  if (this==&p){
    return *this;
  }

  id=p.getID();
  team=p.getTeam();
  name=p.getName();
  color=p.getColor();

  return *this;
}

bool Player :: operator==(const Player &p){
  return p.getID()==getID();
}

// Factory
Player Player :: newPlayer(int team,
                           string name,
                           Vec3 color){
  int playerID=0;
  if (players.size()>0){
    int playerID=(*players.rbegin()).first+1; // get an ID higher than the largest already there.
  }

  Player p(playerID, team, name, color);
  players.insert(std::make_pair(playerID, p)); // EXCEPTION THROWN HERE
  return players[playerID];
}

// Internal Constructor
Player :: Player(int id,
                 int team,
                 string name,
                 Vec3 color) : id(id),
                               team(team),
                               name(name),
                               color(color){} 
```

谁能帮我理解这里发生了什么？

编辑：调用此方法的代码在 main.hpp 中，在任何方法之外，在全局范围内：

```
Player player1=Player::newPlayer(1, "p1", Vec3(0.2, 0.2, 0.8)),
       player2=Player::newPlayer(2, "p2", Vec3(0.8, 0.2, 0.2)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T20:26:01.710

To address the need for a public default constructor, try changing this:

```
Player p(playerID, team, name, color);
players.insert(std::make_pair(playerID, p)); // EXCEPTION THROWN HERE
return players[playerID]; 
```

into this:

```
return players.insert(std::make_pair(playerID, Player(playerID, team, name, color))).first->second; 
```

(Explanation: The `[]`-operator requires that your mapped type be default-constructible. Using it means that you're ignoring the knowledge that the key that you're looking up exists in the map. The operator wants to create a new default-constructed element if the key that you give it doesn't exist.)

* * *

**Update:** You also have to address the static initialization problem. Here's one way how to do this:

```
// header:

class Player {
public:
    static std::map<int, Player> & players();
    // ...
}; 
```

```
// implementation:

std::map<int, Player> & Player::players()
{
    static std::map<int, Player> impl;
    return impl;
} 
```

Now just use `Player::players()` to get a reference to the map.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T20:26:58.007

Is the insertion also happening as part of the static initialisation of some other object?

If so you've hit a classic C++ gotcha: the order of static initialisation between different files is largely undefined, and rarely does what you want.

# java - jVisualVM - JIT 活动指标

> ID：10567106
> 
> 赞同：1
> 
> 时间：2012-05-12T20:20:24.193
> 
> 标签：java, monitoring, jvisualvm

我刚刚用 jVisualVM 测试了一些 J2EE 容器，但是我在正确解释分数方面遇到了麻烦。我看到 JIT 活动的值通常超过 100%（有时是 800%）。这是什么意思？我读过 JIT 活动是根据处理器数量计算的，但如果是这样，我只有 2 个处理器，并且最多。活动百分比应为 200%。

有什么解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:27:05.757

Maybe you did not *calibrate* jVisualVM right?

Did you have any load while performing calibration? Then your numbers will likely be off.

# css - 单列布局，两侧有液体图像

> ID：10567109
> 
> 赞同：0
> 
> 时间：2012-05-12T20:20:39.560
> 
> 标签：css, layout, liquid-layout

我想要做的是有一个 700px 的列，其左侧的图像宽度为 20%，右侧的图像宽度占据右侧页面的其余部分。所以基本上从左到右会有一个 20% 宽的图像，然后是一个包含网站内容的 700 像素宽的列，然后是右侧的一个图像，占据了页面的其余宽度。我一直在为如何做到这一点而苦苦挣扎，我觉得我把它弄得太复杂了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T20:29:24.993

```
<div id="leftImage" style="float:left;width:20%;background-repeat:no-repeat;background-image:url(URL TO LEFT IMAGE); height: HEIGHT OF LEFT IMAGE IN px;">&nbsp;</div>
<div id="content" style="width: 700px;float:left;">CONTENT</div>
<div id="rightImage" style="float:left;background-repeat:no-repeat;background-image:url(URL TO RIGHT IMAGE); height: HEIGHT OF RIGHT IMAGE IN px;">&nbsp;</div><br clear="all" /> 
```

尝试类似的东西。

# jquery - 如何在 jquery 中编写快速切换列表？

> ID：10567113
> 
> 赞同：2
> 
> 时间：2012-05-12T20:20:50.333
> 
> 标签：jquery, toggle

我想将切换属性添加到 mysite。当我单击隐藏/显示按钮时，它应该显示/隐藏 div。根据字母顺序，单击字母的用户将显示以该字母开头的内容。所以我的代码在这里：

```
<script>
$(document).ready(function() {
    $('#button_letter_A').click(function() {
        $('#portfolio_item_A').toggle();

    });
     $('#button_letter_B').click(function() {
        $('#portfolio_item_B').toggle();
    });
});
</script> 
```

而不是按顺序写所有字母；如何快速编写此代码。例如; 我可以在 javascript 中使用 for 循环吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T20:24:33.483

```
// target everything with IDs that start with 'button_letter'
$("[id^='button_letter']").click(function () {

    // split the letter out of the ID
    // of the clicked element and use it to target
    // the correct div
    $("#portfolio_item_" + this.id.split("_")[2]).toggle();
}); 
```

参考：

*   [http://api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)
*   [https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T20:34:34.967

如果您的命名一致，只需创建一个切换功能并传递要切换的字母。

```
<script>
$(document).ready(function() {

   $('#button_letter_'+ letter).click(function() {
        custom_accordion(letter);
    });
   }

function custom_accordion(letter){
           $('#portfolio_item_'+letter).toggle();
}

});
</script> 
```

通过传递你想要的字母来调用点击函数......

这个链接有关于 jquery [custom toggle的解释](http://sreevathsabv.blogspot.in/2012/03/using-multiple-accordion-in-jquery-with.html)

# ios - iOS 中的方案或目标

> ID：10567119
> 
> 赞同：4
> 
> 时间：2012-05-12T20:22:03.250
> 
> 标签：ios, xcode, target

我有一个项目，可以根据不同的环境而有所不同，所以项目是完全一样的，只是一些URL的变化。通常我有我的工作环境来访问我的虚拟 Web 服务，然后当需要开始使用客户端的 Web 服务时，我只想快速切换这些 URL。为了实现这一点，我最初的想法是根据每个 Web 服务端点（客户端可以有多个 URL：预生产、测试​​、生产）来拥有不同的 plist 文件。所以：

1.  这是我最好的选择吗？每个 Web 服务端点都有不同的 plist？（再次项目完全相同，只是端点不同）

2.  为每个不同的环境创建一个新目标有意义吗？或者我可以在同一目标的计划中做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T20:37:06.433

根据您需要更改多少参数，您可以使用宏进行更改，例如。

```
#define _DEBUG_MODE
  NSString endpoiunt = @"foo";
#elseif
  NSString endpoiunt = @"foo";
#endif 
```

然后，您可以轻松地为您声明宏的调试方案附加编译器标志，而不必担心必须使用不同的目标。

如果您更喜欢保留*.plist*文件，您可以轻松地使用相同的方法，但更改文件名而不是hardocidng端点。但是除非使用两个目标，否则您将在包中复制两个 plist（我想甚至可以在复制阶段有条件地包含文件，但不知道该怎么做）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T21:14:37.560

对于简单的情况，您可以采取以下方法：

**MONAppsWebServiceURL.h**

```
NSURL * MONAppsWebServiceURL(void); 
```

**MONAppsWebServiceURL.m**

```
#import "MONAppsWebServiceURL.h"

#define MON_APP_USE_DUMMY_SERVICE 1

NSURL * MONAppsWebServiceURL(void) {
#if MON_APP_USE_DUMMY_SERVICE
// perhaps you want warnings as errors for distro
#warning using dummy web service
  return the dummy url;
#else
  return the real url;
#endif
} 
```

当您进行更改时，这需要更改和重新编译一个文件。这种方法也可用于识别要加载的 plist（只要您在发货前将其删除）。

当然，对于更复杂的问题，还有更复杂的解决方案，但这可能就是您所需要的。如我所见，在这种情况下不需要任何计划或额外的目标。

# jquery - jquery - 使用 jquery ui 手风琴向导航链接构建添加活动类

> ID：10567120
> 
> 赞同：0
> 
> 时间：2012-05-12T20:22:11.723
> 
> 标签：jquery, accordion, jquery-ui-accordion

**更新：**

尝试对 url 使用正则表达式，它可以工作：

```
var url = window.location.pathname, 
urlRegExp = new RegExp(url.replace(/\/$/,'') + "$");

$("#accordion a").each(function()
{
    if(urlRegExp.test(this.href.replace(/\/$/,'')))
    {
        $(this).addClass("active-sidebar-link");
    }
}); 
```

我正在使用 jQuery UI Accordion Widget 为我的网站构建侧边栏导航菜单。 [http://jqueryui.com/demos/accordion/](http://jqueryui.com/demos/accordion/)

我有以下代码：

```
// create accordion
$( "#accordion" ).accordion(
{
    header: '> li, h3:not(> li > ul)',
    collapsible: true,
    autoHeight: false,
    navigation:true 
});

// Add active class to active sidebar links
$("#accordion a").each(function() 
{
    if (this.href == window.location || this.href == document.location.protocol + "//" + window.location.hostname + window.location.pathname)
    {
        $(this).addClass("active-sidebar-link");
    }
}); 
```

手风琴有效，“navigation: true”选项也有效（http://jqueryui.com/demos/accordion/#option-navigation），它会根据您访问的链接打开相应的手风琴“抽屉”。

但是，活动类并未添加到当前链接中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T20:39:50.737

我会对 href 值执行搜索功能。如果您有多个页面的链接，那么您可以进一步将代码包含在内`window.location.pathname`，但这是搜索域名的良好开端：

```
$("#accordion a").each(function() 
{
    if (this.href.search(window.location.hostname) != -1)
    {
        $(this).addClass("active-sidebar-link");
    }
});​ 
```

或者，正如我在上面的评论中所说，您可能想要使用正则表达式。

# twitter-bootstrap - 如何在 Bootstrap 2.0 中垂直对齐导航栏项目

> ID：10567122
> 
> 赞同：2
> 
> 时间：2012-05-12T20:22:31.087
> 
> 标签：twitter-bootstrap

在 Boostrap 2.0 的导航栏中，我很难将导航元素垂直居中。现在，所有元素都刷新到导航栏的顶部。我该如何解决？

我也很难将徽标和导航栏与页面边界对齐。如果您注意到，品牌和导航栏会浮动到浏览器页面的边缘。我该如何解决？

我希望导航栏/标题具有这种布局：

[http://www.fleetio.com/](http://www.fleetio.com/)

这是我的尝试，使用加号查看代码：http: [//jsfiddle.net/tYVcY/36/embedded/result/](http://jsfiddle.net/tYVcY/36/embedded/result/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:07:48.377

Fleetio 处理垂直对齐问题的方式是修改`.navbar .nav > li > a`选择器上的填充。

标准引导：

```
.navbar .nav > li > a {
  float: none;
  padding: 10px 15px 10px;
  color: #777;
  text-decoration: none;
  text-shadow: 0 1px 0 white;
} 
```

Fleetio（注意填充增加）：

```
.navbar .nav > li > a {
  float: none;
  padding: 20px 15px 20px;
  color: #555;
  text-decoration: none;
  text-shadow: 0 1px 0 white;
} 
```

要解决导航栏水平拉伸到浏览器窗口边缘的问题，请将导航栏包装在一个容器中（即，`<div class="container"></div>`）。

# file - Can I make a batch file unable to close itself until a timer runs out?

> ID：10567126
> 
> 赞同：0
> 
> 时间：2012-05-12T20:23:23.630
> 
> 标签：file, batch-file

It's okay if you didn't understand the title. I'll explain here:

I have a timer in a batch file. Is there any BASIC command that I can use so that the batch file cannot be closed (even by clicking the "X" in the corner) until the timer runs out?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T06:27:56.213

没有特定的命令或任何简单的方法可以做到这一点。您可以启动隐藏文件（不在底部或屏幕上的“快捷栏”上），但它仍会显示在任务管理器中。如果您希望它做不涉及用户输入的事情，那就是要走的路。

# c# - Global keyboard hook that doesn't disable user input outside of form

> ID：10567127
> 
> 赞同：1
> 
> 时间：2012-05-12T20:23:27.487
> 
> 标签：c#, hook

So i'm trying to find a global keyboard hook for C#. I found a class that worked to hook the keyboard, but it disabled the keyboard outside of the form. This is the current keyboard hook:

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Runtime.InteropServices;
using System.Windows.Forms;

namespace Project
{

    class globalKeyboardHook
    {

        public delegate int keyboardHookProc(int code, int wParam, ref keyboardHookStruct lParam);

        public struct keyboardHookStruct
        {
            public int vkCode;
            public int scanCode;
            public int flags;
            public int time;
            public int dwExtraInfo;
        }

        const int WH_KEYBOARD_LL = 13;
        const int WM_KEYDOWN = 0x100;
        const int WM_KEYUP = 0x101;
        const int WM_SYSKEYDOWN = 0x104;
        const int WM_SYSKEYUP = 0x105;

        public List<Keys> HookedKeys = new List<Keys>();

        IntPtr hhook = IntPtr.Zero;

        public keyboardHookProc SAFE_delegate_callback;
        public event KeyEventHandler KeyDown;

        public event KeyEventHandler KeyUp;

        public globalKeyboardHook()
        {
            hook();
        }

        ~globalKeyboardHook()
        {
            unhook();
        }

        public void hook()
        {
            IntPtr hInstance = LoadLibrary("User32");
            SAFE_delegate_callback = new keyboardHookProc(hookProc);
            hhook = SetWindowsHookEx(WH_KEYBOARD_LL, SAFE_delegate_callback, hInstance, 0);

        }

        public void unhook()
        {
            UnhookWindowsHookEx(hhook);
        }

        public int hookProc(int code, int wParam, ref keyboardHookStruct lParam)
        {

            try
            {
                if (code >= 0)
                {
                    Keys key = (Keys)lParam.vkCode;
                    if (HookedKeys.Contains(key))
                    {
                        KeyEventArgs kea = new KeyEventArgs(key);
                        if ((wParam == WM_KEYDOWN || wParam == WM_SYSKEYDOWN) && (KeyDown != null))
                        {
                            KeyDown(this, kea);
                        }
                        else if ((wParam == WM_KEYUP || wParam == WM_SYSKEYUP) && (KeyUp != null))
                        {
                            KeyUp(this, kea);
                        }
                        if (kea.Handled)
                            return 1;
                    }
                }

                return CallNextHookEx(hhook, code, wParam, ref lParam);
            }
            catch { return 0;  }
        }

        [DllImport("user32.dll")]
        static extern IntPtr SetWindowsHookEx(int idHook, keyboardHookProc callback, IntPtr hInstance, uint threadId);
        [DllImport("user32.dll")]
        static extern bool UnhookWindowsHookEx(IntPtr hInstance);
        [DllImport("user32.dll")]
        static extern int CallNextHookEx(IntPtr idHook, int nCode, int wParam, ref keyboardHookStruct lParam);
        [DllImport("kernel32.dll")]
        static extern IntPtr LoadLibrary(string lpFileName);

    }
} 
```

Would anyone know how to change the exisiting hook so that it still allows the user to type, or know of another example that does this.

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T20:35:04.307

在 Hans Passant 发表评论之后。我在这里查看了这段代码：

```
if (kea.Handled)
   return 1; 
```

并将其更改为

```
if (!kea.Handled)
  return 1; 
```

# java - Submit Form on Enter press - Textfield value is Null

> ID：10567128
> 
> 赞同：0
> 
> 时间：2012-05-12T20:23:29.100
> 
> 标签：java, ajax, events, form-submit, wicket-1.5

In my login page I am trying to bind enter key press event with password textfield. I have managed to fire the event listener. But the problem I am facing is the value of the textfield username is returning null, but the password field's value is not null. The code is given below:

```
public class LoginForm extends Form<Void> {
    private transient final ValueMap properties = new ValueMap();

    public LoginForm(final String formId) {
        super(formId);

        final TextField<String> username = new TextField<String>("username", new PropertyModel<String>(getProperties(), "username"));
        add(username);

        final TextField<String> password = new TextField<String>("password", new PropertyModel<String>(getProperties(), "password"));
        add(password);

        password.add(new AjaxFormComponentUpdatingBehavior("onkeypress") {

            @Override
            protected void onComponentTag(ComponentTag tag) {
                Component component = getComponent();
                if (component.isEnabled() && component.isEnableAllowed()) {
                    CharSequence handler = generateCallbackScript(new AppendingStringBuffer("wicketAjaxPost('").append(getCallbackUrl()).append("', wicketSerialize(Wicket.$('" + getComponent().getMarkupId() + "'))"));
                    String event = "if (event.keyCode == 13) {" + handler.toString() + "};";
                    tag.put("onkeypress", event);
                }
            }

            @Override
            protected void onUpdate(AjaxRequestTarget target) {                 
                System.out.println(getUsername());
                System.out.println(getPassword());
            }
        });
    }

    public ValueMap getProperties() {
        return properties;
    }

    private String getPassword() {
        return getProperties().getString("username");
    }

    private String getUsername() {
        return getProperties().getString("password");
    }
} 
```

The `system.out` is printing

```
null
password 
```

I also tried to use `username.getDefaultModelObject()` but that is also returns null.

Any information will be very helpful to me.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:49:33.857

您需要通过 Javascript 提交您的登录表单。这将触发通常的 Wicket 表单处理并将值存储在模型中。您应该能够通过以下方式提交表格：

```
document.getElementById('myform').submit(); 
```

但是，我还没有测试过。

# javascript - HTML5 音频播放器可视化

> ID：10567130
> 
> 赞同：2
> 
> 时间：2012-05-12T20:23:35.777
> 
> 标签：javascript, html

我正在开发一个 HTML5 音频播放器，我一直在制作音频可视化......我在谷歌上搜索，我只找到了 Firefox 或 chrome 支持的可视化。所以现在我在这里问：是否可以使用 HTML5 和 Javascript 为所有最新的浏览器创建音频可视化？如果答案是肯定的：如何？如果答案是否定的：那么您可以推荐什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T20:56:36.797

1.  不，您需要结合使用 Web 音频 API，以及用于渲染的 canvas 或 webgl。[正如您所发现的， Chrome、Firefox 和 Safari](http://caniuse.com/#feat=audio-api)仅部分支持网络音频 API 。
2.  闪光。它有一个非常强大的声音 API，并且在所有最新的桌面浏览器（以及旧的浏览器）中都受支持。

[这位似乎经常在 HTML5 音频上发帖的家伙](http://blog.nihilogic.dk/2010/04/html5-audio-visualizations.html)通过预处理他的音频数据并将其保存为 JavaScript，解决了对 Web 音频 API 支持不足的问题。根据您的要求，这可能是一种选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T09:46:22.083

不，到目前为止，似乎并非所有浏览器都可以。我推荐 dancer.js 以满足您的要求。[在http://jsantell.github.com/dancer.js/#](http://jsantell.github.com/dancer.js/#)查看演示

# java - What is the best way to check if a string from a text file equals what's in JTextField?

> ID：10567134
> 
> 赞同：0
> 
> 时间：2012-05-12T20:24:43.607
> 
> 标签：java, swing, io, awt

I have to write a program that has a log-in window.
I need to check if the username and the password all satisfy what is written in a text file.

the text file which has named as: "pass" contains the following : *Admin:icsPro8%*

In my validUserName method, I wrote these two lines under the try block to extract what is in the text file "pass" :

```
try{
   InputFile = new Scanner(new FileInputStream("pass.txt"));
   String name = InputFile.nextLine();
} 
```

But unfortunately, I got this error: "name has private access in java.awt.Component" why this happened ? and how to fix it ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:45:43.370

您已经在 try 块中初始化了变量名称，因此您无法在 try 块之外访问它。如果您想全局访问它，请尝试在 try 块之外声明它。

# node.js - 在 node.js 上的 express 应用程序的控制器中访问 app.set 设置

> ID：10567136
> 
> 赞同：4
> 
> 时间：2012-05-12T20:25:06.973
> 
> 标签：node.js, settings, express

在我的`app.js`我设置了以下设置

```
app.set('mailTemplatesDir', __dirname + '/mails'); 
```

现在我想读取`'mailTemplatesDir'`我的一个控制器中的值，如何访问那里的设置？我宁愿不做`app`一个全局变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T15:24:07.437

如果您已经`app`通过通常的调用创建了您的，`createServer()`那么在不通过该函数返回的对象的情况下，真的没有其他方法可以访问选项设置。Express 不缓存服务器对象，而只是返回对象`new`上的结果。

如果您使用为您生成的标准 express 样板创建了您的应用程序，您可能会创建`app`如下所示的行：

```
var app = module.exports = express.createServer(); 
```

这实际上并未创建`app`为全局变量，而是使其可用作模块导出。您可以`mailTemplatesDir`通过以下方式要求您的模块从另一个模块访问您的选项`app.js`：

```
var templateDir = require('./app').set('mailTemplatesDir'); 
```

# c# - 将项目插入列表 使用随机索引

> ID：10567137
> 
> 赞同：0
> 
> 时间：2012-05-12T20:25:07.847
> 
> 标签：c#, .net

我有这个代码：

```
List<string> list = new List<string>(30);

list.Insert(1, "string 1");
list.Insert(10, "string 10");
list.Insert(5, "string 5"); 
```

运行时在 sting 10 上崩溃，异常**索引必须在列表的范围内**

我无法理解的是我已经定义了一个包含 30 个项目的列表，那么为什么会崩溃，如果我不能以这种方式添加项目，定义 30 的意义何在？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T20:29:03.107

初始化时列表仍为空。参数 '30' 意味着它将仅具有 30 个项目的容量。

如果您坚持使用列表而不是数组，则必须先添加 30 个项目，然后才能将它们设置为适当的索引。

最简单的方法是：

```
List<string> list = new string[30].ToList();

list[1] = "string 1";
list[10] = "string 10";
list[5] = "string 5"; 
```

还要注意，当你在使用的时候`Insert`，它基本上会把`Add`item放到某个index，所以list中的item数量会增加。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T20:26:18.067

这一行：

```
List<string> list = new List<string>(30); 
```

将 初始化为 30 个项目`list`的*容量*。它不会创建 30 个项目。

此时列表为*空*。您需要先*添加*30 个项目，然后可以`Insert`随机添加，尽管您可以将这些项目按随机顺序排序，如[ivowiblo](https://stackoverflow.com/users/1070247/ivowiblo)[的答案](https://stackoverflow.com/a/10567180/1583)中所述。

请参阅[Yorye Nathan](https://stackoverflow.com/users/1282539/yorye-nathan)[的答案](https://stackoverflow.com/a/10567167/1583)，了解使用 30 项初始化列表的方法（使用 LINQ）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T20:29:17.090

看看[这里](http://msdn.microsoft.com/en-us/library/sey5k5z4.aspx)。如您所见，插入方法使用列表的*计数*变量而不是*容量*。这意味着您可以在不超过列表当前计数的位置插入元素，这是元素的有效数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T20:29:35.953

您为 30 个元素**保留**了内存，但实际上您的列表**在第一次 insert 之前**是空的，因此，在插入一个元素后，列表中没有位置 10。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T20:31:00.973

这可以解决问题：

```
List<string> list = new List<string>();

list.Add("string 1");
list.Add("string 10");
list.Add("string 5");
var randomOrder = list.OrderBy(x => Guid.NewGuid()); 
```

# php - Calling an ASP.Net web service using php

> ID：10567139
> 
> 赞同：0
> 
> 时间：2012-05-12T20:25:30.810
> 
> 标签：php, asp.net, service, web

I'm trying to consume an ASP.Net web service using a php client. The php method recieves one double parameter and returns a value based on it.

This is my client.php code:

```
$wsdl_url = "url";
$client = new SoapClient($wsdl_url);
$params = array('value'=>200);
$response  = $client->kilogramsToPounds($params);
echo "<pre>";
var_dump($response);
echo "</pre>";
echo "$response->kilogramsToPoundsResult"; 
```

When I run the code I get the following error:

```
Fatal error: Uncaught SoapFault exception: [Client] SOAP-ERROR: Encoding: object has no 'kilograms' property in /var/www/student/oce1bct/CourseWork/Scenario3/TestFolder/convertersTest.php:23 Stack trace: #0 /var/www/student/oce1bct/CourseWork/Scenario3/TestFolder/convertersTest.php(23): SoapClient->__call('kilogramsToPoun...', Array) #1 /var/www/student/oce1bct/CourseWork/Scenario3/TestFolder/convertersTest.php(23): SoapClient->kilogramsToPounds(Array) #2 {main} thrown in /var/www/student/oce1bct/CourseWork/Scenario3/TestFolder/convertersTest.php on line 23 
```

The excerpt from the web service to be consumed is also below

```
[WebMethod]

public double kilogramsToPounds(double kilograms)

{

double pounds = 0;

pounds = kilograms * 2.204;

return pounds;

} 
```

I am 90% certain that I am not passing the values to the web service call correctly but have been unable to rectify the problem. Any help would be appreciated. Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:41:20.897

而不是这个

```
$params = array('value'=>200); 
```

利用

```
$params = array('kilograms'=>200); 
```

# ffmpeg - YUV to RGB by Shader on iPhone

> ID：10567155
> 
> 赞同：0
> 
> 时间：2012-05-12T20:27:50.390
> 
> 标签：ffmpeg, shader, yuv

Currently I am developing a video player using FFMPEG. I'm trying to convert YUV420P to RGB by Shader to reduce performance hit and I could see it works fine. The problem is caused when I try to change image size.

Case 1\. YUV to RGB is perfect. but the image is not exactly fit to Texture Bounds. For example, if i play 640x360 video, right (640-512) part is cropped and bottom (512-360) is filled with green colored rectangle.

```
FRAME_X=512; //This is texture size
FRAME_Y=512;

    avpicture_fill((AVPicture *) f, [currentVideoBuffer.data mutableBytes],
               enc->pix_fmt,
               FRAME_X, FRAME_Y);

    av_picture_copy((AVPicture *) f, (AVPicture *) avFrame,
                enc->pix_fmt,
                enc->width, enc->height); 
```

....

```
int yuvWidth= FRAME_X ;
int  yuvHeight= FRAME_Y;
glBindTexture ( GL_TEXTURE_2D, textureIdY );
glTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE, 
yuvWidth, yuvHeight, 0, GL_LUMINANCE, GL_UNSIGNED_BYTE, y_channel);

glBindTexture ( GL_TEXTURE_2D, textureIdU );
glTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE,
yuvWidth/2, yuvHeight/2, 0, GL_LUMINANCE, GL_UNSIGNED_BYTE, u_channel);

glBindTexture ( GL_TEXTURE_2D, textureIdV );
glTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE, 
yuvWidth/2, yuvHeight/2, 0, GL_LUMINANCE, GL_UNSIGNED_BYTE, v_channel); 
```

Case 2\. If i set actual image size to texture size, then image is exactly fit to texture but the color of image is a little bit strange. It has too much green color.

Does anybody give me some clues for this?? Thanks in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T04:01:13.090

首先，您需要为非幂的两个纹理设置正确的包裹模式。

```
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
```

然后，尝试将过滤模式设置为 GL_LINEAR

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);  
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR); 
```

和着色器。

1.  顶点着色器

    ```
    attribute vec4 position;  
    attribute vec2 texcoord;  
    uniform mat4 modelViewProjectionMatrix;  
    varying vec2 v_texcoord;

    void main()  
    {  
      gl_Position = modelViewProjectionMatrix * position;  
      v_texcoord = texcoord.xy;  
    } 
    ```

2.  设置顶点

    ```
    vertices[0] = -1.0f;  // x0
    vertices[1] = -1.0f;  // y0
    vertices[2] =  1.0f;  // ..
    vertices[3] = -1.0f;
    vertices[4] = -1.0f;
    vertices[5] =  1.0f;
    vertices[6] =  1.0f;  // x3
    vertices[7] =  1.0f;  // y3 
    ```

3.  为 2d 图像（精灵）加载适当的 viewProj 矩阵，最好使用正射投影。

    ```
    GLfloat modelviewProj[16];  
    mat4f_LoadOrtho(-1.0f, 1.0f, -1.0f, 1.0f, -1.0f, 1.0f, modelviewProj);  
    glUniformMatrix4fv(_uniformMatrix, 1, GL_FALSE, modelviewProj); 
    ```

4.  接下来，确保使用正确的文本坐标，像这样

    ```
    GLfloat texCoords[] = {  
      0.0f, 1.0f,  
      1.0f, 1.0f,  
      0.0f, 0.0f,  
      1.0f, 0.0f,  
    }; 
    ```

5.  最后，像这样的片段着色器：

    ```
    varying highp vec2 v_texcoord;  
    uniform sampler2D s_texture_y;  
    uniform sampler2D s_texture_u;  
    uniform sampler2D s_texture_v;

    void main()  
    {  
      highp float y = texture2D(s_texture_y, v_texcoord).r;  
      highp float u = texture2D(s_texture_u, v_texcoord).r - 0.5;  
      highp float v = texture2D(s_texture_v, v_texcoord).r - 0.5;  
      highp float r = y +             1.402 * v;  
      highp float g = y - 0.344 * u - 0.714 * v;  
      highp float b = y + 1.772 * u;       
      gl_FragColor = vec4(r,g,b,1.0);  
    } 
    ```

您可以将我的代码视为在 iOS 上使用 FFmpeg 和 OpenGLES 的示例：[https](https://github.com/kolyvan/kxmovie) ://github.com/kolyvan/kxmovie 。

# r - for循环内的随机数

> ID：10567159
> 
> 赞同：0
> 
> 时间：2012-05-12T20:28:21.337
> 
> 标签：r, random, for-loop

这已经让我发疯了，现在我完全绝望了:(

这是矩阵`draw`（不要注意NA，稍后我需要这些列）：

```
 [,1] [,2] [,3] [,4] [,5]  
[1,]    1    0   NA   NA   NA  
[2,]    2   20   NA   NA   NA  
[3,]    2   30   NA   NA   NA  
[4,]    2   40   NA   NA   NA  
[5,]    1   50   NA   NA   NA  
[6,]    2   70   NA   NA   NA  
[7,]    2   80   NA   NA   NA  
[8,]    2   90   NA   NA   NA  
[9,]    1  100   NA   NA   NA
[10,]   2  120   NA   NA   NA
[11,]   2  130   NA   NA   NA
[12,]   2  140   NA   NA   NA 
```

因此，根据第 1 列，我需要从正态分布的第 3 列中写入数字。但在 6% 的情况下，它必须为 0。

这就是我想处理它的方式（现在它只是 when `draw[i,1]==2`）：

```
for (i in 1:nrow(draw))
{
    p <- runif(1, min=0, max=1)
    if (draw[i,2]==2 && p>0.06) 
    {   
        draw[i,3] <- rnorm(1, mean=17, sd=7.5)} else {draw[i,3]<-0}

    if (draw[i,1]==1) {draw[i,3] <- rnorm(1, mean=11, sd=3)}
    if (draw[i,1]==3) {draw[i,3] <- rnorm(1, mean=17, sd=15)}
    if (draw[i,3]<1 && draw[i,3]!=0) {draw[i,3] <- 1} else {draw[i,3] <- ceiling(draw[i,3])
}
} 
```

问题来了：1.我注意到p（我猜它必须是随机数）总是相同的2.所有draw[i,3]其中draw[1,2]==2都是0。这很奇怪，因为即使 p>0.06 也会发生：

```
 [,1] [,2] [,3] [,4] [,5]
 [1,]    1    0   19   NA   NA
 [2,]    2   20    0   NA   NA
 [3,]    2   30    0   NA   NA
 [4,]    2   40    0   NA   NA
 [5,]    1   50   11   NA   NA
 [6,]    2   70    0   NA   NA
 [7,]    2   80    0   NA   NA
 [8,]    2   90    0   NA   NA
 [9,]    1  100    7   NA   NA
[10,]    2  120    0   NA   NA
[11,]    2  130    0   NA   NA
[12,]    2  140    0   NA   NA 
```

为什么？！怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T20:44:42.557

唔。你说当`draw[i,1]==2`你想做某事时，但在你写的代码中`draw[i,2]==2`......这可能就是问题所在！

```
# This line might work better:
if (draw[i,1]==2 && p>0.06) 
```

......但无论如何它似乎相当混乱。也许这就是你的意思？- 除非我放在那里的任何错误:)

```
for (i in 1:nrow(draw)) {
  p <- runif(1, min=0, max=1)

  draw[i,3] <- if (p <= 0.06) 0
    else switch(draw[i,1], 
      rnorm(1, mean=11, sd=3),   # 1
      rnorm(1, mean=17, sd=7.5), # 2
      rnorm(1, mean=17, sd=15)   # 3
    )

  draw[i,3] <- if (draw[i,3]<1 && draw[i,3]!=0) 1 else ceiling(draw[i,3])
} 
```

# c# - Getting child component values in a custom web control

> ID：10567163
> 
> 赞同：-1
> 
> 时间：2012-05-12T20:28:46.187
> 
> 标签：c#, asp.net

I have a custom web control having two labels. On the display page I want to modify the text of one of the labels depending on a condition. How to achieve?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T20:33:53.250

答案取决于您如何定义控件。如果标签是公共的，您只需通过控件实例访问标签

```
if(condition)
    mycontrol.label.Text = "Some text"; 
```

如果它是私有的，您将需要控件中的公共方法来更改文本，例如

```
void SetLabelText(string text)
{
    this.label.Text = text;
} 
```

然后调用方法

```
if(condition)
    mycontrol.SetLabelText("Some text"); 
```

# macros - 如何使用准报价在 Nemerle 中获得 AST？

> ID：10567164
> 
> 赞同：2
> 
> 时间：2012-05-12T20:28:53.163
> 
> 标签：macros, metaprogramming, abstract-syntax-tree, quotations, nemerle

我尝试使用 Nemerle 的准引号在 Nemerle 中获取一个简单代码片段的 AST。

这是我试过的代码：

```
def ast() : void {
  System.Console.WriteLine(<["Test"]>)
} 
```

我在[IdeOne](http://ideone.com/On7Yq) (ncc 0.9.3) 上运行它，我得到了这个错误：

```
prog.nem:2:30:2:36: error: unbound name `Literal.String'
prog.nem:2:30:2:36: error: unbound name `PExpr.Literal' 
```

我该如何解决这些问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T02:50:05.220

您只需添加*Nemerle.Compiler.dll*作为对您项目的引用。此外，一些更复杂的准引号只能在宏中使用。

```
using Nemerle.Compiler;
using System.Console;

macro Test()
{
    def x = <[ while (true) WriteLine(4) ]>.ToString();
    <[ WriteLine($x) ]>
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T20:08:37.967

准引用旨在用于宏。他们需要编译器的上下文。创建一个宏库项目，并在其中使用准引用。

# python - Accessing COM object (LanmanServer) in Python

> ID：10567166
> 
> 赞同：0
> 
> 时间：2012-05-12T20:28:57.050
> 
> 标签：python, com

I need to determine the number of open files under Win32\. I'm porting some VBScript code and need to access "WinNT://./LanmanServer". I think I can do that with win32.com.client.Dispatch, but am not sure of the syntax.

Here's the VBScript code:

```
Set Resources = GetObject("WinNT://./LanmanServer").Resources
For Each Resource in Resources
  OpenFiles = OpenFiles + 1
Next 
```

Here is WMI access in Python, which I think is similar:

```
wmi_service = win32com.client.Dispatch("WbemScripting.SWbemLocator")
for item in wmi_service.ConnectServer(".", "root\cimv2").ExecQuery(query):
    value = getattr(item, name) 
```

How would I count the Resources in LanmanServer with Python (or count open files through WMI)? Thanks

# android - Android ListView 自定义布局

> ID：10567173
> 
> 赞同：1
> 
> 时间：2012-05-12T20:29:43.227
> 
> 标签：android, listview

我的 Activity 中有一个 ListView，对于每一行，我都使用带有 TextView 和两个按钮的自定义布局。当我单击这两个按钮中的任何一个时，我希望执行某个操作。在我的 ArrayAdapter 中，在 getView 方法中，我将 onClickListeners 设置为这两个按钮。

```
public View getView(int position, View convertView, ViewGroup parent) {

    View v = convertView;
    if (v == null) {
        v = li.inflate(R.layout.process_row, null);
    }

    final Button processCheck = (Button) v.findViewById(R.id.processCheck);
    processCheck.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            if (process.isChecked() == false) {
                process.setChecked(true);
                processCheck.setBackgroundColor(Color.BLUE);
            }
            else {
                process.setChecked(false);
                processCheck.setBackgroundColor(Color.RED);
            }

        }
    });

    return v;
} 
```

ArrayList 保存了 mz 自定义类进程的对象，代码中的进程就是这个类的一个实例。因此，现在当我单击 ListView 行之一中的此按钮时，我希望更改给定 Process 实例中的布尔变量并更改按钮的颜色。会发生这种情况，但不仅是这一排，还有 3-4 排。所以点击后，我有大约 5 个更改按钮而不是一个。你知道我在这里做错了什么吗？请注意，我不太了解 ListActivity 编码，大部分代码实际上是从示例文件中复制和编辑的。谢谢！

编辑：

问题可能只出在某处的布局上。当我单击按钮时，它们中的更多会改变颜色，但只有我单击的进程的布尔值才会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T21:06:26.027

问题就在这里

```
View v = convertView;
    if (v == null) {
        v = li.inflate(R.layout.process_row, null);
    } 
```

这是因为 View v 只为可见项目创建，然后被重用。所以只需删除 ifv==null) 这样你的代码就可以了

```
public View getView(int position, View convertView, ViewGroup parent) {

    View v = convertView;

        v = li.inflate(R.layout.process_row, null);

    final Button processCheck = (Button) v.findViewById(R.id.processCheck);
    processCheck.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            if (process.isChecked() == false) {
                process.setChecked(true);
                processCheck.setBackgroundColor(Color.BLUE);
            }
            else {
                process.setChecked(false);
                processCheck.setBackgroundColor(Color.RED);
            }

        }
    });

    return v;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T21:17:30.280

每次呈现列表时都会调用 getView。因此，您应该在 gerview 条件中添加设置颜色： public View getView(int position, View convertView, ViewGroup parent) {

```
View v = convertView;

    v = li.inflate(R.layout.process_row, null); 
```

//在下面添加这些行

if (process.isChecked() == false) {

```
 processCheck.setBackgroundColor(Color.BLUE);
    }
    else {

        processCheck.setBackgroundColor(Color.RED);
    }

final Button processCheck = (Button) v.findViewById(R.id.processCheck);
processCheck.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        if (process.isChecked() == false) {
            process.setChecked(true);
            processCheck.setBackgroundColor(Color.BLUE);
        }
        else {
            process.setChecked(false);
            processCheck.setBackgroundColor(Color.RED);
        }

    }
});

return v; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T21:25:01.010

*编辑：在帖子末尾找到一个“开箱即用”示例！*

因为您看到多行受到影响，我猜这与系统如何回收资源有关，并且可能对 的引用`Button`不明确。

我不确定我在哪里学习了这种做法（Android 教程或我们以前通过这些教程学习 android 的开发人员）。但是建议是使用嵌套类`ViewHolder`

```
private static class ViewHolder {

    public Button processCheck;
} 
```

将其放在适配器或您`getView()`声明的任何类中，然后对其进行修改：

```
public View getView(int position, View convertView, ViewGroup parent) {

    View v = convertView;
    $ViewHolder viewHolder; //wait for the magic!
    if (v == null) {
        v = li.inflate(R.layout.process_row, null);
        $viewHolder = new ViewHolder();
        $viewHolder.processCheck = (Button) v.findViewById(R.id.processCheck);
        $v.setTag(viewHolder);
        //ok we somewhat stuffed an object with the Button into our View... so what?
    }

    $viewHolder = (ViewHolder) v.getTag();
    //see explanation below

    $viewHolder.processCheck.setOnClickListener(new View.OnClickListener() {
    //set the onClickListener for this and only this button.
        @Override
        public void onClick(View v) {
            if (process.isChecked() == false) {
                process.setChecked(true);
                processCheck.setBackgroundColor(Color.BLUE);
            }
            else {
                process.setChecked(false);
                processCheck.setBackgroundColor(Color.RED);
            }

        }
    });

    return v;
} 
```

（我用$标记了更改。我认为如果我使用eclipse，他们应该很容易发现。否则查找+替换^^）

因此[getTag()](http://developer.android.com/reference/android/view/View.html#getTag%28%29)将返回一个与调用的视图关联的对象。Object 是如此令人难以置信的通用性，您可以将它调用到您创建的 ViewHolder 对象中。因此，您可以引用按钮并将其存储在对象中。
现在，每当您获得 ListView 时，您都可以检索对象并设置`OnclickListener`新的和新的。这样你就只有一个 Listener 被调用。

请注意，您不必`v.setTag();`再次调用来“保存”您的更改。

一个陷阱可能是如果你做了一些疯狂的事情，比如出于什么原因在同一个列表中膨胀不同的布局。您可能很想为`ViewHandlers`它们分配不同的值，例如：

```
if (v == null) {
    if( someCriteria) {
        v = li.inflate(R.layout.process_row, null);
        viewHolder = new ViewHolder(); 
    }
        v = li.inflate(R.layout.process_another_row, null);
        viewHolder = new AnotherViewHolder(); 
} 
```

然后`getView()`对一个或另一个 ViewHolder 的未经检查的调用可能会在运行时引发错误！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T12:28:57.703

这就是我解决它的方法：

在我的适配器中，我创建了类：

```
private static class ViewHolder {
    public Button       processCheck;
    public Process      process;
    public TextView     name;
} 
```

比我为我的按钮创建了一个自定义侦听器：

```
private class CustomListener implements View.OnClickListener {

    public ViewHolder   viewHolder;

    public CustomListener(ViewHolder holder) {
        this.viewHolder = holder;
    }

    @Override
    public void onClick( View v ) {
        if (viewHolder.process.isChecked()) {
            viewHolder.name.setText("not checked");
            viewHolder.process.setChecked(false);               
        }
        else {
            viewHolder.name.setText("checked");
            viewHolder.process.setChecked(true);                
        }           
    }
} 
```

还有我的 getView 函数：

```
public View getView( int position, View convertView, ViewGroup parent ) {
    ViewHolder viewHolder;

    if ( convertView == null ) {
        convertView = mInflater.inflate( R.layout.process_row, null );

        viewHolder = new ViewHolder();
        viewHolder.processCheck = (Button) convertView.findViewById(R.id.processCheck);
        viewHolder.name = (TextView) convertView.findViewById(R.id.processName);            
        convertView.setTag( viewHolder );
    }

    viewHolder = (ViewHolder) convertView.getTag();
    viewHolder.process = list.get(position);

    if (viewHolder.process.isChecked()) {
        viewHolder.name.setText("checked");         
    } 
    else {
        viewHolder.name.setText("not checked");         
    }       

    CustomListener listener = new CustomListener( viewHolder );
    viewHolder.processCheck.setOnClickListener(listener);

    return convertView;
} 
```

# python - 如何从 pkg_resources 中的 Distribution 对象获取作者姓名、项目描述等？

> ID：10567174
> 
> 赞同：7
> 
> 时间：2012-05-12T20:29:52.950
> 
> 标签：python, setuptools, distribute

pkg_resources api 让您获取表示目录内鸡蛋分布的分布对象。`dist.project_name`我可以使用和轻松获取项目名称和分发版本`dist.version`，但是我不知道如何获取通常在安装脚本中指定的其他元数据（如作者、描述等）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-02T23:17:27.013

我正在寻找如何做同样的事情。这就是我想出的。这可能不是最好的解决方案，但似乎有效。

```
# get the raw PKG-INFO data
from pkg_resources import get_distribution
pkgInfo = get_distribution('myapp').get_metadata('PKG-INFO')

# parse it using email.Parser
from email import message_from_string
msg = message_from_string(pkgInfo)
print(msg.items())

# optional: convert it to a MultiDict
from webob.multidict import MultiDict
metadata = MultiDict(msg)
print(metadata.get('Author'))
print(metadata.getall('Classifier')) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-09T14:09:23.623

这里同样的问题。我通过创建一个包含所有变量的文件来解决它，`package.py`否则`mymodule`这些变量将被硬编码到`setup.py`. 然后在`setup.py`：

```
pkg_info = get_package_info('mymodule')
setup(**pkg_info) 
```

但是`setup.py`，我不能直接`import mymodule.package as pkg_info`这样做，因为这会导致 setup.py 需要它定义的模块。`get_package_info(module_name)`因此需要自定义导入方法`setup.py`：

```
def get_package_info(module_name):
    '''
    Read info about package version, author etc
    from <module_name>/package.py

    Return:
        dict {'version': '1.2.3', 'author': 'John Doe', ...}
    '''
    here = os.path.dirname(os.path.abspath(__file__))
    code_globals = {}
    code_locals = {}
    with open(os.path.join(here, module_name, 'package.py')) as f:
        code = compile(f.read(), "package.py", 'exec')
        exec(code, code_globals, code_locals)
    return code_locals 
```

`mymodule/package.py`：_

```
# -*- coding: utf-8 -*-
name = 'mymodule'
version = '1.2.3'
description = 'My module for demonstration'
url = 'https://github.com/myorg/mymodule'
author = 'John Doe'
author_email = 'john.doe@example.com'

...

packages = ['mymodule']
install_requires = ['myotherpackage', 'somepackage']

... 
```

使用这种方法，我可以在可以访问模块的任何地方轻松访问包信息，例如：`from mymodule.package import version, author`. 此外，信息只需要存储在一个地方。

# validation - Could I validate Jersey parameters with a validator framework?

> ID：10567176
> 
> 赞同：0
> 
> 时间：2012-05-12T20:30:14.180
> 
> 标签：validation, rest, jersey

I'd like to validate jersey parameters with a validator framework. For example I'd like to check that a parameter is not null, or not empty.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:16:32.320

Yes, it is possible.

You can use any JSR-303 implementation (like Hibernate Validator).

If you use Hibernate to persist your entities, then its very easy. Just add Hibernate validator to your classpath, and Hibernate automatically takes care of it. This would validate entities on the Data Access level.

If you want to validate entites on the serialization level (I assume this is what you want from your question), you can do one of two things:

*   Write a JAX-RS MessageBodyReader and MessageBodyWriter that validates method parameters and returned entites. See [this blog post](http://codyaray.com/2013/01/automatic-model-validation-using-jersey-jackson-and-hibernate-validator) for some hints.
*   Explicitly and directly validate your entities in your JAX-RS methods.

Of course, any of these 3 solutions only take effect after your properly annotate your entities with Bean Validation Annotations.

# java - Java Trident 库和 Thread.sleep()

> ID：10567178
> 
> 赞同：1
> 
> 时间：2012-05-12T20:30:55.860
> 
> 标签：java, swing, animation

我正在使用带有 AI 的 Swing 用 Ja​​va 创建一个简单的棋盘游戏，该 AI 应该在用户轮到他们之后轮到它。我想在让 AI 轮到它之前让游戏“暂停”大约 3 秒钟，以便用户可以看到他们移动的结果。调用 Thread.sleep(3000) 也会暂停我使用 Trident 动画库创建的动画。三秒结束后，空间只是变成了它们应该是的颜色，根本没有动画。

如果有人可以提供任何建议，请提供。我知道我总是可以添加一个“继续”按钮，用户可以在 AI 轮到它之前按下该按钮，但我想避免这一步。

编辑：这是我的单人游戏面板。它扩展了 GamePanel，它只是一个抽象类，具有基于当前板更新 GUI 的方法。它还扩展了 JPanel。我想我只是有点不清楚在哪里/如何实现计时器来做我想做的事情，无论是在这个班级还是另一个班级。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T20:31:55.507

永远不要调用`Thread.sleep()`Swing 事件线程或 EDT，因为这会占用该线程，从而阻止 Swing 执行任何图形或与用户交互。请改用[摇摆计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)。例如，

```
 int delay = 3000;
  new Timer(delay , new ActionListener() {

     @Override
     public void actionPerformed(ActionEvent e) {
        // tell AI to do its thing
        ((Timer)e.getSource()).stop();
     }
  }).start(); 
```

有关 Swing 事件调度线程或 EDT 的更多信息，请阅读：[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T20:39:32.983

假设您无论如何都在单独的线程中运行 AI 代码（您不想在运行复杂的 AI 内容时锁定 UI，对吗？），您希望暂停发生在 AI 线程中，而不是 UI 线程中。在那里添加你的 Thread.sleep() 。

如果您当前没有为 AI 使用单独的线程，并且这听起来不像您预期​​的那么“简单”，请查看使用[Futures 和 Callables](http://www.vogella.com/articles/JavaConcurrency/article.html#futures)，这是一种执行后台操作和链接事件的好方法，当它们发生时完全的。

# java - Java麻烦中的工厂方法模式示例

> ID：10567182
> 
> 赞同：5
> 
> 时间：2012-05-12T20:31:50.227
> 
> 标签：java, design-patterns, factory

我正在尝试用 Java 创建一个非常简单的工厂方法设计模式示例。我真的不了解 Java，我一般是编程新手，但我需要想出一个用 Java 实现的基本 FactoryMethod 示例。以下是我想出的。我敢肯定有很多错误，我显然缺少一些构造函数，并且我对抽象类和接口感到困惑。您能否指出我的错误并纠正我的代码以及解释？提前感谢您的时间和帮助。

```
public abstract class Person 
{   
    public void createPerson(){ }
}

public class Male extends Person 
{   
    @Override
    public void createPerson() 
    {
        System.out.print("a man has been created");
    }
}

public class Female extends Person 
{   
    @Override
    public void createPerson() 
    {
        System.out.print("a woman has been created");
    }
}

public class PersonFactory
{
     public static Person makePerson(String x) // I have no Person constructor in
     {                                         // the actual abstract person class so 
         if(x=="male")                         // is this valid here?
         { 
             Male man=new Male();
             return man;
          }
          else
         {
             Female woman=new Female();
             return woman;
         }
     }
}

public class Test 
{
    public static void main(String[] args)
    {
       Person y= new Person(makePerson("male"));   // definitely doing smth wrong here
       Person z= new Person(makePerson("female")); // yup, here as well
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T20:48:28.063

简而言之，您的版本中有几个问题已在下面得到纠正：

1.  `createPerson`方法没用。
2.  您调用工厂方法的方式是错误的。
3.  您在工厂方法中使用`==`而不是。`.equals`

我已经增强了您的 Person 类，以添加一个由 Male 和 Female 类共享的成员字段，以演示如何使用共享一个公共抽象构造函数。

```
public abstract class Person {   
    protected final String name;
    public Person(String name) { 
        this.name = name;
    }
}

public class Male extends Person {
    public Male(String name) { 
        super(name);
    }
}

public class Female extends Person {
    public Female(String name) { 
        super(name);
    }
}

public class PersonFactory
{
     public static Person makePerson(String gender, String name) 
     {
         if(gender.equals("male"))                       
         { 
             Male man=new Male(name);
             return man;
         }
         else
         {
             Female woman=new Female(name);
             return woman;
         }
     }
}

public class Test 
{
    public static void main(String[] args)
    {
       Person y= PersonFactory.makePerson("male", "bob"));
       Person z= new PersonFactory.makePerson("female", "janet"));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T20:36:55.550

应该：

```
public class Test 
{
    public static void main(String[] args)
    {
       Person y= PersonFactory.makePerson("male");  
       Person z= PersonFactory.makePerson("female");
    }
} 
```

它的原因

```
PersonFactory.makePerson("male") 
```

是因为您有一个静态方法 makePerson（这意味着您不必“新建”一个类来调用该方法，因为它不是实例方法），即类中的静态变量可用于类的所有实例。静态方法称为 TheClassItIsDefinedIn.TheMethodSignature

此外：

```
public abstract class Person 
{   
    public void createPerson(){ }
} 
```

实际上应该是一个接口，因为您没有在派生类型之间共享的功能代码（这里没有以任何方式显示），这里是抽象和接口的外行解释：

接口：一份合同，声明“我有方法 blah 和 blah2，所以任何实现我的类都必须有一个具有该名称和签名的方法（并且它可以在其中包含它喜欢的任何代码，只要它与返回类型匹配等）”

抽象：抽象类可以像接口一样具有方法签名，但它通常也具有在所有派生类型中通用的具体实现

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T21:03:18.673

我建议您在开始应用设计模式之前掌握 Java 编程。设计模式通常需要 OO 原则，因此如果您缺乏良好的编程实践，这将没有任何意义。

尽管如此，您的工厂方法的定义在含义的上下文中看起来是正确的，但在可用性方面并不正确。工厂方法需要创建一个对象，因此返回对创建对象的引用。此外，创建的对象通常与实现工厂方法模式的类不同，因为设想创建的实例将由对象使用，在本例中为 Person。

所以这里有一个抽象的例子，说明你可能如何使用工厂模式。

```
 public abstract class Student {
  }

  public class PrimarySchoolStudent extends Student {
  }

  public class HighSchoolStudent extends Student {
  }

  public abstract class ClassRoom {

    private List<Student> students;

    void enrollStudent(String studentId) {
      Student student = newStudent();
      students.add(student);
    }

    abstract Student newStudent();
  }

  public class HighSchoolClassRoom extends ClassRoom {

    @Override
    Student newStudent() {
      return new HighSchoolStudent();
    }
  }

  public class PrimarySchoolClassRoom extends ClassRoom {

    @Override
    Student newStudent() {
      return new PrimarySchoolStudent();
    }
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-26T14:40:18.783

基于@maress'代码的完整示例：

```
import java.util.ArrayList;
import java.util.List;

abstract class Student {
    private int StudentID;

    public Student() {
    }

    public Student(int _studentId) {
        this.StudentID = _studentId;
    }

}

class PrimarySchoolStudent extends Student {

    public PrimarySchoolStudent() {
    }

    public PrimarySchoolStudent(int _studentId) {
        super(_studentId);
    }
}

class HighSchoolStudent extends Student {

    public HighSchoolStudent() {
    }

    public HighSchoolStudent(int _studentId) {
        super(_studentId);
    }
}

abstract class ClassRoom {
    private List<Student> students;

    public void enrollStudent(int studentId) {
        if (students == null)
        {
            students = new ArrayList<Student>();
        }
        Student student = newStudent(studentId);
        students.add(student);
    }

    abstract Student newStudent(int studentId);
}

class HighSchoolClassRoom extends ClassRoom {

    @Override
    Student newStudent(int studentId) {
        return new HighSchoolStudent(studentId);
    }
}

class PrimarySchoolClassRoom extends ClassRoom {

    @Override
    Student newStudent(int studentId) {
        return new PrimarySchoolStudent(studentId);
    }
}

public class RunCode {
    public static void main(String[] args) {

        ClassRoom cr_highSchool = new HighSchoolClassRoom();
        cr_highSchool.enrollStudent(1234);
        cr_highSchool.enrollStudent(5678);
        cr_highSchool.enrollStudent(1938);
        cr_highSchool.enrollStudent(7465);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-19T12:55:41.027

重构了上面的代码。

```
import java.util.HashMap;

class Person  {   
   String name;

   public Person(String name){
        this.name = name;
   }
   public void setName(String name){
        this.name = name;
   }
   public String getName(){
        return name; 
   }
}

class Male extends Person {   

    public Male(String name) {
        super(name);
        System.out.println("a man has been created with name:"+name);
    }
}

class Female extends Person{   

    public Female(String name) {
        super(name);
        System.out.print("a woman has been created with name:"+name);
    }
}

class PersonFactory {
     private static HashMap<String,Person> factory = new HashMap<String,Person>();
     static {
        factory.put("male", new Male ("Trump"));
        factory.put("female", new Female ("Theresa May"));

     }
     public static Person makePerson(String type) {                                        
         return factory.get(type);                     
     }
}

public class Test {
    public static void main(String[] args){
       Person y= PersonFactory.makePerson("male");  
       Person z= PersonFactory.makePerson("female");
    }
} 
```

关键说明：

1.  在静态块中创建对象 (`Male`和) 一次。`Female`

2.  不是每次都创建新对象。创造发生一次。每个`makePerson`调用都从工厂返回现有对象。

3.  删除的`createPerson`方法

看看相关的帖子@

[工厂模式。什么时候使用工厂方法？](https://stackoverflow.com/questions/69849/factory-pattern-when-to-use-factory-methods/35857241#35857241)

# regex - 为什么这个正则表达式不返回任何匹配项？

> ID：10567187
> 
> 赞同：3
> 
> 时间：2012-05-12T20:32:12.347
> 
> 标签：regex, case-insensitive, dart

我正在使用[dart 正则表达式](http://api.dartlang.org/dart_core/RegExp.html)并试图找到一个[匹配项](http://api.dartlang.org/dart_core/Match.html)。

飞镖代码：[http ://try.dartlang.org/s/SY1B](http://try.dartlang.org/s/SY1B)

```
 RegExp exp = const RegExp("/my/i");
  String str = "Parse my string"; 
  Iterable<Match> matches = exp.allMatches(str);
  for (Match m in matches) {
    String match = m.group(0);
    print(match);
  } 
```

我正在尝试执行不区分大小写的搜索以查找字符串的所有匹配项。它说没有匹配项。我确定我在某个地方搞砸了，因为我是正则表达式的新手。如何修改代码以找到匹配项？

对于上下文，我计划修改代码以搜索我认为可以使用以下代码实现的任何字符串。

```
RegExp exp = const RegExp("/${searchTerm}/i"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T20:57:58.900

/pattern/flags 语法在 JavaScript 中有效，但在 Dart 中无效，因为 Dart 没有正则表达式文字。相反，文档显示了这一点：

```
const RegExp(String pattern, [bool multiLine, bool ignoreCase]) 
```

所以你的构造函数应该是这样的：

```
RegExp exp = const RegExp("my", ignoreCase: true); 
```

# java - 关于我的服务应该如何交互的建议

> ID：10567188
> 
> 赞同：1
> 
> 时间：2012-05-12T20:32:16.297
> 
> 标签：java, spring, spring-mvc, soa

我有一个帐户注册页面，并且我有以下服务类：

1.  用户服务
2.  角色服务
3.  电子邮件服务

所以当用户注册时，我必须：

1.  在数据库中创建一个用户
2.  将用户添加到特定角色
3.  给用户发电子邮件

我使用的是spring MVC，所以这必须在注册方法中完成。

现在，我的问题是，我应该从 userService 的 register 方法中注入/使用其他服务吗？

```
userService.register(....)

public class UserServiceImpl ... {

   public void register(....) {

      save(user);
      roleService.associateTo(....);
      emailService.sendRegistrationEmail(...);
   }
} 
```

或者

这是否使事情过于耦合，我应该在控制器方法中分别进行这些调用，例如：

```
public ModelAndView register(..., HttpServletRequest request, ...) {

    ..

    userService.register(user);
    roleService.associateTo(...);
    emailService.sendRegistrationEmail(...);

} 
```

我有点倾向于第二种方法。假设我想以批量方式创建或注册用户，调用 register 会做很多我可能不想做的事情，因为我是以批量方式做的（这只是我想到的，也许是它边缘案例？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T20:54:52.037

我会在组合中添加第三种解决方案：

```
public class UserRegistrationService ... {

    public void register(....) {
        userService.save(user);
        roleService.associateTo(....);
        emailService.sendRegistrationEmail(...);
    }

    public void registerInBatch(...) {
        foreach(...) {
            userService.save(user);
            roleService.associateTo(....);
        }
    }
} 
```

在重用代码方面，在控制器中执行几个步骤是一个糟糕的主意。如果您想通过 REST 或任何其他接口公开相同的逻辑，您最终将尝试直接调用控制器或将所有步骤复制到另一个地方。C&P 开发是一件可怕的事情——下次你想在注册过程中添加一个步骤时，你需要在所有地方添加它。

最终，您将提出一个服务，将所有步骤包装在一个方法中，就像您的第一个解决方案或我上面建议的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T21:40:31.783

我要加第四个；创建一个用户注册事件并监听它。

我至少会从主线代码中完全删除发送的电子邮件，并将其作为队列中的消息处理，或者至少作为异步事件处理，以避免任何潜在的延迟问题。

（我也可能对用户做一些事情，这样您就可以在单个操作中创建一个具有角色的用户，只是为了方便，但这是一个不同的问题，无论哪种方式都有争议。）

# java - 在 JApplet 上添加 JPanel 并编写 HTML 页面来运行它

> ID：10567189
> 
> 赞同：0
> 
> 时间：2012-05-12T20:32:22.730
> 
> 标签：java, applet, japplet

我有一个 java 小程序，我想在我的 jpanel 上添加一个预先设计的 Jpanel 作为表单。我的 Jpanel 表单位于另一个名为 MyForm.java 的 java 文件中。我的 JavaApplet 类代码是：

```
public class JavaApplet extends JApplet{
    @Override
    public void init(){
        Container container = this.getContentPane();
        container.add(new MyForm());
    }
     } 
```

我运行此页面的 html 代码很简单：

```
<HTML>
<HEAD>
<TITLE>The Palindrome Page</TITLE>
</HEAD>
<BODY>
<P>My favorite meat-related palindrome is:
<BR>
<APPLET CODE="JavaApplet.class" WIDTH=600 HEIGHT=100>
A secret if your browser does not support Java!
</APPLET>
</BODY>
</HTML> 
```

现在我可以将两个 .class 文件（MyForm.clss 和 JavaApplet.cleass）放在 htmls 文件中吗？是否有必要将我的所有代码放在一个文件中？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:03:06.380

1.  添加`MyForm`到框架而不是小程序。（您可以在 main 方法中创建一个框架并将其添加到那里。）
2.  把这些类放在一个罐子里。
3.  为它制作一个（JNLP）启动文件。
4.  [使用Java Web Start](https://stackoverflow.com/tags/java-web-start/info)从链接启动 Jar 。

回答您的具体问题。

> 现在我可以将两个 .class 文件（MyForm.clss 和 JavaApplet.cleass）放在 htmls 文件中吗？

如果松散的类文件都在同一目录（和包）中，则应该找到它们。不过更安全的是，使用单个 Jar。

> 是否有必要将我的所有代码放在一个文件中？

Java源代码文件？不——绝对不是。上课？推荐1罐。

如果使用 Jar，则需要元素`archive`中的属性。`applet`

# webmatrix - 我如何使用 Webmatrix beta 2 刷新 oaythwebsecurity 从 oauth/openID 提供商（例如 facebook）请求额外的用户数据，例如电子邮件、个人资料图片？

> ID：10567193
> 
> 赞同：2
> 
> 时间：2012-05-12T20:32:50.827
> 
> 标签：webmatrix

我似乎无法避免使用 webmatrix beta 2 中引入的 oauthwebsecurity 在 facebook 和 gmail 中请求和检索额外数据（例如个人资料图片和电子邮件）的可能性。默认情况下，gmail 和 yahoo 会返回除 facebook 之外的电子邮件。它们都不会返回用户的图像。请问，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-27T13:56:02.913

首先，如果您使用的是 Visual Studio 2012，那么在构建网站时会内置参考架构来处理 Facebook OAuth。它广泛建议通过 Nuget 添加 Facebook C# SDK 以启用对 FacebookClient 的调用。

了解第一次调用 Facebook Oauth 以获取反馈至关重要，它只会返回以下变量：

*   id（可以是邮箱或手机）
*   名称（用户的全名）
*   链接（链接到他们在 Facebook 上的个人资料页面）
*   性别（男性或女性..这里的选择很少）
*   访问令牌

获得访问令牌后，您可以使用它来调用其他变量。要查看您可以使用 Facebook 客户端访问的内容，请查看[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/) 以获取各种变量的完整列表。（新手警告：我还没有弄清楚如何调用所有这些，但重要的部分很容易。）

Scott MitzFacken 提供了一篇关于在 MVC 网站中使用 OAuth 提供程序的优秀教程，他将带您完成每个步骤，除了最重要的一步：使用访问令牌取出 Extradata，然后将其放入您的数据库。按照他的教程进行操作，直到您将此代码添加到 ExternalLoginCallback 方法中：

```
 if (result.ExtraData.Keys.Contains("accesstoken"))
{
    Session["facebooktoken"] = result.ExtraData["accesstoken"];
} 
```

好的，您已经以正确的方法获得了访问令牌。现在从 Facebook 获取数据并进入您的应用程序。在检查用户是否已经存在之后，我修改了 ExternalLoginConfirmation 方法：

```
 // Check if user already exists
 if (user == null) {

     var client = new Facebook.FacebookClient(Session["facebooktoken"].ToString());
     dynamic response = client.Get("me", new {
         fields = "first_name, last_name, email"
     });
     model.FirstName = response["first_name"];
     model.LastName = response["last_name"];
     model.EmailAddy = response["email"];

     // Insert name into the profile table
     db.UserProfiles.Add(new UserProfile {
         UserName = model.UserName, FullName = model.FullName, Gender = model.Gender, FirstName = model.FirstName, LastName = model.LastName, EmailAddy = model.EmailAddy
     });
     db.SaveChanges(); 
```

1.  这假设您已将 Facebook C# SDK 应用于您的项目。
2.  Facebook 字段是在一组“”中请求的，用逗号分隔。
3.  在我的示例中，model.XXX 指的是用户配置文件字段。
4.  然后我将用户配置文件字段转换为 response["XXX"] 字符串。
5.  由于 Facebook Oauth 客户端，保存用户配置文件记录时，还会保存其他字段。

我不确定你是否还需要这个答案......希望不是。对于像我这样一整天都在努力解决这个问题的菜鸟，我希望这个答案能对这个问题有所了解

干杯，祝你好运！

# jquery - jquery解析字符串

> ID：10567194
> 
> 赞同：6
> 
> 时间：2012-05-12T20:32:51.120
> 
> 标签：jquery, string, parsing

我有一个带有 id 的对象，`"4x153x9x10x173"`我需要`"153"`使用 jquery 将整数从它解析成一个变量？

```
objects.last().attr('id') // id = 4x153x9x10x173 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-12T20:34:10.717

```
var desired = objects.last().attr('id').split('x')[1]; 
```

[jsFiddle 演示](http://jsfiddle.net/mRq9c/)

# sql-server-ce - 在 AutoCAD 2012x64 中加载的 .DLL 中的实体框架 + SQL Server CE 4.0

> ID：10567195
> 
> 赞同：1
> 
> 时间：2012-05-12T20:32:57.223
> 
> 标签：sql-server-ce, entity-framework-4.3, autocad

我有一个棘手的问题。我想在 AutoCAD 2012 中创建一个“netload”-ed 的 .dll，并且我想使用 EF + SQL Server CE 4.0 Private Installation 以便能够 XCopy 程序。

我不想在客户端机器上安装 SQL Server CE 4.0，所以我选择了私有安装。问题是它依赖于配置文件，这不是一个选项，因为我只想要 XCopy 程序！

我正在使用 nuget 包`EntityFramework.SqlCompact`。无论我尝试什么，我都会得到

> 找不到请求的 .net 框架数据提供程序

AutoCAD 内部异常，因为 AutoCAD 有自己的配置，几乎是空的。

有什么方法可以将应用程序配置为使用本地复制的 dll-s 而无需配置？有没有办法包含另一个配置？

我也可以发布示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T06:15:43.180

此错误是由实体框架引起的，而不是 SQL Compact，因为 EF 依赖于 DbProvider 配置。因此，如果您使用经典的 ADO.NET 代替数据访问，私有部署将起作用，否则您的 app.config 中必须有这个：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
<system.data>
 <DbProviderFactories>
  <remove invariant="System.Data.SqlServerCe.4.0" />
  <add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.1, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
 </DbProviderFactories>
 </system.data>
</configuration> 
```

# android - 这些是内存泄漏警告吗

> ID：10567196
> 
> 赞同：-1
> 
> 时间：2012-05-12T20:33:19.127
> 
> 标签：android, memory-management, memory-leaks

在我的日志猫中，我看到太多这样的警告；

> 05-11 23:21:44.225: D/dalvikvm(7578): GC_EXTERNAL_ALLOC 释放 11K, 47% 空闲 2881K/5379K, 外部 11655K/11801K, 暂停 39ms 05-11 23:21:44.300: D/dalvikvm(7578): GC_EXTERNAL_ALLOC 释放 2K，47% 空闲 2880K/5379K，外部 10083K/10303K，暂停 22ms 05-11 23:21:44.360：D/dalvikvm(7578)：GC_EXTERNAL_ALLOC 释放 1K，47% 空闲 2880K/53709K，03K，外部 1暂停 22 毫秒 05-11 23:21:44.415: D/dalvikvm(7578): GC_EXTERNAL_ALLOC 释放 <1K, 47% 空闲 2879K/5379K, 外部 10083K/10303K, 暂停 23 毫秒 05-11 23:21:44.480: D/dalvikvm( 7578): GC_EXTERNAL_ALLOC 释放 <1K, 47% 空闲 2880K/5379K, 外部 10009K/10262K, 暂停 23ms 05-11 23:21:44.555: D/dalvikvm(7578): GC_EXTERNAL_ALLOC 释放 1K, 47% 空闲 2879K/57 10681K/10938K，暂停 22ms

这些是关于内存泄漏的警告还是只是警告？

我在两个不同的设备上测试了我的应用程序。其中一个给出这些调试警告（Samsung Galaxy Note），另一个是（Samsung Galaxy Mini）没有。两个设备之间的这种差异是否正常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:39:10.327

这是有关 Dalvik 垃圾收集器消息的[答案。](https://stackoverflow.com/a/6933882/1376688)

> 我在两个不同的设备上测试了我的应用程序。其中一个给出这些调试警告（Samsung Galaxy Note），另一个是（Samsung Galaxy Mini）没有。两个设备之间的这种差异是否正常？

我认为这很正常，因为我使用的一些手机也提供了这些日志，而另一些则没有

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T20:42:40.447

“GC_EXTERNAL_ALLOC freed”只是意味着垃圾收集器已经释放了外部内存分配。这与内存泄漏无关:-)

# c++ - 如何使整数模板参数可作为模板类成员访问？

> ID：10567197
> 
> 赞同：1
> 
> 时间：2012-05-12T20:33:31.607
> 
> 标签：c++, templates

模板化类的一个常见模式是模板参数在类内部进行了类型定义，以便于访问：

```
#include <type_traits>
template<class T> struct Foo{
    typedef T type;
};
static_assert(std::is_same<Foo<int>::type,int>::value,""); 
```

我怎样才能对非类型模板参数做同样的事情？我只有以下想法，但一定有更优雅的东西吗？

```
template<int I> struct Bar{
   constexpr static int getI(){ return I; }
};
static_assert(Bar<5>::getI()==5,"error"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T20:38:26.237

我可能会使用`enum`，但它的实用性似乎有点限于我......

```
#include <iostream>
using namespace std;

template<int N> struct Foo
{
    enum {value_ = N};
};

int main(int argc, char* argv[])
{            
    Foo<42> foo;

    cout << foo.value_;

    return 0;
} 
```

编辑以包括这种事情在模板元编程中经常完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T20:38:34.943

您可以只使用静态 const 变量：

```
template<int I> struct Bar{
    static const int i = I;
};

static_assert(Bar<5>::i==5,"error"); 
```

# php - eval 和数组索引作为变量

> ID：10567199
> 
> 赞同：3
> 
> 时间：2012-05-12T20:33:43.827
> 
> 标签：php, eval

我之前已经提出了一个关于尝试使用数组索引作为变量名的主题，并[在这里](https://stackoverflow.com/questions/10466815/php-variable-variables-with-array-key)收到了一个让我感兴趣的答案。

建议使用 eval() 的答案之一，尽管由于其潜在的安全问题而没有推荐它。

```
$string = 'welcome["hello"]';
eval('$' . $string . " = 'thisworks';");

// This also works : eval("$$string = 'thisworks';");

// I could then print the array keys value like this
print( $welcome["hello"] ); // Prints 'thisworks' 
```

但是，此解决方案是最简单的，并且可能最适合我想要实现的目标。我实际上正在开发一个 Wordpress 管理面板，里面充满了用户可以设置的各种选项。每个选项都通过包含多维数组的变量设置，如下所示（仅更大）：

```
$options = array(
 array(
  'id' => 'option_id', // The name of the input field
  'type' => 'text', // Input type
  'value' => 'some value here' // Input value
 )
); 
```

当用户保存选项时，会触发一个函数，从所有不同的输入值中创建一个数组并将它们保存到数据库中。如下所示，虽然高度精简：

```
foreach ( $options as $o ) {
 if ( isset( $_POST[ $o[ 'id' ] ] ) ) {
  $settings[ $o[ 'id' ] ] = $_POST[ $o[ 'id' ] ];
 }
} 
```

多维选项变量中的一些选项将保存为数组的一部分，而不是字符串。这些选项的 ID 中包含方括号，例如 'option_id[value1]'。

这就是事情变得复杂的地方。目前，我必须通过一个检查方括号 [] 的函数发送 ID，然后告诉保存函数如何正确处理它（另存为数组或字符串）。

这就是为什么 eval 解决方案是理想的。它允许我创建一个已经是数组并包含索引的变量，而无需使用其他函数来剖析 ID。它严重减少了冗长的过程，或者我相信。

因此，从本质上讲，是否有一种更安全、类似的方法可以使用 eval 或使用替代功能。以上述方式使用 eval 有什么危险？可以在上面使用的上下文中执行恶意代码吗？在 $ 之前执行代码肯定会导致 PHP 错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T16:20:30.770

以这种方式使用 eval 对我来说似乎是一种 hack，而且不太可能是高性能的。为什么不使用可变变量来实现同样的事情呢？

```
$string = 'welcome';
$key = "hello";

${$string}[$key] = "this works better";
print( $welcome["hello"] ); // Prints 'this works better' 
```

# jquery - 克隆 -> 更改 ids -> 添加内容 -> 显示 -> 附加到父级

> ID：10567205
> 
> 赞同：6
> 
> 时间：2012-05-12T20:34:13.600
> 
> 标签：jquery, jquery-selectors

我有以下设置

```
<div class="article-content">
    <div class='editors' id="mine">
        <h2>My Text</h2>
        <textarea name="my_text" id="my_text" class="my_test"></textarea>
    </div>
    <div class='editors' id="termsy_master" style="display:none;">
        <h2>title</h2>
        <textarea name="" id="" class="sm">text</textarea>
        <textarea name="" id="" class="di">text</textarea>
    </div>
</div> 
```

我试图

*   克隆“termsy_master”
*   将 id 更改为“他的”
*   将 h2 标题更改为“新标题”
*   textarea sm id 到“sm_new_id”
*   textarea di id 到“di_new_id”
*   删除 display none 所以它会可见
*   并将其附加到文章内容

我已经完成了以下操作，但我不确定如何进行

```
$('.article-content').append($("#termsy_master").clone()); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-12T20:38:09.510

```
$tmc = $("#termsy_master").clone().attr('id', 'his').show();
$("h2", $tmc).text('new title');
$(".sm", $tmc).attr('id', 'sm_new_id');
$(".di", $tmc).attr('id', 'di_new_id');
$tmc.appendTo(".article-content"); 
```

当然，有很多方法可以做到，但这对我来说似乎或多或少是最简单的。不要想太多！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T20:41:17.640

这是一种可能的解决方案：

```
var block = $("#termsy_master"​).clone();
block.children("h2").text("new title");
block.children(".sm").attr("id", "sm_new_id");
block.children(".di").attr("id", "di_new_id");
block.attr("id", "his").show().appendTo(".article-content");​ 
```

**演示：http:** [//jsfiddle.net/8pxPC/](http://jsfiddle.net/8pxPC/)

* * *

或者，如果您更喜欢单行:)

```
$("#termsy_master").clone().attr("id", "his").show().appendTo(".article-content").children("h2").text("new title").siblings(".sm").attr("id", "sm_new_id").siblings(".di").attr("id", "di_new_id");​ 
```

# c - strdup() 导致 EXC_BAD_ACCESS

> ID：10567207
> 
> 赞同：1
> 
> 时间：2012-05-12T20:34:19.140
> 
> 标签：c, exc-bad-access

我有以下代码：

```
char *passwordFunc(const char *s)
{
    static char *pw = NULL;
    if (strlen(s)) {
        pw = s;
    } 
    return pw;
}

void keyboard_interactive(const char *name, int name_len, const char *instr, int instr_len, 
                          int num_prompts, const LIBSSH2_USERAUTH_KBDINT_PROMPT *prompts, LIBSSH2_USERAUTH_KBDINT_RESPONSE *res, 
                          void **abstract)
{
    char *text = passwordFunc("");
    res[0].text = strdup(text);
    res[0].length = strlen(text);
} 
```

根据调试器的说法，每次到达带有 的行时`strdup(text)`，它都会以 . 崩溃`EXC_BAD_ACCESS (code=2, address=0x0)`。

关于正在发生的事情以及如何解决它的任何建议？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T20:37:46.743

`passwordFunc("")`正在回归`NULL`。当你将它传递给 时`strdup`，你会得到一个分段错误，因为`strdup`需要一个有效的 C 字符串。错误消息引用地址`0x0`表明程序正在取消引用空指针。

现在，`passwordFunc("")`返回，`NULL`因为`strlen("")`是零，零评估为假。

`strdup`传递时返回空字符串的一些实现`NULL`。似乎这段代码是在假设这样的实现的情况下编写的。您的编译器库的行为不同。

您可能可以通过提供您自己的实现方式来最轻松地修复代码，该实现的`strdup`行为方式与此代码假定的方式相同。

```
char *strdup(const char *s) {
    size_t len = (s == NULL) ? 1 : strlen(s) + 1;
    char *result = malloc(len);  
    if (result != NULL) 
        if (len>1)
            memcpy(result, s, len);                       
        else
            *result = 0;
    return result;                           
} 
```

顺便说一句，我会评论`passwordFunc`应该真正返回`const char*`而不是`char*`同样`pw`应该返回`const char*`。您的编译器可能会就此向您发出警告，您应该注意这些警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T22:25:59.073

您的问题是，即使没有提示，您的回调函数有时也会被调用。所以你需要确定你是否必须在`res`对象上设置一些东西。

此代码段将解决您的问题：

```
void keyboard_interactive(const char *name, int name_len, const char *instr, int instr_len, 
                          int num_prompts, const LIBSSH2_USERAUTH_KBDINT_PROMPT *prompts, LIBSSH2_USERAUTH_KBDINT_RESPONSE *res, 
                          void **abstract)
{
    if( num_prompts > 0 ) {
        res[0].text = strdup(passwordFunc(""));
        res[0].length = strlen(passwordFunc(""));
    }
} 
```

# javascript - 使用 .animate .scrollTop() 滚动时，Opera 中的屏幕闪烁

> ID：10567209
> 
> 赞同：3
> 
> 时间：2012-05-12T20:34:31.613
> 
> 标签：javascript, jquery, opera, parallax

这是我正在处理的网站：http: [//kognitek.nazwa.pl/stockize/mak/MMprodukcja/parallaxProject/stromaTestowa/test.html](http://kognitek.nazwa.pl/stockize/mak/MMprodukcja/parallaxProject/stronaTestowa/test.html)

该站点在使用Opera**上的箭头键向下滚动时**闪烁。这是我用于滚动的代码：

```
//bottom of index.html
else if ($.browser.opera) {

    $(function() {
        $('html').on('keydown', function(event) {
            var keypressed = event.keyCode;
            var curScroll = $('html').scrollTop();
            var keys = scrollKeys.length;
            var moved = false;
            console.log("keypressed: " + keypressed);
            for (i = 0; i < keys; i++) {
                console.log("curScroll: " + curScroll)
                if (moved === false) {
                    if (keypressed === 40 && i != (keys - 1) && parseInt(scrollKeys[i]) <= curScroll && parseInt(scrollKeys[i + 1]) > curScroll) {
                        $('html').animate({
                            scrollTop : (parseInt(scrollKeys[i + 1]))
                        }, 'slow', function() {});
                        console.log('down');
                        moved = true;
                    } else if (keypressed === 38 && i != 0 && parseInt(scrollKeys[i]) >= curScroll && parseInt(scrollKeys[i - 1]) < curScroll) {
                        $('html').animate({
                            scrollTop : (parseInt(scrollKeys[i - 1]))
                        }, 'fast', function(){});
                        console.log('up');
                        moved = true;
                    }
                }
            }
        });
    });

} 
```

我已经花了一些时间试图解决这个问题，但仍然找不到这种行为的原因。网站在 Chrome、Firefox、IE8、IE9 中运行良好。问题仅出现在 Opera 中。我知道我在 index.html 的末尾得到了这部分代码 x3，一旦找到解决方案就会优化它。

知道这里有什么问题吗？

### 编辑：

我创建了这个小提琴： http: [//jsfiddle.net/mymlyn/Mr5vR/](http://jsfiddle.net/mymlyn/Mr5vR/)起初，脚本似乎很好，但是当你到达底部并尝试再次上升时，屏幕开始闪烁

### 编辑2：

我认为它可以防止默认问题，解决这个问题

### 编辑X：

我希望我没有编辑这个文件失败，所以它没有成为一个社区维基......无论如何我升级了代码并且它在这里可用：http: [//cssdeck.com/labs/swayiqbq/2](http://cssdeck.com/labs/swayiqbq/2) 它使用.browser 那将被删除jQuery 1.9。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:17:17.287

添加了一些代码以防止在 Opera 中出现默认行为：

```
 $(document).keydown(function(e){
    var code = e.keyCode ? e.keyCode : e.which;
    if(code === 40 || code === 38){
        e.preventDefault();
        e.stopPropagation();
        return false;
    }
}); 
```

效果可以看这里： http: [//kognitek.nazwa.pl/stockize/mak/MMprodukcja/parallaxProject/stromaTestowa/test_all.html](http://kognitek.nazwa.pl/stockize/mak/MMprodukcja/parallaxProject/stronaTestowa/test_all.html)

它可以向下/向上滚动，并且可以正常工作！

将对其进行优化并在几天内使其成为一个片段:)

# c - 什么是 Linux 本地定时器中断？

> ID：10567214
> 
> 赞同：13
> 
> 时间：2012-05-12T20:35:12.997
> 
> 标签：c, linux, linux-kernel, interrupt

一切尽在标题中。欢迎任何指向良好文档的链接。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-12T21:07:18.580

本地定时器中断是在 APIC 上实现的定时器，它只中断特定的 CPU，而不是引发任何 CPU 都可以处理的中断。Bovet & Cesati 的“Understanding the Linux Kernel”中对此进行了讨论。一个片段：

> 最近出现在 80x86 微处理器中的本地 APIC（参见第 4 章中的“中断和异常”部分）提供了另一种时间测量设备：CPU 本地定时器。
> 
> CPU本地定时器是一种类似于刚才描述的可编程间隔定时器的设备，可以发出一次性或周期性中断。但是，有一些区别：
> 
> *   APIC 的定时器计数器为 32 位长，而 PIT 的定时器计数器为 16 位长；因此，可以对本地定时器进行编程，使其以非常低的频率发出中断（计数器存储在发出中断之前必须经过的滴答数）。
> *   本地 APIC 定时器仅向其处理器发送中断，而 PIT 引发全局中断，可由系统中的任何 CPU 处理。
> *   APIC 的定时器基于总线时钟信号（或 APIC 总线信号，在旧机器中）。它可以被编程为每 1、2、4、8、16、32、64 或 128 个总线时钟信号减少定时器计数器。相反，使用自己的时钟信号的 PIT 可以以更灵活的方式进行编程。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-13T13:17:24.970

一个比迈克尔·伯尔（Michael Burr）更少技术性的答案：

有些事情需要随时完成，不管在哪个 CPU 上。
其他事情需要在每个 CPU 上随时完成。例如，检查我们是否需要切换到另一个进程。

第二种类型的本地定时器中断存在 - 每当它执行时，我们都会检查它们并执行所需的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T11:51:23.193

在 SMP 系统上，apic 计时器用于调度程序/重新调度线程。

在 UP 系统上，pit timer 用于调度程序/重新调度线程。

通常，PIT 不再在 SMP 系统中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T07:43:44.267

我觉得本地计时器用于处理 IPI 相关功能。我的猜测可能是错误的，不需要查看关于它们的配置和处理程序包含什么的代码。但我觉得系统计时器和 jiffies 与其中一个 GP 计时器相关联，因此在 SMP ARM 中，来自该计时器的中断通过 GIC 关联注册与单个内核相关联。将在本地计时器上获得更多机智。

# java - 如何监控在浏览器中运行的 Java Applet 的错误日志？

> ID：10567215
> 
> 赞同：2
> 
> 时间：2012-05-12T20:35:14.817
> 
> 标签：java, browser, error-handling, applet, console

我编写了一个 Java 小程序，它可以在小程序查看器中完美运行，但是当我尝试在浏览器中运行它时，它不会初始化，而是卡在死机的灰色屏幕上。

```
<html><body>
<applet code=main.Main.class
    width=800 height=600>
</applet></body></html> 
```

Java 文件 main/Main.java

```
package main;

//etc some imports here

public class Main extends JApplet implements Observer {

    @Override
    public void init() {
       // do some stuff here
    }

    //.......
} 
```

我还尝试在浏览器中运行一些简单的小程序并且它们可以工作，所以我不知道为什么这个不工作。

有什么方法可以从浏览器监控错误日志？所以我可能会看到这个小程序在哪里失败了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:51:28.807

**在appletviewer**中启动您的小程序，或从 shell 启动浏览器，以读取错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T10:00:08.483

在控制台运行浏览器会显示所有错误

显然浏览器中没有包含外部 jar

# java - 通过 Java 连接到 MySQL 时出现 SQL 语法错误

> ID：10567217
> 
> 赞同：1
> 
> 时间：2012-05-12T20:36:02.983
> 
> 标签：java, mysql, syntax, connection

我正在使用以下代码通过 Java 连接到数据库。

```
import java.sql.*;

public class Can {

//Database Credentials
private static String userName = "root";
private static String password = "root";
private static String databaseName = "books";

static Connection connection = null; // manages connection
static Statement statement = null; // query statement
static ResultSet resultSet = null; // manages results

static Can can;

public static void main(String[] args) {

    can = new Can();
    ResultSetMetaData metaData;
    int numberOfColumns;

    try {
        connection = DriverManager.getConnection("jdbc:mysql://localhost/"+databaseName, userName, password);
        statement = connection.createStatement();
        connection.setAutoCommit(false);

        //creating the tables
        statement.executeUpdate("CREATE TABLE Instructor" + "(instructorID INT, instructorName VARCHAR(30), PRIMARY KEY (instructorID))");
        statement.executeUpdate("CREATE TABLE Lecture" + "(lectureID INT, lectureName VARCHAR(30), time TIME, credit INT, instructorID INT, PRIMARY KEY (lectureID))");
        statement.executeUpdate("CREATE TABLE LectureStudent" + "(lectureID INT, studentID INT, PRIMARY KEY (lectureID, studentID))");
        statement.executeUpdate("CREATE TABLE Student" + "(studentID INT, studentName VARCHAR(30), CGPA FLOAT, PRIMARY KEY (studentID))");
        statement.executeUpdate("CREATE TABLE Assignment" + "(assignmentID INT, deadline INT(30), lectureID INT, PRIMARY KEY (assignmentID))");
        statement.executeUpdate("CREATE TABLE Results" + "(resultID INT, grade FLOAT, PRIMARY KEY (resultID)");

        //inserting info. into the tables
        statement.executeUpdate("INSERT INTO Instructor VALUES('1', 'instructorName1')");
        statement.executeUpdate("INSERT INTO Instructor VALUES('2', 'instructorName2')");

        statement.executeUpdate("INSERT INTO Lecture VALUES('1', 'lectureName1', '20:16:40', '3', '1')");
        statement.executeUpdate("INSERT INTO Lecture VALUES('2', 'lectureName2', '20:33:20', '4', '1')");
        statement.executeUpdate("INSERT INTO Lecture VALUES('3', 'lectureName3', '20:33:25', '4', '2')");

        statement.executeUpdate("INSERT INTO LectureStudent VALUES('1', '100')");
        statement.executeUpdate("INSERT INTO LectureStudent VALUES('2', '100')");
        statement.executeUpdate("INSERT INTO LectureStudent VALUES('3', '100')");

        statement.executeUpdate("INSERT INTO Student VALUES('100', 'studentName1', '2.4')");
        statement.executeUpdate("INSERT INTO Student VALUES('200', 'studentName2', '2.5')");
        statement.executeUpdate("INSERT INTO Student VALUES('300', 'studentName3', '2.6')");

        statement.executeUpdate("INSERT INTO Assignment VALUES('1000', '1969-12-31 10:40:00.0', '1')");

        statement.executeUpdate("INSERT INTO Results VALUES('1', '90.0')");

        //commit the transaction
        connection.commit();

        connection.setAutoCommit(true);

        resultSet = statement.executeQuery("SELECT assignmentID, deadline, lectureID FROM Assignment");
        metaData = resultSet.getMetaData();
        numberOfColumns = metaData.getColumnCount();
        System.out.println("assignment");
        can.displayTable(resultSet, numberOfColumns, metaData);

        resultSet = statement.executeQuery("SELECT instructorID, instructorName FROM Instructor");
        metaData = resultSet.getMetaData();
        numberOfColumns = metaData.getColumnCount();
        System.out.println("instructor");
        can.displayTable(resultSet, numberOfColumns, metaData);

        resultSet = statement.executeQuery("SELECT lectureID, lectureName, time, credit, instructorID FROM LectureStudent");
        metaData = resultSet.getMetaData();
        numberOfColumns = metaData.getColumnCount();
        System.out.println("lecture");
        can.displayTable(resultSet, numberOfColumns, metaData);

        resultSet = statement.executeQuery("SELECT lectureID, studentID FROM LectureStudent");
        metaData = resultSet.getMetaData();
        numberOfColumns = metaData.getColumnCount();
        System.out.println("lecture_student");
        can.displayTable(resultSet, numberOfColumns, metaData);

        resultSet = statement.executeQuery("SELECT resultID, grade FROM Result");
        metaData = resultSet.getMetaData();
        numberOfColumns = metaData.getColumnCount();
        System.out.println("result");
        can.displayTable(resultSet, numberOfColumns, metaData);

        resultSet = statement.executeQuery("SELECT studentID, studentName FROM Student");
        metaData = resultSet.getMetaData();
        numberOfColumns = metaData.getColumnCount();
        System.out.println("student");
        can.displayTable(resultSet, numberOfColumns, metaData);

    } catch (SQLException e) {
        e.printStackTrace();
    }
    finally {
        // close the connection!
        try {
            if (connection != null) {
                connection.close();
            }
        } catch (SQLException e) {}
    }

}//END main

public void displayTable(ResultSet resultSet, int numberOfColumns, ResultSetMetaData metaData) {

    try {
        for(int i=1; i<=numberOfColumns; i++)
            System.out.printf("%-8s\t", metaData.getColumnName(i));
        System.out.println();

        while( resultSet.next () ) {

            for( int i=1 ; i<=numberOfColumns ; i++)
                System.out.printf("%-8s\t", resultSet.getObject(i));
            System.out.println();

        }
    } catch (Exception e) { }

}//END displayTable

}//END Can 
```

在创建表格时它工作正常。但问题是我在运行程序时收到以下关于语法错误的奇怪错误。

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.Util.getInstance(Util.java:386)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1052)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2677)
at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1748)
at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1665)
at Can.main(Can.java:35) 
```

有任何想法吗？

谢谢，C@N。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T20:43:49.763

您在最后一个 Create 语句中缺少右括号：`... PRIMARY KEY (resultID)");`

它应该是：

```
 statement.executeUpdate("CREATE TABLE Results" + 
         "(resultID INT, grade FLOAT, PRIMARY KEY (resultID))");
                                                            ^
                                parenthesis added here -----| 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T20:40:51.780

为什么你把''放在你的 ID 字段中......它是一个 INT 类型的列。使您的插入查询像

```
statement.executeUpdate("INSERT INTO Instructor VALUES(1, 'instructorName1')"); 
```

您的最后一个创建语句缺少右括号`)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T20:41:43.460

看看错误消息所说的第 35 行？如果粘贴时这些行是正确的，那是最后一个 create Table 语句吗？那里的 SQL 有问题。

更新：正如@ypercube 对您的问题的评论中指出的那样：您在那里缺少一个右括号！

# c# - asp.net 在条件下显示文字

> ID：10567220
> 
> 赞同：1
> 
> 时间：2012-05-12T20:36:30.240
> 
> 标签：c#, asp.net

我的母版页和后面的代码中有一个文字，有时我用数据填充它，有时没有。文字位于 div 中，以便我可以在 javascript 中访问它的值。标记如下所示：

```
<div id="Literal1"><asp:literal .... ID="TheLiteral1" /></div> 
```

我该如何重写它，以便如果我不填充文字，我不会渲染包含文字的 div。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T20:38:56.767

只需完全删除`div`并在需要时用它填充`Literal`控件。

在标记中（见 no `div`）：

```
<asp:literal .... ID="TheLiteral1" /> 
```

在后面的代码中：

```
TheLiteral1.Text = "<div id=\"Literal1\">...</div>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T20:41:10.860

您可以创建自己的自定义控件 - 并根据条件以不同的方式呈现它

# haskell - 用于并行化非线程安全 C++ 库的 Haskell 框架

> ID：10567223
> 
> 赞同：6
> 
> 时间：2012-05-12T20:36:45.957
> 
> 标签：haskell, concurrency, distributed-computing, zeromq, gearman

我有一个闭源非线程安全 C++ 共享库，它提供一个函数 f :: ByteString -> ByteString。此函数的运行时间可能在一秒到几个小时之间。

我正在寻找一种将计算分配到多个核心/服务器 (SIMD) 的方法。

简而言之，我正在寻找一个提供功能的框架

```
 g :: Strategy b -> (a -> b) -> a -> b 
```

将只能按顺序调用的函数提升为行为类似于 Haskell 中任何其他纯函数的函数。

例如，我希望能够编写：

```
 parMap rwhnf f args -- will not work 
```

由于 f 通过 FFI 在非线程安全库中调用 C 函数，因此这将不起作用。因此，我可以将函数 f 替换为函数 g，该函数保存一个作业队列并将任务分派给 N 个单独的进程。这些进程可以在本地或分布式运行：

```
 parMap rwhnf g args -- should works 
```

我已经研究过的潜在框架是

1.  **MPI** : 客户端 (Haskell) <-- MPI --> Broker (C++) <-- MPI --> Worker (C++) <--> Lib (C++)

2.  **ZeroMQ** : Client (Haskell) <-- ZeroMQ --> Broker (C++) <-- ZeroMQ --> Worker (C++) <--> Lib (C++)

3.  **Cloud Haskell** : 客户端 (Haskell) <-- CloudHaskell --> Worker (Haskell) <-- FFI --> Lib (C++)

4.  **齿轮人**

5.  **Erlang** : Client (Haskell) <-- Erlang --> Broker (Erlang) <-- Erlang C Node --> Worker (C++)

每种方法都有优点和缺点。

1.  MPI 会产生很多安全问题，是一个相当重量级的解决方案。

2.  ZeroMQ 是一个不错的解决方案，但需要我自己编写代理/负载均衡器等（尤其是获得正确的可靠性并非易事）。

3.  CloudHaskell 看起来不是很成熟。

4.  Gearman 不在 Windows 上运行，也没有 Haskell 绑定。我知道 java-gearman-service，但它比 C 守护程序成熟得多，并且还有一些其他问题（例如，没有文档，如果一段时间内没有传入的任务流则关闭，等等）。

5.  与 1 类似，需要使用第三种语言。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:15:54.353

由于您使用的库不是线程安全的，因此您需要一个基于使用进程作为并行抽象的解决方案。您希望使用 Par monad 看到的示例使用基于 spark 或任务的并行模型，其中许多 spark 可以存在于同一个线程中。显然这不是你要找的。

不要害怕！

Haskell 中只有少数范例以这种方式工作，您在文章 Cloud Haskell 中提到了其中之一。虽然 Cloud Haskell 并不“成熟”，但它可以解决您的问题，但对于您的需求，它可能有点重量级。如果您真的只需要使用进程级并行抽象来利用许多本地内核，那么请查看 Eden 库：

[http://www.mathematik.uni-marburg.de/~eden/](http://www.mathematik.uni-marburg.de/~eden/)

使用 Eden，您可以完全表达自己的追求。这是一个非常简单的示例，类似于基于 Par Monad 的版本：

```
f $# args 
```

或者在有很多争论的情况下，您可能只是拉出 ye olde map：

```
map f $# args 
```

有关 $# 语法的更多信息以及有关 Eden 的教程，请参阅：

[http://www.mathematik.uni-marburg.de/~eden/paper/edenCEFP.pdf](http://www.mathematik.uni-marburg.de/~eden/paper/edenCEFP.pdf)

YMMV 作为 Haskell 中大多数更成熟的并行范例，假设您具有一定程度的线程安全性，或者使用可以以纯粹的方式进行并行工作。

祝你好运，黑客快乐！

# vba - 将 Microsoft Word 方程保存为图像的宏？

> ID：10567225
> 
> 赞同：3
> 
> 时间：2012-05-12T20:36:56.003
> 
> 标签：vba, ms-office, ms-word, office-2010

我正在使用 Word 2010，并且使用公式编辑器已经有一段时间了。

我想编写一个宏，将文档中的选定内容保存为图像。我想用它来提取我在文档中写的方程式，作为图片，然后将它们上传到一些免费图片网站上发布。

但是，如果我能够提取文档的大部分内容，而不仅仅是方程式（尽管现在提取方程式会让我满意），那将更加有用。

在 Excel 中，有一个内置选项可以将内容复制为图像，然后您可以将其粘贴到您想要的任何位置。但由于某种原因，Word 没有这种能力。

无论如何，我正在寻找一种方法来做到这一点，即使这会涉及一些外部非内置 vba 代码。但它应该与 vba 集成，这样我就可以处理这些图像，并用它们做其他事情（就像我说的，例如 - 将它们自动上传到某些图像站点）。

在发布这个问题之前我做了一些研究，我找不到任何有效的解决方案。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:15:20.957

基本上，您需要使用 VBA 选择项目，执行“复制”，然后使用剪贴板功能检索数据并将其保存到文件中。不幸的是，我不能发布完整的代码，因为它不属于我。

序列是：

*   打开剪贴板
*   GetClipboardData（返回值取决于剪贴板格式。）
    *   CF_ENHMETAFILE 它是 GDI MetaFile 对象的句柄。您可以使用 CopyMetaFile 将其保存到文件中。在这种情况下，您不必使用 GlobalLock。
    *   CF_TEXT 它是一个 HGLOBAL
    *   CF_DIB 它是一个包含 BITMAPINFO 的 HGLOBLA - 可以复制到文件中
*   CopyEnhMetafile*或*GlobalSize、GlobalLock、CopyMemory、GlobalUnlock。
*   关闭剪贴板

    Private Declare Function Win32GetClipboardData Lib "Kernel32" Alias "GetClipboardData" (ByVal lClipboardFormat As Long) As Long

在它返回 HGLOBAL 的地方，您可以使用 GlobalSize、GlobalLock、CopyMemory 将其复制到 BSTR 或`Byte()`对象，然后使用 ADODB.Stream 将数据保存到文件中。，然后和 GlobalUnlock 进行清理。我认为它属于剪贴板，所以你不应该使用 GlobalFree。

看来我知道很多工作！但是一旦完成，您将拥有一个像这样的简单函数：

```
Sub SaveClipboardData(ByVal lFormat, ByVal sFileName) 
```

你可以说：

*   选择对象
*   复制
*   SaveClipboardData CF_ENHMETAFILE, "path\to\file.emf"

达达！

您将能够非常轻松地保存为 BMP (CF_DIB) 或 EMF，ImageMagick 可以将它们转换为您想要的任何其他内容。我建议使用 EMF，因为它是一种矢量格式，并转换为 PNG 以获得最佳分辨率。

我已经编写了至少两次代码来执行此操作 - 这并不难，但您必须正确获取函数签名。请参阅此处以获得一些帮助：

*   [http://msdn.microsoft.com/en-us/library/bb687915.aspx](http://msdn.microsoft.com/en-us/library/bb687915.aspx)

# c++ - 在 snprintf 中调用 strlen 期间调用 backtrace_symbols_fd() 有时会挂起

> ID：10567227
> 
> 赞同：1
> 
> 时间：2012-05-12T20:37:16.253
> 
> 标签：c++, segmentation-fault, stack-trace, strlen, backtrace

我正在尝试使用信号处理程序捕获故障，然后打印堆栈跟踪信息以添加到日志文件（或控制台）中以获取崩溃报告并在非开发机器上调试我的应用程序。我的问题是有时我没有得到完整的堆栈帧回溯。在许多情况下，它似乎挂起并且没有完成或退出。只有有时它会成功退出。

这是我的代码：

```
#include <signal.h>
#include <stdlib.h>
#include <stdio.h>
#include <execinfo.h>

typedef struct { char name[10]; int id; char description[40]; } signal_def;

signal_def signal_data[] =
{
    { "SIGHUP", SIGHUP, "Hangup (POSIX)" },
    { "SIGINT", SIGINT, "Interrupt (ANSI)" },
    { "SIGQUIT", SIGQUIT, "Quit (POSIX)" },
    { "SIGILL", SIGILL, "Illegal instruction (ANSI)" },
    { "SIGTRAP", SIGTRAP, "Trace trap (POSIX)" },
    { "SIGABRT", SIGABRT, "Abort (ANSI)" },
    { "SIGIOT", SIGIOT, "IOT trap (4.2 BSD)" },
    { "SIGBUS", SIGBUS, "BUS error (4.2 BSD)" },
    { "SIGFPE", SIGFPE, "Floating-point exception (ANSI)" },
    { "SIGKILL", SIGKILL, "Kill, unblockable (POSIX)" },
    { "SIGUSR1", SIGUSR1, "User-defined signal 1 (POSIX)" },
    { "SIGSEGV", SIGSEGV, "Segmentation violation (ANSI)" },
    { "SIGUSR2", SIGUSR2, "User-defined signal 2 (POSIX)" },
    { "SIGPIPE", SIGPIPE, "Broken pipe (POSIX)" },
    { "SIGALRM", SIGALRM, "Alarm clock (POSIX)" },
    { "SIGTERM", SIGTERM, "Termination (ANSI)" },
    //{ "SIGSTKFLT", SIGSTKFLT, "Stack fault" },
    { "SIGCHLD", SIGCHLD, "Child status has changed (POSIX)" },
    //{ "SIGCLD", SIGCLD, "Same as SIGCHLD (System V)" },
    { "SIGCONT", SIGCONT, "Continue (POSIX)" },
    { "SIGSTOP", SIGSTOP, "Stop, unblockable (POSIX)" },
    { "SIGTSTP", SIGTSTP, "Keyboard stop (POSIX)" },
    { "SIGTTIN", SIGTTIN, "Background read from tty (POSIX)" },
    { "SIGTTOU", SIGTTOU, "Background write to tty (POSIX)" },
    { "SIGURG", SIGURG, "Urgent condition on socket (4.2 BSD)" },
    { "SIGXCPU", SIGXCPU, "CPU limit exceeded (4.2 BSD)" },
    { "SIGXFSZ", SIGXFSZ, "File size limit exceeded (4.2 BSD)" },
    { "SIGVTALRM", SIGVTALRM, "Virtual alarm clock (4.2 BSD)" },
    { "SIGPROF", SIGPROF, "Profiling alarm clock (4.2 BSD)" },
    { "SIGWINCH", SIGWINCH, "Window size change (4.3 BSD, Sun)" },
    { "SIGIO", SIGIO, "I/O now possible (4.2 BSD)" },
    //{ "SIGPOLL", SIGPOLL, "Pollable event occurred (System V)" },
    //{ "SIGPWR", SIGPWR, "Power failure restart (System V)" },
    { "SIGSYS", SIGSYS, "Bad system call" },
};

void bt_sighandler(int sig, siginfo_t *info, void *secret) {
   signal_def *sigd = NULL;
       for (int i = 0; i < sizeof(signal_data) / sizeof(signal_def); ++i) {
          if (sig == signal_data[i].id) {
             sigd = &signal_data[i];
             break;
          }
       }
   //ucontext_t* uc = (ucontext_t*) secret;
   //void *pnt = (void*) uc->uc_mcontext.gregs[REG_RIP] ;

   void *trace[16];
   int trace_size = backtrace(trace, 16);
   /* overwrite sigaction with caller's address */
   //trace[1] = pnt;

   if (sigd) {
       fprintf(stderr, "SigHandler(0x%02X)[%d]:%s[%s]", sig, trace_size,
          sigd->name, sigd->description);
       } else {
       fprintf(stderr, "SigHandler(0x%02X)[%d]", sig, trace_size);
       }

   backtrace_symbols_fd(trace, trace_size, fileno(stderr));

   exit(1);
}

#endif

int main(int argc, char* argv[]) {
  struct sigaction sa;

  sa.sa_sigaction = bt_sighandler;
  sigemptyset(&sa.sa_mask);
  sa.sa_flags = 0;

  sigaction(SIGINT, &sa, NULL);
  sigaction(SIGSEGV, &sa, NULL);
  sigaction(SIGBUS, &sa, NULL);
  sigaction(SIGILL, &sa, NULL);
  sigaction(SIGFPE, &sa, NULL);
  sigaction(SIGUSR1, &sa, NULL);
  sigaction(SIGUSR2, &sa, NULL);

  signal(SIGPIPE, SIG_IGN);

  //Produce a fault

  return 0;
} 
```

您会在我的示例代码中注意到，负责用调用者地址覆盖 sigaction 的部分已被注释掉。这是因为我不确定如何让它为 Mac 编译。

这是一个示例控制台输出： [控制台输出 http://www.minesclubtennis.com/images/stackoverflow/fatalconsoleoutputhang.png](http://www.minesclubtennis.com/images/stackoverflow/fatalconsoleoutputhang.png)

您会注意到它只打印了前 3 帧，然后挂起而不退出，即使找到并应该打印 9 帧。

所以我从 Activity Monitor 应用程序中做了一个“示例过程”，发现执行 backtrace_symbols_fd 函数的线程卡在了 strlen 上。截图： [示例过程输出 http://www.minesclubtennis.com/images/stackoverflow/sampleprocessoutputhang.png](http://www.minesclubtennis.com/images/stackoverflow/sampleprocessoutputhang.png)

为什么挂了？这是我自己代码中的错误还是 Apple[回溯](http://www.opensource.apple.com/source/Libc/Libc-498.1.1/gen/backtrace.c)中的错误？[有人告诉我，信号处理程序可以做的事情有限，但我在sigaction 手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/sigaction.2.html)上看不到任何表明我做错了什么的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T04:23:56.697

您需要更仔细地阅读 sigaction 手册页！信号安全函数列表中未列出的任何内容都在信号处理程序中被禁止。backtrace_symbols_fd() 不在该列表中。您不能在信号处理程序中使用它。

如果您想了解具体原因，请访问 Apple 的开源站点并下载[Libc](http://www.opensource.apple.com/tarballs/Libc/Libc-763.13.tar.gz)代码。您的捕获说明了问题所在。如果您查看“stdio/vprintf-fbsd.c”，您会看到 __vfprintf() 有以下注释：

```
/*
 * Non-MT-safe version
 */ 
```

很多 printf 风格的函数都在这里结束（snprintf 就是我们到达这里的方式）。如果您的应用程序在 printf 样式函数中崩溃并且信号处理程序尝试重新输入，那么您看到的意外行为是......预期的。

或者，即使您的应用程序没有在 printf 样式函数中崩溃，但其他线程在崩溃时恰好在 printf 样式函数中，您也可以看到这种行为。

# android - 关于 Android 查询库

> ID：10567229
> 
> 赞同：1
> 
> 时间：2012-05-12T20:37:26.947
> 
> 标签：android

首先感谢您的工作，我总是在这里找到答案

我的名字是 Miguel，我今年 17 岁，我正在学习编程 android .. 和英语 :) 

这个问题是关于 android library Query (Aquery) [http://code.google.com/p/android-query/](http://code.google.com/p/android-query/)

我有两天时间阅读图书馆的文档、讨论组和示例。 

我主要对加载图片感兴趣，但我的问题是，经过两天的阅读，我什至没有设法运行这个简单的例子。 

...aq.id (R.id.image1)。图像（“http://www.vikispot.com/z/images/vikispot/android-w.png”）； 

我明白它在哪里说“aq”是对象 AQuery 并理解概念，但不能让它工作。我不确定与我的布局的 ImageView 和其他内容相关的位置。 

我的要求是这样，我确定我是否有完整的示例（活动和 xml），因为在 imageview 中加载一个简单的 url 图像可以理解我做错了，所以我可以继续所有其他示例。 

感谢您的帮助，对给您带来的不便深表歉意。 

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:29:15.123

你把`<uses-permission android:name="android.permission.INTERNET" />`清单文件放进去了吗？您必须将其放在`<application>`标签之外才能在您的应用程序中使用互联网

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T19:41:57.600

首先在一切之前添加活动，

```
private AQuery aq; 
```

其次在 onCreate 方法或其他东西中添加它。

```
aq = new AQuery(getApplicationContext); 
```

同样在清单中，您需要

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

# iphone - UILabel 中的 unicode 私有区域

> ID：10567233
> 
> 赞同：0
> 
> 时间：2012-05-12T20:37:50.067
> 
> 标签：iphone, objective-c, ios, unicode, uilabel

我试图在我的 UILabel 中将 \f010 设置为 unicode，但它不起作用。这种格式是 Unicode Private Use Area。我该怎么做呢？这是我的设置方式：

```
 [homeFeedButton setTitle:@"\f010" forState:UIControlStateNormal]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T22:38:59.297

尝试`NSString *str=[NSString stringWithFormat:@"%C",unicodestring]; // unicodestring vontains your unicode string`

然后 setv 作为标题

# c++ - 将重载+成员函数的结果发送到重载<<会导致编译错误

> ID：10567234
> 
> 赞同：1
> 
> 时间：2012-05-12T20:38:00.933
> 
> 标签：c++

我正在创建一个类来处理非常大的数字，以便在[Project Euler](https://projecteuler.net)挑战中使用。我已经重载了 << 和 + 以使用该类。以下编译并正常工作：

```
BigNum a(400000000);
BigNum b(400000000);
BigNum c;

c = a + b;

cout << c; 
```

以下会产生编译错误：

```
BigNum a(400000000);
BigNum b(400000000);

cout << (a + b); 
```

错误是：error: no match for 'operator<<' in 'std::cout << BigNum::operator+(const BigNum&) const(((const BigNum&)((const BigNum*)(& b)))) '

作为参考，这里是类定义和实现：

```
/* BigNum.h */

#include <iostream>
#include <vector>

class BigNum {
public: 
BigNum();
BigNum(const BigNum &src);
BigNum(int num);
void print(std::ostream *os);

public:
BigNum &operator=(const BigNum &src);
BigNum &operator+=(const BigNum &src);
const BigNum operator+(const BigNum &src) const;

private:
bool negative;
std::vector<int> digits;
};

std::ostream &operator<<(std::ostream &os, BigNum &bNum);

/* BigNum.cpp */

#include "BigNum.h"

BigNum::BigNum() {
digits.push_back(0);
}

BigNum::BigNum(const BigNum &src) {
digits = src.digits;
}

BigNum::BigNum(int num) {
if(num == 0) {
    digits.push_back(0);
}
else {
    while(num != 0) {
        digits.push_back(num % 10);
        num /= 10;
    }
}
}

void BigNum::print(std::ostream *os) {
int i;

for(i = digits.size() - 1; i >= 0; i--) {
    *os << digits[i];
}
}

std::ostream &operator<<(std::ostream &os, BigNum &bNum) {
bNum.print(&os);
return os;
}

BigNum & BigNum::operator=(const BigNum &src) {
if(this == &src) return *this;

digits = src.digits;

return *this;
}

BigNum & BigNum::operator+=(const BigNum &src) {
int carry, i, k;

carry = 0;

if(digits.size() < src.digits.size()) {
    digits.resize(src.digits.size(), 0);
}

{
    k = src.digits.size();
    for(i = 0; i < k; i++) {
        digits[i] += src.digits[i]; 
        digits[i] += carry;
        carry = 0;
        if(digits[i] > 9) {
            carry = 1;
            digits[i] -= 10;
        }
    }

    k = digits.size();
    for(i = src.digits.size(); i < k; i++) {
        digits[i] += carry;
        carry = 0;
        if(digits[i] > 9) {
            carry = 1;
            digits[i] -= 10;
        }
    }

    if(carry) {
        digits.resize(digits.size() + 1, 1);
    }
}

return *this;
}

const BigNum BigNum::operator+(const BigNum &src) const {
BigNum result(*this);
result += src;
return result;
} 
```

为什么

```
cout << (a + b); 
```

不行？有明显的解决方法，但我想了解为什么会发生这种情况。我是 C++ 新手，所以如果还有什么我做错了或者可以做得更好，请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T20:41:14.113

你的重载`operator<<`不接受`const BigNum`那个`operator+`回报。将参数类型更改`operator<<`为`const BigNum &`.

该函数认为允许修改传入的对象，但您传递的是不可修改的对象，因此它不匹配。

如下所述，`print()`您从那里调用的函数也必须`const`如此。

# regex - 正则表达式匹配字符串的第一次出现

> ID：10567236
> 
> 赞同：22
> 
> 时间：2012-05-12T20:38:11.843
> 
> 标签：regex

我有这个字符串：

> 城市 - 这是一些文本。这是更多 - 并继续在这里。

我想在第一个 ' - ' 处拆分字符串以找到 'city' （只是一个示例词，也可以是其他词）。加上查找' - '之后的其余文本。

我构造了这个表达式：

```
(^[\D\W\S]*)( - )([\D\W\S]*) 
```

但这会找到最后一次出现的 ' - ' 而不是第一个。

我怎样才能在第一次出现时停止？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-12T20:40:25.930

最简单的解决方案是明确禁止破折号成为第一组的一部分：

```
^([^-]*) - (.*) 
```

**解释：**

```
^        # Start of string
([^-]*)  # Match any number of characters except dashes
\ - \    # Match a dash (surrounded by spaces)
(.*)     # Match anything that follows 
```

但是，如果您的字符串*可以* 在第一组中包含破折号（只是没有被空格包围），这将失败。如果是这种情况，那么您可以使用惰性量词：

```
^(.*?) - (.*) 
```

**解释：**

```
^        # Start of string
(.*?)    # Match any number of characters, as few as possible
\ - \    # Match a dash (surrounded by spaces)
(.*)     # Match anything that follows 
```

# ruby - Ruby 中的循环分配

> ID：10567249
> 
> 赞同：11
> 
> 时间：2012-05-12T20:39:18.873
> 
> 标签：ruby, ruby-on-rails-3

我有`Enquiry`和`Consellor`模型。我想以循环方式将查询分配给辅导员。如果有 3 个 consellors 和 5 个 Enquiries，那么分配应该是：

> 查询 1 => C1，查询 2 => C2，查询 3 => C3，查询 4 ​​=> C1，查询 5 => C2

我可以通过查询数据库并通过缓存进行优化来做到这一点，但要寻找更好的解决方案。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-12T20:49:27.697

Array#cycle （一个无限的枚举器）很适合这个：

```
counselors = %w(C1 C2 C3).cycle
enquiries = Array.new(5){|i| "Enquiry #{(i+1).to_s}"}
enquiries.each{|enq| puts "Do something with #{enq} and #{counselors.next}."} 
```

输出

```
Do something with Enquiry 1 and C1.
Do something with Enquiry 2 and C2.
Do something with Enquiry 3 and C3.
Do something with Enquiry 4 and C1.
Do something with Enquiry 5 and C2. 
```

# objective-c - 删除或重新定位指针

> ID：10567251
> 
> 赞同：0
> 
> 时间：2012-05-12T20:39:42.750
> 
> 标签：objective-c

我有一个模型类。当我调用方法“setter”时，我为对象的属性设置了一些字符串值。设置属性后，该方法返回存储在`NSMutableArray *eintraegeSortiert`.

现在，我需要一个新对象。我想我必须删除指针并重新设置它。如果我不删除指针，存储在可变数组中的所有对象也会发生变化，并且我已经在该可变数组中存储了同一个对象 100 次。我尝试了多种方式，但都没有做对。我究竟做错了什么？我的代码：

```
NSMutableArray *eintraegeSortiert = [NSMutableArray array];
for (int i = 0; i < ([mArray count] / 11) ; i++) {
        Vertretung *vertretung = [[Vertretung alloc] init];
        [eintraegeSortiert addObject:[self setter:mArray :vertretung]];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:08:38.467

我认为您并没有真正理解您编写的代码是如何工作的。让我们看一下：

```
NSMutableArray *eintraegeSortiert = [NSMutableArray array];
for (int i = 0; i < ([mArray count] / 11) ; i++) {
    Vertretung *vertretung = [[Vertretung alloc] init];
    [eintraegeSortiert addObject:[self setter:mArray :vertretung]];
} 
```

所以一步一步：

```
NSMutableArray *eintraegeSortiert = [NSMutableArray array]; 
```

创建一个新的可变数组并将其分配给`eintraegeSortiert`

```
for (int i = 0; i < ([mArray count] / 11) ; i++) { 
```

我们将循环`[mArray count] / 11`时间。

```
Vertretung *vertretung = [[Vertretung alloc] init];
[eintraegeSortiert addObject:[self setter:mArray :vertretung]]; 
```

*现在，这是在当前范围内*创建一个名为`vertretung`. 你打电话`alloc`/ `init`。这将返回一个指向新`Vertretung`对象的指针。例如，这可能在内存位置`0x12345678`。然后将其添加到数组中。

然后我们到达当前作用域的末尾并在 for 循环中循环。这意味着变量`vertretung`超出范围。

然后，当您再次循环时，相同的代码会一次又一次地运行。但是现在`alloc`/`init`将创建一个全新的`Vertretung`对象（可能指向内存位置`0xabcdef00`并将其添加*到*数组中。

所以不，多次添加到数组中的对象不是同一个对象。

不知道发生了什么`setter::`- 如果您仍然遇到问题，也可以发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T21:00:39.890

```
NSMutableArray *eintraegeSortiert = [NSMutableArray array];
 for (int i = 0; i < ([mArray count] / 11) ; i++) {
       Vertretung *vertretung = [[Vertretung alloc] init];
       [eintraegeSortiert addObject:[self setter:mArray :vertretung]];
       [vertretung release];
       vertretung=nil;

} 
```

# iphone - 创建具有单位矢量坐标系的 CALayer

> ID：10567253
> 
> 赞同：1
> 
> 时间：2012-05-12T20:39:56.993
> 
> 标签：iphone, objective-c, ios, calayer, quartz-graphics

我想创建一个 CALayer，它使用单位向量来管理它的子层的位置。这将允许调整基础层的大小，同时将其所有子层保持在相同的相对位置。

这必须手动完成，还是有办法改变 CALayer 的坐标系来实现这一点？

我正在尝试实现一种简单的方法来处理窗口大小调整。通过使用单位向量，所有子层将在调整主层大小时保持相同的相对位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T10:32:49.530

在 Mac OSX`CALayers`上具有`layoutManager`允许设置自己的布局引擎的属性，不幸的是它在 iOS 上不可用，因此您有两种选择：

1.  加入您自己的子类`CALayer`将重新实现该`layoutSublayers`方法。
2.  在类中实现`layoutSublayersOfLayer:`方法，然后将此类的实例设置为您`CALayer`的`delegate`.

# c++ - 使用 STL 容器设置 upper_bound

> ID：10567256
> 
> 赞同：5
> 
> 时间：2012-05-12T20:40:15.807
> 
> 标签：c++, stl, set

我有以下完美的代码。

目标：给定一个数 n，找出 n 的下一个和前一个数。

基于以下示例：如果 n = 50，那么我将分别得到 60 和 40。

我可以通过使用upper_bound 获得60。但是我如何在 50 之前获得一个数字，我似乎找不到提供的算法来做到这一点。

```
set<int> myset;
set<int>::iterator it,itlow,itup;

for (int i=1; i<10; i++) myset.insert(i*10); // 10 20 30 40 50 60 70 80 90
itup=myset.upper_bound (50);                 // 
cout << "upper_bound at position " << (*itup) << endl;
    //output: 60 
```

参考[http://www.cplusplus.com/reference/stl/set/lower_bound/](http://www.cplusplus.com/reference/stl/set/lower_bound/)，它说upper_bound“返回一个迭代器，指向容器中**不小于x**的第一个元素”但我确定有指向**比较小于 x**的东西的其他东西。

提前致谢！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T20:47:01.987

```
it = myset.lower_bound(50);
--it; 
```

当然，除非您确定集合中的元素小于 50，否则不要取消引用该迭代*器*。你可以检查一下`it == myset.begin()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T20:46:54.977

`lower_bound`像 chris 所说的那样使用，请参阅 sgi： [http](http://www.sgi.com/tech/stl/lower_bound.html) ://www.sgi.com/tech/stl/lower_bound.html和 MSDN：http: [//msdn.microsoft.com/en-us/library/awxks70z%28v=vs.80 %29.aspx](http://msdn.microsoft.com/en-us/library/awxks70z%28v=vs.80%29.aspx)。

`lower_bound`将返回将发生插入的位置，以便保持您想要的顺序。

所以

```
itlow = myset.lower_bound (50); // check if this is not pointing to myset.end()
--itlow; // should still check if this is in your container really
cout << "upper_bound at position " << (*itup) << "lower bound" << (*itlow) << endl; 
```

我认为更好的版本

```
// check whether lower_bound returns myset.end() or myset.begin() for sensible and safe assignment
if (myset.lower_bound(50) != myset.end() && myset.lower_bound(50) != myset.begin())
{
  itlow = myset.lower_bound(50);
  --itlow;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T20:49:06.343

你想要`lower_bound(49)`。或者`lower_bound(50)`如果需要，可能会做并准备回去。

# jquery - jquery animate：更改跨度颜色不起作用

> ID：10567259
> 
> 赞同：1
> 
> 时间：2012-05-12T20:40:32.337
> 
> 标签：jquery, jquery-animate

我有一个班级：cash_warn。我想用 jquery 动画更改跨度的颜色，但是它不起作用。

我现在拥有的：

```
$('.cash_warn').animate({ color: "#ff8484" }, 500); 
```

另一方面，这确实可以正常工作，但不会对其进行动画处理：

```
$('.cash_warn').css('color',"#ff8484"); 
```

html:

```
<div class=" friends-shadow detailreward3 detailreward"  style="position:absolute;
 height:71px;  width:238px; left: 453px; top: 40px; padding:20px; z-index:99; font:
 bold 11px Helvetica, Arial, sans-serif;">

<span style=" color:#fff" class="cash_warn">
text
</span>

<br /> <br />

 more text
</div> 
```

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T20:41:35.497

`color`除非您使用 jQuery插件，否则您无法为颜色设置动画。( [GitHub](https://github.com/jquery/jquery-color) )

> 所有动画属性都应动画为单个数值，除非以下说明；大多数非数字属性无法使用基本的 jQuery 功能进行动画处理（例如，宽度、高度或左侧可以设置动画，但背景颜色不能设置，除非使用 jQuery.Color() 插件）。除非另有说明，否则属性值被视为像素数。

[**来源**](http://api.jquery.com/animate/)

> 注意：jQuery UI 项目扩展了 .animate() 方法，允许对一些非数字样式（例如颜色）进行动画处理。该项目还包括通过 CSS 类而不是单个属性指定动画的机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T21:17:06.050

# CSS3解决方案

这是我的 0.2 美元。
使用 CSS3 和一点 jQuery？

## *[演示 jsBin](http://jsbin.com/urutiq/edit#javascript,html,live)*

HTML：

```
<span class="cash_warn"> <!-- removed inline style-->
    text
</span> 
```

CSS：

```
span.cash_warn{
    color: transparent;              /*set to transparent*/
    text-shadow: 0 0 0 #fff;         /*we concentrate the text shadow*/
    -webkit-transition: all 2s ease-in-out;
    -moz-transition: all 2s ease-in-out;
    -o-transition: all 2s ease-in-out;
    -ms-transition: all 2s ease-in-out;
    transition: all 2s ease-in-out;
}
span.go_animate{                    /*this will be added by JS*/
    text-shadow: 0px 0px 0px #f00;
} 
```

最后：

```
var textInt = setTimeout (function(){
  $('span.cash_warn').addClass('go_animate');
},1000); // after one second ... add the 'go_animate' class 
```

* * *

# XBrowser 解决方案

如果您想要一个跨浏览器解决方案 - 我们可以做一个很好的技巧：
我们可以使用复制该元素`.clone()`，
获取它的位置，
淡出原始元素并淡入克隆。:)

干得好：

## *[jsBin 演示2](http://jsbin.com/urutiq/3/edit)*

```
$('.cash_warn').each(function(){

  var spanPos = $(this).position();
  $(this)
    .fadeTo(1500,0)              // fadeOut original
    .clone()                     // clone it
    .appendTo($(this).parent())  // append to parent element
    .addClass('spanClone')       // add a class if you need it for (CSS).
    .hide()                      // hide the clone
    .css({position:'absolute', left:spanPos.left, top: spanPos.top, color: 'red'}) // you don't need 'color' and 'position' if you have defined that already in the CSS for .spanClone
    .fadeTo(1500,1);             // after positions are set... fade it in!

}); 
```

# java - 适用于 java 的 appengine 搜索 api 的配额

> ID：10567267
> 
> 赞同：9
> 
> 时间：2012-05-12T20:41:18.373
> 
> 标签：java, google-app-engine, quotas, gae-search

我正在为 java 测试新的应用程序引擎搜索 api，并且我有以下代码尝试在索引上添加 ~3000 个文档：

```
List<Document> documents = new ArrayList<Document>();
    for (FacebookAlbum album: user.listAllAlbums()) {
        Document doc = Document.newBuilder()
                .setId(album.getId())
                .addField(Field.newBuilder().setName("name").setText(album.getFullName()))
                .addField(Field.newBuilder().setName("albumId").setText(album.getAlbumId()))
                .addField(Field.newBuilder().setName("createdTime").setDate(Field.date(album.getCreatedTime())))
                .addField(Field.newBuilder().setName("updatedTime").setDate(Field.date(album.getUpdatedTime())))
                .build();
        documents.add(doc);
    }     

    try {
        // Add all the documents.
        getIndex(facebookId).add(documents);
    } catch (AddException e) {
        if (StatusCode.TRANSIENT_ERROR.equals(e.getOperationResult().getCode())) {
            // retry adding document
        }
    } 
```

但是，我收到以下异常：

```
Uncaught exception from servlet
java.lang.IllegalArgumentException: number of documents, 3433, exceeds maximum 200
at com.google.appengine.api.search.IndexImpl.addAsync(IndexImpl.java:196)
at com.google.appengine.api.search.IndexImpl.add(IndexImpl.java:380)
at photomemories.buildIndexServlet.doGet(buildIndexServlet.java:47) 
```

添加调用设置为 200 时我可以插入的文档数量是否有配额？

如果我尝试使用以下代码一次将一个文档插入索引：

```
 for (FacebookAlbum album: user.listAllAlbums()) {
        Document doc = Document.newBuilder()
                .setId(album.getId())
                .addField(Field.newBuilder().setName("name").setText(album.getFullName()))
                .addField(Field.newBuilder().setName("albumId").setText(album.getAlbumId()))
                .addField(Field.newBuilder().setName("createdTime").setDate(Field.date(album.getCreatedTime())))
                .addField(Field.newBuilder().setName("updatedTime").setDate(Field.date(album.getUpdatedTime())))
                .build();

         try {
            // Add the document.
            getIndex(facebookId).add(doc);
        } catch (AddException e) {
            if (StatusCode.TRANSIENT_ERROR.equals(e.getOperationResult().getCode())) {
                // retry adding document
            }
        }

    } 
```

我收到以下异常：

```
com.google.apphosting.api.ApiProxy$OverQuotaException: The API call search.IndexDocument() required more quota than is available.
at com.google.apphosting.runtime.ApiProxyImpl$AsyncApiFuture.success(ApiProxyImpl.java:479)
at com.google.apphosting.runtime.ApiProxyImpl$AsyncApiFuture.success(ApiProxyImpl.java:382)
at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher$1.runInContext(RpcStub.java:786)
at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455) 
```

我认为 api 调用的配额是 20k/天（请参见此处：[https](https://developers.google.com/appengine/docs/java/search/overview#Quotas) ://developers.google.com/appengine/docs/java/search/overview#Quotas ）。

关于发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T02:10:02.703

这里发生了一些事情。最重要的是，这将很快在文档中阐明，搜索 API 调用配额也考虑了添加/更新的文档数量。因此，插入 10 个文档的单个 Add 调用将使您的每日 Search API 调用配额减少 10。

是的，可以在单个添加调用中索引的最大文档数为 200。但是，在此阶段还有一个短期突发配额，将您限制为每分钟大约 100 个 API 调用。

以上所有意味着，至少目前，每个添加请求不添加超过 100 个文档是最安全的。按照 Shay 的建议通过任务队列这样做也是一个非常好的主意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T21:15:49.910

我认为（无法找到验证）存在每分钟配额限制，您应该使用队列为文档编制索引，以确保逐步编制索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T00:56:50.560

文档还提到了每分钟配额，20k 也就是每分钟 13.9 个。

[https://developers.google.com/appengine/docs/quotas](https://developers.google.com/appengine/docs/quotas)

# c# - IValueConverter 获取空值 - WPF C#

> ID：10567272
> 
> 赞同：2
> 
> 时间：2012-05-12T20:41:45.930
> 
> 标签：c#, wpf, image, converter, ivalueconverter

我正在尝试使用 CroppedBitmap。

图像的路径只有在运行时才知道，所以我想通过 Binding 设置 CroppedBitomap.Source。

我发现 CroppedBitmap 及其来源存在一个已知问题。请参阅：[WPF - 在 DataTemplate 中使用 CroppedBitmap](https://stackoverflow.com/questions/1711151/wpf-using-croppedbitmap-in-datatemplate)

这些链接建议使用转换器。我试过这样做，但我总是在 Convert 函数中得到空值。

这是一个 xaml 视图：

```
<UserControl> 
    <UserControl.Resources>
        <local:ImageConverter x:Key="imageConverter" />
    </UserControl.Resources>

    <StackPanel>
        <Label x:Name="testLabel" Content="{Binding Path=Img}"/>
        <Button x:Name="testButton" Content="{Binding ElementName=testLabel, Path=Content}"/>

        <Image Stretch="None">
            <Image.Source>
                <CroppedBitmap Source="{Binding ElementName=testLabel, Path=Content, Converter={StaticResource imageConverter}}" SourceRect="10,10,50,50" />            
            </Image.Source>
        </Image>
    </StackPanel>
</UserControl> 
```

名为“testLabel”的标签显示属性 Img 的值没有问题。按钮“testButton”显示与“testLabel”相同的值。

这是 imageConverter 类：

```
public class ImageConverter : IValueConverter
{
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            FormatConvertedBitmap fcb = new FormatConvertedBitmap();
            fcb.BeginInit();
            fcb.Source = new BitmapImage(new Uri((string)value));
            fcb.EndInit();
            return fcb;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            throw new NotSupportedException("Cannot convert back");
        }
} 
```

但是当我调试函数 Convert 时，我看到名为“value”的第一个参数总是为空。

大师，我需要你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-26T08:10:46.013

我有同样的问题。

我的错误是绑定的属性是错误的类型。它是字符串应该是一个枚举。

没有构建错误。但是在运行时，我的 (IValueConverter).Convert 方法被传递了 value=null。

发生这种情况的地方-检查绑定...

# django - 在 Django 中使用 AdminPasswordChangeForm 更改密码时出错

> ID：10567274
> 
> 赞同：0
> 
> 时间：2012-05-12T20:42:31.773
> 
> 标签：django, django-forms, django-admin, django-templates

我对使用更改密码没有太多想法`AdminPasswordChangeForm`。我得到了一个教程，发现了这个片段：

```
def user_change_password(request, id):
    form = AdminPasswordChangeForm(User, request.POST)
    if form.is_valid():
        new_user = form.save()
        msg = _('Password changed successfully.')
        request.user.message_set.create(message=msg)
        return HttpResponseRedirect('..')
    else:
        form = AdminPasswordChangeForm(User)
        extra_context = {    
            'form': form,
            'change': True
        }
        return direct_to_template(request,"users/user_password_change.html",
            extra_context = extra_context) 
```

`url.py`和 template一切都很好`user_password_chage.html`。在模板级别，它显示了一个包含两个密码字段的表单：一个是密码，第二个是密码（再次）。但是当我单击提交按钮更改密码时，它显示以下错误：

> 必须使用 User 实例作为第一个参数调用未绑定的方法 set_password()（改为获取 unicode 实例）

我是 Django 的新手，在官方文档中没有找到任何有关此表单的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T21:23:21.550

表单实例化调用的第一个参数应该是用户实例，而不是 User 类 - 即它应该是您要更改其密码的实际用户。大概那是当前用户，因此您可以从以下位置获取`request.user`：

```
form = AdminPasswordChangeForm(request.user, request.POST) 
```

# iphone - 当一个新的视图控制器被推送到导航控制器时，将一个子视图保持在屏幕上的同一位置？

> ID：10567277
> 
> 赞同：1
> 
> 时间：2012-05-12T20:43:36.713
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uinavigationcontroller

我有一个带有许多图像按钮的“主屏幕”。在点击其中一个按钮时，一个详细视图控制器被推到导航控制器上。但是，从视觉上看，我希望按钮中的图像保持在屏幕上的相同位置，而新的视图控制器过渡到它后面的位置。

模态控制器的一个例子是将照片添加到电子邮件或消息中。您在图库中选择的照片会变大（好像它正在向您移动），而撰写消息视图在后台滑动到位，然后照片缩小到消息视图上的适当位置。

我想到的几个选项：

*   点击按钮后，将图像放置在屏幕上与 UIWindow 的子视图相同的位置。做动画/过渡，然后使图像成为新视图控制器视图的子视图。

*   与上面相同，但具有清晰背景的模态视图控制器

*   让 UINavigationController 成为子视图，并使用 UINavigationController 的父视图执行上述操作

上面的所有选项都是相似的，但我很好奇是否有更好的方法来做到这一点，以及代码的位置。我应该继承 UINavigationController 并将转换代码放在那里吗？或者可能是 AppDelegate （虽然这似乎是错误的）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T22:54:32.727

我会向导航控制器或窗口添加子视图，但需要一些视图层次结构。

您需要为 the`master`和`detail`view 控制器提供一种方法来引用`imageView`每个 ivar 应该没问题。

```
// PSMasterViewController.m
@interface PSMasterViewController ()

@property (nonatomic, strong) UIImageView *imageView;

@end

@implementation PSMasterViewController

@synthesize imageView = _imageView;

// ...
@end 
```

我已将其放入实现中，因为我不想将其公开给主视图控制器，但您的需求可能会有所不同。

同样的`detailViewController`

```
// PSDetailViewController.h
@interface PSMasterViewController : UIViewController

@property (nonatomic, strong) UIImageView *imageView;

@end

// PSDetailViewController.m
@implementation PSDetailViewController

@synthesize imageView = _imageView;

// ...
@end 
```

现在假设 imageView 已经在主视图控制器中创建并呈现，我们需要在即将推送时实现一些视图体操

```
- (void)methodThatPushesTheNextViewController;
{
    CGRect destinationFrame = [self.view convertRect:self.imageView.frame toView:self.navigationController.view];
    [self.imageView removeFromSuperview];
    [self.navigationController.view addSubview:self.imageView];
    self.imageView.frame = destinationFrame;

    PSDetailViewController *detailViewController = [[PSDetailViewController alloc] init];
    detailViewController.imageView = self.imageView;
    self.imageView = nil; // The detailViewController should own this now
    [self.navigationController pushViewController:detailViewController animated:YES];
} 
```

现在在细节视图控制器中，我们需要做与我们刚刚做的相反的事情，这`viewDidAppear:`是一个好地方，尤其是你提到的你可能想要移动和缩放

```
- (void)viewDidAppear:(BOOL)animated;
{
    [super viewDidAppear:animated];

    CGRect startFrame = [self.view convertRect:self.imageView.frame fromView:self.navigationController.view];
    [self.imageView removeFromSuperview];
    [self.view addSubview:self.imageView];
    self.imageView.frame = startFrame;

    [UIView animateWithDuration:0.25f
                     animations:^{
                         self.imageView.frame = [self someNewFrame];
                     }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T21:41:03.553

**选项1**

你也可以在没有 ModalViewController 的情况下做到这一点。首先要记住，您必须删除图像并再次将其移至 pushViewController，因为如果发生视图转换，则会再次添加新的 viewController，并且您之前的视图会消失。因此，通过向被推送的 viewController 发送 NSNotification 并创建具有相同帧的视图来执行此操作。还记得在推送新的 ViewController 之前从 superview 中删除视图。

**选项2**

如果所有需要相关视图的视图控制器都继承自单个 ViewController 子类，则可以调用 [super init] 方法创建视图并将其添加到 viewDidLoad 方法中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-12T21:09:00.947

您可以按照您的设想在视图上执行“UIView Animation”，或者您可以使用 iCarousel 来获得更清晰的 Animation [icarousel SourceCode](https://github.com/nicklockwood/iCarousel)

# ios - 点击图像以移至下一个视图

> ID：10567283
> 
> 赞同：2
> 
> 时间：2012-05-12T20:44:41.830
> 
> 标签：ios, uiimageview

场景：用户正在查看带有图像和标签中一些伴随文本的屏幕。用户点击图像并被带到只有图像的屏幕，并且它需要是可缩放的。用户点击该图像并返回图像/文本屏幕。

使用故事板，我实现了第一个屏幕

```
 @interface FirstImageViewController :  UIViewController <UIScrollViewDelegate> 
```

这样可行。（顺便说一句，我没有在这个屏幕上进行缩放）我实现了第二个屏幕

```
 @interface SecondImageViewController : UIViewController  <UIScrollViewDelegate> 
```

我试图通过以下方式进入第二个屏幕：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {

[self performSegueWithIdentifier:@"SingleImage" sender:touch]; 
return YES; 
```

和

```
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
 {
   self.secondImageViewController = segue.destinationViewController;
    [self.secondImageViewController setImageToDisplay:self.imageToDisplay];
 } 
```

但是在gestureRecognizer方法上得到一个错误：

***由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类不符合键 imageDisplayer 的键值编码。”

我不确定我是否以正确的方式进行此操作并且可以使用帮助。

瑞克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T22:00:46.687

该错误消息通常是您的 UI（无论是 xib 还是故事板）中的问题的症状，其中正在加载视图控制器及其关联的视图，并且对代码中不存在的插座的引用。你的故事板中有一个链接到一个叫做 的东西`imageDisplayer`吗？

（如果您没有看到它，请尝试右键单击您的故事板并选择“打开为->源代码”并进行文本搜索。）

# php - 使用 Mysql 数据在 PHP 中构建多维数组

> ID：10567285
> 
> 赞同：2
> 
> 时间：2012-05-12T20:44:55.407
> 
> 标签：php, javascript, jquery, mysql

我有以下多维 javascript 数组。

```
var accounts =
    [
        { name: '069070474', crd_no:
        [
            {name: '0215020174357351', ssn_no: ['582238797'] }
        ]},
        { name: '089255135', crd_no:
        [
            {name: '0215020178346863', ssn_no: ['583872782','874514213']}
        ]},
        { name: '123456789', crd_no:
        [
            {name: '8888888888888888', ssn_no: ['122121212']}
        ]},
        { name: '131274740', crd_no:
        [
            {name: '0215020178888432', ssn_no: ['478498545','584586942']}
        ]},
        { name: '454296191', crd_no:
        [
            {name: '0215020178896484', ssn_no: ['582214564']}
        ]},
        { name: '987654321', crd_no:
        [
            {name: '8888888888888888', ssn_no: ['122121212']}
        ]}
    ]; 
```

而且我在具有以下架构的mysql表中也有上述数据：

```
TABLE `profile_id`
(
`acct_no` varchar(19) NOT NULL COMMENT 'Customer account no',
`crd_no` varchar(19) NOT NULL COMMENT 'Customer card no',
`ssn_no` varchar(9) NOT NULL COMMENT 'Customer social security number',
PRIMARY KEY  (`acct_no`,`crd_no`,`ssn_no`)
) 
```

我想要做的是使用 php 从 mysql 表中检索数据，并创建一个与我现有的 javascript 数组匹配的多维数组或 json 编码字符串。我希望在循环中构建数组，以便将新记录添加到表中，数组将不断更新。

确切的代码不是必需的（但它是受欢迎的），我只是在寻找有关如何处理这个问题的建议。我可以在 acct_no 和 crd_no 或所有三个的唯一组合上构建和过滤数组，但是我还没有让在 php 中构建的数组看起来与我在 javascript 中的样子完全一样。最终目标是将 js 数组提供给一组三个下拉框。每个框的选定值将决定下一个框的数据选择列表。现在我知道我可以通过使用 ajax 在从每个框中进行选择时查询数据库来设置它，但是我避免了多次访问服务器。关于完成这项工作的任何其他建议也是一个加分项。

以下是操作数据的 javascript 代码。

```
 $(document).ready(function()
    {
        document.soapFormSetup.reset();

        $(function()
        {
            var start = '';
            var options = '<option selected value="'+ start +'">-----------------------' + '</option>' ;

            for (var i = 0; i < accounts.length; i++)
            {
                var opt = accounts[i].name ;

                options += '<option value="' + opt + '">xxxxxxxxxxxxxx' + opt.substring(5) + '</option>';
            }

            $("#sms_acct_no").html(options);

            start = '';
            options = '<option selected value="'+ start +'">-----------------------' + '</option>' ;

            for (var i=0; i < accounts[0].crd_no.length; i++)
            {
                var opt = accounts[0].crd_no[0].name ;

                options += '<option value="' + opt + '">xxxxxxxxxxxxxx' + opt.substring(12) + '</option>';
            }

            $("#sms_crd_no").html(options);

            start = '';
            options = '<option selected value="'+ start +'">--------------' + '</option>' ;

            for (var i=0; i < accounts[0].crd_no[0].ssn_no.length; i++)
            {
                var opt = accounts[0].crd_no[0].ssn_no[i] ;

                options += '<option value="' + opt + '">xxx-xx-' + opt.substring(5) + '</option>';
            }

            $("#sms_ssn_no").html(options);

            document.soapFormSetup.sms_ssn_no.disabled=true;
            document.soapFormSetup.sms_crd_no.disabled=true;

            $("#sms_acct_no").bind("change",
            function()
            {
                if ( $(this).children(":selected").val() !== "" )
                    document.soapFormSetup.sms_crd_no.disabled=false;
                else
                {
                    document.soapFormSetup.sms_crd_no.value="";
                    document.soapFormSetup.sms_ssn_no.value="";

                    document.soapFormSetup.sms_crd_no.disabled=true;
                    document.soapFormSetup.sms_ssn_no.disabled=true;
                }

                for(var i=0; i<accounts.length; i++)
                {
                    if (accounts[i].name == this.value)
                    {
                        start = '';
                        var crd_nos = '<option selected value="'+ start +'">-----------------------' + '</option>' ;

                        for (var j=0; j < accounts[i].crd_no.length; j++)
                        {
                            var opt= accounts[i].crd_no[j].name ;

                            crd_nos += '<option value="' + opt + '">xxxxxxxxxxxxxx' + opt.substring(12) + '</option>';
                        }

                        break;
                    }
                }

                $("#sms_crd_no").html(crd_nos);

                for(var i=0; i<accounts.length; i++)
                {
                    for(var j=0; j<accounts[i].crd_no.length; j++)
                    {
                        if(accounts[i].crd_no[j].name == $("#sms_crd_no").val())
                        {
                            start = '';
                            var crd_ssn_nos = '<option selected value="'+ start +'">--------------' + '</option>' ;

                            for (var k=0; k < accounts[i].crd_no[j].ssn_no.length; k++)
                            {
                                var opt = accounts[i].crd_no[j].ssn_no[k] ;

                                crd_ssn_nos += '<option value="' + opt + '">xxx-xx-' + opt.substring(5) + '</option>';
                            }

                            break;
                        }
                    }
                }

                $("#sms_ssn_no").html(crd_ssn_nos);

                document.soapFormSetup.sms_ssn_no.disabled=true;
                document.soapFormSetup.sms_ssn_no.value="";
            });

            $("#sms_crd_no").bind("change",
                function()
                {
                    if ( $(this).children(":selected").val() !== "" )
                        document.soapFormSetup.sms_ssn_no.disabled=false;
                    else
                    {
                        document.soapFormSetup.sms_ssn_no.value="";

                        document.soapFormSetup.sms_ssn_no.disabled=true;
                    }

                    for(var i=0; i<accounts.length; i++)
                    {
                        for(var j=0; j<accounts[i].crd_no.length; j++)
                        {
                            if(accounts[i].crd_no[j].name == this.value)
                            {
                                start = '';
                                var ssn_nos = '<option selected value="'+ start +'">--------------' + '</option>' ;

                                for (var k=0; k < accounts[i].crd_no[j].ssn_no.length; k++)
                                {
                                    var opt = accounts[i].crd_no[j].ssn_no[k] ;

                                    ssn_nos += '<option value="' + opt  + '">xxx-xx-' + opt.substring(5)  + '</option>';
                                }

                                break;
                            }
                        }
                    }

                    $("#sms_ssn_no").html(ssn_nos);
                });
            });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:55:52.887

我相信下面的代码会产生一个相同的 JSON 编码字符串：

```
$accounts = array();
while($row = mysql_fetch_assoc($query)) {
    $accounts[] = array(
        "name"   => $row["acct_no"],
        "crd_no" => array(
            "name"   => $row["crd_no"],
            "ssn_no" => $row["ssn_no"]
        ) 
    );
}
echo json_encode($accounts); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:45:22.880

据推测，一个帐户名可能与多张卡相关联（否则，为什么 crd_no 会是一个数组）所以试试这个：

```
// Create an array keyed by acct_no, containing arrays of crd_no data
$accounts = array();
while ($row = mysql_fetch_assoc($query)) {
    if (!isset($accounts[$row["acct_no"]])) {
       $accounts[$row["acct_no"]] = array();
    }
    $accounts[$row["acct_no"]][] = array(
        "name"   => $row["crd_no"],
        "ssn_no" => $row["ssn_no"]
    );
}

// but it's not the format you want so now...
$accounts_formatted = array();
foreach ($accounts as $name => $account) {
    $accounts_formatted[] = array(
        "name" => $name,
        "crd_no" => $account
    );
}
echo json_encode($accounts_formatted); 
```

# python - 动态定义 colander.SchemaNode 的“缺失”

> ID：10567286
> 
> 赞同：2
> 
> 时间：2012-05-12T20:45:23.427
> 
> 标签：python, pyramid

我必须在视图中强制定义模式，因为“缺失”需要是动态的：

```
 # ...
    now = datetime.datetime.utcnow()
    delta = datetime.timedelta(days=range)

    schema = SchemaNode(Mapping())
    schema.add(SchemaNode(Date(), name='to', missing=now))
    schema.add(SchemaNode(Date(), name='from', missing=now - delta))
    # ... 
```

这很丑陋。除了定义自定义类型之外，还有更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T02:23:16.010

使用[模式绑定](http://docs.pylonsproject.org/projects/colander/en/latest/binding.html)。

```
@colander.deferred
def deferred_now(node, kw):
    now = kw['now']
    return now

@colander.deferred
def deferred_now_delta(node, kw):
    return kw['now'] - kw['delta']

class MySchema(MappingSchema):
     to = SchemaNode(Date(), missing=deferred_now)
     frm = SchemaNode(Date(), missing=deferred_now_delta)

def aview(request):
    schema = MySchema().bind(now=now(), delta=somedelta) 
```

# javascript - 实现流畅的草图绘制 元素

> ID：10567287
> 
> 赞同：33
> 
> 时间：2012-05-12T20:45:27.100
> 
> 标签：javascript, html, canvas, drawing, paint

我正在尝试用画布创建一个绘图区域。我在绘制曲线时无法使线条看起来平滑，而且我的算法中的线条粗细也发生了变化，这看起来也很糟糕，因为尺寸也跳得很大，你可以看到尺寸变化的地方。我确实[在 stackoverflow 上找到了此链接，](https://stackoverflow.com/questions/5076622/iphone-smooth-sketch-drawing-algorithm)但这是针对本机 iPhone 应用程序的，我无法弄清楚。

这是我当前的 JS 代码。这是它[在 jsFiddle 上运行的](http://jsfiddle.net/PbPBS/)

```
var xStart,
xEnd,
yStart,
yEnd,
paint,
ctx;
$(document).ready(function (){

   ctx = $('canvas')[0].getContext("2d");
   ctx.strokeStyle = '#000';
   ctx.lineJoin="round";
   ctx.lineCap="round";
   ctx.lineWidth = 1;

   $('canvas').bind('mousedown mousemove mouseup mouseleave touchstart touchmove touchend', function(e){
        var orig = e.originalEvent;

        if(e.type == 'mousedown'){
            e.preventDefault(); e.stopPropagation();

            xStart = e.clientX - $(this).offset().left;
            yStart = e.clientY - $(this).offset().top;
            xEnd = xStart;
            yEnd = yStart;

            paint = true;
            draw(e.type);

        }else if(e.type == 'mousemove'){
            if(paint==true){
                xEnd = e.clientX - $(this).offset().left;
                yEnd = e.clientY - $(this).offset().top;

               lineThickness = 1 + Math.sqrt((xStart - xEnd) *(xStart-xEnd) + (yStart - yEnd) * (yStart-yEnd))/5;

               if(lineThickness > 10){
                    lineThickness = 10;   
               }

                ctx.lineWidth = lineThickness;
                draw(e.type);
            }
        }else if(e.type == 'mouseup'){
            paint = false;
        }else if(e.type == 'mouseleave'){
            paint = false;
        }else if(e.type == 'touchstart'){
            if(orig.touches.length == 1){
                e.preventDefault(); e.stopPropagation();

                xStart = orig.changedTouches[0].pageX - $(this).offset().left;
                yStart = orig.changedTouches[0].pageY - $(this).offset().top;
                xEnd = xStart;
                yEnd = yStart; 

                paint = true;
                draw(e.type);
            }
        }else if(e.type == 'touchmove'){
            if(orig.touches.length == 1){
                if(paint==true){
                    xEnd = orig.changedTouches[0].pageX - $(this).offset().left;
                    yEnd = orig.changedTouches[0].pageY - $(this).offset().top;

                            lineThickness = 1 + Math.sqrt((xStart - xEnd) *(xStart-xEnd) + (yStart - yEnd) * (yStart-yEnd))/6;
                       if(lineThickness > 10){
                          lineThickness = 10;   
                       }

                      ctx.lineWidth = lineThickness;

                    draw(e.type);
                }
            }
        }else if(e.type == 'touchend'){
            paint = false;
        }

      });
    });

    function draw(event){

    if(event == 'mousedown'){
        ctx.beginPath();
        ctx.moveTo(xStart, yStart);
        ctx.lineTo(xEnd, yEnd);
        ctx.stroke();
    }else if(event == 'mousemove'){
        ctx.beginPath();
        ctx.moveTo(xStart, yStart);
        ctx.lineTo(xEnd, yEnd);
        ctx.stroke();
    }else if(event == 'touchstart'){
        ctx.beginPath();
        ctx.moveTo(xStart, yStart);
        ctx.lineTo(xEnd, yEnd);
        ctx.stroke();
    }else if(event == 'touchmove'){
        ctx.beginPath();
        ctx.moveTo(xStart, yStart);
        ctx.lineTo(xEnd, yEnd);
        ctx.stroke();
    }
    xStart = xEnd;
    yStart = yEnd;                  
} 
```

谢谢大家。

如果你画画，这就是它现在的样子。![当前（锯齿状）实施](../Images/e68691d457cf7bbbedf5f66f422d1fc8.png)

...这就是我想要实现的目标：

![流畅的笔触](../Images/40a409a718cc3c3c496366e6365f1b98.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-19T02:34:30.117

不久前我做了这样的事情并将其变成了一个 jquery 插件。看看这里，如果这是你想要的，我会发布更详细的答案并从我的档案中挖掘出简化的 jquery 版本：

[http://jsfiddle.net/95tft/](http://jsfiddle.net/95tft/)

**编辑**

好的，抱歉我昨天不能这样做：

最初，上面的代码是从 Doob 先生的“和谐”草图师那里分叉出来的：http: [//mrdoob.com/projects/harmony/#ribbon](http://mrdoob.com/projects/harmony/#ribbon)

（我认为这是最好的解决方案）。但我有点把它拆了，并在另一个项目中为我自己的目的重新制作它。我已经破解了我自己的插件，让它在这里更容易一点：

[http://jsfiddle.net/dh3bj/](http://jsfiddle.net/dh3bj/)

您可能想要更改的唯一一件事就是将其更改为在 mousedown/mouseup 上工作，这应该很容易也看看插件底部的设置，您应该能够通过玩得到您想要的效果画笔大小、颜色、alpha (rgba) 等。

希望有帮助

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-12T23:01:00.233

看看这段代码：

[http://jsfiddle.net/aMmVQ/](http://jsfiddle.net/aMmVQ/)

我正在做的是在 mouseDown 上开始一个新的点列表，然后为每个 mousemove 添加一个点到列表中。一旦我得到足够多的点（6 个左右），我就开始绘制二次曲线，曲线的控制点是当前点和下一个点的平均值。

`drawPoints`是这个神奇的位：

```
function drawPoints(ctx, points) {
    // draw a basic circle instead
    if (points.length < 6) {
        var b = points[0];
        ctx.beginPath(), ctx.arc(b.x, b.y, ctx.lineWidth / 2, 0, Math.PI * 2, !0), ctx.closePath(), ctx.fill();
        return
    }
    ctx.beginPath(), ctx.moveTo(points[0].x, points[0].y);
    // draw a bunch of quadratics, using the average of two points as the control point
    for (i = 1; i < points.length - 2; i++) {
        var c = (points[i].x + points[i + 1].x) / 2,
            d = (points[i].y + points[i + 1].y) / 2;
        ctx.quadraticCurveTo(points[i].x, points[i].y, c, d)
    }
    ctx.quadraticCurveTo(points[i].x, points[i].y, points[i + 1].x, points[i + 1].y), ctx.stroke()
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-15T07:09:53.863

## 你为什么不使用[croquis.js](https://github.com/disjukr/croquis.js)？

它有[像 Photoshop 一样整洁的画笔实现](http://crosspop.github.io/Croquispop/brush-preview.html):)

这是使用 croquis.js的[Demo 。](http://labs.crosspop.in/Croquispop/croquispop.html)

![画笔预览](../Images/aa54a51cf56319ef1d7273e6f858f8eb.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-16T09:39:27.467

似乎您需要在画布中使用一些*画笔*。很难说你到底需要什么样的画笔，但是很多 JS 库已经实现了画笔技术。

例如，你看过这个库吗？

*   [处理.js](http://processingjs.org/)
*   [HTML5-Canvas-Brush-Sketch](https://github.com/triceam/HTML5-Canvas-Brush-Sketch)（[演示](http://tricedesigns.com/portfolio/sketch/brush.html)和[文章](http://www.tricedesigns.com/2012/01/04/sketching-with-html5-canvas-and-brush-images)如何工作）

Laso in web 你可以找到许多在 Mr. Doob [Harmony](http://mrdoob.com/projects/harmony/)项目中实现的画笔。例如github 上的[stringy](http://rhyolight.posterous.com/new-brushes-for-harmony-canvas-app)或[Harmony-Brushes项目。](https://github.com/rhyolight/Harmony-Brushes)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-21T17:42:39.843

建议使用环绕因此填充的曲线的贝塞尔曲线链进行渲染。（即以 ctx.fill 结尾）还有很多工作要做，但希望这会有所帮助。

为贝塞尔曲线改编了一个不错的演示应用程序

将它添加到你的小提琴的叉子 [http://jsfiddle.net/d3zFU/1/](http://jsfiddle.net/d3zFU/1/)

代码是

```
/*
 * Canvas curves example
 *
 * By Craig Buckler,        http://twitter.com/craigbuckler
 * of OptimalWorks.net        http://optimalworks.net/
 * for SitePoint.com        http://sitepoint.com/
 *
 * Refer to:
 * http://blogs.sitepoint.com/html5-canvas-draw-quadratic-curves/
 * http://blogs.sitepoint.com/html5-canvas-draw-bezier-curves/
 *
 * This code can be used without restriction.
 */ 
```

（功能（） {

```
var canvas, ctx, code, point, style, drag = null, dPoint;

// define initial points
function Init(quadratic) {

    point = {
        p1: { x:100, y:250 },
        p2: { x:400, y:250 }
    };

    if (quadratic) {
        point.cp1 = { x: 250, y: 100 };
    }
    else {
        point.cp1 = { x: 150, y: 100 };
        point.cp2 = { x: 350, y: 100 };
    }

    // default styles
    style = {
        curve:    { width: 6, color: "#333" },
        cpline:    { width: 1, color: "#C00" },
        point: { radius: 10, width: 2, color: "#900", fill: "rgba(200,200,200,0.5)", arc1: 0, arc2: 2 * Math.PI }
    }

    // line style defaults
    ctx.lineCap = "round";
    ctx.lineJoin = "round";

    // event handlers
    canvas.onmousedown = DragStart;
    canvas.onmousemove = Dragging;
    canvas.onmouseup = canvas.onmouseout = DragEnd;

    DrawCanvas();
}

// draw canvas
function DrawCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // control lines
    ctx.lineWidth = style.cpline.width;
    ctx.strokeStyle = style.cpline.color;
    ctx.fillStyle = style.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    ctx.lineTo(point.cp1.x, point.cp1.y);
    if (point.cp2) {
        ctx.moveTo(point.p2.x, point.p2.y);
        ctx.lineTo(point.cp2.x, point.cp2.y);
    }
    else {
        ctx.lineTo(point.p2.x, point.p2.y);
    }
    ctx.stroke();

    // curve
ctx.lineWidth = 1 ; //style.curve.width;
    ctx.strokeStyle = style.curve.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    if (point.cp2) {
        ctx.bezierCurveTo(point.cp1.x, point.cp1.y, point.cp2.x, point.cp2.y, point.p2.x, point.p2.y);
        ctx.bezierCurveTo(point.cp2.x, point.cp2.y+12, point.cp1.x, point.cp1.y+12, point.p1.x, point.p1.y);

    }
    else {
        ctx.quadraticCurveTo(point.cp1.x, point.cp1.y, point.p2.x, point.p2.y);
    }
//ctx.stroke();
ctx.fill();

    // control points
    for (var p in point) {
        ctx.lineWidth = style.point.width;
        ctx.strokeStyle = style.point.color;
        ctx.fillStyle = style.point.fill;
        ctx.beginPath();
        ctx.arc(point[p].x, point[p].y, style.point.radius, style.point.arc1, style.point.arc2, true);
        ctx.fill();
        ctx.stroke();
    }

    ShowCode();
}

// show canvas code
function ShowCode() {
    if (code) {
        code.firstChild.nodeValue =
            "canvas = document.getElementById(\"canvas\");\n"+
            "ctx = canvas.getContext(\"2d\")\n"+
            "ctx.lineWidth = " + style.curve.width +
            ";\nctx.strokeStyle = \"" + style.curve.color +
            "\";\nctx.beginPath();\n" +
            "ctx.moveTo(" + point.p1.x + ", " + point.p1.y +");\n" +
            (point.cp2 ?
                "ctx.bezierCurveTo("+point.cp1.x+", "+point.cp1.y+", "+point.cp2.x+", "+point.cp2.y+", "+point.p2.x+", "+point.p2.y+");" :
                "ctx.quadraticCurveTo("+point.cp1.x+", "+point.cp1.y+", "+point.p2.x+", "+point.p2.y+");"
            ) +
            "\nctx.stroke();"
        ;
    }
}

// start dragging
function DragStart(e) {
    e = MousePos(e);
    var dx, dy;
    for (var p in point) {
        dx = point[p].x - e.x;
        dy = point[p].y - e.y;
        if ((dx * dx) + (dy * dy) < style.point.radius * style.point.radius) {
            drag = p;
            dPoint = e;
            canvas.style.cursor = "move";
            return;
        }
    }
}

// dragging
function Dragging(e) {
    if (drag) {
        e = MousePos(e);
        point[drag].x += e.x - dPoint.x;
        point[drag].y += e.y - dPoint.y;
        dPoint = e;
        DrawCanvas();
    }
}

// end dragging
function DragEnd(e) {
    drag = null;
    canvas.style.cursor = "default";
    DrawCanvas();
}

// event parser
function MousePos(event) {
    event = (event ? event : window.event);
    return {
        x: event.pageX - canvas.offsetLeft,
        y: event.pageY - canvas.offsetTop
    }
}

// start
canvas = document.getElementById("canvas");
code = document.getElementById("code");
if (canvas.getContext) {
    ctx = canvas.getContext("2d");
    Init(canvas.className == "quadratic");
} 
```

})();

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-13T23:41:46.867

对于那些对@Alex 提供的代码的点击版本感兴趣的人，我在这里重写了他的脚本：

[http://jsbin.com/aqoqad/3/](http://jsbin.com/aqoqad/3/)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-05-11T14:14:06.110

重要的！

我收集了一些需要的零件并附在此处！

```
<canvas id="paint_board" width="500" height="800" style="border: 1px solid;"></canvas>

<script>
var el = document.getElementById('paint_board');
// rect gets the cavas left top value in browser
var rect = el.getBoundingClientRect();
var ctx = el.getContext('2d');
    ctx.lineJoin = ctx.lineCap = 'round';
    ctx.lineWidth = 1;
var isDrawing, pen_type=1;
var screenWidth=500, screenHeight=500;  //set canvas width and height
var strokes=20;                         //how many strokes to draw
var color = [0, 0, 0]; // color val RGB 0-255, 0-255, 0-255
var painters = [], unpainters = [], timers = [];
var brushPressure=1; // brush Opacity
var easing = 0.7; // kind of "how loopy" higher= bigger loops
var refreshRate = 30; // set this higher if performace is an issue directly affects easing
var mouseX = screenWidth / 2, mouseY = screenHeight / 2;
var testinterval;

pen_init();
function pen_init(){
    for(var i = 0; i < strokes; i++) {
        var ease = Math.random() * 0.05 + easing;
        painters.push({
            dx : screenWidth / 2,
            dy : screenHeight / 2,
            ax : 0,
            ay : 0,
            div : 0.1,
            ease : ease
        });
    }
    testinterval = setInterval(update, refreshRate);
    function update() {
        var i;
        ctx.strokeStyle = "rgba(" + color[0] + ", " + color[1] + ", " + color[2] + ", " + brushPressure + ")";
        for( i = 0; i < painters.length; i++) {
            ctx.beginPath();
            var dx = painters[i].dx;
            var dy = painters[i].dy;
            ctx.moveTo(dx, dy);
            var dx1 = painters[i].ax = (painters[i].ax + (painters[i].dx - mouseX) * painters[i].div) * painters[i].ease;
            painters[i].dx -= dx1;
            var dx2 = painters[i].dx;
            var dy1 = painters[i].ay = (painters[i].ay + (painters[i].dy - mouseY) * painters[i].div) * painters[i].ease;
            painters[i].dy -= dy1;
            var dy2 = painters[i].dy;
            ctx.lineTo(dx2, dy2);
            ctx.stroke();
        }
    }
}
el.onmousedown = function(e) {
    isDrawing = true;
    mouseX = e.clientX+window.scrollX-rect.left;
    mouseY = e.clientY+window.scrollY-rect.top;
    var i = 0, paintersLen = painters.length;
    for(i; i < paintersLen; i++) {
                painters[i].dx = mouseX;
                painters[i].dy = mouseY;
    }
};
el.onmousemove = function(e) {
    if (!isDrawing) return;
    mouseX = e.clientX+window.scrollX-rect.left;
    mouseY = e.clientY+window.scrollY-rect.top;
};
el.onmouseup = function() {
    isDrawing = false;
};
</script> 
```

只需复制所有内容并将其粘贴到您的代码中即可。并且不要忘记点击投票！

# php - 定义列表在 Wordpress 模板中不起作用

> ID：10567291
> 
> 赞同：0
> 
> 时间：2012-05-12T20:45:49.797
> 
> 标签：php, wordpress, html

作为一个 Wordpress 新手，我目前正在整理一个基于网络链接的模板，该模板将在一个页面上显示我所有的博客文章，并按它们所在的类别分组。不幸的是，无论我如何修改定义列表，格式似乎不起作用。

有谁知道为什么以下代码对我的 DL 没有响应？实际页面的链接是[http://gameservertutorials.com/?page_id=2](http://gameservertutorials.com/?page_id=2)

```
<?php
/*
Template Name: Group Archives
*/
?>

<?php get_header(); ?>

<div id="content">

    <?php

        $cat_args = array(
          'orderby' => 'name',
          'order' => 'ASC',
          'child_of' => 0
        );

        $categories =   get_categories($cat_args); 

    ?>

    <div class="post">

    <dl>
        <?php foreach($categories as $category){ ?>

                <div class="title">
                        <dt><h2><a href="<?php echo get_category_link( $category->term_id ) ?>" title="<?php echo sprintf( __( "View all posts in %s" ), $category->name ) ?>"><?php echo $category->cat_name ?></a></h2></dt>
                </div>

                <?php
                    $post_args = array(
                        'numberposts' => 50,
                        'category' => $category->term_id
                    );

                    $posts = get_posts($post_args);

                    foreach($posts as $post){
                ?>

                <dd><a href="<?php echo the_permalink(); ?>" title="<?php echo the_title(); ?>"><?php echo the_title(); ?></a></dd>

                    <?php
                    }
                    ?>

        <?php
        }
        ?>
    </dl>

    </div>
</div>

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T20:48:49.693

`<dt>`尝试从标签中删除周围的 DIV ：

```
 <dt class="title"><h2><a href="<?php echo get_category_link( $category->term_id ) ?>" title="<?php echo sprintf( __( "View all posts in %s" ), $category->name ) ?>"><?php echo $category->cat_name ?></a></h2></dt> 
```

# sql - SQL 连接导致重复结果

> ID：10567294
> 
> 赞同：4
> 
> 时间：2012-05-12T20:46:28.797
> 
> 标签：sql, oracle, join

我创建了这样的表：

```
create table utilisateur(
 id_util number(10) primary key,
 nom varchar2(10) not null,
 prenom varchar2(10) not null,
 date_naissance date not null,
 adress varchar2(20)
);

create table cour(
 id_cour number(10) primary key,
 c_nom varchar2(20) not null,
 auteur varchar2(20) not null
);

create table etude(
 fk_util number(10) references utilisateur(id_util),
 fk_cour number(10) references cour(id_cour),
 primary key(fk_util,fk_cour)
);

create table examen(
 id_ex number(10) primary key,
 ex_nom varchar2(20) not null,
 temp date,
 fk_cour number(10) references cour(id_cour)
);

create table passer(
 fk_util number(10) references utilisateur(id_util),
 fk_ex number(10) references examen(id_ex),
 primary key(fk_util,fk_ex),
 note number(4)
);

create table certificat(
 cert_nom varchar2(20),
 prix varchar2(10),
 code varchar2(10) primary key,
 fk_ex number(10),
 fk_util number(10)
);

create table signet(
 id_sign number(10) primary key,
 s_nom varchar2(20) not null,
 depand_par varchar2(20) not null,
 fk_util number(10) references utilisateur(id_util)
); 
```

问题是我想查看所有用户（ ），他们正在阅读`utilisateur`哪些课程（ ），他们通过了哪些考试（ ）以及他们获得了哪些证书（）。`cour``examen``certificat`

我曾尝试使用内部连接、左右连接、完全连接、视图来执行此操作，但没有成功。如果我注册了 3 门课程和 2 门考试，那么我会看到重复的内容。我在想也许在我的数据库中出了点问题。

![在此处输入图像描述](../Images/c674086d16e86308caf2cc4641e9238b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T18:31:01.760

这个查询

```
select utilisateur.nom
       , cour.c_nom
       , examen.ex_nom
from utilisateur left join etude on utilisateur.id_util=etude.fk_util 
left join cour on etude.fk_cour=cour.id_cour 
left join passer on utilisateur.id_util=passer.fk_util 
left join examen on passer.fk_ex=examen.id_ex; 
```

没有考虑到考试与课程相关的事实。我认为没有必要为您想要实现的目标进行外部连接，所以试试这个。

```
select utilisateur.nom
     , cour.c_nom
     , examen.ex_nom
from utilisateur join etude on utilisateur.id_util=etude.fk_util 
                 join cour on etude.fk_cour=cour.id_cour 
                 join passer on utilisateur.id_util=passer.fk_util 
                 join examen on cour.id_cour = examen.fk_cour; 
```

编辑：这比我第一次看到的要复杂一些，我在下面添加了一个新的解决方案。我做的第一件事是在查询中添加一些别名，如果在某些版本的 oracle 上不使用别名，则在 3 个或更多表之间进行 ansi 连接会出现问题。别名通常是一件好事，无论如何我都添加了它们。我还将一些表格移动到内联视图中，以使问题对我自己更清楚。除了整理之外，我所做的唯一真正的改变是添加这一行：-

和 paex.id_ex = coex.id_ex

我已经根据您描述的我创建的一些数据测试了此查询，它似乎可以满足您的要求。

```
 SELECT ut.id_util
  ,ut.nom
  ,coex.c_nom
  ,paex.id_ex
  ,paex.ex_nom FROM   utilisateur ut LEFT JOIN (SELECT c_nom
             ,ex_nom
             ,co.id_cour
             ,id_ex 
             ,et.fk_util               
       FROM etude et JOIN cour co ON et.fk_cour = co.id_cour
                LEFT JOIN examen ex2 ON co.id_cour = ex2.fk_cour) coex ON coex.fk_util = ut.id_util LEFT JOIN (SELECT *
       FROM passer pa JOIN examen ex  ON pa.fk_ex   = ex.id_ex) paex ON paex.fk_util = ut.id_util 
                                                                    AND paex.id_ex = coex.id_ex ORDER BY id_util; 
```

# ajax - 在 sencha touch 2 中加载外部 url

> ID：10567297
> 
> 赞同：1
> 
> 时间：2012-05-12T20:46:38.013
> 
> 标签：ajax, jsonp, sencha-touch-2

我正在开发一个将外部 url (google.com) 加载到选项卡面板中的简单应用程序。使用 ajax 请求：`Ext.Ajax.request`由于访问控制允许来源而无法正常工作。我知道如何加载本地 html，如何允许对本地服务器进行访问控制。我的问题是当我无法访问外部服务器时。无论如何要加载外部网址吗？我试过`Ext.util.JSONP.request`了，但没有用。

这是关于tappanel和加载网址的senchafiddle示例（不是我写的）： [link](http://www.senchafiddle.com/#sT4bi#xLoOe)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:59:01.803

您可以做的是将其加载到 iframe 中。我已经编译了一个您可以用于此目的的组件

```
Ext.define('Ext.ux.IframeComponent', {
    extend: 'Ext.Component',

    xtype: 'iframecmp',

    config: {
        /**
         * @cfg {String} url URL to load
         */
        url     : null,

        /**
         * @cfg
         * @inheritdoc
         *
         * Add your own style
         */
        baseCls : Ext.baseCSSPrefix + 'iframe'
    },

    initialize: function() {
        var me = this;
        me.callParent();

        me.iframe = this.element.createChild({
            tag   : 'iframe',
            src   : this.getUrl(),
            style : 'width: 100%; height: 100%;'
        });

        me.relayEvents(me.iframe, '*');
    }

}); 
```

* * *

## 用法：

* * *

```
Ext.define("IframeCmp.view.Main", {
    extend: 'Ext.tab.Panel',
    config: {
        tabBarPosition: 'bottom',

        items: [
            {
                title   : 'Google',
                iconCls : 'action',
                xtype   : 'iframecmp',
                url     : 'http://sencha.com'
            }
        ]
    }
}); 
```

*重要提示：在 iframe 中从外部域加载 URL 被视为安全漏洞*

# macos - 清除SVN路径选项说明

> ID：10567301
> 
> 赞同：0
> 
> 时间：2012-05-12T20:47:05.563
> 
> 标签：macos, svn, osx-lion, svn-server

我已经工作了一段时间，试图更好地理解 SVN。我正在使用 Mac OSX Lion 服务器。我已经能够设置并在机器上运行 SVN 并制作它，以便我可以签入和签出文档。但是，我希望通过 Internet 访问其他服务，因此当我和我的许多同事在旅行时，我们仍然可以一起工作。我已经转发了 3690 端口（我相信那是 SVN 端口）并且之前设置了 ssh 的端口。

我在 安装了 SVN 存储库`/Library/Subversion/Repository/`，并且我在服务器上有版本和终端进行测试。我可以使用`file://`path 参数进行连接，但无法使用`svn+ssh://username@localhost/MyProject`.

我知道我可以通过 ssh 连接并且错误是“未找到存储库”。我猜我需要一条不同的路径，但我读过的所有 Mac OS 文章都只讲述了如何在主机上设置它，而不是通过 LAN 或外部使用。

非常感谢任何想法或想法。作为我在下面采取的步骤的参考，是我正在使用的文章的一些链接。

*   [http://www.midwinter-dg.com/permalink-how_to_use_subversion_version_control_with_coda_on_the_mac_2010-11-18.html](http://www.midwinter-dg.com/permalink-how_to_use_subversion_version_control_with_coda_on_the_mac_2010-11-18.html)

*   [http://www.rubyrobot.org/tutorial/subversion-with-mac-os-x](http://www.rubyrobot.org/tutorial/subversion-with-mac-os-x)

*   [http://svn-ref.assembla.com/subversion-server-guide-mac-os.html](http://svn-ref.assembla.com/subversion-server-guide-mac-os.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T03:32:06.677

首先，确保您的 Mac 防火墙没有阻止您。您可以通过`ssh`从另一个系统远程登录到您的系统吗？如果没有，请转到*System Preferences*，选择*Security and Privacy*首选项，然后选择*Firewall*。您需要单击*高级...*按钮。

在那里，确保*远程登录 (SSH)*通过防火墙处于活动状态。

一旦您允许`ssh`访问您的 Mac，您需要确保您已`svn+ssh`正确设置。尝试从您自己的 Mac 访问存储库，`svn+ssh://`而不是通过`file://`. 如果您不能这样做，则说明您没有`svn+ssh`正确设置。

设置要使用`svn+ssh`的 Subversion 是访问 Subversion 存储库的四种方法中最棘手的一种。与`svn://`and不同`http://`，存储库服务器在用户登录到您的系统之前不会运行。

当用户连接 vis`svn+ssh`时，他们会立即启动`svnserve`以访问 Subversion 存储库（这是 的`svn`一部分`svn+ssh`）。

因为以访问存储库`svnserve`的用户身份运行，所以`ssh`在物理存储库目录中创建的每个目录和文件都将归该用户所有。因此，您需要确保有权访问该存储库的所有用户都在同一个主组中，**并且**在 Subversion 存储库目录中创建的任何文件或目录都可由该组读取/写入。

为了确保这一点，您需要采取以下步骤：

*   确保有权访问您的 Subversion 存储库的所有 Mac 用户都具有相同的主要组。*您可以使用“用户和组*”偏好设置面板在 Mac 中创建一个组。在创建新用户时单击*+* ，但从下拉列表中选择*组。*将要登录的每个人都放在这个组中。
*   创建 Subversion 存储库时
    *   通过命令确保存储库目录树中的所有文件和目录*都归*Subversion 组所有`chgrp`。
    *   使用该`chmod`命令确保整个目录树可由该 Subversion 组读取/写入。
*   您需要将每个用户的设置`umask`为`002`or`0002`而不是默认的`022`or `0022`。这样，当用户在存储库中创建新目录或文件时，该组中的任何其他用户都可以对其进行读写。否则，一个用户将创建更改，但其他用户将无法进行修改。

从在线[Subversion 手册](http://svnbook.red-bean.com)中查看这些链接：

*   [SSH 配置技巧](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.svnserve.html#svn.serverconfig.svnserve.sshtricks)
*   [SSH 上的 Svnserve 和隧道](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.svnserve.html#svn.serverconfig.svnserve.sshtricks)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T00:02:05.273

是的，我正在添加另一个答案...

[您可能想尝试使用Assembla](https://www.assembla.com/one_page_signup/free-private-subversion-repository-only)之类的第三方服务器，而不是在 Mac 上尝试。这将使每个人都可以访问，而无需使您的个人计算机成为需要 24/7/365 全天候运行的服务器。

# jquery - jQuery 淡入/淡出 onclick for a li

> ID：10567302
> 
> 赞同：1
> 
> 时间：2012-05-12T20:47:36.340
> 
> 标签：jquery, css, html

我正在设置一个服务部分。每个部分 id 都有自己的一组 li。我想把 li 隐藏起来，display:none; 并淡入 onclick/淡出 onclick。使用我当前的标记和样式编写此函数的 js 时遇到问题。

html -

```
<div id="small-container" class="services">
                    <nav id="services-sections">
                        <a class="active" href="#/one" id="nav-one">One</a>
                        <a href="#/two" id="nav-two">Two</a>
                        <a href="#/three" id="nav-three">Three</a>
                        <a href="#/four" id="nav-four">Four</a>
                        <a href="#/five" id="nav-five">Five</a>
                    </nav>
                    <article id="section-one" class="services-content">
                        <ul class="services">
                            <li class="service-item">One - one </li>
                            <li class="service-item">One - two </li>
                            <li class="service-item">One - three </li>
                        </ul>
                    </article>
                    <article id="section-two" class="services-content">
                        <ul class="services">
                            <li class="service-item">Two - one </li>
                            <li class="service-item">Two - two </li>
                            <li class="service-item">Two - three </li>
                        </ul>
                    </article>
                    <article id="section-three" class="services-content">
                        <ul class="services">
                            <li class="service-item">Three - one </li>
                            <li class="service-item">Three - two </li>
                            <li class="service-item">Three - three </li>
                        </ul>
                    </article>
                    <article id="section-four" class="services-content">
                        <ul class="services">
                            <li class="service-item">Four - one </li>
                            <li class="service-item">Four - two </li>
                            <li class="service-item">Four - three </li>
                        </ul>
                    </article>
                    <article id="section-five" class="services-content">
                        <ul class="services">
                            <li class="service-item">Five - one </li>
                            <li class="service-item">Five - two </li>
                            <li class="service-item">Five - three</li>
                        </ul>
                    </article>
                </div> 
```

CSS -

```
#small-container { float: left; width: 240px; color: #000; font-family: Arial, Helvetica, sans-serif; }
        #small-container.services { width: 350px; }
        #services-sections a { text-decoration: none;  text-transform: none; font-weight: bold; font-size: 1em; margin-right: 12px; margin-bottom: 10px; display: inline-block; color: #222; }
        #services-sections a:hover, #services-sections a.active { color: #AAA; }
        .services-content { display: ; position: relative;  }
        .services-content.active { display: inline-block; }
        .services { list-style-position: inside; list-style: none; }
        .services { *list-style: none; }
        .services.active {}
        .service-item { text-indent: -15px; padding-left: 6px; margin-bottom: 12px; font-size: 12px; cursor: default; }
        .ie8 .service-item { text-indent: -22px; }
        .ie7 .service-item { text-indent: -18px; padding-left: 20px; } 
```

任何帮助，将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T20:51:51.410

```
$("#services-sections > a").click(function () {
    $("#section-" + this.id.split("-")[1]).fadeToggle();
}); 
```

[**演示。**](http://jsfiddle.net/FfcRF/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T20:51:55.473

```
$('ul.services li').click(function(){
   $(this).fadeOut(function(){$(this).fadeIn();});
}) 
```

# php - 为什么我的 twitter 应用程序访问级别是只读的？我该如何改变呢？

> ID：10567305
> 
> 赞同：1
> 
> 时间：2012-05-12T20:47:59.290
> 
> 标签：php, twitter

在详细信息页面的底部有（您的访问令牌）部分，那里的访问级别是只读的。

我正在尝试制作一个应用程序，让我关注所有使用 twitter 登录我的网站的用户，我成功地让用户关注我，但我无法关注用户，知道为什么，以及如何更改我自己的 Twitter 帐户的访问级别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T20:50:58.993

1.  访问 dev.twitter.com/apps
2.  选择您的应用
3.  转到设置选项卡
4.  查找“应用程序类型”
5.  将其更改为读写

## 更新

您还需要更新您的访问令牌：

1.  转到您的应用详细信息页面
2.  单击重新创建访问令牌按钮

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2022-01-05T00:34:21.583

Twitter 开发人员门户中不再存在“应用程序类型”部分。要更改应用程序的权限，请执行以下步骤：

1.  去 dev.twitter.com/apps。
2.  选择您的应用程序。
3.  转到“设置”选项卡。
4.  转到底部的“用户身份验证设置”部分。
5.  添加身份验证。添加时，请确保**选择 OAuth 1.0a**。如果不选择此选项，您的所有访问令牌都将是`Read-only`.
6.  选择“OAuth 10.a”后，将出现一个名为“OAUTH 1.0A SETTINGS”的新表单部分。在此部分中，在“应用程序权限”字段中选择您希望拥有的权限。
7.  填写其余字段（回调 URL、网站 URL 等）。
8.  提交表格。
9.  转到应用程序详细信息页面上的“密钥和令牌”选项卡。
10.  找到“身份验证令牌”部分，其中的“访问令牌和秘密”组。
11.  单击“添加”/“重新生成”。

您的访问令牌现在将具有您在“OAUTH 1.0A 设置”字段中指定的权限。

# .net - 在 Windows XP SP3 上安装 .net MVC 3

> ID：10567306
> 
> 赞同：1
> 
> 时间：2012-05-12T20:48:25.043
> 
> 标签：.net, asp.net-mvc-3

我已经在我的电脑（WinXP SP3）上安装了 Visual Studio 2010。我正在尝试安装 .net MVC 3。

几分钟后，安装程序说它已安装。 ![在此处输入图像描述](../Images/a8eb07392a5bbb4db91d6d1ce22fbcf8.png)

但它不会出现在已安装的项目模板上。 ![在此处输入图像描述](../Images/0a34471ba5592d76fdc8cb558ce48c5c.png) 我该如何解决这个问题。?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T20:51:15.170

**将DotNet 框架**更改为 4.0并查看，您将在那里看到 MVC3 项目。

![在此处输入图像描述](../Images/06dacb0bace204b4c9f3967fc5fef79f.png)

# python - 自定义 ManyToManyField 的 Django 模型预保存

> ID：10567310
> 
> 赞同：1
> 
> 时间：2012-05-12T20:48:49.163
> 
> 标签：python, django, django-models, django-forms

我有一个具有多对多关系的模型。在一个`pre_save`信号中，我想预处理实例数据：

```
@receiver(pre_save, sender=Book)
def pre_save_tags(sender, instance, **kwargs):
    # tags is a many-to-many relation
    print instance.tags 
```

`tags`设置在一个`SelectMultiple`字段中。因此，它具有多个值。

## 问题

```
ValueError: 'Book' instance needs to have a primary key value before a many-to-many relationship can be used. 
```

1.  如何获取尚未保存的实例的标签？
2.  如何在保存之前更改标签？

我不限于`pre_save`。如果有更好的解决方案，我会全力以赴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T22:16:06.033

发生这种情况是因为对象是新的，并且尚未保存。因为它没有主键。如果您保存以前保存过的对象，则不应发生此错误。

为什么不使用 post_save。在 post_save 中，对象已被保存，因此具有主键。如果你必须使用 pre_save 你可以检查 instance.id 是否存在。如果它不存在，则不能有任何标签（因为对象必须有一个主 id 才能使 ManyToMany-fields 工作（因此例外））

要测试主键，您可以执行以下操作：

```
@receiver(pre_save, sender=Book)
def pre_save_tags(sender, instance, **kwargs):
    # tags is a many-to-many relation
    if instance.id:
        print instance.tags 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T23:17:06.053

知道了。我相信还有更优雅的方法。如果您知道如何改进代码，请给我一些指示或提供更好的解决方案：

```
class ManyToManyTagField(ManyToManyField):

    def formfield(self, **kwargs):
        defaults = {
            'form_class': TagField,
        }
        return super(ManyToManyTagField, self).formfield(**defaults)

    def save_form_data(self, instance, data):
        tags = []
        for tag_id in data:
            autocompletedTag = tag_id.find('___')
            if autocompletedTag > 0:
                parts = tag_id.split('___')
                tags.append(parts[0])
            else:
                newTag = Tag(name=tag_id, category=TagCategory.objects.get(name='New'))
                newTag.save()
                tags.append(newTag.id)

        return super(ManyToManyTagField, self).save_form_data(instance, tags) 
```

相关部分是方法`save_form_data`。

这里是其他类，只是为了完整起见。

标签小部件：

```
class TagWidget(SelectMultiple):
    """
    Widget for Tag input fields.
    """
    queryset = []

    def render(self, name, value, attrs=None):
        final_attrs = self.build_attrs(attrs, name=name)
        final_attrs['class'] = 'tag-input'

        selectedTags = []
        if value:
            for tag_id in value:
                if isinstance(tag_id, (int, long)) or tag_id.isdigit():
                    tag_name = Tag.objects.get(pk=tag_id).name
                    selectedTags.append({ 'value': str(tag_id) + '___' + tag_name, 'label': tag_name })
                else:
                    autocompletedTag = tag_id.find('___')
                    if autocompletedTag > 0:
                        parts = tag_id.split('___')
                        selectedTags.append({ 'value': parts[0] + '___' + parts[1], 'label': parts[1] })
                    else:
                        selectedTags.append({ 'value': tag_id, 'label': tag_id })

        allTags = []
        for tag in self.queryset:
            allTags.append({ 'value': str(tag.id) + '___' + str(tag.name), 'label': str(tag.name) });

        allTagsJson = simplejson.dumps(allTags)

        return render_to_string('form/tagwidget.html',
                                {'attrs': flatatt(final_attrs), 'selectedTags': selectedTags, 'allTags': allTagsJson}) 
```

标签字段：

```
class TagField(ModelMultipleChoiceField):
    widget = TagWidget

    def __init__(self, queryset, *args, **kwargs):
        self.widget.queryset = queryset
        super(TagField, self).__init__(queryset, *args, **kwargs)

    def clean(self, value):
        if self.required and not value:
            raise ValidationError(self.error_messages['required'])
        elif not self.required and not value:
            return []
        if not isinstance(value, (list, tuple)):
            raise ValidationError(self.error_messages['list'])
        # Since this overrides the inherited ModelChoiceField.clean
        # we run custom validators here
        self.run_validators(value)
        return value 
```

标签小部件.html：

```
{% autoescape off %}
<ul{{ attrs }}>
{% for tag in selectedTags %}
    <li tagValue="{{ tag.value }}">{{ tag.label }}</li>
{% endfor %}
</ul>
<script type="text/javascript">
var autocompletionData = {{ allTags }};
</script>
{% endautoescape %} 
```

# blackberry - 从 AppWorld 更新应用程序后是否保留 PersistentStore\PersistentObject 数据

> ID：10567318
> 
> 赞同：2
> 
> 时间：2012-05-12T20:49:41.040
> 
> 标签：blackberry, java-me, appworld

我想知道`PersistentObject\PersistentStore`更新应用程序版本后存储的数据是否仍然存在。

我的用例：

1) 发布 0.1 版本的应用程序。用户将数据保存到 PersistentObject\PersistentStore

2) 发布 0.2 版本的应用程序。

**在 0.1 版本中保存到 PersistentStore\PersistentObject 中的数据是否可用于 0.2 版本的应用程序？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T19:27:01.637

是的，只要持久化的类没有任何结构变化，它就仍然可用。这意味着如果您希望保留持久数据，则不能在版本之间添加或删除字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T00:46:07.510

我发现确保在更新应用程序时顺利运行的最佳方法是将所有持久数据存储在哈希表中。每条数据将由一个字符串**key**存储。您通过该字符串键检索值。新版本的应用程序能够添加新的持久数据，只需添加对象，使用新的字符串键。

[正如迈克尔警告说](https://stackoverflow.com/a/10574547/119114)的那样，这使您可以在未来获得一些灵活性，同时不会对持久类的基本格式进行更改时遇到问题。您的数据将**始终**在一个持久化的`Hashtable`.

如果您想确保在删除应用程序时删除持久数据，请使用应用程序*包*独有的哈希表容器：

```
package com.mycompany.myapp;

import net.rim.device.api.util.Persistable;
import java.util.Hashtable;

public class Preferences extends Hashtable implements Persistable { 
```

例如，此类的一个实例`Preferences`是您将传递给`PersistentObject#setContents()`.

如果您**不想**删除持久数据，那么只需使用标准`java.util.Hashtable`作为所有数据的容器。

# zend-framework - Zend_controller_request_Asbtract URL 没有改变

> ID：10567320
> 
> 赞同：0
> 
> 时间：2012-05-12T20:50:06.480
> 
> 标签：zend-framework, url, request, zend-controller

我正在使用下面的代码使 ACL 不允许角色重定向到特定页面，问题是通过将用户路由到所需页面但不更改 URL 可以正常工作。所以让我们假设一个用户试图在没有登录的情况下进入管理索引页面 (localhost/Admin)，ACL 插件会将用户路由到登录页面但不更改 URL (localhost/Admin/Login)。任何想法为什么会这样？

```
class Hyderlib_Controller_Plugin_AccessCheck extends Zend_Controller_Plugin_Abstract {

    private $_acl = null;
    private $_auth = null;

    public function __construct(Zend_Acl $acl, Zend_Auth $auth) {
        $this->_acl = $acl;
        $this->auth = $auth;
    }

    public function preDispatch(Zend_Controller_Request_Abstract $request) {
        $module = $request->getModuleName();
        $recourse = $request->getControllerName();
        $action = $request->getActionName();

        $identity = $this->auth->getStorage()->read();

        if (!isset($identity)) {

            $role = 'default';
        } else {
            $db = Zend_Db_Table::getDefaultAdapter();
            $Role = $db->select()->from('User_Account')->where('Email = ?', $identity);
            $result = $db->fetchRow($Role);
            $role = $result['Role'];
        }

        if (!$this->_acl->isAllowed($role, $module, $recourse, $action)) {

            $request->setModuleName('Admin')
                    ->setControllerName('Login')
                    ->setActionName('index');
        }

        //$role = $identity->Role;
    }

} 
```

我提供了整个代码来显示下面的代码在 preDispatch 中的 zend 控制器插件中使用，如果这有什么不同的话。

```
$request->setModuleName('Admin')
                        ->setControllerName('Login')
                        ->setActionName('index'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T04:38:37.777

Url 没有改变，因为它是 ZF MVC 的内部重定向。但这是一件好事，因为如果您按照上面大卫的回答进行操作，那么如果甚至不允许用户执行管理模块登录控制器的索引操作，那么他将陷入重定向的无限循环。

内部重定向的另一个优点是，当用户成功登录时，您可以将他重定向到他实际想要访问的网址，只需通过

```
$this->redirect($_SERVER['REQUEST_URI'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T23:30:15.343

如果您希望浏览器位置栏中的 url 改变，您需要重定向（即，将这些标头发送到浏览器），而不是转发（即，只需修改`$request`服务器端的对象）。

所以，而不是：

```
$request->setModuleName('Admin')
        ->setControllerName('Login')
        ->setActionName('index'); 
```

尝试：

```
$redirector = Zend_Controller_Action_HelperBroker::getStaticHelper('redirector');
$redirector->gotoSimpleAndExit('index', 'Login', 'Admin'); 
```

# matrix - Floyd/Warshall Algorithm mod 在最大长度 k 处找到最便宜的路径

> ID：10567321
> 
> 赞同：4
> 
> 时间：2012-05-12T20:50:14.780
> 
> 标签：matrix, shortest-path, floyd-warshall

我正在编辑弗洛伊德的算法，所以不是每个 Dk，其中 k 是最高中间顶点，k 是最大路径长度。最终它将具有与 Floyd 相同的输出，但每个子迭代都可能不同。例如，如果有 4 个顶点：0、1、2、3，我想找到从 0 到 3 的最大长度为 K 的最便宜的路径。假设该图是有向的。

因此，如果 k=2，那么我只能检查 0->3...0->1->3...0->2->3，其中每个箭头都表示一条边/路径。如果 k=3，那么我只能检查 0->3...0->1->3...0->1->2->3...0->2->3... 0->2->1->3，等等……

```
 0   1   2   3
0   0   4   9   12
1   9   0   3   11   // the adj matrix I'm referencing for 1 example
2   9   10  0   2
3   1   99  6   0 
```

除了弗洛伊德的算法，我需要帮助理解其中的实现，并且不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-24T14:00:51.423

这是您的问题的示例 C++ 代码：

```
#define INF 100000005

using namespace std;

int main()
{
   int i,j,k,n,m,ver,edg,len,from,to;
   int mat[10][10][10],next[10][10][10];
   cin>>ver;
   for(i=0;i<ver;i++)
   {
       for(j=0;j<ver;j++)
       {
           for(k=0;k<ver;k++)
            {
                mat[i][j][k]=INF;
                next[i][j][k]=j;
            }
       }
   }
   for(i=0;i<ver;i++)
   {

       for(j=0;j<ver;j++)
       {
           cin>>mat[i][j][1];
       }
   }
   for(len=2;len<ver;len++)
   {
       for(k=0;k<ver;k++)
       {
           for(i=0;i<ver;i++)
           {
               for(j=0;j<ver;j++)
               {
                   if(mat[i][k][len-1]+mat[k][j][1]<mat[i][j][len])
                   {
                       mat[i][j][len]=mat[i][k][len-1]+mat[k][j][1];
                       next[i][j][len]=next[i][k][len-1];
                   }
               }
           }
       }
   }
   if(mat[0][3][3]!=INF)
   {
       cout<<"Minimum Cost from 0 to 3,using exactly 3 pathlen is: "<<mat[0][3][3]<<endl;
       from=0;
       to=3;
       len=3;
       cout<<from;
       while(from!=to)
       {
           from=next[from][to][len--];
           cout<<"-->"<<from;
       }
   }
   else
       cout<<"No path"<<endl;
}
```

# c# - 获取在 SQL Server 实例/数据库中执行的查询和过程的列表

> ID：10567323
> 
> 赞同：0
> 
> 时间：2012-05-12T20:50:43.750
> 
> 标签：c#, asp.net, sql, sql-server, sql-server-2008

如何获取 SQL Server 2008 实例上正在发生的事情的列表？

我想知道哪些查询和程序已被执行。一个优点是知道他们花了多少时间。

此活动列表必须独立于触发它的“谁”或“什么”。它可以来自多个应用程序和多个用户。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:16:20.820

## 选项1

```
SELECT ObjectName,       
ObjectID,       
DatabaseName,       
StartTime,       
EventClass,       
EventSubClass,       
ObjectType,       
ServerName,       
LoginName,       
NTUserName,       
ApplicationName  
FROM ::fn_trace_gettable( 'Trace File Path', default )            
where EventClass in (46,47,164) and EventSubclass = 0  and DatabaseID = db_id(); 
```

## 您将如何获得跟踪文件路径？

```
SELECT Path FROM sys.traces where is_default = 1 ; 
```

## 选项 #2

## **[这种方法将告诉添加了哪一列，或者使用了什么命令添加](http://sqlandme.com/tag/schema-changes/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T08:28:16.600

我知道这是一个较旧的帖子，但我刚刚找到它。如果到目前为止审计做到了你想要的那么好。但是您尝试过**SQL Profiler**吗？因为这肯定是因为这个原因：检查 SQL Server 实例上发生的确切情况。您可以将结果保存到表格中以供进一步分析。（您甚至可以将其与 Windows 性能监视器的结果结合起来，然后您可以检查在此期间服务器上发生的情况）

# php - 使用 JQuery Ajax 更新数据库的点赞数

> ID：10567324
> 
> 赞同：2
> 
> 时间：2012-05-12T20:50:52.453
> 
> 标签：php, jquery, mysql, ajax

我在我的 HTML 中使用以下代码。当用户点击它时，它会尝试更新每条评论的喜欢和不喜欢的数量。这是它的jquery部分。

```
<script type="text/JavaScript">
$(document).ready(function(){
$("#likes").click(function(){
  $updateLikes();
 });
$("#dislikes").click(function(){
$updateDislikes();
});

function rate(){ //'rating' VARIABLE FROM THE FORM in view.php
var the_id = $("#id").val(); //'id' OF THE CONTENT BEING RATED
var data = 'noLikes='+$noLikes+'&id='+the_id;

$.ajax({
    type: 'POST',
    url: 'rate.php', //POSTS FORM TO THIS FILE
    data: data,
    success: function(e){
        $("#id").html(e); //REPLACES THE TEXT OF view.php
        }
    });
}

function rate(){
    var the_id = $("#id").val(); //'id' OF THE CONTENT BEING RATED
var data = 'noDislikes='+$noDisikes+'&id='+the_id;

$.ajax({
    type: 'POST',
    url: 'dislikes.php', //POSTS FORM TO THIS FILE
    data: data,
    success: function(e){
        $("#id").html(e); //REPLACES THE TEXT OF view.php
        }
    });
} 
```

 });

html部分在这里：

```
 $getreviewresults = $mysqli->query("SELECT companyReviewed, reviewID, majorName, gpa,
 noLikes, noDislikes, dayAtWork FROM reviews NATURAL JOIN usersPosted NATURAL JOIN users 
 NATURAL JOIN majorOfUser NATURAL JOIN majors");
 <table class="table-ReviewResults">
    <tr>
        <td rowspan="2" class="viewReviewLink"><a href="review.php">View Review</a>     </td>
        <td class="schoolInfo">
    <?php
        print('COMPANY:&nbsp;&nbsp;<span class="resultData">'.$reviewitem['companyReviewed'].'</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');
        print('MAJOR:&nbsp;&nbsp;<span class="resultData">'.$reviewitem['majorName'].'</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');
        print('GPA RANGE:&nbsp;&nbsp;<span class="resultData">'.$reviewitem['gpa'].'</span>');
    ?>
        </td>
        <td rowspan="2" class="reviewRatingsNumbers">
    <?php
        $q = $mysqli->query("SELECT noLikes FROM reviews WHERE id='".$reviewitem['reviewID']);
        $likes['reviewID'] = $mysqli->num_rows($q);
        $p = $mysqli->query("SELECT noDislikes FROM reviews WHERE id='".$reviewitem['reviewID']);
        $dislikes['reviewID'] = $mysqli->num_rows($p);

        $l = 'likes';
        $d = 'dislikes';
        if($likes==1){
            $l = 'like';
        }
        if($dislikes==1){
            $d = 'dislike';
        }

        //THE NUMBER OF LIKES & DISLIKES
        print('<img id="likes'.$reviewitem['reviewID'].'" onClick="rate($(this).attr(\'id\'))" src="images/rateReview2-up.jpg">
            <img id="dislikes'.$reviewitem['reviewID'].'" onClick="rate($(this).attr(\'id\'))" src="images/rateReview2-down.jpg"><br />');
        print($likes.' '.$l.' and '.$dislikes.' '.$d); 
```

我不确定如何创建 likes.php 和 dislikes.php 文件，这些文件将更新喜欢和不喜欢的数量，并使用 AJAX 将它们发送到当前页面，以便可以更新它们。另外，我不确定我的做法是否正确，因为我以前没有使用过 JQuery。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:23:34.373

likes.php 和 dislikes.php 文件可以很简单，如下所示：

```
<?php
    $clickedId = $_POST["id"];

    $numberOfLikes = updateLikes($clickedId);

    echo $numberOfLikes;

    function updateLikes($id)
    {
        // run UPDATE likes query

        // run SELECT numberOfLikes query

        return $numberOfLikes;
    }
?> 
```

AJAX 函数的成功部分将接收`numberOfLikes`从 PHP 回显的变量，并根据您的代码将其放在带有`id="id"`.

但是请注意，您的 jQuery 与您发布的代码中的 HTML 不匹配。

在 HTML 中，您会得到带有 id 的图像，`likes`并且`dislikes`每个图像都附加有被评分项目的 ID。这很好，因为元素 ID 必须是唯一的。

但是，基于这些链接，您需要为每个图像添加一个类，以便更轻松地设置点击事件。

假设一对喜欢/不喜欢的图像最终是这样的：

```
<img id="likes17" 
     class="rate-like"
     src="images/rateReview2-up.jpg">

<img id="dislikes17" 
     class="rate-dislike"
     src="images/rateReview2-down.jpg"> 
```

[格式清晰]

这会将类似图像的点击事件设置更改为以下内容：

```
$(".rate-like").click(function() {
    var elementId = $(this).attr('id');  // would be 'likes17' based on image above
    var clickedItemId = elementId.replace('likes', '');
    updateLikes(clickedItemId);
}); 
```

updateLikes 函数看起来像这样：

```
function updateLikes(id)
{
    $.ajax({
        type: 'POST',
        url: 'likes.php',
        data: 'id=' + id,
        success: function(data){
            $('#likes' + id).html(data);
        },
        error: function(xhr, textStatus, errorThrown) {
            var errorMessage = xhr.responseText;
            errorMessage = errorMessage.substring(errorMessage.indexOf('<title>') + 7, errorMessage.indexOf('</title>'));
            alert('Unable to update likes: ' + errorMessage);
        }
    });
} 
```

希望这一切对您来说都有意义，但请随时在评论中发布您对此答案可能有的任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T22:18:45.017

第一步是在 DOM 中访问喜欢、不喜欢和评论 ID 的数量。例如这样的事情：

```
Likes: <span id='likes_count'>$likes</span>
Dislikes: <span id='dislikes_count'>$dislikes</span>
<span style='display: none;' id='review_id'>$reviewitem['reviewID']</span> 
```

现在，当您进行 AJAX 调用时，可以引用这些值。

```
$("#likes").click(function(){
    $.post('updateLikes.php?reviewid=' + $("#review_id").text(), function() {
        // TODO check whether successful
        // increment # of likes and display
        var current_likes = parseInt($("#likes_count").text());
        $("#likes_count").text(current_likes++);
    });
}); 
```

（不喜欢也一样。）最后一步是实现“updateLikes.php”，它基本上应该只运行 SQL 更新并返回成功/失败。

```
$q = $mysqli->query("UPDATE reviews SET noLikes = noLikes + 1 WHERE id=".$_GET['reviewid']);
// TODO return indication of success/failure 
```

# java - 使用 Maven、OSGi 和 Bndtools

> ID：10567325
> 
> 赞同：10
> 
> 时间：2012-05-12T20:50:56.683
> 
> 标签：java, maven, osgi, bndtools

今天有人问我在我们当前的 OSGi 应用程序中使用 Maven 是否是一个好主意。我们使用了 Bndtools，它很棒，因为它使开发尽可能简单。即使在应用程序运行期间，Bndtools 也使用 OBR 来维护其他包和依赖项解析。

由于 Maven 广泛传播并且如此受欢迎，因此大多数人都尝试在 OSGi 环境中使用它。对我来说，这是两种不同的方法。OSGi 有自己的依赖声明，MANIFEST.MF 和 Maven 一个 pom，您可以在其中声明它们。所以如果你同时使用它们，你将声明依赖两次。当然，您可以使用 Apache OSGi Maven 插件来避免它，Maven 负责创建 MANIFEST.MF。但是 Maven 存储库并不真正关心捆绑包。因此，您可能会引用非捆绑 jar。

当然，使用 Maven 也有好处，但是将它与 OSGi 或特别与 Bndtools 结合真的是一件好事吗？

有人可以提供优点或缺点！有人使用这两种方法的实际经验吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T09:36:13.310

我认为，如果您所做的几乎所有事情都以 Maven 为中心，那么 Apache Felix Maven 插件（顺便说一下，也是基于 BND）是要走的路。

否则，如果您想使用 Maven 但扮演一个不太重要的角色，[Eclipse Tycho](http://www.eclipse.org/tycho/)会很有意义。Tycho 是一组 Maven 插件。

使用 Tycho，您将目标平台从 Eclipse 提供给 Maven，然后它可以通过查看您的 MANIFEST 和目标平台来解析所有捆绑包。pom.xml 文件对于 Tycho 项目非常简单，因为它们不包含您的依赖项。

Tycho 显然非常以 Eclipse 为中心。如果您不使用 eclipse，我认为这没有多大意义，但有时将其合并到现有项目中会更容易。

无论哪种方式，您仍然可以使用 Apache Felix Maven 插件在部署阶段生成 OBR 元数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T20:55:07.157

我认为在 OSGi 项目中使用 Maven 效果很好。您可以使用[Felix Maven BND 插件](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html)让您的生活更轻松。有了这个，maven 可以在本地（或远程）maven 存储库中自动生成 OBR 元数据。这使您也可以将 Maven 存储库视为 OBR。它使 OSGi 项目的工作流程与其他项目相同，并且一切都非常无缝且相当易于使用。

我们在工作中使用它，而 Maven 确实让事情变得更容易使用。例如，我们使用 Maven 生成 Eclipse 项目文件，在 CI 服务器上运行自动构建，并创建 OBR 元数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-19T02:17:47.443

对于现在提出这个问题的人来说，距离最初提出这个问题已经过去了很长时间。上面 Neil Bartlett 提到的 Maven 工作已经成熟，现在 Bnd/Bndtools 和 Maven 之间有很好的集成，包括一个用于 Eclipse/Bndtools 的 m2e 连接器。

Neil 与 Tim Ward 共同创作了一个幻灯片：

[https://www.slideshare.net/mfrancis/bndtools-and-maven-a-brave-new-world-n-bartlett-t-ward](https://www.slideshare.net/mfrancis/bndtools-and-maven-a-brave-new-world-n-bartlett-t-ward)

# c - SOCK_RAW 数据包不使用特定源地址发送

> ID：10567328
> 
> 赞同：1
> 
> 时间：2012-05-12T20:51:18.100
> 
> 标签：c, sockets, ip

我正在开发一个类似 netcat 的工具（主要用于自学）。我想发送带有我通过`SOCK_RAW`套接字构建的 IP 和 UDP 标头的数据包。我在 Debian VM 上运行以下代码以通过套接字发送数据包。

```
/* header must already have source IP, destination IP, and protocol number filled in */
int send_ip_packet(ipheader_t *header, char *buf, int numbytes)
{
    int sizeofpacket = sizeof(ipheader_t) + numbytes;
    if(sizeofpacket > MAX_PCKT_LEN)
    {
        printf("Cannot send ip packet of len %i. Too large. - FAIL\n", sizeofpacket);
        return -1;
    }

    /* open a raw socket */
    int sd;
    sd = socket(PF_INET, SOCK_RAW, header->ip_p);
    if(sd < 0)
    {
        perror("socket()");
        printf("socket() call - FAIL\n");
        return -1;
    }
    else
    {
        printf("socket() call - SUCCESS\n");
    }

    char packet[sizeofpacket];
    memset(packet, 0, sizeofpacket);

    /* set remaining ip header */
    header->ip_hl = 5; /* header length is 5 32-bit octets */
    header->ip_v = 4; /* IPv4 */
    header->ip_tos = 16; /* low delay */
    header->ip_len = sizeofpacket;
    header->ip_id = htons(54321); /* identifier used for fragmentation */
    header->ip_off = 0; /* fragmentation options */
    header->ip_ttl = 64; /* max num hops */
    header->ip_sum = csum((unsigned short*)packet, sizeofpacket);

    /* fill packet */
    memcpy(packet, (char*) header, sizeof(ipheader_t));
    memcpy(packet + sizeof(ipheader_t), (char*) buf, numbytes);

    /* setup socket addresses */
    struct sockaddr_in sin, din;
    sin.sin_family = AF_INET;
    din.sin_family = AF_INET;
    memcpy(&sin.sin_addr.s_addr, &header->ip_src, sizeof(in_addr_t));
    memcpy(&din.sin_addr.s_addr, &header->ip_dst, sizeof(in_addr_t));

    /* send out the packet */
    int one = 1;
    int *val = &one;
    if(setsockopt(sd, IPPROTO_IP, IP_HDRINCL, val, sizeof(one)))
    {
        perror("setsockopt()");
        printf("setsockopt() call - FAIL\n");
        return -1;
    }
    else
    {
        printf("setsockopt() call - SUCCESS\n");
    }

    if(sendto(sd, packet, header->ip_len, 0, (struct sockaddr *) &sin, sizeof(sin)) < 0)
    {
        perror("sendto()");
        printf("sendto() call - FAIL\n");
        return -1;
    }
    else
    {
        printf("Message sent! - SUCCESS\n");
    }

    return 0;
} 
```

只要我提供的源 IP 不是在我运行时列为我的“真实”IP，代码就成功发送了一个在 Wireshark 中可见的数据包`ifconfig`。谁能告诉我为什么会这样或者我可以如何解决它（除了不使用`SOCK_RAW`）？我会假设操作系统正在特别处理数据包，但为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:01:46.700

`sendto()`期望目标地址作为第 5 个参数。

根据 OP 中给出的变量命名，我强烈假设源地址已传入，这将完美地解释所描述的行为。

# vb.net - 从 hDC 创建图形导致算术运算溢出

> ID：10567329
> 
> 赞同：0
> 
> 时间：2012-05-12T20:51:27.080
> 
> 标签：vb.net, winapi

我尝试使用 WinAPI 而不是 (System.Drawing.Printing.PrintDocument) 来准备打印文档，因为 Graphic.DrawString 无法正确呈现高棉 Unicode。只有 TextRendering.DrawText 正确呈现它。我相信 Graphic 是 GDI+ 包装器，而 TextRendering.DrawText 使用的是 GDI。此外，PrintDocument 不适用于 TextRendering.DrawText。

```
Private Declare Function CreateDC Lib "gdi32" Alias "CreateDCA" _
(ByVal lpDriverName As String, ByVal lpDeviceName As String, _
 ByVal lpOutput As String, ByVal lpInitData As DEVMODE) As Long
Private Declare Function EndDoc Lib "gdi32" (ByVal hdc As Long) As Long
Private Declare Function StartDoc Lib "gdi32" Alias "StartDocA" (ByVal hdc As Long, ByVal lpdi As DOCINFO) As Long
Private Declare Function StartPage Lib "gdi32" (ByVal hdc As Long) As Long
Private Declare Function EndPage Lib "gdi32" (ByVal hdc As Long) As Long

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    '' Getting Printer hDC
    Dim printHandler As Long = CreateDC(Nothing, "Send To OneNote 2010", Nothing, Nothing)
    Dim docInfo As New DOCINFO
    docInfo.cbSize = Len(docInfo)
    docInfo.lpszDatatype = Nothing
    docInfo.lpszOutput = Nothing
    docInfo.lpszDocName = "Testing"

    StartDoc(printHandler, docInfo)
    StartPage(printHandler)

    Dim g As Graphics = Graphics.FromHdc(printHandler)
    TextRenderer.DrawText(g, "Hello World", Me.Font, New Point(10, 10), Color.Black)

    EndPage(printHandler)
    EndDoc(printHandler)
End Sub 
```

这是我的尝试。它在这行代码上失败：`Dim g As Graphics = Graphics.FromHdc(printHandler)`. 看起来 Long 是 64 位，而 IntPtr 是 32 位。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T09:49:08.347

对于 VB.NET，您的所有 P/Invoke 定义都是错误的。您显然已经从面向 VB 6 的项目或网站中复制了它们，但是很多事情已经随着 .NET 发生了变化。

正确的定义如下：

```
<DllImport("gdi32.dll", SetLastError:=False, CharSet:=CharSet.Auto)> _
Private Shared Function CreateDC(lpszDriver As String, _
                                 lpszDevice As String, _
                                 lpszOutput As IntPtr, _
                                 ByRef lpInitData As DEVMODE) As IntPtr
End Function

<DllImport("gdi32.dll", SetLastError:=False)> _
Private Shared Function EndDoc(hdc As IntPtr) As Integer
End Function

<DllImport("gdi32.dll", SetLastError:=False)> _
Private Shared Function StartDoc(hdc As IntPtr, ByRef lpdi As DOCINFO) As Integer
End Function

<DllImport("gdi32.dll", SetLastError:=False)> _
Private Shared Function StartPage(hdc As IntPtr) As Integer
End Function

<DllImport("gdi32.dll", SetLastError:=False)> _
Private Shared Function EndPage(hdc As IntPtr) As Integer
End Function 
```

您对`DEVMODE`和`DOCINFO`结构的定义也很有可能是错误的。您可能正在使用指针类型`Long`而不是指针类型，并且`IntPtr`混合了数字类型，因为这些类型的含义从 VB 6 更改为 VB.NET。`Long``Integer`

您可能根本不需要该`DEVMODE`结构，如果需要，您可以将`CreateDC`函数定义替换为：

```
<DllImport("gdi32.dll", SetLastError:=False, CharSet:=CharSet.Auto)> _
Private Shared Function CreateDC(lpszDriver As String, _
                                 lpszDevice As String, _
                                 lpszOutput As IntPtr, _
                                 lpInitData As IntPtr) As IntPtr _
End Function 
```

并传递`IntPtr.Zero`for `lpInitData`，就像[文档](http://msdn.microsoft.com/en-us/library/dd183490.aspx)`lpszOutput`中所指示的那样for ——<code>IntPtr.Zero 实际上等效于for 指针类型。`NULL`

该`DOCINFO`结构将被声明为：

```
<StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)> _
Private Structure DOCINFO
    Dim cbSize As Integer
    Dim lpszDocName As String
    Dim lpszOutput As String
    Dim lpszDatatype As String
    Dim fwType As Integer
End Structure 
```

根据[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183574.aspx)，`fwType`成员可以是以下任何常量：

*   0
*   `Private Const DI_APPBANDING As Integer = &H1`
*   `Private Const DI_ROPS_READ_DESTINATION As Integer = &H2`

* * *

综上所述……您确实知道在 .NET 世界中有更简单的打印方式，对吧？

# c# - 没有下拉菜单的 C# 组合框

> ID：10567331
> 
> 赞同：-2
> 
> 时间：2012-05-12T20:51:34.953
> 
> 标签：c#, combobox

我有普通的组合框，我想防止对其进行任何更改，所以我想让它不显示下拉菜单。是否可以？

我尝试更改`dropDownStyle`为简单，但随后它显示了下面的项目列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T20:56:50.727

如果您不想允许对控件进行任何更改，我认为您应该将其 Enabled 属性设置为 false [http://msdn.microsoft.com/en-us/library/system.windows.forms.control.enabled。 aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.enabled.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T21:02:02.083

如果您不想让用户对组合框做任何事情，您可以在构造函数中使用此代码

```
public Form1()
{
    InitializeComponent();
    comboBox1.Enabled = false;  
} 
```

否则，如果您想阻止用户在组合框中写入任何内容以选择组合框中的项目，您可以使用此代码

```
{
    InitializeComponent();
    comboBox1.DropDownStyle = ComboBoxStyle.DropDownList; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T20:54:26.527

实现此目的的一种方法是在组合上创建只读`TextBox`，具有组合的确切大小和字体，因此用户可能不会注意到任何差异。

# asp.net - 创建一个 ASP.NET 会话特定的全局变量？

> ID：10567335
> 
> 赞同：1
> 
> 时间：2012-05-12T20:52:20.087
> 
> 标签：asp.net, vb.net, session-state, global-asax

是否可以为 ASP.NET 中的每个会话创建一个全局变量？通常我用 Session 来做这个：

```
Session("my_variable") = 10 
```

但这每次我想像这样使用它时都需要强制转换它：

```
Dim my_variable as String = CInt(Session("my_variable")) 
```

我看到如果我创建一个模块，我可以为每个会话创建对整个项目公共的变量......我还看到 Global.asax 允许模块提供的许多相同功能。我宁愿避免编写模块......有没有办法在 Global.asax 或其他一些最佳实践方法中做到这一点？还是会话变量是最好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T21:03:15.913

像这样为您的变量创建一个包装类

```
public class SessionVariables
{

  public static int MyVariable
  {
     get{ return if( Session["my_variable"] != null ) (int)Session["my_variable"]; else 0;}
     set {Session["my_variable"] = value;}
   }

} 
```

并使用喜欢

```
SessionVarible.MyVariable = 7;

int p =  SessionVarible.MyVariable + 3; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T21:09:51.677

如果您只想在会话范围内存储/检索数据，那么*Session*对象就是要走的路。HttpModules 可用于实现与 ASP.NET 请求管道中特定点相关的某些功能（例如，假设您想在身份验证请求上添加日志记录）。Global.asax 可以让您做类似的事情，并且可能足以满足您的目的（只需在 global.asax 中实现您想要定位的事件）。

如果您担心从*object*装箱/拆箱，那么我喜欢 hkutluay 使用隐藏演员表的包装类的想法。

# java - 在 sqlite 中保存多行 EditText

> ID：10567338
> 
> 赞同：0
> 
> 时间：2012-05-12T20:53:03.297
> 
> 标签：java, android, sqlite

我正在尝试在 sqlite 数据库中使用字符串。我打算将 Multiline EditText 保存到 sqlite VARCHAR 列中有人知道怎么做吗？

每次我使用 EditText.getText().toString() 我只有一行

例如，

```
 <EditText
            android:id="@+id/edittext"
            android:layout_width="267dp"
            android:layout_height="73dp"
            android:inputType="textCapSentences|textMultiLine" 
            android:singleLine="false" > 
```

当我进入

```
abc
123
iiiiii 
```

edittext.getText().toString() 只返回“abc”！！！！

如何将所有文本保存到 sqlite VARCHAR 列中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T03:52:20.567

您需要发布更多代码，以便我们查看发生了什么。拿这个简约的应用程序：

```
public class Example extends Activity implements OnClickListener {
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public void onClick(View view) {
        //      Find the TextView,      set it's text from       the EditText
        ((TextView) findViewById(R.id.text)).setText(((EditText) findViewById(R.id.edit)).getText());
    }   
} 
```

与此 xml 配对：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/edit"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="" />

    <Button
        android:id="@+id/button"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:onClick="onClick" />

    <TextView
        android:id="@+id/text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

只需单击一个按钮，这个简单的应用程序就可以满足您读取多行 EditText 并将其内容传递给另一个对象的要求。在这种情况下，我们将字符串传递给 TextView，数据库的代码基本相同。它甚至复制了“未知单词”突出显示的颜色：

![截屏](../Images/526c6194913859eacd8e9932f7ae0cc2.png)

（不要指望将颜色突出显示如此轻松地复制到数据库并返回。）所以这就是为什么我要求**真正**选择你的代码，因为你在这个过程中改变了一些东西，我看不到错误从这里。

请使用您问题的编辑功能在您的位置发布适当的功能：阅读 EditText，将其内容存储在数据库中并稍后检索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T14:01:51.663

```
edittext = (EditText) findViewById(R.id.multitext); 
str=edittext.getText().toString()                           
DBHelper req_task = new DBHelper(Send_req.this);
req_task.createDataBase();
req_task.openDataBase();
req_task.writetext(str); 
```

# servlets - 圆形视图路径

> ID：10567341
> 
> 赞同：5
> 
> 时间：2012-05-12T20:53:28.507
> 
> 标签：servlets, spring-mvc, http-post

我正在使用 Spring MVC 3，我要做的就是提交一个带有 post 请求的表单并将控制器上的 post 请求处理程序重定向到某个页面。但是当我尝试这样做时出现以下错误：

```
javax.servlet.ServletException: Circular view path [thanks.htm]: would dispatch back to the current handler URL [/wickedlysmart/thanks.htm] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.) 
```

以下是我正在使用的代码：

请求处理程序：

```
@RequestMapping(method=RequestMethod.GET, value="thanks")
public ModelAndView thanks() {
    logger.debug("redirecting..");
    return new ModelAndView("thanks");
}
@RequestMapping(method = RequestMethod.POST, value="talk")
public String processContactForm(HttpServletRequest req) {      
    //...
    return "redirect:thanks";
} 
```

在 spring 应用程序上下文中查看解析器：

```
<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">

    <property name="prefix" value="" />
    <property name="suffix" value=".htm" />

</bean> 
```

我不太明白这里发生了什么。我看到“重定向..”被记录，然后我得到这个错误。有人可以帮我解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:00:22.617

以下解决了问题：

```
@RequestMapping(method=RequestMethod.GET, value="captured")
public ModelAndView thanks() {
    logger.debug("redirecting..");
    return new ModelAndView("thanks");
}
@RequestMapping(method = RequestMethod.POST, value="talk")
public String processContactForm(HttpServletRequest req) {      
    //...
    return "redirect:captured";
} 
```

如您所见，我只是将重定向从“thanks”更改为“captured”，并将重定向请求处理程序的“value”也从“thanks”更改为“captured”，并且它起作用了。谢谢。

# android - 将自定义事件处理程序添加到 AppWidget 组件

> ID：10567343
> 
> 赞同：0
> 
> 时间：2012-05-12T20:53:46.587
> 
> 标签：android

有没有办法将自定义事件处理程序添加到 AppWidget 组件，即与 Intent 无关的事件处理程序？我只想要一个监听器功能，就像标准活动中的组件一样。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:09:17.530

> 有没有办法将自定义事件处理程序添加到 AppWidget 组件，即与 Intent 无关的事件处理程序？

仅当您是实现托管应用小部件的主屏幕的人时。

> 我只想要一个监听器功能，就像标准活动中的组件一样。

这只能通过托管应用小部件的活动（也称为主屏幕）来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T18:07:03.423

我实际上找到了解决这个问题的方法。我可以使用 PendingIntent.getBroadcast 然后在接收器的 onReceive 函数中，我可以编写任何我想要的代码。

# javascript - 使用 php ajax jquery 从 mysql 发送或获取数据 - 什么是安全方法？

> ID：10567344
> 
> 赞同：0
> 
> 时间：2012-05-12T20:54:07.230
> 
> 标签：javascript, php, jquery, mysql, ajax

我已经使用 Ajax 和 jquery 从数据库中获取数据并发送数据，但是当我们使用 ajax 或 jquery 方法时，网页源视图，我们可以看到如下详细信息；

## 阿贾克斯

```
<script type="text/javascript">
function showUser()
function showUser()
{
var str = document.getElementById('txtusername').value;
if (str=="")
{
document.getElementById("txtHint").innerHTML="<span style='color:#FFF;font-size:10px;'>Enter username</span>";
return;
} 
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
}
}
xmlhttp.open("GET","chkusername.php?q="+str,true);
xmlhttp.send();
}
</script> 
```

* * *

在这里，您可以看到 get 方法以及发送值是什么以及更多内容。我想从源视图中隐藏这些东西，帮助我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T21:08:28.970

你不能。客户端上的任何内容（HTML、CSS、JavaScript）都可以免费供用户查看。

这就是为什么任何与安全相关的东西都在服务器端，它可以被信任（在大多数情况下）。

如果用户知道要登录您去`/chkusername.php?q=username`（或其他），这不是安全风险。但是，如果您没有正确清理输入，它就是其中之一。

# facebook - Facebook 连接 Grails 的问题

> ID：10567345
> 
> 赞同：0
> 
> 时间：2012-05-12T20:54:19.090
> 
> 标签：facebook, grails, spring-security

我正在尝试使用 Grails [Facebook 身份验证插件](http://grails.org/plugin/spring-security-facebook)，但遇到了问题。我（我相信）成功安装了插件，在页面上放置了一个 facebook 连接控件，并运行了安装脚本。

当我点击 Facebook Connect 按钮时，我正确地被带到了 Facebook，在那里我正确登录。此时弹出窗口关闭，没有任何反应。我有一个自定义的 FacebookAuthService，但里面没有断点被调用。我相信我要么 1) 错误地连接了服务，要么 2) 清理了我的 Facebook 设置，因此我无法获取信息，但我不确定如何诊断问题。

当我在本地运行应用程序时，它`http://localhost:8080/TestApp`
在我的 Facebook 应用程序设置中运行，我尝试使用“http://localhost”、“http://localhost:8080”和“http://localhost:8080/TestApp”作为站点 URL，我将“localhost”作为应用程序域。我错过了什么？

这是[GitHub 项目](https://github.com/skazzaks/Grails-Test)的链接（我已经更改了 fb 私钥）。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T03:32:24.683

由于 Facebook Javascript SDK，按钮仅在客户端授权您。请在成功授权后重新加载页面，例如：

```
 FB.getLoginStatus(function(response) {
    if (typeof(response) == 'undefined') {
      return
    }
    if (response.status == 'connected') {
      window.location.reload();
    }
  }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T02:16:57.713

JS SDK 目前不支持这种场景下的非标准端口，但是到了周二，这个会更正，会再次支持。

# javascript - 如何解释浏览器之间的不同“存储”事件行为？

> ID：10567356
> 
> 赞同：4
> 
> 时间：2012-05-12T20:56:05.400
> 
> 标签：javascript, javascript-events

[Chrome 的 localStorage 实现的错误？](https://stackoverflow.com/questions/4679023/bug-with-chromes-localstorage-implementation)很好地解释了规范，以及它在 Opera 和 IE9 中的行为方式有何不同。

但是，现在呢？

这真的会弄乱我的代码（任何代码），它依赖于实现在浏览器上的一种方式，当它是另一种方式时。

如何测试以了解事件是否在调用它的窗口上触发？

我唯一能想到的是使用 setTimeout() 来等待并查看事件是否在调用它的窗口中触发，如果没有，则执行某些操作。但是，当存储事件被快速连续调用时，这可能会产生一些可怕的错误。

在我的情况下，我需要为所有窗口触发事件，而不是所有窗口，而是调用它的窗口。在按照规范正确实现它的 Chrome 中，这只是在添加到 localStorage.setItem() 之后添加一个额外函数的问题，但是在 IE、Firefox3.6 和 Opera 中，它会有效地执行两次。我也可以有基于浏览器的不同代码，但我应该测试兼容性而不是浏览器版本。

有没有办法“修补”所有具有 localStorage 支持的浏览器，以使事件在所有浏览器上都以相同的方式处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:52:56.373

我解决了我自己的问题

```
var localStorageSpecCompliant = true;
var specCompliantTestVal = new Date().getTime();
function onStorage(ev) {
    if( ev.key == "specCompliantTest"+specCompliantTestVal ){
        localStorageSpecCompliant = false;
    }
    localStorage.removeItem("specCompliantTest"+specCompliantTestVal);
};
if( window.addEventListener ){  
    window.addEventListener("storage", onStorage, false);  
} else { window.attachEvent("onstorage", onStorage); }

localStorage["specCompliantTest"+specCompliantTestVal] = "This tests if the browsers localStorage storage event is spec compliant or ont.";

localStorage_setItem = function(key, value){
    localStorage[key] = value;
    if( localStorageSpecCompliant ){
        var dirtyFakeEvent = {"key":key, "newValue":value};
        onStorage(dirtyFakeEvent);
    }
} 
```

但是某种总是使事件工作相同的补丁会好得多。这种方式并不理想。我不知道如何伪造真正的“存储”事件，所以我直接调用了该函数。

一个简单地修复合规性的框架会很棒。我对 IE7 中不存在的 localStorage 没有问题。但是在一个或另一个浏览器中完全不同的功能，不同于规范，是非常有问题的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T00:33:27.827

我对此很好奇，看了几个js存储库。到目前为止，我发现支持存储事件的是 YUI 2 Storage Utility。看看它是否可以规范跨浏览器的行为会很有趣。还有一个基于 YUI3 的库，看起来很有趣，并宣传了一个更改事件和一个存储就绪事件。

[YUI 2 存储](http://developer.yahoo.com/yui/storage/)

[基于 YUI 3 的 Storage Lite](http://www.yuiblog.com/blog/2010/02/23/gallery-storage-lite/)

这些可能涉及比您想要的更多的依赖项。他们还可以提供学习如何更简单地解决问题的方法。

这些库还解决了如何处理不提供 HTML5 样式存储的浏览器的问题。

# java - 如何找到仅包含/由给定字符序列组成的单词

> ID：10567365
> 
> 赞同：3
> 
> 时间：2012-05-12T20:57:33.340
> 
> 标签：java, anagram

我希望遍历字典文件并查找仅包含给定字符的单词

示例 dgo

期望的结果：狗，上帝

NOT 包含（在其中）给定字符的单词

我正在使用以下代码：

```
 while((dictionaryWord = br_.readLine()) != null) 
            {   

                    if(dictionaryWord.contains(getWord()))
                        System.out.println(dictionaryWord);

            } 
```

但这给了我所有包含给定字符的单词——不希望

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T21:02:52.647

没有正则表达式：

```
public static boolean sameCharacters(String left, String right) {
    return sortCharacters(left).equals(sortCharacters(right));
}

private static String sortCharacters(String s) {
    final char[] chars = s.toCharArray();
    Arrays.sort(chars);
    return String.valueOf(chars);
} 
```

**更新**：性能更好的版本（感谢*user384706*）：

```
public static boolean sameCharacters(String left, String right) {
    return Arrays.equals(sortCharacters(left), sortCharacters(right));
}

private static char[] sortCharacters(String s) {
    final char[] chars = s.toCharArray();
    Arrays.sort(chars);
    return chars;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T20:59:48.293

你可以通过做检查

```
if (word.matches("[dgo]*")) {
    ...
} 
```

# mysql - Grails 数据库迁移插件问题

> ID：10567370
> 
> 赞同：9
> 
> 时间：2012-05-12T20:58:27.623
> 
> 标签：mysql, grails, plugins, database-migration

当我使用[Grails 数据库迁移插件](http://grails.org/plugin/database-migration)并运行`dbm-gorm-diff`（例如，在安装 Spring Security Facebook 插件之后）时，我遇到了以下问题：

```
Error: Error executing SQL CREATE INDEX `FK609FD5A460CFCC39` ON `facebook_user`(`user_id`): Incorrect index name 'FK609FD5A460CFCC39' 
```

看起来有问题的索引既是 FK 约束，又在生成的升级脚本中作为索引重用。如果我更改名称，从而删除重复项，一切正常。我正在使用Mysql。难道我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T17:30:39.023

我刚刚发现，如果我编辑 changelog.groovy 以将 addForeignConstraint 放在 createIndex 之后，它就像一个魅力。我猜是更改日志生成脚本中的另一个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T03:17:55.713

我怀疑这实际上与 MySQL 有关，而不是与插件本身有关。看到这个错误：[http ://bugs.mysql.com/bug.php?id=55465](http://bugs.mysql.com/bug.php?id=55465)

塞巴斯蒂安的回答是变通。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T17:01:04.503

根据[这个问题/答案](https://stackoverflow.com/questions/304317/does-mysql-index-foreign-key-columns-automatically)，MYSQL 自动索引外键列。因此，当您添加外键约束时，您不需要同时定义索引。我使用 db 迁移插件，只删除 dbm-gorm-diff 生成的外键的“索引”条目。

我认为这比更改名称要好一些，因为这可能会在同一列上创建多个索引，这只是浪费资源。

# php - 自动增量不会更新

> ID：10567371
> 
> 赞同：2
> 
> 时间：2012-05-12T20:58:34.560
> 
> 标签：php, mysql, sql

刚刚创建了一个将文件名保存到 SQL 数据库中的表单。

问题是，当我将 ID 列（自动增量）添加到 SQLDatabase 中时，表单会停止保存我的文件名，但是一旦我删除了 ID 行，它就会开始保存。

不知道是什么问题。

这是我的一些代码

```
 <?php  

     if(isset($_FILES['file_name'])) {
     $file_name = mysql_real_escape_string($_FILES['file_name']['name']); 
      //Writes the information to the database 

     mysql_query("INSERT INTO `files` VALUES ('$file_name')") ; 
      }

     //Retrieves data from MySQL 
     $data = mysql_query("SELECT * FROM files") or die(mysql_error()); 
     //Puts it into an array 

     ?> 
```

我的数据库有两列 file_id 和 file_name 但正如我刚刚写的那样，file_id 不起作用=/

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T21:04:18.853

我认为您需要将 SQL 查询更改为：

```
mysql_query("INSERT INTO `files` (`file_name`) VALUES ('$file_name')") ; 
```

对于多个列，`$file_name`如果您不打算枚举表中的每一列，则需要命名要将字符串保存在哪一列。然后你的自动增量应该可以正常工作。

事实上，问题不在于自动增量，而在于您的 SQL 语法。`mysql_query`您应该通过保存返回值并检查它是否返回来检查您的查询是否有错误`false`。如果是，请调用`mysql_error`以确定错误消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T21:06:36.387

由于`ID`是 auto_inc，因此您无需将其包含在脚本中的任何位置。

我认为问题在于您没有在查询中指定将值放入哪些字段。

改变这个：

```
mysql_query("INSERT INTO `files` VALUES ('$file_name')") ; 
```

对于这样的事情

```
mysql_query("INSERT INTO `files` (`YOURFIELD`) VALUES ('$file_name')") ; 
```

# svn - SVN 错误 - Catch-22

> ID：10567375
> 
> 赞同：1
> 
> 时间：2012-05-12T20:59:53.393
> 
> 标签：svn, tortoisesvn

我试图在一台新计算机上从我小组的 SVN 存储库中检查我们的项目，但最终遇到了 catch-22 的情况。它可以正常工作一段时间，然后到达无法移动的某个文件。

```
Can't move "...\Simfile\tempfile.3.tmp" to "...\Simfile\tempfile.2.tmp": 
Cannot create a file when that file already exists. 
```

此外，在同一目录中还有一个名为“tempfile.tmp”的文件。

当我尝试进一步更新时，它说文件夹已锁定并运行清理功能。当我尝试运行清理功能时，它说目录中的文件之一不受版本控制。当我尝试执行“Tortoise SVN -> 添加”或“Tortoise SVN -> 删除并添加到忽略列表”时，它告诉我文件夹已锁定并运行清理。

对此的任何帮助都会很棒 - 我在服务器上有一个无法下载的文件，我需要尽快进行比较。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T13:35:02.223

同一存储库的其他用户是否在 Unix 操作系统上工作？

如果是这样，可能有人创建了两个名称不同的文件或目录（例如，“Simfile”和“simfile”）。因为 Windows 文件系统不区分大小写，这使得存储库无法在 Windows 机器上签出，并导致类似于您描述的错误。

您应该可以使用 TortoiseSVN 的“存储库浏览器”来检查是否存在这种情况冲突。如果您找到一个，应该仍然可以一次检出或“导出”两个冲突的文件或目录，将它们放在不同的父文件夹中。您还可以使用存储库浏览器通过重命名存储库浏览器中的两个文件之一来修复冲突。

# objective-c - 从objective-c中的json信息解析多行

> ID：10567381
> 
> 赞同：0
> 
> 时间：2012-05-12T21:01:05.770
> 
> 标签：objective-c, json, parsing

我的json搅拌是：

{

```
"locations" :[
       {                
        id = 0;
        lat = "41.653048";
        long = "-0.880677";
        name = "LIMPIA";
       },
       {
        id = 1;
        lat = "41.653048";
        long = "-0.890677";
        name = "LIMPIA2";
       }
  ] 
```

}

使用：

```
NSDictionary * root = [datos_string1 JSONValue];
NSArray *bares = (NSArray *) [root objectForKey:@"locations"];  

   for (NSArray * row in bares) {
    NSString *barName1 = [bares valueForKey:@"name"];
    NSLog(@"%@",barName1);
    } 
```

我从 NSlog 获得两次 otput ( LIMPIA, LIMPIA2 )

所以有些事情是错误的。我需要为每个项目提取 di 单值参数（lat、lon 和 nombre）（以便在 mapkit 应用程序中使用）。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T23:59:01.087

> 我需要为每个项目提取 di 单值参数（lat、lon 和 nombre）（以便在 mapkit 应用程序中使用）

如果我正确理解您的问题，您正在尝试访问`locations`数组中每个字典中的每个值，对吗？

为了访问每个值（如果这确实是您的问题），这应该有效：

```
NSDictionary *root = [datos_string1 JSONValue];
NSArray *bares = (NSArray *)[root objectForKey:@"locations"];  

// Each item in the array is a dictionary, not an NSArray
for (NSDictionary *dict in bares) {
    // Loop over keys
    for (NSString *key in [dict allKeys]) {
        NSLog(@"dict[%@] == %@", key, [dict objectForKey:key]);
    }
} 
```

# apache - 将 SSL 添加到我的网站

> ID：10567382
> 
> 赞同：0
> 
> 时间：2012-05-12T21:01:40.440
> 
> 标签：apache, ssl, https

我有以下虚拟主机配置：

```
listen 80
listen 443
servername "example.com"
serveradmin "email@example.com"
namevirtualhost *:80
namevirtualhost *:443

directoryindex  index.html index.php
options -indexes -multiviews +followsymlinks

<directory /Volumes/dev1/http>
    allowoverride all
</directory>

<virtualhost *:80 *:443>
    servername example.com
    serveralias www.example.com
    documentroot "/Volumes/dev1/http/example"
    rewriteengine on
    SSLCertificateFile "/Volumes/dev1/ssl/_ssl-cert.crt"
    SSLCertificateKeyFile "/Volumes/dev1/ssl/_ssl-privatekey.crt"
    SSLCertificateChainFile "/Volumes/dev1/ssl/_ssl-csr.crt"
</virtualhost> 
```

当然`example.com`只是一个……例子。

如果我访问一切都很好`http://example.com`，但是如果我尝试访问`HTTPS`我得到的版本

```
Safari can’t open the page “https://example.com/” because Safari
can’t establish a secure connection to the server “example.com”. 
```

这些`_ssl*`文件都已就位并`httpd -t`从终端返回运行`Syntax OK`。

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:27:07.193

这是我正在使用的（仅 vhosts 部分），省略了 FCGID、suexec 和 PHP 特定部分：

```
 <VirtualHost *:80>
      ServerName example.com
      DocumentRoot "/var/www/example.com/htdocs"
      <Directory "/var/www/example.com/htdocs/">
        Options -Indexes
        AllowOverride All
        Order allow,deny
        Allow from All
      </Directory>

      ErrorLog "/var/www/example.com/error.log"
      CustomLog "/var/www/example.com/access.log" combined
    </VirtualHost>

    <VirtualHost *:443>
      ServerName example.com
      DocumentRoot "/var/www/example.com/htdocs"
      <Directory "/var/www/example.com/htdocs/">
        Options -Indexes
        AllowOverride All
        Order allow,deny
        Allow from All
      </Directory>

      SSLEngine on
      SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP:+eNULL
      SSLCertificateFile /etc/apache/ssl/example.com.crt
      SSLCertificateKeyFile /etc/apache/ssl/example.key
      SSLCertificateChainFile /etc/apache/ssl/gd_bundle.crt

      ErrorLog "/var/www/example.com/error.log"
      CustomLog "/var/www/example.com/access.log" combined
    </VirtualHost> 
```

# android - 无法将数据插入到 sqlit 数据库表中

> ID：10567384
> 
> 赞同：0
> 
> 时间：2012-05-12T21:01:54.203
> 
> 标签：android, sqlite

我正在尝试在我的 sqlit 数据库中插入数据，但我得到了 android SQLiteConstraintException：错误代码 19：约束失败异常。我看到这个主题有很多问题，我已经阅读并尝试了很多问题，但是仍然存在异常，我想知道这个异常是否是由自动递增 food_id 值引起的，因为插入语句返回 -1 ，并且我想知道为什么自从第一次插入 id 正确完成但后来所有插入都失败后发生此异常，为什么会发生此错误，以及我该如何解决？请帮我..

**DBAdapter 类中的创建语句**

```
private static final String Meal_TABLE_CREATE= "create table IF NOT EXISTS Meal (Date  text not null , "+
        "Time   text not null,MealType  text not null,"+ " primary key(Date,Time ,MealType) );" ;

private static final String FOOD_TABLE_CREATE= "create table IF NOT EXISTS Food (_id  INTEGER  primary key  AUTOINCREMENT  , "+
        "Food_Name   text not null,Calories  integer  not null,"+ "VB12   integer  not null,Cholesterol  integer  not null,"+ 
        "Protein   integer  not null,Iron integer  not null,Sodium integer  not null,Fat_Mono integer  not null,Fat_Sat integer  not null,carbohydrate integer  not null);" ;

private static final String MealFOOD_TABLE_CREATE= "create table IF NOT EXISTS MealFood (Date  text  not null , "+
        "Time   text not null,MealType  text not null,"+"Food_ID  integer   not null ,  primary key(Date,Time ,MealType,Food_ID) );" ; 
```

**插入方法**

```
// insert meal  to the meal table 
public long SaveMeal(String date , String time , String mealType)
{
    ContentValues content = new ContentValues();
    content.put(KEY_MDATE,date);
    content.put(KEY_MTIME,time);
    content.put(KEY_MEALTYPE,mealType);
    return db.insert(MEAL_TABLE_NAME, null, content);

}

// insert Food  to the Food table 
public long SaveFood(String name,int calories,int Vit_B12,int cholesterol,int protein ,int iron ,int sodium,int Fat_Mono,int Fat_Sat,int carbohydrate)
{
    ContentValues content = new ContentValues();

    content.put(KEY_FOODNAME,name);
    content.put(KEY_CALORIES,calories);
    content.put(KEY_VB12,Vit_B12);
    content.put(KEY_CHOLESTEROL,cholesterol);
    content.put(KEY_PROTEIN,protein);
    content.put(KEY_IRON,iron);
    content.put(KEY_SODIUM,sodium);
    content.put(KEY_FAT_MONO,Fat_Mono);
    content.put(KEY_FAT_Sat,Fat_Sat);
    content.put(KEY_CARBOHYDRATE,carbohydrate);

    return db.insert(FOOD_TABLE_NAME, null, content);

}

// get food id by its name   

public int getFoodIDByName(String name) throws SQLException
{   int id;
Cursor cursor = null;

try{

    cursor=db.query(true,FOOD_TABLE_NAME, new String[]{KEY_FOODID},  KEY_FOODNAME+ " = '" + name + "'", null, null, null, null,null);
    if (cursor != null) {
        cursor.moveToFirst();
    }

    id=0;
    while (cursor.moveToNext()) 
        id=cursor.getInt(cursor.getColumnIndex(KEY_FOODID));

}
finally{
    cursor.close();
    cursor.deactivate(); 
}
return id;

}

// insert mealFood   to mealFood table 
public long SaveMealFood(String date , String time , String mealType, int Food_id)
{
    ContentValues content = new ContentValues();
    content.put(KEY_MFDATE,date);
    content.put(KEY_MFTIME,time);
    content.put(KEY_MFMEALTYPE,mealType);
    content.put(KEY_MFFOODID,Food_id);
    return db.insert(MEALFOOD_TABLE_NAME, null, content);

} 
```

**爪哇代码**

```
 DBAdapter dbAdapter=new DBAdapter(SaveMeal.this);
      dbAdapter.open();
      Food n;
     String m;
     int FoodIDByName;
     for(int i = 0; i <MealActivity.array.size(); i++){
        m=MealActivity.array.get(i).toString();
        Log.e("tag", m);//selected food name
       for (int j = 0; j < MealActivity.tempList.size(); j++){
              n=MealActivity.tempList.get(j);

              if(n.getFOOD_NAME().equals(m)){
         //save food 
 long food_id = dbAdapter.SaveFood(n.getFOOD_NAME(),n.getCALORIES(),n.getFOOD_VITAMIN_B12(),n.getCHOLESTEROL(),n.getFOOD_PROTEIN(),n.getFOOD_IRON(),n.getFOOD_SODIUM(),
 n.getFOOD_MONO_UNSATURATED_FAT(),n.getFOOD_SATURATED_FAT(),n.getFOOD_TOTAL_CARBOHYDRATE()); 
  Log.e("tag", food_id+" food inserting done");

  //save meal
 long meal_id=  dbAdapter.SaveMeal( meal_date,meal_time,Meal.MEAL_TYPE);
Log.e("tag",meal_id+" meal inserting done");

//save meal_food 
 FoodIDByName=dbAdapter.getFoodIDByName(n.FOOD_NAME);
 Log.e("tag",FoodIDByName+" food_id");
    long      meal_food_id=dbAdapter.SaveMealFood(meal_date,meal_time,Meal.MEAL_TYPE,FoodIDByName);
Log.e("tag",meal_food_id+" meal_food  inserting done");
 dbAdapter.close(); 
```

此行的结果 Log.e("tag", food_id+" food inserting done"); 在我的日志中是-1

**我的日志**

```
 Database(657):at android.database.sqlite.SQLiteStatement.native_execute(Native       Method)
   Database(657):at android.database.sqlite.SQLiteStatement.execute                 (SQLiteStatement.java:55)
   Database(657):at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1410)         
   -1 food inserting done
   18 meal inserting done 
   0 food_id
    13 meal_food inserting done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T21:21:43.913

该错误意味着您正在违反约束（显然）。很可能将“非空”列保留为空。

您也可能通过尝试多次保存相同的组合而违反了主键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T07:16:30.170

尝试删除所有（非空）约束，并保存空食物。如果保存正确，尝试一一添加约束（NOT NULL）。

我认为其中一个值作为 NULL 传递。

# python - 删除两个单词之间的所有字符并用空格替换

> ID：10567386
> 
> 赞同：2
> 
> 时间：2012-05-12T21:02:07.470
> 
> 标签：python, cisco

我正在使用 Python 3。我编写了两个程序。一个循环遍历 csv 文件以获取 Cisco 交换机的 IP 地址、登录、运行命令，然后将每个结果的结果输出到单独的文本文件。所以我最终得到了一些文本文件......每个开关一个。第二个程序使用 xlwt 将每个文本文件中的信息写入 Excel 中自己的工作表。

主要想法是我需要开发一份报告，显示端口进出服务。一旦我将这些导入 Excel，我就可以编写一些公式来提取我需要的数据。但就目前而言，当我将其导入 Excel 时，我必须手动删除一些单元格，因为所有内容都没有对齐，这是因为名称列中的某些单词之间存在空格（我正在导入 Excel以空格分隔）。我试图用字符串和列表方法（拆分、连接、切片等）做一些事情，但我无法得到我想要的。并且 Name 列在任何一种一致的约定中都没有标准化。我确实注意到虽然名称实际上可能很长，但它会被截断为一定数量的字符。

理想情况下，首先删除前 4 行（最顶部有空白行）和最后一行，然后对于 Port 和 Status 之间的任何内容，将其全部删除（完全删除该列，包括标题）。

这是从交换机获取数据后文件的外观。

```
sw1#term 长度 0
sw1#显示接口状态

端口名称 状态 Vlan 双工速度类型
Gi0/1 Trunk to switch (a connected 1 a-full a-100 10/100/1000BaseTX
Gi0/2 网络增强 pe 已连接 1 a-full a-1000 10/100/1000BaseTX
Gi0/3 已连接 1 a-full a-1000 10/100/1000BaseTX
Gi0/4 已连接 1 a-full a-100 10/100/1000BaseTX
Gi0/5 notconnect 1 auto auto 不存在
Gi0/6 未连接 1 自动 自动 不存在
Gi0/7 未连接 1 自动 自动 不存在
Gi0/8 未连接 1 自动 自动 不存在
Gi0/9 未连接 1 自动 自动 不存在
Gi0/10 已连接 1 a-full a-100 10/100/1000BaseTX
Gi0/11 notconnect 1 auto auto 不存在
Gi0/12 已连接 1 a-full a-100 10/100/1000BaseTX
Gi0/13 禁用 1 自动 自动 不存在
Gi0/14 禁用 1 自动 自动 不存在
Gi0/15 禁用 1 自动 自动 不存在
Gi0/16 禁用 1 自动 自动 不存在
sw1#注销

```

最终结果我想在下面。这应该允许行/列结构在导入 Excel 时保持不变。请注意，所有列信息都用空格分隔。我发现导入为固定宽度或以空格分隔，并将连续空格视为一个检查似乎工作得很好。

```
端口状态 Vlan 双工速度类型
Gi0/1 已连接 1 a-full a-100 10/100/1000BaseTX
Gi0/2 已连接 1 a-full a-1000 10/100/1000BaseTX
Gi0/3 已连接 1 a-full a-1000 10/100/1000BaseTX
Gi0/4 已连接 1 a-full a-100 10/100/1000BaseTX
Gi0/5 notconnect 1 auto auto 不存在
Gi0/6 未连接 1 自动 自动 不存在
Gi0/7 未连接 1 自动 自动 不存在
Gi0/8 未连接 1 自动 自动 不存在
Gi0/9 未连接 1 自动 自动 不存在
Gi0/10 已连接 1 a-full a-100 10/100/1000BaseTX
Gi0/11 notconnect 1 auto auto 不存在
Gi0/12 已连接 1 a-full a-100 10/100/1000BaseTX
Gi0/13 禁用 1 自动 自动 不存在
Gi0/14 禁用 1 自动 自动 不存在
Gi0/15 禁用 1 自动 自动 不存在
Gi0/16 禁用 1 自动 自动 不存在

```

任何指针将不胜感激。我在想正则表达式可能是有序的，但我需要一些帮助来构建它。我希望这不是太模棱两可。

**删除了以前的更新并将其移至新线程**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:41:03.377

首先，下面的代码删除了名称列。从那里取出并添加一个漂亮的 csv 打印输出。提示：`column[-1]`是最后一个条目，`column[-2]`倒数第二个。如果字符串`Not`存在，则加入这些...

```
#!/usr/bin/env python

tokens = ['connected', 'notconnect', 'disabled']

with open('text') as fd:
    for line in fd:
        line = line.strip().split()

        connection = [line[0]]
        found = False

        for i in line:
            if i in tokens:
                found = True
            if found:
                connection.append(i)

        print connection 
```

输出：

```
['Gi0/1', 'connected', '1', 'a-full', 'a-100', '10/100/1000BaseTX']
['Gi0/2', 'connected', '1', 'a-full', 'a-1000', '10/100/1000BaseTX']
['Gi0/3', 'connected', '1', 'a-full', 'a-1000', '10/100/1000BaseTX']
['Gi0/4', 'connected', '1', 'a-full', 'a-100', '10/100/1000BaseTX']
['Gi0/5', 'notconnect', '1', 'auto', 'auto', 'Not', 'Present']
['Gi0/6', 'notconnect', '1', 'auto', 'auto', 'Not', 'Present']
['Gi0/7', 'notconnect', '1', 'auto', 'auto', 'Not', 'Present']
['Gi0/8', 'notconnect', '1', 'auto', 'auto', 'Not', 'Present']
['Gi0/9', 'notconnect', '1', 'auto', 'auto', 'Not', 'Present']
['Gi0/10', 'connected', '1', 'a-full', 'a-100', '10/100/1000BaseTX']
['Gi0/11', 'notconnect', '1', 'auto', 'auto', 'Not', 'Present']
['Gi0/12', 'connected', '1', 'a-full', 'a-100', '10/100/1000BaseTX']
['Gi0/13', 'disabled', '1', 'auto', 'auto', 'Not', 'Present']
['Gi0/14', 'disabled', '1', 'auto', 'auto', 'Not', 'Present']
['Gi0/15', 'disabled', '1', 'auto', 'auto', 'Not', 'Present']
['Gi0/16', 'disabled', '1', 'auto', 'auto', 'Not', 'Present'] 
```

# 评论后更新：

这就是我使用[KISS 原则](http://en.wikipedia.org/wiki/KISS_principle)的方法：

```
#!/usr/bin/env python

import sys

tokens = ['connected', 'notconnect', 'disabled']

with open('text') as fd:
    for line in fd:
        line = line.strip().split()

        connection = [line[0]]
        found = False

        for i in line:
            if i in tokens:
                found = True
            if found:
                connection.append(i)

        if 'Not' in connection and 'Present' in connection:
            # Remove last 2 entries
            connection.pop() ; connection.pop()
            connection.append('Not Present')

        print connection 
```

输出：

```
['Gi0/1', 'connected', '1', 'a-full', 'a-100', '10/100/1000BaseTX']
['Gi0/2', 'connected', '1', 'a-full', 'a-1000', '10/100/1000BaseTX']
['Gi0/3', 'connected', '1', 'a-full', 'a-1000', '10/100/1000BaseTX']
['Gi0/4', 'connected', '1', 'a-full', 'a-100', '10/100/1000BaseTX']
['Gi0/5', 'notconnect', '1', 'auto', 'auto', 'Not Present']
['Gi0/6', 'notconnect', '1', 'auto', 'auto', 'Not Present']
['Gi0/7', 'notconnect', '1', 'auto', 'auto', 'Not Present']
['Gi0/8', 'notconnect', '1', 'auto', 'auto', 'Not Present']
['Gi0/9', 'notconnect', '1', 'auto', 'auto', 'Not Present']
['Gi0/10', 'connected', '1', 'a-full', 'a-100', '10/100/1000BaseTX']
['Gi0/11', 'notconnect', '1', 'auto', 'auto', 'Not Present']
['Gi0/12', 'connected', '1', 'a-full', 'a-100', '10/100/1000BaseTX']
['Gi0/13', 'disabled', '1', 'auto', 'auto', 'Not Present']
['Gi0/14', 'disabled', '1', 'auto', 'auto', 'Not Present']
['Gi0/15', 'disabled', '1', 'auto', 'auto', 'Not Present']
['Gi0/16', 'disabled', '1', 'auto', 'auto', 'Not Present'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T21:44:37.367

```
with open('file') as f:
    lines = f.readlines()
    lines = lines[-1:] + lines[2:-1]
    for line in lines:
        print line[0:11] + line[35:-1] 
```

我认为这将大致满足您的要求；你可能需要玩一些数字，因为我自己没有运行它。它使用的只是列表（或字符串）索引：

*   list[x:] 是从 x 开始的所有条目
*   list[x:y] 是从 x 到 y 的所有条目
*   list[-x] 是从末尾算起的第 x 行

将`lines[-1:] + lines[2:-1]`最后一行放在第一位，并丢弃前两行；`line[0:11] + line[35:-1]`不包括您不想要的部分和最后的换行符。

**如果要写入新文件而不是标准输出，请**更新：****

 **```
with open('infile') as in:
    with open('outfile', 'w') as out:
        lines = in.readlines()
        ...
            print(line[0:6] + line[28:-1], file=out) 
```

事实上，由于 readlines 一次读取所有内容，您可以这样做：

```
with open('infile') as in:
    lines = in.readlines()
with open('outfile', 'w') as out:
    for line in lines:
        ....
        print(line[0:6] + line[28:-1], file=out) 
```

因为不需要打开输入文件（`with`完成后关闭）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T22:04:37.240

我跳过了前 3 行：

```
sw1#term length 0
sw1#show interfaces status 
```

**程序：**

```
with open('in.txt') as f,open('out.txt','w') as out:
   line1=f.readline()
   ind1=line1.find('Name')
   ind2=line1.find('Status')
   x=line1.split()
   x.remove('Name')
   y="%-13s %-15s %-6s %-7s %-8s %-s"%(x[0],x[1],x[2],x[3],x[4],x[5])
   out.write(y+'\n')
   for x in f:
       x=x[:ind1]+x[ind2:]
       x=x.split()
       y="%-13s %-15s %-6s %-7s %-8s %-s"%(x[0],x[1],x[2],x[3],x[4],x[5])
       out.write(y+'\n')

Port          Status          Vlan   Duplex  Speed    Type
Gi0/1         connected       1      a-full  a-100    10/100/1000BaseTX
Gi0/2         connected       1      a-full  a-1000   10/100/1000BaseTX
Gi0/3         connected       1      a-full  a-1000   10/100/1000BaseTX
Gi0/4         connected       1      a-full  a-100    10/100/1000BaseTX
Gi0/5         notconnect      1      auto    auto     Not
Gi0/6         notconnect      1      auto    auto     Not
Gi0/7         notconnect      1      auto    auto     Not
Gi0/8         notconnect      1      auto    auto     Not
Gi0/9         notconnect      1      auto    auto     Not
Gi0/10        connected       1      a-full  a-100    10/100/1000BaseTX
Gi0/11        notconnect      1      auto    auto     Not
Gi0/12        connected       1      a-full  a-100    10/100/1000BaseTX
Gi0/13        disabled        1      auto    auto     Not
Gi0/14        disabled        1      auto    auto     Not
Gi0/15        disabled        1      auto    auto     Not
Gi0/16        disabled        1      auto    auto     Not 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T21:42:18.443

让我们只取第一个和最后 5 个值，如果类型不存在，则进行一点大小写切换：

```
print "{:10} {:15} {:5} {:6} {:6} {}".format("port", "status", "vlan", "duplex", "speed", "type")
with open(my_filename) as logfile:
    content = logfile.read()
    for line in content.splitlines()[4:]:
        port = line.split()[0]
        if line.strip().endswith("Not Present"):
            itype = "Not Present"
            status, vlan, duplex, speed = line.split()[-6:-2]
        else:
            status, vlan, duplex, speed, itype = line.split()[-5:]
        print "{:10} {:15} {:5} {:6} {:6} {}".format(port, status, vlan, duplex, speed, itype) 
```

产量：

```
port       status          vlan  duplex speed  type            
Gi0/1      connected       1     a-full a-100  10/100/1000BaseTX
Gi0/2      connected       1     a-full a-1000 10/100/1000BaseTX
Gi0/3      connected       1     a-full a-1000 10/100/1000BaseTX
Gi0/4      connected       1     a-full a-100  10/100/1000BaseTX
Gi0/5      notconnect      1     auto   auto   Not Present
Gi0/6      notconnect      1     auto   auto   Not Present
Gi0/7      notconnect      1     auto   auto   Not Present
Gi0/8      notconnect      1     auto   auto   Not Present
Gi0/9      notconnect      1     auto   auto   Not Present
Gi0/10     connected       1     a-full a-100  10/100/1000BaseTX
Gi0/11     notconnect      1     auto   auto   Not Present
Gi0/12     connected       1     a-full a-100  10/100/1000BaseTX
Gi0/13     disabled        1     auto   auto   Not Present
Gi0/14     disabled        1     auto   auto   Not Present
Gi0/15     disabled        1     auto   auto   Not Present
Gi0/16     disabled        1     auto   auto   Not Present 
```**

# z3 - z3中的函数声明

> ID：10567391
> 
> 赞同：3
> 
> 时间：2012-05-12T21:02:59.610
> 
> 标签：z3

在 z3 中是否可以声明一个将另一个函数作为参数的函数？例如，这个

```
(declare-fun foo ( ((Int) Bool) ) Int) 
```

似乎不太奏效。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T20:06:21.120

正如 Leonardo 所提到的，SMT-Lib*不允许*使用高阶函数。这不仅仅是句法限制：使用高阶函数进行推理（通常）超出了 SMT 求解器可以处理的范围。（尽管在某些特殊情况下可以使用未解释的函数。）

如果您确实需要使用高阶函数进行**推理，那么交互式定理证明器是首选的主要武器：** [Isabelle](http://www.cl.cam.ac.uk/research/hvg/isabelle/)、[HOL](http://hol.sourceforge.net/)、[Coq](http://coq.inria.fr/)就是其中的一些例子。

*但是，有时您不*希望高阶函数对它们进行推理，而只是为了简化编程任务。SMT-Lib 输入语言不适用于最终用户在实际情况中通常需要的高级编程。如果这是您的用例，那么我建议您不要直接使用 SMT-Lib，而是使用可以让您访问 Z3（或其他 SMT 求解器）的编程语言。有多种选择，具体取决于最适合您的用例的宿主语言：

*   如果你是 Python 用户，那么 Z3 4.0 附带的[Z3Py](http://rise4fun.com/z3py)就是你要走的路，
*   如果您是 Scala 用户，请查看[Scala^Z3](http://lara.epfl.ch/w/jniz3-scala-examples)。
*   如果 Haskell 是您的首选语言，请查看[SBV](http://hackage.haskell.org/package/sbv)。

每个绑定都有自己的功能集，Z3Py 可能是最通用的，因为它直接受到 Z3 人员的支持。（它还提供了对其他选择仍然无法访问的 Z3 内部的访问，至少目前是这样。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-12T23:02:59.937

不，这是不可能的。但是，您可以定义一个将数组作为参数的函数。

> (declare-fun foo ((Array Int Bool)) Int)

您可以使用此技巧来模拟高阶函数，例如您的问题中的函数。

这是一个例子：[http ://rise4fun.com/Z3/qsED](http://rise4fun.com/Z3/qsED)

[Z3 指南](http://rise4fun.com/Z3/tutorial/guide)包含有关 Z3 和 SMT 的更多信息。

# mysql - 在整个数据库中而不是在一个表中拥有唯一行 ID 的最佳方法？

> ID：10567396
> 
> 赞同：0
> 
> 时间：2012-05-12T21:03:42.350
> 
> 标签：mysql, database, database-design

我正在为我的一个项目设计一个数据库，在项目中我有许多不同类型的对象。每个对象都可能有评论——它从同一个评论表中提取。

我注意到当两种不同类型的对象具有相同的 id 时，我可能会遇到问题，并且当从评论表中拉出时，它们会互相拉取评论。我可以通过添加一`object_type`列来解决它，但是在查询等时会更难维护。

在我的整个数据库中拥有唯一行 ID 的最佳方法是什么？

我注意到 Facebook 用一个非常非常大的 ID 编号他们的对象，并且可能通过`id mod trillion`或其他一些非常大的数字来确定它的类型。虽然这可能有效，但是否有更多选择可以实现相同的目标，或者依赖足够大的数字范围应该没问题？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T21:25:16.787

您可以使用 Twitter 为其唯一 ID 使用的东西。

[http://engineering.twitter.com/2010/06/announcing-snowflake.html](http://engineering.twitter.com/2010/06/announcing-snowflake.html)

但是，对于您创建的每个对象，您都必须对该服务进行某种 API 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T21:40:34.447

`object_type`为什么不通过将其集成到 id 列来调整您的概念？例如，ID 可以是对象类型、分隔符和列中唯一 ID 的串联。

这种方法可能会更好地扩展，因为整个数据库的唯一 ID 生成器可能会导致性能瓶颈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-27T20:40:37.317

我将表用作对象类，将行用作对象，将列用作对象参数。一切都以类 techname 开头，其中每个对象都有其唯一标识符，该标识符在数据库中是唯一的。对象类被注册为表对象类中的对象，并且每个对象类的参数都链接到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-27T20:34:02.523

如果您只有一个数据库实例，您可以创建一个新表来分配 ID：

```
CREATE TABLE id_gen (
  id BIGINT PRIMARY KEY AUTO_INCREMENT NOT NULL
); 
```

现在您可以轻松地生成新的唯一 ID 并使用它们来存储您的行：

```
INSERT INTO id_gen () VALUES ();
INSERT INTO foo (id, x) VALUES (LAST_INSERT_ID(), 42); 
```

当然，当你不得不对它进行分片时，你就有点麻烦了。您可以留出一个管理此表的数据库实例，但是您会遇到所有写入的单点故障和严重的 I/O 瓶颈（如果您必须处理地理位置不同的数据中心，这种情况只会变得更糟）。

Instagram 有一篇关于他们的 ID 生成方案的[精彩博客文章](http://instagram-engineering.tumblr.com/post/10853187575/sharding-ids-at-instagram)，它利用 PostgreSQL 的强大功能和一些关于其特定应用程序的知识来跨分片生成唯一 ID。

另一种方法是使用 UUID，它[极不可能](https://en.wikipedia.org/wiki/Universally_unique_identifier#Random%5FUUID%5Fprobability%5Fof%5Fduplicates)出现冲突。您可以“免费”获得全球唯一性，但需要进行一些权衡：

*   尺寸稍大：一个 BIGINT 是 8 个字节，而一个 UUID 是 16 个字节；
*   索引的痛苦：对于未排序的键，INSERT 速度较慢。（UUID 实际上[比 hashes 更可取](https://www.percona.com/blog/2007/03/13/to-uuid-or-not-to-uuid/)，因为它们包含一个按时间戳排序的段。）

另一种方法（前面提到过）是使用可扩展的 ID 生成服务，例如[Snowflake](https://github.com/twitter/snowflake)。（当然，这涉及到安装、集成和维护所述服务；这样做的可行性是高度特定于项目的。）

# vbscript - 使用批处理或 vbs 在文件中查找和替换/附加文本

> ID：10567397
> 
> 赞同：0
> 
> 时间：2012-05-12T21:03:44.243
> 
> 标签：vbscript, batch-file, cmd

我在不同的子目录下有许多同名的文件，分隔符为“}”。我想找到一组特定的文本并在分隔符之前附加一些新文本。例如：

```
folder1\sample.css
    .asd {}
    .bar {}
folder2\sample.css
    .foo {}
    .bar {} 
```

所有 sample.txt 文件应如下所示：

```
..
.foo {display:none;}
.. 
```

我将如何使用 vbs、powershell 或最好是批处理文件来完成此操作？与此类似的东西：

```
SETLOCAL ENABLEDELAYEDEXPANSION
for /r %%f in (*.txt) do (
    for /f "delims=}" %%a in (%%f) do (
        set str=%%a
        REM modify the variable
        REM replace the line with the variable
    )
) 
```

编辑：我让它工作了，但我相信这可以写得更好，具有更多的可重用性。

```
@echo off
SETLOCAL ENABLEDELAYEDEXPANSION
for /r %%f in (index.css) do (
    BatchSubstitute.bat ".foo {" ".foo { display:none;" %%f>%%f.new
    del %%f
    BatchSubstitute.bat ".bar {" ".bar { display:none;" %%f.new>%%f
    del %%f.new
    BatchSubstitute.bat ".asd {" ".asd { display:none;" %%f>%%f.new
    del %%f
    ren %%f.new index.css
) 
```

BatchSubstitute.bat

```
@echo off
REM -- Prepare the Command Processor --
SETLOCAL ENABLEEXTENSIONS
SETLOCAL DISABLEDELAYEDEXPANSION

::BatchSubstitude - parses a File line by line and replaces a substring"
::syntax: BatchSubstitude.bat OldStr NewStr File
::          OldStr [in] - string to be replaced
::          NewStr [in] - string to replace with
::          File   [in] - file to be parsed
:$changed 20100115
:$source http://www.dostips.com
if "%~1"=="" findstr "^::" "%~f0"&GOTO:EOF
for /f "tokens=1,* delims=]" %%A in ('"type %3|find /n /v """') do (
    set "line=%%B"
    if defined line (
        call set "line=echo.%%line:%~1=%~2%%"
        for /f "delims=" %%X in ('"echo."%%line%%""') do %%~X
    ) ELSE echo.
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T01:54:46.350

您可以使用此批处理文件：[http ://www.dostips.com/?t=Batch.FindAndReplace](http://www.dostips.com/?t=Batch.FindAndReplace)

在您寻求 find/replace 的文件循环中调用`.foo {}`它`.foo{display:none;}`。

可能有比使用此查找/替换批处理更好的查找/替换二进制文件，但它可能会完成这项工作。

# asp.net-mvc - MVC3 站点/bin 已部署/图像文件上出现 404 错误

> ID：10567399
> 
> 赞同：0
> 
> 时间：2012-05-12T21:04:13.010
> 
> 标签：asp.net-mvc, iis-6, http-status-code-404, asp.net-mvc-4

我有一个 MVC3 网站，我正在尝试将其部署在具有 IIS6 的现有服务器上。服务器安装了 .NET 4，但没有安装 MVC3。我已将所有引用的 dll 放在服务器上的 bin 文件夹中。

当我设置通配符映射时，服务器会为我网站上的每个文档抛出 404 错误——甚至是静态文档（例如 /public/images/nav.png）。如果我摆脱了通配符地图，那么我可以浏览到静态图像（如 nav.png）。

任何想法为什么在设置通配符映射时存在的静态文件会发生 404 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T00:55:54.400

尝试使用 MVC3 所需的 DLL 部署您的解决方案：[How to Deploy an ASP.NET MVC 3 App to Web Hosting with "\bin Deployment"](http://kitsula.com/Article/How-to-Deploy-an-ASP-NET-MVC-3-App-to-Web-Hosting-with-bin-Deployment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:21:25.220

右键单击项目节点，构建部署包，这对我有用。

更多 [链接] [http://www.hanselman.com/blog/BINDeployingASPNETMVC3WithRazorToAWindowsServerWithoutMVCInstalled.aspx](http://www.hanselman.com/blog/BINDeployingASPNETMVC3WithRazorToAWindowsServerWithoutMVCInstalled.aspx)

# vb.net - 初始化顺序

> ID：10567402
> 
> 赞同：1
> 
> 时间：2012-05-12T21:04:37.997
> 
> 标签：vb.net

我正在玩以下内容：

```
Public MustInherit Class TempTable
    Public Sub New()
        For Each f As FieldInfo In Me.GetType().GetFields
            Dim l As TypedLeaf = CType(f.GetValue(Me), TypedLeaf)
            Console.WriteLine(l.Name)
        Next
    End Sub
End Class

Public Class JMTempTable
    Inherits TempTable

    Public KeyIndex As New TypedLeaf(Me, "KeyIndex", OQL.Type.AUTONUMBER)
    Public Debit As New TypedLeaf(Me, "Debit", OQL.Type.DECIMAL(16, 2))

    Public Sub New()
        MyBase.New()
    End Sub
End Class 
```

但对检索到的值没有任何结果。原因似乎是派生类的字段直到基类的构造函数被调用之后才被初始化*......*如果我这样做的话，会使事情变得更加复杂：

```
Public Class JMTempTable
    Inherits TempTable

    Public KeyIndex As TypedLeaf
    Public Debit As TypedLeaf

    Public Sub New()
        KeyIndex = New TypedLeaf(Me, "KeyIndex", OQL.Type.AUTONUMBER)
        Debit = New TypedLeaf(Me, "Debit", OQL.Type.DECIMAL(16, 2))

        MyBase.New()
    End Sub
End Class 
```

编译器会抱怨必须在派生类的构造函数的第一行调用基类构造函数...

有没有办法可以延迟基类构造函数的运行，直到派生类的字段被初始化之后？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:16:42.417

这是一种方法（也许*是*方法）：

```
Public MustInherit Class TempTable
    Public Sub New()
        Initialize()
        For Each f As FieldInfo In Me.GetType().GetFields
            Dim l As TypedLeaf = CType(f.GetValue(Me), TypedLeaf)
            Console.WriteLine(l.Name)
        Next
    End Sub

    Protected MustOverride Sub Initialize()
End Class

Public Class JMTempTable
    Inherits TempTable

    Public KeyIndex As TypedLeaf()
    Public Debit As TypedLeaf()

    Public Sub New() ' Optional block. You don't have to explicitly define a default constructor.
        MyBase.New()
    End Sub

    Protected Overrides Sub Initialize()
        KeyIndex = New TypedLeaf(Me, "KeyIndex", OQL.Type.AUTONUMBER)
        Debit = New TypedLeaf(Me, "Debit", OQL.Type.DECIMAL(16, 2))
    End Sub
End Class 
```

抽象`Initialize()`方法强制继承者拥有一个名为 的方法`Initialize()`。调用时会隐式调用此方法`MyBase.New()`。这意味着您现在可以将初始化逻辑移出构造函数并移入`Initialize()`方法中以获得您正在寻找的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T21:57:31.440

这在托管语言中通常是众所周知的行为。令人惊讶的是，我在 VB.NET 语言规范中没有明确提到它，所以我必须自己解释一下。

CLI 直接支持字段初始化器，但它们不足以支持您的字段。他们只能存储简单的数据，思考值类型。初始化引用类型，例如 TypedLeaf 类，需要执行代码。并且代码不能存储在字段初始化器中，它只能出现在方法内部。

因此，VB.NET 编译器通过*将*字段初始化表达式移动到下一个逻辑位置，即类构造函数来解决该限制。这是完全自动的，它实际上会*重写*您的构造函数，以防您自己提供一个，并根据需要注入*新*的运算符调用。

现在有一个选择，它可以在基类构造函数调用*之前*或*之后移动这些调用。*您已经知道所做的选择，它发生*在*. 理由是字段初始化程序不应该能够观察尚未初始化的基类成员。您尝试解决方法实际上是非常英勇的编译器编写技巧，它实际上*检查*了是否首先调用了基本构造函数。

不幸的是，您发现如果它发生在基本构造函数调用之前，您实际上会更快乐。这是有道理的，但不幸的是，这是不允许的，语言设计者放下了脚并宣称“我们只支持**一种**方法来做到这一点”。公平的电话，这样的基础需要是可预测的。

解决方法很简单。只需在您的基类中放置一个受保护的方法，例如“初始化”，然后将您现在在构造函数中的代码移动到该方法。在派生类构造函数中只需调用该方法。构造函数重写确保基础构造函数调用在前，字段初始化代码在后，方法调用在第三。减去 33.3 分，因为必须记住进行该调用，因此添加代码以在您看到 Nothing 时抛出 InvalidOperationException。

# django - Django 模型 - 如何使一个模型中的字段依赖于另一个模型中的字段（这是外键）？

> ID：10567405
> 
> 赞同：2
> 
> 时间：2012-05-12T21:05:06.527
> 
> 标签：django, django-models, foreign-key-relationship

我是 Django 新手，不知道如何处理以下问题：

我有模型：

```
class Season(models.Model):
    number_of_episodes = models.IntegerField()
class Episode(models.Model):
    season = models.ForeignKey(Season)
    number = models.IntegerField() 
```

剧集编号不仅应在季节中唯一，而且应小于季节的 number_of_episodes。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T21:39:12.757

要使剧集编号在季节中唯一，您可以使用[unique_together](https://docs.djangoproject.com/en/dev/ref/models/options/#django.db.models.Options.unique_together)。这意味着对于一个字段的每个值，在另一个字段中只能有一行具有值。那看起来是这样的：

```
class Season(models.Model):
    number_of_episodes = models.IntegerField()
class Episode(models.Model):
    class Meta:
        unique_together = (season, number)
    season = models.ForeignKey(Season)
    number = models.IntegerField() 
```

我不认为你可以使用 django 模型来强制剧集编号应该小于 season.number_of_episodes，但你可以在覆盖的保存方法中做到这一点。像这样的东西：

```
class Season(models.Model):
    number_of_episodes = models.IntegerField()

class Episode(models.Model):
    class Meta:
        unique_together = (season, number)
    season = models.ForeignKey(Season)
    number = models.IntegerField()

    def save(self, *args, **kwargs):
        if self.number > season.number_of_episodes:
            return #Don't save
        else:
            super(Episode, self).save(*args, **kwargs) # Call the "real" save() method. 
```

请注意，如果剧集编号不正确，这只会跳出保存方法。相反，您可能会引发异常。

# spring-roo - 没有在工作区首选项中配置 Roo 安装

> ID：10567406
> 
> 赞同：3
> 
> 时间：2012-05-12T21:05:13.943
> 
> 标签：spring-roo

下载了最新的 eclipse (indigo 3.7) 和最新的 sts (SpringSourceTool 2.9.1.RELEASE) 插件。我正在尝试我的第一个 Roo 项目的运气，但是在尝试创建项目时得到：

没有在工作区首选项中配置 Roo 安装。

根据手册 sts 就是我所需要的。我在这里错过了什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T08:35:33.157

尝试首选项，在搜索字段中键入“Roo”以找到 Roo 配置选项，如果存在，您可以从那里选择 Roo 安装路径。

以前，您必须下载并安装 Roo。

或者，您可以直接安装 SpringSource Tool Suite，它带有 Eclipse、几个有用的插件和三个程序：maven、Roo 和 VMWare TC 服务器（定制的 tomcat 服务器）

# c# - 在 MVC3 下为某些问卷生成 HTML 控件的最佳方法

> ID：10567411
> 
> 赞同：0
> 
> 时间：2012-05-12T21:06:28.950
> 
> 标签：c#, .net, html, asp.net-mvc-3

我在 MVC3 下做了一些网页，但我***对为问卷生成 HTML 控件的最佳方式感到困惑。***

我想有2种方法：

1.  通过代码生成带有控件等的原始 html。（我的意思是`sb.Append("<input id='bla' class='bla' />") and etc..`Sample is [here](https://stackoverflow.com/questions/886728/generating-html-email-body-in-c-sharp)）
2.  通过发送完整的`model`然后`foreach`在 HTML 代码中放入一些

`model`您能否建议哪种方式更好，然后（通过或）我必须如何获得答案`FormCollection`？

这是我的循环草稿（还没有其他东西......）

```
var qs = db.SN_Questionnaires.Where(q => q.Code == 1).FirstOrDefault();    
foreach (var questionGroup in qs.SN_QuestionGroups)
    {
        foreach (var question in questionGroup.SN_Questions)
        {
            var questionType = db.SN_QuestionTypes.Where(qt => qt.ID == question.SN_QuestionTypeID).FirstOrDefault(); // Get type of the control here (TextBox, Radio, and etc)

            foreach (var answer in question.SN_Answers)
            {

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:02:34.387

您是否考虑过使用局部视图？您的模型可以包含局部视图（您的模板）的名称，并呈现如下：

```
@Html.Partial(Model.Template) 
```

# r - R索引问题

> ID：10567414
> 
> 赞同：1
> 
> 时间：2012-05-12T21:06:55.020
> 
> 标签：r, indexing, vectorization

抱歉，问题标题含糊不清，我想不出更具体的东西。

我有 3x2 矩阵`c`：

```
> c
     [,1] [,2]
[1,]    1    2
[2,]    1    3
[3,]    2    3 
```

重要的是`ncol(c) == 2`。

我也有矩阵`ind`：

```
> ind
      [,1] [2] [,3] [,4]
[1,]    2    2    2    1
[2,]    1    1    2    2
[3,]    2    2    2    1 
```

重要的是`nrow(c) == nrow(ind)`，矩阵的值`ind`是 1 和 2（就像 c 的每一行的列索引）

我想要得到的是`a`具有相同暗淡`ind`的矩阵`a[i,j] == c[i,ind[i,j]]`：

```
> a
      [,1] [2] [,3] [,4]
[1,]    2    2    2    1
[2,]    1    1    3    3
[3,]    3    3    3    2 
```

我可以在不太全面的情况下做类似的事情，例如，如果`nrow(c) == 1`我将使用`apply`：

```
 > apply(c,2,function(x){return(matrix(x[ind], nrow(ind)))}) 
```

我知道有一种方法可以使用 mapply 迭代 2 个列表，但是

1）我不知道将矩阵表示为行列表的最佳方法是什么 2）我觉得这个解决方案很难看

实现我在这里描述的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T21:39:20.623

矩阵索引来拯救！

```
> c.mat <- matrix(c(1,1,2,2,3,3), ncol=2)
> ind <- matrix(c(2,1,2,2,1,2,2,2,2,1,2,1), ncol=4)
> matrix(c.mat[cbind(as.vector(row(ind)), as.vector(ind))], ncol=ncol(ind))
     [,1] [,2] [,3] [,4]
[1,]    2    2    2    1
[2,]    1    1    3    3
[3,]    3    3    3    2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T21:58:11.603

```
f<-function(x,row1){ 
   for(i in 1:length(x)){
     x[i]=cc[i,ind[i,row1]]
    }
   x
}
a=apply(cc,1,f,nrow(a)) 
```

您可以像这样使用应用。注意：`cc`是你的`c matrix`

# php - 从构造函数返回值是不是很糟糕？

> ID：10567416
> 
> 赞同：1
> 
> 时间：2012-05-12T21:07:15.800
> 
> 标签：php, oop, constructor

考虑以下简单的类构造函数。（请注意，我显然不包括所有引用的方法。

```
// Initialize User class.
public function __construct($user_id = NULL)
{
    // If user is loaded (and a user ID is provided)
    if ($user_id)
    {
        // If user is authorized.
        if ($this->authorized($user_id))
        {
            // Load user information.
            $this->info = $this->load($user_id);
        }
        else
        {
            // Return an empty (nonexistent) user.
            return NULL;
        }
    }

    // If user is loaded (and no user ID is provided)
    else
    {
        // Create a new user.
        $new_user = create_user();

        // Return the new user's ID.
        return $new_user;
    }
} 
```

我的问题是：我在这里返回值的方法是错误的吗？我的朋友坚持认为构造函数应该总是返回一个对象，不管是什么。但是，我在此处布置的方式似乎要简单得多，并且更易于使用。（如果我正在创建一个新用户，那么我会立即获得他的 ID。如果我正在加载一个现有用户，我会立即访问她/他的信息）

如果是错的，为什么？为什么这很糟糕？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T21:11:42.103

您尝试做的事情根本行不通，构造函数无论如何*都会*返回的新实例`User`，即使您尝试 return `null`。

例如，这个：

```
class User {
  function __construct() {
    return null;
  }
}
var_dump(new User()); 
```

将打印：

```
object(User)#1 (0) {
} 
```

[http://codepad.org/0IdJydkY](http://codepad.org/0IdJydkY)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T21:16:17.910

您可以向您的类添加一个静态方法来创建用户或返回 null

```
public static function createUser() {
    // do your checks
    // if valid return instance
    // return null;
}

$user = User::createUser(); 
```

注意：您可能必须使您的`authorized()`方法静态 - 取决于您的类的其余部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T21:10:57.963

您的 __construct() 函数根本不应该返回任何值，它总是自动返回对象 - 它应该用于启动某些事情。

我建议将代码放在不同的函数中。

更多信息可以在这里阅读：[Echo Return 构造方法；](https://stackoverflow.com/questions/3254279/echo-return-construct-method)

# windows - win32 / opengl 和回调函数.. 它们的结构如何？

> ID：10567418
> 
> 赞同：2
> 
> 时间：2012-05-12T21:07:31.230
> 
> 标签：windows, winapi, opengl, callback

我正在开发一个涉及 openGL 的 win32 c/cpp 项目。我刚刚开始并且有一些关于标准 win32 程序如何工作的基本问题。按照教程，我让winmain创建了一个新窗口，为该窗口启用openGL，然后进入主循环，如果有消息，程序处理它们，否则程序继续绘制openGL动画。之后，我简单地关闭了 openGL 并销毁了窗口。我对这里发生的事情并不太困惑，但这就是我迷路的地方：

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam) {

switch (message)
{

case WM_CREATE:
    return 0;

case WM_CLOSE:
    PostQuitMessage( 0 );
    return 0;

case WM_DESTROY:
    return 0;

case WM_KEYDOWN:
    switch ( wParam )
    {

    case VK_ESCAPE:
        PostQuitMessage(0);
        return 0;

    }
    return 0;

default:
    return DefWindowProc( hWnd, message, wParam, lParam );

} 
```

虽然我确实在 winmain 中看到我通过以下方式将此函数注册到我的窗口类

```
wc.lpfnWndProc = WndProc; 
```

这个过程究竟是如何工作的？有人可以向我解释一下管道吗 - 当 winmain 方法运行时，它会继续绘制 opengl 动画，但是一旦按下一个键，它就会进入消息处理......然后呢？我的 winmain 方法如何与 WndProc 方法通信？从机器的角度来看，实际发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:13:25.393

在您的 WinMain 中应该有一对`TranslateMessage`/`DispatchMessage`调用。TranslateMessage 负责正确传递击键，DispatchMessage 遍历窗口层次结构以将消息传递到具有输入焦点的窗口，有效地调用指针注册为默认窗口消息处理程序（窗口过程）的函数，并将消息作为参数.

# javascript - jQuery .toggle() 只显示，从不隐藏绝对定位的 div

> ID：10567420
> 
> 赞同：0
> 
> 时间：2012-05-12T21:08:14.147
> 
> 标签：javascript, jquery

**请不要忘记为我最终的救星甜菜根-甜菜根的好答案投票！**

我有这个问题，`.toggle()`只在点击时显示，它从不隐藏。

TL;DR：它通常看起来像下面的屏幕截图，但当我*第二*`.toggle();`次单击时它不会隐藏。

 *第一个 div 出现在实际选择框的鼠标悬停上，它会在其自身上收到任何点击。

通常单击第一个 div 是带有 1px 黑色边框的小 div 将显示第二个 div，它可以工作，再次单击将隐藏它，这不起作用。（点击事件有效，切换失败）

![截屏](../Images/c2f8666fea0f3a11cb3647b695f2f763.png)

这是元素的 html，是的，它通常在表格单元格中：

```
<td style="vertical-align: top; text-align: left;">
<select class="placeholder0" id="sortedselect0">
<option selected="selected">- for - </option>
<option>adj. &nbsp; foraminated</option>
<option>adj. &nbsp; foraminiferous</option>
<option>adj. &nbsp; foraminous</option>
<option>adj. &nbsp; forbearant</option>
<option>adj. &nbsp; forbearing</option>
<option>adj. &nbsp; forbidden</option>
<option>adj. &nbsp; forbiddenly</option>
<option>adj. &nbsp; forbidding</option>
<option>adj. &nbsp; forblack</option>
<option>adj. &nbsp; forby</option>
<option>AND MANY MORE OPTIONS</option>
</select>

<div class="anti" id="anti0" style="height: 18px; width: 179px; position: absolute; top: 209px; left: 494px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: black; border-right-color: black; border-bottom-color: black; border-left-color: black; border-image: initial; background-color: transparent; display: block; "></div>

<div class="floats" style="display: none; position: absolute; top: 227px; left: 494px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: black; border-right-color: black; border-bottom-color: black; border-left-color: black; border-image: initial; " id="floatdiv0"><img style="width: 222px; height: 342px;" alt="" src="fake_iframe.png"></div> 
```

然后是直接跟随它的javascript

```
<script type="text/javascript">
//make original select box unselectable
jQuery(".placeholder0").mouseover(function() {
    var pos = jQuery(this).position();
    var width = jQuery(this).outerWidth();
    var height = jQuery(this).outerHeight();

    jQuery("#anti0").css({
        height: (height - 2) + "px",
        width: (width - 2) + "px",
        position: "absolute",
        top: pos.top + "px",
        left: pos.left + "px",
        border: 1 + "px solid black",
        z: 2,
        "background-color":"transparent"
    });
});

jQuery("#floatdiv0").unbind('click');

jQuery("#anti0").live('click', function(){

    // .position() uses position relative to the offset parent,
    // so it supports position: relative parent elements
    var pos = jQuery(this).position();

    // .outerWidth() takes into account border and padding.
    var width = jQuery(this).width();
    var height = jQuery(this).height();

//first hide any other fake selects
jQuery("div.floats").hide();
//and antiselect overlays
jQuery("div.anti").hide();

//unhide current antiselect overlay
jQuery("#anti0").show();

    //show the menu directly over the placeholder
    jQuery("#floatdiv1").css({
        position: "absolute",
        top: (pos.top + height) + "px",
        left: pos.left + "px",
        border: 1 + "px solid black",
        //padding: height + "px",
        z: 1    
    });
    jQuery("#floatdiv1").toggle();
});

//hides the menu  
jQuery("#floatdiv1").mouseleave(function() {
    jQuery("#floatdiv1").hide();
    //and unhide overlays
    jQuery("div.anti").show();
});
</script><br>
</td> 
```

我把 .unbind 扔在那里只是为了尝试，我什至不确定它是为了什么，我害怕。

现场也发生了同样的情况，只是 .click 很好。

//隐藏菜单是我隐藏 div 窗口的旧方法，只是离开它，它完美无缺。

我正在考虑诉诸

```
{
    if ( showOrHide == true ) {
        jQuery('#floatdiv1').show();
    } else if ( showOrHide == false ) {
        jQuery('#floatdiv1').hide();
    }
} 
```

但我测试了它并没有用，所以也许我做错了？

我想在工作中添加一个有问题的代码示例，但不知何故，当我将代码从常用页面复制到这个新的 php 页面时，问题.php[先生](http://www.thehappymarquis.com/misterproblem.php)完全不起作用。

请帮助我以一种或另一种方式切换此 div。>.<

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:10:44.993

有一些假设...

在点击处理程序内部：

```
jQuery("div.floats").hide();
...
jQuery("#floatdiv1").toggle(); 
```

同样`#floatdiv1`，`class="floats"`上面命令序列的实际效果将始终显示它。

尝试 ：

```
jQuery("div.floats").not("#floatdiv1").hide();//hide all other floats
...
jQuery("#floatdiv1").toggle();//toggle this float 
```*

# objective-c - 解析json不正确

> ID：10567421
> 
> 赞同：1
> 
> 时间：2012-05-12T21:08:19.247
> 
> 标签：objective-c, cocoa-touch, cocoa

我正在从Apple JSON（应用程序的评级）中解析一些东西，我尝试了类似的东西：

```
 if ([StoreParse objectForKey:@"averageUserRating"] == @"4.5") {
        NSLog(@"xx");
    } else {
        NSLog(@"xxx");
    } 
```

该应用程序的评分为 4.5，如果我这样做

```
NSlog (@"%@", [StoreParse objectForKey:@"averageUserRating"]); 
```

输出为：4.5

但是当我运行脚本时，第一个代码输出中的 NSlog 是“xxx”，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T21:17:20.517

比较字符串（本质上是指向 NSSring 类实例的指针）是错误的，因为两个内容相同的字符串可能具有不同的内存地址。利用

```
if ([[StoreParse objectForKey:@"averageUserRating"] isEqualToString:@"4.5"]) 
```

反而。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T21:11:46.160

你不能这样做：

```
if ([StoreParse objectForKey:@"averageUserRating"] == @"4.5") 
```

你需要做：

```
if ([[StoreParse objectForKey:@"averageUserRating"] isEqualToString:@"4.5"]) 
```

假设它是一个字符串。如果是`NSNumber`那么做：

```
if ([[StoreParse objectForKey:@"averageUserRating"] floatValue] == 4.5f) 
```

（虽然在[比较浮动的相等性时要小心](https://stackoverflow.com/questions/328475/should-we-compare-floating-point-numbers-for-equality-against-a-relative-error)）

有关字符串相等的更多信息，请参阅[此问题](https://stackoverflow.com/questions/1302985/how-do-i-compare-strings-in-objective-c)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-12T21:11:46.643

使用`isEqualToString`：

```
if ([[StoreParse objectForKey:@"averageUserRating"] isEqualToString:@"4.5"]) {
    NSLog(@"xx");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T01:57:15.020

如果值为`averageUserRating`an `NSNumber`，则应`NSString`先将其转换为格式化的，然后将其与`@"4.5"`字符串文字进行比较：

```
if ([[NSString stringWithFormat:@"%1.1f", [[StoreParse objectForKey:@"averageUserRating"] floatValue]] isEqualToString:@"4.5"]) 
```

# windows-phone-7 - 保护 WP7 应用程序中的身份验证数据

> ID：10567425
> 
> 赞同：2
> 
> 时间：2012-05-12T21:08:44.700
> 
> 标签：windows-phone-7, authentication, amazon-web-services

我正在编写一个 WP7 应用程序，并希望包含使用 Amazon 的 AWS 作为存储服务来共享高分数据的功能。

据我了解，WP7 XAP 文件（目前）是安全加密的，并且不存在已知的手机越狱。但是，鉴于这种“安全”加密可能是暂时的，我想了解这是否/如何违反最佳实践。

AWS 的 dynamoDB 使用可以使用给定帐户数据生成的临时访问令牌，有效期为 36 小时，必须使用任何请求的签名来验证令牌。

我正在考虑将所有访问数据存储在 XAP 文件中，该文件还将生成临时访问令牌和签名。该信息将通过电话和 AWS 之间的 https 请求传递。

我试图制定替代流程，包括将临时令牌计算的生成传递给外部 Web 服务，但是我想不出一种方法来保护这些数据，如果 XAP 文件可访问，这些数据也不会受到同样的损害。

我是否完全错过了最佳实践方法，或者我只是过于谨慎？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:54:22.243

您将永远无法阻止用户发送虚假分数，这与每个流行游戏都存在非官方作弊应用程序的原因几乎相同。你能做的最好的就是让它**变得更难**。

使用一种简单的方法，客户端将分数直接发送到服务器，无需任何加密。有人可以通过在模拟器上运行应用程序并捕获传出数据包，然后在他的桌面浏览器上打开相同的 URL 来作弊。预计时间：不到 10 分钟，任何知道他可以直接从市场下载 XAP、删除清单并将其部署到模拟器上的人都可以完成。

然后您可以在客户端上添加加密密钥。现在有人必须知道 C# 和 Reflector 才能提取它，但是对于具有这些技能的人来说仍然很容易。

下一级，您可以添加加密密钥并对程序集进行混淆。提取密钥需要 CIL 和 Relector 知识。高技能的开发人员需要 30 分钟到一个小时才能提取密钥，而大多数开发人员需要花费数小时。

最后，您可以添加多个步骤来迷惑入侵者（例如，从服务器下载临时令牌并以某种方式在分数发送过程中使用它）。此外，您可以设计得分系统以使某些分数是非法的（愚蠢的示例：如果最小计分动作获得 2 分，那么如果有人发送一个奇数作为分数，您就知道他在作弊。这个很容易理解出，但你可以制定更复杂的规则）。

无论如何，请记住，您的系统总是容易受到攻击，这只是攻击者需要多长时间才能突破它的问题。如果一个高技能的开发人员需要花费数小时或数天的时间，那么除非您为最优秀的玩家提供一些有价值的奖品，否则您可以放心地假设没有人会费心去做。

# ruby - 检查一个数组是否是Ruby中另一个数组的子集

> ID：10567430
> 
> 赞同：35
> 
> 时间：2012-05-12T21:09:55.673
> 
> 标签：ruby

无论元素的顺序如何，如何检查一个数组是否是另一个数组的子集？

```
a1 = [3, 6, 4]
a2 = [1, 2, 3, 4, 5, 6, 7, 8, 9]

...?

a1 is a subset of a2 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-05-12T21:16:02.870

最简单的可能是：

```
(a1 - a2).empty? 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-05-12T21:16:02.977

使用套装。然后你可以使用[`set.subset?`](http://www.ruby-doc.org/stdlib-3.0.3/libdoc/set/rdoc/Set.html#method-i-subset-3F). 例子：

```
require 'set'

a1 = Set[3,6,4]
a2 = Set[1,2,3,4,5,6,7,8,9]

puts a1.subset?(a2) 
```

输出：

```
true 
```

在线查看它：[ideone](http://ideone.com/ncjMI)

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-05-12T21:17:03.743

您已经拥有的数据结构是完美的，只需检查交集：

```
(a1 & a2) == a1 
```

*更新：*讨论排列的评论很有趣且很有创意，但完全不正确，因为 Ruby 实现者预料到了这个问题，并指定结果的顺序是`a1`. 所以这确实有效，并将在未来继续有效。（数组是有序的数据结构，而不是集合。你不能只改变数组操作的顺序。）

我更喜欢[Dave Newton](https://stackoverflow.com/users/438992/dave-newton)的酷酷答案，但这个答案也有效，并且像 Dave 的一样，也是核心 Ruby。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-03T15:53:12.247

也许速度不快，但可读性很强

```
def subset?(a,b)
  a.all? {|x| b.include? x}
end 
```

# facebook - 通过 Open Graph 发布的事件未显示在新闻源上

> ID：10567435
> 
> 赞同：1
> 
> 时间：2012-05-12T21:11:42.667
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我正在通过 Open Graph API 成功发布事件，并且可以验证条目是否显示在我的 Activity Feed 中。但是，这些事件并未出现在新闻源上。他们不会显示给我发帖的用户，也不会显示用户的朋友（他们是应用程序的管理员）。如果我去[http://www.facebook.com/myuser/activity/id_returned_from_post](http://www.facebook.com/myuser/activity/id_returned_from_post)，条目就在那里。为什么它不会出现在新闻源中？

# android - libgdx 动画回调？

> ID：10567439
> 
> 赞同：3
> 
> 时间：2012-05-12T21:12:18.553
> 
> 标签：android, animation, libgdx

如何检查当前动画是否完成，以便我可以跟进另一组动画？例如，我正在播放玩家受伤动画，​​我想在玩家受伤动画完成后播放一些溅血动画（不同的 spritesheet）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T21:26:36.403

您可以使用 Action 的方法将`OnActionCompleted`侦听器设置为您的：`Action`

```
 /** 
  * Sets the listener to be invoked when the action is finished.
  * @param listener
  * @return this 
  */
 public Action setCompletionListener (final OnActionCompleted listener) 
```

最终你可以使用：

```
public boolean isDone() 
```

检查动作执行是否完成。

# jsf-2 - 在jsf中动态添加radio和InputText

> ID：10567446
> 
> 赞同：0
> 
> 时间：2012-05-12T21:13:11.430
> 
> 标签：jsf-2

我在动态生成的文本框中编辑时遇到问题。

看我的代码。

```
<h:form>
                <h:panelGroup>
                    <h:panelGrid columns="2"> 
                        <h:panelGrid columns="1"> 
                            <h:selectOneRadio id="radio1" value="#{dynamicBean.radiovalue}" layout="pageDirection" >
                                <f:selectItems value="#{dynamicBean.objectList}" var="k1" itemValue="#{k1.value}" itemLabel="" />
                            </h:selectOneRadio>
                        </h:panelGrid>
                        <h:panelGrid columns="1" rowClasses="raw1">
                            <c:forEach items="#{dynamicBean.objectList}" var="k3">
                                <p:inputText value="#{k3.textvalue}" valueChangeListener="#{dynamicBean.ajaxEvent}" >
                                </p:inputText>
                            </c:forEach>
                        </h:panelGrid>
                        <h:commandButton value="add new" action="#{dynamicBean.addNew}"/>
                    </h:panelGrid>
                </h:panelGroup>
            </h:form> 
```

这是我的豆子。

```
@ManagedBean
@ViewScoped
public class DynamicBean implements Serializable{

    private String radiovalue;
    private List<Pojo> objectList=new ArrayList<Pojo>();
    int i=0;
    private Pojo single=new Pojo();

    public DynamicBean() {   
        System.out.println("In Cons");
        if(objectList.isEmpty())
        {
            Pojo p1=new Pojo();
            p1.setName("Name-"+i);
            p1.setValue("Value-"+i);
            p1.setTextvalue("Text-"+i);
            objectList.add(p1);
            i++;
            setRadiovalue(p1.getValue());
        }
    }

    public void addNew()
    {   
        Pojo p1=new Pojo();
        p1.setName("Name-"+i);
        p1.setValue("Value-"+i);
        p1.setTextvalue("Text-"+i);
        objectList.add(p1);
        i++;
        setRadiovalue(p1.getValue());
    }

    public void ajaxEvent(ValueChangeEvent e)
    {
        System.out.println("New:"+e.getNewValue());
        System.out.print("Old:"+e.getOldValue());
    } 
```

以下是 Pojo 中带有 getter 和 setter 的三个变量

```
private String name;
    private String value;
    private String textvalue; 
```

最大的困惑是我可以在文本框中更改第一个对象的值，但我不能更改新生成的对象的值。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T04:02:08.330

您的具体问题是因为您使用`<c:forEach>`的是在视图构建期间运行的 JSTL 标记，而您使用的是视图范围的 bean。视图范围的 bean 存储在视图状态中。当您将表单提交到服务器时，视图状态将恢复，但此时原始视图范围 bean 尚不可用，因此将创建一个新的（因此，所有属性都设置为默认值！）。恢复视图后，原始视图范围 bean 将被放回范围内，覆盖临时的。

您需要一个完整的 JSF UI 组件而不是 JSTL 标记。为此，您需要`<h:dataTable>`.

代替

```
<h:panelGrid columns="1" rowClasses="raw1">
    <c:forEach items="#{dynamicBean.objectList}" var="k3">
        <p:inputText value="#{k3.textvalue}" valueChangeListener="#{dynamicBean.ajaxEvent}" >
        </p:inputText>
    </c:forEach>
</h:panelGrid> 
```

经过

```
<h:dataTable value="#{dynamicBean.objectList}" var="k3" rowClasses="raw1">
    <h:column>
        <p:inputText value="#{k3.textvalue}" valueChangeListener="#{dynamicBean.ajaxEvent}" />
    </h:column>
</h:dataTable> 
```

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

* * *

**与具体问题无关**，您在构造函数中有一些代码重复。只需`addNew()`在其中调用方法即可。我也会删除实例变量`i`，因为这没有任何意义。只需使用本地的，而不是使用`List#size()`.

```
public DynamicBean() {
    addNew();
}

public void addNew() {
    Pojo p1 = new Pojo();
    int i = objectList.size();
    p1.setName("Name-" + i);
    p1.setValue("Value-" + i);
    p1.setTextvalue("Text-" + i);
    objectList.add(p1);
    setRadiovalue(p1.getValue());
} 
```

# java - Java 错误捕获问题

> ID：10567447
> 
> 赞同：0
> 
> 时间：2012-05-12T21:13:13.407
> 
> 标签：java, class, try-catch, system.out

我设置了一个 try/catch 东西，它将捕获所有异常，然后显示错误。

这是我的代码：

```
try {
    //CODE THAT COULD ERROR HERE
} catch (final Exception e) {
    System.err.println("Unexpected error: " + e.getStackTrace()[0]);
} 
```

上面的代码给了我最后一个有错误的类。如何检测有错误的 MY PROGRAM 的最后一类？

示例输出：“意外错误：package.ClassName.method(ClassName.java:46)”

我希望它输出有错误的程序行，而不是由于我的程序而出错的内置 java 类的行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T21:15:35.190

```
e.printStackTrace() 
```

可能会让你更快乐。或打印可从适当方法获得的堆栈跟踪条目数组的顶部。

[http://docs.oracle.com/javase/6/docs/api/java/lang/Throwable.html#getStackTrace](http://docs.oracle.com/javase/6/docs/api/java/lang/Throwable.html#getStackTrace) ()

归还他们。第一个是你所要求的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T21:29:40.487

您可以使用[`getStackTrace`](http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html#getStackTrace%28%29)来获取实例数组[`StackTraceElement`](http://docs.oracle.com/javase/7/docs/api/java/lang/StackTraceElement.html)，并根据您的包和/或类名对其进行过滤（[`getClassName`](http://docs.oracle.com/javase/7/docs/api/java/lang/StackTraceElement.html#getClassName%28%29)用于每个元素，这将为您提供该堆栈跟踪框架的完全限定类名）。这将让您将其筛选到*您的*代码，而不是异常起源的 JDK 类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T21:54:54.040

```
 try {
            //error producing code
        } catch (Exception e) {
            for (StackTraceElement s : e.getStackTrace()) {
                if (!s.getClassName().startsWith("java.")) {
                    System.out.println("file name: " + s.getFileName());
                    System.out.println("class name: " + s.getClassName());
                    System.out.println("method name: " + s.getMethodName());
                    System.out.println("line number: " + s.getLineNumber());
                    System.out.println();
                    //break; // will be the highest non java package...
                }
            }
        } 
```

您当然可以将它切换为特定于包，`if (s.getClassName().startsWith("com.company")) {`这样它就不会返回第三方库或 sun 包或其他非 java 包中的东西。

# c# - 为包含集合的对象实现 GetHashCode()

> ID：10567450
> 
> 赞同：28
> 
> 时间：2012-05-12T21:13:40.590
> 
> 标签：c#, gethashcode

考虑以下对象：

```
class Route
{
   public int Origin { get; set; }
   public int Destination { get; set; }
} 
```

Route 实现了相等运算符。

```
class Routing
{
   public List<Route> Paths { get; set; }
} 
```

我使用下面的代码为 Routing 对象实现 GetHashCode 方法，它似乎有效，但我想知道这是否是正确的方法？我依靠平等检查，因为我不确定，我想我会问你们。我可以只对哈希码求和还是需要做更多的魔术才能保证达到预期的效果？

```
public override int GetHashCode() =>
{
    return (Paths != null 
                ? (Paths.Select(p => p.GetHashCode())
                        .Sum()) 
                : 0);
} 
```

我在这里检查了几个`GetHashCode()`问题以及 MSDN 和 Eric Lippert 关于此主题的文章，但找不到我要查找的内容。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-12T21:24:17.913

我认为你的解决方案很好。（稍后会说：LINQ 的`Sum`方法将在上下文中起作用`checked`，因此您可以很容易地得到一个`OverflowException`，这意味着它毕竟不是那么好。）但是更常见的是进行 XOR（不带进位的加法）。所以它可能是这样的

```
public override int GetHashCode()
{
  int hc = 0;
  if (Paths != null)
    foreach (var p in Paths)
      hc ^= p.GetHashCode();
  return hc;
} 
```

*附录（答案被接受后）：*

请记住，如果您曾经`Routing`在 a `Dictionary<Routing, Whatever>`、 a或其他使用哈希表的情况下使用此类型，那么如果有人在将其添加到集合后更改（变异）`HashSet<Routing>`您的实例，那么您的实例将**丢失。**`Routing`

如果您确定这永远不会发生，请使用我上面的代码。`Dictionary<,>`如果您确保没有人更改所`Routing`引用的内容，依此类推。

另一种选择是只写

```
public override int GetHashCode()
{
  return 0;
} 
```

如果您认为永远不会使用哈希码。如果每个实例都返回`0`哈希码，则哈希表的性能会很差，但您的对象不会丢失。第三种选择是抛出`NotSupportedException`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-12T21:30:04.123

Jeppe Stig Nielsen 的答案中的代码有效，但它可能导致大量重复的哈希码值。假设您正在对 0-100 范围内的整数列表进行哈希处理，那么您的哈希码将保证在 0 到 255 之间。这在字典中使用时会产生很多冲突。这是一个改进的版本：

```
public override int GetHashCode()
{
  int hc = 0;
  if (Paths != null)
    foreach (var p in Paths) {
        hc ^= p.GetHashCode();
        hc = (hc << 7) | (hc >> (32 - 7)); //rotale hc to the left to swipe over all bits
    }
  return hc;
} 
```

随着越来越多的项目被散列进来，这段代码至少会随着时间的推移涉及所有位。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-12T21:25:44.137

作为准则，对象的哈希在对象的整个生命周期内必须相同。我会`GetHashCode`单独保留该功能，而不是覆盖它。仅当您想将对象放在哈希表中时才使用哈希码。

您应该阅读 Eric Lippert 关于 .NET 中哈希码的精彩文章：[GetHashCode 的指南和规则](http://ericlippert.com/2011/02/28/guidelines-and-rules-for-gethashcode/)。

引用那篇文章：

> 准则：GetHashCode 返回的整数永远不应该改变
> 
> 规则：当对象包含在依赖于哈希码保持稳定的数据结构中时，GetHashCode 返回的整数永远不能改变
> 
> 如果对象的哈希码在哈希表中时可能会发生变异，那么显然 Contains 方法将停止工作。您将对象放入存储桶#5，对其进行变异，当您询问集合是否包含变异对象时，它在存储桶#74 中查找并没有找到它。

您实现的`GetHashCode`函数在对象的生命周期内不会返回相同的哈希码。如果使用此函数，如果将这些对象添加到哈希表中，就会遇到麻烦：**该`Contains`方法将不起作用**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T21:22:03.197

我认为这不是正确的做法，因为要确定最终`hashcode`它对于指定对象必须是唯一的。在您的情况下，您执行 a `Sum()`，它可以在集合中使用不同的哈希码产生*相同*的结果（最后哈希码只是整数）。

如果您的意图是根据集合的内容确定相等性，此时只需比较两个对象之间的这些 cillections。顺便说一句，这*可能*是一项耗时的操作。

# excel - Excel计数列

> ID：10567454
> 
> 赞同：0
> 
> 时间：2012-05-12T21:14:17.373
> 
> 标签：excel, excel-2010

[在 Excel 中计算重复项](https://stackoverflow.com/questions/6875479/counting-duplicates-in-excel)

我想要与上面非常相似的东西。考虑像这样的输入

```
GL15
GL15
GL15
GL16
GL17
GL17
GL17 
```

上面的列只是工作表中的列之一。我希望输出是

```
GL15 3
GL16 1
GL17 3 
```

我希望数据透视表能解决这个问题。所以我将该列添加为“行标签”，但我无法让计数工作。

请问有人可以提供一些指示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T23:14:32.963

这里如何设置数据透视表：

![在此处输入图像描述](../Images/1c904475f78a2dd73570cdc825f59bde.png)

程序：

1.  选择数据
2.  插入数据透视表
3.  `Item`从选择字段列表拖到行标签中
4.  `Item`从选择字段列表拖动到值（默认为计数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T21:22:56.420

我认为这会有所帮助..

```
Salesperson Invoice
Buchanan    15,000
Buchanan    9,000
Suyama      8,000
Suyama      20,000
Buchanan    5,000
Dodsworth   22,500 
```

公式说明（结果）

```
=COUNTIF(A2:A7,"Buchanan")  Number of entries for Buchanan (result = 3)
=COUNTIF(A2:A7,A4)  Number of entries for Suyama (result = 2)
=COUNTIF(B2:B7,"< 20000")   Number of invoice values less than 20,000 (result = 4)
=COUNTIF(B2:B7,">="&B5) Number of invoice values greater than or equal to 20,000 (result = 2) 
```

试试这样，。如果你需要一些帮助告诉。我认为这会有所帮助..

谢谢... Sampath Sri Anuradha 网页设计师和开发人员

# c++ - 每第 N 行字符串到多个字符串

> ID：10567458
> 
> 赞同：-1
> 
> 时间：2012-05-12T21:14:56.357
> 
> 标签：c++, arrays, string

*解决方案*感谢 1111...

```
vector<std::string> split_at_line(string str, int lines) {
 vector<std::string> nine_ln_strs;
 string temp;
 stringstream ss;
 int i = 0;
 while(i != str.length()) {
     ss << str.at(i);
     if(i == lines) {
        lines += lines;
        getline(ss,temp);
        nine_ln_strs.push_back(temp);
        ss.clear();
        temp.clear();
     }
     if(i+lines > str.length()) {
        getline(ss,temp);
        nine_ln_strs.push_back(temp);
        ss.clear();
        temp.clear();
        break;
     }
     i++;
 }
 return nine_ln_strs; 
```

}

============================================

我今天试图练习和学习如何使用多维数组，但遇到了一个问题。我不知道如何将一个字符串拆分为多个字符串，每隔 N 行。我在网上搜索过，但似乎只有空格和标记的示例。反正有没有做我想做的事？

例子：

```
#include <iostream>
#include <string>
#include <sstream>
#include <iomanip>
using namespace std;

const int five = 5;
int test[][five] = {

{ 0, 0, 1, 0, 0 },
{ 0, 1, 1, 0, 0 },
{ 0, 2, 1, 0, 0 }
};

int main() {
stringstream result;
int a = sizeof test / sizeof ( test[0] );
cout << a << endl;
int b = 5;
for ( int i = 0; i < a; i++ ) {
    for ( int j = 0, inc = 0 ; j < b; j++, inc++ ) {
        if(inc == 2) {
            result << hex << setfill ('0') << setw(4) << (int)test[i][j];
        } else {
            result << hex << setfill ('0') << setw(2) << (int)test[i][j];
        }
    }
}

string s = result.str();
cout << s << endl;

// split the string into segments of every 000000000000 and store them into a new string each time, or another array

   int z;       // hold
   cin >> z;

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T21:23:44.100

可能有更好的方法，但这应该有效

```
 std::vector<std::string> split_at_line(const std::string& str, unsigned lines) {
     std::vector<std::string> nine_ln_strs;
     std::istringstream ss(str);
     std::string temp, t2;

     while(ss) { //whilst there is still data
         //get nine lines
         for(unsigned i=0; i!=lines && std::getline(ss, t2); ++i) {          
             temp+=t2;
         }
         //add block to container
         nine_ln_strs.push_back(temp));
     }
     //return container
     return nine_ln_strs;
 } 
```

PS：C 数组不是很好尝试并尽可能使用容器。同样，创建一个名为`five`defined to的常量`5`也不是很有帮助。在这里使用变量的想法是让您以后可以更改它，如果您将 5 的值更改为`6`then 那就太奇怪了。`test_sz`会是一个更好的名字。

# css - 修复背景尺寸：封面；问题

> ID：10567463
> 
> 赞同：1
> 
> 时间：2012-05-12T21:16:02.170
> 
> 标签：css

我正在尝试创建一个单页网站，但在对基本布局进行排序时遇到了一些麻烦。我想要的是当用户访问该站点时，第一个 div 会拉伸以填充浏览器窗口（例如[http://whiteboard.is](http://whiteboard.is)）。之后第二个 div 是固定位置，但我可以设置手动高度，这样我就可以添加大量内容。

我试过使用背景尺寸标签，但由于某种原因，它只能水平拉伸。垂直它只是设置为 min-height: 值。

任何想法为什么？

**HTML**

```
<body>

<section id="first" class="clearfix">
<div class="scanlines"></div>
</section>

<section id="second" class="clearfix">
<div class="scanlines"></div>
</section>

</body> 
```

**CSS**

```
#first {
    background: url(1.jpg) no-repeat center center;
    background-attachment: fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    min-width: 1024px;
    min-height: 768px;
    }

#second {
    background: url(3.jpg) center no-repeat fixed;
    position: relative;
    height: 8000px;
    width: 100%;
    }

.scanlines { 
    background: url(scanlines.png); 
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    z-index: 25;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-14T05:46:26.277

We're using JavaScript (jQuery) on [http://whiteboard.is](http://whiteboard.is) to set the size of the first container - I know this is an old post, but I figure it still merits an answer.

Ours it a bit burried with some other code, but the simple answer is this (place this inside your document ready function or other call after the page is loaded).

```
$('#first').css({
    'height' : $(window).height(),
    'width' : $(window).width()
}); 
```

On the Whiteboard site, we store these as variables and use them in various places, but this is a simple answer that should help get you started.

We actually apply this function to a utility class, and use that class throughout the site on elements we want to be sized to the browser window. Also note that it's good to rerun this function when the window is resized.

Markup:

```
<section id="first" class="clearfix fillscreen">
    <div class="scanlines"></div>
</section> 
```

Javascript:

```
// the basic function, used with a class instead of an ID
function fillscreen () {
    $('.fill-screen').css({
        'height' : $(window).height(),
        'width' : $(window).width()
    });
}

// run our sizing function on document ready
$(document).ready(function(){
    fillscreen();
});

// run it again anytime the window is resized
$(window).on('resize',function(){
    fillscreen();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T21:27:58.180

`position: absolute`on类将`.scanlines`块从流中取出，因此它不会增加其容器的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:33:23.857

您可能想尝试在 .scanlines 中添加一些 padding-left 和 padding-right。请务必在 .scanlines 上设置 box-sizing:border-box。

这也将迫使内容垂直。内容将尝试水平流动，因为您有宽度：100%。

# java - 让 restlet 模板表示工作

> ID：10567475
> 
> 赞同：0
> 
> 时间：2012-05-12T21:17:46.863
> 
> 标签：java, restlet

我在让模板表示在 Restlet 中工作时遇到问题。

我正在使用模板表示，因为我有 3 个页面除了内容之外是相似的（即页眉、导航和页脚相同）：index.html、services.html、contact.html 使用模板表示将很有用，因为如果我需要更改导航栏或页脚，然后我只需要在一个地方进行（template.html）

我已将 FreeMarker jar 添加到我的构建路径中，并且可以访问模板数据。

我正在尝试一些基本的东西：

```
@Get
public Representation represent() {
    return new TemplateRepresentation("template.html", new Configuration(), MediaType.TEXT_HTML);
    } 
```

我希望`template.html`浏览器上显示的内容。但我`No template found`在控制台中收到错误

这是我的文件结构的精简版。

```
Java Resources
   - src
      - Application.java
      - IndexResource.java (This class contains the template representation to show the index page)

Web Content
  - WEB-INF
  - template.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:06:05.707

事实上，我认为您需要在配置实例上指定一个适当的模板加载器。这将允许 Freemarker 知道在哪里以及如何找到模板......

```
org.restlet.Context context = (...)
Configuration configuration = new Configuration();

ContextTemplateLoader loader1 = new ContextTemplateLoader(context, "file://<DIR1>");
ContextTemplateLoader loader2 = new ContextTemplateLoader(context, "file://<DIR2>");

MultiTemplateLoader loaders = new MultiTemplateLoader(
              new TemplateLoader[] { loader1, loader2 });

configuration.setTemplateLoader(loaders); 
```

您可以在以下地址找到 TemplateLoader 接口的所有支持实现：http: [//freemarker.sourceforge.net/docs/api/freemarker/cache/TemplateLoader.html](http://freemarker.sourceforge.net/docs/api/freemarker/cache/TemplateLoader.html)。我认为 WebappTemplateLoader 实现可能是您正在寻找的那个......

希望它可以帮助你。蒂埃里

# c# - 嵌入光标导致面板崩溃

> ID：10567477
> 
> 赞同：1
> 
> 时间：2012-05-12T21:18:07.927
> 
> 标签：c#, bitmap, cursor, panel, embedding

如果我使用此代码，我的面板（画布）会崩溃：

```
Assembly asm = Assembly.GetExecutingAssembly();
        using (Stream resStream = asm.GetManifestResourceStream("Pie_X.blank.cur"))
        {
            CanvasCursor = new Cursor(resStream);
            resStream.Close();
        }
        using (Stream resStream = asm.GetManifestResourceStream("Pie_X.hand.cur"))
        {
            HandCursor = new Cursor(resStream);
            resStream.Close();
        } 
```

这段代码如何不会导致它崩溃：

```
Assembly asm = Assembly.GetExecutingAssembly();
        using (Stream resStream = asm.GetManifestResourceStream("Pie_X.blank.cur"))
        {
            CanvasCursor = new Cursor(resStream);
            resStream.Close();
        }
        using (Stream resStream = asm.GetManifestResourceStream("Pie_X.blank.cur"))
        {
            HandCursor = new Cursor(resStream);
            resStream.Close();
        } 
```

blank.cur 是我从网上下载的光标，hand.cur 是我在 photoshop 中使用光标插件制作的光标。为什么我的光标无法加载，我尝试将大小减小到 30x30 像素，但它仍然崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:21:11.527

检查以确保 hand.cur 与 blank.cur 位于同一个 Pie_X 命名空间中，并且您已将其构建操作设置为嵌入式资源。

还要确保您可以使用内置的 VS2010 资源编辑器对其进行编辑（以验证格式）。

# c# - 格式异常，datagridview，sqlite

> ID：10567479
> 
> 赞同：0
> 
> 时间：2012-05-12T21:18:19.657
> 
> 标签：c#

我收到此错误：

```
Error: Format Exception: Input string was not in a correct format. 
```

在

```
foreach (DataRow row in dtChanges.Rows)
            {
                using (SQLiteConnection conn = new SQLiteConnection(connString))
                {
                    conn.Open();
                    SQLiteCommand upCmd = new SQLiteCommand(@"update.......",conn);
           upCmd.Parameters.AddWithValue("@Flux",float.Parse(row["Flux"].ToString())); 
```

此行 ["Flux"] 来自 datagridview。它可能是一个“”字符串。我想这就是导致问题的原因。Flux 是数据库中的一个数字。我是 sqlite 数据库。我理解这个错误，“”不能转换为小数。但是解决这个问题的最佳方法是什么？

```
Stack Trace: 
       at System.Number.ParseSingle(String value, NumberStyles options, NumberFormatInfo numfmt)
       at System.Single.Parse(String s)
       at RVEST.frmVesselData.SaveData(DataGridView dgv) in C:\D_Drive_Stuff\RVESTV2\RVEST\frmVesselData.cs:line 249
       at RVEST.frmVesselData.btnSave_Click(Object sender, EventArgs e) in C:\D_Drive_Stuff\RVESTV2\RVEST\frmVesselData.cs:line 190
       at System.Windows.Forms.Control.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
       at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ButtonBase.WndProc(Message& m)
       at System.Windows.Forms.Button.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(Form mainForm)
       at RVEST.Program.Main() in C:\RVEST\Program.cs:line 26
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart() 
```

谢谢孙宇

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T21:23:17.573

如果您对零没意见，请尝试

```
float result;
result = row["flux"] != null && float.TryParse(row["flux"].ToString(), out result) ? result :0;

upCmd.Parameters.AddWithValue("@Flux", result); 
```

Null 和空值将被转换为 0。

如果你想得到一个空值：

```
float result;
    var res= row["flux"] != null && float.TryParse(row["flux"].ToString(), out result) ? (float?)result :null;

upCmd.Parameters.AddWithValue("@Flux", res); 
```

任何状况之下，

您必须检查： - 如果 row["flux"] 在调用“ToString()”之前为空。- 然后看看 value.ToString() 是否可以解析为浮点数。

# c++ - 具有未命名函数的 C++ 函数指针数组

> ID：10567482
> 
> 赞同：1
> 
> 时间：2012-05-12T21:18:46.887
> 
> 标签：c++, arrays, function, pointers, anonymous

我正在尝试制作一个函数指针数组。

该数组将具有相当多的功能（某处在 10 到 50 之间）。

此声明类似于我正在使用的声明：

```
int (*functions[15])(int, int); 
```

我遇到的问题是我必须手动定义所有这些功能。这可以; 但是我不想给他们所有人一个名字。

数组中的所有函数都不会从数组外部调用。

我知道我在用这个问题推运气，但是有没有办法让我将匿名函数（类似于委托，我想）放入这个数组中？

或者我可以使用类似这样的声明：

```
int (*functions[15])(int, int);

(*function[0])(int x, int y)
{
    //stuff
}

(*function[1])(int x, int y)
{
    //other stuff
} 
```

如果可能的话，我也希望避免使用任何 C++11；我知道已经对它进行了很多改进，但我不知道是否所有编译器都支持它（我打算跨平台使用多个编译器）。

有没有办法在不命名每个函数的情况下做到这一点，还是我不走运？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:20:59.063

如果没有匿名函数，您需要命名您的函数。在 C++11 之前没有其他选择。

# php - Imagemagick 执行和转换

> ID：10567485
> 
> 赞同：3
> 
> 时间：2012-05-12T21:19:18.063
> 
> 标签：php, image-processing, imagemagick

我最近开始将 imagemagick 与 php 一起使用，而我对 IM 和 PHP 都比较陌生。所以，我在这里寻求一些帮助/建议。

# 第一的

如果假设用户在我的网站上上传了 gif 或 png 图像，并且我希望将其转换为 jpg，那么是否有任何类似的命令。`$image->convert($file,'.jpg)` 或者转换命令只能通过`exec()`？例如`exec(convert picture.png`图片.jpg）

# 第二

如果再一次，用户在网站上上传 gif/png，我将图像调整为指定的宽度/高度并写入图像，使用 IM 的 writeImage 函数如下： `$image->writeImage(basename.$ext)`where `$ext`= jpg。这会正常工作吗，这是一个好习惯吗？我认为这只会重命名它，但我仍然认为这没有问题...... oO

哦，对不起，还有一个问题，我对 exec 不是很熟悉，使用 imagemagick using 是否更好`exec()`，它是否提高了速度、负载等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T21:45:15.067

我无法直接回答您的问题，但我认为我为您指出了一些资源：

关于哪个更好，exec 或 PHP 扩展，几个月前我问了同样的问题：

[我应该为 ImageMagick 使用 PHP 扩展还是只使用 PHP 的 Exec() 函数来运行终端命令？](https://stackoverflow.com/questions/8264906/should-i-use-a-php-extension-for-imagemagick-or-just-use-phps-exec-function-t)

对于所有 Image Magick PHP 函数，您应该查看官方指南：

[http://www.php.net/manual/en/book.imagick.php](http://www.php.net/manual/en/book.imagick.php)

我从 Image Magick 切换到 Graphics Magick，因为我听说它有更好的性能。它是 Image Magick 的一个分支，强调性能。Flickr 和 Etsy 等大型网站使用它：

[http://www.graphicsmagick.org/](http://www.graphicsmagick.org/)

本指南让我开始：

[http://devzone.zend.com/1559/manipulating-images-with-php-and-graphicsmagick/](http://devzone.zend.com/1559/manipulating-images-with-php-and-graphicsmagick/)

他们在 php.net 上有自己的手册：

[http://php.net/manual/en/book.gmagick.php](http://php.net/manual/en/book.gmagick.php)（大部分命令与 Image Magick 的相同）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T21:58:40.997

我更喜欢使用 exec() ，因为它比 Imagick （您发布的示例代码）更受支持，更易于使用并支持所有运算符（取决于您的版本），而 Imagick 又不支持。一些 Imagick 代码在不同版本中的工作方式不同；与几年前我第一次看到它时相比，Imagick 的例子要多得多。

说 Imagick 可以更快并且是/可以是？内置在 php 中，尽管有些人在安装它时遇到了麻烦。

我相信这个网站[http://valokuva.org/?cat=1](http://valokuva.org/?cat=1)属于 Imagick 开发人员，并且有很多示例。

我的网站 www.rubblewebs.co.uk/imagemagick 有很多带有 exec() 的 php 示例

至于您的其他两个问题，是的，您可以使用 Imagick 更改文件类型，但我不确定 basename.$ext - 为什么不试试呢？只要 basename 没有扩展名，它就可以工作，但您可能需要在引号中包含 basename.$ext。

至于速度，有时 GD 比 Imagick 或 Imagemagick 更快。你总是可以做一些测试。大约一年前我做了一些，你可以在你的服务器上尝试代码。[http://www.rubblewebs.co.uk/imagemagick/speed/Speed_tests_1.pdf](http://www.rubblewebs.co.uk/imagemagick/speed/Speed_tests_1.pdf)

# api - 谷歌地图网站和 API：不同的结果

> ID：10567487
> 
> 赞同：13
> 
> 时间：2012-05-12T21:20:13.847
> 
> 标签：api, google-maps, geolocation, request

为什么调用 Google Maps Geocoder API 返回的结果与我在浏览器中看到的结果不同？

这个返回许多项目：
[http ://maps.google.fr/maps?q=McDonald,+paris](http://maps.google.fr/maps?q=McDonald,+paris)

这个返回一个 ZERO_RESULT ：
[http ://maps.googleapis.com/maps/api/geocode/xml?McDonald,+paris&sensor=false](http://maps.googleapis.com/maps/api/geocode/xml?McDonald,+paris&sensor=false)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-12T21:42:00.943

常见问题解答：[https ://developers.google.com/maps/faq#geocoder_differences](https://developers.google.com/maps/faq#geocoder_differences)

API 地理编码器查找**邮政地址**。地图地理编码器使用大量数据（包括业务数据）来查找结果。

有 Places API 可以根据*type/class*查找位置，但它可能不适用于企业*名称*。[文档](https://developers.google.com/maps/documentation/places/)

# python - 登录到由组确定的页面

> ID：10567488
> 
> 赞同：1
> 
> 时间：2012-05-12T21:20:26.317
> 
> 标签：python, django, django-views

我的应用在视图中有一个基本的登录功能：

```
def login_page(request):
username = request.POST['username']
password = request.POST['password']
user = authenticate(username=username, password=password)
if user is not None:
    if user.is_active:
        login(request, user)
        return HttpResponseRedirect("main_page.html")
    else:
        return HttpResponseRedirect('/')
else:
    return HttpResponseRedirect('/') 
```

我在管理员（工作室、帐户等）中设置了不同的组，以便我可以在登录时将用户引导到他的特定组页面。我想做类似的事情：

```
from django.contrib.auth.models import User, Group

if user is not None:
    if user.is_active:
        login(request, user)
        if User.objects.filter(group__iexact='studio') 
            return HttpResponseRedirect("studio_page.html")
    else:
        return HttpResponseRedirect('/') 
```

但我认为我不能以这种方式访问​​组成员。这项任务的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:25:46.790

`User`与 具有多对多关系`Group`。所以你可以这样做：

```
if user.groups.filter(name='studio').exists(): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T21:27:49.970

user.groups 是一个查询集，其中包含用户所属的所有组，因此您只需检查该组中是否包含正确的组。像这样的东西：

```
if user.groups.filter(name='studio').exists():
    return HttpResponseRedirect("studio_page.html") 
```

# sproutcore - Sproutcore 在启动时发出错误

> ID：10567490
> 
> 赞同：0
> 
> 时间：2012-05-12T21:20:59.717
> 
> 标签：sproutcore

我是 sproutcore 的新手，并且按照教程中的说明正确安装了 sproutcore，包括从 rvm 到 ruby​​ 1.9.2 到所有 gems 依赖项。但是，每当我发出任何 sproutcore 命令时，它都会向我抛出这个错误。

```
sproutcore server fatal: Not a git repository (or any of the parent directories): .git fatal: Not a git repository (or any of the parent directories): .git fatal: Not a git repository (or any of the parent directories): .git fatal: Not a git repository (or any of the parent directories): .git /home/love/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.3/lib/bundler/rubygems_integration.rb:223:in `block in replace_bin_path': can't find executable sproutcore (Gem::Exception)
        from /home/love/.rvm/gems/gems/sproutcore-1.8.2/bin/sproutcore:16:in `<top (required)>'
        from /home/love/.rvm/gems/ruby-1.9.2-p320/bin/sproutcore:19:in `load'
        from /home/love/.rvm/gems/ruby-1.9.2-p320/bin/sproutcore:19:in `<main>' 
```

希望有人能解决，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T00:19:12.643

1.8.2 gem 存在问题，已修复并推高为 1.8.2.1

只需运行`gem update sproutcore`以获取最新版本。

查看博客更新了解更多详情：http: [//blog.sproutcore.com/sproutcore-1-8-2-released/](http://blog.sproutcore.com/sproutcore-1-8-2-released/)

# svn - SVN 提交似乎不起作用

> ID：10567494
> 
> 赞同：0
> 
> 时间：2012-05-12T21:21:18.477
> 
> 标签：svn, commit

我从要提交的目录执行 svn commit，看起来它接受了命令，但是当我签出同一个目录时，它给了我以前的副本 - 没有反映任何更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T06:34:24.010

验证提交的一种方法是照顾`svn log`它。您提交的变更集应该列在日志的顶部。否则出现问题或没有什么可提交的。

# compiler-construction - 用 clang-c 索引文件不会影响我的 ppIncludedFile 回调

> ID：10567497
> 
> 赞同：4
> 
> 时间：2012-05-12T21:21:52.807
> 
> 标签：compiler-construction, clang

我正在使用下面的 Objective-C 类来索引一个 Objective-C 文件。我尝试使用尖括号和带引号的头文件来解析同时使用`#include`and的文件。`#import`在任何情况下，我的`ppIncludedFile`回调都不会受到打击。当我获得其中定义的符号的索引回调时，Clang 显然包含了这些文件。但是关于整体结构，我得到了`enteredMainFile`，然后我也得到`startedTranslationUnit`了主文件。但我从来不知道它在寻找什么头文件。

根据文档：

> /** * \brief 当文件获得#included/#imported 时调用。*/
> CXIdxClientFile (*ppIncludedFile)(CXClientData client_data, const CXIdxIncludedFileInfo *);

这没有发生。这是一个错误，还是我需要做一些事情来启用这个回调？`libclang`我使用的版本来自 svn trunk r156259。

```
//
//  FZAClassParser.m
//  ObjectiveBrowser
//
//  Created by Graham Lee on 07/05/2012.
//  Copyright (c) 2012 Fuzzy Aliens Ltd.. All rights reserved.
//

#import "FZAClassParser.h"
#import "FZAClassParserDelegate.h"

int abortQuery(CXClientData client_data, void *reserved);
void diagnostic(CXClientData client_data,
                CXDiagnosticSet diagnostic_set, void *reserved);
CXIdxClientFile enteredMainFile(CXClientData client_data,
                                CXFile mainFile, void *reserved);
CXIdxClientFile ppIncludedFile(CXClientData client_data,
                               const CXIdxIncludedFileInfo *included_file);
CXIdxClientASTFile importedASTFile(CXClientData client_data,
                                   const CXIdxImportedASTFileInfo *imported_ast);
CXIdxClientContainer startedTranslationUnit(CXClientData client_data,
                                            void *reserved);
void indexDeclaration(CXClientData client_data,
                      const CXIdxDeclInfo *declaration);
void indexEntityReference(CXClientData client_data,
                          const CXIdxEntityRefInfo *entity_reference);

static IndexerCallbacks indexerCallbacks = {
    .abortQuery = abortQuery,
    .diagnostic = diagnostic,
    .enteredMainFile = enteredMainFile,
    .ppIncludedFile = ppIncludedFile,
    .importedASTFile = importedASTFile,
    .startedTranslationUnit = startedTranslationUnit,
    .indexDeclaration = indexDeclaration,
    .indexEntityReference = indexEntityReference
};

@interface FZAClassParser ()

- (void)realParse;

@end

@implementation FZAClassParser
{
    NSString *sourceFile;
    NSOperationQueue *queue;
}

@synthesize delegate;

- (id)initWithSourceFile:(NSString *)implementation {
    if ((self = [super init])) {
        if(![[NSFileManager defaultManager] fileExistsAtPath: implementation]) {
            return nil;
        }
        sourceFile = [implementation copy];
        queue = [[NSOperationQueue alloc] init];
    }
    return self;
}

- (void)parse {
    __weak id parser = self;
    [queue addOperationWithBlock: ^{ [parser realParse]; }];
}

- (void)realParse {
#pragma warning Pass errors back to the app
    @autoreleasepool {
        CXIndex index = clang_createIndex(1, 1);
        if (!index) {
            NSLog(@"fail: couldn't create translation unit");
            return;
        }
        CXTranslationUnit translationUnit = clang_parseTranslationUnit(index, [sourceFile fileSystemRepresentation], NULL, 0, NULL, 0, CXTranslationUnit_None);
        if (!translationUnit) {
            NSLog(@"fail: couldn't compile %@", sourceFile);
            return;
        }
        CXIndexAction action = clang_IndexAction_create(index);
        if ([self.delegate respondsToSelector: @selector(classParser:willBeginParsingFile:)]) {
            [self.delegate classParser: self willBeginParsingFile: sourceFile];
        }
        int indexResult = clang_indexTranslationUnit(action,
                                                     (__bridge CXClientData)self,
                                                     &indexerCallbacks,
                                                     sizeof(indexerCallbacks),
                                                     CXIndexOpt_SuppressWarnings,
                                                     translationUnit);
        if ([self.delegate respondsToSelector: @selector(classParser:didFinishParsingFile:)]) {
            [self.delegate classParser: self didFinishParsingFile: sourceFile];
        }
        clang_IndexAction_dispose(action);
        clang_disposeTranslationUnit(translationUnit);
        clang_disposeIndex(index);
        (void) indexResult;
    }
}

@end

int abortQuery(CXClientData client_data, void *reserved) {
    @autoreleasepool {
        FZAClassParser *parser = (__bridge FZAClassParser *)client_data;
        if ([parser.delegate respondsToSelector: @selector(classParserShouldAbort:)]) {
            return [parser.delegate classParserShouldAbort: parser];
        }
        return 0;
    }
}

void diagnostic(CXClientData client_data,
                CXDiagnosticSet diagnostic_set, void *reserved) {
    @autoreleasepool {
        FZAClassParser *parser = (__bridge FZAClassParser *)client_data;
        if ([parser.delegate respondsToSelector: @selector(classParser:foundDiagnostics:)]) {
            [parser.delegate classParser: parser foundDiagnostics: diagnostic_set];
        }
    }
}

CXIdxClientFile enteredMainFile(CXClientData client_data,
                                CXFile mainFile, void *reserved) {
    @autoreleasepool {
        FZAClassParser *parser = (__bridge FZAClassParser *)client_data;
        if ([parser.delegate respondsToSelector: @selector(classParser:enteredMainFile:)]) {
            return [parser.delegate classParser: parser enteredMainFile: mainFile];
        }
        return NULL;
    }
}

CXIdxClientFile ppIncludedFile(CXClientData client_data,
                               const CXIdxIncludedFileInfo *included_file) {
    @autoreleasepool {
        FZAClassParser *parser = (__bridge FZAClassParser *)client_data;
        if ([parser.delegate respondsToSelector: @selector(classParser:includedFile:)]) {
            return [parser.delegate classParser: parser includedFile: included_file];
        }
        return NULL;
    }
}

CXIdxClientASTFile importedASTFile(CXClientData client_data,
                                   const CXIdxImportedASTFileInfo *imported_ast) {
    @autoreleasepool {
        FZAClassParser *parser = (__bridge FZAClassParser *)client_data;
        if ([parser.delegate respondsToSelector: @selector(classParser:importedPCH:)]) {
            return [parser.delegate classParser: parser importedPCH: imported_ast];
        }
        return NULL;
    }
}

CXIdxClientContainer startedTranslationUnit(CXClientData client_data,
                                            void *reserved) {
    @autoreleasepool {
        FZAClassParser *parser = (__bridge FZAClassParser *)client_data;
        if ([parser.delegate respondsToSelector: @selector(classParserStartedTranslationUnit:)]) {
            return [parser.delegate classParserStartedTranslationUnit: parser];
        }
        return NULL;
    }
}

void indexDeclaration(CXClientData client_data,
                      const CXIdxDeclInfo *declaration) {
    @autoreleasepool {
        FZAClassParser *parser = (__bridge FZAClassParser *)client_data;
        if ([parser.delegate respondsToSelector: @selector(classParser:foundDeclaration:)]) {
            [parser.delegate classParser: parser foundDeclaration: declaration];
        }
    }
}

void indexEntityReference(CXClientData client_data,
                          const CXIdxEntityRefInfo *entity_reference) {
    @autoreleasepool {
        FZAClassParser *parser = (__bridge FZAClassParser *)client_data;
        if ([parser.delegate respondsToSelector: @selector(classParser:foundEntityReference:)]) {
            [parser.delegate classParser: parser foundEntityReference: entity_reference];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T21:09:52.647

可能不会记录当时的处理，`#include`因为那里有很多信息（一般情况下可能不需要）。如果未启用该选项，则有一个`createPreporcessingRecord`功能不会生成数据。

Clang 文档描述了[CXTranslationUnit_DetailedPreprocessingRecord](http://clang.llvm.org/doxygen/group__CINDEX__TRANSLATION__UNIT.html#ggab1e4965c1ebe8e41d71e90203a723fe9a9e1dd69c4a2ff7954dca8df41a63c0e6)，您可以将其用作标志而不是`CXTranslationUnit_None`可能有帮助的标志。

# c# - 为什么程序使用添加到委托的最后一个方法？

> ID：10567499
> 
> 赞同：1
> 
> 时间：2012-05-12T21:22:16.653
> 
> 标签：c#, delegates

在 button1_click 上出现一个又一个消息框 - 首先显示 30，第二个显示 200：

```
public partial class Form1 : Form
{

    delegate void myMathFunction(int j, int q);

    void add(int x, int y) {MessageBox.Show((x + y).ToString());}

    void multiply(int x, int y){MessageBox.Show((x*y).ToString());}

    private void button1_Click(object sender, EventArgs e)
    {
        myMathFunction foo = new myMathFunction(add);
        foo+= new myMathFunction(multiply);

        foo.Invoke(10, 20);
    }

    public Form1() { InitializeComponent(); }
} 
```

但以下只是直接到 200，但我已经将这两种方法都分配给了委托 - 添加发生了什么，为什么它选择使用乘法？

```
public partial class Form1 : Form
{

    delegate int myMathFunction(int j, int q);

    int add(int x, int y){return x + y;}

    int multiply(int x, int y) {return x * y;}

    private void button1_Click(object sender, EventArgs e)
    {
        myMathFunction foo = new myMathFunction(add);
        foo += new myMathFunction(multiply);

        MessageBox.Show(foo.Invoke(10, 20).ToString());
    }

    public Form1() { InitializeComponent(); }
} 
```

是否可以修改第二个代码示例，以便委托运行 add 方法而不是 multiply 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T21:34:22.997

当您的委托附加了多个函数时，将依次调用每个函数。如果委托具有非 void 返回值，则最后一个函数的返回值就是返回的值。

[语言规范](http://go.microsoft.com/fwlink/?LinkId=199552)，15.4 委托调用，说

> 如果委托调用包含输出参数或返回值，则它们的最终值将来自列表中最后一个委托的调用。

因此，当您调用 时`foo.Invoke(10, 20)`，会发生以下情况：

*   首先，`add(10, 20)`调用它返回 30。
*   然后，`multiply(10, 20)`调用它返回 200，并将该值返回给原始调用者。

在您提出的后续问题中

> 是否可以修改第二个代码示例，以便委托运行 add 方法而不是 multiply 方法？

如上所述，方法`add`和**方法**`multiply`都被执行。*最后执行*的方法的返回值是返回给调用者的值。因此，如果您希望`add`返回调用产生的值，它必须是添加到委托实例的最后一个方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T21:38:59.263

来自[C# 语言规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-334.pdf)（§22.3）：

> 调用其调用列表包含多个条目的委托实例，通过按顺序同步调用调用列表中的每个方法来进行。每个所谓的方法都传递给委托实例的相同参数集。如果此类委托调用包含引用参数（第 17.5.1.2 节），则每次方法调用都将引用同一个变量；调用列表中的一种方法对该变量的更改将对调用列表下方的方法可见。 **如果委托调用包含输出参数或返回值，则它们的最终值将来自列表中最后一个委托的调用。**如果在处理此类委托的调用过程中发生异常，并且该异常未在被调用的方法中捕获，则在调用该委托的方法中继续搜索异常捕获子句，并在调用之后继续搜索任何方法不调用列表。

# objective-c - 当我加载包含 webview 的视图控制器时，iphone 应用程序崩溃

> ID：10567500
> 
> 赞同：0
> 
> 时间：2012-05-12T21:22:21.940
> 
> 标签：objective-c, ios, uiwebview, singleton, exc-bad-access

我有一个 NavigationController -> UIViewController -> UIWebView

我有一个从 tableViewController 到 NavigationController 的模态序列。

每当我执行此 segue 时，应用程序就会崩溃。我没有在控制器中编写任何代码，只是简单地在情节提要中放置了一个 uiwebview。如果我删除 uiwebview，segue 运行得很好。

调试器在我的单例对象“CoData.m”中的单例创建行处停止。当我打印它的描述时，它会打印一个 uiwebview 描述，但它是一个 NSObject 类型的自定义类。

见这里[http://cl.ly/GZWJ](http://cl.ly/GZWJ) ![截屏](../Images/98fe0c9137aaf75d8947042d5bc7d38b.png)
和这里[http://cl.ly/Gaig](http://cl.ly/Gaig) ![截屏](../Images/e754cf6d1a4f52f54f755d5f1a10e519.png)发生了 什么？

这是它崩溃的地方。

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"webView" sender:self];
} 
```

编辑** CoData.m 的删节内容

```
import "CoData.h"

@implementation CoData

CWL_SYNTHESIZE_SINGLETON_FOR_CLASS(CoData);

@synthesize photoSessions = _photoSessions;
@synthesize userPhotos = _userPhotos;
@synthesize photoSet = _photoSet;
@synthesize user = _user;
@synthesize pushEnabled = _pushEnabled;
@synthesize showToast = _showToast;
@synthesize highQualityPhotos = _highQualityPhotos;
@synthesize photoQualityChanged = _photoQualityChanged;
@synthesize isRetina = _isRetina;
@synthesize campers = _campers;
@synthesize camperNames = _camperNames;
@synthesize infoStream = _infoStream;

-(NSCache *)photoSet
{
    if(!_photoSet){
        _photoSet = [[NSCache alloc] init];
    }
    return _photoSet;
}

-(NSDictionary *)user
{
    if(!_user){
        _user = [[NSDictionary alloc] init];
    }
    return _user;
}

-(BOOL)isRetina
{
    if(!_isRetina){
        _isRetina = ([[UIScreen mainScreen] respondsToSelector:@selector(scale)] && [[UIScreen mainScreen] scale] == 2);
    }
    return _isRetina;
}

-(void)loadDataFromPlist
{

}

-(void)loginAPIUser
{

}

-(void)saveDataToPlist
{

}

@end 
```

和 CWL_SYNTHESIZE_SINGLETON_FOR_CLASS 宏

```
//
//  CWLSynthesizeSingleton.h
//  CocoaWithLove
//
//  Created by Matt Gallagher on 2011/08/23.
//  Copyright (c) 2011 Matt Gallagher. All rights reserved.
//
//  Permission is given to use this source code file, free of charge, in any
//  project, commercial or otherwise, entirely at your risk, with the condition
//  that any redistribution (in part or whole) of source code must retain
//  this copyright and permission notice. Attribution in compiled projects is
//  appreciated but not required.
//

#import <objc/runtime.h>

#define CWL_DECLARE_SINGLETON_FOR_CLASS_WITH_ACCESSOR(classname, accessorMethodName) \
+ (classname *)accessorMethodName;

#if __has_feature(objc_arc)
    #define CWL_SYNTHESIZE_SINGLETON_RETAIN_METHODS
#else
    #define CWL_SYNTHESIZE_SINGLETON_RETAIN_METHODS \
    - (id)retain \
    { \
        return self; \
    } \
     \
    - (NSUInteger)retainCount \
    { \
        return NSUIntegerMax; \
    } \
     \
    - (oneway void)release \
    { \
    } \
     \
    - (id)autorelease \
    { \
        return self; \
    }
#endif

#define CWL_SYNTHESIZE_SINGLETON_FOR_CLASS_WITH_ACCESSOR(classname, accessorMethodName) \
 \
static classname *accessorMethodName##Instance = nil; \
 \
+ (classname *)accessorMethodName \
{ \
    @synchronized(self) \
    { \
        if (accessorMethodName##Instance == nil) \
        { \
            accessorMethodName##Instance = [super allocWithZone:NULL]; \
            accessorMethodName##Instance = [accessorMethodName##Instance init]; \
            method_exchangeImplementations(\
                class_getClassMethod([accessorMethodName##Instance class], @selector(accessorMethodName)),\
                class_getClassMethod([accessorMethodName##Instance class], @selector(cwl_lockless_##accessorMethodName)));\
            method_exchangeImplementations(\
                class_getInstanceMethod([accessorMethodName##Instance class], @selector(init)),\
                class_getInstanceMethod([accessorMethodName##Instance class], @selector(cwl_onlyInitOnce)));\
        } \
    } \
     \
    return accessorMethodName##Instance; \
} \
 \
+ (classname *)cwl_lockless_##accessorMethodName \
{ \
    return accessorMethodName##Instance; \
} \
\
+ (id)allocWithZone:(NSZone *)zone \
{ \
    return [self accessorMethodName]; \
} \
 \
- (id)copyWithZone:(NSZone *)zone \
{ \
    return self; \
} \
- (id)cwl_onlyInitOnce \
{ \
    return self;\
} \
 \
CWL_SYNTHESIZE_SINGLETON_RETAIN_METHODS

#define CWL_DECLARE_SINGLETON_FOR_CLASS(classname) CWL_DECLARE_SINGLETON_FOR_CLASS_WITH_ACCESSOR(classname, shared##classname)
#define CWL_SYNTHESIZE_SINGLETON_FOR_CLASS(classname) CWL_SYNTHESIZE_SINGLETON_FOR_CLASS_WITH_ACCESSOR(classname, shared##classname) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:43:22.000

我查看了来自[http://cocoawithlove.com/2008/11/singletons-appdelegates-and-top-level.html](http://cocoawithlove.com/2008/11/singletons-appdelegates-and-top-level.html)的代码。好吧..你不能像这样制作单身人士的任何理由：

```
+(MyClass *)singleton {
 static dispatch_once_t pred;
 static MyClass *shared = nil;

 dispatch_once(&pred, ^{
  shared = [[MyClass alloc] init];
 });
 return shared;
} 
```

?

([源](http://cocoasamurai.blogspot.com/2011/04/singletons-your-doing-them-wrong.html))

# c# - 通过c#交换powershell没有正确显示结果

> ID：10567503
> 
> 赞同：2
> 
> 时间：2012-05-12T21:23:07.677
> 
> 标签：c#, powershell, exchange-server

我有以下执行交换 cmdlet 的代码，但是当我得到结果时，它给了我一个像这样的值：

Microsoft.Exchange.Management.RecipientTasks.MailboxAcePresentationObject

如何获取此对象的文本值而不是对象本身？

这是我用来获得价值的代码。

```
 powershell.Runspace = runspace;

    powershell = PowerShell.Create();
    PSCommand command = new PSCommand();
    command.AddCommand("Get-MailboxPermission");
    command.AddParameter("Identity", "myname");
    powershell.Commands = command;
    powershell.Runspace = runspace;
      Collection<PSObject> result = powershell.Invoke();

    StringBuilder sb = new StringBuilder();

    foreach (PSObject ps in result)
    {

        sb.AppendLine(ps.ToString());

    }

    sb.AppendLine();

    lbl.Text += sb.ToString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T03:29:09.537

您希望字符串表示形式是什么？ToString 为您提供类名（这是对象的默认行为）

您可以查看[类定义](http://msdn.microsoft.com/en-us/library/microsoft.exchange.management.recipienttasks.mailboxacepresentationobject_members%28EXCHG.140%29.aspx)以确定要显示的内容。

如果您想像 Exchange shell 一样显示它，您可以查看它的视图是如何在 exchange.format.ps1xml 中定义的 - 这是该文件中的一个片段，似乎表明它显示了属性 Identity、User、AccessRights、IsInherited ，并拒绝。

或者，您可以更改您的管道以执行输出字符串（或格式表或其他），以便它在离开 PowerShell 之前已被格式化为所需的字符串。

```
 <View>
        <Name>Microsoft.Exchange.Management.RecipientTasks.MailboxAcePresentationObject</Name>
        <ViewSelectedBy>
            <TypeName>Microsoft.Exchange.Management.RecipientTasks.MailboxAcePresentationObject</TypeName>
        </ViewSelectedBy>
        <TableControl>
            <TableHeaders>
                <TableColumnHeader>
                    <Label>Identity</Label>
                    <Width>20</Width>
                </TableColumnHeader>
                <TableColumnHeader>
                    <Label>User</Label>
                    <Width>20</Width>
                </TableColumnHeader>
                <TableColumnHeader>
                    <Label>AccessRights</Label>
                </TableColumnHeader>
                <TableColumnHeader>
                    <Label>IsInherited</Label>
        <Width>11</Width>
                </TableColumnHeader>
                <TableColumnHeader>
                    <Label>Deny</Label>
                    <Width>5</Width>
                </TableColumnHeader>
            </TableHeaders>
            <TableRowEntries>
                <TableRowEntry>
                    <TableColumnItems>
                        <TableColumnItem>
                            <PropertyName>Identity</PropertyName>
                        </TableColumnItem>
                        <TableColumnItem>
                            <PropertyName>User</PropertyName>
                        </TableColumnItem>
                        <TableColumnItem>
                            <PropertyName>AccessRights</PropertyName>
                        </TableColumnItem>
                        <TableColumnItem>
                            <PropertyName>IsInherited</PropertyName>
                        </TableColumnItem>
                        <TableColumnItem>
                            <PropertyName>Deny</PropertyName>
                        </TableColumnItem>
                    </TableColumnItems>
                </TableRowEntry>
            </TableRowEntries>
        </TableControl>
    </View> 
```

# java - 与术语 API 相关的接口

> ID：10567507
> 
> 赞同：-1
> 
> 时间：2012-05-12T21:23:23.573
> 
> 标签：java, terminology

我正在尝试处理上述问题。我知道接口包含没有实现的方法签名。该任务留给实现接口的类。我很难理解接口与 API 的关系。当我们想使用数组列表或字体时，我们将包导入到我们的类中，对吗？但是我们实现的是什么接口呢？任何帮助将不胜感激...谢谢

java.awt.font==>提供与字体相关的类和接口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T21:27:24.137

你并没有通过一个包来实现*任何*接口`import`——你只是提供了一些语法糖来使编写 Java 代码的痛苦比其他方式少一些。在字节码中，一切都是完全合格的。

接口可以*定义*一个 API，也可以是API 的*一部分*。

一个包可能*包含*一个 API，或者是API 的*一部分*，或者只是随机的东西。

如果您实际*实现*了一个接口，那么您只是在实现一个接口——否则您只是在*使用*一个接口，或者*引用*一个接口。这*需要*导入包/类/接口，但仅导入相同是不够的。

# vb6 - 将 VB6 InputBox() 标题更改为英文

> ID：10567510
> 
> 赞同：1
> 
> 时间：2012-05-12T21:24:16.983
> 
> 标签：vb6

我有一个输入框。

此输入框带有法语标题（“Ok”和“Annuler”）而不是（“Ok”和“Cancel”）

如何允许显示英文版？

该应用程序是用 XP 法语版本构建的。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:29:28.263

该`InputBox()`函数在 VB6 运行时 DLL 中实现，因此受制于其本地化（以及错误消息文本）。您应该确保`msvbvm60.dll`从[Service Pack 6 运行时包](http://www.microsoft.com/en-us/download/details.aspx?id=24417)分发官方（语言中立） 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T15:42:58.377

如果 EXE 是使用 VB6 的本地化版本构建的，则可能会发生这种情况。

> 如果您在给定语言版本的 Visual Basic 上编译任何本地化应用程序，应用程序 .exe、.dll 和 .ocx 文件仍将调用与编译器语言对应的运行时资源。

[Microsoft 知识库文章 236404](http://support.microsoft.com/kb/236404)中有一些可能的修复

# excel - 使用 AppleScript 将 CSV 文件读取为数组

> ID：10567512
> 
> 赞同：5
> 
> 时间：2012-05-12T21:24:45.903
> 
> 标签：excel, macos, csv, applescript

我想以二维数组的形式读入 CSV 文件，然后将其返回到 CSV 文件。假设这是我的 CSV 文件。它是一个 excel 文件和 | 表示相邻单元格：

```
family | type
Doctor | Pediatrics
Engineer | Chemical 
```

据我了解，applescript 上没有数组，只有列表和记录。如果使用 XLSX 文件执行此操作会更好，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T04:13:58.400

Nigel 的 CSV-to-list 转换器是我见过的最好的...

[http://macscripter.net/viewtopic.php?pid=125444#p125444](http://macscripter.net/viewtopic.php?pid=125444#p125444)

对于您的示例，请使用以下设置：

```
set csvText to "family | type
Doctor | Pediatrics
Engineer | Chemical"
csvToList(csvText, {separator:"|"}, {trimming:true}) 
```

v2

```
set csvText to read "/Users/user1385816/Desktop/yourfile.csv"
csvToList(csvText, {}, {trimming:true}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T23:45:42.990

数组只是 applescript 中的一个列表，因此您需要一个二维数组或 applescript-speak 中的列表列表。如果您了解 applescript 的文本项分隔符，那么您的任务就是将字符串转换为列表的简单操作，反之亦然。所以我给你写了几个处理程序来让你轻松完成任务；textToTwoDArray() 和 twoDArrayToText()。第一个示例展示了如何使用 textToTwoDArray() 将字符串转换为列表列表。

注意：您必须注意文本文件中的行尾，因为它们可以是回车（字符 id 13）或换行符（字符 id 10）。您可以看到我在代码中使用了字符 id 10，但如果您没有得到正确的结果，请尝试“13”。

```
set fileText to "family | type
Doctor | Pediatrics
Engineer | Chemical"

textToTwoDArray(fileText, character id 10, " | ")

on textToTwoDArray(theText, mainDelimiter, secondaryDelimiter)
    set {tids, text item delimiters} to {text item delimiters, mainDelimiter}
    set firstArray to text items of theText
    set text item delimiters to secondaryDelimiter
    set twoDArray to {}
    repeat with anItem in firstArray
        set end of twoDArray to text items of anItem
    end repeat
    set text item delimiters to tids
    return twoDArray
end textToTwoDArray 
```

以下是如何使用 twoDArrayToText() 将列表列表转换回您的字符串。

```
set twoDArray to {{"family", "type"}, {"Doctor", "Pediatrics"}, {"Engineer", "Chemical"}}

twoDArrayToText(twoDArray, character id 10, " | ")

on twoDArrayToText(theArray, mainDelimiter, secondaryDelimiter)
    set {tids, text item delimiters} to {text item delimiters, secondaryDelimiter}
    set t to ""
    repeat with anItem in theArray
        set t to t & (anItem as text) & mainDelimiter
    end repeat
    set text item delimiters to tids
    return (text 1 thru -2 of t)
end twoDArrayToText 
```

所以现在你所要做的就是弄清楚如何用 applescript 读写文本文件。祝你好运 ;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T22:52:20.347

如果您的问题只是关于在 AppleScript 中对 CSV 数据进行建模，则解决方案是使用如下记录列表：

```
set csvData to {{family:"Doctor", type:"Engineer"}, {family:"Engineer", type:"Chemical"}} 
```

`repeat with aRow in csvData`然后，您可以在循环中再次读取它。

技术说明：AppleScript 列表是作为向量实现的，这意味着它们是有序的并且可以通过数字索引（从索引 1 开始）访问——它们的行为与大多数其他语言中的数组非常相似。

# ruby-on-rails - 通过 Railtie 更好地控制中间件排序？

> ID：10567514
> 
> 赞同：1
> 
> 时间：2012-05-12T21:25:15.400
> 
> 标签：ruby-on-rails, ruby, rack, middleware

有些 gems/libraries 可以从更好地控制它们注入中间件的位置中受益。

特别是如果异常处理中间件位于堆栈的顶部会很好。

有没有办法做到这一点，还是只能通过编辑 config.ru 来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-27T03:24:23.223

不确定这是否需要：[http ://api.rubyonrails.org/classes/Rails/Configuration/MiddlewareStackProxy.html](http://api.rubyonrails.org/classes/Rails/Configuration/MiddlewareStackProxy.html)

可以执行以下操作：

```
config.middleware.insert_before Rack::Head, Magical::Unicorns
config.middleware.insert_after Rack::Head, Magical::Unicorns
config.middleware.swap ActionDispatch::Flash, Magical::Unicorns
config.middleware.delete ActionDispatch::Flash 
```

你可以定义你的 Railtie 并操纵中间件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:32:32.820

除了手动对中间件堆栈进行排序之外，目前没有任何内在的方法可以做到这一点。我见过一个黑客，你可以用猴子修补 Rack::Builder 来为你提供一些推送/弹出功能。

[https://github.com/joshbuddy/rack-capabilities](https://github.com/joshbuddy/rack-capabilities)

# redis - 从多个其他集合中删除一组成员的最佳方法

> ID：10567523
> 
> 赞同：0
> 
> 时间：2012-05-12T21:26:37.757
> 
> 标签：redis, high-load

假设我有一个拥有 50 000 名成员的社区。因此，有一个 Redis 集合调用`community_###_members`了 50 000 个用户的 sha1 密钥，并且对于每个用户，他自己的集合`user_###_communities`存在于上面社区的 sha1 哈希

有一段时间我决定删除社区..杀死所有成员的最佳算法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T10:05:46.530

假设您真的想实际删除不存在的社区的成员，它类似于（python 代码示例）：

```
memebrs = redis.smembers('community_members')
pipe = redis.pipeline()
pipe.delete('community_memebrs')
for member in members:
   pipe.delete(member)
pipe.execute() 
```

如果社区非常大，您可能希望一次执行 N 个成员，因此在您完成所有任务之前，服务器不会停止。

# c++ - 使用无符号数据类型强制执行非负值和/或有效值是最佳做法吗？

> ID：10567529
> 
> 赞同：5
> 
> 时间：2012-05-12T21:27:41.110
> 
> 标签：c++, unsigned, signed

最近，在重构会议期间，我正在查看我编写的一些代码，并注意到以下几点：

1.  我有用于`unsigned char`在区间 [0-255] 中强制执行值的函数。
2.  使用的其他函数`int`或带有语句的`long`数据类型在函数内以*静默*方式将值钳制在有效范围内。`if`
**   包含在类中和/或声明为具有未知`upper bound`但已知且明确的非负数的函数的参数的值`lower bound`被声明为`unsigned`数据类型（`int`或`long`取决于超过 4,000,000,000的*可能性）。*`upper bound`*

 *这种不一致令人不安。这是我应该继续的好习惯吗？我应该重新考虑逻辑并坚持使用`int`或`long`使用适当的非通知钳位吗？

关于使用“适当”的注意事项：在某些情况下，我使用`signed`数据类型并在值超出范围时抛出通知异常，但这些是为`divde by zero`和保留的`constructors`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T22:52:41.010

在 C 和 C++ 中，有符号和无符号整数类型具有某些特定特征。

有符号类型的界限远非零，超出这些界限的操作具有未定义的行为（或在转换的情况下由实现定义）。

无符号类型的下限为零，上限远非零，超出这些界限的操作会悄悄地回绕。

通常，当操作超出这些界限（饱和度、发出错误信号等）时，您真正想要的是具有某些特定行为的特定值范围。有符号和无符号类型都不完全适合这种要求。混合有符号和无符号类型的操作可能会令人困惑；此类操作的规则由语言定义，但它们并不总是显而易见的。

无符号类型可能会出现问题，因为下限为零，因此具有合理值（远不及上限）的操作可能会以意想不到的方式表现。例如，这个：

```
for (unsigned int u = 10; u >= 0; u --) {
    // ...
} 
```

是一个无限循环。

一种方法是对并非绝对需要无符号表示的所有内容使用有符号类型，选择足够宽的类型来保存您需要的值。这避免了有符号/无符号混合操作的问题。例如，Java 通过完全没有无符号类型来强制执行这种方法。（就个人而言，我认为这个决定有点矫枉过正，但我​​可以看到它的优势。）

另一种方法是对逻辑上不能为负的值使用无符号类型，并对可能下溢或混合有符号和无符号类型的表达式非常小心。

（还有一个是用你想要的行为来定义你自己的类型，但这有成本。）

正如 John Sallay 的回答所说，一致性可能比您采用哪种特定方法更重要。

我希望我能给出一个“这种方式是对的，那种方式是错误的”的答案，但真的没有。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T21:41:06.737

最大的好处`unsigned`是它记录了值始终为正的代码。

它并不能真正为您带来任何安全感，因为超出未签名的范围通常是无意的，并且可能会导致与已签名一样多的挫败感。

> 我有使用 unsigned char 来强制执行区间 [0-255] 中的值的函数。

如果您依赖环绕，则使用`uint8_t`as`unsigned char`可能超过 8 位。

> 其他函数使用 int 或 long 数据类型以及函数内部的 if 语句以静默地将值钳制在有效范围内。

这真的是正确的行为吗？

> 包含在类中和/或声明为具有未知上限但已知且明确的非负下限的函数的参数的值被声明为无符号数据类型（int 或 long，具体取决于上限超过 4,000,000,000 的可能性）。

你从哪里得到 4,000,000,000 的上限？您的界限在`INT_MAX`and之间`INT_MIN`（您也可以使用`std::numeric_limits`. 在 C++11 中，您可以使用`decltype`来指定可以包装到模板/宏中的类型：

```
decltype(4000000000) x; // x can hold at least 4000000000 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T21:46:54.533

我可能会认为一致性是最重要的。如果您选择一种方式并正确执行，那么其他人将很容易在以后的某个时间点了解您在做什么。在正确地做这件事上，有几个问题需要考虑。

首先，检查整数变量 n 是否在有效范围内是很常见的，比如 0 到 N 来写：

```
if ( n > 0 && n <= N ) ... 
```

这种比较只有在 n 有符号时才有意义。如果 n 是无符号的，那么它永远不会小于 0，因为负值会环绕。如果只是这样，您可以重写上面的内容：

```
if ( n <= N ) ... 
```

如果有人不习惯看到这一点，他们可能会感到困惑并认为你做错了。

其次，我要记住，在 c++ 中不能保证整数的类型大小。因此，如果您希望某些内容以 255 为界，则 unsigned char 可能无法解决问题。如果变量具有特定含义，那么 typedef 显示该含义可能很有价值。例如，size_t 是一个与内存地址一样宽的值。这意味着您可以将它与阵列一起使用，而不必担心在 32 或 64 位机器上。我尽可能尝试使用此类 typedef，因为它们清楚地传达了我使用该类型的原因。（size_t 因为我正在访问一个数组。）

第三，回到环绕的问题。你想用无效号码发生什么。在 unsigned char 的情况下，如果您使用类型来绑定数据，那么您将无法检查是否输入了超过 255 的值。这可能是也可能不是问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T21:38:07.660

这是一个主观问题，但我会给你我的看法。

就个人而言，如果没有为我尝试执行的操作指定类型，IE std::size_t 用于大小和索引，uintXX_t 用于特定位深度等......那么我默认为无符号，除非我需要使用负值。

所以这不是使用它来强制执行正值的情况，而是我必须`signed`明确选择特征。

除此之外，如果您担心边界，那么您需要进行自己的边界检查以确保您没有溢出。

但我说，更多时候不是你的数据类型将由你的上下文和你应用它的函数的返回类型决定。*

# cocoa - 在屏幕上拖动 UIImageViews？

> ID：10567535
> 
> 赞同：0
> 
> 时间：2012-05-12T21:28:04.263
> 
> 标签：cocoa, uiimageview

我的应用程序中有以下代码，我每次都可以复制和粘贴，但我宁愿让它在其他领域也可以重复使用。它允许我在屏幕上拖动 UIImageViews，但我不喜欢它很容易出错的事实！

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
UITouch *touch = [touches anyObject];
CGPoint location = [touch locationInView:self.view];

if (touch.view == first) {
    first.center = location;

    if (((first.center.x >= 100) && (first.center.y >= 100) &&
         (first.center.x <= 150) && (first.center.y <= 150))) {

        first.center = CGPointMake(125, 125);
        [first setUserInteractionEnabled:NO];

        theCentre = [[NSUserDefaults standardUserDefaults] init];

        NSString *centre = NSStringFromCGPoint(first.center);

        [theCentre setObject:centre forKey:@"centre"];

        //  NSLog(@"%@", [theCentre objectForKey:@"centre"]);
        [theCentre synchronize];

    }

}
if (touch.view == second) {
    second.center = location;

    if (((second.center.x >= 150) && (second.center.y >= 150) &&
         (second.center.x <= 180) && (second.center.y <= 180))) {

        second.center = CGPointMake(165, 165);
        [second setUserInteractionEnabled:NO];

        theCentre = [[NSUserDefaults standardUserDefaults] init];

        NSString *centre = NSStringFromCGPoint(second.center);

        [theCentre setObject:centre forKey:@"secondCentre"];

        //  NSLog(@"%@", [theCentre objectForKey:@"centre"]);
        [theCentre synchronize];
}
}
if (touch.view == third) {
    third.center = location;

    if (((third.center.x >= 200) && (third.center.y >= 200) &&
         (third.center.x <= 230) && (third.center.y <= 230))) {

        third.center = CGPointMake(215, 215);
        [third setUserInteractionEnabled:NO];

        theCentre = [[NSUserDefaults standardUserDefaults] init];

        NSString *centre = NSStringFromCGPoint(third.center);

        [theCentre setObject:centre forKey:@"thirdCentre"];

        //  NSLog(@"%@", [theCentre objectForKey:@"centre"]);
        [theCentre synchronize];
    }

}  

}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
[self touchesBegan:touches withEvent:event];
} 
```

我已经尝试过快速枚举，但这使得一个 imageView 移动，而其他的只是从屏幕上消失了！显然不是想要的效果...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T21:42:49.947

我建议为此使用 UIGestureRecognizers。设置图像视图后，请编写：

```
NSArray *imageViews = [NSArray arrayWithObjects:first, second, third, nil];
for (UIView *imageView in imageViews) {
    UIPanGestureRecognizer *panGR = [[UIPanGestureRecognizer alloc] 
        initWithTarget:self action:@selector(handlePanGesture:)]
    [imageView addGestureRecognizer:panGR];
    [panGR release];
} 
```

然后实现手势处理程序：

```
- (void)handlePanGesture:(UIGestureRecognizer *)gestureRecognizer {
    UIPanGestureRecognizer *panGR = (UIPanGestureRecognizer *)gestureRecognizer;
    UIView *gestureView = [panGR view];
    CGPoint translation = [panGR translationInView:gestureView];
    gestureView.center = CGPointMake(gestureView.center.x + translation.x,
                                     gestureView.center.y + translation.y);
    [panGR setTranslation:CGPointZero inView:gestureView];
} 
```

此代码未经测试（用记事本编写），但这是正确的方向。

# jquery - 反向地理编码将坐标转换为地址？

> ID：10567539
> 
> 赞同：4
> 
> 时间：2012-05-12T21:29:24.800
> 
> 标签：jquery, google-maps, google-maps-api-3, geocoding, reverse-geocoding

我在这里错过了一些完全明显的东西吗？

我的意图是将坐标转换为地址并将其插入 div

[http://jsfiddle.net/sHLG6/1/](http://jsfiddle.net/sHLG6/1/)

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-12T22:18:16.680

我看到你的小提琴立即弹出了 3 件事。

1.  您从未引用过 Google javascript 库
2.  你从来没有打电话`initialize()`和`codeLatLng()`
3.  您`value`在 div 元素上使用了该属性，但您真正想要的是`getAttribute()`方法。

[我改变了你的小提琴，所以它现在可以工作了](http://jsfiddle.net/sHLG6/2/)

为了完整起见，原代码如下

```
<div id="latlng" value="54.9882,-1.5747"></div>
<div id="test"></div>
var geocoder; function initialize() {
geocoder = new google.maps.Geocoder(); } function codeLatLng() {

    var input = document.getElementById("latlng").value;
    var latlngStr = input.split(",", 2);
    var lat = parseFloat(latlngStr[0]);
    var lng = parseFloat(latlngStr[1]);
    var latlng = new google.maps.LatLng(lat, lng);
    geocoder.geocode({
        'latLng': latlng
    }, function(results, status) {

        document.getElementById("test").innerHTML = '' + (results[4].formatted_address); + ''
    }); }​ 
```

工作代码：

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
<div id="latlng" value="54.9882,-1.5747"></div>
<div id="test"></div>
var geocoder;
initialize();
codeLatLng();
function initialize() {

    geocoder = new google.maps.Geocoder();
}

function codeLatLng() {

    var input = document.getElementById("latlng").getAttribute('value');
console.log(input);
    var latlngStr = input.split(",", 2);
    var lat = parseFloat(latlngStr[0]);
    var lng = parseFloat(latlngStr[1]);
    var latlng = new google.maps.LatLng(lat, lng);
    geocoder.geocode({
        'latLng': latlng
    }, function(results, status) {

        document.getElementById("test").innerHTML = '' + (results[4].formatted_address); + ''
    });
}​ 
```

# c# - ListView 中的 foreach 语句

> ID：10567542
> 
> 赞同：1
> 
> 时间：2012-05-12T21:29:52.927
> 
> 标签：c#, listview, textbox, foreach, listviewitem

```
private void listView1_ItemCheck(object sender, ItemCheckEventArgs e)
{
    textBox1.ResetText();

    foreach (ListViewItem lvi in listView1.Items)
    {
        if (lvi.Checked == true)
        {
            textBox1.AppendText(lvi.Text);
        }
    }
} 
```

我认为我在那里尝试做的事情很明显，但结果是我刚刚单击的列表框项没有显示在文本框中。它在我选中另一个（或取消选中同一个）后显示。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T21:39:13.680

使用`ItemChecked`事件而不是`ItemCheck`事件（后者在项目的检查状态更改之前引发，这就是为什么您只有在检查另一个项目后才能看到它的效果）。

# c# - Entity Framework OfType() 动态

> ID：10567545
> 
> 赞同：3
> 
> 时间：2012-05-12T21:30:04.247
> 
> 标签：c#, entity, oftype

你可以怎么做：

```
Type ty = Type.GetType("Student");
var students = db.People.OfType(ty); 
```

以一种可行的方式？

为什么？

我只以人/学生为例，这里有一个稍微更详细的解释，说明我为什么要这样做。

我希望能够将邮政地址信息存储在与特定文化相关的关系结构中。我的想法是有一个基本类型：“地址”和它的继承类型，例如：“UK_Address”。然后我的“人”实体将只有一个“地址”参考。我会将特定地址类型的名称存储为 Person 类型中的字符串，并使用此名称来指示程序在与地址交互时的行为。

如果这有意义！？：秒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T22:14:47.283

如果您正在寻找以下方面的答案：

```
Type ty = ...
var students = db.People.OfType<ty>(); //Doesn't work, see below 
```

那么我认为没有反思就行不通。看

[IQueryable OfType<T> 其中 T 是运行时类型](https://stackoverflow.com/questions/3669760/iqueryable-oftypet-where-t-is-a-runtime-type)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-12T23:18:45.137

```
Type ty = typeof(Student); // tyopeof() is "safer" than Type.GetType()
var students = db.People.Where(x=>ty.IsAssignableFrom(x.GetType())); 
```

# php - Kohana 3.2 - 如何通过路由发送变量？

> ID：10567547
> 
> 赞同：0
> 
> 时间：2012-05-12T21:30:25.280
> 
> 标签：php, routing, kohana, url-routing, kohana-3

我在我的站点的路由列表末尾设置了以下路由，它允许对 uri 值进行最终检查，以便为我的站点用户提供虚 URL ( `http://example.com/username`)

```
Route::set('profile', '<path>/(<page>)', 
    array(
        "path" => "[a-zA-Z0-9_-]+",
        "page" => (blog|photos)))
->defaults(array(
    'controller' => 'welcome',
    'action'     => 'profile'
)); 
```

这条路线正确地指向`welcome`控制器和`profile`方法，但是我想知道是否有一种方法可以像这样将`path`和`page`值发送到方法：

```
action_profile($var1, $var2) {
    echo $var1 . ' ' . $var2;
} 
```

我不想依赖`$this->request->uri()`并将结果分解成一个数组，除非绝对没有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:16:51.027

请阅读手册：http: [//kohanaframework.org/3.0/guide/kohana/routing#request-parameters](http://kohanaframework.org/3.0/guide/kohana/routing#request-parameters)。`$this->request->param('param-name')`会有所帮助。

# java - 当 JPA 实体不应该完全反映数据库上的物理模型时

> ID：10567548
> 
> 赞同：1
> 
> 时间：2012-05-12T21:30:43.013
> 
> 标签：java, database, jpa, entity

大多数程序员都同意在使用 JPA 实体时避免使用 DAO 模式。事实上，作为一个简单的 POJO，任何实体都可以仅使用注释来持久化。

但是，在概念域对象与物理域对象（反映数据库表）略有不同的情况下，使用表示概念模型的“业务对象”并将持久化操作委托给“数据存储对象”是否是一种好习惯？因此，业务对象将免于 JPA 注释，因为它现在将由数据存储对象负责。

处理概念域和物理域之间的一些差异的最佳实践是什么？我应该引入 DAO 模式以便将每个 BO 转换为“数据存储对象”并对其应用持久化操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:31:10.307

据我了解，不再需要数据传输对象等。即使您的数据库与域模型不同，您也可以使用 JPA 注释实现很多目标。然而，最佳实践是保持数据模型和域模型同步。

# maven - Maven 源插件 jar 和 jar-no-fork 目标之间的区别？

> ID：10567551
> 
> 赞同：31
> 
> 时间：2012-05-12T21:31:16.023
> 
> 标签：maven, jar, maven-plugin

您能否详细解释一下 jar 和 jar-no-fork 目标之间的区别？

我从官方网站上看到它，但我对此没有一个明确的想法。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-12T22:55:22.507

我的解释：`jar`目标是要从命令行（`mvn source:jar`）运行，`jar-no-fork`是要绑定到生命周期。

如果您查看[文档](http://maven.apache.org/plugins/maven-source-plugin/)的`jar`目标，则关键短语是“在执行自身之前调用生命周期阶段生成源的执行”。如果您将 POM 配置`source:jar`为作为生命周期的一部分运行目标，Maven 将**重新运行**绑定到的所有目标`generate-sources`及其前身。如果您有许多插件目标绑定到验证或初始化阶段，所有这些都将运行两次，从而延长构建时间。

相比之下，`jar-no-fork`是您附加到构建生命周期的内容，因为它希望绑定到某个阶段之后的某个阶段，`generate-sources`并且不会再次运行绑定的目标。

我已经通过运行 Maven 3`-X`并查看运行的插件执行来验证此行为。

# winapi - ScrollWindow 不会重绘某些区域

> ID：10567552
> 
> 赞同：0
> 
> 时间：2012-05-12T21:31:29.877
> 
> 标签：winapi

我遵循了 Charles Petzold 的“Programming Windows”一书中的一个例子。该示例显示键盘事件发生时的键盘消息。它会自动滚动以显示显示。这是代码的一部分（稍作修改）。问题是：通常情况下，当收到键盘消息时，它应该在底部显示 0。当收到另一条键盘消息时，它会向下滚动一行，在底部显示 0，在底部上方显示 1。但我所拥有的是它始终显示 0。只有当我调整窗口大小时，我才得到正确的结果如：.... 4、3、2、1、0。我认为问题在于调用 ScrollWindow 时没有重新绘制某些内容，但我不知道到底是什么问题，因为我跟着这本书.

```
 case WM_SIZE:

        if (message == WM_SIZE)
        {   cxClient = LOWORD (lParam);
            cyClient = HIWORD (lParam);
        }

        // Calculate scrolling rectangle

        rectScroll.left   = 0;
        rectScroll.right  = cxClient;
        rectScroll.top    = cyChar;
        rectScroll.bottom = cyChar * ( cyClient / cyChar);

        InvalidateRect(hwnd, NULL, TRUE);

        return 0;

    case WM_KEYDOWN:
    case WM_KEYUP:
    case WM_CHAR:
    case WM_DEADCHAR:
    case WM_SYSKEYDOWN:
    case WM_SYSKEYUP:
    case WM_SYSCHAR:
    case WM_SYSDEADCHAR:

        for ( i = cLinesMax - 1; i > 0 ; i-- )
        {
            pmsg[i] = pmsg[i - 1];
        }

        // Store new message

        pmsg[0].hwnd    = hwnd;
        pmsg[0].message = message;
        pmsg[0].wParam  = wParam;
        pmsg[0].lParam  = lParam;

        cLines = min(cLines + 1, cLinesMax);

        // Scroll up the display

        ScrollWindow(hwnd, 0, -cyChar, &rectScroll, &rectScroll);

        break; // call DefWindowProc so System messages work

    case WM_PAINT:

        hdc = BeginPaint(hwnd, &ps);

        for (i = 0; i < min(cLines, cyClient / cyChar - 1); i++)
        {
            TextOut(hdc, 0, (cyClient / cyChar - 1 - i) * cyChar, szBuffer,
                    wsprintf(szBuffer, TEXT("%5d"), i));

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T21:57:45.220

的重点`ScrollWindow()`是移动窗口的现有内容，*而无需*重新绘制所有内容。基本假设是移动的内容不会因为滚动动作而改变，只需要绘制“未覆盖”的区域。

在您的示例中，您想要*更改*内容（通过重新编号行），而不仅仅是*移动*它。这意味着它需要重绘——`ScrollWindow()`在您的关键消息处理中不会导致，但`InvalidateRect()`在您的`WM_SIZE`处理程序中会导致。

# c# - C# Transactionscope - 在同一个事务中插入/选择，多个连接

> ID：10567558
> 
> 赞同：2
> 
> 时间：2012-05-12T21:32:11.267
> 
> 标签：c#, transactionscope, msdtc

我想让一个父对象删除自己，它是单个事务范围中的子对象。我还想在这两种情况下检查要删除的对象是否存在，以及用户是否有权访问该对象。考虑以下代码：

我得到服务器上的 MSDTC 不可用异常。反正有没有通过我的服务方法传递连接？

请看下面的例子：

// 类 Flight, FlightService, FlightDao // 类 Pilot, PilotService, PilotDao

```
// FlightService
public void deleteFlight(Flight flight) {
    FlightDao flightDao = new FlightDao();
    Flight existingFlight = flightDao.findById(flight.Id);
    if (existingFlight != null) {
        using (TransactionScope scope = new TransactionScope()) {
            try {
                PilotService.Instance.deletePilot(flight.Pilot);
                flightDao.delete(flight);
            } catch (Exception e) {
                log.Error(e.Message, e);
                throw new ServiceException(e.Message, e);
            }
            scope.Complete();   
        }
    }       
}

// PilotService
public void deleteFlight(Pilot pilot) {
    PilotDao pilotDao = new PilotDao();
    Pilot existingPilot = pilotDao.findById(pilot.Id); // THIS LINE RIGHT HERE THROWS EXCEPTION
    if (existingPilot != null) { 
        using (TransactionScope scope = new TransactionScope()) {
            try {               
                pilotDao.delete(pilot);
            } catch (Exception e) {
                log.Error(e.Message, e);
                throw new ServiceException(e.Message, e);
            }
            scope.Complete();   
        }
    }       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T04:31:24.263

您正在将多个数据上下文层与事务一起使用。您需要将一个传递给另一个。“ **deletePilot** ”调用应该在相同的数据上下文中执行。一种解决方案是在数据访问层使用构造函数来接受来自另一个数据服务的数据上下文。他们将在相同的上下文中执行操作。

```
public void deleteFlight(IYourDataContext context, Pilot pilot) {
PilotDao pilotDao = new PilotDao(context);
//do operations now in same context.
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:15:58.043

这里的问题是我试图在同一个循环中多次使用同一个 SqlDataReader。这肯定在事务中不起作用。

例子：

```
SqlCommand command = new SqlCommand(...);
SqlDataReader reader = command.ExecuteReader();
if (reader.read()) {
  return buildMyObject(reader);
}

private MyObject buildMyObject(SqlDataReader reader) {
  MyObject o1 = new MyObject();
  // set fields on my object from reader

  // broken! i was attempting create a new sql connection here and attempt to use a reader
  // but the reader is already in use.
  return o1;
} 
```

# android - 在列表视图的末尾附加一个项目

> ID：10567568
> 
> 赞同：1
> 
> 时间：2012-05-12T21:34:41.340
> 
> 标签：android, android-listview

我正在从数据库中填充一个列表视图，但在某些情况下，我想在列表视图的末尾添加一些不在数据库中的内容，我可以这样做吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T21:37:55.787

将项目添加到源（列表或其他），在适配器上调用 notifyDatasetChanged。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T21:52:16.087

如果您想在列表视图的末尾添加一些不在数据库中的内容，请使用`ArrayAdapter`而不是`SimpleCursorAdapter`. 从光标中获取所有数据并将数据设置为`ArrayAdapter`. 将您的外部列表项添加到适配器并调用`notifyDatasetChanged()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T21:54:15.153

getListView().addFooterView(myView) 您需要在调用 setAdapter 之前执行此操作。这里有更多信息[http://developer.android.com/reference/android/widget/ListView.html#addFooterView(android.view.View](http://developer.android.com/reference/android/widget/ListView.html#addFooterView(android.view.View) )

# java - 在 .jar 文件中加载图像时出现 NullPointerException

> ID：10567571
> 
> 赞同：3
> 
> 时间：2012-05-12T21:35:23.200
> 
> 标签：java, swing, jar

我正在eclipse中开发一个java项目。为了分发程序，我通过 eclipse 中的导出功能创建了一个可运行的 .jar 文件。

在我的程序中，加载几个存储在名为“tableImages”的文件夹中的图像。我通过 ClassLoader 加载图像（您将在下面找到代码片段）。问题如下：从 .jar 文件执行程序时，在上述文件夹中加载其中一个 .png 文件时会引发 NullPointerException。现在有趣的是，完全相同文件夹中的一些 .png 文件已正确加载，这意味着它们不会导致 NullPointerException。

我使用 jar tf 命令检查了 .jar 的内容。显然无法加载的图像被打包到罐子里。那么是什么导致了这个 NullPointerException，我该如何解决呢？

这是我在秋千架上绘制图像的课程。

```
import java.awt.*;
import java.awt.image.*;
import java.io.*;
import javax.imageio.*;
import java.net.*;

public class LoadBackgroundImage extends Component {

    private static final long serialVersionUID = 1L;

    BufferedImage img;

    public void paint(Graphics g){
        g.drawImage(img, 0, 0, null);
    }

    public LoadBackgroundImage(String image){
        URL url = ClassLoader.getSystemResource(image);
        try{
            img = ImageIO.read(url);
            this.setSize(img.getWidth(), img.getHeight());
        }catch(IOException e){
            System.err.println(e.getMessage());
        }
    }

    public Dimension getPreferredSize(){
        if(img == null){
            return new Dimension(100, 100);
        }else{
            return new Dimension(img.getWidth(null), img.getHeight(null));
        }
    }

    public BufferedImage getImage(){
          return img;
         }

} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T22:05:36.217

```
URL url = ClassLoader.getSystemResource(image); 
```

此 URL 转换为文件系统中的绝对路径，这将是 jar 中文件的无效路径。例如，如果您在 bar.jar 下有一个名为 foo.png 的文件，则 URL 将是 /path_to_current_dir/bar.jar/!foo.png 这是无效的。相反，您可以将文件作为流读取：

```
InputStream is = getClass().getClassLoader().getResourceAsStream(image);
ImageIO.read(is); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T22:01:05.107

假设该文件确实在 .jar 包中，原因很可能是 .jar 文件中的条目以区分大小写的方式加载，因此与.jar`foo.png`文件*不同*`Foo.png`。当您从常规文件加载时，行为取决于 Windows 和 Mac 上的文件系统，`foo.png`并且`Foo.png`将表示相同的文件（！）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T22:19:47.530

你可以使用一个 URL，我自己试过了，效果很好，从 jar 中获取 png 文件：

这是我使用的代码：

```
public static ImageIcon getIcon(String path)
    {
        String imageFile = "";

        if(path.equals(""))
            imageFile = "/Images/Icon.png";
        else
            imageFile = path;

        URL source = Messages.class.getResource(imageFile);
        if(source != null)
        {
            ImageIcon imageIcon = new ImageIcon(source);
            return imageIcon;
        }
        return null;
    } 
```

然后我将它直接添加到 JLabel 中，就像一个魅力一样，我还移动了 jar 文件并将图像文件重命名到 jar 之外，所以我确定。

# php - 在预定义的时间运行自动查询

> ID：10567576
> 
> 赞同：1
> 
> 时间：2012-05-12T21:36:18.097
> 
> 标签：php, mysql, performance

只是想知道解决此问题的最佳方法是什么：我的表中有一个名为 end_time 的列。对于每一行，我必须检查何时达到此 end_time 并修改标志。我正在考虑编写一个应用程序（使用 php），如果我的当前时间等于数据库中的一个或多个可用 end_Time，则每分钟检查一次，然后修改标志。有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T21:39:23.180

较新版本的 mysql 有一个事件调度程序。

[http://dev.mysql.com/doc/refman/5.1/en/events.html](http://dev.mysql.com/doc/refman/5.1/en/events.html)

# c# - 如何获取 Google 文档的说明？

> ID：10567582
> 
> 赞同：3
> 
> 时间：2012-05-12T21:37:28.233
> 
> 标签：c#, google-data-api, google-drive-api

# 目标

假设我在 Google Docs/Drive 中有一个文档集合/文件夹，我想以编程方式检索与每个文档关联的描述：

（您可以通过选择列表中的文件，然后点击“眼睛”图标来获得此信息）

![我想要的描述](../Images/e970d8ddf56dc820f9fa57e78dd74932.png)

# ~~工作~~守则_

我正在[为 Google Data API 使用 .NET 库，](http://code.google.com/p/google-gdata/)并且基本的登录和检索工作没有问题：

```
GDataCredentials credentials = BuildSomethingUp();
RequestSettings settings 
    = new RequestSettings("code.google.com/p/exult/", credentials);
Request request = new Request(settings);
Feed<Document> feed = request.GetFolderContent(resourceId);                     
List<Document> documents = feed.Entries.ToList();

foreach (Document document in documents
    .Where(item => item.Type != Document.DocumentType.Folder))
{
   string summary = document.Summary; //y no can haz?
} 
```

但是，该`.Summary`属性始终返回为 null。

# 问题

1.  我正在`.Summary`根据一些已弃用的代码部分等假设正确的位置。这是一个虚假的假设吗？
2.  我还能如何检索与文档关联的描述？（“我可以解密吗？”在上面的可笑示例中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T00:21:17.537

.NET 客户端库没有公开该字段，我只是在 rev 中提交了一些代码。1189 (http://code.google.com/p/google-gdata/source/detail?r=1189) 将 Description 属性添加到 DocumentEntry 类。您现在可以使用以下代码访问描述：

```
string description = document.DocumentEntry.Description; 
```

# java - 从 Jersey 的 RootResource 获取所有 post 参数

> ID：10567583
> 
> 赞同：0
> 
> 时间：2012-05-12T21:37:44.920
> 
> 标签：java, jersey

在 Jersey 中使用 Root- 和 SubResource 时，我这样注释 RootResource 以接收表单参数 param1。

```
@Path("some/path")
public SubResource doSomething(@FormParam("param1") String param1) {
...
} 
```

一切都按我的预期工作，但是，当没有给出参数时，球衣将返回一个内部错误状态代码（500）。一般来说，我会说这应该是一个错误的请求（400）左右。

然后我尝试做的是，我`MultivaluedMap<String, String> form`在参数列表中添加了一个（参见：[Jersey User Guide](http://jersey.java.net/nonav/documentation/latest/user-guide.html#d4e247) Example 2.19）

```
@Path("some/path")
public SubResource doSomething(MultivaluedMap<String, String> form) {
...
} 
```

在这种情况下，我应该能够自己处理表单参数，但`form`没有被填充。可能是因为缺少 @POST 注释。

我的问题：除了处理我觉得令人沮丧的 HttpServletRequest 之外，您是否知道一种方法，以便获得我的帖子参数？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T22:07:09.280

我不完全确定您要完成什么，但是您的示例对我来说似乎都不有效。由于您试图将处理传递给子资源，因此您确实应该在那里处理参数，而不是在根资源中处理。这是一个例子：

```
@Path("/root/path")
public class RootResource {
    @Path("/sub/path")
    public SubResource doSomething() {
       // return an instance of your sub resource
    }
}

@Produces(MediaType.TEXT_XML, MediaType.APPLICATION_JSON)
public class SubResource {
    @GET
    @Path("/")
    public Collection<SomeBean> getAll() {}

    @GET
    @Path("/{id}
    public SomeBean getSingle() {}

    @POST
    @Path("/")
    @Consumes(MediaType.APPLICATION_FORM_URLENCODED)
    public SomeBean reallyDoSomething(@FormParam("param1") final String param) {
       // do ... something
    }
} 
```

* * *

***编辑***

如果您需要访问表单参数以初始化子资源，请通过 HTTP servlet 请求访问它们：

```
public class RootResource {
    @Context
    private HttpServletRequest request;

    @Path("/sub/path")
    public SubResource doSomething() {
        final Map<String, String> params = request.getParameterMap();
        // process the parameters 
        // return an instance of your sub resource
    }
} 
```

# facebook - 检索应用请求接收者的 Facebook ID

> ID：10567596
> 
> 赞同：0
> 
> 时间：2012-05-12T21:39:26.590
> 
> 标签：facebook

如果我的 Facebook 应用知道某个应用用户 (FB ID = foo) 已向另一个 FB 用户 (user2) 发送了应用请求 (request ID = bar)，有没有办法找到 user2 的 FB ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:58:23.460

通常，这应该在*user2*的身份验证之前可用。

但是有一些极端情况：

如果这是一个只涉及一个接收者的请求，您知道该`id`请求的内容（一旦用户在`request_ids`URL 参数中接受它，它就会传递到您的画布）并且不介意使用应用程序，`access_token`这很容易。

只需从 Graph API 获取请求的详细信息：

```
https://graph.facebook.com/REQUEST_ID?access_token=APPLICATION_ACCESS_TOKEN 
```

结果将包括所有请求详细信息，包括收件人列表。

请注意，此方法可以让您知道向谁发送了请求，但不允许您确保访问者是同一个人（如果有人知道 request ，则不需要伪造 request accept `id`）。

顺便说一句，`APPLICATION_ACCESS_TOKEN`可能是[Authenticating as an App](https://developers.facebook.com/docs/authentication/applications/)中描述的一种格式，也可能是较旧的`APP_ID|APP_SECRET`格式...

# ios - iOS - 字符串中单个字符的 Unicode 数值

> ID：10567598
> 
> 赞同：0
> 
> 时间：2012-05-12T21:39:37.050
> 
> 标签：ios, unicode, character-encoding, numeric

对于 iOS 中的 Objective-C：

如果我有一个字符串，我怎么能读取单个字符的 unicode 数值？

例如，如果我的字符串是：“Δ”那个 unicode 字符是 U+0394，那么我如何读取字符串，找出“0394”然后创建一个新字符串，并在该值上添加 100，所以新字符串将是字符 U+0494 或“ҕ”

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:54:18.370

首先，您的逻辑存在谬误。`∆ + 100 != ҕ`. Unicode 以 base-16（十六进制）计算，因此 'Δ' 实际上等于`916`十进制，而不是`394`. 因此，`0x0494 - 0x0394 = 0x0100`， 等于`256`。

考虑到这一点，您的代码应如下所示：

```
unichar delta = 0x0394;
unichar weirdB = delta + 0x0100;

NSString *deltaStr = [NSString stringWithCharacters:&delta length:1];
NSString *weirdBString = [NSString stringWithCharacters:&weirdB length:1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T21:53:54.733

```
 NSString *c = [NSString stringWithFormat:@"%C", unicodeValue];
  int unicode = [c intvalue];
  // then create a new one
  unicode+=100;
  // create a unicode value again
  NSString *uniString = [NSString stringWithCharacters:(unichar *)&unicode length:1]; 
```

# git - 决定是否创建新项目或分支现有项目的 Github 礼仪

> ID：10567602
> 
> 赞同：1
> 
> 时间：2012-05-12T21:40:01.260
> 
> 标签：git, github, branch

我是 Github 的新手。我已经将一个小型开源 Github C 项目移植到 C++。我添加了一个新方法，将大多数方法重命名为更具描述性的名称，删除了一堆冗余（在我看来）方法，清理了注释，使其成为 OO 等。

我还没有就此联系过原作者。所以，我想知道正确的礼仪是什么。我应该联系他们并要求在项目上进行合作吗？我应该告诉他们我在做什么，如果他们不同意，那怎么办？

或者，我应该简单地在 Github 上创建我自己的项目版本并保留控制权吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T22:12:16.067

对于开始时不在 GitHub 上的项目进行大规模重构，前进的一种方法是：

*   将原始代码（至少是 HEAD）导入 GitHub
*   应用您的修改并将它们推送到此 GitHub 存储库
*   联系作者并要求他们[分叉您的项目](http://help.github.com/fork-a-repo/)：他们将能够控制自己的代码版本，并[通过拉取请求](http://help.github.com/send-pull-requests/)与您协作。

将两个 GitHub 存储库分开可以在存储库之间实现更清晰的关注点分离（为您进行大规模重构，为它们提供遗留支持）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T11:17:11.740

由于 C++ 与 C 非常不同（与流行的 beleifs 相反），我认为您的代码需要一个新项目。

另外我应该补充一点，处理这种情况的一种更合适的方法是创建一个 C++ 包装器，它只链接到该 C 库。C++ 与 C 链接没有问题（反之则不然），这将使两个阵营都高兴（那些想要低级 C 库的人和需要更高级别的 OO 和其他启用 C++ 库的人）。

如果它的编译可以是可选的，这样的包装器甚至可以包含在主项目中，这样它就不会妨碍那些不需要它的人。

不幸的是，我不知道那个项目是什么，所以这几乎只是挥手致意。

# c# - 自定义光标全黑，无颜色

> ID：10567603
> 
> 赞同：3
> 
> 时间：2012-05-12T21:40:05.340
> 
> 标签：c#, colors

我为我的程序选择了一个自定义 .cur 文件，如下所示：

```
Assembly asm = Assembly.GetExecutingAssembly();

using (Stream resStream = asm.GetManifestResourceStream("Pie_X.hand.cur"))
{
  HandCursor = new Cursor(resStream);
  resStream.Close();
}
Canvas.Cursor = HandCursor; 
```

我在资源编辑器中检查过它，它是全彩色的，但在程序中它看起来全黑。我怎样才能解决这个问题，使它以彩色显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-04-16T00:50:14.403

这是一个老问题，但对于未来的读者，我认为它已经在这里得到了回答：[https ://stackoverflow.com/a/4306984/7197632](https://stackoverflow.com/a/4306984/7197632)

特别是，这个答案的开头段落说：

> Cursor 类做得很差。由于某种神秘的原因，它使用了旧的 COM 接口 (IPicture)，该接口不支持彩色和动画光标。

这可以解释为什么光标显示为全黑或全白。我今天自己也遇到了这个问题。

# jquery - 隐藏页面上所有可见 DIV 元素的好解决方案，然后仅恢复之前可见的元素

> ID：10567604
> 
> 赞同：2
> 
> 时间：2012-05-12T21:40:10.980
> 
> 标签：jquery, html

我正在尝试制作一个 jQuery 脚本来隐藏页面上的所有可见元素，
然后在有人点击按钮后，让所有隐藏的元素再次出现。

我知道我可以`.is(':visible')`在每个分隔器上使用选择器并存储可见的分隔器，然后`.hide();`在所有这些分隔器上使用。最后，我知道`.show();`当有人点击我的按钮时，我可以再次使用它们。

但我想知道是否有更好的方法来做到这一点。

我想在一次扫描中隐藏所有元素不会是一个大问题（可能`$(document).hide()`会这样做吗？）

但最重要的是，我如何以一种很好的方式存储所有隐藏的元素，以便再次恢复它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T21:44:05.300

在隐藏元素之前，对所有元素应用一个类，以便以后识别它们：

```
// hide everything visible, except the button clicked
$('button#hideVisible').click(function() {
    $(':visible').each(function() {
        $(this).addClass("unhideable");
        $(this).hide();
    });
    $(this).show();
}); 
```

`each`或者，在这种特定情况下，您实际上并不需要使用 jQuery 。您可以通过将`:visible`选择器与[jQuery not 选择器](http://api.jquery.com/not/)组合使用以下值来排除按钮来简化 jQuery 函数`this`：

```
// much simpler version of applying an unhideable class and hiding visible elements
$('button#hideVisible').click(function() {
    $(':visible').not(this).addClass("unhideable");
    $(':visible').not(this).hide();
}); 
```

**更新：**

然而，虽然上述两个解决方案非常适合不需要用户干预来取消隐藏元素的场景，例如在自动化脚本的情况下，但上述两个示例的问题是它们隐藏了按钮的父元素，这表示按钮将被隐藏，尽管它不是明确的。如果您需要用户再次单击按钮以取消隐藏元素，则上述两种解决方案是有限的。

因此，这个函数的下一个演变是确保我们使用[jQuery 的 parentsUntil](http://api.jquery.com/parentsUntil/)方法排除父母：

```
$('button#hideVisible').click(function() {

    // if we're in the hide state, unhide elements and return
    if( $('button').hasClass('ancestors') == true ) {
        $(this).html("Hide");
        $('.unhideable').show();
        $('.unhideable, .ancestors').removeClass("unhideable").removeClass("ancestors");
        return;
    }

    // hide all children of the button. While this might not make sense for a button
     // it's helpful to use this on clickable DIV's that may have descendants!
    $('#hideVisible').find(':visible').addClass("unhideable");
    $('#hideVisible').find(':visible').hide();

    // put a class on button ancestors so we can exclude them from the hide actions
    $('#hideVisible').parentsUntil("html").addClass("ancestors");
    $('html').parentsUntil("html").addClass("ancestors");

    // let's not forget to include the button as well
    $(this).addClass("ancestors");

    // make sure all other elements on the page that are not ancestors and 
     // not descendants of button end up marked as unhideable too!
    $(':visible').not('.ancestors').addClass("unhideable");

    // nice debug output to give you an idea of what's going on under the hood
     // when the hide operation is finally called
    $(':visible').not('.ancestors, html').each(function() {
        console.info($(this).get());
    });

    // hide the remaining elements on the page that aren't ancestors,
     // and include the html element in the exception list as for some reason,
      // we can't add class attributes to it
    $(':visible').not('.ancestors, html').hide();        

    // change the button text to "Show"
    $(this).html("Show");

});​ 
```

**取消隐藏所有不可隐藏的元素：**

接下来，当您想取消隐藏它们时，只需调用：

```
$('.unhideable').show(); 
```

最后，如果需要，您可以通过以下方式自行清理：

```
$('.unhideable, .ancestors').removeClass("unhideable").removeClass("ancestors"); 
```

**演示：**

有关此功能的演示，请参阅此[jsfiddle](http://jsfiddle.net/sK2dR/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T21:46:34.973

尝试这个：

```
$('div:visible').hide();
$('div:hidden').show(); 
```

# android - 在 RelativeLayout 中定位 ImageButtons

> ID：10567612
> 
> 赞同：0
> 
> 时间：2012-05-12T21:41:27.817
> 
> 标签：android

我正在尝试为游戏编写菜单，现在想要进行关卡选择。它应该有三行，每行有 5 个按钮。

```
for(int i=0; i<3; ++i){
        for(int j=0; j<5; ++j){
            ImageButton button = new ImageButton(this);

            RelativeLayout.LayoutParams paramsBut = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
            paramsBut.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
            paramsBut.addRule(RelativeLayout.ALIGN_PARENT_TOP);

            int marginLeft = (int)((float)(sizeLeftWidth/6) * (j+1)) + j*buttonSize;
            int marginTop = (int)((float)(sizeLeftHeight/4) * (i+1)) + i*buttonSize;
            paramsBut.leftMargin = marginLeft;
            paramsBut.topMargin = marginTop;

            button.setAdjustViewBounds(true);
            button.setMaxWidth(buttonSize);
            button.setMaxHeight(buttonSize);
            button.setBackgroundDrawable(null);

            Bitmap bmp = Bitmap.createScaledBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.level),buttonSize,buttonSize,false);
            Drawable d = new BitmapDrawable(bmp);
            button.setImageDrawable(d);

            layout.addView(button,paramsBut);
        }
    } 
```

相对布局：

```
RelativeLayout layout = new RelativeLayout(this);
    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.FILL_PARENT);
    layout.setLayoutParams(params); 
```

问题是按钮不在正确的位置，我认为问题出在边距上。我在边距上做得对还是整个代码完全愚蠢？（如果我得到提示如何改进我的编程风格，我总是很高兴^^）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T22:08:20.893

我会使用一个简单的 xml 文件，而不是`addRule()`使用`RelativeLayout`. 在 java 文件中创建整个`RelativeLayout`结构很痛苦，并且涉及大量编码，这在 xml 中更容易完成。您只需要为相同的布局制作一个xml并使用以下函数来获取`RelativeLayout`（如果它是根布局）的对象：

```
RelativeLayout relativeLayout=(RelativeLayout) View.inflate(R.layout.your_xml_here); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T04:41:38.497

```
RelativeLayout layout = new RelativeLayout(this);
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.FILL_PARENT);
layout.setLayoutParams(params);
layout.setGravity(Gravity.CENTER);    //<<--- 
```

这是你需要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T22:48:26.923

您不应该通过代码初始化您的 UI，Android 打算使用布局文件。例如，您可以使用以下 XML 代码在 res/layout 文件夹中创建一个名为“main.xml”的文件（注意 ImageButton 的“ID”是“myButton”）。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent" android:layout_height="match_parent">
    <ImageButton android:id="@+id/myButton" android:layout_width="wrap_content" android:layout_height="wrap_content" android:marginLeft="10dp" android:marginRight="10dp" />
</RelativeLayout> 
```

在您调用的活动的 onCreate 方法中：

```
setContentView(R.layout.main); 
```

并且您将获得图像按钮的引用（ID 在 XML 中指定）：

```
ImageButton btn = (ImageButton)findViewById(R.id.myButton);
btn.setBitmapImage(myImage); //you can use this
btn.setBitmapResouce(R.drawable.drawable_file); //or this 
```

此外，RelativeLayouts 的目的是指定视图的位置应相对于另一个视图的位置，因此您可以使用 XML 属性，如 android:layout_below="@+id/viewId" 和 android:layout_toRightOf="@+id/viewId"。否则，您可以只使用 LinearLayout，如果不需要 RelativeLayout，这应该会提高速度。

# php - 爬虫如何解析网页中的文本？

> ID：10567613
> 
> 赞同：4
> 
> 时间：2012-05-12T21:41:52.347
> 
> 标签：php, dom, html-parsing, web-crawler

有一些标准方法，比如`DOM`选择性地解析一个 html 页面，但我想知道爬虫（从小到大）如何检测要分析的主要文本在哪里？

将分析以捕获其关键字的正文与菜单、侧边栏、页脚等混合在一起。爬虫如何知道从菜单和侧面部分中跳过关键字？

我正在开发一个小型 PHP 项目，以从各种 HTML 页面中捕获关键字，但我不知道如何避免从侧面内容中捕获关键字。谁能描述或至少给我一个提示如何区分 HTML 页面中的主要内容和其他内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T22:14:56.813

侧边栏、菜单和页脚通常在整个站点的每个页面上重复出现。每个页面的实际内容通常是唯一的。您可以将其用作区分实际内容的指南。

爬虫还使用复杂的算法来分析页面上的文本，以确定其作为内容的权重，而且它们往往不会分享他们的秘密。

没有快速简便的方法，爬虫开发人员必须想出自己的创新方法，并集体使用这些方法来获得页面内容的整体图景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:40:17.070

If the content is textual, You can assume that the main content of the page is where the word density is relatively higher.

This means the main content of the page which is relevant to search engines -- the main content of the page is inside the dom elements mostly divs where the number of literals including tags like p,em,b, etc etc which are essentially for text formatting, is higher or above a threshold.

I shall start off with the following logic

get all the tags used in the webpage.

I shall note down the dom elements where the content is formed of only literals and formatting tags like p,em,b,li,ul and also anchor tags.

I would leave divs containing only anchor tags and assume they are for navigational purposes.

Now out of all these choose the dom elements where the number is above a particular threshold.

This threshold value varies from website to website,which you can take as avg(literals found in the div having highest literals across all pages of a site of a particular url structure)

The algorithm has to learn during its course.

# android - Android 在记录之间向后移动

> ID：10567619
> 
> 赞同：0
> 
> 时间：2012-05-12T21:42:21.243
> 
> 标签：android, sqlite, cursor, android-cursor

我正在使用光标找出最大 ID 号，然后我需要回到该记录的 5 处。比如我在id=9，我想去id=5，怎么办？我试过了

```
int position=cursor.getPosition();  
cursor.moveToPosition(position-5); 
```

但是，它给出了一个错误

```
 ID  TITLE     FOLDER   PARENT
    1   folder1      1        0
    2   item1        0        1
    3   item2        0        1
    4   folder2      1        1
    5   item1        0        4
    6   item2        0        4
    7   folder3      1        4
    8   item1        0        7
    9   item2        0        7 
```

光标 cursor = db.rawQuery("SELECT id,title,folder,parent FROM mydata WHERE " + "id = (SELECT MAX(id) FROM mydata ); ",null);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:48:52.623

你可以试试：

```
cursor.moveToPosition(cursor.getCount() - 5); 
```

这假设光标中至少有 5 个项目。

**更新**

您只请求具有最高 id 的行的详细信息。

要获取您的原始请求，请尝试以下查询：

```
SELECT id,title,folder,parent FROM mydata 
```

使用上面的代码建议。

# r - 用于对参数化索引求和的 R 命令

> ID：10567620
> 
> 赞同：2
> 
> 时间：2012-05-12T21:42:41.477
> 
> 标签：r

我正在尝试在 R 中创建一个函数，所以我命令，

```
f <- function(d,r,k) {
    A <- d^(r-1)
    B <- **summation over i going from r to (k-1)**d^2i
    return (A+B)
} 
```

我做不到**。**在没有帮助的情况下参与上面的命令。那么是否有一个求和命令，我可以在其中分配任意参数索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:00:15.217

如果我理解正确（并且 d、r 和 k 都是标量），那么您想要的是：

```
f = function(d,r,k) {
  A = d^(r-1)
  B = sum(d^(2*(r:(k-1))))
  (A+B)
} 
```

本质上：

`r:(k-1)`展开成从`r`到的整数列表，的列表也是`k-1`如此。调用列表，您将获得元素的总和。`d^(2*(r:(k-1))``d^2i``sum()`

这一切都可以浓缩为：

```
f = function(d,r,k) {
  d^(r-1) + sum(d^(2*(r:(k-1))))
} 
```

# java - 避免重复值

> ID：10567622
> 
> 赞同：1
> 
> 时间：2012-05-12T21:43:06.077
> 
> 标签：java

我建立了一个范围，我想从该范围（10％）中选择一组随机数，同时确保它没有重复值。

在我的程序中如何以及在哪里进行编码？

以下是摘录。

```
// Number of Items      
int range = numberOfItems [itemNumber - 1];
// Determine 10 percent of the given range
int tenPercentOfRange = (int)(range * 0.1);
int number = 0;
int[] numbers = new int[tenPercentOfRange];

int index = 0;

for(;index < tenPercentOfRange;)
{
  // Randomly select 10% of the items for a given item.
  number = (int) (range * Math.random()) + 1;
  if(!Arrays.asList(numbers).contains(number))
  {
    numbers[index] = number;
    index++; 
    // .................. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T21:47:07.277

最简单的方法（虽然不是最有效的）可能是用所有元素填充一个列表，使用[`Collections.shuffle()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)并选择前 10% 的元素。

由于排列没有两次相同的主菜（假设您以这种方式填充它），前 10% 的元素也将是唯一的，因此它适合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T22:01:36.713

使用collection.shuffle()，并选择一个指定大小的子列表，或者将你的值放在一个List中，并删除索引处的元素

```
found.add (list.remove (random.nextInt (list.size ())); 
```

X 次。在每一步中，列表的大小都会减小，并且没有元素会出现两次。

但是，对于非常大的范围 - 假设有效多头的范围，构建一个列表来洗牌或从中挑选值是不合适的。

因此，创建一个 Set，并选择随机值，将它们添加到列表中，直到 set.size() 等于您需要的大小。

可运行示例：

```
import java.util.*;

public class Empty {

    static Random random = new Random ();

    public static void main (String args [])
    {
        show (pick (10, 100));
        show (securePick (10, 100000));
    }

    static public List <Integer> pick (int n, int max) {
        List <Integer> result = new ArrayList <Integer> ();
        List <Integer> range = new ArrayList <Integer> (max);
        for (int i= 0; i < max; ++i)
            range.add (i);
        for (int i= 0; i < n; ++i)
            result.add (range.remove (random.nextInt (range.size ()))); 
        return result;
    }

    static public Set <Integer> securePick (int n, int max) {
        Set <Integer> result = new HashSet <Integer> ();
        while (result.size () < n)
            result.add (random.nextInt (max)); 
        return result; // <Integer> 
    }

    public static void show (List <Integer> liste)
    {
        System.out.print ("[");
        for (int i : liste)
            System.out.print (i + ", ");
        System.out.println ("\b\b]");
    }

    public static void show (Set <Integer> liste)
    {
        System.out.print ("[");
        for (int i : liste)
            System.out.print (i + ", ");
        System.out.println ("\b\b]");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T22:01:02.607

如果您只需要整数范围的 10%，那么重复直到获得不同数字的方法会更有效。这`LinkedHashSet`用于有效检查重复项。

```
final int range = 1000, sampleSize = range / 10;
final Set<Integer> rnds = new LinkedHashSet<Integer>();
final Random r = new Random();
for (int i = 0; i < sampleSize;) if (rnds.add(r.nextInt(range) + 1)) i++;
System.out.println(rnds);
final int[] result = new int[sampleSize];
int i = 0;
for (int nr : rnds) result[i++] = nr; 
```

# database - 在没有 CrossTab 的 Crystal Reports 中为每行和每列添加“总计”

> ID：10567625
> 
> 赞同：2
> 
> 时间：2012-05-12T21:43:47.500
> 
> 标签：database, stored-procedures, crystal-reports, crystal-reports-2008, crosstab

我有一个简单的问题。

假设我有一个 Stored Proceudre，它返回一个包含以下列的表：(Item, GreenColour, RedColour)，对应于所有可能的项目以及其中有多少是“绿色”或“红色”。即，可能的输出可能是 {(Apple, 4, 2), (Chair, 1, 2)}。

我想在报告中执行以下操作：

在标题部分，写四列：“Item”、“Green”、“Red”和“Total”；其中“Total”对应于每行的总数。然后在“详细信息”部分添加“GreenColour”、“RedColour”和其他一些“TotalColours”字段（我不太了解）。并且还在底部添加了额外的一行，其中包含每列的总数。

这听起来与“CrossTab”工具非常相似，但不能那样做。我知道一个可能的答案是通过添加“Total”列来修改 StoredProcedure 并在查询中计算它。并在查询后使用 UNION 添加每列的“Total”，其中“Item”是“Total”，“Green”和“Sum”的值是另一个查询的“SUM”。但是我不想这样做，我希望水晶报表来解决它。

谢谢，我很抱歉问这么简单的问题写了这么多。

编辑：我的示例所需的输出是：

```
Item      Green Colour    Red Colour    Total
Apple          4              2           6
Chair          1              2           3
Total          5              4           ¿9? 
```

还想知道是否有可能同时使用“9”和没有它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T21:58:53.610

你是对的，交叉表对此太过分了。只需创建一个公式来总结颜色：

`{table.GreenCount} + {table.RedCount}`

要获取报告总数（示例中的 9），只需插入一个汇总摘要。（右键单击刚刚创建的公式字段->“插入”->“摘要”->“计算此摘要”为 Sum）。

# haskell - Haskell“人”页？

> ID：10567633
> 
> 赞同：4
> 
> 时间：2012-05-12T21:45:59.133
> 
> 标签：haskell, manpage

Haskell 中的每个函数都有手册页吗？换句话说，我可以在`man fst`某处键入并获得有关该功能的手册或帮助页面吗？我发现大量的功能势不可挡！

我正在使用 GHC 和 GHCi。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T21:49:29.323

我不知道这方面的命令行工具，但您可以使用[Hoogle](http://www.haskell.org/hoogle/)查找函数的类型、其文档的快速摘要以及基于其名称的完整在线文档的链接。

它甚至可以以另一种方式工作：从一个类型到匹配该类型的函数！如果您认为某个函数必须为特定目的而存在，但不知道它被调用什么或它在哪里，这将非常有用。

还有[Hayoo](http://holumbus.fh-wedel.de/hayoo/hayoo.html)，它搜索整个[Hackage](http://hackage.haskell.org/)（而 Hoogle 只搜索标准库），但对于这个特定目的它可能不太有用：搜索“fst”`haskell98`首先返回过时的包，然后是相关的`base`包。

在 GHCi 中，您通常可以通过检查函数的类型来了解函数的作用；例如，如果你这样做

```
GHCi> :t fst
fst :: (a, b) -> a 
```

那么你知道它`fst`必须返回你给它的元组的第一个元素，因为[这就是那种类型的函数所能做*的*](https://stackoverflow.com/questions/8524801/determining-function-behavior-from-the-type-of-the-function)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-26T13:46:23.460

我发现[将 Hoogle 集成到 GHCi](https://wiki.haskell.org/Hoogle#GHCi_Integration)中很有用：

```
$ cabal install hoogle
$ echo >> ~/.ghci ':def doc \x -> return $ ":!hoogle --info \"" ++ x ++ "\""'

Download and build Hoogle databases:
$ hoogle data 
```

然后您可以在 GHCi 中执行此操作：

```
ghci> :doc fst
Prelude fst :: (a, b) -> a

Extract the first component of a pair. 

From package base
fst :: (a, b) -> a 
```

# java - Android 搜索框架，自定义搜索建议

> ID：10567636
> 
> 赞同：0
> 
> 时间：2012-05-12T21:46:41.287
> 
> 标签：java, android, android-contentprovider, android-searchmanager

我正在开发一个实现搜索提供程序的应用程序。我试图完成的行为是，如果在数据库中找不到某个项目，我希望一个项目出现在搜索建议列表中，上面写着类似

`"select to add " + query + " to the database".`

我对此进行了无休止的研究，我已经阅读了所有的 android 搜索框架开发人员文档，并且在 Google 上搜索无济于事。

我唯一能想到的就是在数据库适配器中，如果没有找到结果，则`MatrixCursor`使用我上面描述的字符串和查询创建一个，但是，这似乎有点混乱。

我还需要以某种方式使其具有与普通建议不同的操作意图，因为我需要它将用户带到页面以将项目添加到数据库中。

在应用程序中包含这似乎是一件相当合理的事情，我不确定我是否遗漏了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:27:40.083

我想通了。我在我的建议提供者中使用了 MatrixCursor。我刚刚检查了查询的结果是否等于 null，如果是，我返回了 MatrixCursor。现在这似乎很明显。此外，为了使该项目执行与从数据库返回的结果不同的操作，我为

```
 SearchManager.SUGGEST_COLUMN_INTENT_ACTION
         SearchManager.SUGGEST_COLUMN_INTENT_DATA 
```

到矩阵光标。然后为结果定义 Uri 和操作意图。然后，在我的搜索活动中，只需为该特定操作意图添加一个 if，然后启动相应的活动。效果很好。

# css - 网站在 MAC 和 PC 上的相同浏览器中看起来不同

> ID：10567639
> 
> 赞同：0
> 
> 时间：2012-05-12T21:46:54.393
> 
> 标签：css, cross-browser, css-float, dreamweaver

出于某种原因，当在相同的浏览器但不同的操作系统 EX：MAC VS PC 中查看我的网站时，我的网站看起来会有所不同。

忘记IE。看起来很可怕。我正在考虑为 IE 添加一个自定义 css 文件。

它在 chrome 和 safari 中看起来也不同。我希望所有版本看起来都像 chrome "MAC"。

我特别关心的是`<div id=items>`.

`http://www.amas.net/new_site/amas/index_copy.html`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:48:31.243

也许使用 css 框架来最小化渲染引擎之间的视觉差异？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T07:36:34.800

您有很多绝对定位的元素，例如：

```
#sale_items, #viewed_items, #new_items { 
```

确保任何将是绝对的内容都包含在位置设置为相对的容器中，这样您的布局就不会中断并且应该更加一致

# python - 如何在 wxPython 中为 TextCtrl 小部件添加标题？

> ID：10567642
> 
> 赞同：2
> 
> 时间：2012-05-12T21:48:08.167
> 
> 标签：python, wxpython

似乎这很简单，但我找不到这样做的好方法。我正在寻找的只是为我在 wxPython 框架中拥有的更大的多行 TextCtrl 小部件提供一个很好的居中标题。似乎没有办法用实际的 TextCtrl 属性来做到这一点。所以我试图做这个 StaticText 标签，但我似乎无法很好地与 TextCtrl 控件对齐。现在，我将它们放在两个不同的 BoxSizer(wx.HORIZONTAL) 中，带有 Button 控件和 StaticText。也许这是我在 wxPython 中能做的最好的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T02:35:45.700

我在我的代码中做了类似的事情。我认为您想在将 StaticText 添加到 sizer 时设置“wx.ALIGN_CENTER_HORIZONTAL”标志。这将使 StaticText 在其单元格内居中。通过在 TextCtrl 上设置 wx.EXPAND，我们说它应该是 sizer 的最大宽度，因此 StaticText 将相对于 TextCtrl 居中。

```
import wx

ID_SUBMIT = wx.NewId()

...

    sizer = wx.BoxSizer(wx.VERTICAL)
    centeredLabel = wx.StaticText(self, -1, 'Centered Label')
    sizer.Add(centeredLabel, flag=wx.ALIGN_CENTER_HORIZONTAL)

    mlTextCtrl = wx.TextCtrl(self, style = wx.TE_MULTILINE)
    sizer.Add(mlTextCtrl, flag=wx.EXPAND)

    submitButton = wx.Button(self, ID_SUBMIT,'Submit')
    sizer.Add(submitButton, flag=wx.ALIGN_RIGHT)

... 
```

# python - If else 基于 python 函数可选参数的存在

> ID：10567644
> 
> 赞同：13
> 
> 时间：2012-05-12T21:48:18.783
> 
> 标签：python, arguments

我编写了一个如下函数，带有可选参数'b'。

url取决于b的存在。

```
def something(a, b=None)
    if len(b) >= 1:
        url = 'http://www.xyz.com/%sand%s' % (a, b)
    else:
        url = 'http://www.xyz.com/%s' (a) 
```

`b=None`当说*“'none-type'类型的对象没有长度”*时，这会引发错误

 *任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-12T21:54:14.750

您可以简单地使用`if b:`- 这将要求该值`None`既不是空字符串/列表/其他值也不是空字符串。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-12T21:53:34.237

你可以简单地改变 -

```
def something(a, b=None) 
```

到 -

```
def something(a, b="") 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-12T21:49:50.533

除非你真的需要检查 的长度，否则`b`为什么不简单地做

```
if b is not None:
    ... 
```

如果您还需要检查长度（因此该`else`部分也执行 if `b == ""`），请使用

```
if b is not None and len(b) >= 1:
    ... 
```

`and`运算符短路，这意味着 if ，`b is None`表达式的第二部分甚至没有被计算，所以不会引发异常。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-12T21:49:34.517

要评估`b`when it's not的长度，请将语句`None`更改为：`if`

```
if b is not None and len(b) >= 1:
   ... 
```

由于`and`运算符的原因，如果第一个测试 ( ) 失败，`len(b)`则不会进行评估。`b is not None`即表达式求值是短路的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-08T06:23:35.107

你可以试试这段代码：

```
def something(a, *b):
    if len(b) == 0:
        print('Equivalent to calling: something(a)')
    else:
        print('Both a and b variables are present') 
```*

# android - 同一网络上的android服务器连接

> ID：10567649
> 
> 赞同：0
> 
> 时间：2012-05-12T21:49:12.410
> 
> 标签：android, sockets

我正在制作一个基于云的 android 应用程序，其中我必须不时将数据从我的 android 应用程序发送到我的服务器。当我使用 USB 电缆在手机上测试我的应用程序时，插座工作良好，两者（计算机和手机）都连接到同一个网络。当我通过在我的计算机上运行服务器和在手机上运行应用程序来测试应用程序时，两者都通过同一个路由器连接，出现了一些问题并且没有建立连接。当应用程序在调试模式下连接的电缆正常工作时，我无法弄清楚为什么会发生这种情况。我为我的套接字创建了一个应用程序的子类，以在任何活动中获取套接字。我的客户端代码如下。

```
package augID.main;

import java.io.IOException;
import java.net.Socket;
import java.net.UnknownHostException;

import android.app.Application;
import android.util.Log;

public class socketApp extends Application {

    public static String serverIpAddress = "172.16.83.3";
    public static int REDIRECTED_SERVERPORT = 54321;
    public Socket socket;

  public void onCreate(){
        createConnection();   
  }
  public void createConnection(){
      Log.d("Client", "Connection");
      try {
            socket = new Socket(serverIpAddress, REDIRECTED_SERVERPORT);
            Log.d("Client", "Connection to server made");
         } catch (UnknownHostException e1) {
             Log.d("server","could not connect");
            e1.printStackTrace();
         } catch (IOException e1) {
             Log.d("server","could not connect");
            e1.printStackTrace();
         }
  }
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T22:27:51.843

您的路由器或防火墙是否可能阻止连接？如果您还没有这样做，请进入您的路由器并将端口 54321 转发到运行服务器的 PC。此外，抓住 Wireshark 并从您的手机中查找连接请求。

希望这可以帮助。

# objective-c - NSMutableAttributedString 设置期间的间歇性崩溃

> ID：10567652
> 
> 赞同：3
> 
> 时间：2012-05-12T21:49:40.500
> 
> 标签：objective-c, macos, xcode4

我有一些代码来设置 NSMutableAttributedString：

```
 NSMutableParagraphStyle *centred = [[NSMutableParagraphStyle alloc]init];
    [centred setAlignment:NSCenterTextAlignment];
    NSDictionary *attributes = [[NSDictionary alloc]initWithObjectsAndKeys:[NSFont fontWithName:@"Helvetica bold" size:12],NSFontAttributeName,
                                [NSColor whiteColor],NSForegroundColorAttributeName,
                                [NSColor clearColor], NSBackgroundColorAttributeName, 
                                centred, NSParagraphStyleAttributeName,
                                nil];
    NSMutableAttributedString* attribTitle = [[NSMutableAttributedString alloc]initWithString:@"Foo"];
    [attribTitle setAttributes:attributes range:NSMakeRange(0, [[attribTitle string] length] - 1)]; 
```

几乎自从我开始该项目以来，它就一直坐在我的应用程序的 -awakeFromNib 方法中，没有任何问题，但就在今天，我开始尝试在 Xcode 4.3 中运行该应用程序的所有其他尝试，但由于“线程 1：EXC_BAD_ACCESS (code=1,地址=0x10）”。它在最后的 '...setAttributes...' 行中断。有一次，我尝试使用 initWithString:attributes: 方法来初始化 attribTitle，果然崩溃（当它发生时）在 alloc-init 行上。

我已经尝试清除 Xcode 重新启动，但它仍然会发生在所有其他构建中......如果应用程序没有崩溃，那么 attrbibuted 字符串会按预期显示。

我想知道我是否有一个损坏的项目文件，但以防万一我做了一些愚蠢的事情，任何人都可以指出一个错误 - 大概它在“属性”NSDictionary 中？

谢谢！

托德。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T14:41:04.843

这是您运行的代码吗，是否简化了？事实上，对我来说它看起来不错（我敢说）。当它每隔一次崩溃时，这表明其他情况，这在此处的代码中不可见。

你提到这是在`-awakeFromNib:`——这个方法有可能运行两次吗？我有很多次让我感到困惑，并且当您在 MainMenu.xib 中创建一个窗口控制器作为 IB 对象时，它很容易发生，然后说窗口控制器通过`-[super initWithWindowNibName:]`它自己的`-init:`. 这对每个涉及的 NIB 调用`-awakeFromNib`一次。在我的案例中，我创建了一些初始化问题的顺序，它显示出与您所描述的类似的未确定行为。

我将代码移至每个窗口`-windowWillLoad`的`-windowDidLoad`方法，因此没有这个问题。

# android - 为什么我在定义时收到 ClassNotFoundException 在布局 XML 中？

> ID：10567654
> 
> 赞同：3
> 
> 时间：2012-05-12T21:49:51.763
> 
> 标签：android, android-layout

我正在尝试通过将其包含在以下内容中来绘制一个矩形`/layout/myactivity.xml`：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle">
  <corners
      android:radius="2dp"
      android:topRightRadius="0dp"
      android:bottomRightRadius="0dp"
      android:bottomLeftRadius="0dp" />
  <stroke
      android:width="1dp"
      android:color="@android:color/white" />
</shape> 
```

当我尝试运行该项目时，我得到：

```
05-12 23:37:14.090: E/AndroidRuntime(541): Caused by: java.lang.ClassNotFoundException: android.view.shape
05-12 23:37:14.090: E/AndroidRuntime(541):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
05-12 23:37:14.090: E/AndroidRuntime(541):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
05-12 23:37:14.090: E/AndroidRuntime(541):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
05-12 23:37:14.090: E/AndroidRuntime(541):  at android.view.LayoutInflater.createView(LayoutInflater.java:552)
05-12 23:37:14.090: E/AndroidRuntime(541):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:636)
05-12 23:37:14.090: E/AndroidRuntime(541):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
05-12 23:37:14.090: E/AndroidRuntime(541):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
05-12 23:37:14.090: E/AndroidRuntime(541):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
05-12 23:37:14.090: E/AndroidRuntime(541):  ... 22 more 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-12T21:55:37.720

您的 XML 代码很好，位置是问题所在。不要将此文件保存在您的`res/layout`文件夹中，而是将其保存在`res/drawable`特定的可绘制文件夹中，例如`res/drawable-xhdpi`.

# javascript - Function.prototype.method 什么是原型[名称]

> ID：10567655
> 
> 赞同：4
> 
> 时间：2012-05-12T21:50:34.597
> 
> 标签：javascript, oop, prototype

我试图不明显地重复问题，因为我已经看到了一些关于 Douglas Crockford 的 Javascript the Good parts book 的问题/答案

我理解大部分代码

```
Function.prototype.method = function (name, func) {
this.prototype[name] = func;
return this;
};

Function.method('inherits', function (Parent) {
this.prototype = new Parent( );
return this;
});

var Mammal = function (name) {
this.name = name;
}.method('get_name', function () {
return this.name;
}).method('says', function() {
return this.saying || '';
});

var Cat = function (name) {
this.name = name;
this.saying = 'meow';
}.inherits(Mammal)

var myCat = new Cat('bagsley');
myCat.get_name(); 
```

我遇到的问题是 this.prototype[name] 为什么不写成 this.prototype.name；我知道返回它允许链接，这里的语法看起来与 jQuery 非常相似，但我仍然没有得到原型 [名称] 部分

感谢任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T22:02:13.827

`obj.name`和之间有区别`obj[name]`。

这个...

```
obj.name = 123; 
```

...将值分配给`123`（`"name"`对象的）属性。

另一方面，这...

```
obj[ name ] = 123; 
```

...将值分配给`123`名称等于`name`变量/参数值的那些属性。

所以：

```
var name = 'foo';

obj.name = 123;
obj[ name ] = 456;

// And now:
obj.name; // 123
obj.foo; // 456 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T22:01:38.990

`prototype[name]`允许`name`是包含任何字符串的变量，并且它将访问`prototype`由字符串命名的属性。`prototype.name`会寻找字面上称为“名称”的属性。

该`[]`语法允许您：

1.  具有可变属性名称 - 在循环使用属性时特别有用`for..in`
2.  在属性名称中使用其他不允许的符号（例如`obj['foo-bar']`, `arr[123]`）
3.  与 PHP 等其他语言的关联数组更相似。

# algorithm - 需要在潜在的 NP-hard 最大边加权多循环图上输入

> ID：10567656
> 
> 赞同：3
> 
> 时间：2012-05-12T21:50:36.820
> 
> 标签：algorithm, graph, cycle, np-hard

对不起这个复杂的名字 - 这是当之无愧的。让我提出问题。

上下文：我有一种定位网络，我想用它做一些分区。

问题定义：我有一个无向加权图 G = {V,E,w}，其中包含一组顶点 V、边 E 和边权重 W。边存在于 V 中的所有顶点之间。

现在，我有大小为 |C1|...|CN| 的循环 C = {C1...CN} st |C1|...|CN| 的总和 等于顶点总数|V|。一个循环 Ci 的得分是路径中所有边的权重之和。

最后，这是目标：我想以这样一种方式拟合 G 中 C 的所有循环，即它们的组合分数在 C 中没有循环相互交叉的约束条件下是最大的。

所以用外行的话来说：我想用定义长度 st 的循环填充一个图形，全局权重是最优的。

我对这个问题的看法：这个问题至少是 NP 难的，因为它可以简化为诸如打包问题或哈密顿循环之类的问题。

最优解甚至可能不是伪多项式。我已经尝试以几种不同的方式（图表）来制定问题，它总是会导致状态爆炸，因此可能无法采用易于处理的 2D 动态编程方法（如果我错了，请纠正我）。

所以看来我可能不得不使用近似方法。想到的一件事是尝试使用其自己的近似方法找到整个图的哈密顿路径。然后下一步是找到“切割”局部最优哈密顿路径以产生循环的位置。有|C|!*|V| 安排这些“切割点”的方法。阶乘来自这些循环的排序和 |V| 的排列。来自起始位置的总数。即使有修剪（即有相同大小的循环），这对于大的|C| 仍然是难以处理的。我想说蛮力对于小的 |C| 是可以的，而对于较大的 |C| 则需要爬山方法来获得局部最优排列的近似值。

无论如何，你们怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T23:27:27.543

根据 David Speyer[在此处](https://mathoverflow.net/questions/24215/optimization-over-permutation)的评论，我认为您正在研究（多项式可解`|V|`）[线性分配问题](http://en.wikipedia.org/wiki/Assignment_problem)。

如果我对您的理解正确，那么您正在尝试在划分节点的循环集空间上优化函数。据我了解，您没有固定周期数或任何单个周期的长度：您唯一的限制是它们是不相交的并且包括每个节点。

如果是这样，每个这样的循环集合都可以用一个节点排列来精确识别。因此，您似乎正在优化节点排列的空间。

让我们调用您的目标函数（当前排列中的边权重的总和）`f`。 `f`是节点排列的函数，但我们可以自由选择如何表示这些排列。如果我们选择一个分解为向量的[矩阵](http://en.wikipedia.org/wiki/Permutation_matrix)，那么是点积之和，因此是线性的，符合分配问题的标准。`|V|``f``|V|`

**编辑**

通过回忆每对节点都有一条连接边，可以解决可能必须找到哈密顿循环的问题。完全图是该问题的退化情况：所有节点的任何排序都是哈密顿循环。

如果`C`是权重矩阵并且`P`是置换矩阵，则成本函数可以用 matlab/octave 语法写为`f(P) = sum(sum(C .* P))`. 这`.*`是成对乘积运算符，它产生一个矩阵，然后在两个维度上相加得到一个标量。由于`.*`在经典线性代数中没有名称（我知道），我们可以将其写为点积之和。每个点积将超过一行`C`和一行`P`（*而不是*一列。）

匈牙利[算法](http://en.wikipedia.org/wiki/Hungarian_algorithm)是指派问题的维基百科页面上链接到的多时间算法之一。

# ruby-on-rails - Rails：delayed_job 邮件未发送

> ID：10567657
> 
> 赞同：2
> 
> 时间：2012-05-12T21:51:04.580
> 
> 标签：ruby-on-rails, delayed-job

我正在尝试在 Rails 3.2 中使用delayed_job gem [https://github.com/collectiveidea/delayed_job](https://github.com/collectiveidea/delayed_job)在后台发送邮件。

我安装了宝石

```
 gem 'delayed_job_active_record' 
```

我按照指示生成了表并运行了迁移

```
$ rails generate delayed_job:active_record
$ rake db:migrate 
```

注意 Rails 3 中有针对邮件程序的特殊说明

```
 # without delayed_job
Notifier.signup(@user).deliver

# with delayed_job
Notifier.delay.signup(@user) 
```

我做了

```
 def send_welcome_email

    #UserMailer.welcome_email(self).deliver  <-- original code that worked

   UserMailer.delay.welcome_email(self)        

  end 
```

但邮件没有发送。在我尝试使用delayed_job之前它正在工作......

有人可以为新手澄清一下吗...？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T21:58:07.793

您是否至少启动了 1`delayed_job`名工人？

```
rake jobs:work 
```

实际上，当你调用`delay`一个对象时，你只是在*排队*一个工作。这意味着将在`DelayedJob`包含与您的作业关联的所有元数据的表中创建一个新条目。

所以你仍然需要一些东西来浏览你的所有`DelayedJob`条目并一个一个地运行它们，那个东西就是上面显示的 rake 任务（worker）。

对于生产，这取决于您在哪里部署应用程序。在 Heroku 上，您只需要指定需要多少个工人 ( `Worker dynos`)，它们就会自动启动。

# c# - 如何将 SerializationBinder 添加到远程处理（或在反序列化时更改类型）？

> ID：10567659
> 
> 赞同：2
> 
> 时间：2012-05-12T21:51:39.703
> 
> 标签：c#, remoting

是否有可能，以及如何将序列化绑定器应用于远程处理？或者将类型从 1 更改为另一个程序集？

谢谢！

# c++ - BST 以 2d 数组作为节点结构中的键而不是 int

> ID：10567662
> 
> 赞同：0
> 
> 时间：2012-05-12T21:52:32.320
> 
> 标签：c++, pointers, matrix, binary-search-tree

在二叉搜索树中，我们的节点结构为

```
class Node
{
    public:
    int key;
    Node *left;
    Node *right;

}; 
```

所以在创建节点时我们做

```
Node* createNode(int key)
{
    Node *node=new Node();
    node->key=key;
    node->left=NULL;
    node->right=NULL;

    return node;
} 
```

现在我想要 key ad 2d 矩阵而不是整数键。像这样的东西

```
class Node
{
    public:
    char matrix[3][3];
    Node *left;
    Node *right;

}; 
```

现在如何创建节点？

```
Node* createNode(char key[3][3])
{
    Node *node=new Node();
    node->matrix=key;     //This line
    return node;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T21:55:23.457

在 C++ 中同样简单：

```
vector<vector<double> > matrix;
vector<double> &row = matrix[i]; 
```

在 C 中，那将是

```
double *row = Matrix[i]; 
```

请注意，C 方式也适用于 C++，但您应该尽可能选择容器而不是普通指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T22:16:51.607

要获得一排，这很简单，就像@dasblinkenlight 说的那样。然而，要获得一个专栏，它的参与程度要高得多。假设您知道矩阵中的行数，您可以执行以下操作：

```
int *copyColumn(int **matrix, int column, int rows)
{
    int *data = new int[rows];

    for (int i = 0; i < rows; i++)
         data[i] = matrix[i][column];

    return data;
} 
```

完成后请记住`delete`数据！

# javascript - 遍历数组以获取地图

> ID：10567673
> 
> 赞同：1
> 
> 时间：2012-05-12T21:54:37.183
> 
> 标签：javascript, xml, google-maps, google-maps-api-3

我需要帮助循环遍历数组并完成此代码。我的数组是从 XML 文件创建的。XML 文件包含要在地图上绘制的会议地点数据。数组最终看起来像这样：

```
markerfilter[0].name
markerfilter[0].address
markerfilter[0].Meeting_Type
etc...
markerfilter[1].name
markerfilter[1].address
markerfilter[1].Meeting_Type
etc... 
```

现在所有标记都绘制在地图上。我需要遍历数组并根据我设置的一些变量对其进行过滤。这是我循环遍历数组的尝试：

```
for (var i = 0; i < markerfilter.length; i++) {
    if (markerfilter[i].Meeting_Type==type&&markerfilter[i].Day_of_Meeting==day&&markerfilter[i].Time_of_Meeting==time){
        //need to plot the points on the map here
        }else{
        //need to show blank map
        }
    } 
```

这是我的整个代码。我什至不知道循环是否在正确的位置，或者其他代码是否需要进入循环内部。有什么帮助吗？？

```
$(document).ready(function() {
    $("#map").css({
    height: 500,
    width: 600
});
var myLatLng = new google.maps.LatLng(43.653823, -79.382843);
MYMAP.init('#map', myLatLng, 11);

$("#showmarkers").click(function(e){
    MYMAP.placeMarkers('include/xml.php');
});
});

var MYMAP = {
map: null,
bounds: null
}

MYMAP.init = function(selector, latLng, zoom) {
var myOptions = {
    zoom:zoom,
    center: latLng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}
this.map = new google.maps.Map($(selector)[0], myOptions);
this.bounds = new google.maps.LatLngBounds();
}

var markerfilter = [];
MYMAP.placeMarkers = function(filename) {
$.get(filename, function(xml){
    $(xml).find("marker").each(function(){
        var name = $(this).find('name').text();
        var address = $(this).find('address').text();
        var address2 = $(this).find('address2').text();
        var Meeting_Type = $(this).find('Meeting_Type').text();
        var Time_of_Meeting = $(this).find('Time_of_Meeting').text();
        var Day_of_Meeting = $(this).find('Day_of_Meeting').text();
        var Open_Meeting = $(this).find('Open_Meeting').text();
        var Wheelchair = $(this).find('Wheelchair').text();
        var ASL = $(this).find('ASL').text();
        var Comments = $(this).find('Comments').text();
        // create a new LatLng point for the marker
        var lat = $(this).find('lat').text();
        var lng = $(this).find('lng').text();
        var point = new google.maps.LatLng(parseFloat(lat),parseFloat(lng));

        var markerdata = {};
        $(this).children().each(function() {
            markerdata[this.tagName] = $(this).text();
        });
        markerfilter.push(markerdata);

        var MeetingType = document.getElementById("Meeting_Type");
        var type = MeetingType.options[MeetingType.selectedIndex].text;
        var DayofMeeting = document.getElementById("Day_of_Meeting");
        var day = DayofMeeting.options[DayofMeeting.selectedIndex].text;
        var TimeofMeeting = document.getElementById("Time_of_Meeting");
        var time = TimeofMeeting.options[TimeofMeeting.selectedIndex].text;

        for (var i = 0; i < markerfilter.length; i++) {
        if (markerfilter[i].Meeting_Type==type&&markerfilter[i].Day_of_Meeting==day&&markerfilter[i].Time_of_Meeting==time){
            markerfilter[i].setMap(MYMAP.map);
            }else{
            markerfilter[i].setMap(null);
            }
        }

        // extend the bounds to include the new point
        MYMAP.bounds.extend(point);

        var marker = new google.maps.Marker({
            position: point,
            map: MYMAP.map
        });

        var infoWindow = new google.maps.InfoWindow();
        var html='<b><u>'+name+'</b></u><br />'+address2+'<br />'+address+'<br />'+Meeting_Type+',&nbsp'+Time_of_Meeting+',&nbsp'+Day_of_Meeting+'<br />Open Meeting:&nbsp'+Open_Meeting+'<br />Wheelchair Accessible:&nbsp'+Wheelchair+'<br />ASL:&nbsp'+ASL+'<br />Comments:&nbsp'+Comments;
        google.maps.event.addListener(marker, 'click', function() {
            infoWindow.setContent(html);
            infoWindow.open(MYMAP.map, marker);
        });
        MYMAP.map.fitBounds(MYMAP.bounds);
    });
});
console.log(markerfilter);
} 
```

现在当我运行我的电流时，萤火虫告诉我：markerfilter[i].setMap(null) 不是一个函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T13:28:06.960

关于错误：**markerfilter[i].setMap(null) is not a function**，我想我看到了你的问题。在该`MYMAP.placemarkers`函数中，您创建`markerdata`对象，定义某种`tagName`分配了文本值的属性，然后压入`markerdata`:he`markerfilter`数组：

```
var markerdata = {};
$(this).children().each(function() {
    markerdata[this.tagName] = $(this).text();
});
markerfilter.push(markerdata); 
```

然后大约 10 行后，您有一个`for`循环，它试图检索代码似乎期望的内容是`markerfilter`数组中的标记：

```
for (var i = 0; i < markerfilter.length; i++) {
    if ( markerfilter[i].Meeting_Type==type && 
            markerfilter[i].Day_of_Meeting==day && 
            markerfilter[i].Time_of_Meeting==time ) {

        markerfilter[i].setMap( MYMAP.map );
    }
    else {
        markerfilter[i].setMap( null );
    }
} 
```

由于`markerfilter`数组已加载，因此它不包含标记，因此它不是函数是`markerdata`有道理的，因为它不是标记。希望这可以帮助 -`markerfilter[i].setMap(null)``markerfilter[i]`

# asp.net - 在 IIS 中从 .aspx 页面中使用 Python

> ID：10567676
> 
> 赞同：1
> 
> 时间：2012-05-12T21:55:06.233
> 
> 标签：asp.net, python, iis

简要总结：在托管在 IIS 服务器上的网站上，独立​​ Python 文件正确呈现，但在 .aspx 页面中使用 Python（与 VB 相反）会导致错误，指出 Python 不是受支持的语言，尽管已经（显然）向 ActiveX 脚本引擎注册了它。我想让 Python 成为一种受支持的语言。

更多细节：我有一个托管在 IIS 6.1 服务器上的网站，它可以正确解释和显示 .aspx 文件。我希望在 .aspx 文件中使用 Python 作为一种语言，而不是像我到目前为止所使用的 VB。

我已经设法让独立的 Python 页面正确呈现 - 例如，网站上包含以下代码的文件：

```
print 'Content-type: text/html'
print

print '<HTML><HEAD><TITLE>Python Sample CGI</TITLE></HEAD>'
print '<BODY>'
print '<H1>This is a header</H1>'

print '<p>' #this is a comment
print 'See this is just like most other HTML'
print '<br>'
print '</BODY>' 
```

( [source](https://stackoverflow.com/questions/6823316/python-on-iis-how/9745836#9745836 "资源") ) 在网络浏览器中请求时正确呈现，如

> **这是一个标头**
> 看看这就像大多数其他 HTML

但是，当我尝试将 Python 代码嵌入 .aspx 页面时，如下所示：

```
<%@ Page Language = "Python" %>
<%
  Response.Write("Python lives in the ASP delimeters!")
%>
<br />

<script language="Python">
document.write("Python's throwing a party on the client-side!")
</script>
<br />

<script language="Python" runat="server">
 Response.Write("Python gets ready to rumble inside a server-side scripting block!")
</script> 
```

（[来源](http://www.4guysfromrolla.com/webtech/082201-1.shtml)）我收到以下错误：

![错误页面](../Images/4ed693b2d9b48f132e89d5ded45b4de9.png)

（请注意，我在示例代码的第一行中添加了“Page” - 我已经尝试了有无，两次都得到相同的错误）

看来我需要将 Python 注册为在 .aspx 文件中使用的语言。有人对我可能遗漏的内容有任何提示吗？我遵循了上面第一个链接中的所有步骤（尽管我使用的是 ActivePython 而不是 CPython），这使我进入了正确呈现 .py 文件的阶段，但遗憾的是，这个（否则很好）答案到此为止。

我已经运行了 C:\Python27\Lib\site-packages\win32comext\axscript\client\pyscript.py，它输出“Registered: Python”，但是 C:\Python27\Lib\site-packages\win32comext\axscript\Demos \client\asp\tut1.asp 呈现为空白页面，而不是我期望从源代码中获得的 5 个越来越大的“Hello World”。我在[这里](http://www.velocityreviews.com/forums/t320430-pb-with-python-activex-scripting-engine-registration-python-2-2-3-2-3-a.html)看到了在调试模式下运行 pyscript 的建议，但我找不到如何查看输出。

我还查看了 Microsoft 知识库上的[此页面，该页面似乎有些过时 - 例如，选项/选择的一些描述已更改名称或位置。](http://support.microsoft.com/kb/276494)

编辑：我看到了一些建议（[这里](http://www.python-forum.org/pythonforum/viewtopic.php?f=19&t=23579)、底部和[这里](http://bugs.activestate.com/show_bug.cgi?id=88016)）声称问题出在 ActivePython 的最新版本上。我正式卸载了 ActivePython，下载了 CPython 2.7 和 Win32 扩展，并再次完成了整个过程，结果相同 - .py 文件正确呈现，但尝试在 .aspx 文件中使用 Python 会出现错误“Python 不是支持的语言”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T23:04:03.097

我很确定你不能那样做。aspx 页面是**编译**成 .NET 程序集的 ASP.NET 页面。有一个 ASP.NET 编译器在页面运行之前对其进行编译，它只支持 .NET 语言……更糟糕的是它只支持 C# 和 VB.NET（不支持 IronPython、F# 等）。

我假设您认为这是可能的，因为旧的 ASP Classic 可能（可能是因为我不知道）语言是可插入的，但 ASP.NET 并非如此，这是完全不同的技术和唯一的共同点是名称中的字母“ASP”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T04:13:13.847

我不是**Python**人，所以看看这些资源是否有帮助：

1.  用于 ASP.NET 的Scott Guthrie [IronPython](http://weblogs.asp.net/scottgu/archive/2006/11/16/ironpython-for-asp-net-ctp.aspx)
2.  [Codeplex](http://www.codeplex.com/wikipage?ProjectName=IronPython)上的 IronPython

# c# - 使用 AsEnumerable() 对分页有什么影响？

> ID：10567677
> 
> 赞同：1
> 
> 时间：2012-05-12T21:55:20.803
> 
> 标签：c#, linq, linq-to-sql, linq-to-objects, asenumerable

我知道，如果您在 linq 查询中有一些函数没有映射到 sql 查询，那么您必须首先调用 .AsEnumerable() ：

```
var model = _service.GetQuery
                    .Where(data => data.SomeFlag == true)
                    .Select(data => new { Foo = CalculateFoo(data.Bar); }); 
```

不能由 linq to sql 执行，但通过添加 AsEnumerable() 我们可以使 .Select() 子句由 linq 执行到对象：

```
var model = _service.GetQuery
                    .Where(data => data.SomeFlag == true)
                    .AsEnumerable()
                    .Select(data => new { Foo = CalculateFoo(data.Bar); }); 
```

但是如果数据集非常大怎么办 - AsEnumerable 对分页有什么影响？如果我说：

```
var page = model.Skip((page > 0 ? page - 1 : 0) * rows).Take(rows); 
```

因为模型现在是 IEnumerable 而不是 IQueryable，所以当我们说 model.Skip().Take() 时，它是否必须先从数据库中加载整个数据集才能跳过和获取？（这会破坏分页的目的）

**编辑：**这个问题是笼统地写的 - 这些是具体细节：

我无法控制分页。我正在生成一个模型并将其传递给一个网格组件（在这种情况下为 DevExpress，但可以是任何网格）。发出分页命令的是网格组件。任何涉及在 AsEnumerable() 之前使用 .Skip().Take() 的解决方案在这里都是不可能的。

所以我需要能够将此模型传递给网格，同时确保模型使用延迟执行：

```
var model = _service.GetQuery
                .Where(data => data.SomeFlag == true)
                .Select(data => new {
                     data.Id,
                     data.Customer.Code,
                     data.Customer.Name,
                     // etc, select a few other properties 
                     Foo = CalculateFoo(data.Bar);
                }); 
```

所以现在我有一个摇滚与硬地的问题：

*   如果我将该模型传递给网格，它会在显示当前页面时抛出异常，因为 linq to sql 无法执行 CalculateFoo()
*   如果我添加 AsEnumerable() 那么网格可以显示当前页面，但它必须加载整个数据集才能这样做（加载数千行只是为了显示其中的 200 行）
*   如果我将 Foo 列排除在模型之外，那么我们将再次推迟执行，但网格缺少一列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:58:01.510

只需`Skip/Take`致电`AsEnumerable()`：

```
var model = _service.GetQuery
                    .Where(data => data.SomeFlag == true)
                    .Skip((page > 0 ? page - 1 : 0) * rows).Take(rows)
                    .AsEnumerable()
                    .Select(data => new { Foo = CalculateFoo(data.Bar); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T22:01:26.883

如果您进行分页，您需要...一页，以及总计

所以

```
var query= _service.GetQuery
                    .Where(data => data.SomeFlag == true);

ViewBag.Total = query.Count();
var model = query.Skip((page > 0 ? page - 1 : 0) * rows).Take(rows)
                    .AsEnumerable()
                    .Select(data => new { Foo = CalculateFoo(data.Bar); }); 
```

*因为模型现在是 IEnumerable 而不是 IQueryable，所以当我们说 model.Skip().Take() 时，它是否必须先从数据库中加载整个数据集才能跳过和获取？（这会破坏分页的目的）*

这是一个事实：在“分页”之前，您将始终只有“被 linq2entites 接受”查询。

**编辑**

*我无法控制分页。我正在生成一个模型并将其传递给一个网格组件（在这种情况下为 DevExpress，但可以是任何网格）。发出分页命令的是网格组件。任何涉及在 AsEnumerable() 之前使用 .Skip().Take() 的解决方案在这里都是不可能的。*

好吧，“通常”网格系统允许（telerik）（或只有（MvcContrib）自定义分页（这意味着您必须提供“选定页面”结果+总数，如我的回答）。

我在“DevExpress 自定义分页”上进行了搜索（您可以进一步搜索），结果很少。不知道他们是否对你感兴趣。

答案示例

[http://www.devexpress.com/Support/Center/p/Q264453.aspx](http://www.devexpress.com/Support/Center/p/Q264453.aspx)

[http://community.devexpress.com/forums/p/98848/338135.aspx](http://community.devexpress.com/forums/p/98848/338135.aspx)

# c++ - 传递当前对象 c++

> ID：10567680
> 
> 赞同：-2
> 
> 时间：2012-05-12T21:56:10.783
> 
> 标签：c++, object, pointers

我想将当前对象的指针传递给新创建的相同类型的对象。我像这样尝试过，但不知何故新对象 prev 字段指向自身。我正在使用 Microsoft Visual C++ 编译器。

```
Class A{

    A *prev;

    A(A* a)
    {
        prev = a;
    }
    vector<A> addToVector()
    {
        vector<A> res;
        res.push_back(A(this));
        return res;
    }

}; 
```

现在，当我从向量中获取结果并将其添加到队列中时，指针指向自身而不是其前身。出了什么问题？

- - 编辑

这是我将新状态添加到向量并返回它们的代码片段

```
const int dim = 3;

int goal[] = {1,2,3,4,5,6,7,8,0};

class State{
public:
vector<int> board;
const State *prev;
int g;
int h() const{
    int res = 0;
    for(int i=0; i<dim*dim; i++){
        if(goal[i] != board[i]) res++;
        }
    return res;
    }
inline bool operator==(const State &other) const{
    bool eq = true;
    for(int i=0; eq && i<dim*dim; i++){
        eq = board[i] == other.board[i];
        }
    return eq;
    }

inline bool operator<(const State& other) const{
    return g + h() > other.g + other.h();
    }
inline State& operator=(const State& other){
    this->board = other.board;
    this->g = other.g;
    this->prev = other.prev;
    assert(this != prev);
    return *this;
    }
State(int a[], int b, const State *p){
    board.assign(a, a+dim*dim);
    g = b;
    prev = p;
    assert(prev != this);
    }
bool isSolution(){
    bool isSol = true;
    for(int i=0; i<dim*dim && isSol; i++){
        isSol = board[i] == goal[i];
        }
    return isSol;
}

vector<State> getSuccessors(){
    vector<State> successors;
    // find zero
    bool found = false;
    int z_pos;
    for(int i=0; i<dim*dim && !found; i++){
        found = board[i] == 0;
        if(found) z_pos = i; 
        }
    switch(z_pos){
    case 0:
        {
        // 1st row left
        int n1[] = {board[1], 0, board[2], board[3],board[4],board[5],board[6],board[7],board[8]};
        // 1st columnn up
        int n2[] = {board[3], board[1], board[2], 0,board[4],board[5],board[6],board[7],board[8]};
        State s1(n1, g+1, this);
        State s2(n2, g+1, this);
        successors.push_back(s1);
        successors.push_back(s2);
        } break;
    case 1:
        {
        // 1st row left
        int n1[] = {board[0], board[2], 0, board[3],board[4],board[5],board[6],board[7],board[8]};
        // 1st row right
        int n2[] = {0, board[0], board[2], board[3],board[4],board[5],board[6],board[7],board[8]};
        // 2nd column up
        int n3[] = {board[0], board[4], board[2], board[3],0,board[5],board[6],board[7],board[8]};
        State s1 (n1, g+1, this);
        State s2 (n2, g+1, this);
        State s3 (n3, g+1, this);
        successors.push_back(s1);
        successors.push_back(s2);
        successors.push_back(s3);
        } break;
    case 2:
        {
        // 1st row right
        int n1[] = {board[0], 0, board[1], board[3],board[4],board[5],board[6],board[7],board[8]};
        // 3rd column up
        int n2[] = {board[0], board[1], board[5], board[3],board[4],0,board[6],board[7],board[8]};
        State s1(n1, g+1, this);
        State s2(n2, g+1, this);
        successors.push_back(s1);
        successors.push_back(s2);
        } break;
    case 3:
        {
        // 1st column up
        int n1[] = {board[0], board[1], board[2], board[6],board[4],board[5],0,board[7],board[8]};
        // 1st column down
        int n2[] = {0, board[1], board[2], board[0],board[4],board[5],board[6],board[7],board[8]};
        // row 2 left
        int n3[] = {board[0], board[1], board[2], board[4],0,board[5],board[6],board[7],board[8]};
        State s1(n1, g+1, this);
        State s2(n2, g+1, this);
        State s3(n3, g+1, this);
        successors.push_back(s1);
        successors.push_back(s2);
        successors.push_back(s3);
        } break;
    case 4:
        {
        // row 2 right
        int n1[] = {board[0], board[1], board[2], 0,board[3],board[5],board[6],board[7],board[8]};
        // row 2 left
        int n2[] = {board[0], board[1], board[2], board[3],board[5],0,board[6],board[7],board[8]};
        // column 2 up
        int n3[] = {board[0], board[1], board[2], board[3],board[7],board[5],board[6],0,board[8]};
        // column 2 down
        int n4[] = {board[0], 0, board[2], board[3],board[1],board[5],board[6],board[7],board[8]};
        State s1(n1, g+1, this);
        State s2(n2, g+1, this);
        State s3(n3, g+1, this);
        State s4(n4, g+1, this);
        successors.push_back(s1);
        successors.push_back(s2);
        successors.push_back(s3);
        successors.push_back(s4);
        } break;
    case 5:
        {
        // row 2 right
        int n1[] = {board[0], board[1], board[2], board[3],0,board[4],board[6],board[7],board[8]};
        // column 3 up
        int n2[] = {board[0], board[1], board[2], board[3],board[4],board[8],board[6],board[7],0};
        // column 3 down
        int n3[] = {board[0], board[1], 0, board[3],board[4],board[2],board[6],board[7],board[8]};
        State s1(n1, g+1, this);
        State s2(n2, g+1, this);
        State s3(n3, g+1, this);
        successors.push_back(s1);
        successors.push_back(s2);
        successors.push_back(s3);
        } break;
    case 6:
        {
        // row 3 left
        int n1[] = {board[0], board[1], board[2], board[3],board[4],board[5],board[7],0,board[8]};
        // column 1 down
        int n2[] = {board[0], board[1], board[2], 0,board[4],board[5],board[3],board[7],board[8]};
        State s1(n1, g+1, this);
        State s2(n2, g+1, this);
        successors.push_back(s1);
        successors.push_back(s2);
        } break;
    case 7:
        {
        // row 3 right
        int n1[] = {board[0], board[1], board[2], board[3],board[4],board[5],0,board[6],board[8]};
        // row 3 left
        int n2[] = {board[0], board[1], board[2], board[3],board[4],board[5],board[6],board[8],0};
        // column 2 down
        int n3[] = {board[0], board[1], board[2], board[3],0,board[5],board[6],board[4],board[8]};
        State s1(n1, g+1, this);
        State s2(n2, g+1, this);
        State s3(n3, g+1, this);
        successors.push_back(s1);
        successors.push_back(s2);
        successors.push_back(s3);
        } break;
    case 8:
        {
        // row 3 right
        int n1[] = {board[0], board[1], board[2], board[3],board[4],board[5],board[6],0,board[7]};
        // column 3 down
        int n2[] = {board[0], board[1], board[2], board[3],board[4],0,board[6],board[7],board[5]};
        State s1(n1, g+1, this);
        State s2(n2, g+1, this);
        successors.push_back(s1);
        successors.push_back(s2);
        } break;
    }
    return successors;
}

void getPath(){
    assert(prev == this);
    cin.get();
    }

};

void solve(){
priority_queue<State> openSet;
set< vector<int> > closedSet;
int init[] = {1,0,3,4,2,6,7,5,8};
State initial(init,0,NULL);
openSet.push(initial);
while(!openSet.empty()){
    State n = openSet.top();
    assert(&n != n.prev); //FAILS
    openSet.pop();
    if(n.isSolution()){
        cout << "openSet size:   " << openSet.size() << endl;
        cout << "closedSet size: " << closedSet.size() << endl;
        n.getPath();
        break;
        }
    else if(closedSet.find(n.board) != closedSet.end()){
        ; // skip
        }
    else{
        closedSet.insert(n.board);
        vector<State> successors = n.getSuccessors();
        for(int i=0; i<successors.size(); i++){
            if(closedSet.find(successors[i].board) == closedSet.end()) openSet.push(successors[i]);
        }
    }
}
}

int main(){
//freopen("packrec.in", "r", stdin);
//freopen("packrec.out", "w", stdout);
//int t; cin >> t; while(t--)
    solve();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T02:04:03.103

用你建设似乎不可能得到`this == this->prev`。然而，这个唯一的保持是对象停留足够长的时间。我怀疑他们没有。证明这一点的最简单方法是断言 的值`prev`：

```
A::A(A* p): prev(p) { assert(this != this->prev); }
A::A(A const& a): prev(a.prev) { assert(this != this->prev); }
A& A::operator= (A const& a) {
    this->prev = a.prev;
    assert(this != this->prev); 
} 
```

我怀疑被引用的原始对象在某个时候消失了，并且该位置被不幸地引用自身的对象重用。您乐意传递对象并保持指向这些对象的指针使其成为可能的候选对象。由于您的代码不完整（而且大多不相关），因此无法重现问题，因此我无法确认这是否确实是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:59:19.633

如果不阅读（长）上下文代码，您需要注意不要调用`addToVector`超出范围的对象。由于直接创建类型的本地对象肯定是非法的`A`（因为向量可能比它长），所以所有构造函数`A::A`都应该是私有的（除了`vector`必须访问的复制构造函数）并且对象应该从工厂函数返回，其中`addToVector`是一个。

编写一个循环很容易，您打算通过定义一个局部变量来创建一系列链接对象，但是由于本地的地址在循环的每次迭代中都是相同的，所以所有对象看起来都是相同的。这很容易导致自链接。

啊，我`addToVector`在上下文代码中搜索，它甚至没有使用。所以一般的建议是有效的。顺便说一句，这是在您编辑扩展代码之后。

# ruby-on-rails - 印象派宝石和 Friendly_id

> ID：10567682
> 
> 赞同：3
> 
> 时间：2012-05-12T21:57:11.003
> 
> 标签：ruby-on-rails

我有一个带有印象派和友好 id 的 Rails 应用程序，我想在我的文章中显示页面浏览量。问题是印象派没有记录观看次数。

[在印象派的 bug tracker 上](https://github.com/charlotte-ruby/impressionist/issues/22)也是同样的问题。

我的文章模型：

```
class Article < ActiveRecord::Base
  is_impressionable
  extend FriendlyId
  friendly_id :title, use: [:slugged, :history]
  belongs_to :user
  belongs_to :category 
```

文章控制器：

```
def show
  @article = Article.find(params[:id])

  if request.path != article_path(@article)
    redirect_to @article, status: :moved_permanently
  end
  respond_to do |format|
     format.html 
     format.json { render json: @article }
  end    
end 
```

我也重新启动了服务器，但遇到了同样的问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T16:23:11.157

好的，有一个解决方法。只需在显示控制器中添加印象派（@model）

```
def show
  @article = Article.find(params[:id])
  impressionist(@article)

   if request.path != article_path(@article)
      redirect_to @article, status: :moved_permanently
   end
   respond_to do |format|
    format.html 
    format.json { render json: @article }
  end    
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-20T18:29:00.953

独特功能的小提示：

```
def show
  @article = Article.find(params[:id])
  impressionist(@article, nil, { unique: [:session_hash] })
end 
```

# android - 如何为一系列表行而不是完整表创建内容提供程序 URI

> ID：10567683
> 
> 赞同：3
> 
> 时间：2012-05-12T21:57:19.430
> 
> 标签：android, uri, android-contentprovider

我有一个 SQLite 数据库的内容提供程序，它有多个表并使用如下 URI：

```
Uri.parse("content://" + AUTHORITY + "/" + TABLE_NAME); 
```

这似乎是标准模式，1 个 URI 到 1 个数据库表，所有行都有 1 个 CONTENT_TYPE，单行有 1 个。

但是，我需要为表数据的子集提供 URI。目前向我的数据库中添加大量附加表对我来说没有意义。看起来内容提供者似乎是为了处理这个问题而设计的，我只是看不到它。基本上我想要一个指向查询而不是表的 URI。希望这是有道理的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T22:47:06.347

您只需添加应用程序所需的新 URI，然后修改内容提供者的查询方法：

```
public class ExampleProvider extends ContentProvider {

    private static final UriMatcher sUriMatcher;

    sUriMatcher.addURI("com.example.app.provider", "table3", 1);
    sUriMatcher.addURI("com.example.app.provider", "table3/#", 2);
    sUriMatcher.addURI("com.example.app.provider", "table3/customquery", 3);

public Cursor query(
    Uri uri,
    String[] projection,
    String selection,
    String[] selectionArgs,
    String sortOrder) {

    switch (sUriMatcher.match(uri)) {

        // If the incoming URI was for all of table3
        case 1:

            if (TextUtils.isEmpty(sortOrder)) sortOrder = "_ID ASC";
            break;

        // If the incoming URI was for a single row
        case 2:

            /*
             * Because this URI was for a single row, the _ID value part is
             * present. Get the last path segment from the URI; this is the _ID value.
             * Then, append the value to the WHERE clause for the query
             */
            selection = selection + "_ID = " uri.getLastPathSegment();
            break;
        case 3:
             // handle your custom query here

             break;

    }
    // call the code to actually do the query
} 
```

# c# - 自动编译和运行第三方代码

> ID：10567689
> 
> 赞同：2
> 
> 时间：2012-05-12T21:58:08.130
> 
> 标签：c#, security, auto-compile

我目前正在编写一个自动源代码验证工具。基本上，学生必须上传他们的 C# 源代码文件作为不同任务的解决方案。服务器在一个框架内编译这些文件，并根据不同的输入文件检查程序。如果程序生成的输出是有效的（等于预定义的输出），则程序是有效的并且学生获得该程序的分数。

但我认为我不能信任学生；）他们可能会尝试获取文件访问权限或在服务器上执行其他坏事。

我可以做些什么来将访问限制在最低限度？
我需要考虑什么？

已经想好了：

*   文件访问
*   最大限度。执行时间处理时间
*   启动其他程序
*   做网络的东西
*   反射

目前，我能想象的检查代码的唯一方法是使用正则表达式搜索“文件”、“网络”、“进程”等关键字。

但我很确定这是非常不安全的。
有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:04:19.137

如果只是安全方面，您应该在沙箱中编译和运行程序。如果您有权访问虚拟机，请考虑使用虚拟机。扫描安全漏洞的源代码听起来像是一项艰巨的任务（坦率地说，如果学生能够在正确输出代码的同时实现漏洞，那么您应该考虑加分：P）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T03:35:32.327

如果你愿意使用 Roslyn CTP，你可以看看[Compilify](https://github.com/compilify/compilify/)。您不需要扩展基础设施，关键部分是创建沙箱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T03:10:02.317

您还可以做的一件事是以具有非常有限权限的新 System.Diagnostics.Process 用户身份运行编译。这不会防止无限循环等，但您可能应该在自己的程序中手动检查，因为即使是新手程序员也可能提交意外的无限循环。

[http://www.curlybrace.com/words/2009/06/04/run-external-application-as-another-user-in-c/](http://www.curlybrace.com/words/2009/06/04/run-external-application-as-another-user-in-c/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T03:39:55.443

编译学生源代码本身不会造成任何安全风险，但是执行学生代码需要一个沙箱，因为代码是不受信任的。AppDomains 可用于此目的，并且可以分配特定的权限（例如 Execution 或 FileIO）。请参阅MSDN 上的[这篇文章](http://msdn.microsoft.com/en-us/library/bb763046)。您可能想要添加一些工具来在另一个线程上执行目标代码，以便在超时时可以中止它。

如果您担心学生会导致程序崩溃（例如，导致 StackOverflowException 的无限递归调用），那么您将不得不在可以与主应用程序通信的单独主机进程中执行上述所有操作。

更新

实际上，编译可能会带来问题，因为 msbuild 可以通过 proj 文件中的任务执行任意代码。我不认为运行编译器（csc.exe）会造成问题，但您必须自己构建命令行。

# javascript - 如何将图像像素转换为 lat 和 lng 中的相同位置以供谷歌地图使用

> ID：10567693
> 
> 赞同：2
> 
> 时间：2012-05-12T21:58:27.713
> 
> 标签：javascript, google-maps, math, google-maps-api-3

Google Maps API 允许您将自己的地图与 API 集成，我已经这样做了，但是我有一些代码可以在我的原始地图上放置一个标记，该地图具有像素位置。

我希望实现的是将原始PNG地图的像素位置转换为（lat，lng）中的相对位置，以便我可以在新的谷歌地图块上放置标记，但到目前为止我一直无法实现这一点，有没有人做过类似的事情，因为我正在寻找有关如何解决这个问题的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:27:30.927

1.  [在https://developers.google.com/maps/documentation/javascript/maptypes#MapCoordinates](https://developers.google.com/maps/documentation/javascript/maptypes#MapCoordinates)阅读地图坐标
2.  将您的地图转换为基本图块大小 (256x256) 并转换您的标记位置。
3.  使用地图投影将您现在翻译的标记位置转换为 LatLng 位置：map.getProjection 和 projection.fromPointToLatLng。

# sql - 查询一行的最新版本

> ID：10567698
> 
> 赞同：0
> 
> 时间：2012-05-12T21:59:34.020
> 
> 标签：sql, query-optimization

我设置了一个数据库表，如下所示：

```
copy_blocks
id (auto-increment int)
content (text)
parent_id (int) 
```

当第一次插入一个副本时，parent_id 被设置为它自己。例子：

```
copy_blocks
id    content        parent_id
1     Hello, World   1 
```

当用户更新该副本时，会插入新行，但这些行始终指向副本块的第一个版本。

```
copy_blocks
id    content         parent_id
2     Hello, World!   1
3     Heya, World!!   1 
```

以这种方式构建事物使我可以查询特定版本的内容，或者找到父副本块然后查找最新版本。（在这种情况下，版本 #3）

所以这是我的问题：任何人都可以提出一个始终返回每个内容块的最新版本的查询吗？理想情况下，查询将返回以下结果：

```
id    content         parent_id
3     Heya, World!!   1 
```

我觉得这与加入反对自己有关。如果没有至少两个不同的查询或服务器端代码，我想不出该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T22:03:17.000

试试这个：

```
select id, content, parent_id
  from copy_blocks
 where (id, parent_id) in (
     select max(id), parent_id from copy_blocks group by parent_id
 ) 
```

如果您的表太大，查询可能会变慢。如果是这种情况，请尝试添加一些索引来改进它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T22:17:25.800

另一种选择：

```
SELECT 
      c.*
FROM 
        ( SELECT parent_id
               , MAX(id) AS id
          FROM copy_blocks
          GROUP BY parent_id
        ) AS dc
    JOIN
        copy_blocks AS c
      ON 
        (c.parent_id, c.id) = (dc.parent_id, dc.id) 
```

# java - 在 Jetty 中运行 servlet 时获得 HTTP 500

> ID：10567699
> 
> 赞同：2
> 
> 时间：2012-05-12T21:59:51.063
> 
> 标签：java, deployment, jetty

我有一个运行良好的 servlet，直到几天前。但我唯一改变的是我用于 maven 的 nexus repo。我正在通过 mvn jetty:run 运行 servlet

但是当我尝试访问该站点而不是查看主页时，我看到：

```
HTTP ERROR 500

Problem accessing /. Reason:

    jregex/Pattern 
```

我可以访问其他网址，例如 /favicon.ico。但是我在这个 jregex/Pattern 错误上找不到任何东西，而且看起来代码中根本没有使用 jregex 库。

我也没有在日志中看到任何问题。看起来对主页的请求没有进入我的 servlet，但对其他页面的请求是。

Arch Linux 和 Mac OS X 10.7 都发生了这种情况

这几乎可以肯定是一个依赖问题，因为在用旧文件夹替换我的`~/.m2`文件夹（具有来自旧 nexus 服务器的依赖项）之后它可以工作。

有时我也会得到：

```
HTTP ERROR: 503

Problem accessing /. Reason:

    SERVICE_UNAVAILABLE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T22:08:53.893

Jason 这对我有用，这是我经常使用的 pom.xml（相关部分）：

```
<dependencies>
        <!-- Jetty dependencies -->
        <dependency>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-embedded</artifactId>
            <version>6.1.26</version>
        </dependency>
    </dependencies>

    <build>
    <plugins>
        <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>7.0.2.v20100331</version>
            <configuration>
                <webAppConfig>
                    <contextPath>/jetty-example</contextPath>
                    <descriptor>${basedir}/src/main/webapp/WEB-INF/web.xml</descriptor>
                </webAppConfig>
                <scanIntervalSeconds>5</scanIntervalSeconds>
                <stopPort>9966</stopPort>
                <stopKey>foo</stopKey>
                <connectors>
                    <connector implementation="org.eclipse.jetty.server.nio.SelectChannelConnector">
                        <port>9080</port>
                        <maxIdleTime>60000</maxIdleTime>
                    </connector>
                </connectors>
            </configuration>
        </plugin>
    </plugins>
    </build> 
```

这是位于上面在 webappconfig 中作为描述符指定的位置的 web.xml：

```
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
    version="2.4">

    <display-name>HelloWorld Application</display-name>
    <description>
       lalala
    </description>

    <servlet>
        <servlet-name>HelloServlet</servlet-name>
        <servlet-class>com.mypackage.jetty.Hello</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>HelloServlet</servlet-name>
        <url-pattern>/hello</url-pattern>
    </servlet-mapping>

</web-app> 
```

和 servlet 本身：

```
public final class Hello extends HttpServlet {

    private static final long serialVersionUID = 903359962771189189L;

    public void doGet(HttpServletRequest request,
                      HttpServletResponse response)
      throws IOException, ServletException {

        response.setContentType("text/html");
        PrintWriter writer = response.getWriter();        
        writer.println("<html>");
        writer.println("<head>");
        writer.println("<title>Sample Application Servlet Page</title>");
        writer.println("</head>");
        writer.println("<body bgcolor=white>");

        writer.println("<table border=\"0\" cellpadding=\"10\">");
        writer.println("<tr>");
        writer.println("<td>");
        writer.println("</td>");
        writer.println("<td>");
        writer.println("<h1>W00w I totally work</h1>");
        writer.println("</td>");
        writer.println("</tr>");
        writer.println("</table>");

        writer.println("</body>");
        writer.println("</html>");
    }
} 
```

您可以通过运行来运行服务器`mvn jetty:run`并在以下位置检查它`http://localhost:9080/jetty-example/hello`

此外，您可以将执行添加到插件部分并在完成构建项目时启动码头。无需`mvn jetty:run`每次手动操作。

```
<executions>
     <execution> <id>start-jetty</id> <phase>pre-integration-test</phase> <goals> <goal>run</goal> </goals> <configuration> <daemon>true</daemon> </configuration> </execution> <execution> <id>stop-jetty</id> <phase>post-integration-test</phase> <goals> <goal>stop</goal> </goals> </execution> 
</executions> 
```

您还可以添加我用于数据库的码头配置文件（用于不同的环境）。`webAppConfig`您可以像这样在您的码头插件中添加文件位置：

```
<webAppConfig>
      <contextPath>/my-tool</contextPath>
      <descriptor>${basedir}/src/main/webapp/WEB-INF/jetty/web.xml                          </descriptor>
      <jettyEnvXml>${basedir}/src/main/webapp/WEB-INF/jetty/jetty-env.xml                           </jettyEnvXml>
</webAppConfig> 
```

jetty-env.xml 的示例内容：

```
<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.mortbay.org/configure.dtd"[]>
<Configure id="wac" class="org.eclipse.jetty.webapp.WebAppContext">
      <!-- PRIMARY DATABASE     -->
      <New id="devDS" class="org.eclipse.jetty.plus.jndi.Resource">
            <Arg>primaryDS</Arg>
            <Arg>
                  <!-- i.e. Postgress   -->
                  <New class="org.postgresql.ds.PGSimpleDataSource">
                        <Set name="User">myuser</Set>
                        <Set name="Password">password</Set>
                        <Set name="DatabaseName">database</Set>
                        <Set name="ServerName">database.stackoverflow.com</Set>
                        <Set name="PortNumber">5432</Set>
                  </New>
            </Arg>
      </New>
      <!-- BACKUP DATABASE      
      <New id="devDS" class="org.eclipse.jetty.plus.jndi.Resource">         
      <Arg>backupDS</Arg>       
      <Arg>             
            .....       
      </Arg>    
        -->
</Configure> 
```

你应该对此很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:35:58.847

我将从比较您更改`ear`. 这应该会引导您找到已更改的 jar 文件。假设一切都是开源的，从 maven repo 下载源代码并进行比较。\`war``pom.xml`

编辑：[JRegex](http://jregex.sourceforge.net)是一个支持 Perl 正则表达式的 java 库。也许更改 maven repo 会导致下载其他版本的依赖项，并且它们对 JRegex 有一些可选的依赖项。（你应该能够检查）。

尝试将 JRegex 添加到您的依赖项中，看看会发生什么。（请注意，如果您正在生产并且赶时间，这可能是一种解决方法）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T20:09:34.870

您正在运行的 mvn 命令是什么？您是否尝试过手动下载工件并在本地工件上运行 mvn？

我会首先使用 mvn 来下载工件。这将验证您的所有设置/权限设置是否正常且适当。为此，您可以使用 [Maven Dependency Plugin (v2.4)](http://maven.apache.org/plugins/maven-dependency-plugin)将依赖项下载到本地文件。有关更多详细信息，请参阅[此帖子](https://stackoverflow.com/a/9893226/827480)

一旦您可以确保您能够在本地下载工件，请尝试在本地工件上运行 jetty:run。如果这有效，那么你知道你的回购有问题。

如果这仍然不起作用，您可能在镜像设置或 repo 配置方面遇到问题。例如，如果 mvn 需要一个您在本地没有的插件或依赖项，它会查找第三方 repo。您的 settings.xml 文件可能会将所有内容镜像到您的本地 nexus 服务器，该服务器可能未配置为从 MvnCentral 下载。

确保您也没有任何依赖项/插件下载问题。您可以轻松地从您的 settings.xml 指向 mvncentral 并完全绕过您的 nexus 服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T14:34:41.933

[FWIW，您能否使用 BeyondCompare（ Scooter Software](http://www.scootersoftware.com/)）等工具进行文件比较

# c# - Mirc 颜色代码的正则表达式替换

> ID：10567701
> 
> 赞同：3
> 
> 时间：2012-05-12T22:00:04.770
> 
> 标签：c#, regex, replace, irc, mirc

我正在为特殊用例制作一个小型/简单的 IRC 客户端。我想去掉其他用户从他们的 Mirc / 其他类似客户端输入的 Mirc 颜色代码。

截屏 ：

![在此处输入图像描述](../Images/16f1ba07901f2d50b8b167ea6262bd74.png)

我已经尝试了大约 1 小时但没有成功：

```
string msg = string.Format("{0}\n", e.Data.Message);
//msg = Regex.Replace(msg, @"\x03(?:\d{1,2}(?:,\d{1,2})?)?", string.Empty); // Ive tried all sorts here.
txtActivity.AppendText(msg); 
```

请帮助，提前谢谢。

编辑：

这是红色的 HelloWorld。

```
3
51
72
101
108
108
111
87
111
114
108
100
10 
```

编辑2：

![在此处输入图像描述](../Images/3f874c034b143d3d2c26b55fee0d1849.png)

编辑 3：

```
3
48
49
44
49
53
32
49
46
32
73
110
32
116
104
101
32
78
97
109
101
32
111
102
32
31
65
108
108
97
104
31
44
32
116
104
101
32
77
111
115
116
32
66
101
110
101
102
105
99
101
110
116
44
32
116
104
101
32
77
111
115
116
32
31
77
101
114
99
105
102
117
108
31
46
32
3
10 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T22:42:00.920

如果您想去除所有 BURC 代码（粗体、下划线、反向和颜色），您还可以使用如下正则表达式：

```
msg = Regex.Replace(msg, @"[\x02\x1F\x0F\x16]|\x03(\d\d?(,\d\d?)?)?", String.Empty); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T22:59:37.183

尝试以下，为您工作 hello world 示例

```
s = new Regex(@"\x03(\d{1,2}(,\d{1,2})?)?").Replace(s, ""); 
```

基本上只是看看你的字符串中的字符是什么并构建你的正则表达式以匹配它们中的任何一个 3...扼杀 L char 这是正则表达式 \x03 51...数字 3 这是正则表达式 \d

@EDIT 3：
我发布的代码给出了：

```
" 1\. In the Name of Allah, the Most Beneficent, the Most Merciful. \n" 
```

如果您不想要空格和换行符，可以使用 .Trim()

```
 s = new Regex(@"\x03(\d{1,2}(,\d{1,2})?)?").Replace(s, "").Trim(); 
```

# java - 如何找到至少一次包含所有给定字符的任何单词

> ID：10567702
> 
> 赞同：0
> 
> 时间：2012-05-12T22:00:07.617
> 
> 标签：java

我使用这段代码

```
 while((dictionaryWord = br_.readLine()) != null) 
            {
                if(dictionaryWord.matches("^"+word.replace("*" , "." )+"$"))
                {   
                    incrementCounter();
                    System.out.println(dictionaryWord);
                }
            } 
```

**预期目标：word = dgo**

**输出：dog、god、dogma megalogdon 等......**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:16:30.993

```
public static void main(String[] args) {
  final BitSet reqChars = new BitSet(26);
  for (char c : "dog".toCharArray()) reqChars.set(Character.toLowerCase(c) - 'a');
  for (String w : new String[] {"god", "dogma", "megalogdon", "dorm"})
    if (hasAllChars(w, reqChars)) System.out.println(w);
}

public static boolean hasAllChars(String in, BitSet req) {
  req = (BitSet)req.clone();
  for (char c : in.toCharArray()) {
    req.set(Character.toLowerCase(c) - 'a', false);
    if (req.isEmpty()) return true;
  }
  return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T22:09:16.663

您可以在 中构建[`Set<Character>`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)所有字符`word`，然后对其进行迭代。如果一个字符不在 中`dictionaryWord`，`dictionaryWord`则不适合。仅当全部出现时 - 打印`dictionaryWord`

```
 String word = "dog";
    String  dictionaryWord;
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    while((dictionaryWord = br.readLine()) != null)  {
        Set<Character> chars = new HashSet<Character>();
        for (char c : word.toCharArray()) {
            chars.add(c);
        }
        boolean match = true;
        for (Character c : chars) {
            String s = "" + c;
            if (!dictionaryWord.contains(s)) {
                match = false;
                break;
            }
        }
        if (match == true) 
            System.out.println(dictionaryWord);
    } 
```

在上面的代码中，当然可以将集合创建移出`while`循环。

更有效的解决方案可能是也创建一个`Set`from `dictionaryWord`，然后检查两个集合的交集是否与表示 的集合相同`word`。
这将是：

```
 String word = "dog";
    Set<Character> set1 = new HashSet();
    for (char c : word.toCharArray()) {
        set1.add(c);
    }
    String  dictionaryWord;
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    while((dictionaryWord = br.readLine()) != null)  {
        Set<Character> set2 = new HashSet();
        for (char c : dictionaryWord.toCharArray()) {
            set2.add(c);
        }           Set<String> intersection = new HashSet(CollectionUtils.intersection(set1, set2));
        if (set1.equals(intersection)) {
            System.out.println(dictionaryWord);
        } else System.out.println("bad");
    } 
```

[`CollectionUtils.intersection()`](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html#intersection%28java.util.Collection,%20java.util.Collection%29)从 apache commons使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T22:23:42.707

```
public static boolean containsAllCharacters(String word, Set<String> characters){
    int i = 0;
    int wordLength = word.getLength();
    while (i <= wordLength && characters.contains(word.get(i++)){}
    return i==wordLength;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T22:44:24.613

实际上，这个问题最有趣的部分是如何避免查看字典中的每个单词（尽管原始代码类型掩盖了这一点）。一个可能有趣的答案是：

1.  按出现频率制作一个包含 26 个字符的表格。
2.  查找每个字符，找到出现频率最低的字符。
3.  然后对包含该字符的单词进行匹配。

当然，这是假设单个匹配比正则表达式便宜。

关于这个主题的很棒的维基百科页面在[这里](http://en.wikipedia.org/wiki/Letter_frequency)。在这种情况下，差异可能不会很大，但例如在 e 和 x 的情况下，差异会很大。

# javascript - JavaScript 获取子元素

> ID：10567709
> 
> 赞同：37
> 
> 时间：2012-05-12T22:00:49.840
> 
> 标签：javascript, html

为什么这在 Firefox 中不起作用我尝试选择类别，然后使子类别可见。

```
<script type="text/javascript">
    function show_sub(cat) {
      var cat = document.getElementById("cat");
      var sub = cat.getElementsByName("sub");
      sub[0].style.display='inline'; 
}

</script> 
```

-

```
<ul>
    <li id="cat" onclick="show_sub(this)">
        Top 1
        <ul style="display:none" name="sub">
            <li>Sub 1</li>
            <li>Sub 2</li>
            <li>Sub 3</li>
        </ul>
    </li>
    <li>Top 2</li>
    <li>Top 3</li>
    <li>Top 4</li>
</ul> 
```

编辑答案是：

```
<script type="text/javascript">
   function show_sub(cat) {
      cat.getElementsByTagName("ul")[0].style.display = (cat.getElementsByTagName("ul")[0].style.display == "none") ? "inline" : "none";
   }
</script> 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-12T22:56:12.707

UL 没有名称属性，但您可以通过标签名称引用 ul。

尝试将脚本中的第 3 行替换为：

```
var sub = cat.getElementsByTagName("UL"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T22:17:22.850

我建议做类似的事情：

```
function show_sub(cat) {
    if (!cat) {
        return false;
    }
    else if (document.getElementById(cat)) {
        var parent = document.getElementById(cat),
            sub = parent.getElementsByClassName('sub');
        if (sub[0].style.display == 'inline'){
            sub[0].style.display = 'none';
        }
        else {
            sub[0].style.display = 'inline';
        }
    }
}

document.getElementById('cat').onclick = function(){
    show_sub(this.id);
};​​​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/XnazT/)。

尽管以上依赖于使用 a`class`而不是`name`等于 的属性`sub`。

至于为什么您的原始版本“不起作用”（我必须补充一点，不是对问题的特别有用的描述），我所能建议的是，在 Chromium 中，JavaScript 控制台报告说：

> 未捕获的类型错误：对象 # 没有方法“getElementsByName”。

解决旧 IE 系列限制的一种方法是使用自定义函数来模拟`getElementsByClassName()`，尽管很粗略：

```
function eBCN(elem,classN){
    if (!elem || !classN){
        return false;
    }
    else {
        var children = elem.childNodes;
        for (var i=0,len=children.length;i<len;i++){
            if (children[i].nodeType == 1
                &&
                children[i].className == classN){
                    var sub = children[i];
            }
        }
        return sub;
    }
}

function show_sub(cat) {
    if (!cat) {
        return false;
    }
    else if (document.getElementById(cat)) {
        var parent = document.getElementById(cat),
            sub = eBCN(parent,'sub');
        if (sub.style.display == 'inline'){
            sub.style.display = 'none';
        }
        else {
            sub.style.display = 'inline';
        }
    }
}

var D = document,
    listElems = D.getElementsByTagName('li');
for (var i=0,len=listElems.length;i<len;i++){
    listElems[i].onclick = function(){
        show_sub(this.id);
    };
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/XnazT/5/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T22:21:48.020

试试这个：

```
function show_sub(cat) {
    var parent = cat,
    sub = parent.getElementsByClassName('sub');
    if (sub[0].style.display == 'inline'){
        sub[0].style.display = 'none';
    }
    else {
        sub[0].style.display = 'inline';
    }
}

document.getElementById('cat').onclick = function(){
    show_sub(this);
};​ 
```

并将其用于 IE6 和 7

```
if (typeof document.getElementsByClassName!='function') {
    document.getElementsByClassName = function() {
        var elms = document.getElementsByTagName('*');
        var ei = new Array();
        for (i=0;i<elms.length;i++) {
            if (elms[i].getAttribute('class')) {
               ecl = elms[i].getAttribute('class').split(' ');
                for (j=0;j<ecl.length;j++) {
                    if (ecl[j].toLowerCase() == arguments[0].toLowerCase()) {
                        ei.push(elms[i]);
                    }
                }
            } else if (elms[i].className) {
                ecl = elms[i].className.split(' ');
                for (j=0;j<ecl.length;j++) {
                    if (ecl[j].toLowerCase() == arguments[0].toLowerCase()) {
                        ei.push(elms[i]);
                    }
                }
            }
        }
        return ei;
    }
} 
```

# windows - VBScript - 检查防火墙是否启用

> ID：10567713
> 
> 赞同：2
> 
> 时间：2012-05-12T22:01:04.947
> 
> 标签：windows, vbscript, firewall

我编写了一个脚本来检查 Windows 是否启用了防火墙。它看起来不错，但它总是说防火墙已启用 - 即使它已禁用。我花了很多时间分析它，但没有结果——你能帮我弄清楚它有什么问题吗？

```
Dim strFirewallStatus, strComputer
strComputer = "localhost"

Set objReg = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" &_ 
                       strComputer & "\root\default:StdRegProv")

If err.number = 0 Then
  objReg.GetDWORDValue &H80000002, "SYSTEM\CurrentControlSet\" &_
  "Services\SharedAccess\Parameters\FirewallPolicy\" &_
  "DomainProfile\", "EnableFirewall", dwValue

  If dwValue <> 0 Then
    strFirewallStatus = "Firewall is enabled"
  Else
    strFirewallStatus = "Firewall is disabled"
  End If

  WScript.Echo strFirewallStatus
Else
  WScript.Echo strComputer & " - Error" & err.number & " : " &_
  err.description
  err.clear
End if 
```

我将该脚本保存为 .vbs 文件。

顺便说一句 - 我如何在系统启动时设置脚本？我希望此脚本在首次启动后自动将信息添加到注册表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T23:59:42.413

您应该考虑可以为 a `Domain Profile`、 a`Standard Profile (Private or domestic lan)`和 a启用/禁用防火墙`Public Profile (public lan)`。
每个设置在注册表中都有一个单独的键。

如果您的 PC 不是域的一部分，则测试将返回默认值**Enabled**。

在我的家用 PC（win7 64 位无域）上，如果我使用**'StandardProfile'**而不是**'DomainProfile'** ，那么脚本会正确返回防火墙的当前状态。

 **```
If err.number = 0 Then 
  objReg.GetDWORDValue &H80000002, "SYSTEM\CurrentControlSet\" &_ 
  "Services\SharedAccess\Parameters\FirewallPolicy\" &_ 
  "StandardProfile\", "EnableFirewall", dwValue 
```**

# php - 通过 php 下载远程图像（安全）

> ID：10567718
> 
> 赞同：1
> 
> 时间：2012-05-12T22:02:09.677
> 
> 标签：php, jquery

PHP：

有什么想法可以找到类似于 stackoverflow 使用的脚本吗？或者我自己做这样的东西容易吗？我确定下载图像不是问题，但我更担心安全性。我正在构建一个用户头像上传/远程上传系统。

查询：

我将jquery添加到标签的原因，也许可以让用户指向图像的URL并以某种方式通过正常的文件上传输入自己上传（无需先手动将图像下载到计算机）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T22:05:52.067

您可以使用[cURL](http://php.net/manual/en/book.curl.php)下载图像，然后使用[getimagesize()](http://php.net/manual/en/function.getimagesize.php)检查它是否真的是图像 - 出于安全目的。

```
<?php
$limit = 1024*1024*10 // Max. file size in bytes (1024*1024*10 = 10MB)
$ch = curl_init();

$fh = fopen('image.jpg', 'w'); 

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FILE, $fh);
curl_setopt($ch, CURLOPT_RANGE, '0-' . $limit);

curl_exec($ch);

curl_close($ch);

if ($image = getimagesize ("image.jpg")) { 
     // It's an image
}
else { 
     // Not an image; delete!
} 
```

# java - 正确使用 java 类路径，需要澄清

> ID：10567721
> 
> 赞同：0
> 
> 时间：2012-05-12T22:02:34.463
> 
> 标签：java, linux

我正在运行该程序：

```
java -Dfirstarg=$1 -cp $APP_HOME/someFile.cfg;$APP_HOME/lib/*.jar ::  Handler 
```

意图传递参数并在`$APP_HOME/lib/`类路径下包含 someFile.cfg 和所有 jar。

请问我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T22:05:53.617

您不需要将 传递`someFile.cfg`到类路径中。您只需要在那里添加库和当前目录。

我会做：

```
java -Dfirstarg=$1 -cp .:$APP_HOME/lib/*.jar YourMainClass 
```

假设您位于文件所在的`.class`目录中。

**另外，请记住，在 linux 中，您使用`:`而不是`;`在`-cp`参数中分隔您的类路径条目。**

# node.js - node.js 数字签名不起作用

> ID：10567722
> 
> 赞同：3
> 
> 时间：2012-05-12T22:03:02.280
> 
> 标签：node.js, digital-signature

我正在尝试使用 node.js (0.6.15) 的加密模块生成数字签名。以下代码不打印任何内容（在 Windows 和 linux 机器上）并且 res 的长度为 0。此外，无论我提供什么虚拟输入作为键，签名者都不会抛出异常。openssl 安装在版本 1.0.1 中。我究竟做错了什么？

```
var crypto = require('crypto');
var signer = crypto.createSign("RSA-SHA1")
signer.update("sign me!")

//dummy key
var private_key = "MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBAL4vpoH3H3byehjj" +
    "7RAGxefGRATiq4mXtzc9Q91W7uT0DTaFEbjzVch9aGsNjmLs4QHsoZbuoUmi0st4" +
    "x5z9SQpTAKC/dW8muzacT3E7dJJYh03MAO6RiH4LG34VRTq1SQN6qDt2rCK85eG4" +
    "5NHI4jceptZNu6Zot1zyO5/PYuFpAgMBAAECgYAhspeyF3M/xB7WIixy1oBiXMLY" +
    "isESFAumgfhwU2LotkVRD6rgNl1QtMe3kCNWa9pCWQcYkxeI0IzA+JmFu2shVvoR" +
    "oL7eV4VCe1Af33z24E46+cY5grxNhHt/LyCnZKcitvCcrzXExUc5n6KngX0mMKgk" +
    "W7skZDwsnKzhyUV8wQJBAN2bQMeASQVOqdfqBdFgC/NPnKY2cuDi6h659QN1l+kg" +
    "X3ywdZ7KKftJo1G9l45SN9YpkyEd9zEO6PMFaufJvZUCQQDbtAWxk0i8BT3UTNWC" +
    "T/9bUQROPcGZagwwnRFByX7gpmfkf1ImIvbWVXSpX68/IjbjSkTw1nj/Yj1NwFZ0" +
    "nxeFAkEAzPhRpXVBlPgaXkvlz7AfvY+wW4hXHyyi0YK8XdPBi25XA5SPZiylQfjt" +
    "Z6iN6qSfYqYXoPT/c0/QJR+orvVJNQJBANhRPNXljVTK2GDCseoXd/ZiI5ohxg+W" +
    "UaA/1fDvQsRQM7TQA4NXI7BO/YmSk4rW1jIeOxjiIspY4MFAIh+7UL0CQFL6zTg6" +
    "wfeMlEZzvgqwCGoLuvTnqtvyg45z7pfcrg2cHdgCXIy9kErcjwGiu6BOevEA1qTW" +
    "Rk+bv0tknWvcz/s="

var res = signer.sign(private_key, output_format='base64')
console.log(res); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:47:28.280

正如 Ben Noordhuis[在这里](http://groups.google.com/group/nodejs/browse_thread/thread/4bfc0ea9b29ab617)告诉我的那样，上面使用的密钥格式不正确。最好从磁盘加载 pem 格式。

# python - 从 wxPython 事件处理程序中调用函数

> ID：10567726
> 
> 赞同：2
> 
> 时间：2012-05-12T22:03:25.757
> 
> 标签：python, wxpython

我正在努力寻找一种在 wxPython 事件处理函数中使用函数的方法。假设我有一个按钮，当单击它时，它会使用事件处理程序运行一个名为 OnRun 的函数。但是，用户忘记在 OnRun 按钮之前单击 RadionButton，我想弹出一个 MessageDialog 告诉他们他们忘记了一步。我将多次重复使用这个 MessageDialog，因此我不想复制/粘贴相同的代码，我只想在一个函数中使用这个 MessageDialog，并在用户忘记检查 RadioButton 时调用这个 MessageDialog 函数。

如果这不是事件处理程序中使用的函数，我知道我可以简单地将函数作为参数，但我没有看到可以用这些方法做到这一点。这里的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:23:19.400

即使答案似乎过于直接，我也会对此进行尝试。我会在封闭框架中设置一个属性，标记单选按钮是否已被单击。然后何时`OnRun`调用检查该属性。如果它处于错误状态，请调用 MessageDialog 并中止/暂停/修改`OnRun`.

**编辑**这就是我的意思，一个带有两个按钮的简单示例，除非单击用户协议，否则这两个按钮都不会导致进一步的操作。

```
import wx

class ButtonFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, -1, 'Button Example', 
                          size=(300, 100))
        panel = wx.Panel(self, -1)
        self.radio = wx.RadioButton(panel, -1, "Accept user agreement", pos=(50, 10))
        self.button = wx.Button(panel, -1, "Run", pos=(50, 30))
        self.Bind(wx.EVT_BUTTON, self.OnRun, self.button)
        self.button.SetDefault()
        self.btn2 = wx.Button(panel, -1, "Walk", pos=(150, 30))
        self.Bind(wx.EVT_BUTTON, self.OnWalk, self.btn2)

    def OnRun(self, event):
        if not self.CheckRadio():
            return
        self.button.SetLabel("Running")

    def OnWalk(self, event):
        if not self.CheckRadio():
            return
        self.btn2.SetLabel("Walking")

    def CheckRadio(self):
        accepted = self.radio.GetValue()
        if not accepted:
            dlg = wx.MessageDialog(None, 'First accept the user agreement',
                                  'MessageDialog', wx.OK | wx.ICON_QUESTION)
            result = dlg.ShowModal() # result not used in this demo
            dlg.Destroy()
            return False
        else:
            return True

if __name__ == '__main__':
    app = wx.PySimpleApp()
    frame = ButtonFrame()
    frame.Show()
    app.MainLoop() 
```

代码改编自[wxPython in Action](http://wiki.wxpython.org/wxPythonInAction)的清单 7.11 。我希望这会有所帮助，如果您在过去的时间里还没有解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T14:34:24.657

下面的代码展示了如何创建一个小方法，您可以重复使用该方法来显示自定义对话框并告诉用户他们需要接受协议。当然，您可以更改条件以做任何您想做的事情。您可以更改“showMsg”方法，只需稍作调整，图标也会发生变化。

```
import wx

########################################################################
class TestFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, title="Test")

        panel = wx.Panel(self)
        self.radios = wx.RadioBox(panel, label="Choices",
                                  choices = ["None", "Accept", "Reject"])

        button = wx.Button(panel, label="Run")
        button.Bind(wx.EVT_BUTTON, self.onBtn)

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(self.radios, 0, wx.ALL, 5)
        sizer.Add(button, 0, wx.ALL, 5)
        panel.SetSizer(sizer)

    #----------------------------------------------------------------------
    def onBtn(self, event):
        """"""
        btn = event.GetEventObject()
        btn.SetLabel("Running")
        radio_value = self.radios.GetStringSelection()
        if radio_value == "None":
            self.showMsg("Error", "Please Choose 'Accept' or 'Reject'!")
        elif radio_value == "Accept":
            self.showMsg("Message", "Thank you for accepting!")
        else:
            self.showMsg("Message", "We're sorry, but you cannot continue the install")

    #----------------------------------------------------------------------
    def showMsg(self, title, msg):
        """"""
        dlg = wx.MessageDialog(None, msg, title, wx.OK | wx.ICON_QUESTION)
        dlg.ShowModal()
        dlg.Destroy()

if __name__ == "__main__":
    app = wx.App(False)
    frame = TestFrame()
    frame.Show()
    app.MainLoop() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T22:21:30.767

您可以创建自己的 MessageDialog（继承），也可以使用[functools.partial](http://docs.python.org/library/functools.html#functools.partial) /lambda 将附加参数传递给事件处理程序：

```
self.Bind(wx.MY_EVENT, lambda evt: self.OnEventX(evt, handler=foo), id=12) 
```

# javascript - 数组的最后一个单元格中有不需要的对象

> ID：10567727
> 
> 赞同：0
> 
> 时间：2012-05-12T22:03:56.113
> 
> 标签：javascript, jquery

我在解析的 XML 数组上使用以下代码：

```
$(this).find("cp_group").each(function() {
    $("select#comp_1").append('<optgroup label="' + $(this).attr('label') + '"><option>' + $(this).find("cmp").map(function() {
        return $(this).text();
    }).get().join("</option><option>") + $(this).append('</option></optgroup>'));
});​ 
```

我在每个选项组的最后一个选项中得到一个不需要的 [object Object]，如下所示：

```
<select name="comp_1" id="comp_1">
<optgroup label="Combat">
<option>Arme</option>
<option>Arts martiaux</option>
<option>Esquive</option>
<option>Feinte</option>
<option>Parade</option>
<option>Lutte[object Object]</option> 
```

我不明白这个 [object Object] 是从哪里来的，我没有做到不得到它或删除它。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T22:07:51.687

它来自`+ $(this).append(...)`. 你只想要这个`+'</option....'`部分，没有那个 jQuery 包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T22:11:56.627

您误解了 jQuery，尤其是 jQuery 的`append`工作原理。当您使用 jQuery 操作事物时，您不是在处理**标记**（大部分），而是在处理**对象**（DOM 元素）。

这应该解决它：

```
$(this).find("cp_group").each(function() {
    // Get this entry
    var $this = $(this);

    // Create the optgroup
    var optgroup = $('<optgroup label="' + $this.attr('label') + '">');

    // Fill it in
    $this.find("cmp").each(function() {
        $("<option>").text($(this).text()).appendTo(optgroup);
    });

    // Append it to the select
    $("select#comp_1").append(optgroup);
});​ 
```

# android - 如何使edittext视图填充android中的父元素

> ID：10567732
> 
> 赞同：1
> 
> 时间：2012-05-12T22:04:33.370
> 
> 标签：android, xml

我有两个编辑文本视图。其中一个只有一行，它的标题。但是另一个应该将线性布局填充到最后，但事实并非如此。我更新了代码，所以这是这个应用程序的整个 xml。我希望有人能找出问题所在。我想要这样形成的部分是名为 addView 的 LinearLayout 内的部分。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mainLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" 
android:background="#ffffff">

<LinearLayout  
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:orientation="horizontal"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
>

    <Button 
        android:id="@+id/addButton"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:background="@drawable/addbuttonstyle"
        android:layout_weight="20"/>

    <ImageView
        android:id="@+id/titleView"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:background="@drawable/titleview"
        android:layout_weight="60"/>

    <Button 
        android:id="@+id/orderButton"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:background="@drawable/orderbuttonstyle"
        android:layout_weight="20"/>

</LinearLayout>  

<FrameLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
> 
    <LinearLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/addView"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >

        <EditText 
            android:id="@+id/textBoxTitle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="note title"
            android:singleLine="true"

            />
         <EditText 
            android:id="@+id/textBoxContent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:hint="content"
            />
    </LinearLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android" 
        android:id="@+id/backgroundLayout"
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/background"
    />

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:17:06.773

我将`textBoxTitle`' 的高度更改为`wrap_content`，我看到了：

![截屏](../Images/aa735b01bbaaf4be9966f18b5bae1a18.png)

这是你所希望的吗？此外，如果您想出`content`现在左上角，请使用此属性：

```
<EditText
    ...
    android:gravity="top"
    /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T13:59:12.977

所以我发现出了什么问题。我需要将 layout_height（textBoxContent 视图）设置为 0dp，将 layout_weight（textBoxContent 视图）设置为 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T22:17:48.673

第一个视图应该有 android:layout_width="wrap_content"

# php - 为什么这个 php 上传脚本不起作用？

> ID：10567739
> 
> 赞同：0
> 
> 时间：2012-05-12T22:06:27.410
> 
> 标签：php, html, file, date, upload

我有一个带有名为 image 的文件输入的 html 表单，它指向一个带有以下代码的 php 文件：

```
$date =  date( "Y_m_d_H_i_s_u" );

function upload() {

$info = pathinfo($_FILES['image']['name']);
$target = "uploads/" . $date . $info['extension'];

if(move_uploaded_file($_FILES['image']['tmp_name'], $target)) {
    return true;
} else{
    return false;
}
} 
```

我希望文件名中有时间而不是原始文件名。我不明白为什么这行不通！所有上传的文件都被命名为扩展名。不知何故，日期不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:09:17.337

你的[范围](http://php.net/manual/en/language.variables.scope.php)是错误的`$date`。您将希望传递`$date`给您的函数或使其成为全局变量

```
$date =  date( "Y_m_d_H_i_s_u" );

function upload($date) {
    $info = pathinfo($_FILES['image']['name']);
    $target = "uploads/" . $date . $info['extension'];

    if(move_uploaded_file($_FILES['image']['tmp_name'], $target)) {
        return true;
    } else{
        return false;
    }
} 
```

# 或者

```
$date =  date( "Y_m_d_H_i_s_u" );

function upload() {
    global $date;
    $info = pathinfo($_FILES['image']['name']);
    $target = "uploads/" . $date . $info['extension'];

    if(move_uploaded_file($_FILES['image']['tmp_name'], $target)) {
        return true;
    } else{
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T22:09:28.993

这是我的观察，你有`scope`问题

```
$date =  date( "Y_m_d_H_i_s_u" ); 
```

试试日期是否总是会改变

```
function upload() {
    $date =  date( "Y_m_d_H_i_s_u" );
    $info = pathinfo ( $_FILES ['image'] ['name'] );
    $target = "uploads/" . $date . $info ['extension'];
    if (move_uploaded_file ( $_FILES ['image'] ['tmp_name'], $target )) {
        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T22:10:59.253

$date 超出了您的功能范围。有两种方法可以解决此问题：

## 选项1

```
$date = date( "Y_m_d_H_i_s_u" );

function upload() {
    globel $date;
    $info = pathinfo($_FILES['image']['name']);
    $target = "uploads/" . $date . $info['extension'];

    if(move_uploaded_file($_FILES['image']['tmp_name'], $target)) {
        return true;
    }
    else{
        return false;
    }
} 
```

## 选项 2

```
$date = date( "Y_m_d_H_i_s_u" );

function upload($date) {
    $info = pathinfo($_FILES['image']['name']);
    $target = "uploads/" . $date . $info['extension'];

    if(move_uploaded_file($_FILES['image']['tmp_name'], $target)) {
        return true;
    }
    else{
        return false;
    }
}

upload ($date); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T22:13:40.827

也可以考虑`move_uploaded_file`直接退货

```
return move_uploaded_file($_FILES['image']['tmp_name'], $target) 
```

# ruby-on-rails - ajaxSetup 不适用于 Rails / jquery-ujs

> ID：10567740
> 
> 赞同：2
> 
> 时间：2012-05-12T22:06:34.070
> 
> 标签：ruby-on-rails, ajax, jquery, ujs

我正在开发一个大量使用 XHR 的项目，并且需要将一些数据附加到每个 ajax 请求中，以便服务器端正确跟踪浏览器中发生的事情。

我有一个名为 xhr_response_handler 的通用类，它用于处理所有 ajax 请求的回调，这些请求添加到发出 ajax 请求的所有表单、链接等。（即“：remote => true”在rails中）

```
$('.xhr_response_handler')
    .on('ajax:success', function(event, data, status, xhr) { xhr_success(data); })
    .on('ajax:failure', function(xhr, status, error) { xhr_fail(error); }); 
```

然后我尝试使用以下命令附加随每个请求发送的默认数据：

```
$.ajaxSetup({
    data: {
        Foo: <%= @Bar %>
    }
}); 
```

这适用于直接使用 jquery 配置 ajax 设置的某些元素，但这不适用于使用 rails 方法（如 link_to 和 form_for 以及 :remote => true）创建的某些元素。

奇怪的是，如果我还添加

```
$('.xhr_response_handler').data( 'params', { Foo2: <%= @Bar2 %> } ); 
```

然后，这适用于使用 link_to 将数据添加到 rails 生成的 ajax 请求。奇怪的是，现在突然之间 ajaxSettings 也可以工作了，并且在 ajax 请求中我将 Foo 和 Foo2 作为参数。但是当我自己使用 ajaxSettings 时，我根本没有得到任何参数。

此外，没有任何要附加的数据被序列化为通过 rails form_for 方法生成的 ajax 请求中发送的表单数据。

任何帮助，将不胜感激。

导轨 3.2.3

红宝石 1.9.3p194

jQuery 1.7.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:41:11.023

我认为出现这种行为是因为数据哈希`$.ajaxSetup`被您稍后执行的 ajax 调用覆盖。数据必须手动合并。

# wordpress - 使用 WP_Query() 查询较新的帖子，在 WHERE 过滤器中使用帖子 ID？

> ID：10567742
> 
> 赞同：3
> 
> 时间：2012-05-12T22:06:55.083
> 
> 标签：wordpress, wordpress-theming

我想知道是否有办法使用 WP_Query（get_posts 等）返回 ID 大于提供的 ID 的帖子。

我已经浏览了 WordPress 法典，并且错过了任何关于查询与帖子 ID 相关的帖子的参考，如果它甚至可以在没有自定义查询的情况下进行的话。

由于无法通过参数传递它，因此我尝试编写一个修改[posts_where](http://codex.wordpress.org/Plugin_API/Filter_Reference/posts_where)过滤器的方法，但这似乎也不起作用..

```
add_filter( 'posts_where', 'filter_since_id');
$loop = new WP_Query( $args );
while ( $loop->have_posts() ) : $loop->the_post();
    // Do Stuff
endwhile;
remove_filter('posts_where' , 'filter_since_id'); 
```

...

```
function filter_since_id($where = ''){
    $where .= " AND ID > 3'";
    return $where;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-13T15:25:31.127

澄清，以便经过的人可以抓住并走：

```
add_filter( 'posts_where', 'filter_since_id');

function filter_since_id($where = ''){
    $where .= " AND ID > 3";
    return $where;
} 
```

# javascript - 对选中的复选框值求和

> ID：10567743
> 
> 赞同：0
> 
> 时间：2012-05-12T22:06:56.690
> 
> 标签：javascript, jquery, playframework

我正在使用 play framework 和 jquery mobile 并尝试对选中复选框的自定义标签值求和，但我无法管理这个。这是一些代码；

```
<form  action="@{Waiter.payAServing()}" method="POST">
<div class="boxes"> 
#{list items:servs, as:'serving'}   
    <fieldset data-role="fieldcontain"> 
        <div class="ui-block-a">
        <input onclick="MySum()" type="checkbox" name="item" id="checkbox-${serving_index}" value="${serving.id}" to="${serving.item.price*serving.amount}" />
        <label for="checkbox-${serving_index}">${serving.item.title} &nbsp; &nbsp; </label>
        </div>

        <div class="ui-block-b"><h2><center>  &nbsp; &nbsp; ${serving.item.price*serving.amount} TL &nbsp;</center></h2></div>          

        <div class="ui-block-c"><h2> ${serving.amount} </h2></div>

</fieldset>     
    #{/list}
</div>
<input type="hidden" name="rid" id="rid" value="${rID}" /><br />

<input type="submit" value="Pay!" />
</form> 

<div class="result"></div>

<script type="text/javascript" charset="${_reponse_encoding}">
function MySum() {

alert(0);

var selectedCustomValue = document.getElementById("checkbox-1").getAttribute("to");

var sum = 0;

alert(selectedCustomValue); 
}

</script> 
```

如何使用 jquery 或纯 javascript 对选中复选框的值求和？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T22:18:52.773

试试这个：jQuery 版本：

```
function MySum(){
    var totalSum = 0;
    $("input:checked[name='item']").each(function(index, el){
        totalSum += parseFloat(el.value);
    });
    return totalSum;
} 
```

还要将点击处理程序绑定到复选框，而是在内联样式上使用它：

```
$(function(){
  $("[name='item']").click(MySum);
}); 
```

要获得 to 属性的总和，请尝试以下操作：

```
function MySum(){
    var totalSum = 0;
    $("input:checked[name='item']").each(function(index, el){
        totalSum += parseFloat($(el).attr("to"));
    });
    return totalSum;
} 
```

更好的方法是在标记中使用 data-* 属性，例如：

```
<input type="checkbox" 
       name="item" 
       id="checkbox-${serving_index}" 
       value="${serving.id}" 
       data-to="${serving.item.price*serving.amount}" /> 
```

MySum 函数将是：

```
function MySum(){
    var totalSum = 0;
    $("input:checked[name='item']").each(function(a, b){
        totalSum += parseFloat($(b).data("to"));
    });
    return totalSum;
} 
```

# scala - 如何检查Map中是否存在键或值？

> ID：10567744
> 
> 赞同：94
> 
> 时间：2012-05-12T22:07:09.463
> 
> 标签：scala, dictionary, collections

我有一个 scala 地图，想测试地图中是否存在某个值。

```
myMap.exists( /*What should go here*/ ) 
```

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2012-05-13T04:39:22.257

有几种不同的选项，具体取决于您的意思。

如果您的意思是“值”*键值对*，那么您可以使用类似

```
myMap.exists(_ == ("fish",3))
myMap.exists(_ == "fish" -> 3) 
```

如果你的意思是*键值对的值*，那么你可以

```
myMap.values.exists(_ == 3)
myMap.exists(_._2 == 3) 
```

如果您只想测试*键值对的键*，那么

```
myMap.keySet.exists(_ == "fish")
myMap.exists(_._1 == "fish")
myMap.contains("fish") 
```

请注意，尽管元组形式（例如`_._1 == "fish"`）最终会更短，但稍长的形式更明确地说明了您想要发生的事情。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-05-14T02:33:18.427

您想知道地图上是否存在*值*或键？如果要检查密钥，请使用`isDefinedAt`：

```
myMap isDefinedAt key 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-12T22:18:15.010

您提供一个地图值将通过的测试，即

```
val mymap = Map(9->"lolo", 7->"lala")
mymap.exists(_._1 == 7) //true
mymap.exists(x => x._1 == 7 && x._2 == "lolo") //false
mymap.exists(x => x._1 == 7 && x._2 == "lala") //true 
```

ScalaDocs 提到方法“测试一个谓词是否适用于这个不可变映射的某些元素。”，关键是它接收一个元组（键，值）而不是两个参数。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-12T22:19:58.613

那这个呢：

```
val map = Map(1 -> 'a', 2 -> 'b', 4 -> 'd')
map.values.toSeq.contains('c')  //false 
```

如果map`true`包含`c`值，则产生。

如果您坚持使用`exists`：

```
map.exists({case(_, value) => value == 'c'}) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-05-17T05:13:00.280

根据上面的答案，请注意 exists() 比 contains() 慢得多（我使用包含 5000 个字符串键的 Map 进行了基准测试，并且比率是一致的 x100）。我对 scala 比较陌生，但我的猜测是 exists() 遍历所有键（或键、值元组），而 contains 使用 Map 的随机访问

# php - Drupal 7 在自定义模块中无法识别 Twilio 客户端

> ID：10567747
> 
> 赞同：1
> 
> 时间：2012-05-12T22:07:32.173
> 
> 标签：php, drupal, foreach, submit, twilio

我有一个 Twilio 帐户，并且正在为我的 Drupal 站点编写一个群发短信模块。在模块的开头，我使用以下代码设置了 Twilio 客户端：

```
$path = drupal_get_path("library", "twilio");
require($path . "twilio/Services/Twilio.php");
$accountSID = "xxxxxxxxxxxxxxxxxxxxxxxxxxxx";
$authToken = "xxxxxxxxxxxxxxxxxxxxxxxxxxxx";
$client = new Services_Twilio($accountSID, $authToken);
$from = "xxxxxxxxxx"; 
```

myModule_submit() 查询数据库中的电话号码，并通过上面引用的 Twilio PHP 库将它们发送出去。我正在使用在 Twilio 网站上找到的类似代码（http://www.twilio.com/docs/howto/sms-notifications-and-alerts）。问题是当我填写要发送的 SMS 消息的表格并按提交时，我收到以下错误消息：

**注意：未定义的变量：myModule_submit() 中的客户端（/var/www/erosas/anysite.com/sites/all/modules/myModule/myModule.module 的第 128 行）。注意：试图在 myModule_submit() 中获取非对象的属性（/var/www/erosas/anysite.com/sites/all/modules/myModule/myModule.module 的第 128 行）。注意：试图在 myModule_submit() 中获取非对象的属性（/var/www/erosas/anysite.com/sites/all/modules/myModule/myModule.module 的第 128 行）。**

提交函数为：

```
function myModule_submit($form, &$form_state){

// Retrieve the values from the fields of the custom form
$values = $form_state['values'];

// Use Database API to retrieve current posts.
$query = db_select('field_data_field_phone_number', 'n');
$query->fields('n', array('field_phone_number_value'));

// Place queried data into an array
$phone_numbers = $query->execute();

$body = $values['sms_message'];

// Iterate over array and send SMS 
foreach($phone_numbers as $number){
    $client->account->sms_messages->create($from, $number, $body); // This is line 128
} 
```

}

任何想法/帮助将不胜感激，我尝试在此站点和 Google 上搜索答案，但没有出现任何特定于 Drupal 的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T02:39:58.973

$client 对象对提交函数不适用。尝试输入相同的代码

```
$path = drupal_get_path("library", "twilio");
require($path . "twilio/Services/Twilio.php");
$accountSID = "xxxxxxxxxxxxxxxxxxxxxxxxxxxx";
$authToken = "xxxxxxxxxxxxxxxxxxxxxxxxxxxx";
$client = new Services_Twilio($accountSID, $authToken);
$from = "xxxxxxxxxx"; 
```

在提交功能的开头。

```
 function pulsesurf_submit($form, &$form_state){
     $path = drupal_get_path("library", "twilio");
     require($path . "twilio/Services/Twilio.php");
     $accountSID = "xxxxxxxxxxxxxxxxxxxxxxxxxxxx";
     $authToken = "xxxxxxxxxxxxxxxxxxxxxxxxxxxx";
     $client = new Services_Twilio($accountSID, $authToken);
     $from = "xxxxxxxxxx";

    // Retrieve the values from the fields of the custom form
    $values = $form_state['values'];

    // Use Database API to retrieve current posts.
    $query = db_select('field_data_field_phone_number', 'n');
    $query->fields('n', array('field_phone_number_value'));

    // Place queried data into an array
    $phone_numbers = $query->execute();

    $body = $values['sms_message'];

    // Iterate over array and send SMS 
    foreach($phone_numbers as $number){
        $client->account->sms_messages->create($from, $number, $body); // This is line 128
    }
... 
```

更好地制作一些不带参数的包含函数，简单地包含库文件并设置令牌/sid以便于使用。

顺便说一句，您网站的域在错误消息中。

# binary-search-tree - 二叉搜索树公式，用于可以存在具有 0 或 1 个子节点的结构不同的树的数量

> ID：10567748
> 
> 赞同：-1
> 
> 时间：2012-05-12T22:07:35.267
> 
> 标签：binary-search-tree

我正在尝试编写一个公式来查找：

“具有 0 或 1 个子节点的节点可以存在的结构不同的二叉树的数量”。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:25:49.537

在我看来，只有 0 或 1 个子节点的“二叉树”是一个链。如果“结构不同”是指对给定的非终端节点是否具有左子节点或右子节点，您的处理方式不同，那么请注意您可以使用 N-1 位长的二进制数来描述该树。因此，给定 N 的不同树的数量将是 2**N-1。

（而且，很明显，如果你的意思是对于给定的 N 可以存在多少种不同的“树”“形状”，答案是 1。）

# javascript - 解析来自的静态文本 标签，然后将文本（数字）添加到新的价格字段

> ID：10567750
> 
> 赞同：-1
> 
> 时间：2012-05-12T22:07:59.017
> 
> 标签：javascript, jquery

我正在尝试从选择框中的输出中获取一些数字，并且每次我 .change() 选择框时对所有选择进行 .each ，并保持我的总金额。

我在我的代码中遗漏了一些东西。

到目前为止，这是我的工作示例。

[http://jsfiddle.net/HdaMQ/](http://jsfiddle.net/HdaMQ/)

它正在部分工作。我不明白如何让两个框都选择值并添加它们。（可能有超过 2 个可供用户使用）

我对使用正则表达式不太精通，所以我对字符串进行切片和切块，直到获得所需的确切值。

这里的最终目标是，如果用户更改他们的选择选项，价格将相应更新并确切知道他们将花费多少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T22:19:33.693

正确输入您的值，然后将您的选项选择功能更改为如下所示：

```
 var sum = 0;
  $("option:selected").each(function(index) {
       //alert($(this).prop("value"));
       sum += parseFloat($(this).prop("value"));
       alert(sum); //this alerts for each iteration, so you'll want to remove it
  }); 
```

# delphi - 使用 ReadProcessMemory 扫描整个进程内存

> ID：10567754
> 
> 赞同：3
> 
> 时间：2012-05-12T22:08:18.677
> 
> 标签：delphi, delphi-2010

我正在尝试扫描整个进程内存但没有成功......我正在做的是：对于我正在使用记事本的测试，所以我在那里写了**%B**，这个值在 HEX 中是：25(%) 和 42 （乙）。所以代码是：

```
 while (VirtualQueryEx(PIDHandle, Pointer(MemStart), MemInfo, SizeOf(MemInfo)) <> 0) do
    begin
      if ((MemInfo.State = MEM_COMMIT) and (not (MemInfo.Protect = PAGE_GUARD)
        or (MemInfo.Protect = PAGE_NOACCESS)) and (MemInfo.Protect = PAGE_READWRITE)) then
          begin
            SetLength(Buff, MemInfo.RegionSize);
              if (ReadProcessMemory(PIDHandle, MemInfo.BaseAddress, Buff,
                                        MemInfo.RegionSize, ReceivedBytes)) then
                begin
                for I := 0 to SizeOf(Buff) do
                 begin
   if (IntToHex(Buff[i], 1) = '25') and (IntToHex(Buff[i+2], 1) = '42') then
                  Form1.Memo1.Lines.Append(IntToHex(Buff[i], 1));
                 end;

                end;
          end;
      MemStart:= MemStart + MemInfo.RegionSize;
    end;
  CloseHandle(PIDHandle);
  end; 
```

var 'Buff' 是 TBytes（我读过 TBytes 并认为它与字节数组相同）。所以我将字节转换为十六进制，并分别搜索值：25 和 42。代码如下：

```
if (IntToHex(Buff[i], 1) = '25') and (IntToHex(Buff[i+2], 1) = '42') then 
```

因为在十六进制值之间有 00。所以我需要添加'+2'。如何扫描整个内存以获取此值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T22:17:18.967

记事本使用 Unicode，因此您需要查找 UTF-16 编码数据，`$0025`并且`$0042`.

我不明白为什么您觉得需要在比较之前转换为十六进制字符串。十六进制没有什么特别需要使用字符串的。十六进制只是一个以 16 为基数的数字系统。因此，十进制 32 与十六进制 20 相同，即`32=$20`. 直接与整数值进行比较：

```
if (Buff[i]=$25) and (Buff[i+2]=$42) then 
```

也就是说，考虑到`$00`您的测试字节数应该是这样的：

```
var
  Target: string;
....
Target := '%B';
if CompareMem(@Buff[i], @Target[1], Length(Target)*SizeOf(Char)) then
  .... 
```

我不想深入了解您的其余代码，但是这一行

```
for I := 0 to SizeOf(Buff) do 
```

在许多不同的层面上都是错误的。

1.  `SizeOf(Buff)`返回指针的大小，因为动态数组变量本质上只是一个指针。要记住的一件有用的事情`SizeOf`是在编译时进行评估。
2.  如果您使用`Length`而不是`SizeOf`then 您将遍历列表的末尾。`0`要遍历动态数组，请从to循环`Length(...)-1`。
3.  但是在这种情况下，您正在循环内访问索引，因此您应该从to`i+2`循环。`0``Length(...)-3`

但实际上您需要与 4 个连续字节进行比较才能找到匹配项。或许是这样的：

```
TargetByteLength = Length(Target)*SizeOf(Char);
for i := 0 to Length(Buff)-TargetByteLength do
  if CompareMem(@Buff[i], @Target[1], TargetByteLength) then
    .... 
```

# css - div背景颜色不起作用

> ID：10567756
> 
> 赞同：0
> 
> 时间：2012-05-12T22:08:23.220
> 
> 标签：css, html

我一直在使用 html 和 css 编写一个网站，最近我开始需要一个带有背景颜色的 div 元素。我输入了`background-color: gray;`，但是没有用。我使用了 Google Chrome 的检查元素功能，它说 Chrome 无法识别该元素。我在 Firefox 中使用了相同的功能，但它也无法识别 css 元素。div 包含三个浮动部分，但它使用`overflow: auto`，所以这不是问题。有人可以向我解释为什么我不能为我的 div 添加背景颜色吗？

html:

```
<div id="main">
        <header>
        <h1>LOGO</h1>
        <nav>
            <a href="index.html" title="Home">Home</a>
            <a href="about.html" title="About">About</a>
            <a href="features.html" title="Features">Features</a>
            <a href="specs.html" title="Specifications">Specs</a>
            <a href="updates.html" title="Updates">Updates</a>
            <a href="contact.html" title="Contact Us">Contact</a>
        </nav>
        </header>

        <section class="left">
        <h2>NEWS</h2>
        <p>Itate eaquid quodit, utem dolorenihit ullore ides est faccum simaiorrum accaerf erfercim voloremod ut volectem con cus, temoluptatur as disquatent.</p>
        </section>

        <section class="right">
        <h2>SOMETHING</h2>
        <p>Itate eaquid quodit, utem dolorenihit ullore ides est faccum simaiorrum accaerf erfercim voloremod ut volectem con cus, temoluptatur as disquatent.</p>
        </section>

        <section class="right">
        <h2>SOMETHING</h2>
        <p>Itate eaquid quodit, utem dolorenihit ullore ides est faccum
simaiorrum accaerf erfercim voloremod ut volectem con cus,
temoluptatur as disquatent.</p>
        </section>
    </div> 
```

CSS：

```
#main {
    backgound: gray;
    layer-background: gray;
    overflow: auto;
    border: 2px dashed black;

    border-radius: 15px;
    -moz-border-radius: 15px;
}

section {
    background-color: green;
    text-align: justify;
    margin: 5px;
    padding 10px;

    border-radius: 10px;
    -moz-border-radius: 10px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T22:15:13.323

在这部分 CSS 中：

```
#main {
    backgound: gray;
    layer-background: gray;

    /* .. */
} 
```

`backgound`应该是`background`，并且`layer-background`不是 CSS 属性。

修复了这些错误，[您所拥有的就可以了](http://jsfiddle.net/thirtydot/U7AKJ/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T11:11:29.903

背景拼写不正确。正确的拼写是**background**并尝试给出一个十六进制代码而不是使用颜色名称。

# mysql - mysql 计数在本地服务器上不起作用

> ID：10567757
> 
> 赞同：0
> 
> 时间：2012-05-12T22:08:47.923
> 
> 标签：mysql, count

我有一个有线问题，我有这个 Mysql 查询：

```
 SELECT app.id AS appid,
     (SELECT count(id) FROM data_names WHERE STATUS=1 AND sid = names.sid) AS count
    FROM `data_names` names, data_applications app
    WHERE app.id = names.appid
    AND season = '12'
    HAVING count =5 
```

该查询在我的远程服务器上运行良好，在我的台式计算机上运行良好，但在我的笔记本电脑本地主机服务器上，它需要无限时间来运行并且永远不会显示结果。

我安装了不同版本的mysql服务器，但同样的问题。我格式化了我的笔记本电脑并在那里安装了新系统和同样的问题。我对 mysql my.ini 进行了许多优化，但都束手无策。

我认为有一个守护进程在搞乱我的笔记本电脑本地服务器。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T22:44:18.053

```
SELECT 
    app.id AS appid,
    count(dn2.id) AS cnt
FROM 
    `data_names` names
        INNER JOIN data_applications app ON app.id = names.appid AND season = '12'
        INNER JOIN `data_names` dn2 ON dn2.sid = names.sid AND dn2.STATUS=1
GROUP BY appid
HAVING cnt=5 
```

我认为您将不得不查看别名，因为您的版本中缺少一些别名，但这就是想法。

问候

# java - 如何将 Alpha、Red、Green、Blue 的 4 个独立 Int 值更改为 TYPE_INT_RGB？

> ID：10567758
> 
> 赞同：2
> 
> 时间：2012-05-12T22:08:48.350
> 
> 标签：java, image, bufferedreader

感谢您的时间 ：）。我已经查看[了 TYPE_INT_RGB 和 TYPE_INT_ARGB 的格式，](https://stackoverflow.com/questions/6001211/format-of-type-int-rgb-and-type-int-argb)现在知道如何将此 TYPE_INT_RGB 转换为 4 个单独的值，但是如果我要对每个值进行修改（比如每个添加 20，所以 Alpha+=20，red+=20 ，等等）我将如何将这些值重新组合成这种 TYPE_INT_RGB 格式？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T22:48:40.950

```
// to extract the components into individual ints.
int argb = something();
int red = 0xFF & ( argb >> 16);
int alpha = 0xFF & (argb >> 24);
int blue = 0xFF & (argb >> 0 );
int green = 0xFF & (argb >> 8 );

// to recreate the argb
int argb = (alpha << 24) | (red << 16 ) | (green<<8) | blue; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T22:20:53.457

我相信这应该有效

```
int RGB = alpha;
RGB = (RGB << 8) + red;
RGB = (RGB << 8) + green;
Rgb = (RGB << 8) + blue; 
```

还有另一种不移位的方法，但我相信你会弄明白的。

这个也可以：

```
int rgba = new java.awt.Color(r,g,b,a).getRGB(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-12T22:47:57.800

我会用[`java.awt.Color`](http://docs.oracle.com/javase/7/docs/api/java/awt/Color.html)这个。

```
int ARGB = new Color(red, green, blue, alpha).getRGB(); 
```

我猜您正在使用按位运算来提取各个颜色通道，但是该`Color`课程再次可以隐藏那些血腥的细节。

```
Color color = new Color(ARGB);
int red = color.getRed();
int green = color.getGreen();
// etc. 
```

# android - Android AlertDialog Title Font 有不同的大小

> ID：10567761
> 
> 赞同：2
> 
> 时间：2012-05-12T22:09:12.483
> 
> 标签：android, fonts, dialog, styles, themes

我有一个奇怪的“问题”。

我有一个创建 AlertDialog 框的静态函数。我将当前上下文作为参数传递。这是一个非常基本的 AlertDialog.Builder，代码不多。

但是从两个不同的活动调用函数会产生不同的结果：

![不同的对话框字体](../Images/01bad270b663efc98c24e0e17487d72c.png)

不同之处似乎在于“A”中的“Title”字体更大，而“B”中的大小相同。但是完全相同的代码会创建两个对话框（表明它是从父 Activity 继承的东西。）我应该从哪里开始寻找？

# visual-studio-2010 - PTVS 未检测到 IronPython 安装

> ID：10567766
> 
> 赞同：2
> 
> 时间：2012-05-12T22:09:28.483
> 
> 标签：visual-studio-2010, visual-studio, ironpython, ptvs

我想在 Visual Studio 2010 中使用 Python Tools for Visual Studio 将解释器更改为 IronPython。上次我对此没有任何问题时，我将 CPython 和 IronPython 列入名单，但现在 IronPython 神奇地消失了。在此之后，我尝试恢复它并执行此操作：

*   我重新安装了 PTVS，这仍然没有帮助
*   我在系统中重新安装了 IronPython，但仍然没有

所以我想添加这个入门手册，但我不知道我应该在那里输入什么。我仍然可以在 IronPython 中创建项目，并且 IntelliSense 正确地建议我组装。

您能否告诉我如何强制 PTVS 重新扫描以查找 IronPython，或者我应该输入什么来手动添加此条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T01:03:53.443

您可能正在运行最新版本的 IronPython 并重新安装了 PTVS。PTVS 当前安装 IronPython 支持的条件是它是否检测到已安装 IronPython。最新版本的 IronPython 发生了一些变化，PTVS 安装程序无法检测到 IronPython 已安装。

好消息是您可以手动选择安装 IronPython 支持。首先卸载，然后启动安装程序，在第一个屏幕上有一个高级按钮。单击它，当功能树出现时，更改要安装的 IronPython 支持。

我们在 1.5 中对此进行了更改，因此我们将始终默认安装 IronPython 支持，因此将来这不会成为问题。

# java - void foo(T y) 和 Java 泛型类中的 void foo(T y)

> ID：10567781
> 
> 赞同：3
> 
> 时间：2012-05-12T22:12:03.293
> 
> 标签：java, generics, object-oriented-analysis

详细解释以下两个版本的 Java 泛型类之间的区别（如果有）？

```
class C<T>{
    T x;
    void foo(T y)  { … }
} 
```

和

```
class C<T>{
    T x;
    <T> void foo(T y)  { … }
} 
```

还有另一个问题：在 foo() 的主体中可以写什么，替换将导致 Java 编译器接受 C 的第一个版本但拒绝 C 的第二个版本的“...”。

我很困惑。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-12T22:13:02.610

```
class C<T>{
    T x;
    <T> void foo(T y)  { … }
} 
```

是一种令人困惑的写作方式

```
class C<T>{
    T x;
    <S> void foo(S y)  { … }
} 
```

至于什么会拒绝第二个版本，例如：

```
class C<T>{
    T x;
    <T> void foo(T y)  { x = y; }
} 
```

将失败，因为如果您将其重写为

```
class C<T>{
    T x;
    <S> void foo(S y)  { x = y; }
} 
```

您可以立即看到您缺少演员表（确切的编译器错误是“不兼容的类型”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T22:20:47.600

在第一个示例中，`T`方法中的类型变量`foo`表示与类定义中声明的类型完全相同`C<T>`。

第二个例子是一个陷阱，因为`T`方法声明中的 是完全不同的类型，与类的类型参数无关，只是碰巧同名`T`。这与局部变量隐藏同名字段的情况类似。

对于这种情况，Eclipse 会发出一个很好的编译器警告（如果在设置中打开了此警告，则不确定它是否默认打开）：

> 类型参数 T 隐藏了类型 T

# ruby-on-rails - Rails 应用程序在日期时间字段中存储不正确的时间

> ID：10567788
> 
> 赞同：1
> 
> 时间：2012-05-12T22:12:53.273
> 
> 标签：ruby-on-rails

每当我创建模型时，都会创建两个日期时间字段（created_at 和 updated_at）。每当我创建对象的新实例时，这两个字段的时间比我当前时间提前 5 小时。我在 config/locales/application.rb 中设置了 config.time_zone = 'Central Time (US & Canada)' 但这没有帮助。

谢谢，迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T22:18:39.807

按照设计，活动记录始终将 UTC 日期存储在数据库中。当向用户显示时，这些将转换为`Time.zone`（默认为）指定的时区。`config.time_zone`同样，如果您在其中一个表单中选择了日期/时间，那么该时间将`Time.zone`在存储到数据库之前转换为 UTC。

假设 DST 在您所在的地方生效，那么您的本地时间提前 5 小时是 UTC。

# php - 无法在 CakePHP 2 中上传文件

> ID：10567789
> 
> 赞同：1
> 
> 时间：2012-05-12T22:12:56.380
> 
> 标签：php, file-upload, cakephp-2.0

我正在尝试在我的 CakePHP 应用程序中加入上传功能。我之前为一个原始的 PHP 项目构建了一个，并决定重用该代码，因为我知道它可以工作。代码如下：

```
 $allowed_filetypes = array('.jpg','.gif','.bmp','.png');
    $max_filesize = 1000000; // Maximum filesize in BYTES
    $upload_path = './files/';

    $filename = $_FILES['userfile']['name'];
    $desiredname = $_POST['desiredname'];
    $ext = substr($filename, strpos($filename,'.'), strlen($filename)-1);

    $savedfile = $desiredname.$ext;

    // Check if the filetype is allowed, if not DIE and inform the user.
    if(!in_array($ext,$allowed_filetypes))
        die('The file you attempted to upload is not allowed.');

    // Now check the filesize, if it is too large then DIE and inform the user.
    if(filesize($_FILES['userfile']['tmp_name']) > $max_filesize)
        die('The file you attempted to upload is too large.');

    // Check if we can upload to the specified path, if not DIE and inform the user.
    if(!is_writable($upload_path))
        die('You cannot upload to the specified directory, please CHMOD it to 777.');

    // Upload the file to your specified path.
    if(move_uploaded_file($_FILES['userfile']['tmp_name'],$upload_path . $savedfile))
        echo 'Your file upload was successful, view the file <a href="' . $upload_path . $savedfile . '" title="Your File">here</a>'; // It worked.
    else
        echo 'There was an error during the file upload.  Please try again.'; // It failed :(. 
```

我已将此代码放入要上传的页面的控制器中。我在 CakePHP 中使用了 FormHelper 来生成表单，如下：

```
 <?php 
        echo $this->Form->create('Customer', array(
            'class' => 'form-horizontal',
            'action' => 'add',
            'enctype' => 'multipart/form-data'
        ));

        echo $this->Form->input('filename', array(
            'type' => 'text',
            'label' => 'Filename',
            'class' => 'span5'
        ));
        echo $this->Form->input('file', array(
            'between' => '<br />',
            'type' => 'file'
        ));
        echo $this->Form->end('Save Changes', array(
            'label' => false,
            'type' => 'submit',
            'class' => 'btn btn-primary'
        ));

        echo $this->Form->end();
     ?> 
```

我已更改对旧代码中字段的任何引用，以反映此项目中使用的表单更改。但是，我在提交表单时收到以下错误：

> 注意（8）：未定义索引：CustomerFile [APP\Controller\CustomersController.php，第 148 行]
> 
> 注意（8）：未定义索引：CustomerFilename [APP\Controller\CustomersController.php，第 149 行]

在控制器的代码中，我（再次）更改了表单字段以使用以下内容：

```
$filename = $this->request->data['CustomerFile']['name'];
$desiredname = $this->request->data['CustomerFilename']; 
```

但错误仍然发生。我猜测表单字段没有被正确引用，但我认为我已经使用`$this->request`代码正确引用了它们，但显然它没有工作。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T23:01:58.960

主要的非蛋糕问题：

1.  滚动您自己的文件名操作操作，而不是使用[`pathinfo()`](http://php.net/pathinfo)
2.  按用户提供的文件名过滤以确定上传资格。永远不要相信用户发送的任何东西。使用服务器端 MIME 类型操作，例如[fileinfo](http://php.net/manual/en/ref.fileinfo.php)
3.  假设上传成功并在检查成功/失败之前对该文件执行服务器端操作。始终首先检查`['error']`代码。代码记录在这里： http: [//php.net/manual/en/features.file-upload.errors.php](http://php.net/manual/en/features.file-upload.errors.php)
4.  使用上传后文件大小限制 - 最好在 php.ini 中设置限制，这将允许服务器在将带宽与稍后将被忽略的字节绑定之前中止上传。您可以使用`['error']`代码来确定上传是否由于违反文件大小限制而中止。
5.  允许用户指定目标文件名，绝对没有安全检查，允许恶意用户在该文件名中指定路径，并允许他们在您服务器上的任何文件上乱涂乱画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T09:25:23.170

> 页面模型：

```
 public function beforeSave() {
    if (!empty($this->data['Page']['image']['name'])) {

        $this->data['Page']['image'] = time() . '-Featured-' . $this->data['Page']['image']['name'];
        $this->data['Page']['alias'] = $this->data['Page']['title'];
        $this->data['Page']['publish'] = date("y.m.d, h:i:s");
        $this->data['Page']['update'] = date("y.m.d, h:i:s");
        $this->data['Page']['posttype'] = 'page';

        return true;
    } else {
        if($this->action == 'edit'){
            $this->data['Page']['image'] = $this->data['Page']['img'];
            $this->data['Page']['alias'] = $this->data['Page']['title'];
            $this->data['Page']['publish'] = date("y.m.d, h:i:s");
            $this->data['Page']['update'] = date("y.m.d, h:i:s");
            $this->data['Page']['posttype'] = 'page';
            return true;
        }
    }

    return true;
}

public function fileExtension ($data) {
    if($this->data['Page']['image']['type'] != 'image/jpeg'){
        $this->invalidate('image','');
        return false;
    }
    return true;
} 
```

> 页面控制器：

```
 public function add() {

    if (!empty($this->request->data)) {
        $menus = $this->Page->save($this->request->data);
        if (!empty($menus)) {
            move_uploaded_file($this->data['Page']['image']['tmp_name'], $_SERVER['DOCUMENT_ROOT'] . '/app/webroot/img/test/' . $this->data['Page']['image']['name']);
            $filename = $_SERVER['DOCUMENT_ROOT'] . '/app/webroot/img/test/' . $this->data['Page']['image']['name'];
            list($width,$height) = getimagesize($filename);
            $percent = 20000/$width;
            $newwidth = $width/100*$percent;
            $newheight = $height/100*$percent;
            $thumb = imagecreatetruecolor($newwidth, $newheight);
            $source = imagecreatefromjpeg($filename);
            imagecopyresampled($thumb, $source, 0, 0, 0, 0, $newwidth, $newheight, $width, $height);
            imagejpeg($thumb, $_SERVER['DOCUMENT_ROOT'] . '/app/webroot/img/test/' .  time() . '-Featured-' . $this->data['Page']['image']['name'],100);
            $this->Session->setFlash('Səhifə əlavə olundu', 'default', array('class' => 'alert alert-success'));
        }
        $this->redirect(array('action'=>'add'));
    }
} 
```

# java - 将此指针传递给构造函数的编译器错误？

> ID：10567791
> 
> 赞同：2
> 
> 时间：2012-05-12T22:13:18.533
> 
> 标签：java, scope, jframe, this, jdialog

```
public class MyWindow extends JFrame {

    JButton botonCreate = new JButton("Open son windows");

    public void doSomething(){
        botonCreate.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                JDialog vce = new JDialog(this);
            }
        });
    }
} 
```

这个想法是在孩子可见时阻止 JFrame 父级（JDialog）。

JDialog的构造函数的参数必须是包含类“MyWindow”但是范围有问题，是ActionListener，这会产生以下错误。

我该如何解决这个问题？

错误信息：

> 没有找到适合 JDialog() 的构造函数 构造函数 JDialog(java.awt.Frame) 不适用（实际参数无法通过方法调用转换转换为 java.awt.Frame） 构造函数 JDialog(java.awt.Dialog) 不适用（实参无法通过方法调用转换为java.awt.Dialog）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T22:15:53.147

你的问题很简单。当您使用时，`this`您实际上是在使用`ActionListener.this`. 因此，要更正此错误，您必须向编译器说明您希望实际使用封闭类`this`，方法是使用`MyWindow.this`.

```
class MyWindow extends JFrame { 

    JButton botonCreate = new JButton("Open son windows"); 

    public void doSomething(){ 
        botonCreate.addActionListener(new ActionListener() { 
            public void actionPerformed(ActionEvent e) { 
                JDialog vce = new JDialog(MyWindow.this); 
            } 
        }); 
    } 
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-12T22:16:59.717

我想你想替换这一行：

```
JDialog vce = new JDialog(this); 
```

对此：

```
JDialog vce = new JDialog(MyWindow.this); 
```

这里的问题是`this`，在您定义的匿名内部类的上下文中，指的是内部类，而不是定义内部类的`MyWindow`对象。更改`this`为`MyWindow.this`告诉 Java 它是`MyWindow`您想要的当前对象，而不是内部类。

希望这可以帮助！

# mpi - 运行 mpi 作业时出错

> ID：10567795
> 
> 赞同：0
> 
> 时间：2012-05-12T22:14:15.870
> 
> 标签：mpi, cluster-computing

我正在尝试在安装了扭矩和 openmpi 1.3.2 的集群上运行 MPI 作业，但我总是收到以下错误：

“mpirun 无法启动指定的应用程序，因为它找不到可执行文件：可执行文件：-p 节点：compute-101-10.local 在尝试启动进程等级 0 时。”

我正在使用以下脚本来执行 qsub：

```
#PBS -N mphello
#PBS -l walltime=0:00:30
#PBS -l nodes=compute-101-10+compute-101-15
cd $PBS_O_WORKDIR
mpirun -npersocket 1 -H compute-101-10,compute-101-15 /home/username/mpi_teste/mphello 
```

知道为什么会这样吗？我想要的是在每个节点（compute-101-10 和 compute-101-15）中运行 1 个进程。我在这里做错了什么？我已经尝试了 mpirun 命令的几种组合，但是程序要么只在一个节点上运行，要么给我上面的错误......

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:04:38.960

`-npersocket`OpenMPI 1.2 中不存在该选项。

OpenMPI 报告的诊断

> mpirun 无法启动指定的应用程序，因为它找不到可执行文件： 可执行文件：-p 正是 OpenMPI 1.2 中的 mpirun 在使用此选项调用时会说的内容。

运行`mpirun --version`将确定计算节点上默认的 OpenMPI 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:03:11.847

问题是 -npersocket 标志仅受 Open MPI 1.3.2 支持，而我运行代码的集群只有不支持该标志的 Open MPI 1.2。

一种可能的解决方法是使用标志 -loadbalance 并使用标志 -H node1,node2,node3,... 指定我希望代码运行的节点，如下所示：

```
mpirun -loadbalance -H node1,node2,...,nodep -np number_of_processes program_name 
```

这样每个节点将运行 number_of_processes/p 个进程，其中 p 是运行进程的节点数。

# java - .: 在类路径中的意义是什么？

> ID：10567797
> 
> 赞同：1
> 
> 时间：2012-05-12T22:14:51.820
> 
> 标签：java, classpath

题主说了算，在设置你的程序要使用的类路径时，`.:`construct的意义何在？

考虑

```
/Library/Java/Home/bin/java -cp $APP_HOME/lib/*.jar::  Handler 
```

对比

```
/Library/Java/Home/bin/java -cp .:$APP_HOME/lib/*.jar::  Handler 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T22:15:49.687

类路径中的路径由`:`. 所以`.`只是类路径列表中的第一个条目，它指的是*当前目录*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T22:30:49.820

对于上面给出的代码特定片段：/Library/Java/Home/bin/java -cp .:$APP_HOME/lib/*.jar：

这意味着在 $APP_HOME 目录中的所有 jars 之前首先查看当前目录（用“.”表示）。

: 是 unix 中的类路径分隔符，而 ; 是 Windows 中的类路径分隔符。

# javascript - 如何将参数传递给队列_然后_传递给setTimeout？...困惑

> ID：10567798
> 
> 赞同：0
> 
> 时间：2012-05-12T22:14:55.570
> 
> 标签：javascript, jquery, reference, parameters, callback

我有两个容器，每个都触发一些函数，它必须传递对象引用。该函数具有嵌套队列和 setTimeout，我需要通过它们传递一个对象引用，以便在正确的对象上执行它。

这是我尝试过的：

```
 var pimg=parent.find('.prod_img'); // This is the object I actually need to pass;

    pimg.children('img:last').queue((function(aaa){
        return function() {
        whatthe= (function (itema) {
                return function() {
                 itema.children('img').each(function(){
                    alert(itema.attr('id'));
                //alert used for debug.
$(this).stop(false,false).animate({opacity:0},400,function(){
                    });
                });
                }
            })(aaa)
        aaa.data('timeout',window.setTimeout("whatthe()",   400));      
        }
    })(pimg)
    ); 
```

现在发生的情况是，如果我在两个对象上快速触发此函数，它会警告相同的 ID，这表明它永远不会传递对象引用。

注意，pimg 是实际对象，它在队列引用中称为 aaa，然后在 setTimeout 引用中称为 itema，但它们都应该指向同一个对象。

任何建议表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T22:18:52.130

你的代码被大脑伤害了，我没有你的 HTML 来实际测试它，但如果我正确理解你的问题，这应该可以工作：

```
var pimg = parent.find('.prod_img'); // This is the object I actually need to pass;

pimg.children('img:last').queue((function(aaa){
    return function() {
        var whatthe = (function (itema) {
            return function() {
                itema.children('img').each(function(){
                    alert(itema.attr('id'));
                    //alert used for debug.
                    $(this).stop(false,false).animate({opacity:0},400, function(){});
                });
            }
        })(aaa)
        aaa.data('timeout',window.setTimeout(whatthe, 400));
    }
})(pimg)); 
```

# css - 左右 div 不能正常工作？

> ID：10567804
> 
> 赞同：0
> 
> 时间：2012-05-12T22:15:57.347
> 
> 标签：css

我试图在页面左侧放置一个 div，在页面右侧放置一个 div。

代码（[此处](http://jsfiddle.net/Abijah/x2r4P/2/)的代码）在 jsFiddle 中运行良好；但是，当我在我的网站上使用相同的代码时，“右”div 不会向右浮动，没有边框，并且它会将自身置于“左”div 之上。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T23:06:19.627

为了正确地跨浏览器显示网页，您有很多问题需要解决，但是要为您手头的问题提供解决方案，您可以查看这个[Fiddle 示例！](http://jsfiddle.net/zuul/x2r4P/4/)

**相关的 CSS**

```
.clearfix:before,
.clearfix:after {
  content: '\0020';
  display: block;
  overflow: hidden;
  visibility: hidden;
  width: 0;
  height: 0;
}
.clearfix:after {
  clear: both;
}
.clearfix {
  zoom: 1;
} 
```

**相关的 HTML**

```
<div class="clearfix">
  <div id="right">Right!</div>
  <div id="left">Left!</div>
</div> 
```

**解释：**

`#left`将and包装`#right`到一个 div 中，该 div 使用该类`clearfix`来清除该特定点的文档流。无论是否对您的网页应用 CSS 重置，这应该允许`#right`and位于其正确位置。`#left`

* * *

**获取 HTML5 的 CSS 重置：http:** [//html5reset.org/](http://html5reset.org/)

**阅读浮动元素：** [CSS Float](http://www.w3schools.com/css/css_float.asp) | [CSS 浮动属性](http://www.w3schools.com/cssref/pr_class_float.asp)

# solr - Solr通配符搜索，只需要突出匹配的部分而不是整个单词

> ID：10567806
> 
> 赞同：2
> 
> 时间：2012-05-12T22:16:19.920
> 
> 标签：solr, wildcard, highlight

我的文字是这样的： 搜索到的单词 WildCard 应部分突出显示

我使用通配符表达式“wild*”进行搜索。

我需要的是让高亮片段成为 [tag]Wild[/tag]Card。我得到的是[tag]WildCard[/tag]，我花了很多时间研究它，但找不到答案。

这种行为可以在linkedin.com 上进行说明，您可以在右上角输入其他人的姓名。

一旦弄清楚这一点，我将有一个后续问题。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:04:45.833

我不确定你是否可以直接在 solr 中实现你想要的。显而易见的解决方案是自己解析返回的文档，搜索 [tag]WildCard[/tag] 并找出需要突出显示的术语的哪一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T22:58:01.107

这在 Solr 中是不可能的。您需要做的是将 Solr 用于突出显示找到的单词的字符更改为您可以轻松删除的内容（可能是 html 注释），然后自己构建一个突出显示。您可能已经将查询存储在变量中，因此只需扫描搜索返回文档并突出显示查询的所有实例。

# django - Django - 通用小部件表的模型设计

> ID：10567809
> 
> 赞同：2
> 
> 时间：2012-05-12T22:16:40.680
> 
> 标签：django, database-design, django-models

我正在尝试为以下场景构建正确的设计

1.  一个`WidgetType`班
2.  一个`Widget`类，来自类型`WidgetType`
3.  每个`Widget`类都有一些设置，由给定的定义`WidgetType`
4.  添加新的`Widget`时，我希望能够只选择允许的`Setting`。

这是我自带的模型：

```
class Widget(models.Model):
    title = models.CharField(max_length=200)
    widgettype = models.ForeignKey('WidgetType')

class WidgetType(models.Model):
     name = models.CharField(max_length=200)

class WidgetSettingOption(models.Model):
    widgettype = models.ForeignKey('WidgetType')
    key = models.CharField(max_length=200)
    description = models.CharField(max_length=2000)

class Setting(models.Model):
    widget = models.ForeignKey('Widget')
    key = models.ForeignKey('WidgetSettingOption')
    value = models.CharField(max_length=200) 
```

虽然这解决了我的问题，但我觉得它不是最佳的。由于我不能仅将设置的键限制为管理表单中允许的一组值，而无需自定义管理表单

建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:31:10.490

您可以使用on to代替 FK from `Setting`to ，并使用[limit_choices_to](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ManyToManyField.limit_choices_to) kwarg 将选择限制为适当的设置。`Widget``ManyToManyField``Widget``Setting`

# iis - IIS UrlRewrite - 仅存在一个实际文件

> ID：10567822
> 
> 赞同：0
> 
> 时间：2012-05-12T22:18:22.647
> 
> 标签：iis, url-rewrite-module

我的 web.config 中有以下 url 重写代码

我想将任何.htm 转发到brand.aspx。

所以如果有人输入

测试1.htm

测试2.htm

测试3.htm

会去brand.aspx。但是，如果服务器中有一个实际的文件调用“test1.htm”，则以下 url 重写将起作用，然后它将重定向到 brand.aspx。如果没有文件存在，它只会返回 404 而不是重定向到 brand.aspx。有人知道为什么吗？多谢。

```
<configuration>
<system.webServer>
<rewrite>
<rules>
<rule name="test" stopProcessing="false">
<match url="(.*)\.htm$" ignoreCase="true" /> 
<action type="Rewrite" url="brand.aspx" />
</rule>
</rules>
</rewrite>
</system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:18:38.090

有一个类似的线程 [Using a custom URL rewriter, IIS6, and urls with .htm, .html, etc](https://stackoverflow.com/questions/403480/using-a-custom-url-rewriter-iis6-and-urls-with-htm-html-etc)

我之前遇到过类似的问题，我制作了一个自定义 IHTTPModule

为此我使用了指南

[http://msdn.microsoft.com/en-us/library/ms227673.aspx](http://msdn.microsoft.com/en-us/library/ms227673.aspx)

# shortcut - 如何在 Mac 的 Coda 上编辑 Zen 编码快捷方式

> ID：10567829
> 
> 赞同：2
> 
> 时间：2012-05-12T22:19:41.907
> 
> 标签：shortcut, coda, emmet

我已经为 coda 安装了 zen coding，即 coda 插件的 TEA。我正在尝试编辑我的快捷方式以扩展缩写，我已经在我的 TextActions.plist 文件中，但是当我编辑快捷方式行时，它不起作用......我不确定我是否拼写它对了，看看：

```
<key>Expand Abbreviation</key>
    <dict>
        <key>action</key>
        <string>TEAZenActions</string>
        <key>options</key>
        <dict>
            <key>action</key>
            <string>expand_abbreviation</string>
        </dict>
        <key>shortcut</key>
        <string>Command+F1</string>
        <key>submenu</key>
        <string>Zen Coding</string>
    </dict> 
```

我正在输入 Command+F1 但它不起作用，我知道更改正在生效，因为默认快捷方式不再起作用。“^e”快捷方式。

我想使用快捷方式“Command+Enter”来扩展我的缩写，有什么想法应该如何输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T07:42:19.943

在 Mac OS 中，进入系统偏好设置 > 键盘 > 键盘快捷键，选择应用程序快捷键，单击 + 按钮添加新快捷键并按照说明进行操作。

# php - 从数据库加载时出现评估错误

> ID：10567830
> 
> 赞同：-1
> 
> 时间：2012-05-12T22:19:45.723
> 
> 标签：php, mysql, eval

这是我的代码；

```
$script = $row['script']; 

   // $row is from database and the $row['script'] is exeactly the same with $script commented below.
  // $script ="global \$timedate;\$target =\$timedate->now();return \$target;";

return eval($script); 
```

当我取消注释 $script 时，它将正确运行。但是，如果我评论 $script 并从 $row['script'] 加载值，则 eval 会出现以下错误：

```
 [12-May-2012 22:09:25 UTC] PHP Parse error:  syntax error, unexpected $end in C:\Users\iopen\Documents\IOPEN\Project\Clients\sugarcrm\hfcrmlocal\custom\modules\iopenwf\model\IOpenAction.php(56) : eval()'d code on line 3 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:33:58.200

不要使用`eval`它是一个非常糟糕的主意。

出于实验目的，您可以使用它`stripslashes`来消除大多数斜线问题

```
class Test {
    function now() {
        return time ();
    }
}

$timedate = new Test ();
$script = "global \$timedate;\$target =\$timedate->now();return \$target;";
$script = stripslashes ( $script );
var_dump ( eval ( $script ) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T22:42:48.390

尝试为您的脚本创建一个函数，这将使以后更容易编辑，并且您将有一个更好的概览。如您所见，我删除了 eval(); 功能。现在它完成了这项工作。我不确定你为什么需要 eval() 但是使用下面的脚本，没有 eval(); 需要。

```
<?php
   function getScript() {
      $script = 1;  
      // $row is from database and the $row['script'] is exeactly the same with $script commented below.
      // $script ="global \$timedate;\$target =\$timedate->now();return \$target;";
      return $script;
      }
   $scriptNo = getScript();
   echo $scriptNo;
?> 
```

# c++ - C++：函数模板问题

> ID：10567839
> 
> 赞同：2
> 
> 时间：2012-05-12T22:21:26.263
> 
> 标签：c++, function-templates

我在修改 c++ 函数时遇到问题，以便它适用于任何数据类型。任何和所有的帮助将不胜感激。下面是我的代码，我一直遇到一个错误。

```
// This program demonstrates the QuickSort Algorithm.
#include <iostream>
#include <algorithm>
using namespace std;

//************************************************
// quickSort uses the quicksort algorithm to     *
// sort set, from set[start] through set[end].   *
//************************************************

template <class T>
void quickSort(T set[], int start, int end)
{
   T pivotPoint;

   if (start < end)
   {
      // Get the pivot point.
      pivotPoint = partition(set, start, end);
      // Sort the first sub list.
      quickSort(set, start, pivotPoint - 1);
      // Sort the second sub list.
      quickSort(set, pivotPoint + 1, end);
   }
}

//**********************************************************
// partition selects the value in the middle of the        *
// array set as the pivot. The list is rearranged so       *
// all the values less than the pivot are on its left      *
// and all the values greater than pivot are on its right. *
//**********************************************************

template <class T1>
int partition(T1 set[], int start, int end)
{
   int pivotValue, pivotIndex, mid;

   mid = (start + end) / 2;
   swap(set[start], set[mid]);
   pivotIndex = start;
   pivotValue = set[start];
   for (int scan = start + 1; scan <= end; scan++)
   {
      if (set[scan] < pivotValue)
      {
         pivotIndex++;
         swap(set[pivotIndex], set[scan]);
      }
   }
   swap(set[start], set[pivotIndex]);
   return pivotIndex;
}

//**********************************************
// swap simply exchanges the contents of       *
// value1 and value2\.                          *
//**********************************************

template <class T>
void swap(T &value1, T &value2)
{
   int temp = value1;

   value1 = value2;
   value2 = temp;
}

int main()
{
   const int SIZE = 10;  // Array size
   int count;            // Loop counter

   // need to override the [] function?
   int array[SIZE] = {7, 3, 9, 2, 0, 1, 8, 4, 6, 5};

   // Display the array contents.
   for (count = 0; count < SIZE; count++)
      cout << array[count] << " ";
   cout << endl;

   // Sort the array.
   quickSort(array, 0, SIZE - 1);

   // Display the array contents.
   for (count = 0; count < SIZE; count++)
      cout << array[count] << " ";
   cout << endl;
   return 0;
} 
```

`pivotPoint = partition(set, start, end);`对于函数内读取的行`quicksort()`，我收到此错误：

```
main.cpp:24: error: no matching function for call to 'partition(int*&, int&, int&)' 
```

如果有人可以让我知道它的含义以及如何适应它，我将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T22:27:35.600

该`partition`函数需要在使用前声明。

将`partition`定义移到定义之前`quicksort`或在该位置添加声明：

```
template <class T1>
int partition(T1 set[], int start, int end); 
```

# wordpress - Wordpress：nav_menu 未出现在主页中

> ID：10567842
> 
> 赞同：0
> 
> 时间：2012-05-12T22:21:55.830
> 
> 标签：wordpress

创建新的自定义帖子类型后，我的主页中没有出现 nav_menu 的一个小问题。

这是我把它放在我的functions.php中的代码

```
add_action('init', 'create_companies_type');
    function create_companies_type(){
    register_post_type('information', array(
     'label' => __('Nos informations'),
     'singular_label' => __('information'),
     'public' => true,
     'show_ui' => true,
     'capability_type' => 'post',
     'hierarchical' => false,
     'supports' => array('title', 'author', 'thumbnail','editor','custom-fields'),
    ));
}

add_filter( 'pre_get_posts', 'my_get_posts' );

  function my_get_posts( $query ) {
  if ( is_home())
  $query->set( 'post_type', array( 'information','post') );

  return $query;
} 
```

如果您能帮助我，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T16:50:36.327

如果您正在谈论显示在自定义菜单区域中的帖子类型，那么它就在那里。我只是在猜测你的意思。

# xcode - Xcode 项目#include

> ID：10567843
> 
> 赞同：1
> 
> 时间：2012-05-12T22:21:58.790
> 
> 标签：xcode, include, objective-c++

我正在尝试使用已经在另一个独立项目中没有问题的代码。

当我将此代码带入我的另一个最终项目时，它表明找不到“cmath”文件。

带有#include 的文件位于 .hpp 文件中（它只是为 opengl 定义了一些结构），因此没有相应的 .mm 文件。（这是 C++ 代码，我主要是一个 Objective-C 用户，所以不确定所有 C++ 的东西）但这是用于 opengl 的东西，并且工作正常，我们不在这个项目中。

我已经尝试了一切来完成这项工作。

有问题的最终项目有其他代码使用#include 没有问题。几乎就像是某些东西导致 xcode 不再识别标头的路径。我检查了它的文件类型，它是“默认 C++ 标头”

在最终项目中，我使用 Zxing 并使用 CorePlots。不确定它们是否引起任何问题。还有一些文件正在使用#include，不确定这是否会与#incude 冲突。（但同样 #include 的其他文件工作正常。

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T22:40:45.227

除了 Jon Reid 的好建议，您还可以在 Build Settings 中选择“Compile as Objective-C++”。（在“构建设置”窗口中搜索“编译源代码”。）这有点狂野，但可以快速查看问题是否实际上是您的 C++ 源代码编译为 C 或 Objective-C

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T22:36:19.740

您的头文件本身并不存在；有些东西必须导入它。重命名导入文件，将其文件类型从 .m 更改为 .mm。

例如，假设包含 <cmath> 的标头名为 foo.h。而这又被一个`bar`由 bar.h 和 bar.m 组成的模块使用。所以 foo.h 被导入到 bar.h 或 bar.m 中。

将 bar.m 重命名为 bar.mm，以便它使用 C++。对所有依赖 foo.h 的 .m 文件执行相同的操作。

# asp.net - asp.net 生产/开发环境

> ID：10567844
> 
> 赞同：2
> 
> 时间：2012-05-12T22:22:05.283
> 
> 标签：asp.net, development-environment, production-environment

我以前的大多数 Web 应用程序都是使用金字塔 (python) 框架构建的。使用金字塔，可以在开发或生产模式下运行应用程序。这是通过提供 production.ini 或 development.ini 设置文件的位置作为应用程序的启动参数之一来实现的。

此文件包含与日志记录级别、错误报告和数据库连接相关的设置。这些文件在 .net 世界中的等效文件似乎是 web.config 文件。我假设我可以创建不同的执行环境，只需创建一个新的 web.config，将其重命名为适当的名称，然后重新启动应用程序。

我的问题是，我怎样才能让我的应用程序以正确的 *.config 文件为目标（假设将它们称为 production.config 和 development.config）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T23:30:11.383

您可能想查看[MSDeploy](http://www.iis.net/download/webdeploy)。我将它用于类似的情况，它帮助我建立了一个参数文件（要替换的内容，无论它是 XML、文件路径、文本文件等）和多个设置参数文件 [您可以阅读有关 declareParam 和[在这里](http://technet.microsoft.com/en-us/library/dd569084%28v=ws.10%29.aspx)设置参数。

在不了解太多结构的情况下，您基本上会为此做一些事情。

```
msdeploy -verb:sync -source:contentPath=c:\pathtosite\root -dest:package=c:\package.zip -declareParamFile=c:\packageparameters.xml" 
```

为每个环境创建一个关联的参数文件，例如

```
development.xml
staging.xml
production.xml 
```

（[这里](http://twenty6-jc.blogspot.com/2010/09/msdeploy-and-declare-and-set-parameter.html)是参数文件设置的一个很好的解释）

那么对于您的部署，您将拥有一些东西（取决于您要使用的提供者）

```
msdeploy -verb:sync -source:package=c:\package.zip -dest:contentPath=c:\inetpub\production -setParamFile=c:\<environment>.xml 
```

提供者的数量非常广泛。内容路径只是一个简单的示例，但您可以直接从 IIS 拉取到 IIS 等。非常健壮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T22:52:39.200

据我所知，没有办法指定不同的 web.config 文件。但是，从 .NET 4.0 开始，您可以使用称为 web.config 转换的东西，它会在构建时修改您的基础 web.config。您可以拥有 Web.Debug.Config 和 Web.Release.Config，它们的应用取决于您使用的构建配置。请记住，这些不是普通的 web.config 文件，而是修改基本 web.config 的 **转换文件。**

有关更多信息和所涉及的基本思想的演练，请参阅[MSDN 上的此处](http://msdn.microsoft.com/en-us/library/dd465318.aspx)。给出的 web.config 转换文件的基本示例如下，它修改连接字符串以使用不同的连接字符串进行发布构建：

```
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
    <connectionStrings>
        <add name="MyDB" connectionString="ReleaseSQLServer" 
            xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>
    </connectionStrings>
</configuration> 
```

# python - 如何在 Django 中使用内置的“密码重置”视图？

> ID：10567845
> 
> 赞同：7
> 
> 时间：2012-05-12T22:22:10.147
> 
> 标签：python, django, django-1.4

我在 urls.py 中设置了以下条目

```
(r'^password_reset/$', 'django.contrib.auth.views.password_reset'), 
```

但是一旦我去`http://127.0.0.1:8000/password_reset/`我就会收到错误消息：

```
NoReverseMatch at /password_reset/
Reverse for 'django.contrib.auth.views.password_reset_done' with arguments '()' and keyword arguments '{}' not found. 
```

我期待 password_reset_done 视图也能开箱即用。那么在这个阶段我应该怎么做呢？

**更新**

在尝试了 Blair 的解决方案后，我又更近了一步。

```
(r'^password_reset_done/$', 'django.contrib.auth.views.password_reset_done'), 
```

根据“Django 1.0 网站开发”一书，这些内置视图应该开箱即用，无需进一步麻烦。但也许自 Django 1.0 以来它已经改变了......如果有人能阐明这一点，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:53:43.363

我终于找到了解决方案。我认为 MVC 和 MTV 模式之间总是存在细微的误解。在 MTV (Django) 中，视图代表控制器，模板代表视图。

因此，虽然更改密码“视图”确实是内置的开箱即用，但实际模板（外观和感觉）仍然需要由用户生成，而底层表单（小部件）由Django 自动。看代码就更清楚了。

因此将这两行添加到**url.py**

```
(r'^change-password/$', 'django.contrib.auth.views.password_change'), 
(r'^password-changed/$', 'django.contrib.auth.views.password_change_done'), 
```

然后在 myproject/templates/registration 下添加这两个文件

**password_change_done.html**

```
{% extends "base.html" %}
{% block title %}Password Change Successful{% endblock %}
{% block head %}Password Change Completed Successfully{% endblock %}
{% block content %}
    Your password has been changed successfully. Please re-login with your new credentials 
    <a href="/login/">login</a> or go back to the
    <a href="/">main page</a>.
{% endblock %} 
```

**password_change_form.html**

```
{% extends "base.html" %}
{% block title %}Change Registration{% endblock %}
{% block head %}Change Registration{% endblock %}
{% block content %}
    <form method="post" action=".">
        {{form.as_p}}
        <input type="submit" value="Change" />
        {% csrf_token %}
    </form>
{% endblock %} 
```

![在此处输入图像描述](../Images/4225b8c207f5bcc6d5afc4cff49c82d1.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T22:32:05.263

一旦用户完成 password_reset 页面上的表单，Django 需要知道将用户重定向到哪个 URL。因此，在您的 URL 配置中添加另一行：

```
(r'^password_reset_done/$', 'django.contrib.auth.views.password_reset_done'), 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-29T15:29:46.963

从 django 1.11 开始，`password_change`视图已被弃用。

> 1.11 版后已弃用：基于 password_change 函数的视图应替换为基于类的 PasswordChangeView。

对我有用的是：

在**urls.py**

```
from django.contrib.auth import views as auth_views
...
url('^account/change-password/$',
    auth_views.PasswordChangeView.as_view(
        template_name='registration/passwd_change_form.html'),
    name='password_change'),
url(r'^account/password-change-done/$',
    auth_views.PasswordChangeDoneView.as_view(
        template_name='registration/passwd_change_done.html'),
    name='password_change_done'), 
```

**然后在注册**下添加一对模板**passwd_change_form.html**和**passwd_change_done.html**。

 ****请注意，我没有使用默认名称，**出于某种原因，当我这样做时，它默认为 django 管理视图。**

# javascript - window.name 作为数据传输：一种有效的方法？

> ID：10567847
> 
> 赞同：49
> 
> 时间：2012-05-12T22:22:35.827
> 
> 标签：javascript, same-origin-policy

**概述和原始问题**

[window.name](https://developer.mozilla.org/en/DOM/window.name)是一个有趣的野兽。MDN 的描述暗示了最初的意图：

> 窗口的名称主要用于设置超链接和表单的目标。Windows 不需要有名称。

所以，这意味着我们可以在这个窗口中打开控制台，然后写：

```
var win = window.open('http://google.com', 'el goog'); 
```

...然后让它通过弹出窗口阻止程序，它应该在名为“el goog”的窗口中打开 google.com。由于同源策略，我无法访问 的`name`属性，但如果我在新窗口中打开控制台并键入，我会得到.`win``name``"el goog"`

如果我将窗口发送回我打开它的域（在本例中为 stackoverflow.com），我可以获得该`name`属性，并且它没有改变。

```
win.location.replace(location.href);
win.name; // "el goog" 
```

`name`这意味着我们可以通过设置窗口的属性来拥有一种跨域会话存储。

如果 google.com在窗口被发送回原始域之前*更改*了值`window.name`，我们将看到新值而不是“el goog”。这可以用作跨域数据传输，类似于 JSONP 或 CORS 的实用程序。

我做了一些搜索以试图找到更多信息，显然道场[认为它](https://www.sitepen.com/blog/windowname-transport)作为一种交通工具是合法的。不过，不知何故，这并不能完全让我放心。所以我的问题是，是否有任何信誉良好的网站`window.name`用作数据传输？我认为这很容易被发现，因为他们的文档会说“*在 JSONP 的查询字符串中添加 'callback'，或者为 window.name 添加 'whatever'* ”，但我从未见过这样的事情。真的有人在野外发现过这个吗？

* * *

**替代问题**

可能没有人真正使用这种技术。如果这是真的，那么（正如 Rob W 指出的那样）上面的问题是无法回答的。所以，我的另一个问题是，这种方法有什么问题？这可能有助于解释为什么它没有真正被采用。

正如我所看到的，这种方法比 JSONP 至少有两个好处。

*   使用 JSONP，您可以信任来自外国的脚本在您的域上运行。使用`window.name`，恶意站点包含的任何脚本都将在其自己的域上运行。

*   使用 JSONP，无法传递大数据（对于 URL 来说太大的数据），也无法进行 HTTP POST。有了`window.name`，我们可以发布任意大小的任意数据。

有什么缺点？

* * *

**示例实现**

这是一个非常简单的客户端实现示例。这不处理 POST 请求，只处理 GET。

```
function fetchData(url, callback) {
    var frame = document.createElement('iframe');
    frame.onload = function() {
        frame.onload = function() {
            callback(frame.contentWindow.name);
            frame.parentNode.removeChild(frame);
        }
        frame.src = 'about:blank';
    }
    frame.src = url;
    document.body.appendChild(frame);
}

// using it

fetchData('http://somehost.com/api?foo=bar', function(response) {

    console.log(response);

});​ 
```

我已经设置了一个小提琴来测试[它](http://jsfiddle.net/n9Wnx/)。它使用[这个脚本](http://jsbin.com/ayehuv/2/edit)作为测试服务器。

这是一个稍长的示例，可以发出 POST 请求：http: [//jsfiddle.net/n9Wnx/2/](http://jsfiddle.net/n9Wnx/2/)

* * *

**概括**

据我所知，`window.name`还没有流行起来作为数据传输。我想知道我的看法是否准确（因此是原始问题），如果是，我想知道*为什么*会这样。我列出了一些`window.name`似乎优于 JSONP 的优点。任何人都可以找出一些可能导致阻止采用这种技术的*缺点吗？*

更重要的是，谁能给我一个充分的理由为什么我不应该将`winow.name`其用作数据传输？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T22:58:01.567

`window.name`作为一种传输方式并不是特别好，因为（AFAIK）它在更改时不会触发任何事件。结果，试图`window.name`用作双向通信通道的应用程序将不得不轮询它以获取更新。

至于实际使用它的网站：我从来没有听说过。可能有一些，但我只听说过纯理论意义上的这种技术。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-09-12T13:54:06.580

> 更重要的是，谁能给我一个充分的理由为什么我不应该使用 winow.name 作为数据传输？

虽然`window.name`在跨域更改传输数据时可以成为真正的救星，但它不能用作真正的通用数据传输机制的原因是由于缺少存储和检索数据的 api。例如`localStorage`提供`setItem`, `getItem`。这样的 api 对于从值的实际存储方式中抽象出来并防止格式冲突（如果在您身边运行的不同库以不同格式存储时会出现这种情况）是必要的。

> 据我所知，window.name 并没有作为一种数据传输方式流行起来。我想知道我的看法是否准确（因此是原始问题），如果是，我想知道为什么会这样。

由于`window.name`不提供这样的存储/检索抽象层——如我上面所述——第三方库无法知道在存储数据时使用哪种格式，`window.main`因此永远不会使用`window.main`，因为它不可靠。如果您（即您的主程序）是唯一读取或写入`window.name`您的人，则可以决定以 json 格式存储数据并相应地存储/检索。但是，如果第 3 方库也想存储/检索某些东西，它决定不使用 json 而是使用另一种[众多的序列化格式](https://en.wikipedia.org/wiki/Comparison_of_data_serialization_formats)……这会意外地破坏您的 json 格式并肯定会造成麻烦。

# java - Java中最接近NSScanner的东西

> ID：10567856
> 
> 赞同：1
> 
> 时间：2012-05-12T22:24:03.537
> 
> 标签：java, string, string-parsing, nsscanner

我正在将一些代码从objective-c移到java。该项目是一个 XML/HTML 解析器。在目标 c 中，我几乎只使用 scanUpToString("mystring"); 方法。

我查看了 Java Scanner 类，但它将所有内容都分解为标记。我不想要那个。我只想能够扫描最多出现的子字符串并跟踪扫描仪在整个字符串中的当前位置。

任何帮助都会非常感谢！

*编辑*

更具体。我不希望 Scanner 进行标记。

```
String test = "<title balh> blah <title> blah>";
    Scanner feedScanner = new Scanner(test);
    String title = "<title";
    String a = feedScanner.next(title);
    String b = feedScanner.next(title); 
```

在上面的代码中，我想要 feedScanner.next(title); 扫描到下一次出现的末尾`"<title"`

实际发生的是第一次调用 feeScanner.next 时它起作用，因为默认分隔符是空格，但是，第二次调用它失败（出于我的目的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:59:32.160

您可以使用 String 类 (Java.lang.String) 来实现这一点。

1.  首先获取子字符串的第一个索引。

    int first_occurence= string.indexOf(substring);

2.  然后遍历整个字符串并获取子字符串的下一个值

    int next_index=indexOf(str,fromIndex);

3.  如果要保存这些值，请将它们添加到包装类并添加到 arraylist 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T22:55:53.253

也许 String.split 适合你？

```
s = "The almighty String is mystring is your String is our mystring-object - isn't it?";
parts = s.split ("mystring"); 
```

结果：

```
Array("The almighty String is ", " is your String is our ", -object - isn't it?) 
```

你知道在你的“mystring”之间一定是。我不确定开始和结束，所以也许你需要一些`s.startsWith ("mystring") / s.endsWith`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T23:23:41.283

直接使用`String`'s 方法确实更容易：

```
String test = "<title balh> blah <title> blah>";
String target = "<title";
int index = 0;
index = test.indexOf( target, index ) + target.length();
// Index is now 6 (the space b/w "<title" and "blah"
index = test.indexOf( target, index ) + target.length();
// Index is now at the ">" in "<title> blah" 
```

根据除了遍历字符串之外您想要实际执行的操作，不同的方法可能更好/更差。例如，如果您想获取's`blah> blah`之间的字符串，a*很*方便：`<title``Scanner`

 *```
String test = "<title balh> blah <title> blah>";
Scanner scan = new Scanner(test);
scan.useDelimiter("<title");
String stuff = scan.next(); // gets " blah> blah "; 
```*

# javascript - 悬停时旋转箭头以一定程度降落并加载图像

> ID：10567857
> 
> 赞同：1
> 
> 时间：2012-05-12T22:24:24.083
> 
> 标签：javascript, drag-and-drop

我正在寻找一个人来帮助指导我为我正在尝试创建的功能朝着正确的方向前进。

我需要创建一个箭头，当树在一定程度生长时，我为树创建了 7 个不同的高度和 7 个不同的图像，以保持外观整洁。

基本上你知道如何拥有一张图片并使用它旋转它

```
<script type="text/javascript">
var img = $('.image');
if(img.length > 0){
var offset = img.offset();
function mouse(evt){
    var center_x = (offset.left) + (img.width()/2);
    var center_y = (offset.top) + (img.height()/2);
    var mouse_x = evt.pageX; var mouse_y = evt.pageY;
    var radians = Math.atan2(mouse_x - center_x, mouse_y - center_y);
    var degree = (radians * (180 / Math.PI) * -1) + 90; 
    img.css('-moz-transform', 'rotate('+degree+'deg)');
    img.css('-webkit-transform', 'rotate('+degree+'deg)');
    img.css('-o-transform', 'rotate('+degree+'deg)');
    img.css('-ms-transform', 'rotate('+degree+'deg)');
}
$(document).mousemove(mouse);
}
</script> 
```

但是我如何让我的箭头停在 20 度、25 度、30 度等处。同时加载我分配给那个特定度的新图像（无论箭头的尖端指向什么）所有通过悬停来执行此操作。

并且不仅停止并加载新图像，而且一旦用户单击提交，它就会将数据添加到我的数据库中的树表中。所以基本上，它是一个箭头，箭头的尖端设置在一定程度，加载新图像，获取图像的高度（我需要某种方式将高度变量分配给我猜测的每个单独的图像？）然后查询将其放入树高度字段下的树表中。

任何帮助，让我开始的链接将不胜感激。

另外，有没有办法用 Canvas 或 SVG 做到这一点？而不是使用箭头图像作为我的箭头？为了更干净的外观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T00:40:50.253

下面是一个示例，说明如何使用`canvas`. [http://jsbin.com/inufoy/edit](http://jsbin.com/inufoy/edit)

将箭头的旋转锁定到某些点就像过滤绘图函数上的参数一样简单。例如：

```
var segs = 7;
var coefficient = Math.PI / segs;
r -= ((r + coefficient) % (coefficient * 2)) - coefficient; 
```

从那里您所要做的就是为每个图像分配一个旋转，并检查箭头何时指向树，然后加载树的图像。

**编辑：** 这是该脚本的另一个版本，带有静态箭头基，例如您的描述：http: [//jsbin.com/inufoy/5/edit](http://jsbin.com/inufoy/5/edit)

# c# - CouchDB .net 库的比较

> ID：10567862
> 
> 赞同：4
> 
> 时间：2012-05-12T22:25:51.137
> 
> 标签：c#, .net, nosql, couchdb

这里已经有几个讨论，但它们较旧且不详尽。

我正在寻找 CouchDB c# 库的比较。[具体来说，是对CouchDB 网站](http://wiki.apache.org/couchdb/Getting_started_with_C%23)上列出的内容的反馈。

1.  [双人沙发](http://github.com/soitgoes/LoveSeat)
2.  [放松](http://github.com/arobson/Relax)
3.  [迪万](http://github.com/foretagsplatsen/Divan)
4.  [夏普沙发](http://code.google.com/p/couchbrowse)
5.  [梦幻座椅](http://github.com/vdaron/DreamSeat)

对这些（或其他）的任何反馈 - 真实世界的经验都会很棒。

# php - PHP 输出到滚动选框

> ID：10567863
> 
> 赞同：0
> 
> 时间：2012-05-12T22:26:09.303
> 
> 标签：php, javascript, jquery, ajax

PHP 脚本生成动态输出，并将页面上的结果打印到 div 中，这里是示例（php 页面）：

```
<head>
  <title></title>
<script>
setInterval(function() {
    $('#reload').load('track.php');
}, 10000);
</script>

</head>

<body>
<div id="reload"></div>
</body>

</html> 
```

我想在滚动选取框中显示输出文本，并应用一些样式。我知道 marquee 标记已被弃用，但这可以使用一些 javascript 滚动条来完成。我搜索了 php 和 javascript 的组合，但没有找到任何可靠的东西。有人可以展示解决此任务的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:32:12.050

请检查具有很多功能的 jQuery 插件：

[http://jscroller2.markusbordihn.de/example/image-scroller-windiv/](http://jscroller2.markusbordihn.de/example/image-scroller-windiv/)

而这一款“丝般顺滑”

[http://remysharp.com/2008/09/10/the-silky-smooth-marquee](http://remysharp.com/2008/09/10/the-silky-smooth-marquee)

尝试：

```
setInterval(function() { $('#reload').html(function() {$.get("http://espring.3eeweb.com/track.php", function(data){ return data; })}) }, 10000);​ 
```

# c++ - glOrtho 不工作

> ID：10567864
> 
> 赞同：0
> 
> 时间：2012-05-12T22:26:09.693
> 
> 标签：c++, opengl, perspectives

我在使用 GLM 库的 GLMDraw() 函数绘制 Google SketchUp 3D 图像的程序中使用 glOrtho 时遇到问题。我想在投影模式下仅查看 z 的某些值的图像，而 glOrtho() 似乎不起作用，所以我编写了以下代码来测试它：

```
glOrtho(0.0f, 2.0f, 0.0f, 2.0f, 0.0f, 0.0f); 
```

由于近平面和远平面是相同的，我认为我不应该看到任何图像，但我看到了整个图像。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T22:57:04.767

如果您使用 znear=zfar 调用 glOrtho，它会生成 GL_INVALID_VALUE 错误，并且可能只是丢弃调用。

[http://www.opengl.org/sdk/docs/man/xhtml/glOrtho.xml](http://www.opengl.org/sdk/docs/man/xhtml/glOrtho.xml)

尝试给它一个大于零的范围。

# ruby-on-rails - Rails 路由 - url 帮助程序导致“未定义的方法”

> ID：10567866
> 
> 赞同：1
> 
> 时间：2012-05-12T22:26:37.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3

路线.rb

```
 match 'mybookings/:token' => 'mybookings#test', :as => 'bookit'
  resources :mybookings 
```

rails路线显示：

```
bookit /app/mybookings/:token(.:format) mybookings#test 
```

然后我使用一个助手：

```
=link_to "by clicking here", bookit_url(@client.token) 
```

这导致

```
ActionView::Template::Error
Error
undefined method `bookit_url' for #<#<Class:0x007fd2c1ca3488>:0x007fd2c1f96960> 
```

那个帮手怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T23:13:17.223

你的代码在 Rails 3.2 中对我来说很好用

这是关键代码：

```
# in routes.rb
match 'mybookings/:token' => 'mybookings#test', :as => 'bookit'

# in controller:
class MybookingsController
  def test
    render :text => 'this is bookit action'
  end
end

# in your erb or haml file:
link_to "by clicking here", bookit_url('this is the token string') 
```

# java - GSON-JSON 反序列化类中的对象

> ID：10567867
> 
> 赞同：1
> 
> 时间：2012-05-12T22:27:26.700
> 
> 标签：java, json, gson

我对 GSON-JSON 有一点问题。

让我们看看下面的代码：

```
 public static class ProtoQuery {
    public String action;
    public String token;
    public Object params;

    public ProtoQuery(String action, String token, Object params) {
        this.action = action;
        this.token = token;
        this.params = params;
    }
}

// Authentication Phase
public static class ProtoAuth {
    public String username;
    public String password;

    public ProtoAuth(String username, String password) {
        this.username = username;
        this.password = password;
    }
}

    // Serialize Object
    Gson gson = new Gson();
    ProtoQuery tmp = new ProtoQuery("ProtoAuth", "", new JirckeProtocol.ProtoAuth("ABC", "myPASS"));
    String json = gson.toJson(tmp);

    // Deserialize Object
    ProtoQuery deserializedOBJ = gson.fromJson(json, ProtoQuery.class); 
```

这里的问题：deserializedOBJ.object 返回一个LinkedHashMap。我想转换回 ProtoAuth 对象。我怎么知道这是一个 ProtoAuth？在 ProtoQuery 中使用“action”参数。

我需要类似 deserializedOBJ.params = gson.fromJSON(json.object, ProtoAuth.class)

最好的方法是什么？有一种替代方法可以做到这一点，而无需编写我自己的序列化器/反序列化器？

实际上我使用该代码：

```
deserializedOBJ.params = gson.fromJson(element, Class.forName("MyProtocol$ProtoAuth")); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T22:53:10.923

我将键入 ProtoQuery 如下：

```
public static class ProtoQuery<T> {
    public String action;
    public String token;
    public T params;

    public ProtoQuery(String action, String token, T params) {
        this.action = action;
        this.token = token;
        this.params = params;
    }
}

// Authentication Phase
public static class ProtoAuth {
    public String username;
    public String password;

    public ProtoAuth(String username, String password) {
        this.username = username;
        this.password = password;
    }
} 
```

并使用 ProtoAuth 类型的参数进行反序列化，您可以按如下方式调用：

```
Type type = new TypeToken<ProtoQuery<ProtoAuth>>() {}.getType();
ProtoQuery<ProtoAuth> deserializedOBJ = gson.fromJson(json, type); 
```

# java - 如何让 JComboBox 自动更新？

> ID：10567871
> 
> 赞同：0
> 
> 时间：2012-05-12T22:28:12.043
> 
> 标签：java, jcombobox

我正在努力更新我在 JComboBox 中的项目。当我从文件加载项目时，组合框显示正确，但是当我尝试从组合框项目中添加或删除项目时，组合框不会自动更新，它仍然保持相同的项目。这是我的代码这是我加载组合框项目的地方

```
ObjectInputStream input;
    try {
        // TODO add your handling code here:           
        JFileChooser openFileChooser = new JFileChooser();            
        openFileChooser.setCurrentDirectory(new File("."));
        if (openFileChooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION){
            input = new ObjectInputStream(new FileInputStream(openFileChooser.getSelectedFile()));
            diary = (Diary)input.readObject();
            jTextArea3.setText(diary.getUnitCollection().toString());
            input.close();
            //Load Unit Item
            for (Unit u: diary.getUnitCollection()){
                jComboBox8.addItem(u.getUnitName());
                jComboBox1.addItem(u.getUnitName());
            }
        }            
    } catch (ClassNotFoundException ex) {
        Logger.getLogger(GUI.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IOException ex) {
        Logger.getLogger(GUI.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

这是删除项目的按钮

```
 private void jButton7ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    // TODO add your handling code here:
    for (int i = 0; i < diary.getUnitCollection().size(); i++){
            if (jComboBox8.getSelectedItem().equals(diary.getUnitCollection().get(i).getUnitName())){
                diary.getUnitCollection().remove(diary.getUnitCollection().get(i));
                jTextArea3.setText("The Unit " + jComboBox8.getSelectedItem()+ " has been removed successfully");                   
            }
        }
} 
```

编辑：只是修复样式（代码块）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T22:32:30.253

您需要通过模型添加和删除内容，请查看[http://docs.oracle.com/javase/7/docs/api/javax/swing/DefaultComboBoxModel.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/DefaultComboBoxModel.html)

# php - 如何检索文件名

> ID：10567873
> 
> 赞同：0
> 
> 时间：2012-05-12T22:29:16.653
> 
> 标签：php, javascript, jquery, ajax

我怎样才能得到它，以便当用户单击“取消”按钮时，然后在它包含变量 var image_file_name 的取消按钮函数中，它检索在文件输入中输入的文件的名称？那么希望cancelimage.php页面中的$GET方法可以用来从函数中检索文件名吗？

以下是我的尝试，但它没有检索文件名。它只是检索一个空白。

下面是控制“取消”按钮的表单代码和javascript函数：

```
var $fileImage = $("<form action='imageupload.php' 
      method='post'enctype='multipart/form-data' target='upload_target' onsubmit='return 
      startImageUpload(this);' class='imageuploadform' ><label>" + 

"Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/>
<br/><label class='imagelbl'>" + 

"<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload'/>  
</label>" + 

"<input type='button' name='imageCancel' class='imageCancel' value='Cancel'/>
</label>" + 

"<iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px;solid;#fff;'></iframe></form>") 
```

...

```
 var _cancelimagecounter = cancelimagecounter;

    $(".imageCancel").click(function() {
    var image_file_name = <?php echo json_encode($image_file_name); ?>;

    jQuery.ajax("cancelimage.php?fileImage=" + image_file_name)
        .done(function(data) {

        $(".imagemsg" + _cancelimagecounter).html(data);
    });

    return stopImageUpload();

}); 
```

下面是 cancelimage.php 脚本，它使用 $GET 方法从 var image_file_name 获取文件名：

```
<?php

...

$image_file_name = $_GET["fileImage"];

    echo "File Upload was Canceled";

        $imagecancelsql = "DELETE FROM Image 
        WHERE ImageFile = 'ImageFiles/". mysql_real_escape_string($image_file_name)."'";

    mysql_query($imagecancelsql);

    mysql_close();

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T22:40:18.930

文件名远不是这里的问题......但是你的文件名没有显示，因为你正在尝试使用`$_GET["fileImage"];`

`enctype='multipart/form-data`表格是通过和提交的`<input name='fileImage' type='file'`

你应该`$_FILES`改用......

你的文件名是

```
$image_file_name = $_FILES['fileImage']['name'] ; 
```

# xcode - 如何在 Interface Builder 中获得 Autosize 功能以显示对象？

> ID：10567876
> 
> 赞同：11
> 
> 时间：2012-05-12T22:29:48.070
> 
> 标签：xcode, cocoa

我是 Mac OS X 开发以及 Xcode 和 Cocoa 框架的新手。我一直在阅读 Apple 开发者网站上的“您的第一个 Mac 应用程序”教程，但遇到了障碍。我已经完成了大部分工作，但我在它向您展示如何在 gui 对象上使用 Autosizing 的部分中挂断了。当我单击滑块（或任何对象）然后选择尺寸检查器时，检查器窗口中没有任何自动调整大小的项目，如教程中所示。我如何让这些选项显示出来？

![在此处输入图像描述](../Images/a165903919c4d918725f0c5fa5bc4ed2.png)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-12T23:32:19.650

这是 XCode 4 中的一个新功能，称为[Constraints](http://developer.apple.com/library/mac/#recipes/xcode_help-interface_builder/UnderstandingAutolayout.html)。这只是定义在调整窗口（或父视图）大小时如何调整用户界面大小的另一种方式。如果您想使用教程中的 Autoresizing Mask 设置，请转到 File Inspector（右侧的第一个选项卡）并取消选中 Use Auto Layout。

![在此处输入图像描述](../Images/39d58612c5b81004de932fc320365bbd.png)

# sql - 通过存储过程权限跨数据库权限

> ID：10567882
> 
> 赞同：0
> 
> 时间：2012-05-12T22:30:54.980
> 
> 标签：sql, sql-server-2008, permissions

我设置了一个存储过程`DATABASE1`，其中包括对存储过程调用的调用`sp_start_job`（这是 msdb 数据库中的一个存储过程，它将触发代理作业）。

我创建了一个代理登录并将此登录映射到**msdb**和**DATABASE1**数据库中的用户帐户。

在我原来的存储过程中，我使用 EXEC 作为代理登录。此代理用户有权执行此过程，并且可以在 msdb 数据库中执行 sp_start_job 过程，并且是 SqlAgentOperator、SqlAgentUser 和 SqlAgentReader 角色的成员。我还授予了**DATABASE1**和**msdb**中的用户身份验证权限。

这个想法是任何可以执行原始过程的用户实际上都会在代理登录的凭据下运行它，所以我不必分配这些权限。我仍然遇到权限错误，有人知道这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T22:13:41.180

我们通过打开跨数据库所有权链接来解决这个问题

# api - ASANA API 和 Access-Control-* 标头

> ID：10567884
> 
> 赞同：0
> 
> 时间：2012-05-12T22:31:39.660
> 
> 标签：api, access-control, asana

我正在编写一些代码来从浏览器调用 Asana API。从浏览器发出的 XDR 请求都以调用 OPTIONS 以获取 Access-Control-* 标头开始，但 Asana 服务器似乎没有响应它们：

```
Request URL:https://app.asana.com/api/1.0/users?opt_pretty=true&opt_fields=name,email
Request Method:OPTIONS
Status Code:404 Object Not Found
Request Headers:
  Accept:*/*
  Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
  Accept-Encoding:gzip,deflate,sdch
  Accept-Language:fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4
  Access-Control-Request-Headers:origin, authorization, accept
  Access-Control-Request-Method:GET
  Connection:keep-alive
  Host:app.asana.com
  Origin:null
  User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1129.0 Safari/536.11

Query String Parameters:
  opt_pretty:true
  opt_fields:name,email

Response Headers:
  Content-Length:82
  Content-Type:application/json
  Date:Sat, 12 May 2012 22:23:19 GMT
  Server:nginx/0.7.67
  ... 
```

响应标头应包含以下内容：

```
Access-Control-Allow-Headers: Accept, Authorization, Content-Type
Access-Control-Allow-Methods: GET,PUT,POST,DELETE
Access-Control-Allow-Origin: * 
```

或者在请求 API 时我遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T18:40:41.300

（我在 Asana 工作）

Asana API 现在不返回这些标头，因为它不支持 OAuth 并且无法安全地验证来自客户端的请求。只有为经过身份验证的客户端返回这些标头才是安全的，否则该服务将对跨站点脚本攻击开放。OAuth 在未来支持的功能列表中。

# java - 指示 JVM 验证程序何时验证类

> ID：10567888
> 
> 赞同：1
> 
> 时间：2012-05-12T22:32:14.943
> 
> 标签：java, jvm, bytecode

当使用 java 命令运行 java 程序时，您可以使用 -verbose 指定详细选项，它允许您检查何时加载类。例如：

```
java -verbose Test | grep "file:"
[Loaded Test from file:/Users... ]
[Loaded C1 from file:/Users... ]
[Loaded A1 from file:/Users... ]
[Loaded B1 from file:/Users...]
[Loaded C2 from file:/Users...] 
```

有没有办法指示验证阶段何时发生？类的验证不一定在加载后直接进行。例如，这样的事情将是理想的：

```
java -verbose Test | grep "file:"
[Loaded Test from file:/Users... ]
[Loaded C1 from file:/Users... ]
[Loaded A1 from file:/Users... ]
[Loaded B1 from file:/Users...]
[Verified C1]
[Loaded C2 from file:/Users...]
[Verified C2] 
```

ETC

对于那些“你不需要这个”，“你为什么要这样做”的答案。它只是出于纯粹的兴趣，仍然值得提问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:34:15.773

正如@Antimony 建议的那样，要查看何时验证类，需要在重新编译之前修改正在使用的 JVM 的源代码。

Oracles HotSpot vm 源已经有许多日志行来指示不同的验证阶段，它们可以通过更改来启用

```
ClassVerifier::_verify_verbose; 
```

真实在

```
/openjdk/hotspot/src/share/vm/classfile/verifier.cpp 
```

# linux - 并行制作：将 -j8 设置为默认选项

> ID：10567890
> 
> 赞同：39
> 
> 时间：2012-05-12T22:32:30.507
> 
> 标签：linux, makefile, build, gnu-make, parallel-builds

`-j`我可以使用参数设置构建过程的线程数。例如，我有 4 个核心 +4 个虚拟。我写`make -j8`的时候：速度提高了4倍。

是否可以将该值设置为默认值？（例如，在 Linux Gentoo 中，在配置文件中，可以设置此默认值）。

ps 我有 Arch Linux

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-12T22:41:04.250

您的问题不是关于线程，而是关于 make 执行的进程（作业）。

当从控制台使用 make 时，设置它的简单方法是添加：

```
alias make="/usr/bin/make -j 8" 
```

到你的`.profile`文件。

您也可以使用`setenv MAKEFLAGS '-j 8'`，但`MAKEFLAGS`在某些情况下可以忽略此参数，因为保持所需的进程数需要与递归`make`调用进行通信。令人高兴的是，这种方法[适用于当前版本的 GNU Make](http://www.gnu.org/software/make/manual/html_node/Options_002fRecursion.html)。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-05-12T22:36:46.147

```
setenv MAKEFLAGS '-j8' 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-05-28T04:44:55.697

这是我的做法：

```
CORES ?= $(shell sysctl -n hw.ncpu || echo 1)

all:; @$(MAKE) _all -j$(CORES)
_all: install lint test
.PHONY: all _all
… 
```

我基本上将我的默认目标“别名”`all`为“私人” `_all`。计算内核数量的命令是 OSX 特定的，AFAIK，所以如果你愿意的话，你可以将它改进为更加跨平台。由于`?=`分配，我们可以在需要时使用和环境变量覆盖它。

**编辑：**

您还可以`MAKEFLAGS`在 makefile 本身中附加到您的 from，如下所示：

```
CPUS ?= $(shell sysctl -n hw.ncpu || echo 1)
MAKEFLAGS += --jobs=$(CPUS)
… 
```

**编辑2：**

您也可以使用以下内容，如果您希望它更加跨平台：

```
CPUS ?= $(shell (nproc --all || sysctl -n hw.ncpu) 2>/dev/null || echo 1) 
```

# c++ - fstream::open() Unicode 或非 Ascii 字符在 Windows 上不起作用（使用 std::ios::out）

> ID：10567893
> 
> 赞同：3
> 
> 时间：2012-05-12T22:33:39.987
> 
> 标签：c++, windows, unicode, utf-8, fstream

在 C++ 项目中，我想打开一个文件 ( `fstream::open()`)（这似乎是一个主要问题）。我的程序的 Windows 版本惨遭失败。

*   文件“ä”（UTF-8 0xC3 0xA4）

    ```
    std::string s = ...;
    //Convert s
    std::fstream f;
    f.open(s.c_str(), std::ios::binary | std::ios::in); //Works (f.is_open() == true)
    f.close();
    f.open(s.c_str(), std::ios::binary | std::ios::in | std::ios::out); //Doesn't work 
    ```

    该字符串`s`是 UTF-8 编码的，但随后从 UTF-8 转换为 Latin1 (0xE4)。我正在使用 Qt，所以`QString::fromUtf8(s.c_str()).toLocal8Bit().constData()`.

    为什么我可以打开文件进行阅读，但不能打开文件？

*   文件 "и" (UTF-8 0xD0 0xB8)

    相同的代码，根本不起作用。

看来，这个字符不适合 Windows-1252 字符集。如何打开这样的 fstream（我没有使用 MSVC，所以[没有`fstream::open(const wchar_t*, ios_base::openmode)`](https://stackoverflow.com/a/822032/664132)）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T04:30:22.633

在 STL 的 Microsoft 实现中，有一个非标准扩展（重载）以允许 Unicode 支持 UTF-16 编码的字符串。

只需将 UTF-16 编码的 std::wstring 传递给 fstream::open()。这是使它与 fstream 一起工作的唯一方法。

你可以在这里阅读更多关于我发现在 Windows 上支持 unicode 的最简单方法：http: [//utf8everywhere.org/](http://utf8everywhere.org/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T04:09:40.397

使用 Windows 上的标准 API（例如 std::fstream），如果文件名可以使用当前设置的“ANSI 代码页”（CP_ACP）进行编码，则只能打开文件。

这意味着可能存在无法在 Windows 上使用这些 API 打开的文件。除非 Microsoft 实现了对将 CP_ACP 设置为 CP_UTF8 的支持，否则这不能使用 Microsoft 的 CRT 或 C++ 标准库实现来完成。

（Windows 有一个称为“短”文件名的功能，启用后，驱动器上的每个文件都有一个 ASCII 文件名，可以通过标准 API 使用。但是这个功能正在消失，所以它并不代表一个可行的解决方案。）

更新：Windows 10 增加了对将代码页设置为 UTF-8 的支持

# javascript - 动态更新 url/html 标题时，如何获得类似 facebook 的按钮来注册更改？（不是fb中的href：like）

> ID：10567901
> 
> 赞同：1
> 
> 时间：2012-05-12T22:35:02.867
> 
> 标签：javascript, facebook, html, facebook-like

我有一个 webapp，它根据动态加载的内容使用 window.history.pushState() 更改 url。我在页面上还有一个类似 facebook 的按钮，对应于当前元素/url（也动态更改），我还更改了页面的标题（document.title）。

当我在运行时单击该按钮时，Facebook 上的更新显示“用户喜欢此链接”。该链接是指向正确 URL 的正确链接，但在它下面有一条小消息，上面写着

```
Original Title
Original URL 
```

我怎样才能让 facebook 更新改为阅读：

```
Updated Title
Updated URL 
```

最好的，
萨米

编辑：

或者，有人知道如何更改 facebook 喜欢按钮发布的消息吗？如果我可以创建自己的消息，我可以轻松解决这个问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-12T22:42:28.027

看起来这个问题在此处[更新 FB:Like URL Dynamically using JavaScript](https://stackoverflow.com/questions/2764129/update-fblike-url-dynamically-using-javascript)之前已经回答 了，给出了许多不同的解决方案

**编辑以回答已澄清** 的问题：问题在此处重新叙述[Facebook 共享不会获取页面加载后更改的标题/描述元标记](https://stackoverflow.com/questions/2656803/facebook-share-doesnt-pick-up-title-description-meta-tags-that-are-changed-af)

总结一下：Facebook 会抓取并缓存您的页面标题和描述，这些信息不是由客户端提交的。

解决此问题的一种方法是让您的服务器解析散列或查询字符串，就像您的 javascript 那样，并提供具有您想要的标题的页面。

# c++ - 重定向增强绑定

> ID：10567903
> 
> 赞同：3
> 
> 时间：2012-05-12T22:35:26.870
> 
> 标签：c++, boost, boost-bind

是否可以进行以下转换？我已经尝试过 boost::lambda 并且只是一个简单的绑定，但是我正在努力在没有处理 foo 和调用 bar 的特殊帮助器类的情况下就地进行转换。

```
struct Foo {}; // untouchable
struct Bar {}; // untouchable

// my code
Bar ConvertFooToBar(const Foo& foo) { ... }

void ProcessBar(const Bar& bar) { ... }

boost::function<void (const Foo&)> f = 
 boost::bind(&ProcessBar, ?);

f(Foo()); // ProcessBar is invoked with a converted Bar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T00:16:00.860

你正在做功能组合。所以你必须编写你`bind`的 s。你需要`ProcessBar(ConvertFooToBar(...))`发生。所以你必须真正做到这一点。

```
boost::function<void (const Foo&)> f = 
 boost::bind(&ProcessBar, boost::bind(ConvertFooToBar, _1)); 
```

# android - 无法将 ViewHolder 声明为静态内部类

> ID：10567906
> 
> 赞同：3
> 
> 时间：2012-05-12T22:35:42.623
> 
> 标签：android

在我的应用程序中，我使用列表视图并通过扩展标准数组适配器自定义了关联的数组适配器。但是，在扩展适配器内部，我无法将视图保持器声明为静态内部类。Eclipse 不断给出“静态类型只能在静态或顶级类型中声明”的错误。这是代码：

```
public class IconicAdapter extends ArrayAdapter<String>
{
    public static class ViewHolder
    {
        public TextView text;
        public ImageView image;
    }

    public IconicAdapter() {
        super(MainActivity.this,R.layout.row,values);
        // TODO Auto-generated constructor stub
    }

    public View getView(int position,View convertView, ViewGroup parent)
    {
        View row = convertView;
        if(row == null)
        {
            LayoutInflater inflater = getLayoutInflater();
            row = inflater.inflate(R.layout.row, parent,false);
        }
        TextView label =(TextView)row.findViewById(R.id.label);
        label.setText(values[position]);
        ImageView icon = (ImageView)row.findViewById(R.id.icon);
        icon.setImageResource(R.drawable.ok);

        return (row);
    }
} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T22:42:20.617

如果`IconicAdapter`是一个内部类，你将不能在其中声明一个内部静态类，除非`IconicAdapter`被声明为一个静态类。

# c++ - C++中的模板类

> ID：10567910
> 
> 赞同：2
> 
> 时间：2012-05-12T22:36:41.767
> 
> 标签：c++, templates, compiler-construction

我们有以下类定义

```
template<typename T>
class Klass {...} 
```

我们还有以下两个实例

```
Klass<int> i;
Klass<double> d; 
```

C++ 编译器生成了多少份 Klass 的方法？有人可以解释一下吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T22:38:45.693

`Klass``Klass`不是类型，所以谈论' 方法是没有意义的。`Kalss<int>`是一个有自己方法的类型，`Klass<double>`. 在您的示例中，每种类型都有一组方法。

**在现实生活中编辑**，并不是那么简单。方法的实际存在问题还取决于其他因素，请参阅@KerrekSB 对此问题的回答。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-12T22:44:02.550

每个模板实例都是一个完全独立的、独特的和独立的类型。*但是，仅当成员函数实际用于*给定模板实例化时才会生成类模板成员函数的代码（除非您为某些参数集*显式实例化模板）。*除此之外，这意味着如果某些类模板成员函数的*主体*对于给定的模板参数实际上没有意义，那么只要不调用该成员函数，您仍然可以使用整个模板，因为代码成员函数永远不会被编译。

还要记住，模板可以是专门的：

```
template <typename T> struct Foo {
    int bar;
    void chi();
};

template <> struct Foo<int> {
    double bar(bool, char) const;
    typedef std::vector<bool> chi;
    bool y;
}; 
```

如您所见，在您看到将要讨论的实际实例化之前，您无法仅从模板本身中分辨出很多东西。

# xcode - xCode...按距离顺序排列的表格视图

> ID：10567912
> 
> 赞同：0
> 
> 时间：2012-05-12T22:37:36.837
> 
> 标签：xcode

在我的应用程序中，我试图制作不同的场地，在表格视图中进入距离订单，以便客户可以看到离他最近的地方，这个不断变化......

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T22:40:56.717

将场地作为 NSDictionaries (venue, distance) 保存在一个数组中，并按距离升序对数组进行排序.....使数组成为 Table View 的数据源。

# jquery - 如何强制关闭悬停状态？

> ID：10567915
> 
> 赞同：2
> 
> 时间：2012-05-12T22:38:11.087
> 
> 标签：jquery, css, hover

我有一个带有 :hover 颜色变化的文本按钮。单击按钮会缩小它所在的 div，从而将按钮从单击它的鼠标光标下方移出。这样做会使按钮处于 :hover 状态，因此它不会变回非悬停颜色。有什么办法可以强制按钮退出悬停状态（因为我知道那一刻肯定不会悬停）？

这里的jsfiddle示例：http: [//jsfiddle.net/forgetcolor/vYjMv/6/](http://jsfiddle.net/forgetcolor/vYjMv/6/)

ps：我知道在那个jsfiddle示例中，只要我自己移动鼠标，状态就会改变，但不幸的是，在我自己的示例中，它不会——直到我再次移过按钮。我猜这是因为在我的情况下，当缩小元素移动时，鼠标光标下方留下的是一个带有 PDF 的 iframe（？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:43:12.417

我不会`:hover`在 CSS 中使用选择器，而是使用`.hover`类。然后，您可以将此类显式分配给`mouseover`/ `mouseout`，并在需要时显式删除它。

这能解决你的问题吗？

**更新**

建议：使用 jQuery 的`$().hover()`.

# java - Android 首选项列表文件

> ID：10567917
> 
> 赞同：1
> 
> 时间：2012-05-12T22:38:33.253
> 
> 标签：java, android, preferences

我正在尝试创建一个首选项选项，该选项将显示特定目录中所有文件的名称。我看过，但我还没有看到任何可以做到这一点的东西。有办法吗？谢谢！

威廉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T22:54:48.013

这个

```
File dir = new File(path_dir); 
File[] files = dir.listFiles(); 
```

将为您提供目录下所有文件的数组`path_dir`。遍历它并将 files[i].getName() 添加到 CharSequence 数组中。

```
CharSequence[] entries = ...;
ListPreference lp = new ListPreference(this);
lp.setEntries(entries);
lp.setEntryValues(entries); 
```

# database - 根据 Crystal Reports 中的空值或空值进行条件打印

> ID：10567918
> 
> 赞同：1
> 
> 时间：2012-05-12T22:38:38.177
> 
> 标签：database, crystal-reports, field, crystal-reports-2008

假设我有一个 StoredProcedure，它返回一个唯一的行，该行对应于一个包含“Name”和“Surname”列的表。

我希望报告显示：

```
Name: NameField
Surname: SurnameField 
```

其中“NameField”和“SurnameField”是 StoredProcedure 返回的字段。

特殊要求是，如果“SurnameField”为空或 null，那么我不想显示“Surname: SurnameField”。

我怎样才能做到这一点？我唯一想到的是将存储过程分成两部分，一个用于姓名，一个用于姓氏，并将每一行划分为不同的子报表，然后为第二个选择“如果为空则删除”（或类似的东西）......但这是真的矫枉过正，我想有一个更简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T22:56:41.870

应该有相当多的方法来实现这一点。我不太确定您的报告是如何布局的，但是您可以使用简单的公式隐藏字段和标签或整个部分（如果它有自己的部分）；`isnull({table.field}) or {table.field} = ''`

或者，如果您将空值设置为默认值而不是异常值，您可以简单地执行以下操作：`{table.field} = ''`

大号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T21:09:25.947

设置字段`> 1`（假设 all 已经大于 1）或`<> 0`.
那应该过滤掉该区域中带有空白的记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-28T17:18:29.023

您可以通过 Section Expert 来实现：

假设name字段name是Surname，表是NAME，存储surname值的字段是S_NAME_VALUE。您可以设置过滤器检查该值是 NULL 还是 BLANK。

```
if {NAME.SURNAME} in ['SNAME'] and 
             {NAME.S_NAME_VALUE} =''
then 
             TRUE 
```

我假设有一些用于姓氏过滤的代码，即 SNAME。

如果不是，您可以使用一个条件并将其标记为真。

```
 if {NAME.S_NAME_VALUE} = '' then TRUE 
```

# matlab - 从 MATLAB 中的波形音频文件中去除噪声

> ID：10567921
> 
> 赞同：-1
> 
> 时间：2012-05-12T22:39:17.307
> 
> 标签：matlab, audio, signal-processing, signals

我有两个波形文件，一个是正常版本，另一个是失真版本。在失真版本中，我听到长长的哔哔声。这是正常和失真版本声音的频域图。第一个是正常的，第二个是扭曲的。注意天平。 ![普通版](../Images/fb575a6eba530305ee8be1e4a9a61ad4.png)

![扭曲版本](../Images/096287cd2c4249711c71195a3d470ef8.png)

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T00:33:15.750

如果不使用标记或放大，这有点难以分辨，但似乎您的信号中插入了一个正弦曲线，这可以解释您听到的连续蜂鸣声以及您在频谱中具有的类似 delta 的功能。尝试使用标记定位噪声频率并使用滤波器设计工具（在命令行中键入“fdatool”）对其进行过滤。我会在噪声频率上使用陷波滤波器，如果这不起作用，则使用高（~1000）阶高通 FIR 滤波器。

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-19T22:32:57.183

由于您在频域中具有信号，因此您还可以去除那里的噪声（使用简单的阈值），然后进行傅里叶逆变换，并在时域中获得无噪声信号。

# jquery - 背景不透明度和模糊另一个图像

> ID：10567930
> 
> 赞同：3
> 
> 时间：2012-05-12T22:40:45.757
> 
> 标签：jquery, css, blur, translucency

我正在做一件事，而不是使用大图像，我更喜欢使用正常的背景颜色，上面有一些不透明度和模糊......

这是示例：[http ://codecanyon.net/item/translucent-jquery-banner-rotator-slideshow/801607?WT.ac=search_item&WT.seg_1=search_item&WT.z_author=VF](http://codecanyon.net/item/translucent-jquery-banner-rotator-slideshow/801607?WT.ac=search_item&WT.seg_1=search_item&WT.z_author=VF)

那个滑块有半透明和模糊的描述栏，这正是我想要的......

我在这里又找到了一个例子：http: [//www.blurjs.com/](http://www.blurjs.com/)

但我不想要javascript。如果可以用css3完成，我会很高兴。

我不知道那个滑块是否使用了javascript或css？

有人知道用css编写类似的代码吗？感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T22:45:08.753

您链接到的滑块正在使用 canvas 元素，这需要 javascript 来操作。

您想要的不是仅使用 CSS 即可实现的 - 您需要 javascript，但[svg](http://www.w3schools.com/svg/svg_fegaussianblur.asp)可能可以处理它。但是，我没有足够的 svg 经验来确定。

# node.js - socket.io 客户端未收到数据包

> ID：10567939
> 
> 赞同：1
> 
> 时间：2012-05-12T22:42:29.210
> 
> 标签：node.js, socket.io

客户端：

```
App.socket = io.connect('http://127.0.0.1:4000');
App.socket.on('draw', function(data) {
  console.log("drawing");   
  return App.draw(data.x, data.y, data.type);
});
...
$(document).keyup(function(e) {
  if (e.keyCode == 27) { 
    App.socket.emit('drawing');
  }   
}); 
```

服务器端：

```
(function() {
  var io;
  io = require('socket.io').listen(4000);
  io.sockets.on('connection', function(socket) {
    socket.on('drawing', function() {  
      socket.broadcast.emit('draw', {
      x: 1,
      y: 1,
      type: "test"
      });  
    });
  });
}).call(this); 
```

因此，代码所做的是检测要按下的“esc”键。当按下 esc 键时，客户端会向服务器发送一个名为绘图的数据包。这有效，服务器确实收到了数据包。此外，服务器在收到“绘图”数据包后确实广播了一个名为“绘图”的数据包，但由于客户端的某些原因，服务器广播后没有收到绘图数据包。

我盯着这段代码看了好几个小时，它看起来很简单，我希望新的眼睛能抓住这个简单的错误。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:47:23.303

想通了，socket.emit.broadcast 将数据包发送到当前套接字之外的每个套接字连接

# regex - 在 lighttpd 中重写/重定向 url（添加斜杠）

> ID：10567941
> 
> 赞同：0
> 
> 时间：2012-05-12T22:42:51.370
> 
> 标签：regex, mod-rewrite, redirect, lighttpd

我需要在 lighttpd 中的 url 添加一个斜杠 (/)。我测试了这个：

```
url.redirect               = ( "^(.*)$" => "$1/") 
```

但这在最后增加了很多斜线。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T02:32:40.083

刚刚怎么样

```
"^(.*[^/])$" => "$1/" 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:42:48.573

是的，正如安萨里所说，你需要这样的东西。

（目前，我正在做同样的事情......）

> $SERVER["socket"] == "xxx.xxx.xxx.xxx:xx" { url.redirect = ("^(.*[^/])$" => "$1/") }

这会将 / 放在 URL 的末尾。

# javascript - RequireJS - 打包与主干相关的模块，以便在其他 Rails/JS 应用程序中重用

> ID：10567950
> 
> 赞同：3
> 
> 时间：2012-05-12T22:44:50.147
> 
> 标签：javascript, backbone.js, coffeescript, requirejs, requirejs-rails

我正在构建一个基于 Rails 和客户端 Backbone.js 的 Web 应用程序。为了构建我的 Coffeescript-Code，我使用了 RequireJS 和[requirejs-rails](https://github.com/jwhitley/requirejs-rails)。我的每个 Backbone 类都存在于它自己的 RequireJS 模块中。

我最近将很多代码重构为一些基类，并希望以某种方式将它们打包以便能够在其他项目中轻松重用它们（Rails 和/或 Javascript/Coffeescript，即使没有 RequireJS 也可能）并将其作为单独的项目在 GitHub 上共享来自我的 Rails 应用程序。我阅读了有关包的 RequireJS 文档，但没有详细介绍。所以这就是我想做的：

*   将我的共享代码移动到它自己的包中`views/base_collection_view`，`commons/views/base_collection_views`如此等等
*   在我的 rails 应用程序中将包包含到我的 requirejs-rails 设置中，并提供一个编译`my-commons.js`文件以在非 requirejs 设置中使用（我想一旦我弄清楚如何布局包，后者将很容易使用 almond 完成）

在这一点上，一个可重用 RequireJS-package 的完整示例对我有很大帮助，以及如何将其转移到 requirejs-rails 的一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:52:19.543

不确定 requirejs-rails，但使用 RequireJS 非常简单。

```
define(['dep1', 'dep2'] , function ($, otherLibrary) {
    return function () {
        // your module code
    };
}); 
```

其中 'dep1' 和 'dep2' 是您的模块所依赖的其他 RequireJS 模块。您可以根据需要依赖尽可能少的或尽可能多的。您传递给实际函数的 var 名称（本例中为 $ 和 otherLibrary）是这些库将在您的模块中分配的名称。

任何使用 RequireJS 的人都可以通过这种方式请求您的模块，具体取决于文件的命名方式和文件所在的文件夹。

例如，如果这个文件在目录中被称为“my-super-lib.js” `libs`，另一个模块可以直接传递`libs/my-super-lib`给它的依赖数组，一切都会被设置。

更新：刚刚记得你提到过咖啡脚本。相同的想法，但要清楚：

```
define ['dep1', 'dep2'], ($, otherLibrary) ->
    () ->
        // your module code 
```

如果你对此感兴趣。;)

# asp.net - 简单的 ajax 调用不适用于按钮单击

> ID：10567951
> 
> 赞同：3
> 
> 时间：2012-05-12T22:44:57.997
> 
> 标签：asp.net, ajax, button, click

我正在使用他网站上关于如何使用 ajax 调用[的 Encosia示例](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

当我单击 div 时，它工作正常，当我替换按钮而不是 div 时，它会刷新整个页面，我在 firebug 中没有发现任何错误。

这是我的代码：

**脚本：**

```
<script type="text/javascript">
    $(document).ready(function () {
        // Add the page method call as an onclick handler for the div.
        $("#getdate").click(function () {
            $.ajax({
                type: "POST",
                url: "Default.aspx/GetDate",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    // Replace the div's content with the page method's return.
                    $("#Result").html(msg.d);
                }
            });
        });
    });
</script> 
```

**HTML：**

```
<asp:ScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="True">
</asp:ScriptManager>
<div id="Result">Click here for the time.</div>
<button id="getdate" value="Click Me">ClickMe</button> 
```

**代码隐藏：**

```
<WebMethod()> _
<ScriptMethod(ResponseFormat:=ResponseFormat.Json)>
Public Shared Function GetDate() As String
     Return DateTime.Now.ToString()
End Function 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T22:47:48.267

最有可能发生的是 - 按钮提交页面，以便重新加载页面。我之前在某些浏览器中遇到过这个问题。您需要指定`type="button"`属性。

[http://www.w3schools.com/tags/tag_button.asp](http://www.w3schools.com/tags/tag_button.asp)

# javascript - 通过 JavaScript 的 MVC 3 向导不安全？

> ID：10567954
> 
> 赞同：0
> 
> 时间：2012-05-12T22:45:15.930
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, security

我跳过了以下教程： [http ://afana.me/post/create-wizard-in-aspnet-mvc-3.aspx](http://afana.me/post/create-wizard-in-aspnet-mvc-3.aspx)

因为它看起来很不错，我问自己是否像这样在 JavaScript 中制作完整的向导是一个好/安全的主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T22:51:47.920

只要您使用**POST** **HTTP**方法进行保存/删除数据操作，我看不出有什么问题。但我总是让应用程序在非 javascript 版本中工作，一旦完成，添加像 ajaxified 向导一样的 javascript 花式版本。

# apache-flex - Flex VerticalLayout Horizo ntalLayout 元素顺序基于状态

> ID：10567956
> 
> 赞同：0
> 
> 时间：2012-05-12T22:46:13.943
> 
> 标签：apache-flex

在我的 mxml 部分我有

```
 <s:layout.landscape>
    <s:HorizontalLayout />
</s:layout.landscape>

<s:layout.portrait>
    <s:VerticalLayout />
</s:layout.portrait> 
```

在这些标签之后，我有几个组件，例如

```
<s:Button label="button 1"/>
<s:Button label="button 2"/> 
```

我想做的是在进入纵向或横向状态后更改这些组件的顺序。例如，在纵向我有垂直布局按钮 1 后跟按钮 2，而在横向我有水平布局，其中按钮 2 后跟按钮 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:52:54.023

您可以使用`this.swapElements(button1,button2);`

例子： -

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               minWidth="955" minHeight="600" currentState="landscape">
    <s:states>
        <s:State name="landscape"/>
        <s:State name="portrait"/>
    </s:states>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            import spark.events.IndexChangeEvent;

            protected function dropdownlist1_changeHandler(event:IndexChangeEvent):void
            {
                // TODO Auto-generated method stub
                if(event.target.selectedIndex == 0)
                {
                    this.currentState = event.target.dataProvider[0];
                    this.swapElements(button1,button2);
                }
                else
                {
                    this.currentState = event.target.dataProvider[1];
                    this.swapElements(button2,button1);
                }
            }
        ]]>
    </fx:Script>

    <s:layout.landscape>
        <s:HorizontalLayout />
    </s:layout.landscape>

    <s:layout.portrait>
        <s:VerticalLayout />
    </s:layout.portrait>

    <s:DropDownList selectedIndex="0" change="dropdownlist1_changeHandler(event)">  
        <s:ArrayCollection>
            <fx:String>landscape</fx:String>
            <fx:String>portrait</fx:String>
        </s:ArrayCollection>
    </s:DropDownList>

    <s:Button id="button1" label="button 1"/>
    <s:Button id="button2" label="button 2"/>

</s:Application> 
```

希望这可能会有所帮助...

# html - HTML5 粒子效果

> ID：10567957
> 
> 赞同：0
> 
> 时间：2012-05-12T22:46:23.723
> 
> 标签：html, particles

我正在尝试创建类似的效果，如下所示：

[http://timothypoon.com/blog/2011/01/19/html5-canvas-particle-animation/](http://timothypoon.com/blog/2011/01/19/html5-canvas-particle-animation/)

但是，我似乎无法让它在我的页面上工作，我想在包含图像的 div 中应用这种效果。这是可能的还是一切都必须在画布上发生？

当我尝试重新创建教程中描述的效果时，我遇到了很多错误，例如未定义变量等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T23:10:06.863

您可以使用 Canvas，或使用 CSS 转换和阴影，或两者的混合来重新创建它。至于未定义的变量，我无能为力，因为您没有发布您的代码。

一种干净的方法是使用 JavaScript 在画布内完成所有操作。您可以在画布上绘制前景草和背景山脉。但是，如果您想部分使用 a ，您可以使用 CSS或`<div>`将 div 覆盖在画布顶部，也可以使用 CSS设置它们的顺序。`position:fixed``position:absolute``z-index`

我推荐以下链接，向下滚动查看图片：http: [//thinkvitamin.com/code/how-to-draw-with-html-5-canvas/](http://thinkvitamin.com/code/how-to-draw-with-html-5-canvas/)

我不知道我还能提供什么帮助，因为您提供的教程很好地解释了一切。但是，如果您有任何进一步的疑问，请随时发表评论或更新您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T03:32:07.427

你可以使用质子粒子引擎轻松实现你想要的效果，它的API非常简单。[http://a-jie.github.io/Proton/](http://a-jie.github.io/Proton/)

# java - Java 方法的运行顺序是什么？

> ID：10567958
> 
> 赞同：-2
> 
> 时间：2012-05-12T22:46:46.063
> 
> 标签：java, class

**我的意思是功能，对不起！**

使用下面的代码，它有几个做不同工作的类。问题是，既然他们从不互相打电话，他们按什么顺序运行？

它们同时运行吗？

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Moving extends JPanel implements ActionListener {
    int x, y;
    Timer timer;

    Moving() {
        x = 0;
        y = 0;
        timer = new Timer(10, this);
    }

    public void actionPerformed(ActionEvent e) {
        x += 1;
        y += 1;
        repaint();
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        if (x > 1080 && y > 880) {
            x = 0;
            y = 0;
        } else {
            g.fillOval(x, y, 40, 40);
        }
    }

    public static void main(String[] args) {
        JFrame f = new JFrame("Moving");
        f.setBackground(Color.GREEN);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Moving m = new Moving();
        f.add(m);
        f.setSize(1100, 900);
        f.setVisible(true);
        m.timer.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:54:11.727

我假设您的意思是方法，而不是类。此外，操作的顺序取决于您调用它们的顺序，也就是`main`方法。在您的示例中，您仅调用`Moving`构造函数，因此这是您的类中将执行的唯一“方法”。其他的已定义，但不会运行，因为它们没有被调用（至少在您提供的代码中没有）。

更新（感谢 dacwe 和 cHao）：对不起，我不熟悉 JPanel，也不知道在此类之外调用的方法。在这种情况下，该`repaint()`方法将间接调用`paintComponent()`，同时 Timer 将触发对[actionPerformed](http://docs.oracle.com/javase/1.3/docs/api/javax/swing/Timer.html)的调用。 [这篇文章](http://beginwithjava.blogspot.com/2008/07/controlling-javas-graphics.html)在更详细地解释它方面做得很好。

另外，作为注释——Java 通常调用它的“动词”方法。部分是大多数 OO 语言的约定，部分是因为该函数与一个类相关联，所以它值得这种区别。Javascript，一种函数式语言，将其动词称为“函数”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T23:00:28.610

您的程序按以下顺序执行：

1.  `main`入口点
2.  `Moving`建造者
3.  `Timer`构造函数
4.  `Timer.start()``Timer`类的方法
5.  `Moving.actionPerformed(ActionEvent e)`每 10 毫秒调用一次

# html - 解析打开的图形对象 URL 时出现调试器错误

> ID：10567962
> 
> 赞同：1
> 
> 时间：2012-05-12T22:47:37.653
> 
> 标签：html, facebook-graph-api, facebook-opengraph

好的，我在这里遇到了第一个障碍，我相信这很明显。我在 Facebook 上创建了一个小测试开放图形应用程序，并拼凑了一个 HTML 页面作为对象 URL（下面的代码）。这确实是最基本的测试，我直接从FB复制代码。

当尝试使用调试器解析它时，我收到以下错误：

`Error Parsing URL Error parsing input URL, no data was scraped.`

网页的完整 HTML 代码为：

```
<html>
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# aform_garibaldi: http://ogp.me/ns/fb/aform_garibaldi#">
  <meta property="fb:app_id" content="295505860505869" /> 
  <meta property="og:type"   content="aform_garibaldi:drumming_style" /> 
  <meta property="og:url"    content="http://www.appsformusicians.com" /> 
  <meta property="og:title"  content="Sample Drumming Style" /> 
  <meta property="og:image"  content="http://static.sqsp.com/static/4f666fb024ac1097e0151676/g/4f6d01ab24acad75aa703794/1332543916140/" /> 
</head>
<body>
Hello World.
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T15:18:46.717

他们的调试工具有 50% 的时间工作。

如果您尝试通过在地址栏中粘贴直接 url 来访问它，就像`.../debug/?q=http://...` 它显示错误一样。

但是，如果您在此之后单击调试按钮，它将起作用。

# javascript - 图像交换在 Firefox 中不起作用，但在 Chrome 和 IE 中起作用

> ID：10567968
> 
> 赞同：1
> 
> 时间：2012-05-12T22:48:10.650
> 
> 标签：javascript, dom

我试图在点击事件时交换两个 div 中的两个图像，以便 22a.jpg 以 div#second 结束，22b.jpg 以 div#first 结束，但每次单击“交换”按钮时，我都会得到这个Firebug 中的错误：**imgArray[2].src is undefined**。我尝试在 Chrome 17.0.963.2 和 IE 8.0 中运行代码，它运行良好，没有错误。我正在使用 Firefox 11.0

HTML

```
<body>
    <div id = "first" class = "thumbnail">
        <img class = "thumbsize" src = "22a.jpg" />
    </div>
    <div id = "second" class = "thumbnail">
        <img class = "thumbsize" src = "22b.jpg" />
    </div>
    <input type = "button" id = "swap" value = "swap" />
</body> 
```

JS

```
<script type = "text/javascript">
    document.getElementById("swap").onclick = function(){
        if(document.images){
            var imgArray = document.images;
            imgArray[2] = new Image();
            imgArray[2].src = imgArray[0].src;
            imgArray[0].src = imgArray[1].src;
            imgArray[1].src = imgArray[2].src;
        }
    };
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T23:01:05.863

[`document.images`](https://developer.mozilla.org/en/DOM/document.images)在 Firefox 中是只读的（[链接到规范](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-90379117)）。您可以创建新图像，但不能将其附加到`document.images`数组中。

完成图像交换的更好方法如下所示：

```
document.getElementById("swap").onclick = function(){
    if(document.images){
        var imgArray = document.images;
        var tempSrc = imgArray[0].src;
        imgArray[0].src = imgArray[1].src;
        imgArray[1].src = tempSrc;
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T23:00:32.010

您的 HTML 中只有两个图像，因此未定义 imgArray[2]。使用临时变量交换其他图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T22:50:03.817

您是否尝试过将其放入某种[准备好的](http://makeagreatsite.com/javascript/how-execute-javascript-when-document-ready)功能中？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T23:13:55.710

```
$('button#swap').toggle(function() {
$("div#first > img").attr('src','22b.jpg');
$("div#second > img").attr('src','22a.jpg');
}, function() {
$("div#first > img").attr('src','22a.jpg');
$("div#second > img").attr('src','22b.jpg');
}); 
```

像这样的东西对你有用吗？

# scheme - Scheme 病态特殊形式 let

> ID：10567970
> 
> 赞同：0
> 
> 时间：2012-05-12T22:48:40.870
> 
> 标签：scheme, dijkstra, let

我正在尝试编写一个方案程序，它是 Dijkstra 的最短算法。在我放松边缘的过程中，我得到的错误是

> ; 病态特殊形式：(let (...) ())

我的程序代码是，

```
(define relax-over-edge 
   (lambda (distlist edge min-pair)
     ( if (null? distlist)
       ()
       (if (equal? (cadr edge) (caar distlist)) 
            (if (> (cdar distlist) (+(cdr min-pair) (cddr edge)))
                (let (((cdar distlist) (+ (cdr min-pair) (cddr edge)) )) ())
                ()
            )
            (relax-over-edge (cdr distlist) edge min-pair)
        )
     )  
   )
) 
```

已经非常感谢了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T23:34:26.183

当然这是一个格式错误的`let`：

```
(let (((cdar distlist)
       (+ (cdr min-pair) (cddr edge)))) 
  '()) 
```

你想做什么？将`(+ (cdr min-pair) (cddr edge))`表达式分配给位置中的元素`(cdar distlist)`？这绝对*不是*列表在 Scheme 中的工作方式（至少不是*不可变*列表），您不能将值分配给这样的位置。此外，只能在表达式中绑定的左侧声明变量`let`，而不能在其他表达式中声明（例如在您的代码中）。

您必须重新考虑您的算法，要么使用 a `vector` （它*确实*支持在给定位置对元素进行就地修改），要么检查您正在使用的 Scheme 解释器的文档，以查看它对 mutable 的说明对和列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T02:55:33.153

您收到错误是因为您的`let`表单正文是 just `()`，这不是可以评估的有效表达式。引用[guile](http://www.gnu.org/software/guile/)手册：

> 语法：(let bindings body) BINDINGS 的形式为
> 
> ```
>  ((VARIABLE1 INIT1) ...)
> 
>  that is zero or more two-element lists of a variable and an
>  arbitrary expression each.  All VARIABLE names must be distinct. 
> ```
> 
> ...
> 
> ```
>  * The expressions in BODY are evaluated in order, and the value
>       of the last expression is returned as the value of the `let'
>       expression. 
> ```

# javascript - Javascript弹出窗口不起作用

> ID：10567973
> 
> 赞同：-2
> 
> 时间：2012-05-12T22:49:06.343
> 
> 标签：javascript, html, popup

下面的页面有什么问题？

```
<html>
<head>
<script type="text/javascript">
function openWin(url, w, h)
{
var left = (screen.width/2)-(w/2);
var top = (screen.height/2)-(h/2);
w=window.open(url, '_blank', 'width='+w+', height='+h+', scrollbars=no, menubar=no, resizable=no, location=no, toolbar=no, top='+top+', left='+left+', 'false');
w.focus();
}
</script>
</head>
<body>

<input type="button" value="Open window" onclick="openWin(about:blank, 200, 200)" />

</body>
</html> 
```

每当我单击按钮时，什么都没有发生。

使用铬

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T23:03:12.277

尝试这个：

```
<html>
<head>
<script type="text/javascript">
function openWin(url, w, h)
{
var left = (screen.width/2)-(w/2);
var top = (screen.height/2)-(h/2);
w=window.open(url, '_blank', width='+w+', height='+h+', scrollbars='no', menubar='no', resizable='no', location='no', toolbar='no', top='+top+', left='+left+', 'false');
w.focus();
}
</script>
</head>
<body>

<input type="button" value="Open window" onclick="openWin('about:blank', 200, 200); return false;" />

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T23:00:42.157

你有 2 个语法错误，一个在你的 onClick 属性中，你`about:blank`没有被引用
两个，在 window.open 中你有`+'`第二个参数的末尾还有第三个参数作为字符串，它应该是布尔值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T17:07:46.233

一个独特的相关琐事：
至少在最近的 IE 版本中，9.0.8112.16241 (vista/win7) 和 8.0.6001.18072 (xp)，以编程方式执行 a`window.open(‘about:blank’)`并且可编程`focus()`将卡在显示“<strong>about”的地址栏中：空白的”。
**注意：** `window.open(”)`带空字符串的 URL 与`window.open(‘about:blank’)`.

`location=no`根据 IE 安全设​​置添加选项可以解决此问题
`Allow websites to open windows without address or status bars`

但是，它们的默认值很糟糕（强制地址栏）。我发现最简单的方法是让用户在他们的安全设置中将我们的网站设置为“受信任”，其中默认的“中等”设置不会强制显示地址栏。

在 IE 8 中使用虚拟 URI`javascript:popup=1`确实可以解决此问题，但这可能会根据可能不适合您的设置在新选项卡中打开。

相关自定义安全设置：

*   其中：工具->Internet 选项->安全->自定义级别->其他
*   值：允许网站打开没有地址或状态栏的窗口：启用

***笔记：**我的是一个遗留的基于网络的“应用程序”，它采用了合法有用的弹出窗口设计，这是有益的（还没有人将它们从“Word”中删除）。对于我们这些受损的人来说，这是一个足够的挑战，因为这种有用的 UI 机制已被诈骗者和黑客破坏，我恳请您不要再用非生产性的“不要使用弹出窗口”切线感叹词进一步殴打我们。*

测试代码（`onloadJSServerSidePage`有效，`onloadJSClientSidePage`有问题）：

[http://forus.com/csm/code/iepopup/testPopupFocus.html](http://forus.com/csm/code/iepopup/testPopupFocus.html)

可选的“testPopupFocusContent.html” `onloadJSServerSidePag`：

[http://forus.com/csm/code/iepopup/testPopupFocusContent.html](http://forus.com/csm/code/iepopup/testPopupFocusContent.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T23:12:54.353

这里最后一个参数格式错误并更正删除了一个'

```
 w=window.open(url, '_blank', 'width='+w+', height='+h+', scrollbars=no, menubar=no, 
    resizable=no, location=no, toolbar=no, top='+top+', left='+left+', false'); 
```

在html调用代码中，

```
 <input type="button" value="Open window" onclick="openWin('http://www.google.com', 200, 200)" /> 
```

在 url 部分，你可以有一个绝对 url 或相对 ..

希望这可以帮助..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-12T22:51:19.587

试试这个：

```
<input type="button" 
       value="Open window" 
       onclick="openWin('about:blank', 200, 200);" /> 
```

我认为函数调用中 URL 参数中的冒号导致了问题 - 如果它是一个字符串，它应该用引号引起来。

编辑：添加了一个分号 - 这似乎对我有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-12T22:55:54.953

您`false`在行尾`w=window.open()`没有正确引用/连接。

# java - SimplePager 的意外行为

> ID：10567974
> 
> 赞同：0
> 
> 时间：2012-05-12T22:49:31.213
> 
> 标签：java, gwt, celllist, simplepager

我在 UiBinder (GWT 2.4) 中有一个 SimplePager：

```
 <c:CellList addStyleNames='{style.folderscroll}' ui:field='friendCellList'
        pageSize="4" />
    <c:SimplePager ui:field="pager" location='CENTER' /> 
```

在相应的 .java 中：

```
pager.setDisplay(friendCellList); 
```

我看到了一些预期的行为。单元格列表的支持数据源仅返回 10 个元素，但寻呼机的文本显示“1-4 of over 10”。即使我跑出列表的末尾，页面按钮也不会被禁用。

有没有办法完全删除该文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T22:57:58.513

如果您没有将 row-count 设置为*exact*，即您从您的数据提供者那里调用，则寻呼机显示*超过 X。**`setRowCount(10, false)`*

# asp.net - ItemTemplate 中的 asp.net 文本框，更新 sqldatasource

> ID：10567975
> 
> 赞同：0
> 
> 时间：2012-05-12T22:49:42.697
> 
> 标签：asp.net, sqldatasource, itemtemplate

我是asp.net的初学者。我想更新数据库中的数据。但什么也没有发生。我用google，发现问题可以通过ObjectDataSource解决，但不确定。

```
 <asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
    SelectCommand="SELECT * FROM [content]" UpdateCommand="UPDATE [content] SET [title] = @title, [article] = @article WHERE [id] = @id">
    <UpdateParameters>
        <asp:ControlParameter ControlID="txtTitle" Name="title" Type="String" PropertyName="Text" />
        <asp:ControlParameter ControlID="txtArticle" Name="article" Type="String" PropertyName="Text" />
        <asp:Parameter Name="id" Type="Int32" />
    </UpdateParameters>
</asp:SqlDataSource>
<asp:DataList ID="DataList2" runat="server" DataKeyField="id" DataSourceID="SqlDataSource1">
    <ItemTemplate>
        <asp:TextBox ID="txtTitle" runat="server" Text='<%# Eval("title") %>'></asp:TextBox><br>
        <asp:TextBox ID="txtArticle" runat="server" Text='<%# Eval("article") %>'></asp:TextBox><br>
        <asp:Button ID="Button1" runat="server" Text="go" />
    </ItemTemplate>
</asp:DataList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:25:53.407

您可以`SqlDatasource`在这里毫无问题地使用，甚至不必费心`UpdateParameters`——只需在`EditItemTemplate`您`GridView`和`Bind()`您的列中添加一个：

```
<asp:SqlDataSource ID="SqlDataSource2" runat="server"
    ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
    SelectCommand="SELECT * FROM [content]"
    UpdateCommand="UPDATE [content] SET [title] = @title, [article] = @article WHERE [id] = @id" />

<asp:DataList ID="DataList2" runat="server"
  DataKeyField="id" DataSourceID="SqlDataSource1"
  AutoGenerateColumns="false" AutoGenerateEditButton="true">

    <ItemTemplate>
        <asp:Label ID="lblTitle" runat="server" Text='<%# Eval("title") %>' /><br/>
        <asp:Lable ID="lblArticle" runat="server" Text='<%# Eval("article") %>' /><br/>
    </ItemTemplate>

    <EditItemTemplate>
        <asp:TextBox ID="txtTitle" runat="server" Text='<%# Bind("title") %>' /><br/>
        <asp:TextBox ID="txtArticle" runat="server" Text='<%# Bind("article") %>' /><br/>
    </EditItemTemplate> 
```

请注意，我确实设置为`AutoGenerateEditButton`假。`true``AutoGenerateColumns`

# objective-c - 从 -drawRect 中调用 -setNeedsDisplay:YES？

> ID：10567979
> 
> 赞同：1
> 
> 时间：2012-05-12T22:50:12.773
> 
> 标签：objective-c, cocoa, osx-lion, nsview, drawrect

我正在自定义我的`drawRect:`方法，该方法用于绘制 a`NSImage`如果它已“加载”（加载需要几秒钟的时间，因为我是从 a 抓取它`WebView`），如果图像没有，则推迟绘制图像直到稍后尚未加载。

```
- (void)drawRect:(NSRect)dirtyRect
{
    NSImage *imageToDraw = [self cachedImage];
    if (imageToDraw != nil) {
        [imageToDraw drawInRect:dirtyRect fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0 respectFlipped:YES hints:nil];
    } else {
        //I need help here
        [self setNeedsDisplay:YES];
    }
} 
```

我的问题是如何做后者。`[self cachedImage]`如果图像不可用，则返回`nil`，但在接下来的几秒钟内它可能随时可用，那时我想绘制它，因为自定义视图已经在屏幕上。

我最初的直觉是在图像不可用时尝试调用`[self setNeedsDisplay:YES];`，希望它会告诉 Cocoa`drawRect`下次再次调用（一次又一次，直到图像被绘制），但这不起作用。

关于我可以从这里去哪里的任何指示？

* * *

编辑：

`WebView`当 loadRequest 已完全处理时，我非常了解该火灾的委托方法。然而，由于应用程序其余部分的结构，使用这些将非常困难，但我想我现在会尝试以某种方式使用它们，因为目前的答案。（另请注意，我的 drawRect: 方法相对较轻，除了我上面已经拥有的代码*之外什么都没有。）*

我目前有大约 10 多个自定义视图，每个视图都有自定义数据，要求相同的 WebView 为每个视图生成图像。同时，我从 NSCache 中获取图像（使用与每个自定义视图对应的标识符）并在它不存在或需要更新时创建它，如果它还不可用则返回 nil。`- (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame`因此，它不像从或其他方法调用 [view setNeedsDisplay:YES] 那样容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T22:59:11.630

> 我最初的直觉是尝试调用 [self setNeedsDisplay:YES]; 如果图像不可用，希望它会告诉 Cocoa 下次再次调用 drawRect （一次又一次，直到图像被绘制）

这将是非常低效的，即使它有效。

> 在接下来的几秒钟内它可能随时可用，那时我想画它

因此，当发生这种情况时，请致电`[view setNeedsDisplay:YES]`.

如果您无法直接确定图像何时可用，则必须进行轮询。以合理的间隔设置重复`NSTimer`- 比如说 0.25 秒左右。（这也是相当低效的，但至少它每秒只运行 4 次而不是 60 次或更糟。这是两个因素之间的权衡：您想要使用多少 CPU 和电池电量，以及时间之间的延迟时间图像变为可用以及您显示它的时间。）

> 我的 drawRect: 方法的重量相对较轻，除了我上面已经有的代码之外什么都没有。

即使你什么都不做`-drawRect:`，Cocoa 仍然需要在幕后做很多工作——它需要管理脏矩形，清除窗口后备存储的适当区域，将其刷新到屏幕等。那是免费的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T22:55:29.543

好吧，当下载完成时，通常会调用一些委托方法。您应该实现该方法并`setNeedsDisplay:YES`在那里调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T23:09:10.093

webkit 的文档：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DisplayWebContent/Tasks/ResourceLoading.html#//apple_ref/doc/uid/20002028-CJBEHAAG](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DisplayWebContent/Tasks/ResourceLoading.html#//apple_ref/doc/uid/20002028-CJBEHAAG)

您必须在 webview 委托中实现以下方法：

```
 - webView:resource:didFinishLoadingFromDataSource: 
```

在那里你可以打电话`[view setNeedsDisplay:Yes]`

# php - 创建本地智能手机应用程序的网站先决条件

> ID：10567980
> 
> 赞同：0
> 
> 时间：2012-05-12T22:50:30.347
> 
> 标签：php, android, iphone, smartphone

我正在用 PHP 和 mysql 创建一个网站。我计划在未来为它创建一个原生的智能手机应用程序。该应用程序将允许用户与我网站的数据库进行交互，并在新数据发布到他们的帐户时收到通知。我应该在我的网站中实现什么，同时为它期待未来的移动应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T23:05:52.533

我一直在为我的几个客户创建相同类型的系统。我为他们建立了一个网站，例如，客户在那里进行剪发预约，然后向发型师发送通知，通知他们新的预约信息。这与您正在寻找的东西相似吗？

另外，如果是这样，我需要知道您将使用哪种语言编写电话应用程序。如果您要学习一门新语言来执行此操作，我建议您使用 Java。

至于在实际创建移动应用程序之前需要实现任何东西。那是没有必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T22:59:56.590

当您创建本机应用程序时，您将希望通过您创建的 API 访问您的业务逻辑和数据库。所以当你开发你的网站时，你真的想从 MVC（模型-视图-控制器）架构的角度来思考。理想情况下，您的网站和移动应用程序都将共享相同的模型和控制器，并且您只需在每个中实现（非常）不同的视图。

例如，当您在网站或应用程序中登录时，您希望它调用服务器上完全相同的代码库（并传递完全相同的参数）来处理登录。因此，确保在设计网站时将您的业务方法（控制器逻辑）与表示层分离，并始终考虑“应该在我的 API 中公开此功能还是仅在网站上展示”。

如果你现在这样做，它会在以后为你省去很多痛苦。

# c# - RedirectToAction 从 [HttpPost] 内部到 [HttpGet] - 参数

> ID：10567984
> 
> 赞同：4
> 
> 时间：2012-05-12T22:51:07.500
> 
> 标签：c#, asp.net-mvc-3

下面的代码：

```
[HttpGet]
public ActionResult Edit(string id="")
{
    // ...
}

[HttpPost]
public ActionResult Edit(string itemId="", EditViewModel viewModel)
{
    // ...

    RedirectToAction("Edit", new { id = itemId });
} 
```

返回错误：`"Optional parameters must appear after all required parameters"`.

我认为它正在尝试重定向到 [HttpPost] 操作。

如何重定向到 [HttpGet] 操作？

我正在尝试实现保存功能，它将保存编辑并使用新值重新加载表单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T22:52:34.863

错误信息很清楚...

...如果您知道可选参数是具有默认值的参数（在您的情况下为空字符串）

```
[HttpPost]
public ActionResult Edit(EditViewModel viewModel, string itemId="")
{
    // ...

    RedirectToAction("Edit", new { id = itemId });
} 
```

你完成了

# perl - 检查 Perl 中的字节是否为 0xFF

> ID：10567996
> 
> 赞同：1
> 
> 时间：2012-05-12T22:52:51.790
> 
> 标签：perl

我想检查 Perl 中的一个字节是否设置为 0xFF。

我现在可以这样做来检查它：

```
unpack('C', $byte) == 255 
```

但这似乎不是正确或最有效的方法。是否有一个速记符号来检查这个可能会更快？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T22:59:05.983

简单呢？

```
if ($byte eq "\xff") { ... } 
```

# jquery - 在AJAX加载中替换div后重新加载动画脚本？

> ID：10567998
> 
> 赞同：1
> 
> 时间：2012-05-12T22:53:49.580
> 
> 标签：jquery, ajax

我的主页上有一个 div，它使用一个名为 hoverwords 的 jQuery 插件为 div 内的一些链接创建翻转动画，如下所示：

```
<div id="contentWrapper">    
    <div class="animations">
            <a href="#" id="animatedText1">Text1</a>
            <a href="#" id="animatedText2">Text2</a>
            <a href="#" id="animatedText3">Text3</a>
    </div>
</div> 
```

它使用以下脚本在首次加载时很好地加载插件：

```
$(function(){
     $(window).load(function(){
         $(".animations a").hoverwords();
     });    
}); 
```

然后，如果启用了 JavaScript，我将使用 AJAX 从我的其他页面异步加载内容。其他一些页面使用相同的 hoverwords 插件，我很难重新加载脚本，因为它没有被调用为我可能使用 .on() 或 .live() 绑定的事件。以下是我如何使用 jQuery 动画加载新内容以隐藏页面，然后在通过 AJAX 加载后显示新页面：

```
$(function() {

$(".button").click(function() {

    var anchor = $("#contentWrapper");

    var pageHeight = $("#contentWrapper").height();

    var pageName = 'null';

    var extension = '.htm';

    if ($(this).attr('id')==='home') {
        pageName = 'index';
        extension = '.html';
    } else {
        pageName = $(this).attr('id');
    }

        $.ajax({
        type : 'get',
        url : pageName + extension,

        success : function() {
            var $newContent = $('<div id="contentWrapper" />').load(pageName + extension + ' #contentWrapper > *');
            $("#contentWrapper").replaceWith($newContent);

        };
    });

});
}); 
```

我是 jQuery 新手，可能以完全错误的方式执行此操作，但此时我完全不知道如何将相同的脚本重新应用于新加载的 AJAX div ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T23:04:25.620

jQuery load 有一个回调参数，您可以使用该参数将您的 hoverwords 功能重新绑定到新添加的 DOM 元素。您需要使用回调处理程序，以便在加载新内容之前不要尝试将悬停词添加到 DOM：

```
 var $newContent = 
     $('<div id="contentWrapper" />')
         .load(pageName + extension + ' #contentWrapper > *', function() {

          // bind the hoverwords on the new content inserted in the DIV
          $("#contentWrapper").find(".animations a").hoverwords();

      }); 
```

另外，我不能 100% 确定 load 会返回任何东西给 $newContent。这应该由实际的回调处理程序处理，并在下载内容后添加到 DIV#contentWrapper。jQuery 网站上有更多[jQuery 加载示例。](http://api.jquery.com/load-event/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T22:56:34.483

也许我对问题的理解是错误的，但您可能想使用 live 而不是 load。

[http://api.jquery.com/live/](http://api.jquery.com/live/)

编辑：对不起，我的错。我会尝试跑步

```
$("#contentWrapper").hoverwords()  // or $("#contentWrapper a").hoverwords() 
```

在您替换内容后再次，但我现在停止猜测。对困惑感到抱歉。